<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>sap.ui.comp.SmartField Accessibility Test Page</title>

	<script src="../shared-config.js"></script>
	<script id="sap-ui-bootstrap"
			type="text/javascript"
			data-sap-ui-libs="sap.m, sap.ui.comp"
			data-sap-ui-resource-roots='{
				"qunit.internal.acc": "../../../../../../test-resources/sap/ui/core/qunit/internal/acc"
			}'
			src="../../../../../../resources/sap-ui-core.js">
	</script>

	<script id="mainView" type="sapui5/xmlview">
		<mvc:View xmlns:mvc="sap.ui.core.mvc" controllerName="mainView.controller"
			xmlns="sap.m"
			xmlns:smartForm="sap.ui.comp.smartform"
			xmlns:smartField="sap.ui.comp.smartfield"
			xmlns:html="http://www.w3.org/1999/xhtml"
			xmlns:l="sap.ui.layout"
		>
			<App>
				<Page id="page" titleLevel="H1" title="SmartField Accessibility Page">
						<smartForm:SmartForm id="form" editable="true" editTogglable="true" editToggled="handleEditToggled">
							<smartForm:layout>
								<smartForm:ColumnLayout columnsM="2" columnsL="3" columnsXL="6"/>
							</smartForm:layout>
							<smartForm:customToolbar>
								<Toolbar id="form-toolbar">
									<Title text="Product 2212121828" level="H2"/>
								</Toolbar>
							</smartForm:customToolbar>
							<smartForm:Group>
								<smartForm:GroupElement>
									<smartField:SmartField id="ProductID" value="{ProductID}" />
								</smartForm:GroupElement>
								<smartForm:GroupElement>
									<smartField:SmartField id="Description" value="{Description}" />
								</smartForm:GroupElement>
								<smartForm:GroupElement>
									<smartField:SmartField id="URL" value="{URL}" />
								</smartForm:GroupElement>
								<smartForm:GroupElement>
									<smartField:SmartField id="Phone" value="{Phone}"/>
								</smartForm:GroupElement>
								<smartForm:GroupElement>
									<smartField:SmartField id="Email" value="{Email}"/>
								</smartForm:GroupElement>
								<smartForm:GroupElement>
									<smartField:SmartField id="BOOL" value="{BOOL}" />
								</smartForm:GroupElement>
								<smartForm:GroupElement>
									<smartField:SmartField id="objectStatus" value="{ObjectStatus}"/>
								</smartForm:GroupElement>
								<smartForm:GroupElement>
									<smartField:SmartField id="FiscalYearPeriod" value="{FiscalYearPeriod}"/>
								</smartForm:GroupElement>

							</smartForm:Group>
						</smartForm:SmartForm>

						<smartForm:SmartForm id="form1" editable="true" editTogglable="true" editToggled="handleEditToggled">
							<smartForm:layout>
								<smartForm:ColumnLayout columnsM="2" columnsL="3" columnsXL="5"/>
							</smartForm:layout>
							<smartForm:customToolbar>
								<Toolbar id="form1-toolbar">
									<Title text="Different Prices" level="H2"/>
								</Toolbar>
							</smartForm:customToolbar>
							<smartForm:Group>
								<smartForm:GroupElement>
									<smartField:SmartField id="Price" value="{Price}" />
								</smartForm:GroupElement>
								<smartForm:GroupElement>
									<smartField:SmartField id="PricePerKG" value="{PricePerKG}"/>
								</smartForm:GroupElement>
								<smartForm:GroupElement>
									<smartField:SmartField id="TotalPrice" value="{TotalPrice}"/>
								</smartForm:GroupElement>
							</smartForm:Group>
						</smartForm:SmartForm>
						<smartForm:SmartForm editable="true" editTogglable="true" editToggled="handleEditToggled">
							<smartForm:layout>
								<smartForm:ColumnLayout columnsM="2" columnsL="3" columnsXL="5"/>
							</smartForm:layout>
							<smartForm:customToolbar>
								<Toolbar id="form2-toolbar">
									<Title text="SmartForm with Semantically Connected Fields" level="H2"/>
								</Toolbar>
							</smartForm:customToolbar>
						<smartForm:Group>
							<smartForm:SemanticGroupElement label="Country / City / Postal Code">
								<smartField:SmartField id="Country" value="{Country}" />
								<smartField:SmartField id="City" value="{City}" />
								<smartField:SmartField id="PostalCode" value="{PostalCode}" />
							</smartForm:SemanticGroupElement>
						</smartForm:Group>
					</smartForm:SmartForm>
				</Page>
			</App>
		</mvc:View>
	</script>

	<script id="metadata" type="text/xmldata"><?xml version="1.0" encoding="utf-8"?>
	<edmx:Edmx Version="1.0"
			xmlns:edmx="http://schemas.microsoft.com/ado/2007/06/edmx"
			xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"
			xmlns:sap="http://www.sap.com/Protocols/SAPData">
		<edmx:DataServices m:DataServiceVersion="2.0">
			<Schema Namespace="AccessibilityNamespace"
					sap:schema-version="1"
					xmlns="http://schemas.microsoft.com/ado/2008/09/edm">
				<EntityType Name="Types"
				sap:label="TypesSet"
				sap:content-version="1">
					<Key>
						<PropertyRef Name="ProductID"/>
					</Key>
					<Property Name="ProductID" Type="Edm.String" Nullable="false" MaxLength="4" sap:creatable="false" sap:label="Product ID"/>
					<Property Name="Description" Type="Edm.String" Nullable="true" MaxLength="256" sap:label="Description" sap:creatable="false" sap:updatable="true" sap:sortable="false" />
					<Property Name="Email" Type="Edm.String" sap:label="Email" sap:creatable="false" sap:updatable="true" sap:sortable="false" />
					<Property Name="Phone" Type="Edm.String" Nullable="true" sap:label="Phone" sap:creatable="false" sap:updatable="true" sap:sortable="false" />
					<Property Name="URL" Type="Edm.String" Nullable="true" sap:label="Our Website" sap:creatable="false" sap:updatable="true" sap:sortable="false" />
					<Property Name="Price" Type="Edm.Decimal" Precision="10" Scale="2" sap:label="Price" sap:unit="CurrencyCode"/>
					<Property Name="TotalPrice" Type="Edm.Decimal" Precision="10" Scale="2" sap:label="Total Price" sap:unit="CurrencyCodeFixedValues"/>
					<Property Name="PricePerKG" Type="Edm.Decimal" Precision="10" Scale="2" sap:label="Price Per Kilogram" sap:unit="CurrencyCodeComboBox" sap:updatable="false"/>
					<Property Name="SupplierID" Type="Edm.Int16" sap:label="Supplier ID"/>
					<Property Name="BOOL" Type="Edm.Boolean" sap:label="Wifi"/>
					<Property Name="ObjectStatus" Type="Edm.String" Nullable="true"
					MaxLength="20" sap:label="Status of Product" sap:creatable="false" sap:updatable="false" sap:sortable="false"/>
					<Property Name="CurrencyCodeFixedValues" Type="Edm.String" sap:label="Main Currency Code" sap:updatable="false" sap:semantics="currency-code"/>
					<Property Name="CurrencyCodeComboBox" Type="Edm.String" sap:label="Second option of Currency Code" sap:semantics="currency-code" sap:updatable="true" sap:value-list="fixed-values"/>
					<Property Name="CurrencyCode" Type="Edm.String" sap:label="Currency Code" sap:semantics="currency-code"/>
					<Property Name="Country" Type="Edm.String" sap:label="Country" />
					<Property Name="City" Type="Edm.String" sap:label="City" />
					<Property Name="PostalCode" Type="Edm.String" sap:label="Postal Code" sap:display-format="NonNegative" />
					<Property Name="FiscalYearPeriod" Type="Edm.String" sap:label="Fiscal Year Period" MaxLength="7"/>
				</EntityType>

				<EntityType Name="CurrencyType" sap:content-version="1">
						<Key>
							<PropertyRef Name="CURR" />
						</Key>
						<Property Name="CURR" Type="Edm.String" sap:text="DESCR" Nullable="false" MaxLength="20" sap:label="Key"/>
						<Property Name="DESCR" Type="Edm.String" sap:label="Description"/>
						<Property Name="DESCR1" Type="Edm.String" sap:label="Dummy Filter 1"/>
						<Property Name="DESCR2" Type="Edm.String" sap:label="Dummy Filter 2"/>
						<Property Name="DESCR3" Type="Edm.String" sap:label="Dummy Filter 3"/>
						<Property Name="DESCR4" Type="Edm.String" sap:label="Dummy Filter 4"/>
						<Property Name="DESCR5" Type="Edm.String" sap:label="Dummy Filter 5"/>
						<Property Name="DESCR6" Type="Edm.String" sap:label="Dummy Filter 6"/>
						<Property Name="DESCR7" Type="Edm.String" sap:label="Dummy Filter 7"/>
						<Property Name="DESCR8" Type="Edm.String" sap:label="Dummy Filter 8"/>
					</EntityType>
				<EntityContainer Name="AccessibilityNamespace_Entities"
								m:IsDefaultEntityContainer="true"
								sap:supported-formats="atom json xlsx">
					<EntitySet Name="CurrencySet"
								   EntityType="AccessibilityNamespace.CurrencyType"
								   sap:creatable="false"
								   sap:updatable="true"
								   sap:deletable="false"
								   sap:addressable="false"
								   sap:content-version="1" />
					<EntitySet Name="TypesSet" EntityType="AccessibilityNamespace.Types" sap:creatable="false" sap:updatable="true" sap:deletable="false" sap:addressable="false" sap:content-version="1" />

				</EntityContainer>
				<Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm" Target="AccessibilityNamespace.Types/Description">
					<Annotation Term="com.sap.vocabularies.UI.v1.MultiLineText" />
				</Annotations>
				<Annotations Target="AccessibilityNamespace.Types/CurrencyCodeFixedValues"
								 xmlns="http://docs.oasis-open.org/odata/ns/edm">

						<Annotation Term="com.sap.vocabularies.Common.v1.ValueListWithFixedValues" Bool="true"/>
						<Annotation Term="com.sap.vocabularies.Common.v1.ValueList">
							<Record>
								<PropertyValue Property="Label" String="Types"/>
								<PropertyValue Property="CollectionPath" String="CurrencySet"/>
								<PropertyValue Property="SearchSupported" Bool="true"/>
								<PropertyValue Property="Parameters">
									<Collection>
										<Record Type="com.sap.vocabularies.Common.v1.ValueListParameterInOut">
											<PropertyValue Property="LocalDataProperty" PropertyPath="CurrencyCodeFixedValues"/>
											<PropertyValue Property="ValueListProperty" String="CURR"/>
										</Record>
										<Record Type="com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly">
											<PropertyValue Property="ValueListProperty" String="DESCR"/>
										</Record>
									</Collection>
								</PropertyValue>
							</Record>
						</Annotation>
					</Annotations>
					<Annotations Target="AccessibilityNamespace.Types/CurrencyCodeComboBox"
								 xmlns="http://docs.oasis-open.org/odata/ns/edm">
						<Annotation Term="com.sap.vocabularies.Common.v1.ValueList">
							<Record>
								<PropertyValue Property="Label" String="Types"/>
								<PropertyValue Property="CollectionPath" String="CurrencySet"/>
								<PropertyValue Property="SearchSupported" Bool="true"/>
								<PropertyValue Property="Parameters">
									<Collection>
										<Record Type="com.sap.vocabularies.Common.v1.ValueListParameterInOut">
											<PropertyValue Property="LocalDataProperty" PropertyPath="CurrencyCodeComboBox"/>
											<PropertyValue Property="ValueListProperty" String="CURR"/>
										</Record>
										<Record Type="com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly">
											<PropertyValue Property="ValueListProperty" String="DESCR"/>
										</Record>
									</Collection>
								</PropertyValue>
							</Record>
						</Annotation>
					</Annotations>

					<Annotations Target="AccessibilityNamespace.Types/FiscalYearPeriod"
								 xmlns="http://docs.oasis-open.org/odata/ns/edm">
						<Annotation Term="com.sap.vocabularies.Common.v1.IsFiscalYearPeriod" Bool="true"/>					
					</Annotations>

					<Annotations Target="AccessibilityNamespace.Types/CurrencyCode"
								 xmlns="http://docs.oasis-open.org/odata/ns/edm">
						<Annotation Term="com.sap.vocabularies.Common.v1.ValueList">
							<Record>
								<PropertyValue Property="Label" String="Types"/>
								<PropertyValue Property="CollectionPath" String="CurrencySet"/>
								<PropertyValue Property="SearchSupported" Bool="true"/>
								<PropertyValue Property="Parameters">
									<Collection>
										<Record Type="com.sap.vocabularies.Common.v1.ValueListParameterInOut">
											<PropertyValue Property="LocalDataProperty" PropertyPath="CurrencyCode"/>
											<PropertyValue Property="ValueListProperty" String="CURR"/>
										</Record>
										<Record Type="com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly">
											<PropertyValue Property="ValueListProperty" String="DESCR"/>
										</Record>
									</Collection>
								</PropertyValue>
							</Record>
						</Annotation>
					</Annotations>
					<Annotations Target="AccessibilityNamespace.Types/URL" xmlns="http://docs.oasis-open.org/odata/ns/edm">
						<Annotation Term="Org.OData.Core.V1.IsUrl" Bool="true" />
					</Annotations>

					<Annotations Target="AccessibilityNamespace.Types/Phone" xmlns="http://docs.oasis-open.org/odata/ns/edm">
						<Annotation Term="com.sap.vocabularies.Communication.v1.IsPhoneNumber" Bool="true" />
					</Annotations>
					<Annotations Target="AccessibilityNamespace.Types/Email" xmlns="http://docs.oasis-open.org/odata/ns/edm">
						<Annotation Term="com.sap.vocabularies.Communication.v1.IsEmailAddress" Bool="true" />
					</Annotations>

			</Schema>
		</edmx:DataServices>
	</edmx:Edmx>
	</script>

	<script id="dataSection" type="text/json">
	{"d": {
		"__count": "1",
		"results": [
				{
					"__metadata": { "uri": "testService.TypesSet/TypesSet('0001')", "type": "AccessibilityNamespace.Types" },
					"ProductID": "0001",
					"Description": "Gladiator MX: DDR2 RoHS 128MB Supporting 512MB Clock rate: 350 MHz Memory Clock: 533 MHz, Bus Type: PCI-Express, Memory Type: DDR2 Memory Bus: 32-bit Highlighted Features: DVI Out, TV Out , HDTV",
					"Price": "45301.236",
					"SupplierID": 35,
					"ObjectStatus": "",
					"BOOL": true,
					"CurrencyCodeFixedValues": "EUR",
					"CurrencyCodeComboBox": "USD",
					"CurrencyCode": "EUR",
					"Email": "gladiator@sap.com",
					"Phone": "+496227747474",
					"URL": "https://www.sap.com",
					"Country": "Germany",
					"City": "Berlin",
					"PostalCode": "98122",
					"PricePerKG": "100.00",
					"TotalPrice": "500.00",
					"FiscalYearPeriod": "001/2025"
				}
			]
	}}</script>
	<script id="dataSectionCurrency" type="text/json">
	{"d": {
		"__count": "4",
		"results": [
			{
				"__metadata": {
					"uri": "testService.CurrencySet/CurrencySet('0001')",
					"type": "AccessibilityNamespace.CurrencySet"
				},
				"CURR": "EUR",
				"DESCR": "European Euro"
			},
			{
				"__metadata": {
					"uri": "testService.CurrencySet/CurrencySet('0002')",
					"type": "AccessibilityNamespace.CurrencySet"
				},
				"CURR": "USD",
				"DESCR": "United States Dollar"
			},
			{
				"__metadata": {
					"uri": "testService.CurrencySet/CurrencySet('0003')",
					"type": "AccessibilityNamespace.CurrencySet"
				},
				"CURR": "GBP",
				"DESCR": "British Pound"
			},
			{
				"__metadata": {
					"uri": "testService.CurrencySet/CurrencySet('0004')",
					"type": "AccessibilityNamespace.CurrencySet"
				},
				"CURR": "DKK",
				"DESCR": "Danish Krone"
			}
		]
	}}
	</script>

	<script>
		sap.ui.getCore().attachInit(function () {
			"use strict";

			sap.ui.require([
				"sap/ui/core/mvc/XMLView",
				"sap/ui/core/mvc/Controller",
				"sap/ui/model/odata/v2/ODataModel",
				"sap/ui/core/util/MockServer"
			], function (
					XMLView,
					Controller,
					ODataModel,
					MockServer
			) {
				var MyController = Controller.extend("mainView.controller", {
					onInit : function() {
						var oModel,
							sServiceName = "testService",
							oView = this.getView();

						this.setupMockServer(sServiceName);

						oModel = new ODataModel(sServiceName + "/", {
							useBatch: false,
							defaultBindingMode: "TwoWay"
						});
						oView.setModel(oModel);

						oView.bindElement("/TypesSet('0001')");
						this.byId("Description").data("multiLineSettings", {'cols': 50, 'rows': 4});
					},
					handleEditToggled: function() {
						// dummy function to trigger validation
					},
					onExit: function() {
						this._oMockServer.stop();
					},
					setupMockServer: function (service) {
						var basePath = service,
								mockServer = new MockServer({
									rootUri: basePath
								}),
								aReqList = mockServer.getRequests();

						// configure mock server with a delay
						MockServer.config({
							autoRespond: true,
							autoRespondAfter: 500
						});

						// $metadata
						aReqList.push({
							method: 'GET',
							path: '/\\$metadata(.*)',
							response: function (req, resp) {
								var data = jQuery("#metadata").html();
								req.respondXML(200, {}, data);
							}
						});

						// Data
						aReqList.push({
							method: 'GET',
							path: '/\\TypesSet(.*)',
							response: function (req, resp) {
								var data = jQuery("#dataSection").html();
								req.respondJSON(200, {}, data);
							}
						});

						// Data
						aReqList.push({
							method: 'GET',
							path: '/\\CurrencySet[\/?](.*)',
							response: function (req, resp) {
								req.respondJSON(200, {}, jQuery("#dataSectionCurrency").html());
							}
						});

						mockServer.setRequests(aReqList);
						mockServer.simulate(basePath + '/$metadata',
								{
									sMockdataBaseUrl: basePath + '/Employees',
									bGenerateMissingMockData: true
								});
						mockServer.start();
					}
				});

				XMLView.create({
					id: "idView",
					definition: document.getElementById("mainView").textContent,
					controller: new MyController()
				}).then(function (oView) {
					oView.placeAt("content");
				});

			});

		});

	</script>
</head>

<body class='sapUiBody'>
	<div id='content'></div>
</body>

</html>
