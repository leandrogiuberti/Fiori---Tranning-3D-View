{"version":3,"file":"RetrieveCard.spec.js","names":["sap","ui","define","__fs","__path","ResourceBundle","sap_cards_ap_common_helpers_ApplicationInfo","sap_cards_ap_common_services_RetrieveCard","sap_cards_ap_test_JestHelper","UIComponent","HashChanger","AdaptiveCardSampleManifest","IntegrationCardManifestWithDateTimeOffsetAsKeyParameter","IntegrationCardManifestWithoutSelectParam","IntegrationCardSampleManifest","_interopRequireDefault","obj","__esModule","default","_catch","body","recover","result","e","then","readFileSync","path","ApplicationInfo","CardTypes","_getObjectPageCardManifest","addActionsToCardHeader","getCardManifestForPreview","getCardPath","getObjectPageCardManifestForPreview","isSemanticCardGeneration","updateHeaderDataPath","compileCDS","getMetaModel","i18nMap","appTitle","appDescription","CardGeneratorHeaderTitle","CardGeneratorHeaderSubTitle","CardGeneratorGroupPropertyLabel_Groups_0_Items_0","CardGeneratorGroupPropertyLabel_Groups_0_Items_1","CardGeneratorGroupPropertyLabel_Groups_0_Items_2","CardGeneratorGroupHeader_Groups_0","CardGeneratorGroupPropertyLabel_Groups_1_Items_0","CardGeneratorGroupPropertyLabel_Groups_1_Items_1","CardGeneratorGroupPropertyLabel_Groups_1_Items_2","CardGeneratorGroupHeader_Groups_1","describe","appManifest","id","type","uri","embeds","ObjectPage","manifests","testEntity","localUri","testEntity1","test","sType","INTEGRATION","entitySet","cardPath","expect","toBe","ADAPTIVE","it","cardManifest","header","applicationInfo","semanticObject","action","contextParameters","variantParameter","contextParametersKeyValue","key","value","Promise","resolve","actions","toBeDefined","parameters","ibnTarget","toEqual","ibnParams","stateData","JSON","parse","toHaveProperty","selectionVariant","SelectOptions","length","reject","globalFetchMock","sapAppId","Component","extend","metadata","manifest","createContent","rootComponent","beforeAll","jest","spyOn","window","mockImplementation","url","ok","json","afterAll","mockRestore","fetchedParams","componentName","cardType","toMatchSnapshot","rootComponent1","getManifest","fn","mockReturnValue","_temp","error","resourceBundleCreateSpy","testEntity2","getText","windowSpy","getModelSpy","beforeEach","getInstance","_resetInstance","isA","getODataEntitySet","entityType","getODataEntityType","property","name","propertyRef","getObject","node_key","IsActiveEntity","getResourceBundle","oUrlInfo","afterEach","hasher","getHash","isDesignMode","mIntegrationCardManifest","location","href","origin","pathname","search","hash","hashChangerMock","hrefForAppSpecificHash","mockRouter","mAdaptiveCardManifest","data","maxLength","kind","nullable","CreatedByUser","CreationDateTime","EndDate","metaModel","routing","targets","SalesOrderManageObjectPage","CashBank","hideActions","metadataUrl","join","__dirname","odataFormat","_getMetaModel","includeActions","_temp2","appComponent","originalLocation","Object","defineProperty","writable","appComponentWithoutCards","undefined","appComponentV4","manifestContent","manifestContentV4","getTestsuiteFilePath","relativePath","setLocationSearchAndOrigin","createMockApplicationInfoV2","appInfo","_rootComponent","getContextParametersKeyValue","fetchDetails","mockResolvedValue","context","resourceBundle","odataModel","navigationURI","createMockApplicationInfoV4","metadataPath","annotationsPath","manifestPath","metadataContent","annotationsContent","metadataPathV4","annotationsPathV4","manifestPathV4","metadataContentV4","annotationsContentV4","includes","status","text","headers","Headers","Error","getModel","sServiceUrl","aAnnotationURIs","getServiceUrl","aAnnotationUris","clearAllMocks","mockApplicationInfoV2","mockApplicationInfoV4","mockRejectedValue","rejects","toThrow","mockImplementationOnce","promises","all","results","_temp3","fetchOptions","_temp4","keyParameters","_temp5","salesOrder","_temp6"],"sources":["RetrieveCard.spec.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport { readFileSync } from \"fs\";\nimport path from \"path\";\nimport ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport { ApplicationInfo } from \"sap/cards/ap/common/helpers/ApplicationInfo\";\nimport {\n\tCardTypes,\n\t_getObjectPageCardManifest,\n\taddActionsToCardHeader,\n\tgetCardManifestForPreview,\n\tgetCardPath,\n\tgetObjectPageCardManifestForPreview,\n\tisSemanticCardGeneration,\n\tupdateHeaderDataPath\n} from \"sap/cards/ap/common/services/RetrieveCard\";\nimport { compileCDS, getMetaModel } from \"sap/cards/ap/test/JestHelper\";\nimport UIComponent from \"sap/ui/core/UIComponent\";\nimport HashChanger from \"sap/ui/core/routing/HashChanger\";\nimport ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport * as AdaptiveCardSampleManifest from \"../testData/AdaptiveCardSampleManifest\";\nimport * as IntegrationCardManifestWithDateTimeOffsetAsKeyParameter from \"../testData/IntegrationCardManifestWithDateTimeOffsetAsKeyParameter\";\nimport * as IntegrationCardManifestWithoutSelectParam from \"../testData/IntegrationCardManifestWithoutSelectParam\";\nimport * as IntegrationCardSampleManifest from \"../testData/IntegrationCardSampleManifest\";\n\nconst i18nMap: {\n\t[key: string]: string;\n} = {\n\tappTitle: \"Sales Order\",\n\tappDescription: \"A Fiori application.\",\n\tCardGeneratorHeaderTitle: \"Sales Order\",\n\tCardGeneratorHeaderSubTitle: \"A Fiori application.\",\n\tCardGeneratorGroupPropertyLabel_Groups_0_Items_0: \"Net Amount\",\n\tCardGeneratorGroupPropertyLabel_Groups_0_Items_1: \"Gross Amount\",\n\tCardGeneratorGroupPropertyLabel_Groups_0_Items_2: \"Tax Amount\",\n\tCardGeneratorGroupHeader_Groups_0: \"Amount\",\n\tCardGeneratorGroupPropertyLabel_Groups_1_Items_0: \"Business Partner ID\",\n\tCardGeneratorGroupPropertyLabel_Groups_1_Items_1: \"Created At\",\n\tCardGeneratorGroupPropertyLabel_Groups_1_Items_2: \"Sales Order ID\",\n\tCardGeneratorGroupHeader_Groups_1: \"Additional Info\"\n};\n\ndescribe(\"getCardPath\", () => {\n\tconst appManifest = {\n\t\t\"sap.app\": {\n\t\t\tid: \"testComponent\",\n\t\t\ttype: \"application\"\n\t\t},\n\t\t\"sap.ui5\": {},\n\t\t\"sap.platform.abap\": {\n\t\t\turi: \"/sap/bc/ui5_ui5/sap/salesOrderManage/webapp\"\n\t\t},\n\t\t\"sap.cards.ap\": {\n\t\t\tembeds: {\n\t\t\t\tObjectPage: {\n\t\t\t\t\tdefault: \"testEntity\",\n\t\t\t\t\tmanifests: {\n\t\t\t\t\t\ttestEntity: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlocalUri: \"cards/op/testEntity/\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\ttestEntity1: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlocalUri: \"cards/op/testEntity1/\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"sap.ui.generic.app\": {}\n\t};\n\n\ttest(\"returns the card path for integration card\", () => {\n\t\tconst sType = CardTypes.INTEGRATION;\n\t\tconst entitySet = \"testEntity\";\n\t\tconst cardPath = getCardPath(sType, entitySet, appManifest);\n\n\t\texpect(cardPath).toBe(\"/cards/op/testEntity/manifest.json\");\n\t});\n\n\ttest(\"returns the card path for integration card when localUri is without training slash\", () => {\n\t\tconst appManifest = {\n\t\t\t\"sap.app\": {\n\t\t\t\tid: \"testComponent\"\n\t\t\t},\n\t\t\t\"sap.ui5\": {},\n\t\t\t\"sap.ui\": {},\n\t\t\t\"sap.cards.ap\": {\n\t\t\t\tembeds: {\n\t\t\t\t\tObjectPage: {\n\t\t\t\t\t\tdefault: \"testEntity\",\n\t\t\t\t\t\tmanifests: {\n\t\t\t\t\t\t\ttestEntity: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlocalUri: \"cards/op/testEntity\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tconst sType = CardTypes.INTEGRATION;\n\t\tconst entitySet = \"testEntity\";\n\t\tconst cardPath = getCardPath(sType, entitySet, appManifest);\n\n\t\texpect(cardPath).toBe(\"/cards/op/testEntity/manifest.json\");\n\t});\n\n\ttest(\"returns the card path for adaptive card\", () => {\n\t\tconst sType = CardTypes.ADAPTIVE;\n\t\tconst entitySet = \"testEntity\";\n\t\tconst cardPath = getCardPath(sType, entitySet, appManifest);\n\n\t\texpect(cardPath).toBe(\"/cards/op/testEntity/adaptive-manifest.json\");\n\t});\n\n\ttest(\"returns empty path when sap.cards.ap's embeds object page configuration is empty\", () => {\n\t\tappManifest[\"sap.cards.ap\"].embeds.ObjectPage.manifests = {} as any;\n\t\tconst sType = CardTypes.ADAPTIVE;\n\t\tconst entitySet = \"testEntity\";\n\t\tconst cardPath = getCardPath(sType, entitySet, appManifest);\n\n\t\texpect(cardPath).toBe(\"\");\n\t});\n\n\ttest(\"returns empty path when sap.cards.ap configuration is not there in appManifest\", () => {\n\t\tappManifest[\"sap.cards.ap\"] = {} as any;\n\t\tconst sType = CardTypes.ADAPTIVE;\n\t\tconst entitySet = \"testEntity\";\n\t\tconst cardPath = getCardPath(sType, entitySet, appManifest);\n\n\t\texpect(cardPath).toBe(\"\");\n\t});\n});\n\ndescribe(\"addActionsToCardHeader\", () => {\n\tit(\"should add navigation action with correct parameters to card header\", async () => {\n\t\tconst cardManifest = {\n\t\t\t\"sap.card\": {\n\t\t\t\theader: {}\n\t\t\t}\n\t\t} as any;\n\n\t\tconst applicationInfo = {\n\t\t\tsemanticObject: \"SalesOrder\",\n\t\t\taction: \"display\",\n\t\t\tcontextParameters: \"OrderID=123,CustomerID=456\",\n\t\t\tvariantParameter: \"abc\",\n\t\t\tcontextParametersKeyValue: [\n\t\t\t\t{ key: \"OrderID\", value: \"123\" },\n\t\t\t\t{ key: \"CustomerID\", value: \"456\" }\n\t\t\t]\n\t\t};\n\n\t\tawait addActionsToCardHeader(cardManifest, applicationInfo);\n\n\t\texpect(cardManifest[\"sap.card\"][\"header\"].actions).toBeDefined();\n\t\texpect(cardManifest[\"sap.card\"][\"header\"].actions[0].type).toBe(\"Navigation\");\n\t\texpect(cardManifest[\"sap.card\"][\"header\"].actions[0].parameters.ibnTarget).toEqual({\n\t\t\tsemanticObject: \"SalesOrder\",\n\t\t\taction: \"display\"\n\t\t});\n\t\texpect(cardManifest[\"sap.card\"][\"header\"].actions[0].parameters.ibnParams[\"OrderID\"]).toBe(\"123\");\n\t\texpect(cardManifest[\"sap.card\"][\"header\"].actions[0].parameters.ibnParams[\"CustomerID\"]).toBe(\"456\");\n\t\texpect(cardManifest[\"sap.card\"][\"header\"].actions[0].parameters.ibnParams[\"sap-appvar-id\"]).toBe(\"abc\");\n\n\t\tconst stateData = JSON.parse(cardManifest[\"sap.card\"][\"header\"].actions[0].parameters.ibnParams[\"sap-xapp-state-data\"]);\n\t\texpect(stateData).toHaveProperty(\"selectionVariant\");\n\t\texpect(stateData.selectionVariant).toHaveProperty(\"SelectOptions\");\n\t\texpect(stateData.selectionVariant.SelectOptions.length).toBe(2);\n\t});\n\n\tit(\"should handle empty variantParameter\", async () => {\n\t\tconst cardManifest = {\n\t\t\t\"sap.card\": {\n\t\t\t\theader: {}\n\t\t\t}\n\t\t} as any;\n\n\t\tconst applicationInfo = {\n\t\t\tsemanticObject: \"Product\",\n\t\t\taction: \"edit\",\n\t\t\tcontextParameters: \"ProductID=789\",\n\t\t\tvariantParameter: null,\n\t\t\tcontextParametersKeyValue: [{ key: \"ProductID\", value: \"789\" }]\n\t\t};\n\n\t\tawait addActionsToCardHeader(cardManifest, applicationInfo);\n\n\t\texpect(cardManifest[\"sap.card\"][\"header\"].actions[0].parameters.ibnTarget).toEqual({\n\t\t\tsemanticObject: \"Product\",\n\t\t\taction: \"edit\"\n\t\t});\n\t\texpect(cardManifest[\"sap.card\"][\"header\"].actions[0].parameters.ibnParams[\"ProductID\"]).toBe(\"789\");\n\n\t\tconst stateData = JSON.parse(cardManifest[\"sap.card\"][\"header\"].actions[0].parameters.ibnParams[\"sap-xapp-state-data\"]);\n\t\texpect(stateData).toHaveProperty(\"selectionVariant\");\n\t\texpect(stateData.selectionVariant).toHaveProperty(\"SelectOptions\");\n\t\texpect(stateData.selectionVariant.SelectOptions.length).toBe(1);\n\t});\n});\n\ndescribe(\"_getObjectPageCardManifest\", () => {\n\tlet globalFetchMock: jest.SpyInstance;\n\tconst sapAppId = \"testComponent1\";\n\tconst appManifest = {\n\t\t\"sap.app\": {\n\t\t\tid: sapAppId,\n\t\t\ttype: \"application\"\n\t\t},\n\t\t\"sap.ui5\": {},\n\t\t\"sap.platform.abap\": {\n\t\t\turi: \"\"\n\t\t},\n\t\t\"sap.cards.ap\": {\n\t\t\tembeds: {\n\t\t\t\tObjectPage: {\n\t\t\t\t\tdefault: \"testEntity\",\n\t\t\t\t\tmanifests: {\n\t\t\t\t\t\ttestEntity: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlocalUri: \"cards/op/testEntity/\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"sap.ui.generic.app\": {}\n\t};\n\tconst Component = UIComponent.extend(\"rootComponent\", {\n\t\tmetadata: {\n\t\t\tmanifest: appManifest\n\t\t},\n\t\tcreateContent() {\n\t\t\treturn null;\n\t\t}\n\t});\n\tconst rootComponent = new Component(sapAppId);\n\tbeforeAll(() => {\n\t\tglobalFetchMock = jest.spyOn(window, \"fetch\").mockImplementation((url: string) => {\n\t\t\tif (url === \"/manifest.json\") {\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\tok: true,\n\t\t\t\t\tjson: () => {\n\t\t\t\t\t\treturn appManifest;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (url === \"/cards/op/testEntity/manifest.json\") {\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\tok: true,\n\t\t\t\t\tjson: () => {\n\t\t\t\t\t\treturn IntegrationCardSampleManifest;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (url === \"/cards/op/testEntity/adaptive-manifest.json\") {\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\tok: true,\n\t\t\t\t\tjson: () => {\n\t\t\t\t\t\treturn AdaptiveCardSampleManifest;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t});\n\n\tafterAll(() => {\n\t\tglobalFetchMock.mockRestore();\n\t});\n\n\ttest(\"returns the integration card manifest for object page card\", async () => {\n\t\tconst fetchedParams = {\n\t\t\tcomponentName: \"testComponent1\",\n\t\t\tentitySet: \"testEntity\",\n\t\t\tcardType: CardTypes.INTEGRATION\n\t\t};\n\n\t\tconst cardManifest = await _getObjectPageCardManifest(rootComponent, fetchedParams);\n\t\texpect(cardManifest).toMatchSnapshot();\n\t});\n\n\ttest(\"returns the adaptive card manifest for object page card\", async () => {\n\t\tconst fetchedParams = {\n\t\t\tcomponentName: \"testComponent1\",\n\t\t\tentitySet: \"testEntity\",\n\t\t\tcardType: CardTypes.ADAPTIVE\n\t\t};\n\n\t\tconst cardManifest = await _getObjectPageCardManifest(rootComponent, fetchedParams);\n\t\texpect(cardManifest).toMatchSnapshot();\n\t});\n\n\ttest(\"rejects the promise when entity set name is empty\", async () => {\n\t\tconst fetchedParams = {\n\t\t\tcomponentName: \"testComponent1\",\n\t\t\tentitySet: \"\",\n\t\t\tcardType: \"\"\n\t\t};\n\t\tconst rootComponent1 = {\n\t\t\tgetManifest: jest.fn().mockReturnValue({})\n\t\t};\n\n\t\ttry {\n\t\t\tawait _getObjectPageCardManifest(rootComponent1, fetchedParams);\n\t\t} catch (error) {\n\t\t\texpect(error).toBeDefined();\n\t\t\texpect(error).toBe(\"No cards available for this application\");\n\t\t}\n\t});\n});\n\ndescribe(\"getObjectPageCardManifestForPreview - V2\", () => {\n\tlet globalFetchMock: jest.SpyInstance;\n\tlet resourceBundleCreateSpy: jest.SpyInstance;\n\tconst sapAppId = \"testComponent2\";\n\tconst appManifest = {\n\t\t\"sap.app\": {\n\t\t\tid: sapAppId,\n\t\t\ttype: \"application\"\n\t\t},\n\t\t\"sap.ui5\": {},\n\t\t\"sap.platform.abap\": {\n\t\t\turi: \"\"\n\t\t},\n\t\t\"sap.cards.ap\": {\n\t\t\tembeds: {\n\t\t\t\tObjectPage: {\n\t\t\t\t\tdefault: \"testEntity\",\n\t\t\t\t\tmanifests: {\n\t\t\t\t\t\ttestEntity: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlocalUri: \"cards/op/testEntity/\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\ttestEntity1: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlocalUri: \"cards/op/testEntity1/\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\ttestEntity2: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlocalUri: \"cards/op/testEntity2/\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"sap.ui.generic.app\": {}\n\t};\n\tconst Component = UIComponent.extend(\"rootComponent\", {\n\t\tmetadata: {\n\t\t\tmanifest: appManifest\n\t\t},\n\t\tcreateContent() {\n\t\t\treturn null;\n\t\t}\n\t});\n\tconst rootComponent = new Component(sapAppId);\n\n\tbeforeAll(() => {\n\t\tresourceBundleCreateSpy = jest.spyOn(ResourceBundle, \"create\").mockImplementation(() => {\n\t\t\treturn {\n\t\t\t\tgetText: (key: string) => {\n\t\t\t\t\treturn i18nMap[key] || key;\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t\tglobalFetchMock = jest.spyOn(window, \"fetch\").mockImplementation((url: string) => {\n\t\t\tif (url === \"/manifest.json\") {\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\tok: true,\n\t\t\t\t\tjson: () => {\n\t\t\t\t\t\treturn appManifest;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (url === \"/cards/op/testEntity1/manifest.json\") {\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\tok: true,\n\t\t\t\t\tjson: () => {\n\t\t\t\t\t\treturn IntegrationCardManifestWithoutSelectParam;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (url === \"/cards/op/testEntity/manifest.json\") {\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\tok: true,\n\t\t\t\t\tjson: () => {\n\t\t\t\t\t\treturn IntegrationCardSampleManifest;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (url === \"/cards/op/testEntity/adaptive-manifest.json\") {\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\tok: true,\n\t\t\t\t\tjson: () => {\n\t\t\t\t\t\treturn AdaptiveCardSampleManifest;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (url === \"/cards/op/testEntity2/manifest.json\") {\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\tok: true,\n\t\t\t\t\tjson: () => {\n\t\t\t\t\t\treturn IntegrationCardManifestWithDateTimeOffsetAsKeyParameter;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t});\n\n\tafterAll(() => {\n\t\tresourceBundleCreateSpy.mockRestore();\n\t\tglobalFetchMock.mockRestore();\n\t});\n\tlet windowSpy: jest.SpyInstance;\n\tlet getModelSpy: jest.SpyInstance;\n\n\tbeforeEach(() => {\n\t\tApplicationInfo.getInstance(rootComponent)._resetInstance();\n\t\twindowSpy = jest.spyOn(window, \"window\", \"get\");\n\t\tgetModelSpy = jest.spyOn(rootComponent, \"getModel\").mockImplementation(() => {\n\t\t\treturn {\n\t\t\t\tisA: () => false,\n\t\t\t\tgetMetaModel: function () {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tgetODataEntitySet: function () {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tentityType: \"container.testEntityType\"\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetODataEntityType: function () {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tproperty: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: \"node_key\",\n\t\t\t\t\t\t\t\t\t\ttype: \"Edm.Guid\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: \"IsActiveEntity\",\n\t\t\t\t\t\t\t\t\t\ttype: \"Edm.Boolean\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tkey: {\n\t\t\t\t\t\t\t\t\tpropertyRef: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: \"node_key\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: \"IsActiveEntity\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tgetObject: () => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tnode_key: \"12345\",\n\t\t\t\t\t\tIsActiveEntity: true\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tgetResourceBundle: jest.fn().mockImplementation(() => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\toUrlInfo: {\n\t\t\t\t\t\t\turl: \"i18n.properties\"\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t};\n\t\t});\n\t});\n\n\tafterEach(() => {\n\t\twindowSpy.mockRestore();\n\t\tgetModelSpy.mockRestore();\n\t});\n\n\ttest(\"returns integration card manifest\", async () => {\n\t\twindowSpy.mockImplementation(() => ({\n\t\t\thasher: {\n\t\t\t\tgetHash: () => \"test-intent&/testEntity(node_key='12345')\"\n\t\t\t}\n\t\t}));\n\n\t\tconst mIntegrationCardManifest = await getObjectPageCardManifestForPreview(rootComponent, {\n\t\t\tcardType: CardTypes.INTEGRATION,\n\t\t\tisDesignMode: true\n\t\t});\n\t\texpect(mIntegrationCardManifest).toMatchSnapshot();\n\t});\n\n\ttest(\"returns integration card manifest, with key-value format as context parameters\", async () => {\n\t\twindowSpy.mockImplementation(() => ({\n\t\t\thasher: {\n\t\t\t\tgetHash: () => \"test-intent&/testEntity(id='12345')\"\n\t\t\t}\n\t\t}));\n\n\t\tconst mIntegrationCardManifest = await getObjectPageCardManifestForPreview(rootComponent, {\n\t\t\tcardType: CardTypes.INTEGRATION,\n\t\t\tisDesignMode: true\n\t\t});\n\t\texpect(mIntegrationCardManifest).toMatchSnapshot();\n\t});\n\n\ttest(\"returns adaptive card manifest ready for preview when there exists select query parameters\", async () => {\n\t\twindowSpy.mockImplementation(() => ({\n\t\t\thasher: {\n\t\t\t\tgetHash: () => \"test-intent&/testEntity(id='12345')\"\n\t\t\t},\n\t\t\tlocation: {\n\t\t\t\thref: \"http://localhost:8080/test#test-intent&/testEntity(id='12345')\",\n\t\t\t\torigin: \"http://localhost:8080\",\n\t\t\t\tpathname: \"/test\",\n\t\t\t\tsearch: \"?query=1\",\n\t\t\t\thash: \"#hash\"\n\t\t\t} as Location\n\t\t}));\n\t\tconst hashChangerMock = {\n\t\t\tgetHash: jest.fn().mockReturnValue(\"myHash\"),\n\t\t\threfForAppSpecificHash: jest.fn().mockReturnValue(\"basePath/\")\n\t\t} as unknown as HashChanger;\n\t\tconst mockRouter = {\n\t\t\thashChangerMock\n\t\t};\n\t\tjest.spyOn(HashChanger, \"getInstance\").mockReturnValue(mockRouter.hashChangerMock);\n\n\t\tconst mAdaptiveCardManifest = await getObjectPageCardManifestForPreview(rootComponent, {\n\t\t\tcardType: CardTypes.ADAPTIVE,\n\t\t\tisDesignMode: true\n\t\t});\n\t\texpect(mAdaptiveCardManifest).toMatchSnapshot();\n\t});\n\n\ttest(\"returns adaptive card manifest ready for preview when no select query parameter exists for card\", async () => {\n\t\twindowSpy.mockImplementation(() => ({\n\t\t\thasher: {\n\t\t\t\tgetHash: () => \"test-intent&/testEntity1(id='12345')\"\n\t\t\t},\n\t\t\tlocation: {\n\t\t\t\thref: \"http://localhost:8080/test#test-intent&/testEntity(id='12345')\",\n\t\t\t\torigin: \"http://localhost:8080\",\n\t\t\t\tpathname: \"/test\",\n\t\t\t\tsearch: \"?query=1\",\n\t\t\t\thash: \"#hash\"\n\t\t\t} as Location\n\t\t}));\n\t\tconst hashChangerMock = {\n\t\t\tgetHash: jest.fn().mockReturnValue(\"myHash\"),\n\t\t\threfForAppSpecificHash: jest.fn().mockReturnValue(\"basePath/\")\n\t\t} as unknown as HashChanger;\n\t\tconst mockRouter = {\n\t\t\thashChangerMock\n\t\t};\n\t\tjest.spyOn(HashChanger, \"getInstance\").mockReturnValue(mockRouter.hashChangerMock);\n\n\t\tconst mIntegrationCardManifest = await getObjectPageCardManifestForPreview(rootComponent, {\n\t\t\tcardType: CardTypes.ADAPTIVE,\n\t\t\tisDesignMode: true\n\t\t});\n\t\texpect(mIntegrationCardManifest).toMatchSnapshot();\n\t});\n\tit('should update path to \"/header/d/\" when isODataV4 is false', () => {\n\t\tconst cardManifest = {\n\t\t\t\"sap.card\": {\n\t\t\t\theader: {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tpath: \"/old/path\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tupdateHeaderDataPath(cardManifest, false);\n\n\t\texpect(cardManifest[\"sap.card\"].header.data.path).toBe(\"/header/d/\");\n\t});\n\tdescribe(\"getObjectPageCardManifestForPreview - V2\", () => {\n\t\tbeforeEach(() => {\n\t\t\twindowSpy = jest.spyOn(window, \"window\", \"get\");\n\t\t\tgetModelSpy = jest.spyOn(rootComponent, \"getModel\").mockImplementation(() => {\n\t\t\t\treturn {\n\t\t\t\t\tisA: () => false,\n\t\t\t\t\tgetMetaModel: function () {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tgetODataEntitySet: function () {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tentityType: \"container.testEntityType\"\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tgetODataEntityType: function () {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tproperty: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: \"CreatedByUser\",\n\t\t\t\t\t\t\t\t\t\t\ttype: \"Edm.String\",\n\t\t\t\t\t\t\t\t\t\t\tmaxLength: \"20\",\n\t\t\t\t\t\t\t\t\t\t\t\"sap:label\": \"Created By User\",\n\t\t\t\t\t\t\t\t\t\t\tkind: \"Property\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: \"CreationDateTime\",\n\t\t\t\t\t\t\t\t\t\t\ttype: \"Edm.DateTimeOffset\",\n\t\t\t\t\t\t\t\t\t\t\tnullable: \"false\",\n\t\t\t\t\t\t\t\t\t\t\t\"sap:label\": \"Creation Date Time\",\n\t\t\t\t\t\t\t\t\t\t\tkind: \"Property\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: \"node_key\",\n\t\t\t\t\t\t\t\t\t\t\ttype: \"Edm.Guid\",\n\t\t\t\t\t\t\t\t\t\t\tnullable: \"false\",\n\t\t\t\t\t\t\t\t\t\t\t\"sap:label\": \"Node Key\",\n\t\t\t\t\t\t\t\t\t\t\tkind: \"Property\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tname: \"EndDate\",\n\t\t\t\t\t\t\t\t\t\t\ttype: \"Edm.DateTime\",\n\t\t\t\t\t\t\t\t\t\t\tnullable: \"false\",\n\t\t\t\t\t\t\t\t\t\t\t\"sap:label\": \"End Date\",\n\t\t\t\t\t\t\t\t\t\t\tkind: \"Property\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\tkey: {\n\t\t\t\t\t\t\t\t\t\tpropertyRef: [\n\t\t\t\t\t\t\t\t\t\t\t{ name: \"CreatedByUser\" },\n\t\t\t\t\t\t\t\t\t\t\t{ name: \"CreationDateTime\" },\n\t\t\t\t\t\t\t\t\t\t\t{ name: \"node_key\" },\n\t\t\t\t\t\t\t\t\t\t\t{ name: \"EndDate\" }\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\tgetObject: () => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tCreatedByUser: \"C1234\",\n\t\t\t\t\t\t\tCreationDateTime: \"Wed Feb 26 2025 08:57:17 GMT+0530 (India Standard Time)\",\n\t\t\t\t\t\t\tnode_key: \"guid'17beb005-2229-1edf-bcfe-327784b3026b'\",\n\t\t\t\t\t\t\tEndDate: \"Fri Dec 31 9999 05:30:00 GMT+0530 (India Standard Time)\"\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\tgetResourceBundle: jest.fn().mockImplementation(() => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\toUrlInfo: {\n\t\t\t\t\t\t\t\turl: \"i18n.properties\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t\t};\n\t\t\t});\n\t\t});\n\n\t\tafterEach(() => {\n\t\t\twindowSpy.mockRestore();\n\t\t\tgetModelSpy.mockRestore();\n\t\t});\n\n\t\ttest(\"returns integration card manifest when dateTimeOffset and datetime are present as key parameters\", async () => {\n\t\t\twindowSpy.mockImplementation(() => ({\n\t\t\t\thasher: {\n\t\t\t\t\tgetHash: () =>\n\t\t\t\t\t\t\"test-intent&/testEntity2(CreatedByUser='C1234',CreationDateTime=datetimeoffset'2025-02-26T03%3A27%3A17.4713650Z',node_key=guid'17beb005-2229-1edf-bcfe-327784b3026b',EndDate=datetime'9999-12-31T00%3A00%3A00')\"\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tconst mIntegrationCardManifest = await getObjectPageCardManifestForPreview(rootComponent, {\n\t\t\t\tcardType: CardTypes.INTEGRATION,\n\t\t\t\tisDesignMode: true\n\t\t\t});\n\t\t\texpect(mIntegrationCardManifest).toMatchSnapshot();\n\t\t});\n\t});\n});\n\ndescribe(\"getObjectPageCardManifestForPreview - V4\", () => {\n\tlet metaModel: ODataMetaModel;\n\tlet globalFetchMock: jest.SpyInstance;\n\tlet resourceBundleCreateSpy: jest.SpyInstance;\n\tconst sapAppId = \"testComponent3\";\n\tconst appManifest = {\n\t\t\"sap.app\": {\n\t\t\tid: sapAppId,\n\t\t\ttype: \"application\"\n\t\t},\n\t\t\"sap.ui5\": {\n\t\t\trouting: {\n\t\t\t\ttargets: {\n\t\t\t\t\tSalesOrderManageObjectPage: {\n\t\t\t\t\t\tname: \"sap.fe.templates.ObjectPage\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"sap.platform.abap\": {\n\t\t\turi: \"\"\n\t\t},\n\t\t\"sap.cards.ap\": {\n\t\t\tembeds: {\n\t\t\t\tObjectPage: {\n\t\t\t\t\tdefault: \"CashBank\",\n\t\t\t\t\tmanifests: {\n\t\t\t\t\t\tCashBank: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlocalUri: \"cards/op/CashBank/\",\n\t\t\t\t\t\t\t\thideActions: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tconst Component = UIComponent.extend(\"rootComponent\", {\n\t\tmetadata: {\n\t\t\tmanifest: appManifest\n\t\t},\n\t\tcreateContent() {\n\t\t\treturn null;\n\t\t}\n\t});\n\tconst rootComponent = new Component(sapAppId);\n\n\tbeforeAll(async () => {\n\t\tconst metadataUrl = compileCDS(path.join(`${__dirname}`, \"../fixtures/Sample.cds\"), { odataFormat: \"structured\" });\n\t\tmetaModel = await getMetaModel(metadataUrl);\n\t});\n\tbeforeAll(() => {\n\t\tresourceBundleCreateSpy = jest.spyOn(ResourceBundle, \"create\").mockImplementation(() => {\n\t\t\treturn {\n\t\t\t\tgetText: (key: string) => {\n\t\t\t\t\treturn i18nMap[key] || key;\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t\tglobalFetchMock = jest.spyOn(window, \"fetch\").mockImplementation((url: string) => {\n\t\t\tif (url === \"/manifest.json\") {\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\tok: true,\n\t\t\t\t\tjson: () => {\n\t\t\t\t\t\treturn appManifest;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (url === \"/cards/op/CashBank/manifest.json\") {\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\tok: true,\n\t\t\t\t\tjson: () => {\n\t\t\t\t\t\treturn IntegrationCardSampleManifest;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (url === \"/cards/op/CashBank/adaptive-manifest.json\") {\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\tok: true,\n\t\t\t\t\tjson: () => {\n\t\t\t\t\t\treturn AdaptiveCardSampleManifest;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t});\n\n\tafterAll(() => {\n\t\tresourceBundleCreateSpy.mockRestore();\n\t\tglobalFetchMock.mockRestore();\n\t});\n\tlet windowSpy: jest.SpyInstance;\n\tlet getModelSpy: jest.SpyInstance;\n\n\tbeforeEach(() => {\n\t\tApplicationInfo.getInstance(rootComponent)._resetInstance();\n\t\twindowSpy = jest.spyOn(window, \"window\", \"get\");\n\t\tgetModelSpy = jest.spyOn(rootComponent, \"getModel\").mockImplementation(() => {\n\t\t\treturn {\n\t\t\t\tisA: () => true,\n\t\t\t\tgetMetaModel: () => {\n\t\t\t\t\treturn metaModel;\n\t\t\t\t},\n\t\t\t\tgetResourceBundle: jest.fn().mockImplementation(() => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\toUrlInfo: {\n\t\t\t\t\t\t\turl: \"i18n.properties\"\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t};\n\t\t});\n\t});\n\n\tafterEach(() => {\n\t\twindowSpy.mockRestore();\n\t\tgetModelSpy.mockRestore();\n\t});\n\n\ttest(\"returns adaptive card manifest ready for preview when there exists select query parameters- when hideAction is false\", async () => {\n\t\twindowSpy.mockImplementation(() => ({\n\t\t\thasher: {\n\t\t\t\tgetHash: () =>\n\t\t\t\t\t\"test-intent&/CashBank(node_key='005056a7-004e-1ed8-b2e0-081387831f0d',IsActiveEntity=true,BankCountry=0000000006)\"\n\t\t\t},\n\t\t\tlocation: {\n\t\t\t\thref: \"http://localhost:8080/test#test-intent&/CashBank(node_key=005056a7-004e-1ed8-b2e0-081387831f0d,IsActiveEntity=true,BankCountry=0000000006)\",\n\t\t\t\torigin: \"http://localhost:8080\",\n\t\t\t\tpathname: \"/test\",\n\t\t\t\tsearch: \"?query=1\",\n\t\t\t\thash: \"#hash\"\n\t\t\t}\n\t\t}));\n\t\tconst hashChangerMock = {\n\t\t\tgetHash: jest.fn().mockReturnValue(\"myHash\"),\n\t\t\threfForAppSpecificHash: jest.fn().mockReturnValue(\"basePath/\")\n\t\t} as unknown as HashChanger;\n\t\tconst mockRouter = {\n\t\t\thashChangerMock\n\t\t};\n\t\tjest.spyOn(HashChanger, \"getInstance\").mockReturnValue(mockRouter.hashChangerMock);\n\n\t\tconst mAdaptiveCardManifest = await getObjectPageCardManifestForPreview(rootComponent, {\n\t\t\tcardType: CardTypes.ADAPTIVE,\n\t\t\tincludeActions: false,\n\t\t\thideActions: false,\n\t\t\tisDesignMode: true\n\t\t});\n\t\texpect(mAdaptiveCardManifest).toMatchSnapshot();\n\t});\n\n\ttest(\"returns integration card manifest\", async () => {\n\t\twindowSpy.mockImplementation(() => ({\n\t\t\thasher: {\n\t\t\t\tgetHash: () =>\n\t\t\t\t\t\"test-intent&/CashBank(node_key='005056a7-004e-1ed8-b2e0-081387831f0d',IsActiveEntity=true,BankCountry=0000000006)\"\n\t\t\t}\n\t\t}));\n\t\tconst hashChangerMock = {\n\t\t\tgetHash: jest.fn().mockReturnValue(\"myHash\"),\n\t\t\threfForAppSpecificHash: jest.fn().mockReturnValue(\"basePath/\")\n\t\t} as unknown as HashChanger;\n\t\tconst mockRouter = {\n\t\t\thashChangerMock\n\t\t};\n\t\tjest.spyOn(HashChanger, \"getInstance\").mockReturnValue(mockRouter.hashChangerMock);\n\n\t\tconst mIntegrationCardManifest = await getObjectPageCardManifestForPreview(rootComponent, {\n\t\t\tcardType: CardTypes.INTEGRATION,\n\t\t\tisDesignMode: true\n\t\t});\n\t\texpect(mIntegrationCardManifest).toMatchSnapshot();\n\t});\n\n\ttest(\"returns adaptive card manifest ready for preview when there exists select query parameters - when hideAction is true\", async () => {\n\t\twindowSpy.mockImplementation(() => ({\n\t\t\thasher: {\n\t\t\t\tgetHash: () =>\n\t\t\t\t\t\"test-intent?&/CashBank(node_key='005056a7-004e-1ed8-b2e0-081387831f0d',IsActiveEntity=true,BankCountry=0000000006)\"\n\t\t\t},\n\t\t\tlocation: {\n\t\t\t\thref: \"http://localhost:8080/test#test-intent&/CashBank(node_key=005056a7-004e-1ed8-b2e0-081387831f0d,IsActiveEntity=true,BankCountry=0000000006)\",\n\t\t\t\torigin: \"http://localhost:8080\",\n\t\t\t\tpathname: \"/test\",\n\t\t\t\tsearch: \"?query=1\",\n\t\t\t\thash: \"#hash\"\n\t\t\t}\n\t\t}));\n\t\tconst hashChangerMock = {\n\t\t\tgetHash: jest.fn().mockReturnValue(\"myHash\"),\n\t\t\threfForAppSpecificHash: jest.fn().mockReturnValue(\"basePath/\")\n\t\t} as unknown as HashChanger;\n\t\tconst mockRouter = {\n\t\t\thashChangerMock\n\t\t};\n\t\tjest.spyOn(HashChanger, \"getInstance\").mockReturnValue(mockRouter.hashChangerMock);\n\n\t\tconst mAdaptiveCardManifest = await getObjectPageCardManifestForPreview(rootComponent, {\n\t\t\tcardType: CardTypes.ADAPTIVE,\n\t\t\tincludeActions: false,\n\t\t\thideActions: true,\n\t\t\tisDesignMode: true\n\t\t});\n\t\texpect(mAdaptiveCardManifest).toMatchSnapshot();\n\t});\n\n\ttest(\"No card exists for application at run time\", async () => {\n\t\twindowSpy.mockImplementation(() => ({\n\t\t\thasher: {\n\t\t\t\tgetHash: () =>\n\t\t\t\t\t\"test-intent&/CashBank(node_key=005056a7-004e-1ed8-b2e0-081387831f0d,IsActiveEntity=true,BankCountry=0000000006)\"\n\t\t\t},\n\t\t\tlocation: {\n\t\t\t\thref: \"http://localhost:8080/test-intent&/CashBank(node_key=005056a7-004e-1ed8-b2e0-081387831f0d,IsActiveEntity=true,BankCountry=0000000006)\"\n\t\t\t}\n\t\t}));\n\n\t\tdelete rootComponent?.getManifest()?.[\"sap.cards.ap\"];\n\n\t\ttry {\n\t\t\tawait getObjectPageCardManifestForPreview(rootComponent, {\n\t\t\t\tcardType: CardTypes.ADAPTIVE,\n\t\t\t\tincludeActions: false,\n\t\t\t\thideActions: true,\n\t\t\t\tisDesignMode: false\n\t\t\t});\n\t\t} catch (error) {\n\t\t\texpect(error).toBeDefined();\n\t\t\texpect(error).toBe(\"No cards available for this application\");\n\t\t}\n\t});\n\tit('should update path to \"/header/\" when isODataV4 is true', () => {\n\t\tconst cardManifest = {\n\t\t\t\"sap.card\": {\n\t\t\t\theader: {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tpath: \"/old/path\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tupdateHeaderDataPath(cardManifest, true);\n\n\t\texpect(cardManifest[\"sap.card\"].header.data.path).toBe(\"/header/\");\n\t});\n});\n\ndescribe(\"isSemanticCardGeneration\", () => {\n\tlet appComponent: UIComponent;\n\tlet originalLocation: Location;\n\n\tbeforeAll(() => {\n\t\toriginalLocation = window.location;\n\t});\n\n\tafterAll(() => {\n\t\tObject.defineProperty(window, \"location\", {\n\t\t\tvalue: originalLocation,\n\t\t\twritable: true\n\t\t});\n\t});\n\n\tbeforeEach(() => {\n\t\tappComponent = {\n\t\t\tgetManifest: jest.fn().mockReturnValue({\n\t\t\t\t\"sap.cards.ap\": { embeds: { ObjectPage: { manifests: { default: [{}] } } } }\n\t\t\t})\n\t\t} as unknown as UIComponent;\n\t});\n\n\tit(\"should enable semantic card generation when generateSemanticCard=always\", () => {\n\t\tObject.defineProperty(window, \"location\", {\n\t\t\tvalue: { search: \"?generateSemanticCard=always\" },\n\t\t\twritable: true\n\t\t});\n\t\texpect(isSemanticCardGeneration(appComponent)).toBe(true);\n\t});\n\n\tit(\"should enable semantic card generation when generateSemanticCard=lean and leanDT card does not exist\", () => {\n\t\tconst appComponentWithoutCards = {\n\t\t\tgetManifest: jest.fn().mockReturnValue({})\n\t\t} as unknown as UIComponent;\n\n\t\tObject.defineProperty(window, \"location\", {\n\t\t\tvalue: { search: \"?generateSemanticCard=lean\" },\n\t\t\twritable: true\n\t\t});\n\t\texpect(isSemanticCardGeneration(appComponentWithoutCards)).toBe(true);\n\t});\n\n\tit(\"should not enable semantic card generation when generateSemanticCard=lean and leanDT card exists\", () => {\n\t\tObject.defineProperty(window, \"location\", {\n\t\t\tvalue: { search: \"?generateSemanticCard=lean\" },\n\t\t\twritable: true\n\t\t});\n\t\texpect(isSemanticCardGeneration(appComponent)).toBe(false);\n\t});\n\n\tit(\"should not enable semantic card generation when generateSemanticCard is not set\", () => {\n\t\tObject.defineProperty(window, \"location\", {\n\t\t\tvalue: { search: \"\" },\n\t\t\twritable: true\n\t\t});\n\t\texpect(isSemanticCardGeneration(appComponent)).toBe(false);\n\t});\n\n\tit(\"should not enable semantic card generation when generateSemanticCard has invalid value\", () => {\n\t\tObject.defineProperty(window, \"location\", {\n\t\t\tvalue: { search: \"?generateSemanticCard=invalid\" },\n\t\t\twritable: true\n\t\t});\n\t\texpect(isSemanticCardGeneration(appComponent)).toBe(false);\n\t});\n\n\tit(\"should not enable semantic card generation when window.location.search is undefined\", () => {\n\t\tObject.defineProperty(window, \"location\", {\n\t\t\tvalue: { search: undefined },\n\t\t\twritable: true\n\t\t});\n\t\texpect(isSemanticCardGeneration(appComponent)).toBe(false);\n\t});\n});\n\ndescribe(\"getObjectPageCardManifestForPreview - Semantic Card Generation\", () => {\n\tlet globalFetchMock: jest.SpyInstance;\n\tlet appComponent: UIComponent;\n\tlet appComponentV4: UIComponent;\n\tlet manifestContent: string;\n\tlet manifestContentV4: string;\n\tlet originalLocation: Location;\n\n\t/*\n\t * Helper function to construct absolute path to testsuite files\n\t */\n\tconst getTestsuiteFilePath = (relativePath: string): string => {\n\t\treturn path.join(__dirname, \"../../../../../../../../../testsuite\", relativePath);\n\t};\n\n\t/**\n\t * Function to mock window.location.search and window.location.origin\n\t * @param search\n\t */\n\tconst setLocationSearchAndOrigin = (search: string): void => {\n\t\tObject.defineProperty(window, \"location\", {\n\t\t\tvalue: {\n\t\t\t\tsearch,\n\t\t\t\thref: `https://my313815.s4hana.ondemand.com`\n\t\t\t},\n\t\t\twritable: true\n\t\t});\n\t};\n\n\t/**\n\t * Function to create mock ApplicationInfo for OData V2\n\t * Encapsulates realistic sales order V2 context data\n\t * @param odataModel\n\t * @returns\n\t */\n\tconst createMockApplicationInfoV2 = () => ({\n\t\tappInfo: {},\n\t\t_rootComponent: appComponent,\n\t\tgetContextParametersKeyValue: jest.fn(),\n\t\t_resetInstance: jest.fn(),\n\t\tfetchDetails: jest.fn().mockResolvedValue({\n\t\t\tcomponentName: \"sales.order.wd20\",\n\t\t\tentitySet: \"C_STTA_SalesOrder_WD_20\",\n\t\t\tcontext: \"node_key=guid'fa163ee4-7bdd-1ee8-b1ff-d3c5a4e5236a',IsActiveEntity=true\",\n\t\t\tcontextParameters: \"node_key=guid'fa163ee4-7bdd-1ee8-b1ff-d3c5a4e5236a',IsActiveEntity=true\",\n\t\t\tcontextParametersKeyValue: [\n\t\t\t\t{\n\t\t\t\t\tkey: \"node_key\",\n\t\t\t\t\tvalue: \"guid'fa163ee4-7bdd-1ee8-b1ff-d3c5a4e5236a'\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: \"IsActiveEntity\",\n\t\t\t\t\tvalue: \"true\"\n\t\t\t\t}\n\t\t\t],\n\t\t\tresourceBundle: {},\n\t\t\tsemanticObject: \"SalesOrder\",\n\t\t\taction: \"display\",\n\t\t\todataModel: \"V2\",\n\t\t\tvariantParameter: null,\n\t\t\tnavigationURI: \"/sap/bc/ui5_ui5/sap/salesOrderManage/webapp\"\n\t\t})\n\t});\n\n\t/**\n\t * Helper function to create mock ApplicationInfo for OData V4\n\t * Encapsulates realistic sales order V4 context data\n\t */\n\tconst createMockApplicationInfoV4 = () => ({\n\t\tappInfo: {},\n\t\t_rootComponent: appComponentV4,\n\t\tgetContextParametersKeyValue: jest.fn(),\n\t\t_resetInstance: jest.fn(),\n\t\tfetchDetails: jest.fn().mockResolvedValue({\n\t\t\tcomponentName: \"cus.sd.salesorderv2.manage\",\n\t\t\tentitySet: \"SalesOrderManage\",\n\t\t\tcontext: \"'SalesOrd29'\",\n\t\t\tcontextParameters: \"SalesOrder='SalesOrd29'\",\n\t\t\tcontextParametersKeyValue: [\n\t\t\t\t{\n\t\t\t\t\tkey: \"SalesOrder\",\n\t\t\t\t\tvalue: \"SalesOrd29\"\n\t\t\t\t}\n\t\t\t],\n\t\t\tresourceBundle: {},\n\t\t\tsemanticObject: \"SalesOrder\",\n\t\t\taction: \"display\",\n\t\t\todataModel: \"V4\",\n\t\t\tvariantParameter: null,\n\t\t\tnavigationURI: null\n\t\t})\n\t});\n\tbeforeAll(() => {\n\t\t// Store original location for proper cleanup\n\t\toriginalLocation = window.location;\n\n\t\t// Load test data files following TypeScript-first approach\n\t\ttry {\n\t\t\tconst metadataPath = getTestsuiteFilePath(\"mockserver/sap/opu/odata/sap/salesorder/metadata.xml\");\n\t\t\tconst annotationsPath = getTestsuiteFilePath(\"mockserver/sap/opu/odata/sap/salesorder/annotations.xml\");\n\t\t\tconst manifestPath = getTestsuiteFilePath(\"apps/sales.order.wd20/webapp/manifest.json\");\n\t\t\tconst metadataContent = readFileSync(metadataPath, \"utf8\");\n\t\t\tconst annotationsContent = readFileSync(annotationsPath, \"utf8\");\n\t\t\tmanifestContent = readFileSync(manifestPath, \"utf8\");\n\n\t\t\tconst metadataPathV4 = getTestsuiteFilePath(\n\t\t\t\t\"mockserver/sap/opu/odata4/sap/c_salesordermanage_srv/srvd/sap/c_salesordermanage_sd/0001/metadata.xml\"\n\t\t\t);\n\t\t\tconst annotationsPathV4 = getTestsuiteFilePath(\"apps/cus.sd.salesorderv2.manage/webapp/annotations/annotation.xml\");\n\t\t\tconst manifestPathV4 = getTestsuiteFilePath(\"apps/cus.sd.salesorderv2.manage/webapp/manifest.json\");\n\t\t\tconst metadataContentV4 = readFileSync(metadataPathV4, \"utf8\");\n\t\t\tconst annotationsContentV4 = readFileSync(annotationsPathV4, \"utf8\");\n\t\t\tmanifestContentV4 = readFileSync(manifestPathV4, \"utf8\");\n\n\t\t\t// Setup comprehensive fetch mock for both OData V2 and V4\n\t\t\tglobalFetchMock = jest.spyOn(window, \"fetch\").mockImplementation((url: string) => {\n\t\t\t\t// OData V2 metadata requests\n\t\t\t\tif (url.includes(\"/sap/opu/odata/sap/salesorder/$metadata\")) {\n\t\t\t\t\treturn Promise.resolve({\n\t\t\t\t\t\tok: true,\n\t\t\t\t\t\tstatus: 200,\n\t\t\t\t\t\ttext: () => Promise.resolve(metadataContent),\n\t\t\t\t\t\theaders: new Headers({\n\t\t\t\t\t\t\t\"Content-Type\": \"application/xml\"\n\t\t\t\t\t\t})\n\t\t\t\t\t} as Response);\n\t\t\t\t}\n\n\t\t\t\t// OData V2 annotations requests\n\t\t\t\tif (url.includes(\"/sap/opu/odata/sap/salesorder;v=2/Annotations-LR\")) {\n\t\t\t\t\treturn Promise.resolve({\n\t\t\t\t\t\tok: true,\n\t\t\t\t\t\tstatus: 200,\n\t\t\t\t\t\ttext: () => Promise.resolve(annotationsContent),\n\t\t\t\t\t\theaders: new Headers({\n\t\t\t\t\t\t\t\"Content-Type\": \"application/xml\"\n\t\t\t\t\t\t})\n\t\t\t\t\t} as Response);\n\t\t\t\t}\n\n\t\t\t\t// OData V4 metadata requests\n\t\t\t\tif (url.includes(\"/sap/opu/odata4/sap/c_salesordermanage_srv/srvd/sap/c_salesordermanage_sd/0001/$metadata\")) {\n\t\t\t\t\treturn Promise.resolve({\n\t\t\t\t\t\tok: true,\n\t\t\t\t\t\tstatus: 200,\n\t\t\t\t\t\ttext: () => Promise.resolve(metadataContentV4),\n\t\t\t\t\t\theaders: new Headers({\n\t\t\t\t\t\t\t\"Content-Type\": \"application/xml\"\n\t\t\t\t\t\t})\n\t\t\t\t\t} as Response);\n\t\t\t\t}\n\n\t\t\t\t// OData V4 annotations requests\n\t\t\t\tif (url.includes(\"/cus.sd.salesorderv2.manage/webapp/annotations/annotation.xml\")) {\n\t\t\t\t\treturn Promise.resolve({\n\t\t\t\t\t\tok: true,\n\t\t\t\t\t\tstatus: 200,\n\t\t\t\t\t\ttext: () => Promise.resolve(annotationsContentV4),\n\t\t\t\t\t\theaders: new Headers({\n\t\t\t\t\t\t\t\"Content-Type\": \"application/xml\"\n\t\t\t\t\t\t})\n\t\t\t\t\t} as Response);\n\t\t\t\t}\n\n\t\t\t\treturn Promise.reject(new Error(`Unhandled request: ${url}`));\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tconsole.warn(\"Test data files not found, using fallback mocks\");\n\t\t\tmanifestContent = '{\"sap.app\":{\"id\":\"sales.order.wd20\"}}';\n\t\t\tmanifestContentV4 = '{\"sap.app\":{\"id\":\"cus.sd.salesorderv2.manage\"}}';\n\t\t}\n\t});\n\n\tafterAll(() => {\n\t\tglobalFetchMock.mockRestore();\n\t\t// Restore original location following cleanup best practices\n\t\tObject.defineProperty(window, \"location\", {\n\t\t\tvalue: originalLocation,\n\t\t\twritable: true\n\t\t});\n\t});\n\n\tbeforeEach(() => {\n\t\t// Setup OData V2 component mock following UI5 guidelines\n\t\tappComponent = {\n\t\t\tgetManifest: jest.fn().mockReturnValue(manifestContent ? JSON.parse(manifestContent) : {}),\n\t\t\tgetModel: jest.fn().mockReturnValue({\n\t\t\t\tisA: () => false, // OData V2\n\t\t\t\tsServiceUrl: \"/sap/opu/odata/sap/salesorder\",\n\t\t\t\taAnnotationURIs: [\"/sap/opu/odata/sap/salesorder;v=2/Annotations-LR*?sap-language=EN\"]\n\t\t\t})\n\t\t} as unknown as UIComponent;\n\n\t\t// Setup OData V4 component mock following UI5 guidelines\n\t\tappComponentV4 = {\n\t\t\tgetManifest: jest.fn().mockReturnValue(manifestContentV4 ? JSON.parse(manifestContentV4) : {}),\n\t\t\tgetModel: jest.fn().mockReturnValue({\n\t\t\t\tisA: () => true,\n\t\t\t\tgetServiceUrl: jest.fn().mockReturnValue(\"/sap/opu/odata4/sap/c_salesordermanage_srv/srvd/sap/c_salesordermanage_sd/0001/\"),\n\t\t\t\tgetMetaModel: function () {\n\t\t\t\t\treturn {\n\t\t\t\t\t\taAnnotationUris: [\"/cus.sd.salesorderv2.manage/webapp/annotations/annotation.xml\"]\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t})\n\t\t} as unknown as UIComponent;\n\t});\n\n\tafterEach(() => {\n\t\tjest.clearAllMocks();\n\t});\n\n\tdescribe(\"OData V2 Semantic Card Generation\", () => {\n\t\tbeforeEach(() => {\n\t\t\tconst mockApplicationInfoV2 = createMockApplicationInfoV2();\n\t\t\tjest.spyOn(ApplicationInfo, \"getInstance\").mockImplementation(() => mockApplicationInfoV2 as any);\n\t\t});\n\n\t\tdescribe(\"generateSemanticCard=always scenarios\", () => {\n\t\t\tbeforeEach(() => {\n\t\t\t\tsetLocationSearchAndOrigin(\"?generateSemanticCard=always\");\n\t\t\t});\n\n\t\t\tit(\"should generate semantic UI5 Integration Card when generateSemanticCard=always for OData V2 application\", async () => {\n\t\t\t\tconst result = await getObjectPageCardManifestForPreview(appComponent, {\n\t\t\t\t\tcardType: CardTypes.INTEGRATION\n\t\t\t\t});\n\n\t\t\t\texpect(result[\"sap.card\"].type).toBe(\"Object\");\n\t\t\t\texpect(result).toMatchSnapshot(\"semantic-ui5-integration-card-v2-always\");\n\t\t\t});\n\n\t\t\tit(\"should generate semantic MS Teams Adaptive Card when generateSemanticCard=always for OData V2 application\", async () => {\n\t\t\t\tconst result = await getObjectPageCardManifestForPreview(appComponent, {\n\t\t\t\t\tcardType: CardTypes.ADAPTIVE\n\t\t\t\t});\n\n\t\t\t\texpect(result.type).toBe(\"AdaptiveCard\");\n\t\t\t\texpect(result.metadata.context.path).toBe(\n\t\t\t\t\t\"/sap/opu/odata/sap/salesorder/C_STTA_SalesOrder_WD_20(node_key=guid'fa163ee4-7bdd-1ee8-b1ff-d3c5a4e5236a',IsActiveEntity=true)?$format=json&$select=so_id,Product,currency_code,gross_amount,net_amount,tax_amount,op_id,LastChangedUserName,overall_status&$expand=to_Currency,to_ChangedBy\"\n\t\t\t\t);\n\t\t\t\texpect(result).toMatchSnapshot(\"semantic-adaptive-card-v2-always\");\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe(\"OData V4 Semantic Card Generation\", () => {\n\t\tbeforeEach(() => {\n\t\t\tconst mockApplicationInfoV4 = createMockApplicationInfoV4();\n\t\t\tjest.spyOn(ApplicationInfo, \"getInstance\").mockImplementation(() => mockApplicationInfoV4 as any);\n\t\t});\n\n\t\tdescribe(\"generateSemanticCard=always scenarios\", () => {\n\t\t\tbeforeEach(() => {\n\t\t\t\tsetLocationSearchAndOrigin(\"?generateSemanticCard=always\");\n\t\t\t});\n\n\t\t\tit(\"should generate semantic UI5 Integration Card when generateSemanticCard=always for OData V4 application\", async () => {\n\t\t\t\tconst result = await getObjectPageCardManifestForPreview(appComponentV4, {\n\t\t\t\t\tcardType: CardTypes.INTEGRATION\n\t\t\t\t});\n\n\t\t\t\t// Verify V4-specific attributes\n\t\t\t\texpect(result[\"sap.card\"].type).toBe(\"Object\");\n\t\t\t\texpect(result).toMatchSnapshot(\"semantic-ui5-integration-card-v4-always\");\n\t\t\t});\n\n\t\t\tit(\"should generate semantic MS Teams Adaptive Card when generateSemanticCard=always for OData V4 application\", async () => {\n\t\t\t\tconst result = await getObjectPageCardManifestForPreview(appComponentV4, {\n\t\t\t\t\tcardType: CardTypes.ADAPTIVE\n\t\t\t\t});\n\n\t\t\t\texpect(result.metadata.context.path).toBe(\n\t\t\t\t\t\"/sap/opu/odata4/sap/c_salesordermanage_srv/srvd/sap/c_salesordermanage_sd/0001/SalesOrderManage('SalesOrd29')?$format=json&$select=SalesOrder,SalesOrderType,CustomerName,SoldToParty,PurchaseOrderByCustomer,RequestedDeliveryDate,TotalNetAmount,TransactionCurrency,SalesOrderDate&$expand=_SalesOrderType($select=SalesOrderType_Text),_OverallSDProcessStatus($select=OverallSDProcessStatus_Text),_ShipToParty($select=FullName,Partner)\"\n\t\t\t\t);\n\t\t\t\texpect(result).toMatchSnapshot(\"semantic-adaptive-card-v4-always\");\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe(\"Error Handling and Edge Cases\", () => {\n\t\tit(\"should handle semantic card generation errors gracefully for OData V2\", async () => {\n\t\t\tsetLocationSearchAndOrigin(\"?generateSemanticCard=always\");\n\t\t\tconst mockApplicationInfoV2 = createMockApplicationInfoV2();\n\t\t\tmockApplicationInfoV2.fetchDetails = jest.fn().mockRejectedValue(new Error(\"OData V2 service unavailable\"));\n\t\t\tjest.spyOn(ApplicationInfo, \"getInstance\").mockImplementation(() => mockApplicationInfoV2 as any);\n\n\t\t\tawait expect(\n\t\t\t\tgetObjectPageCardManifestForPreview(appComponent, {\n\t\t\t\t\tcardType: CardTypes.INTEGRATION\n\t\t\t\t})\n\t\t\t).rejects.toThrow(\"OData V2 service unavailable\");\n\t\t});\n\n\t\tit(\"should handle semantic card generation errors gracefully for OData V4\", async () => {\n\t\t\tsetLocationSearchAndOrigin(\"?generateSemanticCard=always\");\n\t\t\tconst mockApplicationInfoV4 = createMockApplicationInfoV4();\n\t\t\tmockApplicationInfoV4.fetchDetails = jest.fn().mockRejectedValue(new Error(\"OData V4 service unavailable\"));\n\t\t\tjest.spyOn(ApplicationInfo, \"getInstance\").mockImplementation(() => mockApplicationInfoV4 as any);\n\n\t\t\tawait expect(\n\t\t\t\tgetObjectPageCardManifestForPreview(appComponentV4, {\n\t\t\t\t\tcardType: CardTypes.INTEGRATION\n\t\t\t\t})\n\t\t\t).rejects.toThrow(\"OData V4 service unavailable\");\n\t\t});\n\n\t\tit(\"should handle concurrent card generation requests for mixed OData versions\", async () => {\n\t\t\tsetLocationSearchAndOrigin(\"?generateSemanticCard=always\");\n\n\t\t\t// Setup different mocks for each call\n\t\t\tconst mockApplicationInfoV2 = createMockApplicationInfoV2();\n\t\t\tconst mockApplicationInfoV4 = createMockApplicationInfoV4();\n\n\t\t\tjest.spyOn(ApplicationInfo, \"getInstance\")\n\t\t\t\t.mockImplementationOnce(() => mockApplicationInfoV2 as any)\n\t\t\t\t.mockImplementationOnce(() => mockApplicationInfoV4 as any);\n\n\t\t\t// Test concurrent requests with different OData versions\n\t\t\tconst promises = [\n\t\t\t\tgetObjectPageCardManifestForPreview(appComponent, { cardType: CardTypes.INTEGRATION }),\n\t\t\t\tgetObjectPageCardManifestForPreview(appComponentV4, { cardType: CardTypes.ADAPTIVE })\n\t\t\t];\n\n\t\t\tconst results = await Promise.all(promises);\n\t\t\texpect(results[0][\"sap.card\"].type).toBe(\"Object\");\n\t\t\texpect(results[1].type).toBe(\"AdaptiveCard\");\n\t\t});\n\t\tit(\"should throw an error when trying to generate card which is not supported\", async () => {\n\t\t\tsetLocationSearchAndOrigin(\"?generateSemanticCard=always\");\n\t\t\tconst mockApplicationInfoV2 = createMockApplicationInfoV2();\n\n\t\t\tjest.spyOn(ApplicationInfo, \"getInstance\").mockImplementationOnce(() => mockApplicationInfoV2 as any);\n\n\t\t\tawait expect(\n\t\t\t\tgetObjectPageCardManifestForPreview(appComponent, {\n\t\t\t\t\tcardType: \"Object\"\n\t\t\t\t})\n\t\t\t).rejects.toThrow('Unsupported card type: Object. Supported types: \"integration\", \"adaptive\"');\n\t\t});\n\n\t\tit(\"show generate UI5 Integration Card when card Type is not provided\", async () => {\n\t\t\tsetLocationSearchAndOrigin(\"?generateSemanticCard=always\");\n\t\t\tconst mockApplicationInfoV2 = createMockApplicationInfoV2();\n\n\t\t\tjest.spyOn(ApplicationInfo, \"getInstance\").mockImplementationOnce(() => mockApplicationInfoV2 as any);\n\n\t\t\tconst result = await getObjectPageCardManifestForPreview(appComponent, {});\n\t\t\texpect(result[\"sap.card\"].type).toBe(\"Object\");\n\t\t});\n\n\t\tit(\"should throw error if component.getModel function is not defined or returns null / undefined\", async () => {\n\t\t\tsetLocationSearchAndOrigin(\"?generateSemanticCard=always\");\n\t\t\tconst mockApplicationInfoV2 = createMockApplicationInfoV2();\n\n\t\t\tappComponent.getModel = jest.fn().mockReturnValue(null);\n\n\t\t\tjest.spyOn(ApplicationInfo, \"getInstance\").mockImplementationOnce(() => mockApplicationInfoV2 as any);\n\n\t\t\tawait expect(getObjectPageCardManifestForPreview(appComponent, {})).rejects.toThrow(\"OData model is not available.\");\n\t\t});\n\n\t\tit(\"should throw error if service Url is not defined\", async () => {\n\t\t\tsetLocationSearchAndOrigin(\"?generateSemanticCard=always\");\n\t\t\tconst mockApplicationInfoV2 = createMockApplicationInfoV2();\n\t\t\tappComponent.getModel = jest.fn().mockReturnValue({\n\t\t\t\tisA: () => false\n\t\t\t});\n\n\t\t\tjest.spyOn(ApplicationInfo, \"getInstance\").mockImplementationOnce(() => mockApplicationInfoV2 as any);\n\n\t\t\tawait expect(getObjectPageCardManifestForPreview(appComponent, {})).rejects.toThrow(\n\t\t\t\t\"Service URL is not available from the model.\"\n\t\t\t);\n\t\t});\n\n\t\tit(\"should throw error if model is empty object\", async () => {\n\t\t\tsetLocationSearchAndOrigin(\"?generateSemanticCard=always\");\n\t\t\tconst mockApplicationInfoV2 = createMockApplicationInfoV2();\n\t\t\tappComponent.getModel = jest.fn().mockReturnValue({});\n\n\t\t\tjest.spyOn(ApplicationInfo, \"getInstance\").mockImplementationOnce(() => mockApplicationInfoV2 as any);\n\n\t\t\tawait expect(getObjectPageCardManifestForPreview(appComponent, {})).rejects.toThrow(\n\t\t\t\t\"Failed to generate UI5 semantic card: oModel.isA is not a function\"\n\t\t\t);\n\t\t});\n\t});\n});\n\ndescribe(\"getCardManifestForPreview\", () => {\n\ttest(\"rejects the promise when both entity set and key parameters are not provided\", async () => {\n\t\tconst rootComponent = {\n\t\t\tgetManifest: jest.fn().mockReturnValue({})\n\t\t} as unknown as UIComponent;\n\n\t\ttry {\n\t\t\tawait getCardManifestForPreview(rootComponent as UIComponent, { isDesignMode: false });\n\t\t} catch (error) {\n\t\t\texpect(error).toBeDefined();\n\t\t\texpect(error).toBe(\"Failed to share the card : Missing required parameters either entitySet or keyParameters\");\n\t\t}\n\t});\n\n\ttest(\"rejects the promise when key parameters are not provided\", async () => {\n\t\tconst fetchOptions = {\n\t\t\tisDesignMode: false,\n\t\t\tentitySet: \"test\"\n\t\t};\n\t\tconst rootComponent = {\n\t\t\tgetManifest: jest.fn().mockReturnValue({})\n\t\t} as unknown as UIComponent;\n\n\t\ttry {\n\t\t\tawait getCardManifestForPreview(rootComponent as UIComponent, fetchOptions);\n\t\t} catch (error) {\n\t\t\texpect(error).toBeDefined();\n\t\t\texpect(error).toBe(\"Failed to share the card : Missing required parameters either entitySet or keyParameters\");\n\t\t}\n\t});\n\n\ttest(\"rejects the promise when key parameters are empty\", async () => {\n\t\tconst fetchOptions = {\n\t\t\tisDesignMode: false,\n\t\t\tentitySet: \"test\",\n\t\t\tkeyParameters: {}\n\t\t};\n\t\tconst rootComponent = {\n\t\t\tgetManifest: jest.fn().mockReturnValue({})\n\t\t} as unknown as UIComponent;\n\n\t\ttry {\n\t\t\tawait getCardManifestForPreview(rootComponent as UIComponent, fetchOptions);\n\t\t} catch (error) {\n\t\t\texpect(error).toBeDefined();\n\t\t\texpect(error).toBe(\"Failed to share the card : Missing required parameters either entitySet or keyParameters\");\n\t\t}\n\t});\n\ttest(\"rejects the promise when entity set is empty\", async () => {\n\t\tconst fetchOptions = {\n\t\t\tisDesignMode: false,\n\t\t\tentitySet: \"\",\n\t\t\tkeyParameters: {\n\t\t\t\tsalesOrder: \"423\"\n\t\t\t}\n\t\t};\n\t\tconst rootComponent = {\n\t\t\tgetManifest: jest.fn().mockReturnValue({})\n\t\t} as unknown as UIComponent;\n\n\t\ttry {\n\t\t\tawait getCardManifestForPreview(rootComponent as UIComponent, fetchOptions);\n\t\t} catch (error) {\n\t\t\texpect(error).toBeDefined();\n\t\t\texpect(error).toBe(\"Failed to share the card : Missing required parameters either entitySet or keyParameters\");\n\t\t}\n\t});\n});\n"],"mappings":"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","ignoreList":[]}