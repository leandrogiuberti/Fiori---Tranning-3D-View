{"version":3,"file":"CardActions.spec.js","names":["sap","ui","define","sap_cards_ap_generator_app_handlers_CardActions","ComboBox","CoreElement","ListItem","JSONModel","filterCardActions","jest","mock","resolvePath","transpileIntegrationCardToAdaptive","fn","describe","coreElementGetElementByIdSpy","oDialogModelData","configuration","actions","addedActions","title","titleKey","style","enablePathKey","isStyleControlEnabled","annotationActions","action","label","oDialogModel","beforeAll","spyOn","mockImplementation","id","getModel","mockReturnValue","afterAll","mockRestore","test","comboBox","items","path","template","key","text","setModel","expect","getItems","length","toEqual","getProperty"],"sources":["CardActions.spec.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport { filterCardActions } from \"sap/cards/ap/generator/app/handlers/CardActions\";\nimport ComboBox from \"sap/m/ComboBox\";\nimport CoreElement from \"sap/ui/core/Element\";\nimport ListItem from \"sap/ui/core/ListItem\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\n\ndeclare namespace sap {\n\texport namespace jest {\n\t\tfunction resolvePath(path: string): string;\n\t}\n}\n\njest.mock(sap.jest.resolvePath(\"sap/cards/ap/generator/helpers/Transpiler\"), () => {\n\treturn {\n\t\ttranspileIntegrationCardToAdaptive: jest.fn()\n\t};\n});\n\ndescribe(\"filterCardActions\", () => {\n\tlet coreElementGetElementByIdSpy: jest.SpyInstance;\n\tconst oDialogModelData = {\n\t\tconfiguration: {\n\t\t\tactions: {\n\t\t\t\taddedActions: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Reopen\",\n\t\t\t\t\t\ttitleKey: \"C_SalesPlanTPReopen\",\n\t\t\t\t\t\tstyle: \"Positive\",\n\t\t\t\t\t\tenablePathKey: \"IsActiveEntity\",\n\t\t\t\t\t\tisStyleControlEnabled: true\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tannotationActions: [\n\t\t\t\t\t{\n\t\t\t\t\t\taction: \"C_SalesPlanTPRelease\",\n\t\t\t\t\t\tlabel: \"Release\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\taction: \"C_SalesPlanTPReopen\",\n\t\t\t\t\t\tlabel: \"Reopen\"\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t};\n\tconst oDialogModel = new JSONModel(oDialogModelData);\n\n\tbeforeAll(() => {\n\t\tcoreElementGetElementByIdSpy = jest.spyOn(CoreElement, \"getElementById\");\n\t\tcoreElementGetElementByIdSpy.mockImplementation((id) => {\n\t\t\tif (id === \"cardGeneratorDialog--cardGeneratorDialog\") {\n\t\t\t\treturn {\n\t\t\t\t\tgetModel: jest.fn().mockReturnValue(oDialogModel)\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t});\n\n\tafterAll(() => {\n\t\tcoreElementGetElementByIdSpy.mockRestore();\n\t});\n\n\ttest(\"should filter the available card actions in the ComboBox control based on the added actions\", () => {\n\t\tconst comboBox = new ComboBox({\n\t\t\titems: {\n\t\t\t\tpath: \"/configuration/actions/annotationActions\",\n\t\t\t\ttemplate: new ListItem({\n\t\t\t\t\tkey: \"{action}\",\n\t\t\t\t\ttext: \"{label}\"\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\t\tcomboBox.setModel(oDialogModel);\n\t\texpect(comboBox.getItems().length).toEqual(2);\n\t\tfilterCardActions(comboBox);\n\t\texpect(comboBox.getItems().length).toEqual(1);\n\t\texpect(comboBox.getItems()[0].getProperty(\"text\")).toEqual(\"Release\");\n\t\texpect(comboBox.getItems()[0].getProperty(\"key\")).toEqual(\"C_SalesPlanTPRelease\");\n\t});\n});\n"],"mappings":"AAAA;AACA;AACA;AACA;AAHA;;AAAAA,GAAA,CAAAC,EAAA,CAAAC,MAAA,gKAAAC,+CAAA,EAAAC,QAAA,EAAAC,WAAA,EAAAC,QAAA,EAAAC,SAAA;EAAA;;EAAA,MAISC,iBAAiB,GAAAL,+CAAA;EAY1BM,IAAI,CAACC,IAAI,CAACV,GAAG,CAACS,IAAI,CAACE,WAAW,CAAC,2CAA2C,CAAC,EAAE,MAAM;IAClF,OAAO;MACNC,kCAAkC,EAAEH,IAAI,CAACI,EAAE,CAAC;IAC7C,CAAC;EACF,CAAC,CAAC;EAEFC,QAAQ,CAAC,mBAAmB,EAAE,MAAM;IACnC,IAAIC,4BAA8C;IAClD,MAAMC,gBAAgB,GAAG;MACxBC,aAAa,EAAE;QACdC,OAAO,EAAE;UACRC,YAAY,EAAE,CACb;YACCC,KAAK,EAAE,QAAQ;YACfC,QAAQ,EAAE,qBAAqB;YAC/BC,KAAK,EAAE,UAAU;YACjBC,aAAa,EAAE,gBAAgB;YAC/BC,qBAAqB,EAAE;UACxB,CAAC,CACD;UACDC,iBAAiB,EAAE,CAClB;YACCC,MAAM,EAAE,sBAAsB;YAC9BC,KAAK,EAAE;UACR,CAAC,EACD;YACCD,MAAM,EAAE,qBAAqB;YAC7BC,KAAK,EAAE;UACR,CAAC;QAEH;MACD;IACD,CAAC;IACD,MAAMC,YAAY,GAAG,IAAIrB,SAAS,CAACS,gBAAgB,CAAC;IAEpDa,SAAS,CAAC,MAAM;MACfd,4BAA4B,GAAGN,IAAI,CAACqB,KAAK,CAACzB,WAAW,EAAE,gBAAgB,CAAC;MACxEU,4BAA4B,CAACgB,kBAAkB,CAAEC,EAAE,IAAK;QACvD,IAAIA,EAAE,KAAK,0CAA0C,EAAE;UACtD,OAAO;YACNC,QAAQ,EAAExB,IAAI,CAACI,EAAE,CAAC,CAAC,CAACqB,eAAe,CAACN,YAAY;UACjD,CAAC;QACF;MACD,CAAC,CAAC;IACH,CAAC,CAAC;IAEFO,QAAQ,CAAC,MAAM;MACdpB,4BAA4B,CAACqB,WAAW,CAAC,CAAC;IAC3C,CAAC,CAAC;IAEFC,IAAI,CAAC,6FAA6F,EAAE,MAAM;MACzG,MAAMC,QAAQ,GAAG,IAAIlC,QAAQ,CAAC;QAC7BmC,KAAK,EAAE;UACNC,IAAI,EAAE,0CAA0C;UAChDC,QAAQ,EAAE,IAAInC,QAAQ,CAAC;YACtBoC,GAAG,EAAE,UAAU;YACfC,IAAI,EAAE;UACP,CAAC;QACF;MACD,CAAC,CAAC;MACFL,QAAQ,CAACM,QAAQ,CAAChB,YAAY,CAAC;MAC/BiB,MAAM,CAACP,QAAQ,CAACQ,QAAQ,CAAC,CAAC,CAACC,MAAM,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC;MAC7CxC,iBAAiB,CAAC8B,QAAQ,CAAC;MAC3BO,MAAM,CAACP,QAAQ,CAACQ,QAAQ,CAAC,CAAC,CAACC,MAAM,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC;MAC7CH,MAAM,CAACP,QAAQ,CAACQ,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAACG,WAAW,CAAC,MAAM,CAAC,CAAC,CAACD,OAAO,CAAC,SAAS,CAAC;MACrEH,MAAM,CAACP,QAAQ,CAACQ,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAACG,WAAW,CAAC,KAAK,CAAC,CAAC,CAACD,OAAO,CAAC,sBAAsB,CAAC;IAClF,CAAC,CAAC;EACH,CAAC,CAAC;AAAC","ignoreList":[]}