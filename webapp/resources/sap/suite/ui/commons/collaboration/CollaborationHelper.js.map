{"version":3,"file":"CollaborationHelper.js","names":["sap","ui","define","Log","BaseObject","Element","CollaborationMessageConsumer","URL_KEY","PARAM_SAP_CARD_TITLE","PARAM_SAP_STAGEVIEW_HASH","PARAM_SAP_CARD_ID","PARAM_SAP_XX_CARD_ID","PARAM_SAP_CARD_INFO","PARAM_SAP_USHELL_CONFIG","PARAM_SAP_COLLABORATION_TEAMS","PARAM_SAP_UI_FESR_ENV","TRANSIENT_KEY","oLogger","getLogger","CollaborationHelper","extend","compactHash","sUrl","UshellContainer","require","url","getServiceAsync","then","async","oAppStateService","oEmptyAppState","createEmptyAppState","undefined","sKey","this","_getNextKey","_isEligibleForBackendPersistency","warning","sUrlBeforeHash","_extractURLBeforeHash","sSemanticObjectAndAction","_extractSemanticObjectAndAction","isMinificationPossible","_isMinificationFeasible","e","error","_storeUrl","catch","toString","bind","_getCurrentUrl","Promise","fnResolve","getFLPUrlAsync","sFLPUrl","resolve","document","URL","processAndExpandHash","_hideAvatarFromShellbar","sCurrentUrl","indexOf","sHash","split","includes","_retrieveURL","oAppState","getData","window","location","replace","_redirectBasedOnRuntime","_isFromTeams","urlObj","bIsFromTeams","searchParams","get","inAppRuntime","updateTopLevelURLforAppRuntime","targetUrl","_stripTeamsParams","_removeTeamsParams","urlParts","baseUrl","hashPart","path","queryString","params","URLSearchParams","delete","newBaseUrl","_isTopWindow","self","top","isTeamsModeActive","bIsActive","oAvatar","getElementById","setVisible","bAppRunningInTeams","oURLParsing","sBeforeHashURL","oParsedUrl","parseParameters","substring","bAppStateLean","hash","getAppState","appStateInstance","_oConfig","getKey","parsedShellHash","parseShellHash","_extractURLHash","contextRaw","semanticObject","action","oNavTargetResolution","oParsedShellHash","iParamsCount","Object","keys","length","resolveHashFragment","param","sUrlFragementBeforeHash","sUrlHash","setData","save"],"sources":["CollaborationHelper-dbg.js"],"mappings":"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","ignoreList":[]}