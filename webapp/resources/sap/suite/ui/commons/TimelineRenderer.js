/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["./library","sap/suite/ui/commons/util/HtmlElement","sap/ui/core/Icon","sap/m/Button","sap/base/security/encodeXML","sap/ui/core/Lib"],function(e,i,t,s,a,d){"use strict";var o=e.TimelineAxisOrientation,n=e.TimelineScrollingFadeout;var l={apiVersion:2},r=d.getResourceBundleFor("sap.suite.ui.commons");l.render=function(e,i){var t=this._getHtmlModel(i);t.getRenderer().render(e)};l._getHtmlModel=function(e){if(e.getAxisOrientation()===o.Horizontal){return this._getHorizontalTimelineElement(e)}else{return this._getVerticalTimelineElement(e)}};l._getScrollerIcon=function(e,s,d){var o=new i("div"),n="scrollerIcon"+d,l="getScrollerIcon"+d;o.addClass(a("sapSuiteUiCommonsTimelineScrollerIconWrapper sapSuiteUiCommonsTimelineScrollerIconWrapper"+d));e._objects.register(n,function(){return new t({src:"sap-icon://step"})});o.addChild(e._objects[l]());return o};l._setWidthAndHeight=function(e,i){var t=e.getHeight(),s=e.getWidth();if(t&&!e._isVertical()){i.addStyle("height",t)}if(s&&(e._isVertical()||e.getEnableScroll())){i.addStyle("width",s)}};l._getHorizontalTimelineElement=function(e){var t=e.getEnableDoubleSided(),s=e._isLeftAlignment(),a=e._outputItem,d=0,o=true,n,l,r,m,u,C,p=e._isMaxed(),c,S=function(){var e=new i("ul");e.setAttribute("role","list");return e};var g=new i("div"),h=new i("div"),T=new i("div"),f=new i("div"),_=new i("div"),I=S(),U=new i("div"),v=S(),H=new i("div"),b=S(),w=new i("div"),G=new i("div"),A=new i("div"),B=new i("div");g.addControlData(e);g.addClass("sapSuiteUiCommonsTimelineH");if(!e.getEnableScroll()){g.addClass("sapSuiteUiCommonsTimelineNoScroll")}if(e._useAutomaticHeight()){g.addClass("sapSuiteUiCommonsTimelineAutomaticLineHeight")}this._addAccessibilityTags(g,e);this._setWidthAndHeight(e,g);if(t){g.addClass("sapSuiteUiCommonsTimelineDblSidedH")}else{g.addClass(s?"sapSuiteUiCommonsTimelineRight":"sapSuiteUiCommonsTimelineLeft")}if(e._isGrouped()){g.addClass("sapSuiteUiCommonsTimelineGrouped")}g.addChild(e._objects.getHeaderBar());e._setMessageBars(g);A.setId(e.getId()+"-contentH-before");g.addChild(A);h.setId(e.getId()+"-contentH");h.addClass("sapSuiteUiCommonsTimelineContentsH");g.addChild(h);B.setId(e.getId()+"-contentH-after");g.addChild(B);T.setId(e.getId()+"-scrollH");T.addClass("sapSuiteUiCommonsTimelineScrollH");h.addChild(T);_.addClass("sapSuiteUiCommonsTimelineHorizontalTopLine");U.addClass("sapSuiteUiCommonsTimelineHorizontalMiddleLine");U.addChild(v);H.addClass("sapSuiteUiCommonsTimelineHorizontalBottomLine");if(t||s){_.addChild(I)}if(t||!s){H.addChild(b)}I.addClass("sapSuiteUiCommonsTimelineHorizontalScrollingLine");b.addClass("sapSuiteUiCommonsTimelineHorizontalScrollingLine");v.addClass("sapSuiteUiCommonsTimelineHorizontalScrollingLine");if(a.length>0){if(e._scrollingFadeout()){g.addChild(w);g.addChild(G);w.addClass("sapSuiteUiCommonsTimelineHorizontalLeftScroller sapSuiteUiCommonsTimelineHorizontalScroller");G.addClass("sapSuiteUiCommonsTimelineHorizontalRightScroller sapSuiteUiCommonsTimelineHorizontalScroller")}f.addClass("sapSuiteUiCommonsTimelineHorizontalScrollContainer");T.addChild(f);f.addChild(_);f.addChild(U);f.addChild(H);v.addChild(this._getFirstHorizontalDelimiterLine(a[0]));for(var E=0;E<a.length;E++){c=p;n=a[E];l=s?"top":"bottom";r=d%2;m=n.getText()==="GroupHeader";u=a[E+1];C=s?I:b;if(t){C=I;if(!m){C=r?b:I}l=r?"bottom":"top"}if(m){d=0;o=true;l="top";if(c){for(var M=E+1;M<a.length;M++){if(a[M]._isGroupHeader){c=false;break}}}}else if(r){n._isFirstGroupEvenItem=o;o=false}n._index=E;n._orientation="H";n._placementLine=l;C.addChild(n);var L=this._getHorizontalDelimiterLine(e,n,d,u,p&&!u,c);if(L){v.addChild(L)}if(!m){d++}}}else{T.addChild(this._getEmptyTimelineElement(e))}if(e._showMore){v.addChild(this._getShowMoreElement(e))}return g};l._getFirstHorizontalDelimiterLine=function(e){var t=new i("li"),s=new i("div"),a=new i("div"),d=new i("div"),o=e._isGroupHeader;d.addClass("sapSuiteUiCommonsTimelineItemBarH");a.addClass("sapSuiteUiCommonsTimelineItemBarWrapper");a.addChild(d);s.addChild(a);s.addClass("sapSuiteUiCommonsTimelineItemBarDivWrapper");t.addChild(s);t.addClass("sapSuiteUiCommonsTimelineItemFirstBar");if(o){t.addClass(e._isGroupCollapsed()?"sapSuiteUiCommonsTimelineGroupCollapsed":"sapSuiteUiCommonsTimelineGroupExpanded")}return t};l._getHorizontalDelimiterLine=function(e,t,s,d,o,n){var l=s%2,r=t.getText()==="GroupHeader",m=r?"sapSuiteUiCommonsTimelineItemGroupHeaderH":"sapSuiteUiCommonsTimelineItemBaseLength",u="sapSuiteUiCommonsTimelineItemBarH",C=d!=null&&d._isGroupHeader,p=d===null,c=t._getStatusColorClass(),S=new i("li"),g=new i("div"),h=new i("div"),T=new i("div"),f=new i("div"),_=new i("div"),I=new i("div");S.setId(t.getId()+"-line");if(r&&!t._isGroupCollapsed()){S.addStyle("display","none")}if(t._groupID){S.setAttribute("groupid",t._groupID)}if(r){u="sapSuiteUiCommonsTimelineItemGroupHeaderBar";S.setAttribute("nodeType","GroupHeaderBar")}else if(e.getEnableDoubleSided()){if((!C||l)&&!p){m=l?"sapSuiteUiCommonsTimelineItemHOdd":"sapSuiteUiCommonsTimelineItemHEven"}}if(!r&&o||r&&n){S.addClass("sapSuiteUiCommonsTimelineLastItem")}S.addClass(a(m));T.addClass("sapSuiteUiCommonsTimelineItemBarWrapper");h.addClass("sapSuiteUiCommonsTimelineItemBarH");h.addClass(a(u));g.addStyle("display","flex");g.addStyle("height","100%");if(e.getShowIcons()||r){g.addChild(f);if(!r){if(c){f.addClass(a(c))}else{f.addClass("sapSuiteUiCommonsTimelineNoStatus")}f.addClass("sapSuiteUiCommonsTimelineItemIconWrapper")}else{f.addClass("sapSuiteUiCommonsTimelineItemGroupBarIconWrapper")}f.addChild(t._getLineIcon())}else{I.addChild(_);I.addClass("sapSuiteUiCommonsTimelineItemNoIconWrapper");_.addClass("sapSuiteUiCommonsTimelineItemNoIcon");if(c){_.addClass(a(c))}else{_.addClass("sapSuiteUiCommonsTimelineNoStatus")}g.addClass("sapSuiteUiCommonsTimelineItemWrapper");g.addChild(I)}g.addChild(T);T.addChild(h);if(e._collapsedGroups[t._groupID]){if(r){S.addClass("sapSuiteUiCommonsTimelineItemGroupCollapsedBar")}else{S.addStyle("display","none")}}S.addChild(g);return S};l._getVerticalTimelineElement=function(e){var t=new i("div"),s=new i("div"),a=new i("div"),d=new i("div"),o=new i("div"),n=new i("div"),l=new i("div"),r=new i("div"),m=new i("div"),u,C,p,c,S,g,h=function(){var t=new i("ul");t.addClass("sapSuiteUiCommonsTimelineItemUlWrapper");t.setAttribute("role","list");t.setAttribute("aria-labelledby",e.getAriaLabelledBy().join(" "),true);return t};t.addControlData(e);t.addClass("sapSuiteUiCommonsTimeline");this._addAccessibilityTags(t,e);n.addClass("sapSuiteUiCommonsTimelineContentWrapper");if(e._isGrouped()){t.addClass("sapSuiteUiCommonsTimelineGrouped")}if(e._scrollingFadeout()){n.addChild(s);n.addChild(a);s.addClass("sapSuiteUiCommonsTimelineTopScroller sapSuiteUiCommonsTimelineVerticalScroller");a.addClass("sapSuiteUiCommonsTimelineBottomScroller sapSuiteUiCommonsTimelineVerticalScroller")}this._setWidthAndHeight(e,t);t.addChild(e._objects.getHeaderBar());e._setMessageBars(t);if(e.getMessageStrip()!==null&&e.getMessageStrip()!==undefined&&e.getMessageStrip().getText()!==""){t.addChild(e._objects.getMessageStrip())}r.setId(e.getId()+"-content-before");r.setAttribute("tabindex",0);t.addChild(r);t.addChild(n);n.addChild(d);d.setId(e.getId()+"-content");d.setAttribute("data-sap-ui-fastnavgroup","true");d.addClass("sapSuiteUiCommonsTimelineContents");d.addClass("sapSuiteUiCommonsTimelineScrollV");d.addClass("sapSuiteUiCommonsTimelineScroll");m.setId(e.getId()+"-content-after");m.setAttribute("tabindex",0);t.addChild(m);d.addChild(o);o.setId(e.getId()+"-scroll");o.addClass("sapSuiteUiCommonsTimelineScroll");u=h();var T=e._outputItem,f=e._isMaxed();if(T.length>0){o.addChild(u);for(var _=0;_<T.length;_++){g=f;C=T[_];p=T[_+1];c=C._isGroupHeader;C._orientation="V";C._position=e.getAlignment();C._additionalBarClass="";C._index=_;C._isLast=f&&T.length-1===_;if(c){u.setAttribute("groupId",C._groupID)}if(c){for(var I=_+1;I<T.length;I++){S=T[I];if(S._isGroupHeader){if(!S._isGroupCollapsed()&&C._isGroupCollapsed()){C._additionalBarClass="sapSuiteUiCommonsTimelineGroupNextExpanded"}g=false;break}}}C._isLastGroup=g;if(p&&p._isGroupHeader&&!p._isGroupCollapsed()){C._additionalBarClass="sapSuiteUiCommonsTimelineGroupNextExpanded"}if(c&&_!=0){u=h();o.addChild(u)}if(c){u.setAttribute("role","tree")}u.addChild(C)}}else{o.addChild(this._getEmptyTimelineElement(e))}if(e._showMore){l.addClass("sapSuiteUiCommonsTimelineShowMoreWrapper");l.addChild(this._getShowMoreElement(e));o.addChild(l)}return t};l._getEmptyTimelineElement=function(e){var t=new i("div"),s=new i("span");t.addClass("sapSuiteUiCommonsTimelineNoTextWrapper");t.addChild(s);s.addChildEscaped(e.getNoDataText());return t};l._getShowMoreElement=function(e){var t=e._isVertical()?new i("div"):new i("li"),d="sapSuiteUiCommonsTimelineItemGetMoreButtonV",n="sap-icon://drill-down";if(e.getAxisOrientation()===o.Horizontal){n="sap-icon://process";d="sapSuiteUiCommonsTimelineItemGetMoreButtonH"}e._objects.register("moreButton",function(){var i=new s({icon:n,tooltip:r.getText("TIMELINE_MORE"),press:function(){e._loadMore()}});i.addEventDelegate({onAfterRendering:function(){this.$().attr("tabindex",0)}},i);return i});t.addClass("sapSuiteUiCommonsTimelineItemGetMoreButton");t.addClass(a(d));t.addChild(e._objects.getMoreButton());return t};l._addAccessibilityTags=function(e,i){var t=[i._objects.getAccessibilityTitle().getId()];if(i._getFilterMessage()){t.push(i._objects.getFilterMessageText().getId())}e.setAttribute("role","presentation");e.addChild(i._objects.getAccessibilityTitle());e.setAttribute("aria-labelledby",t.join(" "),true)};return l},true);
//# sourceMappingURL=TimelineRenderer.js.map