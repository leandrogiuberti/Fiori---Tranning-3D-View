/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/suite/ui/commons/library","sap/ui/thirdparty/jquery","./ElementBase","sap/ui/core/IconPool","sap/m/CheckBox","sap/ui/core/Core","sap/ui/core/Lib","sap/base/i18n/Localization","./Utils"],function(e,jQuery,t,o,s,i,r,n,a){"use strict";const l=e.networkgraph.ElementStatus,p=e.networkgraph.HeaderCheckboxState,u=e.SemanticColorType;var h={COLLAPSED_HEIGHT:32,COLLAPSED_WIDTH:160,ROUNDING:6,ICON_OFFSET:8,ICON_SIZE:15,HEADER_SIZE:32};var d="expand-all",c="collapse-all",f="horizontal-grip";var g=r.getResourceBundleFor("sap.suite.ui.commons");var _=t.extend("sap.suite.ui.commons.networkgraph.Group",{metadata:{library:"sap.suite.ui.commons",properties:{headerCheckBoxState:{type:"sap.suite.ui.commons.networkgraph.HeaderCheckboxState",group:"Misc",defaultValue:p.Hidden},key:{type:"string",group:"Misc",defaultValue:null},collapsed:{type:"boolean",group:"Misc",defaultValue:false},icon:{type:"string",group:"Appearance",defaultValue:null},minWidth:{type:"float",defaultValue:undefined},parentGroupKey:{type:"string",group:"Misc",defaultValue:null}},events:{headerCheckBoxPress:{parameters:{checked:"boolean"}},collapseExpand:{},showDetail:{}},aggregations:{_checkBox:{type:"sap.m.CheckBox",multiple:false,visibility:"hidden"}}},renderer:{apiVersion:2,render:function(e,t){t._render({renderManager:e})}},onAfterRendering:function(){this._afterRenderingBase()}});_.prototype.aProcessRequiredProperties=["key","parentGroupKey"];_.BUTTONS={MENU:"menu",COLLAPSE:"collapse"};_.prototype.init=function(){this._iWidth=h.COLLAPSED_WIDTH;this._iHeight=h.COLLAPSED_HEIGHT;this._oActionButtons={};this._clearChildren();this._bIsHidden=false};_.prototype._afterRendering=function(){this._setupEvents();if(!this._isVisible()){this.$().hide()}if(this.$().find(".sapSuiteUiCommonsNetworkGraphHeaderCheckboxInner").length!==0){this.$().find(".sapSuiteUiCommonsNetworkGraphHeaderCheckboxInner").attr("aria-label",this.getTitle())}this._removeFromInvalidatedControls()};_.prototype._renderTopGroup=function(e){var t=this._getElementId(e.idSufix),o=this._iTopGroupIndex===0,s=e.renderManager;var i=this.getIcon(),r=this.getTitle();var n=this._iTopGroupIndex*50;if(this.getParent()._bIsRtl){o=!o;n=o?0:50}if(o){s.openStart("div").class("sapSuiteUiCommonsNetworkTopGroupDelimiter").openEnd().close("div")}this._renderHtmlElement("div",{top:0,left:n+"%",width:"50%",height:"32px"},{id:t,"data-sap-ui":t,class:"sapSuiteUiCommonsNetworkTopGroup "+(!o?"sapSuiteUiCommonsNetworkTopGroupRight":"")},s);s.openStart("div").class("sapSuiteUiCommonsNetworkTopGroupHeader").openEnd();if(i){this._renderHtmlIcon(i,null,null,null,null,s)}if(r){s.openStart("div").class("sapSuiteUiCommonsNetworkGroupHeaderTitle").attr("title",r).openEnd().text(r).close("div")}s.close("div");s.close("div")};_.prototype._render=function(e){var o=this.getParent(),s=!this.getCollapsed()||this._isCollapsedSwimLane()?this._iHeight:h.HEADER_SIZE,i;e=e||{};if(this._iNestedLevel===0&&o._isTwoColumnsLayout()){this._renderTopGroup(e);return""}if(this._isIgnored()||!this.getVisible()){return""}if(this.getParent()._isLayered()){i=this._getElementId(e.idSufix);var{style:r,class:n}=this._getStatusStyle({"border-color":t.ColorType.Border,"border-width":t.ColorType.BorderWidth,"border-style":t.ColorType.BorderStyle});var a=this._convertToStyle({top:this.getY()+"px",left:this.getX()+"px",width:this._iWidth+"px",height:s+"px"},r,true);this._renderHtmlElement("div",{},{id:i,"data-sap-ui":i,class:this._getGroupClass()+" "+n,style:a},e.renderManager);this._renderHeader(e);e.renderManager.close("div")}};_.prototype._renderHeader=function(e){var o=this.getIcon(),s=this.getTitle();let i=(e="",t)=>{(e.split(" ")||[]).forEach(e=>{t.class(e)})};if(this.getStatus()&&this.getStatus()!==l.Standard){var{style:r,class:a}=this._getStatusStyle({color:t.ColorType.Content},true);var{style:p,class:u}=this._getStatusStyle({color:t.ColorType.Content},false);if(this._bIsSwimLane){var{style:h,class:_}=this._getStatusStyle({"background-color":t.ColorType.Background},false)}else{var{style:C,class:m}=this._getStatusStyle({"background-color":t.ColorType.Background,"border-color":t.ColorType.Border},false)}}r=r||"";a=a||"";p=p||"";u=u||"";h=h||"";_=_||"";C=C||"";m=m||"";e.renderManager.openStart("div");this.applyStyles(e.renderManager,this.getStyleObject(C));e.renderManager.class("sapSuiteUiCommonsNetworkGroupHeader");i(m,e.renderManager);e.renderManager.openEnd();if(this._bIsSwimLane&&(h||this._hasDefaultStatus()||_)){e.renderManager.openStart("div").class("sapSuiteUiCommonsNetworkGroupHeaderStatus").openEnd();this.applyStyles(e.renderManager,this.getStyleObject(h));e.renderManager.close("div")}e.renderManager.openStart("div").class("sapSuiteUiCommonsNetworkGroupHeaderInner").class("sapSuiteUiCommonsNetworkGroupHeaderInnerText");if(_){e.renderManager.class(_).openEnd()}else{e.renderManager.openEnd()}if(this._showHeaderCheckBox()){this._renderClonedControl(e,this._getHeaderCheckbox())}if(o){this._renderHtmlIcon(o,"sapSuiteUiCommonsNetworkGroupHeaderIcon "+a,null,e.renderManager?p:r,null,e.renderManager)}if(s){e.renderManager.openStart("div").class(a||"").class("sapSuiteUiCommonsNetworkGroupHeaderTitle").attr("title",s);var S=n.getLanguage();var y=["ja","zh-TW","zh-CN","ko"];if(this._isVerticalSwimLane()&&y.indexOf(S)>-1){p=(p||"").length>0?p.concat(";text-orientation:sideways"):p.concat("text-orientation:sideways")}this.applyStyles(e.renderManager,this.getStyleObject(p));e.renderManager.openEnd();e.renderManager.text(s);e.renderManager.close("div")}e.renderManager.close("div");e.renderManager.openStart("div").class("sapSuiteUiCommonsNetworkGroupHeaderInner").class("sapSuiteUiCommonsNetworkGroupHeaderInnerIcons").openEnd();this._renderHtmlIcon(this.getCollapsed()?d:c,"sapSuiteUiCommonsNetworkGroupHeaderMenuIcon "+a,"collapse",e.renderManager?p:r,this.getCollapsed()?g.getText("NETWORK_GRAPH_COLLAPSED"):g.getText("NETWORK_GRAPH_EXPANDED"),e.renderManager);this._renderHtmlIcon(f,"sapSuiteUiCommonsNetworkGroupHeaderMenuIcon "+a,"menu",e.renderManager?p:r,g.getText("NETWORK_GRAPH_GROUP_DETAILS"),e.renderManager);e.renderManager.close("div");e.renderManager.close("div")};_.prototype._getGroupClass=function(){return"sapSuiteUiCommonsNetworkGroup "+this._getStatusClass()+(this.getCollapsed()?"sapSuiteUiCommonsNetworkGroupCollapsed":"sapSuiteUiCommonsNetworkGroupExpanded")+(this._bIsSwimLane?" sapSuiteUiCommonsNetworkGroupSwimLane":" sapSuiteUiCommonsNetworkGroupClassic")+(this._isVerticalSwimLane()?" sapSuiteUiCommonsNetworkGroupVerticalSwimLane":"")+(this._isTopBottom()?" sapSuiteUiCommonsNetworkGroupTopBottom ":"")};_.prototype.getChildNodes=function(){this._checkForProcessData();return this.aChildren};_.prototype.getChildLines=function(){this._checkForProcessData();return this.aLines};_.prototype.getParentNodes=function(){this._checkForProcessData();return this.aParents};_.prototype.getParentLines=function(){this._checkForProcessData();return this.aParentLines};_.prototype.getNodes=function(){this._checkForProcessData();return this.aNodes};_.prototype.isHidden=function(){return this._bIsHidden};_.prototype.setHidden=function(e){this.$()[e?"hide":"show"]();this._bIsHidden=e};_.prototype.getHeaderCheckbox=function(){return this._getHeaderCheckbox()};_.prototype._getHeaderCheckbox=function(){var e=this.getAggregation("_checkBox"),t=this;if(!e){e=new s(this.getId()+"-checkbox",{select:function(o){var s=e.getSelected();t.fireHeaderCheckBoxPress({checked:s})}}).addStyleClass("sapSuiteUiCommonsNetworkGraphHeaderCheckboxInner");this.setAggregation("_checkBox",e,true)}return e};_.prototype._isCollapsedSwimLane=function(){return this._bIsSwimLane&&this.getCollapsed()};_.prototype._clearChildren=function(){this.aNodes=[];this.aLines=[];this.aChildren=[];this.aParentLines=[];this.aParents=[];this.aChildGroups=[]};_.prototype._hasVisibleNodes=function(e){var t=this.aNodes.some(function(e){return!e._bIsHidden});if(!t){for(var o=0;o<this.aChildGroups.length;o++){if(this.aChildGroups[o]._hasVisibleNodes()){return true}}}return t};_.prototype._hasNodes=function(){var e=this.aNodes.some(function(e){return e._useInLayout()});if(!e){e=this.aChildGroups.some(function(e){return e._hasNodes()})}return e};_.prototype._hideShow=function(e){this.$()[e?"hide":"show"]();this._bIsHidden=e;var t=this._oParentGroup;while(t){var o=t._hasVisibleNodes();if(o&&!e||!o&&e){t._hideShow(e)}else{break}t=t._oParentGroup}};_.prototype._setButtonFocus=function(e,t){var o=t?"addClass":"removeClass";e[o]("sapSuiteUiCommonsNetworkElementFocus")};_.prototype._setMenuButtonFocus=function(e){this._setButtonFocus(jQuery(this._oActionButtons.menu),e)};_.prototype._setCollapseButtonFocus=function(e){this._setButtonFocus(jQuery(this._oActionButtons.collapse),e)};_.prototype._setGroupFocus=function(e){var t=e?"addClass":"removeClass";this.$()[t]("sapSuiteUiCommonsNetworkElementFocus")};_.prototype._setupEvents=function(){var e=this.$("menu"),o=this.$("header"),s=this.$("collapse"),i=this.$().find(".sapSuiteUiCommonsNetworkGroupHeaderMenuIcon");this._oActionButtons.menu=e[0];this._oActionButtons.collapse=s[0];s.off("click");e.off("click");o.off("click");i.off("mouseover");i.off("mouseout");e.on("click",function(e){var t=this.fireEvent("showDetail",{},true);if(t){this._openDetail()}if(this.getParent()){this.getParent().setFocus({item:this,button:_.BUTTONS.MENU})}this._setMenuButtonFocus(false)}.bind(this));s.on("click",function(e){this._collapse();if(this.getParent()){this.getParent().setFocus({item:this,button:_.BUTTONS.COLLAPSE})}}.bind(this));o.on("click",function(e){if(this.getParent()){this.getParent().setFocus({item:this})}this.firePress()}.bind(this));var r=function(e,t,o){if(!this._bIsSwimLane){let o=this._getColor(t);if(o){if(u.hasOwnProperty(o)){e.addClass(a.SEMANTIC_CLASS_NAME.BACKGROUND+o);e.addClass(a.SEMANTIC_CLASS_NAME.BORDER+o)}else{e.css("background-color",o)}}}let s=this._getColor(o);if(s){if(u.hasOwnProperty(s)){e.addClass(a.SEMANTIC_CLASS_NAME.TEXT+s)}else{e.css("color",s)}}}.bind(this);i.on("mouseover",function(e){r(jQuery(e.currentTarget),t.ColorType.HoverBackground,t.ColorType.HoverContent)});i.on("mouseout",function(e){r(jQuery(e.currentTarget),t.ColorType.Background,t.ColorType.Content)})};_.prototype._collapse=function(){this.getParent()._selectElementAfterScroll=this;this.fireEvent("collapseExpand",{},true);this.setCollapsed(!this.getCollapsed())};_.prototype._openDetail=function(){var e=this.$("menu");this.getParent()._tooltip.openDetail({item:this,opener:e[0]})};_.prototype._isEmpty=function(){return this.aNodes.length===0};_.prototype._isIgnored=function(){if(!this._useInLayout()){return true}return!this._hasNodes()};_.prototype._isVisible=function(){var e=this._bIsSwimLane||this.aNodes.some(function(e){return!e.isHidden()});if(!e){e=this.aChildGroups.some(function(e){return e._isVisible()})}return e};_.prototype._useInLayout=function(){return!this._oCollapsedByParent};_.prototype._resetSize=function(){if(this.getCollapsed()){this._iHeight=h.COLLAPSED_HEIGHT;this._iWidth=h.COLLAPSED_WIDTH}};_.prototype._getAccessibilityLabel=function(){return g.getText("NETWORK_GRAPH_GROUP")+" "+this.getTitle()};_.prototype._isTopBottom=function(){var e=this.getParent();return e&&e._isTopBottom()};_.prototype._isVerticalSwimLane=function(){if(this._bIsSwimLane){var e=this._isTopBottom();return e&&!this.getCollapsed()||!e&&this.getCollapsed()}return false};_.prototype._isCollapsed=function(){return this.getCollapsed()||!!this._oCollapsedByParent};t.prototype._showHeaderCheckBox=function(){return this.getHeaderCheckBoxState()!==p.Hidden};_.prototype._getBorderSize=function(){return 1};_.prototype._setFocus=function(e){this._setGroupFocus(e)};_.prototype._isOnScreen=function(e,o,s,i){var r=this.getX(),n=this.getY();return t._isRectOnScreen(r,r+this._iWidth,n,n+this._iHeight,e,o,s,i)};_.prototype.getHeaderCheckBoxState=function(){if(this.getProperty("headerCheckBoxState")===p.Hidden){return p.Hidden}return this.getHeaderCheckbox().getSelected()?p.Checked:p.Unchecked};_.prototype.setHeaderCheckBoxState=function(e){this._setHeaderCheckBoxState(e);return this};_.prototype.setX=function(e){this.fX=e;return this};_.prototype.getX=function(){return this.fX};_.prototype.setY=function(e){this.fY=e;return this};_.prototype.getY=function(){return this.fY};_.prototype._setCollapsed=function(e,t){var o=this;var s=this.getParent(),i=[];var r=function(t){t.aChildGroups.forEach(function(e){r(e)});if(o!==t){if(!t._oCollapsedByParent||t._oCollapsedByParent===o){t._oCollapsedByParent=e?o:null}}};var n=function(t){if(e){this.getNodes().forEach(function(e){if(e.getSelected()){e.setSelected(false);i.push(e)}});this.getChildLines().forEach(function(e){if(e.getSelected()&&e._isInCollapsedGroup()){e.setSelected(false);i.push(e)}})}}.bind(this);if(e!==this.getCollapsed()||t){this.setProperty("collapsed",e,true);if(e){this.getNodes().forEach(function(e){if(e.getSelected()){e.setSelected(false);i.push(e)}});this.getChildLines().forEach(function(e){if(e.getSelected()&&e._isInCollapsedGroup()){e.setSelected(false);i.push(e)}})}this.aChildGroups.forEach(function(e){n(e)});r(this);if(s&&i.length>0){s.fireSelectionChange({items:i})}if(s&&s._bIsLayedOut){s.invalidate()}}};_.prototype.setCollapsed=function(e){this._setCollapsed(e,false);return this};_.prototype.setVisible=function(e){this.setProperty("visible",e);var t=this.getParent();if(t&&t._bIsLayedOut&&!this.getCollapsed()){this.aNodes.forEach(function(t){if(!e){t.$().hide()}else if(!t._bIsHidden){t.$().show()}})}return this};return _});
//# sourceMappingURL=Group.js.map