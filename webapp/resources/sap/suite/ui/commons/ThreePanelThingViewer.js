/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/thirdparty/jquery","./library","sap/ui/ux3/library","sap/ui/commons/library","./VerticalNavigationBar","sap/ui/ux3/ThingViewer","sap/ui/commons/Button","sap/suite/ui/commons/ThreePanelThingViewerRenderer","sap/ui/events/ControlEvents","sap/ui/dom/containsOrEquals","sap/ui/core/Lib","sap/base/i18n/Localization"],function(jQuery,e,t,n,i,o,r,s,u,a,p,d){"use strict";var h=o.extend("sap.suite.ui.commons.ThreePanelThingViewer",{metadata:{deprecated:true,library:"sap.suite.ui.commons",properties:{logo:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},showHeader:{type:"boolean",group:"Misc",defaultValue:null},sidebarWidth:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"244px"}},aggregations:{menuContent:{type:"sap.ui.commons.Link",multiple:true,singularName:"menuContent"}}}});h.prototype.init=function(){this._rb=p.getResourceBundleFor("sap.suite.ui.commons");this._oNavBar=new i;this.setAggregation("navBar",this._oNavBar);this._oNavBar.attachSelect(function(e){var t=e.getParameters().item;if(this.fireFacetSelected({id:t.getId(),key:t.getKey(),item:t})){this.setSelectedFacet(t)}else{e.preventDefault()}},this);this._iSelectedMenuItem=0;this._oMenuButton=new r({id:this.getId()+"-menu-button",tooltip:this._rb.getText("THREEPANELTHINGVIEWER_BUTTON_MENU_TOOLTIP"),lite:true,press:[this._toggleMenuPopup,this]});this._oMenuButton.addStyleClass("sapSuiteTvTitleMb");this.fAnyEventHandlerProxy=this.onAnyEvent.bind(this)};h.prototype.exit=function(){this._oMenuButton.destroy();u.unbindAnyEvent(this.fAnyEventHandlerProxy)};h.prototype.onAfterRendering=function(){this._bMenuOpened=false;this._updateMenuPopup();this._toggleHeaderContent()};h.prototype.selectDefaultFacet=function(){this._selectDefault();return this};h.prototype._toggleMenuPopup=function(){jQuery(document.getElementById(this.getId()+"-menu-popup")).toggle();this._bMenuOpened=!this._bMenuOpened;if(this._bMenuOpened){u.bindAnyEvent(this.fAnyEventHandlerProxy);this.getMenuContent()[0].focus();this._iSelectedMenuItem=0}else{u.unbindAnyEvent(this.fAnyEventHandlerProxy)}};h.prototype._updateMenuPopup=function(){var e=jQuery(document.getElementById(this.getId()+"-header")).width();var t=jQuery(document.getElementById(this.getId()+"-menu-popup"));var n=d.getRTL()?"right":"left";var i=this.getMenuContent().length;t.css(n,e-22+"px");t.children().each(function(e){var t=jQuery(this);t.attr("tabindex","-1");t.attr("role","menuitem");t.attr("aria-posinset",e+1);t.attr("aria-setsize",i)})};h.prototype._rerenderFacetContent=function(){var e=jQuery(document.getElementById(this.getId()+"-facetContent"));if(e.length>0){var t=sap.ui.getCore().createRenderManager();s.renderFacetContent(t,this);t.flush(e[0]);t.destroy();this._resize=false;this._setTriggerValue();this._onresize()}};h.prototype._rerenderHeader=function(){var e=jQuery(document.getElementById(this.getId()+"-header"));if(e.length>0){var t=sap.ui.getCore().createRenderManager();s.renderHeader(t,this);t.flush(e[0]);t.destroy()}};h.prototype._rerenderHeaderContent=function(){var e=jQuery(document.getElementById(this.getId()+"-headerContent"));if(e.length>0){var t=sap.ui.getCore().createRenderManager();s.renderHeaderContent(t,this);t.flush(e[0]);t.destroy()}};h.prototype._toggleHeaderContent=function(){var e=jQuery(document.getElementById(this.getId()+"-headerContent"));if(this.getShowHeader()){e.show()}else{e.hide()}};h.prototype.onAnyEvent=function(e){if(this._bMenuOpened&&(e.type==="mousedown"||e.type==="focusin")){var t=e.target;var n=this.getId()+"-menu-popup"?window.document.getElementById(this.getId()+"-menu-popup"):null;if(!a(n,t)||t.tagName==="BODY"){this._toggleMenuPopup()}}};h.prototype.onsapescape=function(){if(this._bMenuOpened){this._toggleMenuPopup();this._oMenuButton.focus()}};h.prototype.onsapnext=function(e){if(this._bMenuOpened){var t=this.getMenuContent();this._iSelectedMenuItem++;if(this._iSelectedMenuItem>=t.length){this._iSelectedMenuItem=0}t[this._iSelectedMenuItem].focus();e.preventDefault();e.stopPropagation()}};h.prototype.onsapprevious=function(e){if(this._bMenuOpened){var t=this.getMenuContent();this._iSelectedMenuItem--;if(this._iSelectedMenuItem<0){this._iSelectedMenuItem=t.length-1}t[this._iSelectedMenuItem].focus();e.preventDefault();e.stopPropagation()}};h.prototype.setShowHeader=function(e){this.setProperty("showHeader",e,true);this._toggleHeaderContent();return this};return h});
//# sourceMappingURL=ThreePanelThingViewer.js.map