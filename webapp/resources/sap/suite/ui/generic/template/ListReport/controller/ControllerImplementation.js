sap.ui.define(["sap/ui/model/Filter","sap/suite/ui/generic/template/ListReport/extensionAPI/ExtensionAPI","sap/suite/ui/generic/template/listTemplates/listUtils","sap/suite/ui/generic/template/listTemplates/controller/MessageStripHelper","sap/suite/ui/generic/template/ListReport/controller/IappStateHandler","sap/suite/ui/generic/template/ListReport/controller/MultipleViewsHandler","sap/suite/ui/generic/template/ListReport/controller/WorklistHandler","sap/suite/ui/generic/template/lib/ShareUtils","sap/suite/ui/generic/template/lib/RestoreFocusHelper","sap/suite/ui/generic/template/genericUtilities/controlHelper","sap/suite/ui/generic/template/genericUtilities/FeLogger","sap/base/util/ObjectPath","sap/suite/ui/generic/template/js/StableIdHelper","sap/base/util/deepExtend","sap/suite/ui/generic/template/lib/CreateWithDialogHandler","sap/suite/ui/generic/template/ListReport/controller/CtxMenuHandler","sap/suite/ui/generic/template/ListReport/controller/MultiEditHandler","sap/fe/navigation/SelectionVariant","sap/suite/ui/generic/template/lib/insights/InsightsHandler","sap/suite/ui/generic/template/listTemplates/filterSettingsPreparationHelper","sap/m/table/Util","sap/suite/ui/generic/template/genericUtilities/filterHelper","sap/suite/ui/generic/template/js/AnnotationHelperHiddenTermSupport","sap/m/IllustratedMessageType","sap/suite/ui/generic/template/lib/ai/EasyFilterBarHandler","sap/ui/model/FilterOperator","sap/ui/core/message/MessageType","sap/ui/core/Element","sap/suite/ui/generic/template/genericUtilities/testableHelper"],function(e,t,n,r,i,a,o,l,s,c,u,d,p,g,f,m,v,S,C,h,E,y,b,F,H,I,T,P,U){"use strict";var M=new u("ListReport.controller.ControllerImplementation").getLogger();var D={getMethods:function(u,I,D){var A={};A.oWorklistData={bWorkListEnabled:!!I.oComponentUtils.getSettings().isWorklist};var w=new m(D,I,A);var R;var B=null;var O=new Map;var x=new s;function L(){var e=D.getOwnerComponent();var t=I.oComponentUtils.getTemplatePrivateModel();t.setProperty("/listReport/isLeaf",e.getIsLeaf())}function V(e){var t=e.getSource();var n=D.getOwnerComponent().getAnnotationPath();if(n!==undefined){k(t,n)}D.onInitSmartFilterBarExtension(e);D.templateBaseExtension.onInitSmartFilterBar(e)}function k(e,t){if(t.indexOf("com.sap.vocabularies.UI.v1.PresentationVariant")>-1){return}var r=new S(JSON.stringify(e.getUiState().getSelectionVariant()));var i=D.getOwnerComponent().getModel().getMetaModel();var a=D.getOwnerComponent().getEntitySet();var o=i.getODataEntityType(i.getODataEntitySet(a).entityType);var l=i.getObject(o.$path+"/"+t);if(l&&l.SelectionVariant&&(l.SelectionVariant.Path||l.SelectionVariant.AnnotationPath)){t=(l.SelectionVariant.Path||l.SelectionVariant.AnnotationPath).split("@")[1]}var s=i.getObject(o.$path+"/"+t);if(s){s=n.createSVObject(s,e);s.FilterContextUrl=r.getFilterContextUrl();A.oIappStateHandler.setFiltersUsingUIState(s.toJSONObject(),true,false)}else{var c=D.getOwnerComponent().getAppComponent().getNavigationController();c.navigateToMessagePage({title:I.oCommonUtils.getText("ST_ERROR"),text:"Manifest property 'annotationPath' is configured with "+t+" but no such annotation found.",description:"",messageType:F.UnableToLoad})}}function N(e){I.oCommonUtils.setEnabledToolbarButtons(e);if(!c.isSmartChart(e)){I.oCommonUtils.setEnabledFooterButtons(e)}}function W(e){var t;t=e.getSource();t.getChartAsync().then(function(e){e.attachSelectData(N.bind(null,t));e.attachDeselectData(N.bind(null,t))})}function j(e){var t=e.getParameters();var n=e.getSource();I.oCommonEventHandlers.onSemanticObjectLinkNavigationPressed(n,t)}function _(e){var t,n;t=e.getParameters();n=e.getSource();I.oCommonEventHandlers.onSemanticObjectLinkNavigationTargetObtained(n.getEntitySet(),n.getFieldSemanticObjectMap(),t,A)}function Q(e){var t=e.getParameters(),n=t.mainNavigation,r=e.getSource(),i;if(n){i=r.getText&&r.getText();var a=I.oCommonUtils.getCustomData(e);if(a&&a["LinkDescr"]){var o=a["LinkDescr"];n.setDescription(o)}}I.oCommonEventHandlers.onSemanticObjectLinkNavigationTargetObtained(A.oPresentationControlHandler.getEntitySet(),{},t,A,i)}function q(e){var t=u.getItems();for(var n=0;n<t.length;n++){if(!e||t[n].getBindingContextPath()===e){return t[n]}}}function z(e){I.oCommonEventHandlers.onListNavigate(e,A,undefined,true)}function J(e,t,n){var r=I.oServices.oCRUDManager.getDefaultValues(t,e);if(r instanceof Promise){var i=function(e){n.call(this,e,t)};r.then(i,i)}else{n.call(this,e,t)}}function K(e,t){if(e){$(e,t)}else{J(null,t,$)}}function $(e,t){if(t.data("CrossNavigation")){I.oCommonUtils.fnProcessDataLossOrDraftDiscardConfirmation(function(){I.oCommonEventHandlers.addEntry(t,false,A.oSmartFilterbar,e)},Function.prototype,"LeaveApp")}else{I.oCommonEventHandlers.addEntry(t,false,A.oSmartFilterbar,e)}}function G(){var e=A.oMultipleViewsHandler.getMode()!=="single"&&A.oMultipleViewsHandler.getSelectedKey()||"";var t=p.getStableId({type:"ListReportAction",subType:"Create",sQuickVariantKey:e});I.oCommonUtils.executeIfControlReady(function(t){var n=p.getStableId({type:"ListReportAction",subType:"CreateWithDialog",sQuickVariantKey:e});var r=n&&D.byId(n);if(r){A.oCreateWithDialogHandler.createWithDialog(r,t)}else{K(null,t)}},t)}function X(e){J(undefined,e.getSource(),Y)}function Y(e,t){var n=D.getOwnerComponent().getCreateWithFilters();var r=n.strategy||"extension";var i;switch(r){case"extension":i=D.getPredefinedValuesForCreateExtension(A.oSmartFilterbar,e)||{};break;default:M.error(r+" is not a valid strategy to extract values from the SmartFilterBar");return}var a=p.getStableId({type:"ListReportAction",subType:"CreateWithDialog"});var o=a&&D.byId(a);if(o){A.oCreateWithDialogHandler.createWithDialog(o,t,i)}else{K(i,t)}}function Z(e){var t=I.oComponentUtils.getTemplatePrivateModel();var n=t.getProperty("/listReport/deleteEnabled");if(n){I.oCommonEventHandlers.deleteEntries(e)}}function ee(t){if(!I.oComponentUtils.isDraftEnabled()){return}var n=I.oComponentUtils.getTemplatePrivateModel();var r=n.getProperty("/listReport/vDraftState");switch(r){case"1":t.push(new e("IsActiveEntity","EQ",true));t.push(new e("HasDraftEntity","EQ",false));break;case"2":t.push(new e("IsActiveEntity","EQ",false));break;case"3":t.push(new e("IsActiveEntity","EQ",true));t.push(new e("SiblingEntity/IsActiveEntity","EQ",null));t.push(new e("DraftAdministrativeData/InProcessByUser","NE",""));break;case"4":t.push(new e("IsActiveEntity","EQ",true));t.push(new e("SiblingEntity/IsActiveEntity","EQ",null));t.push(new e("DraftAdministrativeData/InProcessByUser","EQ",""));break;case"5":t.push(new e("IsActiveEntity","EQ",true));break;default:var i=new e({filters:[new e("IsActiveEntity","EQ",false),new e("SiblingEntity/IsActiveEntity","EQ",null)],and:false});if(t[0]&&t[0].aFilters){var a=t[0];t[0]=new e([a,i],true)}else{t.push(i)}break}}function te(){return A.oSmartFilterbar.getBasicSearchValue()||A.oWorklistHandler.getSearchString()}function ne(e){var t=function(){try{var e=A.oPresentationControlHandler;var t=e.getModel().getMetaModel();var n=t.getODataEntitySet(e.getEntitySet()).entityType;var r=e.getBinding(A);var i=r?r.getDownloadUrl():"";var a=r?r.aApplicationFilter||r.aApplicationFilters:[];if(!a.length){return Promise.resolve({sServiceUrl:i})}var o=A.oSmartFilterbar.getFilterData();var l=y.getFilterParams(t,n,a,o);if(l){i=I.oCommonUtils.fnReplaceFiltersWithGetDownloadUrl(i,l);return Promise.resolve({sServiceUrl:i})}else{return Promise.resolve({sServiceUrl:""})}}catch(e){M.error("An error occurred while handling Share button press. A static tile will be created instead of a dynamic one. Error:",e.message);return Promise.resolve({sServiceUrl:""})}};var n={sharePageToPressed:function(e){var t=I.oServices.oApplication.getBusyHelper();if(t.isBusy()){return}var n=I.oServices.oApplication.getAppTitle();var r=l.getCurrentUrl().then(function(t){switch(e){case"Email":n=I.oCommonUtils.getText("EMAIL_HEADER",[n]);sap.m.URLHelper.triggerEmail(null,n,t);break;default:break}});t.setBusy(r)},shareJamPressed:function(){l.openJamShareDialog(I.oServices.oApplication.getAppTitle())},shareTilePressed:function(){l.fireBookMarkPress()},getServiceUrl:function(){return t().then(function(e){if(e.sServiceUrl){e.sServiceUrl=e.sServiceUrl?e.sServiceUrl+"&$top=0&$inlinecount=allpages":""}var t={serviceUrl:e.sServiceUrl};D.onSaveAsTileExtension(t);return t.serviceUrl})},getModelData:function(){var e=d.get("sap.ushell.Container.getUser");var t=D.getOwnerComponent().getAppComponent();var r=t.getManifestEntry("sap.ui");var i=t.getManifestEntry("sap.app");return n.getServiceUrl().then(function(t){return l.getCurrentUrl().then(function(n){return{serviceUrl:t,icon:r&&r.icons?r.icons.icon:"",shellTitle:i?i.title:"",isShareInJamActive:!!e&&e().isJamActive(),customUrl:l.getCustomUrl(),currentUrl:n}})})}};var r=A.oIappStateHandler.areDataShownInTable();if(!r){A.oSmartFilterbar.search()}l.openSharePopup(I.oCommonUtils,e,n)}function re(e){var t=e.getId();var n=A.oSmartFilterbar;var r="";var i=[];var a=!!(I.oComponentUtils&&I.oComponentUtils.getSettings()&&(I.oComponentUtils.getSettings().quickVariantSelectionX||I.oComponentUtils.getSettings().quickVariantSelection));if(e.fetchVariant()&&e.fetchVariant().filter&&e.fetchVariant().filter.filterItems){i=e.fetchVariant().filter.filterItems}var o={search:!!n.getBasicSearchValue(),filter:!!(i.length||n.retrieveFiltersWithValues().length)};if(a){r=I.oCommonUtils.getContextText("NOITEMS_MULTIVIEW_LR_SMARTTABLE_WITH_FILTER",t)}else if(o.search||o.filter){r=I.oCommonUtils.getContextText("NOITEMS_LR_SMARTTABLE_WITH_FILTER",t)}else{r=I.oCommonUtils.getContextText("NOITEMS_LR_SMARTTABLE",t)}e.setNoData(r)}function ie(e){var t=e.getId();var n=I.oCommonUtils.getContextText("NOITEMS_LR_SMARTCHART",t);e.getChartAsync().then(function(e){e.setCustomMessages({NO_DATA:n})})}function ae(e){var t=e.getEntitySet();if(O.has(t)){return O.get(t)}var n=I.oServices.oApplication.preloadComponent(t);O.set(t,n);return n}var oe;function le(e){if(oe){oe()}oe=Function.prototype;I.oCommonEventHandlers.onDataReceived(e);if(B){var t;var n=false;for(var r=0;r<B.aWaitingObjects.length&&!n;r++){t=q(B.aWaitingObjects[r]);if(t){z(t);B.resolve();n=true}}if(!n){t=q();if(t){z(t);B.resolve()}else{B.reject()}}B=null;return}if(c.isTable(e)){var i=I.oServices.oPresentationControlHandlerFactory.getPresentationControlHandler(e).getBinding().getCount();E.announceTableUpdate(e.getHeader(),i)}R.handleDataReceived(e,z);var a=I.oComponentUtils.getTemplatePrivateModel();a.setProperty("/listReport/firstSelection",true);A.oIappStateHandler.setDataShownInTable(true);I.oComponentUtils.hidePlaceholder()}function se(e,t){w.beforeOpenContextMenu(e,t)}function ce(e,t){w.onContextMenu(e,t)}function ue(){return x}U.testableStatic(ne,"ControllerImplementation_onShareListReportActionButtonPressImpl");return{onInit:function(){A.oSmartFilterbar=D.byId("listReportFilter");A.oPresentationControlHandler=I.oServices.oPresentationControlHandlerFactory.getPresentationControlHandler(D.byId(p.getStableId({type:"ListReportTable",subType:"SmartTable"}))||D.byId(p.getStableId({type:"ListReportTable",subType:"SmartList"})));h.fnMergeControlConfiguration(A.oSmartFilterbar.getControlConfiguration());A.updateControlOnSelectionChange=N;R=I.oComponentUtils.getFclProxy();A.bLoadListAndFirstEntryOnStartup=R.isListAndFirstEntryLoadedOnStartup();var e=new a(A,D,I);A.oMultipleViewsHandler=e;A.oMessageStripHelper=new r(A.oPresentationControlHandler,e,D,I,"listReport");A.refreshModel=function(){var t=I.oCommonUtils.refreshModel(A.oPresentationControlHandler.getEntitySet());if(t){e.refreshSiblingControls(A.oPresentationControlHandler)}};A.oCreateWithDialogHandler=new f(A,D,I);A.oWorklistHandler=new o(A,D,I);A.oIappStateHandler=new i(A,D,I);A.oMultiEditHandler=new v(A,D,I);A.oInsightsHandler=new C(A,D,I);var t=I.oComponentUtils.getTemplatePrivateModel();t.setProperty("/listReport/aMissingNavProperties",false);t.setProperty("/generic/bDataAreShownInTable",false);t.setProperty("/listReport/firstSelection",false);t.setProperty("/listReport/isHeaderExpanded",true);t.setProperty("/listReport/filterMode","classic");t.setProperty("/listReport/deleteEnabled",false);t.setProperty("/listReport/multiEditEnabled",false);if(I.oComponentUtils.isDraftEnabled()){t.setProperty("/listReport/vDraftState","0")}t.setProperty("/listReport/multipleViews/msgVisibility",false);var n=I.oServices.oInsightsFECardProvider&&I.oServices.oInsightsFECardProvider.getCardProviderInsightsInstance();if(n&&!I.oCommonUtils.isMultiViewMultiEntity()){I.oServices.oInsightsFECardProvider.fnRegisterComponentForProvider(A.oInsightsHandler,D.getView().getId());t.bindProperty("/generic/bDataAreShownInTable").attachChange(function(e){if(e.getSource().getValue()){A.oInsightsHandler.getCardsToShare("Table").then(function(e){n.onViewUpdate(true,e)})}else{n.onViewUpdate(true,[])}})}u.setFocus=function(e,t){x.restoreFocus()};u.adaptToChildContext=function(e){A.oPresentationControlHandler.scrollToSelectedItemAsPerChildContext(e)};u.getItems=function(){return A.oPresentationControlHandler.getItems()};u.displayNextObject=function(e){return new Promise(function(t,n){B={aWaitingObjects:e,resolve:t,reject:n}})};u.refreshBinding=function(e,t,n){if(A.oIappStateHandler.areDataShownInTable()){if(A.oMultipleViewsHandler.refreshOperation(2,null,!e&&t)){return}if(e||t[D.getOwnerComponent().getEntitySet()]){I.oCommonUtils.refreshModel(D.getOwnerComponent().getEntitySet());A.oPresentationControlHandler.refresh(undefined,undefined,n)}}};u.getCurrentState=function(){return{permanentState:{data:A.oIappStateHandler.getCurrentAppState(),lifecycle:{permanent:true}}}};u.applyState=function(e){return A.oIappStateHandler.applyState(e.permanentState).then(function(){if(!A.oIappStateHandler.areDataShownInTable()){R.handleDataReceived()}})};L();D.byId("template::FilterText").attachBrowserEvent("click",function(){D.byId("page").setHeaderExpanded(true)});var l=D.byId(p.getStableId({type:"ListReportAction",subType:"Share"})+"-internalBtn");l.attachPress(function(){ne(l)})},handlers:{addEntry:G,addEntryWithFilters:X,deleteEntries:Z,deleteEntry:function(e){I.oCommonEventHandlers.deleteEntry(e)},updateTableTabCounts:function(){A.oMultipleViewsHandler.fnUpdateTableTabCounts()},onCancelCreateWithPopUpDialog:function(){A.oCreateWithDialogHandler.onCancelPopUpDialog()},onSaveCreateWithPopUpDialog:function(e){A.oCreateWithDialogHandler.onSavePopUpDialog(e)},onSelectionChange:function(e){var t=e.getSource();N(t)},onMultiSelectionChange:function(e){I.oCommonEventHandlers.onMultiSelectionChange(e)},onContactDetails:function(e){I.oCommonEventHandlers.onContactDetails(e)},onSmartFilterBarInitialise:V,onSmartFilterBarInitialized:function(){A.oIappStateHandler.onSmartFilterBarInitialized();I.oServices.oFioriAIHandler&&I.oServices.oFioriAIHandler.getFioriAIEnabledPromise("EasyFilter").then(function(){A.oIappStateHandler.onFEStartupInitialized().then(function(){A.oEasyFilterBarHandler=new H(A,D,I);A.oEasyFilterBarHandler.initialiseEasyFilterBar();A.oSmartFilterbar.attachFilterChange(function(e){A.oEasyFilterBarHandler.onFilterChange(e)})})}).catch(function(){M.warning("Easy filter is not enabled on this tenant")})},onAfterSFBVariantLoad:function(e){A.oIappStateHandler.onAfterSFBVariantLoad(e);A.oEasyFilterBarHandler&&A.oEasyFilterBarHandler.handleVariantLoad(e)},onSmartListDataReceived:function(e){var t=e.getSource();le(t)},onEasyFilterClearFilters:function(e){A.oEasyFilterBarHandler.onClearFilters(e)},onEasyFilterAfterQueryProcessing:function(e){A.oEasyFilterBarHandler.onAfterQueryProcessing(e)},onEasyFilterBeforeQueryProcessing:function(e){A.oEasyFilterBarHandler.onBeforeQueryProcessing(e)},onEasyFilterTokensChanged:function(e){A.oEasyFilterBarHandler.onTokensChanged(e)},onEasyFilterQueryChanged:function(e){A.oEasyFilterBarHandler.onQueryChanged(e)},onEasyFilterShowValueHelp:function(e){A.oEasyFilterBarHandler.onShowValueHelp(e)},onEasyFilterDataFetcher:function(e,t,n){return A.oEasyFilterBarHandler.onDataFetcher(e,t,n)},onFilterSwitch:function(){var e=A.oSmartFilterbar;var t=I.oComponentUtils.getTemplatePrivateModel();if(t.getProperty("/listReport/filterMode")==="easyFilter"){e.setVisible(false);var n=I.oComponentUtils.getTemplatePrivateModel();n.setProperty("/listReport/firstSelection",true);n.setProperty("/generic/bDataAreShownInTable",false)}else{e.setVisible(true)}},onBeforeRebindTable:function(t){var r=t.getSource();re(r);var i=t.getParameters().bindingParams;var a=i.filters.slice(0);var o=A.oSmartFilterbar.getId(),l=I.oCommonUtils.getControlStateWrapperById(o,"SmartFilterBar"),s=l.getMissingNavProperties();if(s.length){var c=A.oSmartFilterbar.getVariantManagement().getId(),u=A.oSmartFilterbar.getCurrentVariantId(),d=P.getElementById(c).getAllVariants(),p=d.find(function(e){return e.getId()===u}),g=p?p.mProperties.texts.variantName.value:"",f=I.oCommonUtils.getMetaModelEntityType(A.oSmartFilterbar.getEntitySet()).property.reduce(function(e,t){if(t["sap:text"]){e[t["sap:text"].split("/")[0]]=t.name}return e},{}),m=s.reduce(function(e,t){var n=t[0].field.split(".")[0];if(f[n]){e.push(f[n])}return e},[]),v=I.oCommonUtils.getText("MESSAGE_FILTER_NOT_AVAILABLE",[g,m.join(", ")]),S={message:v,type:T.Warning},C=A.oMultipleViewsHandler.getSelectedKey();A.oMessageStripHelper.setCustomMessage(S,C);var h=[];s.forEach(function(t){var n=[],r=[];t.forEach(function(t){var i=t.field.replace(".","/");if(t.exclude){r.push(new e(i,y.negateOperation(t.operation),t.value1,t.value2))}else{n.push(new e(i,t.operation,t.value1,t.value2))}});var i=r.length?new e(r,true):null;if(n.length){if(i){h.push(new e([new e(n,false),i],true))}else{h.push(new e(n,false))}}else if(i){h.push(i)}});i.filters.push(new e(h,true))}I.oCommonEventHandlers.onBeforeRebindTable(t,{determineSortOrder:A.oMultipleViewsHandler.determineSortOrder,ensureExtensionFields:D.templateBaseExtension.ensureFieldsForSelect,addTemplateSpecificFilters:ee,getSearchString:te,addExtensionFilters:D.templateBaseExtension.addFilters,resolveParamaterizedEntitySet:A.oMultipleViewsHandler.resolveParameterizedEntitySet,isFieldControlRequired:false,isPopinWithoutHeader:true,isDataFieldForActionRequired:true,isFieldControlsPathRequired:true,isMandatoryFiltersRequired:true,numberOfExpandedLevels:1});D.onBeforeRebindTableExtension(t);var E=i.events.dataRequested||Function.prototype;i.events.dataRequested=function(e){var t=this;ae(r).then(function(){E.call(t,e)})};var F=i.events.dataReceived||Function.prototype;i.events.dataReceived=function(e){le(r);var t=b.getHiddenColumnInfo(r);I.oCommonEventHandlers.hideTableCells(r,t);F.call(this,e)};var H=i.events.refresh||Function.prototype;i.events.refresh=function(e){A.oMultipleViewsHandler.onDataRequested();H.call(this,e)};A.oMessageStripHelper.onBeforeRebindControl(t);A.oMultipleViewsHandler.onRebindContentControl(i,a);n.handleErrorsOnTableOrChart(I,t,A)},onListNavigate:function(e){var t=g({},e);(I.oComponentUtils.isDraftEnabled()?I.oServices.oApplicationController.synchronizeDraftAsync():Promise.resolve()).then(function(){I.oCommonEventHandlers.onListNavigate(t,A)})},onEdit:function(e){I.oCommonEventHandlers.onListNavigate(e,A)},onCallActionFromToolBar:function(e){I.oCommonEventHandlers.onCallActionFromToolBar(e,A)},onDataFieldForIntentBasedNavigation:function(e){I.oCommonEventHandlers.onDataFieldForIntentBasedNavigation(e,A)},onDataFieldWithEmail:function(e){I.oCommonEventHandlers.onDataFieldWithEmail(e)},onDataFieldWithIntentBasedNavigation:function(e){I.oCommonEventHandlers.onDataFieldWithIntentBasedNavigation(e,A)},onBeforeSemanticObjectLinkNavigationCallback:function(e){return I.oCommonEventHandlers.onBeforeSemanticObjectLinkNavigationCallback(e)},onBeforeSemanticObjectLinkPopoverOpens:function(e){var t=e.getSource();var n=A.oSmartFilterbar.getUiState().getSelectionVariant();if(A.oSmartFilterbar.getEntitySet()!==t.getEntitySet()){n.FilterContextUrl=I.oServices.oApplication.getNavigationHandler().constructContextUrl(t.getEntitySet(),t.getModel())}var r=JSON.stringify(n);I.oCommonUtils.semanticObjectLinkNavigation(e,r,D,A)},onSemanticObjectLinkNavigationPressed:j,onSemanticObjectLinkNavigationTargetObtained:_,onSemanticObjectLinkNavigationTargetObtainedSmartLink:Q,onDraftLinkPressed:function(e){var t=e.getSource();var n=t.getBindingContext();I.oCommonUtils.showDraftPopover(n,t)},onAssignedFiltersChanged:function(e){if(e.getSource()){D.byId("template::FilterText").setText(e.getSource().retrieveFiltersWithValuesAsText())}},onSearchButtonPressed:function(){A.oIappStateHandler.onSearchPressed()},onAddCardsToRepository:function(e){I.oServices.oApplication.performAfterSideEffectExecution(function(){A.oInsightsHandler.prepareAndShowCard(e,{cardType:"Table"})},true)},onBeforeRebindChart:function(e){var t=e.getSource();ie(t);var r=e.getParameters().bindingParams;var i=r.filters.slice(0);var a={setBindingPath:t.setChartBindingPath.bind(t),ensureExtensionFields:Function.prototype,addTemplateSpecificFilters:ee,addExtensionFilters:D.templateBaseExtension.addFilters,resolveParamaterizedEntitySet:A.oMultipleViewsHandler.resolveParameterizedEntitySet,isFieldControlRequired:false,isMandatoryFiltersRequired:true};I.oCommonUtils.onBeforeRebindTableOrChart(e,a,A.oSmartFilterbar);D.onBeforeRebindChartExtension(e);var o=r.events.dataReceived||Function.prototype;r.events.dataReceived=function(e){A.oMultipleViewsHandler.onDataRequested();I.oComponentUtils.hidePlaceholder();o.call(this,e)};A.oMultipleViewsHandler.onRebindContentControl(r,i);n.handleErrorsOnTableOrChart(I,e,A)},onChartInitialized:function(e){W(e);I.oCommonUtils.checkToolbarIntentsSupported(e.getSource())},onSelectionDetailsActionPress:function(e){A.oMultipleViewsHandler.onDetailsActionPress(e)},onShareListReportActionButtonPress:function(e){I.oCommonUtils.executeIfControlReady(ne,p.getStableId({type:"ListReportAction",subType:"Share"})+"-internalBtn")},onInlineDataFieldForAction:function(e){I.oCommonEventHandlers.onInlineDataFieldForAction(e)},onInlineDataFieldForIntentBasedNavigation:function(e){I.oCommonEventHandlers.onInlineDataFieldForIntentBasedNavigation(e.getSource(),A)},onDeterminingDataFieldForAction:function(e){I.oCommonEventHandlers.onDeterminingDataFieldForAction(e,A.oPresentationControlHandler)},onDeterminingDataFieldForIntentBasedNavigation:function(e){I.oCommonEventHandlers.onDeterminingDataFieldForIntentBasedNavigation(e.getSource(),A.oPresentationControlHandler.getSelectedContexts(),A.oSmartFilterbar)},onTableInit:function(e){var t=e.getSource();var n=b.getHiddenColumnInfo(t);if(n&&n.staticHiddenColumns&&n.staticHiddenColumns.length>0){t.deactivateColumns(n.staticHiddenColumns)}I.oCommonUtils.checkToolbarIntentsSupported(t);t.setModel(new sap.ui.model.base.ManagedObjectModel(t),"tableobserver");I.oServices.oPresentationControlHandlerFactory.getPresentationControlHandler(t).addCellSelector()},onSearchWorkList:function(e){A.oWorklistHandler.performWorklistSearch(e)},onMultiEditButtonPress:function(){A.oMultiEditHandler.onMultiEditButtonPress()},onSaveMultiEditDialog:function(e){A.oMultiEditHandler.onSaveMultiEditDialog(e)},onCancelMultiEditDialog:function(e){A.oMultiEditHandler.onCancelMultiEditDialog(e)},dataStateFilter:function(e,t){return A.oMessageStripHelper.dataStateFilter(e,t)},dataStateClose:function(){A.oMessageStripHelper.onClose()},onBeforeExport:function(e){I.oCommonEventHandlers.onBeforeExport(e)},beforeOpenContextMenu:se,onContextMenu:ce},formatters:{formatDraftType:function(e,t,n){if(e&&e.DraftUUID){if(!t){return sap.m.ObjectMarkerType.Draft}else if(n){return e.InProcessByUser?sap.m.ObjectMarkerType.Locked:sap.m.ObjectMarkerType.Unsaved}}return sap.m.ObjectMarkerType.Flagged},formatDraftVisibility:function(e,t){if(e&&e.DraftUUID){if(!t){return sap.m.ObjectMarkerVisibility.TextOnly}}return sap.m.ObjectMarkerVisibility.IconAndText},formatDraftLineItemVisible:function(e,t){if(e&&e.DraftUUID){if(t==="5"){return false}return true}return false},formatDraftOwner:function(e,t){var n="";if(e&&e.DraftUUID&&t){var r=e.InProcessByUserDescription||e.InProcessByUser||e.LastChangedByUserDescription||e.LastChangedByUser;if(r){n=I.oCommonUtils.getText("ST_DRAFT_OWNER",[r])}else{n=I.oCommonUtils.getText("ST_DRAFT_ANOTHER_USER")}}return n},formatItemTextForMultipleView:function(e){return A.oMultipleViewsHandler?A.oMultipleViewsHandler.formatItemTextForMultipleView(e):""},formatMessageStrip:function(e,t){return A.oMultipleViewsHandler?A.oMultipleViewsHandler.formatMessageStrip(e,t):""}},controllerServices:{getRestoreFocusHelper:ue},extensionAPI:new t(I,D,A)}}};return D});
//# sourceMappingURL=ControllerImplementation.js.map