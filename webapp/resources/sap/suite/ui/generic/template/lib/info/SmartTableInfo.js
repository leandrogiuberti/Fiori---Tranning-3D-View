sap.ui.define(["sap/base/util/isEmptyObject","sap/suite/ui/generic/template/js/StableIdHelper","sap/suite/ui/generic/template/js/AnnotationHelper","sap/suite/ui/generic/template/lib/info/CommonInfo"],function(e,t,n,a){"use strict";function i(i,r,o,l){var u;var s;var c;var g;var d;var f={staticHiddenColumns:[],columnKeyToHiddenPath:undefined,columnKeyToCellHiddenPath:undefined};var p=new a(["smartTable","smartControl","searchField","smartTableWithColumnHide"],C);function y(){p.pushCategory("smartTable",true);p.pushCategory("smartControl",true);d=o.oCommonUtils.getControlStateWrapperById(S(),"SmartTable");d.attachStateChanged(function(){o.initialStateAppliedPromise.then(o.oComponentUtils.stateChanged)})}function C(e){s=e;var t=r.getOwnerComponent().getModel().getMetaModel();var n=t.getODataEntitySet(s.getEntitySet());var a=t.getODataEntityType(n.entityType);var i=s.getCustomData();var o=i.find(function(e){return e.getKey()==="lineItemQualifier"});var l=o?"#"+o.getValue():"";g=a["com.sap.vocabularies.UI.v1.LineItem"+l]||[];m(t,a,g);d.setControl(s)}function m(t,n,a){var i=[];var r=Object.create(null);a.forEach(v.bind(null,i,r,t,n));if(!e(r)||i.length){f.staticHiddenColumns=i;f.columnKeyToHiddenPath=r;l.pushCategory(S(),"smartTableWithColumnHide")}}function v(e,t,a,i,l){var u=/[A-Za-z].*[A-Za-z]/;var c=n.createP13NColumnKey(l);var g=n.getBindingForHiddenPath(l);if(g==="{= !${} }"){e.push(c)}if(typeof g==="string"){var d=g.match(u)&&g.match(u)[0];if(d&&d.indexOf("/")>0&&i.navigationProperty){var p=r.getOwnerComponent().getEntitySet();var y=p;var C=s.getTableBindingPath();var m=C.split("/");if(m.length===2){y=h(p,a,m);C=m[1]}var v=d.split("/",1)[0];if(o.oCommonUtils.checkInverseNavigation(y,C,s.getEntitySet(),v)){t[c]=d.split("/").slice(1).join("/")}}else if(d&&d.indexOf("/")===-1){if(!f.columnKeyToCellHiddenPath){var t=Object.create(null);f.columnKeyToCellHiddenPath=t}f.columnKeyToCellHiddenPath[c]=d}}else if(!g){e.push(c)}}function h(e,t,n){var a=t.getODataEntitySet(e);var i=t.getODataEntityType(a.entityType);var r=t.getODataAssociationSetEnd(i,n[0]);return r.entitySet}function S(){if(!u){var e=t.getStableId({type:"ObjectPageTable",subType:"SmartTable",sFacet:i.additionalData.facetId});u=r.getView().createId(e)}return u}function b(){p.getControlAsync().then(function(){var e=s.getDataStateIndicator();var t=e.isFiltering();if(t){e.refresh()}})}function P(){if(!c&&T()){c=r.getView().createId(i.tableSettings.searchSettings.id)}return c}function T(){return i.tableSettings.searchSettings&&i.tableSettings.searchSettings.enabled}function H(){p.getControlAsync().then(function(){s.rebindTable();var e=o.oServices.oPresentationControlHandlerFactory.getPresentationControlHandler(s);e.refresh()})}function E(){return i.navigationProperty}function I(e){var t=g.find(function(t){return(t.Value&&t.Value.Path)===e});return t?n.createP13NColumnKey(t):e}y();return{restrictedObject:{setControl:p.setControl,getControlAsync:p.getControlAsync,getId:S,getNavigationProperty:E,getSearchFieldId:P,isSearchSupported:T,onSaveWithError:b,rebindTable:H,getControlStateWrapper:function(){return d},getHiddenColumnInfo:function(){return f},getColumnKeyForProperty:I},getCategories:p.getCategories,pushCategory:function(e){return p.pushCategory(e)},getSupportedCategories:p.getSupportedCategories,getPendingExecutions:p.getPendingExecutions,pushPendingExecutions:p.pushPendingExecutions}}return i});
//# sourceMappingURL=SmartTableInfo.js.map