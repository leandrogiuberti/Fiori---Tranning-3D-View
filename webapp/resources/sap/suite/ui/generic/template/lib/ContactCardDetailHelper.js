sap.ui.define(["sap/suite/ui/commons/collaboration/ServiceContainer","sap/ui/performance/trace/FESRHelper","sap/suite/ui/generic/template/genericUtilities/controlHelper"],function(e,t,r){"use strict";function a(e,a,i,n,l){var s=JSON.parse(a.data("contactDetails"));var p="",c;if(s.email&&s.email[0]){c=s.email[0].type&&s.email[0].type.EnumMember;if(c&&c.indexOf("com.sap.vocabularies.Communication.v1.ContactInformationType/work")>-1){if(s.email[0].address&&s.email[0].address.Path){p=i.getProperty(s.email[0].address.Path)}else{p=s.email[0].address&&s.email[0].address.String}}}var u=function(){e.getDialogFragmentAsync("sap.suite.ui.generic.template.fragments.ContactDetails",{formatUri:function(e){var t=/^[a-zA-Z0-9._%+-]+@([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\.)+[a-zA-Z]{2,}$/;if(t.test(e)){return"mailto:"+e}else{return"tel:"+e}},onTeamsCollabOptionPress:function(e){var t=e.getSource();var r=t.data("type");var a=n.find(function(e){return e.key===r});a.callBackHandler.call(this,e)},afterClose:function(e){var t=e.getSource();t.close()},afterOpen:function(e){var a=e.getSource();var o=a.getContent()[0].getItems()[1].getItems()[0];o.getContent().forEach(function(e){if(r.isButton(e)){var a=e.data("type");if(a){var o=n.find(function(e){return e.key===a});t.setSemanticStepname(e,"press",o.fesrStepName)}}})}},"contact").then(function(e){var t=e.getModel("contact");var r;t.setProperty("/",{});t.setProperty("/device",sap.ui.Device);s.fn&&s.fn.Path?t.setProperty("/fn",i.getProperty(s.fn.Path)):t.setProperty("/fn",s.fn&&s.fn.String);s.title&&s.title.Path?t.setProperty("/title",i.getProperty(s.title.Path)):t.setProperty("/title",s.title&&s.title.String);s.photo&&s.photo.Path?t.setProperty("/photo",i.getProperty(s.photo.Path)):t.setProperty("/photo",s.photo&&s.photo.String);s.role&&s.role.Path?t.setProperty("/role",i.getProperty(s.role.Path)):t.setProperty("/role",s.role&&s.role.String);s.org&&s.org.Path?t.setProperty("/org",i.getProperty(s.org&&s.org.Path)):t.setProperty("/org",s.org&&s.org.String);t.setProperty("/email",p);if(s.adr&&s.adr[0]&&!t.getProperty("/adr")){r=s.adr[0].type&&s.adr[0].type.EnumMember;if(r&&r.indexOf("com.sap.vocabularies.Communication.v1.ContactInformationType")>-1){var c=o(i,s);t.setProperty("/adr",c)}}var u=s.tel&&s.tel.length||0;for(var P=0;P<u;P++){if(s.tel[P]&&!t.getProperty("/fax")){r=s.tel[P].type&&s.tel[P].type.EnumMember;if(r&&r.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/fax")>-1){if(s.tel[P].uri&&s.tel[P].uri.Path){t.setProperty("/fax",i.getProperty(s.tel[P].uri.Path))}else{t.setProperty("/fax",s.tel[P].uri&&s.tel[P].uri.String)}continue}}if(s.tel[P]&&!t.getProperty("/cell")){r=s.tel[P].type&&s.tel[P].type.EnumMember;if(r&&r.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/cell")>-1){if(s.tel[P].uri&&s.tel[P].uri.Path){t.setProperty("/cell",i.getProperty(s.tel[P].uri.Path))}else{t.setProperty("/cell",s.tel[P].uri&&s.tel[P].uri.String)}continue}}if(s.tel[P]&&!t.getProperty("/work")){r=s.tel[P].type&&s.tel[P].type.EnumMember;if(r&&r.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/work")>-1){if(s.tel[P].uri&&s.tel[P].uri.Path){t.setProperty("/work",i.getProperty(s.tel[P].uri.Path))}else{t.setProperty("/work",s.tel[P].uri&&s.tel[P].uri.String)}continue}}}if(n&&n.length&&p){t.setProperty("/teamsCollabOptions",n)}if(l&&l.length&&p){t.setProperty("/contactStatus",l[0])}e.openBy(a)})};u.call(this)}function o(e,t){if(t.adr[0].label&&t.adr[0].label.Path){return e.getProperty(t.adr[0].label.Path)}else if(t.adr[0].label&&t.adr[0].label.String){return t.adr[0].label.String}else{var r="";if(t.adr[0].street&&t.adr[0].street.Path){r+=e.getProperty(t.adr[0].street.Path)+", "}else if(t.adr[0].street&&t.adr[0].street.String){r+=t.adr[0].street.String+", "}if(t.adr[0].code&&t.adr[0].code.Path){r+=e.getProperty(t.adr[0].code.Path)+", "}else if(t.adr[0].code&&t.adr[0].code.String){r+=t.adr[0].code.String+", "}if(t.adr[0].locality&&t.adr[0].locality.Path){r+=e.getProperty(t.adr[0].locality.Path)+", "}else if(t.adr[0].locality&&t.adr[0].locality.String){r+=t.adr[0].locality.String+", "}if(t.adr[0].region&&t.adr[0].region.Path){r+=e.getProperty(t.adr[0].region.Path)+", "}else if(t.adr[0].region&&t.adr[0].region.String){r+=t.adr[0].region.String+", "}if(t.adr[0].country&&t.adr[0].country.Path){r+=e.getProperty(t.adr[0].country.Path)+", "}else if(t.adr[0].country&&t.adr[0].country.String){r+=t.adr[0].country.String+", "}return r.slice(0,r.length-2)}}return{populateDataInContactQuickView:a}});
//# sourceMappingURL=ContactCardDetailHelper.js.map