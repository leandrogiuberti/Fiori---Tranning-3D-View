sap.ui.define(["sap/ui/base/Object","sap/suite/ui/generic/template/js/AnnotationHelper","sap/suite/ui/generic/template/genericUtilities/testableHelper","sap/base/util/extend"],function(e,t,n,o){"use strict";function i(e){function t(t){t=t||[];for(var n in e.componentRegistry){if(t.indexOf(n)===-1){var o=e.componentRegistry[n];o.oComponent.setIsRefreshRequired(true)}}}function n(t,n,i){var r=t.getId();var s=e.componentRegistry[r];var u=e.mRoutingTree[s.route];var a=0;while(u.level>0){if(i&&a>=i){break}var f=e.mRoutingTree[u.parentRoute];if(f.componentId){var c=e.componentRegistry[f.componentId].oComponent;o(c,n)}u=f;a++}}function o(t,n,o,i,r){if(n){var s=e.componentRegistry[t.getId()];var u=o||!i&&e.oNavigationControllerProxy.navigationWillLeavePage(e.mRoutingTree[s.route],n);var a=s.mRefreshInfos;a[n]=true;if(!u&&s.utils.isComponentActive()){s.utils.refreshBinding(undefined,r)}}else if(t.setIsRefreshRequired){t.setIsRefreshRequired(true)}}function i(t,n){for(var o=0;o<t.children.length;o++){var r=e.mEntityTree[t.children[o]];if(t!==r){i(r,n)}if(r.componentId){var s=e.componentRegistry[r.componentId];n.push(s.oComponent)}}}function r(t){var n=[];var o=e.componentRegistry[t.getId()];var r=e.mRoutingTree[o.route];i(r,n);return n}function s(t,n){var o=r(t);if(n){o.push(t)}for(var i=0;i<o.length;i++){e.componentRegistry[o[i].getId()].utils.unbind()}}function u(t){var n=[];i(t,n);for(var o=0;o<n.length;o++){e.componentRegistry[n[o].getId()].utils.unbind()}}function a(){var t=e.mRoutingTree.root;if(t.componentId){var n=e.componentRegistry[t.componentId];var o=n.oComponent;if(o&&typeof o.setIsRefreshRequired==="function"){o.setIsRefreshRequired(true)}}}function f(){var t=e.oNavigationControllerProxy.getActiveComponents();e.oAppComponent.getModel().resetChanges();t.forEach(function(t){var n=e.componentRegistry[t];n.oComponent.setIsRefreshRequired(true)})}function c(t){e.leaveAppPromise.then(function(){for(var n in t){for(var i in t[n].entitySets){o(t[n].component,t[n].entitySets[i])}if(t[n].withoutAssociationsRefresh){e.componentRegistry[n].bWithoutAssociationsRefresh=true}if(t[n].isRefreshRequired){t[n].component.setIsRefreshRequired(true)}}})}return{setAllPagesDirty:t,setParentToDirty:n,setMeToDirty:o,unbindChildren:s,unbindChildrenUsingTreeNode:u,setRootPageToDirty:a,setActivePagesToDirty:f,setRefreshBehaviour:c}}return e.extend("sap.suite.ui.generic.template.lib.ViewDependencyHelper",{constructor:function(e){o(this,i(e))}})});
//# sourceMappingURL=ViewDependencyHelper.js.map