sap.ui.define(["sap/ui/base/Object","sap/base/util/extend","sap/insights/CardProvider"],function(e,t,n){"use strict";function r(e){var t=[],r,o,i={};function a(){const t=e.oTemplatePrivateGlobalModel.getProperty("/generic/routeLevel");if(t===1){const t=Object.values(e.mRoutingTree).find(e=>e.level===1);const n=e.componentRegistry[t.componentId]?.oController;if(!n){return}const r=n.getView();const a=r.getModel("_templPriv");const s=a.getProperty("/objectPage/displayMode")||0;const d=!(s===1||s===0&&r.getBindingContext().getObject().IsActiveEntity);if(d){return}const c=e.oTemplatePrivateGlobalModel.getProperty("/generic/insights/shareCards/"+t.level);const l=i[n.getView().getId()];let u=Promise.resolve(c);if(c===undefined){u=l.getCardsToShare("DT_CARD")}u.then(function(e){o.onViewUpdate(true,e)})}}function s(){r=e.oAppComponent.getId();o=new n(r,t);o.onCardRequested=c;const i=o.onConsumerConnected;o.onConsumerConnected=function(e){a();i.call(o,e)}}function d(t,n){i[n]=t;e.oTemplatePrivateGlobalModel.bindProperty("/generic/routeLevel").attachChange(function(t){var n=t.getSource().getValue();var r=e.oTemplatePrivateGlobalModel.getProperty("/generic/insights/shareCards/"+n)||[];o.onViewUpdate(true,r)})}function c(t,n){var r=e.oTemplatePrivateGlobalModel.getProperty("/generic/routeLevel");var o=e.oTemplatePrivateGlobalModel.getProperty("/generic/insights/shareCards/"+r)||[];var a=o.find(function(e){return e.id===n});var s=i[a.viewId];s.prepareAndShowCard(undefined,a,undefined,{sendManifestToCardConsumer:true,consumerId:t})}function l(){return o}function u(){o.onViewUpdate(false)}return{fnRegisterApplicationAsCardProvider:s,fnRegisterComponentForProvider:d,getCardProviderInsightsInstance:l,unRegisterApplicationAsCardProvider:u}}return e.extend("sap.suite.ui.generic.template.lib.insights.CardProvider",{constructor:function(e){t(this,r(e))}})});
//# sourceMappingURL=InsightsFECardProvider.js.map