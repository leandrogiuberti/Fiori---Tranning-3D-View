<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"
	xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"
	template:require="{AH: 'sap/suite/ui/generic/template/js/AnnotationHelper', AHModel: 'sap/ui/model/odata/AnnotationHelper'}">
	<!-- The formatter 'RuntimeFormatters.formatRatingIndicatorFooterText' is used by 'AH.buildRatingIndicatorFooterExpression' -->
	<!-- The formatter 'RuntimeFormatters.formatRatingIndicatorSubTitle' is used by 'AH.buildRatingIndicatorSubtitleExpression' -->
	<VBox id="header::{path: 'headerFacet>', formatter: 'AH.getStableIdPartFromFacet'}::RatingIndicatorVBox"
		core:require="{RuntimeFormatters: 'sap/suite/ui/generic/template/js/RuntimeFormatters'}"
		binding="{parts: [{path: 'headerFacet>Target'}, {path: 'entitySet>'}], formatter: 'AH.getNavigationPathWithExpand'}"
		visible="{path: 'headerFacet>', formatter: 'AH.getBindingForHiddenPath'}">
		<items>
			<Title id="header::{path: 'headerFacet>', formatter: 'AH.getStableIdPartFromFacet'}::RatingIndicatorTitle"
				   text="{path: 'dataPoint>Title', formatter: 'AHModel.format'}"
				   class="sapSmartTemplatesObjectPageHeaderMiniChartTitle"
				   level="H3"/>
			<Label id="header::{path: 'headerFacet>', formatter: 'AH.getStableIdPartFromFacet'}::RatingIndicatorSubTitle"
				text="{= ${dataPoint>SampleSize} ? ${path: 'dataPoint>SampleSize', formatter: 'AH.buildRatingIndicatorSubtitleExpression'} : ${path: 'dataPoint>Description', formatter: 'AHModel.format'}}"
				visible="{= !!(${dataPoint>SampleSize} || ${dataPoint>Description}) }"
				class="sapSmartTemplatesObjectPageHeaderMiniChartSubTitle">
				<template:with path="dataPoint>SampleSize" helper="AHModel.resolvePath" var="sampleSizeTarget">
					<template:if test="{= ${dataPoint>SampleSize} &amp;&amp; ${sampleSizeTarget>com.sap.vocabularies.Common.v1.Label}}">
						<template:then>
							<customData>
								<core:CustomData key="Subtitle" value="{path: 'sampleSizeTarget>com.sap.vocabularies.Common.v1.Label', formatter: 'AHModel.format'}"/>
							</customData>
						</template:then>
					</template:if>
				</template:with>
			</Label>
			<RatingIndicator id="header::{path: 'headerFacet>', formatter: 'AH.getStableIdPartFromFacet'}::RatingIndicator"
				enabled="true" editable="false"
				maxValue="{path: 'dataPoint>TargetValue', formatter: 'AHModel.format'}"
				value="{path: 'dataPoint>Value', formatter: 'AHModel.format'}"
				iconSize="1.375rem"
				class="sapUiTinyMarginTopBottom" />
			<Label id="header::{path: 'headerFacet>', formatter: 'AH.getStableIdPartFromFacet'}::RatingIndicatorFooter"
				text="{parts:[{path: 'dataPoint>Value'}, {path: 'dataPoint>TargetValue'}], formatter: 'AH.buildRatingIndicatorFooterExpression'}"
				visible="{= !!${dataPoint>SampleSize} }">
				<template:if test="{= ${dataPoint>TargetValue} &amp;&amp; !${dataPoint>TargetValue/Path}}">
					<template:then>
						<customData>
							<core:CustomData key="Footer" value="{path: 'dataPoint>TargetValue', formatter: 'AHModel.format'}"/>
						</customData>
					</template:then>
				</template:if>
			</Label>
		</items>
	</VBox>
</core:FragmentDefinition>
