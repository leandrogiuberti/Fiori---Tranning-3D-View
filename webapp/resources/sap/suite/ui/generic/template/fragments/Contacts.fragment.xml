<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:layout="sap.ui.layout" xmlns:fe="sap.suite.ui.generic.template.genericUtilities"
	xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"
	template:require="{AH: 'sap/suite/ui/generic/template/js/AnnotationHelper', AHModel: 'sap/ui/model/odata/AnnotationHelper'}">

	<template:with path="facet>Target" var="target">
		<template:with path="target>"
					   helper="AHModel.resolvePath" var="contact">
			<VBox class="sapSmartTemplatesObjectPageContactsListContainer" 
				visible="{path: 'facet>', formatter: 'AH.getBindingForHiddenPath'}">
				<layoutData>
					<layout:GridData id="{path: 'facet>', formatter: 'AH.getStableIdPartFromFacet'}::ContactsList::GridData" span="XL12 L12 M12 S12" />
				</layoutData>
				<items>
					<List id="{path: 'facet>', formatter: 'AH.getStableIdPartFromFacet'}::ContactsList"
						  items="{parts:[{path: 'target>'}, {path: 'contact>'}], formatter: 'AH.getItemsForContacts'}"
						  growing="true" growingThreshold="{= ${appSettings>/objectPageColumns/screenSizeXL} === 4 ? '12' : '18'}" class="sapSmartTemplatesObjectPageContactsList"
						  noDataText="{i18n>NOITEMS}">
						<CustomListItem class="sapSmartTemplatesObjectPageContactsListItem">
							<HBox>
								<template:if test="{contact>photo}">
									<template:then>
										<Avatar
											src="{path: 'contact>photo', formatter: 'AHModel.format'}"
											tooltip="{path: 'contact>fn', formatter: 'AHModel.format'}"
											displaySize="S"
											displayShape="Square"
											class="sapUiSmallMarginTopBottom"/>
											
									</template:then>
									<template:else>
										<core:Icon size="2rem"
												   src="sap-icon://person-placeholder"
												   alt=" "
												   class="sapUiSmallMarginTopBottom sapSmartTemplatesObjectPageContactsImage"/>
									</template:else>
								</template:if>
								<VBox class="sapUiSmallMarginBegin sapUiSmallMarginTopBottom">
									<fe:Link text="{path: 'contact>fn', formatter: 'AHModel.format'}"
										  press="._templateEventHandlers.onContactDetails($event, '{path: 'target>', formatter: 'AH.getNavigationPropertyPath'}')" class="sapSmartTemplatesObjectPageContactsListContactTitle"
										  wrapping="true">
										  <fe:customData>
											<core:CustomData key="contactDetails" value="{= ${path: 'contact>', formatter: 'AH.getCustomDataForContactPopup'}}"/>
										  </fe:customData> 	
									</fe:Link>
									<Text text="{path: 'contact>role', formatter: 'AHModel.format'}"
										  class="sapSmartTemplatesObjectPageContactsListContactSubTitle"/>
								</VBox>
							</HBox>
						</CustomListItem>
					</List>
				</items>
			</VBox>
		</template:with>
	</template:with>
</core:FragmentDefinition>
