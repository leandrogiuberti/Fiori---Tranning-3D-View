<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"
    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"
    template:require="{AH: 'sap/suite/ui/generic/template/js/AnnotationHelper', AHModel: 'sap/ui/model/odata/AnnotationHelper'}">

    <template:if test="{= ${dataField>RecordType} === 'com.sap.vocabularies.UI.v1.DataFieldForAction'}">
        <template:then>
          <template:with path="dataField>Action"
                   helper="AHModel.gotoFunctionImport"
                   var="action">
            <Button
                id="{parts: [{path: 'dataField>'}, {path: 'facet>'}], formatter: 'AH.getStableIdPartForDatafieldActionButton'}{= ${parameter>/settings/quickVariantSelectionX} ? ${path: 'tabItem>', formatter: 'AH.getSuffixFromIconTabFilterKey'} : ''}"
                text="{= !${dataField>IconUrl} || ${dataField>IconUrl/String} === '' ? ${path: 'dataField>Label', formatter: 'AHModel.format'} : '' }"
                tooltip="{= ${dataField>IconUrl} &amp;&amp; ${dataField>IconUrl/String} !== '' ? ${path: 'dataField>Label', formatter: 'AHModel.format'} : '' }"
                icon="{= ${dataField>IconUrl} &amp;&amp; (${dataField>IconUrl/String} !== '' || ${dataField>IconUrl/Path} !== '')  ? ${path: 'dataField>IconUrl', formatter: 'AHModel.format'} : '' }" 
                press="._templateEventHandlers.onInlineDataFieldForAction"
                visible="{path: 'action>sap:applicable-path', formatter: 'AH.actionControlInline'}"
	            ariaLabelledBy="{columnId>id}">
                <customData>
                    <core:CustomData key="Action"
                        value="{path: 'dataField>Action', formatter: 'AHModel.format'}" />
                    <core:CustomData key="Label"
                        value="{path: 'dataField>Label', formatter: 'AHModel.format'}" />
                </customData>
            </Button>
            </template:with>
        </template:then>
        <template:elseif test="{= ${dataField>RecordType} === 'com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation'}">
            <Button
                id="{parts: [{path: 'dataField>'}, {path: 'facet>'}], formatter: 'AH.getStableIdPartForDatafieldActionButton'}{= ${parameter>/settings/quickVariantSelectionX} ? ${path: 'tabItem>', formatter: 'AH.getSuffixFromIconTabFilterKey'} : ''}"
                text="{= !${dataField>IconUrl} || ${dataField>IconUrl/String} === '' ? ${path: 'dataField>Label', formatter: 'AHModel.format'} : '' }"
                tooltip="{= ${dataField>IconUrl} &amp;&amp; ${dataField>IconUrl/String} !== '' ? ${path: 'dataField>Label', formatter: 'AHModel.format'} : '' }"
                icon="{= ${dataField>IconUrl} &amp;&amp; ${dataField>IconUrl/String} !== '' ? ${path: 'dataField>IconUrl', formatter: 'AHModel.format'} : '' }"
                press="._templateEventHandlers.onInlineDataFieldForIntentBasedNavigation"
                ariaLabelledBy="{columnId>id}">
                <customData>
                    <core:CustomData key="SemanticObject"
                        value="{path: 'dataField>SemanticObject', formatter: 'AHModel.format'}" />
                    <core:CustomData key="Action"
                        value="{path: 'dataField>Action', formatter: 'AHModel.format'}" />
                    <core:CustomData key="Label"
                        value="{path: 'dataField>Label', formatter: 'AHModel.format'}" />
                    <core:CustomData key="RequiresContext"
                        value="{path: 'dataField>RequiresContext', formatter: 'AHModel.format'}" />
                </customData>
            </Button>
        </template:elseif>
    </template:if>

</core:FragmentDefinition>
