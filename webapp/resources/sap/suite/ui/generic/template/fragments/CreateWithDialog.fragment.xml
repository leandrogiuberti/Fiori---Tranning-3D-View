<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:smartForm="sap.ui.comp.smartform" xmlns:smartField="sap.ui.comp.smartfield"
	xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" 
	template:require="{AH: 'sap/suite/ui/generic/template/js/AnnotationHelper'}">
	
	<template:if test="{createWithParameterDialog>}">
		<Dialog id="{createWithParameterDialog>id}" showHeader="false" visible="false">
			<content>
				<smartForm:SmartForm title="{localModel>/title}" validationMode="Async" editable="true" class="sapSmartTemplatesCreateDialog">
					<smartForm:layout>
						<smartForm:ColumnLayout/>
					</smartForm:layout>
					<smartForm:customData>
						<!-- Maintain the same default settings as the ObjectPage SmartForm -->
						<core:CustomData key="defaultInputFieldDisplayBehaviour" value="descriptionAndId" />
						<core:CustomData key="defaultDropDownDisplayBehaviour" value="descriptionOnly" />
						<core:CustomData key="defaultTextInEditModeSource" value="ValueListNoValidation" />
						<core:CustomData key="dateFormatSettings" value='\{"UTC":true,"style":"medium"\}' />
					</smartForm:customData>
					<smartForm:Group>
						<template:repeat list="{createWithParameterDialog>fields}" var="values">
							<smartForm:GroupElement>
								<smartField:SmartField value="{path: 'values>', formatter: 'AH.formatSmartField'}"
										clientSideMandatoryCheck="true">
									<smartField:customData>
										<core:CustomData key="defaultTextInEditModeSource" value="{path: 'values>', formatter: 'AH.setValidationForValueList'}" />
									</smartField:customData>
								</smartField:SmartField>
							</smartForm:GroupElement>
						</template:repeat>
					</smartForm:Group>
				</smartForm:SmartForm>
			</content>
			<beginButton>
				<Button text="{i18n>CREATE_OBJECT}" press="._templateEventHandlers.onSaveCreateWithPopUpDialog" type="Emphasized"/>
			</beginButton>
			<endButton>
				<Button text="{i18n>CANCEL}" press="._templateEventHandlers.onCancelCreateWithPopUpDialog"/>
			</endButton>
		</Dialog>
	</template:if>
</core:FragmentDefinition>