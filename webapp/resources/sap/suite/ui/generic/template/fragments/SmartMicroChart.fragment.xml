<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:smartMicroChart="sap.ui.comp.smartmicrochart"
	xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"
	template:require="{AH: 'sap/suite/ui/generic/template/js/AnnotationHelper', AHModel: 'sap/ui/model/odata/AnnotationHelper'}">

	<template:with path="headerFacet>Target" helper="AHModel.gotoEntitySet" var="annotation">
		<VBox id="header::{path: 'headerFacet>', formatter: 'AH.getStableIdPartFromFacet'}::SmartMicroChartVBox"
			visible="{path: 'headerFacet>', formatter: 'AH.getBindingForHiddenPath'}"
				displayInline="true">
			<Title id="header::{path: 'headerFacet>', formatter: 'AH.getStableIdPartFromFacet'}::SmartMicroChartTitle"
					class="sapSmartTemplatesObjectPageHeaderMiniChartTitle" level="H3" />
			<Label id="header::{path: 'headerFacet>', formatter: 'AH.getStableIdPartFromFacet'}::SmartMicroChartSubTitle"
					class="sapSmartTemplatesObjectPageHeaderMiniChartSubTitle" />

			<smartMicroChart:SmartMicroChart
				id="header::{path: 'headerFacet>', formatter: 'AH.getStableIdPartFromFacet'}::SmartMicroChart"
				chartTitle="header::{path: 'headerFacet>', formatter: 'AH.getStableIdPartFromFacet'}::SmartMicroChartTitle"
				chartDescription="header::{path: 'headerFacet>', formatter: 'AH.getStableIdPartFromFacet'}::SmartMicroChartSubTitle"
				unitOfMeasure="header::{path: 'headerFacet>', formatter: 'AH.getStableIdPartFromFacet'}::SmartMicroChartFooter"
				entitySet="{parts: [{path: 'annotation>'}, {path: 'entitySet>'}], formatter: 'AH.getEntitySetName'}"
				class="sapUiTinyMarginTop sapUiTinyMarginBottom"
				chartBindingPath="{= ${ path: 'headerFacet>Target/AnnotationPath'}.indexOf('/') > -1 ? ${path: 'headerFacet>Target/AnnotationPath'}.slice(0, ${ path: 'headerFacet>Target/AnnotationPath'}.indexOf('/')) : null}"
				enableAutoBinding="{= ${ path: 'headerFacet>Target/AnnotationPath'}.indexOf('/') > -1 }">

				<smartMicroChart:customData>
					<core:CustomData key="chartQualifier" value="{= ${headerFacet>Target/AnnotationPath}.split('#')[1]}" />
				</smartMicroChart:customData>

			</smartMicroChart:SmartMicroChart>

			<Label id="header::{path: 'headerFacet>', formatter: 'AH.getStableIdPartFromFacet'}::SmartMicroChartFooter"
					class="sapSmartTemplatesObjectPageHeaderMiniChartSubTitle"/>
		</VBox>
	</template:with>
</core:FragmentDefinition>
