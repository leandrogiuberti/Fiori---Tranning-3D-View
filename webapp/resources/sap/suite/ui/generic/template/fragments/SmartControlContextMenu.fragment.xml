<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"
    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" 
	template:require="{StableIdHelper: 'sap/suite/ui/generic/template/js/StableIdHelper', AH: 'sap/suite/ui/generic/template/js/AnnotationHelper'}">

	<template:with path="parameter>/" helper="StableIdHelper.preparePathForStableId" var="contextMenuId">
		<template:if test="{= ${contextMenuId>}.buildStableId({type: 'SmartControl', subType: 'ContextMenu', sSmartTableId: ${smartControlId>id}})}" />
		<Menu id="{contextMenuId>id}" items="{= '{_templPriv>/generic/controlProperties/' + ${smartControlId>id} + '/contextMenu/items}' }">
			<MenuItem text="{_templPriv>text}" enabled="{_templPriv>enabled}" icon="{_templPriv>icon}" key="{_templPriv>key}" 
				startsSection="{_templPriv>startsSection}" press="._templateEventHandlers.onContextMenu($event, '{smartControlId>id}')" items="{_templPriv>children}">
				<items>					
					<MenuItem text="{_templPriv>text}" enabled="{_templPriv>enabled}" icon="{_templPriv>icon}" key="{_templPriv>key}" startsSection="{_templPriv>startsSection}"
						 press="._templateEventHandlers.onContextMenu($event, '{smartControlId>id}')"/>
				</items>
			</MenuItem>
			<template:if test="{parts: [{path: 'listEntitySet>name'}, {path: 'parameter>/settings/subPages/'}, {path: 'facet>Target/AnnotationPath'}], formatter: 'AH.getDisplayNavigationIntent'}">
				<customData>
					<core:CustomData key="CrossNavigation"
						value="{parts: [{path: 'listEntitySet>name'}, {path: 'parameter>/settings/subPages/'}, {path: 'facet>Target/AnnotationPath'}], formatter: 'AH.getDisplayNavigationIntent'}" />
				</customData>
			</template:if>
		</Menu>
	</template:with>
</core:FragmentDefinition>