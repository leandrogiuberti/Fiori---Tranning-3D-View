<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"
    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"
	template:require="{AH: 'sap/suite/ui/generic/template/js/AnnotationHelper', AHModel: 'sap/ui/model/odata/AnnotationHelper'}">

	<template:with path="dataField>Action" helper="AHModel.gotoFunctionImport" var="action">
		<Button id="{parts: [{path: 'dataField>'}, {path: 'facet>'}], formatter: 'AH.getStableIdPartForDatafieldActionButton'}::Determining"
			type="{path:'dataField>', formatter: 'AH.buildExpressionForButtonCriticality'}" text="{= ${path: 'dataField>Label', formatter: 'AHModel.format'}}"
			visible="{parts: [{path: 'parameter>/treeNode'}, {path: 'action>sap:applicable-path'}, {path: 'dataField>'}], formatter: 'AH.actionControlDetermining'}"
			press="{parts: [{path: 'parameter>/settings'}, {path: 'dataField>'}, {path: 'parameter>/manifest'}, {value: 'true'}], formatter: 'AH.getAnnotatedActionPress'}">
			<customData>
				<core:CustomData key="Action" value="{path: 'dataField>Action', formatter: 'AHModel.format'}" />
				<core:CustomData key="Label" value="{path: 'dataField>Label', formatter: 'AHModel.format'}" />
				<core:CustomData key="ActionType" value="determining" />
				<template:if test="{= ${dataField>RecordType} === 'com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation'}">
					<core:CustomData key="SemanticObject" value="{path: 'dataField>SemanticObject', formatter: 'AHModel.format'}" />
					<core:CustomData key="RequiresContext" value="{path: 'dataField>RequiresContext', formatter: 'AHModel.format'}" />
				</template:if>
				<template:with path="dataField>Action" helper="AHModel.gotoFunctionImport" var="action">
					<core:CustomData key="ActionFor" value="{action>sap:action-for}" />
				</template:with>
			</customData>
		</Button>
	</template:with>

</core:FragmentDefinition>