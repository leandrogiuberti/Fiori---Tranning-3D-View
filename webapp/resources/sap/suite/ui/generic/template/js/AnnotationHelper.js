sap.ui.define(["sap/ui/model/odata/AnnotationHelper","sap/ui/model/odata/_AnnotationHelperBasics","sap/ui/comp/smartfield/SmartField","sap/suite/ui/generic/template/genericUtilities/FeLogger","sap/base/strings/formatMessage","sap/base/util/deepExtend","sap/suite/ui/generic/template/js/StableIdHelper","sap/suite/ui/generic/template/genericUtilities/utils","sap/ui/Device","sap/m/library","sap/ui/core/library","sap/suite/ui/generic/template/genericUtilities/metadataAnalyser","sap/ui/base/ManagedObject","sap/base/util/isEmptyObject","sap/suite/ui/generic/template/js/RuntimeFormatters"],function(e,t,a,r,n,i,o,l,s,u,c,f,p,g){"use strict";var v=c.ValueState;var d=u.OverflowToolbarPriority;var m=new r("js.AnnotationHelper").getLogger();function P(e){m.error("Error creating stable id for facet with RecordType: "+e.RecordType+" and Target: "+(e.Target&&e.Target.AnnotationPath));var t=new Uint32Array(1),a=Math.pow(2,32);var r=window.crypto||window.msCrypto;var n=r&&r.getRandomValues(t)[0]/a;return Math.floor(n*99999+1).toString()}function h(){return"${_templPrivGlobal>/generic/isTeamsModeActive} || !${_templPrivGlobal>/generic/shareControlVisibility}"}function y(e,t){var a=function(e){return!!e&&e.some(function(e){return e.PropertyPath===t})};var r=a(e["Org.OData.Capabilities.V1.SortRestrictions"]&&e["Org.OData.Capabilities.V1.SortRestrictions"].NonSortableProperties);var n=e["Org.OData.Capabilities.V1.FilterRestrictions"];var i=!!n&&(n.Filterable==="false"||a(n.NonFilterableProperties));var o={getFilterRestriction:function(){return i},getSortRestriction:function(){return r}};return o}function b(e,t){return!!(e.name&&t&&t.some(function(t){return e.name===t.entitySet}))}function I(e,t,a,r,n,i){var o=r?"":" && !${ui>/editable}";return"{= ${_templPriv>/generic/supportedIntents/"+e+"/"+t+"/"+a+"/supported}"+o+" ? "+n+" : "+i+"}"}function T(e,t,a,r,n){var i;if(a){i=a.split("/")[0]}if(e&&t){for(var o=0;o<t.length;o++){if(e===t[o].entitySet&&(!i||i===t[o].navigationProperty)&&t[o].navigation&&t[o].navigation[r]){if(n){if(t[o].component&&t[o].component.settings&&t[o].component.settings.hideChevronForUnauthorizedExtNav){return t[o].navigation[r].target}}else{return t[o].navigation[r].target}}}}return null}function F(e,t,a,r,n,i,o,l){var s=i?"1":"Navigation";var u=l&&a["sap.ui.generic.app"].pages[0].component.settings&&a["sap.ui.generic.app"].pages[0].component.settings.editFlow;if(u==="direct"){var c=V.getUpdateRestrictions(e);if(typeof c==="boolean"){return c?"Detail":"Inactive"}else{return"{= ${"+c+"} ? 'Detail' : 'Inactive'}"}}if(o){return s}var f=i?"0":"Inactive";var p=i?"":"'";var g=T(e.name,t,r,"display",true);if(g){var v=a["sap.app"].crossNavigation.outbounds[g];var d=v.semanticObject;var m=v.action;var P=e.name+(r?"::"+r.split("/")[0]:"");return I(d,m,P,n,p+s+p,p+f+p)}if(b(e,t)){return n?s:"{= ${ui>/editable} ? "+p+f+p+" : "+p+s+p+" }"}return f}function C(e,t,a,r,n){return F(e,t,a,r,n,true)}function x(e,t,a){var r=f.getPropertyMetadata(e,t,a);return!!r&&r.type==="Edm.Boolean"}function D(e,t){if(Object.keys(e).length===0){return{truncateLabel:true}}else if(e[t]){return e[t]}else if(e["*"]){return e["*"]}else{return{truncateLabel:true}}}function A(e,t,a,r,n,i,o){var l=["com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation","com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation","com.sap.vocabularies.UI.v1.DataFieldForAction","com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath"];if(l.indexOf(t.RecordType)!==-1){if(t&&t.Value&&t.Value.Path){return O(a,t.Value.Path,i)}}else if(t.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){if(n.indexOf("com.sap.vocabularies.Communication.v1.Contact")>=0){return S(e,a,r,n,i,o)}else if(n.indexOf("com.sap.vocabularies.UI.v1.DataPoint")>=0){if(r&&r.Value&&r.Value.Path){return O(a,r.Value.Path,i)}}}}function S(e,t,a,r,n,i){var o="";var l=e.getInterface(0).getModel();if(l){var s=l.getODataEntityType(t.entityType);if(s){o=V._getNavigationPrefix(l,s,r)}if(a&&a.fn&&a.fn.Path){if(o){if(!i){var u=l.getODataAssociationSetEnd(s,o);if(u&&u.entitySet){t=l.getODataEntitySet(u.entitySet)}return O(t,a.fn.Path,n,o)}}else{return O(t,a.fn.Path,n,o)}}}}function O(e,t,a,r){var n=y(e,t);var i=a?n.getSortRestriction():n.getFilterRestriction();if(!i){return r?r+"/"+t:t}}var E=function(e){if(!e||!e.Visualizations||!e.Visualizations.length||!e.Visualizations[0].AnnotationPath||e.Visualizations[0].AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.LineItem")<0){return undefined}return e.Visualizations[0].AnnotationPath};var V={formatMessage:n,getNewVariable:function(e){var t=e.getProperty();var a={set:function(e,t){e=typeof e==="object"?i({},e):e;if(t){a.value=a.value||{};a.value[t]=e}else{a.value=e}if(typeof a.value==="object"){i(a,a.value)}}};t.push(a);return"/variables/"+(t.length-1)},getMetaModelBinding:function(e){var t=e.getObject();var a=e.getObject("/metaModel");return t&&a.createBindingContext(t)},getBlockForEditableHeaderFacet:function(e,t){var a={controlProperties:{id:o.getStableId({type:"ObjectPageSection",subType:"SmartForm",sFacet:o.getStableId({type:"ObjectPage",subType:"EditableHeaderFacet",sRecordType:t.RecordType,sAnnotationPath:t.Target&&t.Target.AnnotationPath,sAnnotationId:t.ID&&t.ID.String})})},aggregations:{groups:[{metaModelPath:e.getPath()}]}};if(!t.Target){a.aggregations.groups=[]}return a},getBindingForHiddenPath:function(e){if(e["com.sap.vocabularies.UI.v1.Hidden"]){if(e["com.sap.vocabularies.UI.v1.Hidden"].hasOwnProperty("Path")){return"{= !${"+e["com.sap.vocabularies.UI.v1.Hidden"].Path+"} }"}else if(e["com.sap.vocabularies.UI.v1.Hidden"].hasOwnProperty("Bool")){if(e["com.sap.vocabularies.UI.v1.Hidden"].Bool!=="true"&&e["com.sap.vocabularies.UI.v1.Hidden"].Bool!=="false"){m.error(e["com.sap.vocabularies.UI.v1.Hidden"].Bool+" is not a boolean value")}return e["com.sap.vocabularies.UI.v1.Hidden"].Bool!=="true"}return false}return true},getVisibiltyBasedOnImportance:function(e){var t=e["com.sap.vocabularies.UI.v1.Importance"];var a=t&&t.EnumMember;return!a||s.system.desktop||a==="com.sap.vocabularies.UI.v1.ImportanceType/High"||a==="com.sap.vocabularies.UI.v1.ImportanceType/Medium"&&s.system.tablet},getVisibiltyBasedOnImportanceAndHidden:function(e){return V.getVisibiltyBasedOnImportance(e)&&V.getBindingForHiddenPath(e)},getVisibilityBasedOnHeaderInfoContent:function(e){if(e){return V.getVisibiltyBasedOnImportance(e)}return false},getValueListReadOnly:function(t,a,r){var n=t.getInterface(1).getModel();var i=t.getInterface(1).getPath()+"/Value";var o=e.resolvePath(n.getContext(i));var l=o&&n.getObject(o);if(l?.["com.sap.vocabularies.UI.v1.TextArrangement"]){return l["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember!=="com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate"}else if(l?.["com.sap.vocabularies.Common.v1.Text"]){return true}else{var s=typeof a==="object"?a:n.getODataEntityType(a);if(s["com.sap.vocabularies.UI.v1.TextArrangement"]){return s["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember!=="com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate"}}},getImportanceForTableColumns:function(e){return e["com.sap.vocabularies.UI.v1.Importance"]&&e["com.sap.vocabularies.UI.v1.Importance"].EnumMember&&e["com.sap.vocabularies.UI.v1.Importance"].EnumMember.split("/")[1]||c.Priority.None},getImportanceForTableColumnsWithSemanticKeyTitleAndDescription:function(e,t,a){var r=a&&a.Value;var n=V.getImportanceForTableColumns(a);if(!a["com.sap.vocabularies.UI.v1.Importance"]&&V.isPropertySemanticKey(e,t,r)){return c.Priority.High}return n},getCustomDataForContactPopup:function(e){return JSON.stringify(e).replace(/\}/g,"\\}").replace(/\{/g,"\\{")},checkIsEmailAddress:function(e,t,a){var r=e.getInterface(1).getModel();var n=e.getInterface(1).getPath()+"/Value";var i=sap.ui.model.odata.AnnotationHelper.resolvePath(r.getContext(n));var o=r.getObject(i);if(o["com.sap.vocabularies.Communication.v1.IsEmailAddress"]&&o["com.sap.vocabularies.Communication.v1.IsEmailAddress"].Bool){return"._templateEventHandlers.onSmartFieldPress"}else{return undefined}},getLinkTextForDFwithEmail:function(e,t,a){var r,n;var i=t.Value.Path;var o=e.getInterface(0).getModel();var l=o.getODataEntityType(a.entityType);while(i.indexOf("/")>-1){r=i.split("/")[0];i=i.split("/").slice(1).join("/");n=o.getODataAssociationEnd(l,r);l=o.getODataEntityType(n&&n.type)||l}var s=o.getODataProperty(l,i)||{};var u=s["com.sap.vocabularies.Common.v1.Text"]&&s["com.sap.vocabularies.Common.v1.Text"].Path||t.Value.Path||"";return"{"+u+"}"},isEmailAddressAndMuliplicity:function(e,t,a,r){if(a["com.sap.vocabularies.Communication.v1.IsEmailAddress"]&&a["com.sap.vocabularies.Communication.v1.IsEmailAddress"].Bool==="true"){var n=V.checkMultiplicityForDataFieldAssociation(e,t,r);return!n}else{return false}},renderColumnForConnectedFields:function(e){var t=function(e){return(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")&&!(e.Inline&&e.Inline.Bool==="true")};if(e.length){if(!e.every(t)){return"true"}else{return"false"}}else{return"false"}},renderColumnHeader:function(e){var t=function(e){return e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"};if(e.length){if(e.every(t)){return"true"}else{return"false"}}},createP13NColumnForConnectedFields:function(e,t,a,r,n){var i="",o="",l={},s={},u=[],c;var f=e.getInterface(0);var p=e.getInterface(1).getModel();var g="";var v=new Set;var d=new Set;var m=new Set;var P="false";r=r&&r.Data;for(var h=0;h<r.length;h++){var y=r[h];p=e.getInterface(0).getModel();s=p.getODataEntityType(p.getContext(e.getInterface(0).getPath()).getObject().entityType);var b;if(y.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){if(y.Target.AnnotationPath.indexOf("/")>0){var I=y.Target.AnnotationPath.split("/")[0];var T=y.Target.AnnotationPath.split("/")[1].split("@")[1];s=p.getODataEntityType(p.getODataAssociationEnd(s,I).type);b=s[T]}else{b=s[y.Target.AnnotationPath.split("@")[1]]}}if((y.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||y.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")&&y.Inline&&y.Inline.Bool==="true"||y.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"||y.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath"){i=V.createP13NColumnForAction(f,y,n)}else if(y.RecordType==="com.sap.vocabularies.UI.v1.DataField"){var F=V.getRelevantDataForAnnotationRecord(p,y.Value.Path,s);s=F.entityType;var C=F.dataFieldValuePath;u=s&&s.property||[];var x;for(var D=0;D<u.length;D++){if(u[D].name===C){x=u[D];break}}i=V.createP13N(e,t,x,y,n)}else if(y.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){if(y.Target.AnnotationPath.indexOf("com.sap.vocabularies.Communication.v1.Contact")>=0){i=V.createP13NColumnForContactPopUp(e,t,y,b,y.Target.AnnotationPath,n)}else if(y.Target.AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.Chart")>=0){i=V.createP13NColumnForChart(e,t,y,b,y.Target.AnnotationPath,n)}else if(b.Visualization){i=V.createP13NColumnForIndicator(e,t,y,b,b.Value,y.Target.AnnotationPath,n)}}if(i){l=JSON.parse(i.replace(/\\/g,""))}if(!g&&l.leadingProperty){g=l.leadingProperty}else{if(l.leadingProperty){d.add(l.leadingProperty);m.add(l.leadingProperty)}}if(l.navigationProperty){v.add(l.navigationProperty)}if(l.additionalProperty){d.add(l.additionalProperty)}if(l.description){m.add(l.description)}if(l.unit){m.add(l.unit)}if(P==="false"){P=l.actionButton}}i="";o=V.createP13NColumnKey(a);c=V._determineColumnIndex(e.getInterface(1));i='\\{"columnKey":"'+o;i+='", "columnIndex":"'+c;i+='", "filterProperty":"'+"";if(g){i+='", "leadingProperty":"'+g;i+='", "sortProperty":"'+g}if(v.size>0){i+='", "navigationProperty":"'+Array.from(v).join()}if(d.size>0){i+='", "additionalProperty":"'+Array.from(d).join()}if(m.size>0){i+='", "additionalSortProperty":"'+Array.from(m).join()}i+='", "actionButton":"'+P+'"';i+=" \\}";return i},getDefaultWidthForTableColumn:function(e,t,a,r,n,i,o){var l=e.getModel(0);var s=l.getODataEntityType(r.entityType);if(V.getTruncateLabelPropertForColumn(a,o)){return undefined}var u=V.getDefaultWidthBasedOnAnnotation(a,i,o);if(u){return u}else if(t&&V.isImageUrl(t)){return"5rem"}else if(a.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||a.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){return"15rem"}else if(n&&n.indexOf("com.sap.vocabularies.UI.v1.Chart")>-1){return"20rem"}else if(t&&t.Visualization){return"6.875rem"}else if(n&&n.indexOf("com.sap.vocabularies.Communication.v1.Contact")>-1){var s=l.getODataAssociationEnd(s,n.split("/")[0]).type;t=l.getODataProperty(l.getODataEntityType(s),t.fn.Path)}var c=a&&a.Value&&a.Value.Path;if(c&&c.indexOf("/")>-1){var f;while(c.indexOf("/")>-1){var p=c.split("/")[0];c=c.split("/").slice(1).join("/");f=l.getODataAssociationEnd(s,p);s=l.getODataEntityType(f&&f.type)||s}r=s}t=t&&V.getPropertyNameForText(e,t,r);u=t&&t.maxLength&&parseInt(t.maxLength,10)+1;if(u){if(u>=20){return"20rem"}else if(u<=3){return"3rem"}else{return u+"rem"}}return"auto"},getColumnWidthForConnectedFields:function(t,a,r,n,i){var o=0;var l=t.getInterface(0).getModel();for(var s=0;s<a.length;s++){if(a[s].Value&&a[s].Value.Path){var u=l.getODataProperty(l.getODataEntityType(r.entityType),a[s].Value.Path);var c=V.getDefaultWidthForTableColumn(t,u,a[s],r,undefined,n,i)}else{var f=l.getContext(t.getInterface(0).getPath()+"/"+s+"/Target");var p=e.resolvePath(f);var u=l.getObject(p);var g=a[s]&&a[s].Target&&a[s].Target.AnnotationPath;var c=V.getDefaultWidthForTableColumn(t,u,a[s],r,g,n,i)}if(c==="auto"){continue}c=parseFloat(c.split("rem",1));if(c>o){o=c}}return o===0?"auto":o+"rem"},setValidationForValueList:function(e){return e&&e["com.sap.vocabularies.Common.v1.ValueListForValidation"]!==undefined?"ValueList":"ValueListNoValidation"},getPropertyNameForText:function(e,t,a){var r=t["sap:text"];if(r){var n=e.getModel(0);var i=n.getODataEntityType(a.entityType);var o;if(r.indexOf("/")>-1){while(r.indexOf("/")>-1){var l=r.split("/")[0];r=r.split("/").slice(1).join("/");o=n.getODataAssociationEnd(i,l);i=n.getODataEntityType(o&&o.type)||i}}for(var s=0;s<=i.property.length;s++){if(i.property[s].name===r){t=i.property[s];break}}}return t},getTruncateLabelPropertForColumn:function(e,t){var a;if(e&&e.RecordType==="com.sap.vocabularies.UI.v1.DataField"&&e.Value&&e.Value.Path){a=e.Value.Path}else if(e&&e.Target&&e.AnnotationPath){a=e.RecordType+"::"+e.Target.AnnotationPath}else if(e&&e.Value&&e.Value.Path){a=e.RecordType+"::"+e.Value.Path}else if(e&&e.Action&&e.String){a=e.RecordType+"::"+e.Action.String}if(!D(t,a).truncateLabel){return true}},getDefaultWidthBasedOnAnnotation:function(e,t,a){if(V.getTruncateLabelPropertForColumn(e,a)){return undefined}if(t===false){return"auto"}else if(e&&e["com.sap.vocabularies.HTML5.v1.CssDefaults"]&&e["com.sap.vocabularies.HTML5.v1.CssDefaults"].width&&e["com.sap.vocabularies.HTML5.v1.CssDefaults"].width.String){return e["com.sap.vocabularies.HTML5.v1.CssDefaults"].width.String}else{return undefined}},getShareButtonVisibility:function(e,t){if(e){return"{= !("+h()+" || ${_templPrivGlobal>/generic/FCL/highestViewLevel} !== "+t+" || ${ui>/createMode}) }"}else{return"{= !("+h()+" || ${ui>/createMode})}"}},getShareOptionVisibility:function(e){if(e){return"{= !("+h()+" || ${_templPrivGlobal>/generic/FCL/highestViewLevel})}"}else{return"{= !("+h()+")}"}},getInsightsButtonVisibility:function(e){return e?"{=!${_templPrivGlobal>/generic/isTeamsModeActive}}":false},tabItemHasPresentationVariant:function(e,t){var a=e[t];return!!(a&&(a.PresentationVariant||a.Visualizations||a.SortOrder))},getPresentationVariant:function(e,t){if(e.Visualizations||e.SortOrder){return e}else if(e.PresentationVariant&&(e.PresentationVariant.Path||e.PresentationVariant.AnnotationPath)){var a=e.PresentationVariant.Path||e.PresentationVariant.AnnotationPath;return t[a.replace("@","")]}else if(e.PresentationVariant){return V.getPresentationVariant(e.PresentationVariant)}},getPresentationVariantVisualisation:function(e,t){var a=e[t];var r=V.getPresentationVariant(a,e);if(r.Visualizations){return r.Visualizations[0].AnnotationPath.split("#")[1]}},getPresentationVariantSortOrder:function(e,t){var a=e[t];var r=V.getPresentationVariant(a,e);if(r.SortOrder){return V.getSortOrder(r.SortOrder)}},getBreakoutActionButtonId:function(e,t){if(e.id){var a=V.getSuffixFromIconTabFilterKey(t);var r=e.id;if(a){r=r.concat(a)}return r}},getIconTabFilterKey:function(e){if(e){if(e.key){return e.key}else{return V.replaceSpecialCharsInId(e.annotationPath)}}},getSuffixFromIconTabFilterKey:function(e){var t=V.getIconTabFilterKey(e);if(t){return"-".concat(t)}else{return""}},getVisibilityForRowActions:function(e,t){if(t.settings.editFlow==="direct"){var a=V.getUpdateRestrictions(e);if(typeof a==="boolean"){return a}else{return"{= ${"+a+"}}"}}else{return true}},getIconTabFilterText:function(e,t,a){var r,n,i,o,l,s,u;if(a){var c=a.AnnotationPath;var f=c&&c.substring(0,c.indexOf("/"));r=e.getInterface(0).getModel();n=r.getProperty("/metaModel");s=n.getODataEntityType(r.getProperty("/entityType"));u=n.getODataAssociationEnd(s,f);l=n.getODataEntityType(u.type)}else{r=e.getModel();n=r.getProperty("/metaModel");if(!!t.entitySet){i=n.getODataEntitySet(t.entitySet);o=i.entityType}else{o=r.getProperty("/entityType")}l=n.getODataEntityType(o)}var p=l[t.annotationPath];if(p&&p.Text){return p.Text.String}},getAltTextForImage:function(e){if(e["com.sap.vocabularies.Common.v1.Text"]){return e["com.sap.vocabularies.Common.v1.Text"].String}},doesActionExist:function(e,t){var a=t["Action"]&&t["Action"].String;a=a&&a.split("/")[1];var r=a&&e.getModel().getODataFunctionImport(a);return!!r},isGroupFacetTitleRequired:function(e,t){return e.annotations.Facet.annotation.Facets.length!==1||e.annotations.Facet.annotation.Label.String!==t.String},buildAnnotatedActionButtonEnablementExpression:function(e,t,a,r,n,i,o){var l,s,u,c;u=t&&t.Action&&t.Action.String;if(u){s=V.getStableIdPartForDatafieldActionButton(t,a,i,o);if(t.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(t.RequiresContext&&t.RequiresContext.Bool==="true"){return"{= !!${_templPriv>/generic/controlProperties/"+s+"/enabled}}"}}else if(t.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"){c=e.getInterface(0).getModel();l=c.getODataFunctionImport(u);if(!l){m.error("The function import "+u+" is not defined in the metadata. Buttons that call this function import will not behave as expected.");return false}else if(l["sap:action-for"]&&l["sap:action-for"].trim()){return"{= !!${_templPriv>/generic/controlProperties/"+s+"/enabled}}"}}return true}},buildActionButtonsCustomData:function(t,a,r,n,i,o){var l,s,u;var c=[];t=t.getInterface(0);s=t.getModel();if(a){for(var f=0;f<a.length;f++){l=a[f];u=null;if(l.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&l.Target.AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.FieldGroup")>=0){var p=s.getContext(t.getPath()+"/"+f+"/Target");var g=e.resolvePath(p);var v=s.getObject(g);if(v.Data&&v.Data.length>0){for(var d=0;d<v.Data.length;d++){u=V.generateAnnotatedActionCustomData(v.Data[d],r,i,o);if(u){c.push(u)}}}}else{u=V.generateAnnotatedActionCustomData(l,r,i,o);if(u){c.push(u)}}}}return btoa(JSON.stringify(c))},generateAnnotatedActionCustomData:function(e,t,a,r){var n;if((e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")&&!(e.Inline&&e.Inline.Bool===true||e.Determining&&e.Determining.Bool===true)&&(e.Action&&(e.Action.String||e.Action.Path))){n=V.getStableIdPartForDatafieldActionButton(e,t,a,r);return{ID:n,RecordType:e.RecordType,Action:e.Action&&(e.Action.String||e.Action.Path)}}},getLabelForDFwithIBN:function(e,t,a,r){var n,i,o,l,s,u;if(t.Label){return t.Label.String}else{n=e.getInterface(0).getModel();if(n&&a){if(r&&r.Target&&r.Target.AnnotationPath){i=V.getTargetEntitySet(n,a,r.Target.AnnotationPath);o=n.getODataEntityType(i.entityType)}else{o=n.getODataEntityType(a.entityType)}if(t.Value&&t.Value.Path||t.IconUrl&&t.IconUrl.Path){u=t.Value&&t.Value.Path?t.Value.Path:t.IconUrl.Path;l=n.getODataProperty(o,u);s=(l["com.sap.vocabularies.Common.v1.Label"]||"").String||"";return s}}}},getLinkTextForDFwithIBN:function(e,t,a,r){var n;var i=e.getInterface(0).getModel();if(i&&a&&t.Value&&t.Value.Path){if(r&&r.Target&&r.Target.AnnotationPath){var o=V.getTargetEntitySet(i,a,r.Target.AnnotationPath);n=i.getODataEntityType(o.entityType)}else{n=i.getODataEntityType(a.entityType)}var l=i.getODataProperty(n,t.Value.Path)||{};if(l["com.sap.vocabularies.Common.v1.Text"]&&l["com.sap.vocabularies.Common.v1.Text"].Path){var s=V.getTextArrangement(n,l);var u="{"+l.name+"}";var c="{"+l["com.sap.vocabularies.Common.v1.Text"].Path+"}";if(s==="descriptionOnly"){u="{= $"+c+" === '' ? '' : $"+c+"}"}else if(s==="idAndDescription"){u="{= $"+u+" === '' ? '' : $"+u+"}"+"{= $"+c+" === '' ? '' : ' (' + ($"+c+") + ')'}"}else if(s==="idOnly"){u="{= $"+u+" === '' ? '' : $"+u+"}"}else{u="{= $"+c+" === '' ? '' : $"+c+"}"+"{= $"+u+" === '' ? '' : ' (' + ($"+u+") + ')'}"}return u}else{var f=(l["com.sap.vocabularies.Common.v1.Text"]||t.Value).Path||"";return"{"+f+"}"}}},getTargetEntitySet:function(e,t,a){var r,n,i,o;r=a.split("/");if(r.length>1){n=r[0]}if(n){i=e.getODataEntityType(t.entityType);o=e.getODataAssociationSetEnd(i,n);if(o&&o.entitySet){return e.getODataEntitySet(o.entitySet)}}return t},getApplicablePathForChartToolbarActions:function(e,t,a){var r=e.getInterface(0).getModel();var n=r.getODataEntityType(a);var i=t&&t.Actions||[];var o,l,s,u=[],c=[],f;for(var p=0;p<i.length;p++){if(i[p].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&(!i[p].Inline||i[p].Inline.Bool!=="true")&&(!i[p].Determining||i[p].Determining.Bool!=="true")){o=i[p].Action&&i[p].Action.String;l=r.getODataFunctionImport(o);if(l){u.push(l)}}}for(var p=0;p<u.length;p++){l=u[p];if(l&&l["sap:action-for"]&&l["sap:action-for"]!==""&&l["sap:action-for"]!==" "&&l["sap:applicable-path"]&&l["sap:applicable-path"]!==""&&l["sap:applicable-path"]!==" "){f=l["sap:applicable-path"];s=r.getODataProperty(n,f);if(s&&s["sap:aggregation-role"]==="dimension"){c.push(f)}else{m.error("AnnotationHelper.js - method getApplicablePathForChartToolbarActions: the applicable-path "+f+" is either pointing to an entity type property which doesn't exist or does not have 'sap:aggregation-role' set to to 'dimension'.")}}}if(c.length>0){return c.join()}},formatSmartField:function(t,a){var r={Path:a.path};return e.simplePath(t.getModel()?t:t.getInterface(0),r)},buildBreadCrumbExpression:function(t,a){var r=a.entityTypeDefinition&&a.entityTypeDefinition["com.sap.vocabularies.UI.v1.HeaderInfo"];var n=r&&r.Title&&r.Title.Value;var i=n&&e.format(t,n);var o=r&&r.TypeName;if(n&&n.Path&&o&&o.String){var l=o.String.replace(/'/g,"\\'");var s="";if(l.indexOf(">")>0){s="{= $"+i+" || $"+l+" }"}else{s="{= $"+i+" || '"+l+"' }"}return s}return i||o&&o.String||a.headerTitle},buildRatingIndicatorSubtitleExpression:function(e){if(e){return"{parts: [{path: '"+e.Path+"'}], formatter: 'RuntimeFormatters.formatRatingIndicatorSubTitle.bind($control)'}"}},buildRatingIndicatorFooterExpression:function(e,t){if(t){return"{parts: [{path: '"+e.Path+"'}, {path: '"+t.Path+"'}], formatter: 'RuntimeFormatters.formatRatingIndicatorFooterText.bind($control)'}"}return"{parts: [{path: '"+e.Path+"'}], formatter: 'RuntimeFormatters.formatRatingIndicatorFooterText.bind($control)'}"},buildRatingIndicatorAggregateCountExpression:function(e){return"{parts: [{path: '"+e?.Path+"'}], formatter: 'RuntimeFormatters.formatRatingIndicatorAggregateCount.bind($control)'}"},getIdForMoreBlockContent:function(e){if(e["com.sap.vocabularies.UI.v1.PartOfPreview"]&&e["com.sap.vocabularies.UI.v1.PartOfPreview"].Bool==="false"){return"::MoreContent"}},checkMoreBlockContent:function(e){return V.checkFacetContent(e,false)},checkBlockContent:function(e){return V.checkFacetContent(e,true)},checkFacetContent:function(e,t){var a;var r=e.getInterface(0);var n=e.getModel().getProperty("",e);var i=e.getPath().split("/Facets");var o=r.getModel().getContext(i[0]);if(r.getModel().getProperty("",o).RecordType==="com.sap.vocabularies.UI.v1.ReferenceFacet"){return o.getPath()}else{if(!n){return}for(var l=0;l<n.length;l++){if(!t){if(n[l]["com.sap.vocabularies.UI.v1.PartOfPreview"]&&n[l]["com.sap.vocabularies.UI.v1.PartOfPreview"].Bool==="false"){a=r.getPath()+"/"+l;break}}else{if(n[l].RecordType!=="com.sap.vocabularies.UI.v1.ReferenceFacet"||(!n[l]["com.sap.vocabularies.UI.v1.PartOfPreview"]||n[l]["com.sap.vocabularies.UI.v1.PartOfPreview"].Bool==="true")){a=r.getPath()+"/"+l;break}}}}return a},getCreationMode:function(e,t,a){var r=t&&t.sections;var n=r&&r[V.getStableIdPartFromFacet(e)];var i;if(n&&n.createMode){i=n.createMode}else if(t&&t.createMode){i=t.createMode}else if(t&&t.tableSettings&&t.tableSettings.createMode){i=t.tableSettings.createMode}else if(a&&a.getTableSettings()&&a.getTableSettings().createMode){i=a.getTableSettings().createMode}else{i=""}if(i==="newPage"){i=""}return i},usesPreliminaryContext:function(e,t){var a=t[V.getStableIdPartFromFacet(e)];return!!(a&&a.preliminaryContext)},isInlineCreateSorting:function(e,t){var a=t&&t.sections;var r=a&&a[V.getStableIdPartFromFacet(e)];return!!(r&&r.disableDefaultInlineCreateSort?r.disableDefaultInlineCreateSort:t&&t.disableDefaultInlineCreateSort)},isImageUrl:function(e){var t=e["com.sap.vocabularies.UI.v1.IsImageURL"]||e["com.sap.vocabularies.UI.v1.IsImageUrl"];return!!t&&t.Bool!=="false"},isPropertySemanticKey:function(e,t,a){var e=e.getInterface(0);var r=e.getModel();var n=r.getODataEntityType(t.entityType);var i=n&&n["com.sap.vocabularies.Common.v1.SemanticKey"];return!!i&&i.some(function(e){return e.PropertyPath===a.Path})},isDescriptionInHeaderInfo:function(e){return!!(e&&e.Description&&e.Description.Value)},formatImageUrl:function(t,a,r,n,i){if(!a){return""}if(a.String){return l.adjustImageUrlPath(a.String,r,i)}if(!(a.Path||a.Apply)){return""}if(n){V.formatWithExpandSimple(t,a)}if(a.Path){var o="{parts: [{path: '"+a.Path+"'}, {value: '"+r+"'}";var s=i?", {value: true}":"";var u="], formatter: 'RuntimeFormatters.formatImageUrl.bind($control)'}";return o+s+u}a.Apply.Parameters[0].Value=l.adjustImageUrlPath(a.Apply.Parameters[0].Value,r);return e.format(t,a)},getClassForHeader:function(e){var t="sapSmartTemplatesObjectPageDynamicPageHeader";if(e&&(e.Path||e.Apply||e.String)){t+=" sapSmartTemplatesObjectPageDynamicPageHeaderImageDiv"}t+=" sapMShowEmpty-CTX";return t},getClassForHeaderTitle:function(e){var t="sapSmartTemplatesObjectPageDynamicPageHeaderTitle sapSmartTemplatesObjectPageDynamicPageHeaderTitleWith";t+=e&&(e.Path||e.Apply||e.String)?"Image sapSmartTemplatesObjectPageDynamicPageHeaderImageDiv":"outImage";return t},getAvatarInitials:function(e){return e&&(e.Path?"{"+e.Path+"}":e.String)||""},formatImageOrTypeUrl:function(e,t,a,r,n){var i=t||a;return V.formatImageUrl(e,i,r,n)},formatHeaderImage:function(e,t,a){return V.formatImageOrTypeUrl(e,t?.ImageUrl,t?.TypeImageUrl,a,true)},getPathWithExpandFromHeader:function(e,t,a,r,n){var i,o;var l=r||n;if(l&&l.Path){var e=e.getInterface(0);var s=e.getModel();var u=s.getODataEntityType(t.entityType);i=u&&V._getNavigationPrefix(s,u,l.Path)}var c="{ path : '"+a+"'";var f=i?", parameters : { expand : '"+i+"'}":"";var p=" }";var o=c+f+p;return o},disableSemanticObjectLinksOnPopups:function(e,t){var a="";if(e&&e.ignoredFields&&t&&t.Value&&t.Value.Path){if(e.ignoredFields[t.Value.Path]){a=t.Value.Path}}return a},getPersistencyKeyForSmartTable:function(){return"listReportFloorplanTable"},getPersistencyKeyForDynamicPageTitle:function(){return"listReportDynamicPageTitle"},getCreateNavigationIntent:function(e,t,a){return T(e,t,a,"create")},getDisplayNavigationIntent:function(e,t,a){return T(e,t,a,"display")},extensionPointFragmentExists:function(e,t){var a=V.getStableIdPartFromFacet(e);if(a===t){return true}else{return false}},formatWithExpandSimple:function(t,a,r){if(!a){return""}var n=[],i,o;var l=t&&t.getModel&&t.getModel();if(!l){t=t.getInterface(0);l=t.getModel()}if(r){o=l.getODataEntityType(r.entityType)}else{var s=/^(\/dataServices\/schema\/\d+\/entityType\/\d+)(?:\/|$)/.exec(t.getPath());if(s&&s.length&&s[0]){var u=l.getProperty(s[0]);var c=l.getODataEntityContainer().namespace;o=l.getODataEntityType(c+"."+u.name)}}if(o){if(a&&a.Path){i=V._getNavigationPrefix(l,o,a.Path);if(i){n.push(i)}}else if(a&&a.Apply&&a.Apply.Name==="odata.concat"){a.Apply.Parameters.forEach(function(e){if(e.Type==="Path"){i=V._getNavigationPrefix(l,o,e.Value);if(i){if(n.indexOf(i)===-1){n.push(i)}}}})}if(n.length>0){var f=t.getSetting("preprocessorsData");if(f){var p=f.rootContextExpand||[];for(var g=0;g<n.length;g++){if(p.indexOf(n[g])===-1){p.push(n[g])}}f.rootContextExpand=p}}}return e.format(t,a)},formatWithExpandSimplePath:function(t,a,r,n){V.getNavigationPathWithExpand(t,a,r);t=t.getInterface(0);if(!!(n&&n.NumberOfFractionalDigits&&n.NumberOfFractionalDigits.Int)){var i={};i.path=a.Path;i.type="sap.ui.model.odata.type.Decimal";i.constraints={scale:n.NumberOfFractionalDigits.Int};return JSON.stringify(i)}V.formatWithExpandSimple(t,a,r);return e.simplePath(t,a)},formatWithExpand:function(t,a,r){V.getNavigationPathWithExpand(t,a,r);t=t.getInterface(0);V.formatWithExpandSimple(t,a,r);return e.format(t,a)},_getNavigationPrefix:function(e,t,a){var r="";var n=a.split("/");if(n.length>1){for(var i=0;i<n.length-1;i++){var o=e.getODataAssociationEnd(t,n[i]);if(o){t=e.getODataEntityType(o.type);if(r){r=r+"/"}r=r+n[i]}else{return r}}}return r},getCurrentPathWithExpand:function(t,a,r,n){t=t.getInterface(0);var i=[],o;var l=t.getModel();var s=l.getODataEntitySet(r.name||"");var u=e.resolvePath(l.getContext(t.getPath()));var c=l.getODataEntityType(r.entityType);i=V.getFacetExpand(u,l,c,s);if(i.length>0){o="{ path : '"+n+"', parameters : { expand : '"+i.join(",")+"'} }"}else{o="{ path : '"+n+"' }"}if(o==="{}"){o=""}return o},getCurrentPathWithExpandForContact:function(t,a,r,n){var i=[],o;t=t.getInterface(0);var l=t.getModel();var s=e.resolvePath(l.getContext(t.getPath()));var u=l.getODataEntityType(r.entityType);i=V.getFacetExpandForContact(s,l,u);if(i.length>0){o="{ path : '"+n+"', parameters : { expand : '"+i.join(",")+"'} }"}else{o="{ path : '"+n+"' }"}if(o==="{}"){o=""}return o},getFacetExpandForContact:function(e,t,a){var r=[],n;var i=function(e){if(e){var n=V._getNavigationPrefix(t,a,e);if(n){if(r.indexOf(n)===-1){r.push(n)}}}};if(e&&e.indexOf("com.sap.vocabularies.Communication.v1.Contact")>-1){n=t.getObject(e)||{};for(var o in n){var l;var s=n[o];if(s&&s.Path){l=s.Path;i(l)}else if(Object.prototype.toString.call(s)==="[object Array]"){for(var u in s){var c=s[u];if(c&&c.uri&&c.uri.Path){l=c.uri.Path}if(c&&c.address&&c.address.Path){l=c.address.Path}i(l)}}}}return r},getNavigationPathWithExpand:function(t,a,r,n){t=t.getInterface(0);var i=t.getModel();var o=i.getODataEntitySet(r.name||"");var l=e.resolvePath(i.getContext(t.getPath()));var s=e.getNavigationPath(t,a);var u=s.replace("{","").replace("}","");var c=i.getODataEntityType(o.entityType);if(u){var f=u.split("/");for(var p=0;p<f.length;p++){var g=V.getNavigationPropertyTargetEntityInfo(i,c,f[p]);o=g.entitySet;c=g.entityType}}else{n=false}var v=false;var d=V.getFacetExpand(l,i,c,o);var m=t.getSetting("preprocessorsData")||{};var P=m.rootContextExpand||[];if(d.length>0){if(u){v=true}else{for(var h=0;h<d.length;h++){if(P.indexOf(d[h])===-1){P.push(d[h])}}m.rootContextExpand=P}}n=n&&(P.indexOf(u)===-1||d.some(function(e){return P.indexOf(u+"/"+e)===-1}));if(v||n){s="{ path : '"+u+"', parameters : { ";if(v){s=s+"expand : '"+d.join(",")+"'";if(n){s=s+", "}}if(n){s=s+"usePreliminaryContext: true, batchGroupId: 'facets'"}s=s+"} }"}if(s==="{}"){s=""}return s},getNavigationPropertyTargetEntityInfo:function(e,t,a){var r={};var n=e.getODataAssociationSetEnd(t,a);if(n&&n.entitySet){r.entitySet=e.getODataEntitySet(n.entitySet);r.entityType=e.getODataEntityType(r.entitySet.entityType)}return r},getFormGroupBindingString:function(e,t,a){var r=V.getNavigationPathWithExpand(e,t,a,true);return r},getFacetExpand:function(e,t,r,n){var i=[],o=[],l,s=[];if(e){s=t.getObject(e)||[]}s=s.Data||s;var u=function(e,l){var s=V._getNavigationPrefix(t,r,e);if(s){if(o.indexOf(s)===-1){o.push(s)}}if(l){try{i=a.getSupportedAnnotationPaths(t,n,e,true)||[]}catch(e){i=[]}for(var u=0;u<i.length;u++){if(o.indexOf(i[u])===-1){o.push(i[u])}}}};var c=function(e){if(e.Type==="LabeledElement"){u(e.Value.Path)}else if(e.Type==="Path"){u(e.Value)}};if(Array.isArray(s)){for(var f=0;f<s.length;f++){l=s[f];if(l.Value&&l.Value.Path){u(l.Value.Path,true)}if(l.Value&&l.Value.Apply&&l.Value.Apply.Name==="odata.concat"){l.Value.Apply.Parameters.forEach(c)}if(l.Action&&l.Action.Path){u(l.Action.Path)}if(l.Target){if(l.Target.Path){u(l.Target.Path)}if(l.Target.AnnotationPath){u(l.Target.AnnotationPath)}}if(l.SemanticObject&&l.SemanticObject.Path){u(l.SemanticObject.Path)}if(l.Url&&l.Url.Path){u(l.Url.Path)}if(l.Url&&l.Url.Apply&&l.Url.Apply.Parameters){l.Url.Apply.Parameters.forEach(c)}if(l.UrlContentType&&l.UrlContentType.Path){u(l.UrlContentType.Path)}}}else{if(s.name){u(s.name,true)}if(s.Value&&s.Value.Path){u(s.Value.Path,true)}if(s.Title&&s.Title.Path){u(s.Title.Path,true)}if(s.Criticality&&s.Criticality.Path){u(s.Criticality.Path,true)}}return o},isSelf:function(e){return e===undefined||e&&e.indexOf("@")===0&&e.indexOf("/")===-1},number:function(e){if(!e){return NaN}else if(e.Decimal){return+e.Decimal}else if(e.Path){return"{"+e.Path+"}"}else{return NaN}},formatColor:function(){function e(e){if(!e){return NaN}else if(e.Decimal){return e.Decimal}else if(e.EnumMember){return"'"+e.EnumMember+"'"}else if(e.Path){return"${"+e.Path+"}"}else{return NaN}}function t(t){var a=t.Criticality;return"{= "+e(a)+" === 'UI.CriticalityType/Negative' ? 'Error' : "+e(a)+"=== 'UI.CriticalityType/Critical' ? 'Critical' : 'Good'}"}function a(t){var a=e(t.Value);var r=t.CriticalityCalculation;return"{= ("+a+" < "+e(r.DeviationRangeLowValue)+" || "+a+" > "+e(r.DeviationRangeHighValue)+") ? 'Error' : ("+a+" < "+e(r.ToleranceRangeLowValue)+" || "+a+" > "+e(r.ToleranceRangeHighValue)+") ? 'Critical' : 'Good'}"}return function(e){if(e.Criticality){return t(e)}else if(e.CriticalityCalculation){return a(e)}}}(),_fnGetCoumnIndexForLastSemKeyColumn:function(e,t){var a=0;var r=-1;for(var n=0;n<e.length;n++){if((e[n].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e[n].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")&&(!e[n].Inline||e[n].Inline.Bool==="false")){continue}else{r++}for(var i=0;i<t.length;i++){if(e[n].Value&&e[n].Value.Path===t[i].PropertyPath&&a<r){a=r}}}a++;return a},_determineColumnIndexForDraftColumn:function(e,t){var a=e.getPath();if(a.indexOf("com.sap.vocabularies.UI.v1.LineItem")<0){return}var r=e.getModel();var n=a.lastIndexOf("/");var i=a.substring(0,n);var o=r.getObject(i);if(o){var l=o["com.sap.vocabularies.Common.v1.SemanticKey"];if(!l){return 1}}return V._fnGetCoumnIndexForLastSemKeyColumn(t,l)},_determineColumnIndex:function(e,t){var a=e.getPath(t);var r=Number(a.slice(a.lastIndexOf("/")+1));var n=a.slice(0,a.lastIndexOf("/"));var i=e.getModel(t).getObject(n);var o=0;for(var l=0;l<r;l++){if((i[l].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||i[l].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")&&(!i[l].Inline||i[l].Inline.Bool==="false")){continue}else{o++}}return o},suppressP13NDuplicateColumns:function(t,a){var r="";var n={};var i=",";var o=t.getModel();for(var l=0;l<a.length;l++){if(a[l].RecordType==="com.sap.vocabularies.UI.v1.DataField"){if(a[l].Value&&a[l].Value.Path){var s=a[l].Value.Path;n[s]=true}}}for(var l=0;l<a.length;l++){if(a[l].RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"||a[l].RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath"){if(a[l].Value&&a[l].Value.Path){var s=a[l].Value.Path;if(!n[s]){r=r+i+s}}}else if(a[l].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var u=o.getContext(t.getPath()+"/"+l+"/Target");var c=e.resolvePath(u);var f=o.getObject(c);if(c.indexOf("com.sap.vocabularies.Communication.v1.Contact")>=0){if(f&&f.fn&&f.fn.Path){var s=f.fn.Path;if(!n[s]){r=r+i+s}}}else if(c.indexOf("com.sap.vocabularies.UI.v1.DataPoint")>=0){if(f&&f.Value&&f.Value.Path){var s=f.Value.Path;if(!n[s]){r=r+i+s}}}else if(c.indexOf("com.sap.vocabularies.UI.v1.Chart")>=0){if(a[l].Target&&a[l].Target.AnnotationPath){var s=a[l].Target.AnnotationPath.split("com.sap.vocabularies.UI.v1.Chart#")[1];if(!n[s]){r=r+i+s}}}}}if(r.length>0){r=r.substring(1)}return r},createP13NForDraftObject:function(e,t){var a=V._determineColumnIndexForDraftColumn(e,t);var r="Editing Status";var n='\\{"columnKey":"'+r+'", "columnIndex":"'+a+'" \\}';return n},createP13NColumnForAction:function(e,t,a){var r=V._determineColumnIndex(e,0);var n=V.createP13NColumnKey(t);var i;if(t&&t.Value&&t.Value.Path){var o='\\{"columnKey":"'+n+'", "leadingProperty":"'+t.Value.Path+'", "columnIndex":"'+r;i=t.RecordType+"::"+t.Value.Path;var l=y(e,t.Value.Path);var s=l.getFilterRestriction();var u=l.getSortRestriction();if(!u){o+='", "sortProperty":"'+t.Value.Path}if(!s){o+='", "filterProperty":"'+t.Value.Path}}else{i=t.RecordType+"::"+t.Action.String;var o='\\{"columnKey":"'+n+'", "columnIndex":"'+r}var c=D(a,i);if(t.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"||t.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath"){if(t.EdmType==="Edm.String"){o+='", "type":"string'}o+='", "autoColumnWidth":\\{"min":2,"max":19,"truncateLabel":'+c.truncateLabel+'\\}, "actionButton":"true" \\}'}else{o+='", "actionButton":"true" \\}'}return o},createP13NColumnForContactPopUp:function(e,t,a,r,n,i){var o="";var l="";var s=e.getInterface(0).getModel();if(s){var u=s.getODataEntityType(t.entityType);if(u){l=V._getNavigationPrefix(s,u,n)}}var c=V.createP13NColumnKey(a);var f=a.RecordType+"::"+a.Target.AnnotationPath;var p=D(i,f);o+='\\{"columnKey":"'+c;if(r&&r.fn&&r.fn.Path){if(l){var g=s.getODataAssociationSetEnd(u,l);if(g&&g.entitySet){t=s.getODataEntitySet(g.entitySet)}var v=y(t,r.fn.Path);var d=v.getFilterRestriction();var m=v.getSortRestriction();o+='", "leadingProperty":"'+l+"/"+r.fn.Path+'", "additionalProperty":"'+l;if(!m){o+='", "sortProperty":"'+l+"/"+r.fn.Path}if(!d){o+='", "filterProperty":"'+l+"/"+r.fn.Path}if(r.fn.EdmType==="Edm.String"){o+='", "type":"'+"string"}}else{var v=y(t,r.fn.Path);var d=v.getFilterRestriction();var m=v.getSortRestriction();o+='", "leadingProperty":"'+r.fn.Path+'", "filterProperty":"'+r.fn.Path+'", "additionalProperty":"'+r.fn.Path;if(!m){o+='", "sortProperty":"'+r.fn.Path}if(!d){o+='", "filterProperty":"'+r.fn.Path}}}o+='", "navigationProperty":"'+l;var P=e.getInterface(1);var h=V._determineColumnIndex(P);if(h){o+='", "columnIndex":"'+h}o+='", "autoColumnWidth":\\{"min":2,"max":19,"truncateLabel":'+p.truncateLabel+',"visibleField":"'+l+"/"+r.fn.Path+'"\\}\\}';return o},createP13NColumnForIndicator:function(e,t,a,r,n,i,o){var l="";var s="";var u=[];var c=e.getInterface(0).getModel();if(c){var f=c.getODataEntityType(t.entityType);if(f){s=V._getNavigationPrefix(c,f,i)}}var p=V.createP13NColumnKey(a);var g=a.RecordType+"::"+a.Target.AnnotationPath;var v=D(o,g);l='\\{"columnKey":"'+p;if(s){s=s+"/"}if(r.Value&&r.Value.Path){l+='", "leadingProperty":"'+s+r.Value.Path;u.push(s+r.Value.Path)}if(r.TargetValue&&r.TargetValue.Path){u.push(s+r.TargetValue.Path)}if(r.Criticality&&r.Criticality.Path){u.push(s+r.Criticality.Path)}if(u.length>0){var d="";u.forEach(function(e){if(d){d=d+","}d=d+e});l+='", "additionalProperty":"'+d}var m=e.getInterface(1);var P=V._determineColumnIndex(m);if(P){l+='", "columnIndex":"'+P}if(r&&r.Value&&r.Value.Path){var h=y(t,r.Value.Path);var b=h.getFilterRestriction();var I=h.getSortRestriction();if(!I){l+='", "sortProperty":"'+r.Value.Path}if(!b){l+='", "filterProperty":"'+r.Value.Path}}l+='", "autoColumnWidth":\\{"truncateLabel":'+v.truncateLabel+"\\}\\}";return l},createP13NColumnForChart:function(e,t,a,r,n,i){var o="",l=[],s="";var u=e.getInterface(0).getModel();if(u){var c=u.getODataEntityType(t.entityType);if(c){s=V._getNavigationPrefix(u,c,n)}}var f=V.createP13NColumnKey(a);var p=a.RecordType+"::"+a.Target.AnnotationPath;var g=D(i,p);if(s){o='\\{"columnKey":"'+f+'", "leadingProperty":"'+s;s=s+"/"}else{o='\\{"columnKey":"'+f}if(Array.isArray(r.Dimensions)){r.Dimensions.forEach(function(e){l.push(s+e.PropertyPath)})}if(Array.isArray(r.Measures)){r.Measures.forEach(function(e){l.push(s+e.PropertyPath)})}if(l.length>0){o+='", "additionalProperty":"'+l.join()}var v=e.getInterface(1);var d=V._determineColumnIndex(v);if(d){o+='", "columnIndex":"'+d}o+='", "autoColumnWidth":\\{"truncateLabel":'+g.truncateLabel+"\\}\\}";return o},createP13NColumnKey:function(e){var t="";var a="template";var r="::";if(e.RecordType==="com.sap.vocabularies.UI.v1.DataField"){t=e.Value.Path}else if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"){t=a+r+"DataFieldWithIntentBasedNavigation"+r+e.SemanticObject.String+r+e.Action.String+r+e.Value.Path}else if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath"){t=a+r+"DataFieldWithNavigationPath"+r+e.Value.Path}else if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){t=a+r+"DataFieldForIntentBasedNavigation"+r+e.SemanticObject.String+r+e.Action.String}else if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"){t=a+r+"DataFieldForAction"+r+e.Action.String}else if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){if(e.Target.AnnotationPath.indexOf("@com.sap.vocabularies.Communication.v1.Contact")>=0||e.Target.AnnotationPath.indexOf("@com.sap.vocabularies.UI.v1.DataPoint")>=0||e.Target.AnnotationPath.indexOf("@com.sap.vocabularies.UI.v1.FieldGroup")>=0||e.Target.AnnotationPath.indexOf("@com.sap.vocabularies.UI.v1.Chart")>=0){t=a+r+"DataFieldForAnnotation"+r+e.Target.AnnotationPath;t=t.replace("@","")}}return t},createP13NFileUploader:function(e,t,a){var r=e.getModel(0).getODataEntityType(t.entityType);var n="";var i=r&&r["Org.OData.Core.V1.ContentDisposition"];var o=i&&i.Filename&&i.Filename.Path;var l=D(a,o);var s=r["com.sap.vocabularies.Common.v1.FieldControl"]&&r["com.sap.vocabularies.Common.v1.FieldControl"].Path;if(o){n='\\{"columnKey":"'+o+'", "leadingProperty":"'+o;if(s){n+='", "additionalProperty":"'+s}n+='", "autoColumnWidth":\\{"min":2,"max":19,"truncateLabel":'+l.truncateLabel+"\\}\\}"}return n},createP13N:function(e,t,a,r,n,i,o){var l="",s=[],u="",c;if(r.RecordType==="com.sap.vocabularies.UI.v1.DataField"||r.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"||r.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(r.Value.Path){var f=V.createP13NColumnKey(r);if(r&&r.RecordType==="com.sap.vocabularies.UI.v1.DataField"&&r.Value&&r.Value.Path){c=r.Value.Path}else{c=r.RecordType+"::"+r.Value.Path}l='\\{"columnKey":"'+f+'", "leadingProperty":"'+r.Value.Path;var p=e.getInterface(0).getModel();if(p){var g=p.getODataEntityType(t.entityType);if(g){if(a["com.sap.vocabularies.Common.v1.Text"]&&a["com.sap.vocabularies.Common.v1.Text"].Path){var v=V.getTextArrangement(g,r);if(v){l+='", "description":"'+a["com.sap.vocabularies.Common.v1.Text"].Path+'", "displayBehaviour":"'+v}}u=V._getNavigationPrefix(p,g,r.Value.Path);if(u){u=u+"/"}}}}else if(r.Value.Apply&&r.Value.Apply.Name==="odata.concat"){r.Value.Apply.Parameters.forEach(function(e){if(e.Type==="Path"){if(!l){l='\\{"columnKey":"'+e.Value+'", "leadingProperty":"'+e.Value}else{s.push(e.Value)}}})}if(a.type==="Edm.DateTime"&&a["sap:display-format"]==="Date"){l+='", "type":"date'}else if(a.type==="Edm.String"){l+='", "type":"string'}if(r.Criticality&&r.Criticality.Path){s.push(r.Criticality.Path)}if(a["com.sap.vocabularies.Common.v1.Text"]&&a["com.sap.vocabularies.Common.v1.Text"].Path){s.push(u+a["com.sap.vocabularies.Common.v1.Text"].Path)}var d=a["Org.OData.Measures.V1.ISOCurrency"]||a["Org.OData.Measures.V1.Unit"];if(d&&d.Path){s.push(d.Path);l+='", "unit":"'+d.Path}if(a["com.sap.vocabularies.Common.v1.FieldControl"]&&a["com.sap.vocabularies.Common.v1.FieldControl"].Path){s.push(u+a["com.sap.vocabularies.Common.v1.FieldControl"].Path)}if(r["RecordType"]==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"&&r.Url&&r.Url.Apply&&r.Url.Apply.Parameters){r.Url.Apply.Parameters.forEach(function(e){if(e.Type==="LabeledElement"){s.push(e.Value.Path)}})}if(r["RecordType"]==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"&&r.Url&&r.Url.Path){s.push(r.Url.Path)}if(s.length>0){l+='", "additionalProperty":"'+s.join()}var m=y(t,a.name);var P=m.getFilterRestriction();var h=m.getSortRestriction();var b=V.checkMultiplicityForDataFieldAssociation(e,t,r);if(!h){if(b){l+='", "sortProperty":"'+""}else if(u){l+='", "sortProperty":"'+u+a.name}else{l+='", "sortProperty":"'+a.name}}if(!P){if(b){l+='", "filterProperty":"'+""}else{l+='", "filterProperty":"'+a.name}}var I=e.getInterface(2);var T=V._determineColumnIndex(I);if(T>=0){l+='", "columnIndex":"'+T}var F=D(n,c);l+='", "autoColumnWidth":\\{"min":2,"max":19,"truncateLabel":'+F.truncateLabel+"\\}\\}"}return l},getSortProperty:function(e,t,a,r,n,i){var o=true;return A(e,t,a,r,n,o,i)},getFilterProperty:function(e,t,a,r,n,i){var o=false;return A(e,t,a,r,n,o,i)},fnCheckFirstEmail:function(e){return e&&e.value},getSortOrder:function(e){var t="";for(var a=0;a<e.length;a++){if(!t){t=e[a].Property.PropertyPath}else{t=t+", "+e[a].Property.PropertyPath}if(e[a].Descending){t=t+" "+e[a].Descending.Bool}}return t},replaceSpecialCharsInId:function(e){if(e.indexOf(" ")>=0){m.error("Annotation Helper: Spaces are not allowed in ID parts. Please check the annotations, probably something is wrong there.")}return e.replace(/@/g,"").replace(/\//g,"::").replace(/#/g,"::")},getStableIdPartFromDataField:function(e){var t="",a="",r;if(e.RecordType&&e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"){return V.replaceSpecialCharsInId(e.Action.String)}else if(e.RecordType&&(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"||e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation")){if(e.SemanticObject.String){a=V.replaceSpecialCharsInId(e.SemanticObject.String)}else if(e.SemanticObject.Path){a=V.replaceSpecialCharsInId(e.SemanticObject.Path)}if(e.Action&&e.Action.String){a=a+"::"+V.replaceSpecialCharsInId(e.Action.String)}else if(e.Action&&e.Action.Path){a=a+"::"+V.replaceSpecialCharsInId(e.Action.Path)}return a}else if(e.RecordType&&e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){return V.replaceSpecialCharsInId(e.Target.AnnotationPath)}else if(e.IconUrl&&(e.IconUrl.Path||e.IconUrl.String)){if(e.IconUrl.Path){a=V.replaceSpecialCharsInId(e.IconUrl.Path)}else if(e.IconUrl.String){r=e.IconUrl.String.replace("://","-");a=V.replaceSpecialCharsInId(r)}return a}else if(e.Value&&e.Value.Path){return V.replaceSpecialCharsInId(e.Value.Path)}else if(e.Value&&e.Value.Apply&&e.Value.Apply.Name==="odata.concat"){for(var n=0;n<e.Value.Apply.Parameters.length;n++){if(e.Value.Apply.Parameters[n].Type==="Path"){if(t){t=t+"::"}t=t+V.replaceSpecialCharsInId(e.Value.Apply.Parameters[n].Value)}}return t}else{m.error("Annotation Helper: Unable to create a stable ID. Please check the annotations.")}},getStableIdPartFromDataPoint:function(e){var t="";if(e.Value&&e.Value.Path){return V.replaceSpecialCharsInId(e.Value.Path)}else if(e.Value&&e.Value.Apply&&e.Value.Apply.Name==="odata.concat"){for(var a=0;a<e.Value.Apply.Parameters.length;a++){if(e.Value.Apply.Parameters[a].Type==="Path"){if(t){t=t+"::"}t=t+V.replaceSpecialCharsInId(e.Value.Apply.Parameters[a].Value)}}return t}else{m.error("Annotation Helper: Unable to create stable ID derived from annotations.")}},getStableIdPartFromFacet:function(e){return o.getStableId({type:"ObjectPage",subType:"Facet",bIsHeaderFacet:typeof this.getContext==="function"&&this.getContext()&&this.getContext().getPath()&&this.getContext().getPath().indexOf("com.sap.vocabularies.UI.v1.HeaderFacets")>=0,sRecordType:e.RecordType,sAnnotationPath:e.Target&&e.Target.AnnotationPath,sAnnotationId:e.ID&&e.ID.String})||P(e)},getVisibilityForExtensionPointReplaceHeader:function(e,t){var a="ReplaceHeaderExtensionFacet|"+e;var r=t[a];if(r&&r["bVisibleOnEdit"]===false){return false}return true},extensionPointReplaceHeaderExists:function(e,t){if(t){var a="ReplaceHeaderExtensionFacet|"+e;return t[a]}return false},getVisibilityForExtensionPointNoImage:function(e,t){var a="NoImageExtensionFacet|"+e;var r=t[a];if(r&&r["bVisibleOnEdit"]===false){return false}return true},extensionPointNoImageExists:function(e,t){if(t){var a="NoImageExtensionFacet|"+e;return t[a]}return false},getVisibilityForExtensionPointAfterImage:function(e,t){var a="AfterImageExtensionFacet|"+e;var r=t[a];if(r&&r["bVisibleOnEdit"]===false){return false}return true},extensionPointAfterImageExists:function(e,t){if(t){var a="AfterImageExtensionFacet|"+e;return t[a]}return false},avatarImageSourceExists:function(e,t,a){if(t&&t.String&&t.String.includes("sap-icon://")){return false}var r=V.formatImageUrl(e,t,a);return!!r},getVisibilityForExtensionPointBeforeSimpleHeaderFacet:function(e,t,a,r){var n;var i=V.getStableIdPartFromFacet(t);if(t.Target.AnnotationPath.indexOf("DataPoint")>0){n=V.getStableIdPartFromDataPoint(r)}else{n=V.getStableIdPartFromDataField(r)}var o=i+"::"+n;var l="BeforeSimpleHeaderFacet|"+e+"|headerEditable::"+o;var s=a[l];if(s&&s["bVisibleOnEdit"]===false){return false}return true},extensionPointBeforeSimpleHeaderFacetExists:function(e,t,a,r){if(a){var n;var i=V.getStableIdPartFromFacet(t);if(t.Target.AnnotationPath.indexOf("DataPoint")>0){n=V.getStableIdPartFromDataPoint(r)}else{n=V.getStableIdPartFromDataField(r)}var o=i+"::"+n;var l="BeforeSimpleHeaderFacet|"+e+"|headerEditable::"+o;return a[l]}return false},getVisibilityForExtensionPointReplaceSimpleHeaderFacet:function(e,t,a,r){var n;var i=V.getStableIdPartFromFacet(t);if(t.Target.AnnotationPath.indexOf("DataPoint")>0){n=V.getStableIdPartFromDataPoint(r)}else{n=V.getStableIdPartFromDataField(r)}var o=i+"::"+n;var l="ReplaceSimpleHeaderFacet|"+e+"|headerEditable::"+o;var s=a[l];if(s&&s["bVisibleOnEdit"]===false){return false}return true},extensionPointReplaceSimpleHeaderFacetExists:function(e,t,a,r){if(a){var n;var i=V.getStableIdPartFromFacet(t);if(t.Target.AnnotationPath.indexOf("DataPoint")>0){n=V.getStableIdPartFromDataPoint(r)}else{n=V.getStableIdPartFromDataField(r)}var o=i+"::"+n;var l="ReplaceSimpleHeaderFacet|"+e+"|headerEditable::"+o;return a[l]}return false},getVisibilityForExtensionPointAfterSimpleHeaderFacet:function(e,t,a,r){var n;var i=V.getStableIdPartFromFacet(t);if(t.Target.AnnotationPath.indexOf("DataPoint")>0){n=V.getStableIdPartFromDataPoint(r)}else{n=V.getStableIdPartFromDataField(r)}var o=i+"::"+n;var l="AfterSimpleHeaderFacet|"+e+"|headerEditable::"+o;var s=a[l];if(s&&s["bVisibleOnEdit"]===false){return false}return true},extensionPointAfterSimpleHeaderFacetExists:function(e,t,a,r){if(a){var n;var i=V.getStableIdPartFromFacet(t);if(t.Target.AnnotationPath.indexOf("DataPoint")>0){n=V.getStableIdPartFromDataPoint(r)}else{n=V.getStableIdPartFromDataField(r)}var o=i+"::"+n;var l="AfterSimpleHeaderFacet|"+e+"|headerEditable::"+o;return a[l]}return false},getVisibilityForExtensionPointBeforeHeaderFacet:function(e,t,a){var r="BeforeHeaderFacet|"+e+"|headerEditable::"+V.getStableIdPartFromFacet(t);var n=a[r];if(n&&n["bVisibleOnEdit"]===false){return false}return true},extensionPointBeforeHeaderFacetExists:function(e,t,a){if(a){var r="BeforeHeaderFacet|"+e+"|headerEditable::"+V.getStableIdPartFromFacet(t);return a[r]}return false},getVisibilityForExtensionPointReplaceHeaderFacet:function(e,t,a){var r="ReplaceHeaderFacet|"+e+"|headerEditable::"+V.getStableIdPartFromFacet(t);var n=a[r];if(n&&n["bVisibleOnEdit"]===false){return false}return true},extensionPointReplaceHeaderFacetExists:function(e,t,a){if(a){var r="ReplaceHeaderFacet|"+e+"|headerEditable::"+V.getStableIdPartFromFacet(t);return a[r]}return false},getVisibilityForExtensionPointAfterHeaderFacet:function(e,t,a){var r="AfterHeaderFacet|"+e+"|headerEditable::"+V.getStableIdPartFromFacet(t);var n=a[r];if(n&&n["bVisibleOnEdit"]===false){return false}return true},extensionPointAfterHeaderFacetExists:function(e,t,a){if(a){var r="AfterHeaderFacet|"+e+"|headerEditable::"+V.getStableIdPartFromFacet(t);return a[r]}return false},extensionPointBeforeHeaderDataPointExists:function(e,t,a){if(a){var r="BeforeHeaderDataPoint|"+e+"|"+V.getStableIdPartFromDataPoint(t);return a[r]}return false},extensionPointReplaceHeaderDataPointExists:function(e,t,a){if(a){var r="ReplaceHeaderDataPoint|"+e+"|"+V.getStableIdPartFromDataPoint(t);return a[r]}return false},extensionPointAfterHeaderDataPointExists:function(e,t,a){if(a){var r="AfterHeaderDataPoint|"+e+"|"+V.getStableIdPartFromDataPoint(t);return a[r]}return false},getObjectPageExtensions:function(e){var t=e.getObject();for(var a in t){if(a.split("|").length===4&&!(t[a]["sap.ui.generic.app"]&&t[a]["sap.ui.generic.app"]["key"])){i(t[a],{"sap.ui.generic.app":{key:a.split("|")[3]}})}}e.getModel().setProperty("/manifestViewExtensions",t);return"/manifestViewExtensions"},extensionPointBeforeSubSectionExists:function(e,t,a){if(a){var r="BeforeSubSection|"+e+"|"+t;return a[r]}return false},extensionPointAfterSubSectionExists:function(e,t,a){if(a){var r="AfterSubSection|"+e+"|"+t;return a[r]}return false},extensionPointReplaceSubSectionExists:function(e,t,a){if(a){var r="ReplaceSubSection|"+e+"|"+t;return a[r]}return false},getExtensionPointFacetTitle:function(t,a,r,n){var i=r[a];return i&&i["sap.ui.generic.app"]&&i["sap.ui.generic.app"].title||e.format(t,n)},getExtensionPointAfterFacetTitle:function(e,t,a){var r="AfterFacet|"+e+"|"+V.getStableIdPartFromFacet(t);var n=a[r];if(n&&n["sap.ui.generic.app"]&&n["sap.ui.generic.app"].title){return n["sap.ui.generic.app"].title}},getExtensionPointBeforeSubSectionTitle:function(e,t,a){var r="BeforeSubSection|"+e+"|"+t;var n=a[r];if(n&&n["sap.ui.generic.app"]&&n["sap.ui.generic.app"].title){return n["sap.ui.generic.app"].title}},getExtensionPointAfterSubSectionTitle:function(e,t,a){var r="AfterSubSection|"+e+"|"+t;var n=a[r];if(n&&n["sap.ui.generic.app"]&&n["sap.ui.generic.app"].title){return n["sap.ui.generic.app"].title}},getExtensionPointReplaceSubSectionTitle:function(e,t,a){var r="ReplaceSubSection|"+e+"|"+t;var n=a[r];if(n&&n["sap.ui.generic.app"]&&n["sap.ui.generic.app"].title){return n["sap.ui.generic.app"].title}},getColumnListItemType:function(e,t,a,r,n,i){var o=!r.level;var l=o&&t&&t.some(function(e){return e.navigationProperty});var s=n||o;return F(e,t,a,i,s,false,l,o)},getRowActionCountForDetailPage:function(e,t,a,r,n){return C(e,t,a,r,n)},getRowActionCountForListReport:function(e,t,a,r){return C(e,t,a,"",true)},hasSubObjectPage:function(e,t){return b(e,t)},getUpdateRestrictions:function(e){var t=e["Org.OData.Capabilities.V1.UpdateRestrictions"];if(!t){return true}if(t.Updatable.Bool==="false"){return false}else{if(t["Updatable"].Path){return t["Updatable"].Path}}return true},isRelatedEntityCreatable:function(e,t,a,r,n,i,o,l,s,u){var c=V.hasSubObjectPage(a,r),f=V.getCreationMode(n,i,u),p=["inline","creationRows","creationRowsHiddenInEditMode"].includes(f);if(c||p||l){var g=[],v,d;if(s==="ResponsiveTable"){if(f==="creationRows"){return false}else if(f==="creationRowsHiddenInEditMode"){g.push("!${ui>/createMode}")}}var m=V.getCreatablePath(e,t,a),P=m.creatable;if(P===false){return false}else if(typeof P==="string"){var h=m.negate?"!":"!!";var y=h+"${"+P+"}";g.push(y)}d=o?"${ui>/editable}":"!${ui>/editable}";g.push(d);v=g.join(" && ");return"{= "+v+" }"}return false},isCreationAllowedByBoolAndPathRestrictions:function(e,t,a,r,n){var i=V.areBooleanRestrictionsValidAndPossible(e,t,a,r,n.name);if(!i){return i}var o=V.getCreatablePath(e,n,a),l=o.creatable;if(typeof l==="boolean"){return l}var s=o.negate?"!":"!!";var u=s+"${"+l+"}";return"{= "+u+" }"},buildInlineCreationRowsConfig:function(e,t,a){var r={creatablePath:V.getCreatablePath(e,t,a),requiredProps:V.getRequiredProps(a),nonInsertableProperties:V.getNonInsertableProperties(t,a)};return JSON.stringify(r)},getRequiredProps:function(e){var t=e["Org.OData.Capabilities.V1.InsertRestrictions"]&&e["Org.OData.Capabilities.V1.InsertRestrictions"].RequiredProperties;return t&&t.map(function(e){return e.PropertyPath})||[]},getNonInsertableProperties:function(e,t){var a=e&&e["Org.OData.Capabilities.V1.InsertRestrictions"]&&e["Org.OData.Capabilities.V1.InsertRestrictions"].NonInsertableProperties;if(a){return a}return t&&t["Org.OData.Capabilities.V1.InsertRestrictions"]&&t["Org.OData.Capabilities.V1.InsertRestrictions"].NonInsertableProperties},getCreatablePath:function(e,t,a){var r={creatable:true};var n=e.getInterface(0).getModel();var i=t["Org.OData.Capabilities.V1.InsertRestrictions"];var o=n.getODataEntityType(t.entityType);var l;var s;l=V.handleNavigationRestrictions(n,t,a,"Insertable");if(l&&l["Insertable"]){if(l["Insertable"].Path){s=l["Insertable"].Path;r.creatable=s}}else if(i&&i.NonInsertableNavigationProperties&&i.NonInsertableNavigationProperties.length>0){for(var u=0;u<i.NonInsertableNavigationProperties.length;u++){var c=i.NonInsertableNavigationProperties[u];var f=V._getNonInsertableNavigationPropertyPath(c);if(f){var p=n.getODataAssociationSetEnd(o,f);if(p&&p.entitySet===a.name){if(c.If&&c.If.length===2){var g=c.If[0];s=g.Not?g.Not.Path:g.Path;if(x(n,t.entityType,s)){V._actionControlExpand(e,s,o.name);r.creatable=s;r.negate=!g.Not}else{r.creatable=false;m.warning("Creatable-Path is not valid. Creation for "+a.name+" is disabled")}}else{r.creatable=false}break}}}}return r},_getNonInsertableNavigationPropertyPath:function(e){var t;if(e.NavigationPropertyPath){t=e.NavigationPropertyPath}else if(e.If){t=e.If[1].NavigationPropertyPath}return t},checkForDeleteRetriction:function(e,t,a,r,n){var i=e.getInterface(0).getModel();if(r){return false}var o=n?"{= ${ui>/editable}":"{= !${ui>/editable}";var l=V.handleNavigationRestrictions(i,a,t,"Deletable");if(l?.Deletable){if(l?.Deletable?.Bool==="false"){return false}if(l?.Deletable?.Path){o=o+" && ${"+l?.Deletable?.Path+"}"}}return o+"}"},areBooleanRestrictionsValidAndPossible:function(e,t,a,r,n,i){var o;var l=e.getInterface(0).getModel();var s=a.entityType;var u,c,f;if(n){o=l.getODataEntitySet(n);f=o.entityType}var p=V.handleNavigationRestrictions(l,o,a,r);if(p){u=p[r];c=f}else{u=t&&t[r];c=s}var g=!u||(u.Bool?!u.Path:!!u.Path&&x(l,c,u.Path));if(!g){m.error("Service Broken: Restrictions annotations for entity type "+s+" for section '"+r+"' are invalid.")}return g&&(!!i||!u||u.Bool!=="false")},handleNavigationRestrictions:function(e,t,a,r){if(!t){return false}var n={Insertable:"InsertRestrictions",Deletable:"DeleteRestrictions",Updatable:"UpdateRestrictions"};var i,o;var l=t["Org.OData.Capabilities.V1.NavigationRestrictions"];if(l&&l.RestrictedProperties){var s=l.RestrictedProperties;for(i in s){o=s[i];var u=e.getODataEntityType(t.entityType);var c=o.NavigationProperty.NavigationPropertyPath;var f=e.getODataAssociationSetEnd(u,c);if(f&&f.entitySet===a.name&&o[n[r]]){return o[n[r]]}}}return false},_isPropertyPathBoolean:function(e,t,a){return x(e,t,a)},_actionControlExpand:function(e,t,a){var r=[],n;e=e.getInterface(0);var i=e.getModel();var o=i.getODataEntityType(a);if(t){n=V._getNavigationPrefix(i,o,t);if(n){r.push(n)}}if(r.length>0){var l=e.getSetting("preprocessorsData");if(l){var s=l.rootContextExpand||[];for(var u=0;u<r.length;u++){if(s.indexOf(r[u])===-1){s.push(r[u])}}l.rootContextExpand=s}}},_mapTextArrangement4smartControl:function(e){var t="descriptionAndId";switch(e){case"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast":t="idAndDescription";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate":t="idOnly";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly":t="descriptionOnly";break;default:break}return t},getTextArrangementForSmartControl:function(e,t,a){e=e.getInterface(0);var r=e.getModel();var n=r.getODataEntityType(a.entityType);var i="descriptionAndId";if(t?.Value?.Path&&r.getODataProperty(n,t.Value.Path)){var o=r.getODataProperty(n,t.Value.Path)["com.sap.vocabularies.Common.v1.Text"];if(o&&o["com.sap.vocabularies.UI.v1.TextArrangement"]&&o["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember){i=V._mapTextArrangement4smartControl(o["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember);return i}}if(n["com.sap.vocabularies.UI.v1.TextArrangement"]&&n["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember){i=V._mapTextArrangement4smartControl(n["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember);return i}return i},getTitle:function(e,t,a){var r;var n=V.getTextArrangementObject(e,t,a);if(n){r=V.getTitleTextArrangementBindingPath(n.textArrangement,n.propertyPath,n.textPath)}return r},getDescription:function(e,t,a){var r;var n=V.getTextArrangementObject(e,t,a);if(n){r=V.getDescriptionTextArrangementBindingPath(n.textArrangement,n.propertyPath,n.textPath)}return r},getTextArrangementObject:function(e,t,a){var r,n,i;if(t){n=t.name;var o=t["com.sap.vocabularies.Common.v1.Text"];if(o){i=o.Path}r=V.getTextArrangement(e,t);return{textArrangement:r,propertyPath:n,textPath:i}}},getTextArrangementFromAnnotations:function(e,t){var a;if(t["com.sap.vocabularies.UI.v1.TextArrangement"]&&t["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember){a=V._mapTextArrangement4smartControl(t["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember)}if(!a){var r=t["com.sap.vocabularies.Common.v1.Text"];if(r&&r["com.sap.vocabularies.UI.v1.TextArrangement"]&&r["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember){a=V._mapTextArrangement4smartControl(r["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember)}}if(!a){if(e&&e["com.sap.vocabularies.UI.v1.TextArrangement"]&&e["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember){a=V._mapTextArrangement4smartControl(e["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember)}}return a},getTextArrangement:function(e,t){var a=this.getTextArrangementFromAnnotations(e,t);if(!a){a="descriptionAndId"}return a},getTextArrangementForEasyFilter:function(e,t){var a=this.getTextArrangementFromAnnotations(e,t)||"idAndDescription";return a},getTextArrangementPath:function(e){return e["com.sap.vocabularies.Common.v1.Text"]&&e["com.sap.vocabularies.Common.v1.Text"].Path},isValueHelpTableAvailable:function(e){return!!e.extensions?.find(e=>e.name==="value-list")},getTextArrangementFinalString:function(e,t,a,r){var n=e[t];var i=e[a];if(i){var e="";switch(r){case"descriptionAndId":e=`${i} (${n})`;break;case"idAndDescription":e=`${n} (${i})`;break;case"descriptionOnly":e=`${i}`;break;default:e=`${n}`;break}return e}else{return n}},getTitleTextArrangementBindingPath:function(e,t,a){var r="{"+t+"}";var n="{"+a+"}";if(!a){return r}if(e==="descriptionAndId"){return n}else if(e==="descriptionOnly"){return n}else if(e==="idAndDescription"){return r}else if(e==="idOnly"){return r}},getDescriptionTextArrangementBindingPath:function(e,t,a){var r="{"+t+"}";var n="{"+a+"}";if(!a){return""}if(e==="descriptionAndId"){return r}else if(e==="descriptionOnly"){return""}else if(e==="idAndDescription"){return n}else if(e==="idOnly"){return""}},doesFieldGroupContainOnlyOneMultiLineDataField:function(e,t){if(e.Data.length!==1){return false}if(t["com.sap.vocabularies.UI.v1.MultiLineText"]===undefined||e.Data[0].RecordType!=="com.sap.vocabularies.UI.v1.DataField"){return false}return true},testFormatter:function(e){return"formatted:"+e},getFacetID:function(e,t){return e+"|"+V.getStableIdPartFromFacet(t)},getStableIdPartForDatafieldActionButton:function(e,t,a,r){var n="";var i="";var o="";if(t){o=V.getStableIdPartFromFacet(t)}if(e){i=V.getStableIdPartFromDataField(e)}n=(o!==""?o+"::":"")+"action::"+i;var l=V.getSuffixFromIconTabFilterKey(a);if(l){n=n.concat(l)}if(r){n=n+"::chart"}return n},_hasCustomDeterminingActionsInListReport:function(e,t){if(t&&t[e]){var a=t[e];if(a.Actions){for(var r in a.Actions){if(a.Actions[r].determining){return true}}}}return false},hasDeterminingActionsRespectingApplicablePath:function(e,t,a){var r="";e=e.getInterface(0);if(a){for(var n=0;n<a.length;n++){if(a[n].determining){if(a[n].applicablePath){if(r.length>0){r+=" || "}r+="${path: '"+a[n].applicablePath+"'}"}else{return true}}}}if(t){for(var i=0;i<t.length;i++){if(t[i].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&t[i].Determining&&t[i].Determining.Bool==="true"){var o=e.getModel().getODataFunctionImport(t[i].Action.String,true);var l=e.getModel().getObject(o);if(l["sap:applicable-path"]){if(r.length>0){r+=" || "}r+="${path: '"+l["sap:applicable-path"]+"'}"}else{return"true"}}}}if(r.length>0){return"{= "+r+" || ${ui>/editable}}"}else{return"{ui>/editable}"}},hasDeterminingActions:function(e,t,a){if(t&&a&&a["sap.suite.ui.generic.template.ListReport.view.ListReport"]&&V._hasCustomDeterminingActionsInListReport(t,a["sap.suite.ui.generic.template.ListReport.view.ListReport"]["sap.ui.generic.app"])){return"true"}else if(t&&a&&a["sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage"]&&V._hasCustomDeterminingActionsInListReport(t,a["sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage"]["sap.ui.generic.app"])){return"true"}for(var r=0;r<e.length;r++){if((e[r].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e[r].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")&&e[r].Determining&&e[r].Determining.Bool==="true"){return"true"}}return"false"},actionControlDetermining:function(e,t,a){if(a["com.sap.vocabularies.UI.v1.Hidden"]){return V.getBindingForHiddenPath(a)}else if(e.level===0||!t){return true}else{return"{path: '"+t+"'}"}},actionControlInline:function(e){if(!e){return true}else{return"{path: '"+e+"'}"}},buildExpressionForProgressIndicatorPercentValue:function(t,a,r){var i="0";if(a.Value&&a.Value.Path){var o="$"+e.format(t,a.Value);var l,s;if(a.TargetValue){l=e.format(t,a.TargetValue);l=a.TargetValue.Path?"$"+l:l}if(r){r=r["Org.OData.Measures.V1.Unit"]||r["Org.OData.Measures.V1.ISOCurrency"];if(r){s=e.simplePath(t,r);s=s&&r.Path?"$"+s:"'"+s+"'"}}var u="({0} > 100 ? 100 : {0} < 0 ? 0 : {0} * 1)";var c="(({1}*1 > 0) ? (({0}*1 > {1}*1) ? 100 : (({0}*1 < 0) ? 0 : ({0} / {1} * 100))) : 0)";var f="'{'= ({2} === ''%'') ? "+u+" : "+c+" '}'";i=n(f,[o,l,s])}return i},buildExpressionForProgressIndicatorDisplayValue:function(t,a,r){var n;var i=function(t,a){var r=(e.format(t,a)||"").replace("{","").replace("}","");var n="{path: '"+r+"'}";return n};n=i(t,a.Value)+", "+i(t,a.TargetValue)+", "+i(t,r);var o="{ parts: ["+n+"], formatter: 'RuntimeFormatters.formatDisplayValueForProgressIndicator.bind($control)' }";return o},getProgressIndicatorTooltip:function(e,t){if(t&&t["com.sap.vocabularies.Common.v1.QuickInfo"]&&t["com.sap.vocabularies.Common.v1.QuickInfo"].String){return t["com.sap.vocabularies.Common.v1.QuickInfo"].String}else{return""}},buildExpressionForProgressIndicatorCriticality:function(t,a){var r=v.None;var i;var o=a.Criticality;if(o){i="'{'= ({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Negative'') || ({0} === ''1'') || ({0} === 1) ? ''"+v.Error+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Critical'') || ({0} === ''2'') || ({0} === 2) ? ''"+v.Warning+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Positive'') || ({0} === ''3'') || ({0} === 3) ? ''"+v.Success+"'' : "+"''"+v.None+"'' '}'";if(o.Path){var l="$"+e.simplePath(t,o);r=n(i,l)}else if(o.EnumMember){var s="'"+o.EnumMember+"'";r=n(i,s)}else{m.warning("Case not supported, returning the default sap.ui.core.ValueState.None")}}else{m.warning("Case not supported, returning the default sap.ui.core.ValueState.None")}return r},buildExpressionForButtonCriticality:function(e){var t=e.Determining;var a=t?u.ButtonType.Default:u.ButtonType.Ghost;var r;var i=e.Criticality;if(i){r="'{'= ({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Negative'') || ({0} === ''1'') || ({0} === 1) ? ''"+u.ButtonType.Reject+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Positive'') || ({0} === ''3'') || ({0} === 3) ? ''"+u.ButtonType.Accept+"'' : "+"''"+u.ButtonType.Default+"'' '}'";if(i.Path){var o="${"+i.Path+"}";a=n(r,o)}else if(i.EnumMember){var l="'"+i.EnumMember+"'";a=n(r,l)}else{m.warning("Case not supported, returning the default sap.m.ButtonType.Default")}}else{m.warning("Case not supported, returning the default"+a)}return a},buildEmphasizedButtonExpression:function(e){if(!e){return u.ButtonType.Emphasized}var t;var a;e.forEach(function(e){var r=e.Criticality;var n=e["com.sap.vocabularies.UI.v1.Hidden"];if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&!a&&r){switch(r.EnumMember){case"com.sap.vocabularies.UI.v1.CriticalityType/Negative":case"com.sap.vocabularies.UI.v1.CriticalityType/Positive":case"1":case 1:case"3":case 3:if(!n){t=u.ButtonType.Default;a=true}t=t||u.ButtonType.Default;break;default:t=u.ButtonType.Emphasized}if(r.Path){t="{= ((${"+r.Path+"} === 'com.sap.vocabularies.UI.v1.CriticalityType/Negative') || (${"+r.Path+"} === '1') || (${"+r.Path+"} === 1) "+"|| (${"+r.Path+"} === 'com.sap.vocabularies.UI.v1.CriticalityType/Positive') || (${"+r.Path+"} === '3') || (${"+r.Path+"} === 3)) ? "+"'Default'"+" : "+"'Emphasized'"+" }"}}});return t||u.ButtonType.Emphasized},getEntitySetName:function(e,t){if(!e||!(e.name||t)){m.warning("At least one of the input parameters is undefined. Returning default value for entity set name.");return""}return e.name||t.name},getBreakoutActionEnabledKey:function(e,t){var a=V.getBreakoutActionButtonId(e,t);var r="{_templPriv>/generic/listCommons/breakoutActionsEnabled/"+a+"/enabled}";return r},getControlVisibleTerm:function(e){return"${_templPrivView>/#"+e+"/visible}"},getControlEnabledTerm:function(e){return"${_templPrivView>/#"+e+"/enabled}"},getActionCommandVisibility:function(e,t){return!e||t||"{= "+V.getControlVisibleTerm(e)+" && "+V.getControlEnabledTerm(e)+"}"},buildVisibilityExprOfDataFieldForIntentBasedNaviButton:function(e){if(e["com.sap.vocabularies.UI.v1.Hidden"]){return V.getBindingForHiddenPath(e)}else if(e.RequiresContext&&e.RequiresContext.Bool=="false"&&(!e.Inline||e.Inline.Bool==="false")){var t=e.SemanticObject.String;var a=e.Action.String;return"{= !!${_templPriv>/generic/supportedIntents/"+t+"/"+a+"/visible}}"}else{return true}},searchForFirstSemKey_Title_Description:function(e){var t,a,r,n,i,o,l,s,u,c,f,p,g,v,d,P,h,y;if(!e){return}t=e.getPath();if(t.indexOf("com.sap.vocabularies.UI.v1.LineItem")<0){return}r=t&&t.lastIndexOf("/");n=t.substring(0,r);i=t.substring(r+1);o=e.getModel();f=o&&o.getObject(n);if(f){p=f["com.sap.vocabularies.Common.v1.SemanticKey"]&&f["com.sap.vocabularies.Common.v1.SemanticKey"][0]&&f["com.sap.vocabularies.Common.v1.SemanticKey"][0].PropertyPath;g=f[i];v=f["com.sap.vocabularies.UI.v1.HeaderInfo"];d="";P="";if(v){d=v.Title&&v.Title.Value&&v.Title.Value.Path;P=v.Description&&v.Description.Value&&v.Description.Value.Path}h=g&&g.length;a=t+"/";for(y=0;y<h;y++){if(g[y].RecordType==="com.sap.vocabularies.UI.v1.DataField"&&g[y].Value.Path===p){if(V.isPropertyHidden(g[y])){continue}a=a+y+"/Value/Path";return a}if(g[y].RecordType==="com.sap.vocabularies.UI.v1.DataField"&&g[y].Value.Path===d){if(V.isPropertyHidden(g[y])){continue}l=true;c=y}if(g[y].RecordType==="com.sap.vocabularies.UI.v1.DataField"&&g[y].Value.Path===P){if(V.isPropertyHidden(g[y])){continue}s=true;u=y}}if(l){a=a+c+"/Value/Path";return a}else if(s){a=a+u+"/Value/Path";return a}}else{m.warning("No entity type provided")}},isPropertyHidden:function(e){var t=false;if(e["com.sap.vocabularies.UI.v1.Hidden"]||e["com.sap.vocabularies.Common.v1.FieldControl"]&&e["com.sap.vocabularies.Common.v1.FieldControl"].EnumMember==="com.sap.vocabularies.Common.v1.FieldControlType/Hidden"){t=true}return t},getColumnHeaderText:function(e,t){var a;if(t.Label){return t.Label.String}else{a=(e["com.sap.vocabularies.Common.v1.Label"]||"").String||e["sap:label"]||"";return a}},getColumnToolTip:function(e,t){var a;if(t.Label){return t.Label.String}else{a=e["sap:quickinfo"]||(e["com.sap.vocabularies.Common.v1.QuickInfo"]||"").String||(e["com.sap.vocabularies.Common.v1.Label"]||"").String||e["sap:label"]||"";return a}},getTextForDataField:function(e){var t=e["com.sap.vocabularies.Common.v1.Text"]&&e["com.sap.vocabularies.Common.v1.Text"].Path;return t},getColumnCellFirstText:function(e,t,a,r){var n,i;i=V.getTextArrangement(a,e);switch(i){case"idAndDescription":n=t.Value.Path;if(!n){n=V.getTextForDataField(e)}break;case"idOnly":n=t.Value.Path;if(!n){n=V.getTextForDataField(e)}break;case"descriptionAndId":case"descriptionOnly":default:n=V.getTextForDataField(e);if(!n){n=t.Value.Path}break}if(n){if(r){return true}else{if(e.type==="Edm.DateTimeOffset"||e.type==="Edm.DateTime"||e.type==="Edm.Time"){var o=V.formatDateTimeForCustomColumn(e.type,n);return o}else{return"{"+n+"}"}}}},getColumnCellSecondText:function(e,t,a,r){var n;n=V.getTitlePath(e,t,a);if(n){if(r){return"{= !!${path: '"+n+"'} }"}else{if(e.type==="Edm.DateTimeOffset"||e.type==="Edm.DateTime"||e.type==="Edm.Time"){var i=V.formatDateTimeForCustomColumn(e.type,n);return i}else{return"{"+n+"}"}}}else{return r?false:undefined}},getTitlePath:function(e,t,a){var r,n;n=V.getTextArrangement(a,e);switch(n){case"idOnly":case"descriptionOnly":break;case"idAndDescription":if(!t.Value.Path){break}r=V.getTextForDataField(e);break;case"descriptionAndId":default:if(!V.getTextForDataField(e)){break}r=t.Value.Path;break}return r},getHeaderVisibility:function(e,t,a){var r,n;r=V.getTitlePath(e,t,a);if(!r){if(e.type==="Edm.DateTimeOffset"||e.type==="Edm.DateTime"||e.type==="Edm.Time"){r=V.getColumnCellFirstText(e,t,a);return"{= "+r+" ? false : true}"}else{r=V.getColumnCellFirstText(e,t,a).replace("{","").replace("}","")}}else{n=V.getTextArrangement(a,e);if(!n||n==="descriptionAndId"){r=V.getColumnCellFirstText(e,t,a).replace("{","").replace("}","")}if(n==="idAndDescription"){r=V.getTitlePath(e,t,a)}}if(r){return"{= !${path: '"+r+"'} }"}return false},formatDateTimeForCustomColumn:function(e,t){if(e==="Edm.DateTimeOffset"){return"{ path: '"+t+"', type: 'sap.ui.model.odata.type.DateTimeOffset', formatOptions: { style: 'medium'}, constraints: {displayFormat: 'Date'}}"}else if(e==="Edm.DateTime"){return"{ path: '"+t+"', type: 'sap.ui.model.odata.type.DateTime', formatOptions: { style: 'medium'}, constraints: {displayFormat: 'Date'}}"}else{return"{ path: '"+t+"', type: 'sap.ui.model.odata.type.Time', formatOptions: { style: 'medium'}}"}},getAdditionalSemanticObjects:function(e){var t;var a=[];for(t in e){if(t.indexOf("com.sap.vocabularies.Common.v1.SemanticObject#")!=-1){a.push(e[t].String)}}if(a.length>0){return"{value: "+JSON.stringify(a).replace(/"/g,"'")+"}"}},getColumnCellFirstTextVisibility:function(e,t,a){var r=true;var n=!!V.getColumnCellFirstText(e,t,a,r);return n},getColumnCellSecondTextVisibility:function(e,t,a){var r=true;var n=V.getColumnCellSecondText(e,t,a,r);return n},isSmartLink:function(e){var t;for(t in e){if(t.indexOf("com.sap.vocabularies.Common.v1.SemanticObject")>=0){return true}}return false},setRowHighlight:function(e,t,a,r){var n=t.entitySet===a?t.isDraft:(t.isDraft||t.level===0)&&r(a);var i=t.level>0&&(n||!t.isDraft);var o=n?"{path: 'IsActiveEntity'}, {path: 'HasActiveEntity'}":"{value: true}, {value: true}";var l=i?"{path: 'ui>/editable'}, {path: '_templPrivMessage>/'}":"{value: false}, {value: ''}";var s=e["com.sap.vocabularies.UI.v1.LineItem@com.sap.vocabularies.UI.v1.Criticality"];var u=s&&s.Path?", {path: '"+s.Path+"'}":"";return"{parts: ["+o+", "+l+u+", {path: ''}], formatter: 'RuntimeFormatters.setInfoHighlight.bind($control)'}"},getDataFieldLabel:function(t,a){if(a.Label){return e.format(t,a.Label)}},getDataFieldValue:function(t,a,r){if(a&&!a.Path&&!a.Apply&&!a.String){return""}var n=e.format(t.getModel()?t:t.getInterface(0),a);if(r){n=n.replace("{","{ mode:'"+r+"', ")}return n},getDataFieldValueSimplePath:function(t,a,r){if(a&&!a.Path&&!a.Apply&&!a.String){return""}var n=e.simplePath(t.getModel()?t:t.getInterface(0),a);if(r){n=n.replace("{","{ mode:'"+r+"', ")}return n},isDataFieldRenderable:function(e,a){e=e.getModel()?e:e.getInterface(0);var r={asExpression:false,path:e.getPath(),value:a,withType:false};var n=r.value,i,o;t.expectType(r,"object");if(n.hasOwnProperty("Type")){o=t.property(r,"Type","string");i=t.descend(r,"Value")}else{["And","Apply","Bool","Date","DateTimeOffset","Decimal","Float","Eq","Ge","Gt","Guid","If","Int","Le","Lt","Ne","Not","Null","Or","Path","PropertyPath","String","TimeOfDay"].forEach(function(e){if(n.hasOwnProperty(e)){o=e;i=t.descend(r,e)}})}switch(o){case"Apply":return true;case"If":return true;case"Path":case"PropertyPath":var l=i.value,s=e.getModel(),u={getModel:function(){return s},getPath:function(){return i.path}};t.expectType(i,"string");var c=t.followPath(u,{Path:l});return!!(c&&c.resolvedPath);case"Bool":case"Date":case"DateTimeOffset":case"Decimal":case"Float":case"Guid":case"Int":case"String":case"TimeOfDay":return true;case"And":case"Eq":case"Ge":case"Gt":case"Le":case"Lt":case"Ne":case"Or":return true;case"Not":return true;case"Null":return true;default:return true}},setNoDataTextForSmartTable:function(e,t){t="::"+e+"--"+t;return"{parts: [{value: '"+t+"'}], formatter: '._templateFormatters.setNoDataTextForSmartTable'}"},getRelevantDataForAnnotationRecord:function(e,t,a){var r,n;while(t.indexOf("/")>-1){r=t.split("/")[0];t=t.split("/").slice(1).join("/");n=e.getODataAssociationEnd(a,r);a=e.getODataEntityType(n&&n.type)}return{entityType:a,association:n,dataFieldValuePath:t}},getTextArrangementForSCFields:function(e,t,a,r){var n=e.getInterface(0).getModel();var i=n.getODataEntityType(a.entityType);var o=t.Value.Path;i=V.getRelevantDataForAnnotationRecord(n,t.Value.Path,i).entityType;var l=i.property||[];var s,u;for(var c=0;c<l.length;c++){if(o===l[c].name){s=l[c]["sap:text"];break}}r=r||[];for(var f=0;f<r.length;f++){if(r[f].RecordType==="com.sap.vocabularies.UI.v1.DataField"&&r[f].Value.Path===s){return"idOnly"}}u=V.getTextArrangementForSmartControl(e,t,a);return u},checkMultiplicityForDataFieldAssociation:function(e,t,a){if(a.Value&&a.Value.Path){var r=a.Value.Path;var n=e&&e.getModel&&e.getModel(0);var i=n&&n.getODataEntityType(t.entityType);var o;if(!(r.indexOf("/")>-1)||!i){return false}while(r.indexOf("/")>-1){var l=r.split("/")[0];r=r.split("/").slice(1).join("/");i=n.getODataEntityType(o&&o.type)||i;o=n.getODataAssociationEnd(i,l)}if(o&&o.multiplicity==="*"){return true}}return false},checkIfDataFieldIsNotForStream:function(e){if(e.Value&&e.Value.Path){var t=e.Value.Path;if(t.endsWith("$value")){return false}return true}},hasQuickViewFacet:function(e,t){return p.escapeSettingsValue(t[e.entityType].sForceLinkRendering)},buildHeaderInfoCustomData:function(e,t){var a="";var r="";var n=false;var i=false;if(t&&t.Title&&t.Title.Value){a=t.Title.Value.Path?t.Title.Value.Path:t.Title.Value.String||"";n=!!t.Title.Value.Path;i=false;if(t&&t.Description&&t.Description.Value){r=t.Description.Value.Path?t.Description.Value.Path:t.Description.Value.String||"";i=!!t.Description.Value.Path}}return'{"headerTitle":"'+a+'","isHeaderTitlePath":'+n+',"headerSubTitle":"'+r+'","isHeaderSubTitlePath":'+i+"}"},getPresentationVariantQualifier:function(e,t){var a=t&&e[t];if(!a){return""}else if(a.Visualizations||a.SortOrder){return t.split("#")[1]||""}else if(a.PresentationVariant&&(a.PresentationVariant.Path||a.PresentationVariant.AnnotationPath)){var r=a.PresentationVariant.Path||a.PresentationVariant.AnnotationPath;return r.split("#")[1]||""}else if(a.PresentationVariant){return""}},getPresentationVariantInitialExpansionLevel:function(e,t){var a=e[t];var r=V.getPresentationVariant(a,e);if(r.InitialExpansionLevel){return r.InitialExpansionLevel.Int}},getIconSemanticColor:function(t,a){var r="";if(a.EnumMember){r=a.EnumMember.split("/")[1]}else if(a.Value){var n=sap.ui.core.IconColor;switch(a.Value){case"0":r=n.Neutral;break;case"1":r=n.Negative;break;case"2":r=n.Critical;break;case"3":r=n.Positive;break;default:r=""}}else if(a.String){r=a.String}else if(a.Path){r="{= $"+e.simplePath(t,a)+"}"}return r},getConnectedFieldsTemplateParts:function(e){var t=e.String.trim().match(/{[A-Za-z0-9]*\w}/g);return t},getConnectedFieldsDelimiter:function(e){var t=V.getConnectedFieldsTemplateParts(e);var a=e.String.trim();var r=a.substring(t[0].length,a.indexOf(t[1]));return r},rearrangeConnectedFields:function(e){var t=e.getObject();var a=V.getConnectedFieldsTemplateParts(t.Template);var r={Data:{}};for(var n=0;n<a.length;n++){a[n]=a[n].replace("{","").replace("}","");r["Data"][a[n]]=t["Data"][a[n]]}t["Data"]=r["Data"];return" "},getEntityType:function(e){var t;var a=e.getModel();var r=e.getObject();var n=r&&r.entitySet;var i=a.getProperty("/metaModel");if(n){var o=i.getODataEntitySet(n);t=o&&o.entityType}else{t=a.getProperty("/entityType")}var l=i.createBindingContext(i.getODataEntityType(t,true));return l},getEntitySet:function(e){var t=e.getModel();var a=e.getObject();var r=a&&a.entitySet;var n=t.getProperty("/metaModel");if(!r){r=t.getProperty("/entitySet")}var i=n.createBindingContext(n.getODataEntitySet(r,true));return i},getTableAnnotationPath:function(e){var t=e.getModel();var a=t.getProperty("/metaModel");var r=t.getObject(e.sPath);var n=t.getData("workingContext")["workingContext"];var i=n.tableChartTabs;for(var o in i){if(i[o].key===r.key){var l=i[o].lineItemPath;var s=a.createBindingContext(l);return s}}},getChartAnnotationPath:function(e){var t,a,r,n,i,o,t,l,s;a=e.getModel();var u=a.getProperty("/metaModel");r=a.getObject(e.sPath);i=a.getData("workingContext")["workingContext"].tableChartTabs;for(n in i){o=i[n].variantAnnotationPath;if(o===r.annotationPath){t=i[n].chartAbsolutePath;l=t+"/Actions";s=u.createBindingContext(l);return s}}},checkIfChartQualifier:function(e,t){return!!V.getChartQualifier(e,t)},getChartQualifier:function(e,t){var a,r,n;for(r in e.tableChartTabs){n=e.tableChartTabs[r].key;if(n===t.key){a=e.tableChartTabs[r].controlQualifier;break}}return a},getChartPresentationVariantQualifier:function(e,t){var a,r,n;for(r in e.tableChartTabs){n=e.tableChartTabs[r].key;if(n===t.key){a=e.tableChartTabs[r].variantQualifier;break}}return a},getFormattedAddress:function(t,a){var r="";if(a[0].street){r+=e.format(t,a[0].street)+", "}if(a[0].code){r+=e.format(t,a[0].code)+", "}if(a[0].locality){r+=e.format(t,a[0].locality)+", "}if(a[0].region){r+=e.format(t,a[0].region)+", "}if(a[0].country){r+=e.format(t,a[0].country)+", "}return r.slice(0,r.length-2)},checkIfChartNavigationIsEnabled:function(e,t,a,r){var n=e.showItemNavigationOnChart;if(!n){return false}a=!!e.entitySet?e.entitySet:a;for(var i=0;i<t.length;i++){if(t[i].entitySet===a&&t[i].navigation&&t[i].navigation["display"]){return true}}if(t&&t[0]&&t[0].entitySet===a&&(!t[0].navigation||t[0].navigation&&!t[0].navigation["display"])){return true}return false},checkIfDiffEntitySetsMode:function(e){var t;var a=e&&e.variants;for(t in a){if(a[t].entitySet){return true}}},checkFacetHasLineItemAnnotations:function(e,t){if(!e){return false}if(e.indexOf("com.sap.vocabularies.UI.v1.LineItem")>-1){return true}if(e.indexOf("com.sap.vocabularies.UI.v1.PresentationVariant")>-1){var a=e.split("/@");if(a.length<2){return false}if(!t||!E(t[a[1]])){return false}return true}return false},getListItemCollection:function(t){if(!t){return t}var a=t.getObject();if(!a||!a.AnnotationPath){return t}if(a.AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.LineItem")>=0){return e.resolvePath(t)}if(a.AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.PresentationVariant")>=0){var r=t.getProperty(e.resolvePath(t)),n=E(r);if(!n||n.indexOf("@")!==0){return t}var i=t.getModel().getODataEntityType(t.getProperty(e.gotoEntitySet(t)).entityType);return i.$path+"/"+n.slice(1)}return t},getSaveAndNextButtonVisibility:function(e){var t=e["sap.ui.generic.app"].pages[0].component.settings&&e["sap.ui.generic.app"].pages[0].component.settings.editFlow;if(t==="direct"){return"{ui>/editable}"}else{return false}},checkCopyActionValidity:function(e){var t=(e||[]).filter(function(e){return e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&(e["com.sap.vocabularies.UI.v1.IsCopyAction"]&&e["com.sap.vocabularies.UI.v1.IsCopyAction"].Bool)});if(t.length>1){m.error("Multiple actions are annotated with isCopyAction. There can be only one standard copy action.")}return t.length===1},buildSmartTableCustomizeConfig:function(e,t,a,r){var n=null;var i=Object.create(null);if(a){var o=e.getInterface(0).getModel();var l=V.handleNavigationRestrictions(o,t,a,"Insertable");var s=l&&l.Insertable;if(s){var u=Object.create(null);if(s.Bool){u["*"]=s.Bool==="true"}else if(s.Path){u["*"]=true}i["ignoreInsertRestrictions"]=u}i["clientSideMandatoryCheck"]={"*":false}}if(!g(r)){i["autoColumnWidth"]=r}n=JSON.stringify(i);return n},getAnnotatedActionPress:function(e,t,a,r,n){var i="";switch(t.RecordType){case"com.sap.vocabularies.UI.v1.DataFieldForAction":var o=t.Action.String.split("/")[1];var l=e.annotatedActions&&e.annotatedActions[o];if(l){i="cmd:"+l.command}else if(r){i="._templateEventHandlers.onDeterminingDataFieldForAction"}else{i=n||"._templateEventHandlers.onCallActionFromToolBar"}break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":var s=a["sap.app"].crossNavigation&&a["sap.app"].crossNavigation.outbounds;var u=Object.keys(s||{}).find(function(e){return s[e].semanticObject===t.SemanticObject.String&&s[e].action===t.Action.String});var c=e.outbounds&&e.outbounds[u];if(c){i="cmd:"+c.command}else{i=r?"._templateEventHandlers.onDeterminingDataFieldForIntentBasedNavigation":"._templateEventHandlers.onDataFieldForIntentBasedNavigation"}break;default:break}return i},getNavigateToInstanceForDataFieldForAction:function(e,t){if(!e||!t||!t.Action||!t.Action.String){return undefined}var a=t.Action.String.split("/")[1];for(var r in e){var n=e[r]?.annotatedActions;if(!n){continue}var i=n[a];if(i&&i.afterExecution&&typeof i.afterExecution.navigateToInstance!=="undefined"){return i.afterExecution.navigateToInstance}}return undefined},getSideEffectSourcePropertyType:function(e,t,a,r){return t?f.getFieldSourcePropertiesType(e,a,r):""},getPersistencyKey:function(e,t){switch(t){case"Retain":return e;case"Remove":return"";case"New":return e+"::Personalization";default:break}},getItemsForContacts:function(e,t,a){var r=e.getInterface(0);var n=V.getNavigationPropertyPath(r,t);var i=[];if(a.fn&&a.fn.Path){i.push(a.fn.Path)}if(a.photo&&a.photo.Path){i.push(a.photo.Path)}if(a.role&&a.role.Path){i.push(a.role.Path)}return n&&i.length>0?"{ path : '"+n+"', parameters : { select:'"+i.join(",")+"'} }":""},getNavigationPropertyPath:function(t,a){var r=e.getNavigationPath(t,a);var n=r.replace("{","").replace("}","");return n},getToolbarButtonPriorityFromImportance:function(e){var t="";if(e&&e.includes("/")){e=e.split("/")[1]}switch(e){case"High":case"Medium":t=d.High;break;case"Low":t=d.Low;break;default:t=d.High;break}return t},getModelData:function(e,t,a){var r=e.getModel()?e.getModel():e.getInterface(0).getModel(),n=r.getODataEntityType(r.getODataEntitySet(a).entityType);if(t.indexOf("/")>-1){var i=V.getRelevantDataForAnnotationRecord(r,t,n);return{sAnnotationPath:i.dataFieldValuePath[0]==="@"?i.dataFieldValuePath.substring(1):i.dataFieldValuePath,oEntityType:i.entityType}}return{sAnnotationPath:t[0]==="@"?t.substring(1):t,oEntityType:n}},getSmartFormTitle:function(e,t,a,r,n){if(!t){return V.getTitleForSectionsForms(r,n)}return V.getTitleForHeaderForm(e,t,a)},getTitleForSectionsForms:function(e,t){if(t?.annotations?.Facet?.annotation?.Facets?.length>1||t?.annotations?.Facet?.annotation?.Label?.String!==e?.aggregations?.groups[0]?.annotations?.Facet?.annotation?.Label?.String){return}if(e?.aggregations?.groups[0]?.annotations?.Facet?.annotation?.Label?.String!==e?.aggregations?.groups[0]?.targetAnnotation?.Label?.String){return e?.aggregations?.groups[0]?.targetAnnotation?.Label?.String}return},getTitleForHeaderForm:function(e,t,a){if(t.Target&&t.Target.AnnotationPath&&t.Target.AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.DataPoint")>-1){var{sAnnotationPath:r,oEntityType:n}=V.getModelData(e,t.Target.AnnotationPath,a);if(n[r]&&n[r].Title&&n[r].Title.String){return n[r].Title.String}if(!n[r]||!n[r].Value||!n[r].Value.Path||!n.property){return}var i=n.property.filter(function(e){return e.name===n[r].Value.Path});if(i.length&&i[0]["sap:label"]){return i[0]["sap:label"]}return}if(t.Label&&t.Label.String){return t.Label.String}if(!t.Target||!t.Target.AnnotationPath){return}if(t.Target.AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.Identification")>-1){return}var{sAnnotationPath:r,oEntityType:n}=V.getModelData(e,t.Target.AnnotationPath,a);if(n[r]&&n[r].Label&&n[r].Label.String){return n[r].Label.String}return}};V.getBlockForEditableHeaderFacet.requiresIContext=true;V.getLinkTextForDFwithIBN.requiresIContext=true;V.getLabelForDFwithIBN.requiresIContext=true;V.isPropertySemanticKey.requiresIContext=true;V.suppressP13NDuplicateColumns.requiresIContext=true;V.formatWithExpand.requiresIContext=true;V.formatWithExpandSimple.requiresIContext=true;V.getNavigationPathWithExpand.requiresIContext=true;V.getFormGroupBindingString.requiresIContext=true;V.getCurrentPathWithExpand.requiresIContext=true;V.getCurrentPathWithExpandForContact.requiresIContext=true;V.getTextArrangementForSmartControl.requiresIContext=true;V.createP13N.requiresIContext=true;V.createP13NColumnForConnectedFields.requiresIContext=true;V.createP13NColumnForIndicator.requiresIContext=true;V.createP13NColumnForAction.requiresIContext=true;V.createP13NColumnForContactPopUp.requiresIContext=true;V.createP13NColumnForChart.requiresIContext=true;V.createP13NForDraftObject.requiresIContext=true;V.getSortProperty.requiresIContext=true;V.getFilterProperty.requiresIContext=true;V.hasDeterminingActionsRespectingApplicablePath.requiresIContext=true;V.buildExpressionForProgressIndicatorPercentValue.requiresIContext=true;V.buildExpressionForProgressIndicatorDisplayValue.requiresIContext=true;V.getProgressIndicatorTooltip.requiresIContext=true;V.buildExpressionForProgressIndicatorCriticality.requiresIContext=true;V.areBooleanRestrictionsValidAndPossible.requiresIContext=true;V.checkForDeleteRetriction.requiresIContext=true;V.isRelatedEntityCreatable.requiresIContext=true;V.isCreationAllowedByBoolAndPathRestrictions.requiresIContext=true;V.buildBreadCrumbExpression.requiresIContext=true;V.getApplicablePathForChartToolbarActions.requiresIContext=true;V.buildAnnotatedActionButtonEnablementExpression.requiresIContext=true;V.getIconTabFilterText.requiresIContext=true;V.formatImageUrl.requiresIContext=true;V.getPathWithExpandFromHeader.requiresIContext=true;V.formatImageOrTypeUrl.requiresIContext=true;V.isDataFieldRenderable.requiresIContext=true;V.formatHeaderImage.requiresIContext=true;V.getDataFieldLabel.requiresIContext=true;V.getDataFieldValue.requiresIContext=true;V.getDataFieldValueSimplePath.requiresIContext=true;V.doesActionExist.requiresIContext=true;V.checkMultiplicityForDataFieldAssociation.requiresIContext=true;V.getTextArrangementForSCFields.requiresIContext=true;V.buildActionButtonsCustomData.requiresIContext=true;V.buildHeaderInfoCustomData.requiresIContext=true;V.formatWithExpandSimplePath.requiresIContext=true;V.formatSmartField.requiresIContext=true;V.getIconSemanticColor.requiresIContext=true;V.getValueListReadOnly.requiresIContext=true;V.getImportanceForTableColumnsWithSemanticKeyTitleAndDescription.requiresIContext=true;V.getDefaultWidthForTableColumn.requiresIContext=true;V.getPropertyNameForText.requiresIContext=true;V.getColumnWidthForConnectedFields.requiresIContext=true;V.getFormattedAddress.requiresIContext=true;V.createP13NFileUploader.requiresIContext=true;V.buildSmartTableCustomizeConfig.requiresIContext=true;V.avatarImageSourceExists.requiresIContext=true;V.getExtensionPointFacetTitle.requiresIContext=true;V.buildInlineCreationRowsConfig.requiresIContext=true;V.getItemsForContacts.requiresIContext=true;V.getNavigationPropertyPath.requiresIContext=true;V.getLinkTextForDFwithEmail.requiresIContext=true;V.checkIsEmailAddress.requiresIContext=true;V.isEmailAddressAndMuliplicity.requiresIContext=true;V.getTextArrangementPath.requiresIContext=true;V.isValueHelpTableAvailable.requiresIContext=true;V.getTextArrangementFinalString.requiresIContext=true;V.getSmartFormTitle.requiresIContext=true;return V},true);
//# sourceMappingURL=AnnotationHelper.js.map