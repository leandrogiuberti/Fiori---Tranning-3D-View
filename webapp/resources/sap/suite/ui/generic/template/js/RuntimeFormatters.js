sap.ui.define(["sap/base/i18n/Formatting","sap/ui/core/Locale","sap/ui/core/format/DateFormat","sap/ui/core/format/NumberFormat","sap/ui/core/message/MessageType","sap/m/RatingIndicator","sap/suite/ui/generic/template/genericUtilities/FeLogger","sap/suite/ui/generic/template/genericUtilities/testableHelper","sap/suite/ui/generic/template/genericUtilities/utils","sap/base/security/encodeXML"],function(e,t,r,a,n,i,o,u,s,g){"use strict";var c=new o("js.RuntimeFormatters").getLogger();function f(e){while(!e.getEntitySet){e=e.getParent()}return e}function l(e){var t=e.getCustomData();var r=t.find(function(e){return e.getKey()==="lineItemQualifier"});return r&&r.getValue()}function I(e,t){var r=t.getModel();var a=r.getMetaModel();var n=f(e.getParent());var i=a.getODataEntitySet(n.getEntitySet());var o=a.getODataEntityType(i.entityType);var u=o["com.sap.vocabularies.UI.v1.LineItem"];var s=o["com.sap.vocabularies.UI.v1.LineItem@com.sap.vocabularies.UI.v1.Criticality"];var g=l(n);if(g){s=o["com.sap.vocabularies.UI.v1.LineItem#"+g+"@com.sap.vocabularies.UI.v1.Criticality"]}if(u&&s){if(s.Path){var c=s.Path;var I=t.getObject(c);if(I){switch(I.toString()){case"0":return"None";case"1":return"Error";case"2":return"Warning";case"3":return"Success";default:break}}}else if(s.EnumMember){var v=s.EnumMember;if(v){switch(v){case"com.sap.vocabularies.UI.v1.CriticalityType/Neutral":return"None";case"com.sap.vocabularies.UI.v1.CriticalityType/Negative":return"Error";case"com.sap.vocabularies.UI.v1.CriticalityType/Critical":return"Warning";case"com.sap.vocabularies.UI.v1.CriticalityType/Positive":return"Success";default:break}}}}return"None"}var v;var T;var m;function p(){if(!v){v=new t(e.getLanguageTag())}return v}function _(){if(!T){T=a.getCurrencyInstance()}return T}function R(){if(!m){m=r.getDateTimeInstance()}return m}var l=u.testableStatic(l,"RuntimeFormatters_getLineItemQualifier");var f=u.testableStatic(f,"RuntimeFormatters_getSmartTableControl");var E={setInfoHighlight:function(e,t,r){var a=this.getBindingContext();if(!a){return"None"}var i="None";if(r){var o=a.getMessages();for(var u=0;u<o.length;u++){var s=o[u];var g=s.getType();if(g===n.Error){return"Error"}if(g===n.Warning){i="Warning"}else if(g===n.Information&&i!==n.Warning){i="Information"}}if(a.isTransient()&&!a.isInactive()){return"Information"}}if(e===false&&t===false){return i==="None"?"Information":i}var c=I(this,a);return c==="Error"||c==="Warning"||i==="None"?c:i},setRowNavigated:function(e){var t=this.getBindingContext()||this.getParent().getBindingContext();var r=t&&t.getPath();return!!r&&r===e},formatImageUrl:function(e,t,r){return s.adjustImageUrlPath(e,t,r)},formatRatingIndicatorSubTitle:function(e){if(e){var t=this.getModel("i18n").getResourceBundle();if(this.getCustomData().length>0){return t.getText("RATING_INDICATOR_SUBTITLE",[e,this.data("Subtitle")])}else{var r=e>1?t.getText("RATING_INDICATOR_SUBTITLE_LABEL_PLURAL"):t.getText("RATING_INDICATOR_SUBTITLE_LABEL");return t.getText("RATING_INDICATOR_SUBTITLE",[e,r])}}},formatRatingIndicatorFooterText:function(e,t){if(!e){return""}var r=this.getModel("i18n").getResourceBundle();t=t||this.data("Footer")||i.getMetadata().getPropertyDefaults().maxValue;return r.getText("RATING_INDICATOR_FOOTER",[e,t])},formatRatingIndicatorAggregateCount:function(e){var t=this.getModel("i18n").getResourceBundle();var r="";e=e||this.data("AggregateCount");if(e){r=t.getText("RATING_INDICATOR_AGGREGATE_COUNT",[e])}return r},formatDisplayValueForProgressIndicator:function(e,t,r){var n="";if(e!==null&&e!==undefined){e=e.toString()}if(t!==null&&t!==undefined){t=t.toString()}if(e){var i=this;var o=i.getModel("i18n").getResourceBundle();var u=i.getCustomData();var s=p();e=a.getInstance(s).format(e);t=t||u.filter(function(e){if(e.getKey()==="Target"){return e}});t=typeof t==="object"?t[0]&&t[0].getValue():t;r=r||u.filter(function(e){if(e.getKey()==="UoM"){return e}});r=typeof r==="object"?r[0]&&r[0].getValue():r;if(r){if(r==="%"){n=o.getText("PROGRESS_INDICATOR_DISPLAY_VALUE_UOM_IS_PERCENT",[e])}else{if(t){t=a.getInstance(s).format(t);n=o.getText("PROGRESS_INDICATOR_DISPLAY_VALUE_UOM_IS_NOT_PERCENT",[e,t,r])}else{n=o.getText("PROGRESS_INDICATOR_DISPLAY_VALUE_UOM_IS_NOT_PERCENT_NO_TARGET_VALUE",[e,r])}}}else{if(t){t=a.getInstance(s).format(t);n=o.getText("PROGRESS_INDICATOR_DISPLAY_VALUE_NO_UOM",[e,t])}else{n=e}}}else{c.warning("Value property is mandatory, the default (empty string) will be returned")}return n},formatDate:function(e){return R().format(e)},formatCurrency:function(e,t){return _().format(e,t)},getDraftObjectDisplayText:function(e,t,r,a){var n=sap.ui.core.Component.getOwnerComponentFor(this);var i=!e&&!t?r:a;if(n){var o=n.getAppComponent().getModel("i18n|"+n.getMetadata().getComponentName()+"|"+n.getEntitySet());var u=n.getAppComponent().getModel("i18n");var s=(u?u.getResourceBundle().hasText("NEW_OBJECT"):false)||(o?o.getResourceBundle().hasText("NEW_OBJECT"):false);var c=(u?u.getResourceBundle().hasText("UNNAMED_OBJECT"):false)||(o?o.getResourceBundle().hasText("UNNAMED_OBJECT"):false);if(s&&!c){var i=r}}return g(i)}};return E},true);
//# sourceMappingURL=RuntimeFormatters.js.map