sap.ui.define(["sap/suite/ui/generic/template/js/AnnotationHelper"],function(e){"use strict";var t={checkIfEntityOrAssociationHasStreamEnabled:function(e,t,a){if(a.Value&&a.Value.Path){var r=a.Value.Path;var i=e.getModel(0);var n;var o;if(r.endsWith("$value")){var l=r.split("/");var s=l.length;if(s>1){for(var u=0;u<s-1;u++){var p=l[u];o=i.getODataEntityType(t.entityType);var n=i.getODataAssociationEnd(o,p);o=i.getODataEntityType(n&&n.type)}}else{var i=e.getModel(0);o=i.getODataEntityType(t.entityType)}}return o&&o.hasStream==="true"}},getStreamEntitySet:function(e){if(e.Value&&e.Value.Path){var t=e.Value.Path;if(t.endsWith("$value")){var a=t.split("/");var r=a.length;var i=a[r-2];return i}}},getLinkTextForStream:function(e,a){var r=t.getStreamEntitySet(a);return r?"{= ${_templPriv>/generic/controlProperties/fileUploader/"+r+"/fileName}}":"{= ${_templPriv>/generic/controlProperties/fileUploader/"+e.name+"/fileName}}"},getURLForStream:function(e,a){var r=t.getStreamEntitySet(a);return r?"{= ${_templPriv>/generic/controlProperties/fileUploader/"+r+"/url}}":"{= ${_templPriv>/generic/controlProperties/fileUploader/"+e.name+"/url}}"},isStreamPresent:function(e,t,a,r){var i=r&&e.getModel(0).getODataEntityType(r.entityType);var n=i&&i["com.sap.vocabularies.Common.v1.FieldControl"]&&i["com.sap.vocabularies.Common.v1.FieldControl"].Path;if(a.value==="available"){return n?"{= ${"+t+'} !== "" && ${'+n+'} >= "1"}':"{= ${"+t+'} !== ""}'}else{return n?"{= ${"+t+'} === "" && ${'+n+'} >= "1"}':"{= ${"+t+'} === ""}'}},getIconForStream:function(e,a){var r=t.getStreamEntitySet(a);return r?"{= ${_templPriv>/generic/controlProperties/fileUploader/"+r+"/icon}}":"{= ${_templPriv>/generic/controlProperties/fileUploader/"+e.name+"/icon}}"},isMimeTypeImage:function(e,t,a,r){var i=r&&e.getModel(0).getODataEntityType(r.entityType);var n=i&&i["com.sap.vocabularies.Common.v1.FieldControl"]&&i["com.sap.vocabularies.Common.v1.FieldControl"].Path;var o=false;if(i&&i["com.sap.vocabularies.UI.v1.IsImage"]){if(i["com.sap.vocabularies.UI.v1.IsImage"].Bool){o=i["com.sap.vocabularies.UI.v1.IsImage"].Bool}else if(i["com.sap.vocabularies.UI.v1.IsImage"].Path){o=i["com.sap.vocabularies.UI.v1.IsImage"].Path}else{o=true}}if(a.value==="image"){if(typeof o==="boolean"&&o){return n?"{= ${"+t+'} !== ""  && ${'+n+'} >= "1"}':"{= ${"+t+'} !== "" }'}else if(typeof o==="string"){return n?"{= ${"+t+'} !== ""  && ${'+n+'} >= "1" && ${'+o+"}}":"{= ${"+t+'} !== "" && ${'+o+"}}"}return false}else{if(typeof o==="boolean"&&o){return false}else if(typeof o==="string"){return n?"{= ${"+n+'} >= "1" && !${'+o+"}}":"{= !${"+o+"}}"}return true}},getFileName:function(e,t){var a=e.getModel(0).getODataEntityType(t.entityType);var r=a["Org.OData.Core.V1.ContentDisposition"];if(r){return"{"+r.Filename.Path+"}"}return"{i18n>ST_STREAM_OPEN_FILE}"},getAcceptableMimeTypes:function(e,t){var a=e.getModel(0).getODataEntityType(t.entityType);var r=a["Org.OData.Core.V1.AcceptableMediaTypes"];if(!r){return""}var i=new String;for(var n=0;n<r.length;n++){i=i.concat(r[n].String).concat(",")}return i.slice(0,-1)},getControlPath:function(e,t){var a="";var r=e&&e["Org.OData.Capabilities.V1.UpdateRestrictions"]&&e["Org.OData.Capabilities.V1.UpdateRestrictions"]["Updatable"]&&e["Org.OData.Capabilities.V1.UpdateRestrictions"]["Updatable"].Path;var i=e&&(e["sap:updatable"]||e["sap:updatable-path"]);if(r||i){a="${"+(r||i)+"} !== false"}if(t){a+="&& ${"+t&&t.Path+'} > "1"'}return a},getDeleteStreamVisibility:function(e,a,r,i){var n=i&&e.getModel(0).getODataEntityType(i.entityType);var o=n&&n["com.sap.vocabularies.Common.v1.FieldControl"];if(o&&o.EnumMember==="com.sap.vocabularies.Common.v1.FieldControlType/ReadOnly"){return false}var l=t.getControlPath(i,o);if(r){return l?"{= ${"+a+'} !== "" && ${ui>/editable} && '+l+"}":"{= ${"+a+'} !== "" && ${ui>/editable}}'}else{return l?"{= ${"+a+'} !== "" && !${ui>/editable} && '+l+"}":"{= ${"+a+'} !== "" && !${ui>/editable}}'}},getFileUploaderVisibility:function(a,r,i){var n,o=i&&a.getModel(1).getODataEntityType(i.entityType);var l=o&&o["com.sap.vocabularies.Common.v1.FieldControl"];if(l&&l.EnumMember==="com.sap.vocabularies.Common.v1.FieldControlType/ReadOnly"){return false}var n=t.getControlPath(i,l);var s=e.getUpdateRestrictions(i);if(r){return n?"{= ${ui>/editable} && "+n+"}":"{= ${ui>/editable}}"}else{if(typeof s==="boolean"){if(s){return n?"{= !${ui>/editable} && "+n+"}":"{= !${ui>/editable}}"}else{return false}}else if(typeof s==="string"){if(typeof n==="string"){return"{= !${ui>/editable} && "+n+" && ${"+s+"}}"}return"{= !${ui>/editable} && ${"+s+"}}"}}}};t.checkIfEntityOrAssociationHasStreamEnabled.requiresIContext=true;t.getFileName.requiresIContext=true;t.getAcceptableMimeTypes.requiresIContext=true;t.getFileUploaderVisibility.requiresIContext=true;t.isStreamPresent.requiresIContext=true;t.getDeleteStreamVisibility.requiresIContext=true;t.isMimeTypeImage.requiresIContext=true;return t},true);
//# sourceMappingURL=AnnotationHelperStreamSupport.js.map