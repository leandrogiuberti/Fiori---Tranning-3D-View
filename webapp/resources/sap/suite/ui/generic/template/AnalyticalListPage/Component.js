sap.ui.define(["sap/ui/core/mvc/OverrideExecution","sap/suite/ui/generic/template/lib/TemplateAssembler","sap/suite/ui/generic/template/AnalyticalListPage/controller/ControllerImplementation","sap/ui/model/json/JSONModel","sap/suite/ui/generic/template/AnalyticalListPage/controllerFrameworkExtensions","sap/suite/ui/generic/template/js/preparationHelper","sap/base/util/deepExtend","sap/suite/ui/generic/template/listTemplates/filterSettingsPreparationHelper","sap/suite/ui/generic/template/js/StableIdHelper","sap/suite/ui/generic/template/js/AnnotationHelper","sap/base/util/isEmptyObject","sap/suite/ui/generic/template/AnalyticalListPage/util/AnnotationHelper","sap/suite/ui/generic/template/AnalyticalListPage/util/FilterUtil"],function(e,t,a,i,n,l,o,r,s,u,c,p,d){"use strict";function f(t,d){var f={};return{oControllerSpecification:{getMethods:a.getMethods.bind(null,f),oControllerDefinition:n,oControllerExtensionDefinition:{metadata:{methods:{onInitSmartFilterBar:{public:true,final:false,overrideExecution:e.After},provideExtensionAppStateData:{public:true,final:false,overrideExecution:e.After},restoreExtensionAppStateData:{public:true,final:false,overrideExecution:e.After},ensureFieldsForSelect:{public:true,final:false,overrideExecution:e.After},addFilters:{public:true,final:false,overrideExecution:e.After}}},onInitSmartFilterBar:function(e){},provideExtensionAppStateData:function(e){},restoreExtensionAppStateData:function(e){},ensureFieldsForSelect:function(e,t){},addFilters:function(e,t){}}},oComponentData:{templateName:"sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage",designtimePath:"sap/suite/ui/generic/template/designtime/floorplans/AnalyticalListPage.designtime"},init:function(){var e=t.getModel("_templPriv");e.setProperty("/listReport",{});e.setProperty("/alp",{visualFilter:{}});var a=new i;t.setModel(a,"_filter")},onActivate:function(){f.onComponentActivate()},refreshBinding:function(){f.refreshBinding()},onSuspend:function(){f.onSuspend()},onRestore:function(){f.onRestore()},getUrlParameterInfo:function(){return f.getUrlParameterInfo()},getTemplateSpecificParameters:function(e,a,i,n,f,g){function b(t){var a={sLineItemQualifier:"",sChartQualifier:""};var i="";if(V.quickVariantSelectionX){var n=h[V.quickVariantSelectionX.variants[t].annotationPath];if(n&&n.PresentationVariant){var l;if(n.PresentationVariant.Path){var o=n.PresentationVariant.Path.split("@")[1];l=o&&h[o]}else{l=n.PresentationVariant}i=l.Visualizations&&l.Visualizations[0].AnnotationPath}else if(n&&n.Visualizations){i=n.Visualizations[0].AnnotationPath}if(i&&i.indexOf("com.sap.vocabularies.UI.v1.LineItem")>-1){a.sLineItemQualifier=i.split("#")[1]||""}}else{var r=h.$path+"/com.sap.vocabularies.UI.v1.SelectionPresentationVariant"+(V&&V.qualifier?"#"+V.qualifier:"");var s=e.getObject(r);r=p.getAnnotationfromSPV(h,r,s,r,V?V.qualifier:"","PresentationVariant");var u=e.getObject(r);if(u&&u.Visualizations){u.Visualizations.forEach(function(e){var t="/"+e.AnnotationPath.slice(1);if(t.indexOf("com.sap.vocabularies.UI.v1.LineItem")>-1){a.sLineItemQualifier=(h.$path+t).split("#")[1]||""}else if(!V.chartPresentationQualifier&&t.indexOf("com.sap.vocabularies.UI.v1.Chart")>-1){a.sChartQualifier=(h.$path+t).split("#")[1]||""}})}}return a}function m(e){function t(t,a){var i={mAnnotatedActionsWithCommand:Object.create(null),mOutboundActionsWithCommand:Object.create(null)};t.forEach(function(t){switch(t.RecordType){case"com.sap.vocabularies.UI.v1.DataFieldForAction":var n=d.getToolbarDataFieldForActionCommandDetails(t,V,V.quickVariantSelectionX?V.quickVariantSelectionX.variants[e]:undefined,undefined,a);if(!c(n)){i.mAnnotatedActionsWithCommand[n.id]=n}break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":var n=d.getToolbarDataFieldForIBNCommandDetails(t,V,f,V.quickVariantSelectionX?V.quickVariantSelectionX.variants[e]:undefined,undefined,a);if(!c(n)){i.mOutboundActionsWithCommand[n.id]=n}break;default:break}});return i}var a=b(e);var i=t(h["com.sap.vocabularies.UI.v1.LineItem"+(a.sLineItemQualifier?"#"+a.sLineItemQualifier:"")]||[],false);var n=h["com.sap.vocabularies.UI.v1.Chart"+(a.sChartQualifier?"#"+a.sChartQualifier:"")];var l=t(n&&!c(n.Actions)?n.Actions:[],true);return{tableSettings:{commandExecution:o(i.mAnnotatedActionsWithCommand,i.mOutboundActionsWithCommand)},chartSettings:{commandExecution:o(l.mAnnotatedActionsWithCommand,l.mOutboundActionsWithCommand)}}}var y=d.getControllerExtensions();var S=e.getODataEntitySet(n);var v=l.getLineItemFromVariant(e,S.entityType,a.qualifier);var h=e.getODataEntityType(S.entityType);var V=o({},a);V.targetEntities={};V.targetEntities[S.entityType]=l.getTargetEntityForQuickView(e,S);V.tableSettings=l.getNormalizedTableSettings(e,a,i,n,y&&y.Actions,v);V.isSelflinkRequired=false;V.isIndicatorRequired=false;V.isSemanticallyConnected=true;V.rowHighligths="None";V.controlConfigurationSettings=r.getControlConfigurationSettings(V,h,S,g);function A(t,a){var i=e.getODataEntitySet(t);var n=e.getODataEntityType(i.entityType);var l,o,r;o=a.annotationPath;r=!!o&&n[o];if(r&&r.PresentationVariant){if(r.PresentationVariant.Visualizations){l=r.PresentationVariant.Visualizations[0].AnnotationPath}else if(r.PresentationVariant.Path){var s=r.PresentationVariant.Path.split("@")[1];var u=s&&n[s];l=u.Visualizations[0].AnnotationPath}}else if(r&&r.Visualizations){l=r.Visualizations[0].AnnotationPath}return!!(l&&l.indexOf("com.sap.vocabularies.UI.v1.Chart")>-1)}function P(t){if(!V.targetEntities[t.entityType]){V.targetEntities[t.entityType]=l.getTargetEntityForQuickView(e,t)}}function E(e,t){var a=d.getControllerExtensions();var i=[],n=[],l=Object.create(null),o=Object.create(null);Object.values(a&&a.Actions||{}).forEach(function(a){if(!a.global){var r=a.global?{type:"Action",subType:"Global",sAction:a.id}:{type:"ALPAction",subType:"ExtensionAction",sAction:a.id,sQuickVariantKey:e};var c=s.getStableId(r);a.enabled=u.getBreakoutActionEnabledKey(a,V.quickVariantSelectionX?V.quickVariantSelectionX.variants[t]:undefined);if(a.command){var p={id:c,action:a.command,callbackName:a.press};a.press="cmd:"+a.command;a.id=c}if(a.filter==="chart"){if(p){o[a.id]=p}n.push(a)}else{if(p){l[a.id]=p}i.push(a)}}});return{tableSettings:{commandExecution:l,extensionActions:i},chartSettings:{commandExecution:o,extensionActions:n}}}if(V.quickVariantSelectionX){var C=l.getNormalizedTableSettings(e,V,i,n,y&&y.Actions,v);var T=V.quickVariantSelectionX.variants||{};for(var I in T){var F=T[I].entitySet||n;var S=e.getODataEntitySet(F);if(!S){delete T[I];continue}T[I].isSmartChart=A(F,T[I]);if(!T[I].isSmartChart){var v=l.getLineItemFromVariant(e,e.getODataEntitySet(F).entityType,T[I].annotationPath&&T[I].annotationPath.split("#")[1]);T[I].tableSettings=T[I].tableSettings||C;T[I].tableSettings=l.getNormalizedTableSettings(e,T[I],i,F,y&&y.Actions,v);T[I].tableSettings.selectAll=T[I].tableSettings.selectAll===undefined?false:T[I].tableSettings.selectAll;if(V.isResponsiveTable===undefined){V.isResponsiveTable=T[I].tableSettings.type==="ResponsiveTable"}P(S);T[I].tableSettings=o(T[I].tableSettings,E(T[I].key,I).tableSettings,m(I).tableSettings)}}delete V.tableSettings;if(V.isResponsiveTable===undefined){V.isResponsiveTable=true}}else{V.tableSettings=l.getNormalizedTableSettings(e,a,i,n,y&&y.Actions,v);V.tableSettings.selectAll=V.tableSettings.selectAll===undefined?false:V.tableSettings.selectAll;V.isResponsiveTable=V.tableSettings.type==="ResponsiveTable";if(V.tableSettings.enableMultiEditDialog&&V.isResponsiveTable&&!d.isDraftEnabled()&&!V.isWorklist&&!t.getAppComponent().getFlexibleColumnLayout()){V.multiEdit=true;if(S["Org.OData.Capabilities.V1.UpdateRestrictions"]&&S["Org.OData.Capabilities.V1.UpdateRestrictions"].Updatable&&S["Org.OData.Capabilities.V1.UpdateRestrictions"].Updatable.Bool==="false"){V.multiEdit=false}else if(V.tableSettings.mode==="None"){V.tableSettings.mode=V.tableSettings.multiSelect?"MultiSelect":"SingleSelectLeft"}}P(S);var O=E();var x=m();V.tableSettings=o(V.tableSettings,O.tableSettings,x.tableSettings);V.chartSettings=o(V.chartSettings,O.chartSettings,x.chartSettings)}var k=t.getModel("_templPrivGlobal");V.bInsightsEnabled=!!k.getProperty("/generic/insights/oInsightsInstance");return V},overwrite:{updateBindingContext:function(){sap.suite.ui.generic.template.lib.TemplateComponent.prototype.updateBindingContext.apply(t,arguments)}},executeBeforeInvokeActionFromExtensionAPI:function(e,t){if(e.oSmartTable){e.oSmartTable.getTable().attachEventOnce("updateFinished",function(){t.setEnabledToolbarButtons(e.oSmartTable);t.setEnabledFooterButtons(e.oSmartTable)})}if(e.oSmartChart){e.oSmartChart.getChartAsync().then(function(a){a.attachEventOnce("updateFinished",function(){t.setEnabledToolbarButtons(e.oSmartChart);t.setEnabledFooterButtons(e.oSmartChart)})})}}}}return t.getTemplateComponent(f,"sap.suite.ui.generic.template.AnalyticalListPage",{metadata:{library:"sap.suite.ui.generic.template",properties:{qualifier:{type:"string",defaultValue:""},chartPresentationQualifier:{type:"string",defaultValue:""},gridTable:{type:"boolean",defaultValue:false},tableType:{type:"string",defaultValue:""},multiSelect:{type:"boolean",defaultValue:false},tableSettings:{type:"object",properties:{type:{type:"string",defaultValue:undefined},multiSelect:{type:"boolean",defaultValue:false},selectAll:{type:"boolean",defaultValue:true},selectionLimit:{type:"int",defaultValue:200},threshold:{type:"int",defaultValue:100},scrollThreshold:{type:"int",defaultValue:300}}},chartSettings:{type:"object",properties:{showDataLabel:{type:"boolean",defaultValue:false},addCardtoInsightsHidden:{type:"boolean",defaultValue:false}}},smartVariantManagement:{type:"boolean",defaultValue:true},defaultContentView:{type:"string",defaultValue:"charttable"},lazyLoadVisualFilter:{type:"boolean",defaultValue:true},defaultFilterMode:{type:"string",defaultValue:"visual"},keyPerformanceIndicators:"array",autoHide:{type:"boolean",defaultValue:true},showAutoHide:{type:"boolean",defaultValue:true},hideVisualFilter:{type:"boolean",defaultValue:false},showGoButtonOnFilterBar:{type:"boolean",defaultValue:false},uniqueHierarchyNodeIDForTreeTable:{type:"string",defaultValue:""},showItemNavigationOnChart:{type:"boolean",defaultValue:false},condensedTableLayout:{type:"boolean",defaultValue:true},contentTitle:{type:"string",defaultValue:undefined},enableTableFilterInPageVariant:{type:"boolean",defaultValue:false},filterDefaultsFromSelectionVariant:{type:"boolean",defaultValue:false},allFiltersAsInParameters:{type:"boolean",defaultValue:true},dataLoadSettings:{type:"object",properties:{loadDataOnAppLaunch:{type:"string",defaultValue:"ifAnyFilterExist"}}},filterSettings:r.getFilterSettingsMetadata(),refreshIntervalInMinutes:{type:"int"},quickVariantSelection:{type:"object",properties:{showCounts:{type:"boolean",defaultValue:false},variants:{type:"object",mapEntryProperties:{key:{type:"string",optional:true},annotationPath:{type:"string"}}}}},quickVariantSelectionX:{type:"object",properties:{showCounts:{type:"boolean",defaultValue:false},enableAutoBinding:{type:"boolean",defaultValue:false},variants:{type:"object",mapEntryProperties:{key:{type:"string",optional:true},annotationPath:{type:"string"},entitySet:{type:"string",optional:true},tableSettings:{type:"object",properties:{type:{type:"string",defaultValue:undefined},multiSelect:{type:"boolean",defaultValue:false},selectAll:{type:"boolean",defaultValue:false},selectionLimit:{type:"int",defaultValue:200}}}}}}}},manifest:"json"}})});
//# sourceMappingURL=Component.js.map