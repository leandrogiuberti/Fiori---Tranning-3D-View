sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/ResponsivePopover","sap/m/library","sap/base/util/deepExtend","sap/m/DynamicDateRange","sap/ui/core/format/DateFormat"],function(e,a,t,n,i,l){"use strict";var r=e.extend("sap.suite.ui.generic.template.AnalyticalListPage.controller.DynamicDateRangeController",{});sap.suite.ui.generic.template.AnalyticalListPage.controller.DynamicDateRangeController.createDynamicDateRange=function(e){this._oDynamicDateRange=new i({standardOptions:e,hideInput:true});return this._oDynamicDateRange};sap.suite.ui.generic.template.AnalyticalListPage.controller.DynamicDateRangeController.openDynamicDateRange=function(e,a){var t=e.getParent().getContent();this._oDynamicDateRange=t[t.length-1];this._oDynamicDateRange.attachChange(this._handleDynamicDateRangeSelect.bind(this));this._oChart=a;if(a.getDimensionFilter()){this._setSelectedDate(a.getDimensionFilter())}else if(this._oOldDate){this._removeAllDynamicDateSelections()}this._oDynamicDateRange.openBy(e)};sap.suite.ui.generic.template.AnalyticalListPage.controller.DynamicDateRangeController._setSelectedDate=function(e){var a={operator:null,values:[]};if(e&&e.ranges&&e.ranges.length){for(var t in e.ranges){if(e.ranges[t]&&e.ranges[t].value1){a.operator=e.conditionTypeInfo.data.operation;if(typeof e.ranges[t].value1==="string"){var n=l.getDateInstance({pattern:"yyyyMMdd"});var i=n.parse(e.ranges[t].value1);a.values.push(i)}else{a.values.push(e.ranges[t].value1)}}}this._oDynamicDateRange.setValue(a);this._oOldDate=a}else{this._oDynamicDateRange.setValue(null);this._oOldDate=null}};sap.suite.ui.generic.template.AnalyticalListPage.controller.DynamicDateRangeController._handleDynamicDateRangeSelect=function(e){var a=n({},this._oChart.getDimensionFilter());var t=e.getParameter("value");if(JSON.stringify(this._oOldDate)===JSON.stringify(t)){this._removeAllDynamicDateSelections();this._oChart.setDimensionFilter(null)}else{a.conditionTypeInfo.data.operation=t.operator;a.conditionTypeInfo.data["value1"]=t.values[0];a.ranges=[];this._oChart.setDimensionFilter(a)}this._oDynamicDateRange.detachChange(this._handleDynamicDateRangeSelect);this._oChart.fireFilterChange()};sap.suite.ui.generic.template.AnalyticalListPage.controller.DynamicDateRangeController._removeAllDynamicDateSelections=function(){this._oDynamicDateRange.setValue(null);this._oOldDate=null};return r});
//# sourceMappingURL=DynamicDateRangeController.js.map