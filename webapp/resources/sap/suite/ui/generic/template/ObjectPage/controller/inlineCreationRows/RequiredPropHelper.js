sap.ui.define(["sap/ui/base/Object","sap/base/util/extend","sap/base/util/deepEqual","sap/ui/core/message/Message","sap/ui/core/message/MessageType","sap/suite/ui/generic/template/genericUtilities/controlHelper","sap/suite/ui/generic/template/lib/MessageUtils"],function(e,t,n,r,i,a,o){"use strict";function s(e,t,a,s,u,l){var g=t.data("inlineCreationRowsConfig").requiredProps;var c=g.length>0;var f=e.oServices.oCRUDManager.getUnfilledProperties.bind(null,g);var d=u.getBindingContext().getPath();var p=[];var v=new Map;var R=false;var h=true;t.attachUiStateChange(M);function P(){var e=u.getBindingContext().getPath();if(e===d){return}d=e;R=false;h=true;C()}function m(){if(!h){return}h=false;E()}function C(){var e=[];Array.from(v.entries()).forEach(function(t){var n=t[0],r=t[1];if(r.length>0){e=e.concat(r);v.set(n,[])}});o.deleteMessages(e)}function E(){var e=b();if(e.length>0){I(e);R=true;U()}else{p=[];O()}}function U(){p=a.findHiddenColumnProperties(g);O()}function M(e){if(!R){return}var t=a.findHiddenColumnProperties(g);var r=!n(p,t);if(r){p=t;O()}}function b(){return a.getBinding().getAllCurrentContexts().filter(function(e){return e.isInactive()&&v.has(e.getPath())})}function I(e){e.forEach(function(e){D(e,true)})}function O(){var e=p&&p.length>0?{message:T(p),type:i.Error}:null;l.setTechnicalMessage(e,t.getId())}function _(e){return D(e)}function D(e,t){var n=e.getPath(),r=v.get(n);if(!c){return true}if(!R&&!t){R=true;U()}if(r&&r.length>0){o.deleteMessages(r);v.delete(n)}var i=f(e),a=i.length>0;if(a){var s=x(e,i);v.set(n,s)}return!a}function x(e,n){var a=e.getPath(),o=t.getModel(),s=sap.ui.getCore().getMessageManager(),u=[];n.forEach(function(t){var n=e.getDeepPath()+"/"+t,l=a+"/"+t,g=y(t);var c=new r({message:g,persistent:false,validation:true,technical:false,target:l,fullTarget:n,type:i.Error,processor:o});s.addMessages(c);u.push(c.id)});return u}function y(t){var n=H(t);return e.oCommonUtils.getSpecializedText("REQUIRED_PROP_ERROR",n)}function H(n){var r=e.oCommonUtils.getSpecificI18nKeyForSmartControl(t.getId());return r+"|"+n}function T(t){var n=t.map(function(e){return j(e)});var r=n.join(", ");var i=t.length>1?"REQUIRED_PROP_COLUMN_HIDDEN_ERROR_PLURAL":"REQUIRED_PROP_COLUMN_HIDDEN_ERROR";return e.oCommonUtils.getText(i,[r])}function j(n){var r=e.oInfoObjectHandler.getControlInformation(t.getId());var i=r.getColumnKeyForProperty(n);return a.getColumnLabel(i)}return{getUnfilledRequiredProps:f,handleActivateRow:_,onBeforeRebindObjectPage:P,onTableDataReceived:m}}return e.extend("sap.suite.ui.generic.template.ObjectPage.controller.inlineCreationRows.RequiredPropHelper",{constructor:function(e,n,r,i,a,o){t(this,s(e,n,r,i,a,o))}})});
//# sourceMappingURL=RequiredPropHelper.js.map