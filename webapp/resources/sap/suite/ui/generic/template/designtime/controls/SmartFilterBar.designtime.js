/*!
* SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
*/
sap.ui.define(["sap/base/util/deepClone","sap/suite/ui/generic/template/designtime/utils/designtimeUtils","sap/base/util/ObjectPath","sap/suite/ui/generic/template/genericUtilities/testableHelper"],function(e,t,n,i){"use strict";const a="sap.suite.ui.generic.template.ListReport";const r="sap.suite.ui.generic.template.AnalyticalListPage";function o(e,t){const n={};e.forEach(e=>{const i=e.id;switch(i){case"useDateRange":n[i]=t[i]??e.value;break;case"navigationProperties":n[i]=t[i]??e.value;break;case"showGoButtonOnFilterBar":n[i]=t[i]??e.value;break;case"hideVisualFilter":n[i]=t[i]??e.value;break;case"defaultFilterMode":n[i]=t[i]??e.value;break;default:break}});return n}function s(e){function t(e){return(e.navigationProperty||[]).map(e=>e.name)}function n(e){const t=["SiblingEntity","DraftAdministrativeData"];return!t.includes(e)}function i(e,t,n){const i=e.getODataAssociationEnd(t,n).multiplicity;return i.endsWith("1")}const a=e.getModel().getMetaModel();const r=e.getEntitySet?.();if(!r){throw new Error("Error while retrieving the entity set of the SmartFilterBar control")}const o=a.getODataEntityType(a.getODataEntitySet(r).entityType);return t(o).filter(e=>i(a,o,e)).filter(n)}let u=function e(n){let i=t.getResourceBundle(n);function o(e){return e.map(e=>({id:e,name:e}))}const u={id:"useDateRange",name:i.getText("RTA_ENABLE_DATE_RANGE_FILTER"),description:i.getText("RTA_ENABLE_DATE_RANGE_FILTER_DESC"),value:true,type:"boolean",getPath:function(e){return`component/settings/filterSettings/dateSettings/useDateRange`},restrictedTo:[a,r],keyUser:true};const l={id:"navigationProperties",name:i.getText("RTA_NAVIGATION_PROPERTIES_LIST_REPORT_FILTER"),description:i.getText("RTA_NAVIGATION_PROPERTIES_LIST_REPORT_FILTER_DESC"),type:"string[]",getPath:function(e){return`component/settings/filterSettings/navigationProperties`},value:[],restrictedTo:[a],enums:o(s(n)),keyUser:true};const c={id:"showGoButtonOnFilterBar",name:i.getText("RTA_SHOW_GO_BUTTON_ON_FILTER_BAR_ANALYTICAL_PAGE"),description:i.getText("RTA_SHOW_GO_BUTTON_ON_FILTER_BAR_ANALYTICAL_PAGE_DESC"),value:false,type:"boolean",getPath:function(e){return`component/settings/showGoButtonOnFilterBar`},restrictedTo:[r],keyUser:true};const g={id:"hideVisualFilter",name:i.getText("RTA_HIDE_VISUAL_FILTER"),description:i.getText("RTA_HIDE_VISUAL_FILTER_DESC"),value:false,type:"boolean",getPath:function(e){return`component/settings/hideVisualFilter`},restrictedTo:[r],keyUser:true};const T={id:"defaultFilterMode",name:i.getText("RTA_DEFAULT_FILTER_MODE"),description:i.getText("RTA_DEFAULT_FILTER_MODE_DESC"),value:"visual",type:"string",enums:[{id:"visual",name:"Visual"},{id:"compact",name:"Compact"}],getPath:function(e){return`component/settings/defaultFilterMode`},restrictedTo:[r],keyUser:true};return[u,l,T,c,g]};function l(e){const t=e.getFilterSettings();return{useDateRange:n.get("dateSettings.useDateRange",t),navigationProperties:n.get("navigationProperties",t),hideVisualFilter:!!e.getHideVisualFilter?.(),defaultFilterMode:e.getDefaultFilterMode?.(),showGoButtonOnFilterBar:!!e.getShowGoButtonOnFilterBar?.()}}async function c(n,i){const a=n.getModel("i18n");const r=t.getOwnerComponentFor(n);const s=l(r);const c=u(n);let g=t.filterDesigntimeSettingsByFloorPlan(n,c);g=t.getAllowedDesigntimeSettingsBasedOnAdaptationMode(g,r);const T=o(g,s);const _=e(T);const d=t.getSettings(T,g);const p=await t.openAdaptionDialog([...d],T,_,"{i18n>RTA_CONFIGURATION_TITLE_FILTER_BAR}",{width:"650px",height:"800px"},a);const E={sChangeType:t.ChangeType.ChangePageConfiguration};return t.extractChanges(p,_,g,r,E)}i.testableStatic(c,"fnOpenTableConfigurationDialog");const g={getDesigntime:function(e){return{actions:{settings:{fe:{name:t.getResourceBundle(e).getText("RTA_CONTEXT_MENU_CONFIG"),icon:"sap-icon://developer-settings",handler:c}}}}}};return g});
//# sourceMappingURL=SmartFilterBar.designtime.js.map