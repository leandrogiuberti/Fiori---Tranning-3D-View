/*!
* SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
*/
sap.ui.define(["sap/base/util/deepClone","sap/base/util/merge","sap/suite/ui/generic/template/designtime/utils/designtimeUtils","sap/suite/ui/generic/template/genericUtilities/testableHelper"],function(e,t,n,a){"use strict";const s="sap.suite.ui.generic.template.ObjectPage";const o="sap.suite.ui.generic.template.ListReport";const{SettingScope:i}=n;function l(e){const t=n.getLocalId(e);return t.split("-")[1]}function c(e,t){const n=e.getQuickVariantSelectionX();const a=n?.variants||{};const s=Object.entries(a).find(([e,n])=>n.key===t);if(!s?.length){throw new Error("Error while retrieving the variant info for the selected tab")}return s}function r(e){const a=n.getOwnerComponentFor(e);const o=a.getAppComponent();const i=n.getSupportedGlobalManifestSettings(o)?.["tableSettings"]||{};let r;if(a.getMetadata().getComponentName()===s){const n=a.getSections();const s=d(e);const o=n?.[s]?.tableSettings||{};const l={createMode:e.data("creationMode")};r=t(i,o,l)}else{const n=a.getTableSettings()||{};let s={};if(a.getQuickVariantSelectionX?.()){const t=l(e);const n=c(a,t);const[,o]=n;s=o.tableSettings||{}}r=t(i,n,s)}return r}function d(e){const t=n.getLocalId(e);return t.split("::Table")[0]}function g(e,t){const n={};e.forEach(e=>{const a=e.id;switch(a){case"type":n[a]=t.type??e.value;break;case"multiSelect":n[a]=t.multiSelect??e.value;break;case"createMode":n[a]=t.createMode??e.value;break;case"selectAll":n[a]=t.selectAll??e.value;break;case"condensedTableLayout":n[a]=t.condensedTableLayout??e.value;break;case"widthIncludingColumnHeader":n[a]=t.widthIncludingColumnHeader??e.value;break;case"addCardtoInsightsHidden":n[a]=t.addCardtoInsightsHidden??e.value;break;case"selectionLimit":n[a]=t.selectionLimit??e.value;break;case"threshold":n[a]=t.threshold??e.value;break;case"scrollThreshold":n[a]=t.scrollThreshold??e.value;break;default:break}});return n}async function u(t,a){const o=t.isA("sap.ui.comp.smarttable.SmartTable")?t:t.getParent();if(!o.isA("sap.ui.comp.smarttable.SmartTable")){throw new Error("The SmartTable control could not be found")}const u=o.getModel("i18n");const T=n.getOwnerComponentFor(o);const S=T.getMetadata().getComponentName();const b=p(o,t);let _=n.filterDesigntimeSettingsByFloorPlan(o,b);_=n.getAllowedDesigntimeSettingsBasedOnAdaptationMode(_,T);const m=["condensedTableLayout"];const C=m.reduce((e,t)=>{e[t]=T.getProperty(t);return e},{});const E=r(o);const A=g(_,Object.assign(C,E));const h=e(A);const R=n.getSettings(A,_);const O={type:"string",enum:[{id:i.Page,name:i.Page}],value:i.Page,id:"scope",disabled:false};const L=[{label:u.getResourceBundle().getText("RTA_SCOPE_OF_THE_CHANGES"),tooltip:u.getResourceBundle().getText("RTA_SCOPE_OF_THE_CHANGES_TOOLTIP"),control:[O]}];const f=T.getQuickVariantSelectionX?.();if(f){O.enum.push({id:i.Control,name:i.Control})}const y=_.some(e=>e.bSupportsGlobalScope&&!e.bGlobalSettingsOnly);if(y){O.enum.push({id:i.Application,name:i.Application})}O.disabled=O.enum.length<=1;const I=await n.openAdaptionDialog([...L,...R],A,h,"{i18n>RTA_CONFIGURATION_TITLE_TABLE}",{width:"650px",height:"800px"},u);const D=l(o);const N=D?c(T,D)[0]:null;I["scope"]=I["scope"]||i.Page;h["scope"]=h["scope"]||i.Page;const P={sChangeType:n.ChangeType.ChangePageConfiguration,sParentComponentName:S,sSectionKey:S===s?d(o):null,sSelectedVariantKey:N,sScope:I["scope"]};return n.extractChanges(I,h,_,T,P)}let T=function e(t,n=false){return function(e){if(e.sParentComponentName===s){return`component/settings/sections/${e.sSectionKey}/tableSettings/${t}`}else{let a=`component/settings/tableSettings/${t}`;if(e.sScope===i.Application&&n){a=`settings/tableSettings/${t}`}if(e.sScope===i.Control&&e.sSelectedVariantKey){a=`component/settings/quickVariantSelectionX/variants/${e.sSelectedVariantKey}/tableSettings/${t}`}return a}}};let p=function e(t,a){let i=n.getResourceBundle(a);const l={id:"type",name:i.getText("RTA_TABLE_TYPE_CONFIG"),description:i.getText("RTA_TABLE_TYPE_DESC_CONFIG"),value:"ResponsiveTable",type:"string",getPath:T("type"),enums:[{id:"ResponsiveTable",name:"Responsive Table"},{id:"GridTable",name:"Grid Table"},{id:"TreeTable",name:"Tree Table"},{id:"AnalyticalTable",name:"Analytical Table"}],bSupportsGlobalScope:false,keyUser:false};const c={id:"multiSelect",name:i.getText("RTA_SELECTION_MODE"),description:i.getText("RTA_SELECTION_MODE_DESC"),value:false,type:"booleanOrString",getPath:T("multiSelect"),bSupportsGlobalScope:false,enums:[{id:"false",name:"Single"},{id:"true",name:"Multi"}],keyUser:true};const r={id:"selectAll",name:i.getText("RTA_SELECT_ALL"),description:i.getText("RTA_SELECT_ALL_DESC"),value:false,type:"boolean",getPath:T("selectAll"),bSupportsGlobalScope:false,keyUser:true};const d={id:"createMode",name:i.getText("RTA_CREATE_MODE"),description:i.getText("RTA_CREATE_MODE_DESC"),value:"creationRows",type:"string",getPath:e=>`component/settings/sections/${e.sSectionKey}/createMode`,enums:[{id:"newPage",name:"New Page"},{id:"inline",name:"Inline"},{id:"creationRows",name:"Inline Creation Rows"},{id:"creationRowsHiddenInEditMode",name:"Inline Creation Rows (Hidden in edit page)"}],bSupportsGlobalScope:true,restrictedTo:[s],keyUser:true};const g={id:"condensedTableLayout",name:i.getText("RTA_CONDENSED_TABLE_LAYOUT"),description:i.getText("RTA_CONDENSED_TABLE_LAYOUT_DESC"),value:false,type:"boolean",getPath:()=>"component/settings/condensedTableLayout",bSupportsGlobalScope:false,keyUser:true};const u={id:"widthIncludingColumnHeader",name:i.getText("RTA_WIDTH_INCLUDING_COLUMN_HEADER"),description:i.getText("RTA_WIDTH_INCLUDING_COLUMN_HEADER_DESC"),value:false,type:"boolean",getPath:T("widthIncludingColumnHeader"),bSupportsGlobalScope:true,bGlobalSettingsOnly:true,keyUser:true};const p={id:"addCardtoInsightsHidden",name:i.getText("RTA_DISABLE_ADD_CARD_TO_INSIGHTS"),description:i.getText("RTA_DISABLE_ADD_CARD_TO_INSIGHTS_DESC"),value:false,type:"boolean",getPath:T("addCardtoInsightsHidden"),restrictedTo:[o],keyUser:true};const S={id:"selectionLimit",name:i.getText("RTA_SELECTION_LIMIT"),description:i.getText("RTA_SELECTION_LIMIT_DESC"),value:300,type:"number",getPath:T("selectionLimit"),keyUser:true};const b={id:"threshold",name:i.getText("RTA_THRESHOLD_FOR_TABLE_CONFIG"),description:i.getText("RTA_THRESHOLD_DESC_FOR_TABLE_CONFIG"),value:100,type:"number",getPath:T("threshold"),keyUser:true};const _={id:"scrollThreshold",name:i.getText("RTA_SCROLLTHRESHOLD_FOR_TABLE_CONFIG"),description:i.getText("RTA_SCROLLTHRESHOLD_DESC_FOR_TABLE_CONFIG"),value:300,type:"number",getPath:T("scrollThreshold"),keyUser:true};const m=[l,g,u,c,r,d,S,b,_,p];return m.filter(e=>{const a=n.getOwnerComponentFor(t).getMetadata().getComponentName();return!e.restrictedTo||e.restrictedTo.includes(a)})};p=a.testableStatic(p,"getAllDesigntimeSettings");T=a.testableStatic(T,"getPathForTableSettings");a.testableStatic(g,"getRuntimeAdaptationProperties");a.testableStatic(r,"getManifestTableSettings");a.testableStatic(l,"getSelectedTabKey");a.testableStatic(c,"getVariantInfo");a.testableStatic(u,"fnOpenTableConfigurationDialog");const S={getDesigntime:function(e){return{actions:{settings:{fe:{name:n.getResourceBundle(e).getText("RTA_CONTEXT_MENU_CONFIG"),icon:"sap-icon://developer-settings",handler:u}}}}}};return S});
//# sourceMappingURL=SmartTable.designtime.js.map