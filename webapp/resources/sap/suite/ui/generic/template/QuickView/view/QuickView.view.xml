<mvc:View
	xmlns:mvc="sap.ui.core.mvc"
	xmlns="sap.m"
	xmlns:core="sap.ui.core"
	xmlns:f="sap.ui.layout.form"
	controllerName="sap.suite.ui.generic.template.QuickView.view.QuickView"
	xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"
	xmlns:smart="sap.ui.comp.smartfield"
	xmlns:fiori="sap.f"
	xmlns:html="http://www.w3.org/1999/xhtml"
	xmlns:semantic="sap.m.semantic"
	xmlns:fe="sap.suite.ui.generic.template.genericUtilities"
	template:require="{AH: 'sap/suite/ui/generic/template/js/AnnotationHelper',
					   AHModel: 'sap/ui/model/odata/AnnotationHelper',
					   AHQuickTemplates: 'sap/suite/ui/generic/template/js/QuickTemplates/AnnotationHelper'}">

	<!-- <FlexBox class="sapQuickViewTitle" width="100%" alignItems="Start" justifyContent="Start">
		<template:with path="entitySet>entityType" helper="AHModel.gotoEntityType" var="entityType">
			<template:with path="entityType>com.sap.vocabularies.UI.v1.QuickViewFacets" helper="AHQuickTemplates.resolveFieldGroupTarget" var="target">
				<Text text="{path: 'target>Label', formatter: 'AH.formatWithExpandSimple'}" class="sapQuickViewTextTitle"/>
			</template:with>
		</template:with>
	</FlexBox> -->

	<FlexBox visible="{= ${badge>/fallbackBadgeVisible}}" width="100%" alignItems="Start" justifyContent="Start">
		<template:with path="entitySet>entityType" helper="AHModel.gotoEntityType" var="entityType">
			<template:with path="entityType>" helper="AHQuickTemplates.resolveBadgeTarget" var="badge">
				<HBox alignItems="Left" justifyContent="Left" width="100%">
					<template:if test="{badge>ImageUrl}">
						<template:then>
							<FlexBox alignItems="Start" justifyContent="Center">
								<Avatar 
									src="{path: 'badge>ImageUrl', formatter: 'AHModel.format'}"
									class="sapUiSmallMarginEnd sapQuickViewBadgeImageBorder"
									displaySize="L"
									displayShape="Square">
								</Avatar>
							</FlexBox>
						</template:then>
					</template:if>
					<template:if test="{badge>TypeImageUrl}">
						<template:then>
							<FlexBox alignItems="Start" justifyContent="Center" class="sapQuickViewBadgeIconPadding">
								<core:Icon src="{path: 'badge>TypeImageUrl', formatter: 'AHModel.format'}" class="sapUiSmallMarginEnd sapQuickViewBadgeIcon"/>
							</FlexBox>
						</template:then>
					</template:if>
					<VBox alignItems="Start" justifyContent="Center" class="sapUiTinyMarginEnd">
						<Text text="{path: 'badge>Title', formatter: 'AHModel.format'}" class="sapQuickViewBadgeTitle"/>
						<Text text="{path: 'badge>TypeName', formatter: 'AHModel.format'}" class="sapQuickViewBadgeSubtitle sapQuickViewBadgeTinyMarginTop"/>
						<Text text="{path: 'badge>SubTitle', formatter: 'AHModel.format'}" class="sapQuickViewBadgeSubtitle sapQuickViewBadgeTinyMarginTop"/>
					</VBox>
				</HBox>
			</template:with>
		</template:with>
	</FlexBox>

	<FlexBox visible="{=${badge>/badgeVisible}}" width="100%" alignItems="Start" justifyContent="Start">
		<HBox alignItems="Left" justifyContent="Left" width="100%">
			<FlexBox visible="{=${badge>/imgUrlDefined}}" alignItems="Start" justifyContent="Center">
				<Avatar 
					src="{badge>/imgUrl}"
					class="sapUiSmallMarginEnd sapQuickViewBadgeImageBorder"
					displaySize="L"
					displayShape="Square">
				</Avatar>
			</FlexBox>
			<FlexBox visible="{=${badge>/typeImgUrlDefined}}" alignItems="Start" justifyContent="Center" class="sapQuickViewBadgeIconPadding">
				<core:Icon src="{badge>/typeImgUrl}" class="sapUiSmallMarginEnd sapQuickViewBadgeIcon"/>
			</FlexBox>
			<VBox alignItems="Start" justifyContent="Center" class="sapUiTinyMarginEnd">
				<Text text="{badge>/title}" class="sapQuickViewBadgeTitle"/>
				<Text text="{badge>/typeName}" class="sapQuickViewBadgeSubtitle sapQuickViewBadgeTinyMarginTop"/>
				<Text text="{badge>/subtitle}" class="sapQuickViewBadgeSubtitle sapQuickViewBadgeTinyMarginTop"/>
			</VBox>
		</HBox>
	</FlexBox>

	<VBox class="quickTemplateVBox quickViewParent">
		<template:with path="entitySet>entityType" helper="AHModel.gotoEntityType" var="entityType">
			<template:with path="entityType>com.sap.vocabularies.UI.v1.QuickViewFacets" helper="AHQuickTemplates.resolveFieldGroupTarget" var="target">
				<f:SimpleForm
					layout="ResponsiveGridLayout"
					labelSpanXL="4"
					labelSpanL="4"
					labelSpanM="12"
					labelSpanS="12"
					adjustLabelSpan="false"
					emptySpanXL="0"
					emptySpanL="0"
					emptySpanM="0"
					emptySpanS="0"
					columnsXL="2"
					columnsL="1"
					columnsM="1"
					singleContainerFullSize="false">
					<f:content>
						<template:repeat list="{target>Data}" var="dataField">
							<template:if test="{dataField>Label}">
								<template:then>
									<Label
										labelFor="field::{path: 'dataField>', formatter: 'AH.getStableIdPartFromDataField'}"
										
										text="{path: 'dataField>Label', formatter: 'AH.formatWithExpandSimple'}" class="sapQuickViewSmartFieldLabel"/>
								</template:then>
								<template:else>
									<smart:SmartLabel labelFor="field::{path: 'dataField>', formatter: 'AH.getStableIdPartFromDataField'}" class="sapQuickViewSmartFieldLabel"/>
								</template:else>
							</template:if>
							
							<template:if test="{= ${dataField>RecordType} === 'com.sap.vocabularies.UI.v1.DataFieldWithUrl'}">
								<template:then>
									<fe:Link id="field::{path: 'dataField>', formatter: 'AH.getStableIdPartFromDataField'}"
										target="_blank"
										text="{path: 'dataField>Value', formatter: 'AHModel.format'}"
										href="{= ${dataField>Url} ? ${path: 'dataField>Url', formatter: 'AHModel.format'} : ''}"
										class="sapQuickViewTextTitle"/>
								</template:then>
								<template:else>
									<smart:SmartField
										id="field::{path: 'dataField>', formatter: 'AH.getStableIdPartFromDataField'}"
										editable="false"
										enabled="true"
										contextEditable="false"
										clientSideMandatoryCheck="false"
										value="{path: 'dataField>Value', formatter: 'AHModel.format'}"
										url="{= ${dataField>Url} ? ${path: 'dataField>Url', formatter: 'AHModel.format'} : ''}"
										innerControlsCreated="onSmartFieldsCreated"
										class="sapQuickViewTextTitle"/>
								</template:else>
							</template:if>
						</template:repeat>
					</f:content>
                </f:SimpleForm>
			</template:with>

			<template:with path="entityType>com.sap.vocabularies.UI.v1.QuickViewFacets" helper="AHQuickTemplates.resolveLineItemFacet" var="facet">
				<template:if test="{path: 'facet>Target', formatter: 'AHModel.isMultiple'}">
					<template:then>
						<template:with path="facet>Target" helper="AHModel.resolvePath" var="target">
							<HBox width="100%" alignItems="Center" justifyContent="Center" class="sapQuickViewLineItemTable">
								<Table
									id="LineItemsSmartTable"
									backgroundDesign="Translucent"
									items="{parts:[{path:'entitySet>entityType'}, {path: 'parameter>/isDraftEnabled'}], formatter: 'AHQuickTemplates.formatBindingPathForLineItems'}">
									<headerToolbar>
										<Toolbar>
											<template:with path="facet>Target" helper="AHModel.gotoEntitySet" var="listEntitySet">
												<template:with path="listEntitySet>entityType" helper="AHModel.gotoEntityType" var="listEntityType">
													<Title text="{listEntityType>com.sap.vocabularies.UI.v1.HeaderInfo/TypeNamePlural/String}" level="h6"/>
												</template:with>
											</template:with>
										</Toolbar>
									</headerToolbar>
									<columns>
										<template:repeat list="{target>}" var="dataField">
											<template:with path="dataField>Value" helper="AHModel.resolvePath" var="dataFieldValue">
												<Column>
													<template:if test="{dataField>Label}">
														<template:then>
															<Text text="{path: 'dataField>Label', formatter: 'AHModel.format'}"/>
														</template:then>
														<template:else>
															<Text text="{path: 'dataFieldValue>com.sap.vocabularies.Common.v1.Label', formatter: 'AHModel.format'}"/>
														</template:else>
													</template:if>
												</Column>
											</template:with>
										</template:repeat>
										<!-- <template:repeat list="{target>}" var="columnItemField">
							 													 <Column>
							 														 			<Text text="{path: 'columnItemField>Label', formatter: 'AHModel.format'}"/>
							 													 </Column>
							 												 </template:repeat> -->
									</columns>
									<items>
										<ColumnListItem>
											<cells>
												<template:repeat list="{target>}" var="columnItemFieldValue">
													<smart:SmartField
														editable="false"
														clientSideMandatoryCheck="false"
														enabled="true"
														contextEditable="false"
														value="{path: 'columnItemFieldValue>Value', formatter: 'AHModel.format'}"
														url="{= ${columnItemFieldValue>Url} ? ${path: 'columnItemFieldValue>Url', formatter: 'AHModel.format'} : ''}"
														innerControlsCreated="onSmartFieldsCreated"/>
												</template:repeat>
											</cells>
										</ColumnListItem>
									</items>
								</Table>
							</HBox>
						</template:with>

					</template:then>
				</template:if>
			</template:with>
		</template:with>
	</VBox>
</mvc:View>
