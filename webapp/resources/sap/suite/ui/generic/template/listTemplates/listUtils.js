sap.ui.define(["sap/ui/core/message/MessageType","sap/fe/navigation/SelectionVariant","sap/ui/model/odata/AnnotationHelper","sap/base/util/extend","sap/ui/model/Context"],function(e,t,r,a,n){"use strict";var o="msg";function i(t,r,a){var n=r.getParameter("bindingParams");n.events=n.events||{};n.events.aggregatedDataStateChange=function(r){var n=t.oServices.oApplication.getBusyHelper();if(n.isBusy()||r.getSource().getLength()){return}var i=r.getParameter("dataState");var s=i.getMessages().filter(function(t){var n=!a.oMessageStripHelper||!a.oMessageStripHelper.isCustomMessage(t);return t.target===r.getSource().getPath()&&t.getType()===e.Error&&n});if(s.length){var g=sap.ui.getCore().getMessageManager();g.removeMessages(s);var c,p,m;t.oCommonUtils.getDialogFragmentAsync("sap.suite.ui.generic.template.listTemplates.fragments.MessagesOnRetrieval",{itemSelected:function(){p.setProperty("/backbtnvisibility",true)},onBackButtonPress:function(){m.navigateBack();p.setProperty("/backbtnvisibility",false)},onReject:function(){m.navigateBack();c.close()}},o,function(e){m=e.getContent()[0]}).then(function(e){c=e;p=c.getModel(o);p.setProperty("/messages",s);p.setProperty("/backbtnvisibility",false);c.open()})}}}function s(e){var r=new t;var a,n;e.forEach(function(e){a=e.getSelectOptionsPropertyNames();a.forEach(function(t){r.removeParameter(t);r.removeSelectOption(t);r.massAddSelectOption(t,e.getSelectOption(t))});n=e.getParameterNames();n.forEach(function(t){r.removeParameter(t);r.removeSelectOption(t);r.addParameter(t,e.getParameter(t))})});return r}function g(e,a){var o=e.SelectOptions;var i=e.Parameters?c(e.Parameters):[];var s=new n(null,"/");var g={};if(o){o.forEach(function(e){e.PropertyName=e.PropertyName.PropertyPath;e.Ranges.forEach(function(e){e.Sign=e.Sign.EnumMember.split("/")[1];e.Option=e.Option.EnumMember.split("/")[1];e.Low=e.Low&&r.format(s,e.Low);e.High=e.High&&r.format(s,e.High)})});g.SelectOptions=o}if(a.getConsiderAnalyticalParameters()){i.forEach(function(e){e.PropertyName=e.PropertyName.PropertyPath;e.PropertyValue=r.format(s,e.PropertyValue)||null});g.Parameters=i}return new t(g)}function c(e){var t=e&&e.map(function(e){return a({},e,{PropertyName:{PropertyPath:e.PropertyName.PropertyPath.split("/").pop()}})});return t}return{handleErrorsOnTableOrChart:i,getMergedVariants:s,createSVObject:g,getSelectionVariantParameterNamesWithoutNavigation:c}});
//# sourceMappingURL=listUtils.js.map