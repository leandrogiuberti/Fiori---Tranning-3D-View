sap.ui.define(["sap/ui/dom/getFirstEditableInput","sap/suite/ui/generic/template/genericUtilities/FeLogger","sap/ui/core/Element","sap/ui/table/plugins/MultiSelectionPlugin"],function(e,t,n,i){"use strict";var r=new t("genericUtilities.controlHelper");var a=r.getLogger();var l=n.getElementById;function u(e,t){var n=sap.ui.require(e);return typeof n==="function"&&t instanceof n}function o(e){for(;e;e=e.parentNode){if(e.hasAttribute&&e.hasAttribute("data-sap-ui")){return l(e.id)}}}function s(e,t){if(e&&e.focus){a.debug("Set focus on control with id "+e.getId());var n=m();if(e===n){a.debug("Focus already set -> ignore");return}if(e.isFocusable&&!e.isFocusable()){a.warning("Control is currently not focussable try to focus parent");s(p(e),t);return}if(e.getEnabled&&!e.getEnabled()){a.warning("Control is currently not enabled")}e.focus(t);n=m();var i=n;var r=T.isSmartField(e);if(r){while(i&&i!==e&&!T.isSmartField(i)){i=i.getParent()}}if(i!==e){a.warning(n?"Focus is now on control with id "+n.getId():"There is no focus now")}}}function c(e,t){var n=o(e);s(n,t)}function b(e,t){var n=e&&l(e);s(n,t)}function f(t){return t._getComputedMetadata().then(function(){return t.getMode()==="edit"&&(t._getICRenderedPromise()||Promise.resolve())}).then(function(){var n=!t._bEdmBoolDetected&&e(t.getDomRef());return!(!n||n.type==="checkbox")}).catch(function(){return false})}function m(){return o(document.activeElement)}function d(e){return e.getParent()||e.oContainer}function p(e){return!e.getVisible||e.getVisible()?d(e):null}function g(e,t,n){n=n||Function.prototype;var i=false;for(var r=(!t||t.getVisible())&&l(e);r&&!i;r=p(r)){var a=n(r);i=t?r===t:a}return i}function S(e,t){if(e.getSections){return e.getSections()}if(T.isObjectPageSection(e)){return e.getSubSections()}if(T.isObjectPageSubSection(e)){return e.getBlocks().concat(e.getMoreBlocks())}if(u("sap/ui/comp/smartform/Group",e)){return e.getFormElements()}if(u("sap/ui/table/Column",e)){var n=e.getMultiLabels();var i=e.getLabel();if(i){n.push(i)}return n}return t?[]:null}function v(e,t,n){if(t===n){return 0}var i=S(e,true);var r=i.indexOf(t);var a=i.indexOf(n);if(r<0&&a<0){var l=typeof t.getDomRef==="function"&&t.getDomRef();var u=typeof n.getDomRef==="function"&&n.getDomRef();if(l&&u){var o=l.compareDocumentPosition(u);if(o&Node.DOCUMENT_POSITION_PRECEDING){return 1}if(o&Node.DOCUMENT_POSITION_FOLLOWING){return-1}}return 1-2*(!l===!u?t.getId()<n.getId():!u)}return r>=0&&a>=0?r-a:a-r}function F(e){return u("sap/ui/table/Row",e)?e.getCells().some(function(e){return F(e)}):typeof e.getVisible==="function"&&e.getVisible()&&(typeof e.getEnabled!=="function"||e.getEnabled())}function O(e,t,n){e=e||Object.create(null);var i=t.getId();var r=e[i];if(r===2||!F(t)){return null}var a;if(r!==1){a=n(t);e[i]=1+(a===false)}if(!a&&a!==false){var l=S(t);if(!l){l=t.findElements(false);l.sort(v.bind(null,t))}l.some(function(t){a=O(e,t,n);return a})}if(a instanceof Promise){return a.then(function(r){if(r===false){e[i]=2;return null}return r||O(e,t,n)})}e[i]=2;return a||null}function I(e){return i.findOn(e)}var T={byId:l,getParent:d,isView:u.bind(null,"sap/ui/core/mvc/View"),isSmartFilterBar:u.bind(null,"sap/ui/comp/smartfilterbar/SmartFilterBar"),isSmartForm:u.bind(null,"sap/ui/comp/smartform/SmartForm"),isSmartTable:u.bind(null,"sap/ui/comp/smarttable/SmartTable"),isSmartList:u.bind(null,"sap/ui/comp/smartlist/SmartList"),isSmartField:u.bind(null,"sap/ui/comp/smartfield/SmartField"),isSmartChart:u.bind(null,"sap/ui/comp/smartchart/SmartChart"),isSemanticObjectController:u.bind(null,"sap/ui/comp/navpopover/SemanticObjectController"),isSmartVariantManagement:u.bind(null,"sap/ui/comp/smartvariants/SmartVariantManagement"),isGrid:u.bind(null,"sap/ui/layout/Grid"),isUiTable:u.bind(null,"sap/ui/table/Table"),isAnalyticalTable:u.bind(null,"sap/ui/table/AnalyticalTable"),isTreeTable:u.bind(null,"sap/ui/table/TreeTable"),isMTable:u.bind(null,"sap/m/Table"),isRow:u.bind(null,"sap/ui/table/Row"),isColumnListItem:u.bind(null,"sap/m/ColumnListItem"),isSearchField:u.bind(null,"sap/m/SearchField"),isButton:u.bind(null,"sap/m/Button"),isOverflowToolbar:u.bind(null,"sap/m/OverflowToolbar"),isMultiInputField:u.bind(null,"sap/m/MultiInput"),isLink:u.bind(null,"sap/m/Link"),isDynamicPage:u.bind(null,"sap/f/DynamicPage"),isObjectPageSection:u.bind(null,"sap/uxap/ObjectPageSection"),isObjectPageSubSection:u.bind(null,"sap/uxap/ObjectPageSubSection"),isObjectObjectPageLayout:u.bind(null,"sap/uxap/ObjectPageLayout"),isMenuButton:u.bind(null,"sap/m/MenuButton"),isMenu:u.bind(null,"sap/m/Menu"),getUI5ControlForDomElement:o,focusControl:b,focusUI5Control:s,focusDom:c,getControlWithFocus:m,getSmartFieldIsFocussableForInputPromise:f,isElementVisibleOnView:g,sortChildControls:v,searchInTree:O.bind(null,null),getSelectionPluginForUITable:I};T.isTable=function(e){return T.isSmartTable(e)||T.isUiTable(e)||T.isMTable(e)};return T});
//# sourceMappingURL=controlHelper.js.map