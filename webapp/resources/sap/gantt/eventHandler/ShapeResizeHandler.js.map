{"version":3,"file":"ShapeResizeHandler.js","names":["sap","ui","define","jQuery","Device","BaseObject","ShapeManager","Format","Core","Utility","ShapeInRowDrawer","Element","ShapeResizeHandler","extend","constructor","oChart","call","this","_oSourceChart","_bResizing","_oResizingData","undefined","_oShapeManager","_oSourceChartId","getId","_oShapeInRowDrawer","_DEFAULT_RESIZE_CURSOR_SHOWING_THRESHOLD","_DEFAULT_MOUSE_MOVE_PIXEL","_TIMESTAMP_START_TIME_KEY","_TIMESTAMP_END_TIME_KEY","prototype","getIsResizing","getResizingData","handleShapeResize","oEvent","button","oShapeData","d3","select","target","datum","getAttribute","sClassId","split","classed","isShapeResizable","isShapeDuration","_handleShapeResizeStart","_preventBubbleAndDefault","aSvg","getDomSelectorById","shapeData","rowInfo","getRowDatumByShapeUid","uid","y","_oAxisOrdinal","elementToView","x","pageX","offset","left","offsetX","topShapeInstance","_getTopShapeInstance","startTime","endTime","getConfiguration","getRTL","getEndTime","getTime","objectInfoRef","aOldTime","resizeStartPointX","document","body","off","on","_handleShapeResizing","bind","_handleShapeResizeEnd","checkShapeResizable","sTarget","sPointX","removeClass","indexOf","hoverPointDistance","shapeStartX","shapeEndX","oShapeInstance","_getShapeInstance","oStartTime","oEndTime","getAxisTime","timeToView","abapTimestampToDate","Math","abs","_bDragging","addClass","preventDefault","stopPropagation","support","touch","buttons","ctrlKey","dx","_updateResizingShapeData","_oAutoScrollHandler","autoScroll","_handleShapeResizingWhenAutoScroll","_oLastEvent","currentX","aResizedNewTime","_calculateResizedNewTime","_drawResizingShadow","_parseShapeTimeProperty","sAttrName","sPropertyValue","mShapeConfig","hasShapeProperty","sConfigAttr","getShapeProperty","charAt","length","substring","oResizedNewTime","clonedShapeData","oShadowShape","getAggregation","oConfigTime","oConfigEndTime","sNewStartTime","sNewEndTime","sBaseDataSet","dataSet","drawResizeShadow","_oStatusSet","oCurrentX","aNewStartTime","aNewEndTime","oldStartTime","oldEndTime","oldStartTimeX","oldEndTimeX","isLeftSideClick","dateToAbapTimestamp","viewToTime","mShapeInstance","getShapeInstance","getShapes","shapes","i","oTopShapeInstance","getElementById","getParent","stop","resizeShadowG","selectAll","empty","remove","_collectResizingShapeData","fireShapeResizeEnd","shapeUid","rowObject","oldTime","newTime","aNewTime","resizedShapeData"],"sources":["ShapeResizeHandler-dbg.js"],"mappings":"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","ignoreList":[]}