/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/base/Log","sap/ui/core/Control","sap/base/util/ObjectPath","../misc/Utility","../misc/Format","../shape/cal/Calendar","../misc/AxisTime"],function(e,t,a,n,i,r,s){"use strict";var o=t.extend("sap.gantt.legend.LegendBase",{metadata:{library:"sap.gantt",abstract:true,properties:{svgDefs:{type:"sap.gantt.def.SvgDefs",defaultValue:null},legendWidth:{type:"float",defaultValue:32},legendHeight:{type:"float",defaultValue:32},fontSize:{type:"int",defaultValue:16}}}});o.prototype.TIME_RANGE=["20160101000000","20160103000000"];o.prototype.TIME="20160102000000";o.prototype.init=function(){this._aTimeRange=[i.getTimeStampFormatter().parse(this.TIME_RANGE[0]),i.getTimeStampFormatter().parse(this.TIME_RANGE[1])]};o.prototype.getAxisTime=function(){return this._oAxisTime};o.prototype.onBeforeRendering=function(){this._sUiSizeMode=n.findSapUiSizeClass();this._aViewRange=[0,this.getScaledLegendWidth()];this._oAxisTime=new s(this._aTimeRange,this._aViewRange)};o.prototype.getScaledLegendWidth=function(){var e=this.getSapUiSizeClass();return n.scaleBySapUiSize(e,this.getLegendWidth())};o.prototype.getScaledLegendHeight=function(){var e=this.getSapUiSizeClass();return n.scaleBySapUiSize(e,this.getLegendHeight())};o.prototype._instantShapeSync=function(e){var t=[];for(var a=0;a<e.length;a++){if(e[a].getShapeClassName()){var n=this._instantiateCustomerClassSync(e[a].getShapeClassName(),a,e[a]);if(e[a].getClippathAggregation()&&e[a].getClippathAggregation()instanceof Array){var i=this._instantShapeSync(e[a].getClippathAggregation());for(var r=0;r<i.length;r++){n.addPath(i[r])}}else if(e[a].getGroupAggregation()&&e[a].getGroupAggregation()instanceof Array){var s=this._instantShapeSync(e[a].getGroupAggregation());for(var o=0;o<s.length;o++){n.addShape(s[o])}}if(this._isProperShape(n)){t.push(n)}}}return t};o.prototype._instantShapeAsync=function(e){var t=this,a=[];function n(a){return t._instantiateCustomerClassAsync(e[a].getShapeClassName(),a,e[a]).then(function(n){if(e[a].getClippathAggregation()&&e[a].getClippathAggregation()instanceof Array){return t._instantShapeAsync(e[a].getClippathAggregation()).then(function(e){for(var t=0;t<e.length;t++){n.addPath(e[t])}return n})}else if(e[a].getGroupAggregation()&&e[a].getGroupAggregation()instanceof Array){return t._instantShapeAsync(e[a].getGroupAggregation()).then(function(e){for(var t=0;t<e.length;t++){n.addShape(e[t])}return n})}else{return n}})}for(var i=0;i<e.length;i++){if(e[i].getShapeClassName()){a.push(n(i))}}return Promise.all(a).then(function(e){var a=[];e.forEach(function(e){if(t._isProperShape(e)){a.push(e)}});return a})};o.prototype._isProperShape=function(t){if(t instanceof r){e.warning("Calendar is not proper shape","key '"+t.mShapeConfig.getKey()+"'","ListLegend");return false}else if(t.getTag()=="clippath"){return false}else{return true}};o.prototype._instantiateCustomerClassSync=function(e,t,n){var i=a.get(e);if(!i){throw new Error("Class "+e+" not preloaded. Please add it to require of your"+" controller to ensure that it's initialized before this point or use Gantt 2.0.")}var r=new i;r.mShapeConfig=n;r.mChartInstance=this;return r};o.prototype._instantiateCustomerClassAsync=function(e,t,a){var n=this;return new Promise(function(t){sap.ui.require([e.replace(/\./g,"/")],function(e){var i=new e;i.mShapeConfig=a;i.mChartInstance=n;t(i)})})};o.prototype.getSapUiSizeClass=function(){return this._sUiSizeMode};return o},true);
//# sourceMappingURL=LegendBase.js.map