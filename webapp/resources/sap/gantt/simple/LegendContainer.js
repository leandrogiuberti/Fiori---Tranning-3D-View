/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/core/Control","sap/ui/core/Lib","sap/m/NavContainer","sap/m/Page","sap/m/List","sap/m/StandardListItem","../control/AssociateContainer"],function(e,t,i,n,a,s,o){"use strict";var r=e.extend("sap.gantt.simple.LegendContainer",{metadata:{library:"sap.gantt",properties:{width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"200px"},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"200px"},enableFlatLegends:{type:"boolean",defaultValue:false}},defaultAggregation:"legends",aggregations:{legends:{type:"sap.ui.core.Control",multiple:true,visibility:"public",singularName:"legend"}}}});r.prototype.init=function(){this.initNavContainer();this._sCurrentPageTitle=null;this.oRb=t.getResourceBundleFor("sap.gantt")};r.prototype.initNavContainer=function(){this._oNavContainer=null;this._sCurrentPageTitle=null;this._oNavContainer=new i({autoFocus:false,afterNavigate:function(e){this._sCurrentPageTitle=e.getParameter("to").getTitle()}.bind(this)})};r.prototype.onBeforeRendering=function(e){this.initNavContainer();this._updateNavContainerSize();this._addInitialPageIfNecessary();this._addLegendsToNavContainer()};r.prototype._updateNavContainerSize=function(){this._oNavContainer.setWidth(this.getWidth());this._oNavContainer.setHeight(this.getHeight())};r.prototype._shouldRenderFlatLegendList=function(){var e=true;this.getLegends().forEach(function(t){e=e&&t.isA("sap.gantt.simple.ListLegend")});return e&&this.getEnableFlatLegends()};r.prototype._isSingleVisibleList=function(){var e=0;this.getLegends().forEach(function(t){if(t.getVisible()){e++}});return e<=1};r.prototype._addLegendsToNavContainer=function(){if(!this._shouldRenderFlatLegendList()||this.getLegends().length===1||this._isSingleVisibleList()){this.getLegends().forEach(function(e,t,i){if(e.getVisible()){var a=new n({title:e.getTitle(),backgroundDesign:sap.m.PageBackgroundDesign.Solid,enableScrolling:true,showNavButton:i.length>1&&!this._isSingleVisibleList(),content:new o({content:e}),navButtonPress:function(e){this.getParent().backToTop()}});this._oNavContainer.addPage(a);if(this.getLegends().length===1){this._setInvisibleText(e.getTitle())}}}.bind(this))}else{var e=new n({title:this.oRb.getText("LEGEND_TITLE"),backgroundDesign:sap.m.PageBackgroundDesign.Solid,enableScrolling:true});var t=this.getLegends();t.forEach(function(t){e.addContent(new o({content:t}))});this._oNavContainer.addPage(e);this._setInvisibleText(e.getTitle())}};r.prototype._addInitialPageIfNecessary=function(){var e=this.getLegends();if(e.length>1&&!this._shouldRenderFlatLegendList()&&!this._isSingleVisibleList()){var t=e.map(function(e){return new s({title:e.getTitle(),type:sap.m.ListType.Navigation,press:this._onInitialPageItemPress.bind(this)})}.bind(this));var i=new n({title:this.oRb.getText("LEGEND_TITLE"),content:[new a({items:t})]});this._setInvisibleText(i.getTitle());this._oNavContainer.addPage(i);this._oNavContainer.setInitialPage(i)}};r.prototype._onInitialPageItemPress=function(e){var t=e.getSource().getTitle();this._navToByPageTitle(t);this._setInvisibleText(t)};r.prototype._navToByPageTitle=function(e){if(!e){return}this._oNavContainer.setAutoFocus(true);var t=this._oNavContainer.getPages();for(var i=1;i<t.length;i++){if(e==t[i].getTitle()){this._oNavContainer.to(t[i]);break}}};r.prototype._setInvisibleText=function(e){if(this.getParent()&&this.getParent()._oInvisibleLabelText){this.getParent()._oInvisibleLabelText.setText(e)}};return r},true);
//# sourceMappingURL=LegendContainer.js.map