/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/core/Core","sap/gantt/library","sap/ui/base/ManagedObjectObserver","sap/ui/core/Item","sap/ui/base/Object","sap/base/Log","sap/m/library","sap/m/OverflowToolbar","sap/m/OverflowToolbarLayoutData","sap/m/ToolbarSpacer","sap/m/FlexBox","sap/m/OverflowToolbarButton","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/Select","sap/m/ViewSettingsDialog","sap/m/ViewSettingsCustomTab","sap/m/CheckBox","sap/m/Slider","sap/m/Popover","../control/AssociateContainer","sap/ui/fl/variants/VariantManagement","sap/ui/fl/apply/api/ControlVariantApplyAPI","./GanttSearchSidePanel","./FindAndSelectUtils","sap/ui/core/InvisibleText","sap/ui/core/Element","sap/ui/core/Lib","./GanttUtils"],function(t,e,i,o,n,s,a,r,h,l,g,p,d,u,_,c,m,f,S,T,y,B,I,b,C,x,v,P,L){"use strict";var E=e.simple.GanttChartWithTableDisplayType,O=e.simple.ContainerToolbarPlaceholderType,Z=a.OverflowToolbarPriority,w=a.FlexDirection,D=a.ButtonType,R=a.PlacementType;var N=r.extend("sap.gantt.simple.ContainerToolbar",{metadata:{library:"sap.gantt",properties:{showBirdEyeButton:{type:"boolean",defaultValue:false},showDisplayTypeButton:{type:"boolean",defaultValue:false},showLegendButton:{type:"boolean",defaultValue:false},showSettingButton:{type:"boolean",defaultValue:true},showTimeZoomControl:{type:"boolean",defaultValue:true},zoomControlType:{type:"sap.gantt.config.ZoomControlType",defaultValue:e.config.ZoomControlType.SliderWithButtons},stepCountOfSlider:{type:"int",defaultValue:10},infoOfSelectItems:{type:"object[]",defaultValue:[]},zoomLevel:{type:"int",defaultValue:0},alignCustomContentToRight:{type:"boolean",defaultValue:false},showSearchButton:{type:"boolean",defaultValue:false},findMode:{type:"sap.gantt.config.FindMode",defaultValue:e.config.FindMode.Both}},aggregations:{settingItems:{type:"sap.gantt.config.SettingItem",multiple:true},legendContainer:{type:"sap.ui.core.Control",multiple:false,visibility:"public"}},events:{zoomStopChange:{parameters:{index:{type:"int"},selectedItem:{type:"sap.ui.core.Item"}}},birdEyeButtonPress:{},displayTypeChange:{parameters:{displayType:{type:"sap.gantt.simple.GanttChartWithTableDisplayType"}}},ganttSidePanel:{parameters:{updateSidePanelState:{type:"object"}}},findButtonPress:{},closeFindButtonPress:{},findPopupButtonPress:{},closeSidePanelButtonPress:{}}}});N.prototype.init=function(){r.prototype.init.apply(this,arguments);this.mSettingsConfig={};this._oRb=P.getResourceBundleFor("sap.gantt");this.oObserver=new i(this.observeChanges.bind(this));this.oObserver.observe(this,{properties:["showBirdEyeButton","showLegendButton","showTimeZoomControl","showSettingButton","zoomControlType","infoOfSelectItems","showDisplayTypeButton","alignCustomContentToRight","showSearchButton","findMode"],aggregations:["content"]});this.bShallUpdateContent=true;this.bZoomControlTypeChanged=false;this.bContentAlignChanged=false;this._bSuppressZoomStopChange=false;this.oToolbarSpacer=new l(this.getId()+"-toolbarSpacer")};N.prototype.observeChanges=function(t){if(!this.bShallUpdateContent){this.bShallUpdateContent=true;this.bZoomControlTypeChanged=t.name==="zoomControlType";this.bContentAlignChanged=t.name==="alignCustomContentToRight"}};N.prototype.exit=function(){this.oObserver.disconnect();this._destroyIfExists([this._oDisplayTypeSegmentedButton,this._oBirdEyeButton,this._oSelect,this._oTimeZoomFlexBox,this._oSettingsDialog,this._oSettingsButton,this._oLegendPop,this._oLegendButton,this._oVariantManagement,this._searchFlexBox,this._oSearchButton,this._oZoomSlider,this._oZoomInButton,this._oZoomOutButton,this.oToolbarSpacer]);r.prototype.exit.apply(this,arguments)};N.prototype.applySettings=function(t,i){t=t||{};if(!t.settingItems){t.settingItems=e.config.DEFAULT_TOOLBAR_SETTING_ITEMS.map(function(t){return t.clone()})}var o=["sap_enableNowLine","sap_enableStatusBar","sap_enableCursorLine","sap_enableVerticalLine","sap_enableAdhocLine","sap_enableDeltaLine","sap_enableNonWorkingTime","sap_enableTimeScrollSync"];t.settingItems.forEach(function(t){if(t.getKey()&&o.indexOf(t.getKey())!=-1){t.setProperty("_isStandard",true,true)}});r.prototype.applySettings.apply(this,arguments);this._createControlsOnly();return this};N.prototype._isParentGanttContainer=function(){var t=this.getParent();if(t&&t.isA("sap.gantt.simple.GanttChartContainer")){return true}return false};N.prototype.onBeforeRendering=function(){if(this.bShallUpdateContent===true){this.updateToolbarContents();this.bShallUpdateContent=false;this.bZoomControlTypeChanged=false;this.bContentAlignChanged=false}};N.prototype.updateToolbarContents=function(){var t=this.getContent(),e={},i=0;var o=function(t){return this.getContent().indexOf(t)===-1}.bind(this);var a=function(t,e,i){if(!t._getControl()){t._setControl(i)}t.setProperty("_show",e)};var r=function(t,n,s){var r=e[t],h=o(s);if(r){a(r,n,s)}else if(n){i++}if(!h&&(r||!n)){this.removeContent(s)}else if(!r&&n&&h){if(t===O.VariantManagement){this.insertContent(s,0);var l=function(){var t=this.getParent();t.updateAxisTimeSettings();t.fireVariantApplied()};I.attachVariantApplied({selector:this.getParent(),vmControlId:this._oVariantManagement.getId(),callAfterInitialVariant:true,callback:l.bind(this)})}else if(t===O.Spacer){this.insertContent(s,this.getAlignCustomContentToRight()?0:this.getContent().length-i+1)}else{this.addContent(s)}}}.bind(this);t.forEach(function(t){var i;if(n.isA(t,"sap.gantt.simple.ContainerToolbarPlaceholder")){i=t.getType();if(e[i]){s.warning("There are more than one sap.gantt.simple.ContainerToolbarPlaceholder of the "+i+" type.")}e[i]=t}});if(this.bContentAlignChanged){this.removeContent(this.oToolbarSpacer)}r(O.SearchButton,this.getShowSearchButton(),this._genSearch());r(O.BirdEyeButton,this.getShowBirdEyeButton(),this._genBirdEyeButton());r(O.TimeZoomControl,this.getShowTimeZoomControl(),this._genTimeZoomFlexBox());r(O.LegendButton,this.getShowLegendButton(),this._genLegend());r(O.SettingButton,this.getShowSettingButton(),this._genSettings());r(O.DisplayTypeButton,this.getShowDisplayTypeButton(),this._genDisplayTypeButton());r(O.Spacer,true,this.oToolbarSpacer);r(O.VariantManagement,this._isParentGanttContainer()&&this.getParent().getEnableVariantManagement(),this._genVariantManagement())};N.prototype._createControlsOnly=function(){this._genBirdEyeButton();this._genTimeZoomGroupControls();this._genLegend();this._genSettings();this._genDisplayTypeButton();this._genSearch()};N.prototype._destroyIfExists=function(t){t.forEach(function(t){if(t){t.destroy()}})};N.prototype._genSearch=function(){C._ganttSearchResults=[];C._searchResultsCount=0;C.previousGanttID=0;C._selectedIndex=0;if(!this._searchFlexBox){this._searchFlexBox=new sap.m.FlexBox(this.getId()+"-findAndSelectFlexBox",{alignItems:"Center",justifyContent:"SpaceBetween",items:[new sap.m.SearchField(this.getId()+"-findAndSelectSearchField",{placeholder:this._oRb.getText("GNT_FIND_PLACEHOLDER"),search:function(t){if(t.getParameter("clearButtonPressed")){C.updateShapeSelectionANDHighlight(this.getParent().getGanttCharts(),C.previousGanttID);C._ganttSearchResults=[];C._searchResultsCount=0;C._selectedIndex=0;this._searchFlexBox.getItems()[2].setText(this._oRb.getText("GNT_EMPTY_RESULT_INFO_TOOLBAR"));C.toggleNavigationState(this._searchFlexBox.getItems()[1],this._searchFlexBox.getItems()[3])}else{var e=this._searchFlexBox.getItems()[0].getValue();C.triggerSearchEvent(e,this.getParent().getGanttCharts(),false,this)}}.bind(this)}),new sap.m.Button(this.getId()+"-findAndSelectNavigateBackward",{icon:"sap-icon://nav-back",type:"Transparent",tooltip:this._oRb.getText("GNT_FIND_PREVIOUS"),press:function(){if(C._selectedIndex>0){C._selectedIndex--;this._searchFlexBox.getItems()[2].setText("("+(C._selectedIndex+1)+"/"+C._searchResultsCount+")");C.navigateToSearchResult(this.getParent().getGanttCharts(),this);C.toggleNavigationState(this._searchFlexBox.getItems()[1],this._searchFlexBox.getItems()[3])}}.bind(this)}),new sap.m.Text(this.getId()+"-findAndSelectResultText",{text:this._oRb.getText("GNT_EMPTY_RESULT_INFO_TOOLBAR")}),new sap.m.Button(this.getId()+"-findAndSelectNavigateForward",{icon:"sap-icon://navigation-right-arrow",type:"Transparent",tooltip:this._oRb.getText("GNT_FIND_NEXT"),press:function(){if(C._searchResultsCount-1>C._selectedIndex){C._selectedIndex++;this._searchFlexBox.getItems()[2].setText("("+(C._selectedIndex+1)+"/"+C._searchResultsCount+")");C.navigateToSearchResult(this.getParent().getGanttCharts(),this);C.toggleNavigationState(this._searchFlexBox.getItems()[1],this._searchFlexBox.getItems()[3])}}.bind(this)}),new sap.m.Button(this.getId()+"-findAndSelectNavigateSidePanel",{icon:"sap-icon://list",type:"Transparent",tooltip:this._oRb.getText("GNT_SEARCH_SIDE_PANEL"),press:function(){if(!this.getParent().getShowSearchSidePanel()){this._openSidePanel()}}.bind(this)}),new sap.m.Button(this.getId()+"-findAndSelectClose",{text:this._oRb.getText("GNT_FIND_CLOSE"),type:"Transparent",tooltip:this._oRb.getText("GNT_FIND_CLOSE"),press:function(){this.fireCloseFindButtonPress();C.updateShapeSelectionANDHighlight(this.getParent().getGanttCharts(),C.previousGanttID);C.updateToolbarItems(this,false);C.toggleNavigationState(this._searchFlexBox.getItems()[1],this._searchFlexBox.getItems()[3])}.bind(this)}),new sap.m.ToolbarSeparator(this.getId()+"-findAndSelectSeparator",{})]})}if(this._oSearchButton){return this._oSearchButton}this._oSearchButton=new p(this.getId()+"-findAndSelectSearchButton",{icon:"sap-icon://sys-find",type:D.Transparent,text:this._oRb.getText("GNT_FIND"),tooltip:this._oRb.getText("GNT_FIND"),ariaDescribedBy:this.getId()+"-findAndSelectSearchButton",layoutData:new h({priority:Z.High}),press:function(){if(this.getParent().getShowSearchSidePanel()){var t=this.getParent().getSearchSidePanel()._oSearchSidePanel.getItems()[1].getContent()[0];if(t.getDomRef()){var i=t.getValue().length;var o=t.getDomRef().getElementsByTagName("input")[0];t.focus();o.setSelectionRange(0,i)}}else{this.fireFindButtonPress();var n=e.config.FindMode;var s=this.getFindMode();if(s===n.Toolbar||s===n.Both){C.updateToolbarItems(this,true);v.getElementById(this.getId()+"-findAndSelectNavigateSidePanel").setVisible(s===n.Both);C.toggleNavigationState(this._searchFlexBox.getItems()[1],this._searchFlexBox.getItems()[3],true)}else if(s===n.SidePanel){var a=this.getAllToolbarItems(),r=false,h=-1;a.forEach(function(t,e){if(t.isA("sap.m.ToolbarSpacer")){h=e}if(t.getId().includes("findAndSelectFlexBox")){r=true}});if(!r){if(h>-1){this.insertContent(this._searchFlexBox,h+1)}else{this.insertContent(this._searchFlexBox,1)}}this._openSidePanel()}}}.bind(this)});return this._oSearchButton};N.prototype._openSidePanel=function(){this._sidePanelPromise=new Promise(function(t,e){this._resolveSidePanel=t;this._rejectSidePanel=e}.bind(this));this.fireGanttSidePanel({updateSidePanelState:{enable:this._resolveSidePanel,disable:this._rejectSidePanel}});this._sidePanelPromise.then(function(){var t=this.getAllToolbarItems();this.getParent().setShowSearchSidePanel(true);if(!this._searchSidePanel){this._searchSidePanel=new b;this.getParent().setSearchSidePanel(this._searchSidePanel)}t.forEach(function(t){if(t.getId().includes("findAndSelectFlexBox")){t.setVisible(false)}else if(t.getId().includes("findAndSelectSearchButton")){t.setVisible(true)}})}.bind(this))};N.prototype._genVariantManagement=function(){if(this._oVariantManagement==null){this._oVariantManagement=new B({id:this.getId()+"-variantManagement",for:[this.getParent()],executeOnSelectionForStandardDefault:true}).addStyleClass("sapUiCompVarMngmt").addStyleClass("sapMBarChild").addStyleClass("sapUiCompSmartTableToolbarContent")}return this._oVariantManagement};N.prototype._genDisplayTypeButton=function(){if(this._oDisplayTypeSegmentedButton){return this._oDisplayTypeSegmentedButton}this._oDisplayTypeSegmentedButton=new d(this.getId()+"-displayTypeSegmentedButton",{selectedKey:E.Both,selectionChange:function(t){this.fireDisplayTypeChange({displayType:t.getParameter("item").getKey()})}.bind(this),items:[new u(this.getId()+"-"+E.Both+"SegmentedButtonItem",{tooltip:this._oRb.getText("TLTP_DISPLAY_TYPE_BUTTON_BOTH"),icon:"sap-icon://Chart-Tree-Map",key:E.Both}),new u(this.getId()+"-"+E.Chart+"SegmentedButtonItem",{tooltip:this._oRb.getText("TLTP_DISPLAY_TYPE_BUTTON_CHART"),icon:"sap-icon://along-stacked-chart",key:E.Chart}),new u(this.getId()+"-"+E.Table+"SegmentedButtonItem",{tooltip:this._oRb.getText("TLTP_DISPLAY_TYPE_BUTTON_TABLE"),icon:"sap-icon://table-view",key:E.Table})]})};N.prototype._genBirdEyeButton=function(){if(this._oBirdEyeButton==null){var t=function(t){var e=t.getText("TXT_BRIDEYE"),i=t.getText("TXT_BRIDEYE_RANGE_VISIBLE_ROWS"),o=t.getText("TLTP_BRIDEYE_ON_VISIBLE_ROWS");return e+" ("+i+"): "+o};this._oBirdEyeButton=new p(this.getId()+"-birdEyeButton",{icon:"sap-icon://show",type:D.Transparent,text:this._oRb.getText("TXT_BIRDEYE_BUTTON"),tooltip:t(this._oRb),press:this.fireBirdEyeButtonPress.bind(this)})}return this._oBirdEyeButton};N.prototype._getSelectItems=function(){var t=[],e=this.getInfoOfSelectItems();if(e.length>0){if(e[0]instanceof o){t=e}else{for(var i=0;i<e.length;i++){t.push(new o({key:e[i].key,text:e[i].text}))}}}return t};N.prototype._genTimeZoomGroupControls=function(){var t=e.config.ZoomControlType;var i=this.getZoomControlType();var o=function(t){clearTimeout(this._iLiveChangeTimer);this._iLiveChangeTimer=-1;this.setZoomLevel(t,true)};this.fireEvent("_zoomControlTypeChange",{zoomControlType:i});if(i===t.None){return[]}if(i===t.Select){if(this._oSelect){return[this._oSelect]}var n=this._getSelectItems();this._oSelect=new _(this.getId()+"-zoomSelect",{items:n,selectedItem:n[this.getZoomLevel()],change:function(t){var e=t.getSource();var i=e.getSelectedItem();var n=e.indexOfItem(i);this._iLiveChangeTimer=setTimeout(o.bind(this),200,[n,i])}.bind(this)});return[this._oSelect]}else{if(!this._oZoomLevelInvisibleText){this._oZoomLevelInvisibleText=new x;this._oZoomLevelInvisibleText.toStatic()}if(this._oZoomSlider){this._oZoomSlider.setMax(this.getStepCountOfSlider()-1);if(i===t.SliderOnly){return[this._oZoomSlider]}else if(i===t.ButtonsOnly){return[this._oZoomOutButton,this._oZoomInButton]}else{return[this._oZoomOutButton,this._oZoomSlider,this._oZoomInButton]}}this._oZoomSlider=new S(this.getId()+"-zoomSlider",{width:"200px",max:this.getStepCountOfSlider()-1,value:this.getZoomLevel(),min:0,step:1,liveChange:function(t){var e=parseInt(t.getParameter("value"));clearTimeout(this._iLiveChangeTimer);this._iLiveChangeTimer=setTimeout(o.bind(this),200,e);this._oZoomLevelInvisibleText.setText(this._oRb.getText("TLTP_SLIDER_ZOOM_LEVEL")+": "+e)}.bind(this)});var s=function(t){return function(e){this._iLiveChangeTimer=setTimeout(function(){var e=parseInt(t?this._oZoomSlider.stepUp(1).getValue():this._oZoomSlider.stepDown(1).getValue());o.call(this,e);var i=this._oZoomSlider.getMax(),n=this._oZoomSlider.getMin();this._oZoomLevelInvisibleText.setText(this._oRb.getText("TLTP_SLIDER_ZOOM_LEVEL")+": "+e);if(e===i){this._oZoomOutButton.focus()}else if(e===n){this._oZoomInButton.focus()}}.bind(this),200)}};this._oZoomInButton=new p(this.getId()+"-zoomInButton",{icon:"sap-icon://zoom-in",type:D.Transparent,tooltip:this._oRb.getText("TLTP_SLIDER_ZOOM_IN"),ariaDescribedBy:[this._oZoomLevelInvisibleText.getId()],press:s(true).bind(this)});this._oZoomOutButton=new p(this.getId()+"-zoomOutButton",{icon:"sap-icon://zoom-out",type:D.Transparent,tooltip:this._oRb.getText("TLTP_SLIDER_ZOOM_OUT"),ariaDescribedBy:[this._oZoomLevelInvisibleText.getId()],press:s(false).bind(this)});return[this._oZoomOutButton,this._oZoomSlider,this._oZoomInButton]}};N.prototype._genTimeZoomFlexBox=function(){if(this._oTimeZoomFlexBox){if(this.bZoomControlTypeChanged){this._oTimeZoomFlexBox.removeAllItems();this._genTimeZoomGroupControls().forEach(function(t){this._oTimeZoomFlexBox.addItem(t)}.bind(this))}return this._oTimeZoomFlexBox}this._oTimeZoomFlexBox=new g(this.getId()+"-timeZoomFlexBox",{items:this._genTimeZoomGroupControls(),layoutData:new h({priority:Z.NeverOverflow})});return this._oTimeZoomFlexBox};N.prototype._genSettingItems=function(){return this.getSettingItems().map(function(t){var e=new f(this.getId()+"-"+t.getKey()+"CheckBox",{name:t.getKey(),text:t.getDisplayText(),tooltip:t.getTooltip(),selected:t.getChecked()}).addStyleClass("sapUiSettingBoxItem");e.isStandard=t._getIsStandard();return e}.bind(this))};N.prototype._genSettings=function(){if(this._oSettingsButton){if(this._oSettingsBox&&this._oSettingsBox.getItems().length===this.getSettingItems().length){var t=this.getSettingItems();if(this._aOriginalSettings){var e={};var i={};t.forEach(function(t){if(!e[t.getKey()]){e[t.getKey()]=true}});for(var o=this._aOriginalSettings.length-1;o>=0;o--){if(!e[this._aOriginalSettings[o].getKey()]){this._aOriginalSettings.splice(o,1)}else{i[this._aOriginalSettings[o].getKey()]=true}}t.forEach(function(t){if(!i[t.getKey()]){this._aOriginalSettings.push(t.clone())}}.bind(this))}var n=this._oSettingsBox.getItems(),s=this._aOriginalSettings?this._aOriginalSettings:this.getSettingItems();for(var a=0;a<n.length;a++){var r=n[a],l=s[a];r.setName(l.getKey());r.setText(l.getDisplayText());r.setTooltip(l.getTooltip());r.setSelected(l.getChecked())}}else{this._oSettingsBox.destroyItems();this._genSettingItems().forEach(function(t){this._oSettingsBox.addItem(t)}.bind(this))}return this._oSettingsButton}this._oSettingsBox=new g(this.getId()+"-settingsFlexBox",{direction:w.Column,items:this._genSettingItems()}).addStyleClass("sapUiSettingBox");this._oSettingsDialog=new c(this.getId()+"-settingsDialog",{title:this._oRb.getText("SETTINGS_DIALOG_TITLE"),customTabs:[new m({content:this._oSettingsBox})],confirm:function(){this._fireSettingItemChangedEvent();if(this._isParentGanttContainer()){this.getParent()._onSplitterResize()}}.bind(this),cancel:function(){this.updateSettingItems(this.mSettingsConfig)}.bind(this),reset:function(){this._genSettings()}.bind(this)});this._oSettingsButton=new p(this.getId()+"-settingsButton",{icon:"sap-icon://action-settings",type:D.Transparent,text:this._oRb.getText("TXT_SETTING_BUTTON"),tooltip:this._oRb.getText("TXT_SETTING_BUTTON"),layoutData:new h({priority:Z.High}),press:function(t){this._oSettingsDialog.open()}.bind(this)});return this._oSettingsButton};N.prototype._genLegend=function(){if(this._oLegendButton){return this._oLegendButton}if(!this._oLegendPop){this._oLegendPop=new T(this.getId()+"-legendPopover",{placement:R.Bottom,showArrow:false,showHeader:false})}this._oLegendButton=new p(this.getId()+"-legendButton",{icon:"sap-icon://legend",type:D.Transparent,text:this._oRb.getText("TXT_LEGEND_BUTTON"),tooltip:this._oRb.getText("TLTP_SHOW_LEGEND"),layoutData:new h({priority:Z.High,closeOverflowOnInteraction:false}),press:function(t){var e=this._oLegendPop;if(e.isOpen()){e.close()}else{e.openBy(this._oLegendButton);this._oLegendButton.setTooltip(this._oRb.getText("TLTP_HIDE_LEGEND"))}}.bind(this)});return this._oLegendButton};N.prototype.updateZoomLevel=function(t){this._bSuppressZoomStopChange=true;this.setZoomLevel(t)};N.prototype.setZoomLevel=function(t,e){if(!isNaN(t)){var i=this.getZoomLevel();if(this._oZoomSlider&&this._oZoomOutButton&&this._oZoomInButton){var o=this._oZoomSlider.getMax(),n=this._oZoomSlider.getMin();if(t===o){this._oZoomInButton.setEnabled(false);this._oZoomOutButton.setEnabled(true)}else if(t===n){this._oZoomInButton.setEnabled(true);this._oZoomOutButton.setEnabled(false)}else{this._oZoomInButton.setEnabled(true);this._oZoomOutButton.setEnabled(true)}}if(i!==t){this.setProperty("zoomLevel",t,e);if(this._oZoomSlider){this._oZoomSlider.setValue(t);if(!this._bSuppressZoomStopChange){this.fireZoomStopChange({index:t})}}if(this._oSelect){this._oSelect.setSelectedItem(this._oSelect.getItems()[t]);if(!this._bSuppressZoomStopChange){this.fireZoomStopChange({index:t,selectedItem:this._oSelect.getSelectedItem()})}}}}this._bSuppressZoomStopChange=false;return this};N.prototype.setLegendContainer=function(t){this.setAggregation("legendContainer",t);if(!this._oLegendPop){this._oInvisibleLabelText=new x;this._oInvisibleLabelText.toStatic();this.addDependent(this._oInvisibleLabelText);this._oLegendPop=new T(this.getId()+"-legendPopover",{placement:R.Bottom,showArrow:false,showHeader:false,ariaLabelledBy:this._oInvisibleLabelText.getId(),afterClose:function(t){this._oLegendButton.setTooltip(this._oRb.getText("TLTP_SHOW_LEGEND"))}.bind(this)})}if(t){this._oLegendPop.removeAllContent();this._oLegendPop.addContent(new y({content:t}))}};N.prototype._fireSettingItemChangedEvent=function(){var t=this._oSettingsBox.getItems();var e=[];for(var i=0;i<t.length;i++){var o=t[i].getName(),n=o.substr(4),s="",a=t[i].getSelected();if(t[i].isStandard){s=this.mSettingsConfig[n]}else{s=this.mSettingsConfig[o]}if(s!==a){e.push({name:o,value:a,isStandard:t[i].isStandard});if(!t[i].isStandard){this.mSettingsConfig[o]=a}}}if(e.length>0){this.fireEvent("_settingsChange",e)}};N.prototype.updateSettingsConfig=function(t,e){var i=this.getSettingItems();Object.keys(t).forEach(function(e){this.mSettingsConfig[e]=t[e];var o=i.filter(function(t){return t.getKey().endsWith(e)})[0];if(o){o.setChecked(t[e])}}.bind(this));this.updateSettingItems(t);this._updateMSettingsConfigWithCustom(i);if(e&&!this._aOriginalSettings){this._aOriginalSettings=[];this.getSettingItems().forEach(function(t){this._aOriginalSettings.push(t.clone())}.bind(this))}};N.prototype.updateCustomSettingsConfig=function(){var t={};var e=this.getSettingItems();this._updateMSettingsConfigWithCustom(e,t);this.updateSettingItems(t)};N.prototype.updateCustomSettings=function(t){var e=this.getSettingItems();t.forEach(function(t){this.mSettingsConfig[t.name]=t.value;var i=e.filter(function(e){return e.getKey().endsWith(t.name)})[0];if(i){i.setChecked(t.value)}}.bind(this))};N.prototype._updateMSettingsConfigWithCustom=function(t,e){t.forEach(function(t){var i=t.getKey();var o=t.getChecked();if(!t._getIsStandard()&&this.mSettingsConfig[i]!==o){if(e){e[i]=o}this.mSettingsConfig[i]=t.getChecked()}}.bind(this))};N.prototype.updateSettingItems=function(t){var e=this._oSettingsBox.getItems();Object.keys(t).forEach(function(i){var o=e.filter(function(t){return t.getName().endsWith(i)})[0];if(o){o.setSelected(t[i])}})};N.prototype.getAllToolbarItems=function(){return this.getContent()};N.prototype.setInfoOfSelectItems=function(t,e){this.setProperty("infoOfSelectItems",t,e);var i=this;if(this._oSelect){var o=this._getSelectItems();this._oSelect.removeAllItems();o.forEach(function(t){i._oSelect.addItem(t)})}};return N},true);
//# sourceMappingURL=ContainerToolbar.js.map