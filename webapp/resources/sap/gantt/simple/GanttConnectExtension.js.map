{"version":3,"file":"GanttConnectExtension.js","names":["sap","ui","define","jQuery","KeyCodes","Core","library","GanttExtension","CoordinateUtils","GanttUtils","Utility","GanttChartConfigurationUtils","_sNamespace","RelationshipType","simple","ShapeConnectHelper","addEventListeners","oGantt","this","removeEventListeners","oExtension","_getConnectExtension","shapeConnectDoms","shapeConnectTriggers","on","beforeShapeConnect","bind","off","addShapeConnectEventListeners","removeShapeConnectEventListeners","$document","document","onMousemove","endShapeConnect","onKeydown","GanttConnectExtension","extend","_init","mSettings","_initShapeConnectStates","prototype","attachShapeConnectEvents","getGantt","isShapeConnecting","mDom","_oStartShape","_bShapeConnecting","_oScrollDistance","x","y","_bElementConnectable","getRlsStartShape","getSvgElement","getDomRefs","ganttSvg","_getShapeConnectRootNode","$shapeConnectContainer","shapeConnect","d3","select","get","setDomSelector","oDoms","connectLine","ghostRect","shapeConnectGhost","createConnectLine","oFrame","oSvgPoint","oPointerExtension","_getPointerExtension","iX","_getAutoScrollStep","oLineData","class","x1","width","y1","x2","y2","getD3Doms","shapeConnectLine","empty","oShapeConnectRootNode","append","attr","createGhostRect","oGhostRectData","height","updateShapeConnectEffect","oCursorPoint","getLatestCursorPosition","getStartShapeFrame","oSvg","getEventSVGPoint","showIndicator","oEvent","$target","target","sShapeUid","parents","SELECT_FOR_DATASET_KEY","bRTL","getRTL","getBBox","sStartPoint","hasClass","startTriggerFrame","shapeUid","isRightTrigger","startPoint","toggleShapeConnectTrigger","_updateShapeSelections","getSelectedShapeUid","SHAPE_CONNECT_INDICATOR_WIDTH","$shapeConnectTrigger","startShapeConnectTrigger","length","_getAcceptableShapeElements","aAcceptableShapes","that","connectableShapes","each","index","oShape","oControl","control","getShapeUid","getDomRef","push","aIndicators","forEach","_getIndicatorData","shapeConnectContainers","data","enter","classed","d","id","SHAPE_CONNECT_FOR_DATASET_KEY","g","left","right","attachEventHandlerToIndicator","onShapeConnecting","iIndicatorWidth","fireEvent","sToShapeId","sEndPoint","sType","oEventData","fromShapeUid","toShapeUid","getElementById","type","oGanttChart","fireShapeConnect","selectAll","remove","keyCode","ESCAPE","toggleGhostRect","toggleClass","indicators","sElemId","getId","iLeftAnchorPosition","getLeftAnchorPosition","iRightAnchorPosition","getRightAnchorPosition","iY","iWidth","iHeight","bIsTransformed","gantt","BaseGroup","iTranslateY","sTransform","window","getComputedStyle","transform","match","split","parseFloat","iRectWidth","iMargin","mBias","getShapeBias","iLeftX","iLeftY","iRightX","iRightY","mCommonProp","storeScrollDistance","iStep","bHorizontal","$svg","sSelectShapePart","sTriggerPart","$shapeConnectArea","find","$selectionArea","CONNECTABLE_DATASET_KEY","oNode"],"sources":["GanttConnectExtension-dbg.js"],"mappings":"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","ignoreList":[]}