/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["./BaseShape","./RenderUtils","./GanttUtils","../misc/Format","../misc/Utility","../library","./BaseText"],function(t,e,i,r,a,n,s){"use strict";var h=n.simple.shapes.ShapeAlignment;var o=t.extend("sap.gantt.simple.BaseRectangle",{metadata:{library:"sap.gantt",properties:{x:{type:"sap.gantt.SVGLength"},y:{type:"sap.gantt.SVGLength"},width:{type:"sap.gantt.SVGLength"},height:{type:"sap.gantt.SVGLength",defaultValue:"auto"},rx:{type:"sap.gantt.SVGLength",group:"Appearance",defaultValue:0},ry:{type:"sap.gantt.SVGLength",group:"Appearance",defaultValue:0}}},renderer:{apiVersion:2}});var g=["x","y","width","height","style","rx","ry","filter","opacity","transform"];o.prototype.getX=function(){return i.getValueX(this)};o.prototype.getY=function(){var t=this.getProperty("y"),e=1;if(t===null||t===undefined){var i=Number(this.getHeight());t=Math.round(this.getRowYCenter())-i/2;if(this._iBaseRowHeight!=undefined){if(this.getAlignShape()==h.Top){t=this.getRowYCenter()-this._iBaseRowHeight/2+e}else if(this.getAlignShape()==h.Bottom){t=this.getRowYCenter()+this._iBaseRowHeight/2-i-e}t=parseInt(t)}}return t};o.prototype.getWidth=function(){var t=this.getProperty("width"),e=this.getGanttChartBase(),i,n,s,h,o,g;if(t!==null&&t!==undefined){return t}var p,l;var u=this.getAxisTime();if(u==null){return 0}if(e&&this.getTime()&&this.getEndTime()){n=this.getTime().valueOf();s=this.getEndTime().valueOf();h=s-n;if(u.discontinuityProvider){h=u._discontinuityProviderInstance.distance(this.getTime(),this.getEndTime())}i=u.getZoomRate();o=u.getViewOffset();g=u.getViewRange()[1];l=u._shapeWidthValue;var d=l.getValue(i,h,o,g);if(d!==undefined){return d}p=[i,h,o,g]}var y,f=u.timeToView(r.abapTimestampToDate(this.getTime())),m=u.timeToView(r.abapTimestampToDate(this.getEndTime()));if(!a.isNumeric(f)||!a.isNumeric(m)){return 0}y=Math.abs(m-f);y=y<1?1:y;if(l){l.add(p,y)}return y};o.prototype.getHeight=function(){var t=this.getProperty("height");if(t==="auto"){var e=parseFloat(this._iBaseRowHeight*.625,10);return e}if(t==="inherit"){return this._iBaseRowHeight}return t};o.prototype.getStyle=function(){var e=t.prototype.getStyle.apply(this,arguments);var i={fill:this.determineValueColor(this.getFill()),"stroke-dasharray":this.getStrokeDasharray(),"fill-opacity":this.getFillOpacity(),"stroke-opacity":this.getStrokeOpacity()};return e+this.getInlineStyle(i)};o.prototype._isValid=function(){var t=this.getX();return t!==undefined&&t!==null};o.prototype.renderElement=function(i,r){if(!this._isValid()){return}this.writeElementData(i,"rect",true);if(this.aCustomStyleClasses){this.aCustomStyleClasses.forEach(function(t){i.class(t)})}e.renderAttributes(i,r,g);i.openEnd();e.renderTooltip(i,r);if(this.getShowAnimation()){e.renderElementAnimation(i,r)}i.close("rect");if(!r.isA("sap.gantt.simple.BaseCalendar")&&this.getShowTitle()){e.renderElementTitle(i,r,function(t){return new s(t)})}t.prototype.renderElement.apply(this,arguments)};o.prototype.getShapeAnchors=function(){var t=a.getShapeBias(this);var e=this.getDomRef().getBBox();var i=this.getLeftAnchorPosition()/100,r=this.getRightAnchorPosition()/100;return{head:{x:e.x+t.x,y:e.y+this.getHeight()*i+t.y,dx:0,dy:this.getHeight()*i},tail:{x:e.x+this.getWidth()+t.x,y:e.y+this.getHeight()*r+t.y,dx:0,dy:this.getHeight()*r}}};return o},true);
//# sourceMappingURL=BaseRectangle.js.map