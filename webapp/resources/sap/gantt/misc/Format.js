/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/core/format/DateFormat","sap/ui/core/date/UI5Date","sap/ui/thirdparty/d3"],function(e,t){"use strict";var a=function(){throw new Error};a._oDefaultDateTimeFormat=e.getDateTimeWithTimezoneInstance({showTimezone:false});a._enableMillisecondSupport=false;a._setEnableMillisecondSupport=function(e){a._enableMillisecondSupport=e};a._getEnableMillisecondSupport=function(){return a._enableMillisecondSupport};a.abapTimestampToDate=function(e){if(typeof e==="string"){var t=new Date(e.substr(0,4),parseInt(e.substr(4,2))-1,e.substr(6,2),e.substr(8,2),e.substr(10,2),e.substr(12,2));if(isNaN(t.getTime())){t=new Date(e);if(!isNaN(t.getTime())&&t.toISOString()===e){return this.abapTimestampToDate(this.isoTimestampToAbapTimestamp(e))}}else if(a._getEnableMillisecondSupport()){var r=e.substr(14,3);if(r.length>0){t.setMilliseconds(parseInt(r))}}return t}else if(e instanceof Date){return e}return null};a.abapTimestampInUTCToDate=function(e){if(typeof e==="string"){var t=new Date;t.setUTCFullYear(e.substr(0,4),parseInt(e.substr(4,2))-1,e.substr(6,2));t.setUTCHours(e.substr(8,2),e.substr(10,2),e.substr(12,2));if(a._getEnableMillisecondSupport()){var r=e.substr(14,3);if(r.length>0){t.setUTCMilliseconds(parseInt(r))}}return t}else if(e instanceof Date){return e}return null};a.isoTimestampToAbapTimestamp=function(e){if(e){var t=new Date(e);var r=""+t.getUTCFullYear()+(t.getUTCMonth()<9?"0":"")+(t.getUTCMonth()+1)+(t.getUTCDate()<10?"0":"")+t.getUTCDate()+(t.getUTCHours()<10?"0":"")+t.getUTCHours()+(t.getUTCMinutes()<10?"0":"")+t.getUTCMinutes()+(t.getUTCSeconds()<10?"0":"")+t.getUTCSeconds();if(a._getEnableMillisecondSupport()){r+=("00"+t.getUTCMilliseconds()).slice(-3)}return r}return""};a.dateToAbapTimestamp=function(e){if(e){var r=e;if(e instanceof t){r=new Date(e.getTime())}var i=""+r.getFullYear()+(r.getMonth()<9?"0":"")+(r.getMonth()+1)+(r.getDate()<10?"0":"")+r.getDate()+(r.getHours()<10?"0":"")+r.getHours()+(r.getMinutes()<10?"0":"")+r.getMinutes()+(r.getSeconds()<10?"0":"")+r.getSeconds();if(a._getEnableMillisecondSupport()){i+=("00"+e.getMilliseconds()).slice(-3)}return i}return""};a.abapTimestampToTimeLabel=function(e,t){var r=a.abapTimestampToDate(e,t);var i=a._oDefaultDateTimeFormat.format(r,t.getTimeZone());return i};a.relativeTimeToAbsolutTime=function(e,t,a,r){e=e!==undefined?e:0;t=t!==undefined?t:0;a=a!==undefined?a:0;r=r!==undefined?r:0;var i=this.abapTimestampToDate("20120101000000");var n=new Date;n.setTime(i.getTime()+r*1e3+a*60*1e3+t*3600*1e3+e*24*3600*1e3);return n};a.absolutTimeToRelativeTime=function(e){var t=this.abapTimestampToDate("20120101000000");var a=e.getTime()-t.getTime();var r=Math.floor(a/(24*3600*1e3));var i=a%(24*3600*1e3);var n=Math.floor(i/(3600*1e3));i=i%(3600*1e3);var s=Math.floor(i/(60*1e3));i=i%(60*1e3);var o=Math.floor(i/1e3);var u={intervalDays:r,intervalHours:n,intervalMinutes:s,intervalSecond:o};return u};a._convertUTCToLocalTime=function(e,t){var a=0;var r=sap.gantt.misc.Format.abapTimestampToDate(e);var i=d3.time.second.offset(r,a);return i};a._timestampFormatter={parse:function(e){var t=a._getEnableMillisecondSupport();var r;if(t){r=d3.time.format("%Y%m%d%H%M%S%L").parse(e.padEnd(17,"0"))}else{r=d3.time.format("%Y%m%d%H%M%S").parse(e)}return r}};a.getTimeStampFormatter=function(){return a._timestampFormatter};return a},true);
//# sourceMappingURL=Format.js.map