// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/utils","sap/ushell_abap/pbServices/ui2/ODataWrapper","sap/ushell_abap/pbServices/ui2/Error","sap/ushell_abap/pbServices/ui2/ODataService","sap/ushell/Container"],(e,jQuery,a,r,t,p,s,o)=>{"use strict";function n(a,r,n){this._oConfig=n&&n.config;const i=`${e.get("services.appState.baseUrl",n)||"/sap/opu/odata/UI2/INTEROP"}/`;const l={baseUrl:i,"sap-language":o.getUser().getLanguage(),"sap-client":o.getLogonSystem().getClient()};this._oWrapper=t.createODataWrapper(l);function u(e){throw new p(e,"sap.ushell_abap.adapters.abap.AppStateAdapter")}s.call(this,this._oWrapper,u)}n.prototype.saveAppState=function(e,r,t,p,s){const o=new jQuery.Deferred;const n="GlobalContainers";const i={id:e,sessionKey:r,component:s,appName:p,value:t};this._oWrapper.create(n,i,()=>{o.resolve()},e=>{a.error(`AppState save failed: ${e}`);o.reject(new Error(e))});return o.promise()};n.prototype.loadAppState=function(e){const t=new jQuery.Deferred;const p=`GlobalContainers(id='${encodeURIComponent(e)}')`;if(!e){throw new r.Error("The sKey is mandatory to read the data from the persistence layer")}this._oWrapper.openBatchQueue();this._oWrapper.read(p,e=>{t.resolve(e.id,e.value)},e=>{a.error(`AppState load failed: ${e}`);t.reject(new Error(e))},false);this._oWrapper.submitBatchQueue(()=>{},e=>{a.error(`AppState load failed: ${e}`);t.reject(new Error(e))});return t.promise()};return n});
//# sourceMappingURL=AppStateAdapter.js.map