// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/i18n/Localization","sap/ui/core/Manifest","sap/base/Log"],(e,t,a)=>{"use strict";const n={_getDataSourcePromise:null};const r="sap.ushell_abap.integration.fileshares.AppRuntimeFileShareSupport";const s="FileShare";const o="manage";const i=`/sap/bc/ui2/start_up?so=${s}&action=${o}&systemAliasesFormat=object&formFactor=desktop&shellType=FLP&depth=0`;n.getDataSource=async function(){const s=n._getClient();const o=`${i}&sap-client=${s}`;if(!s){a.error("Could not determine sap-client parameter.",null,r);throw new Error("Could not determine sap-client parameter.")}if(!n._getDataSourcePromise){n._getDataSourcePromise=fetch(o,{method:"GET",headers:{"Content-Type":"application/json; charset=utf-8",Accept:"application/json","Accept-Language":e.getLanguageTag().toString()}}).then(e=>{if(e.ok===false){a.error("Could not fetch data, request failed",`error: ${e.status}, ${e.statusText},\nurl: ${o}`,r);throw new Error(e.statusText)}return e.json()}).then(e=>{if(e&&e.targetMappings&&Object.keys(e.targetMappings).length>0){const n=e.targetMappings[Object.keys(e.targetMappings)[0]].applicationDependencies;if(n){let s;try{s=JSON.parse(n).manifest}catch(t){a.error(`Could not parse JSON data of applicationDependencies for targetMapping '${Object.keys(e.targetMappings)[0]}': ${t.message}`,null,r)}if(s){return t.load({manifestUrl:s,async:true})}}}const n=`No manifest URL defined: ${JSON.stringify(e)}`;a.error(n,null,r);throw new Error(n)}).then(e=>e.getEntry("/sap.app/dataSources/mainService"))}return n._getDataSourcePromise};n._getClient=function(){const e=document.getElementsByTagName("meta")["sap-client"];return e&&e.content};return n});
//# sourceMappingURL=AppRuntimeFileShareSupport.js.map