/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.require("sap.ca.ui.utils.resourcebundle");sap.ui.controller("sap.ca.ui.dialog.Forward",{_FORWARD_DIALOG_ID:"DLG_FORWARD",_SEARCH_FIELD_ID:"SFD_FORWARD",_FORWARDER_LIST_ID:"LST_AGENTS",_FORWARDER_ITEM_ID:"ITM_AGENT",onInit:function(){var e=this.getView().byId(this._FORWARDER_LIST_ID);e.bindProperty("showNoData",{path:"/agents",formatter:function(e){return e===undefined?false:true}});var t=this.getView().byId(this._FORWARDER_ITEM_ID);t.bindProperty("icon",{path:"ImageURL",formatter:function(e){return e?e:"sap-icon://person-placeholder"}});var i=this.getView().byId(this._SEARCH_FIELD_ID);this.getView().byId(this._FORWARD_DIALOG_ID).setInitialFocus(i)},onBeforeOpenDialog:function(){var e=this.getView().byId(this._SEARCH_FIELD_ID);e.setValue("");e.focus();this.getView().byId(this._FORWARD_DIALOG_ID).setInitialFocus(e);this.startExternalSearch=undefined;var t=this.getView().byId(this._FORWARD_DIALOG_ID).getModel();if(t){this.startExternalSearch=t.getProperty("/startExternalSearch")}this.getView().byId(this._FORWARDER_LIST_ID).removeSelections(true)},onStartSearch:function(e){var t=e.getParameters().query;if(t){if(this.startExternalSearch){this.startExternalSearch(t)}else{this.setAgents(null)}}else{this.setAgents(undefined)}},onSelectAgent:function(e){var t=e.getParameters().listItem;if(t&&t.getBindingContext()){this.getView().byId(this._FORWARD_DIALOG_ID).close();var i=t.getBindingContext().getObject();sap.ca.ui.dialog.confirmation.open({question:sap.ca.ui.utils.resourcebundle.getText("forward.question",i.FullName),showNote:true,title:sap.ca.ui.utils.resourcebundle.getText("forward.title"),confirmButtonLabel:sap.ca.ui.utils.resourcebundle.getText("dialog.ok"),agent:i},this.forwardConfirmClose)}},onCancelDialog:function(){var e={bConfirmed:false};sap.ca.ui.dialog.factory.closeDialog("DLG_FORWARD",e)},setAgents:function(e){this.getView().byId(this._FORWARD_DIALOG_ID).getModel().setProperty("/agents",e);this.getView().byId(this._FORWARDER_LIST_ID).rerender()},forwardConfirmClose:function(e){var t={};if(e&&e.isConfirmed){t={bConfirmed:true,sNote:e.sNote,oAgentToBeForwarded:this.agent}}else{t={bConfirmed:false}}sap.ca.ui.dialog.factory.closeDialog("DLG_FORWARD",t)}});
//# sourceMappingURL=Forward.controller.js.map