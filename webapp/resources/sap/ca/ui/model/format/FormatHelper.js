/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("sap.ca.ui.model.format.FormatHelper");jQuery.sap.require("sap.ui.core.format.NumberFormat");jQuery.sap.require("sap.ui.core.LocaleData");sap.ui.base.Object.extend("sap.ca.ui.model.format.FormatHelper",{});sap.ca.ui.model.format.FormatHelper.stringToNumeric=function(e){var a=/^\s*[\+-]?0[xX]/;if(a.test(e)){return parseInt(e,16)}else{return parseFloat(e)}};sap.ca.ui.model.format.FormatHelper.toNumeric=function(e){if(e===null||e===undefined){return NaN}var a=typeof e;var r;switch(a){case"number":r=e;break;case"string":r=sap.ca.ui.model.format.FormatHelper.stringToNumeric(e);break;case"object":var t=e.valueOf();if(typeof t==="number"){r=t}else if(Array.isArray(e)){r=NaN}else{r=sap.ca.ui.model.format.FormatHelper.stringToNumeric(e.toString())}break;default:r=NaN;break}return r};sap.ca.ui.model.format.FormatHelper.isNumeric=function(e){return isFinite(sap.ca.ui.model.format.FormatHelper.toNumeric(e))};sap.ca.ui.model.format.FormatHelper.getFormatOptions=function(e,a){var r={};r.locale=a;var t=typeof e;switch(t){case"number":r.decimals=e;break;case"object":if(typeof e.locale==="string"){r.locale=new sap.ui.core.Locale(e.locale)}else if(e.locale){r.locale=e.locale}r.decimals=e.decimals;r.rounding=e.rounding;r.formatStyle=e.formatStyle;r.shortDecimals=e.shortDecimals;r.shortRounding=e.shortRounding;break}if(!r.locale){if(sap.ui.getCore().getConfiguration().getLanguage()=="ZH"){r.locale=new sap.ui.core.Locale("zh_CN")}else{r.locale=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale()}}return r};sap.ca.ui.model.format.FormatHelper.hasRounding=function(e){var a;if(e!==undefined){if(typeof e==="number"){a=true}else{if(e.formatStyle==="short"){a=e.shortDecimals!==undefined||e.shortRounding!==undefined}else{a=e.decimals!==undefined||e.rounding!==undefined}}}else{a=false}return a};sap.ca.ui.model.format.FormatHelper.roundNumber=function(e,a){a=a||{};var r;var t,o;if(a.formatStyle==="short"){t=a.shortRounding;o=a.shortDecimals}else{t=a.rounding;o=a.decimals}if(t){r=t(e)}else if(o!==undefined){var i=sap.ca.ui.model.format.FormatHelper._getDecimals(o,e);r=e.toFixed(i)}else{r=e}return r};sap.ca.ui.model.format.FormatHelper._getDecimals=function(e,a){var r;if(typeof e==="function"){r=e(a)}else{r=e}return r};sap.ca.ui.model.format.FormatHelper._getUi5DecimalsFormatOptions=function(e,a,r){var t={};var o=null;if(e.formatStyle==="short"){o=e.shortDecimals}else if(e.decimals||e.decimals===0){o=e.decimals}if(o!==null){var i=sap.ca.ui.model.format.FormatHelper._getDecimals(o,a);t.minFractionDigits=i;t.maxFractionDigits=i}else if(typeof r==="string"){var l=r.indexOf(".");var u=l>-1?Math.max(r.length-l-1,0):0;t.minFractionDigits=u;t.maxFractionDigits=u}return t};sap.ca.ui.model.format.FormatHelper.formatNumber=function(e,a){var r=sap.ca.ui.model.format.FormatHelper.toNumeric(e);if(!isFinite(r)){return""}var t=sap.ca.ui.model.format.FormatHelper.getFormatOptions(a);var o=sap.ca.ui.model.format.FormatHelper._getUi5DecimalsFormatOptions(t,r,e);var i=sap.ui.core.format.NumberFormat.getFloatInstance(o,t.locale);if(sap.ca.ui.model.format.FormatHelper.hasRounding(a)){r=sap.ca.ui.model.format.FormatHelper.roundNumber(r,t);return i.format(r)}else{return i.format(e)}};sap.ca.ui.model.format.FormatHelper.getMagnitude=function(e){var a=[{value:1e3,suffix:"Kilo"},{value:1e6,suffix:"Mega"},{value:1e9,suffix:"Giga"},{value:1e12,suffix:"Tera"},{value:1e15,suffix:"Peta"},{value:1e18,suffix:"Exa"},{value:1e21,suffix:"Zetta"},{value:1e24,suffix:"Yotta"}];var r=e>=0?e:-e;for(var t=a.length-1;t>=0;--t){var o=a[t];if(r>=o.value){return o}}return{value:1,suffix:""}};
//# sourceMappingURL=FormatHelper.js.map