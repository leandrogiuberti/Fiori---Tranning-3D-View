/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("sap.ca.ui.model.format.DateFormat");jQuery.sap.require("sap.ui.core.format.DateFormat");jQuery.sap.require("sap.ca.ui.utils.resourcebundle");sap.ca.ui.model.format.DateFormat=function(){throw new Error};sap.ca.ui.model.format.DateFormat.getInstance=function(e,t){return this.getDateInstance(e,t)};sap.ca.ui.model.format.DateFormat.getDateInstance=function(e,t){return this.createInstance(e,t,"Date")};sap.ca.ui.model.format.DateFormat.getDateTimeInstance=function(e,t){return this.createInstance(e,t,"DateTime")};sap.ca.ui.model.format.DateFormat.getTimeInstance=function(e,t){return this.createInstance(e,t,"Time")};sap.ca.ui.model.format.DateFormat.createInstance=function(e,t,a){var r=jQuery.sap.newObject(this.prototype);switch(a){case"Date":if(!(e instanceof sap.ui.core.Locale)&&e){if(e.style&&e.style==="daysAgo"){e.style="medium";r.daysAgo=true}}r.innerFormat=sap.ui.core.format.DateFormat.getDateInstance(e,t);break;case"DateTime":r.innerFormat=sap.ui.core.format.DateFormat.getDateTimeInstance(e,t);break;case"Time":r.innerFormat=sap.ui.core.format.DateFormat.getTimeInstance(e,t);break}return r};sap.ca.ui.model.format.DateFormat.prototype.format=function(e,t){e=this.convertToDate(e);if(this.daysAgo&&this.daysAgo===true){return this.formatDaysAgo(e,t)}else{return this.innerFormat.format(e,t)}};sap.ca.ui.model.format.DateFormat.prototype.parse=function(e){return this.innerFormat.parse(e)};sap.ca.ui.model.format.DateFormat.prototype.formatDaysAgo=function(e,t){var a;var r=0,o,n=new Date;var s=t?n.getUTCFullYear():n.getFullYear();var i=t?n.getUTCMonth():n.getMonth();var u=t?n.getUTCDate():n.getDate();var m=t?e.getUTCFullYear():e.getFullYear();var c=t?e.getUTCMonth():e.getMonth();var f=t?e.getUTCDate():e.getDate();var D=Date.UTC(s,i,u);var l=Date.UTC(m,c,f);o=D.valueOf()-l.valueOf();r=Math.floor(o/(24*60*60*1e3));if(r==0){a=sap.ca.ui.utils.resourcebundle.getText("DateFormatter.Today")}else if(r==1){a=sap.ca.ui.utils.resourcebundle.getText("DateFormatter.Yesterday")}else if(r>1&&r<=6){a=sap.ca.ui.utils.resourcebundle.getText("DateFormatter.DaysAgo",[r])}else{a=this.innerFormat.format(e,t)}return a};sap.ca.ui.model.format.DateFormat.prototype.convertToDate=function(e){var t=e;if(typeof e==="string"){if(e.indexOf("Date")!=-1){e=e.substring(e.indexOf("(")+1,e.indexOf(")"));e=new Number(e)}t=new Date(e)}return t};
//# sourceMappingURL=DateFormat.js.map