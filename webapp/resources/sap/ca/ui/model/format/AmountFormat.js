/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("sap.ca.ui.model.format.AmountFormat");jQuery.sap.require("sap.ui.core.LocaleData");jQuery.sap.require("sap.ca.ui.model.format.FormatHelper");jQuery.sap.require("sap.ca.ui.model.format.NumberFormat");jQuery.sap.require("sap.ca.ui.utils.resourcebundle");sap.ca.ui.model.format.AmountFormat=function(){throw new Error};sap.ca.ui.model.format.AmountFormat.oValueInfo={oDefaultFormatOptions:{style:"standard"}};sap.ca.ui.model.format.AmountFormat.oCurrencyModel=null;sap.ca.ui.model.format.AmountFormat.getInstance=function(a,o,t){return this.createInstance(a,o,t,this.oValueInfo)};sap.ca.ui.model.format.AmountFormat.createInstance=function(a,o,t,e){var r=jQuery.sap.newObject(this.prototype);if(o instanceof sap.ui.core.Locale){t=o;o=undefined}if(!t){r.oLocale=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale()}else{r.oLocale=new sap.ui.core.Locale(t)}r.oLocaleData=sap.ui.core.LocaleData.getInstance(r.oLocale);r.oFormatOptions=jQuery.extend(false,{},e.oDefaultFormatOptions,o);r.init(a,o);return r};sap.ca.ui.model.format.AmountFormat.prototype.init=function(a,o){if(o){if(o.decimals!=undefined){if(o.decimals=="preserve"){this.oFormatOptions.decimals=undefined}return}}if(a){this.oFormatOptions.decimals=2;if(!sap.ca.ui.model.format.AmountFormat.oCurrencyModel){sap.ca.ui.model.format.AmountFormat.oCurrencyModel=new sap.ui.model.json.JSONModel;var t=jQuery.sap.getModulePath("sap.ca.ui");sap.ca.ui.model.format.AmountFormat.oCurrencyModel.loadData(t+"/model/currency.json","",false)}var e=sap.ca.ui.model.format.AmountFormat.oCurrencyModel.getData();for(var r=0;r<e.length;r++){if(e[r].Name===a){this.oFormatOptions.decimals=e[r].Decimals;break}}}};sap.ca.ui.model.format.AmountFormat.prototype.format=function(a){var o=sap.ca.ui.model.format.NumberFormat.getInstance(this.oFormatOptions,this.oLocale);return o.format(a)};sap.ca.ui.model.format.AmountFormat.prototype.parse=function(a){var o=sap.ca.ui.model.format.NumberFormat.getInstance(this.oFormatOptions,this.oLocale);return o.parse(a)};sap.ca.ui.model.format.AmountFormat.FormatAmountShort=function(a,o,t){return sap.ca.ui.model.format.AmountFormat.getInstance(o,{style:"short",decimals:t}).format(a)};sap.ca.ui.model.format.AmountFormat.FormatAmountStandard=function(a,o,t){return sap.ca.ui.model.format.AmountFormat.getInstance(o,{style:"standard",decimals:t}).format(a)};sap.ca.ui.model.format.AmountFormat.prototype.formatWithCurrency=function(a,o){var t;var e=this.format(a);var r=sap.ui.core.LocaleData.getInstance(this.oLocale)._get("currencyFormat");if(!r){var m=new sap.ui.core.Locale("en");r=sap.ui.core.LocaleData.getInstance(m)._get("currencyFormat")}var n=r["standard"];if(n===undefined||n==""){t=e;jQuery.sap.log.error("no currency format available for the current locale")}else{var u=n.indexOf(";");var i="";var s=/[\.0,#]+/;var c;if(u!=-1){c=n.substring(0,u)}else{c=n}i=c.replace(s,e);var l=/[\.0,#]+\u00A4/;if(c.match(l)){o=" "+o}var f=/\u00A4[\.0,#]+/;if(c.match(f)){o=o+" "}t=i.replace(/\u00A4/,o)}return t};sap.ca.ui.model.format.AmountFormat.FormatAmountShortWithCurrency=function(a,o,t){return sap.ca.ui.model.format.AmountFormat.getInstance(o,{style:"short",decimals:t}).formatWithCurrency(a,o)};sap.ca.ui.model.format.AmountFormat.FormatAmountStandardWithCurrency=function(a,o,t){return sap.ca.ui.model.format.AmountFormat.getInstance(o,{style:"standard",decimals:t}).formatWithCurrency(a,o)};
//# sourceMappingURL=AmountFormat.js.map