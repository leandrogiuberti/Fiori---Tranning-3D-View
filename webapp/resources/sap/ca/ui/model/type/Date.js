/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("sap.ca.ui.model.type.Date");jQuery.sap.require("sap.ui.model.SimpleType");jQuery.sap.require("sap.ca.ui.model.format.DateFormat");sap.ui.model.SimpleType.extend("sap.ca.ui.model.type.Date",{constructor:function(){sap.ui.model.SimpleType.apply(this,arguments);this.sName="Date"}});sap.ca.ui.model.type.Date.prototype.formatValue=function(t,e){switch(e){case"string":if(t==null){return""}if(this.oInputFormat){if(this.oFormatOptions.source.pattern=="timestamp"){if(typeof t!="number"){if(isNaN(t)){throw new sap.ui.model.FormatException("Cannot format date: "+t+" is not a valid Timestamp")}else{t=parseInt(t,10)}}t=new Date(t)}else{if(t==""){return""}t=this.oInputFormat.parse(t);if(t==null){throw new sap.ui.model.FormatException("Cannot format date: "+t+" has the wrong format")}}}return this.oOutputFormat.format(t,this.bUTC);default:throw new sap.ui.model.FormatException("Don't know how to format Date to "+e)}};sap.ca.ui.model.type.Date.prototype.parseValue=function(t,e){var a;switch(e){case"string":if(t===""){return null}a=this.oOutputFormat.parse(t);if(!a){throw new sap.ui.model.ParseException(t+" is not a valid Date value")}if(this.oInputFormat){if(this.oFormatOptions.source.pattern=="timestamp"){a=a.getTime()}else{a=this.oInputFormat.format(a)}}return a;default:throw new sap.ui.model.ParseException("Don't know how to parse Date from "+e)}};sap.ca.ui.model.type.Date.prototype.validateValue=function(t){if(this.oConstraints){var e=[],a=this.oInputFormat;if(a&&this.oFormatOptions.source.pattern!="timestamp"){t=a.parse(t)}jQuery.each(this.oConstraints,function(o,i){if(a){i=a.parse(i)}switch(o){case"minimum":if(t<i){e.push("minimum")}break;case"maximum":if(t>i){e.push("maximum")}}});if(e.length>0){throw new sap.ui.model.ValidateException("Validation of type constraints failed",e)}}};sap.ca.ui.model.type.Date.prototype.setFormatOptions=function(t){this.oFormatOptions=t;if(t&&t.UTC===true){delete t.UTC;this.bUTC=true}else{this.bUTC=false}this._handleLocalizationChange()};sap.ca.ui.model.type.Date.prototype.getOutputPattern=function(){return this.oOutputFormat.oFormatOptions.pattern};sap.ca.ui.model.type.Date.prototype._handleLocalizationChange=function(){this.oOutputFormat=sap.ca.ui.model.format.DateFormat.getInstance(this.oFormatOptions);if(this.oFormatOptions.source){this.oInputFormat=sap.ca.ui.model.format.DateFormat.getInstance(this.oFormatOptions.source)}};
//# sourceMappingURL=Date.js.map