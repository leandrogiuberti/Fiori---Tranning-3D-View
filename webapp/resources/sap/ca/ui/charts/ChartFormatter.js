/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.require("sap.ca.ui.model.format.NumberFormat");jQuery.sap.require("sap.ca.ui.model.type.Date");sap.ca.ui.charts.DefaultFormatterFunction={SHORTNUMBER:"ShortNumber",STANDARDNUMBER:"StandardNumber",SHORTDATE:"ShortDate",MEDIUMDATE:"MediumDate",LONGDATE:"LongDate",DAYSAGODATE:"DaysAgoDate"};sap.ca.ui.charts.ChartFormatter=function(){if(sap.ca.ui.charts.ChartFormatter.caller!=sap.ca.ui.charts.ChartFormatter.getInstance){throw new Error("This object cannot be instantiated")}this.formatFunctions=[]};sap.ca.ui.charts.ChartFormatter.getInstance=function(){if(!this.instance){this.instance=new sap.ca.ui.charts.ChartFormatter}return this.instance};sap.ca.ui.charts.ChartFormatter.prototype.addFormatter=function(t,r,a){if(typeof a!="string"&&typeof a!="function"){jQuery.sap.log.error("Cannot add formatter : formatter must be a string or a function");return null}if(t&&r){var e=this._getFormatString(t,r,a);this._pushToFormatFunctions(e,a);this._customizeFormatter();return e}else{jQuery.sap.log.error("Cannot add formatter : chart and label must be set");return null}};sap.ca.ui.charts.ChartFormatter.prototype._customizeFormatter=function(){sap.viz.api.env.Format.numericFormatter(this)};sap.ca.ui.charts.ChartFormatter.prototype.format=function(t,r){if(r){if(this.formatFunctions[r]){return this.formatFunctions[r](t)}else{var a;if(this._legacyBubbleFormatter!=null&&typeof this._legacyBubbleFormatter=="function"){a=this._legacyBubbleFormatter(t,r);if(a&&a!=t){return a}}return t}}else{return t}};sap.ca.ui.charts.ChartFormatter.prototype._getFormatString=function(t,r,a){var e="";if(typeof a=="string"){e=a}else{e=t.getId()+r}return e};sap.ca.ui.charts.ChartFormatter.prototype._pushToFormatFunctions=function(t,r){if(typeof r=="string"){switch(r){case sap.ca.ui.charts.DefaultFormatterFunction.SHORTNUMBER:if(!this.formatFunctions[t])this.formatFunctions[t]=this._getShortNumberFormatter();break;case sap.ca.ui.charts.DefaultFormatterFunction.STANDARDNUMBER:if(!this.formatFunctions[t])this.formatFunctions[t]=this._getStandardNumberFormatter();break;case sap.ca.ui.charts.DefaultFormatterFunction.SHORTDATE:if(!this.formatFunctions[t])this.formatFunctions[t]=this._getShortDateFormatter();break;case sap.ca.ui.charts.DefaultFormatterFunction.MEDIUMDATE:if(!this.formatFunctions[t])this.formatFunctions[t]=this._getMediumDateFormatter();break;case sap.ca.ui.charts.DefaultFormatterFunction.LONGDATE:if(!this.formatFunctions[t])this.formatFunctions[t]=this._getLongDateFormatter();break;case sap.ca.ui.charts.DefaultFormatterFunction.DAYSAGODATE:if(!this.formatFunctions[t])this.formatFunctions[t]=this._getDaysAgoDateFormatter();break}}else{this.formatFunctions[t]=r}};sap.ca.ui.charts.ChartFormatter.prototype._getShortNumberFormatter=function(){var t=sap.ca.ui.model.format.NumberFormat.getInstance({style:"short"});return jQuery.proxy(t.format,t)};sap.ca.ui.charts.ChartFormatter.prototype._getStandardNumberFormatter=function(){var t=sap.ca.ui.model.format.NumberFormat.getInstance({style:"Standard"});return jQuery.proxy(t.format,t)};sap.ca.ui.charts.ChartFormatter.prototype._getShortDateFormatter=function(){var t=function(t){if(!this.shortDateType){this.shortDateType=new sap.ca.ui.model.type.Date({style:"short",source:{pattern:"timestamp"}})}return this.shortDateType.formatValue(t,"string")};return jQuery.proxy(t,this)};sap.ca.ui.charts.ChartFormatter.prototype._getMediumDateFormatter=function(){var t=function(t){if(!this.mediumDateType){this.mediumDateType=new sap.ca.ui.model.type.Date({style:"medium",source:{pattern:"timestamp"}})}return this.mediumDateType.formatValue(t,"string")};return jQuery.proxy(t,this)};sap.ca.ui.charts.ChartFormatter.prototype._getLongDateFormatter=function(){var t=function(t){if(!this.longDateType){this.longDateType=new sap.ca.ui.model.type.Date({style:"long",source:{pattern:"timestamp"}})}return this.longDateType.formatValue(t,"string")};return jQuery.proxy(t,this)};sap.ca.ui.charts.ChartFormatter.prototype._getDaysAgoDateFormatter=function(){var t=function(t){if(!this.daysAgoDateType){this.daysAgoDateType=new sap.ca.ui.model.type.Date({style:"daysAgo",source:{pattern:"timestamp"}})}return this.daysAgoDateType.formatValue(t,"string")};return jQuery.proxy(t,this)};
//# sourceMappingURL=ChartFormatter.js.map