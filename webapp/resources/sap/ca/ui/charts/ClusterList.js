/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("sap.ca.ui.charts.ClusterList");jQuery.sap.require("sap.m.List");jQuery.sap.require("sap.ca.ui.utils.resourcebundle");jQuery.sap.require("sap.ui.model.json.JSONModel");jQuery.sap.require("sap.ui.core.Element");jQuery.sap.require("sap.ca.ui.charts.ClusterListItem");sap.ui.core.Element.extend("sap.ca.ui.charts.ClusterList",{metadata:{publicMethods:["getControl","isEmpty","reset","createObject","removeObject","getObject","hasObject","count","update","getGroupIndexFor","addGroup","removeGroup","getItemIndexFor","addItemTo","removeItemFrom","getNumberOfItemsFor"]}});sap.ca.ui.charts.ClusterList.prototype.init=function(){var e=new sap.ui.model.json.JSONModel({items:[]});this._sModelName=this.getId()+"-Model";this.setModel(e,this._sModelName);var t=new sap.ca.ui.charts.ClusterListItem({title:"{title}",items:"{items}"});this._oList=new sap.m.List({inset:true});this._oList.setModel(this.getModel(this._sModelName));this._oList.bindAggregation("items","/items",t);this._oList.setShowNoData(false)};sap.ca.ui.charts.ClusterList.prototype.getControl=function(){return this._oList};sap.ca.ui.charts.ClusterList.prototype.isEmpty=function(){var e=this.getModel(this._sModelName).getProperty("/items");return e.length===0};sap.ca.ui.charts.ClusterList.prototype.reset=function(){this.getModel(this._sModelName).setProperty("/items",[])};sap.ca.ui.charts.ClusterList.prototype.destroy=function(e){sap.ui.core.Element.prototype.destroy.apply(this,e);this.reset();if(this._oList){this._oList.destroy(e)}};sap.ca.ui.charts.ClusterList.prototype.createObject=function(e){if(typeof e==="undefined"){throw new Error("The 'path' is undefined!")}var t=undefined;var r=this.getModel(this._sModelName).getProperty("/items");e.split(".").forEach(function(e,i,s){var o=false;jQuery.each(r,function(i,s){if(s["key"]===e){t=s;r=s["items"];o=true;return false}});if(!o){t={key:e,items:[]};r.push(t);r=t["items"]}});return t};sap.ca.ui.charts.ClusterList.prototype.removeObject=function(e){if(typeof e==="undefined"){throw new Error("The 'path' is undefined!")}var t=this.getModel(this._sModelName).getProperty("/items");var r=-1;e.split(".").forEach(function(e,i,s){jQuery.each(t,function(o,n){if(n["key"]===e){if(i<s.length-1){t=n["items"]}else{r=o}return false}})});if(r!==-1){t.splice(r,1)}};sap.ca.ui.charts.ClusterList.prototype.getObject=function(e){if(typeof e==="undefined"){throw new Error("The 'path' is undefined!")}var t=undefined;var r=this.getModel(this._sModelName).getProperty("/items");e.split(".").forEach(function(e,i,s){if(typeof r==="undefined"){return true}var o=false;jQuery.each(r,function(t,i){if(i["key"]===e){r=i["items"];o=true;return false}});if(o){t=r}else{t=undefined;return false}});return t};sap.ca.ui.charts.ClusterList.prototype.hasObject=function(e){if(typeof e==="undefined"){throw new Error("The 'path' is undefined!")}if(e.indexOf(".")===-1){return typeof this.getObject(e)!=="undefined"}var t=this.getObject(e.substring(0,e.lastIndexOf(".")));if(typeof t==="undefined"){return false}var r=e.substring(e.lastIndexOf(".")+1);var i=false;jQuery.each(t,function(e,t){if(t["key"]===r){i=true;return false}});return i};sap.ca.ui.charts.ClusterList.prototype.count=function(e){if(typeof e==="undefined"){throw new Error("The 'path' is undefined!")}var t=this.getObject(e);if(typeof t==="undefined"){return 0}return t.length};sap.ca.ui.charts.ClusterList.prototype.update=function(){this.getModel(this._sModelName).updateBindings(true)};sap.ca.ui.charts.ClusterList.prototype.getGroupIndexFor=function(e){if(typeof e==="undefined"||!Array.isArray(e)||e.length===0){throw new Error("The group 'key' is undefined!")}var t=-1;var r=this.getModel(this._sModelName).getProperty("/items");jQuery.each(r,function(r,i){if(i["key"].toString()===e.toString()){t=r;return false}});return t};sap.ca.ui.charts.ClusterList.prototype.addGroup=function(e){if(Array.isArray(e)){var t;for(t in e){this._addGroup(e[t])}}else{this._addGroup(e)}};sap.ca.ui.charts.ClusterList.prototype._addGroup=function(e){var t=e["key"];if(typeof t==="undefined"||!Array.isArray(t)||t.length===0){throw new Error("The group 'key' is undefined!")}if(this.getGroupIndexFor(t)!==-1){throw new Error("Group already exist with '"+t.toString()+"' key!")}var r=this.getModel(this._sModelName).getProperty("/items");if(!e.hasOwnProperty("items")){e["items"]=[]}e["key"]=t.toString();if(!e.hasOwnProperty("subgroups")){e["subgroups"]=[]}if(t.length>1){var i=t.slice(0);i.splice(t.length-1,1);var s=this.getGroupIndexFor(i);if(s===-1){throw new Error("Group does not exist for '"+i.toString()+"' key!")}var o=r[s];var n=o["subgroups"];if(typeof n==="undefined"||!Array.isArray(n)){throw new Error("The group 'subgroups' is undefined!")}n.push(t.toString())}r.push(e);this.getModel(this._sModelName).setProperty("/items",r)};sap.ca.ui.charts.ClusterList.prototype.removeGroup=function(e){if(typeof e==="undefined"||!Array.isArray(e)||e.length===0){jQuery.sap.log.error("The group 'key' is undefined!");return}var t=this.getGroupIndexFor(e);if(t===-1){jQuery.sap.log.warning("Group does not exist for '"+e.toString()+"' key!");return}var r=this.getModel(this._sModelName).getProperty("/items");r.splice(t,1);if(e.length>1){var i=e.slice(0);var s;for(s=e.length-1;s>0;s--){var o=i.toString();i.splice(s,1);var n=this.getGroupIndexFor(i);if(n!==-1){var a=r[n];var u=a["subgroups"];var p=-1;jQuery.each(u,function(e,t){if(t===o){p=e}});if(p!==-1){u.splice(p,1);if(u.length===0){r.splice(n,1)}}}}}this.getModel(this._sModelName).setProperty("/items",r)};sap.ca.ui.charts.ClusterList.prototype.getItemIndexFor=function(e,t){var r=-1;if(typeof e==="undefined"||!Array.isArray(e)||e.length===0){jQuery.sap.log.error("The group 'key' is undefined!");return r}if(typeof t==="undefined"){jQuery.sap.log.error("The item 'key' is undefined!");return r}var i=this.getGroupIndexFor(e);if(i===-1){jQuery.sap.log.warning("Group does not exist for '"+e.toString()+"' key!");return r}var s=this.getModel(this._sModelName).getProperty("/items");var o=s[i];var n=o["items"];jQuery.each(n,function(e,i){if(i["key"]===t){r=e;return false}});return r};sap.ca.ui.charts.ClusterList.prototype.addItemTo=function(e,t){if(Array.isArray(t)){var r;for(r in t){this._addItemTo(e,t[r])}}else{this._addItemTo(e,t)}this.getModel(this._sModelName).updateBindings(true)};sap.ca.ui.charts.ClusterList.prototype._addItemTo=function(e,t){if(typeof e==="undefined"||!Array.isArray(e)||e.length===0){throw new Error("The group 'key' is undefined!")}if(this.getItemIndexFor(e,t["key"])!==-1){throw new Error("Item already exist with '"+t["key"]+"' key!")}var r=this.getGroupIndexFor(e);var i=this.getModel(this._sModelName).getProperty("/items");var s=i[r];s["items"].push(t);i[r]=s;this.getModel(this._sModelName).setProperty("/items",i)};sap.ca.ui.charts.ClusterList.prototype.removeItemFrom=function(e,t){if(typeof e==="undefined"||!Array.isArray(e)||e.length===0){jQuery.sap.log.error("The group 'key' is undefined!");return}if(typeof t==="undefined"){jQuery.sap.log.error("The item 'key' is undefined!");return}var r=this.getGroupIndexFor(e);if(r===-1){jQuery.sap.log.warning("Group does not exist for '"+e.toString()+"' key!");return}var i=this.getItemIndexFor(e,t);if(i===-1){jQuery.sap.log.warning("Item does not exist for '"+t+"' key!");return}var s=this.getModel(this._sModelName).getProperty("/items");var o=s[r];var n=o["items"];n.splice(i,1);o["items"]=n;s[r]=o;this.getModel(this._sModelName).setProperty("/items",s);this.getModel(this._sModelName).updateBindings(true)};sap.ca.ui.charts.ClusterList.prototype.getNumberOfItemsFor=function(e){if(typeof e==="undefined"||!Array.isArray(e)||e.length===0){jQuery.sap.log.error("The group 'key' is undefined!");return 0}var t=this.getGroupIndexFor(e);if(t===-1){jQuery.sap.log.warning("Group does not exist for '"+e.toString()+"' key!");return 0}var r=this.getModel(this._sModelName).getProperty("/items");var i=r[t];var s=i["items"];return s.length};
//# sourceMappingURL=ClusterList.js.map