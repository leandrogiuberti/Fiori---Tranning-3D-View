/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2014 SAP SE. All rights reserved
 */
jQuery.sap.declare("sap.ca.ui.charts.Chart");jQuery.sap.require("sap.ca.ui.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.ca.ui.charts.Chart",{metadata:{deprecated:true,library:"sap.ca.ui",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"},dataset:{type:"object",group:"Data",defaultValue:null},chartType:{type:"string",group:"Data",defaultValue:"Bar"},minShapeSize:{type:"sap.ui.core.CSSSize",group:"Data",defaultValue:"48px"},label:{type:"string",group:"Data",defaultValue:"",bindable:"bindable"},title:{type:"string",group:"Appearance",defaultValue:""},icon:{type:"string",group:"Appearance",defaultValue:""},secondAxisVisible:{type:"boolean",group:"Appearance",defaultValue:true},showLegend:{type:"boolean",group:"Behavior",defaultValue:true},selectionMode:{type:"sap.ca.ui.charts.ChartSelectionMode",group:"Behavior",defaultValue:sap.ca.ui.charts.ChartSelectionMode.Multiple},showHoverBackground:{type:"boolean",group:"Behavior",defaultValue:false},showTooltip:{type:"boolean",group:"Behavior",defaultValue:false},showPopover:{type:"boolean",group:"Behavior",defaultValue:true},showDataLabel:{type:"boolean",group:"Behavior",defaultValue:true},yAxisLabelFormatter:{type:"string",group:"Data",defaultValue:null},yAxis2LabelFormatter:{type:"string",group:"Data",defaultValue:null},xAxisLabelFormatter:{type:"string",group:"Data",defaultValue:null},xAxis2LabelFormatter:{type:"string",group:"Data",defaultValue:null},plotAreaAxisTooltipFormatter:{type:"object",group:"Data",defaultValue:null},tooltipFormatter:{type:"object",group:"Data",defaultValue:null},dataLabelFormatter:{type:"object",group:"Data",defaultValue:null},popoverFormatter:{type:"object",group:"Data",defaultValue:null},popoverGroupFormatter:{type:"string",group:"Data",defaultValue:null},chartSemanticColorFormatter:{type:"object",group:"Data",defaultValue:null},internalVizChart:{type:"sap.ui.core.Control",group:"Data",defaultValue:null},chartPopOver:{type:"sap.ui.core.Control",group:"Data",defaultValue:null},popoverSubHeader:{type:"sap.ui.core.Control",group:"Appearance",defaultValue:null},popoverFooter:{type:"sap.ui.core.Control",group:"Appearance",defaultValue:null},advancedChartSettings:{type:"object",group:"Appearance",defaultValue:null},stackedChartWidthEnhancer:{type:"boolean",group:"Appearance",defaultValue:false},noData:{type:"sap.ui.core.Control",group:"Appearance",defaultValue:null}},aggregations:{internalContent:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},chartPopover:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}},events:{selectDataPoint:{},popoverBeforeOpen:{},popoverAfterOpen:{}}}});jQuery.sap.require("sap.m.ScrollContainer");jQuery.sap.require("sap.m.Bar");jQuery.sap.require("sap.m.Page");jQuery.sap.require("sap.m.Label");jQuery.sap.require("sap.m.Button");jQuery.sap.require("sap.m.ResponsivePopover");jQuery.sap.require("sap.m.PlacementType");jQuery.sap.require("sap.m.PopoverRenderer");jQuery.sap.require("sap.ui.core.theming.Parameters");jQuery.sap.require("sap.ca.ui.charts.ChartType");jQuery.sap.require("sap.ca.ui.charts.ChartSelectionMode");jQuery.sap.require("sap.ca.ui.charts.ChartSemanticColor");jQuery.sap.require("sap.ca.ui.charts.ChartColor");jQuery.sap.require("sap.ca.ui.charts.ClusterList");jQuery.sap.require("sap.ca.ui.charts.ChartFormatter");sap.ui.getCore().loadLibrary("sap.viz");sap.ca.ui.charts.Chart.prototype.init=function(){this._oScrollContainer=new sap.m.ScrollContainer(this._createId("scroll"),{width:"100%",height:"100%"});this.setAggregation("internalContent",this._oScrollContainer);this._oSelectedDataList=new sap.ca.ui.charts.ClusterList(this._createId("clusterList"));this._createPopover();this.oChartFormatter=sap.ca.ui.charts.ChartFormatter.getInstance();this._oMinimumShapeSizes={desktop:24,mobile:48,desktop_px:jQuery.proxy(function(){return this._oMinimumShapeSizes.desktop+"px"},this),mobile_px:jQuery.proxy(function(){return this._oMinimumShapeSizes.mobile+"px"},this)}};sap.ca.ui.charts.Chart.prototype._createPopover=function(){var t=new sap.m.Bar(this._createId("popoverHeaderBar"),{contentMiddle:[new sap.m.Label(this._createId("--popoverLabel"),{text:sap.ca.ui.utils.resourcebundle.getText("ChartPopover.title")})],contentRight:jQuery.device.is.phone?[]:[new sap.m.Button(this._createId("--popoverCloseButton"),{icon:"sap-icon://"+sap.ui.core.theming.Parameters.get("sapCaUiChartPopoverCloseIcon"),width:sap.ui.core.theming.Parameters.get("sapCaUiChartPopoverCloseIconSize"),press:jQuery.proxy(this._closePopover,this)})]});this._oChartPopover=new sap.m.ResponsivePopover(this._createId("popover"),{modal:false,enableScrolling:true,verticalScrolling:true,horizontalScrolling:false,placement:sap.m.PlacementType.Auto,contentWidth:"18rem",customHeader:t,content:[this._oSelectedDataList.getControl()]});this._oChartPopover.addStyleClass("sapCaUiChartPopOver");this.setAggregation("chartPopover",this._oChartPopover);if(!jQuery.device.is.phone){this._oChartPopover._oControl.oPopup.setAutoClose(false)}var e=sap.ui.getCore().getStaticAreaRef();e=sap.ui.getCore().getUIArea(e);e.addContent(this._oChartPopover,true);this._oChartPopover._bAppendedToUIArea=true;this._oChartPopover.attachAfterOpen(null,jQuery.proxy(this._afterOpenPopover,this));if(!jQuery.device.is.phone){jQuery(document).bind(sap.ui.Device.support.touch?"touchstart":"mousedown",jQuery.proxy(this._mouseDownHandler,this))}if(sap.ui.Device.browser.internet_explorer){this._oChartPopover._oControl.oPopup.restoreFocus=false}this.bIsRTL=sap.ui.getCore().getConfiguration().getRTL()&&!jQuery.device.is.phone;if(this.bIsRTL){this._oChartPopover.attachBeforeClose(null,jQuery.proxy(this._beforeClosePopover,this));var a=jQuery.proxy(this._adjustPopoverPosition,this);var r=jQuery.proxy(this._oChartPopover._oControl.oPopup._applyPosition,this._oChartPopover._oControl.oPopup);this._oChartPopover._oControl.oPopup._applyPosition=function(t,e){r(t,e);a(t.of)}}};sap.ca.ui.charts.Chart.prototype._mouseDownHandler=function(t){var e=t.target;if(!this._isInChartArea(e)){this._closePopover()}};sap.ca.ui.charts.Chart.prototype._isInChartArea=function(t){if(!t||!t.getAttribute){return false}var e=t.getAttribute("class");if(e&&(e.indexOf("sapCaUiChartPopOver")>=0||e.indexOf("sapCaUiCLI")>=0||e.indexOf("v-datapoint")>=0||e.indexOf("v-morphable")>=0||e.indexOf("v-datashape")>=0||e.indexOf("v-datashapesgroup")>=0||e.indexOf("v-bound")>=0||e.indexOf("v-gridline")>=0||e.indexOf("v-datalabel")>=0||e.indexOf("v-lines")>=0||e.indexOf("v-label")>=0||e.indexOf("v-labelarea")>=0||e.indexOf("v-hovershadow")>=0||e.indexOf("v-m-root")>=0||e.indexOf("v-m-background")>=0||e.indexOf("v-m-yAxis")>=0||e.indexOf("v-m-xAxis")>=0||e.indexOf("v-m-title")>=0||e.indexOf("v-m-main")>=0||e.indexOf("v-m-plot")>=0||e.indexOf("v-m-legend")>=0||e.indexOf("v-legend-item")>=0||e.indexOf("v-body")>=0||e.indexOf("v-subtitle")>=0||e.indexOf("v-title")>=0||e.indexOf("v-incised-gridline")>=0||e.indexOf("v-fixed-valueaxisline")>=0||e.indexOf("v-multiValue")>=0||e.indexOf("v-background-body")>=0||e.indexOf("v-background-border")>=0||e.indexOf("v-axis")>=0||e.indexOf("v-axis-item")>=0||e.indexOf("v-subaxis")>=0||e.indexOf("v-valueaxis")>=0||e.indexOf("v-valueaxisline")>=0||e.indexOf("v-categoryaxisline")>=0||e.indexOf("viz-axis")>=0||e.indexOf("viz-axis-body")>=0||e.indexOf("viz-axis-label")>=0||e.indexOf("viz-legend")>=0)){return true}if(t.parentElement){return this._isInChartArea(t.parentElement)}if(t.parentNode){return this._isInChartArea(t.parentNode)}return false};sap.ca.ui.charts.Chart.prototype._closePopover=function(){if(this._oChartPopover){if(this._oChartPopover.isOpen()){this._oChartPopover.close()}}};sap.ca.ui.charts.Chart.prototype._beforeClosePopover=function(){if(this.bIsRTL){this._deregisterContentResizeHandler();this._enableConfigurationRTL();this.sPopoverPlacement=null}};sap.ca.ui.charts.Chart.prototype._afterOpenPopover=function(){this.firePopoverAfterOpen();if(this.bIsRTL){this._registerPopupContentResizeHandler()}};sap.ca.ui.charts.Chart.prototype.exit=function(){this._deregisterEvent();this._closePopover();if(this._oSelectedDataList){this._oSelectedDataList.destroy();this._oSelectedDataList=null}if(this._oChartPopover){if(this.bIsRTL){this._deregisterContentResizeHandler();this._enableConfigurationRTL();this.sPopoverPlacement=null}this._oChartPopover.destroy();this._oChartPopover=null}};sap.ca.ui.charts.Chart.prototype._deregisterEvent=function(){if(jQuery.device.is.desktop){jQuery(window).unbind("resize",jQuery.proxy(this._onResize,this))}else{sap.ui.Device.orientation.detachHandler(this._onOrientationChange,this);sap.ui.Device.resize.detachHandler(this._onResize,this)}};sap.ca.ui.charts.Chart.prototype._createId=function(t){return this.getId()+"-"+t};sap.ca.ui.charts.Chart.prototype._findInCss=function(t){var e=[];if(!this._sapCaStylesheet){var a=null;jQuery.each(document.styleSheets,function(t,e){if(!!e.ownerNode&&/sap.ca.ui/.test(e.ownerNode.id)||!!e.owningElement&&/sap.ca.ui/.test(e.owningElement.id)){a=e}});if(a==null){jQuery.each(document.styleSheets,function(e,r){if(r.rules&&r.rules.length>0){jQuery.each(r.rules,function(e,i){if(t.test(i.selectorText)){a=r;return false}})}else if(r.cssRules&&r.cssRules.length>0){jQuery.each(r.cssRules,function(e,i){if(t.test(i.selectorText)){a=r;return false}})}if(a){return false}})}this._sapCaStylesheet=a}if(this._sapCaStylesheet){if(this._sapCaStylesheet.rules&&this._sapCaStylesheet.rules.length>0){jQuery.each(this._sapCaStylesheet.rules,function(a,r){if(t.test(r.selectorText)){e.push(r)}})}else if(this._sapCaStylesheet.cssRules&&this._sapCaStylesheet.cssRules.length>0){jQuery.each(this._sapCaStylesheet.cssRules,function(a,r){if(t.test(r.selectorText)){e.push(r)}})}}return e};sap.ca.ui.charts.Chart.prototype._getColorPalette=function(){var t=[];var e;for(e=1;e<12;e++){t.push(sap.ui.core.theming.Parameters.get("sapUiChart"+e))}return t};sap.ca.ui.charts.Chart.prototype._getSemanticPalette=function(){var t=[];t[sap.ca.ui.charts.ChartSemanticColor.NeutralDark]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Neutral-Dark");t[sap.ca.ui.charts.ChartSemanticColor.Neutral]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Neutral");t[sap.ca.ui.charts.ChartSemanticColor.NeutralLight]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Neutral-Light");t[sap.ca.ui.charts.ChartSemanticColor.GoodDark]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Good-Dark");t[sap.ca.ui.charts.ChartSemanticColor.Good]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Good");t[sap.ca.ui.charts.ChartSemanticColor.GoodLight]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Good-Light");t[sap.ca.ui.charts.ChartSemanticColor.CriticalDark]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Critical-Dark");t[sap.ca.ui.charts.ChartSemanticColor.Critical]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Critical");t[sap.ca.ui.charts.ChartSemanticColor.CriticalLight]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Critical-Light");t[sap.ca.ui.charts.ChartSemanticColor.BadDark]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Bad-Dark");t[sap.ca.ui.charts.ChartSemanticColor.Bad]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Bad");t[sap.ca.ui.charts.ChartSemanticColor.BadLight]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Bad-Light");return t};sap.ca.ui.charts.Chart.prototype._getSecondaryColorPalette=function(t){var e=this.getDataset();var a=[];if(e&&e.getVIZDataset()){var r=e.getVIZDataset().getMeasureValuesGroupByIdx(0).getMeasureValues().length;jQuery.extend(a,t);a.splice(0,r)}return a};sap.ca.ui.charts.Chart.prototype._getDataLabelCss=function(){var t=".v-datalabel {"+"font-family:"+sap.ui.core.theming.Parameters.get("sapCaUiChartFontFamily")+";"+"font-size:"+sap.ui.core.theming.Parameters.get("sapCaUiChartFontSize")+";"+"font-weight:"+sap.ui.core.theming.Parameters.get("sapCaUiChartFontWeight")+";"+"text-shadow:"+sap.ui.core.theming.Parameters.get("sapCaUiChartDataLabelShadow")+";"+"fill:"+sap.ui.core.theming.Parameters.get("sapCaUiChartFontColor")+";"+"}";return t};sap.ca.ui.charts.Chart.prototype._getDataPointCss=function(){if(!this._sDataPointRule){var t="";var e=this._findInCss(/.sapCaUiChart .v-datapoint/);if(e.length>0){var a=e[0];t=".v-datapoint {";var r;for(r=0;r<a.style.length;r++){t+=a.style[r]+": "+a.style[a.style[r]]+"; "}t+="}"}this._sDataPointRule=t}return this._sDataPointRule};sap.ca.ui.charts.Chart.prototype._getEMSize=function(t){if(!this._emSize){this._emSize=parseFloat(jQuery("body").css("font-size"))}var e;if(jQuery.sap.endsWith(t,"em")||jQuery.sap.endsWith(t,"rem")){e=this._emSize*parseFloat(t)}else{e=parseFloat(t)}return e};sap.ca.ui.charts.Chart.prototype._getMarkerSize=function(){if(!this._iMarkerSize){var t=0;var e=this._findInCss(/.sapCaUiChartMarkerSize/);if(e.length>0){var a=e[0];var r=a.style["font-size"];if(r==null){r=a.style["fontSize"]}t=parseInt(this._getEMSize(r),10)}this._iMarkerSize=t}return this._iMarkerSize};sap.ca.ui.charts.Chart.prototype._getAlignedScale=function(){var t=0;var e;var a=null;if(this.getDataset()){var r=this.getDataset().getVIZDataset();var i=[];var o;for(o=0;o<r.getMeasureValuesGroupByIdx(1).getMeasureValues()[0]._values[0].length;o++){i.push(parseInt(r.getMeasureValuesGroupByIdx(1).getMeasureValues()[0]._values[0][o],10)+parseInt(r.getMeasureValuesGroupByIdx(1).getMeasureValues()[1]._values[0][o],10))}var s=Math.max.apply(Math,i);var n=Math.min.apply(Math,i);var h;for(h=0;h<r.getMeasureValuesGroupCount();h++){var l=Math.max(Math.max.apply(Math,r.getMeasureValuesGroupByIdx(h).getMeasureValues()[0]._values[0]),s);var p=Math.min(Math.min.apply(Math,r.getMeasureValuesGroupByIdx(h).getMeasureValues()[0]._values[0]),n);if(!e){e=l}t=t<p?t:p;e=e>l?e:l}e=e>0?parseInt(1.05*e,10):parseInt(.95*e,10);a={fixedRange:true,minValue:t,maxValue:e}}return a};sap.ca.ui.charts.Chart.prototype._getMergedChartSettings=function(){var t=this._getChartSettings();var e={};if(this._oInternalVizChart){e=this._oInternalVizChart._getOptions()}return jQuery.extend(true,e,t,this.getAdvancedChartSettings())};sap.ca.ui.charts.Chart.prototype._getChartSettings=function(){var t=this._getColorPalette().concat();var e;if(this.getDataset()){var a=this._getSemanticPalette();var r;this.semanticColorFormatterAllowed=false;var i=this.getChartSemanticColorFormatter();if(this._vizChartType.name!=sap.ca.ui.charts.ChartType.Bubble){var o=this.getDataset().getMeasures();var s={};var n={};var h=false;for(r=0;r<o.length;r++){var l=o[r].data("fillColor");if(l!=null){if(a.hasOwnProperty(l)){s[r]=a[l]}else{n[r]=sap.ui.core.theming.Parameters.get(l)}}else{h=true;break}}if(!h){if(!jQuery.isEmptyObject(s)&&jQuery.isEmptyObject(n)){for(e in s){t.splice(e,0,s[e])}if(i!=null&&i instanceof Function){this.semanticColorFormatterAllowed=true}}if(!jQuery.isEmptyObject(n)&&jQuery.isEmptyObject(s)){for(e in n){t.splice(e,0,n[e])}if(i!=null&&i instanceof Function){jQuery.sap.log.error("chartSemanticColorFormatter couldn't be used in the chart [chart ID:"+this.getId()+"]  because "+"all measures aren't associated with a semantic chart color.")}}if(!jQuery.isEmptyObject(n)&&!jQuery.isEmptyObject(s)){jQuery.sap.log.error("Chart colors and semantic chart colors couldn't be mixed.")}}else{if(!jQuery.isEmptyObject(n)||!jQuery.isEmptyObject(s)){jQuery.sap.log.error("All measures must be associated with a chart color or a semantic chart color.")}if(jQuery.isEmptyObject(s)&&jQuery.isEmptyObject(n)&&i!=null&&i instanceof Function){jQuery.sap.log.error("chartSemanticColorFormatter couldn't be used in the chart [chart ID:"+this.getId()+"]  because "+"all measures aren't associated with a semantic chart color.")}}}else{var p=this.getDataset().getDimensions();var u=this.getDataset().getVIZDataset()._dataSet.analysisAxis[0].data;var s={};var n={};var c=false;for(r=0;r<p.length;r++){var d=p[r].data("fillColors");if(d!=null){var f;for(f=0;f<u.length;f++){if(u[f].name==p[r].getName()){var g=u[f].values;var C=[];jQuery.each(g,function(t,e){if(jQuery.inArray(e,C)===-1){C.push(e)}});var y;for(y=0;y<C.length;y++){if(d.hasOwnProperty(C[y])){var l=d[C[y]];if(a.hasOwnProperty(l)){s[y]=a[l];var v=jQuery.inArray(s[y],t);if(v!=-1){t.splice(v,1)}}else{n[y]=sap.ui.core.theming.Parameters.get(l);var v=jQuery.inArray(n[y],t);if(v!=-1){t.splice(v,1)}}}else{c=true;break}}}}}}if(!c){if(!jQuery.isEmptyObject(s)&&jQuery.isEmptyObject(n)){for(e in s){t.splice(e,0,s[e])}if(i!=null&&i instanceof Function){this.semanticColorFormatterAllowed=true}}if(!jQuery.isEmptyObject(n)&&jQuery.isEmptyObject(s)){for(e in n){t.splice(e,0,n[e])}if(i!=null&&i instanceof Function){jQuery.sap.log.error("chartSemanticColorFormatter couldn't be used in the chart [chart ID:"+this.getId()+"]  because "+"all values in a dimension aren't associated with a semantic chart color.")}}if(!jQuery.isEmptyObject(s)&&!jQuery.isEmptyObject(n)){jQuery.sap.log.error("Chart colors and semantic chart colors couldn't be mixed.")}}else{if(!jQuery.isEmptyObject(s)||!jQuery.isEmptyObject(n)){jQuery.sap.log.error("All values in a dimension must be associated with a chart color or a semantic chart color.")}}if(jQuery.isEmptyObject(s)&&jQuery.isEmptyObject(n)&&i!=null&&i instanceof Function){jQuery.sap.log.error("chartSemanticColorFormatter couldn't be used in the chart [chart ID:"+this.getId()+"]  because "+"all values in a dimension aren't associated with a semantic chart color.")}}}var m={width:"100%",height:"100%",general:{layout:{padding:5}},plotArea:{colorPalette:t,marker:{visible:true,size:this._getMarkerSize()},axisTooltip:{formatString:this.getProperty("plotAreaAxisTooltipFormatter")},animation:{dataLoading:true,dataUpdating:true,resizing:false}},title:{visible:this.getProperty("title")!==undefined&&this.getProperty("title")!==null&&this.getProperty("title")!=="",text:this.getProperty("title")},dataLabel:{visible:this.getProperty("showDataLabel"),position:this._vizChartType.dataLabelPosition,formatString:this.getProperty("dataLabelFormatter")},legend:{visible:this.getShowLegend(),isScrollable:true},tooltip:{visible:this.getShowTooltip(),formatString:this.getProperty("tooltipFormatter")},hoverline:{visible:this._vizChartType.showHoverLine},interaction:{pan:{enable:false},supportLassoEvent:false,selectability:{mode:this.getSelectionMode().toLowerCase()}},background:{visible:true,border:{left:{visible:false},right:{visible:false},bottom:{visible:true},top:{visible:true}}},xAxis:{label:{formatString:this.getProperty("xAxisLabelFormatter")}},xAxis2:{label:{formatString:this.getProperty("xAxis2LabelFormatter")},visible:this.getProperty("secondAxisVisible")},yAxis:{label:{formatString:this.getProperty("yAxisLabelFormatter")}},yAxis2:{label:{formatString:this.getProperty("yAxis2LabelFormatter")},visible:this.getProperty("secondAxisVisible")}};if(this._vizChartType.dualAxis){m.plotArea.primaryValuesColorPalette=t;m.plotArea.secondaryValuesColorPalette=this._getSecondaryColorPalette(t);if(!this.getProperty("secondAxisVisible")&&this._vizChartType.alignScales){var _=this._getAlignedScale();if(this._vizChartType.scroll.horizontal){m.yAxis2.scale=_;m.yAxis.scale=_}else{m.xAxis2.scale=_;m.xAxis.scale=_}}}return m};sap.ca.ui.charts.Chart.prototype.applySettings=function(t,e){sap.ui.core.Control.prototype.applySettings.apply(this,arguments);this._initChart()};sap.ca.ui.charts.Chart.prototype._initChart=function(){this._vizChartType=sap.ca.ui.charts.ChartType.getChartProperties(this.getChartType());var t=this._getMergedChartSettings();if(this._vizChartType!=null){if(this.getLabel()==""&&!this.mBindingInfos["label"]){this.setLabel(this._vizChartType.displayLabel)}if(this.getIcon()==""){this.setProperty("icon",this._vizChartType.icon)}if(this._oInternalVizChart!=null){this._oInternalVizChart.destroy()}t.tooltip=null;this._oInternalVizChart=new sap.viz.ui5[this._vizChartType.name](this._createId("vizChart"),t);this._oInternalVizChart.addDelegate({onAfterRendering:function(){this._onResizeInt()}},true,this);this._oInternalVizChart.attachBeforeCreateViz(function(t){var e=t.getParameter("usrOptions");if(this._vizChartType.vizType){e.type=this._vizChartType.vizType}e.css=this._getDataLabelCss()+this._getDataPointCss();e.options=this._getMergedChartSettings()},this);this._oScrollContainer.addContent(this._oInternalVizChart);this._oScrollContainer.setVertical(this._vizChartType.scroll.vertical);this._oScrollContainer.setHorizontal(this._vizChartType.scroll.horizontal);this._oInternalVizChart.attachInitialized(this.onChartInitialized,this);this._oInternalVizChart.attachSelectData(this.onSelectData,this);this._oInternalVizChart.attachDeselectData(this.onDeselectData,this);if(jQuery.sap.touchEventMode=="ON"&&jQuery.device.is.tablet){this._oInternalVizChart.attachBrowserEvent("touchmove",jQuery.proxy(this._closePopover,this))}this.setMinShapeSize()}else{jQuery.sap.log.error("Cannot instantiate the Chart control, "+this.getVizType()+" is not a recognized type")}};sap.ca.ui.charts.Chart.prototype.updateBindings=function(t,e){sap.ui.core.Control.prototype.updateBindings.apply(this,arguments)};sap.ca.ui.charts.Chart.prototype.invalidate=function(t,e){if(e){if(this._sInvalidateDelay){jQuery.sap.clearDelayedCall(this._sInvalidateDelay)}this._sInvalidateDelay=jQuery.sap.delayedCall(200,this,sap.ui.core.Control.prototype.invalidate,arguments)}else{sap.ui.core.Control.prototype.invalidate.apply(this,arguments)}};sap.ca.ui.charts.Chart.prototype.setChartType=function(t){this.setProperty("chartType",t);this.setProperty("icon","");this._vizChartType=sap.ca.ui.charts.ChartType.getChartProperties(this.getChartType());this._initChart();return this};sap.ca.ui.charts.Chart.prototype.setTitle=function(t){this.setProperty("title",t);return this};sap.ca.ui.charts.Chart.prototype.setInternalVizChart=function(t){jQuery.sap.log.warning("InternalVizChart cannot be set from outside a sap.ca.ui.chart.Chart class.");return this};sap.ca.ui.charts.Chart.prototype.setChartPopOver=function(t){jQuery.sap.log.warning("ChartPopOver cannot be set from outside a sap.ca.ui.chart.Chart class.");return this};sap.ca.ui.charts.Chart.prototype.setDataset=function(t){this._oInternalVizChart.setDataset(t);this.setProperty("dataset",t);return this};sap.ca.ui.charts.Chart.prototype.getDataset=function(){var t=null;if(this._oInternalVizChart){t=this._oInternalVizChart.getDataset()}return t};sap.ca.ui.charts.Chart.prototype.getInternalVizChart=function(){return this._oInternalVizChart};sap.ca.ui.charts.Chart.prototype.getChartPopOver=function(){return this._oChartPopover};sap.ca.ui.charts.Chart.prototype.setModel=function(t){if(this._oSelectedDataList){this._oSelectedDataList.reset()}sap.ui.core.Control.prototype.setModel.apply(this,arguments);return this};sap.ca.ui.charts.Chart.prototype.setHeight=function(t){this.setProperty("height",t);return this};sap.ca.ui.charts.Chart.prototype.setWidth=function(t){this.setProperty("width",t);return this};sap.ca.ui.charts.Chart.prototype.setShowLegend=function(t){this.setProperty("showLegend",t);if(this._oInternalVizChart){this._oInternalVizChart.getLegend().setVisible(t)}return this};sap.ca.ui.charts.Chart.prototype.setShowTooltip=function(t){this.setProperty("showTooltip",t);if(this._oInternalVizChart){var e=this._oInternalVizChart.getToolTip();if(e){if(e.setVisible){e.setVisible(t)}if(e.setEnabled){e.setEnabled(t)}}else{jQuery.sap.log.error("Aggregation toolTip couldn't be found in viz chart.")}}return this};sap.ca.ui.charts.Chart.prototype.setSelectionMode=function(t){this.setProperty("selectionMode",t);if(this._oInternalVizChart){this._oInternalVizChart.getInteraction().getSelectability().setMode(t.toLowerCase());this._oInternalVizChart.selection([],{clearSelection:true})}this._oSelectedDataList.reset();this._closePopover();return this};sap.ca.ui.charts.Chart.prototype._setCursorStyle=function(){var t=this.$();var e=!!this.getSelectionMode()?this.getSelectionMode():"";if(e.toLowerCase()===sap.ca.ui.charts.ChartSelectionMode.None.toLowerCase()){t.addClass("sapCaUiChartSelectionNoneCursor")}else{t.removeClass("sapCaUiChartSelectionNoneCursor")}};sap.ca.ui.charts.Chart.prototype.getSelectionMode=function(){if(this._oInternalVizChart){return this._oInternalVizChart.getInteraction().getSelectability().getMode()}jQuery.sap.log.debug("getSelectionMode called without an internal chart");return this.getProperty("selectionMode")};sap.ca.ui.charts.Chart.prototype.setXAxisLabelFormatter=function(t){var e=this.oChartFormatter.addFormatter(this._oInternalVizChart,"xAxisLabelFormatter",t);this.setProperty("xAxisLabelFormatter",e);return this};sap.ca.ui.charts.Chart.prototype.setXAxis2LabelFormatter=function(t){var e=this.oChartFormatter.addFormatter(this._oInternalVizChart,"xAxis2LabelFormatter",t);this.setProperty("xAxis2LabelFormatter",e);return this};sap.ca.ui.charts.Chart.prototype.setYAxisLabelFormatter=function(t){var e=this.oChartFormatter.addFormatter(this._oInternalVizChart,"yAxisLabelFormatter",t);this.setProperty("yAxisLabelFormatter",e);return this};sap.ca.ui.charts.Chart.prototype.setYAxis2LabelFormatter=function(t){var e=this.oChartFormatter.addFormatter(this._oInternalVizChart,"yAxis2LabelFormatter",t);this.setProperty("yAxis2LabelFormatter",e);return this};sap.ca.ui.charts.Chart.prototype.setDataLabelFormatter=function(t){var e;var a=[[]];if(Array.isArray(t)){var r;var i;for(r=0;r<t.length;r++){if(Array.isArray(t[r])){if(r>0){a.push([])}for(i=0;i<t[r].length;i++){e=this.oChartFormatter.addFormatter(this._oInternalVizChart,"dataLabelFormatter"+r+"-"+i,t[r][i]);a[r][i]=e}}else{jQuery.sap.log.error("dataLabelFormatter must be an array of arrays");return this}}}else{jQuery.sap.log.error("dataLabelFormatter must be an array of arrays");return this}this.setProperty("dataLabelFormatter",a);return this};sap.ca.ui.charts.Chart.prototype.setPlotAreaAxisTooltipFormatter=function(t){var e;var a=[];if(Array.isArray(t)){var r;for(r=0;r<t.length;r++){e=this.oChartFormatter.addFormatter(this._oInternalVizChart,"plotAreaAxisTooltipFormatter"+r,t[r]);a[r]=e}}else{jQuery.sap.log.error("plotAreaAxisTooltipFormatter must be an array");return this}this.setProperty("plotAreaAxisTooltipFormatter",a);return this};sap.ca.ui.charts.Chart.prototype.setTooltipFormatter=function(t){var e;var a=[[]];if(Array.isArray(t)){var r,i;for(r=0;r<t.length;r++){if(Array.isArray(t[r])){if(r>0){a.push([])}for(i=0;i<t[r].length;i++){e=this.oChartFormatter.addFormatter(this._oInternalVizChart,"tooltipFormatter"+r+"-"+i,t[r][i]);a[r][i]=e}}else{jQuery.sap.log.error("tooltipFormatter must be an array of arrays");return this}}}else{jQuery.sap.log.error("tooltipFormatter must be an array of arrays");return this}this.setProperty("tooltipFormatter",a);return this};sap.ca.ui.charts.Chart.prototype.setPopoverFormatter=function(t){var e;var a=[[]];var r,i;if(Array.isArray(t)){for(r=0;r<t.length;r++){if(Array.isArray(t[r])){if(r>0){a.push([])}for(i=0;i<t[r].length;i++){e=this.oChartFormatter.addFormatter(this._oInternalVizChart,"popoverFormatter"+r+"-"+i,t[r][i]);a[r][i]=e}}else{jQuery.sap.log.error("popoverFormatter must be an array of arrays");return this}}}else{jQuery.sap.log.error("popoverFormatter must be an array of arrays");return this}this.setProperty("popoverFormatter",a);return this};sap.ca.ui.charts.Chart.prototype.setPopoverGroupFormatter=function(t){var e=this.oChartFormatter.addFormatter(this._oInternalVizChart,"popoverGroupFormatter",t);this.setProperty("popoverGroupFormatter",e);return this};sap.ca.ui.charts.Chart.prototype.setAdvancedChartSettings=function(t){this.setProperty("advancedChartSettings",t);return this};sap.ca.ui.charts.Chart.prototype.setMinShapeSize=function(t){if(jQuery.device.is.desktop){if(typeof t!=="undefined"){jQuery.sap.log.warning("MinShapeSize must be 24px for desktop. Forcing to 24px.")}t=this._oMinimumShapeSizes.desktop_px()}else{if(typeof t!=="undefined"){jQuery.sap.log.warning("MinShapeSize must be 48px to be clickable on mobile. Forcing to 48px.")}t=this._oMinimumShapeSizes.mobile_px()}this.setProperty("minShapeSize",t);return this};sap.ca.ui.charts.Chart.prototype.onChartInitialized=function(t){this._setCursorStyle();var e=this.getChartSemanticColorFormatter();if(e!=null&&e instanceof Function&&this.semanticColorFormatterAllowed){var a=d3.select(this._oInternalVizChart.getDomRef()).select(".v-m-root");var r=this._getSemanticPalette();a.selectAll("g.v-datashape").selectAll("rect").attr("fill",function(t){var a=e(t);var i;if(t.hasOwnProperty("fillColor")){i=t.fillColor}else if(t.hasOwnProperty("colorValue")){i=t.colorValue}else{jQuery.sap.log.error("property 'fillColor' or 'colorValue' is missing in the datapoint.")}if(a&&r.hasOwnProperty(a)){i=r[a]}return i});a.selectAll("g.v-datashape").selectAll("path").attr("fill",function(t){var a=e(t);var i;if(t.hasOwnProperty("fillColor")){i=t.fillColor}else if(t.hasOwnProperty("colorValue")){i=t.colorValue}else{jQuery.sap.log.error("property 'fillColor' or 'colorValue' is missing in the datapoint.")}if(a&&r.hasOwnProperty(a)){i=r[a]}return i})}};sap.ca.ui.charts.Chart.prototype._showDetailInPopover=function(){if(!this.oSelectedData){return}var t=this.oSelectedData;if(this.getSelectionMode()===sap.ca.ui.charts.ChartSelectionMode.Single.toLowerCase()){this._oChartPopover.detachAfterClose(jQuery.proxy(this._showDetailInPopover,this),this);this._oSelectedDataList.reset()}var e=t[t.length-1].target;var a=this._oInternalVizChart.getDataset().getVIZDataset();var r=a._measureValuesGroup;var i,o;for(i=0;i<t.length;i++){for(o=0;o<t[i].data.length;o++){if(!t[i].data[o]||!t[i].data[o].ctx||!jQuery.isNumeric(t[i].data[o].val)){continue}var s=t[i].data[o].ctx;var n=t[i].target.attributes.fill.value;var h=t[i].data[o].val;var l=a._analysisAxis[0]._dimensionLabels;var p=r[s.path.mg].getMeasureValues();var u=p[s.path.mi]._uId;var c="";var d=[];if(s.type==="Measure"){var f=s.path;var g=f.dii_a1.toString();g+=f.dii_a2.toString();g+=f.mg.toString();g+=f.mi.toString();var C=this;var y;if(this.getProperty("popoverGroupFormatter")){y=this.getProperty("popoverGroupFormatter")}jQuery.each(l,jQuery.proxy(function(t,e){c=e._values[s.path.dii_a1];d.push(c);if(C._oSelectedDataList.getGroupIndexFor(d)===-1){if(y&&y.length>0){c=this.oChartFormatter.format(c.toString(),y)}C._oSelectedDataList.addGroup({key:d,title:c})}},this));var v="";if(!this.getProperty("popoverFormatter")||!Array.isArray(this.getProperty("popoverFormatter"))||this.getProperty("popoverFormatter").length<s.path.mg||!this.getProperty("popoverFormatter")[s.path.mg]||!Array.isArray(this.getProperty("popoverFormatter")[s.path.mg])||this.getProperty("popoverFormatter")[s.path.mg].length==0){v=sap.ca.ui.charts.DefaultFormatterFunction.STANDARDNUMBER}else{if(this.getProperty("popoverFormatter")[s.path.mg].length<s.path.mi){v=this.getProperty("popoverFormatter")[s.path.mg][0]}else{v=this.getProperty("popoverFormatter")[s.path.mg][s.path.mi]}}if(this._oSelectedDataList.getItemIndexFor(d,g)===-1){this._oSelectedDataList.addItemTo(d,[{key:g,color:n,label:u,value:this.oChartFormatter.format(h.toString(),v)}])}}}}var m=this._oInternalVizChart.selection();var _=jQuery.extend(true,{},t);this.firePopoverBeforeOpen({isOpen:this._oChartPopover.isOpen(),openBy:e,selection:m,data:_});if(!this._oChartPopover.isOpen()){var P=0;var S=0;if(e.width!=null){P=Math.floor(e.width.baseVal.value);S=Math.floor(e.height.baseVal.value/2)}if(this._vizChartType.name==sap.ca.ui.charts.ChartType.Bubble){if(e&&e.getBoundingClientRect()){var b=e.getBoundingClientRect().width;var x=e.getBoundingClientRect().height;if(b){P=Math.floor(b/2);S=Math.floor(x/2)}}}this._oChartPopover.setOffsetX(P);this._oChartPopover.setOffsetY(S);if(!jQuery.device.is.phone){this._oChartPopover._oControl.$().css("max-height",this._oInternalVizChart.getHeight())}if(this.bIsRTL){this.sPopoverPlacement=null;this._disableConfigurationRTL()}this._oChartPopover.openBy(e)}else if(!jQuery.device.is.phone){this._invalidatePopover()}this.oSelectedData=undefined};sap.ca.ui.charts.Chart.prototype._adjustPopoverPosition=function(t){var e=this._oChartPopover._oControl.$("arrow");if(e){var a=e.attr("class");if(a){if(!this.sPopoverPlacement){if(a.indexOf("sapMPopoverArrLeft")>=0){this.sPopoverPlacement=sap.m.PlacementType.Right}if(a.indexOf("sapMPopoverArrRight")>=0){this.sPopoverPlacement=sap.m.PlacementType.Left}}e.removeClass("sapMPopoverArrRight sapMPopoverArrLeft");if(this.sPopoverPlacement==sap.m.PlacementType.Right){e.addClass("sapMPopoverArrRight")}if(this.sPopoverPlacement==sap.m.PlacementType.Left){e.addClass("sapMPopoverArrLeft")}}}};sap.ca.ui.charts.Chart.prototype._registerPopupContentResizeHandler=function(){if(!this._sResizeListenerId){var t=this._oChartPopover._oControl.getDomRef("scroll");if(t){this._sResizeListenerId=sap.ui.core.ResizeHandler.register(t,this._disableConfigurationRTL)}}};sap.ca.ui.charts.Chart.prototype._deregisterContentResizeHandler=function(){if(this._sResizeListenerId){sap.ui.core.ResizeHandler.deregister(this._sResizeListenerId);this._sResizeListenerId=null}};sap.ca.ui.charts.Chart.prototype._disableConfigurationRTL=function(){this.fn_getRTL=jQuery.proxy(sap.ui.getCore().getConfiguration().getRTL);sap.ui.getCore().getConfiguration().getRTL=function(){return false}};sap.ca.ui.charts.Chart.prototype._enableConfigurationRTL=function(){if(typeof this.fn_getRTL=="function"){sap.ui.getCore().getConfiguration().getRTL=this.fn_getRTL;this.fn_getRTL=null}};sap.ca.ui.charts.Chart.prototype._invalidatePopover=function(){var t=this._oChartPopover._oControl;sap.m.PopoverRenderer.rerenderContentOnly(t);var e=t.$();e.addClass("sapCaUiChartPopOver");var a=jQuery.sap.byId(t.getId()+"-cont");a.css("overflow-y","auto")};sap.ca.ui.charts.Chart.prototype.onSelectData=function(t){var e=this._oInternalVizChart.selection();this.oSelectedData=t.getParameter("data");var a=null;if(e.length>0){a=e[e.length-1];if(this.getSelectionMode()===sap.ca.ui.charts.ChartSelectionMode.Single.toLowerCase()){e=[a];if(this.getShowPopover()){this._oChartPopover.attachAfterClose(null,jQuery.proxy(this._showDetailInPopover,this),this);if(this._oChartPopover.isOpen()){this._oChartPopover.close()}else{this._showDetailInPopover()}}}else{if(this.getShowPopover()){this._showDetailInPopover()}}}this.fireSelectDataPoint({popover:this._oChartPopover,srcEvent:t,selection:e,selectedItem:a})};sap.ca.ui.charts.Chart.prototype.onDeselectData=function(t){var e=this._oInternalVizChart.selection();var a,r;if(this.getShowPopover()){if(e.length==0){this._oSelectedDataList.reset();this._closePopover()}else{if(this.getSelectionMode()!==sap.ca.ui.charts.ChartSelectionMode.Single.toLowerCase()){var i=t.getParameter("data");for(a=0;a<i.length;a++){for(r=0;r<i[a].data.length;r++){if(!i[a].data[r]||!i[a].data[r].ctx||!jQuery.isNumeric(i[a].data[r].val)){continue}var o=i[a].data[r].ctx;if(o.type=="Measure"){var s=o.path;var n=s.dii_a1.toString();n+=s.dii_a2.toString();n+=s.mg.toString();n+=s.mi.toString();var h=this._oInternalVizChart.getDataset().getVIZDataset();var l=h._analysisAxis[0]._dimensionLabels;var p=[];jQuery.each(l,function(t,e){p.push(e._values[o.path.dii_a1])});if(this._oSelectedDataList.getItemIndexFor(p,n)!==-1){this._oSelectedDataList.removeItemFrom(p,n)}if(this._oSelectedDataList.getNumberOfItemsFor(p)===0){this._oSelectedDataList.removeGroup(p)}}}}if(this._oChartPopover.isOpen()&&!jQuery.device.is.phone){this._invalidatePopover()}}}}this.fireSelectDataPoint({popover:this._oChartPopover,srcEvent:t,selection:this._oInternalVizChart.selection(),selectedItem:null})};sap.ca.ui.charts.Chart.prototype.onBeforeRendering=function(){this._deregisterEvent()};sap.ca.ui.charts.Chart.prototype.onAfterRendering=function(){if(jQuery.device.is.desktop){jQuery(window).bind("resize",jQuery.proxy(this._onResize,this))}else{sap.ui.Device.orientation.attachHandler(this._onOrientationChange,this);sap.ui.Device.resize.attachHandler(this._onResize,this)}jQuery(this._oScrollContainer.getDomRef()).attr("dir","ltr")};sap.ca.ui.charts.Chart.prototype._onResize=function(){if(this._sDelayedResize){jQuery.sap.clearIntervalCall(this._sDelayedResize)}this._sDelayedResize=jQuery.sap.delayedCall(200,this,this._onResizeInt)};sap.ca.ui.charts.Chart.prototype._onResizeInt=function(){this._oSelectedDataList.reset();this._closePopover();var t=this._oInternalVizChart.getDataset();if(!t){return}var e=t.getVIZDataset();var a=parseInt(this.getMinShapeSize(),10);if(e&&!e._emptyDataset&&e._analysisAxis.length>0){var r=e._analysisAxis[0]._dimensionLabels[0]._values.length;var i=r;var o=0;if(!this.getStackedChartWidthEnhancer()&&e._analysisAxis[1]!=null){r*=e._analysisAxis[1]._dimensionLabels[0]._values.length;o=r}if(!this._vizChartType.stacked){r*=e._measures.length;o=r*(e._measures.length-1)}var s=r*a+i*a+o*4;var n=this.getWidth();var h=this.getHeight();var l=parseInt(n,10);var p=parseInt(h,10);if(jQuery.sap.endsWith(n,"%")||n=="auto"){if(this.getParent()!=null&&this.getParent().getDomRef()!=null&&this.$().parents("[class^=sapUiRespGridSpan]").length==0){var u=this.$();var c=u.parents(".sapMPage").first();var d=c.children("section").first();var f=d.parents(".sapMNavItemHidden");if(f.length!=0){f.removeClass("sapMNavItemHidden")}if(d.length==0){d=this.getParent().$().parents("section").first()}if(d.length==0){d=u.parents("body").first()}var g=d.width();var C=0;if(d&&d.offset()){C=d.offset().left}var y=0;if(u&&u.offset()){y=u.offset().left}var v=1;var m=u;while(m!=null&&m.length!=0&&m.attr("id")!=d.attr("id")){var _=parseInt(m.css("margin-right"),10);var P=parseInt(m.css("padding-right"),10);var S=parseInt(m.css("border-right-width"),10);if(!isNaN(_)){v+=_}if(!isNaN(P)){v+=P}if(!isNaN(S)){v+=S}m=m.parent()}if(f.length!=0){f.addClass("sapMNavItemHidden")}l=g-(y-C)-v}else if(this.$().parents("[class^=sapUiRespGridSpan]").length!=0){l=this.$().parents("[class^=sapUiRespGridSpan]").first().width()}else if(this.getUIArea()){l=jQuery(this.getUIArea().oRootNode).width()}else{l="800"}l=l*parseInt(n,10)/100}if(jQuery.sap.endsWith(h,"%")||h=="auto"){if(this.getParent()!=null&&this.getParent().getDomRef()!=null){var u=this.$();var c=u.parents(".sapMPage").first();var d=c.children("section").first();var f=d.parents(".sapMNavItemHidden");if(f.length!=0){f.removeClass("sapMNavItemHidden")}if(d.length==0){d=this.getParent().$().parents("section").first()}if(d.length==0){d=u.parents("body").first()}var b=d.height()-2;var x=0;if(d&&d.offset()){x=d.offset().top}var I=0;if(u&&u.offset()){I=u.offset().top}var z=0;if(u){z=parseInt(u.css("padding-top"),10)}var j=0;var m=u;while(m!=null&&m.length!=0&&m.attr("id")!=d.attr("id")){var V=parseInt(m.css("margin-bottom"),10);var D=parseInt(m.css("padding-bottom"),10);var A=parseInt(m.css("border-bottom-width"),10);if(!isNaN(_)){j+=V}if(!isNaN(D)){j+=D}if(!isNaN(A)){j+=A}m=m.parent()}if(f.length!=0){f.addClass("sapMNavItemHidden")}p=b-(I-x)-j-z}else if(this.getUIArea()){p=jQuery(this.getUIArea().oRootNode).height()}else{p="480"}if(sap.ui.Device.browser.internet_explorer&&sap.ui.Device.browser.version>10){if(this._oInternalVizChart.$()){var Q=parseInt(this._oInternalVizChart.$().css("margin-top"),10);if(!isNaN(Q)&&Q>0){p=p-Q}var F=parseInt(this._oInternalVizChart.$().css("margin-bottom"),10);if(!isNaN(F)&&F>0){p=p-F}}}if(this.getParent()&&this.getParent()instanceof sap.ca.ui.charts.ChartToolBar&&parseInt(h,10)!=100){var L=this.getParent().$().find(".sapMBar").height();p=(p+L)*parseInt(h,10)/100-L}else{p=p*parseInt(h,10)/100}}var w={height:0,width:0};if(d){var O=d.get(0);if(O&&O.scrollHeight>O.clientHeight){w=jQuery.sap.scrollbarSize()}}if(p==0){p=100;jQuery.sap.delayedCall(200,this,this.invalidate)}if(this._vizChartType.scroll.horizontal){if(s>l){this._oInternalVizChart.setWidth(s+"px");w=jQuery.sap.scrollbarSize();if(this._oScrollContainer.$()){this._oScrollContainer.$().width(l+"px")}}else{this._oInternalVizChart.setWidth(l+"px")}this._oInternalVizChart.setHeight(p-w.height+"px")}else if(this._vizChartType.scroll.vertical){w=jQuery.sap.scrollbarSize();if(s>p){this._oInternalVizChart.setHeight(s+"px");this._oScrollContainer.setHeight(p+"px");if(this._oScrollContainer.$()){this._oScrollContainer.$().height(p+"px")}}else{this._oInternalVizChart.setHeight(p+"px");this._oScrollContainer.setHeight("100%");if(this._oScrollContainer.$()){this._oScrollContainer.$().height("100%")}}this._oInternalVizChart.setWidth(l-w.width+"px")}else{this._oInternalVizChart.setWidth(l+"px");this._oInternalVizChart.setHeight(p+"px")}if(this._oInternalVizChart.$()){this._oInternalVizChart.$().height(this._oInternalVizChart.getHeight());this._oInternalVizChart.$().width(this._oInternalVizChart.getWidth())}}else if(!e||e._emptyDataset){this._oScrollContainer.setHeight("100%");this._oScrollContainer.setWidth("100%");if(this._oScrollContainer.$()){this._oScrollContainer.$().height("100%");this._oScrollContainer.$().width("100%")}this._oInternalVizChart.setWidth("100%");this._oInternalVizChart.setHeight("100%");if(this._oInternalVizChart.$()){this._oInternalVizChart.$().height("100%");this._oInternalVizChart.$().width("100%")}}};sap.ca.ui.charts.Chart.prototype._onOrientationChange=function(t){var e=t.landscape;if(this._vizChartType.scroll.horizontal){if(e){if(this._oScrollContainer.$()){this._oScrollContainer.$().width("100%")}}}this._onResize()};sap.ca.ui.charts.Chart.prototype.setPopoverSubHeader=function(t){if(t&&t instanceof sap.m.Bar){this._oChartPopover.setSubHeader(t)}};sap.ca.ui.charts.Chart.prototype.setPopoverFooter=function(t){if(t){if(t instanceof sap.m.Bar){if(!jQuery.device.is.phone){this._oChartPopover._oControl.setFooter(t)}else{var e=new sap.m.Page({showHeader:false,showFooter:true,footer:t,content:[this._oSelectedDataList.getControl()]});this._oChartPopover.destroyContent();this._oChartPopover.addContent(e)}}else if(t instanceof sap.ui.core.Control){if(!jQuery.device.is.phone){this._oChartPopover.addContent(t)}else{t.addStyleClass("sapCaUiPopOverFooter");var e=new sap.m.Page({showHeader:false,showFooter:false,content:[this._oSelectedDataList.getControl(),t]});this._oChartPopover.destroyContent();this._oChartPopover.addContent(e)}}}};sap.ca.ui.charts.Chart.prototype.setNoData=function(t){this._oInternalVizChart.setNoData(t);return this};sap.ca.ui.charts.Chart.prototype.getNoData=function(){return this._oInternalVizChart.getNoData()};
//# sourceMappingURL=Chart.js.map