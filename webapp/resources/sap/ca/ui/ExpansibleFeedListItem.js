/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2014 SAP SE. All rights reserved
 */
jQuery.sap.declare("sap.ca.ui.ExpansibleFeedListItem");jQuery.sap.require("sap.ca.ui.library");jQuery.sap.require("sap.m.FeedListItem");jQuery.sap.require("sap.m.AvatarColor");sap.m.FeedListItem.extend("sap.ca.ui.ExpansibleFeedListItem",{metadata:{deprecated:true,library:"sap.ca.ui",properties:{maxLines:{type:"int",group:"Misc",defaultValue:5}}}});jQuery.sap.require("sap.ca.ui.utils.resourcebundle");sap.ca.ui.ExpansibleFeedListItem.prototype._getSeeMoreLink=function(){if(!this._oSeeMoreLink){jQuery.sap.require("sap.m.Link");this._oSeeMoreLink=new sap.m.Link({text:sap.ca.ui.utils.resourcebundle.getText("extensiblefeedlistitem.seeMore"),press:jQuery.proxy(function(){if(this.$().hasClass("sapCaUiExpansibleFeedListItemSeeLess")){this._collapseText();this._oSeeMoreLink.setText(sap.ca.ui.utils.resourcebundle.getText("extensiblefeedlistitem.seeMore"))}else{var e=jQuery.sap.byId(this.getId()+"-text");e.height("auto");this._oSeeMoreLink.setText(sap.ca.ui.utils.resourcebundle.getText("extensiblefeedlistitem.seeLess"))}this.$().toggleClass("sapCaUiExpansibleFeedListItemSeeLess")},this)});this._oSeeMoreLink.setParent(this,null,true)}return this._oSeeMoreLink};sap.ca.ui.ExpansibleFeedListItem.prototype._collapseText=function(){var e=jQuery.sap.byId(this.getId()+"-text");if(!e.attr("class")||jQuery.device.is.phone&&e.attr("class").indexOf("sapMFeedListItemText")==-1||!jQuery.device.is.phone&&e.attr("class").indexOf("sapMFeedListItemTextText")==-1){return}var t=this.getMaxLines();var s=e.css("lineHeight");var i;if(s.indexOf("px")!=-1){i=parseFloat(s)}else{var a=this._convertRelativeCSSSizeToFloat(s)||1.2;var r=e.css("font-size");var n;if(r.indexOf("px")!=-1){n=parseInt(r,10)}else{var p=this._convertRelativeCSSSizeToFloat(r)||1;var o=e.parent();var l="19px";while(o!=null){l=o.css("font-size");if(l.indexOf("px")!=-1){break}o=o.parent()}n=parseInt(l,10)*p}i=n*a}var u=e.height()/i;var d=i*t;if(u>t){this.addStyleClass("sapCaUiExpansibleFeedListItemSeeMore");e.height(d)}else{this.removeStyleClass("sapCaUiExpansibleFeedListItemSeeMore")}};sap.ca.ui.ExpansibleFeedListItem.prototype._convertRelativeCSSSizeToFloat=function(e){var t=Number.NaN;if(jQuery.isNumeric(e)||e.indexOf("em")!=-1){t=parseFloat(e)}else if(e.indexOf("%")!=-1){t=parseInt(e,10)/100}return t};sap.ca.ui.ExpansibleFeedListItem.prototype.onBeforeRendering=function(){if(sap.m.FeedListItem.prototype.onBeforeRendering){sap.m.FeedListItem.prototype.onBeforeRendering.apply(this)}var e=this._getAvatar();e.setBackgroundColor(sap.m.AvatarColor.Transparent)};sap.ca.ui.ExpansibleFeedListItem.prototype.onAfterRendering=function(){if(sap.m.FeedListItem.prototype.onAfterRendering){sap.m.FeedListItem.prototype.onAfterRendering.apply(this)}this._collapseText()};sap.ca.ui.ExpansibleFeedListItem.prototype._getLinkControl=function(){return this._getLinkSender()};
//# sourceMappingURL=ExpansibleFeedListItem.js.map