/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2014 SAP SE. All rights reserved
 */
jQuery.sap.declare("sap.ca.ui.Notes");jQuery.sap.require("sap.ca.ui.library");jQuery.sap.require("sap.m.List");sap.m.List.extend("sap.ca.ui.Notes",{metadata:{deprecated:true,library:"sap.ca.ui",properties:{showNoteInput:{type:"boolean",group:"Misc",defaultValue:true},textMaxLength:{type:"int",group:"Misc",defaultValue:1e3},placeholder:{type:"string",group:"Misc",defaultValue:null}},events:{addNote:{}}}});jQuery.sap.require("sap.m.MessageToast");sap.ca.ui.Notes.prototype.init=function(){if(sap.m.List.prototype.init){sap.m.List.prototype.init.apply(this)}this.textAreaDefaultHeight;this.sFourRowHeight;this.sThreeRowHeight;this._oTextArea=new sap.m.TextArea(this.getId()+"-textarea",{maxLength:this.getTextMaxLength(),placeholder:sap.ca.ui.utils.resourcebundle.getText("notes.addNotePlaceHolder")});this._oTextArea.setParent(this);this._oTextArea.sParentAggregationName="fake";if(jQuery.device.is.phone){this._oTextArea.attachLiveChange(this._liveChangePhoneHeightHandler,this)}else{this._oTextArea.attachLiveChange(this._liveChangeHeightHandler,this)}this._oTextArea.attachLiveChange(this.liveChangeMonitor,this);this._oButton=new sap.m.Button(this.getId()+"-add",{text:sap.ca.ui.utils.resourcebundle.getText("notes.addNoteButton"),type:sap.m.ButtonType.Emphasized,press:jQuery.proxy(function(e){this.fireAddNote({value:this._oTextArea.getValue()});this._oTextArea.setValue("");this._oTextArea.setHeight("auto")},this)});this._oButton.setParent(this);this._oButton.sParentAggregationName="fake"};sap.ca.ui.Notes.prototype.liveChangeMonitor=function(e){if(e.mParameters.newValue.length===this.getTextMaxLength()){var t=sap.ca.ui.utils.resourcebundle.getText("TextOverlimit",[this.getTextMaxLength()]);sap.m.MessageToast.show(t)}};sap.ca.ui.Notes.prototype.exit=function(){if(sap.m.List.prototype.exit){sap.m.List.prototype.exit.apply(this)}if(this._oFlexBox){this._oFlexBox.destroy();this._oFlexBox=null}this._oTextArea.destroy();this._oButton.destroy()};sap.ca.ui.Notes.prototype.setTextMaxLength=function(e){if(e>1e3){jQuery.sap.log.warn("Notes maximum length set to "+e+", which is greater than the maximum length allowed. TextMaxLength will be reset to 1000 characters");e=1e3}this._oTextArea.setProperty("maxLength",e,true);this.setProperty("textMaxLength",e)};sap.ca.ui.Notes.prototype.clear=function(){this._oTextArea.setValue("")};sap.ca.ui.Notes.prototype.reset=function(){this.clear();this._oGrowingDelegate&&this._oGrowingDelegate.reset()};sap.ca.ui.Notes.prototype.setPlaceholder=function(e){this._oTextArea.setProperty("placeholder",e,true);this.setProperty("placeholder",e)};sap.ca.ui.Notes.prototype._liveChangeHeightHandler=function(e){var t=this.$().find("textarea");var i=t.get(0);i.style.overflow="hidden";i.style.height="auto";i.style.height=i.scrollHeight+"px"};sap.ca.ui.Notes.prototype._liveChangePhoneHeightHandler=function(e){var t=this.$().find("textarea");var i=t.get(0);if(!this.textAreaDefaultHeight){this.textAreaDefaultHeight=i.scrollHeight}if(this.textAreaDefaultHeight==i.scrollHeight){t.height(i.scrollHeight);i.style.overflow="hidden"}if(this.textAreaDefaultHeight<i.scrollHeight&&!this.sThreeRowHeight){this.sThreeRowHeight=i.scrollHeight;t.height(i.scrollHeight);i.style.overflow="hidden"}if(this.sThreeRowHeight<i.scrollHeight&&!this.sFourRowHeight&&this.sThreeRowHeight){this.sFourRowHeight=i.scrollHeight;t.height(i.scrollHeight);i.style.overflow="hidden"}if(this.sFourRowHeight<i.scrollHeight&&this.sFourRowHeight&&this.sThreeRowHeight){t.height(this.sFourRowHeight);i.style.overflow="auto"}};sap.ca.ui.Notes.prototype._getFlexBox=function(){if(!this._oFlexBox){this._oTextArea.setLayoutData(new sap.m.FlexItemData({growFactor:1}));try{this._oFlexBox=new sap.m.HBox({items:[this._oTextArea,this._oButton]})}catch(e){jQuery.sap.log.info("Error is catch because _oTextArea and _oButton are not part of any aggregation on this control, which is ok.")}}return this._oFlexBox};sap.ca.ui.Notes.prototype.onAfterRendering=function(){if(sap.m.List.prototype.onAfterRendering){sap.m.List.prototype.onAfterRendering.apply(this)}if(sap.ui.Device.browser.internet_explorer&&sap.ui.Device.browser.version==9){var e=this.$().find("textarea");var t=e.parents(".sapMFlexItem").first();t.css("height","auto")}};
//# sourceMappingURL=Notes.js.map