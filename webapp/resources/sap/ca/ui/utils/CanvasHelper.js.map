{"version":3,"file":"CanvasHelper.js","names":["jQuery","sap","declare","require","ui","base","ManagedObject","extend","metadata","properties","width","type","group","height","crop","quality","minWeight","events","done","_newsize","w","h","W","H","C","c","r","cropped","_dataURLtoBlob","data","mimeString","split","byteString","atob","ab","ArrayBuffer","length","ia","Uint8Array","i","charCodeAt","bb","window","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","append","getBlob","Blob","_detectSubsampling","img","iw","ih","canvas","document","createElement","ctx","getContext","drawImage","getImageData","_transformCoordinate","orientation","translate","scale","rotate","Math","PI","_detectVerticalSquash","sy","ey","py","alpha","ratio","_keepRatio","this","setHeight","round","getHeight","setWidth","getWidth","resize","file","self","reader","FileReader","onloadend","e","dataURL","target","result","size","getMinWeight","log","info","fireDone","binary","ca","utils","BinaryUtil","exif","EXIF","readFromBinaryFile","Image","onload","getCrop","save","d","tmpCanvas","tmpCtx","vertSquashRatio","sh","sx","sw","clearRect","dx","floor","dw","ceil","dy","dh","restore","newcanvas","x","y","newctx","toDataURL","getQuality","src","readAsDataURL"],"sources":["CanvasHelper-dbg.js"],"mappings":"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","ignoreList":[]}