{"version":3,"file":"HashChangeHandler-dbg.js","names":["sap","ui","define","___eventlogging_TechnicalEvents","__SearchModel","_interopRequireDefault","obj","__esModule","default","TechnicalEventType","SearchModel","HashChangeHandler","handle","hashChangeInfo","sourceUrlArray","oldShellHash","push","oldAppSpecificRoute","substring","_createSearchModel","event","type","HASH_CHANGE","targetUrl","newShellHash","systemAndClient","_getSID","indexOf","searchModel","sinaNext","logUserEvent","initializedPromise","getModelSingleton","initBusinessObjSearch","systemId","client","url","window","location","href","systemBegin","systemEnd","systemInUrl","split","length"],"sources":["HashChangeHandler.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport { TechnicalEventType } from \"./eventlogging/TechnicalEvents\";\nimport SearchModel from \"./SearchModel\";\n\n// track navigation\n// model class for track navigation\n// =======================================================================\n\nconst HashChangeHandler = {\n    handle: async function (hashChangeInfo: {\n        newShellHash: string;\n        oldShellHash?: string;\n        oldAppSpecificRoute?: string;\n    }): Promise<void> {\n        this.sourceUrlArray = [];\n        if (hashChangeInfo.oldShellHash !== null) {\n            this.sourceUrlArray.push(hashChangeInfo.oldShellHash);\n        }\n        if (hashChangeInfo.oldAppSpecificRoute !== null) {\n            if (hashChangeInfo.oldAppSpecificRoute.substring(0, 2) === \"&/\") {\n                // remove first special parameter indicator \"&/\"\n                this.sourceUrlArray.push(hashChangeInfo.oldAppSpecificRoute.substring(2));\n            } else {\n                this.sourceUrlArray.push(hashChangeInfo.oldAppSpecificRoute);\n            }\n        }\n\n        await this._createSearchModel();\n        const event = {\n            type: TechnicalEventType.HASH_CHANGE,\n            sourceUrlArray: this.sourceUrlArray,\n            targetUrl: \"#\" + hashChangeInfo.newShellHash,\n            systemAndClient: this._getSID(),\n        };\n        if (event.targetUrl.indexOf(\"=\") !== -1) {\n            this.searchModel.sinaNext.logUserEvent(event);\n        }\n    },\n\n    _createSearchModel: async function (): Promise<void> {\n        if (this.initializedPromise) {\n            return this.initializedPromise;\n        }\n        // get search model and call init\n        this.searchModel = SearchModel.getModelSingleton({}, \"flp\");\n        this.initializedPromise = this.searchModel.initBusinessObjSearch();\n        return this.initializedPromise;\n    },\n\n    _getSID: function (): {\n        systemId: string;\n        client: string;\n    } {\n        // extract System and Client from sap-system=sid(BE1.001)\n        const systemAndClient = {\n            systemId: \"\",\n            client: \"\",\n        };\n        const url = window.location.href;\n        const systemBegin = url.indexOf(\"sap-system=sid(\");\n\n        if (systemBegin !== -1) {\n            const systemEnd = url.substring(systemBegin).indexOf(\")\");\n            if (systemEnd !== -1) {\n                const systemInUrl = url.substring(systemBegin + 15, systemBegin + systemEnd);\n                if (systemInUrl.split(\".\").length === 2) {\n                    systemAndClient.systemId = systemInUrl.split(\".\")[0];\n                    systemAndClient.client = systemInUrl.split(\".\")[1];\n                }\n            }\n        }\n        return systemAndClient;\n    },\n};\n\nexport default HashChangeHandler;\n"],"mappings":"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","ignoreList":[]}