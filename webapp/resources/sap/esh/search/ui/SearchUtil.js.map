{"version":3,"file":"SearchUtil.js","names":["sap","ui","define","forwardEllipsis4Whyfound","domref","PeriodicRetry","interval","maxRetries","action","timeout","undefined","constructor","options","this","doRun","retries","success","window","setTimeout","run","StateWatcher","compareStates","getState","changed","checkMode","state","checkState","props","start","setInterval","checkStateChange","bind","currentState","__exports","__esModule"],"sources":["SearchUtil.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\n// =======================================================================\n// emphasize whyfound in case of ellipsis\n// =======================================================================\n// this function is obsolete and should only kept for backward compatibility in 1.139\n// TODO: remove after 1.139\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function forwardEllipsis4Whyfound(domref: HTMLElement): void {\n    return null;\n}\n\nexport class PeriodicRetry {\n    private interval: number;\n    private maxRetries: number;\n    private action: () => boolean;\n\n    private timeout: number | undefined = undefined;\n\n    constructor(options: { interval: number; maxRetries: number; action: () => boolean }) {\n        this.interval = options.interval;\n        this.maxRetries = options.maxRetries;\n        this.action = options.action;\n    }\n\n    doRun(retries: number): void {\n        const success = this.action();\n        if (success) {\n            return;\n        }\n        if (retries <= 1) {\n            return;\n        }\n        this.timeout = window.setTimeout(() => {\n            this.timeout = undefined;\n            this.doRun(retries - 1);\n        }, this.interval);\n    }\n\n    run(): void {\n        if (this.timeout) {\n            return; // already running\n        }\n        this.doRun(this.maxRetries);\n    }\n}\n\nexport class StateWatcher<STATE> {\n    // service functions passed from outside\n    compareStates: (s1: STATE, s2: STATE) => boolean;\n    getState: () => STATE;\n    changed: (state: STATE, oldState: STATE) => void;\n    // check interval\n    interval: number;\n    // internal\n    checkMode: boolean = false;\n    state: STATE;\n    checkState: STATE;\n    constructor(props: {\n        compareStates: (s1: STATE, s2: STATE) => boolean;\n        getState: () => STATE;\n        changed: (state: STATE, oldState: STATE) => void;\n        interval?: number;\n    }) {\n        this.compareStates = props.compareStates;\n        this.getState = props.getState;\n        this.changed = props.changed;\n        this.interval = props.interval ?? 100;\n    }\n    start() {\n        setInterval(this.checkStateChange.bind(this), this.interval);\n    }\n    checkStateChange(): void {\n        const currentState = this.getState();\n        if (!this.checkMode) {\n            if (!this.state || !this.compareStates(currentState, this.state)) {\n                // in case the state differs, we enter a special check mode and notify the subscriber only in case the new state is stable\n                this.checkMode = true;\n                this.checkState = currentState;\n            }\n        } else {\n            if (this.compareStates(currentState, this.checkState)) {\n                this.changed(currentState, this.state);\n                this.state = currentState;\n            }\n            this.checkMode = false;\n        }\n    }\n}\n"],"mappings":";;;;;AAAAA,IAAAC,GAAAC,OAAA,2BAWO,SAASC,EAAyBC,GACrC,OAAO,IACX,CAEO,MAAMC,EACDC,SACAC,WACAC,OAEAC,QAA8BC,UAEtCC,YAAYC,GACRC,KAAKP,SAAWM,EAAQN,SACxBO,KAAKN,WAAaK,EAAQL,WAC1BM,KAAKL,OAASI,EAAQJ,MAC1B,CAEAM,MAAMC,GACF,MAAMC,EAAUH,KAAKL,SACrB,GAAIQ,EAAS,CACT,MACJ,CACA,GAAID,GAAW,EAAG,CACd,MACJ,CACAF,KAAKJ,QAAUQ,OAAOC,WAAW,KAC7BL,KAAKJ,QAAUC,UACfG,KAAKC,MAAMC,EAAU,IACtBF,KAAKP,SACZ,CAEAa,MACI,GAAIN,KAAKJ,QAAS,CACd,MACJ,CACAI,KAAKC,MAAMD,KAAKN,WACpB,EAGG,MAAMa,EAETC,cACAC,SACAC,QAEAjB,SAEAkB,UAAqB,MACrBC,MACAC,WACAf,YAAYgB,GAMRd,KAAKQ,cAAgBM,EAAMN,cAC3BR,KAAKS,SAAWK,EAAML,SACtBT,KAAKU,QAAUI,EAAMJ,QACrBV,KAAKP,SAAWqB,EAAMrB,UAAY,GACtC,CACAsB,QACIC,YAAYhB,KAAKiB,iBAAiBC,KAAKlB,MAAOA,KAAKP,SACvD,CACAwB,mBACI,MAAME,EAAenB,KAAKS,WAC1B,IAAKT,KAAKW,UAAW,CACjB,IAAKX,KAAKY,QAAUZ,KAAKQ,cAAcW,EAAcnB,KAAKY,OAAQ,CAE9DZ,KAAKW,UAAY,KACjBX,KAAKa,WAAaM,CACtB,CACJ,KAAO,CACH,GAAInB,KAAKQ,cAAcW,EAAcnB,KAAKa,YAAa,CACnDb,KAAKU,QAAQS,EAAcnB,KAAKY,OAChCZ,KAAKY,MAAQO,CACjB,CACAnB,KAAKW,UAAY,KACrB,CACJ,EACH,IAAAS,EAAA,CAAAC,WAAA,MAAAD,EAAA9B,2BAAA8B,EAAA5B,gBAAA4B,EAAAb,eAAA,OAAAa,CAAA","ignoreList":[]}