{"version":3,"file":"SearchShellHelper-dbg.js","names":["sap","ui","define","__i18n","__SearchFieldGroup","SearchHelper","SearchModel","__SearchFieldStateManager","__SearchShellHelperHorizonTheme","__UIEvents","Element","EventBus","ResourceModel","___controls_webcompsearchfieldgroup_WebCompSearchFieldGroupBindings","___controls_webcompsearchfieldgroup_UShellWebCompLoader","_interopRequireDefault","obj","__esModule","default","i18n","SearchFieldGroup","SearchFieldStateManager","SearchShellHelperHorizonTheme","UIEvents","createWebCompSearchFieldGroupBindings","loadUShellWebComps","SearchShellHelper","isInitialized","sSearchOverlayCSS","oModel","oShellHeader","oSearchFieldGroup","focusInputFieldTimeout","isFocusHandlerActive","searchFieldStateManager","periodicRetryFocus","constructor","Error","init","searchField","getModelSingleton","getElementById","config","isWebCompSearchFieldGroupEnabled","window","ushell","Container","getServiceAsync","then","service","prefetch","createWebCompSearchFieldGroup","setSearch","createSearchFieldGroup","shellHeader","model","searchFieldGroup","getInstance","subscribe","onSearchComponentLoaded","bind","attachAfterNavigate","onAfterNavigate","focusHandler","isSearchAppActive","setFocus","expandSearch","resetModel","resetQuery","oEvent","getParameter","notifySubscribers","ESHSearchLayoutChanged","focusSearchField","collapseSearch","setModel","bundle","oSearchInput","input","setMaxSuggestionWidth","oSearchSelect","select","setTooltip","getText","addEventDelegate","onAfterRendering","jQuery","attr","attachChange","focusSearchInput","selectContent","oSearchButton","button","attachPress","handleClickSearchButton","oSearchCancelButton","cancelButton","setCancelButtonActive","document","on","fnEscCallBack","attachSearchSizeChanged","sizeSearchFieldChanged","keyCode","isSearchInputFocused","preventDefault","getValue","setValue","event","size","getParameters","limit","setDisplayMode","setVisible","addStyleClass","removeStyleClass","onShellSearchButtonPressed","getSearchBoxValue","getDataSource","getDefaultDataSource","isSearchFieldExpandedByDefault"],"sources":["SearchShellHelper.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport i18n from \"./i18n\";\nimport SearchFieldGroup from \"./controls/searchfieldgroup/SearchFieldGroup\";\nimport * as SearchHelper from \"sap/esh/search/ui/SearchHelper\";\nimport Event from \"sap/ui/base/Event\";\nimport SearchModel from \"sap/esh/search/ui/SearchModel\";\nimport SearchSelect from \"./controls/searchfieldgroup/SearchSelect\";\nimport SearchFieldStateManager from \"./controls/searchfieldgroup/SearchFieldStateManager\";\nimport SearchShellHelperHorizonTheme from \"./SearchShellHelperHorizonTheme\";\nimport UIEvents from \"./UIEvents\";\nimport Element from \"sap/ui/core/Element\";\nimport EventBus from \"sap/ui/core/EventBus\";\nimport ResourceModel from \"sap/ui/model/resource/ResourceModel\";\nimport { PeriodicRetry } from \"./SearchUtil\";\nimport WebCompSearchFieldStateManager from \"./controls/webcompsearchfieldgroup/WebCompSearchFieldStateManager\";\nimport Control from \"sap/ui/core/Control\";\nimport { createWebCompSearchFieldGroupBindings } from \"./controls/webcompsearchfieldgroup/WebCompSearchFieldGroupBindings\";\nimport type ShellBarSearch from \"@ui5/webcomponents-fiori/dist/ShellBarSearch\";\nimport { loadUShellWebComps } from \"./controls/webcompsearchfieldgroup/UShellWebCompLoader\";\n\nexport default abstract class SearchShellHelper {\n    static isInitialized: boolean;\n    static sSearchOverlayCSS: \"sapUshellShellShowSearchOverlay\";\n    static oModel: SearchModel;\n    static oShellHeader: any;\n    static oSearchFieldGroup: SearchFieldGroup;\n    static focusInputFieldTimeout: number | undefined;\n    static isFocusHandlerActive: boolean;\n    static searchFieldStateManager: SearchFieldStateManager | WebCompSearchFieldStateManager;\n    static periodicRetryFocus: PeriodicRetry;\n\n    // =======================================================================\n    // generic methods: used for webcomponents and not webcomponents use case\n    // =======================================================================\n\n    constructor() {\n        throw new Error(\"Cannot instantiate static class 'SearchShellHelper'\");\n    }\n\n    public static async init(searchField?: ShellBarSearch): Promise<void> {\n        // get search model and shell header\n        this.oModel = SearchModel.getModelSingleton({}, \"flp\") as SearchModel;\n        this.oShellHeader = Element.getElementById(\"shell-header\") as any;\n\n        if (this.oModel.config.isWebCompSearchFieldGroupEnabled() && !searchField) {\n            // ignore legacy initialization calls without a searchField\n            return;\n        }\n\n        if (this.isInitialized) {\n            // check already initialized\n            return;\n        }\n        this.isInitialized = true;\n\n        // pre-fetch all app tiles\n        (window.sap.ushell as any).Container.getServiceAsync(\"Search\").then((service) => {\n            service.prefetch();\n        });\n\n        // create search field group\n        if (this.oModel.config.isWebCompSearchFieldGroupEnabled()) {\n            this.oSearchFieldGroup = await this.createWebCompSearchFieldGroup(searchField);\n            /*this.searchFieldStateManager = new WebCompSearchFieldStateManager({\n                shellHeader: this.oShellHeader,\n                model: this.oModel,\n                searchFieldGroup: this.oSearchFieldGroup,\n            });*/\n            if (!searchField) {\n                this.oShellHeader.setSearch(this.oSearchFieldGroup);\n                // search field created by elisa needs to be added to shell\n                // search field provided by ushell is already part of shell\n            }\n        } else {\n            this.oSearchFieldGroup = this.createSearchFieldGroup();\n            this.searchFieldStateManager = new SearchFieldStateManager({\n                shellHeader: this.oShellHeader,\n                model: this.oModel,\n                searchFieldGroup: this.oSearchFieldGroup,\n            });\n            this.oShellHeader.setSearch(this.oSearchFieldGroup);\n        }\n\n        // after search comp loaded -> expand search field (important for reload of search result list)\n        EventBus.getInstance().subscribe(\n            \"shell\",\n            \"searchCompLoaded\",\n            this.onSearchComponentLoaded.bind(this),\n            {}\n        );\n\n        // after navigation -> set focus to first element of results list\n        (Element.getElementById(\"viewPortContainer\") as any).attachAfterNavigate(\n            this.onAfterNavigate.bind(this),\n            {}\n        );\n\n        // event ?? -> set focus to first element of results list\n        EventBus.getInstance().subscribe(\"sap.ushell\", \"appComponentLoaded\", () => {\n            if (this?.oModel?.focusHandler && SearchHelper.isSearchAppActive()) {\n                this.oModel.focusHandler.setFocus();\n            }\n        });\n    }\n\n    public static onSearchComponentLoaded(): void {\n        // triggered by shell after search component is loaded\n        // (search field is created in search component)\n        if (!SearchHelper.isSearchAppActive()) {\n            return;\n        }\n        this.expandSearch();\n    }\n\n    public static resetModel(): void {\n        this.oModel.resetQuery();\n    }\n\n    public static onAfterNavigate(oEvent: any): void {\n        // navigation tries to restore the focus -> but application knows better how to set the focus\n        // -> after navigation call focus setter of search application\n        if (\n            oEvent.getParameter(\"toId\") !== \"shellPage-Action-search\" &&\n            oEvent.getParameter(\"toId\") !== \"applicationShellPage-Action-search\" &&\n            oEvent.getParameter(\"toId\") !== \"application-Action-search\"\n        ) {\n            return;\n        }\n        this.oModel.focusHandler.setFocus();\n        this.oModel.notifySubscribers(UIEvents.ESHSearchLayoutChanged);\n    }\n\n    public static expandSearch(focusSearchField?: boolean): void {\n        this.searchFieldStateManager?.expandSearch(focusSearchField);\n    }\n\n    public static collapseSearch(): void {\n        this.searchFieldStateManager?.collapseSearch();\n    }\n\n    // =======================================================================\n    // webcomponents methods\n    // =======================================================================\n\n    private static async createWebCompSearchFieldGroup(\n        searchFieldGroup: ShellBarSearch\n    ): Promise<SearchFieldGroup> {\n        /*if (!searchFieldGroup) {\n            searchFieldGroup = new ShellBarSearch(\"searchFieldInShell\");\n        }*/\n        createWebCompSearchFieldGroupBindings(searchFieldGroup, await loadUShellWebComps());\n        (searchFieldGroup as Control).setModel(this.oModel);\n        (searchFieldGroup as Control).setModel(new ResourceModel({ bundle: i18n }), \"i18n\");\n        return searchFieldGroup as SearchFieldGroup;\n    }\n\n    // =======================================================================\n    //  classical (not webcomponent) methods\n    // =======================================================================\n\n    private static createSearchFieldGroup(): SearchFieldGroup {\n        // create search field group control\n        const oSearchFieldGroup = new SearchFieldGroup(\"searchFieldInShell\");\n        oSearchFieldGroup.setModel(this.oModel);\n        oSearchFieldGroup.setModel(new ResourceModel({ bundle: i18n }), \"i18n\");\n\n        // initialize search input\n        const oSearchInput = oSearchFieldGroup.input;\n        oSearchInput.setMaxSuggestionWidth(\"30rem\");\n\n        // initialize search select\n        const oSearchSelect = oSearchFieldGroup.select as SearchSelect;\n\n        oSearchSelect.setTooltip(i18n.getText(\"searchInTooltip\"));\n\n        oSearchSelect.addEventDelegate(\n            {\n                onAfterRendering: () => {\n                    jQuery('[id$=\"searchFieldInShell-select-icon\"]').attr(\"title\", i18n.getText(\"searchIn\"));\n                },\n            },\n            oSearchSelect\n        );\n        oSearchSelect.setTooltip(i18n.getText(\"searchIn\"));\n        oSearchSelect.attachChange(() => {\n            (this.searchFieldStateManager as SearchFieldStateManager).focusSearchInput({\n                selectContent: true,\n            });\n        });\n\n        // initialize search button\n        const oSearchButton = oSearchFieldGroup.button;\n        oSearchButton.attachPress(() => {\n            this.handleClickSearchButton();\n        });\n\n        // initialize cancel button\n        const oSearchCancelButton = oSearchFieldGroup.cancelButton;\n        oSearchCancelButton.attachPress(() => {\n            this.collapseSearch();\n        });\n        oSearchFieldGroup.setCancelButtonActive(false);\n\n        // esc key handler\n        jQuery(document).on(\"keydown\", this.fnEscCallBack.bind(this));\n\n        // header size changed -> adapt visibility cancel button, dropdown button size, visibility search button\n        this.oShellHeader.attachSearchSizeChanged(this.sizeSearchFieldChanged.bind(this));\n\n        return oSearchFieldGroup;\n    }\n\n    public static fnEscCallBack(oEvent: any): void {\n        // check that search field group is available\n        if (!this.oSearchFieldGroup) {\n            return;\n        }\n        // check for ESC\n        if (oEvent.keyCode !== 27) {\n            return;\n        }\n        // check that search field is focused\n        if (!this.searchFieldStateManager.isSearchInputFocused()) {\n            return;\n        }\n        // check that search app is active\n        if (SearchHelper.isSearchAppActive()) {\n            return;\n        }\n        oEvent.preventDefault(); // browser would delete value\n        if ((this.oSearchFieldGroup as SearchFieldGroup).input.getValue() === \"\") {\n            this.collapseSearch();\n        } else if ((this.oSearchFieldGroup as SearchFieldGroup).input.getValue() === \" \") {\n            (this.oSearchFieldGroup as SearchFieldGroup).input.setValue(\"\"); // ??\n        }\n    }\n\n    public static sizeSearchFieldChanged(event: Event): void {\n        // check that search field group is available\n        if (!this.oSearchFieldGroup) {\n            return;\n        }\n        const size = event.getParameters()[\"remSize\"];\n        // display mode of connector dropdown\n        let limit = 24;\n        if (size <= limit) {\n            (this.oSearchFieldGroup as SearchFieldGroup).select.setDisplayMode(\"icon\");\n        } else {\n            (this.oSearchFieldGroup as SearchFieldGroup).select.setDisplayMode(\"default\");\n        }\n        // visibility of search button\n        limit = 9;\n        if (size < limit) {\n            (this.oSearchFieldGroup as SearchFieldGroup).button.setVisible(false);\n        } else {\n            (this.oSearchFieldGroup as SearchFieldGroup).button.setVisible(true);\n        }\n        // cancel button\n        if ((event as any).getParameter(\"isFullWidth\")) {\n            (this.oSearchFieldGroup as SearchFieldGroup).setCancelButtonActive(true);\n            (this.oSearchFieldGroup as SearchFieldGroup).addStyleClass(\"sapUshellSearchInputFullWidth\");\n        } else {\n            (this.oSearchFieldGroup as SearchFieldGroup).setCancelButtonActive(false);\n            (this.oSearchFieldGroup as SearchFieldGroup).removeStyleClass(\"sapUshellSearchInputFullWidth\");\n        }\n    }\n\n    public static onShellSearchButtonPressed(): void {\n        SearchShellHelper.init();\n        if (this.oModel.config.isWebCompSearchFieldGroupEnabled()) {\n            return;\n        }\n        this.expandSearch(true);\n    }\n\n    public static handleClickSearchButton(): void {\n        if (\n            (this.searchFieldStateManager as SearchFieldStateManager).getSearchBoxValue() === \"\" &&\n            this.oModel.getDataSource() === this.oModel.getDefaultDataSource()\n        ) {\n            if (SearchShellHelperHorizonTheme.isSearchFieldExpandedByDefault()) {\n                // screen size XL: focus input field\n                (this.searchFieldStateManager as SearchFieldStateManager).focusSearchInput({\n                    selectContent: false,\n                });\n            } else {\n                // small screen size: collapse input field + focus shell magnifier\n                this.collapseSearch();\n            }\n        }\n    }\n}\n"],"mappings":"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","ignoreList":[]}