{"version":3,"file":"SearchSuggestionFactory-dbg.js","names":["sap","ui","define","__i18n","__SuggestionType","_interopRequireDefault","obj","__esModule","default","i18n","SuggestionType","Type","assembleLabel","searchModel","hierarchyNodePathLength","getProperty","length","breadCrumb","pathSep","hierarchyNodes","slice","document","documentElement","getAttribute","reverse","forEach","hierarchyNode","index","label","getText","getSearchBoxTerm","getDataSource","labelPlural","hasFilter","filter","dataSource","staticHierarchyAttributeId","getStaticHierarchyAttributeMetadata","id","filterAttributes","rootCondition","getAttributes","attributeId","createSearchSuggestionForCurrentSearch","searchTerm","icon","titleNavigation","createSearchNavigationTargetCurrentState","uiSuggestionType","Search","position","properties","filterIcon","__exports"],"sources":["SearchSuggestionFactory.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport SearchModel from \"../SearchModel\";\nimport i18n from \"../i18n\";\nimport { HierarchyNode } from \"../sinaNexTS/sina/HierarchyNode\";\nimport SuggestionType, { SearchSuggestion, Type } from \"./SuggestionType\";\n\nfunction assembleLabel(searchModel: SearchModel): string {\n    // if the model has has a selected hierarchy node (folder), use that:\n    const hierarchyNodePathLength = searchModel.getProperty(\"/breadcrumbsHierarchyNodePaths\").length;\n    if (hierarchyNodePathLength > 0) {\n        let breadCrumb = \"\";\n        let pathSep = \" > \";\n        let hierarchyNodes = (\n            searchModel.getProperty(\"/breadcrumbsHierarchyNodePaths\") as HierarchyNode[]\n        ).slice();\n        if (document.documentElement.getAttribute(\"dir\") === \"rtl\") {\n            pathSep = \" < \";\n            hierarchyNodes = hierarchyNodes.reverse();\n        }\n        hierarchyNodes.forEach((hierarchyNode, index) => {\n            breadCrumb += hierarchyNode.label;\n            if (++index < hierarchyNodePathLength) {\n                breadCrumb += pathSep;\n            }\n        });\n        return i18n.getText(\"resultsIn\", [\"<span>\" + searchModel.getSearchBoxTerm() + \"</span>\", breadCrumb]);\n    }\n    // if the model has more than one data source, add the data source to the label:\n    if (searchModel.getProperty(\"/dataSources\").length > 1) {\n        return i18n.getText(\"resultsIn\", [\n            \"<span>\" + searchModel.getSearchBoxTerm() + \"</span>\",\n            searchModel.getDataSource().labelPlural,\n        ]);\n    }\n    // fallback just use searchterm\n    return searchModel.getSearchBoxTerm();\n}\n\nfunction hasFilter(searchModel: SearchModel): boolean {\n    const filter = searchModel.getProperty(\"/uiFilter\");\n    const dataSource = filter.dataSource;\n    const staticHierarchyAttributeId = dataSource.getStaticHierarchyAttributeMetadata()?.id;\n    const filterAttributes = filter.rootCondition.getAttributes().filter((attributeId) => {\n        // ignore static hierarchy filter conditions\n        if (staticHierarchyAttributeId && staticHierarchyAttributeId === attributeId) {\n            return false;\n        }\n        return true;\n    });\n    return filterAttributes.length > 0;\n}\n\nexport function createSearchSuggestionForCurrentSearch(searchModel: SearchModel): SearchSuggestion {\n    const searchTerm = searchModel.getSearchBoxTerm();\n\n    if (!searchTerm || searchTerm === \"*\" || searchTerm === \"\") return;\n\n    return {\n        label: assembleLabel(searchModel),\n        icon: \"sap-icon://search\",\n        titleNavigation: searchModel.createSearchNavigationTargetCurrentState(),\n        uiSuggestionType: Type.Search,\n        position: SuggestionType.properties.Search.position,\n        filterIcon: hasFilter(searchModel) ? \"sap-icon://filter\" : \"\",\n    };\n}\n"],"mappings":"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","ignoreList":[]}