{"version":3,"file":"SinaObjectSuggestionFormatter-dbg.js","names":["sap","ui","define","___sinaNexTS_sina_SearchResultSetItemAttribute","___sinaNexTS_sina_AttributeType","SearchResultSetItemAttribute","AttributeType","Formatter","assembleLabel1","sinaSuggestion","title","isHighlighted","attribute","titleAttributes","object","i","length","metadata","type","ImageUrl","push","valueHighlighted","label","join","assembleLabel2","label1IsHighlighted","detailAttributes","getFirstHighlightedAttribute","getFirstStringAttribute","attributes","sortOrder","Date","Double","GeoJson","ImageBlob","Integer","String","Time","Timestamp","slice","sort","a1","a2","assembleNavigation","defaultNavigationTarget","navigationTarget","target","assembleImageUrl","aAttributes","concat","sina","imageUrl","value","imageExists","imageIsCircular","format","AttributeFormatType","Round","exists","suggestionProvider","suggestion","label1","label2","titleNavigation","core","extend","position","addSuggestion"],"sources":["SinaObjectSuggestionFormatter.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport SearchModel from \"sap/esh/search/ui/SearchModel\";\nimport { SearchResultSetItemAttribute } from \"../sinaNexTS/sina/SearchResultSetItemAttribute\";\nimport { UISinaObjectSuggestion } from \"./SuggestionType\";\nimport { NavigationTarget } from \"../sinaNexTS/sina/NavigationTarget\";\nimport { AttributeType } from \"../sinaNexTS/sina/AttributeType\";\n\nexport default class Formatter {\n    private assembleLabel1(sinaSuggestion: UISinaObjectSuggestion): {\n        label: string;\n        isHighlighted: boolean;\n    } {\n        const title = [];\n        let isHighlighted = false;\n        let attribute;\n        const titleAttributes = sinaSuggestion.object.titleAttributes;\n        for (let i = 0; i < titleAttributes.length; ++i) {\n            attribute = titleAttributes[i];\n            if (attribute.metadata?.type === AttributeType.ImageUrl) {\n                continue;\n            }\n            title.push(attribute.valueHighlighted);\n            if (attribute.isHighlighted) {\n                isHighlighted = true;\n            }\n        }\n        return {\n            label: title.join(\" \"),\n            isHighlighted: isHighlighted,\n        };\n    }\n\n    private assembleLabel2(label1IsHighlighted: boolean, sinaSuggestion: UISinaObjectSuggestion): string {\n        const detailAttributes = sinaSuggestion.object.detailAttributes;\n        let attribute;\n\n        if (detailAttributes.length === 0) {\n            return \"\";\n        }\n\n        if (!label1IsHighlighted) {\n            attribute = this.getFirstHighlightedAttribute(detailAttributes);\n            if (attribute) {\n                return attribute.valueHighlighted;\n            }\n        }\n\n        attribute = this.getFirstStringAttribute(detailAttributes);\n        if (attribute) {\n            return attribute.label + \": \" + attribute.valueHighlighted;\n        }\n\n        return \"\";\n    }\n\n    private getFirstHighlightedAttribute(attributes) {\n        for (let i = 0; i < attributes.length; ++i) {\n            const attribute = attributes[i];\n            if (attribute.isHighlighted) {\n                return attribute;\n            }\n        }\n    }\n\n    private getFirstStringAttribute(attributes) {\n        const sortOrder = {\n            Date: 40,\n            Double: 70,\n            GeoJson: 130,\n            ImageBlob: 120,\n            ImageUrl: 110,\n            Integer: 60,\n            String: 10,\n            Time: 50,\n            Timestamp: 30,\n        };\n        if (attributes.length === 0) {\n            return null;\n        }\n        attributes = attributes.slice();\n        attributes.sort(function (a1, a2) {\n            return sortOrder[a1.metadata.type] - sortOrder[a2.metadata.type];\n        });\n        const attribute = attributes[0];\n        if (sortOrder[attribute.metadata.type] > 100) {\n            return null;\n        }\n        return attribute;\n    }\n\n    private assembleNavigation(sinaSuggestion: UISinaObjectSuggestion): null | NavigationTarget {\n        if (!sinaSuggestion.object.defaultNavigationTarget) {\n            return null;\n        }\n        const navigationTarget = sinaSuggestion.object.defaultNavigationTarget;\n        navigationTarget.target = \"_blank\"; // open in new window\n        return navigationTarget;\n    }\n\n    private assembleImageUrl(sinaSuggestion: UISinaObjectSuggestion): {\n        imageUrl?: string;\n        imageExists?: true;\n        imageIsCircular?: boolean;\n        exists?: false;\n    } {\n        const aAttributes = sinaSuggestion.object.detailAttributes.concat(\n            sinaSuggestion.object.titleAttributes\n        );\n        for (let i = 0; i < aAttributes.length; ++i) {\n            const attribute = aAttributes[i];\n            if (\n                attribute instanceof SearchResultSetItemAttribute &&\n                attribute.metadata.type === attribute.sina.AttributeType.ImageUrl\n            ) {\n                return {\n                    imageUrl: attribute.value,\n                    imageExists: true,\n                    imageIsCircular:\n                        attribute.metadata.format &&\n                        attribute.metadata.format === sinaSuggestion.sina.AttributeFormatType.Round,\n                };\n            }\n        }\n        return {\n            exists: false,\n        };\n    }\n\n    public format(\n        suggestionProvider: {\n            model: SearchModel;\n            addSuggestion: (\n                suggestion: Partial<\n                    UISinaObjectSuggestion & {\n                        label1: string;\n                        label2: string;\n                        titleNavigation: null | NavigationTarget;\n                    }\n                >\n            ) => void;\n        },\n        sinaSuggestion: UISinaObjectSuggestion\n    ): void {\n        // create suggestion\n        const suggestion: Partial<\n            UISinaObjectSuggestion & {\n                label1: string;\n                label2: string;\n                titleNavigation: null | NavigationTarget;\n            }\n        > = sinaSuggestion;\n\n        // assemble label\n        const label1 = this.assembleLabel1(sinaSuggestion);\n        suggestion.label1 = label1.label;\n\n        // assemble second label (second line in UI)\n        suggestion.label2 = this.assembleLabel2(label1.isHighlighted, sinaSuggestion);\n\n        // assemble navigation target\n        suggestion.titleNavigation = this.assembleNavigation(sinaSuggestion);\n\n        // assemble image url\n        const imageUrl = this.assembleImageUrl(sinaSuggestion);\n        sinaSuggestion.sina.core.extend(suggestion, imageUrl);\n\n        // position\n        suggestion.position = sinaSuggestion.position;\n\n        // add\n        suggestionProvider.addSuggestion(suggestion);\n    }\n}\n"],"mappings":"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","ignoreList":[]}