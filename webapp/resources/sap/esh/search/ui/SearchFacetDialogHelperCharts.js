/*!
 * SAPUI5
 * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.
 * 
 */
sap.ui.define(["./i18n","./controls/facets/types/tabbarfacet/SearchFacetPieChart","sap/base/Log","sap/suite/ui/microchart/ComparisonMicroChart","sap/m/IconTabFilter","sap/m/Button","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/ResizeHandler","sap/suite/ui/microchart/ComparisonMicroChartData","sap/m/ActionSheet","sap/m/library","sap/ui/core/Element"],function(t,e,a,s,n,o,r,l,i,c,h,p,d){"use strict";function u(t){return t&&t.__esModule&&typeof t.default!=="undefined"?t.default:t}const g=u(t);const f=u(e);const m=p["ValueColor"];const y=p["PlacementType"];class C{static dialog;constructor(t){C.dialog=t}static getBarChartPlaceholder(){const t={height:"90%",width:"100%",colorPalette:"",tooltip:""};const e=new s(t);e.addStyleClass("largeChart1barchart");const a=new r({path:"value",operator:l.GT,value1:0});const n={path:"items",factory:()=>{const t=new c({title:{path:"label"},value:{path:"value"},color:{path:"selected",formatter:t=>{let e=m.Good;if(!t){e=m.Neutral}return e}},tooltip:{parts:[{path:"label"},{path:"value"}],formatter:(t,e)=>t+": "+e},displayValue:{path:"valueLabel"},press:t=>{this.dialog.onDetailPageSelectionChangeCharts(t)}});return t},filters:[a]};e.bindAggregation("data",n);e.setBusyIndicatorDelay(0);return e}testWhetherPieWedgeOrLabelIsDummy(t){let e=false;try{const a=t.getParameters();const s=JSON.stringify(a.data[0].data).split('"')[3];const n=s.match(/\d+/g)[0];const o=s.match(/\d+/g)[1];if(s===g.getText("facetPieChartOverflowText2",[n,o])){e=true}else if(s===g.getText("facetPieChartOverflowText2",[o,n])){e=true}}catch(t){a.debug(t)}return e}static getPieChartPlaceholder(){const t={oSearchFacetDialog:this.dialog};const e=new f("",t);e.addStyleClass("largeChart2piechart");i.register(e,function(t){let e=0;let a=0;const s=t;if(s.target.firstChild){e=parseInt(window.getComputedStyle(s.target.firstChild,null).getPropertyValue("transform-origin").split(" ")[0],10);a=s.size.width/2-e;s.target.firstChild.style.marginLeft=a+"px"}});return e}static setDummyTabBarItems(t,...e){const a=[new n({text:g.getText("facetList"),icon:"sap-icon://list",key:"list"+e[0]}),new n({text:g.getText("facetBarChart"),icon:"sap-icon://horizontal-bar-chart",key:"barChart"+e[0]}),new n({text:g.getText("facetPieChart"),icon:"sap-icon://pie-chart",key:"pieChart"+e[0]})];t.setProperty("tabBarItems",a);t.chartOnDisplayIndex=0}static getDropDownButton(t){const e=[];let s;const n=t.getProperty("tabBarItems");const r=new o({icon:n[t.chartOnDisplayIndex].getIcon(),visible:t.getModel().getProperty("/config").enableCharts});for(let a=0;a<n.length;a++){s=new o({text:n[a].getText(),icon:n[a].getIcon(),press:e=>{let a;const s=e.getSource().sId;const o=document.getElementById(s);a=o&&o.dataset?o.dataset.facetViewIndex:undefined;a=a?parseInt(a,10):0;t.chartOnDisplayIndex=a;if(t.chartOnDisplayIndex===0){const t=document.getElementsByClassName("sapUshellSearchFacetDialogSettingsContainer");for(const e of t){e.style.display="block"}}else{const t=document.getElementsByClassName("sapUshellSearchFacetDialogSettingsContainer");for(const e of t){e.style.display="none"}}t.chartOnDisplayIndexByFilterArray[t.facetOnDisplayIndex]=a;const l=n[t.chartOnDisplayIndex].getIcon();r.setIcon(l);const i=n[t.chartOnDisplayIndex].getText();const c=g.getText("displayAs",[i]);r.setTooltip(c);const h=document.getElementsByClassName("sapUshellSearchFacetDialogFacetList")[0];if(h){const t=d.getElementById(h.id);if(t&&typeof t.getSelectedItem==="function"&&!t.getSelectedItem()){t.setSelectedItem(t.getItems()[0])}if(t&&typeof t.fireSelectionChange==="function"){t.fireSelectionChange({listItem:t.getSelectedItem()})}}t.controlChartVisibility(t,a)}});s.data("facet-view-index",""+a,true);e.push(s)}const l=new h({showCancelButton:true,buttons:e,placement:y.Bottom,cancelButtonPress:function(){a.info("sap.m.ActionSheet: cancelButton is pressed")}});r.addStyleClass("sapUshellSearchFacetDialogTabBarButton");const i=n[t.chartOnDisplayIndex].getText();const c=g.getText("displayAs",[i]);r.setTooltip(c);r.attachPress(function(){l.openBy(this)});return r}static getListContainersForDetailPage(){let t=null;let e=null;let a=null;const s=[];let n=0;let o=440;const r=Array.from(document.getElementsByClassName("searchFacetLargeChartContainer"));for(let t=0;t<r.length;t++){if(r[t].clientHeight>0){let e=r[t];for(let t=0;t<3;t++){e=e&&e.offsetParent}if(e){o=e.clientHeight}n=t;break}}const l=r[n];if(l){const n=d.getElementById(l.id);const r=document.querySelectorAll(".sapUshellSearchFacetDialogSubheaderToolbar .sapMSF");const i=document.querySelectorAll(".sapUshellSearchFacetDialogSortButton");const c=l.firstChild&&l.firstChild.children?l.firstChild.children:[];for(let s=0;s<c.length;s++){const n=c[s].className;if(n){if(n.match(/sapMList/)){t=c[s]}else if(n.match(/barchart/)){e=c[s]}else if(n.match(/piechart/)){a=c[s]}}}s.push(l);s.push(n);s.push(o);s.push(t);s.push(e);s.push(a);s.push(i);s.push(r)}return s}}return C});
//# sourceMappingURL=SearchFacetDialogHelperCharts.js.map