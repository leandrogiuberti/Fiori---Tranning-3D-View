{"version":3,"file":"SearchCompositeControlDragDropConfig.js","names":["sap","ui","define","SearchCompositeControlDragDropConfig","eshComp","dragDropConfig","constructor","settings","this","assignDragDropConfig","getDragDropConfig","length","controlToAssignDragDropConfig","getResultViewType","searchResultList","searchResultTable","searchResultGrid","dragDropConfigItem","addDragDropConfig","oDragDropConfig","insertDragDropConfig","iIndex","setTimeout","indexOfDragDropConfig","removeDragDropConfig","vDragDropConfig","dragDropBase","removeAllDragDropConfig","removedDragDropConfig","destroyDragDropConfig","control"],"sources":["SearchCompositeControlDragDropConfig.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport DragDropBase from \"sap/ui/core/dnd/DragDropBase\";\nimport SearchCompositeControl from \"./SearchCompositeControl\";\nimport Control from \"sap/ui/core/Control\";\n\nexport interface $SearchCompositeControlDragDropConfigSettings {\n    eshComp: SearchCompositeControl;\n}\n\n/**\n * @namespace sap.esh.search.ui\n */\n\nexport default class SearchCompositeControlDragDropConfig {\n    public eshComp: SearchCompositeControl;\n    private dragDropConfig: Array<DragDropBase>;\n\n    constructor(settings: $SearchCompositeControlDragDropConfigSettings) {\n        this.eshComp = settings.eshComp;\n    }\n\n    assignDragDropConfig(): void {\n        let dragDropConfig = this.getDragDropConfig();\n        if (dragDropConfig.length === 0) {\n            dragDropConfig = this.dragDropConfig || [];\n        }\n        if (dragDropConfig.length > 0) {\n            let controlToAssignDragDropConfig;\n            switch (this.eshComp.getResultViewType()) {\n                case \"appSearchResult\":\n                    // no drag&drop support\n                    break;\n                case \"searchResultList\":\n                    if (this.eshComp.searchResultList) {\n                        controlToAssignDragDropConfig = this.eshComp.searchResultList;\n                    }\n                    break;\n                case \"searchResultTable\":\n                    if (this.eshComp.searchResultTable) {\n                        controlToAssignDragDropConfig = this.eshComp.searchResultTable;\n                    }\n                    break;\n                case \"searchResultGrid\":\n                    if (this.eshComp.searchResultGrid) {\n                        controlToAssignDragDropConfig = this.eshComp.searchResultGrid;\n                    }\n                    break;\n                // for other cases do nothing (empty or not table/list/grid)\n            }\n            // re-assign D&D config\n            if (controlToAssignDragDropConfig) {\n                for (const dragDropConfigItem of dragDropConfig) {\n                    controlToAssignDragDropConfig.addDragDropConfig(dragDropConfigItem);\n                }\n            }\n        }\n    }\n\n    addDragDropConfig(oDragDropConfig: DragDropBase): any {\n        // oDragDropConfig cannot be assigned to multiple controls in parallel.\n        // -> we need to (re-)assign it to the active result view\n        switch (this.eshComp.getResultViewType()) {\n            case \"appSearchResult\":\n                // no drag&drop support\n                break;\n            case \"searchResultList\":\n                if (this.eshComp.searchResultList) {\n                    this.eshComp.searchResultList.addDragDropConfig(oDragDropConfig);\n                    this.dragDropConfig = this.getDragDropConfig();\n                    return this.eshComp.searchResultList;\n                }\n                break;\n            case \"searchResultTable\":\n                if (this.eshComp.searchResultTable) {\n                    this.eshComp.searchResultTable.addDragDropConfig(oDragDropConfig);\n                    this.dragDropConfig = this.getDragDropConfig();\n                    return this.eshComp.searchResultTable;\n                }\n                break;\n            case \"searchResultGrid\":\n                if (this.eshComp.searchResultGrid) {\n                    this.eshComp.searchResultGrid.addDragDropConfig(oDragDropConfig);\n                    this.dragDropConfig = this.getDragDropConfig();\n                    return this.eshComp.searchResultGrid;\n                }\n                break;\n            case \"\":\n                this.dragDropConfig = [oDragDropConfig];\n        }\n        return this;\n    }\n\n    insertDragDropConfig(oDragDropConfig: DragDropBase, iIndex: number): any {\n        switch (this.eshComp.getResultViewType()) {\n            case \"appSearchResult\":\n                // no drag&drop support\n                break;\n            case \"searchResultList\":\n                if (this.eshComp.searchResultList) {\n                    this.eshComp.searchResultList.insertDragDropConfig(oDragDropConfig, iIndex);\n                    this.dragDropConfig = this.getDragDropConfig();\n                    return this.eshComp.searchResultList;\n                }\n                break;\n            case \"searchResultTable\":\n                if (this.eshComp.searchResultTable) {\n                    this.eshComp.searchResultTable.insertDragDropConfig(oDragDropConfig, iIndex);\n                    this.dragDropConfig = this.getDragDropConfig();\n                    return this.eshComp.searchResultTable;\n                }\n                break;\n            case \"searchResultGrid\":\n                if (this.eshComp.searchResultGrid) {\n                    this.eshComp.searchResultGrid.insertDragDropConfig(oDragDropConfig, iIndex);\n                    this.dragDropConfig = this.getDragDropConfig();\n                    return this.eshComp.searchResultGrid;\n                }\n                break;\n            case \"\":\n                setTimeout(() => this.insertDragDropConfig(oDragDropConfig, iIndex), 500); // ToDo: Try to prevent setTimeout\n        }\n        return this;\n    }\n\n    indexOfDragDropConfig(oDragDropConfig: DragDropBase): number {\n        if (\n            this.eshComp.searchResultList?.getDragDropConfig() &&\n            this.eshComp.searchResultList?.getDragDropConfig().length > 0\n        ) {\n            return this.eshComp.searchResultList.indexOfDragDropConfig(oDragDropConfig);\n        } else if (\n            this.eshComp.searchResultTable?.getDragDropConfig() &&\n            this.eshComp.searchResultTable?.getDragDropConfig().length > 0\n        ) {\n            return this.eshComp.searchResultTable.indexOfDragDropConfig(oDragDropConfig);\n        } else if (\n            this.eshComp.searchResultGrid?.getDragDropConfig() &&\n            this.eshComp.searchResultGrid?.getDragDropConfig().length > 0\n        ) {\n            return this.eshComp.searchResultGrid.indexOfDragDropConfig(oDragDropConfig);\n        } else {\n            return -1;\n        }\n    }\n\n    getDragDropConfig(): Array<DragDropBase> {\n        if (\n            this.eshComp.searchResultList?.getDragDropConfig() &&\n            this.eshComp.searchResultList?.getDragDropConfig().length > 0\n        ) {\n            return this.eshComp.searchResultList.getDragDropConfig();\n        } else if (\n            this.eshComp.searchResultTable?.getDragDropConfig() &&\n            this.eshComp.searchResultTable?.getDragDropConfig().length > 0\n        ) {\n            return this.eshComp.searchResultTable.getDragDropConfig();\n        } else if (\n            this.eshComp.searchResultGrid?.getDragDropConfig() &&\n            this.eshComp.searchResultGrid?.getDragDropConfig().length > 0\n        ) {\n            return this.eshComp.searchResultGrid.getDragDropConfig();\n        } else {\n            return [];\n        }\n    }\n\n    removeDragDropConfig(vDragDropConfig: DragDropBase | string | int): DragDropBase {\n        let dragDropBase: DragDropBase = null;\n        if (\n            this.eshComp.searchResultList?.getDragDropConfig() &&\n            this.eshComp.searchResultList?.getDragDropConfig().length > 0\n        ) {\n            dragDropBase = this.eshComp.searchResultList.removeDragDropConfig(vDragDropConfig);\n            this.dragDropConfig = this.getDragDropConfig();\n        } else if (\n            this.eshComp.searchResultTable?.getDragDropConfig() &&\n            this.eshComp.searchResultTable?.getDragDropConfig().length > 0\n        ) {\n            dragDropBase = this.eshComp.searchResultTable.removeDragDropConfig(vDragDropConfig);\n            this.dragDropConfig = this.getDragDropConfig();\n        } else if (\n            this.eshComp.searchResultGrid?.getDragDropConfig() &&\n            this.eshComp.searchResultGrid?.getDragDropConfig().length > 0\n        ) {\n            dragDropBase = this.eshComp.searchResultGrid.removeDragDropConfig(vDragDropConfig);\n            this.dragDropConfig = this.getDragDropConfig();\n        } else {\n            // do nothing\n        }\n        return dragDropBase;\n    }\n\n    removeAllDragDropConfig(): Array<DragDropBase> {\n        let removedDragDropConfig: Array<DragDropBase> = [];\n        if (\n            this.eshComp.searchResultList?.getDragDropConfig() &&\n            this.eshComp.searchResultList?.getDragDropConfig().length > 0\n        ) {\n            removedDragDropConfig = this.eshComp.searchResultList.removeAllDragDropConfig();\n            this.dragDropConfig = this.getDragDropConfig();\n        } else if (\n            this.eshComp.searchResultTable?.getDragDropConfig() &&\n            this.eshComp.searchResultTable?.getDragDropConfig().length > 0\n        ) {\n            removedDragDropConfig = this.eshComp.searchResultTable.removeAllDragDropConfig();\n            this.dragDropConfig = this.getDragDropConfig();\n        } else if (\n            this.eshComp.searchResultGrid?.getDragDropConfig() &&\n            this.eshComp.searchResultGrid?.getDragDropConfig().length > 0\n        ) {\n            removedDragDropConfig = this.eshComp.searchResultGrid.removeAllDragDropConfig();\n            this.dragDropConfig = this.getDragDropConfig();\n        } else {\n            // do nothing;\n        }\n        return removedDragDropConfig;\n    }\n\n    destroyDragDropConfig(): any {\n        let control: Control = this.eshComp;\n        if (\n            this.eshComp.searchResultList?.getDragDropConfig() &&\n            this.eshComp.searchResultList?.getDragDropConfig().length > 0\n        ) {\n            control = this.eshComp.searchResultList.destroyDragDropConfig();\n        } else if (\n            this.eshComp.searchResultTable?.getDragDropConfig() &&\n            this.eshComp.searchResultTable?.getDragDropConfig().length > 0\n        ) {\n            control = this.eshComp.searchResultTable.destroyDragDropConfig();\n        } else if (\n            this.eshComp.searchResultGrid?.getDragDropConfig() &&\n            this.eshComp.searchResultGrid?.getDragDropConfig().length > 0\n        ) {\n            control = this.eshComp.searchResultGrid.destroyDragDropConfig();\n        } else {\n            // do nothing\n        }\n        this.dragDropConfig = [];\n        return control;\n    }\n}\n"],"mappings":"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","ignoreList":[]}