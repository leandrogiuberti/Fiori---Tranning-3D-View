/*!
 * SAPUI5
 * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.
 * 
 */
sap.ui.define(["../BusyIndicator","./TreeCache"],function(e,t){"use strict";const r=e["DummyBusyIndicator"];const o=t["TreeCache"];class s{cache;rootTreeNodePath;testMode;constructor(e,t){this.rootTreeNodePath=e;this.testMode=t;this.cache=new o}}class i extends s{model;treeNodeMap={};rootTreeNode;treeViews=[];treeNodeConstructor;busyIndicator;constructor(e){super(e.rootTreeNodePath,e.testMode);this.rootTreeNodePath=e.rootTreeNodePath;this.model=e.model;this.treeNodeConstructor=e.treeNodeConstructor;this.busyIndicator=e.busyIndicator??new r}static create(e){const t=new i(e);return t}createRootTreeNode(...e){e[0].expandable=true;e[0].expanded=true;this.rootTreeNode=this.createTreeNode(...e);this.registerTreeNode(this.rootTreeNode);return this.rootTreeNode}createTreeNode(...e){const t=new this.treeNodeConstructor(...e);return t}registerTreeNode(e){if(this.treeNodeMap[e.id]){throw"duplicate tree id"+e.id}e.setTreeNodeFactory(this);this.treeNodeMap[e.id]=e}deRegisterTreeNode(e){e.setTreeNodeFactory(null);delete this.treeNodeMap[e.id]}getTreeNode(e){return this.treeNodeMap[e]}setRootTreeNodePath(e){this.rootTreeNodePath=e}updateUI(){this.model.setProperty(this.rootTreeNodePath,{childTreeNodes:[]});this.model.setProperty(this.rootTreeNodePath,this.rootTreeNode);for(const e of this.treeViews){e.expandTreeNodes()}}saveFocus(){for(const e of this.treeViews){e.saveFocus()}}restoreFocus(){for(const e of this.treeViews){e.restoreFocus()}}setBusy(e){this.busyIndicator.setBusy(e)}registerTreeView(e){this.treeViews.push(e)}deRegisterTreeView(e){const t=this.treeViews.indexOf(e);if(t>=0){this.treeViews.splice(t,1)}}getRootTreeNode(){return this.rootTreeNode}async updateRecursively(e){try{this.setBusy(true);await this.rootTreeNode.updateRecursively();if(e){await this.updateUI()}}finally{this.setBusy(false)}}delete(){this.getRootTreeNode().delete()}}i.BaseTreeNodeFactory=s;return i});
//# sourceMappingURL=TreeNodeFactory.js.map