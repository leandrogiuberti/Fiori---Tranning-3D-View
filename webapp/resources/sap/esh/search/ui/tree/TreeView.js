/*!
 * SAPUI5
 * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.
 * 
 */
sap.ui.define(["sap/m/Tree","../SearchHelper","sap/m/library"],function(e,t,o){"use strict";const r=t["delayedExecution"];const n=o["ListSeparators"];const s=e.extend("sap.esh.search.ui.tree.TreeView.TreeView",{renderer:{apiVersion:2},metadata:{properties:{treeNodeFactory:{type:"object"}}},constructor:function t(o,s){if(typeof o==="object"){s=o}s.toggleOpenState=e=>{this.handleToggleOpenState(e)};e.prototype.constructor.call(this,o,s);this.setShowSeparators(n.None);this.expandTreeNodes=r(this.expandTreeNodes,200);this.setBusyIndicatorDelay(200)},saveFocus:function e(){const t=this.getDomRef();if(!t){this.focusTreeNodeId=undefined;return}const o=t.querySelectorAll(".sapMTreeItemBase");for(let e=0;e<o.length;++e){const t=o.item(e);if(t===document.activeElement){this.focusTreeNodeId=t.getAttribute("data-esh-tree-node-id");return}}this.focusTreeNodeId=undefined},restoreFocus:async function e(){const t=()=>document.activeElement.getAttribute("data-esh-tree-node-id")===this.focusTreeNodeId;const o=()=>{const e=this.getItems();for(const t of e){if(t.getBindingContext().getObject().id===this.focusTreeNodeId){t.focus();return}}};const r=e=>new Promise(function(t){setTimeout(t,e)});for(let e=0;e<10;++e){await r(200);if(t()){return}o()}},setTreeNodeFactory:function e(t){this.setProperty("treeNodeFactory",t);if(t){t.registerTreeView(this)}},getTreeNodeFactory:function e(){return this.getProperty("treeNodeFactory")},destroy:function t(o){e.prototype.destroy.call(this,o);this.getTreeNodeFactory().deRegisterTreeView(this)},handleToggleOpenState:function e(t){const o=t.getParameter("itemContext").getObject();o.setExpanded(t.getParameter("expanded"),true)},expandTreeNodes:function e(){if(this.isDestroyed()){return}this.collapseAll();this.expandTreeNodeRecursively(this.getTreeNodeFactory().getRootTreeNode())},expandTreeNodeRecursively:function e(t){if(t.expanded){this.doExpand(t)}for(const e of t.childTreeNodes){if(e.id==="dummy"){continue}this.expandTreeNodeRecursively(e)}},doExpand:function e(t){const o=this.getItems();for(let e=0;e<o.length;++e){const r=o[e];const n=r.getBindingContext();if(!n){continue}const s=n.getObject();if(s===t){this.expand(e);return}}}});return s});
//# sourceMappingURL=TreeView.js.map