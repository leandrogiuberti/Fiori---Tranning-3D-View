{"version":3,"file":"TreeNodeFactory-dbg.js","names":["sap","ui","define","___BusyIndicator","___TreeCache","DummyBusyIndicator","TreeCache","BaseTreeNodeFactory","cache","rootTreeNodePath","testMode","constructor","TreeNodeFactory","model","treeNodeMap","rootTreeNode","treeViews","treeNodeConstructor","busyIndicator","props","create","treeNodeFactory","createRootTreeNode","expandable","expanded","createTreeNode","registerTreeNode","treeNode","id","setTreeNodeFactory","deRegisterTreeNode","getTreeNode","setRootTreeNodePath","updateUI","setProperty","childTreeNodes","treeView","expandTreeNodes","saveFocus","restoreFocus","setBusy","isBusy","registerTreeView","push","deRegisterTreeView","index","indexOf","splice","getRootTreeNode","updateRecursively","delete"],"sources":["TreeNodeFactory.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport { DummyBusyIndicator, IBusyIndicator } from \"../BusyIndicator\";\nimport TreeNode from \"./TreeNode\";\nimport TreeView from \"./TreeView\";\nimport { TreeCache } from \"./TreeCache\";\n\nexport interface TreeNodeFactoryProperties<T extends TreeNode, C extends new (...args: any[]) => T> {\n    rootTreeNodePath: string;\n    model: JSONModel;\n    treeNodeConstructor: C;\n    testMode?: boolean;\n    busyIndicator: IBusyIndicator;\n}\n\nexport abstract class BaseTreeNodeFactory {\n    cache: TreeCache;\n    rootTreeNodePath: string;\n    testMode: boolean;\n    constructor(rootTreeNodePath: string, testMode: boolean) {\n        this.rootTreeNodePath = rootTreeNodePath;\n        this.testMode = testMode;\n        this.cache = new TreeCache();\n    }\n    abstract registerTreeNode(treeNode: TreeNode);\n    abstract deRegisterTreeNode(treeNode: TreeNode);\n    abstract registerTreeView(treeView: TreeView);\n    abstract deRegisterTreeView(treeView: TreeView);\n    abstract updateUI();\n    abstract saveFocus();\n    abstract restoreFocus();\n    abstract getRootTreeNode(): TreeNode;\n    abstract getTreeNode(id: string): TreeNode;\n    abstract setBusy(isBusy: boolean);\n}\nexport default class TreeNodeFactory<\n    T extends TreeNode,\n    C extends new (...args: any[]) => T,\n> extends BaseTreeNodeFactory {\n    model: JSONModel;\n    treeNodeMap: { [internalId: string]: T } = {};\n    rootTreeNode: T;\n    treeViews: Array<TreeView> = [];\n    treeNodeConstructor: C;\n    busyIndicator: IBusyIndicator;\n    constructor(props: TreeNodeFactoryProperties<T, C>) {\n        super(props.rootTreeNodePath, props.testMode);\n        this.rootTreeNodePath = props.rootTreeNodePath;\n        this.model = props.model;\n        this.treeNodeConstructor = props.treeNodeConstructor;\n        this.busyIndicator = props.busyIndicator ?? new DummyBusyIndicator();\n    }\n    static create<T extends TreeNode, C extends new (...args: any[]) => T>(\n        props: TreeNodeFactoryProperties<T, C>\n    ): TreeNodeFactory<T, C> {\n        const treeNodeFactory = new TreeNodeFactory<T, C>(props);\n        return treeNodeFactory;\n    }\n    createRootTreeNode(...props: ConstructorParameters<C>): T {\n        props[0].expandable = true;\n        props[0].expanded = true;\n        this.rootTreeNode = this.createTreeNode(...props);\n        this.registerTreeNode(this.rootTreeNode);\n        return this.rootTreeNode;\n    }\n    createTreeNode(...props: ConstructorParameters<C>): T {\n        const treeNode = new this.treeNodeConstructor(...props);\n        return treeNode;\n    }\n    registerTreeNode(treeNode: T) {\n        if (this.treeNodeMap[treeNode.id]) {\n            throw \"duplicate tree id\" + treeNode.id;\n        }\n        treeNode.setTreeNodeFactory(this);\n        this.treeNodeMap[treeNode.id] = treeNode;\n    }\n    deRegisterTreeNode(treeNode: T) {\n        treeNode.setTreeNodeFactory(null);\n        delete this.treeNodeMap[treeNode.id];\n    }\n    getTreeNode(id: string): T {\n        return this.treeNodeMap[id];\n    }\n    setRootTreeNodePath(rootTreeNodePath: string) {\n        this.rootTreeNodePath = rootTreeNodePath;\n    }\n    updateUI() {\n        this.model.setProperty(this.rootTreeNodePath, { childTreeNodes: [] });\n        this.model.setProperty(this.rootTreeNodePath, this.rootTreeNode);\n        for (const treeView of this.treeViews) {\n            treeView.expandTreeNodes();\n        }\n    }\n    saveFocus() {\n        for (const treeView of this.treeViews) {\n            treeView.saveFocus();\n        }\n    }\n    restoreFocus() {\n        for (const treeView of this.treeViews) {\n            treeView.restoreFocus();\n        }\n    }\n    setBusy(isBusy: boolean) {\n        this.busyIndicator.setBusy(isBusy);\n    }\n    registerTreeView(treeView: TreeView) {\n        this.treeViews.push(treeView);\n    }\n    deRegisterTreeView(treeView: TreeView) {\n        const index = this.treeViews.indexOf(treeView);\n        if (index >= 0) {\n            this.treeViews.splice(index, 1);\n        }\n    }\n    getRootTreeNode(): TreeNode {\n        return this.rootTreeNode;\n    }\n    async updateRecursively(updateUI?: boolean) {\n        try {\n            this.setBusy(true);\n            await this.rootTreeNode.updateRecursively();\n            if (updateUI) {\n                await this.updateUI();\n            }\n        } finally {\n            this.setBusy(false);\n        }\n    }\n    delete() {\n        this.getRootTreeNode().delete();\n    }\n}\n"],"mappings":"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","ignoreList":[]}