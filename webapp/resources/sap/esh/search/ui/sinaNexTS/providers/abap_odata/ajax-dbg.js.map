{"version":3,"file":"ajax-dbg.js","names":["sap","ui","define","____core_AjaxClient","___ajaxErrorFactory","___ajaxTemplates","____core_defaultAjaxErrorFactory","AjaxClient","ajaxErrorFactory","isSearchRequest","isChartRequest","isValueHelperRequest","isSuggestionRequest","isObjectSuggestionRequest","isNavigationEvent","createDefaultAjaxErrorFactory","_removeActAsQueryPart","node","SubFilters","undefined","ActAsQueryPart","i","length","createAjaxClient","properties","defaults","csrf","errorFactories","errorFormatters","requestNormalization","payload","NotToRecord","d","QueryOptions","ClientSessionID","ClientCallTimestamp","ClientServiceName","ClientLastExecutionID","payloadString","JSON","stringify","headString","endString","headIndex","indexOf","endIndex","substring","insertedString","slice","join","parse","Filter","Object","assign","client","__exports","__esModule"],"sources":["ajax.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport { AjaxClientProperties } from \"../../core/AjaxClient\";\nimport { AjaxClient } from \"../../core/AjaxClient\";\nimport { ajaxErrorFactory } from \"./ajaxErrorFactory\";\nimport {\n    isSearchRequest,\n    searchRequest,\n    isChartRequest,\n    chartRequest,\n    isValueHelperRequest,\n    valueHelperRequest,\n    isSuggestionRequest,\n    suggestionRequest,\n    isObjectSuggestionRequest,\n    objectSuggestionRequest,\n    isNavigationEvent,\n    InavigationEvent,\n} from \"./ajaxTemplates\";\nimport { createDefaultAjaxErrorFactory } from \"../../core/defaultAjaxErrorFactory\";\n\nconst _removeActAsQueryPart = function (node) {\n    if (node.SubFilters !== undefined) {\n        // not a leaf\n        delete node.ActAsQueryPart;\n        for (let i = 0; i < node.SubFilters.length; i++) {\n            this._removeActAsQueryPart(node.SubFilters[i]);\n        }\n    }\n};\n\nexport function createAjaxClient(properties?: AjaxClientProperties): AjaxClient {\n    const defaults: AjaxClientProperties = {\n        csrf: true,\n        errorFactories: [ajaxErrorFactory, createDefaultAjaxErrorFactory()],\n        errorFormatters: [],\n        requestNormalization: function (\n            payload:\n                | typeof searchRequest\n                | typeof chartRequest\n                | typeof valueHelperRequest\n                | typeof suggestionRequest\n                | typeof objectSuggestionRequest\n                | InavigationEvent\n        ) {\n            if (payload === null) {\n                return \"\";\n            }\n            if (isNavigationEvent(payload)) {\n                return {\n                    NotToRecord: true,\n                };\n            }\n            if (\n                isSearchRequest(payload) ||\n                isChartRequest(payload) ||\n                isValueHelperRequest(payload) ||\n                isSuggestionRequest(payload) ||\n                isObjectSuggestionRequest(payload)\n            ) {\n                delete payload.d.QueryOptions.ClientSessionID;\n                delete payload.d.QueryOptions.ClientCallTimestamp;\n                delete payload.d.QueryOptions.ClientServiceName;\n                delete payload.d.QueryOptions.ClientLastExecutionID;\n\n                // insert \"ExcludedDataSources\" in payload\n                // properties' ordering is important in stringified payload\n                // \"ExcludedDataSources\" should follow \"DataSources\"\n                // find \"DataSources\":[...], and insert \"ExcludedDataSources\" after\n                let payloadString = JSON.stringify(payload); // object -> string\n\n                const headString = '\"DataSources\":[';\n\n                const endString = \"]\";\n                const headIndex = payloadString.indexOf(headString);\n                const endIndex =\n                    headIndex + payloadString.substring(headIndex).indexOf(endString) + endString.length;\n\n                const insertedString = ',\"ExcludedDataSources\":[]';\n                payloadString = [\n                    payloadString.slice(0, endIndex),\n                    insertedString,\n                    payloadString.slice(endIndex),\n                ].join(\"\");\n                payload = JSON.parse(payloadString); // string -> object\n                if (\n                    (\n                        payload as\n                            | typeof searchRequest\n                            | typeof chartRequest\n                            | typeof valueHelperRequest\n                            | typeof suggestionRequest\n                            | typeof objectSuggestionRequest\n                    ).d.Filter &&\n                    (isSearchRequest(payload) ||\n                        isChartRequest(payload) ||\n                        isValueHelperRequest(payload) ||\n                        isSuggestionRequest(payload) ||\n                        isObjectSuggestionRequest(payload))\n                ) {\n                    _removeActAsQueryPart(payload.d.Filter);\n                }\n            }\n            return payload;\n        },\n        //csrfByPassCache: true\n    };\n    properties = Object.assign({}, defaults, properties);\n\n    const client = new AjaxClient(properties);\n    return client;\n}\n"],"mappings":"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","ignoreList":[]}