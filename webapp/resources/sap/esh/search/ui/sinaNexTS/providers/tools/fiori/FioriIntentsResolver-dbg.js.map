{"version":3,"file":"FioriIntentsResolver-dbg.js","names":["sap","ui","define","_____sina_SinaObject","_____sina_AttributeType","___NavigationServiceFactory","_____core_Log","SinaObject","AttributeType","getNavigationService","Log","FioriIntentsResolver","_fioriFrontendSystemInfo","_primaryIntentAction","_suppressInSearchTag","log","constructor","properties","uShellContainer","window","ushell","systemId","getLogonSystem","getName","client","getClient","toLowerCase","resolveIntents","vArgs","navigationService","defaultNavigationTarget","fallbackDefaultNavigationTarget","Array","isArray","promises","map","_vArgs","doResolveIntents","Promise","all","options","semanticObjectType","semanticObjectTypeAttrs","semanticObjectTypeAttributes","length","undefined","semanticObjectTypeAttrsAsParams","convertSemanticObjectTypeAttrs","primaryIntent","secondaryIntents","getPrimaryIntent","getSecondaryIntents","result","navigationTargets","sapSystem","assembleSapSystem","shallIntentBeSuppressed","getNavigationTargetForIntent","primaryIntentExists","validSecondaryIntents","validNavigationTargetPromises","secondaryIntent","push","validNavigationTargets","i","validSecondaryIntent","validNavigationTarget","isPrimaryIntentAction","isEqualTo","intent","action","substring","indexOf","trim","urlParameter","semanticObjectTypeAttr","value","convertAttributeValueToUI5DataTypeFormats","type","name","convertJQueryDeferredToPromise","e","warn","getLinks","semanticObject","params","withAtLeastOneUsedParam","sortResultOnTexts","tags","shellHash","externalTarget","target","externalHash","hrefForExternalAsync","navigationObject","sina","createNavigationTarget","text","targetUrl","customWindowOpenFunction","toExternal","sinaAttributeType","year","month","day","hour","minute","seconds","microseconds","Timestamp","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","addLeadingZeros","toString","Date","slice","deferred","always","resolve","reject","then","__exports","__esModule"],"sources":["FioriIntentsResolver.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport { SinaObject, SinaObjectProperties } from \"../../../sina/SinaObject\";\nimport { AttributeType } from \"../../../sina/AttributeType\";\nimport { NavigationTarget } from \"../../../sina/NavigationTarget\";\nimport { getNavigationService } from \"./NavigationServiceFactory\";\nimport { Log } from \"../../../core/Log\";\n\ntype ResolverResult =\n    | {\n          defaultNavigationTarget?: NavigationTarget;\n          navigationTargets?: Array<NavigationTarget>;\n      }\n    | undefined;\n\nexport type FioriIntentsResolverOptions = SinaObjectProperties;\n\nexport class FioriIntentsResolver extends SinaObject {\n    private _fioriFrontendSystemInfo: { systemId: string; client: string };\n    private _primaryIntentAction: string;\n    private _suppressInSearchTag: string;\n    private log = new Log(\"FioriIntentsResolver\");\n\n    constructor(properties: SinaObjectProperties) {\n        super(properties);\n        const uShellContainer = typeof window !== \"undefined\" ? window?.sap?.ushell?.[\"Container\"] : null; // not available for sina on node.js\n        if (uShellContainer) {\n            this._fioriFrontendSystemInfo = {\n                systemId: uShellContainer.getLogonSystem().getName(),\n                client: uShellContainer.getLogonSystem().getClient(),\n            };\n            this._primaryIntentAction = \"-displayFactSheet\";\n            this._suppressInSearchTag = \"suppressInEnterpriseSearch\".toLowerCase();\n        } else {\n            this._fioriFrontendSystemInfo = {\n                systemId: \"\",\n                client: \"\",\n            };\n        }\n    }\n\n    public async resolveIntents(vArgs: any | any[]): Promise<ResolverResult | Array<ResolverResult>> {\n        // check navigation service\n        const navigationService = await getNavigationService();\n        if (!navigationService || !vArgs) {\n            return {\n                defaultNavigationTarget: vArgs.fallbackDefaultNavigationTarget,\n            };\n        }\n\n        if (Array.isArray(vArgs)) {\n            // mass request\n            const promises = vArgs.map((_vArgs) => this.doResolveIntents(_vArgs));\n            return await Promise.all(promises);\n        } else {\n            // single object request\n            return await this.doResolveIntents(vArgs);\n        }\n    }\n\n    private async doResolveIntents(options): Promise<ResolverResult> {\n        // destructuring of input parameters\n        const semanticObjectType = options.semanticObjectType;\n        const semanticObjectTypeAttrs = options.semanticObjectTypeAttributes;\n        const systemId = options.systemId;\n        const client = options.client;\n        const fallbackDefaultNavigationTarget = options.fallbackDefaultNavigationTarget;\n\n        // no semantic object type -> return fallback navigation target\n        if (!semanticObjectType || semanticObjectType.length === 0) {\n            return {\n                defaultNavigationTarget: fallbackDefaultNavigationTarget,\n            };\n        }\n\n        // no semantic object type attributes -> return undefined (TODO: why not fallback navigation target?)\n        if (!semanticObjectTypeAttrs || semanticObjectTypeAttrs.length === 0) {\n            return undefined;\n        }\n\n        // convert semantic object type params into format suitable for navigation service\n        const semanticObjectTypeAttrsAsParams = this.convertSemanticObjectTypeAttrs(semanticObjectTypeAttrs);\n\n        // fetch primary intent & secondary intents\n        const [primaryIntent, secondaryIntents] = await Promise.all([\n            this.getPrimaryIntent(semanticObjectType, semanticObjectTypeAttrsAsParams),\n            this.getSecondaryIntents(semanticObjectType, semanticObjectTypeAttrsAsParams),\n        ]);\n\n        // create result structure\n        const result: ResolverResult = {\n            defaultNavigationTarget: undefined,\n            navigationTargets: [],\n        };\n\n        // assemble sap system\n        const sapSystem = this.assembleSapSystem(systemId, client);\n\n        // assemble default navigation target from primary intent\n        let defaultNavigationTarget;\n        if (primaryIntent && !this.shallIntentBeSuppressed(primaryIntent)) {\n            defaultNavigationTarget = await this.getNavigationTargetForIntent(primaryIntent, sapSystem);\n            result.defaultNavigationTarget = defaultNavigationTarget;\n        }\n        let primaryIntentExists = result.defaultNavigationTarget !== undefined;\n\n        // assemble additional navigation targets from secondary intents\n        if (!secondaryIntents) {\n            return result;\n        }\n        const validSecondaryIntents = [];\n        const validNavigationTargetPromises = [];\n        for (const secondaryIntent of secondaryIntents) {\n            if (this.shallIntentBeSuppressed(secondaryIntent)) {\n                continue;\n            }\n            validSecondaryIntents.push(secondaryIntent);\n            validNavigationTargetPromises.push(this.getNavigationTargetForIntent(secondaryIntent, sapSystem));\n        }\n        const validNavigationTargets = await Promise.all(validNavigationTargetPromises);\n        for (let i = 0; i < validSecondaryIntents.length; ++i) {\n            const validSecondaryIntent = validSecondaryIntents[i];\n            const validNavigationTarget = validNavigationTargets[i];\n            if (!primaryIntentExists && this.isPrimaryIntentAction(validSecondaryIntent)) {\n                result.defaultNavigationTarget = validNavigationTarget;\n                primaryIntentExists = true;\n            } else if (\n                !defaultNavigationTarget ||\n                !validNavigationTarget.isEqualTo(defaultNavigationTarget)\n            ) {\n                result.navigationTargets.push(validNavigationTarget);\n            }\n        }\n\n        return result;\n    }\n\n    private isPrimaryIntentAction(intent) {\n        const action = intent.intent.substring(intent.intent.indexOf(\"-\"), intent.intent.indexOf(\"?\"));\n        return action === this._primaryIntentAction;\n    }\n\n    private assembleSapSystem(systemId, client) {\n        // Set sap-system parameter if:\n        // 0) we run on cFLP in the cloud which is indicated by the global variable sap.cf\n        // 1) systemId or client from search response are not undefined or empty\n        // 2) fioriFrontendSystemInfo is *NOT* set\n        // 3) fioriFrontendSystemInfo is set, but it contains different systemId and client info than the search response\n        // TODO: this comment is misleading because it neglects the AND, OR conjunctions\n        const sapSystem: {\n            systemId: string;\n            client: string;\n            urlParameter?: string;\n        } = {\n            systemId: systemId || (this._fioriFrontendSystemInfo && this._fioriFrontendSystemInfo.systemId),\n            client: client || (this._fioriFrontendSystemInfo.client && this._fioriFrontendSystemInfo.client),\n        };\n\n        if (\n            (window.sap && window.sap[\"cf\"]) || // 0)\n            (systemId &&\n                systemId.trim().length > 0 &&\n                client &&\n                client.trim().length > 0 && // 1)\n                (!this._fioriFrontendSystemInfo || // 2)\n                    !(\n                        this._fioriFrontendSystemInfo.systemId === systemId &&\n                        this._fioriFrontendSystemInfo.client === client\n                    )))\n        ) {\n            // 3)\n            sapSystem.urlParameter = \"sap-system=sid(\" + systemId + \".\" + client + \")\";\n        }\n\n        return sapSystem;\n    }\n\n    private convertSemanticObjectTypeAttrs(semanticObjectTypeAttrs) {\n        const semanticObjectTypeAttrsAsParams = {};\n        for (const semanticObjectTypeAttr of semanticObjectTypeAttrs) {\n            const value = this.convertAttributeValueToUI5DataTypeFormats(\n                semanticObjectTypeAttr.value,\n                semanticObjectTypeAttr.type\n            );\n            semanticObjectTypeAttrsAsParams[semanticObjectTypeAttr.name] = value;\n        }\n        return semanticObjectTypeAttrsAsParams;\n    }\n\n    private async getPrimaryIntent(semanticObjectType, semanticObjectTypeAttrsAsParams): Promise<any> {\n        const navigationService = await getNavigationService();\n        if (!navigationService || !navigationService.getPrimaryIntent) {\n            return undefined;\n        }\n        try {\n            return await this.convertJQueryDeferredToPromise(\n                navigationService.getPrimaryIntent(semanticObjectType, semanticObjectTypeAttrsAsParams)\n            );\n        } catch (e) {\n            this.log.warn(\"Error while fetching primary intent: \" + e);\n            return undefined; // TODO logging\n        }\n    }\n\n    private async getSecondaryIntents(semanticObjectType, semanticObjectTypeAttrsAsParams) {\n        const navigationService = await getNavigationService();\n        if (!navigationService) {\n            return undefined;\n        }\n\n        if (!navigationService.getLinks) {\n            return undefined;\n        }\n\n        try {\n            return await this.convertJQueryDeferredToPromise(\n                navigationService.getLinks({\n                    semanticObject: semanticObjectType,\n                    params: semanticObjectTypeAttrsAsParams,\n                    withAtLeastOneUsedParam: true,\n                    sortResultOnTexts: true,\n                })\n            );\n        } catch (e) {\n            this.log.warn(\"Error while fetching secondary intents: \" + e);\n            return undefined; // TODO logging\n        }\n    }\n\n    private shallIntentBeSuppressed(intent): boolean {\n        if (intent.tags) {\n            for (let i = 0; i < intent.tags.length; i++) {\n                if (intent.tags[i].toLowerCase() === this._suppressInSearchTag) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    private async getNavigationTargetForIntent(intent, sapSystem) {\n        const navigationService = await getNavigationService();\n\n        let shellHash = intent.intent;\n\n        if (sapSystem.urlParameter) {\n            if (shellHash.indexOf(\"?\") === -1) {\n                shellHash += \"?\";\n            } else {\n                shellHash += \"&\";\n            }\n            shellHash += sapSystem.urlParameter;\n        }\n\n        const externalTarget = {\n            target: {\n                shellHash: shellHash,\n            },\n        };\n\n        const externalHash = await this.convertJQueryDeferredToPromise(\n            navigationService.hrefForExternalAsync(externalTarget)\n        );\n\n        const navigationObject = this.sina.createNavigationTarget({\n            text: intent.text,\n            targetUrl: externalHash,\n            customWindowOpenFunction: () => {\n                navigationService.toExternal(externalTarget);\n            },\n        });\n\n        return navigationObject;\n    }\n\n    private convertAttributeValueToUI5DataTypeFormats(value, sinaAttributeType: AttributeType) {\n        let year, month, day, hour, minute, seconds, microseconds;\n        switch (sinaAttributeType) {\n            case AttributeType.Timestamp:\n                // sina: JavaScript Date object\n                // UI5: \"YYYY-MM-DDTHH:MM:SS.mmm\"\n                year = value.getUTCFullYear();\n                month = value.getUTCMonth() + 1;\n                day = value.getUTCDate();\n                hour = value.getUTCHours();\n                minute = value.getUTCMinutes();\n                seconds = value.getUTCSeconds();\n                microseconds = value.getUTCMilliseconds() * 1000;\n\n                value =\n                    this.addLeadingZeros(year.toString(), 4) +\n                    \"-\" +\n                    this.addLeadingZeros(month.toString(), 2) +\n                    \"-\" +\n                    this.addLeadingZeros(day.toString(), 2) +\n                    \"T\" +\n                    this.addLeadingZeros(hour.toString(), 2) +\n                    \":\" +\n                    this.addLeadingZeros(minute.toString(), 2) +\n                    \":\" +\n                    this.addLeadingZeros(seconds.toString(), 2) +\n                    \".\" +\n                    this.addLeadingZeros(microseconds.toString(), 3);\n                break;\n            case AttributeType.Date:\n                // sina: JavaScript Date object\n                // UI5: \"YYYY-MM-DD\"\n                value = value.slice(0, 4) + \"-\" + value.slice(5, 7) + \"-\" + value.slice(8, 10);\n                break;\n        }\n        return value;\n    }\n\n    private addLeadingZeros(value, length) {\n        return \"00000000000000\".slice(0, length - value.length) + value;\n    }\n\n    private convertJQueryDeferredToPromise(deferred) {\n        if (deferred.always) {\n            // is deferred, convert needed\n            return new Promise(function (resolve, reject) {\n                deferred.then(resolve, reject);\n            });\n        } else {\n            // is promise, convert not needed\n            return deferred;\n        }\n    }\n}\n"],"mappings":"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","ignoreList":[]}