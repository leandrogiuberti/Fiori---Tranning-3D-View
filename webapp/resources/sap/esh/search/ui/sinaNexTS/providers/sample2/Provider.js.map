{"version":3,"file":"Provider.js","names":["sap","ui","define","____sina_Capabilities","___AbstractProvider","___SearchEngine","Capabilities","AbstractProvider","SearchEngine","Provider","id","configurations","default","tlt","emptyDataSource","constructor","super","this","searchEngine","sina","initAsync","properties","configurationName","configuration","_getConfigurationFromUrl","dataSourceIds","capabilities","configName","undefined","window","urlParams","URLSearchParams","location","search","get","executeSearchQuery","query","executeSuggestionQuery","suggestion","executeChartQuery","chart","executeHierarchyQuery","Error","__exports","__esModule"],"sources":["Provider.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\n// TODO:\n// - Show More dialog set manuel range -> JIRA https://jira.tools.sap/browse/HDBFIORISEARCH-2126\n// - create recursive datasource facet?\n// - ComparisonOperator not finished\n\n// - NO: title link -> NOT possible to implement through sina, but in UI\n// - NO: Object Suggestion No Link -> NOT possible to implement through sina, but in UI\n// - NO: AI suggestion (UIA user/pass in secret file)\n// - NO: additional whyfound\n\n/*\n * get the data source and attributes in JSON, input in browser debug console:\n * id = \"eshCompGenId_0\";\n * model = sap.ui.getCore().byId(id).getModelInternal();\n * model.getDataSource().toJson(\"DataSourceAndAttributesJSON\");\n * Note: make sure \"id\" has same value as json file name!\n\n * get the result set in CSV, input in browser debug console:\n * id = \"eshCompGenId_0\";\n * model = sap.ui.getCore().byId(id).getModelInternal();\n * model.resultSet.toCSV();\n * Note: make sure csv file has same name as json file name!\n*/\n\nimport { Capabilities } from \"../../sina/Capabilities\";\nimport { ChartQuery } from \"../../sina/ChartQuery\";\nimport { ChartResultSet } from \"../../sina/ChartResultSet\";\nimport { HierarchyQuery } from \"../../sina/HierarchyQuery\";\nimport { HierarchyResultSet } from \"../../sina/HierarchyResultSet\";\nimport { SearchQuery } from \"../../sina/SearchQuery\";\nimport { SearchResultSet } from \"../../sina/SearchResultSet\";\nimport { SuggestionQuery } from \"../../sina/SuggestionQuery\";\nimport { SuggestionResultSet } from \"../../sina/SuggestionResultSet\";\nimport { AbstractProvider, AbstractProviderConfiguration } from \"../AbstractProvider\";\nimport { SearchEngine } from \"./SearchEngine\";\n\ntype DataSourceId = string;\n\nexport class Provider extends AbstractProvider {\n    id = \"sample2\"; // not readonly to allow overwriting in mock-providers\n\n    // configurations now only contains datasource string arrays\n    configurations: { [configurationName: string]: DataSourceId[] } = {\n        default: [\"bp\", \"employees\", \"products\", \"tlt\", \"purchaseOrders\"],\n        tlt: [\"tlt\"],\n        emptyDataSource: [\"emptyDataSource\"],\n    };\n\n    constructor() {\n        super();\n        // initialize with default datasources\n        this.searchEngine = new SearchEngine(this.sina, this.configurations[\"default\"]);\n    }\n\n    async initAsync(\n        properties: AbstractProviderConfiguration & { configuration?: string }\n    ): Promise<{ capabilities: Capabilities }> {\n        this.sina = properties.sina ?? this.sina;\n\n        // initialize configuration\n        const configurationName = properties?.configuration ?? this._getConfigurationFromUrl();\n        const dataSourceIds = this.configurations[configurationName] ?? this.configurations[\"default\"];\n        this.searchEngine = new SearchEngine(this.sina, dataSourceIds);\n        await this.searchEngine.initAsync(this.sina);\n\n        return { capabilities: new Capabilities({}) };\n    }\n\n    private _getConfigurationFromUrl(): string | undefined {\n        // check url-parameter sample2Config\n        let configName: string | undefined = undefined;\n        if (typeof window !== \"undefined\") {\n            const urlParams = new URLSearchParams(window.location?.search);\n            configName = urlParams?.get(\"sample2Configuration\") || undefined;\n        }\n        return configName;\n    }\n\n    async executeSearchQuery(query: SearchQuery): Promise<SearchResultSet> {\n        return this.searchEngine.search(query);\n    }\n\n    async executeSuggestionQuery(query: SuggestionQuery): Promise<SuggestionResultSet> {\n        return this.searchEngine.suggestion(query);\n        /*\n        Suggestions of epm data:\n\n        1. DataSource Suggestion: \n        Input: datasource: \"All\", input: \"emp\"\n        Suggestion: \"Search In\" /n \"Employees\"\n\n        2. SearchTerm Suggestion: \n        Input: datasource: \"All\", input: \"328\"\n        Suggestion: \"Search For\" /n \"3289\", click it, trigger a search \"All\" and Searchterm \"3289\"\n\n        3. History SearchTerm Suggestion: \n        Input: datasource: \"All\", input: \"sall\", search and add it to history\n        Input: datasource: \"All\", input: \"sal\"\n        Suggestion: \"Search For\" /n \"sall\"\n\n        4. Object Suggestion: \n        Input: datasource: \"All\", input: \"sally\"\n        Suggestion: \"Employees\" /n \"Sally\" photo and email\n\n        5. SearchTermAI Suggestion:\n        NOT implemented\n\n        6. SearchTermAndDataSource Suggestion:\n        NOT implemented\n        */\n    }\n\n    async executeChartQuery(query: ChartQuery): Promise<ChartResultSet> {\n        return this.searchEngine.chart(query);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    executeHierarchyQuery(query: HierarchyQuery): Promise<HierarchyResultSet> {\n        throw new Error(\"Method not implemented.\");\n    }\n}\n"],"mappings":";;;;;AAAAA,IAAAC,GAAAC,OAAA,4EAAAC,EAAAC,EAAAC,GAAA,aAeA,MAcSC,EAAYH,EAAA,sBASZI,EAAgBH,EAAA,0BAChBI,EAAYH,EAAA,gBAId,MAAMI,UAAiBF,EAC1BG,GAAK,UAGLC,eAAkE,CAC9DC,QAAS,CAAC,KAAM,YAAa,WAAY,MAAO,kBAChDC,IAAK,CAAC,OACNC,gBAAiB,CAAC,oBAGtBC,cACIC,QAEAC,KAAKC,aAAe,IAAIV,EAAaS,KAAKE,KAAMF,KAAKN,eAAe,WACxE,CAEA,eAAMS,CACFC,GAEAJ,KAAKE,KAAOE,EAAWF,MAAQF,KAAKE,KAGpC,MAAMG,EAAoBD,GAAYE,eAAiBN,KAAKO,2BAC5D,MAAMC,EAAgBR,KAAKN,eAAeW,IAAsBL,KAAKN,eAAe,WACpFM,KAAKC,aAAe,IAAIV,EAAaS,KAAKE,KAAMM,SAC1CR,KAAKC,aAAaE,UAAUH,KAAKE,MAEvC,MAAO,CAAEO,aAAc,IAAIpB,EAAa,CAAC,GAC7C,CAEQkB,2BAEJ,IAAIG,EAAiCC,UACrC,UAAWC,SAAW,YAAa,CAC/B,MAAMC,EAAY,IAAIC,gBAAgBF,OAAOG,UAAUC,QACvDN,EAAaG,GAAWI,IAAI,yBAA2BN,SAC3D,CACA,OAAOD,CACX,CAEA,wBAAMQ,CAAmBC,GACrB,OAAOnB,KAAKC,aAAae,OAAOG,EACpC,CAEA,4BAAMC,CAAuBD,GACzB,OAAOnB,KAAKC,aAAaoB,WAAWF,EA2BxC,CAEA,uBAAMG,CAAkBH,GACpB,OAAOnB,KAAKC,aAAasB,MAAMJ,EACnC,CAGAK,sBAAsBL,GAClB,MAAM,IAAIM,MAAM,0BACpB,EACH,IAAAC,EAAA,CAAAC,WAAA,MAAAD,EAAAlC,WAAA,OAAAkC,CAAA","ignoreList":[]}