{"version":3,"file":"util.js","names":["sap","ui","define","____core_Log","Log","async","handleError","fetcher","parser","doHandleError","error","serverError","name","response","dataJSON","resultSet","addError","parseError","log","warn","e","__exports","__esModule"],"sources":["util.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport { ServerError } from \"../../core/errors\";\nimport { Log } from \"../../core/Log\";\nimport { ResultSet } from \"../../sina/ResultSet\";\n\ntype Fetcher<ResponseType> = () => Promise<ResponseType>;\ntype Parser<ResultSetType extends ResultSet, ResponseType> = (\n    response: ResponseType\n) => Promise<ResultSetType>;\n\nexport async function handleError<ResultSetType extends ResultSet, ResponseDataType>(\n    fetcher: Fetcher<ResponseDataType>,\n    parser: Parser<ResultSetType, ResponseDataType>\n): Promise<ResultSetType> {\n    //\n    async function doHandleError(error: Error): Promise<ResultSetType> {\n        let serverError: ServerError;\n        switch (error.name) {\n            case \"ServerError\":\n                serverError = error as ServerError;\n                if (!serverError.response.dataJSON) {\n                    throw error;\n                }\n                try {\n                    const resultSet = await parser(serverError.response.dataJSON as ResponseDataType);\n                    resultSet.addError(error);\n                    return resultSet;\n                } catch (parseError) {\n                    const log = new Log(\"error handle util\");\n                    log.warn(\"Error while parsing error response: \" + parseError);\n                    throw error;\n                }\n            default:\n                throw error;\n        }\n    }\n    let response: ResponseDataType;\n    try {\n        response = await fetcher();\n    } catch (e) {\n        return await doHandleError(e);\n    }\n    return await parser(response);\n}\n"],"mappings":";;;;;AAAAA,IAAAC,GAAAC,OAAA,4BAAAC,GAAA,mBAMSC,EAAGD,EAAA,OAQLE,eAAeC,EAClBC,EACAC,GAGAH,eAAeI,EAAcC,GACzB,IAAIC,EACJ,OAAQD,EAAME,MACV,IAAK,cACDD,EAAcD,EACd,IAAKC,EAAYE,SAASC,SAAU,CAChC,MAAMJ,CACV,CACA,IACI,MAAMK,QAAkBP,EAAOG,EAAYE,SAASC,UACpDC,EAAUC,SAASN,GACnB,OAAOK,CACX,CAAE,MAAOE,GACL,MAAMC,EAAM,IAAId,EAAI,qBACpBc,EAAIC,KAAK,uCAAyCF,GAClD,MAAMP,CACV,CACJ,QACI,MAAMA,EAElB,CACA,IAAIG,EACJ,IACIA,QAAiBN,GACrB,CAAE,MAAOa,GACL,aAAaX,EAAcW,EAC/B,CACA,aAAaZ,EAAOK,EACxB,CAAC,IAAAQ,EAAA,CAAAC,WAAA,MAAAD,EAAAf,cAAA,OAAAe,CAAA","ignoreList":[]}