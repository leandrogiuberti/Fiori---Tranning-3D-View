{"version":3,"file":"JoinConditions-dbg.js","names":["sap","ui","define","___NavigationTargetTemplate","_____sina_SinaObject","NavigationTargetTemplate","SinaObject","JoinConditions","navigationTargetGenerator","sourceObjectType","targetObjectType","conditions","constructor","properties","add","condition","push","hasDuplicateSemanticObject","map","i","length","semanticObjectType","hasDistinctValue","property","value","generateNavigationTargetTemplates","createSingleConditionsTemplates","createMultipleConditionsTemplates","navigationTargetTemplates","sourcePropertyNameDistinct","targetPropertyNameDistinct","navigationTargetTemplate","sina","label","_condition","assembleSingleConditionTemplateLabels","objectTypeMap","navigationTargets","targetMap","targets","labelKey","navigationTarget","metadata","propertyMap","targetPropertyName","j","sourcePropertyName","__exports","__esModule"],"sources":["JoinConditions.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport { NavigationTargetTemplate } from \"./NavigationTargetTemplate\";\nimport { SinaObject } from \"../../../sina/SinaObject\";\nimport { NavigationTargetGenerator } from \"./NavigationTargetGenerator\";\n\nexport class JoinConditions extends SinaObject {\n    navigationTargetGenerator: NavigationTargetGenerator;\n    sourceObjectType: string;\n    targetObjectType: string;\n    conditions: any[];\n\n    constructor(properties) {\n        super(properties);\n        this.navigationTargetGenerator = properties.navigationTargetGenerator;\n        this.sourceObjectType = properties.sourceObjectType;\n        this.targetObjectType = properties.targetObjectType;\n        this.conditions = [];\n    }\n\n    add(condition) {\n        this.conditions.push(condition);\n    }\n\n    hasDuplicateSemanticObject() {\n        const map = {};\n        for (let i = 0; i < this.conditions.length; ++i) {\n            const condition = this.conditions[i];\n            if (map[condition.semanticObjectType]) {\n                return true;\n            }\n            map[condition.semanticObjectType] = true;\n        }\n        return false;\n    }\n\n    hasDistinctValue(semanticObjectType, property) {\n        let value;\n        for (let i = 0; i < this.conditions.length; ++i) {\n            const condition = this.conditions[i];\n            if (condition.semanticObjectType !== semanticObjectType) {\n                continue;\n            }\n            if (!value) {\n                value = condition[property];\n                continue;\n            }\n            if (value !== condition[property]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    generateNavigationTargetTemplates() {\n        if (this.hasDuplicateSemanticObject()) {\n            return this.createSingleConditionsTemplates();\n        }\n        return this.createMultipleConditionsTemplates();\n    }\n\n    createSingleConditionsTemplates() {\n        const navigationTargetTemplates = [];\n        for (let i = 0; i < this.conditions.length; ++i) {\n            const condition = this.conditions[i];\n            const sourcePropertyNameDistinct = this.hasDistinctValue(\n                condition.semanticObjectType,\n                \"sourcePropertyName\"\n            );\n            const targetPropertyNameDistinct = this.hasDistinctValue(\n                condition.semanticObjectType,\n                \"targetPropertyName\"\n            );\n            if (!sourcePropertyNameDistinct && !targetPropertyNameDistinct) {\n                continue;\n            }\n            const navigationTargetTemplate = new NavigationTargetTemplate({\n                sina: this.sina,\n                navigationTargetGenerator: this.navigationTargetGenerator,\n                label: \"dummy\",\n                sourceObjectType: this.sourceObjectType,\n                targetObjectType: this.targetObjectType,\n                conditions: [condition],\n            });\n            navigationTargetTemplate._condition = condition;\n            navigationTargetTemplates.push(navigationTargetTemplate);\n        }\n        this.assembleSingleConditionTemplateLabels(navigationTargetTemplates);\n        return navigationTargetTemplates;\n    }\n\n    createMultipleConditionsTemplates() {\n        return [\n            new NavigationTargetTemplate({\n                sina: this.sina,\n                navigationTargetGenerator: this.navigationTargetGenerator,\n                label: this.navigationTargetGenerator.objectTypeMap[this.targetObjectType].label,\n                sourceObjectType: this.sourceObjectType,\n                targetObjectType: this.targetObjectType,\n                conditions: this.conditions,\n            }),\n        ];\n    }\n\n    assembleSingleConditionTemplateLabels(navigationTargets) {\n        // assemble label based on target object and target property\n        // collect in navigation target in map with label key\n        const targetMap = {};\n        let targets, labelKey, navigationTarget, metadata;\n        for (let i = 0; i < navigationTargets.length; ++i) {\n            navigationTarget = navigationTargets[i];\n            metadata = this.navigationTargetGenerator.objectTypeMap[this.targetObjectType];\n            labelKey =\n                metadata.label +\n                \" to:\" +\n                metadata.propertyMap[navigationTarget._condition.targetPropertyName].label;\n            navigationTarget.label = labelKey;\n            targets = targetMap[labelKey];\n            if (!targets) {\n                targets = [];\n                targetMap[labelKey] = targets;\n            }\n            targets.push(navigationTarget);\n        }\n        // assemble final label\n        metadata = this.navigationTargetGenerator.objectTypeMap[this.sourceObjectType];\n        for (labelKey in targetMap) {\n            targets = targetMap[labelKey];\n            if (targets.length > 1) {\n                for (let j = 0; j < targets.length; ++j) {\n                    navigationTarget = targets[j];\n                    navigationTarget.label +=\n                        \" from:\" + metadata.propertyMap[navigationTarget._condition.sourcePropertyName].label;\n                }\n            }\n        }\n    }\n}\n"],"mappings":"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","ignoreList":[]}