{"version":3,"file":"SuvNavTargetResolver-dbg.js","names":["sap","ui","define","_____sina_SinaObject","SinaObject","getTheme","themes","cssFile","Array","from","document","styleSheets","href","fname","toString","regex","matches","exec","push","addThemeToURL","url","res","theme","indexOf","replace","SuvNavTargetResolver","suvMimeType","suvViewerBasePath","constructor","properties","addHighlightTermsToUrl","highlightTerms","encodeURIComponent","JSON","stringify","terms","resolveSuvNavTargets","dataSource","suvAttributes","suvHighlightTerms","suvAttributeName","openSuvInFileViewerUrl","suvAttribute","thumbnailAttribute","suvThumbnailAttribute","suvTargetMimeTypeAttribute","value","suvTargetUrlAttribute","setDefaultNavigationTarget","sina","createNavigationTarget","text","targetUrl","target","__exports","__esModule"],"sources":["SuvNavTargetResolver.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport { SinaObject, SinaObjectProperties } from \"../../../sina/SinaObject\";\n\n/*\nvar curTheme = \"\";\nvar getCurrentTheme = function () {\n    if (!curTheme) {\n        curTheme = getTheme();\n    }\n    return curTheme;\n};\n*/\nconst getTheme = function () {\n    const themes = [];\n    for (const cssFile of Array.from(document.styleSheets)) {\n        if (cssFile.href) {\n            const fname = cssFile.href.toString();\n            const regex = /themes\\/(.+)\\/library.css/;\n            const matches = regex.exec(fname);\n            if (matches !== null) {\n                themes.push(matches[1]);\n                break; // Modern break statement\n            }\n        }\n    }\n    return themes[0];\n};\n\nconst addThemeToURL = function (url) {\n    let res = url;\n    let theme = getTheme();\n    if (!theme) {\n        return res;\n    }\n    theme = \"sap-theme=\" + theme + \"&\";\n    if (url.indexOf(\"sap-theme=\") === -1) {\n        if (url.indexOf(\"?\") !== -1) {\n            res = url.replace(\"?\", \"?\" + theme);\n        }\n    }\n    return res;\n};\n\nexport interface SuvAttribute {\n    suvTargetUrlAttribute: any;\n    suvTargetMimeTypeAttribute: any;\n    suvThumbnailAttribute: any;\n}\n\nexport type SuvNavTargetResolverOptions = SinaObjectProperties;\n\nexport class SuvNavTargetResolver extends SinaObject {\n    suvMimeType: string;\n    suvViewerBasePath: string;\n\n    constructor(properties: SuvNavTargetResolverOptions) {\n        super(properties);\n        this.suvMimeType = \"application/vnd.sap.universal-viewer+suv\";\n        this.suvViewerBasePath =\n            \"/sap/bc/ui5_ui5/ui2/ushell/resources/sap/fileviewer/viewer/web/viewer.html?file=\";\n    }\n\n    addHighlightTermsToUrl(url: string, highlightTerms?) {\n        if (!highlightTerms) {\n            return url;\n        }\n        url +=\n            \"&searchTerms=\" +\n            encodeURIComponent(\n                JSON.stringify({\n                    terms: highlightTerms,\n                })\n            );\n        return url;\n    }\n\n    resolveSuvNavTargets(dataSource, suvAttributes: { [key: string]: SuvAttribute }, suvHighlightTerms) {\n        for (const suvAttributeName in suvAttributes) {\n            let openSuvInFileViewerUrl;\n            const suvAttribute = suvAttributes[suvAttributeName];\n            const thumbnailAttribute = suvAttribute.suvThumbnailAttribute;\n            if (suvAttribute.suvTargetMimeTypeAttribute.value === this.suvMimeType) {\n                openSuvInFileViewerUrl =\n                    this.suvViewerBasePath + encodeURIComponent(suvAttribute.suvTargetUrlAttribute.value);\n                openSuvInFileViewerUrl = this.addHighlightTermsToUrl(\n                    openSuvInFileViewerUrl,\n                    suvHighlightTerms\n                );\n                openSuvInFileViewerUrl = addThemeToURL(openSuvInFileViewerUrl);\n                thumbnailAttribute.setDefaultNavigationTarget(\n                    this.sina.createNavigationTarget({\n                        text: suvAttribute.suvTargetUrlAttribute.value,\n                        targetUrl: openSuvInFileViewerUrl,\n                        target: \"_blank\",\n                    })\n                );\n            } else {\n                openSuvInFileViewerUrl = suvAttribute.suvTargetUrlAttribute.value;\n                thumbnailAttribute.setDefaultNavigationTarget(\n                    this.sina.createNavigationTarget({\n                        text: suvAttribute.suvTargetUrlAttribute.value,\n                        targetUrl: openSuvInFileViewerUrl,\n                        target: \"_blank\",\n                    })\n                );\n            }\n        }\n    }\n}\n"],"mappings":"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","ignoreList":[]}