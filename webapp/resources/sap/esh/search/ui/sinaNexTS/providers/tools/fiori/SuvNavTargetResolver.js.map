{"version":3,"file":"SuvNavTargetResolver.js","names":["sap","ui","define","_____sina_SinaObject","SinaObject","getTheme","themes","cssFile","Array","from","document","styleSheets","href","fname","toString","regex","matches","exec","push","addThemeToURL","url","res","theme","indexOf","replace","SuvNavTargetResolver","suvMimeType","suvViewerBasePath","constructor","properties","super","this","addHighlightTermsToUrl","highlightTerms","encodeURIComponent","JSON","stringify","terms","resolveSuvNavTargets","dataSource","suvAttributes","suvHighlightTerms","suvAttributeName","openSuvInFileViewerUrl","suvAttribute","thumbnailAttribute","suvThumbnailAttribute","suvTargetMimeTypeAttribute","value","suvTargetUrlAttribute","setDefaultNavigationTarget","sina","createNavigationTarget","text","targetUrl","target","__exports","__esModule"],"sources":["SuvNavTargetResolver.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport { SinaObject, SinaObjectProperties } from \"../../../sina/SinaObject\";\n\n/*\nvar curTheme = \"\";\nvar getCurrentTheme = function () {\n    if (!curTheme) {\n        curTheme = getTheme();\n    }\n    return curTheme;\n};\n*/\nconst getTheme = function () {\n    const themes = [];\n    for (const cssFile of Array.from(document.styleSheets)) {\n        if (cssFile.href) {\n            const fname = cssFile.href.toString();\n            const regex = /themes\\/(.+)\\/library.css/;\n            const matches = regex.exec(fname);\n            if (matches !== null) {\n                themes.push(matches[1]);\n                break; // Modern break statement\n            }\n        }\n    }\n    return themes[0];\n};\n\nconst addThemeToURL = function (url) {\n    let res = url;\n    let theme = getTheme();\n    if (!theme) {\n        return res;\n    }\n    theme = \"sap-theme=\" + theme + \"&\";\n    if (url.indexOf(\"sap-theme=\") === -1) {\n        if (url.indexOf(\"?\") !== -1) {\n            res = url.replace(\"?\", \"?\" + theme);\n        }\n    }\n    return res;\n};\n\nexport interface SuvAttribute {\n    suvTargetUrlAttribute: any;\n    suvTargetMimeTypeAttribute: any;\n    suvThumbnailAttribute: any;\n}\n\nexport type SuvNavTargetResolverOptions = SinaObjectProperties;\n\nexport class SuvNavTargetResolver extends SinaObject {\n    suvMimeType: string;\n    suvViewerBasePath: string;\n\n    constructor(properties: SuvNavTargetResolverOptions) {\n        super(properties);\n        this.suvMimeType = \"application/vnd.sap.universal-viewer+suv\";\n        this.suvViewerBasePath =\n            \"/sap/bc/ui5_ui5/ui2/ushell/resources/sap/fileviewer/viewer/web/viewer.html?file=\";\n    }\n\n    addHighlightTermsToUrl(url: string, highlightTerms?) {\n        if (!highlightTerms) {\n            return url;\n        }\n        url +=\n            \"&searchTerms=\" +\n            encodeURIComponent(\n                JSON.stringify({\n                    terms: highlightTerms,\n                })\n            );\n        return url;\n    }\n\n    resolveSuvNavTargets(dataSource, suvAttributes: { [key: string]: SuvAttribute }, suvHighlightTerms) {\n        for (const suvAttributeName in suvAttributes) {\n            let openSuvInFileViewerUrl;\n            const suvAttribute = suvAttributes[suvAttributeName];\n            const thumbnailAttribute = suvAttribute.suvThumbnailAttribute;\n            if (suvAttribute.suvTargetMimeTypeAttribute.value === this.suvMimeType) {\n                openSuvInFileViewerUrl =\n                    this.suvViewerBasePath + encodeURIComponent(suvAttribute.suvTargetUrlAttribute.value);\n                openSuvInFileViewerUrl = this.addHighlightTermsToUrl(\n                    openSuvInFileViewerUrl,\n                    suvHighlightTerms\n                );\n                openSuvInFileViewerUrl = addThemeToURL(openSuvInFileViewerUrl);\n                thumbnailAttribute.setDefaultNavigationTarget(\n                    this.sina.createNavigationTarget({\n                        text: suvAttribute.suvTargetUrlAttribute.value,\n                        targetUrl: openSuvInFileViewerUrl,\n                        target: \"_blank\",\n                    })\n                );\n            } else {\n                openSuvInFileViewerUrl = suvAttribute.suvTargetUrlAttribute.value;\n                thumbnailAttribute.setDefaultNavigationTarget(\n                    this.sina.createNavigationTarget({\n                        text: suvAttribute.suvTargetUrlAttribute.value,\n                        targetUrl: openSuvInFileViewerUrl,\n                        target: \"_blank\",\n                    })\n                );\n            }\n        }\n    }\n}\n"],"mappings":";;;;;AAAAA,IAAAC,GAAAC,OAAA,sCAAAC,GAAA,mBAKSC,EAAUD,EAAA,cAWnB,MAAME,EAAW,WACb,MAAMC,EAAS,GACf,IAAK,MAAMC,KAAWC,MAAMC,KAAKC,SAASC,aAAc,CACpD,GAAIJ,EAAQK,KAAM,CACd,MAAMC,EAAQN,EAAQK,KAAKE,WAC3B,MAAMC,EAAQ,4BACd,MAAMC,EAAUD,EAAME,KAAKJ,GAC3B,GAAIG,IAAY,KAAM,CAClBV,EAAOY,KAAKF,EAAQ,IACpB,KACJ,CACJ,CACJ,CACA,OAAOV,EAAO,EAClB,EAEA,MAAMa,EAAgB,SAAUC,GAC5B,IAAIC,EAAMD,EACV,IAAIE,EAAQjB,IACZ,IAAKiB,EAAO,CACR,OAAOD,CACX,CACAC,EAAQ,aAAeA,EAAQ,IAC/B,GAAIF,EAAIG,QAAQ,iBAAmB,EAAG,CAClC,GAAIH,EAAIG,QAAQ,QAAU,EAAG,CACzBF,EAAMD,EAAII,QAAQ,IAAK,IAAMF,EACjC,CACJ,CACA,OAAOD,CACX,EAUO,MAAMI,UAA6BrB,EACtCsB,YACAC,kBAEAC,YAAYC,GACRC,MAAMD,GACNE,KAAKL,YAAc,2CACnBK,KAAKJ,kBACD,kFACR,CAEAK,uBAAuBZ,EAAaa,GAChC,IAAKA,EAAgB,CACjB,OAAOb,CACX,CACAA,GACI,gBACAc,mBACIC,KAAKC,UAAU,CACXC,MAAOJ,KAGnB,OAAOb,CACX,CAEAkB,qBAAqBC,EAAYC,EAAgDC,GAC7E,IAAK,MAAMC,KAAoBF,EAAe,CAC1C,IAAIG,EACJ,MAAMC,EAAeJ,EAAcE,GACnC,MAAMG,EAAqBD,EAAaE,sBACxC,GAAIF,EAAaG,2BAA2BC,QAAUjB,KAAKL,YAAa,CACpEiB,EACIZ,KAAKJ,kBAAoBO,mBAAmBU,EAAaK,sBAAsBD,OACnFL,EAAyBZ,KAAKC,uBAC1BW,EACAF,GAEJE,EAAyBxB,EAAcwB,GACvCE,EAAmBK,2BACfnB,KAAKoB,KAAKC,uBAAuB,CAC7BC,KAAMT,EAAaK,sBAAsBD,MACzCM,UAAWX,EACXY,OAAQ,WAGpB,KAAO,CACHZ,EAAyBC,EAAaK,sBAAsBD,MAC5DH,EAAmBK,2BACfnB,KAAKoB,KAAKC,uBAAuB,CAC7BC,KAAMT,EAAaK,sBAAsBD,MACzCM,UAAWX,EACXY,OAAQ,WAGpB,CACJ,CACJ,EACH,IAAAC,EAAA,CAAAC,WAAA,MAAAD,EAAA/B,uBAAA,OAAA+B,CAAA","ignoreList":[]}