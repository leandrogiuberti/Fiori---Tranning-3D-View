{"version":3,"file":"SinaConfiguration-dbg.js","names":["sap","ui","define","__ui5_require_async","path","Promise","resolve","reject","require","module","__esModule","endsWith","default","Object","defineProperty","value","err","_normalizeConfiguration","configuration","trim","indexOf","JSON","parse","AvailableProviders","__exports"],"sources":["SinaConfiguration.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport { Sina } from \"./Sina\";\nimport * as sinaLog from \"../core/Log\";\nimport { ChartResultSetFormatter, Formatter } from \"./formatters/Formatter\";\nimport { AjaxClient as Client } from \"../core/AjaxClient\";\nimport { FederationType } from \"../providers/multi/FederationType\";\nimport { FacetMode } from \"../providers/multi/FacetMode\";\nimport { ComplexCondition } from \"./ComplexCondition\";\nimport { NavigationTracker } from \"./NavigationTarget\";\nimport { DataSourceConfiguration } from \"./DataSourceConfiguration\";\nimport type UI5NumberFormat from \"sap/ui/core/format/NumberFormat\";\nimport type UI5DateFormat from \"sap/ui/core/format/DateFormat\";\nimport { RequestFormatter, ResponseFormatter } from \"../core/ajax\";\n\nexport interface SinaConfiguration {\n    getTextFromResourceBundle?: (url: string, text: string) => Promise<string>; // needed for hana odata annotation \"ENTERPRISESEARCHHANA.UIRESOURCE.LABEL.KEY\"\n    getText?: (key: string, args?: Array<string>) => string;\n    contentProviderId?: string; // only ABAPOData\n    federationType?: FederationType;\n    facetMode?: FacetMode;\n    FF_hierarchyBreadcrumbs?: boolean;\n    url: string;\n    // type: string;\n    provider: AvailableProviders;\n    getLanguage?: () => string;\n    // single language code, used for http requests, header: 'Accept-Language'\n    //    - example: 'en-US'.\n    //      Passing passing multiple language codes or weights (property 'q') will result in undetermined behavior\n    //       -> see https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language\n    label?: string;\n    subProviders?: Array<SinaConfiguration>;\n    sina?: Sina;\n    initAsync?: (sina: Sina) => Promise<void>;\n    searchResultSetFormatters?: Formatter[];\n    suggestionResultSetFormatters?: Formatter[];\n    chartResultSetFormatters?: ChartResultSetFormatter[];\n    metadataFormatters?: Formatter[];\n    logTarget?: {\n        error(messageOrError: string | Error): void;\n        warn(message: string): void;\n        info(message: string): void;\n        debug(message: string): void;\n    };\n    logLevel?: sinaLog.Severity;\n    NumberFormat?: typeof UI5NumberFormat;\n    DateFormat?: typeof UI5DateFormat;\n    ajaxClient?: Client;\n    ajaxRequestFormatters?: Array<RequestFormatter>;\n    ajaxResponseFormatters?: Array<ResponseFormatter>;\n    metaDataSuffix?: string; // ToDo? -> HANA oData only\n    querySuffix?: ComplexCondition; // ToDo: Remove as soon as all stakeholders have switched to 'dataSourceConfigurations'\n    dataSourceConfigurations?: Array<DataSourceConfiguration>;\n    odataVersion?: string; // ToDo? -> HANA oData only\n    folderMode?: boolean;\n    folderModeForInitialSearch?: boolean;\n    enableQueryLanguage?: boolean;\n    // A search query parameter only for hana_oData provider to provide breadcrumbs path for each result item. It's not a hana feature but a service feature and only works with datasources with a static hierarchy.\n    // This parameter has performance impact. Hence its default value is set as false/undefined.\n    useValueHierarchy?: boolean;\n    // The same semantic and value (by mixinSearchConfigurationIntoSinaConfiguration in SearchModel) like the parameter of the same name in search configuration.\n    // E.g. the preparation of targetNavigation in Sina layer needs it\n    updateUrl?: boolean;\n    pageSize?: number;\n    searchInAreaOverwriteMode?: boolean;\n    navigationTrackers?: NavigationTracker[];\n    limitAjaxRequests?: boolean; // prevents too many ajax requests in a short time\n}\n\nexport async function _normalizeConfiguration(\n    configuration: SinaConfiguration | string\n): Promise<SinaConfiguration> {\n    // check whether configuration is a string with a javascript module name\n    if (typeof configuration === \"string\") {\n        configuration = configuration.trim();\n\n        // configuration is a string with a url -> load configuration dynamically via require\n        if (\n            configuration.indexOf(\"/\") >= 0 &&\n            configuration.indexOf(\"Provider\") < 0 &&\n            configuration[0] !== \"{\"\n        ) {\n            configuration = await import(configuration);\n            return await _normalizeConfiguration(configuration);\n        }\n\n        // configuration is a string with the provider name -> assemble json\n        if (configuration[0] !== \"{\") {\n            configuration = '{ \"provider\" : \"' + configuration + '\"}';\n        }\n\n        // parse json\n        configuration = JSON.parse(configuration) as SinaConfiguration;\n    }\n\n    return configuration;\n}\n\nexport enum AvailableProviders {\n    ABAP_ODATA = \"abap_odata\",\n    HANA_ODATA = \"hana_odata\",\n    INAV2 = \"inav2\",\n    MULTI = \"multi\",\n    SAMPLE = \"sample\",\n    SAMPLE2 = \"sample2\",\n    MOCK_SUGGESTIONTYPES = \"mock_suggestiontypes\",\n    MOCK_NLQRESULTS = \"mock_nlqresults\",\n    MOCK_DELETEANDREORDER = \"mock_deleteandreorder\",\n    DUMMY = \"dummy\",\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AAJAA,GAAA,CAAAC,EAAA,CAAAC,MAAA;EAAA;;EAAA,SAAAC,oBAAAC,IAAA;IAAA,WAAAC,OAAA,WAAAC,OAAA,EAAAC,MAAA;MAAAP,GAAA,CAAAC,EAAA,CAAAO,OAAA,EAAAJ,IAAA,aAAAK,MAAA;QAAA,MAAAA,MAAA,IAAAA,MAAA,CAAAC,UAAA;UAAAD,MAAA,GAAAA,MAAA,sBAAAA,MAAA,iBAAAL,IAAA,CAAAO,QAAA;YAAAC,OAAA,EAAAH;UAAA,IAAAA,MAAA;UAAAI,MAAA,CAAAC,cAAA,CAAAL,MAAA;YAAAM,KAAA;UAAA;QAAA;QAAAT,OAAA,CAAAG,MAAA;MAAA,aAAAO,GAAA;QAAAT,MAAA,CAAAS,GAAA;MAAA;IAAA;EAAA;EAwEO,eAAeC,uBAAuBA,CACzCC,aAAyC,EACf;IAC1B;IACA,IAAI,OAAOA,aAAa,KAAK,QAAQ,EAAE;MACnCA,aAAa,GAAGA,aAAa,CAACC,IAAI,CAAC,CAAC;;MAEpC;MACA,IACID,aAAa,CAACE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAC/BF,aAAa,CAACE,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,IACrCF,aAAa,CAAC,CAAC,CAAC,KAAK,GAAG,EAC1B;QACEA,aAAa,GAAG,MAAMf,mBAAA,CAAOe,aAAa,CAAC;QAC3C,OAAO,MAAMD,uBAAuB,CAACC,aAAa,CAAC;MACvD;;MAEA;MACA,IAAIA,aAAa,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;QAC1BA,aAAa,GAAG,kBAAkB,GAAGA,aAAa,GAAG,IAAI;MAC7D;;MAEA;MACAA,aAAa,GAAGG,IAAI,CAACC,KAAK,CAACJ,aAAa,CAAsB;IAClE;IAEA,OAAOA,aAAa;EACxB;EAAC,IAEWK,kBAAkB,0BAAlBA,kBAAkB;IAAlBA,kBAAkB;IAAlBA,kBAAkB;IAAlBA,kBAAkB;IAAlBA,kBAAkB;IAAlBA,kBAAkB;IAAlBA,kBAAkB;IAAlBA,kBAAkB;IAAlBA,kBAAkB;IAAlBA,kBAAkB;IAAlBA,kBAAkB;IAAA,OAAlBA,kBAAkB;EAAA,EAAlBA,kBAAkB;EAAA,IAAAC,SAAA;IAAAd,UAAA;EAAA;EAAAc,SAAA,CAAAP,uBAAA,GAAAA,uBAAA;EAAAO,SAAA,CAAAD,kBAAA,GAAAA,kBAAA;EAAA,OAAAC,SAAA;AAAA","ignoreList":[]}