/*!
 * SAPUI5
 * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.
 * 
 */
sap.ui.define(["../core/core","../core/util","./SinaObject","./Filter","./LogicalOperator","../core/errors","./FilteredDataSource"],function(t,e,r,i,s,o,n){"use strict";const l=r["SinaObject"];const a=i["Filter"];const u=s["LogicalOperator"];const c=o["QueryIsReadOnlyError"];const h=n["FilteredDataSource"];class f extends l{label;icon;filter;requestTimeout=false;sortOrder;skip;top;nlq;_lastQuery;_resultSetPromise;constructor(t){super(t);this.top=t.top??10;this.skip=t.skip??0;this.nlq=t.nlq??false;this.sortOrder=t.sortOrder??[];this.filter=t.filter??this.filter??new a({sina:this.sina});this.icon=t.icon;this.label=t.label;if(t.dataSource){this.filter.setDataSource(t.dataSource)}if(t.searchTerm){this.filter.setSearchTerm(t.searchTerm)}if(t.rootCondition){this.filter.setRootCondition(t.rootCondition)}if(this.requestTimeout){}if(!t.suppressRefuseOutdatedResponsesDecorator){this._execute=e.refuseOutdatedResponsesDecorator(this._execute)}}setTop(t=10){this.top=t}setSkip(t=0){this.skip=t}setNlq(t){this.nlq=t}setSortOrder(t){this.sortOrder=t}async _execute(t){return Promise.resolve(null)}clone(){return}equals(e){return e instanceof f&&this.icon===e.icon&&this.label===e.label&&this.top===e.top&&this.skip===e.skip&&this.nlq===e.nlq&&this.filter.equals(e.filter)&&t.equals(this.sortOrder,e.sortOrder)}abort(){}async getResultSetAsync(){if(this._lastQuery){if(this.equals(this._lastQuery)){return this._resultSetPromise}if(!this.filter.equals(this._lastQuery.filter)){this.setSkip(0)}}this._lastQuery=this._createReadOnlyClone();let t;this._resultSetPromise=Promise.resolve().then(function(){return this._execute(this._lastQuery)}.bind(this)).then(function(e){t=e;return this._formatResultSetAsync(t)}.bind(this)).then(function(){return t}.bind(this));return this._resultSetPromise}_genericFilteredQueryTransform(t){if(!(t.filter.dataSource instanceof h)){return t}let e;if(t.filter.dataSource.filterCondition){if(t.filter.rootCondition.conditions.length>0){e=this.sina.createComplexCondition({operator:u.And,conditions:[t.filter.dataSource.filterCondition,t.filter.rootCondition]})}else{e=t.filter.dataSource.filterCondition}}else{e=t.filter.rootCondition}const r=this.sina.createFilter({dataSource:t.filter.dataSource.dataSource,searchTerm:t.filter.searchTerm,rootCondition:e});const i=t.clone();i.filter=r;return i}_formatResultSetAsync(t){return Promise.resolve()}_setResultSet(t){this._lastQuery=this._createReadOnlyClone();this._resultSetPromise=Promise.resolve().then(function(){return this._formatResultSetAsync(t)}.bind(this)).then(function(){return t});return this._resultSetPromise}_createReadOnlyClone(){const t=this.clone();t.getResultSetAsync=function(){throw new c};return t}resetResultSet(){this._lastQuery=null;this._resultSetPromise=null}getSearchTerm(){return this.filter.searchTerm}getDataSource(){return this.filter.dataSource}getRootCondition(){return this.filter.rootCondition}setSearchTerm(t){this.filter.setSearchTerm(t)}setDataSource(t){this.filter.setDataSource(t)}setRootCondition(t){this.filter.setRootCondition(t)}resetConditions(){this.filter.resetConditions()}autoInsertCondition(t){this.filter.autoInsertCondition(t)}autoRemoveCondition(t){this.filter.autoRemoveCondition(t)}setFilter(t){if(!this.filter.equals(t)){this.setSkip(0)}this.filter=t}}var d={__esModule:true};d.Query=f;return d});
//# sourceMappingURL=Query.js.map