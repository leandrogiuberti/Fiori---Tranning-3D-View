/*!
 * SAPUI5
 * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.
 * 
 */
sap.ui.define(["./SinaObject","./SimpleCondition","./ComplexCondition","../core/errors","./HierarchyDisplayType","./DataSourceType","./i18n"],function(t,i,e,o,r,n,s){"use strict";const a=t["SinaObject"];const c=i["SimpleCondition"];const h=e["ComplexCondition"];const d=o["InternalSinaError"];const u=r["HierarchyDisplayType"];const l=n["DataSourceSubType"];const f=s["getText"];class S extends a{dataSource;searchTerm="";rootCondition;constructor(t){super(t);this.dataSource=t.dataSource??this.sina.getAllDataSource();this.searchTerm=t.searchTerm??this.searchTerm;this.rootCondition=t.rootCondition??new h({sina:this.sina})}setSearchTerm(t){this.searchTerm=t}setRootCondition(t){this.rootCondition=t;if(this.sina&&!this.rootCondition.sina){this.rootCondition.setSina(this.sina)}}clone(){return new S({sina:this.sina,dataSource:this.dataSource,searchTerm:this.searchTerm,rootCondition:this.rootCondition.clone()})}equals(t){return t instanceof S&&this.dataSource===t.dataSource&&this.searchTerm===t.searchTerm&&this.rootCondition.equals(t.rootCondition)}_getAttribute(t){if(t instanceof c){return t.attribute}for(let i=0;i<t.conditions.length;++i){const e=this._getAttribute(t.conditions[i]);if(e){return e}}}setDataSource(t){if(this.dataSource===t){return}this.dataSource=t;this.resetConditions()}resetConditions(){if(this.rootCondition instanceof h){this.rootCondition.resetConditions()}else{throw new Error("Method is not applicable for SimpleCondition")}}autoInsertCondition(t){if(this.rootCondition instanceof h){this.rootCondition.autoInsertCondition(t)}else{throw new Error("Method is not applicable for SimpleCondition")}}autoRemoveCondition(t){if(this.rootCondition instanceof h){this.rootCondition.autoRemoveCondition(t)}else{throw new Error("Method is not applicable for SimpleCondition")}}isFolderMode(){if(!this.sina.configuration?.folderMode){return false}const t=this.dataSource.attributesMetadata.filter(t=>t.isHierarchy&&t.hierarchyDisplayType===u.StaticHierarchyFacet);const i=t.length>0;const e=this.dataSource.isHierarchyDataSource&&this.dataSource.hierarchyDisplayType===u.HierarchyResultView;if(!i&&!e){return false}if(this.dataSource.subType===l.Filtered){return false}const o=this.getFolderAttribute();const r=this.rootCondition.getAttributes();const n=r.filter(t=>t===o);const s=r.filter(t=>t!=o);if(!this.sina.configuration.folderModeForInitialSearch){if(n.length===0){return false}}if((this.searchTerm.length===0||this.searchTerm.trim()==="*")&&s.length===0){return true}else{return false}}getFolderAttribute(){if(this.dataSource.isHierarchyDataSource&&this.dataSource.hierarchyDisplayType===u.HierarchyResultView){return this.dataSource.hierarchyAttribute}const t=this.dataSource.attributesMetadata.filter(t=>t.isHierarchy&&t.hierarchyDisplayType===u.StaticHierarchyFacet);if(t.length===0){throw new d({message:f("error.sina.hierarchyAttributesMissing")})}return t[0].id}toJson(){return{dataSource:this.dataSource.toJson(),searchTerm:this.searchTerm,rootCondition:this.rootCondition.toJson()}}}var C={__esModule:true};C.Filter=S;return C});
//# sourceMappingURL=Filter.js.map