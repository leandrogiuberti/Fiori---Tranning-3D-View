{"version":3,"file":"SearchResultSet-dbg.js","names":["sap","ui","define","___ResultSet","___AttributeType","ResultSet","AttributeType","SearchResultSet","facets","totalCount","nlqResult","hierarchyNodePaths","constructor","properties","toString","args","result","push","prototype","apply","i","length","facet","join","toCSV","console","log","items","csvTitle","attribute","attributes","concat","id","slice","csvBody","item","metadata","type","Double","Integer","value","valueFormatted","__exports","__esModule"],"sources":["SearchResultSet.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport { ResultSet, ResultSetOptions } from \"./ResultSet\";\nimport { SearchResultSetItem } from \"./SearchResultSetItem\";\nimport { FacetResultSet } from \"./FacetResultSet\";\nimport { HierarchyNodePath } from \"./HierarchyNodePath\";\nimport { NlqResult } from \"./NlqResult\";\nimport { AttributeType } from \"./AttributeType\";\n\nexport interface SearchResultSetOptions extends ResultSetOptions {\n    facets?: Array<FacetResultSet>;\n    totalCount: number;\n    hierarchyNodePaths?: Array<HierarchyNodePath>;\n    nlqResult?: NlqResult;\n}\nexport class SearchResultSet extends ResultSet {\n    // _meta: {\n    //     properties: {\n    //         facets: {\n    //             required: false,\n    //             default: function () {\n    //                 return [];\n    //             }\n    //         },\n    //         totalCount: {\n    //             required: true\n    //         },\n    //     }\n    // },\n    facets: Array<FacetResultSet> = [];\n    totalCount: number;\n    nlqResult?: NlqResult;\n    declare items: Array<SearchResultSetItem>;\n    hierarchyNodePaths: Array<HierarchyNodePath> = [];\n\n    constructor(properties: SearchResultSetOptions) {\n        super(properties);\n        this.facets = properties.facets ?? this.facets;\n        this.totalCount = properties.totalCount ?? this.totalCount;\n        this.hierarchyNodePaths = properties.hierarchyNodePaths ?? this.hierarchyNodePaths;\n        this.nlqResult = properties.nlqResult;\n    }\n\n    toString(...args: Array<string>): string {\n        const result = [];\n        result.push(ResultSet.prototype.toString.apply(this, args));\n        for (let i = 0; i < this.facets.length; ++i) {\n            if (i === 0) {\n                result.push(\"## Facets\");\n            }\n            const facet = this.facets[i];\n            result.push(facet.toString());\n        }\n        return result.join(\"\\n\");\n    }\n\n    // sina search result -> sample2/data/...csv in string\n    toCSV(): string {\n        console.log(\"===== Parse Result to CSV String: =====\\n\");\n        if (this.items.length === 0) {\n            console.log(\"\");\n            return \"\";\n        }\n\n        let csvTitle = \"\";\n        for (const attribute of this.items[0].attributes) {\n            csvTitle = csvTitle.concat('\"' + attribute.id + '\",');\n        }\n        csvTitle = csvTitle.slice(0, -1).concat(\"\\n\"); // remove last comma, add new line\n\n        let csvBody = \"\";\n        for (const item of this.items) {\n            for (const attribute of item.attributes) {\n                if (\n                    attribute.metadata?.type === AttributeType.Double ||\n                    attribute.metadata?.type === AttributeType.Integer\n                ) {\n                    csvBody = csvBody.concat('\"' + attribute.value?.toString() + '\",');\n                } else {\n                    csvBody = csvBody.concat('\"' + attribute.valueFormatted + '\",');\n                }\n            }\n            csvBody = csvBody.slice(0, -1).concat(\"\\n\"); // remove last comma, add new line\n        }\n        csvBody = csvBody.slice(0, -1); // remove last new line\n\n        console.log(csvTitle.concat(csvBody));\n        return csvTitle.concat(csvBody);\n    }\n}\n"],"mappings":"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","ignoreList":[]}