/*!
 * SAPUI5
 * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.
 * 
 */
sap.ui.define(["../core/Log","../core/errors","../core/util","../providers/abap_odata/Provider","../providers/dummy/Provider","../providers/hana_odata/Provider","../providers/inav2/Provider","../providers/multi/Provider","../providers/sample/Provider","../providers/sample2/Provider","./Sina","./SinaConfiguration","./i18n"],function(e,r,n,o,i,t,s,c,a,u,d,l,v){"use strict";function f(e){return new Promise(function(r,n){sap.ui.require([e],function(n){if(!(n&&n.__esModule)){n=n===null||!(typeof n==="object"&&e.endsWith("/library"))?{default:n}:n;Object.defineProperty(n,"__esModule",{value:true})}r(n)},function(e){n(e)})})}const p=r["NoValidEnterpriseSearchAPIConfigurationFoundError"];const P=o["Provider"];const g=i["Provider"];const A=t["Provider"];const w=s["Provider"];const h=c["MultiProvider"];const M=a["Provider"];const b=u["Provider"];const T=d["Sina"];const k=l["AvailableProviders"];const y=l["_normalizeConfiguration"];const E=v["injectGetText"];if(typeof process!=="undefined"&&process.env&&process.env.NODE_ENV&&process.env.NODE_ENV==="debug"){const r=new e.Log;e.Log.level=e.Severity.DEBUG;r.debug("SINA log level set to debug!")}async function S(r){const n=await y(r);if(n.getText){E(n.getText)}if(n.logTarget){e.Log.persistency=n.logTarget}if(typeof n.logLevel!=="undefined"){e.Log.level=n.logLevel}const o=new e.Log("sinaFactory");o.debug("Creating new sina (esh client) instance using provider "+n.provider);let i;switch(n.provider){case k.HANA_ODATA:{i=new A;break}case k.ABAP_ODATA:{i=new P;break}case k.INAV2:{i=new w;break}case k.MULTI:{i=new h;break}case k.SAMPLE:{i=new M;break}case k.SAMPLE2:{i=new b;break}case k.MOCK_NLQRESULTS:{const e=await f("/sap/esh/search/ui/sinaNexTS/providers/mock/MockNlqResultsProvider");i=new e.MockNlqResultsProvider;break}case k.MOCK_SUGGESTIONTYPES:{const e=await f("/sap/esh/search/ui/sinaNexTS/providers/mock/MockSuggestionTypesProvider");i=new e.MockSuggestionTypesProvider;break}case k.MOCK_DELETEANDREORDER:{const e=await f("/sap/esh/search/ui/sinaNexTS/providers/mock/MockDeleteAndReorderProvider");i=new e.MockDeleteAndReorderProvider;break}case k.DUMMY:{i=new g;break}default:{throw new Error("Unknown Provider: '"+n.provider+"' - Available Providers: "+k.HANA_ODATA+", "+k.ABAP_ODATA+", "+k.INAV2+", "+k.MULTI+", "+k.SAMPLE+", "+k.SAMPLE2+", "+k.DUMMY)}}const t=new T(i);await t.initAsync(n);return t}function L(e,r){let n;return Promise.all(e.map(y.bind(this))).then(function(e){n=e;return m(n)}.bind(this)).then(function(){return _(n,r)}.bind(this))}async function N(){const e=n.getUrlParameter("sinaConfiguration");if(e){return y(e)}const r=n.getUrlParameter("sinaProvider");if(r){return y(r)}return Promise.resolve()}async function _(r,n){const o=new e.Log("sinaFactory");const i=[];n=n||function(){return true};const t=[];const s=function(e){if(e>=r.length){let e;if(i.length>=1){e=new p(t.join(", "),i[i.length-1].error)}else{e=new p(t.join(", "))}return Promise.reject(e)}const c=r[e];t.push(c.provider);return S(c).then(function(r){if(n(r)){return r}return s(e+1)},function(r){o.info(r);i.push({index:e,error:r});return s(e+1)})}.bind(this);return s(0)}async function m(e){const r=await N();if(!r){return}if(e.length===1){D(e[0],r);return}else{let n=false;for(let o=0;o<e.length;++o){const i=e[o];if(i.provider===k.DUMMY){continue}if(i.provider!==r.provider){e.splice(o,1);o--;continue}n=true;D(i,r)}if(!n){e.splice(0,0,r)}}}function D(e,r){for(const n in r){e[n]=r[n]}}var O={__esModule:true};O.createAsync=S;O.createByTrialAsync=L;return O});
//# sourceMappingURL=sinaFactory.js.map