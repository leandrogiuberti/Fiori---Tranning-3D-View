/*!
 * SAPUI5
 * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.
 * 
 */
sap.ui.define(["../SearchQuery","./Formatter","../util","../FilteredDataSource"],function(t,e,a,r){"use strict";const i=t["SearchQuery"];const c=e["Formatter"];const s=r["FilteredDataSource"];class u extends c{initAsync(){return Promise.resolve()}format(t){return t}async formatAsync(t){if(!t.sina.configuration.FF_hierarchyBreadcrumbs){return t}if(!(t.query instanceof i)){return t}const e=t.query.filter.dataSource;const a=e.getHierarchyDataSource();if(!a){return t}const r=e.getStaticHierarchyAttributeMetadata();if(!r){return t}t.items.forEach(t=>{this.processResultSetItem({resultSetItem:t,dataSource:e,hierarchyDataSource:a,staticHierarchyAttributeMetadata:r})});return t}getHierarchyNodePath(t,e){if(!t){return}for(const a of t){if(a.name===e){return a}}}processResultSetItem(t){this.assembleTitleNavigationTarget(t);this.assembleHierarchyAttributeNavigationTarget(t)}assembleTitleNavigationTarget(t){const e=this.getHierarchyNodePath(t.resultSetItem.hierarchyNodePaths,t.staticHierarchyAttributeMetadata.id);if(!e||!e.path||e.path.length<1){return}const r=e.path[e.path.length-1];const i=t.resultSetItem.attributesMap[t.staticHierarchyAttributeMetadata.id];const c=a.assembleTitle(t.resultSetItem);t.resultSetItem.setDefaultNavigationTarget(t.resultSetItem.sina.createStaticHierarchySearchNavigationTarget(r.id,c||i?.value||"",this.exchangeDataSourceForFilteredDataSource(t.dataSource),"",t.staticHierarchyAttributeMetadata.id))}assembleHierarchyAttributeNavigationTarget(t){const e=t.resultSetItem.attributesMap[t.staticHierarchyAttributeMetadata.id];if(!e){return}const a=this.constructHierarchyAttributeNavigationTargetLabel(t);e.setDefaultNavigationTarget(t.resultSetItem.sina.createStaticHierarchySearchNavigationTarget(e.value,a,this.exchangeDataSourceForFilteredDataSource(t.dataSource),a,t.staticHierarchyAttributeMetadata.id));e.tooltip=this._constructTooltip(t)}exchangeDataSourceForFilteredDataSource(t){if(t.sina.configuration?.searchInAreaOverwriteMode===true&&t instanceof s){t=t.dataSource}return t}_constructTooltip(t){const e=this.getHierarchyNodePath(t.resultSetItem.hierarchyNodePaths,t.staticHierarchyAttributeMetadata.id);if(!e||!e.path||e.path.length<1){return""}const a=e.path;const r=a[a.length-1];if(r.id!==t.resultSetItem.attributesMap[t.staticHierarchyAttributeMetadata.id].value){a.splice(a.length-1,1)}return a.map(t=>t.label).join(" / ")}constructHierarchyAttributeNavigationTargetLabel(t){const e=this.getHierarchyNodePath(t.resultSetItem.hierarchyNodePaths,t.staticHierarchyAttributeMetadata.id);const a=t.resultSetItem.attributesMap[t.staticHierarchyAttributeMetadata.id];if(!e||!e.path||e.path.length<1||!a){return""}const r=e.path;let i=r[r.length-1];if(i.id!==t.resultSetItem.attributesMap[t.staticHierarchyAttributeMetadata.id].value&&r.length>1){i=r[r.length-2]}return i.label||a.label||""}}var o={__esModule:true};o.HierarchyResultSetFormatter=u;return o});
//# sourceMappingURL=HierarchyResultSetFormatter.js.map