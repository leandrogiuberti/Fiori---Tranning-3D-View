{"version":3,"file":"SinaConfiguration.js","names":["sap","ui","define","__ui5_require_async","path","Promise","resolve","reject","require","module","__esModule","endsWith","default","Object","defineProperty","value","err","async","_normalizeConfiguration","configuration","trim","indexOf","JSON","parse","AvailableProviders","__exports"],"sources":["SinaConfiguration.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport { Sina } from \"./Sina\";\nimport * as sinaLog from \"../core/Log\";\nimport { ChartResultSetFormatter, Formatter } from \"./formatters/Formatter\";\nimport { AjaxClient as Client } from \"../core/AjaxClient\";\nimport { FederationType } from \"../providers/multi/FederationType\";\nimport { FacetMode } from \"../providers/multi/FacetMode\";\nimport { ComplexCondition } from \"./ComplexCondition\";\nimport { NavigationTracker } from \"./NavigationTarget\";\nimport { DataSourceConfiguration } from \"./DataSourceConfiguration\";\nimport type UI5NumberFormat from \"sap/ui/core/format/NumberFormat\";\nimport type UI5DateFormat from \"sap/ui/core/format/DateFormat\";\nimport { RequestFormatter, ResponseFormatter } from \"../core/ajax\";\n\nexport interface SinaConfiguration {\n    getTextFromResourceBundle?: (url: string, text: string) => Promise<string>; // needed for hana odata annotation \"ENTERPRISESEARCHHANA.UIRESOURCE.LABEL.KEY\"\n    getText?: (key: string, args?: Array<string>) => string;\n    contentProviderId?: string; // only ABAPOData\n    federationType?: FederationType;\n    facetMode?: FacetMode;\n    FF_hierarchyBreadcrumbs?: boolean;\n    url: string;\n    // type: string;\n    provider: AvailableProviders;\n    getLanguage?: () => string;\n    // single language code, used for http requests, header: 'Accept-Language'\n    //    - example: 'en-US'.\n    //      Passing passing multiple language codes or weights (property 'q') will result in undetermined behavior\n    //       -> see https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language\n    label?: string;\n    subProviders?: Array<SinaConfiguration>;\n    sina?: Sina;\n    initAsync?: (sina: Sina) => Promise<void>;\n    searchResultSetFormatters?: Formatter[];\n    suggestionResultSetFormatters?: Formatter[];\n    chartResultSetFormatters?: ChartResultSetFormatter[];\n    metadataFormatters?: Formatter[];\n    logTarget?: {\n        error(messageOrError: string | Error): void;\n        warn(message: string): void;\n        info(message: string): void;\n        debug(message: string): void;\n    };\n    logLevel?: sinaLog.Severity;\n    NumberFormat?: typeof UI5NumberFormat;\n    DateFormat?: typeof UI5DateFormat;\n    ajaxClient?: Client;\n    ajaxRequestFormatters?: Array<RequestFormatter>;\n    ajaxResponseFormatters?: Array<ResponseFormatter>;\n    metaDataSuffix?: string; // ToDo? -> HANA oData only\n    querySuffix?: ComplexCondition; // ToDo: Remove as soon as all stakeholders have switched to 'dataSourceConfigurations'\n    dataSourceConfigurations?: Array<DataSourceConfiguration>;\n    odataVersion?: string; // ToDo? -> HANA oData only\n    folderMode?: boolean;\n    folderModeForInitialSearch?: boolean;\n    enableQueryLanguage?: boolean;\n    // A search query parameter only for hana_oData provider to provide breadcrumbs path for each result item. It's not a hana feature but a service feature and only works with datasources with a static hierarchy.\n    // This parameter has performance impact. Hence its default value is set as false/undefined.\n    useValueHierarchy?: boolean;\n    // The same semantic and value (by mixinSearchConfigurationIntoSinaConfiguration in SearchModel) like the parameter of the same name in search configuration.\n    // E.g. the preparation of targetNavigation in Sina layer needs it\n    updateUrl?: boolean;\n    pageSize?: number;\n    searchInAreaOverwriteMode?: boolean;\n    navigationTrackers?: NavigationTracker[];\n    limitAjaxRequests?: boolean; // prevents too many ajax requests in a short time\n}\n\nexport async function _normalizeConfiguration(\n    configuration: SinaConfiguration | string\n): Promise<SinaConfiguration> {\n    // check whether configuration is a string with a javascript module name\n    if (typeof configuration === \"string\") {\n        configuration = configuration.trim();\n\n        // configuration is a string with a url -> load configuration dynamically via require\n        if (\n            configuration.indexOf(\"/\") >= 0 &&\n            configuration.indexOf(\"Provider\") < 0 &&\n            configuration[0] !== \"{\"\n        ) {\n            configuration = await import(configuration);\n            return await _normalizeConfiguration(configuration);\n        }\n\n        // configuration is a string with the provider name -> assemble json\n        if (configuration[0] !== \"{\") {\n            configuration = '{ \"provider\" : \"' + configuration + '\"}';\n        }\n\n        // parse json\n        configuration = JSON.parse(configuration) as SinaConfiguration;\n    }\n\n    return configuration;\n}\n\nexport enum AvailableProviders {\n    ABAP_ODATA = \"abap_odata\",\n    HANA_ODATA = \"hana_odata\",\n    INAV2 = \"inav2\",\n    MULTI = \"multi\",\n    SAMPLE = \"sample\",\n    SAMPLE2 = \"sample2\",\n    MOCK_SUGGESTIONTYPES = \"mock_suggestiontypes\",\n    MOCK_NLQRESULTS = \"mock_nlqresults\",\n    MOCK_DELETEANDREORDER = \"mock_deleteandreorder\",\n    DUMMY = \"dummy\",\n}\n"],"mappings":";;;;;AAAAA,IAAAC,GAAAC,OAAA,oCAAAC,EAAAC,GAAA,WAAAC,QAAA,SAAAC,EAAAC,GAAAP,IAAAC,GAAAO,QAAA,CAAAJ,GAAA,SAAAK,GAAA,KAAAA,KAAAC,YAAA,CAAAD,MAAA,eAAAA,IAAA,UAAAL,EAAAO,SAAA,cAAAC,QAAAH,KAAAI,OAAAC,eAAAL,EAAA,cAAAM,MAAA,OAAAT,EAAAG,EAAA,WAAAO,GAAAT,EAAAS,EAAA,KAwEOC,eAAeC,EAClBC,GAGA,UAAWA,IAAkB,SAAU,CACnCA,EAAgBA,EAAcC,OAG9B,GACID,EAAcE,QAAQ,MAAQ,GAC9BF,EAAcE,QAAQ,YAAc,GACpCF,EAAc,KAAO,IACvB,CACEA,QAAsBhB,EAAOgB,GAC7B,aAAaD,EAAwBC,EACzC,CAGA,GAAIA,EAAc,KAAO,IAAK,CAC1BA,EAAgB,mBAAqBA,EAAgB,IACzD,CAGAA,EAAgBG,KAAKC,MAAMJ,EAC/B,CAEA,OAAOA,CACX,CAAC,IAEWK,EAAkB,SAAlBA,KAAkB,2BAAlBA,EAAkB,2BAAlBA,EAAkB,iBAAlBA,EAAkB,iBAAlBA,EAAkB,mBAAlBA,EAAkB,qBAAlBA,EAAkB,+CAAlBA,EAAkB,qCAAlBA,EAAkB,iDAAlBA,EAAkB,wBAAlBA,CAAkB,EAAlBA,GAAkB,QAAAC,EAAA,CAAAf,WAAA,MAAAe,EAAAP,0BAAAO,EAAAD,qBAAA,OAAAC,CAAA","ignoreList":[]}