{"version":3,"file":"util.js","names":["sap","ui","define","___sina_AttributeSemanticsType","___sina_SearchResultSetItemAttribute","___sina_SearchResultSetItemAttributeGroup","___sina_i18n","___errors","AttributeSemanticsType","SearchResultSetItemAttribute","SearchResultSetItemAttributeGroup","getText","NoJSONDateError","TimeOutError","hasOwnProperty","obj","prop","Object","prototype","apply","timeoutDecorator","originalFunction","timeout","decoratedFunction","args","that","this","Promise","resolve","reject","outTimed","timer","setTimeout","then","response","clearTimeout","error","refuseOutdatedResponsesDecorator","maxRequestId","requestId","abort","getUrlParameter","name","url","window","location","href","escapeRegExp","regex","RegExp","results","exec","decodeURIComponent","replace","filterString","text","removeStrings","i","length","removeString","index","indexOf","slice","generateTimestamp","pad","num","size","s","substr","d","Date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","DelayedConsumer","timeDelay","consumer","consumerContext","objects","constructor","properties","add","push","consume","bind","dateToJson","date","type","value","toJSON","dateFromJson","jsonDate","addPotentialNavTargets","resultSet","items","item","addGeoDataIfAvailable","attributes","detailAttributes","j","attribute","addPotentialNavTargetsToAttribute","addPotentialNavTargetsToAttributeSimple","addPotentialNavTargetsToAttributeGroup","attributeMembership","metadata","sina","semantics","HTTPURL","setDefaultNavigationTarget","createNavigationTarget","targetUrl","target","emails","match","EmailAddress","PhoneNr","removePureAdvancedSearchFacets","dataSource","getDataSource","query","filter","id","facets","attributeId","dimension","attributeMetaData","attributeMetadataMap","usage","AdvancedSearch","Facet","undefined","splice","isMapsAttribute","returnOnlyBool","res","lat","lon","latIndex","lonIndex","latAttribName","lonAttribName","val","isNaN","oLoc4326","JSON","parse","aCoordinates","coordinates","itemData","newMetadata","label","isCurrency","IsBoolean","IsKey","IsSortable","isUnitOfMeasure","semanticObjectType","Map","valStr","newAttribute","isHighlighted","valueFormatted","valueHighlighted","LOC_4326","attributesMetadata","cacheDecorator","map","call","str","evaluateTemplate","template","placeholderRegExp","getProperty","replaceProperty","property","propertyRegExp","execute","extractRegExp","extractHighlightedTerms","result","appendRemovingDuplicates","list1","list2","element","reservedCharacters","reservedWords","reservedCharacters4FilterCondition","replaceAll","original","search","replacement","split","join","escapeQuery","escapedQuery","trim","specialCharacter","specialWord","startsWith","substring","endsWith","escapeFilterCondition","__exports","__esModule"],"sources":["util.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\n/* eslint-disable no-useless-escape */\n\nimport { AttributeSemanticsType } from \"../sina/AttributeSemanticsType\";\nimport { ChartQuery } from \"../sina/ChartQuery\";\nimport { SearchResultSet } from \"../sina/SearchResultSet\";\nimport { SearchResultSetItemAttribute } from \"../sina/SearchResultSetItemAttribute\";\nimport { SearchResultSetItemAttributeBase } from \"../sina/SearchResultSetItemAttributeBase\";\nimport { SearchResultSetItemAttributeGroup } from \"../sina/SearchResultSetItemAttributeGroup\";\nimport { getText } from \"../sina/i18n\";\nimport { NoJSONDateError, TimeOutError } from \"./errors\";\n\nexport function hasOwnProperty<X extends object, Y extends PropertyKey>(\n    obj: X,\n    prop: Y\n): obj is X & Record<Y, unknown> {\n    return Object.prototype.hasOwnProperty.apply(obj, prop);\n}\n\nexport function timeoutDecorator(originalFunction, timeout: number) {\n    const decoratedFunction = function (...args) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const that = this;\n        return new Promise(function (resolve, reject) {\n            let outTimed = false;\n            const timer = setTimeout(function () {\n                outTimed = true;\n                reject(new TimeOutError());\n            }, timeout);\n\n            return originalFunction.apply(that, args).then(\n                function (response) {\n                    // success\n                    if (outTimed) {\n                        return;\n                    }\n                    clearTimeout(timer);\n                    resolve(response);\n                },\n                function (error) {\n                    // error\n                    if (outTimed) {\n                        return;\n                    }\n                    clearTimeout(timer);\n                    reject(error);\n                }\n            );\n        });\n    };\n    return decoratedFunction;\n}\n\nexport function refuseOutdatedResponsesDecorator(originalFunction) {\n    let maxRequestId = 0;\n    const decoratedFunction = function (...args) {\n        const requestId = ++maxRequestId;\n        return originalFunction.apply(this, args).then(\n            function (response) {\n                // success\n                return new Promise(function (resolve) {\n                    if (requestId !== maxRequestId) {\n                        return; // --> ignore\n                    }\n                    resolve(response); // --> forward\n                });\n            },\n            function (error) {\n                // error\n                return new Promise(function (resolve, reject) {\n                    if (requestId !== maxRequestId) {\n                        return; // --> ignore\n                    }\n                    reject(error); // --> forward\n                });\n            }\n        );\n    };\n    decoratedFunction.abort = function () {\n        ++maxRequestId;\n    };\n    return decoratedFunction;\n}\n\nexport function getUrlParameter(name: string, url?: string): null | string {\n    if (!url) {\n        if (typeof window === \"undefined\") {\n            return null;\n        }\n        url = window.location.href;\n    }\n    name = escapeRegExp(name);\n    const regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n        results = regex.exec(url);\n    if (!results) {\n        return null;\n    }\n    if (!results[2]) {\n        return \"\";\n    }\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n}\n\nexport function filterString(text: string, removeStrings: Array<string>): string {\n    for (let i = 0; i < removeStrings.length; ++i) {\n        const removeString = removeStrings[i];\n        let index = 0;\n        while (index >= 0) {\n            index = text.indexOf(removeString);\n            if (index >= 0) {\n                text = text.slice(0, index) + text.slice(index + removeString.length);\n            }\n        }\n    }\n    return text;\n}\n\nexport function generateTimestamp(): string {\n    const pad = function (num, size) {\n        const s = \"000000000\" + num;\n        return s.substr(s.length - size);\n    };\n    const d = new Date();\n    return (\n        \"\" +\n        d.getUTCFullYear() +\n        pad(d.getUTCMonth() + 1, 2) +\n        pad(d.getUTCDate(), 2) +\n        pad(d.getUTCHours(), 2) +\n        pad(d.getUTCMinutes(), 2) +\n        pad(d.getUTCSeconds(), 2) +\n        pad(d.getUTCMilliseconds(), 3)\n    );\n}\n\nexport class DelayedConsumer {\n    timeDelay: number;\n    consumer: () => void;\n    consumerContext: unknown;\n    objects: Array<unknown>;\n\n    constructor(properties) {\n        properties = properties || {};\n        this.timeDelay = properties.timeDelay || 1000;\n\n        this.consumer = properties.consumer || function () {};\n        this.consumerContext = properties.consumerContext || null;\n        this.objects = [];\n    }\n\n    add(obj): void {\n        this.objects.push(obj);\n        if (this.objects.length === 1) {\n            setTimeout(this.consume.bind(this), this.timeDelay);\n        }\n    }\n\n    consume(): void {\n        this.consumer.apply(this.consumerContext, [this.objects]);\n        this.objects = [];\n    }\n}\n\nexport function dateToJson(date: Date): {\n    type: string;\n    value: string;\n} {\n    return {\n        type: \"Timestamp\",\n        value: date.toJSON(),\n    };\n}\n\nexport function dateFromJson(jsonDate): Date {\n    if (jsonDate.type !== \"Timestamp\") {\n        throw new NoJSONDateError(getText(\"error.sina.noTimestampJsonDateError\", [jsonDate]));\n    }\n    return new Date(jsonDate.value);\n}\n\nexport function addPotentialNavTargets(resultSet: SearchResultSet): SearchResultSet {\n    if (resultSet.items) {\n        //not avilable with sample provider\n        const items = resultSet.items;\n        for (let i = 0; i < items.length; i++) {\n            let item = items[i];\n            // process geo data\n            item = addGeoDataIfAvailable(item);\n            // process attributes\n            const attributes = item.detailAttributes;\n            for (let j = 0; j < attributes.length; j++) {\n                const attribute = attributes[j];\n                addPotentialNavTargetsToAttribute(attribute);\n            }\n        }\n    }\n    return resultSet;\n}\n\nfunction addPotentialNavTargetsToAttribute(attribute: SearchResultSetItemAttributeBase) {\n    if (attribute instanceof SearchResultSetItemAttribute) {\n        addPotentialNavTargetsToAttributeSimple(attribute);\n    } else if (attribute instanceof SearchResultSetItemAttributeGroup) {\n        addPotentialNavTargetsToAttributeGroup(attribute);\n    }\n}\n\nfunction addPotentialNavTargetsToAttributeGroup(attribute: SearchResultSetItemAttributeGroup) {\n    // simplified not recursive algorithm:\n    // - groups are expanded only one level\n    // - for group children attributes we just add navtargets for @semantics.url annotation\n    for (const attributeMembership of attribute.attributes) {\n        const attribute = attributeMembership.attribute;\n        if (!(attribute instanceof SearchResultSetItemAttribute)) {\n            continue;\n        }\n        const metadata = attribute.metadata;\n        const sina = attribute.sina;\n        const value = attribute.value;\n        if (metadata.semantics == AttributeSemanticsType.HTTPURL) {\n            attribute.setDefaultNavigationTarget(\n                sina.createNavigationTarget({\n                    text: value,\n                    targetUrl: value,\n                    target: \"_blank\",\n                })\n            );\n        }\n    }\n}\n\nfunction addPotentialNavTargetsToAttributeSimple(attribute: SearchResultSetItemAttribute) {\n    const sina = attribute.sina;\n    const value = attribute.value;\n    const metadata = attribute.metadata;\n    if (typeof value === \"string\" && attribute.metadata.type !== \"ImageUrl\") {\n        const emails = value.match(\n            /^[^\\0-\\x20,:;<>@\\[\\\\\\]^_`]+@[^\\0-,.-@\\[\\\\\\]^_`\\{\\|\\}~]+\\.[^\\0-,.-@\\[\\\\\\]^_`\\{\\|\\}~]+$/g\n        );\n        const url = value.match(/^https?:\\/\\/(?=[^\\/])\\S+$/gi);\n        if (metadata.semantics == AttributeSemanticsType.EmailAddress) {\n            attribute.setDefaultNavigationTarget(\n                sina.createNavigationTarget({\n                    text: value,\n                    targetUrl: \"mailto:\" + value,\n                })\n            );\n        } else if (metadata.semantics == AttributeSemanticsType.PhoneNr) {\n            attribute.setDefaultNavigationTarget(\n                sina.createNavigationTarget({\n                    text: value,\n                    targetUrl: \"tel:\" + value,\n                })\n            );\n        } else if (metadata.semantics == AttributeSemanticsType.HTTPURL) {\n            attribute.setDefaultNavigationTarget(\n                sina.createNavigationTarget({\n                    text: value,\n                    targetUrl: value,\n                    target: \"_blank\",\n                })\n            );\n        } else if (emails !== null && emails.length === 1) {\n            attribute.setDefaultNavigationTarget(\n                sina.createNavigationTarget({\n                    text: emails[0],\n                    targetUrl: \"mailto:\" + emails[0],\n                })\n            );\n        } else if (url !== null && url[0].match(/\\w\\w\\w/) !== null) {\n            attribute.setDefaultNavigationTarget(\n                sina.createNavigationTarget({\n                    text: url[0],\n                    targetUrl: url[0],\n                    target: \"_blank\",\n                })\n            );\n        }\n    }\n}\n\nexport function removePureAdvancedSearchFacets(resultSet: SearchResultSet): SearchResultSet {\n    const dataSource = resultSet.sina.getDataSource(resultSet.query.filter.dataSource.id);\n\n    for (let i = 0; i < resultSet.facets.length; i++) {\n        const attributeId = (resultSet.facets[i].query as ChartQuery).dimension;\n        const attributeMetaData = dataSource.attributeMetadataMap[attributeId];\n        if (\n            attributeMetaData &&\n            attributeMetaData.usage.AdvancedSearch &&\n            attributeMetaData.usage.Facet === undefined\n        ) {\n            resultSet.facets.splice(i, 1);\n            i = i - 1;\n        }\n    }\n    return resultSet;\n}\n\nexport function isMapsAttribute(attribute, returnOnlyBool: boolean, i: number): boolean | unknown {\n    let res = false;\n    let lat, lon, latIndex, lonIndex, latAttribName, lonAttribName;\n    const name = attribute.id;\n    const val = attribute.value;\n    if (name.match(/latitude/i) !== null) {\n        if (!isNaN(val)) {\n            latAttribName = name;\n            lat = val;\n            latIndex = i;\n        }\n        res = true;\n    } else if (name.match(/longitude/i) !== null) {\n        if (!isNaN(val)) {\n            lonAttribName = name;\n            lon = val;\n            lonIndex = i;\n        }\n        res = true;\n    } else if (name.match(/LOC_4326/)) {\n        lonIndex = i;\n        latIndex = i;\n        const oLoc4326 = JSON.parse(val);\n        const aCoordinates = oLoc4326.coordinates;\n        if (aCoordinates && aCoordinates.length > 1) {\n            lon = aCoordinates[0];\n            lat = aCoordinates[1];\n        }\n        res = true;\n    }\n\n    if (returnOnlyBool === undefined || returnOnlyBool === true) {\n        return res;\n    }\n    return {\n        lat: lat,\n        lon: lon,\n        latAttribName: latAttribName,\n        lonAttribName: lonAttribName,\n        latIndex: latIndex,\n        lonIndex: lonIndex,\n    };\n}\n\nexport function addGeoDataIfAvailable(itemData) {\n    //augment with new geodata attribute\n    let res, lat, lon, dataSource, latIndex, lonIndex;\n    const attributes = itemData.detailAttributes;\n    for (let i = 0; i < attributes.length; i++) {\n        res = isMapsAttribute(attributes[i], false, i);\n        lat = res.lat ? res.lat : lat;\n        lon = res.lon ? res.lon : lon;\n        latIndex = res.latIndex ? res.latIndex : latIndex;\n        lonIndex = res.lonIndex ? res.lonIndex : lonIndex;\n\n        if (lat && lon) {\n            break;\n        }\n    }\n    if (lat && lon) {\n        //remove lat and long from searchRsultITems\n\n        if (latIndex === lonIndex) {\n            attributes.splice(latIndex, 1);\n        } else if (latIndex > lonIndex) {\n            attributes.splice(latIndex, 1);\n            attributes.splice(lonIndex, 1);\n        } else {\n            attributes.splice(lonIndex, 1);\n            attributes.splice(latIndex, 1);\n        }\n\n        const newMetadata = {\n            sina: itemData.sina,\n            type: \"GeoJson\",\n            id: \"LOC_4326\",\n            label: \"LOC_4326\",\n            isCurrency: false,\n            IsBoolean: false,\n            IsKey: false,\n            IsSortable: true,\n            isUnitOfMeasure: false,\n            semanticObjectType: [],\n            usage: {\n                Map: \"coordinates\",\n            },\n        };\n        //creaate new attribute and check whtether geojson metadata exists\n        const valStr = '{ \"type\": \"Point\", \"coordinates\": [' + lon + \", \" + lat + \", 0] }\";\n        const newAttribute = {\n            id: \"LOC_4326\",\n            label: \"LOC_4326\",\n            isHighlighted: false,\n            value: valStr,\n            valueFormatted: valStr,\n            valueHighlighted: itemData.sina,\n            metadata: newMetadata,\n            sina: itemData.sina,\n        };\n        attributes.push(newAttribute);\n\n        dataSource = itemData.sina.getDataSource(itemData.dataSource.id);\n        if (!dataSource.attributeMetadataMap.LOC_4326) {\n            dataSource.attributesMetadata.push(newMetadata);\n            dataSource.attributeMetadataMap.LOC_4326 = newMetadata;\n        } else {\n            dataSource.attributeMetadataMap.LOC_4326.type = \"GeoJson\";\n            dataSource.attributeMetadataMap.LOC_4326.usage = {\n                Map: \"coordinates\",\n            };\n        }\n    }\n    return itemData;\n}\n\nexport function cacheDecorator(originalFunction) {\n    const map = {};\n    return function (id) {\n        if (Object.prototype.hasOwnProperty.call(map, id)) {\n            return map[id];\n        }\n        const value = originalFunction.apply(this, [id]);\n        map[id] = value;\n        return value;\n    };\n}\n\nexport function escapeRegExp(str: string): string {\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n}\n\nexport function evaluateTemplate(template: string, obj: Record<string, string>): string {\n    const placeholderRegExp = new RegExp(\"{{([^{}]*)}}\");\n    const getProperty = function (template: string): string | null {\n        const match = placeholderRegExp.exec(template);\n        if (!match) {\n            return null;\n        }\n        return match[1];\n    };\n\n    const replaceProperty = function (template: string, property: string, value: string): string {\n        const propertyRegExp = new RegExp(\"{{\" + escapeRegExp(property) + \"}}\", \"g\");\n        template = template.replace(propertyRegExp, value);\n        return template;\n    };\n\n    const execute = function (template: string): string {\n        const property = getProperty(template);\n        if (!property) {\n            return template;\n        }\n        template = replaceProperty(template, property, obj[property]);\n        return execute(template);\n    };\n\n    return execute(template);\n}\n\nexport const extractRegExp = new RegExp(\"<b>(.*?)<\\\\/b>\", \"g\");\n\nexport function extractHighlightedTerms(text: string): Array<string> {\n    let match;\n    const result = [];\n    do {\n        match = extractRegExp.exec(text);\n        if (match) {\n            result.push(match[1]);\n        }\n    } while (match);\n    return result;\n}\n\nexport function appendRemovingDuplicates(list1, list2): void {\n    for (let i = 0; i < list2.length; ++i) {\n        const element = list2[i];\n        if (list1.indexOf(element) < 0) {\n            list1.push(element);\n        }\n    }\n}\n\nconst reservedCharacters: string[] = [\"\\\\\", \"-\", \"(\", \")\", \"~\", \"^\", \"?\", '\"', \":\", \"'\", \"[\", \"]\"];\nconst reservedWords: string[] = [\"AND\", \"OR\", \"NOT\"];\nconst reservedCharacters4FilterCondition: string[] = [\"\\\\\", '\"', \"*\", \"?\", \"'\"];\n\nfunction replaceAll(original: string, search: string, replacement: string): string {\n    return original.split(search).join(replacement);\n}\n\nexport function escapeQuery(query: string): string {\n    let escapedQuery: string = query.trim();\n\n    for (const specialCharacter of reservedCharacters) {\n        if (specialCharacter === \"'\") {\n            escapedQuery = replaceAll(escapedQuery, specialCharacter, \"''\");\n        } else {\n            escapedQuery = replaceAll(escapedQuery, specialCharacter, \"\\\\\" + specialCharacter);\n        }\n    }\n    for (const specialWord of reservedWords) {\n        if (escapedQuery === specialWord) {\n            escapedQuery = '\"' + specialWord + '\"';\n        }\n        if (escapedQuery.startsWith(specialWord + \" \")) {\n            escapedQuery = '\"' + specialWord + '\" ' + escapedQuery.substring(specialWord.length + 1);\n        }\n        if (escapedQuery.endsWith(\" \" + specialWord)) {\n            escapedQuery =\n                escapedQuery.substring(0, escapedQuery.length - (specialWord.length + 1)) +\n                ' \"' +\n                specialWord +\n                '\"';\n        }\n        escapedQuery = replaceAll(escapedQuery, \" \" + specialWord + \" \", ' \"' + specialWord + '\" ');\n    }\n\n    if (escapedQuery === \"\") {\n        escapedQuery = \"*\";\n    }\n    return escapedQuery;\n}\n\nexport function escapeFilterCondition(query: string): string {\n    let escapedQuery: string = query.trim();\n\n    for (const specialCharacter of reservedCharacters4FilterCondition) {\n        if (specialCharacter === \"'\") {\n            escapedQuery = replaceAll(escapedQuery, specialCharacter, \"''\");\n        } else {\n            escapedQuery = replaceAll(escapedQuery, specialCharacter, \"\\\\\" + specialCharacter);\n        }\n    }\n\n    if (escapedQuery === \"\") {\n        escapedQuery = \"*\";\n    }\n    return escapedQuery;\n}\n"],"mappings":"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","ignoreList":[]}