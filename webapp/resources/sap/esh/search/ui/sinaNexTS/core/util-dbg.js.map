{"version":3,"file":"util-dbg.js","names":["sap","ui","define","___sina_AttributeSemanticsType","___sina_SearchResultSetItemAttribute","___sina_SearchResultSetItemAttributeGroup","___sina_i18n","___errors","AttributeSemanticsType","SearchResultSetItemAttribute","SearchResultSetItemAttributeGroup","getText","NoJSONDateError","TimeOutError","hasOwnProperty","obj","prop","Object","prototype","apply","timeoutDecorator","originalFunction","timeout","decoratedFunction","args","that","Promise","resolve","reject","outTimed","timer","setTimeout","then","response","clearTimeout","error","refuseOutdatedResponsesDecorator","maxRequestId","requestId","abort","getUrlParameter","name","url","window","location","href","escapeRegExp","regex","RegExp","results","exec","decodeURIComponent","replace","filterString","text","removeStrings","i","length","removeString","index","indexOf","slice","generateTimestamp","pad","num","size","s","substr","d","Date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","DelayedConsumer","timeDelay","consumer","consumerContext","objects","constructor","properties","add","push","consume","bind","dateToJson","date","type","value","toJSON","dateFromJson","jsonDate","addPotentialNavTargets","resultSet","items","item","addGeoDataIfAvailable","attributes","detailAttributes","j","attribute","addPotentialNavTargetsToAttribute","addPotentialNavTargetsToAttributeSimple","addPotentialNavTargetsToAttributeGroup","attributeMembership","metadata","sina","semantics","HTTPURL","setDefaultNavigationTarget","createNavigationTarget","targetUrl","target","emails","match","EmailAddress","PhoneNr","removePureAdvancedSearchFacets","dataSource","getDataSource","query","filter","id","facets","attributeId","dimension","attributeMetaData","attributeMetadataMap","usage","AdvancedSearch","Facet","undefined","splice","isMapsAttribute","returnOnlyBool","res","lat","lon","latIndex","lonIndex","latAttribName","lonAttribName","val","isNaN","oLoc4326","JSON","parse","aCoordinates","coordinates","itemData","newMetadata","label","isCurrency","IsBoolean","IsKey","IsSortable","isUnitOfMeasure","semanticObjectType","Map","valStr","newAttribute","isHighlighted","valueFormatted","valueHighlighted","LOC_4326","attributesMetadata","cacheDecorator","map","call","str","evaluateTemplate","template","placeholderRegExp","getProperty","replaceProperty","property","propertyRegExp","execute","extractRegExp","extractHighlightedTerms","result","appendRemovingDuplicates","list1","list2","element","reservedCharacters","reservedWords","reservedCharacters4FilterCondition","replaceAll","original","search","replacement","split","join","escapeQuery","escapedQuery","trim","specialCharacter","specialWord","startsWith","substring","endsWith","escapeFilterCondition","__exports","__esModule"],"sources":["util.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\n/* eslint-disable no-useless-escape */\n\nimport { AttributeSemanticsType } from \"../sina/AttributeSemanticsType\";\nimport { ChartQuery } from \"../sina/ChartQuery\";\nimport { SearchResultSet } from \"../sina/SearchResultSet\";\nimport { SearchResultSetItemAttribute } from \"../sina/SearchResultSetItemAttribute\";\nimport { SearchResultSetItemAttributeBase } from \"../sina/SearchResultSetItemAttributeBase\";\nimport { SearchResultSetItemAttributeGroup } from \"../sina/SearchResultSetItemAttributeGroup\";\nimport { getText } from \"../sina/i18n\";\nimport { NoJSONDateError, TimeOutError } from \"./errors\";\n\nexport function hasOwnProperty<X extends object, Y extends PropertyKey>(\n    obj: X,\n    prop: Y\n): obj is X & Record<Y, unknown> {\n    return Object.prototype.hasOwnProperty.apply(obj, prop);\n}\n\nexport function timeoutDecorator(originalFunction, timeout: number) {\n    const decoratedFunction = function (...args) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const that = this;\n        return new Promise(function (resolve, reject) {\n            let outTimed = false;\n            const timer = setTimeout(function () {\n                outTimed = true;\n                reject(new TimeOutError());\n            }, timeout);\n\n            return originalFunction.apply(that, args).then(\n                function (response) {\n                    // success\n                    if (outTimed) {\n                        return;\n                    }\n                    clearTimeout(timer);\n                    resolve(response);\n                },\n                function (error) {\n                    // error\n                    if (outTimed) {\n                        return;\n                    }\n                    clearTimeout(timer);\n                    reject(error);\n                }\n            );\n        });\n    };\n    return decoratedFunction;\n}\n\nexport function refuseOutdatedResponsesDecorator(originalFunction) {\n    let maxRequestId = 0;\n    const decoratedFunction = function (...args) {\n        const requestId = ++maxRequestId;\n        return originalFunction.apply(this, args).then(\n            function (response) {\n                // success\n                return new Promise(function (resolve) {\n                    if (requestId !== maxRequestId) {\n                        return; // --> ignore\n                    }\n                    resolve(response); // --> forward\n                });\n            },\n            function (error) {\n                // error\n                return new Promise(function (resolve, reject) {\n                    if (requestId !== maxRequestId) {\n                        return; // --> ignore\n                    }\n                    reject(error); // --> forward\n                });\n            }\n        );\n    };\n    decoratedFunction.abort = function () {\n        ++maxRequestId;\n    };\n    return decoratedFunction;\n}\n\nexport function getUrlParameter(name: string, url?: string): null | string {\n    if (!url) {\n        if (typeof window === \"undefined\") {\n            return null;\n        }\n        url = window.location.href;\n    }\n    name = escapeRegExp(name);\n    const regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n        results = regex.exec(url);\n    if (!results) {\n        return null;\n    }\n    if (!results[2]) {\n        return \"\";\n    }\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n}\n\nexport function filterString(text: string, removeStrings: Array<string>): string {\n    for (let i = 0; i < removeStrings.length; ++i) {\n        const removeString = removeStrings[i];\n        let index = 0;\n        while (index >= 0) {\n            index = text.indexOf(removeString);\n            if (index >= 0) {\n                text = text.slice(0, index) + text.slice(index + removeString.length);\n            }\n        }\n    }\n    return text;\n}\n\nexport function generateTimestamp(): string {\n    const pad = function (num, size) {\n        const s = \"000000000\" + num;\n        return s.substr(s.length - size);\n    };\n    const d = new Date();\n    return (\n        \"\" +\n        d.getUTCFullYear() +\n        pad(d.getUTCMonth() + 1, 2) +\n        pad(d.getUTCDate(), 2) +\n        pad(d.getUTCHours(), 2) +\n        pad(d.getUTCMinutes(), 2) +\n        pad(d.getUTCSeconds(), 2) +\n        pad(d.getUTCMilliseconds(), 3)\n    );\n}\n\nexport class DelayedConsumer {\n    timeDelay: number;\n    consumer: () => void;\n    consumerContext: unknown;\n    objects: Array<unknown>;\n\n    constructor(properties) {\n        properties = properties || {};\n        this.timeDelay = properties.timeDelay || 1000;\n\n        this.consumer = properties.consumer || function () {};\n        this.consumerContext = properties.consumerContext || null;\n        this.objects = [];\n    }\n\n    add(obj): void {\n        this.objects.push(obj);\n        if (this.objects.length === 1) {\n            setTimeout(this.consume.bind(this), this.timeDelay);\n        }\n    }\n\n    consume(): void {\n        this.consumer.apply(this.consumerContext, [this.objects]);\n        this.objects = [];\n    }\n}\n\nexport function dateToJson(date: Date): {\n    type: string;\n    value: string;\n} {\n    return {\n        type: \"Timestamp\",\n        value: date.toJSON(),\n    };\n}\n\nexport function dateFromJson(jsonDate): Date {\n    if (jsonDate.type !== \"Timestamp\") {\n        throw new NoJSONDateError(getText(\"error.sina.noTimestampJsonDateError\", [jsonDate]));\n    }\n    return new Date(jsonDate.value);\n}\n\nexport function addPotentialNavTargets(resultSet: SearchResultSet): SearchResultSet {\n    if (resultSet.items) {\n        //not avilable with sample provider\n        const items = resultSet.items;\n        for (let i = 0; i < items.length; i++) {\n            let item = items[i];\n            // process geo data\n            item = addGeoDataIfAvailable(item);\n            // process attributes\n            const attributes = item.detailAttributes;\n            for (let j = 0; j < attributes.length; j++) {\n                const attribute = attributes[j];\n                addPotentialNavTargetsToAttribute(attribute);\n            }\n        }\n    }\n    return resultSet;\n}\n\nfunction addPotentialNavTargetsToAttribute(attribute: SearchResultSetItemAttributeBase) {\n    if (attribute instanceof SearchResultSetItemAttribute) {\n        addPotentialNavTargetsToAttributeSimple(attribute);\n    } else if (attribute instanceof SearchResultSetItemAttributeGroup) {\n        addPotentialNavTargetsToAttributeGroup(attribute);\n    }\n}\n\nfunction addPotentialNavTargetsToAttributeGroup(attribute: SearchResultSetItemAttributeGroup) {\n    // simplified not recursive algorithm:\n    // - groups are expanded only one level\n    // - for group children attributes we just add navtargets for @semantics.url annotation\n    for (const attributeMembership of attribute.attributes) {\n        const attribute = attributeMembership.attribute;\n        if (!(attribute instanceof SearchResultSetItemAttribute)) {\n            continue;\n        }\n        const metadata = attribute.metadata;\n        const sina = attribute.sina;\n        const value = attribute.value;\n        if (metadata.semantics == AttributeSemanticsType.HTTPURL) {\n            attribute.setDefaultNavigationTarget(\n                sina.createNavigationTarget({\n                    text: value,\n                    targetUrl: value,\n                    target: \"_blank\",\n                })\n            );\n        }\n    }\n}\n\nfunction addPotentialNavTargetsToAttributeSimple(attribute: SearchResultSetItemAttribute) {\n    const sina = attribute.sina;\n    const value = attribute.value;\n    const metadata = attribute.metadata;\n    if (typeof value === \"string\" && attribute.metadata.type !== \"ImageUrl\") {\n        const emails = value.match(\n            /^[^\\0-\\x20,:;<>@\\[\\\\\\]^_`]+@[^\\0-,.-@\\[\\\\\\]^_`\\{\\|\\}~]+\\.[^\\0-,.-@\\[\\\\\\]^_`\\{\\|\\}~]+$/g\n        );\n        const url = value.match(/^https?:\\/\\/(?=[^\\/])\\S+$/gi);\n        if (metadata.semantics == AttributeSemanticsType.EmailAddress) {\n            attribute.setDefaultNavigationTarget(\n                sina.createNavigationTarget({\n                    text: value,\n                    targetUrl: \"mailto:\" + value,\n                })\n            );\n        } else if (metadata.semantics == AttributeSemanticsType.PhoneNr) {\n            attribute.setDefaultNavigationTarget(\n                sina.createNavigationTarget({\n                    text: value,\n                    targetUrl: \"tel:\" + value,\n                })\n            );\n        } else if (metadata.semantics == AttributeSemanticsType.HTTPURL) {\n            attribute.setDefaultNavigationTarget(\n                sina.createNavigationTarget({\n                    text: value,\n                    targetUrl: value,\n                    target: \"_blank\",\n                })\n            );\n        } else if (emails !== null && emails.length === 1) {\n            attribute.setDefaultNavigationTarget(\n                sina.createNavigationTarget({\n                    text: emails[0],\n                    targetUrl: \"mailto:\" + emails[0],\n                })\n            );\n        } else if (url !== null && url[0].match(/\\w\\w\\w/) !== null) {\n            attribute.setDefaultNavigationTarget(\n                sina.createNavigationTarget({\n                    text: url[0],\n                    targetUrl: url[0],\n                    target: \"_blank\",\n                })\n            );\n        }\n    }\n}\n\nexport function removePureAdvancedSearchFacets(resultSet: SearchResultSet): SearchResultSet {\n    const dataSource = resultSet.sina.getDataSource(resultSet.query.filter.dataSource.id);\n\n    for (let i = 0; i < resultSet.facets.length; i++) {\n        const attributeId = (resultSet.facets[i].query as ChartQuery).dimension;\n        const attributeMetaData = dataSource.attributeMetadataMap[attributeId];\n        if (\n            attributeMetaData &&\n            attributeMetaData.usage.AdvancedSearch &&\n            attributeMetaData.usage.Facet === undefined\n        ) {\n            resultSet.facets.splice(i, 1);\n            i = i - 1;\n        }\n    }\n    return resultSet;\n}\n\nexport function isMapsAttribute(attribute, returnOnlyBool: boolean, i: number): boolean | unknown {\n    let res = false;\n    let lat, lon, latIndex, lonIndex, latAttribName, lonAttribName;\n    const name = attribute.id;\n    const val = attribute.value;\n    if (name.match(/latitude/i) !== null) {\n        if (!isNaN(val)) {\n            latAttribName = name;\n            lat = val;\n            latIndex = i;\n        }\n        res = true;\n    } else if (name.match(/longitude/i) !== null) {\n        if (!isNaN(val)) {\n            lonAttribName = name;\n            lon = val;\n            lonIndex = i;\n        }\n        res = true;\n    } else if (name.match(/LOC_4326/)) {\n        lonIndex = i;\n        latIndex = i;\n        const oLoc4326 = JSON.parse(val);\n        const aCoordinates = oLoc4326.coordinates;\n        if (aCoordinates && aCoordinates.length > 1) {\n            lon = aCoordinates[0];\n            lat = aCoordinates[1];\n        }\n        res = true;\n    }\n\n    if (returnOnlyBool === undefined || returnOnlyBool === true) {\n        return res;\n    }\n    return {\n        lat: lat,\n        lon: lon,\n        latAttribName: latAttribName,\n        lonAttribName: lonAttribName,\n        latIndex: latIndex,\n        lonIndex: lonIndex,\n    };\n}\n\nexport function addGeoDataIfAvailable(itemData) {\n    //augment with new geodata attribute\n    let res, lat, lon, dataSource, latIndex, lonIndex;\n    const attributes = itemData.detailAttributes;\n    for (let i = 0; i < attributes.length; i++) {\n        res = isMapsAttribute(attributes[i], false, i);\n        lat = res.lat ? res.lat : lat;\n        lon = res.lon ? res.lon : lon;\n        latIndex = res.latIndex ? res.latIndex : latIndex;\n        lonIndex = res.lonIndex ? res.lonIndex : lonIndex;\n\n        if (lat && lon) {\n            break;\n        }\n    }\n    if (lat && lon) {\n        //remove lat and long from searchRsultITems\n\n        if (latIndex === lonIndex) {\n            attributes.splice(latIndex, 1);\n        } else if (latIndex > lonIndex) {\n            attributes.splice(latIndex, 1);\n            attributes.splice(lonIndex, 1);\n        } else {\n            attributes.splice(lonIndex, 1);\n            attributes.splice(latIndex, 1);\n        }\n\n        const newMetadata = {\n            sina: itemData.sina,\n            type: \"GeoJson\",\n            id: \"LOC_4326\",\n            label: \"LOC_4326\",\n            isCurrency: false,\n            IsBoolean: false,\n            IsKey: false,\n            IsSortable: true,\n            isUnitOfMeasure: false,\n            semanticObjectType: [],\n            usage: {\n                Map: \"coordinates\",\n            },\n        };\n        //creaate new attribute and check whtether geojson metadata exists\n        const valStr = '{ \"type\": \"Point\", \"coordinates\": [' + lon + \", \" + lat + \", 0] }\";\n        const newAttribute = {\n            id: \"LOC_4326\",\n            label: \"LOC_4326\",\n            isHighlighted: false,\n            value: valStr,\n            valueFormatted: valStr,\n            valueHighlighted: itemData.sina,\n            metadata: newMetadata,\n            sina: itemData.sina,\n        };\n        attributes.push(newAttribute);\n\n        dataSource = itemData.sina.getDataSource(itemData.dataSource.id);\n        if (!dataSource.attributeMetadataMap.LOC_4326) {\n            dataSource.attributesMetadata.push(newMetadata);\n            dataSource.attributeMetadataMap.LOC_4326 = newMetadata;\n        } else {\n            dataSource.attributeMetadataMap.LOC_4326.type = \"GeoJson\";\n            dataSource.attributeMetadataMap.LOC_4326.usage = {\n                Map: \"coordinates\",\n            };\n        }\n    }\n    return itemData;\n}\n\nexport function cacheDecorator(originalFunction) {\n    const map = {};\n    return function (id) {\n        if (Object.prototype.hasOwnProperty.call(map, id)) {\n            return map[id];\n        }\n        const value = originalFunction.apply(this, [id]);\n        map[id] = value;\n        return value;\n    };\n}\n\nexport function escapeRegExp(str: string): string {\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n}\n\nexport function evaluateTemplate(template: string, obj: Record<string, string>): string {\n    const placeholderRegExp = new RegExp(\"{{([^{}]*)}}\");\n    const getProperty = function (template: string): string | null {\n        const match = placeholderRegExp.exec(template);\n        if (!match) {\n            return null;\n        }\n        return match[1];\n    };\n\n    const replaceProperty = function (template: string, property: string, value: string): string {\n        const propertyRegExp = new RegExp(\"{{\" + escapeRegExp(property) + \"}}\", \"g\");\n        template = template.replace(propertyRegExp, value);\n        return template;\n    };\n\n    const execute = function (template: string): string {\n        const property = getProperty(template);\n        if (!property) {\n            return template;\n        }\n        template = replaceProperty(template, property, obj[property]);\n        return execute(template);\n    };\n\n    return execute(template);\n}\n\nexport const extractRegExp = new RegExp(\"<b>(.*?)<\\\\/b>\", \"g\");\n\nexport function extractHighlightedTerms(text: string): Array<string> {\n    let match;\n    const result = [];\n    do {\n        match = extractRegExp.exec(text);\n        if (match) {\n            result.push(match[1]);\n        }\n    } while (match);\n    return result;\n}\n\nexport function appendRemovingDuplicates(list1, list2): void {\n    for (let i = 0; i < list2.length; ++i) {\n        const element = list2[i];\n        if (list1.indexOf(element) < 0) {\n            list1.push(element);\n        }\n    }\n}\n\nconst reservedCharacters: string[] = [\"\\\\\", \"-\", \"(\", \")\", \"~\", \"^\", \"?\", '\"', \":\", \"'\", \"[\", \"]\"];\nconst reservedWords: string[] = [\"AND\", \"OR\", \"NOT\"];\nconst reservedCharacters4FilterCondition: string[] = [\"\\\\\", '\"', \"*\", \"?\", \"'\"];\n\nfunction replaceAll(original: string, search: string, replacement: string): string {\n    return original.split(search).join(replacement);\n}\n\nexport function escapeQuery(query: string): string {\n    let escapedQuery: string = query.trim();\n\n    for (const specialCharacter of reservedCharacters) {\n        if (specialCharacter === \"'\") {\n            escapedQuery = replaceAll(escapedQuery, specialCharacter, \"''\");\n        } else {\n            escapedQuery = replaceAll(escapedQuery, specialCharacter, \"\\\\\" + specialCharacter);\n        }\n    }\n    for (const specialWord of reservedWords) {\n        if (escapedQuery === specialWord) {\n            escapedQuery = '\"' + specialWord + '\"';\n        }\n        if (escapedQuery.startsWith(specialWord + \" \")) {\n            escapedQuery = '\"' + specialWord + '\" ' + escapedQuery.substring(specialWord.length + 1);\n        }\n        if (escapedQuery.endsWith(\" \" + specialWord)) {\n            escapedQuery =\n                escapedQuery.substring(0, escapedQuery.length - (specialWord.length + 1)) +\n                ' \"' +\n                specialWord +\n                '\"';\n        }\n        escapedQuery = replaceAll(escapedQuery, \" \" + specialWord + \" \", ' \"' + specialWord + '\" ');\n    }\n\n    if (escapedQuery === \"\") {\n        escapedQuery = \"*\";\n    }\n    return escapedQuery;\n}\n\nexport function escapeFilterCondition(query: string): string {\n    let escapedQuery: string = query.trim();\n\n    for (const specialCharacter of reservedCharacters4FilterCondition) {\n        if (specialCharacter === \"'\") {\n            escapedQuery = replaceAll(escapedQuery, specialCharacter, \"''\");\n        } else {\n            escapedQuery = replaceAll(escapedQuery, specialCharacter, \"\\\\\" + specialCharacter);\n        }\n    }\n\n    if (escapedQuery === \"\") {\n        escapedQuery = \"*\";\n    }\n    return escapedQuery;\n}\n"],"mappings":"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","ignoreList":[]}