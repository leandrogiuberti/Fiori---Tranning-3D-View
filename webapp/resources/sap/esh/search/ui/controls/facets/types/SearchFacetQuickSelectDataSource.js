/*!
 * SAPUI5
 * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.
 * 
 */
sap.ui.define(["sap/m/List","sap/m/StandardListItem","sap/m/library","sap/ui/core/CustomData","sap/m/Tree","sap/m/CustomListItem","./SearchFacetHierarchyStaticTreeItem","sap/m/Label","sap/ui/core/Icon","../../../eventlogging/UserEvents","sap/m/VBox","sap/m/FlexBox","../../../i18n"],function(e,t,n,r,c,a,s,o,i,d,l,u,h){"use strict";function S(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const p=n["FlexAlignItems"];const g=n["FlexJustifyContent"];const f=n["ListSeparators"];const m=n["ListMode"];const y=n["ListType"];const x=S(s);const T=d["UserEventType"];const I=S(h);const C=l.extend("sap.esh.search.ui.controls.SearchFacetQuickSelectDataSource",{renderer:{apiVersion:2},constructor:function t(n,r){l.prototype.constructor.call(this,n,r);this.addStyleClass("sapUshellSearchFacetContainer");const c=new u({justifyContent:g.SpaceBetween,alignItems:p.Center,items:[new o({text:I.getText("quickSelectDataSourcesHeader")})]});c.addStyleClass("sapUshellSearchFacetHeader");this.addItem(c);const a=new e({itemPress:e=>{const t=e.getParameter("srcControl");const n=t.getBindingContext().getObject();this.handleSelectDataSource(n.dataSource);const r=this.getModel();const c={type:T.QUICK_SELECT_SWITCH,dataSourceKey:n.dataSource.id};r.eventLogger.logEvent(c)},items:{path:"items",factory:(e,t)=>{const n=t.getObject();if(n.type==="quickSelectDataSourceTreeNode"){return this.createTree()}else{return this.createListItem()}}}});a.setShowSeparators(f.None);a.setMode(m.SingleSelectMaster);this.addItem(a);this.getSelectedItem=a.getSelectedItem.bind(a)},handleSelectDataSource:function e(t){const n=this.getModel();if(n.config.bResetSearchTermOnQuickSelectDataSourceItemPress){n.setSearchBoxTerm("",false)}if(typeof n.config.adjustFilters==="function"){n.config.adjustFilters(n)}n.setDataSource(t)},createTree:function e(){this.tree=new c({mode:m.None,includeItemInSelection:true,items:{path:"children",factory:this.createTreeItem.bind(this)},toggleOpenState:function(e){e.getParameter("itemContext").getObject().toggleExpand()}});const t={onAfterRendering:function(){this.expandTreeNodes()}.bind(this)};this.addEventDelegate(t,this);return new a({content:this.tree})},expandTreeNodes:function e(){const t=this.getBindingContext().getObject();const n=t.items[0];this.expandTreeNodeRecursively(n,true)},expandTreeNodeRecursively:function e(t,n){if(t.expanded&&!n){this.doExpandTreeNode(t)}if(!t.children){return}for(let e=0;e<t.children.length;++e){const n=t.children[e];this.expandTreeNodeRecursively(n)}},doExpandTreeNode:function e(t){const n=this.tree.getItems();for(let e=0;e<n.length;++e){const r=n[e];const c=r.getBindingContext().getObject();if(c===t){this.tree.expand(e);return}}},createTreeItem:function e(t,n){const r=[];const c=n.getObject().icon;if(c){const e=new i("",{src:"{icon}"});e.addStyleClass("sapUiTinyMarginEnd");r.push(e)}const a=new o({text:"{label}"});a.attachBrowserEvent("click",()=>{this.handleSelectDataSource(n.getObject().getDataSource())});r.push(a);const s=new x("",{content:r,selectLine:{parts:["/queryFilter","dataSourceId"],formatter:function(e,t){return e.dataSource.id===t}}});return s},createListItem:function e(){return new t("",{type:y.Active,title:"{dataSource/label}",tooltip:"{dataSource/label}",icon:"{dataSource/icon}",customData:[new r({key:"test-id-collection",value:"{dataSource/label}",writeToDom:true})],selected:{parts:[{path:"/queryFilter"},{path:"dataSource"}],formatter(e,t){const n=this.getModel();const{searchInAreaOverwriteMode:r}=n.config;if(r&&n.getStaticHierarchyFilterConditions().length===1){return false}return e.dataSource===t}}})}});return C});
//# sourceMappingURL=SearchFacetQuickSelectDataSource.js.map