{"version":3,"file":"SearchFacetDialog.js","names":["sap","ui","define","__i18n","SearchHelper","SearchFacetDialogHelper","SearchFacetDialogHelper_SearchAdvancedCondition_ModuleLoader","SearchFacetDialogHelperCharts","SearchAdvancedCondition","FacetItem","sap_m_library","Page","Dialog","Select","CheckBox","SearchField","ToggleButton","Button","StandardListItem","SplitContainer","Item","List","HBox","VBox","Filter","FilterOperator","ScrollContainer","Toolbar","IconTabBar","IconTabFilter","JSONModel","SearchModel","____eventlogging_UserEvents","__SearchHierarchyDynamicFacet","__SearchFacetHierarchyDynamic","___FacetTypeUI","Element","ManagedObject","Log","_interopRequireDefault","obj","__esModule","default","i18n","ButtonType","ListMode","ListSeparators","FlexAlignItems","FlexJustifyContent","BackgroundDesign","UserEventType","SearchHierarchyDynamicFacet","SearchFacetHierarchyDynamic","FacetTypeUI","SearchFacetDialog","extend","renderer","apiVersion","metadata","properties","tabBarItems","type","selectedAttribute","selectedTabBarIndex","constructor","_constructor","sId","settings","loaderDummy","Dialog.prototype.constructor.call","this","oSettings","bConditionValidateError","bShowCharts","bOldPieChart","chartOnDisplayIndex","facetOnDisplayIndex","chartOnDisplayIndexByFilterArray","aItemsForBarChart","aItemsForBarChartFacetTotalCount","undefined","getProperty","setDummyTabBarItems","setShowHeader","setTitle","getText","setHorizontalScrolling","setVerticalScrolling","setContentHeight","setBeginButton","text","Emphasized","press","oEvent","onOkClick","close","getModel","destroy","setEndButton","onCancelClick","setEscapeHandler","addContent","createContainer","init","addStyleClass","onSearchFieldLiveChangeDelayed","delayedExecution","onSearchFieldLiveChange","_createContainer","oSplitContainer","masterPages","createMasterPages","bindAggregation","path","factory","oContext","createDetailPage","setModel","_setModel","oModel","sName","Dialog.prototype.setModel.call","config","optimizeForValueHelp","_createMasterPages","oFacetList","mode","SingleSelectMaster","selectionChange","onMasterPageSelectionChange","bindItems","facet","getObject","oListItem","title","counter","visible","oResetButton","icon","tooltip","Transparent","enabled","resetAllFilters","oMasterPage","headerContent","content","addEventDelegate","onAfterRendering","i","getItems","length","oFacetItem","getBindingContext","dimension","setSelectedItem","push","n","ar","getData","facets","j","chartIndex","isNaN","getSelectedItem","oSelectedItem","updateDetailPage","resetEnabledForFilterResetButton","_resetAllFilters","settingsContainer","document","querySelector","checkboxElem","checkboxes","querySelectorAll","parentNode","id","oCheckbox","getElementById","setSelected","setEnabled","aFilters","bResetFilterIsActive","oMasterPageList","getFacetList","aFacets","setCounter","resetAdvancedConditionFilters","resetChartQueryFilters","_resetAdvancedConditionFilters","oAdvancedContainer","condition1","n1","n2","oParent","oChild","oDetailPages","getDetailPages","oDetailPage","POS_ATTRIBUTE_LIST_CONTAINER","getContent","getParent","removeContent","POS_ICONTABBAR","POS_TABBAR_CONDITION","conditionItem","conditionValue","getValue","_resetEnabledForFilterResetButton","bForceEnabled","bFiltersExist","overallCounter","getCounter","setProperty","_onMasterPageSelectionChange","getParameter","indexOfItem","setChartOnDisplayIndexForFacetListItem","sBindingPath","getPath","resetIcons","getMode","hideMaster","controlChartVisibility","_createDetailPage","facetType","Attribute","createAttributeDetailPage","Hierarchy","createDynamicHierarchyAttributeDetailPage","_createDynamicHierarchyAttributeDetailPage","facetControl","showTitle","page","showHeader","_createAttributeDetailPage","sFacetType","sDataType","oSelect","items","key","selectedKey","change","onSelectChange","oHBox","alignItems","End","justifyContent","oCheckBox","select","onCheckBoxSelect","setVisible","oList","backgroundDesign","includeItemInSelection","showNoData","showSeparators","None","onDetailPageSelectionChange","setMode","MultiSelect","oBindingInfo","sPath","escapeSettingsValue","label","valueLabel","info","selected","addFilter","removeItem","NE","data","hideSelectively","oListContainer","oChartPlaceholder2","oChartPlaceholder1","getBarChartPlaceholder","getPieChartPlaceholder","height","horizontal","vertical","setBusyIndicatorDelay","oAdvancedCondition","oPage","oPlusButton","onPlusButtonPress","setHeight","oChartSelectionButton","getDropDownButton","subheader","placeholder","liveChange","onSettingButtonPress","forEach","el","classList","remove","oTabListPage","subHeader","oIconTabBar","expandable","stretchContentHeight","applyContentPadding","_onDetailPageSelectionChange","oSelectedItems","getSelected","listed","removeFilter","getSource","updateCountInfo","POS_SETTING_CONTAINER","POS_SHOWONTOP_CHECKBOX","POS_SORTING_SELECT","setSelectedKey","getSelectedContexts","_onSearchFieldLiveChange","value","_onSettingButtonPress","oSettingsButton","bPressed","getPressed","_onSelectChange","sortingAttributeList","_onCheckBoxSelect","_onPlusButtonPress","oNewAdvancedCondition","insertIndex","insertContent","_onOkClick","oSearchModel","resetFilterByFilterConditions","aDetailPages","m","item","advanced","addFilterCondition","filterCondition","detailPage","applyAdvancedCondition","filterChanged","invalidateQuery","fireSearchQuery","eventLogger","logEvent","FACET_SHOW_MORE_CLOSE","dataSourceKey","getDataSource","_onCancelClick","_setChartOnDisplayIndexForFacetListItem","res","e","warning","_resetIcons","oControl","isTextDataType","getAttributeDataType","allDropdownbuttons","Array","from","getElementsByClassName","btnElem","style","display","oDropDownButton","btn","getIcon","setIcon","asWhat","setTooltip","onDetailPageSelectionChangeCharts","_onDetailPageSelectionChangeCharts","cnt","context","model","isSelected","becomesSelected","sSelectedBindingPath","oNode","oMasterPageListItem","getId","replace","facetAttribute","updateDetailPageCharts","_updateDetailPageCharts","aItems","facetTotalCount","listContainers","getListContainersForDetailPage","contents","elem2","getDomRef","elem2Dom","oPieChart","elemChart","relevantContainerHeight","piechartOptions","oSearchFacetDialog","oFacetItemModel","setData","chartElem","innerHTML","directUpdate","elem1","elem1Dom","_controlChartVisibility","chartIndexToShow","forcePie","elem","classNames","isChart","contents2","className","indexOf","elemDom","aFacetTotalCount","setVertical","oSortButtonSet","oInputFieldForFilterTextSet","sortBtnElem","inputFieldElem","visibility","_hideSelectively","firstChild","children","oSortButton","elemSortButton"],"sources":["SearchFacetDialog.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport i18n from \"../../i18n\";\nimport * as SearchHelper from \"sap/esh/search/ui/SearchHelper\";\nimport SearchFacetDialogModel from \"sap/esh/search/ui/SearchFacetDialogModel\";\nimport SearchFacetDialogHelper from \"sap/esh/search/ui/SearchFacetDialogHelper\";\nimport SearchFacetDialogHelper_SearchAdvancedCondition_ModuleLoader from \"sap/esh/search/ui/SearchFacetDialogHelper_SearchAdvancedCondition_ModuleLoader\";\nimport SearchFacetDialogHelperCharts from \"sap/esh/search/ui/SearchFacetDialogHelperCharts\";\nimport SearchAdvancedCondition from \"sap/esh/search/ui/controls/SearchAdvancedCondition\";\nimport FacetItem from \"sap/esh/search/ui/FacetItem\";\nimport { ButtonType } from \"sap/m/library\";\nimport { ListMode } from \"sap/m/library\";\nimport { ListSeparators } from \"sap/m/library\";\nimport { FlexAlignItems } from \"sap/m/library\";\nimport { FlexJustifyContent } from \"sap/m/library\";\nimport { BackgroundDesign } from \"sap/m/library\";\nimport Page from \"sap/m/Page\";\nimport Dialog, { $DialogSettings } from \"sap/m/Dialog\";\nimport Select from \"sap/m/Select\";\nimport CheckBox from \"sap/m/CheckBox\";\nimport SearchField from \"sap/m/SearchField\";\nimport ToggleButton from \"sap/m/ToggleButton\";\nimport Button from \"sap/m/Button\";\nimport StandardListItem from \"sap/m/StandardListItem\";\nimport SplitContainer from \"sap/m/SplitContainer\";\nimport Item from \"sap/ui/core/Item\";\nimport List from \"sap/m/List\";\nimport HBox from \"sap/m/HBox\";\nimport VBox from \"sap/m/VBox\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport ScrollContainer from \"sap/m/ScrollContainer\";\nimport Toolbar from \"sap/m/Toolbar\";\nimport IconTabBar from \"sap/m/IconTabBar\";\nimport IconTabFilter from \"sap/m/IconTabFilter\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport Event from \"sap/ui/base/Event\";\nimport MenuButton from \"sap/m/MenuButton\";\nimport SearchModel from \"sap/esh/search/ui/SearchModel\";\nimport { UserEventType } from \"../../eventlogging/UserEvents\";\nimport Context from \"sap/ui/model/Context\";\nimport SearchHierarchyDynamicFacet from \"../../hierarchydynamic/SearchHierarchyDynamicFacet\";\nimport SearchFacetHierarchyDynamic from \"./types/SearchFacetHierarchyDynamic\";\nimport Model from \"sap/ui/model/Model\";\nimport { ListBase$SelectionChangeEvent } from \"sap/m/ListBase\";\nimport { FacetTypeUI } from \"./FacetTypeUI\";\nimport Element from \"sap/ui/core/Element\";\nimport ManagedObject from \"sap/ui/base/ManagedObject\";\nimport Log from \"sap/base/Log\";\nimport SearchFacetPieChart from \"./types/tabbarfacet/SearchFacetPieChart\";\n\nexport interface $SearchFacetDialogSettings extends $DialogSettings {\n    selectedAttribute: string;\n    selectedTabBarIndex: number;\n    tabBarItems: Array<IconTabFilter>;\n}\n\n/**\n * @namespace sap.esh.search.ui.controls\n */\nexport default class SearchFacetDialog extends Dialog {\n    oSplitContainer: SplitContainer;\n    bConditionValidateError: boolean;\n    bShowCharts: boolean;\n    bOldPieChart: boolean;\n    selectedAttribute: string;\n    chartOnDisplayIndex: number;\n    facetOnDisplayIndex: number;\n    chartOnDisplayIndexByFilterArray: Array<number>;\n    aItemsForBarChart: Array<any>;\n    aItemsForBarChartFacetTotalCount: number;\n    tabBarItems: Array<IconTabFilter>;\n    SearchFacetDialogHelperCharts: SearchFacetDialogHelperCharts;\n    onSearchFieldLiveChangeDelayed: any;\n\n    static readonly metadata = {\n        properties: {\n            tabBarItems: {\n                type: \"object\", // Array<IconTabFilter>\n            },\n            selectedAttribute: {\n                type: \"string\",\n            },\n            selectedTabBarIndex: {\n                type: \"int\",\n            },\n        },\n    };\n\n    constructor(sId?: string, settings?: Partial<$SearchFacetDialogSettings>) {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const loaderDummy = new SearchFacetDialogHelper_SearchAdvancedCondition_ModuleLoader();\n        super(sId, settings);\n        const oSettings = typeof sId === \"object\" ? sId : settings;\n        this.bConditionValidateError = false;\n        this.bShowCharts = true; // change this to completely turn off charts in show more dialog\n        this.bOldPieChart = true;\n        this.chartOnDisplayIndex = oSettings.selectedTabBarIndex; // charts\n        this.facetOnDisplayIndex = 0; // charts\n        this.chartOnDisplayIndexByFilterArray = []; // charts\n        this.aItemsForBarChart = []; // charts\n        this.aItemsForBarChartFacetTotalCount = undefined; // will be replaced by real total count of facet requests\n        this.SearchFacetDialogHelperCharts = new SearchFacetDialogHelperCharts(this);\n        if (!this.getProperty(\"tabBarItems\")) {\n            SearchFacetDialogHelperCharts.setDummyTabBarItems(this);\n        }\n        this.setShowHeader(true);\n        this.setTitle(i18n.getText(\"dialogTitle\"));\n        this.setHorizontalScrolling(false);\n        this.setVerticalScrolling(false);\n        this.setContentHeight(\"35rem\");\n        this.setBeginButton(\n            new Button({\n                text: i18n.getText(\"okDialogBtn\"),\n                type: ButtonType.Emphasized,\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                press: (oEvent: Event): void => {\n                    this.onOkClick();\n                    this.close();\n                    this.getModel().destroy();\n                    this.destroy();\n                },\n            })\n        );\n        this.setEndButton(\n            new Button({\n                text: i18n.getText(\"cancelDialogBtn\"),\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                press: (oEvent) => {\n                    this.onCancelClick();\n                    this.close();\n                    this.getModel().destroy();\n                    this.destroy();\n                },\n            })\n        );\n        this.setEscapeHandler(() => {\n            this.onCancelClick();\n            this.close();\n            this.getModel().destroy();\n            this.destroy();\n        });\n        this.addContent(this.createContainer());\n        SearchFacetDialogHelper.init(this);\n        this.addStyleClass(\"sapUshellSearchFacetDialog\");\n        this.onSearchFieldLiveChangeDelayed = SearchHelper.delayedExecution(\n            this.onSearchFieldLiveChange,\n            1000\n        );\n    }\n\n    createContainer(): SplitContainer {\n        // create SplitContainer with masterPages\n        this.oSplitContainer = new SplitContainer({\n            masterPages: this.createMasterPages(),\n        });\n        // binding detailPages in SplitContainer\n        this.oSplitContainer.bindAggregation(\"detailPages\", {\n            path: \"/facetDialog\",\n            factory: (sId: string, oContext: Context) => {\n                return this.createDetailPage(sId, oContext);\n            },\n        });\n        this.oSplitContainer.addStyleClass(\"sapUshellSearchFacetDialogContainer\");\n        return this.oSplitContainer;\n    }\n\n    setModel(oModel: Model, sName?: string): any {\n        // this/SearchFacetDialog not working as return type\n        super.setModel(oModel, sName);\n        if (oModel instanceof SearchModel && typeof oModel.config !== \"undefined\") {\n            if (oModel.config.optimizeForValueHelp) {\n                this.addStyleClass(\"sapUshellSearchFacetDialogValueHelp\");\n            }\n        }\n        return this;\n    }\n\n    // create masterPages in splitContainer (we only have one master page)\n    createMasterPages(): Array<Page> {\n        // create facet list\n        const oFacetList = new List({\n            mode: ListMode.SingleSelectMaster,\n            selectionChange: (oEvent) => {\n                this.onMasterPageSelectionChange(oEvent);\n            },\n        });\n        oFacetList.addStyleClass(\"sapUshellSearchFacetDialogFacetList\");\n        oFacetList.bindItems({\n            path: \"/facetDialog\",\n            factory: (sId: string, oContext): StandardListItem => {\n                const facet = oContext.getObject();\n                if (facet instanceof SearchHierarchyDynamicFacet) {\n                    const oListItem = new StandardListItem({\n                        title: { path: \"title\" },\n                        counter: { path: \"filterCount\" },\n                        visible: { path: \"visible\" },\n                    });\n                    return oListItem;\n                } else {\n                    const oListItem = new StandardListItem({\n                        title: { path: \"title\" },\n                        counter: { path: \"count\" },\n                        visible: { path: \"visible\" },\n                    });\n                    return oListItem;\n                }\n            },\n        });\n        // create a scrollContainer, content is the facet list\n        const oResetButton = new Button({\n            icon: \"sap-icon://clear-filter\",\n            tooltip: i18n.getText(\"resetFilterButton_tooltip\"),\n            type: ButtonType.Transparent,\n            enabled: { path: \"/facetDialogOverallCounter\" },\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            press: (oEvent) => {\n                this.resetAllFilters();\n            },\n        });\n        oResetButton.addStyleClass(\"sapUshellSearchFacetDialogFilterResetButton\");\n        const oMasterPage = new Page({\n            title: i18n.getText(\"filters\"),\n            headerContent: oResetButton,\n            content: [oFacetList],\n        }).addStyleClass(\"sapUshellSearchFacetDialogMasterContainer\");\n        oMasterPage.addEventDelegate({\n            onAfterRendering: () => {\n                if (this.getProperty(\"selectedAttribute\")) {\n                    for (let i = 0; i < oFacetList.getItems().length; i++) {\n                        const oListItem = oFacetList.getItems()[i];\n                        const oFacetItem = oListItem.getBindingContext().getObject() as any; // ToDo 'any'\n                        if (this.getProperty(\"selectedAttribute\") === oFacetItem.dimension) {\n                            oFacetList.setSelectedItem(oListItem);\n                            this.facetOnDisplayIndex = i;\n                            this.chartOnDisplayIndexByFilterArray.push(this.chartOnDisplayIndex); // initial setting of array\n                        } else {\n                            let n = 0;\n                            const ar = (\n                                oListItem.getBindingContext().getModel() as SearchFacetDialogModel\n                            ).getData().facets;\n                            for (let j = 0; j < ar.length; j++) {\n                                if (\n                                    ar[j].chartIndex &&\n                                    ar[j].dimension === oFacetItem.dimension &&\n                                    !isNaN(ar[j].chartIndex)\n                                ) {\n                                    n = ar[j].chartIndex;\n                                }\n                            }\n                            this.chartOnDisplayIndexByFilterArray.push(n); // initial setting of array\n                        }\n                    }\n                }\n                if (!oFacetList.getSelectedItem()) {\n                    oFacetList.setSelectedItem(oFacetList.getItems()[0]);\n                }\n                const oSelectedItem = oFacetList.getSelectedItem();\n                if (oSelectedItem) {\n                    // can be empty, if no facets are loaded (i.e. value help mode or search model w/o any facets)\n                    SearchFacetDialogHelper.updateDetailPage(oSelectedItem, null, true);\n                }\n                this.resetEnabledForFilterResetButton();\n            },\n        });\n        // masterPages has only one page\n        return [oMasterPage];\n    }\n\n    resetAllFilters() {\n        // if 'show selected on top' is checked, uncheck\n        const settingsContainer = document.querySelector(\".sapUshellSearchFacetDialogSettingsContainer\");\n        let checkboxElem: HTMLElement | null = null;\n        if (settingsContainer) {\n            // querySelectorAll for multiple classes, using double quotes\n            const checkboxes = settingsContainer.querySelectorAll(\".sapMCbBg.sapMCbHoverable.sapMCbMark\");\n            if (checkboxes.length === 1) {\n                checkboxElem = checkboxes[0] as HTMLElement;\n            }\n        }\n        if (checkboxElem && checkboxElem.parentNode) {\n            const id = (checkboxElem.parentNode as HTMLElement).id;\n            const oCheckbox = Element.getElementById(id) as CheckBox;\n            oCheckbox.setSelected(false);\n            oCheckbox.setEnabled(false);\n        }\n        const oModel = this.getModel() as SearchFacetDialogModel;\n        oModel.aFilters = [];\n        // none of the above work since selections in all lists are physically counted to addFilterCondition\n        SearchFacetDialogHelper.bResetFilterIsActive = true;\n        const oMasterPageList = SearchFacetDialogHelper.getFacetList();\n        const aFacets = oMasterPageList.getItems();\n        for (let j = 0; j < aFacets.length; j++) {\n            aFacets[j].setCounter(0);\n        }\n        this.resetAdvancedConditionFilters();\n        SearchFacetDialogHelper.resetChartQueryFilters();\n        SearchFacetDialogHelper.updateDetailPage(oMasterPageList.getSelectedItem());\n        this.resetEnabledForFilterResetButton();\n        SearchFacetDialogHelper.bResetFilterIsActive = false;\n    }\n\n    resetAdvancedConditionFilters(): void {\n        let oAdvancedContainer, condition1, n1, n2, oParent, oChild;\n        const oDetailPages = this.oSplitContainer.getDetailPages() as Array<Page>;\n        for (let i = 0; i < oDetailPages.length; i++) {\n            const oDetailPage = oDetailPages[i];\n            const facet = oDetailPage.getBindingContext().getObject();\n            if (facet instanceof SearchHierarchyDynamicFacet) {\n                continue;\n            }\n            n1 = SearchFacetDialogHelper.POS_ATTRIBUTE_LIST_CONTAINER;\n            oAdvancedContainer = oDetailPage.getContent()[n1]; // for numbers, dates etc, not strings or texts\n            if (oAdvancedContainer) {\n                for (let j = oAdvancedContainer.getContent().length - 2; j > 0; j--) {\n                    condition1 = oAdvancedContainer.getContent()[j];\n                    oParent = condition1.getParent();\n                    oChild = condition1;\n                    oParent.removeContent(oChild);\n                }\n            } else {\n                n1 = SearchFacetDialogHelper.POS_ICONTABBAR;\n                n2 = SearchFacetDialogHelper.POS_TABBAR_CONDITION;\n                oAdvancedContainer = (\n                    (oDetailPage.getContent()[n1] as IconTabBar).getItems()[n2] as IconTabFilter\n                ).getContent()[0]; // for numbers, dates etc, not strings or texts\n                if (oAdvancedContainer) {\n                    for (let j = oAdvancedContainer.getContent().length - 1; j > -1; j--) {\n                        condition1 = oAdvancedContainer.getContent()[j];\n                        if (condition1.getContent && condition1.getContent()[1]) {\n                            const conditionItem = condition1.getContent()[1].getContent()[1]; //condition1 = [a box, a layout, and an x button]\n                            const conditionValue = conditionItem.getValue();\n                            if (conditionValue && (\"\" + conditionValue).length > 0) {\n                                oParent = condition1.getParent();\n                                oChild = condition1;\n                                oParent.removeContent(oChild);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    resetEnabledForFilterResetButton(bForceEnabled?: boolean): void {\n        let bFiltersExist = false;\n        let overallCounter = 0;\n        const oMasterPageList = SearchFacetDialogHelper.getFacetList();\n        const aFacets = oMasterPageList.getItems();\n        for (let i = 0; i < aFacets.length; i++) {\n            overallCounter += aFacets[i].getCounter();\n        }\n        const oModel = this.getModel() as SearchFacetDialogModel;\n        if ((oModel.aFilters && oModel.aFilters.length > 0) || bForceEnabled || overallCounter > 0) {\n            bFiltersExist = true;\n        }\n        oModel.setProperty(\"/facetDialogOverallCounter\", bFiltersExist);\n    }\n\n    // event: select listItems in masterPage\n    onMasterPageSelectionChange(oEvent: ListBase$SelectionChangeEvent): void {\n        const oListItem = oEvent.getParameter(\"listItem\");\n        this.facetOnDisplayIndex = (oListItem.getParent() as any).indexOfItem(\n            (oListItem.getParent() as any).getSelectedItem()\n        );\n        this.setChartOnDisplayIndexForFacetListItem(this.facetOnDisplayIndex);\n        const oModel = oListItem.getParent().getModel() as SearchFacetDialogModel;\n        const sBindingPath = oListItem.getBindingContext().getPath();\n        this.resetIcons(oModel, sBindingPath, this);\n        SearchFacetDialogHelper.updateDetailPage(oListItem);\n        if (this.oSplitContainer.getMode() === \"ShowHideMode\") {\n            this.oSplitContainer.hideMaster();\n        }\n        this.controlChartVisibility(this, this.chartOnDisplayIndex);\n    }\n\n    createDetailPage(sId: string, oContext: Context): Page {\n        const facet: any = oContext.getObject();\n        switch (facet.facetType) {\n            case FacetTypeUI.Attribute:\n                return this.createAttributeDetailPage(sId, oContext);\n            case FacetTypeUI.Hierarchy:\n                return this.createDynamicHierarchyAttributeDetailPage(sId, oContext);\n        }\n    }\n\n    createDynamicHierarchyAttributeDetailPage(sId: string, oContext: Context): Page {\n        const facetControl = new SearchFacetHierarchyDynamic(\"\", { showTitle: false });\n        const facet: SearchHierarchyDynamicFacet = oContext.getObject() as SearchHierarchyDynamicFacet;\n        const page = new Page({\n            title: facet.title,\n            showHeader: true,\n            content: [facetControl],\n        })\n            .addStyleClass(\"sapUshellSearchFacetDialogDetailPage\")\n            .addStyleClass(\"sapUshellSearchFacetDialogHierarchyTreeDetailPage\");\n        return page;\n    }\n\n    // create pages of 'detailPages' in splitContainer, using data binding\n    createAttributeDetailPage(sId: string, oContext: Context): Page {\n        const sFacetType = oContext.getModel().getProperty(oContext.getPath()).facetType;\n        const sDataType = oContext\n            .getModel()\n            [\"getAttributeDataType\"](oContext.getModel().getProperty(oContext.getPath()));\n        // create a settings container with select and checkBox, initial is not visible\n        const oSelect = new Select({\n            items: [\n                new Item({\n                    text: i18n.getText(\"notSorted\"),\n                    key: \"notSorted\",\n                }),\n                new Item({\n                    text: i18n.getText(\"sortByCount\"),\n                    key: \"sortCount\",\n                }),\n                new Item({\n                    text: i18n.getText(\"sortByName\"),\n                    key: \"sortName\",\n                }),\n            ],\n            selectedKey: sDataType === \"string\" || sDataType === \"text\" ? \"sortCount\" : \"notSorted\",\n            change: (oEvent: Event): void => {\n                this.onSelectChange(oEvent);\n            },\n        }).addStyleClass(\"sapUshellSearchFacetDialogSettingsSelect\");\n        const oHBox = new HBox({\n            alignItems: FlexAlignItems.End,\n            justifyContent: FlexJustifyContent.End,\n            items: [oSelect],\n        });\n        const oCheckBox = new CheckBox({\n            text: i18n.getText(\"showSelectedOnTop\"),\n            enabled: false,\n            select: (oEvent) => {\n                this.onCheckBoxSelect(oEvent);\n            },\n        });\n        const oSettings = new VBox({\n            items: [oHBox, oCheckBox],\n        }).addStyleClass(\"sapUshellSearchFacetDialogSettingsContainer\");\n        oSettings.setVisible(false);\n        // create the attribute list for each facet\n        const oList = new List({\n            backgroundDesign: BackgroundDesign.Transparent,\n            includeItemInSelection: true,\n            showNoData: false,\n            showSeparators: ListSeparators.None,\n            selectionChange: (oEvent: Event) => {\n                this.onDetailPageSelectionChange(oEvent);\n            },\n        });\n        oList.addStyleClass(\"sapUshellSearchFacetDialogDetailPageList\");\n        oList.addStyleClass(\"largeChart0\");\n        if (sFacetType === FacetTypeUI.Attribute) {\n            oList.setMode(ListMode.MultiSelect);\n        }\n        const oBindingInfo = {\n            path: \"items\",\n            factory: (sId: string, oContext): StandardListItem => {\n                const oFacetItem = oContext.oModel.getProperty(oContext.sPath);\n                const oListItem = new StandardListItem({\n                    title: { path: \"label\" },\n                    tooltip: i18n.getText(\"facetListTooltip\", [\n                        ManagedObject.escapeSettingsValue(oFacetItem.label),\n                        ManagedObject.escapeSettingsValue(oFacetItem.valueLabel),\n                    ]),\n                    info: { path: \"valueLabel\" },\n                    selected: { path: \"selected\" },\n                });\n                // prepare the local filterConditions array in facet dialog\n                if (oFacetItem.selected) {\n                    oContext.oModel.addFilter(oFacetItem);\n                }\n                return oListItem;\n            },\n        };\n        if (sDataType === \"number\" || sDataType === \"integer\") {\n            oSelect.removeItem(2);\n        }\n        oBindingInfo[\"filters\"] = new Filter(\"advanced\", FilterOperator.NE, true); // ToDo\n        oList.bindAggregation(\"items\", oBindingInfo);\n        oList.data(\"dataType\", sDataType);\n        if (this.bShowCharts) {\n            oList.addEventDelegate({\n                onAfterRendering: (oEvent: Event): void => {\n                    this.hideSelectively(oEvent, this, 0);\n                },\n            });\n        }\n        let oListContainer, oChartPlaceholder2;\n        const oChartPlaceholder1 = SearchFacetDialogHelperCharts.getBarChartPlaceholder();\n        oChartPlaceholder1.addEventDelegate({\n            onAfterRendering: (oEvent: Event): void => {\n                this.hideSelectively(oEvent, this, 1);\n            },\n        });\n        oChartPlaceholder1.data(\"dataType\", sDataType);\n        if (this.bOldPieChart) {\n            oChartPlaceholder2 = SearchFacetDialogHelperCharts.getPieChartPlaceholder();\n        } else {\n            oChartPlaceholder2 = {};\n        }\n        oChartPlaceholder2.addEventDelegate({\n            onAfterRendering: (oEvent: Event) => {\n                this.hideSelectively(oEvent, this, 2);\n            },\n        });\n        if (this.bShowCharts && (sDataType === \"string\" || sDataType === \"text\")) {\n            oListContainer = new ScrollContainer({\n                height: \"67.2%\",\n                horizontal: false,\n                vertical: true,\n                content: [oList, oChartPlaceholder1, oChartPlaceholder2],\n            });\n        } else {\n            oListContainer = new ScrollContainer({\n                height: \"calc(100% - 0.25rem)\",\n                horizontal: false,\n                vertical: true,\n                content: [oList],\n            });\n            if (sDataType === \"number\" || sDataType === \"integer\") {\n                oListContainer.addStyleClass(\"sapUshellSearchFacetDialogDetailPageListContainerNumber\");\n            } else {\n                oListContainer.addStyleClass(\"sapUshellSearchFacetDialogDetailPageListContainerDate\");\n            }\n        }\n        oListContainer.addStyleClass(\"sapUshellSearchFacetDialogDetailPageListContainer\");\n        oListContainer.addStyleClass(\"searchFacetLargeChartContainer\");\n        oListContainer.setBusyIndicatorDelay(0);\n        // create advanced search\n        const oAdvancedCondition = new SearchAdvancedCondition(\"\", {\n            type: sDataType,\n        });\n        let oPage;\n        if (sDataType === \"string\" || sDataType === \"text\") {\n            const oAdvancedContainer = new ScrollContainer({\n                horizontal: false,\n                vertical: true,\n                content: [oAdvancedCondition],\n            });\n            oAdvancedContainer.addStyleClass(\"sapUshellSearchFacetDialogDetailPageAdvancedContainer\");\n            const oPlusButton = new Button({\n                icon: \"sap-icon://add\",\n                type: ButtonType.Transparent,\n                press: (oEvent: Event): void => {\n                    this.onPlusButtonPress(oEvent, sDataType);\n                },\n            });\n            oPlusButton.addStyleClass(\"sapUshellSearchFacetDialogDetailPageAdvancedContainerPlusButton\");\n            oAdvancedContainer.addContent(oPlusButton);\n            oAdvancedContainer.data(\"dataType\", sDataType);\n            oAdvancedContainer.data(\"initial\", true);\n            // create a page for type string or text, content include settings container and attribute list, head toolbar has a setting button and a search field\n            oListContainer.setHeight(\"calc(100% - 0.25rem)\");\n            oAdvancedContainer.setHeight(\"100%\");\n            const oChartSelectionButton = SearchFacetDialogHelperCharts.getDropDownButton(this);\n            const subheader = new Toolbar({\n                content: [\n                    new SearchField({\n                        placeholder: i18n.getText(\"filterPlaceholder\"),\n                        liveChange: (oEvent: Event): void => {\n                            this.onSearchFieldLiveChangeDelayed(oEvent[\"oSource\"].getValue()); // ToDo\n                        },\n                    }),\n                    new ToggleButton({\n                        icon: \"sap-icon://sort\",\n                        press: (oEvent: Event): void => {\n                            this.onSettingButtonPress(oEvent);\n                        },\n                    }).addStyleClass(\"sapUshellSearchFacetDialogSortButton\"),\n                ],\n            }).addStyleClass(\"sapUshellSearchFacetDialogSubheaderToolbar\");\n            subheader.addEventDelegate({\n                onAfterRendering: (): void => {\n                    document.querySelectorAll(\".sapUshellSearchFacetDialogSubheaderToolbar\").forEach((el) => {\n                        el.classList.remove(\"sapContrastPlus\");\n                    });\n                },\n            });\n            if (this.bShowCharts) {\n                subheader.addContent(oChartSelectionButton);\n            }\n            const oTabListPage = new Page({\n                showHeader: false,\n                subHeader: subheader,\n                content: [oSettings, oListContainer],\n            }).addStyleClass(\"sapUshellSearchFacetDialogDetailPage\");\n            const oIconTabBar = new IconTabBar({\n                expandable: false,\n                stretchContentHeight: true,\n                backgroundDesign: BackgroundDesign.Transparent,\n                applyContentPadding: false,\n                select: () => {\n                    this.controlChartVisibility(this, this.chartOnDisplayIndex);\n                },\n                items: [\n                    new IconTabFilter({\n                        text: i18n.getText(\"selectFromList\"),\n                        content: [oTabListPage],\n                    }),\n                    new IconTabFilter({\n                        text: i18n.getText(\"defineCondition\"),\n                        content: [oAdvancedContainer],\n                    }),\n                ],\n            });\n            oIconTabBar.addStyleClass(\"sapUshellSearchFacetDialogIconTabBar\");\n            oPage = new Page({\n                showHeader: true,\n                title: oContext.getModel().getProperty(oContext.getPath()).title,\n                content: [oIconTabBar],\n            });\n            oPage.addStyleClass(\"sapUshellSearchFacetDialogDetailPageString\");\n        } else {\n            oListContainer.addContent(oAdvancedCondition);\n            oListContainer.data(\"dataType\", sDataType);\n            oListContainer.data(\"initial\", true);\n            // create a page for type number or date\n            if (this.bShowCharts) {\n                const title = oContext.getModel().getProperty(oContext.getPath()).title;\n                oPage = new Page({\n                    title: title,\n                    showHeader: true,\n                    content: [oSettings, oListContainer],\n                });\n            } else {\n                oPage = new Page({\n                    showHeader: true,\n                    title: oContext.getModel().getProperty(oContext.getPath()).title,\n                    content: [oSettings, oListContainer],\n                });\n            }\n            oPage.addStyleClass(\"sapUshellSearchFacetDialogDetailPage\");\n        }\n        oPage.addEventDelegate({\n            onAfterRendering: () => {\n                this.controlChartVisibility(this, this.chartOnDisplayIndex);\n            },\n        });\n        return oPage;\n    }\n\n    // event: select listItems in detailPages\n    onDetailPageSelectionChange(oEvent: ListBase$SelectionChangeEvent): void {\n        const oSelectedItems = oEvent.getParameter(\"listItems\");\n        oSelectedItems.forEach((oSelectedItem) => {\n            // update aFilters\n            const oFacetItem = oSelectedItem.getBindingContext().getObject() as FacetItem;\n            const oModel = this.getModel() as SearchFacetDialogModel;\n            if (oSelectedItem.getSelected()) {\n                oFacetItem.listed = true;\n                oModel.addFilter(oFacetItem);\n            } else {\n                oFacetItem.listed = false;\n                oModel.removeFilter(oFacetItem);\n            }\n            // update the count info in masterPageList\n            const oList = oEvent.getSource() as List;\n            let oDetailPage;\n            if (oList.data(\"dataType\") === \"string\" || oList.data(\"dataType\") === \"text\") {\n                oDetailPage = oList.getParent().getParent().getParent().getParent().getParent().getParent();\n            } else {\n                oDetailPage = oList.getParent().getParent();\n            }\n            SearchFacetDialogHelper.updateCountInfo(oDetailPage);\n            // deselect setting check box\n            const oSettings = (oList.getParent().getParent() as any).getContent()[\n                SearchFacetDialogHelper.POS_SETTING_CONTAINER\n            ];\n            const oCheckbox = oSettings.getItems()[SearchFacetDialogHelper.POS_SHOWONTOP_CHECKBOX];\n            const oSelect = oSettings.getItems()[SearchFacetDialogHelper.POS_SORTING_SELECT].getItems()[0];\n            if (oCheckbox.getSelected()) {\n                oCheckbox.setSelected(false);\n                oSelect.setSelectedKey(\"notSorted\");\n            }\n            if (oList.getSelectedContexts().length > 0) {\n                oCheckbox.setEnabled(true);\n            } else {\n                oCheckbox.setEnabled(false);\n            }\n        });\n    }\n\n    // event: search in detailPages\n    onSearchFieldLiveChange(value: string): void {\n        const oSelectedItem = SearchFacetDialogHelper.getFacetList().getSelectedItem();\n        SearchFacetDialogHelper.updateDetailPage(oSelectedItem, value);\n    }\n\n    // event: click setting button\n    onSettingButtonPress(oEvent: Event): void {\n        const oSettingsButton = oEvent.getSource() as ToggleButton;\n        const bPressed = oSettingsButton.getPressed();\n        const oSettings = oSettingsButton.getParent().getParent()[\"getContent\"]()[\n            SearchFacetDialogHelper.POS_SETTING_CONTAINER\n        ];\n        const oListContainer = oSettingsButton.getParent().getParent()[\"getContent\"]()[\n            SearchFacetDialogHelper.POS_ATTRIBUTE_LIST_CONTAINER\n        ];\n        if (bPressed) {\n            oSettings.setVisible(true);\n            oListContainer.setHeight(\"calc(100% - 4.25rem)\");\n        } else {\n            oSettings.setVisible(false);\n            oListContainer.setHeight(\"calc(100% - 0.25rem)\");\n        }\n    }\n\n    // event: change select box in settings\n    onSelectChange(oEvent: Event): void {\n        const oSelect = oEvent.getSource() as Select;\n        SearchFacetDialogHelper.sortingAttributeList(oSelect.getParent().getParent().getParent());\n    }\n\n    // e足足足足vent: select check box in settings\n    onCheckBoxSelect(oEvent: Event): void {\n        const oCheckbox = oEvent.getSource() as CheckBox;\n        SearchFacetDialogHelper.sortingAttributeList(oCheckbox.getParent().getParent());\n    }\n\n    // event: advanced condition plus button pressed\n    onPlusButtonPress(oEvent: Event, type: string): void {\n        const oPlusButton = oEvent.getSource() as Button;\n        const oAdvancedContainer = oPlusButton.getParent() as ScrollContainer;\n        const oNewAdvancedCondition = new SearchAdvancedCondition(\"\", {\n            type: type,\n        });\n        const insertIndex = oAdvancedContainer.getContent().length - 1;\n        oAdvancedContainer.insertContent(oNewAdvancedCondition, insertIndex);\n    }\n\n    // event: click ok button\n    onOkClick(): void {\n        const oModel = this.getModel() as SearchFacetDialogModel;\n        const oSearchModel = this.getModel(\"searchModel\") as SearchModel;\n        oSearchModel.resetFilterByFilterConditions(false);\n        const aDetailPages = this.oSplitContainer.getDetailPages();\n        // no advanced filter\n        for (let m = 0; m < oModel.aFilters.length; m++) {\n            const item = oModel.aFilters[m];\n            if (!item.advanced || item.listed) {\n                oSearchModel.addFilterCondition(item.filterCondition, false);\n            }\n        }\n        // advanced filter\n        for (let i = 0; i < aDetailPages.length; i++) {\n            const detailPage = aDetailPages[i];\n            const facet = detailPage.getBindingContext().getObject();\n            if (facet instanceof SearchHierarchyDynamicFacet) {\n                continue;\n            }\n            if (SearchFacetDialogHelper.getFacetList().getItems()[i]) {\n                SearchFacetDialogHelper.applyAdvancedCondition(\n                    detailPage,\n                    SearchFacetDialogHelper.getFacetList().getItems()[i].getBindingContext().getObject(),\n                    oSearchModel\n                );\n            }\n        }\n        if (!this.bConditionValidateError) {\n            oSearchModel.filterChanged = true;\n            oSearchModel.invalidateQuery();\n            oSearchModel.fireSearchQuery();\n        }\n        oSearchModel.eventLogger.logEvent({\n            type: UserEventType.FACET_SHOW_MORE_CLOSE,\n            dataSourceKey: oSearchModel.getDataSource().id,\n        });\n    }\n\n    onCancelClick(): void {\n        const oSearchModel = this.getModel(\"searchModel\") as SearchModel;\n        oSearchModel.eventLogger.logEvent({\n            type: UserEventType.FACET_SHOW_MORE_CLOSE,\n            dataSourceKey: oSearchModel.getDataSource().id,\n        });\n    }\n\n    setChartOnDisplayIndexForFacetListItem(facetOnDisplayIndex: number): void {\n        let res = 0;\n        try {\n            res = this.chartOnDisplayIndexByFilterArray[facetOnDisplayIndex];\n        } catch (e) {\n            Log.warning(\"Error in setChartOnDisplayIndexForFacetListItem: \" + e);\n            res = 0;\n        }\n        if (res === undefined) {\n            res = 0;\n        }\n        this.chartOnDisplayIndex = res;\n    }\n\n    // ensure dropdown icons are correct -> see SearchFacetDialogHelper.js:89\n    resetIcons(oModel: SearchFacetDialogModel, sPath: string, oControl): void {\n        let isTextDataType = false;\n        const sDataType = oModel.getAttributeDataType(oModel.getProperty(sPath));\n        if (this.bShowCharts && (sDataType === \"string\" || sDataType === \"text\")) {\n            isTextDataType = true;\n        }\n        const allDropdownbuttons = Array.from(\n            document.getElementsByClassName(\"sapUshellSearchFacetDialogTabBarButton\")\n        ) as HTMLElement[];\n        if (isTextDataType) {\n            allDropdownbuttons.forEach((btnElem) => {\n                btnElem.style.display = \"block\";\n            });\n            for (let i = 0; i < allDropdownbuttons.length; i++) {\n                const id = allDropdownbuttons[i].id;\n                const oDropDownButton = Element.getElementById(id) as MenuButton;\n                // reset the main button\n                const btn = oControl.getProperty(\"tabBarItems\")[oControl.chartOnDisplayIndex].getIcon();\n                oDropDownButton.setIcon(btn);\n                const asWhat = oControl.getProperty(\"tabBarItems\")[oControl.chartOnDisplayIndex].getText();\n                // reset the main button tooltip\n                // @ts-expect-error: setTooltip expects TooltipBase, but i18n.getText returns string\n                oDropDownButton.setTooltip(i18n.getText(\"displayAs\", [asWhat]));\n            }\n        } else {\n            allDropdownbuttons.forEach((btnElem) => {\n                btnElem.style.display = \"none\";\n            });\n        }\n    }\n\n    // event: select chart elements\n    onDetailPageSelectionChangeCharts(oEvent: any): void {\n        let cnt = 0;\n        let context,\n            model,\n            data,\n            isSelected,\n            becomesSelected,\n            oSelectedItem,\n            sSelectedBindingPath,\n            oFacetItem,\n            sPath;\n        let ar, oNode, oMasterPageListItem;\n        if (oEvent.getSource && oEvent.getId() === \"press\") {\n            context = (oEvent.getSource() as Page).getBindingContext();\n            model = context.getModel();\n            data = context.getObject();\n            isSelected = data.selected;\n            becomesSelected = !isSelected;\n            // first set the selected value in model\n            oSelectedItem = oEvent.getSource();\n            sSelectedBindingPath = oSelectedItem.getBindingContext().sPath + \"/selected\";\n            model.setProperty(sSelectedBindingPath, becomesSelected);\n            // update aFilters\n            oFacetItem = oSelectedItem.getBindingContext().getObject();\n            if (becomesSelected) {\n                model.addFilter(oFacetItem);\n            } else {\n                model.removeFilter(oFacetItem);\n            }\n            // count the number of selected items in the model\n            sPath = sSelectedBindingPath.replace(/\\/items.+/, \"\"); //\"/facetDialog/1/items/11/selected\"\n            sPath += \"/items\";\n            ar = model.getProperty(sPath);\n            cnt = 0;\n            for (let i = 0; i < ar.length; i++) {\n                oNode = ar[i];\n                if (oNode.selected === true) {\n                    cnt++;\n                }\n            }\n        } else {\n            // pie chart\n            data = oEvent[\"dataObject\"];\n            isSelected = data.selected;\n            becomesSelected = !isSelected;\n            cnt = oEvent[\"cnt\"];\n            model = oEvent[\"model\"];\n            oFacetItem = new FacetItem();\n            oFacetItem.facetAttribute = ManagedObject.escapeSettingsValue(data.dimension);\n            oFacetItem.filterCondition = ManagedObject.escapeSettingsValue(data.filterCondition);\n            oFacetItem.label = ManagedObject.escapeSettingsValue(data.label);\n            oFacetItem.selected = ManagedObject.escapeSettingsValue(data.selected);\n            oFacetItem.listed = ManagedObject.escapeSettingsValue(data.selected);\n            oFacetItem.value = ManagedObject.escapeSettingsValue(data.value);\n            oFacetItem.valueLabel = ManagedObject.escapeSettingsValue(data.valueLabel);\n            // bar chart\n            // - update aItemsForBarChart\n            for (let j = 0; j < this.aItemsForBarChart.length; j++) {\n                const item = this.aItemsForBarChart[j];\n                if (item.label === ManagedObject.escapeSettingsValue(data.label)) {\n                    item.selected = data.selected;\n                }\n            }\n            // this.aItemsForBarChartFacetTotalCount = ... -> do not update, here\n            const oModel = this.getModel() as SearchFacetDialogModel;\n            if (isSelected) {\n                oModel.addFilter(oFacetItem);\n            } else {\n                oModel.removeFilter(oFacetItem);\n            }\n        }\n        // update the count info in masterPageList\n        const oMasterPageList = SearchFacetDialogHelper.getFacetList();\n        oMasterPageListItem = oMasterPageList.getSelectedItem();\n        if (!oMasterPageListItem) {\n            oMasterPageListItem = oMasterPageList.getItems()[0];\n        }\n        oMasterPageListItem.setCounter(cnt);\n        this.resetEnabledForFilterResetButton();\n    }\n\n    updateDetailPageCharts(aItems: Array<any>, facetTotalCount: number): void {\n        if (this.bShowCharts === false) {\n            return;\n        }\n        this.aItemsForBarChart = aItems;\n        this.aItemsForBarChartFacetTotalCount = facetTotalCount;\n        const listContainers = SearchFacetDialogHelperCharts.getListContainersForDetailPage();\n        const oListContainer = listContainers[1];\n        if (!oListContainer) {\n            return;\n        }\n        const contents = oListContainer.getContent();\n        // adjust visibility of charts\n        if (contents && this.chartOnDisplayIndex === 1) {\n            // hide pie chart (if in DOM)\n            const elem2 = contents[2].getDomRef();\n            if (elem2) {\n                const elem2Dom = document.getElementById(elem2.id);\n                if (elem2Dom) {\n                    elem2Dom.style.display = \"none\";\n                }\n            }\n        } else if (contents && this.chartOnDisplayIndex === 2) {\n            // update pie chart\n            if (contents && this.chartOnDisplayIndex === 2) {\n                const oPieChart = contents[2] as SearchFacetPieChart;\n                const elemChart = listContainers[5];\n                let relevantContainerHeight = listContainers[2];\n                relevantContainerHeight = 0.9 * relevantContainerHeight;\n                const piechartOptions = {\n                    relevantContainerHeight: relevantContainerHeight,\n                    oSearchFacetDialog: this,\n                };\n                const oFacetItemModel = new JSONModel();\n                oFacetItemModel.setData(aItems);\n                const chartElem = document.getElementById(elemChart.id);\n                if (chartElem) {\n                    chartElem.innerHTML = \"\";\n                }\n                oPieChart.directUpdate(aItems, elemChart, oFacetItemModel, facetTotalCount, piechartOptions);\n            }\n            // hide bar chart (if in DOM)\n            const elem1 = contents[1].getDomRef();\n            if (elem1) {\n                const elem1Dom = document.getElementById(elem1.id);\n                if (elem1Dom) {\n                    elem1Dom.style.display = \"none\";\n                }\n            }\n        }\n    }\n\n    // this is for the button that toggles the charts but also calls updateDetailPageCharts() for pie chart\n    controlChartVisibility(oControl: SearchFacetDialog, chartIndexToShow: number, forcePie?: boolean): void {\n        let elem, classNames, isChart;\n        if (this.bShowCharts === false) return;\n        const listContainers = SearchFacetDialogHelperCharts.getListContainersForDetailPage();\n        const oListContainer = listContainers[1];\n        if (!oListContainer || !oListContainer.getContent) return;\n        const contents2 = oListContainer.getContent();\n        for (let i = 0; i < contents2.length; i++) {\n            elem = contents2[i].getDomRef();\n            if (!elem) return;\n            classNames = elem.className;\n            isChart = false;\n            if (classNames.indexOf(\"largeChart\") > -1) {\n                isChart = true;\n            }\n            const elemDom = document.getElementById(elem.id);\n            if (elemDom) {\n                if (isChart && i !== chartIndexToShow) {\n                    elemDom.style.display = \"none\";\n                } else {\n                    elemDom.style.display = \"block\";\n                }\n            }\n        }\n        if (oControl.bOldPieChart) {\n            if (isChart && chartIndexToShow === 2 && forcePie) {\n                const aItems = this.aItemsForBarChart;\n                const aFacetTotalCount = this.aItemsForBarChartFacetTotalCount;\n                this.updateDetailPageCharts(aItems, aFacetTotalCount);\n            }\n            if (isChart && chartIndexToShow === 2) {\n                oListContainer.setVertical(false);\n            } else {\n                oListContainer.setVertical(true);\n            }\n        }\n        const oSortButtonSet = listContainers[6];\n        const oInputFieldForFilterTextSet = listContainers[7];\n        if (oSortButtonSet) {\n            const sortBtnElem = document.getElementById(oSortButtonSet.sId);\n            const inputFieldElem = document.getElementById(oInputFieldForFilterTextSet.sId);\n            if (chartIndexToShow === 0) {\n                if (sortBtnElem) sortBtnElem.style.display = \"block\";\n                if (inputFieldElem) inputFieldElem.style.visibility = \"visible\";\n            } else {\n                if (sortBtnElem) sortBtnElem.style.display = \"none\";\n                if (inputFieldElem) inputFieldElem.style.visibility = \"hidden\";\n            }\n        }\n    }\n\n    hideSelectively(oEvent: Event, oControl: SearchFacetDialog, chartIndex: number): void {\n        const elem = document.getElementById(oEvent[\"srcControl\"].sId);\n        const chartIndexToShow = oControl.chartOnDisplayIndex;\n        const listContainers = SearchFacetDialogHelperCharts.getListContainersForDetailPage();\n        const oListContainer = listContainers[1];\n        if (listContainers[0].firstChild.children.length != 3) return;\n        if (chartIndexToShow !== undefined) {\n            if (oControl.chartOnDisplayIndex !== chartIndex) {\n                if (elem) elem.style.display = \"none\";\n            } else {\n                if (elem) elem.style.display = \"block\";\n            }\n        } else {\n            if (elem) elem.style.display = \"block\";\n        }\n        if (chartIndexToShow === 2) {\n            if (\n                !listContainers[0].firstChild.children[2] ||\n                !listContainers[0].firstChild.children[2].firstChild\n            ) {\n                oControl.controlChartVisibility(oControl, oControl.chartOnDisplayIndex, true);\n            }\n            if (oControl.bOldPieChart) {\n                oListContainer.setVertical(false);\n            }\n        } else {\n            oListContainer.setVertical(true);\n        }\n        const oSortButton = listContainers[6];\n        if (oSortButton) {\n            const elemSortButton = document.getElementById(oSortButton.sId);\n            if (chartIndexToShow === 0) {\n                if (elemSortButton) elemSortButton.style.display = \"block\";\n            } else {\n                if (elemSortButton) elemSortButton.style.display = \"none\";\n            }\n        }\n    }\n\n    static renderer = {\n        apiVersion: 2,\n    };\n}\n"],"mappings":"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","ignoreList":[]}