/*!
 * SAPUI5
 * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.
 * 
 */
sap.ui.define(["./SearchFacetSimpleListItem","sap/m/List","sap/m/library","../../FacetTypeUI","../../../../eventlogging/UserEvents","../../../../error/errors","sap/ui/core/Element","../../../../sinaNexTS/sina/DataSource"],function(e,t,i,n,o,a,s,c){"use strict";function r(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const l=r(e);const f=i["ListMode"];const d=i["ListSeparators"];const u=n["FacetTypeUI"];const p=o["UserEventType"];const g=r(a);const h=c["DataSource"];const S=t.extend("sap.esh.search.ui.controls.SearchFacetSimpleList",{renderer:{apiVersion:2},metadata:{properties:{facetType:{type:"string",defaultValue:u.DataSource}}},constructor:function e(i,n){let o;if(n?.facetType){o={facetType:n?.facetType};delete n.facetType}t.prototype.constructor.call(this,i,n);if(o?.facetType){this.setProperty("facetType",o.facetType)}this.setMode(f.SingleSelectMaster);this.setShowSeparators(d.None);this.setIncludeItemInSelection(true);this.attachSelectionChange(e=>{if(this.getProperty("facetType")===u.Attribute){this.handleItemPress(e)}});this.attachItemPress(e=>{const t=this.getModel();const i=e.getParameter("listItem");const n=i.getBindingContext().getObject();if(t.config.searchScopeWithoutAll&&n.filterCondition instanceof h&&n.filterCondition===t.allDataSource){return}if(this.getProperty("facetType")===u.DataSource){this.handleItemPress(e)}});this.addStyleClass("sapUshellSearchFacet");this.data("sap-ui-fastnavgroup","false",true)},handleItemPress:function e(t){const i=t.getParameter("listItem");const n=i.getBindingContext().getObject();const o=this.getModel();const a=n.filterCondition;if(i.getSelected()){if(typeof o.config.adjustFilters==="function"){o.config.adjustFilters(o,a)}o.addFilterCondition(a);o.eventLogger.logEvent({type:p.FACET_FILTER_ADD,referencedAttribute:n.facetAttribute,clickedValue:n.value,clickedLabel:n.label,clickedPosition:i.getList().getItems().indexOf(i),dataSourceKey:o.getDataSource().id})}else{o.removeFilterCondition(n.filterCondition);o.eventLogger.logEvent({type:p.FACET_FILTER_DEL,referencedAttribute:n.facetAttribute,clickedValue:n.value,clickedLabel:n.label,clickedPosition:i.getList().getItems().indexOf(i),dataSourceKey:o.getDataSource().id})}},onAfterRendering:function e(i){t.prototype.onAfterRendering.call(this,i);const n=this.getDomRef();if(!n)return;const o=n.closest(".sapUshellSearchFacetIconTabBar")?.querySelector(".sapUshellSearchFacetInfoZeile");if(o){const e=s.getElementById(o.id);e.setVisible(false)}},switchFacetType:function e(t){const i={path:"items",template:new l("",{isDataSource:t===u.DataSource})};switch(t){case u.Attribute:{const e=this.getModel();let t;if(e.config&&typeof e.config.getSearchInFacetListMode==="function"){const i=e.getProperty(this.getBindingContext().getPath());try{t=e.config.getSearchInFacetListMode(i)}catch(t){const i=new g.ConfigurationExitError("getSearchInFacetListMode",e.config.applicationComponent,t);throw i}}this.setMode(t||f.MultiSelect);break}case u.DataSource:this.setMode(f.SingleSelectMaster);break;default:throw new Error(`unknown facet type ${t}.`)}this.bindItems(i);this.setProperty("facetType",t,true)}});return S});
//# sourceMappingURL=SearchFacetSimpleList.js.map