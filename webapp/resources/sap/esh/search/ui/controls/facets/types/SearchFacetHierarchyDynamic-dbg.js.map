{"version":3,"file":"SearchFacetHierarchyDynamic-dbg.js","names":["sap","ui","define","__i18n","Label","CheckBox","sap_m_library","BindingMode","__TreeView","Link","VBox","__TreeViewItem","FlexBox","_interopRequireDefault","obj","__esModule","default","i18n","FlexAlignItems","FlexJustifyContent","ListType","TreeView","TreeViewItem","SearchFacetHierarchyDynamic","extend","renderer","apiVersion","metadata","properties","showTitle","type","defaultValue","openShowMoreDialogFunction","constructor","_constructor","sId","options","VBox.prototype.constructor.call","addStyleClass","getShowTitle","header","justifyContent","SpaceBetween","alignItems","Center","items","text","addItem","treeView","treeNodeFactory","path","factory","oContext","createTreeItem","data","createShowMoreLink","getOpenShowMoreDialogFunction","_getOpenShowMoreDialogFunction","getProperty","_createShowMoreLink","oShowMoreLink","getText","press","facet","getBindingContext","getObject","openShowMoreDialog","searchModel","getModel","dimension","attributeId","selectedTabBarIndex","tabBarItems","undefined","sourceControl","oInfoZeile","oShowMoreSlot","visible","parts","formatter","isShowMoreDialog","_getShowTitle","_createTreeItem","treeNode","checkBox","selected","mode","OneWay","partiallySelected","select","event","getSource","toggleFilter","label","count","treeItem","content","attachPress","setType","Active"],"sources":["SearchFacetHierarchyDynamic.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport i18n from \"../../../i18n\";\nimport Tree from \"sap/m/Tree\";\nimport CustomTreeItem from \"sap/m/CustomTreeItem\";\nimport Label from \"sap/m/Label\";\nimport CheckBox, { CheckBox$SelectEvent } from \"sap/m/CheckBox\";\nimport { FlexAlignItems, FlexJustifyContent, ListType } from \"sap/m/library\";\nimport BindingMode from \"sap/ui/model/BindingMode\";\nimport TreeView from \"../../../tree/TreeView\";\nimport Link from \"sap/m/Link\";\nimport VBox from \"sap/m/VBox\";\nimport SearchHierarchyDynamicFacet from \"../../../hierarchydynamic/SearchHierarchyDynamicFacet\";\nimport SearchModel from \"../../../SearchModel\";\nimport Context from \"sap/ui/model/Context\";\nimport SearchHierarchyDynamicTreeNode from \"../../../hierarchydynamic/SearchHierarchyDynamicTreeNode\";\nimport TreeViewItem from \"../../../tree/TreeViewItem\";\nimport FlexBox from \"sap/m/FlexBox\";\nimport { ShowMoreDialogOptions } from \"../../OpenShowMoreDialog\";\n\n/**\n * Hierarchy facet (dynamic)\n *\n * The SearchFacetHierarchyDynamic control is used for displaying dynamic hierarchy facets.\n * Corresponding model objects:\n * - hierarchydynamic/SearchHierarchyDynamicFacet.js : facet with pointer to root hierarchy node\n * - hierarchydynamic/SearchHierarchyDynamicNode.js  : hierarchy node\n */\n\n/**\n * @namespace sap.esh.search.ui.controls\n */\nexport default class SearchFacetHierarchyDynamic extends VBox {\n    static readonly metadata = {\n        properties: {\n            showTitle: {\n                type: \"boolean\",\n                defaultValue: true,\n            },\n            openShowMoreDialogFunction: {\n                type: \"function\",\n            },\n        },\n    };\n\n    private tree: Tree;\n    constructor(sId?: string, options?: any /* Partial<$SearchFacetHierarchyDynamic> */) {\n        super(sId, options);\n        this.addStyleClass(\"sapUshellSearchFacetContainer\");\n\n        // heading\n        if (this.getShowTitle()) {\n            const header = new FlexBox({\n                justifyContent: FlexJustifyContent.SpaceBetween,\n                alignItems: FlexAlignItems.Center,\n                items: [new Label({ text: \"{title}\" })],\n            });\n            header.addStyleClass(\"sapUshellSearchFacetHeader\");\n            this.addItem(header);\n        }\n\n        // tree\n        const treeView = new TreeView(\"\", {\n            treeNodeFactory: \"{treeNodeFactory}\",\n            items: {\n                path: \"rootTreeNode/childTreeNodes\",\n                factory: (sId: string, oContext: Context) => {\n                    return this.createTreeItem(sId, oContext);\n                },\n            },\n        });\n        // define group for F6 handling (tree)\n        treeView.data(\"sap-ui-fastnavgroup\", \"false\", true /* write into DOM */);\n        this.addItem(treeView);\n\n        // show more link\n        this.createShowMoreLink();\n    }\n\n    getOpenShowMoreDialogFunction(): (options: ShowMoreDialogOptions) => Promise<void> {\n        return this.getProperty(\"openShowMoreDialogFunction\");\n    }\n\n    createShowMoreLink() {\n        const oShowMoreLink = new Link(\"\", {\n            text: i18n.getText(\"showMore\"),\n            press: () => {\n                const facet = this.getBindingContext().getObject() as SearchHierarchyDynamicFacet;\n                const openShowMoreDialog = this.getOpenShowMoreDialogFunction();\n                openShowMoreDialog({\n                    searchModel: this.getModel() as SearchModel,\n                    dimension: facet.attributeId,\n                    selectedTabBarIndex: 0,\n                    tabBarItems: undefined,\n                    sourceControl: this,\n                });\n            },\n        });\n        const oInfoZeile = new Label(\"\", {\n            text: \"\",\n        });\n        oShowMoreLink.addStyleClass(\"sapUshellSearchFacetShowMoreLink\");\n        const oShowMoreSlot = new VBox(\"\", {\n            items: [oInfoZeile, oShowMoreLink],\n            visible: {\n                parts: [{ path: \"isShowMoreDialog\" }],\n                formatter: function (isShowMoreDialog) {\n                    return !isShowMoreDialog;\n                },\n            },\n        });\n        oShowMoreSlot.addStyleClass(\"sapUshellSearchFacetShowMore\");\n        this.addItem(oShowMoreSlot);\n    }\n\n    getShowTitle(): boolean {\n        return this.getProperty(\"showTitle\");\n    }\n\n    createTreeItem(sId: string, oContext: Context): CustomTreeItem {\n        const treeNode = oContext.getObject() as SearchHierarchyDynamicTreeNode;\n        const checkBox = new CheckBox({\n            selected: {\n                path: \"selected\",\n                mode: BindingMode.OneWay,\n            },\n            partiallySelected: {\n                path: \"partiallySelected\",\n                mode: BindingMode.OneWay,\n            },\n            select: function (event: CheckBox$SelectEvent) {\n                const treeNode = event\n                    .getSource()\n                    .getBindingContext()\n                    .getObject() as SearchHierarchyDynamicTreeNode;\n                treeNode.toggleFilter();\n            },\n        });\n        const label = new Label({\n            text: {\n                parts: [{ path: \"label\" }, { path: \"count\" }],\n                formatter: function (label, count) {\n                    return count ? label + \" (\" + count + \")\" : label;\n                },\n            },\n        });\n        const treeItem = new TreeViewItem(\"\", {\n            content: [checkBox, label],\n        });\n        treeItem.attachPress(() => {\n            treeNode.toggleFilter();\n        });\n        treeItem.setType(ListType.Active);\n        return treeItem;\n    }\n\n    static renderer = {\n        apiVersion: 2,\n    };\n}\n"],"mappings":"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","ignoreList":[]}