{"version":3,"file":"SearchFacetSimpleList-dbg.js","names":["sap","ui","define","__SearchFacetSimpleListItem","List","sap_m_library","____FacetTypeUI","______eventlogging_UserEvents","__errors","Element","______sinaNexTS_sina_DataSource","_interopRequireDefault","obj","__esModule","default","SearchFacetSimpleListItem","ListMode","ListSeparators","FacetTypeUI","UserEventType","errors","DataSource","SearchFacetSimpleList","extend","renderer","apiVersion","metadata","properties","facetType","type","defaultValue","constructor","_constructor","sId","settings","facetListGenericSettings","List.prototype.constructor.call","setProperty","setMode","SingleSelectMaster","setShowSeparators","None","setIncludeItemInSelection","attachSelectionChange","oEvent","getProperty","Attribute","handleItemPress","attachItemPress","oModel","getModel","listItem","getParameter","oSelectedItem","getBindingContext","getObject","config","searchScopeWithoutAll","filterCondition","allDataSource","addStyleClass","data","_handleItemPress","getSelected","adjustFilters","addFilterCondition","eventLogger","logEvent","FACET_FILTER_ADD","referencedAttribute","facetAttribute","clickedValue","value","clickedLabel","label","clickedPosition","getList","getItems","indexOf","dataSourceKey","getDataSource","id","removeFilterCondition","FACET_FILTER_DEL","onAfterRendering","_onAfterRendering","List.prototype.onAfterRendering.call","domRef","getDomRef","infoZeile","closest","querySelector","oInfoZeile","getElementById","setVisible","switchFacetType","_switchFacetType","items","path","template","isDataSource","listMode","getSearchInFacetListMode","currentItemData","getPath","err","oError","ConfigurationExitError","applicationComponent","MultiSelect","Error","bindItems"],"sources":["SearchFacetSimpleList.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport SearchFacetSimpleListItem from \"./SearchFacetSimpleListItem\";\nimport List, { $ListSettings } from \"sap/m/List\";\nimport { ListMode } from \"sap/m/library\";\nimport { ListSeparators } from \"sap/m/library\";\nimport SearchModel from \"sap/esh/search/ui/SearchModel\";\nimport Label from \"sap/m/Label\";\nimport { ListBase$ItemPressEvent, ListBase$SelectionChangeEvent } from \"sap/m/ListBase\";\nimport { FacetTypeUI } from \"../../FacetTypeUI\";\nimport { UserEventType } from \"../../../../eventlogging/UserEvents\";\nimport FacetItem from \"../../../../FacetItem\";\nimport errors from \"../../../../error/errors\";\nimport Element from \"sap/ui/core/Element\";\nimport { DataSource } from \"../../../../sinaNexTS/sina/DataSource\";\n\nexport interface $SearchFacetSimpleListSettings extends $ListSettings {\n    facetType?: FacetTypeUI;\n}\n\n/**\n * Generic facet to be used for 'data sources' or 'attributes' (see property `facetType`)\n */\n\n/**\n * @namespace sap.esh.search.ui.controls\n */\nexport default class SearchFacetSimpleList extends List {\n    static readonly metadata = {\n        properties: {\n            facetType: {\n                type: \"string\",\n                defaultValue: FacetTypeUI.DataSource,\n            },\n        },\n    };\n\n    constructor(sId?: string, settings?: Partial<$SearchFacetSimpleListSettings>) {\n        let facetListGenericSettings;\n        if (settings?.facetType) {\n            facetListGenericSettings = { facetType: settings?.facetType };\n            delete settings.facetType;\n        }\n        super(sId, settings);\n\n        if (facetListGenericSettings?.facetType) {\n            this.setProperty(\"facetType\", facetListGenericSettings.facetType);\n        }\n\n        this.setMode(ListMode.SingleSelectMaster);\n        this.setShowSeparators(ListSeparators.None);\n        this.setIncludeItemInSelection(true);\n        this.attachSelectionChange((oEvent: ListBase$SelectionChangeEvent) => {\n            if (this.getProperty(\"facetType\") === FacetTypeUI.Attribute) {\n                this.handleItemPress(oEvent);\n            }\n        });\n        this.attachItemPress((oEvent: ListBase$ItemPressEvent): void => {\n            const oModel = this.getModel() as SearchModel;\n            const listItem = oEvent.getParameter(\"listItem\");\n            const oSelectedItem = listItem.getBindingContext().getObject() as FacetItem;\n            if (\n                oModel.config.searchScopeWithoutAll &&\n                oSelectedItem.filterCondition instanceof DataSource &&\n                oSelectedItem.filterCondition === oModel.allDataSource\n            ) {\n                return;\n            }\n            if (this.getProperty(\"facetType\") === FacetTypeUI.DataSource) {\n                this.handleItemPress(oEvent);\n            }\n        });\n        this.addStyleClass(\"sapUshellSearchFacet\");\n\n        // define group for F6 handling\n        this.data(\"sap-ui-fastnavgroup\", \"false\", true /* write into DOM */);\n    }\n\n    handleItemPress(oEvent: ListBase$SelectionChangeEvent): void {\n        const listItem = oEvent.getParameter(\"listItem\");\n        const oSelectedItem = listItem.getBindingContext().getObject() as FacetItem;\n        const oModel = this.getModel() as SearchModel;\n        const filterCondition = oSelectedItem.filterCondition;\n        if (listItem.getSelected()) {\n            // when filter conditions are changed, give a callback to adjust the conditions\n            if (typeof oModel.config.adjustFilters === \"function\") {\n                oModel.config.adjustFilters(oModel, filterCondition);\n            }\n            oModel.addFilterCondition(filterCondition);\n\n            oModel.eventLogger.logEvent({\n                type: UserEventType.FACET_FILTER_ADD,\n                referencedAttribute: oSelectedItem.facetAttribute,\n                clickedValue: oSelectedItem.value,\n                clickedLabel: oSelectedItem.label,\n                clickedPosition: (listItem as any).getList().getItems().indexOf(listItem),\n                dataSourceKey: oModel.getDataSource().id,\n            });\n        } else {\n            oModel.removeFilterCondition(oSelectedItem.filterCondition);\n            oModel.eventLogger.logEvent({\n                type: UserEventType.FACET_FILTER_DEL,\n                referencedAttribute: oSelectedItem.facetAttribute,\n                clickedValue: oSelectedItem.value,\n                clickedLabel: oSelectedItem.label,\n                clickedPosition: (listItem as any).getList().getItems().indexOf(listItem),\n                dataSourceKey: oModel.getDataSource().id,\n            });\n        }\n    }\n\n    onAfterRendering(oEvent): void {\n        super.onAfterRendering(oEvent);\n\n        // Use native DOM APIs to find the info row\n        const domRef = this.getDomRef();\n        if (!domRef) return;\n\n        const infoZeile = domRef\n            .closest(\".sapUshellSearchFacetIconTabBar\")\n            ?.querySelector(\".sapUshellSearchFacetInfoZeile\");\n\n        if (infoZeile) {\n            const oInfoZeile = Element.getElementById(infoZeile.id) as Label;\n            oInfoZeile.setVisible(false);\n        }\n    }\n\n    switchFacetType(facetType: FacetTypeUI): void {\n        const items = {\n            path: \"items\", // children of \"/facets\" (see SearchModel \"/facets/items\")\n            template: new SearchFacetSimpleListItem(\"\", {\n                isDataSource: facetType === FacetTypeUI.DataSource,\n            }),\n        };\n        switch (facetType) {\n            // attribute facet\n            case FacetTypeUI.Attribute: {\n                const oModel = this.getModel() as SearchModel;\n                let listMode;\n                if (oModel.config && typeof oModel.config.getSearchInFacetListMode === \"function\") {\n                    const currentItemData = oModel.getProperty(this.getBindingContext().getPath());\n                    try {\n                        listMode = oModel.config.getSearchInFacetListMode(currentItemData);\n                    } catch (err) {\n                        const oError = new errors.ConfigurationExitError(\n                            \"getSearchInFacetListMode\",\n                            oModel.config.applicationComponent,\n                            err\n                        );\n                        throw oError;\n                    }\n                }\n                this.setMode(listMode || ListMode.MultiSelect);\n                break;\n            }\n            // datasource facet\n            case FacetTypeUI.DataSource:\n                this.setMode(ListMode.SingleSelectMaster);\n                break;\n            default:\n                // unknown facet type\n                throw new Error(`unknown facet type ${facetType}.`);\n        }\n        this.bindItems(items);\n        this.setProperty(\"facetType\", facetType, true); // this validates and stores the new value\n    }\n\n    static renderer = {\n        apiVersion: 2,\n    };\n}\n"],"mappings":"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","ignoreList":[]}