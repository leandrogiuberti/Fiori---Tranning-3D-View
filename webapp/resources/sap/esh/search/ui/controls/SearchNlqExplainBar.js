/*!
 * SAPUI5
 * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.
 * 
 */
sap.ui.define(["../i18n","sap/m/Toolbar","sap/m/library","sap/m/Button","sap/m/Popover","sap/m/FormattedText","sap/m/Link","sap/m/ToolbarSpacer","sap/m/MessageToast"],function(e,t,l,n,s,o,i,a,r){"use strict";function p(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const d=p(e);const c=l["PlacementType"];const h=l["ToolbarDesign"];class x extends t{_aiPopover;_nlqViewAllPopover;_nlqExplainText;constructor(e,t){super(e,t);this.setProperty("design",h.Info);this.addStyleClass("sapUshellSearchNlqExplainBar");this._aiPopover=this.assembleAiPopover();this._nlqViewAllPopover=this.assembleNlqViewAllPopover();const l=new n(this.getId()+"-nlqExplainButton",{icon:"sap-icon://ai",tooltip:"{i18n>nlqExplainButtonTooltip}",press:()=>{this._aiPopover.openBy(l)}});l.addStyleClass("sapUshellSearchNlqExplainButton");this.addContent(l);const s=new o(this.getId()+"-nlqExplainText",{htmlText:{parts:[{path:"/nlqResult/filterDescription"}],formatter:e=>{if(!e){return d.getText("nlqNoFilter")}let t=e.replace(/<br\s*\/?>/gi," ");t=t.replace(/<(?!\/?(?:strong|em)\b)[^>]*>/gi,"");return t}}}).addStyleClass("sapUshellSearchNlqFilterFormattedTextEllipsis");this._nlqExplainText=s;this.addContent(s);const r=new a(this.getId()+"-nlqExplainToolbarSpacer",{});this.addContent(r);const p=new i(this.getId()+"-nlqExplainFilterLink",{text:"View All",tooltip:"{i18n>nlqExplainButtonTooltip}",press:()=>{this._nlqViewAllPopover.setModel(this.getModel());this._nlqViewAllPopover.setModel(this.getModel("i18n"),"i18n");this._nlqViewAllPopover.openBy(p)}});p.addStyleClass("sapUshellSearchNlqExplainLink");this.addContent(p);this.assembleNlqFilterCopyButton()}assembleNlqViewAllPopover(){const e=new o({htmlText:{parts:[{path:"/nlqResult/filterDescription"}],formatter:e=>{if(!e){return d.getText("nlqNoFilter")}return e}}});e.addStyleClass("sapUiSmallMargin");const t=new s({showHeader:false,content:[e],placement:c.Bottom});t.addStyleClass("sapUshellSearchNlqExplainPopover");return t}assembleAiPopover(){const e=new o({htmlText:"Results on this page have been filtered by artificial intelligence (AI) technologies.<br>"+"<br>Verify results before use."});e.addStyleClass("sapUiSmallMargin");const l=new n({text:"Close",press:()=>{this._aiPopover.close()}});const i=new s({title:"Created with AI",content:[e],placement:c.Bottom,contentWidth:"400px",footer:new t({design:h.Auto,content:[new a,l]})});i.addStyleClass("sapUshellSearchNlqExplainPopover");return i}assembleNlqFilterCopyButton(){const e=new n(this.getId()+"-nlqExplainFilterCopyButton",{icon:"sap-icon://copy",type:"Transparent",tooltip:"{i18n>nlqcopyText}",press:()=>{const e=this._nlqExplainText.getDomRef();const t=(e?.textContent||"").replace(/\s+/g," ").trim();if(window.navigator.clipboard){window.navigator.clipboard.writeText(t).then(()=>{r.show("Copied to clipboard")}).catch(e=>{r.show("Copy failed: "+e)})}else{r.show("Clipboard API not available")}}});this.addContent(e)}static renderer={apiVersion:2}}return x});
//# sourceMappingURL=SearchNlqExplainBar.js.map