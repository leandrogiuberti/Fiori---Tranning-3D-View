/*!
 * SAPUI5
 * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.
 * 
 */
sap.ui.define(["sap/ui/core/Control","./TypeGuardForControls","sap/m/Tree","sap/m/StandardTreeItem","sap/ui/model/json/JSONModel","sap/ui/codeeditor/CodeEditor","sap/ui/layout/VerticalLayout","sap/m/Label","sap/m/Input","../i18n","sap/ui/layout/form/SimpleForm","sap/m/Title","sap/m/Bar","sap/m/ToggleButton"],function(e,t,o,a,i,n,s,r,l,d,p,g,u,c){"use strict";function m(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const y=t["typesafeRender"];const h=m(d);const T=e.extend("sap.esh.search.ui.controls.SearchQueryExplanation",{renderer:{apiVersion:2,render(e,t){const s=`${t.getId()}-filterConditions`;const r=t.getProperty("data");const l=t.getAggregation("mainView");const d=t.getAggregation("toolbar");const p=new c(`${t.getId()}-nlqRawDataToggleButton`,{text:h.getText("showNlqRawData"),press:()=>{const e=p.getPressed();v.setVisible(e);m.setVisible(e);if(e){p.setText(h.getText("hideNlqRawData"));b.collapseAll()}else{p.setText(h.getText("showNlqRawData"));b.expandToLevel(1)}}}).addStyleClass("sapUiLargeMarginBegin");d.addContentRight(p);const u=new i({dataSource:r.scope,searchTerm:r.query,query:JSON.stringify(t.getProperty("data"))});const m=new g(`${t.getId()}-nlqRawDataTitle`,{text:h.getText("nlqRawData"),visible:false}).addStyleClass("sapUiSmallMarginBegin").addStyleClass("sapUiSmallMarginTop");const f=new g(`${t.getId()}-filterConditionsTitle`,{text:h.getText("filterConditions")}).addStyleClass("sapUiSmallMarginBegin");const C={dataSource:r.scope,searchTerm:r.query,items:T.convertFilterForTree(r?.filter)};u.setProperty("/items",C);let w=0;const x={items:{path:"nlqData>/items",template:new a(`${s}-${w++}`,{title:"{nlqData>text}"})}};const b=new o(`${s}-tree`,x);setTimeout(()=>{b.expandToLevel(1)},0);t.setAggregation("conditionTree",b);const S="text";const $={type:S,value:"{nlqData>/query}",height:"100rem",visible:false};const v=new n(`${s}-editor`,$).addStyleClass("sapUiSmallMarginBegin");t.setAggregation("conditionEditor",v);const q=t.getAggregation("form");l.addContent(q);l.addContent(f);l.addContent(b);l.addContent(m);l.addContent(v);t.setModel(u,"nlqData");y(t.getAggregation("toolbar"),e);y(l,e)}},metadata:{properties:{data:{type:"object"}},aggregations:{mainView:{type:"sap.ui.layout.VerticalLayout",multiple:false,visibility:"hidden"},toolbar:{type:"sap.m.Bar",multiple:false,visibility:"hidden"},form:{type:"sap.ui.layout.form.SimpleForm",multiple:false,visibility:"hidden"},conditionEditor:{type:"sap.ui.codeeditor.CodeEditor",multiple:false,visibility:"hidden"},conditionTree:{type:"sap.m.Tree",multiple:false,visibility:"hidden"}}},constructor:function t(o,a){e.prototype.constructor.call(this,o,a);const i=new s(`${this.getId()}-container`,{width:"100%"});const n=new u(`${this.getId()}-toolbar`);i.addContent(n);const d={editable:false,layout:"ResponsiveGridLayout",singleContainerFullSize:true};const g=new p(`${this.getId()}-form`,d);g.addContent(new r(`${this.getId()}-dsLabel`,{text:h.getText("dataSource")}));g.addContent(new l(`${this.getId()}-dsValue`,{value:"{nlqData>/dataSource}",editable:false}));g.addContent(new r(`${this.getId()}-searchTermLabel`,{text:h.getText("searchTerm")}));g.addContent(new l(`${this.getId()}-searchTermValue`,{value:"{nlqData>/searchTerm}",editable:false}));this.setAggregation("toolbar",n);this.setAggregation("form",g);this.setAggregation("mainView",i)}});T.convertFilterForTree=function e(t){const o=[];if(t?.length>0){for(const e of t){if(e?.OperatorType){o.push({text:e.OperatorType,nodes:T.convertFilterForTree(e?.SubFilters)})}else{const t=`${e.ConditionAttribute} ${e.ConditionOperator} ${e.ConditionValue}`;o.push({text:t,nodes:[]})}}}else if(t?.OperatorType){o.push({text:t.OperatorType,nodes:T.convertFilterForTree(t?.SubFilters)})}else if(t?.ConditionOperator){const e=`${t.ConditionAttribute} ${t.ConditionOperator} ${t.ConditionValue}`;o.push({text:e,nodes:[]})}else{o.push({text:h.getText("noFilterConditions"),nodes:[]})}return o};return T});
//# sourceMappingURL=SearchQueryExplanation.js.map