{"version":3,"file":"SearchLink.js","names":["sap","ui","define","SearchHelper","Link","___sinaNexTS_sina_NavigationTarget","___uiConstants","NavigationTarget","initialValueUnicode","SearchLink","extend","renderer","apiVersion","metadata","properties","navigationTarget","type","group","constructor","_constructor","sId","settings","Link.prototype.constructor.call","this","_pressHandlerAttached","addStyleClass","pressHandlerSearchLink","_pressHandlerSearchLink","oEvent","navTarget","getNavigationTarget","model","getModel","config","clearObjectSelectionOnSearchLinkClick","resetKeyStore","targetUrl","performNavigation","trackingOnly","event","preventDefault","setNavigationTarget","_setNavigationTarget","setProperty","text","getText","length","targetFunction","navigationTargetHref","navigationTargetTarget","target","navigationTargetIcon","icon","getIcon","setIcon","navigationTargetTooltip","tooltip","getTooltip","setTooltip","setText","_setText","sText","_getNavigationTarget","getProperty","setEnabled","_setEnabled","bEnabled","_setIcon","sIcon","startsWith","Link.prototype.setIcon.call","onAfterRendering","_onAfterRendering","Link.prototype.onAfterRendering.call","isDestroyed","attachPress","linkDomRef","getDomRef","boldTagUnescaper","calculateTooltipForwordEllipsis","_handlePress","localName","oTarget","parentElement","prototype","apply","arguments","onsapenter","_onsapenter","onclick","_onclick"],"sources":["SearchLink.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport * as SearchHelper from \"sap/esh/search/ui/SearchHelper\";\nimport Icon from \"sap/ui/core/Icon\";\nimport { URI as sapURI } from \"sap/ui/core/library\";\nimport Link from \"sap/m/Link\";\nimport { NavigationTarget } from \"../sinaNexTS/sina/NavigationTarget\";\nimport { MetadataOptions, PropertyBindingInfo } from \"sap/ui/base/ManagedObject\";\nimport { $ControlSettings } from \"sap/ui/core/Control\";\nimport { initialValueUnicode } from \"../uiConstants\";\nimport { NavigationTarget as NavigationTargetApi } from \"../ResultSetApi\"; // reduced sina-NavigationTarget ()\nimport type SearchModel from \"../SearchModel\";\n\nexport interface $SearchLinkSettings extends $ControlSettings {\n    navigationTarget: NavigationTarget | PropertyBindingInfo | NavigationTargetApi;\n    icon?: Icon;\n    href?: string;\n    enabled?: boolean;\n    target?: string;\n    text?: string | PropertyBindingInfo;\n    wrapping?: boolean;\n}\n\n/**\n * @namespace sap.esh.search.ui.controls\n */\nexport default class SearchLink extends Link {\n    static readonly metadata: MetadataOptions = {\n        properties: {\n            navigationTarget: {\n                type: \"object\",\n                group: \"Data\",\n            },\n        },\n    };\n\n    private _pressHandlerAttached = false;\n\n    constructor(sId?: string, settings?) {\n        super(sId, settings);\n        this.addStyleClass(\"sapUshellSearchLink\");\n    }\n\n    pressHandlerSearchLink(oEvent): void {\n        const navTarget = this.getNavigationTarget();\n        const model = this.getModel() as SearchModel;\n        if (model && model.config?.clearObjectSelectionOnSearchLinkClick) {\n            (this.getModel() as SearchModel).resetKeyStore();\n        }\n\n        if (navTarget.targetUrl) {\n            // 1) navigation target has target url\n            // - navigation itself is performed by clicking on <a> tag\n            // - performNavigation is just called for tracking\n            navTarget.performNavigation({\n                trackingOnly: true,\n                event: oEvent,\n            });\n        } else {\n            // 2) no target url instead there is a js target function\n            // performNavigation does tracking + navigation (window.open...)\n            oEvent.preventDefault(); // really necessary?\n            navTarget.performNavigation({\n                event: oEvent,\n            });\n        }\n        // oEvent.preventDefault does work for\n        // -desktop\n        // -mobile in case targetUrl=empty\n        // oEvent.preventDefault does not work for mobile in case targetUrl is filled\n        // reason: for mobile there is a UI5 async event simulation so preventDefault does not work\n        // for sap.m.Link this a special logic which makes preventDefault working for mobile in case\n        // targetUrl=empty (href='#')\n    }\n\n    setNavigationTarget(navigationTarget: NavigationTarget): this {\n        this.setProperty(\"navigationTarget\", navigationTarget);\n\n        // calculate enabled\n        const text = this.getText();\n        if (\n            ((typeof navigationTarget?.targetUrl !== \"string\" || navigationTarget?.targetUrl?.length === 0) &&\n                typeof navigationTarget?.targetFunction !== \"function\") ||\n            !(typeof text === \"string\" && text !== initialValueUnicode) // dash\n        ) {\n            this.setProperty(\"enabled\", false);\n        } else {\n            this.setProperty(\"enabled\", true);\n        }\n\n        // set href\n        const navigationTargetHref = navigationTarget?.targetUrl;\n        if (typeof navigationTargetHref === \"string\" && navigationTargetHref?.length > 0) {\n            this.setProperty(\"href\", navigationTargetHref);\n        } else {\n            this.setProperty(\"href\", \"\");\n        }\n\n        // set target\n        const navigationTargetTarget = navigationTarget?.target;\n        if (typeof navigationTargetTarget === \"string\" && navigationTargetTarget?.length > 0) {\n            this.setProperty(\"target\", navigationTargetTarget);\n        } else {\n            this.setProperty(\"target\", \"_self\");\n        }\n\n        // set icon\n        const navigationTargetIcon = navigationTarget?.icon;\n        if (!this.getIcon() && typeof navigationTargetIcon === \"string\" && navigationTargetIcon?.length > 0) {\n            this.setIcon(navigationTargetIcon);\n        }\n\n        // set tooltip\n        const navigationTargetTooltip = navigationTarget?.tooltip;\n        if (\n            !this.getTooltip() &&\n            typeof navigationTargetTooltip === \"string\" &&\n            navigationTargetTooltip?.length > 0\n        ) {\n            this.setTooltip(navigationTargetTooltip);\n        }\n\n        return this;\n    }\n\n    setText(sText?: string): this {\n        this.setProperty(\"text\", sText);\n        const navigationTarget = this.getNavigationTarget();\n        if (!(navigationTarget instanceof NavigationTarget)) {\n            return this;\n        }\n        if (\n            ((typeof navigationTarget?.targetUrl !== \"string\" || navigationTarget?.targetUrl?.length === 0) &&\n                typeof navigationTarget?.targetFunction !== \"function\") ||\n            !(typeof sText === \"string\" && sText !== initialValueUnicode) // dash\n        ) {\n            this.setProperty(\"enabled\", false);\n        }\n        return this;\n    }\n\n    getNavigationTarget(): NavigationTarget {\n        return this.getProperty(\"navigationTarget\");\n    }\n\n    setEnabled(bEnabled?: boolean): this {\n        if (bEnabled === true) {\n            const navigationTarget = this.getNavigationTarget();\n            const text = this.getText();\n            if (\n                (navigationTarget instanceof NavigationTarget &&\n                    (typeof navigationTarget.targetUrl !== \"string\" ||\n                        navigationTarget.targetUrl?.length === 0) &&\n                    typeof navigationTarget.targetFunction !== \"function\") ||\n                !(typeof text === \"string\" && text !== initialValueUnicode) // dash\n            ) {\n                this.setProperty(\"enabled\", false);\n                return this;\n            }\n        }\n        this.setProperty(\"enabled\", bEnabled);\n        return this;\n    }\n\n    setIcon(sIcon?: sapURI): this {\n        if (!this.getIcon() && typeof sIcon === \"string\" && sIcon.startsWith(\"sap-icon://\")) {\n            super.setIcon(sIcon);\n        }\n        return this;\n    }\n\n    onAfterRendering(oEvent): void {\n        super.onAfterRendering(oEvent);\n        if (this.isDestroyed()) {\n            return;\n        }\n        if (!this._pressHandlerAttached) {\n            this.attachPress(this.pressHandlerSearchLink, this);\n            this._pressHandlerAttached = true;\n        }\n\n        const linkDomRef = this.getDomRef() as HTMLElement;\n        // recover bold tag with the help of text() in a safe way\n        SearchHelper.boldTagUnescaper(linkDomRef);\n        SearchHelper.calculateTooltipForwordEllipsis(linkDomRef);\n    }\n\n    _handlePress(oEvent) {\n        // in case of highlighting the target property of the event is a <b> element inside the Link.\n        // therefore setting it manually to Links DomRef / parentElement of the target.\n        if (oEvent.target.localName === \"b\") {\n            const oTarget = this.getDomRef() ? this.getDomRef() : oEvent.target.parentElement;\n            oEvent.target = oTarget;\n        }\n        // eslint-disable-next-line prefer-rest-params\n        Link.prototype[\"_handlePress\"].apply(this, arguments);\n    }\n\n    // overwrite necessary because in sap.m.Link: Link.prototype.onsapenter = Link.prototype._handlePress;\n    onsapenter(oEvent) {\n        this._handlePress(oEvent);\n    }\n\n    // overwrite necessary because in sap.m.Link: Link.prototype.onsapenter = Link.prototype._handlePress;\n    onclick(oEvent) {\n        this._handlePress(oEvent);\n    }\n\n    static renderer = {\n        apiVersion: 2,\n    };\n}\n"],"mappings":"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","ignoreList":[]}