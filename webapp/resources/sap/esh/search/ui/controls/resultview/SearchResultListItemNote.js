/*!
 * SAPUI5
 * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.
 * 
 */
sap.ui.define(["../../i18n","./SearchResultListItem","./SearchText","sap/ui/core/IconPool"],function(t,e,n,s){"use strict";function i(t){return t&&t.__esModule&&typeof t.default!=="undefined"?t.default:t}const r=i(t);const o=i(e);const a=i(n);const l=o.extend("sap.esh.search.ui.controls.SearchResultListItemNote",{renderer:{apiVersion:2},_renderContentContainer:function t(e){e.openStart("div",this.getId()+"-content");e.class("sapUshellSearchResultListItem-Content");e.openEnd();this._renderTitleContainer(e);this._renderAttributesContainer(e);e.close("div")},_renderTitleContainer:function t(e){const n=this.getModel();if(!n.config.optimizeForValueHelp){e.openStart("div",this.getId()+"-title-and-image-container");e.class("sapUshellSearchResultListItem-TitleAndImageContainer");e.openEnd()}e.openStart("div",this.getId()+"-title-container");e.class("sapUshellSearchResultListItem-TitleContainer");if(n.config.optimizeForValueHelp){e.class("sapUshellSearchResultListItem-TitleContainerValueHelp")}e.openEnd();this._renderCheckbox(e);const s=this.getProperty("titleUrl");const i=this.getAggregation("_titleLink");i.setHref(s);i.setText(this.getProperty("title"));if(s.length===0){i.setEnabled(false)}e.renderControl(i);const r=this.getAggregation("_typeText");r.setText(this.getProperty("Type"));e.renderControl(r);e.close("div");if(!n.config.optimizeForValueHelp){this._renderImageForPhone(e)}e.close("div")},_renderAttributesContainer:function t(e){e.openStart("div",this.getId()+"-attributes-expand-container");e.class("sapUshellSearchResultListItemDoc-AttributesExpandContainer");const n=this.getProperty("expanded");if(n){e.class("sapUshellSearchResultListItem-AttributesExpanded")}e.openEnd();e.openStart("div",this.getId()+"-attributes-and-actions");e.class("sapUshellSearchResultListItem-AttributesAndActions");e.openEnd();e.openStart("ul",this.getId()+"-attributes");e.class("sapUshellSearchResultListItem-Attributes");e.openEnd();this._renderThumbnailSnippetContainer(e);this._renderDocAttributesContainer(e);e.openStart("div",this.getId()+"-expand-spacer-attribute");e.class("sapUshellSearchResultListItem-ExpandSpacerAttribute");e.attr("aria-hidden","true");e.openEnd();e.close("div");e.close("ul");this._renderRelatedObjectsToolbar(e);e.close("div");e.close("div")},_renderImageForPhone:function t(e){if(this.getProperty("imageUrl")&&this.getProperty("containsThumbnail")===true){e.openStart("div",this.getId()+"-title-image");e.class("sapUshellSearchResultListItem-TitleImage");e.openEnd();e.openStart("div",this.getId()+"-image-container-alignment-helper");e.class("sapUshellSearchResultListItem-ImageContainerAlignmentHelper");e.openEnd();e.close("div");e.openStart("img",this.getId()+"-image");e.class("sapUshellSearchResultListItem-Image");e.attr("src",this.getProperty("imageUrl"));e.openEnd();e.close("img");e.close("div")}},_renderDocAttributesContainer:function t(e){e.openStart("div",this.getId()+"-attributes-container");e.class("sapUshellSearchResultListItemNote-AttributesContainer");e.openEnd();const n=this.getProperty("attributes");this._renderAllAttributes(e,n);e.close("div")},_renderThumbnailSnippetContainer:function t(e){e.openStart("div",this.getId()+"-thumbnail-snippet-container");e.class("sapUshellSearchResultListItemNote-ThumbnailSnippetContainer");e.openEnd();this._renderSnippetContainer(e);e.close("div")},_renderSnippetContainer:function t(e){const n=this.getProperty("attributes");for(let t=0;t<n.length;t++){const s=n[t];if(s.longtext){const n=new a(`${this.getId()}_snippet-${t}-longtext`);n.setText(s.value);n.addStyleClass("sapUshellSearchResultListItemDoc-Snippet");e.renderControl(n)}}},_renderAllAttributes:function t(e,n){let s;let i;let r;let l;let c=4;if(this.getProperty("imageUrl")){c--}this.destroyAggregation("_attributeValues");for(let t=0,d=0;d<c&&t<n.length;t++){s=n[t];if(s.isTitle||s.longtext){continue}if(!s.value){continue}i=s.name;r=s.value;if(i===undefined||r===undefined){continue}if(!r||r===""){r=o.noValue}l=new a(`${this.getId()}_${t}_${d}_noteText`,{text:r});l.addStyleClass("sapUshellSearchResultListItemNote-AttributeValue");l.addStyleClass("sapUshellSearchResultListItem-MightOverflow");e.renderControl(l);this.addAggregation("_attributeValues",l,true);d++}},_getExpandAreaObjectInfo:function t(){const e=this.getDomRef();const n=e.querySelector(".sapUshellSearchResultListItemDoc-AttributesExpandContainer");const s=e.querySelector(".sapUshellSearchResultListItem-RelatedObjectsToolbar");let i=false;if(s&&window.getComputedStyle(s).display==="none"){s.style.display="block";i=true}const r=n?n.offsetHeight:0;const o=(()=>{const t=e.querySelector(".sapUshellSearchResultListItem-AttributesAndActions");return t?t.offsetHeight:0})();if(i&&s){s.style.display=""}const a=[];e.querySelectorAll(".sapUshellSearchResultListItem-GenericAttribute").forEach(t=>{const e=t;const n=Number(window.getComputedStyle(e).order);if(n>2){a.push(e)}});const l=200;const c=l/10;const d={resultListItem:e,attributesExpandContainer:n,currentHeight:r,expandedHeight:o,elementsToFadeInOrOut:a,expandAnimationDuration:l,fadeInOrOutAnimationDuration:c,relatedObjectsToolbar:s};return d},hideDetails:function t(){const e=this.getDomRef();if(!this.isShowingDetails()){return}const n=this._getExpandAreaObjectInfo();const i=e.querySelector(".sapUshellSearchResultListItem-Attributes");let o=0;if(i){const t=window.getComputedStyle(i);o=i.offsetHeight+parseFloat(t.marginTop)+parseFloat(t.marginBottom)}const a=n.attributesExpandContainer;const l=n.elementsToFadeInOrOut;const c=n.expandAnimationDuration;const d=n.fadeInOrOutAnimationDuration;const u=a.animate([{height:a.offsetHeight+"px"},{height:o+"px"}],{duration:c,fill:"forwards",easing:"ease"});const h=[];for(const t of l){const e=t.animate([{opacity:getComputedStyle(t).opacity},{opacity:"0"}],{duration:d,fill:"forwards",easing:"ease"});h.push(e.finished.then(()=>e))}Promise.all([u.finished,...h]).then(()=>{this.setProperty("expanded",false,true);a.classList.remove("sapUshellSearchResultListItem-AttributesExpanded");l.forEach(t=>{t.style.opacity=""});const t=s.getIconURI("slim-arrow-down");const e=this.getAggregation("_expandButton");if(e){e.setTooltip(r.getText("showDetailBtn_tooltip"));e.setIcon(t)}})}});return l});
//# sourceMappingURL=SearchResultListItemNote.js.map