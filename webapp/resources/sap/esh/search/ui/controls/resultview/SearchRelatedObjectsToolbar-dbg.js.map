{"version":3,"file":"SearchRelatedObjectsToolbar-dbg.js","names":["sap","ui","define","__i18n","Toolbar","sap_m_library","Button","ToolbarLayoutData","ToolbarSpacer","ActionSheet","InvisibleText","IconPool","ItemNavigation","Control","____sinaNexTS_sina_NavigationTarget","__SearchLink","_interopRequireDefault","obj","__esModule","default","i18n","ToolbarDesign","ButtonType","PlacementType","NavigationTarget","SearchLink","SearchRelatedObjectsToolbar","extend","renderer","apiVersion","render","oRm","oControl","openStart","class","oModel","getModel","config","optimizeForValueHelp","openEnd","renderControl","getAggregation","_renderToolbar","close","metadata","properties","itemId","navigationObjects","type","multiple","positionInList","aggregations","_relatedObjectActionsToolbar","visibility","_ariaDescriptionForLinks","constructor","_constructor","sId","settings","Control.prototype.constructor.call","relatedObjectActionsToolbar","getId","design","Solid","data","addStyleClass","addEventDelegate","onAfterRendering","layoutToolbarElements","bind","setAggregation","text","getText","window","addEventListener","exit","_exit","args","prototype","apply","_overFlowActionSheet","destroy","destroyContent","getProperty","Array","isArray","length","navigationObjectsLinks","map","navigationObject","i","link","navigationTarget","layoutData","shrinkable","toolbarSpacer","addContent","forEach","_overFlowButton","icon","getIconURI","setType","Transparent","placement","Top","attachPress","isOpen","openBy","_onAfterRendering","_addAriaInformation","_layoutToolbarElements","isDestroyed","isDestroyStarted","getDomRef","toolbarElem","toolbarWidth","offsetWidth","getComputedStyle","display","overFlowButtonElem","style","toolbarElementsWidth","pressButton","event","_navigationObject","performNavigation","toolbarElements","from","querySelectorAll","element","elementWidth","parseInt","marginLeft","marginRight","_toolbarElementsWidth","overFlowButtonWidth","destroyButtons","button","addButton","getButtons","_setupItemNavigation","_theItemNavigation","setCycling","setRootDomRef","itemDomRefs","content","getContent","filter","item","hasStyleClass","domRef","hasAttribute","tabindex","setAttribute","push","overFlowButtonDomRef","setItemDomRefs","navigationLinks","isOverFlowButtonVisible","offsetParent","ariaDescriptionId","el","ariaDescription","getAttribute"],"sources":["SearchRelatedObjectsToolbar.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport i18n from \"../../i18n\";\nimport Toolbar from \"sap/m/Toolbar\";\nimport { ToolbarDesign, ButtonType } from \"sap/m/library\";\nimport Button from \"sap/m/Button\";\nimport Event from \"sap/ui/base/Event\";\nimport ToolbarLayoutData from \"sap/m/ToolbarLayoutData\";\nimport ToolbarSpacer from \"sap/m/ToolbarSpacer\";\nimport ActionSheet from \"sap/m/ActionSheet\";\nimport { PlacementType } from \"sap/m/library\";\nimport InvisibleText from \"sap/ui/core/InvisibleText\";\nimport IconPool from \"sap/ui/core/IconPool\";\nimport ItemNavigation from \"sap/ui/core/delegate/ItemNavigation\";\nimport Control, { $ControlSettings } from \"sap/ui/core/Control\";\nimport SearchModel from \"sap/esh/search/ui/SearchModel\";\nimport RenderManager from \"sap/ui/core/RenderManager\";\nimport { NavigationTarget } from \"../../sinaNexTS/sina/NavigationTarget\";\nimport SearchLink from \"../SearchLink\";\n\nexport interface $SearchRelatedObjectsToolbarSettings extends $ControlSettings {\n    itemId: string;\n    navigationObjects: Array<NavigationTarget>;\n    positionInList: number;\n}\n\n/**\n * @namespace sap.esh.search.ui.controls\n */\nexport default class SearchRelatedObjectsToolbar extends Control {\n    private _theItemNavigation: ItemNavigation;\n    private _overFlowButton: Button;\n    private _overFlowActionSheet: ActionSheet; // items of overFlowButton\n\n    toolbarWidth: number;\n\n    static readonly metadata = {\n        properties: {\n            itemId: \"string\",\n            navigationObjects: {\n                type: \"object\",\n                multiple: true,\n            },\n            positionInList: \"int\",\n        },\n        aggregations: {\n            _relatedObjectActionsToolbar: {\n                type: \"sap.m.Toolbar\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n            _ariaDescriptionForLinks: {\n                type: \"sap.ui.core.InvisibleText\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n        },\n    };\n\n    constructor(sId?: string, settings?: $SearchRelatedObjectsToolbarSettings) {\n        super(sId, settings);\n\n        const relatedObjectActionsToolbar = new Toolbar(`${this.getId()}--toolbar`, {\n            design: ToolbarDesign.Solid,\n        });\n        relatedObjectActionsToolbar.data(\"sap-ui-fastnavgroup\", \"false\", true /* write into DOM */);\n        relatedObjectActionsToolbar.addStyleClass(\n            \"sapUshellSearchResultListItem-RelatedObjectsToolbar-Toolbar\"\n        );\n        relatedObjectActionsToolbar.addEventDelegate({\n            onAfterRendering: this.layoutToolbarElements.bind(this),\n        });\n        this.setAggregation(\"_relatedObjectActionsToolbar\", relatedObjectActionsToolbar);\n\n        this.setAggregation(\n            \"_ariaDescriptionForLinks\",\n            new InvisibleText({\n                text: i18n.getText(\"result_list_item_aria_has_more_links\"),\n            })\n        );\n\n        window.addEventListener(\"resize\", () => {\n            this.layoutToolbarElements();\n        });\n    }\n\n    exit(...args: Array<any>): void {\n        if (Control.prototype.exit) {\n            // check whether superclass implements the method\n            Control.prototype.exit.apply(this, args); // call the method with the original arguments\n        }\n        this._overFlowActionSheet?.destroy();\n    }\n\n    static renderer = {\n        apiVersion: 2,\n        render(oRm: RenderManager, oControl: SearchRelatedObjectsToolbar): void {\n            oRm.openStart(\"div\", oControl);\n            oRm.class(\"sapUshellSearchResultListItem-RelatedObjectsToolbar\");\n            const oModel = oControl.getModel() as SearchModel;\n            if (oModel.config.optimizeForValueHelp) {\n                oRm.class(\"sapUshellSearchResultListItem-RelatedObjectsToolbarValueHelp\");\n            }\n            oRm.openEnd();\n            oRm.renderControl(oControl.getAggregation(\"_ariaDescriptionForLinks\") as InvisibleText);\n            oControl._renderToolbar(oRm, oControl);\n            oRm.close(\"div\");\n        },\n    };\n\n    private _renderToolbar(oRm: RenderManager, oControl: SearchRelatedObjectsToolbar): void {\n        const oModel = oControl.getModel() as SearchModel;\n\n        const _relatedObjectActionsToolbar = oControl.getAggregation(\n            \"_relatedObjectActionsToolbar\"\n        ) as Toolbar;\n        _relatedObjectActionsToolbar.destroyContent();\n\n        if (oModel.config.optimizeForValueHelp) {\n            _relatedObjectActionsToolbar.addStyleClass(\n                \"sapUshellSearchResultListItem-RelatedObjectsToolbar-ToolbarValueHelp\"\n            );\n        }\n\n        const navigationObjects = oControl.getProperty(\"navigationObjects\");\n\n        if (Array.isArray(navigationObjects) && navigationObjects.length > 0) {\n            const navigationObjectsLinks: Array<SearchLink> = navigationObjects.map(\n                (navigationObject: NavigationTarget, i: number) => {\n                    const link = new SearchLink(`${oControl.getId()}--link_${i}`, {\n                        text: navigationObject?.text || \"\",\n                        navigationTarget: navigationObject,\n                        layoutData: new ToolbarLayoutData({\n                            shrinkable: false,\n                        }),\n                    });\n                    link.addStyleClass(\"sapUshellSearchResultListItem-RelatedObjectsToolbar-Element\");\n                    return link;\n                }\n            );\n\n            // 1. spacer\n            const toolbarSpacer = new ToolbarSpacer();\n            toolbarSpacer.addStyleClass(\"sapUshellSearchResultListItem-RelatedObjectsToolbar-Spacer\");\n            _relatedObjectActionsToolbar.addContent(toolbarSpacer);\n\n            // 2. navigation objects\n            navigationObjectsLinks.forEach((link) => {\n                _relatedObjectActionsToolbar.addContent(link);\n            });\n\n            // 3. overFlowButton\n            this._overFlowButton = new Button(`${this.getId()}--overflowButton`, {\n                icon: IconPool.getIconURI(\"overflow\"),\n            });\n            this._overFlowButton.addStyleClass(\n                \"sapUshellSearchResultListItem-RelatedObjectsToolbar-OverFlowButton\"\n            );\n            if (oModel.config.optimizeForValueHelp) {\n                this._overFlowButton.addStyleClass(\"sapUiSmallMarginBegin\");\n                this._overFlowButton.addStyleClass(\"sapUiTinyMarginEnd\");\n                this._overFlowButton.setType(ButtonType.Transparent);\n            }\n            _relatedObjectActionsToolbar.addContent(this._overFlowButton);\n\n            // 4. overFlowActionSheet (items of overFlowButton)\n            if (!this._overFlowActionSheet) {\n                this._overFlowActionSheet = new ActionSheet(`${this.getId()}--actionSheet`, {\n                    placement: PlacementType.Top,\n                });\n            }\n            this._overFlowButton.attachPress(() => {\n                if (this._overFlowActionSheet.isOpen()) {\n                    this._overFlowActionSheet.close();\n                } else {\n                    this._overFlowActionSheet.openBy(this._overFlowButton);\n                }\n            });\n\n            oRm.renderControl(_relatedObjectActionsToolbar);\n        }\n    }\n\n    // after rendering\n    // ===================================================================\n    onAfterRendering(): void {\n        if (this.getAggregation(\"_relatedObjectActionsToolbar\")) {\n            this._addAriaInformation();\n        }\n    }\n\n    /**\n     * Layout toolbar elements and move overflowing elements to the action sheet.\n     * CAUTION: DO NOT CALL ANY UI5 METHODS HERE OR RERENDERING ENDLESS LOOP WILL HAPPEN!!!\n     * @returns void\n     */\n    public layoutToolbarElements(): void {\n        if (this.isDestroyed() || this.isDestroyStarted()) {\n            return;\n        }\n        const _relatedObjectActionsToolbar = this.getAggregation(\"_relatedObjectActionsToolbar\") as Toolbar;\n        if (!(this.getDomRef() && _relatedObjectActionsToolbar.getDomRef())) {\n            return;\n        }\n\n        const toolbarElem = (\n            this.getAggregation(\"_relatedObjectActionsToolbar\") as Toolbar\n        ).getDomRef() as HTMLElement;\n        const toolbarWidth = toolbarElem.offsetWidth;\n\n        if (\n            getComputedStyle(this.getDomRef() as HTMLElement).display === \"none\" ||\n            getComputedStyle(toolbarElem).display === \"none\"\n        ) {\n            return;\n        }\n\n        this.toolbarWidth = toolbarWidth;\n\n        const overFlowButtonElem = this._overFlowButton.getDomRef() as HTMLElement;\n        overFlowButtonElem.style.display = \"none\";\n\n        let toolbarElementsWidth = 0;\n\n        const pressButton = (event: Event, _navigationObject: NavigationTarget) => {\n            if (_navigationObject instanceof NavigationTarget) {\n                _navigationObject.performNavigation({ event: event });\n            }\n        };\n\n        const toolbarElements = Array.from(\n            toolbarElem.querySelectorAll(\".sapUshellSearchResultListItem-RelatedObjectsToolbar-Element\")\n        ) as HTMLElement[];\n        let element: HTMLElement;\n        for (let i = 0; i < toolbarElements.length; i++) {\n            element = toolbarElements[i];\n            element.style.display = \"\";\n            const elementWidth =\n                element.offsetWidth +\n                parseInt(getComputedStyle(element).marginLeft) +\n                parseInt(getComputedStyle(element).marginRight);\n            const _toolbarElementsWidth = toolbarElementsWidth + elementWidth;\n\n            if (_toolbarElementsWidth > toolbarWidth) {\n                overFlowButtonElem.style.display = \"\";\n                const overFlowButtonWidth =\n                    overFlowButtonElem.offsetWidth +\n                    parseInt(getComputedStyle(overFlowButtonElem).marginLeft) +\n                    parseInt(getComputedStyle(overFlowButtonElem).marginRight);\n\n                for (; i >= 0; i--) {\n                    element = toolbarElements[i];\n                    toolbarElementsWidth -=\n                        element.offsetWidth +\n                        parseInt(getComputedStyle(element).marginLeft) +\n                        parseInt(getComputedStyle(element).marginRight);\n                    if (toolbarElementsWidth + overFlowButtonWidth <= toolbarWidth) {\n                        break;\n                    }\n                }\n\n                const navigationObjects = this.getProperty(\"navigationObjects\");\n                this._overFlowActionSheet.destroyButtons();\n\n                i = i >= 0 ? i : 0;\n                for (; i < toolbarElements.length; i++) {\n                    element = toolbarElements[i];\n                    element.style.display = \"none\";\n\n                    const navigationObject = navigationObjects[i];\n\n                    const button = new Button({\n                        text: navigationObject?.text || \"\",\n                    });\n                    button.attachPress(navigationObject, pressButton);\n                    this._overFlowActionSheet.addButton(button);\n                }\n                break;\n            }\n            toolbarElementsWidth = _toolbarElementsWidth;\n        }\n\n        if (this._overFlowActionSheet.getButtons().length === toolbarElements.length) {\n            // this._setupItemNavigation(); // overflow button focusable, if all action buttons are part of overflow sheet (see config.optimizeForValueHelp)\n        } else {\n            this._setupItemNavigation(); // overflow button focusable, only if next to action buttons\n        }\n    }\n\n    private _setupItemNavigation(): void {\n        if (!this._theItemNavigation) {\n            this._theItemNavigation = new ItemNavigation(null, []);\n            this[\"addDelegate\"](this._theItemNavigation);\n        }\n        this._theItemNavigation.setCycling(false);\n        this._theItemNavigation.setRootDomRef(this.getDomRef());\n        const itemDomRefs = [];\n        const _relatedObjectActionsToolbar = this.getAggregation(\"_relatedObjectActionsToolbar\") as Toolbar;\n        const content = _relatedObjectActionsToolbar.getContent();\n        content\n            .filter((item) =>\n                item.hasStyleClass(\"sapUshellSearchResultListItem-RelatedObjectsToolbar-Element\")\n            )\n            .forEach((item) => {\n                const domRef = item.getDomRef();\n                if (domRef && !domRef.hasAttribute(\"tabindex\")) {\n                    let tabindex = \"-1\";\n                    if (item[\"getPressed\"] && item[\"getPressed\"]()) {\n                        tabindex = \"0\";\n                    }\n                    domRef.setAttribute(\"tabindex\", tabindex);\n                }\n                itemDomRefs.push(domRef);\n            });\n\n        const overFlowButtonDomRef = this._overFlowButton.getDomRef();\n        overFlowButtonDomRef?.setAttribute(\"tabindex\", \"-1\"); // sap.ui.core.delegate.ItemNavigation is very special, regarding tabindex value \"1\" / \"-1\"\n\n        itemDomRefs.push(overFlowButtonDomRef);\n\n        this._theItemNavigation.setItemDomRefs(itemDomRefs);\n    }\n\n    private _addAriaInformation(): void {\n        const toolbarElem = (\n            this.getAggregation(\"_relatedObjectActionsToolbar\") as Toolbar\n        ).getDomRef() as HTMLElement;\n        const navigationLinks = Array.from(\n            toolbarElem.querySelectorAll(\".sapUshellSearchResultListItem-RelatedObjectsToolbar-Element\")\n        ) as HTMLElement[];\n        const overFlowButtonElem = this._overFlowButton.getDomRef() as HTMLElement;\n\n        const isOverFlowButtonVisible = overFlowButtonElem.offsetParent !== null;\n\n        if (navigationLinks.length > 0 || isOverFlowButtonVisible) {\n            const ariaDescriptionId = (\n                this.getAggregation(\"_ariaDescriptionForLinks\") as InvisibleText\n            ).getId();\n            navigationLinks.forEach(function (el) {\n                let ariaDescription = el.getAttribute(\"aria-describedby\") || \"\";\n                ariaDescription += \" \" + ariaDescriptionId;\n                el.setAttribute(\"aria-describedby\", ariaDescription);\n            });\n\n            if (isOverFlowButtonVisible) {\n                let ariaDescription = overFlowButtonElem.getAttribute(\"aria-describedby\") || \"\";\n                ariaDescription += \" \" + ariaDescriptionId;\n                overFlowButtonElem.setAttribute(\"aria-describedby\", ariaDescription);\n            }\n        }\n    }\n}\n"],"mappings":"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","ignoreList":[]}