{"version":3,"file":"SearchResultListItem.js","names":["sap","ui","define","__i18n","__SearchText","__SearchRelatedObjectsToolbar","Button","sap_m_library","Label","Text","CheckBox","Icon","IconPool","InvisibleText","Control","ManagedObject","____eventlogging_UserEvents","____UIUtil","__SearchLink","____sinaNexTS_sina_NavigationTarget","____uiConstants","____sinaNexTS_sina_AttributeFormatType","_interopRequireDefault","obj","__esModule","default","i18n","SearchText","SearchRelatedObjectsToolbar","ButtonType","UserEventType","registerHandler","SearchLink","NavigationTarget","initialValueUnicode","AttributeFormatType","SearchResultListItem","extend","renderer","apiVersion","render","oRm","oControl","_renderer","metadata","properties","dataSource","itemId","title","isTitleHighlighted","titleDescription","isTitleDescriptionHighlighted","titleNavigation","titleIconUrl","titleInfoIconUrl","titleInfoIconTooltip","geoJson","type","imageUrl","imageFormat","imageNavigation","attributes","multiple","navigationObjects","selected","selectionEnabled","customItemStyleClass","expanded","parentListItem","additionalParameters","positionInList","resultSetId","layoutCache","countBreadcrumbsHiddenElement","aggregations","_titleLink","visibility","_titleText","_titleLinkDescription","_titleInfoIcon","_titleDelimiter","_typeText","_typeLink","_typeLinkAriaDescription","_multiLineDescriptionText","_selectionCheckBox","_expandButton","_attributeLabels","_attributeValues","_attributeValuesWithoutWhyfoundHiddenTexts","_relatedObjectActionsToolbar","_titleLabeledByText","_attributesLabeledByText","_expandStateLabeledByText","constructor","_constructor","sId","settings","Control.prototype.constructor.call","this","_visibleAttributes","undefined","_detailsArea","_showExpandButton","setAggregation","getId","addStyleClass","wrapping","iconSetting","src","path","tooltip","titleInfoIcon","titleDelimiter","text","addEventDelegate","onAfterRendering","domRef","getDomRef","setAttribute","getText","addAriaDescribedBy","getAggregation","maxLines","data","select","oEvent","setProperty","getParameter","oModel","getModel","updateMultiSelectionSelected","enabled","visible","Transparent","press","toggleDetails","parts","formatter","resultviewMasterDetailMode","_setProperty","name","value","suppressInvalidate","res","Control.prototype.setProperty.call","_syncSelectionCssClass","resultListItem","relatedObjectsToolbar","querySelector","window","getComputedStyle","display","config","optimizeForValueHelp","style","_registerItemPressHandler","_resetPrecalculatedValues","_renderContainer","_renderAccessibilityInformation","openStart","getProperty","class","toLowerCase","openEnd","_renderContentContainer","_renderExpandButtonContainer","close","_renderTitleContainer","_renderAttributesContainer","icon","getIconURI","expandButton","setIcon","setTooltip","setAriaExpandedState","renderControl","_renderCheckbox","handleTitleIconSearchText","titleControl","titleLinkIcon","oIcon","escapeSettingsValue","setTimeout","isHierarchyItem","supportsDragAndDrop","domElement","titleText","trim","length","noValue","adjustCssDragAndDrop","setNavigationTarget","children","setText","titleLinkDescription","_renderRelatedObjectsToolbar","exclusiveDataSource","getDataSource","typeText","uiFilterClone","clone","setDataSource","navigationTarget","createSearchNavigationTarget","typeLink","labelPlural","_renderImageForPhone","checkbox","Round","attr","_renderImageForDocument","imageNavigationUrl","targetUrl","_zoomIcon","destroy","useIconTooltip","_cutDescrAttributeOutOfAttributeList","i","attribute","longtext","splice","_renderMultiLineDescription","description","descriptionText","whyfound","valueWithoutWhyfound","hiddenValueText","descriptionTextDom","getAttribute","addAggregation","itemAttributes","_renderImageAttribute","_renderAllAttributes","itemAttribute","labelText","valueText","label","isLongText","numberOfRenderedAttributes","numberOfColumnsDesktop","numberOfColumnsTablet","distributionOfAttributesDesktop","distributionOfAttributesTablet","additionalWhyFoundAttributesDesktop","additionalWhyFoundAttributesTablet","longTextColumnNumber","isDocumentItem","includeImageAttribute","remainingSlotsForAttributesDesktop","remainingSlotsForAttributesTablet","destroyAggregation","createAfterRenderingFunctionForAddingAriaDescribedBy","control","dom","describedBy","removeAttribute","isTitle","_rowCountTablet","_rowCountDesktop","_attributeWeight","desktop","tablet","attributeLayout","key","_howManyColumnsToUseForLongTextAttribute","k","displayOnly","showColon","defaultNavigationTarget","iconUrl","getTooltip","availableSpaceOnFirstLineDesktop","availableSpaceOnFirstLineTablet","attributeValue","imageIsOnlyAttribute","relatedObjectActionsToolbar","_renderAriaDescriptionElementForTitle","_renderAriaDescriptionElementForAttributes","_renderAriaDescriptionElementForCollapsedOrExpandedState","_addAriaDescriptionToParentListElement","event","relatedTarget","classList","contains","closest","onsapspace","onsapenter","performNavigation","getAccessibilityInfo","_getAccessibilityInfo","args","accInfo","prototype","apply","withPrefix","doRender","_searchResultListPrefix","titleLabeledByText","attributesLabeledByText","querySelectorAll","labelledByText","forEach","attrElem","isVisible","offsetParent","attributeKeyElem","attributeKey","textContent","attributeValueContainer","attributeValueElem","expandStateLabeledByText","expandButtonDom","isShowingDetails","Array","isArray","includeTotalCountElement","itemAriaLabeledBy","parentDomRef","_getExpandAreaObjectInfo","resultListItemDomRef","Error","add","attributesExpandContainer","relatedObjectsToolbarHidden","currentHeight","offsetHeight","expandedHeight","remove","elementsToFadeInOrOut","_getElementsInExpandArea","expandAnimationDuration","fadeInOrOutAnimationDuration","expandAreaObjectInfo","attributeElements","from","firstLineY","getBoundingClientRect","top","el","push","removeStyleClass","_isShowingDetails","showDetails","_showDetails","relatedToolbar","opacity","layoutToolbarElements","transition","height","hideDetails","_hideDetails","fadeOutStarted","attributeHeight","mainAttr","spacerAttr","onTransitionEnd","propertyName","removeEventListener","clearTimeout","fadeOutTimeout","addEventListener","_toggleDetails","eventType","ITEM_HIDE_DETAILS","ITEM_SHOW_DETAILS","eventLogger","logEvent","itemPosition","executionId","dataSourceKey","id","_onAfterRendering","_showOrHideExpandButton","resizeEventHappened","_resizeEventHappened","titleLink","titleControlDom","draggable","_isHierarchyItem","_supportsDragAndDrop","getSearchCompositeControlInstanceByChildControl","getDragDropConfig","_getPhoneSize","expandButtonContainer","shouldBeVisible","actionBar","elementsInExpandArea","_setAriaExpandedState","thisDom","parentListItemDom","attachPress","_performTitleNavigation","params","_adjustCssDragAndDrop"],"sources":["SearchResultListItem.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport i18n from \"../../i18n\";\nimport SearchText from \"./SearchText\";\nimport SearchRelatedObjectsToolbar from \"./SearchRelatedObjectsToolbar\";\nimport Button from \"sap/m/Button\";\nimport { ButtonType } from \"sap/m/library\";\n// import { ListType } from \"sap/m/library\";\nimport Label from \"sap/m/Label\";\nimport Text from \"sap/m/Text\";\nimport CheckBox, { CheckBox$SelectEvent } from \"sap/m/CheckBox\";\nimport Icon, { $IconSettings } from \"sap/ui/core/Icon\";\nimport IconPool from \"sap/ui/core/IconPool\";\nimport InvisibleText from \"sap/ui/core/InvisibleText\";\nimport RenderManager from \"sap/ui/core/RenderManager\";\nimport Control, { $ControlSettings } from \"sap/ui/core/Control\";\nimport SearchModel from \"sap/esh/search/ui/SearchModel\";\nimport { FormattedResultItemAttribute } from \"../../SearchResultFormatter\";\nimport Event from \"sap/ui/base/Event\";\nimport ManagedObject, { PropertyBindingInfo } from \"sap/ui/base/ManagedObject\";\nimport { UserEventType } from \"../../eventlogging/UserEvents\";\nimport { registerHandler } from \"../../UIUtil\";\nimport SearchLink from \"../SearchLink\";\nimport { NavigationTarget } from \"../../sinaNexTS/sina/NavigationTarget\";\nimport { initialValueUnicode } from \"../../uiConstants\";\nimport { DataSource } from \"../../sinaNexTS/sina/DataSource\";\nimport CustomListItem from \"sap/m/CustomListItem\";\nimport { AttributeFormatType } from \"../../sinaNexTS/sina/AttributeFormatType\";\n\nexport interface $SearchResultListItemSettings extends $ControlSettings {\n    dataSource: DataSource;\n    itemId: string;\n    title: string;\n    isTitleHighlighted: boolean | PropertyBindingInfo;\n    titleDescription: string;\n    isTitleDescriptionHighlighted: boolean | PropertyBindingInfo;\n    titleNavigation: NavigationTarget | PropertyBindingInfo;\n    titleIconUrl: string | PropertyBindingInfo;\n    titleInfoIconUrl: string | PropertyBindingInfo;\n    geoJson: unknown;\n    type: string;\n    imageUrl: string;\n    imageFormat: string;\n    imageNavigation: NavigationTarget | PropertyBindingInfo;\n    attributes: Array<unknown> | PropertyBindingInfo;\n    navigationObjects: Array<NavigationTarget> | PropertyBindingInfo;\n    selected: boolean | PropertyBindingInfo;\n    selectionEnabled: boolean | PropertyBindingInfo;\n    customItemStyleClass: string | PropertyBindingInfo;\n    expanded: boolean | PropertyBindingInfo;\n    parentListItem: CustomListItem;\n    additionalParameters: unknown;\n    positionInList: number | PropertyBindingInfo;\n    resultSetId: string | PropertyBindingInfo;\n    layoutCache: object | PropertyBindingInfo;\n    countBreadcrumbsHiddenElement: InvisibleText;\n}\n/**\n * @namespace sap.esh.search.ui.controls\n */\nexport default class SearchResultListItem extends Control {\n    // the control API:\n    static readonly metadata = {\n        properties: {\n            dataSource: \"object\", // sina data source\n            itemId: \"string\",\n            title: \"string\",\n            isTitleHighlighted: \"boolean\",\n            titleDescription: \"string\",\n            isTitleDescriptionHighlighted: \"boolean\",\n            titleNavigation: \"object\",\n            titleIconUrl: \"string\",\n            titleInfoIconUrl: \"string\",\n            titleInfoIconTooltip: \"string\",\n            geoJson: \"object\",\n            type: \"string\",\n            imageUrl: \"string\",\n            imageFormat: \"string\",\n            imageNavigation: \"object\",\n            attributes: {\n                type: \"object\",\n                multiple: true,\n            },\n            navigationObjects: {\n                type: \"object\",\n                multiple: true,\n            },\n            selected: \"boolean\",\n            selectionEnabled: \"boolean\",\n            customItemStyleClass: \"string\",\n            expanded: \"boolean\",\n            parentListItem: \"object\",\n            additionalParameters: \"object\",\n            positionInList: \"int\",\n            resultSetId: \"string\",\n            layoutCache: \"object\",\n            countBreadcrumbsHiddenElement: \"object\",\n        },\n        aggregations: {\n            _titleLink: {\n                type: \"sap.esh.search.ui.controls.SearchLink\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n            _titleText: {\n                type: \"sap.esh.search.ui.controls.SearchText\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n            _titleLinkDescription: {\n                type: \"sap.esh.search.ui.controls.SearchText\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n            _titleInfoIcon: {\n                type: \"sap.ui.core.Icon\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n            _titleDelimiter: {\n                type: \"sap.m.Text\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n            _typeText: {\n                type: \"sap.esh.search.ui.controls.SearchText\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n            _typeLink: {\n                type: \"sap.esh.search.ui.controls.SearchLink\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n            _typeLinkAriaDescription: {\n                type: \"sap.ui.core.InvisibleText\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n            _multiLineDescriptionText: {\n                type: \"sap.esh.search.ui.controls.SearchText\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n            _selectionCheckBox: {\n                type: \"sap.m.CheckBox\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n            _expandButton: {\n                type: \"sap.m.Button\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n            _attributeLabels: {\n                type: \"sap.m.Label\",\n                multiple: true,\n                visibility: \"hidden\",\n            },\n            _attributeValues: {\n                type: \"sap.ui.core.Control\",\n                multiple: true,\n                visibility: \"hidden\",\n            },\n            _attributeValuesWithoutWhyfoundHiddenTexts: {\n                type: \"sap.ui.core.InvisibleText\",\n                multiple: true,\n                visibility: \"hidden\",\n            },\n            _relatedObjectActionsToolbar: {\n                type: \"sap.esh.search.ui.controls.SearchRelatedObjectsToolbar\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n            _titleLabeledByText: {\n                type: \"sap.ui.core.InvisibleText\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n            _attributesLabeledByText: {\n                type: \"sap.ui.core.InvisibleText\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n            _expandStateLabeledByText: {\n                type: \"sap.ui.core.InvisibleText\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n        },\n    };\n\n    static readonly noValue = initialValueUnicode; // dash\n    private _visibleAttributes = undefined;\n    private _detailsArea = undefined;\n    private _showExpandButton = false;\n    private _searchResultListPrefix: string;\n    private _zoomIcon: Icon;\n\n    constructor(sId?: string, settings?: Partial<$SearchResultListItemSettings>) {\n        super(sId, settings);\n        this.setAggregation(\n            \"_titleLink\",\n            new SearchLink(`${this.getId()}--titleLink`)\n                .addStyleClass(\"sapUshellSearchResultListItem-HeaderEntry\")\n                .addStyleClass(\"sapUshellSearchResultListItem-Title\")\n                .addStyleClass(\"sapUshellSearchResultListItem-MightOverflow\")\n        );\n        this.setAggregation(\n            \"_titleText\",\n            new SearchText(`${this.getId()}--titleText`, {\n                wrapping: false,\n            })\n                .addStyleClass(\"sapUshellSearchResultListItem-HeaderEntry\")\n                .addStyleClass(\"sapUshellSearchResultListItem-Title\")\n                .addStyleClass(\"sapUshellSearchResultListItem-MightOverflow\")\n        );\n        this.setAggregation(\n            \"_titleLinkDescription\",\n            new SearchText(`${this.getId()}--titleLinkDescription`, {\n                wrapping: false,\n            })\n                .addStyleClass(\"sapUshellSearchResultListItem-HeaderEntry\")\n                .addStyleClass(\"sapUshellSearchResultListItem-TitleDescription\")\n                .addStyleClass(\"sapUshellSearchResultListItem-MightOverflow\")\n        );\n        const iconSetting: $IconSettings = {\n            src: { path: \"titleInfoIconUrl\" },\n            tooltip: \"{= ${titleInfoIconTooltip} ? ${titleInfoIconTooltip} : ${i18n>collectionShared} }\",\n        };\n        const titleInfoIcon = new Icon(`${this.getId()}--titleInfoIcon`, iconSetting);\n        titleInfoIcon.addStyleClass(\"sapUiSmallMarginEnd\");\n        this.setAggregation(\"_titleInfoIcon\", titleInfoIcon);\n        titleInfoIcon.addStyleClass(\"sapUshellSearchResultListItem-TitleInfoIcon\");\n\n        const titleDelimiter = new Text(`${this.getId()}--titleDelimiter`, {\n            text: \"|\",\n        });\n        titleDelimiter.addEventDelegate({\n            onAfterRendering: () => {\n                const domRef = titleDelimiter.getDomRef();\n                domRef?.setAttribute(\"aria-hidden\", \"true\");\n            },\n        });\n        this.setAggregation(\n            \"_titleDelimiter\",\n            titleDelimiter\n                .addStyleClass(\"sapUshellSearchResultListItem-HeaderEntry\")\n                .addStyleClass(\"sapUshellSearchResultListItem-TitleDelimiter\")\n                .addStyleClass(\"sapUshellSearchResultListItem-MightOverflow\")\n        );\n\n        this.setAggregation(\n            \"_typeText\",\n            new SearchText(`${this.getId()}--typeText`)\n                .addStyleClass(\"sapUshellSearchResultListItem-HeaderEntry\")\n                .addStyleClass(\"sapUshellSearchResultListItem-TitleCategory\")\n                .addStyleClass(\"sapUshellSearchResultListItem-MightOverflow\")\n        );\n\n        this.setAggregation(\n            \"_typeLinkAriaDescription\",\n            new InvisibleText({\n                text: i18n.getText(\"result_list_item_type_link_description\"),\n            })\n        );\n        this.setAggregation(\n            \"_typeLink\",\n            new SearchLink(`${this.getId()}--typeLink`)\n                .addStyleClass(\"sapUshellSearchResultListItem-HeaderEntry\")\n                .addStyleClass(\"sapUshellSearchResultListItem-TitleCategoryLink\")\n                .addStyleClass(\"sapUshellSearchResultListItem-MightOverflow\")\n                .addAriaDescribedBy(\n                    this.getAggregation(\n                        \"_typeLinkAriaDescription\"\n                    ) as import(\"sap/ui/core/InvisibleText\").default\n                )\n        );\n\n        this.setAggregation(\n            \"_multiLineDescriptionText\",\n            new SearchText(`${this.getId()}--multilineDescription`, {\n                maxLines: 5,\n            })\n                .addStyleClass(\"sapUshellSearchResultListItem-MultiLineDescription\")\n                .addStyleClass(\"sapUshellSearchResultListItem-MightOverflow\")\n                .data(\"islongtext\", \"true\", true)\n        );\n\n        this.setAggregation(\n            \"_selectionCheckBox\",\n            new CheckBox(`${this.getId()}--selectionCheckbox`, {\n                selected: { path: \"selected\" },\n                select: (oEvent: CheckBox$SelectEvent): void => {\n                    // console.log(\"SELECTION: list checkbox, select event\");\n                    this.setProperty(\n                        \"selected\",\n                        oEvent.getParameter(\"selected\"),\n                        true // no re-rendering needed, change originates in HTML\n                    );\n                    const oModel = this.getModel() as SearchModel;\n                    oModel.updateMultiSelectionSelected();\n                },\n                enabled: { path: \"/selectionEnabled\" },\n                visible: { path: \"/resultviewSelectionVisibility\" },\n            })\n        );\n\n        this.setAggregation(\n            \"_expandButton\",\n            new Button(`${this.getId()}--expandButton`, {\n                type: ButtonType.Transparent,\n                press: () => {\n                    this.toggleDetails();\n                },\n                visible: {\n                    parts: [{ path: \"/config/resultviewMasterDetailMode\" }],\n                    formatter: (resultviewMasterDetailMode: boolean): boolean => !resultviewMasterDetailMode,\n                },\n            })\n        );\n\n        this.setAggregation(\n            \"_relatedObjectActionsToolbar\",\n            new SearchRelatedObjectsToolbar(`${this.getId()}--relatedObjectActionsToolbar`)\n        );\n        this.setAggregation(\"_titleLabeledByText\", new InvisibleText());\n        this.setAggregation(\"_attributesLabeledByText\", new InvisibleText());\n        this.setAggregation(\"_expandStateLabeledByText\", new InvisibleText());\n    }\n\n    static renderer: Record<string, unknown> = {\n        apiVersion: 2,\n        render(oRm: RenderManager, oControl: SearchResultListItem): void {\n            // static function, so use the given \"oControl\" instance instead of \"this\" in the renderer function\n            oControl._renderer(oRm, oControl);\n        },\n    };\n\n    /**\n     * override setProperty to sync selection CSS class when selected property changes\n     */\n    setProperty(name: string, value: unknown, suppressInvalidate?: boolean): this {\n        const res = super.setProperty(name, value, suppressInvalidate);\n        if (name === \"selected\") this._syncSelectionCssClass();\n        return res;\n    }\n\n    // the part creating the HTML\n    protected _renderer(oRm: RenderManager, oControl: SearchResultListItem): void {\n        const resultListItem = this.getDomRef() as HTMLElement;\n        const relatedObjectsToolbar = resultListItem\n            ? (resultListItem.querySelector(\n                  \".sapUshellSearchResultListItem-RelatedObjectsToolbar\"\n              ) as HTMLElement)\n            : null;\n        if (relatedObjectsToolbar && window.getComputedStyle(relatedObjectsToolbar).display === \"none\") {\n            const oModel = this.getModel() as SearchModel;\n            if (oModel.config.optimizeForValueHelp) {\n                relatedObjectsToolbar.style.display = \"block\";\n            }\n        }\n\n        this._registerItemPressHandler();\n\n        this._resetPrecalculatedValues();\n        this._renderContainer(oRm, oControl);\n        this._renderAccessibilityInformation(oRm);\n    }\n\n    private _renderContainer(oRm: RenderManager, oControl: SearchResultListItem): void {\n        const oModel = this.getModel() as SearchModel;\n        oRm.openStart(\"div\", this);\n        if (this.getProperty(\"customItemStyleClass\")) {\n            oRm.class(this.getProperty(\"customItemStyleClass\"));\n        }\n        oRm.class(\"sapUshellSearchResultListItem-Container\");\n        if (this.getProperty(\"imageUrl\")) {\n            oRm.class(\"sapUshellSearchResultListItem-WithImage\");\n        }\n        if (this.getProperty(\"imageFormat\")?.toLowerCase() === \"documentthumbnail\") {\n            oRm.class(\"sapUshellSearchResultListItem-Document\");\n        }\n        oRm.openEnd();\n\n        this._renderContentContainer(oRm, oControl);\n\n        if (!oModel.config.optimizeForValueHelp) {\n            this._renderExpandButtonContainer(oRm);\n        }\n\n        oRm.close(\"div\");\n    }\n\n    protected _renderContentContainer(oRm: RenderManager, oControl: SearchResultListItem): void {\n        oRm.openStart(\"div\", oControl.getId() + \"-content\");\n        oRm.class(\"sapUshellSearchResultListItem-Content\");\n        oRm.openEnd();\n\n        this._renderTitleContainer(oRm, oControl);\n        this._renderAttributesContainer(oRm);\n\n        oRm.close(\"div\");\n    }\n\n    private _renderExpandButtonContainer(oRm: RenderManager): void {\n        oRm.openStart(\"div\", this.getId() + \"-expand-button-container\");\n        oRm.class(\"sapUshellSearchResultListItem-ExpandButtonContainer\");\n        oRm.openEnd();\n\n        oRm.openStart(\"div\", this.getId() + \"-expand-button\");\n        oRm.class(\"sapUshellSearchResultListItem-ExpandButton\");\n        oRm.openEnd();\n\n        let icon, tooltip;\n        const expanded = this.getProperty(\"expanded\");\n        if (expanded) {\n            icon = IconPool.getIconURI(\"slim-arrow-up\");\n            tooltip = i18n.getText(\"hideDetailBtn_tooltip\");\n        } else {\n            icon = IconPool.getIconURI(\"slim-arrow-down\");\n            tooltip = i18n.getText(\"showDetailBtn_tooltip\");\n        }\n\n        const expandButton = this.getAggregation(\"_expandButton\") as Button;\n        expandButton.setIcon(icon);\n        expandButton.setTooltip(tooltip);\n\n        expandButton.addEventDelegate({\n            onAfterRendering: () => {\n                this.setAriaExpandedState();\n            },\n        });\n\n        oRm.renderControl(expandButton);\n\n        oRm.close(\"div\");\n        oRm.close(\"div\");\n    }\n\n    protected _renderTitleContainer(oRm: RenderManager, oControl: SearchResultListItem): void {\n        const oModel = this.getModel() as SearchModel;\n\n        if (!oModel.config.optimizeForValueHelp) {\n            oRm.openStart(\"div\", this.getId() + \"-title-and-image-container\");\n            oRm.class(\"sapUshellSearchResultListItem-TitleAndImageContainer\");\n            oRm.openEnd();\n        }\n        oRm.openStart(\"div\", this.getId() + \"-title-container\");\n        oRm.class(\"sapUshellSearchResultListItem-TitleContainer\");\n        if (oModel.config.optimizeForValueHelp) {\n            oRm.class(\"sapUshellSearchResultListItem-TitleContainerValueHelp\");\n        }\n        oRm.openEnd();\n\n        this._renderCheckbox(oRm);\n\n        /// Title\n        const handleTitleIconSearchText = (titleControl: SearchText, oModel: SearchModel) => {\n            const titleLinkIcon = titleControl.getAggregation(\"icon\") as Icon;\n            if (titleLinkIcon instanceof Icon) {\n                titleLinkIcon.addStyleClass(\"sapUshellSearchResultListItem-Clickable\");\n            } else if (this.getProperty(\"titleIconUrl\")) {\n                const oIcon = new Icon(`${this.getId()}--titleIcon`, {\n                    src: ManagedObject.escapeSettingsValue(this.getProperty(\"titleIconUrl\")),\n                });\n                oIcon?.addStyleClass(\"sapUshellSearchResultListItem-Clickable\");\n                titleControl.setIcon(oIcon);\n                setTimeout(() => {\n                    if (!this.isHierarchyItem() && this.supportsDragAndDrop(titleControl, oModel)) {\n                        const domElement = oIcon?.getDomRef();\n                        if (domElement) {\n                            domElement[\"draggable\"] = false;\n                        }\n                    }\n                }, 100);\n            }\n        };\n        const titleNavigation = this.getProperty(\"titleNavigation\") as NavigationTarget;\n        let titleText = this.getProperty(\"title\");\n        let titleControl;\n        if (!titleText || titleText.trim().length === 0) {\n            titleText = SearchResultListItem.noValue;\n            titleControl = this.getAggregation(\"_titleText\") as SearchText;\n            handleTitleIconSearchText(titleControl, oModel);\n        } else if (!titleNavigation && !this.isHierarchyItem()) {\n            titleControl = this.getAggregation(\"_titleText\") as SearchText;\n            this.adjustCssDragAndDrop(titleControl, oModel);\n            handleTitleIconSearchText(titleControl, oModel);\n        } else {\n            titleControl = this.getAggregation(\"_titleLink\") as SearchLink;\n            titleControl.setNavigationTarget(titleNavigation);\n            titleControl.setIcon(this.getProperty(\"titleIconUrl\"));\n            if (this.isHierarchyItem()) {\n                setTimeout(() => {\n                    if (this.supportsDragAndDrop(titleControl, oModel)) {\n                        // no drag&drop of title link (<a>-tag, first child of span)\n                        if (\n                            titleControl.getDomRef()?.children.length > 0 &&\n                            titleControl.getDomRef()?.children[0][\"tagName\"] === \"A\"\n                        ) {\n                            titleControl.getDomRef().children[0][\"draggable\"] = false;\n                        } else {\n                            titleControl.getDomRef()[\"draggable\"] = false;\n                        }\n                        this.addStyleClass(\"sapUshellSearchResultListItem-NotDraggableNotClickable\");\n                    }\n                }, 100);\n            } else {\n                setTimeout(() => {\n                    if (this.supportsDragAndDrop(titleControl, oModel)) {\n                        // no drag&drop of title link (<a>-tag)\n                        titleControl.getDomRef()[\"draggable\"] = false;\n                    }\n                }, 100);\n            }\n        }\n        titleControl.setText(titleText);\n        if (this.getProperty(\"isTitleHighlighted\")) {\n            titleControl.addStyleClass(\"sapUshellSearchResultItem-AttributeValueHighlighted\");\n        }\n\n        oRm.renderControl(titleControl);\n\n        if (oControl.getProperty(\"titleInfoIconUrl\")) {\n            const titleInfoIcon = oControl.getAggregation(\"_titleInfoIcon\") as Icon;\n            if (titleInfoIcon) {\n                if (oModel.config.optimizeForValueHelp) {\n                    titleInfoIcon.addStyleClass(\"sapUshellSearchResultListItem-TitleInfoIconValueHelp\");\n                }\n                this.adjustCssDragAndDrop(titleInfoIcon, oModel);\n                oRm.renderControl(titleInfoIcon);\n            }\n        }\n\n        /// sub-title aka Title Description\n        if (!oModel.config.optimizeForValueHelp) {\n            const titleDescription = this.getProperty(\"titleDescription\");\n            if (titleDescription && titleDescription.trim().length > 0) {\n                const titleLinkDescription = this.getAggregation(\"_titleLinkDescription\") as SearchText;\n                titleLinkDescription.setText(titleDescription);\n                if (this.getProperty(\"isTitleDescriptionHighlighted\")) {\n                    titleLinkDescription.addStyleClass(\"sapUshellSearchResultItem-AttributeValueHighlighted\");\n                }\n                oRm.renderControl(titleLinkDescription);\n            }\n        }\n\n        if (oModel.config.optimizeForValueHelp) {\n            this._renderRelatedObjectsToolbar(oRm);\n        } else if (!oModel.config.exclusiveDataSource) {\n            // delimiter between title and sub-title or object type\n            const titleDelimiter = this.getAggregation(\"_titleDelimiter\") as Text;\n            oRm.renderControl(titleDelimiter);\n\n            // object type\n            if (oModel.getDataSource() === this.getProperty(\"dataSource\")) {\n                const typeText = this.getAggregation(\"_typeText\") as SearchText;\n                typeText.setText(this.getProperty(\"type\"));\n                oRm.renderControl(typeText);\n            } else {\n                const uiFilterClone = this.getModel().getProperty(\"/uiFilter\").clone();\n                uiFilterClone.setDataSource(this.getProperty(\"dataSource\"));\n                const navigationTarget = oModel.createSearchNavigationTarget(\n                    uiFilterClone,\n                    this.getProperty(\"type\")\n                );\n                const typeLink = this.getAggregation(\"_typeLink\") as SearchLink;\n                typeLink.setNavigationTarget(navigationTarget);\n                typeLink.setText(this.getProperty(\"type\"));\n                typeLink.setTooltip(\n                    i18n.getText(\"searchInDataSourceTooltip\", [this.getProperty(\"dataSource\").labelPlural])\n                );\n                oRm.renderControl(\n                    this.getAggregation(\n                        \"_typeLinkAriaDescription\"\n                    ) as import(\"sap/ui/core/InvisibleText\").default\n                );\n                oRm.renderControl(typeLink);\n            }\n        }\n\n        oRm.close(\"div\");\n\n        if (!oModel.config.optimizeForValueHelp) {\n            this._renderImageForPhone(oRm);\n            oRm.close(\"div\");\n        }\n    }\n\n    protected _renderCheckbox(oRm: RenderManager): void {\n        oRm.openStart(\"div\", this.getId() + \"-checkbox-expand-container\");\n        oRm.class(\"sapUshellSearchResultListItem-CheckboxExpandContainer\");\n        oRm.openEnd();\n\n        oRm.openStart(\"div\", this.getId() + \"-checkbox-container\");\n        oRm.class(\"sapUshellSearchResultListItem-CheckboxContainer\");\n        oRm.openEnd();\n\n        oRm.openStart(\"div\", this.getId() + \"-checkbox-alignment-container\");\n        oRm.class(\"sapUshellSearchResultListItem-CheckboxAlignmentContainer\");\n        oRm.openEnd();\n\n        const checkbox = this.getAggregation(\"_selectionCheckBox\") as CheckBox;\n        /* const selected = this.getProperty(\"selected\");\n        const selectionEnabled = this.getProperty(\"selectionEnabled\");\n        checkbox.setSelected(selected);\n        checkbox.setEnabled(selectionEnabled); */\n        oRm.renderControl(checkbox);\n\n        oRm.close(\"div\");\n        oRm.close(\"div\");\n        oRm.close(\"div\");\n    }\n\n    protected _renderImageForPhone(oRm: RenderManager): void {\n        if (this.getProperty(\"imageUrl\")) {\n            oRm.openStart(\"div\", this.getId() + \"-title-image\");\n            oRm.class(\"sapUshellSearchResultListItem-TitleImage\");\n            if (this.getProperty(\"imageFormat\") === AttributeFormatType.Round) {\n                oRm.class(\"sapUshellSearchResultListItem-ImageContainerRound\");\n            }\n            oRm.openEnd();\n\n            oRm.openStart(\"div\", this.getId() + \"-image-container-aligmnent-helper\");\n            oRm.class(\"sapUshellSearchResultListItem-ImageContainerAlignmentHelper\");\n            oRm.openEnd();\n            oRm.close(\"div\");\n\n            oRm.openStart(\"img\", this.getId() + \"-image-1\");\n            oRm.class(\"sapUshellSearchResultListItem-Image\");\n            oRm.attr(\"src\", this.getProperty(\"imageUrl\"));\n            oRm.openEnd();\n            oRm.close(\"div\");\n\n            oRm.close(\"div\");\n        }\n    }\n\n    private _renderImageForDocument(oRm: RenderManager): void {\n        if (\n            this.getProperty(\"imageFormat\") &&\n            this.getProperty(\"imageFormat\").toLowerCase() === \"documentthumbnail\"\n        ) {\n            const imageNavigation: NavigationTarget = this.getProperty(\"imageNavigation\");\n            const imageNavigationUrl = imageNavigation ? imageNavigation.targetUrl : \"\";\n            if (typeof this._zoomIcon !== \"undefined\") {\n                this._zoomIcon.destroy();\n            }\n            this._zoomIcon = new Icon(\"\", {\n                // ToDo: Stable ID, see below\n                // this._zoomIcon = new Icon(`${this.getId()}--zoomIcon`, {\n                // -> duplicate ID ?!?\n                src: IconPool.getIconURI(\"search\"),\n                useIconTooltip: false,\n            });\n            this._zoomIcon.addStyleClass(`${this.getId()}--zoomIcon`); // ToDo -> remove as soon as stable ID works\n            this._zoomIcon.addStyleClass(\"sapUshellSearchResultListItem-DocumentThumbnailZoomIcon\");\n            const imageUrl = this.getProperty(\"imageUrl\");\n\n            oRm.openStart(\"div\", this.getId() + \"-document-thumbnail-container\");\n            oRm.class(\"sapUshellSearchResultListItem-DocumentThumbnailContainer\");\n            oRm.openEnd();\n\n            if (imageNavigationUrl && imageNavigationUrl.length > 0) {\n                oRm.openStart(\"a\", this.getId() + \"-document-thumbnail-border-1\");\n                oRm.attr(\"href\", imageNavigationUrl);\n                oRm.class(\"sapUshellSearchResultListItem-DocumentThumbnailBorder\");\n                oRm.openEnd();\n\n                oRm.openStart(\"div\", this.getId() + \"-document-thumbnail-dogear-1\");\n                oRm.class(\"sapUshellSearchResultListItem-DocumentThumbnail-DogEar\");\n                oRm.openEnd();\n                oRm.close(\"div\");\n\n                oRm.renderControl(this._zoomIcon);\n\n                if (imageUrl && imageUrl.length > 0) {\n                    oRm.openStart(\"img\", this.getId() + \"-document-thumbnail-1\");\n                    oRm.class(\"sapUshellSearchResultListItem-DocumentThumbnail\");\n                    oRm.attr(\"src\", this.getProperty(\"imageUrl\"));\n                    oRm.openEnd();\n                    oRm.close(\"img\");\n                } // else: is there a placeholder image that could be shown instead?\n\n                oRm.close(\"a\");\n            } else {\n                oRm.openStart(\"div\", this.getId() + \"-document-thumbnail-border-2\");\n                oRm.class(\"sapUshellSearchResultListItem-DocumentThumbnailBorder\");\n                oRm.openEnd();\n\n                oRm.openStart(\"div\", this.getId() + \"-document-thumbnail-dogear-2\");\n                oRm.class(\"sapUshellSearchResultListItem-DocumentThumbnail-DogEar\");\n                oRm.openEnd();\n                oRm.close(\"div\");\n\n                oRm.renderControl(this._zoomIcon);\n\n                if (imageUrl && imageUrl.length > 0) {\n                    oRm.openStart(\"img\", this.getId() + \"-document-thumbnail-2\");\n                    oRm.class(\"sapUshellSearchResultListItem-DocumentThumbnail\");\n                    oRm.attr(\"src\", this.getProperty(\"imageUrl\"));\n                    oRm.openEnd();\n                    oRm.close(\"img\");\n                } // else: is there a placeholder image that could be shown instead?\n\n                oRm.close(\"div\");\n            }\n            oRm.close(\"div\");\n        }\n    }\n\n    private _cutDescrAttributeOutOfAttributeList(): FormattedResultItemAttribute {\n        const attributes = this.getProperty(\"attributes\");\n        for (let i = 0; i < attributes.length; i++) {\n            const attribute = attributes[i];\n            if (attribute.longtext) {\n                attributes.splice(i, 1);\n                this.setProperty(\"attributes\", attributes);\n                return attribute;\n            }\n        }\n        return undefined;\n    }\n\n    private _renderMultiLineDescription(oRm: RenderManager): void {\n        const oModel = this.getModel() as SearchModel;\n        if (this.getProperty(\"imageFormat\")?.toLowerCase() === \"documentthumbnail\") {\n            // for the time being, only render multiline attribute, if this is a document result item\n            const description = this._cutDescrAttributeOutOfAttributeList();\n            if (description?.value?.length > 0) {\n                const descriptionText = this.getAggregation(\"_multiLineDescriptionText\") as SearchText;\n                descriptionText.setText(description.value);\n\n                if (description.whyfound) {\n                    descriptionText.data(\"ishighlighted\", \"true\", true);\n                } else {\n                    descriptionText.data(\"ishighlighted\", \"false\", true);\n                }\n\n                if (description.valueWithoutWhyfound) {\n                    // for attribute values with why-found information, use the raw value information (without why-found-tags) for tooltip and ARIA description\n                    const hiddenValueText = new InvisibleText({});\n                    hiddenValueText.setText(description.valueWithoutWhyfound);\n                    descriptionText.data(\"tooltippedBy\", hiddenValueText.getId(), true);\n                    descriptionText.addEventDelegate({\n                        onAfterRendering: () => {\n                            const descriptionTextDom = descriptionText.getDomRef();\n                            if (descriptionTextDom) {\n                                descriptionTextDom.setAttribute(\n                                    \"aria-describedby\",\n                                    descriptionTextDom.getAttribute(\"data-tooltippedby\") || \"\"\n                                );\n                            }\n                        },\n                    });\n                    this.addAggregation(\n                        \"_attributeValuesWithoutWhyfoundHiddenTexts\",\n                        hiddenValueText,\n                        true /* do not invalidate this object */\n                    );\n                    oRm.renderControl(hiddenValueText);\n                }\n                this.adjustCssDragAndDrop(descriptionText, oModel);\n                oRm.renderControl(descriptionText);\n            } else {\n                oRm.openStart(\"div\", this.getId() + \"-multiline-description\");\n                oRm.class(\"sapUshellSearchResultListItem-MultiLineDescription\");\n                oRm.openEnd();\n                oRm.close(\"div\");\n            }\n        }\n    }\n\n    protected _renderAttributesContainer(oRm: RenderManager): void {\n        const oModel = this.getModel() as SearchModel;\n        oRm.openStart(\"div\", this.getId() + \"-attribute-expand-container\");\n        oRm.class(\"sapUshellSearchResultListItem-AttributesExpandContainer\");\n        if (oModel.config.optimizeForValueHelp) {\n            oRm.class(\"sapUshellSearchResultListItem-AttributesExpandContainerValueHelp\");\n        }\n        const expanded = this.getProperty(\"expanded\");\n        if (expanded) {\n            oRm.class(\"sapUshellSearchResultListItem-AttributesExpanded\");\n        }\n        oRm.openEnd();\n\n        oRm.openStart(\"div\", this.getId() + \"-attributes-and-actions\");\n        oRm.class(\"sapUshellSearchResultListItem-AttributesAndActions\");\n        oRm.openEnd();\n\n        if (!oModel.config.optimizeForValueHelp) {\n            this._renderImageForDocument(oRm);\n            this._renderMultiLineDescription(oRm);\n        }\n\n        oRm.openStart(\"ul\", this.getId() + \"-attributes\");\n        oRm.class(\"sapUshellSearchResultListItem-Attributes\");\n        oRm.openEnd();\n\n        const itemAttributes = this.getProperty(\"attributes\");\n\n        if (!oModel.config.optimizeForValueHelp) {\n            this._renderImageAttribute(oRm, /* imageIsOnlyAttribute= */ itemAttributes.length === 0);\n        }\n\n        this._renderAllAttributes(oRm, itemAttributes);\n\n        // this is just a dummy attribute to store additional spacer information for the expand and collapse JavaScript function\n        if (!oModel.config.optimizeForValueHelp) {\n            oRm.openStart(\"li\", this.getId() + \"-expand-spacer-attribute\");\n            oRm.class(\"sapUshellSearchResultListItem-ExpandSpacerAttribute\");\n            oRm.attr(\"aria-hidden\", \"true\");\n            oRm.openEnd();\n            oRm.close(\"li\");\n        }\n\n        oRm.close(\"ul\");\n\n        if (!oModel.config.optimizeForValueHelp) {\n            // related objects toolbar will be rendered in line with title attribute\n            this._renderRelatedObjectsToolbar(oRm);\n        }\n\n        oRm.close(\"div\");\n        oRm.close(\"div\");\n    }\n\n    // render Attributes\n    // ===================================================================\n    protected _renderAllAttributes(oRm: RenderManager, itemAttributes: Array<unknown>): void {\n        const oModel = this.getModel() as SearchModel;\n        if (itemAttributes.length === 0) {\n            oRm.openStart(\"li\", this.getId() + \"-generic-attribute-1\");\n            oRm.class(\"sapUshellSearchResultListItem-GenericAttribute\");\n            if (oModel.config.optimizeForValueHelp) {\n                oRm.class(\"sapUshellSearchResultListItem-GenericAttributeValueHelp\");\n            }\n            oRm.class(\"sapUshellSearchResultListItem-MainAttribute\");\n            oRm.class(\"sapUshellSearchResultListItem-EmptyAttributePlaceholder\");\n            oRm.attr(\"aria-hidden\", \"true\");\n            oRm.openEnd();\n            oRm.close(\"li\");\n            return;\n        }\n\n        let itemAttribute;\n        let labelText;\n        let valueText;\n        let valueWithoutWhyfound;\n        let label, value, isLongText;\n        let hiddenValueText;\n        let oIcon;\n\n        const layoutCache = this.getProperty(\"layoutCache\") || {};\n        this.setProperty(\"layoutCache\", layoutCache, /* suppress rerender */ true);\n        if (!layoutCache.attributes) {\n            layoutCache.attributes = {};\n        }\n\n        let i = 0,\n            numberOfRenderedAttributes = 0;\n\n        let numberOfColumnsDesktop = 4;\n        let numberOfColumnsTablet = 3;\n        let distributionOfAttributesDesktop = [0, 0, 0]; // three rows for desktop resolution\n        let distributionOfAttributesTablet = [0, 0, 0, 0]; // four rows for tablet resolution\n        let additionalWhyFoundAttributesDesktop = 2;\n        let additionalWhyFoundAttributesTablet = 2;\n        let longTextColumnNumber;\n\n        const isDocumentItem =\n            this.getProperty(\"imageFormat\") &&\n            this.getProperty(\"imageFormat\").toLowerCase() === \"documentthumbnail\";\n        const includeImageAttribute =\n            this.getProperty(\"imageUrl\") && !isDocumentItem && !oModel.config.optimizeForValueHelp;\n        if (isDocumentItem && !oModel.config.optimizeForValueHelp) {\n            numberOfColumnsDesktop = numberOfColumnsTablet = 2;\n            distributionOfAttributesDesktop = distributionOfAttributesTablet = [0, 0];\n            additionalWhyFoundAttributesDesktop = additionalWhyFoundAttributesTablet = 4;\n        }\n\n        let remainingSlotsForAttributesDesktop =\n            numberOfColumnsDesktop * distributionOfAttributesDesktop.length;\n        let remainingSlotsForAttributesTablet = numberOfColumnsTablet * distributionOfAttributesTablet.length;\n\n        if (includeImageAttribute) {\n            remainingSlotsForAttributesDesktop--;\n            remainingSlotsForAttributesTablet--;\n            distributionOfAttributesDesktop[0]++;\n            distributionOfAttributesTablet[0]++;\n        }\n\n        this.destroyAggregation(\"_attributeLabels\");\n        this.destroyAggregation(\"_attributeValues\");\n        this.destroyAggregation(\"_attributeValuesWithoutWhyfoundHiddenTexts\");\n\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const createAfterRenderingFunctionForAddingAriaDescribedBy = (control) => {\n            return () => {\n                const dom = this.getDomRef() as HTMLElement;\n                if (dom) {\n                    const describedBy = dom.getAttribute(\"data-tooltippedby\");\n                    if (describedBy) {\n                        dom.setAttribute(\"aria-describedby\", describedBy);\n                    } else {\n                        dom.removeAttribute(\"aria-describedby\");\n                    }\n                }\n            };\n        };\n\n        for (\n            i = 0;\n            !(additionalWhyFoundAttributesDesktop <= 0 && additionalWhyFoundAttributesTablet <= 0) &&\n            i < itemAttributes.length;\n            i++\n        ) {\n            itemAttribute = itemAttributes[i];\n\n            const oModel = this.getModel() as SearchModel;\n            if (oModel.config.optimizeForValueHelp && !itemAttribute.whyfound) {\n                continue; // for value help mode, only render title and why found\n            }\n\n            if (isDocumentItem && numberOfRenderedAttributes >= 4) {\n                break;\n            }\n\n            if (itemAttribute.isTitle) {\n                continue;\n            }\n\n            if (\n                remainingSlotsForAttributesDesktop <= 0 &&\n                remainingSlotsForAttributesTablet <= 0 &&\n                !itemAttribute.whyfound\n            ) {\n                continue;\n            }\n\n            labelText = itemAttribute.name;\n            valueText = itemAttribute.value;\n            if (labelText === undefined || valueText === undefined) {\n                continue;\n            }\n            if (!valueText || valueText.trim().length === 0) {\n                valueText = SearchResultListItem.noValue;\n            }\n\n            if (\n                itemAttribute.longtext === undefined ||\n                itemAttribute.longtext === null ||\n                itemAttribute.longtext === \"\"\n            ) {\n                isLongText = false;\n            } else {\n                isLongText = true;\n            }\n\n            valueWithoutWhyfound = itemAttribute.valueWithoutWhyfound;\n\n            let _rowCountTablet = -1,\n                _rowCountDesktop = -1,\n                _attributeWeight = {\n                    desktop: 1,\n                    tablet: 1,\n                };\n\n            const attributeLayout = layoutCache.attributes[itemAttribute.key] || {};\n            layoutCache.attributes[itemAttribute.key] = attributeLayout;\n\n            oRm.openStart(\"li\", this.getId() + \"-generic-attribute-2-\" + i);\n            oRm.class(\"sapUshellSearchResultListItem-GenericAttribute\");\n            if (oModel.config.optimizeForValueHelp) {\n                oRm.class(\"sapUshellSearchResultListItem-GenericAttributeValueHelp\");\n            }\n            oRm.class(\"sapUshellSearchResultListItem-MainAttribute\");\n\n            if (isLongText) {\n                longTextColumnNumber =\n                    attributeLayout.longTextColumnNumber ||\n                    this._howManyColumnsToUseForLongTextAttribute(valueWithoutWhyfound);\n                attributeLayout.longTextColumnNumber = longTextColumnNumber;\n                _attributeWeight = longTextColumnNumber;\n                oRm.class(\"sapUshellSearchResultListItem-LongtextAttribute\");\n            }\n\n            if (remainingSlotsForAttributesDesktop <= 0) {\n                if (itemAttribute.whyfound && additionalWhyFoundAttributesDesktop > 0) {\n                    oRm.class(\"sapUshellSearchResultListItem-WhyFoundAttribute-Desktop\");\n                    additionalWhyFoundAttributesDesktop--;\n                } else {\n                    oRm.class(\"sapUshellSearchResultListItem-DisplayNoneAttribute-Desktop\");\n                }\n            }\n\n            if (remainingSlotsForAttributesTablet <= 0) {\n                if (itemAttribute.whyfound && additionalWhyFoundAttributesTablet > 0) {\n                    oRm.class(\"sapUshellSearchResultListItem-WhyFoundAttribute-Tablet\");\n                    additionalWhyFoundAttributesTablet--;\n                } else {\n                    oRm.class(\"sapUshellSearchResultListItem-DisplayNoneAttribute-Tablet\");\n                }\n            }\n\n            if (isLongText && includeImageAttribute && distributionOfAttributesDesktop[0] === 1) {\n                _rowCountDesktop = 0;\n                longTextColumnNumber =\n                    attributeLayout.longTextColumnNumber.desktop < numberOfColumnsDesktop\n                        ? attributeLayout.longTextColumnNumber.desktop\n                        : numberOfColumnsDesktop - 1;\n                distributionOfAttributesDesktop[0] += longTextColumnNumber;\n                remainingSlotsForAttributesDesktop -= longTextColumnNumber;\n            } else {\n                for (let k = 0; k < distributionOfAttributesDesktop.length; k++) {\n                    if (\n                        distributionOfAttributesDesktop[k] + _attributeWeight.desktop <=\n                        numberOfColumnsDesktop\n                    ) {\n                        distributionOfAttributesDesktop[k] += _attributeWeight.desktop;\n                        remainingSlotsForAttributesDesktop -= _attributeWeight.desktop;\n                        _rowCountDesktop = k;\n                        break;\n                    }\n                }\n            }\n\n            if (_rowCountDesktop < 0) {\n                _rowCountDesktop = distributionOfAttributesDesktop.length;\n            }\n\n            if (isLongText && includeImageAttribute && distributionOfAttributesTablet[0] === 1) {\n                _rowCountTablet = 0;\n                longTextColumnNumber =\n                    attributeLayout.longTextColumnNumber.tablet < numberOfColumnsTablet\n                        ? attributeLayout.longTextColumnNumber.tablet\n                        : numberOfColumnsTablet - 1;\n                distributionOfAttributesTablet[0] += longTextColumnNumber;\n                remainingSlotsForAttributesTablet -= longTextColumnNumber;\n            } else {\n                for (let k = 0; k < distributionOfAttributesTablet.length; k++) {\n                    if (\n                        distributionOfAttributesTablet[k] + _attributeWeight.tablet <=\n                        numberOfColumnsTablet\n                    ) {\n                        distributionOfAttributesTablet[k] += _attributeWeight.tablet;\n                        remainingSlotsForAttributesTablet -= _attributeWeight.tablet;\n                        _rowCountTablet = k;\n                        break;\n                    }\n                }\n            }\n\n            if (_rowCountTablet < 0) {\n                _rowCountTablet = distributionOfAttributesTablet.length;\n            }\n\n            oRm.class(\"sapUshellSearchResultListItem-OrderTablet-\" + _rowCountTablet);\n            oRm.class(\"sapUshellSearchResultListItem-OrderDesktop-\" + _rowCountDesktop);\n\n            if (isLongText) {\n                oRm.attr(\"data-sap-searchresultitem-attributeweight-desktop\", _attributeWeight.desktop);\n                oRm.attr(\"data-sap-searchresultitem-attributeweight-tablet\", _attributeWeight.tablet);\n            }\n\n            oRm.openEnd();\n\n            label = new Label(`${this.getId()}--attr${i}_labelText`, {\n                displayOnly: true,\n                showColon: true,\n            });\n            label.setText(labelText);\n            label.addStyleClass(\"sapUshellSearchResultListItem-AttributeKey\");\n            label.addStyleClass(\"sapUshellSearchResultListItem-MightOverflow\");\n            this.adjustCssDragAndDrop(label, oModel);\n            oRm.renderControl(label);\n\n            oRm.openStart(\"span\", this.getId() + \"-attribute-value-container-\" + i);\n            oRm.class(\"sapUshellSearchResultListItem-AttributeValueContainer\");\n            if (oModel.config.optimizeForValueHelp) {\n                oRm.class(\"sapUshellSearchResultListItem-AttributeValueContainerValueHelp\");\n            }\n            oRm.openEnd();\n\n            if (itemAttribute.defaultNavigationTarget instanceof NavigationTarget) {\n                const navigationTarget = itemAttribute.defaultNavigationTarget;\n                value = new SearchLink(`${this.getId()}--attr${i}_defNavTarget_Link`, {\n                    navigationTarget: null,\n                    wrapping: false,\n                    tooltip: ManagedObject.escapeSettingsValue(itemAttribute.tooltip || \"\"),\n                });\n                // Lazy loading because of potential {} in the href will be understood as binding path by UI5\n                value.setNavigationTarget(navigationTarget);\n                value.setText(valueText);\n                value.addStyleClass(\"sapUshellSearchResultListItem-AttributeLink\");\n                value.setIcon(itemAttribute.iconUrl);\n            } else {\n                value = new SearchText(`${this.getId()}--attr${i}_noDefNavTarget_Text`);\n                value.setText(valueText);\n                oIcon = undefined;\n                if (itemAttribute.iconUrl) {\n                    oIcon = new Icon(`${this.getId()}--attr${i}_itemAttributeIcon`, {\n                        src: ManagedObject.escapeSettingsValue(itemAttribute.iconUrl),\n                    });\n                    oIcon.addStyleClass(\"sapUshellSearchResultListItem-AttributeIcon\");\n                }\n                if (oIcon) {\n                    value.setIcon(oIcon);\n                }\n            }\n\n            value.addStyleClass(\"sapUshellSearchResultListItem-AttributeValue\");\n            value.addStyleClass(\"sapUshellSearchResultListItem-MightOverflow\");\n            if (itemAttribute.whyfound) {\n                value.data(\"ishighlighted\", \"true\", true);\n                value.addStyleClass(\"sapUshellSearchResultItem-AttributeValueHighlighted\");\n            }\n            if (isLongText) {\n                value.data(\"islongtext\", \"true\", true);\n            }\n            if (valueWithoutWhyfound && !(value instanceof SearchLink && value.getTooltip())) {\n                // for attribute values with why-found information, use the raw value information (without why-found-tags) for tooltip and ARIA description\n                hiddenValueText = new InvisibleText({});\n                hiddenValueText.addStyleClass(\n                    \"sapUshellSearchResultListItem-AttributeValueContainer-HiddenText\"\n                );\n                hiddenValueText.setText(valueWithoutWhyfound);\n                value.data(\"tooltippedBy\", hiddenValueText.getId(), true);\n                value.addEventDelegate({\n                    onAfterRendering: createAfterRenderingFunctionForAddingAriaDescribedBy(value),\n                });\n                this.addAggregation(\n                    \"_attributeValuesWithoutWhyfoundHiddenTexts\",\n                    hiddenValueText,\n                    true /* do not invalidate this object */\n                );\n                oRm.renderControl(hiddenValueText);\n            }\n            this.adjustCssDragAndDrop(value, oModel);\n            oRm.renderControl(value);\n\n            oRm.close(\"span\");\n            oRm.close(\"li\");\n\n            this.addAggregation(\"_attributeLabels\", label, true /* do not invalidate this object */);\n            this.addAggregation(\"_attributeValues\", value, true /* do not invalidate this object */);\n\n            numberOfRenderedAttributes++;\n        }\n\n        if (includeImageAttribute) {\n            const availableSpaceOnFirstLineDesktop =\n                numberOfColumnsDesktop - distributionOfAttributesDesktop[0];\n            const availableSpaceOnFirstLineTablet = numberOfColumnsTablet - distributionOfAttributesTablet[0];\n\n            if (availableSpaceOnFirstLineDesktop > 0 || availableSpaceOnFirstLineTablet > 0) {\n                oRm.openStart(\"li\", this.getId() + \"-generic-attribute-3\");\n                oRm.class(\"sapUshellSearchResultListItem-GenericAttribute\");\n                if (oModel.config.optimizeForValueHelp) {\n                    oRm.class(\"sapUshellSearchResultListItem-GenericAttributeValueHelp\");\n                }\n                oRm.class(\"sapUshellSearchResultListItem-MainAttribute\");\n                oRm.class(\"sapUshellSearchResultListItem-OrderTablet-0\");\n                oRm.class(\"sapUshellSearchResultListItem-OrderDesktop-0\");\n                oRm.attr(\n                    \"data-sap-searchresultitem-attributeweight-desktop\",\n                    availableSpaceOnFirstLineDesktop\n                );\n                oRm.attr(\"data-sap-searchresultitem-attributeweight-tablet\", availableSpaceOnFirstLineTablet);\n                oRm.openEnd();\n                oRm.close(\"li\");\n            }\n        }\n    }\n\n    private _howManyColumnsToUseForLongTextAttribute(attributeValue: string): {\n        tablet: number;\n        desktop: number;\n    } {\n        if (attributeValue.length < 50) {\n            return {\n                tablet: 1,\n                desktop: 1,\n            };\n        }\n        if (attributeValue.length < 85) {\n            return {\n                tablet: 2,\n                desktop: 2,\n            };\n        }\n        if (attributeValue.length < 135) {\n            return {\n                tablet: 3,\n                desktop: 3,\n            };\n        }\n        return {\n            tablet: 3,\n            desktop: 4,\n        };\n    }\n\n    private _renderImageAttribute(oRm: RenderManager, imageIsOnlyAttribute: boolean): void {\n        const oModel = this.getModel() as SearchModel;\n\n        if (\n            !this.getProperty(\"imageUrl\") ||\n            (this.getProperty(\"imageFormat\") &&\n                this.getProperty(\"imageFormat\").toLowerCase() === \"documentthumbnail\")\n        ) {\n            return;\n        }\n\n        oRm.openStart(\"li\", this.getId() + \"-generic-attribute-4\");\n        oRm.class(\"sapUshellSearchResultListItem-GenericAttribute\");\n        if (oModel.config.optimizeForValueHelp) {\n            oRm.class(\"sapUshellSearchResultListItem-GenericAttributeValueHelp\");\n        }\n        oRm.class(\"sapUshellSearchResultListItem-ImageAttribute\");\n\n        if (imageIsOnlyAttribute) {\n            oRm.class(\"sapUshellSearchResultListItem-LonelyImageAttribute\");\n        }\n        oRm.openEnd();\n        oRm.openStart(\"div\", this.getId() + \"-image-container\");\n        oRm.class(\"sapUshellSearchResultListItem-ImageContainer\");\n        if (this.getProperty(\"imageFormat\") === AttributeFormatType.Round) {\n            oRm.class(\"sapUshellSearchResultListItem-ImageContainerRound\");\n        }\n        oRm.openEnd();\n\n        if (this.getProperty(\"imageUrl\")) {\n            oRm.openStart(\"img\", this.getId() + \"-image-2\");\n            oRm.class(\"sapUshellSearchResultListItem-Image\");\n            if (this.getProperty(\"imageFormat\") === AttributeFormatType.Round) {\n                //\n            }\n            oRm.attr(\"src\", this.getProperty(\"imageUrl\"));\n            oRm.openEnd();\n            oRm.close(\"img\");\n        }\n\n        if (this.getProperty(\"imageFormat\") !== \"round\") {\n            oRm.openStart(\"div\", this.getId() + \"-image-container-aligment-helper\");\n            oRm.class(\"sapUshellSearchResultListItem-ImageContainerAlignmentHelper\");\n            oRm.openEnd();\n            oRm.close(\"div\");\n        }\n        oRm.close(\"div\");\n        oRm.close(\"li\");\n    }\n\n    // render Related Objects Toolbar\n    // ===================================================================\n    protected _renderRelatedObjectsToolbar(oRm: RenderManager): void {\n        const navigationObjects = this.getProperty(\"navigationObjects\") as Array<NavigationTarget>;\n\n        if (!navigationObjects || navigationObjects.length === 0) {\n            return;\n        }\n\n        this._showExpandButton = true;\n\n        const relatedObjectActionsToolbar = this.getAggregation(\n            \"_relatedObjectActionsToolbar\"\n        ) as SearchRelatedObjectsToolbar;\n\n        relatedObjectActionsToolbar.setProperty(\"navigationObjects\", navigationObjects);\n        relatedObjectActionsToolbar.setProperty(\"positionInList\", this.getProperty(\"positionInList\"));\n\n        oRm.renderControl(relatedObjectActionsToolbar);\n    }\n\n    private _renderAccessibilityInformation(oRm: RenderManager): void {\n        const parentListItem = this.getProperty(\"parentListItem\") as CustomListItem;\n        if (parentListItem) {\n            this._renderAriaDescriptionElementForTitle(oRm, /* withPrefix = */ true, /* doRender= */ true);\n            this._renderAriaDescriptionElementForAttributes(oRm, /* withPrefix = */ /* doRender= */ true);\n            this._renderAriaDescriptionElementForCollapsedOrExpandedState(\n                oRm,\n                /* withPrefix = */ /* doRender= */ true\n            );\n\n            parentListItem.addEventDelegate({\n                onAfterRendering: () => {\n                    this._addAriaDescriptionToParentListElement(\n                        parentListItem,\n                        /* includeTotalCountElement = */ true\n                    );\n\n                    registerHandler(\n                        \"acc-listitem-focusin\",\n                        [parentListItem.getDomRef()],\n                        \"focusin\",\n                        (event: any) => {\n                            const relatedTarget = event.relatedTarget as HTMLElement;\n                            if (\n                                relatedTarget?.classList.contains(\"sapUshellSearchResultListItem\") ||\n                                (relatedTarget?.closest(\".sapUshellSearchResultListItemApps\") &&\n                                    !relatedTarget.classList.contains(\"sapUshellResultListMoreFooter\"))\n                            ) {\n                                this._renderAriaDescriptionElementForTitle(\n                                    oRm,\n                                    /* withPrefix = */ false,\n                                    /* doRender= */ false\n                                );\n                                this._renderAriaDescriptionElementForAttributes(\n                                    oRm,\n                                    /* withPrefix = */ /* doRender= */ false\n                                );\n                                this._renderAriaDescriptionElementForCollapsedOrExpandedState(\n                                    oRm,\n                                    /* withPrefix = */ /* doRender= */ false\n                                );\n                                this._addAriaDescriptionToParentListElement(\n                                    parentListItem,\n                                    /* includeTotalCountElement = */ false\n                                );\n                            } else {\n                                this._renderAriaDescriptionElementForTitle(\n                                    oRm,\n                                    /* withPrefix = */ true,\n                                    /* doRender= */ false\n                                );\n                                this._renderAriaDescriptionElementForAttributes(\n                                    oRm,\n                                    /* withPrefix = */ /* doRender= */ false\n                                );\n                                this._renderAriaDescriptionElementForCollapsedOrExpandedState(\n                                    oRm,\n                                    /* withPrefix = */ /* doRender= */ false\n                                );\n                                this._addAriaDescriptionToParentListElement(\n                                    parentListItem,\n                                    /* includeTotalCountElement = */ true\n                                );\n                            }\n                        }\n                    );\n                },\n                onsapspace: (oEvent: Event): void => {\n                    if (oEvent[\"target\"] === oEvent[\"currentTarget\"]) {\n                        this.toggleDetails();\n                    }\n                },\n                onsapenter: (oEvent: Event): void => {\n                    if (oEvent[\"target\"] === oEvent[\"currentTarget\"]) {\n                        const titleNavigation: NavigationTarget = this.getProperty(\"titleNavigation\");\n                        if (titleNavigation instanceof NavigationTarget) {\n                            titleNavigation.performNavigation();\n                        }\n                    }\n                },\n            });\n        }\n    }\n    public getAccessibilityInfo(...args: unknown[]): Record<string, unknown> {\n        let accInfo = {};\n        if (Control.prototype.getAccessibilityInfo) {\n            accInfo = Control.prototype.getAccessibilityInfo.apply(this, args) || accInfo;\n        }\n        accInfo[\"description\"] = \"\"; // description will be provided dynamically in _renderAccessibilityInformation\n        return accInfo;\n    }\n\n    private _renderAriaDescriptionElementForTitle(\n        oRm: RenderManager,\n        withPrefix: boolean,\n        doRender: boolean\n    ): void {\n        this._searchResultListPrefix =\n            this._searchResultListPrefix || i18n.getText(\"result_list_announcement_screenreaders\");\n        let labelText = this.getProperty(\"title\") + \", \" + this.getProperty(\"type\") + \".\";\n        if (withPrefix) {\n            labelText = this._searchResultListPrefix + \" \" + labelText;\n        }\n\n        const titleLabeledByText = this.getAggregation(\"_titleLabeledByText\") as InvisibleText;\n        if (titleLabeledByText) {\n            titleLabeledByText.setText(labelText);\n        }\n\n        if (doRender && oRm) {\n            oRm.renderControl(titleLabeledByText);\n        }\n    }\n\n    private _renderAriaDescriptionElementForAttributes(oRm: RenderManager, doRender: boolean): void {\n        const attributesLabeledByText = this.getAggregation(\"_attributesLabeledByText\") as InvisibleText;\n\n        const domRef = this.getDomRef() as HTMLElement;\n        if (!domRef) {\n            return; // ToDo: function _renderAriaDescriptionElementForAttributes should not be called for invalidated items (i.e. click on list when table is active)\n        }\n\n        const attributes = domRef.querySelectorAll(\n            \".sapUshellSearchResultListItem-Attributes .sapUshellSearchResultListItem-MainAttribute\"\n        );\n\n        let labelledByText;\n        if (attributes.length === 0) {\n            labelledByText = i18n.getText(\"result_list_item_aria_no_attributes\");\n        } else {\n            labelledByText = i18n.getText(\"result_list_item_aria_has_attributes\");\n            attributes.forEach((attrElem) => {\n                const isVisible =\n                    (attrElem as HTMLElement).offsetParent !== null &&\n                    (attrElem as HTMLElement).getAttribute(\"aria-hidden\") !== \"true\";\n                if (isVisible) {\n                    const attributeKeyElem = attrElem.querySelector(\n                        \".sapUshellSearchResultListItem-AttributeKey\"\n                    );\n                    const attributeKey = attributeKeyElem ? attributeKeyElem.textContent : \"\";\n                    const attributeValueContainer = attrElem.querySelector(\n                        \".sapUshellSearchResultListItem-AttributeValueContainer\"\n                    );\n                    let attributeValueElem =\n                        attributeValueContainer &&\n                        attributeValueContainer.querySelector(\n                            \".sapUshellSearchResultListItem-AttributeValueContainer-HiddenText\"\n                        );\n                    if (!attributeValueElem) {\n                        attributeValueElem = attributeValueContainer;\n                    }\n                    const attributeValue = attributeValueElem ? attributeValueElem.textContent : \"\";\n                    labelledByText += i18n.getText(\"result_list_item_aria_attribute_and_value\", [\n                        attributeKey,\n                        attributeValue,\n                    ]);\n                }\n            });\n        }\n\n        if (attributesLabeledByText) {\n            attributesLabeledByText.setText(labelledByText);\n        }\n\n        if (doRender && oRm) {\n            oRm.renderControl(attributesLabeledByText);\n        }\n    }\n\n    private _renderAriaDescriptionElementForCollapsedOrExpandedState(\n        oRm: RenderManager,\n        doRender: boolean\n    ): void {\n        const expandStateLabeledByText = this.getAggregation(\"_expandStateLabeledByText\") as InvisibleText;\n        let labelledByText;\n\n        const expandButton = this.getAggregation(\"_expandButton\") as Button;\n        if (!expandButton) {\n            return;\n        }\n        const expandButtonDom = expandButton.getDomRef() as HTMLElement;\n        if (expandButtonDom && window.getComputedStyle(expandButtonDom).visibility !== \"hidden\") {\n            if (this.isShowingDetails()) {\n                labelledByText = i18n.getText(\"result_list_item_aria_expanded\");\n                const navigationObjects = this.getProperty(\"navigationObjects\");\n                if (Array.isArray(navigationObjects) && navigationObjects.length > 0) {\n                    labelledByText = i18n.getText(\"result_list_item_aria_has_links\") + labelledByText;\n                }\n            } else {\n                labelledByText = i18n.getText(\"result_list_item_aria_collapsed\");\n            }\n        }\n        expandStateLabeledByText.setText(labelledByText);\n\n        if (doRender && oRm) {\n            oRm.renderControl(expandStateLabeledByText);\n        }\n    }\n\n    private _addAriaDescriptionToParentListElement(\n        parentListItem: CustomListItem,\n        includeTotalCountElement: boolean\n    ): void {\n        const titleLabeledByText = this.getAggregation(\"_titleLabeledByText\") as InvisibleText;\n        if (!titleLabeledByText) {\n            return;\n        }\n        let itemAriaLabeledBy = titleLabeledByText.getId();\n        if (includeTotalCountElement) {\n            const countBreadcrumbsHiddenElement = this.getProperty(\"countBreadcrumbsHiddenElement\");\n            if (countBreadcrumbsHiddenElement) {\n                itemAriaLabeledBy += \" \" + countBreadcrumbsHiddenElement.getId();\n            }\n        }\n\n        const attributesLabeledByText = this.getAggregation(\"_attributesLabeledByText\") as InvisibleText;\n        itemAriaLabeledBy += \" \" + attributesLabeledByText.getId();\n\n        const expandStateLabeledByText = this.getAggregation(\"_expandStateLabeledByText\") as InvisibleText;\n        itemAriaLabeledBy += \" \" + expandStateLabeledByText.getId();\n\n        const parentDomRef = parentListItem.getDomRef() as HTMLElement;\n        if (parentDomRef) {\n            parentDomRef.setAttribute(\"aria-labelledby\", itemAriaLabeledBy);\n        }\n    }\n\n    protected _getExpandAreaObjectInfo(): {\n        resultListItem: Element;\n        attributesExpandContainer: HTMLElement;\n        currentHeight: number;\n        expandedHeight: number;\n        elementsToFadeInOrOut: Array<HTMLElement>;\n        expandAnimationDuration: number;\n        fadeInOrOutAnimationDuration: number;\n        relatedObjectsToolbar: HTMLElement;\n    } {\n        const oModel = this.getModel() as SearchModel;\n\n        // get the root DOM element\n        const resultListItemDomRef = this.getDomRef() as HTMLElement;\n        if (!resultListItemDomRef) {\n            throw new Error(\"DOM reference not found\");\n        }\n        // add class for expansion preparation\n        const domRef = this.getDomRef() as HTMLElement;\n        domRef?.classList.add(\"sapUshellSearchResultListItem-AttributesPrepareExpansion\");\n\n        // find the attributes expand container and related objects toolbar\n        const attributesExpandContainer = resultListItemDomRef.querySelector(\n            \".sapUshellSearchResultListItem-AttributesExpandContainer\"\n        ) as HTMLElement;\n        const relatedObjectsToolbar = resultListItemDomRef.querySelector(\n            \".sapUshellSearchResultListItem-RelatedObjectsToolbar\"\n        ) as HTMLElement;\n\n        let relatedObjectsToolbarHidden = false;\n        if (\n            relatedObjectsToolbar &&\n            window.getComputedStyle(relatedObjectsToolbar).display === \"none\" &&\n            !oModel.config.optimizeForValueHelp\n        ) {\n            relatedObjectsToolbar.style.display = \"block\";\n            relatedObjectsToolbarHidden = true;\n        }\n\n        const currentHeight = attributesExpandContainer ? attributesExpandContainer.offsetHeight : 0;\n        const expandedHeight =\n            (\n                resultListItemDomRef.querySelector(\n                    \".sapUshellSearchResultListItem-AttributesAndActions\"\n                ) as HTMLElement\n            )?.offsetHeight || 0;\n\n        resultListItemDomRef.classList.remove(\"sapUshellSearchResultListItem-AttributesPrepareExpansion\");\n\n        if (relatedObjectsToolbar && relatedObjectsToolbarHidden) {\n            relatedObjectsToolbar.style.display = \"\";\n        }\n\n        const elementsToFadeInOrOut = this._getElementsInExpandArea();\n        const expandAnimationDuration = 200;\n        const fadeInOrOutAnimationDuration = expandAnimationDuration / 10;\n\n        const expandAreaObjectInfo = {\n            resultListItem: this.getDomRef(),\n            attributesExpandContainer: attributesExpandContainer,\n            currentHeight: currentHeight,\n            expandedHeight: expandedHeight,\n            elementsToFadeInOrOut: elementsToFadeInOrOut,\n            expandAnimationDuration: expandAnimationDuration,\n            fadeInOrOutAnimationDuration: fadeInOrOutAnimationDuration,\n            relatedObjectsToolbar: relatedObjectsToolbar,\n        };\n\n        return expandAreaObjectInfo;\n    }\n\n    private _getElementsInExpandArea(): HTMLElement[] {\n        const domRef = this.getDomRef() as HTMLElement;\n        const elementsToFadeInOrOut: HTMLElement[] = [];\n        if (!domRef) {\n            return elementsToFadeInOrOut;\n        }\n\n        domRef.classList.add(\"sapUshellSearchResultListItem-AttributesPrepareExpansion\");\n\n        const attributeElements = Array.from(\n            domRef.querySelectorAll(\n                \".sapUshellSearchResultListItem-GenericAttribute:not(.sapUshellSearchResultListItem-ImageAttribute)\"\n            )\n        ) as HTMLElement[];\n\n        if (attributeElements.length > 0) {\n            const firstLineY = attributeElements[0].getBoundingClientRect().top;\n            attributeElements.forEach((el) => {\n                if (el.getBoundingClientRect().top > firstLineY) {\n                    elementsToFadeInOrOut.push(el);\n                }\n            });\n        }\n\n        domRef.classList.remove(\"sapUshellSearchResultListItem-AttributesPrepareExpansion\");\n\n        return elementsToFadeInOrOut;\n    }\n\n    // Sync the CSS class for selection state\n    private _syncSelectionCssClass(): void {\n        const selected = this.getProperty(\"selected\") as boolean;\n        if (selected) {\n            this.addStyleClass(\"sapUshellSearchResultListItem-Selected\");\n        } else {\n            this.removeStyleClass(\"sapUshellSearchResultListItem-Selected\");\n        }\n    }\n\n    public isShowingDetails(): boolean {\n        const expandAreaObjectInfo = this._getExpandAreaObjectInfo();\n\n        /////////////////////////////\n        // Expand Result List Item\n        if (expandAreaObjectInfo.currentHeight < expandAreaObjectInfo.expandedHeight) {\n            return false;\n        }\n        return true;\n    }\n\n    public showDetails(): void {\n        if (this.isShowingDetails()) {\n            return;\n        }\n\n        const expandAreaObjectInfo = this._getExpandAreaObjectInfo();\n\n        let attributesExpandContainer;\n        if (expandAreaObjectInfo?.attributesExpandContainer) {\n            attributesExpandContainer = expandAreaObjectInfo.attributesExpandContainer;\n        }\n\n        // set relatedObjectsToolbar opacity and display using native DOM\n        if (expandAreaObjectInfo.relatedObjectsToolbar) {\n            const relatedToolbar = expandAreaObjectInfo?.relatedObjectsToolbar;\n            if (relatedToolbar) {\n                relatedToolbar.style.opacity = \"0\";\n                relatedToolbar.style.display = \"block\";\n            }\n        }\n\n        const relatedObjectActionsToolbar = this.getAggregation(\n            \"_relatedObjectActionsToolbar\"\n        ) as SearchRelatedObjectsToolbar;\n        if (relatedObjectActionsToolbar) {\n            relatedObjectActionsToolbar.layoutToolbarElements();\n        }\n\n        const domRef = this.getDomRef() as HTMLElement;\n        if (domRef) {\n            domRef.classList.add(\"sapUshellSearchResultListItem-AttributesPrepareExpansion\");\n        }\n        let relatedObjectsToolbar;\n        if (expandAreaObjectInfo?.relatedObjectsToolbar) {\n            relatedObjectsToolbar = expandAreaObjectInfo.relatedObjectsToolbar;\n        }\n        const elementsToFadeInOrOut = expandAreaObjectInfo.elementsToFadeInOrOut;\n        const expandedHeight = expandAreaObjectInfo.expandedHeight;\n        const expandAnimationDuration = expandAreaObjectInfo.expandAnimationDuration;\n        const fadeInOrOutAnimationDuration = expandAreaObjectInfo.fadeInOrOutAnimationDuration;\n\n        // animate height of attributesExpandContainer\n        if (attributesExpandContainer) {\n            attributesExpandContainer.style.transition = `height ${expandAnimationDuration}ms`;\n            attributesExpandContainer.style.height = `${expandedHeight}px`;\n        }\n\n        // fade in elements in expand area\n        elementsToFadeInOrOut.forEach((el) => {\n            el.style.transition = `opacity ${fadeInOrOutAnimationDuration}ms`;\n            el.style.opacity = \"1\";\n        });\n\n        // fade in relatedObjectsToolbar\n        if (relatedObjectsToolbar) {\n            relatedObjectsToolbar.style.transition = `opacity ${expandAnimationDuration}ms`;\n            setTimeout(() => {\n                relatedObjectsToolbar.style.opacity = \"1\";\n            }, expandAnimationDuration / 2);\n        }\n\n        // after animation, update state and clean up\n        setTimeout(() => {\n            this.setProperty(\"expanded\", true, true);\n            if (attributesExpandContainer) {\n                attributesExpandContainer.classList.add(\"sapUshellSearchResultListItem-AttributesExpanded\");\n            }\n            elementsToFadeInOrOut.forEach((el) => {\n                el.style.opacity = \"\";\n                el.style.transition = \"\";\n            });\n            const domRef = this.getDomRef() as HTMLElement;\n            if (domRef) {\n                domRef.classList.remove(\"sapUshellSearchResultListItem-AttributesPrepareExpansion\");\n            }\n            if (relatedObjectsToolbar) {\n                relatedObjectsToolbar.style.display = \"\";\n                relatedObjectsToolbar.style.opacity = \"\";\n                relatedObjectsToolbar.style.transition = \"\";\n            }\n            // update expand button icon and tooltip\n            const expandButton = this.getAggregation(\"_expandButton\") as Button;\n            if (expandButton) {\n                expandButton.setTooltip(i18n.getText(\"hideDetailBtn_tooltip\"));\n                expandButton.setIcon(IconPool.getIconURI(\"slim-arrow-up\"));\n            }\n            this._renderAriaDescriptionElementForAttributes(\n                undefined,\n                /* withPrefix = */ /* doRender= */ false\n            );\n            this._renderAriaDescriptionElementForCollapsedOrExpandedState(\n                undefined,\n                /* withPrefix = */ /* doRender= */ false\n            );\n        }, expandAnimationDuration);\n    }\n\n    public hideDetails(): void {\n        if (!this.isShowingDetails()) {\n            return;\n        }\n\n        const expandAreaObjectInfo = this._getExpandAreaObjectInfo();\n        const elementsToFadeInOrOut = expandAreaObjectInfo.elementsToFadeInOrOut;\n        const expandAnimationDuration = expandAreaObjectInfo.expandAnimationDuration;\n        const fadeInOrOutAnimationDuration = expandAreaObjectInfo.fadeInOrOutAnimationDuration;\n        let fadeOutStarted = false;\n\n        let attributesExpandContainer;\n        if (expandAreaObjectInfo?.attributesExpandContainer) {\n            attributesExpandContainer = expandAreaObjectInfo.attributesExpandContainer;\n        }\n        let relatedObjectsToolbar;\n        if (expandAreaObjectInfo?.relatedObjectsToolbar) {\n            relatedObjectsToolbar = expandAreaObjectInfo.relatedObjectsToolbar;\n        }\n\n        // fade out relatedObjectsToolbar\n        if (relatedObjectsToolbar) {\n            relatedObjectsToolbar.style.transition = `opacity ${expandAnimationDuration / 2}ms`;\n            relatedObjectsToolbar.style.opacity = \"0\";\n        }\n\n        // calculate collapsed height (height of first attribute + spacer)\n        const domRef = this.getDomRef() as HTMLElement;\n        let attributeHeight = 0;\n        if (domRef) {\n            const mainAttr = domRef.querySelector(\n                \".sapUshellSearchResultListItem-MainAttribute\"\n            ) as HTMLElement;\n            const spacerAttr = domRef.querySelector(\n                \".sapUshellSearchResultListItem-ExpandSpacerAttribute\"\n            ) as HTMLElement;\n            if (mainAttr) {\n                attributeHeight += mainAttr.offsetHeight;\n            }\n            if (spacerAttr) {\n                attributeHeight += spacerAttr.offsetHeight;\n            }\n        }\n\n        // after animation, update state and clean up\n        const onTransitionEnd = (event: TransitionEvent) => {\n            if (event.propertyName === \"height\") {\n                if (attributesExpandContainer) {\n                    attributesExpandContainer.removeEventListener(\"transitionend\", onTransitionEnd);\n                }\n                clearTimeout(fadeOutTimeout);\n                // ensure fade out is done\n                if (!fadeOutStarted) {\n                    elementsToFadeInOrOut.forEach((el) => {\n                        el.style.opacity = \"0\";\n                    });\n                }\n                // clean up styles\n                if (attributesExpandContainer) {\n                    attributesExpandContainer.classList.remove(\n                        \"sapUshellSearchResultListItem-AttributesExpanded\"\n                    );\n                    attributesExpandContainer.style.height = \"\";\n                    attributesExpandContainer.style.transition = \"\";\n                }\n                elementsToFadeInOrOut.forEach((el) => {\n                    el.style.opacity = \"\";\n                    el.style.transition = \"\";\n                });\n                if (relatedObjectsToolbar) {\n                    relatedObjectsToolbar.style.opacity = \"\";\n                    relatedObjectsToolbar.style.transition = \"\";\n                }\n                this.setProperty(\"expanded\", false, true);\n                // update expand button icon and tooltip\n                const expandButton = this.getAggregation(\"_expandButton\") as Button;\n                if (expandButton) {\n                    expandButton.setTooltip(i18n.getText(\"showDetailBtn_tooltip\"));\n                    expandButton.setIcon(IconPool.getIconURI(\"slim-arrow-down\"));\n                }\n                this._renderAriaDescriptionElementForAttributes(\n                    undefined,\n                    /* withPrefix = */ /* doRender= */ false\n                );\n                this._renderAriaDescriptionElementForCollapsedOrExpandedState(\n                    undefined,\n                    /* withPrefix = */ /* doRender= */ false\n                );\n            }\n        };\n\n        // animate height of attributesExpandContainer\n        if (attributesExpandContainer) {\n            attributesExpandContainer.addEventListener(\"transitionend\", onTransitionEnd);\n            attributesExpandContainer.style.transition = `height ${expandAnimationDuration}ms`;\n            attributesExpandContainer.style.height = `${attributeHeight}px`;\n        }\n\n        // fade out elements in expand area (after most of the collapse animation)\n        const fadeOutTimeout = setTimeout(() => {\n            fadeOutStarted = true;\n            elementsToFadeInOrOut.forEach((el) => {\n                el.style.transition = `opacity ${fadeInOrOutAnimationDuration}ms`;\n                el.style.opacity = \"0\";\n            });\n        }, expandAnimationDuration - fadeInOrOutAnimationDuration);\n    }\n\n    public toggleDetails(): void {\n        let eventType;\n        const oModel = this.getModel() as SearchModel;\n\n        if (this.isShowingDetails()) {\n            eventType = UserEventType.ITEM_HIDE_DETAILS;\n            this.hideDetails();\n        } else {\n            eventType = UserEventType.ITEM_SHOW_DETAILS;\n            this.showDetails();\n        }\n\n        oModel.eventLogger.logEvent({\n            type: eventType,\n            itemPosition: this.getProperty(\"positionInList\"),\n            executionId: this.getProperty(\"resultSetId\"),\n            dataSourceKey: oModel.getDataSource().id,\n        });\n    }\n\n    // after rendering\n    // ===================================================================\n    onAfterRendering(): void {\n        this._showOrHideExpandButton();\n        // this._setListItemStatusBasedOnWindowSize();\n\n        this._renderAriaDescriptionElementForTitle(\n            undefined,\n            /* withPrefix = */ false,\n            /* doRender= */ false\n        );\n        this._renderAriaDescriptionElementForAttributes(undefined, /* withPrefix = */ /* doRender= */ false);\n        this._renderAriaDescriptionElementForCollapsedOrExpandedState(\n            undefined,\n            /* withPrefix = */ /* doRender= */ false\n        );\n\n        this._syncSelectionCssClass();\n        // use boldtagunescape like in highlighting for suggestions // TODO\n    }\n\n    public resizeEventHappened(): void {\n        this._showOrHideExpandButton();\n        // this._setListItemStatusBasedOnWindowSize();\n\n        const titleLink = this.getAggregation(\"_titleLink\") as Control;\n        const titleText = this.getAggregation(\"_titleText\") as Control;\n        const titleControl = titleLink.getDomRef() ? titleLink : titleText;\n        const oModel = this.getModel() as SearchModel;\n        if (this.supportsDragAndDrop(titleLink, oModel)) {\n            if (oModel.config.optimizeForValueHelp) {\n                const titleControlDom = titleControl.getDomRef() as HTMLElement;\n                titleControlDom.draggable = false;\n            }\n        }\n    }\n\n    // ===================================================================\n    //  some Helper Functions\n    // ===================================================================\n\n    private isHierarchyItem(): boolean {\n        return this.getProperty(\"titleIconUrl\") === \"sap-icon://folder-blank\"; // ToDo: Remove workaround\n    }\n\n    private supportsDragAndDrop(oControl: Control, oModel: SearchModel): boolean {\n        return (\n            typeof oModel.getSearchCompositeControlInstanceByChildControl(oControl) !== \"undefined\" &&\n            oModel.getSearchCompositeControlInstanceByChildControl(oControl).getDragDropConfig().length > 0\n        );\n    }\n\n    private _getPhoneSize(): number {\n        return 767;\n    }\n\n    private _resetPrecalculatedValues(): void {\n        this._visibleAttributes = undefined;\n        this._detailsArea = undefined;\n        this._showExpandButton = false;\n    }\n\n    /* private _setListItemStatusBasedOnWindowSize() {\n        const windowWidth = window.innerWidth;\n        const parentListItem = this.getProperty(\"parentListItem\");\n        if (this.getProperty(\"titleNavigation\") && windowWidth <= this._getPhoneSize()) {\n            parentListItem.setType(ListType.Active);\n        } else {\n            parentListItem.setType(ListType.Inactive);\n        }\n    } */\n\n    private _showOrHideExpandButton() {\n        const domRef = this.getDomRef() as HTMLElement;\n        if (!domRef) {\n            return;\n        }\n\n        const expandButtonContainer = domRef.querySelector(\n            \".sapUshellSearchResultListItem-ExpandButtonContainer\"\n        ) as HTMLElement | null;\n        if (!expandButtonContainer) {\n            return;\n        }\n        const isVisible = window.getComputedStyle(expandButtonContainer).visibility !== \"hidden\";\n\n        let shouldBeVisible = false;\n\n        const isDocumentItem = this.getProperty(\"imageFormat\")?.toLowerCase() === \"documentthumbnail\";\n\n        if (!isDocumentItem) {\n            const actionBar = domRef.querySelectorAll(\".sapUshellSearchResultListItem-RelatedObjectsToolbar\");\n            shouldBeVisible = actionBar.length > 0;\n        }\n\n        if (!isDocumentItem && !shouldBeVisible) {\n            const elementsInExpandArea = this._getElementsInExpandArea();\n            if (elementsInExpandArea.length > 0) {\n                shouldBeVisible = true;\n            }\n        }\n\n        if (isVisible && !shouldBeVisible) {\n            expandButtonContainer.style.visibility = \"hidden\";\n            expandButtonContainer.setAttribute(\"aria-hidden\", \"true\");\n            this.setAriaExpandedState();\n        } else if (!isVisible && shouldBeVisible) {\n            expandButtonContainer.style.visibility = \"\";\n            expandButtonContainer.removeAttribute(\"aria-hidden\");\n            this.setAriaExpandedState();\n        }\n    }\n\n    setAriaExpandedState(): boolean {\n        const expandButton = this.getAggregation(\"_expandButton\") as Button;\n        if (!expandButton) {\n            return;\n        }\n        const expandButtonDom = expandButton.getDomRef() as HTMLElement;\n        const thisDom = this.getDomRef() as HTMLElement;\n        let parentListItemDom: HTMLElement | null = null;\n        const parentListItem = this.getProperty(\"parentListItem\");\n        if (parentListItem) {\n            parentListItemDom = parentListItem.getDomRef() as HTMLElement;\n        } else if (thisDom) {\n            parentListItemDom = thisDom.closest(\"li\");\n        }\n        const expandButtonContainer = thisDom?.querySelector(\n            \".sapUshellSearchResultListItem-ExpandButtonContainer\"\n        ) as HTMLElement;\n\n        if (expandButtonContainer && window.getComputedStyle(expandButtonContainer).visibility === \"hidden\") {\n            if (expandButtonDom) {\n                expandButtonDom.removeAttribute(\"aria-expanded\");\n            }\n            if (parentListItemDom) {\n                parentListItemDom.removeAttribute(\"aria-expanded\");\n            }\n        } else {\n            const expanded = this.getProperty(\"expanded\");\n            if (expandButtonDom) {\n                expandButtonDom.setAttribute(\"aria-expanded\", expanded ? \"true\" : \"false\");\n            }\n            if (parentListItemDom) {\n                parentListItemDom.setAttribute(\"aria-expanded\", expanded ? \"true\" : \"false\");\n            }\n        }\n    }\n\n    private _registerItemPressHandler(): void {\n        const parentListItem = this.getProperty(\"parentListItem\");\n        if (parentListItem) {\n            parentListItem.attachPress((oEvent: Event) => {\n                this._performTitleNavigation({ event: oEvent });\n            });\n            this._registerItemPressHandler = () => {\n                //\n            };\n        }\n    }\n\n    private _performTitleNavigation(params?: { event: Event }): void {\n        const titleNavigation: NavigationTarget = this.getProperty(\"titleNavigation\");\n        if (titleNavigation instanceof NavigationTarget) {\n            titleNavigation.performNavigation({\n                event: params?.event,\n            });\n        }\n    }\n\n    private adjustCssDragAndDrop(value: Control, oModel: SearchModel) {\n        // Drag&Drop - cursor 'grab'\n        setTimeout(() => {\n            if (\n                typeof oModel.getSearchCompositeControlInstanceByChildControl(value) !== \"undefined\" &&\n                oModel.getSearchCompositeControlInstanceByChildControl(value).getDragDropConfig().length > 0\n            ) {\n                value.addStyleClass(\"sapUshellSearchResultListItem-SupportsDragAndDrop\");\n            }\n        });\n    }\n}\n"],"mappings":"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","ignoreList":[]}