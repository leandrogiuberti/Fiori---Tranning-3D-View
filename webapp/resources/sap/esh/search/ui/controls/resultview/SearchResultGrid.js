/*!
 * SAPUI5
 * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.
 * 
 */
sap.ui.define(["sap/esh/search/ui/SearchHelper","sap/f/GridContainer","sap/m/ImageContent","sap/m/GenericTile","sap/m/TileContent","sap/m/CheckBox","sap/m/HBox","sap/m/VBox","sap/m/Toolbar","./SearchText","../SearchLink","sap/ui/base/ManagedObject","../../SelectionMode","../../sinaNexTS/sina/AttributeFormatType"],function(e,t,s,a,i,n,l,o,r,c,d,u,p,g){"use strict";function h(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const f=h(c);const S=h(d);const m=p["SelectionMode"];const C=g["AttributeFormatType"];const b=t.extend("sap.esh.search.ui.controls.SearchResultGrid",{renderer:{apiVersion:2},constructor:function e(c,d){t.prototype.constructor.call(this,c,d);this.bindAggregation("items",{path:"publicSearchModel>/results/items",factory:(e,t)=>{const c=t.getObject();let d;let p;let g;let h;let b;let y;const T=[];if(c.data.attributes){p=new r({design:"Transparent",content:[]}).addStyleClass("sapUiTinyMarginBottom");T.push(p);const t=c.data.attributes.filter(e=>e?.metadata?.type==="ImageUrl");d=new n(`${e}--tileCheckBox`,{selected:{path:"publicSearchModel>selected"},select:()=>{this.ignoreNextTilePress=true;this.getItems().forEach(e=>{this._syncSelectionCssClass(e)})},enabled:{parts:[{path:"publicSearchModel>selectionEnabled"}]},visible:{parts:[{path:"publicSearchModel>/resultviewSelectionVisibility"},{path:"publicSearchModel>/config/resultviewSelectionMode"}],formatter:(e,t)=>e&&t!==m.OneItem}});p.addContent(d);if(t.length>0&&typeof t[0].value==="string"){g=new s(`${e}-Image`,{src:u.escapeSettingsValue(t[0].value)}).addStyleClass("sapUiMediumMarginBegin");const a=t[0].metadata.format;if(a===C.Round){g.addStyleClass("sapUshellResultListGrid-ImageContainerRound")}}let a;if(c.data?.defaultNavigationTarget){if(c.data.titleAttributes.length>0){b=new S(`${e}-Title`,{text:u.escapeSettingsValue(c.title),navigationTarget:c.data.defaultNavigationTarget});T.push(b)}else{b=new f("",{text:u.escapeSettingsValue(c.data.defaultNavigationTarget.text||"No Title (def. nav. target w/o text)")});T.push(b)}}else if(c.data.titleAttributes.length>0){b=new f("",{text:u.escapeSettingsValue(c.title)});T.push(b)}else if(c.data.detailAttributes.length>0){a=c.data.detailAttributes[0].valueFormatted;b=new f("",{text:u.escapeSettingsValue(a)});T.push(b)}if(g){T.push(g)}h=new o({items:[p,new o({items:T})]})}else{if(c.data["title"]){b=c.data["title"];y=c.data["subtitle"]}T.push(new o({items:[b,y]}));h=new l({items:T})}const v=new a(`${e}-resultItemTile`,{tileContent:new i(`${e}-resultItemTileContent`,{content:h}),press:e=>{if(this.ignoreNextTilePress){this.ignoreNextTilePress=false;return}const t=this.getModel("publicSearchModel");const s=t.getProperty(e.getSource().getBindingContext("publicSearchModel").getPath()).data;if(t.getProperty("/config/resultviewSelectionMode")===m.OneItem){const t=e.getSource().getTileContent()[0].getBindingContext("publicSearchModel").getObject();t.setSelected(!t.selected)}else{const t=s.defaultNavigationTarget;if(typeof t?.performNavigation==="function"){t.performNavigation({event:e})}const a=s.titleNavigation;if(typeof a?.performNavigation==="function"){a.performNavigation({event:e})}}this.getItems().forEach(e=>{this._syncSelectionCssClass(e)})}}).addStyleClass("sapElisaGridTile");return v}});this.addStyleClass("sapUshellResultListGrid")},onAfterRendering:function s(a){t.prototype.onAfterRendering.call(this,a);e.boldTagUnescaper(this.getDomRef());e.resultItemCustomStyleClassSetter(this);this.getItems().forEach(e=>{this._syncSelectionCssClass(e)})},_syncSelectionCssClass:function e(t){const s=t.getBindingContext("publicSearchModel").getProperty("selected");if(s){t.addStyleClass("sapUshellSearchResultGridTile-Selected")}else{t.removeStyleClass("sapUshellSearchResultGridTile-Selected")}}});return b});
//# sourceMappingURL=SearchResultGrid.js.map