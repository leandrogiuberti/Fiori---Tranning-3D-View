{"version":3,"file":"SearchCountBreadcrumbs.js","names":["sap","ui","define","Control","sap_m_library","Icon","Label","Breadcrumbs","SearchLink","formatMessage","HBox","__i18n","VBox","_interopRequireDefault","obj","__esModule","default","LabelDesign","BreadcrumbsSeparatorStyle","i18n","FlexAlignItems","SearchCountBreadcrumbs","extend","renderer","apiVersion","render","oRm","oControl","openStart","class","openEnd","searchModel","getModel","config","folderMode","optimizeForValueHelp","hBox","getAggregation","addItem","FF_hierarchyBreadcrumbs","vBox","renderControl","close","metadata","aggregations","containerHbox","type","multiple","folderModeLabel","icon","label","breadcrumbsContainerVbox","breadcrumbs","constructor","_constructor","sId","settings","Control.prototype.constructor.call","this","initContainerHbox","initFolderModeLabel","initIcon","initLabel","initBreadcrumbsContainerVbox","initBreadCrumbs","_initContainerHbox","getId","alignItems","Baseline","addStyleClass","setAggregation","_initFolderModeLabel","design","Bold","text","parts","path","formatter","isFolderMode","getText","_initIcon","visible","count","Array","isArray","length","src","_initLabel","_initBreadcrumbsContainerVbox","_initBreadCrumbs","links","factory","navigationTarget","_id","_label","sina","sinaNext","dataSource","getDataSource","attrName","getProperty","navTarget","createStaticHierarchySearchNavigationTarget","templateShareable","breadCrumbsSettings","currentLocationText","separatorStyle","GreaterThan","breadCrumbs","handleBreadcrumbLinkPress","_handleBreadcrumbLinkPress","oEvent","oSrc","getSource","valueRaw","data","containerId","valueLabel","containerName","performNavigation","setModel","_setModel","model"],"sources":["SearchCountBreadcrumbs.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport Control, { $ControlSettings } from \"sap/ui/core/Control\";\nimport { LabelDesign } from \"sap/m/library\";\nimport Icon from \"sap/ui/core/Icon\";\nimport Label from \"sap/m/Label\";\nimport Breadcrumbs, { $BreadcrumbsSettings } from \"sap/m/Breadcrumbs\";\nimport SearchLink from \"sap/esh/search/ui/controls/SearchLink\";\nimport RenderManager from \"sap/ui/core/RenderManager\";\nimport SearchModel from \"sap/esh/search/ui/SearchModel\";\nimport Link from \"sap/m/Link\";\nimport Event from \"sap/ui/base/Event\";\nimport formatMessage from \"sap/base/strings/formatMessage\";\nimport { BreadcrumbsSeparatorStyle } from \"sap/m/library\";\nimport HBox from \"sap/m/HBox\";\nimport i18n from \"../../i18n\";\nimport VBox from \"sap/m/VBox\";\nimport { NavigationTarget } from \"../../sinaNexTS/sina/NavigationTarget\";\nimport { FlexAlignItems } from \"sap/m/library\";\n\nexport interface $SearchCountBreadcrumbs extends $ControlSettings {\n    containerHbox: HBox;\n    folderModeLabel: Label;\n    icon: Icon;\n    label: Label;\n    breadcrumbsContainerVbox: VBox;\n    breadcrumbs: Breadcrumbs;\n}\n\n/**\n * @namespace sap.esh.search.ui.controls\n */\nexport default class SearchCountBreadcrumbs extends Control {\n    static readonly metadata = {\n        aggregations: {\n            containerHbox: {\n                type: \"sap.m.HBox\",\n                multiple: false,\n            },\n            folderModeLabel: {\n                type: \"sap.m.Label\",\n                multiple: false,\n            },\n            icon: {\n                type: \"sap.ui.core.Icon\",\n                multiple: false,\n            },\n            label: {\n                type: \"sap.m.Label\",\n                multiple: false,\n            },\n            breadcrumbsContainerVbox: {\n                type: \"sap.m.VBox\",\n                multiple: false,\n            },\n            breadcrumbs: {\n                type: \"sap.m.Breadcrumbs\",\n                multiple: false,\n            },\n        },\n    };\n\n    constructor(sId: string, settings?: Partial<$SearchCountBreadcrumbs>) {\n        super(sId, settings);\n        this.initContainerHbox();\n        this.initFolderModeLabel();\n        this.initIcon();\n        this.initLabel();\n        this.initBreadcrumbsContainerVbox();\n        this.initBreadCrumbs();\n    }\n    initContainerHbox(): void {\n        const hBox = new HBox(this.getId() + \"-ContainerHbox\", {\n            alignItems: FlexAlignItems.Baseline,\n        });\n        hBox.addStyleClass(\"sapUiNoMargin\");\n        this.setAggregation(\"containerHbox\", hBox);\n    }\n    initFolderModeLabel(): void {\n        const label = new Label(this.getId() + \"-FolderModeLabel\", {\n            design: LabelDesign.Bold,\n            text: {\n                parts: [\n                    {\n                        path: \"/isFolderMode\",\n                    },\n                ],\n                formatter: (isFolderMode: boolean): string => {\n                    if (isFolderMode === true) {\n                        return i18n.getText(\"result_list_folder_mode\");\n                    }\n                    return i18n.getText(\"result_list_search_mode\");\n                },\n            },\n        });\n        label.addStyleClass(\"sapUshellSearchTotalCountSelenium\");\n        label.addStyleClass(\"sapUiTinyMarginEnd\");\n        label.addStyleClass(\"sapElisaFolderModeLabel\");\n        this.setAggregation(\"folderModeLabel\", label);\n    }\n\n    initIcon(): void {\n        const icon = new Icon(this.getId() + \"-Icon\", {\n            visible: {\n                parts: [\n                    {\n                        path: \"/count\",\n                    },\n                    {\n                        path: \"/breadcrumbsHierarchyNodePaths\",\n                    },\n                ],\n                formatter: (count: number, breadcrumbs: string): boolean => {\n                    if (breadcrumbs && Array.isArray(breadcrumbs) && breadcrumbs.length > 0) {\n                        return false;\n                    }\n                    return true;\n                },\n            },\n            src: { path: \"/searchInIcon\" },\n        });\n        icon.addStyleClass(\"sapUiTinyMarginEnd\");\n        icon.addStyleClass(\"sapUshellSearchTotalCountBreadcrumbsIcon\");\n        this.setAggregation(\"icon\", icon);\n    }\n\n    initLabel(): void {\n        const label = new Label(this.getId() + \"-Label\", {\n            visible: {\n                parts: [\n                    {\n                        path: \"/count\",\n                    },\n                    {\n                        path: \"/breadcrumbsHierarchyNodePaths\",\n                    },\n                ],\n                formatter: (count: number, breadcrumbs: string): boolean => {\n                    if (breadcrumbs && Array.isArray(breadcrumbs) && breadcrumbs.length > 0) {\n                        return false;\n                    }\n                    return true;\n                },\n            },\n            design: LabelDesign.Bold,\n            text: { path: \"/countText\" },\n        });\n        label.addStyleClass(\"sapUshellSearchTotalCountSelenium\");\n        label.addStyleClass(\"sapUshellSearchTotalCountStandalone\");\n        this.setAggregation(\"label\", label);\n    }\n    initBreadcrumbsContainerVbox(): void {\n        const vBox = new VBox(this.getId() + \"-BreadcrumbsContainerVbox\", {});\n        vBox.addStyleClass(\"sapElisaBreadcrumbsFolderContainerVbox\");\n        vBox.addStyleClass(\"sapUiNoMargin\");\n        this.setAggregation(\"breadcrumbsContainerVbox\", vBox);\n    }\n\n    initBreadCrumbs(): void {\n        const links = {\n            path: \"/breadcrumbsHierarchyNodePaths\",\n            factory: (sId: string): SearchLink => {\n                return new SearchLink(`${sId}--searchLink`, {\n                    navigationTarget: {\n                        parts: [\n                            {\n                                path: \"id\",\n                            },\n                            {\n                                path: \"label\",\n                            },\n                        ],\n                        formatter: (_id: string, _label: string): NavigationTarget => {\n                            const searchModel = this.getModel() as SearchModel;\n                            const sina = searchModel.sinaNext;\n                            const dataSource = searchModel.getDataSource();\n                            const attrName = searchModel.getProperty(\"/breadcrumbsHierarchyAttribute\");\n                            const navTarget = sina.createStaticHierarchySearchNavigationTarget(\n                                _id,\n                                _label,\n                                dataSource,\n                                \"\",\n                                attrName\n                            );\n                            return navTarget;\n                        },\n                    },\n                    text: { path: \"label\" },\n                    icon: { path: \"icon\" },\n                    visible: true,\n                }).addStyleClass(\"sapUshellSearchTotalCountBreadcrumbsLinks\");\n            },\n            templateShareable: false,\n        };\n        const breadCrumbsSettings: $BreadcrumbsSettings = {\n            visible: {\n                parts: [\n                    {\n                        path: \"/breadcrumbsHierarchyNodePaths\",\n                    },\n                ],\n                formatter: (path: string): boolean => {\n                    if (path && Array.isArray(path) && path.length > 0) {\n                        return true;\n                    }\n                    return false;\n                },\n            },\n            currentLocationText: {\n                parts: [{ path: \"i18n>countnumber\" }, { path: \"/count\" }],\n                formatter: formatMessage,\n            },\n            separatorStyle: BreadcrumbsSeparatorStyle.GreaterThan,\n            links: links,\n        };\n        const breadCrumbs = new Breadcrumbs(this.getId() + \"-Breadcrumbs\", breadCrumbsSettings).addStyleClass(\n            \"sapElisaBreadcrumbs sapUiNoMarginBottom\"\n        );\n        this.setAggregation(\"breadcrumbs\", breadCrumbs);\n    }\n\n    handleBreadcrumbLinkPress(oEvent: Event): void {\n        const oSrc = oEvent.getSource() as Link;\n        const valueRaw = oSrc.data().containerId;\n        const valueLabel = oSrc.data().containerName;\n        const searchModel = oSrc.getModel() as SearchModel;\n        const sina = searchModel.sinaNext;\n        const dataSource = searchModel.getDataSource();\n        const attrName = searchModel.getProperty(\"/breadcrumbsHierarchyAttribute\");\n        const navTarget = sina.createStaticHierarchySearchNavigationTarget(\n            valueRaw,\n            valueLabel,\n            dataSource,\n            \"\",\n            attrName\n        );\n        navTarget.performNavigation();\n    }\n\n    setModel(model: SearchModel): this {\n        (this.getAggregation(\"folderModeLabel\") as Label).setModel(model);\n        (this.getAggregation(\"icon\") as Icon).setModel(model);\n        (this.getAggregation(\"label\") as Label).setModel(model);\n        (this.getAggregation(\"breadcrumbs\") as Breadcrumbs).setModel(model);\n        return this;\n    }\n\n    static renderer = {\n        apiVersion: 2,\n        render(oRm: RenderManager, oControl: SearchCountBreadcrumbs): void {\n            oRm.openStart(\"div\", oControl);\n            oRm.class(\"sapUshellSearchTotalCountBreadcrumbs\");\n            oRm.openEnd();\n\n            const searchModel = oControl.getModel() as SearchModel;\n\n            // in case of folder mode/search mode, display additional folderModeLabel\n            if (searchModel.config.folderMode === true && searchModel.config.optimizeForValueHelp !== true) {\n                const hBox = oControl.getAggregation(\"containerHbox\") as HBox;\n                hBox.addItem(oControl.getAggregation(\"folderModeLabel\") as Label);\n                hBox.addItem(oControl.getAggregation(\"icon\") as Icon);\n                hBox.addItem(oControl.getAggregation(\"label\") as Label);\n\n                if (searchModel.config.FF_hierarchyBreadcrumbs === true) {\n                    // for sake of responsiveness, additional container is needed\n                    const vBox = oControl.getAggregation(\"breadcrumbsContainerVbox\") as VBox;\n                    vBox?.addItem(oControl.getAggregation(\"breadcrumbs\") as Breadcrumbs);\n                    hBox.addItem(vBox);\n                    oRm.renderControl(hBox);\n                }\n            } else {\n                oRm.renderControl(oControl.getAggregation(\"icon\") as Icon);\n                oRm.renderControl(oControl.getAggregation(\"label\") as Label);\n\n                if (searchModel.config.FF_hierarchyBreadcrumbs === true) {\n                    oRm.renderControl(oControl.getAggregation(\"breadcrumbs\") as Breadcrumbs);\n                }\n            }\n\n            oRm.close(\"div\");\n        },\n    };\n}\n"],"mappings":";;;;;AAAAA,IAAAC,GAAAC,OAAA,sNAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAAA,sBAAAC,EAAAC,GAAA,OAAAA,KAAAC,mBAAAD,EAAAE,UAAA,YAAAF,EAAAE,QAAAF,CAAA,OAMSG,EAAWb,EAAA,qBAUXc,EAAyBd,EAAA,mCAE3Be,EAAIN,EAAAF,GAAA,MAGFS,EAAchB,EAAA,kBAWvB,MAGqBiB,EAA+BlB,EAAOmB,OAAA,qDAuNhDC,SAAW,CACdC,WAAY,EACZC,OAAOC,EAAoBC,GACvBD,EAAIE,UAAU,MAAOD,GACrBD,EAAIG,MAAM,wCACVH,EAAII,UAEJ,MAAMC,EAAcJ,EAASK,WAG7B,GAAID,EAAYE,OAAOC,aAAe,MAAQH,EAAYE,OAAOE,uBAAyB,KAAM,CAC5F,MAAMC,EAAOT,EAASU,eAAe,iBACrCD,EAAKE,QAAQX,EAASU,eAAe,oBACrCD,EAAKE,QAAQX,EAASU,eAAe,SACrCD,EAAKE,QAAQX,EAASU,eAAe,UAErC,GAAIN,EAAYE,OAAOM,0BAA4B,KAAM,CAErD,MAAMC,EAAOb,EAASU,eAAe,4BACrCG,GAAMF,QAAQX,EAASU,eAAe,gBACtCD,EAAKE,QAAQE,GACbd,EAAIe,cAAcL,EACtB,CACJ,KAAO,CACHV,EAAIe,cAAcd,EAASU,eAAe,SAC1CX,EAAIe,cAAcd,EAASU,eAAe,UAE1C,GAAIN,EAAYE,OAAOM,0BAA4B,KAAM,CACrDb,EAAIe,cAAcd,EAASU,eAAe,eAC9C,CACJ,CAEAX,EAAIgB,MAAM,MACd,GAvPYC,SAAW,CACvBC,aAAc,CACVC,cAAe,CACXC,KAAM,aACNC,SAAU,OAEdC,gBAAiB,CACbF,KAAM,cACNC,SAAU,OAEdE,KAAM,CACFH,KAAM,mBACNC,SAAU,OAEdG,MAAO,CACHJ,KAAM,cACNC,SAAU,OAEdI,yBAA0B,CACtBL,KAAM,aACNC,SAAU,OAEdK,YAAa,CACTN,KAAM,oBACNC,SAAU,SAKtBM,YAAW,SAAAC,EAACC,EAAaC,GACrBC,6BAAAC,KAAMH,EAAKC,GACXE,KAAKC,oBACLD,KAAKE,sBACLF,KAAKG,WACLH,KAAKI,YACLJ,KAAKK,+BACLL,KAAKM,iBACT,EACAL,kBAAiB,SAAAM,IACb,MAAM7B,EAAO,IAAI1B,EAAKgD,KAAKQ,QAAU,iBAAkB,CACnDC,WAAY/C,EAAegD,WAE/BhC,EAAKiC,cAAc,iBACnBX,KAAKY,eAAe,gBAAiBlC,EACzC,EACAwB,oBAAmB,SAAAW,IACf,MAAMrB,EAAQ,IAAI5C,EAAMoD,KAAKQ,QAAU,mBAAoB,CACvDM,OAAQvD,EAAYwD,KACpBC,KAAM,CACFC,MAAO,CACH,CACIC,KAAM,kBAGdC,UAAYC,IACR,GAAIA,IAAiB,KAAM,CACvB,OAAO3D,EAAK4D,QAAQ,0BACxB,CACA,OAAO5D,EAAK4D,QAAQ,+BAIhC7B,EAAMmB,cAAc,qCACpBnB,EAAMmB,cAAc,sBACpBnB,EAAMmB,cAAc,2BACpBX,KAAKY,eAAe,kBAAmBpB,EAC3C,EAEAW,SAAQ,SAAAmB,IACJ,MAAM/B,EAAO,IAAI5C,EAAKqD,KAAKQ,QAAU,QAAS,CAC1Ce,QAAS,CACLN,MAAO,CACH,CACIC,KAAM,UAEV,CACIA,KAAM,mCAGdC,UAAWA,CAACK,EAAe9B,KACvB,GAAIA,GAAe+B,MAAMC,QAAQhC,IAAgBA,EAAYiC,OAAS,EAAG,CACrE,OAAO,KACX,CACA,OAAO,OAGfC,IAAK,CAAEV,KAAM,mBAEjB3B,EAAKoB,cAAc,sBACnBpB,EAAKoB,cAAc,4CACnBX,KAAKY,eAAe,OAAQrB,EAChC,EAEAa,UAAS,SAAAyB,IACL,MAAMrC,EAAQ,IAAI5C,EAAMoD,KAAKQ,QAAU,SAAU,CAC7Ce,QAAS,CACLN,MAAO,CACH,CACIC,KAAM,UAEV,CACIA,KAAM,mCAGdC,UAAWA,CAACK,EAAe9B,KACvB,GAAIA,GAAe+B,MAAMC,QAAQhC,IAAgBA,EAAYiC,OAAS,EAAG,CACrE,OAAO,KACX,CACA,OAAO,OAGfb,OAAQvD,EAAYwD,KACpBC,KAAM,CAAEE,KAAM,gBAElB1B,EAAMmB,cAAc,qCACpBnB,EAAMmB,cAAc,uCACpBX,KAAKY,eAAe,QAASpB,EACjC,EACAa,6BAA4B,SAAAyB,IACxB,MAAMhD,EAAO,IAAI5B,EAAK8C,KAAKQ,QAAU,4BAA6B,CAAC,GACnE1B,EAAK6B,cAAc,0CACnB7B,EAAK6B,cAAc,iBACnBX,KAAKY,eAAe,2BAA4B9B,EACpD,EAEAwB,gBAAe,SAAAyB,IACX,MAAMC,EAAQ,CACVd,KAAM,iCACNe,QAAUpC,GACC,IAAI/C,EAAW,GAAG+C,gBAAmB,CACxCqC,iBAAkB,CACdjB,MAAO,CACH,CACIC,KAAM,MAEV,CACIA,KAAM,UAGdC,UAAWA,CAACgB,EAAaC,KACrB,MAAM/D,EAAc2B,KAAK1B,WACzB,MAAM+D,EAAOhE,EAAYiE,SACzB,MAAMC,EAAalE,EAAYmE,gBAC/B,MAAMC,EAAWpE,EAAYqE,YAAY,kCACzC,MAAMC,EAAYN,EAAKO,4CACnBT,EACAC,EACAG,EACA,GACAE,GAEJ,OAAOE,IAGf3B,KAAM,CAAEE,KAAM,SACd3B,KAAM,CAAE2B,KAAM,QACdK,QAAS,OACVZ,cAAc,6CAErBkC,kBAAmB,OAEvB,MAAMC,EAA4C,CAC9CvB,QAAS,CACLN,MAAO,CACH,CACIC,KAAM,mCAGdC,UAAYD,IACR,GAAIA,GAAQO,MAAMC,QAAQR,IAASA,EAAKS,OAAS,EAAG,CAChD,OAAO,IACX,CACA,OAAO,QAGfoB,oBAAqB,CACjB9B,MAAO,CAAC,CAAEC,KAAM,oBAAsB,CAAEA,KAAM,WAC9CC,UAAWpE,GAEfiG,eAAgBxF,EAA0ByF,YAC1CjB,MAAOA,GAEX,MAAMkB,EAAc,IAAIrG,EAAYmD,KAAKQ,QAAU,eAAgBsC,GAAqBnC,cACpF,2CAEJX,KAAKY,eAAe,cAAesC,EACvC,EAEAC,0BAAyB,SAAAC,EAACC,GACtB,MAAMC,EAAOD,EAAOE,YACpB,MAAMC,EAAWF,EAAKG,OAAOC,YAC7B,MAAMC,EAAaL,EAAKG,OAAOG,cAC/B,MAAMvF,EAAciF,EAAKhF,WACzB,MAAM+D,EAAOhE,EAAYiE,SACzB,MAAMC,EAAalE,EAAYmE,gBAC/B,MAAMC,EAAWpE,EAAYqE,YAAY,kCACzC,MAAMC,EAAYN,EAAKO,4CACnBY,EACAG,EACApB,EACA,GACAE,GAEJE,EAAUkB,mBACd,EAEAC,SAAQ,SAAAC,EAACC,GACJhE,KAAKrB,eAAe,mBAA6BmF,SAASE,GAC1DhE,KAAKrB,eAAe,QAAiBmF,SAASE,GAC9ChE,KAAKrB,eAAe,SAAmBmF,SAASE,GAChDhE,KAAKrB,eAAe,eAA+BmF,SAASE,GAC7D,OAAOhE,IACX,IAAC,OArNgBrC,CAAsB","ignoreList":[]}