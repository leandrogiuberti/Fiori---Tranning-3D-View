{"version":3,"file":"SearchTileHighlighter.js","names":["sap","ui","define","sap_esh_search_ui_SearchHelper","encodeXml","Hyphenation","Tester","SearchHelper","Highlighter","_softHyphenRegExp","tester","constructor","this","RegExp","setHighlightTerms","highlightTerms","highlight","tileView","node","getDomRef","oHyphenation","getInstance","isLanguageInitialized","initialize","then","doHighlight","bind","nodeType","window","Node","TEXT_NODE","highlightTextNode","i","childNodes","length","child","removeSoftHyphens","text","replace","testResult","test","textContent","bMatch","spanNode","document","createElement","innerHTML","sHighlightedText","boldTagUnescaper","parentNode","insertBefore","removeChild","__exports","__esModule"],"sources":["SearchTileHighlighter.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport { Tester } from \"sap/esh/search/ui/SearchHelper\";\nimport * as SearchHelper from \"sap/esh/search/ui/SearchHelper\";\nimport Control from \"sap/ui/core/Control\";\nimport encodeXml from \"sap/base/security/encodeXML\";\nimport Hyphenation from \"sap/ui/core/hyphenation/Hyphenation\";\n\n/**\n * @namespace sap.esh.search.ui.controls\n */\nexport class Highlighter {\n    private _softHyphenRegExp: RegExp;\n    tester: Tester;\n\n    constructor() {\n        this._softHyphenRegExp = new RegExp(\"[\\u00ad]\", \"g\");\n    }\n\n    setHighlightTerms(highlightTerms: string): void {\n        this.tester = new Tester(highlightTerms, \"sapUshellSearchHighlight\", true, \"or\");\n    }\n\n    highlight(tileView: Control): void {\n        const node = tileView.getDomRef();\n        if (!node) {\n            return;\n        }\n        const oHyphenation = Hyphenation.getInstance();\n        if (!oHyphenation.isLanguageInitialized()) {\n            oHyphenation.initialize().then(\n                function () {\n                    this.doHighlight(node);\n                }.bind(this),\n                function () {\n                    this.doHighlight(node);\n                }.bind(this)\n            );\n        } else {\n            this.doHighlight(node);\n        }\n    }\n\n    doHighlight(node: Element | ChildNode): HTMLElement {\n        if (node.nodeType === window.Node.TEXT_NODE) {\n            this.highlightTextNode(node);\n            return;\n        }\n        for (let i = 0; i < node.childNodes.length; ++i) {\n            const child = node.childNodes[i];\n            this.doHighlight(child);\n        }\n    }\n\n    removeSoftHyphens(text: string): string {\n        return text.replace(this._softHyphenRegExp, \"\");\n    }\n\n    highlightTextNode(node: Element | ChildNode): HTMLElement {\n        // check for match\n        const testResult = this.tester.test(this.removeSoftHyphens(node.textContent));\n        if (!testResult.bMatch) {\n            return;\n        }\n        // match -> replace dom node\n        const spanNode = document.createElement(\"span\");\n        spanNode.innerHTML = encodeXml(testResult.sHighlightedText);\n        SearchHelper.boldTagUnescaper(spanNode, \"sapUshellSearchHighlight\");\n        node.parentNode.insertBefore(spanNode, node);\n        node.parentNode.removeChild(node);\n    }\n}\n"],"mappings":";;;;;AAAAA,IAAAC,GAAAC,OAAA,gHAAAC,EAAAC,EAAAC,GAAA,mBAKSC,EAAMH,EAAA,gBACHI,EAAYJ,EAQjB,MAAMK,EACDC,kBACRC,OAEAC,cACIC,KAAKH,kBAAoB,IAAII,OAAO,MAAY,IACpD,CAEAC,kBAAkBC,GACdH,KAAKF,OAAS,IAAIJ,EAAOS,EAAgB,2BAA4B,KAAM,KAC/E,CAEAC,UAAUC,GACN,MAAMC,EAAOD,EAASE,YACtB,IAAKD,EAAM,CACP,MACJ,CACA,MAAME,EAAef,EAAYgB,cACjC,IAAKD,EAAaE,wBAAyB,CACvCF,EAAaG,aAAaC,KACtB,WACIZ,KAAKa,YAAYP,EACrB,EAAEQ,KAAKd,MACP,WACIA,KAAKa,YAAYP,EACrB,EAAEQ,KAAKd,MAEf,KAAO,CACHA,KAAKa,YAAYP,EACrB,CACJ,CAEAO,YAAYP,GACR,GAAIA,EAAKS,WAAaC,OAAOC,KAAKC,UAAW,CACzClB,KAAKmB,kBAAkBb,GACvB,MACJ,CACA,IAAK,IAAIc,EAAI,EAAGA,EAAId,EAAKe,WAAWC,SAAUF,EAAG,CAC7C,MAAMG,EAAQjB,EAAKe,WAAWD,GAC9BpB,KAAKa,YAAYU,EACrB,CACJ,CAEAC,kBAAkBC,GACd,OAAOA,EAAKC,QAAQ1B,KAAKH,kBAAmB,GAChD,CAEAsB,kBAAkBb,GAEd,MAAMqB,EAAa3B,KAAKF,OAAO8B,KAAK5B,KAAKwB,kBAAkBlB,EAAKuB,cAChE,IAAKF,EAAWG,OAAQ,CACpB,MACJ,CAEA,MAAMC,EAAWC,SAASC,cAAc,QACxCF,EAASG,UAAY1C,EAAUmC,EAAWQ,kBAC1CxC,EAAayC,iBAAiBL,EAAU,4BACxCzB,EAAK+B,WAAWC,aAAaP,EAAUzB,GACvCA,EAAK+B,WAAWE,YAAYjC,EAChC,EACH,IAAAkC,EAAA,CAAAC,WAAA,MAAAD,EAAA5C,cAAA,OAAA4C,CAAA","ignoreList":[]}