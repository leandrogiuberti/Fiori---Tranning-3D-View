{"version":3,"file":"SearchLink-dbg.js","names":["sap","ui","define","SearchHelper","Link","___sinaNexTS_sina_NavigationTarget","___uiConstants","NavigationTarget","initialValueUnicode","SearchLink","extend","renderer","apiVersion","metadata","properties","navigationTarget","type","group","constructor","_constructor","sId","settings","Link.prototype.constructor.call","_pressHandlerAttached","addStyleClass","pressHandlerSearchLink","_pressHandlerSearchLink","oEvent","navTarget","getNavigationTarget","model","getModel","config","clearObjectSelectionOnSearchLinkClick","resetKeyStore","targetUrl","performNavigation","trackingOnly","event","preventDefault","setNavigationTarget","_setNavigationTarget","setProperty","text","getText","length","targetFunction","navigationTargetHref","navigationTargetTarget","target","navigationTargetIcon","icon","getIcon","setIcon","navigationTargetTooltip","tooltip","getTooltip","setTooltip","setText","_setText","sText","_getNavigationTarget","getProperty","setEnabled","_setEnabled","bEnabled","_setIcon","sIcon","startsWith","Link.prototype.setIcon.call","onAfterRendering","_onAfterRendering","Link.prototype.onAfterRendering.call","isDestroyed","attachPress","linkDomRef","getDomRef","boldTagUnescaper","calculateTooltipForwordEllipsis","_handlePress","localName","oTarget","parentElement","prototype","apply","arguments","onsapenter","_onsapenter","onclick","_onclick"],"sources":["SearchLink.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport * as SearchHelper from \"sap/esh/search/ui/SearchHelper\";\nimport Icon from \"sap/ui/core/Icon\";\nimport { URI as sapURI } from \"sap/ui/core/library\";\nimport Link from \"sap/m/Link\";\nimport { NavigationTarget } from \"../sinaNexTS/sina/NavigationTarget\";\nimport { MetadataOptions, PropertyBindingInfo } from \"sap/ui/base/ManagedObject\";\nimport { $ControlSettings } from \"sap/ui/core/Control\";\nimport { initialValueUnicode } from \"../uiConstants\";\nimport { NavigationTarget as NavigationTargetApi } from \"../ResultSetApi\"; // reduced sina-NavigationTarget ()\nimport type SearchModel from \"../SearchModel\";\n\nexport interface $SearchLinkSettings extends $ControlSettings {\n    navigationTarget: NavigationTarget | PropertyBindingInfo | NavigationTargetApi;\n    icon?: Icon;\n    href?: string;\n    enabled?: boolean;\n    target?: string;\n    text?: string | PropertyBindingInfo;\n    wrapping?: boolean;\n}\n\n/**\n * @namespace sap.esh.search.ui.controls\n */\nexport default class SearchLink extends Link {\n    static readonly metadata: MetadataOptions = {\n        properties: {\n            navigationTarget: {\n                type: \"object\",\n                group: \"Data\",\n            },\n        },\n    };\n\n    private _pressHandlerAttached = false;\n\n    constructor(sId?: string, settings?) {\n        super(sId, settings);\n        this.addStyleClass(\"sapUshellSearchLink\");\n    }\n\n    pressHandlerSearchLink(oEvent): void {\n        const navTarget = this.getNavigationTarget();\n        const model = this.getModel() as SearchModel;\n        if (model && model.config?.clearObjectSelectionOnSearchLinkClick) {\n            (this.getModel() as SearchModel).resetKeyStore();\n        }\n\n        if (navTarget.targetUrl) {\n            // 1) navigation target has target url\n            // - navigation itself is performed by clicking on <a> tag\n            // - performNavigation is just called for tracking\n            navTarget.performNavigation({\n                trackingOnly: true,\n                event: oEvent,\n            });\n        } else {\n            // 2) no target url instead there is a js target function\n            // performNavigation does tracking + navigation (window.open...)\n            oEvent.preventDefault(); // really necessary?\n            navTarget.performNavigation({\n                event: oEvent,\n            });\n        }\n        // oEvent.preventDefault does work for\n        // -desktop\n        // -mobile in case targetUrl=empty\n        // oEvent.preventDefault does not work for mobile in case targetUrl is filled\n        // reason: for mobile there is a UI5 async event simulation so preventDefault does not work\n        // for sap.m.Link this a special logic which makes preventDefault working for mobile in case\n        // targetUrl=empty (href='#')\n    }\n\n    setNavigationTarget(navigationTarget: NavigationTarget): this {\n        this.setProperty(\"navigationTarget\", navigationTarget);\n\n        // calculate enabled\n        const text = this.getText();\n        if (\n            ((typeof navigationTarget?.targetUrl !== \"string\" || navigationTarget?.targetUrl?.length === 0) &&\n                typeof navigationTarget?.targetFunction !== \"function\") ||\n            !(typeof text === \"string\" && text !== initialValueUnicode) // dash\n        ) {\n            this.setProperty(\"enabled\", false);\n        } else {\n            this.setProperty(\"enabled\", true);\n        }\n\n        // set href\n        const navigationTargetHref = navigationTarget?.targetUrl;\n        if (typeof navigationTargetHref === \"string\" && navigationTargetHref?.length > 0) {\n            this.setProperty(\"href\", navigationTargetHref);\n        } else {\n            this.setProperty(\"href\", \"\");\n        }\n\n        // set target\n        const navigationTargetTarget = navigationTarget?.target;\n        if (typeof navigationTargetTarget === \"string\" && navigationTargetTarget?.length > 0) {\n            this.setProperty(\"target\", navigationTargetTarget);\n        } else {\n            this.setProperty(\"target\", \"_self\");\n        }\n\n        // set icon\n        const navigationTargetIcon = navigationTarget?.icon;\n        if (!this.getIcon() && typeof navigationTargetIcon === \"string\" && navigationTargetIcon?.length > 0) {\n            this.setIcon(navigationTargetIcon);\n        }\n\n        // set tooltip\n        const navigationTargetTooltip = navigationTarget?.tooltip;\n        if (\n            !this.getTooltip() &&\n            typeof navigationTargetTooltip === \"string\" &&\n            navigationTargetTooltip?.length > 0\n        ) {\n            this.setTooltip(navigationTargetTooltip);\n        }\n\n        return this;\n    }\n\n    setText(sText?: string): this {\n        this.setProperty(\"text\", sText);\n        const navigationTarget = this.getNavigationTarget();\n        if (!(navigationTarget instanceof NavigationTarget)) {\n            return this;\n        }\n        if (\n            ((typeof navigationTarget?.targetUrl !== \"string\" || navigationTarget?.targetUrl?.length === 0) &&\n                typeof navigationTarget?.targetFunction !== \"function\") ||\n            !(typeof sText === \"string\" && sText !== initialValueUnicode) // dash\n        ) {\n            this.setProperty(\"enabled\", false);\n        }\n        return this;\n    }\n\n    getNavigationTarget(): NavigationTarget {\n        return this.getProperty(\"navigationTarget\");\n    }\n\n    setEnabled(bEnabled?: boolean): this {\n        if (bEnabled === true) {\n            const navigationTarget = this.getNavigationTarget();\n            const text = this.getText();\n            if (\n                (navigationTarget instanceof NavigationTarget &&\n                    (typeof navigationTarget.targetUrl !== \"string\" ||\n                        navigationTarget.targetUrl?.length === 0) &&\n                    typeof navigationTarget.targetFunction !== \"function\") ||\n                !(typeof text === \"string\" && text !== initialValueUnicode) // dash\n            ) {\n                this.setProperty(\"enabled\", false);\n                return this;\n            }\n        }\n        this.setProperty(\"enabled\", bEnabled);\n        return this;\n    }\n\n    setIcon(sIcon?: sapURI): this {\n        if (!this.getIcon() && typeof sIcon === \"string\" && sIcon.startsWith(\"sap-icon://\")) {\n            super.setIcon(sIcon);\n        }\n        return this;\n    }\n\n    onAfterRendering(oEvent): void {\n        super.onAfterRendering(oEvent);\n        if (this.isDestroyed()) {\n            return;\n        }\n        if (!this._pressHandlerAttached) {\n            this.attachPress(this.pressHandlerSearchLink, this);\n            this._pressHandlerAttached = true;\n        }\n\n        const linkDomRef = this.getDomRef() as HTMLElement;\n        // recover bold tag with the help of text() in a safe way\n        SearchHelper.boldTagUnescaper(linkDomRef);\n        SearchHelper.calculateTooltipForwordEllipsis(linkDomRef);\n    }\n\n    _handlePress(oEvent) {\n        // in case of highlighting the target property of the event is a <b> element inside the Link.\n        // therefore setting it manually to Links DomRef / parentElement of the target.\n        if (oEvent.target.localName === \"b\") {\n            const oTarget = this.getDomRef() ? this.getDomRef() : oEvent.target.parentElement;\n            oEvent.target = oTarget;\n        }\n        // eslint-disable-next-line prefer-rest-params\n        Link.prototype[\"_handlePress\"].apply(this, arguments);\n    }\n\n    // overwrite necessary because in sap.m.Link: Link.prototype.onsapenter = Link.prototype._handlePress;\n    onsapenter(oEvent) {\n        this._handlePress(oEvent);\n    }\n\n    // overwrite necessary because in sap.m.Link: Link.prototype.onsapenter = Link.prototype._handlePress;\n    onclick(oEvent) {\n        this._handlePress(oEvent);\n    }\n\n    static renderer = {\n        apiVersion: 2,\n    };\n}\n"],"mappings":"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","ignoreList":[]}