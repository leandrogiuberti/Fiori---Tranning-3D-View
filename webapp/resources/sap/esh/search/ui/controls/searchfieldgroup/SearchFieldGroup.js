/*!
 * SAPUI5
 * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.
 * 
 */
sap.ui.define(["sap/ui/core/InvisibleText","sap/m/Button","sap/m/library","sap/m/Menu","sap/m/MenuItem","sap/m/FlexBox","sap/m/FlexItemData","./SearchInput","./SearchButton","sap/ui/core/Control","./SearchSelect","./SearchSelectQuickSelectDataSource","../../i18n","sap/m/Popover","sap/m/FormattedText"],function(t,e,i,n,s,o,a,l,c,r,u,h,p,g,d){"use strict";function f(t){return t&&t.__esModule&&typeof t.default!=="undefined"?t.default:t}const B=i["ButtonType"];const x=i["PlacementType"];const y=i["FlexAlignItems"];const A=f(l);const v=f(c);const M=f(u);const m=f(h);const S=f(p);const b=r.extend("sap.esh.search.ui.controls.SearchFieldGroup",{renderer:{apiVersion:2,render(t,e){t.openStart("div",e);t.class("SearchFieldGroup");t.openEnd();t.renderControl(e.getAggregation("_topFlexBox"));t.renderControl(e.getAggregation("_flexBox"));t.renderControl(e.getAggregation("_buttonAriaText"));t.close("div")}},metadata:{properties:{selectActive:{defaultValue:true,type:"boolean"},selectQsDsActive:{defaultValue:false,type:"boolean"},inputActive:{defaultValue:true,type:"boolean"},buttonActive:{defaultValue:true,type:"boolean"},nlqExplainButtonActive:{defaultValue:false,type:"boolean"},cancelButtonActive:{defaultValue:true,type:"boolean"},actionsMenuButtonActive:{defaultValue:false,type:"boolean"}},aggregations:{_topFlexBox:{type:"sap.m.FlexBox",multiple:false,visibility:"hidden"},_flexBox:{type:"sap.m.FlexBox",multiple:false,visibility:"hidden"},_buttonAriaText:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"}}},constructor:function t(e,i){i=i||{};i.nlqExplainButtonActive="{/isNlqActive}";r.prototype.constructor.call(this,e,i);this.initSelect();this.initSelectQsDs();this.initInput();this.initButton();this.initNlqExplainButton();this.initCancelButton();this.initActionsMenuButton();this.initFlexBox()},setCancelButtonActive:function t(e){if(e===this.getProperty("cancelButtonActive")){return}this.setProperty("cancelButtonActive",e);this.initFlexBox()},setNlqExplainButtonActive:function t(e){if(e===this.getProperty("nlqExplainButtonActive")){return}this.setProperty("nlqExplainButtonActive",e);this.initFlexBox()},setActionsMenuButtonActive:function t(e){if(e===this.getProperty("actionsMenuButtonActive")){return}this.setProperty("actionsMenuButtonActive",e);this.initFlexBox()},setSelectActive:function t(e){if(e===this.getProperty("selectActive")){return}this.setProperty("selectActive",e);this.initFlexBox()},setSelectQsDsActive:function t(e){if(e===this.getProperty("selectQsDsActive")){return}this.setProperty("selectQsDsActive",e);this.initFlexBox()},initFlexBox:function t(){if(!this.select){return}if(!this.selectQsDs){return}const e=[];const i=[];if(this.getProperty("selectActive")){this.select.setLayoutData(new a("",{growFactor:0}));i.push(this.select)}if(this.getProperty("selectQsDsActive")){this.selectQsDs.setLayoutData(new a("",{growFactor:1}));e.push(this.selectQsDs)}if(this.getProperty("inputActive")){this.input.setLayoutData(new a("",{growFactor:1}));i.push(this.input)}if(this.getProperty("buttonActive")){this.button.setLayoutData(new a("",{growFactor:0}));i.push(this.button)}if(this.getProperty("nlqExplainButtonActive")&&!this.getModel().config.aiNlqExplainBar){this.button.setLayoutData(new a("",{growFactor:0}));i.push(this.nlqExplainButton)}if(this.getProperty("cancelButtonActive")){this.cancelButton.setLayoutData(new a("",{growFactor:0}));i.push(this.cancelButton)}if(this.getProperty("actionsMenuButtonActive")){this.actionsMenuButton.setLayoutData(new a("",{growFactor:0}));i.push(this.actionsMenuButton)}if(this.getProperty("selectQsDsActive")){let t=this.getAggregation("_topFlexBox");if(!t){t=new o("",{items:e});this.setAggregation("_topFlexBox",t)}else{t.removeAllAggregation("items");for(const i of e){t.addItem(i)}}}let n=this.getAggregation("_flexBox");if(!n){n=new o("",{alignItems:y.Start,items:i});this.setAggregation("_flexBox",n)}else{n.removeAllAggregation("items");for(const t of i){n.addItem(t)}}},initSelect:function t(){this.select=new M(this.getId()+"-select",{});this.select.attachChange(function(){if(this.getAggregation("input")){const t=this.getAggregation("input");t.destroySuggestionRows()}})},initSelectQsDs:function t(){this.selectQsDs=new m(this.getId()+"-selectQsDs",{});this.selectQsDs.attachChange(function(){if(this.getAggregation("input")){const t=this.getAggregation("input");t.destroySuggestionRows()}})},initInput:function t(){this.input=new A(this.getId()+"-input")},initButton:function e(){this.button=new v(this.getId()+"-button",{tooltip:{parts:[{path:"/searchButtonStatus"}],formatter:t=>S.getText("searchButtonStatus_"+t)},press:t=>{const e=this.button.getModel();if(e.config.isUshell){if(this.input.getValue()===""&&e.getDataSource()===e.getDefaultDataSource()){return}}e.invalidateQuery();this.input.destroySuggestionRows();this.input.triggerSearch()}});const i=new t(this.getId()+"-buttonAriaText",{text:{parts:[{path:"/searchButtonStatus"}],formatter:t=>S.getText("searchButtonStatus_"+t)}});this.setAggregation("_buttonAriaText",i);this.button.addAriaLabelledBy(this.getAggregation("_buttonAriaText"))},initNlqExplainButton:function t(){this.nlqExplainPopover=this.assembleNlqPopover();this.nlqExplainButton=new e(this.getId()+"-nlqExplainButton",{icon:"sap-icon://ai",tooltip:"{i18n>nlqExplainButtonTooltip}",press:()=>{this.nlqExplainPopover.setModel(this.getModel());this.nlqExplainPopover.setModel(this.getModel("i18n"),"i18n");this.nlqExplainPopover.openBy(this.input)},enabled:{parts:[{path:"/nlqResult/success"},{path:"/isBusy"}],formatter:(t,e)=>!!t&&!e}});this.nlqExplainButton.addStyleClass("sapUshellSearchNlqExplainButton")},assembleNlqPopover:function t(){const e=new d({htmlText:{parts:[{path:"/nlqResult/filterDescription"}],formatter:t=>{if(!t){return S.getText("nlqNoFilter")}return t}}});e.addStyleClass("sapUiSmallMargin");const i=new g({title:"{i18n>nlqPopoverTitle}",content:[e],placement:x.Bottom});i.addStyleClass("sapUshellSearchNlqExplainPopover");this.input.attachBrowserEvent("focusin",()=>{i.close();this.input.focus()});return i},initCancelButton:function t(){this.cancelButton=new e(this.getId()+"-buttonCancel",{text:"{i18n>cancelBtn}"});this.cancelButton.addStyleClass("sapUshellSearchCancelButton")},initActionsMenuButton:function t(){const i=this.getId();this.actionsMenuButton=new e(i+"-actionsMenuButton",{icon:"sap-icon://overflow",type:B.Emphasized,press:()=>{if(!this.actionsMenu){const t=[];const e=new s(i+"-menuItemSort",{text:"{i18n>actionsMenuSort}",icon:"sap-icon://sort",press:()=>{const t=this.getModel();const e=t.getSearchCompositeControlInstanceByChildControl(this.actionsMenuButton);if(e){e.openSortDialog()}else{}}});t.push(e);const o=new s((this.getId()?this.getId()+"-":"")+"menuItemFilter",{text:"{i18n>actionsMenuFilter}",icon:"sap-icon://filter",press:()=>{const t=this.getModel();const e=t.getSearchCompositeControlInstanceByChildControl(this.actionsMenuButton);if(e){e.openShowMoreDialog()}else{}}});t.push(o);this.actionsMenu=new n({items:t});this.actionsMenu.setModel(this.getModel("i18n"),"i18n")}this.actionsMenu.openBy(this.actionsMenuButton,true)},visible:{parts:[{path:"/uiFilter/dataSource"}],formatter:t=>t?.type===t?.sina?.DataSourceType.BusinessObject}});this.actionsMenuButton.addStyleClass("sapUiTinyMarginBegin")},setModel:function t(e,i){r.prototype.setModel.call(this,e,i);this.select.setModel(e,i);this.input.setModel(e,i);this.button.setModel(e,i);this.cancelButton.setModel(e,i);this.nlqExplainButton.setModel(e,i);this.actionsMenuButton.setModel(e,i);this.getAggregation("_buttonAriaText").setModel(e,i);return this},destroy:function t(){r.prototype.destroy.call(this);if(this.select){this.select.destroy()}if(this.selectQsDs){this.selectQsDs.destroy()}if(this.cancelButton){this.cancelButton.destroy()}if(this.nlqExplainButton){this.nlqExplainButton.destroy()}if(this.nlqExplainPopover){this.nlqExplainPopover.destroy()}if(this.actionsMenuButton){this.actionsMenuButton.destroy()}if(this.actionsMenu){this.actionsMenu.destroy()}}});return b});
//# sourceMappingURL=SearchFieldGroup.js.map