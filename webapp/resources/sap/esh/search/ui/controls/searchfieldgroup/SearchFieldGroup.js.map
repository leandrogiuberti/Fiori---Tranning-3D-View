{"version":3,"file":"SearchFieldGroup.js","names":["sap","ui","define","InvisibleText","Button","sap_m_library","Menu","MenuItem","FlexBox","FlexItemData","__SearchInput","__SearchButton","Control","__SearchSelect","__SearchSelectQuickSelectDataSource","__i18n","Popover","FormattedText","_interopRequireDefault","obj","__esModule","default","ButtonType","PlacementType","FlexAlignItems","SearchInput","SearchButton","SearchSelect","SearchSelectQuickSelectDataSource","i18n","SearchFieldGroup","extend","renderer","apiVersion","render","oRm","oControl","openStart","class","openEnd","renderControl","getAggregation","close","metadata","properties","selectActive","defaultValue","type","selectQsDsActive","inputActive","buttonActive","nlqExplainButtonActive","cancelButtonActive","actionsMenuButtonActive","aggregations","_topFlexBox","multiple","visibility","_flexBox","_buttonAriaText","constructor","_constructor","sId","options","Control.prototype.constructor.call","this","initSelect","initSelectQsDs","initInput","initButton","initNlqExplainButton","initCancelButton","initActionsMenuButton","initFlexBox","setCancelButtonActive","_setCancelButtonActive","active","getProperty","setProperty","setNlqExplainButtonActive","_setNlqExplainButtonActive","setActionsMenuButtonActive","_setActionsMenuButtonActive","setSelectActive","_setSelectActive","setSelectQsDsActive","_setSelectQsDsActive","_initFlexBox","select","selectQsDs","topItems","items","setLayoutData","growFactor","push","input","button","getModel","config","aiNlqExplainBar","nlqExplainButton","cancelButton","actionsMenuButton","topFlexBox","setAggregation","removeAllAggregation","topItem","addItem","flexBox","alignItems","Start","item","_initSelect","getId","attachChange","destroySuggestionRows","_initSelectQsDs","_initInput","_initButton","tooltip","parts","path","formatter","searchButtonStatus","getText","press","event","model","isUshell","getValue","getDataSource","getDefaultDataSource","invalidateQuery","triggerSearch","oInvisibleText","text","addAriaLabelledBy","_initNlqExplainButton","nlqExplainPopover","assembleNlqPopover","icon","setModel","openBy","enabled","success","isBusy","addStyleClass","_assembleNlqPopover","filterDescription","htmlText","popover","title","content","placement","Bottom","attachBrowserEvent","focus","_initCancelButton","_initActionsMenuButton","searchfieldGroupId","Emphasized","actionsMenu","menuItems","menuItemSort","searchModel","searchCompositeControlInstance","getSearchCompositeControlInstanceByChildControl","openSortDialog","menuItemFilter","openShowMoreDialog","visible","dataSource","sina","DataSourceType","BusinessObject","_setModel","oModel","sName","Control.prototype.setModel.call","destroy","_destroy","Control.prototype.destroy.call"],"sources":["SearchFieldGroup.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport InvisibleText from \"sap/ui/core/InvisibleText\";\nimport Button from \"sap/m/Button\";\nimport { ButtonType, PlacementType } from \"sap/m/library\";\nimport Menu from \"sap/m/Menu\";\nimport MenuItem from \"sap/m/MenuItem\";\nimport FlexBox from \"sap/m/FlexBox\";\nimport FlexItemData from \"sap/m/FlexItemData\";\nimport { FlexAlignItems } from \"sap/m/library\";\nimport SearchInput from \"./SearchInput\";\nimport SearchButton from \"./SearchButton\";\nimport Control, { $ControlSettings } from \"sap/ui/core/Control\";\nimport RenderManager from \"sap/ui/core/RenderManager\";\nimport SearchModel from \"sap/esh/search/ui/SearchModel\";\nimport SearchSelect from \"./SearchSelect\";\nimport SearchSelectQuickSelectDataSource from \"./SearchSelectQuickSelectDataSource\";\nimport i18n from \"../../i18n\";\nimport Event from \"sap/ui/base/Event\";\nimport { DataSource } from \"../../sinaNexTS/sina/DataSource\";\nimport Popover from \"sap/m/Popover\";\nimport FormattedText from \"sap/m/FormattedText\";\nimport { PropertyBindingInfo } from \"sap/ui/base/ManagedObject\";\nimport Model from \"sap/ui/model/Model\";\n\nexport interface $SearchFieldGroupControlSettings extends $ControlSettings {\n    nlqExplainButtonActive?: boolean | PropertyBindingInfo | `{${string}}`;\n}\n\n/**\n * @namespace sap.esh.search.ui.controls\n */\n\nexport default class SearchFieldGroup extends Control {\n    static readonly metadata = {\n        properties: {\n            selectActive: {\n                defaultValue: true,\n                type: \"boolean\",\n            },\n            selectQsDsActive: {\n                defaultValue: false,\n                type: \"boolean\",\n            },\n            inputActive: {\n                defaultValue: true,\n                type: \"boolean\",\n            },\n            buttonActive: {\n                defaultValue: true,\n                type: \"boolean\",\n            },\n            nlqExplainButtonActive: {\n                defaultValue: false,\n                type: \"boolean\",\n            },\n            cancelButtonActive: {\n                defaultValue: true,\n                type: \"boolean\",\n            },\n            actionsMenuButtonActive: {\n                defaultValue: false,\n                type: \"boolean\",\n            },\n        },\n        aggregations: {\n            _topFlexBox: {\n                type: \"sap.m.FlexBox\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n            _flexBox: {\n                type: \"sap.m.FlexBox\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n            _buttonAriaText: {\n                type: \"sap.ui.core.InvisibleText\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n        },\n    };\n\n    public select: SearchSelect;\n    public selectQsDs: SearchSelectQuickSelectDataSource; // quick-select data sources\n    public input: SearchInput;\n    public button: Button;\n    public cancelButton: Button;\n    public nlqExplainButton: Button;\n    public actionsMenu: Menu;\n    public actionsMenuButton: Button;\n\n    private nlqExplainPopover: Popover;\n\n    constructor(sId?: string, options?: $SearchFieldGroupControlSettings) {\n        options = options || {};\n        options.nlqExplainButtonActive = \"{/isNlqActive}\";\n        super(sId, options);\n        this.initSelect();\n        this.initSelectQsDs();\n        this.initInput();\n        this.initButton();\n        this.initNlqExplainButton();\n        this.initCancelButton();\n        this.initActionsMenuButton();\n        this.initFlexBox();\n    }\n\n    setCancelButtonActive(active: boolean): void {\n        if (active === this.getProperty(\"cancelButtonActive\")) {\n            return;\n        }\n        this.setProperty(\"cancelButtonActive\", active);\n        this.initFlexBox();\n    }\n\n    setNlqExplainButtonActive(active: boolean): void {\n        if (active === this.getProperty(\"nlqExplainButtonActive\")) {\n            return;\n        }\n        this.setProperty(\"nlqExplainButtonActive\", active);\n        this.initFlexBox();\n    }\n\n    setActionsMenuButtonActive(active: boolean): void {\n        if (active === this.getProperty(\"actionsMenuButtonActive\")) {\n            return;\n        }\n        this.setProperty(\"actionsMenuButtonActive\", active);\n        this.initFlexBox();\n    }\n\n    setSelectActive(active: boolean): void {\n        if (active === this.getProperty(\"selectActive\")) {\n            return;\n        }\n        this.setProperty(\"selectActive\", active);\n        this.initFlexBox();\n    }\n\n    setSelectQsDsActive(active: boolean): void {\n        if (active === this.getProperty(\"selectQsDsActive\")) {\n            return;\n        }\n        this.setProperty(\"selectQsDsActive\", active);\n        this.initFlexBox();\n    }\n\n    initFlexBox(): void {\n        if (!this.select) {\n            return;\n        }\n        if (!this.selectQsDs) {\n            return;\n        }\n\n        const topItems = [];\n        const items = [];\n\n        if (this.getProperty(\"selectActive\")) {\n            this.select.setLayoutData(\n                new FlexItemData(\"\", {\n                    growFactor: 0,\n                })\n            );\n            items.push(this.select);\n        }\n        if (this.getProperty(\"selectQsDsActive\")) {\n            this.selectQsDs.setLayoutData(\n                new FlexItemData(\"\", {\n                    growFactor: 1,\n                })\n            );\n            topItems.push(this.selectQsDs);\n        }\n        if (this.getProperty(\"inputActive\")) {\n            this.input.setLayoutData(\n                new FlexItemData(\"\", {\n                    growFactor: 1,\n                })\n            );\n            items.push(this.input);\n        }\n        if (this.getProperty(\"buttonActive\")) {\n            this.button.setLayoutData(\n                new FlexItemData(\"\", {\n                    growFactor: 0,\n                })\n            );\n            items.push(this.button);\n        }\n        if (\n            this.getProperty(\"nlqExplainButtonActive\") &&\n            !(this.getModel() as SearchModel).config.aiNlqExplainBar\n        ) {\n            this.button.setLayoutData(\n                new FlexItemData(\"\", {\n                    growFactor: 0,\n                })\n            );\n            items.push(this.nlqExplainButton);\n        }\n        if (this.getProperty(\"cancelButtonActive\")) {\n            this.cancelButton.setLayoutData(\n                new FlexItemData(\"\", {\n                    growFactor: 0,\n                })\n            );\n            items.push(this.cancelButton);\n        }\n        if (this.getProperty(\"actionsMenuButtonActive\")) {\n            this.actionsMenuButton.setLayoutData(\n                new FlexItemData(\"\", {\n                    growFactor: 0,\n                })\n            );\n            items.push(this.actionsMenuButton);\n        }\n        if (this.getProperty(\"selectQsDsActive\")) {\n            let topFlexBox = this.getAggregation(\"_topFlexBox\") as FlexBox;\n            if (!topFlexBox) {\n                topFlexBox = new FlexBox(\"\", {\n                    items: topItems,\n                });\n                this.setAggregation(\"_topFlexBox\", topFlexBox);\n            } else {\n                topFlexBox.removeAllAggregation(\"items\");\n                for (const topItem of topItems) {\n                    topFlexBox.addItem(topItem);\n                }\n            }\n        }\n\n        let flexBox = this.getAggregation(\"_flexBox\") as FlexBox;\n        if (!flexBox) {\n            flexBox = new FlexBox(\"\", {\n                alignItems: FlexAlignItems.Start,\n                items: items,\n            });\n            this.setAggregation(\"_flexBox\", flexBox);\n        } else {\n            flexBox.removeAllAggregation(\"items\");\n            for (const item of items) {\n                flexBox.addItem(item);\n            }\n        }\n    }\n\n    initSelect(): void {\n        this.select = new SearchSelect(this.getId() + \"-select\", {});\n        this.select.attachChange(function () {\n            if (this.getAggregation(\"input\")) {\n                const input = this.getAggregation(\"input\");\n                input.destroySuggestionRows();\n            }\n        });\n    }\n\n    initSelectQsDs(): void {\n        this.selectQsDs = new SearchSelectQuickSelectDataSource(this.getId() + \"-selectQsDs\", {});\n        this.selectQsDs.attachChange(function () {\n            if (this.getAggregation(\"input\")) {\n                const input = this.getAggregation(\"input\");\n                input.destroySuggestionRows();\n            }\n        });\n    }\n\n    initInput(): void {\n        this.input = new SearchInput(this.getId() + \"-input\");\n    }\n\n    initButton(): void {\n        this.button = new SearchButton(this.getId() + \"-button\", {\n            tooltip: {\n                parts: [\n                    {\n                        path: \"/searchButtonStatus\",\n                    },\n                ],\n                formatter: (searchButtonStatus) => {\n                    return i18n.getText(\"searchButtonStatus_\" + searchButtonStatus);\n                },\n            },\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            press: (event: Event) => {\n                // searchterm is empty and datasource==all\n                // do not trigger search instead close search field\n                const model = this.button.getModel() as SearchModel;\n                if (model.config.isUshell) {\n                    if (\n                        this.input.getValue() === \"\" &&\n                        model.getDataSource() === model.getDefaultDataSource()\n                    ) {\n                        return;\n                    }\n                }\n                // trigger search\n                model.invalidateQuery();\n                this.input.destroySuggestionRows();\n                this.input.triggerSearch();\n            },\n        });\n\n        const oInvisibleText = new InvisibleText(this.getId() + \"-buttonAriaText\", {\n            text: {\n                parts: [\n                    {\n                        path: \"/searchButtonStatus\",\n                    },\n                ],\n                formatter: (searchButtonStatus) => {\n                    return i18n.getText(\"searchButtonStatus_\" + searchButtonStatus);\n                },\n            },\n        });\n\n        this.setAggregation(\"_buttonAriaText\", oInvisibleText);\n        this.button.addAriaLabelledBy(this.getAggregation(\"_buttonAriaText\") as InvisibleText);\n    }\n\n    initNlqExplainButton() {\n        this.nlqExplainPopover = this.assembleNlqPopover();\n        this.nlqExplainButton = new Button(this.getId() + \"-nlqExplainButton\", {\n            icon: \"sap-icon://ai\",\n            tooltip: \"{i18n>nlqExplainButtonTooltip}\",\n            press: () => {\n                this.nlqExplainPopover.setModel(this.getModel());\n                this.nlqExplainPopover.setModel(this.getModel(\"i18n\"), \"i18n\");\n                this.nlqExplainPopover.openBy(this.input);\n            },\n            enabled: {\n                parts: [\n                    {\n                        path: \"/nlqResult/success\",\n                    },\n                    {\n                        path: \"/isBusy\",\n                    },\n                ],\n                formatter: (success, isBusy) => {\n                    return !!success && !isBusy;\n                },\n            },\n        });\n        this.nlqExplainButton.addStyleClass(\"sapUshellSearchNlqExplainButton\");\n    }\n\n    assembleNlqPopover(): Popover {\n        const filterDescription = new FormattedText({\n            htmlText: {\n                parts: [{ path: \"/nlqResult/filterDescription\" }],\n                formatter: (filterDescription: string) => {\n                    if (!filterDescription) {\n                        return i18n.getText(\"nlqNoFilter\");\n                    }\n                    return filterDescription;\n                },\n            },\n        });\n        filterDescription.addStyleClass(\"sapUiSmallMargin\");\n        const popover = new Popover({\n            title: \"{i18n>nlqPopoverTitle}\",\n            content: [filterDescription],\n            placement: PlacementType.Bottom,\n        });\n        popover.addStyleClass(\"sapUshellSearchNlqExplainPopover\");\n        this.input.attachBrowserEvent(\"focusin\", () => {\n            popover.close();\n            this.input.focus(); // popover close sets focus to ai explain button therefore again set focus to input\n        });\n        return popover;\n    }\n\n    initCancelButton(): void {\n        this.cancelButton = new Button(this.getId() + \"-buttonCancel\", {\n            text: \"{i18n>cancelBtn}\",\n        });\n        this.cancelButton.addStyleClass(\"sapUshellSearchCancelButton\");\n    }\n\n    initActionsMenuButton(): void {\n        const searchfieldGroupId = this.getId();\n        this.actionsMenuButton = new Button(searchfieldGroupId + \"-actionsMenuButton\", {\n            icon: \"sap-icon://overflow\",\n            type: ButtonType.Emphasized,\n            press: () => {\n                if (!this.actionsMenu) {\n                    const menuItems = [];\n                    // sort\n                    const menuItemSort = new MenuItem(searchfieldGroupId + \"-menuItemSort\", {\n                        text: \"{i18n>actionsMenuSort}\",\n                        icon: \"sap-icon://sort\",\n                        press: (/* oEvent: Event */): void => {\n                            const searchModel = this.getModel() as SearchModel;\n                            const searchCompositeControlInstance =\n                                searchModel.getSearchCompositeControlInstanceByChildControl(\n                                    this.actionsMenuButton\n                                );\n                            if (searchCompositeControlInstance) {\n                                searchCompositeControlInstance.openSortDialog();\n                            } else {\n                                // not expected / robustness -> do not swhow sort popover\n                            }\n                        },\n                    });\n                    menuItems.push(menuItemSort);\n                    // filter\n                    const menuItemFilter = new MenuItem(\n                        (this.getId() ? this.getId() + \"-\" : \"\") + \"menuItemFilter\",\n                        {\n                            text: \"{i18n>actionsMenuFilter}\",\n                            icon: \"sap-icon://filter\",\n                            press: (/* oEvent: any */): void => {\n                                const searchModel = this.getModel() as SearchModel;\n                                const searchCompositeControlInstance =\n                                    searchModel.getSearchCompositeControlInstanceByChildControl(\n                                        this.actionsMenuButton\n                                    );\n                                if (searchCompositeControlInstance) {\n                                    searchCompositeControlInstance.openShowMoreDialog();\n                                } else {\n                                    // not expected / robustness -> do not swhow sort popover\n                                }\n                            },\n                        }\n                    );\n                    menuItems.push(menuItemFilter);\n                    this.actionsMenu = new Menu({\n                        items: menuItems,\n                    });\n                    this.actionsMenu.setModel(this.getModel(\"i18n\"), \"i18n\");\n                }\n                this.actionsMenu.openBy(this.actionsMenuButton, true);\n            },\n            visible: {\n                parts: [{ path: \"/uiFilter/dataSource\" }],\n                formatter: (dataSource: DataSource) => {\n                    return dataSource?.type === dataSource?.sina?.DataSourceType.BusinessObject;\n                },\n            },\n        });\n        this.actionsMenuButton.addStyleClass(\"sapUiTinyMarginBegin\");\n    }\n\n    setModel(oModel: Model, sName?: string): this {\n        super.setModel(oModel, sName);\n        this.select.setModel(oModel, sName);\n        this.input.setModel(oModel, sName);\n        this.button.setModel(oModel, sName);\n        this.cancelButton.setModel(oModel, sName);\n        this.nlqExplainButton.setModel(oModel, sName);\n        this.actionsMenuButton.setModel(oModel, sName);\n        (this.getAggregation(\"_buttonAriaText\") as InvisibleText).setModel(oModel, sName);\n        return this;\n    }\n\n    destroy(): void {\n        super.destroy();\n        if (this.select) {\n            this.select.destroy();\n        }\n        if (this.selectQsDs) {\n            this.selectQsDs.destroy();\n        }\n        if (this.cancelButton) {\n            this.cancelButton.destroy();\n        }\n        if (this.nlqExplainButton) {\n            this.nlqExplainButton.destroy();\n        }\n        if (this.nlqExplainPopover) {\n            this.nlqExplainPopover.destroy();\n        }\n        if (this.actionsMenuButton) {\n            this.actionsMenuButton.destroy();\n        }\n        if (this.actionsMenu) {\n            this.actionsMenu.destroy();\n        }\n    }\n\n    static renderer = {\n        apiVersion: 2,\n        render(oRm: RenderManager, oControl: SearchFieldGroup): void {\n            oRm.openStart(\"div\", oControl);\n            oRm.class(\"SearchFieldGroup\");\n            oRm.openEnd();\n            oRm.renderControl(oControl.getAggregation(\"_topFlexBox\") as FlexBox);\n            oRm.renderControl(oControl.getAggregation(\"_flexBox\") as FlexBox);\n            oRm.renderControl(oControl.getAggregation(\"_buttonAriaText\") as InvisibleText);\n            oRm.close(\"div\");\n        },\n    };\n}\n"],"mappings":";;;;;AAAAA,IAAAC,GAAAC,OAAA,0SAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAAA,sBAAAC,EAAAC,GAAA,OAAAA,KAAAC,mBAAAD,EAAAE,UAAA,YAAAF,EAAAE,QAAAF,CAAA,OAOSG,EAAUjB,EAAA,oBAAEkB,EAAalB,EAAA,uBAKzBmB,EAAcnB,EAAA,wBAChBoB,EAAWP,EAAAR,GAAA,MACXgB,EAAYR,EAAAP,GAAA,MAIZgB,EAAYT,EAAAL,GAAA,MACZe,EAAiCV,EAAAJ,GAAA,MACjCe,EAAIX,EAAAH,GAYX,MAIqBe,EAAyBlB,EAAOmB,OAAA,+CAkc1CC,SAAW,CACdC,WAAY,EACZC,OAAOC,EAAoBC,GACvBD,EAAIE,UAAU,MAAOD,GACrBD,EAAIG,MAAM,oBACVH,EAAII,UACJJ,EAAIK,cAAcJ,EAASK,eAAe,gBAC1CN,EAAIK,cAAcJ,EAASK,eAAe,aAC1CN,EAAIK,cAAcJ,EAASK,eAAe,oBAC1CN,EAAIO,MAAM,MACd,GA3cYC,SAAW,CACvBC,WAAY,CACRC,aAAc,CACVC,aAAc,KACdC,KAAM,WAEVC,iBAAkB,CACdF,aAAc,MACdC,KAAM,WAEVE,YAAa,CACTH,aAAc,KACdC,KAAM,WAEVG,aAAc,CACVJ,aAAc,KACdC,KAAM,WAEVI,uBAAwB,CACpBL,aAAc,MACdC,KAAM,WAEVK,mBAAoB,CAChBN,aAAc,KACdC,KAAM,WAEVM,wBAAyB,CACrBP,aAAc,MACdC,KAAM,YAGdO,aAAc,CACVC,YAAa,CACTR,KAAM,gBACNS,SAAU,MACVC,WAAY,UAEhBC,SAAU,CACNX,KAAM,gBACNS,SAAU,MACVC,WAAY,UAEhBE,gBAAiB,CACbZ,KAAM,4BACNS,SAAU,MACVC,WAAY,YAgBxBG,YAAW,SAAAC,EAACC,EAAcC,GACtBA,EAAUA,GAAW,CAAC,EACtBA,EAAQZ,uBAAyB,iBACjCa,6BAAAC,KAAMH,EAAKC,GACXE,KAAKC,aACLD,KAAKE,iBACLF,KAAKG,YACLH,KAAKI,aACLJ,KAAKK,uBACLL,KAAKM,mBACLN,KAAKO,wBACLP,KAAKQ,aACT,EAEAC,sBAAqB,SAAAC,EAACC,GAClB,GAAIA,IAAWX,KAAKY,YAAY,sBAAuB,CACnD,MACJ,CACAZ,KAAKa,YAAY,qBAAsBF,GACvCX,KAAKQ,aACT,EAEAM,0BAAyB,SAAAC,EAACJ,GACtB,GAAIA,IAAWX,KAAKY,YAAY,0BAA2B,CACvD,MACJ,CACAZ,KAAKa,YAAY,yBAA0BF,GAC3CX,KAAKQ,aACT,EAEAQ,2BAA0B,SAAAC,EAACN,GACvB,GAAIA,IAAWX,KAAKY,YAAY,2BAA4B,CACxD,MACJ,CACAZ,KAAKa,YAAY,0BAA2BF,GAC5CX,KAAKQ,aACT,EAEAU,gBAAe,SAAAC,EAACR,GACZ,GAAIA,IAAWX,KAAKY,YAAY,gBAAiB,CAC7C,MACJ,CACAZ,KAAKa,YAAY,eAAgBF,GACjCX,KAAKQ,aACT,EAEAY,oBAAmB,SAAAC,EAACV,GAChB,GAAIA,IAAWX,KAAKY,YAAY,oBAAqB,CACjD,MACJ,CACAZ,KAAKa,YAAY,mBAAoBF,GACrCX,KAAKQ,aACT,EAEAA,YAAW,SAAAc,IACP,IAAKtB,KAAKuB,OAAQ,CACd,MACJ,CACA,IAAKvB,KAAKwB,WAAY,CAClB,MACJ,CAEA,MAAMC,EAAW,GACjB,MAAMC,EAAQ,GAEd,GAAI1B,KAAKY,YAAY,gBAAiB,CAClCZ,KAAKuB,OAAOI,cACR,IAAInF,EAAa,GAAI,CACjBoF,WAAY,KAGpBF,EAAMG,KAAK7B,KAAKuB,OACpB,CACA,GAAIvB,KAAKY,YAAY,oBAAqB,CACtCZ,KAAKwB,WAAWG,cACZ,IAAInF,EAAa,GAAI,CACjBoF,WAAY,KAGpBH,EAASI,KAAK7B,KAAKwB,WACvB,CACA,GAAIxB,KAAKY,YAAY,eAAgB,CACjCZ,KAAK8B,MAAMH,cACP,IAAInF,EAAa,GAAI,CACjBoF,WAAY,KAGpBF,EAAMG,KAAK7B,KAAK8B,MACpB,CACA,GAAI9B,KAAKY,YAAY,gBAAiB,CAClCZ,KAAK+B,OAAOJ,cACR,IAAInF,EAAa,GAAI,CACjBoF,WAAY,KAGpBF,EAAMG,KAAK7B,KAAK+B,OACpB,CACA,GACI/B,KAAKY,YAAY,4BACfZ,KAAKgC,WAA2BC,OAAOC,gBAC3C,CACElC,KAAK+B,OAAOJ,cACR,IAAInF,EAAa,GAAI,CACjBoF,WAAY,KAGpBF,EAAMG,KAAK7B,KAAKmC,iBACpB,CACA,GAAInC,KAAKY,YAAY,sBAAuB,CACxCZ,KAAKoC,aAAaT,cACd,IAAInF,EAAa,GAAI,CACjBoF,WAAY,KAGpBF,EAAMG,KAAK7B,KAAKoC,aACpB,CACA,GAAIpC,KAAKY,YAAY,2BAA4B,CAC7CZ,KAAKqC,kBAAkBV,cACnB,IAAInF,EAAa,GAAI,CACjBoF,WAAY,KAGpBF,EAAMG,KAAK7B,KAAKqC,kBACpB,CACA,GAAIrC,KAAKY,YAAY,oBAAqB,CACtC,IAAI0B,EAAatC,KAAKxB,eAAe,eACrC,IAAK8D,EAAY,CACbA,EAAa,IAAI/F,EAAQ,GAAI,CACzBmF,MAAOD,IAEXzB,KAAKuC,eAAe,cAAeD,EACvC,KAAO,CACHA,EAAWE,qBAAqB,SAChC,IAAK,MAAMC,KAAWhB,EAAU,CAC5Ba,EAAWI,QAAQD,EACvB,CACJ,CACJ,CAEA,IAAIE,EAAU3C,KAAKxB,eAAe,YAClC,IAAKmE,EAAS,CACVA,EAAU,IAAIpG,EAAQ,GAAI,CACtBqG,WAAYrF,EAAesF,MAC3BnB,MAAOA,IAEX1B,KAAKuC,eAAe,WAAYI,EACpC,KAAO,CACHA,EAAQH,qBAAqB,SAC7B,IAAK,MAAMM,KAAQpB,EAAO,CACtBiB,EAAQD,QAAQI,EACpB,CACJ,CACJ,EAEA7C,WAAU,SAAA8C,IACN/C,KAAKuB,OAAS,IAAI7D,EAAasC,KAAKgD,QAAU,UAAW,CAAC,GAC1DhD,KAAKuB,OAAO0B,aAAa,WACrB,GAAIjD,KAAKxB,eAAe,SAAU,CAC9B,MAAMsD,EAAQ9B,KAAKxB,eAAe,SAClCsD,EAAMoB,uBACV,CACJ,EACJ,EAEAhD,eAAc,SAAAiD,IACVnD,KAAKwB,WAAa,IAAI7D,EAAkCqC,KAAKgD,QAAU,cAAe,CAAC,GACvFhD,KAAKwB,WAAWyB,aAAa,WACzB,GAAIjD,KAAKxB,eAAe,SAAU,CAC9B,MAAMsD,EAAQ9B,KAAKxB,eAAe,SAClCsD,EAAMoB,uBACV,CACJ,EACJ,EAEA/C,UAAS,SAAAiD,IACLpD,KAAK8B,MAAQ,IAAItE,EAAYwC,KAAKgD,QAAU,SAChD,EAEA5C,WAAU,SAAAiD,IACNrD,KAAK+B,OAAS,IAAItE,EAAauC,KAAKgD,QAAU,UAAW,CACrDM,QAAS,CACLC,MAAO,CACH,CACIC,KAAM,wBAGdC,UAAYC,GACD9F,EAAK+F,QAAQ,sBAAwBD,IAIpDE,MAAQC,IAGJ,MAAMC,EAAQ9D,KAAK+B,OAAOC,WAC1B,GAAI8B,EAAM7B,OAAO8B,SAAU,CACvB,GACI/D,KAAK8B,MAAMkC,aAAe,IAC1BF,EAAMG,kBAAoBH,EAAMI,uBAClC,CACE,MACJ,CACJ,CAEAJ,EAAMK,kBACNnE,KAAK8B,MAAMoB,wBACXlD,KAAK8B,MAAMsC,mBAInB,MAAMC,EAAiB,IAAInI,EAAc8D,KAAKgD,QAAU,kBAAmB,CACvEsB,KAAM,CACFf,MAAO,CACH,CACIC,KAAM,wBAGdC,UAAYC,GACD9F,EAAK+F,QAAQ,sBAAwBD,MAKxD1D,KAAKuC,eAAe,kBAAmB8B,GACvCrE,KAAK+B,OAAOwC,kBAAkBvE,KAAKxB,eAAe,mBACtD,EAEA6B,qBAAoB,SAAAmE,IAChBxE,KAAKyE,kBAAoBzE,KAAK0E,qBAC9B1E,KAAKmC,iBAAmB,IAAIhG,EAAO6D,KAAKgD,QAAU,oBAAqB,CACnE2B,KAAM,gBACNrB,QAAS,iCACTM,MAAOA,KACH5D,KAAKyE,kBAAkBG,SAAS5E,KAAKgC,YACrChC,KAAKyE,kBAAkBG,SAAS5E,KAAKgC,SAAS,QAAS,QACvDhC,KAAKyE,kBAAkBI,OAAO7E,KAAK8B,QAEvCgD,QAAS,CACLvB,MAAO,CACH,CACIC,KAAM,sBAEV,CACIA,KAAM,YAGdC,UAAWA,CAACsB,EAASC,MACRD,IAAYC,KAIjChF,KAAKmC,iBAAiB8C,cAAc,kCACxC,EAEAP,mBAAkB,SAAAQ,IACd,MAAMC,EAAoB,IAAInI,EAAc,CACxCoI,SAAU,CACN7B,MAAO,CAAC,CAAEC,KAAM,iCAChBC,UAAY0B,IACR,IAAKA,EAAmB,CACpB,OAAOvH,EAAK+F,QAAQ,cACxB,CACA,OAAOwB,MAInBA,EAAkBF,cAAc,oBAChC,MAAMI,EAAU,IAAItI,EAAQ,CACxBuI,MAAO,yBACPC,QAAS,CAACJ,GACVK,UAAWlI,EAAcmI,SAE7BJ,EAAQJ,cAAc,oCACtBjF,KAAK8B,MAAM4D,mBAAmB,UAAW,KACrCL,EAAQ5G,QACRuB,KAAK8B,MAAM6D,UAEf,OAAON,CACX,EAEA/E,iBAAgB,SAAAsF,IACZ5F,KAAKoC,aAAe,IAAIjG,EAAO6D,KAAKgD,QAAU,gBAAiB,CAC3DsB,KAAM,qBAEVtE,KAAKoC,aAAa6C,cAAc,8BACpC,EAEA1E,sBAAqB,SAAAsF,IACjB,MAAMC,EAAqB9F,KAAKgD,QAChChD,KAAKqC,kBAAoB,IAAIlG,EAAO2J,EAAqB,qBAAsB,CAC3EnB,KAAM,sBACN7F,KAAMzB,EAAW0I,WACjBnC,MAAOA,KACH,IAAK5D,KAAKgG,YAAa,CACnB,MAAMC,EAAY,GAElB,MAAMC,EAAe,IAAI5J,EAASwJ,EAAqB,gBAAiB,CACpExB,KAAM,yBACNK,KAAM,kBACNf,MAAOA,KACH,MAAMuC,EAAcnG,KAAKgC,WACzB,MAAMoE,EACFD,EAAYE,gDACRrG,KAAKqC,mBAEb,GAAI+D,EAAgC,CAChCA,EAA+BE,gBACnC,KAAO,CACH,KAIZL,EAAUpE,KAAKqE,GAEf,MAAMK,EAAiB,IAAIjK,GACtB0D,KAAKgD,QAAUhD,KAAKgD,QAAU,IAAM,IAAM,iBAC3C,CACIsB,KAAM,2BACNK,KAAM,oBACNf,MAAOA,KACH,MAAMuC,EAAcnG,KAAKgC,WACzB,MAAMoE,EACFD,EAAYE,gDACRrG,KAAKqC,mBAEb,GAAI+D,EAAgC,CAChCA,EAA+BI,oBACnC,KAAO,CACH,KAKhBP,EAAUpE,KAAK0E,GACfvG,KAAKgG,YAAc,IAAI3J,EAAK,CACxBqF,MAAOuE,IAEXjG,KAAKgG,YAAYpB,SAAS5E,KAAKgC,SAAS,QAAS,OACrD,CACAhC,KAAKgG,YAAYnB,OAAO7E,KAAKqC,kBAAmB,OAEpDoE,QAAS,CACLlD,MAAO,CAAC,CAAEC,KAAM,yBAChBC,UAAYiD,GACDA,GAAY5H,OAAS4H,GAAYC,MAAMC,eAAeC,kBAIzE7G,KAAKqC,kBAAkB4C,cAAc,uBACzC,EAEAL,SAAQ,SAAAkC,EAACC,EAAeC,GACpBC,0BAAAjH,KAAe+G,EAAQC,GACvBhH,KAAKuB,OAAOqD,SAASmC,EAAQC,GAC7BhH,KAAK8B,MAAM8C,SAASmC,EAAQC,GAC5BhH,KAAK+B,OAAO6C,SAASmC,EAAQC,GAC7BhH,KAAKoC,aAAawC,SAASmC,EAAQC,GACnChH,KAAKmC,iBAAiByC,SAASmC,EAAQC,GACvChH,KAAKqC,kBAAkBuC,SAASmC,EAAQC,GACvChH,KAAKxB,eAAe,mBAAqCoG,SAASmC,EAAQC,GAC3E,OAAOhH,IACX,EAEAkH,QAAO,SAAAC,IACHC,yBAAApH,MACA,GAAIA,KAAKuB,OAAQ,CACbvB,KAAKuB,OAAO2F,SAChB,CACA,GAAIlH,KAAKwB,WAAY,CACjBxB,KAAKwB,WAAW0F,SACpB,CACA,GAAIlH,KAAKoC,aAAc,CACnBpC,KAAKoC,aAAa8E,SACtB,CACA,GAAIlH,KAAKmC,iBAAkB,CACvBnC,KAAKmC,iBAAiB+E,SAC1B,CACA,GAAIlH,KAAKyE,kBAAmB,CACxBzE,KAAKyE,kBAAkByC,SAC3B,CACA,GAAIlH,KAAKqC,kBAAmB,CACxBrC,KAAKqC,kBAAkB6E,SAC3B,CACA,GAAIlH,KAAKgG,YAAa,CAClBhG,KAAKgG,YAAYkB,SACrB,CACJ,IAAC,OAhcgBrJ,CAAgB","ignoreList":[]}