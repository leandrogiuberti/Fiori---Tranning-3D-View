{"version":3,"file":"SearchFieldGroup-dbg.js","names":["sap","ui","define","InvisibleText","Button","sap_m_library","Menu","MenuItem","FlexBox","FlexItemData","__SearchInput","__SearchButton","Control","__SearchSelect","__SearchSelectQuickSelectDataSource","__i18n","Popover","FormattedText","_interopRequireDefault","obj","__esModule","default","ButtonType","PlacementType","FlexAlignItems","SearchInput","SearchButton","SearchSelect","SearchSelectQuickSelectDataSource","i18n","SearchFieldGroup","extend","renderer","apiVersion","render","oRm","oControl","openStart","class","openEnd","renderControl","getAggregation","close","metadata","properties","selectActive","defaultValue","type","selectQsDsActive","inputActive","buttonActive","nlqExplainButtonActive","cancelButtonActive","actionsMenuButtonActive","aggregations","_topFlexBox","multiple","visibility","_flexBox","_buttonAriaText","constructor","_constructor","sId","options","Control.prototype.constructor.call","initSelect","initSelectQsDs","initInput","initButton","initNlqExplainButton","initCancelButton","initActionsMenuButton","initFlexBox","setCancelButtonActive","_setCancelButtonActive","active","getProperty","setProperty","setNlqExplainButtonActive","_setNlqExplainButtonActive","setActionsMenuButtonActive","_setActionsMenuButtonActive","setSelectActive","_setSelectActive","setSelectQsDsActive","_setSelectQsDsActive","_initFlexBox","select","selectQsDs","topItems","items","setLayoutData","growFactor","push","input","button","getModel","config","aiNlqExplainBar","nlqExplainButton","cancelButton","actionsMenuButton","topFlexBox","setAggregation","removeAllAggregation","topItem","addItem","flexBox","alignItems","Start","item","_initSelect","getId","attachChange","destroySuggestionRows","_initSelectQsDs","_initInput","_initButton","tooltip","parts","path","formatter","searchButtonStatus","getText","press","event","model","isUshell","getValue","getDataSource","getDefaultDataSource","invalidateQuery","triggerSearch","oInvisibleText","text","addAriaLabelledBy","_initNlqExplainButton","nlqExplainPopover","assembleNlqPopover","icon","setModel","openBy","enabled","success","isBusy","addStyleClass","_assembleNlqPopover","filterDescription","htmlText","popover","title","content","placement","Bottom","attachBrowserEvent","focus","_initCancelButton","_initActionsMenuButton","searchfieldGroupId","Emphasized","actionsMenu","menuItems","menuItemSort","searchModel","searchCompositeControlInstance","getSearchCompositeControlInstanceByChildControl","openSortDialog","menuItemFilter","openShowMoreDialog","visible","dataSource","sina","DataSourceType","BusinessObject","_setModel","oModel","sName","Control.prototype.setModel.call","destroy","_destroy","Control.prototype.destroy.call"],"sources":["SearchFieldGroup.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport InvisibleText from \"sap/ui/core/InvisibleText\";\nimport Button from \"sap/m/Button\";\nimport { ButtonType, PlacementType } from \"sap/m/library\";\nimport Menu from \"sap/m/Menu\";\nimport MenuItem from \"sap/m/MenuItem\";\nimport FlexBox from \"sap/m/FlexBox\";\nimport FlexItemData from \"sap/m/FlexItemData\";\nimport { FlexAlignItems } from \"sap/m/library\";\nimport SearchInput from \"./SearchInput\";\nimport SearchButton from \"./SearchButton\";\nimport Control, { $ControlSettings } from \"sap/ui/core/Control\";\nimport RenderManager from \"sap/ui/core/RenderManager\";\nimport SearchModel from \"sap/esh/search/ui/SearchModel\";\nimport SearchSelect from \"./SearchSelect\";\nimport SearchSelectQuickSelectDataSource from \"./SearchSelectQuickSelectDataSource\";\nimport i18n from \"../../i18n\";\nimport Event from \"sap/ui/base/Event\";\nimport { DataSource } from \"../../sinaNexTS/sina/DataSource\";\nimport Popover from \"sap/m/Popover\";\nimport FormattedText from \"sap/m/FormattedText\";\nimport { PropertyBindingInfo } from \"sap/ui/base/ManagedObject\";\nimport Model from \"sap/ui/model/Model\";\n\nexport interface $SearchFieldGroupControlSettings extends $ControlSettings {\n    nlqExplainButtonActive?: boolean | PropertyBindingInfo | `{${string}}`;\n}\n\n/**\n * @namespace sap.esh.search.ui.controls\n */\n\nexport default class SearchFieldGroup extends Control {\n    static readonly metadata = {\n        properties: {\n            selectActive: {\n                defaultValue: true,\n                type: \"boolean\",\n            },\n            selectQsDsActive: {\n                defaultValue: false,\n                type: \"boolean\",\n            },\n            inputActive: {\n                defaultValue: true,\n                type: \"boolean\",\n            },\n            buttonActive: {\n                defaultValue: true,\n                type: \"boolean\",\n            },\n            nlqExplainButtonActive: {\n                defaultValue: false,\n                type: \"boolean\",\n            },\n            cancelButtonActive: {\n                defaultValue: true,\n                type: \"boolean\",\n            },\n            actionsMenuButtonActive: {\n                defaultValue: false,\n                type: \"boolean\",\n            },\n        },\n        aggregations: {\n            _topFlexBox: {\n                type: \"sap.m.FlexBox\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n            _flexBox: {\n                type: \"sap.m.FlexBox\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n            _buttonAriaText: {\n                type: \"sap.ui.core.InvisibleText\",\n                multiple: false,\n                visibility: \"hidden\",\n            },\n        },\n    };\n\n    public select: SearchSelect;\n    public selectQsDs: SearchSelectQuickSelectDataSource; // quick-select data sources\n    public input: SearchInput;\n    public button: Button;\n    public cancelButton: Button;\n    public nlqExplainButton: Button;\n    public actionsMenu: Menu;\n    public actionsMenuButton: Button;\n\n    private nlqExplainPopover: Popover;\n\n    constructor(sId?: string, options?: $SearchFieldGroupControlSettings) {\n        options = options || {};\n        options.nlqExplainButtonActive = \"{/isNlqActive}\";\n        super(sId, options);\n        this.initSelect();\n        this.initSelectQsDs();\n        this.initInput();\n        this.initButton();\n        this.initNlqExplainButton();\n        this.initCancelButton();\n        this.initActionsMenuButton();\n        this.initFlexBox();\n    }\n\n    setCancelButtonActive(active: boolean): void {\n        if (active === this.getProperty(\"cancelButtonActive\")) {\n            return;\n        }\n        this.setProperty(\"cancelButtonActive\", active);\n        this.initFlexBox();\n    }\n\n    setNlqExplainButtonActive(active: boolean): void {\n        if (active === this.getProperty(\"nlqExplainButtonActive\")) {\n            return;\n        }\n        this.setProperty(\"nlqExplainButtonActive\", active);\n        this.initFlexBox();\n    }\n\n    setActionsMenuButtonActive(active: boolean): void {\n        if (active === this.getProperty(\"actionsMenuButtonActive\")) {\n            return;\n        }\n        this.setProperty(\"actionsMenuButtonActive\", active);\n        this.initFlexBox();\n    }\n\n    setSelectActive(active: boolean): void {\n        if (active === this.getProperty(\"selectActive\")) {\n            return;\n        }\n        this.setProperty(\"selectActive\", active);\n        this.initFlexBox();\n    }\n\n    setSelectQsDsActive(active: boolean): void {\n        if (active === this.getProperty(\"selectQsDsActive\")) {\n            return;\n        }\n        this.setProperty(\"selectQsDsActive\", active);\n        this.initFlexBox();\n    }\n\n    initFlexBox(): void {\n        if (!this.select) {\n            return;\n        }\n        if (!this.selectQsDs) {\n            return;\n        }\n\n        const topItems = [];\n        const items = [];\n\n        if (this.getProperty(\"selectActive\")) {\n            this.select.setLayoutData(\n                new FlexItemData(\"\", {\n                    growFactor: 0,\n                })\n            );\n            items.push(this.select);\n        }\n        if (this.getProperty(\"selectQsDsActive\")) {\n            this.selectQsDs.setLayoutData(\n                new FlexItemData(\"\", {\n                    growFactor: 1,\n                })\n            );\n            topItems.push(this.selectQsDs);\n        }\n        if (this.getProperty(\"inputActive\")) {\n            this.input.setLayoutData(\n                new FlexItemData(\"\", {\n                    growFactor: 1,\n                })\n            );\n            items.push(this.input);\n        }\n        if (this.getProperty(\"buttonActive\")) {\n            this.button.setLayoutData(\n                new FlexItemData(\"\", {\n                    growFactor: 0,\n                })\n            );\n            items.push(this.button);\n        }\n        if (\n            this.getProperty(\"nlqExplainButtonActive\") &&\n            !(this.getModel() as SearchModel).config.aiNlqExplainBar\n        ) {\n            this.button.setLayoutData(\n                new FlexItemData(\"\", {\n                    growFactor: 0,\n                })\n            );\n            items.push(this.nlqExplainButton);\n        }\n        if (this.getProperty(\"cancelButtonActive\")) {\n            this.cancelButton.setLayoutData(\n                new FlexItemData(\"\", {\n                    growFactor: 0,\n                })\n            );\n            items.push(this.cancelButton);\n        }\n        if (this.getProperty(\"actionsMenuButtonActive\")) {\n            this.actionsMenuButton.setLayoutData(\n                new FlexItemData(\"\", {\n                    growFactor: 0,\n                })\n            );\n            items.push(this.actionsMenuButton);\n        }\n        if (this.getProperty(\"selectQsDsActive\")) {\n            let topFlexBox = this.getAggregation(\"_topFlexBox\") as FlexBox;\n            if (!topFlexBox) {\n                topFlexBox = new FlexBox(\"\", {\n                    items: topItems,\n                });\n                this.setAggregation(\"_topFlexBox\", topFlexBox);\n            } else {\n                topFlexBox.removeAllAggregation(\"items\");\n                for (const topItem of topItems) {\n                    topFlexBox.addItem(topItem);\n                }\n            }\n        }\n\n        let flexBox = this.getAggregation(\"_flexBox\") as FlexBox;\n        if (!flexBox) {\n            flexBox = new FlexBox(\"\", {\n                alignItems: FlexAlignItems.Start,\n                items: items,\n            });\n            this.setAggregation(\"_flexBox\", flexBox);\n        } else {\n            flexBox.removeAllAggregation(\"items\");\n            for (const item of items) {\n                flexBox.addItem(item);\n            }\n        }\n    }\n\n    initSelect(): void {\n        this.select = new SearchSelect(this.getId() + \"-select\", {});\n        this.select.attachChange(function () {\n            if (this.getAggregation(\"input\")) {\n                const input = this.getAggregation(\"input\");\n                input.destroySuggestionRows();\n            }\n        });\n    }\n\n    initSelectQsDs(): void {\n        this.selectQsDs = new SearchSelectQuickSelectDataSource(this.getId() + \"-selectQsDs\", {});\n        this.selectQsDs.attachChange(function () {\n            if (this.getAggregation(\"input\")) {\n                const input = this.getAggregation(\"input\");\n                input.destroySuggestionRows();\n            }\n        });\n    }\n\n    initInput(): void {\n        this.input = new SearchInput(this.getId() + \"-input\");\n    }\n\n    initButton(): void {\n        this.button = new SearchButton(this.getId() + \"-button\", {\n            tooltip: {\n                parts: [\n                    {\n                        path: \"/searchButtonStatus\",\n                    },\n                ],\n                formatter: (searchButtonStatus) => {\n                    return i18n.getText(\"searchButtonStatus_\" + searchButtonStatus);\n                },\n            },\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            press: (event: Event) => {\n                // searchterm is empty and datasource==all\n                // do not trigger search instead close search field\n                const model = this.button.getModel() as SearchModel;\n                if (model.config.isUshell) {\n                    if (\n                        this.input.getValue() === \"\" &&\n                        model.getDataSource() === model.getDefaultDataSource()\n                    ) {\n                        return;\n                    }\n                }\n                // trigger search\n                model.invalidateQuery();\n                this.input.destroySuggestionRows();\n                this.input.triggerSearch();\n            },\n        });\n\n        const oInvisibleText = new InvisibleText(this.getId() + \"-buttonAriaText\", {\n            text: {\n                parts: [\n                    {\n                        path: \"/searchButtonStatus\",\n                    },\n                ],\n                formatter: (searchButtonStatus) => {\n                    return i18n.getText(\"searchButtonStatus_\" + searchButtonStatus);\n                },\n            },\n        });\n\n        this.setAggregation(\"_buttonAriaText\", oInvisibleText);\n        this.button.addAriaLabelledBy(this.getAggregation(\"_buttonAriaText\") as InvisibleText);\n    }\n\n    initNlqExplainButton() {\n        this.nlqExplainPopover = this.assembleNlqPopover();\n        this.nlqExplainButton = new Button(this.getId() + \"-nlqExplainButton\", {\n            icon: \"sap-icon://ai\",\n            tooltip: \"{i18n>nlqExplainButtonTooltip}\",\n            press: () => {\n                this.nlqExplainPopover.setModel(this.getModel());\n                this.nlqExplainPopover.setModel(this.getModel(\"i18n\"), \"i18n\");\n                this.nlqExplainPopover.openBy(this.input);\n            },\n            enabled: {\n                parts: [\n                    {\n                        path: \"/nlqResult/success\",\n                    },\n                    {\n                        path: \"/isBusy\",\n                    },\n                ],\n                formatter: (success, isBusy) => {\n                    return !!success && !isBusy;\n                },\n            },\n        });\n        this.nlqExplainButton.addStyleClass(\"sapUshellSearchNlqExplainButton\");\n    }\n\n    assembleNlqPopover(): Popover {\n        const filterDescription = new FormattedText({\n            htmlText: {\n                parts: [{ path: \"/nlqResult/filterDescription\" }],\n                formatter: (filterDescription: string) => {\n                    if (!filterDescription) {\n                        return i18n.getText(\"nlqNoFilter\");\n                    }\n                    return filterDescription;\n                },\n            },\n        });\n        filterDescription.addStyleClass(\"sapUiSmallMargin\");\n        const popover = new Popover({\n            title: \"{i18n>nlqPopoverTitle}\",\n            content: [filterDescription],\n            placement: PlacementType.Bottom,\n        });\n        popover.addStyleClass(\"sapUshellSearchNlqExplainPopover\");\n        this.input.attachBrowserEvent(\"focusin\", () => {\n            popover.close();\n            this.input.focus(); // popover close sets focus to ai explain button therefore again set focus to input\n        });\n        return popover;\n    }\n\n    initCancelButton(): void {\n        this.cancelButton = new Button(this.getId() + \"-buttonCancel\", {\n            text: \"{i18n>cancelBtn}\",\n        });\n        this.cancelButton.addStyleClass(\"sapUshellSearchCancelButton\");\n    }\n\n    initActionsMenuButton(): void {\n        const searchfieldGroupId = this.getId();\n        this.actionsMenuButton = new Button(searchfieldGroupId + \"-actionsMenuButton\", {\n            icon: \"sap-icon://overflow\",\n            type: ButtonType.Emphasized,\n            press: () => {\n                if (!this.actionsMenu) {\n                    const menuItems = [];\n                    // sort\n                    const menuItemSort = new MenuItem(searchfieldGroupId + \"-menuItemSort\", {\n                        text: \"{i18n>actionsMenuSort}\",\n                        icon: \"sap-icon://sort\",\n                        press: (/* oEvent: Event */): void => {\n                            const searchModel = this.getModel() as SearchModel;\n                            const searchCompositeControlInstance =\n                                searchModel.getSearchCompositeControlInstanceByChildControl(\n                                    this.actionsMenuButton\n                                );\n                            if (searchCompositeControlInstance) {\n                                searchCompositeControlInstance.openSortDialog();\n                            } else {\n                                // not expected / robustness -> do not swhow sort popover\n                            }\n                        },\n                    });\n                    menuItems.push(menuItemSort);\n                    // filter\n                    const menuItemFilter = new MenuItem(\n                        (this.getId() ? this.getId() + \"-\" : \"\") + \"menuItemFilter\",\n                        {\n                            text: \"{i18n>actionsMenuFilter}\",\n                            icon: \"sap-icon://filter\",\n                            press: (/* oEvent: any */): void => {\n                                const searchModel = this.getModel() as SearchModel;\n                                const searchCompositeControlInstance =\n                                    searchModel.getSearchCompositeControlInstanceByChildControl(\n                                        this.actionsMenuButton\n                                    );\n                                if (searchCompositeControlInstance) {\n                                    searchCompositeControlInstance.openShowMoreDialog();\n                                } else {\n                                    // not expected / robustness -> do not swhow sort popover\n                                }\n                            },\n                        }\n                    );\n                    menuItems.push(menuItemFilter);\n                    this.actionsMenu = new Menu({\n                        items: menuItems,\n                    });\n                    this.actionsMenu.setModel(this.getModel(\"i18n\"), \"i18n\");\n                }\n                this.actionsMenu.openBy(this.actionsMenuButton, true);\n            },\n            visible: {\n                parts: [{ path: \"/uiFilter/dataSource\" }],\n                formatter: (dataSource: DataSource) => {\n                    return dataSource?.type === dataSource?.sina?.DataSourceType.BusinessObject;\n                },\n            },\n        });\n        this.actionsMenuButton.addStyleClass(\"sapUiTinyMarginBegin\");\n    }\n\n    setModel(oModel: Model, sName?: string): this {\n        super.setModel(oModel, sName);\n        this.select.setModel(oModel, sName);\n        this.input.setModel(oModel, sName);\n        this.button.setModel(oModel, sName);\n        this.cancelButton.setModel(oModel, sName);\n        this.nlqExplainButton.setModel(oModel, sName);\n        this.actionsMenuButton.setModel(oModel, sName);\n        (this.getAggregation(\"_buttonAriaText\") as InvisibleText).setModel(oModel, sName);\n        return this;\n    }\n\n    destroy(): void {\n        super.destroy();\n        if (this.select) {\n            this.select.destroy();\n        }\n        if (this.selectQsDs) {\n            this.selectQsDs.destroy();\n        }\n        if (this.cancelButton) {\n            this.cancelButton.destroy();\n        }\n        if (this.nlqExplainButton) {\n            this.nlqExplainButton.destroy();\n        }\n        if (this.nlqExplainPopover) {\n            this.nlqExplainPopover.destroy();\n        }\n        if (this.actionsMenuButton) {\n            this.actionsMenuButton.destroy();\n        }\n        if (this.actionsMenu) {\n            this.actionsMenu.destroy();\n        }\n    }\n\n    static renderer = {\n        apiVersion: 2,\n        render(oRm: RenderManager, oControl: SearchFieldGroup): void {\n            oRm.openStart(\"div\", oControl);\n            oRm.class(\"SearchFieldGroup\");\n            oRm.openEnd();\n            oRm.renderControl(oControl.getAggregation(\"_topFlexBox\") as FlexBox);\n            oRm.renderControl(oControl.getAggregation(\"_flexBox\") as FlexBox);\n            oRm.renderControl(oControl.getAggregation(\"_buttonAriaText\") as InvisibleText);\n            oRm.close(\"div\");\n        },\n    };\n}\n"],"mappings":"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","ignoreList":[]}