{"version":3,"file":"SearchInput-dbg.js","names":["sap","ui","define","__i18n","Input","Label","Text","sap_m_library","Column","ColumnListItem","CustomListItem","FlexItemData","BusyIndicator","FlexBox","Icon","HorizontalLayout","VerticalLayout","BindingMode","SearchHelper","__SuggestionType","__SearchShellHelperHorizonTheme","____eventlogging_UserEvents","__UIEvents","Device","__SearchObjectSuggestionImage","Element","EventBus","Log","Link","_interopRequireDefault","obj","__esModule","default","i18n","FlexAlignItems","FlexDirection","FlexJustifyContent","ListType","SuggestionType","UISuggestionType","isSearchSuggestion","SearchShellHelperHorizonTheme","UserEventType","UIEvents","SearchObjectSuggestionImage","SearchInput","extend","renderer","apiVersion","constructor","_constructor","sId","options","logger","getLogger","triggerSuggestionItemSelected","phone","system","Input.prototype.constructor.call","decorateHandleListNavigation","setStartSuggestion","setWidth","setShowValueStateMessage","setShowTableSuggestionValueHelp","setEnableSuggestionsHighlighting","setShowSuggestion","setFilterSuggests","addSuggestionColumn","attachSuggestionItemSelected","handleSuggestionItemSelected","bind","setAutocomplete","setTooltip","getText","bindProperty","path","mode","OneWay","attachLiveChange","handleLiveChange","setValueLiveUpdate","parts","formatter","initializingObjSearch","bindAggregation","factory","oContext","suggestionItemFactory","addStyleClass","_bUseDialog","_bFullScreen","listNavigationMode","isMobileDevice","_isMobileDevice","onfocusin","_onfocusin","oEvent","Input.prototype.onfocusin.call","relatedTarget","classList","contains","isOpen","oModel","getModel","getSearchBoxTerm","length","config","bRecentSearches","aiSuggestions","doSuggestion","onsapenter","_onsapenter","args","isSuggestionFocused","getFocusedListItem","invalidateQuery","triggerSearch","prototype","apply","updateSelectionFromList","_updateSelectionFromList","item","_triggerSearch","msgPopupId","getProperty","messagePopup","getElementById","close","setVisible","subscribeOnlyOnce","ESHSearchFinished","autoStartApp","getValue","trim","isUshell","setValue","isNavigationAllowed","navigateToSearchApp","destroySuggestionRows","abortSuggestions","_isNavigationAllowed","searchBoxTerm","handler","searchTermHandlers","searchTermWasHandled","handleSearchTerm","focus","_decorateHandleListNavigation","suggestionPopover","handleListNavigation","decorated","_handleLiveChange","domRef","getDomRef","input","querySelector","setAttribute","_handleSuggestionItemSelected","suggestion","getParameter","getBindingContext","getObject","suggestionTerm","searchTerm","dataSource","getDataSource","targetURL","url","type","uiSuggestionType","Header","eventLogger","logEvent","SUGGESTION_SELECT","suggestionTitle","title","suggestionType","targetUrl","dataSourceKey","id","recentlyUsedStorage","Object","addItem","selectText","Search","titleNavigation","performNavigation","Transaction","App","indexOf","getHashFromUrl","decodeURIComponent","setSearchBoxTerm","query","filter","setDataSource","notifySubscribers","getInstance","publish","window","hasher","prependHash","slice","setHash","location","href","logRecentActivity","open","isSearchFieldExpandedByDefault","require","collapseSearch","DataSource","SearchTermData","SearchTermAI","SearchTermHistory","objectSuggestion","_logRecentActivity","Config","AppType","bLogRecentActivity","last","oRecentEntry","appType","URL","appId","ushell","Container","getRenderer","_suggestionItemFactory","objectSuggestionItemFactory","headerSuggestionItemFactory","busyIndicatorSuggestionItemFactory","regularSuggestionItemFactory","_busyIndicatorSuggestionItemFactory","cell","content","size","listItem","cells","Inactive","getVisible","assembleListNavigationModeGetVisibleFunction","_headerSuggestionItemFactory","items","leftItems","uiSuggestionTypeOfSuggestionsInSection","icon","src","push","label","text","leftContent","direction","Row","justifyContent","Start","helpLink","rightContent","target","SpaceBetween","_assembleListNavigationModeGetVisibleFunction","assembleObjectSuggestionLabels","_assembleObjectSuggestionLabels","labels","label1","addEventDelegate","onAfterRendering","boldTagUnescaper","label2","vLayout","_objectSuggestionItemFactory","suggestionParts","imageExists","imageUrl","startsWith","isCircular","suggestionPartsToAdd","Active","_regularSuggestionItemFactory","filterIcon","layoutData","shrinkFactor","minWidth","wrapping","getPath","domref","innerHTML","hasSpan","lastIndexOf","userEntered","notUserEntered","notUserEnteredHTML","boldTagUnescaperForStrings","alignItems","Center","_navigateToSearchApp","oSearchModel","isSearchAppActive","fireSearchQuery","resetSearchResultItemMemory","sHash","createSearchNavigationTargetCurrentState","updateUrl","hash","_onAfterRendering","Input.prototype.onAfterRendering.call","form","document","createElement","style","setProperty","addEventListener","e","preventDefault","inputParent","parentElement","appendChild","getId","onValueRevertedByEscape","_onValueRevertedByEscape","onsapescape","_onsapescape","Input.prototype.onsapescape.call"],"sources":["SearchInput.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport i18n from \"../../i18n\";\nimport Input, { $InputSettings, Input$SuggestionItemSelectedEvent } from \"sap/m/Input\";\nimport Label from \"sap/m/Label\";\nimport Text from \"sap/m/Text\";\nimport { FlexAlignItems, FlexDirection, FlexJustifyContent, ListType } from \"sap/m/library\";\nimport Column from \"sap/m/Column\";\nimport ColumnListItem from \"sap/m/ColumnListItem\";\nimport CustomListItem from \"sap/m/CustomListItem\";\nimport FlexItemData from \"sap/m/FlexItemData\";\nimport BusyIndicator from \"sap/m/BusyIndicator\";\nimport FlexBox from \"sap/m/FlexBox\";\nimport Icon from \"sap/ui/core/Icon\";\nimport HorizontalLayout from \"sap/ui/layout/HorizontalLayout\";\nimport VerticalLayout from \"sap/ui/layout/VerticalLayout\";\nimport BindingMode from \"sap/ui/model/BindingMode\";\nimport * as SearchHelper from \"../../SearchHelper\";\nimport SearchModel from \"sap/esh/search/ui/SearchModel\";\nimport Context from \"sap/ui/model/Context\";\nimport SuggestionType, {\n    Suggestion,\n    SuggestionHeader,\n    Type as UISuggestionType,\n    UISinaObjectSuggestion,\n    isSearchSuggestion,\n} from \"../../suggestions/SuggestionType\";\nimport SearchShellHelperHorizonTheme from \"../../SearchShellHelperHorizonTheme\";\nimport { UserEventType } from \"../../eventlogging/UserEvents\";\nimport UIEvents from \"../../UIEvents\";\nimport Device from \"sap/ui/Device\";\nimport SearchObjectSuggestionImage from \"./SearchObjectSuggestionImage\";\nimport Element from \"sap/ui/core/Element\";\nimport EventBus from \"sap/ui/core/EventBus\";\nimport Log from \"sap/base/Log\";\nimport Link from \"sap/m/Link\";\nimport MessagePopover from \"sap/m/MessagePopover\";\n\ndeclare global {\n    interface Window {\n        hasher: {\n            prependHash: string;\n            getHash: () => string;\n            setHash: (hash: string) => void;\n        };\n    }\n}\n\n/**\n * @namespace sap.esh.search.ui.controls\n */\nexport default class SearchInput extends Input {\n    private _bUseDialog: boolean;\n    private _bFullScreen: boolean;\n    private logger = Log.getLogger(\"sap.esh.search.ui.SearchInput\");\n    private listNavigationMode: boolean;\n    triggerSuggestionItemSelected = false;\n\n    constructor(sId?: string, options?: $InputSettings) {\n        // ugly hack disable fullscreen input on phone - start     // ToDo: remove by switching search input to sap.m.SearchField\n        // see also method isMobileDevice\n        const phone = Device.system.phone;\n        try {\n            (Device.system as any).phone = false; // ToDo, 'phone' is a constant (read-only)\n            super(sId, options);\n        } finally {\n            (Device.system as any).phone = phone; // ToDo, 'phone' is a constant (read-only)\n            // ugly hack - end\n        }\n\n        this.decorateHandleListNavigation();\n        this.setStartSuggestion(0);\n        this.setWidth(\"100%\");\n        this.setShowValueStateMessage(false);\n        this.setShowTableSuggestionValueHelp(false);\n        this.setEnableSuggestionsHighlighting(false);\n        this.setShowSuggestion(true);\n        this.setFilterSuggests(false);\n        this.addSuggestionColumn(new Column(\"\"));\n        this.attachSuggestionItemSelected(this.handleSuggestionItemSelected.bind(this));\n        this.setAutocomplete(false);\n        this.setTooltip(i18n.getText(\"search\"));\n        this.bindProperty(\"placeholder\", {\n            path: \"/searchTermPlaceholder\",\n            mode: BindingMode.OneWay,\n        });\n        this.attachLiveChange(this.handleLiveChange.bind(this));\n        this.setValueLiveUpdate(true);\n        this.bindProperty(\"enabled\", {\n            parts: [\n                {\n                    path: \"/initializingObjSearch\",\n                },\n            ],\n            formatter: (initializingObjSearch) => !initializingObjSearch,\n        });\n        this.bindAggregation(\"suggestionRows\", {\n            path: \"/suggestions\",\n            factory: (sId, oContext) => this.suggestionItemFactory(sId, oContext),\n        });\n        this.bindProperty(\"value\", { path: \"/uiFilter/searchTerm\" });\n        this.addStyleClass(\"searchInput\");\n\n        // disable fullscreen input on phone\n        this._bUseDialog = false;\n        this._bFullScreen = false;\n\n        this.listNavigationMode = false;\n    }\n\n    isMobileDevice(): boolean {\n        // ugly hack disable fullscreen input on phone - start\n        return false;\n        // ugly hack disable fullscreen input on phone - end\n    }\n\n    onfocusin(oEvent: JQuery.Event): void {\n        // keep type 'JQuery.Event' here, because of sap.m.Input, function 'onfocusin'\n        super.onfocusin(oEvent);\n        const relatedTarget = (oEvent as unknown as FocusEvent).relatedTarget as HTMLElement | null;\n        if (\n            relatedTarget?.classList?.contains(\"searchSuggestionColumnListItem\") ||\n            this[\"_oSuggPopover\"].isOpen()\n        ) {\n            // this ignores focus events caused by clicking on suggestions items\n            // focus events on suggestions items my cause side:\n            // sometimes focus event sometimes is faster then suggestionItemSelected\n            // in case suggestion list is cleared by focus event in suggestion handler\n            // the subsequent suggestionsItem selected event fails\n            return;\n        }\n        const oModel = this.getModel() as SearchModel;\n        if (\n            oModel.getSearchBoxTerm().length === 0 &&\n            (oModel.config.bRecentSearches || oModel.config.aiSuggestions)\n        ) {\n            oModel.doSuggestion();\n        }\n    }\n\n    onsapenter(...args: Array<unknown>): void {\n        // if (!(this[\"_oSuggestionPopup\"]?.isOpen() && this[\"_oSuggPopover\"].getFocusedListItem())) {\n        //     // if (!(this._oSuggestionPopup && this._oSuggestionPopup.isOpen() && this.[\"_oSuggPopover\"]._iPopupListSelectedIndex >= 0)) {\n        //     // check that enter happened in search input box and not on a suggestion item\n        //     // enter on a suggestion is not handled in onsapenter but in handleSuggestionItemSelected\n        //     (this.getModel() as SearchModel).invalidateQuery();\n        //     this.triggerSearch();\n        // }\n        const isSuggestionFocused =\n            this[\"_oSuggestionPopup\"]?.isOpen() && this[\"_oSuggPopover\"].getFocusedListItem();\n        if (!isSuggestionFocused) {\n            // no suggestion item focused -> trigger search\n            (this.getModel() as SearchModel).invalidateQuery();\n            this.triggerSearch();\n            Input.prototype.onsapenter.apply(this, args);\n        } else {\n            // sugestion item focused -> trigger suggestion\n            this.triggerSuggestionItemSelected = true;\n            Input.prototype.onsapenter.apply(this, args);\n            this.triggerSuggestionItemSelected = false;\n        }\n        // Input.prototype.onsapenter.apply(this, args);\n    }\n\n    // overwrite of UI5 base class method\n    // this method is called by UI5 and triggers the suggestionItemSelected event\n    // the method is called when\n    // 1) suggestion popup is closed by focus out\n    // 2) suggestion popup is closed by enter on suggestion item\n    // for use case 1) we don't want that the suggestionItemSelectedEvent therefore we set triggerSelectionItemSelected=false\n    // for use case 2) the suggestionItemSelectedEvent shall be created therefore in method onsapenter we set temporary triggerSelectionItemSelected=true\n    updateSelectionFromList(item: unknown): void {\n        if (this.triggerSuggestionItemSelected) {\n            // default UI5 logic which triggers handleSuggestionItemSelected\n            // super.updateSelectionFromList(item);\n            (Input.prototype as any).updateSelectionFromList.apply(this, [item]); // alternative writing to avoid super private method call\n        } else {\n            // special logic in order to prevent that UI5 triggers handleSuggestionItemSelected\n            // this.setSelectionUpdatedFromList(false);\n            this[\"setSelectionUpdatedFromList\"](false); // alternative writing to avoid super private method call\n        }\n    }\n\n    triggerSearch(): void {\n        // the footer is rerendered after each search in stand alone UI -> error popover losts parent and jumps to the screen top.\n        // solution: if the error popover shows, set footer invisible before next search.\n        // popover.close() is not working. It is closed after footer invisible, so it still jumps\n        const msgPopupId = this.getModel().getProperty(\"/messagePopoverControlId\");\n        const messagePopup = Element.getElementById(msgPopupId) as MessagePopover;\n        if (this.getModel().getProperty(\"/errors\").length > 0 && messagePopup?.isOpen()) {\n            messagePopup.close();\n            messagePopup.setVisible(false);\n        }\n        // it is necessay to do this in search input (and not in search model) because otherwise navigating back from the app to the\n        // search UI would result in a repeated navigation to the app\n        SearchHelper.subscribeOnlyOnce(\n            \"triggerSearch\",\n            UIEvents.ESHSearchFinished,\n            function () {\n                (this.getModel() as SearchModel).autoStartApp();\n            },\n            this\n        );\n        const oModel = this.getModel() as SearchModel;\n        if (this.getValue().trim() === \"\" && oModel.config.isUshell) {\n            this.setValue(\"*\"); // special behaviour for S/4\n        }\n        if (this.isNavigationAllowed()) {\n            this.navigateToSearchApp();\n        }\n        this.destroySuggestionRows();\n        oModel.abortSuggestions();\n    }\n\n    isNavigationAllowed(): boolean {\n        const oModel = this.getModel() as SearchModel;\n        const searchBoxTerm = this.getValue();\n        for (const handler of oModel.searchTermHandlers) {\n            const searchTermWasHandled = handler.handleSearchTerm(searchBoxTerm);\n            if (searchTermWasHandled === true) {\n                this.focus(); // make sure that suggestions are visible in case there is an error message to show therein\n                return false;\n            }\n        }\n        return true;\n    }\n\n    decorateHandleListNavigation() {\n        // ugly modifiaction: headers and busy indicator in suggestions shall not be selectable\n        const suggestionPopover = this[\"_oSuggPopover\"];\n        if (\n            suggestionPopover &&\n            suggestionPopover.handleListNavigation &&\n            !suggestionPopover.handleListNavigation.decorated\n        ) {\n            const handleListNavigation = suggestionPopover.handleListNavigation;\n            suggestionPopover.handleListNavigation = (...args: unknown[]) => {\n                this.listNavigationMode = true;\n                handleListNavigation.apply(suggestionPopover, args);\n                // -handleListNavigation calls getVisible on the suggestion items in order to determine to which suggestion items we can navigate\n                // -for suggestion items of type 'header' or 'busy indicator' (to which no navigation shall take place) the getVisible function is overwritten\n                // -the overwritten getVisible function returns false only for listNavigationMode=true\n                // ==> this way suggestion items of type 'header' or 'busy indicator' are visible but we cannot navigate to them\n                this.listNavigationMode = false;\n            };\n            suggestionPopover.handleListNavigation.decorated = true;\n        }\n    }\n\n    handleLiveChange(): void {\n        const oModel = this.getModel() as SearchModel;\n        if (oModel.getSearchBoxTerm().length > 0 || oModel.config.bRecentSearches) {\n            oModel.doSuggestion();\n        } else {\n            this.destroySuggestionRows();\n            oModel.abortSuggestions();\n            // set aria-expanded to false on the input element\n            const domRef = this.getDomRef();\n            if (domRef) {\n                const input = domRef.querySelector(\"input\");\n                if (input) {\n                    input.setAttribute(\"aria-expanded\", \"false\");\n                }\n            }\n        }\n    }\n\n    handleSuggestionItemSelected(oEvent: Input$SuggestionItemSelectedEvent): void {\n        const oModel = this.getModel() as SearchModel;\n        const searchBoxTerm = oModel.getSearchBoxTerm();\n        const suggestion = oEvent.getParameter(\"selectedRow\").getBindingContext().getObject() as Suggestion;\n        const suggestionTerm = suggestion.searchTerm || \"\";\n        const dataSource = suggestion.dataSource || oModel.getDataSource();\n        let targetURL = suggestion.url;\n\n        const type = suggestion.uiSuggestionType;\n        if (type === SuggestionType.Header || type === SuggestionType.BusyIndicator) {\n            // workaroung in case someonw clicks on a header\n            this.destroySuggestionRows();\n            this.setValue(\"\");\n            return;\n        }\n\n        oModel.eventLogger.logEvent({\n            type: UserEventType.SUGGESTION_SELECT,\n            suggestionTitle: suggestion.title,\n            suggestionType: type,\n            suggestionTerm: suggestionTerm,\n            searchTerm: searchBoxTerm,\n            targetUrl: targetURL,\n            dataSourceKey: dataSource ? dataSource.id : \"\",\n        });\n\n        if (oModel.config.bRecentSearches && oModel.recentlyUsedStorage && type === SuggestionType.Object) {\n            // Object Suggestions in DSP open in new tab, thus we need to save it here.\n            // All other suggestions trigger a search which will be added as a recent item through search model.\n            oModel.recentlyUsedStorage.addItem(suggestion);\n        }\n\n        // remove any selection\n        this.selectText(0, 0);\n\n        switch (type) {\n            case SuggestionType.Search: {\n                if (isSearchSuggestion(suggestion)) {\n                    suggestion.titleNavigation.performNavigation();\n                }\n                break;\n            }\n            case SuggestionType.Transaction:\n            case SuggestionType.App:\n                // app or transactions suggestions -> start app\n\n                // starting the app by hash change closes the suggestion popup\n                // closing the suggestion popup again triggers the suggestion item selected event\n                // in order to avoid to receive the event twice the suggestions are destroyed\n                this.destroySuggestionRows();\n                oModel.abortSuggestions();\n\n                if (targetURL[0] === \"#\") {\n                    if (\n                        targetURL.indexOf(\"#Action-search\") === 0 &&\n                        (targetURL === SearchHelper.getHashFromUrl() ||\n                            targetURL === decodeURIComponent(SearchHelper.getHashFromUrl()))\n                    ) {\n                        // ugly workaround\n                        // in case the app suggestion points to the search app with query identical to current query\n                        // --> do noting except: restore query term + focus again the first item in the result list\n                        oModel.setSearchBoxTerm(oModel.query.filter.searchTerm, false);\n                        oModel.setDataSource(oModel.query.filter.dataSource, false);\n                        oModel.notifySubscribers(UIEvents.ESHSearchFinished);\n                        EventBus.getInstance().publish(UIEvents.ESHSearchFinished);\n                        return;\n                    }\n                    if (window[\"hasher\"]) {\n                        if (targetURL[1] === window.hasher.prependHash) {\n                            // hasher preprends a \"prependHash\" character between \"#\" and the rest.\n                            // so we remove the same character to have the desired string in the end after hasher changed it\n                            // this avoids a wrong url if the application does not use window.hasher.getHash which removes prependHash again\n                            targetURL = targetURL.slice(0, 1) + targetURL.slice(2);\n                        }\n                        window[\"hasher\"].setHash(targetURL);\n                    } else {\n                        window.location.href = targetURL;\n                    }\n                } else {\n                    // special logging: only for urls started via suggestions\n                    // (apps/urls started via click ontile have logger in tile click handler)\n                    this.logRecentActivity(suggestion);\n\n                    window.open(targetURL, \"_blank\", \"noopener,noreferrer\");\n                    oModel.setSearchBoxTerm(\"\", false);\n                }\n\n                // close the search field if suggestion is not search app\n                if (oModel.config.isUshell && targetURL.indexOf(\"#Action-search\") !== 0) {\n                    // 1) navigate to an app <> search\n                    if (!SearchShellHelperHorizonTheme.isSearchFieldExpandedByDefault()) {\n                        sap.ui.require(\"sap/esh/search/ui/SearchShellHelper\").collapseSearch();\n                    }\n                } else {\n                    // 2) navigate to search app\n                    this.focus();\n                }\n                break;\n            case SuggestionType.DataSource:\n                // data source suggestions\n                // -> change datasource in dropdown\n                // -> do not start search\n                oModel.setDataSource(dataSource, false);\n                oModel.setSearchBoxTerm(\"\", false);\n                this.focus();\n                break;\n            case SuggestionType.SearchTermData:\n            case SuggestionType.SearchTermAI:\n                // -> change search term + change datasource + start search\n                oModel.setDataSource(dataSource, false);\n                oModel.setSearchBoxTerm(suggestionTerm, false);\n                oModel.invalidateQuery();\n                this.navigateToSearchApp();\n                break;\n            case SuggestionType.SearchTermHistory:\n                // history\n                // -> change search term + change datasource + start search\n                oModel.setDataSource(dataSource, false);\n                oModel.setSearchBoxTerm(suggestionTerm, false);\n                oModel.invalidateQuery();\n                this.navigateToSearchApp();\n                break;\n            case SuggestionType.Object: {\n                const objectSuggestion = suggestion as UISinaObjectSuggestion;\n                if (objectSuggestion.titleNavigation) {\n                    objectSuggestion.titleNavigation.performNavigation();\n                }\n                break;\n            }\n            default:\n                break;\n        }\n    }\n\n    logRecentActivity(suggestion: Suggestion): void {\n        // load ushell deps lazy only in case of FLP\n        sap.ui.require([\"sap/ushell/Config\", \"sap/ushell/services/AppType\"], function (Config, AppType) {\n            const bLogRecentActivity =\n                Config.last(\"/core/shell/enableRecentActivity\") &&\n                Config.last(\"/core/shell/enableRecentActivityLogging\");\n            if (bLogRecentActivity) {\n                const oRecentEntry = {\n                    title: suggestion.title,\n                    appType: AppType.URL,\n                    url: suggestion.url,\n                    appId: suggestion.url,\n                };\n                ((window.sap.ushell as any).Container.getRenderer(\"fiori2\") as any).logRecentActivity(\n                    oRecentEntry\n                );\n            }\n        });\n    }\n\n    suggestionItemFactory(sId: string, oContext: Context): ColumnListItem {\n        // set aria-expanded to true on the input element\n        const domRef = this.getDomRef();\n        if (domRef) {\n            const input = domRef.querySelector(\"input\");\n            if (input) {\n                input.setAttribute(\"aria-expanded\", \"true\");\n            }\n        }\n        const suggestion = oContext.getObject() as Suggestion;\n        switch (suggestion.uiSuggestionType) {\n            case SuggestionType.Object:\n                return this.objectSuggestionItemFactory(sId, oContext);\n            case SuggestionType.Header:\n                return this.headerSuggestionItemFactory(sId, oContext);\n            case SuggestionType.BusyIndicator:\n                return this.busyIndicatorSuggestionItemFactory(/* sId, oContext */);\n            default:\n                return this.regularSuggestionItemFactory(sId, oContext);\n        }\n    }\n\n    busyIndicatorSuggestionItemFactory(/* sId: string, oContext: Context */): ColumnListItem {\n        const cell = new VerticalLayout(\"\", {\n            content: [\n                new BusyIndicator(\"\", {\n                    size: \"0.6rem\",\n                }),\n            ],\n        });\n\n        cell[\"getText\"] = () => {\n            return this.getValue();\n        };\n\n        const listItem = new ColumnListItem(\"\", {\n            cells: [cell],\n            type: ListType.Inactive,\n        });\n        listItem.addStyleClass(\"searchSuggestion\");\n        listItem.addStyleClass(\"searchBusyIndicatorSuggestion\");\n        listItem.getVisible = this.assembleListNavigationModeGetVisibleFunction();\n        return listItem;\n    }\n\n    headerSuggestionItemFactory(sId: string, oContext: Context): ColumnListItem {\n        const suggestion = oContext.getObject() as SuggestionHeader;\n        const items = [];\n\n        // left\n        const leftItems = [];\n        if (suggestion.uiSuggestionTypeOfSuggestionsInSection === UISuggestionType.SearchTermAI) {\n            const icon = new Icon({ src: \"sap-icon://ai\" });\n            icon.addStyleClass(\"sapUiTinyMarginEnd\");\n            leftItems.push(icon);\n        }\n        const label = new Label(\"\", {\n            text: { path: \"label\" },\n        });\n        leftItems.push(label);\n        const leftContent = new FlexBox(\"\", {\n            direction: FlexDirection.Row,\n            justifyContent: FlexJustifyContent.Start,\n            items: leftItems,\n        });\n        items.push(leftContent);\n\n        // right\n        if (suggestion.helpLink) {\n            const rightContent = new Link({\n                text: i18n.getText(\"searchTermAILernMoreLink\"),\n                target: \"_blank\",\n                href: suggestion.helpLink,\n            });\n            items.push(rightContent);\n        }\n\n        // flexbox containing left and right\n        const cell = new FlexBox(\"\", {\n            direction: FlexDirection.Row,\n            justifyContent: FlexJustifyContent.SpaceBetween,\n            items: items,\n        });\n        cell[\"getText\"] = () => {\n            //return this.getValue();\n            return suggestion.label;\n            // workaround: return \" \" -> header cannot be auto selected by sap.m.Input because\n            // input field text != suggestion.label \" \"\n        };\n\n        // column list item containing flexbo\n        const listItem = new ColumnListItem(\"\", {\n            cells: [cell],\n            type: ListType.Inactive,\n        });\n        listItem.addStyleClass(\"searchSuggestion\");\n        listItem.addStyleClass(\"searchHeaderSuggestion\");\n        listItem.getVisible = this.assembleListNavigationModeGetVisibleFunction();\n\n        return listItem;\n    }\n\n    assembleListNavigationModeGetVisibleFunction(): () => boolean {\n        return () => {\n            if (!this.listNavigationMode) {\n                return true; // without the special list navigation mode we return the default value true\n            }\n            // in list navigation mode\n            return false;\n        };\n    }\n\n    assembleObjectSuggestionLabels(suggestion: {\n        imageUrl?: string;\n        imageExists?: true;\n        imageIsCircular?: boolean;\n        exists?: false;\n        label2?: string;\n    }): VerticalLayout {\n        // first line: label 1\n        const labels = [];\n        const label1 = new Label(\"\", {\n            text: { path: \"label1\" },\n        });\n        label1.addEventDelegate(\n            {\n                onAfterRendering: () => {\n                    SearchHelper.boldTagUnescaper(label1.getDomRef() as HTMLElement);\n                },\n            },\n            label1\n        );\n        label1.addStyleClass(\"sapUshellSearchObjectSuggestion-Label1\");\n        labels.push(label1);\n\n        // second line: label 2\n        if (suggestion.label2) {\n            const label2 = new Label(\"\", {\n                text: { path: \"label2\" },\n            });\n            label2.addEventDelegate(\n                {\n                    onAfterRendering: () => {\n                        SearchHelper.boldTagUnescaper(label2.getDomRef() as HTMLElement);\n                    },\n                },\n                label2\n            );\n            label2.addStyleClass(\"sapUshellSearchObjectSuggestion-Label2\");\n            labels.push(label2);\n        }\n\n        const vLayout = new VerticalLayout(\"\", {\n            content: labels,\n        });\n        vLayout.addStyleClass(\"sapUshellSearchObjectSuggestion-Labels\");\n        return vLayout;\n    }\n\n    objectSuggestionItemFactory(sId: string, oContext: Context): ColumnListItem {\n        const suggestion = oContext.getObject() as {\n            imageUrl?: string;\n            imageExists?: true;\n            imageIsCircular?: boolean;\n            exists?: false;\n            label2?: string;\n        };\n        const suggestionParts = [];\n\n        // image\n        if (suggestion.imageExists && suggestion.imageUrl) {\n            if (suggestion.imageUrl.startsWith(\"sap-icon://\")) {\n                suggestionParts.push(\n                    new Icon(\"\", {\n                        src: suggestion.imageUrl,\n                    }).addStyleClass(\"sapUshellSearchObjectSuggestIcon\")\n                );\n            } else {\n                suggestionParts.push(\n                    new SearchObjectSuggestionImage(\"\", {\n                        src: { path: \"imageUrl\" },\n                        isCircular: { path: \"imageIsCircular\" },\n                    })\n                );\n            }\n        }\n\n        // labels\n        const suggestionPartsToAdd = this.assembleObjectSuggestionLabels(suggestion);\n        suggestionParts.push(suggestionPartsToAdd);\n\n        // combine image and labels\n        const cell = new HorizontalLayout(\"\", {\n            content: suggestionParts,\n        });\n        cell.addStyleClass(\"sapUshellSearchObjectSuggestion-Container\");\n\n        // there is an issue with focus on suggestions, which will be triggerd by loss of focus on the suggestion item\n        // workaround: to avoid auto focus on object suggestions, we don't return the value of getText, so that the focus is not set\n        // with solution above by overwriting of private method updateSelectionFromList, it could work without workaround\n        cell[\"getText\"] = () => {\n            return this.getValue();\n        };\n\n        // suggestion list item\n        const listItem = new ColumnListItem(\"\", {\n            cells: [cell],\n            type: ListType.Active,\n        });\n        listItem.addStyleClass(\"searchSuggestion\");\n        listItem.addStyleClass(\"searchObjectSuggestion\");\n        return listItem;\n    }\n\n    regularSuggestionItemFactory(sId: string, oContext: Context): ColumnListItem {\n        // icon at the front:\n        const icon = new Icon(\"\", {\n            src: { path: \"icon\" },\n        })\n            .addStyleClass(\"suggestIcon\")\n            .addStyleClass(\"sapUshellSearchSuggestAppIcon\")\n            .addStyleClass(\"suggestListItemCell\");\n\n        // recent search suggestions which have a filter will get this additional icon\n        // at the end of the line:\n        const filterIcon = new Icon(\"\", {\n            src: { path: \"filterIcon\" },\n        })\n            .addStyleClass(\"suggestIcon\")\n            .addStyleClass(\"sapUshellSearchSuggestFilterIcon\")\n            .addStyleClass(\"suggestListItemCell\");\n\n        const layoutData = new FlexItemData(\"\", {\n            shrinkFactor: 1,\n            minWidth: \"4rem\",\n        });\n\n        // label\n        const label = new Text(\"\", {\n            text: { path: \"label\" },\n            layoutData: layoutData,\n            wrapping: false,\n        })\n            .addStyleClass(\"suggestText\")\n            .addStyleClass(\"suggestNavItem\")\n            .addStyleClass(\"suggestListItemCell\");\n\n        const suggestion = oContext.getModel().getProperty(oContext.getPath());\n\n        label.addEventDelegate(\n            {\n                onAfterRendering: () => {\n                    const domref = label.getDomRef() as HTMLElement;\n                    const innerHTML = domref.innerHTML;\n                    const hasSpan = innerHTML.lastIndexOf(\"&lt;/span&gt;\") > 0;\n                    if (suggestion.uiSuggestionType === SuggestionType.Search && hasSpan) {\n                        // recent suggestions can be entered by the user. Thus he could also enter \"<b>bold</b>\" as search term\n                        // and the boldTagUnescaper would then render the search term as bold html.\n                        // TODO: call boldTagUnescaper for everything which is not in the <span>\n                        const userEntered = innerHTML.slice(\n                            innerHTML.indexOf(\"&lt;span&gt;\") + 12,\n                            innerHTML.lastIndexOf(\"&lt;/span&gt;\")\n                        );\n                        const notUserEntered = innerHTML.slice(innerHTML.lastIndexOf(\"&lt;/span&gt;\") + 13);\n                        const notUserEnteredHTML = SearchHelper.boldTagUnescaperForStrings(notUserEntered);\n                        domref.innerHTML = \"<span>\" + userEntered + \"</span>\" + notUserEnteredHTML;\n                    } else {\n                        SearchHelper.boldTagUnescaper(label.getDomRef() as HTMLElement);\n                    }\n                },\n            },\n            label\n        );\n\n        const items = [icon, label];\n        if (suggestion.filterIcon) {\n            items.push(filterIcon);\n        }\n\n        // combine app, icon and label into cell\n        const cell = new CustomListItem(\"\", {\n            type: ListType.Active,\n            content: new FlexBox(\"\", {\n                items,\n                alignItems: FlexAlignItems.Center,\n            }),\n        });\n        cell.addStyleClass(\"searchSuggestionCustomListItem\");\n\n        cell[\"getText\"] = () => {\n            return typeof suggestion?.filter?.searchTerm === \"string\"\n                ? suggestion.filter.searchTerm\n                : this.getValue();\n        };\n        const listItem = new ColumnListItem(\"\", {\n            cells: [cell],\n            type: ListType.Active,\n        });\n        cell.addStyleClass(\"searchSuggestionColumnListItem\");\n\n        if (suggestion.uiSuggestionType === SuggestionType.App) {\n            if (suggestion.title && suggestion.title.indexOf(\"combinedAppSuggestion\") >= 0) {\n                listItem.addStyleClass(\"searchCombinedAppSuggestion\");\n            } else {\n                listItem.addStyleClass(\"searchAppSuggestion\");\n            }\n        }\n        if (suggestion.uiSuggestionType === SuggestionType.DataSource) {\n            listItem.addStyleClass(\"searchDataSourceSuggestion\");\n        }\n        if (suggestion.uiSuggestionType === SuggestionType.SearchTermData) {\n            listItem.addStyleClass(\"searchBOSuggestion\");\n        }\n        if (suggestion.uiSuggestionType === SuggestionType.SearchTermAI) {\n            listItem.addStyleClass(\"searchAISuggestion\");\n        }\n        if (suggestion.uiSuggestionType === SuggestionType.SearchTermHistory) {\n            listItem.addStyleClass(\"searchHistorySuggestion\");\n        }\n        if (suggestion.uiSuggestionType === SuggestionType.Search) {\n            listItem.addStyleClass(\"searchRecentSuggestion\");\n        }\n        listItem.addStyleClass(\"searchSuggestion\");\n\n        return listItem;\n    }\n\n    navigateToSearchApp(): void {\n        const oSearchModel = this.getModel() as SearchModel;\n        if (SearchHelper.isSearchAppActive() || !oSearchModel.config.isUshell) {\n            // app running -> just fire query\n            oSearchModel.fireSearchQuery();\n        } else {\n            // app not running -> start via hash\n            // change hash:\n            // - do not use Searchhelper.hasher here\n            // - this is starting the search app from outside\n            oSearchModel.resetSearchResultItemMemory();\n            const sHash = oSearchModel.createSearchNavigationTargetCurrentState({\n                updateUrl: true,\n            }).targetUrl;\n            window.location.hash = sHash;\n        }\n    }\n\n    onAfterRendering(oEvent): void {\n        super.onAfterRendering(oEvent);\n\n        const domRef = this.getDomRef();\n        if (!domRef) return;\n\n        const input = domRef.querySelector(\"input\");\n        if (!input) return;\n\n        // Set input attributes\n        input.setAttribute(\"autocomplete\", \"off\");\n        input.setAttribute(\"autocorrect\", \"off\");\n        // Additional hacks to show the \"search\" button on iOS keyboards:\n        input.setAttribute(\"type\", \"search\");\n        input.setAttribute(\"name\", \"search\");\n\n        // Create form element\n        const form = document.createElement(\"form\");\n        form.style.setProperty(\"width\", \"100%\");\n        form.setAttribute(\"action\", \"\");\n        form.addEventListener(\"submit\", (e) => {\n            e.preventDefault();\n            return false;\n        });\n\n        // Get parent of input\n        const inputParent = input.parentElement;\n        if (!inputParent) return;\n\n        // Append form to parent and move input into form\n        inputParent.appendChild(form);\n        form.appendChild(input);\n\n        // set ARIA attributes on the input\n        input.setAttribute(\"role\", \"combobox\");\n        input.setAttribute(\"aria-autocomplete\", \"list\");\n        input.setAttribute(\"aria-expanded\", \"false\");\n        input.setAttribute(\"aria-controls\", this.getId() + \"-popup\");\n        input.setAttribute(\"aria-label\", i18n.getText(\"search\"));\n    }\n\n    onValueRevertedByEscape(): void {\n        // this method is called if ESC was pressed and\n        // the value in it was not empty\n        if (SearchHelper.isSearchAppActive()) {\n            // dont delete the value if search app is active\n            return;\n        }\n        this.setValue(\" \"); // add space as a marker for following ESC handler\n    }\n\n    onsapescape(oEvent: JQuery.Event): void {\n        // keep type 'JQuery.Event' here, because of sap.m.Input, function 'onsapescape'\n\n        // set aria-expanded to false on the input element\n        const domRef = this.getDomRef();\n        if (domRef) {\n            const input = domRef.querySelector(\"input\");\n            if (input) {\n                input.setAttribute(\"aria-expanded\", \"false\");\n            }\n        }\n        super.onsapescape(oEvent);\n    }\n\n    static renderer = {\n        apiVersion: 2,\n    };\n}\n"],"mappings":"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","ignoreList":[]}