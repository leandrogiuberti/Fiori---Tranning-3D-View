{"version":3,"file":"SearchSelectQuickSelectDataSource-dbg.js","names":["sap","ui","define","Select","Item","Element","SearchSelectQuickSelectDataSource","extend","renderer","apiVersion","constructor","_constructor","sId","options","Select.prototype.constructor.call","attachChange","event","itemControl","getParameter","item","getBindingContext","getObject","handleSelectDataSource","bindItems","path","template","key","text","bindProperty","parts","formatter","optimizeForValueHelp","addStyleClass","qds","qdsLength","count","length","_handleSelectDataSource","dataSource","oModel","getModel","config","bResetSearchTermOnQuickSelectDataSourceItemPress","setSearchBoxTerm","adjustFilters","setDataSource","searchButtonElements","window","document","querySelectorAll","forEach","searchButton","id","getId","replace","searchButtonUi5","getElementById"],"sources":["SearchSelectQuickSelectDataSource.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport Select, { $SelectSettings } from \"sap/m/Select\";\nimport Item from \"sap/ui/core/Item\";\nimport SearchModel from \"sap/esh/search/ui/SearchModel\";\nimport { DataSource } from \"../../sinaNexTS/sina/DataSource\";\nimport Element from \"sap/ui/core/Element\";\n\n/**\n * @namespace sap.esh.search.ui.controls\n */\nexport default class SearchSelectQuickSelectDataSource extends Select {\n    constructor(sId?: string, options?: Partial<$SelectSettings>) {\n        super(sId, options);\n\n        this.attachChange((event) => {\n            const itemControl = event.getParameter(\"selectedItem\");\n            const item = itemControl.getBindingContext().getObject() as DataSource;\n            this.handleSelectDataSource(item);\n        });\n        this.bindItems({\n            path: \"/config/quickSelectDataSources\",\n            template: new Item(\"\", {\n                key: \"{id}\",\n                text: \"{labelPlural}\",\n            }),\n        });\n\n        this.bindProperty(\"maxWidth\", {\n            parts: [{ path: \"/config/optimizeForValueHelp\" }],\n\n            formatter: (optimizeForValueHelp) => {\n                if (optimizeForValueHelp) {\n                    this.addStyleClass(\"sapElisaSearchSelectQuickSelectDataSourceValueHelp\");\n                }\n                return \"100%\";\n            },\n        });\n\n        this.bindProperty(\"visible\", {\n            parts: [\n                { path: \"/config/optimizeForValueHelp\" },\n                { path: \"/config/quickSelectDataSources\" },\n                { path: \"/config/quickSelectDataSources/length\" },\n                { path: \"/count\" },\n            ],\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            formatter: (optimizeForValueHelp, qds, qdsLength, count) => {\n                if (optimizeForValueHelp) {\n                    // cannot be done in constructor (searchModel n.a.), control has no custom renderer -> thus put it here\n                    this.addStyleClass(\"sapElisaSearchSelectQuickSelectDataSourceValueHelp\");\n                }\n                return qds?.length > 0;\n            },\n        });\n    }\n\n    handleSelectDataSource(dataSource: DataSource): void {\n        const oModel = this.getModel() as SearchModel;\n        // reset search term (even if selected item gets pressed again)\n        if (oModel.config.bResetSearchTermOnQuickSelectDataSourceItemPress) {\n            oModel.setSearchBoxTerm(\"\", false);\n        }\n        // when filter is changed (here data source), give a callback to adjust the conditions\n        if (typeof oModel.config.adjustFilters === \"function\") {\n            oModel.config.adjustFilters(oModel);\n        }\n        oModel.setDataSource(dataSource, false); // true does not trigger search (example: DSP entity list) ?!?\n        const searchButtonElements = window.document.querySelectorAll(\n            '[id$=\"-searchInputHelpPageSearchFieldGroup-button\"]'\n        );\n        searchButtonElements.forEach((searchButton) => {\n            if (\n                searchButton.id ===\n                this.getId().replace(\n                    \"-searchInputHelpPageSearchFieldGroup-selectQsDs\",\n                    \"-searchInputHelpPageSearchFieldGroup-button\"\n                )\n            ) {\n                const searchButtonUi5 = Element.getElementById(searchButton.id);\n                searchButtonUi5[\"firePress\"](); // ToDo - workaround, see above\n            }\n        });\n    }\n\n    static renderer = {\n        apiVersion: 2,\n    };\n}\n"],"mappings":"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","ignoreList":[]}