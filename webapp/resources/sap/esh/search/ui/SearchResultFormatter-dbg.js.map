{"version":3,"file":"SearchResultFormatter-dbg.js","names":["sap","ui","define","__SearchResultBaseFormatter","___sinaNexTS_sina_SearchResultSetItemAttribute","___sinaNexTS_sina_NavigationTarget","_interopRequireDefault","obj","__esModule","default","SearchResultBaseFormatter","SearchResultSetItemAttribute","NavigationTarget","SearchResultFormatter","constructor","model","format","searchResultSet","terms","options","suppressHighlightedValues","sina","layoutCache","formattedResultItems","resultItems","items","i","length","resultItem","formattedResultItem","aItemAttributes","z","detailAttributes","detailAttribute","attributeValue","defaultNavigationTarget","undefined","value","metadata","type","AttributeType","ImageBlob","trim","ImageUrl","imageUrl","imageFormat","toLowerCase","imageNavigation","GeoJson","geoJson","label","Group","attributeGroupAsAttribute","_formatAttributeGroup","push","Double","Integer","String","Date","Time","Timestamp","oItemAttribute","_formatSingleAttribute","key","keystatus","dataSource","dataSourceName","attributesMap","sinaItem","itemHierarchyNodePaths","hierarchyNodePaths","Array","isArray","hierarchyNodePath","titleAttributes","titleAttribute","formattedTitleAttribute","formattedTitle","title","isTitleHighlighted","whyfound","titleIconUrl","infoIconUrl","titleInfoIconUrl","tooltip","titleInfoIconTooltip","join","titleHighlighted","titleDescriptionAttributes","titleDescriptionAttribute","formattedTitleDescriptionAttribute","formattedTitleDescription","titleDescription","titleDescriptionLabel","isTitleDescriptionHighlighted","name","itemattributes","titleNavigation","text","navigationTargets","navigationObjects","j","navTarget","layoutCacheForItemType","id","customItemStyleClass","selected","selectionEnabled","expanded","additionalParameters","_formatResultForDocuments","_formatResultForNotes","positionInList","resultSetId","attributeGroup","attributes","attribute","startsWith","formattedAttr","iconUrl","sinaAttribute","isTitle","isSortable","displayOrder","usage","Detail","isHighlighted","isLongtext","privateGroupMetadata","_private","parentAttribute","childAttribute","attributeGroupMembership","_attribute","attributeNameInGroup","nameInGroup","_formattedAttribute","longtext","valueRaw","valueWithoutWhyfound","Object","keys","regularFormatting","isUnitOfMeasure","isCurrency","isDescription","parentAttributeValue","childAttributeValue","textArrangement","AttributeGroupTextArrangement","TextFirst","TextLast","TextOnly","_formatBasedOnGroupTemplate","template","valueFormatted","valueHighlighted","AttributeFormatType","MultilineText","LongText","valuePropertyName","regex","pos","match","exec","substring","index","attributeName","slice","lastIndex","keyFields","isDocumentConnector","isKey","sidClient","system","client","connectorName","titleUrl","suvlink","encodeURIComponent","navOptions","targetUrl","target","navigationTarget","sinaNext","createNavigationTarget","containsThumbnail","containsSuvFile"],"sources":["SearchResultFormatter.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport SearchModel from \"sap/esh/search/ui/SearchModel\";\nimport SearchResultBaseFormatter from \"./SearchResultBaseFormatter\";\nimport { DataSource } from \"./sinaNexTS/sina/DataSource\";\nimport { SearchResultSet } from \"./sinaNexTS/sina/SearchResultSet\";\nimport { SearchResultSetItem } from \"./sinaNexTS/sina/SearchResultSetItem\";\nimport { SearchResultSetItemAttribute } from \"./sinaNexTS/sina/SearchResultSetItemAttribute\";\nimport { HierarchyNodePath } from \"./sinaNexTS/sina/HierarchyNodePath\";\nimport { NavigationTarget, NavigationTargetOptions } from \"./sinaNexTS/sina/NavigationTarget\";\n\nexport interface FormattedResultItem {\n    key?: string;\n    keystatus?: string;\n    dataSource?: DataSource;\n    dataSourceName?: string;\n    attributesMap?: any;\n    sinaItem?: SearchResultSetItem;\n    titleIconUrl?: string;\n    imageUrl?: string;\n    imageFormat?: string;\n    imageNavigation?: NavigationTarget;\n    geoJson?: { value: string; label: string };\n    title?: string;\n    titleHighlighted?: string;\n    isTitleHighlighted?: boolean;\n    titleInfoIconUrl?: string;\n    titleInfoIconTooltip?: string;\n    titleDescription?: string;\n    titleDescriptionLabel?: string;\n    isTitleDescriptionHighlighted?: boolean;\n    titleNavigation?: NavigationTarget;\n    itemattributes?: Array<FormattedResultItemAttribute>;\n    navigationObjects?: Array<NavigationTarget>;\n    layoutCache?: any;\n    additionalParameters?: FormattedResultItemAdditionalParameters;\n    selected?: boolean;\n    selectionEnabled?: boolean;\n    customItemStyleClass?: string;\n    expanded?: boolean;\n    positionInList?: number;\n    resultSetId?: string;\n    cells?: Array<any>;\n    hierarchyNodePath?: HierarchyNodePath;\n}\n\nexport interface FormattedResultItemAdditionalParameters {\n    isDocumentConnector?: boolean;\n    imageUrl?: string;\n    titleUrl?: string;\n    suvlink?: string;\n    containsThumbnail?: boolean;\n    containsSuvFile?: boolean;\n}\nexport interface FormattedResultItemAttribute {\n    name?: string;\n    valueRaw?: any;\n    sinaAttribute?: SearchResultSetItemAttribute; // used for spread sheet export\n    value?: any;\n    valueWithoutWhyfound?: string;\n    key?: string;\n    isTitle?: boolean; // used in table view\n    isSortable?: boolean; // used in sort dialog\n    displayOrder?: number;\n    whyfound?: boolean; // legacy naming, attribute is Highlighted, with <b> tag\n    defaultNavigationTarget?: NavigationTarget;\n    hidden?: boolean;\n    longtext?: string;\n    // attribute group\n    iconUrl?: string;\n    subAttributes?: Array<string>; // prepare for excel exporting: child columns for group attribute\n    tooltip?: string;\n}\n\nexport default class SearchResultFormatter extends SearchResultBaseFormatter {\n    constructor(model: SearchModel) {\n        super(model);\n        this.model = model;\n    }\n\n    format(searchResultSet: SearchResultSet, terms?: any, options?: any): Array<FormattedResultItem> {\n        options = options || {};\n        options.suppressHighlightedValues = options.suppressHighlightedValues || false;\n\n        const sina = searchResultSet.sina;\n        const layoutCache = {};\n        const formattedResultItems: Array<FormattedResultItem> = [];\n        const resultItems = searchResultSet.items;\n\n        for (let i = 0; i < resultItems.length; i++) {\n            const resultItem = resultItems[i];\n\n            const formattedResultItem: FormattedResultItem = {};\n            const aItemAttributes: FormattedResultItemAttribute[] = [];\n\n            for (let z = 0; z < resultItem.detailAttributes.length; z++) {\n                const detailAttribute = resultItem.detailAttributes[z];\n                let attributeValue = \"\";\n                let format = \"\";\n                let defaultNavigationTarget: NavigationTarget = undefined;\n                if (detailAttribute instanceof SearchResultSetItemAttribute) {\n                    attributeValue = detailAttribute.value;\n                    format = detailAttribute.metadata.format;\n                    defaultNavigationTarget = detailAttribute.defaultNavigationTarget;\n                }\n\n                switch (detailAttribute.metadata.type) {\n                    case sina.AttributeType.ImageBlob:\n                        if (attributeValue && attributeValue.trim().length > 0) {\n                            attributeValue = \"data:;base64,\" + attributeValue;\n                        }\n                        break;\n                    case sina.AttributeType.ImageUrl:\n                        formattedResultItem.imageUrl = attributeValue;\n                        formattedResultItem.imageFormat = format ? format.toLowerCase() : undefined;\n                        if (defaultNavigationTarget) {\n                            formattedResultItem.imageNavigation = defaultNavigationTarget;\n                        }\n                        break;\n                    case sina.AttributeType.GeoJson:\n                        formattedResultItem.geoJson = {\n                            value: attributeValue,\n                            label: /* resultItem.title || */ detailAttribute.label, // ToDo\n                        };\n                        break;\n                    case sina.AttributeType.Group: {\n                        const attributeGroupAsAttribute = this._formatAttributeGroup(\n                            detailAttribute,\n                            options\n                        );\n                        aItemAttributes.push(attributeGroupAsAttribute);\n                        break;\n                    }\n                    case sina.AttributeType.Double:\n                    case sina.AttributeType.Integer:\n                    case sina.AttributeType.String:\n                    case sina.AttributeType.Date:\n                    case sina.AttributeType.Time:\n                    case sina.AttributeType.Timestamp: {\n                        const oItemAttribute: FormattedResultItemAttribute = this._formatSingleAttribute(\n                            detailAttribute,\n                            options\n                        );\n                        aItemAttributes.push(oItemAttribute);\n                        break;\n                    }\n                }\n                // }\n            }\n\n            formattedResultItem.key = (resultItem as any).key; // ToDo, key, keystatus n.a.\n            formattedResultItem.keystatus = (resultItem as any).keystatus;\n\n            formattedResultItem.dataSource = resultItem.dataSource;\n            formattedResultItem.dataSourceName = resultItem.dataSource.label;\n\n            formattedResultItem.attributesMap = resultItem.attributesMap;\n            formattedResultItem.sinaItem = resultItem;\n\n            const itemHierarchyNodePaths = resultItem.hierarchyNodePaths;\n            if (Array.isArray(itemHierarchyNodePaths) === true && itemHierarchyNodePaths.length > 0) {\n                // Take the first NodePath even in multiple case\n                formattedResultItem.hierarchyNodePath = itemHierarchyNodePaths[0];\n            }\n\n            if (resultItem.titleAttributes) {\n                let titleAttribute, formattedTitleAttribute: FormattedResultItemAttribute, formattedTitle;\n                const title = [];\n                let isTitleHighlighted = false;\n                for (let z = 0; z < resultItem.titleAttributes.length; z++) {\n                    titleAttribute = resultItem.titleAttributes[z];\n                    if (titleAttribute.metadata.type === sina.AttributeType.Group) {\n                        formattedTitleAttribute = this._formatAttributeGroup(titleAttribute, options);\n                        isTitleHighlighted = isTitleHighlighted || formattedTitleAttribute.whyfound;\n                    } else if (titleAttribute.metadata.type === sina.AttributeType.ImageUrl) {\n                        formattedTitleAttribute = this._formatSingleAttribute(titleAttribute, options);\n                        formattedResultItem.titleIconUrl = titleAttribute.value;\n                        formattedTitleAttribute.value = \"\";\n                        isTitleHighlighted = isTitleHighlighted || false;\n                    } else {\n                        formattedTitleAttribute = this._formatSingleAttribute(titleAttribute, options);\n                        isTitleHighlighted = isTitleHighlighted || formattedTitleAttribute.whyfound;\n                    }\n                    if (titleAttribute.infoIconUrl) {\n                        formattedResultItem.titleInfoIconUrl = titleAttribute.infoIconUrl;\n                        if (titleAttribute.tooltip) {\n                            formattedResultItem.titleInfoIconTooltip = titleAttribute.tooltip;\n                        }\n                        formattedTitleAttribute.value = \"\";\n                        isTitleHighlighted = isTitleHighlighted || false;\n                    }\n                    formattedTitle = formattedTitleAttribute.value;\n                    title.push(formattedTitle);\n                }\n                formattedResultItem.title = title.join(\" \");\n                formattedResultItem.isTitleHighlighted = isTitleHighlighted;\n            } else {\n                formattedResultItem.title = options.suppressHighlightedValues\n                    ? (resultItem as any).title // ToDo\n                    : (resultItem as any).titleHighlighted; // ToDo\n                formattedResultItem.isTitleHighlighted = options.suppressHighlightedValues\n                    ? false // ToDo\n                    : true; // ToDo\n            }\n\n            if (resultItem.titleDescriptionAttributes && resultItem.titleDescriptionAttributes.length > 0) {\n                let titleDescriptionAttribute,\n                    formattedTitleDescriptionAttribute: FormattedResultItemAttribute,\n                    formattedTitleDescription;\n                const titleDescription = [];\n                const titleDescriptionLabel = [];\n                let isTitleDescriptionHighlighted = false;\n                for (let z = 0; z < resultItem.titleDescriptionAttributes.length; z++) {\n                    titleDescriptionAttribute = resultItem.titleDescriptionAttributes[z];\n                    if (titleDescriptionAttribute.metadata.type === sina.AttributeType.Group) {\n                        formattedTitleDescriptionAttribute = this._formatAttributeGroup(\n                            titleDescriptionAttribute,\n                            options\n                        );\n                        isTitleDescriptionHighlighted =\n                            isTitleDescriptionHighlighted || formattedTitleDescriptionAttribute.whyfound;\n                    } else {\n                        formattedTitleDescriptionAttribute = this._formatSingleAttribute(\n                            titleDescriptionAttribute,\n                            options\n                        );\n                        isTitleDescriptionHighlighted =\n                            isTitleDescriptionHighlighted || formattedTitleDescriptionAttribute.whyfound;\n                    }\n                    formattedTitleDescription = formattedTitleDescriptionAttribute.value;\n                    titleDescription.push(formattedTitleDescription);\n                    titleDescriptionLabel.push(formattedTitleDescriptionAttribute.name);\n                }\n                formattedResultItem.titleDescription = titleDescription.join(\" \");\n                formattedResultItem.titleDescriptionLabel = titleDescriptionLabel.join(\" \");\n                formattedResultItem.isTitleDescriptionHighlighted = isTitleDescriptionHighlighted;\n            }\n\n            formattedResultItem.itemattributes = aItemAttributes;\n\n            if (resultItem.defaultNavigationTarget) {\n                formattedResultItem.titleNavigation = resultItem.defaultNavigationTarget;\n                if (!formattedResultItem.title || formattedResultItem.title.length === 0) {\n                    formattedResultItem.title = resultItem.defaultNavigationTarget.text;\n                }\n            }\n\n            if (resultItem.navigationTargets && resultItem.navigationTargets.length > 0) {\n                formattedResultItem.navigationObjects = [];\n                for (let j = 0; j < resultItem.navigationTargets.length; j++) {\n                    const navTarget = resultItem.navigationTargets[j];\n                    formattedResultItem.navigationObjects.push(navTarget);\n                }\n            }\n\n            const layoutCacheForItemType = layoutCache[resultItem.dataSource.id] || {};\n            layoutCache[resultItem.dataSource.id] = layoutCacheForItemType;\n            formattedResultItem.layoutCache = layoutCacheForItemType;\n\n            formattedResultItem.customItemStyleClass = \"\";\n            formattedResultItem.selected = false;\n            formattedResultItem.selectionEnabled = true;\n            formattedResultItem.expanded = false;\n\n            const additionalParameters: FormattedResultItemAdditionalParameters = {};\n            this._formatResultForDocuments(resultItem, additionalParameters);\n            this._formatResultForNotes(resultItem, additionalParameters);\n            formattedResultItem.additionalParameters = additionalParameters;\n\n            formattedResultItem.positionInList = i;\n            formattedResultItem.resultSetId = searchResultSet.id;\n\n            formattedResultItems.push(formattedResultItem);\n        }\n\n        return formattedResultItems;\n    }\n\n    private _formatAttributeGroup(attributeGroup, options): FormattedResultItemAttribute {\n        // workaround for attribute icons which have been set via @ObjectModel.text.element\n        // TODO: clarify which attribute is the text to be shown and which contains the icon URL\n        if (\n            attributeGroup.attributes.length === 2 &&\n            typeof attributeGroup.attributes[1].attribute.value === \"string\" &&\n            attributeGroup.attributes[1].attribute.value.startsWith(\"sap-icon://\")\n        ) {\n            const formattedAttr = this._formatSingleAttribute(\n                attributeGroup.attributes[0].attribute,\n                options\n            );\n            formattedAttr.iconUrl = attributeGroup.attributes[1].attribute.value;\n            formattedAttr.key = attributeGroup.id;\n            formattedAttr.sinaAttribute = attributeGroup; // used for spread sheet export\n            formattedAttr.isTitle = false; // used in table view\n            formattedAttr.isSortable = attributeGroup.metadata.isSortable; // used in sort dialog\n            formattedAttr.displayOrder =\n                attributeGroup.metadata.usage.Detail && attributeGroup.metadata.usage.Detail.displayOrder;\n\n            // if (isLongtext) {\n            //     formattedAttr.longtext = attributeGroupAsAttribute.value;\n            // }\n            return formattedAttr;\n        }\n\n        const attributeGroupAsAttribute: FormattedResultItemAttribute = {};\n        const attributes = {};\n        attributeGroupAsAttribute.name = attributeGroup.label;\n        let isHighlighted = false;\n        let isLongtext = false;\n\n        const privateGroupMetadata = attributeGroup.metadata._private;\n        let parentAttribute, childAttribute;\n\n        for (let i = 0; i < attributeGroup.attributes.length; i++) {\n            const attributeGroupMembership = attributeGroup.attributes[i];\n            const _attribute = attributeGroupMembership.attribute;\n            const attributeNameInGroup = attributeGroupMembership.metadata.nameInGroup;\n\n            let _formattedAttribute: FormattedResultItemAttribute;\n            if (_attribute.metadata.type === _attribute.sina.AttributeType.Group) {\n                _formattedAttribute = this._formatAttributeGroup(_attribute, options);\n            } else {\n                _formattedAttribute = this._formatSingleAttribute(_attribute, options);\n            }\n\n            if (privateGroupMetadata) {\n                if (privateGroupMetadata.parentAttribute === _attribute.metadata) {\n                    parentAttribute = _formattedAttribute;\n                } else if (privateGroupMetadata.childAttribute === _attribute.metadata) {\n                    childAttribute = _formattedAttribute;\n                }\n            }\n\n            if (_formattedAttribute.value) {\n                attributes[attributeNameInGroup] = _formattedAttribute;\n                isHighlighted = isHighlighted || _formattedAttribute.whyfound;\n                isLongtext = isLongtext || _formattedAttribute.longtext !== undefined;\n            }\n        }\n\n        attributeGroupAsAttribute.value = \"\";\n        attributeGroupAsAttribute.valueRaw = undefined;\n        attributeGroupAsAttribute.valueWithoutWhyfound = \"\";\n        attributeGroupAsAttribute.whyfound = false;\n\n        if (Object.keys(attributes).length > 0) {\n            let regularFormatting = true;\n\n            if (\n                privateGroupMetadata &&\n                parentAttribute &&\n                childAttribute &&\n                (privateGroupMetadata.isUnitOfMeasure ||\n                    privateGroupMetadata.isCurrency ||\n                    privateGroupMetadata.isDescription)\n            ) {\n                let parentAttributeValue = parentAttribute.value;\n                let childAttributeValue = childAttribute.value;\n\n                if (typeof parentAttributeValue === \"string\" && parentAttributeValue.trim().length < 1) {\n                    parentAttributeValue = undefined;\n                }\n                if (typeof childAttributeValue === \"string\" && childAttributeValue.trim().length < 1) {\n                    childAttributeValue = undefined;\n                }\n\n                if (!(parentAttributeValue && childAttributeValue)) {\n                    if (privateGroupMetadata.isUnitOfMeasure || privateGroupMetadata.isCurrency) {\n                        if (parentAttributeValue && !childAttributeValue) {\n                            attributeGroupAsAttribute.value = parentAttribute.value;\n                            attributeGroupAsAttribute.valueRaw = parentAttribute.valueRaw;\n                            attributeGroupAsAttribute.valueWithoutWhyfound =\n                                parentAttribute.valueWithoutWhyfound;\n                            regularFormatting = false;\n                        }\n                    } else if (privateGroupMetadata.isDescription) {\n                        const textArrangement = privateGroupMetadata.textArrangement;\n                        const sina = attributeGroup.sina;\n\n                        if (textArrangement === sina.AttributeGroupTextArrangement.TextFirst) {\n                            if (!parentAttributeValue && childAttributeValue) {\n                                attributeGroupAsAttribute.value = childAttribute.value;\n                                attributeGroupAsAttribute.valueRaw = childAttribute.valueRaw;\n                                attributeGroupAsAttribute.valueWithoutWhyfound =\n                                    childAttribute.valueWithoutWhyfound;\n                                regularFormatting = false;\n                            }\n                        } else if (textArrangement === sina.AttributeGroupTextArrangement.TextLast) {\n                            if (parentAttributeValue && !childAttributeValue) {\n                                attributeGroupAsAttribute.value = parentAttribute.value;\n                                attributeGroupAsAttribute.valueRaw = parentAttribute.valueRaw;\n                                attributeGroupAsAttribute.valueWithoutWhyfound =\n                                    parentAttribute.valueWithoutWhyfound;\n                                regularFormatting = false;\n                            }\n                        } else if (textArrangement === sina.AttributeGroupTextArrangement.TextOnly) {\n                            if (!childAttributeValue) {\n                                regularFormatting = false;\n                            }\n                        }\n                    }\n                }\n            }\n\n            if (regularFormatting) {\n                attributeGroupAsAttribute.value = this._formatBasedOnGroupTemplate(\n                    attributeGroup.template,\n                    attributes,\n                    \"value\"\n                );\n                attributeGroupAsAttribute.valueRaw = this._formatBasedOnGroupTemplate(\n                    attributeGroup.template,\n                    attributes,\n                    \"valueRaw\"\n                );\n                attributeGroupAsAttribute.valueWithoutWhyfound = this._formatBasedOnGroupTemplate(\n                    attributeGroup.template,\n                    attributes,\n                    \"valueWithoutWhyfound\"\n                );\n            }\n\n            attributeGroupAsAttribute.whyfound = isHighlighted;\n        }\n\n        attributeGroupAsAttribute.key = attributeGroup.id;\n        attributeGroupAsAttribute.sinaAttribute = attributeGroup; // used for spread sheet export\n        attributeGroupAsAttribute.isTitle = false; // used in table view\n        attributeGroupAsAttribute.isSortable = attributeGroup.metadata.isSortable; // used in sort dialog\n        attributeGroupAsAttribute.displayOrder =\n            attributeGroup.metadata.usage.Detail && attributeGroup.metadata.usage.Detail.displayOrder;\n\n        if (isLongtext) {\n            attributeGroupAsAttribute.longtext = attributeGroupAsAttribute.value;\n        }\n\n        if (!(attributeGroupAsAttribute.defaultNavigationTarget instanceof NavigationTarget)) {\n            if (parentAttribute?.defaultNavigationTarget instanceof NavigationTarget) {\n                attributeGroupAsAttribute.defaultNavigationTarget = parentAttribute.defaultNavigationTarget;\n            } else if (childAttribute?.defaultNavigationTarget instanceof NavigationTarget) {\n                attributeGroupAsAttribute.defaultNavigationTarget = childAttribute.defaultNavigationTarget;\n            }\n        }\n\n        if (parentAttribute?.tooltip) {\n            attributeGroupAsAttribute.tooltip = parentAttribute.tooltip;\n        } else if (childAttribute?.tooltip) {\n            attributeGroupAsAttribute.tooltip = childAttribute.tooltip;\n        }\n\n        if (!attributeGroupAsAttribute.iconUrl) {\n            if (parentAttribute?.iconUrl) {\n                attributeGroupAsAttribute.iconUrl = parentAttribute.iconUrl;\n            } else if (childAttribute?.iconUrl) {\n                attributeGroupAsAttribute.iconUrl = childAttribute.iconUrl;\n            }\n        }\n        return attributeGroupAsAttribute;\n    }\n\n    private _formatSingleAttribute(detailAttribute, options): FormattedResultItemAttribute {\n        const oItemAttribute: FormattedResultItemAttribute = {};\n        const sina = detailAttribute.sina;\n\n        oItemAttribute.name = detailAttribute.label;\n        oItemAttribute.valueRaw = detailAttribute.value;\n        oItemAttribute.value = options.suppressHighlightedValues\n            ? detailAttribute.valueFormatted\n            : detailAttribute.valueHighlighted;\n        oItemAttribute.valueWithoutWhyfound = detailAttribute.valueFormatted; //result[propDisplay].valueWithoutWhyfound;\n\n        // if (detailAttribute.isHighlighted && detailAttribute.metadata.type.toLowerCase() === \"longtext\") {\n        //     // mix snippet into longtext values\n        //     var valueHighlighted = detailAttribute.valueHighlighted;\n        //     valueHighlighted = valueHighlighted.replace(/(^[.][.][.])|([.][.][.]$)/, \"\").trim();\n        //     var valueUnHighlighted = valueHighlighted.replace(/[<]([/])?b[>]/g, \"\");\n        //     oItemAttribute.value = detailAttribute.valueFormatted.replace(valueUnHighlighted, valueHighlighted);\n        // }\n\n        oItemAttribute.key = detailAttribute.id;\n        oItemAttribute.sinaAttribute = detailAttribute; // used for spread sheet export\n        oItemAttribute.isTitle = false; // used in table view\n        oItemAttribute.isSortable = detailAttribute.metadata.isSortable; // used in sort dialog\n        oItemAttribute.displayOrder =\n            detailAttribute.metadata.usage.Detail && detailAttribute.metadata.usage.Detail.displayOrder;\n        oItemAttribute.whyfound = detailAttribute.isHighlighted;\n        if (detailAttribute.defaultNavigationTarget instanceof NavigationTarget) {\n            oItemAttribute.defaultNavigationTarget = detailAttribute.defaultNavigationTarget;\n        }\n\n        if (typeof detailAttribute.tooltip === \"string\" && detailAttribute.tooltip.length > 0) {\n            oItemAttribute.tooltip = detailAttribute.tooltip;\n        }\n        if (\n            typeof detailAttribute.iconUrl === \"string\" &&\n            detailAttribute.iconUrl.length > 0 &&\n            detailAttribute.iconUrl.startsWith(\"sap-icon://\")\n        ) {\n            oItemAttribute.iconUrl = detailAttribute.iconUrl;\n        }\n\n        if (\n            detailAttribute.metadata.format &&\n            (detailAttribute.metadata.format === sina.AttributeFormatType.MultilineText ||\n                detailAttribute.metadata.format === sina.AttributeFormatType.LongText)\n        ) {\n            oItemAttribute.longtext = detailAttribute.valueHighlighted;\n        }\n\n        return oItemAttribute;\n    }\n\n    private _formatBasedOnGroupTemplate(template: string, attributes, valuePropertyName: string): string {\n        if (!(template && attributes && valuePropertyName)) {\n            return \"\";\n        }\n        const regex = /{\\w+}/gi;\n        let value = \"\";\n        let pos = 0;\n        let match;\n        while ((match = regex.exec(template)) !== null) {\n            value += template.substring(pos, match.index);\n            const attributeName = match[0].slice(1, -1);\n            value += (attributes[attributeName] && attributes[attributeName][valuePropertyName]) || \"\";\n            pos = regex.lastIndex;\n        }\n        value += template.substring(pos);\n        return value;\n    }\n\n    private _formatResultForDocuments(\n        resultItem,\n        additionalParameters: FormattedResultItemAdditionalParameters\n    ): void {\n        let keyFields = \"\";\n        additionalParameters.isDocumentConnector = false;\n\n        let detailAttribute;\n        for (let j = 0; j < resultItem.detailAttributes.length; j++) {\n            detailAttribute = resultItem.detailAttributes[j];\n\n            if (detailAttribute.metadata.id === \"FILE_PROPERTY\") {\n                additionalParameters.isDocumentConnector = true;\n            }\n\n            if (detailAttribute.metadata.isKey === true) {\n                if (keyFields.length > 0) {\n                    keyFields += \";\";\n                }\n                keyFields = keyFields + detailAttribute.metadata.id + \"=\" + detailAttribute.value; // encodeURIComponent(result[prop].valueRaw);\n            }\n        }\n\n        // fileloader\n        if (additionalParameters.isDocumentConnector === true) {\n            const sidClient =\n                \";o=sid(\" + resultItem.dataSource.system + \".\" + resultItem.dataSource.client + \")\";\n            const connectorName = resultItem.dataSource.id;\n            additionalParameters.imageUrl =\n                \"/sap/opu/odata/SAP/ESH_SEARCH_SRV\" +\n                sidClient +\n                \"/FileLoaderFiles(ConnectorId='\" +\n                connectorName +\n                \"',FileType='ThumbNail',SelectionParameters='\" +\n                keyFields +\n                \"')/$value\";\n            additionalParameters.titleUrl =\n                \"/sap/opu/odata/SAP/ESH_SEARCH_SRV\" +\n                sidClient +\n                \"/FileLoaderFiles(ConnectorId='\" +\n                connectorName +\n                \"',FileType='BinaryContent',SelectionParameters='\" +\n                keyFields +\n                \"')/$value\";\n            const suvlink =\n                \"/sap/opu/odata/SAP/ESH_SEARCH_SRV\" +\n                sidClient +\n                \"/FileLoaderFiles(ConnectorId='\" +\n                connectorName +\n                \"',FileType='SUVFile',SelectionParameters='\" +\n                keyFields +\n                \"')/$value\";\n            additionalParameters.suvlink =\n                \"/sap/bc/ui5_ui5/ui2/ushell/resources/sap/fileviewer/viewer/web/viewer.html?file=\" +\n                encodeURIComponent(suvlink);\n\n            if (!resultItem.navigationObjects) {\n                resultItem.navigationObjects = [];\n            }\n            const navOptions: NavigationTargetOptions = {\n                text: \"Show Document\",\n                targetUrl: additionalParameters.suvlink,\n                target: \"_blank\",\n            };\n            const navigationTarget = this.model.sinaNext.createNavigationTarget(navOptions);\n            resultItem.navigationObjects.push(navigationTarget);\n\n            for (let j = 0; j < resultItem.detailAttributes.length; j++) {\n                detailAttribute = resultItem.detailAttributes[j];\n                if (detailAttribute.id === \"PHIO_ID_THUMBNAIL\" && detailAttribute.value) {\n                    additionalParameters.containsThumbnail = true;\n                }\n                if (detailAttribute.id === \"PHIO_ID_SUV\" && detailAttribute.value) {\n                    additionalParameters.containsSuvFile = true;\n                }\n            }\n        }\n    }\n\n    _formatResultForNotes(\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        resultItem: SearchResultSetItem,\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        additionalParameters: FormattedResultItemAdditionalParameters\n    ): void {\n        //\n    }\n}\n"],"mappings":"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","ignoreList":[]}