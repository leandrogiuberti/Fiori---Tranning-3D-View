{"version":3,"file":"ToolbarAssembler-dbg.js","names":["sap","ui","define","IconPool","__i18n","Device","OverflowToolbarLayoutData","sap_m_library","OverflowToolbar","OverflowToolbarButton","__SearchSpreadsheet","___eventlogging_UserEvents","ToolbarSpacer","ToolbarSeparator","__errors","Button","ActionSheet","IconTabBar","IconTabFilter","SegmentedButton","SegmentedButtonItem","BindingMode","ViewSettingsDialog","Element","OverflowToolbarToggleButton","_interopRequireDefault","obj","__esModule","default","i18n","ButtonType","OverflowToolbarPriority","PlacementType","URLHelper","SearchSpreadsheet","UserEventType","errors","ToolbarAssembler","compositeControl","constructor","assembleFilterButton","oModel","getModelInternal","filterBtn","getId","icon","getIconURI","tooltip","parts","path","formatter","facetVisibility","getText","pressed","press","oEvent","searchContainer","setProperty","isVisible","getParameter","setFacetVisibility","eventLogger","logEvent","type","FACETS_SHOW","dataSourceKey","getDataSource","id","FACETS_HIDE","setTimeout","adjustSearchbarCustomGenericButtonWidth","visible","businessObjSearchEnabled","system","phone","config","optimizeForValueHelp","facets","addStyleClass","setLayoutData","priority","NeverOverflow","assembleResultviewSelectionButton","selectionBtn","resultviewSelectionVisibility","setResultviewSelectionVisibility","item","getSearchResultSet","items","setSelected","showSelectionToggleButton","assembleGenericButtonsToolbar","dataExportButton","assembleExportButton","High","assembleResultViewSwitch","sortButton","text","count","sortAttributes","isHomogenousResult","length","orderBy","sortOrder","Emphasized","Transparent","openSortDialog","sortDialog","assembleSearchResultSortDialog","tablePersonalizeButton","undefined","searchResultTablePersonalization","enabled","resultViewType","columns","searchResultTable","tablePersonalizer","openDialog","userEventTableConfigOpen","TABLE_CONFIG_OPEN","toolbarContent","push","bWithShareButton","isUshell","shareButton","assembleShareButton","resultViewSwitch","hasCustomButtons","customToolbar","customToolbarContent","getCustomToolbar","resultViewSwitchVisibility","searchInputLocation","concat","oSearchFieldGroup","err","oError","ConfigurationExitError","applicationComponent","errorHandler","onError","toolbar","content","sortDialogId","oldSortDialog","getElementById","destroy","sortDescending","Object","keys","confirm","paramsSortItem","paramsSortDescending","attributeId","getBindingContext","getObject","setSortDescending","resetOrderBy","setOrderBy","cancel","resetFilters","setSelectedSortItem","addDependent","searchSpreadsheet","onExport","oActionSheet","placement","Bottom","buttons","require","AddBookmarkButton","oBookmarkButton","width","beforePressHandler","oAppData","url","document","URL","title","getDocumentTitle","setAppData","addButton","oEmailButton","triggerEmail","oShareButton","openBy","assembleDataSourceTabBar","dataSourceTabBar","expandable","stretchContentHeight","bussinesObjSearchEnabled","exclusiveDataSource","selectedKey","mode","OneWay","select","searchScopeWithoutAll","setDataSource","data","setAriaTexts","headerLabel","headerDescription","bindAggregation","template","key","dataSource","allDataSource","selectionChange","getKey","setResultViewType","assignDragDropConfig","userEventResultViewSwitch","RESULT_VIEW_SWITCH","factory","context","oButton","setIcon","setTooltip","setKey","setVisible"],"sources":["ToolbarAssembler.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport SearchModel from \"../SearchModel\";\nimport IconPool from \"sap/ui/core/IconPool\";\nimport i18n from \"../i18n\";\nimport Device from \"sap/ui/Device\";\nimport OverflowToolbarLayoutData from \"sap/m/OverflowToolbarLayoutData\";\nimport { ButtonType, OverflowToolbarPriority, PlacementType, URLHelper } from \"sap/m/library\";\nimport SearchCompositeControl from \"../SearchCompositeControl\";\nimport OverflowToolbar from \"sap/m/OverflowToolbar\";\nimport OverflowToolbarButton from \"sap/m/OverflowToolbarButton\";\nimport SearchSpreadsheet from \"../controls/SearchSpreadsheet\";\nimport { ResultViewSwitchEvent, TableConfigOpenEvent, UserEventType } from \"../eventlogging/UserEvents\";\nimport Control from \"sap/ui/core/Control\";\nimport ToolbarSpacer from \"sap/m/ToolbarSpacer\";\nimport ToolbarSeparator from \"sap/m/ToolbarSeparator\";\nimport errors from \"../error/errors\";\nimport Button from \"sap/m/Button\";\nimport ActionSheet from \"sap/m/ActionSheet\";\nimport IconTabBar from \"sap/m/IconTabBar\";\nimport { DataSource } from \"../sinaNexTS/sina/DataSource\";\nimport IconTabFilter from \"sap/m/IconTabFilter\";\nimport SegmentedButton, { SegmentedButton$SelectionChangeEvent } from \"sap/m/SegmentedButton\";\nimport SegmentedButtonItem from \"sap/m/SegmentedButtonItem\";\nimport BindingMode from \"sap/ui/model/BindingMode\";\nimport ViewSettingsDialog, { ViewSettingsDialog$ConfirmEvent } from \"sap/m/ViewSettingsDialog\";\nimport Element from \"sap/ui/core/Element\";\nimport { SortAttribute } from \"../SearchResultBaseFormatter\";\nimport OverflowToolbarToggleButton from \"sap/m/OverflowToolbarToggleButton\";\nimport { ToggleButton$PressEvent } from \"sap/m/ToggleButton\";\n\nexport default class ToolbarAssembler {\n    compositeControl: SearchCompositeControl;\n\n    constructor(compositeControl: SearchCompositeControl) {\n        this.compositeControl = compositeControl;\n    }\n\n    assembleFilterButton(): OverflowToolbarToggleButton {\n        const oModel = this.compositeControl.getModelInternal() as SearchModel;\n        const filterBtn = new OverflowToolbarToggleButton(\n            this.compositeControl.getId() + \"-searchBarFilterButton\",\n            {\n                icon: IconPool.getIconURI(\"filter\"),\n                tooltip: {\n                    parts: [{ path: \"/facetVisibility\" }],\n                    formatter: (facetVisibility: boolean): string => {\n                        return facetVisibility\n                            ? i18n.getText(\"hideFacetBtn_tooltip\")\n                            : i18n.getText(\"showFacetBtn_tooltip\");\n                    },\n                },\n                pressed: { path: \"/facetVisibility\" },\n                press: (oEvent: ToggleButton$PressEvent): void => {\n                    // open/close facet panel\n                    this.compositeControl.searchContainer.setProperty(\"animateFacetTransition\", true);\n                    const isVisible: boolean = oEvent.getParameter(\"pressed\");\n                    oModel.setFacetVisibility(isVisible);\n                    oModel.eventLogger.logEvent(\n                        isVisible\n                            ? {\n                                  type: UserEventType.FACETS_SHOW,\n                                  dataSourceKey: oModel.getDataSource().id,\n                              }\n                            : {\n                                  type: UserEventType.FACETS_HIDE,\n                                  dataSourceKey: oModel.getDataSource().id,\n                              }\n                    );\n                    this.compositeControl.searchContainer.setProperty(\"animateFacetTransition\", false);\n                    setTimeout(() => this.compositeControl.adjustSearchbarCustomGenericButtonWidth(), 100); // see this._resizeHandler();\n                },\n                visible: {\n                    path: \"/businessObjSearchEnabled\",\n                    formatter: (businessObjSearchEnabled: boolean): boolean => {\n                        // do not show button on phones\n                        // do not show in value-help mode\n                        // only show if business object search is active\n                        return (\n                            !Device.system.phone &&\n                            !oModel.config.optimizeForValueHelp &&\n                            oModel.config.facets &&\n                            businessObjSearchEnabled\n                        );\n                    },\n                },\n            }\n        );\n        filterBtn.addStyleClass(\"searchBarFilterButton\");\n        filterBtn.setLayoutData(\n            new OverflowToolbarLayoutData({ priority: OverflowToolbarPriority.NeverOverflow })\n        );\n        return filterBtn;\n    }\n\n    assembleResultviewSelectionButton(): OverflowToolbarToggleButton {\n        const oModel = this.compositeControl.getModelInternal() as SearchModel;\n        const selectionBtn = new OverflowToolbarToggleButton(\n            this.compositeControl.getId() + \"-searchBarResultviewSelectionButton\",\n            {\n                icon: IconPool.getIconURI(\"multi-select\"),\n                tooltip: {\n                    parts: [{ path: \"/resultviewSelectionVisibility\" }],\n                    formatter: (resultviewSelectionVisibility: boolean): string => {\n                        return resultviewSelectionVisibility\n                            ? i18n.getText(\"hideSelectionBtn_tooltip\")\n                            : i18n.getText(\"showSelectionBtn_tooltip\");\n                    },\n                },\n                pressed: { path: \"/resultviewSelectionVisibility\" },\n                press: (oEvent: ToggleButton$PressEvent): void => {\n                    // enable/disable selection of result view items (checkboxes)\n                    const isVisible: boolean = oEvent.getParameter(\"pressed\");\n                    oModel.setResultviewSelectionVisibility(isVisible);\n                    if (isVisible === false) {\n                        // reset selection when hiding checkboxes\n                        for (const item of this.compositeControl.getSearchResultSet().items) {\n                            item.setSelected(false);\n                        }\n                    }\n                },\n                visible: {\n                    path: \"/businessObjSearchEnabled\",\n                    formatter: (businessObjSearchEnabled: boolean): boolean => {\n                        // do not show button on phones\n                        // do not show in value-help mode\n                        // only show if business object search is active\n                        return (\n                            !Device.system.phone &&\n                            !oModel.config.optimizeForValueHelp &&\n                            oModel.config.showSelectionToggleButton &&\n                            oModel.config.facets &&\n                            businessObjSearchEnabled\n                        );\n                    },\n                },\n            }\n        );\n        selectionBtn.addStyleClass(\"searchBarResultviewSelectionButton\");\n        selectionBtn.setLayoutData(\n            new OverflowToolbarLayoutData({ priority: OverflowToolbarPriority.NeverOverflow })\n        );\n        return selectionBtn;\n    }\n\n    assembleGenericButtonsToolbar(): { toolbar: OverflowToolbar; hasCustomButtons: boolean } {\n        const oModel = this.compositeControl.getModelInternal() as SearchModel;\n\n        // table data export button\n        const dataExportButton = this.assembleExportButton();\n        dataExportButton.setLayoutData(\n            new OverflowToolbarLayoutData({ priority: OverflowToolbarPriority.High }) // 'high': Custom buttons can choose 'Low' or 'NeverOverflow' to make their button more/less important than ours\n        );\n\n        // display-switch tab strips\n        this.assembleResultViewSwitch();\n\n        // sort button\n        const sortButton = new OverflowToolbarButton(\n            (this.compositeControl.getId() ? this.compositeControl.getId() + \"-\" : \"\") + \"tableSortButton\",\n            {\n                icon: \"sap-icon://sort\",\n                text: \"{i18n>sortTable}\",\n                tooltip: \"{i18n>sortTable}\",\n                visible: {\n                    parts: [{ path: \"/count\" }, { path: \"/sortableAttributes\" }],\n                    formatter: (count, sortAttributes) => {\n                        const oModel = this.compositeControl.getModelInternal() as SearchModel;\n                        if (oModel && oModel.isHomogenousResult() && count > 0 && sortAttributes.length > 0) {\n                            return true;\n                        } else {\n                            return false;\n                        }\n                    },\n                },\n                type: {\n                    parts: [{ path: \"/orderBy\" }],\n                    formatter: (orderBy) => {\n                        if (orderBy && orderBy.sortOrder) {\n                            return ButtonType.Emphasized;\n                        } else {\n                            return ButtonType.Transparent;\n                        }\n                    },\n                },\n                press: () => {\n                    this.compositeControl.openSortDialog();\n                },\n            }\n        );\n        sortButton.addStyleClass(\"sapUshellSearchTableSortButton\");\n        sortButton.setLayoutData(\n            new OverflowToolbarLayoutData({ priority: OverflowToolbarPriority.High }) // 'high': Custom buttons can choose 'Low' or 'NeverOverflow' to make their button more/less important than ours\n        );\n\n        // sort dialog\n        this.compositeControl.sortDialog = this.assembleSearchResultSortDialog();\n\n        // table personalize button\n        let tablePersonalizeButton = undefined;\n        if (oModel?.config?.searchResultTablePersonalization !== false) {\n            tablePersonalizeButton = new OverflowToolbarButton(\n                (this.compositeControl.getId() ? this.compositeControl.getId() + \"-\" : \"\") +\n                    \"tablePersonalizeButton\",\n                {\n                    icon: \"sap-icon://action-settings\",\n                    text: \"{i18n>personalizeTable}\",\n                    tooltip: \"{i18n>personalizeTable}\",\n                    type: ButtonType.Transparent,\n                    enabled: {\n                        parts: [{ path: \"/resultViewType\" }],\n                        formatter: (resultViewType): boolean => resultViewType === \"searchResultTable\",\n                    },\n                    visible: {\n                        parts: [{ path: \"/count\" }, { path: \"/tableColumns\" }],\n                        formatter: (count, columns) => {\n                            const oModel = this.compositeControl.getModelInternal() as SearchModel;\n                            if (oModel && oModel.isHomogenousResult() && count > 0 && columns.length > 0) {\n                                return true;\n                            } else {\n                                return false;\n                            }\n                        },\n                    },\n                    press: () => {\n                        this.compositeControl.searchResultTable?.tablePersonalizer?.openDialog();\n                        const oModel = this.compositeControl.getModelInternal() as SearchModel;\n                        const userEventTableConfigOpen: TableConfigOpenEvent = {\n                            type: UserEventType.TABLE_CONFIG_OPEN,\n                            dataSourceKey: oModel.getDataSource().id,\n                        };\n                        oModel.eventLogger.logEvent(userEventTableConfigOpen);\n                    },\n                }\n            );\n            tablePersonalizeButton.addStyleClass(\"sapUshellSearchTablePersonalizeButton\");\n            tablePersonalizeButton.setLayoutData(\n                new OverflowToolbarLayoutData({ priority: OverflowToolbarPriority.High }) // 'high': Custom buttons can choose 'Low' or 'NeverOverflow' to make their button more/less important than ours\n            );\n        }\n\n        let toolbarContent: Array<Control> = [];\n        // standard buttons (export, sort, table personalization)\n        toolbarContent.push(dataExportButton);\n        toolbarContent.push(sortButton);\n        if (oModel?.config?.searchResultTablePersonalization !== false && tablePersonalizeButton) {\n            toolbarContent.push(tablePersonalizeButton);\n        }\n        // share button\n        const bWithShareButton = oModel?.config?.isUshell;\n        if (bWithShareButton) {\n            const shareButton = this.assembleShareButton();\n            shareButton.setLayoutData(\n                new OverflowToolbarLayoutData({ priority: OverflowToolbarPriority.High }) // 'high': Custom buttons can choose 'Low' or 'NeverOverflow' to make their button more/less important than ours\n            );\n            toolbarContent.push(shareButton);\n        }\n        toolbarContent.push(this.compositeControl.resultViewSwitch);\n\n        let hasCustomButtons = false;\n        try {\n            let customToolbar: Array<Control> = [new ToolbarSpacer()];\n            const customToolbarContent = oModel?.config?.getCustomToolbar() as Array<Control>;\n            if (customToolbarContent?.length > 0) {\n                hasCustomButtons = true;\n                customToolbarContent.push(\n                    new ToolbarSeparator(\"\", {\n                        visible: {\n                            parts: [{ path: \"/resultViewSwitchVisibility\" }, { path: \"/count\" }],\n                            formatter: (resultViewSwitchVisibility, count) => {\n                                return resultViewSwitchVisibility && count !== 0;\n                            },\n                        },\n                    })\n                );\n            }\n            if (oModel?.config?.searchInputLocation === \"Searchbar\") {\n                customToolbar = customToolbar.concat(this.compositeControl.oSearchFieldGroup);\n            }\n            customToolbar = customToolbar.concat(customToolbarContent);\n            toolbarContent = customToolbar.concat(toolbarContent);\n        } catch (err) {\n            const oError = new errors.ConfigurationExitError(\n                \"getCustomToolbar\",\n                oModel.config.applicationComponent,\n                err\n            );\n            this.compositeControl.errorHandler.onError(oError);\n            // do not throw oError, just do not any custom buttons to 'toolbar'\n        }\n        // put toobar buttons in a separate overflow toolbar to control its width independently of datasource tab strip\n        const toolbar = new OverflowToolbar(\n            this.compositeControl.getId() + \"-searchBar--genericButtonsToolbar\",\n            {\n                content: toolbarContent,\n            }\n        );\n        toolbar.addStyleClass(\"sapElisaSearchGenericButtonsToolbar\");\n        return { toolbar: toolbar, hasCustomButtons: hasCustomButtons };\n    }\n\n    assembleSearchResultSortDialog(): ViewSettingsDialog {\n        const sortDialogId = this.compositeControl.getId() + \"-sortDialog\";\n\n        // destroy old sort dialog\n        const oldSortDialog = Element.getElementById(sortDialogId);\n        if (oldSortDialog) {\n            oldSortDialog.destroy();\n        }\n\n        const sortDialog = new ViewSettingsDialog(sortDialogId, {\n            sortDescending: {\n                parts: [{ path: \"/orderBy\" }],\n                formatter: (orderBy): boolean => {\n                    return Object.keys(orderBy).length === 0 || orderBy.sortOrder === \"DESC\";\n                },\n            },\n            confirm: (oEvent: ViewSettingsDialog$ConfirmEvent) => {\n                const paramsSortItem = oEvent.getParameter(\"sortItem\");\n                const paramsSortDescending = oEvent.getParameter(\"sortDescending\");\n                const oModel = this.compositeControl.getModelInternal() as SearchModel;\n                const attributeId = (paramsSortItem.getBindingContext().getObject() as SortAttribute)\n                    .attributeId;\n                if (typeof paramsSortItem === \"undefined\" || attributeId === \"DEFAULT_SORT_ATTRIBUTE\") {\n                    sortDialog.setSortDescending(true);\n                    oModel.resetOrderBy(true);\n                } else {\n                    oModel.setOrderBy(\n                        {\n                            orderBy: attributeId,\n                            sortOrder: paramsSortDescending === true ? \"DESC\" : \"ASC\",\n                        },\n                        true\n                    );\n                }\n                // sortDialog.unbindAggregation(\"sortItems\", true);\n            },\n            cancel: () => {\n                // sortDialog.unbindAggregation(\"sortItems\", true);\n            },\n            resetFilters: () => {\n                // issue: default sort item can't be set, multiple reset selection in UI5\n                // workaround: set sort item after time delay\n                setTimeout(() => {\n                    sortDialog.setSortDescending(true);\n                    sortDialog.setSelectedSortItem(\"searchSortAttributeKeyDefault\");\n                }, 500);\n            },\n        });\n\n        sortDialog.addStyleClass(\"sapUshellSearchResultSortDialog\"); // obsolete\n        sortDialog.addStyleClass(\"sapElisaSearchResultSortDialog\");\n        this.compositeControl.addDependent(sortDialog);\n        return sortDialog;\n    }\n\n    assembleExportButton(): OverflowToolbarButton {\n        return new OverflowToolbarButton(\n            (this.compositeControl.getId() ? this.compositeControl.getId() + \"-\" : \"\") +\n                \"ushell-search-result-dataExportButton\",\n            {\n                icon: \"sap-icon://download\",\n                text: \"{i18n>exportData}\",\n                tooltip: \"{i18n>exportData}\",\n                type: ButtonType.Transparent,\n                visible: {\n                    parts: [{ path: \"/count\" }, { path: \"/tableColumns\" }],\n                    formatter: (count, columns) => {\n                        const oModel = this.compositeControl.getModelInternal() as SearchModel;\n                        if (oModel && oModel.isHomogenousResult() && count > 0 && columns.length > 0) {\n                            return true;\n                        } else {\n                            return false;\n                        }\n                    },\n                },\n                press: () => {\n                    if (this.compositeControl.searchSpreadsheet === undefined) {\n                        this.compositeControl.searchSpreadsheet = new SearchSpreadsheet(\n                            \"ushell-search-spreadsheet\"\n                        );\n                    }\n                    const oModel = this.compositeControl.getModelInternal() as SearchModel;\n                    this.compositeControl.searchSpreadsheet.onExport(oModel);\n                },\n            }\n        ).addStyleClass(\"sapUshellSearchTableDataExportButton\");\n    }\n\n    assembleShareButton(): OverflowToolbarButton {\n        // create action sheet\n        const oActionSheet = new ActionSheet(\n            (this.compositeControl.getId() ? this.compositeControl.getId() + \"-\" : \"\") + \"shareActionSheet\",\n            {\n                placement: PlacementType.Bottom,\n                buttons: [],\n            }\n        );\n        oActionSheet.addStyleClass(\"sapUshellSearchResultShareActionSheet\");\n        this.compositeControl.addDependent(oActionSheet); // -> destroys action sheet if SearchCompositeControl gets destroyed\n\n        // fill action sheet async with buttons\n        const oModel = this.compositeControl.getModelInternal() as SearchModel;\n        sap.ui.require([\"sap/ushell/ui/footerbar/AddBookmarkButton\"], (AddBookmarkButton) => {\n            // 1) bookmark button (entry in action sheet)\n            const oBookmarkButton = new AddBookmarkButton(\n                (this.compositeControl.getId() ? this.compositeControl.getId() + \"-\" : \"\") + \"bookmarkButton\",\n                {\n                    width: \"auto\",\n                    beforePressHandler: () => {\n                        const oAppData = {\n                            url: document.URL,\n                            title: oModel.getDocumentTitle(),\n                            icon: IconPool.getIconURI(\"search\"),\n                        };\n                        oBookmarkButton.setAppData(oAppData);\n                    },\n                }\n            );\n            oActionSheet.addButton(oBookmarkButton);\n            // 2) email button\n            const oEmailButton = new Button(\n                (this.compositeControl.getId() ? this.compositeControl.getId() + \"-\" : \"\") + \"emailButton\",\n                {\n                    icon: \"sap-icon://email\",\n                    text: i18n.getText(\"eMailFld\"),\n                    width: \"auto\",\n                    press: () => {\n                        URLHelper.triggerEmail(null, oModel.getDocumentTitle(), document.URL);\n                    },\n                }\n            );\n            oActionSheet.addButton(oEmailButton);\n        });\n\n        // share button which opens the action sheet\n        const oShareButton = new OverflowToolbarButton(\n            (this.compositeControl.getId() ? this.compositeControl.getId() + \"-\" : \"\") + \"shareButton\",\n            {\n                icon: \"sap-icon://action\",\n                text: i18n.getText(\"shareBtn\"),\n                tooltip: i18n.getText(\"shareBtn\"),\n                type: ButtonType.Transparent,\n                press: () => {\n                    oActionSheet.openBy(oShareButton);\n                },\n            }\n        );\n        return oShareButton;\n    }\n\n    assembleDataSourceTabBar(): IconTabBar {\n        const dataSourceTabBar = new IconTabBar(`${this.compositeControl.getId()}-dataSourceTabBar`, {\n            // tabDensityMode: \"Compact\", // not working, we have IconTabBar in left container of another bar -> see search.less\n            // headerMode: \"Inline\",   // do not use, confuses css when used on sap.m.Bar\n            expandable: false,\n            stretchContentHeight: false,\n            // selectedKey: \"{/tabStrips/strips/selected/id}\", // id of selected data source -> does not work, special logic see below, addEventDelegate -> onBeforeRendering\n            // backgroundDesign: BackgroundDesign.Transparent  // not relevant, content container is not in use\n            // content: -> not needed, we only need the 'switcher' for data source change (triggers new search to update search container)\n            visible: {\n                parts: [\n                    { path: \"/facetVisibility\" },\n                    { path: \"/count\" },\n                    { path: \"/businessObjSearchEnabled\" },\n                ],\n                formatter: (facetVisibility, count, bussinesObjSearchEnabled) => {\n                    const oModel = this.compositeControl.getModelInternal() as SearchModel;\n                    if (oModel.config.exclusiveDataSource) {\n                        return false;\n                    }\n                    return !facetVisibility && count > 0 && bussinesObjSearchEnabled;\n                },\n            },\n            selectedKey: {\n                path: \"/tabStrips/selected/id\",\n                mode: BindingMode.OneWay,\n            },\n            select: (oEvent) => {\n                const oModel = this.compositeControl.getModelInternal() as SearchModel;\n                if (oModel.config.searchScopeWithoutAll) {\n                    return;\n                }\n                if (oModel.getDataSource() !== oEvent.getParameter(\"item\").getBindingContext().getObject()) {\n                    // selection has changed\n                    oModel.setDataSource(\n                        oEvent.getParameter(\"item\").getBindingContext().getObject() as DataSource\n                    );\n                }\n            },\n        });\n        // define group for F6 handling\n        dataSourceTabBar.data(\"sap-ui-fastnavgroup\", \"false\", true /* write into DOM */);\n\n        dataSourceTabBar.addStyleClass(\"searchDataSourceTabStripBar\");\n        dataSourceTabBar.addStyleClass(\"sapUiSmallMarginBegin\");\n\n        dataSourceTabBar.setAriaTexts({\n            headerLabel: i18n.getText(\"dataSources\"),\n            headerDescription: i18n.getText(\"dataSources\"),\n        });\n\n        dataSourceTabBar.bindAggregation(\"items\", {\n            path: \"/tabStrips/strips\",\n            template: new IconTabFilter(\"\", {\n                key: \"{id}\", // data source id, only needed for indicator (bottom). We use bindingContext().getObject to switch search container content\n                text: \"{labelPlural}\",\n                visible: {\n                    path: \"\",\n                    formatter: (dataSource) => {\n                        const oModel = this.compositeControl.getModelInternal() as SearchModel;\n                        if (oModel.config.searchScopeWithoutAll && dataSource === oModel.allDataSource) {\n                            return false;\n                        }\n                    },\n                },\n            }),\n        });\n        return dataSourceTabBar;\n    }\n\n    assembleResultViewSwitch(): void {\n        if (this.compositeControl.resultViewSwitch !== undefined) {\n            return;\n        }\n        this.compositeControl.resultViewSwitch = new SegmentedButton(\n            this.compositeControl.getId() + \"-ResultViewType\",\n            {\n                selectedKey: \"{/resultViewType}\",\n                visible: {\n                    parts: [{ path: \"/resultViewSwitchVisibility\" }, { path: \"/count\" }],\n                    formatter: (resultViewSwitchVisibility: boolean, count: number) => {\n                        return resultViewSwitchVisibility && count !== 0;\n                    },\n                },\n                selectionChange: (oEvent: SegmentedButton$SelectionChangeEvent) => {\n                    const resultViewType = oEvent.getParameter(\"item\").getKey();\n                    this.compositeControl.setResultViewType(resultViewType);\n                    this.compositeControl.assignDragDropConfig();\n                    const oModel = this.compositeControl.getModelInternal() as SearchModel;\n                    const userEventResultViewSwitch: ResultViewSwitchEvent = {\n                        type: UserEventType.RESULT_VIEW_SWITCH,\n                        resultViewType: resultViewType,\n                    };\n                    oModel.eventLogger.logEvent(userEventResultViewSwitch);\n                },\n            }\n        );\n\n        this.compositeControl.resultViewSwitch.bindAggregation(\"items\", {\n            path: \"/resultViewTypes\",\n            factory: (id, context) => {\n                const oButton = new SegmentedButtonItem(\"\", { visible: true });\n                switch (\n                    context.getObject() as unknown as\n                        | \"searchResultList\"\n                        | \"searchResultTable\"\n                        | \"searchResultGrid\"\n                ) {\n                    case \"searchResultList\":\n                        oButton.setIcon(\"sap-icon://list\");\n                        oButton.setTooltip(i18n.getText(\"displayList\"));\n                        oButton.setKey(\"searchResultList\");\n                        break;\n                    case \"searchResultTable\":\n                        oButton.setIcon(\"sap-icon://table-view\");\n                        oButton.setTooltip(i18n.getText(\"displayTable\"));\n                        oButton.setKey(\"searchResultTable\");\n                        break;\n                    case \"searchResultGrid\":\n                        oButton.setIcon(\"sap-icon://grid\");\n                        oButton.setTooltip(i18n.getText(\"displayGrid\"));\n                        oButton.setKey(\"searchResultGrid\");\n                        break;\n                    default:\n                        oButton.setVisible(false);\n                }\n                return oButton;\n            },\n        });\n        this.compositeControl.resultViewSwitch.addStyleClass(\"sapUshellSearchResultViewSwitch\");\n        this.compositeControl.resultViewSwitch.setLayoutData(\n            new OverflowToolbarLayoutData({ priority: OverflowToolbarPriority.High }) // 'high': Custom buttons can choose 'Low' or 'NeverOverflow' to make their button more/less important than ours\n        );\n    }\n}\n"],"mappings":"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","ignoreList":[]}