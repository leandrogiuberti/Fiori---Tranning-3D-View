{"version":3,"file":"SearchUtil-dbg.js","names":["sap","ui","define","forwardEllipsis4Whyfound","domref","PeriodicRetry","interval","maxRetries","action","timeout","undefined","constructor","options","doRun","retries","success","window","setTimeout","run","StateWatcher","compareStates","getState","changed","checkMode","state","checkState","props","start","setInterval","checkStateChange","bind","currentState","__exports","__esModule"],"sources":["SearchUtil.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\n// =======================================================================\n// emphasize whyfound in case of ellipsis\n// =======================================================================\n// this function is obsolete and should only kept for backward compatibility in 1.139\n// TODO: remove after 1.139\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function forwardEllipsis4Whyfound(domref: HTMLElement): void {\n    return null;\n}\n\nexport class PeriodicRetry {\n    private interval: number;\n    private maxRetries: number;\n    private action: () => boolean;\n\n    private timeout: number | undefined = undefined;\n\n    constructor(options: { interval: number; maxRetries: number; action: () => boolean }) {\n        this.interval = options.interval;\n        this.maxRetries = options.maxRetries;\n        this.action = options.action;\n    }\n\n    doRun(retries: number): void {\n        const success = this.action();\n        if (success) {\n            return;\n        }\n        if (retries <= 1) {\n            return;\n        }\n        this.timeout = window.setTimeout(() => {\n            this.timeout = undefined;\n            this.doRun(retries - 1);\n        }, this.interval);\n    }\n\n    run(): void {\n        if (this.timeout) {\n            return; // already running\n        }\n        this.doRun(this.maxRetries);\n    }\n}\n\nexport class StateWatcher<STATE> {\n    // service functions passed from outside\n    compareStates: (s1: STATE, s2: STATE) => boolean;\n    getState: () => STATE;\n    changed: (state: STATE, oldState: STATE) => void;\n    // check interval\n    interval: number;\n    // internal\n    checkMode: boolean = false;\n    state: STATE;\n    checkState: STATE;\n    constructor(props: {\n        compareStates: (s1: STATE, s2: STATE) => boolean;\n        getState: () => STATE;\n        changed: (state: STATE, oldState: STATE) => void;\n        interval?: number;\n    }) {\n        this.compareStates = props.compareStates;\n        this.getState = props.getState;\n        this.changed = props.changed;\n        this.interval = props.interval ?? 100;\n    }\n    start() {\n        setInterval(this.checkStateChange.bind(this), this.interval);\n    }\n    checkStateChange(): void {\n        const currentState = this.getState();\n        if (!this.checkMode) {\n            if (!this.state || !this.compareStates(currentState, this.state)) {\n                // in case the state differs, we enter a special check mode and notify the subscriber only in case the new state is stable\n                this.checkMode = true;\n                this.checkState = currentState;\n            }\n        } else {\n            if (this.compareStates(currentState, this.checkState)) {\n                this.changed(currentState, this.state);\n                this.state = currentState;\n            }\n            this.checkMode = false;\n        }\n    }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AAJAA,GAAA,CAAAC,EAAA,CAAAC,MAAA;EAAA;;EAKA;EACA;EACA;EACA;EACA;EACA;EACO,SAASC,wBAAwBA,CAACC,MAAmB,EAAQ;IAChE,OAAO,IAAI;EACf;EAEO,MAAMC,aAAa,CAAC;IACfC,QAAQ;IACRC,UAAU;IACVC,MAAM;IAENC,OAAO,GAAuBC,SAAS;IAE/CC,WAAWA,CAACC,OAAwE,EAAE;MAClF,IAAI,CAACN,QAAQ,GAAGM,OAAO,CAACN,QAAQ;MAChC,IAAI,CAACC,UAAU,GAAGK,OAAO,CAACL,UAAU;MACpC,IAAI,CAACC,MAAM,GAAGI,OAAO,CAACJ,MAAM;IAChC;IAEAK,KAAKA,CAACC,OAAe,EAAQ;MACzB,MAAMC,OAAO,GAAG,IAAI,CAACP,MAAM,CAAC,CAAC;MAC7B,IAAIO,OAAO,EAAE;QACT;MACJ;MACA,IAAID,OAAO,IAAI,CAAC,EAAE;QACd;MACJ;MACA,IAAI,CAACL,OAAO,GAAGO,MAAM,CAACC,UAAU,CAAC,MAAM;QACnC,IAAI,CAACR,OAAO,GAAGC,SAAS;QACxB,IAAI,CAACG,KAAK,CAACC,OAAO,GAAG,CAAC,CAAC;MAC3B,CAAC,EAAE,IAAI,CAACR,QAAQ,CAAC;IACrB;IAEAY,GAAGA,CAAA,EAAS;MACR,IAAI,IAAI,CAACT,OAAO,EAAE;QACd,OAAO,CAAC;MACZ;MACA,IAAI,CAACI,KAAK,CAAC,IAAI,CAACN,UAAU,CAAC;IAC/B;EACJ;EAEO,MAAMY,YAAY,CAAQ;IAC7B;IACAC,aAAa;IACbC,QAAQ;IACRC,OAAO;IACP;IACAhB,QAAQ;IACR;IACAiB,SAAS,GAAY,KAAK;IAC1BC,KAAK;IACLC,UAAU;IACVd,WAAWA,CAACe,KAKX,EAAE;MACC,IAAI,CAACN,aAAa,GAAGM,KAAK,CAACN,aAAa;MACxC,IAAI,CAACC,QAAQ,GAAGK,KAAK,CAACL,QAAQ;MAC9B,IAAI,CAACC,OAAO,GAAGI,KAAK,CAACJ,OAAO;MAC5B,IAAI,CAAChB,QAAQ,GAAGoB,KAAK,CAACpB,QAAQ,IAAI,GAAG;IACzC;IACAqB,KAAKA,CAAA,EAAG;MACJC,WAAW,CAAC,IAAI,CAACC,gBAAgB,CAACC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAACxB,QAAQ,CAAC;IAChE;IACAuB,gBAAgBA,CAAA,EAAS;MACrB,MAAME,YAAY,GAAG,IAAI,CAACV,QAAQ,CAAC,CAAC;MACpC,IAAI,CAAC,IAAI,CAACE,SAAS,EAAE;QACjB,IAAI,CAAC,IAAI,CAACC,KAAK,IAAI,CAAC,IAAI,CAACJ,aAAa,CAACW,YAAY,EAAE,IAAI,CAACP,KAAK,CAAC,EAAE;UAC9D;UACA,IAAI,CAACD,SAAS,GAAG,IAAI;UACrB,IAAI,CAACE,UAAU,GAAGM,YAAY;QAClC;MACJ,CAAC,MAAM;QACH,IAAI,IAAI,CAACX,aAAa,CAACW,YAAY,EAAE,IAAI,CAACN,UAAU,CAAC,EAAE;UACnD,IAAI,CAACH,OAAO,CAACS,YAAY,EAAE,IAAI,CAACP,KAAK,CAAC;UACtC,IAAI,CAACA,KAAK,GAAGO,YAAY;QAC7B;QACA,IAAI,CAACR,SAAS,GAAG,KAAK;MAC1B;IACJ;EACJ;EAAC,IAAAS,SAAA;IAAAC,UAAA;EAAA;EAAAD,SAAA,CAAA7B,wBAAA,GAAAA,wBAAA;EAAA6B,SAAA,CAAA3B,aAAA,GAAAA,aAAA;EAAA2B,SAAA,CAAAb,YAAA,GAAAA,YAAA;EAAA,OAAAa,SAAA;AAAA","ignoreList":[]}