{"version":3,"file":"SearchFacetDialogHelperCharts-dbg.js","names":["sap","ui","define","__i18n","__SearchFacetPieChart","Log","ComparisonMicroChart","IconTabFilter","Button","Filter","FilterOperator","ResizeHandler","ComparisonMicroChartData","ActionSheet","sap_m_library","Element","_interopRequireDefault","obj","__esModule","default","i18n","SearchFacetPieChart","ValueColor","PlacementType","SearchFacetDialogHelperCharts","dialog","constructor","getBarChartPlaceholder","chartSettings","height","width","colorPalette","tooltip","oChart1","addStyleClass","oBarchartFilter1","path","operator","GT","value1","oBindingInfo","factory","oComparisonMicroChartData","title","value","color","formatter","val","res","Good","Neutral","parts","label","displayValue","press","oEvent","onDetailPageSelectionChangeCharts","filters","bindAggregation","setBusyIndicatorDelay","testWhetherPieWedgeOrLabelIsDummy","params","getParameters","JSON","stringify","data","split","possibleNumPerc","match","possibleNumTop","getText","e","debug","getPieChartPlaceholder","piechartOptions","oSearchFacetDialog","oChart","register","svgX","marginLeft","eventObj","target","firstChild","parseInt","window","getComputedStyle","getPropertyValue","size","style","setDummyTabBarItems","oControl","args","dummyTabBarItems","text","icon","key","setProperty","chartOnDisplayIndex","getDropDownButton","aButtons","oButton","tabBarItems","getProperty","oDropDownButton","getIcon","visible","getModel","enableCharts","i","length","buttonClickedIndex","buttonClickedId","getSource","sId","buttonElem","document","getElementById","dataset","facetViewIndex","undefined","settingsContainers","getElementsByClassName","el","display","chartOnDisplayIndexByFilterArray","facetOnDisplayIndex","btn","setIcon","asWhat","displayAs","setTooltip","elemFacetList","oFacetList","id","getSelectedItem","setSelectedItem","getItems","fireSelectionChange","listItem","controlChartVisibility","push","oActionSheet","showCancelButton","buttons","placement","Bottom","cancelButtonPress","info","attachPress","openBy","getListContainersForDetailPage","textChartNode","barChartNode","pieChartNode","relevantContainerIndex","relevantContainerHeight","searchFacetLargeChartContainer","Array","from","clientHeight","parent","j","offsetParent","chartParent","oListContainer","oInputFieldForFilterTextSet","querySelectorAll","oSortButtonSet","aPotentialCharts","children","className"],"sources":["SearchFacetDialogHelperCharts.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport i18n from \"./i18n\";\nimport SearchFacetPieChart from \"./controls/facets/types/tabbarfacet/SearchFacetPieChart\";\nimport Log from \"sap/base/Log\";\nimport ComparisonMicroChart, {\n    $ComparisonMicroChartSettings,\n} from \"sap/suite/ui/microchart/ComparisonMicroChart\";\nimport IconTabFilter from \"sap/m/IconTabFilter\";\nimport Button from \"sap/m/Button\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport ResizeHandler from \"sap/ui/core/ResizeHandler\";\nimport ComparisonMicroChartData from \"sap/suite/ui/microchart/ComparisonMicroChartData\";\nimport ActionSheet from \"sap/m/ActionSheet\";\nimport { ValueColor } from \"sap/m/library\";\nimport { PlacementType } from \"sap/m/library\";\nimport SearchFacetDialog from \"./controls/facets/SearchFacetDialog\";\nimport Event from \"sap/ui/base/Event\";\nimport Element from \"sap/ui/core/Element\";\n\nexport default class SearchFacetDialogHelperCharts {\n    static dialog: SearchFacetDialog;\n\n    constructor(dialog: SearchFacetDialog) {\n        SearchFacetDialogHelperCharts.dialog = dialog;\n    }\n\n    // create bar chart\n    static getBarChartPlaceholder(): ComparisonMicroChart {\n        const chartSettings: $ComparisonMicroChartSettings = {\n            height: \"90%\",\n            width: \"100%\",\n            colorPalette: \"\" as any, // the colorPalette merely stops the evaluation of the bar with 'neutral', 'good' etc\n            tooltip: \"\",\n        };\n        const oChart1 = new ComparisonMicroChart(chartSettings);\n        oChart1.addStyleClass(\"largeChart1barchart\");\n\n        const oBarchartFilter1 = new Filter({\n            path: \"value\",\n            operator: FilterOperator.GT,\n            value1: 0,\n        });\n        const oBindingInfo = {\n            path: \"items\",\n            factory: (): ComparisonMicroChartData => {\n                const oComparisonMicroChartData = new ComparisonMicroChartData({\n                    title: { path: \"label\" },\n                    value: { path: \"value\" },\n                    color: {\n                        path: \"selected\",\n                        formatter: (val): string => {\n                            let res = ValueColor.Good;\n                            if (!val) {\n                                res = ValueColor.Neutral;\n                            }\n                            return res;\n                        },\n                    },\n                    tooltip: {\n                        parts: [{ path: \"label\" }, { path: \"value\" }],\n                        formatter: (label, value) => {\n                            return label + \": \" + value;\n                        },\n                    },\n                    displayValue: { path: \"valueLabel\" },\n                    press: (oEvent: Event): void => {\n                        this.dialog.onDetailPageSelectionChangeCharts(oEvent);\n                    },\n                });\n                return oComparisonMicroChartData;\n            },\n            filters: [oBarchartFilter1],\n        };\n        oChart1.bindAggregation(\"data\", oBindingInfo);\n        oChart1.setBusyIndicatorDelay(0);\n        return oChart1;\n    }\n\n    testWhetherPieWedgeOrLabelIsDummy(oEvent: Event): boolean {\n        let res = false;\n        try {\n            const params = oEvent.getParameters() as { data: Array<{ data: unknown }> };\n            const label = JSON.stringify(params.data[0].data).split('\"')[3];\n            // 75% of data is outside the top 9 shown in pie chart\n            const possibleNumPerc = label.match(/\\d+/g)[0];\n            const possibleNumTop = label.match(/\\d+/g)[1];\n            if (label === i18n.getText(\"facetPieChartOverflowText2\", [possibleNumPerc, possibleNumTop])) {\n                res = true;\n            } else if (\n                label === i18n.getText(\"facetPieChartOverflowText2\", [possibleNumTop, possibleNumPerc])\n            ) {\n                res = true; // in case order of numbers reversed in foreign language\n            }\n        } catch (e) {\n            Log.debug(e);\n        }\n        return res;\n    }\n\n    static getPieChartPlaceholder(): SearchFacetPieChart {\n        const piechartOptions = { oSearchFacetDialog: this.dialog };\n        const oChart = new SearchFacetPieChart(\"\", piechartOptions);\n        oChart.addStyleClass(\"largeChart2piechart\");\n        ResizeHandler.register(oChart, function (oEvent: unknown) {\n            let svgX = 0;\n            let marginLeft = 0;\n            const eventObj = oEvent as { target: HTMLElement; size: { width: number } };\n            if (eventObj.target.firstChild) {\n                svgX = parseInt(\n                    window\n                        .getComputedStyle(eventObj.target.firstChild as unknown as HTMLElement, null)\n                        .getPropertyValue(\"transform-origin\")\n                        .split(\" \")[0],\n                    10\n                );\n                marginLeft = eventObj.size.width / 2 - svgX;\n                (eventObj.target.firstChild as HTMLElement).style.marginLeft = marginLeft + \"px\";\n            }\n        });\n        return oChart;\n    }\n\n    static setDummyTabBarItems(oControl: SearchFacetDialog, ...args: Array<string>): void {\n        const dummyTabBarItems = [\n            new IconTabFilter({\n                text: i18n.getText(\"facetList\"),\n                icon: \"sap-icon://list\",\n                key: \"list\" + args[0],\n            }),\n            new IconTabFilter({\n                text: i18n.getText(\"facetBarChart\"),\n                icon: \"sap-icon://horizontal-bar-chart\",\n                key: \"barChart\" + args[0],\n            }),\n            new IconTabFilter({\n                text: i18n.getText(\"facetPieChart\"),\n                icon: \"sap-icon://pie-chart\",\n                key: \"pieChart\" + args[0],\n            }),\n        ];\n        oControl.setProperty(\"tabBarItems\", dummyTabBarItems);\n        oControl.chartOnDisplayIndex = 0;\n    }\n\n    // create an DropDownButton with an actionsheet\n    static getDropDownButton(oControl: SearchFacetDialog): Button {\n        const aButtons = [];\n        let oButton;\n        const tabBarItems = oControl.getProperty(\"tabBarItems\");\n        const oDropDownButton = new Button({\n            icon: tabBarItems[oControl.chartOnDisplayIndex].getIcon(),\n            visible: oControl.getModel().getProperty(\"/config\").enableCharts,\n        });\n        for (let i = 0; i < tabBarItems.length; i++) {\n            oButton = new Button({\n                text: tabBarItems[i].getText(),\n                icon: tabBarItems[i].getIcon(),\n                press: (oEvent: Event) => {\n                    let buttonClickedIndex;\n                    const buttonClickedId = (oEvent.getSource() as unknown as { sId: string }).sId;\n                    const buttonElem = document.getElementById(buttonClickedId);\n                    buttonClickedIndex =\n                        buttonElem && buttonElem.dataset ? buttonElem.dataset.facetViewIndex : undefined;\n                    buttonClickedIndex = buttonClickedIndex ? parseInt(buttonClickedIndex, 10) : 0;\n                    oControl.chartOnDisplayIndex = buttonClickedIndex;\n\n                    if (oControl.chartOnDisplayIndex === 0) {\n                        const settingsContainers = document.getElementsByClassName(\n                            \"sapUshellSearchFacetDialogSettingsContainer\"\n                        );\n                        for (const el of settingsContainers) {\n                            (el as HTMLElement).style.display = \"block\";\n                        }\n                    } else {\n                        const settingsContainers = document.getElementsByClassName(\n                            \"sapUshellSearchFacetDialogSettingsContainer\"\n                        );\n                        for (const el of settingsContainers) {\n                            (el as HTMLElement).style.display = \"none\";\n                        }\n                    }\n\n                    // change the chartOnDisplayIndex value for the current filter selection\n                    oControl.chartOnDisplayIndexByFilterArray[oControl.facetOnDisplayIndex] =\n                        buttonClickedIndex;\n\n                    // reset the main button\n                    const btn = tabBarItems[oControl.chartOnDisplayIndex].getIcon();\n                    oDropDownButton.setIcon(btn);\n                    const asWhat = tabBarItems[oControl.chartOnDisplayIndex].getText();\n\n                    // reset the main button tooltip\n                    const displayAs = i18n.getText(\"displayAs\", [asWhat]);\n                    oDropDownButton.setTooltip(displayAs);\n\n                    // change what is displayed in the detail page\n                    const elemFacetList = document.getElementsByClassName(\n                        \"sapUshellSearchFacetDialogFacetList\"\n                    )[0] as HTMLElement;\n                    if (elemFacetList) {\n                        const oFacetList = Element.getElementById(elemFacetList.id) as any;\n                        if (\n                            oFacetList &&\n                            typeof oFacetList.getSelectedItem === \"function\" &&\n                            !oFacetList.getSelectedItem()\n                        ) {\n                            oFacetList.setSelectedItem(oFacetList.getItems()[0]);\n                        }\n                        if (oFacetList && typeof oFacetList.fireSelectionChange === \"function\") {\n                            oFacetList.fireSelectionChange({\n                                listItem: oFacetList.getSelectedItem(),\n                            });\n                        }\n                    }\n                    oControl.controlChartVisibility(oControl, buttonClickedIndex);\n                },\n            });\n            oButton.data(\"facet-view-index\", \"\" + i, true);\n            aButtons.push(oButton);\n        }\n        const oActionSheet = new ActionSheet({\n            showCancelButton: true,\n            buttons: aButtons,\n            placement: PlacementType.Bottom,\n            cancelButtonPress: function () {\n                Log.info(\"sap.m.ActionSheet: cancelButton is pressed\");\n            },\n        });\n        oDropDownButton.addStyleClass(\"sapUshellSearchFacetDialogTabBarButton\");\n        const asWhat = tabBarItems[oControl.chartOnDisplayIndex].getText();\n        const displayAs = i18n.getText(\"displayAs\", [asWhat]);\n        oDropDownButton.setTooltip(displayAs);\n        oDropDownButton.attachPress(function () {\n            oActionSheet.openBy(this);\n        });\n        return oDropDownButton;\n    }\n\n    static getListContainersForDetailPage(): Array<any> {\n        // heuristic due to difficulty of finding what user can see in chaos of 'virtual' fiori elements\n        let textChartNode: Element | null = null;\n        let barChartNode: Element | null = null;\n        let pieChartNode: Element | null = null;\n        const res: Array<unknown> = [];\n        let relevantContainerIndex = 0;\n        let relevantContainerHeight = 440;\n        const searchFacetLargeChartContainer = Array.from(\n            document.getElementsByClassName(\"searchFacetLargeChartContainer\")\n        ) as HTMLElement[];\n        for (let i = 0; i < searchFacetLargeChartContainer.length; i++) {\n            if (searchFacetLargeChartContainer[i].clientHeight > 0) {\n                // the not ui-relevant chartContainers have height of 0\n                let parent: HTMLElement | null = searchFacetLargeChartContainer[i];\n                // walk up three levels to get the correct parent\n                for (let j = 0; j < 3; j++) {\n                    parent = parent && (parent.offsetParent as HTMLElement);\n                }\n                if (parent) {\n                    relevantContainerHeight = parent.clientHeight;\n                }\n                relevantContainerIndex = i;\n                break;\n            }\n        }\n        const chartParent = searchFacetLargeChartContainer[relevantContainerIndex];\n        if (chartParent) {\n            const oListContainer = Element.getElementById(chartParent.id);\n            const oInputFieldForFilterTextSet = document.querySelectorAll(\n                \".sapUshellSearchFacetDialogSubheaderToolbar .sapMSF\"\n            );\n            const oSortButtonSet = document.querySelectorAll(\".sapUshellSearchFacetDialogSortButton\");\n            const aPotentialCharts =\n                chartParent.firstChild && (chartParent.firstChild as HTMLElement).children\n                    ? (chartParent.firstChild as HTMLElement).children\n                    : [];\n            for (let j = 0; j < aPotentialCharts.length; j++) {\n                const className = aPotentialCharts[j].className;\n                if (className) {\n                    if (className.match(/sapMList/)) {\n                        textChartNode = aPotentialCharts[j];\n                    } else if (className.match(/barchart/)) {\n                        barChartNode = aPotentialCharts[j];\n                    } else if (className.match(/piechart/)) {\n                        pieChartNode = aPotentialCharts[j];\n                    }\n                }\n            }\n            res.push(chartParent);\n            res.push(oListContainer);\n            res.push(relevantContainerHeight);\n            res.push(textChartNode);\n            res.push(barChartNode);\n            res.push(pieChartNode);\n            res.push(oSortButtonSet);\n            res.push(oInputFieldForFilterTextSet);\n        }\n        return res;\n    }\n}\n"],"mappings":"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","ignoreList":[]}