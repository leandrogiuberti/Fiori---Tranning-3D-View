/*!
 * SAPUI5
 * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.
 * 
 */
sap.ui.define(["../tree/TreeNode"],function(e){"use strict";function t(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const i=t(e);class s extends i{count;selected;partiallySelected;hasFilter;constructor(e){super(e);this.count=e.count;this.selected=false;this.partiallySelected=false;this.hasFilter=false;this.getData().facet=e.facet}async fetchChildTreeNodesImpl(){const e=[];const t=this.getData().facet;const i=this.getData().facet.filter.clone();i.rootCondition.removeAttributeConditions(t.attributeId);const s=await t.sina.createHierarchyQuery({attributeId:t.attributeId,nodeId:this.id,filter:i,nlq:t?.model?.isNlqActive()}).getResultSetAsync();if(s.hasErrors()){const e=this.getData().facet;s.getErrors().forEach(t=>e.model.errorHandler.onError(t))}if(!s?.node?.childNodes){return e}const a=this.getTreeNodeFactory();for(const t of s.node.childNodes){e.push(a.createTreeNode({id:t.id,label:t.label,count:t.count,facet:this.getData().facet,expandable:t.hasChildren}))}this.getData().facet.updateStructureTree(s.node);return e}async setExpanded(e,t){await super.setExpanded(e,false);this.getData().facet.mixinFilterNodes();if(t){this.getTreeNodeFactory().updateUI()}}toggleFilter(){if(this.selected){if(this.partiallySelected){this.setFilter(true);this.visitParentNodesRecursively(function(e){e.setFilter(false)});this.visitChildNodesRecursively(function(e){e.setFilter(false)})}else{this.setFilter(false)}}else{this.setFilter(true);this.visitParentNodesRecursively(function(e){e.setFilter(false)})}const e=this.getData().facet;if(e.isShowMoreDialog){e.mixinFilterNodes();e.treeNodeFactory.updateUI()}else{e.activateFilters()}}setFilter(e){const t=this.getData().facet;const i=t.sina.createSimpleCondition({operator:t.sina.ComparisonOperator.DescendantOf,attribute:t.attributeId,attributeLabel:t.title,value:this.id,valueLabel:this.label});if(e){t.filter.autoInsertCondition(i);t.model.setProperty("/facetDialogOverallCounter",true)}else{t.filter.autoRemoveCondition(i);if(t.model["aFilters"]?.length===1&&t.filterCount===1){t.model.setProperty("/facetDialogOverallCounter",false)}}if(t.handleSetFilter){t.handleSetFilter(this,e,i)}}}return s});
//# sourceMappingURL=SearchHierarchyDynamicTreeNode.js.map