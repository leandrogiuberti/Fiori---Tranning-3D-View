{"version":3,"file":"StructureTree-dbg.js","names":["sap","ui","define","StructureTreeNode","id","label","tree","childNodes","childNodeMap","parentNode","constructor","properties","addChildNode","node","push","update","sinaNode","i","length","sinaChildNode","childNode","createNode","StructureTree","nodeMap","options","rootNode","getNode","Error","updateFromHierarchyNodePath","hierarchyNodePath","hierarchyNode","path"],"sources":["StructureTree.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\n/*!\n * When manipulating the filter conditions (for instance changing the search term) hierarchy nodes may appear/disappear.\n * In case a filter is set for a disappeared hierarchy node we want to show the hierarchy node (without count) anyway.\n * The structure tree is always updated with hierarchy structure information from the server.\n * In case a node is not included in the server response the node may be taken from the structure tree.\n */\n\nimport { HierarchyNode } from \"../sinaNexTS/sina/HierarchyNode\";\nimport { HierarchyNodePath } from \"../sinaNexTS/sina/HierarchyNodePath\";\n\nexport interface StructureTreeNodeOptions {\n    id: string;\n    label: string;\n    tree?: StructureTree;\n}\nexport class StructureTreeNode {\n    id: string;\n    label: string;\n    tree: StructureTree;\n    childNodes: Array<StructureTreeNode>;\n    childNodeMap: { [key: string]: StructureTreeNode };\n    parentNode: StructureTreeNode;\n\n    constructor(properties: StructureTreeNodeOptions) {\n        this.id = properties.id;\n        this.label = properties.label;\n        this.tree = properties.tree;\n        this.childNodes = [];\n        this.childNodeMap = {};\n        this.parentNode = null;\n    }\n\n    addChildNode(node: StructureTreeNode) {\n        this.childNodes.push(node);\n        this.childNodeMap[node.id] = node;\n        node.parentNode = this;\n    }\n\n    update(sinaNode: HierarchyNode) {\n        for (let i = 0; i < sinaNode.childNodes.length; ++i) {\n            const sinaChildNode = sinaNode.childNodes[i];\n            let childNode = this.childNodeMap[sinaChildNode.id];\n            if (!childNode) {\n                childNode = this.tree.createNode({ id: sinaChildNode.id, label: sinaChildNode.label });\n                this.addChildNode(childNode);\n            }\n            childNode.update(sinaChildNode);\n        }\n    }\n}\n\nexport interface StructureTreeOptions {\n    rootNode: { id: string; label: string };\n}\nexport default class StructureTree {\n    node: StructureTreeNode;\n    nodeMap: { [key: string]: StructureTreeNode };\n\n    constructor(options: StructureTreeOptions) {\n        this.nodeMap = {};\n        this.node = this.createNode(options.rootNode);\n    }\n\n    createNode(properties: StructureTreeNodeOptions): StructureTreeNode {\n        properties.tree = this;\n        const node = new StructureTreeNode(properties);\n        this.nodeMap[properties.id] = node;\n        return node;\n    }\n\n    getNode(id: string): StructureTreeNode {\n        return this.nodeMap[id];\n    }\n\n    update(sinaNode: HierarchyNode): void {\n        const node = this.nodeMap[sinaNode.id];\n        if (!node) {\n            throw new Error(`structure tree update failed, node does not exist: ${sinaNode?.id}`);\n        }\n        node.update(sinaNode);\n    }\n\n    updateFromHierarchyNodePath(hierarchyNodePath: HierarchyNodePath) {\n        let parentNode: StructureTreeNode;\n        for (const hierarchyNode of hierarchyNodePath.path) {\n            let node = this.getNode(hierarchyNode.id);\n            if (!node) {\n                node = this.createNode({\n                    id: hierarchyNode.id,\n                    label: hierarchyNode.label || hierarchyNode.id,\n                });\n                if (!parentNode) {\n                    throw \"program error, parent node not set\";\n                }\n                parentNode.addChildNode(node);\n            }\n            parentNode = node;\n        }\n    }\n}\n"],"mappings":"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","ignoreList":[]}