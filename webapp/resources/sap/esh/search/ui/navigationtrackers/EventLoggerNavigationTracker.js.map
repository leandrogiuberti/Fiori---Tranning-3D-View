{"version":3,"file":"EventLoggerNavigationTracker.js","names":["sap","ui","define","___eventlogging_UserEvents","___sinaNexTS_sina_ObjectSuggestion","___sinaNexTS_sina_ResultSet","___sinaNexTS_sina_SearchResultSetItem","___sinaNexTS_sina_SearchResultSetItemAttributeBase","UserEventType","ObjectSuggestion","ResultSet","SearchResultSetItem","SearchResultSetItemAttributeBase","assembleResultData","resultSetItem","model","executionId","positionInList","dataSourceKey","searchTerm","resultSet","parent","id","items","indexOf","getDataSource","getSearchBoxTerm","assembleEventData","navigationTarget","Object","assign","type","RESULT_LIST_ITEM_ATTRIBUTE_NAVIGATE","targetUrl","OBJECT_SUGGESTION_NAVIGATE","defaultNavigationTarget","RESULT_LIST_ITEM_NAVIGATE","RESULT_LIST_ITEM_NAVIGATE_CONTEXT","ITEM_NAVIGATE","generateEventLoggerNavigationTracker","eventData","eventLogger","logEvent","__exports","__esModule"],"sources":["EventLoggerNavigationTracker.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport SearchModel from \"../SearchModel\";\nimport {\n    ItemNavigateEvent,\n    ObjectSuggestionNavigateEvent,\n    ResultListItemAttributeNavigateEvent,\n    ResultListItemNavigateContextEvent,\n    ResultListItemNavigateEvent,\n    UserEventType,\n} from \"../eventlogging/UserEvents\";\nimport { NavigationTarget, NavigationTracker } from \"../sinaNexTS/sina/NavigationTarget\";\nimport { ObjectSuggestion } from \"../sinaNexTS/sina/ObjectSuggestion\";\nimport { ResultSet } from \"../sinaNexTS/sina/ResultSet\";\nimport { ResultSetItem } from \"../sinaNexTS/sina/ResultSetItem\";\nimport { SearchResultSetItem } from \"../sinaNexTS/sina/SearchResultSetItem\";\nimport { SearchResultSetItemAttributeBase } from \"../sinaNexTS/sina/SearchResultSetItemAttributeBase\";\n\n// interface EventData {\n//     type: UserEventType;\n//     targetUrl: string;\n//     positionInList: number;\n//     executionId: string;\n// }\n\nfunction assembleResultData(\n    resultSetItem: ResultSetItem,\n    model: SearchModel\n): {\n    executionId: string;\n    positionInList: number;\n    dataSourceKey: string;\n    searchTerm: string;\n} {\n    if (!resultSetItem) {\n        return {\n            executionId: \"-1\",\n            positionInList: -1,\n            dataSourceKey: \"-1\",\n            searchTerm: \"-1\",\n        };\n    }\n    const resultSet = resultSetItem.parent;\n    if (!(resultSet instanceof ResultSet)) {\n        return {\n            executionId: \"-1\",\n            positionInList: -1,\n            dataSourceKey: \"-1\",\n            searchTerm: \"-1\",\n        };\n    }\n    return {\n        executionId: resultSet.id,\n        positionInList: resultSet?.items.indexOf(resultSetItem),\n        dataSourceKey: model.getDataSource().id,\n        searchTerm: model.getSearchBoxTerm(),\n    };\n}\n\nfunction assembleEventData(\n    navigationTarget: NavigationTarget,\n    model: SearchModel\n):\n    | ObjectSuggestionNavigateEvent\n    | ResultListItemNavigateEvent\n    | ResultListItemNavigateContextEvent\n    | ResultListItemAttributeNavigateEvent\n    | ItemNavigateEvent {\n    const parent = navigationTarget.parent;\n\n    // check for nav target on result set attribute\n    if (parent instanceof SearchResultSetItemAttributeBase) {\n        return Object.assign(\n            {\n                type: UserEventType.RESULT_LIST_ITEM_ATTRIBUTE_NAVIGATE,\n                targetUrl: navigationTarget.targetUrl,\n            },\n            assembleResultData(parent.parent, model)\n        ) as ResultListItemAttributeNavigateEvent;\n    }\n\n    // check for nav target on object suggestion\n    if (parent instanceof SearchResultSetItem && parent.parent instanceof ObjectSuggestion) {\n        return Object.assign(\n            {\n                type: UserEventType.OBJECT_SUGGESTION_NAVIGATE,\n                targetUrl: navigationTarget.targetUrl,\n            },\n            assembleResultData(parent.parent, model)\n        ) as ObjectSuggestionNavigateEvent;\n    }\n\n    // check for nav target on result set item\n    if (parent instanceof SearchResultSetItem) {\n        const type =\n            parent.defaultNavigationTarget === navigationTarget\n                ? UserEventType.RESULT_LIST_ITEM_NAVIGATE\n                : UserEventType.RESULT_LIST_ITEM_NAVIGATE_CONTEXT;\n        return Object.assign(\n            {\n                type: type,\n                targetUrl: navigationTarget.targetUrl,\n            },\n            assembleResultData(parent, model)\n        ) as ResultListItemNavigateEvent | ResultListItemNavigateContextEvent;\n    }\n\n    // fallback\n    return {\n        type: UserEventType.ITEM_NAVIGATE,\n        targetUrl: navigationTarget.targetUrl,\n        executionId: \"\",\n        positionInList: -1,\n        dataSourceKey: model.getDataSource().id,\n        searchTerm: model.getSearchBoxTerm(),\n    };\n}\n\nexport function generateEventLoggerNavigationTracker(model: SearchModel): NavigationTracker {\n    return (navigationTarget: NavigationTarget) => {\n        const eventData = assembleEventData(navigationTarget, model);\n        model.eventLogger.logEvent(eventData);\n    };\n}\n"],"mappings":";;;;;AAAAA,IAAAC,GAAAC,OAAA,wMAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAAA,mBAYIC,EAAaL,EAAA,uBAGRM,EAAgBL,EAAA,0BAChBM,EAASL,EAAA,mBAETM,EAAmBL,EAAA,6BACnBM,EAAgCL,EAAA,oCASzC,SAASM,EACLC,EACAC,GAOA,IAAKD,EAAe,CAChB,MAAO,CACHE,YAAa,KACbC,gBAAiB,EACjBC,cAAe,KACfC,WAAY,KAEpB,CACA,MAAMC,EAAYN,EAAcO,OAChC,KAAMD,aAAqBV,GAAY,CACnC,MAAO,CACHM,YAAa,KACbC,gBAAiB,EACjBC,cAAe,KACfC,WAAY,KAEpB,CACA,MAAO,CACHH,YAAaI,EAAUE,GACvBL,eAAgBG,GAAWG,MAAMC,QAAQV,GACzCI,cAAeH,EAAMU,gBAAgBH,GACrCH,WAAYJ,EAAMW,mBAE1B,CAEA,SAASC,EACLC,EACAb,GAOA,MAAMM,EAASO,EAAiBP,OAGhC,GAAIA,aAAkBT,EAAkC,CACpD,OAAOiB,OAAOC,OACV,CACIC,KAAMvB,EAAcwB,oCACpBC,UAAWL,EAAiBK,WAEhCpB,EAAmBQ,EAAOA,OAAQN,GAE1C,CAGA,GAAIM,aAAkBV,GAAuBU,EAAOA,kBAAkBZ,EAAkB,CACpF,OAAOoB,OAAOC,OACV,CACIC,KAAMvB,EAAc0B,2BACpBD,UAAWL,EAAiBK,WAEhCpB,EAAmBQ,EAAOA,OAAQN,GAE1C,CAGA,GAAIM,aAAkBV,EAAqB,CACvC,MAAMoB,EACFV,EAAOc,0BAA4BP,EAC7BpB,EAAc4B,0BACd5B,EAAc6B,kCACxB,OAAOR,OAAOC,OACV,CACIC,KAAMA,EACNE,UAAWL,EAAiBK,WAEhCpB,EAAmBQ,EAAQN,GAEnC,CAGA,MAAO,CACHgB,KAAMvB,EAAc8B,cACpBL,UAAWL,EAAiBK,UAC5BjB,YAAa,GACbC,gBAAiB,EACjBC,cAAeH,EAAMU,gBAAgBH,GACrCH,WAAYJ,EAAMW,mBAE1B,CAEO,SAASa,EAAqCxB,GACjD,OAAQa,IACJ,MAAMY,EAAYb,EAAkBC,EAAkBb,GACtDA,EAAM0B,YAAYC,SAASF,GAEnC,CAAC,IAAAG,EAAA,CAAAC,WAAA,MAAAD,EAAAJ,uCAAA,OAAAI,CAAA","ignoreList":[]}