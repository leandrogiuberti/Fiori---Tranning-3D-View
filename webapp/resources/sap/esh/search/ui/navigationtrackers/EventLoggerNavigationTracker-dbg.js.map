{"version":3,"file":"EventLoggerNavigationTracker-dbg.js","names":["sap","ui","define","___eventlogging_UserEvents","___sinaNexTS_sina_ObjectSuggestion","___sinaNexTS_sina_ResultSet","___sinaNexTS_sina_SearchResultSetItem","___sinaNexTS_sina_SearchResultSetItemAttributeBase","UserEventType","ObjectSuggestion","ResultSet","SearchResultSetItem","SearchResultSetItemAttributeBase","assembleResultData","resultSetItem","model","executionId","positionInList","dataSourceKey","searchTerm","resultSet","parent","id","items","indexOf","getDataSource","getSearchBoxTerm","assembleEventData","navigationTarget","Object","assign","type","RESULT_LIST_ITEM_ATTRIBUTE_NAVIGATE","targetUrl","OBJECT_SUGGESTION_NAVIGATE","defaultNavigationTarget","RESULT_LIST_ITEM_NAVIGATE","RESULT_LIST_ITEM_NAVIGATE_CONTEXT","ITEM_NAVIGATE","generateEventLoggerNavigationTracker","eventData","eventLogger","logEvent","__exports","__esModule"],"sources":["EventLoggerNavigationTracker.ts"],"sourcesContent":["/*!\n * SAPUI5\n * Copyright (c) 2025 SAP SE or an SAP affiliate company. All rights reserved.\n * \n */\nimport SearchModel from \"../SearchModel\";\nimport {\n    ItemNavigateEvent,\n    ObjectSuggestionNavigateEvent,\n    ResultListItemAttributeNavigateEvent,\n    ResultListItemNavigateContextEvent,\n    ResultListItemNavigateEvent,\n    UserEventType,\n} from \"../eventlogging/UserEvents\";\nimport { NavigationTarget, NavigationTracker } from \"../sinaNexTS/sina/NavigationTarget\";\nimport { ObjectSuggestion } from \"../sinaNexTS/sina/ObjectSuggestion\";\nimport { ResultSet } from \"../sinaNexTS/sina/ResultSet\";\nimport { ResultSetItem } from \"../sinaNexTS/sina/ResultSetItem\";\nimport { SearchResultSetItem } from \"../sinaNexTS/sina/SearchResultSetItem\";\nimport { SearchResultSetItemAttributeBase } from \"../sinaNexTS/sina/SearchResultSetItemAttributeBase\";\n\n// interface EventData {\n//     type: UserEventType;\n//     targetUrl: string;\n//     positionInList: number;\n//     executionId: string;\n// }\n\nfunction assembleResultData(\n    resultSetItem: ResultSetItem,\n    model: SearchModel\n): {\n    executionId: string;\n    positionInList: number;\n    dataSourceKey: string;\n    searchTerm: string;\n} {\n    if (!resultSetItem) {\n        return {\n            executionId: \"-1\",\n            positionInList: -1,\n            dataSourceKey: \"-1\",\n            searchTerm: \"-1\",\n        };\n    }\n    const resultSet = resultSetItem.parent;\n    if (!(resultSet instanceof ResultSet)) {\n        return {\n            executionId: \"-1\",\n            positionInList: -1,\n            dataSourceKey: \"-1\",\n            searchTerm: \"-1\",\n        };\n    }\n    return {\n        executionId: resultSet.id,\n        positionInList: resultSet?.items.indexOf(resultSetItem),\n        dataSourceKey: model.getDataSource().id,\n        searchTerm: model.getSearchBoxTerm(),\n    };\n}\n\nfunction assembleEventData(\n    navigationTarget: NavigationTarget,\n    model: SearchModel\n):\n    | ObjectSuggestionNavigateEvent\n    | ResultListItemNavigateEvent\n    | ResultListItemNavigateContextEvent\n    | ResultListItemAttributeNavigateEvent\n    | ItemNavigateEvent {\n    const parent = navigationTarget.parent;\n\n    // check for nav target on result set attribute\n    if (parent instanceof SearchResultSetItemAttributeBase) {\n        return Object.assign(\n            {\n                type: UserEventType.RESULT_LIST_ITEM_ATTRIBUTE_NAVIGATE,\n                targetUrl: navigationTarget.targetUrl,\n            },\n            assembleResultData(parent.parent, model)\n        ) as ResultListItemAttributeNavigateEvent;\n    }\n\n    // check for nav target on object suggestion\n    if (parent instanceof SearchResultSetItem && parent.parent instanceof ObjectSuggestion) {\n        return Object.assign(\n            {\n                type: UserEventType.OBJECT_SUGGESTION_NAVIGATE,\n                targetUrl: navigationTarget.targetUrl,\n            },\n            assembleResultData(parent.parent, model)\n        ) as ObjectSuggestionNavigateEvent;\n    }\n\n    // check for nav target on result set item\n    if (parent instanceof SearchResultSetItem) {\n        const type =\n            parent.defaultNavigationTarget === navigationTarget\n                ? UserEventType.RESULT_LIST_ITEM_NAVIGATE\n                : UserEventType.RESULT_LIST_ITEM_NAVIGATE_CONTEXT;\n        return Object.assign(\n            {\n                type: type,\n                targetUrl: navigationTarget.targetUrl,\n            },\n            assembleResultData(parent, model)\n        ) as ResultListItemNavigateEvent | ResultListItemNavigateContextEvent;\n    }\n\n    // fallback\n    return {\n        type: UserEventType.ITEM_NAVIGATE,\n        targetUrl: navigationTarget.targetUrl,\n        executionId: \"\",\n        positionInList: -1,\n        dataSourceKey: model.getDataSource().id,\n        searchTerm: model.getSearchBoxTerm(),\n    };\n}\n\nexport function generateEventLoggerNavigationTracker(model: SearchModel): NavigationTracker {\n    return (navigationTarget: NavigationTarget) => {\n        const eventData = assembleEventData(navigationTarget, model);\n        model.eventLogger.logEvent(eventData);\n    };\n}\n"],"mappings":"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","ignoreList":[]}