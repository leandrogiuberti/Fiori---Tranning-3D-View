sap.ui.define(["require","exports","sap/esh/search/ui/thirdparty/webcomponents-fiori","sap/esh/search/ui/thirdparty/parameters-bundle.css","sap/esh/search/ui/thirdparty/toLowercaseEnumValue"],function(e,t,r,n,o){"use strict";function i(e,t,n,o,i={}){const a=r.D.getDraggedElement(),s={targetReference:null,placement:null};if(!a&&!i?.crossDnD)return s;const l=n.placements;return s.targetReference=e.target,l.some(r=>{const l=i.originalEvent?{originalEvent:e}:{};return t.fireDecoratorEvent("move-over",{...l,source:{element:a},destination:{element:o,placement:r}})?false:(e.preventDefault(),s.targetReference=n.element,s.placement=r,true)})||(s.targetReference=null),s}function a(e,t,n,o,i={}){e.preventDefault();const a=r.D.getDraggedElement();if(!a&&i?.crossDnD)return;const s=i.originalEvent?{originalEvent:e}:{};t.fireDecoratorEvent("move",{...s,source:{element:a},destination:{element:n,placement:o}}),a?.focus()}var s=(e=>(e.On="On",e.Before="Before",e.After="After",e))(s||{});var l=(e=>(e.Vertical="Vertical",e.Horizontal="Horizontal",e))(l||{});const c=(e,t,r,n)=>{const o=Math.abs(e-t),i=Math.abs(e-r),a=Math.abs(e-n),l=Math.min(o,i,a);let c=[];switch(l){case o:c=[s.Before];break;case i:c=[s.On,o<a?s.Before:s.After];break;case a:c=[s.After];break}return c},p=(e,t,r)=>{let n=Number.POSITIVE_INFINITY,o=null;for(let i=0;i<e.length;i++){const a=e[i],{left:s,width:c,top:p,height:d}=a.getBoundingClientRect();let h;r===l.Vertical?h=p+d/2:h=s+c/2;const u=Math.abs(t-h);u<n&&(n=u,o=a)}if(!o)return null;const{width:i,height:a,left:s,right:p,top:d,bottom:h}=o.getBoundingClientRect();let u;return r===l.Vertical?u=c(t,d,d+a/2,h):u=c(t,s,s+i/2,p),{element:o,placements:u}},d=(e,t)=>(t--,t<0?[]:[{element:e[t],placement:s.Before}]),h=(e,t)=>(t++,t>=e.length?[]:[{element:e[t],placement:s.After}]),u={ArrowLeft:d,ArrowUp:d,ArrowRight:h,ArrowDown:h,Home:(e,t)=>e.slice(0,t).map(e=>({element:e,placement:s.Before})),End:(e,t)=>e.slice(t+1,e.length).reverse().map(e=>({element:e,placement:s.After}))},g=(e,t,r)=>f(r.key)?u[r.key](e,e.indexOf(t)):[],f=e=>e in u;class m{constructor(e,t){this.component=e;this.config={orientation:l.Vertical,clientCoordinate:"clientY",...t}}ondragenter(e){e.preventDefault()}ondragleave(e){if(e.relatedTarget instanceof Node&&this.component.shadowRoot?.contains(e.relatedTarget)){return}const t=this.config.getDropIndicator();if(t){t.targetReference=null}}ondragover(e){if(!this._validateDragOver(e)){return}const t=r.D.getDraggedElement();const n=this.config.getDropIndicator();const o=this._findClosestPosition(e);if(!o){n.targetReference=null;return}const a=this._transformTargetElement(o.element);if(!this._isValidDragTarget(t,a)){n.targetReference=null;return}const s=this._filterPlacements(o.placements,t,a);const l=this.config.useOriginalEvent?{originalEvent:true}:{};const{targetReference:c,placement:p}=i(e,this.component,{element:a,placements:s},a,l);n.targetReference=c;n.placement=p}ondrop(e){const t=this.config.getDropIndicator();if(!t?.targetReference||!t?.placement){e.preventDefault();return}const r=this.config.useOriginalEvent?{originalEvent:true}:{};a(e,this.component,t.targetReference,t.placement,r);t.targetReference=null}_validateDragOver(e){if(!(e.target instanceof HTMLElement)){return false}const t=r.D.getDraggedElement();const n=this.config.getDropIndicator();return!!(t&&n)}_findClosestPosition(e){const t=this.config.getItems();const r=this.config.clientCoordinate==="clientX"?e.clientX:e.clientY;return p(t,r,this.config.orientation)}_transformTargetElement(e){if(this.config.transformElement){return this.config.transformElement(e)}return e}_isValidDragTarget(e,t){if(this.config.validateDraggedElement){return this.config.validateDraggedElement(e,t)}return true}_filterPlacements(e,t,r){if(this.config.filterPlacements){return this.config.filterPlacements(e,t,r)}return e}}var v;(function(e){e["None"]="None";e["Normal"]="Normal"})(v||(v={}));var b=v;function x(){return n.jsxs("div",{part:"native-li",role:this.effectiveAccRole,tabindex:this.forcedTabIndex?parseInt(this.forcedTabIndex):undefined,class:{"ui5-ghli-root":true,...this.classes.main},"aria-label":this.ariaLabelText,"aria-roledescription":this.groupHeaderText,onFocusIn:this._onfocusin,onKeyDown:this._onkeydown,children:[n.jsx("div",{id:`${this._id}-content`,class:"ui5-li-content",children:y.call(this)}),this.hasSubItems&&n.jsx("slot",{name:"subItems"})]})}function y(){if(this.wrappingType===b.Normal){return this.expandableTextTemplate?.call(this,{className:"ui5-ghli-title",text:this._textContent,maxCharacters:this._maxCharacters,part:"title"})}return n.jsx("span",{part:"title",class:"ui5-ghli-title",children:n.jsx("slot",{})})}r.p("@"+"ui5"+"/"+"webcomponents-theming","sap_horizon",async()=>n.defaultThemeBase);r.p("@"+"u"+"i"+"5"+"/"+"w"+"e"+"b"+"c"+"o"+"m"+"p"+"o"+"n"+"e"+"n"+"t"+"s","sap_horizon",async()=>n.defaultTheme$1);var _=`.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host{height:var(--_ui5-v2-14-0-rc-7_group_header_list_item_height);background:var(--ui5-v2-14-0-rc-7-group-header-listitem-background-color);color:var(--sapList_TableGroupHeaderTextColor)}:host([wrapping-type="Normal"]){height:auto}:host([has-border]){border-bottom:var(--sapList_BorderWidth) solid var(--sapList_GroupHeaderBorderColor)}:host([actionable]:not([disabled])){cursor:default}.ui5-li-root.ui5-ghli-root{padding-top:.5rem;color:currentColor;font-size:var(--sapFontHeader6Size);font-weight:400;line-height:2rem;margin:0}.ui5-ghli-title{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:700;font-family:var(--sapFontHeaderFamily)}.ui5-li-content{width:100%}\n`;var w;(function(e){e["Group"]="Group";e["ListItem"]="ListItem";e["MenuItem"]="MenuItem";e["TreeItem"]="TreeItem";e["Option"]="Option";e["None"]="None"})(w||(w={}));var D=w;var T=this&&this.__decorate||function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i;return o>3&&i&&Object.defineProperty(t,r,i),i};var R;const I=100;const A=300;let H=R=class t extends n.ListItemBase{constructor(){super(...arguments);this.accessibleRole=D.ListItem;this.wrappingType="None";this.mediaRange="S"}get effectiveAccRole(){return o.n(this.accessibleRole)}get groupItem(){return true}get _pressable(){return false}get groupHeaderText(){return R.i18nBundle.getText(o.GROUP_HEADER_TEXT)}get defaultSlotText(){return this.textContent}get ariaLabelText(){return[this.textContent,this.accessibleName].filter(Boolean).join(" ")}get hasSubItems(){return this.subItems.length>0}onBeforeRendering(){super.onBeforeRendering();if(this.wrappingType==="Normal"){if(R.ExpandableTextTemplate){this.expandableTextTemplate=R.ExpandableTextTemplate}else{new Promise(function(t,r){e(["sap/esh/search/ui/thirdparty/_dynamics/ListItemStandardExpandableTextTemplate"],t,r)}).then(e=>{this.expandableTextTemplate=e.default})}}}get _maxCharacters(){return this.mediaRange==="S"?I:A}get _textContent(){return this.defaultSlotText||this.groupHeaderText||""}};T([r.s()],H.prototype,"accessibleName",void 0);T([r.s()],H.prototype,"accessibleRole",void 0);T([r.s()],H.prototype,"wrappingType",void 0);T([r.s()],H.prototype,"mediaRange",void 0);T([r.s({noAttribute:true})],H.prototype,"expandableTextTemplate",void 0);T([r.d()],H.prototype,"subItems",void 0);T([n.i("sap/esh/search/ui/gen/ui5/webcomponents")],H,"i18nBundle",void 0);H=R=T([r.m({tag:"ui5-li-group-header",languageAware:true,template:x,styles:[n.ListItemBase.styles,_]})],H);H.define();var O=H;function C(){return n.jsx("div",{class:{"ui5-di-rect":this.placement===s.On,"ui5-di-needle":this.placement!==s.On}})}r.p("@"+"ui5"+"/"+"webcomponents-theming","sap_horizon",async()=>n.defaultThemeBase);r.p("@"+"u"+"i"+"5"+"/"+"w"+"e"+"b"+"c"+"o"+"m"+"p"+"o"+"n"+"e"+"n"+"t"+"s","sap_horizon",async()=>n.defaultTheme$1);var E=`:host{position:absolute;pointer-events:none;z-index:99}:host([orientation="Vertical"]) .ui5-di-needle{width:.125rem;height:100%;inset-block:0;background:var(--sapContent_DragAndDropActiveColor)}:host([orientation="Vertical"]){margin-left:-.0625rem}:host([orientation="Horizontal"]) .ui5-di-needle{height:.125rem;width:100%;inset-inline:0;background:var(--sapContent_DragAndDropActiveColor)}:host([orientation="Horizontal"]){margin-top:-.0625rem}:host([orientation="Horizontal"][placement="Before"][first]){margin-top:.3125rem}:host([orientation="Horizontal"][placement="After"][last]){margin-top:-.3125rem}:host([orientation="Vertical"]) .ui5-di-needle:before{left:-.1875rem;content:"";position:absolute;width:.25rem;height:.25rem;border-radius:.25rem;border:.125rem solid var(--sapContent_DragAndDropActiveColor);background-color:#fff;pointer-events:none}:host([orientation="Horizontal"]) .ui5-di-needle:before{top:-.1875rem;content:"";position:absolute;width:.25rem;height:.25rem;border-radius:.25rem;border:.125rem solid var(--sapContent_DragAndDropActiveColor);background-color:#fff;pointer-events:none}:host .ui5-di-rect{border:.125rem solid var(--sapContent_DragAndDropActiveColor);position:absolute;inset:0}:host .ui5-di-rect:before{content:" ";position:absolute;inset:0;background:var(--sapContent_DragAndDropActiveColor);opacity:.05}\n`;var j=this&&this.__decorate||function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i;return o>3&&i&&Object.defineProperty(t,r,i),i};let B=class e extends r.b{get _positionProperty(){if(this.orientation===l.Vertical){return"left"}return"top"}constructor(){super();this.targetReference=null;this.ownerReference=null;this.placement="Before";this.orientation="Vertical"}onAfterRendering(){if(!this.targetReference||!this.ownerReference){Object.assign(this.style,{display:"none"});return}const{left:e,width:t,right:r,top:n,bottom:o,height:i}=this.targetReference.getBoundingClientRect();const{top:a,height:c}=this.ownerReference.getBoundingClientRect();const p={display:"",[this._positionProperty]:"",width:"",height:""};let d=0;let h=false;let u=false;if(this.orientation===l.Vertical){switch(this.placement){case s.Before:d=e;break;case s.On:p.width=`${t}px`;d=e;break;case s.After:d=r;break}p.height=`${i}px`}if(this.orientation===l.Horizontal){switch(this.placement){case s.Before:d=n;break;case s.On:p.height=`${i}px`;d=n;break;case s.After:d=o;break}p.width=`${t}px`;d-=a;if(d<=0){u=true}if(d>=c){h=true}}p[this._positionProperty]=`${d}px`;this.toggleAttribute("first",u);this.toggleAttribute("last",h);Object.assign(this.style,p)}};j([r.s({type:Object})],B.prototype,"targetReference",void 0);j([r.s({type:Object})],B.prototype,"ownerReference",void 0);j([r.s()],B.prototype,"placement",void 0);j([r.s()],B.prototype,"orientation",void 0);B=j([r.m({tag:"ui5-drop-indicator",renderer:n.y,styles:E,template:C})],B);B.define();var L=B;function k(){return n.jsxs(n.Fragment,{children:[this.hasHeader&&n.jsxs(O,{wrappingType:this.wrappingType,focused:this.focused,part:"header",accessibleRole:D.ListItem,children:[this.hasFormattedHeader?n.jsx("slot",{name:"header"}):this.headerText,n.jsx("div",{role:"list",slot:"subItems","aria-owns":`${this._id}-content`,"aria-label":this.headerText})]}),n.jsxs("div",{class:"ui5-group-li-root",onDragEnter:this._ondragenter,onDragOver:this._ondragover,onDrop:this._ondrop,onDragLeave:this._ondragleave,id:`${this._id}-content`,children:[n.jsx("slot",{}),n.jsx(L,{orientation:"Horizontal",ownerReference:this})]})]})}r.p("@"+"ui5"+"/"+"webcomponents-theming","sap_horizon",async()=>n.defaultThemeBase);r.p("@"+"u"+"i"+"5"+"/"+"w"+"e"+"b"+"c"+"o"+"m"+"p"+"o"+"n"+"e"+"n"+"t"+"s","sap_horizon",async()=>n.defaultTheme$1);var z=`.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host{height:var(--_ui5-v2-14-0-rc-7_group_header_list_item_height);background:var(--ui5-v2-14-0-rc-7-group-header-listitem-background-color);color:var(--sapList_TableGroupHeaderTextColor)}.ui5-group-li-root{width:100%;height:100%;position:relative;box-sizing:border-box;padding:0;margin:0;list-style-type:none}\n`;var P=this&&this.__decorate||function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i;return o>3&&i&&Object.defineProperty(t,r,i),i};let N=class e extends r.b{constructor(){super();this.wrappingType="None";this.focused=false;this._dragAndDropHandler=new m(this,{getItems:()=>this.items,getDropIndicator:()=>this.dropIndicatorDOM,filterPlacements:this._filterPlacements.bind(this)})}get groupHeaderItem(){return this.shadowRoot.querySelector("[ui5-li-group-header]")}get hasHeader(){return!!this.headerText||this.hasFormattedHeader}get hasFormattedHeader(){return!!this.header.length}get isListItemGroup(){return true}get dropIndicatorDOM(){return this.shadowRoot.querySelector("[ui5-drop-indicator]")}_ondragenter(e){this._dragAndDropHandler.ondragenter(e)}_ondragleave(e){this._dragAndDropHandler.ondragleave(e)}_ondragover(e){this._dragAndDropHandler.ondragover(e)}_ondrop(e){this._dragAndDropHandler.ondrop(e)}_filterPlacements(e,t,r){if(r===t){return e.filter(e=>e!==s.On)}return e}getFocusDomRef(){return this.groupHeaderItem||this.items.at(0)}};P([r.s()],N.prototype,"headerText",void 0);P([r.s()],N.prototype,"headerAccessibleName",void 0);P([r.d({default:true,invalidateOnChildChange:true,type:HTMLElement})],N.prototype,"items",void 0);P([r.s()],N.prototype,"wrappingType",void 0);P([r.s({type:Boolean})],N.prototype,"focused",void 0);P([r.d({type:HTMLElement})],N.prototype,"header",void 0);N=P([r.m({tag:"ui5-li-group",renderer:n.y,languageAware:true,template:k,styles:[z]}),n.l("move-over",{bubbles:true,cancelable:true}),n.l("move",{bubbles:true})],N);N.define();const V=e=>"isListItemGroup"in e;var M=N;t.DragAndDropHandler=m;t.DropIndicator=L;t.ListItemAccessibleRole=D;t.ListItemGroup=M;t.ListItemGroupHeader=O;t.isInstanceOfListItemGroup=V;t.k=g});
//# sourceMappingURL=ListItemGroup.js.map