/*
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/base/Log","sap/zen/dsh/utils/dispatcher","sap/sac/df/firefly/library"],function(jQuery,Log,Dispatcher){Log.info("Load bi_mobile_util");sap.zen.dsh.sapbi_showUI5Measures=false;sap.zen.dsh.sapbi_statisticsStepCounter=0;sap.zen.dsh.sapbi_zen_recordrequests=false;sap.zen.dsh.sapbi_dummy={};sap.zen.dsh.sapbi_zen_slvLoaded=true;sap.zen.dsh.sapbi_getslv=function(){return sap.zen.dsh.sapbi_dummy};sap.zen.dsh.sapbi_loadUi5=function(e,s){function a(){if(sap.zen.dsh.sapbi_isMobile===true){jQuery.sap.initMobile({preventScroll:true,viewport:false})}sap.ui.getCore().getLibraryResourceBundle("sap.ui.core");function e(){if(!sap.ui.getCore().isThemeApplied()){setTimeout(e,100)}else{if(sap.ui.loader&&!require.config){sap.ui.loader.config({noConflict:true})}Dispatcher.resumeDispatching()}}e()}if(!sap.ui||!sap.ui.core){Dispatcher.pauseDispatching();window["sap-ui-config"]={onInit:a};var r=document.createElement("script");r.type="text/javascript";r.src=e;r.charset="utf-8";r.async=false;for(var i in s){if(Object.prototype.hasOwnProperty.call(s,i)){r.setAttribute(i,s[i])}}r.setAttribute("data-sap-ui-xx-bindingSyntax","complex");document.getElementsByTagName("head")[0].appendChild(r)}};function sapbi_snippet(json,tag){if(Dispatcher.isPaused(function(){sapbi_snippet(json,tag)})){return}var callback=function(){sap.zen.dsh.sapbi_registerHandlers(arguments);sap.zen.dsh.sapbi_phx(tag,eval("("+json+")"))};Log.error("Unexpected require call");require(sap.zen.dsh.sapbi_page.m_required,callback)}sap.zen.dsh.sapbi_snippet_ROOT=function(e){sapbi_snippet(e,"sapbi_snippet_ROOT")};sap.zen.dsh.sapbi_snippet_ROOT_DIALOG=function(e){sapbi_snippet(e,"sapbi_snippet_ROOT_DIALOG")};sap.zen.dsh.sapbi_registerHandlers=function(e){for(var s=0;s<e.length;s++){var a=e[s];if(a&&a.getType){if(a.getDecorator){Dispatcher.addHandlers(a.getType(),a,a.getDecorator())}else{Dispatcher.addHandlers(a.getType(),a)}}}};function sapbi_phx_process_json(e,s){var a=function(s){s.placeAt(e,"only")};Dispatcher.dispatch(s,a);sap.zen.dsh.getLoadingIndicator().hide()}sap.zen.dsh.iNumberOfJavascriptErrorsLogged=0;sap.zen.dsh.iMaxNumberOfJavascriptErrorsLogged=10;function AsyncHandleJavascriptError(e){if(sap.zen.dsh.sapbi_page.m_hasSendLock){window.setTimeout(function(){AsyncHandleJavascriptError(e)},100);return}sap.zen.MessageViewHandler.createMessage(sap.zen.MessageViewHandler.error,e,"Please contact your application designer");sap.zen.MessageViewHandler.logMessage(sap.zen.MessageViewHandler.error,"A JavaScript error occurred",e)}sap.zen.dsh.sapbi_phx=function(e,s){if(sap.zen.dsh.sapbi_page.m_profileMode){jQuery.sap.measure.setActive(true)}var a="SHOWDEBUGJSON";var r=window.location.search.indexOf(a);if(r!==-1||sap.zen.dsh.sapbi_page.m_isDebugMode){Dispatcher.logJson(s,r!==-1,e)}jQuery.sap.measure.start("zen dispatch","dispatch");if(jQuery.browser.msie){window.onerror=function(e,s,a,r){if(sap.zen.dsh.iNumberOfJavascriptErrorsLogged<sap.zen.dsh.iMaxNumberOfJavascriptErrorsLogged){var i="";try{i=arguments.callee.caller}catch(e){i="Unknown function name (strict mode)"}var n=i.toString();if(!s){s="N/A"}if(!a){a="N/A"}n=(n+"").replace(/\r/g," ");n=(n+"").replace(/\n/g," ");var p="Error message: "+e+" Line Number: "+a+" Pos: "+r+" Function: "+n+" URL: "+s;if(window.eclipse_sendZenUrl){window.eclipse_sendZenUrl("zen://message?severity=E&message="+p)}Log.error("A JavaScript error occurred. "+p);if(sap&&sap.zen&&sap.zen.MessageViewHandler){AsyncHandleJavascriptError(p)}sap.zen.dsh.getLoadingIndicator().hide();sap.zen.dsh.iNumberOfJavascriptErrorsLogged++}return false};sapbi_phx_process_json(e,s)}else{try{sapbi_phx_process_json(e,s)}catch(e){if(sap.zen.dsh.iNumberOfJavascriptErrorsLogged<sap.zen.dsh.iMaxNumberOfJavascriptErrorsLogged){var i="A JavaScript error occurred. ";if(typeof e==="string"){i+=e}else{i+=e.message+" ";if(e.stack){i+=e.stack+" "}if(e.sourceURL){i+=e.sourceURL+" "}if(e.line){i+=e.line+" "}if(e.lineNumber){i+=e.lineNumber+" "}}i=(i+"").replace(/\r/g," ");i=(i+"").replace(/\n/g," ");Log.error(i);if(sap.zen.designmode){window.eclipse_logJavaScriptMessage(i,"error")}if(sap&&sap.zen&&sap.zen.MessageViewHandler){sap.zen.dsh.sapbi_page.m_hasSendLock=false;sap.zen.MessageViewHandler.createMessage(sap.zen.MessageViewHandler.error,i,"Please contact your application designer");sap.zen.MessageViewHandler.logMessage(sap.zen.MessageViewHandler.error,"A JavaScript error occurred",i)}sap.zen.dsh.getLoadingIndicator().hide();sap.zen.dsh.iNumberOfJavascriptErrorsLogged++}}}jQuery.sap.measure.end("zen dispatch")};if(typeof sap.zen.dsh.sapbi_ParameterList!=="undefined"){sap.zen.dsh.sapbi_ParameterList.prototype.getIndices=function(e){var s=e.toUpperCase();var a=[];var r=0;var i;for(i in this.m_list[s]){if(!isNaN(i)){var n=parseInt(i,10);a[r++]=n}}return a}}});
//# sourceMappingURL=bi_phx.js.map