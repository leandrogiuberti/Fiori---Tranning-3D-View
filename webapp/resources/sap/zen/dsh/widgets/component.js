/*
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/base/Log","sap/zen/dsh/utils/request","sap/zen/dsh/utils/BaseHandler"],function(jQuery,e,t){"use strict";var a=function(e){this.owner=e;this.init=function(){};this.componentDeleted=function(){};this.beforeUpdate=function(){};this.afterUpdate=function(){};var a=false;this.updateProperty=function(e,t){var a=this[e];if(a){var n=t[e];a.call(this,n)}};this.dispatchProperties=function(e,t){this.beforeUpdate();a=true;var n;if(e){for(n in e){this.oControlProperties[n]=e[n];this.updateProperty(n,e)}}this.oComponentProperties=t;for(n in t){this.updateProperty(n,t)}a=false;this.afterUpdate()};this.fireEvent=function(e){if(!a){if(typeof sap.zen.dsh.DSH_deployment=="undefined"){var n=[["EVENT_NAME",e,0],["BI_COMMAND_TYPE","",0],["COMPONENT_NAME",this.oComponentProperties.id,0],["COMMAND_INTERPRETER","BIAL",0]];t.zenSendCommandArrayWoEventWZenPVT(n)}else{var r=this.oComponentProperties.id;var i="Buddha";if(this.oControlProperties.pureId){i=this.oControlProperties.buddhaId;r=this.oControlProperties.pureId}var s=r+".runScript('"+e+"');";sap.zen.dsh.putInQueue(function(){sap.zen.dsh[i].exec(s)})}}};this.getTargetParam=function(){return"TARGET_ITEM_REF"};function n(e){var t=new sap.zen.dsh.sapbi_Command("UPDATE_PROPERTIES");t.addParameter(new sap.zen.dsh.sapbi_Parameter(this.getTargetParam(),this.oComponentProperties.id));var a=new sap.zen.dsh.sapbi_Parameter("CHANGES","");var n=new sap.zen.dsh.sapbi_ParameterList;for(var r=0;r<e.length;r++){var i=e[r];var s=this[i]();if(Array.isArray(s)||typeof s=="object"){s=JSON.stringify(s)}n.addParameter(new sap.zen.dsh.sapbi_Parameter(i,s))}a.setChildList(n);t.addParameter(a);return t}this.firePropertiesChanged=function(e){if(!a){if(typeof sap.zen.dsh.DSH_deployment=="undefined"){var r=n.call(this,e);t.zenSendCommandArrayWoEventWZenPVT(r,false,true)}else{var i=[];for(var s=0;s<e.length;s++){var o=e[s];var l=this[o]();i.push(o);i.push(l)}var d=this.oComponentProperties.id;var p="Buddha";if(this.oControlProperties.pureId){p=this.oControlProperties.buddhaId;d=this.oControlProperties.pureId}sap.zen.dsh.putInQueue(function(){sap.zen.dsh[p].exec(d+".doSDKPVT("+JSON.stringify(i)+");")})}}};this.firePropertiesChangedAndEvent=function(e,r,i){if(!a){if(typeof sap.zen.dsh.DSH_deployment=="undefined"){var s=n.call(this,e);if(i){s.addParameter(new sap.zen.dsh.sapbi_Parameter("PREVENT_UNDO","X"))}var o=new sap.zen.dsh.sapbi_CommandSequence;o.addCommand(s);var l=[["EVENT_NAME",r,0],["BI_COMMAND_TYPE","",0],["COMPONENT_NAME",this.oComponentProperties.id,0],["COMMAND_INTERPRETER","BIAL",0]];var d=sap.zen.dsh.sapbi_createParameterList(l);if(i){d.addParameter(new sap.zen.dsh.sapbi_Parameter("PREVENT_UNDO","X"))}o.addCommand(d);t.zenSendCommandArrayWoEventWZenPVT(o,false,true)}else{this.firePropertiesChanged(e);this.fireEvent(r)}}};this.$=function(){return this.owner.$()};this.ztlCallFunction=function(e){if(e===undefined){return this._ztlFunction}else{this._ztlFunction=e;return this}};this.ztlCallPayload=function(e){if(e===undefined){return this._ztlPayload}else{this._ztlPayload=e;return this}};this.ztlCallResult=function(e){if(e!==undefined&&this._ztlCallCallback){this._ztlCallCallback.call(this,JSON.parse(e));return this}};this.callZTLFunction=function(e,t){var a=Array.prototype.slice.apply(arguments);a=a.slice(2);this.ztlCallPayload(JSON.stringify(a)).ztlCallFunction(e);this._ztlCallCallback=t;this.firePropertiesChangedAndEvent(["ztlCallPayload","ztlCallFunction"],"onZtlCall")};this.callZTLFunctionNoUndo=function(e,t){var a=Array.prototype.slice.apply(arguments);a=a.slice(2);this.ztlCallPayload(JSON.stringify(a)).ztlCallFunction(e);this._ztlCallCallback=t;this.firePropertiesChangedAndEvent(["ztlCallPayload","ztlCallFunction"],"onZtlCall",true)}};a.makeSubClass=function(e){function t(t,a){var n=t.split(".");var r=window;for(var i=0;i<n.length-1;i++){var s=n[i];var o=r[s]||{};r[s]=o;r=o}var l=n[i];var d=function(){e.apply(this,arguments);a.apply(this,arguments)};r[l]=d;return d}return t};a.subclass=a.makeSubClass(a);return a});
//# sourceMappingURL=component.js.map