/*!
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/sac/df/thirdparty/lodash","sap/zen/dsh/utils/BaseHandler","sap/zen/dsh/widgets/dataMappers/SDKChartDataMapper"],function(jQuery,e,s,i){"use strict";function n(){i.apply(this,arguments);var e=true;var s=1;this.getAnalysisAxisValue=function(){return this.analysisAxisValue};this.setEmptyDimension=function(e,s,i){if(s=="COLUMNS"&&this._getColDimensionCounter()==0){var n={};n.name="";n.type="Dimension";n.values=[""];i.data.push(n)}else if(s=="ROWS"&&this._getRowDimensionCounter()==0){n={};n.name="";n.type="Dimension";n.values=[""];i.data.push(n)}};this.createAnalysisAxis=function(i,n,a,t,r){var u=[];if(this.getMeasureAxis()=="COLUMNS")r++;t++;var o=this.isMeasuresOnlyCheck(i);this.setDimensionsOnAxis(1,i,u,"COLUMNS",r,i.axis_columns,o);if(u.length!=0&&u[0].data[0]!=undefined&&u[0].data[0].values.length>1)s=u[0].data[0].values.length;this.setDimensionsOnAxis(2,i,u,"ROWS",t,i.axis_rows,o);if(this.getMeasureAxis()=="COLUMNS"&&i.dimensions[0].containsMeasures||this.getMeasureAxis()=="ROWS"&&i.dimensions[r].containsMeasures){e=false;if(u[0].data[0]!=undefined)s=u[0].data[0].values.length;else s=1}return u};this.createMeasureValues=function(i,n,a){var t=[];var r={};r.index=1;r.data=[];var u={};var o={};var h=this;jQuery.each(n,function(n,t){var r=t.key;o[r]=t.text;var l=h.getValues(i.data,a,n,false,s,1,e,true);if(!u[r]){u[r]=l}else{h.mergeValues(u[r],l,a)}});jQuery.each(u,function(e,s){var i={};i.type="Measure";i.name=o[e];i.values=s;r.data.push(i)});t.push(r);return t};this.getEmptyDimension=function(){var e={};e.name="";e.type="Dimension";e.values=[""];return e};this.isMeasuresOnlyCheck=function(e){if(e.dimensions.length==1){if(e.dimensions[0].containsMeasures==true){return true}}return false};this.setDimensionsOnAxis=function(e,s,i,n,a,t,r,u){var o={};var h=[];o.index=e;o.data=[];var l=-1;var d=0;var f=-1;var m=this;jQuery.each(t,function(e,i){if(f==-1||i[d]==f){jQuery.each(i,function(e,i){if(i!=-1&&(!s.dimensions[e].containsMeasures||u)){if(f!=-1&&f)if(l==-1)l=e;if(h[e-l]==undefined)h[e-l]=[];var n=m.getDimensionLabel(s.dimensions[e].members[i]);h[e-l].push(n)}else if(s.dimensions[e].containsMeasures&&f==-1){d=e;f=i}})}});for(var v=0;v<s.dimensions.length;v++){var c=s.dimensions[v];if(c.containsMeasures&&!u||c.axis!=n){continue}var p={};p.name=c.text;p.type="Dimension";p.values=h[v-l];o.data.push(p)}this.setEmptyDimension(e,n,o);if(o.data.length==0){var g=this.getEmptyDimension();o.data.push(g)}i.push(o)}}return n});
//# sourceMappingURL=SDKMultiPieDataMapper.js.map