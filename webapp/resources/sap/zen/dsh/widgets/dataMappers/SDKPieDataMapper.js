/*!
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/sac/df/thirdparty/lodash","sap/zen/dsh/utils/BaseHandler","sap/zen/dsh/widgets/dataMappers/SDKChartDataMapper"],function(jQuery,s,i,e){"use strict";function n(){e.apply(this,arguments);this.measuresOnAxis=true;var s=true;this.setEmptyDimension=function(){};this.createAnalysisAxis=function(i,e,n,t,a){var r=[];this.iDimensionsOnRows=1;var o=this.getDataMapperHelper();if(this.getMeasureAxis()=="COLUMNS")a++;else t++;if(this.isMeasuresOnlyCheck(i)){if(this.getMeasureAxis()!="ROWS"){o.setMeasuresOnAxis(1,i,r);this.iDimensionsOnCols=i.axis_columns.length}else{o.setMeasuresOnAxis(1,i,r);this.iDimensionsOnRows=this.iDimensionsOnCols=i.axis_rows.length}}else if(t>=1&&a==0){this.setDimensionsOnAxis(1,i,r,"ROWS",t,i.axis_rows,false);this.iDimensionsOnRows=this.iDimensionsOnCols=this.getIDimensionOnCols(i,r,0);this.measuresOnAxis=false;this.isRowsOnly=true}else if(t==0&&a>=1){this.setDimensionsOnAxis(1,i,r,"COLUMNS",a,i.axis_columns,false);this.iDimensionsOnRows=this.iDimensionsOnCols=this.getIDimensionOnCols(i,r,0);this.measuresOnAxis=false}else{if(this.getMeasureAxis()!="ROWS"){this.setDimensionsOnAxis(1,i,r,"ROWS",t,i.axis_rows,true)}else{this.setDimensionsOnAxis(1,i,r,"COLUMNS",a,i.axis_columns,true)}this.isMultiArray=true;this.iDimensionsOnCols=this.getIDimensionOnCols(i,r,0)}if(this.getMeasureAxis()=="COLUMNS"&&i.dimensions[0].containsMeasures||this.getMeasureAxis()=="ROWS"&&i.dimensions[a].containsMeasures){s=false;this.isRowsOnly=false}return r};this.setDimensionsOnAxis=function(s,i,e,n,t,a,r){var o={};var u=[];o.index=s;o.data=[];var h=-1;var l=0;var m=-1;var f=this;jQuery.each(a,function(s,e){if(m==-1||e[l]==m){jQuery.each(e,function(s,e){if(e!=-1&&(!i.dimensions[s].containsMeasures||r)){if(m!=-1&&m)if(h==-1)h=s;if(u[s-h]==undefined)u[s-h]=[];var n=f.getDimensionLabel(i.dimensions[s].members[e]);u[s-h].push(n)}else if(i.dimensions[s].containsMeasures&&m==-1){l=s;m=e}})}});for(var O=0;O<i.dimensions.length;O++){var d=i.dimensions[O];if(d.containsMeasures&&!r||d.axis!=n){continue}var c={};c.name=d.text;c.type="Dimension";c.values=u[O-h];o.data.push(c)}this.setEmptyDimension(s,n,o);if(o.data.length==0){var D=this.getEmptyDimension();o.data.push(D)}e.push(o)};this.getEmptyDimension=function(){var s={};s.name="";s.type="Dimension";s.values=[""];return s};this.getIDimensionOnCols=function(s,i,e){var n=0;for(var t=0;t<s.dimensions.length;t++){var a=s.dimensions[t];if(a.containsMeasures==true){n=i[e].data[0].values.length}}return n};this.isMeasuresOnlyCheck=function(s){if(s.dimensions.length==1){if(s.dimensions[0].containsMeasures==true){return true}}return false};this.createMeasureValues=function(i,e,n){var t=[];var a={};a.index=1;a.data=[];var r=e[0];var o={};o.type="Measure";o.key=r.key;if(i.dimensions.length===1&&i.dimensions[0].containsMeasures){o.name=""}else{o.name=r.text}o.values=this.getValues(i.data,n,0,this.measuresOnAxis,this.iDimensionsOnCols,this.iDimensionsOnRows,s,this.isMultiArray,this.isRowsOnly);a.data.push(o);t.push(a);return t}}return n});
//# sourceMappingURL=SDKPieDataMapper.js.map