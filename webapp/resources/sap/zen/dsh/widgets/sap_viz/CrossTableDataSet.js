/*
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/zen/dsh/widgets/sap_viz/typeUtils","sap/zen/dsh/widgets/sap_viz/objectUtils","sap/zen/dsh/widgets/sap_viz/AnalysisAxis","sap/zen/dsh/widgets/sap_viz/MeasureValuesGroup"],function(e,a,s,t,i){"use strict";e.info("Load CrossTableDataSet");var r="analysisAxis";var n="measureValuesGroup";function o(){this._analysisAxis=[];this._measureValuesGroup=[];this._dataSet={};this._measures=[];this._dimensions=[];this._emptyDataset=false;this._infos={}}o.prototype.data=function(e){if(!arguments.length){var a=s.clone(this._dataSet);if(this._emptyDataset){this.cleanDataset(a)}return a}this._analysisAxis=[];this._measureValuesGroup=[];this._measures=[];this._dimensions=[];this._dataSet=s.clone(e);this.init(this._dataSet);this._measures=this.getMetaNames(e,n);this._dimensions=this.getMetaNames(e,r);this._infos={};return this};o.prototype.setData=function(e){this.data(e)};o.prototype.getMetaNames=function(e,s){if(e==undefined){return}var t=[];s=e[s];if(s===undefined||!a.isArray(s)){return t}for(var i=0;i<s.length;i++){var r=s[i].data;if(r===undefined||!a.isArray(r)){continue}for(var n=0;n<r.length;n++){if(r[n].name!==undefined){var o={name:r[n].name,index:i,location:n};t.push(o)}}}return t};o.prototype.init=function(a){if(!a||!a[r]&&!a[n]){return}var s=[1,1];var o=false;l(a);var u=a[r];var h=0;var f,d,v;if(u){if(u.length>2){e.error("Crosstable error")}for(;h<u.length;h++){var p=u[h];var _=p["index"];if(_!==1&&_!==2){e.error("Crosstable error")}if(this._analysisAxis[_-1]){e.error("Crosstable error")}var m=new t(p["data"]);s[_-1]=m.validate();this._analysisAxis[_-1]=m}if(s[0]===0){s[1]=0;o=true}f=a[n];if(f){for(h=0;h<f.length;h++){d=f[h];var g=d["index"];if(this._measureValuesGroup[g-1]){e.error("Crosstable error")}v=new i(d["data"]);v.validate(s);this._measureValuesGroup[g-1]=v}}}else{f=a[n];for(h=0;h<f.length;h++){d=f[h];v=new i(d["data"]);if(h===0){s=v.validate()}else{v.validate(s)}this._measureValuesGroup[d["index"]-1]=v}}this._emptyDataset=o};var u=function(e){for(var a=0;a<e.length;a++){if(e[a].values==null){e[a].values=[]}}};var l=function(e){if(e[r]){var a=e[r];for(var s=0;s<a.length;s++){u(a[s].data)}}if(e[n]){var t=e[n];for(s=0;s<t.length;s++){u(t[s].data)}}};return o});
//# sourceMappingURL=CrossTableDataSet.js.map