/*
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/base/Log","sap/ui/core/HTML"],function(jQuery,t,e){"use strict";var s=e.extend("com.sap.ip.bi.FormattedTextView",{metadata:{properties:{height:"sap.ui.core.CSSSize",width:"sap.ui.core.CSSSize",aStyleClasses:"string[]"}},initDesignStudio:function(){this._ftv={};this._ftv.ATTRIBS={"span::class":1,"div::class":1,"div::id":1,"span::id":1,"embed::data-index":1};this._ftv.ELEMENTS={abbr:1,acronym:1,address:1,blockquote:1,br:1,cite:1,code:1,dfn:1,div:1,em:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,kbd:1,p:1,pre:1,q:1,samp:1,strong:1,span:1,var:1,dl:1,dt:1,dd:1,ol:1,ul:1,li:1,embed:1}},fnSanitizeAttribs:function(e,s){for(var i=0;i<s.length;i+=2){var a=e+"::"+s[i];if(this._ftv.ATTRIBS[a]){if(e==="embed"){var n=/^[0-9]*$/;if(!s[i+1].match(n)){return null}}}else{var r="<"+e+"> with attribute ["+s[i]+"='"+s[i+1]+"'] is not allowed and cut";t.warning(r,this);s[i+1]=null}}return s},fnPolicy:function(e,s){if(this._ftv.ELEMENTS[e]){var i=jQuery.proxy(this.fnSanitizeAttribs,this);return i(e,s)}else{var a="<"+e+"> is not allowed and cut (and its content)";t.warning(a,this)}},renderer:{},setHtmlText:function(t){this.setContent("",true);var e="<div>"+t+"</div>";var s="";var i=jQuery.proxy(this.fnPolicy,this);try{s=jQuery.sap._sanitizeHTML(e,{tagPolicy:i})}catch(t){}this.setContent(s,true)},setContent:function(t,s){var i=this.getSanitizeContent();this.setSanitizeContent(!s&&i);var a=sap.ui.require("sap/base/security/encodeXML");var n=a(t);e.prototype.setContent.call(this,n);this.setSanitizeContent(i)},getHtmlText:function(){var t=this.getContent();t=t.substr(5);t=t.substring(0,t.length-6);return t},addStyleClass:function(t){if(!this.getAStyleClasses()){this.setAStyleClasses([])}var e=this.getAStyleClasses();if(e.indexOf(t)===-1){e.push(t)}this.setAStyleClasses(e)},removeStyleClass:function(t){if(!this.getAStyleClasses()){this.setAStyleClasses([])}var e=this.getAStyleClasses();if(e.indexOf(t)!==-1){e.splice(e.indexOf(t),1)}this.setAStyleClasses(e)},onAfterRendering:function(t){e.prototype.onAfterRendering.apply(this,[t]);this.$().addClass("sapUiFTV");var s=this.getHeight();var i=this.$();if(s!=="auto"){i.height(s)}var a=this.getWidth();if(a!=="auto"){i.width(a)}if(this.getAStyleClasses()&&this.getAStyleClasses().length>0){for(var n=0;n<this.getAStyleClasses().length;n++){i.addClass(this.getAStyleClasses()[n])}}}});return s});
//# sourceMappingURL=formattedTextView.js.map