/*!
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/zen/dsh/utils/BaseHandler","sap/zen/commons/layout/MatrixLayout","sap/zen/commons/Padding"],function(t,r,n){"use strict";var e=t.dispatcher;var a=function(){t.apply(this,arguments);var r=this;this.createAndAdd=function(t,r,n,e,i){var s=o();a(s,r);e(s,i);return s};this.updateComponent=function(t,r){if(r){a(t,r)}return t};this.doD4LStuff0=function(){};this.doD4LStuff1=function(){};function a(t,n){if(n){var a=t.getContent()[0];var o=n.content;if(o){r.updateChildren(o,t,function(t,n){r.doD4LStuff0(a,t);e.insertIntoAbsoluteLayoutContainer(a,t,n)},function(t){a.removeContent(t)})}}}this.applyForChildren=function(t,r){var n={};var e=t.getContent()[0];var a=e.getContent();for(var o=0;o<a.length;o++){var i=a[o];if(i){r(i,o)}}return n};var o=function(){var t=new sap.zen.commons.layout.MatrixLayoutCell;r.doD4LStuff1(t);t.setVAlign("Top");t.setPadding(n.None);var e=r.createAbsoluteLayout();e.addStyleClass("zenborder");t.addContent(e);return t};this.getType=function(){return"gridcell"};this.getDecorator=function(){return"GridCellDecorator"}};var o=new a;t.dispatcher.addHandlers(o.getType(),o);var i=function(){t.apply(this,arguments);var r=this;this.createAndAdd=function(t,r,e,a,o){var i=new sap.zen.commons.layout.MatrixLayoutCell;n(i,r);a(i,o);return i};this.updateComponent=function(t,r){if(r){n(t,r)}return t};this.doD4LStuff=function(){};this.doD4LStuff1=function(){};function n(t,n){if(n){var e=n.content;if(e){r.updateChildren(e,t,function(n){r.doD4LStuff(n);t.addContent(n)},function(r){t.removeContent(r)})}}}this.applyForChildren=function(t,r){var n={};var e=t.getContent();for(var a=0;a<e.length;a++){var o=e[a];if(o){r(o,a)}}return n};this.getType=function(){return"gridcellsimple"};this.getDecorator=function(){return"GridCellDecorator"}};var s=new i;t.dispatcher.addHandlers(s.getType(),s);sap.zen.dsh.sapbi_registerHandlers([o,s]);var u=function(){t.apply(this,arguments);var n=this;var a=function(t){t.getParent().removeCell(t)};this.doD4LStuff0=function(){return false};this.doD4LStuff1=function(){};function o(t,r,e,o){n.updateChildren(r.content,t,function(r,e){var a=Math.floor(e/o);var i=t.getRows()[a];if(!n.doD4LStuff0(r,t,i,e)){i.addCell(r)}},a);n.doD4LStuff1(t)}this.addD4LStyleClassToRow=function(){};this.addD4LStyleClassToTable=function(){};this.createAndAdd=function(n,e,a,l,f){var d=e.rows;var v=e.cols;var h=-1;var c=-1;var g=i(d);var p=s(v);var C;if(d!=null){h=d.length}if(v!=null){c=v.length}var y=e["id"];var w=new r({id:y,layoutFixed:false,width:"100%",height:"100%"});this.addD4LStyleClassToTable(w);w.newGrid=true;l(w,f);t.dispatcher.updateComponentProperties(w,a);for(C=0;C<h;C++){var m=new sap.zen.commons.layout.MatrixLayoutRow;this.addD4LStyleClassToRow(m);u(m,g[C]);w.addRow(m)}if(c!==-1){w.setColumns(c);var L=[];for(C=0;C<c;C++){L[C]=p[C]+"%"}w.setWidths(L)}o(w,e,a,c);return w};this.update=function(t,r,n){if(!t){return}if(!r){return}var l=t;var f;var d=r.rows;var v=r.cols;if(d||v){var h=l.getRows().length;var c=d.length;var g=v.length;var p=i(d);for(var C=0;C<h;C++){f=l.getRows()[C];u(f,p[C])}for(C=h;C<c;C++){f=new sap.zen.commons.layout.MatrixLayoutRow;this.addD4LStyleClassToRow(f);l.addRow(f);u(f,p[C])}for(C=h-1;C>=c;C--){var y=l.getRows()[C].getCells();for(var w=0;w<y.length;w++){e.addTransferControl(y[w],a)}l.removeRow(C)}var m=s(v);var L=[];for(var D=0;D<v.length;D++){L[D]=m[D]+"%"}l.setWidths(L);l.setColumns(v.length);o(t,r,n,g)}};this.applyForChildren=function(t,r){var n=t.getRows();var e;var a;for(e=0;e<n.length;e++){var o=n[e].getCells();for(a=0;a<o.length;a++){var i=o[a];r(i)}}};var i=function(t){var r=null;if(t!=null){var n=t.length;var e=[];for(var a=0;a<n;a++){e[a]=parseInt(t[a].row.height,10)}r=f(e)}return r};var s=function(t){var r=null;if(t!=null){var n=t.length;var e=[];for(var a=0;a<n;a++){e[a]=parseInt(t[a].col.width,10)}r=f(e)}return r};var u=function(t,r){if(r){t.setHeight(r+"%")}else{t.setHeight("100%")}};function l(t){if(t>=0){return Math.floor(t)}else{return-1*Math.floor(-1*t)}}var f=function(t){var r=[];var n=0;var e;var a=0;for(e=0;e<t.length;e++){n+=t[e]}var o=100/n;n=0;for(e=0;e<t.length-1;e++){var i=t[e]*o;var s=Math.round(i);a+=i-s;var u=l(a);r[e]=s+u;n+=r[e];a=a-u}r[t.length-1]=100-n;return r};this.testAccessor={getRowHeightsInPercent:i,getColumnWidthsInPercent:s,convertRelativeGridSizesToPercentages:f};this.getDecorator=function(){return"GridDecorator"};this.getType=function(){return"gridlayout"}};var l=new u;t.dispatcher.addHandlers(l.getType(),l);return l});
//# sourceMappingURL=gridlayout_handler.js.map