/*
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/sac/df/thirdparty/lodash","sap/zen/dsh/utils/BaseHandler","sap/m/IconTabBar"],function(jQuery,_,BaseHandler,IconTabBar){"use strict";var TabStripHandler=function(){BaseHandler.apply(this,arguments);var that=this;this.update=function(e,a){if(a){init(e,a)}return e};var wrapFunctions=function(e){if(BaseHandler.dispatcher.isMainMode()){e.getSelectedIndex=function(){var e=this.getItems();for(var a=0;a<e.length;a++){if(e[a].getId()===this.getSelectedKey()){return a}}return 0};e.setSelectedIndex=function(e){var a=this.getItems();this.setSelectedKey(a[e].getId())}}};this.createAndAdd=function(e,a,t,n,i){var r=a["id"];var s=this.createDefaultProxy(r);wrapFunctions(s);if(BaseHandler.dispatcher.isMainMode()){s.setExpandable(false)}s.orgOnAfterRendering=s.onAfterRendering;s.onAfterRendering=setTabStyles;n(s,i,t);init(s,a);BaseHandler.dispatcher.updateComponentProperties(s,t,n);return s};function setTabStyles(){var e=this,a;if(this.orgOnAfterRendering){this.orgOnAfterRendering()}var t=e.$();if(e.tablocation==="TOP"){a=jQuery("div.sapUiTabBar:first",t);a.removeClass("sapUiTabBarHidden");a.removeClass("sapUiTabBarBottom");a.addClass("sapUiTabBar");a=jQuery("div.sapUiTabPanel:first",t);a.removeClass("sapUiTabPanelHidden");a.removeClass("sapUiTabPanelBottom");a.addClass("sapUiTabPanel")}else if(e.tablocation==="BOTTOM"){a=jQuery("div.sapUiTabBar:first",t);a.removeClass("sapUiTabBar");a.removeClass("sapUiTabBarHidden");a.addClass("sapUiTabBarBottom");a=jQuery("div.sapUiTabPanel:first",t);a.removeClass("sapUiTabPanel");a.removeClass("sapUiTabPanelHidden");a.addClass("sapUiTabPanelBottom")}else if(e.tablocation==="HIDDEN"){var n=t;n.css("border-style","none");a=n.find("div.sapUiTabBar:first");a.removeClass("sapUiTabBar");a.removeClass("sapUiTabBarBottom");a.addClass("sapUiTabBarHidden");a=jQuery("div.sapUiTabPanel:first",t);a.removeClass("sapUiTabPanel");a.removeClass("sapUiTabPanelBottom");a.addClass("sapUiTabPanelHidden")}}function init(oTabStrip,oControlProperties){if(oControlProperties){var aChildren=oControlProperties.content;if(aChildren){that.updateChildren(aChildren,oTabStrip,function(e,a){oTabStrip.insertTab(e,a)},function(e){oTabStrip.removeTab(e)})}if(oTabStrip.zenfs){oTabStrip.detachSelect(oTabStrip.zenfs)}var selectedtabindex=oControlProperties.selectedtabindex;if(selectedtabindex!=null&&oTabStrip.getSelectedIndex()!==selectedtabindex){oTabStrip.setSelectedIndex(selectedtabindex)}if(oControlProperties.command){var f=function(){var index=this.getSelectedIndex();if(index!==selectedtabindex){var command=that.prepareCommand(oControlProperties.command,"__KEY__",index);eval(command)}};oTabStrip.zenfs=f;oTabStrip.attachSelect(f)}}oTabStrip.tablocation=oControlProperties.tablocation}this.applyForChildren=function(e,a){var t=e.getTabs();for(var n=0;n<t.length;n++){var i=t[n];a(i)}};this.getDefaultProxyClass=function(){return["sap.zen.ZenIconTabBar","sap.ui.commons.TabStrip"]};this.provideFunctionMapping=function(){return[["getItems","getTabs"],["insertItem","insertTab"],["removeItem","removeTab"]]};this.getDecorator=function(){return"TabStripDecorator"};this.getType=function(){return"tabstrip"}};var instance=new TabStripHandler;BaseHandler.dispatcher.addHandlers(instance.getType(),instance);sap.zen.TabHandler=function(){BaseHandler.apply(this,arguments);var e=this;this.createAndAdd=function(e,t,n,i,r){var s=this.createDefaultProxy();if(sap.zen.designmode){s.setEnabled=function(e){s.designmodeEnabled=e;if(e){this.$().removeClass("sapUiTabDsbl")}else{this.$().addClass("sapUiTabDsbl")}};s.getEnabled=function(){return true}}if(BaseHandler.dispatcher.isMainMode()){s.setText(t.caption)}else{var o=new sap.ui.commons.Title;o.setText(t.caption);s.setTitle(o)}s.setEnabled(t.enabled);var d=this.createAbsoluteLayout();i(s,r);s.addContent(d);a(s,t);return s};this.updateComponent=function(e,t){if(t){a(e,t)}return e};function a(a,t){if(t){var n;var i=a.getContent()[0];var r=t.caption;if(BaseHandler.dispatcher.isMainMode()){if(r!=null){n=a.getText();if(n!==r){a.setText(r)}}}else{var s=a.getTitle();if(r!=null){n=s.getText();if(n!==r){s.setText(r)}}}var o=t.enabled;if(o!=null){var d=a.getEnabled();if(sap.zen.designmode||d!==o){a.setEnabled(o)}}var l=t.content;if(l){e.updateChildren(l,a,function(e,a,t){if(t){var n=BaseHandler.dispatcher.createAbsoluteLayoutInfo(t);var r=BaseHandler.dispatcher.calcWidthUseOrderOfPriority(n.left,n.right,t.width);var s=BaseHandler.dispatcher.calcHeightUseOrderOfPriority(n.top,n.bottom,t.height);BaseHandler.dispatcher.setWidthHeight(e,r,s)}BaseHandler.dispatcher.insertIntoAbsoluteLayoutContainer(i,e,a)},function(e){i.removeContent(e)})}}}this.applyForChildren=function(e,a){var t=e.getContent()[0];var n=t.getContent();for(var i=0;i<n.length;i++){var r=n[i];if(r){a(r)}}};this.getDefaultProxyClass=function(){return["sap.m.IconTabFilter","sap.ui.commons.Tab"]};this.getType=function(){return"tab"}};instance=new sap.zen.TabHandler;BaseHandler.dispatcher.addHandlers(instance.getType(),instance,"TabDecorator");if(BaseHandler.dispatcher.isMainMode()){IconTabBar.extend("sap.zen.ZenIconTabBar",{metadata:{properties:{width:"sap.ui.core.CSSSize",height:"sap.ui.core.CSSSize"}},renderer:{},getStretchContentHeight:function(){return true},onAfterRendering:function(e){if(IconTabBar.prototype.onAfterRendering){IconTabBar.prototype.onAfterRendering.apply(this,[e])}var a=this.getHeight();var t=this.$();if(a!=="auto"){t.height(a)}var n=this.getWidth();if(n!=="auto"){t.width(n)}t.css("position","relative")}})}});
//# sourceMappingURL=tabstrip_handler.js.map