/*
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/zen/dsh/utils/BaseHandler","sap/zen/dsh/widgets/component"],function(jQuery,t,e){"use strict";var a=function(){e.apply(this,arguments);var a=this;this.init=function(){};this.beforeUpdate=function(){};this.afterUpdate=function(){};this.componentDeleted=function(){t.dispatcher.sdkDsDelete(this.oComponentProperties.id)};this.fetchData=function(){};this.metadata=function(){};var n={};this.filters=function(t){if(t===undefined){return n}else{n=JSON.parse(t);this.fireUpdate(false);return this}};this.bialGetData=function(t,e){if(t){e["(MEASURES_DIMENSION)"]=t}var a=this.fetchData(e,{includeData:true,includeFormattedData:true,includeTuples:true});if(a&&a.data&&a.data.length===1){var n=a.tuples[0];var i={value:a.data[0],formattedValue:a.formattedData[0]};for(var s=0;s<n.length;s++){var r=a.dimensions[s];if(r.containsMeasures){i.unitOfMeasure=r.unitOfMeasure;i.scalingFactor=r.scalingFactor}}return i}return null};this.updateDataInto=function(t,e,a){var n=this.fetchData(t,e);if(n){jQuery.each(n,function(t,e){a[t]=e})}else{for(var i in a){delete a[i]}}};this.getTargetParam=function(){return"TARGET_DATA_PROVIDER_REF"};this.fireUpdate=function(e){var n=this.oComponentProperties.id;var i=[];var s=t.dispatcher.sdkDsFindInstances(n);jQuery.each(s,function(e,n){var r={component:{id:e,content:{control:{}}}};jQuery.each(n,function(t,e){a.updateDataInto(e.selection,e.options,e.data);r.component.content.control[t]=e.data});if(t.dispatcher.getRootControlForComponentId(e)){i.push(r)}else if(!t.dispatcher.isDispatching()){delete s[e]}});if(!t.dispatcher.isDispatching()){t.dispatcher.dispatchDelta(i)}if(e){this.firePropertiesChangedAndEvent(["metadata"],"ON_RESULTSETCHANGED")}}};a.subclass=e.makeSubClass(a);return a});
//# sourceMappingURL=datasource.js.map