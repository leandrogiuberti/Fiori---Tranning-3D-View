/*!
 * (c) Copyright 2010-2019 SAP SE or an SAP affiliate company.
 */
sap.ui.define(["jquery.sap.global","sap/base/Log","sap/zen/crosstab/rendering/RenderingConstants"],function(jQuery,e,t){"use strict";var n=function(n){var r=this;var i=null;var a={};var o=null;this.beginProfiling=function(e,t){var n=Date.now();a[e]={iTsBegin:n,sText:t}};this.endProfiling=function(t){var n=Date.now();var r=a[t];if(r){e.error("CROSSTAB PERF: "+t+": "+r.sText+": DURATION: "+(n-r.iTsBegin)+"ms")}};this.getModelCoordinates=function(e,r,i){var a={};a.iRow=e;a.iCol=r;var o=n.getColumnHeaderArea().getRowCnt();var s=n.getRowHeaderArea().getColCnt();if(i===t.TYPE_DATA_AREA){a.iRow+=o;a.iCol+=s}else if(i===t.TYPE_COLUMN_HEADER_AREA){a.iCol+=s}else if(i===t.TYPE_ROW_HEADER_AREA){a.iRow+=o}return a};this.selectTextInInputField=function(e,t,r){if(t===-1&&r===-1){e.select()}else{var i=e[0];if(n.isIE8Mode()){if(i.createTextRange!=="undefined"){var a=i.createTextRange();a.collapse(true);a.moveEnd("character",r+1);a.moveStart("character",t);a.select()}}else if(i.selectionStart!=="undefined"){i.selectionStart=t;i.selectionEnd=r}}};this.getSelectionParams=function(e){var t=-1;var r=-1;if(n.isIE8Mode()){if(document.selection!=="undefined"&&document.selection.type==="Text"){var i=document.selection.createRange();if(i&&i.text.length>0){var a=document.body.createTextRange();a.moveToElementText(e);a.setEndPoint("EndToStart",i);t=a.text.length;r=t+i.text.length-1}}}else if(window.getSelection){var o=window.getSelection().toString();if(o&&o.length>0){t=window.getSelection().anchorOffset;r=window.getSelection().focusOffset}}return{iSelectionStartPos:t,iSelectionEndPos:r}};this.sendClientScrollPosUpdate=function(e,t,i,a,o){var s=n.getRenderEngine().getCrossRequestManager();if(s){if(o===true){s.setHeaderScrollData({iHPos:e})}else{s.setScrollData(e,t,i,a)}}r.sendScrollPosUpdate(e,t,i,a,o)};this.saveScrollPosData=function(e,t,n,r,i){if(!o){o={}}o.iHScrollPos=e;o.bHScrolledToEnd=t;o.iVScrollPos=n;o.bVScrolledToEnd=r;o.bIsHeaderData=i};this.compareScrollPosData=function(e,t,n,r,i){if(o){if(o.iHScrollPos===e&&o.iVScrollPos===n&&o.bHScrolledToEnd===t&&o.bVScrolledToEnd===r&&o.bIsHeaderData===i){return true}}return false};this.sendScrollPosUpdate=function(e,t,i,a,o){t=t||false;a=a||false;o=o||false;var s=n.getScrollNotifyCommand();if(s&&!this.compareScrollPosData(e,t,i,a,o)){s=s.replace("__CLIENT_VPOS__",i);s=s.replace("__CLIENT_VPOS_END__",a?"X":" ");s=s.replace("__CLIENT_HPOS__",o?"H"+e:e);s=s.replace("__CLIENT_HPOS_END__",t?"X":" ");this.saveScrollPosData(e,t,i,a,o);r.executeCommandAction(s)}};this.executeCommandAction=function(e,t,r){if(n.getPropertyBag().isBookmarkProcessing()&&!r){return}if(t===true){if(n.isQueueHeaderWidthRequest()===true){i=e;return}}var a;if(i&&i.length>0){a=new Function(i);a();n.setQueueHeaderWidthRequest(false);i=null}a=new Function(e);a()};this.translateCellCoordinatesForBackend=function(e,t){var r=n.getHeaderInfo();var i=e.getArea();var a={row:e.getRow(),col:e.getCol(),axisName:i.getAxisName()};var o=0;if(n.getNewLinesPos()==="TOP"){o=n.getNewLinesCnt()}if(i.isRowHeaderArea()){if(!t||t&&t.length===0){t=r.getDimensionNameByCol(e.getCol())}if(t){a.col=r.getAbsoluteColIndexForDimension(t)}a.row=a.row-o}else if(i.isColHeaderArea()){if(!t||t&&t.length===0){t=r.getDimensionNameByRow(e.getRow()-o)}if(t){a.row=r.getAbsoluteRowIndexForDimension(t)}}return a};this.getCellIdFromContenDivId=function(e){var t=e.indexOf("_contentDiv");if(t>-1){e=e.slice(0,t)}else{t=e.indexOf("_textContentDiv");if(t>-1){e=e.slice(0,t)}}return e};this.isMsIE=function(){var e=jQuery.browser.msie||false;var t=window.navigator.userAgent.match(/Trident\/7\./);e=e||(t?true:false);return e};this.isMozilla=function(){var e=jQuery.browser.mozilla||false;var t=window.navigator.userAgent.match(/Trident\/7\./);e=e&&(t?false:true);return e};this.translateScrollLeft=function(e,t){var r=t;if(n.getPropertyBag().isRtl()){if(jQuery.browser.webkit){r=e.scrollWidth-e.clientWidth-t}else if(this.isMozilla()){r=-t}}return r};this.getRtlAwareBoundingClientRect=function(e){var t=e.getBoundingClientRect();t.begin=t.left;t.end=t.right;if(n.getPropertyBag().isRtl()){t.begin=jQuery(window).width()-t.right;t.end=jQuery(window).width()-t.left}return t}};n.isCozyMode=function(){var e=false;if(n.isDispatcherAvailable()===true){e=sap.zen.Dispatcher.instance.isMainMode()&&!sap.zen.Dispatcher.instance.isCompactMode()}return e};n.isMainMode=function(){return true};n.unEscapeDisplayString=function(e){var t=e.replace(/<br\/>/g,"\r\n");t=t.replace(/&nbsp;/g,"&#x20;");t=jQuery("<div></div>").html(t).text();return t};n.prepareStringForRendering=function(e){var t=e.replace(/(\r\n)|(\n\r)|\r|\n/g,"<br/>");var r=t.replace(/(&#xd;&#xa;)|(&#xa;&#xd;)|&#xd;|&#xa;/g,"<br/>");var i=n.getNumberOfLineBreaks(r);r=r.replace(/&#x20;/g,"&nbsp;");return{text:r,iNumberOfLineBreaks:i}};n.cancelEvent=function(e){if(e){if(e.preventDefault){e.preventDefault()}n.stopEventPropagation(e)}};n.stopEventPropagation=function(e){if(e){if(e.stopPropagation){e.stopPropagation()}if(e.cancelBubble){e.cancelBubble=true}}};n.hasEntries=function(e){var t=false;if(e){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){t=true;break}}}return t};n.padWithZeroes=function(e,t){var n=e.toString();if(n.length<t){n=("0000000000"+n).slice(-t)}return n};n.selectTextInElement=function(e){var t;var n;if(e.innerHTML){if(document.createRange&&window.getSelection){t=document.createRange();n=window.getSelection();try{n.removeAllRanges()}catch(e){}try{t.selectNodeContents(e);n.addRange(t)}catch(r){t.selectNode(e);n.addRange(t)}}else if(document.body.createTextRange){t=document.body.createTextRange();t.moveToElementText(e);t.select()}}};n.getWidthFromStyle=function(e){var t=0;var n="";var r=null;var i=null;var a=e.attr("style");if(a){var o=a.split(";");if(o){for(t=0;t<o.length;t++){n=o[t];if(n){r=n.split(":");if(r[0]==="width"){i=r[1];break}}}}}if(i){i=jQuery.trim(i)}return i};n.sign=function(e){return e>0?1:e<0?-1:0};n.getCssIntProperty=function(e,t){var n=0;if(e&&e.length>0){n=parseInt(e.css(t),10);if(isNaN(n)){n=0}}return n};n.getWidthOfMarginBorderPadding=function(e){var t=n.getCssIntProperty(e,"margin-left")+n.getCssIntProperty(e,"margin-right");var r=n.getCssIntProperty(e,"border-left")+n.getCssIntProperty(e,"border-right");var i=n.getCssIntProperty(e,"padding-left")+n.getCssIntProperty(e,"padding-right");var a=t+r+i;return a};n.getNumberOfLineBreaks=function(e){var t=0;if(e&&e.length>0){var n=/<br\/>/g;while(n.exec(e)!=null){t++}}return t};n.getSizeOf=function(e){var t=0;for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){t++}}return t};n.isDispatcherAvailable=function(){var e=false;if(typeof sap!=="undefined"&&sap){if(typeof sap.zen!=="undefined"&&sap.zen){if(typeof sap.zen.Dispatcher!=="undefined"&&sap.zen.Dispatcher){if(typeof sap.zen.Dispatcher.instance!=="undefined"&&sap.zen.Dispatcher.instance){e=true}}}}return e};n.swapText=function(e,t){var n;var r;var i="";if(e.indexOf(t)>-1){n=e.split(t);for(r=n.length-1;r>=0;r--){i=i+n[r];if(r>=1){i=i+t}}}else{i=e}return i};n.swapPivotKeyText=function(e){var t;t=n.swapText(e,"&nbsp;&#x7c;&nbsp;");return t};return n},true);
//# sourceMappingURL=Utils.js.map