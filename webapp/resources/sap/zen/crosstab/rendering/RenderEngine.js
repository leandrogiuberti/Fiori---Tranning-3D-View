/*!
 * (c) Copyright 2010-2019 SAP SE or an SAP affiliate company.
 */
sap.ui.define(["jquery.sap.global","sap/zen/crosstab/rendering/ScrollbarRenderer","sap/zen/crosstab/rendering/DomElementProvider","sap/zen/crosstab/utils/Measuring","sap/zen/crosstab/CellStyleHandler","sap/zen/crosstab/rendering/RenderingConstants","sap/zen/crosstab/rendering/CrossRequestManager","sap/zen/crosstab/utils/Utils"],function(jQuery,e,t,r,a,i,n,l){"use strict";jQuery.sap.declare("sap.zen.crosstab.rendering.RenderEngine");sap.zen.crosstab.rendering.RenderEngine=function(o){var d=o.getColumnHeaderArea();var s=o.getDimensionHeaderArea();var g=o.getRowHeaderArea();var h=o.getDataArea();var f=null;var v=null;var c=null;var u=null;var S=null;var C="";var p=false;var b=[];var m=new t;var R=new r(o,m);var H=new n(o,this);var w=null;var I=null;var y=false;var W=false;var E={bHasHScrollbar:false,bHasVScrollbar:false,bHasHHeaderScrollbar:false};var D=[];var A=true;var B=false;var z=-1;var _=-1;var P=0;var M=false;this.isIE8Mode=function(){return y};this.renderResizeOutline=function(){if(o.getWidth()==="auto"&&o.hResize()||o.getHeight()==="auto"&&o.vResize()){var e=o.getId();var t=e+"_resizeDiv";var r=e+"_resizeFrame";var a=0;var i=0;u=m.getElement(e);if(u&&u[0]){u.css("overflow","hidden");var n=R.getTableDivBordersAndPadding();a=n.borders.iTopBorderWidth;i=n.borders.iLeftBorderWidth;c=jQuery.sap.byId(t);c.css("visibility","visible");c.css("top",-a+"px");c.css("left",-i+"px");S=jQuery.sap.byId(r);S.css("width",o.getIntWidth()+"px");S.css("height",o.getIntHeight()+"px");S.css("top",-a+"px");S.css("left",-i+"px");S.css("visibility","visible");var l=u.find("#"+jQuery.sap.encodeCSS(o.getId()+"_hScrollTab"));if(l&&l.length>0){l.appendTo(S);l.css("position","absolute");var d=o.getPropertyBag().getToolbarHeight();l.css("bottom",d+"px");l.css("left","0px")}var s=u.find("#"+jQuery.sap.encodeCSS(o.getId()+"_vScrollTab"));if(s&&s.length>0){s.appendTo(S);s.css("position","absolute");s.css("top","0px");s.css(o.getPropertyBag().isRtl()?"left":"right","0px")}if(o.getPropertyBag().hasToolbar()){var g=u.find("#"+jQuery.sap.encodeCSS(o.getId()+"_toolbar"));if(g&&g.length>0){g.appendTo(S);g.css("position","absolute");g.css("left","0px");g.css("bottom","0px")}}}}};this.removeResizeOutline=function(){if(c){c.css("visibility","hidden");c=null}if(u){u.css("overflow","hidden");u=null}if(S){S.css("visibility","hidden");S=null}};this.addAfterFinishRenderingHandler=function(e){if(jQuery.inArray(e,D)===-1){D.push(e)}};this.removeAfterFinishRenderingHandler=function(e){var t=jQuery.inArray(e,D);if(t!==-1){D.splice(t,1)}};this.removeAllAfterFinishRenderingHandlers=function(){D=[]};this.renderCell=function(e,t,r){var a=e.getCell(t,r);if(a){f.renderControl(a)}return a};this.renderArea=function(e,t,r,a,i,n){if(!t){t=0}if(!r){r=0}if(!a){a=0}if(!i){i=0}var l=t+r;var o=a+i;var d=0;var s=0;l=Math.min(l,e.getRowCnt());o=Math.min(o,e.getColCnt());for(d=t;d<l;d++){if(n){f.write("<tr");f.writeAttributeEscaped("class",n);f.write(">")}else{f.write("<tr>")}for(s=a;s<o;s++){this.renderCell(e,d,s)}f.write("</tr>")}};this.setDeferredVScrollPosDetermination=function(e){W=e};function L(){y=false;if(jQuery.browser.msie){if(jQuery.browser.version.substring(0,2)==="8."){y=true}if(jQuery.browser.fVersion&&jQuery.browser.fVersion===8){y=true}}}this.beginRendering=function(){o.block();L();M=o.getUtils().isMsIE();f=sap.ui.getCore().createRenderManager();ge();u=m.getElement(o.getId());u.css("visibility",o.getPropertyBag().isDebugMode()===true?"visible":"hidden");if(H.hasSavedInfo()){var e=H.getSavedHScrollInfo();if(e){d.setRenderStartCol(e.iPos);if(e.bScrolledToEnd){d.setRenderColCnt(d.getColCnt()-d.getRenderStartCol())}H.restoreColWidths()}var t=H.getSavedVScrollInfo();if(t){g.setRenderStartRow(t.iPos);if(t.bScrolledToEnd){g.setRenderRowCnt(g.getRowCnt()-g.getRenderStartRow())}}}};this.finishRendering=function(e){var t=0;var r=null;var a;var i;this.showLoadingVisualization();if(f){f.destroy()}f=null;R.reset();u=m.getElement(o.getId());u.css("visibility","visible");H.savedInfoHandled();o.restoreFocusOnCell();this.setDivSizeValidity();var n=o.getSelectionHandler();if(n){n.ensureCellsSelected()}if(!o.hasLoadingPages()&&o.hasData()){i=o.getHeaderInfo();if(i){i.setupPivotCell()}a=o.getDragDropHandler();if(a&&o.getPropertyBag().isDragDropEnabled()){a.initDragDrop(e)}if(e&&o.getColResizer()&&o.getPropertyBag().isEnableColResize()){o.getColResizer().initialize()}}for(t=0;t<D.length;t++){r=D[t];if(r){r()}}o.unblock()};this.renderDimensionHeaderArea=function(){var e=0;var t=s.getRowCnt();var r=0;var a=s.getColCnt();this.renderArea(s,e,t,r,a,"sapzencrosstab-HeaderRow");s.setRenderSize(e,t,r,a);f.flush(m.getElement(s.getId())[0])};this.renderDataArea=function(){var e=h.getId();var t=m.getElement(h.getId());var r=t;var a="";if(!o.getPropertyBag().isDebugMode()){t.hide()}t.html("<tbody></tbody>");r=jQuery(document.getElementById(e).firstChild);r.html("");a=r[0].innerHTML||"";f.write(a);var i=0;var n=0;var l=0;var s=0;if(g.hasContent()){i=g.getRenderStartRow();n=g.getRenderRowCnt()}else{i=0;n=h.getRowCnt()}if(d.hasContent()){l=d.getRenderStartCol();s=d.getRenderColCnt()}else{l=0;s=h.getColCnt()}var v=x(i,n,l,s);var c=T(i,n,l,s);v=null;c=null;if(v){G(v);U(v,i,n,l,s,this)}else if(c){j(c);N(c,i,n,l,s,this)}else{this.renderArea(h,i,n,l,s)}f.flush(r[0]);t.show();h.setRenderSize(i,n,l,s)};function x(e,t,r,a){if(r!==h.getRenderStartCol()||a!==h.getRenderColCnt()||t!==h.getRenderRowCnt()){return 0}var i=h.getRenderStartRow()+h.getRenderRowCnt();var n=e+t;var l=n-i;if(Math.abs(l)<t){return l}return 0}function T(e,t,r,a){if(e!==h.getRenderStartRow()||t!==h.getRenderRowCnt()||a!==h.getRenderColCnt()){return 0}var i=h.getRenderStartCol()+h.getRenderColCnt();var n=r+a;var l=n-i;if(Math.abs(l)<a){return l}return 0}function V(e){var t=null;var r;if(M===true){if(o.getPropertyBag().isDragDropEnabled()===true){r=e.find("td");jQuery.each(r,function(e,t){var r=jQuery(t);if(r.data("ui-draggable")){r.draggable("destroy")}if(r.data("ui-droppable")){r.droppable("destroy")}r.off()})}t=e.clone(true).off()}else{t=e.clone()}return t}function G(e){var t=jQuery(document.getElementById(h.getId()));var r=V(t);var a=jQuery(r[0].firstChild);var i=a.find("> tr");if(e>0){for(var n=0;n<e;n++){jQuery(i[n]).remove()}}else{var l=i.length;for(n=l+e;n<l;n++){jQuery(i[n]).remove()}}t.replaceWith(r);m.addElement(h.getId(),jQuery(document.getElementById(h.getId())))}function j(e){var t=jQuery(document.getElementById(h.getId()));var r=V(t);var a=jQuery(r[0].firstChild);var i=a.find("> tr");var n=i.length;if(e>0){for(var l=0;l<n;l++){var o=jQuery(i[l]).find("> td");for(var d=0;d<e;d++){jQuery(o[d]).remove()}}}else{for(l=0;l<n;l++){o=jQuery(i[l]).find("> td");var s=o.length-Math.abs(e)-1;for(d=o.length-1;d>s;d--){jQuery(o[d]).remove()}}}t.replaceWith(r);m.addElement(h.getId(),jQuery(document.getElementById(h.getId())))}function U(e,t,r,a,i,n){var l=jQuery(document.getElementById(h.getId()).firstChild);var o=l.html();var d=Math.abs(e);var s;if(e>0){f.write(o);s=r+t-e;n.renderArea(h,s,d,a,i)}else{s=t;n.renderArea(h,s,d,a,i);f.write(o)}f.flush(l[0])}function N(e,t,r,a,i){var n=jQuery(document.getElementById(h.getId()).firstChild);var l;var o=n.find("> tr");if(e>0){l=a+i-e;for(var d=0;d<o.length;d++){var s=jQuery(o[d]);var g=s.html();f.write("<tr>");f.write(g);for(var v=l;v<a+i;v++){f.renderControl(h.getCell(t+d,v))}f.write("</tr>")}}else{l=a;for(d=0;d<o.length;d++){s=jQuery(o[d]);g=s.html();f.write("<tr>");for(v=l;v<l-e;v++){f.renderControl(h.getCell(t+d,v))}f.write(g);f.write("</tr>")}}}this.renderColHeaderArea=function(e,t){var r=d.getId();var a=m.getElement(d.getId());var i=a;var n=d.getRowCnt();var l=d.getColCnt();var g="";var h=0;var v=0;var c=R.getAreaWidth(s);var u=0;var S=o.getContentWidth();var C=0;var p=0;var b,H;var w,I;var y;var W=0;var E=h;var D;var A=o.getId()+"_ColHeaderRow_";var B=null;if(!t){S-=c}if(!o.getPropertyBag().isDebugMode()){a.hide()}a.html("<tbody></tbody>");i=jQuery(document.getElementById(r).firstChild);i.html("");var z=false;if(o.getPropertyBag().isPixelScrolling()){B=k;h=0;C=l}else{B=q;h=e;C=l-h;z=this.isHScrolledToEnd()}while(B(v,C,p,S,z)){g=i[0].innerHTML;if(!g){F(i)}E=h+v;W=0;H=d.getFinalColWidth(E);if(!H){W++}while(B(v,C,p,S,z)&&H){v++;p+=H;H=d.getFinalColWidth(h+v);W++}D=E+W;for(b=0;b<n;b++){w=A+b;y=a.find("#"+jQuery.sap.encodeCSS(w))[0];I=y.innerHTML;f.write('<tr id="'+w+'" class="sapzencrosstab-HeaderRow">');f.write(I);for(var _=E;_<D;_++){var P=null;if(_===h){P=d.getCellWithColSpan(b,_)}else{P=d.getCell(b,_)}if(P){f.renderControl(P)}}f.write("</tr>")}f.flush(i[0]);if(!d.getFinalColWidth(E)){var M=a.outerWidth()-u;p+=M;v++}u=a.outerWidth()}d.setRenderSize(0,d.getRowCnt(),h,v);a.show()};this.appendColumnsAfterResize=function(){var e=m.getElement(d.getId());var t=0;var r=0;var a=0;if(d.getRenderStartCol()>0&&d.getRenderStartCol()+d.getRenderColCnt()===d.getColCnt()){var i=o.getContentWidth()-R.getAreaWidth(s);var n=e.outerWidth();t=n;var l=false;if(!o.getPropertyBag().isDebugMode()){e.hide()}while(n<=i&&d.getRenderStartCol()>0){this.appendLeftCols(d,1);this.appendLeftCols(h,1);l=true;a=d.getFinalColWidth(d.getRenderStartCol());if(a){n+=a}else{r=e.outerWidth()-t;n+=r}t=e.outerWidth()}e.show();if(l){this.adjustRowHeights(s,d);this.adjustRowHeights(g,h);this.adjustColWidths(d,h);R.calculateRenderSize(true);this.calculateRenderSizeDivSize();if(!w){w=H.getScrollManager()}w.commandHScrolledToEnd()}}e=m.getElement(d.getId())};function F(e){var t=d.getRowCnt();var r=0;for(r=0;r<t;r++){f.write("<tr");f.writeAttribute("class","sapzencrosstab-HeaderRow");f.writeAttribute("id",o.getId()+"_ColHeaderRow_"+r);f.write(">");f.write("</tr>")}f.flush(e[0])}function O(e){var t=e+1;var r=0;var a=r+g.getColCnt();var i=0;var n=0;for(i=e;i<t;i++){f.write("<tr");f.writeAttribute("class","sapzencrosstab-HeaderRow");f.write(">");for(n=r;n<a;n++){var l=g.getCellWithRowSpan(i,n);if(l){f.renderControl(l)}}f.write("</tr>")}}this.isVScrolledToEnd=function(){var e=false;if(w){e=w.isVScrolledToEnd()}return e};this.isHScrolledToEnd=function(){var e=false;if(w){e=w.isHScrolledToEnd()}return e};function q(e,t,r,a,i){return(r<a||i)&&e<t}function k(e,t){return e<t}this.renderRowHeaderArea=function(e){var t=g.getId();var r=m.getElement(g.getId());var a=r;var i=g.getRowCnt();var n="";var l=0;var d=R.getAreaHeight(s);var h=d;var v=o.getContentHeight();var c=0;var u=1;var S=null;if(!o.getPropertyBag().isDebugMode()){r.hide()}r.html("<tbody></tbody>");a=jQuery(document.getElementById(t).firstChild);a.html("");var C=false;if(o.getPropertyBag().isPixelScrolling()){S=k;e=0;c=i}else{S=q;c=i-e;C=this.isVScrolledToEnd()}while(S(l,c,h,v,C)){n=a[0].innerHTML||"";f.write(n);u=1;if(l>0){if(o.getPropertyBag().isPixelScrolling()){u=c-l}else{if(l<c-2){u=3}else if(l<c-1){u=2}}this.renderArea(g,e+l,u,0,g.getColCnt(),"sapzencrosstab-HeaderRow")}else{O(e)}f.flush(a[0]);l+=u;h=d+r.outerHeight()}r.show();g.setRenderSize(e,l,0,g.getColCnt());if(y){Y(g)}};function J(e,t,r){var a=1;var i=e.getCell(t,r,true);if(!i){while(!i&&t>0){t--;a++;i=e.getCell(t,r,true)}}return a}function Y(e){var t=e.getRenderStartRow()+e.getRenderRowCnt()-1;var r=e.getRenderStartCol();var a=r+e.getRenderColCnt()-1;var i=0;var n=null;var l=1;for(i=r;i<=a;i++){n=e.getCellWithRowSpan(t,i);if(n){l=J(e,t,i);n.setHtmlIE8RowSpan(l)}}}this.appendRowsAfterResize=function(){var e=m.getElement(g.getId());var t=0;var r=0;var a=0;if(g.getRenderStartRow()>0){var i=o.getContentHeight()-R.getAreaHeight(s);var n=e.outerHeight();t=n;var l=false;if(!o.getPropertyBag().isDebugMode()){e.hide()}while(n<=i&&g.getRenderStartRow()>0&&g.getRenderStartRow()+g.getRenderRowCnt()===g.getRowCnt()){this.appendTopRows(g,1);this.appendTopRows(h,1);l=true;a=g.getFinalRowHeight(g.getRenderStartRow());if(a){n+=a}else{r=e.outerHeight()-t;n+=r}t=e.outerHeight()}e.show();if(l){this.adjustRowHeights(g,h);this.adjustColWidths(s,g);this.adjustColWidths(d,h);R.calculateRenderSize(true);this.calculateRenderSizeDivSize();if(!w){w=H.getScrollManager()}w.commandVScrolledToEnd()}}e=m.getElement(g.getId())};this.setUserColWidths=function(e){if(!e.hasContent()||!e.hasUserColWidths()){return}e.calculateColGranularity();var t=e.measureColGranularityCells();e.applyColWidthsToGranularityCells(t);var r=m.getElement(e.getId());var a=V(r);Z(e,r,a,true);r.replaceWith(a);r=jQuery(document.getElementById(e.getId()));$(e,r,true);m.addElement(e.getId(),jQuery(document.getElementById(e.getId())));e.setColGranularityCalculatedAndMeasured(true)};this.adjustColWidths=function(e,t){if(!t.hasContent()||!e.hasContent()){if(!e.hasUserColWidths()&&!t.hasUserColWidths()){return}}var r=m.getElement(e.getId());var a=m.getElement(t.getId());e.calculateColGranularity();t.calculateColGranularity();var i=e.measureColGranularityCells();var n=t.measureColGranularityCells();e.setColGranularityCalculatedAndMeasured(false);t.setColGranularityCalculatedAndMeasured(false);var l=0;var d;for(l=e.getRenderStartCol();l<i.length;l++){d=Math.max(i[l]||0,n[l]||0);i[l]=d;n[l]=d}e.applyColWidthsToGranularityCells(i,e.hasUserColWidths());t.applyColWidthsToGranularityCells(n,t.hasUserColWidths());var s=V(r);var g=V(a);Z(e,r,s);Z(t,a,g);r.replaceWith(s);a.replaceWith(g);r=jQuery(document.getElementById(e.getId()));a=jQuery(document.getElementById(t.getId()));$(e,r);$(t,a);if(t.isRowHeaderArea()&&o.getNewLinesCnt()>0&&o.getCallValueHelpCommand()){Q()}m.addElement(e.getId(),jQuery(document.getElementById(e.getId())));m.addElement(t.getId(),jQuery(document.getElementById(t.getId())))};function K(e,t){var r=null;var a=null;var i=null;var n=0;var o=null;var d=g.getColGranularity();var s=0;var h=d[n].iWidth;var f=0;var v=0;var c=0;var u=0;var S=0;var C=null;var p=0;for(n=0;n<t;n++){o=g.getCell(e,n);if(o&&o.isEntryEnabled()){a=jQuery(document.getElementById(o.getId()));r=jQuery(document.getElementById(o.getId()+"_cellLayoutDiv"));l.getWidthFromStyle(r);if(d&&d.length>0){h=d[n].iWidth;f=parseInt(a.css("padding-left"))||0;v=parseInt(a.css("padding-right"))||0;c=parseInt(a.css("border-left-width"))||0;u=parseInt(a.css("border-right-width"))||0;s=h-f-v-c-u;r.css("width",s+"px");S=jQuery(r.find("td")[1]).outerWidth();C=jQuery(r.find("td")[0]);f=parseInt(C.css("padding-left"))||0;v=parseInt(C.css("padding-right"))||0;i=C.find("#"+jQuery.sap.encodeCSS(o.getId()+"_contentDiv"));p=s-f-v-S;i.css("width",p+"px")}}}}function Q(){var e=g.getRenderColCnt();var t=g.getRenderRowCnt();var r=g.getRenderStartRow();var a=g.getRowCnt();var i=o.getNewLinesCnt();var n=0;var l=0;if(o.isNewLinesTop()){if(r<i){for(n=r;n<i;n++){K(n,e)}}}else if(o.isNewLinesBottom()){var d=r+t-(a-i);if(d>0){var s=r+t-1;for(l=0;l<d;l++){K(s,e);s--}}}}this.adjustRowHeights=function(e,t){if(!t.hasContent()||!e.hasContent()){return}var r=m.getElement(e.getId());var a=m.getElement(t.getId());e.calculateRowGranularity();t.calculateRowGranularity();var i=e.measureRowGranularityCells();var n=t.measureRowGranularityCells();var l=0;var d;for(l=e.getRenderStartRow();l<i.length;l++){d=Math.max(i[l]||0,n[l]||0);i[l]=d;n[l]=d}var s=t.isColHeaderArea()?t.getLevelCells():null;var g=e.applyRowHeightsToGranularityCells(i,s);g=g||t.applyRowHeightsToGranularityCells(n,s);if(g===true&&E&&E.bHasHScrollbar===true&&!o.getPropertyBag().isPixelScrolling()){if(w){o.setScrollInvalidate(g)}}var h=V(r);var f=V(a);ee(e,r,h);ee(t,a,f);r.replaceWith(h);a.replaceWith(f);r=jQuery(document.getElementById(e.getId()));a=jQuery(document.getElementById(t.getId()));te(e,r);te(t,a);if(M){X(e);X(t)}m.addElement(e.getId(),jQuery(document.getElementById(e.getId())));m.addElement(t.getId(),jQuery(document.getElementById(t.getId())))};function X(e){var t=e.getCellsWithLineBreakTexts();var r=0;var a=0;var i=0;var n=0;var l=0;var o=0;var d=null;var s=null;if(t){i=e.getRenderStartRow();n=i+e.getRenderRowCnt()-1;l=e.getRenderStartCol();o=l+e.getRenderColCnt()-1;for(r=i;r<=n;r++){for(a=l;a<=o;a++){d=e.getCell(r,a);if(d){d=t[d.getId()];if(d){s=jQuery(document.getElementById(d.getId()+"_contentDiv"));if(s&&s.length>0){s.css("height",s.outerHeight()+"px")}}}}}}}function Z(e,t,r,a){var i=0;var n=e.getColGranularity();var l=null;var o=null;var d=null;var s=null;var g=0;for(i=0;i<n.length;i++){l=n[i];if(l){if(a===true){if(!e.isFixedColWidthSet(l.iCol)){continue}}o=t.find("#"+jQuery.sap.encodeCSS(l.sId));d=r.find("#"+jQuery.sap.encodeCSS(l.sId));g=ne(o,l.iWidth,e.getCell(l.iRow,l.iCol));var h=sap.ui.getCore().getControl(l.sId);if(h.isEntryEnabled()&&e.isRowHeaderArea()){s=jQuery(d.find("#"+jQuery.sap.encodeCSS(l.sId+"_cellLayoutDiv")))}else{s=jQuery(d.find("#"+jQuery.sap.encodeCSS(l.sId+"_contentDiv")))}s.width(g)}}}function $(e,t,r){var a=0;var i=e.getColGranularity();var n=null;var l=null;var o=null;var d=0;var s={};for(a=0;a<i.length;a++){n=i[a];if(n){if(r===true){if(!e.isFixedColWidthSet(n.iCol)){continue}}l=t.find("#"+jQuery.sap.encodeCSS(n.sId));d=l.outerWidth();if(d>n.iWidth){if(!o){o=V(t)}ie(e,t,o,n,s)}}}if(o){t.replaceWith(o)}}function ee(e,t,r){var a=0;var i=e.getRowGranularity();var n=null;var l=null;var o=null;var d=null;var s=0;for(a=0;a<i.length;a++){n=i[a];if(n){l=t.find("#"+jQuery.sap.encodeCSS(n.sId));o=r.find("#"+jQuery.sap.encodeCSS(n.sId));d=o.parent();s=le(l,n.iHeight);d.height(s)}}}function te(e,t){var r=0;var a=e.getRowGranularity();var i=null;var n=null;var l=0;var o=null;var d={};for(r=0;r<a.length;r++){i=a[r];if(i){n=t.find("#"+jQuery.sap.encodeCSS(i.sId));var s=n.parent();l=s.outerHeight();if(l>i.iHeight){if(!o){o=V(t)}ae(e,t,o,i,d)}}}if(o){t.replaceWith(o)}}function re(e,t){var r=0;if(y){var a=e.find("table");if(a===null||a.length===0){r=oe(e,t)}}else{r=oe(e,t)}return r}function ae(e,t,r,a,i){var n=e.getRenderStartCol()+e.getRenderColCnt();var l=0;var o=null;var d=0;var s=0;var g=e.getCalculatedRowHeights();var h=null;var f=null;var v=null;var c=0;var u=0;var S;var C;for(l=e.getRenderStartCol();l<n;l++){o=e.getCellWithColSpan(a.iRow,l);if(!o){o=e.getCellWithRowSpan(a.iRow,l);if(o&&l<a.iCol&&o.getEffectiveRowSpan()>1){if(!i[o.getId()]){i[o.getId()]=o}else{o=null}}}if(o){f=t.find("#"+jQuery.sap.encodeCSS(o.getId()));v=r.find("#"+jQuery.sap.encodeCSS(o.getId()));if(f.length>0){d=0;u=y?o.getHtmlIE8RowSpan():o.getEffectiveRowSpan();S=e.getRenderRowCnt()-(Math.max(o.getRow(),e.getRenderStartRow())-e.getRenderStartRow());C=Math.min(S,u);for(s=0;s<C;s++){d+=g[a.iRow+s]||0}c=re(f,d);h=jQuery(v.find("#"+jQuery.sap.encodeCSS(o.getId()+"_contentDiv")));h.css("line-height",c+"px");if(o.getEffectiveRowSpan()>1){i[o.getId()]=o}}}}}function ie(e,t,r,a,i){var n=0;var l=null;var o=null;var d=null;var s=null;var g=0;var h=0;var f=0;var v=e.getCalculatedColWidths();var c;var u;var S;var C=e.getRenderStartRow()+e.getRenderRowCnt();for(n=e.getRenderStartRow();n<C;n++){l=e.getCellWithRowSpan(n,a.iCol);if(!l){l=e.getCellWithColSpan(n,a.iCol);if(l&&n<a.iRow&&l.getEffectiveColSpan()>1){if(!i[l.getId()]){i[l.getId()]=l}else{l=null}}}if(l){if(i[l.getId()]){continue}o=t.find("#"+jQuery.sap.encodeCSS(l.getId()));d=r.find("#"+jQuery.sap.encodeCSS(l.getId()));if(o.length>0){h=0;c=l.getEffectiveColSpan();u=e.getRenderColCnt()-(Math.max(l.getCol(),e.getRenderStartCol())-e.getRenderStartCol());S=Math.min(u,c);for(f=0;f<S;f++){h+=v[a.iCol+f]||0}g=ne(o,h,l);if(l.isEntryEnabled()&&e.isRowHeaderArea()){s=jQuery(d.find("#"+jQuery.sap.encodeCSS(l.sId+"_cellLayoutDiv")))}else{s=jQuery(d.find("#"+jQuery.sap.encodeCSS(l.getId()+"_contentDiv")))}s.width(g);if(l.getEffectiveColSpan()>1){i[l.getId()]=l}}}}}function ne(e,t,r){var a=parseInt(e.css("padding-left"))||0;var i=parseInt(e.css("padding-right"))||0;var n=parseInt(e.css("border-left-width"))||0;var l=parseInt(e.css("border-right-width"))||0;var o=0;var d=0;if(r!==null&&r.isEntryEnabled()){if(r.isEntryEnabled()&&r.getArea().isRowHeaderArea()){var s=jQuery(e.find("#"+jQuery.sap.encodeCSS(r.getId()+"_cellLayoutDiv")))}else{s=e.find("#"+jQuery.sap.encodeCSS(r.getId()+"_contentDiv"))}o=parseInt(s.css("border-left-width"))||0;d=parseInt(s.css("border-right-width"))||0}var g=Math.max(1,t-a-i-n-l-o-d);return g}function le(e,t){var r=jQuery(e).parent();var a=parseInt(r.css("border-top-width"),10)||0;var i=parseInt(r.css("border-bottom-width"),10)||0;var n=t+a+i;return n}function oe(e,t){var r=parseInt(e.css("padding-top"))||0;var a=parseInt(e.css("padding-bottom"))||0;var i=parseInt(e.css("border-top-width"))||0;var n=parseInt(e.css("border-bottom-width"))||0;var l=t-r-a-i-n;return l}this.determineHeaderScrollbarVisible=function(){if(E){var e=0;var t=null;var r=null;var a=false;if(s.getColCnt()>0){e=R.getAreaSize(s).iWidth;r=jQuery(document.getElementById(o.getId()+"_dimHeaderArea_container"));t=jQuery(document.getElementById(o.getId()+"_upperLeft_scrollDiv"))}if(e===0){if(g.getColCnt()>0){e=R.getAreaSize(g).iWidth;r=jQuery(document.getElementById(o.getId()+"_rowHeaderArea_container"));t=jQuery(document.getElementById(o.getId()+"_lowerLeft_scrollDiv"))}}if(e>0){a=r.outerWidth()>t.outerWidth()}E.bHasHHeaderScrollbar=a}if(!E||!E.bHasHHeaderScrollbar){o.setHeaderHScrolling(false)}};this.determineDefaultScrollbarsVisible=function(){E={};var e=R.getAreaSize(s);var t=R.calculateRenderSize();var r=R.getRenderSizeDivSize(o);var a=o.getContentWidth();var i=o.getContentHeight();var n=R.getBrowserScrollbarWidth();var l=null;var d=h.getRenderColCnt()===h.getColCnt();var g=h.getRenderRowCnt()===h.getRowCnt();E.bHasHScrollbar=(t.iWidth>a||!d)&&r.iWidth>e.iWidth;E.bHasVScrollbar=(t.iHeight>i||!g)&&r.iHeight>e.iHeight;if(E.bHasHScrollbar&&!E.bHasVScrollbar){l=R.getRenderSizeDivBorders();if(i<=t.iHeight+n+l.borders.iBottomBorderWidth+l.borders.iTopBorderWidth){E.bHasVScrollbar=true}}else if(!E.bHasHScrollbar&&E.bHasVScrollbar){l=R.getRenderSizeDivBorders();if(a<=t.iWidth+n+l.borders.iRightBorderWidth+l.borders.iLeftBorderWidth){E.bHasHScrollbar=true}}};this.determineScrollbarsVisible=function(){this.determineDefaultScrollbarsVisible();this.determineHeaderScrollbarVisible()};this.setAdjustFrameDivs=function(e){A=e};this.removeOuterDivBorders=function(){var e=jQuery(jQuery.sap.byId(o.getId()+"_renderSizeDiv"));e.css("border-bottom-width","");e.css("border-top-width","");e.css("border-left-width","");e.css("border-right-width","")};this.setDivSizeValidity=function(){B=!o.getRowHeaderArea().hasLoadingPages()&&!o.getColumnHeaderArea().hasLoadingPages()};this.calculateRenderSizeDivSize=function(){if(A||!B){var e=jQuery(jQuery.sap.byId(o.getId()+"_renderSizeDiv"));var t=R.getRenderSizeDivBorders(e);if(z!==-1){t.borders.iBottomBorderWidth=z}var r=o.getContentWidth()-t.borders.iLeftBorderWidth-t.borders.iRightBorderWidth;e.width(r+"px");var a=o.getContentHeight()-t.borders.iBottomBorderWidth-t.borders.iTopBorderWidth;e.height(a+"px")}};this.adjustRenderSizeDivSize=function(){if(A||!B){var e=jQuery(jQuery.sap.byId(o.getId()+"_renderSizeDiv"));var t=R.getRenderSizeDivBorders(e);if(z!==-1){t.borders.iBottomBorderWidth=z}var r=R.getRenderSizeDivSize().iHeight;if(z!==-1){r+=z}var a=R.getRenderSizeDivSize().iWidth;var n=o.getContentHeight();if(E.bHasHScrollbar||E.bHasHHeaderScrollbar){n-=R.getBrowserScrollbarWidth()}if(o.getRenderMode()===i.RENDERMODE_COMPACT){var l=E.bHasHScrollbar||E.bHasHHeaderScrollbar?R.getBrowserScrollbarWidth():0;var d=o.getPropertyBag().getToolbarHeight();var s=r+l+t.borders.iBottomBorderWidth+t.borders.iTopBorderWidth+d;var g=n+l+d;if(g>=s){n=s;var h=m.getElement(o.getId());h.css("height",n+"px");if(z===-1){z=parseInt(e.css("border-bottom-width"),10)}e.css("border-bottom-width","0px")}}if(r>=n){if(z===-1){z=parseInt(e.css("border-bottom-width"),10)}e.css("border-bottom-width","0px")}var f=Math.min(r,n);e.css("height",f);var v=o.getContentWidth();if(E.bHasVScrollbar){v-=R.getBrowserScrollbarWidth()}if(o.getRenderMode()===i.RENDERMODE_COMPACT){var c=E.bHasVScrollbar?R.getBrowserScrollbarWidth():0;var u=a+c+t.borders.iLeftBorderWidth+t.borders.iRightBorderWidth;var S=v+c;if(S>=u){v=u;h=m.getElement(o.getId());h.css("width",v+"px");e.css("border-right-width","0px")}}if(a>=v){e.css("border-right-width","0px")}var C=Math.min(a,v);e.css("width",C);this.adjustGlassPaneSize()}};this.adjustGlassPaneSize=function(){var e=o.getGlassPane();var t=o.getRenderSizeDiv();e.css("width",t.outerWidth()+"px");e.css("height",t.outerHeight()+"px")};this.renderScrollbars=function(){this.determineScrollbarsVisible();if(E.bHasHScrollbar||E.bHasVScrollbar||E.bHasHHeaderScrollbar){if(!w){w=H.getScrollManager()}if(E.bHasHHeaderScrollbar){I=H.getHeaderScrollManager()}if(v){v.destroy();v=null}v=new e(o,f,R,m);v.renderScrollbars(E);v.attachHandlers(w.hScrollHandler,w.vScrollHandler,E.bHasHHeaderScrollbar?I.hScrollHandler:null);de()}else{w=null}};function de(){var e=0;for(e=0;e<b.length;e++){b[e]()}}this.setScrollbarSteps=function(){if(v){v.setScrollbarSteps()}};this.adjustScrollDivSizes=function(){var e=jQuery.sap.byId(o.getId()+"_lowerLeft");var t=e.outerWidth();var r=R.getRenderSizeDivSize();var a=r.iWidth-t+"px";var i=jQuery.sap.byId(o.getId()+"_lowerRight_scrollDiv");i.width(a);var n=jQuery.sap.byId(o.getId()+"_upperRight_scrollDiv");n.width(a);var l=jQuery.sap.byId(o.getId()+"_upperLeft");var d=l.outerHeight();if(!d){var s=jQuery.sap.byId(o.getId()+"_upperRight");d=s.outerHeight()}var g=r.iHeight-d+"px";i.height(g);var h=jQuery.sap.byId(o.getId()+"_lowerLeft_scrollDiv");h.height(g)};this.appendLeftCols=function(e,t){var r=Math.max(0,e.getRenderStartCol()-t);var a=Math.max(0,e.getRenderStartCol()-1);var i=t;if(r===a){i=1}var n=e.getRenderStartRow();var l=n+e.getRenderRowCnt()-1;var o=null;var d=0;var s=0;var g=0;var h=jQuery(document.getElementById(e.getId()));var v=h.children("tbody");if(v.length===0){h.append("<tbody></tbody>");v=h.children("tbody");for(g=n;g<=l;g++){v.append("<tr></tr>")}}var c=v.children("tr");for(g=n;g<=l;g++){var u=c[d];s=0;for(var S=r;S<=a;S++){if(s===0){o=e.getCellWithColSpan(g,S)}else{o=e.getCell(g,S)}if(o){var C=o.getColSpan();if(C>1){var p=o.getEffectiveColSpan();var b=Math.min(i,e.getRenderStartCol()-r);var m=p-(b-s);if(m>0){var R=jQuery(u).find("> :first-child");R.remove()}}f.renderControl(o)}s++}var H=jQuery(jQuery(c[d])).html();f.write(H);f.flush(u);d++}var w=e.getRenderColCnt();var I=a-r+1;e.setRenderColCnt(w+I);e.setRenderStartCol(r)};this.appendTopRows=function(e,t){var r=Math.max(0,e.getRenderStartRow()-t);var a=Math.max(0,e.getRenderStartRow()-1);var i=t;if(r===a){i=1}var n=e.getRenderStartCol();var l=n+e.getRenderColCnt()-1;var d=jQuery(document.getElementById(e.getId()));var s=d.children("tbody");if(s.length===0){d.append("<tbody></tbody>");s=d.children("tbody")}var g=s.html();var h=[];var v=0;var c=null;if(!o.getPropertyBag().isDebugMode()){s.hide()}for(var u=r;u<=a;u++){f.write("<tr");f.writeAttribute("class","sapzencrosstab-HeaderRow");f.write(">");for(var S=n;S<=l;S++){c=null;if(v===0){c=e.getCellWithRowSpan(u,S)}else{c=e.getCell(u,S)}if(c){var C=c.getRowSpan();if(C>1){var p=c.getEffectiveRowSpan();var b=p-(i-v);if(b>0){h.push(S)}}f.renderControl(c)}}f.write("</tr>");v++}var m=[];if(h.length>0){var R=jQuery(document.getElementById(e.getId())).children("tbody").children("tr");var H=jQuery(R[0]);var w=0;for(w=0;w<h.length;w++){c=H.find("> :nth-child("+(h[w]+1)+")");if(c.length>0){var I=c.attr("id");m.push(I)}}for(var y=0;y<m.length;y++){var W=H.find("#"+jQuery.sap.encodeCSS(m[y]));W.remove()}f.write("<tr");f.writeAttribute("class","sapzencrosstab-HeaderRow");f.write(">");f.write(H.html()+"</tr>");for(w=1;w<R.length;w++){f.write("<tr");f.writeAttribute("class","sapzencrosstab-HeaderRow");f.write(">");f.write(jQuery(R[w]).html()+"</tr>")}}else{f.write(g)}e.setRenderStartRow(r);e.setRenderRowCnt(e.getRenderRowCnt()+a-r+1);f.flush(s[0]);s.show()};function se(e,t,r){var a=0;var i=t.getScrollPosition();var n={};n.parameters={};n.oSource=t;n.parameters.oldScrollPos=i;if(o.getPropertyBag().isPixelScrolling()||r){a=Math.max(0,Math.min(e,parseInt(t.getContentSize(),10)));n.parameters.action="Drag"}else{a=Math.max(0,Math.min(e,t.getSteps()));n.parameters.action="STEP"}n.getParameters=function(){return this.parameters};n.parameters.newScrollPos=a;n.parameters.forward=a-i>0;return n}this.scrollHorizontal=function(e){if(o.getHScrollbar()){var t=se(e,o.getHScrollbar());o.getHScrollbar().setScrollPosition(t.getParameters().newScrollPos);w.hScrollHandler(t,true)}};this.scrollVertical=function(e,t){if(o.getVScrollbar()){var r=se(e,o.getVScrollbar());o.getVScrollbar().setScrollPosition(r.getParameters().newScrollPos);var a=false;if(!t){a=true}w.vScrollHandler(r,a)}};this.scrollHeaderHorizontal=function(e){var t=o.getHorizontalHeaderScrollbar();if(t){var r=se(e,t,true);t.setScrollPosition(r.getParameters().newScrollPos);I.hScrollHandler(r)}};this.getMeasuringHelper=function(){return R};this.reset=function(e){H.reset();if(!e){H.clearSavedColWidths()}w=null;R.reset();if(v){v.destroy();v=null}b=[];B=false;z=-1};this.adjustScrollPositions=function(e){if(E.bHasHScrollbar||E.bHasVScrollbar){if(W&&o.getPropertyBag().isPixelScrolling()){var t=0;var r=H.getSavedVScrollInfo();if(r){var a=o.getDataArea();var i=R.getAreaHeight(a);var n=a.getRowCnt();var l=Math.round(i/n);t=r.iPos*l}w.setVScrollPos(t)}var d=undefined;var s=undefined;if(H){if(H.hasSavedInfo()){var g=H.getSavedHScrollInfo();if(g){d=g.bScrolledToEnd}g=H.getSavedVScrollInfo();if(g){s=g.bScrolledToEnd}}}w.moveScrollbars(E,e,d,s);W=false}if(o.isHeaderHScrolling()===true){if(H&&H.hasSavedInfo()===true){I.setHScrollData(H.getHeaderScrollData());I.moveScrollbars()}}};this.hasCrosstabSizeChanged=function(){return R.hasCrosstabSizeChanged(true)};this.getTableDivValues=function(){return R.getTableDivBordersAndPadding()};function ge(){var e=o.getTableDiv();var t=d.getId();var r=g.getId();var a=s.getId();var i=h.getId();m.addElement(o.getId(),e);m.addElement(t,e.find("#"+jQuery.sap.encodeCSS(t)));m.addElement(r,e.find("#"+jQuery.sap.encodeCSS(r)));m.addElement(a,e.find("#"+jQuery.sap.encodeCSS(a)));m.addElement(i,e.find("#"+jQuery.sap.encodeCSS(i)))}this.showLoadingIndicator=function(){if(!C&&!p){C=setTimeout(he,300)}else if(p){he()}};function he(){p=true;var e=m.getElement(o.getId());e.addClass("sapzencrosstab-TableDivLoading");var t=e.find("#"+jQuery.sap.encodeCSS(o.getId()+"_loadingAnimationDiv"));var r=parseInt(t.css("width"),10);var a=parseInt(t.css("height"),10);var i=R.getRenderSizeDivSize(o);var n=i.iWidth/2-r/2;var l=i.iHeight/2-a/2;t.css("top",l+"px");t.css("left",n+"px");t.css("visibility","visible")}function fe(){if(C){clearTimeout(C);C=""}}this.hideLoadingIndicator=function(){fe();var e=m.getElement(o.getId());e.removeClass("sapzencrosstab-TableDivLoading");var t=e.find("#"+jQuery.sap.encodeCSS(o.getId()+"_loadingAnimationDiv"));if(t&&t[0]){t.css("visibility","hidden")}p=false};this.showLoadingVisualization=function(){if(h.hasLoadingPages()){this.showLoadingIndicator()}else{this.hideLoadingIndicator()}};this.moveScrollDivs=function(){if(w){if(E){if(E.bHasHScrollbar){w.positionHScrollDiv()}if(E.bHasVScrollbar){w.positionVScrollDiv()}}}};this.getCrossRequestManager=function(){return H};this.registerNewScrollbarsNotification=function(e){if(jQuery.inArray(e,b)===-1){b.push(e)}};this.checkScrollbarSize=function(){if(E.bHasVScrollbar){var e=jQuery(document.getElementById(o.getId()+"_upperRightPad"));var t=null;if(o.hasDimensionHeaderArea()){t=jQuery(document.getElementById(o.getId()+"_upperLeft_scrollDiv"))}else if(o.hasColHeaderArea()){t=jQuery(document.getElementById(o.getId()+"_upperRight_scrollDiv"))}if(e!==null&&e.length>0&&t!==null&&t.length>0){var r=t.outerHeight();if(r!==e.outerHeight()){if(v){v.adjustVScrollbarHeight(r)}}}}if(E.bHasHScrollbar){var a=jQuery(document.getElementById(o.getId()+"_lowerLeftPad"));var i;if(o.hasRowHeaderArea()){i=jQuery(document.getElementById(o.getId()+"_lowerLeft_scrollDiv"))}else{i=jQuery(document.getElementById(o.getId()+"_upperLeft_scrollDiv"))}var n=i.outerWidth();if(n!==a.outerWidth()){if(v){v.adjustHScrollbarWidth(n)}}}};this.updateRenderingOfInputCellAfterCheck=function(e){var t=jQuery(document.getElementById(e.getId()));if(t.length>0){var r=a.getCompleteStyleName(i.STYLE_INVALID_VALUE,e.getCellType());if(e.hasStyle(i.STYLE_INVALID_VALUE)===true){t.addClass(r)}else{t.removeClass(r)}var n=t.find("#"+jQuery.sap.encodeCSS(e.getId()+"_contentDiv"));n.html(e.getText())}};this.updateHeaderScrollbarSizes=function(){if(v){v.setHorizontalHeaderScrollbarSteps();v.adjustHorizontalHeaderScrollbarContainerSize()}};function ve(e,t){var r=jQuery(document.getElementById(o.getId()+e));if(r.length>0){if(t===true){r.find("tbody>tr[class=sapzencrosstab-HeaderRow]>td:last-child").addClass("sapzencrosstab-removeRightBorder")}else{r.find("tbody>tr[class=sapzencrosstab-HeaderRow]>td:last-child").removeClass("sapzencrosstab-removeRightBorder")}}}function ce(e,t){if(e&&e.length>0){e.addClass("sapzencrosstab-lowerScrollHeaderSeparator");ve("_rowHeaderArea",true)}if(t&&t.length>0){t.addClass("sapzencrosstab-upperScrollHeaderSeparator");ve("_dimHeaderArea",true)}}function ue(e,t){if(e&&e.length>0){e.removeClass("sapzencrosstab-lowerScrollHeaderSeparator");ve("_rowHeaderArea",false)}if(t&&t.length>0){t.removeClass("sapzencrosstab-upperScrollHeaderSeparator");ve("_dimHeaderArea",false)}}this.getLeftScrollDivs=function(){var e=null;var t=null;if(o.hasRowHeaderArea()){e=jQuery(document.getElementById(o.getId()+"_lowerLeft_scrollDiv"))}if(o.hasDimensionHeaderArea()){t=jQuery(document.getElementById(o.getId()+"_upperLeft_scrollDiv"))}return{oJqRowHeaderDiv:e,oJqDimHeaderDiv:t}};this.determineUnrestrictedRightAreaWidth=function(){var e=0;var t;var r;var a=1;if(o.hasDimensionHeaderArea()){t=o.getDimensionHeaderArea()}else if(o.hasRowHeaderArea()){t=o.getRowHeaderArea()}if(t&&t.getRenderColCnt()>0){r=o.getTableCellWithSpans(0,t.getRenderColCnt()-1);if(r){a=parseInt(jQuery(document.getElementById(r.getId())).css("border-right-width"),10)}}if(h){h.saveData()}if(d){d.saveData()}this.renderRightAreas(true);this.determineDefaultScrollbarsVisible();e=this.getRightAreaContainerWidth()+(E.bHasVScrollbar?R.getBrowserScrollbarWidth():0)+a;if(h){jQuery(document.getElementById(h.getId())).find("tbody").empty();h.restoreData()}if(d){jQuery(document.getElementById(d.getId())).find("tbody").empty();d.restoreData()}return e};this.calculateLeftAreaHeaderWidth=function(e,t,r){var a=0;var i=o.getPropertyBag().getMaxHeaderWidth();var n=o.getPropertyBag().getUserHeaderWidth();var l;var d=Math.round(e/2);if(i>0){if(n>0){a=Math.min(i,n)}else{a=Math.min(i,t)}}else{a=n}if(a>=e){a=0}if(a>=t){a=0}if(t+r>e){if(this.hasRightArea()){if(a===0){if(r<=d){l=o.getRenderSizeDiv();a=e-r-parseInt(l.css("border-right-width"),10)-parseInt(l.css("border-left-width"),10)-1}else if(t<=d){a=t}else{a=d}}}else{a=e}}else{a=0}a=this.limitHeaderWidth(a);return a};this.enableHeaderResizeHandle=function(e){var t;t=jQuery(document.getElementById(o.getId()+"_headerResizeHandle"));if(t&&t.length>0){t.css("visibility",e?"visible":"hidden")}};this.forceHeaderWidth=function(){var e=null;var t=null;var r=0;var a=0;var i=0;var n=0;var l=null;if(o.hasRowHeaderArea()===false&&o.hasDimensionHeaderArea()===false){return}l=this.getLeftScrollDivs();e=l.oJqRowHeaderDiv;t=l.oJqDimHeaderDiv;r=this.getLeftAreaContainerWidth();if(this.hasRightArea()){a=this.determineUnrestrictedRightAreaWidth()}n=o.getContentWidth();i=this.calculateLeftAreaHeaderWidth(n,r,a);if(i>0){this.setDivWidth(e,i);this.setDivWidth(t,i);o.setHeaderHScrolling(true);P=i;ce(e,t);this.enableHeaderResizeHandle(true)}else{o.setHorizontalHeaderScrollbar(null);o.setHeaderHScrolling(false);P=0;ue(e,t);this.enableHeaderResizeHandle(false);o.getUtils().sendClientScrollPosUpdate(0,undefined,undefined,undefined,true);o.getPropertyBag().setUserHeaderWidth(0);this.sendHeaderLimit("N0",true)}};this.hasRightArea=function(){return o.hasDataArea()||o.hasColHeaderArea()};this.hasLeftArea=function(){return o.hasDimensionHeaderArea()||o.hasRowHeaderArea()};this.getLeftAreaContainerWidth=function(){var e=0;var t=null;if(o.hasDimensionHeaderArea()===true){t=jQuery(document.getElementById(o.getId()+"_dimHeaderArea_container"));e=t.outerWidth()}else if(o.hasRowHeaderArea()===true){t=jQuery(document.getElementById(o.getId()+"_rowHeaderArea_container"));e=t.outerWidth()}return e};this.getRightAreaContainerWidth=function(){var e=0;var t=null;if(o.hasColHeaderArea()===true){t=jQuery(document.getElementById(o.getId()+"_colHeaderArea_container"));e=t.outerWidth()}else if(o.hasDataArea()===true){t=jQuery(document.getElementById(o.getId()+"_dataArea_container"));e=t.outerWidth()}return e};this.getSectionWidth=function(){var e=this.getLeftAreaContainerWidth();var t=this.getRightAreaContainerWidth();var r=null;var a=null;var i=0;var n=0;if(o.hasDimensionHeaderArea()){r=jQuery(document.getElementById(o.getId()+"_upperLeft_scrollDiv"))}else if(o.hasRowHeaderArea()){r=jQuery(document.getElementById(o.getId()+"_lowerLeft_scrollDiv"))}i=l.getWidthOfMarginBorderPadding(r);if(o.hasColHeaderArea()){a=jQuery(document.getElementById(o.getId()+"_upperRight_scrollDiv"))}else if(o.hasDataArea()){a=jQuery(document.getElementById(o.getId()+"_lowerRight_scrollDiv"))}n=l.getWidthOfMarginBorderPadding(a);var d=e+t+i+n;return d};this.updateHeaderResizeDiv=function(){var e=jQuery(document.getElementById(o.getId()+"_headerResizeHandle"));var t=0;var r=o.getPropertyBag().getMaxHeaderWidth();if(e&&e.length>0){t=P;if(isNaN(t)||!t){if(r>0){t=Math.min(t,r)}var a=this.getLeftAreaContainerWidth();var i=jQuery(document.getElementById(o.getId()+"_renderSizeDiv")).outerWidth();var n=e.outerWidth();t=a<=i?a:i-n}if(o.getPropertyBag().isRtl()){e.css("right",t+"px")}else{e.css("left",t+"px")}}};this.getIntHeaderLimit=function(e){var t;var r;if(e.indexOf("N")===0){r=e.substring(1)}else{r=e}t=parseInt(r,10);return t};this.sendHeaderLimit=function(e,t){var r=o.getUserHeaderWidthCommand();var a=0;a=this.getIntHeaderLimit(e);if(_===a){return}if(r&&r.length>0){_=a;H.saveColWidths();r=r.replace("__HEADER_WIDTH__",e);o.getUtils().executeCommandAction(r,t)}};this.getHeaderScrollManager=function(){return I};this.limitHeaderWidth=function(e){var t=o.getPropertyBag().getMaxHeaderWidth();var r=0;if(t>0&&e>0){r=Math.min(t,e)}else{r=e}return r};this.setDivWidth=function(e,t){var r="";if(e&&e.length>0){if(!t){r="100%"}else{r=t+"px"}e.css("width",r)}};this.renderLeftAreas=function(){this.renderDimensionHeaderArea();this.setUserColWidths(o.getDimensionHeaderArea());this.renderRowHeaderArea(o.getRowHeaderArea().getRenderStartRow());this.setUserColWidths(o.getRowHeaderArea());this.adjustColWidths(o.getDimensionHeaderArea(),o.getRowHeaderArea())};this.renderRightAreas=function(e){var t=d.getRenderStartCol();if(e===true){t=0}this.renderColHeaderArea(t,e);this.setUserColWidths(o.getColumnHeaderArea());this.renderDataArea();this.setUserColWidths(o.getDataArea());this.adjustColWidths(o.getColumnHeaderArea(),o.getDataArea())};this.renderCrosstabAreas=function(){var e=o.isHeaderScrollingConfigured();this.renderLeftAreas();if(e===true&&!o.isPreparedDom()){this.forceHeaderWidth()}this.renderRightAreas();this.adjustRowHeights(o.getDimensionHeaderArea(),o.getColumnHeaderArea());this.adjustRowHeights(o.getRowHeaderArea(),o.getDataArea())};this.getScrollManager=function(){return w};this.getScrollbarVisibility=function(){return E}};return sap.zen.crosstab.rendering.RenderEngine});
//# sourceMappingURL=RenderEngine.js.map