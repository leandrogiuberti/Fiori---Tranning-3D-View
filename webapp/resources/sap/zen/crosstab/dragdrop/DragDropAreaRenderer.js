/*!
 * (c) Copyright 2010-2019 SAP SE or an SAP affiliate company.
 */
sap.ui.define(["jquery.sap.global"],function(jQuery){"use strict";jQuery.sap.declare("sap.zen.crosstab.dragdrop.DragDropAreaRenderer");sap.zen.crosstab.dragdrop.DragDropAreaRenderer=function(e){var r;var t;var i;var a;var o;var s;var l;var n;var p;var d;var f={sIdSuffix:"droparea_above",sCssClassName:"sapzencrosstab-rowAboveCellDropArea"};var g={sIdSuffix:"droparea_below",sCssClassName:"sapzencrosstab-rowBelowCellDropArea"};var c={sIdSuffix:"droparea_before",sCssClassName:"sapzencrosstab-columnBeforeCellDropArea"};var u={sIdSuffix:"droparea_after",sCssClassName:"sapzencrosstab-columnAfterCellDropArea"};var h={sIdSuffix:"droparea_after",sCssClassName:"sapzencrosstab-columnAfterCellDropAreaWithSort"};this.addStylesToHtmlString=function(e,r){if(r){for(var t in r){if(r.hasOwnProperty(t)){e=e+t+":"+r[t]+";"}}}return e};this.applyCssStyles=function(e,r){if(r&&e){for(var t in r){if(r.hasOwnProperty(t)){e.css(t,r[t])}}}};this.createDiv=function(r,t,i,a,o,s,l){return this.createFlexDiv(r,e.getRenderSizeDiv(),t,i,a,o,s,l)};this.createFlexDiv=function(e,r,t,i,a,o,s,l){var n=e.getId()+"_"+t;var p;var d;p=jQuery(document.getElementById(n));if(p.length===0){d='<div id="'+n+'" class="'+i+'" style="';if(a){d=this.addStylesToHtmlString(d,a)}d=d+'"></div>';if(!l){r.append(d)}else{r.prepend(d)}p=jQuery(document.getElementById(n));p.data("xtabcellid",e.getId())}if(o){this.applyCssStyles(p,o)}if(s){s(p)}return p};this.createBeforeDropArea=function(e,r){var t;var i;var a;var n;var f;t=d.getBoundingClientRect(document.getElementById(e.getId()));i=t.begin-o;a=0;n=l;if(r.iTop){a=r.iTop-s;n=l-a}if(r.iBottom){n=r.iBottom-s-a}f={top:a+"px",height:n+"px"};if(p){f.right=i+"px"}else{f.left=i+"px"}return this.createDiv(e,r.sIdSuffix,r.sCssClassName,null,f)};this.createAfterDropArea=function(e,r){var t;var i;var a;var n=null;var f=null;var g;var c;var u;t=d.getBoundingClientRect(document.getElementById(e.getId()));i=t.end-o;g=0;c=l;if(r.iTop){g=r.iTop-s;c=l-g}if(r.iBottom){c=r.iBottom-s-g}n={top:g+"px",height:c+"px"};if(p){n.right=i+"px";u="right"}else{n.left=i+"px";u="left"}f=function(e){e.css(u,i-e.outerWidth()/2+"px")};return this.createDiv(e,r.sIdSuffix,r.sCssClassName,null,n,f)};this.createAboveDropArea=function(e,r){var t;var i;var a;var l;var f;t=d.getBoundingClientRect(document.getElementById(e.getId()));i=t.top-s;l=0;a=n;if(r.iBegin){l=r.iBegin-o;a=n-l}if(r.iEnd){a=r.iEnd-o-l}f={top:i+"px",width:a+"px"};if(p){f.right=l+"px"}else{f.left=l+"px"}return this.createDiv(e,r.sIdSuffix,r.sCssClassName,null,f)};this.createBelowDropArea=function(e,r){var t;var i;var a=null;var l=null;var f;var g;t=d.getBoundingClientRect(document.getElementById(e.getId()));i=t.bottom-s;g=0;f=n;if(r.iBegin){g=r.iBegin-o;f=n-g}if(r.iEnd){f=r.iEnd-o-g}a={top:i+"px",width:f+"px"};if(p){a.right=g+"px"}else{a.left=g+"px"}l=function(e){e.css("top",i-e.outerHeight()/2+"px")};return this.createDiv(e,r.sIdSuffix,r.sCssClassName,null,a,l)};this.createDropAreasForPivotDimHeaderCell=function(e){var r;if(i===0){this.createBeforeDropArea(e,c)}else if(t===0){this.createAboveDropArea(e,f)}this.createBelowDropArea(e,g);this.createAfterDropArea(e,e.getSort()?h:u)};this.checkNeedsDropAreaByLookAheadCell=function(e,t,i){var a=true;var o=null;if(e){if(e.isSplitPivotCell()===true){o=r.getDimensionInfoByRowCol(e,t)}else{o=r.getDimensionInfoByRowCol(e)}if(o){a=o.sDimensionName!==i}}return a};this.createDropAreasForDimHeaderCell=function(a){var o=null;var s="";var l=false;var n;var p=null;var d=a.getTableCol();var v=a.getTableRow();if(e.getHeaderInfo().isBottomRightDimHeaderCell(a)===true){if(i===0){this.createBeforeDropArea(a,c)}else if(t===0){this.createAboveDropArea(a,f)}if(!a.getScalingAxis()||a.getScalingAxis()==="ROWS"){this.createBelowDropArea(a,g)}if(!a.getScalingAxis()||a.getScalingAxis()==="COLS"){this.createAfterDropArea(a,a.getSort()?h:u)}}else if(v<t&&e.getHeaderInfo().isRightColDimHeaderCell(a)===true||e.getHeaderInfo().isBottomRowDimHeaderCell(a)===true&&d<i){s=r.getDimensionInfoByRowCol(a).sDimensionName;if(e.getHeaderInfo().isBottomRowDimHeaderCell(a)===true){if(d===0){this.createBeforeDropArea(a,c)}l=true;n=d+a.getColSpan();if(n<=i){p=e.getTableCellWithColSpan(v,n);l=p.getScalingAxis()&&p.getScalingAxis()==="ROWS"||this.checkNeedsDropAreaByLookAheadCell(p,"ROWS",s)}if(l){this.createAfterDropArea(a,a.getSort()?h:u)}}if(e.getHeaderInfo().isRightColDimHeaderCell(a)===true){if(v===0){this.createAboveDropArea(a,f)}l=true;n=v+a.getRowSpan();if(n<=t){p=e.getTableCellWithRowSpan(n,d);l=p.getScalingAxis()&&p.getScalingAxis()==="COLS"||this.checkNeedsDropAreaByLookAheadCell(p,"COLS",s)}if(l===true){this.createBelowDropArea(a,g)}}}};this.init=function(f,g){a=f;d=g;r=e.getHeaderInfo();t=e.getTableMaxDimHeaderRow();i=e.getTableMaxDimHeaderCol();l=e.getRenderSizeDiv().outerHeight();n=e.getRenderSizeDiv().outerWidth();p=e.getPropertyBag().isRtl();var c=d.getBoundingClientRect(e.getRenderSizeDiv()[0]);o=c.begin;s=c.top};this.renderDimHeaderDropAreas=function(){var r=0;var t=0;var i=null;var o=a.getTableRow();var s=a.getTableCol();while(t<s){i=e.getTableCellWithColSpan(o,t);if(i){this.createDropAreasForDimHeaderCell(i);t=t+i.getColSpan()}}while(r<=o){i=e.getTableCellWithRowSpan(r,s);if(i){this.createDropAreasForDimHeaderCell(i);r=r+i.getRowSpan()}}};this.renderSplitPivotCellDragAreas=function(r,t){if(e.getPropertyBag().isRtl()){this.createFlexDiv(r,t,"dragarea_rows","sapzencrosstab-pivotCellRowsDimDragArea",{position:"absolute",bottom:"0px",right:"0px","border-left":"0px solid transparent;"},{"border-bottom-width":t.outerHeight()+"px","border-left-width":t.outerWidth()+"px"},null,true);this.createFlexDiv(r,t,"dragarea_cols","sapzencrosstab-pivotCellColsDimDragArea",{position:"absolute",top:"0px",left:"0px","border-right":"0px solid transparent;"},{"border-top-width":t.outerHeight()+"px","border-right-width":t.outerWidth()+"px"},null,true)}else{this.createFlexDiv(r,t,"dragarea_rows","sapzencrosstab-pivotCellRowsDimDragArea",{position:"absolute",bottom:"0px",left:"0px","border-right":"0px solid transparent;"},{"border-bottom-width":t.outerHeight()+"px","border-right-width":t.outerWidth()+"px"},null,true);this.createFlexDiv(r,t,"dragarea_cols","sapzencrosstab-pivotCellColsDimDragArea",{position:"absolute",top:"0px",right:"0px","border-left":"0px solid transparent;"},{"border-top-width":t.outerHeight()+"px","border-left-width":t.outerWidth()+"px"},null,true)}};this.repositionDropAreasForHeaderScrolling=function(){var r;var t;var i;var a;var s;if(e.isHeaderHScrolling()){r=e.getRenderSizeDiv().find("div .sapzencrosstab-columnAfterCellDropArea, .sapzencrosstab-columnAfterCellDropAreaWithSort");if(r){jQuery.each(r,function(r,l){t=jQuery(l);a=e.getRenderSizeDiv().find("#"+jQuery.sap.encodeCSS(t.data("xtabcellid")));if(a.length>0){s=d.getBoundingClientRect(a[0]);i=s.end-o-t.outerWidth()/2;t.css(p?"right":"left",i+"px")}})}}};this.createExternalDimDropAreasForMemberCell=function(e){var r=this.createAboveDropArea(e,f);var t=this.createBeforeDropArea(e,c);return{oJqAboveArea:r,oJqBeforeArea:t}}};return sap.zen.crosstab.dragdrop.DragDropAreaRenderer});
//# sourceMappingURL=DragDropAreaRenderer.js.map