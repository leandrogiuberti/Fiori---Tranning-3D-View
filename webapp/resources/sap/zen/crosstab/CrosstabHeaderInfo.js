/*!
 * (c) Copyright 2010-2019 SAP SE or an SAP affiliate company.
 */
sap.ui.define(["jquery.sap.global"],function(jQuery){"use strict";jQuery.sap.declare("sap.zen.crosstab.CrosstabHeaderInfo");sap.zen.crosstab.CrosstabHeaderInfo=function(e,i){var n=i.cols;var t=i.rows;var r=null;var s=null;var a={};var o={};var l={};var f={};var u=0;var m=0;var g=0;var v={};var h={};var C={};var D={};var d=0;var I=0;var S;var c;var b;var R={};function x(e){if(!R.hasOwnProperty(e)){R[e]={}}}function w(e,i){if(e[i].charname){e[i].sDimensionName=e[i].charname;delete e[i].charname;x(e[i].sDimensionName)}if(e[i].attrname){e[i].sAttributeName=e[i].attrname;delete e[i].attrname}if(e[i].iskey){e[i].bIsKeyPresentation=e[i].iskey;delete e[i].iskey}}if(n){for(d=0;d<n.length;d++){w(n,d);n[d].sAxisName="ROWS";n[d].iIndex=d;r=n[d];a[d]=r;if(l[r.sDimensionName]===undefined){l[r.sDimensionName]=d}if(v[r.sDimensionName]===undefined){v[r.sDimensionName]=I;D[I]=d;I++}}m=I;g=0;S=n.length-1;c=n[S].sDimensionName;for(d=S;d>0;d--){b=n[d-1].sDimensionName;if(b!==c){g=d;break}}}if(t){I=0;for(d=0;d<t.length;d++){w(t,d);t[d].sAxisName="COLS";t[d].iIndex=d;s=t[d];o[d]=s;if(f[s.sDimensionName]===undefined){f[s.sDimensionName]=d}if(h[s.sDimensionName]===undefined){h[s.sDimensionName]=I;C[I]=d;I++}}u=I}this.getDimensionNameByCol=function(e){if(a&&a[e]){return a[e].sDimensionName}else{return null}};this.getDimensionNameByRow=function(e){if(o&&o[e]){return o[e].sDimensionName}else{return null}};this.getFirstColForDimension=function(e){var i=-1;if(l[e]>=0){i=l[e]}return i};this.getFirstRowForDimension=function(e){var i=-1;if(f[e]>=0){i=f[e]}return i};this.getAbsoluteColIndexForDimension=function(e){var i=-1;if(v[e]>=0){i=v[e]}return i};this.getAbsoluteRowIndexForDimension=function(e){var i=-1;if(h[e]>=0){i=h[e]}return i};this.getRowForAbsoluteRow=function(e){var i=-1;if(C[e]>=0){i=C[e]}return i};this.getColForAbsoluteCol=function(e){var i=-1;if(D[e]>=0){i=D[e]}return i};this.getNumberOfDimensionsOnColsAxis=function(){if(t){return t.length}return 0};this.getNumberOfDimensionsOnRowsAxis=function(){if(n){return n.length}return 0};this.isColOfInnermostDimension=function(e){var i=this.getDimensionNameByCol(e);if(i){var n=this.getAbsoluteColIndexForDimension(i);if(n!==m-1){return false}return true}return false};this.getStartColForInnermostDimension=function(){return g};this.isRowOfInnermostDimension=function(e){var i=this.getDimensionNameByRow(e);if(i){var n=this.getAbsoluteRowIndexForDimension(i);if(n!==u-1){return false}return true}return false};this.isBottomRightDimHeaderCell=function(e){return this.isBottomRowDimHeaderCell(e)===true&&this.isRightColDimHeaderCell(e)===true};this.isBottomRowDimHeaderCell=function(i){var n=e.getTableMaxDimHeaderRow();var t=i.getTableRow()+i.getRowSpan()-1===n;return t};this.isRightColDimHeaderCell=function(i){var n=e.getTableMaxDimHeaderCol();var t=i.getTableCol()+i.getColSpan()-1===n;return t};this.getDimensionInfoForNonSplitPivotCell=function(e){var i;if(e.getScalingAxis()==="ROWS"){i=t[e.getTableRow()]}else if(e.getScalingAxis()==="COLS"){i=n[e.getTableCol()]}return i};this.getDimensionInfoForSplitPivotCell=function(e,i){var r;if(i){if(i=="ROWS"){r=n[e.getTableCol()]}else if(i=="COLS"){r=t[e.getTableRow()]}}return r};this.getDimensionInfoByRowCol=function(e,i){var r=null;var s=e.getTableRow();var a=e.getTableCol();if(e.isPivotCell()===true){if(e.isSplitPivotCell()===true){r=this.getDimensionInfoForSplitPivotCell(e,i)}else{r=this.getDimensionInfoForNonSplitPivotCell(e)}}else if(this.isBottomRowDimHeaderCell(e)===true){if(n){r=n[a]}else{r=t[s]}}else if(this.isRightColDimHeaderCell(e)===true){if(t){r=t[s]}else{r=n[a]}}return r};this.getDimensionInfoByRow=function(e){var i=null;if(t){i=t[e]}return i};this.getDimensionInfoByCol=function(e){var i=null;if(n){i=n[e]}return i};this.hasDimensionsOnRowsAxis=function(){if(n){return true}return false};this.hasDimensionsOnColsAxis=function(){if(t){return true}return false};this.findIndexInterval=function(e,i){var r;var s;var a;var o;var l={iStartIndex:-1,iEndIndex:-1};if(i==="ROWS"){s=n}else if(i==="COLS"){s=t}a=s.length;o=null;for(r=0;r<a&&l.iStartIndex<0;r++){o=s[r].sDimensionName;if(o===e){l.iStartIndex=r}}if(l.iStartIndex>=0){for(r=l.iStartIndex;r<a&&l.iEndIndex<0;r++){o=s[r].sDimensionName;if(o!==e){l.iEndIndex=r-1}}if(l.iEndIndex<0){l.iEndIndex=a-1}}return l};this.isEqualDimInfo=function(e,i){if(e.sDimensionName!==i.sDimensionName){return false}if(e.sAttributeName!==i.sAttributeName){return false}if(e.bIsKeyPresentation!==i.bIsKeyPresentation){return false}if(e.bIsTextPresentation!==i.bIsTextPresentation){return false}if(e.bIsMeasureStructure!==i.bIsMeasureStructure){return false}if(e.bIsStructure!==i.bIsStructure){return false}if(e.bIsScaling!==i.bIsScaling){return false}return true};this.includeBottomRightCell=function(e,i,n){var t;var r;var s=true;if(this.isBottomRightDimHeaderCell(i)===true){if(!i.isSplitPivotCell()&&e>0){t=n[e];r=n[e-1];s=t.sDimensionName===r.sDimensionName&&!t.bIsScaling}}return s};this.getCellsForInterval=function(i,r){var s;var a=i.iStartIndex;var o=e.getTableMaxDimHeaderRow();var l=e.getTableMaxDimHeaderCol();var f=[];var u;var m=i.iStartIndex===i.iEndIndex;while(a<=i.iEndIndex){u=true;if(r==="ROWS"){s=e.getTableCellWithColSpan(o,a);u=m||this.includeBottomRightCell(a,s,n,t);a=a+s.getColSpan()}else if(r==="COLS"){s=e.getTableCellWithRowSpan(a,l);u=m||this.includeBottomRightCell(a,s,t,n);a=a+s.getRowSpan()}if(u===true){f.push(s)}}return f};this.getCellsWithSameDimensionByDimInfo=function(e){var i;var n;var t;var r;if(e){t=e.sDimensionName;r=e.sAxisName;n=this.findIndexInterval(t,r);i=this.getCellsForInterval(n,r)}return i};this.getCellsWithSameDimension=function(e,i){var n;var t;if(!i&&e.isPivotCell()===true&&e.isSplitPivotCell()===true){return[]}else{n=this.getDimensionInfoByRowCol(e,i)}t=this.getCellsWithSameDimensionByDimInfo(n);return t};this.setupPivotCell=function(){var i;var n=false;var t=false;var r=-1;var s=-1;var a;var o;i=e.getTableCellWithSpans(e.getTableMaxDimHeaderRow(),e.getTableMaxDimHeaderCol());if(i){s=i.getTableRow();r=i.getTableCol();if(this.isBottomRightDimHeaderCell(i)===true){n=this.hasDimensionsOnRowsAxis()===true&&this.hasDimensionsOnColsAxis()===true}i.setPivotCell(n);a=this.getDimensionInfoByCol(r);o=this.getDimensionInfoByRow(s);if(i.isPivotCell()===true){if(!(a&&a.bIsScaling)&&!(o&&o.bIsScaling)){t=true}}i.setSplitPivotCell(t);if(a&&a.bIsScaling===true){i.setScalingAxis("ROWS")}else if(o&&o.bIsScaling===true){i.setScalingAxis("COLS")}}return i};this.getDimensionInfoForMemberCell=function(e){if(e.getArea().isRowHeaderArea()){return n[e.getTableCol()]}else if(e.getArea().isColHeaderArea()){return t[e.getTableRow()]}return null};this.getMemberCellsForSameDimension=function(e){var i;var r;if(e.getArea().isRowHeaderArea()){if(n){r=n[n.length-1].bIsScaling}i=this.getRowHeaderMemberCellsForSameDimension(e,r)}else if(e.getArea().isColHeaderArea()){if(t){r=t[t.length-1].bIsScaling}i=this.getColHeaderMemberCellsForSameDimension(e,r)}return i};this.getRowHeaderMemberCellsForSameDimension=function(i,n){var t;var r;var s;var a=0;var o;var l;var f;t=this.getDimensionInfoByCol(i.getTableCol());o=this.findIndexInterval(t.sDimensionName,"ROWS");s=[];l=e.getRowHeaderArea();f=l.getColCnt()-1;a=o.iStartIndex;while(a<=o.iEndIndex){r=l.getCellWithColSpan(i.getRow(),a);if(r){if(n){if(r.getCol()<f){s.push(r)}}else{s.push(r)}a=a+r.getColSpan()}else{a++}}return s};this.getColHeaderMemberCellsForSameDimension=function(i,n){var t;var r;var s;var a=0;var o;var l;var f;t=this.getDimensionInfoByRow(i.getTableRow());o=this.findIndexInterval(t.sDimensionName,"COLS");s=[];l=e.getColumnHeaderArea();f=l.getRowCnt()-1;a=o.iStartIndex;while(a<=o.iEndIndex){r=l.getCellWithRowSpan(a,i.getCol());if(r){if(n){if(r.getRow()<f){s.push(r)}}else{s.push(r)}a=a+r.getRowSpan()}else{a++}}return s};this.findStartIndexOfPreviousDimension=function(e,i){var r;var s;var a;var o;var l;var f=0;var u;if(i==="ROWS"){r=n}else if(i==="COLS"){r=t}if(r){s=r.length-1;a=s;o=false;while(a>=0&&!o){l=r[a];if(l.sDimensionName===e){o=true}else{a--}}while(l.sDimensionName===e&&a>=0){l=r[a];if(l.sDimensionName===e){a--}}u=l.sDimensionName;while(l.sDimensionName===u&&a>=0){l=r[a];if(l.sDimensionName!==u){f=a+1}else{a--}}}return f};this.isFirstDimensionOnAxis=function(e){if(e.sAxisName==="ROWS"&&n){return n[0].sDimensionName===e.sDimensionName}else if(e.sAxisName==="COLS"&&t){return t[0].sDimensionName===e.sDimensionName}return true};this.isDimensionInCrosstab=function(e){if(R){if(R.hasOwnProperty(e)){return true}}return false};this.hasOnlyMeasureStructure=function(){var e=null;var i=0;var r=false;if(!n&&t){e=t}else if(!t&&n){e=n}if(e&&e.length>0){r=true;for(i=0;i<e.length;i++){if(!e[i].bIsMeasureStructure){r=false;break}}}return r}};return sap.zen.crosstab.CrosstabHeaderInfo});
//# sourceMappingURL=CrosstabHeaderInfo.js.map