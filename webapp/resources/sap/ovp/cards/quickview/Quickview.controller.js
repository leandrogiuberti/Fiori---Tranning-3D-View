/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.define(["sap/ovp/cards/generic/Card.controller","sap/m/Button"],function(t,e){"use strict";return t.extend("sap.ovp.cards.quickview.Quickview",{onInit:function(){t.prototype.onInit.apply(this,arguments);this.bCustomActionFlag=true},onBeforeRendering:function(){var t=this.byId("ovpQuickviewCardHeader");if(t){var n=t.getText();var o=n.substring(0);if(n[0]===":"){o=n.substring(2)}else if(n[n.length-2]===":"){o=n.substring(0,n.length-2)}t.setText(o);var r=t.getCustomData();if(r){for(var i=0;i<r.length;++i){if(r[i].getProperty("key")==="aria-label"){r[i].setValue(o)}}}}var s=this.getCardPropertiesModel();var a=s.getProperty("/showFirstActionInFooter")?s.getProperty("/showFirstActionInFooter"):false;var p=this.byId("ovpActionFooter");if(!a){if(p){var g=p.getContent();if(g&&g.length){for(var i=0,f=g.length;i<f;i++){if(g[i]instanceof e){g[i].setVisible(false);break}}}}}},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);var n=this.getCardPropertiesModel();var o=this.byId("ovpActionFooter");if(!!this.bCustomActionFlag){var r=n.getProperty("/customActions");if(!!o&&!!r&&!!r.length){for(var i=0;i<r.length;i++){var s=r[i].text;var a=null,p;if(this.getOwnerComponent()&&this.getOwnerComponent().getComponentData()){a=this.getOwnerComponent().getComponentData().mainComponent}if(!!a&&!!s&&!!r[i].press){p=a.templateBaseExtension.provideCustomActionPress(r[i].press)?a.templateBaseExtension.provideCustomActionPress(r[i].press):a.onCustomActionPress(r[i].press);if(typeof p==="function"){var g=new e({text:s,press:p.bind(this),type:"Transparent"});var f=n.getProperty("/showFirstActionInFooter");var v=f?0:1;var l=r[i].position+v;var c=o.getContent().length;if(l<1+v&&l>c-1){o.addContent(g)}else{o.insertContent(g,l)}}}}}this.bCustomActionFlag=false}}})});
//# sourceMappingURL=Quickview.controller.js.map