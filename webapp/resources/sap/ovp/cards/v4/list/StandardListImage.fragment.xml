<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:ovp="sap.ovp.ui"
    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"
    xmlns:build="sap.build"
    template:require="{
		CardAnnotationhelper: 'sap/ovp/cards/AnnotationHelper',
        CardAnnotationhelperV4: 'sap/ovp/cards/v4/V4AnnotationHelper'
	}"
>
    <List 
        id="ovpList" 
        items="{parts:[{path:'entitySet>'}, {path:'ovpCardProperties>/annotationPath'}], formatter: 'CardAnnotationhelperV4.formatItems'}">
        <template:with 
            path='ovpCardProperties>/annotationPath' 
            helper="CardAnnotationhelperV4.resolveEntityTypePath" 
            var='lineItem'>
            <customData>
                <ovp:CustomData key="aria-label" value="{ovplibResourceBundle>imageListCardType}" writeToDom="true" />
            </customData>
            <items>
                <!-- for info: the formatter function checks the number of data points and if the data points are more than 0, then third data point is displayed. else first data point is displayed -->
                <StandardListItem
                    core:require="{
                        CardAnnotationhelper: 'sap/ovp/cards/AnnotationHelper',
                        CardAnnotationhelperV4: 'sap/ovp/cards/v4/V4AnnotationHelper'
                    }"
                    id="listItem"
                    class="sapOvpStandardListItem sapOvpStandardListItemImagesIcons"
                    icon="{path: 'lineItem>', formatter: 'CardAnnotationhelper.formatImageUrl'}"
                    iconInset = "false"
                    title="{parts:[{path:'lineItem>'}, {path:'ovpConstants>/firstDataFieldIndex'}], formatter: 'CardAnnotationhelperV4.formatDataFieldValueOnIndex'}"
                    description="{parts:[{path:'lineItem>'}, {path:'ovpConstants>/secondDataFieldIndex'}], formatter: 'CardAnnotationhelperV4.formatDataFieldValueOnIndex'}"
                    info="{parts:[{path:'lineItem>'}, {path:'ovpConstants>/firstDataPointIndex'}, {path:'ovpConstants>/thirdDataFieldIndex'}], formatter: 'CardAnnotationhelperV4.formatDataPointOrField'}"
                    infoState="{= ${path: 'lineItem>', formatter: 'CardAnnotationhelper.getDataPointsCount'} > 0 ? ${path: 'lineItem>', formatter: 'CardAnnotationhelper.formatFirstDataPointState'} : 'None' }"
                    type="Active"
                    press="onListItemPress">
                </StandardListItem>
            </items>
        </template:with>
    </List>
</core:FragmentDefinition>
