/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.define(["sap/ovp/app/OVPLogger","sap/ui/thirdparty/jquery"],function(t,jQuery){"use strict";var e=new t("sap.ovp.insights.helpers.i18n");var r={"content.chartProperties.color.title.text":{keyType:"Label",comment:"Colour text label for chart"},"content.chartProperties.size.title.text":{keyType:"Label",comment:"Size text label for chart"},"content.chartProperties.categoryAxis.title.text":{keyType:"Title",comment:"Category Axis text title for chart"},"content.chartProperties.valueAxis.title.text":{keyType:"Title",comment:"Value Axis text title for chart"},"content.chartProperties.actualValues.title.text":{keyType:"Title",comment:"Actual Values text title for chart"},"content.chartProperties.targetValues.title.text":{keyType:"Title",comment:"Target Values text title for chart"}};var i={};var a=[];function n(t,e,r){if(e.startsWith("{{")&&r){e="{{INT_CARD_"+e.split("{{")[1]}i[t]=e}function s(t,e){if(typeof t[e]==="object"){return t[e]}return{object:t,key:e}}function o(t){var e=i;var r;for(var a in e){r=a.split(".").reduce(s,t);if(!r.object[r["key"]]&&e[a]){r.object[r["key"]]=e[a]}else if(r.object[r["key"]].trim().length>0){r.object[r["key"]]=e[a]}}}function l(t,e){var r={Title:"XTIT:",Label:"XFLD:",Button:"XBUT:","Column header":"XCOL:"};var i=r[t]||"";return i+" "+e}function c(t,e,r,i,n){var s={comment:l(i,t+" "+n),key:"INT_CARD_"+e,value:r};if(s.value.trim().length>0){a.push(s)}}function u(t,e){var r=[],i=-1;while((i=t.indexOf(e,i+1))!==-1){r.push(i)}return r}function p(){if(a.length>0){var t=a.map(function(t){return t.key+t.comment});for(var r=0;r<t.length;r++){var i=u(t,t[r]),n;if(i.length>1){n=0;for(var s=1;s<i.length;s++){a.splice(i[s]-n,1);t.splice(i[s]-n,1);n++}}}jQuery.ajax({type:"POST",url:"/editor/i18n",headers:{"Content-Type":"application/json"},data:JSON.stringify(a),success:function(t){e.info("Success:",t)},error:function(t){e.error("Error:",t)}}).done(function(t){e.info("Data Saved: "+t)})}}function f(){a=[];i={}}function h(t,e){if(!t||!e){return}for(var i in r){var a=v(t,i);if(!a){continue}var n=a.replace(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/g,"");var s=e+"_"+n.replace(/ /g,"_")+"_"+i.replaceAll(".","_");var o=r[i].keyType;var l=r[i].comment;this.seti18nValueToMap(i,"{{"+s+"}}",true);this.inserti18nPayLoad(e,s,a,o,l)}}function v(t,e){return e.split(".").reduce(function(t,e){return(t||{})[e]},t)}function y(t,e,r,i){var a="INT_CARD_";var n=i.replace(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/g,"");var s=e+"_"+n.replace(/ /g,"_");this.inserti18nPayLoad(e,s,t,r,i);return"{{"+a+s+"}}"}function g(t,e,r){var i=e&&e["sap.app"];var a={title:"",subtitle:""};if(i){var n=i.title||"";var s=i["subtitle"]||i["description"]||"";var o=r.cardComponentData.cardId;if(n&&n.startsWith("{")){a.title=n}else if(n){n=t.title;a.title=y(n,o,"Title","App Title")}if(s&&s.startsWith("{")){a.subtitle=s}else if(s){s=t.subtitle||t.description;a.subtitle=y(s,o,"Title","App Subtitle")}}return a}function T(t,e,r,i,a){if(e&&!e.startsWith("{")){var n=a&&a.split(".").join("_");var s=t+"_"+n+"_"+i.replace(/ /g,"_");this.seti18nValueToMap(a,"{{"+s+"}}",true);this.inserti18nPayLoad(t,s,e,r,i);return{key:"{{"+s+"}}",text:e,isNew:true}}return{key:e,isNew:false}}function d(t,e,r){var i=t.substring(2,t.length-2),a="configuration."+i,n=v(e["sap.card"],a),s=n&&n.value;if(s&&s.startsWith("{{")){s=s.substring(2,s.length-2);n.value=r.getProperty(s)}}function m(t,e){var r=t["sap.card"]["header"],i=r.details;if(i&&i.startsWith("{{")){if(i.indexOf("parameters")>-1){var a=i.indexOf("|")>-1;if(a){var n=i.split("|")||[];n.forEach(function(r){r=r.trim();d(r,t,e)})}else{d(i,t,e)}}else{var s=i.substring(2,i.length-2);r.details=e.getProperty(s)}}}function b(t,e){var r="";if(t&&t.startsWith("{{")){r=t.substring(2,t.length-2);return e.getProperty(r)}return t}function x(t,e){if(t&&e){var r=t["sap.app"],i=t["sap.card"]["header"];r.title=b(r.title,e);r.subTitle=b(r.subTitle,e);i.title=b(i.title,e);i.subTitle=b(i.subTitle,e);m(t,e)}}return{seti18nValueToMap:n,inserti18nKeysManifest:o,inserti18nPayLoad:c,writei18nPayload:p,reseti18nProperties:f,replaceStringsWithKeys:h,getKeysForAppProperties:g,createKeysFromText:T,fnReplacei18nKeysWithText:x,getI18nValueOrDefaultString:b}});
//# sourceMappingURL=i18n.js.map