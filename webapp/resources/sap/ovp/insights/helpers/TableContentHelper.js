/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.define(["sap/ovp/insights/helpers/ContentHelper","sap/ovp/insights/helpers/i18n"],function(e,t){"use strict";function a(e,t){var a=[],n=0;var r=e.view.byId("ovpTable").getAggregation("columns");for(var i=0;i<r.length&&a.length<t;i++){if(r[i].getVisible()){a[n]=i;n++}}return a}function n(a,n,r,i,l){var s=a[n[r]];if(s){var g=e.getBindingPathOrValue(s.getHeader(),"text",false,l);var u,o;if(g&&!g.startsWith("{")){u=g.replace(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/g,"");u=i+"_"+u.replace(/ /g,"_");o=g;t.seti18nValueToMap("content.row.columns."+r+".title","{{"+u+"}}",true);t.inserti18nPayLoad(i,u,o,"Column header","column "+r+" title value")}return{header:g,hAlign:s.getHAlign()}}return{}}function r(t,a){if(!t){return{}}var n,r,i,l={};n=t.getMetadata().getName();switch(n){case"sap.m.VBox":var s=t.getAggregation("items");if(s.length){s.forEach(function(t){r=e.getBindingPathOrValue(t,"text",false,a);if(r){l.value=r}})}break;case"sap.ui.comp.navpopover.SmartLink":l.value=e.getBindingPathOrValue(t,"text",false,a);break;case"sap.m.Text":l.value=e.getBindingPathOrValue(t,"text",false,a);break;case"sap.m.ObjectStatus":l.value=e.getBindingPathOrValue(t,"text",false,a);i=e.getBindingPathOrValue(t,"state",false,a);l.state=i&&i!=="None"?e.buildValueStateExpression(i,"state"):"None";break;case"sap.m.ObjectNumber":l.value=e.getBindingPathOrValue(t,"number",false,a);i=e.getBindingPathOrValue(t,"state",false,a);l.state=i&&i!=="None"?e.buildValueStateExpression(i,"state"):"None";break}return l}function i(t,i){if(!t){return{}}var l=t.cardComponentData.cardId;var s=i.configuration.parameters;var g=t.view.byId("ovpTable").getAggregation("columns");var u=t.itemBindingInfo&&t.itemBindingInfo.template.getAggregation("cells");var o=a(t,3);var c=[];for(var v=0;v<o.length;v++){var f=n(g,o,v,l,s);var h=r(u[o[v]],s);if(Object.keys(f).length||Object.keys(h).length){c.push({title:f.header,value:h.value,state:h.state,actions:h.actions,hAlign:f.hAlign})}}return{data:e.getData(i.data.request.batch,t.view.getModel()),row:{columns:c}}}return{getTableContent:i,getCellValue:r}});
//# sourceMappingURL=TableContentHelper.js.map