/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * Static class with reusable checks to collect data from Fiori Elements application.
 */
sap.ui.define(["sap/ovp/support/lib/CommonMethods","sap/ui/thirdparty/jquery","sap/ui/core/Core","sap/ovp/cards/CommonUtils"],function(e,jQuery,t,n){"use strict";var r={UNKNOWN:"Unknown",LISTREPORT:"sap.suite.ui.generic.template.ListReport",ANALYTICALLISTPAGE:"sap.suite.ui.generic.template.AnalyticalListPage",OVERVIEWPAGE:"sap.ovp"};var i={UNKNOWN:"CA-UI5-ST",LISTREPORT:"CA-UI5-ST",ANALYTICALLISTPAGE:"CA-UI5-ST-ALP",OVERVIEWPAGE:"CA-UI5-ST-OVP"};function a(){var e=n.getApp();if(e){var t=e.getOwnerComponent().oOvpConfig;return t.sapUICoreVersionInfo}}function p(e){return e&&e["sap.app"]&&e["sap.app"].ach?e["sap.app"].ach:""}function o(e){if(e&&e["sap.app"]&&e["sap.app"].id){if(e["sap.app"].id==="${project"+".artifactId}"){return g()}return e["sap.app"].id}return""}function s(e){return e&&e["sap.fiori"]&&e["sap.fiori"].registrationIds&&e["sap.fiori"].registrationIds.length>0?e["sap.fiori"].registrationIds:[]}function u(e,t){for(var n=0;n<e.length;n++){if(e[n]&&e[n].id&&e[n].id.indexOf(t)!==-1){return e[n].id.split("::")[0]}}return""}function f(){var n=jQuery(".sapUiXMLView"),r=jQuery(".ovpWrapper"),i="::sap.suite.ui.generic.template",a;if(r&&r.length&&r.length>0){n=r.closest(".sapUiXMLView");if(n&&n.length&&n.length>0&&n[0]&&n[0].id&&t.byId(n[0].id)&&t.byId(n[0].id).getController()&&t.byId(n[0].id).getController().getOwnerComponent()&&t.byId(n[0].id).getController().getOwnerComponent().getMetadata()&&t.byId(n[0].id).getController().getOwnerComponent().getMetadata().getManifest()){a=t.byId(n[0].id).getController().getOwnerComponent().getMetadata().getManifest()}else{return undefined}}else if(n&&n.length&&n.length>0){for(var p=0;p<n.length;p++){if(n[p].id.indexOf(i)!==-1){if(t.byId(n[p].id)&&t.byId(n[p].id).getController()&&t.byId(n[p].id).getController().getOwnerComponent()&&t.byId(n[p].id).getController().getOwnerComponent().getAppComponent()&&t.byId(n[p].id).getController().getOwnerComponent().getAppComponent().getMetadata()&&t.byId(n[p].id).getController().getOwnerComponent().getAppComponent().getMetadata().getManifest()){a=t.byId(n[p].id).getController().getOwnerComponent().getAppComponent().getMetadata().getManifest();break}}}if(!a||!e.hasObjectContent(a)){return undefined}if(a&&e.hasObjectContent(a)&&a["sap.app"]&&a["sap.app"].id&&a["sap.app"].id==="${project"+".artifactId}"){a["sap.app"].id=u(n,i)}}else{return undefined}return a}function g(){var t=f(),n,r,i="::sap.suite.ui.generic.template";if(t&&e.hasObjectContent(t)&&t["sap.app"]&&t["sap.app"].id){n=jQuery(".sapUiXMLView");r=jQuery(".ovpWrapper");if(r&&r.length&&r.length>0){n=r.closest(".sapUiXMLView")}if(n&&n.length&&n.length>0){return u(n,i)}}return""}function l(e){if(!e){return""}var t=e.replace(/\./g,"/");return sap.ui.require.toUrl(t,"/manifest.json")}function c(e,t,n){if(!e||!n){return""}if(n.indexOf("./")===0||n.indexOf("../")===0){if(!t){return""}return e+t.substring(0,t.lastIndexOf("/")+1)+n}if(n.indexOf("/")===0){return e+n}return""}function d(e){if(e){return e.replace("manifest.json","")}return""}function I(e){if(!e){return false}for(var t in r){if(!r.hasOwnProperty(t)){continue}if(r[t]===e){return true}}return false}function C(e){if(e===r.UNKNOWN){return i.UNKNOWN}else if(e===r.LISTREPORT){return i.LISTREPORT}else if(e===r.ANALYTICALLISTPAGE){return i.ANALYTICALLISTPAGE}else if(e===r.OVERVIEWPAGE){return i.OVERVIEWPAGE}else{return i.UNKNOWN}}function O(e){return e&&e.hasOwnProperty("sap.ovp")&&Object.keys(e["sap.ovp"]).length!==0}function A(e){if(!(e&&e["sap.ui.generic.app"]&&e["sap.ui.generic.app"].pages&&e["sap.ui.generic.app"].pages!==[])){return false}var t=e["sap.ui.generic.app"].pages;for(var n in t){if(t.hasOwnProperty(n)){if(t[n]&&t[n].component&&t[n].component.name&&t[n].component.name==="sap.suite.ui.generic.template.ListReport"){return true}}}return false}function m(e){if(!(e&&e["sap.ui.generic.app"]&&e["sap.ui.generic.app"].pages&&e["sap.ui.generic.app"].pages!==[])){return false}var t=e["sap.ui.generic.app"].pages;for(var n in t){if(t.hasOwnProperty(n)){if(t[n]&&t[n].component&&t[n].component.name&&t[n].component.name==="sap.suite.ui.generic.template.AnalyticalListPage"){return true}}}return false}function L(e){if(e){if(O(e)){return r.OVERVIEWPAGE}else if(A(e)){return r.LISTREPORT}else if(m(e)){return r.ANALYTICALLISTPAGE}}return r.UNKNOWN}function y(){return O(f())}function P(){return A(f())}function E(){return m(f())}function T(){var e=f();if(O(e)){return r.OVERVIEWPAGE}else if(A(e)){return r.LISTREPORT}else if(m(e)){return r.ANALYTICALLISTPAGE}return r.UNKNOWN}return{mFloorplans:r,mTicketComponents:i,getUI5VersionInfo:a,getApplicationComponentByManifest:p,getApplicationIDByManifest:o,getRegistrationIDsByManifest:s,getComponentIDByStructure:g,getManifestByStructure:f,getManifestPath:l,getManifestURL:c,getRootPath:d,isValidFloorplan:I,getTicketComponentForFloorplan:C,isOverviewPageByManifest:O,isListReportByManifest:A,isAnalyticalListPageByManifest:m,getFloorplanByManifest:L,isOverviewPageByStructure:y,isListReportByStructure:P,isAnalyticalListPageByStructure:E,getFloorplanByStructure:T}});
//# sourceMappingURL=CommonChecks.js.map