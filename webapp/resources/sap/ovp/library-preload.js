//@ui5-bundle sap/ovp/library-preload.js
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/app/Component", ["sap/fe/core/AppComponent","sap/fe/core/buildingBlocks/IBuildingBlockOwnerComponent","sap/fe/navigation/NavigationHandler","sap/base/util/ObjectPath","sap/ui/model/json/JSONModel","sap/ovp/ui/DashboardLayoutUtil","sap/ui/core/mvc/ViewType","sap/ui/model/resource/ResourceModel","sap/ovp/app/resources","sap/ui/core/CustomData","sap/base/util/merge","sap/base/util/isEmptyObject","sap/ovp/app/OVPLogger","sap/ui/Device","sap/ovp/cards/CommonUtils","sap/ovp/placeholder/placeholderHelper","sap/m/App","sap/m/DynamicDateUtil","sap/ovp/cards/MetadataAnalyser","sap/insights/CardHelper","sap/ui/VersionInfo","sap/ui/core/mvc/View","sap/suite/ui/commons/collaboration/CollaborationHelper","sap/ovp/cards/charts/OVPChartFormatter","sap/ovp/insights/CardProvider","sap/ui/core/Lib","sap/ui/base/DesignTime","sap/ui/core/ResizeHandler","sap/ui/rta/RuntimeAuthoring"],function(e,t,i,n,r,a,o,s,l,u,g,p,c,f,d,h,v,y,m,b,C,P,E,T,S,O,F,D,R){"use strict";var w=new c("OVP.app.Component");return e.extend("sap.ovp.app.Component",{metadata:{manifest:"json",routing:{config:{routerClass:"sap.m.routing.Router"},targets:{},routes:[]},interfaces:["sap.fe.core.buildingBlocks.IBuildingBlockOwnerComponent"],properties:{},designtime:{actions:{},tool:{start:function(e){var t=e.getModel("ui");if(t){t.setProperty("/bRTAActive",true)}},stop:function(e){var t=e.getModel("ui");if(t){t.setProperty("/bRTAActive",false)}}},aggregations:{rootControl:{actions:{},propagateMetadata:function(){return{}}}}},version:"1.141.0",library:"sap.ovp.app",dependencies:{libs:["sap.ovp"],components:[]},config:{fullWidth:true,hideLightBackground:true}},onServicesStarted:function(){if(E&&E.processAndExpandHash&&typeof E.processAndExpandHash==="function"){E.processAndExpandHash().catch(function(e){w.error(e)}).finally(function(){this._createContent()}.bind(this))}else{this._createContent()}},getRoutingService:function(){return{beforeExit:function(){}}},getDashboardLayoutUtil:function(){return this.oDashboardLayoutUtil},_getOvpCardOriginalConfig:function(e){var t=this.getOvpConfig();return t.cards[e]},suspend:function(){if(this.ovpConfig.bInsightRTEnabled){S.unregisterProvider(this.getId())}var e=this.createId("mainView"),t=this.byId(e);var i=t.getController();var n=i.getLayout().resizeHandlerId;if(n){D.deregister(n)}},isCollaborationManagerServiceEnabled:function(){return false},restore:function(){var e=this.ovpConfig.cards,t=this.createId("mainView"),n=this.byId(t);var r=this.ovpConfig.refreshStrategyOnAppRestore&&this.ovpConfig.refreshStrategyOnAppRestore.entitySets;var a=n.getController();var o=new i(a,"ODataV2");d.enable(a,o);if(a.isDragAndDropEnabled()){var s=d.getUshellContainer();if(s){a.initShowHideCardsButton()}}if(typeof r==="object"){var l=Object.keys(r);var u=e.filter(function(e){return l.includes(e.settings.entitySet)});for(var g=0;g<u.length;g++){var p=u[g];var c=n.createId(p.id);var f=this.byId(c);var h=f.getComponentInstance()&&f.getComponentInstance().getRootControl()&&f.getComponentInstance().getRootControl().getController();if(h){h.refreshCardContent()}}}T.registerCustomFormatters();if(this.ovpConfig.bInsightRTEnabled){var v=this.getManifestEntry("sap.app").id,y=this.getManifestObject().getRawJson(),m=y["sap.fiori"]&&y["sap.fiori"].registrationIds&&y["sap.fiori"].registrationIds[0]||v;e.forEach(function(e){var t=n.createId(e.id),i=this.byId(t),r=i.getComponentInstance()&&i.getComponentInstance().getRootControl()&&i.getComponentInstance().getRootControl().getController(),a=r&&r.getView()&&r.getView().getModel("ovpCardProperties");S.addInsightCard(a,m)}.bind(this));S.init(this.getId())}a.applyFiltersForCustomCards();if(a.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){a.getLayout().initResizeHandler()}else{var b=a.getLayout().getColumnResolutionList();a.getLayout().initResizeHandlerOrMediaListeners(b)}},getOvpConfig:function(){var e;var t=[];var i=this.getMetadata();while(i&&i.getComponentName()!=="sap.ovp.app"){e=this.getManifestEntry("sap.ovp");if(e){t.unshift(e)}i=i.getParent()}t.unshift({});t.unshift(true);e=g.apply(g,t);return e},_removeExtraArrayElements:function(e,t){var i=e["staticContent"],n=t["staticContent"],r=e["tabs"],a=t["tabs"];if(i&&n){if(i.length>n.length){e["staticContent"].splice(n.length,i.length-n.length)}}if(r&&a){if(r.length>a.length){e["tabs"].splice(a.length,r.length-a.length)}}},_emptyAllArrayElements:function(e,t){var i=e["staticContent"],n=t["staticContent"],r=e["tabs"],a=t["tabs"];if(i&&n){for(var o=0;o<i.length;o++){e["staticContent"][o]={}}}if(r&&a){for(var o=0;o<r.length;o++){e["tabs"][o]={}}}},_mergeObjects:function(e,t){for(var i in t){if(t.hasOwnProperty(i)){var n=t[i];if(typeof n=="object"&&e[i]){if(n.operation==="DELETE"){delete e[i]}else{this._mergeObjects(e[i],n)}}else{if(typeof n=="object"&&!e[i]&&n.operation==="DELETE"){continue}e[i]=n}}}return e},_mergeLayerObject:function(e,t){if(!e[t+".settings"]){return e}var i=g({},e["settings"]),n=g({},e[t+".settings"]);this._removeExtraArrayElements(i,n);this._emptyAllArrayElements(i,n);e["settings"]=this._mergeObjects(i,n);return e},_mergeKeyUserChanges:function(e){if(!e.hasOwnProperty("customer.settings")&&!e.hasOwnProperty("customer_base.settings")&&!e.hasOwnProperty("vendor.settings")){return e}e=this._mergeLayerObject(e,"vendor");e=this._mergeLayerObject(e,"customer_base");e=this._mergeLayerObject(e,"customer");return e},_getFullyQualifiedNameForEntity:function(e,t){var i="",n;if(!e){return""}if(e.indexOf(".")>-1){return e}var r=t.getMetaModel();if(d.isODataV4(t)){var a=r.getObject("/");var o=a[e];i=o.$Type;return i}else{var s=r&&r.getODataEntityContainer();i=s&&s.namespace;if(i&&!(e.indexOf(i)>-1)){n=i+"."+e}else{n=e}return n}},_getDatePropertiesFromEntitySet:function(e,t,i){var n=[],r=[];var a=e.getMetaModel();var o=a&&a.getODataEntityContainer();var s=o.entitySet.filter(function(e){return e.entityType===i});var l=s.length>0?s[0]:{};var u=m.checkAnalyticalParameterisedEntitySet(e,l.name);if(u){var g=m.getParametersByEntitySet(e,l.name);if(g.entitySetName){n=m.getPropertyOfEntitySet(e,g.entitySetName);n.forEach(function(e){e._filterRestriction="single-value"})}}n=n.concat(t.property);for(var c in n){var f={};if(d.isDate(n[c])){f.PropertyPath=n[c].name}if(!p(f)){r.push(f)}}return r},_getAllControlConfiguration:function(e,t,i){for(var n=0;n<e.length;n++){if(i[e[n].PropertyPath]){var r=false;for(var a=0;a<t.length;a++){if(t[a].PropertyPath===e[n].PropertyPath){r=true}}if(!r){e[n].bNotPartOfSelectionField=true;t.push(e[n])}}}return t},_getSettingsForDateProperties:function(e,t){var i={};for(var n in e){if(t.fields&&t.fields[e[n].PropertyPath]){i[e[n].PropertyPath]=this.getConditionTypeForDateSetting(t.fields[e[n].PropertyPath])}else{if(t.customDateRangeImplementation||t.filter||t.selectedValues){i[e[n].PropertyPath]=this.getConditionTypeForDateSetting(t)}}}return i},getConditionTypeForDateSetting:function(e){if(e.customDateRangeImplementation){return{customDateRangeImplementation:e.customDateRangeImplementation}}else if(e.filter){return{filter:e.filter}}else if(e.selectedValues){return{selectedValues:e.selectedValues,exclude:e.exclude!==undefined?e.exclude:true}}else if(e.defaultValue){return{defaultValue:e.defaultValue}}return undefined},getEntitySetFromEntityType:function(e,t,i){if(i){var n=e.getObject("/")||{},r=Object.keys(n),a=r.filter(function(e){return t===(n[e]&&n[e]["$Type"])});return a&&a[0]||""}else{var n=e&&e.getODataEntityContainer(),o=n&&n.entitySet||[],a=o.filter(function(e){return t===(e&&e.entityType)}).map(function(e){return e&&e.name});return a&&a[0]||""}},getViewSettings:function(e){if(this.getRouter()){this.getRouter().initialize()}var t=this.getManifestEntry("sap.app");var i=this.getManifestEntry("sap.ui");var s=n.get("icons.icon",i);var l=this.getModel(e.globalFilterModel);var c=l&&l.getMetaModel();this.setModel(l);var h=this.getMetadata().getComponentName();var v=h.replace(/\./g,"/");e.baseUrl=sap.ui.require.toUrl(v);e.useMacroFilterBar=l?d.isODataV4(l):false;if(e.smartVariantRequired===undefined||e.smartVariantRequired===null){e.smartVariantRequired=true}if(e.enableLiveFilter===undefined||e.enableLiveFilter===null){e.enableLiveFilter=true}if(e.showDateInRelativeFormat===undefined||e.showDateInRelativeFormat===null){e.showDateInRelativeFormat=true}if(e.filterSettings&&e.filterSettings.dateSettings&&e.filterSettings.dateSettings.useDateRange!==undefined&&e.useDateRangeType!==undefined){throw new Error("Defining both useDateRange and useDateRangeType in the manifest is not allowed")}e.useDateRangeType=e.filterSettings&&e.filterSettings.dateSettings&&e.filterSettings.dateSettings.useDateRange!==undefined?e.filterSettings.dateSettings.useDateRange:e.useDateRangeType;if(e.useDateRangeType===undefined||e.useDateRangeType===null){e.useDateRangeType=false}if(e.bHeaderExpanded===undefined||e.bHeaderExpanded===null){e.bHeaderExpanded=f.system.desktop?true:false}if(e.chartSettings===undefined||e.chartSettings===null){e.chartSettings={}}if(e.chartSettings.showDataLabel===undefined||e.chartSettings.showDataLabel===null){e.chartSettings.showDataLabel=false}if(e.globalFilterEntitySet&&e.globalFilterEntitySet!==" "){var m=d.isODataV4(l);if(c){var b=m?c.getObject("/"+e.globalFilterEntitySet):c.getODataEntitySet(e.globalFilterEntitySet);if(b){e.globalFilterEntityType=m?b.$Type:b.entityType}}}var C=e.globalFilterEntitySet?e.globalFilterEntitySet:e.globalFilterEntityType;if(e.globalFilterEntityType&&e.globalFilterEntityType!==" "&&e.globalFilterEntityType.length>0){e.globalFilterEntityType=this._getFullyQualifiedNameForEntity(e.globalFilterEntityType,l);e.globalFilterEntityTypeNQ=e.globalFilterEntityType.split(".").pop()}var P=new r(e);var E=R.willRTAStartAfterReload();P.setProperty("/bRTAActive",E);P.setProperty("/applicationId",n.get("id",t));P.setProperty("/title",n.get("title",t));P.setProperty("/description",n.get("description",t));if(e.globalFilterEntityType){var T,S;if(!e.globalFilterEntitySet){e.globalFilterEntitySet=this.getEntitySetFromEntityType(c,e.globalFilterEntityType,d.isODataV4(l))}if(d.isODataV4(l)){T=c.getObject("/"+e.globalFilterEntityType+"@com.sap.vocabularies.UI.v1.SelectionFields");S=c.getObject("/"+e.globalFilterEntityType);P.setProperty("/mainEntityVersion","ODataV4")}else{S=c.getODataEntityType(e.globalFilterEntityType);T=g([],S["com.sap.vocabularies.UI.v1.SelectionFields"]);P.setProperty("/mainEntityVersion","ODataV2");if(e.filterSettings&&e.filterSettings.dateSettings){var O=this._getDatePropertiesFromEntitySet(l,S,e.globalFilterEntityType);var F=this._getSettingsForDateProperties(O,e.filterSettings.dateSettings);if(P.getProperty("/useDateRangeType")&&F&&!p(F)){P.setProperty("/useDateRangeType",false);O.forEach(function(e){if(!F.hasOwnProperty(e["PropertyPath"])||!F[e["PropertyPath"]]){var t=e["PropertyPath"];F[t]={selectedValues:y.getAllOptionKeys().toString(),exclude:false}}})}T=this._getAllControlConfiguration(O,T,F);P.setProperty("/datePropertiesSettings",F)}}P.setProperty("/allControlConfiguration",T);P.setProperty("/mainEntityType",S)}if(s){if(s.indexOf("sap-icon")<0&&s.charAt(0)!=="/"){s=e.baseUrl+"/"+s}P.setProperty("/icon",s)}var D=e.cards;var w=[];var M;for(var _ in D){if(D.hasOwnProperty(_)&&D[_]){M=this._mergeKeyUserChanges(D[_]);M.id=_;w.push(M)}}w.sort(function(e,t){if(e.id<t.id){return-1}else if(e.id>t.id){return 1}else{return 0}});P.setProperty("/cards",w);if(this.inResizableTestMode()===true){e.containerLayout="resizable"}if(e.containerLayout&&e.containerLayout==="resizable"){P.setProperty("/cardContainerFragment","sap.ovp.app.DashboardCardContainer");P.setProperty("/dashboardLayout",e.resizableLayout);var A=new a(P);this.oDashboardLayoutUtil=A}else{P.setProperty("/cardContainerFragment","sap.ovp.app.CardContainer")}this.setModel(P,"ui");var I=this._getOvpLibResourceBundle();this.setModel(I,"ovplibResourceBundle");this.setModel(I,"sap.fe.i18n");var S;if(d.isODataV4(l)){S="/"+e.globalFilterEntityType}else{S=c&&c.getODataEntityType(e.globalFilterEntityType,true)}var V=this.createId("mainView");var L=new r({});return{id:V,height:"100%",preprocessors:{xml:{bindingContexts:{ui:P.createBindingContext("/"),meta:c.createBindingContext(S),contextPath:c.createBindingContext("/"+C),entitySet:C,converterContext:L.createBindingContext("/")},models:{ui:P,meta:c,contextPath:c,metaModel:c,converterContext:L},appComponent:this}},type:o.XML,viewName:"sap.ovp.app.Main",async:true,customData:[new u({key:"sap-ui-custom-settings",value:{"sap.ui.dt":{designtime:"sap/ovp/ui/OVPWrapper.designtime"}}})]}},_showErrorPage:function(){var e=this._getOvpLibResourceBundle();P.create({height:"100%",type:o.XML,viewName:"sap.ovp.app.Error"}).then(function(t){t.setModel(e,"ovplibResourceBundle");this.setAggregation("rootControl",t);if(this.oContainer){this.oContainer.invalidate()}}.bind(this))},_formParamString:function(e){var t=Object.keys(e);var i;var n="?";for(i=0;i<t.length;i++){n=n+t[i]+"="+e[t[i]]+"&"}return n.slice(0,-1)},_checkForAuthorizationForCards:function(e){var t=F.isDesignModeEnabled();if(t){return Promise.resolve(e)}var i=[];var n=[];for(var r in e.cards){var a=e.cards[r];if(a&&a.settings&&a.settings.requireAppAuthorization){n.push(r);i.push({target:{shellHash:a.settings.requireAppAuthorization}})}}var o=d.getUshellContainer();if(i.length>0&&o){return o.getServiceAsync("Navigation").then(function(e){return e.isNavigationSupported(i)}).then(function(t){var i=n.filter(function(e,i){if(!t[i].supported){return e}});for(var r=0;r<i.length;r++){for(var a in e.cards){if(i[r]===a){delete e.cards[a];break}}}return Promise.resolve(e)}).catch(function(e){w.error(e);return Promise.reject(e)})}else{return Promise.resolve(e)}},_checkForAuthorizationForLineItems:function(){return new Promise(function(e,t){var i=[],n=[],r=[];var a=this.getOvpConfig();var o=a["cards"];for(var s in o){if(o.hasOwnProperty(s)&&o[s]){var l=o[s];var u=l.settings;if((l.template==="sap.ovp.cards.linklist"||l.template==="sap.ovp.cards.v4.linklist")&&u.listFlavor==="standard"&&u.staticContent){var g=u.staticContent;for(var p=0;p<g.length;p++){if(g[p].semanticObject||g[p].action){var c="#"+g[p].semanticObject+"-"+g[p].action;if(g[p].params){var f=this._formParamString(g[p].params);c=c+f}if(n.indexOf(s)===-1){n.push(s)}if(i.indexOf(c)===-1){i.push(c);r.push({target:{shellHash:c}})}}}}}}var h=d.getUshellContainer();if(h){return h.getServiceAsync("Navigation").then(function(t){t.isNavigationSupported(r).then(function(t){var r=this.getOvpConfig();this._aCardsWithStaticContent=n;for(var a=0;a<t.length;a++){if(t[a].supported===false&&this._aCardsWithStaticContent){for(var o=0;o<this._aCardsWithStaticContent.length;o++){var s=r["cards"][this._aCardsWithStaticContent[o]].settings.staticContent;for(var l=s.length-1;l>=0;l--){var u="#"+s[l].semanticObject+"-"+s[l].action;if(s[l].params){var g=this._formParamString(s[l].params);u=u+g}if(i[a]===u){s.splice(l,1)}}r["cards"][this._aCardsWithStaticContent[o]].settings.staticContent=s}}}delete this._aCardsWithStaticContent;e(r)}.bind(this)).catch(function(e){w.error(e);return Promise.reject(e)})}.bind(this))}else{e(a)}}.bind(this))},createContent:function(){},_createContent:function(){var e=this.getOvpConfig();var t=this.getModel(e.globalFilterModel);var i=d.isODataV4(t);var n=[this._checkForAuthorizationForLineItems(e),l.pResourcePromise,this._isInsightRTEnabled(),C.load({library:"sap.ui.core"}),this._isTeamsModeActive()];if(i){n.unshift(t&&t.getMetaModel().requestObject("/"+e.globalFilterModel))}else{n.unshift(t&&t.getMetaModel().loaded())}if(t&&!this.getAggregation("rootControl")){Promise.all(n).then(function(e){var t=e[3];this.ovpConfig=e[1];this.ovpConfig.sapUICoreVersionInfo=e[4];this.ovpConfig.isTeamsModeActive=e[5];this.ovpConfig.enableV4Insight=this._isInsightEnabledForV4Cards();if(this._isInsightDTEnabled()){this.ovpConfig.bInsightDTEnabled=true;return Promise.resolve(this.ovpConfig)}else{this.ovpConfig.bInsightRTEnabled=t?true:false;return this._checkForAuthorizationForCards(this.ovpConfig)}}.bind(this)).then(function(e){this.oOvpConfig=e;if(i){this.oMacrosLoaded=O.load({name:"sap.fe.macros"});this.oMacrosLoaded.then(function(){w.info("FE Macros loaded successfully");this.runCreateViewAsOwner()}.bind(this)).catch(function(e){w.error("Error while loading sap.fe.macros",e)})}else{this.runCreateViewAsOwner()}}.bind(this));if(!i){t.attachMetadataFailed(function(){this._showErrorPage()}.bind(this))}}},runCreateViewAsOwner:function(){this.runAsOwner(function(){this.createView()}.bind(this))},createView:function(){var e=this.createId("host"),t=new v(e),i=this.getViewSettings(this.oOvpConfig);P.create(i).then(function(e){e.bindElement({path:"/",model:"internal"});var i=new r({});e.setModel(i,"viewData");e.setModel(new r(e),"$view");if(h.isPlaceHolderEnabled()){t.addPage(e);this.setAggregation("rootControl",t);h.showPlaceholder(t)}else{this.setAggregation("rootControl",e)}this.oContainer.invalidate()}.bind(this)).catch(function(e){w.error("Error during view creation"+e)})},_getOvpLibResourceBundle:function(){if(!this.ovplibResourceBundle){var e=O.getResourceBundleFor("sap.ovp");this.ovplibResourceBundle=e?new s({bundleUrl:e.oUrlInfo.url,bundle:e}):null}return this.ovplibResourceBundle},createMapForEntityContainer:function(e){var t={};var i=e.entitySet;for(var n=0;n<i.length;n++){t[i[n].name]=i[n].entityType}return t},inResizableTestMode:function(){return this._getQueryParamUpToTop("resizableTest")=="true"},inLazyLoadingTestMode:function(){return this._getQueryParamUpToTop("sap-ovp-xx-lazyloadingtest")=="true"||this._getQueryParamUpToTop("sap-fe-xx-lazyloadingtest")=="true"},_isInsightEnabledForV4Cards:function(){return this._getQueryParamUpToTop("enable-v4-insight")==="true"},_isInsightDTEnabled:function(){return this._getQueryParamUpToTop("mode")==="myInsight"||this._getQueryParamUpToTop("mode")==="DT"},_isInsightRTEnabled:function(){var e=this._getQueryParamUpToTop("mode")==="RT";return new Promise(function(t,i){if(!b||!b.getServiceAsync){t(e);return}return b.getServiceAsync().then(function(i){t(!!i||e)}).catch(function(i){w.info("Failed to get CardHelperServiceInstance."+i);t(e)})})},_isTeamsModeActive:function(){var e=false;return new Promise(function(t,i){if(E&&E.isTeamsModeActive&&typeof E.isTeamsModeActive==="function"){return E.isTeamsModeActive().then(function(t){e=t}).catch(function(e){w.error("Failed to get Collaboration Helper."+e)}).finally(function(){t(e)})}else{t(e)}})},_getQueryParamUpToTop:function(e){var t=window;var i=this.getQueryParam(t.location.search,e);if(i!=null){return i}if(t==t.parent){return null}t=t.parent;return null},getQueryParam:function(e,t){var i=null;if(!e){return i}if(e.indexOf("?")!=-1){e=e.substring(e.indexOf("?"))}if(e.length>1&&e.indexOf(t)!=-1){e=e.substring(1);var n=e.split("&");for(var r=0;r<n.length;r++){var a=n[r].split("=");if(a[0]==t){i=a[1];break}}}return i},getAppComponent:function(){return this},getRootController:function(){return undefined},getFullContextPath:function(){return undefined},getMetaModel:function(e){var t=this.getModel(e);if(t){return t.getMetaModel()}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/app/FilterHelper", ["sap/ui/model/Filter"],function(t){"use strict";function e(t,e,r,a){var i=[];if(e.length>0&&t){var o=t.entityType;var f=n(t.property,e[0],t.name,o,r,a);if(f){i.push(f)}}return i}function n(e,a,i,o,f,p){if(!a._bMultiFilter){a.sPath=a.sPath.split("/").pop();var u=r(e,a.sPath,i,o,f,p);if(u){a.sPath=u;return a}}else{var s=a.aFilters;var m,v=[];if(s){for(var c=0;c<s.length;c++){m=n(e,s[c],i,o,f,p);if(m){v.push(m)}}if(v.length>0){return new t(v,a.bAnd)}}}}function r(t,e,n,r,a,i){var o,f;for(o=0;o<t.length;o++){if(t[o].name===e){f=t[o].name;return f}if("P_"+t[o].name===e||t[o].name==="P_"+e){f=t[o].name;return f}}if(!n||!r||!a||!i){return}var p=a&&a.oMetadata&&a.oMetadata._getEntityTypeByName(n);var u=i.oMetadata._getEntityTypeByName(r);if(!p||!u){return}var s="com.sap.vocabularies.Common.v1.SemanticObject";var m="com.sap.vocabularies.Common.v1.SemanticObjectMapping";var v=a.oAnnotations.getData();if(!v||!v.propertyAnnotations){return}var c=v.propertyAnnotations[p.namespace+"."+p.name];var l=i.oAnnotations.getData();if(!l||!l.propertyAnnotations){return}var y=l.propertyAnnotations[u.namespace+"."+u.name];var g=y&&y[e];if(!g||!g[s]){return}var h,P,b,A,d;for(h in c){P=c[h];if(P[s]&&P[s].String===g[s].String){b=P[m];if(!b){continue}A=b.length;d="";while(A--){if(b[A].SemanticObjectProperty.String===e){d=b[A].LocalProperty.PropertyPath;break}}if(d!==""){for(o=0;o<t.length;o++){if(t[o].name===d){f=t[o].name;return f}}}}}return f}function a(t,e){return t}return{getEntityRelevantFilters:e,mergeFilters:a}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/app/Main.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/FilterOperator","sap/ui/model/odata/ODataUtils","sap/ovp/cards/generic/Component","sap/ovp/cards/v4/generic/Component","sap/fe/navigation/NavigationHandler","sap/ovp/cards/CommonUtils","sap/ovp/cards/PersonalizationUtils","sap/ui/model/Filter","sap/fe/navigation/SelectionVariant","sap/ui/comp/state/UIState","sap/ui/Device","sap/ovp/ui/SmartphoneHeaderToggle","sap/ui/model/odata/v2/ODataModel","sap/ui/model/odata/ODataMetadata","sap/ui/model/analytics/odata4analytics","sap/ovp/support/lib/CommonMethods","sap/ovp/app/resources","sap/ovp/app/TemplateBaseExtension","sap/ui/core/mvc/ControllerExtension","sap/ovp/app/OVPUtils","sap/ovp/app/ShareUtils","sap/base/security/encodeURL","sap/ui/thirdparty/jquery","sap/base/util/merge","sap/ui/fl/apply/api/FlexRuntimeInfoAPI","sap/ui/core/CustomData","sap/ovp/app/OVPLogger","sap/base/util/isEmptyObject","sap/ovp/cards/semanticDateRangeTypeHelper","sap/ovp/placeholder/placeholderHelper","sap/ui/core/Component","sap/ui/base/Event","sap/ovp/app/ManageCardsUtils","sap/ovp/handlers/IAppStateHandler","sap/ovp/handlers/SmartFilterbarHandler","sap/ovp/insights/CardProvider","sap/ui/core/EventBus","sap/ui/core/Lib","sap/ui/core/Element","sap/ovp/filter/FilterUtils"],function(e,t,a,r,i,s,n,o,l,d,h,f,g,u,c,p,v,y,m,b,C,F,P,jQuery,S,M,O,w,A,V,I,_,E,L,D,T,R,x,B,G,U){"use strict";var N=new w("OVP.app.Main");var k="sap.ovp.app.customData",j="sap.ovp.app.extensionData",H;return e.extend("sap.ovp.app.Main",{getCustomAppStateDataExtension:function(e){},restoreCustomAppStateDataExtension:function(e){},getCustomFilters:function(){},onCustomActionPress:function(e){},onCustomParams:function(e){},getAllowedNumberOfCards:function(){},modifyStartupExtension:function(e){},getCustomMessage:function(e,t){},onBeforeRebindPageExtension:function(){},telemetry:{storeAction:function(){}},oRefreshTimer:null,nRefreshInterval:0,filterItemInFocus:null,bFinishedCardsCreationProcess:false,storeIncomingDeltaChanges:function(e){this.deltaCardsInfo=e?e:[]},appendIncomingDeltaChange:function(e){this.deltaChanges.push(e)},templateBaseExtension:m,onInit:function(){this.bDeltaChangesEnabled=false;this.bResetChartAxisFormatter=false;this.deltaChanges=[];this.bInitialApplicationLoad=false;this.bWarningDisplayedOnUnhidingCards=false;this._initFlexibilityPersonalization();this.globalEventBus=x.getInstance();this.oShareUtils=new F(this);this.oManageCardsUtils=new L(this);this.getView().loaded().then(function(){var e=this.getOwnerComponent();var t=e.getMetadata();if(e&&t&&t.getManifest()){v.setAppComponent(this.getOwnerComponent())}v.setApplicationStatus(v.mApplicationStatus.LOADING);v.publishEvent("elements","ViewRenderingStarted",{});this.oContainer=n.getUshellContainer();this.aErrorCards=[];this.oCardsModels={};this.aFilters=[];this.errorHandlingObject={atLeastOneRequestSuccess:false,errorLoadingTimeout:{}};this.sPreviousEntityType="";this.sCurrentEntityType="";this.oLoadedComponents={};this.bGlobalFilterLoaded=false;this.bGoButtonPressed=false;this.bSearchButtonPressed=false;this.fnMacroFilterBarLoaded=undefined;this.isInitialLoading=true;this.bLoadDataOnMFBSearch=true;this.isMacroFilterBar;this.bSearchTriggeredManually=false;this.bInitialMacroFilterBarSearch=false;this.bSkipIAppStateGeneration=false;var a=this.getUIModel();this.bDisableErrorPage=a&&a.getProperty("/disableErrorPage");this.oNavigationHandler=this.oNavigationHandler||new s(this,"ODataV2");this.getLayout().addStyleClass("ovpLayoutElement");this.oState={};this.oState.oSmartFilterbar=this.byId("ovpGlobalFilter");this._initGlobalFilter();this.oShareUtils.init();n.enable(this,this.oNavigationHandler);this._loadCardComponent("sap.ovp.cards.error");this._loadCardComponent("sap.ovp.cards.v4.error");H=this.getView().byId("sapOvpShareButton");if(H){H.addEventDelegate({onsapspace:function(e){e.preventDefault();this.onShareButtonPress()},onsapenter:function(e){this.onShareButtonPress()}},this);H.attachBrowserEvent("click",function(){this.onShareButtonPress()}.bind(this))}}.bind(this))},onShareButtonPress:function(){if(H&&H.getVisible()&&H.getEnabled()){this.oShareUtils.onShareButtonAvailableAndPressed(H)}},performRecreationOfCard:function(e){e.settings.baseUrl=this._getBaseUrl();this._clearStoredEntities();this._initCardModel(e.model);e=this._getTemplateForChart(e);this._loadCardComponent(e.template);this._createModelViewMap(e);if(e.settings.tabs&&e.settings.selectedKey){var t=e.settings.selectedKey-1;e.settings.measureAggregate=e.settings.tabs[t].measureAggregate}jQuery.when(this.createCard(e)).then(function(){if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){var t=this.getLayout().getDashboardLayoutUtil();if(t){var a=t.getDashboardLayoutModel();var r=a.getCardById(e.id);t._sizeCard(r);a.extractCurrentLayoutVariant()}}}.bind(this))},onExit:function(){this.bResetChartAxisFormatter=true;var e=this.getOwnerComponent().oOvpConfig;if(e&&e.bInsightRTEnabled){R.unregisterProvider(this.getOwnerComponent().getId())}},_getOriginalCardDescriptorById:function(e){if(!e){return null}var t=this.getView().byId(e);var a=t.getComponentInstance();var r=a.getComponentData();var i=r.appComponent;return i._getOvpCardOriginalConfig(e)},recreateCard:function(e){var t=e.cardId;var a=this._getCardFromManifest(t);var r=this._getOriginalCardDescriptorById(t);if(a.template=="sap.ovp.cards.charts.analytical"||a.template=="sap.ovp.cards.charts.smart.chart"||a.template=="sap.ovp.cards.v4.charts.analytical"){a.settings.chartAnnotationPath=e.chartAnnotationPath;a.settings.colorPalette=e.colorPalette;a.settings.bEnableStableColors=e.bEnableStableColors;if(e.navigation){a.settings.navigation=e.navigation}}if(e.entitySet){a.settings.entitySet=e.entitySet}a.settings.annotationPath=e.annotationPath;a.settings.dynamicSubtitleAnnotationPath=e.dynamicSubtitleAnnotationPath;a.settings.presentationAnnotationPath=e.presentationAnnotationPath;a.settings.selectionAnnotationPath=e.selectionAnnotationPath;a.settings.selectionPresentationAnnotationPath=e.selectionPresentationAnnotationPath;a.settings.kpiAnnotationPath=e.kpiAnnotationPath;a.settings.dataPointAnnotationPath=e.dataPointAnnotationPath;a.settings.identificationAnnotationPath=e.identificationAnnotationPath;a.settings.headerAnnotationPath=e.headerAnnotationPath;a.settings.staticParameters=r&&r.settings&&r.settings.staticParameters;if(e.staticParameters){a.settings.staticParameters=e.staticParameters}if(e.customParams){a.settings.customParams=e.customParams}var i=a.settings.selectedKey;a.settings.selectedKey=e.selectedKey;if(a){var s=this.aErrorCards.indexOf(t);if(s>-1){this.aErrorCards.splice(s,1)}this.performRecreationOfCard(a)}var n={changeType:"viewSwitch",content:{cardId:e.cardId,selectedKey:e.selectedKey,oldKey:i},isUserDependent:true};o.savePersonalization(n,this.getView())},recreateRTAClonedCard:function(e){var t=this._getCardFromManifest(e.id);if(t){t.settings=e.settings;this.performRecreationOfCard(t)}},onBeforeRendering:function(){},onRequestCompleted:function(e){if(e&&e.getParameters()&&e.getParameters().success){var t=e.getParameters().response&&e.getParameters().response.responseText?JSON.parse(e.getParameters().response.responseText):"";if(t&&t.d&&t.d.results&&t.d.results.length==0){this.fVerifyAndSetErrorOrCustomMessageCard(e,true)}}else if(e&&e.getParameters()&&e.getParameters().response&&e.getParameters().response.statusCode!==0){this.fVerifyAndSetErrorOrCustomMessageCard(e,false)}},fVerifyAndSetErrorOrCustomMessageCard:function(e,t){var r;var i=this.getView().getModel("ui").getProperty("/aOrderedCards");for(r in i){var s=this.getView().byId(i[r].id);var o=s&&s.getComponentInstance();var l=o&&o.getComponentData();var d=o&&o.getRootControl();var h=d&&d.getController();var f=h&&h.getCardItemsBinding();if(f&&!n.isODataV4(h.oView.getModel())){var g=e.getParameters().url;var u=f.sCustomParams;var c=f.sFilterParams;var p=f.sPath.replace("/","");var v=f.sCountMode&&f.sCountMode.indexOf("Inline");var y=f.sSortParams;var m=e.getSource().sServiceUrl;var b=e.oSource&&e.oSource.oMetadata;var C=h.getEntityType();var F=this.getView().getModel();var P=h.oView.getModel();var M=this._getEntityRelevantFilters(C,this.aFilters,P,F);var O;try{O=a.createFilterParams(M,b,C)}catch(e){N.error("applying filter on a card which is not valid")}if(c&&O){c="("+c.replaceAll("$filter=","")+")";O="("+O.replaceAll("$filter=","")+")";c="$filter="+c+"%20and%20"+O}if(u.indexOf("_requestFrom")>-1){u=this._removeOVPInternalParam(u)}g=g.split(p).join("").split(u).join("").split(c).join("").split(y).join("").split(m).join("").split(O).join("").split("?").join("").split("&").join("").split("/").join("");if(!v){g=g.split("$inlinecount=allpages").join("")}var w=l&&l.cardId;var A=this._getCardFromManifest(w);if(g){var V=/sap-client=[0-9][0-9][0-9]/i;g=g.replace(V,"");var I=/\$skip=\d+\$top=\d+/;g=g.replace(I,"")}if(A&&!g){var _=S({},e);var E=S({},A);var L=this.getCustomMessage(_,E.id);L=L&&typeof L==="object"?L:"";if(t&&!L){return}if(L){if(t&&L.hasOwnProperty("sMessage")&&L.sMessage&&typeof L.sMessage==="string"){e.getParameters().response.statusText=L.sMessage;if(L.hasOwnProperty("sIcon")&&L.sIcon&&typeof L.sIcon==="string"&&L.sIcon.indexOf("sap-icon")!==-1){e.getParameters().response.sIcon=L.sIcon}}else if(t&&L.hasOwnProperty("sTitle")&&L.sTitle&&typeof L.sTitle==="string"){e.getParameters().response.sTitle=L.sTitle;if(L.hasOwnProperty("sIllustration")&&L.sIllustration&&typeof L.sIllustration==="string"&&L.sIllustration.indexOf("sapIllus")!==-1){e.getParameters().response.sIllustration=L.sIllustration}if(L.hasOwnProperty("sDescription")&&L.sDescription&&typeof L.sDescription==="string"){e.getParameters().response.sDescription=L.sDescription}}else if(!t&&L.hasOwnProperty("sMessage")&&L.sMessage&&typeof L.sMessage==="string"){e.getParameters().response.statusText=L.sMessage}else if(!t&&L.hasOwnProperty("sTitle")&&L.sTitle&&typeof L.sTitle==="string"){e.getParameters().response.sTitle=L.sTitle}if(this.aErrorCards.indexOf(w)==-1){this.aErrorCards.push(A.id);this.createErrorCard(A,e)}else{o.destroy()}}}}}},onAfterRendering:function(){var e=this.getView().getModel("ui");var t=e.getProperty("/enableLazyRendering")||this.getOwnerComponent().inLazyLoadingTestMode();if(t){this.aObservedCards=[];this.observeCardSection()}v.setApplicationStatus(v.mApplicationStatus.RENDERED);v.publishEvent("elements","ViewRendered",{});this.oModelViewMap={};D.oAppStatePromise=null;if(e.getProperty("/refreshIntervalInMinutes")){this.nRefreshInterval=e.getProperty("/refreshIntervalInMinutes");this.nRefreshInterval=(this.nRefreshInterval<=1?1:this.nRefreshInterval)*6e4}var a=this._getCardsModel();var r=[];var i;for(i in a){if(r.indexOf(a[i].model)==-1){r.push(a[i].model)}}var s=this.getOwnerComponent();if(s){for(i in r){var o=s.getModel(r[i]);if(o&&!n.isODataV4(o)){o.attachRequestCompleted(this.onRequestCompleted.bind(this))}}}if(this.initialized){return}this.initialized=true;this.getView().byId("ovpCardPage").addStyleClass("hideOvpCardPage");if(this.getMacroFilterBar()!==undefined){I.hidePlaceholder();var l=this.getMacroFilterBar();if(this.getUIModel()){var d=this.getUIModel().getProperty("/enableLiveFilter");var h=this.getDataLoadSettings();if(l&&!d&&h==="ifAnyFilterExist"){this.verifyMacroFilterLoaded(l)}}}Promise.all([this.oFlexibilityPersonalizationPromise,this.oGlobalFilterLoadedPromise]).then(function(){this.isMacroFilterBar=this.getMacroFilterBar()!==undefined;this.getView().byId("ovpFilterNotFulfilledPage").setVisible(false);this.getView().byId("ovpCardPage").removeStyleClass("hideOvpCardPage");this.persistencyVariantLoaded=true;var t;var a=[],r=[];this.aManifestOrderedCards=this._getCardArrayAsVariantFormat(this.getLayout().getContent());for(var i=0;i<this.aManifestOrderedCards.length;i++){t=this._getCardFromManifest(this.aManifestOrderedCards[i].id);if(t&&t.settings&&t.settings.requireAppAuthorization){a.push({id:t.id,cardIntent:t.settings.requireAppAuthorization});r.push(t.settings.requireAppAuthorization)}}var s=this._mergeLREPContent(this.aManifestOrderedCards);e.setProperty("/aOrderedCards",s);var n=s.some(function(e){return e.visibility});this.organizeCards(s);jQuery(".ovpWrapper .sapFDynamicPageTitle .sapFDynamicPageTitleMainActionsHasContent").css({visibility:"visible"});if(!n){I.hidePlaceholder()}}.bind(this));if(f.system.phone){g.enable(this)}},organizeCards:function(e){var t;var a=[];var r=this.getView().getModel("ui");var i=r.getProperty("/enableLazyRendering")||this.getOwnerComponent().inLazyLoadingTestMode();this.updateLayoutWithOrderedCards();this.updateDashboardLayoutCards(e);if(this.isDragAndDropEnabled()){var s=n.getUshellContainer();if(s){this.initShowHideCardsButton()}}this._clearStoredEntities();e=r.getProperty("/aOrderedCards");for(var o=0;o<e.length;o++){if(e[o].visibility){t=this._getCardFromManifest(e[o].id);if(t){a.push(t)}}}r.setProperty("/visibleCardCount",a.length);r.setProperty("/renderedOvpCards",0);r.setProperty("/renderedCardCount",0);r.setProperty("/updateView",false);if(!i){for(var o=0;o<a.length;o++){this._initCardModel(a[o].model);this._loadCardComponent(a[o].template);this._createModelViewMap(a[o])}}setTimeout(function(){this.getLayout().addStyleClass("ovpLayoutElementShow")}.bind(this),0);var l=this.fGetViewSwitchIndex(a);var d=[];for(var o=0,h=0;h<a.length;o++,h++){while(a[h].id!==e[o].id){o++}t=a[h];if(!t.settings.title){N.error("title is mandatory for card ID : "+t.id)}if(t.settings.tabs){var f=0;var g=l&&l.hasOwnProperty(t.id)?l[t.id]:"";if(g&&typeof g=="number"&&g>0&&g<=t.settings.tabs.length){f=g>=1?g-1:g;this.setOrderedCardsSelectedKey(t.id,g)}else if(e[o].selectedKey&&t.settings.tabs.length>=e[o].selectedKey){f=e[o].selectedKey-1}this.initializeTabbedCard(t,f)}t=this._getTemplateForChart(t);this._loadCardComponent(t.template);t.settings.baseUrl=this._getBaseUrl();if(i){d.push(this.observeCardSection(t))}else{d.push(this.createCard(t))}}Promise.all(d).then(function(){this.bFinishedCardsCreationProcess=true}.bind(this));if(this.busyDialog){this.busyDialog.close()}},initializeCardProvider:function(){var e=this.getView().getModel("ui");var t=e&&e.getProperty("/updateView");var a=this.getOwnerComponent()&&this.getOwnerComponent().getId();if(t){R.onViewUpdate(a)}else{R.init(a)}},_getTemplateForChart:function(e){if(e.template==="sap.ovp.cards.charts.smart.chart"){var t=this.getView();var a=t.getModel(e.model);var r=a.getMetaModel();var i=r.getODataEntitySet(e.settings.entitySet);var s=r.getODataEntityType(i.entityType);var n;var o;var l;var d=false;var h;if(e&&e.settings){if(!d&&e.settings.kpiAnnotationPath){var f=s[e.settings.kpiAnnotationPath];h=f.Detail.DefaultPresentationVariant&&f.Detail.DefaultPresentationVariant.Path;if(h){l=this._getTemplateForChartFromVisualization(h,e,a,i,s);d=l.bTemplateUpdated;if(d){e=l.oCard;return e}}}if(!d&&e.settings.selectionPresentationAnnotationPath){var g=s[e.settings.selectionPresentationAnnotationPath];if(g){h=g.PresentationVariant&&g.PresentationVariant.Path;if(h){l=this._getTemplateForChartFromVisualization(h,e,a,i,s);d=l.bTemplateUpdated;if(d){e=l.oCard;return e}}}}if(!d&&e.settings.presentationAnnotationPath){h=e.settings.presentationAnnotationPath;l=this._getTemplateForChartFromVisualization(h,e,a,i,s);d=l.bTemplateUpdated;if(d){e=l.oCard;return e}}if(!d&&e.settings.chartAnnotationPath){n=s[e.settings.chartAnnotationPath];o=n&&n.ChartType&&n.ChartType.EnumMember;if(o&&o.split("/")[1]==="Donut"){e.template="sap.ovp.cards.charts.analytical"}else{e.template="sap.ovp.cards.charts.smart.chart"}}}}return e},_getTemplateForChartFromVisualization:function(e,t,a,r,i){if(/^@/.test(e)){e=e.slice(1)}t.settings.presentationAnnotationPath=e;var s=i[e]&&i[e].Visualizations;var n;var o;var l;var d=false;if(s&&s.length>0){for(n=0;n<s.length;n++){var h=s[n].AnnotationPath;if(!h){return{oCard:t,bTemplateUpdated:d}}h.trim();if(h.startsWith("@")){h=h.slice(1)}if(h.indexOf("Chart")!=-1){t.settings.chartAnnotationPath=h;o=i[h];l=o&&o.ChartType&&o.ChartType.EnumMember;if(l&&l.split("/")[1]==="Donut"){t.template="sap.ovp.cards.charts.analytical"}else{t.template="sap.ovp.cards.charts.smart.chart"}}d=true}}return{oCard:t,bTemplateUpdated:d}},_createModelViewMap:function(e){if(!e||!e.settings||!e.model){return}if(!e.settings.entitySet||e.settings.entitySet===""){return}if(!e.template.startsWith("sap.ovp.cards")){return}var t=e.model;if(!this.oModelViewMap[t]){this.oModelViewMap[t]={}}this.oModelViewMap[t][e.id]=true},setTabIndex:function(e){if(typeof e=="object"){this.oTabIndexList=e}else{this.oTabIndexList={}}},getTabIndex:function(){return this.oTabIndexList},fnPresetFiltersAppliedInMFB:function(e){var t=e.getFilters();if(t&&t.filters){return t.filters.length>0}return false},fnExecuteOnSelectForCurrentVariant:function(e,t){var a=e.find(function(e){return e&&e.key===t});return a&&a.executeOnSelect||false},verifyMacroFilterLoaded:function(e){var t=this.getView().byId("ovpGlobalMacroFilterVariantMGMT");if(t){var a=t.getCurrentVariantKey();var r=t.getVariants();var i=this.fnExecuteOnSelectForCurrentVariant(r,a);var s=this.fnPresetFiltersAppliedInMFB(e);if(i&&!s){this.bLoadDataOnMFBSearch=false}}},getDataLoadSettings:function(){var e=this.getUIModel();var t=e&&e.getProperty("/dataLoadSettings");var a=t?t.loadDataOnAppLaunch:"ifAnyFilterExist";if(!["ifAnyFilterExist","always","never"].includes(a)){N.error("dataLoadSetting is incorrect. It should be one of ifAnyFilterExist,always,never")}return a},fGetViewSwitchIndex:function(e){var t=this.getGlobalFilter();var a=t&&t.getUiState();var r=a&&a.getSelectionVariant()?JSON.stringify(a.getSelectionVariant()):"{}";var i=JSON.parse(r);var s=S({},i);var n=[];if(e&&e.length>0){for(var o=0;o<e.length;o++){var l=S({},e[o]);n.push(l)}}this.onBeforeRebindPageExtension(n,s);return this.getTabIndex()},changeViewSwitchForVisibleCard:function(){var e=this.getView().getModel("ui").getProperty("/aOrderedCards");if(e&&e.length>0){var t=[],a=[];for(var r=0;r<e.length;r++){t.push(this._getCardFromManifest(e[r].id))}var i=this.fGetViewSwitchIndex(t);if(i&&typeof i=="object"){a=Object.keys(i)}if(a&&a.length>0){for(var r=0;r<e.length;r++){if(e[r]&&e[r].visibility==true){var s=this._getCardFromManifest(e[r].id);if(s&&s.settings&&s.settings.tabs&&s.settings.hasOwnProperty("selectedKey")){var n=i&&i.hasOwnProperty(s.id)?i[s.id]:"";var o=s.settings.selectedKey;if(n&&typeof n=="number"&&n<=s.settings.tabs.length&&n!==o){this.setOrderedCardsSelectedKey(s.id,n);var l={};l=s.settings.tabs[n-1];var d={cardId:s.id,selectedKey:n};for(var h in l){d[h]=l[h]}this.recreateCard(d)}}}}}}},setOrderedCardsSelectedKey:function(e,t){var a=this.getView().getModel("ui").getProperty("/aOrderedCards");for(var r=0;r<a.length;r++){if(a[r]&&a[r].id==e){a[r].selectedKey=t;break}}this.getView().getModel("ui").setProperty("/aOrderedCards",a)},getOrderedCardsSelectedKey:function(e){var t=this.getView().getModel("ui").getProperty("/aOrderedCards");for(var a=0;a<t.length;a++){if(t[a]&&t[a].id==e){return t[a].selectedKey}}},initializeTabbedCard:function(e,t){if(e.template=="sap.ovp.cards.charts.analytical"||e.template=="sap.ovp.cards.charts.smart.chart"||e.template=="sap.ovp.cards.v4.charts.analytical"){e.settings.chartAnnotationPath=e.settings.tabs[t].chartAnnotationPath;e.settings.colorPalette=e.settings.tabs[t].colorPalette;e.settings.bEnableStableColors=e.settings.tabs[t].bEnableStableColors;if(e.settings.tabs[t].navigation){e.settings.navigation=e.settings.tabs[t].navigation}}if(e.settings.tabs[t].entitySet){e.settings.entitySet=e.settings.tabs[t].entitySet}e.settings.annotationPath=e.settings.tabs[t].annotationPath;e.settings.dynamicSubtitleAnnotationPath=e.settings.tabs[t].dynamicSubtitleAnnotationPath;e.settings.presentationAnnotationPath=e.settings.tabs[t].presentationAnnotationPath;e.settings.selectionAnnotationPath=e.settings.tabs[t].selectionAnnotationPath;e.settings.selectionPresentationAnnotationPath=e.settings.tabs[t].selectionPresentationAnnotationPath;e.settings.kpiAnnotationPath=e.settings.tabs[t].kpiAnnotationPath;e.settings.dataPointAnnotationPath=e.settings.tabs[t].dataPointAnnotationPath;e.settings.identificationAnnotationPath=e.settings.tabs[t].identificationAnnotationPath;e.settings.params=e.settings.tabs[t].params;e.settings.measureAggregate=e.settings.tabs[t].measureAggregate;e.settings.selectedKey=t+1;if(!e.settings.staticParameters){e.settings.staticParameters=e.settings.tabs[t].staticParameters}if(!e.settings.customParams){e.settings.customParams=e.settings.tabs[t].customParams}},_getLibraryResourceBundle:function(){if(!this.oLibraryResourceBundle){this.oLibraryResourceBundle=B.getResourceBundleFor("sap.ovp")}return this.oLibraryResourceBundle},_getOvplibResourceBundle:function(){return this.getOwnerComponent()._getOvpLibResourceBundle()},_getCardsModel:function(){if(!this.oCards){var e=this.getUIModel();this.oCards=e.getProperty("/cards")}return this.oCards},_getBaseUrl:function(){var e=this.getUIModel();if(!this.sBaseUrl){this.sBaseUrl=e.getProperty("/baseUrl")}return this.sBaseUrl},_getApplicationId:function(){var e=this.getUIModel();return e.getProperty("/applicationId")},_getCardFromManifest:function(e){var t=this._getCardsModel();for(var a=0;a<t.length;a++){if(t[a].id===e){return t[a]}}if(e&&e.indexOf("ObjectStream")===-1){N.error("Card id "+e+" is not available in the manifest")}return null},_getCardArrayAsVariantFormat:function(e){var t=[];for(var a=0;a<e.length;a++){var r=this._getCardId(e[a].getId());t.push({id:r,visibility:e[a].getVisible()});var i;if(this.getView()&&this.getView().byId){if(this.getView().byId(r).getComponentInstance()){i=this.getView().byId(r).getComponentInstance().getComponentData().settings.selectedKey}}if(i){t[t.length-1].selectedKey=i}}return t},_mergeLREPContent:function(e){var t=[];var a=false;if(this.bDeltaChangesEnabled&&Array.isArray(this.deltaCardsInfo)&&this.deltaCardsInfo.length>0){e=o.addMissingCardsFromManifest(e,this.deltaCardsInfo);a=true}if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){if(!a){e=this.getLayout().getLayoutDataJSON()}t=o.mergeChanges(e,this.deltaChanges);this._bDashboardLayoutLrepActive=true;this.getLayout().getDashboardLayoutModel().setLayoutVars(t)}else{t=o.mergeChanges(e,this.deltaChanges)}return t?t:[]},updateLayoutWithOrderedCards:function(){var e=this.getLayout();var t=this.getView().getModel("ui");var a=t.getProperty("/aOrderedCards");var r=a.filter(function(e){return e.visibility===true}).length;var i=this.getView().byId("ovpAllCardsHiddenPage");if(i){i.setVisible(r===0)}e.removeAllContent();var s,n=false;if(t&&t.getProperty("/cards")){s=t.getProperty("/cards");for(var o=0;o<s.length;o++){n=false;for(var l=0;l<a.length;l++){if(s[o].id==a[l].id){n=true;break}}if(!n&&this.getView().byId(s[o].id)){this.getView().byId(s[o].id).destroy()}}}var d=this.getAllowedNumberOfCards();var h=d&&d.numberOfCards;var f=a.filter(function(e){return e.visibility===true});if(h&&f.length>h&&!this.bInitialApplicationLoad){for(var o=h;o<a.length;o++){a[o].visibility=false}this.bInitialApplicationLoad=true}for(var o=0;o<a.length;o++){var g=this.getView().byId(a[o].id);if(g){g.setVisible(a[o].visibility);e.addContent(g)}}},_updateErrorCardsArray:function(e){var t;for(t=0;t<e.length;t++){var a=this.aErrorCards.indexOf(e[t].id);if(a>-1&&e[t].visibility==false){this.aErrorCards.splice(a,1)}}},updateDashboardLayoutCards:function(e){if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){if(this.getLayout().getDashboardLayoutUtil()){this.getLayout().getDashboardLayoutUtil().updateCardVisibility(e)}}},updateCardVisibiltyForCM:function(e){var t=e.filter(function(e){return e.visible});var a=this.getView().getModel("ui");a.setProperty("/visibleCardCount",t.length);a.setProperty("/renderedCardCount",0);a.setProperty("/updateView",true);R.resetInsightCards();if(!t.length){R.onViewUpdate(this.getOwnerComponent().getId())}},applyFiltersForCustomCards:function(){if(this.oGlobalFilter){var e=n.getCustomCards(this.oCards);if(e.length>0){var t=this.getView().getId();if(t){for(var a=0;a<e.length;a++){var r=t+"--"+e[a].id;var i=this.byId(r);var s=i&&i.getModel(e[a].model);if(s){var o=n.isODataV4(s);if(!o){var d=i.getComponentInstance()&&i.getComponentInstance().getRootControl()&&i.getComponentInstance().getRootControl().getController();if(d){if(typeof d.setRelevantFilters==="function"){var h=new l;if(this.oGlobalFilter&&typeof this.oGlobalFilter.getFilters==="function"){var f=this.oGlobalFilter.getFilters();h=U.getFiltersForV2CustomCard(f,d);var g=this.oGlobalFilter.getBasicSearchValue();var u=d.getCardPropertiesModel()&&d.getCardPropertiesModel().getProperty("/includeSearchWithRelevantFilters");if(u&&g!==undefined&&g.length>0){var c=d.getCardPropertiesModel();var p=c&&c.getProperty("/entityType/property");if(p){p=this.getEDMStringTypeProperties(p);var v=d.getCardItemsBinding();var y=v&&v.mParameters;if(y&&y.select){var m=y.select;p=this.updateFilterProperties(m,p)}h=this.updateFilterFormed(h,g,p)}}}d.setRelevantFilters(h)}}}}}}}}},getEDMStringTypeProperties:function(e){return e.filter(function(e){return e&&e.type=="Edm.String"})},updateFilterProperties:function(e,t){var a=e.split(",");var r=t.filter(function(e){return a.some(function(t){return t===e.name})});return r},updateFilterFormed:function(e,a,r){var i=[];for(var s=0;s<r.length;s++){var n=r[s];if(n.name&&n.type==="Edm.String"){var o=new l(n.name,t.Contains,a);i.push(o)}}var d=new l({filters:i,and:false});if(e&&e[0]&&e[0].aFilters){e.push(d);return e}return d},resetDashboardLayout:function(){if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){if(this.getLayout().getDashboardLayoutUtil()){this.getLayout().getDashboardLayoutUtil().resetToManifest()}this.getLayout().invalidate()}},_getCardArrayAsVariantFormatDashboard:function(){var e=[];var t=this.getLayout();var a=t.dashboardLayoutUtil.aCards;t.dashboardLayoutUtil.dashboardLayoutModel._sortCardsByRow(a);a.forEach(function(t){e.push({id:t.id,visibility:t.dashboardLayout.visible})});e.sort(function(e,t){return t.visibility-e.visibility});return e},_fnIsLoadDataOnGoButton:function(e){var t=this.getView().byId("ovpFilterNotFulfilledPage");var a;t.setVisible(true);var r=this.getUIModel().getProperty("/smartVariantRequired");if(!r){I.hidePlaceholder();return false}var i=this&&this.getView().byId("ovpMain");if(!this.oState.oSmartFilterbar.isCurrentVariantStandard()){a=this.oState.oSmartFilterbar.isCurrentVariantExecuteOnSelectEnabled();I.hidePlaceholder();if(!a){i.setHeaderExpanded(true)}return false}var s=this.getDataLoadSettings();var n=false,o=true;if(s==="ifAnyFilterExist"){var l=this.oState.oSmartFilterbar.getFiltersWithValues();n=true;o=l.length?true:false}else if(s==="always"){n=true}else if(s==="never"){n=false}if(n){var d=this.oState.oSmartFilterbar.getSmartVariant();if(d){d.setExecuteOnStandard(true);n=d.getExecuteOnStandard();a=this.oState.oSmartFilterbar.isCurrentVariantExecuteOnSelectEnabled();if(a){this.oState.oSmartFilterbar.search()}}}if(!a||!n){i.setHeaderExpanded(true)}C.loadingState.GLOBALFILTERFILLED=n;if(!n||!e||!o){I.hidePlaceholder()}return n&&e&&o},verifyGlobalFilterLoaded:function(){var e=this.getUIModel().getProperty("/enableLiveFilter");var t=this.getGlobalFilter();var a=true;var r=t.determineMandatoryFilterItems();var i,s=t.getFilterData(),n;if(r&&s){var o=r.length;while(o--){i=r[o];n=G.getElementById(i.getId());if(n){if(!t._checkForValues(s,i,n)){a=false;break}}}}if(!this.bGlobalFilterLoaded&&e===false){if(!a){var l=f&&f.system&&f.system.phone;if(l){var d=this&&this.getView().byId("ovpMain"),h=d&&d.getHeaderExpanded();if(!h){d.setHeaderExpanded(true)}}if(I.hidePlaceholderNeeded()){I.hidePlaceholder()}}return this._fnIsLoadDataOnGoButton(a)}if(a){if(t.validateMandatoryFields()){C.loadingState.GLOBALFILTERFILLED=true;return true}}else if(!a){if(I.hidePlaceholderNeeded()){I.hidePlaceholder()}}this.getView().byId("ovpMain").setHeaderExpanded(true);this.getView().byId("ovpFilterNotFulfilledPage").setVisible(true);C.loadingState.GLOBALFILTERFILLED=false;return false},onGlobalFilterChange:function(e){this.filterChanged=true;this.bSkipIAppStateGeneration=false;if(this.bGlobalFilterInitialized){var t=this.getGlobalFilter();var a=t.getLiveMode();var r=this.getLayout();var i=e.getParameter("afterFilterDataUpdate");if(!a&&r&&!i){r.setActive(false)}else{r.setActive(true);this.changeViewSwitchForVisibleCard()}}},destroyErrorCardsAndReplaceWithOriginal:function(){if(this.isModelRefreshTriggered||this.filterChanged||this.bGoButtonPressed||this.bSearchButtonPressed){var e;var t=Object.assign({},this.aErrorCards);var a=this.getView().getModel("ui").getProperty("/enableLazyRendering")||this.getOwnerComponent().inLazyLoadingTestMode();for(e in t){var r=this.getView().byId(t[e]);var i=r&&r.getComponentInstance();var s=i&&i.getComponentData();var n=s&&s.cardId;var o=this._getCardFromManifest(n);this._initCardModel(o.model);this._loadCardComponent(o.template);this._createModelViewMap(o);i&&i.destroy();var l=this.aErrorCards.indexOf(n);if(l>-1){this.aErrorCards.splice(l,1)}if(a){this.observeCardSection(o)}else{this.createCard(o)}}this.isModelRefreshTriggered=false}},onTriggerFilterSearch:function(){var e=this.getGlobalFilter();if(e&&e.validateMandatoryFields()&&A(e.verifySearchAllowed())){this.onGlobalFilterSearch()}if(this.getMacroFilterBar()){this.onMacroFilterBarSearch()}},onGlobalFilterSearch:function(){if(this.filterChanged||this.bGoButtonPressed||this.bSearchButtonPressed){var e=this.getGlobalFilter();var t=this.getLayout();if(t){t.setActive(true)}if(this.aErrorCards&&this.aErrorCards.length>0){this.destroyErrorCardsAndReplaceWithOriginal()}if(e&&!e.isDialogOpen()){this._storeCurrentAppStateAndAdjustURL()}if(e&&e.getLiveMode()&&e._bResetFiltersDialogTriggered){this._storeCurrentAppStateAndAdjustURL()}this._clearStoredEntities();var a=[];if(this.oGlobalFilter["_aFields"].length>0){a=this.oGlobalFilter["_aFields"]}else{var r=this.oGlobalFilter["_aFilterBarViewMetadata"];for(var i=0;i<r.length;i++){var s=r[i];for(var o=0;o<s.fields.length;o++){a.push(s.fields[o])}}}for(var i=0;i<a.length;i++){if(a[i].control){var l=document.getElementById(a[i].control.sId);if(jQuery(l).hasClass("sapMFocus")){this.filterItemInFocus=a[i].control;break}}}var d="ovp-"+(new Date).getTime();this._processFilters();this.globalEventBus.publish("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",this.aFilters);if(this.nRefreshInterval!==0){if(this.oRefreshTimer!==null){clearTimeout(this.oRefreshTimer)}this.attachRefreshInterval(this.nRefreshInterval)}for(var h in this.oCardsModels){if(this.oCardsModels.hasOwnProperty(h)&&!n.isODataV4(this.oCardsModels[h])){try{this.oCardsModels[h].refresh(false,false,d)}catch(e){N.warning(e)}}}this.applyFiltersForCustomCards();this.filterChanged=false;this.bGoButtonPressed=false;this.bSearchButtonPressed=false;this._clearStoredEntities()}},_clearStoredEntities:function(){if(this.sPreviousEntityType){this.sPreviousEntityType=""}if(this.sCurrentEntityType){this.sCurrentEntityType=""}},_processSFBFilters:function(){var e=this.getGlobalFilter();var t=e.getFilters();var a=this.getCustomFilters();var r=true;var i;var s=function(e,t){if(!(e instanceof b)){throw new Error("State must always be set with respect to a ControllerExtension")}if(!r){throw new Error("State must always be provided synchronously")}if(t){i=t}};this.templateBaseExtension.addFilters(s);r=false;var n=[];if(a&&a instanceof l){n.push(a)}if(i&&i instanceof l){n.push(i)}if(n.length!==0){var o=[];if(t&&t.length>0){n.push(t[0])}o.push(new l(n,true));if(o.length>0){t=o}}this.aFilters=t},_processFilters:function(){if(this.getGlobalFilter()){this.aFilters=[];this._processSFBFilters()}else if(this.getMacroFilterBar()){this.aFilters=this.aFilters||[]}else{this.aFilters=[]}},_processSearch:function(){var e,t;var a=this.getGlobalFilter();if(!a){return}var r=a.getParameters();var t=r&&r["custom"];if(!t){return}for(var i in t){e=i+"="+P(t[i])}return e},_collapseHeaderForPage:function(){var e=f&&f.system&&f.system.phone;if(e){var t=this.getGlobalFilter();var a=this&&this.getView().byId("ovpMain"),r=a&&a.getHeaderExpanded();if(r&&t.validateMandatoryFields()){a.setHeaderExpanded(false)}}},_initGlobalFilter:function(){var e=this.getGlobalFilter();if(!e){var t=this.getLayout();var a=this.getOwnerComponent().oOvpConfig;if(t&&a&&(a.globalFilterEntitySet||a.globalFilterEntityType)){t.setActive(false)}var r=this.getMacroFilterBar();this._parseNavigationVariant();if(!r){this.bGlobalFilterLoaded=true;return}this.getView().byId("ovpMain").setHeaderExpanded(true);this.getView().byId("ovpFilterNotFulfilledPage").setVisible(true);C.loadingState.GLOBALFILTERFILLED=false;this.oGlobalFilterLoadedPromise=new Promise(function(e,t){this.fnMacroFilterBarLoaded=e}.bind(this));var i=this;if(this.oParseNavigationPromise){this.bInitialMacroFilterBarSearch=true;this.oParseNavigationPromise.then(function(e){var t=e&&e[0];if(t&&t.oSelectionVariant){r.setSelectionVariant(t.oSelectionVariant).then(function(){i.bSearchTriggeredManually=true;r.triggerSearch()}).catch(function(e){N.error(e+"while setting selection variant")})}}).catch(function(){N.error("Could not parse navigation variant from URL")})}return}e.attachFiltersDialogClosed(this._storeCurrentAppStateAndAdjustURL.bind(this));var s=e.getVariantManagement();if(s){s.attachAfterSave(function(e){this._storeCurrentAppStateAndAdjustURL(undefined,true)}.bind(this))}this.oGlobalFilterLoadedPromise=new Promise(function(t,a){e.attachInitialized(function(){this._parseNavigationVariant();this.bSkipIAppStateGeneration=true;if(this.oParseNavigationPromise){var a;this.oParseNavigationPromise.then(function(e){var t=e&&e[0];var r=e&&e[1];var i=e&&e[2];if(t){a=Promise.resolve(this._setNavigationVariantToGlobalFilter(t,r,i)).then(function(){this.filterChanged=false}.bind(this))}}.bind(this)).catch(function(e){N.error("Error during parse navigation"+e)});this.oParseNavigationPromise.catch(function(){N.error("Could not parse navigation variant from URL")});this.oParseNavigationPromise.finally(function(){Promise.all([a]).then(function(){this.bGlobalFilterInitialized=true;if(e&&this.verifyGlobalFilterLoaded()){t()}}.bind(this))}.bind(this))}else if(e&&this.verifyGlobalFilterLoaded()){t()}},this);e.attachSearch(function(){if(e.validateMandatoryFields()){if(!this.bGlobalFilterLoaded){t();this.bGlobalFilterLoaded=true;if(!e.isDialogOpen()){this._storeCurrentAppStateAndAdjustURL()}var a=this.getLayout();if(a){a.setActive(true)}return}this.onGlobalFilterSearch()}},this);e.attachFilterChange(this.onGlobalFilterChange,this);var r=this.getView()&&this.getView().byId("ovpGlobalFilter-btnGo");r&&r.attachPress(function(){this.bGoButtonPressed=true;this._collapseHeaderForPage();var e=this.getLayout();if(e){e.setActive(true)}}.bind(this))}.bind(this));this.oGlobalFilterLoadedPromise.then(function(t){this.bGlobalFilterLoaded=true;this._collapseHeaderForPage();e._oBasicSearchField&&e._oBasicSearchField.attachSearch(function(){this.bSearchButtonPressed=true}.bind(this))}.bind(this))},_loadCardComponent:function(e){var t=e.replace(/\./g,"/");var a=sap.ui.require.toUrl(t);if(!this.oLoadedComponents[e]){this.oLoadedComponents[e]=_.load({name:e,url:a,manifest:false}).then(function(e){return e})}},_initCardModel:function(e){var t=false;if(this.oCardsModels[e]||!e){return}this.oCardsModels[e]=this.getView().getModel(e);if(!n.isODataV4(this.getView().getModel(e))){if(!this.oCardsModels[e].bUseBatch){this.oCardsModels[e].setUseBatch(false)}else{this.oCardsModels[e].setUseBatch(true)}}if(this.getGlobalFilter()||this.getMacroFilterBar()){t=true}if(!n.isODataV4(this.oCardsModels[e])){this._overrideCardModelRead(this.oCardsModels[e],t)}},getVisibleCustomFields:function(){var e=this.getGlobalFilter();var t=e.getAllFilterItems(true);var a,r,i=[];if(t){a=t.length;while(a--){r=t[a];if(r&&r.getVisibleInFilterBar()){i.push(r.getName())}}}var s,n,o,l=e.getFilterBarViewMetadata();var d=[];if(l){s=l.length;while(s--){o=l[s].fields;if(o){n=o.length;while(n--){if(o[n].isCustomFilterField&&i.indexOf(o[n].fieldName)>-1){d.push({name:o[n].fieldName})}}}}}return d},_showErrorPage:function(e){if(this.bDisableErrorPage){return}var t=this.getView().byId("ovpErrorPage");var a=this.getView().byId("ovpMain");if(e){t.setVisible(true);a.setVisible(false);return}t.setVisible(false);a.setVisible(true)},_removeFilter:function(e,t){var a=e.lastIndexOf(t);var r=e.indexOf(t);if(a===-1||r===-1){return e}var i="%20and%20";var s=e.substring(a).indexOf(i);s=s!==-1?a+s:s;var n=e.substring(0,r).lastIndexOf(i);if(s===-1&&n===-1){if(e.lastIndexOf("$filter=")===0){return e.slice(0,8)}else{return""}}else if(n===-1){if(e.lastIndexOf("$filter=")===0){return e.slice(0,8)+e.slice(s+i.length)}else{return e.slice(s+i.length)}}else if(s===-1){return e.slice(0,n)}else{return e.slice(0,n)+e.slice(s)}},_removeRelevantFilterRecursively:function(e,t){if(!e._bMultiFilter){if(e.sPath===t){return undefined}return e}else{e.aFilters.forEach(function(a,r){e.aFilters[r]=this._removeRelevantFilterRecursively(a,t)}.bind(this));for(var a=0;a<e.aFilters.length;a++){if(!e.aFilters[a]){e.aFilters.splice(a,1);a--}}if(e.aFilters.length>0){return e}else{return undefined}}},_removeRelevantFilter:function(e,t){if(!e||e.length===0){return e}e[0]=this._removeRelevantFilterRecursively(e[0],t);return!e[0]?undefined:e},_getFilterPreference:function(e){var t;var a=this._getCardFromManifest(e);if(a){if(a.settings.tabs){var r=0;var i=a.settings.selectedKey;if(i&&a.settings.tabs.length>=i){r=i-1}t=a.settings.tabs[r].mFilterPreference}else{t=a.settings.mFilterPreference}}return t},_getFilterPreferenceFromUrlParams:function(e){var t=e.urlParameters;var a;var r="cardId=";var i=-1;if(t){for(var s=0;s<t.length;s++){if(t[s].lastIndexOf(r)>=0){i=s;break}}if(i>=0){var n=t[i].lastIndexOf(r);var o=t[i].slice(n+r.length);a=this._getFilterPreference(o);if(n>0){t[i]=t[i].slice(0,n-1)}else{t.splice(i,1)}}}return a},_addRelevantFilters:function(e,t,r,i){var s=e.urlParameters;var n=-1;if(s){for(var o=0;o<s.length;o++){if(s[o].lastIndexOf("$filter=",0)===0){n=o;break}}}if(this.aRelevantFilters&&this.aRelevantFilters.length>0){if(n>=0){var l=a.createFilterParams(this.aRelevantFilters,t.oMetadata,r).substr(8);if(i&&i.filterAll==="card"){s[n]=s[n]}else if(i&&i.filterAll==="global"){s[n]=s[n].slice(0,8)+l}else if(i&&(i.cardFilter||i.globalFilter)){if(Array.isArray(i.cardFilter)&&i.cardFilter.length>0){i.cardFilter.forEach(function(e){l=this._removeFilter(l,e)}.bind(this))}if(Array.isArray(i.globalFilter)&&i.globalFilter.length>0){i.globalFilter.forEach(function(e){s[n]=this._removeFilter(s[n],e)}.bind(this))}if(l===""&&s[n].length===8){s.splice(n,1)}else if(l===""){s[n]=s[n]}else if(s[n].length===8){s[n]=s[n]+l}else{if(this.aRelevantFilters.length===1){l="("+l+")"}s[n]=s[n].slice(0,8)+"("+s[n].slice(8,s[n].length)+")%20and%20"+l}}else{if(this.aRelevantFilters.length===1){l="("+l+")"}s[n]=s[n].slice(0,8)+"("+s[n].slice(8,s[n].length)+")%20and%20"+l}}else{if(i&&i.filterAll==="card"){e.filters=undefined}else if(i&&i.filterAll==="global"){e.filters=this.aRelevantFilters}else if(i&&(i.cardFilter||i.globalFilter)){if(Array.isArray(i.cardFilter)&&i.cardFilter.length>0){i.cardFilter.forEach(function(e){this.aRelevantFilters=this._removeRelevantFilter(this.aRelevantFilters,e)}.bind(this))}if(this.aRelevantFilters&&this.aRelevantFilters.length>0){e.filters=this.aRelevantFilters}}else{e.filters=this.aRelevantFilters}}}else{if(n>=0){if(i&&i.filterAll==="card"){s[n]=s[n]}else if(i&&i.filterAll==="global"){s.splice(n,1)}else if(i&&i.globalFilter){if(Array.isArray(i.globalFilter)&&i.globalFilter.length>0){i.globalFilter.forEach(function(e){s[n]=this._removeFilter(s[n],e)}.bind(this))}if(s[n].length===8){s.splice(n,1)}}}}return e},removeInternalParamValue:function(e,t){return e&&e.reduce(function(e,a){if(a&&a.includes(t)){a=a.substring(0,a.indexOf(t)-1)}if(a){e.push(a)}return e},[])},_overrideCardModelRead:function(e,t){var a=e.read;var r=this;e.read=function(){var i=arguments[1];if(!i){i={};Array.prototype.push.call(arguments,i)}var s=r._getEntityTypeFromPath(e,arguments[0],i.context,false);var n=r._getEntitySetFromEntityType(e,s);var o=i&&i.urlParameters;var l=false;if(o&&Array.isArray(o)){l=o.some(function(e){return e&&e.indexOf("_requestFrom=ovp_internal")>-1})}else if(o&&typeof o==="object"){l=o["_requestFrom"]==="ovp_internal"}if(!l){return a.apply(e,arguments)}if(o&&Array.isArray(o)){o=r.removeInternalParamValue(o,"_requestFrom=ovp_internal");i.urlParameters=o}else if(o&&typeof o==="object"&&l){delete o["_requestFrom"]}var d=r._getFilterPreferenceFromUrlParams(i);if(t){r._processFilters();var h=r.getGlobalFilter();var f=r.getMacroFilterBar();var g=h!==undefined?h.getModel():f.getModel();if(!r.aFilters){r.aFilters=[]}var u=false;var c;var p=n["Org.OData.Capabilities.V1.SearchRestrictions"];if(n["sap:searchable"]==="true"||p&&p.Searchable&&p.Searchable.Bool&&p.Searchable.Bool==="true"){c=r._processSearch()}r.sCurrentEntityType=s.entityType;if(r.sPreviousEntityType!==r.sCurrentEntityType){r.sPreviousEntityType=r.sCurrentEntityType;u=true}if(!r.aRelevantFilters){r.aRelevantFilters=[];u=true}if(u){r.aRelevantFilters=[];if(s){r.aRelevantFilters=r._getEntityRelevantFilters(s,r.aFilters,e,g)}}i=r._addRelevantFilters(i,e,s,d);var v=i.urlParameters;if(c){v[v.length]=c}if(h&&h.getConsiderAnalyticalParameters()){var y=h.getAnalyticBindingPath();var m,b,C;if(y&&y.length>0){if(s.entityType===T.getEntityType(h)){b=arguments[0];m=arguments[0].indexOf("$");if(m>0){b=arguments[0].substring(0,m-1)}C=y;if(b!==C){arguments[0]=arguments[0].replace(b,C)}}else{var F=r._getParametersFromEntityPath(arguments[0]);var P=r._getParametersFromEntityPath(y);var S,M,O;if(F&&F.length>0){var w=r._getEntityTypeFromPath(e,arguments[0],i.context,true);for(var A=0;A<P.length;A++){S=r._getPropertyMapping(F,P[A].name,w.name,T.getEntityType(h),e,h.getModel());if(S){M=S+"=.*?[,)]";O=arguments[0].match(new RegExp(M));if(O&&O.length>0){b=O[0].slice(0,-1);C=S+"="+P[A].sValue;if(b!==C){arguments[0]=arguments[0].replace(b,C)}}}}}}}}}var V=e.getMetaModel();var I=V.getODataEntityType(n.entityType);v=r._getExpandPropertiesForSmartCharts(v,V,I);var _=arguments[1].success;arguments[1].success=function(e,t){return function(){if(!t.errorHandlingObject.atLeastOneRequestSuccess){t.errorHandlingObject.atLeastOneRequestSuccess=true;t._showErrorPage(false)}if(t.filterItemInFocus!=null){t.filterItemInFocus.focus();t.filterItemInFocus=null}if(t.nRefreshInterval!==0){if(t.oRefreshTimer!==null){clearTimeout(t.oRefreshTimer)}t.attachRefreshInterval(t.nRefreshInterval)}return e.apply(this,arguments)}}(_,r);var E=arguments[1].error;arguments[1].error=function(e,t){return function(){if(!t.errorHandlingObject.atLeastOneRequestSuccess){clearTimeout(t.errorHandlingObject.errorLoadingTimeout);t.errorHandlingObject.errorLoadingTimeout=setTimeout(function(){if(!t.errorHandlingObject.atLeastOneRequestSuccess){t._showErrorPage(true)}},9e3)}return e.apply(this,arguments)}}(E,r);var L=a.apply(e,arguments);return L}},showErrorCardForMissingParam:function(e,t){var a=e[0];var r=e[1].urlParameters;for(var i in r){a=a+r[i]}var s=new E;s.mParameters={url:a,response:{statusText:y.getText("Missing_Param_Text")}};s.oSource=t;setTimeout(function(){this.fVerifyAndSetErrorOrCustomMessageCard(s,false)}.bind(this),0)},_checkMandatoryParams:function(e,t,a){var r=new p.Model(p.Model.ReferenceByModel(e));var i=r.findQueryResultByName(t);var s=i&&i.getParameterization();if(!s){return true}var n=s.getAllParameterNames();var o=a.match(/\(.*\)/g);if(n.length>0&&o===null){return false}var l=o[0].replace("(","").replace(")","").split(",");if(l.length===n.length){for(var d in l){var h=l[d].split("=")[1];if(h.indexOf("%27")>-1){h=h.split("%27")[1]}if(h.length===0){return false}}}else{return false}},_getExpandPropertiesForSmartCharts:function(e,t,a){var r;var i="";var s;var n;var o;var l="$expand";var d=false;var h=false;var f;var g;var u;var c="com.sap.vocabularies.Common.v1.Text";var p=a&&a.property;if(!e||!(e.length>0)){return e}for(var v=0;v<e.length;v++){if(e[v].indexOf("$expand")>-1){return e}}for(var y=0;y<e.length;y++){if(e[y].indexOf("$select")>-1){h=true;g=e[y];o=e[y].split("$select=");if(o&&o[1]){f=decodeURIComponent(o[1]);r=f.split(",");if(!r||!(r.length>1)){return e}}break}}if(!h){return e}if(!r||!(r.length>0)||!p||!(p.length>0)){return e}for(var m=0;m<r.length;m++){for(var b=0;b<p.length;b++){if(r[m]==(p[b]&&p[b].name)){if(p[b]&&p[b]["sap:aggregation-role"]&&p[b]["sap:aggregation-role"]=="dimension"){if(!p[b][c]||!p[b][c].Path||!(p[b][c].Path.indexOf("/")>0)){break}i=p[b][c].Path;s=i.split("/");if(!s.length){break}n=t.getODataAssociationEnd(a,s[0]);if(!n){break}if(!d){l=l+"="+s[0];d=true}else if(d){l=l+","+s[0]}u=g+","+i}break}}}if(u&&l){e[y]=u;e.push(l)}return e},attachRefreshInterval:function(e){this.oRefreshTimer=setTimeout(function(){this._processFilters();this.globalEventBus.publish("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",this.aFilters);var e=this.getLayout();if(e&&e.getActive()){for(var t in this.oCardsModels){this.isModelRefreshTriggered=true;var a=this.oCardsModels[t];if(a){a.refresh()}}}}.bind(this),e)},_getEntityTypeFromPath:function(e,t,a,r){var i=u.prototype._normalizePath.apply(e,[t,a]);if(r){i=t.replace(/^\/|\/$/g,"").split("/")[0];if(i.indexOf("(")!=-1){i=i.substring(0,i.indexOf("("))}}var s=c.prototype._getEntityTypeByPath.apply(e.oMetadata,[i]);return s},_getEntitySetFromEntityType:function(e,t){if(!e||!t){return}var a=e.getMetaModel();var r=a&&a.getODataEntityContainer();var i=r&&r.entitySet;if(!i||!Array.isArray(i)){return}var s=i.length;for(var n=0;n<s;n++){if(i[n].entityType===t.entityType){return i[n]}}},_getPropertyMapping:function(e,t,a,r,i,s){var n,o;for(n=0;n<e.length;n++){if(e[n].name===t){o=e[n].name;return o}if("P_"+e[n].name===t||e[n].name==="P_"+t){o=e[n].name;return o}}if(!a||!r||!i||!s){return}var l=i.oMetadata._getEntityTypeByName(a);var d=s.oMetadata._getEntityTypeByName(r);if(!l||!d){return}var h="com.sap.vocabularies.Common.v1.SemanticObject";var f="com.sap.vocabularies.Common.v1.SemanticObjectMapping";var g=i.oAnnotations.getData();if(!g||!g.propertyAnnotations){return}var u=g.propertyAnnotations[l.namespace+"."+l.name];var c=s.oAnnotations.getData();if(!c||!c.propertyAnnotations){return}var p=c.propertyAnnotations[d.namespace+"."+d.name];var v=p&&p[t];if(!v||!v[h]){return}var y,m,b,C,F;for(y in u){m=u[y];if(m[h]&&m[h].String===v[h].String){b=m[f];if(!b){continue}C=b.length;F="";while(C--){if(b[C].SemanticObjectProperty.String===t){F=b[C].LocalProperty.PropertyPath;break}}if(F!==""){for(n=0;n<e.length;n++){if(e[n].name===F){o=e[n].name;return o}}}}}return o},_getParametersFromEntityPath:function(e){e=e.split("?")[0];var t=e.match(/\(.*=.*\)/);var a=[];if(!t){return a}var r=t[0].slice(1,-1).trim().split(/\=|\,/);for(var i=0;i<r.length;i=i+2){a.push({name:r[i],sValue:r[i+1]})}return a},_checkRelevantFiltersRecursive:function(e,t,a,r,i,s){if(!t._bMultiFilter){t.sPath=t.sPath.split("/").pop();var n=this._getPropertyMapping(e,t.sPath,a,r,i,s);if(n){t.sPath=n;return t}}else{var o=t.aFilters;var d,h=[];if(o){for(var f=0;f<o.length;f++){d=this._checkRelevantFiltersRecursive(e,o[f],a,r,i,s);if(d){h.push(d)}}if(h.length>0){return new l(h,t.bAnd)}}}},_removeOVPInternalParam:function(e){return e.split("&").filter(function(e){return e.indexOf("_requestFrom")===-1}).join("&")},_getEntityRelevantFilters:function(e,t,a,r){var i=[];if(t.length>0&&e){var s=this.isMacroFilterBar?e.entityType:T.getEntityType(this.getGlobalFilter());var n=this._checkRelevantFiltersRecursive(e.property,t[0],e.name,s,a,r);if(n){i.push(n)}}return i},_checkIsCardValid:function(e,t){var a=e+".Component";var s=a.replace(/\./g,"/");var n=sap.ui.require(s)||t;if(!n){return false}if(n!==r&&!(n.prototype instanceof r||n.prototype instanceof i)){return false}var o=n.prototype.getCustomizing("sap.ui.viewReplacements");if(o&&o["sap.ovp.cards.generic.Card"]){return false}if(n.prototype.createContent!=r.prototype.createContent&&n.prototype.createContent!=i.prototype.createContent){return false}if(n.prototype.getPreprocessors!=r.prototype.getPreprocessors&&n.prototype.getPreprocessors!=i.prototype.getPreprocessors){return false}return true},_createCardComponent:function(e,t,a){var r=e.getModel("@i18n");if(a.template&&this._checkIsCardValid(a.template)){var i={name:a.template,manifest:false,componentData:{model:t,modelName:a.model,i18n:r,cardId:a.id,settings:a.settings,appComponent:this.getOwnerComponent(),mainComponent:this}};var s=this.getGlobalFilter();if(a.errorReason){i.componentData.errorReason=a.errorReason}if(s){i.componentData.globalFilter={getUiState:s.getUiState.bind(s)}}var n=e;this.getOwnerComponent().runAsOwner(function(){_.create(i).then(function(e){var t=e.getComponentData().cardId;var a=n.byId(t);a&&a.setPropagateModel(true);var r=a&&a.getComponentInstance();a.setComponent(e);if(r){setTimeout(function(){r.destroy()},0)}})})}else{N.error("Could not create Card from '"+a.template+"' template. Card is not valid.")}},createNoDataCard:function(e){var t=this._getCardFromManifest(e);if(e&&this.aErrorCards.indexOf(e)===-1){this.aErrorCards.push(e);var a={mParameters:{response:{sTitle:y.getText("CARDS_NODATA_ERROR_PAGE"),sIllustration:"sapIllus-NoEntries",sDescription:y.getText("CARDS_NODATA_ERROR_CONTENT")}}};this.createErrorCard(t,a)}},onCardManage:function(){this.oManageCardsUtils.onManageCardsMenuButtonPress()},createErrorCard:function(e,t){var a=this.getView();var r=a.getModel(e.model);var i=n.isODataV4(r);var s=i?"sap.ovp.cards.v4.error":"sap.ovp.cards.error";var o=S({},e,{template:s});o.errorReason=Object.assign({},t);o.settings.oldTemplate=e.template;o.settings.template=s;this.createCard(o)},observeCardSection:function(e){if(e){this.aObservedCards.push(e);var t=this.getView().byId(e.id).getDomRef()}if(!this._cardIntersectionObserver){this._cardIntersectionObserver=new window.IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var t=this.aObservedCards.filter(function(t){var a=this.getView().byId(t.id);return a&&a.getDomRef()===e.target}.bind(this))[0];if(t){this._initCardModel(t.model);this._loadCardComponent(t.template);this._createModelViewMap(t);this.createCard(t);var a=this.getView().byId(t.id).getDomRef();this._cardIntersectionObserver.unobserve(a)}}}.bind(this))}.bind(this),{threshold:0})}if(t){this._cardIntersectionObserver.observe(t)}},createCard:function(e){var t=this.getView();var a=t.getModel(e.model);var r;if(n.isODataV4(a)){r=[a.getMetaModel().requestObject("/"+e.settings.entitySet),this.oGlobalFilterLoadedPromise,this.oLoadedComponents[e.template],this.oLoadedComponents["sap.ovp.cards.v4.error"]]}else{r=[a.getMetaModel().loaded(),this.oGlobalFilterLoadedPromise,this.oLoadedComponents[e.template],this.oLoadedComponents["sap.ovp.cards.error"]]}return Promise.all(r).then(function(){this._createCardComponent(t,a,e)}.bind(this),function(t){N.error("Can't load card with id:'"+e.id+"' and type:'"+e.template+"', reason:"+t)})},_getCardId:function(e){var t=this.getView().getId()+"--";var a="mainView--";if(e.indexOf(t)!=-1){var r=e.indexOf(t)+t.length;return e.substring(r)}if(e.indexOf(a)!==-1){var r=e.indexOf(a)+a.length;return e.substring(r)}return e},_initFlexibilityPersonalization:function(){var e=this.getLayout();var t="sap/ovp/flexibility/changeHandler/PersonalizationChangeHandler";var a=e.getContent();if(a&&a.length){a.push(e);for(var r=0;r<a.length;r++){a[r].addCustomData(new O({key:"sap-ui-custom-settings",value:{"sap.ui.fl":{flexibility:t}}}))}this.oFlexibilityPersonalizationPromise=new Promise(function(e,t){M.waitForChanges({selectors:a}).then(function(){if(this.deltaChanges.length>0){this.bDeltaChangesEnabled=true}e()}.bind(this),function(t){e()})}.bind(this))}},layoutChanged:function(e){var t=e.getParameter("positionChanges");var a=[],r=[];var i,s;if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){var n=this.getLayout().dashboardLayoutUtil.dashboardLayoutModel.iColCount;if(t){for(var l=t.length-1;l>=0;l--){i=t[l];s=i.content.cardId;if(i.content.dashboardLayout.oldRow===i.content.dashboardLayout.row&&i.content.dashboardLayout.oldColumn===i.content.dashboardLayout.column&&i.content.dashboardLayout.oldRowSpan===i.content.dashboardLayout.rowSpan&&i.content.dashboardLayout.oldColSpan===i.content.dashboardLayout.colSpan){continue}if(r[s]){r[s].content.dashboardLayout.oldRow=i.content.dashboardLayout.oldRow;continue}r[s]=i}Object.keys(r).forEach(function(e){var t=r[e];if(t.content.dashboardLayout.oldRow===t.content.dashboardLayout.row&&t.content.dashboardLayout.oldColumn===t.content.dashboardLayout.column&&t.content.dashboardLayout.oldRowSpan===t.content.dashboardLayout.rowSpan&&t.content.dashboardLayout.oldColSpan===t.content.dashboardLayout.colSpan){return}a.push(r[e])});a.forEach(function(e){var t=e.content.dashboardLayout;e.content.dashboardLayout={};e.content.dashboardLayout["C"+n]=t})}}else{var d=this.getLayout().getContent();var h=this._getCardArrayAsVariantFormat(d);this.getView().getModel("ui").setProperty("/aOrderedCards",h);a=t}if(a.length>0){o.savePersonalization(a,this.getView())}},saveVariant:function(e){var t=this;this.smartVariandManagement.getVariantsInfo(function(e){var a=null;if(e&&e.length>0){a=e[0].key}var r=a!==null;var i={name:"Personalisation",global:false,overwrite:r,key:a,def:true};t.smartVariandManagement.fireSave(i)})},getLayout:function(){return this.getView()?this.getView().byId("ovpLayout"):null},initShowHideCardsButton:function(){var e=n.getUshellContainer();e.getServiceAsync("Extension").then(function(e){var t={icon:"sap-icon://dimension",id:this.createId("managecards"),text:y.getText("MANAGE_CARDS_TITLE"),tooltip:y.getText("MANAGE_CARDS_TITLE"),press:this.oManageCardsUtils.onManageCardsMenuButtonPress.bind(this.oManageCardsUtils)};var a={controlType:"sap.ushell.ui.launchpad.ActionItem"};e.createUserAction(t,a).then(function(e){e.showForCurrentApp()})}.bind(this))},createOrDestroyCards:function(e,t,a){var r=-1,i=[],s=[];for(var n=0;n<t.length;n++){if(e[n].id==t[n].id){r=n}else{r=this.getCardIndexInArray(e,t[n].id)}var o=this.getView().byId(t[n].id);var l=o.getComponentInstance();if(a){if(l){l.destroy()}}if(t[n].visibility!=e[r].visibility||a){if(t[n].visibility===true){var d=this._getCardFromManifest(t[n].id);i.push({oCard:d,sCreateOrDestroy:"create"});s.push(d)}else if(l){i.push({oCard:l,sCreateOrDestroy:"destroy"})}}}var h=this.fGetViewSwitchIndex(s);if(i&&i.length>0){var f=this.getView().getModel("ui").getProperty("/aOrderedCards");for(var g=0;g<i.length;g++){if(i[g]&&i[g].oCard&&i[g].hasOwnProperty("sCreateOrDestroy")&&i[g].sCreateOrDestroy=="create"){var u=i[g].oCard;if(u){u.settings.baseUrl=this._getBaseUrl();this._clearStoredEntities();this._initCardModel(u.model);u=this._getTemplateForChart(u);this._loadCardComponent(u.template);this._createModelViewMap(u);if(u.settings.tabs){var c=0;var p=[];p.push(u);var v=h&&h.hasOwnProperty(u.id)?h[u.id]:"";var y=this.getOrderedCardsSelectedKey(u.id);if(v&&typeof v=="number"&&v<=u.settings.tabs.length&&v!==y){c=v>=1?v-1:v;this.setOrderedCardsSelectedKey(u.id,v)}else if(f[g].selectedKey&&u.settings.tabs.length>=f[g].selectedKey){c=f[g].selectedKey-1}this.initializeTabbedCard(u,c)}this.createCard(u)}}else if(i[g]&&i[g].oCard&&i[g].hasOwnProperty("sCreateOrDestroy")&&i[g].sCreateOrDestroy=="destroy"){i[g].oCard.destroy()}}}},getCardIndexInArray:function(e,t){for(var a=0;a<e.length;a++){if(e[a].id==t){return a}}return-1},rerenderCards:function(e){var t=this.getView().getModel("ui").getProperty("/aOrderedCards");this.createOrDestroyCards.apply(this,[t,e,false]);this.getView().getModel("ui").setProperty("/aOrderedCards",e);this.updateDashboardLayoutCards(e);this.updateLayoutWithOrderedCards();o.savePersonalization(this.visibilityChanges,this.getView());for(var a=0;a<e.length;a++){var r=e[a];var i=this.aErrorCards.indexOf(r.id);if(i>-1&&r.visibility==false){this.aErrorCards.splice(i,1)}}},isDragAndDropEnabled:function(){return!f.system.phone},getGlobalFilter:function(){if(!this.oGlobalFilter){this.oGlobalFilter=this.getView().byId("ovpGlobalFilter")}return this.oGlobalFilter},getMacroFilterBar:function(){if(!this.oMacroFilterBar){this.oMacroFilterBar=this.getView().byId("ovpGlobalMacroFilter")}return this.oMacroFilterBar},getUIModel:function(){if(!this.oUIModel){var e=this.getOwnerComponent();this.oUIModel=e&&e.getModel("ui")}return this.oUIModel},_parseNavigationVariant:function(){if(!this.oContainer){this.oParseNavigationPromise=Promise.resolve();return}var e=this.oNavigationHandler;this.oParseNavigationPromise=new Promise(function(t,a){return e.parseNavigation().done(function(e,a,r){t([e,a,r])}).fail(function(){a()})})},_setUiStateToGlobalFilter:function(e,t,a){var r=this.getGlobalFilter();var i=new h({selectionVariant:e.toJSONObject()});r.setUiState(i,{replace:a,strictMode:false});t=t.concat(e.getParameterNames().concat(e.getSelectOptionsPropertyNames()));t=t.filter(function(e,t,a){return a.indexOf(e)==t});return t},_processModifyStartupExtension:function(e){if(!e){e=[]}var t=this.getGlobalFilter();var a=t.getUiState();var r=new d(a.getSelectionVariant());var i=JSON.parse(JSON.stringify(r));return new Promise(function(t,a){Promise.all([this.modifyStartupExtension(r),this.templateBaseExtension.provideStartupExtension(r)]).then(function(){if(JSON.stringify(r)!==JSON.stringify(i)){try{e=this._setUiStateToGlobalFilter(r,e,true)}catch(t){N.error("Error with modifyStartupExtension, falling back to default behavior"+t);e=this._setUiStateToGlobalFilter(i,e,true)}}t(e)}.bind(this))}.bind(this))},_addFieldsToSFBAdvancedArea:function(e){var t;var a=this.getGlobalFilter();if(e&&e.length>0){t=e.length;while(t--){a.addFieldToAdvancedArea(e[t])}}},_restoreAppState:function(e){this.restoreCustomAppStateDataExtension(e._CUSTOM);var t=e._EXTENSION;if(!t){return}var a=true;var r=function(e){if(!(e instanceof b)){throw new Error("State must always be retrieved with respect to a ControllerExtension")}var r=e.getMetadata().getNamespace();if(!a){throw new Error("State must always be restored synchronously")}return t[r]};this.templateBaseExtension.restoreExtensionAppStateData(r);a=false},_setNavigationVariantToGlobalFilter:function(e,t,a){return new Promise(function(r,i){var s=this.getGlobalFilter();var n=this.getUIModel()&&this.getUIModel().oData;var o=this.oState&&this.oState.oSmartFilterbar;var l=this.oGlobalFilter&&this.oGlobalFilter.getUiState().getSemanticDates();if(!s){return}switch(a){case"iAppState":if(this.getUIModel()&&this.getUIModel().getProperty("/bRTAActive")){r();break}if(e.selectionVariant){var f=JSON.parse(e.selectionVariant);if(f.SelectionVariantID.length!==0){var g=s.getVariantManagement().getVariantItems().map(function(e){return e.getKey()});var u=f.SelectionVariantID;if(g.indexOf(u)===-1){r();break}}var c,p,v=false;var y,m,b,C;var F,P,S;s.clearVariantSelection();f=JSON.parse(e.selectionVariant);s.setCurrentVariantId(f.SelectionVariantID);P=s.getUiState({allFilters:false});m=P&&JSON.stringify(P.getSelectionVariant());C=s.getFilterData()._CUSTOM;C=typeof C=="undefined"?{}:C;F=new h({selectionVariant:e.oSelectionVariant.toJSONObject(),semanticDates:e.semanticDates});s.setUiState(F,{replace:true,strictMode:false});c=new d(e.selectionVariant);p=c.getParameterNames().concat(c.getSelectOptionsPropertyNames());for(var M=0;M<p.length;M++){s.addFieldToAdvancedArea(p[M])}S=s.getUiState({allFilters:false});y=S&&JSON.stringify(S.getSelectionVariant());if(m!==y){v=true}if(e.customData&&Object.keys(e.customData).length>0){var b=e.customData;this._restoreAppState(b);if(JSON.stringify(C)!==JSON.stringify(b)){v=true}}s.getSmartVariant().currentVariantSetModified(v);s._updateToolbarText()}r();break;case"xAppState":case"URLParams":var O=[];var w=new d(e.oSelectionVariant.toJSONObject());var A=new d(e.oDefaultedSelectionVariant.toJSONObject());if(!e.bNavSelVarHasDefaultsOnly&&!w.isEmpty()){s.clearVariantSelection();s.clear();O=this._setUiStateToGlobalFilter(w,O,true)}if(e.bNavSelVarHasDefaultsOnly&&!A.isEmpty()&&s.getCurrentVariantId()===""){var I=this._mergeDefaultWithSFBVariant(A,new d(JSON.stringify(s.getUiState().getSelectionVariant())));O=this._setUiStateToGlobalFilter(I,O,true)}if(s.getCurrentVariantId()!==""){this._setDisplayCurrency(A)}Promise.resolve(this._processModifyStartupExtension(O)).then(function(a){this._addFieldsToSFBAdvancedArea(a);if(this.oGlobalFilter.isCurrentVariantStandard()&&e.bNavSelVarHasDefaultsOnly!==false&&this.oGlobalFilter.getSmartVariant()){V.setSemanticDateRangeDefaultValue(n,o,l,t||{});this.oGlobalFilter.getSmartVariant().currentVariantSetModified(false)}r()}.bind(this));break;case"initial":Promise.resolve(this._processModifyStartupExtension()).then(function(a){this._addFieldsToSFBAdvancedArea(a);if(this.oGlobalFilter.isCurrentVariantStandard()&&e.bNavSelVarHasDefaultsOnly!==false&&this.oGlobalFilter.getSmartVariant()){V.setSemanticDateRangeDefaultValue(n,o,l,t||{});this.oGlobalFilter.getSmartVariant().currentVariantSetModified(false)}r()}.bind(this));break;default:break}}.bind(this))},_mergeDefaultWithSFBVariant:function(e,t){if(e.isEmpty()){return t}var a=new d;var r,i;[t,e].forEach(function(e){r=e.getSelectOptionsPropertyNames();r.forEach(function(t){a.removeSelectOption(t);if(!a.getParameter(t)){a.massAddSelectOption(t,e.getSelectOption(t))}});i=e.getParameterNames();i.forEach(function(t){a.removeParameter(t);if(!a.getSelectOption(t)){a.addParameter(t,e.getParameter(t))}})});return a},_setDisplayCurrency:function(e){var t=this.getGlobalFilter();if(!t){return}var a,r;var i=t.getAnalyticalParameters();if(i&&i.length>0){a=i.length;while(a--){if(i[a].name==="P_DisplayCurrency"||i[a].name==="DisplayCurrency"){r=i[a];break}}}if(!r){return}var s=t.getFilters([r.fieldName]);var n=s&&s[0]&&s[0].oValue1;if(n&&n!==" "){return}var o,l;if(r.name.indexOf("P_")===0){l=r.name;o=r.name.substr(2)}else{l="P_"+r.name;o=r.name}if(e&&!e.isEmpty()){var f;n=e.getParameter(o);if(!n||n===" "){n=e.getParameter(l)}if(!n||n===" "){f=e.getSelectOption(o);n=f&&f[0]&&f[0].Low}if(!n||n===" "){f=e.getSelectOption(l);n=f&&f[0]&&f[0].Low}}if(!n||n===" "){n=r.defaultPropertyValue}if(!n||n===" "){return}var g=new d;g.addParameter(r.name,n);var u=new h({selectionVariant:g.toJSONObject()});t.setUiState(u,{replace:false,strictMode:false})},_getCustomAppState:function(){var e={},t={};this.getCustomAppStateDataExtension(e);if(!A(e)){t[k]=e}var a;var r=true;var i=function(e,t){if(!(e instanceof b)){throw new Error("State must always be set with respect to a ControllerExtension")}if(!r){throw new Error("State must always be provided synchronously")}if(t){a=a||Object.create(null);var i=e.getMetadata().getNamespace();a[i]=t}};this.templateBaseExtension.provideExtensionAppStateData(i);r=false;if(a){t[j]=a}return t},onBeforeSFBVariantSave:function(){var e=this._getCustomAppState();var t,a=this.getGlobalFilter().getBasicSearchControl();if(a&&a.getValue){t=a.getValue()}var r=Object.keys(e).length;if(r){var i=this.getGlobalFilter().getFilterData();i._CUSTOM=e[k];i._EXTENSION=e[j];this.getGlobalFilter().setFilterData(i,true)}if(t){this.getGlobalFilter().getBasicSearchControl().setValue(t)}if(t||r){this.getGlobalFilter().fireFilterChange()}},onAfterSFBVariantLoad:function(){var e=this.getGlobalFilter().getFilterData();var t=this.getUIModel().getProperty("/enableLiveFilter");if(t){this.getGlobalFilter().fireFilterChange()}if(e){this._restoreAppState(e)}},onAssignedFiltersChanged:function(e){if(e.getSource()&&this.getView().byId("ovpFilterText")){this.getView().byId("ovpFilterText").setText(e.getSource().retrieveFiltersWithValuesAsText())}},_CustomFilterField:function(e,t){for(var a in e){if(e.hasOwnProperty(a)){t[a]=e[a]}}},_storeCurrentAppStateAndAdjustURL:function(e,t){if(this.getUIModel()&&this.getUIModel().getProperty("/bRTAActive")){return}if(e&&!e.oSource._bDirtyViaDialog){return}if(!this.bGlobalFilterLoaded){return}if(!this.oNavigationHandler){return}if(!this.bSkipIAppStateGeneration){var a=function(e){D.oAppStatePromise=null;if(e&&e.length>0){this.oNavigationHandler.replaceHash(e);return}throw"AppState key is empty"};var r=function(e){D.oAppStatePromise=null;if(e==="skip"){throw e}throw"Something went wrong while storing AppState - "+e};D.getCurrentAppStatePromise(t,this).then(a.bind(this),r.bind(this)).catch(function(e){if(e==="skip"){return}})}this.bSkipIAppStateGeneration=false},setTitle:function(e,t,a){var r="";if(e){r=e}else if(t){r=t}else{r=a}return r},onMacroFilterBarSearch:function(e){if(!this.bLoadDataOnMFBSearch){this.bLoadDataOnMFBSearch=true;return}this._collapseHeaderForPage();if(this.fnMacroFilterBarLoaded!==undefined){this.fnMacroFilterBarLoaded();C.loadingState.GLOBALFILTERFILLED=true;this.getView().byId("ovpFilterNotFulfilledPage").setVisible(false);this.bGlobalFilterLoaded=true}this.bGoButtonPressed=true;var t=this.getLayout();if(t){t.setActive(true)}if(this.aErrorCards&&this.aErrorCards.length>0){this.destroyErrorCardsAndReplaceWithOriginal()}this._clearStoredEntities();var a=this.byId("ovpGlobalMacroFilter"),r=a&&a.getFilters()&&a.getFilters().filters;this.aFilters=e&&e.getParameter("filters")||r;var i="ovp-"+(new Date).getTime();for(var s in this.oCardsModels){if(this.oCardsModels.hasOwnProperty(s)&&!n.isODataV4(this.oCardsModels[s])){try{this.oCardsModels[s].refresh(false,false,i)}catch(e){N.warning(e)}}}this.globalEventBus.publish("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",this.aFilters);var o=this.getUIModel().getProperty("/enableLiveFilter");if(!this.bSearchTriggeredManually&&(!this.bInitialMacroFilterBarSearch||!o)){this._storeCurrentAppStateAndAdjustURL()}else{this.bSearchTriggeredManually=false;this.bInitialMacroFilterBarSearch=false}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/app/ManageCardsUtils", ["sap/ui/base/Object","sap/ui/model/json/JSONModel","sap/ui/fl/write/api/ControlPersonalizationWriteAPI","sap/ui/core/Fragment","sap/ovp/cards/PersonalizationUtils","sap/ovp/cards/CommonUtils"],function(a,e,r,t,i,s){"use strict";return a.extend("sap.ovp.app.ManageCardsUtils",{constructor:function(a){if(!a){throw new Error("Main Controller is required to initialize ManageCardsUtil")}},onManageCardsMenuButtonPress:function(){this.aManageCardsDialogModelState=[];var a=s.getApp();var n=this;var d={onManageCardOkButtonPressed:function(e){if(e.getParameters().reason==="Ok"){var r=a.byId("manageCardsSelectionPanel").getP13nData();var t=a.getUIModel().getProperty("/aOrderedCards");var s=[];var d=r.length;for(var o=0;o<d;o++){if(r[o].visible!==t[o].visible){s.push({changeType:"visibility",content:{cardId:r[o].id,visibility:r[o].visible},isUserDependent:true})}r[o].visibility=r[o].visible}a.createOrDestroyCards.apply(a,[n.aManageCardsDialogModelState,r,false]);a.getUIModel().setProperty("/aOrderedCards",r);a.updateDashboardLayoutCards(r);var l=a.getOwnerComponent().oOvpConfig,g=l&&l.bInsightRTEnabled;if(g){a.updateCardVisibiltyForCM(r)}a.updateLayoutWithOrderedCards();i.savePersonalization(s,a.getView());for(var o=0;o<r.length;o++){var v=r[o];var u=a.aErrorCards.indexOf(v.id);if(u>-1&&v.visibility==false){a.aErrorCards.splice(u,1)}}if(document.querySelector(".sapFAvatar")){document.querySelector(".sapFAvatar").focus()}}var p=a.byId("manageCardsSelectionPanel");var f=a.byId("manageCardsDialog");if(p&&f){p.destroy();f.destroy()}},onManageCardResetButtonPressed:function(){var e=a.getLayout().getMetadata().getName();var t=a.getUIModel();var i=t.getProperty("/aOrderedCards");a.aErrorCards=[];var s=a.aManifestOrderedCards;a.createOrDestroyCards.apply(a,[i,s,e==="sap.ovp.ui.DashboardLayout"?true:false]);var d=a.getAllowedNumberOfCards();var o=d&&d.numberOfCards;var l=s.filter(function(a){return a.visibility===true});if(o&&l.length>o){for(var g=o;g<s.length;g++){s[g].visibility=false}}t.setProperty("/aOrderedCards",s);a.resetDashboardLayout();a.updateDashboardLayoutCards(s);a.updateLayoutWithOrderedCards();n.manageCardsDialog.getModel().setProperty("/cards",s);var v=[];for(var g=0;g<i.length;g++){v.push(a.getView().byId(i[g].id))}var u=n.enhanceOrderedCardsForP13NDialog(i);var p=a.byId("manageCardsSelectionPanel");p.setP13nData(u);if(d){n.setMsgStripAndOkButton(p,a)}r.reset({selectors:v}).finally(function(){if(document.querySelector(".sapFAvatar")){document.querySelector(".sapFAvatar").focus()}})},onCardVisibilityChange:function(){var e=a.byId("manageCardsSelectionPanel");var r=a.getAllowedNumberOfCards();if(r){n.setMsgStripAndOkButton(e,a)}}};this._oManageCardsFragmentController=d;this.oManageCardsFragment=t.load({id:a.getView().getId(),name:"sap.ovp.app.ManageCard",controller:d}).then(function(r){n.manageCardsDialog=r;var t=a.getUIModel().getProperty("/aOrderedCards");var i=Object.assign([],t);n.aManageCardsDialogModelState=n.getManageCardsDialogModelState(t);var s=new e({cards:i});n.manageCardsDialog.setModel(s);a.getView().addDependent(n.manageCardsDialog);n.openManageCardsDialog(t)})},openManageCardsDialog:function(a){var e=s.getApp();var r=this.enhanceOrderedCardsForP13NDialog(a);var t=e.byId("manageCardsDialog");var i=e.byId("manageCardsSelectionPanel");i.setP13nData(r);var n=this.getAllowedNumberOfCardsAndSetMessageStripText(e);var d=a.filter(function(a){return a.visibility===true});var o=e.byId("manageCardsPanelWarningMessage");if(n&&a.length>=n&&d.length>=n){o.setVisible(true)}t.open()},enhanceOrderedCardsForP13NDialog:function(a){var e=[];var r=s.getApp();a.forEach(function(a){e.push(a["id"])});var t=r._getCardsModel();var i=[];var n=r.getLayout().getMetadata().getName();if(n==="sap.ovp.ui.DashboardLayout"){var d=r._getCardArrayAsVariantFormatDashboard();d.forEach(function(a){var r=t.find(function(e){return e.id===a.id});var n=s.getUpdatedTitle(a.id);if(e.indexOf(a.id)!=-1){i.push({id:a.id,visibility:a.visibility,visible:a.visibility,name:a.id,label:n||r.settings.title})}});a=i}else if(n==="sap.ovp.ui.EasyScanLayout"){var o=r.getLayout().getContent();var t=r._getCardsModel();o.forEach(function(a){var r=a.getId();var n=r.split("--").pop();var d=t.find(function(a){return a.id===n});var o=s.getUpdatedTitle(n);if(e.indexOf(n)!=-1){i.push({id:n,visibility:a.getVisible(),visible:a.getVisible(),name:n,label:o||d.settings.title})}});a=i}this.aManageCardsDialogModelState=this.getManageCardsDialogModelState(a);r.getUIModel().setProperty("/aOrderedCards",a);this.manageCardsDialog.getModel().setProperty("/cards",a);return a},getManageCardsDialogModelState:function(a){var e=[];for(var r=0;r<a.length;r++){e.push({id:a[r].id,visibility:a[r].visibility})}return e},getAllowedNumberOfCardsAndSetMessageStripText:function(a){var e=a.getAllowedNumberOfCards();var r=e&&e.numberOfCards;var t=e&&e.errorMessage;var i=a.byId("manageCardsPanelWarningMessage");i.setText(t);i.setVisible(false);return r},setMsgStripAndOkButton:function(a,e){var r=a.getSelectedFields().length;var t=this.getAllowedNumberOfCardsAndSetMessageStripText(e);var i=e.byId("manageCardsPanelWarningMessage");var s=e.byId("manageCardsDialog").sId;var n=e.byId(s+"-confirmBtn");n.setEnabled(true);if(t&&r>=t){i.setVisible(true)}if(t&&r>t){n.setEnabled(false)}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/app/NavigationHelper", ["sap/fe/navigation/PresentationVariant","sap/ovp/cards/AnnotationHelper","sap/ovp/cards/CommonUtils","sap/ovp/insights/helpers/Filters","sap/ovp/helpers/ODataAnnotationHelper","sap/ovp/cards/NavigationHelper","sap/ovp/app/OVPLogger"],function(t,e,a,r,n,i,o){"use strict";var s=new o("OVP.app.NavigationHelper");function c(t){if(t.startsWith("#")){t=t.slice(1)}var e=t.split("-");var a=e[0]||"";var r=e[1]?e[1].split("?")[0]:"";var n={};var i=e[1]?e[1].split("?")[1]:undefined;if(i){var o=i.split("&");for(var s=0;s<o.length;s++){var c=o[s];var v=c.split("=")[0];var l=c.split("=")[1];n[v]=l}}return{semanticObject:a,action:r,parameters:n}}function v(t){if(!t){return false}var e=t.getEntityType();var a=t.getCardPropertiesModel();if(e&&a){var r=a.getProperty("/identificationAnnotationPath");var o=n.getRecords(e,r,t.getView().getModel());var s=t.getModel();if(i.isNavigationInAnnotation(s,o)){return true}}var c=a&&a.getProperty("/template");var v=["sap.ovp.cards.table","sap.ovp.cards.list","sap.ovp.cards.v4.table","sap.ovp.cards.v4.list"];return v.indexOf(c)>-1&&i.checkLineItemNavigation(t.getModel(),t.getEntityType(),a)}function l(t,e){if(e.semanticObject&&e.action&&t.semanticObject&&t.action){t["lineItemSemanticObject"]=e.semanticObject;t["lineItemAction"]=e.action}else if(e.semanticObject&&e.action){e["lineItemSemanticObject"]=e.semanticObject;e["lineItemAction"]=e.action;e.semanticObject="";e.action="";return e}return t}function p(t,e){var a=t.getCardPropertiesModel();var r=i.getEntityNavigationEntries(null,t.getModel(),t.getEntityType(),a)||[];var n=r.length>0?r[0]:{};if(e.cardComponentName==="List"||e.cardComponentName==="Table"){var o=t.getCardItemsBinding(),s=o&&o.getAllCurrentContexts(),c=s&&s[0],v=i.getEntityNavigationEntries(c,t.getModel(),t.getEntityType(),a,a.getProperty("/annotationPath")),p=v.length>0?v[0]:{};var g={};var f={};var d,y;if(n&&n.type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){y=u(t,n)}else if(n&&n.type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){f=m(t,n)}if(p&&p.type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){d=u(t,p)}else if(p&&p.type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){g=m(t,p)}return Promise.all([y,d]).then(function(t){var e=t&&t[0]||f,a=t&&t[1]||g;return l(e,a)})}else{if(n&&n.type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){return u(t,n).then(function(t){return t})}if(n&&n.type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){var P=m(t,n);return Promise.resolve(P)}}}function u(t,e){var r=a.getUshellContainer();if(!r){return}return r.getServiceAsync("URLParsing").then(function(a){return a.isIntentUrlAsync(e.url).then(function(r){if(r){var n=m(t,e);if(n.semanticObject){return n}else{var i=a.parseShellHash(e.url);return m(t,i)}}return{type:"url",url:e.url}})}).catch(function(t){s.error(t)})}function g(t){var e=d(t);var n=e&&e["sNavPresentationVariant"];if(n&&!a.isJSONData(n)){e["sNavPresentationVariant"]=r.removeExtraInfoVariant(n)}return e}function f(t){var e=[];for(var a=0;a<t.property.length;a++){if(t.property[a]["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"]&&t.property[a]["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"].Bool){e.push(t.property[a].name)}}return e}function d(r){var n=r.getCardPropertiesModel(),i=n&&n.getProperty("/staticContent");var o,s;var c=r.getModel();var v=a.isODataV4(c);if(!i){var l=e.getCardSorters(r.getCardPropertiesModel(),v);var p=r.getEntityType();s=l&&new t(l);o=n&&n.getProperty("/staticParameters")}var u=f(p);return{sensitiveProperties:u,staticPropertyMap:o,sNavPresentationVariant:s?s.toJSONObject():null}}function m(t,e){return{type:"intent",semanticObject:e.semanticObject,action:e.action,staticParams:g(t)}}function y(t,e){if(t&&t.length){var r=a.isODataV4(e);for(var n=0;n<t.length;n++){var i=t[n];if(r&&i.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){return true}else if(!r&&i.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){return true}}}return false}function P(t,e,a){if(e&&t){var r=t.getProperty("/identificationAnnotationPath");var i=n.getRecords(e,r,a);return y(i,a)}return false}function h(t,e){if(e&&t){if(t.getProperty("/template")==="sap.ovp.cards.charts.analytical"){var a=t.getProperty("/kpiAnnotationPath");if(a){var r=e[a];if(r&&r.Detail){var n=r.Detail.SemanticObject&&r.Detail.SemanticObject.String;var i=r.Detail.Action&&r.Detail.Action.String;if(n&&i){return true}}}}}return false}function b(t,e,a){if(e&&t){var r=t.getProperty("/annotationPath");var i=n.getRecords(e,r,a);return y(i,a)}return false}return{getNavigationIntentFromAuthString:c,bCheckNavigationForCard:v,getNavigationParameters:p,checkLineItemNavigation:b,checkIdentificationAnnotationNavigation:P,checkKPIAnnotationNavigation:h,getStaticParams:g}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * Fiori Element logger which prefix Fiori Elements for the log along with component
 */
sap.ui.predefine("sap/ovp/app/OVPLogger", ["sap/ui/base/Object","sap/base/Log"],function(e,t){"use strict";var s="FioriElements: ";return e.extend("sap.ui.base.Log",{constructor:function(e){return t.getLogger(s+e)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/app/OVPUtils", ["sap/base/util/isPlainObject","sap/base/util/LoaderExtensions","sap/base/util/merge"],function(e,a,t){"use strict";var p={bCRTLPressed:false};p.constants={explace:"explace",inplace:"inplace"};p.Annotations={dataPoint:"dataPoint",title:"title",subTitle:"subtitle",valueSelectionInfo:"value Selection Info",listFlavor:"listFlavor"};p.Layers={vendor:"VENDOR",customer:"CUSTOMER",customer_base:"CUSTOMER_BASE"};p.loadingState={ERROR:"Error",LOADING:"Loading",GLOBALFILTERFILLED:false};p.merge=function(){var a,t,p,n,o,r,s=arguments[0]||{},i=1,l=arguments.length,f=false;if(typeof s==="boolean"){f=s;s=arguments[1]||{};i=2}if(typeof s!=="object"&&typeof s!=="function"){s={}}if(l===i){s=this;--i}for(;i<l;i++){if((a=arguments[i])==null){continue}for(t in a){p=s[t];n=a[t];if(s===n){continue}if(f&&n&&(e(n)||(o=Array.isArray(n)))){if(o){o=false;r=p&&Array.isArray(p)?p:[]}else{r=p&&e(p)?p:{}}s[t]=this.merge(f,r,n)}else if(n!==undefined){s[t]=n}}}return s};p.getManifest=function(e){var n=sap.ui.require("sap/ushell/Container");if(!n){e="local"+p.getNoFLPAppPath()}if(typeof URLSearchParams!==undefined){var o=new URLSearchParams(window.location.search),r=o.get("manifest"),s=a.loadResource(e+"/manifest.json");if(r){r.split(",").forEach(function(p){if(p.indexOf("/")!==0){p=e+"/"+p}s=t({},s,a.loadResource(p))})}return s}};p.getNoFLPAppPath=function(){if(typeof URLSearchParams!==undefined){var e=new URLSearchParams(window.location.search);var a=e.get("app");return p.getAppInfo(a).appPath}};p.getAppInfo=function(e){var a={procurement:{appName:"Procurement Overview Page",appPath:"/apps/procurement/webapp"},sales:{appName:"Sales(Analytical) Overview Page",appPath:"/apps/sales/webapp"},bookshop:{appName:"Browse Books (V24)",appPath:"/apps/bookshop/webapp"},books:{appName:"Books overview",appPath:"/apps/books/webapp"},sapHanaOverview:{appName:"SAP HANA overview",appPath:"/apps/saphanaoverview/webapp"},"Freestyle-Inbound":{appName:"Freestyle Inbound",appPath:"/apps/Freestyle-Inbound/webapp"}};return a[e]};return p},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/app/ShareUtils", ["sap/ui/base/Object","sap/m/library","sap/m/MenuItem","sap/ui/core/Fragment","sap/ui/core/CustomData","sap/base/util/ObjectPath","sap/ui/thirdparty/hasher","sap/ushell/ui/footerbar/AddBookmarkButton","sap/suite/ui/commons/collaboration/ServiceContainer","sap/ui/performance/trace/FESRHelper","sap/ui/core/Component","sap/ovp/app/OVPLogger"],function(e,t,r,o,a,i,n,s,l,c,u,p){"use strict";return e.extend("sap.ovp.app.ShareUtils",{constructor:function(e){if(!e){throw new Error("controller is undefined!")}this.oController=e},init:function(){this._createModelForTile();this._checkJamAuth()},onShareButtonAvailableAndPressed:function(e){var i=this.oController._getLibraryResourceBundle();var n=this.oController.getUIModel();var h=n&&n.getProperty("/title");var m=this;var d;var f={shareEmailPressed:function(){t.URLHelper.triggerEmail(null,i.getText("Email_Subject",[h]),document.URL)},shareMSTeamsPressed:function(){var e="";var t=n.getProperty("/subtitle");if(t&&t.length>0){e=n.getProperty("/appTitle")||"";t=h+" - "+t}else{t="";e=h}var r={url:document.URL,appTitle:e,subTitle:t,minifyUrlForChat:true};m.oSuiteCollaborationService.share(this.getCustomData()[0].getValue(),r)},shareJamPressed:function(){u.create({name:"sap.collaboration.components.fiori.sharing.dialog",settings:{object:{id:document.URL,share:h}}}).then(function(e){e.open()})},shareTilePressed:function(){d.firePress()}};if(this.oShareActionSheet){this.oShareActionSheet.destroy()}this.oSharePageFragment=o.load({name:"sap.ovp.app.SharePage",controller:f}).then(function(e){m.oController.getView().addDependent(e);return e});this.oSharePageFragment.then(function(t){m.oShareActionSheet=t;var o=new p("OVP.app.ShareUtils");try{d=new s("",{customUrl:n.getProperty("/tileInfo").tileCustomURL(),title:h,tileIcon:n.getProperty("/icon")||"sap-icon://bookmark"});n.setProperty("/tileVisible",d.getEnabled());n.setProperty("/tileIcon",d.getIcon());n.setProperty("/tileText",d.getText())}catch(e){o.error("Error initializing AddBookmarkButton:",e);n.setProperty("/tileVisible",false)}var i=2;if(!n.getProperty("/jamVisible")){i=1}l.getServiceAsync().then(function(t){m.oSuiteCollaborationService=t;var o=m.oSuiteCollaborationService.getOptions();if(Array.isArray(o)&&o.length>0){o.forEach(function(e){if(Array.isArray(e.subOptions)&&e.subOptions.length>1){var t=[];e.subOptions.forEach(function(e){var o=new r({text:e.text,icon:e.icon,press:f.shareMSTeamsPressed});o.addCustomData(new a({key:"data",value:e}));c.setSemanticStepname(o,"press",e.fesrStepName);t.push(o)});m.oShareActionSheet.insertItem(new r({text:e.text,icon:e.icon,items:t}),i)}else{var o=new r({text:e.text,icon:e.icon,press:f.shareMSTeamsPressed});o.addCustomData(new a({key:"data",value:e}));c.setSemanticStepname(o,"press",e.fesrStepName);m.oShareActionSheet.insertItem(o,i)}i++})}m.oShareActionSheet.openBy(e)})})},_checkJamAuth:function(){var e=i.get("sap.ushell.Container.getUser");var t=this.oController.getUIModel();if(t){t.setProperty("/jamVisible",!!e&&e().isJamActive())}},_createModelForTile:function(){var e=this.oController.getUIModel();var t,r=e&&e.getProperty("/title");var o={tileTitle:r,tileCustomURL:function(){t=n.getHash();return t?"#"+t:window.location.href}};if(e){e.setProperty("/tileInfo",o)}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/app/TemplateBaseExtension", ["sap/ui/core/mvc/ControllerExtension","sap/ui/core/mvc/OverrideExecution"],function(e,t){"use strict";return e.extend("sap.ovp.app.TemplateBaseExtension",{metadata:{methods:{provideExtensionAppStateData:{public:true,final:false,overrideExecution:t.After},restoreExtensionAppStateData:{public:true,final:false,overrideExecution:t.After},addFilters:{public:true,final:false,overrideExecution:t.After},provideStartupExtension:{public:true,final:false,overrideExecution:t.After},provideExtensionNavigation:{public:true,final:false,overrideExecution:t.After},provideCustomActionPress:{public:true,final:false,overrideExecution:t.After},provideCustomParameter:{public:true,final:false,overrideExecution:t.After}}},provideExtensionAppStateData:function(e){},restoreExtensionAppStateData:function(e){},addFilters:function(e){},provideStartupExtension:function(e){},provideExtensionNavigation:function(e,t,i){},provideCustomActionPress:function(e){},provideCustomParameter:function(e){}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * @fileOverview This file handles the resource bundles for ovp framework.
 */
sap.ui.predefine("sap/ovp/app/resources", ["sap/ui/model/resource/ResourceModel","sap/ovp/app/OVPLogger","sap/ui/core/Lib"],function(e,r,o){"use strict";var u={};u.oResourceBundle=null;u.oResourceModel=null;var n=new r("OVP.app.resources");u.pResourcePromise=new Promise(function(r,l){try{var t=o.getResourceBundleFor("sap.ovp");if(!t){return l("Bundle creation failure")}u.oResourceBundle=t;u.oResourceModel=new e({bundleUrl:t.oUrlInfo.url,bundle:t});r(t)}catch(e){n.error("sap.ovp resource library bundle error:"+e);return l("Bundle creation failure")}});u.getText=function(e,r){if(r&&r.length>0){return this.oResourceBundle?this.oResourceBundle.getText(e,r):null}else{return this.oResourceBundle?this.oResourceBundle.getText(e):null}};u.getProperty=function(e){return this.oResourceModel?this.oResourceModel.getProperty(e):null};return u},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/ActionUtils", ["sap/ui/layout/form/SimpleForm","sap/ui/comp/smartfield/SmartField","sap/ui/comp/smartfield/SmartLabel","sap/ui/comp/library"],function(a,e,r,t){"use strict";var n=t.smartfield.JSONType;return{getActionInfo:function(a,e,r){var t=a.getModel().getMetaModel();var n=e.action.split("/")[1];var o=a.getObject();var i={oContext:a,sFunctionImportPath:e.action,sFunctionLabel:e.label,oFunctionImport:t.getODataFunctionImport(n),parameterData:{},allParameters:[]};var l;if(i.oFunctionImport.parameter){var s=this._getKeyProperties(r);for(var m=0;m<i.oFunctionImport.parameter.length;m++){var u=i.oFunctionImport.parameter[m];this._addParamLabel(u,r,t);if(s[u.name]){u.isKey=true}if(typeof u.nullable==="undefined"){u.nullable=true}if(o.hasOwnProperty(u.name)){l=o[u.name]}else{l=""}i.parameterData[u.name]=l;i.allParameters.push(u)}}return i},_getKeyProperties:function(a){var e={};if(a&&a.key&&a.key.propertyRef){for(var r=0;r<a.key.propertyRef.length;r++){var t=a.key.propertyRef[r].name;e[t]=true}}return e},_addParamLabel:function(a,e,r){if(e&&a&&!a["com.sap.vocabularies.Common.v1.Label"]){var t=r.getODataProperty(e,a.name,false);if(t&&t["com.sap.vocabularies.Common.v1.Label"]){a["com.sap.vocabularies.Common.v1.Label"]=t["com.sap.vocabularies.Common.v1.Label"]}else if(t&&t["sap:label"]){a["sap:label"]=t["sap:label"]}}},buildParametersForm:function(t,o){function i(a){var e="";if(a["com.sap.vocabularies.Common.v1.Label"]){e=a["com.sap.vocabularies.Common.v1.Label"].String}else if(a["sap:label"]){e=a["sap:label"]}else{e=a.name}return e}var l=new a({editable:true});var s=[];for(var m=0;m<t.allParameters.length;m++){var u=t.allParameters[m];var p=i(u);var v="{/"+u.name+"}";var f=null;var d=u.type;var c=u.maxLength?parseInt(u.maxLength,10):undefined;if(d==="Edm.Boolean"){f=n.Boolean}else if(d==="Edm.Byte"||d==="Edm.SByte"||d==="Edm.Int16"||d==="Edm.Int32"){f=n.Integer}else{f=n.String}var y=this._isMandatoryParameter(u);var b=new e({value:v,mandatory:y,jsontype:f,maxLength:c,editable:!u.isKey});b.attachChange(o);s.push(b);var g=new r;g.setRequired(y&&!u.isKey);g.setText(p);g.setLabelFor(b);l.addContent(g);l.addContent(b)}return l},getParameters:function(a,e){var r=this._validateParametersValue(a,e);return r.preparedParameterData},mandatoryParamsMissing:function(a,e){var r=this._validateParametersValue(a,e);return r.missingMandatoryParameters&&r.missingMandatoryParameters.length>0},_validateParametersValue:function(a,e){var r=[];var t=a.getObject("/");var n={};var o,i;for(var l=0;l<e.parameter.length;l++){var s=e.parameter[l];var m=s.name;if(t.hasOwnProperty(m)){o=t[m];i=this._isMandatoryParameter(s);if(o===undefined||o===""){if(i){if(s.type==="Edm.Boolean"){n[m]=false}else{r.push(s)}}}else{n[m]=o}}else{throw new Error("Unknown parameter: "+m)}}return{preparedParameterData:n,missingMandatoryParameters:r}},_isMandatoryParameter:function(a){return!this._toBoolean(a.nullable)},_toBoolean:function(a){if(typeof a==="string"){var e=a.toLowerCase();return!(e=="false"||e==""||e==" ")}return!!a}}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * Any function that needs to be exported(used outside this file) via namespace should be defined as
 * a function and then added to the return statement at the end of this file
 */
sap.ui.predefine("sap/ovp/cards/AnnotationHelper", ["sap/ui/core/format/NumberFormat","sap/ui/core/format/DateFormat","sap/ovp/cards/CommonUtils","sap/ui/model/odata/AnnotationHelper","sap/ui/model/odata/v4/AnnotationHelper","sap/ui/Device","sap/ovp/app/resources","sap/base/i18n/date/CalendarType","sap/base/strings/formatMessage","sap/base/util/isPlainObject","sap/base/util/each","sap/ovp/cards/MetadataAnalyser","sap/base/util/merge","sap/ovp/app/OVPLogger","sap/base/util/isEmptyObject","sap/ovp/cards/PeriodDateFormat","sap/ovp/cards/Constants","sap/ovp/helpers/V4/MetadataAnalyzer","sap/ovp/app/OVPUtils","sap/ovp/cards/Filterhelper"],function(e,t,r,a,i,n,o,l,u,s,f,c,v,g,p,m,h,P,y,d){"use strict";var C=h.errorMessages;var T={TEXT:"com.sap.vocabularies.Common.v1.Text",TEXT_ARRANGEMENT:"com.sap.vocabularies.UI.v1.TextArrangement",UOM:"Org.OData.Measures.V1.Unit",ISO_CURRENCY:"Org.OData.Measures.V1.ISOCurrency"};var b={TEXT_LAST:"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast",TEXT_FIRST:"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst",TEXT_ONLY:"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly",TEXT_SEPARATE:"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate"};var D=new g("OVP.cards.AnnotationHelper");function O(e,t){if(!t){return""}var r=ke(e);if(t.Label){return r?t.Label:t.Label.String}var a=e.getSetting&&e.getSetting("ovpCardProperties");var i=a&&a.getProperty("/metaModel");var n=a&&a.getProperty("/entityType");if(!i||!n){return""}var o;if(t.Value){o=r?t.Value.$Path:t.Value.Path}if(t.Target){var l=r?"/"+_(n.$Type,t,e):_(n.$path,t,e);var u=l&&i.getProperty(l);o=r?u&&u.Value.$Path:u&&u.Value.Path}if(!o||!o.length>0||o===" "){return""}var s=r?i.getData()["$Annotations"][n.$Type+"/"+o]:i.getODataProperty(n,o);if(!s){return""}var f="";if(r){f=s["@com.sap.vocabularies.Common.v1.Label"]||""}else{f=s["sap:label"]||(s["com.sap.vocabularies.Common.v1.Label"]||"").String||""}return f}O.requiresIContext=true;function I(e){if(e.EdmType==="Edm.DateTime"||e.EdmType==="Edm.DateTimeOffset"){return"Right"}return"Left"}I.requiresContext=true;function V(e,t){if(e.getSetting){var r=e.getSetting("_ovpCache");if(r){return r[t]}}return undefined}function F(e,t,r){if(e.getSetting){var a=e.getSetting("_ovpCache");if(a){a[t]=r}}}function S(e,t,r){var a,i;if(t){a=t.None;i=r?e&&e.$EnumMember:e&&e.EnumMember;if(i){if(N(i,"Negative")){a=t.Negative}else if(N(i,"Critical")){a=t.Critical}else if(N(i,"Positive")){a=t.Positive}}}return a}function N(e,t){return e&&e.indexOf(t,e.length-t.length)!==-1}function x(t,r,a,i,n,o,l,u){if(typeof t=="string"&&u){t=e.getFloatInstance().parse(t)}var s={};s.EnumMember="None";var f=Number.NEGATIVE_INFINITY;var c=Number.POSITIVE_INFINITY;if(!n&&n!==0&&(a||a===0)){n=a}if(!o&&o!==0&&(i||i===0)){o=i}if(!a&&a!==0){a=f}if(!i&&i!==0){i=c}if(t!==undefined){t=Number(t);if(N(r,"Minimize")||N(r,"Minimizing")){if((o||o===0)&&(i||i===0)){if(t<=parseFloat(o)){s.EnumMember="Positive"}else if(t>parseFloat(i)){s.EnumMember="Negative"}else{s.EnumMember="Critical"}}}else if(N(r,"Maximize")||N(r,"Maximizing")){if((n||n===0)&&(a||a===0)){if(t>=parseFloat(n)){s.EnumMember="Positive"}else if(t<parseFloat(a)){s.EnumMember="Negative"}else{s.EnumMember="Critical"}}}else if(N(r,"Target")){if((o||o===0)&&(i||i===0)&&(n||n===0)&&(a||a===0)){if(t>=parseFloat(n)&&t<=parseFloat(o)){s.EnumMember="Positive"}else if(t<parseFloat(a)||t>parseFloat(i)){s.EnumMember="Negative"}else{s.EnumMember="Critical"}}}}return S(s,l,false)}function E(t,r,a,i,n){if(n&&typeof t=="string"){t=e.getFloatInstance().parse(t)}if(!t||!r){return}t=Number(t);if(!i&&t-r>=0){return"Up"}if(!a&&t-r<=0){return"Down"}if(r&&i&&t-r>=i){return"Up"}if(r&&a&&t-r<=a){return"Down"}}function A(e,t){var r=e.getPath(0)+"-DataFields-Sorted";var a=V(e,r);var i=ke(e);if(!a){var n=R(e,t);var o=n.map(function(e){return i?e.Value.$Path:e.Value.Path});o=o.filter(function(e){return!!e});var l,u,s;a=t.filter(function(e){s=e&&e.Value||{};l=(i?s.$Path:s.Path)||"";u=(i?e.$Type:e.RecordType)||"";return u==="com.sap.vocabularies.UI.v1.DataField"&&o.indexOf(l)===-1});a=L(a,e);F(e,r,a)}return a}A.requiresIContext=true;function R(e,t,r){var a=e.getPath(0)+"-DataPoints-Sorted";var i=V(e,a);var n=ke(e);if(!i){if(r){i=t.filter(function(e){return U(e,n)})}else{i=t.filter(function(e){return M(e,n)})}i=L(i,e);var o;for(var l=0;l<i.length;l++){o=e.getPath(0).substr(0,e.getPath(0).lastIndexOf("/")+1);i[l]=e.getModel(0).getProperty(_(o,i[l],e));o=""}F(e,a,i)}return i}R.requiresIContext=true;function M(e,t){var r=t?e&&e.$Type:e&&e.RecordType;var a=e&&e.Target||{};var i=(t?a.$AnnotationPath:a.AnnotationPath)||"";return r==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&i.match(/@com.sap.vocabularies.UI.v1.DataPoint.*/)}function U(e,t){var r=t?e&&e.$Type:e&&e.RecordType||"";var a=e&&e.Target||{};var i=(t?a.$AnnotationPath:a.AnnotationPath)||"";return r==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&i.match(/@com.sap.vocabularies.UI.v1.DataPoint.*/)||r==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&i.match(/@com.sap.vocabularies.Communication.v1.Contact.*/)}function $(e){if(!e||!e.Criticality||!e.Criticality.Path){return}return"{path:'"+e.Criticality.Path+"'}"}function _(e,t,r){var a=ke(r);if(a){return e+t.Target.$AnnotationPath}if(e&&!N(e,"/")){e+="/"}return e+t.Target.AnnotationPath.slice(1)}function w(e,t){var r,a;var i=ke(t);var n=i?e["@com.sap.vocabularies.UI.v1.Importance"]:e["com.sap.vocabularies.UI.v1.Importance"];if(n){r=i?n.$EnumMember:n.EnumMember;switch(r){case"com.sap.vocabularies.UI.v1.ImportanceType/High":a=1;break;case"com.sap.vocabularies.UI.v1.ImportanceType/Medium":a=2;break;case"com.sap.vocabularies.UI.v1.ImportanceType/Low":a=3;break}}else{a=4}return a}function L(e,t){if(e.length<2){return e}var r=parseInt(e.length/2,10);var a=e.slice(0,r);var i=e.slice(r,e.length);return q(L(a,t),L(i,t),t)}function q(e,t,r){var a=[];while(e.length&&t.length){var i=w(e[0],r),n=w(t[0],r);if(i<=n){a.push(e.shift())}else{a.push(t.shift())}}while(e.length){a.push(e.shift())}while(t.length){a.push(t.shift())}return a}function j(e,t,r){var a=A(e,t)[r];if(a){return X(e,a)}return""}function B(e,t,r){var a=A(e,t)[r];return O(e,a)}function Y(e,t,r){var a=t.filter(M);a=L(a,e);if(!a||!a.length||!a.length>0){return""}return O(e,a[0])}function k(e,t,r,a){var i=R(e,t)[r];if(!i){return""}var n=e.getSetting("ovpCardProperties");var o=n.getProperty("/entityType");var l=n.getProperty("/metaModel");return G(e,i,o,l,a)}function H(e,t,r){var a=R(e,t)[r];return a&&a.Criticality?true:false}function G(e,t,r,a,i){if(!t||!t.Value){return""}var n=e.getSetting("ovpCardProperties");var o=false;if(n){var l=n.getProperty("/ignoreSapText");o=l==undefined?o:l}var u=a.getODataProperty(r,t.Value.Path);var s=false;if(o==true){if(u&&(u["com.sap.vocabularies.Analytics.v1.Measure"]||u["sap:aggregation-role"]=="measure")){s=true}}if(!s&&u){var f;if(u[T.TEXT]){f=u[T.TEXT].String?u[T.TEXT].String:u[T.TEXT].Path}else if(u["sap:text"]){f=u["sap:text"]}if(f){u=a.getODataProperty(r,f);t={Value:{Path:u.name}}}}return X(e,t,i)}function X(e,t,r,i){if(t.Value.Apply){return a.format(e,t.Value)}var n=e.getSetting("ovpCardProperties");var o=n.getProperty("/entityType");var l=n.getProperty("/metaModel");return J(e,t,o,l,r,i)}X.requiresIContext=true;function z(e,t,r,i){if(!r||typeof i!=="string"){return i}var n=r[T.TEXT]||r["sap:text"];if(!n){return i}var o,l;o=r[T.TEXT_ARRANGEMENT];l=o&&o.EnumMember;if(!l){o=n&&n[T.TEXT_ARRANGEMENT];l=o&&o.EnumMember}if(!l){o=t&&t[T.TEXT_ARRANGEMENT];l=o&&o.EnumMember}var u;if(typeof n==="object"){u=a.format(e,n)}else{u=a.format(e,{Path:n})}if(!u||u===" "){return i}if(!l){return i+" ("+u+")"}var s;switch(l){case b.TEXT_FIRST:s=u+" ("+i+")";break;case b.TEXT_LAST:s=i+" ("+u+")";break;case b.TEXT_ONLY:s=u;break;case b.TEXT_SEPARATE:s=i+" ("+u+")";break;default:s=i;break}return s}function J(e,t,r,i,n,o,l){if(t.Value.Apply){return a.format(e,t.Value)}var u=t.Value.Path?t.Value.Path:t.Value.String;var s=i.getODataProperty(r,u),f="",c,v;var g=e.getSetting("ovpCardProperties");var p=g&&g.getProperty("/contentFragment");if(!o){if(t.Value.Path&&t.Value.Path.split("/").length>1){s=te(i,r,t.Value.Path,e)}if(!s){return""}if(s["type"]==="Edm.DateTime"||s["type"]==="Edm.DateTimeOffset"){var m={relative:true,relativeScale:"auto"},h=g&&g.getProperty("/showDateInRelativeFormat");if(h!==undefined&&!h){m={style:"medium"}}c="CardAnnotationhelper.formatDate";v={dateFormat:m,bUTC:s["type"]==="Edm.DateTime"?true:false,functionName:c};f=W([t.Value.Path?t.Value.Path:s.name],c,v)}else if(t.ValueFormat&&t.ValueFormat.NumberOfFractionalDigits||s["scale"]){var P=t.ValueFormat&&t.ValueFormat.NumberOfFractionalDigits?t.ValueFormat.NumberOfFractionalDigits.Int:0,y;var d=t.ValueFormat&&t.ValueFormat.ScaleFactor&&t.ValueFormat.ScaleFactor.Decimal;if(s[T.ISO_CURRENCY]){y=s[T.ISO_CURRENCY].Path?s[T.ISO_CURRENCY].Path:s[T.ISO_CURRENCY].String}else if(s[T.UOM]){y=s[T.UOM].Path?s[T.UOM].Path:s[T.UOM].String}else if(s["sap:unit"]){y=s["sap:unit"]}var C=y?i.getODataProperty(r,y):null,b=[t.Value.Path?t.Value.Path:s.name];if(P>2){P=2}v={numberOfFractionalDigits:P,scaleFactor:d};if(s[T.ISO_CURRENCY]){var D=s[T.ISO_CURRENCY];if(D.Path){c="CardAnnotationhelper.formatCurrency";b.push(D.Path)}else if(D.String){v.currencyString=D.String;c="CardAnnotationhelper.formatCurrency"}}else if(C&&(C[T.ISO_CURRENCY]||C["sap:semantics"]==="currency-code")){c="CardAnnotationhelper.formatCurrency";b.push(y)}else{c="CardAnnotationhelper.formatNumberCalculation"}v.functionName=c;f=W(b,c,v)}else{if(l){f=a.simplePath(e,t.Value)}else{var O=a.format(e.getModel()?e:e.getInterface(0),t.Value);var I=O.split(",");var V=[];if(I.length>1){for(var F=0;F<I.length;F++){if(I[F].indexOf("path:")>=0||I[F].indexOf("type:")>=0){V.push(I[F])}}if(V.length>0){f=f+V.join(",");if(f.substring(f.length-1)!=="}"){f=f+"}"}}}else{f=O}}}if(p){f=z(e,r,s,f)}if(s&&s[T.UOM]){var S=s[T.UOM];if(S.Path){f+=" "+W([S.Path]);f+=" "+K(S.Path,i,r,e)}else if(S.String){if(S.String!=="%"){f+=" "}f+=S.String}}}if(!n){if(s[T.ISO_CURRENCY]){var D=s[T.ISO_CURRENCY];if(D){if(D.Path){f+=" "+W([D.Path]);f+=" "+K(D.Path,i,r,e)}else if(D.String){f+=" "+D.String}}}}if(f[0]===" "){f=f.substring(1)}return f}function K(e,t,r,a){if(e){var i,n,o;var l=ke(a);if(e.split("/").length>1){i=te(t,r,e,a);n=ce(t,r,e,a)}else{i=l?Ut(t,r,e):t.getODataProperty(r,e)}if(i){o=l?i["@"+T.TEXT]&&i["@"+T.TEXT].$Path:i[T.TEXT]&&i[T.TEXT].Path||i["sap:text"]}if(o&&n){o=n+"/"+o}if(o){return" ({"+o+"})"}return""}}function W(e,t,r,a,i){i=i||false;var n="",o=e.length;if(o>1||r){n="{parts:[";for(var l=0;l<o;l++){if(a){n+="{path: '"+e[l]+"',type:'sap.ui.model.odata.type."+a+"'}"+(l===o-1&&!r?"]":", ")}else{n+="{path: '"+e[l]+"'}"+(l===o-1&&!r?"]":", ")}}if(r){var u="{value:"+JSON.stringify(r)+", model: 'ovpCardProperties'}";n+=u+"]"}}else{n="{path: '"+e[0]+"'"}if(i){n+=", useInternalValues:true"}n+=(t?", formatter: '"+t+"'":"")+"}";return n}function Z(){var t=arguments[arguments.length-1],r=arguments[0];var a=e.getFloatInstance({style:"short",showMeasure:false,shortRefNumber:t.scaleFactor,minFractionDigits:t.numberOfFractionalDigits,maxFractionDigits:t.numberOfFractionalDigits});if(typeof r=="string"&&t.bODataV4){r=e.getFloatInstance().parse(r)}return a.format(Number(r))}function Q(){var e=arguments[arguments.length-1],r=arguments[0];var a=t.getInstance(e.dateFormat);if(!r){r="";return r}return a.format(new Date(r),e.bUTC)}function ee(){var t=arguments[arguments.length-1],r=Number(arguments[0]),a=arguments[1];var i="";var n=e.getFloatInstance({style:"short",showMeasure:false,shortRefNumber:t.scaleFactor,minFractionDigits:t.numberOfFractionalDigits,maxFractionDigits:t.numberOfFractionalDigits});if(typeof r=="string"&&t.bODataV4){r=e.getFloatInstance().parse(r)}if(a){i=n.format(r,a)}else{i=t.currencyString?n.format(r,t.currencyString):n.format(r)}return i}function te(e,t,r,a){var i=r.split("/");var n=ke(a);if(i.length>1){if(n){for(var o=0;o<i.length-1;o++){t=e.getProperty("/"+t.$Type)[i[o]]}return Ut(e,t,i[i.length-1])}else{for(var o=0;o<i.length-1;o++){var l=e.getODataAssociationEnd(t,i[o]);if(l){t=e.getODataEntityType(l.type)}}return e.getODataProperty(t,i[i.length-1])}}}function re(e,t,r){var a=R(e,t);var i=h.Criticality.StateValues;var n=a[r];if(!n){return i.None}if(n.Criticality){return oe(e,n,i)}return le(e,n,i)}function ae(e,t,r){var a=R(e,t);if(a&&a.length){var i=a[0];if(i&&(i.Criticality||i.CriticalityCalculation)){return true}}return false}function ie(e,t,r){if(ae(e,t,r)){return""}return"sapUiChartPaletteQualitativeHue1"}ie.requiresIContext=true;function ne(e,t,r){var a=R(e,t),i=h.Criticality.ColorValues;var n=i.None;if(a.length>r){var o=a[r];if(o&&o.Criticality){n=oe(e,o,i)}else{n=le(e,o,i)}}return n}function oe(e,t,r){var n=r.None;var o;var l=t.Criticality;var s=ke(e);if(l){o="'{'= ({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Negative'') || ({0} === ''1'') || ({0} === 1) ? ''"+r.Negative+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Critical'') || ({0} === ''2'') || ({0} === 2) ? ''"+r.Critical+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Positive'') || ({0} === ''3'') || ({0} === 3) ? ''"+r.Positive+"'' : "+"''"+r.None+"'' '}'";if(l.Path&&!s){var f="$"+a.simplePath(e,l);n=u(o,f)}else if(s&&l.$Path){var f="$"+i.format(l,{context:e});n=u(o,f)}else if(l.EnumMember||l.$EnumMember){var c=s?l.$EnumMember:l.EnumMember;var v="'"+c+"'";n=u(o,v)}else{D.warning("Case not supported, returning the default Neutral state")}}else{D.warning("Case not supported, returning the default Neutral state")}return n}function le(e,t,r,a){var i=ke(e);var n=r.None;var o=t&&t.Value||{};var l=i?o.$Path:o.Path;if(t.Criticality){n=S(t.Criticality,r,i)}else if(t.CriticalityCalculation&&l){n=ue(e,t,r,a)}return n}function ue(e,t,r,a){var i=ke(e);var n=be(t.Value,i,a);var o=i?t.CriticalityCalculation.ImprovementDirection.$EnumMember:t.CriticalityCalculation.ImprovementDirection.EnumMember;var l=be(t.CriticalityCalculation.DeviationRangeLowValue,i,a);var u=be(t.CriticalityCalculation.DeviationRangeHighValue,i,a);var s=be(t.CriticalityCalculation.ToleranceRangeLowValue,i,a);var f=be(t.CriticalityCalculation.ToleranceRangeHighValue,i,a);var c=fe(l);var v=fe(u);var g=fe(s);var p=fe(f);var m="CardAnnotationhelper.formatColor";var h={deviationLow:l,deviationHigh:u,toleranceLow:s,toleranceHigh:f,bIsDeviationLowBinding:c,bIsDeviationHighBinding:v,bIsToleranceLowBinding:g,bIsToleranceHighBinding:p,sImprovementDirection:o,oCriticalityConfigValues:r,functionName:m,bODataV4:i};var P="{value:"+JSON.stringify(h)+", model: 'ovpCardProperties'}";var y="parts: ["+n;y+=c?","+l:"";y+=v?","+u:"";y+=g?","+s:"";y+=p?","+f:"";y+=","+P;y+="]";return"{"+y+", formatter: '"+m+"'}"}function se(){var e=arguments[arguments.length-1];var t=1;if(e&&e.bODataV4){return x(arguments[0],e.sImprovementDirection,e.bIsDeviationLowBinding?parseFloat(arguments[t++].split(",").join("")):e.deviationLow,e.bIsDeviationHighBinding?parseFloat(arguments[t++].split(",").join("")):e.deviationHigh,e.bIsToleranceLowBinding?parseFloat(arguments[t++].split(",").join("")):e.toleranceLow,e.bIsToleranceHighBinding?parseFloat(arguments[t++].split(",").join("")):e.toleranceHigh,e.oCriticalityConfigValues,e.bODataV4)}return x(arguments[0],e.sImprovementDirection,e.bIsDeviationLowBinding?arguments[t++]:e.deviationLow,e.bIsDeviationHighBinding?arguments[t++]:e.deviationHigh,e.bIsToleranceLowBinding?arguments[t++]:e.toleranceLow,e.bIsToleranceHighBinding?arguments[t++]:e.toleranceHigh,e.oCriticalityConfigValues,e.bODataV4)}function fe(e){return typeof e==="string"&&e.charAt(0)==="{"}function ce(e,t,r,a){var i="";var n=r.split("/");var o=ke(a);if(n.length>1){if(o){n.pop();i=n.join("/")}else{for(var l=0;l<n.length-1;l++){var u=e.getODataAssociationEnd(t,n[l]);if(u){t=e.getODataEntityType(u.type);if(i){i=i+"/"}i=i+n[l]}else{return i}}}}return i}function ve(e){var t;if(e&&typeof e.getData==="function"){var r=e.getData();if(r.tabs){var a=0;var i=r.selectedKey;if(i&&r.tabs.length>=i){a=i-1}t=r.tabs[a].mFilterPreference}else{t=r.mFilterPreference}}return!!t}function ge(e,t){var r=e.getSetting("ovpCardProperties");var a=r.getProperty("/addODataSelect");var i=r.getProperty("/metaModel");var n=i.getODataEntityType(t.entityType);var o=n[r.getProperty("/selectionAnnotationPath")];var l=n[r.getProperty("/presentationAnnotationPath")];var u="/"+t.name;var s=Array.prototype.slice.call(arguments,2);var f=e.getSetting("ovpCardProperties"),v=f.getProperty("/parameters");var g=ke(e);if(o||!!v){if(o&&o.Parameters&&o.Parameters.length>0||!!v){u=c.resolveParameterizedEntitySet(e.getSetting("dataModel"),t,o,v)}}if(r.getProperty("/cardLayout")&&r.getProperty("/cardLayout/noOfItems")){var p="{path: '"+u+"', length: "+ +r.getProperty("/cardLayout/noOfItems")}else{var p="{path: '"+u+"', length: "+De(r)}var m=[];if(a){m=me(e,i,n,s);var h=r.getProperty("/template");if(h!="sap.ovp.cards.charts.analytical"&&h!="sap.ovp.cards.charts.smart.chart"){var P=ye(l);for(var y=0;y<P.length;y++){if(m.indexOf(P[y])===-1){m.push(P[y])}}}}var C=pe(i,n,s,e);var T=ve(r);var b=false;if(T||m.length>0||C.length>0){p=p+", parameters: {"}if(m.length>0||C.length>0){if(m.length>0){p=p+"select: '"+m.join(",")+"'";b=true}if(C.length>0){if(m.length>0){p=p+", "}p=p+"expand: '"+C.join(",")+"'";b=true}if(T){p=p+", "}}if(T){p=p+"custom: {cardId: '"+r.getProperty("/cardId")+"'"+", _requestFrom: 'ovp_internal'}";b=false}else if(!p.includes(", parameters: {")){p=p+", parameters: {custom: {_requestFrom: 'ovp_internal'}}";b=false}else if(b){p=p+", custom: {_requestFrom: 'ovp_internal'}"}if(T||m.length>0||C.length>0){p=p+"}"}var D=Pe(r,l,g);if(D.length>0){p=p+", sorter:"+JSON.stringify(D)}var O=d.getFilters(r,o);if(O.length>0){O=d.createExcludeFilters(O,r);p=p+", filters:"+JSON.stringify(O)}p=p+"}";return p}ge.requiresIContext=true;function pe(e,t,r,a){var i=[];var n,o,l,u;for(var s=0;s<r.length;s++){if(!r[s]){continue}n=t.$path+"/"+r[s];o=e.createBindingContext(n);l=o.getObject();l=l?l:[];for(var f=0;f<l.length;f++){if(l[f].Value&&l[f].Value.Path){u=ce(e,t,l[f].Value.Path,a);if(u&&i.indexOf(u)===-1){i.push(u)}var c=e.getODataProperty(t,l[f].Value.Path);if(c){var v;if(c[T.UOM]){v=c[T.UOM].Path}else if(c[T.ISO_CURRENCY]){v=c[T.ISO_CURRENCY].Path}else if(c[T.TEXT]){v=c[T.TEXT].Path}if(v&&v.split("/").length>1){u=ce(e,t,v,a);if(u&&i.indexOf(u)===-1){i.push(u)}}else{var g=e.getODataProperty(t,v);if(g){var p=g[T.TEXT]&&g[T.TEXT].Path;if(p&&p.split("/").length>1){u=ce(e,t,p,a);if(u&&i.indexOf(u)===-1){i.push(u)}}}}}}}}return i}function me(e,t,i,n){var o=[];var l,u,f;for(var c=0;c<n.length;c++){if(!n[c]){continue}l=i.$path+"/"+n[c];u=t.createBindingContext(l);var g={};if(e&&e.bDummyContext){v(g,e,u,true)}else{g=e}f=u.getObject();if(!f){f=[]}else if(s(f)){if(f.Data){f=f.Data}else{f=[]}}var p;var m;var h;var P;for(var y=0;y<f.length;y++){m=[];p=f[y];h="";P=p.RecordType;if(P==="com.sap.vocabularies.UI.v1.DataField"){h=J(g,p,i,t,undefined,undefined,true)}else if(P==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var d=_(i.$path,p,e);h=G(g,t.getProperty(d),i,t);var C=$(t.getProperty(d));if(C&&C.length>0){h+=C}}else if(P==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"&&p.Url){var T;if(!p.Url.UrlRef){T=a.format(g,p.Url)}if(T&&T.substring(0,2)==="{="){h=T}}if(h){var b=a.simplePath(g,p.Value);if(h.indexOf("(")<0&&h!==b){h=[].concat(b,h).join(" ")}m=he(h)}if(m&&m.length>0){var D;for(var O=0;O<m.length;O++){D=m[O];if(!o[D]){o[D]=true;var I=r.getUnitColumn(D,i);if(I&&I!==D){o[I]=true}var V=Rt(t,i,D,e);if(V&&V!==D){o[V]=true}}}}}}return Object.keys(o)}function he(e){var t,r=0,a=e.length,i="",n;for(t=0;t<a;t++){n=e.charAt(t);if(!n){return}switch(n){case"{":r++;break;case"}":r--;break;default:if(r<=0){continue}break}i+=n}e=i;var o=/\${([a-zA-Z0-9\_|\/]*)/g;var l=/[^[{]*[a-zA-Z0-9\_]/g;var u=/path *\: *\'([a-zA-Z0-9\_]+)*\'/g;var s,f,c=[];if(e.indexOf("{parts:[")!==-1){e=e.replace("{parts:[","");e=e.replace("]","");e=e.replace(e.lastIndexOf("}",""))}if(e.substring(0,2)==="{="){s=o;f=1}else if(e.indexOf("path")!==-1){if(e.indexOf("{value")>0){var v=0;var t=e.indexOf("{value")+5;var g;while(t<a){if(e[t]==="}"&&v===0){g=t;break}if(e[t]==="{"){v+=1}if(e[t]==="}"){v-=1}t++}e=e.slice(0,e.indexOf("{value"))+e.slice(g)}if(e.indexOf("constraints:{")!==-1){var v=0;var t=e.indexOf("constraints:{")+12;var g;while(t<a){if(e[t]==="{"){v+=1}if(e[t]==="}"){v-=1;if(v===0){g=t;break}}t++}e=e.slice(0,e.indexOf("constraints:{")-1)+e.slice(g+1)}var p=l.exec(e);while(p){if(p[0].indexOf("path")===-1&&p[0].indexOf("@i18n")!==0&&p[0].indexOf("model: 'ovpCardProperties'")<=-1){c.push(p[0])}p=l.exec(e)}s=u;f=1}else{s=l;f=0}var m=s.exec(e);while(m){if(m[f]&&m[f].indexOf("@i18n")!==0){c.push(m[f])}m=s.exec(e)}return c}function Pe(e,t,r){var a=[];var i,n;var o=e.getProperty("/sortBy");if(o){var l=e.getProperty("/sortOrder");if(l&&l.toLowerCase()!=="descending"){n=false}else{n=true}i={path:o,descending:n};a.push(i)}var u=t&&t.SortOrder||undefined;var s,o;if(u){for(var f=0;f<u.length;f++){s=u[f];o=r?s.Property.$PropertyPath:s.Property.PropertyPath;n=d.getBooleanValue(s.Descending,true);i={path:o,descending:n};a.push(i)}}return a}function ye(e){var t=[];var r=e&&e.RequestAtLeast||undefined;if(r){for(var a=0;a<r.length;a++){if(r[a].PropertyPath){t.push(r[a].PropertyPath)}}}return t}function de(e,t){var r=e.getProperty("/selectionAnnotationPath");var a,i;if(t&&r){var n=e.getProperty("/entityType");var o=e.getProperty("/metaModel");a=o.getObject("/"+n.$Type+"/@");r="@"+r}else{a=e.getProperty("/entityType")}i=r&&a[r];return{filters:d.getFilters(e,i,t),parameters:Te(i,t)}}function Ce(e,t){if(!e){return}var r=e.getProperty("/entityType");var a=r&&r[e.getProperty("/presentationAnnotationPath")];var i=Pe(e,a,t);var n=[];var o,l=i.length;for(o=0;o<l;o++){if(!i[o].path){continue}n.push({Property:i[o].path,Descending:i[o].descending})}if(n.length>0){return{SortOrder:n}}}function Te(e,t){var r,a=[];if(!e||!e.Parameters){return a}var i=e.Parameters.length;for(var n=0;n<i;n++){r=e.Parameters[n];if(!r.PropertyName||!r.PropertyName.PropertyPath){continue}if(!r.PropertyValue){D.error("Missing value for parameter "+r.PropertyName.PropertyPath);continue}a[a.length]={path:r.PropertyName.PropertyPath,value:d.getPrimitiveValue(r.PropertyValue,t)}}return a}function be(e,t,r){if(e){var a=t?e.$Path:e.Path;if(a){return r?"{path:'"+a+"Agg"+"', type:'sap.ui.model.odata.type.Decimal'}":"{path:'"+a+"'}"}else{return d.getPrimitiveValue(e,t)}}else{return""}}function De(e){var t=e.getProperty("/contentFragment");var r=e.getProperty("/listType");var a=e.getProperty("/listFlavor");var i;var o="desktop";if(n.system.phone){o="phone"}else if(n.system.tablet){o="tablet"}if(t=="sap.ovp.cards.list.List"){if(r=="extended"){if(a=="bar"){i=h.ItemLength["List_extended_bar"]}else{i=h.ItemLength["List_extended"]}}else if(a=="bar"){i=h.ItemLength["List_condensed_bar"]}else{i=h.ItemLength["List_condensed"]}}else if(t=="sap.ovp.cards.table.Table"){i=h.ItemLength["Table"]}else if(t=="sap.ovp.cards.stack.Stack"){if(e.getProperty("/objectStreamCardsNavigationProperty")){i=h.ItemLength["Stack_complex"]}else{i=h.ItemLength["Stack_simple"]}}if(i){return i[o]}return 5}function Oe(e){var t=e.getObject();var r=R(e,t,true);var a,i;var n=ke(e);var o,l;var u=r.map(function(e){a=e&&e.Value;i=e&&e.fn;if(a&&(a.Path||a.$Path)){return n?a.$Path:a.Path}else if(i&&(i.Path||i.$Path)){return n?i.$Path:i.Path}});t.filter(function(e,r){o=n?e.$Type:e.RecordType;l=n?e.Value&&e.Value.$Path:e.Value&&e.Value.Path;if(o==="com.sap.vocabularies.UI.v1.DataField"&&u.indexOf(l)>-1){t.splice(r,1)}});if(n){return e.sPath}}Oe.requiresIContext=true;function Ie(e,t){var r=R(e,t);return r.length}Ie.requiresIContext=true;function Ve(e,t){return Fe(e,t,0)}Ve.requiresIContext=true;function Fe(e,t,r){var a=R(e,t),i=a[r],n=i&&i.Value,o=ke(e),l=o?n&&n.$Path:n&&n.Path;return l||""}function Se(e,t){return B(e,t,0)}Se.requiresIContext=true;function Ne(e,t){return B(e,t,1)}Ne.requiresIContext=true;function xe(e,t){return B(e,t,2)}xe.requiresIContext=true;function Ee(e,t,r){return j(e,t,r)}Ee.requiresIContext=true;function Ae(e,t,r){return k(e,t,r)}Ae.requiresIContext=true;function Re(e,t,r,a){var i=Ie(e,t);if(i>0){return Ae(e,t,r)}else{return Ee(e,t,a)}}Re.requiresIContext=true;function Me(e,t,r){return Ke(e,t,r)}Me.requiresIContext=true;function Ue(e,t){return Y(e,t,0)}Ue.requiresIContext=true;function $e(e,t){var r=ke(e);var n;for(var o=0;o<t.length;o++){var l=t[o];n=r?l.$Type:l.RecordType;if(n==="com.sap.vocabularies.UI.v1.DataField"){if(l.IconUrl&&l.IconUrl.String){return l.IconUrl.String}if(r&&l.IconUrl&&l.IconUrl.$Path){return i.format(l.IconUrl,{context:e})}if(!r&&l.IconUrl&&l.IconUrl.Path){return a.simplePath(e,l.IconUrl)}}}}$e.requiresIContext=true;function _e(e,t,r){var a="";var i;if(Array.isArray(t)){i=R(e,t)[r]}else{var n=Object.assign({},t);var o=Object.assign({},e);i=ze(o,n)}if(!i||!i.Value){return a}var l=e.getSetting("ovpCardProperties");var u=l&&l.getProperty("/entityType");var s=l&&l.getProperty("/metaModel");var f=ke(e);var c=f?s&&s.getData()["$Annotations"][u.$Type+"/"+i.Value.$Path]:s&&s.getODataProperty(u,i.Value.Path);var v=f?c&&c["@"+T.ISO_CURRENCY]:c&&c[T.ISO_CURRENCY];if(v&&!f){if(v.Path){a+=" "+W([v.Path]);a+=" "+K(v.Path,s,u,e)}else if(v.String){a+=" "+v.String}}else if(v&&f){if(v.$Path){a+=" "+W([v.$Path])}else{a+=" "+v}a+=" "+K(v.$Path,s,u,e)}return a}_e.requiresIContext=true;function we(e,t,r,a){return k(e,t,r,a)}we.requiresIContext=true;function Le(e,t){return re(e,t,0)}Le.requiresIContext=true;function qe(e,t){return ne(e,t,0)}qe.requiresIContext=true;function je(e,t){return re(e,t,1)}je.requiresIContext=true;function Be(e,t){return re(e,t,2)}Be.requiresIContext=true;function Ye(e){var t={};t.EnumMember="None";if(Number(e)===1){t.EnumMember="Negative"}else if(Number(e)===2){t.EnumMember="Critical"}else if(Number(e)===3){t.EnumMember="Positive"}return S(t,h.Criticality.ColorValues,false)}function ke(e){var t=e&&typeof e.getModel==="function"&&e.getModel(0)&&e.getModel(0).oModel;return t&&r.isODataV4(t)||false}function He(e,t){var r=ke(e),a=t&&t.Criticality||{},i=r?a.$Path:a.Path;if(i&&r){return"{parts: [{path:'"+i+"Agg', type:'sap.ui.model.odata.type.Decimal'}], formatter: 'CardAnnotationhelper.kpiValueCriticality'}"}else if(i&&!r){return"{parts: [{path:'"+t.Criticality.Path+"'}], formatter: 'CardAnnotationhelper.kpiValueCriticality'}"}else{return le(e,t,h.Criticality.ColorValues,r)}}He.requiresIContext=true;function Ge(e,t){return H(e,t,0)}Ge.requiresIContext=true;function Xe(e,t){var r=R(e,t)[0];return r&&(r.Criticality||r.CriticalityCalculation)?true:false}Xe.requiresIContext=true;function ze(e,t){var r=e.getPath(0);var a=r.slice(0,r.lastIndexOf("/"));a=a.slice(0,a.lastIndexOf("/"));var i=_(a,t,e);t=e.getModel(0).getProperty(i);return t}function Je(e,t){if(!t){return""}return X(e,t)}Je.requiresIContext=true;function Ke(e,t,r,n){var o;var l=ke(e);var u=n==undefined?r:A(e,r)[n];var s=e.getSetting("ovpCardProperties");var f=s.getProperty("/metaModel");var c=l?t.$Type:f.getODataEntityType(t.entityType);var v=l?f.getData()["$Annotations"][c+"/"+u.Value.$Path]:c.property;if(v&&l){o=v["@com.sap.vocabularies.Common.v1.SemanticObject"];if(o){return i.format(o,e.getModel()?{context:e}:{context:e.getInterface(0)})}else{return""}}if(v&&!l){for(var g=0;g<v.length;g++){if(u.Value.Path===v[g].name){o=v[g]["com.sap.vocabularies.Common.v1.SemanticObject"];if(o){return a.format(e,o)}else{return""}}}}}function We(e,t,r){var a=ke(e);var i=t&&t.Value;var n=t&&t[r]&&t[r].Value;var o=a?i&&i.$Path:i&&i.Path;var l=a?n&&n.$Path:n&&n.Path;var u=r===undefined?o:l;var s=u.indexOf("/")!=-1?u.split("/")[0]:"";return s}We.requiresIContext=true;function Ze(e,t){var r=e.getSetting("ovpCardProperties");var a=r.getProperty("/metaModel");var i=ke(e);var n=i?a.getData()["$Annotations"][t.$Type]:a.getODataEntityType(t.entityType);var o="com.sap.vocabularies.Communication.v1.Contact";if(i){o="@"+o}return n&&n[o]?true:false}Ze.requiresIContext=true;function Qe(e,t,r){if(!t){return""}var a=e.getSetting("ovpCardProperties");var i=a.getProperty("/entityType");var n=a.getProperty("/metaModel");var o=Object.assign({},t);var l=Object.assign({},e);t=ze(l,o);return G(e,t,i,n,r)}Qe.requiresIContext=true;function et(e,t){var r=Object.assign({},t);var a=Object.assign({},e);var i="None",n=h.Criticality.StateValues;t=ze(a,r);if(t&&t.Criticality){i=oe(e,t,n)}else{i=le(e,t,n)}return i}et.requiresIContext=true;function tt(e,t){var r=Object.assign({},t);var a=Object.assign({},e);t=ze(a,r);if(t&&t.Criticality){return true}}tt.requiresIContext=true;function rt(e,t){var r=Object.assign({},t);var a=Object.assign({},e);var i=e.getSetting("ovpCardProperties");var n=i.getProperty("/entityType");var o=i.getProperty("/metaModel");var l=ke(e);t=ze(a,r);if(!t){return}var u=l?o.getProperty("/"+n.$Type)[t.Value.$Path]:o.getODataProperty(n,t.Value.Path);var s=l?u&&u.$Type:u&&u.type;if(t&&(s=="Edm.String"||s=="Edm.DateTime"||s=="Edm.DateTimeOffset")&&(t.Criticality||t.CriticalityCalculation)){return"textAlignLeft"}if(u&&(s=="Edm.DateTime"||s=="Edm.DateTimeOffset")){return"textNormalAlignRight"}return"textAlignRight"}rt.requiresIContext=true;function at(e,t){var r;var a=ke(e);var i;for(var n=0;n<t.length;n++){r=t[n];i=a?r.$Type:r.RecordType;if(i==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"||i==="com.sap.vocabularies.UI.v1.DataFieldForAction"||i==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){return true}}return false}at.requiresIContext=true;function it(e,t){var r=R(e,t)[0];var a=ke(e);var i=r&&r.Value;var n=a?i&&i.$Path:i&&i.Path;if(n){var o=e.getPath(0).substr(0,e.getPath(0).lastIndexOf("/")+1);var l=e.getModel(0);var u;if(!a){u=l.getProperty(o)}var s=a?l.getData(n):l.getODataProperty(u,n);var f=o.substr(1,o.length-2);if(s&&s[T.UOM]&&!a){return s[T.UOM].String==="%"}if(a&&s){var c=s[f][n]["annotations"]&&s[f][n]["annotations"]["@"+T.UOM];return c==="%"}}return false}it.requiresIContext=true;function nt(e){var t=e.getObject();var r=e.getModel();var a=r.getProperty("/metaModel");var i=a&&a.getODataEntitySet(r.getProperty("/entitySet"));var n=i&&a&&a.getODataEntityType(i.entityType);t=n&&n.$path+"/"+t;return a&&a.createBindingContext(t)}function ot(e,t,r){var a=e.getServiceMetadata().dataServices.schema[0].association;for(var i=0;i<a.length;i++){if(r+"."+a[i].name===t){return a[i]}}}function lt(e,t,r){var a=ke(e);var i=t.filter(function(e){return a?e.$Type==="com.sap.vocabularies.UI.v1.DataField":e.RecordType==="com.sap.vocabularies.UI.v1.DataField"});var n=L(i,e);if(n){return n[r]}return}function ut(e,t,r){if(!r||!r.length||r.length===0){return false}r=lt(e,r,0);return Ke(e,t,r)}ut.requiresIContext=true;function st(e,t,r){if(!r||!r.length||r.length===0){return false}r=lt(e,r,1);return Ke(e,t,r)}st.requiresIContext=true;function ft(e,t,r){var a=ke(e);var i,n,o;var l=t.filter(function(e){i=a?e.$Type:e.RecordType;o=e&&e.Target||{};n=a?o.$AnnotationPath:o.AnnotationPath||"";return i==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&n.indexOf("@com.sap.vocabularies.Communication.v1.Contact")!==-1});var u=L(l,e);if(u){return u[r]}return}function ct(e,t){if(!t||!t.length||t.length===0){return false}var r=ft(e,t,0);if(r){return true}return false}ct.requiresIContext=true;function vt(e,t,a,i){var n,o,l;if(a&&a.Value&&a.Value.Path){n=a.Value.Path}else if(a&&a.Description&&a.Description.Value&&a.Description.Value.Path){n=a.Description.Value.Path}if(a&&a.Description&&a.Description.Path){o=a.Description.Path}else if(a&&a.Title&&a.Title.Path){l=a.Title.Path}var u="";var s=i&&i.Parameters;var f="";var v=e.getSetting("ovpCardProperties"),g=v.getProperty("/parameters");s=s||!!g;if(s){var p=e.getSetting("dataModel");var m=c.resolveParameterizedEntitySet(p,t,i,g);u+="{path: '"+m+"'"}else{u+="{path: '/"+t.name+"'"}u+=", length: 1";var h=e.getSetting("ovpCardProperties");var P=h.getProperty("/entityType");var y=r.getUnitColumn(n,P);var C=d.getFilters(h,i);if(C.length>0){C=d.createExcludeFilters(C,h);f+=", filters: "+JSON.stringify(C)}var T=[];T.push(n);if(o){T.push(o)}else if(l){T.push(l)}if(a&&a.Criticality&&a.Criticality.Path){T.push(a.Criticality.Path)}if(a&&a.CriticalityCalculation&&a.CriticalityCalculation.DeviationRangeLowValue&&a.CriticalityCalculation.DeviationRangeLowValue.Path){T.push(a.CriticalityCalculation.DeviationRangeLowValue.Path)}if(a&&a.CriticalityCalculation&&a.CriticalityCalculation.ToleranceRangeLowValue&&a.CriticalityCalculation.ToleranceRangeLowValue.Path){T.push(a.CriticalityCalculation.ToleranceRangeLowValue.Path)}if(a&&a.CriticalityCalculation&&a.CriticalityCalculation.DeviationRangeHighValue&&a.CriticalityCalculation.DeviationRangeHighValue.Path){T.push(a.CriticalityCalculation.DeviationRangeHighValue.Path)}if(a&&a.CriticalityCalculation&&a.CriticalityCalculation.ToleranceRangeHighValue&&a.CriticalityCalculation.ToleranceRangeHighValue.Path){T.push(a.CriticalityCalculation.ToleranceRangeHighValue.Path)}if(y){T.push(y)}if(a&&a.TrendCalculation&&a.TrendCalculation.ReferenceValue&&a.TrendCalculation.ReferenceValue.Path){T.push(a.TrendCalculation.ReferenceValue.Path)}var b=ve(v);var D=b?", custom: {cardId: '"+v.getProperty("/cardId")+"', _requestFrom: 'ovp_internal'}":", custom: {_requestFrom: 'ovp_internal'}";var O=v.getProperty("/searchQuery");var I=v.getProperty("/enableOVPCardAsAPI");if(O&&I){if(D===""){D=", custom: {search: '"+O+"'}"}else{D=D.slice(0,11)+"search: '"+O+"', "+D.slice(11)}}return u+", parameters:{select:'"+T.join(",")+"'"+D+"}"+f+"}"}vt.requiresIContext=true;function gt(e,t){if(!t||!t.Value){return""}var r=ke(e);var a=r?t.Value.$Path:t.Value.Path;if(!a){return""}var i=e.getSetting("ovpCardProperties");var n=i.getProperty("/entityType");var o=i.getProperty("/metaModel");var l=r?Ut(o,n,a):o.getODataProperty(n,a);var u=t&&t.ValueFormat&&t.ValueFormat.NumberOfFractionalDigits;var s=u&&u.Int;if(l[T.UOM]){var f=l[T.UOM];if(f.String=="%"){i.oData.percentageAvailable=true}}if(u&&r){i.oData.NumberOfFractionalDigits=u}else if(!r&&s){i.oData.NumberOfFractionalDigits=s}var c={NumberOfFractionalDigits:i.oData.NumberOfFractionalDigits||0,percentageAvailable:i.oData.percentageAvailable||false};var v="CardAnnotationhelper.KpiValueFormatter";var g=r?a+"Agg":a;var p=[g];var m=r?"String":"";return W(p,v,c,m)}gt.requiresIContext=true;function pt(){var t=arguments[arguments.length-1],r=arguments[0];var a=e.getFloatInstance({minFractionDigits:t.NumberOfFractionalDigits,maxFractionDigits:t.NumberOfFractionalDigits,style:"short",showScale:true,shortRefNumber:r});if(t.percentageAvailable){return a.format(Number(r))+" %"}else{return a.format(Number(r))}}function mt(e,t){if(!t||!t.Value||!t.Value.Path&&!t.Value.$Path||!t.TrendCalculation){return"None"}var r=ke(e);var a=be(t.Value,r,r);var i=be(t.TrendCalculation.ReferenceValue,r,r);var n=be(t.TrendCalculation.DownDifference,r,r);var o=be(t.TrendCalculation.UpDifference,r,r);var l=fe(i);var u=fe(n);var s=fe(o);var f={referenceValue:i,downDifference:n,upDifference:o,bIsRefValBinding:l,bIsDownDiffBinding:u,bIsUpDiffBinding:s,bODataV4:r};var c="{value:"+JSON.stringify(f)+", model: 'ovpCardProperties'}";var v="parts: ["+a;v+=l?","+i:"";v+=u?","+n:"";v+=s?","+o:"";v+=","+c;v+="]";var g="CardAnnotationhelper.formatTrendIcon";return"{"+v+", formatter: '"+g+"'}"}mt.requiresIContext=true;function ht(){var e=arguments[arguments.length-1];var t=1;return E(arguments[0],e.bIsRefValBinding?arguments[t++]:e.referenceValue,e.bIsDownDiffBinding?arguments[t++]:e.downDifference,e.bIsUpDiffBinding?arguments[t++]:e.upDifference,e.bODataV4)}function Pt(e,t){if(!t||!t.TrendCalculation||!t.TrendCalculation.ReferenceValue){return""}var r=ke(e);var a=e.getSetting("ovpCardProperties");var i=t&&t.ValueFormat&&t.ValueFormat.NumberOfFractionalDigits;if(r&&i){a.oData.NumberOfFractionalDigits=i}else if(!r&&i&&i.Int){a.oData.NumberOfFractionalDigits=i.Int}var n={numberOfFractionalDigits:a.getProperty("/iNumberOfFractionalDigits")||0,manifestTargetValue:a.getProperty("/sManifestTargetValue"),bODataV4:r};var o="CardAnnotationhelper.returnPercentageChange";var l=r?t.Value.$Path+"Agg":t.Value.Path;var u=[l];if(t.TrendCalculation.ReferenceValue.Path&&!r){var s=t.TrendCalculation.ReferenceValue.Path;u.push(s)}if(t.TrendCalculation.ReferenceValue.$Path&&r){var s=t.TrendCalculation.ReferenceValue.$Path;u.push(s)}return W(u,o,n,r?"Decimal":"")}Pt.requiresIContext=true;function yt(){var t,r=arguments[0];var a=arguments[arguments.length-1];if(typeof arguments[1]!=="object"){t=arguments[1]}var i,n,o,l=false;if(typeof r=="string"){r=e.getFloatInstance().parse(r)}if(isNaN(+r)){return""}o=r==0?+t:r;n=+a.numberOfFractionalDigits;l=a.percentageAvailable;if(t){i=t}else if(a.manifestTargetValue){i=+a.manifestTargetValue}if(!n||n<0){n=0}else if(n>2){n=2}if(i){var u=e.getFloatInstance({minFractionDigits:n,maxFractionDigits:n,style:"short",showScale:true,shortRefNumber:o});if(l){return u.format(+i)+" %"}else{return u.format(+i)}}}function dt(e,t){if(!t||!t.TrendCalculation||!t.TrendCalculation.ReferenceValue){return""}if(!t||!t.Value||!t.Value.Path&&!t.Value.$Path){return""}var r=e.getSetting("ovpCardProperties");var a=r.getProperty("/entityType");var i=r.getProperty("/metaModel");var n=ke(e);var o=t&&t.ValueFormat&&t.ValueFormat.NumberOfFractionalDigits;var l=o&&o.Int;if(l&&!n){r.setProperty("/iNumberOfFractionalDigits",l)}else if(n&&o){r.setProperty("/iNumberOfFractionalDigits",o)}var u="CardAnnotationhelper.TargetValueFormatter";var s=n?t.Value.$Path+"Agg":t.Value.Path;var f=[s];if(t.TrendCalculation.ReferenceValue&&!n){if(t.TrendCalculation.ReferenceValue.String){r.setProperty("/sManifestTargetValue",t.TrendCalculation.ReferenceValue.String)}if(t.TrendCalculation.ReferenceValue.Path){var c=i.getODataProperty(a,t.TrendCalculation.ReferenceValue.Path);if(c[T.UOM]){var v=c[T.UOM];if(v.String=="%"){r.setProperty("/bPercentageAvailableForTarget",true)}}var g=t.TrendCalculation.ReferenceValue.Path;f.push(g)}}else if(n&&t.TrendCalculation.ReferenceValue){if(t.TrendCalculation.ReferenceValue.$Path){var c=Ut(i,a,t.TrendCalculation.ReferenceValue.$Path);if(c[T.UOM]){var v=c[T.UOM];if(v.String=="%"){r.setProperty("/bPercentageAvailableForTarget",true)}}var g=t.TrendCalculation.ReferenceValue.$Path+"Agg";f.push(g)}if(t.TrendCalculation.ReferenceValue){r.setProperty("/sManifestTargetValue",t.TrendCalculation.ReferenceValue)}}var p={numberOfFractionalDigits:r.getProperty("/iNumberOfFractionalDigits")||0,percentageAvailable:r.getProperty("/bPercentageAvailableForTarget")||false,manifestTargetValue:r.getProperty("/sManifestTargetValue")};return W(f,u,p,n?"Decimal":"")}dt.requiresIContext=true;function Ct(){var t,r=arguments[0];var a=arguments[arguments.length-1];if(typeof arguments[1]!=="object"){t=arguments[1]}var i=a.bODataV4;var n,o;if(typeof r=="string"&&i){r=e.getFloatInstance().parse(r)}if(isNaN(+r)){return""}r=+r;n=+a.numberOfFractionalDigits;if(t){o=+t}else if(a.manifestTargetValue){o=+a.manifestTargetValue}if(!n||n<0){n=0}else if(n>2){n=2}if(o){var l=(r-o)/o;var u=e.getPercentInstance({style:"short",minFractionDigits:n,maxFractionDigits:n,showScale:true});return u.format(l)}}function Tt(e,t){var r=ke(e);if(t&&t.GroupBy&&!p(t.GroupBy)){return r?t.GroupBy[0].hasOwnProperty("$PropertyPath"):t.GroupBy[0].hasOwnProperty("PropertyPath")}return false}Tt.requiresIContext=true;function bt(e,t){var r;for(var a=0;e&&a<e.length;a++){if(e[a].value==t){r=e[a];break}}return r?r.name:null}function Dt(e,t){return bt(e,t)}function Ot(e,t){var r=bt(e,t);return r?r:o.getText("OVP_KEYUSER_LABEL_NO_NAVIGATION")}function It(e,t){var r="";var a=t&&t.GroupBy;if(!a){return r}var i=ke(e);var n=e.getSetting("ovpCardProperties").getProperty("/metaModel");var l=e.getSetting("ovpCardProperties").getProperty("/entityType");var u;if(t.GroupBy.constructor===Array){u=t.GroupBy}else if(!t.GroupBy.Collection){return r}else{u=t.GroupBy.Collection}var s;var c;f(u,function(){c=i?this.$PropertyPath:this.PropertyPath;s=At(n,l,c,e);if(!s){return}r+=s;r+=", "});if(r[r.length-1]===" "&&r[r.length-2]===","){r=r.substring(0,r.length-2)}return r==""?"":o.getText("By",[r])}It.requiresIContext=true;function Vt(e,t,r){var a=true;var i=ke(e);var n=r["SelectOptions"].length-1;if(t.PropertyName.PropertyPath===r["SelectOptions"][n].PropertyName.PropertyPath){a=false}t=[t];var o=e.getSetting("ovpCardProperties");var l=o.getProperty("/entityType");var u=o.getProperty("/metaModel");var s=d.getFilters(o,t,i);if(s.length==0){return""}s=d.createExcludeFilters(s,o);var f;var c;f=s[0].path;c=Rt(u,l,f,e);if(c!==f){return""}var v=u.getODataProperty(l,t[0].PropertyName.PropertyPath)["type"];var g=xt(s,v);if(a===true){return g+", "}return g}Vt.requiresIContext=true;function Ft(e,t,r){var a=!(t.index===r.length-1);var i=e.getSetting("ovpCardProperties");var n=i.getProperty("/metaModel");var o=i.getProperty("/entityType");var l=n.getODataProperty(o,r[t.index].path)["type"];var u=xt([r[t.index]],l);if(a===true){return u+", "}return u}Ft.requiresIContext=true;function St(e){return e.id}function Nt(e){return e.id}function xt(e,t){var r=[];for(var a=0;a<e.length;a++){r.push(Et(e[a],t))}return r.join(", ")}function Et(e,r){var a=false;var i,n=t.getInstance({style:"medium"});if(r==="Edm.DateTime"){i=n.format(new Date(e.value1))}else if(r==="Edm.DateTimeOffset"){i=n.format(new Date(e.value1),true)}else{i=e.value1}if(e.operator[0]==="N"){a=true}if(e.value2){if(r==="Edm.DateTime"){i+=" - "+n.format(new Date(e.value1))}else if(r==="Edm.DateTimeOffset"){i+=" - "+n.format(new Date(e.value1),true)}else{i+=" - "+e.value1}}if(a){i=o.getText("kpiHeader_Filter_NotOperator",[i])}return i}function At(e,t,r,a){return Mt(e,t,r,"com.sap.vocabularies.Common.v1.Label",a)}function Rt(e,t,r,a){return Mt(e,t,r,"sap:text",a)}function Mt(e,t,r,a,i){var n=ke(i);var o;if(n){o={};o[r]=Ut(e,t,r)}else{o=e.getODataProperty(t,r)}if(!o){D.error("No Property Found for with Name '"+r+" For Entity-Type '"+t.name+"'");return}if(n){if(o[r].annotations){var l=o[r].annotations["@"+a]}if(l){return l}return Object.keys(o)[0]}else{var l=o[a];if(l){if(a==="com.sap.vocabularies.Common.v1.Label"){return l.String}return l}return o.name}}function Ut(e,t,r){var a=e.getData().$Annotations[t.$Type+"/"+r];var i=P.getEntitySetName(e,t.$Type);var n=e.getObject("/"+i+"/"+r);var o=y.merge(true,{},a,n);return o}function $t(e,t){var r=ke(e);var a=e.getSetting("ovpCardProperties");if(!t||!t.Value||!t.Value.Path&&!t.Value.$Path){return""}var i={NumberOfFractionalDigits:a.oData.NumberOfFractionalDigits||0,percentageAvailable:a.oData.percentageAvailable||false};var n="CardAnnotationhelper.KpiValueFormatter";var o=r?t.Value.$Path+"Agg":t.Value.Path;var l=[o];return W(l,n,i)}$t.requiresIContext=true;function _t(e,t){return t&&t.hasOwnProperty(e)}function wt(e,t){var r;if(t[e].customDateRangeImplementation){return t[e].customDateRangeImplementation}else if(t[e].filter){r={module:"sap.ui.comp.config.condition.DateRangeType",operations:{filter:t[e].filter}};return JSON.stringify(r)}else if(t[e].selectedValues){r={module:"sap.ui.comp.config.condition.DateRangeType",operations:{filter:[{path:"key",contains:t[e].selectedValues,exclude:t[e].exclude}]}};return JSON.stringify(r)}else if(t[e].defaultValue){r={module:"sap.ui.comp.config.condition.DateRangeType"};return JSON.stringify(r)}}function Lt(e){if(e){return undefined}return"_BASIC"}function qt(e,t){if(t==="com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"){var r=e.substring(0,4);var a=e.substring(4);while(a.length<3){a="0"+a}var i="YYYYPPP";var n={UTC:false,style:"medium"};var o=new m(null,Object.assign({format:i,calendarType:l.Gregorian},n));var u=o.getPattern();if(u==="PPP/YYYY"){return a+"/"+r}else if(u==="PPP.YYYY"){return a+"."+r}else{return a+r}}else{return e}}function jt(e,t,r,a,i,n,o){a=typeof a==="undefined"?false:a;var l=false;var u;if(!e&&a){D.error(i+C.CARD_ERROR+r+C.IS_MANDATORY);return l}if(!e){D.warning(i+C.CARD_WARNING+r+C.IS_MISSING);return true}if(o){e="@"+e}u=t[e];if(!u||typeof u!=="object"){var s=a?D.error:D.warning;s(i+C.CARD_ERROR+"in "+r+". ("+e+" "+C.NOT_WELL_FORMED);return l}var f=o?"sap.ovp.cards.v4.charts.analytical.analyticalChart":"sap.ovp.cards.charts.analytical.analyticalChart";var c=o?!u.ChartType||!u.ChartType.$EnumMember:!u.ChartType||!u.ChartType.EnumMember;if(n&&n===f&&r==="Chart Annotation"&&c){D.error(i+C.CARD_ERROR+C.MISSING_CHARTTYPE+C.CHART_ANNO);return l}return true}return{getFormattedFiscalData:qt,getGroupID:Lt,getConditionTypeForDateProperties:wt,isDateRangeType:_t,TextArrangementType:b,getLabelForDataItem:O,setAlignmentForDataPoint:I,colorPaletteForComparisonMicroChart:ie,formatField:X,checkFilterPreference:ve,formatItems:ge,getCardSelections:de,getCardSorters:Ce,getAnnotationLabel:Dt,getApplicationName:Ot,removeDuplicateDataField:Oe,getDataPointsCount:Ie,getFirstDataPointValue:Ve,getFirstDataFieldName:Se,getSecondDataFieldName:Ne,getRequestFields:ye,getThirdDataFieldName:xe,formatDataFieldValueOnIndex:Ee,formatDataPointValueOnIndex:Ae,formatDataPointOrField:Re,formatsemanticObjectOfDataFieldGeneric:Me,getLabelForFirstDataPoint:Ue,formatImageUrl:$e,formatUnit:_e,formatObjectNumber:we,formatFirstDataPointState:Le,formatFirstDataPointColor:qe,formatSecondDataPointState:je,formatThirdDataPointState:Be,formatKPIHeaderState:He,isFirstDataPointCriticality:Ge,isFirstDataPointCriticalityForTableStatus:Xe,getSortedDataFields:A,getSortedDataPoints:R,formatDataFieldValueGeneric:Je,formatDataPointValue:Qe,formatDataPointStateGeneric:et,checkCriticalityGeneric:tt,checkCriticalityGenericForTableStatus:rt,hasActions:at,isFirstDataPointPercentageUnit:it,resolveEntityTypePath:nt,getAssociationObject:ot,semanticObjectOfFirstDataField:ut,semanticObjectOfSecondDataField:st,isFirstContactAnnotation:ct,getAggregateNumber:vt,KpiValueFormatter:pt,kpiValueCriticality:Ye,formThePathForAggregateNumber:gt,formThePathForTrendIcon:mt,formPathForPercentageChange:Pt,TargetValueFormatter:yt,formPathForTargetValue:dt,returnPercentageChange:Ct,isPresentationVarientPresent:Tt,listGroupBy:It,formTheFilterByString:Vt,formTheFilterByStringNotFromSelVar:Ft,formTheIdForFilter:St,formTheIdForFilterNotFromSelVar:Nt,_criticality2state:S,_calculateCriticalityState:x,_calculateTrendDirection:E,_getPropertiesFromBindingString:he,sortCollectionByImportance:L,checkNavTargetForContactAnno:We,checkForContactAnnotation:Ze,getKPIHeaderAggregateNumber:$t,formatColor:se,formatTrendIcon:ht,formatNumberCalculation:Z,formatCurrency:ee,formatDate:Q,getSapTextPathForUOM:K,getPathOrPrimitiveValue:be,getSorters:Pe,_getItemsLength:De,isODataV4Context:ke,_generatePathForField:W,_getNavigationSuffix:te,_getNavigationPrefix:ce,_getEntityTypeForODataV4Model:Ut,_formatValueFromTarget:ze,checkExists:jt}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/AppSettingsUtils", ["sap/m/Dialog","sap/m/Button","sap/ui/model/json/JSONModel","sap/ui/core/mvc/ViewType","sap/ovp/app/resources","sap/base/util/merge","sap/ui/core/mvc/View","sap/ui/core/Lib"],function(e,t,o,i,a,n,s,l){"use strict";return{dialogBox:undefined,oSaveButton:undefined,oResetButton:undefined,oOvpResourceBundle:l.getResourceBundleFor("sap.ovp"),getDialogBox:function(l){return new Promise(function(r,u){var d,g,p;if(!this.dialogBox){this.oSaveButton=new t({text:a&&a.getText("save"),type:"Emphasized"});var c=new t({text:a&&a.getText("cancelBtn")});this.oResetButton=new t({text:a&&a.getText("resetButton")});this.dialogBox=new e({title:a&&a.getText("settingsDialogTitle"),buttons:[this.oSaveButton,c,this.oResetButton],afterClose:function(e){this.dialogBox.destroyContent()}.bind(this)});this.dialogBox.addStyleClass("sapOvpSettingsDialogBox");this.dialogBox.setBusyIndicatorDelay(0);c.attachPress(function(e){this.dialogBox.close()}.bind(this))}if(l.getParent()){d=l.getParent().getModel("ui").getData();g=n({},d);var h=l.getModel(g.globalFilterModel),B=h.getMetaModel(),y=B.getODataEntityContainer().entitySet;g["allEntityTypes"]=[];for(var v=0;y&&v<y.length;v++){var x=y[v].entityType;g["allEntityTypes"].push({name:B.getODataEntityType(x).name})}if(g.globalFilterEntityType){g.showGlobalFilters=true}else{g.showGlobalFilters=false}if(!g.containerLayout){g.containerLayout="fixed"}p=new o(g);var f=this.oOvpResourceBundle?a.oResourceModel:null;s.create({id:"appSettingsView",viewName:"sap.ovp.cards.rta.AppSettingsDialog",type:i.XML}).then(function(e){e.setModel(p);e.setModel(f,"ovpResourceModel");this.dialogBox.addContent(e);r(this.dialogBox)}.bind(this))}}.bind(this))}}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/CommonUtils", ["sap/ovp/cards/OVPCardAsAPIUtils","sap/ui/Device","sap/base/util/each","sap/ui/model/json/JSONModel","sap/ovp/app/OVPLogger"],function(e,t,r,n,a){"use strict";var i=new a("OVP.cards.CommonUtils");return{app:undefined,mUpdatedCardTitle:{},navigationHandler:undefined,supportedCardTypes:["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.stack","sap.ovp.cards.linklist","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.v4.linklist","sap.ovp.cards.charts.analytical","sap.ovp.cards.charts.smart.chart","sap.ovp.cards.charts.bubble","sap.ovp.cards.charts.donut","sap.ovp.cards.charts.line"],ovpConstantModel:new n({dontIncludeUOM:true,firstDataPointIndex:0,secondDataPointIndex:1,thirdDataPointIndex:2,fourthDataPointIndex:3,fifthDataPointIndex:4,sixthDataPointIndex:5,firstDataFieldIndex:0,secondDataFieldIndex:1,thirdDataFieldIndex:2,fourthDataFieldIndex:3,fifthDataFieldIndex:4,sixthDataFieldIndex:5}),deviceModel:new n(t).setDefaultBindingMode("OneWay"),checkIfCardTypeSupported:function(e){return this.supportedCardTypes.indexOf(e)!==-1},enable:function(e,t){this.app=e;this.navigationHandler=t},getApp:function(){return this.app},getCustomCards:function(e){var t=[];if(e){t=e.filter(function(e){return!e.template.startsWith("sap.ovp.cards")})}return t},getNavigationHandler:function(){return this.navigationHandler},createKeyForCB:function(e,t){return e.indexOf(t)+1},createCardComponent:function(t,r,n,a,i){return e.createCardComponent(t,r,n,a,i)},_getLayer:function(){var e=new URL(window.location.href).searchParams;return e.get("sap-ui-layer")},getQueryParameterValue:function(e){var t=new URL(window.location.href).searchParams;return t.get(e)},_getLayerNamespace:function(){var e=this._getLayer();if(!e){return"customer"}return e.toLowerCase()},getUnitColumn:function(e,t,r){var n,a=t.property;var i,s;var o="Org.OData.Measures.V1.ISOCurrency";var u="Org.OData.Measures.V1.Unit";for(var c=0,l=a.length;c<l;c++){if(a[c].name!==e){continue}if(a[c].hasOwnProperty(o)){i=a[c][o].Path;s=a[c][o].String;if(i){return i}else{return r?s:""}}if(a[c].hasOwnProperty(u)){i=a[c].hasOwnProperty(u).Path;s=a[c][u].String;if(i){n=i}else{n=r?s:""}if(n&&n!="%"){return n}else{return null}}if(a[c].hasOwnProperty("sap:unit")){return a[c]["sap:unit"]}break}return null},getUnitColumnForODataV4:function(e,t,r,n){var a,i,s;var o="@Org.OData.Measures.V1.ISOCurrency";var u="@Org.OData.Measures.V1.Unit";var c=t.getObject("/"+r+"/"+e+"@");if(c&&c[o]){i=c[o].$Path;s=c[o].$String;if(i){return i}else{return n?s:""}}if(c&&c[u]){i=c[u].$Path;s=c[u].$String;if(i){a=i}else{a=n?s:""}if(a&&a!="%"){return a}else{return null}}return null},onHeaderClicked:function(){},onContentClicked:function(e){},getContentDensityClass:function(){if(this._sContentDensityClass===undefined){if(document.body.classList.contains("sapUiSizeCozy")||document.body.classList.contains("sapUiSizeCompact")){if(document.body.classList.contains("sapUiSizeCozy")===true){this._sContentDensityClass="sapUiSizeCozy"}else if(document.body.classList.contains("sapUiSizeCompact")===true){this._sContentDensityClass="sapUiSizeCompact"}else{this._sContentDensityClass=""}}else if(!t.support.touch){this._sContentDensityClass="sapUiSizeCompact"}else{this._sContentDensityClass="sapUiSizeCozy"}}return this._sContentDensityClass},_setCardpropertyDensityAttribute:function(){var e=this.getContentDensityClass();if(e==="sapUiSizeCompact"){return"compact"}else if(e==="sapUiSizeCozy"){return"cozy"}else if(!t.support.touch){return"compact"}else{return"cozy"}},getPixelPerRem:function(){var e=parseFloat(getComputedStyle(document.documentElement).fontSize);return e},showODataErrorMessages:function(e){var t=[],n,a,s="";if(e&&e.responseText){var o=e.responseText;if(o){try{a=JSON.parse(o)}catch(e){i.error("Failed parsing response as JSON: "+o)}if(a&&a.error){n=a.error}}}if(n&&n.innererror&&n.innererror.errordetails){t=n.innererror.errordetails}if(n&&n.message&&Array.isArray(t)){t.unshift({message:n.message.value,severity:"error"})}if(t&&t.length>0){var u={};r(t,function(e,t){var r=t.message;if(r.endsWith(".")){r=r.substr(0,r.length-1)}if(!u[r]){u[r]=true;s=s+r+" "}})}return s},isODataV4:function(e){return e&&e.getODataVersion&&e.getODataVersion()=="4.0"||false},isJSONData:function(e){try{if(JSON.parse(e)){return true}}catch(e){return false}},isDate:function(e){if((e["type"]==="Edm.DateTime"&&e["sap:display-format"]==="Date"||e["type"]==="Edm.String"&&e["com.sap.vocabularies.Common.v1.IsCalendarDate"]&&e["com.sap.vocabularies.Common.v1.IsCalendarDate"].Bool==="true")&&(e["sap:filter-restriction"]==="interval"||e["sap:filter-restriction"]==="single-value"||e["_filterRestriction"]==="single-value")){return true}return false},updatePropertyValueForObject:function(e,t,r){if(e&&t&&r){if(r==="unitOfMeasurement"){e["unitOfMeasurement"]="{"+t+"}"}else if(Array.isArray(t)&&t.length){e[r]=t}else if(!Array.isArray(t)){e[r]=t}}},removePrefixAndReturnLocalId:function(e){if(e.indexOf("---")>-1){return e.split("---")[1]}return e},getCurrentAppIntent:function(){var e=this.getUshellContainer();if(e){return e.getServiceAsync("AppLifeCycle").then(function(e){return e.getCurrentApplication()}).then(function(e){return e.getIntent()}).catch(function(e){i.error(e);return Promise.reject(e)})}},getUshellContainer:function(){return sap.ui.require("sap/ushell/Container")},updateCardTitle:function(e,t){this.mUpdatedCardTitle[t]={title:e}},getUpdatedTitle:function(e){return this.mUpdatedCardTitle[e]&&this.mUpdatedCardTitle[e].title}}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/Constants", [],function(){"use strict";return{ItemLength:{List_condensed:{phone:5,tablet:5,desktop:5},List_extended:{phone:3,tablet:3,desktop:3},List_condensed_bar:{phone:5,tablet:5,desktop:5},List_extended_bar:{phone:3,tablet:3,desktop:3},Table:{phone:5,tablet:5,desktop:5},Stack_simple:{phone:20,tablet:20,desktop:20},Stack_complex:{phone:5,tablet:5,desktop:5}},Criticality:{StateValues:{None:"None",Negative:"Error",Critical:"Warning",Positive:"Success"},ColorValues:{None:"Neutral",Negative:"Error",Critical:"Critical",Positive:"Good"}},errorMessages:{CARD_WARNING:"OVP-AC: Analytic card: Warning: ",CARD_ERROR:"OVP-AC: Analytic card Error: ",DATA_ANNO_ERROR:"OVP-AC: Analytic card Error:",CARD_ANNO_ERROR:"OVP-AC: Analytic card: Error ",CHART_ANNO_ERROR:"OVP-AC: Analytic card: Error ",INVALID_CHART_ANNO:"OVP-AC: Analytic Cards: Invalid Chart Annotation.",ANALYTICAL_CONFIG_ERROR:"Analytic card configuration error",CACHING_ERROR:"no model defined while caching OdataMetaData",INVALID_MAXITEMS:"maxItems is Invalid. ",NO_DATASET:"OVP-AC: Analytic Cards: Could not obtain dataset.",SORTORDER_WARNING:"SortOrder is present in PresentationVariant, but it is empty or not well formed.",BOOLEAN_ERROR:"Boolean value is not present in PresentationVariant.",IS_MANDATORY:"is mandatory.",IS_MISSING:"is missing.",NOT_WELL_FORMED:"is not found or not well formed)",MISSING_CHARTTYPE:"Missing ChartType in ",CHART_ANNO:"Chart Annotation.",DATA_ANNO:"Data Annotation",CARD_ANNO:"card annotation.",CARD_CONFIG:"card configuration.",CARD_CONFIG_ERROR:"Could not obtain configuration for ",CARD_CONTAINER_ERROR:"Could not obtain card container. ",DATA_UNAVAIALABLE:"No data available.",CONFIG_LOAD_ERROR:"Failed to load config.json. Reason: ",INVALID_CHARTTYPE:"Invalid ChartType given for ",INVALID_CONFIG:"No valid configuration given for ",CONFIG_JSON:"in config.json",ENTER_INTEGER:"Please enter an Integer.",NO_CARD_MODEL:"Could not obtain Cards model.",ANNO_REF:"com.sap.vocabularies.UI.v1 annotation.",INVALID_REDUNDANT:"Invalid/redundant role configured for ",CHART_IS:"chart is/are ",CARD_CONFIG_JSON:"card from config.json",ALLOWED_ROLES:"Allowed role(s) for ",DIMENSIONS_MANDATORY:"DimensionAttributes are mandatory.",MEASURES_MANDATORY:"MeasureAttributes are mandatory.",CARD_LEAST:"card: Enter at least ",CARD_MOST:"card: Enter at most ",FEEDS:"feed(s).",MIN_FEEDS:"Minimum number of feeds required for ",FEEDS_OBTAINED:"card is not configured. Obtained ",FEEDS_REQUIRED:"feed(s), Required: ",INVALID_SEMANTIC_MEASURES:"More than one measure is being semantically coloured",INVALID_IMPROVEMENT_DIR:"No Improvement Direction Found",INVALID_CRITICALITY:"Invalid criticality values",INVALID_DIMMEAS:"Invalid number of Measures or Dimensions",INVALID_FORECAST:"Invalid/Redundant Datapoint or Forecast measure",INVALID_TARGET:"Invalid/Redundant Datapoint or Target measure",ERROR_MISSING_AXISSCALES:"Minimum and Maximum values are mandatory for AxisScale MinMax to work"},Annotations:{LABEL_KEY:"sap:label",LABEL_KEY_V4:"com.sap.vocabularies.Common.v1.Label",TEXT_KEY:"sap:text",TEXT_KEY_V4:"com.sap.vocabularies.Common.v1.Text",TEXT_ARRANGEMENT_ANNO:"com.sap.vocabularies.UI.v1.TextArrangement",TYPE_KEY:"type",DISPLAY_FORMAT_KEY:"sap:display-format",SEMANTICS_KEY:"sap:semantics",UNIT_KEY:"sap:unit",UNIT_KEY_V4_ISOCurrency:"Org.OData.Measures.V1.ISOCurrency",UNIT_KEY_V4_Unit:"Org.OData.Measures.V1.Unit",CURRENCY_CODE:"currency-code",NAME_KEY:"name",NAME_CAP_KEY:"Name",EDM_TYPE:"type",EDM_INT32:"Edm.Int32",EDM_INT64:"Edm.Int64",SCATTER_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Scatter",BUBBLE_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Bubble",LINE_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Line",COLUMNSTACKED_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked",VERTICALBULLET_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/VerticalBullet",COLUMN_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Column",BAR_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Bar",COMBINATION_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Combination",DONUT_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Donut"}}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/Filterhelper", ["sap/base/util/isEmptyObject","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,r){"use strict";var n={};function i(e){var t;if(e){if(e.settings.tabs){var r=0;var n=e.settings.selectedKey;if(n&&e.settings.tabs.length>=n){r=n-1}t=e.settings.tabs[r]["selectionAnnotationPath"]}else{t=e.settings["selectionAnnotationPath"]}}return t}function a(e){var t={EQ:"NE",GE:"LT",LT:"GE",LE:"GT",GT:"LE",BT:"NB",Contains:"NotContains",StartsWith:"NotStartsWith",EndsWith:"NotEndsWith"}[e];return t?t:e}function s(e){var t=["NE","NB","NotContains","NotStartsWith","NotEndsWith"];return t.indexOf(e)>-1}function o(e,t){var r;if(e){if(e.String){r=Number(e.String)}else if(e.Int){r=Number(e.Int)}else if(e.Decimal){r=Number(e.Decimal)}else if(t&&e.$Decimal){r=Number(e.$Decimal)}else if(e.Double){r=Number(e.Double)}else if(e.Single){r=Number(e.Single)}else if(t&&typeof e==="number"){return e}}return r}function l(e,r,n){if(e&&e.length){var i={};e.forEach(function(e){if(i[e.path]){i[e.path].push(new t(e))}else{i[e.path]=[new t(e)]}});Object.keys(i).forEach(function(e){r.push(new t({filters:i[e],and:n}))})}}return{_getEntityRelevantFilters:function(e,t){var r=[];if(t.length>0&&e){var n=this._checkRelevantFiltersRecursive(e,t[0]);if(n){r.push(n)}}return r},_checkRelevantFiltersRecursive:function(e,r){if(!r._bMultiFilter){r.sPath=r.sPath.split("/").pop();var n=this._getPropertyMapping(e,r.sPath);if(n){r.sPath=n;return r}}else{var i=r.aFilters;var a,s=[];if(i){for(var o=0;o<i.length;o++){a=this._checkRelevantFiltersRecursive(e,i[o]);if(a){s.push(a)}}if(s.length>0){return new t(s,r.bAnd)}}}},_getPropertyMapping:function(e,t){if(t in e){return t}},mergeFilters:function(r,i,a){var s=a.getProperty("/cardId");var o=n[s]||[];if(i&&i.length===0&&r&&r.length===0){return[]}var u=[];if(o.length&&i&&i.length){i=i.filter(function(e){return!o.includes(e)})}if(i&&i.length>0||o.length){var f=[];l(i,f,false);l(o,f,true);u.push(new t({filters:f,and:true}))}if(!e(r[0])){u.push(r[0])}return new t({filters:u,and:true})},getSelectionVariantFilters:function(e,t,r){var n=t.getData(),a=e.filter(function(e){return e.id===n.cardId})[0],s=i(a);if(s){s="@"+s;var o=r[s];return o?this.getFilters(t,o,true):[]}return[]},formatLiteral:function(e,t){var r=/'/g;if(e===undefined){throw new Error("Illegal value: undefined")}if(e===null){return"null"}switch(t){case"Edm.Binary":return"binary'"+e+"'";case"Edm.Boolean":case"Edm.Byte":case"Edm.Double":case"Edm.Int16":case"Edm.Int32":case"Edm.SByte":case"Edm.Single":return String(e);case"Edm.Date":case"Edm.DateTimeOffset":case"Edm.Decimal":case"Edm.Guid":case"Edm.Int64":case"Edm.TimeOfDay":return e;case"Edm.Duration":return"duration'"+e+"'";case"Edm.String":return"'"+e.replace(r,"''")+"'";default:throw new Error("Unsupported type: "+t)}},getBooleanValue:function(e,t){if(e&&e.Boolean){if(e.Boolean.toLowerCase()==="true"){return true}else if(e.Boolean.toLowerCase()==="false"){return false}}else if(e&&e.Bool){if(e.Bool.toLowerCase()==="true"){return true}else if(e.Bool.toLowerCase()==="false"){return false}}return t},getPrimitiveValue:function(e,t){var r;if(e){if(e.String||e.String===""){r=e.String}else if(t&&typeof e=="string"){r=e}else if(e.Boolean||e.Bool){r=this.getBooleanValue(e)}else if(e.DateTime){r=e.DateTime}else if(e.DateTimeOffset){r=e.DateTimeOffset}else{r=o(e,t)}}return r},getFilters:function(e,t,i){var o=[];var l=e.getProperty("/filters");if(l){o=o.concat(l)}var u=t&&t.SelectOptions;var f,c,g;var h=[];if(u){for(var p=0;p<u.length;p++){f=u[p];c=i?f.PropertyName.$PropertyPath:f.PropertyName.PropertyPath;for(var v=0;v<f.Ranges.length;v++){g=f.Ranges[v];var d=i?g.Sign.$EnumMember:g.Sign.EnumMember;var m=i?g.Option.$EnumMember:g.Option.EnumMember;if(d){var E={path:c,operator:m.split("/")[1],value1:this.getPrimitiveValue(g.Low,i),value2:this.getPrimitiveValue(g.High,i),sign:d==="com.sap.vocabularies.UI.v1.SelectionRangeSignType/I"?"I":"E"};if(E.sign==="E"){E.operator=a(E.operator);E.sign="I";h.push(E)}else if(E.sign==="I"&&s(E.operator)){h.push(E)}if(E.operator==="CP"&&E.sign==="I"){var b=r.Contains;var N=E.value1;if(N){var y=N.indexOf("*");var S=N.lastIndexOf("*");if(y>-1){if(y===0&&S!==N.length-1){b=r.EndsWith;N=N.substring(1,N.length)}else if(y!==0&&S===N.length-1){b=r.StartsWith;N=N.substring(0,N.length-1)}else{N=N.substring(1,N.length-1)}}}E.operator=b;E.value1=N}o.push(E)}}}if(h.length){var P=e.getProperty("/cardId");n[P]=h}}return o},transformExcludeOperationForNavigation:function(e){var t={NE:"EQ",NB:"BT",NotContains:"Contains",NotStartsWith:"StartsWith",NotEndsWith:"EndsWith"};if(e&&e.operator&&t[e.operator]){e.operator=t[e.operator];e.sign="E"}},createExcludeFilters:function(e,t){var r=[];var i=t.getProperty("/cardId");var a=n[i]||[];if(a.length>0){e.forEach(function(e){if(!a.includes(e)){r.push(e)}});r.push({filters:a,and:true});return r}return e}}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * @fileoverview
 * This file is intended to do all the operations like, property extraction, parsing on Metadata(OData V2) of the application.
 */
sap.ui.predefine("sap/ovp/cards/MetadataAnalyser", ["sap/ovp/app/OVPLogger","sap/base/security/encodeURL","sap/ui/model/analytics/odata4analytics","sap/fe/navigation/SelectionVariant","sap/base/util/each"],function(e,t,a,r,n){"use strict";var i=new e("OVP.cards.MetadataAnalyser");function o(e,t){if(!e||!e.getMetaModel){throw new Error("OData Model needs to be passed as an argument")}var a=e.getMetaModel();var r=a.getODataEntitySet(t);var n=a.getODataEntityType(r.entityType);return n.property?Array.from(n.property):[]}function s(e,t,a){if(!e||!e.getMetaModel){throw new Error("OData Model needs to be passed as an argument")}var r=e.getMetaModel();var n={entitySetName:null,parameters:[],navPropertyName:null};var i=r.getODataEntitySet(t);var o=r.getODataEntityType(i.entityType);var s=o.navigationProperty;if(!s){return n}s.filter(function(e){var t=r.getODataAssociationEnd(o,e.name);var s=r.getODataEntityType(t.type);if(s["sap:semantics"]==="parameters"&&s.key){n.entitySetName=r.getODataAssociationSetEnd(o,e.name).entitySet;for(var m=0;m<s.key.propertyRef.length;m++){if(a){var p=s.property;for(var y=0;y<p.length;y++){if(p[y].name===s.key.propertyRef[m].name){n.parameters.push(p[y]);n.entitySetName=r.getODataAssociationSetEnd(o,e.name).entitySet}}}else{n.parameters.push(s.key.propertyRef[m].name)}}var l=s.navigationProperty;var u=l.some(function(e){var t=r.getODataAssociationEnd(s,e.name).type;t===i.entityType?n.navPropertyName=e.name:Function.prototype();return n.navPropertyName});return u&&n.navPropertyName&&n.entitySetName}return false});return n}function m(e,t){if(!e||!e.getMetaModel){throw new Error("OData Model needs to be passed as an argument")}var a=e.getMetaModel();var r=a.getODataEntitySet(t);if(r&&r.entityType){var n=a.getODataEntityType(r.entityType);if(n["sap:semantics"]&&n["sap:semantics"]==="aggregate"){return true}}return false}function p(e,t){if(t&&t.property){return t.property.filter(function(t){return t.name===e})}return[]}function y(e,t){return e.filter(function(e){if(e.name===t){return e}})}function l(e,a,r,n){var m="";var p=[];if(n&&n.Parameters){e.parameters.forEach(function(r){n.Parameters.forEach(function(n){var i=n.PropertyName.PropertyPath.split("/");i=i[i.length-1];if(i===r){var o=n.PropertyValue.String;o=t(a.formatValue(o,e["parameterType"][r]));p.push(i+"="+o)}})});var l=n.Parameters.map(function(e){return e&&e.PropertyName&&e.PropertyName.PropertyPath});var u=s(a,r.name);if(u.entitySetName){var f=o(a,u.entitySetName);var v=u.parameters.filter(function(e){return!l.includes(e)});for(var g=0;g<v.length;g++){var P=v[g].split("/");var c=P[P.length-1];var h=y(f,c);var d=false;if(h.length>0){var S=h[0];d=S.type==="Edm.String"&&S["sap:parameter"]==="optional"}if(d){p.push(c+"="+"")}}}}else{m="/"+r.name;i.error("SelectionParameters","There are no parameters to resolve");return m}try{m="/"+e.entitySetName+"("+p.join(",")+")/"+e.navPropertyName}catch(e){m="/"+r.name;i.error("getEntitySetPathWithParameters","binding path with parameters failed - "+e||e.message)}return m}function u(e,t,m,p,l,u){var f=[];var v="";var g=new a.Model(a.Model.ReferenceByModel(e));var P=g.findQueryResultByName(t.name);var c=new a.QueryResultRequest(P);var h=P.getParameterization();if(!h){v="/"+t.name;return u?f:v}if(l){var d=l.getAnalyticalParameters()}if(h){var S;c.setParameterizationRequest(new a.ParameterizationRequest(h));if(m&&m.Parameters){n(m.Parameters,function(){if(this.RecordType==="com.sap.vocabularies.UI.v1.IntervalParameter"){S=this.PropertyNameFrom.PropertyPath.split("/");c.getParameterizationRequest().setParameterValue(S[S.length-1],this.PropertyValueFrom.String,this.PropertyValueTo.String)}else{S=this.PropertyName.PropertyPath.split("/");c.getParameterizationRequest().setParameterValue(S[S.length-1],this.PropertyValue.String)}});var E=m.Parameters.map(function(e){return e&&e.PropertyName&&e.PropertyName.PropertyPath});var N=s(e,t.name);if(N.entitySetName){var M=o(e,N.entitySetName);var O=N.parameters.filter(function(e){return!E.includes(e)});for(var R=0;R<O.length;R++){S=O[R].split("/");var T=S[S.length-1];var w=y(M,T);var D=false;if(w.length>0){var V=w[0];D=V.type==="Edm.String"&&V["sap:parameter"]==="optional";f.push(V)}if(D){c.getParameterizationRequest().setParameterValue(T,"")}}}}else if(p&&p.length>0){n(p,function(){c.getParameterizationRequest().setParameterValue(this.path,this.value)})}else if(d&&d.length>0){var z=l&&l.getUiState({allFilters:false});var A=z?JSON.stringify(z.getSelectionVariant()):"{}";var m=new r(A);for(var b in h.getAllParameters()){for(var R=0;R<d.length;R++){if(d[R]&&d[R].name==b){var q=d[R].name;var k=m.getParameter(q);if(!k){var F=m.getSelectOption(q);k=F&&F[0]&&F[0].Low}c.getParameterizationRequest().setParameterValue(b,k)}}}}else{v="/"+t.name;i.error("SelectionParameters","There are no parameters to resolve");return u?f:v}}try{v=c.getURIToQueryResultEntitySet()}catch(e){P=c.getQueryResult();v="/"+P.getEntitySet().getQName();i.error("getEntitySetPathWithParameters","binding path with parameters failed - "+e||e.message)}return u?f:v}function f(e,t,a,r,n){var i="";if(m(e,t.name)){i=u(e,t,a,r,n)}else{var p=s(e,t.name);var y=o(e,t.name);var f={};if(p){p["parameters"].forEach(function(e){y.forEach(function(t){if(t["name"]==e){f[e]=t["type"]}})});p["parameterType"]=f;i=l(p,e,t,a)}else{i="/"+t.name}}return i}return{getPropertyOfEntitySet:o,getParametersByEntitySet:s,checkAnalyticalParameterisedEntitySet:m,getPropertyFromEntityType:p,resolveTransactionalParameterizedEntitySet:l,resolveAnalyticalParameterizedEntitySet:u,resolveParameterizedEntitySet:f}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/NavigationHelper", ["sap/ovp/cards/AnnotationHelper","sap/ui/model/odata/AnnotationHelper","sap/ui/model/odata/v4/AnnotationHelper","sap/ui/core/CustomData","sap/ovp/cards/CommonUtils","sap/fe/navigation/SelectionVariant","sap/fe/navigation/PresentationVariant","sap/ovp/cards/jUtils","sap/base/util/merge","sap/base/util/isPlainObject","sap/base/util/isEmptyObject","sap/ovp/app/OVPLogger","sap/m/MessageToast","sap/ui/core/library","sap/ui/model/FilterOperator","sap/fe/navigation/library","sap/ui/thirdparty/jquery","sap/ovp/app/resources","sap/m/MessageBox","sap/ovp/helpers/ODataDelegator","sap/ovp/cards/Filterhelper","sap/ui/thirdparty/URITemplate"],function(t,e,a,r,i,n,o,s,l,c,p,v,u,f,g,m,jQuery,d,h,y,S,P){"use strict";var b=new v("OVP.cards.NavigationHelper");var I=f.TextDirection;function O(n,o,s,l,c,p){if(!s){return[]}var v=[];var u=l.getProperty("/template");var f=i.isODataV4(o);if(!c&&!n){if(!p){var g=l.getProperty("/kpiAnnotationPath");if(g&&(u==="sap.ovp.cards.charts.analytical"||u==="sap.ovp.cards.v4.charts.analytical")){var m=f?s["@"+g]:s[g];var d=m&&m.Detail;if(d){var h=f?d.SemanticObject:d.SemanticObject&&d.SemanticObject.String;var y=f?d.$Type:d.RecordType;var S=f?d.Action:d.Action&&d.Action.String;if(y==="com.sap.vocabularies.UI.v1.KPIDetailType"&&h&&S){v.push({type:y,semanticObject:h,action:S,label:""})}else{b.error("Invalid Semantic object and action configured for annotation "+d.RecordType)}}else{throw new Error("KPI does not have a KPIDetailType annotation")}}}}if(!c){var p=l.getProperty("/identificationAnnotationPath");var P=p?p.split(","):[];if(P&&P.length>1){c=P[0]}else{c=p}}if(f){c="@"+c}var I=s[c];if(Array.isArray(I)){I=t.sortCollectionByImportance(I);for(var O=0;O<I.length;O++){var F=f?I[O].$Type:I[O].RecordType;var A=f?I[O].Label:I[O].Label&&I[O].Label.String;if(F==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){var h=f?I[O].SemanticObject:I[O].SemanticObject.String;var S=f?I[O].Action:I[O].Action.String;v.push({type:F,semanticObject:h,action:S,label:A||null})}if(F==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"&&!I[O].Url.UrlRef){var D=o.getMetaModel();var C,V;if(f){C=n?n.getInterface(0).getPath():"/"+l.getInterface().getData().entitySet;var x=D.createBindingContext(C);V=a.format(I[O].Url,{context:x})}else{C=s.$path;var x=D.createBindingContext(C);V=e.format(x,I[O].Url)}var k=new r({key:"url",value:V});if(n&&u==="sap.ovp.cards.charts.analytical"){o=n.getModel()}k.setModel(o);k.setBindingContext(n);var N=k.getValue();var T=f?I[O].Value:I[O].Value.String;v.push({type:F,url:N,value:T,label:A||null})}}}return v}function F(t){if(!t){return false}var e=t.getProperty("/template");var a=t.getProperty("/navigation");return a==="noHeaderNav"&&["sap.ovp.cards.charts.analytical","sap.ovp.cards.charts.smart.chart","sap.ovp.cards.v4.charts.analytical"].indexOf(e)>-1}function A(t,e){var a=i.isODataV4(t);if(e&&e.length){for(var r=0;r<e.length;r++){var n=e[r];var o=a?n.$Type:n.RecordType;if(o==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"||o==="com.sap.vocabularies.UI.v1.DataFieldForAction"||o==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){return true}}}return false}function D(t,e){var a=i.isODataV4(t);if(e){var r=a?"@com.sap.vocabularies.UI.v1.LineItem":"com.sap.vocabularies.UI.v1.LineItem";var n=e[r];var o=a?n&&n[0].$Type:n&&n[0].RecordType;if(o){return o==="com.sap.vocabularies.UI.v1.DataFieldForAction"||o==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"}}return false}function C(t,e,a){var r=i.isODataV4(t);var n=a&&a.getProperty("/annotationPath");if(e&&n){n=r?"@"+n:n;var o=e[n];return this.isNavigationInAnnotation(t,o)}return false}function V(t,e,a){var r=i.isODataV4(t);var n=a&&a.getProperty("/template");if(e&&a){var o=a.getProperty("/identificationAnnotationPath");var s=o;var l=a.getProperty("/contentFragment");if(l==="sap.ovp.cards.stack.Stack"||l==="sap.ovp.cards.quickview.Quickview"){var c=o?o.split(","):[];if(c&&c.length>1){if(l==="sap.ovp.cards.stack.Stack"){s=c[0]}else{s=c[1]}}}var p=r?e["@"+s]:e[s];if(this.isNavigationInAnnotation(t,p)){return true}if(n==="sap.ovp.cards.charts.analytical"||n==="sap.ovp.cards.v4.charts.analytical"){var v=a.getProperty("/kpiAnnotationPath");if(e&&v){var u=e[v];if(u&&u.Detail){var f=u.Detail.SemanticObject&&u.Detail.SemanticObject.String;var g=u.Detail.Action&&u.Detail.Action.String;if(f&&g){return true}}}}}else if(a&&(n==="sap.ovp.cards.linklist"||n==="sap.ovp.cards.v4.linklist")&&a.getProperty("/staticContent")&&a.getProperty("/targetUri")){return true}return false}function x(t,e){for(var a=0;a<t.property.length;a++){var r=t.property[a]["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"];var i=r&&r.Bool;if(i){e.removeSelectOption(t.property[a].name)}}}function k(t,e){for(var a in t.property){if(typeof t.property[a]==="object"&&t.property[a].$kind==="Property"){var r=t.property[a];var i=r.annotations&&r.annotations["@com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"]||false;if(i){e.removeSelectOption(a)}}}}function N(t){var e=t.getParameterNames();for(var a=0;a<e.length;a++){if(t.getParameter(e[a])===""){t.removeParameter(e[a])}}var r=t.getSelectOptionsPropertyNames();for(a=0;a<r.length;a++){var i=t.getSelectOption(r[a]);for(var n=0;n<i.length;n++){if(i[n].Low===""&&!i[n].High){i.splice(n,1);n--}}t.removeSelectOption(r[a]);if(i.length>0){t.massAddSelectOption(r[a],i)}}return t}function T(t,e){var a=t.sFunctionLabel||"";var r={batchGroupId:"Changes",changeSetId:"Changes",urlParameters:e,forceSubmit:true,context:t.oContext,functionImport:t.oFunctionImport};var n=new Promise(function(e,i){var n=t.oContext.getModel();var o;o="/"+r.functionImport.name;n.callFunction(o,{method:r.functionImport.httpMethod,urlParameters:r.urlParameters,batchGroupId:r.batchGroupId,changeSetId:r.changeSetId,headers:r.headers,success:function(t,a){e(a)},error:function(t){t.actionText=a;i(t)}})});n.then(function(t){return u.show(d.getText("Toast_Action_Success"),{duration:1e3})},function(t){var e=i.showODataErrorMessages(t);if(e===""&&t.actionText){e=d.getText("Toast_Action_Error")+' "'+t.actionText+'"'+"."}return h.error(e,{title:d.getText("OVP_GENERIC_ERROR_TITLE"),onClose:null,styleClass:"",initialFocus:null,textDirection:I.Inherit})})}function L(t){var e;if(t&&t.mainComponent){e=t.mainComponent._getFilterPreference(t.cardId)}return e}function E(t,e){var a=[];if(t&&t.filterAll==="card"){a=e.getSelectOptionsPropertyNames()}else if(t&&t.cardFilter){a=t.cardFilter}a.forEach(function(t){if(t!=="$.basicSearch"){e.removeSelectOption(t)}});return e}function U(t,e){var a=true;if(t&&t.filterAll==="global"){a=false}else if(t&&t.globalFilter){if(t.globalFilter.indexOf(e)>=0){a=false}}return a}function _(t,e){var a=t&&t.getUiState({allFilters:false});var r=a?JSON.stringify(a.getSelectionVariant()):"{}";var i=new n(r);return w(e,i)}function w(t,e){var a,r,i,n;var o=L();e=E(o,e);var s=t.filters;var l=t.parameters;for(var c=0;c<s.length;c++){a=s[c];if(a.path&&a.operator&&typeof a.value1!=="undefined"){r=a.value1.toString();i=typeof a.value2!=="undefined"?a.value2.toString():undefined;if(U(o,a.path)){e.addSelectOption(a.path,a.sign,a.operator,r,i)}}}var p,v,u;for(var f=0;f<l.length;f++){n=l[f];if(!n.path||!n.value){continue}p=n.path.split("/").pop();p=p.split(".").pop();if(p.indexOf("P_")===0){v=p;u=p.substr(2)}else{v="P_"+p;u=p}if(e.getParameter(v)){continue}if(e.getParameter(u)){continue}e.addParameter(p,n.value)}return e}function j(t,e,a,r,i){if(!t||!e){return}var n;if(a&&a.bStaticLinkListIndex){var o=e.getProperty("/staticContent");n=o[a.iStaticLinkListIndex]["customParams"];a=null}else{n=e.getProperty("/customParams")}if(!n||!t.templateBaseExtension.provideCustomParameter||!t.onCustomParams){return}var v=t.templateBaseExtension.provideCustomParameter(n)?t.templateBaseExtension.provideCustomParameter(n):t.onCustomParams(n);if(!v||!s.checkIfFunction(v)){return}var u=l({},a);var f=l({},r);var g;try{g=v(u,f)}catch(t){b.error("Could not process custom navigation parameters for the card. Plese check the implementation for the custom parameters extension implementation",t)}if(!g||!Array.isArray(g)&&!c(g)){return}var m=c(g);if(m&&p(g)){return}var d=m&&(!!g.bIgnoreEmptyString||!!g.ignoreEmptyString);var h=m?g.aSelectionVariant||g.selectionVariant:g;if(!Array.isArray(h)){return}var y,S,P,I,O,F;S=h.length;for(y=0;y<S;y++){P=h[y];if(!P){continue}I=P.path;O=P.value1;F=P.value2;if(!I||typeof I!=="string"||I===""){b.error("Custom Variant property path '"+I+"' should be valid string");continue}if(!(O||O===0||O===false||O==="")){continue}O=O.toString();F=F&&F.toString();if(a){delete a[I]}if(i){delete i[I]}if(O===""&&d){r.removeSelectOption(I)}r.addSelectOption(I,P.sign,P.operator,O,F)}if(d){N(r)}return d}function B(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function M(t,e){var a={};for(var r=0;e.property&&r<e.property.length;r++){var i=e.property[r].name;var n=t[i];if(t.hasOwnProperty(i)){if(Array.isArray(t[i])&&t[i].length===1){a[i]=t[i][0]}else if(B(n)!=="object"){a[i]=n}}}return a}function R(t,e){var a={};for(var r in e.property){var i=t[r];if(t.hasOwnProperty(r)){if(Array.isArray(t[r])&&t[r].length===1){a[r]=t[r][0]}else if(i===null||typeof i!=="object"||Array.isArray(i)){a[r]=i}}}return a}function $(e,a,r,s,l,c,p,v){var u={};var f,m;var d=r?r.globalFilter:undefined;var h=s&&s.getProperty("/staticContent");var y=i.isODataV4(a);var P=e.oMacroFilterBar;if(!h){var b=t.getCardSelections(s,y);var I=b.filters;var O=b.parameters;m=s&&s.getProperty("/staticParameters");I&&I.forEach(function(t){t.path=t.path&&t.path.replace("/",".");S.transformExcludeOperationForNavigation(t);switch(t.operator){case g.Contains:t.operator="CP";var e=t.value1;t.value1="*"+e+"*";break;case g.EndsWith:t.operator="CP";var e=t.value1;t.value1="*"+e;break;case g.StartsWith:t.operator="CP";var e=t.value1;t.value1=e+"*"}});b.filters=I;if(v&&c&&c.hasOwnProperty("$isOthers")){var F=v.getOtherNavigationDimensions();for(var A in F){var D=F[A];for(var C=0;C<D.length;C++){b.filters.push({path:A,operator:"EQ",value1:D[C],sign:"E"})}}}O&&O.forEach(function(t){t.path=t.path&&t.path.replace("/",".")});b.parameters=O;var V=t.getCardSorters(s,y);if(c){u=y?R(c,l):M(c,l)}var x=s&&s.getProperty("/kpiAnnotationPath");var k=s&&s.getProperty("/template");if(x&&(k==="sap.ovp.cards.charts.analytical"||k==="sap.ovp.cards.v4.charts.analytical")){var N=!y?l[x]:l["@"+x];var T=N&&N.Detail;if(!y&&T&&T.RecordType==="com.sap.vocabularies.UI.v1.KPIDetailType"){u["kpiID"]=N.ID.String}else if(T&&T.$Type==="com.sap.vocabularies.UI.v1.KPIDetailType"){u["kpiID"]=N.ID}}f=V&&new o(V);if(P){return P.getSelectionVariant().then(function(t){var r=w(b,t);return J(p,e,s,r,u,l,a,f,m)}.bind())}else{var L=this._buildSelectionVariant(d,b);return this._processCustomParameters(p,e,s,L,u,l,a,f,m)}}else{var L,m;if(P){return P.getSelectionVariant().then(function(t){L=H(r,t);m=G(h,p);return J(p,e,s,t,u,l,a,f,m)})}else{var E=d&&d.getUiState({allFilters:false});var U=E?JSON.stringify(E.getSelectionVariant()):"{}";L=new n(U);L=H(r,L);m=G(h,p);return J(p,e,s,L,u,l,a,f,m)}}}function H(t,e){var a=t||null;var r=L(a);return E(r,e)}function G(t,e){if(t[e.iStaticLinkListIndex].params){return t[e.iStaticLinkListIndex].params}else if(t[e.iStaticLinkListIndex].staticParameters){return t[e.iStaticLinkListIndex].staticParameters}}function J(t,e,a,r,n,o,s,l,c){var p;var v=e.oMacroFilterBar;if(t&&!t.bStaticLinkListIndex){p=j(e,a,t,r,n)}else if(t&&t.bStaticLinkListIndex){p=j(e,a,t,r)}else{p=j(e,a,n,r)}var u=p?m.SuppressionBehavior.ignoreEmptyString:undefined;if(c){for(var f in c){if(!n.hasOwnProperty(f)){n[f]=c[f]}}}for(var g in n){var d=y.getPropertyFromEntityType(g,o,s);var h=d.length>0?d[0]:{};var S=h&&h.nullable;if(n[g]===null&&S!=="false"){r.addSelectOption(g,"I","EQ","",null);delete n[g]}}var P=i.getNavigationHandler();var b=P&&P.mixAttributesAndSelectionVariant(n,r.toJSONString(),u);var I=a&&a.getProperty("/staticContent");if(!I){if(v){k(o,b)}else{this._removeSensitiveAttributesFromNavSelectionVariantForODataV2Model(o,b)}}return{sNavSelectionVariant:b?b.toJSONString():null,sNavPresentationVariant:l?l.toJSONString():null}}return{_checkIfCardFiltersAreValid:U,processCustomParameters:j,_removeSensitiveAttributesFromNavSelectionVariantForODataV2Model:x,_removeSensitiveAttributesFromNavSelectionVariantForODataV4Model:k,_removeEmptyStringsFromSelectionVariant:N,_buildSelectionVariant:_,getEntityNavigationEntries:O,checkHeaderNavigationDisabledForAnalyticalCard:F,isNavigationInAnnotation:A,checkNavigationForLinkedList:D,checkLineItemNavigation:C,checkNavigation:V,callFunction:T,getFilterPreference:L,removeFilterFromGlobalFilters:E,getEntityNavigationParameters:$,getContextParametersForV2:M,getType:B,getContextParametersForV4:R,_processCustomParameters:J,_updateSelectionVariant:w,_removeFilters:H,_getStaticParameters:G}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/OVPCardAsAPIUtils", ["sap/ovp/app/OVPLogger","sap/ui/core/Component"],function(t,e){"use strict";var a=new t("OVP.cards.OVPCardsAsAPIUtils");var n=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.stack","sap.ovp.cards.linklist","sap.ovp.cards.v4.linklist","sap.ovp.cards.charts.analytical","sap.ovp.cards.charts.smart.chart","sap.ovp.cards.charts.bubble","sap.ovp.cards.charts.donut","sap.ovp.cards.charts.line","sap.ovp.cards.v4.charts.analytical","sap.ovp.cards.v4.charts.smart.chart","sap.ovp.cards.v4.charts.bubble","sap.ovp.cards.v4.charts.donut","sap.ovp.cards.v4.charts.line","sap.ovp.cards.error","sap.ovp.cards.v4.error"];function s(){return n}function r(t,e,n){var s={};s.message=t;if(n){s._oError=n;s.getActualError=function(){return s._oError}}a.error(s.message);e(s)}function o(t){var e=false;var a=t.getOwnerComponent();if(!!a){var n=a.getComponentData();if(!!n&&n.ovpCardsAsApi){e=true}}return e}function i(t,e){var a=e.manifest;var n;for(var s in a.cards){n=s}var r=a.cards[n];if(r.template==="sap.ovp.cards.charts.analytical"||r.template==="sap.ovp.cards.charts.smart.chart"){r.settings.chartAnnotationPath=t.chartAnnotationPath;r.settings.navigation=t.navigation}if(t.entitySet){r.settings.entitySet=t.entitySet}r.settings.annotationPath=t.annotationPath;r.settings.dynamicSubtitleAnnotationPath=t.dynamicSubtitleAnnotationPath;r.settings.presentationAnnotationPath=t.presentationAnnotationPath;r.settings.selectionAnnotationPath=t.selectionAnnotationPath;r.settings.selectionPresentationAnnotationPath=t.selectionPresentationAnnotationPath;r.settings.kpiAnnotationPath=t.kpiAnnotationPath;r.settings.dataPointAnnotationPath=t.dataPointAnnotationPath;r.settings.identificationAnnotationPath=t.identificationAnnotationPath;r.settings.headerAnnotationPath=t.headerAnnotationPath;r.settings.selectedKey=t.selectedKey;if(r){a.cards[n]=r;d.createCardComponent(e.parentView,a,e.containerId,e.selectionVariant)}}function p(t){var e=true;if(t.template==="sap.ovp.cards.error"||t.template==="sap.ovp.cards.v4.error"||(t.template==="sap.ovp.cards.linklist"||t.template==="sap.ovp.cards.v4.linklist")&&t.settings.staticContent){e=false}return e}function l(t,e){var a=[],n=[],s,r;var o=e.getSelectOptionsPropertyNames();for(s=0;s<o.length;s++){var i=e.getSelectOption(o[s]);if(i&&i.length>0){for(r=0;r<i.length;r++){if(i[r]){var p={path:o[s],operator:i[r].Option,value1:i[r].Low,sign:i[r].Sign};if(i[r].High){p.value2=i[r].High}a.push(p)}}}}var l=e.getParameterNames();for(s=0;s<l.length;s++){var c={path:l[s],value:e.getParameter(l[s])};n.push(c)}t.settings.filters=a;t.settings.parameters=n;return t}function c(t,a,s,o,i){return new Promise(function(c,d){var v,f,g="";if(!!a){for(var h in a.cards){if(a.cards.hasOwnProperty(h)){v=a.cards[h];f=h}}if(!!v&&!!f){if(!!v.template&&!!v.settings&&(!!v.model||!p(v))){if(n.indexOf(v.template)!==-1){if(!!s&&typeof s==="string"){if(!!t){var u=!v.model?undefined:t.getModel(v.model);var m;if(!p(v)){m=Promise.resolve()}else{if(u&&u.getODataVersion&&u.getODataVersion()=="4.0"){m=u.getMetaModel().requestObject("/"+v.settings.entitySet)}else{m=u.getMetaModel().loaded()}}m.then(function(){var n=false;if(o){v=l(v,o);n=true}v.settings.ignoreSelectionVariant=n;var p={name:v.template,componentData:{model:u,ovpCardsAsApi:true,parentView:t,manifest:a,containerId:s,selectionVariant:o,fnCheckNavigation:i,showDateInRelativeFormat:a.showDateInRelativeFormat,disableTableCardFlexibility:a.disableTableCardFlexibility,template:v.template,i18n:t.getModel("@i18n"),cardId:f,settings:v.settings,appComponent:null,mainComponent:null}};var h=t.byId(s);if(h){h.getComponentInstance()&&h.getComponentInstance().destroy()}e.create(p).then(function(e){var a=t.byId(s);if(!!a){var n=a.getComponentInstance();e.setModel(u);a.setComponent(e);if(n){setTimeout(function(){n.destroy()},0)}c(true)}else{g="Component Container '"+s+"' is not present in the current View";r(g,d)}},function(t){g="Component creation failed";r(g,d,t)})},function(t){g="MetaModel was not loaded";r(g,d,t)})}else{g="First argument oView is null";r(g,d)}}else{g="ContainerId should be of type string and not null";r(g,d)}}else{g=v.template+" card type is not supported in the API";r(g,d)}}else{g="Cards template or model or settings are not defined";r(g,d)}}else{g="Cards manifest entry or cardId is null";r(g,d)}}else{g="Second argument oManifest is null";r(g,d)}})}var d={createCardComponent:c,recreateCard:i,checkIfAPIIsUsed:o,getSupportedCardTypes:s};return d},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/PayLoadUtils", ["sap/ui/thirdparty/jquery","sap/ovp/cards/CommonUtils","sap/ovp/cards/rta/SettingsDialogConstants","sap/ovp/app/OVPUtils","sap/base/util/merge","sap/ui/model/odata/CountMode"],function(jQuery,t,e,i,a,s){"use strict";function n(t,e,i,a){return t+"_sap.ovp.cards."+e+"."+i+"."+a}function r(t){return{type:"XTIT",maxLength:40,value:{"":t}}}function o(){return{i18n:"../i18n/i18n.properties"}}function d(t,e,i){var a=t+"["+e+"]";if(i){a+="/"+i}return a}function f(t,e){var i=e._getCardsModel();for(var a=0;a<i.length;a++){if(i[a].id===t){return true}}return false}function l(t,e,i){var a={propertyPath:t,operation:e};if(i){a["propertyValue"]=i}return a}function g(t){delete t.id;delete t.dashboardLayout;delete t.settings.baseUrl;delete t.settings.cloneCard;delete t.settings.newCard;delete t["customer.settings"];delete t["customer_base.settings"];delete t["vendor.settings"];if(t.settings["staticContent"]){for(var e=0;e<t.settings["staticContent"].length;e++){delete t.settings["staticContent"][e].id}}}function c(e,i,a,s){if(a){if(e===t._getLayerNamespace()+".settings"){a[s]={operation:"DELETE"}}}else{if(e===t._getLayerNamespace()+".settings"){K.aEntityPropertyChange.push(l(i,"UPSERT",{operation:"DELETE"}))}else{K.aEntityPropertyChange.push(l(i,"DELETE"))}}}function p(e){K.aEntityPropertyChange.push(l(t._getLayerNamespace()+".settings","UPSERT",e[t._getLayerNamespace()+".settings"]))}function u(e,a,s,o,d,f){var g;var c=t._getLayer();if(!K.oText){K.oText={}}if(!c||c===i.Layers.customer){g=n(K.sApplicationId,K.sCardId,e,s);K.oText[g]=r(o)}else{var p=false;for(var u in d.ai18nProperties){if(d.ai18nProperties[u].value===o){g=d.ai18nProperties[u].key;p=true;break}}if(!p){g=n(K.sApplicationId,K.sCardId,e,s)}K.oText[g]=r(o)}if(f){f[s]="{{"+g+"}}"}else{var h=a+"/"+s;K.aEntityPropertyChange.push(l(h,"UPSERT","{{"+g+"}}"))}}function h(a,s,n,r){var o=this._oCardManifestSettings,d=this._oOriginalCardManifestSettings;for(var f=0;f<n.length;f++){if(!d[n[f]]&&o[n[f]]||d[n[f]]&&o[n[f]]&&d[n[f]]!=o[n[f]]){if(r){u(a,a,n[f],o[n[f]],o,s[a])}else{u(a,a,n[f],o[n[f]],o)}var l=t._getLayer();if(!l||l===i.Layers.customer){s.settings[n[f]]=o[n[f]]}else{var g=e.oI18nValueProperty;if(g[n[f]]){s.settings[n[f]]=this._oCardManifestSettings[g[n[f]]]}else{s.settings[n[f]]=o[n[f]]}}}else if(!o[n[f]]&&d[n[f]]){if(r){c(a,a+"/"+n[f],s[a],n[f])}else{c(a,a+"/"+n[f])}delete s.settings[n[f]]}}}function C(t,e,i,a){var s=t+"/"+e;if(a){a[e]=i}else{K.aEntityPropertyChange.push(l(s,"UPSERT",i))}}function v(t,e,i,a){var s=this._oCardManifestSettings,n=this._oOriginalCardManifestSettings;for(var r=0;r<i.length;r++){if(!n[i[r]]&&s[i[r]]||n[i[r]]&&s[i[r]]&&n[i[r]]!=s[i[r]]||typeof n[i[r]]==="boolean"&&typeof s[i[r]]==="boolean"&&n[i[r]]!=s[i[r]]){if(a){C(t,i[r],s[i[r]],e[t])}else{C(t,i[r],s[i[r]])}e.settings[i[r]]=s[i[r]]}else if(!s[i[r]]&&n[i[r]]){if(a){c(t,t+"/"+i[r],e[t],i[r])}else{c(t,t+"/"+i[r])}delete e.settings[i[r]]}}}function m(i,a){var s=e.cardSettings["settings"],n=e.cardSettings["text"];if(i===t._getLayerNamespace()+".settings"){if(a[t._getLayerNamespace()+".settings"]){h.bind(this)(i,a,n,false);v.bind(this)(i,a,s,false)}else{a[t._getLayerNamespace()+".settings"]={};h.bind(this)(i,a,n,true);v.bind(this)(i,a,s,true);p(a)}}else{h.bind(this)(i,a,n,false);v.bind(this)(i,a,s,false)}}function y(t,e,i,a,s,n){var r=this._oCardManifestSettings;var o=r[s];for(var f=0;f<o.length;f++){for(var l=0;l<a.length;l++){if(o[f][a[l]]){var g=d(t+"/"+s,f),c=t+"."+s+"."+f;if(n){u(c,g,a[l],o[f][a[l]],r,e[t][s][f])}else{u(c,g,a[l],o[f][a[l]],r,i[f])}}}}if(!n){C(t,s,i)}}function S(t,i){var a=e.cardSettingsArrayLevel[i]["onlyTabLevelProps"],s=false;for(var n=0;a&&n<a.length;n++){if(a[n]===t){s=true;break}}return s}function _(t,e,i,a,s,n){var r=this._oCardManifestSettings,o;for(o=0;o<i.length;o++){if(r[i[o]]&&!S(i[o],s)){if(n){u(t,t,i[o],r[i[o]],r,e[t])}else{u(t,t,i[o],r[i[o]],r)}e.settings[i[o]]=r[i[o]]}}for(o=0;o<a.length;o++){if(r[a[o]]&&!S(a[o],s)){if(n){C(t,a[o],r[a[o]],e[t])}else{C(t,a[o],r[a[o]])}e.settings[a[o]]=r[a[o]]}}if(n){c(t,t+"/"+s,e[t],s)}else{c(t,t+"/"+s)}delete e.settings[s]}function b(t,e,i,a,s,n,r){var o;for(o=0;o<a.length;o++){if(e[t][a[o]]){if(r){c(t,t+"/"+a[o],e[t],a[o])}else{c(t,t+"/"+a[o])}delete e.settings[a[o]]}}for(o=0;o<s.length;o++){if(e[t][s[o]]){if(r){c(t,t+"/"+s[o],e[t],s[o])}else{c(t,t+"/"+s[o])}delete e.settings[s[o]]}}y.bind(this)(t,e,i,a,n,r)}function M(t,i){return jQuery.map(a({},t),function(t){var a=e.cardSettingsArrayLevel[i]["text"],s,n=e.cardSettingsArrayLevel[i]["settings"],r={};for(s=0;s<a.length;s++){if(t[a[s]]){r[a[s]]=t[a[s]]}}for(s=0;s<n.length;s++){if(t[n[s]]||t[n[s]]===""){r[n[s]]=t[n[s]]}}return r})}function P(t,i,a,s){var n=e.cardSettingsArrayLevel[a]["checkForRemoval"],r,o;for(r=0;r<n.length;r++){if(!i[0][n[r]]){o=t.indexOf(n[r]);if(s==="remove"){if(o>-1){t.splice(o,1)}}else if(s==="add"){if(o===-1){t.push(n[r])}}}}return t}function I(i,a,s,n,r,o){var d=e.cardSettingsArrayLevel[r]["text"],f=e.cardSettingsArrayLevel[r]["settings"],l=M(s,r);if(s&&n){a.settings[r]=M(s,r);if(i===t._getLayerNamespace()+".settings"){a[i][r]=M(s,r)}y.bind(this)(i,a,l,d,r,o)}else if(!s&&n){_.bind(this)(i,a,d,f,r,o)}else if(s&&!n){a.settings[r]=M(s,r);if(i===t._getLayerNamespace()+".settings"){a[i][r]=M(s,r)}f=P(f,l,r,"remove");b.bind(this)(i,a,l,d,f,r,o);f=P(f,l,r,"add")}}function L(t,e,i){var a=this._oCardManifestSettings["staticContent"],s=this._oOriginalCardManifestSettings["staticContent"],n=this._oCardManifestSettings["tabs"],r=this._oOriginalCardManifestSettings["tabs"];if(a||s){I.bind(this)(t,e,a,s,"staticContent",i)}else if(n||r){I.bind(this)(t,e,n,r,"tabs",i)}}function A(i,a){var s=e.cardSettingsForComplex["settings"],n=e.cardSettingsForComplex["text"];if(i===t._getLayerNamespace()+".settings"){if(a[t._getLayerNamespace()+".settings"]){h.bind(this)(i,a,n,false);v.bind(this)(i,a,s,false);L.bind(this)(i,a,false)}else{a[t._getLayerNamespace()+".settings"]={};h.bind(this)(i,a,n,true);v.bind(this)(i,a,s,true);L.bind(this)(i,a,true);p(a)}}else{h.bind(this)(i,a,n,false);v.bind(this)(i,a,s,false);L.bind(this)(i,a,false)}}function x(t,e){var i=this._oCardManifestSettings["staticContent"],a=this._oOriginalCardManifestSettings["staticContent"],s=this._oCardManifestSettings["tabs"],n=this._oOriginalCardManifestSettings["tabs"];if(i||a||s||n){A.bind(this)(t,e)}else{m.bind(this)(t,e)}}function N(i){var a=e.AllCardSettingsForKPICard,s,n=this._oCardManifestSettings,r={model:t._getLayerNamespace()+".kpi_card_model_"+i.getTrimmedDataURIName(n.selectedKPI.ODataURI),template:"sap.ovp.cards.charts.analytical",settings:{}};for(s=0;s<a.length;s++){if(n[a[s]]){r.settings[a[s]]=n[a[s]]}}if(n["addCustomParameters"]){r.settings.staticParameters={};var o=n["aAllStaticParameters"];if(Array.isArray(o)&&o.length>0){for(var d=0;d<o.length;d++){var f=o[d];r.settings.staticParameters[f.key]=f.value}}}return r}function w(){var t=this._oCardManifestSettings["staticContent"],i=e.cardSettingsArrayLevel["staticContent"]["text"],a,s,n=e.cardSettingsArrayLevel["staticContent"]["settings"],r=this._oCardManifestSettings,o=e.cardSettingsForStaticLinkListCard,d={template:"sap.ovp.cards.linklist",settings:{staticContent:[]}};for(s=0;s<o.length;s++){if(r[o[s]]){d.settings[o[s]]=r[o[s]]}}for(s=0;s<t.length;s++){d.settings["staticContent"].push({});for(a=0;a<i.length;a++){if(t[s][i[a]]){d.settings["staticContent"][s][i[a]]=t[s][i[a]]}}for(a=0;a<n.length;a++){if(t[s][n[a]]){d.settings["staticContent"][s][n[a]]=t[s][n[a]]}}}return d}function D(t){var i=e.NewCardSettings,a;var s=this._oCardManifestSettings;i.forEach(function(t){if(t.template===this._oCardManifestSettings.template){a=t}}.bind(this));var n={model:this._oCardManifestSettings.model,template:a.template,settings:{}};if(!this._oCardManifestSettings["tabs"]){var r=a.cardSettings;var o=e.oI18nValueProperty;for(var d=0;d<r.length;d++){if(!t.bAddNewCardFlag){if(s[r[d]]){n.settings[r[d]]=s[r[d]]}}else{if(s[r[d]]){if(o[r[d]]){n.settings[r[d]]=this._oCardManifestSettings[o[r[d]]]}else{n.settings[r[d]]=s[r[d]]}}}}}else{var f=a.text;for(var d=0;d<f.length;d++){if(s[f[d]]){n.settings[f[d]]=s[f[d]]}}var l=this._oCardManifestSettings["tabs"],g=M(l,"tabs"),c=this._oCardManifestSettings.defaultViewSelected;n.settings["tabs"]=g;n.settings.selectedKey=c}return n}function T(t,e){var i=[];if(e){for(var a in e){var s=e[a];i.push({key:a,value:s.value[""],textType:s.type})}if(i.length){writeToI18n("/"+t+"/webapp/i18n",i)}}}function E(t,i,a,s){var o,d,f,l,g,c=a.settings["staticContent"],p=a.settings["tabs"];var u=e.cardSettingsWithText;var h=e.oI18nKeyValueProperty;for(d=0;d<u.length;d++){var C;if(typeof u[d]=="string"){if(a.settings[u[d]]){if(!o){o={}}if(s){if(!s.bAddNewCardFlag){C=n(t,i,"settings",u[d])}else{for(var v in h){if(u[d]===v){C=this._oCardManifestSettings[h[v]]?this._oCardManifestSettings[h[v]]:n(t,i,"settings",u[d]);break}}}}else{C=n(t,i,"settings",u[d])}o[C]=r(a.settings[u[d]]);a.settings[u[d]]="{{"+C+"}}"}}else if(typeof u[d]=="object"){if(u[d].hasOwnProperty("staticContent")){if(c){for(f=0;f<c.length;f++){for(l=0;l<u[d]["staticContent"].length;l++){g=u[d]["staticContent"][l];if(c[f][g]){if(!o){o={}}C=n(t,i,"settings.staticContent."+f,g);o[C]=r(c[f][g]);a.settings["staticContent"][f][g]="{{"+C+"}}"}}}}}else if(u[d].hasOwnProperty("tabs")){if(p){for(f=0;f<p.length;f++){for(l=0;l<u[d]["tabs"].length;l++){g=u[d]["tabs"][l];if(p[f][g]){if(!o){o={}}C=n(t,i,"settings.tabs."+f,g);o[C]=r(p[f][g]);a.settings["tabs"][f][g]="{{"+C+"}}"}}}}}}}return o}function F(t,e,i){var a=false;for(var s=0;s<i.length;s++){if(i[s].id!==e&&i[s].model===t){a=true;break}}return a}function O(t,e,i,a,s){var n={};n["appDescriptorChange"]={parameters:t};if(e){n["appDescriptorChange"]["texts"]=e}if(a){n["flexibilityChange"]={newAppDescriptor:i,oldAppDescriptor:a}}else{n["flexibilityChange"]=i}if(s){n["viewSwitchChange"]=s}return n}function U(e,i){var s={card:{}},n={},r=e.oMainComponent,d=r._getApplicationId(),l,c={},p=t.getQueryParameterValue("fiori-tools-rta-mode");if(e.bAddNewCardFlag){l=D.bind(this)(e)}else if(e.bNewStaticLinkListCardFlag){l=w.bind(this)(e)}else if(e.bNewKPICardFlag){l=N.bind(this)(e)}var u=t._getLayerNamespace()+i,h=1;while(f(u+"_N"+h,r)){h++}u=u+"_N"+h;g(l);n=a({},l);n.id=u;if(this._oCardManifestSettings.selectedKPI){n.settings.selectedKPI=a({},this._oCardManifestSettings.selectedKPI)}c.oFlexCardManifest=n;c.oText=E.bind(this)(d,u,l,e);if(p){T(d,a({},c.oText));c.oText=o()}s.card[u]=l;c.oParameters=s;return c}var K={sApplicationId:"",sCardId:"",aEntityPropertyChange:[],oText:undefined,getPayLoadForEditCard:function(e){var i=e.oAppDescriptor.id,s={cardId:i},n,r,d=a({},e.oAppDescriptor),f=a({},e.oAppDescriptor),l,g,c=t.getQueryParameterValue("fiori-tools-rta-mode");l=i.lastIndexOf(t._getLayerNamespace()+".",0)===0?"settings":t._getLayerNamespace()+".settings";K.sApplicationId=e.sApplicationId;K.sCardId=i;K.aEntityPropertyChange=[];K.oText=undefined;x.bind(this)(l,d);n=a({},K.oText);if(c){T(K.sApplicationId,K.oText);n=o()}r=K.aEntityPropertyChange;if(r.length===1){s["entityPropertyChange"]=r[0]}else{s["entityPropertyChange"]=r}if(this._oCardManifestSettings["tabs"]){var p=this._oCardManifestSettings.defaultViewSelected,u=this._oOriginalCardManifestSettings.selectedKey;u=u&&u>0?u:1;if(p&&p>0&&p!==u){g={cardId:i,selectedKey:p,oldKey:u}}d.settings.selectedKey=p}return O(s,n,d,f,g)},getPayLoadForCloneCard:function(e){return new Promise(function(i,s){var n={card:{}},r,d={},l=e.getComponentInstance().getComponentData(),c=l.mainComponent,p=c._getApplicationId(),u=a({},c._getCardFromManifest(l.cardId)),h=t.getQueryParameterValue("fiori-tools-rta-mode");var C=t._getLayerNamespace()+"."+u.id,v=1;while(f(C+"_C"+v,c)){v++}C=C+"_C"+v;g(u);d=a({},u);d.id=C;d.settings.title=d.settings.title+" "+v;u.settings.title=u.settings.title+" "+v;if(u.settings.defaultSpan&&u.settings.defaultSpan.showOnlyHeader){u.settings.defaultSpan.rows=12}r=E(p,C,u);if(h){T(p,a({},r));r=o()}n.card[C]=u;i(O(n,r,d))})},getPayLoadForNewStaticLinkListCard:function(t){var e=U.bind(this)(t,".newStaticLinkListCard");return O(e.oParameters,e.oText,e.oFlexCardManifest)},getPayLoadForNewKPICard:function(t){var e=U.bind(this)(t,".newKPICard"),i=t.oAppComponent,a=e.oFlexCardManifest,n=e.oParameters,r=a.model+"_ANNO",o=t.getDataSources(r),d=true,f=0;if(o[r]){if(o[r].uri!==this._oCardManifestSettings.selectedKPI.ModelURI){while(o[r+"_"+f]){f++}r=r+"_"+f}else{d=false}}var l=i.getModel(a.model);if(!l){n["model"]={};n["model"][a.model]={dataSource:a.model,settings:{defaultCountMode:s.None}};n["dataSource"]={};n["dataSource"][a.model]={uri:this._oCardManifestSettings.selectedKPI.ODataURI,type:"OData",settings:{annotations:[r],localUri:""}};if(d){n["dataSource"][r]={uri:this._oCardManifestSettings.selectedKPI.ModelURI,type:"ODataAnnotation",settings:{localUri:""}};a.settings["sAnnoKey"]=r}}var g=O(n,e.oText,e.oFlexCardManifest);if(d&&l){g["addODataAnnotation"]={parameters:{dataSourceId:a.model,annotations:[r],dataSource:{}}};g["addODataAnnotation"].parameters.dataSource[r]={uri:this._oCardManifestSettings.selectedKPI.ModelURI,type:"ODataAnnotation",settings:{localUri:""}};g["flexibilityChange"].settings["sAnnoKey"]=r}return g},getPayLoadForNewCard:function(t){var e=U.bind(this)(t,".newCard"),i=e.oParameters;if(t.newDataSource){var a=t.oAppComponent,n=e.oFlexCardManifest,r=t.newDataSourceModel.serviceAnnotation,o=t.getDataSources(r),d=true,f=0;if(o[r]){if(o[r].uri!==t.newDataSourceModel.serviceAnnotationURI){while(o[r+"_"+f]){f++}r=r+"_"+f}else{d=false}}var l=a.getModel(n.model);if(!l){i["model"]={};i["model"][n.model]={dataSource:n.model,settings:{defaultCountMode:s.None}};i["dataSource"]={};i["dataSource"][n.model]={uri:t.newDataSourceModel.serviceURI,type:"OData",settings:{annotations:[r],localUri:""}};if(d){i["dataSource"][r]={uri:t.newDataSourceModel.serviceAnnotationURI,type:"ODataAnnotation",settings:{localUri:""}}}}}return O(e.oParameters,e.oText,e.oFlexCardManifest)},getPayLoadForRemoveCard:function(t){var e={},i={},a=t.getComponentInstance().getComponentData(),s=a.cardId;e["cardId"]=s;i.id=t.getId();var n=O(e,null,i),r=a.mainComponent.getUIModel().getProperty("/cards");if(!F(a.modelName,s,r)&&!!a.modelName){n["removeDataSourceChange"]=[];var o=a.appComponent,d=o.getManifestEntry("sap.ui5").models[a.modelName].dataSource,f=o.getManifestEntry("sap.app").dataSources[d].settings.annotations;f.forEach(function(t){n["removeDataSourceChange"].push({parameters:{dataSourceId:t}})})}return n}};return K},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/PeriodDateFormat", ["sap/base/i18n/Formatting","sap/ui/base/Object","sap/ui/core/Locale","sap/ui/core/LocaleData"],function(e,t,a,r){"use strict";var o=t.extend("sap.ovp.cards.PeriodDateFormat",{metadata:{library:"sap.ovp"},constructor:function(o,s){t.call(this,o,s);var i,n,f,p,l=new a(e.getLanguageTag()),u=r.getInstance(l),m=e.getCustomLocaleData(),h=/(m|y)(?:.*)(\W)(m|y)/i,y=m["dateFormats-short"];this.oFormatOptions=s;if(this.oFormatOptions.format.length>4){i="yM"}else if(this.oFormatOptions.format==="PPP"){i="M"}else{i=this.oFormatOptions.format}if(y&&i==="yM"){p=y.match(h).splice(1).join("");if(p){n=p}}else{n=u.getCustomDateTimePattern(i,this.oFormatOptions.calendarType)}n=n.replace(/([\u4e00-\u9faf\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uffef])+/gi,"");if(this.oFormatOptions.format.length>4){n=n.replace(/y+/i,this.oFormatOptions.format.slice(0,this.oFormatOptions.format.lastIndexOf("Y")+1));n=n.replace(/m+/i,this.oFormatOptions.format.slice(this.oFormatOptions.format.lastIndexOf("Y")+1))}else if(this.oFormatOptions.format==="PPP"){n="PPP"}f=this.parseCldrDatePattern(n);this.oFormatOptions.pattern=f.length>1?n:"";this._setFormatRegex(f);this._setParseRegex(f);this._setValidationRegex(f)}});o.prototype._setFormatRegex=function(e){var t=[],a=[],r,o,s,i=false,f;for(f=0;f<e.length;f++){r=e[f];o=r.symbol||"";s=n[o].format;if(o===""){a[f]=r.value}else if(o==="y"||o==="Y"){t.unshift("("+s.source+")");a[f]="$"+1}else{t.push("("+s.source+")");for(var p=0;p<e.length;p++){if(e[p].symbol==="y"||e[p].symbol==="Y"){i=true}}a[f]=i?"$"+2:"$"+1}}this.sFormatRegExPattern=new RegExp(t.join(""));this.sFormatRegExGroups=a.join("")};o.prototype._setParseRegex=function(e){var t,a,r,o,s,i=[],p={},l=0;for(o=0;o<e.length;o++){t=e[o];a=t.symbol||"";r=n[a].parse;if(a===""){i.push("\\D+?")}else{i.push("("+r.source+")");s=++l;p[s]=t}}this.sParseRegExPattern=new RegExp("^"+i.join("")+"$");this.fnParseRegExReplacer=function(){var e,t,a=[];for(var r in p){e=p[r];t=arguments[r];if(t.length<e.digits){if(e.symbol==="y"||e.symbol==="Y"){t=f(t)}else{t=t.padStart(e.digits,"0")}}if(e.symbol==="y"||e.symbol==="Y"){a.unshift(t)}else{a.push(t)}}return a.join("")}};o.prototype._setValidationRegex=function(e){var t,a,r,o,s=[];for(t=0;t<e.length;t++){a=e[t];r=a.symbol||"";o=n[r].format;if(r===""){continue}else if(r==="y"||r==="Y"){s.unshift(o.source)}else{s.push(o.source)}}this.sValidationRegExPattern=new RegExp("^("+s.join(")(")+")$")};o.prototype.parseCldrDatePattern=function(e){var t,a,r,o,s=[];for(t=0;t<e.length;t++){a=e[t];if(r!==a){o={}}else{o.digits+=1;continue}if(typeof n[a]==="undefined"){o.value=a;o.type="text"}else{o.symbol=a;o.digits=1}r=a;s.push(o)}return s};o.prototype.getPattern=function(){return this.oFormatOptions.pattern};var s={year:/[1-9][0-9]{3}/,period:/[0-9]{3}/,quarter:/[1-4]/,week:/0[1-9]|[1-4][0-9]|5[0-3]/,day:/371|370|3[0-6][0-9]|[1-2][0-9][0-9]|[1-9][0-9]|[1-9]/};var i={year:/[0-9]{1,4}/,period:/[0-9]{1,3}/,quarter:/[1-4]/,week:/[0-9]{1,2}/,day:/[1-9]/};var n={"":"",y:{format:s.year,parse:i.year},Y:{format:s.year,parse:i.year},P:{format:s.period,parse:i.period},W:{format:s.week,parse:i.week},d:{format:s.day,parse:i.day},Q:{format:s.quarter,parse:i.quarter},q:{format:s.quarter,parse:i.quarter}};function f(e){var t,a=Number.parseInt(e),r=(new Date).getUTCFullYear(),o=Math.floor(r/100);t=o*100+a-r;if(e.length===3){a+=Math.floor((o-1)/10)*1e3}else if(t<-70){a+=(o+1)*100}else if(t<30){a+=o*100}else{a+=(o-1)*100}return a}return o});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/PersonalizationUtils", ["sap/ovp/cards/CommonUtils","sap/ui/fl/write/api/ControlPersonalizationWriteAPI","sap/ovp/app/OVPLogger"],function(n,a,t){"use strict";var e=new t("OVP.cards.PersonanlizationUtils");function r(n,a){a.every(function(a){if(a.id===n.cardId){a.selectedKey=n.selectedKey;return false}return true});return a}function o(n,a){a.every(function(a){if(a.id===n.cardId){a.visibility=n.visibility;return false}return true});return a}function i(a,t,e){var r=n.getApp(),o=r._getCardId(a.id);t.every(function(n){if(n.id===o){n.visibility=e;return false}return true});return t}function d(n,a){var t=[];var e,r;e=a.filter(function(n){return n.visibility});a.forEach(function(n,a){if(!n.visibility){t.push({card:n,index:a})}});if(!e[n.position]){return a}if(e[n.position].id!==n.cardId){var o=a.findIndex(function(a){return a.id===n.cardId});r=e[o];if(r){e[o]=e[n.position];e[n.position]=r}}t.forEach(function(n){e.splice(n.index,0,n.card)});a=e;return a}function u(n,a){a.every(function(a){if(a.id===n.cardId&&a.dashboardLayout){Object.keys(n.dashboardLayout).forEach(function(t){if(!a.dashboardLayout[t]){a.dashboardLayout[t]={}}if(n.dashboardLayout[t].rowSpan){a.dashboardLayout[t].rowSpan=n.dashboardLayout[t].rowSpan}if(n.dashboardLayout[t].colSpan){a.dashboardLayout[t].colSpan=n.dashboardLayout[t].colSpan}if(n.dashboardLayout[t].maxColSpan){a.dashboardLayout[t].maxColSpan=n.dashboardLayout[t].maxColSpan}if(n.dashboardLayout[t].noOfItems){a.dashboardLayout[t].noOfItems=n.dashboardLayout[t].noOfItems}if(n.dashboardLayout[t].hasOwnProperty("autoSpan")){a.dashboardLayout[t].autoSpan=n.dashboardLayout[t].autoSpan}if(n.dashboardLayout[t].row){a.dashboardLayout[t].row=n.dashboardLayout[t].row}if(n.dashboardLayout[t].column){a.dashboardLayout[t].col=n.dashboardLayout[t].column}if(n.dashboardLayout[t].hasOwnProperty("showOnlyHeader")){a.dashboardLayout[t].showOnlyHeader=n.dashboardLayout[t].showOnlyHeader}});return false}return true});return a}function s(n,a){if(!Array.isArray(a)||!n){return n}var t=[];n.forEach(function(n){var a={};Object.keys(n).forEach(function(t){a[t]=n[t]});t.push(a)});var e={VENDOR:[],CUSTOMER_BASE:[],CUSTOMER:[],USER:[]};var s=a.reduce(function(n,a){n[a.getLayer()].push(a);return n},e);var c=[].concat(s["VENDOR"],s["CUSTOMER_BASE"],s["CUSTOMER"],s["USER"]);c.forEach(function(n){switch(n.getChangeType()){case"viewSwitch":t=r(n.getContent(),t);break;case"visibility":t=o(n.getContent(),t);break;case"hideCardContainer":t=i(n.getContent().card,t,false);break;case"unhideCardContainer":t=i(n.getContent().card,t,true);break;case"position":t=d(n.getContent(),t);break;case"dragOrResize":t=u(n.getContent(),t);break;default:break}});return t}function c(n,a){var t=n.filter(function(n){var t=false;a.forEach(function(a){if(n.id===a.id){t=true;return}});return!t});return a.concat(t)}function f(n,a){return n.some(function(n){return n.changeType==="position"&&n.content.cardId===a.cardId})}function h(a){var t=n.getApp();var e=t.deltaChanges;var r=e.filter(function(n){return n.getChangeType()==="position"});for(var o=0;o<r.length;o++){var i=r[o].getContent();var d=f(a,i);if(!d){a.push({content:r[o].getContent(),changeType:"position",isUserDependent:true})}}}function y(a){if(!a||!a.content||!a.content.cardId){return}var t=a.content.cardId;var e=n.getApp();var r=e.getUIModel().getProperty("/aOrderedCards");var o=r.findIndex(function(n){return n.id===t&&n.visibility});if(o!==-1&&a.content.position!==o){a.content.position=o}}function p(t,r){var o=n.getApp();var i={};if(o.getOwnerComponent()){i=o.getOwnerComponent().oOvpConfig}if(o.getUIModel().getProperty("/bRTAActive")||i.bInsightDTEnabled){return}var d=r?r.byId("ovpLayout"):null;var u=[],s=[],c=[];if(!Array.isArray(t)){t=[t]}if(t.length){h(t)}t.forEach(function(n){var a=n.content.cardId;if(n.changeType==="position"){y(n)}n.jsOnly=true;u.push({selectorElement:r.byId(a),changeSpecificData:n});s.push(r.byId(a));c.push(n.changeType)});a.isCondensingEnabled().then(function(n){if(n){return b(u,d)}else{return l(s,c).finally(function(){return b(u,d)})}}).then(function(){e.info("Personalization changes have been saved in lrep backend")}).catch(function(n){e.error("Personalization changes were not saved",n)})}function l(n,t){return a.reset({selectors:n,changeTypes:t})}function b(n,t){return a.add({changes:n},true).then(function(n){return a.save({changes:n,selector:t})})}var v={mergeChanges:s,addMissingCardsFromManifest:c,savePersonalization:p,applyPositionChange:d};return v},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/SettingsUtils", ["sap/m/Dialog","sap/m/Button","sap/ovp/cards/PayLoadUtils","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/rta/SettingsDialogConstants","sap/ovp/cards/CommonUtils","sap/ovp/cards/generic/base/analytical/Utils","sap/ui/Device","sap/m/MessagePopover","sap/m/MessageItem","sap/m/Link","sap/m/MessageBox","sap/ovp/cards/AnnotationHelper","sap/ui/core/mvc/ViewType","sap/ui/model/json/JSONModel","sap/ovp/app/resources","sap/base/util/merge","sap/ovp/app/OVPLogger","sap/ui/model/odata/v2/ODataModel","sap/ui/model/odata/CountMode","sap/ui/core/mvc/View","sap/ui/core/Element"],function(e,t,a,i,n,r,o,s,l,d,p,c,u,f,g,v,h,m,y,C,b,P){"use strict";var S=v;var w=new m("OVP.cards.SettingsUtils");function V(e,t,a){var n=e.getComponentInstance(),o=n.getComponentData(),s=o.appComponent,l=o.mainComponent,d=a?"":o.cardId,p=d+"Dialog",c=a?"":o.modelName,u=!c?undefined:s.getModel(c),f=t.getModel().getData(),g={cards:{}};g.cards[p]={template:f.template,settings:f};if(ve.bNewKPICardFlag){var v=f.selectedKPI;u=new y(v.ODataURI,{annotationURI:v.ModelURI,defaultCountMode:C.None});c=r._getLayerNamespace()+".kpi_card_model_"+L(v.ODataURI)}if(u&&!!c){g.cards[p].model=c;t.setModel(u,c)}g.cards[p]=l._getTemplateForChart(g.cards[p]);t.getController()._oManifest=g;if(ve.bNewKPICardFlag){u.getMetaModel().loaded().then(function(){var e=i.createCardComponent(t,g,"dialogCard");e.then(function(){t.setBusy(false)}).catch(function(){D(g.cards[p].settings,"OVP_KEYUSER_ANNOTATION_FAILURE");E(t,g,p)})},function(e){w.error(e)});u.attachMetadataFailed(function(){D(g.cards[p].settings,"OVP_KEYUSER_METADATA_FAILURE");E(t,g,p)})}else{i.createCardComponent(t,g,"dialogCard")}}function O(e,t){if(!this.oNewDataSources[e]){this.oNewDataSources[e]={uri:t}}}function I(e){if(this.oNewDataSources[e]){delete this.oNewDataSources[e]}}function T(e){var t=this.oAppComponent,a=t.getManifestEntry("sap.app").dataSources;if(this.oNewDataSources[e]){return this.oNewDataSources}return a}function L(e){var t=e.split("/");return t[t.length-1]?t[t.length-1]:t[t.length-2]}function E(e,t,a){var n=e.getModel();var o=r.isODataV4(n);var s=o?"sap.ovp.cards.v4.error":"sap.ovp.cards.error";t.cards[a].template=s;t.cards[a].model=undefined;var l=i.createCardComponent(e,t,"dialogCard");var d=e.getController();l.then(function(){e.setBusy(false);d.setBusy(false)}).catch(function(){e.setBusy(false);d.setBusy(false)})}function D(e,t){if(e){e.errorStatusText=v.getText(t)}}function A(e){if(e.indexOf("#")!==-1){return e.split("#")[1]}else{return"Default"}}function R(e,t){if(e){var a,i,n;if(e.indexOf("{")===0&&e.indexOf("}")===e.length-1){e=e.slice(1,-1);if(e.indexOf(">")!=-1){a=e.split(">");n=a[0];i=a[1]}else if(e.indexOf("&gt;")!=-1){a=e.split("&gt;");n=a[0];i=a[1]}if(!!i&&n==="@i18n"&&ve.oi18nModel){return ve.oi18nModel.getProperty(i)}else{return e}}else{return e}}else{return t}}function x(e,t,a,i){if(t[e]&&t[e][a]){var n=typeof t[e][a]==="string"?t[e][a]:t[e][a].String;return R(n,i)}else{return i}}function _(e,t){var a=A(t),i=v.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[a]);i=i?i:a;if(t.indexOf(",")!==-1){t=t.split(",")[0]}if(t.indexOf(".Identification")!==-1){if(e[t]){var n=u.sortCollectionByImportance(e[t]);for(var r=0;r<n.length;r++){var o=n[r];if(o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(o&&o["Label"]){return R(o["Label"].String,i)}else{return o["SemanticObject"].String+"-"+o["Action"].String}}if(o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(o&&o["Label"]){return R(o["Label"].String,i)}else{return o["Url"].String}}}}return v.getText("OVP_KEYUSER_LABEL_NO_NAVIGATION")}else if(t.indexOf(".LineItem")!==-1){var s=u.sortCollectionByImportance(e[t]);s.forEach(function(e,t){if(e["RecordType"]&&e["RecordType"].indexOf(".DataField")!==-1&&e["Label"]){s[t]["Label"]={String:R(e["Label"].String,i)}}});return s}else if(t.indexOf(".HeaderInfo")!==-1){if(e[t]&&e[t]["Description"]&&e[t]["Description"].Label){return R(e[t]["Description"].Label.String,i)}else{return i}}else if(t.indexOf(".PresentationVariant")!==-1||t.indexOf(".SelectionVariant")!==-1||t.indexOf(".SelectionPresentationVariant")!==-1){return x(t,e,"Text",i)}else if(t.indexOf(".DataPoint")!==-1){return x(t,e,"Title",i)}else if(t.indexOf(".Chart")!==-1){return x(t,e,"Description",i)}else if(t.indexOf(".FieldGroup")!==-1){return x(t,e,"Label",i)}else{var l="";if(a!=="Default"){l="#"+a}var d="com.sap.vocabularies.Common.v1.Label"+l;if(e[t]&&e[t][d]){return R(e[t][d].String,i)}else{return i}}}function k(e,t){var a=A(t),i=v.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[a]);i=i?i:a;if(t.indexOf(",")!==-1){t=t.split(",")[0]}if(t.indexOf(".Identification")!==-1){if(e[t]){var n=u.sortCollectionByImportance(e[t]);for(var r=0;r<n.length;r++){var o=n[r];if(o.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(o&&o["Label"]){return R(o["Label"],i)}else{return o["SemanticObject"]+"-"+o["Action"]}}if(o.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(o&&o["Label"]){return R(o["Label"],i)}else{return o["Url"]}}}}return v.getText("OVP_KEYUSER_LABEL_NO_NAVIGATION")}else if(t.indexOf(".LineItem")!==-1){var n=u.sortCollectionByImportance(e[t]);n.forEach(function(e,t){if(e["$Type"]&&e["$Type"].indexOf(".DataField")!==-1&&e["Label"]){n[t]["Label"]=R(e["Label"],i)}});return n}else if(t.indexOf(".HeaderInfo")!==-1){if(e[t]&&e[t]["Description"]&&e[t]["Description"].Label){return R(e[t]["Description"].Label,i)}else{return i}}else if(t.indexOf(".PresentationVariant")!==-1||t.indexOf(".SelectionVariant")!==-1||t.indexOf(".SelectionPresentationVariant")!==-1){return x(t,e,"Text",i)}else if(t.indexOf(".DataPoint")!==-1){return x(t,e,"Title",i)}else if(t.indexOf(".Chart")!==-1){return x(t,e,"Description",i)}else if(t.indexOf(".FieldGroup")!==-1){return x(t,e,"Label",i)}else{var s="";if(a!=="Default"){s="#"+a}var l="com.sap.vocabularies.Common.v1.Label"+s;if(e[t]&&e[t][l]){return R(e[t][l],i)}else{return i}}}function N(e,t,a){switch(t){case"cardPreview":return i.getSupportedCardTypes().indexOf(e)!==-1;case"noOfRows":case"noOfColumns":case"stopResizing":var n=["sap.ovp.cards.stack"];return n.indexOf(e)===-1;case"listType":case"listFlavor":var r=["sap.ovp.cards.list","sap.ovp.cards.v4.list"];return r.indexOf(e)!==-1;case"listFlavorForLinkList":var o=["sap.ovp.cards.linklist","sap.ovp.cards.v4.linklist"];return o.indexOf(e)!==-1;case"isViewSwitchSupportedCard":case"showViewSwitch":case"kpiHeader":var s=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.charts.analytical","sap.ovp.cards.charts.smart.chart","sap.ovp.cards.charts.bubble","sap.ovp.cards.charts.donut","sap.ovp.cards.charts.line"];return s.indexOf(e)!==-1;case"chartSPVorKPI":case"chart":var l=["sap.ovp.cards.charts.analytical","sap.ovp.cards.charts.smart.chart","sap.ovp.cards.charts.bubble","sap.ovp.cards.charts.donut","sap.ovp.cards.charts.line"];return l.indexOf(e)!==-1;case"sortOrder":case"sortBy":case"lineItem":if(!a){var d=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table"];return d.indexOf(e)!==-1}else{var d=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.charts.analytical","sap.ovp.cards.linklist","sap.ovp.cards.v4.linklist","sap.ovp.cards.stack"];return d.indexOf(e)!==-1}break;case"identification":var p=["sap.ovp.cards.stack"];return p.indexOf(e)!==-1;case"addViewSwitch":var c=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table"];return c.indexOf(e)!==-1;case"addKPIHeader":var c=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.charts.analytical"];return c.indexOf(e)!==-1;case"selecionOrPresentation":var u=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.linklist","sap.ovp.cards.v4.linklist"];return u.indexOf(e)!==-1;case"addODataSelect":var f=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.stack"];return f.indexOf(e)!==-1;case"addCustomActions":var f=["sap.ovp.cards.stack"];return f.indexOf(e)!==-1;case"setCardProperties":if(a){var d=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.linklist","sap.ovp.cards.v4.linklist","sap.ovp.cards.stack"];return d.indexOf(e)!==-1}break;default:break}}function M(e){return!!e.kpiAnnotationPath}function F(e){return!!e.selectionPresentationAnnotationPath}function B(e){return F(e)||M(e)}function K(e){return e.substring(e.lastIndexOf("_")+1,e.length).indexOf("C")!==-1}function H(e){if(e.NewKPICard){return e.NewKPICard}else if(e.selectedKPICardID){return e.selectedKPICardID.indexOf("newKPICard")!==-1}else{return false}}function U(e,t,a,i){var n=true;var r=true;var o=false;var s=false;var l=false;if(a){if(e.mainViewSelected){r=false}else{n=false}}if(e.addNewCard&&e.model){var s=true;if(e.template){l=true;if(e.entitySet){o=true}}}var d=X(e);var p=d&&d.substring(1);var c=e.entityType&&e.entityType[p];var u=c&&c.CriticalityCalculation&&c.CriticalityCalculation.ImprovementDirection&&c.CriticalityCalculation.ImprovementDirection.EnumMember;var f=e.tabs||[];var g=parseInt(e["selectedKey"],10);var v;if(g){v=f[g-1]}var h;switch(t){case"cardPreview":h=N(e.template,"cardPreview");break;case"noOfRows":case"noOfColumns":case"stopResizing":h=n&&N(e.template,t);break;case"title":h=n;break;case"dynamicSwitchSubTitle":h=n&&!!e.dynamicSubTitle;break;case"enableAddToInsights":h=n&&!!e.enableAddToInsights;break;case"dynamicSwitchStateSubTitle":h=!!e.dynamicSubtitleAnnotationPath;break;case"toleranceRangeHighValue":h=W("toleranceRangeHighValue",v,e,u);break;case"toleranceRangeLowValue":h=W("toleranceRangeLowValue",v,e,u);break;case"deviationRangeHighValue":h=W("deviationRangeHighValue",v,e,u);break;case"deviationRangeLowValue":h=W("deviationRangeLowValue",v,e,u);break;case"subTitle":if(!e.addNewCard){if(!e.subTitle){e.subTitle=" ";h=true}else{h=n&&!e.dynamicSubtitleAnnotationPath}}else{h=n}break;case"dynamicSubTitle":h=n&&!!e.dynamicSubtitleAnnotationPath;break;case"valueSelectionInfo":if(!e.addNewCard){if(!e.valueSelectionInfo){e.valueSelectionInfo=" "}h=n&&N(e.template,"kpiHeader")&&!!e.dataPointAnnotationPath&&!H(e)}else{h=n&&s&&l&&o&&e.addKPIHeaderCheckBox&&N(e.template,"addKPIHeader")}break;case"dataPoint":if(!e.addNewCard){h=r&&!M(e)&&N(e.template,"kpiHeader")&&!!e.dataPointAnnotationPath}else{h=r&&s&&l&&o&&e.addKPIHeaderCheckBox&&N(e.template,"addKPIHeader")}break;case"listType":case"listFlavor":case"listFlavorForLinkList":if(!e.addNewCard){h=n&&N(e.template,t)}else{h=n&&s&&l&&o&&N(e.template,t)}break;case"identification":if(!e.addNewCard){h=r&&!e.staticContent&&!N(e.template,t)}else{h=r&&s&&l&&o&&!N(e.template,t)}break;case"selectionPresentationVariant":if(!e.addNewCard){h=r&&F(e)&&!M(e)&&N(e.template,"kpiHeader")}else{h=r&&s&&l&&o&&N(e.template,"selecionOrPresentation")&&!!(Array.isArray(e.selectionPresentationVariant)&&e.selectionPresentationVariant.length)}break;case"KPI":case"dataPointSelectionMode":if(!e.addNewCard){h=r&&M(e)&&!F(e)&&N(e.template,"chart")&&!H(e)}else{h=r&&s&&l&&o&&N(e.template,"chart")}break;case"presentationVariant":case"selectionVariant":if(!e.addNewCard){h=r&&!B(e)&&!e.staticContent&&N(e.template,"kpiHeader")}else{h=r&&s&&l&&o&&!(Array.isArray(e.selectionPresentationVariant)&&e.selectionPresentationVariant.length)&&N(e.template,"selecionOrPresentation")}break;case"kpiHeader":h=n&&!M(e)&&N(e.template,t);break;case"lineItem":case"chart":if(!e.addNewCard){h=r&&!B(e)&&N(e.template,t)}else{h=r&&s&&l&&o&&N(e.template,t,e.addNewCard)}break;case"chartSPVorKPI":h=r&&B(e)&&!H(e)&&N(e.template,t);break;case"presentationVariantSPVorKPI":case"selectionVariantSPVorKPI":h=r&&B(e)&&!H(e)&&!e.staticContent&&N(e.template,"kpiHeader");break;case"showViewName":h=a&&r;break;case"showDefaultView":if(a&&r){if(e.defaultViewSelected!=e.selectedKey){h=true}}else{h=false}break;case"showEntitySet":if(a&&r){if(e.selectedKey>0&&e.tabs[e.selectedKey-1].entitySet){h=true}else{h=false}}else{h=false}break;case"showMore":case"removeVisual":case"lineItemSubTitle":case"lineItemTitle":case"staticLink":case"links":var m=(e.template==="sap.ovp.cards.linklist"||e.template==="sap.ovp.cards.v4.linklist")&&!!e.staticContent;if(t==="staticLink"){h=m&&!!e.staticContent[i].targetUri}else if(t==="links"){h=m&&!!e.staticContent[i].semanticObject}else if(t==="removeVisual"){h=m&&(!!e.staticContent[i].targetUri||!!e.staticContent[i].semanticObject)}else{h=m}break;case"selectCardType":h=n&&s;break;case"addKPIHeader":h=n&&s&&l&&N(e.template,t);break;case"setEntitySet":h=r&&s&&l;break;case"setCardProperties":h=n&&s&&l&&o&&N(e.template,t,e.addNewCard);break;case"setGeneralCardProperties":h=n&&s&&l&&o;break;case"setAnnotationCardProperties":h=r&&s&&l&&o;break;case"subTitleRequired":h=s&&l&&o&&e.addKPIHeaderCheckBox;break;case"addODataSelect":if(!e.addNewCard){h=r&&N(e.template,t)}else{h=r&&s&&l&&o&&N(e.template,t)}break;case"isViewSwitchSupportedCard":case"showViewSwitch":h=s&&l&&(o||!!e.showViewSwitchButton)&&N(e.template,t);break;case"dataSource":h=n;break;case"dataSourceExisting":h=!e.newDataSource;break;case"dataSourceNew":h=e.newDataSource;break;case"addCustomActions":h=n&&N(e.template,t);break;default:break}return h}function W(e,t,a,i){if(t){return!!i&&!!t[e]}else{return!!i&&!!a[e]}}function z(e){var t=false;this.oVisibility.viewSwitchEnabled=false;this.oVisibility.showViewSwitch=false;if(!this.bAddNewCardFlag){if(N(e.template,"isViewSwitchSupportedCard")&&!H(e)){if(e.tabs&&e.tabs.length){t=true;this.oVisibility.showViewSwitch=true}this.oVisibility.viewSwitchEnabled=true}}else{if(e.tabs&&e.tabs.length){t=true;this.oVisibility.showViewSwitch=U(e,"showViewSwitch")}this.oVisibility.viewSwitchEnabled=U(e,"isViewSwitchSupportedCard")}this.oVisibility.cardPreview=U(e,"cardPreview");this.oVisibility.stopResizing=U(e,"stopResizing",t);this.oVisibility.toleranceRangeHighValue=U(e,"toleranceRangeHighValue",t);this.oVisibility.toleranceRangeLowValue=U(e,"toleranceRangeLowValue",t);this.oVisibility.deviationRangeHighValue=U(e,"deviationRangeHighValue",t);this.oVisibility.deviationRangeLowValue=U(e,"deviationRangeLowValue",t);this.oVisibility.noOfRows=U(e,"noOfRows",t);this.oVisibility.noOfColumns=U(e,"noOfColumns",t);this.oVisibility.title=U(e,"title",t);this.oVisibility.subTitle=U(e,"subTitle",t);this.oVisibility.valueSelectionInfo=U(e,"valueSelectionInfo",t);this.oVisibility.listType=U(e,"listType",t);this.oVisibility.listFlavor=U(e,"listFlavor",t);this.oVisibility.listFlavorForLinkList=U(e,"listFlavorForLinkList",t);if((e.template==="sap.ovp.cards.linklist"||e.template==="sap.ovp.cards.v4.linklist")&&!!e.staticContent){var a=e.staticContent,i={},n={},r={},o={};for(var s=0;s<a.length;s++){var l=a[s].index;i[l]=U(e,"staticLink",null,s);n[l]=U(e,"links",null,s);r[l]=U(e,"removeVisual",null,s);o[l]=U(e,"showMore",null,s)}this.oVisibility.staticLink=i;this.oVisibility.links=n;this.oVisibility.removeVisual=r;this.oVisibility.showMore=o}this.oVisibility.lineItemTitle=U(e,"lineItemTitle");this.oVisibility.lineItemSubTitle=U(e,"lineItemSubTitle");this.oVisibility.showViewName=U(e,"showViewName",t);this.oVisibility.showDefaultView=U(e,"showDefaultView",t);this.oVisibility.showEntitySet=U(e,"showEntitySet",t);this.aVariantNames.forEach(function(a){this.oVisibility[a.sPath]=U(e,a.sPath,t)&&!!e[a.sPath]&&!!e[a.sPath].length}.bind(this));this.oVisibility.kpiHeader=U(e,"kpiHeader",t)&&!!e["dataPoint"]&&!!e["dataPoint"].length;this.oVisibility.dynamicSwitchSubTitle=U(e,"dynamicSwitchSubTitle",t);this.oVisibility.dynamicSwitchStateSubTitle=U(e,"dynamicSwitchStateSubTitle",t);this.oVisibility.dataSource=U(e,"dataSource",t);this.oVisibility.dataSourceExisting=U(e,"dataSourceExisting",t);this.oVisibility.dataSourceNew=U(e,"dataSourceNew",t);this.oVisibility.selectCardType=U(e,"selectCardType",t);this.oVisibility.addKPIHeader=U(e,"addKPIHeader",t);this.oVisibility.setEntitySet=U(e,"setEntitySet",t);this.oVisibility.setCardProperties=U(e,"setCardProperties",t);this.oVisibility.setGeneralCardProperties=U(e,"setGeneralCardProperties",t);this.oVisibility.subTitleRequired=U(e,"subTitleRequired",t);this.oVisibility.dataPointSelectionMode=U(e,"dataPointSelectionMode",t);var d;for(var s=0;s<this.aVisiblePropertiesForAnnotation.length;s++){if(this.oVisibility[this.aVisiblePropertiesForAnnotation[s].sProperty]){d=true;break}}this.oVisibility.setAnnotationCardProperties=d?U(e,"setAnnotationCardProperties",t):false;this.oVisibility.addODataSelect=U(e,"addODataSelect",t);this.oVisibility.addCustomActions=U(e,"addCustomActions",t);this.oVisibility.moveToTheTop=false;this.oVisibility.moveUp=false;this.oVisibility.moveDown=false;this.oVisibility.moveToTheBottom=false;this.oVisibility.delete=false}function Y(e){var t=e.getProperty("/staticContent");for(var a=0;a<t.length;a++){t[a].index="Index--"+(a+1)}e.setProperty("/staticContent",t)}function j(e){var t=0;for(var a=e.length-1;a>=0;a--){if(/^\d+$/.test(e[a])){t=parseInt(e[a],10);break}}return t}function G(e){var t=e&&e.metaModel&&e.metaModel.oModel;var a=r.isODataV4(t);var i=parseInt(e.selectedKey,10);if(e.lineItem){e.lineItem.forEach(function(t){if(a&&t.value==="@"+e.annotationPath||t.value===e.annotationPath){e.lineItemQualifier=t.name}})}if(e.tabs&&e.tabs.length&&i){e.viewName=e.tabs[i-1].value;e.isDefaultView=false;if(i===e.defaultViewSelected){e.isDefaultView=true}}var n=e.sortOrder;e.sortOrder="descending";if(n&&n.toLowerCase()!=="descending"){e.sortOrder="ascending"}e.isExtendedList=false;if(e.listType==="extended"){e.isExtendedList=true}e.bInsightsEnable=false;if(e.enableAddToInsights){e.bInsightsEnable=true}var o=Q(e);var s=X(e);if(o&&s){var l=s.substring(1);var d=e.entityType&&e.entityType[l];var p=e;if(e.tabs&&e.tabs.length){if(i===0){p=e.tabs[e.defaultViewSelected-1]}else{p=e.tabs[i-1]}}$(p,d);var c=["deviationRangeLowValue","deviationRangeHighValue","toleranceRangeLowValue","toleranceRangeHighValue"];if(e.tabs&&e.tabs.length&&i){c.forEach(function(t){e.tabs[i-1][t]=p[t]?p[t].toString():p[t]})}c.forEach(function(t){e[t]=p[t]?p[t].toString():p[t]})}e.isBarList=false;if(e.listFlavor==="bar"){e.isBarList=true}e.hasKPIHeader=false;if(e.dataPointAnnotationPath){e.hasKPIHeader=true}return e}function $(e,t){var a=t.CriticalityCalculation.ImprovementDirection.EnumMember||"";var i=e.deviationRangeLowValue||o.getNumberValue(t.CriticalityCalculation.DeviationRangeLowValue);var n=e.deviationRangeHighValue||o.getNumberValue(t.CriticalityCalculation.DeviationRangeHighValue);var r=e.toleranceRangeLowValue||o.getNumberValue(t.CriticalityCalculation.ToleranceRangeLowValue);var s=e.toleranceRangeHighValue||o.getNumberValue(t.CriticalityCalculation.ToleranceRangeHighValue);if(a.endsWith("Minimize")||a.endsWith("Minimizing")&&(s&&n)){e.toleranceRangeHighValue=s;e.deviationRangeHighValue=n}else if(a.endsWith("Maximize")||a.endsWith("Maximizing")&&(r&&i)){e.deviationRangeLowValue=i;e.toleranceRangeLowValue=r}else if(a.endsWith("Target")&&(r&&i&&s&&n)){e.toleranceRangeLowValue=r;e.toleranceRangeHighValue=s;e.deviationRangeLowValue=i;e.deviationRangeHighValue=n}}function Q(e){var t=o.getConfig();var a=e.entityType&&e.entityType[e.chartAnnotationPath];var i=a&&a.ChartType&&a.ChartType.EnumMember;var n=i&&i.split("/")[1];var r=n&&n.toLowerCase();var s=Object.values(t).find(function(e){return e.default&&e.default.type&&e.default.type.toLowerCase()===r||e.time&&e.time.type&&e.time.type.toLowerCase()===r});return s&&s.default&&s.default.properties&&s.default.properties.semanticColor||false}function X(e){var t=e.entityType&&e.entityType[e.chartAnnotationPath];var a=t&&t.MeasureAttributes;var i=a&&a[0];var n=i&&i.DataPoint&&i.DataPoint.AnnotationPath;return n}function q(e){var t=e&&e.metaModel&&e.metaModel.oModel;var a=r.isODataV4(t);var i=e.kpiAnnotationPath;var n=e.template;var o=a?e.entityType.$Type:e.entityType;var s="";if(i&&o&&n==="sap.ovp.cards.charts.analytical"){var l=o[i];var d=l&&l.Detail;if(d&&d.RecordType==="com.sap.vocabularies.UI.v1.KPIDetailType"&&d.SemanticObject&&d.Action){s="#"+d.SemanticObject.String+"-"+d.Action.String}}e["KPINav"]=s}function J(e){var t=[],a=e.metaModel,i=!!a?a.getODataEntityContainer().entitySet:[],n=a&&a.getODataEntityContainer().namespace+".";i.forEach(function(i){if(!e.addNewCard){var r=v.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[i.name]),o=a.getODataEntityType(i.entityType)["sap:label"];t.push({name:R(o,r),value:i.name})}else{var r=v.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[i.name]),o=a.getODataEntityType(i.entityType)["sap:label"],s=i.entityType.split(n)[1];t.push({name:R(o,r),value:i.name,entityType:s})}});if(t.length>0){e["allEntitySet"]=t}}function Z(e){var t=e.metaModel,a=t.getObject("/"),i=Object.keys(a),n=[],r=[];for(var o=0;o<i.length;o++){if(i[o].startsWith("$")){continue}n.push({name:i[o],entityType:a[i[o]].$Type})}var s=t.getData();var l=s.$EntityContainer;var d=l?l.split("."):"";d.pop();var p=d.join(".")+".";n.forEach(function(t){var a=v.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[t.name]);var i=s&&s[t.entityType]&&s[t.entityType]["sap:label"];if(!e.addNewCard){r.push({name:R(i,a),value:t.name})}else{var n=t.entityType.split(p)[1];r.push({name:R(i,a),value:t.name,entityType:n})}});if(r.length>0){e["allEntitySet"]=r}}function ee(e){var t=e.metaModel&&e.metaModel.getObject("/dataServices/schema")&&e.metaModel.getObject("/dataServices/schema")[0].entityType;if(t){t.forEach(function(t){var a=0;this.aVariantNames.forEach(function(e){for(var i in t){if(i.indexOf(e.sVariant)!==-1){a++}}});if(!a){e.allEntitySet=e.allEntitySet.filter(function(e){return e.entityType!==t.name})}}.bind(this))}}function te(e){var t=e&&e.metaModel&&e.metaModel.oModel;var a=r.isODataV4(t);var i;if(a){i=e.metaModel.getData()["$Annotations"][e.entityType.$Type]}else{i=e.entityType}if(!e["allEntitySet"]){if(a){Z(e)}else{J(e)}}q(e);if(e.addNewCard){ee.call(this,e)}this.aVariantNames.forEach(function(t){var n=[],r=1;for(var o in i){if(i.hasOwnProperty(o)&&o.indexOf(t.sVariant)!==-1){if(t.sVariant===".LineItem"){var s={name:S.getText("OVP_KEYUSER_LABEL_LINEITEM_OPTIONS",[r]),value:a?o.substring(1):o,fields:a?k(i,o):_(i,o)};n.push(s);r++}else{n.push({name:a?k(i,o):_(i,o),value:a?o.substring(1):o})}}}if(n.length!==0){e[t.sPath]=n}});if(a){var n=ge(e);e["modelProperties"]=n.map(function(e){return{name:e,value:e}})}else if(e.entityType&&e.entityType.property){e["modelProperties"]=e.entityType.property.map(function(e){return{name:e.name,value:e.name}})}if(!!e.tabs&&e.tabs.length){var o=false,s=e.tabs[e.tabs.length-1].value,l=s.split(" ");e.newViewCounter=j(l);e.defaultViewSelected=e.selectedKey;e.isViewResetEnabled=false;e.aViews=[{text:S&&S.getText("OVP_KEYUSER_LABEL_MAIN_VIEW"),key:0,isLaterAddedView:false,isViewResetEnabled:false}];o=e.tabs.some(function(e){return e.dataPointAnnotationPath});e.tabs.forEach(function(t,a){var i=t.value;if(o&&!t.dataPointAnnotationPath&&t.dataPoint&&t.dataPoint.length){t.dataPointAnnotationPath=t.dataPoint[0].value}if(a+1===e.selectedKey){i=t.value;if(S){i+=" ("+S.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")"}else{i+=" (Default view)"}}e.aViews.push({text:i,key:a+1,initialSelectedKey:a+1,isLaterAddedView:false,isViewResetEnabled:false})})}else if(N(e.template,"isViewSwitchSupportedCard")){e.newViewCounter=0;e.aViews=[{text:S.getText("OVP_KEYUSER_SHOWS_DIFFERENT_VIEWS"),key:0,initialSelectedKey:0,isLaterAddedView:false,isViewResetEnabled:false}]}return e}function ae(e){var t=e.getData();var a=r.getUshellContainer();var i=[];if(a){a.getServiceAsync("Navigation").then(function(a){a.getLinks().then(function(n){var n=n&&n[0];var r=[];for(var o=0;o<n.length;o++){r.push({target:{shellHash:n[o].intent}});i.push({name:n[o].text,value:n[o].intent})}a.isNavigationSupported(r).then(function(a){var n=[];for(var r=0;r<a.length;r++){if(a[r].supported===true&&i[r]){n.push({name:i[r].name,value:i[r].value})}}if(n.length>0){t["links"]=n}e.refresh()}).catch(function(e){w.error(e)})}).catch(function(e){w.error(e)})})}}function ie(e){this.oResetButton.setEnabled(e)}function ne(e){this.oSaveButton.setEnabled(e);var t=this.oMessagePopOver.getModel(),a=t.getProperty("/Counter/Error");this.bError=a>0}function re(e){var t=new RegExp("http(s)?://(www.)?[a-z0-9]+([-.]{1}[a-z0-9]+)*.[a-z]{2,5}(:[0-9]{1,5})?(/.*)?","i");return t.test(e)}function oe(e,t){if(t==="targetUri"){return!re(e)&&(!!e||e==="")}else{return!e.trim().length}}function se(e){var t=e.getParameter("path"),a="",i,n,r,o,s,l;if(t==="/title"||t==="title"||t==="/viewName"||t==="targetUri"||t==="value"){var d=e.getParameter("value"),p=oe(d,t),c,u=e.getParameter("context");if(t==="/viewName"){c=e.getSource().getProperty("/selectedKey");a=v.getText("OVP_KEYUSER_INPUT_ERROR_VIEW_NAME");t="/tabs/"+(c-1)+"/value"}if(t==="value"){a=v.getText("OVP_KEYUSER_INPUT_ERROR_VIEW_NAME");t=u.getPath()+"/"+t}if(t.indexOf("/title")!==-1){a=v.getText("OVP_KEYUSER_INPUT_ERROR")}if(u&&u.getPath().indexOf("staticContent")!==-1){i=u.getPath().split("/");if(t==="title"){a=v.getText("OVP_KEYUSER_INPUT_ERROR_RECORD_TITLE")+(parseInt(i[i.length-1],10)+1)}else if(t==="targetUri"){a=v.getText("OVP_KEYUSER_INPUT_ERROR_RECORD_URL")+" "+(parseInt(i[i.length-1],10)+1)}t=u.getPath()+"/"+t}r=this.oMessagePopOver.getModel();o=r.getProperty("/Messages");s=r.getProperty("/Counter/All");l=r.getProperty("/Counter/Error");if(p){ne.bind(this)(true);for(n=0;n<o.length;n++){if(o[n].fieldName===t){o.splice(n,1);s--;l--;n--}}o.push({type:"Error",title:a,fieldName:t,counter:l+1});s++;l++}else{ne.bind(this)(true);for(n=0;n<o.length;n++){if(o[n].fieldName===t){o.splice(n,1);s--;l--;n--}}}r.setProperty("/Messages",o);r.setProperty("/Counter/All",s);r.setProperty("/Counter/Error",l);r.refresh(true)}else if(t==="/staticContent,title"||t==="/staticContent,targetUri"||t==="/tabs,value"){i=t.split(",");r=this.oMessagePopOver.getModel();o=r.getProperty("/Messages");s=r.getProperty("/Counter/All");l=r.getProperty("/Counter/Error");ne.bind(this)(true);for(n=0;n<o.length;n++){if(o[n].fieldName.indexOf(i[0])!==-1&&o[n].fieldName.indexOf(i[1])!==-1){o.splice(n,1);s--;l--;n--}}r.setProperty("/Messages",o);r.setProperty("/Counter/All",s);r.setProperty("/Counter/Error",l);r.refresh(true)}}function le(){var e=this.oMessagePopOver.getModel();e.setProperty("/Messages",[]);e.setProperty("/Counter/All",0);e.setProperty("/Counter/Error",0);e.setProperty("/Counter/Success",0);e.setProperty("/Counter/Warning",0);e.setProperty("/Counter/Information",0);e.refresh(true)}function de(){var e=new p({text:"Show more information",href:"",target:"_blank"});var t=new d({type:"{type}",title:"{title}",description:"{description}",subtitle:"{subtitle}",counter:"{counter}",groupName:"{fieldName}",link:e});this.oMessagePopOver=new l({items:{path:"/Messages",template:t}});var a={Counter:{All:0,Error:0,Success:0,Warning:0,Information:0},Messages:[]};var i=new g(a);this.oMessagePopOver.setModel(i);this.oMessagePopOverButton.setModel(i)}function pe(e,t){var a=e.byId("sapOvpSettingsForm");if(a){var i=a.getDomRef();if(i){i.style.width=t}}}function ce(e){var t=this.dialogBox.getContent()[0],a=t.getModel(),i=t.getModel("deviceMediaProperties");switch(e.name){case"S":case"M":i.setProperty("/deviceMedia","Column");pe(t,"100%");break;case"L":case"XL":default:i.setProperty("/deviceMedia","Row");pe(t,"calc(100% - "+(a.getProperty("/dialogBoxWidth")+1)+"rem)");break}i.refresh(true)}function ue(){s.media.detachHandler(ce.bind(this),null,"SettingsViewRangeSet");s.media.removeRangeSet("SettingsViewRangeSet")}function fe(){s.media.initRangeSet("SettingsViewRangeSet",[520,760,960],"px",["S","M","L","XL"]);s.media.attachHandler(ce.bind(this),null,"SettingsViewRangeSet");ce.bind(this)(s.media.getCurrentRange("SettingsViewRangeSet"))}function ge(e){var t=e.entitySet,a=e.metaModel,i=a.getObject("/"+t),n=i.$Type,r=a.getObject("/"+n),o=Object.keys(r);var s=o.filter(function(e){return!e.startsWith("$")});return s}var ve={dialogBox:undefined,oSaveButton:undefined,oResetButton:undefined,oMessagePopOverButton:undefined,oMessagePopOver:undefined,oAppDescriptor:undefined,oOriginalAppDescriptor:undefined,oMainComponent:undefined,oAppComponent:undefined,oNewDataSources:{},sApplicationId:"",oi18nModel:undefined,iContentHeightForDialog:38,iContentHeightForDialogWithViewSwitch:33,aVariantNames:n.aVariantNames,aVisiblePropertiesForAnnotation:n.aVisiblePropertiesForAnnotation,getDataSources:T,removeDataSources:I,setDataSources:O,attachWindowResizeHandler:fe,detachWindowResizeHandler:ue,settingFormWidth:pe,addKPINavApplicationName:q,addManifestSettings:G,setVisibilityForFormElements:z,getVisibilityOfElement:U,checkForEmptyString:R,enableResetButton:ie,enableSaveButton:ne,checkClonedCard:K,resetErrorHandling:le,createErrorCard:E,setErrorMessage:D,getQualifier:A,getTrimmedDataURIName:L,addSupportingObjects:te,oVisibility:n.oVisibility,bError:false,bNewStaticLinkListCardFlag:false,bNewKPICardFlag:false,bAddNewCardFlag:false,aListType:n.aListType,aListFlavour:n.aListFlavour,aDataPointSelectionMode:n.aDataPointSelectionMode,aSortOrder:n.aSortOrder,aCardType:n.aCardType,aLinkListFlavour:n.aLinkListFlavour,verifyCardsMaxLimitExceeded:he,getDialogBox:function(a){return new Promise(function(i,o){if(!this.dialogBox){this.oSaveButton=new t("settingsSaveBtn",{text:v.getText("save"),type:"Emphasized"});var l=new t("settingsCancelBtn",{text:v.getText("cancelBtn")});this.oResetButton=new t("settingsResetBtn",{text:v.getText("resetCardBtn")});this.oMessagePopOverButton=new t("settingsMessagePopOverBtn",{text:"{/Counter/All}",type:"Emphasized",icon:"sap-icon://message-popup",visible:"{= ${/Counter/All} === 0 ? false : true}"}).addStyleClass("sapOvpSettingsMessagePopOverBtn");this.dialogBox=new e("settingsDialog",{title:v.getText("settingsDialogTitle"),buttons:[this.oMessagePopOverButton,this.oSaveButton,l,this.oResetButton],afterClose:function(e){var t=this.dialogBox.getContent()[0],a=t.byId("sapOvpSettingsLineItemTitle"),i=t.byId("sapOvpSettingsLineItemSubTitle");if(a){a.destroy()}if(i){i.destroy()}this.bNewStaticLinkListCardFlag=false;this.bNewKPICardFlag=false;this.bAddNewCardFlag=false;this.newDataSource=false;this.dialogBox.destroyContent();this.detachWindowResizeHandler()}.bind(this)});this.dialogBox.setBusyIndicatorDelay(0);l.attachPress(function(e){this.dialogBox.close()}.bind(this))}this.oResetButton.setVisible(!this.bNewKPICardFlag);de.bind(this)();var d=this.bNewStaticLinkListCardFlag||this.bNewKPICardFlag||this.bAddNewCardFlag;var p=a.getComponentInstance(),c=p.getRootControl().getModel("ovpCardProperties"),u;this.oi18nModel=p.getComponentData().i18n;if(this.bNewStaticLinkListCardFlag){u={title:"New Title",subTitle:"New Subtitle",staticContent:[],listFlavor:"standard",template:"sap.ovp.cards.linklist",layoutDetail:c.getProperty("/layoutDetail")}}else if(this.bNewKPICardFlag){var m=p.getComponentData().mainComponent.getView().getModel("JSONModelForSSB").getProperty("/d/results"),y=m[0];u={entitySet:y.ODataEntityset,kpiAnnotationPath:"com.sap.vocabularies.UI.v1.KPI#"+y.KPIQualifier,title:y.GroupTitle,subTitle:y.KPITitle,template:"sap.ovp.cards.charts.analytical",layoutDetail:c.getProperty("/layoutDetail"),selectedKPI:y,errorStatusText:undefined,KPIData:m}}else if(this.bAddNewCardFlag){u={addNewCard:true,newDataSource:false,title:"",subTitle:"",cardType:this.aCardType,aListType:this.aListType,aListFlavour:this.aListFlavour,valueSelectionInfo:"",navigation:this.aDataPointSelectionMode,aLinkListFlavour:this.aLinkListFlavour,authorization:""}}else{u=c.getData()}var C=h({},u);C=te.call(this,C);C=this.addManifestSettings(C);var S=new g(C),w=a.getDomRef().offsetHeight,O=new g(s.system),I=new g({deviceMedia:"Row"}),T=p.getComponentData(),L=T.mainComponent,E=T.appComponent,D=d?"":T.cardId;this.oAppComponent=E;this.oAppDescriptor=L._getCardFromManifest(D);this.sApplicationId=L._getApplicationId();this.oMainComponent=L;this.oOriginalAppDescriptor=E._getOvpCardOriginalConfig(D);O.setDefaultBindingMode("OneWay");C.dialogBoxHeight=w;C.dialogBoxWidth=20;var A=[];if(C.customParams||C.staticParameters){S.setProperty("/addCustomParameters",true);if(C.staticParameters&&Object.keys(C.staticParameters).length){for(var R in C.staticParameters){A.push({key:R,value:C.staticParameters[R]})}S.setProperty("/aAllStaticParameters",A)}}else{S.setProperty("/addCustomParameters",false)}var x=r._getLayer();var _=r.getQueryParameterValue("fiori-tools-rta-mode");if(_){S.setProperty("/layer",x);S.setProperty("/bFioriToolsRTAMode",_);if(C.objectStreamCardsSettings&&C.objectStreamCardsSettings.customActions){S.setProperty("/addCustomActions",true)}else{S.setProperty("/addCustomActions",false)}var k=p.getComponentData().appComponent.sId;var M=P.getElementById(k+"---mainView").getModel("i18n");var F=M.oData.bundle&&M.oData.bundle.oi18nModel;if(Array.isArray(F)&&F[0]&&F[0].aPropertyFiles[0]&&F[0].aPropertyFiles[0].mProperties){var B=F[0].aPropertyFiles[0].mProperties;var K=[];var H=[];var U=[];var W=[];if(!C.addNewCard){var z=n.oI18nKeyValueProperty;for(var R in z){if(R==="title"){H.push({key:"",value:C[R]})}if(R==="subTitle"){U.push({key:"",value:C[R]})}if(R==="valueSelectionInfo"){W.push({key:"",value:C[R]})}}for(var R in B){if(B.hasOwnProperty(R)){H.push({key:R,value:B[R]})}}for(var R in B){if(B.hasOwnProperty(R)){U.push({key:R,value:B[R]})}}for(var R in B){if(B.hasOwnProperty(R)){W.push({key:R,value:B[R]})}}S.setProperty("/ai18nPropertiesAndTitle",H);S.setProperty("/ai18nPropertiesAndSubTitle",U);S.setProperty("/ai18nPropertiesAndValSelInfo",W)}for(var R in B){if(B.hasOwnProperty(R)){K.push({key:R,value:B[R]})}}S.setProperty("/ai18nProperties",K)}}if(C.template==="sap.ovp.cards.linklist"||C.template==="sap.ovp.cards.v4.linklist"){S.setProperty("/listFlavorName",v.getText("OVP_KEYUSER_CAROUSEL"))}else{S.setProperty("/listFlavorName",v.getText("OVP_KEYUSER_BARLIST"))}if(C.layoutDetail==="resizable"){var j=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table"];if(!C.defaultSpan){C.defaultSpan={};S.setProperty("/defaultSpan/cols",S.getProperty("/cardLayout/colSpan"));S.setProperty("/defaultSpan/rows",j.indexOf(C.template)>-1?S.getProperty("/cardLayout/noOfItems"):S.getProperty("/cardLayout/rowSpan"))}else{if(!C.defaultSpan.rows){S.setProperty("/defaultSpan/rows",j.indexOf(C.template)>-1?S.getProperty("/cardLayout/noOfItems"):S.getProperty("/cardLayout/rowSpan"))}if(!C.defaultSpan.cols){S.setProperty("/defaultSpan/cols",S.getProperty("/cardLayout/colSpan"))}}C.NoOfColumns=[];var G=1,$=6;for(var Q=G;Q<=$;Q++){C.NoOfColumns.push({value:Q})}if(N(C.template,"chart")||C.template==="sap.ovp.cards.linklist"||C.template==="sap.ovp.cards.v4.linklist"){var X=a.getComponentInstance().getComponentData().mainComponent,q=X.getLayout(),J=q.getDashboardLayoutUtil(),Z=L._getCardId(a.getId()),ee=J.calculateCardProperties(Z),ie=J._getCardController(Z).getView().byId("bubbleText")?43:0,ne=ee.headerHeight+ee.dropDownHeight+ie+50,re=Math.ceil(ee.minCardHeight/J.getRowHeightPx())+1;C.NoOfRows=[];C.NoOfRows.push({name:"None",value:0});C.NoOfRows.push({name:"Small",value:re});C.NoOfRows.push({name:"Standard",value:Math.ceil((ne+480)/J.getRowHeightPx())+1});if(this.bNewStaticLinkListCardFlag||this.bNewKPICardFlag){S.setProperty("/defaultSpan/cols",1);S.setProperty("/defaultSpan/rows",re)}}}if(C.addNewCard){S.setProperty("/addViewSwitchCheckBox",false);S.setProperty("/addKPIHeaderCheckBox",false);var oe=[];var le=L.oCardsModels;if(le){for(var R in le){if(R.indexOf("kpi_card_model_")<0){oe.push(Object.assign({},{Title:R},le[R]))}}S.setProperty("/datasources",oe);S.setProperty("/datasourcesFromManifest",oe)}}var pe={};var ce=new g(pe);ae(ce);if((C.template==="sap.ovp.cards.linklist"||C.template==="sap.ovp.cards.v4.linklist")&&C.staticContent){Y(S);S.setProperty("/lineItemId","linkListItem--1");S.setProperty("/lineItemIdCounter",C.staticContent.length)}if(C.template==="sap.ovp.cards.charts.analytical"){var ue=L._getCardId(a.getId());S.setProperty("/NewKPICard",this.bNewKPICardFlag);S.setProperty("/selectedKPICardID",ue)}this.setVisibilityForFormElements(C);var fe=new g(this.oVisibility);if(!this.bAddNewCardFlag){S.attachPropertyChange(se.bind(this))}var ge={id:"settingsView",viewName:"sap.ovp.cards.rta.SettingsDialog",type:f.XML,preprocessors:{xml:{bindingContexts:{ovpCardProperties:S.createBindingContext("/")},models:{ovpCardProperties:S,deviceSystemProperties:O}}}};b.create(ge).then(function(e){e.setModel(ce,"staticCardProperties");var t=v.oResourceModel;e.setModel(S);e.setModel(t,"ovpResourceModel");e.setModel(I,"deviceMediaProperties");e.setModel(fe,"visibility");if(this.oi18nModel){e.setModel(this.oi18nModel,"@i18n")}this.dialogBox.addContent(e);this.attachWindowResizeHandler();if(!this.bAddNewCardFlag){var n=e.byId("dialogCard");if(!n.getVisible()){n=e.byId("dialogCardNoPreview");var r=e.getModel().getProperty("/template").split("."),o=r[r.length-1],s=v.getText("OVP_KEYUSER_NO_CARD_PREVIEW_MSG",[o]);n.setTitle(s)}else{n.setWidth(C.dialogBoxWidth+"rem")}}V(a,e,d);this.dialogBox.open();e.getController().settingsResolve=i}.bind(this))}.bind(this))}};ve.fnEditCardHandler=function(e,t){var a=e.getComponentInstance().getComponentData().mainComponent,i=a.getLayout(),n=a.getUIModel();return ve.getDialogBox(e).then(function(t){var o=[{appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_changeCard",content:t.appDescriptorChange}},{selectorControl:r.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"editCardSettings",content:t.flexibilityChange}}];if(t.viewSwitchChange){o.push({selectorControl:r.getApp().getLayout(),changeSpecificData:{changeType:"viewSwitch",content:t.viewSwitchChange}})}if(n.getProperty("/containerLayout")==="resizable"){var s=i.getDashboardLayoutModel(),l=i.getDashboardLayoutUtil(),d=a._getCardId(e.getId()),p=s.getCardById(d),c=l.calculateCardProperties(d),u=s.getColCount(),f="C"+u,g=t.flexibilityChange.newAppDescriptor.settings.defaultSpan,v,h=[];if(g&&g.cols){o.forEach(function(e){if(e.changeSpecificData.changeType==="editCardSettings"){var t=e.changeSpecificData.content.oldAppDescriptor;t.settings.defaultSpan={rowSpan:p.dashboardLayout.rowSpan,colSpan:p.dashboardLayout.colSpan,showOnlyHeader:p.dashboardLayout.showOnlyHeader}}});if(g.rows===0){p.dashboardLayout.autoSpan=false;v=Math.ceil((c.headerHeight+2*l.CARD_BORDER_PX)/l.getRowHeightPx())}else{p.dashboardLayout.autoSpan=true;var m=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table"];if(m.indexOf(p.template>-1)){p.dashboardLayout.noOfItems=g.rows}else{v=g.rows}}s._arrangeCards(p,{row:v,column:g.cols},"resize",h);s._removeSpaceBeforeCard(h);h.forEach(function(e){var t={};t.dashboardLayout={};t.cardId=e.content.cardId;t.dashboardLayout[f]=e.content.dashboardLayout;o.push({selectorControl:r.getApp().getLayout(),changeSpecificData:{changeType:"dragOrResize",content:t}})})}}return o})};ve.fnCloneCardHandler=function(e,t){var i=e.getComponentInstance().getComponentData().mainComponent;if(he(i)){return Promise.resolve([])}return a.getPayLoadForCloneCard(e).then(function(t){return[{appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_addNewCard",content:t.appDescriptorChange}},{selectorControl:r.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"newCardSettings",content:t.flexibilityChange}}]})};ve.fnAddStaticLinkListCardHandler=function(e,t){var a=e.getComponentInstance().getComponentData().mainComponent;if(he(a)){return Promise.resolve([])}ve.bNewStaticLinkListCardFlag=true;return ve.getDialogBox(e).then(function(t){return[{appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_addNewCard",content:t.appDescriptorChange}},{selectorControl:r.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"newCardSettings",content:t.flexibilityChange}}]})};ve.fnAddKPICardHandler=function(e,t){var a=e.getComponentInstance().getComponentData().mainComponent;if(he(a)){return Promise.resolve([])}ve.bNewKPICardFlag=true;return ve.getDialogBox(e).then(function(t){var a=[{appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_addNewCard",content:t.appDescriptorChange}},{selectorControl:r.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"newCardSettings",content:t.flexibilityChange}}];if(t.addODataAnnotation){a.push({appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_app_addAnnotationsToOData",content:t.addODataAnnotation}})}return a})};ve.fnAddNewCardHandler=function(e,t){var a=e.getComponentInstance().getComponentData().mainComponent;if(he(a)){return Promise.resolve([])}ve.bAddNewCardFlag=true;return ve.getDialogBox(e).then(function(t){var a=[{appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_addNewCard",content:t.appDescriptorChange}},{selectorControl:r.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"newCardSettings",content:t.flexibilityChange}}];if(t.addODataAnnotation){a.push({appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_app_addAnnotationsToOData",content:t.addODataAnnotation}})}return a})};ve.fnRemoveCardHandler=function(e,t){return new Promise(function(t,i){c.confirm(v.getText("OVP_KEYUSER_MESSAGE_BOX_WARNING_MESSAGE_DELETE"),{actions:[c.Action.DELETE,c.Action.CANCEL],icon:c.Icon.WARNING,title:v.getText("OVP_KEYUSER_MESSAGE_BOX_TITLE_DELETE"),initialFocus:c.Action.CANCEL,onClose:function(n){if(n==="DELETE"){t(a.getPayLoadForRemoveCard(e))}else{i(null)}}})}).then(function(t){var a=[{appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_removeCard",content:t.appDescriptorChange}},{selectorControl:r.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"removeCardContainer",content:t.flexibilityChange}}];if(t.removeDataSourceChange){t.removeDataSourceChange.forEach(function(t){a.push({appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_app_removeDataSource",content:t}})})}return a},function(e){return[]})};function he(e){var t=e&&e.getAllowedNumberOfCards();var a=t&&t.numberOfCards;var i=t&&t.errorMessage;var n=e&&e.getUIModel().getProperty("/aOrderedCards");var r=n&&n.filter(function(e){return e.visibility===true});if(r&&r.length>=a){c.warning(i,{actions:c.Action.OK,emphasizedAction:c.Action.OK});return true}return false}return ve},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/ViewCacheHelper", ["sap/ui/core/cache/CacheManager","sap/ui/core/Component","sap/ovp/app/OVPLogger"],function(e,r,n){"use strict";var a=new n("ovp.cards.ViewCacheHelper");function t(e){var n;while(e){var a=r.getOwnerComponentFor(e);if(a){e=n=a}else{if(e instanceof r){n=e}e=e.getParent&&e.getParent()}}return n}function o(e){var r=t(e);var n=r&&r.getMetadata().getName();var a=[n||window.location.host+window.location.pathname,e.getId().split("_Tab")[0]];var o=a.join("_");return Promise.resolve(o)}function i(r){return o(r).then(function(r){return e.delWithFilters({prefix:r})}).catch(function(e){a.error(e)})}return{clearViewCacheForTabbedCard:i}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/charts/OVPChartFormatter", ["sap/viz/library","sap/viz/ui5/format/ChartFormatter","sap/viz/ui5/api/env/Format","sap/ui/core/format/NumberFormat","sap/ui/core/format/DateFormat"],function(t,e,r,a,n){"use strict";var i=10;var o=[{prefix:"CURR",fn:c},{prefix:"axisFormatter",fn:f},{prefix:"0.0%",fn:m},{prefix:"tooltipNoScaleFormatter",fn:u}];var s=["YearMonthDay","YearMonth","MMM","YearQuarter","Quarter","YearWeek","Week"];function c(t,e){var r;if(t===-1){r=a.getCurrencyInstance({style:"short",currencyCode:false})}else{r=a.getFloatInstance({style:"short",currencyCode:false,minFractionDigits:t,maxFractionDigits:t})}return r.format(Number(e))}function f(t,e){var r;if(t===-1){r=a.getFloatInstance({style:"short"})}else{r=a.getFloatInstance({style:"short",minFractionDigits:t,maxFractionDigits:t?t:1})}return r.format(Number(e))}function m(t,e){var r;if(t===-1){r=a.getPercentInstance({style:"short",minFractionDigits:1,maxFractionDigits:1})}else{r=a.getPercentInstance({style:"short",minFractionDigits:t,maxFractionDigits:t})}return r.format(Number(e))}function u(t,e){var r;if(t===-1){r=a.getFloatInstance({minFractionDigits:0,currencyCode:false})}else{r=a.getFloatInstance({style:"short",currencyCode:false,shortRefNumber:0,showScale:false,minFractionDigits:t,maxFractionDigits:t})}return r.format(Number(e))}function l(t,e){if(e.constructor===Date){var r=n.getDateTimeInstance({pattern:t});if(t==="YearMonthDay"){r=n.getDateInstance({style:"medium"})}if(t==="YearMonth"||t==="MMM"){r=n.getDateTimeInstance({format:"MMM"})}if(t==="YearQuarter"||t==="Quarter"){r=n.getDateTimeInstance({format:"QQQ"})}if(t==="YearWeek"||t==="Week"){r=n.getDateTimeInstance({format:"www"})}e=r.format(e,true)}return e}return{registerCustomFormatters:function(){var t=e.getInstance();var a=[];o.forEach(function(t){a.push({name:t.prefix,fn:t.fn.bind(null,2)});for(var e=-1;e<=i;e++){var r="/"+e+"/";a.push({name:t.prefix+r,fn:t.fn.bind(null,e)})}});s.forEach(function(t){a.push({name:t,fn:l.bind(null,t)})});a.forEach(function(e){t.registerCustomFormatter(e.name,e.fn)});r.numericFormatter(t)}}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/charts/OVPVizDataHandler", ["sap/ui/core/Control","sap/ui/model/json/JSONModel","sap/ovp/cards/generic/base/analytical/Utils","sap/ovp/app/resources","sap/base/util/each","sap/base/util/merge","sap/ovp/cards/generic/base/analytical/OVPVizDatahelper"],function(e,t,a,r,s,i,n){"use strict";return e.extend("sap.ovp.cards.charts.OVPVizDataHandler",{metadata:{aggregations:{data:{type:"sap.ui.core.Element"},aggregateData:{type:"sap.ui.core.Element"},content:{multiple:false}},properties:{chartType:{defaultValue:false},dependentDataReceived:{defaultValue:false},scale:{defaultValue:""},entitySet:{}}},renderer:function(e,t){e.openStart("div",t).openEnd();if(t.getContent()){e.renderControl(t.getContent())}e.close("div")},mergeDatasets:function(e,a,o){var l=this;var p=this.getModel();var u=e.mParameters;var d=i({},this.dataSet);if(u){var g=u.select.split(",")}var v=e.getPath().substring(1);var c=-1;if(v){c=v.indexOf("Parameters")}if(c>=0){v=v.substr(0,v.indexOf("Parameters"))}var f=p.getMetaModel();var m=this.getEntitySet();var h=f.getODataEntitySet(m);var y=f.getODataEntityType(h.entityType);var D=[];var P=[];for(var S=0;S<y.property.length;S++){if(y.property[S]["com.sap.vocabularies.Analytics.v1.Measure"]||y.property[S].hasOwnProperty("sap:aggregation-role")&&y.property[S]["sap:aggregation-role"]==="measure"){if(g&&g.indexOf(y.property[S].name)!==-1){D.push(y.property[S].name)}}else{if(g&&g.indexOf(y.property[S].name)!==-1){P.push(y.property[S].name)}}}if(d&&d.results){for(var S=0;S<d.results.length-2;S++){for(var b=0;b<D.length;b++){d.results[0][D[b]]=Number(d.results[0][D[b]])+Number(d.results[S+1][D[b]])}}var C=d.__count-d.results.length;var O={};O.results=[];O.results[0]=d.results[0];var A;if(d.__count>d.results.length){var x=i({},this.aggregateSet);if(x&&x.results&&d.results.length<d.__count){s(D,function(e){x.results[0][D[e]]=String(Number(l.aggregateSet.results[0][D[e]])-Number(O.results[0][D[e]]))});s(P,function(e){x.results[0][P[e]]=r.getText("OTHERS_DONUT",[C+1])});x.results[0].$isOthers=true;A=x.results[0]}}if(A){a.results.push(A)}var T=o.getModel("ovpCardProperties");var V=T&&T.getProperty("/bEnableStableColors");var M=T&&T.getProperty("/colorPalette");var E=y[T&&T.getProperty("/chartAnnotationPath")];if(E.DimensionAttributes.length===1&&V&&o.getVizType()==="donut"&&M&&M instanceof Object){var R=E.DimensionAttributes[0].Dimension.PropertyPath;var B=o.getVizProperties();if(!B){var z={plotArea:{dataPointStyle:{rules:[]}}};B=z}else if(B&&!B.plotArea){B.plotArea={dataPointStyle:{rules:[]}}}B.legend={itemMargin:1.25};if(o&&B&&B.plotArea){if(!B.plotArea.dataPointStyle){B.plotArea.dataPointStyle={rules:[]}}else{B.plotArea.dataPointStyle.rules=[]}var _=f.getODataProperty(y,R);if(_){var N=_["com.sap.vocabularies.Common.v1.Label"]?_["com.sap.vocabularies.Common.v1.Label"].String:R;var w;if(_["com.sap.vocabularies.Common.v1.Text"]){w=_["com.sap.vocabularies.Common.v1.Text"]["Path"]}else if(_["sap:text"]){w=_["sap:text"]}else{w=_}n.cacheValues(M,R,w,N);n.addColorRulesToVizProperties(a,B);n.handleOthersSectionForCharts(x,B)}}o.setVizProperties(B);n.setVizPropertiesForInsightCards(T,o,B)}}var j=new t;j.setData(a.results);o.setModel(j,"analyticalmodel")},updateBindingContext:function(){var r=this.getBinding("data");var s=this;if(this.chartBinding==r){return}else{this.chartBinding=r;if(r){var s=this;r.attachEvent("dataReceived",function(e){s.dataSet=e&&e.getParameter("data");s.oDataClone=i({},s.dataSet);if(s.getChartType()=="donut"&&s.getBinding("aggregateData")!==undefined){if(s.getDependentDataReceived()===true||s.getDependentDataReceived()==="true"){s.mergeDatasets(r,s.oDataClone,s.getContent());s.setDependentDataReceived(false)}else{s.setDependentDataReceived(true)}}else{var o=new t;if(s.dataSet){var l=s.getEntitySet();var p=r.getModel();var u=a.cacheODataMetadata(p);var d=u[l];var g=a.getSemanticProperties(d);var v=g&&g.aTimeAxisProperties||[];var c=g&&g.oTimeAxisPropertiesAndSemantics||{};n.formatDateBasedOnSemantics(v,c,s.dataSet.results);o.setData(s.dataSet.results);s.oDataClone=i({},s.dataSet)}s.getContent().setModel(o,"analyticalmodel");s.mergeDatasets(r,s.oDataClone,s.getContent())}})}e.prototype.updateBindingContext.apply(this,arguments)}n.attachDataReceivedToAggregationBinding.bind(this)()}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * @fileOverview Library to Manage rendering of Viz Charts.
 * Any function that needs to be exported(used outside this file) via namespace should be defined as
 * a function and then added to the return statement at the end of this file
 */
sap.ui.predefine("sap/ovp/cards/charts/VizAnnotationManager", ["sap/ovp/cards/generic/base/analytical/Utils","sap/ui/model/odata/CountMode","sap/ovp/cards/AnnotationHelper","sap/ui/core/format/NumberFormat","sap/ui/core/format/DateFormat","sap/viz/ui5/controls/VizTooltip","sap/ovp/cards/CommonUtils","sap/ovp/cards/OVPCardAsAPIUtils","sap/viz/ui5/data/DimensionDefinition","sap/viz/ui5/data/MeasureDefinition","sap/viz/ui5/controls/common/feeds/FeedItem","sap/ui/core/Element","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/base/util/each","sap/base/util/merge","sap/ovp/app/OVPLogger","sap/ovp/insights/helpers/AnalyticalCard","sap/ovp/cards/NavigationHelper","sap/ovp/cards/Constants","sap/ovp/cards/MetadataAnalyser","sap/ovp/cards/Filterhelper","sap/ovp/cards/generic/base/analytical/VizAnnotationManagerHelper","sap/ui/thirdparty/jquery"],function(e,t,r,a,i,n,o,s,l,u,f,v,p,c,g,m,h,P,d,y,A,E,_,jQuery){"use strict";var T=y.Annotations;var C=y.errorMessages;var b=[T.COLUMNSTACKED_CHARTTYPE,T.DONUT_CHARTTYPE,T.COLUMN_CHARTTYPE,T.BAR_CHARTTYPE,T.VERTICALBULLET_CHARTTYPE,T.LINE_CHARTTYPE,T.COMBINATION_CHARTTYPE,T.BUBBLE_CHARTTYPE];var S=[T.COLUMNSTACKED_CHARTTYPE];var N;var D=new h("OVP.charts.VizAnnotationManager");function I(a,i,n,o,s,l,u){var f="{";if(!a||!a.getSetting("ovpCardProperties")){D.error(C.ANALYTICAL_CONFIG_ERROR);f+="}";return f}var v=a.getSetting("dataModel");var p;if(u&&u.EnumMember){p=u.EnumMember.split("/");if(p&&p[1]==="Donut"){v.setDefaultCountMode(t.Inline)}if(p&&p[1]!="Donut"&&s===undefined){return null}}var c=[];var h=[];var P=[];var d=[];var y=[];var _=[];var b=[];var S=n&&n.Parameters;var N=o&&o.SortOrder;var I=o&&o.MaxItems,M=null;var x;var V;var Y;var L=null;var F=T.TEXT_KEY;var U=T.TEXT_KEY_V4;var K=T.UNIT_KEY;var k=T.UNIT_KEY_V4_ISOCurrency;var w=T.UNIT_KEY_V4_Unit;var B={};if(I){M=I.Int32?I.Int32:I.Int}if(M){if(M==="0"){D.error("OVP-AC: Analytic card Error: maxItems is configured as "+M);f+="}";return f}if(!/^\d+$/.test(M)){D.error("OVP-AC: Analytic card Error: maxItems is Invalid. Please enter an Integer.");f+="}";return f}}var z=a.getSetting("ovpCardProperties"),j=z.getProperty("/parameters"),H=z.getProperty("/metaModel");S=S||!!j;if(S){var G=A.resolveParameterizedEntitySet(v,i,n,j);f+="path: '"+G+"'"}else{f+="path: '/"+i.name+"'"}var W=[];L=a.getSetting("ovpCardProperties").getProperty("/entitySet");if(!v||!L){return f}var X=e.getMetadata(v,L);var q=a.getSetting("ovpCardProperties").getProperty("/cardLayout");var Q=1,$;var J=e.getConfig();var Z;var ee;if(s&&q&&q.colSpan&&q.colSpan>1){$=q.colSpan-Q;for(var te in J){if((ee=J[te].reference)&&J[ee]){var re=m({},J[ee]);J[te]=re}if(te===p[1]||J[te].time&&J[te].time.type===p[1].toLowerCase()){Z=J[te];break}}var ae=e.hasTimeSemantics(s,Z,v,L);if(ae){Z=Z.time}else{Z=Z.default}var ie=a.getSetting("ovpCardProperties").getProperty("/dataStep");if(!ie){if(Z.resize&&Z.resize.hasOwnProperty("dataStep")&&!isNaN(Z.resize.dataStep)){ie=Z.resize.dataStep}}ie=parseInt(ie,10);if($>0&&ie&&!isNaN(ie)){M=parseInt(M,10)+ie*$}}if(n){var z=a.getSetting("ovpCardProperties");W=E.getFilters(z,n)}if(W.length>0){W=E.createExcludeFilters(W,z);f+=", filters: "+JSON.stringify(W)}if(N){var ne=o.SortOrder;if(!ne.length){ne=e.getSortAnnotationCollection(v,o,i)}if(ne.length<1){D.warning(C.CARD_WARNING+C.SORTORDER_WARNING)}else{var oe="";var se;var le;var ue;for(var fe=0;fe<ne.length;fe++){se=ne[fe];ue=se.Property.PropertyPath;b.push(ue);if(typeof se.Descending==="undefined"){le="true"}else{var ve=se.Descending.Bool||se.Descending.Boolean;if(!ve){D.warning(C.CARD_WARNING+C.BOOLEAN_ERROR);le="true"}else{le=ve.toLowerCase()==="true"?"true":"false"}}oe=oe+"{path: '"+ue+"',descending: "+le+"},"}f+=", sorter: ["+oe.substring(0,oe.length-1)+"]"}}var pe=a.getSetting("ovpCardProperties").getProperty("/entityType");g(l,function(e,t){x=t.Measure.PropertyPath;if(t.DataPoint&&t.DataPoint.AnnotationPath){var r=pe[t.DataPoint.AnnotationPath.substring(1)];if(r.ForecastValue&&(r.ForecastValue.PropertyPath||r.ForecastValue.Path)){var a=r.ForecastValue.PropertyPath||r.ForecastValue.Path;y.push(a);if(X&&X[a]){var i;if(X[a][k]){i=X[a][k].Path?X[a][k].Path:undefined}else if(X[a][w]){i=X[a][w].Path?X[a][w].Path:undefined}else if(X[a][K]){i=X[a][K]}if(i){if((y?Array.prototype.indexOf.call(y,i):-1)===-1){y.push(i)}}}}if(r.TargetValue&&(r.TargetValue.PropertyPath||r.TargetValue.Path)){var n=r.TargetValue.PropertyPath||r.TargetValue.Path;y.push(n);if(X&&X[n]){var i;if(X[n][k]){i=X[n][k].Path?X[n][k].Path:undefined}else if(X[n][w]){i=X[n][w].Path?X[n][w].Path:undefined}else if(X[n][K]){i=X[n][K]}if(i){if((y?Array.prototype.indexOf.call(y,i):-1)===-1){y.push(i)}}}}}y.push(x);if(X&&X[x]){if(X[x][U]){if(X[x][U].String&&x!=X[x][U].String){y.push(X[x][U].String?X[x][U].String:x)}else if(X[x][U].Path&&x!=X[x][U].Path){y.push(X[x][U].Path?X[x][U].Path:x)}}else if(X[x][F]&&x!=X[x][F]){y.push(X[x][F]?X[x][F]:x)}}if(X&&X[x]){var i;if(X[x][k]){i=X[x][k].Path?X[x][k].Path:undefined}else if(X[x][w]){i=X[x][w].Path?X[x][w].Path:undefined}else if(X[x][K]){i=X[x][K]}if(i){if((y?Array.prototype.indexOf.call(y,i):-1)===-1){y.push(i)}}}});g(s,function(e,t){x=t.Dimension.PropertyPath;c.push(x);if(X&&X[x]){if(X[x][U]){if(X[x][U].String&&x!=X[x][U].String){c.push(X[x][U].String?X[x][U].String:x)}else if(X[x][U].Path&&x!=X[x][U].Path){Y=X[x][U].Path;var r=Y.split("/");if(r.length>1){V=R(H,pe,Y);if(V!==""){c.push(Y);h.push(V);d=O(H,pe,Y);if(d.length>0){P=P.concat(d)}}}else{c.push(Y?Y:x)}}}else if(X[x][F]&&x!=X[x][F]){c.push(X[x][F]?X[x][F]:x)}}});if(P.length>0){var ce=0;while(ce<P.length){if(c.indexOf(P[ce])!==-1){P.splice(ce,1)}else{ce++}}}if(y.length>0){g(y,function(e,t){B[t]=true})}if(c.length>0){g(c,function(e,t){B[t]=true})}f+=", parameters: {select:'"+[].concat(c,y).join(",");var ge=H.getODataEntityType(i.entityType);if(ge){var me=r.getRequestFields(o);if(me&&me.length>0){g(me,function(e,t){if(!B.hasOwnProperty(t)){B[t]=true;_.push(t)}});if(_.length>0){f+=","+_.join(",")}}}if(b.length>0){var he=[];g(b,function(e,t){if(!B.hasOwnProperty(t)){he.push(t)}});if(he.length>0){f+=","+he.join(",")}}if(h.length>0){f+="'"+","+" expand:'"+h.join(",")}var Pe=r.checkFilterPreference(a.getSetting("ovpCardProperties"));if(Pe){f+="', custom: {cardId: '"+a.getSetting("ovpCardProperties").getProperty("/cardId")+"', _requestFrom: 'ovp_internal'}}"}else{f+="', custom: {_requestFrom: 'ovp_internal'}}"}if(p&&p[1]==="Donut"&&s===undefined){f+=", length: 1"}else if(p&&p[1]==="Donut"&&s&&M){f+=", length: "+(parseInt(M,10)+1)}else if(M){f+=", length: "+M}f+="}";return f}I.requiresIContext=true;function R(e,t,r){var a="";var i=r.split("/");if(i.length>1){for(var n=0;n<i.length-1;n++){var o=e.getODataAssociationEnd(t,i[n]);if(o){t=e.getODataEntityType(o.type);if(a){a=a+"/"}a=a+i[n]}else{return a}}}return a}function O(e,t,r){var a=[];var i=[];var n;var o=r.split("/");if(o.length>1){for(var s=0;s<o.length-1;s++){var l=e.getODataAssociationEnd(t,o[s]);if(l){t=e.getODataEntityType(l.type);if(t){i=t&&t.key&&t.key.propertyRef;for(var u=0;u<i.length;u++){n=o[s]+"/"+i[u].name;a.push(n)}}}}}return a}function M(e,t){var r=false;var a;if(e.DataPoint&&e.DataPoint.AnnotationPath){var i=t[e.DataPoint.AnnotationPath.substring(1)];if(i&&i.ForecastValue&&(i.ForecastValue.PropertyPath||i.ForecastValue.Path)){r=true;a=e}}if(r===true){return a}else{D.warning(C.CARD_WARNING+C.INVALID_FORECAST);return undefined}}function x(e,t){var r=false;var a;if(e.DataPoint&&e.DataPoint.AnnotationPath){var i=t[e.DataPoint.AnnotationPath.substring(1)];if(i&&i.TargetValue&&(i.TargetValue.PropertyPath||i.TargetValue.Path)){r=true;a=e}}if(r===true){return a}else{D.warning(C.CARD_WARNING+C.INVALID_TARGET);return undefined}}function V(e,t){var r;g(t,function(t,a){if(a.name===e){if(a["com.sap.vocabularies.Common.v1.Label"]){r=a["com.sap.vocabularies.Common.v1.Label"].String?a["com.sap.vocabularies.Common.v1.Label"].String:a["com.sap.vocabularies.Common.v1.Label"].Path}else if(a["sap:label"]){r=a["sap:label"]}return false}});return r}function Y(e,t){var r=true;if(t==="line"||t==="column"||t==="bar"){g(e,function(e,t){if(t.getUid()==="valueAxis"||t.getUid()==="categoryAxis"){if(t.getValues().length!=1){r=false;D.warning(C.CARD_WARNING+C.INVALID_DIMMEAS);return false}}})}else if(t==="vertical_bullet"){g(e,function(e,t){if(t.getUid()==="actualValues"||t.getUid()==="categoryAxis"){if(t.getValues().length!=1){r=false;D.warning(C.CARD_WARNING+C.INVALID_DIMMEAS);return false}}})}if(r===true){return true}}function L(t,r){var a=t.getModel();var i=t.getVizType();if(i!="line"&&i!="bubble"){return}if(!r){r=i==="line"?"categoryAxis":"valueAxis"}var n=t.getModel("ovpCardProperties").getProperty("/entitySet");if(!a||!n){return}var o=e.getMetadata(a,n);var s=t.getFeeds();for(var l=0;l<s.length;l++){if(s[l].getUid()===r){var u=s[l].getValues();if(!u){return}for(var f=0;f<u.length;f++){var v=o[u[f]];if(v&&v[T.TYPE_KEY]!="Edm.DateTime"){return}}var p={categoryAxis:{title:{visible:false}},legend:{itemMargin:1.25}};t.setVizProperties(p);var c=t&&t.getModel("ovpCardProperties");if(c&&c.getProperty("/bInsightEnabled")){var g=t&&t.getId();P.setVizPropertyMap(g,p)}return}}}function F(e,t,r){}function U(t,a,i){var n=r.isODataV4Context(t);var o="";var s=e.getConfig(a,n);var l,u;if(!s){return o}o=s.default.type;l=t.getSetting("dataModel");u=t.getSetting("ovpCardProperties").getProperty("/entitySet");if(e.hasTimeSemantics(i,s,l,u,n)){o=s.time.type}return o}U.requiresIContext=true;function K(e,t){var r={boolFlag:false};g(e,function(e,a){if(a.DataPoint&&a.DataPoint.AnnotationPath){var i=t[a.DataPoint.AnnotationPath.substring(1)];_.updateFlagValueForDataPoint(i,r)}});if(r.boolFlag===true&&e.length>1){D.warning(C.CARD_WARNING+C.INVALID_SEMANTIC_MEASURES)}return r.boolFlag}function k(e,t,r,a){var i=_.getMeasureName(e,r,a);var n=e.DataPoint.AnnotationPath;var o=t[n.substring(1)];return _.getSemanticLegends(o,true,i,a)}function w(e,t,r){if(e[t[r].PropertyPath][T.EDM_TYPE]===T.EDM_INT32){return true}return false}function B(e,t,r){if(e[t[r].PropertyPath][T.EDM_TYPE]===T.EDM_INT64){return true}return false}function z(e,t,r){if(!e.length){return}var a=r==="dimension"?"Dimension":"Measure";var i=[];g(e,function(e,t){if(!t||!t[a]||!t[a].PropertyPath){D.error(C.INVALID_CHART_ANNO);return false}i.push(t[a].PropertyPath)});var n=jQuery.map(t.feeds,function(e){if(e.type===r){if(e.role){return e.role.split("|")}return[]}});n=jQuery.grep(n,function(e,t){return(n?Array.prototype.indexOf.call(n,e):-1)===t}).join(", ");D.error(C.CARD_ERROR+C.INVALID_REDUNDANT+r+"(s) "+i.join(", ")+". "+C.ALLOWED_ROLES+t.type+C.CHART_IS+n)}function j(t,r,a){var i,o,v,c,h;var d,A,E,I,R,O=false;var L;var F,U,j;var X,$=[],J=[];var Z=[];var ee;var te;var re=a&&a.getView();var ae,se;var le=re&&re.getModel("ui");var ue=le&&le.getProperty("/chartSettings");i=t.getModel("ovpCardProperties");if(s.checkIfAPIIsUsed(a)){O=i&&i.getData()&&i.getData().showDataLabel}h=ue?ue.showDataLabel:O;d=t.getVizType();A=e.getConfig();for(var fe in A){if((te=A[fe].reference)&&A[te]){var ve=m({},A[te]);A[fe]=ve}if(A[fe].default.type===d||A[fe].time&&A[fe].time.type===d){E=A[fe];break}}if(!E){D.error(C.CARD_ERROR+"in "+C.CARD_CONFIG+C.CARD_CONFIG_ERROR+d+" "+C.CARD_CONFIG_JSON);return}if(!i){D.error(C.CARD_ERROR+"in "+C.CARD_CONFIG+C.NO_CARD_MODEL);return}var pe=t.getModel();var ce=i.getProperty("/entitySet");if(!pe||!ce){return}o=i.getProperty("/entityType");if(!o){D.error(C.CARD_ANNO_ERROR+"in "+C.CARD_ANNO);return}var ge=e.getMetadata(pe,ce);v=i.getProperty("/chartAnnotationPath");if(!v||!(c=o[v])){D.error(C.CARD_ANNO_ERROR+"in "+C.CARD_ANNO);return}var me=G(o,v,t);if(!(I=c.DimensionAttributes)||!I.length){D.error(C.CHART_ANNO_ERROR+"in "+C.CHART_ANNO+" "+C.DIMENSIONS_MANDATORY);return}var he;if(!(R=c.MeasureAttributes)||!R.length){D.error(C.CHART_ANNO_ERROR+"in "+C.CHART_ANNO+" "+C.MEASURES_MANDATORY);return}else{var Pe=R[0].DataPoint?o[R[0].DataPoint.AnnotationPath.substring(1)]:null;var de=Pe&&Pe.ValueFormat&&Pe.ValueFormat.NumberOfFractionalDigits&&Pe.ValueFormat.NumberOfFractionalDigits.Int;he=de?de:0}ee=e.hasTimeSemantics(I,E,pe,ce);if(ee){E=E.time}else{E=E.default}var ye=i.getProperty("/ChartProperties")||i.getProperty("/chartProperties");if(i&&i.getProperty("/tabs")&&ye===undefined){ae=re.byId("ovp_card_dropdown");se=parseInt(ae.getSelectedKey(),10);ye=i.getProperty("/tabs")&&i.getProperty("/tabs")[se-1]&&(i.getProperty("/tabs")[se-1]["ChartProperties"]||i.getProperty("/tabs")[se-1]["chartProperties"])}var Ae=false;var Ee=he>0?"tooltipNoScaleFormatter/"+he.toString()+"/":"tooltipNoScaleFormatter/-1/";var _e=new n({formatString:Ee});_e.connect(t.getVizUid());_e.connect(t.getVizUid());t._oOvpVizFrameTooltip=_e;var Te=[];var Ce=S.indexOf(c.ChartType.EnumMember)>=0;if(Ce&&t&&t.getModel("analyticalmodel")){Te=t.getModel("analyticalmodel").getData()||[]}[E.dimensions,E.measures].forEach(function(e,t){var r=t?R:I;var a=t?"measure(s)":"dimension(s)";if(e.min&&r.length<e.min){D.error(C.CARD_ERROR+"in "+d+" "+C.CARD_LEAST+e.min+" "+a);Ae=true}if(e.max&&r.length>e.max){D.error(C.CARD_ERROR+"in "+d+C.CARD_MOST+e.max+" "+a);Ae=true}});if(Ae){return}var be=true;if(E.properties&&E.properties.hasOwnProperty("hideLabel")&&!E.properties["hideLabel"]){be=false}if(E.type&&(E.type==="timeseries_bullet"||E.type==="timeseries_stacked_column")){_.enableTimeAxisForChart(E,i)}var Se=true;var Ne=false;if(d==="donut"){Ne=true}t.removeAllAggregation();L={legend:{isScrollable:false,itemMargin:1.25},title:{visible:true},interaction:{noninteractiveMode:Se?false:true,selectability:{legendSelection:Ne?true:false,axisLabelSelection:false,mode:"EXCLUSIVE",plotLassoSelection:false,plotStdSelection:true},zoom:{enablement:"disabled"}},plotArea:{window:{start:"firstDataPoint",end:"lastDataPoint"},dataLabel:{visible:h||Ne?true:false,type:"value"},dataPoint:{invalidity:"ignore"},alignment:{vertical:"top"}},categoryAxis:{label:{truncatedLabelRatio:.15}},general:{groupData:false,showAsUTC:true}};if(E.properties&&E.properties.semanticColor===true&&K(R,o)){var De=p.getText("GOOD");var Ie=p.getText("BAD");var Re=p.getText("CRITICAL");var Oe=p.getText("OTHERS");if(R.length===1){var Me=k(R[0],o,ge,t);var De=Me[0]||De,Ie=Me[1]||Ie,Re=Me[2]||Re,Oe=p.getText("OTHERS")}L.plotArea.dataPointStyle={rules:[{callback:function(r){var a=e.mapMeasures(r,ge,R);if(!a){return false}var i=o[a.substring(1)];var n=_.formThePathForCriticalityStateCalculation(r,i,t);if(n===y.Criticality.StateValues.Positive){return true}else if(n==="Positive"){return true}},properties:{color:"sapUiChartPaletteSemanticGoodLight1"},displayName:De},{callback:function(r){var a=e.mapMeasures(r,ge,R);if(!a){return false}var i=o[a.substring(1)];var n=_.formThePathForCriticalityStateCalculation(r,i,t);if(n===y.Criticality.StateValues.Critical){return true}else if(n==="Critical"){return true}},properties:{color:"sapUiChartPaletteSemanticCriticalLight1"},displayName:Re},{callback:function(r){var a=e.mapMeasures(r,ge,R);if(!a){return false}var i=o[a.substring(1)];var n=_.formThePathForCriticalityStateCalculation(r,i,t);if(n===y.Criticality.StateValues.Negative){return true}else if(n==="Negative"){return true}},properties:{color:"sapUiChartPaletteSemanticBadLight1"},displayName:Ie},{callback:function(r){var a=e.mapMeasures(r,ge,R);if(!a){return false}var i=o[a.substring(1)];var n=_.formThePathForCriticalityStateCalculation(r,i,t);if(n===y.Criticality.StateValues.None){return true}else if(n==="Neutral"){return true}},properties:{color:"sapUiChartPaletteSemanticNeutralLight1"},displayName:Oe}]}}var xe=i.getProperty("/bEnableStableColors");var Ve=i.getProperty("/colorPalette");var Ye;if(!xe&&b.indexOf(c.ChartType.EnumMember)>=0&&Ve&&Object.keys(Ve).length>=2&&Object.keys(Ve).length<=4){g(I,function(e,t){if(t&&t.Role&&t.Role.EnumMember==="com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Series"){Ye=t.Dimension&&t.Dimension.PropertyPath;return}});var Le;if(Ye){if(ge&&ge[Ye]){if(ge[Ye][T.LABEL_KEY_V4]){Le=_.getLabelFromAnnotationPath(ge[Ye][T.LABEL_KEY_V4].String?ge[Ye][T.LABEL_KEY_V4].String:ge[Ye][T.LABEL_KEY_V4].Path,t,ge)}else if(ge[Ye][T.LABEL_KEY]){Le=ge[Ye][T.LABEL_KEY]}else if(Ye){Le=Ye}}if(Ve instanceof Array){var Fe=Ve.map(function(e){return e.color});var Ue=Ve.map(function(e){return e.legendText});var Ke=Ue[0]!=undefined?Ue[0]:p.getText("OTHERS");var ke=Ue[1]!=undefined?Ue[1]:p.getText("BAD");var we=Ue[2]!=undefined?Ue[2]:p.getText("CRITICAL");var Be=Ue[3]!=undefined?Ue[3]:p.getText("GOOD")}L.plotArea.dataPointStyle={rules:[{callback:function(e){if(e&&(e[Le]==="3"||e[Le]===3)){if(Ve instanceof Array){if(Ve.length<4){return false}}else if(Ve&&!Ve.hasOwnProperty(3)){return false}return true}},properties:{color:Ve instanceof Array&&Fe.length?Fe[3]:Ve[3]&&Ve[3]["color"]},displayName:Be||Ve[3]&&Ve[3]["legendText"]},{callback:function(e){if(e&&(e[Le]==="2"||e[Le]===2)){if(Ve instanceof Array){if(Ve.length<3){return false}}else if(Ve&&!Ve.hasOwnProperty(2)){return false}return true}},properties:{color:Ve instanceof Array&&Fe.length?Fe[2]:Ve[2]&&Ve[2]["color"]},displayName:we||Ve[2]&&Ve[2]["legendText"]},{callback:function(e){if(e&&(e[Le]==="1"||e[Le]===1)){return true}},properties:{color:Ve instanceof Array&&Fe.length?Fe[1]:Ve[1]&&Ve[1]["color"]},displayName:ke||Ve[1]&&Ve[1]["legendText"]},{callback:function(e){if(e&&(e[Le]==="0"||e[Le]===0)){return true}},properties:{color:Ve instanceof Array&&Fe.length?Fe[0]:Ve[0]&&Ve[0]["color"]},displayName:Ke||Ve[0]&&Ve[0]["legendText"]}]};var ze;if(i&&i.getProperty("/bInsightEnabled")){ze=m({},L.plotArea.dataPointStyle);var je=ge&&ge[Ye]&&ge[Ye].type||"";ze.rules.forEach(function(e,t,r){delete e["callback"];e.dataContext={};if(je){e.dataContext[Le]=je==="Edm.String"?r.length-1-t+"":r.length-1-t}else{e.dataContext[Le]=r.length-1-t+""}})}}}var He=false;var Ge=false;if(c.ChartType.EnumMember===T.SCATTER_CHARTTYPE||c.ChartType.EnumMember===T.BUBBLE_CHARTTYPE||c.ChartType.EnumMember===T.LINE_CHARTTYPE){if(c&&c.AxisScaling&&c.AxisScaling.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisScalingType"){var We=c.AxisScaling;if(We.AutoScaleBehavior&&We.AutoScaleBehavior.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisAutoScaleBehaviorType"){var Xe=We.AutoScaleBehavior;if(Xe.ZeroAlwaysVisible&&Xe.ZeroAlwaysVisible.Bool=="true"){L.plotArea.adjustScale=false;He=true}else if(Xe.DataScope){L.plotArea.adjustScale=true;He=true}}else if(We.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisScalingType"&&We.ScaleBehavior&&We.ScaleBehavior.EnumMember){var qe=We.ScaleBehavior.EnumMember;var Qe=qe.substring(qe.lastIndexOf("/")+1,qe.length);if(Qe=="FixedScale"){Ge=true}}}else if(c&&c.AxisScaling&&c.AxisScaling.EnumMember){var $e=c.AxisScaling.EnumMember.substring(c.AxisScaling.EnumMember.lastIndexOf("/")+1,c.AxisScaling.EnumMember.length);switch($e){case"AdjustToDataIncluding0":L.plotArea.adjustScale=false;He=true;break;case"AdjustToData":L.plotArea.adjustScale=true;He=true;break;case"MinMaxValues":Ge=true;break;default:break}}if(Ge){var Je=[];if(c["MeasureAttributes"][0]&&c["MeasureAttributes"][0].DataPoint&&c["MeasureAttributes"][0].DataPoint.AnnotationPath){var Ze=c["MeasureAttributes"][0].DataPoint.AnnotationPath;var et=Ze.substring(Ze.lastIndexOf("@")+1,Ze.length);if(o&&o[et]){var tt=o[et];if(tt&&tt.MaximumValue&&tt.MaximumValue.Decimal&&tt.MinimumValue&&tt.MinimumValue.Decimal){Je.push({feed:"valueAxis",max:tt.MaximumValue.Decimal,min:tt.MinimumValue.Decimal});He=true}else{D.error(C.ERROR_MISSING_AXISSCALES)}}}if(c.ChartType.EnumMember!==T.LINE_CHARTTYPE&&c["MeasureAttributes"][1]&&c["MeasureAttributes"][1].DataPoint&&c["MeasureAttributes"][1].DataPoint.AnnotationPath){var Ze=c["MeasureAttributes"][1].DataPoint.AnnotationPath;var et=Ze.substring(Ze.lastIndexOf("@")+1,Ze.length);if(o&&o[et]){var tt=o[et];if(tt&&tt.MaximumValue&&tt.MaximumValue.Decimal&&tt.MinimumValue&&tt.MinimumValue.Decimal){Je.push({feed:"valueAxis2",max:tt.MaximumValue.Decimal,min:tt.MinimumValue.Decimal});He=true}else{D.error(C.ERROR_MISSING_AXISSCALES)}}}t.setVizScales(Je)}}U=I.slice();j=R.slice();var rt=0;var at=0;var it;var nt;var ot=false;var st=false;var lt;var ut=[];var ft=[],vt=[];if((d==="column"||d==="bar"||d==="vertical_bullet")&&E.feeds&&E.feeds.length>0){var pt;for(pt=0;pt<E.feeds.length;pt++){if(E.feeds[pt].uid==="color"){E.feeds.splice(pt,1);break}}for(pt=0;pt<E.feeds.length;pt++){if(E.feeds[pt].uid==="categoryAxis"){delete E.feeds[pt].role;break}}if(i.getProperty("/colorPalette")){for(pt=0;pt<E.feeds.length;pt++){if(E.feeds[pt].uid==="categoryAxis"){E.feeds[pt].role="Category";break}}E.feeds.push({uid:"color",min:1,type:"dimension",role:"Series"})}}g(E.feeds,function(r,a){var n=a.uid;var s=[];if(a.type){var v,p,c;if(a.type==="dimension"){v=I.length;p="Dimension";c="dimensions";F=U;X=$}else{v=R.length;p="Measure";c="measures";F=j;X=J}var m=0,h=v;if(a.min){m=m>a.min?m:a.min}if(a.max){h=h<a.max?h:a.max}if(!a.role){var y=F.length;for(var A=0;A<y&&s.length<h;++A){var b=F[A];F.splice(A,1);--y;--A;s.push(b);if(ge[b[p].PropertyPath][T.UNIT_KEY_V4_ISOCurrency]){lt=ge[b[p].PropertyPath][T.UNIT_KEY_V4_ISOCurrency].Path?ge[b[p].PropertyPath][T.UNIT_KEY_V4_ISOCurrency].Path:undefined}else if(ge[b[p].PropertyPath][T.UNIT_KEY_V4_Unit]){lt=ge[b[p].PropertyPath][T.UNIT_KEY_V4_Unit].Path?ge[b[p].PropertyPath][T.UNIT_KEY_V4_Unit].Path:undefined}else if(ge[b[p].PropertyPath][T.UNIT_KEY]){lt=ge[b[p].PropertyPath][T.UNIT_KEY]}if(e.isMeasureCurrency(ge,lt)){ot=true}else{st=true}if(!ot){rt=e.checkNumberFormat(rt,b,o);it=e.getMaxScaleFactor(it,b,o)}else{at=e.checkNumberFormat(at,b,o);nt=e.getMaxScaleFactor(nt,b,o)}}}else{var S=a.role.split("|");g(S,function(t,r){if(s.length===h){return false}var a=F.length;for(var i=0;i<a&&s.length<h;++i){var n=F[i];if(n&&n.Role&&n.Role.EnumMember&&n.Role.EnumMember.split("/")&&n.Role.EnumMember.split("/")[1]){var l=n.Role.EnumMember.split("/")[1];if(l===r){F.splice(i,1);--a;--i;s.push(n);if(ge[n[p].PropertyPath][T.UNIT_KEY_V4_ISOCurrency]){lt=ge[n[p].PropertyPath][T.UNIT_KEY_V4_ISOCurrency].Path?ge[n[p].PropertyPath][T.UNIT_KEY_V4_ISOCurrency].Path:undefined}else if(ge[n[p].PropertyPath][T.UNIT_KEY_V4_Unit]){lt=ge[n[p].PropertyPath][T.UNIT_KEY_V4_Unit].Path?ge[n[p].PropertyPath][T.UNIT_KEY_V4_Unit].Path:undefined}else if(ge[n[p].PropertyPath][T.UNIT_KEY]){lt=ge[n[p].PropertyPath][T.UNIT_KEY]}if(e.isMeasureCurrency(ge,lt)){ot=true}else{st=true}if(!ot){rt=e.checkNumberFormat(rt,n,o);it=e.getMaxScaleFactor(it,n,o)}else{at=e.checkNumberFormat(at,n,o);nt=e.getMaxScaleFactor(nt,n,o)}}}else if((X?Array.prototype.indexOf.call(X,n):-1)===-1){X.push(n)}}});if(s.length<h){g(X,function(t,r){var a;var i;if((a=E[c].defaultRole)&&(S?Array.prototype.indexOf.call(S,a):-1)!==-1&&(i=(F?Array.prototype.indexOf.call(F,r):-1)!==-1)){F.splice(i,1);s.push(r);if(ge[r[p].PropertyPath][T.UNIT_KEY_V4_ISOCurrency]){lt=ge[r[p].PropertyPath][T.UNIT_KEY_V4_ISOCurrency].Path?ge[r[p].PropertyPath][T.UNIT_KEY_V4_ISOCurrency].Path:undefined}else if(ge[r[p].PropertyPath][T.UNIT_KEY_V4_Unit]){lt=ge[r[p].PropertyPath][T.UNIT_KEY_V4_Unit].Path?ge[r[p].PropertyPath][T.UNIT_KEY_V4_Unit].Path:undefined}else if(ge[r[p].PropertyPath][T.UNIT_KEY]){lt=ge[r[p].PropertyPath][T.UNIT_KEY]}if(e.isMeasureCurrency(ge,lt)){ot=true}else{st=true}if(!ot){rt=e.checkNumberFormat(rt,r,o);it=e.getMaxScaleFactor(it,r,o)}else{at=e.checkNumberFormat(at,r,o);nt=e.getMaxScaleFactor(nt,r,o)}if(s.length===h){return false}}})}if(s.length<m){D.error(C.CARD_ERROR+C.MIN_FEEDS+d+" "+C.FEEDS_OBTAINED+s.length+" "+C.FEEDS_REQUIRED+m+" "+C.FEEDS);return false}}if(s.length){var O=[];var M;if(!(M=t.getDataset())){D.error(C.NO_DATASET);return false}N=o;g(s,function(e,r){if(!r||!r[p]||!r[p].PropertyPath){D.error(C.INVALID_CHART_ANNO);return false}var a=r[p].PropertyPath;var o=a;var s=a;var f=null;if(ge&&ge[a]){if(ge[a][T.LABEL_KEY_V4]){if(ge[a][T.LABEL_KEY_V4].String){o=_.getLabelFromAnnotationPath(ge[a][T.LABEL_KEY_V4].String,t,ge)}else if(ge[a][T.LABEL_KEY_V4].Path){o=ge[a][T.LABEL_KEY_V4].Path}else{o=a}}else if(ge[a][T.LABEL_KEY]){o=ge[a][T.LABEL_KEY]}else if(a){o=a}if(ge[a][T.TEXT_KEY_V4]){s=ge[a][T.TEXT_KEY_V4].String?ge[a][T.TEXT_KEY_V4].String:ge[a][T.TEXT_KEY_V4].Path}else if(ge[a][T.TEXT_KEY]){s=ge[a][T.TEXT_KEY]}else if(a){s=a}f=ge[a][T.TYPE_KEY]||null}var v,c={};c[a]=s;if((f==="Edm.DateTime"||f==="Edm.DateTimeOffset")&&s===a){v="{= ${"+a+"} ? ${"+a+"} : ''}"}else{if(ge[a]&&ge[a][T.TEXT_KEY_V4]&&ge[a][T.TEXT_KEY_V4][T.TEXT_ARRANGEMENT_ANNO]){var g,m;g=ge[a][T.TEXT_ARRANGEMENT_ANNO];m=g&&g.EnumMember;if(!m){g=ge[a][T.TEXT_KEY_V4][T.TEXT_ARRANGEMENT_ANNO];m=g&&g.EnumMember}if(!m){var h=N;g=h&&h[T.TEXT_ARRANGEMENT_ANNO];m=g&&g.EnumMember}var d;switch(m){case"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst":v="{"+s+"}"+" "+"("+"{"+a+"}"+")";if(Ce&&Te.length){d=H(a,s,Te);for(var y in d){d[y]=d[y]+" "+"("+y+")"}Z[a]=d}break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast":v="{"+a+"}"+" "+"("+"{"+s+"}"+")";if(Ce&&Te.length){d=H(a,s,Te);for(var A in d){d[A]=A+" "+"("+d[A]+")"}Z[a]=d}break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly":v="{"+s+"}";if(Ce&&Te.length){Z[a]=H(a,s,Te)}break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeperate":v="{"+a+"}"+" "+"("+"{"+s+"}"+")";break;default:v="{"+a+"}";c[a]=a;break}}else{v="{"+s+"}"}if(i&&i.getProperty("/bInsightEnabled")){P.setDimensionPath(i.getData().cardId,a,v)}}O.push(o);if(p==="Dimension"){if(n==="waterfallType"){var E=new l({name:o,value:"{"+a+"}"})}else{var E=new l({name:o,value:"{"+a+"}",displayValue:v})}var b=ge[a][T.SEMANTICS_KEY];var S=ge[a]["com.sap.vocabularies.Common.v1.IsCalendarYear"]&&ge[a]["com.sap.vocabularies.Common.v1.IsCalendarYear"].Bool||ge[a]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]&&ge[a]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"].Bool||ge[a]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]&&ge[a]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"].Bool||ge[a]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]&&ge[a]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"].Bool;if(ee&&(f==="Edm.DateTime"||S||f==="Edm.DateTimeOffset"||b&&b.lastIndexOf("year",0)===0)){E.setDataType("date")}M.addDimension(E);if((vt?Array.prototype.indexOf.call(vt,o):-1)===-1){vt.push(o)}}else{M.addMeasure(new u({name:o,value:"{"+a+"}"}));if((ft?Array.prototype.indexOf.call(ft,o):-1)===-1&&n!="bubbleWidth"){ft.push(o)}}});t.addFeed(new f({uid:n,type:p,values:O}));if(n==="categoryAxis"){L[n]={title:{visible:be?false:true,text:O.join(", ")},label:{formatString:ot?"CURR":"axisFormatter",truncatedLabelRatio:.15}}}else{L[n]={title:{visible:be?false:true,text:O.join(", ")},label:{formatString:ot?"CURR":"axisFormatter"}}}ut.push(L[n]);if(E.hasOwnProperty("vizProperties")){var x=0;var V=E.vizProperties.length;var Y;var K;for(;x<V;x++){if(E.vizProperties[x].hasOwnProperty("value")){K=E.vizProperties[x].value}if(E.vizProperties[x].hasOwnProperty("path")){Y=E.vizProperties[x].path.split(".");var k=Y.length;var w,B;var z;for(var G=0,z=Y[0],w=L,B=ye;G<k;++G){if(G===k-1){if(B&&B.hasOwnProperty(z)){if(d==="donut"&&(B[z]==="value"||B[z]==="percentage")){K=B[z]}else if(d!="donut"){K=B[z]}}if(He&&z!="adjustScale"||!He&&z==="adjustScale"||!He&&z!="adjustScale"){w[z]=K}break}w[z]=w[z]||{};w=w[z];if(B){B[z]=B[z]||{};B=B[z]}z=Y[G+1]}}}}if(a.hasOwnProperty("vizProperties")){var r=0;var W=a.vizProperties.length;var q;var Q;var te;for(;r<W;r++){if(a.vizProperties[r].hasOwnProperty("method")){Q=a.vizProperties[r].method;switch(Q){case"count":q=O.length;if(a.vizProperties[r].hasOwnProperty("min")&&q<=a.vizProperties[r].min){q=a.vizProperties[r].min}else if(a.vizProperties[r].hasOwnProperty("max")&&q>=a.vizProperties[r].max){q=a.vizProperties[r].max}break;default:break}}else if(a.vizProperties[r].hasOwnProperty("value")){q=a.vizProperties[r].value}if(a.vizProperties[r].hasOwnProperty("path")){te=a.vizProperties[r].path.split(".");var re=te.length;for(var A=0,ae=te[0],ie=L;A<re;++A){if(A===re-1){ie[ae]=q;break}ie[ae]=ie[ae]||{};ie=ie[ae];ae=te[A+1]}}}}}}});var ct=t.getFeeds();if(E.properties&&E.properties.semanticPattern===true&&Y(ct,d)){g(ct,function(e,r){if(ct[e].getType()==="Measure"&&(ct[e].getUid()==="valueAxis"||ct[e].getUid()==="actualValues")){var a;g(R,function(t,r){var i=V(r.Measure.PropertyPath,ge);if(i===ct[e].getValues()[0]){a=M(r,o);return false}});if(a){var i=V(a.Measure.PropertyPath,ge);var n=o[a.DataPoint.AnnotationPath.substring(1)].ForecastValue.PropertyPath||o[a.DataPoint.AnnotationPath.substring(1)].ForecastValue.Path;var s=V(n,ge);var l=p.getText("ACTUAL",[i]);var f=p.getText("FORECAST",[s]);L.plotArea.dataPointStyle={rules:[{dataContext:{MeasureNamesDimension:i},properties:{color:"sapUiChartPaletteSequentialHue1Light1",lineType:"line",lineColor:"sapUiChartPaletteSequentialHue1Light1"},displayName:l},{dataContext:{MeasureNamesDimension:s},properties:{color:"sapUiChartPaletteSequentialHue1Light1",lineType:"dotted",lineColor:"sapUiChartPaletteSequentialHue1Light1",pattern:"diagonalLightStripe"},displayName:f}]};t.getDataset().addMeasure(new u({name:s,value:"{"+n+"}"}));var v=ct[e].getValues();v.push(s);ct[e].setValues(v)}return false}})}var gt=false;if(Ve&&Ve.dimensionSettings&&Object.keys(Ve.dimensionSettings).length>0){var mt=Object.keys(Ve.dimensionSettings);for(var ht=0;ht<mt.length;ht++){var Pt=mt[ht];var dt=Ve.dimensionSettings[Pt];if(Object.keys(dt).length>10){gt=true;break}}}if(xe&&Ce&&!gt){var yt=[];var At=true;for(var ht=0;ht<I.length;ht++){var Et=I[ht].Dimension.PropertyPath;yt.push(Et)}for(var ht=0;ht<yt.length;ht++){var Pt=yt[ht];if(mt.indexOf(Pt)>-1){var _t=Ve.dimensionSettings[Pt];var Tt=Object.keys(_t);var Ct=[];for(var ht=0;ht<Tt.length;ht++){var bt=_t[Tt[ht]];Ct.push(bt)}At=At&&Ct.every(ne)}}if(At){var St=[];for(var ht=0;ht<yt.length;ht++){var Pt=yt[ht];if(mt.indexOf(Pt)>-1){var _t=Ve.dimensionSettings[Pt];var Tt=Object.keys(_t);var Ct=[];for(var ht=0;ht<Tt.length;ht++){var bt=_t[Tt[ht]];Ct.push(bt)}ie(Ct);for(var Nt=0;Nt<Ct.length;Nt++){var Dt=Ct[Nt].dimensionValue;var It=Ct[Nt].color;var bt={properties:{color:It}};bt.dataContext={};var Rt=W(ge,t,Pt);bt.dataContext[Rt]=Dt;var Ot=Z[Pt]?Z[Pt][Dt]:Dt;bt.displayName=Ot;St.push(bt)}}}L.plotArea.dataPointStyle=L.plotArea.dataPointStyle||{};L.plotArea.dataPointStyle["rules"]=St}else{var St=[];for(var ht=0;ht<yt.length;ht++){var Pt=yt[ht];if(mt.indexOf(Pt)>-1){var _t=Ve.dimensionSettings[Pt];var Tt=Object.keys(_t);var Ct=[];for(var ht=0;ht<Tt.length;ht++){var bt=_t[Tt[ht]];Ct.push(bt)}ie(Ct);var Mt=Ct.map(oe)}}L.legend.order=function(e,t){var r=Mt.indexOf(e);var a=Mt.indexOf(t);return r>a?1:-1}}}if(E.properties&&E.properties.semanticPattern===true&&Y(ct,d)&&t.getVizType()==="vertical_bullet"){g(ct,function(e,r){if(ct[e].getType()==="Measure"&&(ct[e].getUid()==="valueAxis"||ct[e].getUid()==="actualValues")){var a;g(R,function(t,r){var i=V(r.Measure.PropertyPath,ge);if(i===ct[e].getValues()[0]){a=x(r,o);return false}});if(a){var i=o[a.DataPoint.AnnotationPath.substring(1)].TargetValue.PropertyPath||o[a.DataPoint.AnnotationPath.substring(1)].TargetValue.Path;var n=V(i,ge);t.getDataset().addMeasure(new u({name:n,value:"{"+i+"}"}));t.addFeed(new f({uid:"targetValues",type:"Measure",values:[n]}))}return false}})}if(ot&&st){D.warning(p.getText("Currency_non_currency_measure"))}g(ct,function(e,t){var r=t.getProperty("type");if(r==="Measure"){var a=t.getProperty("values");var i=true;var n=c.MeasureAttributes.filter(function(e){return a.indexOf(ge[e[r]["PropertyPath"]][T.LABEL_KEY])>=0||a.indexOf(ge[e[r]["PropertyPath"]][T.LABEL_KEY_V4])>=0});g(n,function(e,t){if(w(ge,t,r)||B(ge,t,r)){i=false}else{i=true;return false}});if(!i){L[t.getProperty("uid")]["label"]["allowDecimals"]=false}}});var xt;if(nt===undefined){nt=""}if(it===undefined){it=""}if(ot){xt=Q(nt,ot)}else{xt=Q(it,ot)}if(r){r.setScale(xt)}var Vt=q(ft,vt,me);var Yt="";g(ct,function(e,t){var r="-1";var a=t.getProperty("type");if(a==="Measure"){var i=ut.filter(function(e){var r=e["title"]["text"].split(",").filter(function(e){if(t.getValues().indexOf(e.trim())>=0){return true}else{return false}});if(r.length>0){return true}else{return false}});if(i&&i.length){var n=t.getValues();if(n&&n.length){g(n,function(e,t){var i=t.trim();var n=R.filter(function(e){if(e["Measure"]&&e["Measure"]["PropertyPath"]){var t=e["Measure"]["PropertyPath"];if(ge[t]&&ge[t][T.LABEL_KEY]===i||ge[t]&&ge[t][T.LABEL_KEY_V4]===i){return true}else{return false}}});if(n&&n.length){var s=n[0];if(!w(ge,s,a)&&!B(ge,s,a)){var l="";if(s&&s["DataPoint"]&&s["DataPoint"]["AnnotationPath"]&&s["DataPoint"]["AnnotationPath"]){l=s["DataPoint"]["AnnotationPath"]&&s["DataPoint"]["AnnotationPath"].substring(1);if(l!=""){var u;u=o[l]&&o[l]["ValueFormat"]&&o[l]["ValueFormat"]["NumberOfFractionalDigits"]&&o[l]["ValueFormat"]["NumberOfFractionalDigits"]["Int"];r=u>r?u:r}}}else{r=r<"0"?"0":r}}})}}if(i&&i[0]&&i[0].label&&i[0].label.formatString){var s=i[0].label.formatString}Yt="";if(ot){if(s==="CURR"){Yt="CURR/"+r.toString()+"/"}else{Yt="axisFormatter/"+r.toString()+"/"}}else{Yt="axisFormatter/"+r.toString()+"/"}if(i&&i[0]){i[0].label.formatString=Yt}}});if(d==="vertical_bullet"){L["valueAxis"]={title:{visible:be?false:true},label:{formatString:Yt}}}var Lt="";var Ft="";if(ot){Lt=at.toString();Ft="CURR/"+at.toString()+"/"}else{Lt=rt.toString();Ft="axisFormatter/"+rt.toString()+"/"}if(d==="donut"||h){L.plotArea.dataLabel.formatString=Ft;if(L.plotArea.dataLabel.type==="percentage"){L.plotArea.dataLabel.formatString="0.0%/"+Lt+"/"}}z(U,E,"dimension");z(j,E,"measure");if(ee){var Ut=I[0].Dimension.PropertyPath;if(ge[Ut][T.SEMANTICS_KEY]==="yearmonth"||ge[Ut]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){L.timeAxis.levels=["year","month"]}else if(ge[Ut][T.SEMANTICS_KEY]==="yearquarter"||ge[Ut]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){L.timeAxis.levels=["year","quarter"]}else if(ge[Ut][T.SEMANTICS_KEY]==="yearweek"||ge[Ut]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){L.timeAxis.levels=["year","week"]}else if(ge[Ut][T.SEMANTICS_KEY]==="year"||ge[Ut]["com.sap.vocabularies.Common.v1.IsCalendarYear"]){L.timeAxis.levels=["year"]}}L.title={text:me?me:Vt,alignment:"left",layout:{respectPlotPosition:false},style:{fontFamily:"72, 72full, Arial, Helvetica, sans-serif !important",fontSize:".875rem",fontWeight:"normal"}};t.setVizProperties(L);if(i&&i.getProperty("/bInsightEnabled")){var Kt=t&&t.getId();var kt=m({},L);if(ze!==undefined){kt.plotArea.dataPointStyle=ze}P.setVizPropertyMap(Kt,kt)}}function H(e,t,r){var a={};for(var i=0;i<r.length;i++){var n=r[i];if(n.hasOwnProperty(e)&&n.hasOwnProperty(t)){a[n[e]]=n[t]}}return a}function G(t,r,a){var i="";var n=t&&t[r]&&t[r].Title;if(n){i=n.String}return e.resolvei18nKeyToChartTitle(a,i)}function W(e,t,r){var a="";if(e&&e[r]){if(e[r][T.LABEL_KEY_V4]){a=_.getLabelFromAnnotationPath(e[r][T.LABEL_KEY_V4].String?e[r][T.LABEL_KEY_V4].String:e[r][T.LABEL_KEY_V4].Path,t,e)}else if(e[r][T.LABEL_KEY]){a=e[r][T.LABEL_KEY]}else if(r){a=r}}return a}function X(t,r){if(t&&(t.getVizType()==="bubble"||t.getVizType()==="scatter")){return}var a,i,n,o;var s;var l=T.UNIT_KEY;var u=T.UNIT_KEY_V4_ISOCurrency;var f=T.UNIT_KEY_V4_Unit;var v;var c=[];if(!(a=t.getModel("ovpCardProperties"))){D.error(C.CARD_ERROR+"in "+C.CARD_CONFIG+C.NO_CARD_MODEL);return}var m=t.getModel();var h=a.getProperty("/entitySet");if(!m||!h){return}i=a.getProperty("/entityType");if(!i){D.error(C.CARD_ANNO_ERROR+"in "+C.CARD_ANNO);return}var P=e.getMetadata(m,h);n=a.getProperty("/chartAnnotationPath");if(!n||!(o=i[n])){D.error(C.CARD_ANNO_ERROR+"in "+C.CARD_ANNO);return}if(!(s=o.MeasureAttributes)||!s.length){D.error(C.CHART_ANNO_ERROR+"in "+C.CHART_ANNO+" "+C.MEASURES_MANDATORY);return}g(s,function(e,t){v=t.Measure.PropertyPath;if(t.DataPoint&&t.DataPoint.AnnotationPath){var r=i[t.DataPoint.AnnotationPath.substring(1)];if(r.ForecastValue&&(r.ForecastValue.PropertyPath||r.ForecastValue.Path)){c.push(r.ForecastValue.PropertyPath||r.ForecastValue.Path)}}c.push(v)});var d=r?r.results:null;var y="";var A=true;var E=[];var _=t.getFeeds();g(_,function(e,t){if(t.getType()==="Measure"){E=E.concat(t.getValues())}});if(d){g(c,function(e,r){var a=W(P,t,r);if((E?Array.prototype.indexOf.call(E,a):-1)!=-1){if(P&&P[r]){var i;if(P[r][u]){i=P[r][u].Path?P[r][u].Path:P[r][u].String}else if(P[r][f]){i=P[r][f].Path?P[r][f].Path:P[r][f].String}else if(P[r][l]){i=P[r][l]}if(!i){A=false;return false}if(i&&P[i]){for(var e=0;e<d.length;e++){var n=d[e];if(A){if(y&&n[i]&&n[i]!=""&&y!=""&&y!=n[i]){A=false;break}}y=n[i];if(!y){A=false;break}}}}}})}var b="";if(A){if(y!=""){b=p.getText("IN_NO_SCALE",[y]);b=" "+b}var S=t.data("aria-label");if(S&&b&&S.indexOf(b)===-1){var N=S+b;t.data("aria-label",N,true)}var I=t.getVizProperties().title&&t.getVizProperties().title.text;if(I){var R=I.indexOf("|");if(R!==-1){var O=I.slice(R+2);if(O!==y){I=I.slice(0,R-1)}}var M={title:{visible:true,text:O===y?I:I+b,alignment:"left",layout:{respectPlotPosition:false},style:{fontFamily:"72, 72full, Arial, Helvetica, sans-serif !important",fontSize:".875rem",fontWeight:"normal"}}};t.setVizProperties(M)}}}function q(e,t,r){var a="",i="",n="";if(r){a=r}if(e&&e.length>1){for(var o=0;o<e.length-1;o++){if(i!=""){i+=", "}i+=e[o]}i=p.getText("MEAS_DIM_TITLE",[i,e[o]])}else if(e){i=e[0]}if(t&&t.length>1){for(var o=0;o<t.length-1;o++){if(n!=""){n+=", "}n+=t[o]}n=p.getText("MEAS_DIM_TITLE",[n,t[o]])}else if(t){n=t[0]}if(a===""){r=p.getText("NO_CHART_TITLE",[i,n])}return r}function Q(e,t){var r=1;var i;if(t){var n=a.getCurrencyInstance({style:"short",currencyCode:false,shortRefNumber:e});i=n.format(Number(r))}else{var o=a.getFloatInstance({style:"short",shortRefNumber:e});i=o.format(Number(r))}var s=i.slice(-1);return s}function $(t,a){t.attachSelectData(function(n){var l=c.bCRTLPressed?c.constants.explace:c.constants.inplace;c.bCRTLPressed=false;var u=t.getModel("ovpCardProperties");var f=t.getModel();var v=u.getProperty("/entitySet");var p=e.getMetadata(f,v);var m=[],h=[];var P={},y={};var A=t.getDataset().getDimensions();var E;for(var _=0;_<A.length;_++){m.push(A[_].getName())}var C=t.getDataset().getBinding("data").getCurrentContexts().map(function(e){return e.getObject()});if(n.getParameter("data")&&n.getParameter("data")[0]&&n.getParameter("data")[0].data){h=Object.keys(n.getParameter("data")[0].data);E=n.getParameter("data")[0].data._context_row_number;var b=t.getDataset().getBinding("data").getContexts()[E];var S=d.getEntityNavigationEntries(b,f,a.getEntityType(),a.getCardPropertiesModel())[0];if(C[E].$isOthers&&C[E].$isOthers===true){var N={},D=[];for(var I=0;I<m.length;I++){for(var R=0;R<h.length;R++){if(m[I]===h[R]){for(var O in p){if(p.hasOwnProperty(O)){var M=p[O][T.LABEL_KEY]||p[O][T.NAME_KEY]||p[O][T.NAME_CAP_KEY];if(M===h[R]){D.push(O)}}}}}}for(var _=0;_<D.length;_++){N[D[_]]=[];for(var I=0;I<C.length-1;I++){if(I!=E){N[D[_]].push(C[I][D[_]])}}}var x={$isOthers:true};var V={getObject:function(){return x},getOtherNavigationDimensions:function(){return N}};if(s.checkIfAPIIsUsed(a)){if(a.checkAPINavigation()){o.onContentClicked(V)}}else{if(S){t.vizSelection([],{clearSelection:true});a.doNavigation(V,S,l)}}}else{for(var I=0;I<m.length;I++){for(var R=0;R<h.length;R++){if(m[I]===h[R]){for(var O in p){if(p.hasOwnProperty(O)){var M=p[O][T.LABEL_KEY_V4]&&p[O][T.LABEL_KEY_V4].String||p[O][T.LABEL_KEY]||p[O][T.NAME_KEY]||p[O][T.NAME_CAP_KEY];if(M.match(/{@i18n>.+}/gi)){var Y=this.getModel("@i18n").getResourceBundle();M=Y.getText(M.substring(M.indexOf(">")+1,M.length-1))}if(M===h[R]){P[O]=C[E][O]}}}}for(var O in C[E]){if(p.hasOwnProperty(O)){y[O]=C[E][O]}}}}if(P){g(Object.keys(P),function(e,t){if(p[t]["type"]==="Edm.String"){if(p[t]["sap:semantics"]==="yearmonth"||p[t]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){P[t]=P[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYMM"}).format(P[t]):P[t]}else if(p[t]["sap:semantics"]==="yearquarter"||p[t]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){P[t]=P[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYQ"}).format(P[t]):P[t]}else if(p[t]["sap:semantics"]==="yearweek"||p[t]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){P[t]=P[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYww"}).format(P[t]):P[t]}else if(p[t]["com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]&&p[t]["com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"].Bool){var r=P[t];if(r.includes(".")){P[t]=r.split(".").reverse().join("")}else if(r.includes("/")){P[t]=r.split("/").reverse().join("")}}}})}if(y){g(Object.keys(y),function(e,t){if(p[t]["type"]==="Edm.String"){if(p[t]["sap:semantics"]==="yearmonth"||p[t]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){y[t]=y[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYMM"}).format(y[t]):y[t]}else if(p[t]["sap:semantics"]==="yearquarter"||p[t]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){y[t]=y[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYQ"}).format(y[t]):y[t]}else if(p[t]["sap:semantics"]==="yearweek"||p[t]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){y[t]=y[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYww"}).format(y[t]):y[t]}else if(p[t]["com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]&&p[t]["com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"].Bool){var r=y[t];if(r.includes(".")){y[t]=r.split(".").reverse().join("")}else if(r.includes("/")){y[t]=r.split("/").reverse().join("")}}}})}var L=u.getProperty("/entityType"),F=L[u.getProperty("/presentationAnnotationPath")];if(L){var U=r.getRequestFields(F);if(U&&U.length>0){g(U,function(e,t){if(!P.hasOwnProperty(t)){P[t]=C[E][t]}})}}var V={getObject:function(){return P},getAllData:function(){return y}};if(s.checkIfAPIIsUsed(a)){if(a.checkAPINavigation()){o.onContentClicked(V)}}else{if(S){t.vizSelection([],{clearSelection:true});a.doNavigation(V,S,l)}}}}})}function J(e){return e.EnumMember.endsWith("Bubble")}function Z(e){var t=false;if(!e||e.constructor!=Array||e.length<1||e[0].constructor!=Object||!e[0].Dimension||!e[0].Dimension.PropertyPath){D.error(C.CHART_ANNO_ERROR+"in "+C.CHART_ANNO+" "+C.DIMENSIONS_MANDATORY);return t}t=true;return t}function ee(e){var t=false;if(!e||e.constructor!=Array||e.length<1||e[0].constructor!=Object||!e[0].Measure||!e[0].Measure.PropertyPath){D.error(C.CHART_ANNO_ERROR+"in "+C.CHART_ANNO+" "+C.MEASURES_MANDATORY);return t}t=true;return t}function te(e){return e.name}function re(t,r,a){var i=r.getModel("ovpCardProperties");var n=e.getMaxItems(r,a);var o=+n.itemsLength;var s=+i.getProperty("/dataStep");if(o&&s){var l=t.colSpan-1;if(l>=0){o+=s*l;ae(r,o)}}}function ae(e,t){var r,a={},i=[];var n=e.getVizType();var o=e.getModel("ovpCardProperties");var s=o.getProperty("/entityType");var l=o.getProperty("/chartAnnotationPath");var u=s[l];var f=e.getParent();var p=f.getBinding("data");a.path=p.getPath();a.parameters={};if(p.mParameters&&p.mParameters.select){a.parameters.select=p.mParameters.select}a.parameters.custom=a.parameters.custom||{};a.parameters.custom._requestFrom="ovp_internal";a.filters=p.aApplicationFilters;a.sorter=p.aSorters;a.length=n==="donut"?t+1:t;a.template=new v;f.bindAggregation("data",a);if(n==="donut"){g(u.MeasureAttributes,function(e,t){i.push(t.Measure.PropertyPath)});r={};r.path=p.getPath();r.parameters={};r.parameters.select=i.join(",");r.filters=p.aApplicationFilters;r.sorter=p.aSorters;r.length=1;r.template=new v;f.bindAggregation("aggregateData",r)}f.updateBindingContext()}function ie(e){e.sort(function(e,t){if(e.index<t.index){return-1}if(e.index>t.index){return 1}return 0})}function ne(e){return e.color!==undefined}function oe(e){return e.dimensionValue}return{constants:T,errorMessages:C,formatItems:I,hideDateTimeAxis:L,checkNoData:F,getChartType:U,checkFlag:K,buildVizAttributes:j,setChartUoMTitle:X,getSelectedDataPoint:$,checkBubbleChart:J,dimensionAttrCheck:Z,measureAttrCheck:ee,getEntitySet:te,reprioritizeContent:re,getChartTitle:G,getNavigationPrefix:R,getAssociationKeys:O,getSapLabel:V,getMeasureDimCheck:Y,getPropertyTextColumnMap:H,getScaleUnit:Q,_sortColorsByIndex:ie,_checkRolesForProperty:z}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/charts/analytical/Component", ["sap/ovp/cards/generic/base/analytical/Component","sap/ovp/cards/charts/VizAnnotationManager"],function(a,e){"use strict";return a.extend("sap.ovp.cards.charts.analytical.Component",{metadata:{properties:{headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.KPIHeader"},contentFragment:{type:"string",defaultValue:"sap.ovp.cards.charts.analytical.analyticalChart"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.charts.analytical.analyticalChart"},enableAddToInsights:{type:"boolean",defaultValue:true}},version:"1.141.0",library:"sap.ovp",includes:[],dependencies:{libs:["sap.viz"],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/charts/analytical/analyticalChart.controller", ["sap/ovp/cards/generic/base/analytical/BaseAnalyticalChart.controller","sap/ovp/cards/charts/VizAnnotationManager","sap/ovp/app/resources","sap/base/util/each","sap/ovp/filter/FilterUtils","sap/ui/Device","sap/ovp/cards/generic/base/analytical/Utils","sap/base/util/isEmptyObject","sap/ui/core/EventBus"],function(t,e,a,i,s,r,o,n,l){"use strict";return t.extend("sap.ovp.cards.charts.analytical.analyticalChart",{onInit:function(){t.prototype.onInit.apply(this,arguments);var e=this;this.eventhandler=function(t,a,i){s.applyFiltersToV2Card(i,e)};this.GloabalEventBus=l.getInstance();if(this.oMainComponent&&this.oMainComponent.isMacroFilterBar){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",e.eventhandler)}},onDataReceived:function(t){var s=this;var l=this.getCardContentContainer();if(!l){return}var d=t.getParameter("data");if(!d||n(d)||!d.results||!d.results.length){var h=this.getOwnerComponent().getComponentData();var p=h&&h.cardId;if(p){var u=this.getOwnerComponent().getComponentData().cardId;if(u&&this.oMainComponent&&this.oMainComponent.aErrorCards.indexOf(u)===-1){this.oMainComponent.createNoDataCard(u)}}}else{var c=this.getView().byId("analyticalChart");var g=this.getView().byId("bubbleText");var v=a.getText("BUBBLESIZE");this.oDataSet.bindData("analyticalmodel>/","");c.setDataset(this.oDataSet);var b=c.getParent();if(!this.isVizPropSet){e.buildVizAttributes(c,b,this);this.isVizPropSet=true;if(g!=undefined){var f=c.getFeeds();i(f,function(t,e){if(f[t].getUid()=="bubbleWidth"){g.setText(v+" "+f[t].getValues())}})}e.hideDateTimeAxis(c)}if(this.getCardPropertiesModel()&&this.getCardPropertiesModel().getData()&&this.getCardPropertiesModel().getData().colorPalette&&c.getVizType()==="stacked_column"){var y=c.getDataset().getDimensions(),C=c.getFeeds(),m,D;for(var P=0;P<C.length;P++){if(C[P].getUid()==="color"){m=C[P].getValues()[0];break}}for(var M=0;M<y.length;M++){if(y[M].getName()===m){D=y[M];break}}if(m&&D){var V={};V["bDescending"]=true;D.setSorter(V)}}var B=t?t.getParameter("data"):null;e.setChartUoMTitle(c,B);if(this.bFlag==true){this.bFlag=false;this.vbLayout.setBusy(false)}else{setTimeout(function(){s.vbLayout.setBusy(false);s.bdataLoadedToEnableAddToInsight=true},0)}e.checkNoData(t,this.getCardContentContainer(),c);if(r.system.phone){if(this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var I=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var S=Math.max(I.dashboardLayout.rowSpan,this.iPreviousRowSpan);this.iPreviousRowSpan=S}if(o.isDataSetEmpty(t)){c.setHeight(50+"px")}else{var T=this._calculateVizFrameHeight();if(T!==undefined&&typeof T==="number"){c.setHeight(T+"px")}}}}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/charts/generic/Component", ["sap/ovp/cards/generic/Component","sap/ovp/cards/jUtils"],function(t,e){"use strict";return t.extend("sap.ovp.cards.charts.generic.Component",{metadata:{properties:{headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.KPIHeader"},selectionAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.SelectionVariant"},chartAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Chart"},presentationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.PresentationVariant"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"},dataPointAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.DataPoint"}},version:"1.141.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}},addTabindex:function(){e.setAttributeToMultipleElements(".tabindex0","tabindex",0);e.setAttributeToMultipleElements(".tabindex-1","tabindex",-1)},onAfterRendering:function(){this.addTabindex()}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/custom/Component", ["sap/ovp/cards/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.custom.Component",{metadata:{properties:{contentFragment:{type:"string"},headerExtensionFragment:{type:"string"},contentPosition:{type:"string",defaultValue:"Middle"},footerFragment:{type:"string"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"},selectionAnnotationPath:{type:"string"},filters:{type:"object"},parameters:{type:"object"},addODataSelect:{type:"boolean",defaultValue:false},includeSearchWithRelevantFilters:{type:"boolean",defaultValue:false}},version:"1.141.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/error/Component", ["sap/ovp/cards/generic/base/error/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.error.Component",{metadata:{properties:{controllerName:{type:"string",defaultValue:"sap.ovp.cards.error.Error"},headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.KPIHeader"}},version:"1.141.0",library:"sap.ovp"}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/error/Error.controller", ["sap/ovp/cards/generic/base/error/BaseError.controller"],function(r){"use strict";return r.extend("sap.ovp.cards.error.Error",{onInit:function(){r.prototype.onInit.apply(this,arguments)},onAfterRendering:function(){r.prototype.onAfterRendering.apply(this,arguments)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/Card.controller", ["sap/ui/core/mvc/Controller","sap/ovp/cards/ActionUtils","sap/ovp/cards/CommonUtils","sap/ovp/cards/OVPCardAsAPIUtils","sap/ui/core/ResizeHandler","sap/ui/core/format/NumberFormat","sap/m/MessageBox","sap/fe/navigation/NavError","sap/ui/model/json/JSONModel","sap/m/Dialog","sap/m/Button","sap/ui/thirdparty/jquery","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ui/events/KeyCodes","sap/base/util/merge","sap/ovp/app/OVPLogger","sap/ovp/cards/jUtils","sap/base/util/isEmptyObject","sap/ui/util/openWindow","sap/ovp/placeholder/placeholderHelper","sap/ui/core/Component","sap/ui/core/Fragment","sap/ovp/app/NavigationHelper","sap/ovp/cards/NavigationHelper","sap/ovp/helpers/V4/MetadataAnalyzer","sap/ovp/insights/helpers/AnalyticalCard","sap/ovp/filter/FilterUtils","sap/ovp/handlers/IAppStateHandler","sap/ovp/insights/CardProvider","sap/ui/core/EventBus","sap/ui/core/Element"],function(t,e,a,i,n,r,o,s,d,l,p,jQuery,g,h,c,v,f,u,C,m,y,b,I,P,D,M,w,T,S,V,O,N){"use strict";var A=new f("ovp.generic.Card");return t.extend("sap.ovp.cards.generic.Card",{initKeyboardNavigation:function(){var t=function(t){this.init(t)};t.prototype.layoutItemFocusHandler=function(){var t=jQuery(document.activeElement);if(t){var e=t.find("[aria-label]");var a,i="";if(t.find(".valueStateText").length==1){var n=t.find(".valueStateText").find(".sapMObjectNumberText").text();var r=t.find(".valueStateText").find(".sapUiInvisibleText").text();t.find(".valueStateText").attr("aria-label",n+" "+r);t.find(".valueStateText").attr("aria-labelledby","")}t.find("[role='listitem']").attr("aria-label","");if(t.hasClass("sapOvpCardHeader")&&!t.hasClass("sapOvpStackCardContent")){var o="";var s=t.find(".cardHeaderType");if(s.length===0){var d=g.getText("CardHeaderType");o="cardHeaderType_"+(new Date).getTime();var l='<div id="'+o+'" class="cardHeaderType" aria-label="'+d+'" hidden></div>';t.append(l)}else{o=s[0].id}i+=o+" "}for(a=0;a<e.length;a++){if(e[a].getAttribute("role")==="heading"){i+=e[a].id+" "}}if(t.hasClass("sapOvpCardHeader")){var p=t.find(".cardHeaderText");if(p.length!==0){for(var a=0;a<p.length;a++){if(i.indexOf(p[a].id)===-1){i+=p[a].id+" "}}}}if(i.length){t.attr("aria-labelledby",i)}if(t.prop("nodeName")==="LI"&&t.find(".linkListHasPopover").length!==0){if(t.find("#hasDetails").length===0){t.append("<div id='hasDetails' hidden>"+g.getText("HAS_DETAILS")+"</div>");t.attr("aria-describedby","hasDetails")}}var h=t.attr("id");if(h&&h.indexOf("ovpTable")!=-1&&t.find("[role='Link']")&&!t.hasClass("sapUiCompSmartLink")){var c=t.closest("td").attr("data-sap-ui-column"),v=t.closest("tbody").siblings().children().filter("tr").children();for(var a=0;a<v.length;a++){if(v[a].getAttribute("data-sap-ui")==c&&v[a].hasChildNodes("span")){var f=v[a].firstElementChild.getAttribute("id");t.attr("aria-labelledby",f)}}}}};t.prototype.init=function(t){this.cardLayout=t;this.keyCodes=c;this.jqElement=jQuery(t.getView().$());this.jqElement=this.jqElement.parent().parent().parent();this.jqElement.on("focus.keyboardNavigation",this.layoutItemFocusHandler)};this.keyboardNavigation=new t(this)},onInit:function(){this.enableClick=true;this.oCardComponent=this.getOwnerComponent();this.oCardComponentData=this.oCardComponent&&this.oCardComponent.getComponentData();this.oMainComponent=this.oCardComponentData&&this.oCardComponentData.mainComponent;this.sCardId=this.oCardComponentData.cardId;var t=this.getView().mPreprocessors.xml[0].ovpCardProperties.oData;var e=t.state;var i=t.sIllustration==="sapIllus-NoEntries";var n=t.errorStatusText;if(e!=="Error"||i||n){var r=this.getView().byId("ovpCardHeader");if(!!r){r.attachBrowserEvent("click",this.onHeaderClick.bind(this));r.addEventDelegate({onkeydown:function(t){if(!t.shiftKey&&t.keyCode==13){t.preventDefault();this.onHeaderClick(t)}else if(!t.shiftKey&&t.keyCode==32){t.preventDefault()}}.bind(this)});r.addEventDelegate({onkeyup:function(t){if(!t.shiftKey&&t.keyCode==32){t.preventDefault();this.onHeaderClick(t)}}.bind(this)})}}var o=this.getView().byId("kpiNumberValue");if(o){o.addEventDelegate({onAfterRendering:function(){var t=o.$();var e=t.find(".sapMNCValueScr");var a=t.find(".sapMNCScale");e.attr("aria-label",e.text());a.attr("aria-label",a.text());var i=this.getView().byId("ovpCardHeader").getDomRef();var n=this.getOwnerComponent().getComponentData();if(!!n&&!!n.appComponent){var r=n.appComponent;if(!!r.getModel("ui")){var s=r.getModel("ui");if(!!s.getProperty("/containerLayout")&&s.getProperty("/containerLayout")==="resizable"){var d=n.appComponent.getDashboardLayoutUtil();if(!!d){d.setKpiNumericContentWidth(i)}}}}}.bind(this)})}var s;var d=this.oCardComponentData;var l=a.isODataV4(d.model);if(l){if(this.oMainComponent&&this.oMainComponent.oCards){s=this.oMainComponent.oCards.filter(function(t){return t.id===d.cardId})[0]}var p=s&&s.template;var g=p&&p.startsWith("sap.ovp.cards.v4");var h=p&&p.startsWith("sap.ovp.cards");if(g||!h){var c=this;this.eventhandler=function(t,e,a){if(p.startsWith("sap.ovp.cards.v4.charts")||!h&&s.settings.chartAnnotationPath){T.applyFiltersToV4AnalyticalCard(a,c)}else{T.applyFiltersToV4Card(a,c)}};this.GloabalEventBus=O.getInstance();if(this.oMainComponent&&(this.oMainComponent.isMacroFilterBar||this.oMainComponent.oGlobalFilter)){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",c.eventhandler)}}}},updateControlPressed:function(t){h.bCRTLPressed=t.ctrlKey||t.metaKey},exit:function(){if(this.resizeHandlerId){n.deregister(this.resizeHandlerId)}},onExit:function(){if(this.GloabalEventBus){var t=this;this.GloabalEventBus.unsubscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",t.eventhandler)}},onAfterRendering:function(){var t=this.getView().byId("ovpCardHeader");var e=t&&t.getDomRef();var r=this.getView().byId("ovpHeaderTitle");var o=this.getView().byId("ovpQuickviewCardHeader");if(e&&!e.getAttribute("ariaLabelledBy")){if(r&&r.getText()){var s=r.getDomRef().getAttribute("id");e.setAttribute("arialabelledby",s)}else if(o&&o.getText()){var d=o.getDomRef().getAttribute("id");e.setAttribute("arialabelledby",d)}}var l=this.getCardPropertiesModel();this.updateTitleFromRTA(r,l);var p=l.getProperty("/contentFragment"),g=this.getOwnerComponent().getComponentData(),h=this.getCardItemsBinding();if(!h&&y.hidePlaceholderNeeded()){y.hidePlaceholder()}this._handleCountHeader();this._handleKPIHeader();var c=a.isODataV4(g&&g.model);var v=this.oMainComponent&&this.oMainComponent.aFilters;if(c&&v&&v.length>0){this.eventhandler("","",v)}var f=l.getProperty("/selectedKey");if(f&&l.getProperty("/state")!=="Loading"){var C=this.getView().byId("ovp_card_dropdown");if(C){C.setSelectedKey(f);var m=this.getView().getModel("ui");if(m&&m.getProperty("/bSelectionChanged")){var b=document.getElementById(C.sId);b&&b.focus();m.setProperty("/bSelectionChanged",false)}}}try{var g=this.getOwnerComponent().getComponentData();var I=g&&g.appComponent;if(I){if(I.getModel("ui")){var P=I.getModel("ui");if(P.getProperty("/containerLayout")==="resizable"){var M=I.getDashboardLayoutUtil();if(M){this.oDashboardLayoutUtil=M;this.cardId=g.cardId;if(M.isCardAutoSpan(g.cardId)){this.resizeHandlerId=n.register(this.getView(),function(t){A.info("DashboardLayout autoSize:"+t.target.id+" -> "+t.size.height);M.setAutoCardSpanHeight(t)})}}}}}}catch(t){A.error("DashboardLayout autoSpan check failed.")}if(this.oDashboardLayoutUtil&&this.oDashboardLayoutUtil.isCardAutoSpan(this.cardId)){var w=jQuery("#"+this.oDashboardLayoutUtil.getCardDomId(this.cardId));if(this.oView.$().outerHeight()>w.innerHeight()){this.oDashboardLayoutUtil.setAutoCardSpanHeight(null,this.cardId,this.oView.$().height())}}var T=false;var S=this.getModel();var V=this.getEntityType();if(g&&g.mainComponent){var O=g.mainComponent;if(O.bGlobalFilterLoaded){T=!D.checkHeaderNavigationDisabledForAnalyticalCard(l)&&D.checkNavigation(S,V,l)}}else if(i.checkIfAPIIsUsed(this)){T=this.checkAPINavigation()}var N=l.getProperty("/state");if(N!=="Loading"&&N!=="Error"){var E=l.getProperty("/template");if(E==="sap.ovp.cards.stack"){if(!T){var H=this.getView().byId("ViewAll");if(H){H=H.getDomRef();H&&H.parentNode.removeChild(H)}}}}if(p==="sap.ovp.cards.stack.Stack"){var k=this.getView().getDomRef();var F=k&&k.querySelector(".sapOvpCardContentContainer");if(F){F.style.borderTop="none"}}if(T){if(p?p!=="sap.ovp.cards.quickview.Quickview":true){if(p==="sap.ovp.cards.stack.Stack"){var k=this.getView().getDomRef();var x=k.querySelectorAll(".sapOvpCardContentRightHeader");if(x.length!==0){u.addClassToAllElements(x,"sapOvpCardNavigable")}}else{this.getView().addStyleClass("sapOvpCardNavigable")}}if(p&&p==="sap.ovp.cards.quickview.Quickview"){var L=this.byId("ovpCardHeader");if(L){L.addStyleClass("sapOvpCardNavigable")}}}else{if(p){this.getView().addStyleClass("ovpNonNavigableItem");var L=this.byId("ovpCardHeader");if(L){L.$().attr("role","heading");L.$().attr("aria-level","1");L.addStyleClass("ovpNonNavigableItem")}var R=D.checkLineItemNavigation(S,V,l);if(!R){switch(p){case"sap.ovp.cards.list.List":case"sap.ovp.cards.v4.list.List":var B=this.getView().byId("listItem");if(B){B.setType("Inactive")}break;case"sap.ovp.cards.table.Table":case"sap.ovp.cards.v4.table.Table":var B=this.getView().byId("tableItem");if(B){B.setType("Inactive")}break;case"sap.ovp.cards.linklist.LinkList":case"sap.ovp.cards.v4.linklist.LinkList":if(!D.checkNavigationForLinkedList(S,V)){var B=this.getView().byId("ovpCLI");if(B){B.setType("Inactive")}}break}}}}var U=this.getView().byId("ovp_card_dropdown");var _=this.getView().byId("ovp_card_dropdown_label");if(U){U.addAriaLabelledBy(_.getId())}if(i.checkIfAPIIsUsed(this)){this.initKeyboardNavigation()}if(this.getView()&&this.getView().byId("sapOvpCardAdditionalActions")){this.getView().byId("sapOvpCardAdditionalActions").setEnabled(true)}var K=this.getOwnerComponent().getComponentData(),j=K&&K.appComponent&&K.appComponent.ovpConfig&&K.appComponent.ovpConfig.bInsightRTEnabled;if(j){this.addInsightCardToCardProvider(K)}this.updateUIModelWithRenderedCards(K)},updateUIModelWithRenderedCards:function(t){if(t&&t.appComponent&&t.appComponent.getModel("ui")){var e=t.appComponent.getModel("ui"),a=e.getProperty("/visibleCardCount"),i=e.getProperty("/renderedOvpCards");if(i===a-1){var n=t.mainComponent;n.applyFiltersForCustomCards()}e.setProperty("/renderedOvpCards",++i)}},updateTitleFromRTA:function(t,e){var i=t&&t.getText();var n=e.getProperty("/cardId");var r=this.getOwnerComponent().getModel("ui");var o=r&&r.getProperty("/bRTAActive");if(!o){a.updateCardTitle(i,n)}},addInsightCardToCardProvider:function(t){if(t&&t.appComponent&&t.appComponent.getModel("ui")){var e=t.appComponent.getModel("ui"),a=e.getProperty("/visibleCardCount"),i=e.getProperty("/renderedCardCount"),n=this.getView().getModel("ovpCardProperties"),r=t.appComponent.getManifest()&&t.appComponent.getManifest()["sap.app"].id,o=t.appComponent.getManifestObject().getRawJson(),s=o&&o["sap.fiori"]&&o["sap.fiori"].registrationIds&&o["sap.fiori"].registrationIds[0]||r;V.addInsightCard(n,s);if(i===a-1){var d=t&&t.mainComponent;d.initializeCardProvider()}e.setProperty("/renderedCardCount",++i)}},checkAPINavigation:function(){var t=this.getOwnerComponent().getComponentData(),e=t.fnCheckNavigation&&typeof t.fnCheckNavigation==="function",a=e?t.fnCheckNavigation:null;if(a){if(a()){return true}}else{var i=this.getCardPropertiesModel();return!D.checkHeaderNavigationDisabledForAnalyticalCard(i)&&D.checkNavigation(this.getModel(),this.getEntityType(),i)}return false},onHeaderClick:function(t){var e=t&&t.target&&t.target.id;if(e&&e.indexOf("sapOvpCardAdditionalActions")>-1){return}var n=t.ctrlKey||t.metaKey?h.constants.explace:h.constants.inplace;if(i.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onHeaderClicked()}}else{var r=this.getCardPropertiesModel();var o=r.getProperty("/template");var s=r.getProperty("/targetUri");if((o=="sap.ovp.cards.linklist"||o=="sap.ovp.cards.v4.linklist")&&r.getProperty("/staticContent")!==undefined&&s){window.location.href=s}else if(r.getProperty("/staticContent")!==undefined&&s===""){return}else if(D.checkHeaderNavigationDisabledForAnalyticalCard(r)){return}else{this.doNavigation(this.getView().getBindingContext(),null,n)}}},resizeCard:function(t){A.info(t);if(this.resizeHandlerId){n.deregister(this.resizeHandlerId);this.resizeHandlerId=null}},_handleCountHeader:function(){var t=this.getView().byId("ovpCountHeader");if(t){var e=this.getCardItemsBinding();if(e){if(e.isLengthFinal()&&e.getLength()>0){this.setHeaderCounter(e,t)}e.attachDataReceived(function(a){if(y.hidePlaceholderNeeded()){y.hidePlaceholder()}this.setHeaderCounter(e,t,a)}.bind(this));e.attachChange(function(a){this.setHeaderCounter(e,t,a)}.bind(this))}}else{var e=this.getCardItemsBinding();if(e){e.attachDataReceived(function(){if(y.hidePlaceholderNeeded()){y.hidePlaceholder()}})}}},setHeaderCounter:function(t,e,a){var i;if(t.isLengthFinal()){i=t.getLength()}else{if(a&&a.getParameters().data&&a.getParameters().data.results){i=a.getParameters().data.results.length}}var n=t.getCurrentContexts().length;var o,s="";var d=r.getIntegerInstance({minFractionDigits:0,maxFractionDigits:1,decimalSeparator:".",style:"short"});n=parseFloat(n,10);var l=this.getOwnerComponent().getComponentData();if(l&&l.appComponent){var p=l.appComponent;if(p.getModel("ui")){var h=p.getModel("ui");if(h.getProperty("/containerLayout")!=="resizable"){if(i!==0){i=d.format(Number(i))}if(n!==0){n=d.format(Number(n))}}else{o=p.getDashboardLayoutUtil().dashboardLayoutModel.getCardById(l.cardId)}}}if(n===0||i===0){s=""}else if(o&&o.dashboardLayout.showOnlyHeader){s=g.getText("Count_Header_Total",[i])}else if(i!=n){s=g.getText("Count_Header",[n,i])}e.setText(s);e.addEventDelegate({onAfterRendering:function(){var t=e.$();t.attr("aria-label",s)}})},getKPIBinding:function(){var t=this.byId("kpiHBoxNumeric"),e=t&&t.getBindingInfo("items")&&t.getBindingInfo("items").binding;return e},getSubTitleBinding:function(){var t=this.getView().getDomRef();var e=t&&t.getElementsByClassName("sapOvpCardSubtitleContainer")[0];var a=e&&e.id;var i=N.getElementById(a);var n=i&&i.getBinding("items");return n},getCardItemsBinding:function(){},onActionPress:function(t){var e=t.getSource(),a=this._getActionObject(e),i=e.getBindingContext();if(a.type.indexOf("DataFieldForAction")!==-1){this.doAction(i,a)}else{this.doNavigation(i,a)}},_getActionObject:function(t){var e=t.getCustomData();var a={};for(var i=0;i<e.length;i++){a[e[i].getKey()]=e[i].getValue()}return a},doNavigation:function(t,e,a){if(!a){a=h.constants.inplace}if(!this.enableClick){return}this.enableClick=false;setTimeout(function(){this.enableClick=true}.bind(this),1e3);if(!this.oMainComponent){return}if(!e){e=D.getEntityNavigationEntries(t,this.getModel(),this.getEntityType(),this.getCardPropertiesModel())[0]}var i=v({},t);var n=v({},e);var r=this.oMainComponent.doCustomNavigation&&this.oMainComponent.doCustomNavigation(this.sCardId,i,n);var o=this.oMainComponent.templateBaseExtension&&this.oMainComponent.templateBaseExtension.provideExtensionNavigation&&this.oMainComponent.templateBaseExtension.provideExtensionNavigation(this.sCardId,i,n);var s;if(r){s=r}if(o){s=o}if(s){var d=s.type;if(d&&typeof d==="string"&&d.length>0){d=d.split(".").pop().split("/").pop().toLowerCase();switch(d){case"datafieldwithurl":s.type="com.sap.vocabularies.UI.v1.DataFieldWithUrl";break;case"datafieldforintentbasednavigation":s.type="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation";break}e=s}}function l(a){if(!a){a=h.constants.inplace}if(e){switch(e.type){case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":this.doNavigationWithUrl(t,e,a);break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":this.doIntentBasedNavigation(t,e,false,a);break;case"com.sap.vocabularies.UI.v1.KPIDetailType":this.doIntentBasedNavigation(t,e,false,a);break}}}if(!S.oAppStatePromise){l.call(this,a)}else{S.oAppStatePromise.then(l.bind(this,a))}},doNavigationWithUrl:function(t,e,i){var n=a.getUshellContainer();if(!i){i=h.constants.inplace}if(!n){if(e&&e.url){m(e.url,"newWindow")}return}n.getServiceAsync("URLParsing").then(function(a){a.isIntentUrlAsync(e.url).then(function(n){if(!n){m(e.url,"newWindow")}else{var r=a.parseShellHash(e.url);var o=r.appSpecificRoute?true:false;this.doIntentBasedNavigation(t,r,o,i)}}.bind(this))}.bind(this))},fnHandleError:function(t){if(t instanceof s){if(t.getErrorCode()==="NavigationHandler.isIntentSupported.notSupported"){o.show(g.getText("OVP_NAV_ERROR_NOT_AUTHORIZED_DESC"),{title:g.getText("OVP_GENERIC_ERROR_TITLE")})}else{o.show(t.getErrorCode(),{title:g.getText("OVP_GENERIC_ERROR_TITLE")})}}},doCrossApplicationNavigation:function(t,e){var i="#"+t.semanticObject+"-"+t.action;var n=[];var r=a.getUshellContainer();if(t.params){var o=this.oCardComponent&&this.oCardComponent.getComponentData();var d=o&&o.appComponent;if(d){var l=d._formParamString(t.params);i=i+l;n.push({target:{shellHash:i}})}}var p=this;if(!r){return}r.getServiceAsync("Navigation").then(function(t){t.isNavigationSupported(n).then(function(a){var i=a[0];if(i&&i.supported){if(!!e.params){if(typeof e.params=="string"){try{e.params=JSON.parse(e.params)}catch(t){A.error("Could not parse the Navigation parameters");return}}}var n=p.getOwnerComponent().getComponentData();var r=n?n.globalFilter:undefined;var o=r&&r.getUiState({allFilters:false});var d=o?JSON.stringify(o.getSelectionVariant()):"{}";r=JSON.parse(d);var l=D.getFilterPreference(n);r=D.removeFilterFromGlobalFilters(l,r);if(!e.params){e.params={}}if(!!r&&!!r.SelectOptions){for(var g=0;g<r.SelectOptions.length;g++){var h=r.SelectOptions[g].Ranges;if(!!h){var c=[];for(var v=0;v<h.length;v++){if(h[v].Sign==="I"&&h[v].Option==="EQ"){c.push(h[v].Low)}}e.params[r.SelectOptions[g].PropertyName]=c}}}return t.navigate(e)}else{var f=new s("NavigationHandler.isIntentSupported.notSupported");p.fnHandleError(f)}}).then(function(){A.error("Could not get authorization from isIntentSupported")})})},doIntentBasedNavigation:function(t,e,i,n){if(!n){n=h.constants.inplace}var r=this.oCardComponent&&this.oCardComponent.getComponentData();if(r&&r.appComponent&&r.appComponent.ovpConfig&&r.appComponent.ovpConfig.isTeamsModeActive){n=h.constants.explace}var o=a.getUshellContainer();if(!o){return}var s,d,l=t?t.getObject():null;var p=this.getCardPropertiesModel(),g=p.getProperty("/customParams");if(t&&typeof t.getAllData==="function"&&g){d=t.getAllData()}else if(p.getProperty("/staticContent")){d={iStaticLinkListIndex:e.iStaticLinkListIndex,bStaticLinkListIndex:true}}if(l&&l.__metadata){delete l.__metadata}var c=a.getNavigationHandler();if(c){if(e){var r=this.getOwnerComponent().getComponentData();var v=this.getEntityType();var f=this.oMainComponent;var u=this.getModel();var C=r.mainComponent&&r.mainComponent.oMacroFilterBar;var m=this;if(C){D.getEntityNavigationParameters(f,u,r,p,v,l,d,t).then(function(t){m.handleNavigation(t,e,i,n,c)})}else{s=D.getEntityNavigationParameters(f,u,r,p,v,l,d,t);this.handleNavigation(s,e,i,n,c)}}}},handleNavigation:function(t,e,a,i,n){var r=this.fnHandleError;var o={target:{semanticObject:e.semanticObject,action:e.action},appSpecificRoute:e.appSpecificRoute,params:t.sNavSelectionVariant};var s={};if(t.sNavPresentationVariant){s.presentationVariant=t.sNavPresentationVariant}if(a){if(e&&e.semanticObject&&e.action){var d=this.getCardPropertiesModel().getProperty("/staticParameters");o.params=!!d?d:{};this.doCrossApplicationNavigation(e,o)}}else{n.navigate(o.target.semanticObject,o.target.action,o.params,null,r,s,i)}},doAction:function(t,a){this.actionData=e.getActionInfo(t,a,this.getEntityType());if(this.actionData.allParameters.length>0){this._loadParametersForm()}else{D.callFunction(this.actionData)}},getModel:function(){if(this.getView()){return this.getView().getModel()}},getMetaModel:function(){if(this.getModel()){return this.getModel().getMetaModel()}},getCardPropertiesModel:function(){if(!this.oCardPropertiesModel||C(this.oCardPropertiesModel)){this.oCardPropertiesModel=this.getView().getModel("ovpCardProperties")}return this.oCardPropertiesModel},getCardContentContainer:function(){if(!this.cardContentContainer){this.cardContentContainer=this.getView().byId("ovpCardContentContainer")}return this.cardContentContainer},_loadParametersForm:function(){var t=new d;t.setData(this.actionData.parameterData);var a=this;var i=new l("ovpCardActionDialog",{title:this.actionData.sFunctionLabel,afterClose:function(){i.destroy()}}).addStyleClass("sapUiNoContentPadding");var n=new p({text:this.actionData.sFunctionLabel,press:function(t){var n=e.getParameters(t.getSource().getModel(),a.actionData.oFunctionImport);i.close();D.callFunction(a.actionData,n)}});var r=new p({text:"Cancel",press:function(){i.close()}});i.setBeginButton(n);i.setEndButton(r);var o=function(t){var i=e.mandatoryParamsMissing(t.getSource().getModel(),a.actionData.oFunctionImport);n.setEnabled(!i)};var s=e.buildParametersForm(this.actionData,o);i.addContent(s);i.setModel(t);i.open()},setErrorState:function(){var t=this.getOwnerComponent();if(!t||!t.oContainer){return}var e=t.oContainer;var a=this.getCardPropertiesModel();var i={name:"sap.ovp.cards.loading",componentData:{model:this.getView().getModel(),settings:{category:a.getProperty("/category"),title:a.getProperty("/title"),description:a.getProperty("/description"),entitySet:a.getProperty("/entitySet"),state:h.loadingState.ERROR,template:a.getProperty("/template")}}};b.create(i).then(function(a){e.setComponent(a);setTimeout(function(){t.destroy()},0)})},changeSelection:function(t,e,a){if(!e){var n=this.getView().byId("ovp_card_dropdown");t=parseInt(n.getSelectedKey(),10);if(this.getView()){this.getView().getModel("ui").setProperty("/bSelectionChanged",true)}}var r={};if(!e){r=this.getCardPropertiesModel().getProperty("/tabs")[t-1]}else{r=a.tabs[t-1]}var o={cardId:this.getOwnerComponent().getComponentData().cardId,selectedKey:t};for(var s in r){o[s]=r[s]}if(i.checkIfAPIIsUsed(this)){i.recreateCard(o,this.getOwnerComponent().getComponentData())}else{this.getOwnerComponent().getComponentData().mainComponent.recreateCard(o);this.getOwnerComponent().getComponentData().mainComponent.setOrderedCardsSelectedKey(this.getOwnerComponent().getComponentData().cardId,t)}},getItemHeight:function(t,e,a){if(!!t){var i=t.getView().byId(e);var n=0;if(!!i){if(a){if(i.getItems()[0]&&i.getItems()[0].getDomRef()){n=u.getOuterHeight(i.getItems()[0].getDomRef())}}else{if(i.getDomRef()){n=u.getOuterHeight(i.getDomRef())}}}return n}},getEntitySet:function(){if(!this.entitySet){var t=this.getCardPropertiesModel().getProperty("/entitySet");if(a.isODataV4(this.getView().getModel())){this.entitySet=this.getMetaModel()&&this.getMetaModel().getObject("/"+t)}else{this.entitySet=this.getMetaModel().getODataEntitySet&&this.getMetaModel().getODataEntitySet(t)}}return this.entitySet},getEntityType:function(){if(!this.entityType){if(a.isODataV4(this.getView().getModel())){var t=this.getMetaModel();var e=this.getEntitySet();if(t&&e){var i=t.getData().$Annotations[e.$Type];var n={property:t.getObject("/"+e.$Type+"/")};this.entityType=h.merge(true,{},i,n)}}else{if(this.getMetaModel()&&this.getEntitySet()){this.entityType=this.getMetaModel().getODataEntityType(this.getEntitySet().entityType)}}}return this.entityType},_handleKPIHeader:function(){if(a.isODataV4(this.getView().getModel())){this._handleKPIHeaderForODataV4()}else{this._handleKPIHeaderForODataV2()}},_handleKPIHeaderForODataV2:function(){var t,e;if(this.getView()&&this.getView().getDomRef()){t=this.getView().getDomRef().getElementsByClassName("numericContentHbox");e=this.getView().getDomRef().getElementsByClassName("noDataSubtitle")}else{return}if(t||e){var a=this.getKPIBinding();if(a){a.attachDataReceived(function(i){var n=i.getParameter("data")&&i.getParameter("data").results&&i.getParameter("data").results[0];var r=a.getLength();if(t[0]){t[0].style.visibility=null;if(r===0){this._setSubTitleWithUnitOfMeasureForODataV2(n,false);t[0].style.visibility="hidden"}else{this._setSubTitleWithUnitOfMeasureForODataV2(n,true);t[0].style.visibility="visible"}}if(e.length!==0){e[0].style.display="none";if(r===0){e[0].style.display="flex"}}}.bind(this))}}},_handleKPIHeaderForODataV4:function(){var t,e;if(this.getView()&&this.getView().getDomRef()){t=this.getView().getDomRef().getElementsByClassName("numericContentHbox");e=this.getView().getDomRef().getElementsByClassName("noDataSubtitle")}else{return}if(t||e){var a=this.getKPIBinding();if(a){a.attachDataReceived(function(i){var n=i.getSource().getCurrentContexts().map(function(t){return t&&t.getObject()})[0];var r=a.getLength();if(t[0]){t[0].style.visibility=null;if(r===0){t[0].style.visibility="hidden"}else{this._setSubTitleWithUnitOfMeasureForODataV4(n);t[0].style.visibility="visible"}}if(e.length!==0){e[0].style.display="none";if(r===0){e[0].style.display="flex"}}}.bind(this))}}},_setSubTitleWithUnitOfMeasureForODataV2:function(t,e){var i=this.getCardPropertiesModel();if(!!i){var n=i.getData();var r=this.getView().byId("SubTitle-Text");var o="";if(!!r){r.setText(n.subTitle);if(!!n&&!!n.entityType&&!!n.dataPointAnnotationPath&&e){var s=i.getData().entityType;var d=n.dataPointAnnotationPath.split("/");var l=d.length===1?s[n.dataPointAnnotationPath]:s[d[0]][d[1]];var p;if(l&&l.Value&&l.Value.Path){p=l.Value.Path}else if(l&&l.Description&&l.Description.Value&&l.Description.Value.Path){p=l.Description.Value.Path}if(!!p){var h=a.getUnitColumn(p,s);var c;if(!!h&&!!t){o=h;c=t[h]}else{c=a.getUnitColumn(p,s,true);o=c}if(i.getProperty("/bInsightEnabled")){w.setUoMForSubTitle(i.getData().cardId,o)}var v=g.getText("SubTitle_IN");if(!!n.subTitle&&!!v&&!!c){r.setText(n.subTitle+" "+v+" "+c);var f=r.getAggregation("customData");if(f){var u;for(u in f){var C=f[u];if(C.getKey()==="aria-label"){C.setValue(n.subTitle+" "+v+" "+c);break}}}}}}}}},_setSubTitleWithUnitOfMeasureForODataV4:function(t){var e=this.getCardPropertiesModel();if(!!e){var i=e.getData();var n=this.getView().byId("SubTitle-Text");var r="";if(!!n){n.setText(i.subTitle);if(!!i&&!!i.entityType&&!!i.dataPointAnnotationPath){var o=this.getEntityType();var s=i.dataPointAnnotationPath.split("/");var d=s.length===1?o["@"+i.dataPointAnnotationPath]:o["@"+s[0]]["@"+s[1]];var l;if(d&&d.Value&&d.Value.$Path){l=d.Value.$Path}else if(d&&d.Description&&d.Description.Value&&d.Description.Value.$Path){l=d.Description.Value.$Path}var p=this.getMetaModel();var h=this.getEntitySet();var c=M.getEntitySetName(p,h.$Type);if(!!l){var v=a.getUnitColumnForODataV4(l,p,c);var f;if(!!v&&!!t){r=v;f=t[v]}else{f=a.getUnitColumnForODataV4(l,p,c,true);r=f}if(e.getProperty("/bInsightEnabled")){w.setUoMForSubTitle(e.getData().cardId,r)}var u=g.getText("SubTitle_IN");if(!!i.subTitle&&!!u&&!!f){n.setText(i.subTitle+" "+u+" "+f);var C=n.getAggregation("customData");if(C){var m;for(m in C){var y=C[m];if(y.getKey()==="aria-label"){y.setValue(i.subTitle+" "+u+" "+f);break}}}}}}}}},getHeaderHeight:function(){var t=this.getItemHeight(this,"ovpCardHeader"),e=this.getOwnerComponent()?this.getOwnerComponent().getComponentData():null;if(e&&e.appComponent){var a=e.appComponent.getDashboardLayoutUtil(),i=a.getDashboardLayoutModel().getCardById(e.cardId);if(t!==0){i.dashboardLayout.headerHeight=t}}return t},onShowInsightCardPreview:function(){},onShowAdditionalCardActions:function(t){var e=t.getSource();t.cancelBubble();if(!this.additionalCardActionsMenu){this.additionalCardActionsMenu=I.load({id:this.getView().getId(),name:"sap.ovp.cards.generic.HeaderActions",controller:this}).then(function(t){this.getView().addDependent(t);return t}.bind(this))}var a=this;this.additionalCardActionsMenu.then(function(t){var i=a.getView(),n=i.byId("ovpAddToInsightButton"),r=n&&n.getEnabled();if(!r&&a.bdataLoadedToEnableAddToInsight){n.setEnabled(true)}t.openBy(e)})},checkIBNNavigationExistsForCard:function(){var t=this.getCardPropertiesModel(),e=this.getEntityType(),a=t.getProperty("/contentFragment"),i=this.getView().getModel();if(t&&e&&a){var n=["sap.ovp.cards.list.List","sap.ovp.cards.v4.list.List","sap.ovp.cards.table.Table","sap.ovp.cards.v4.table.Table"];if(n.includes(a)){var r=P.checkIdentificationAnnotationNavigation(t,e,i),o=P.checkLineItemNavigation(t,e,i);return r||o}if(a==="sap.ovp.cards.charts.analytical.analyticalChart"||a==="sap.ovp.cards.v4.charts.analytical.analyticalChart"){var s=D.checkHeaderNavigationDisabledForAnalyticalCard(t),d=P.checkIdentificationAnnotationNavigation(t,e,i),l=P.checkKPIAnnotationNavigation(t,e),p=s&&d;return p||d||l}}return false},saveGeneratedCardManifest:function(t){var e=this.oCardComponentData.cardId,a=this.oCardComponentData.settings.selectedKey,i=this.getView(),n=i.getModel("ovpCardProperties"),r=n&&n.getProperty("/bInsightDTEnabled");if(r){var o=a?e+"/tab_"+a:e;jQuery.ajax({type:"POST",url:"/editor/card/"+o+"/manifest",headers:{"Content-Type":"application/json"},data:JSON.stringify(t),success:function(t){A.info("Success:",t)},error:function(t){A.error("Error:",t)}})}},refreshCardContent:function(){var t=this.getCardPropertiesModel();if(t){var e=t.getProperty("/template");var a=e==="sap.ovp.cards.error"||e==="sap.ovp.cards.v4.error";var i=e&&!e.startsWith("sap.ovp.cards");if(i||a){if(typeof this.onRefresh==="function"){if(a){var n=t.getProperty("/cardId");n&&this.onRefresh(n)}else{this.onRefresh()}}return}}if(this.getKPIBinding()){this.getKPIBinding().refresh()}if(this.getCardItemsBinding()){this.getCardItemsBinding().refresh()}},onCardManage:function(){this.oMainComponent.oManageCardsUtils.onManageCardsMenuButtonPress()}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/Component", ["sap/ovp/cards/generic/base/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.generic.Component",{metadata:{properties:{contentFragment:{type:"string"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.generic.Card"},headerExtensionFragment:{type:"string"},contentPosition:{type:"string",defaultValue:"Middle"},headerFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.Header"},footerFragment:{type:"string"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"},selectionAnnotationPath:{type:"string"},filters:{type:"object"},parameters:{type:"object"},addODataSelect:{type:"boolean",defaultValue:false},enableAddToInsights:{type:"boolean",defaultValue:false},showRefresh:{type:"boolean",defaultValue:true}},version:"1.141.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/base/Component", ["sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/ovp/cards/CommonUtils","sap/ui/Device","sap/ui/model/resource/ResourceModel","sap/ui/core/mvc/ViewType","sap/base/util/merge","sap/ovp/app/OVPUtils","sap/ovp/app/OVPLogger","sap/ui/base/Object","sap/ui/core/Component","sap/ui/core/Lib","sap/ui/core/mvc/View"],function(e,t,a,n,i,o,r,s,l,p,d,c,u){"use strict";var v=new l("OVP.generic.base.Component");return e.extend("sap.ovp.cards.generic.base.Component",{metadata:{properties:{contentFragment:{type:"string"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.generic.Card"},headerExtensionFragment:{type:"string"},contentPosition:{type:"string",defaultValue:"Middle"},headerFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.Header"},footerFragment:{type:"string"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"},selectionAnnotationPath:{type:"string"},filters:{type:"object"},parameters:{type:"object"},addODataSelect:{type:"boolean",defaultValue:false},enableAddToInsights:{type:"boolean",defaultValue:false}},version:"1.141.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{},interfaces:["sap.ui.core.IAsyncContentCreation"]},setSelectionVariant:function(e,t){if(/^@/.test(e)){e=e.slice(1)}t.selectionAnnotationPath=e},getCustomizing:function(e){return d.getCustomizing(this,{type:e})},setPresentationVariant:function(e,t,a,n){if(/^@/.test(e)&&!n){e=e.slice(1)}t.presentationAnnotationPath=e;var i=e.split("/");var o=i.length===1?a[e].Visualizations:a[i[0]][i[1]][i[2]].Visualizations;var r;for(r=0;r<o.length;r++){var s=n?o[r].$AnnotationPath:o[r].AnnotationPath;if(s){if(/^@/.test(s)){s=s.slice(1)}if(/.LineItem/.test(s)){t.annotationPath=s;break}}}for(r=0;r<o.length;r++){var s=n?o[r].$AnnotationPath:o[r].AnnotationPath;if(s){if(/^@/.test(s)){s=s.slice(1)}if(/.Chart/.test(s)){t.chartAnnotationPath=s;break}}}},setDataPointAnnotationPath:function(e,t){if(/^@/.test(e)){e=e.slice(1)}t.dataPointAnnotationPath=e},getCustomPreprocessor:function(){},getPreprocessors:function(e){var i=this.getComponentData(),o=i.settings,l=i.model,p,d,c,u,v;if(o.description&&!o.subTitle){o.subTitle=o.description}var f=a.isODataV4(l);if(l&&f){p=l&&l.getMetaModel();var h="/"+o.entitySet;var d=p.getObject(h);v=p.createBindingContext(h);if(d&&d["$Type"]){c=p.createBindingContext("/"+d["$Type"]);var g="/"+d["$Type"]+"/@";u=p.getObject(g)}}else if(l&&o.entitySet){p=l&&l.getMetaModel();var m=p.getODataEntitySet(o.entitySet);var y=p.getODataEntitySet(o.entitySet,true);d=p.getODataEntityType(m.entityType);v=p.createBindingContext(y);c=p.createBindingContext(d.$path)}var C=this._getCardPropertyDefaults();var b=this._completeLayoutDefaults(C,o);var P,D;if(i.appComponent&&i.appComponent.getModel("ui")&&i.appComponent.getModel("ui").oData){var A=i.appComponent.getModel("ui").oData;P=A.showDateInRelativeFormat;D=A.disableTableCardFlexibility}else{if(i.showDateInRelativeFormat){P=i.showDateInRelativeFormat}if(i.disableTableCardFlexibility){D=i.disableTableCardFlexibility}}if(i.ovpCardsAsApi&&i.parentView&&typeof i.parentView.getViewName==="function"&&i.parentView.getViewName()!=="sap.ovp.cards.rta.SettingsDialog"){i.settings.enableAddToInsights=false}var I=i&&i.appComponent&&i.appComponent.ovpConfig||{};var T=true;if(i.ovpCardsAsApi){T=false}var V=I.bInsightDTEnabled||I.bInsightRTEnabled||false;if(I.isTeamsModeActive){V=false}var M={metaModel:p,entityType:d,webkitSupport:n.browser.webkit,layoutDetail:b&&b.cardLayout?b.cardLayout.containerLayout:"fixed",bInsightDTEnabled:I.bInsightDTEnabled||false,bInsightRTEnabled:I.bInsightRTEnabled||false,bInsightEnabled:V,showDateInRelativeFormat:P,disableTableCardFlexibility:D,cardId:i.cardId,enableAdditionalActionsManageCards:T};var S=null;var O={v2:["sap.ovp.cards.charts.analytical","sap.ovp.cards.table","sap.ovp.cards.list"],v4:["sap.ovp.cards.v4.charts.analytical","sap.ovp.cards.v4.table","sap.ovp.cards.v4.list"]};if(!!i&&!!i.cardId){var L=i.mainComponent;if(!!L){S=L._getCardFromManifest(i.cardId)?L._getCardFromManifest(i.cardId).template:null}else{S=i.template}if(!!S){M.template=S}if(M.template==="sap.ovp.cards.charts.analytical"){M.enableOVPCardAsAPI=i.ovpCardsAsApi||false}if(I.enableV4Insight&&O.v4.includes(S)){i.settings.enableAddToInsights=true}}C.densityStyle=a._setCardpropertyDensityAttribute();if(i.errorReason){var w=i.errorReason;var x=w.getParameters?w.getParameters():w.mParameters;var R="sap-icon://message-error";var F="sapIllus-UnableToLoad";if(x&&x.response){C.errorStatusCode=x.response.statusCode;if(x.response.sTitle){C.sTitle=x.response.sTitle;C.sIllustration=x.response.sIllustration?x.response.sIllustration:F;C.sDescription=x.response.sDescription}else if(x.response.statusText){C.errorStatusText=x.response.statusText;C.sMessageIcon=x.response.sIcon?x.response.sIcon:R}C.responseText=x.response.responseText}var k=function(e){return O.v2.indexOf(e)!==-1||O.v4.indexOf(e)!==-1};if(i.settings.enableAddToInsights!==false&&k(i.settings.oldTemplate)){C.enableAddToInsights=true}}if(b){M.cardLayout=b.cardLayout}if(C.state!=="Error"){if(o&&o.kpiAnnotationPath){var B=d&&d[o.kpiAnnotationPath];var _=C.contentFragment;if(B&&["sap.ovp.cards.charts.analytical.analyticalChart","sap.ovp.cards.v4.charts.analytical.analyticalChart","sap.ovp.cards.charts.smart.analyticalChart"].includes(_)){var E=B.SelectionVariant&&B.SelectionVariant.Path?B.SelectionVariant.Path:o.kpiAnnotationPath+"/SelectionVariant";if(E){this.setSelectionVariant(E,o)}var j=B.Detail&&B.Detail.DefaultPresentationVariant&&B.Detail.DefaultPresentationVariant.Path?B.Detail.DefaultPresentationVariant.Path:o.kpiAnnotationPath+"/Detail/DefaultPresentationVariant";if(j){this.setPresentationVariant(j,o,d,f)}var N=B.DataPoint&&B.DataPoint.Path?B.DataPoint.Path:o.kpiAnnotationPath+"/DataPoint";if(N){this.setDataPointAnnotationPath(N,o)}}}else if(o&&o.selectionPresentationAnnotationPath){var U=f?"@"+o.selectionPresentationAnnotationPath:o.selectionPresentationAnnotationPath;var $=f?u[U]:d[U];if($){var E=$.SelectionVariant&&(f?$.SelectionVariant.$Path:$.SelectionVariant.Path);if(E){this.setSelectionVariant(E,o)}var j=$.PresentationVariant&&(f?$.PresentationVariant.$Path:$.PresentationVariant.Path);if(j){var H=f?u:d;this.setPresentationVariant(j,o,H,f)}}}}if(i.ovpCardsAsApi&&o.ignoreSelectionVariant){o.selectionAnnotationPath="";var z=[];for(var K=0;!!o.filters&&K<o.filters.length;K++){z.push({id:"headerFilterText--"+(K+1),index:K})}o.idForExternalFilters=z}if(!!M.entityType&&!!o.selectionAnnotationPath&&!!M.entityType[o.selectionAnnotationPath]){var X=M.entityType[o.selectionAnnotationPath].SelectOptions;for(var q=0;!!X&&q<X.length;q++){X[q].id="headerFilterText--"+(q+1)}M.entityType[o.selectionAnnotationPath].SelectOptions=X}if((M.template==="sap.ovp.cards.linklist"||M.template==="sap.ovp.cards.v4.linklist")&&!!o.staticContent){for(var G=0;G<o.staticContent.length;G++){o.staticContent[G].id="linkListItem--"+(G+1)}if(o.staticContent){C.showRefresh=false}}else if(M.template==="sap.ovp.cards.charts.analytical"||M.template==="sap.ovp.cards.v4.charts.analytical"){o.dataStep=o.dataStep?o.dataStep:10}C=s.merge(true,{},M,C,o);var J=new t(C);var Q={xml:{bindingContexts:{entityType:c,entitySet:v},models:{device:a.deviceModel,entityType:p,entitySet:p,ovpMeta:p,ovpCardProperties:J,ovplibResourceBundle:e,ovpConstants:a.ovpConstantModel},ovpCardProperties:J,dataModel:l,_ovpCache:{}}};return r({},this.getCustomPreprocessor(),Q)},_completeLayoutDefaults:function(e,t){var a={},n=this.getComponentData(),i=null,o=null;if(n.appComponent){i=n.appComponent.getOvpConfig()}if(!i){return null}if(i.containerLayout==="resizable"&&n.cardId&&e.contentFragment!=="sap.ovp.cards.quickview.Quickview"){o=n.appComponent.getDashboardLayoutUtil();var r=n.cardId;var s=o.aCards.filter(function(e){return e.id===r});a.cardLayout=s[0].dashboardLayout;a.cardLayout.containerLayout=i.containerLayout;a.cardLayout.iRowHeightPx=o.ROW_HEIGHT_PX;a.cardLayout.iCardBorderPx=o.CARD_BORDER_PX;a.cardLayout.headerHeight=s[0].dashboardLayout.headerHeight}return a},_getCardPropertyDefaults:function(){var e={};var t=this.getMetadata().getAllProperties();var a;for(var n in t){a=t[n];if(a.defaultValue!==undefined){e[a.name]=a.defaultValue}}return e},getOvplibResourceBundle:function(){if(!this.ovplibResourceBundle){var e=c.getResourceBundleFor("sap.ovp");this.ovplibResourceBundle=e?new i({bundleUrl:e.oUrlInfo.url}):null}return this.ovplibResourceBundle},_getCacheKeys:function(){var e=this.getComponentData&&this.getComponentData();if(e.ovpCardsAsApi){return}if(e.appComponent&&!p.isObjectA(e.appComponent,"sap.ui.base.ManagedObject")){return}var t=e&&e.settings&&e.settings.isObjectStream;if(t){return}var a=e&&e.model;if(a){var n=[];if(a.metadataLoaded&&typeof a.metadataLoaded==="function"){var i=a.metadataLoaded().then(function(e){var t;if(e&&e.lastModified){t=new Date(e.lastModified).getTime()+""}else{v.error("No valid cache key segment last modification date provided by the OData Model");t=(new Date).getTime()+""}return t});n.push(i)}if(a.annotationsLoaded&&typeof a.metadataLoaded==="function"){var o=a.annotationsLoaded().then(function(e){var t=0;if(e){for(var a=0;a<e.length;a++){if(e[a].lastModified){var n=new Date(e[a].lastModified).getTime();if(n>t){t=n}}}}if(t===0){v.error("No valid cache key segment last modification date provided by OData annotations");t=(new Date).getTime()}return t+""});n.push(o)}return n}},combineBatch:function(e,t){var a=t&&t.mainComponent;var n=a&&a.oModelViewMap;var i=t&&t.modelName;if(e&&i){e.bIncludeInCurrentBatch=false;if(n&&i&&n[i]&&n[i][t.cardId]){delete n[i][t.cardId];if(Object.keys(n[i]).length>0){e.bIncludeInCurrentBatch=true}}}},createContent:function(){var e=this.getComponentData&&this.getComponentData();var t=e.model;var n;var i;if(e&&e.mainComponent){n=e.mainComponent._getOvplibResourceBundle()}else{n=this.getOvplibResourceBundle()}i=this.getPreprocessors(n);var r=this._getCardPropertyDefaults().state;var s=e.cardId+(r?r:"Original");if(!r){s=s+(e.settings.selectedKey?"_Tab"+e.settings.selectedKey:"")}if(e.appComponent&&typeof e.appComponent.createId==="function"){s=e.appComponent.createId(s)}var l={preprocessors:i,type:o.XML,viewName:a.isODataV4(t)?"sap.ovp.cards.v4.generic.Card":"sap.ovp.cards.generic.Card",async:true,id:s};var p=this._getCacheKeys();if(p&&p.length&&p.length>0){l.cache={keys:p}}var d=this;return u.create(l).then(function(a){var o=a&&a.getControllerName()==="sap.ovp.cards.stack.Stack";if(t&&t.bUseBatch&&!o){d.combineBatch(t,e)}t&&a.setModel(t);if(e.i18n){a.setModel(e.i18n,"@i18n")}a.setModel(i.xml.ovpCardProperties,"ovpCardProperties");a.setModel(n,"ovplibResourceBundle");return a})}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/base/analytical/BaseAnalyticalChart.controller", ["sap/ovp/cards/generic/Card.controller","sap/ovp/cards/charts/VizAnnotationManager","sap/ovp/cards/v4/charts/VizAnnotationManager","sap/viz/ui5/data/FlattenedDataset","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/app/resources","sap/base/util/each","sap/ovp/app/OVPLogger","sap/ui/core/Fragment","sap/ovp/insights/IntegrationCard","sap/ui/Device","sap/ui/dom/units/Rem","sap/m/MessageBox","sap/ovp/cards/CommonUtils","sap/ovp/cards/charts/OVPChartFormatter","sap/ovp/cards/generic/base/analytical/Utils"],function(t,e,a,i,r,s,o,n,d,h,l,p,u,g,c,v){"use strict";var y=new n("sap.ovp.cards.generic.base.analytical.BaseAnalyticalChart");return t.extend("sap.ovp.cards.generic.base.analytical.BaseAnalyticalChart",{onInit:function(){t.prototype.onInit.apply(this,arguments);c.registerCustomFormatters();this.iPreviousRowSpan=0;this.iRowSpan=0;this.bResized=false;this.bdataLoadedToEnableAddToInsight=false},onBeforeRendering:function(){if(this.bCardProcessed){return}var t=g.isODataV4(this.getModel());v.validateCardConfiguration(this,t);var r=this.getView().byId("analyticalChart");var s=this.getOwnerComponent().getComponentData();if(r){r.setHeight("21rem")}if(this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"&&s&&s.appComponent){var o=s.appComponent.getDashboardLayoutUtil();var n=o.dashboardLayoutModel.getCardById(s.cardId);if(n.dashboardLayout.autoSpan&&r){r.setHeight("21rem")}}var h=this.getView().byId("vbLayout");var l;var p=false;var u=new i({data:{path:"/"}});this.isVizPropSet=p;this.oDataSet=u;this.vizFrame=r;this.vbLayout=h;if(!r){y.error(e.constants.ERROR_NO_CHART+": ("+this.getView().getId()+")")}else{this.vbLayout.setBusy(true);l=r.getModel("ovpCardProperties").getProperty("/navigation");if(l===undefined||l=="datapointNav"||l!="headerNav"){if(t){a.getSelectedDataPoint(r,this)}else{e.getSelectedDataPoint(r,this)}}r.destroyDataset();var c=r.getParent().getBinding("data");this._handleKPIHeader();if(c&&c.getPath()){c.attachDataReceived(this.onDataReceived.bind(this));c.attachDataRequested(this.onDataRequested.bind(this))}else{d.load("sap.ovp.cards.charts.generic.noData").then(function(t){var e=this.getCardContentContainer();e.removeAllItems();e.addItem(t)}.bind(this))}r.addEventDelegate({onmouseover:function(){var t=r._oOvpVizFrameTooltip;if(t){t._oPopup.close()}}})}this.bCardProcessed=true},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);var e=this.iRowSpan;if(!r.checkIfAPIIsUsed(this)&&this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var a=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var i=this.oDashboardLayoutUtil.getCardDomId(this.cardId);if(!this.bResized){a.dashboardLayout.rowSpan=Math.max(a.dashboardLayout.rowSpan,e);this.iRowSpan=a.dashboardLayout.rowSpan}var s=document.getElementById(i);var o=this.getHeaderHeight();if(!a.dashboardLayout.autoSpan){if(s){var n=s.getElementsByClassName("sapOvpWrapper")[0];if(n){n.style.height=a.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX+2-(o+2*this.oDashboardLayoutUtil.CARD_BORDER_PX)+"px"}}}if(a.dashboardLayout.showOnlyHeader){s.classList.add("sapOvpMinHeightContainer")}var d=this.getView().byId("analyticalChart");if(d){d.setHeight(this._calculateVizFrameHeight()+"px");this._calculateWidth();d.attachBrowserEvent("click",this.updateControlPressed.bind(this))}}},onDataRequested:function(){this.vbLayout.setBusy(true)},getCardItemsBinding:function(){var t=this.getView().byId("analyticalChart");if(t&&t.getParent()){return t.getParent().getBinding("data")}return null},resizeCard:function(t){var i=this.getCardPropertiesModel();this.newCardLayout=t;i.setProperty("/cardLayout/rowSpan",t.rowSpan);i.setProperty("/cardLayout/colSpan",t.colSpan);var r=this.getCardPropertiesModel().getProperty("/cardLayout");var n=this.getHeaderHeight();var d=this.getView().getDomRef().querySelectorAll(".sapOvpWrapper");for(var h=0;h<d.length;h++){d[h].style.height=t.rowSpan*r.iRowHeightPx+2-(n+2*r.iCardBorderPx)+"px"}var l=this.getView().byId("analyticalChart");var p=this.getView().byId("bubbleText");if(l){if(l.getVizType()==="timeseries_bubble"||l.getVizType()==="bubble"){if(r.colSpan>1){p.setVisible(false)}else{p.setVisible(true)}}l.setHeight(this._calculateVizFrameHeight()+"px");this._calculateWidth()}var u=this.getView().byId("ovpCardContentContainer").getDomRef();if(u){if(!t.showOnlyHeader){u.classList.remove("sapOvpContentHidden")}else{u.classList.add("sapOvpContentHidden")}}var c=s.getText("BUBBLESIZE");this.oDataSet.bindData("analyticalmodel>/","");this.vizFrame.setDataset(this.oDataSet);var v=l.getParent();var y=g.isODataV4(this.getModel());if(!this.isVizPropSet){if(y){a.buildVizAttributes(l,v,this)}else{e.buildVizAttributes(l,v,this)}this.isVizPropSet=true;if(p!=undefined){var b=l.getFeeds();o(b,function(t,e){if(b[t].getUid()=="bubbleWidth"){p.setText(c+" "+b[t].getValues())}})}e.hideDateTimeAxis(l)}e.reprioritizeContent(this.newCardLayout,l,y);this.bResized=true},_calculateVizFrameHeight:function(){var t;if(this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var e=this.getView().byId("analyticalChart");var a=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var i=this.getView().getController();var r=this.getItemHeight(i,"toolbar");var s=this.getHeaderHeight();var o=(e.getVizType()==="timeseries_bubble"||e.getVizType()==="bubble")&&a.dashboardLayout.colSpan===1?43:0;var n=l.system.phone&&this.iPreviousRowSpan>0?this.iPreviousRowSpan:a.dashboardLayout.rowSpan;t=n*this.oDashboardLayoutUtil.ROW_HEIGHT_PX+2-(s+2*this.oDashboardLayoutUtil.CARD_BORDER_PX+r+o+14);var d=e.sId;var h=this._calculateVizLegendGroupHeight(t);var u=this.getView().byId(d);if(u){u.setVizProperties(h)}}else{t=p.toPx(21)}return t},_calculateVizLegendGroupHeight:function(t){var e;if(t<=270){e=.1}else{var a=240;e=(t-a)/t}var i={legendGroup:{layout:{height:e}}};return i},_calculateWidth:function(){var t=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var e=this.getView().byId("analyticalChart");if(t){var a=parseInt(t.dashboardLayout.width,10);var i=e.getVizType();var r=e.sId;if(i==="donut"){var s=this._calculateVizLegendGroupWidth(a);var o=this.getView().byId(r);if(o){o.setVizProperties(s)}}}},_calculateVizLegendGroupWidth:function(t){var e;if(t<=600){e=.25}else if(t<=900){e=.55}else if(t>=1200){e=.7}else{e=.65}var a={legendGroup:{layout:{maxWidth:e}}};return a},refreshCard:function(){this.getView().invalidate()},onShowInsightCardPreview:function(){var t=this.getView();var e=t.getController();var a=e.oCardComponentData;var i=this;if(this.checkIBNNavigationExistsForCard()){h.showCard({vizFrame:e.vizFrame,entitySet:e.entitySet,entityType:e.entityType,cardComponentName:"Analytical",cardComponentData:a,cardComponent:e.oCardComponent,view:t}).then(function(t){i.saveGeneratedCardManifest(t)})}else{u.error(s.getText("INT_IBN_NAVIGATION_NOT_FOUND_ERROR_MESSAGE_TEXT"),{details:s.getText("INT_IBN_NAVIGATION_NOT_FOUND_ERROR_MESSAGE_VIEW_DETAILS_TEXT")})}}})});
sap.ui.predefine("sap/ovp/cards/generic/base/analytical/Component", ["sap/ovp/cards/generic/Component","sap/ovp/cards/jUtils"],function(e,a){"use strict";return e.extend("sap.ovp.cards.generic.base.analytical.Component",{metadata:{properties:{headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.KPIHeader"},contentFragment:{type:"string",defaultValue:"sap.ovp.cards.charts.analytical.analyticalChart"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.charts.analytical.analyticalChart"},enableAddToInsights:{type:"boolean",defaultValue:false}},version:"1.141.0",library:"sap.ovp",includes:[],dependencies:{libs:["sap.viz"],components:[]},config:{}},onAfterRendering:function(){a.setAttributeToMultipleElements(".tabindex0","tabindex",0);a.setAttributeToMultipleElements(".tabindex-1","tabindex",-1)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/base/analytical/OVPVizDatahelper", ["sap/base/util/each","sap/base/util/merge","sap/ovp/insights/helpers/AnalyticalCard","sap/ui/model/json/JSONModel","sap/ui/core/Control","sap/ovp/cards/AnnotationHelper"],function(e,t,a,r,s,n){"use strict";var i=[];var o="";var l="";var c="";var u=[];var d=[];var p=function(e,t,a){var r={dataContext:{},properties:{color:i&&i[e]},displayName:a.results[t][o]};r.dataContext[l]=a.results[t][c];return r};return{cacheValues:function(e,t,a,r){u=[];i=[];if(e instanceof Array){i=e.map(function(e){return e.color});u=e}else{var s=Object.keys(e)||[];for(var n=0;n<s.length;n++){i.push(e[s[n]]);u.push({dimensionValue:s[n],color:e[s[n]]})}}d=i.slice();o=a;l=r;c=t},addColorRulesToVizProperties:function(t,a){if(u instanceof Array){e(u,function(e,r){for(var s=0;s<t.results.length;s++){if(t.results[s][c]===r.dimensionValue){var n=p(e,s,t);a.plotArea.dataPointStyle["rules"].push(n);d.splice(e,1)}}})}},handleOthersSectionForCharts:function(e,t){if(e&&e.results&&Array.isArray(e.results)){var a="";if(d&&d.length){a=d[d.length-1]}t.plotArea.dataPointStyle["rules"].push({callback:function(e){return e&&e[l]&&e[l].lastIndexOf("Others")!=-1},properties:{color:a},displayName:e.results[0][c]})}},setVizPropertiesForInsightCards:function(e,r,s){if(e&&e.getProperty("/bInsightEnabled")){var n=r.getId(),i=t({},s);a.setVizPropertyMap(n,i)}},formatDateBasedOnSemantics:function(t,a,r){if(t&&t.length){if(r&&r.length){e(r,function(r,s){e(t,function(e,t){if(s.hasOwnProperty(t)){var r=s[t];var i,o,l,c,u,d,p;switch(a[t]["semantics"]){case"yearmonth":i=parseInt(r.substr(0,4),10);o=r.substr(4);u=parseInt(o,10)-1;s[t]=new Date(Date.UTC(i,u));break;case"yearquarter":i=parseInt(r.substr(0,4),10);l=r.substr(4);c=parseInt(l,10)*3-2;u=c-1;s[t]=new Date(Date.UTC(i,u));break;case"yearweek":i=parseInt(r.substr(0,4),10);d=r.substr(4);var p=1+(parseInt(d,10)-1)*7;s[t]=new Date(Date.UTC(i,0,p));break;case"fiscalyearperiod":var g="com.sap.vocabularies.Common.v1.IsFiscalYearPeriod";var f=n.getFormattedFiscalData(r,g);s[t]=f;break;default:break}}})})}}},attachDataReceivedToAggregationBinding:function(){var e=this.getBinding("aggregateData");var a=this.getBinding("data");if(this.chartAggrBinding!==e){this.chartAggrBinding=e;if(e){var n=this;e.attachEvent("dataReceived",function(e){n.aggregateSet=e&&e.getParameter("data");if(n.getChartType()=="donut"){if(n.getDependentDataReceived()===true||n.getDependentDataReceived()==="true"){n.oDataClone=t({},n.dataSet);n.mergeDatasets(a,n.oDataClone,n.getContent());n.setDependentDataReceived(false)}else{n.setDependentDataReceived(true)}}else{var s=new r;s.setData(n.aggregateSet.results);n.getContent().setModel(s,"analyticalmodel")}})}s.prototype.updateBindingContext.apply(this,arguments)}}}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * @fileOverview Miscellaneous utility functions for legacy cards.
 * See VizAnnotationManager.js for generic card methods.
 * This file can be safely deleted when legacy cards deprecate.
 */
sap.ui.predefine("sap/ovp/cards/generic/base/analytical/Utils", ["sap/base/util/each","sap/base/util/merge","sap/ovp/app/OVPLogger","sap/ovp/cards/generic/base/analytical/config","sap/ovp/cards/CommonUtils","sap/base/util/isEmptyObject","sap/ovp/cards/AnnotationHelper","sap/ovp/cards/Constants","sap/ui/core/format/NumberFormat"],function(e,t,r,a,n,i,o,s,u){"use strict";var l=["year","yearweek","yearmonth","yearquarter"];var f={};var m=t({CHART_QUALIFIER_KEY:"chartAnnotationPath",SELVAR_QUALIFIER_KEY:"selectionAnnotationPath",PREVAR_QUALIFIER_KEY:"presentationAnnotationPath",ERROR_NO_CHART:'Analytic cards require valid "chartAnnotationPath" '+"configured in manifest.json",LABEL_KEY:"sap:label",TEXT_KEY:"sap:text",TYPE_KEY:"type"},s.Annotations);var c=s.errorMessages;var p=new r("ovp.cards.generic.base.analytical.Utils");function v(e,t){if(!t){return""}var r=e.getSetting("ovpCardProperties");if(!r){return""}var a=r.oData;if(!a){return""}var n=a&&a[t]?a[t]:"";return n===""?"":n.split("#")[1]}function g(e,t){if(e&&e.Boolean){if(e.Boolean.toLowerCase()==="true"){return true}else if(e.Boolean.toLowerCase()==="false"){return false}}else if(e&&e.Bool){if(e.Bool.toLowerCase()==="true"){return true}else if(e.Bool.toLowerCase()==="false"){return false}}return t}f.getNumberValue=function(e,t){var r;if(e){if(e.String){r=Number(e.String)}else if(e.Int){r=Number(e.Int)}else if(e.Decimal){r=Number(e.Decimal)}else if(e.Double){r=Number(e.Double)}else if(e.Single){r=Number(e.Single)}}if(t){var a=u.getFloatInstance({style:"short",minFractionDigits:2,maxFractionDigits:2});if(r){r=a.format(Number(r))}}return r};f.getAllColumnTexts=function(e){return P("sap:text",e)};f.formDimensionPath=function(e){var t="{"+e+"}";var r=this.getModel("ovpCardProperties").getProperty("/entityType");if(!r){return t}var a=C(r);if(!a||!a[e]){return t}var n=a[e];if(n=="Edm.DateTime"){return"{= ${"+e+"} ? ${"+e+"} : ''}"}var i=f.getAllColumnTexts(r);if(!i){return t}t="{"+(i[e]||e)+"}";return t};function P(e,t){var r={};var a=t.property;for(var n=0,i=a.length;n<i;n++){if(a[n].hasOwnProperty(e)&&e=="com.sap.vocabularies.Common.v1.Label"){r[a[n].name]=a[n][e].String}else if(a[n].hasOwnProperty(e)){r[a[n].name]=a[n][e]}else{r[a[n].name]=a[n].name}}return r}function h(e){return P("com.sap.vocabularies.Common.v1.Label",e)}function C(e){return P("type",e)}var d={};f.LineChart=function(){function t(t,n,i){var o=r(t,i).split(",");var s=a(t,n).split(",");var u=[];e(o,function(e,t){u.push(t)});var l=[];e(s,function(e,t){l.push(t)});var f=true;var m=t.getSetting("ovpCardProperties").getProperty("/navigation");if(m=="chartNav"){f=false}var f=f?false:true;return"{ valueAxis:{  layout: { maxWidth : 0.4 }, title:{   visible:false,   text: '"+u.join(",")+"'  },  label:{   formatString:'axisFormatter'  } }, categoryAxis:{  title:{   visible:false,   text: '"+l.join(",")+"'  },  label:{   formatString:'axisFormatter'  } }, legend: {  isScrollable: false, itemMargin: 1.25 }, title: {  visible: false }, general: { groupData: false }, interaction:{  noninteractiveMode: "+f+",  selectability: {   legendSelection: false,   axisLabelSelection: false,   mode: 'EXCLUSIVE',   plotLassoSelection: false,   plotStdSelection: true  }, zoom:{   enablement: 'disabled'} } }"}t.requiresIContext=true;function r(t,r){var a=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!a){return""}var n=h(a);var i=[];e(r,function(e,t){i.push(n[t.Measure.PropertyPath]||t.Measure.PropertyPath)});return i.join(",")}r.requiresIContext=true;function a(t,r){var a=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!a){return""}var n=h(a);var i=[];var o;var s;e(r,function(e,t){if(t.Role.EnumMember.split("/")[1]==="Category"){s=n[t.Dimension.PropertyPath];i.push(s?s:t.Dimension.PropertyPath)}});if(i.length<1){s=n[r[0].Dimension.PropertyPath];i.push(s?s:r[0].Dimension.PropertyPath)}o=v(t,m.CHART_QUALIFIER_KEY);d[o]=i;return i.join(",")}a.requiresIContext=true;function n(t,r){var a=[];var n;var i=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!i){return""}var o=h(i);var s;e(r,function(e,t){if(t.Role.EnumMember.split("/")[1]==="Series"){s=o[t.Dimension.PropertyPath];a.push(s?s:t.Dimension.PropertyPath)}});n=v(t,m.CHART_QUALIFIER_KEY);a=a.filter(function(e){if(!d[n]){return true}return e!==d[n][0]});return a.join(",")}n.requiresIContext=true;function i(e,t){return n(e,t)!==""}i.requiresIContext=true;return{getVizProperties:t,getValueAxisFeed:r,getCategoryAxisFeed:a,getColorFeed:n,testColorFeed:i}}();f.BubbleChart=function(){function t(t,r,i){var o=a(t,i).split(",");var s=n(t,i).split(",");var u=[];e(o,function(e,t){u.push(t)});var l=[];e(s,function(e,t){l.push(t)});var f=true;var m=t.getSetting("ovpCardProperties").getProperty("/navigation");if(m=="chartNav"){f=false}var f=f?false:true;return"{ valueAxis:{  layout: { maxWidth : 0.4 }, title:{ visible:true, text: '"+u.join(",")+"'  },  label:{ formatString:'axisFormatter'  } }, valueAxis2:{  title:{ visible:true, text: '"+l.join(",")+"'  },  label:{ formatString:'axisFormatter'  } }, categoryAxis:{  title:{ visible:true  },  label:{ formatString:'axisFormatter'  } }, legend: {  isScrollable: false, itemMargin: 1.25 }, title: {  visible: false }, interaction:{  noninteractiveMode: "+f+",  selectability: { legendSelection: false, axisLabelSelection: false, mode: 'EXCLUSIVE', plotLassoSelection: false, plotStdSelection: true  }, zoom:{   enablement: 'disabled'} } }"}t.requiresIContext=true;function r(t,r){var a;if(!t||!t.getSetting||!(a=t.getSetting("ovpCardProperties"))){return[""]}var n=a.getProperty("/entityType");if(!n){return[""]}var i=h(n);var o=[null,null,null];var s=["Axis1","Axis2","Axis3"];e(r,function(e,t){if(s.indexOf(t.Role.EnumMember.split("/")[1])>-1){if(o[0]===null){o[0]=i[t.Measure.PropertyPath]||t.Measure.PropertyPath}else if(o[1]===null){o[1]=i[t.Measure.PropertyPath]||t.Measure.PropertyPath}else if(o[2]==null){o[2]=i[t.Measure.PropertyPath]||t.Measure.PropertyPath}}});return o}r.requiresIContext=true;function a(e,t){return r(e,t)[0]}a.requiresIContext=true;function n(e,t){return r(e,t)[1]}n.requiresIContext=true;function i(e,t){return r(e,t)[2]}i.requiresIContext=true;function o(t,r){var a=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!a){return""}var n=h(a);var i=[];var o;e(r,function(e,t){if(t.Role.EnumMember.split("/")[1]==="Series"){o=n[t.Dimension.PropertyPath];i.push(o?o:t.Dimension.PropertyPath)}});return i.join(",")}o.requiresIContext=true;function s(t,r){var a=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!a){return""}var n=h(a);var i=[];var o;e(r,function(e,t){if(t.Role.EnumMember.split("/")[1]==="Category"){o=n[t.Dimension.PropertyPath];i.push(o?o:t.Dimension.PropertyPath)}});return i.join(",")}s.requiresIContext=true;function u(e,t){return o(e,t)!==""}u.requiresIContext=true;function l(e,t){return s(e,t)!==""}l.requiresIContext=true;return{getVizProperties:t,getMeasurePriorityList:r,getValueAxisFeed:a,getValueAxis2Feed:n,getBubbleWidthFeed:i,getColorFeed:o,getShapeFeed:s,testColorFeed:u,testShapeFeed:l}}();f.validateMeasuresDimensions=function(e,t){var r=null;var a=null;if(!e.getDataset()){p.error("OVP-AC: "+t+" Card Error: No Dataset defined for chart.");return false}r=e.getDataset().getMeasures();a=e.getDataset().getDimensions();switch(t){case"Bubble":if(r.length!==3||a.length<1||!r[0].getName()||!r[1].getName()||!r[2].getName()||!a[0].getName()){p.error("OVP-AC: Bubble Card Error: Enter exactly 3 measures and at least 1 dimension.");return false}break;case"Donut":if(r.length!==1||a.length!==1||!r[0].getName()||!a[0].getName()){p.error("OVP-AC: Donut Card Error: Enter exactly 1 measure and 1 dimension.");return false}break;case"Line":if(r.length<1||a.length<1||!r[0].getName()||!a[0].getName()){p.error("OVP-AC: Line Card Error: Configure at least 1 dimensions and 1 measure.");return false}break}return true};f.getSortAnnotationCollection=function(e,t,r){if(t&&t.SortOrder&&t.SortOrder.Path&&t.SortOrder.Path.indexOf("@")>=0){var a=t.SortOrder.Path.split("@")[1];var n=e.getServiceAnnotations()[r.entityType];return n[a]}return t.SortOrder};f.oFullConfig=null;f.getConfig=function(e,r){if(!this.oFullConfig){try{this.oFullConfig=t({},a.getChartsConfiguration())}catch(e){p.error(c.CONFIG_LOAD_ERROR+e)}}if(!e){return this.oFullConfig}var n;try{n=r?e.$EnumMember.split("/")[1]:e.EnumMember.split("/")[1]}catch(e){p.error(c.CARD_ERROR+c.INVALID_CHARTTYPE+c.ANNO_REF);return{}}if(!this.oFullConfig[n]){p.error(c.INVALID_CONFIG+n+" "+c.CONFIG_JSON);return{}}var i;if((i=this.oFullConfig[n].reference)&&this.oFullConfig[i]){var o=t({},this.oFullConfig[i]);this.oFullConfig[n]=o}return this.oFullConfig[n]};f.oCachedMetaModel={};f.cacheODataMetadata=function(t){if(!t){p.error(c.CARD_ERROR+c.CACHING_ERROR);return}var r=this.oCachedMetaModel[t.getId()];if(!r){r={};var a=t.getMetaModel();var i=n.isODataV4(t);if(i){var o=a&&a.getObject("/");var s,u;e(o,function(t,n){if(t!="$kind"){s=a.getObject("/"+n.$Type);u={};e(s,function(e,t){if(t.$kind&&t.$kind=="Property"){u[e]=t}});r[t]=u}})}else{var o=a&&a.getODataEntityContainer();var s,u;e(o.entitySet,function(t,n){s=a.getODataEntityType(n.entityType);u={};e(s.property,function(e,t){u[t.name]=t});r[n.name]=u})}this.oCachedMetaModel[t.getId()]=r}return r};f.checkIfDataExistInEvent=function(e){if(e&&e.getSource()&&e.getSource().getCurrentContexts()){var t=e.getSource().getCurrentContexts().some(function(e){return typeof e==="undefined"});return!t}return false};f.isDataSetEmpty=function(e){if(e&&e.getSource()&&e.getSource().getCurrentContexts()){return e.getSource().getCurrentContexts().length===0}};f.getSemanticProperties=function(t){var r={aTimeAxisProperties:[],oTimeAxisPropertiesAndSemantics:{},propertyType:""};if(t){var a=Object.keys(t);if(a&&a.length){e(a,function(e,a){if(t[a]["type"]==="Edm.String"){if(t[a]["sap:semantics"]==="yearmonth"||t[a]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){r.aTimeAxisProperties.push(a);r.oTimeAxisPropertiesAndSemantics[a]={semantics:"yearmonth"};r.propertyType="yearmonth"}else if(t[a]["sap:semantics"]==="yearquarter"||t[a]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){r.aTimeAxisProperties.push(a);r.oTimeAxisPropertiesAndSemantics[a]={semantics:"yearquarter"};r.propertyType="yearquarter"}else if(t[a]["sap:semantics"]==="yearweek"||t[a]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){r.aTimeAxisProperties.push(a);r.oTimeAxisPropertiesAndSemantics[a]={semantics:"yearweek"};r.propertyType="yearweek"}else if(t[a]["sap:semantics"]==="fiscalyearperiod"||t[a]["com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]){r.aTimeAxisProperties.push(a);r.oTimeAxisPropertiesAndSemantics[a]={semantics:"fiscalyearperiod"}}}})}}return r};f.getMetadata=function(e,t){var r=this.cacheODataMetadata(e)||{};return r[t]};f.isV4TimeSeriesSemantics=function(e,t,r,a){if(a){var n=e.getMetaModel().getObject("/"+t+"/"+r+"@");return n["@com.sap.vocabularies.Common.v1.IsCalendarYear"]||n["@com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]||n["@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]||n["@com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]}var i=this.getMetadata(e,t);return i[r]["com.sap.vocabularies.Common.v1.IsCalendarYear"]||i[r]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]||i[r]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]||i[r]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]};f.hasTimeSemantics=function(e,t,r,a,n){var o=false;var s;var u;var f;var c;var p;var v;if(!t.time||i(t.time)){return o}if(!e){return o}for(var g=0;g<e.length;g++){if(e[g].Dimension){v=n?e[g].Dimension.$PropertyPath:e[g].Dimension.PropertyPath}if(!e[g].Dimension){return o}s=this.getMetadata(r,a);if(s&&s[v]){u=s[v][m.TYPE_KEY]||s[v]["$Type"];f=s[v][m.DISPLAY_FORMAT_KEY];c=s[v][m.SEMANTICS_KEY];p=this.isV4TimeSeriesSemantics(r,a,v,n)}if(u&&u.lastIndexOf("Edm.Date",0)===0){if(u.toLowerCase()==="edm.datetime"){o=f&&f.toLowerCase()==="date"}else{o=true}}if(u==="Edm.String"&&(p||c&&l.indexOf(c)>-1)){o=true}if(o){e.unshift(e.splice(g,1)[0]);break}}return o};f.mapMeasures=function(t,r,a,n){var i,o,s;e(r,function(e,r){if(r["com.sap.vocabularies.Common.v1.Label"]&&r["com.sap.vocabularies.Common.v1.Label"].String===t.measureNames){i=r.name;return false}else if(r["com.sap.vocabularies.Common.v1.Label"]&&r["com.sap.vocabularies.Common.v1.Label"].Path===t.measureNames){i=r.name;return false}else if(r["sap:label"]===t.measureNames){i=r.name;return false}});e(a,function(e,t){if(t.Measure.PropertyPath===i){s=n?t.DataPoint.$AnnotationPath:t.DataPoint.AnnotationPath;if(!t.DataPoint||!s){return false}o=s;return false}});return o};f.validateCardConfiguration=function(e,t){var r=false;if(!e){return r}var a;var n;var s;var u;var l;var f;var m;var v="";var g;var P=e.getView();if(P){v="["+P.getId()+"] "}if(!(g=e.getCardPropertiesModel())){p.error(v+c.CARD_ERROR+"in "+c.CARD_CONFIG+c.NO_CARD_MODEL);return r}m=g.getProperty("/entityType");if(t){var h=e.getMetaModel();m=h.getData().$Annotations[m.$Type]}if(!m||i(m)){p.error(v+c.CARD_ERROR+"in "+c.CARD_ANNO);return r}a=g.getProperty("/selectionAnnotationPath");n=g.getProperty("/chartAnnotationPath");u=g.getProperty("/presentationAnnotationPath");l=g.getProperty("/identificationAnnotationPath");f=g.getProperty("/dataPointAnnotationPath");s=g.getProperty("/contentFragment");r=o.checkExists(a,m,"Selection Variant",false,v,s,t);r=o.checkExists(n,m,"Chart Annotation",true,v,s,t)&&r;r=o.checkExists(u,m,"Presentation Variant",false,v,s,t)&&r;r=o.checkExists(l,m,"Identification Annotation",true,v,s,t)&&r;r=o.checkExists(f,m,"Data Point",false,v,s,t)&&r;return r};f.getPrimitiveValue=function(e,t){var r;if(e){if(e.String){r=e.String}else if(e.Boolean||e.Bool){r=g(e)}else{r=this.getNumberValue(e,t)}}return r};f.getPathFormedOrPrimitiveValue=function(e){if(e){if(e.Path){return"{path:'"+e.Path+"'}"}else{return this.getPrimitiveValue(e)}}else{return""}};f.getPathOrPrimitiveValue=function(e,t){if(e){if(e.Path){return e.Path}else{return this.getPrimitiveValue(e,t)}}else{return""}};f.checkNumberFormat=function(e,t,r,a){var n=e;if(t&&t.DataPoint){var i=a?t.DataPoint.$AnnotationPath:t.DataPoint.AnnotationPath.substring(1),o=r[i],s,u;if(o&&o.ValueFormat){s=o.ValueFormat}else if(o&&o.NumberFormat){s=o.NumberFormat}var l=s&&s.NumberOfFractionalDigits;if(l){u=a?l:l.Int;if(n<Number(u)){n=Number(u)}}}return n};f.getMaxScaleFactor=function(e,t,r,a){var n=e;if(t&&t.DataPoint){var i=a?t.DataPoint.$AnnotationPath:t.DataPoint.AnnotationPath;var o=r[i];var s,u;if(o&&o.ValueFormat){s=o.ValueFormat}else if(o&&o.NumberFormat){s=o.NumberFormat}if(s){if(s.ScaleFactor&&s.ScaleFactor.Decimal){u=Number(s.ScaleFactor.Decimal)}else if(s.ScaleFactor&&s.ScaleFactor.Int){u=Number(s.ScaleFactor.Int)}if(!isNaN(u)){if(n===undefined){n=Number(u)}else if(n>Number(u)){n=Number(u)}}}}return n};f.isMeasureCurrency=function(e,t){return e&&e[t]&&(e[t]["Org.OData.Measures.V1.ISOCurrency"]||e[t][m.SEMANTICS_KEY]&&e[t][m.SEMANTICS_KEY]===m.CURRENCY_CODE)};f.getMaxItems=function(e,t){var r=e.getModel("ovpCardProperties"),a=r.getProperty("/entityType"),n=r.getProperty("/presentationAnnotationPath"),i=a.hasOwnProperty(n)&&a[n],o=i&&i.MaxItems;var s;if(t&&(typeof o==="number"||typeof o==="string"&&!isNaN(o))){s=parseInt(o,10)}else if(o&&!t){s=o.Int32?o.Int32:o.Int}return{itemsLength:+s,dataStep:+r.getProperty("/dataStep")}};f.resolvei18nKeyToChartTitle=function(e,t){var r=e.getModel("@i18n")?e.getModel("@i18n"):e.getModel("i18n");var a=t||"";if(a.match(/{[@]?i18n>.+}/gi)||a.match(/{[@]?i18n&gt;.+}/gi)){var n=r.getResourceBundle();var i=a.indexOf(">")>-1?a.indexOf(">"):a.indexOf("&gt;")+3;var o=a.substring(i+1,a.length-1);a=n.getText(o)}return a};return f},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/base/analytical/VizAnnotationManagerHelper", ["sap/ovp/cards/AnnotationHelper","sap/ovp/app/OVPLogger","sap/ovp/cards/Constants","sap/ovp/app/resources","sap/ovp/cards/generic/base/analytical/Utils"],function(e,i,a,t,r){"use strict";var n=new i("OVP.charts.VizAnnotationManagerHelper");var l=a.errorMessages;var o=a.Annotations;function u(i,t,r){var n=r.getModel("ovpCardProperties");var l=i[i.measureNames];if(t&&t.CriticalityCalculation&&t.CriticalityCalculation.ImprovementDirection){var o=t.CriticalityCalculation.ImprovementDirection.EnumMember||"";var u=c(n,"/deviationRangeLowValue",t.CriticalityCalculation.DeviationRangeLowValue);var g=c(n,"/deviationRangeHighValue",t.CriticalityCalculation.DeviationRangeHighValue);var s=c(n,"/toleranceRangeLowValue",t.CriticalityCalculation.ToleranceRangeLowValue);var C=c(n,"/toleranceRangeHighValue",t.CriticalityCalculation.ToleranceRangeHighValue);return e._calculateCriticalityState(l,o,u,g,s,C,a.Criticality.StateValues)}else if(t&&t.Criticality&&t.Criticality.EnumMember){var v=t.Criticality.EnumMember.split("/");return v[1]}}function c(e,i,a,t){var n=e.getProperty("/tabs");var l=parseInt(e.getProperty("/selectedKey"),10);if(n&&n.length&&l){var o=n[l-1];var u=o[i.substring(1)];return u||r.getPathFormedOrPrimitiveValue(a,t)}else{return e&&e.getProperty&&e.getProperty(i)||r.getPathFormedOrPrimitiveValue(a,t)}}function g(e,i){if(e&&e.CriticalityCalculation&&e.CriticalityCalculation.ImprovementDirection&&e.CriticalityCalculation.ImprovementDirection.EnumMember){var a=e.CriticalityCalculation.ImprovementDirection.EnumMember||"";var t=r.getPathOrPrimitiveValue(e.CriticalityCalculation.DeviationRangeLowValue);var o=r.getPathOrPrimitiveValue(e.CriticalityCalculation.DeviationRangeHighValue);var u=r.getPathOrPrimitiveValue(e.CriticalityCalculation.ToleranceRangeLowValue);var c=r.getPathOrPrimitiveValue(e.CriticalityCalculation.ToleranceRangeHighValue);if(a.endsWith("Minimize")||a.endsWith("Minimizing")){if(c&&o){i.boolFlag=true;return false}else{n.warning(l.CARD_WARNING+l.INVALID_CRITICALITY)}}else if(a.endsWith("Maximize")||a.endsWith("Maximizing")){if(u&&t){i.boolFlag=true;return false}else{n.warning(l.CARD_WARNING+l.INVALID_CRITICALITY)}}else if(a.endsWith("Target")){if(u&&t&&c&&o){i.boolFlag=true;return false}else{n.warning(l.CARD_WARNING+l.INVALID_CRITICALITY)}}}else if(e&&e.Criticality){i.boolFlag=true;return false}else{n.warning(l.CARD_WARNING+l.INVALID_IMPROVEMENT_DIR)}}function s(e,i,a){var t;var r;var l;if(e&&e.indexOf("{")===0){e=e.slice(1,-1);if(e.indexOf(">")!=-1){l=e.split(">");t=l[0];r=l[1]}else if(e.indexOf("&gt;")!=-1){l=e.split("&gt;");t=l[0];r=l[1]}try{var u=i.getModel(t);e=u&&u.getProperty(r)||r}catch(i){e=a[e][o.LABEL_KEY_V4].String;n.error("Unable to read labels from resource file",i)}}return e}function C(e,i,a){var t=e.Measure.PropertyPath;if(i[t]){if(i[t][o.LABEL_KEY_V4]){t=s(i[t][o.LABEL_KEY_V4].String?i[t][o.LABEL_KEY_V4].String:i[t][o.LABEL_KEY_V4].Path,a,i)}else if(i[t][o.LABEL_KEY]){t=i[t][o.LABEL_KEY]}else if(t){t=t}}return t}function v(e,i,a,r){var n=r.getModel("ovpCardProperties");var l=[null,null];if(!e.CriticalityCalculation||!e.CriticalityCalculation.ImprovementDirection||!e.CriticalityCalculation.ImprovementDirection.EnumMember){return l}var o=e.CriticalityCalculation.ImprovementDirection.EnumMember||"";var u=c(n,"/deviationRangeLowValue",e.CriticalityCalculation.DeviationRangeLowValue,i);var g=c(n,"/deviationRangeHighValue",e.CriticalityCalculation.DeviationRangeHighValue,i);var s=c(n,"/toleranceRangeLowValue",e.CriticalityCalculation.ToleranceRangeLowValue,i);var C=c(n,"/toleranceRangeHighValue",e.CriticalityCalculation.ToleranceRangeHighValue,i);if(o.endsWith("Minimize")||o.endsWith("Minimizing")&&(C&&g)){l[0]=t.getText("MINIMIZING_LESS",[a,C]);l[1]=t.getText("MINIMIZING_MORE",[a,g]);l[2]=t.getText("MINIMIZING_CRITICAL",[C,a,g])}else if(o.endsWith("Maximize")||o.endsWith("Maximizing")&&(s&&u)){l[0]=t.getText("MAXIMISING_MORE",[a,s]);l[1]=t.getText("MAXIMISING_LESS",[a,u]);l[2]=t.getText("MAXIMIZING_CRITICAL",[u,a,s])}else if(o.endsWith("Target")&&(s&&u&&C&&g)){l[0]=t.getText("TARGET_BETWEEN",[s,a,C]);l[1]=t.getText("TARGET_AROUND",[a,u,g]);l[2]=t.getText("TARGET_CRITICAL",[u,a,s,C,g])}return l}function I(e,i){if(!i){return}if(i.getProperty("/showTimeAxis")){var a=e&&e.vizProperties;if(Array.isArray(a)){var t=a.find(function(e){return e.path==="timeAxis.levels"});if(t){t.value=["year","month","day","hour","minute"]}}}}return{formThePathForCriticalityStateCalculation:u,updateFlagValueForDataPoint:g,getMeasureName:C,getSemanticLegends:v,getLabelFromAnnotationPath:s,enableTimeAxisForChart:I}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/base/analytical/config", [],function(){"use strict";var e={getChartsConfiguration:function(){return{Line:{default:{type:"line",vizProperties:[{path:"plotArea.isSmoothed",value:false}],properties:{semanticPattern:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"valueAxis.label.allowDecimals",value:true}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"color",type:"dimension",role:"Series"}]},time:{type:"timeseries_line",vizProperties:[{path:"plotArea.isSmoothed",value:false},{path:"timeAxis.levels",value:[]}],dimensions:{min:1,defaultRole:"Category"},measures:{min:1},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"timeAxis",min:1,max:1,type:"dimension"},{uid:"color",type:"dimension",role:"Series"}]}},Bubble:{default:{type:"bubble",properties:{hideLabel:false},vizProperties:[{path:"plotArea.adjustScale",value:true}],dimensions:{max:4},measures:{min:3,max:3,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,max:1,type:"measure",role:"Axis1|Axis2|Axis3",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"valueAxis2",min:1,max:1,type:"measure",role:"Axis2|Axis1|Axis3",vizProperties:[{path:"valueAxis2.layout.maxWidth",value:.4}]},{uid:"bubbleWidth",min:1,max:1,type:"measure",role:"Axis3|Axis1|Axis2"},{uid:"shape",max:2,type:"dimension",role:"Category"},{uid:"color",max:2,type:"dimension",role:"Series",vizProperties:[{path:"plotArea.colorDepth",method:"count",min:1,max:2}]}]},time:{type:"timeseries_bubble",vizProperties:[{path:"timeAxis.levels",value:[]}],properties:{hideLabel:false},dimensions:{min:1,max:1,defaultRole:"Series"},measures:{min:2,max:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,max:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension"},{uid:"bubbleWidth",min:1,max:1,type:"measure",role:"Axis3|Axis1|Axis2"}]}},Donut:{default:{type:"donut",vizProperties:[{path:"plotArea.dataLabel.type",value:"value"}],dimensions:{min:1},measures:{min:1,max:1},resize:{dataStep:10},feeds:[{uid:"size",min:1,max:1,type:"measure"},{uid:"color",min:1,type:"dimension"}]}},Column:{default:{type:"column",properties:{semanticColor:true,semanticPattern:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"color",min:1,type:"dimension",role:"Series"}]},time:{type:"timeseries_column",vizProperties:[{path:"timeAxis.levels",value:[]}],properties:{semanticColor:true},dimensions:{min:1,max:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension"}]}},Bar:{default:{type:"bar",properties:{semanticColor:true,semanticPattern:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category",vizProperties:[{path:"categoryAxis.layout.width",value:.33}]},{uid:"color",min:1,type:"dimension",role:"Series"}]}},ColumnStacked:{default:{type:"stacked_column",dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"color",type:"dimension",role:"Series"}]},time:{type:"timeseries_stacked_column",vizProperties:[{path:"timeAxis.levels",value:[]}],properties:{semanticColor:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension",role:"Category"},{uid:"color",min:0,type:"dimension",role:"Series"}]}},VerticalBullet:{default:{type:"vertical_bullet",properties:{semanticPattern:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"actualValues",min:1,type:"measure",role:"Axis1"},{uid:"targetValues",type:"measure",role:"Axis2"},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"color",min:1,type:"dimension",role:"Series"}]},time:{type:"timeseries_bullet",vizProperties:[{path:"timeAxis.levels",value:[]}],dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"actualValues",min:1,type:"measure",role:"Axis1",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"targetValues",type:"measure",role:"Axis2"},{uid:"timeAxis",min:1,max:1,type:"dimension",role:"Category"},{uid:"color",min:0,type:"dimension",role:"Series"}]}},Combination:{default:{type:"combination",dimensions:{min:1,defaultRole:"Category"},measures:{min:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",min:2,vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"color",type:"dimension",role:"Series"},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"}]},time:{type:"timeseries_combination",vizProperties:[{path:"timeAxis.levels",value:[]}],dimensions:{min:1,max:1,defaultRole:"Category"},measures:{min:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:2,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension"}]}},Scatter:{default:{type:"scatter",vizProperties:[{path:"plotArea.markerSize",value:""}],properties:{hideLabel:false},dimensions:{min:1,max:2},measures:{min:2,max:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",min:1,max:1,role:"Axis1|Axis2|Axis3",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"valueAxis2",type:"measure",min:1,max:1,vizProperties:[{path:"valueAxis2.layout.maxWidth",value:.4}]},{uid:"color",type:"dimension",max:1,role:"Series"},{uid:"shape",type:"dimension",max:1,role:"Category"}]},time:{type:"timeseries_scatter",vizProperties:[{path:"timeAxis.levels",value:[]}],dimensions:{min:1,max:3,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,max:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension",role:"Category"},{uid:"shape",type:"dimension",min:0,role:"Category2"},{uid:"color",type:"dimension",min:0,role:"Series"}]}},Waterfall:{default:{type:"waterfall",properties:{semanticColor:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"waterfallType",max:1,type:"dimension",role:"Series"}]},time:{type:"timeseries_waterfall",vizProperties:[{path:"timeAxis.levels",value:[]}],properties:{semanticColor:true},dimensions:{min:1,max:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension"}]}},CombinationDual:{default:{type:"dual_combination",properties:{hideLabel:false},dimensions:{min:1},measures:{min:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,type:"measure",role:"Axis1",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.5}]},{uid:"valueAxis2",min:1,type:"measure",role:"Axis2",vizProperties:[{path:"valueAxis2.layout.maxWidth",value:.5}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"}]},time:{type:"dual_timeseries_combination",vizProperties:[{path:"timeAxis.levels",value:[]}],properties:{hideLabel:false},dimensions:{min:1,max:1,defaultRole:"Series"},measures:{min:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,max:1,type:"measure",role:"Axis1",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.5}]},{uid:"valueAxis2",min:1,type:"measure",role:"Axis2",vizProperties:[{path:"valueAxis2.layout.maxWidth",value:.5}]},{uid:"timeAxis",min:1,max:1,type:"dimension"}]}},vertical_bullet:{reference:"VerticalBullet"},StackedColumn:{reference:"ColumnStacked"}}}};return{getChartsConfiguration:e.getChartsConfiguration}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/base/error/BaseError.controller", ["sap/ovp/cards/generic/Card.controller","sap/ovp/app/OVPLogger","sap/ovp/cards/NavigationHelper"],function(a,t,e){"use strict";var o=new t("OVP.cards.generic.base.error.BaseError");return a.extend("sap.ovp.cards.generic.base.error",{onInit:function(){a.prototype.onInit.apply(this,arguments)},adjustCardSize:function(){var a=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);if(a.template!=="sap.ovp.cards.stack"){var t=this.oMainComponent&&this.oMainComponent.getLayout();var e=t.getDashboardLayoutUtil();var o=e.getCardDomId(this.sCardId);var i=document.getElementById(o);var r=this.getHeaderHeight();var n=a.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX;var s=2*this.oDashboardLayoutUtil.CARD_BORDER_PX;i.getElementsByClassName("sapOvpCardContentContainer")[0].style.height=n-(r+s)+"px"}},onAfterRendering:function(){if(this.oMainComponent&&this.oMainComponent.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){a.prototype.onAfterRendering.apply(this,arguments);this.adjustCardSize()}if(this.oMainComponent&&this.oMainComponent.getLayout().getMetadata().getName()==="sap.ovp.ui.EasyScanLayout"){this.setNavigableStyleForNoDataCard()}if(this.getView()&&this.getView().byId("sapOvpCardAdditionalActions")){this.getView().byId("sapOvpCardAdditionalActions").setEnabled(true)}},onRefresh:function(a){var t=this.oMainComponent._getCardFromManifest(a);var e=this.oMainComponent.aErrorCards.indexOf(a);if(e>-1){this.oMainComponent.aErrorCards.splice(e,1)}t&&this.oMainComponent.createCard(t)},resizeCard:function(){try{this.adjustCardSize()}catch(a){o.warning("OVP resize: "+this.cardId+" catch "+a.toString())}},setNavigableStyleForNoDataCard:function(){var a=false;var t=this.getOwnerComponent().getComponentData();var o=this.getModel();var i=this.getEntityType();var r=this.getView().getModel("ovpCardProperties");if(t&&t.mainComponent){var n=t.mainComponent;if(n.bGlobalFilterLoaded){a=!e.checkHeaderNavigationDisabledForAnalyticalCard(r)&&e.checkNavigation(o,i,r)}}if(a){this.getView().addStyleClass("sapOvpCardNavigable")}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/base/error/Component", ["sap/ovp/cards/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.generic.base.error.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.base.error.Error"},state:{type:"string",defaultValue:"Error"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.generic.base.error.BaseError"}},version:"1.141.0",library:"sap.ovp"}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/base/linklist/BaseLinklist.controller", ["sap/ovp/cards/generic/Card.controller","sap/ui/thirdparty/jquery","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/CommonUtils","sap/m/List","sap/ui/core/ResizeHandler","sap/m/MessageToast","sap/m/Image","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ovp/app/OVPLogger","sap/ui/util/openWindow","sap/ovp/cards/NavigationHelper"],function(t,jQuery,e,i,s,a,r,n,o,d,h,l,g){"use strict";var c=27,f=8,p=8,u=8,v="ovpLinkList",I="pictureCarousel",L="ovpCardHeader",C="sapMCrslActive";var m={onBeforeRendering:function(t){this.itemOnBeforeRendering(t)}};var y={onAfterRendering:function(t){this.itemOnAfterRendering(t)}};var P=new h("ovp.cards.generic.base.linklist.BaseLinklist");return t.extend("sap.ovp.cards.generic.base.linklist",{onInit:function(){t.prototype.onInit.apply(this,arguments);this.oListRow=this.byId("ovpListRow");if(this.oListRow){this.oListRow.addStyleClass("ovpListRowNoData")}this._bInitialLoad=true;this._bListenerAttached=false;this._bListeningPopOver=false},onBeforeRendering:function(t){var e=this.getCardPropertiesModel();if(e.getProperty("/listFlavor")==="standard"&&!e.getProperty("/staticContent")){var i=this.byId("ovpCLI");if(i){i.addEventDelegate(m,this)}}},onAfterRendering:function(i){t.prototype.onAfterRendering.apply(this,arguments);this.attachingListenerToTheEventRefresh();var s=this.getCardPropertiesModel();var a=s.getProperty("/cardLayout/rowSpan");var r=s.getProperty("/cardLayout/colSpan");var n=this.getCardItemsBinding();if(n&&n.getPath()){var o=this;n.attachDataReceived(function(t){o.onDataReceived.call(o,t)})}switch(s.getProperty("/listFlavor")){case"standard":if(s.getProperty("/staticContent")){if(r&&a){if(!this._bInitialLoad&&this._aLinkListIds){this._mergeAllTheDataInOneList()}if(a===1){this._aLinkListIds=[v];this._setListColumnWidthInStandardCard(1)}else{this._itemOnEventBuildStandard(s,r,a,true)}}else{this._aLinkListIds=[v];this._setListColumnWidthInStandardCard(1)}}break;case"carousel":var d=this.byId(I);if(d.getId().indexOf(".")!==-1){var h=d.$();h.off("beforeSlide");h.on("beforeSlide",this.onBeforeSlide);h.trigger("beforeSlide",[1,1])}if(s.getProperty("/staticContent")){if(a&&!(!s.getProperty("/defaultSpan")&&s.getProperty("/cardLayout/autoSpan"))){this._setListHeightInCarouselCard(a)}else{this._setListHeightInCarouselCard(-1)}this._setCarouselImageProperties()}else{d.addEventDelegate(y,this)}break;default:break}if(!e.checkIfAPIIsUsed(this)&&s.getProperty("/layoutDetail")==="resizable"){var l=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var g=this.oDashboardLayoutUtil.getCardDomId(this.cardId);var c=document.getElementById(g);l.dashboardLayout.showOnlyHeader?c.classList.add("sapOvpMinHeightContainer"):c.classList.remove("sapOvpMinHeightContainer")}var f=this.byId("ovpLinkList");if(f){f.attachBrowserEvent("click",this.updateControlPressed)}},onBeforeSlide:function(t,e,i){if(t.target!=this){return}var s=this.id+"-pageIndicator",a=document.getElementById(s);var r=a.querySelector("[data-slide='"+e+"']");r.classList.remove(C);r=a.querySelector("[data-slide='"+i+"']");r.classList.add(C)},getCardItemsBinding:function(){var t=this.getView().byId("ovpLinkList");var e=this.getView().byId("pictureCarousel");if(t){return t.getBinding("items")}else if(e){return e.getBinding("pages")}else{return null}},attachingListenerToTheEventRefresh:function(){var t=this.getCardItemsBinding();var e=this.getCardPropertiesModel();if(t){if(!this._bListenerAttached){t.attachRefresh(function(){if(this._aLinkListIds){for(var t=1;t<this._aLinkListIds.length;t++){var e=this.byId(this._aLinkListIds[t]);var i=e.getItems().length;e.getItems().splice(0,i);e.destroy()}this._aLinkListIds.splice(0,this._aLinkListIds.length)}if(this._oListRest){this._oListRest.destroy()}}.bind(this));t.attachChange(function(){this.settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter();if(e.getProperty("/listFlavor")==="carousel"){var i=this.byId(I);i.addEventDelegate(y,this)}if(e.getProperty("/listFlavor")==="standard"){var s=t.getLength();if(s===0){var a=this.byId(v).$().parent();a.width("100%")}}}.bind(this))}else if(this._aLinkListIds){this.settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter()}this._bListenerAttached=true}},settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter:function(){if(this._aLinkListIds){var t=this.getCardPropertiesModel();var e=t.getProperty("/cardLayout/rowSpan");if(!t.getProperty("/defaultSpan")&&t.getProperty("/cardLayout/autoSpan")){e=this.getSpansWhenNoDefaultSpanMentioned()}var i=t.getProperty("/cardLayout/colSpan");if(e){this._setListHeightInStandardCard(e)}if(i){this._setListColumnWidthInStandardCard(this._iVisibleColums)}else{this._setListColumnWidthInStandardCard(1)}}},itemOnBeforeRendering:function(t){var e,i=this.getCardPropertiesModel();switch(i.getProperty("/listFlavor")){case"standard":if(!i.getProperty("/defaultSpan")&&!i.getProperty("/staticContent")&&i.getProperty("/cardLayout/autoSpan")){e=this.getSpansWhenNoDefaultSpanMentioned()}else{e=i.getProperty("/cardLayout/rowSpan")}var s=i.getProperty("/cardLayout/colSpan");var a=this.byId(v);var r=a.getItems();for(var n=0;n<r.length;n++){r[n].removeEventDelegate(m)}if(this._bInitialLoad){this._itemOnEventBuildStandard(i,s,e,true)}else{this._itemOnEventBuildStandard(i,s,e,false)}break;case"carousel":P.info("FYI: currently nothing special to handle here");break;default:break}},getSpansWhenNoDefaultSpanMentioned:function(){var t=this.getCardPropertiesModel();var e=t.getProperty("/staticContent");var i=e&&e.length||this.getCardItemsBinding()&&this.getCardItemsBinding().getLength()||0;var s=e?this.getItemHeight(this,v,true):t.getProperty("/cardLayout/itemHeight");var a=0;var r=this.byId(L);if(r){a=r.$().outerHeight()}var n=t.getProperty("/cardLayout/iRowHeightPx");return Math.ceil((s*Math.min(i,6)+(a+p+u))/n)},itemOnAfterRendering:function(t){var e=this.getCardPropertiesModel();var i=e.getProperty("/cardLayout/rowSpan");var s=e.getProperty("/cardLayout/colSpan");switch(e.getProperty("/listFlavor")){case"standard":try{var a=this.byId(v);var r=a.getItems(this._aLinkListIds[this._aLinkListIds.length-1]);r[r.length-1].removeEventDelegate(y)}catch(t){P.info("FYI: Unable to remove the delagted event at the last item of the last list")}if(!e.getProperty("/defaultSpan")&&e.getProperty("/cardLayout/autoSpan")){i=this.getSpansWhenNoDefaultSpanMentioned()}if(i){this._setListHeightInStandardCard(i)}if(s){this._setListColumnWidthInStandardCard(this._iVisibleColums)}else{this._setListColumnWidthInStandardCard(1)}break;case"carousel":try{var n=this.byId(I);n.removeEventDelegate(y)}catch(t){P.info("FYI: Unable to remove the delagted event on the carousel")}if(i&&!(!e.getProperty("/defaultSpan")&&e.getProperty("/cardLayout/autoSpan"))){this._setListHeightInCarouselCard(i)}else{this._setListHeightInCarouselCard(-1)}this._setCarouselImageProperties();break;default:break}this._bInitialLoad=false},_itemOnEventBuildStandard:function(t,e,i,a){var r;var n=this.byId(v);var o=this.getView().byId(this.getView().getId()+"--RestOfData");if(o){o.destroy()}if(a&&this._oListRest===undefined){this._oListRest=new s(this.getView().getId()+"--RestOfData",{})}this._aLinkListIds=[v];this._iAvailableItems=n.getItems().length;var d=t.getProperty("/cardLayout/items");if(d!==undefined){this._iNoOfItemsPerColumn=d;r=d;this._iVisibleColums=1}else{var h=t.getProperty("/staticContent")?this.getItemHeight(this,v,true):t.getProperty("/cardLayout/itemHeight");var l=this._getListHeightInStandardCard(i);this._iNoOfItemsPerColumn=Math.floor(l/h);var g=Math.ceil(this._iAvailableItems/this._iNoOfItemsPerColumn);this._iVisibleColums=Math.min(g,e);r=this._iVisibleColums*this._iNoOfItemsPerColumn}if(r>this._iAvailableItems){r=this._iAvailableItems}else{for(var c=r;c<this._iAvailableItems;c++){n.getItems()[c].setVisible(false)}}if(this._iVisibleColums>1){var f=this.byId("ovpListRow");var p=this._iNoOfItemsPerColumn;var u=0;for(var I=this._iNoOfItemsPerColumn;I<r;I++){if(p>=this._iNoOfItemsPerColumn){p=0;u++;var L=v+u;var C=new s(this.getView().getId()+"--"+L,{showSeparators:n.getProperty("showSeparators")});this._aLinkListIds.push(L);if(n.hasStyleClass("_iNoOfItemsPerColumnPaddingCozy")){C.addStyleClass("sapOvpLinkListStandardPaddingCozy")}else{C.addStyleClass("sapOvpLinkListStandardPaddingCompact")}f.addItem(C)}C.addItem(n.getItems()[this._iNoOfItemsPerColumn]);p++}if(C){var m=C.getItems();m[m.length-1].addEventDelegate(y,this)}}else{if(a){this.itemOnAfterRendering(null)}else{var P=n.getItems();P[P.length-1].addEventDelegate(y,this)}}},resizeCard:function(t,e){var i=this.getCardPropertiesModel();i.setProperty("/cardLayout/rowSpan",t.rowSpan);i.setProperty("/cardLayout/colSpan",t.colSpan);i.setProperty("/cardLayout/itemHeight",e.itemHeight);switch(i.getProperty("/listFlavor")){case"standard":this._resizeStandard(t,i);break;case"carousel":this._resizeCarousel(t);break;default:break}if(this.resizeHandlerId){a.deregister(this.resizeHandlerId);this.resizeHandlerId=null}var s=this.getView().byId("ovpCardContentContainer").getDomRef();if(s){if(t.showOnlyHeader){s.classList.add("sapOvpContentHidden")}else{s.classList.remove("sapOvpContentHidden")}}},_mergeAllTheDataInOneList:function(){var t=this._aLinkListIds.length;var e=this.getView().byId("ovpLinkList");var i=-1;for(var s=0;s<e.getItems().length;s++){if(!e.getItems()[s].getVisible()){i=s;break}}for(var a=1;a<t;a++){var r=this.getView().byId(this._aLinkListIds[a]);var n=r.getItems().length;for(var o=0;o<n;o++){if(i===-1){e.addItem(r.getItems()[0])}else{e.insertItem(r.getItems()[0],i);i++}}r.destroy()}},_resizeStandard:function(t,e){if(this._aLinkListIds){this._mergeAllTheDataInOneList();var i=this.getView().byId("ovpLinkList");this._aLinkListIds.splice(0,this._aLinkListIds.length);var s=this._oListRest.getItems().length;try{for(var a=0;a<s;a++){i.addItem(this._oListRest.getItems()[0])}}catch(t){P.info("Error: "+t)}for(var r=0;r<i.getItems().length;r++){i.getItems()[r].setVisible(true)}if(!i){var n=this.byId(v).$().parent();n.width("100%");var o=e.getProperty("/cardLayout/rowSpan");if(o){this._setListHeightInStandardCard(o)}}var d=i.getBindingInfo("items");var h=e.getProperty("/staticContent")?this.getItemHeight(this,v,true):e.getProperty("/cardLayout/itemHeight");var l=this._getListHeightInStandardCard(t.rowSpan);var g=Math.floor(l/h)*t.colSpan;this._bInitialLoad=false;jQuery(this.getView().$()).find(".sapOvpWrapper").css({height:l+"px"});if(d){if(g>this._iAvailableItems&&d.length<=this._iAvailableItems){d.length=g;i.bindItems(d);this._bListenerAttached=false;this.attachingListenerToTheEventRefresh()}else{this._itemOnEventBuildStandard(e,t.colSpan,t.rowSpan,false)}}else{this._itemOnEventBuildStandard(e,t.colSpan,t.rowSpan,false)}}},_resizeCarousel:function(t){this._setListHeightInCarouselCard(t.rowSpan);this._setCarouselImageProperties()},_setListHeightInCarouselCard:function(t){var e=0,i=this.byId(I);if(t!==-1){var s=0;var a=this.byId(L);if(a){s=a.$().outerHeight()}var r=this.getCardPropertiesModel();var n=r.getProperty("/cardLayout/iRowHeightPx");e=t*n-(s+c+f);i.$().height(e+16)}else{var o=i.$().width(),d=null,h=i.getPages(),l=0;for(var g=0;g<h.length;g++){d=h[g];if(d&&d.getItems().length>1){l=Math.max(l,d.getItems()[0].$().outerHeight())}}var p=i.$().find(".sapMCrslControlsBottom.sapMCrslControls").outerHeight();e=o+(l+p);i.$().height(e)}},_setCarouselImageProperties:function(){var t=this.byId(I),e=t.getPages(),i=t.$().height(),s=e.length>1?t.$().find(".sapMCrslControlsBottom.sapMCrslControls").outerHeight():0,a=null,r=null,o=0,d,h;for(var l=0;l<e.length;l++){a=e[l];if(a){d=a.getAggregation("items")&&a.getItems()[0];if(d){o=d.hasStyleClass("sapOvpCarouselContentHeader")?d.$().outerHeight():0;h=a.getItems()[a.getItems().length-1];r=h.getAggregation("items")&&h.getItems()[0];if(r instanceof n){this._setCarouselImageHeight(r,i-o-s)}}}}},_setCarouselImageHeight:function(t,e){var i=t.getDomRef().naturalHeight;if(i!==0){i<e?t.setHeight(i+"px"):t.setHeight(e+"px")}},_setListHeightInStandardCard:function(t){var e=0;var i;var s;i=this.byId(v);if(i){e=this._getListHeightInStandardCard(t);s=i.$().parent();s.height(e)}if(this._aLinkListIds){for(var a=1;a<this._aLinkListIds.length;a++){i=this.byId(this._aLinkListIds[a]);e=this._getListHeightInStandardCard(t);s=i.$().parent();s.height(e)}}},_getListHeightInStandardCard:function(t){var e=0;var i=this.getCardPropertiesModel();if(t){var s=0;var a=this.byId(L);if(a){s=a.$().outerHeight()}var r=i.getProperty("/cardLayout/iRowHeightPx");e=t*r-(s+p+u)}return e},_setListColumnWidthInStandardCard:function(t){var e;var i;var s="100%";if(this._aLinkListIds){if(this._aLinkListIds.length>1){for(var a=0;a<this._aLinkListIds.length;a++){e=this.byId(this._aLinkListIds[a]);i=e.$().parent();s=100/t+"%";i.width(s)}}else{e=this.byId(this._aLinkListIds[0]);if(e){i=e.$().parent();i.width(s)}}}},onLinkListItemPressLocalData:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var s=t.getSource().data("targetUri");var a=t.getSource().data("openInNewWindow");var r=this.getView().getModel("ovpCardProperties").getProperty("/baseUrl");if(s){s=this.buildUrl(r,s);if(a==="true"){l(s,"newWindow")}else{window.location.href=s}}}},onLinkListActionPressLocalData:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var s=t.getSource().data("dataAction");this.getView().getModel().callFunction(s,{method:"POST",urlParameters:{FunctionImport:s},success:this.onFuImpSuccess.bind(this),error:this.onFuImpFailed.bind(this)})}},onFuImpSuccess:function(t){r.show(o.getText("Toast_Action_Success"),{duration:3e3})},onFuImpFailed:function(t){r.show(o.getText("Toast_Action_Error"),{duration:3e3})},onLinkListItemPress:function(t){var s=d.bCRTLPressed?d.constants.explace:d.constants.inplace;d.bCRTLPressed=false;if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var a=g.getEntityNavigationEntries(t.getSource().getBindingContext(),this.getModel(),this.getEntityType(),this.getCardPropertiesModel(),this.getCardPropertiesModel().getProperty("/annotationPath"));this.doNavigation(t.getSource().getBindingContext(),a[0],s)}},onLinkPopover:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var s;switch(this.getCardPropertiesModel().getProperty("/listFlavor")){case"standard":s=t.getSource().getParent().getAggregation("items")[0];break;case"carousel":s=t.getSource().getParent().getAggregation("items")[0];break;default:break}var a=this.getCardPropertiesModel();if(a.getProperty("/listFlavor")==="carousel"){var r=this.byId(I);r.addEventDelegate(y,this)}s.bindElement(t.getSource().getBindingContext().getPath());s.openBy(t.getSource());if(!this._bListeningPopOver){s.attachAfterOpen(function(){this.settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter()}.bind(this))}this._bListeningPopOver=true}},onLinkListLineItemUrl:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var s,a="com.sap.vocabularies.UI.v1.LineItem",r;if(i.isODataV4(this.getView().getModel())){r=this.entityType["@"+a][0].Url}else{r=this.entityType[a][0].Url}if(r.hasOwnProperty("String")){s=r.String}else{var n=g.getEntityNavigationEntries(t.getSource().getBindingContext(),this.getModel(),this.getEntityType(),this.getCardPropertiesModel(),a)[0];s=n.url}if(s){window.location.href=s}else{P.info("LinkList Standard Card: No Navigation on line item")}}},onLinkNavigationSingleTarget:function(t){var s=d.bCRTLPressed?d.constants.explace:d.constants.inplace;d.bCRTLPressed=false;if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var a=g.getEntityNavigationEntries(t.getSource().getBindingContext(),this.getModel(),this.getEntityType(),this.getCardPropertiesModel(),undefined);this.doNavigation(t.getSource().getBindingContext(),a[0],s)}},buildUrl:function(t,e){if(e.lastIndexOf(t,0)===0||e.indexOf("://")>0){return e}else if(e.lastIndexOf("/",0)===0){return t+e}else{return t+"/"+e}},onLinkListActionPress:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var s=t.getSource().data("dataAction");this.getView().getModel().callFunction(s,{method:"POST",urlParameters:{FunctionImport:s},success:this.onFuImpSuccess.bind(this),error:this.onFuImpFailed.bind(this)})}},onLinkListSemanticObjectPressLocalData:function(t){var s=d.bCRTLPressed?d.constants.explace:d.constants.inplace;d.bCRTLPressed=false;if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var a=parseInt(t.getSource().data("contentRowIndex"),10);this._oStaticContent=this.getCardPropertiesModel().getProperty("/staticContent");if(this._oStaticContent[a].semanticObject&&this._oStaticContent[a].action){var n={semanticObject:this._oStaticContent[a].semanticObject,action:this._oStaticContent[a].action,iStaticLinkListIndex:a};this.doIntentBasedNavigation(null,n,false,s)}else{r.show(o.getText("Toast_Action_Error"),{duration:3e3})}}},onExit:function(){t.prototype.onExit.apply(this,arguments)},onDataReceived:function(){this.bdataLoadedToEnableAddToInsight=false}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/base/linklist/Component", ["sap/ovp/cards/generic/Component","sap/ovp/cards/linklist/AnnotationHelper"],function(e,t){"use strict";return e.extend("sap.ovp.cards.generic.base.linklist.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.linklist.LinkList"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.generic.base.linklist.BaseLinklist"},communicationPath:{type:"string",defaultValue:"com.sap.vocabularies.Communication.v1.Contact"},headerAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.HeaderInfo"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"}},version:"1.141.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}},getCustomPreprocessor:function(){}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/base/list/BaseList.controller", ["sap/ovp/cards/generic/Card.controller","sap/ui/thirdparty/jquery","sap/ui/model/json/JSONModel","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/CommonUtils","sap/ovp/cards/AnnotationHelper","sap/ovp/app/OVPUtils","sap/ovp/app/OVPLogger","sap/ovp/cards/NavigationHelper","sap/ovp/insights/IntegrationCard","sap/m/MessageBox","sap/ovp/app/resources","sap/ovp/cards/ViewCacheHelper"],function(e,jQuery,t,a,i,s,n,o,r,d,p,h,g){"use strict";var l=new o("ovp.cards.generic.base.list.BaseList");return e.extend("sap.ovp.cards.generic.base.list",{counter:0,minMaxModel:{},bdataLoadedToEnableAddToInsight:false,onInit:function(){e.prototype.onInit.apply(this,arguments);this.counter=0;this.minMaxModel=new t;this.minMaxModel.setData({minValue:0,maxValue:0});this.getView().setModel(this.minMaxModel,"minMaxModel")},onContactDetailsLinkPress:function(e){var t,a,i;a=e.getSource();t=a.getParent().getAggregation("items")[0];i=a.getBindingContext();if(!i){return}t.bindElement(i.getPath());t.openBy(a)},onAfterRendering:function(){e.prototype.onAfterRendering.apply(this,arguments);var t=this.getCardPropertiesModel().getProperty("/imageSupported");var i=this.getCardPropertiesModel().getProperty("/densityStyle");if(t){var s=this.byId("ovpList");s.attachUpdateFinished(function(){this._addImageCss(i)}.bind(this))}if(!a.checkIfAPIIsUsed(this)&&this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var n=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var o=Math.max(n.dashboardLayout.headerHeight,this.getHeaderHeight());var r=this.oDashboardLayoutUtil.getCardDomId(this.cardId);var d=document.getElementById(r);if(!n.dashboardLayout.autoSpan){d.getElementsByClassName("sapOvpWrapper")[0].style.height=n.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX-(o+2*this.oDashboardLayoutUtil.CARD_BORDER_PX)+"px"}if(n.dashboardLayout.showOnlyHeader){d.classList.add("sapOvpMinHeightContainer")}}var p=this.getCardItemsBinding();if(p&&p.getPath()){p.attachDataReceived(this.onDataReceived.bind(this));p.attachDataRequested(this.onDataRequested.bind(this))}var h=this.byId("ovpList");if(h){h.attachBrowserEvent("click",this.updateControlPressed.bind(this))}},onDataRequested:function(){var e=this.byId("ovpList");e&&e.setBusy(true)},_addImageCss:function(e){var t=this.byId("ovpList");var a=t.getItems();var i=false;var s=t.getDomRef().getAttribute("class");if(e==="cozy"){s=s+" sapOvpListImageCozy"}else{s=s+" sapOvpListImageCompact"}t.getDomRef().setAttribute("class",s);a.forEach(function(e){if(e.getIcon().indexOf("icon")!=-1){i=true}});a.forEach(function(t){var a=t.getDomRef();var s;if(a&&a.children[0]&&a.children[0].children[0]){s=a.children[0].children[0]}var n=t.getDescription();var o=t.getIcon();var r=i;var d=t.getTitle();var p=d.split(" ").map(function(e){return e?e[0].toUpperCase():""}).join("").substring(0,2);if(o!=""&&o.indexOf("icon")==-1){i=false}if(i&&a&&a.children[0]){jQuery(a.children[0]).addClass("sapOvpIconListItem")}else if(a&&a.children[0]){jQuery(a.children[0]).addClass("sapOvpImageListItem")}if(s&&e==="cozy"&&i===false){if(s){var h=s.getAttribute("class");h=h+" sapOvpImageCozy";s.setAttribute("class",h)}}var g="";if(i===true&&n===""){g=e==="compact"?"sapOvpListWithIconNoDescCompact":"sapOvpListWithIconNoDescCozy"}else if(i===false&&n===""){g=e==="compact"?"sapOvpListWithImageNoDescCompact":"sapOvpListWithImageNoDescCozy"}else{g=e==="compact"?"sapOvpListWithImageIconCompact":"sapOvpListWithImageIconCozy"}t.addStyleClass(g);if(a&&a.children[0]&&o===""&&a.children[0].id!=="ovpIconImagePlaceHolder"){var l=document.createElement("div");l.innerText=p;l.setAttribute("id","ovpIconImagePlaceHolder");l.className=i===true?"sapOvpIconPlaceHolder":"sapOvpImagePlaceHolder";if(i===false&&e==="cozy"){l.className=l.className+" sapOvpImageCozy"}a.insertBefore(l,a.children[0])}i=r})},onListItemPress:function(e){var t=n.bCRTLPressed?n.constants.explace:n.constants.inplace;n.bCRTLPressed=false;if(a.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(e)}}else{var s=r.getEntityNavigationEntries(e.getSource().getBindingContext(),this.getModel(),this.getEntityType(),this.getCardPropertiesModel(),this.getCardPropertiesModel().getProperty("/annotationPath"));this.doNavigation(e.getSource().getBindingContext(),s[0],t)}},getCardItemsBinding:function(){var e=this.getView().byId("ovpList");return e&&e.getBinding("items")},_getMinMaxObjectFromContext:function(e){this.counter++;var t=this.getModel();var a=i.isODataV4(t);var n=a?this.getEntitySet():this.getEntityType(),o=this.getCardPropertiesModel().getProperty("/annotationPath"),o=a?"@"+o:o,r=a?this.getMetaModel().getData(o).$Annotations[n.$Type][o]:n[o],d=a?this.getMetaModel().createBindingContext("/"+n.$Type+"/@"+o):this.getMetaModel().createBindingContext(n.$path+"/"+o),p={minValue:0,maxValue:0};var h=s.isFirstDataPointPercentageUnit(d,r);if(h){p.minValue=0;p.maxValue=100;p.isPercentage=true;return p}var g=s.getFirstDataPointValue(d,r),l=this.getView().byId("ovpList"),c=l.getBinding("items"),v=c.getCurrentContexts();for(var u=0;e?u<e:u<v.length;u++){if(v[u]){var m=a?v[u].getValue(g):t.getOriginalProperty(g,v[u]),f=parseFloat(m,10);if(f<p.minValue){p.minValue=f}else if(f>p.maxValue){p.maxValue=f}}}return p},_updateMinMaxModel:function(e){var t=this._getMinMaxObjectFromContext(e);this.minMaxModel.setData({minValue:t.minValue,maxValue:t.maxValue,isPercentage:t.isPercentage||false});this.minMaxModel.refresh();return t},returnBarChartValue:function(e){this._updateMinMaxModel();var t=parseFloat(e,10);return t},getCardItemBindingInfo:function(){var e=this.getView().byId("ovpList");return e.getBindingInfo("items")},resizeCard:function(e,t){var a,i,s;try{var n=document.getElementById(this.oDashboardLayoutUtil.getCardDomId(this.cardId)),o=this.getCardItemBindingInfo(),r=this.getHeaderHeight(),d=this.getView(),p=d.byId("ovpCardContentContainer").getDomRef();if(e.showOnlyHeader){p.classList.add("sapOvpContentHidden");a=0}else{p.classList.remove("sapOvpContentHidden");s=r+t.dropDownHeight;i=e.rowSpan*e.iRowHeightPx-s;a=Math.abs(Math.floor(i/t.itemHeight));n.style.height=e.rowSpan*e.iRowHeightPx+"px"}p.style.height=e.rowSpan*e.iRowHeightPx-(r+2*e.iCardBorderPx)+"px";if(a!==o.length){o.length=a;e.noOfItems=o.length;this._updateMinMaxModel(o.length);this.getCardItemsBinding().refresh();var h=this.getCardPropertiesModel().getProperty("/tabs");if(h&&h.length>0){g.clearViewCacheForTabbedCard(d)}}else{this._handleCountHeader()}}catch(e){l.warning("OVP resize: "+this.cardId+" catch "+e.toString())}},onShowInsightCardPreview:function(){var e=this.getView();var t=e.getController();var a=t.oCardComponentData;var i=this;if(this.checkIBNNavigationExistsForCard()){d.showCard({entitySet:t.entitySet,entityType:t.entityType,cardComponentName:"List",cardComponentData:a,cardComponent:t.oCardComponent,itemBindingInfo:i.getCardItemBindingInfo(),view:e}).then(function(e){i.saveGeneratedCardManifest(e)})}else{p.error(h.getText("INT_IBN_NAVIGATION_NOT_FOUND_ERROR_MESSAGE_TEXT"),{details:h.getText("INT_IBN_NAVIGATION_NOT_FOUND_ERROR_MESSAGE_VIEW_DETAILS_TEXT")})}},onExit:function(){e.prototype.onExit.apply(this,arguments)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/base/list/Component", ["sap/ovp/cards/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.generic.base.list.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.list.List"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.generic.base.list.BaseList"},annotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.LineItem"},countHeaderFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.CountHeader"},headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.KPIHeader"},enableAddToInsights:{type:"boolean",defaultValue:true}},version:"1.141.0",library:"sap.ovp",includes:[],dependencies:{libs:["sap.suite.ui.microchart"],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/base/table/BaseTable.controller", ["sap/ovp/cards/generic/Card.controller","sap/ui/thirdparty/jquery","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/CommonUtils","sap/ovp/app/OVPUtils","sap/ovp/app/OVPLogger","sap/ovp/insights/IntegrationCard","sap/m/MessageBox","sap/ovp/app/resources","sap/ovp/cards/NavigationHelper","sap/ovp/cards/ViewCacheHelper","sap/ui/core/Element"],function(e,jQuery,t,a,i,o,n,s,r,d,h,g){"use strict";var l=new o("ovp.cards.generic.base.table.BaseTable");return e.extend("sap.ovp.cards.generic.base.table",{bdataLoadedToEnableAddToInsight:false,onInit:function(){e.prototype.onInit.apply(this,arguments)},onColumnListItemPress:function(e){var o=i.bCRTLPressed?i.constants.explace:i.constants.inplace;i.bCRTLPressed=false;if(t.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e)}}else{var n=d.getEntityNavigationEntries(e.getSource().getBindingContext(),this.getModel(),this.getEntityType(),this.getCardPropertiesModel(),this.getCardPropertiesModel().getProperty("/annotationPath"));this.doNavigation(e.getSource().getBindingContext(),n[0],o)}},onContactDetailsLinkPress:function(e){if(this.oPopover){this.oPopover.setVisible(false)}var t,a;t=e.getSource();this.oPopover=t.getParent().getAggregation("items")[0];a=t.getBindingContext();if(!a){return}this.oPopover.bindElement(a.getPath());this.oPopover.setVisible(true);this.oPopover.openBy(t)},getCardItemsBinding:function(){var e=this.getView().byId("ovpTable");return e.getBinding("items")},onAfterRendering:function(){e.prototype.onAfterRendering.apply(this,arguments);var a=this.getOwnerComponent().getComponentData();var i=this.getCardPropertiesModel();var o=this.getView().byId("ovpTable");if(!t.checkIfAPIIsUsed(this)&&i.getProperty("/layoutDetail")==="resizable"){var n=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(a.cardId);var s=Math.max(n.dashboardLayout.headerHeight,this.getHeaderHeight());var r=this.oDashboardLayoutUtil.getCardDomId(a.cardId);var d=document.getElementById(r);if(!n.dashboardLayout.autoSpan){d.getElementsByClassName("sapOvpWrapper")[0].style.height=n.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX+1-(s+2*this.oDashboardLayoutUtil.CARD_BORDER_PX)+"px"}if(n.dashboardLayout.showOnlyHeader){d.classList.add("sapOvpMinHeightContainer")}this.addColumnInTable(jQuery(d),{colSpan:n.dashboardLayout.colSpan})}else{var h=o.getAggregation("columns");for(var g=0;g<3;g++){if(h[g]){h[g].setStyleClass("sapTableColumnShow").setVisible(true)}}}var l=this.getCardItemsBinding();if(l&&l.getPath()){l.attachDataReceived(this.onDataReceived.bind(this));l.attachDataRequested(this.onDataRequested.bind(this))}if(o){o.attachBrowserEvent("click",this.updateControlPressed.bind(this))}},onDataRequested:function(){var e=this.getView().byId("ovpTable");e&&e.setBusy(true)},getCardItemBindingInfo:function(){var e=this.getView().byId("ovpTable");return e.getBindingInfo("items")},addColumnInTable:function(e,t){if(t.colSpan>=1){if(jQuery(e).find("tr").length!=0){var a=g.getElementById(jQuery(e).find(".sapMList").attr("id"));var i=a.getAggregation("columns");var o=t.colSpan;var n=o+1;for(var s=0;s<6;s++){if(i[s]){if(s<=n){i[s].setStyleClass("sapTableColumnShow").setVisible(true)}else{i[s].setStyleClass("sapTableColumnHide").setVisible(false)}}}}}},resizeCard:function(e,t){var a,i,o,i;try{var n=document.getElementById(this.oDashboardLayoutUtil.getCardDomId(this.cardId)),s=this.getCardItemBindingInfo(),r=this.getHeaderHeight(),d=this.getView(),g=d.byId("ovpCardContentContainer").getDomRef();if(e.showOnlyHeader){g.classList.add("sapOvpContentHidden");a=0}else{g.classList.remove("sapOvpContentHidden");o=r+t.dropDownHeight;i=e.rowSpan*e.iRowHeightPx-o-t.itemHeight;a=Math.abs(Math.floor(i/t.itemHeight));n.style.height=e.rowSpan*e.iRowHeightPx+"px"}g.style.height=e.rowSpan*e.iRowHeightPx-(r+2*e.iCardBorderPx)+"px";this.addColumnInTable(d.getDomRef(),e);if(a!==s.length){s.length=a;e.noOfItems=s.length;this.getCardItemsBinding().refresh();var p=this.getCardPropertiesModel().getProperty("/tabs");if(p&&p.length>0){h.clearViewCacheForTabbedCard(d)}}else{this._handleCountHeader()}}catch(e){l.warning("OVP resize: "+this.cardId+" catch "+e.toString())}},onExit:function(){e.prototype.onExit.apply(this,arguments)},onShowInsightCardPreview:function(){var e=this.getView();var t=e.getController();var a=t.oCardComponentData;var i=this;if(this.checkIBNNavigationExistsForCard()){n.showCard({entitySet:t.entitySet,entityType:t.entityType,cardComponentName:"Table",cardComponentData:a,cardComponent:t.oCardComponent,itemBindingInfo:i.getCardItemBindingInfo(),view:e}).then(function(e){i.saveGeneratedCardManifest(e)})}else{s.error(r.getText("INT_IBN_NAVIGATION_NOT_FOUND_ERROR_MESSAGE_TEXT"),{details:r.getText("INT_IBN_NAVIGATION_NOT_FOUND_ERROR_MESSAGE_VIEW_DETAILS_TEXT")})}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/generic/base/table/Component", ["sap/ovp/cards/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.generic.base.table.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.table.Table"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.generic.base.table.BaseTable"},annotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.LineItem"},countHeaderFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.CountHeader"},headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.KPIHeader"},enableAddToInsights:{type:"boolean",defaultValue:true}},version:"1.141.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/jUtils", [],function(){"use strict";return{setAttributeToMultipleElements:function(e,t,n){var r=document.querySelectorAll(e);for(var l=0;l<r.length;l++){r[l].setAttribute(t,n)}},getElementWidth:function(e){return parseFloat(getComputedStyle(e.getDomRef(),null).width.replace("px",""))},getElementHeight:function(e){return parseFloat(getComputedStyle(e.getDomRef(),null).height.replace("px",""))},removeElementById:function(e){var t=document.getElementById(e);if(t){t.parentNode.removeChild(t)}return},addClassToAllElements:function(e,t){if(e){if(e.length){e.forEach(function(e){e.classList.add(t)})}else{e.classList.add(t)}}},removeClassToAllElements:function(e,t){if(e){if(e.length){e.forEach(function(e){e.classList.remove(t)})}else{e.classList.remove(t)}}},checkIfFunction:function(e){if(typeof e==="function"){return true}return false},getIndex:function(e){var t=e.parentNode.childNodes;var n=0;for(var r=0;r<t.length;r++){if(t[r]==e){return n}if(t[r].nodeType==1){n++}}return-1},addStyleToAllElements:function(e,t,n){if(e){if(e.length){e.forEach(function(e){e.style[t]=n})}else{e.style[t]=n}}},addAttributeToAllElements:function(e,t,n){if(e){if(e.length){e.forEach(function(e){e.setAttribute(t,n)})}else{e.setAttribute(t,n)}}},getOuterHeight:function(e){var t=e.offsetHeight;var n=getComputedStyle(e);t+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10);return t},removeAttributesFromAll:function(e,t,n){if(e){e.forEach(function(e){var r=e.querySelectorAll(t);if(r){for(var l=0;l<r.length;l++){r[l].removeAttribute(n)}}})}}}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/linklist/AnnotationHelper", ["sap/ovp/cards/AnnotationHelper","sap/ui/model/odata/AnnotationHelper","sap/ovp/cards/MetadataAnalyser","sap/ovp/cards/Filterhelper"],function(e,t,r,a){"use strict";function n(e){var t=[];var r,a;var n=e.getProperty("/sortBy");if(n){var i=e.getProperty("/sortOrder");if(i&&i.toLowerCase()!=="descending"){a=false}else{a=true}r={path:n,descending:a};t.push(r)}return t}function i(t,i,o){var s=t.getSetting("ovpCardProperties");var f=s.getProperty("/metaModel");var l=e.isODataV4Context(t);var u=l?i:f.getODataEntityType(i.entityType);var d=l?"/"+s.getProperty("/entitySet"):"/"+i.name;var p;var g=s.getProperty("/selectionAnnotationPath");if(l&&g){var c="@"+g;p=f.getData()["$Annotations"][u.$Type][c]}else{p=u[g]}var y;var v=s.getProperty("/layoutDetail");if(v==="resizable"){var P=s.getProperty("/cardLayout");if(P){if(s.getProperty("/listFlavor")==="standard"){var x="";for(var h in o){x+=h}var m=s.getProperty("/cardLayout/iRowHeigthPx");if(m===undefined){m=16}var O;if(s.getProperty("/densityStyle")==="cozy"){O=72;if(x.indexOf("Description")===-1&&(x.indexOf("Title")>0&&x.indexOf("ImageUrl")>0||x.indexOf("Title")>0&&x.indexOf("TypeImageUrl")>0)){O=56}else if(x.indexOf("Description")===-1&&x.indexOf("Title")>0){O=48}}else{O=60;if(x.indexOf("Description")===-1&&(x.indexOf("Title")>0&&x.indexOf("ImageUrl")>0||x.indexOf("Title")>0&&x.indexOf("TypeImageUrl")>0)){O=48}else if(x.indexOf("Description")===-1&&x.indexOf("Title")>0){O=40}}s.setProperty("/cardLayout/itemHeight",O);if(!s.getProperty("/defaultSpan")&&s.getProperty("/cardLayout/autoSpan")){y=s.getProperty("/cardLayout/noOfItems");var I=Math.ceil((y*O+s.getProperty("/cardLayout/headerHeight")+2*s.getProperty("/cardLayout/iCardBorderPx"))/m);s.setProperty("/cardLayout/noOfItems",I)}else{var C=Math.floor(P.rowSpan*m-s.getProperty("/cardLayout/headerHeight")-2*s.getProperty("/cardLayout/iCardBorderPx"));y=Math.floor(C/O)*P.colSpan}}}}else{y=6}var S=t.getSetting("ovpCardProperties"),L=S.getProperty("/parameters");if(p||!!L){if(p&&p.Parameters||!!L){d=r.resolveParameterizedEntitySet(t.getSetting("dataModel"),i,p,L)}}var w="{path: '"+d+"', length: "+y;var D=n(s);if(D.length>0){w=w+", sorter:"+JSON.stringify(D)}var U=a.getFilters(s,p,l);if(U.length>0){U=a.createExcludeFilters(U,s);w=w+", filters:"+JSON.stringify(U)}var T=e.checkFilterPreference(s);if(l){if(T){w=w+", parameters:{custom: {cardId: '"+s.getProperty("/cardId")+"'}}"}}else{if(T){w=w+", parameters:{custom: {cardId: '"+s.getProperty("/cardId")+"', _requestFrom: 'ovp_internal'}}"}else{w=w+", parameters:{custom: {_requestFrom: 'ovp_internal'}}"}}w=w+"}";return w}i.requiresIContext=true;function o(e,t){var r=e.getModel().getProperty("/baseUrl");return g(r,t)}o.requiresIContext=true;function s(e,r){var a=true;var n=t.format(e,r);if(n.toLowerCase().indexOf("icon")>0){a=false}return a}s.requiresIContext=true;function f(e){var t=true;if(!e){return null}else if(e.toLowerCase().indexOf("icon")>0){t=false}return t}function l(e){var t=new RegExp("http(s)?://(www.)?[a-z0-9]+([-.]{1}[a-z0-9]+)*.[a-z]{2,5}(:[0-9]{1,5})?(/.*)?","i");return t.test(e)}function u(t,r){var a=e.isODataV4Context(t);var n;if(!a){if(r.hasOwnProperty("Path")){n="{"+r.Path+"}"}else{n=r.String}}else{if(r.hasOwnProperty("$Path")){n="{"+r.$Path+"}"}else{n=r}}return n}u.requiresIContext=true;function d(t,r){var a=e.isODataV4Context(t);return a?"{"+r+"}":"{"+r.String+"}"}d.requiresIContext=true;function p(e){if(e){return 1}return 0}function g(e,t){if(!t){return undefined}else if(t.lastIndexOf(e,0)===0||t.indexOf("://")>0){return t}else if(t.lastIndexOf("/",0)===0){return e+t}else{return e+"/"+t}}function c(e,t,r){var a;if(typeof r==="object"){a=r[e]}else{a=typeof r==="boolean"?r:true}return!t[e]&&a}function y(e,t,r){var a="";if(e){if(t&&r){a="#"+t+"-"+r;for(var n=0;n<e.length;n++){if(e[n].value===a){return e[n].name}}a=""}else{return e[0].name}}return a}function v(e,t){return g(e.baseUrl,t)}function P(e){return this.getModel("contentRow").aBindings[0].getContext().getPath().replace("/staticContent/","")}function x(t,r){var a=e.isODataV4Context(t);if(!a){return r.Path&&"{"+r.Path+"}"||r.String||""}else{return r.$Path&&"{"+r.$Path+"}"||r||""}}x.requiresIContext=true;return{formatItems:i,formatUrl:o,isImageUrl:s,isImageUrlStaticData:f,isValidURL:l,getIconPath:u,formatString:d,linkedAction:p,formUrl:g,isVisible:c,getApplicationName:y,getImageUrl:v,contentRowIndex:P,getAvatarInitials:x,getSorters:n}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/linklist/Component", ["sap/ovp/cards/generic/base/linklist/Component"],function(t){"use strict";return t.extend("sap.ovp.cards.linklist.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.linklist.LinkList"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.linklist.LinkList"},communicationPath:{type:"string",defaultValue:"com.sap.vocabularies.Communication.v1.Contact"},headerAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.HeaderInfo"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"}},version:"1.141.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/linklist/LinkList.controller", ["sap/ovp/cards/generic/base/linklist/BaseLinklist.controller","sap/ovp/filter/FilterUtils","sap/ui/core/EventBus","sap/base/util/isEmptyObject"],function(t,e,n,i){"use strict";return t.extend("sap.ovp.cards.linklist.LinkList",{onInit:function(){t.prototype.onInit.apply(this,arguments);var i=this;this.eventhandler=function(t,n,a){e.applyFiltersToV2Card(a,i)};this.GloabalEventBus=n.getInstance();if(this.oMainComponent&&this.oMainComponent.isMacroFilterBar){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",i.eventhandler)}},onDataReceived:function(t){var e=this.getCardContentContainer();if(!e){return}var n=t.getParameter("data");if(!n||i(n)||!n.results||!n.results.length){var a=this.getOwnerComponent().getComponentData().cardId;if(a&&this.oMainComponent.aErrorCards.indexOf(a)===-1){this.oMainComponent.createNoDataCard(a)}}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/list/Component", ["sap/ovp/cards/generic/base/list/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.list.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.list.List"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.list.List"},annotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.LineItem"},countHeaderFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.CountHeader"},headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.KPIHeader"},enableAddToInsights:{type:"boolean",defaultValue:true}},version:"1.141.0",library:"sap.ovp",includes:[],dependencies:{libs:["sap.suite.ui.microchart"],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/list/List.controller", ["sap/ovp/cards/generic/base/list/BaseList.controller","sap/ovp/filter/FilterUtils","sap/ui/core/EventBus","sap/base/util/isEmptyObject"],function(t,e,n,a){"use strict";return t.extend("sap.ovp.cards.list.List",{onInit:function(){t.prototype.onInit.apply(this,arguments);var a=this;this.eventhandler=function(t,n,i){e.applyFiltersToV2Card(i,a)};this.GloabalEventBus=n.getInstance();if(this.oMainComponent&&this.oMainComponent.isMacroFilterBar){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",a.eventhandler)}},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments)},onDataReceived:function(t){this.bdataLoadedToEnableAddToInsight=true;var e=this.byId("ovpList");e&&e.setBusy(false);var n=this.getCardContentContainer();if(!n){return}var i=t.getParameter("data");if(!i||a(i)||!i.results||!i.results.length){var r=this.getOwnerComponent().getComponentData().cardId;if(r&&this.oMainComponent.aErrorCards.indexOf(r)===-1){this.oMainComponent.createNoDataCard(r)}}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/quickview/Component", ["sap/ovp/cards/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.quickview.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.quickview.Quickview"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.quickview.Quickview"},annotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Facets"},footerFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.ActionsFooter"}},version:"1.141.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/quickview/Quickview.controller", ["sap/ovp/cards/generic/Card.controller","sap/m/Button"],function(t,e){"use strict";return t.extend("sap.ovp.cards.quickview.Quickview",{onInit:function(){t.prototype.onInit.apply(this,arguments);this.bCustomActionFlag=true},onBeforeRendering:function(){var t=this.byId("ovpQuickviewCardHeader");if(t){var n=t.getText();var o=n.substring(0);if(n[0]===":"){o=n.substring(2)}else if(n[n.length-2]===":"){o=n.substring(0,n.length-2)}t.setText(o);var r=t.getCustomData();if(r){for(var i=0;i<r.length;++i){if(r[i].getProperty("key")==="aria-label"){r[i].setValue(o)}}}}var s=this.getCardPropertiesModel();var a=s.getProperty("/showFirstActionInFooter")?s.getProperty("/showFirstActionInFooter"):false;var p=this.byId("ovpActionFooter");if(!a){if(p){var g=p.getContent();if(g&&g.length){for(var i=0,f=g.length;i<f;i++){if(g[i]instanceof e){g[i].setVisible(false);break}}}}}},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);var n=this.getCardPropertiesModel();var o=this.byId("ovpActionFooter");if(!!this.bCustomActionFlag){var r=n.getProperty("/customActions");if(!!o&&!!r&&!!r.length){for(var i=0;i<r.length;i++){var s=r[i].text;var a=null,p;if(this.getOwnerComponent()&&this.getOwnerComponent().getComponentData()){a=this.getOwnerComponent().getComponentData().mainComponent}if(!!a&&!!s&&!!r[i].press){p=a.templateBaseExtension.provideCustomActionPress(r[i].press)?a.templateBaseExtension.provideCustomActionPress(r[i].press):a.onCustomActionPress(r[i].press);if(typeof p==="function"){var g=new e({text:s,press:p.bind(this),type:"Transparent"});var f=n.getProperty("/showFirstActionInFooter");var v=f?0:1;var l=r[i].position+v;var c=o.getContent().length;if(l<1+v&&l>c-1){o.addContent(g)}else{o.insertContent(g,l)}}}}}this.bCustomActionFlag=false}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/rta/AppSettingsDialog.controller", ["sap/ui/core/mvc/Controller","sap/ovp/cards/AppSettingsUtils","sap/ui/model/json/JSONModel","sap/base/util/merge"],function(t,e,n,s){"use strict";return t.extend("sap.ovp.cards.rta.AppSettingsDialog",{onInit:function(){e.oResetButton.attachPress(this.onResetButton,this)},onAfterRendering:function(){this.setEnablePropertyForResetAndSaveButton(false);this._ovpManifestSettings=this.getView().getModel().getData();this._originalOVPManifestSettings=s({},this._ovpManifestSettings)},onResetButton:function(){this.setEnablePropertyForResetAndSaveButton(false);this._ovpManifestSettings=s({},this._originalOVPManifestSettings);var t=new n(this._ovpManifestSettings);this.getView().setModel(t);this.getView().getModel().refresh()},onChange:function(){this.setEnablePropertyForResetAndSaveButton(true)},setEnablePropertyForResetAndSaveButton:function(t){e.oResetButton.setEnabled(t);e.oSaveButton.setEnabled(t)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/rta/SelectIcons.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,i){"use strict";return e.extend("sap.ovp.cards.rta.SelectIcons",{onInit:function(){},onAfterRendering:function(){},_filterTable:function(e,n,r){var a=e.getParameter("query"),o=null,l=[];for(var g=0;g<n.length;g++){l.push(new t(n[g],i.Contains,a))}if(a){o=new t(l,false)}this.getView().byId(r).getBinding("items").filter(o,"Application")},filterTable:function(e){var t=this.getView(),i=t.getModel(),n=i.getProperty("/tableName"),r;if(n==="IconTable"){this._filterTable(e,["Icon","Name"],"IconTable");r=t.byId("IconTable").getBinding("items").getLength();i.setProperty("/NoOfIcons",r)}else if(n==="ImageTable"){this._filterTable(e,["Name"],"ImageTable");r=t.byId("ImageTable").getBinding("items").getLength();i.setProperty("/NoOfImages",r)}i.refresh(true)},onItemPress:function(e){var t=e.getSource(),i=t.getBindingContext(),n=this.getView().getModel(),r=n.getProperty("/tableName"),a;if(r==="IconTable"){a=i.getProperty("Icon")}else if(r==="ImageTable"){a=i.getProperty("Image")}this.updateIconPath(a)},onSelectionChange:function(e){var t=e.getParameter("item").getKey(),i=this.getView().getModel();i.setProperty("/tableName",t);i.refresh(true)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/rta/SelectKPI.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,i){"use strict";return e.extend("sap.ovp.cards.rta.SelectKPI",{onInit:function(){},onAfterRendering:function(){},_filterTable:function(e,n,r){var o=e.getParameter("query"),a=null,l=[];for(var s=0;s<n.length;s++){l.push(new t(n[s],i.Contains,o))}if(o){a=new t(l,false)}this.getView().byId(r).getBinding("items").filter(a,"Application")},onSearch:function(e){var t=this.getView(),i=t.getModel(),n;this._filterTable(e,["GroupTitle","KPITitle","GroupID","KPIID","KPIQualifier"],"KPITable");n=t.byId("KPITable").getBinding("items").getLength();i.setProperty("/NoOfKPIItem",n);i.refresh(true)},onItemPress:function(e){var t=e.getSource(),i=t.getBindingContext(),n=i.getObject();this.updateKPIItemPath(n,e)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/rta/SelectLineItem.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,i){"use strict";return e.extend("sap.ovp.cards.rta.SelectLineItem",{onInit:function(){},onAfterRendering:function(){},_filterTable:function(e,n,r){var a=e.getParameter("query"),l=null,o=[];for(var s=0;s<n.length;s++){o.push(new t(n[s],i.Contains,a))}if(a){l=new t(o,false)}this.getView().byId(r).getBinding("items").filter(l,"Application")},filterTable:function(e){var t=this.getView(),i=t.getModel(),n;this._filterTable(e,["Label","VisibleFields"],"LineItemTable");n=t.byId("LineItemTable").getBinding("items").getLength();i.setProperty("/NoOfLineItem",n);i.refresh(true)},onItemPress:function(e){var t=e.getSource(),i=t.getBindingContext(),n=i.getObject();this.updateLineItemPath(n)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/rta/SelectLinks.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,i){"use strict";return e.extend("sap.ovp.cards.rta.SelectLinks",{onInit:function(){},onAfterRendering:function(){},_filterTable:function(e,n,r){var a=e.getParameter("query"),o=null,l=[];for(var s=0;s<n.length;s++){l.push(new t(n[s],i.Contains,a))}if(a){o=new t(l,false)}this.getView().byId(r).getBinding("items").filter(o,"Application")},filterTable:function(e){var t=this.getView(),i=t.getModel(),n;this._filterTable(e,["name","value"],"LinkTable");n=t.byId("LinkTable").getBinding("items").getLength();i.setProperty("/NoOfLinks",n);i.refresh(true)},onItemPress:function(e){var t=e.getSource(),i=t.getBindingContext(),n=i.getProperty("value");this.updateLinkPath(n)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/rta/SettingsDialog.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/SettingsUtils","sap/ovp/cards/PayLoadUtils","sap/ovp/cards/rta/SettingsDialogConstants","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/ChangeReason","sap/ovp/cards/linklist/AnnotationHelper","sap/ovp/cards/v4/V4AnnotationHelper","sap/ovp/cards/AnnotationHelper","sap/ui/core/IconPool","sap/ui/core/mvc/ViewType","sap/m/Dialog","sap/m/Button","sap/ovp/cards/CommonUtils","sap/ui/Device","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/base/util/deepEqual","sap/base/util/merge","sap/ovp/app/OVPLogger","sap/ui/base/Event","sap/ui/model/odata/v2/ODataModel","sap/ui/model/odata/CountMode","sap/ui/core/mvc/View"],function(e,t,i,a,s,n,o,r,l,d,h,g,u,c,f,p,S,P,v,C,b,m,y,_,I,V,E,O){"use strict";var w=new _("OVP.rta.SettingDialog");return e.extend("sap.ovp.cards.rta.SettingsDialog",{_oCardManifestSettings:{},_aRefreshNotRequired:n._aRefreshNotRequired,_aRefreshRequired:n._aRefreshRequired,_updateManifestProperties:n._updateManifestProperties,aVariantNames:n.aVariantNames,oOvpResourceBundle:C,oMandatoryPropertiesKey:n.oMandatoryPropertiesKey,onInit:function(){a.oSaveButton.attachPress(this.onSaveButtonPress,this);a.oResetButton.attachPress(this.onResetButton,this);a.oMessagePopOverButton.attachPress(this.handleMessagePopoverPress,this)},onAfterRendering:function(){a.dialogBox.addStyleClass("sapOvpSettingsDialogBox");this.setEnablePropertyForResetAndSaveButton(false);this._oCardManifestSettings=this.getView().getModel().getData();this._oOriginalCardManifestSettings=y({},this._oCardManifestSettings);var e=this.getView(),t=e.getModel();if(!this._oCardManifestSettings.addNewCard){var i=e.byId("dialogCard");if(!i.getVisible()){i=e.byId("dialogCardNoPreview")}i.getDomRef().style.minHeight=this._oCardManifestSettings.dialogBoxHeight+"px";e.byId("dialogCardOverlay").getDomRef().style.minHeight=this._oCardManifestSettings.dialogBoxHeight+"px";a.settingFormWidth(e,"calc(100% - "+(this._oCardManifestSettings.dialogBoxWidth+1)+"rem)");setTimeout(function(){var e=this.getView().byId("dialogCard");if(e&&e.getVisible()){e.setBusy(false)}}.bind(this),2e3)}if(this._oCardManifestSettings.staticContent){this.handleErrorHandling(t,"title","/staticContent");this.handleErrorHandling(t,"targetUri","/staticContent")}if(a.bNewKPICardFlag){var s=e.getModel();var n=e.byId("sapOvpKPITable").getBinding("items").getLength();s.setProperty("/NoOfKPIItem",n);s.setProperty("/NoKPI",n)}},validateInputField:function(e){var t=e.getSource();var i=t.getValue().trim().length;if(!i){t.setValue(t.getValue().trim())}if(!this._oCardManifestSettings.addNewCard){this.updateCard(e)}else{this.setEnablePropertyForResetAndSaveButton(true)}},addView:function(e){this._oCardManifestSettings.showViewSwitchButton=true;this.setEnablePropertyForResetAndSaveButton(true);var t,i=this._oCardManifestSettings,a=this.getView().getModel();if(!i.addNewCard){if(i.dataPointAnnotationPath&&i.dataPoint&&i.dataPoint.length){t=i.dataPoint[0].value}}if(i.tabs&&i.tabs.length){i.newViewCounter++;if(!i.addNewCard){if(i.template==="sap.ovp.cards.charts.analytical"||i.template==="sap.ovp.cards.charts.smart.chart"){i.tabs.push({chartAnnotationPath:i.chart[0].value,dataPointAnnotationPath:t,value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+i.newViewCounter})}else{i.tabs.push({annotationPath:i.lineItem[0].value,dataPointAnnotationPath:t,value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+i.newViewCounter})}}else{i.tabs.push({entitySet:"",value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+i.newViewCounter})}var s=i.tabs.length;i.aViews.push({text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+i.newViewCounter,key:s,isLaterAddedView:true,isViewResetEnabled:false});if(!i.addNewCard){var o=i.defaultViewSelected;if(i.tabs[o-1].entitySet){i.tabs[s-1].entitySet=i.allEntitySet[0].value}}this.selectViewSwitch(e,s)}else{i.tabs=[{}];n.tabFields.forEach(function(e){if(!i.addNewCard){if(e!=="entitySet"){i.tabs[0][e]=i[e]}}else{i.tabs[0][e]=i[e]}});i.tabs[0].value=this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 1";if(!i.addNewCard){if(i.template==="sap.ovp.cards.charts.analytical"||i.template==="sap.ovp.cards.charts.smart.chart"){i.tabs.push({chartAnnotationPath:i.chart[0].value,dataPointAnnotationPath:t,value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 2"})}else{i.tabs.push({annotationPath:i.lineItem[0].value,dataPointAnnotationPath:t,value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 2"})}}else{i.tabs.push({entitySet:"",value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 2"})}i.selectedKey=1;i.defaultViewSelected=1;i.aViews=[{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_MAIN_VIEW"),key:0,isLaterAddedView:false,isViewResetEnabled:false},{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 1 ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")",key:1,initialSelectedKey:1,isLaterAddedView:false,isViewResetEnabled:false},{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 2",key:2,isLaterAddedView:true,isViewResetEnabled:false}];i.newViewCounter=2;this.selectViewSwitch(e,1)}this.handleErrorHandling(a,"value","/tabs")},deleteView:function(e){this.setEnablePropertyForResetAndSaveButton(true);var t=this._oCardManifestSettings,i=parseInt(t.selectedKey,10),s=this.getView().getModel();t.tabs.splice(i-1,1);t.aViews.splice(i,1);if(i===t.defaultViewSelected){t.defaultViewSelected=1;t.aViews[i].text=t.aViews[i].text+" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")"}t.aViews.forEach(function(e,t){if(t>=i){e.key--}});this.handleErrorHandling(s,"value","/tabs");if(t.tabs.length==1){n.tabFields.forEach(function(e){var i=t.tabs[0][e];if(e!=="entitySet"||e==="entitySet"&&i){t[e]=i}});delete t.selectedKey;delete t.defaultViewSelected;delete t.tabs;delete t.aViews;t.aViews=[{text:this.oOvpResourceBundle.getText("OVP_KEYUSER_SHOWS_DIFFERENT_VIEWS"),key:0,initialSelectedKey:0,isLaterAddedView:false,isViewResetEnabled:false}];a.addManifestSettings(t);a.setVisibilityForFormElements(t);this.getView().getModel("visibility").refresh();this.getView().getModel().refresh();if(!t.addNewCard){this._fCardWithRefresh()}}else{t.selectedKey=1;this.selectViewSwitch(e,t.selectedKey)}},resetView:function(){var e=this._oCardManifestSettings,t=this.getView().getModel(),i=parseInt(e.selectedKey,10),s=e.aViews[i],o=e.defaultViewSelected;if(!s.isLaterAddedView){var r=e.dataPointAnnotationPath?true:false,l=this._oOriginalCardManifestSettings.dataPointAnnotationPath?true:false;if(i){var d=e.aViews[i].initialSelectedKey;n.tabFields.forEach(function(t){if(t!=="dataPointAnnotationPath"||r){if(this._oOriginalCardManifestSettings.tabs&&this._oOriginalCardManifestSettings.tabs.length){var a=this._oOriginalCardManifestSettings.tabs[d-1][t];if(t!=="entitySet"||t==="entitySet"&&a){e[t]=a;e.tabs[i-1][t]=e[t]}}else{if(t!=="entitySet"){e[t]=this._oOriginalCardManifestSettings[t];e.tabs[i-1][t]=e[t]}}}}.bind(this));if(!this._oOriginalCardManifestSettings.tabs||!this._oOriginalCardManifestSettings.tabs.length){e.newViewCounter++;e.tabs[i-1].value=this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+e.newViewCounter}if(i===e.defaultViewSelected){e.aViews[i].text=e.tabs[i-1].value+" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")"}else{e.aViews[i].text=e.tabs[i-1].value}}else{n.mainFields.forEach(function(t){e[t]=this._oOriginalCardManifestSettings[t]}.bind(this));if(r!==l){if(l){e.tabs.forEach(function(t){if(t.prevDataPointAnnotationPath){t.dataPointAnnotationPath=t.prevDataPointAnnotationPath}else{t.dataPointAnnotationPath=e.dataPoint[0].value}});e.dataPointAnnotationPath=e.tabs[o].dataPointAnnotationPath}else{e.tabs.forEach(function(e){e.prevDataPointAnnotationPath=e.dataPointAnnotationPath;e.dataPointAnnotationPath=undefined})}}}}else{var h;if(e.dataPointAnnotationPath){h=e.dataPoint[0].value}e.newViewCounter++;if(e.template==="sap.ovp.cards.charts.analytical"||e.template==="sap.ovp.cards.charts.smart.chart"){e.tabs[i-1]={chartAnnotationPath:e.chart[0].value,dataPointAnnotationPath:h,value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+e.newViewCounter}}else{e.tabs[i-1]={annotationPath:e.lineItem[0].value,dataPointAnnotationPath:h,value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+e.newViewCounter}}if(i===e.defaultViewSelected){e.aViews[i].text=this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+e.newViewCounter+" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")"}else{e.aViews[i].text=this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+e.newViewCounter}n.tabFields.forEach(function(t){var a=e.tabs[i-1][t];if(t!=="entitySet"||t==="entitySet"&&a){e[t]=a}})}this.handleErrorHandling(t,"value","/tabs");e.isViewResetEnabled=false;e.aViews[i].isViewResetEnabled=false;a.addManifestSettings(e);a.setVisibilityForFormElements(e);this.getView().getModel("visibility").refresh();this.getView().getModel().refresh();if(!e.addNewCard){this._fCardWithRefresh()}},selectViewSwitch:function(e,t){var i=this._oCardManifestSettings,s=this.getView().getModel();if(!t){t=e.getSource().getSelectedIndex()}if(this.defaultViewSwitch){this.defaultViewSwitch.setEnabled(true)}this.setEnablePropertyForResetAndSaveButton(true);var o=i.metaModel,r,l=i.defaultViewSelected;if(!t){i.selectedKey=t;i.mainViewSelected=true;i.isViewResetEnabled=i.aViews[t].isViewResetEnabled;n.tabFields.forEach(function(e){var t=i.tabs[l-1][e];if(e!=="entitySet"||e==="entitySet"&&t){i[e]=t}});this.handleErrorHandling(s,"value","/tabs");if(i.tabs[l-1].entitySet){r=o.getODataEntitySet(i.tabs[l-1].entitySet);i.entityType=o.getODataEntityType(r.entityType);this.resetSupportingObjectsOnEntitySetChange(i,l)}a.addManifestSettings(i);a.setVisibilityForFormElements(i);this.getView().getModel("visibility").refresh();this.getView().getModel().refresh();if(!i.addNewCard){this._fCardWithRefresh()}}else{i.mainViewSelected=false;i.isViewResetEnabled=i.aViews[t].isViewResetEnabled;if(!i.addNewCard){var d=this.getView().byId("dialogCard");if(d.getVisible()){var h=d.getComponentInstance().getRootControl();var g=h.getController();g.changeSelection(t,true,i);this.handleErrorHandling(s,"value","/tabs");if(i.tabs[t-1].entitySet){r=o.getODataEntitySet(i.tabs[t-1].entitySet);i.entityType=o.getODataEntityType(r.entityType);this.resetSupportingObjectsOnEntitySetChange(i,l)}n.tabFields.forEach(function(e){var a=i.tabs[t-1][e];if(e!=="entitySet"||e==="entitySet"&&a){i[e]=a}});a.addManifestSettings(i);a.setVisibilityForFormElements(i);if(!!i.kpiAnnotationPath){this.setAnnotationPathInModel(i,"sapOvpSettingsKPIAnnotation",i.kpiAnnotationPath)}if(!!i.selectionPresentationAnnotationPath){this.setAnnotationPathInModel(i,"sapOvpSettingsFilterAndPresentedBy",i.selectionPresentationAnnotationPath)}this.getView().getModel("visibility").refresh();this.getView().getModel().refresh()}}else{if(!!i.tabs[t-1].entitySet){r=o.getODataEntitySet(i.tabs[t-1].entitySet);i.entityType=o.getODataEntityType(r.entityType);a.addManifestSettings(i)}this.aVariantNames.forEach(function(e){if(this._oCardManifestSettings[e.sPath]){this._oCardManifestSettings[e.sPath]=[]}}.bind(this));this.resetSupportingObjectsOnEntitySetChange(i,l);i.selectedKey=t;n.tabFields.forEach(function(e){var a=i.tabs[t-1][e];i[e]=a});a.setVisibilityForFormElements(i);this.getView().byId("sapOVPEntitySetList").setValue(i.tabs[t-1].entitySet);this.getView().getModel().refresh();this.getView().getModel("visibility").refresh()}}},resetSupportingObjectsOnEntitySetChange:function(e,t){e=a.addSupportingObjects(e);var i=e.defaultViewSelected;if(i){e.aViews[i].text=e.tabs[i-1].value}e.aViews[t].text+=" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")";e.defaultViewSelected=t},setAnnotationPathInModel:function(e,t,i){if(e.entityType[i]){this.setVariant(e,i)}if(t==="sapOvpSettingsKPIAnnotation"){a.addKPINavApplicationName(e)}},setCurrentActivePageForCarouselCard:function(e){var t=this.getView().byId("dialogCard");if(t.getVisible()){var i=t.getComponentInstance(),a=i.getRootControl(),s=a.byId("pictureCarousel");if(s){var n=s.getPages(),o=n[e];s.setActivePage(o)}}},onSelectionChange:function(e){var t=e.getSource(),i=t.getModel(),a=i.getData().staticContent,s=t.getSelectedItem(),n=s.getBindingContext().getObject(),o=t.getModel("visibility");for(var r=0;r<a.length;r++){if(a[r].id===n.id){o.setProperty("/moveToTheTop",!(a.length===1||r===0));o.setProperty("/moveUp",!(a.length===1||r===0));o.setProperty("/moveDown",!(a.length===1||r===a.length-1));o.setProperty("/moveToTheBottom",!(a.length===1||r===a.length-1));o.setProperty("/delete",true);i.setProperty("/selectedItemIndex",r);o.refresh(true);if(e.getParameter("listItem")){this.setCurrentActivePageForCarouselCard(r)}break}}},handleErrorForProperty:function(e,t,i){e.firePropertyChange({context:e.getContext(i?i:"/"),path:t,value:e.getProperty(i?i+"/"+t:t),reason:d.Change})},handleErrorHandling:function(e,t,i){var a=e.getProperty(i);e.firePropertyChange({context:e.getContext(i),path:i+","+t,value:e.getProperty(i),reason:d.Change});for(var s=0;s<a.length;s++){var n=i+"/"+s;e.firePropertyChange({context:e.getContext(n),path:t,value:e.getProperty(n+"/"+t),reason:d.Change})}},setEnablePropertyForResetAndSaveButton:function(e){a.enableResetButton(e);a.enableSaveButton(e)},getValueInRemString:function(e){return e+"rem"},_getSelectedItemIndex:function(e){return e.getProperty("/selectedItemIndex")},_getLastItemIndex:function(e){return this._getStaticContentArray(e).length-1},_getStaticContentArray:function(e){return e.getProperty("/staticContent")},_setStaticContentArray:function(e,t){e.setProperty("/staticContent",t)},_setSelectedItemAndScrollToElement:function(e,t){var i=this.getView(),a=i.byId("sapOvpStaticLinkListLineItem"),s=i.byId("scrollContainer"),n=i.getModel();this.handleErrorHandling(n,"title","/staticContent");this.handleErrorHandling(n,"targetUri","/staticContent");var o=a.getItems()[e];if(t){this._oList=a;this._oItem=o;this._oScrollContainer=s;var r={onAfterRendering:function(e){this._oList.removeEventDelegate(this._oDelegateOnAfter);this._oScrollContainer.scrollToElement(this._oItem);delete this._oDelegateOnAfter;delete this._oList;delete this._oScrollContainer;delete this._oItem}};this._oDelegateOnAfter=r;a.addEventDelegate(r,this)}else{s.scrollToElement(o)}a.setSelectedItem(o);a.fireSelectionChange()},_arrangeStaticContent:function(e,t,i){var a=this._getStaticContentArray(e);a.splice(i,0,a.splice(t,1)[0]);this._setStaticContentArray(e,a);this._setSelectedItemAndScrollToElement(i)},getIndexFromIdForStaticLinkList:function(e){var t=e.split("-");return t[t.length-1]},_getImageData:function(){var e=[];e.push({Name:"AW.png",Image:h.formUrl(this.getView().getModel().getProperty("/baseUrl"),"img/AW.png")});return e},_getIconData:function(e){var t=c.getIconNames(),i=[];if(e){var a=e.split("://")[1],s=t.indexOf(a);t.splice(s,1);i.push({Name:a,Icon:c.getIconURI(a)})}for(var n=0;n<t.length;n++){i.push({Name:t[n],Icon:c.getIconURI(t[n])})}return i},_getLinkListItemId:function(e,t){return e.getProperty("/staticContent/"+t+"/index")},_makeLinkListItemId:function(e){return"linkListItem--"+e},_makeLinkListItemIndex:function(e){return"Index--"+e},getIconAndImageDataModel:function(e){var i=this._getIconData(e),a=this._getImageData();return new t({Icons:i,Images:a,NoOfIcons:i.length,NoOfImages:a.length})},destroyTemplatesAndObjects:function(){var e=this.getView();var t=e.byId("tableFilterImage");if(t){t.destroy()}var i=e.byId("tableFilter");if(i){i.destroy()}var a=e.byId("tableFilterLinks");if(a){a.destroy()}delete this._oEvent;delete this._iCurrentRow;delete this._oModel;delete this._oVisibilityModel;delete this._oIconsDialogContentView;delete this._oLinksDialogContentView;delete this._oLineItemDialogContentView;delete this._oKPIItemDialogContentView},onExternalUrlChange:function(e){this.setEnablePropertyForResetAndSaveButton(true)},onLinkSourceChange:function(e){var t=e.getSource(),i=t.getModel(),a=t.getModel("visibility"),s=this.getIndexFromIdForStaticLinkList(t.getId()),n=e.getParameter("selectedIndex"),o=a.getProperty("/staticLink"),r=a.getProperty("/links"),l=this._getLinkListItemId(i,parseInt(s,10));if(n===0){o[l]=false;r[l]=true;i.setProperty("/staticContent/"+s+"/targetUri",undefined)}else{o[l]=true;r[l]=false;i.setProperty("/staticContent/"+s+"/semanticObject",undefined);i.setProperty("/staticContent/"+s+"/action",undefined);i.setProperty("/staticContent/"+s+"/targetUri","")}a.setProperty("/staticLink",o);a.setProperty("/links",r);a.refresh(true);i.refresh(true);this.handleErrorForProperty(i,"targetUri","/staticContent/"+s);this.setEnablePropertyForResetAndSaveButton(true)},onRemoveVisualPress:function(e){var t=e.getSource(),i=t.getModel(),a=t.getModel("visibility"),s=this.getIndexFromIdForStaticLinkList(t.getId()),n=this._getLinkListItemId(i,parseInt(s,10)),o=a.getProperty("/removeVisual");o[n]=false;a.setProperty("/removeVisual",o);a.refresh(true);i.setProperty("/staticContent/"+s+"/imageUri",undefined);i.refresh(true);this.updateCard(e,"sapOvpSettingsStaticLinkListRemoveVisual")},createValueHelpDialogForInternalUrl:function(e){var t=e.getSource(),i=t.getModel(),a=t.getModel("staticCardProperties"),s=t.getModel("visibility"),n=this.getIndexFromIdForStaticLinkList(t.getId());this.attachBrowserHeightChangeHandler();var o=new I;this._oEvent=Object.assign(o,e);this._iCurrentRow=n;this._oModel=i;this._oVisibilityModel=s;var r=new S("linksCancelBtn",{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("cancelBtn")});this.linksDialog=new p({title:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_SELECT_APPLICATION_DIALOG"),buttons:[r]}).addStyleClass("sapOvpSettingsDialogBox");a.setProperty("/densityStyle",this.getDensityStyle());a.setProperty("/NoOfLinks",a.getProperty("/links").length);var l={id:"linksDialogContent",viewName:"sap.ovp.cards.rta.SelectLinks",type:f.XML,preprocessors:{xml:{bindingContexts:{tableRows:a.createBindingContext("/")},models:{tableRows:a}}}};O.create(l).then(function(e){e.setModel(a);e.setModel(this.getView().getModel("ovpResourceModel"),"ovpResourceModel");this.linksDialog.addContent(e);this._oLinksDialogContentView=e;e.getController().updateLinkPath=function(e){var t=e.slice(1).split(/-(.+)/),i=t[0],a=t[1];this._oModel.setProperty("/staticContent/"+this._iCurrentRow+"/semanticObject",i);this._oModel.setProperty("/staticContent/"+this._iCurrentRow+"/action",a);this._oModel.refresh(true);this.setEnablePropertyForResetAndSaveButton(true);this.cleanAndCloseDialog(r)}.bind(this);r.attachPress(function(){this.cleanAndCloseDialog(r)}.bind(this));this.linksDialog.open();setTimeout(function(){this.browserHeightChange()}.bind(this),0)}.bind(this))},onChangeVisualPress:function(e){var t=e.getSource(),i=t.getModel(),a=t.getModel("visibility"),s=this.getIndexFromIdForStaticLinkList(t.getId()),n=i.getProperty("/staticContent/"+s+"/imageUri"),o=h.isImageUrlStaticData(n);this.attachBrowserHeightChangeHandler();var r=new I;this._oEvent=Object.assign(r,e);this._iCurrentRow=s;this._oModel=i;this._oVisibilityModel=a;var l=new S("iconsCancelBtn",{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("cancelBtn")});this.iconsDialog=new p({title:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_SELECT_VISUAL_DIALOG"),buttons:[l]}).addStyleClass("sapOvpSettingsDialogBox");var d=o?this.getIconAndImageDataModel():this.getIconAndImageDataModel(n);d.setProperty("/densityStyle",this.getDensityStyle());var g={id:"iconsDialogContent",viewName:"sap.ovp.cards.rta.SelectIcons",type:f.XML,preprocessors:{xml:{bindingContexts:{tableRows:d.createBindingContext("/")},models:{tableRows:d}}}};O.create(g).then(function(e){d.setProperty("/tableName","IconTable");e.setModel(d);e.setModel(this.getView().getModel("ovpResourceModel"),"ovpResourceModel");this.iconsDialog.addContent(e);this._oIconsDialogContentView=e;e.getController().updateIconPath=function(e){var t=this._getLinkListItemId(this._oModel,parseInt(this._iCurrentRow,10)),i=this._oVisibilityModel.getProperty("/removeVisual");i[t]=true;this._oVisibilityModel.setProperty("/removeVisual",i);this._oVisibilityModel.refresh(true);this._oModel.setProperty("/staticContent/"+this._iCurrentRow+"/imageUri",e);this._oModel.refresh(true);this.updateCard(this._oEvent,"sapOvpSettingsStaticLinkListChangeVisual");this.cleanAndCloseDialog(l)}.bind(this);l.attachPress(function(){this.cleanAndCloseDialog(l)}.bind(this));this.iconsDialog.open();setTimeout(function(){this.browserHeightChange()}.bind(this),0)}.bind(this))},getDensityStyle:function(){if(!v.support.touch){return"compact"}else{return"cozy"}},cleanAndCloseDialog:function(e){if(this._oIconsDialogContentView){this._oIconsDialogContentView.destroy()}if(this._oLinksDialogContentView){this._oLinksDialogContentView.destroy()}if(this._oLineItemDialogContentView){this._oLineItemDialogContentView.destroy()}if(this._oKPIItemDialogContentView){this._oKPIItemDialogContentView.destroy()}this.destroyTemplatesAndObjects();if(this.iconsDialog){this.iconsDialog.close()}if(this.linksDialog){this.linksDialog.close()}if(this.lineItemDialog){this.lineItemDialog.close()}if(this.KPIItemDialog){this.KPIItemDialog.close()}e.destroy();this.detachBrowserHeightChangeHandler()},attachBrowserHeightChangeHandler:function(){v.resize.attachHandler(this.browserHeightChange,this)},detachBrowserHeightChangeHandler:function(){v.resize.detachHandler(this.browserHeightChange,this)},browserHeightChange:function(e){var t,i,s;if(this.iconsDialog&&this._oIconsDialogContentView){t=this.iconsDialog;i=this._oIconsDialogContentView;s="iconsScrollContainer"}else if(this.linksDialog&&this._oLinksDialogContentView){t=this.linksDialog;i=this._oLinksDialogContentView;s="linksScrollContainer"}else if(this.lineItemDialog&&this._oLineItemDialogContentView){t=this.lineItemDialog;i=this._oLineItemDialogContentView;s="lineItemScrollContainer"}else if(this.KPIItemDialog&&this._oKPIItemDialogContentView){t=this.KPIItemDialog;i=this._oKPIItemDialogContentView;s="KPIItemScrollContainer"}if(t&&i&&s){var n=t.getDomRef(),o=e?e.height*93/100:a.dialogBox.getDomRef().getBoundingClientRect().height,r=n.getBoundingClientRect().height,l=Math.max(o,r)-P.getPixelPerRem()*9,d=i.byId(s);d.setHeight(l+"px")}},handleMessagePopoverPress:function(e){a.oMessagePopOver.openBy(e.getSource())},onShowMorePress:function(e){var t=e.getSource(),i=t.getModel(),a=t.getModel("visibility"),s=this.getIndexFromIdForStaticLinkList(t.getId()),n=this._getLinkListItemId(i,parseInt(s,10)),o=a.getProperty("/showMore/"+n);if(o){a.setProperty("/showMore/"+n,false)}else{a.setProperty("/showMore/"+n,true)}a.refresh(true)},onPressDelete:function(e){var t=new I;this._oEvent=Object.assign(t,e);o.confirm(this.oOvpResourceBundle.getText("OVP_KEYUSER_MESSAGE_BOX_INFORMATION_MESSAGE_INFO"),{actions:[o.Action.OK,o.Action.CANCEL],icon:o.Icon.INFORMATION,title:this.oOvpResourceBundle.getText("OVP_KEYUSER_MESSAGE_BOX_TITLE_INFO"),initialFocus:o.Action.CANCEL,onClose:function(e){if(e==="OK"){var t=this._oEvent.getSource(),i=t.getModel("visibility"),a=t.getModel(),s=this._getStaticContentArray(a),n=this._getSelectedItemIndex(a),o=this._getLinkListItemId(a,n),r=i.getProperty("/staticLink"),l=i.getProperty("/links"),d=i.getProperty("/removeVisual"),h=i.getProperty("/showMore");delete r[o];delete l[o];delete d[o];delete h[o];i.setProperty("/staticLink",r);i.setProperty("/links",l);i.setProperty("/removeVisual",d);i.setProperty("/showMore",h);s.splice(n,1);this._setStaticContentArray(a,s);a.refresh(true);if(s.length>0){this._setSelectedItemAndScrollToElement(Math.min(parseInt(n,10),s.length-1),true)}if(s.length<=1){i.setProperty("/delete",false)}i.refresh(true);this.updateCard(this._oEvent,"sapOvpSettingsStaticLinkListDelete")}delete this._oEvent}.bind(this)})},onPressAdd:function(e){var t=e.getSource(),i=t.getModel("visibility"),a=t.getModel(),s=this._getStaticContentArray(a),n=a.getProperty("/lineItemIdCounter"),o=this._makeLinkListItemId(n+1),r=this._makeLinkListItemIndex(n+1),l=i.getProperty("/staticLink"),d=i.getProperty("/links"),h=i.getProperty("/removeVisual"),g=i.getProperty("/showMore");a.setProperty("/lineItemIdCounter",n+1);s.unshift({id:o,index:r,title:"Default Title",subTitle:"Default SubTitle",imageUri:"",imageAltText:"",targetUri:"",openInNewWindow:""});l[r]=true;d[r]=false;h[r]=false;g[r]=false;i.setProperty("/staticLink",l);i.setProperty("/links",d);i.setProperty("/removeVisual",h);i.setProperty("/showMore",g);i.refresh(true);this._setStaticContentArray(a,s);a.refresh(true);this._setSelectedItemAndScrollToElement(0);this.updateCard(e,"sapOvpSettingsStaticLinkListAdd")},onPressMoveToTheTop:function(e){var t=e.getSource().getModel();this._arrangeStaticContent(t,this._getSelectedItemIndex(t),0);this.updateCard(e,"sapOvpSettingsStaticLinkListSort")},onPressMoveUp:function(e){var t=e.getSource().getModel(),i=this._getSelectedItemIndex(t);this._arrangeStaticContent(t,i,i-1);this.updateCard(e,"sapOvpSettingsStaticLinkListSort")},onPressMoveDown:function(e){var t=e.getSource().getModel(),i=this._getSelectedItemIndex(t);this._arrangeStaticContent(t,i,i+1);this.updateCard(e,"sapOvpSettingsStaticLinkListSort")},onPressMoveToTheBottom:function(e){var t=e.getSource().getModel(),i=this._getSelectedItemIndex(t),a=this._getLastItemIndex(t);this._arrangeStaticContent(t,i,a);this.updateCard(e,"sapOvpSettingsStaticLinkListSort")},onResetButton:function(){this._oCardManifestSettings=y({},this._oOriginalCardManifestSettings);var e=this.getView().getModel();e.setProperty("/",this._oCardManifestSettings);a.setVisibilityForFormElements(this._oCardManifestSettings);this.getView().getModel("visibility").refresh();if(this._oCardManifestSettings.layoutDetail==="resizable"){if(this._oCardManifestSettings.stopResizing){this.getView().byId("sapOvpSettingsStopResize").setState(false)}else if(!this._oCardManifestSettings.stopResizing){this.getView().byId("sapOvpSettingsStopResize").setState(true)}}a.resetErrorHandling();this.setEnablePropertyForResetAndSaveButton(false);if(!this._oCardManifestSettings.addNewCard){this._fCardWithRefresh()}},handleValueStateofComboBox:function(e,t,i,s){var n=a.oMessagePopOver.getModel(),o=n.getProperty("/Messages"),r=n.getProperty("/Counter/All"),l=n.getProperty("/Counter/Error");this.bError=true;var d=true;if(s){for(var h=0;h<o.length;h++){if(o[h].fieldName===t){d=false}}if(d){o.push({type:"Error",title:e,fieldName:t,counter:l+1});r++;l++;this.getView().byId(i).setValueState("Error")}}else{this.bError=false;for(var h=0;h<o.length;h++){if(o[h].fieldName===t){o.splice(h,1);r--;l--;h--}}this.getView().byId(i).setValueState("None")}if(!o.length){this.setEnablePropertyForResetAndSaveButton(true)}n.setProperty("/Messages",o);n.setProperty("/Counter/All",r);n.setProperty("/Counter/Error",l);n.refresh(true)},validateComboBox:function(e,t,i){var a;if(t==="KPICheckBox"&&i&&e.entitySet||t==="entitySet"&&e.addKPIHeaderCheckBox){if(e.title===""){a=C.getText("OVP_KEYUSER_INPUT_ERROR");this.handleValueStateofComboBox(a,b.Annotations.title,"sapOvpCardTitle",true)}else{this.handleValueStateofComboBox("",b.Annotations.title,"sapOvpCardTitle",false)}if(e.subTitle===""){a=C.getText("OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_SUBTITLE");this.handleValueStateofComboBox(a,b.Annotations.subTitle,"sapOvpCardSubTitle",true)}else{this.handleValueStateofComboBox("",b.Annotations.subTitle,"sapOvpCardSubTitle",false)}if(e.valueSelectionInfo===""){a=C.getText("OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_SELECTIONVALUEINFO");this.handleValueStateofComboBox(a,b.Annotations.valueSelectionInfo,"sapOvpValueSelectionInfo",true)}else{this.handleValueStateofComboBox("",b.Annotations.valueSelectionInfo,"sapOvpValueSelectionInfo",false)}if(e.dataPointAnnotationPath===""){a=C.getText("OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_DATAPOINT");this.handleValueStateofComboBox(a,b.Annotations.dataPoint,"sapOvpDataPoint",true)}else{this.handleValueStateofComboBox("",b.Annotations.dataPoint,"sapOvpDataPoint",false)}}else if(t==="entitySet"){a=C.getText("OVP_KEYUSER_INPUT_ERROR");this.handleValueStateofComboBox(a,b.Annotations.title,"sapOvpCardTitle",true);if(e.template==="sap.ovp.cards.linklist"||e.template==="sap.ovp.cards.v4.linklist"){a=C.getText("OVP_KEYUSER_LISTFLAVOR_ERROR");this.handleValueStateofComboBox(a,b.Annotations.listFlavor,"sapOVPLinkListFlavor",true)}}else if(t==="KPICheckBox"&&!i&&e.entitySet){this.handleValueStateofComboBox("",b.Annotations.subTitle,"sapOvpCardSubTitle",false);this.handleValueStateofComboBox("",b.Annotations.valueSelectionInfo,"sapOvpValueSelectionInfo",false);this.handleValueStateofComboBox("",b.Annotations.dataPoint,"sapOvpDataPoint",false)}else{if(t==="title"){this.onComboBoxSelection(e,t,"OVP_KEYUSER_INPUT_ERROR",b.Annotations.title,"sapOvpCardTitle")}if(t==="subTitle"){this.onComboBoxSelection(e,t,"OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_SUBTITLE",b.Annotations.subTitle,"sapOvpCardSubTitle")}if(t==="valueSelectionInfo"){this.onComboBoxSelection(e,t,"OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_SELECTIONVALUEINFO",b.Annotations.valueSelectionInfo,"sapOvpValueSelectionInfo")}if(t==="dataPointAnnotationPath"){this.onComboBoxSelection(e,t,"OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_DATAPOINT",b.Annotations.dataPoint,"sapOvpDataPoint")}if(t==="listFlavor"){this.onComboBoxSelection(e,t,"OVP_KEYUSER_LISTFLAVOR_ERROR",b.Annotations.listFlavor,"sapOVPLinkListFlavor")}}},onComboBoxSelection:function(e,t,i,a,s){var n;if(e[t]===""){n=C.getText(i);this.handleValueStateofComboBox(n,a,s,true)}else{this.handleValueStateofComboBox(n,a,s,false)}},onSaveButtonPress:function(){if(!this._oCardManifestSettings.addNewCard){if(a.bError||this.bError){a.oMessagePopOverButton.firePress()}else{this.createAndSubmitChange.bind(this)()}}else{this.createAndSubmitChange.bind(this)()}},onResizingChange:function(e){var t=e.getParameter("state");this._oCardManifestSettings.stopResizing=!t;this.updateCard(e)},onNumberOfRowsChanged:function(e){var t=+this._oCardManifestSettings.defaultSpan.rows;this._oCardManifestSettings.defaultSpan.rows=t;this._oCardManifestSettings.defaultSpan.showOnlyHeader=t===0;this._oCardManifestSettings.cardLayout.showOnlyHeader=t===0;var i=["sap.ovp.cards.list","sap.ovp.cards.table"];if(i.indexOf(this._oCardManifestSettings.template)!==-1){this._oCardManifestSettings.cardLayout.noOfItems=t}else{this._oCardManifestSettings.cardLayout.rowSpan=t}this.updateCard(e)},onNumberOfColumnsChanged:function(e){this._oCardManifestSettings.defaultSpan.cols=+this._oCardManifestSettings.defaultSpan.cols;this.updateCard(e)},setBusy:function(e){if(e){this.getView().addStyleClass("dialogContainerOverlay");var t=this.getView().byId("dialogCard");if(t.getVisible()&&t.getComponentInstance()){t.getComponentInstance().getRootControl().setBusy(e)}}else{this.getView().removeStyleClass("dialogContainerOverlay");setTimeout(function(){var t=this.getView().byId("dialogCard");if(t.getVisible()&&t.getComponentInstance()){t.getComponentInstance().getRootControl().setBusy(e)}}.bind(this),2e3)}},_fCardWithoutRefresh:function(e,t){var i=this.getView(),a=this._oCardManifestSettings,s=i.byId("dialogCard").getComponentInstance(),n=s.getRootControl(),o=n.getController(),r=o.getCardPropertiesModel(),l,d,h=false,g;if(a.tabs&&a.tabs.length){h=true;g=parseInt(a.selectedKey,10)}if(t.formElementId==="sapOvpSettingsLineItemTitle"||t.formElementId==="sapOvpSettingsLineItemSubTitle"){l=n.byId(t.cardElementId+"--"+i.getModel().getProperty("/lineItemId"))}else{l=n.byId(t.cardElementId);if(!l){this._fCardWithRefresh(e,t.cardElementId)}}switch(t.formElementId){case"sapOvpSettingsLineItemTitle":case"sapOvpSettingsLineItemSubTitle":case"sapOvpSettingsTitle":case"sapOvpSettingsValueSelectionInfo":if(l){l.setText(e.getSource().getValue())}break;case"sapOvpSettingsSubTitle":r.setProperty("/subTitle",e.getSource().getValue());o._setSubTitleWithUnitOfMeasure(undefined,true);break;case"sapOvpSettingsViewName":var u=a.viewName;d=i.getModel();l.getItems()[g-1].setText(u);a.tabs[g-1].value=u;if(a.defaultViewSelected===g){u=u+" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")"}a.aViews[g].text=u;d.refresh();break;case"sapOvpDefaultViewSwitch":if(e.getSource().getState()){var c=a.defaultViewSelected;d=i.getModel();a.defaultViewSelected=g;a.aViews[c].text=a.tabs[c-1].value;a.aViews[g].text+=" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")";d.refresh();this.defaultViewSwitch=e.getSource();this.defaultViewSwitch.setEnabled(false)}break;case"sapOvpSettingsIdentification":if(h){a.tabs[g-1][t.updateProperty]=a[t.updateProperty]}break;case"sapOvpSettingsKPIHeaderSwitch":var f=i.getModel("visibility"),p=f.getData();p.dataPoint=false;p.valueSelectionInfo=false;if(h){a.tabs.forEach(function(e){e.prevDataPointAnnotationPath=e.dataPointAnnotationPath;e.dataPointAnnotationPath=undefined})}else{var S=a.dataPointAnnotationPath;if(S){a.prevDataPointAnnotationPath=S}a.dataPointAnnotationPath=undefined}f.refresh(true);l.destroy();break;default:break}},_fCardWithRefresh:function(e,t){var s,o,r,l,d,h=this._oCardManifestSettings,g=this.getView(),u=g.byId("dialogCard"),c=!u.getComponentInstance()?undefined:u.getComponentInstance().getComponentData(),f=!c?"Dialog":c.cardId,p=!c?undefined:c.manifest.cards[f].model,S={cards:{}},v=false,C;if(h.tabs&&h.tabs.length){v=true;C=parseInt(h.selectedKey,10)}switch(t){case"subTitleSwitch":r=this.getView();l=r.getModel("visibility");if(e.getSource().getState()){if(v){o=h.defaultViewSelected;h.tabs.forEach(function(e){s=e.prevDynamicSubtitleAnnotationPath;if(s){e.dynamicSubtitleAnnotationPath=s}else{e.dynamicSubtitleAnnotationPath=h.dynamicSubTitle[0].value}});h.dynamicSubtitleAnnotationPath=h.tabs[o-1].dynamicSubtitleAnnotationPath}else{s=h.prevDynamicSubtitleAnnotationPath;if(s){h.dynamicSubtitleAnnotationPath=s}else{h.dynamicSubtitleAnnotationPath=h.dynamicSubTitle[0].value}}if(c.template!=="sap.ovp.cards.linklist"&&c.template!=="sap.ovp.cards.v4.linklist"){g.byId("sapOvpSettingsDynamicSubTitle").setSelectedKey(h.dynamicSubtitleAnnotationPath)}}else{if(v){h.tabs.forEach(function(e){e.prevDynamicSubtitleAnnotationPath=e.dynamicSubtitleAnnotationPath;e.dynamicSubtitleAnnotationPath=undefined});h.dynamicSubtitleAnnotationPath=undefined}else{var b=h.dynamicSubtitleAnnotationPath;if(b){h.prevDynamicSubtitleAnnotationPath=b}h.dynamicSubtitleAnnotationPath=undefined}}l.setProperty("/subTitle",a.getVisibilityOfElement(h,"subTitle",v));l.setProperty("/dynamicSubTitle",a.getVisibilityOfElement(h,"dynamicSubTitle",v)&&!!h["dynamicSubTitle"]&&!!h["dynamicSubTitle"].length);l.refresh(true);break;case"enableAddToInsights":h[t]=e.getSource().getState()?true:false;break;case"toleranceRangeHighValue":case"toleranceRangeLowValue":case"deviationRangeHighValue":case"deviationRangeLowValue":if(v){h.tabs[C-1][t]=h[t]}break;case"kpiHeader":r=this.getView();l=r.getModel("visibility");d=l.getData();d.valueSelectionInfo=true;d.dataPoint=true;if(h.tabs&&h.tabs.length){d.dataPoint=a.getVisibilityOfElement(h,"dataPoint",true)}if(!h.valueSelectionInfo){h.valueSelectionInfo=" "}if(v){o=h.defaultViewSelected;h.tabs.forEach(function(e){s=e.prevDataPointAnnotationPath;if(s){e.dataPointAnnotationPath=s}else{e.dataPointAnnotationPath=h.dataPoint[0].value}});h.dataPointAnnotationPath=h.tabs[o-1].dataPointAnnotationPath}else{s=h.prevDataPointAnnotationPath;if(s){h.dataPointAnnotationPath=s}else{h.dataPointAnnotationPath=h.dataPoint[0].value}}l.refresh(true);break;case"listType":h[t]=e.getSource().getState()?"extended":"condensed";break;case"listFlavor":h[t]=e.getSource().getState()?"bar":"";break;case"entitySet":if(v){h.tabs[C-1][t]=h[t];n.resetTabFields.forEach(function(e){delete h.tabs[C-1][e];delete h[e]});var m=h.metaModel,y=m.getODataEntitySet(h.tabs[C-1].entitySet),_=h.defaultViewSelected;h.entityType=m.getODataEntityType(y.entityType);this.resetSupportingObjectsOnEntitySetChange(h,_)}break;case"kpiAnnotationPath":if(v){h.tabs[C-1][t]=h[t]}var I=g.byId("sapOvpSettingsKPIAnnotation").getSelectedKey();if(h.entityType[I]){this.setVariant(h,I)}a.addKPINavApplicationName(h);this.getView().getModel().refresh(true);break;case"selectionPresentationAnnotationPath":if(v){h.tabs[C-1][t]=h[t]}var I=g.byId("sapOvpSettingsFilterAndPresentedBy").getSelectedKey();if(h.entityType[I]){this.setVariant(h,I)}this.getView().getModel().refresh(true);break;case"listFlavorForLinkList":case"annotationPath":case"chartAnnotationPath":case"presentationAnnotationPath":case"selectionAnnotationPath":case"dynamicSubtitleAnnotationPath":case"dataPointAnnotationPath":if(v){h.tabs[C-1][t]=h[t]}break;case"noOfRows":case"ovpHeaderTitle":case"add":case"removeVisual":case"changeVisual":case"sort":case"delete":break;default:break}S.cards[f]={settings:h};if(a.bNewKPICardFlag){S.cards[f].template=h.template}else{S.cards[f].template=c.template}if(a.bNewKPICardFlag){if(p&&g.getModel(p)){g.getModel(p).destroy();g.setModel(null,p)}var O=this._oCardManifestSettings.selectedKPI,M=new V(O.ODataURI,{annotationURI:O.ModelURI,defaultCountMode:E.None});p=P._getLayerNamespace()+".kpi_card_model_"+a.getTrimmedDataURIName(O.ODataURI);g.setModel(M,p)}if(!!p){S.cards[f].model=p}if(a.bNewKPICardFlag){M.getMetaModel().loaded().then(function(){var e=i.createCardComponent(g,S,"dialogCard");e.then(function(){g.setBusy(false);this.setBusy(false)}.bind(this)).catch(function(){a.setErrorMessage(S.cards[f].settings,"OVP_KEYUSER_ANNOTATION_FAILURE");a.createErrorCard(g,S,f)})}.bind(this),function(e){w.error(e);this.setBusy(false);g.setBusy(false)}.bind(this));M.attachMetadataFailed(function(){a.setErrorMessage(S.cards[f].settings,"OVP_KEYUSER_METADATA_FAILURE");a.createErrorCard(g,S,f)})}else{this.createCard(g,S)}},setVariant:function(e,t){var i=e.entityType[t];var a=i.SelectionVariant&&i.SelectionVariant.Path;if(/^@/.test(a)){a=a.slice(1)}e.selectionAnnotationPath=a;var s;if(t.indexOf(".KPI")!==-1){s=i.Detail&&i.Detail.DefaultPresentationVariant&&i.Detail.DefaultPresentationVariant.Path}else if(t.indexOf(".SelectionPresentationVariant")!==-1){s=i.PresentationVariant&&i.PresentationVariant.Path}if(/^@/.test(s)){s=s.slice(1)}e.presentationAnnotationPath=s;var n=e.entityType[e.presentationAnnotationPath]&&e.entityType[e.presentationAnnotationPath].Visualizations;for(var o=0;o<n.length;o++){var r=n[o].AnnotationPath;if(r){if(/^@/.test(r)){r=r.slice(1)}if(/.Chart/.test(r)){e.chartAnnotationPath=r;break}}}},createCard:function(e,t){this.setBusy(true);var a=i.createCardComponent(e,t,"dialogCard");a.then(function(){this.setBusy(false);var e=this.getView().byId("sapOvpStaticLinkListLineItem");if(e){var t=e.getSelectedItem();if(t){var i=t.getId(),a=this.getIndexFromIdForStaticLinkList(i);this.setCurrentActivePageForCarouselCard(a)}}}.bind(this));a.catch(function(){this.setBusy(false)}.bind(this))},updateCard:function(e,t){var i=this._oCardManifestSettings,a=this.getView().byId("dialogCard");this.setEnablePropertyForResetAndSaveButton(true);if(a.getVisible()){if(i.tabs&&i.tabs.length){var s=parseInt(i.selectedKey,10);i.isViewResetEnabled=true;i.aViews[s].isViewResetEnabled=true}var n=e.getSource(),o=t?t:n.getId(),r=false;if(o.indexOf("sapOvpStaticLinkListLineItem")!==-1){var l=n.getModel(),d=l.getData().staticContent,h=this.getIndexFromIdForStaticLinkList(o);this.setCurrentActivePageForCarouselCard(h);l.setProperty("/lineItemId",d[h].id);if(o.indexOf("sapOvpSettingsLineItemTitle")!==-1){o="sapOvpSettingsLineItemTitle"}else if(o.indexOf("sapOvpSettingsLineItemSubTitle")!==-1){o="sapOvpSettingsLineItemSubTitle"}}for(var g=0;g<this._aRefreshNotRequired.length;g++){if(o.indexOf(this._aRefreshNotRequired[g].formElementId)>-1){if(this._aRefreshNotRequired[g].isKpiSwitch&&e.getSource().getState()){break}this._fCardWithoutRefresh(e,this._aRefreshNotRequired[g]);r=true;break}}if(!r){for(var u=0;u<this._aRefreshRequired.length;u++){if(o.indexOf(this._aRefreshRequired[u].formElementId)>-1){this.setBusy(true);this._fCardWithRefresh(e,this._aRefreshRequired[u].updateProperty);break}}}var c=P.getQueryParameterValue("fiori-tools-rta-mode");if(c){for(var f in this.oMandatoryPropertiesKey){if(o.indexOf(this.oMandatoryPropertiesKey[f])>-1){var p=false,S=f+"Key",v=f+"Property";i[f]=e.getParameter("value");i[v]=e.getParameter("value");for(var f in i.ai18nProperties){if(i.ai18nProperties[f].value===e.getParameter("value")){i[S]=i.ai18nProperties[f].key;p=true;break}}if(!p){i[S]=""}break}}}}},onExit:function(){a.oSaveButton.detachPress(this.onSaveButtonPress,this);a.oResetButton.detachPress(this.onResetButton,this);a.oMessagePopOverButton.detachPress(this.handleMessagePopoverPress,this)},getListItems:function(){var e=[],t=this._oCardManifestSettings,i=this.getView(),s=i.byId("dialogCard"),n=s.getComponentInstance().getComponentData();var o=n.model.getMetaModel();var r=P.isODataV4(n.model);var l=r?"/"+t.entityType.$Type+"/@"+t.annotationPath:t.entityType.$path+"/"+t.annotationPath;var d=o.getContext(o.resolve(l,this.oView.getBindingContext()));var h=2,g=1,c=0;if(t.listFlavor==="bar"){h=1;g=2}if(t.listType&&t.listType.toLowerCase()==="extended"){h=6;g=3;c=3;if(t.listFlavor==="bar"){h=5}}else if(t.contentFragment==="sap.ovp.cards.table.Table"||t.contentFragment==="sap.ovp.cards.table.v4.Table"){h=3;g=1;c=1}t.lineItem.forEach(function(t){var i=u.getSortedDataPoints(d,t.fields);var s=u.getSortedDataFields(d,t.fields);var n=[],o=[],l=a.getQualifier(t.value);i.forEach(function(e){if(e.Title){var t=r?e.Title:e.Title.String;o.push(a.checkForEmptyString(t,""))}else{o.push(C.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[l]))}});s.forEach(function(e){if(e.Label){var t=r?e.Label:e.Label.String;n.push(t)}else{n.push(C.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[l]))}});var f=Math.min(o.length,g),p=Math.min(c,f),S=n.slice(0,h-p).concat(o.slice(0,f));S.map(function(e){return e.charAt(0).toUpperCase()+e.substr(1)});e.push({Value:t.value,Label:t.name,VisibleFields:S.toString()})});return e},onSearch:function(e){var t=this.getView(),i=t.getModel(),a;this._filterTable(e,["GroupTitle","KPITitle","GroupID","KPIID","KPIQualifier"],"sapOvpKPITable");a=t.byId("sapOvpKPITable").getBinding("items").getLength();i.setProperty("/NoOfKPIItem",a);i.refresh(true)},_filterTable:function(e,t,i){var a=e.getParameter("query"),s=null,n=[];for(var o=0;o<t.length;o++){n.push(new r(t[o],l.Contains,a))}if(a){s=new r(n,false)}this.getView().byId(i).getBinding("items").filter(s,"Application")},onItemPress:function(e){this.getView().setBusy(true);this.getView().setBusyIndicatorDelay(0);var t=e.getSource(),i=t.getBindingContext(),a=i.getObject();this.getView().byId("sapOvpSettingsTitle").setValue(a.GroupTitle);this.getView().byId("sapOvpSettingsSubTitle").setValue(a.KPITitle);this.onKPIUpdate(a);this.updateCard(e,"sapOvpSettingsNewKPICard")},onKPIUpdate:function(e){this._oCardManifestSettings.entitySet=e.ODataEntityset;this._oCardManifestSettings.kpiAnnotationPath="com.sap.vocabularies.UI.v1.KPI#"+e.KPIQualifier;this._oCardManifestSettings.title=e.GroupTitle;this._oCardManifestSettings.subTitle=e.KPITitle;this._oCardManifestSettings.template="sap.ovp.cards.charts.analytical";this._oCardManifestSettings.selectedKPI=e},onSeePress:function(){this.attachBrowserHeightChangeHandler();var e=new S("KPIItemCancelBtn",{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("cancelBtn")});this.KPIItemDialog=new p({title:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_KPI_DIALOG_TITLE"),buttons:[e]}).addStyleClass("sapOvpSettingsDialogBox");var i=new t({KPIItem:this._oCardManifestSettings.KPIData});i.setSizeLimit(this._oCardManifestSettings.KPIData.length);i.setProperty("/densityStyle",this.getDensityStyle());i.setProperty("/NoOfKPIItem",i.getProperty("/KPIItem").length);var a={id:"KPIItemDialogContent",viewName:"sap.ovp.cards.rta.SelectKPI",type:f.XML,preprocessors:{xml:{bindingContexts:{tableRows:i.createBindingContext("/")},models:{tableRows:i}}}};O.create(a).then(function(t){t.setModel(i);t.setModel(this.getView().getModel("ovpResourceModel"),"ovpResourceModel");this.KPIItemDialog.addContent(t);this._oKPIItemDialogContentView=t;t.getController().updateKPIItemPath=function(t,i){this.getView().setBusy(true);this.getView().setBusyIndicatorDelay(0);this.getView().byId("sapOvpSettingsTitle").setValue(t.GroupTitle);this.getView().byId("sapOvpSettingsSubTitle").setValue(t.KPITitle);this.onKPIUpdate(t);this.updateCard(i,"sapOvpSettingsNewKPICard");this.cleanAndCloseDialog(e)}.bind(this);e.attachPress(function(){this.cleanAndCloseDialog(e)}.bind(this));this.KPIItemDialog.open();setTimeout(function(){this.browserHeightChange()}.bind(this),0)}.bind(this))},openLineItemValueHelpDialog:function(e){this.attachBrowserHeightChangeHandler();var i=new I;this._oEvent=Object.assign(i,e);var s=new S("lineItemCancelBtn",{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("cancelBtn")});this.lineItemDialog=new p({title:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LINEITEM_ANNO"),buttons:[s]}).addStyleClass("sapOvpSettingsDialogBox");var n=new t({lineItem:this.getListItems()});n.setProperty("/densityStyle",this.getDensityStyle());n.setProperty("/NoOfLineItem",n.getProperty("/lineItem").length);var o={id:"lineItemDialogContent",viewName:"sap.ovp.cards.rta.SelectLineItem",type:f.XML,preprocessors:{xml:{bindingContexts:{tableRows:n.createBindingContext("/")},models:{tableRows:n}}}};O.create(o).then(function(e){e.setModel(n);e.setModel(this.getView().getModel("ovpResourceModel"),"ovpResourceModel");this.lineItemDialog.addContent(e);this._oLineItemDialogContentView=e;e.getController().updateLineItemPath=function(e){var t=e.Value,i=this._oCardManifestSettings,n;if(i.tabs&&i.tabs.length){n=parseInt(i.selectedKey,10)}i.lineItemQualifier=a.getQualifier(t);i.annotationPath=t;if(i.tabs&&i.tabs.length){i.tabs[n-1].annotationPath=i.annotationPath}this.getView().byId("sapOvpSettingsLineItem").setValue(e.Label);this._fCardWithRefresh(this._oEvent,"annotationPath");this.setEnablePropertyForResetAndSaveButton(true);if(i.tabs&&i.tabs.length){i.isViewResetEnabled=true;i.aViews[n].isViewResetEnabled=true}this.cleanAndCloseDialog(s)}.bind(this);s.attachPress(function(){this.cleanAndCloseDialog(s)}.bind(this));this.lineItemDialog.open();setTimeout(function(){this.browserHeightChange()}.bind(this),0)}.bind(this))},createAndSubmitChange:function(){var e;if(a.bNewStaticLinkListCardFlag){e=s.getPayLoadForNewStaticLinkListCard.bind(this)(a)}else if(a.bNewKPICardFlag){e=s.getPayLoadForNewKPICard.bind(this)(a)}else if(a.bAddNewCardFlag){e=s.getPayLoadForNewCard.bind(this)(a)}else{e=s.getPayLoadForEditCard.bind(this)(a)}this.settingsResolve(e);a.dialogBox.close()},setMandatoryFieldState:function(e,t){t.setProperty("/dataPoint",e);t.setProperty("/valueSelectionInfo",e);t.setProperty("/requiredSubTitle",e);var i=t.getData(),s=false;for(var n=0;n<a.aVisiblePropertiesForAnnotation.length;n++){if(i[a.aVisiblePropertiesForAnnotation[n].sProperty]){s=true;break}}t.setProperty("/setAnnotationCardProperties",s)},EnableKPIHeaderFields:function(e){var t=this.getView().getModel("visibility");if(!e){this.setMandatoryFieldState(false,t)}else{this.setMandatoryFieldState(true,t)}},onCardTypeSelected:function(e){var t=e.getParameters().id;this._oCardManifestSettings.template=e.getSource().getSelectedKey();this.getView().byId("sapOVPAddKpiCheckBoxID").setSelected(false);this.getView().byId("sapOVPAddODataSelect").setSelected(false);this._oCardManifestSettings.addKPIHeaderCheckBox=false;this.EnableKPIHeaderFields(this._oCardManifestSettings.addKPIHeaderCheckBox);this.resetPropertiesVisibility(t,this._oCardManifestSettings)},onDatasourceComboboxChanged:function(e){var t=e.getParameters().id;this._oCardManifestSettings.model=e.getParameters().value;this._oCardManifestSettings.allEntitySet="";if(!a.newDataSource){var i=this._oCardManifestSettings.datasources;for(var s=0;s<i.length;s++){if(i[s].Title===this._oCardManifestSettings.model){this._oCardManifestSettings.metaModel=i[s].oMetaModel}}a.addSupportingObjects(this._oCardManifestSettings);if(this._oCardManifestSettings.allEntitySet.length===0){this._oCardManifestSettings.model="";this.resetPropertiesVisibility(t,this._oCardManifestSettings);var n=C.getText("OVP_KEYUSER_NO_RELEVANT_ANNOTATION");this.handleValueStateofComboBox(n,"datasSourceExisting","sapOVPDataSourceExistingComboBox",true)}else{this.handleValueStateofComboBox("","datasSourceExisting","sapOVPDataSourceExistingComboBox",false);this.resetPropertiesVisibility(t,this._oCardManifestSettings)}}else{var o=this._oCardManifestSettings.datasources.filter(function(e){return e.Title===this._oCardManifestSettings.model}.bind(this));getMetaModelForNewDataSource(o,a.sApplicationId).then(function(e){if(e){a.newDataSourceModel=e.modelInformation;e.getODataEntityContainer=function(){return e.oEntityContainers};e.getObject=function(t){return e.oSchema};e.getODataEntityType=function(t){var i=e.oSchema[0].entityType.filter(function(i){var a=t.substr((e.oEntityContainers.namespace+".").length);return i.name===a});return i[0]};this._oCardManifestSettings.metaModel=e;a.addSupportingObjects(this._oCardManifestSettings);if(this._oCardManifestSettings.allEntitySet.length===0){this._oCardManifestSettings.model="";this.resetPropertiesVisibility(t,this._oCardManifestSettings);var i=C.getText("OVP_KEYUSER_NO_RELEVANT_ANNOTATION");this.handleValueStateofComboBox(i,"datasSourceNew","sapOVPDataSourceNewInput",true)}else{this.handleValueStateofComboBox("","datasSourceNew","sapOVPDataSourceNewInput",false);this.resetPropertiesVisibility(t,this._oCardManifestSettings)}}else{this._oCardManifestSettings.model="";this.resetPropertiesVisibility(t,this._oCardManifestSettings);var i=C.getText("OVP_KEYUSER_UNAVAILABLE_DATASOURCE");this.handleValueStateofComboBox(i,"datasSourceNew","sapOVPDataSourceNewInput",true)}}.bind(this))}},onEntitySetChanged:function(e,t){var i=this._oCardManifestSettings.metaModel.getObject("/dataServices/schema")[0].entityType;this.aVariantNames.forEach(function(e){if(this._oCardManifestSettings[e.sPath]){this._oCardManifestSettings[e.sPath]=[]}}.bind(this));for(var s in i){if(i[s].name===e){this._oCardManifestSettings.entityType=i[s];break}}a.addSupportingObjects(this._oCardManifestSettings);this.getView().byId("sapOVPAddODataSelect").setSelected(false);this.resetPropertiesVisibility(t,this._oCardManifestSettings)},addStaticParameterRow:function(){var e=this.getView().getModel();var t=e.getProperty("/aAllStaticParameters");if(t&&t.length){t.push({key:"",value:""})}else{t=[];t.push({key:"",value:""})}e.setProperty("/aAllStaticParameters",t)},addActionRow:function(){var e=this.getView().getModel();var t=e.getProperty("/objectStreamCardsSettings/customActions");if(t&&t.length){t.push({text:"",press:"",position:""})}else{t=[];t.push({text:"",press:"",position:""})}e.setProperty("/objectStreamCardsSettings/customActions",t)},onParameterDelete:function(e){var t=this.getView().getModel();var i=t.getProperty("/aAllStaticParameters");var a=e.getSource().getBindingContext().getObject()&&e.getSource().getBindingContext().getObject()["key"];i=i.filter(function(e){return e["key"]!=a});t.setProperty("/aAllStaticParameters",i);if(!m(this._oCardManifestSettings.staticParameters,this._oOriginalCardManifestSettings.staticParameters)){this.setEnablePropertyForResetAndSaveButton(true)}this.getView().getModel().refresh()},onActionDelete:function(e){var t=this.getView().getModel();var i=t.getProperty("/objectStreamCardsSettings/customActions");var a=e.getSource().getBindingContext().getObject()&&e.getSource().getBindingContext().getObject()["text"];i=i.filter(function(e){return e["text"]!=a});t.setProperty("/objectStreamCardsSettings/customActions",i);if(!m(this._oCardManifestSettings.objectStreamCardsSettings,this._oOriginalCardManifestSettings.objectStreamCardsSettings)){this.setEnablePropertyForResetAndSaveButton(true)}},updateProperty:function(e){var t=e.getSource().getId();var i=false,s;if(this._oCardManifestSettings.tabs&&this._oCardManifestSettings.tabs.length){i=true;s=parseInt(this._oCardManifestSettings.selectedKey,10);this._oCardManifestSettings.isViewResetEnabled=true;this._oCardManifestSettings.aViews[s].isViewResetEnabled=true}for(var n=0;n<this._updateManifestProperties.length;n++){if(t.indexOf(this._updateManifestProperties[n].formElementId)>-1){var o=this._updateManifestProperties[n].formElement;switch(o){case"entitySet":var r=e.getSource().getSelectedKey();if(!i){this._oCardManifestSettings["entitySet"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["entitySet"]=e.getParameter("value")}this.onEntitySetChanged(r,t);if(this._oCardManifestSettings["entitySet"].length!==0){this.validateComboBox(this._oCardManifestSettings,"entitySet")}break;case"identificationAnnotationPath":if(!i){this._oCardManifestSettings["identificationAnnotationPath"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["identificationAnnotationPath"]=e.getParameter("value")}break;case"selectionPresentationAnnotationPath":if(!i){this._oCardManifestSettings["selectionPresentationAnnotationPath"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["selectionPresentationAnnotationPath"]=e.getParameter("value")}break;case"selectionAnnotationPath":if(!i){this._oCardManifestSettings["selectionAnnotationPath"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["selectionAnnotationPath"]=e.getParameter("value")}break;case"presentationAnnotationPath":if(!i){this._oCardManifestSettings["presentationAnnotationPath"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["presentationAnnotationPath"]=e.getParameter("value")}break;case"annotationPath":if(!i){this._oCardManifestSettings["annotationPath"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["annotationPath"]=e.getParameter("value")}break;case"listType":this._oCardManifestSettings.listType=e.getSource().getSelectedKey();break;case"listFlavor":this._oCardManifestSettings.listFlavor=e.getSource().getSelectedKey();if(t.indexOf("sapOVPLinkListFlavor")!==-1){this.validateComboBox(this._oCardManifestSettings,"listFlavor")}break;case"KPICheckBox":this._oCardManifestSettings.addKPIHeaderCheckBox=e.getParameter("selected");this.EnableKPIHeaderFields(this._oCardManifestSettings.addKPIHeaderCheckBox);this.validateComboBox(this._oCardManifestSettings,"KPICheckBox",this._oCardManifestSettings.addKPIHeaderCheckBox);break;case"dataPointAnnotationPath":if(!i){this._oCardManifestSettings["dataPointAnnotationPath"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["dataPointAnnotationPath"]=e.getParameter("value")}this.validateComboBox(this._oCardManifestSettings,"dataPointAnnotationPath");break;case"addODataSelectCheckBox":this._oCardManifestSettings.addODataSelectCheckBox=e.getParameter("selected");break;case"requireAppAuthorization":this._oCardManifestSettings.requireAppAuthorization=e.getParameter("value");break;case"kpiAnnotationPath":if(!i){this._oCardManifestSettings["kpiAnnotationPath"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["kpiAnnotationPath"]=e.getParameter("value")}this._oCardManifestSettings.kpiAnnotationPath=e.getParameter("value");break;case"navigationPath":this._oCardManifestSettings.navigationPath=e.getParameter("value");break;case"title":case"subTitle":case"valueSelectionInfo":var l=false;var d=o+"Key";var h=o+"Property";this._oCardManifestSettings[o]=e.getParameter("value");this._oCardManifestSettings[h]=e.getParameter("value");for(var g in this._oCardManifestSettings.ai18nProperties){if(this._oCardManifestSettings.ai18nProperties[g].value===e.getParameter("value")){this._oCardManifestSettings[d]=this._oCardManifestSettings.ai18nProperties[g].key;l=true;break}}if(!l){this._oCardManifestSettings[d]=""}this.validateComboBox(this._oCardManifestSettings,o);break;case"existingDatasSource":if(e.mParameters.selected){a.newDataSource=false;this._oCardManifestSettings.newDataSource=false;this.handleValueStateofComboBox("","datasSourceExisting","sapOVPDataSourceExistingComboBox",false);this.resetPropertiesVisibility(t,this._oCardManifestSettings);var u=this.getView().getModel();u.setProperty("/datasources",this._oCardManifestSettings.datasourcesFromManifest)}break;case"newDatasSource":if(e.mParameters.selected){a.newDataSource=true;this._oCardManifestSettings.newDataSource=true;this.handleValueStateofComboBox("","datasSourceNew","sapOVPDataSourceNewInput",false);this.resetPropertiesVisibility(t,this._oCardManifestSettings);this.getView().setBusy(true);getNewDataSources(a.sApplicationId).then(function(e){this.getView().setBusy(false);var t=e.results;var i=this.getView().getModel();i.setSizeLimit(t.length);i.setProperty("/datasources",t)}.bind(this))}break;default:break}}}},resetPropertiesVisibility:function(e,t){if(e.indexOf("sapOVPExistingDataSource")!==-1||e.indexOf("sapOVPNewDataSource")!==-1){this._updateManifestProperties.forEach(function(e){if(!e.formElementId.includes("sapOVPExistingDataSource")&&!e.formElementId.includes("sapOVPNewDataSource")){if(e.formElementId.includes("sapOVPAddODataSelect")){t[e.formElement]=false}else{t[e.formElement]=""}}});t.model=""}else if(e.indexOf("sapOVPDataSource")!==-1){this._updateManifestProperties.forEach(function(i){if(!i.formElementId.includes("sapOVPExistingDataSource")&&!i.formElementId.includes("sapOVPNewDataSource")&&!e.includes(i.formElementId)){if(i.formElementId.includes("sapOVPAddODataSelect")){t[i.formElement]=false}else{t[i.formElement]=""}}})}else if(e.indexOf("sapOVPCardType")!==-1){this._updateManifestProperties.forEach(function(e){if(!(e.formElementId.includes("sapOVPDataSource")||e.formElementId.includes("sapOVPCardType"))){if(e.formElementId.includes("sapOVPAddODataSelect")){t[e.formElement]=false}else{t[e.formElement]=""}}})}else if(e.indexOf("sapOVPEntitySetList")!==-1){var i=this.getView().getModel("visibility").getData().showViewSwitch;this._updateManifestProperties.forEach(function(e){if(!(e.formElementId.includes("sapOVPDataSource")||e.formElementId.includes("sapOVPCardType")||e.formElementId.includes("sapOVPEntitySetList"))){if(e.formElementId.includes("sapOVPAddODataSelect")){t[e.formElement]=false}else{if(!i){t[e.formElement]=""}else{n.tabFields.forEach(function(e){if(e!=="entitySet"&&e!=="value"){t[e]=""}})}}}})}a.resetErrorHandling();this.setEnablePropertyForResetAndSaveButton(false);a.setVisibilityForFormElements(t);this.getView().getModel().refresh();this.getView().getModel("visibility").refresh()}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/rta/SettingsDialogConstants", [],function(){"use strict";return{aVariantNames:[{sVariant:".SelectionVariant",sPath:"selectionVariant"},{sVariant:".PresentationVariant",sPath:"presentationVariant"},{sVariant:".SelectionPresentationVariant",sPath:"selectionPresentationVariant"},{sVariant:".KPI",sPath:"KPI"},{sVariant:".Identification",sPath:"identification"},{sVariant:".DataPoint",sPath:"dataPoint",isMandatoryField:true},{sVariant:".Chart",sPath:"chart",isMandatoryField:true},{sVariant:".Chart",sPath:"chartSPVorKPI",isMandatoryField:true},{sVariant:".SelectionVariant",sPath:"selectionVariantSPVorKPI"},{sVariant:".PresentationVariant",sPath:"presentationVariantSPVorKPI"},{sVariant:".LineItem",sPath:"lineItem",isMandatoryField:true},{sVariant:".HeaderInfo",sPath:"dynamicSubTitle",isMandatoryField:true}],aVisiblePropertiesForAnnotation:[{sProperty:"selectionVariant"},{sProperty:"presentationVariant"},{sProperty:"selectionPresentationVariant"},{sProperty:"KPI"},{sProperty:"identification"},{sProperty:"dataPoint"},{sProperty:"dataPointSelectionMode"},{sProperty:"lineItem"}],tabFields:["entitySet","dynamicSubtitleAnnotationPath","annotationPath","selectionAnnotationPath","presentationAnnotationPath","identificationAnnotationPath","dataPointAnnotationPath","chartAnnotationPath","colorPalette","ChartProperties","chartProperties","selectionPresentationAnnotationPath","kpiAnnotationPath","value"],mainFields:["title","subTitle","valueSelectionInfo","listType","listFlavor","sortOrder","sortBy","stopResizing","defaultSpan"],resetTabFields:["dynamicSubtitleAnnotationPath","annotationPath","selectionAnnotationPath","presentationAnnotationPath","identificationAnnotationPath","dataPointAnnotationPath","chartAnnotationPath","selectionPresentationAnnotationPath","kpiAnnotationPath"],cardSettingsForStaticLinkListCard:["title","subTitle","listFlavor","stopResizing","defaultSpan"],AllCardSettingsForKPICard:["title","subTitle","stopResizing","defaultSpan","entitySet","kpiAnnotationPath","identificationAnnotationPath"],allCardSettings:["entitySet","listType","listFlavor","sortOrder","sortBy","imageUri","targetUri","enableAddToInsights","openInNewWindow","semanticObject","action","dynamicSubtitleAnnotationPath","annotationPath","selectionAnnotationPath","presentationAnnotationPath","identificationAnnotationPath","dataPointAnnotationPath","chartAnnotationPath","colorPalette","ChartProperties","chartProperties","selectionPresentationAnnotationPath","kpiAnnotationPath","stopResizing","defaultSpan","toleranceRangeHighValue","deviationRangeHighValue","toleranceRangeLowValue","deviationRangeLowValue"],cardSettingsArrayLevel:{staticContent:{text:["title","subTitle","imageAltText"],settings:["imageUri","targetUri","openInNewWindow","semanticObject","action"]},tabs:{text:["value"],settings:["entitySet","dynamicSubtitleAnnotationPath","annotationPath","selectionAnnotationPath","presentationAnnotationPath","identificationAnnotationPath","dataPointAnnotationPath","chartAnnotationPath","colorPalette","ChartProperties","chartProperties","selectionPresentationAnnotationPath","kpiAnnotationPath","navigation","toleranceRangeHighValue","deviationRangeHighValue","toleranceRangeLowValue","deviationRangeLowValue"],onlyTabLevelProps:["value"],checkForRemoval:["entitySet"]}},cardSettingsForComplex:{text:["title","subTitle","valueSelectionInfo","itemText"],settings:["listType","listFlavor","sortOrder","sortBy","stopResizing","defaultSpan","customParams","staticParameters","objectStreamCardsSettings","enableAddToInsights"]},cardSettings:{text:["title","subTitle","valueSelectionInfo","itemText"],settings:["listType","listFlavor","sortOrder","sortBy","dynamicSubtitleAnnotationPath","annotationPath","selectionAnnotationPath","presentationAnnotationPath","identificationAnnotationPath","dataPointAnnotationPath","chartAnnotationPath","colorPalette","ChartProperties","chartProperties","selectionPresentationAnnotationPath","kpiAnnotationPath","stopResizing","defaultSpan","customParams","staticParameters","objectStreamCardsSettings","enableAddToInsights","toleranceRangeHighValue","deviationRangeHighValue","toleranceRangeLowValue","deviationRangeLowValue"]},cardSettingsWithText:["title","subTitle","valueSelectionInfo","itemText",{staticContent:["title","subTitle","imageAltText"]},{tabs:["value"]}],oVisibility:{cardPreview:true,stopResizing:false,noOfRows:false,noOfColumns:false,title:true,showEntitySet:false,dynamicSwitchStateSubTitle:false,dynamicSwitchSubTitle:false,enableAddToInsights:true,dynamicSubTitle:false,subTitle:true,kpiHeader:true,valueSelectionInfo:true,listType:true,listFlavor:true,selectionVariantSPVorKPI:true,presentationVariantSPVorKPI:true,chartSPVorKPI:true,selectionPresentationVariant:true,KPI:true,selectionVariant:true,presentationVariant:true,lineItem:true,identification:true,dataPoint:true,chart:true,links:false,lineItemTitle:false,lineItemSubTitle:false,staticLink:false,viewSwitch:false,moveToTheTop:false,moveUp:false,moveDown:false,moveToTheBottom:false,delete:false,showMore:true,removeVisual:false,selectCard:false,addKPIHeader:false,setEntitySet:false,setCardProperties:false,setGeneralCardProperties:false,requiredSubTitle:false,showNewCardTypes:false,addCustomActions:false,toleranceRangeHighValue:false,deviationRangeHighValue:false,toleranceRangeLowValue:false,deviationRangeLowValue:false},oI18nKeyValueProperty:{title:"titleKey",subTitle:"subTitleKey",valueSelectionInfo:"valueSelectionInfoKey"},oI18nValueProperty:{title:"title",subTitle:"subTitle",valueSelectionInfo:"valueSelectionInfo"},oMandatoryPropertiesKey:{title:"sapOvpSettingsTitle",subTitle:"sapOvpSettingsSubTitle",valueSelectionInfo:"sapOvpSettingsValueSelectionInfo"},_aRefreshNotRequired:[{formElementId:"sapOvpSettingsTitle",cardElementId:"ovpHeaderTitle"},{formElementId:"sapOvpSettingsViewName",cardElementId:"ovp_card_dropdown"},{formElementId:"sapOvpDefaultViewSwitch",cardElementId:""},{formElementId:"sapOvpSettingsSubTitle",cardElementId:"SubTitle-Text"},{formElementId:"sapOvpSettingsLineItemTitle",cardElementId:"linkListTitleLabel"},{formElementId:"sapOvpSettingsLineItemSubTitle",cardElementId:"linkListSubTitleLabel"},{formElementId:"sapOvpSettingsValueSelectionInfo",cardElementId:"ovpValueSelectionInfo"},{formElementId:"sapOvpSettingsIdentification",cardElementId:"",updateProperty:"identificationAnnotationPath"},{formElementId:"sapOvpSettingsKPIHeaderSwitch",cardElementId:"kpiHeader",isKpiSwitch:true}],_aRefreshRequired:[{formElementId:"sapOvpSettingsKPIHeaderSwitch",updateProperty:"kpiHeader"},{formElementId:"sapOvpSettingsSwitchSubTitle",updateProperty:"subTitleSwitch"},{formElementId:"sapOvpSettingsSwitchInsight",updateProperty:"enableAddToInsights"},{formElementId:"sapOvpSettingsToleranceRangeHighInput",updateProperty:"toleranceRangeHighValue"},{formElementId:"sapOvpSettingsDeviationRangeHighInput",updateProperty:"deviationRangeHighValue"},{formElementId:"sapOvpSettingsToleranceRangeLowInput",updateProperty:"toleranceRangeLowValue"},{formElementId:"sapOvpSettingsDeviationRangeLowInput",updateProperty:"deviationRangeLowValue"},{formElementId:"sapOvpSettingsListType",updateProperty:"listType"},{formElementId:"sapOvpSettingsListFlavorForList",updateProperty:"listFlavor"},{formElementId:"sapOvpSettingsListFlavorForLinkList",updateProperty:"listFlavorForLinkList"},{formElementId:"sapOvpSettingsSortOrder",updateProperty:"sortOrder"},{formElementId:"sapOvpSettingsSortBy",updateProperty:"sortBy"},{formElementId:"sapOvpSettingsDynamicSubTitle",updateProperty:"dynamicSubtitleAnnotationPath"},{formElementId:"sapOvpSettingsFilterAndPresentedBy",updateProperty:"selectionPresentationAnnotationPath"},{formElementId:"sapOvpSettingsFilterBy",updateProperty:"selectionAnnotationPath"},{formElementId:"sapOvpSettingsPresentedBy",updateProperty:"presentationAnnotationPath"},{formElementId:"sapOvpSettingsDataPoint",updateProperty:"dataPointAnnotationPath"},{formElementId:"sapOvpSettingsChart",updateProperty:"chartAnnotationPath"},{formElementId:"sapOvpSettingsLineItem",updateProperty:"annotationPath"},{formElementId:"sapOvpSettingsEntitySet",updateProperty:"entitySet"},{formElementId:"sapOvpSettingsStaticLinkListDelete",updateProperty:"delete"},{formElementId:"sapOvpSettingsStaticLinkListAdd",updateProperty:"add"},{formElementId:"sapOvpSettingsStaticLinkListSort",updateProperty:"sort"},{formElementId:"sapOvpSettingsStaticLinkListChangeVisual",updateProperty:"changeVisual"},{formElementId:"sapOvpSettingsStaticLinkListRemoveVisual",updateProperty:"removeVisual"},{formElementId:"sapOvpSettingsNumberOfRows",updateProperty:"noOfRows"},{formElementId:"sapOvpSettingsKPIAnnotation",updateProperty:"kpiAnnotationPath"},{formElementId:"sapOvpSettingsNewKPICard",updateProperty:""}],aListType:[{key:"condensed",name:"Condensed"},{key:"extended",name:"Extended"}],aListFlavour:[{key:"standard",name:"Standard"},{key:"bar",name:"Bar"}],aLinkListFlavour:[{key:"carousel",name:"Carousel"},{key:"standard",name:"Standard"}],aDataPointSelectionMode:[{key:"dataPointNav",name:"Data Point Navigation"},{key:"chartNav",name:"Chart Navigation"}],_updateManifestProperties:[{formElementId:"sapOVPExistingDataSource",formElement:"existingDatasSource"},{formElementId:"sapOVPNewDataSource",formElement:"newDatasSource"},{formElementId:"sapOVPDataSourceExistingComboBox",formElement:"datasSourceExisting"},{formElementId:"sapOVPDataSourceNewInput",formElement:"datasSourceNew"},{formElementId:"sapOVPCardType",formElement:"template"},{formElementId:"sapOVPEntitySetList",formElement:"entitySet"},{formElementId:"sapOvpCardTitle",formElement:"title"},{formElementId:"sapOvpCardTitle",formElement:"titleKey"},{formElementId:"sapOvpCardTitle",formElement:"titleProperty"},{formElementId:"sapOvpCardSubTitle",formElement:"subTitle"},{formElementId:"sapOvpCardSubTitle",formElement:"subTitleKey"},{formElementId:"sapOvpCardSubTitle",formElement:"subTitleProperty"},{formElementId:"sapOVPIdentification",formElement:"identificationAnnotationPath"},{formElementId:"sapOVPSelectionPresentationVariant",formElement:"selectionPresentationAnnotationPath"},{formElementId:"sapOVPSelectionVariant",formElement:"selectionAnnotationPath"},{formElementId:"sapOVPPresentationVariant",formElement:"presentationAnnotationPath"},{formElementId:"sapOVPAnnotationPath",formElement:"annotationPath"},{formElementId:"sapOvpSettingsSwitchInsights",updateProperty:"enableAddToInsights"},{formElementId:"sapOvpSettingsToleranceRangeHighInput",updateProperty:"toleranceRangeHighValue"},{formElementId:"sapOvpSettingsDeviationRangeHighInput",updateProperty:"deviationRangeHighValue"},{formElementId:"sapOvpSettingsToleranceRangeLowInput",updateProperty:"toleranceRangeLowValue"},{formElementId:"sapOvpSettingsDeviationRangeLowInput",updateProperty:"deviationRangeLowValue"},{formElementId:"sapOVPListType",formElement:"listType"},{formElementId:"sapOVPListFlavor",formElement:"listFlavor"},{formElementId:"sapOVPAddKpiCheckBoxID",formElement:"KPICheckBox"},{formElementId:"sapOvpDataPoint",formElement:"dataPointAnnotationPath"},{formElementId:"sapOVPAddODataSelect",formElement:"addODataSelectCheckBox"},{formElementId:"sapOvpCardProperiesAuthorization",formElement:"requireAppAuthorization"},{formElementId:"sapOvpKpiAnnotationPath",formElement:"kpiAnnotationPath"},{formElementId:"sapOVPDataPointSelectionMode",formElement:"navigationPath"},{formElementId:"sapOVPLinkListFlavor",formElement:"listFlavor"},{formElementId:"sapOvpValueSelectionInfo",formElement:"valueSelectionInfo"},{formElementId:"sapOvpSettingsTitle",formElement:"title"},{formElementId:"sapOvpSettingsSubTitle",formElement:"subTitle"}],aCardType:[{template:"sap.ovp.cards.list",text:"List"},{template:"sap.ovp.cards.linklist",text:"Link List"},{template:"sap.ovp.cards.v4.linklist",text:"Link List"},{template:"sap.ovp.cards.table",text:"Table"},{template:"sap.ovp.cards.stack",text:"Stack"},{template:"sap.ovp.cards.charts.analytical",text:"Analytical"}],NewCardSettings:[{template:"sap.ovp.cards.linklist",cardSettings:["title","subTitle","listFlavor","entitySet","requireAppAuthorization","annotationPath","identificationAnnotationPath","selectionAnnotationPath","presentationAnnotationPath","selectionPresentationAnnotationPath"],text:["title","subTitle","listFlavor","requireAppAuthorization"]},{template:"sap.ovp.cards.list",cardSettings:["title","subTitle","listType","listFlavor","entitySet","enableAddToInsights","requireAppAuthorization","annotationPath","identificationAnnotationPath","selectionAnnotationPath","presentationAnnotationPath","selectionPresentationAnnotationPath","addODataSelect","dataPointAnnotationPath","valueSelectionInfo"],text:["title","subTitle","listType","listFlavor","requireAppAuthorization","addODataSelect","valueSelectionInfo"]},{template:"sap.ovp.cards.table",cardSettings:["title","subTitle","entitySet","enableAddToInsights","requireAppAuthorization","annotationPath","identificationAnnotationPath","selectionAnnotationPath","presentationAnnotationPath","selectionPresentationAnnotationPath","addODataSelect","dataPointAnnotationPath","valueSelectionInfo"],text:["title","subTitle","requireAppAuthorization","addODataSelect","valueSelectionInfo"]},{template:"sap.ovp.cards.stack",cardSettings:["title","subTitle","entitySet","requireAppAuthorization","annotationPath","addODataSelect"],text:["title","subTitle","requireAppAuthorization","addODataSelect"]},{template:"sap.ovp.cards.charts.analytical",cardSettings:["title","subTitle","entitySet","enableAddToInsights","requireAppAuthorization","kpiAnnotationPath","identificationAnnotationPath","navigationPath","dataPointAnnotationPath","valueSelectionInfo","toleranceRangeHighValue","deviationRangeHighValue","toleranceRangeLowValue","deviationRangeLowValue"],text:["title","subTitle","requireAppAuthorization","valueSelectionInfo"]}]}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * Any function that needs to be exported(used outside this file) via namespace should be defined as
 * a function and then added to the return statement at the end of this file
 */
sap.ui.predefine("sap/ovp/cards/semanticDateRangeTypeHelper", [],function(){"use strict";function e(e,t,i,n){if(e.filterSettings&&e.filterSettings.dateSettings&&e.filterSettings.dateSettings.fields){var a=e.filterSettings.dateSettings.fields;Object.entries(a).forEach(function(e){var a=-1;if(i&&i.Dates){a=i.Dates.findIndex(function(t){return t.PropertyName===e[0]})}if((a===-1||Object.keys(n).indexOf(e[0])===-1)&&e[1].defaultValue){t.getConditionTypeByKey(e[0])&&t.getConditionTypeByKey(e[0]).setOperation(e[1].defaultValue.operation)}})}}return{setSemanticDateRangeDefaultValue:e}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/stack/Component", ["sap/ovp/cards/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.stack.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.stack.Stack"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.stack.Stack"},contentPosition:{type:"string",defaultValue:"Right"},objectStreamCardsSettings:{type:"object",defaultValue:{}},objectStreamCardsTemplate:{type:"string",defaultValue:"sap.ovp.cards.quickview"},objectStreamCardsNavigationProperty:{type:"string"}},version:"1.141.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/stack/Stack.controller", ["sap/ovp/cards/generic/Card.controller","sap/m/library","sap/ui/thirdparty/jquery","sap/ovp/ui/ObjectStream","sap/ovp/cards/AnnotationHelper","sap/ui/Device","sap/ui/base/BindingParser","sap/ui/core/ComponentContainer","sap/m/Link","sap/ovp/ui/CustomData","sap/ui/core/Icon","sap/m/FlexItemData","sap/m/Text","sap/m/VBox","sap/ovp/app/resources","sap/base/util/merge","sap/ovp/app/OVPLogger","sap/ui/core/Component","sap/ovp/cards/NavigationHelper","sap/ui/core/Element"],function(t,e,jQuery,i,a,o,r,n,s,d,l,c,p,h,C,u,v,g,m,f){"use strict";var b=new v("OVP.stack.Stack");var y=e.LinkAccessibleRole;return t.extend("sap.ovp.cards.stack.Stack",{onInit:function(){t.prototype.onInit.apply(this,arguments);var e=this._oCard=this.getView().byId("stackContent");e.addEventDelegate({onclick:this.openStack.bind(this),onkeydown:function(t){if(!t.shiftKey&&(t.keyCode==13||t.keyCode==32)){t.preventDefault();this.openStack()}}.bind(this)});if(o.system.phone){this.bAfterColumnUpdateAttached=false;this.bDeviceOrientationAttached=false}this.quickViewCardContextArray=[];this.bQuickViewCardRendered=false;this.initialLoadCardLength=10;this.quickViewCardCount=0;this._createObjectStream()},onExit:function(){if(this.oObjectStream){this.oObjectStream.destroy()}},addPlaceHolder:function(t){var e=this.getView();var i=e.getModel("ovpCardProperties");var a=i.getProperty("/objectStreamCardsNavigationProperty");var o=a?true:false;if(!o){var r=m.getEntityNavigationEntries(null,this.getModel(),this.getEntityType(),i);if(r.length>0){var n=r[0].label;if(this.sPlaceHolderText==undefined){this.sPlaceHolderText=C.getText("PlaceHolder_default")}var s=this._createPlaceHolder(t,this.sPlaceHolderText,n);var d=this;s.addEventDelegate({onclick:function(){d.doNavigation(null)}});this.oObjectStream.setPlaceHolder(s)}}},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);this.ovpLayout=f.getElementById(this.oCardComponent._sOwnerId+"---mainView--ovpLayout");if(o.system.phone){this._cardWidth=this.getView().$().width();if(!this.bAfterColumnUpdateAttached){var e=this.getOwnerComponent().getComponentData();if(e&&e.mainComponent&&e.appComponent.oOvpConfig&&e.appComponent.oOvpConfig.containerLayout!=="resizable"){var i=e.mainComponent,a=i.byId("ovpLayout"),r=this;a.attachAfterColumnUpdate(function(){r._setObjectStreamCardsSize.call(r,false)});this.bAfterColumnUpdateAttached=true}}if(!this.bDeviceOrientationAttached){var r=this;o.orientation.attachHandler(function(){r._setObjectStreamCardsSize.call(r,true)})}}if(this.bSetErrorState&&this.bSetErrorState===true){this.setErrorState();return}var n=this.getView();if(this.oObjectStream){var s=this.oObjectStream.getBinding("content");s.attachDataRequested(function(){if(this.getView().byId("stackSize")!==undefined&&this.getView().byId("stackTotalSize")!==undefined){jQuery(this.getView().byId("stackSize").getDomRef()).css("visibility","hidden");jQuery(this.getView().byId("stackTotalSize").getDomRef()).css("visibility","hidden")}},this);s.attachDataReceived(function(){var t=this.getView().getModel("ovpCardProperties").getObject("/category"),e=s.getCurrentContexts().length,i=s.getLength();n.byId("stackSize").setText(e);n.byId("stackTotalSize").setText(C.getText("Total_Size_Stack_Card",[i]));var a=this.getView().byId("stackContent").getDomRef();jQuery(a).attr("aria-label",C.getText("stackCardContent",[e,i,t]));var o=this.getView().byId("stackSize").getDomRef();jQuery(o).attr("aria-label",C.getText("stackCard",[e]));this.addPlaceHolder(i);if(this.getView().byId("stackSize")!==undefined&&this.getView().byId("stackTotalSize")!==undefined){jQuery(this.getView().byId("stackSize").getDomRef()).css("visibility","visible");jQuery(this.getView().byId("stackTotalSize").getDomRef()).css("visibility","visible")}var r=this.getView().getDomRef();var d=jQuery(r).find(".sapOvpCardContentContainer");if(i!==0){if(d.length!==0){d.addClass("sapOvpCardNavigable")}}else{if(d.length!==0){var l=d.find("[role='button']");if(l.length!==0){l.removeAttr("role")}}}},this);this.addPlaceHolder("");if(s.bPendingRequest===false){s.fireDataReceived()}if(m.checkNavigation(this.getModel(),this.getEntityType(),this.getCardPropertiesModel())){this.oObjectStream.getTitle().addStyleClass("sapOvpCardNavigable")}}},getCardItemsBinding:function(){return this&&this.oObjectStream&&this.oObjectStream.getBinding("content")},_setObjectStreamCardsSize:function(t){var e=this.getView().$().width();if(this._cardWidth!=e||t){this.oObjectStream.setCardsSize(e);this._cardWidth=e}},_createObjectStream:function(){if(this.oObjectStream instanceof i){return}var t=this.getOwnerComponent();var e=t.getComponentData&&t.getComponentData();var o;var l;if(e.i18n){this.oi18n=e.i18n}if(e&&e.mainComponent){o=e.mainComponent._getOvplibResourceBundle()}else{o=t.getOvplibResourceBundle()}l=t.getPreprocessors(o);this.oModel=e.model;this.oCardPropsModel=l.xml.ovpCardProperties;var c=this.oCardPropsModel.getProperty("/entitySet");var p=this.oCardPropsModel.getProperty("/objectStreamCardsSettings");this.oObjectStreamCardsSettings=p;var h=this.oModel.getMetaModel();var C=h.getODataEntitySet(c);var u=h.getODataEntityType(C.entityType);var v=this.oCardPropsModel.getProperty("/annotationPath");var g=v?v.split(","):[];if(e){this.oAppComponent=e.appComponent;this.oOwner=e.mainComponent}if(this.oOwner){this.oGlobalFilter=this.oOwner.getView().byId("ovpGlobalFilter")}function m(t){if(t==="ovpCardProperties"){return this.oCardPropsModel}else if(t==="dataModel"){return this.oModel}else if(t==="_ovpCache"){return{}}}var f=[{getSetting:m.bind(this),bDummyContext:true},C].concat(g);var S=a.formatItems.apply(this,f);var w=r.complexParser(S);var k=this.oCardPropsModel.getProperty("/objectStreamCardsNavigationProperty");this.bStackFlavorAssociation=k?true:false;this.oStackFilterMapping;var O=this.oCardPropsModel.getProperty("/objectStreamCardsTemplate");if(this.bStackFlavorAssociation){if(O==="sap.ovp.cards.quickview"){b.error("objectStreamCardsTemplate cannot be 'sap.ovp.cards.quickview' when objectStreamCardsNavigationProperty is provided");this.bSetErrorState=true;return}this.oStackFilterMapping=this._determineFilterPropertyId(this.oModel,C,u,k);p.entitySet=this.oModel.getMetaModel().getODataAssociationSetEnd(u,k).entitySet}else{if(O!=="sap.ovp.cards.quickview"){b.error("objectStreamCardsTemplate must be 'sap.ovp.cards.quickview' when objectStreamCardsNavigationProperty is not provided");this.bSetErrorState=true;return}var P=null;var x=this.oCardPropsModel.getProperty("/identificationAnnotationPath");var j=x?x.split(","):[];if(j&&j.length>1){P=j[1]}if(P){p.identificationAnnotationPath=P}if(u["com.sap.vocabularies.UI.v1.HeaderInfo"]&&u["com.sap.vocabularies.UI.v1.HeaderInfo"].TypeName&&u["com.sap.vocabularies.UI.v1.HeaderInfo"].TypeName.String){p.title=u["com.sap.vocabularies.UI.v1.HeaderInfo"].TypeName.String}else{p.title=u.name}p.entitySet=c}p.isObjectStream=true;w.factory=function(t,e){var i=new n;this.quickViewCardContextArray.push({sId:t,oContext:e,oComponentContainer:i});return i}.bind(this);w.clearQuickViewCard=function(){this.quickViewCardContextArray=[]}.bind(this);var V=this.oCardPropsModel.getObject("/title");this.sPlaceHolderText=this.oCardPropsModel.getObject("/itemText");var A=new s({text:V,subtle:true,accessibleRole:y.Button,press:this.handleObjectStreamTitlePressed.bind(this)}).addStyleClass("sapOvpObjectStreamHeader");A.addCustomData(new d({key:"tabindex",value:"0",writeToDom:true}));A.addCustomData(new d({key:"aria-label",value:V,writeToDom:true}));this.oObjectStream=new i(this.getView().getId()+"_ObjectStream",{title:A,content:w});this.getOwnerComponent().combineBatch(this.oModel,this.getOwnerComponent().oComponentData);this.oObjectStream.setModel(this.oModel)},_renderQuickViewCards:function(t,e,i){return new Promise(function(a,o){var r=this.oCardPropsModel.getProperty("/objectStreamCardsSettings"),n;if(this.bStackFlavorAssociation){n={filters:[{path:this.oStackFilterMapping.foreignKey,operator:"EQ",value1:e.getProperty(this.oStackFilterMapping.key)}]};r=u({},n,this.oObjectStreamCardsSettings)}var s={name:this.oCardPropsModel.getProperty("/objectStreamCardsTemplate"),componentData:{cardId:t,model:this.oModel,settings:r,appComponent:this.oAppComponent,mainComponent:this.oOwner},manifest:false};if(this.oGlobalFilter){s.componentData.globalFilter={getUiState:this.oGlobalFilter.getUiState.bind(this.oGlobalFilter)}}var d=this.oi18n;g.create(s).then(function(t){t.setBindingContext(e);if(d){t.setModel(d,"@i18n")}i.setComponent(t);a();i.setBindingContext=function(e){t.setBindingContext(e)}})}.bind(this))},_determineFilterPropertyId:function(t,e,i,o){var r,n=i.namespace,s,d;for(var l=0;l<i.navigationProperty.length;l++){if(i.navigationProperty[l].name===o){r=i.navigationProperty[l];break}}s=r.relationship;d=a.getAssociationObject(t,s,n);var c=d.referentialConstraint,p={};if(c){p.foreignKey=c.dependent.propertyRef[0].name;p.key=c.principal.propertyRef[0].name;return p}},_createPlaceHolder:function(t,i,a){var o=new l({src:"sap-icon://display-more",useIconTooltip:false,layoutData:new c({alignSelf:e.FlexAlignSelf.Center,styleClass:"sapOvpStackPlaceHolderIconContainer"})});o.addStyleClass("sapOvpStackPlaceHolderIcon");var r=t+" "+i;var n=C.getText("SeeMoreContentAppName",[r,a]);var s=new p({text:n,textAlign:"Center",layoutData:new c({alignSelf:e.FlexAlignSelf.Center,maxWidth:"14rem"})});s.addCustomData(new d({key:"role",value:"heading",writeToDom:true}));s.addCustomData(new d({key:"aria-label",value:n,writeToDom:true}));s.addStyleClass("sapOvpStackPlaceHolderTextLine");var u=new h({items:[s]});u.addStyleClass("sapOvpStackPlaceHolderLabelsContainer");u.addCustomData(new d({key:"tabindex",value:"0",writeToDom:true}));u.addCustomData(new d({key:"role",value:"button",writeToDom:true}));var v=new h({items:[o,u]});v.addStyleClass("sapOvpStackPlaceHolder");v.addEventDelegate({onkeydown:function(t){if(!t.shiftKey&&(t.keyCode==13||t.keyCode==32)){t.preventDefault();t.srcControl.$().click()}}});return v},_openStack:function(){if(this.oObjectStream){var t=this.oObjectStream.getBinding("content");if(t.getCurrentContexts().length>0){var e=this.getView().$().width();this.getView().addDependent(this.oObjectStream);this.oObjectStream.setModel(this.getView().getModel("@i18n"),"@i18n");this.oObjectStream.open(e,this._oCard)}}if(this.ovpLayout){this.ovpLayout.setActive(true)}if(this.oObjectStream.getNewContentAvailable()){if(this.quickViewCardContextArray.length>10){var i=[];for(var a=this.initialLoadCardLength;a<this.quickViewCardContextArray.length;a++){i.push(this._renderQuickViewCards(this.quickViewCardContextArray[a].sId,this.quickViewCardContextArray[a].oContext,this.quickViewCardContextArray[a].oComponentContainer))}}this.oObjectStream.setNewContentAvailable(false)}},openStack:function(){if(this.ovpLayout){this.ovpLayout.setActive(false)}if(this.oObjectStream.getNewContentAvailable()){var t=[];var e=this.quickViewCardContextArray.length<=this.initialLoadCardLength?this.quickViewCardContextArray.length:this.initialLoadCardLength;for(var i=this.quickViewCardCount;i<e;i++){t.push(this._renderQuickViewCards(this.quickViewCardContextArray[i].sId,this.quickViewCardContextArray[i].oContext,this.quickViewCardContextArray[i].oComponentContainer))}Promise.all(t).then(function(){this.bQuickViewCardRendered=true;this._openStack()}.bind(this))}else{this._openStack()}},handleObjectStreamTitlePressed:function(t){this.doNavigation(null)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/table/Component", ["sap/ovp/cards/generic/base/table/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.table.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.table.Table"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.table.Table"},annotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.LineItem"},countHeaderFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.CountHeader"},headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.KPIHeader"},enableAddToInsights:{type:"boolean",defaultValue:true}},version:"1.141.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/table/Table.controller", ["sap/ovp/cards/generic/base/table/BaseTable.controller","sap/ovp/filter/FilterUtils","sap/ui/core/EventBus","sap/base/util/isEmptyObject"],function(t,e,a,n){"use strict";return t.extend("sap.ovp.cards.table.Table",{onInit:function(){t.prototype.onInit.apply(this,arguments);var n=this;this.eventhandler=function(t,a,i){e.applyFiltersToV2Card(i,n)};this.GloabalEventBus=a.getInstance();if(this.oMainComponent&&this.oMainComponent.isMacroFilterBar){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",n.eventhandler)}},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments)},onDataReceived:function(t){this.bdataLoadedToEnableAddToInsight=true;var e=this.byId("ovpTable");e&&e.setBusy(false);var a=this.getCardContentContainer();if(!a){return}var i=t.getParameter("data");if(!i||n(i)||!i.results||!i.results.length){var r=this.getOwnerComponent().getComponentData().cardId;if(r&&this.oMainComponent.aErrorCards.indexOf(r)===-1){this.oMainComponent.createNoDataCard(r)}}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * Any function that needs to be exported(used outside this file) via namespace should be defined as
 * a function and then added to the return statement at the end of this file
 */
sap.ui.predefine("sap/ovp/cards/v4/V4AnnotationHelper", ["sap/ovp/cards/CommonUtils","sap/ui/model/odata/v4/AnnotationHelper","sap/ovp/cards/MetadataAnalyser","sap/ovp/helpers/V4/MetadataAnalyzer","sap/ovp/cards/AnnotationHelper","sap/ovp/cards/Filterhelper","sap/ui/core/format/DateFormat"],function(e,t,a,r,i,n,o){"use strict";var l={TEXT:"com.sap.vocabularies.Common.v1.Text",TEXT_ARRANGEMENT:"com.sap.vocabularies.UI.v1.TextArrangement",UOM:"Org.OData.Measures.V1.Unit",ISO_CURRENCY:"Org.OData.Measures.V1.ISOCurrency"};var u={TEXT_LAST:"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast",TEXT_FIRST:"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst",TEXT_ONLY:"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly",TEXT_SEPARATE:"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate"};function g(e,t,a){var r=i.getSortedDataFields(e,t)[a];if(r){return p(e,r)}return""}function c(e,t,a,r){var n=i.getSortedDataPoints(e,t)[a];if(!n){return""}var o=e.getSetting("ovpCardProperties");var l=o.getProperty("/entityType");var u=o.getProperty("/metaModel");return s(e,n,l,u,r)}function s(e,t,a,r,i){if(!t||!t.Value){return""}var n=e.getSetting("ovpCardProperties");var o=false;if(n){var u=n.getProperty("/ignoreSapText");o=u==undefined?o:u}var g=r.getData()["$Annotations"][a.$Type+"/"+t.Value.$Path];var c=false;if(o==true){if(g&&(g["@com.sap.vocabularies.Analytics.v1.Measure"]||g["sap:aggregation-role"]=="measure")){c=true}}if(!c&&g){var s;if(g[l.TEXT]){s=g[l.TEXT]?g[l.TEXT]:g[l.TEXT].$Path}else if(g["sap:text"]){s=g["sap:text"]}if(s){t={Value:{$Path:s}}}}return p(e,t,i)}function f(){var e=arguments[arguments.length-1],t=arguments[0];var a=this.mBindingInfos;var r=o.getInstance(e.dateFormat);if(!t){t="";return t}else if(a&&a.text&&a.text.binding){t=a.text.binding.getRawValue()[0]}return r.format(new Date(t),e.bUTC)}function p(e,a,r,i){if(a.Value.Apply){return t.format(e,a.Value)}var n=e.getSetting("ovpCardProperties");var o=n.getProperty("/entityType");var l=n.getProperty("/metaModel");return h(e,a,o,l,r,i)}p.requiresIContext=true;function v(e,a,r,i){var e=!e.getPath()?e.getInterface(0):e;if(!r||typeof i!=="string"){return i}var n=r.annotations&&r.annotations["@"+l.TEXT]||r["@"+l.TEXT];var o=[];var g=false;var c=a&&a.$NavigationPropertyBinding?true:false;if(c){o=Object.keys(a.$NavigationPropertyBinding);g=o&&o.indexOf(n&&n.$Path&&n.$Path.split("/")[0])===-1}if(!n||g){return i}var s,f;var p="@"+l.TEXT+"@"+l.TEXT_ARRANGEMENT;s=r.annotations&&r.annotations[p]||r[p];f=s&&s.$EnumMember;if(!f){s=n&&n["@"+l.TEXT_ARRANGEMENT];f=s&&s.$EnumMember}if(!f){s=a&&a[l.TEXT_ARRANGEMENT];f=s&&s.$EnumMember}var v=t.format(n,{context:e});if(!v||v===" "){return i}if(!f){return i+" ("+v+")"}var h;switch(f){case u.TEXT_FIRST:h=v+" ("+i+")";break;case u.TEXT_LAST:h=i+" ("+v+")";break;case u.TEXT_ONLY:h=v;break;case u.TEXT_SEPARATE:h=i+" ("+v+")";break;default:h=i;break}return h}function h(e,a,n,o,u,g,c){if(a.Value.Apply){return t.format(e,a.Value)}var s=a.Value.$Path||a.Value.String;var f=i._getEntityTypeForODataV4Model(o,n,s),p="",h,y;var m=e.getSetting("ovpCardProperties");var P=m&&m.getProperty("/contentFragment");if(!g){if(a.Value.$Path&&a.Value.$Path.split("/").length>1){f=i._getNavigationSuffix(o,n,a.Value.$Path,e)}if(!f){return""}if(f.$Type==="Edm.DateTime"||f.$Type==="Edm.DateTimeOffset"){var C={relative:true,relativeScale:"auto"},T=m&&m.getProperty("/showDateInRelativeFormat");if(T!==undefined&&!T){C={style:"medium"}}y={dateFormat:C,bUTC:f.$Type==="Edm.DateTime"?true:false};h="CardAnnotationhelperV4.formatDate";p=i._generatePathForField([a.Value.$Path||s.split("/")[s.split("/").length-1]],h,y,"String",true)}else if(a.ValueFormat&&a.ValueFormat.NumberOfFractionalDigits>=0||f["scale"]){var d=a.ValueFormat&&a.ValueFormat.NumberOfFractionalDigits||0,$=a.ValueFormat&&a.ValueFormat.ScaleFactor&&a.ValueFormat.ScaleFactor.$Decimal,V;if(f&&f["@"+l.ISO_CURRENCY]){V=f["@"+l.ISO_CURRENCY].$Path||f["@"+l.ISO_CURRENCY]}else if(f&&f["@"+l.UOM]){V=f["@"+l.UOM].$Path||f["@"+l.UOM]}else if(f&&f["@sap:unit"]){V=f["@sap:unit"]}var O=r.getODataPropertyFromV4Metadata(o,n.$Type,V),A=[a.Value.$Path||s.split("/")[s.split("/").length-1]];if(d>2){d=2}y={numberOfFractionalDigits:d,scaleFactor:$,bODataV4:i.isODataV4Context(e)};if(f&&f["@"+l.ISO_CURRENCY]){var x=f["@"+l.ISO_CURRENCY];if(x.$Path){h="CardAnnotationhelper.formatCurrency";A.push(x.$Path)}else if(x.String){y.currencyString=x.String;h="CardAnnotationhelper.formatCurrency"}}else if(O&&(O[l.ISO_CURRENCY]||O["sap:semantics"]==="currency-code")){h="CardAnnotationhelper.formatCurrency";A.push(V)}else{h="CardAnnotationhelper.formatNumberCalculation"}y.functionName=h;p=i._generatePathForField(A,h,y)}else{if(c){p=t.format(a.Value,{context:e})}else{var E=t.format(a.Value,e.getModel()?{context:e}:{context:e.getInterface(0)});var R=E.split(",");var D=[];if(R.length>1){for(var S=0;S<R.length;S++){if(R[S].indexOf("path:")>=0||R[S].indexOf("type:")>=0){D.push(R[S])}}if(D.length>0){p=p+D.join(",");if(p.substring(p.length-1)!=="}"){p=p+"}"}}}else{p=E}}}if(P){p=v(e,n,f,p)}if(f&&f["@"+l.UOM]){var F=f["@"+l.UOM];if(F.$Path){p+=" "+i._generatePathForField([F.$Path]);p+=" "+i.getSapTextPathForUOM(F.$Path,o,n,e)}else if(F){if(F!=="%"){p+=" "}p+=F}}}if(!u){if(f&&f["@"+l.ISO_CURRENCY]){var x=f["@"+l.ISO_CURRENCY];if(x){if(x.$Path){p+=" "+i._generatePathForField([x.$Path])}else{p+=" "+x}p+=" "+i.getSapTextPathForUOM(x.$Path,o,n,e)}}}if(p[0]===" "){p=p.substring(1)}p=p.replace("\\","");p=p.replace("\\","");p=p.replace("Unsupported: ","");p=p.replace("$P","p");return p}function y(e,t){var r=e.getSetting("ovpCardProperties");var o=r.getProperty("/metaModel");var l=o.getData();var u=t;var g,c,s,f;if(r.getProperty("/selectionAnnotationPath")){g="@"+r.getProperty("/selectionAnnotationPath");c=l["$Annotations"][u.$Type][g]}if(r.getProperty("/presentationAnnotationPath")){s=r.getProperty("/presentationAnnotationPath");s="@"+s;f=l["$Annotations"][u.$Type][s]}var p="/"+r.getProperty("/entitySet");var v=Array.prototype.slice.call(arguments,2);var h=e.getSetting("ovpCardProperties"),y=h.getProperty("/parameters");if(c||!!y){if(c&&c.Parameters&&c.Parameters.length>0||!!y){p=a.resolveParameterizedEntitySet(e.getSetting("dataModel"),t,c,y)}}if(r.getProperty("/cardLayout")&&r.getProperty("/cardLayout/noOfItems")){var P="{path: '"+p+"', length: "+ +r.getProperty("/cardLayout/noOfItems")}else{var P="{path: '"+p+"', length: "+i._getItemsLength(r)}var C=m(o,u.$Type,v,e);var T=i.checkFilterPreference(r);if(T||C.length>0){P=P+", parameters: {"}if(C.length>0){if(C.length>0){P=P+"$expand: '"+C.join(",")+"'"}if(T){P=P+", "}}if(T){P=P+"custom: {cardId: '"+r.getProperty("/cardId")+"'}"}if(T||C.length>0){P=P+", $count: true}"}else{P=P+", parameters: {$count:true}"}var d=i.getSorters(r,f,true);if(d.length>0){P=P+", sorter:"+JSON.stringify(d)}var $=n.getFilters(r,c,true);if($.length>0){$=n.createExcludeFilters($,r);P=P+", filters:"+JSON.stringify($)}P=P+"}";return P}y.requiresIContext=true;function m(e,t,a,r){var n=[];var o,l;for(var u=0;u<a.length;u++){if(!a[u]){continue}o=e.getData()["$Annotations"][t]["@"+a[u]];o=o?o:[];for(var g=0;g<o.length;g++){if(o[g].Value&&o[g].Value.$Path){l=i._getNavigationPrefix(e,t,o[g].Value.$Path,r);if(l&&n.indexOf(l)===-1){n.push(l)}}}}return n}function P(e,t,a){return g(e,t,a)}P.requiresIContext=true;function C(e,t,a){return c(e,t,a)}C.requiresIContext=true;function T(e,t,a,r){var n=i.getDataPointsCount(e,t);if(n>0){return C(e,t,a)}else{return P(e,t,r)}}T.requiresIContext=true;function d(e,t,a,r){return c(e,t,a,r)}d.requiresIContext=true;function $(e,t){if(!t){return""}return p(e,t)}$.requiresIContext=true;function V(e,t,a){if(!t){return""}var r=e.getSetting("ovpCardProperties");var n=r.getProperty("/entityType");var o=r.getProperty("/metaModel");var l=Object.assign({},t);var u=Object.assign({},e);t=i._formatValueFromTarget(u,l);return s(e,t,n,o,a)}V.requiresIContext=true;function O(e){var t=e.getObject();var a=e.getModel();var r=a.getProperty("/metaModel");var i="/"+a.getProperty("/entitySet");var n=r.getObject(i);t="/"+n.$Type+"/@"+t;return r.createBindingContext(t)}function A(t,o,l,u){var g;if(l&&l.Value&&l.Value.$Path){g=l.Value.$Path}else if(l&&l.Description&&l.Description.Value&&l.Description.Value.$Path){g=l.Description.Value.$Path}var c="";var s=u&&u.Parameters;var f="";var p=t.getSetting("ovpCardProperties"),v=p.getProperty("/parameters");s=s||!!v;var h=t.getSetting("dataModel");var y=t.getModel(0);var m=r.getEntitySetName(y,o.$Type);if(s){var P=a.resolveParameterizedEntitySet(h,o,u,v);c+="{path: '"+P+"'"}else{c+="{path: '/"+m+"'"}c+=", length: 1";var C=t.getSetting("ovpCardProperties");var T=C.getProperty("/entityType");var d=y.getObject("/"+m+"/");var $,V;for($ in d){if($.startsWith("$")){continue}V=T.$Type.concat("/",$);d[$].annotations=y.getData($).$Annotations[V]}var O=n.getFilters(C,u,true);if(O.length>0){O=n.createExcludeFilters(O,C);f+=", filters: "+JSON.stringify(O)}var A=[];var x=h.oMetaModel.getData().$Annotations;var R;var D=C.getProperty("/measureAggregate");if(D&&D.hasOwnProperty(g)){R=D[g]}else{R=E(g,x,o.$Type)}A.push("'"+g+"Agg' : { 'name' : '"+g+"', 'with' : '"+R+"'}");if(l&&l.Criticality&&l.Criticality.$Path){R=E(l.Criticality.$Path,x,o.$Type);A.push("'"+l.Criticality.$Path+"Agg' : { 'name' : '"+l.Criticality.$Path+"', 'with' : '"+R+"'}")}if(l&&l.CriticalityCalculation&&l.CriticalityCalculation.DeviationRangeLowValue&&l.CriticalityCalculation.DeviationRangeLowValue.$Path){R=E(l.CriticalityCalculation.DeviationRangeLowValue.$Path,x,o.$Type);A.push("'"+l.CriticalityCalculation.DeviationRangeLowValue.$Path+"Agg' : { 'name' : '"+l.CriticalityCalculation.DeviationRangeLowValue.$Path+"', 'with' : '"+R+"'}")}if(l&&l.CriticalityCalculation&&l.CriticalityCalculation.ToleranceRangeLowValue&&l.CriticalityCalculation.ToleranceRangeLowValue.$Path){var R=E(l.CriticalityCalculation.ToleranceRangeLowValue.$Path,x,o.$Type);A.push("'"+l.CriticalityCalculation.ToleranceRangeLowValue.$Path+"Agg' : { 'name' : '"+l.CriticalityCalculation.ToleranceRangeLowValue.$Path+"', 'with' : '"+R+"'}")}if(l&&l.CriticalityCalculation&&l.CriticalityCalculation.DeviationRangeHighValue&&l.CriticalityCalculation.DeviationRangeHighValue.$Path){var R=E(l.CriticalityCalculation.DeviationRangeHighValue.$Path,x,o.$Type);A.push("'"+l.CriticalityCalculation.DeviationRangeHighValue.$Path+"Agg' : { 'name' : '"+l.CriticalityCalculation.DeviationRangeHighValue.$Path+"', 'with' : '"+R+"'}")}if(l&&l.CriticalityCalculation&&l.CriticalityCalculation.ToleranceRangeHighValue&&l.CriticalityCalculation.ToleranceRangeHighValue.$Path){var R=E(l.CriticalityCalculation.ToleranceRangeHighValue.$Path,x,o.$Type);A.push("'"+l.CriticalityCalculation.ToleranceRangeHighValue.$Path+"Agg' : { 'name' : '"+l.CriticalityCalculation.ToleranceRangeHighValue.$Path+"', 'with' : '"+R+"'}")}if(l&&l.TrendCalculation&&l.TrendCalculation.ReferenceValue&&l.TrendCalculation.ReferenceValue.$Path){var R=E(l.TrendCalculation.ReferenceValue.$Path,x,o.$Type);A.push("'"+l.TrendCalculation.ReferenceValue.$Path+"Agg' : { 'name' : '"+l.TrendCalculation.ReferenceValue.$Path+"', 'with' : '"+R+"'}")}var S=i.checkFilterPreference(p);var F=S?", custom: {cardId: '"+p.getProperty("/cardId")+"'}":"";var I=e.getUnitColumnForODataV4(g,y,m);var b=I?", group: {"+I+": {}}":"";var M="parameters:{'$$aggregation' : {'aggregate' : {"+A.join(",")+"}"+b+"}"+F+"}";return c+", "+M+f+"}"}A.requiresIContext=true;function x(e,a){var r=a.$Path;var i=t.format(a,{context:e});return i.replace(r,r+"Agg")}x.requiresIContext=true;function E(e,t,a){var r=t[a+"/"+e];var i=t[a];var n=i&&i["@com.sap.vocabularies.Analytics.v1.AggregatedProperty"];if(n&&n.AggregatableProperty&&n.AggregatableProperty.$PropertyPath===e){return n.AggregationMethod}else if(r["@Org.OData.Aggregation.V1.RecommendedAggregationMethod"]){return r["@Org.OData.Aggregation.V1.RecommendedAggregationMethod"].toLowerCase()}else if(r["@Org.OData.Aggregation.V1.default"]){return r["@Org.OData.Aggregation.V1.default"].$EnumMember.split("/")[1].toLowerCase()}return"sum"}function R(e,a){for(var r=0;r<a.length;r++){if(a[r].type.$EnumMember.indexOf("ContactInformationType/work")>=0){var i=t.format(a[r].address,{context:e});return i}}return""}R.requiresIContext=true;function D(e,a){for(var r=0;r<a.length;r++){if(a[r].type.$EnumMember.indexOf("PhoneType/work")>=0){var i=t.format(a[r].uri,{context:e});return i}}return""}D.requiresIContext=true;function S(e,a){for(var r=0;r<a.length;r++){if(a[r].type.$EnumMember.indexOf("PhoneType/cell")>=0){var i=t.format(a[r].uri,{context:e});return i}}return""}S.requiresIContext=true;function F(e,a){for(var r=0;r<a.length;r++){if(a[r].type.$EnumMember.indexOf("PhoneType/fax")>=0){var i=t.format(a[r].uri,{context:e});return i}}return""}F.requiresIContext=true;return{TextArrangementType:u,formatField:p,formatItems:y,formatDataFieldValueOnIndex:P,formatDataPointValueOnIndex:C,formatDataPointOrField:T,formatObjectNumber:d,formatDataFieldValueGeneric:$,formatDataPointValue:V,resolveEntityTypePath:O,getAggregateNumber:A,getEmail:R,getPhone:D,getDevice:S,getPhoneType:F,getTextArrangementBinding:v,formatDate:f,formatDynamicSubtitle:x}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/charts/OVPVizDataHandler", ["sap/ui/core/Control","sap/ui/model/json/JSONModel","sap/ovp/cards/generic/base/analytical/Utils","sap/ovp/app/resources","sap/base/util/each","sap/base/util/merge","sap/ovp/cards/generic/base/analytical/OVPVizDatahelper"],function(e,t,a,r,s,i,n){"use strict";return e.extend("sap.ovp.cards.v4.charts.OVPVizDataHandler",{metadata:{aggregations:{data:{type:"sap.ui.core.Element"},aggregateData:{type:"sap.ui.core.Element"},content:{multiple:false}},properties:{chartType:{defaultValue:false},dependentDataReceived:{defaultValue:false},scale:{defaultValue:""},entitySet:{}}},renderer:function(e,t){e.openStart("div",t).openEnd();if(t.getContent()){e.renderControl(t.getContent())}e.close("div")},mergeDatasets:function(e,a,o){var l=this;var u=this.getModel();var p=e.mParameters;var c=i([],this.dataSet);if(p){var d=p["$apply"]}var g=e.getPath().substring(1);var v=-1;if(g){v=g.indexOf("Parameters")}if(v>=0){g=g.substr(0,g.indexOf("Parameters"))}var f=u.getMetaModel();var m=this.getEntitySet();var h=f.getData("/")["$Annotations"];var y=[];var C=[];for(var D in h){if(h[D]["@com.sap.vocabularies.Analytics.v1.Measure"]){if(d&&d.includes(D.split("/")[1])){y.push(D.split("/")[1])}}else{if(d&&d.includes(D.split("/")[1])){C.push(D.split("/")[1])}}}if(c){for(var b=0;b<c.length-2;b++){for(var S=0;S<y.length;S++){if(c[0]){c[0][y[S]]=Number(c[0][y[S]])+Number(c[b+1][y[S]])}}}c.__count=c.length;var P=c.__count-c.length;var A={};A.results=[];A.results[0]=c[0];var M;if(c.__count>c.length){var O=i({},this.aggregateSet);if(O&&O.results&&c.results.length<c.__count){s(y,function(e){O.results[0][y[e]]=String(Number(l.aggregateSet.results[0][y[e]])-Number(A.results[0][y[e]]))});s(C,function(e){O.results[0][C[e]]=r.getText("OTHERS_DONUT",[P+1])});O.results[0].$isOthers=true;M=O.results[0];if(M){a.results.splice(-1,1)}}}if(M){a.results.push(M)}var E=o.getModel("ovpCardProperties");var T=E&&E.getProperty("/bEnableStableColors");var V=E&&E.getProperty("/colorPalette");var x=h[m]["@"+(E&&E.getProperty("/chartAnnotationPath"))];if(x.DimensionAttributes.length===1&&T&&o.getVizType()==="donut"&&V&&V instanceof Object){var R=x.DimensionAttributes[0].Dimension.$PropertyPath;var _=o.getVizProperties();if(!_){var B={plotArea:{dataPointStyle:{rules:[]}}};_=B}else if(_&&!_.plotArea){_.plotArea={dataPointStyle:{rules:[]}}}_.legend={itemMargin:1.25};if(o&&_&&_.plotArea){if(!_.plotArea.dataPointStyle){_.plotArea.dataPointStyle={rules:[]}}else{_.plotArea.dataPointStyle.rules=[]}var $=E.getProperty("/entityType");var z=f.getData()["$Annotations"][$.$Type+"/"+R];if(z){var I=z["@com.sap.vocabularies.Common.v1.Label"]?z["@com.sap.vocabularies.Common.v1.Label"]:R;var N;if(z["@com.sap.vocabularies.Common.v1.Text"]){N=z["@com.sap.vocabularies.Common.v1.Text"]["$Path"]}else if(z["sap:text"]){N=z["sap:text"]}else{N=z}n.cacheValues(V,R,N,I);n.addColorRulesToVizProperties(a,_);n.handleOthersSectionForCharts(O,_)}}o.setVizProperties(_);n.setVizPropertiesForInsightCards(E,o,_)}}var j=new t;var k=[];for(var b=0;b<a.results.length;b++){var Y={};for(var w=0;w<C.length;w++){Y[C[w]]=a.results[b]&&a.results[b][C[w]]}for(var F=0;F<y.length;F++){Y[y[F]]=a.results[b]&&(a.results[b][y[F]+"Aggregate"]||a.results[b][y[F]])}k.push(Y)}j.setData(k);o.setModel(j,"analyticalmodel")},updateBindingContext:function(){var r=this.getBinding("data");var o=this;if(this.chartBinding==r){return}else{this.chartBinding=r;if(r){var o=this;r.attachEvent("dataReceived",function(e){if(a.checkIfDataExistInEvent(e)){o.dataSet=e&&e.getSource().getCurrentContexts().map(function(e){return e&&e.getObject()});o.oDataClone={results:i([],o.dataSet)};if(o.getChartType()=="donut"&&o.getBinding("aggregateData")!==undefined){if(o.getDependentDataReceived()===true||o.getDependentDataReceived()==="true"){o.mergeDatasets(r,o.oDataClone,o.getContent());o.setDependentDataReceived(false)}else{o.setDependentDataReceived(true)}}else{var l=new t;if(o.dataSet){var u=o.getEntitySet().split(".")[o.getEntitySet().split(".").length-1];var p=r.getModel();var c=a.cacheODataMetadata(p);var d=[];var g={};var v=c[u];if(v){var f=Object.keys(v)}if(f&&f.length){s(f,function(e,t){if(v[t].$Type==="Edm.String"){var a=o.getModel().getMetaModel().getObject("/"+o.getEntitySet()+"/"+t+"@");if(a["@com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){d.push(t);g[t]={semantics:"yearmonth"}}else if(a["@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){d.push(t);g[t]={semantics:"yearquarter"}}else if(a["@com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){d.push(t);g[t]={semantics:"yearweek"}}else if(a["@com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]){d.push(t);g[t]={semantics:"fiscalyearperiod"}}}})}n.formatDateBasedOnSemantics(d,g,o.dataSet);l.setData(o.dataSet);o.oDataClone={results:i([],o.dataSet)}}o.getContent().setModel(l,"analyticalmodel");o.mergeDatasets(r,o.oDataClone,o.getContent())}}})}e.prototype.updateBindingContext.apply(this,arguments)}n.attachDataReceivedToAggregationBinding.bind(this)()}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * @fileOverview Library to Manage rendering of Viz Charts.
 *
 * Any function that needs to be exported(used outside this file) via namespace should be defined as
 * a function and then added to the return statement at the end of this file
 */
sap.ui.predefine("sap/ovp/cards/v4/charts/VizAnnotationManager", ["sap/ovp/cards/generic/base/analytical/Utils","sap/ovp/cards/AnnotationHelper","sap/ui/core/format/DateFormat","sap/viz/ui5/controls/VizTooltip","sap/ovp/cards/CommonUtils","sap/ovp/cards/OVPCardAsAPIUtils","sap/viz/ui5/data/DimensionDefinition","sap/viz/ui5/data/MeasureDefinition","sap/viz/ui5/controls/common/feeds/FeedItem","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/base/util/each","sap/base/util/merge","sap/ovp/app/OVPLogger","sap/ovp/helpers/V4/MetadataAnalyzer","sap/ovp/insights/helpers/AnalyticalCard","sap/ovp/cards/NavigationHelper","sap/ovp/cards/Constants","sap/ovp/cards/MetadataAnalyser","sap/ovp/cards/Filterhelper","sap/ovp/cards/charts/VizAnnotationManager","sap/ovp/cards/generic/base/analytical/VizAnnotationManagerHelper"],function(e,t,a,r,i,n,o,s,l,u,f,v,c,p,g,h,d,m,P,A,y,T){"use strict";var _=m.Annotations;var E=m.errorMessages;var b=[_.COLUMNSTACKED_CHARTTYPE,_.DONUT_CHARTTYPE,_.COLUMN_CHARTTYPE,_.BAR_CHARTTYPE,_.VERTICALBULLET_CHARTTYPE,_.LINE_CHARTTYPE,_.COMBINATION_CHARTTYPE,_.BUBBLE_CHARTTYPE];var C=[_.COLUMNSTACKED_CHARTTYPE];var S;var N=new p("OVP.charts.VizAnnotationManager");function O(a,r,i,n,o,s,l){var u="{";if(!a||!a.getSetting("ovpCardProperties")){N.error(E.ANALYTICAL_CONFIG_ERROR);u+="}";return u}var f=a.getSetting("dataModel");var p;if(l&&l.$EnumMember){p=l.$EnumMember.split("/");if(p&&p[1]!="Donut"&&o===undefined){return null}}var h=[];var d=[];var m=[];var T=[];var b=[];var C=[];var S=[];var O=[];var I=i&&i.Parameters;var x=n&&n.SortOrder;var V=n&&n.MaxItems,Y=null;var $;var L;var U;var F=null;var K=_.TEXT_KEY;var k=_.TEXT_KEY_V4;var w=_.UNIT_KEY;var B="@"+_.UNIT_KEY_V4_ISOCurrency;var z="@"+_.UNIT_KEY_V4_Unit;var j={};if(typeof V==="number"||typeof V==="string"&&!isNaN(V)){Y=parseInt(V,10)}if(Y){if(Y==="0"){N.error("OVP-AC: Analytic card Error: maxItems is configured as "+Y);u+="}";return u}if(!/^\d+$/.test(Y)){N.error("OVP-AC: Analytic card Error: maxItems is Invalid. Please enter an Integer.");u+="}";return u}}var H=a.getSetting("ovpCardProperties"),X=H.getProperty("/parameters");var q=H.getProperty("/metaModel");var W=H.getProperty("/measureAggregate");var Q=g.getEntitySetName(q,r.$Type);I=I||!!X;if(I){var J=P.resolveParameterizedEntitySet(f,r,i,X);u+="path: '"+J+"'"}else{u+="path: '/"+Q+"'"}var Z=[];F=a.getSetting("ovpCardProperties").getProperty("/entitySet");if(!f||!F){return u}var ee=e.getMetadata(f,F);G(f,ee,r.$Type);var te=a.getSetting("ovpCardProperties").getProperty("/cardLayout");var ae=1,re;var ie=e.getConfig();var ne;var oe;if(o&&te&&te.colSpan&&te.colSpan>1){re=te.colSpan-ae;for(var se in ie){if((oe=ie[se].reference)&&ie[oe]){var le=c({},ie[oe]);ie[se]=le}if(se===p[1]||ie[se].time&&ie[se].time.type===p[1].toLowerCase()){ne=ie[se];break}}var ue=e.hasTimeSemantics(o,ne,f,F,true);if(ue){ne=ne.time}else{ne=ne.default}var fe=a.getSetting("ovpCardProperties").getProperty("/dataStep");if(!fe){if(ne.resize&&ne.resize.hasOwnProperty("dataStep")&&!isNaN(ne.resize.dataStep)){fe=ne.resize.dataStep}}fe=parseInt(fe,10);if(re>0&&fe&&!isNaN(fe)){Y=parseInt(Y,10)+fe*re}}var H=a.getSetting("ovpCardProperties");Z=A.getFilters(H,i,true);if(Z.length>0){Z=A.createExcludeFilters(Z,H)}var ve=q.getObject("/"+r.$Type+"/@");v(s,function(e,t){$=M(ve,t);if(t.DataPoint&&t.DataPoint.$AnnotationPath){var a=ve[t.DataPoint.$AnnotationPath];if(a.ForecastValue&&(a.ForecastValue.PropertyPath||a.ForecastValue.Path)){var r=a.ForecastValue.PropertyPath||a.ForecastValue.Path;b.push(a.ForecastValue.PropertyPath||a.ForecastValue.Path);if(ee&&ee[r]){var i;if(ee[r].annotations&&ee[r].annotations[B]){i=ee[r].annotations[B].$Path?ee[r].annotations[B].$Path:undefined}else if(ee[r].annotations&&ee[r].annotations[z]){i=ee[r].annotations[z].$Path?ee[r].annotations[z].$Path:undefined}else if(ee[r][w]){i=ee[r][w]}if(i){if((C?Array.prototype.indexOf.call(C,i):-1)===-1){C.push(i)}}}}if(a.TargetValue&&(a.TargetValue.PropertyPath||a.TargetValue.Path)){var n=a.TargetValue.PropertyPath||a.TargetValue.Path;b.push(a.TargetValue.PropertyPath||a.TargetValue.Path);if(ee&&ee[n]){var i;if(ee[n].annotations&&ee[n].annotations[B]){i=ee[n].annotations[B].$Path?ee[n].annotations[B].$Path:undefined}else if(ee[n].annotations&&ee[n].annotations[z]){i=ee[n].annotations[z].$Path?ee[n].annotations[z].$Path:undefined}else if(ee[n][w]){i=ee[n][w]}if(i){if((C?Array.prototype.indexOf.call(C,i):-1)===-1){C.push(i)}}}}}b.push($);if(ee&&ee[$]){if(ee[$][k]){if(ee[$][k].String&&$!=ee[$][k].String){b.push(ee[$][k].String?ee[$][k].String:$)}else if(ee[$][k].Path&&$!=ee[$][k].Path){b.push(ee[$][k].Path?ee[$][k].Path:$)}}else if(ee[$][K]&&$!=ee[$][K]){b.push(ee[$][K]?ee[$][K]:$)}}if(ee&&ee[$]){var i;if(ee[$].annotations&&ee[$].annotations[B]){i=ee[$].annotations[B].$Path?ee[$].annotations[B].$Path:undefined}else if(ee[$].annotations&&ee[$].annotations[z]){i=ee[$].annotations[z].$Path?ee[$].annotations[z].$Path:undefined}else if(ee[$][w]){i=ee[$][w]}if(i){if((C?Array.prototype.indexOf.call(C,i):-1)===-1){C.push(i)}}}});v(o,function(e,t){$=t.Dimension.$PropertyPath;h.push($);if(ee&&ee[$]){if(ee[$]["annotations"]&&ee[$]["annotations"]["@"+k]){if(typeof ee[$]["annotations"]["@"+k]==="string"&&ee[$]["annotations"]["@"+k]&&$!=ee[$]["annotations"]["@"+k]){h.push(ee[$]["annotations"]["@"+k])}else if(ee[$]["annotations"]["@"+k].$Path&&$!=ee[$]["annotations"]["@"+k].$Path){U=ee[$]["annotations"]["@"+k].$Path;var a=U.split("/");if(a.length>1){L=y.getNavigationPrefix(q,ve,U);if(L!==""){h.push(U);d.push(L);T=y.getAssociationKeys(q,ve,U);if(T.length>0){m=m.concat(T)}}}else{h.push(U?U:$)}}}else if(ee[$][K]&&$!=ee[$][K]){h.push(ee[$][K]?ee[$][K]:$)}}});if(m.length>0){var ce=0;while(ce<m.length){if(h.indexOf(m[ce])!==-1){m.splice(ce,1)}else{ce++}}}if(b.length>0){v(b,function(e,t){t+="Aggregate";j[t]=true})}if(h.length>0){v(h,function(e,t){j[t]=true})}if(x){var pe=n.SortOrder;if(!pe.length){pe=e.getSortAnnotationCollection(f,n,r)}if(pe.length<1){N.warning(E.CARD_WARNING+E.SORTORDER_WARNING)}else{var ge="";var he;var de;var me;for(var Pe=0;Pe<pe.length;Pe++){he=pe[Pe];me=he.Property.$PropertyPath;if(b.includes(me)){me+="Aggregate"}O.push(me);if(typeof he.Descending==="undefined"){de="true"}else if(typeof he.Descending==="boolean"){de=he.Descending.toString()}ge=ge+"{path: '"+me+"',descending: "+de+"},"}u+=", sorter: ["+ge.substring(0,ge.length-1)+"]"}}var Ae=D(C,h);if(O.length>0){v(O,function(e,t){if(!j.hasOwnProperty(t)){Ae.push(t)}})}u+=", parameters: {$apply:'groupby(("+Ae.join(",")+"),";u+="aggregate(";var ye=[];var Te=H.getProperty("/chartAnnotationPath");b.forEach(function(e,t){var a=R(Te,q,r,t,W);var i=[e," with ",a," as ",e,"Aggregate"].join("");ye.push(i)});u+=ye.join(",");u+="))";var _e=q.getObject("/"+r.$Type);if(_e){var Ee=t.getRequestFields(n);if(Ee&&Ee.length>0){v(Ee,function(e,t){if(!j.hasOwnProperty(t)){j[t]=true;S.push(t)}});if(S.length>0){u+=","+S.join(",")}}}if(d.length>0){u+="'"+","+" expand:'"+d.join(",")}var be=t.checkFilterPreference(a.getSetting("ovpCardProperties"));if(be){u+="', custom: {cardId: '"+a.getSetting("ovpCardProperties").getProperty("/cardId")+"'}}"}else{u+="'}"}if(p&&p[1]==="Donut"&&o===undefined){u+=", length: 1"}else if(p&&p[1]==="Donut"&&o&&Y){u+=", length: "+(parseInt(Y,10)+1)}else if(Y){u+=", length: "+Y}if(Z.length>0&&Ae.length>0){var Ce=Z.every(function(e){return Ae.indexOf(e.path)!==-1});var Se=Ce?JSON.stringify(Z):"[]";u+=", filters: "+Se}u+="}";return u}O.requiresIContext=true;function M(e,t,a){var r;if(t.DynamicMeasure){r=e[t.DynamicMeasure.$AnnotationPath].AggregatableProperty.$PropertyPath}else{r=a?t[a].$PropertyPath:t.Measure.$PropertyPath}return r}function R(e,t,a,r,i){var n,o;var s=t.getObject("/"+a.$Type+"@"+e).MeasureAttributes[r];var l=s.DynamicMeasure;if(l){var u=l.$AnnotationPath;o=t.getObject("/"+a.$Type+"/"+u).AggregationMethod}var n=o?o:i&&i["Axis"+(r+1)];n=n?n:"sum";return n}function D(e,t){var a=e.length>0?t.concat(e):t;return a.filter(function(e,t){return a.indexOf(e)===t})}function I(e,t,a){}function x(e,t){var a={boolFlag:false};v(e,function(e,r){if(r.DataPoint&&r.DataPoint.$AnnotationPath){var i=t[r.DataPoint.$AnnotationPath];T.updateFlagValueForDataPoint(i,a)}});if(a.boolFlag===true&&e.length>1){N.warning(E.CARD_WARNING+E.INVALID_SEMANTIC_MEASURES)}return a.boolFlag}function V(e,t,a,r){var i=T.getMeasureName(e,a,r);var n=e.DataPoint.$AnnotationPath;var o=t[n];return T.getSemanticLegends(o,true,i)}function Y(e,t,a,r){var i=M(r,t,a);if(e[i].$Type===_.EDM_INT32){return true}return false}function $(e,t,a,r){var i=M(r,t,a);if(e[i].$Type===_.EDM_INT64){return true}return false}function L(t,a,i){var p,g,d,P,A;var O,R,D,I,L,K=false;var w;var B,z,j;var H,W=[],Q=[];var J=[];var Z;var ee;var te=i&&i.getView();var ae,re;var ie=te&&te.getModel("ui");var ne=ie&&ie.getProperty("/chartSettings");p=t.getModel("ovpCardProperties");if(n.checkIfAPIIsUsed(i)){K=p&&p.getData()&&p.getData().showDataLabel}A=ne?ne.showDataLabel:K;O=t.getVizType();R=e.getConfig();for(var oe in R){if((ee=R[oe].reference)&&R[ee]){var se=c({},R[ee]);R[oe]=se}if(R[oe].default.type===O||R[oe].time&&R[oe].time.type===O){D=R[oe];break}}if(!D){N.error(E.CARD_ERROR+"in "+E.CARD_CONFIG+E.CARD_CONFIG_ERROR+O+" "+E.CARD_CONFIG_JSON);return}if(!p){N.error(E.CARD_ERROR+"in "+E.CARD_CONFIG+E.NO_CARD_MODEL);return}var le=t.getModel();var ue=p.getProperty("/entitySet");if(!le||!ue){return}var fe=p.getProperty("/entityType").$Type;var ve=i.getMetaModel().getData().$Annotations[fe];var ce={property:i.getMetaModel().getObject("/"+fe+"/")};g=f.merge(true,{},ve,ce);if(!g){N.error(E.CARD_ANNO_ERROR+"in "+E.CARD_ANNO);return}var pe=e.getMetadata(le,ue);G(le,pe,fe);d=p.getProperty("/chartAnnotationPath");if(!d||!(P=g["@"+d])){N.error(E.CARD_ANNO_ERROR+"in "+E.CARD_ANNO);return}var ge=F(g,d,t);if(!(I=P.DimensionAttributes)||!I.length){N.error(E.CHART_ANNO_ERROR+"in "+E.CHART_ANNO+" "+E.DIMENSIONS_MANDATORY);return}var he;if(!(L=P.MeasureAttributes)||!L.length){N.error(E.CHART_ANNO_ERROR+"in "+E.CHART_ANNO+" "+E.MEASURES_MANDATORY);return}else{var de=L[0].DataPoint?g[L[0].DataPoint.$AnnotationPath]:null;var me=de&&de.ValueFormat&&de.ValueFormat.NumberOfFractionalDigits&&de.ValueFormat.NumberOfFractionalDigits;he=me?me:0}Z=e.hasTimeSemantics(I,D,le,ue,true);if(Z){D=D.time}else{D=D.default}var Pe=p.getProperty("/ChartProperties")||p.getProperty("/chartProperties");if(p&&p.getProperty("/tabs")&&Pe===undefined){ae=te.byId("ovp_card_dropdown");re=parseInt(ae.getSelectedKey(),10);Pe=p.getProperty("/tabs")&&p.getProperty("/tabs")[re-1]&&(p.getProperty("/tabs")[re-1]["ChartProperties"]||p.getProperty("/tabs")[re-1]["chartProperties"])}var Ae=false;var ye=he>0?"tooltipNoScaleFormatter/"+he.toString()+"/":"tooltipNoScaleFormatter/-1/";var Te=new r({formatString:ye});Te.connect(t.getVizUid());Te.connect(t.getVizUid());t._oOvpVizFrameTooltip=Te;var _e=[];var Ee=C.indexOf(P.ChartType.$EnumMember)>=0;if(Ee&&t&&t.getModel("analyticalmodel")){_e=t.getModel("analyticalmodel").getData()||[]}[D.dimensions,D.measures].forEach(function(e,t){var a=t?L:I;var r=t?"measure(s)":"dimension(s)";if(e.min&&a.length<e.min){N.error(E.CARD_ERROR+"in "+O+" "+E.CARD_LEAST+e.min+" "+r);Ae=true}if(e.max&&a.length>e.max){N.error(E.CARD_ERROR+"in "+O+E.CARD_MOST+e.max+" "+r);Ae=true}});if(Ae){return}var be=true;if(D.properties&&D.properties.hasOwnProperty("hideLabel")&&!D.properties["hideLabel"]){be=false}if(D.type&&(D.type==="timeseries_bullet"||D.type==="timeseries_stacked_column")){T.enableTimeAxisForChart(D,p)}var Ce=true;var Se=false;if(O==="donut"){Se=true}t.removeAllAggregation();w={legend:{isScrollable:false,itemMargin:1.25},title:{visible:true},interaction:{noninteractiveMode:Ce?false:true,selectability:{legendSelection:Se?true:false,axisLabelSelection:false,mode:"EXCLUSIVE",plotLassoSelection:false,plotStdSelection:true},zoom:{enablement:"disabled"}},plotArea:{window:{start:"firstDataPoint",end:"lastDataPoint"},dataLabel:{visible:A||Se?true:false,type:"value"},dataPoint:{invalidity:"ignore"},alignment:{vertical:"top"}},categoryAxis:{label:{truncatedLabelRatio:.15}},general:{groupData:false,showAsUTC:true}};if(D.properties&&D.properties.semanticColor===true&&x(L,g)){var Ne=u.getText("GOOD");var Oe=u.getText("BAD");var Me=u.getText("CRITICAL");var Re=u.getText("OTHERS");if(L.length===1){var De=V(L[0],g,pe,t);var Ne=De[0]||Ne,Oe=De[1]||Oe,Me=De[2]||Me,Re=u.getText("OTHERS")}w.plotArea.dataPointStyle={rules:[{callback:function(t){var a=e.mapMeasures(t,pe,L,true);if(!a){return false}var r=g[a];var i=T.formThePathForCriticalityStateCalculation(t,r);if(i===m.Criticality.StateValues.Positive){return true}else if(i==="Positive"){return true}},properties:{color:"sapUiChartPaletteSemanticGoodLight1"},displayName:Ne},{callback:function(t){var a=e.mapMeasures(t,pe,L,true);if(!a){return false}var r=g[a];var i=T.formThePathForCriticalityStateCalculation(t,r);if(i===m.Criticality.StateValues.Critical){return true}else if(i==="Critical"){return true}},properties:{color:"sapUiChartPaletteSemanticCriticalLight1"},displayName:Me},{callback:function(t){var a=e.mapMeasures(t,pe,L,true);if(!a){return false}var r=g[a];var i=T.formThePathForCriticalityStateCalculation(t,r);if(i===m.Criticality.StateValues.Negative){return true}else if(i==="Negative"){return true}},properties:{color:"sapUiChartPaletteSemanticBadLight1"},displayName:Oe},{callback:function(t){var a=e.mapMeasures(t,pe,L,true);if(!a){return false}var r=g[a];var i=T.formThePathForCriticalityStateCalculation(t,r);if(i===m.Criticality.StateValues.None){return true}else if(i==="Neutral"){return true}},properties:{color:"sapUiChartPaletteSemanticNeutralLight1"},displayName:Re}]}}var Ie=p.getProperty("/bEnableStableColors");var xe=p.getProperty("/colorPalette");var Ve;if(!Ie&&b.indexOf(P.ChartType.$EnumMember)>=0&&xe&&Object.keys(xe).length>=2&&Object.keys(xe).length<=4){v(I,function(e,t){if(t&&t.Role&&t.Role.$EnumMember==="com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Series"){Ve=t.Dimension&&t.Dimension.$PropertyPath;return}});var Ye;if(Ve){if(pe&&pe[Ve]){if(pe[Ve][_.LABEL_KEY_V4]){Ye=T.getLabelFromAnnotationPath(pe[Ve][_.LABEL_KEY_V4]?pe[Ve][_.LABEL_KEY_V4]:pe[Ve][_.LABEL_KEY_V4].Path,t,pe)}else if(pe[Ve][_.LABEL_KEY]){Ye=pe[Ve][_.LABEL_KEY]}else if(Ve){Ye=Ve}}if(xe instanceof Array){var $e=xe.map(function(e){return e.color});var Le=xe.map(function(e){return e.legendText});var Ue=Le[0]!=undefined?Le[0]:u.getText("OTHERS");var Fe=Le[1]!=undefined?Le[1]:u.getText("BAD");var Ke=Le[2]!=undefined?Le[2]:u.getText("CRITICAL");var ke=Le[3]!=undefined?Le[3]:u.getText("GOOD")}w.plotArea.dataPointStyle={rules:[{callback:function(e){if(e&&(e[Ye]==="3"||e[Ye]===3)){if(xe instanceof Array){if(xe.length<4){return false}}else if(xe&&!xe.hasOwnProperty(3)){return false}return true}},properties:{color:xe instanceof Array&&$e.length?$e[3]:xe[3]&&xe[3]["color"]},displayName:ke||xe[3]&&xe[3]["legendText"]},{callback:function(e){if(e&&(e[Ye]==="2"||e[Ye]===2)){if(xe instanceof Array){if(xe.length<3){return false}}else if(xe&&!xe.hasOwnProperty(2)){return false}return true}},properties:{color:xe instanceof Array&&$e.length?$e[2]:xe[2]&&xe[2]["color"]},displayName:Ke||xe[2]&&xe[2]["legendText"]},{callback:function(e){if(e&&(e[Ye]==="1"||e[Ye]===1)){return true}},properties:{color:xe instanceof Array&&$e.length?$e[1]:xe[1]&&xe[1]["color"]},displayName:Fe||xe[1]&&xe[1]["legendText"]},{callback:function(e){if(e&&(e[Ye]==="0"||e[Ye]===0)){return true}},properties:{color:xe instanceof Array&&$e.length?$e[0]:xe[0]&&xe[0]["color"]},displayName:Ue||xe[0]&&xe[0]["legendText"]}]};var we;if(p&&p.getProperty("/bInsightEnabled")){we=c({},w.plotArea.dataPointStyle);var Be=pe&&pe[Ve]&&pe[Ve][_.TYPE_KEY]||"";we.rules.forEach(function(e,t,a){delete e["callback"];e.dataContext={};if(Be){e.dataContext[Ye]=Be==="Edm.String"?a.length-1-t+"":a.length-1-t}else{e.dataContext[Ye]=a.length-1-t+""}})}}}var ze=false;var je=false;if(P.ChartType.$EnumMember===_.SCATTER_CHARTTYPE||P.ChartType.$EnumMember===_.BUBBLE_CHARTTYPE||P.ChartType.$EnumMember===_.LINE_CHARTTYPE){if(P&&P.AxisScaling&&P.AxisScaling.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisScalingType"){var He=P.AxisScaling;if(He.AutoScaleBehavior&&He.AutoScaleBehavior.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisAutoScaleBehaviorType"){var Ge=He.AutoScaleBehavior;if(Ge.ZeroAlwaysVisible&&Ge.ZeroAlwaysVisible=="true"){w.plotArea.adjustScale=false;ze=true}else if(Ge.DataScope){w.plotArea.adjustScale=true;ze=true}}else if(He.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisScalingType"&&He.ScaleBehavior&&He.ScaleBehavior.$EnumMember){var Xe=He.ScaleBehavior.$EnumMember;var qe=Xe.substring(Xe.lastIndexOf("/")+1,Xe.length);if(qe=="FixedScale"){je=true}}}else if(P&&P.AxisScaling&&P.AxisScaling.$EnumMember){var We=P.AxisScaling.$EnumMember.substring(P.AxisScaling.$EnumMember.lastIndexOf("/")+1,P.AxisScaling.$EnumMember.length);switch(We){case"AdjustToDataIncluding0":w.plotArea.adjustScale=false;ze=true;break;case"AdjustToData":w.plotArea.adjustScale=true;ze=true;break;case"MinMaxValues":je=true;break;default:break}}if(je){var Qe=[];if(P["MeasureAttributes"][0]&&P["MeasureAttributes"][0].DataPoint&&P["MeasureAttributes"][0].DataPoint.$AnnotationPath){var Je=P["MeasureAttributes"][0].DataPoint.$AnnotationPath;var Ze=Je.substring(Je.lastIndexOf("@")+1,Je.length);if(g&&g[Ze]){var et=g[Ze];if(et&&et.MaximumValue&&et.MinimumValue){Qe.push({feed:"valueAxis",max:et.MaximumValue,min:et.MinimumValue});ze=true}else{N.error(E.ERROR_MISSING_AXISSCALES)}}}if(P.ChartType.$EnumMember!==_.LINE_CHARTTYPE&&P["MeasureAttributes"][1]&&P["MeasureAttributes"][1].DataPoint&&P["MeasureAttributes"][1].DataPoint.$AnnotationPath){var Je=P["MeasureAttributes"][1].DataPoint.$AnnotationPath;var Ze=Je.substring(Je.lastIndexOf("@")+1,Je.length);if(g&&g[Ze]){var et=g[Ze];if(et&&et.MaximumValue&&et.MinimumValue){Qe.push({feed:"valueAxis2",max:et.MaximumValue,min:et.MinimumValue});ze=true}else{N.error(E.ERROR_MISSING_AXISSCALES)}}}t.setVizScales(Qe)}}z=I.slice();j=L.slice();var tt=0;var at=0;var rt;var it;var nt=false;var ot=false;var st;var lt=[];var ut=[],ft=[];if((O==="column"||O==="bar"||O==="vertical_bullet")&&D.feeds&&D.feeds.length>0){var vt;for(vt=0;vt<D.feeds.length;vt++){if(D.feeds[vt].uid==="color"){D.feeds.splice(vt,1);break}}for(vt=0;vt<D.feeds.length;vt++){if(D.feeds[vt].uid==="categoryAxis"){delete D.feeds[vt].role;break}}if(p.getProperty("/colorPalette")){for(vt=0;vt<D.feeds.length;vt++){if(D.feeds[vt].uid==="categoryAxis"){D.feeds[vt].role="Category";break}}D.feeds.push({uid:"color",min:1,type:"dimension",role:"Series"})}}v(D.feeds,function(a,r){var i=r.uid;var n=[];if(r.type){var u,f,c;if(r.type==="dimension"){u=I.length;f="Dimension";c="dimensions";B=z;H=W}else{u=L.length;f="Measure";c="measures";B=j;H=Q}var d=0,m=u;if(r.min){d=d>r.min?d:r.min}if(r.max){m=m<r.max?m:r.max}if(!r.role){var P=B.length;for(var A=0;A<P&&n.length<m;++A){var b=B[A];B.splice(A,1);--P;--A;n.push(b);var C=M(ve,b,f);if(pe[C][_.UNIT_KEY_V4_ISOCurrency]){st=pe[C][_.UNIT_KEY_V4_ISOCurrency].$Path?pe[C][_.UNIT_KEY_V4_ISOCurrency].$Path:undefined}else if(pe[C][_.UNIT_KEY_V4_Unit]){st=pe[C][_.UNIT_KEY_V4_Unit].$Path?pe[C][_.UNIT_KEY_V4_Unit].$Path:undefined}else if(pe[C][_.UNIT_KEY]){st=pe[C][_.UNIT_KEY]}if(e.isMeasureCurrency(pe,st)){nt=true}else{ot=true}if(!nt){tt=e.checkNumberFormat(tt,b,g,true);rt=e.getMaxScaleFactor(rt,b,g,true)}else{at=e.checkNumberFormat(at,b,g,true);it=e.getMaxScaleFactor(it,b,g,true)}}}else{var R=r.role.split("|");v(R,function(t,a){if(n.length===m){return false}var r=B.length;for(var i=0;i<r&&n.length<m;++i){var o=B[i];if(o&&o.Role&&o.Role.$EnumMember&&o.Role.$EnumMember.split("/")&&o.Role.$EnumMember.split("/")[1]){var s=o.Role.$EnumMember.split("/")[1];if(s===a){B.splice(i,1);--r;--i;n.push(o);var l=M(ve,o,f);if(pe[l][_.UNIT_KEY_V4_ISOCurrency]){st=pe[l][_.UNIT_KEY_V4_ISOCurrency].$Path?pe[l][_.UNIT_KEY_V4_ISOCurrency].$Path:undefined}else if(pe[l][_.UNIT_KEY_V4_Unit]){st=pe[l][_.UNIT_KEY_V4_Unit].$Path?pe[l][_.UNIT_KEY_V4_Unit].$Path:undefined}else if(pe[l][_.UNIT_KEY]){st=pe[l][_.UNIT_KEY]}if(e.isMeasureCurrency(pe,st)){nt=true}else{ot=true}if(!nt){tt=e.checkNumberFormat(tt,o,g,true);rt=e.getMaxScaleFactor(rt,o,g,true)}else{at=e.checkNumberFormat(at,o,g,true);it=e.getMaxScaleFactor(it,o,g,true)}}}else if((H?Array.prototype.indexOf.call(H,o):-1)===-1){H.push(o)}}});if(n.length<m){v(H,function(t,a){var r;var i;if((r=D[c].defaultRole)&&(R?Array.prototype.indexOf.call(R,r):-1)!==-1&&(i=(B?Array.prototype.indexOf.call(B,a):-1)!==-1)){B.splice(i,1);n.push(a);var o=M(ve,a,f);if(pe[o][_.UNIT_KEY_V4_ISOCurrency]){st=pe[o][_.UNIT_KEY_V4_ISOCurrency].$Path?pe[o][_.UNIT_KEY_V4_ISOCurrency].$Path:undefined}else if(pe[o][_.UNIT_KEY_V4_Unit]){st=pe[o][_.UNIT_KEY_V4_Unit].$Path?pe[o][_.UNIT_KEY_V4_Unit].$Path:undefined}else if(pe[o][_.UNIT_KEY]){st=pe[o][_.UNIT_KEY]}if(e.isMeasureCurrency(pe,st)){nt=true}else{ot=true}if(!nt){tt=e.checkNumberFormat(tt,a,g,true);rt=e.getMaxScaleFactor(rt,a,g,true)}else{at=e.checkNumberFormat(at,a,g,true);it=e.getMaxScaleFactor(it,a,g,true)}if(n.length===m){return false}}})}if(n.length<d){N.error(E.CARD_ERROR+E.MIN_FEEDS+O+" "+E.FEEDS_OBTAINED+n.length+" "+E.FEEDS_REQUIRED+d+" "+E.FEEDS);return false}}if(n.length){var x=[];var V;if(!(V=t.getDataset())){N.error(E.NO_DATASET);return false}S=g;v(n,function(a,r){if((!r||!r[f]||!r[f].$PropertyPath)&&(!r.DynamicMeasure||!r.DynamicMeasure.$AnnotationPath)){N.error(E.INVALID_CHART_ANNO);return false}var n=M(ve,r,f);var l=n;var u=n;var v=null;if(pe&&pe[n]){if(pe[n]["annotations"]){if(pe[n]["annotations"]["@"+_.LABEL_KEY_V4]){if(pe[n]["annotations"]["@"+_.LABEL_KEY_V4]instanceof String&&pe[n]["annotations"]["@"+_.LABEL_KEY_V4]){l=T.getLabelFromAnnotationPath(pe[n]["annotations"]["@"+_.LABEL_KEY_V4],t,pe)}else if(pe[n]["annotations"]["@"+_.LABEL_KEY_V4].$Path){l=pe[n]["annotations"]["@"+_.LABEL_KEY_V4].$Path}else{l=pe[n]["annotations"]["@"+_.LABEL_KEY_V4]}}else if(pe[n]["annotations"]["@"+_.LABEL_KEY]){l=pe[n]["annotations"]["@"+_.LABEL_KEY]}else if(n){l=n}if(pe[n]["annotations"]["@"+_.TEXT_KEY_V4]){u=pe[n]["annotations"]["@"+_.TEXT_KEY_V4].$String?pe[n]["annotations"]["@"+_.TEXT_KEY_V4].$String:pe[n]["annotations"]["@"+_.TEXT_KEY_V4].$Path}else if(pe[n]["annotations"]["@"+_.TEXT_KEY]){u=pe[n]["annotations"]["@"+_.TEXT_KEY]}}else if(n){u=n}v=pe[n].$Type||null}var c;if((v==="Edm.DateTime"||v==="Edm.DateTimeOffset")&&u===n){c="{= ${"+n+"} ? ${"+n+"} : ''}"}else{if(pe[n]&&pe[n]["annotations"]&&pe[n]["annotations"]["@"+_.TEXT_KEY_V4]&&pe[n]["annotations"]["@"+_.TEXT_KEY_V4+"@"+_.TEXT_ARRANGEMENT_ANNO]){var g,d;g=pe[n]["annotations"]["@"+_.TEXT_KEY_V4+"@"+_.TEXT_ARRANGEMENT_ANNO];d=g&&g.$EnumMember;if(!d){g=pe[n]["annotations"]["@"+_.TEXT_KEY_V4]["@"+_.TEXT_ARRANGEMENT_ANNO];d=g&&g.$EnumMember}if(!d){var m=S;g=m&&m["@"+_.TEXT_ARRANGEMENT_ANNO];d=g&&g.$EnumMember}var P;switch(d){case"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst":c="{"+u+"}"+" "+"("+"{"+n+"}"+")";if(Ee&&_e.length){P=y.getPropertyTextColumnMap(n,u,_e);for(var A in P){P[A]=P[A]+" "+"("+A+")"}J[n]=P}break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast":c="{"+n+"}"+" "+"("+"{"+u+"}"+")";if(Ee&&_e.length){P=y.getPropertyTextColumnMap(n,u,_e);for(var b in P){P[b]=b+" "+"("+P[b]+")"}J[n]=P}break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly":c="{"+u+"}";if(Ee&&_e.length){J[n]=y.getPropertyTextColumnMap(n,u,_e)}break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeperate":c="{"+n+"}"+" "+"("+"{"+u+"}"+")";break;default:c="{"+n+"}";break}}else{c="{"+u+"}"}if(p&&p.getProperty("/bInsightEnabled")){h.setDimensionPath(p.getData().cardId,n,c)}}x.push(l);if(f==="Dimension"){if(i==="waterfallType"){var C=new o({name:l,value:"{"+n+"}"})}else{var C=new o({name:l,value:"{"+n+"}",displayValue:c})}var O=pe[n][_.SEMANTICS_KEY];var R=e.isV4TimeSeriesSemantics(t.getModel(),ue,n,true);if(Z&&(v==="Edm.DateTime"||R||v==="Edm.DateTimeOffset"||O&&O.lastIndexOf("year",0)===0)){C.setDataType("date")}V.addDimension(C);if((ft?Array.prototype.indexOf.call(ft,l):-1)===-1){ft.push(l)}}else{V.addMeasure(new s({name:l,value:"{"+n+"}"}));if((ut?Array.prototype.indexOf.call(ut,l):-1)===-1&&i!="bubbleWidth"){ut.push(l)}}});t.addFeed(new l({uid:i,type:f,values:x}));if(i==="categoryAxis"){w[i]={title:{visible:be?false:true,text:x.join(", ")},label:{formatString:nt?"CURR":"axisFormatter",truncatedLabelRatio:.15}}}else{w[i]={title:{visible:be?false:true,text:x.join(", ")},label:{formatString:nt?"CURR":"axisFormatter"}}}lt.push(w[i]);if(D.hasOwnProperty("vizProperties")){var Y=0;var $=D.vizProperties.length;var U;var F;for(;Y<$;Y++){if(D.vizProperties[Y].hasOwnProperty("value")){F=D.vizProperties[Y].value}if(D.vizProperties[Y].hasOwnProperty("path")){U=D.vizProperties[Y].path.split(".");var K=U.length;var k,G;var X;for(var q=0,X=U[0],k=w,G=Pe;q<K;++q){if(q===K-1){if(G&&G.hasOwnProperty(X)){if(O==="donut"&&(G[X]==="value"||G[X]==="percentage")){F=G[X]}else if(O!="donut"){F=G[X]}}if(ze&&X!="adjustScale"||!ze&&X==="adjustScale"||!ze&&X!="adjustScale"){k[X]=F}break}k[X]=k[X]||{};k=k[X];if(G){G[X]=G[X]||{};G=G[X]}X=U[q+1]}}}}if(r.hasOwnProperty("vizProperties")){var a=0;var ee=r.vizProperties.length;var te;var ae;var re;for(;a<ee;a++){if(r.vizProperties[a].hasOwnProperty("method")){ae=r.vizProperties[a].method;switch(ae){case"count":te=x.length;if(r.vizProperties[a].hasOwnProperty("min")&&te<=r.vizProperties[a].min){te=r.vizProperties[a].min}else if(r.vizProperties[a].hasOwnProperty("max")&&te>=r.vizProperties[a].max){te=r.vizProperties[a].max}break;default:break}}else if(r.vizProperties[a].hasOwnProperty("value")){te=r.vizProperties[a].value}if(r.vizProperties[a].hasOwnProperty("path")){re=r.vizProperties[a].path.split(".");var ie=re.length;for(var A=0,ne=re[0],oe=w;A<ie;++A){if(A===ie-1){oe[ne]=te;break}oe[ne]=oe[ne]||{};oe=oe[ne];ne=re[A+1]}}}}}}});var ct=t.getFeeds();if(D.properties&&D.properties.semanticPattern===true&&y.getMeasureDimCheck(ct,O)){v(ct,function(e,a){if(ct[e].getType()==="Measure"&&(ct[e].getUid()==="valueAxis"||ct[e].getUid()==="actualValues")){var r;v(L,function(t,a){var i=M(ve,a);var n=y.getSapLabel(i,pe);if(n===ct[e].getValues()[0]){r=y.checkForecastMeasure(a,g);return false}});if(r){var i=y.getSapLabel(r.Measure.$PropertyPath,pe);var n=g[r.DataPoint.$AnnotationPath].ForecastValue.PropertyPath||g[r.DataPoint.$AnnotationPath].ForecastValue.Path;var o=y.getSapLabel(n,pe);var l=u.getText("ACTUAL",[i]);var f=u.getText("FORECAST",[o]);w.plotArea.dataPointStyle={rules:[{dataContext:{MeasureNamesDimension:i},properties:{color:"sapUiChartPaletteSequentialHue1Light1",lineType:"line",lineColor:"sapUiChartPaletteSequentialHue1Light1"},displayName:l},{dataContext:{MeasureNamesDimension:o},properties:{color:"sapUiChartPaletteSequentialHue1Light1",lineType:"dotted",lineColor:"sapUiChartPaletteSequentialHue1Light1",pattern:"diagonalLightStripe"},displayName:f}]};t.getDataset().addMeasure(new s({name:o,value:"{"+n+"}"}));var c=ct[e].getValues();c.push(o);ct[e].setValues(c)}return false}})}var pt=false;if(xe&&xe.dimensionSettings&&Object.keys(xe.dimensionSettings).length>0){var gt=Object.keys(xe.dimensionSettings);for(var ht=0;ht<gt.length;ht++){var dt=gt[ht];var mt=xe.dimensionSettings[dt];if(Object.keys(mt).length>10){pt=true;break}}}if(Ie&&Ee&&!Boolean(pt)){var Pt=[];var At=true;for(var ht=0;ht<I.length;ht++){var yt=I[ht].Dimension.$PropertyPath;Pt.push(yt)}for(var ht=0;ht<Pt.length;ht++){var dt=Pt[ht];if(gt.indexOf(dt)>-1){var Tt=xe.dimensionSettings[dt];var _t=Object.keys(Tt);var Et=[];for(var ht=0;ht<_t.length;ht++){var bt=Tt[_t[ht]];Et.push(bt)}At=At&&Et.every(X)}}if(At){var Ct=[];for(var ht=0;ht<Pt.length;ht++){var dt=Pt[ht];if(gt.indexOf(dt)>-1){var Tt=xe.dimensionSettings[dt];var _t=Object.keys(Tt);var Et=[];for(var ht=0;ht<_t.length;ht++){var bt=Tt[_t[ht]];Et.push(bt)}y._sortColorsByIndex(Et);for(var St=0;St<Et.length;St++){var Nt=Et[St].dimensionValue;var Ot=Et[St].color;var bt={properties:{color:Ot}};bt.dataContext={};var Mt=U(pe,t,dt);bt.dataContext[Mt]=Nt;var Rt=J[dt]?J[dt][Nt]:Nt;bt.displayName=Rt;Ct.push(bt)}}}w.plotArea.dataPointStyle=w.plotArea.dataPointStyle||{};w.plotArea.dataPointStyle["rules"]=Ct}else{var Ct=[];for(var ht=0;ht<Pt.length;ht++){var dt=Pt[ht];if(gt.indexOf(dt)>-1){var Tt=xe.dimensionSettings[dt];var _t=Object.keys(Tt);var Et=[];for(var ht=0;ht<_t.length;ht++){var bt=Tt[_t[ht]];Et.push(bt)}y._sortColorsByIndex(Et);var Dt=Et.map(q)}}w.legend.order=function(e,t){var a=Dt.indexOf(e);var r=Dt.indexOf(t);return a>r?1:-1}}}if(D.properties&&D.properties.semanticPattern===true&&y.getMeasureDimCheck(ct,O)&&t.getVizType()==="vertical_bullet"){v(ct,function(e,a){if(ct[e].getType()==="Measure"&&(ct[e].getUid()==="valueAxis"||ct[e].getUid()==="actualValues")){var r;v(L,function(t,a){var i=y.getSapLabel(a.Measure.PropertyPath,pe);if(i===ct[e].getValues()[0]){r=y.checkTargetMeasure(a,g);return false}});if(r){var i=g[r.DataPoint.$AnnotationPath].TargetValue.PropertyPath||g[r.DataPoint.$AnnotationPath].TargetValue.Path;var n=y.getSapLabel(i,pe);t.getDataset().addMeasure(new s({name:n,value:"{"+i+"}"}));t.addFeed(new l({uid:"targetValues",type:"Measure",values:[n]}))}return false}})}if(nt&&ot){N.warning(u.getText("Currency_non_currency_measure"))}v(ct,function(e,t){var a=t.getProperty("type");if(a==="Measure"){var r=t.getProperty("values");var i=true;var n=P.MeasureAttributes.filter(function(e){var t=M(ve,e,a);var i=pe[t];return Object.keys(i).length>0&&r.indexOf(t)>=0});v(n,function(e,t){if(Y(pe,t,a,ve)||$(pe,t,a,ve)){i=false}else{i=true;return false}});if(!i){w[t.getProperty("uid")]["label"]["allowDecimals"]=false}}});var It;if(it===undefined){it=""}if(rt===undefined){rt=""}if(nt){It=y.getScaleUnit(it,nt)}else{It=y.getScaleUnit(rt,nt)}if(a){a.setScale(It)}var xt=k(ut,ft,ge);var Vt="";v(ct,function(e,t){var a="-1";var r=t.getProperty("type");if(r==="Measure"){var i=lt.filter(function(e){var a=e["title"]["text"].split(",").filter(function(e){if(t.getValues().indexOf(e.trim())>=0){return true}else{return false}});if(a.length>0){return true}else{return false}});if(i&&i.length){var n=t.getValues();if(n&&n.length){v(n,function(e,t){var i=t.trim();var n=L.filter(function(e){if(e["Measure"]&&e["Measure"]["PropertyPath"]){var t=e["Measure"]["PropertyPath"];if(pe[t]&&pe[t][_.LABEL_KEY]===i||pe[t]&&pe[t][_.LABEL_KEY_V4]===i){return true}else{return false}}});if(n&&n.length){var o=n[0];if(!Y(pe,o,r,ve)&&!$(pe,o,r,ve)){var s="";if(o&&o["DataPoint"]&&o["DataPoint"]["AnnotationPath"]&&o["DataPoint"]["AnnotationPath"]){s=o["DataPoint"]["AnnotationPath"]&&o["DataPoint"]["AnnotationPath"].substring(1);if(s!=""){var l;l=g[s]&&g[s]["ValueFormat"]&&g[s]["ValueFormat"]["NumberOfFractionalDigits"]&&g[s]["ValueFormat"]["NumberOfFractionalDigits"]["Int"];a=l>a?l:a}}}else{a=a<"0"?"0":a}}})}}if(i&&i[0]&&i[0].label&&i[0].label.formatString){var o=i[0].label.formatString}Vt="";if(nt){if(o==="CURR"){Vt="CURR/"+a.toString()+"/"}else{Vt="axisFormatter/"+a.toString()+"/"}}else{Vt="axisFormatter/"+a.toString()+"/"}if(i&&i[0]){i[0].label.formatString=Vt}}});if(O==="vertical_bullet"){w["valueAxis"]={title:{visible:be?false:true},label:{formatString:Vt}}}var Yt="";var $t="";if(nt){Yt=at.toString();$t="CURR/"+at.toString()+"/"}else{Yt=tt.toString();$t="axisFormatter/"+tt.toString()+"/"}if(O==="donut"||A){w.plotArea.dataLabel.formatString=$t;if(w.plotArea.dataLabel.type==="percentage"){w.plotArea.dataLabel.formatString="0.0%/"+Yt+"/"}}y._checkRolesForProperty(z,D,"dimension");y._checkRolesForProperty(j,D,"measure");if(Z){var Lt=I[0].Dimension.$PropertyPath;var Ut=t.getModel().getMetaModel().getObject("/"+ue+"/"+Lt+"@");if(Ut["@com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){w.timeAxis.levels=["year","month"]}else if(Ut["@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){w.timeAxis.levels=["year","quarter"]}else if(Ut["@com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){w.timeAxis.levels=["year","week"]}else if(Ut["@com.sap.vocabularies.Common.v1.IsCalendarYear"]){w.timeAxis.levels=["year"]}}w.title={text:ge?ge:xt,alignment:"left",layout:{respectPlotPosition:false},style:{fontFamily:"72, 72full, Arial, Helvetica, sans-serif !important",fontSize:".875rem",fontWeight:"normal"}};t.setVizProperties(w);if(p&&p.getProperty("/bInsightEnabled")){var Ft=t&&t.getId();var Kt=c({},w);if(we!==undefined){Kt.plotArea.dataPointStyle=we}h.setVizPropertyMap(Ft,Kt)}}function U(e,t,a){var r="";if(e&&e[a]){if(e[a].annotations&&e[a].annotations["@"+_.LABEL_KEY_V4]){r=T.getLabelFromAnnotationPath(e[a].annotations["@"+_.LABEL_KEY_V4],t,e)}else if(e[a][_.LABEL_KEY]){r=e[a][_.LABEL_KEY]}else if(a){r=a}}return r}function F(t,a,r){var i="";var n=t&&t["@"+a]&&t["@"+a].Title;if(n){i=n}return e.resolvei18nKeyToChartTitle(r,i)}function K(t,a,r){if(t&&(t.getVizType()==="bubble"||t.getVizType()==="scatter")){return}var i,n,o,s;var l;var f=_.UNIT_KEY;var c="@"+_.UNIT_KEY_V4_ISOCurrency;var p="@"+_.UNIT_KEY_V4_Unit;var g;var h=[];if(!(i=t.getModel("ovpCardProperties"))){N.error(E.CARD_ERROR+"in "+E.CARD_CONFIG+E.NO_CARD_MODEL);return}var d=t.getModel();var m=i.getProperty("/entitySet");if(!d||!m){return}n=r[i.getProperty("/entityType").$Type];if(!n){N.error(E.CARD_ANNO_ERROR+"in "+E.CARD_ANNO);return}var P=e.getMetadata(d,m);o=i.getProperty("/chartAnnotationPath");if(!o||!(s=n["@"+o])){N.error(E.CARD_ANNO_ERROR+"in "+E.CARD_ANNO);return}if(!(l=s.MeasureAttributes)||!l.length){N.error(E.CHART_ANNO_ERROR+"in "+E.CHART_ANNO+" "+E.MEASURES_MANDATORY);return}v(l,function(e,t){g=M(n,t);if(t.DataPoint&&t.DataPoint.$AnnotationPath){var a=n[t.DataPoint.$AnnotationPath];if(a&&a.ForecastValue&&(a.ForecastValue.PropertyPath||a.ForecastValue.Path)){h.push(a.ForecastValue.PropertyPath||a.ForecastValue.Path)}}h.push(g)});var A=a?a:null;var y="";var T=true;var b=[];var C=t.getFeeds();v(C,function(e,t){if(t.getType()==="Measure"){b=b.concat(t.getValues())}});if(A){v(h,function(e,a){var r=U(P,t,a);if((b?Array.prototype.indexOf.call(b,r):-1)!=-1){if(P&&P[a]){var i;if(P[a].annotations[c]){i=P[a].annotations[c].$Path?P[a].annotations[c].$Path:P[a].annotations[c].$String}else if(P[a].annotations[p]){i=P[a].annotations[p].$Path?P[a].annotations[p].$Path:P[a].annotations[p].$String}else if(P[a][f]){i=P[a][f]}if(!i){T=false;return false}if(i&&P[i]){for(var e=0;e<A.length;e++){var n=A[e];if(T){if(y&&n[i]&&n[i]!=""&&y!=""&&y!=n[i]){T=false;break}}y=n[i];if(!y){T=false;break}}}}}})}var S="";if(T){if(y!=""){S=u.getText("IN_NO_SCALE",[y]);S=" "+S}var O=t.data("aria-label");if(O&&S&&O.indexOf(S)===-1){var R=O+S;t.data("aria-label",R,true)}var D=t.getVizProperties().title&&t.getVizProperties().title.text;if(D){var I=D.indexOf("|");if(I!==-1){var x=D.slice(I+2);if(x!==y){D=D.slice(0,I-1)}}var V={title:{visible:true,text:x===y?D:D+S,alignment:"left",layout:{respectPlotPosition:false},style:{fontFamily:"72, 72full, Arial, Helvetica, sans-serif !important",fontSize:".875rem",fontWeight:"normal"}}};t.setVizProperties(V)}}}function k(e,t,a){var r="",i="",n="";if(a){r=a}if(e&&e.length>1){for(var o=0;o<e.length-1;o++){if(i!=""){i+=", "}i+=e[o]}i=u.getText("MEAS_DIM_TITLE",[i,e[o]])}else if(e){i=e[0]}if(t&&t.length>1){for(var o=0;o<t.length-1;o++){if(n!=""){n+=", "}n+=t[o]}n=u.getText("MEAS_DIM_TITLE",[n,t[o]])}else if(t){n=t[0]}if(r===""){a=u.getText("NO_CHART_TITLE",[i,n])}return a}function w(r,o){r.attachSelectData(function(s){var l=f.bCRTLPressed?f.constants.explace:f.constants.inplace;f.bCRTLPressed=false;var u=r.getModel("ovpCardProperties");var c=r.getModel();var p=u.getProperty("/entitySet");var g=e.getMetadata(c,p);var h=[],m=[];var P={},A={};var y=r.getDataset().getDimensions();var T;var E=u.getProperty("/entityType");var b=o.getMetaModel().getData()["$Annotations"];for(var C=0;C<y.length;C++){h.push(y[C].getName())}var S=r.getDataset().getBinding("data").getCurrentContexts().map(function(e){return e.getObject()});if(s.getParameter("data")&&s.getParameter("data")[0]&&s.getParameter("data")[0].data){m=Object.keys(s.getParameter("data")[0].data);T=s.getParameter("data")[0].data._context_row_number;var N=r.getDataset().getBinding("data").getContexts()[T];var O=d.getEntityNavigationEntries(N,c,o.getEntityType(),o.getCardPropertiesModel())[0];if(S[T].$isOthers&&S[T].$isOthers===true){var M={},R=[];for(var D=0;D<h.length;D++){for(var I=0;I<m.length;I++){if(h[D]===m[I]){for(var x in g){if(g.hasOwnProperty(x)){var V=g[x][_.LABEL_KEY]||g[x][_.NAME_KEY]||g[x][_.NAME_CAP_KEY];if(V===m[I]){R.push(x)}}}}}}for(var C=0;C<R.length;C++){M[R[C]]=[];for(var D=0;D<S.length-1;D++){if(D!=T){M[R[C]].push(S[D][R[C]])}}}var Y={$isOthers:true};var $={getObject:function(){return Y},getOtherNavigationDimensions:function(){return M}};if(n.checkIfAPIIsUsed(o)){if(o.checkAPINavigation()){i.onContentClicked($)}}else{if(O){r.vizSelection([],{clearSelection:true});o.doNavigation($,O,l)}}}else{for(var D=0;D<h.length;D++){for(var I=0;I<m.length;I++){if(h[D]===m[I]){for(var x in g){if(b[E.$Type+"/"+x]){var V=typeof b[E.$Type+"/"+x]["@"+_.LABEL_KEY_V4]==="string"&&b[E.$Type+"/"+x]["@"+_.LABEL_KEY_V4]||b[E.$Type+"/"+x][_.LABEL_KEY]||b[E.$Type+"/"+x][_.NAME_KEY]||b[E.$Type+"/"+x][_.NAME_CAP_KEY]||x;if(V.match(/{@i18n>.+}/gi)){var L=this.getModel("@i18n").getResourceBundle();V=L.getText(V.substring(V.indexOf(">")+1,V.length-1))}if(V===m[I]){P[x]=S[T][x]}}}}for(var x in S[T]){if(g.hasOwnProperty(x)){A[x]=S[T][x]}}}}if(P){v(Object.keys(P),function(e,t){var r=g[t]&&g[t]["annotations"];if(g[t]["$Type"]==="Edm.String"){if(g[t]["sap:semantics"]==="yearmonth"||r&&r["@com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){P[t]=P[t].constructor===Date?a.getDateTimeInstance({pattern:"YYYYMM"}).format(P[t]):P[t]}else if(g[t]["sap:semantics"]==="yearquarter"||r&&r["@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){P[t]=P[t].constructor===Date?a.getDateTimeInstance({pattern:"YYYYQ"}).format(P[t]):P[t]}else if(g[t]["sap:semantics"]==="yearweek"||r&&r["@com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){P[t]=P[t].constructor===Date?a.getDateTimeInstance({pattern:"YYYYww"}).format(P[t]):P[t]}else if(g[t]["@com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]){var i=P[t];if(i.includes(".")){P[t]=i.split(".").reverse().join("")}else if(i.includes("/")){P[t]=i.split("/").reverse().join("")}}}})}if(A){v(Object.keys(A),function(e,t){var r=g[t]&&g[t]["annotations"];if(g[t]["$Type"]==="Edm.String"){if(g[t]["sap:semantics"]==="yearmonth"||r&&r["@com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){A[t]=A[t].constructor===Date?a.getDateTimeInstance({pattern:"YYYYMM"}).format(A[t]):A[t]}else if(g[t]["sap:semantics"]==="yearquarter"||r&&r["@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){A[t]=A[t].constructor===Date?a.getDateTimeInstance({pattern:"YYYYQ"}).format(A[t]):A[t]}else if(g[t]["sap:semantics"]==="yearweek"||r&&r["@com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){A[t]=A[t].constructor===Date?a.getDateTimeInstance({pattern:"YYYYww"}).format(A[t]):A[t]}else if(g[t]["@com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]){var i=A[t];if(i.includes(".")){A[t]=i.split(".").reverse().join("")}else if(i.includes("/")){A[t]=i.split("/").reverse().join("")}}}})}var U=E[u.getProperty("/presentationAnnotationPath")];if(E){var F=t.getRequestFields(U);if(F&&F.length>0){v(F,function(e,t){if(!P.hasOwnProperty(t)){P[t]=S[T][t]}})}}var $={getObject:function(){return P},getAllData:function(){return A}};if(n.checkIfAPIIsUsed(o)){if(o.checkAPINavigation()){i.onContentClicked($)}}else{if(O){r.vizSelection([],{clearSelection:true});o.doNavigation($,O,l)}}}}})}function B(e){return e.$EnumMember.endsWith("Bubble")}function z(e){var t=false;if(!e||e.constructor!=Array||e.length<1||e[0].constructor!=Object||!e[0].Dimension||!e[0].Dimension.$PropertyPath){N.error(E.CHART_ANNO_ERROR+"in "+E.CHART_ANNO+" "+E.DIMENSIONS_MANDATORY);return t}t=true;return t}function j(e){var t=false;var a=e[0].Measure&&e[0].Measure.$PropertyPath;var r=e[0].DynamicMeasure&&e[0].DynamicMeasure.$AnnotationPath;if(!e||e.constructor!=Array||e.length<1||e[0].constructor!=Object||!a&&!r){N.error(E.CHART_ANNO_ERROR+"in "+E.CHART_ANNO+" "+E.MEASURES_MANDATORY);return t}t=true;return t}function H(e){e=e["$Type"];return e}function G(e,t,a){var r=e.getMetaModel().getData().$Annotations;for(var i in t){if(r[a+"/"+i]&&!t[i]["annotations"]){t[i]["annotations"]=r[a+"/"+i]}}}function X(e){return e.color!==undefined}function q(e){return e.dimensionValue}return{constants:_,errorMessages:E,formatItems:O,checkNoData:I,checkFlag:x,buildVizAttributes:L,setChartUoMTitle:K,getSelectedDataPoint:w,checkBubbleChart:B,dimensionAttrCheck:z,measureAttrCheck:j,getEntitySet:H,formGroupByList:D,getChartTitle:F}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/charts/analytical/Component", ["sap/ovp/cards/generic/base/analytical/Component","sap/ovp/cards/v4/charts/VizAnnotationManager"],function(a,e){"use strict";return a.extend("sap.ovp.cards.v4.charts.analytical.Component",{metadata:{properties:{headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.KPIHeader"},contentFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.charts.analytical.analyticalChart"},countHeaderFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.CountHeader"},headerFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.Header"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.v4.charts.analytical.analyticalChart"},enableAddToInsights:{type:"boolean",defaultValue:false}},version:"1.141.0",library:"sap.ovp",includes:[],dependencies:{libs:["sap.viz"],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/charts/analytical/analyticalChart.controller", ["sap/ovp/cards/generic/base/analytical/BaseAnalyticalChart.controller","sap/ovp/cards/v4/charts/VizAnnotationManager","sap/ovp/cards/charts/VizAnnotationManager","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/app/resources","sap/base/util/each","sap/ovp/cards/Filterhelper","sap/ovp/cards/generic/base/analytical/Utils","sap/ovp/filter/FilterUtils","sap/ui/Device","sap/ui/model/json/JSONModel"],function(t,e,a,i,r,s,o,n,l,d,h){"use strict";return t.extend("sap.ovp.cards.charts.v4.analytical.analyticalChart",{onInit:function(){t.prototype.onInit.apply(this,arguments);var e=new h({error:false});this.getView().setModel(e,"oAnalyticalCardErrorModel")},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);if(!i.checkIfAPIIsUsed(this)){var e=this.getCardPropertiesModel();var a=this.getOwnerComponent().getModel("ui").getData().cards;this.selectionVaraintFilter=o.getSelectionVariantFilters(a,e,this.getEntityType())}},onDataReceived:function(t){if(n.checkIfDataExistInEvent(t)){var i=this;var o=this.getView().byId("analyticalChart");var l=this.getView().byId("bubbleText");var p=r.getText("BUBBLESIZE");var c=i.getMetaModel().getData()["$Annotations"];this.oDataSet.bindData("analyticalmodel>/","");o.setDataset(this.oDataSet);var g=o.getParent();if(!this.isVizPropSet){e.buildVizAttributes(o,g,this);this.isVizPropSet=true;if(l!=undefined){var u=o.getFeeds();s(u,function(t,e){if(u[t].getUid()=="bubbleWidth"){l.setText(p+" "+u[t].getValues())}})}a.hideDateTimeAxis(o)}if(this.getCardPropertiesModel()&&this.getCardPropertiesModel().getData()&&this.getCardPropertiesModel().getData().colorPalette&&o.getVizType()==="stacked_column"){var f=o.getDataset().getDimensions(),v=o.getFeeds(),y,b;for(var C=0;C<v.length;C++){if(v[C].getUid()==="color"){y=v[C].getValues()[0];break}}for(var D=0;D<f.length;D++){if(f[D].getName()===y){b=f[D];break}}if(y&&b){var m={};m["bDescending"]=true;b.setSorter(m)}}var M=t?t.getSource().getCurrentContexts().map(function(t){return t&&t.getObject()}):null;e.setChartUoMTitle(o,M,c);if(this.bFlag==true){this.bFlag=false;this.vbLayout.setBusy(false)}else{setTimeout(function(){i.vbLayout.setBusy(false);i.bdataLoadedToEnableAddToInsight=true},0)}if(n.isDataSetEmpty(t)){var P=this.getOwnerComponent().getComponentData().cardId;if(P&&this.oMainComponent.aErrorCards.indexOf(P)===-1){this.oMainComponent.createNoDataCard(P)}}a.checkNoData(t,this.getCardContentContainer(),o);if(d.system.phone){if(this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var V=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var I=Math.max(V.dashboardLayout.rowSpan,this.iPreviousRowSpan);this.iPreviousRowSpan=I}if(n.isDataSetEmpty(t)){o.setHeight(50+"px")}else{var A=this._calculateVizFrameHeight();if(A!==undefined&&typeof A==="number"){o.setHeight(A+"px")}}}}else if(t&&t.getParameters().error){this.vbLayout.setBusy(false);var S=new h({error:true});this.getView().setModel(S,"oAnalyticalCardErrorModel")}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/charts/generic/Component", ["sap/ovp/cards/generic/Component","sap/ovp/cards/jUtils"],function(t,e){"use strict";return t.extend("sap.ovp.cards.charts.generic.Component",{metadata:{properties:{headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.KPIHeader"},selectionAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.SelectionVariant"},chartAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Chart"},presentationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.PresentationVariant"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"},dataPointAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.DataPoint"}},version:"1.141.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}},addTabindex:function(){e.setAttributeToMultipleElements(".tabindex0","tabindex",0);e.setAttributeToMultipleElements(".tabindex-1","tabindex",-1)},onAfterRendering:function(){this.addTabindex()}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/custom/Component", ["sap/ovp/cards/v4/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.v4.custom.Component",{metadata:{properties:{contentFragment:{type:"string"},headerExtensionFragment:{type:"string"},contentPosition:{type:"string",defaultValue:"Middle"},footerFragment:{type:"string"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"},selectionAnnotationPath:{type:"string"},filters:{type:"object"},parameters:{type:"object"},addODataSelect:{type:"boolean",defaultValue:false}},version:"1.141.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/error/Component", ["sap/ovp/cards/generic/base/error/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.v4.error.Component",{metadata:{properties:{controllerName:{type:"string",defaultValue:"sap.ovp.cards.v4.error.Error"},headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.KPIHeader"}},version:"1.141.0",library:"sap.ovp"}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/error/Error.controller", ["sap/ovp/cards/generic/base/error/BaseError.controller"],function(r){"use strict";return r.extend("sap.ovp.cards.v4.error.Error",{onInit:function(){r.prototype.onInit.apply(this,arguments)},onAfterRendering:function(){r.prototype.onAfterRendering.apply(this,arguments)}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/generic/Component", ["sap/ovp/cards/generic/base/Component","sap/ovp/cards/v4/V4AnnotationHelper"],function(e,t){"use strict";return e.extend("sap.ovp.cards.v4.generic.Component",{metadata:{properties:{contentFragment:{type:"string"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.generic.Card"},headerExtensionFragment:{type:"string"},contentPosition:{type:"string",defaultValue:"Middle"},headerFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.Header"},footerFragment:{type:"string"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"},selectionAnnotationPath:{type:"string"},filters:{type:"object"},parameters:{type:"object"},addODataSelect:{type:"boolean",defaultValue:false},enableAddToInsights:{type:"boolean",defaultValue:false}},version:"1.141.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/linklist/Component", ["sap/ovp/cards/generic/base/linklist/Component"],function(t){"use strict";return t.extend("sap.ovp.cards.v4.linklist.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.linklist.LinkList"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.v4.linklist.LinkList"},communicationPath:{type:"string",defaultValue:"com.sap.vocabularies.Communication.v1.Contact"},headerAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.HeaderInfo"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"}},version:"1.141.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/linklist/LinkList.controller", ["sap/ovp/cards/generic/base/linklist/BaseLinklist.controller","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/Filterhelper","sap/ovp/cards/generic/base/analytical/Utils"],function(t,e,i,n){"use strict";return t.extend("sap.ovp.cards.v4.linklist.LinkList",{onInit:function(){t.prototype.onInit.apply(this,arguments)},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);if(!e.checkIfAPIIsUsed(this)){var n=this.getCardPropertiesModel();var a=this.getOwnerComponent().getModel("ui").getData().cards;this.selectionVaraintFilter=i.getSelectionVariantFilters(a,n,this.getEntityType())}},onDataReceived:function(t){if(n.isDataSetEmpty(t)){var e=this.getOwnerComponent().getComponentData().cardId;if(e&&this.oMainComponent.aErrorCards.indexOf(e)===-1){this.oMainComponent.createNoDataCard(e)}}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/list/Component", ["sap/ovp/cards/generic/base/list/Component","sap/ovp/cards/v4/V4AnnotationHelper"],function(e,a){"use strict";return e.extend("sap.ovp.cards.v4.list.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.list.List"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.v4.list.List"},annotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.LineItem"},countHeaderFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.CountHeader"},headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.KPIHeader"},enableAddToInsights:{type:"boolean",defaultValue:false},headerFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.Header"}},version:"1.141.0",library:"sap.ovp",includes:[],dependencies:{libs:["sap.suite.ui.microchart"],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/list/List.controller", ["sap/ovp/cards/generic/base/list/BaseList.controller","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/Filterhelper","sap/ovp/cards/generic/base/analytical/Utils"],function(t,e,i,a){"use strict";return t.extend("sap.ovp.cards.v4.list.List",{onInit:function(){t.prototype.onInit.apply(this,arguments)},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);if(!e.checkIfAPIIsUsed(this)){var a=this.getCardPropertiesModel();var n=this.getOwnerComponent().getModel("ui").getData().cards;this.selectionVaraintFilter=i.getSelectionVariantFilters(n,a,this.getEntityType())}},onExit:function(){t.prototype.onExit.apply(this,arguments)},onDataReceived:function(t){this.bdataLoadedToEnableAddToInsight=true;var e=this.byId("ovpList");e&&e.setBusy(false);if(a.isDataSetEmpty(t)){var i=this.getOwnerComponent().getComponentData().cardId;if(i&&this.oMainComponent.aErrorCards.indexOf(i)===-1){this.oMainComponent.createNoDataCard(i)}}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/table/Component", ["sap/ovp/cards/generic/base/table/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.v4.table.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.table.Table"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.v4.table.Table"},annotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.LineItem"},countHeaderFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.CountHeader"},headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.KPIHeader"},enableAddToInsights:{type:"boolean",defaultValue:false},headerFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.Header"}},version:"1.141.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/v4/table/Table.controller", ["sap/ovp/cards/generic/base/table/BaseTable.controller","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/Filterhelper","sap/ovp/cards/generic/base/analytical/Utils"],function(e,t,a,n){"use strict";return e.extend("sap.ovp.cards.v4.table.Table",{onInit:function(){e.prototype.onInit.apply(this,arguments)},onAfterRendering:function(){e.prototype.onAfterRendering.apply(this,arguments);if(!t.checkIfAPIIsUsed(this)){var n=this.getCardPropertiesModel();var i=this.getOwnerComponent().getModel("ui").getData().cards;this.selectionVaraintFilter=a.getSelectionVariantFilters(i,n,this.getEntityType())}},onDataReceived:function(e){this.bdataLoadedToEnableAddToInsight=true;var t=this.byId("ovpTable");t&&t.setBusy(false);if(n.isDataSetEmpty(e)){var a=this.getOwnerComponent().getComponentData().cardId;if(a&&this.oMainComponent.aErrorCards.indexOf(a)===-1){this.oMainComponent.createNoDataCard(a)}}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/filter/FilterUtils", ["sap/ovp/cards/Filterhelper","sap/ovp/app/FilterHelper","sap/ovp/app/OVPLogger","sap/ui/base/SyncPromise","sap/ui/model/FilterOperator","sap/ui/model/Filter"],function(e,t,r,a,i,n){"use strict";var l=new r("sap.ovp.filter.filterUtils");var o={applyFiltersToV2Card:function(e,r){var a=r.getEntityType(),i=r.oMainComponent.getMacroFilterBar()||r.oMainComponent.getGlobalFilter(),n=i&&i.getModel(),o=r.getView().getModel("ovpCardProperties"),s=o&&o.getProperty("/entityType"),p=s&&s.name;if(a&&n&&p){var g=t.getEntityRelevantFilters(a,e,p,n);var d=t.mergeFilters(g,r.selectionVaraintFilter,o);try{var c=r.getCardItemsBinding();if(c){c.filter(d)}if(r.getKPIBinding()){r.getKPIBinding().filter(d)}if(r.getSubTitleBinding()){r.getSubTitleBinding().filter(d)}}catch(e){l.error(e)}}},getFiltersForV2CustomCard:function(e,r){var a=r.getEntityType(),i=r.oMainComponent.getMacroFilterBar()||r.oMainComponent.getGlobalFilter(),l=i&&i.getModel(),o=r.getView().getModel("ovpCardProperties"),s=o&&o.getProperty("/entityType"),p=s&&s.name;var g=new n;if(a&&l&&p){var d=t.getEntityRelevantFilters(a,e,p,l);g=t.mergeFilters(d,r.selectionVaraintFilter,o)}return g},applyFiltersToV4Card:function(t,r){if(r.getView().getModel().getMetaModel().getData){var a=r.getView().getModel().getMetaModel().getData();var i=r.getView().getModel("ovpCardProperties");var n=i.getProperty("/entityType");var o=n&&n["$Type"];if(o){var s=e._getEntityRelevantFilters(a[o],t);s=e.mergeFilters(s,r.selectionVaraintFilter,i);try{r.getCardItemsBinding().filter(s);if(r.getKPIBinding()){r.getKPIBinding().filter(s)}if(r.getSubTitleBinding()){r.getSubTitleBinding().filter(s)}}catch(e){l.error(e)}}}},applyFiltersToV4AnalyticalCard:function(t,r){if(r.getView().getModel().getMetaModel().getData){var a=r.getView().getModel().getMetaModel().getData();var i=r.getView().getModel("ovpCardProperties");var n=i.getData().entityType.$Type;var o=e._getEntityRelevantFilters(a[n],t);o=e.mergeFilters(o,r.selectionVaraintFilter,i);var s=r.getCardItemsBinding();var p=s&&s.mParameters&&s.mParameters.$apply;var g=p&&p.split("/").length||0;try{if(o&&o.aFilters){this.fetchFilter(o,s,{}).then(function(e){var t=g>1?p.split("/")[g-1]:p.split("/")[0];s.changeParameters({$apply:"filter("+e+")/"+t})}).catch(function(e){l.error(e)})}else{if(g>1){s.changeParameters({$apply:p.split("/")[g-1]})}}if(r.getKPIBinding()){r.getKPIBinding().filter(o)}if(r.getSubTitleBinding()){r.getSubTitleBinding().filter(o)}}catch(e){l.error(e)}}},fetchFilter:function(e,t,r,n){var l;var o=t.oModel.getMetaModel();var s=o.getMetaContext(t.oModel.resolve(t.sPath,t.oContext));if(!e){return a.resolve()}if(e.aFilters){return a.all(e.aFilters.map(function(a){return this.fetchFilter(a,t,r,e.bAnd)},this)).then(function(t){return this.wrap(t.join(e.bAnd?" and ":" or "),n&&!e.bAnd)}.bind(this))}l=o.resolve(this.replaceLambdaVariables(e.sPath,r),s);return o.fetchObject(l).then(function(t){var a,o,s;if(!t){throw new Error("Type cannot be determined, no metadata for path: "+l)}s=e.sOperator;if(s===i.All||s===i.Any){a=e.oCondition;o=e.sVariable;if(s===i.Any&&!a){return e.sPath+"/any()"}r=Object.create(r);r[o]=this.replaceLambdaVariables(e.sPath,r);return this.fetchFilter(a,r).then(function(t){return e.sPath+"/"+e.sOperator.toLowerCase()+"("+o+":"+t+")"})}return this.getSingleFilterValue(e,t.$Type,n)}.bind(this))},wrap:function(e,t){return t?"("+e+")":e},replaceLambdaVariables:function(e,t){var r=e.split("/");r[0]=t[r[0]];return r[0]?r.join("/"):e},getSingleFilterValue:function(t,r,a){var n,l,o,s;function p(e){return o?"tolower("+e+")":e}o=r==="Edm.String"&&t.bCaseSensitive===false;l=p(decodeURIComponent(t.sPath));s=p(e.formatLiteral(t.oValue1,r));switch(t.sOperator){case i.BT:n=l+" ge "+s+" and "+l+" le "+p(e.formatLiteral(t.oValue2,r));break;case i.NB:n=this.wrap(l+" lt "+s+" or "+l+" gt "+p(e.formatLiteral(t.oValue2,r)),a);break;case i.EQ:case i.GE:case i.GT:case i.LE:case i.LT:case i.NE:n=l+" "+t.sOperator.toLowerCase()+" "+s;break;case i.Contains:case i.EndsWith:case i.NotContains:case i.NotEndsWith:case i.NotStartsWith:case i.StartsWith:n=t.sOperator.toLowerCase().replace("not","not ")+"("+l+","+s+")";break;default:throw new Error("Unsupported operator: "+t.sOperator)}return n}};return{applyFiltersToV2Card:o.applyFiltersToV2Card,getFiltersForV2CustomCard:o.getFiltersForV2CustomCard,applyFiltersToV4Card:o.applyFiltersToV4Card,applyFiltersToV4AnalyticalCard:o.applyFiltersToV4AnalyticalCard,fetchFilter:o.fetchFilter,wrap:o.wrap,replaceLambdaVariables:o.replaceLambdaVariables,getSingleFilterValue:o.getSingleFilterValue}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/flexibility/DashboardLayout.flexibility", ["sap/ovp/flexibility/changeHandler/CardChangeHandler","sap/ovp/flexibility/changeHandler/RemoveCardContainer","sap/ui/dt/OverlayRegistry","sap/ui/core/ComponentContainer","sap/m/MessageToast","sap/ovp/cards/rta/SettingsDialogConstants","sap/ovp/cards/SettingsUtils","sap/ovp/cards/CommonUtils","sap/ovp/app/resources","sap/base/util/merge","sap/ui/model/odata/v2/ODataModel","sap/ui/model/odata/CountMode"],function(e,t,a,o,r,n,d,s,i,l,u,g){"use strict";return{moveControls:{changeHandler:"default",layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},unhideControl:e.UnhideControlConfig,unhideCardContainer:e.UnhideCardContainer,hideCardContainer:e.HideCardContainer,removeCardContainer:t,editCardSettings:{changeHandler:{applyChange:function(e,t,a){var o=s.getApp(),r=o.getView(),d=e.getContent(),i=d.newAppDescriptor,l=r.byId(i.id),u=o.getLayout(),g=u.getDashboardLayoutModel(),C=u.getDashboardLayoutUtil(),p=g.getCardById(i.id),c=C.calculateCardProperties(i.id),y=i.settings.defaultSpan&&i.settings.defaultSpan.rows,f=i.settings.defaultSpan&&i.settings.defaultSpan.cols,h=g.getColCount()+1,S=[],v=false;e.setRevertData(d.oldAppDescriptor);if(l){if(i.settings.tabs){var b=i.settings.selectedKey;if(!b||b<1){b=1}n.tabFields.forEach(function(e){var t=i.settings.tabs[b-1][e];if(e!=="entitySet"||e==="entitySet"&&t){delete i.settings[e]}if(t){i.settings[e]=t}})}if(typeof y==="number"){if(y===0){p.dashboardLayout.showOnlyHeader=true;y=Math.ceil((c.headerHeight+2*C.CARD_BORDER_PX)/C.getRowHeightPx())}else{p.dashboardLayout.showOnlyHeader=false;if(i.template==="sap.ovp.cards.list"||i.template==="sap.ovp.cards.table"){p.dashboardLayout.noOfItems=y}}}if(f){if(p.dashboardLayout.column+f>h){p.dashboardLayout.maxColSpan=f;f=h-p.dashboardLayout.column}v=true}if(v){g._arrangeCards(p,{row:y,column:f},"resize",S);g._removeSpaceBeforeCard(S);C._positionCards(g.aCards);v=false}var m=l.getComponentInstance();m.destroy()}o.recreateRTAClonedCard(i);return true},revertChange:function(e,t,a){var o=s.getApp(),r=o.getView(),n=e.getRevertData(),d=r.byId(n.id),i=o.getLayout(),l=i.getDashboardLayoutModel(),u=i.getDashboardLayoutUtil(),g=l.getCardById(n.id),C=n.settings.defaultSpan&&n.settings.defaultSpan.rowSpan,p=n.settings.defaultSpan&&n.settings.defaultSpan.colSpan,c=n.settings.defaultSpan&&n.settings.defaultSpan.showOnlyHeader,y=[];if(d){g.dashboardLayout.rowSpan=C;g.dashboardLayout.colSpan=p;g.dashboardLayout.showOnlyHeader=c;l._arrangeCards(g,{row:C,column:p},"resize",y);l._removeSpaceBeforeCard(y);u._positionCards(l.aCards);var f=d.getComponentInstance();f.destroy()}o.recreateRTAClonedCard(n);e.resetRevertData();return true},completeChangeContent:function(e,t,a){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},newCardSettings:{changeHandler:{applyChange:function(e,t,n){var C=s.getApp(),p=C.getView(),c=e.getContent();e.setRevertData(c.id);var y=new o(p.getId()+"--"+c.id),f=n.appComponent,h=C.getUIModel(),S=h.getProperty("/cards"),v=C.getLayout(),b=v.getDashboardLayoutUtil(),m=v.getDashboardLayoutModel(),L=c.id.indexOf("newStaticLinkListCard_N")!==-1&&!d.checkClonedCard(c.id),R=c.id.indexOf("newKPICard_N")!==-1&&!d.checkClonedCard(c.id),D=c.id.indexOf("newCard_N")!==-1&&!d.checkClonedCard(c.id),w=d.newDataSource;if(R){var M=c.settings.selectedKPI,U=new u(M.ODataURI,{annotationURI:M.ModelURI,defaultCountMode:g.None}),_=c.model;if(c.settings["sAnnoKey"]){d.setDataSources(c.settings["sAnnoKey"],M.ModelURI)}p.setModel(U,_);f.setModel(U,_)}if(w&&!f.getModel(c.model)){var I=new u(d.newDataSourceModel.serviceURI,{annotationURI:d.newDataSourceModel.serviceAnnotationURI,defaultCountMode:g.None}),_=c.model;d.setDataSources(d.newDataSourceModel.serviceAnnotation,d.newDataSourceModel.serviceAnnotationURI);p.setModel(I,_);f.setModel(I,_)}c.settings.baseUrl=C._getBaseUrl();if(L||R||D){c.settings.newCard=true;m._setCardSpanFromDefault(c);c.dashboardLayout.row=1;c.dashboardLayout.column=1}else{c.settings.cloneCard=true}var O=-1,A;for(A=0;A<S.length;A++){if(c.id.lastIndexOf(s._getLayerNamespace()+"."+S[A].id,0)===0){O=A;var E=m.getCardById(S[A].id);c.dashboardLayout=l({},E.dashboardLayout);var T=c.dashboardLayout.column+c.dashboardLayout.colSpan;c.dashboardLayout.column=T<m.getColCount()?T:1;break}}S.splice(O+1,0,c);b.getCards().splice(O+1,0,c);h.setProperty("/cards",S);v.insertContent(y,O+1);setTimeout(function(){var e=a.getOverlay(y);e.setSelected(true);e.focus();var t=L||R||D?i.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_NEW"):i.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_CLONE");r.show(t,{duration:1e4})},0);C.recreateRTAClonedCard(c);return true},revertChange:function(e,t,a){var o=a.appComponent,r=s.getApp(),n=r.getView(),i=e.getRevertData(),l=e.getContent();var u=n.byId(i),g=r.getUIModel(),C=g.getProperty("/cards"),p=r.getLayout(),c=p.getDashboardLayoutUtil(),y=p.getDashboardLayoutModel(),f=c.getCards();var h=-1,S,v,b=-1;for(S=0;S<C.length;S++){if(i===C[S].id){h=S;break}}C.splice(h,1);for(v=0;v<f.length;v++){if(i===f[v].id){b=v;break}}f.splice(b,1);y._removeSpaceBeforeCard();g.setProperty("/cards",C);if(u){var m=u.getComponentInstance(),L=m.getComponentData(),R=L.cardId.indexOf("newKPICard_N")!==-1&&!d.checkClonedCard(i);if(R){var D=L.modelName,w=n.getModel(D);w.destroy();if(l.settings["sAnnoKey"]){d.removeDataSources(l.settings["sAnnoKey"])}n.setModel(null,D);o.setModel(null,D)}m.destroy()}p.removeContent(h);u.destroy();e.resetRevertData();return true},completeChangeContent:function(e,t,a){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},dragAndDropUI:{changeHandler:{applyChange:function(e,t,a){var o=s.getApp(),r=e.getContent(),n=o.getLayout(),d=n.getDashboardLayoutUtil(),i=n.getDashboardLayoutModel(),l=i.getCardById(r.cardId),u="C"+i.getColCount(),g=[];e.setRevertData(r);i._arrangeCards(l,{row:r.dashboardLayout[u].row,column:r.dashboardLayout[u].column},"drag",g);i._removeSpaceBeforeCard(g);d._positionCards(i.aCards);return true},revertChange:function(e,t,a){var o=s.getApp(),r=e.getContent(),n=o.getLayout(),d=n.getDashboardLayoutUtil(),i=n.getDashboardLayoutModel(),l=i.getCardById(r.cardId),u="C"+i.getColCount(),g=[];i._arrangeCards(l,{row:r.dashboardLayout[u].oldRow,column:r.dashboardLayout[u].oldColumn},"drag",g);if(r.dashboardLayout[u].oldColSpan){i._arrangeCards(l,{row:r.dashboardLayout[u].rowSpan,column:r.dashboardLayout[u].oldColSpan},"resize",g)}i._removeSpaceBeforeCard(g);d._positionCards(i.aCards);e.resetRevertData();return true},completeChangeContent:function(e,t,a){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},viewSwitch:e.PersonalizationDefaultConfig,visibility:e.PersonalizationDefaultConfig,dragOrResize:e.PersonalizationDefaultConfig,position:e.PersonalizationDefaultConfig}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/flexibility/EasyScanLayout.flexibility", ["sap/ovp/flexibility/changeHandler/CardChangeHandler","sap/ovp/flexibility/changeHandler/RemoveCardContainer","sap/ui/dt/OverlayRegistry","sap/ui/core/ComponentContainer","sap/m/MessageToast","sap/ovp/cards/rta/SettingsDialogConstants","sap/ovp/cards/SettingsUtils","sap/ovp/cards/CommonUtils","sap/ovp/app/resources","sap/base/util/merge","sap/ui/model/odata/v2/ODataModel","sap/ui/model/odata/CountMode"],function(e,t,n,o,r,a,i,s,d,l,C,g){"use strict";return{moveControls:{changeHandler:"default",layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},unhideControl:e.UnhideControlConfig,unhideCardContainer:e.UnhideCardContainer,hideCardContainer:e.HideCardContainer,removeCardContainer:t,editCardSettings:{changeHandler:{applyChange:function(e,t,n){var o=s.getApp(),r=o.getView(),i=e.getContent(),d=i.newAppDescriptor,l=r.byId(d.id);e.setRevertData(i.oldAppDescriptor);if(l){if(d.settings.tabs){var C=d.settings.selectedKey;if(!C||C<1){C=1}a.tabFields.forEach(function(e){var t=d.settings.tabs[C-1][e];if(e!=="entitySet"||e==="entitySet"&&t){delete d.settings[e]}if(t){d.settings[e]=t}})}var g=l.getComponentInstance();g.destroy()}o.recreateRTAClonedCard(d);return true},revertChange:function(e,t,n){var o=s.getApp(),r=o.getView(),a=e.getRevertData(),i=r.byId(a.id);if(i){var d=i.getComponentInstance();d.destroy()}o.recreateRTAClonedCard(a);e.resetRevertData();return true},completeChangeContent:function(e,t,n){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},newCardSettings:{changeHandler:{applyChange:function(e,t,a){var l=s.getApp(),u=l.getView(),p=e.getContent();e.setRevertData(p.id);var c=new o(u.getId()+"--"+p.id),v=a.appComponent,f=l.getUIModel(),y=f.getProperty("/cards"),S=l.getLayout(),R=p.id.indexOf("newStaticLinkListCard_N")!==-1&&!i.checkClonedCard(p.id),m=p.id.indexOf("newKPICard_N")!==-1&&!i.checkClonedCard(p.id),M=p.id.indexOf("newCard_N")!==-1&&!i.checkClonedCard(p.id),U=i.newDataSource;if(m){var h=p.settings.selectedKPI,A=new C(h.ODataURI,{annotationURI:h.ModelURI,defaultCountMode:g.None}),D=p.model;if(p.settings["sAnnoKey"]){i.setDataSources(p.settings["sAnnoKey"],h.ModelURI)}u.setModel(A,D);v.setModel(A,D)}if(U&&!v.getModel(p.model)){var E=new C(i.newDataSourceModel.serviceURI,{annotationURI:i.newDataSourceModel.serviceAnnotationURI,defaultCountMode:g.None}),D=p.model;i.setDataSources(i.newDataSourceModel.serviceAnnotation,i.newDataSourceModel.serviceAnnotationURI);u.setModel(E,D);v.setModel(E,D)}p.settings.baseUrl=l._getBaseUrl();if(R||m||M){p.settings.newCard=true}else{p.settings.cloneCard=true}var O=-1,P;for(P=0;P<y.length;P++){if(p.id.lastIndexOf(s._getLayerNamespace()+"."+y[P].id,0)===0){O=P;break}}y.splice(O+1,0,p);f.setProperty("/cards",y);S.insertContent(c,O+1);setTimeout(function(){var e=n.getOverlay(c);e.setSelected(true);e.focus();var t=R||m||M?d.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_NEW"):d.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_CLONE");r.show(t,{duration:1e4})},0);l.recreateRTAClonedCard(p);return true},revertChange:function(e,t,n){var o=n.appComponent,r=s.getApp(),a=r.getView(),d=e.getRevertData(),l=e.getContent();var C=a.byId(d),g=r.getUIModel(),u=g.getProperty("/cards"),p=r.getLayout();var c=-1,v;for(v=0;v<u.length;v++){if(d===u[v].id){c=v;break}}u.splice(c,1);g.setProperty("/cards",u);if(C){var f=C.getComponentInstance(),y=f.getComponentData(),S=y.cardId.indexOf("newKPICard_N")!==-1&&!i.checkClonedCard(d);if(S){var R=y.modelName,m=a.getModel(R);m.destroy();if(l.settings["sAnnoKey"]){i.removeDataSources(l.settings["sAnnoKey"])}a.setModel(null,R);o.setModel(null,R)}f.destroy()}p.removeContent(c);C.destroy();e.resetRevertData();return true},completeChangeContent:function(e,t,n){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},dragAndDropUI:{changeHandler:{applyChange:function(e,t,o){var r=s.getApp(),a=e.getContent(),i=l({},a),d=r.getUIModel(),C=d.getProperty("/cards"),g=r.getLayout(),u;u=i.position;i.position=i.oldPosition;i.oldPosition=u;e.setRevertData(i);u=C[a.position];C[a.position]=C[a.oldPosition];C[a.oldPosition]=u;d.setProperty("/cards",C);var p=g.getContent()[a.position],c=g.getContent()[a.oldPosition];g.removeContent(c);g.insertContent(c,a.position);g.removeContent(p);g.insertContent(p,a.oldPosition);setTimeout(function(){var e=n.getOverlay(c);e.setSelected(true);e.focus()},0);return true},revertChange:function(e,t,o){var r=s.getApp(),a=e.getRevertData(),i=r.getUIModel(),d=i.getProperty("/cards"),l=r.getLayout(),C;C=d[a.position];d[a.position]=d[a.oldPosition];d[a.oldPosition]=C;i.setProperty("/cards",d);var g=l.getContent()[a.position],u=l.getContent()[a.oldPosition];l.removeContent(u);l.insertContent(u,a.position);l.removeContent(g);l.insertContent(g,a.oldPosition);setTimeout(function(){var e=n.getOverlay(u);e.setSelected(true);e.focus()},0);e.resetRevertData();return true},completeChangeContent:function(e,t,n){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},viewSwitch:e.PersonalizationDefaultConfig,visibility:e.PersonalizationDefaultConfig,position:e.PersonalizationDefaultConfig}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/flexibility/changeHandler/CardChangeHandler", ["sap/ovp/cards/CommonUtils","sap/ui/core/ElementRegistry","sap/ui/core/Element","sap/m/MessageBox","sap/ovp/app/resources","sap/m/Dialog"],function(e,r,t,n,a,i){"use strict";var o=0;function d(){return{changeHandler:{},layers:{VENDOR:true,CUSTOMER_BASE:true,CUSTOMER:true,USER:true}}}function s(r){var t=r.getContent();var n={card:{id:e.removePrefixAndReturnLocalId(t.id),idIsLocal:true}};return n}var l={changeHandler:{applyChange:function(r,t,n){var a=e.getApp();a.appendIncomingDeltaChange(r);return},completeChangeContent:function(e,r,t){return},revertChange:function(e,r,t){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}};var u={changeHandler:"default",layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}};var g=d();var c=d();g.changeHandler.applyChange=function(e,r,t){var n=e.getContent();if(!n.card){e.setContent(s(e),true)}return f(e,r,t,false)};g.changeHandler.revertChange=function(e,r,t){return C(e,r,t,true)};g.changeHandler.completeChangeContent=function(r,t,n){var a=e.removePrefixAndReturnLocalId(t.removedElement.id);var i={card:{id:a,idIsLocal:true}};return Promise.resolve().then(function(){r.setContent(i,true)})};c.changeHandler.applyChange=function(d,l,u){var g=e.getApp();var c=r.filter(function(e){return e instanceof i});var C=c.filter(function(e){return e.getButtons()&&e.getButtons()[0].sId.includes("rta_addDialogOkButton")})[0];var v=C&&C.sId;var p=t.getElementById(v);var m=p&&p.getModel()&&p.getModel().getData().elements;var h=m&&m.filter(function(e){return e.selected});var y=l.getVisibleLayoutItems()&&l.getVisibleLayoutItems().length;var b=h&&h.length;if(b){y=y+b;y=y-o}var I=g.getAllowedNumberOfCards()&&g.getAllowedNumberOfCards().numberOfCards;var O=y>I;var A=g&&g.getAllowedNumberOfCards();var E=A&&A.errorMessage;E=a.getText("CARD_LIMIT_EXCEEDED")+" "+E;C&&C.attachAfterOpen(function(){g.bWarningDisplayedOnUnhidingCards=false;o=0});if(O){var M=g.getUIModel().getProperty("/bRTAActive");if(!g.bWarningDisplayedOnUnhidingCards&&M&&b){n.warning(E,{actions:n.Action.OK,emphasizedAction:n.Action.OK});g.bWarningDisplayedOnUnhidingCards=true}return Promise.resolve(false)}else{if(M&&b){o++}var R=d.getContent();if(!R.card){d.setContent(s(d),true)}return f(d,l,u,true)}};c.changeHandler.revertChange=function(e,r,t){return C(e,r,t,false)};c.changeHandler.completeChangeContent=function(r,t,n){var a=e.removePrefixAndReturnLocalId(t.revealedElementId);var i={card:{id:a,idIsLocal:true}};return Promise.resolve().then(function(){r.setContent(i,true)})};function C(r,t,n,a){var i=n.modifier,o=n.appComponent,d=e.getApp(),s=d.getUIModel(),l=d.getLayout(),u=o.createId(r.getRevertData().id),g=i.bySelector(r.getRevertData(),o);i.setVisible(g,a);r.resetRevertData();if(s.getProperty("/containerLayout")==="resizable"){var c=l.getDashboardLayoutUtil();c.updateCardVisibility([{id:c.getCardIdFromComponent(u),visibility:a}])}l.invalidate();return Promise.resolve(true)}function f(r,t,n,a){var i=n.modifier,o=e.getApp(),d=o&&o.getView();if(!d){throw new Error("Main view is not initialized yet.")}var s=o.getUIModel(),l=o.getLayout(),u=r.getContent(),g=n.appComponent,c=g.createId(u.card.id),C=i.bySelector(u.card,g,d);var f=o.deltaChanges.filter(function(e){return e.getSelector().id===u.card.id&&e.getChangeType()==="visibility"});if(o.aManifestOrderedCards){for(var v=0;v<o.aManifestOrderedCards.length;v++){var p=c;var m=p.indexOf("---")+3;var h=p.substring(m);if(o.aManifestOrderedCards[v].id===h.split("--")[1]){o.oView.oController.aManifestOrderedCards[v].visibility=r.getChangeType()==="hideCardContainer"?false:true}}}if((!o.aManifestOrderedCards||f.length===0)&&C){r.setRevertData(u.card);i.setVisible(C,a);if(s.getProperty("/containerLayout")==="resizable"){var y=l.getDashboardLayoutUtil();if(y.aCards){y.updateCardVisibility([{id:y.getCardIdFromComponent(c),visibility:a}])}o.appendIncomingDeltaChange(r)}if(a){var b=d.byId(c);if(!b.getComponentInstance()&&o.bFinishedCardsCreationProcess){var I=o._getCardFromManifest(o._getCardId(c));o.recreateRTAClonedCard(I)}}l.invalidate();return Promise.resolve(true)}return Promise.resolve(false)}return{HideCardContainer:g,UnhideCardContainer:c,PersonalizationDefaultConfig:l,UnhideControlConfig:u,_testOnly:{getAddedCardsPerSession:function(){return o},resetAddedCardsPerSession:function(){o=0}}}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/flexibility/changeHandler/PersonalizationChangeHandler", ["sap/ovp/cards/CommonUtils","sap/ui/fl/changeHandler/condenser/Classification"],function(e,n){"use strict";var t={changeHandler:{applyChange:function(n,t,r){var i=e.getApp();i.appendIncomingDeltaChange(n);return},getCondenserInfo:function(e){return{affectedControl:e.getSelector(),classification:n.LastOneWins,uniqueKey:e.getSelector().id+"-"+e.getContent().cardId+"-"+e.getChangeType()}},completeChangeContent:function(e,n,t){return},revertChange:function(e,n,t){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}};return{viewSwitch:t,visibility:t,position:t,dragOrResize:t}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/flexibility/changeHandler/RemoveCardContainer", ["sap/m/MessageToast","sap/ovp/app/resources","sap/ovp/cards/CommonUtils"],function(e,t,r){"use strict";var a={changeHandler:{},layers:{VENDOR:true,CUSTOMER_BASE:true,CUSTOMER:true,USER:true}};a.changeHandler.applyChange=function(a,i,o){var n=o.modifier,s=r.getApp(),d=s.getView(),l=s.getUIModel(),p=l.getProperty("/cards"),g=s.getLayout(),u=a.getContent().id,c=s._getCardId(u),C=o.appComponent,y={id:u,isLocalId:false},v=n.bySelector(y,C,d),f;for(f=0;f<p.length;f++){if(p[f].id===c){break}}var b=p.splice(f,1);l.setProperty("/cards",p);a.setRevertData({id:u,oCard:b[0],index:f});n.setVisible(v,false);if(l.getProperty("/containerLayout")==="resizable"){var m=g.getDashboardLayoutUtil();if(m.aCards){m.updateCardVisibility([{id:m.getCardIdFromComponent(u),visibility:false}])}}var h=t.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_REMOVE",[v.getComponentInstance().getComponentData().settings.title]);e.show(h,{duration:1e4});g.invalidate();return true};a.changeHandler.revertChange=function(e,t,a){var i=a.modifier,o=r.getApp(),n=o.getUIModel(),s=n.getProperty("/cards"),d=o.getLayout(),l=e.getRevertData(),p=i.bySelector(l.id);s.splice(l.index,0,l.oCard);n.setProperty("/cards",s);i.setVisible(p,true);e.resetRevertData();if(n.getProperty("/containerLayout")==="resizable"){var g=d.getDashboardLayoutUtil();g.updateCardVisibility([{id:g.getCardIdFromComponent(l.id),visibility:true}])}d.invalidate();return true};a.changeHandler.completeChangeContent=function(e,t,r){return};return a},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/handlers/IAppStateHandler", ["sap/ovp/handlers/SmartFilterbarHandler","sap/ovp/handlers/MacroFilterbarHandler"],function(e,r){"use strict";return{getCurrentAppStatePromise:function(t,i){var n=i.oNavigationHandler;if(this.oAppStatePromise){this.rejectPreviousPromise&&this.rejectPreviousPromise("skip")}this.oAppStatePromise=new Promise(function(o,s){var a=i.getMacroFilterBar()?r:e;this.rejectPreviousPromise=s;return a.getFilterBarConfiguration(t,i).then(function(e){return n.storeInnerAppStateAsync(e,true).done(function(e){o(e)}).fail(function(e){s(e.getErrorCode())})})}.bind(this));return this.oAppStatePromise}}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/handlers/MacroFilterbarHandler", [],function(){"use strict";return{getFilterBarConfiguration:function(t,n){var r=n.getMacroFilterBar();return r.getSelectionVariant().then(function(t){return{selectionVariant:t.toJSONString()}})}}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/handlers/SmartFilterbarHandler", ["sap/fe/navigation/SelectionVariant","sap/base/util/isEmptyObject"],function(t,e){"use strict";var a="sap.ovp.app.customData",i="sap.ovp.app.extensionData";return{getFilterBarConfiguration:function(r,n){var o=n.getGlobalFilter();if(!o){return}var s={};var l=n._getCustomAppState();var u={_CUSTOM:l[a],_EXTENSION:l[i]};if(!r){if(u._CUSTOM){n._CustomFilterField(u._CUSTOM,s)}if(u._EXTENSION){var S=Object.keys(u._EXTENSION);if(S){n._CustomFilterField(u._EXTENSION[S],s)}}if(!e(s)){var f=o.getFilterData();f._CUSTOM=s;o.setFilterData(f,true)}}var p=o.getUiState({allFilters:false});var g=p&&p.getSelectionVariant();if(o.getSmartVariant().currentVariantGetModified()){g.SelectionVariantID=""}var v=g&&JSON.stringify(g);var c=new t(v);return Promise.resolve({selectionVariant:c.toJSONString(),semanticDates:p.getSemanticDates(),customData:u})},getEntityType:function(t){if(t){var e=t.getModel("ui");return e&&e.getProperty("/globalFilterEntityType")}}}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/helpers/ODataAnnotationHelper", ["sap/ovp/cards/CommonUtils"],function(t){"use strict";function i(i,n,s){if(t.isODataV4(s)){n="@"+n}return i[n]}return{getRecords:i}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/helpers/ODataDelegator", ["sap/ovp/cards/CommonUtils","sap/ovp/cards/MetadataAnalyser","sap/ovp/helpers/V4/MetadataAnalyzer"],function(t,e,r){"use strict";function a(a,n){if(!t.isODataV4(a)){return e.getParametersByEntitySet(a,n.name,true)}else{return r.getParametersByEntitySet(a,n,true)}}function n(a,n,s){if(!t.isODataV4(s)){return e.getPropertyFromEntityType(a,n)}else{return r.getPropertyFromEntityType(a,n)}}return{getParametersByEntitySet:a,getPropertyFromEntityType:n}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/helpers/V4/MetadataAnalyzer", [],function(){"use strict";function e(e,t){var r=e.getObject("/");for(var a in r){if(typeof r[a]==="object"&&r[a].$Type===t){return a}}}function t(t,r,a){if(!a){return null}var n=e(t,r);return t.getObject("/"+n+"/"+a)||null}function r(t,r,a){if(!t||!t.getMetaModel){throw new Error("OData Model needs to be passed as an argument")}var n=t.getMetaModel();var o={entitySetName:null,parameters:[],navPropertyName:null};var i=n.getData()[r.$Type];var p=[];for(var y in i){if(i[y].$kind==="NavigationProperty"){p.push(i[y])}}if(p.length===0){return o}p.filter(function(t){var i=n.getData()[t.$Type];var p=n.getData().$Annotations[t.$Type];if(p&&p["@SAP__common.ResultContext"]&&i.$Key.length>0){o.entitySetName=e(n,t.$Type);for(var y=0;y<i.$Key.length;y++){if(a){var u=[];for(var f in i){if(i[f].$kind==="Property"){u.push(f)}}for(var v=0;v<u.length;v++){if(u[v]===i.$Key[y]){o.parameters.push({name:u[v]});o.entitySetName=e(n,t.$Type)}}}else{o.parameters.push({name:i.$Key[y]})}}var m=[];for(var s in i){if(i[s].$kind==="NavigationProperty"){m.push(i[s])}}var l=m.some(function(e){e.$Type===r.$Type?o.navPropertyName=e.$Type:Function.prototype();return o.navPropertyName});return l&&o.navPropertyName&&o.entitySetName}return false});return o}function a(e,t){if(t&&t.property){var r=t.property[e];return r?Array.of(r):[]}return[]}return{getEntitySetName:e,getODataPropertyFromV4Metadata:t,getParametersByEntitySet:r,getPropertyFromEntityType:a}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/insights/CardProvider", ["sap/ovp/cards/CommonUtils","sap/ovp/insights/IntegrationCard","sap/insights/CardHelper"],function(e,t,n){"use strict";var i={};var r=[];return{init:function(e){var t=i[e];if(!t){return n.getServiceAsync().then(function(t){return t.getCardsChannel().then(function(t){if(t.isEnabled()){this.channel=t;this.id=e;this.sharedCards=r;this.consumers={};return this.registerProvider().then(function(){i[e]=Object.assign({},this);return this}.bind(this))}}.bind(this))}.bind(this))}else if(!t.registered){return t.registerProvider().then(function(){t.shareAvailableCards();return t})}},registerProvider:function(){if(this.channel){return this.channel.registerProvider(this.id,this).then(function(){this.registered=true}.bind(this))}},onConsumerConnected:function(e){if(!this.consumers[e]){this.consumers[e]=true;this.shareAvailableCards(e)}},onConsumerDisconnected:function(e){if(this.consumers[e]){delete this.consumers[e]}},shareAvailableCards:function(e){if(this.sharedCards.length!==r.length){this.sharedCards=r}this.channel.publishAvailableCards(this.id,this.sharedCards,e)},onCardRequested:function(e,t){if(this.consumers[e]){this.getCardDetails(t).then(function(t){this.channel.publishCard(this.id,t,e)}.bind(this))}},unregisterProvider:function(e){r=[];var t=i[e];if(t&&t.channel&&t.registered){return t.channel.unregister(t.id).then(function(){t.registered=false;t.consumers={};t.sharedCards={}})}},getCardDetails:function(n){var i=e.getApp();var r=i&&i.getView().byId(n).getComponentInstance(),s=r&&r.getRootControl()&&r.getRootControl().getController();var a={entitySet:s.entitySet,entityType:s.entityType,cardComponentData:s.oCardComponentData,cardComponent:s.oCardComponent,view:s.getView()};switch(s.getView().getControllerName()){case"sap.ovp.cards.list.List":case"sap.ovp.cards.v4.list.List":a.cardComponentName="List";a.itemBindingInfo=s.getCardItemBindingInfo();break;case"sap.ovp.cards.table.Table":case"sap.ovp.cards.v4.table.Table":a.cardComponentName="Table";a.itemBindingInfo=s.getCardItemBindingInfo();break;case"sap.ovp.cards.charts.analytical.analyticalChart":case"sap.ovp.cards.v4.charts.analytical.analyticalChart":a.cardComponentName="Analytical";a.vizFrame=s.vizFrame;break}return t.createManifestFor(a).then(function(e){return t.UpdateManifestDeltaChanges(e,a).then(function(e){return{id:n,descriptorContent:e}})})},onViewUpdate:function(e){var t=i[e];if(t&&t.registered){t.shareAvailableCards()}},resetInsightCards:function(){r=[]},addInsightCard:function(t,n){var i=t&&t.getProperty("/bInsightRTEnabled"),s=t&&t.getProperty("/enableAddToInsights");if(i&&s){var a=t.getProperty("/cardId"),o=e.getApp(),d=o.getOwnerComponent().getOvpConfig().cards;if(d[a]){r.push({title:d[a].settings.title,id:a,parentAppId:n,description:d[a].settings.subTitle})}}}}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/insights/IntegrationCard", ["sap/ovp/app/OVPLogger","sap/ovp/app/NavigationHelper","sap/ovp/insights/helpers/AnalyticalCard","sap/ovp/insights/helpers/i18n","sap/ovp/insights/helpers/Batch","sap/ovp/insights/helpers/Filters","sap/ovp/app/resources","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/ovp/cards/MetadataAnalyser","sap/ovp/helpers/ODataDelegator","sap/ovp/insights/helpers/CardHeader","sap/fe/navigation/SelectionVariant","sap/ovp/cards/CommonUtils","sap/ovp/insights/helpers/ListContentHelper","sap/ovp/insights/helpers/ContentHelper","sap/ovp/insights/helpers/TableContentHelper","sap/insights/CardHelper","sap/m/MessageToast","sap/ovp/insights/helpers/CardAction","sap/ovp/cards/NavigationHelper","sap/ovp/handlers/SmartFilterbarHandler","sap/ui/core/Element","sap/ui/core/Lib"],function(e,t,a,r,n,i,o,s,l,p,u,c,d,v,g,f,m,h,y,P,b,C,T,S){"use strict";var D=new e("sap.ovp.insights.IntegrationCard");var O="module:sap/insights/CardExtension";var V="";var w=function(e,t,a,r,n){var i=e&&e.getBinding(t);var o,s,l,p,u,c;var d,v,g;var f=r&&n!="sap.ovp.cards.charts.analytical"&&n!="sap.ovp.cards.charts.smart.chart";if(i){o=i.aApplicationFilters;s=i.getPath();l=i.mParameters.select;p=k(l&&l.split(","));l=p&&p.join();u=i.sSortParams;c=i.sRangeParams;d=i&&i.sCustomParams;v=d&&d.split("&");v=v&&v.filter(function(e){return e.indexOf("$expand")>-1});g=v&&v[0]}var m=c&&c.split("&")||[];var h,y;for(var P=0;P<m.length;P++){var b=m[P];if(b.indexOf("$skip")>-1){h=b.split("&")[0]}if(b.indexOf("$top")>-1){y=b.split("&")[0]}}if(f&&a&&a.length){var C=l&&l.split(",")||[];a.forEach(function(e){if(!C.includes(e)){C.push(e)}});l=C.join(",")}return{sBindingPath:s,aApplicationFilters:o,sSelect:l?"$select="+l:"",sSortParameters:u?u:"",skip:h?h:"$skip=0",top:y?y:"",sExpandParam:g||""}};var F=function(e,t){var a=e.view.getController(),r=a.oCardComponentData&&a.oCardComponentData.mainComponent,n=b.getEntityNavigationParameters(r,a.getModel(),e.cardComponentData,a.getCardPropertiesModel(),a.getEntityType()),i=n&&n.sNavSelectionVariant,o=i&&JSON.parse(i),s=o&&o.SelectOptions||[];return s.filter(function(e){return t.indexOf(e["PropertyName"])>-1})};var x=function(e,t,a,r,n){var i=n.view.getModel(),o=n&&n.entityType,s=o&&o.property;var l,u=[],c,d,v=o&&o.name,g=t&&t.name;var f=i.oMetadata._getEntityTypeByName(v);var m=a&&a.oMetadata._getEntityTypeByName(g);if(!f&&!m){return}else if(f&&!m){u=[f.property]}else if(f&&m){u=[f.property,m.property]}for(var h=0;h<u.length;h++){s=JSON.parse(JSON.stringify(u[h]));for(var y=0;y<s.length;y++){if(s[y].name===e){l=s[y];return l}if("P_"+s[y].name===e||s[y].name==="P_"+e||"$Parameter.P_"+s[y].name===e||s[y].name==="$Parameter.P_"+e){l=s[y];if(l&&p.checkAnalyticalParameterisedEntitySet(i,n.entitySet.name)){c=r.length&&M(e,r)}return c&&c.length?c[0]:l}}}if(p.checkAnalyticalParameterisedEntitySet(i,n.entitySet.name)){d=r.length&&M(e,r);if((!d||!d.length)&&e.includes("/")){var P=e.split("/");d=P.length&&M(P[P.length-1],r)}}if(d&&d.length){return d[0]}return undefined};var I=function(e,t){var a;if(e&&e[t]){return e[t]}else if(e&&e.extensions){a=e.extensions;for(var r=0;r<a.length;r++){if(a[r].name===t){return a[r].value}}}return""};var M=function(e,t){return t.filter(function(t){if(t.name===e||"P_"+t.name===e||t.name==="P_"+e||"$Parameter.P_"+t.name===e||t.name==="$Parameter.P_"+e||t.name==="$Parameter."+e||"$Parameter."+t.name===e){return t}})};var E=function(e){return e["sap:filterable"]?e["sap:filterable"]!=="false":true};var N=function(e,t,a){var r=t.filter(function(t){var a=e.some(function(e){return e===t.name});return E(t)&&a})||[];if(a&&a.length>0){e.forEach(function(e){var t="P_"+e.name;if(a.includes(t)){r.push(e)}})}return r};var R=function(e){var t=[];if(e&&e.extensions){t=e.extensions;for(var a=0;a<t.length;a++){if(t[a].name==="parameter"&&t[a].value==="mandatory"){return e.name}else if(t[a].name==="required-in-filter"&&t[a].value==="true"){return e.name}}}};var A=function(e,t){if(t&&t.length){var a=t.filter(function(t){return t.name===e.name});return a&&a[0]}};var _=function(e,t,a,r,n,o,s){var l=s.cardComponentData.mainComponent.oGlobalFilter,p=s.view.getModel("ovpCardProperties"),u=p&&p.getProperty("/bInsightRTEnabled");var c="";if(e["PropertyName"]&&e["PropertyName"]["PropertyPath"]){var v=e["PropertyName"]["PropertyPath"],g=C.getEntityType(l),f=l&&l.getModel(),m=f&&f.getMetaModel(),h=m&&m.getODataEntityType(g),y=l&&l.getConsiderAnalyticalParameters();var P;if(y){P=a.filter(function(e){return e.name===v})[0]}if(!P){P=x(v,h,f,a,s)}if(e["PropertyValue"]&&e["PropertyValue"]["String"]){v=P&&P.name?P.name:v;var b=R(P);var T=i.getParameterActualValue(v,l);var S=i.IsSemanticDateRangeValid(s,P);if(b&&r.includes(b)){n.push(b);if(!S){t[v]={value:u&&T?T:e["PropertyValue"]["String"],type:i.getPropertyType(P),description:P&&P.description?P.description:null,label:i.getLabelForConfigParams(v,l,t,s,e["PropertyValue"]["String"])}}else{c=i.getDateRangeControlValue(v,s)}t[v]["description"]=c||I(P,"description")}else if(b){o.push(b);var D=new d;var O=i.getLabelForConfigParams(v,l,t,s,e["PropertyValue"]["String"])||[];var V="";if(u&&T){V=i.getRelatedTextToRange({Low:T},O,l,v);D.addSelectOption(v,"I","EQ",T,null,V)}else{V=i.getRelatedTextToRange({Low:e["PropertyValue"]["String"]},O,l,v);D.addSelectOption(v,"I","EQ",e["PropertyValue"]["String"],null,V)}var S=i.IsSemanticDateRangeValid(s,P);if(!S){t[v]={value:D.toJSONString(),type:i.getPropertyType(P),description:P&&P.description?P.description:null};t[v].value=i.enhanceVariant(t[v].value)}else{c=i.getDateRangeControlValue(v,s)}t[v]["description"]=c||I(P,"description")}}}};var k=function(e){return e&&e.filter(function(t,a){return e.indexOf(t)===a})};var L=function(e,t){if(!v.isODataV4(t)){return e.property.map(function(e){return e.name})}else{return Object.keys(e.property)}};var j=function(e){var a={filters:{}};var r=a.filters;var n=e.cardComponentData.mainComponent.oGlobalFilter;var o=n&&n.getModel();var s=C.getEntityType(n);var l=e.view.getModel();var c=e.entityType,v,g=[];var f=[],m=[],h=[],y=[],P,b,T=[];var S=[];var D=o&&o.getMetaModel();var O=D&&D.getODataEntityContainer();var V=D&&D.getODataEntityType(s);var w=O&&O.entitySet&&O.entitySet.filter(function(e){return e.entityType===s});var M=w&&w.length>0?w[0]:{};var E=[];if(o){var j=p.checkAnalyticalParameterisedEntitySet(o,M&&M.name);if(j){var H=u.getParametersByEntitySet(o,M);if(H.entitySetName){E=H.parameters||[]}}}var B=u.getParametersByEntitySet(l,e.entitySet).parameters;i.handleConsiderAnalyticalParameters(e,B);var U=e.view.getModel("ovpCardProperties");var J=U&&U.getProperty("/bInsightRTEnabled");var Q="";B.forEach(function(t){var a="";var s=R(t);var p=i.getParameterDefaultValue(o,M,s,e);var u=i.getParameterDefaultValue(l,e.entitySet,s,e);var c=p||u||t.defaultValue||"";var d=i.getParameterActualValue(t.name,n);Q=i.getLabelForConfigParams(t.name,n,r,e,c);var v=i.IsSemanticDateRangeValid(e,t);if(v){var f=d.conditionTypeInfo;var m=f&&f.data&&f.data["operation"];i.setFilterRestrictionToSemanticDateRange(t,true);c=i.getDateRangeDefaultValue(e,t.name)||c;d=i.getDateRangeValueForParameters(d)||d;var y=i.getDateOperationValue(m)||false;if(!y){if(J&&Q&&typeof Q==="string"){Q=Q.substring(0,Q.indexOf("(")-1)}else if(c){Q=c;i.getLabelForConfigParams(t.name,n,r,e,c,true)}}a=i.getDateRangeControlValue(t.name,e)}if(s){h.push(t.name)}r[t.name]={value:J&&d?d:c,type:i.getPropertyType(t),description:a||t&&t.description,label:Q||""};r[t.name]["description"]=a||I(t,"description");g.push(t.name);T.push(t.name)});E=E.filter(function(e){return!T.includes(e)});if(c&&c.property&&V&&V.property){var $=L(c,l);S=N($,V.property,E)}for(var q=0;q<S.length;q++){var W="";var K=S[q],X="";var z=A(K,c.property);var G=R(z);var Y=i.getFilterDefaultValue(K.name,V,c)||K.defaultValue||"";var Z=i.getParameterActualValue(K.name,n);if(T.includes(K.name)){Q=i.getLabelForConfigParams(K.name,n,r,e,Y);var ee=i.IsSemanticDateRangeValid(e,K);if(ee){i.setFilterRestrictionToSemanticDateRange(K,true);Y=i.getDateRangeDefaultValue(e,K.name)||Y;Z=i.getDateRangeValueForParameters(Z)||Z;if(J&&Q&&typeof Q==="string"){Q=Q.substring(0,Q.indexOf("(")-1)}else if(Y){Q=Y;i.getLabelForConfigParams(K.name,n,r,e,Y,true)}W=i.getDateRangeControlValue(K.name,e)}r[K.name]={value:J&&Z?Z:Y,type:i.getPropertyType(K),description:W||K&&K.description,label:Q};if(G){h.push(G)}g.push(K.name)}else{P=new d;var te=i.getLabelForConfigParams(K.name,n,r,e,Y);var Z;var ee=i.IsSemanticDateRangeValid(e,K);if(ee){i.setFilterRestrictionToSemanticDateRange(K,false);i.addDateRangeValueToSV(e,K,Y,P,te);W=i.getDateRangeControlValue(K.name,e)}else{if(J){i.addFiltervalues(n,K.name,P,te)}else if(Y){var ae=i.getRelatedTextToRange({Low:Y},te,n,K.name);P.addSelectOption(K.name,"I","EQ",Y,null,ae)}else{P.addSelectOption(K.name,"I","EQ",X)}}r[K.name]={value:P.toJSONString(),type:i.getPropertyType(K),description:W||K&&K.description};r[K.name].value=i.enhanceVariant(r[K.name].value);if(G){y.push(G)}f.push(K.name)}r[K.name]["description"]=W||I(K,"description")}var re=e.cardComponentData.settings["selectionAnnotationPath"];var ne=e.entityType[re]&&JSON.parse(JSON.stringify(e.entityType[re]));var ie=[],oe;var se;for(var le in ne){if(ne.hasOwnProperty(le)){oe="";var pe=Array.isArray(ne[le])&&ne[le];if(le==="Parameters"){for(var ue=0;pe&&ue<pe.length;ue++){if(pe[ue]["PropertyName"][["PropertyPath"]].includes("/")){var ce=pe[ue]["PropertyName"][["PropertyPath"]].split("/");g.push(ce[ce.length-1])}else{g.push(pe[ue]["PropertyName"][["PropertyPath"]])}oe=pe[ue];_(oe,r,B,T,h,y,e)}}else if(le==="SelectOptions"){ie=ne["SelectOptions"];for(var de=0;pe&&de<pe.length;de++){se=ie[de]["PropertyName"]["PropertyPath"];se=se&&se.replace("/",".");var ve=e.view;var ge=ve.getController();var fe=t.getStaticParams(ge);var me=fe&&fe.sensitiveProperties;if(ie[de].Ranges){if(m.indexOf(se)===-1&&me.indexOf(se)===-1){m.push(se);f.push(se)}}else{f.push(se);oe=pe[de];_(oe,r,B,T,h,y,e)}}b=F(e,m)}}}if(b){b.forEach(function(t){var a=t&&t.PropertyName;var s=i.getLabelForConfigParams(a,n,r,e)||[];var l=t&&t.Ranges||[];l.forEach(function(e){var t=i.getRelatedTextToRange(e,s,n,a);if(t){e.Text=t}});var p={Parameters:[],SelectOptions:[t]};var u=x(a,V,o,B,e);if(u){a=u.name}r[a]={value:JSON.stringify(p),type:i.getPropertyType(u),description:u&&u.description};r[a]["description"]=I(v,"description");var c=R(u);if(c&&T.includes(c)){h.push(c)}else if(c){y.push(c)}})}var he=k(f);var ye=k(g);var Pe=k(h);var be=k(y);i.updateRangeValue(r);r["_relevantODataFilters"]={value:he};r["_relevantODataParameters"]={value:ye};r["_mandatoryODataParameters"]={value:Pe};r["_mandatoryODataFilters"]={value:be};return a};var H=function(e,t,a){var r="";if(t){for(var n=0;n<e.length;n++){r=r+"${"+e[n]+"},"}}if(a){if(t){return"{= extension.formatters.formatValueColor("+r+JSON.stringify(t)+")}"}else if(e.length){return"{= extension.formatters.kpiValueCriticality(${"+e[0]+"})}"}}else{return"{= extension.formatters.formatTrendIcon("+r+JSON.stringify(t)+")}"}};var B=function(e,t,a){var r=e.view.getModel("ovpCardProperties");var n=e.entityType[r.getProperty("/presentationAnnotationPath")];var o=i.getRequestAtLeastFields(n);var s=r.getProperty("/addODataSelect");var l=r.getProperty("/template");if(e){var p,u="";switch(e.cardComponentName){case"Analytical":var c=e.vizFrame;p=c&&c.getParent();u="data";break;case"List":p=e.view.byId("ovpList");u="items";break;case"Table":p=e.view.byId("ovpTable");u="items";break}var d=w(p,u,o,s,l);a["_contentSkipQuery"]={value:d.skip};if(e.cardComponentName==="List"||e.cardComponentName==="Table"){a["_contentTopQuery"]={value:"$top=13"}}else{a["_contentTopQuery"]={value:d.top}}a["_contentSortQuery"]={value:d.sSortParameters};a["_contentSelectQuery"]={value:d.sSelect};a["_contentExpandQuery"]={value:d.sExpandParam}}if(t==="Numeric"){var v=e.view.byId("kpiHBoxNumeric");var g=w(v,"items",o,s,l);a["_headerSkipQuery"]={value:g.skip};a["_headerTopQuery"]={value:g.top};a["_headerSortQuery"]={value:g.sSortParameters};a["_headerSelectQuery"]={value:g.sSelect};a["_headerExpandQuery"]={value:g.sExpandParam}}};var U=function(e,a){var r=e.cardComponentData.settings;var n=e.view;var i=n&&n.getController();var o=i.oCardComponentData&&i.oCardComponentData.mainComponent;var s=b.getEntityNavigationParameters(o,i.getModel(),e.cardComponentData,i.getCardPropertiesModel(),i.getEntityType()).sNavSelectionVariant;s=s?JSON.parse(s):"";var l=s&&s.SelectOptions;var p=r.requireAppAuthorization;var u={},c={},d={},g={};if(p){u=t.getNavigationIntentFromAuthString(p);d=u.parameters}var f=Object.keys(d);if(f.length>0){for(var m=0;m<f.length;m++){if(!Array.isArray(d[f[m]])){c[f[m]]={defaultValue:{value:d[f[m]]}}}}}if(l&&l.length){l.forEach(function(e){var t=e["PropertyName"];var r=a.filters._relevantODataFilters.value.includes(t),n=a.filters._relevantODataParameters.value.includes(e["PropertyName"]);var i;if(e&&t&&!c[t]&&e.Ranges.length&&e.Ranges[0].Option==="EQ"&&!(r||n)){i=e.Ranges[0].Low;if(i!==undefined||i!==null){try{i=JSON.parse(e.Ranges[0].Low)}catch(e){}if(!Array.isArray(i)){c[t]=i}}}})}g={inbounds:{intent:{signature:{additionalParameters:"allowed"}}}};v.updatePropertyValueForObject(g.inbounds.intent,u.semanticObject,"semanticObject");v.updatePropertyValueForObject(g.inbounds.intent,u.action,"action");v.updatePropertyValueForObject(g.inbounds.intent.signature,c&&Object.keys(c).length?c:null,"parameters");return g};var J=function(e,t){if(!e||!t){return}var a=e.getMetaModel();var r=a&&a.getODataEntityContainer();var n=r&&r.entitySet;if(!n||!Array.isArray(n)){return}var i=n.length;for(var o=0;o<i;o++){if(n[o].entityType===t){return n[o].name}}};var Q=function(e,t,a){if(e.startsWith("/sap/opu/odata")&&!e.endsWith(".xml")){return{uri:e,type:"ODataAnnotation"}}else if((!e.startsWith("/sap/opu/odata")||e.startsWith("/sap/opu/odata"))&&e.endsWith(".xml")){if(t&&a["sap.platform.abap"]){var r=a["sap.platform.abap"].uri;if(e.indexOf("./")===0){e=e.replace("./","")}else if(e.indexOf("/")===0){e=e.replace("/","")}else if(e.indexOf("../")===0){e=e.replace("../","")}e=r+"/"+e}return{uri:e,type:"XML"}}};var $=function(e,t){var a=e.cardComponentData.model.sServiceUrl;var r=e.view.getModel();var i;if(!v.isODataV4(r)){i="{{destinations.service}}"+a+"/$batch"}else{i="{{destinations.service}}"+a+"$batch"}var o={};var s=n.getBatchObject(e,t["configuration"]);o["request"]={url:i,method:"POST",headers:{Accept:"multipart/mixed","X-CSRF-Token":"{{csrfTokens.token1}}"},batch:s};if(o.request.batch.header){o.request.batch.header.url="{{parameters._headerDataUrl}}"}o.request.batch.content.url="{{parameters._contentDataUrl}}";if(!s.header){var l=o["request"].batch.content;l.headers["X-CSRF-Token"]="{{csrfTokens.token1}}";if(!v.isODataV4(r)){l.url="{{destinations.service}}"+a+"/"+l.url}else{l.url="{{destinations.service}}"+a+l.url}o["request"]=l}return o};var q=function(e){var t=e.cardComponentData.model.sServiceUrl;var a={};a["parameters"]=j(e)["filters"];a["destinations"]={service:{name:"(default)",defaultUrl:"/"}};a["csrfTokens"]={token1:{data:{request:{url:"{{destinations.service}}"+t,method:"HEAD",headers:{"X-CSRF-Token":"Fetch"}}}}};return a};var W=function(e,t,i){var o=c.getHeaderDetails(e),s=e.cardComponentData.cardId,l=e.cardComponentData.appComponent.getManifestObject().getRawJson(),p=l["sap.ovp"]["cards"][s].settings,u=e.cardComponentData.settings,d=u&&u.selectedKey,g,m=e.view.getModel();B(e,o,t["configuration"]["parameters"]);var h=t.extension&&o==="Numeric"?c.mainIndicatorDetails(e):"";var y=h&&h.path&&h.path.length?c.mainIndicatorNumberPath(h.path,h.ovpProp):"";r.createKeysFromText(s,p.title,"Title","card Title","header.title");r.createKeysFromText(s,p.subTitle,"Title","card subTitle","header.subTitle");var P=h&&h.valueColor?H(h.valueColor.path,h.valueColor.ovpProp,true):null;var b=h&&h.indicator?H(h.indicator.path,h.indicator.ovpProp,false):null;var C=h&&h.target?h.target:null;var T=h&&h.deviation?h.deviation:null;var S="",D,O="",V,w=[],F={},x={};if(C&&C.parts.length){S=c.targetDeviationValuePath(C,e.view.getModel("ovpCardProperties"),"targetValueFormatter");D=e.view.getModel("ovpCardProperties").getProperty("/bPercentageAvailableForTarget")?"%":null;if(S){v.updatePropertyValueForObject(x,h.target.text,"title");v.updatePropertyValueForObject(x,S,"number");v.updatePropertyValueForObject(x,D,"unit");w.push(x)}}if(h&&h.ovpProp){V=c.mainIndicatorNumberPath(h.path,h.ovpProp,true)}if(T&&T.parts.length){O=c.targetDeviationValuePath(T,e.view.getModel("ovpCardProperties"),"returnPercentageChange");x={};if(O){v.updatePropertyValueForObject(x,h.deviation.text,"title");v.updatePropertyValueForObject(x,O,"number");w.push(x)}}var I=a.getUoMForSubTitle(s);if(o!=="Default"){F={type:o,title:p.title,subTitle:p.subTitle,details:c.generateDetailsExpression(t,p,s,d)};v.updatePropertyValueForObject(F,I,"unitOfMeasurement");v.updatePropertyValueForObject(F,w,"sideIndicators");if(y){F["mainIndicator"]={};v.updatePropertyValueForObject(F.mainIndicator,y,"number");v.updatePropertyValueForObject(F.mainIndicator,P,"state");v.updatePropertyValueForObject(F.mainIndicator,b,"trend");v.updatePropertyValueForObject(F.mainIndicator,V,"unit")}g=F}else{g={type:o,title:p.title,subTitle:p.subTitle,details:c.generateDetailsExpression(t,p,s,d)}}if(i){g.data={path:n.getBatchRequestPath("/header/d/results/0",m)}}if(g.details){g.type="Numeric"}if(t["type"]==="List"||t["type"]==="Table"){g.status=f.getHeaderStatus(i,m)}return g};var K=function(e,t){var r=e.cardComponentData.settings;var n;switch(t["type"]){case"Analytical":n=a.createChartContent(e,r.chartAnnotationPath,t);n.chartProperties["title"]=n.title;delete n.title;break;case"List":n=g.getListContent(e,t);break;case"Table":n=m.getTableContent(e,t);break;default:n={};break}return n};var X=function(e){var t={},a=e.cardComponentData.cardId;t["extension"]=O;t["type"]=e.cardComponentName;t["configuration"]=q(e);t["data"]=$(e,t);t["header"]=W(e,t,t["data"].request.batch);t["content"]=K(e,t);var o=i.getSemanticDateConfiguration(e)||{};if(Object.keys(o).length){t["configuration"]["parameters"]["_semanticDateRangeSetting"]={value:JSON.stringify(o)}}r.replaceStringsWithKeys(t,a);var s=e.view.getModel("ovpCardProperties");var l=s&&s.getProperty("/bInsightDTEnabled");if(l){n.updateBatchObject(e,t["configuration"],true)}return t};var z=function(e){var t=e.cardComponentData.appComponent.getManifest()["sap.app"],a=t.id,n=e.cardComponentData.settings,i=e.cardComponentData.cardId,o=e.cardComponentData.appComponent.getManifestObject().getRawJson(),s=o["sap.app"].i18n&&o["sap.app"].i18n.bundleUrl||o["sap.app"].i18n,l=o["sap.platform.abap"]&&o["sap.platform.abap"].uri,p=n&&n.selectedKey,u=e.view.getModel("ovpCardProperties"),c=u&&u.getProperty("/bInsightRTEnabled"),d=u&&u.getProperty("/bInsightDTEnabled");var v=o["sap.fiori"]&&o["sap.fiori"].registrationIds&&o["sap.fiori"].registrationIds[0]||a,g=p?v+".cards."+i+".tab_"+p:v+".cards."+i;var f=p?"../../../":"../../";V=f+s;if(l){if(l.startsWith("/")){l=l.substring(1)}s=l+"/"+s}if(c){g="user."+g+"."+Date.now()}var m;if(c){m={title:t&&t.title||"",subtitle:t&&(t.subtitle||t.description)||""}}else{m=r.getKeysForAppProperties(t,o,e)}var h=m&&m.title,y=m&&m.subtitle,P=j(e),b={id:g,type:"card",embeddedBy:f,tags:{keywords:["Analytical","Card","Line","Sample"]},crossNavigation:U(e,P),dataSources:{}};if(d){b.i18n=f+s}if(h){b.title=h}if(y){b.subTitle=y}var C=e.cardComponentData.appComponent.getManifest()["sap.ovp"];var T=C.globalFilterModel;var S=e.cardComponentData.appComponent.getManifest()["sap.ui5"].models[T].dataSource;var D=t.dataSources;var O=D[S];var w={},F=[],x="",I;if(O&&O.settings){var M=O.settings.annotations,E;M.length&&M.forEach(function(e){for(var t in D){E=D[e].uri;if(t===e&&E){F.push(t);w[t]=Q(E,c,o);break}}});if(O&&O.uri){I=Q(O.uri,c,o)}x=O.settings&&O.settings["odataVersion"]}b.dataSources=w;b.dataSources["filterService"]={uri:O&&O.uri,settings:{annotations:F,odataVersion:x?x:"2.0"},type:I&&I.type};return b};var G=function(e){var t=e.cardComponentData.appComponent.getManifest()["sap.app"],a=t.id,r=e.cardComponentData.appComponent.getManifest()["sap.ovp"],n=e.view.getModel("ovpCardProperties"),i=n&&n.getProperty("/bInsightRTEnabled"),o="",s=e.cardComponentData.mainComponent.oGlobalFilter,l=C.getEntityType(s),p=e.cardComponentData.mainComponent.getOwnerComponent(),u=p.oOvpConfig.sapUICoreVersionInfo||{};if(!r.globalFilterEntitySet){o=J(s&&s.getModel(),l)}return{templateName:"OVP",parentAppId:a,filterEntitySet:r.globalFilterEntitySet?r.globalFilterEntitySet:o,cardType:i?"RT":"DT",versions:{ui5:u.version+"-"+u.buildTimestamp}}};var Y=function(e){var t={};t["sap.card"]=X(e);t["sap.app"]=z(e);t["sap.insights"]=G(e);var a=P.getCardActions(e,t["sap.card"]);return a.then(function(a){if(a.header.enabled){t["sap.card"].header.actions=a.header.actions}if(a.content.enabled){switch(e.cardComponentName){case"Analytical":t["sap.card"].content.actions=a.content.actions;break;case"List":t["sap.card"].content.item.actions=a.content.actions;break;case"Table":t["sap.card"].content.row.actions=a.content.actions;break}}i.resetSemanticDateRangeConfig();return t})};var Z=function(e,t,a){var r=e["sap.card"]["header"][a];if(r&&r.startsWith("{{")){var n=r.split("{{")[1].split("}}")[0];var i=t.view.getModel("@i18n")||t.view.getModel("i18n");r=i?i.getProperty(n):undefined}return r?r:""};var ee=function(e,t,a,r){r.valueState=t;r.valueStateText=a;e.setValueState(r.valueState);e.setValueStateText(r.valueStateText)};var te={createManifestFor:Y,downloadCardManifest:function(e){},createCard:function(e){var t=Y(e);var a=window.location.origin,r=a+"/resources",n=this;return t.then(function(e){return new Promise(function(t,a){try{if(!n.integrationLib){n.integrationLib=S.load({name:"sap.ui.integration"})}return n.integrationLib.then(function(){sap.ui.require(["sap/ui/integration/widgets/Card"],function(a){var n=new a({height:"533px",width:"314px",manifest:e,baseUrl:r});t(n)})}).catch(function(e){D.error("Failed to get sap.ui.integration"+e);a(e)})}catch(e){D.error("Failed to get sap.ui.integration"+e);a(e)}})})},UpdateManifestDeltaChanges:function(e,t,a,i){var o={_version:"1.1.0",contentDensities:{compact:true,cozy:true},dependencies:{libs:{"sap.insights":{lazy:false}}}};e["sap.ui5"]=o;n.enhanceHeaderAndContentURLForSemanticDate(e["sap.card"]);n.enhanceHeaderAndContentURL(e["sap.card"]);var s=t.view.getModel("ovpCardProperties");var l=s&&s.getProperty("/bInsightRTEnabled");var p=s&&s.getProperty("/bInsightDTEnabled");if(p){if(e["sap.app"]["i18n"]!==V){e["sap.app"]["i18n"]=V}var u=Z(e,t,"title");var c=Z(e,t,"subTitle");var d=T.getElementById(a+"--titleTextInput");if(d&&d.getValue()){var g=T.getElementById(a+"--subTitleTextInput");var f=t.cardComponentData.cardId;if(this.titleChanged&&d.getValue()!==u){r.createKeysFromText(f,d.getValue(),"Title","card Title","header.title");this.titleChanged=false}var m=g.getValue();var h=g&&m&&this.subTitleChanged&&m!==c;if(h){r.createKeysFromText(f,m,"Title","card subTitle","header.subTitle");this.subTitleChanged=false}else if(g&&!m){this.subTitleChanged=false;delete e["sap.card"].header.subTitle}}r.inserti18nKeysManifest(e["sap.card"]);r.writei18nPayload();n.updateBatchObject(t,e["sap.card"]["configuration"],false);if(i==="Download"){this.downloadCardManifest(e)}r.reseti18nProperties()}else if(l){var y=t.view.getModel("@i18n")||t.view.getModel("i18n");if(e["sap.card"].type==="Analytical"){e["sap.card"]["content"].chartProperties.title.text=r.getI18nValueOrDefaultString(e["sap.card"]["content"].chartProperties.title.text,y)}else if(e["sap.card"].type==="Table"){var b=e["sap.card"].content.row.columns;if(Array.isArray(b)&&b.length){b.forEach(function(e,t){b[t].title=r.getI18nValueOrDefaultString(e.title,y)})}}else if(e["sap.card"].type==="List"){var C=e["sap.card"]["content"];var S=(((C||{}).item||{}).info||{}).value;var D=S&&S.split(",").slice(-1);var O=D&&D[0]&&D[0].split("/")[1];var w=e["sap.card"].configuration.parameters;var F=w[O]&&w[O].value;if(F&&F.startsWith("{{")){w[O].value=y.getProperty(O)}}r.fnReplacei18nKeysWithText(e,y);var x=P.checkCustomNavigationForCard(t);if(x){return v.getCurrentAppIntent().then(function(a){var r=e["sap.card"].configuration.parameters;var n=P.getOVPDefaultActions(a);if(t.cardComponentName==="Analytical"){if(r.state){r.state.value=n}}else{if(r.headerState){r.headerState.value=n}if(r.lineItemState){r.lineItemState.value=n}}return Promise.resolve(e)})}}return Promise.resolve(e)},showCard:function(e){var t=e.view.getModel("ovpCardProperties"),a=t&&t.getProperty("/bInsightRTEnabled"),n=t&&t.getProperty("/bInsightDTEnabled"),i=P.checkCustomNavigationForCard(e),p;if(i){p={type:"Warning",text:o.getText("CARD_MESSAGE_INFO")}}if(a){var u=Y(e);return u.then(function(t){return this.UpdateManifestDeltaChanges(t,e).then(function(){return h.getServiceAsync("UIService").then(function(e){return e.showCardPreview(t,false,p).then(function(){return Promise.resolve(t)})}).catch(function(e){y.show(e.message)})})}.bind(this)).catch(function(e){D.error(e);return Promise.reject(e)})}else if(n){return this.createCard(e).then(function(t){var a=t.getManifest();return new Promise(function(n,i){var p=o.oResourceModel,u=Z(a,e,"title"),c=Z(a,e,"subTitle"),d={draggable:true,cardTitle:u,cardSubTitle:c,valueState:u?"None":"Error",valueStateText:u?"":o.getText("INT_Preview_Title_ValueStateText")},g=new l({dialogSettings:d}),f=v.getApp().getOwnerComponent(),m=f.createId("integrationCardPreview");this.handleCancel=function(){this.previewDialogPromise.then(function(e){e.close();r.reseti18nProperties();e.destroy();this.titleChanged=false;this.subTitleChanged=false}.bind(this))};this.handleTitleLiveChange=function(e){var a=e.getSource();var r=a.getValue();this.previewDialogPromise.then(function(){if(r&&t.getCardHeader().getTitle()!==r){ee(a,"None","",d);t.getCardHeader().setTitle(r);this.titleChanged=true}else if(!r){this.titleChanged=true;ee(a,"Error",o.getText("INT_Preview_Title_ValueStateText"),d)}else{ee(a,"None","",d)}}.bind(this))};this.handleSubTitleLiveChange=function(e){var a=e.getSource();var r=a.getValue();this.previewDialogPromise.then(function(){if(t.getCardHeader().getSubtitle()!==r){t.getCardHeader().setSubtitle(r);this.subTitleChanged=true}}.bind(this))};this.confirmActionHandler=function(){var t=T.getElementById(m+"--titleTextInput");var r=t&&t.getValue()&&t.getValue().trim();if(r.length===0){ee(t,"Error",o.getText("INT_Preview_Title_ValueStateText"),d);t.focus()}else{this.previewDialogPromise.then(function(t){this.UpdateManifestDeltaChanges(a,e,m,"Create").then(function(){t.close();t.destroy();n(a)}).catch(function(e){y.show(e.message)})}.bind(this))}};this.downloadCardManifestHandler=function(){this.previewDialogPromise.then(function(t){this.UpdateManifestDeltaChanges(a,e,m,"Download").then(function(){t.close();t.destroy();n(a)}).catch(function(e){y.show(e.message)})}.bind(this))};this.previewDialogPromise=s.load({id:m,type:"XML",name:"sap.ovp.insights.Preview",controller:this}).then(function(a){a.setModel(g);a.setModel(e.view.getModel("i18n"),"i18n");a.setModel(p,"ovpResourceModel");var r=T.getElementById(m+"--subFlexBoxNew");r.addItem(t);this.titleChanged=false;this.subTitleChanged=false;if(e.cardComponentName!=="Analytical"){T.getElementById(m+"--ovpIntPreviewOverflowLayer").setVisible(true)}a.open();return a}.bind(this)).catch(function(e){D.error("Integration card preview fragment failed to load, "+e)})}.bind(this))}.bind(this)).catch(function(e){D.error(e);return Promise.reject(e)})}},getFilterDetails:j};return te},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/insights/helpers/AnalyticalCard", ["sap/ovp/cards/generic/base/analytical/Utils","sap/ovp/insights/helpers/i18n","sap/ovp/insights/helpers/Batch","sap/ovp/app/OVPUtils","sap/ovp/cards/CommonUtils","sap/ovp/helpers/ODataAnnotationHelper","sap/ovp/helpers/ODataDelegator"],function(e,t,a,r,n,i,s){"use strict";var o={},l=0,u=0,p={},g={},c={};function d(e,t){if(o&&!o[e]){o[e]=t}else{o[e]=r.merge(true,{},o[e],t)}}function f(){l=0;u=0;p={}}function v(e,t){var a=e&&e.getFeeds(),r;for(var n=0;n<a.length;n++){if(a[n]&&a[n].getValues()&&a[n].getValues().indexOf(t)>-1){r=n;p[r]=p[r]+1||0}}return{sFeedNo:r,count:p[r]}}function h(e,t,a){if(!g[e]){g[e]={}}g[e][t]=a}function y(e,t){if(g){if(g[e]){return g[e][t]}}}function m(e,t){c[e]=t}function P(e){return c&&c[e]}function T(t,a,r,n){if(t==="date"){var i=s.getPropertyFromEntityType(a,r,n);var o=e.getSemanticProperties(i);var l=o&&o.propertyType;if(l){var u={propertyType:l};return"{= extension.formatters.formatDateValue(${"+a+"},"+JSON.stringify(u)+")}"}return"{= format.dateTime(${"+a+"}, {pattern: 'YYYY-MM-dd'}) }"}return"{"+a+"}"}function V(e,t,a){if(a){return a}else if(t){return"{"+t+"}"}else{return e.getProperty("displayValue")||""}}function M(e,r,s){var p=e.entityType,g=e.vizFrame,c=e.cardComponentData.cardId,d=e.view,h=a.getBatchObject(e,s["configuration"]),m=d.getModel();var P=i.getRecords(p,r,m);var M=P.Title&&P.Title.String||"",b=g.getVizType(),_=c,D=c,F,z;if(!M&&g.getVizProperties()&&g.getVizProperties().title&&g.getVizProperties().title.text){M=g.getVizProperties().title.text}if(M&&!M.startsWith("{")){F=M.replace(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/g,"");F=c+"_"+F.replace(/ /g,"_");z=M;t.seti18nValueToMap("content.chartProperties.title.text","{{"+F+"}}",true);t.inserti18nPayLoad(c,F,M,"Title","chart Title")}else if(M.includes("@i18n&gt;")){var B=M.split("@i18n&gt;");z="{{"+B[1]+"}"}else if(M.includes("@i18n>")){var B=M.split("@i18n>");z="{{"+B[1]+"}"}var O=function(e,a,r){return function(n){var i=n.getBinding("displayValue"),s=i&&i.getPath(),o=n.getBinding("value"),u=o&&o.getPath(),p=n.getName(),g=p.replace(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/g,"");var c="";if(u){c=y(a,u)}e=e+"_"+g.replace(/ /g,"_")+"_"+l;t.inserti18nPayLoad(a,e,p,"Label","chart dimension name");t.seti18nValueToMap("content.dimensions."+l+".label","{{"+e+"}}",true);var d=n.getParent().getParent(),f=v(d,p);t.seti18nValueToMap("content.feeds."+f.sFeedNo+".values."+f.count,"{{"+e+"}}",true);l=l+1;return{label:p,value:T(n.getProperty("dataType"),u,r,o.getModel()),dataType:n.getProperty("dataType"),displayValue:V(n,s,c)}}};var x=function(e){return function(a){var r=a.getBinding("value"),i=r&&r.getPath(),s=a.getName(),o=s.replace(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/g,"");if(n.isODataV4(r.getModel())){i=i+"Aggregate"}e=e+"_"+o.replace(/ /g,"_")+"_"+u;t.inserti18nPayLoad(c,e,s,"Label","chart measure name");t.seti18nValueToMap("content.measures."+u+".label","{{"+e+"}}",true);var l=a.getParent().getParent(),p=v(l,s);t.seti18nValueToMap("content.feeds."+p.sFeedNo+".values."+p.count,"{{"+e+"}}",true);u=u+1;return{label:s,value:"{"+i+"}"}}};f();var N={chartType:b,chartProperties:o&&o[g&&g.getId()]||{},title:{text:z,visible:true,alignment:"left"},dimensions:g.getDataset().getDimensions().map(O(D,c,p)),measures:g.getDataset().getMeasures().map(x(_)),feeds:g.getFeeds().map(function(e){return{type:e.getType(),uid:e.getUid(),values:e.getValues()}}),data:{path:a.getBatchRequestPath("/content/d/results",m)},actionableArea:"Chart"};if(!h.header){N.data.path=a.getBatchRequestPath("/d/results",m)}return N}return{setVizPropertyMap:d,setDimensionPath:h,setUoMForSubTitle:m,getUoMForSubTitle:P,createChartContent:M}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/insights/helpers/Batch", ["sap/fe/navigation/SelectionVariant","sap/ui/model/Filter","sap/ovp/insights/helpers/Filters","sap/ovp/app/FilterHelper","sap/base/security/encodeURL","sap/ovp/cards/CommonUtils","sap/ui/model/odata/ODataUtils","sap/ui/model/FilterProcessor","sap/ovp/cards/MetadataAnalyser","sap/ovp/handlers/SmartFilterbarHandler"],function(t,e,a,r,n,i,l,o,s,u){"use strict";var f={contentDataUrlUpdated:false,headerDataUrlUpdated:false};function v(t,e){var a=t.split(/\?/);var r=a[1]&&a[1].replace(/^.*\?/,"").split(/&/);var n="";r&&r.forEach(function(t){if(t.indexOf(e)===-1){if(n.length===0){n+=t}else{n+="&"+t}}});return a[0]+(n!==""?"?"+n:"")}function d(t,e){if(t&&e){if(t.indexOf("?")===-1){t+="?"+e}else{t+="&"+e}}return t}function p(t,e){var a=t.split(/\?/);if(a.length>1){var r=a[1].replace(/^.*\?/,"").split(/&/);var n=r.filter(function(t){return t.includes(e)});return n.length===1?n[0]:""}return""}function g(t,e,a,r){if(r){var n=a&&a._oFilterProvider;var l=n&&n._oParameterization;var o=l&&l.getNavigationPropertyToQueryResult();return{_entitySet:{value:l&&l.getName()},_urlSuffix:{value:"/"+o}}}else{var s=e&&e.getModel(),u=s&&s.getMetaModel(),f="";if(!i.isODataV4(s)){var v=u&&u.getODataEntityContainer(),d=t&&t.startsWith("/")?t.substr(1):t,p=v&&v["entitySet"];p=p.filter(function(t){return t&&t.name&&d&&d.startsWith(t.name)});f=p[0]&&p[0].name}else{f=e.oCardComponentData.settings.entitySet}var g=t.split("/").length>2?t.substring(t.lastIndexOf("/")):"";return{_entitySet:{value:f},_urlSuffix:{value:g}}}}function c(t){var e=t.cardComponentData.mainComponent;var a=t.view.getController();var r=e.getGlobalFilter();var n=a.getCardItemsBinding().getPath();var i;if(r&&r.getConsiderAnalyticalParameters()){var l=r.getAnalyticBindingPath();var o=a.getEntitySet().entityType;var f=u.getEntityType(r);if(l&&l.length>0){if(o===f){i=g(l,a,r,true);return{sPath:l,_entitySet:i._entitySet,_urlSuffix:i._urlSuffix}}}else{var v=a.getCardPropertiesModel().getProperty("/selectionAnnotationPath");var d=t.entityType[v];var p=s.resolveParameterizedEntitySet(a.getModel(),t.entitySet,d);i=g(p,a,r,false);return{sPath:p,_entitySet:i._entitySet,_urlSuffix:i._urlSuffix}}}i=g(n,a,r,false);return{sPath:"",_entitySet:i._entitySet,_urlSuffix:i._urlSuffix}}function h(t,e){var a=e.oMainComponent,r=a.getGlobalFilter(),n=r&&r.getAnalyticBindingPath();var l=e.getModel();var o=l.getMetaModel();if(!i.isODataV4(l)){var s=e.getEntityType().name;var f=o.getODataEntityContainer();var v=f.entitySet.filter(function(t){return t.entityType===f.namespace+"."+s});var d=v.length>0?v[0]:{}}else{var s=e.oCardComponentData.settings.entitySet;var f=o.getObject("/");var d=f[s];d.entityType=d.$Type}if(r&&r.getConsiderAnalyticalParameters()){var n=r.getAnalyticBindingPath();var p,g,c;if(n&&n.length>0){if(d.entityType===u.getEntityType(r)){g=t;p=t.indexOf("$");if(p>0){g=t.substring(0,p-1)}c=n;if(c.startsWith("/")){c=c.slice(1)}if(g!==c){t=t.replace(g,c)}}else{var h=a._getParametersFromEntityPath(t);var m=a._getParametersFromEntityPath(n);var y,_,U;var D={};if(h&&h.length>0){var S=a._getEntityTypeFromPath(l,t,D.context,true);for(var P=0;P<m.length;P++){y=a._getPropertyMapping(h,m[P].name,S.name,u.getEntityType(r),l,r.getModel());if(y){_=y+"=.*?[,)]";U=t.match(new RegExp(_));if(U&&U.length>0){g=U[0].slice(0,-1);c=y+"="+m[P].sValue;if(g!==c){t=t.replace(g,c)}}}}}}}}return t}function m(t,e,a,r){var i=t.view.getModel("ovpCardProperties");var l=i&&i.getProperty("/bInsightRTEnabled");var o="";if(l||r){o+=D(t)}else{o+=y(t,e)}var s=p(a,"$filter");if(s.length>0){s=decodeURIComponent(s);s=s.replace("$filter=","");s=!s.startsWith("(")?"("+s+")":s}if(o.length>0&&s.length>0){o=!o.startsWith("(")?"("+o+")":o;o+=" and "}o+=s;if(o.length!==0){return"$filter="+n(o)}return""}function y(r,n){var i=r.cardComponentData.mainComponent;var l=i.getGlobalFilter();var o=l&&l.getUiState();var s=l&&l.determineMandatoryFilterItems();var u=n.parameters._mandatoryODataFilters.value;var f=new t(o&&o.getSelectionVariant());if(!s||s.length===0||(!u||u.length===0)){return""}else{var v=[];for(var d=0;d<u.length;d++){var p=u[d];var g=f.getSelectOption(p);var c=new e(g);var h=c.aFilters&&c.aFilters.length||0;var m=[];for(var y=0;y<h;y++){var _=c.aFilters[y];var U=a.getSingleFilterValue(_,p);if(U.length>0){m.push(U)}}if(m.length>0){var D=m.join(" or ");D="("+D+")";v.push(D)}}return v.length>0?v.join(" and "):""}}function _(t,e){t&&t.forEach(function(t){if(t&&t.getFilters()){_(t.getFilters(),e)}else if(t&&t.getPath()&&e.indexOf(t.getPath())===-1){e.push(t.getPath())}});return e}function U(t,e){if(t&&e){var a=t&&t.property.filter(function(t){return e.indexOf(t.name)>-1})||[];a.forEach(function(t){var e=t.type||"";if(!e.startsWith("Edm")){t.type="Edm."+t.type}})}}function D(t){var e=t.view;var a=e.getController();var n=a.getEntityType(),i=a.oMainComponent.getGlobalFilter(),s=i&&i.getModel(),u=a.getView().getModel("ovpCardProperties"),f=u&&u.getProperty("/entityType"),v=f&&f.name,d=a.oMainComponent.aFilters;if(n&&s&&v){var p=r.getEntityRelevantFilters(n,d,v,s);if(p.length){var g=o.groupFilters(p),c=_(p,[]),h=e&&e.getModel()&&e.getModel().oMetadata;U(n,c);var m=l.createFilterParams(g,h,n);if(m.length){m=m.replace("$filter=","");m=decodeURIComponent(m);return m}return""}}return""}function S(t,e,a,r){var n=t.view;if(!n){return{}}var l=t.cardComponentData.model.sServiceUrl;var o=n.getController();var s=a?o.getKPIBinding():o.getCardItemsBinding();var u=s&&s.sRangeParams||"";if(t.cardComponentName==="List"||t.cardComponentName==="Table"){u="$skip=0&$top=13"}var f=c(t);var g=s&&s.getDownloadUrl()||"";var y;if(g){g=v(g,"sap-client");g=v(g,"_requestFrom");if(!i.isODataV4(n.getModel())){g=g.split(l+"/")[1]}else{g=g.split(l)[1]}g=h(g,o);y=m(t,e,g,r);if(y.length>0){g=v(g,"$filter");g=d(g,y)}var _=p(g,"$inlinecount");if(_.length===0&&(t.cardComponentName==="List"||t.cardComponentName==="Table")&&!i.isODataV4(n.getModel())){var U="$inlinecount=allpages";g=d(g,U)}if(u){g=d(g,u)}}return{sPath:g,_entitySet:f._entitySet,_urlSuffix:f._urlSuffix}}function P(t,e,a){if(!f.headerDataUrlUpdated){var r=this._getRequestUrlAndEntityInfo(t,e,true,a);e["parameters"]["_headerDataUrl"]={value:r.sPath}}if(!f.contentDataUrlUpdated){var n=this._getRequestUrlAndEntityInfo(t,e,false,a)||"";e["parameters"]["_contentDataUrl"]={value:n.sPath}}f.contentDataUrlUpdated=false;f.headerDataUrlUpdated=false}function C(t,e){var a=t.cardComponentData.settings,r=t.entitySet.name||a.entitySet,n={};if(r.endsWith("Results")){r=r.replace("Results","")}if(a.dataPointAnnotationPath||a.kpiAnnotationPath){var i=this._getRequestUrlAndEntityInfo(t,e,true)||"";e["parameters"]["_headerDataUrl"]={value:i.sPath};if(i.sPath){n.header={method:"GET",url:i.sPath,headers:{Accept:"application/json","Accept-Language":"{{parameters.LOCALE}}"},retryAfter:30}}}var l=this._getRequestUrlAndEntityInfo(t,e,false)||"";e["parameters"]["_contentDataUrl"]={value:l.sPath};if(l.sPath){n.content={method:"GET",url:l.sPath,headers:{Accept:"application/json","Accept-Language":"{{parameters.LOCALE}}"}}}if(l._entitySet||l._urlSuffix){e["parameters"]["_entitySet"]=l._entitySet;e["parameters"]["_urlSuffix"]=l._urlSuffix}return n}function F(t){var e=t.configuration.parameters;var a=e._mandatoryODataParameters.value;var r=e._mandatoryODataFilters.value;var n=r.some(function(t){var a=e[t]&&e[t].value;var r=true;if(a&&i.isJSONData(a)){a=JSON.parse(a);var n=a&&a["SelectOptions"];n.forEach(function(t){if(t&&t["Ranges"]&&t["Ranges"].length>0){r=false}});return r}return false});var l=a.some(function(t){return e[t]&&!e[t].value});if(n||l){if(!e._headerDataUrl){e._headerDataUrl={value:""}}if(!e._contentDataUrl){e._contentDataUrl={value:""}}e._headerDataUrl.value="";e._contentDataUrl.value="";f.headerDataUrlUpdated=true;f.contentDataUrlUpdated=true}}function E(t){var e=t&&t.data&&t.data.request,a=t&&t.configuration.parameters._headerDataUrl,r=t&&t.configuration.parameters._contentDataUrl,n=t.configuration.parameters._semanticDateRangeSetting;if(e&&e.batch&&n){var i=e.batch.header||{},l=e.batch.content||{};i.url="{= extension.formatters.formatHeaderDataUrlForSemanticDate() }";a.value="";l.url="{= extension.formatters.formatContentDataUrlForSemanticDate() }";r.value="";f.headerDataUrlUpdated=true;f.contentDataUrlUpdated=true}else if(e&&e.url&&n){e.url="{= extension.formatters.formatContentDataUrlForSemanticDate() }";r.value="";f.contentDataUrlUpdated=true}}function O(t,e){if(!i.isODataV4(e)){return t}else{return t.replace("d/results","value")}}function x(t,e){if(!i.isODataV4(e)){return t}else{return t.replace("d/__count","@odata.count")}}return{_getQueryParam:p,_removeQueryParam:v,_getRequestUrlAndEntityInfo:S,getBatchObject:C,enhanceHeaderAndContentURL:F,updateBatchObject:P,enhanceHeaderAndContentURLForSemanticDate:E,getBatchRequestPath:O,getBatchResultCount:x}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/insights/helpers/CardAction", ["sap/ovp/app/NavigationHelper","sap/ovp/cards/CommonUtils","sap/ovp/cards/NavigationHelper","sap/ovp/app/OVPLogger"],function(e,t,a,r){"use strict";var i=new r("OVP.insights.helpers.CardAction");return{getCardActions:function(r,n){var o={header:{enabled:false,actions:[]},content:{enabled:false,actions:[]}};var s=false,c=false;var m=r.view;var p=m.getController();var l=this.checkCustomNavigationForCard(r);if(r.cardComponentName==="Analytical"){c=!a.checkHeaderNavigationDisabledForAnalyticalCard(p.getCardPropertiesModel())}s=e.bCheckNavigationForCard(p);if(!s){return Promise.resolve(o)}var u=e.getNavigationParameters(p,r);return u.then(function(e){if(e===undefined){return o}if(r.cardComponentName==="List"||r.cardComponentName==="Table"){c=e["semanticObject"]&&e["action"]}var a={ibnTarget:{},ibnParams:{}};var i={type:"Navigation"};var s={type:"Navigation"};if(e&&e.type==="url"){a={type:"Navigation",parameters:{target:"_self"}};t.updatePropertyValueForObject(a.parameters,e.url,"url")}else{if(e.semanticObject||e.action||e.staticParams){a.ibnTarget={semanticObject:e.semanticObject,action:e.action};if(!n.configuration.parameters.state&&r.cardComponentName==="Analytical"){n.configuration.parameters.state={value:""}}var m=[];if(e.staticParams){if(e.staticParams.sNavPresentationVariant){a.ibnParams.presentationVariant=e.staticParams.sNavPresentationVariant}if(e.staticParams.sensitiveProperties){m=e.staticParams.sensitiveProperties}var p=e.staticParams.staticPropertyMap;var u=p&&Object.keys(p)||[];for(var v=0;v<u.length;v++){if(u[v]&&p[u[v]]&&!m.includes(u[v])){a.ibnParams[u[v]]=p[u[v]]}}}a.sensitiveProps=m}}o.content.enabled=true;o.content.actions.push(s);if(c){o.header.enabled=true;o.header.actions.push(i)}if(r.cardComponentName==="Analytical"){var g="{= extension.formatters.getNavigationContext(${parameters>/state/value})}";t.updatePropertyValueForObject(i,g,"parameters");if(!l){g="{= extension.formatters.getNavigationContext(${parameters>/state/value}, ${})}"}t.updatePropertyValueForObject(s,g,"parameters");n.configuration.parameters.state.value=JSON.stringify(a)}else{if(a.ibnTarget["semanticObject"]&&a.ibnTarget["action"]){t.updatePropertyValueForObject(i,"{= extension.formatters.getNavigationContext(${parameters>/headerState/value})}","parameters");n.configuration.parameters.headerState={value:""};n.configuration.parameters.headerState.value=JSON.stringify(a);e["lineItemSemanticObject"]=e["lineItemSemanticObject"]||a.ibnTarget["semanticObject"];e["lineItemAction"]=e["lineItemAction"]||a.ibnTarget["action"]}if(e["lineItemSemanticObject"]&&e["lineItemAction"]){a.ibnTarget["semanticObject"]=e["lineItemSemanticObject"];a.ibnTarget["action"]=e["lineItemAction"];var f="{= extension.formatters.getNavigationContext(${parameters>/lineItemState/value})}";if(!l){f="{= extension.formatters.getNavigationContext(${parameters>/lineItemState/value}, ${})}"}t.updatePropertyValueForObject(s,f,"parameters");n.configuration.parameters.lineItemState={value:""};n.configuration.parameters.lineItemState.value=JSON.stringify(a)}}return o}).catch(function(e){i.error(e)})},checkCustomNavigationForCard:function(e){var t=e&&e.cardComponentData.settings,a=t&&!!t.customParams,r=e&&e.view.getController(),i=r&&r.oCardComponentData&&r.oCardComponentData.mainComponent,n=i&&!!i.doCustomNavigation;return a||n},getOVPDefaultActions:function(e){var t={ibnTarget:{semanticObject:e.semanticObject,action:e.action},ibnParams:{},sensitiveProps:[]};return JSON.stringify(t)}}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/insights/helpers/CardHeader", ["sap/ovp/insights/helpers/i18n","sap/ovp/app/resources"],function(t,e){"use strict";function a(e,a,r,i){var n=e.data.request.batch&&e.data.request.batch.header;if(i&&i>0){var o="";if(a.valueSelectionInfo&&n||a.description){var s=t.createKeysFromText(r,a.valueSelectionInfo||a.description,"Label","card valueselection info","header.details");var l=s.isNew?s.text:s.key;var p=s.key;e.configuration.parameters._detailsString1={value:l};t.seti18nValueToMap("configuration.parameters._detailsString1.value",p,s.isNew);o="{{parameters._detailsString1}} | "}var d=t.createKeysFromText(r,a.tabs[i-1].value,"Label","card view switch text","header.details");var u=d.isNew?d.text:d.key;var c=d.key;e.configuration.parameters._detailsString2={value:u};t.seti18nValueToMap("configuration.parameters._detailsString2.value",c,d.isNew);o=o+"{{parameters._detailsString2}}";t.seti18nValueToMap("header.details",o,false);return o}if(a.valueSelectionInfo&&n||a.description){t.createKeysFromText(r,a.valueSelectionInfo||a.description,"Label","card valueselection info","header.details")}return n&&a.valueSelectionInfo?a.valueSelectionInfo:a.description}function r(t){var e={path:[]};if(t&&t.parts){for(var a=0;a<t.parts.length;a++){if(t.parts[a].path){e.path.push(t.parts[a].path)}else if(t.parts[a].model=="ovpCardProperties"){e.ovpProp=t.parts[a].value}}return e}}function i(t){var e=t.getBindingInfo?t.getBindingInfo("text").parts:"";var a=[];a[0]=e&&e.length?e[0].path:"";a[1]=e&&e.length>1?e[1].path:"";if(a.length){return a}else{return[]}}function n(t){if(t.cardComponentData.settings.dataPointAnnotationPath||t.cardComponentData.settings.kpiAnnotationPath){return"Numeric"}else if(t.cardComponentData.settings.tabs){return t.cardComponentData.settings.tabs[0].dataPointAnnotationPath||t.cardComponentData.settings.tabs[0].kpiAnnotationPath?"Numeric":"Default"}return"Default"}function o(a){var n=a.cardComponent.getRootControl();var o=n.byId("kpiNumberValue");if(o){var s=o.getBindingInfo?o.getBindingInfo("value"):"";var l=o.getBindingInfo?o.getBindingInfo("valueColor"):"";var p=o.getBindingInfo?o.getBindingInfo("indicator"):""}var d=n.byId("ovpTargetValue");var u=n.byId("kpiNumberPercentage");var c={path:[]};if(s&&s.parts){for(var g=0;g<s.parts.length;g++){if(s.parts[g].path){c.path.push(s.parts[g].path)}else if(s.parts[g].model=="ovpCardProperties"){c.ovpProp=s.parts[g].value}}c.valueColor=l?r(l):"";c.indicator=p?r(p):""}if(d){c.target={parts:[],text:e.getText("KPI_Target_Text")};c.target.parts=c.target.parts.concat(i(d));var f=a.cardComponentData.cardId+"_"+"KPI_Target_Text";t.seti18nValueToMap("header.sideIndicators.0.title","{{"+f+"}}",true);t.inserti18nPayLoad(a.cardComponentData.cardId,f,e.getText("KPI_Target_Text"),"Label","target Label")}if(u){c.deviation={parts:[],text:e.getText("KPI_Deviation_Text")};c.deviation.parts=c.deviation.parts.concat(i(u));var v=a.cardComponentData.cardId+"_"+"KPI_Deviation_Text";if(d){t.seti18nValueToMap("header.sideIndicators.1.title","{{"+v+"}}",true)}else{t.seti18nValueToMap("header.sideIndicators.0.title","{{"+v+"}}",true)}t.inserti18nPayLoad(a.cardComponentData.cardId,v,e.getText("KPI_Deviation_Text"),"Label","deviation label")}return c}function s(t,e,a){if(t.parts.length>1&&t.parts[1]){return"{= extension.formatters."+a+"(${"+t.parts[0]+"}, ${"+t.parts[1]+"},{NumberOfFractionalDigits:"+e.getProperty("/iNumberOfFractionalDigits")+", manifestTarget:"+e.getProperty("/sManifestTargetValue")+"})}"}return"{= extension.formatters."+a+"(${"+t.parts[0]+"},"+null+",{NumberOfFractionalDigits:"+e.getProperty("/iNumberOfFractionalDigits")+", manifestTarget:"+e.getProperty("/sManifestTargetValue")+"})}"}function l(t,e,a){var r="";r="{= extension.formatters.kpiformatter(${"+t[0]+"},{NumberOfFractionalDigits:"+e.NumberOfFractionalDigits+", percentageAvailable:"+e.percentageAvailable+"}";r+=a?","+a+")}":")}";return r}return{generateDetailsExpression:a,getHeaderDetails:n,mainIndicatorDetails:o,targetDeviationValuePath:s,mainIndicatorNumberPath:l}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/insights/helpers/ContentHelper", ["sap/ovp/insights/helpers/Batch"],function(t){"use strict";var r={formatDate:"CardAnnotationhelper.formatDate",formatColor:"CardAnnotationhelper.formatColor",formatCurrency:"CardAnnotationhelper.formatCurrency",formatNumberCalculation:"CardAnnotationhelper.formatNumberCalculation"};function e(t){if(t===null||t===undefined){return}if(t.indexOf("{")!==-1){return t}return"{"+t+"}"}function a(r,e){if(!r){return{path:t.getBatchRequestPath("/d/results",e)}}return{path:t.getBatchRequestPath("/content/d/results",e)}}function n(t){if(t&&typeof t==="string"&&t.length>0){return t.startsWith("{")&&t.endsWith("}")}return false}function o(t){if(t&&typeof t==="string"&&t.length>0){return t.startsWith("{=")&&t.endsWith("}")}return false}function i(t,r){var e;if(o(t)){return t}if(n(t)){e="$"+t}else{e="'"+t+"'"}return"{= extension.formatters.formatCriticality("+e+", '"+r+"')}"}function f(t,r,a,n){if(!t||!r){return null}try{var o=t.getBindingInfo(r);var i;if(o){if(o.formatter&&o.formatter.name==="formatCurrency"){var f=t.getBindingInfo("unit");i=s(o,n,f);return a?i:e(i)}if(o.parts&&o.parts.length){i=o.parts.length===1?s(o):s(o,n);return a?i:e(i)}i=t.getBindingPath(r);return a?i:e(i)}else{return t.getProperty(r)}}catch(t){return}}function u(t){var r=[];if(Array.isArray(t)){t.forEach(function(t){r.push("${"+t+"}")})}return r.join()}function s(t,e,a){var n=[],o,i,f,s=false,l=false;var m,c;if(t&&t.parts){t.parts.forEach(function(t){if(t.path){if(t.model==="@i18n"&&e){e[t.path]={value:"{{"+t.path+"}}"};n.push("parameters>/"+t.path+"/value");l=true}else{n.push(t.path)}}if(t.model==="ovpCardProperties"&&t.value){f=t.value.functionName;if(t.value.dateFormat){i=t.value.dateFormat;i.bUTC=t.value.bUTC||false}else{i=t.value}}else if(t.model==="@i18n"){s=true}});if(n.length===1){o=n[0]}if(t.type&&t.type.oFormat){t.formatter={name:"formatter",textFragments:[0]};i=t.type.oFormat.oFormatOptions}if(t.formatter&&t.formatter.textFragments!==true){var h=null;if(i){var p=Object.assign({},i);delete p.functionName;h=JSON.stringify(p).replaceAll('"',"'")}switch(f){case r.formatDate:if(!o){return"{= extension.formatters.formatDate("+u(n)+", "+h+")}"}return"{= extension.formatters.formatDate(${"+o+"}, "+h+")}";case r.formatColor:if(!o){return"{= extension.formatters.formatValueColor("+u(n)+","+JSON.stringify(i)+")}"}return"{= extension.formatters.formatValueColor(${"+o+"},"+JSON.stringify(i)+")}";case r.formatCurrency:a&&a.parts.forEach(function(t){n.push(t.path)});var g=n.length===4;return"{= extension.formatters.formatCurrency("+h+","+g+","+u(n)+")}";case r.formatNumberCalculation:var m=t.formatter.textFragments||[0];c=JSON.stringify(m).replaceAll('"',"'");return"{= extension.formatters.formatNumber("+h+","+c+","+u(n)+")}";default:var c=null;if(t.formatter.textFragments){c=JSON.stringify(t.formatter.textFragments).replaceAll('"',"'");return"{= extension.formatters.formatNumber("+h+","+c+","+u(n)+")}"}}}if(s&&!l){return"{{"+o+"}}"}return o}}function l(r,e){var a="";if(r){a=t.getBatchResultCount("/content/d/__count",e)}else{a=t.getBatchResultCount("/d/__count",e)}return{text:"{= ${"+a+"} === '0' ? '' : extension.formatters.formatHeaderCount( ${"+a+"}) }"}}return{getHeaderStatus:l,addBrackets:e,buildValueStateExpression:i,getBindingPathOrValue:f,getData:a,isAnExpression:o}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/insights/helpers/Filters", ["sap/ovp/cards/MetadataAnalyser","sap/ovp/cards/CommonUtils","sap/fe/navigation/SelectionVariant","sap/ovp/insights/helpers/i18n","sap/m/DynamicDateUtil","sap/ui/core/Element"],function(e,t,a,r,n,i){"use strict";var o={};function l(){o={}}function s(e){if(e){if(e.hasOwnProperty("SelectionVariantID")){delete e.SelectionVariantID}else if(e.hasOwnProperty("PresentationVariantID")){delete e.PresentationVariantID}delete e.Text;delete e.ODataFilterExpression;delete e.Version;delete e.FilterContextUrl;delete e.ParameterContextUrl;return e}return e}function u(e,t,a){var r;e.forEach(function(e){r=e&&e.Ranges;t.massAddSelectOption(a,r)})}function f(e){var r,n,i;var o=0;for(var l in e){var f=new a;if(e.hasOwnProperty(l)&&e[l]){r=e[l].value;if(r&&typeof r==="string"&&t.isJSONData(r)){r=JSON.parse(r);if(typeof r!=="object"){e[l].value=r.toString();continue}n=r.SelectOptions&&r.SelectOptions[0];if(n&&n.Ranges&&n.Ranges.length===1){i=n.Ranges[0]||{};if(i.Option==="EQ"&&!i.Low){n.Ranges=[];e[l].value=JSON.stringify(r)}}}else if(r&&Array.isArray(r)){var c,g;for(o=0;o<r.length;o++){c=JSON.parse(r[o]);g=c&&c.SelectOptions||[];u(g,f,l)}f=s(f&&f.toJSONObject());e[l].value=JSON.stringify(f)}}}}function c(e,t){var a,r="";t&&t.getAllFiltersWithValues().filter(function(n){a=n.getName();if(a.includes(e)||a===e){r=t&&t.getFilterData()&&t.getFilterData()[a]||""}});return r}function g(t,a,r,n){var i=t.getMetaModel().getODataEntityType(a.entityType)||{};var o=n.view.getModel("ovpCardProperties");var l=i[o.getProperty("/selectionAnnotationPath")]||{};var s=o.getProperty("/parameters")||[];var u=n.cardComponentData.mainComponent.oGlobalFilter;var f=[];var c=e.checkAnalyticalParameterisedEntitySet(t,a.name);if(c){f=e.resolveAnalyticalParameterizedEntitySet(t,a,l,s,u,true)||[]}else{var g=e.getParametersByEntitySet(t,a.name);if(g&&g.entitySetName){f=e.getPropertyOfEntitySet(t,g.entitySetName)||[]}}return f.filter(function(e){return e&&e.name===r})}function p(e,t,a,r){if(a){var n=g(e,t,a,r)||[],i=n[0]||{},o=i["com.sap.vocabularies.Common.v1.FilterDefaultValue"]||{},l=Object.keys(o)||[];return o[l[0]]||i.defaultValue}}function v(e,t){var a=t&&t.getFilterData();return a&&(a["$Parameter."+e]||a[e])||""}function m(e,t,a){if(e){var r=t&&t.property&&t.property.filter(function(t){return t&&t.name===e})||[];if(!r.length){r=a&&a.property&&a.property.filter(function(t){return t&&t.name===e})}}var n=r&&r.length?r[0]:{};var i=n&&n["com.sap.vocabularies.Common.v1.FilterDefaultValue"]||{};var o=Object.keys(i);return n&&(o&&o.length&&i[o[0]]||n.defaultValue)}function d(e){var a;var r=[];if(e&&Array.isArray(e)){e.forEach(function(e){if(e){a=s(JSON.parse(e));r.push(JSON.stringify(a))}});return r}else if(e&&t.isJSONData(e)){a=s(JSON.parse(e));return JSON.stringify(a)}}function S(e){var t="";if(!e){return null}if(e.type){t=e.type.startsWith("Edm.")?e.type.split("Edm.")[1]:e.type}var a={Boolean:"boolean",Byte:"integer",SByte:"integer",Int16:"integer",Int32:"integer",Int64:"number",Single:"number",Double:"number",Float:"number",Decimal:"number",Guid:"string",String:"string",Date:"date",DateTime:"datetime",DateTimeOffset:"datetime",Time:"datetime",Binary:"",Stream:"",TimeOfDay:"",Duration:""};if(t&&t==="string"){return t}else if(t&&a[t]){return a[t]}else{return"string"}}function y(e){var t=[];var a=e&&e.RequestAtLeast||undefined;if(a){for(var r=0;r<a.length;r++){if(a[r].PropertyPath){t.push(a[r].PropertyPath)}}}return t}function T(e,t,a,r){var n="";if(Array.isArray(t)){t.filter(function(t){if(t&&t.includes(e.Low)){n=t}})}else if(typeof t==="string"){n=t}if(!n&&e.Low&&e.High){var i=a&&a.getFilterData()||{},o=i[r]||{};if(o.ranges){var l=o.ranges||[];var s=l.filter(function(t){return t.value1===e.Low});var u=s[0]||{};n=u.tokenText||""}}return n}function O(e,t,a,r){var n=e&&e.getUiState(),i=n&&n.getSelectionVariant(),o=i&&i.SelectOptions||[],l=false;o.filter(function(e){return e&&e["PropertyName"]===t}).map(function(n){l=true;var i=n&&n.Ranges||[];i.forEach(function(n){var i=T(n,r,e,t);a.addSelectOption(t,n.Sign,n.Option,n.Low,n.High,i)})});if(!l){a.addSelectOption(t,"I","EQ","")}}function E(e,t){var a;var r=/'/g;switch(e.Option){case"BT":a=t+" ge "+"'"+e.Low.replace(r,"''")+"'"+" and "+t+" le "+"'"+e.High.replace(r,"''")+"'";break;case"NB":a=t+" lt "+"'"+e.Low.replace(r,"''")+"'"+" or "+t+" gt "+"'"+e.High.replace(r,"''")+"'";break;case"EQ":case"GE":case"GT":case"LE":case"LT":case"NE":a=t+" "+e.Option.toLowerCase()+" "+"'"+e.Low.replace(r,"''")+"'";break;case"Contains":case"EndsWith":case"NotContains":case"NotEndsWith":case"NotStartsWith":case"StartsWith":a=e.Option.toLowerCase().replace("not","not ")+"("+t+","+"'"+e.Low.replace(r,"''")+"'"+")";break;default:throw new Error("Unsupported operator: "+e.Option)}return a}function D(e){var t=e&&e.cardComponentData,a=t&&t.appComponent,r=a&&a.ovpConfig,n=r&&r.datePropertiesSettings;if(n){return n}}function A(e,t){if(e&&t){var a=t.getAllFilterItems()||[];return a.filter(function(t){var a=t&&t.getProperty("name");return a==="$Parameter."+e||a===e})[0]}}function R(e,t){if(t&&!e["sap:filter-restriction"]){var a=["DATE","YESTERDAY","TODAY","TOMORROW","FIRSTDAYWEEK","LASTDAYWEEK","FIRSTDAYMONTH","LASTDAYMONTH","FIRSTDAYQUARTER","LASTDAYQUARTER","FIRSTDAYYEAR","LASTDAYYEAR"],r=n.getAllOptionKeys(),i=r.filter(function(e){return a.indexOf(e)===-1}),o=t.getStandardOptions(),l=o.some(function(e){return i.indexOf(e)>-1});e["_filterRestriction"]=l?"interval":"single-value"}}function h(e,t){var a=false;if(e&&t){var r=e.cardComponentData.mainComponent.oGlobalFilter,n=t.name,i=A(n,r),o=i&&i.getControl(),a=o&&o.getMetadata()&&o.getMetadata().getName()==="sap.m.DynamicDateRange";if(a){R(t,o)}}return a}function P(e){var t=D(e);var a=t&&Object.keys(t);if(a&&a.length){a.forEach(function(e){if(o[e]){var a=t[e]&&Object.keys(t[e])||[];a.forEach(function(a){if(a&&a!=="defaultValue"&&a!=="customDateRangeImplementation"){o[e][a]=t[e][a]}})}})}return o}function C(e,t){if(t){o[e.name]={"sap:filter-restriction":"single-value"}}else{o[e.name]={"sap:filter-restriction":e["sap:filter-restriction"]||e["_filterRestriction"]}}}function b(e,t){var a=D(e);if(a&&a[t]&&a[t]["defaultValue"]){return a[t]["defaultValue"]["operation"]}else{var r=e.cardComponentData.appComponent.getManifestObject().getRawJson();var n=r&&r["sap.ovp"];var i=n&&n.filterSettings&&n.filterSettings.dateSettings&&n.filterSettings.dateSettings.fields;return i&&i[t]&&i[t]["defaultValue"]&&i[t]["defaultValue"]["operation"]}}function N(e,t){var a=e&&e.getUiState(),r=a&&a.getSelectionVariant(),n=r&&r.SelectOptions||[];var i=n.filter(function(e){return e&&e["PropertyName"]===t});i=i&&i[0]||[];var o=i.Ranges||[];return o&&o[0]}function I(e){var t=["DATE","DATETIME"];return t.indexOf(e)>-1}function L(e){if(e){var t=e.conditionTypeInfo,a=t&&t.data;if(I(a.operation)&&a.value1){return JSON.stringify(a.value1)}return a.operation}}function V(e,t,a){var r=v(e.name,t);var n=r&&r.conditionTypeInfo;var i=n&&n.data&&n.data["operation"];var o=r&&r["ranges"];var l=o&&o[0];if(i){switch(i){case"DATE":case"DATERANGE":case"SPECIFICMONTH":case"FROM":case"TO":case"DATETIME":case"DATETIMERANGE":case"FROMDATETIME":case"TODATETIME":var s=T({Low:l.Low},a,t,e.name);var u=N(t,e.name);if(u){u.Text=s;return u}break;case"LASTDAYS":case"LASTWEEKS":case"LASTMONTHS":case"LASTQUARTERS":case"LASTYEARS":case"NEXTDAYS":case"NEXTWEEKS":case"NEXTMONTHS":case"NEXTQUARTERS":case"NEXTYEARS":var f=n&&n.data&&n.data.value1;var s=T({Low:f},a,t,e.name);return{Low:i,High:f.toString(),Option:"BT",Text:s};case"TODAYFROMTO":var c=n&&n.data&&n.data.value1;var g=n&&n.data&&n.data.value2;var s=T({Low:c},a,t,e.name);return{Low:i,High:c.toString()+","+g.toString(),Option:"BT",Text:s};default:var s=T({Low:i},a,t,e.name)||"";s=s.substring(0,s.indexOf("(")-1);return{Low:i,High:null,Option:"EQ",Text:s}}}}function w(e,t){var a=t.cardComponentData.mainComponent.oGlobalFilter;var r=A(e,a);var n=r&&r.getControl();var i=n&&n.getValue();var o=n&&n.getMetadata()&&n.getMetadata().getName()==="sap.m.DynamicDateRange";var l=t.view.getModel("ovpCardProperties");var s=l&&l.getProperty("/bInsightRTEnabled");if(i&&o&&s){return JSON.stringify(i)}else{var u=b(t,e)||"";return JSON.stringify({operator:u,values:[]})}}function F(e,t,a,r,n){var i=e.view.getModel("ovpCardProperties"),o=i&&i.getProperty("/bInsightRTEnabled"),l=e.cardComponentData.mainComponent.oGlobalFilter,s=b(e,t.name)||a;if(o){var u=V(t,l,n);if(u){r.addSelectOption(t.name,"I",u.Option,u.Low,u.High,u.Text)}else{r.addSelectOption(t.name,"I","EQ","",null,"")}}else if(s){r.addSelectOption(t.name,"I","EQ",s,null,s)}else{r.addSelectOption(t.name,"I","EQ","",null,"")}}function M(e,t){if(t&&e){var a=t.getFiltersWithValues()||[],r="",n=a.filter(function(t){r=t&&t.getName();return r===e||"$Parameter."+e===r});var o=n&&n[0]&&n[0].getControl();if(o&&o.getMetadata()&&o.getMetadata().getName()==="sap.m.DynamicDateRange"){var l=o.getIdForLabel()||"";l=l.substring(0,l.lastIndexOf("-"));if(l){var s=i.getElementById(l);return s&&s.getValue()}}else if(o&&o.getProperty("value")){return o.getProperty("value")}else if(o&&typeof o.getTokens==="function"){var u=o.getTokens()||[],f=u.map(function(e){return e.getText()});return{type:"filters",value:f}}}}function x(e,t,a,n,i,o){var l=M(e,t);var s=n.view.getModel("ovpCardProperties");var u=s&&s.getProperty("/bInsightRTEnabled");if(l&&typeof l==="string"&&(u||i)){if(!a[e]){a[e]={}}a[e]["label"]=l;if(i&&!u){var f="configuration.parameters."+e+".label",c=n.cardComponentData.cardId,g=c+"_configuration_parameters_"+e+"_label";r.seti18nValueToMap(f,"{{"+g+"}}",true);l=o?i:l;r.inserti18nPayLoad(c,g,l,"Label","Configuration Parameter label")}return l}else if(l&&l.value&&l.type==="filters"){return l.value}}function Y(e,t){var a=e.cardComponentData.mainComponent.oGlobalFilter;if(a&&a.getConsiderAnalyticalParameters()){var r=e.view.getController().getCardItemsBinding(),n=r&&r.getPath()||"",i=a.getAnalyticalParameters()||[];i.forEach(function(e){var a=t.some(function(t){return t.name===e.name});if(!a&&n.indexOf(e.name)>-1){t.push(e)}})}}return{enhanceVariant:d,updateRangeValue:f,getPropertyType:S,getParameterValue:c,getRequestAtLeastFields:y,getFilterDefaultValue:m,getParameterDefaultValue:p,addFiltervalues:O,getParameterActualValue:v,removeExtraInfoVariant:s,getSingleFilterValue:E,getSemanticDateConfiguration:P,IsSemanticDateRangeValid:h,getDateRangeValueForParameters:L,getDateRangeControlValue:w,getDateOperationValue:I,getLabelForConfigParams:x,getRelatedTextToRange:T,setFilterRestrictionToSemanticDateRange:C,addDateRangeValueToSV:F,getDateRangeDefaultValue:b,resetSemanticDateRangeConfig:l,handleConsiderAnalyticalParameters:Y}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/insights/helpers/ListContentHelper", ["sap/ovp/insights/helpers/ContentHelper"],function(e){"use strict";function a(a){var t=a.view.byId("DataField")||a.view.byId("DataField1");var r=a.itemBindingInfo.template;if(t){return e.getBindingPathOrValue(t,"text",false,a.parameters)}else{return e.getBindingPathOrValue(r,"title",false,a.parameters)}}function t(a){var t=a.itemBindingInfo.template,r=a.cardComponentData.settings.listType,i,n;if(r==="condensed"){if(t.getMetadata().getName()==="sap.m.StandardListItem"){i=e.getBindingPathOrValue(t,"info",false,a.parameters);n=e.getBindingPathOrValue(t,"infoState",false,a.parameters)}else{var s=a.view.byId("DataPoint2");i=e.getBindingPathOrValue(s,"number",false,a.parameters);n=e.getBindingPathOrValue(s,"state",false,a.parameters)}}else{if(t.getMetadata().getName()==="sap.m.CustomListItem"){var s=a.view.byId("DataPoint2");if(s){i=e.getBindingPathOrValue(s,"number",false,a.parameters);n=e.getBindingPathOrValue(s,"state",false,a.parameters)}var l=a.view.byId("DataField2Link");if(l){i=e.getBindingPathOrValue(l,"text",false,a.parameters)}}else{i=e.getBindingPathOrValue(t,"number",false,a.parameters);n=e.getBindingPathOrValue(t,"numberState",false,a.parameters)}}return{value:i,state:n?e.buildValueStateExpression(n,"state"):"None"}}function r(e,a){if(Array.isArray(e)&&a){e.push({value:a})}}function i(e){for(var a=e.length-1;a>-1;a--){var t=e[a];if(!t.value){e.pop()}else{return}}}function n(a){var t={Error:"Error",Information:"Information",None:"None",Success:"Success",Warning:"Warning"};var n=[];if(a&&a.itemBindingInfo){var s=a.itemBindingInfo.template;if(s.getMetadata().getName()==="sap.m.CustomListItem"){var l=e.getBindingPathOrValue(a.view.byId("DataField2"),"text",false,a.parameters);r(n,l);var u=e.getBindingPathOrValue(a.view.byId("DataPoint3"),"number",false,a.parameters);r(n,u)}var g=s.getAggregation("attributes");if(g&&g.length){n.push({value:e.getBindingPathOrValue(g[0],"text",false,a.parameters)})}var o=s.getAggregation("firstStatus");if(o){var d=e.getBindingPathOrValue(o,"state",false,a.parameters)||"None";n.push({value:e.getBindingPathOrValue(o,"text",false,a.parameters),state:t[d]||e.buildValueStateExpression(d,"state")||"None"})}if(g&&g.length>1){n.push({value:e.getBindingPathOrValue(g[1],"text",false,a.parameters)})}var m=s.getAggregation("secondStatus");if(m){var f=e.getBindingPathOrValue(m,"state",false,a.parameters)||"None";n.push({value:e.getBindingPathOrValue(m,"text",false,a.parameters),state:t[f]||e.buildValueStateExpression(f,"state")||"None"})}}i(n);return n}function s(a){var t=a.itemBindingInfo.template;if(t&&t.getMetadata().getName()==="sap.m.StandardListItem"){return e.getBindingPathOrValue(t,"description",false,a.parameters)}if(t&&t.getMetadata().getName()==="sap.m.CustomListItem"){var r=a.view.byId("contactLink");return e.getBindingPathOrValue(r,"text",false,a.parameters)}}function l(a){var t=a.itemBindingInfo.template;if(t&&t.getMetadata().getName()==="sap.m.StandardListItem"){return{src:e.getBindingPathOrValue(t,"icon",false,a.parameters)||"default",shape:"Square"}}}function u(e){var r={title:a(e)};var i=t(e);if(i.value){r.info=i}var u=s(e);if(u){r.description=u}var g=n(e);if(g.length){r.attributesLayoutType="TwoColumns";r.attributes=g}if(e.cardComponentData.settings.imageSupported){r.icon=l(e)}if(d(e)){r.chart=o(e)}return r}function g(a,t,r){return"{= extension.formatters.getMinMax('"+a+"', '"+t+"', '"+r+"', $"+e.addBrackets(a)+")}"}function o(a){var t={type:"Bullet"};var r=a.view.byId("BarChartDataPoint");var i=a.view.byId("DataPoint1")||a.view.byId("BarChartStateValue")||a.view.byId("BarChartValue");var n=e.getBindingPathOrValue(r.getData()[0],"value",true,a.parameters);var s=e.getBindingPathOrValue(i,"number",false,a.parameters);var l=e.getBindingPathOrValue(r.getData()[0],"value",false,a.parameters);var u=e.getBindingPathOrValue(r.getData()[0],"color",false,a.parameters);t.value=l?"{= parseFloat($"+e.addBrackets(l)+")}":null;t.displayValue=e.isAnExpression(s)?s:t.value;t.color=u?e.buildValueStateExpression(u,"color"):"None";var o=a.view.getModel("minMaxModel").getProperty("/isPercentage");var d=a.view.getModel();t.minValue=o?0:g(n,"min",d);t.maxValue=o?100:g(n,"max",d);return t}function d(e){return e.view.byId("BarChartDataPoint")}function m(a,t){if(!a){return{}}var r={};a.parameters=t.configuration.parameters;r.data=e.getData(t.data.request.batch,a.view.getModel());r.item=u(a);return r}return{getListContent:m}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/insights/helpers/TableContentHelper", ["sap/ovp/insights/helpers/ContentHelper","sap/ovp/insights/helpers/i18n"],function(e,t){"use strict";function a(e,t){var a=[],n=0;var r=e.view.byId("ovpTable").getAggregation("columns");for(var i=0;i<r.length&&a.length<t;i++){if(r[i].getVisible()){a[n]=i;n++}}return a}function n(a,n,r,i,l){var s=a[n[r]];if(s){var g=e.getBindingPathOrValue(s.getHeader(),"text",false,l);var u,o;if(g&&!g.startsWith("{")){u=g.replace(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/g,"");u=i+"_"+u.replace(/ /g,"_");o=g;t.seti18nValueToMap("content.row.columns."+r+".title","{{"+u+"}}",true);t.inserti18nPayLoad(i,u,o,"Column header","column "+r+" title value")}return{header:g,hAlign:s.getHAlign()}}return{}}function r(t,a){if(!t){return{}}var n,r,i,l={};n=t.getMetadata().getName();switch(n){case"sap.m.VBox":var s=t.getAggregation("items");if(s.length){s.forEach(function(t){r=e.getBindingPathOrValue(t,"text",false,a);if(r){l.value=r}})}break;case"sap.ui.comp.navpopover.SmartLink":l.value=e.getBindingPathOrValue(t,"text",false,a);break;case"sap.m.Text":l.value=e.getBindingPathOrValue(t,"text",false,a);break;case"sap.m.ObjectStatus":l.value=e.getBindingPathOrValue(t,"text",false,a);i=e.getBindingPathOrValue(t,"state",false,a);l.state=i&&i!=="None"?e.buildValueStateExpression(i,"state"):"None";break;case"sap.m.ObjectNumber":l.value=e.getBindingPathOrValue(t,"number",false,a);i=e.getBindingPathOrValue(t,"state",false,a);l.state=i&&i!=="None"?e.buildValueStateExpression(i,"state"):"None";break}return l}function i(t,i){if(!t){return{}}var l=t.cardComponentData.cardId;var s=i.configuration.parameters;var g=t.view.byId("ovpTable").getAggregation("columns");var u=t.itemBindingInfo&&t.itemBindingInfo.template.getAggregation("cells");var o=a(t,3);var c=[];for(var v=0;v<o.length;v++){var f=n(g,o,v,l,s);var h=r(u[o[v]],s);if(Object.keys(f).length||Object.keys(h).length){c.push({title:f.header,value:h.value,state:h.state,actions:h.actions,hAlign:f.hAlign})}}return{data:e.getData(i.data.request.batch,t.view.getModel()),row:{columns:c}}}return{getTableContent:i,getCellValue:r}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/insights/helpers/i18n", ["sap/ovp/app/OVPLogger","sap/ui/thirdparty/jquery"],function(t,jQuery){"use strict";var e=new t("sap.ovp.insights.helpers.i18n");var r={"content.chartProperties.color.title.text":{keyType:"Label",comment:"Colour text label for chart"},"content.chartProperties.size.title.text":{keyType:"Label",comment:"Size text label for chart"},"content.chartProperties.categoryAxis.title.text":{keyType:"Title",comment:"Category Axis text title for chart"},"content.chartProperties.valueAxis.title.text":{keyType:"Title",comment:"Value Axis text title for chart"},"content.chartProperties.actualValues.title.text":{keyType:"Title",comment:"Actual Values text title for chart"},"content.chartProperties.targetValues.title.text":{keyType:"Title",comment:"Target Values text title for chart"}};var i={};var a=[];function n(t,e,r){if(e.startsWith("{{")&&r){e="{{INT_CARD_"+e.split("{{")[1]}i[t]=e}function s(t,e){if(typeof t[e]==="object"){return t[e]}return{object:t,key:e}}function o(t){var e=i;var r;for(var a in e){r=a.split(".").reduce(s,t);if(!r.object[r["key"]]&&e[a]){r.object[r["key"]]=e[a]}else if(r.object[r["key"]].trim().length>0){r.object[r["key"]]=e[a]}}}function l(t,e){var r={Title:"XTIT:",Label:"XFLD:",Button:"XBUT:","Column header":"XCOL:"};var i=r[t]||"";return i+" "+e}function c(t,e,r,i,n){var s={comment:l(i,t+" "+n),key:"INT_CARD_"+e,value:r};if(s.value.trim().length>0){a.push(s)}}function u(t,e){var r=[],i=-1;while((i=t.indexOf(e,i+1))!==-1){r.push(i)}return r}function p(){if(a.length>0){var t=a.map(function(t){return t.key+t.comment});for(var r=0;r<t.length;r++){var i=u(t,t[r]),n;if(i.length>1){n=0;for(var s=1;s<i.length;s++){a.splice(i[s]-n,1);t.splice(i[s]-n,1);n++}}}jQuery.ajax({type:"POST",url:"/editor/i18n",headers:{"Content-Type":"application/json"},data:JSON.stringify(a),success:function(t){e.info("Success:",t)},error:function(t){e.error("Error:",t)}}).done(function(t){e.info("Data Saved: "+t)})}}function f(){a=[];i={}}function h(t,e){if(!t||!e){return}for(var i in r){var a=v(t,i);if(!a){continue}var n=a.replace(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/g,"");var s=e+"_"+n.replace(/ /g,"_")+"_"+i.replaceAll(".","_");var o=r[i].keyType;var l=r[i].comment;this.seti18nValueToMap(i,"{{"+s+"}}",true);this.inserti18nPayLoad(e,s,a,o,l)}}function v(t,e){return e.split(".").reduce(function(t,e){return(t||{})[e]},t)}function y(t,e,r,i){var a="INT_CARD_";var n=i.replace(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/g,"");var s=e+"_"+n.replace(/ /g,"_");this.inserti18nPayLoad(e,s,t,r,i);return"{{"+a+s+"}}"}function g(t,e,r){var i=e&&e["sap.app"];var a={title:"",subtitle:""};if(i){var n=i.title||"";var s=i["subtitle"]||i["description"]||"";var o=r.cardComponentData.cardId;if(n&&n.startsWith("{")){a.title=n}else if(n){n=t.title;a.title=y(n,o,"Title","App Title")}if(s&&s.startsWith("{")){a.subtitle=s}else if(s){s=t.subtitle||t.description;a.subtitle=y(s,o,"Title","App Subtitle")}}return a}function T(t,e,r,i,a){if(e&&!e.startsWith("{")){var n=a&&a.split(".").join("_");var s=t+"_"+n+"_"+i.replace(/ /g,"_");this.seti18nValueToMap(a,"{{"+s+"}}",true);this.inserti18nPayLoad(t,s,e,r,i);return{key:"{{"+s+"}}",text:e,isNew:true}}return{key:e,isNew:false}}function d(t,e,r){var i=t.substring(2,t.length-2),a="configuration."+i,n=v(e["sap.card"],a),s=n&&n.value;if(s&&s.startsWith("{{")){s=s.substring(2,s.length-2);n.value=r.getProperty(s)}}function m(t,e){var r=t["sap.card"]["header"],i=r.details;if(i&&i.startsWith("{{")){if(i.indexOf("parameters")>-1){var a=i.indexOf("|")>-1;if(a){var n=i.split("|")||[];n.forEach(function(r){r=r.trim();d(r,t,e)})}else{d(i,t,e)}}else{var s=i.substring(2,i.length-2);r.details=e.getProperty(s)}}}function b(t,e){var r="";if(t&&t.startsWith("{{")){r=t.substring(2,t.length-2);return e.getProperty(r)}return t}function x(t,e){if(t&&e){var r=t["sap.app"],i=t["sap.card"]["header"];r.title=b(r.title,e);r.subTitle=b(r.subTitle,e);i.title=b(i.title,e);i.subTitle=b(i.subTitle,e);m(t,e)}}return{seti18nValueToMap:n,inserti18nKeysManifest:o,inserti18nPayLoad:c,writei18nPayload:p,reseti18nProperties:f,replaceStringsWithKeys:h,getKeysForAppProperties:g,createKeysFromText:T,fnReplacei18nKeysWithText:x,getI18nValueOrDefaultString:b}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * Initialization Code and shared classes of library sap.ovp (1.141.0)
 */
sap.ui.predefine("sap/ovp/library", ["sap/ui/core/Lib","sap/ui/core/library","sap/ui/layout/library","sap/m/library","sap/f/library","sap/ui/comp/library","sap/ui/rta/library","sap/suite/ui/microchart/library","sap/viz/library","sap/fe/placeholder/library","sap/insights/library","sap/suite/ui/commons/library"],function(a){"use strict";var i=a.init({name:"sap.ovp",apiVersion:2,dependencies:["sap.ui.core","sap.ui.layout","sap.m","sap.f","sap.ui.comp","sap.ui.rta","sap.suite.ui.microchart","sap.viz","sap.fe.placeholder","sap.insights","sap.suite.ui.commons"],types:[],interfaces:[],controls:[],elements:[],version:"1.141.0",extensions:{flChangeHandlers:{"sap.ovp.ui.EasyScanLayout":"sap/ovp/flexibility/EasyScanLayout","sap.ovp.ui.DashboardLayout":"sap/ovp/flexibility/DashboardLayout"},"sap.ui.support":{diagnosticPlugins:["sap/ovp/support/DiagnosticsTool/DiagnosticsTool"]}}});return i});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/placeholder/placeholderHelper", ["sap/ui/core/Placeholder"],function(e){"use strict";var l={isPlaceHolderEnabled:function(){var e=window["sap-ushell-config"]&&window["sap-ushell-config"].apps&&window["sap-ushell-config"].apps.placeholder&&window["sap-ushell-config"].apps.placeholder.enabled,l=new window.URLSearchParams(window.location.search).get("sap-ui-xx-placeholder");return e===false||l==="false"?false:true},getPlaceholderInfo:function(){return new e({html:"sap/fe/placeholder/view/PlaceholderOVP.fragment.html",autoClose:true})},showPlaceholder:function(e){if(this.isPlaceHolderEnabled()&&!this.bPlaceholderShown){this.navContainer=e;this.bPlaceholderShown=true;e.showPlaceholder({placeholder:this.getPlaceholderInfo()})}},hidePlaceholder:function(){if(this.bPlaceholderShown){var e=this.navContainer;e&&e.hidePlaceholder();this.bPlaceholderShown=false}},hidePlaceholderNeeded:function(){return this.bPlaceholderShown}};return l});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/support/DiagnosticsTool/DiagnosticsTool", ["sap/ui/thirdparty/jquery","sap/ui/core/support/Plugin","sap/ui/core/format/DateFormat","sap/ui/model/json/JSONModel","sap/ovp/support/lib/CommonChecks","sap/ovp/support/lib/CommonMethods","sap/ui/core/mvc/XMLView","sap/ui/core/IntervalTrigger","sap/ui/core/Core"],function(jQuery,e,t,n,a,i,o,s,r){"use strict";var u="sapUiSupportFioriElementsPluginOVP";function p(e){var p,l,f=u+"-View",c=[],d=r.getEventBus(),m,v,g,h,S,w=10,R;function b(){return u}function O(e){var n=t.getDateInstance({source:{pattern:"YYYYMMdd"},style:"short"});return n.format(n.parse(String(e).substring(0,8)))}function A(e){var t=window.location.origin;var n=window.location.pathname;var i=e||a.getComponentIDByStructure();if(i){m=a.getManifestPath(i);if(m){var o=a.getManifestURL(t,n,m);if(o){return o}}}return""}function D(e,t,n,a,i){if(e==="string"){c.push({order:n,name:t,type:e,value:a});return true}else if(e==="link"){c.push({order:n,name:t,type:e,value:a,target:i});return true}else if(e==="group"){c.push({order:n,name:t,type:e});return true}return false}function E(e,t,n){return D("string",e,t,n,"")}function I(e,t,n,a){return D("link",e,t,n,a)}function j(e,t){return D("group",e,t,"","")}function C(e){if(!(e&&i.hasObjectContent(e))){return undefined}if(!(e.getMetadata()&&i.hasObjectContent(e.getMetadata()))){return undefined}var t=e.getMetadata();if(!(t.getManifest()&&i.hasObjectContent(t.getManifest()))){return undefined}return t.getManifest()}function N(e){c=[];E("Error",0,e);H()}function y(e){var t=a.getUI5VersionInfo();try{if(t&&i.hasObjectContent(t)){E("OpenUI5 Version",e,t.version+" (built at "+O(t.buildTimestamp)+")");return true}else{E("OpenUI5 Version",e,"ERROR: OpenUI5 version is not available!");return false}}catch(n){E("OpenUI5 Version",e,t&&t.version+', detailed UI5 version info is not available! Possible reason: missing file "sap-ui-version.json"');return true}}function P(e){var t=i.getApplicationName(window.location.href);if(t){I("Application URL",e,"#"+t,window.location.href);return true}else{E("Application URL",e,"ERROR: Could not extract application name (#semanticObject-action) from URL!");return false}}function L(e){if(m&&v){var t=m;if(m.indexOf("./")===0){t=m.substring(2,m.length)}I("Manifest",e,t,v);return true}else{E("Manifest",e,"ERROR: Could not generate link to manifest.json! Possible reason: The application did not finish loading or is not a Fiori Elements application.");return false}}function U(e){if(!h){return false}var t=a.getRegistrationIDsByManifest(h);if(t&&Array.isArray(t)&&t.length>0){E(t.length>1?"Fiori IDs":"Fiori ID",e,i.concatStrings(t));return true}return false}function F(e){var t=a.getApplicationComponentByManifest(h);if(t){E("Application Component (ACH)",e,t);return true}else{E("Application Component (ACH)",e,"ERROR: Path /sap.app/ach not found in manifest.json! Possible reason: Invalid manifest.json");return false}}function M(e){var t=a.getApplicationIDByManifest(h);if(t){E("Application ID",e,t);return true}else{E("Application ID",e,"ERROR: Path /sap.app/id not found in manifest.json! Possible reason: Invalid manifest.json");return false}}function V(e){if(h){var t=a.getFloorplanByManifest(h)}else{t=a.getFloorplanByStructure()}if(!a.isValidFloorplan(t)){t=a.mFloorplans.UNKNOWN}if(t===a.mFloorplans.UNKNOWN){E("Floorplan Component (ACH)",e,a.getTicketComponentForFloorplan(t)+" (ERROR: Unknown floorplan! Possible reason: Invalid manifest.json)");return false}else{E("Floorplan Component (ACH)",e,a.getTicketComponentForFloorplan(t)+" ("+t+")");return true}}function T(e,t){if(!(h&&i.hasObjectContent(h))){return false}if(!(h["sap.app"]&&h["sap.app"].dataSources&&h["sap.app"].dataSources[e])){E("OData Service Metadata",t,"ERROR: Data source "+e+" not found at /sap.app/dataSources/"+e+" in manifest.json! Possible reason: Invalid manifest.json");return false}if(!h["sap.app"].dataSources[e].uri){E("OData Service Metadata",t,"ERROR: Data source URI not found at /sap.app/dataSources/"+e+"/uri in manifest.json! Possible reason: Invalid manifest.json");return false}var n=h["sap.app"].dataSources[e].uri;if(n.lastIndexOf("/")!==n.length-1){n+="/"}n+="$metadata";I("OData Metadata",t,n,window.location.origin+n);return true}function k(e,t){if(!(h&&i.hasObjectContent(h)&&g)){return false}if(!(h["sap.app"]&&h["sap.app"].dataSources&&h["sap.app"].dataSources[e])){E("Annotations",t,"ERROR: Data source "+e+" not found at /sap.app/dataSources/"+e+" in manifest.json! Possible reason: Invalid manifest.json");return false}if(!(h["sap.app"].dataSources[e].settings&&h["sap.app"].dataSources[e].settings.annotations&&h["sap.app"].dataSources[e].settings.annotations!==[])){E("Annotations",t,"ERROR: Data source "+e+" has no annotations at /sap.app/dataSources/"+e+"/settings/annotations in manifest.json! Possible reason: Invalid manifest.json");return false}var n=h["sap.app"].dataSources[e].settings.annotations;n=n.reverse();for(var a in n){if(!n.hasOwnProperty(a)){continue}var o=n[a];if(h["sap.app"].dataSources[o]){var s=h["sap.app"].dataSources[o].uri;if(!s){continue}var r="";var u="";if(s.indexOf("/")===0){u="Backend Annotation";r=window.location.origin}else{u="Local Annotation";r=g;if(r.lastIndexOf("/")!==r.length-1){r+="/"}}u+=" (Prio. "+parseInt(parseInt(a,10)+1,10)+")";I(u,t,h["sap.app"].dataSources[o].uri,r+h["sap.app"].dataSources[o].uri)}}return true}function B(e){if(!h){return}var t=0;function n(e){t+=.01;return e+t}if(!(h["sap.ui5"]&&h["sap.ui5"].models)){E("Data Sources",e,"ERROR: Path /sap.ui5/models not found in manifest.json! Possible reason: Invalid manifest.json");return}var a=h["sap.ui5"].models;var o=[];for(var s in a){if(!a.hasOwnProperty(s)){continue}if(a[s]&&a[s].dataSource&&a[s].dataSource!==""){var r=false;for(var u in o){if(!o.hasOwnProperty(u)){continue}if(o[u].dataSource===a[s].dataSource){r=true;break}}var p=s===""?"mainService":s;if(!r){o.push({models:[p],dataSource:a[s].dataSource})}else{o[u].models.push(p)}}}if(o.length===0){E("Data Sources",e,"ERROR: No models with data sources found in manifest.json! Possible reason: Invalid manifest.json");return}for(var l in o){if(!o.hasOwnProperty(l)){continue}if(!(h["sap.app"]&&h["sap.app"].dataSources)){E("Data Sources",e,"ERROR: No data sources found at /sap.app/dataSources in manifest.json! Possible reason: Invalid manifest.json");return}if(!h["sap.app"].dataSources[o[l].dataSource]){E("Data Sources",e,"ERROR: Data source "+o[l].dataSource+" not found at /sap.app/dataSources/"+o[l].dataSource+" in manifest.json! Possible reason: Invalid manifest.json");return}j(i.concatStrings(o[l].models),n(e));T(o[l].dataSource,n(e));k(o[l].dataSource,n(e))}}function x(e){var t=r.byId(e);if(t){return t}else{return new o(e,{viewName:"sap.ovp.support.DiagnosticsTool.view.DiagnosticsTool",viewData:{plugin:p}})}}function G(){var e=x(f);e.placeAt(u);var t=new n;e.setModel(t,"data")}function K(){p=this;l=window.location.hash.slice(1);if(e.isToolStub()){if(!e.hasListeners(u+"SetData")){e.attachEvent(u+"SetData",z)}if(!e.hasListeners(u+"UpdateStatus")){e.attachEvent(u+"UpdateStatus",Q)}if(!e.hasListeners(u+"ShowDataRefreshed")){e.attachEvent(u+"ShowDataRefreshed",Z)}window.fioriElementsPluginID=u;G()}else{if(!e.hasListeners(u+"GetData")){e.attachEvent(u+"GetData",$)}d.unsubscribe("elements","ViewRendered",ee);d.unsubscribe("elements","ViewRenderingStarted",ee);d.subscribe("elements","ViewRendered",ee);d.subscribe("elements","ViewRenderingStarted",ee);if("onhashchange"in window){window.addEventListener("hashchange",te)}}$()}function W(){if(e.isToolStub()){window.fnFEPluginToolInstanceExit=undefined;e.detachEvent(u+"SetData",z);e.detachEvent(u+"UpdateStatus",Q);e.detachEvent(u+"ShowDataRefreshed",Z);x(f).destroy()}else{window.fnFEPluginAppInstanceExit=undefined;e.detachEvent(u+"GetData",$);d.unsubscribe("elements","ViewRendered",ee);d.unsubscribe("elements","ViewRenderingStarted",ee);if("onhashchange"in window){window.removeEventListener("hashchange",te)}}}function J(){e.sendEvent(u+"GetData",{})}function H(){var t=new n;c.sort(i.getDynamicComparator("order"));var a=(new Date).toLocaleTimeString([],{hour12:false,hour:"2-digit",minute:"2-digit",second:"2-digit"});var o=true;if(!c||c.length===0){o=false}var s=i.getApplicationStatus();if(!s){i.setApplicationStatus(i.mApplicationStatus.UNKNOWN);s=i.mApplicationStatus.UNKNOWN}var r="";if(s===i.mApplicationStatus.FAILED){r="The application did not finish loading or is no Fiori Elements application! The shown data below could be collected anyway. If the application finishes loading, the data will be updated automatically."}t.setData({properties:c,url:window.location.href,origin:window.location.origin,retrieval:a,copyEnabled:o,status:s,statusMessage:r});e.sendEvent(u+"SetData",JSON.parse(t.getJSON()))}function Y(t,n){e.sendEvent(u+"UpdateStatus",{timeLeft:t,status:n})}function q(){e.sendEvent(u+"ShowDataRefreshed",{})}function X(e){if(v){g=a.getRootPath(v)}c=[];H();y(1);P(2);L(3);H();if(e&&h&&i.hasObjectContent(h)){U(3);F(4);V(5);B(6);H();q()}else if(v){jQuery.when(i.getFileFromURI(v)).done(function(e){h=e;U(3);M(4);F(5);V(6);B(7)}).fail(function(){E("Manifest",3,"ERROR: Could not access manifest.json even though link could be generated! Possible reason: missing permission to access file.")}).always(function(){H();q()})}}function $(){h=undefined;v=undefined;g=undefined;var e=i.getApplicationStatus();var t=i.getAppComponent();var n=false;if(!(e&&i.isValidApplicationStatus(e))){e=i.mApplicationStatus.UNKNOWN}if(e===i.mApplicationStatus.LOADING){ee();return}else if(e===i.mApplicationStatus.FAILED){var o=C(t);if(o&&i.hasObjectContent(o)){h=o;if(h&&h["sap.app"]&&h["sap.app"].id){v=A(h["sap.app"].id);if(!v){n=true}}else{n=true}}else{N("Could not load any data because manifest and component of current application are unknown!");q();return}}else if(e===i.mApplicationStatus.RENDERED){v=A();if(!v){o=C(t);if(o&&i.hasObjectContent(o)){h=o;if(h&&h["sap.app"]&&h["sap.app"].id){v=A(h["sap.app"].id);if(!v){n=true}}else{n=true}}else{N("Could not load any data because manifest and component of current application are unknown!");q();return}}}else if(e===i.mApplicationStatus.UNKNOWN){if(a.getFloorplanByStructure()!==a.mFloorplans.UNKNOWN){h=a.getManifestByStructure();if(h&&i.hasObjectContent(h)){if(h&&h["sap.app"]&&h["sap.app"].id){v=A(h["sap.app"].id);if(!v){n=true}}else{n=true}}}else{N("Could not load any data because manifest and component of current application are unknown!");q();return}}X(n)}function z(e){var t=new n;t.setJSON(JSON.stringify(e.getParameters()));var a=x(f);a.setModel(t,"data");a.invalidate()}function Q(e){var t=e.getParameters();x(f).getController().updateStatus(t.timeLeft,t.status)}function Z(){var e=x(f);e.getController().showDataRefreshed()}function _(){var e=i.getApplicationStatus();if(R>0){Y(R,e)}else{R=w;i.setApplicationStatus(i.mApplicationStatus.FAILED);Y(0,i.mApplicationStatus.FAILED);S.removeListener(_);S=undefined;$()}R--}function ee(e,t){if(t==="ViewRenderingStarted"||!t&&i.getApplicationStatus()===i.mApplicationStatus.LOADING){i.setApplicationStatus(i.mApplicationStatus.LOADING);if(!S){R=w;S=new s(1e3);S.addListener(_)}}else if(t==="ViewRendered"){i.setApplicationStatus(i.mApplicationStatus.RENDERED);R=w;if(S){S.removeListener(_);S=undefined}$()}}function te(e){function t(e){for(var t=0;t<e.length;t++){if(e[t]==="/"||e[t]==="&"||e[t]==="?"||e[t]==="~"){return t}}return e.length}function n(e,n){if(!e||!n){return false}if(e===n){return true}var a=t(e);var i=t(n);if(a!==i){return false}else if(e.substr(0,a)===n.substr(0,i)){return true}return false}var a,o,s=false;if(e.originalEvent.oldURL&&e.originalEvent.newURL){a=e.originalEvent.oldURL.split("#")[1];o=e.originalEvent.newURL.split("#")[1]}else{a=l;o=window.location.hash.slice(1);l=o}if(a.length>=o.length){s=n(o,a)}else{s=n(a,o)}if(!s){i.setApplicationStatus(i.mApplicationStatus.LOADING);i.setAppComponent(undefined);ee();R=w/2}}return{init:K,exit:W,getId:b,onRefresh:J}}return e.extend("sap.ovp.support.DiagnosticsTool.DiagnosticsTool",{constructor:function(t){e.apply(this,[u,"SAP Fiori Elements",t]);Object.assign(this,p(t))}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/support/DiagnosticsTool/controller/DiagnosticsTool.controller", ["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/m/MessageBox","sap/ovp/support/lib/Documentation","sap/ui/thirdparty/jquery","sap/ovp/app/OVPLogger"],function(e,t,o,a,jQuery,r){"use strict";var i=new r("OVP.controller.DiagnosticsTool");function n(){this.getView().attachAfterRendering(function(){u()})}function s(){var e=this.getView().getModel("data");if(e.getProperty("/status")==="Loading"){t.show("Application is still loading");return}var o=(new Date).toLocaleTimeString([],{hour12:false,hour:"2-digit",minute:"2-digit",second:"2-digit"});e.setData({properties:null,retrieval:o,copyEnabled:false});e.updateBindings();this.getView().getViewData().plugin.onRefresh()}function l(){var e="\r\n";var r="- ";var i=this.getView().getModel("data").getData();if(!(i&&i.properties&&i.url)){o.error("Could not copy data to your clipboard! No data collected",{title:"Error"});return}var n=i.properties;var s="*************+Extracted by SAP Fiori Elements Diagnostics Plugin [FEDiagnosticOVP]+*************"+e;s+=r+"Extracted on "+(new Date).toUTCString()+e;s+=r+"Host: "+i.origin+e;s+=r+"Application status: "+i.status+e;if(i.statusMessage){s+=r+"Notice: "+i.statusMessage+e}s+=r+"Documentation: "+a.getDocuURL()+e;s+=e;s+="APP DATA"+e;for(var l=0,c=n.length;l<c;l++){if(n[l].type==="string"){s+=r+n[l].name+": "+n[l].value+e}else if(n[l].type==="link"){s+=r+n[l].name+": "+n[l].target+e}else if(n[l].type==="group"){s+="Group: "+n[l].name+e}}s+=e;s+="**************************"+e;s+=e;s+=e;s+="PROVIDE"+e;s+=r+"User/Password: <user>/<password>"+e;s+=r+"Steps to recreate the issue: <maybe also provide master data, pictures or video…>"+e;var d=this.getView().byId("CopyDataTextArea").getId();var u=document.getElementById(d);u.style.display="block";u.value=s;u.select();try{var p=document.execCommand("copy");if(p){t.show("Ticket relevant information copied to clip board")}else{o.error("Could not copy data to your clipboard! You can copy it manually from here: "+e+e+s,{title:"Error"})}}catch(t){o.error("Could not copy data to your clipboard! You can copy it manually from here: "+e+e+s,{title:"Error"})}finally{u.style.display="none"}}function c(){var e="<br/>",r="</span>"+e,i="<span>",n=i+"- ",s=this.getView().getModel("data").getData();if(!(s&&s.properties&&s.url)){o.error("Could not copy data to your clipboard! No data collected",{title:"Error"});return}var c=s.properties,d=document.getElementById(this.getView().byId("CopyDataHTML").getId()),u=d[0];var p=i+"*************+Extracted by SAP Fiori Elements Diagnostics Plugin [FEDiagnosticOVP]+*************"+r;p+=n+"Extracted on "+(new Date).toUTCString()+r;p+=n+'Host: <a href="'+s.url+'" rel="noopener noreferrer">'+s.origin+"</a>"+r;p+=n+"Application status: "+s.status+r;if(s.statusMessage){p+=n+"Notice: "+s.statusMessage+r}p+=n+"Documentation: "+'<a href="'+a.getDocuURL()+'" rel="noopener noreferrer">'+a.getDocuURL()+"</a>"+r;p+=e;p+=i+"APP DATA"+r;for(var g=0,f=c.length;g<f;g++){if(c[g].type==="string"){p+=n+c[g].name+": "+c[g].value+r}else if(c[g].type==="link"){p+=n+c[g].name+': <a href="'+c[g].target+'" rel="noopener noreferrer">'+c[g].value+"</a>"+r}else if(c[g].type==="group"){p+=i+"Group: "+c[g].name+r}}p+=i+"**************************"+r;p+=e;p+=i+"PROVIDE"+r;p+=i+"User/Password: &lt;user&gt;/&lt;password&gt;"+r;p+=i+"Steps to recreate the issue: &lt;maybe also provide master data, pictures or video…&gt;"+r;function m(){try{document.getSelection().removeAllRanges()}catch(e){return function(){}}}d.empty();u.insertAdjacentHTML("beforeend",p);try{var y=document.createRange();m();y.selectNode(u);document.getSelection().addRange(y);document.execCommand("copy");m();t.show("Ticket relevant information copied to clip board with HTML format")}catch(e){m();l()}finally{d.empty()}}function d(){a.openDocumentation()}function u(){var e=jQuery(".diagnosticPropertiesGroupHeaderContent");if(e.length===0){i.debug("No headers found which should be customized");return}var t,o,a;for(var r=0;r<e.length;r++){t=jQuery(e[r]);o=t.parents("td:first");a=jQuery("#"+o[0].id);a.addClass("diagnosticPropertiesGroupHeader");a.attr("colspan",2);a.next().remove()}}function p(e,t){var o=this.getView().getModel("data");o.setData({timeLeft:e,status:t})}function g(){if(window.fioriElementsPluginID){var e=document.getElementById(window.fioriElementsPluginID);if(e&&e.parent()&&!e.parent().hasClass("sapUiSupportHidden")){t.show("Data refreshed")}}}return e.extend("sap.ovp.support.DiagnosticsTool.controller.DiagnosticsTool",{onInit:n,onRefreshData:s,onCopyDataPlain:l,onCopyDataHTML:c,onShowDocumentation:d,updateStatus:p,showDataRefreshed:g})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * Static class with reusable checks to collect data from Fiori Elements application.
 */
sap.ui.predefine("sap/ovp/support/lib/CommonChecks", ["sap/ovp/support/lib/CommonMethods","sap/ui/thirdparty/jquery","sap/ui/core/Core","sap/ovp/cards/CommonUtils"],function(e,jQuery,t,n){"use strict";var r={UNKNOWN:"Unknown",LISTREPORT:"sap.suite.ui.generic.template.ListReport",ANALYTICALLISTPAGE:"sap.suite.ui.generic.template.AnalyticalListPage",OVERVIEWPAGE:"sap.ovp"};var i={UNKNOWN:"CA-UI5-ST",LISTREPORT:"CA-UI5-ST",ANALYTICALLISTPAGE:"CA-UI5-ST-ALP",OVERVIEWPAGE:"CA-UI5-ST-OVP"};function a(){var e=n.getApp();if(e){var t=e.getOwnerComponent().oOvpConfig;return t.sapUICoreVersionInfo}}function p(e){return e&&e["sap.app"]&&e["sap.app"].ach?e["sap.app"].ach:""}function o(e){if(e&&e["sap.app"]&&e["sap.app"].id){if(e["sap.app"].id==="${project"+".artifactId}"){return g()}return e["sap.app"].id}return""}function s(e){return e&&e["sap.fiori"]&&e["sap.fiori"].registrationIds&&e["sap.fiori"].registrationIds.length>0?e["sap.fiori"].registrationIds:[]}function u(e,t){for(var n=0;n<e.length;n++){if(e[n]&&e[n].id&&e[n].id.indexOf(t)!==-1){return e[n].id.split("::")[0]}}return""}function f(){var n=jQuery(".sapUiXMLView"),r=jQuery(".ovpWrapper"),i="::sap.suite.ui.generic.template",a;if(r&&r.length&&r.length>0){n=r.closest(".sapUiXMLView");if(n&&n.length&&n.length>0&&n[0]&&n[0].id&&t.byId(n[0].id)&&t.byId(n[0].id).getController()&&t.byId(n[0].id).getController().getOwnerComponent()&&t.byId(n[0].id).getController().getOwnerComponent().getMetadata()&&t.byId(n[0].id).getController().getOwnerComponent().getMetadata().getManifest()){a=t.byId(n[0].id).getController().getOwnerComponent().getMetadata().getManifest()}else{return undefined}}else if(n&&n.length&&n.length>0){for(var p=0;p<n.length;p++){if(n[p].id.indexOf(i)!==-1){if(t.byId(n[p].id)&&t.byId(n[p].id).getController()&&t.byId(n[p].id).getController().getOwnerComponent()&&t.byId(n[p].id).getController().getOwnerComponent().getAppComponent()&&t.byId(n[p].id).getController().getOwnerComponent().getAppComponent().getMetadata()&&t.byId(n[p].id).getController().getOwnerComponent().getAppComponent().getMetadata().getManifest()){a=t.byId(n[p].id).getController().getOwnerComponent().getAppComponent().getMetadata().getManifest();break}}}if(!a||!e.hasObjectContent(a)){return undefined}if(a&&e.hasObjectContent(a)&&a["sap.app"]&&a["sap.app"].id&&a["sap.app"].id==="${project"+".artifactId}"){a["sap.app"].id=u(n,i)}}else{return undefined}return a}function g(){var t=f(),n,r,i="::sap.suite.ui.generic.template";if(t&&e.hasObjectContent(t)&&t["sap.app"]&&t["sap.app"].id){n=jQuery(".sapUiXMLView");r=jQuery(".ovpWrapper");if(r&&r.length&&r.length>0){n=r.closest(".sapUiXMLView")}if(n&&n.length&&n.length>0){return u(n,i)}}return""}function l(e){if(!e){return""}var t=e.replace(/\./g,"/");return sap.ui.require.toUrl(t,"/manifest.json")}function c(e,t,n){if(!e||!n){return""}if(n.indexOf("./")===0||n.indexOf("../")===0){if(!t){return""}return e+t.substring(0,t.lastIndexOf("/")+1)+n}if(n.indexOf("/")===0){return e+n}return""}function d(e){if(e){return e.replace("manifest.json","")}return""}function I(e){if(!e){return false}for(var t in r){if(!r.hasOwnProperty(t)){continue}if(r[t]===e){return true}}return false}function C(e){if(e===r.UNKNOWN){return i.UNKNOWN}else if(e===r.LISTREPORT){return i.LISTREPORT}else if(e===r.ANALYTICALLISTPAGE){return i.ANALYTICALLISTPAGE}else if(e===r.OVERVIEWPAGE){return i.OVERVIEWPAGE}else{return i.UNKNOWN}}function O(e){return e&&e.hasOwnProperty("sap.ovp")&&Object.keys(e["sap.ovp"]).length!==0}function A(e){if(!(e&&e["sap.ui.generic.app"]&&e["sap.ui.generic.app"].pages&&e["sap.ui.generic.app"].pages!==[])){return false}var t=e["sap.ui.generic.app"].pages;for(var n in t){if(t.hasOwnProperty(n)){if(t[n]&&t[n].component&&t[n].component.name&&t[n].component.name==="sap.suite.ui.generic.template.ListReport"){return true}}}return false}function m(e){if(!(e&&e["sap.ui.generic.app"]&&e["sap.ui.generic.app"].pages&&e["sap.ui.generic.app"].pages!==[])){return false}var t=e["sap.ui.generic.app"].pages;for(var n in t){if(t.hasOwnProperty(n)){if(t[n]&&t[n].component&&t[n].component.name&&t[n].component.name==="sap.suite.ui.generic.template.AnalyticalListPage"){return true}}}return false}function L(e){if(e){if(O(e)){return r.OVERVIEWPAGE}else if(A(e)){return r.LISTREPORT}else if(m(e)){return r.ANALYTICALLISTPAGE}}return r.UNKNOWN}function y(){return O(f())}function P(){return A(f())}function E(){return m(f())}function T(){var e=f();if(O(e)){return r.OVERVIEWPAGE}else if(A(e)){return r.LISTREPORT}else if(m(e)){return r.ANALYTICALLISTPAGE}return r.UNKNOWN}return{mFloorplans:r,mTicketComponents:i,getUI5VersionInfo:a,getApplicationComponentByManifest:p,getApplicationIDByManifest:o,getRegistrationIDsByManifest:s,getComponentIDByStructure:g,getManifestByStructure:f,getManifestPath:l,getManifestURL:c,getRootPath:d,isValidFloorplan:I,getTicketComponentForFloorplan:C,isOverviewPageByManifest:O,isListReportByManifest:A,isAnalyticalListPageByManifest:m,getFloorplanByManifest:L,isOverviewPageByStructure:y,isListReportByStructure:P,isAnalyticalListPageByStructure:E,getFloorplanByStructure:T}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 * Static class with reusable methods for Fiori Elements application.
 */
sap.ui.predefine("sap/ovp/support/lib/CommonMethods", ["sap/ui/thirdparty/jquery","sap/ovp/app/OVPLogger","sap/ui/core/Core"],function(jQuery,n,e){"use strict";var t={UNKNOWN:"Unknown",FAILED:"Failed",LOADING:"Loading",RENDERED:"Rendered"};var r=t.UNKNOWN;var i={};var u=new n("OVP.lib.CommonMethods");function f(n){var e=1;if(n[0]==="-"){e=-1;n=n.substr(1)}return function(t,r){if(!t[n]){return e===1?1:-1}else if(!r[n]){return e===1?-1:1}var i=0;if(t[n]<r[n]){i=-1}else if(t[n]>r[n]){i=1}return i*e}}function s(n){if(n){return jQuery.getJSON(n)}return undefined}function o(n){for(var e in t){if(t[e]===n){return true}}return false}function a(){return r}function l(n){r=o(n)?n:t.UNKNOWN}function p(){return i}function c(n){i=n;return true}function v(n,t,r){u.info("Global event '"+t+"' published on channel '"+n+"'");e.getEventBus().publish(n,t,r)}function g(n){if(!n||n.length<1){return""}var e="";for(var t=0;t<n.length;t++){if(!n[t]||!(typeof n[t]==="string")){continue}if(e){e+=", "}e+=n[t]}return e}function d(n){if(!n){return false}return Object.keys(n).length>0}function h(n){if(!n){return""}var e=n.split("#");if(e.length<2){return""}else{var t=e[1];var r=t.indexOf("~");var i=t.indexOf("?");var u=t.indexOf("/");var f=t.indexOf("&");if(r&&r!==-1&&(r<i||i===-1)&&(r<u||u===-1)&&(r<f||f===-1)){return t.substr(0,r)}else if(i&&i!==-1&&(i<r||r===-1)&&(i<u||u===-1)&&(i<f||f===-1)){return t.substr(0,i)}else if(u&&u!==-1&&(u<r||r===-1)&&(u<i||i===-1)&&(u<f||f===-1)){return t.substr(0,u)}else if(f&&f!==-1&&(f<r||r===-1)&&(f<i||i===-1)&&(f<u||u===-1)){return t.substr(0,f)}else{return t}}}function N(n){if(!n){return""}var e=n.split("#");if(e.length<=0){return""}else if(e.length===1){return e[0]}else{return e[0]+"#"+h(n)}}return{mApplicationStatus:t,getDynamicComparator:f,getFileFromURI:s,isValidApplicationStatus:o,getApplicationStatus:a,setApplicationStatus:l,getAppComponent:p,setAppComponent:c,publishEvent:v,concatStrings:g,hasObjectContent:d,getApplicationName:h,shortenURL:N}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/support/lib/Documentation", ["sap/m/library","sap/ui/VersionInfo"],function(e,n){"use strict";var t="https://ui5.sap.com/";var r="03265b0408e2432c9571d6b3feb6b1fd";function i(){return n.load().then(function(e){var n=e.version;if(n.indexOf("-SNAPSHOT")!==-1){return t+"#/topic/"+r}else{return t+n+"/#/topic/"+r}})}function o(){i().then(function(n){e.URLHelper.redirect(n,true)})}return{getDocuURL:i,openDocumentation:o}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/Card", ["sap/ui/core/Control"],function(e){"use strict";return e.extend("sap.ovp.ui.Card",{metadata:{library:"sap.ovp",designTime:false,aggregations:{innerCard:{type:"sap.ui.core.Control",multiple:false}},defaultAggregation:"innerCard"},init:function(){},renderer:function(e,r){e.openStart("div",r);e.class("sapOvpBaseCardWrapper");e.openEnd();e.renderControl(r.getAggregation("innerCard"));e.close("div")}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/CardContentContainer", ["sap/m/FlexBox"],function(e){"use strict";var n=e.extend("sap.ovp.ui.CardContentContainer",{metadata:{library:"sap.ovp"},renderer:{render:function(e,n){e.openStart("div",n);e.class("sapOvpCardContentContainer").class("sapMTBStandard");e.openEnd();var r=n.getItems();for(var a=0;a<r.length;a++){e.renderControl(r[a])}e.close("div")}}});return n});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/ComponentContainerDesigntimeMetadata", ["sap/ui/thirdparty/jquery","sap/ovp/cards/CommonUtils","sap/ovp/cards/SettingsUtils","sap/ui/dt/plugin/ElementMover","sap/ui/dt/OverlayRegistry","sap/ui/dt/OverlayUtil","sap/ui/rta/plugin/Plugin","sap/ui/rta/util/BindingsExtractor","sap/ui/dt/MetadataPropagationUtil","sap/ui/rta/Utils","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ovp/app/OVPLogger","sap/ui/model/json/JSONModel"],function(jQuery,e,t,a,n,r,o,i,d,s,l,u,g,c){"use strict";var p=e.getApp();var f=false;var v=new g("OVP.ui.ComponentContainerDesigntimeMetadata");var C=function(){var e="https://"+window.location.host+"/sap/opu/odata/SSB/SMART_BUSINESS_DESIGNTIME_SRV/KPIs";jQuery.ajax({type:"GET",url:e,dataType:"json",async:false,headers:"",success:function(e,t,a){var n={d:{results:[]}};n.d.results=e.d.results.filter(function(e){return!!e.ModelURI});f=n.d.results.length>0;if(f){var r=new c;r.setData(n);p.getView().setModel(r,"JSONModelForSSB")}},error:function(e){v.error(e)}})};C();var y=new a,h=function(e){e.setTargetZone(false)},m=function(e){e.setTargetZone(true)},E=function(e){var t=e.getChildren();var a=t.filter(function(e){return e.isTargetZone()});if(a.length>0){return a[0]}else{return null}},_=function(e){var t=y.getMovedOverlay();if(!t){return false}var a=false;if(!(e.getElement()===t.getElement())){var n=E(e);if(n){a=true}else if(r.isInTargetZoneAggregation(e)){a=true}}if(a){t.setSelected(true);setTimeout(function(){t.focus()},0)}return a},S=function(e,t){var a=e.getChildren();a.forEach(function(e){t(e)})},O=function(e,t){var a=n.getOverlay(e),o=a&&a.getParentElementOverlay(),i=o&&r.findAllSiblingOverlaysInContainer(a,o);i&&i.forEach(function(e){S(e,t)})};var I=a.prototype.checkTargetZone;a.prototype.checkTargetZone=function(e,t,a){var n=t?t:this.getMovedOverlay();var r=I.apply(this,arguments);if(!r){return Promise.resolve(false)}var l=n.getElement();var u=e.getParent();var g=n.getRelevantContainer();var c=u.getElement();var p=e.getDesignTimeMetadata();var f=d.getRelevantContainerForPropagation(p.getData(),l);f=f?f:c;if(!g||!f||!o.prototype.hasStableId(u)||g!==f){return Promise.resolve(false)}if(n.getParent().getElement()!==c){var v=i.getBindings(l,l.getModel());if(Object.keys(v).length>0&&l.getBindingContext()&&c.getBindingContext()){var C=s.getEntityTypeByPath(l.getModel(),l.getBindingContext().getPath());var y=s.getEntityTypeByPath(c.getModel(),c.getBindingContext().getPath());if(!(C===y)){return Promise.resolve(false)}}}return Promise.resolve(true)};a.prototype.deactivateAllTargetZones=function(e){O(e,h)};a.prototype.activateAllValidTargetZones=function(e){O(e,m)};var T={name:{singular:l.getText("Card"),plural:l.getText("Cards")},actions:{remove:{name:l.getText("OVP_KEYUSER_MENU_HIDE_CARD"),changeType:"hideCardContainer",changeOnRelevantContainer:true},reveal:{changeType:"unhideCardContainer",changeOnRelevantContainer:true,getLabel:function(e){var t=this._getCardId(e.getId()),a=this._getCardFromManifest(t);if(a){var n=a.settings;if(n.title){return n.title}else if(n.category){return n.category}else if(n.subTitle){return n.subTitle}return a.cardId}else{v.error("Card id "+t+" is not present in the manifest");return""}}.bind(p)}}};var L=e._getLayer();var b=e.getQueryParameterValue("fiori-tools-rta-mode");T.actions["settings"]=function(a){if(!a.getComponentInstance()){return{}}var o=a.getComponentInstance().getComponentData(),i=o.mainComponent,d=i._getCardFromManifest(o.cardId);if(!d||!e.checkIfCardTypeSupported(d.template)){return{}}var s={EditCard:{icon:"sap-icon://edit",name:l.getText("OVP_KEYUSER_MENU_EDIT_CARD"),isEnabled:function(e){return true},changeOnRelevantContainer:true,handler:t.fnEditCardHandler},CloneCard:{icon:"sap-icon://value-help",name:l.getText("OVP_KEYUSER_MENU_CLONE_CARD"),isEnabled:function(e){return true},handler:t.fnCloneCardHandler}};if(!L||L===u.Layers.customer){s["Cut"]={icon:"sap-icon://scissors",name:l.getText("OVP_KEYUSER_MENU_CUT_CARD"),isEnabled:function(e){return true},changeOnRelevantContainer:true,handler:function(e,t){var a=n.getOverlay(e),r=y.getMovedOverlay();if(r){r.removeStyleClass("sapUiDtOverlayCutted");y.setMovedOverlay(null);y.deactivateAllTargetZones(e)}y.setMovedOverlay(a);a.addStyleClass("sapUiDtOverlayCutted");y.activateAllValidTargetZones(e);return Promise.resolve([]).then(function(){return[]})}};s["Paste"]={icon:"sap-icon://paste",name:l.getText("OVP_KEYUSER_MENU_PASTE_CARD"),isEnabled:function(e){var t=n.getOverlay(e),a=E(t);return!!(a||r.isInTargetZoneAggregation(t))},changeOnRelevantContainer:true,handler:function(t,a){var o=n.getOverlay(t),i=y.getMovedOverlay();if(i){var d=i.getElement(),s=o.getElement(),l=r.getParentInformation(i),u=r.getParentInformation(o),g=t.getComponentInstance().getComponentData().mainComponent,c=g.getLayout(),p=g.getUIModel(),f={},v={},C=[];if(p.getProperty("/containerLayout")==="resizable"){var h=c.getDashboardLayoutModel(),m=g._getCardId(d.getId()),E=g._getCardId(t.getId()),S=h.getCardById(m),O=h.getCardById(E),I=h.getColCount(),T="C"+I,L=[];f.cardId=m;f.dashboardLayout={};f.dashboardLayout[T]={row:O.dashboardLayout.row,oldRow:S.dashboardLayout.row,column:O.dashboardLayout.column,oldColumn:S.dashboardLayout.column};if(O.dashboardLayout.column+S.dashboardLayout.colSpan>I+1){f.dashboardLayout[T].colSpan=O.dashboardLayout.colSpan;f.dashboardLayout[T].oldColSpan=S.dashboardLayout.colSpan;f.dashboardLayout[T].rowSpan=S.dashboardLayout.rowSpan;f.dashboardLayout[T].oldRowSpan=S.dashboardLayout.rowSpan}C.push({selectorControl:e.getApp().getLayout(),changeSpecificData:{changeType:"dragOrResize",content:f}});C.push({selectorControl:e.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"dragAndDropUI",content:f}});h._arrangeCards(S,{row:O.dashboardLayout.row,column:O.dashboardLayout.column},"drag",L);h._removeSpaceBeforeCard(L);L.forEach(function(t){var a={};a.dashboardLayout={};a.cardId=t.content.cardId;a.dashboardLayout[T]=t.content.dashboardLayout;C.push({selectorControl:e.getApp().getLayout(),changeSpecificData:{changeType:"dragOrResize",content:a}})})}else{var b=u.parent.getContent().filter(function(e){return e.getVisible()});f={cardId:g._getCardId(d.getId()),position:b.indexOf(s),oldPosition:b.indexOf(d)};C.push({selectorControl:e.getApp().getLayout(),changeSpecificData:{changeType:"position",content:f}});v={cardId:g._getCardId(d.getId()),position:u.index,oldPosition:l.index};C.push({selectorControl:e.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"dragAndDropUI",content:v}})}}_(o);if(i){i.removeStyleClass("sapUiDtOverlayCutted");y.setMovedOverlay(null);y.deactivateAllTargetZones(t);return Promise.resolve(C).then(function(e){return e})}}};s["AddStaticLinkListCard"]={icon:"sap-icon://form",name:l.getText("OVP_KEYUSER_MENU_CREATE_LINK_LIST_CARD"),isEnabled:function(e){return true},handler:t.fnAddStaticLinkListCardHandler};if(f){s["AddKPICard"]={icon:"sap-icon://kpi-corporate-performance",name:l.getText("OVP_KEYUSER_MENU_ADD_KPI_CARD"),isEnabled:function(e){return true},handler:t.fnAddKPICardHandler}}}else if(L&&L===u.Layers.customer_base||b){s["AddCard"]={icon:"sap-icon://add-activity",name:l.getText("OVP_KEYUSER_MENU_AddCard"),isEnabled:function(e){return true},handler:t.fnAddNewCardHandler}}s["RemoveCard"]={icon:"sap-icon://delete",name:l.getText("OVP_KEYUSER_MENU_REMOVE_CARD"),isEnabled:function(t){var a=t.getComponentInstance().getComponentData().settings;return t.getId().indexOf(e._getLayerNamespace()+".")!==-1&&!a.cloneCard&&!a.newCard},handler:t.fnRemoveCardHandler};return s};return T},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/CustomData", ["sap/ui/core/CustomData","sap/ovp/app/OVPLogger","sap/ui/core/library","sap/ui/core/ControlBehavior"],function(t,e,i,r){"use strict";var o=i.ID;var a=new e("OVP.ui.CustomData");var t=t.extend("sap.ovp.ui.CustomData");t.prototype._checkWriteToDom=function(t){var e=this.getKey().toLowerCase(),i=r.isAccessibilityEnabled();if(!i){return}if(!this.getWriteToDom()){return null}var u=this.getValue();if(typeof u!="string"){a.error("CustomData with key "+e+" should be written to HTML of "+t+" but the value is not a string.");return null}if(!o.isValid(e)||e.indexOf(":")!=-1){a.error("CustomData with key "+e+" should be written to HTML of "+t+" but the key is not valid (must be a valid sap.ui.core.ID without any colon).");return null}if(e==window._FASTNAVIGATIONKEY){u=/^\s*(x|true)\s*$/i.test(u)?"true":"false"}else if(e.indexOf("sap-ui")==0){a.error("CustomData with key "+e+" should be written to HTML of "+t+" but the key is not valid (may not start with 'sap-ui').");return null}return{key:e,value:u}};return t});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/DashboardLayout", ["sap/ui/core/Control","sap/ui/thirdparty/jquery","sap/ui/Device","sap/ui/core/ResizeHandler","sap/ovp/app/resources","sap/ui/events/KeyCodes","sap/ui/events/F6Navigation","sap/ui/core/Component","sap/ui/core/Element","sap/base/i18n/Localization","sap/ui/dom/jquery/Selectors"],function(t,jQuery,a,e,s,o,r,i,n,l){"use strict";var d=t.extend("sap.ovp.ui.DashboardLayout",{metadata:{designTime:true,library:"sap.ovp",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},defaultAggregation:"content",events:{afterRendering:{},afterDragEnds:{}},properties:{dragAndDropRootSelector:{group:"Misc",type:"string"},dragAndDropEnabled:{group:"Misc",type:"boolean",defaultValue:true},debounceTime:{group:"Misc",type:"int",defaultValue:150}}},renderer:{apiVersion:2,render:function(t,e){var s=function(t){return t.getVisible()};var o=function(t){var a=this.getId();var e=a.indexOf("---")+3;var s=a.substring(e);return t.id===s.split("--")[1]};var r=e.$().width();var i=l.getRTL();var n=e.dashboardLayoutUtil.updateLayoutData(r?r:window.innerWidth);var d=e.dashboardLayoutUtil.getCards(n.colCount);var u=e.getContent().filter(s);t.openStart("div",e);t.class("sapUshellEasyScanLayout");t.class("sapOvpDashboard");if(!a.system.phone){t.class("sapOvpDashboardDragAndDrop")}if(i){t.style("margin-right",n.marginPx+"px")}else{t.style("margin-left",n.marginPx+"px")}t.openEnd();t.openStart("div");t.class("sapUshellEasyScanLayoutInner");t.accessibilityState(undefined,{role:"list"});t.attr("aria-label","Cards");if(d.length>0){t.attr("tabindex",0)}t.openEnd();if(d.length>0){var h={},c,p,y,f=e.getDashboardLayoutModel().getColCount();for(c=0,p=u.length;c<p;c++){var b=["easyScanLayoutItemWrapper","sapOvpDashboardLayoutItem"];h=d.filter(o.bind(u[c]))[0];e.dashboardLayoutUtil.setCardCssValues(h);y=h.dashboardLayout.column+h.dashboardLayout.colSpan===f+1;if(y){h.dashboardLayout.colSpan===1?b.push("sapOvpNotResizableLeftRight"):b.push("sapOvpNotResizableRight")}if(h.template==="sap.ovp.cards.stack"||h.settings.stopResizing||!a.system.desktop){b.push("sapOvpDashboardLayoutItemNoDragIcon")}t.openStart("div",e.dashboardLayoutUtil.getCardDomId(h.id));for(var g=0;g<b.length;g++){t.class(b[g])}var m="translate3d("+h.dashboardLayout.left+" ,"+h.dashboardLayout.top+" ,0px)";t.style("transform",m);t.style("-ms-transform",m);t.style("-moz-transform",m);t.style("-webkit-transform",m);t.style("height",h.dashboardLayout.height);t.style("width",h.dashboardLayout.width);t.attr("aria-setsize",p);t.attr("aria-posinset",c+1);t.attr("tabindex",0);t.accessibilityState(undefined,{role:"listitem"});t.openEnd();t.renderControl(u[c]);t.openStart("div").class("lastElement").accessibilityState(undefined,{role:"none"}).attr("tabindex",0).openEnd();t.close("div");t.close("div")}}t.close("div");t.openStart("div");t.class("after");if(d.length>0){t.attr("tabindex",0).accessibilityState(undefined,{role:"none"})}t.openEnd();t.close("div");t.close("div")}},init:function(){this.oColumnLayoutData={};this.resizeHandlerId=this.initResizeHandler();var t=i.getComponentById(this._sOwnerId);this.dashboardLayoutUtil=t.getDashboardLayoutUtil();this.dashboardLayoutUtil.setLayout(this);if(this.dashboardLayoutUtil.dashboardLayoutModel.getCards().length===0){this.data("sap-ui-fastnavgroup","false",false)}else{this.data("sap-ui-fastnavgroup","true",true)}},exit:function(){if(this.resizeHandlerId){e.deregister(this.resizeHandlerId)}if(this.layoutDragAndDrop){this.layoutDragAndDrop.destroy();delete this.layoutDragAndDrop}},onBeforeRendering:function(){},onAfterRendering:function(){this.keyboardNavigation=new u(this);if(!this.getDragAndDropRootSelector()){this.setDragAndDropRootSelector("#"+this.getId())}if(this.layoutDragAndDrop){this.layoutDragAndDrop.destroy()}if(this.getDragAndDropEnabled()){this.layoutDragAndDrop=this.dashboardLayoutUtil.getRearrange({rootSelector:this.getDragAndDropRootSelector(),layout:this});this.dashboardLayoutUtil.setAriaPos();this.fireAfterRendering()}},getLayoutDataJSON:function(){return this.dashboardLayoutUtil.getDashboardLayoutModel().getLayoutVariants4Pers()},filterVisibleCards:function(t){return t.getVisible()},getDashboardLayoutUtil:function(){return this.dashboardLayoutUtil},getDashboardLayoutModel:function(){return this.dashboardLayoutUtil.getDashboardLayoutModel()},getVisibleLayoutItems:function(){var t=this.getContent();var a=t.filter(this.filterVisibleCards);return a},initResizeHandler:function(){var t;var a=this.getDebounceTime();var s=function(e){window.clearTimeout(t);t=window.setTimeout(this.oControl.resizeHandler.bind(this,e),a)};return e.register(this,s)},resizeHandler:function(t){this.oControl.dashboardLayoutUtil.resizeLayout(t.size.width)},setActive:function(t){if(t){this.removeStyleClass("ovpOverlay")}else{this.addStyleClass("ovpOverlay")}},getActive:function(){return!this.hasStyleClass("ovpOverlay")}});var u=function(t){this.init(t)};u.prototype.init=function(t){this.sCurrentFocusId="";this.layoutUtil=t.getDashboardLayoutUtil();this.layoutModel=t.getDashboardLayoutModel();this.keyCodes=o;this.jqElement=t.$();this.bIgnoreSelfFocus=false;this.sLastFocusableCard=null;this.lastFocussedElement=null;var a=this;this.jqElement.on("keydown",function(t){a.keyDownHandler.call(a,t)});this.jqElement.on("keyup",function(t){a.keyUpHandler.call(a,t)});this.jqElement.find(".sapUshellEasyScanLayoutInner").on("focus.keyboardNavigation",function(t){a.layoutFocusHandler.call(a,t)});this.jqElement.on("focus.keyboardNavigation",".easyScanLayoutItemWrapper",this.layoutItemFocusHandler);var e=document.querySelectorAll(".ovpWrapper .sapFDynamicPageContent");var s=function(t){a.layoutClickHandler.call(a,t)};for(var r=0;r<e.length;r++){e[r].addEventListener("click",s)}this.jqElement.find(".after").on("focus.keyboardNavigation",function(t){a.afterFocusHandler.call(a,t)})};u.prototype.spacebarHandler=function(t){var a=n.getElementById(t.target.id);if(a&&a.mEventRegistry.hasOwnProperty("press")){var e="#"+t.target.id;var s=document.querySelectorAll(e);for(var o=0;o<s.length;o++){s[o].classList.add("sapMLIBActive")}a.firePress()}};u.prototype.layoutItemFocusHandler=function(){var t=jQuery(document.activeElement);if(t){var a,e="";if(t.find(".valueStateText").length==1){var o=t.find(".valueStateText").find(".sapMObjectNumberText").text();var r=t.find(".valueStateText").find(".sapUiInvisibleText").text();t.find(".valueStateText").attr("aria-label",o+" "+r);t.find(".valueStateText").attr("aria-labelledby","")}t.find("[role='listitem']").attr("aria-label","");if(t.hasClass("easyScanLayoutItemWrapper")){var i="";var n=t.find(".cardCount");if(n.length===0){i="countDiv_"+(new Date).getTime();var l='<div id="'+i+'" class="cardCount"'+'" hidden></div>';t.append(l)}else{i=n[0].id}e+=i+" ";var d=t.find(".cardType");if(d.length!==0){e+=d[0].id+" "}}var u="cardHeaderType_";if(t.hasClass("sapOvpCardHeader")&&!t.hasClass("sapOvpStackCardContent")){var h="";var c=t.find(".cardHeaderType");if(c.length===0){var p=s.getText("CardHeaderType");h=u+(new Date).getTime();var y='<div id="'+h+'" class="cardHeaderType" aria-label="'+p+'" hidden></div>';t.append(y)}else{h=c[0].id}e+=h+" "}var f,b;if(t.hasClass("easyScanLayoutItemWrapper")){b=t.find(".sapOvpCardHeader");f=b.find("[aria-label]")}else{f=t.find("[aria-label]")}var g=t.find(".sapOvpStackCardHeader").length!==1;if(g){var m=[u,"sapOvpCardAdditionalActions","listItem","linkListItem"];var v=function(t){return!m.some(function(a){return t.includes(a)})};for(a=0;a<f.length;a++){var C=f[a].id;var L=C&&v(C);if(L){e+=C+" "}}}if(t.hasClass("sapOvpCardHeader")){var S=t.find(".cardHeaderText");if(S.length!==0){for(var a=0;a<S.length;a++){if(e.indexOf(S[a].id)===-1){e+=S[a].id+" "}}}}if(e.length){t.attr("aria-labelledby",e)}if(t.prop("nodeName")==="LI"&&t.find(".linkListHasPopover").length!==0){if(t.find("#hasDetails").length===0){t.append("<div id='hasDetails' hidden>"+s.getText("HAS_DETAILS")+"</div>");t.attr("aria-describedby","hasDetails")}}var I=t.attr("id");if(I&&I.indexOf("ovpTable")!=-1&&t.find("[role='Link']")&&!t.hasClass("sapUiCompSmartLink")){var E=t.closest("td").attr("data-sap-ui-column"),F=t.closest("tbody").siblings().children().filter("tr").children();for(var a=0;a<F.length;a++){if(F[a].getAttribute("data-sap-ui")==E&&F[a].hasChildNodes("span")){var D=F[a].firstElementChild.getAttribute("id");t.attr("aria-labelledby",D)}}}}};u.prototype.layoutFocusHandler=function(t){t.stopImmediatePropagation();if(jQuery(t.relatedTarget).hasClass("easyScanLayoutItemWrapper")){return}if(this.sLastFocusableCard){this.sLastFocusableCard=jQuery(this.sLastFocusableCard);if(!this.sLastFocusableCard.is(this.lastFocussedElement)&&t.relatedTarget){this.sLastFocusableCard.focus();this.layoutUtil.sLastFocusableCard=this.sLastFocusableCard}else{this.lastFocussedElement=undefined}return}this.jqElement.find(".easyScanLayoutItemWrapper").first().focus();this.sLastFocusableCard=this.jqElement.find(".easyScanLayoutItemWrapper").first();this.layoutUtil.sLastFocusableCard=this.sLastFocusableCard};u.prototype.layoutClickHandler=function(t){if(t&&t.target&&t.target.getAttribute("id")&&t.target.getAttribute("id").indexOf("mainView")!==-1){if(this.sLastFocusableCard){this.sLastFocusableCard.focus();this.layoutUtil.sLastFocusableCard=this.sLastFocusableCard;return}this.jqElement.find(".easyScanLayoutItemWrapper").first().focus();this.sLastFocusableCard=this.jqElement.find(".easyScanLayoutItemWrapper").first();this.layoutUtil.sLastFocusableCard=this.sLastFocusableCard}};u.prototype.ctrlArrowHandler=function(t,a){var e=this.layoutUtil.dashboardLayoutModel.getCardById(a),s=t.dashboardLayout.row,o=e.dashboardLayout.row,r=e.dashboardLayout.column,i=[],n;if(o>s&&e.dashboardLayout.rowSpan>=t.dashboardLayout.rowSpan){n=s+e.dashboardLayout.rowSpan}else{n=o}this.layoutUtil.dashboardLayoutModel._arrangeCards(t,{row:n,column:r},"drag",i);this.layoutUtil.dashboardLayoutModel._removeSpaceBeforeCard(i);this.layoutUtil._positionCards(this.layoutModel.aCards);this.layoutUtil.oLayoutCtrl.fireAfterDragEnds({positionChanges:i})};u.prototype.shiftArrowHandler=function(t,a,e){if(t.template==="sap.ovp.cards.stack"){return}this.resizeStartHandler(t,e);var s=this.layoutUtil.calculateCardProperties(t.id),o=s.leastHeight+2*this.layoutUtil.CARD_BORDER_PX,r=Math.ceil(o/this.layoutUtil.getRowHeightPx());if(a.rowSpan<=r){a.rowSpan=r;a.showOnlyHeader=true;e.classList.add("sapOvpMinHeightContainer")}else{a.showOnlyHeader=false;e.classList.remove("sapOvpMinHeightContainer")}var i=this.layoutUtil.dashboardLayoutModel.resizeCard(t.id,a,true,this.layoutUtil.dragOrResizeChanges);this.resizeStopHandler(i.resizeCard,e)};u.prototype.resizeStartHandler=function(t,a){this.layoutUtil.dragOrResizeChanges=[];this.layoutUtil.resizeStartCard={cardId:t.id,rowSpan:t.dashboardLayout.rowSpan,colSpan:t.dashboardLayout.colSpan,maxColSpan:t.dashboardLayout.maxColSpan,noOfItems:t.dashboardLayout.noOfItems,autoSpan:t.dashboardLayout.autoSpan,showOnlyHeader:t.dashboardLayout.showOnlyHeader};a.classList.add("sapOvpCardResize");t.dashboardLayout.autoSpan=false};u.prototype.resizeStopHandler=function(t,a){a.classList.remove("sapOvpCardResize");a.style.zIndex="auto";this.layoutUtil._sizeCard(t);this.layoutUtil._positionCards(this.layoutModel.aCards);t.dashboardLayout.maxColSpan=t.dashboardLayout.colSpan;this.layoutUtil.dragOrResizeChanges.push({changeType:"dragOrResize",content:{cardId:t.id,dashboardLayout:{rowSpan:t.dashboardLayout.rowSpan,oldRowSpan:this.layoutUtil.resizeStartCard.rowSpan,colSpan:t.dashboardLayout.colSpan,oldColSpan:this.layoutUtil.resizeStartCard.colSpan,maxColSpan:t.dashboardLayout.maxColSpan,oldMaxColSpan:this.layoutUtil.resizeStartCard.maxColSpan,noOfItems:t.dashboardLayout.noOfItems,oldNoOfItems:this.layoutUtil.resizeStartCard.noOfItems,autoSpan:t.dashboardLayout.autoSpan,oldAutoSpan:this.layoutUtil.resizeStartCard.autoSpan,showOnlyHeader:t.dashboardLayout.showOnlyHeader,oldShowOnlyHeader:this.layoutUtil.resizeStartCard.showOnlyHeader}},isUserDependent:true});this.layoutUtil.getDashboardLayoutModel().extractCurrentLayoutVariant();this.layoutUtil.oLayoutCtrl.fireAfterDragEnds({positionChanges:this.layoutUtil.dragOrResizeChanges})};u.prototype.keyUpHandler=function(t){switch(t.keyCode){case this.keyCodes.SPACE:this.spacebarHandler(t);break;case this.keyCodes.F6:if(t.shiftKey){var a=document.getElementsByClassName("sapUshellEasyScanLayoutInner");if(a[0].firstElementChild){document.getElementById(a[0].firstElementChild.id).focus()}this.handleScrollBar(true)}break;default:break}};u.prototype.keyDownHandler=function(t){var a=document.activeElement,e=this.layoutUtil.getCardId(a.id),s=Object.assign([],this.layoutModel.aCards),o=this.layoutModel.getCardById(e),i=this.layoutModel.iColCount,n={},d,u,h,c,p,y,f,b,g=l.getRTL(),m=jQuery(document.activeElement);this.layoutModel._sortCardsByRow(s);for(var v=1;v<=i;v++){n[v]=[]}for(var C=0;C<s.length;C++){d=s[C].dashboardLayout.column;u=s[C].dashboardLayout.colSpan;if(u===1){n[d].push(s[C])}else{for(var L=d;L<d+u;L++){n[L].push(s[C])}}}if(o){c=this.getCardPosition(e,n[o.dashboardLayout.column])}if(this.layoutUtil.getCards().length===0){this.sLastFocusableCard=null}switch(t.keyCode){case this.keyCodes.TAB:if(t.shiftKey){this.shiftTabButtonHandler(t)}else{this.tabButtonHandler(t)}break;case this.keyCodes.F6:t.stopImmediatePropagation();if(t.shiftKey){this.bIgnoreSelfFocus=true;this.jqElement.find(".sapUshellEasyScanLayoutInner").focus();r.handleF6GroupNavigation(t);var S=document.activeElement;this.sCurrentFocusId=S.id;if(this.sCurrentFocusId){document.getElementById(this.sCurrentFocusId).focus()}}else{this.bIgnoreSelfFocus=true;var I=this.jqElement.scrollTop();this.jqElement.find(".after").focus();r.handleF6GroupNavigation(t);this.jqElement.scrollTop(I);var E=document.getElementById("shell-header")&&document.getElementById("shell-header").firstChild;var F=E&&E.firstChild;if(F&&F.tabIndex===0){document.getElementById(F.id).focus()}this.handleScrollBar(true)}break;case this.keyCodes.F7:t.preventDefault();if(m.hasClass("easyScanLayoutItemWrapper")){m.find(":sapTabbable").first().focus()}else{m.closest(".easyScanLayoutItemWrapper").focus()}break;case this.keyCodes.ARROW_UP:t.preventDefault();h=o.dashboardLayout.column;c--;p=n[h][c]&&n[h][c].id;if(p&&t.ctrlKey){this.ctrlArrowHandler(o,p);this.setFocusOnCard(e)}else if(t.shiftKey){b={rowSpan:o.dashboardLayout.rowSpan-3,colSpan:o.dashboardLayout.colSpan};this.shiftArrowHandler(o,b,t.target);this.setFocusOnCard(e)}else if(m&&m.hasClass("easyScanLayoutItemWrapper")){this.setFocusOnCard(p);this.handleScrollBar(false)}break;case this.keyCodes.ARROW_DOWN:t.preventDefault();h=o.dashboardLayout.column;c++;p=n[h][c]&&n[h][c].id;if(p&&t.ctrlKey){this.ctrlArrowHandler(o,p);this.setFocusOnCard(e)}else if(t.shiftKey){if((o.template==="sap.ovp.cards.linklist"||o.template==="sap.ovp.cards.v4.linklist")&&o.settings.listFlavor==="carousel"&&o.dashboardLayout.rowSpan>=45){return}b={rowSpan:o.dashboardLayout.rowSpan+3,colSpan:o.dashboardLayout.colSpan};this.shiftArrowHandler(o,b,t.target);this.setFocusOnCard(e)}else{this.setFocusOnCard(p)}break;case this.keyCodes.ARROW_LEFT:var D=jQuery(document.activeElement);if(!D.hasClass("easyScanLayoutItemWrapper")){return}t.preventDefault();h=o.dashboardLayout.column;h--;if(!n[h]||!n[h][c]){do{if(h===0){h=i;c--;break}if(c<0){break}h--}while(!n[h]||!n[h][c])}p=n[h][c]&&n[h][c].id;if(p&&t.ctrlKey){this.ctrlArrowHandler(o,p);this.setFocusOnCard(e)}else if(t.shiftKey){if(g){if(o.template==="sap.ovp.cards.list"&&o.dashboardLayout.colSpan===2||(o.template==="sap.ovp.cards.linklist"||o.template==="sap.ovp.cards.v4.linklist")&&o.settings.listFlavor==="carousel"&&o.dashboardLayout.colSpan===3){return}b={rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan+1}}else{if(o.dashboardLayout.colSpan===1){return}b={rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan-1}}this.shiftArrowHandler(o,b,t.target);this.setFocusOnCard(e)}else{this.setFocusInCaseOfSpace(o,"Left");t.stopImmediatePropagation()}break;case this.keyCodes.ARROW_RIGHT:t.preventDefault();h=o.dashboardLayout.column+o.dashboardLayout.colSpan;if(!n[h]||!n[h][c]){do{if(h>i){h=1;c++;break}h++}while(!n[h]||!n[h][c])}p=n[h][c]&&n[h][c].id;if(p&&t.ctrlKey){this.ctrlArrowHandler(o,p);this.setFocusOnCard(e)}else if(t.shiftKey){if(g){if(o.dashboardLayout.colSpan===1){return}b={rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan-1}}else{if(o.template==="sap.ovp.cards.list"&&o.dashboardLayout.colSpan===2||(o.template==="sap.ovp.cards.linklist"||o.template==="sap.ovp.cards.v4.linklist")&&o.settings.listFlavor==="carousel"&&o.dashboardLayout.colSpan===3){return}b={rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan+1}}this.shiftArrowHandler(o,b,t.target);this.setFocusOnCard(e)}else{this.setFocusInCaseOfSpace(o,"Right");t.stopImmediatePropagation()}break;case this.keyCodes.PAGE_UP:t.preventDefault();h=o.dashboardLayout.column;if(t.altKey==true){h===1?c=0:h=1;p=n[h][c]&&n[h][c].id}else{y=n[h].length-1;for(var v=y;v>0;v--){f=document.getElementById(this.layoutUtil.getCardDomId(n[h][v].id));if(f.getBoundingClientRect().bottom<0){p=n[h][v].id;break}}if(!p){p=n[h][0].id}}this.setFocusOnCard(p);break;case this.keyCodes.PAGE_DOWN:t.preventDefault();h=o.dashboardLayout.column;if(t.altKey==true){p=h+o.dashboardLayout.colSpan>i?s[s.length-1].id:n[i][c]&&n[i][c].id}else{var O=jQuery(window).height();y=n[h].length;for(var v=0;v<y;v++){f=document.getElementById(this.layoutUtil.getCardDomId(n[h][v].id));if(f.getBoundingClientRect().top>O){p=n[h][v].id;break}}if(!p){p=n[h][y-1].id}}this.setFocusOnCard(p);break;case this.keyCodes.HOME:t.preventDefault();h=o.dashboardLayout.column;if(t.ctrlKey==true){c===0?h=1:c=0}else{h===1?c=0:h=1}p=n[h][c]&&n[h][c].id;this.setFocusOnCard(p);break;case this.keyCodes.END:t.preventDefault();h=o.dashboardLayout.column;if(t.ctrlKey==true){var w=n[h].length-1;p=w===c?s[s.length-1].id:n[h][w]&&n[h][w].id}else{p=h+o.dashboardLayout.colSpan>i?s[s.length-1].id:n[i][c]&&n[i][c].id}this.setFocusOnCard(p);break;case this.keyCodes.ENTER:t.stopImmediatePropagation();this.spacebarHandler(t);break;default:break}};u.prototype.handleScrollBar=function(t){var a=this.layoutUtil.componentDomId+"--ovpMain";if(a){var e=n.getElementById(a);if(e){setTimeout(function(){var a=e.getScrollDelegate();if(a){var s=a.getScrollTop();var o=document.activeElement.getBoundingClientRect().top;var r=t?0:s-o-32;a.scrollTo(0,r)}},0)}}};u.prototype.setFocusInCaseOfSpace=function(t,a){var e=Object.assign([],this.layoutModel.aCards),s=this.layoutUtil.ariaPos,o=s[t.id],r=e.filter(function(t){return a==="Right"?s[t.id]===o+1:s[t.id]===o-1},s);this.setFocusOnCard(r[0]&&r[0].id)};u.prototype.setFocusOnCard=function(t){if(t){var a=document.getElementById(this.layoutUtil.getCardDomId(t));a&&a.focus();this.sLastFocusableCard=a;this.layoutUtil.sLastFocusableCard=this.sLastFocusableCard}};u.prototype.getCardPosition=function(t,a){for(var e=0;e<a.length;e++){if(a[e].id===t){break}}return e};u.prototype.tabButtonHandler=function(t){var a=jQuery(document.activeElement);this.lastFocussedElement=a;if(a.hasClass("easyScanLayoutItemWrapper")){return}var e=a.closest(".easyScanLayoutItemWrapper");if(!e.length){return}var s=e.find(jQuery(".lastElement"));if(a.is(s)){t.stopPropagation();t.stopImmediatePropagation();var o=this.jqElement.scrollTop();this._ignoreSelfFocus=true;this.jqElement.find(".after").focus();this.jqElement.scrollTop(o)}};u.prototype.shiftTabButtonHandler=function(t){var a=jQuery(document.activeElement);if(a.hasClass("after")&&this.lastFocussedElement){this.lastFocussedElement.focus();return}if(!a.hasClass("easyScanLayoutItemWrapper")){return}this._ignoreSelfFocus=true;this.lastFocussedElement=a;this.jqElement.find(".sapUshellEasyScanLayoutInner").focus()};u.prototype.afterFocusHandler=function(t){t.stopImmediatePropagation();if(this._ignoreSelfFocus){this._ignoreSelfFocus=false;return}var a,e;if(this.lastFocussedElement&&this.lastFocussedElement.hasClass("lastElement")){a=this.jqElement.find(this.lastFocussedElement.parent());e=a.find(":sapTabbable").last()}else if(this.lastFocussedElement&&this.lastFocussedElement.hasClass("easyScanLayoutItemWrapper")){e=this.lastFocussedElement}else{a=this.jqElement.find(".easyScanLayoutItemWrapper:sapTabbable").first();e=a.find(":sapTabbable").last()}if(!e.length){e=a}e.focus()};return d});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/DashboardLayoutModel", ["sap/ovp/cards/CommonUtils","sap/base/util/merge"],function(a,o){"use strict";var t=function(a,o,t,r){this.uiModel=a;this.setColCount(o);this.aCards=[];this.oLayoutVars=null;this.iDisplaceRow=null;this.iDummyRow=999;this.iRowHeightPx=t;this.iCardBorderPx=r};t.prototype.setColCount=function(a){if(!a){this.iColCount=5}else if(a!==this.iColCount){this.iColCount=a}};t.prototype.setLayoutVars=function(a){if(Array.isArray(a)&&a.length>0){this.oLayoutVars=a}this._buildGrid()};t.prototype.updateCardVisibility=function(a){var o,t;function r(o){return o.id===a[s].id}for(var s=0;s<a.length;s++){o=this.oLayoutVars.filter(r);t=this.aCards.filter(r);if(!a[s].visibility){o[0].dashboardLayout["C"+this.iColCount].row=this._findHighestOccupiedRow();t[0].dashboardLayout.row=o[0].dashboardLayout["C"+this.iColCount].row}o[0].visibility=a[s].visibility;t[0].dashboardLayout.visible=a[s].visibility}};t.prototype.getColCount=function(){return this.iColCount};t.prototype.getCards=function(a){if(this.aCards.length===0||a&&a!==this.iColCount){if(a){this.setColCount(a)}this._buildGrid()}return this.aCards};t.prototype.getCardById=function(a){var o=null,t=0;for(t=0;t<this.aCards.length;t++){o=this.aCards[t];if(o.id===a){break}}return o};t.prototype.getLayoutVariants4Pers=function(){return JSON.parse(JSON.stringify(this.oLayoutVars))};t.prototype._readVariants=function(){var a,o,t=this.uiModel.getProperty("/dashboardLayout");function r(a){return a.id===o}if(!!t){for(var s in t){if(t.hasOwnProperty(s)&&t[s]){a=t[s];a.id=s;for(o in a){var e=this.oLayoutVars.filter(r);if(e.length>0){var d="C"+ +a.id.replace(/[^0-9\.]/g,"");var i=e[0].dashboardLayout[d];var n=this.aCards.filter(r);if(Array.isArray(n)&&n.length>0){if(i){i.row=a[o].row;i.col=a[o].col;i.colSpan=n[0].template==="sap.ovp.cards.stack"?1:Math.min(a[o].colSpan,this.iColCount);i.maxColSpan=a[o].maxColSpan;i.noOfItems=a[o].rowSpan}else{e[0].dashboardLayout[d]={row:a[o].row,col:a[o].col,colSpan:n[0].template==="sap.ovp.cards.stack"?1:Math.min(a[o].colSpan,this.iColCount),maxColSpan:a[o].maxColSpan,noOfItems:a[o].rowSpan,autoSpan:n[0].template==="sap.ovp.cards.stack"?false:true}}e[0].visibility=true;if(a[o].visible!==undefined){e[0].visibility=a[o].visible}}}}}}}};t.prototype.resetToManifest=function(){this.oLayoutVars=null;for(var a=0;a<this.aCards.length;a++){this.aCards[a].dashboardLayout={}}this._buildGrid(true)};t.prototype._buildGrid=function(a){if(this.aCards.length===0||a){this.aCards=o([],this.uiModel.getProperty("/cards"))}if(a||!this.oLayoutVars||this.oLayoutVars[0]&&!this.oLayoutVars[0].dashboardLayout){this.oLayoutVars=[];this._sliceSequenceSausage()}else{this._sliceSequenceSausage(this.oLayoutVars)}this._readVariants()};t.prototype._displaceCardToEnd=function(a){a.dashboardLayout.column=1;if(!this.iDisplaceRow){this.iDisplaceRow=this._findHighestOccupiedRow()}a.dashboardLayout.row=this.iDisplaceRow;this.iDisplaceRow+=a.dashboardLayout.rowSpan;var o=this.oLayoutVars.filter(function(o){return o.id===a.id});if(o.length>0){o[0].dashboardLayout["C"+this.iColCount].row=a.dashboardLayout.row}};t.prototype._setCardSpanFromDefault=function(a){if(!a.dashboardLayout){a.dashboardLayout={}}var o=this._getDefaultCardItemHeightAndCount(a);if(!a.settings.defaultSpan){if(a.template!=="sap.ovp.cards.linklist"&&a.template!=="sap.ovp.cards.v4.linklist"){a.dashboardLayout.rowSpan=12}else if(a.template==="sap.ovp.cards.linklist"||a.template==="sap.ovp.cards.v4.linklist"){a.dashboardLayout.rowSpan=1}a.dashboardLayout.colSpan=1;a.dashboardLayout.maxColSpan=1;a.dashboardLayout.noOfItems=o.noOfItems;a.dashboardLayout.autoSpan=a.template==="sap.ovp.cards.stack"?false:true;a.dashboardLayout.showOnlyHeader=false}else{if(a.settings.defaultSpan.showOnlyHeader){a.dashboardLayout.rowSpan=Math.ceil((o.headerHeight+2*this.iCardBorderPx)/this.iRowHeightPx);a.dashboardLayout.noOfItems=0;a.dashboardLayout.autoSpan=false;a.dashboardLayout.showOnlyHeader=true}else{if(a.template==="sap.ovp.cards.linklist"||a.template==="sap.ovp.cards.v4.linklist"){a.dashboardLayout.rowSpan=a.settings.defaultSpan.rows?a.settings.defaultSpan.rows:1;a.dashboardLayout.autoSpan=false}else{a.dashboardLayout.rowSpan=8;a.dashboardLayout.autoSpan=true}a.dashboardLayout.noOfItems=a.settings.defaultSpan.rows?a.settings.defaultSpan.rows:o.noOfItems;a.dashboardLayout.showOnlyHeader=false}if(a.template==="sap.ovp.cards.stack"){a.dashboardLayout.colSpan=1;a.dashboardLayout.autoSpan=false}else{a.dashboardLayout.colSpan=a.settings.defaultSpan.cols?Math.min(a.settings.defaultSpan.cols,this.iColCount):1}a.dashboardLayout.maxColSpan=a.settings.defaultSpan.cols?a.settings.defaultSpan.cols:1}a.dashboardLayout.visible=true;a.dashboardLayout.itemHeight=o.itemHeight;a.dashboardLayout.headerHeight=o.headerHeight};t.prototype._sliceSequenceSausage=function(a){var o=0,t=0,r=0,s=0,e=0,d={},i=[],n="C"+this.iColCount,u;for(o=0;o<this.iColCount;o++){i.push({col:o+1,rows:0})}function h(a){return a.id===d.id}function l(a,o){return o!==a}for(o=0;o<this.aCards.length;o++){d=this.aCards[o];if(!d.dashboardLayout){d.dashboardLayout={}}if(!a){this._setCardSpanFromDefault(d)}else{var y=a.filter(h);if(y.length>0){var p=y[0].dashboardLayout,L=p[n],b=Object.keys(p),c=b.filter(l.bind(this,n));if(c.length>0){u=p[c];if(u){this._mergeLayoutVariants(d.dashboardLayout,u)}}else{this._mergeLayoutVariants(d.dashboardLayout,L);continue}}else{d.dashboardLayout.row=this.iDummyRow;d.dashboardLayout.column=1;var f={};var C={row:d.dashboardLayout.row,col:d.dashboardLayout.column,rowSpan:d.dashboardLayout.rowSpan,colSpan:d.dashboardLayout.colSpan,maxColSpan:d.dashboardLayout.maxColSpan,noOfItems:d.dashboardLayout.noOfItems,autoSpan:d.dashboardLayout.autoSpan,showOnlyHeader:d.dashboardLayout.showOnlyHeader};f[n]=C;a.push({id:d.id,visibility:d.dashboardLayout.visible,selectedKey:d.settings.selectedKey,dashboardLayout:f});continue}}d.dashboardLayout.colSpan=d.dashboardLayout.maxColSpan;d.dashboardLayout.colSpan=d.dashboardLayout.colSpan>this.iColCount?this.iColCount:d.dashboardLayout.colSpan;r=s<this.iColCount?s+1:1;if(r+d.dashboardLayout.colSpan-1>this.iColCount){d.dashboardLayout.colSpan=this.iColCount-r+1}s=r+d.dashboardLayout.colSpan-1;d.dashboardLayout.column=r;e=0;if(Array.isArray(y)&&y.length>0&&!y[0].visibility){d.dashboardLayout.row=this.iDummyRow}else{for(t=d.dashboardLayout.column;t<d.dashboardLayout.column+d.dashboardLayout.colSpan;t++){if(i[t-1].rows>e){e=i[t-1].rows}}d.dashboardLayout.row=e+1;for(t=d.dashboardLayout.column;t<d.dashboardLayout.column+d.dashboardLayout.colSpan;t++){i[t-1].rows=e+d.dashboardLayout.rowSpan}}}this.extractCurrentLayoutVariant()};t.prototype._mergeLayoutVariants=function(a,o){if(o.rowSpan){a.rowSpan=o.rowSpan}if(o.colSpan){a.colSpan=o.colSpan}if(o.maxColSpan){a.maxColSpan=o.maxColSpan}if(o.noOfItems){a.noOfItems=o.noOfItems}if(o.hasOwnProperty("autoSpan")){a.autoSpan=o.autoSpan}if(o.row){a.row=o.row}if(o.col){a.column=o.col}if(o.hasOwnProperty("showOnlyHeader")){a.showOnlyHeader=o.showOnlyHeader}};t.prototype._sortCardsByRow=function(a){a.sort(function(a,o){if(!a.dashboardLayout&&o.dashboardLayout){return 1}else if(a.dashboardLayout&&!o.dashboardLayout){return-1}if(a.dashboardLayout.column&&a.dashboardLayout.row&&a.dashboardLayout.row===o.dashboardLayout.row){if(a.dashboardLayout.column<o.dashboardLayout.column){return-1}else if(a.dashboardLayout.column>o.dashboardLayout.column){return 1}}else if(a.dashboardLayout.row){return a.dashboardLayout.row-o.dashboardLayout.row}else{return 0}})};t.prototype.resizeCard=function(a,o,t,r){var s=this.getCardById(a);if(!s){return[]}var e=o.colSpan-s.dashboardLayout.colSpan;var d=o.rowSpan-s.dashboardLayout.rowSpan;s.dashboardLayout.showOnlyHeader=o.showOnlyHeader;if(e===0&&d===0){return{resizeCard:s,affectedCards:[]}}else if(t&&s.dashboardLayout.autoSpan){s.dashboardLayout.autoSpan=false}if(!t||d&&e===0){this._arrangeCards(s,{row:o.rowSpan,column:s.dashboardLayout.colSpan},"resize",r)}else{this._arrangeCards(s,{row:o.rowSpan,column:o.colSpan},"resize",r)}return{resizeCard:s,affectedCards:this._removeSpaceBeforeCard(r)}};t.prototype._removeSpaceBeforeCard=function(a){this._sortCardsByRow(this.aCards);var o={};for(var t=1;t<=this.iColCount;t++){o[t]=1}for(var r=0;r<this.aCards.length;r++){var s=this.aCards[r].dashboardLayout.column,e=this.aCards[r].dashboardLayout.column+this.aCards[r].dashboardLayout.colSpan-1;if(this.aCards[r].dashboardLayout.visible){if(e>this.iColCount){e=this.iColCount;var d=this.iColCount-this.aCards[r].dashboardLayout.column+1;if(a){a.push({changeType:"dragOrResize",content:{cardId:this.aCards[r].id,dashboardLayout:{colSpan:d,oldColSpan:this.aCards[r].dashboardLayout.colSpan}},isUserDependent:true})}this.aCards[r].dashboardLayout.colSpan=d}if(this.aCards[r].dashboardLayout.colSpan>1){var i=[];for(var n=s;n<=e;n++){i.push(o[n])}var u=Math.max.apply(Math,i);for(var h=s;h<=e;h++){o[h]=u+this.aCards[r].dashboardLayout.rowSpan}if(a&&u!==this.aCards[r].dashboardLayout.row){a.push({changeType:"dragOrResize",content:{cardId:this.aCards[r].id,dashboardLayout:{row:u,oldRow:this.aCards[r].dashboardLayout.row}},isUserDependent:true})}this.aCards[r].dashboardLayout.row=u}else{if(this.aCards[r].dashboardLayout.row!==o[s]){if(a){a.push({changeType:"dragOrResize",content:{cardId:this.aCards[r].id,dashboardLayout:{row:o[s],oldRow:this.aCards[r].dashboardLayout.row}},isUserDependent:true})}this.aCards[r].dashboardLayout.row=o[s]}o[s]=this.aCards[r].dashboardLayout.row+this.aCards[r].dashboardLayout.rowSpan}}}return this.aCards};t.prototype._arrangeCards=function(a,t,r,s){var e=o({},a);var d=false;if(r==="drag"&&a.dashboardLayout.column===t.column&&t.row!==a.dashboardLayout.row){d=true}this._sortCardsByRow(this.aCards);var i=[];var n=false;var u;if(r==="drag"){a.dashboardLayout.row=t.row;a.dashboardLayout.column=t.column}else if(r==="resize"){a.dashboardLayout.rowSpan=t.row;a.dashboardLayout.colSpan=t.column}i.push(a);for(var h=0;h<i.length;h++){for(var l=0;l<this.aCards.length;l++){if(i[h].id===this.aCards[l].id||!i[h].dashboardLayout.visible){continue}else{n=this._checkOverlapOfCards(i[h],this.aCards[l]);if(n===true){if(d){if(t.row<e.dashboardLayout.row&&t.row===this.aCards[l].dashboardLayout.row){i[h].dashboardLayout.row=this.aCards[l].dashboardLayout.row;u=this.aCards[l].dashboardLayout.row;this.aCards[l].dashboardLayout.row=i[h].dashboardLayout.row+i[h].dashboardLayout.rowSpan;if(s){s.push({changeType:"dragOrResize",content:{cardId:this.aCards[l].id,dashboardLayout:{row:this.aCards[l].dashboardLayout.row,oldRow:u}},isUserDependent:true})}}else if(t.row>e.dashboardLayout.row+this.aCards[l].dashboardLayout.rowSpan){u=this.aCards[l].dashboardLayout.row;this.aCards[l].dashboardLayout.row=e.dashboardLayout.row;i[h].dashboardLayout.row=this.aCards[l].dashboardLayout.row+this.aCards[l].dashboardLayout.rowSpan;i.push(i[h]);if(s){s.push({changeType:"dragOrResize",content:{cardId:this.aCards[l].id,dashboardLayout:{row:this.aCards[l].dashboardLayout.row,oldRow:u}},isUserDependent:true})}}}else{u=this.aCards[l].dashboardLayout.row;this.aCards[l].dashboardLayout.row=i[h].dashboardLayout.row+i[h].dashboardLayout.rowSpan;i.push(this.aCards[l]);if(s){s.push({changeType:"dragOrResize",content:{cardId:this.aCards[l].id,dashboardLayout:{row:this.aCards[l].dashboardLayout.row,oldRow:u}},isUserDependent:true})}}}}}}};t.prototype._checkOverlapOfCards=function(a,o){var t=a.dashboardLayout.row;var r=a.dashboardLayout.row+a.dashboardLayout.rowSpan;var s=a.dashboardLayout.column;var e=a.dashboardLayout.column+a.dashboardLayout.colSpan;var d=o.dashboardLayout.row;var i=o.dashboardLayout.row+o.dashboardLayout.rowSpan;var n=o.dashboardLayout.column;var u=o.dashboardLayout.column+o.dashboardLayout.colSpan;var h=false,l=false;if(n>=s&&n<e||u>s&&u<=e||n<=s&&u>=e){h=true}if(d>=t&&d<r||i>t&&i<=r||d<=t&&i>=r){l=true}return h&&l};t.prototype.extractCurrentLayoutVariant=function(){var a=0;var o={};var t=[];function r(a){return a.id===o.id}for(a=0;a<this.aCards.length;a++){o=this.aCards[a];t=this.oLayoutVars.filter(r);var s={};var e={row:o.dashboardLayout.row,col:o.dashboardLayout.column,rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan,maxColSpan:o.dashboardLayout.maxColSpan,noOfItems:o.dashboardLayout.noOfItems,autoSpan:o.dashboardLayout.autoSpan,showOnlyHeader:o.dashboardLayout.showOnlyHeader};s["C"+this.iColCount]=e;if(!(Array.isArray(t)&&t.length!==0)){this.oLayoutVars.push({id:o.id,visibility:o.dashboardLayout.visible,selectedKey:o.settings.selectedKey,dashboardLayout:s})}else{t[0].selectedKey=o.settings.selectedKey||t[0].selectedKey;t[0].dashboardLayout={};t[0].dashboardLayout["C"+this.iColCount]=e}}};t.prototype._findHighestOccupiedRow=function(){var a=0,o=[];function t(a){return a.dashboardLayout.column===s}function r(a,o,t){return a.dashboardLayout.row===Math.max.apply(Math,t.map(function(a){return a.dashboardLayout.row}))}for(var s=1;s<=this.iColCount;s++){var e=this.aCards.filter(t);if(!!e){var d=e.filter(r)[0];if(!!d){var i=d.dashboardLayout.row===undefined?0:+d.dashboardLayout.row;var n=d.dashboardLayout.rowSpan===undefined?0:+d.dashboardLayout.rowSpan;o.push(i+n)}}}a=Math.max.apply(Math,o.map(function(a){return a}));return a};t.prototype._getDefaultCardItemHeightAndCount=function(o){var t=a._setCardpropertyDensityAttribute();var r={List_condensed:{itemLength:5,itemHeight:64},List_condensed_imageSupported_cozy:{itemLength:5,itemHeight:72},List_condensed_imageSupported_compact:{itemLength:5,itemHeight:60},List_extended:{itemLength:3,itemHeight:97},List_condensed_bar:{itemLength:5,itemHeight:65},List_extended_bar:{itemLength:3,itemHeight:95},Table:{itemLength:5,itemHeight:48},Linklist:{itemLength:6,itemHeight:0}};var s={KPIHeader:{1:{1:158,2:174},2:{1:179,2:195},3:{1:201,2:223}},NormalHeader:{1:{1:82,2:98},2:{1:103,2:119},3:{1:125,2:141}}};var e=22;var d=21;var i=0;if(o){var n=o.template,u=o.settings.listType,h=o.settings.listFlavor,l=o.settings.imageSupported,y=0,p=0;if(n=="sap.ovp.cards.list"||n=="sap.ovp.cards.v4.list"){if(u=="extended"){if(h=="bar"){y=r["List_extended_bar"]["itemLength"];p=r["List_extended_bar"]["itemHeight"]}else{y=r["List_extended"]["itemLength"];p=r["List_extended"]["itemHeight"]}}else{if(h=="bar"){y=r["List_condensed_bar"]["itemLength"];p=r["List_condensed_bar"]["itemHeight"]}else{if(l==="true"){if(t==="cozy"){p=r["List_condensed_imageSupported_cozy"]["itemHeight"]}else{p=r["List_condensed_imageSupported_compact"]["itemHeight"]}}else{p=r["List_condensed"]["itemHeight"]}y=r["List_condensed"]["itemLength"]}}}else if(n=="sap.ovp.cards.table"||n=="sap.ovp.cards.v4.table"){y=r["Table"]["itemLength"];p=r["Table"]["itemHeight"]}else if(n==="sap.ovp.cards.linklist"||n.template==="sap.ovp.cards.v4.linklist"){y=r["Linklist"]["itemLength"];p=r["Linklist"]["itemHeight"]}var L=o.settings.defaultSpan&&o.settings.defaultSpan.minimumTitleRow?o.settings.defaultSpan.minimumTitleRow:1;var b=o.settings.defaultSpan&&o.settings.defaultSpan.minimumSubTitleRow?o.settings.defaultSpan.minimumSubTitleRow:1;var c=o.settings.dataPointAnnotationPath||o.settings.tabs&&o.settings.tabs[0].dataPointAnnotationPath?"KPIHeader":"NormalHeader";i=s[c][L][b];if(c==="KPIHeader"){if(o.settings.showFilterInHeader===true){i+=e}if(o.settings.showSortingInHeader===true){i+=d}}return{noOfItems:y,itemHeight:p,headerHeight:i}}};return t},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/DashboardLayoutRearrange", ["sap/ovp/ui/UIActions","sap/ui/Device","sap/ui/thirdparty/jquery","sap/base/util/merge","sap/ovp/app/OVPLogger","sap/ovp/cards/jUtils","sap/base/i18n/Localization"],function(t,a,jQuery,e,s,o,i){"use strict";var l=new s("OVP.ui.DashboardLayoutRearrange");var r=function(t){this.init(t)};r.prototype.init=function(a){a.beforeDragCallback=this._beforeDragHandler.bind(this);a.dragStartCallback=this._dragStartHandler.bind(this);a.dragMoveCallback=this._dragMoveHandler.bind(this);a.dragEndCallback=this._dragEndHandler.bind(this);a.resizeStartCallback=this._resizeStartHandler.bind(this);a.resizeMoveCallback=this._resizeMoveHandler.bind(this);a.resizeEndCallback=this._resizeEndHandler.bind(this);a.endCallback=this._endHandler.bind(this);this.placeHolderClass=a.placeHolderClass;this.layout=a.layout;this.settings=a;this.destroy();this.uiActions=new t(this.settings).enable();this.aCardsOrder=null;this.aCards=a.aCards;this.layoutUtil=a.layoutUtil;this.verticalMargin=null;this.horizontalMargin=null;this.top=null;this.left=null;this.width=null;this.layoutOffset=null;this.jqLayout=null;this.jqLayoutInner=null;this.isRTLEnabled=null;this.rowHeight=a.rowHeight;this.floaterData=null;this.resizeData={};this.updatedScrollTop=0;this.SCROLL_OFFSET=16};r.prototype.destroy=function(){if(this.uiActions){this.uiActions.disable();this.uiActions=null}};r.prototype._resizeStartHandler=function(t,s){if(!a.system.desktop){return}if(this.layoutUtil&&this.layoutUtil.sLastFocusableCard){jQuery(this.layoutUtil.sLastFocusableCard).blur()}var o=this.layoutUtil.dashboardLayoutModel.getCardById(this.layoutUtil.getCardId(s.id));if(o.template==="sap.ovp.cards.stack"||o.settings.stopResizing){return}this.layoutUtil.dragOrResizeChanges=[];this.layoutUtil.startResizeCardConfig=e([],this.layoutUtil.getCards());this.layoutUtil.resizeStartCard={cardId:o.id,rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan,maxColSpan:o.dashboardLayout.maxColSpan,noOfItems:o.dashboardLayout.noOfItems,autoSpan:o.dashboardLayout.autoSpan,showOnlyHeader:o.dashboardLayout.showOnlyHeader,row:o.dashboardLayout.row,column:o.dashboardLayout.column};if(window.getSelection){var i=window.getSelection();i.removeAllRanges()}s.classList.add("sapOvpCardResize");o.dashboardLayout.autoSpan=false;this.initCardsSettings()};r.prototype._resizeEndHandler=function(t,e){if(e){e.classList.remove("sapOvpCardResize");if(this.uiActions.isResizeX&&!this.uiActions.isResizeY&&e.classList.contains("sapOvpNotResizableLeftRight")){return}this.updatedScrollTop=0;e.style.zIndex="auto";var s=this.layoutUtil.changedCards.resizeCard;if(s){s.dashboardLayout.maxColSpan=s.dashboardLayout.colSpan;this.layoutUtil._sizeCard(s);this.layoutUtil.dragOrResizeChanges=[];var i=this.layoutUtil.getCards();var l=this.layoutUtil.startResizeCardConfig;for(var r=0;r<i.length;r++){var d=i[r];var h=n(l,d.id);var u=h[0];this.layoutUtil.dragOrResizeChanges.push({changeType:"dragOrResize",content:{cardId:d.id,dashboardLayout:{row:d.dashboardLayout.row,oldRow:u.dashboardLayout.row,column:d.dashboardLayout.column,oldColumn:u.dashboardLayout.column,rowSpan:d.dashboardLayout.rowSpan,oldRowSpan:u.dashboardLayout.rowSpan,colSpan:d.dashboardLayout.colSpan,oldColSpan:u.dashboardLayout.colSpan,maxColSpan:d.dashboardLayout.maxColSpan,oldMaxColSpan:u.dashboardLayout.maxColSpan,noOfItems:d.dashboardLayout.noOfItems,oldNoOfItems:u.dashboardLayout.noOfItems,autoSpan:d.dashboardLayout.autoSpan,oldAutoSpan:u.dashboardLayout.autoSpan,showOnlyHeader:d.dashboardLayout.showOnlyHeader,oldShowOnlyHeader:u.dashboardLayout.showOnlyHeader}},isUserDependent:true})}}this.layoutUtil.changedCards={};if(a.system.desktop){document.querySelector("body").classList.remove("sapOVPDisableUserSelect","sapOVPDisableImageDrag")}jQuery(this.settings.wrapper).removeClass("dragAndDropMode");o.removeElementById("sapOvpOverlayDivForCursor");o.removeElementById("ovpResizeRubberBand");this.layoutUtil.getDashboardLayoutModel().extractCurrentLayoutVariant();this.layoutUtil.oLayoutCtrl.fireAfterDragEnds({positionChanges:this.layoutUtil.dragOrResizeChanges});this.layoutUtil.setAriaPos();this.layoutUtil.startResizeCardConfig=[];if(window.getSelection){var p=window.getSelection();p.removeAllRanges()}}};r.prototype._resizeMoveHandler=function(t){if(!a.system.desktop){return}if(t.element){var e,s,o,i,r=this.layoutUtil.dashboardLayoutModel.getCardById(this.layoutUtil.getCardId(t.element.id));if(r.template==="sap.ovp.cards.stack"||r.settings.stopResizing){return}var n=document.getElementsByClassName("sapFDynamicPageContentWrapper")[0];var d=n.offsetHeight;var h=n.getBoundingClientRect();if(t.evt.clientY-n.offsetTop+this.SCROLL_OFFSET>d){n.scrollTop=n.scrollTop+this.SCROLL_OFFSET;this.updatedScrollTop+=this.SCROLL_OFFSET}else if(t.evt.clientY-n.offsetTop<h.top+this.SCROLL_OFFSET&&n.scrollTop!==0){n.scrollTop=n.scrollTop-this.SCROLL_OFFSET;this.updatedScrollTop-=this.SCROLL_OFFSET}s=this.layoutUtil.calculateCardProperties(r.id);e=this._calculateMinimumCardHeight(t);if(e.ghostWidthCursor<=this.layoutUtil.getColWidthPx()&&this.uiActions.isResizeX&&!this.uiActions.isResizeY){return}i=e.ghostHeightCursor;o=e.ghostWidthCursor<=this.layoutUtil.getColWidthPx()?this.layoutUtil.getColWidthPx():e.ghostWidthCursor;if(!this.uiActions.isResizeY){if(t.element.classList.contains("sapOvpNotResizableLeftRight")||t.element.classList.contains("sapOvpNotResizableRight")&&e.ghostWidthCursor>r.dashboardLayout.colSpan*this.layoutUtil.getColWidthPx()){return}else{l.info("Not a valid scenario")}if((r.template==="sap.ovp.cards.list"||r.template==="sap.ovp.cards.v4.list")&&o>this.layoutUtil.getColWidthPx()*2||(r.template==="sap.ovp.cards.linklist"||r.template==="sap.ovp.cards.v4.linklist")&&r.settings.listFlavor==="carousel"&&o>this.layoutUtil.getColWidthPx()*3){return}}if((r.template==="sap.ovp.cards.linklist"||r.template==="sap.ovp.cards.v4.linklist")&&r.settings.listFlavor==="carousel"&&i>this.layoutUtil.getRowHeightPx()*45){t.element.classList.add("sapOvpNotResizableDown");return}var u=s.leastHeight+2*this.layoutUtil.CARD_BORDER_PX;var p=s.minCardHeight+2*this.layoutUtil.CARD_BORDER_PX;t.element.classList.remove("sapOvpMinHeightContainer");if(i<=u){i=u;t.element.classList.add("sapOvpMinHeightContainer");this.resizeData.showOnlyHeader=true}else if(i>u&&i<=p){var y=(u+p)/2;if(i>y){i=p;this.resizeData.showOnlyHeader=false}else{i=u;t.element.classList.add("sapOvpMinHeightContainer");this.resizeData.showOnlyHeader=true}}else{if(!this.uiActions.isResizeX&&(r.template==="sap.ovp.cards.list"||r.template==="sap.ovp.cards.v4.list"||r.template==="sap.ovp.cards.table"||r.template==="sap.ovp.cards.v4.table")){var c=s.headerHeight+s.dropDownHeight+2*this.layoutUtil.CARD_BORDER_PX;var g=Math.round((i-c)/s.itemHeight);i=g*s.itemHeight+c}this.resizeData.showOnlyHeader=false}this._addOverLay(e.cursor);this.resizeData.colSpan=Math.round(o/this.layoutUtil.getColWidthPx());this.resizeData.rowSpan=Math.ceil(i/this.layoutUtil.getRowHeightPx());this.layoutUtil.updateCardSize(r.id,i,o,this.resizeData.rowSpan);this.showGhostWhileResize(t,r);if(this.resizeData.colSpan&&this.resizeData.rowSpan){this.layoutUtil.resizeCard(t.element.getAttribute("id"),this.resizeData,this.layoutUtil.dragOrResizeChanges)}this.resizeData={};this.layoutUtil.setKpiNumericContentWidth(t.element)}};r.prototype._beforeDragHandler=function(t,e){if(t.type==="mousedown"){t.preventDefault()}if(a.browser.mobile){this.selectableElemets=jQuery(e).find(".sapUiSelectable");this.selectableElemets.removeClass("sapUiSelectable")}jQuery(this.settings.wrapper).addClass("dragAndDropMode")};r.prototype._dragStartHandler=function(t,s){if(a.system.desktop){document.querySelector("body").classList.add("sapOVPDisableUserSelect","sapOVPDisableImageDrag")}if(this.layoutUtil&&this.layoutUtil.sLastFocusableCard){jQuery(this.layoutUtil.sLastFocusableCard).blur()}this.layoutUtil.dragOrResizeChanges=[];var o=this.layoutUtil.getCardId(s.id);var i=this.layoutUtil.dashboardLayoutModel.getCardById(o);this.layoutUtil.dragStartCardsConfig=e([],this.layoutUtil.getCards(this.columnCount));this.layoutUtil.dragStartCard={cardId:i.id,row:i.dashboardLayout.row,column:i.dashboardLayout.column,rowSpan:i.dashboardLayout.rowSpan,colSpan:i.dashboardLayout.colSpan,maxColSpan:i.dashboardLayout.maxColSpan,noOfItems:i.dashboardLayout.noOfItems,autoSpan:i.dashboardLayout.autoSpan,showOnlyHeader:i.dashboardLayout.showOnlyHeader};l.info(s);if(window.getSelection){var r=window.getSelection();r.removeAllRanges()}this.initCardsSettings();var n=s&&s.children[0].getBoundingClientRect();this.floaterData={width:n.width,height:n.height,startLeft:n.left-this.layoutOffset.left,startTop:n.top-this.layoutOffset.top}};r.prototype._dragMoveHandler=function(t){if(t.element){var a=0;var e=0;var s=document.getElementsByClassName("sapFDynamicPageContentWrapper")[0];var o=document.getElementsByClassName("sapFDynamicPageTitleWrapper")[0].offsetHeight;if(document.getElementsByClassName("sapUshellShellHeadSearchContainer")[0]){e=document.getElementsByClassName("sapUshellShellHeadSearchContainer")[0].offsetHeight}var i=s.offsetHeight;var l=s.getBoundingClientRect();var r;if(document.getElementsByClassName("sapFDynamicPageHeader")[0]){a=document.getElementsByClassName("sapFDynamicPageHeader")[0].offsetHeight}if(t.evt.clientY-s.offsetTop+this.SCROLL_OFFSET>i){s.scrollTop=s.scrollTop+this.SCROLL_OFFSET;r=s.scrollTop}else if(t.evt.clientY-s.offsetTop<l.top+this.SCROLL_OFFSET&&s.scrollTop!==0){s.scrollTop=s.scrollTop-this.SCROLL_OFFSET;r=s.scrollTop}else{r=s.scrollTop}this.floaterData.id=t.element.id;this.floaterData.left=t.clone.getBoundingClientRect().left;this.floaterData.top=t.clone.getBoundingClientRect().top+r-(o+a+e);var n=Math.round(this.floaterData.left/this.layoutUtil.getColWidthPx());var d={row:Math.round(this.floaterData.top/this.layoutUtil.getRowHeightPx())+1,column:this.isRTLEnabled?this.columnCount-n:n+1};d.row=d.row<=0?1:d.row;d.column=d.column<=1?1:d.column;var h=this.layoutUtil.dashboardLayoutModel.getCardById(this.layoutUtil.getCardId(this.floaterData.id));if(d.column+h.dashboardLayout.colSpan>this.columnCount){d.column=this.columnCount-h.dashboardLayout.colSpan+1}this.floaterData.row=d.row;this.floaterData.column=d.column;jQuery.when(this.layoutUtil.dashboardLayoutModel._arrangeCards(h,this.floaterData,"drag",this.layoutUtil.dragOrResizeChanges)).done(function(){this.layoutUtil._positionCards(this.aCards);this.layoutUtil.dashboardLayoutModel._removeSpaceBeforeCard()}.bind(this));this.showGhostWhileDragMove({row:h.dashboardLayout.row,column:h.dashboardLayout.column},t)}};r.prototype._dragEndHandler=function(t,e,s){if(e){var i=e.getBoundingClientRect();var l=s.getBoundingClientRect();var r=window.getComputedStyle(s).transform.split(",");var d=i.top-l.top;var h=i.left-l.left;var u=parseInt(r[4],10)+h;var p=parseInt(r[5],10)+d;s.style[this.layoutUtil.cssVendorTransition]="transform 0.3s cubic-bezier(0.46, 0, 0.44, 1)";u=Math.abs(u)-8<0?0:u-8;p=Math.abs(p)-8<0?0:p-8;s.style[this.layoutUtil.cssVendorTransform]="translate3d("+u+"px, "+p+"px, 0px) ";this.layoutUtil._positionCards(this.aCards);jQuery(s).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(t){o.removeElementById("ovpDashboardLayoutMarker");this.layoutUtil.getDashboardLayoutModel().extractCurrentLayoutVariant();this.layoutUtil.dragOrResizeChanges=[];var s=this.layoutUtil.getCards();var i=this.layoutUtil.dragStartCardsConfig;for(var l=0;l<s.length;l++){var r=s[l];var d=n(i,r.id);var h=d[0];this.layoutUtil.dragOrResizeChanges.push({changeType:"dragOrResize",content:{cardId:r.id,dashboardLayout:{row:r.dashboardLayout.row,oldRow:h.dashboardLayout.row,column:r.dashboardLayout.column,oldColumn:h.dashboardLayout.column,rowSpan:r.dashboardLayout.rowSpan,oldRowSpan:h.dashboardLayout.rowSpan,colSpan:r.dashboardLayout.colSpan,oldColSpan:h.dashboardLayout.colSpan,maxColSpan:r.dashboardLayout.maxColSpan,oldMaxColSpan:h.dashboardLayout.maxColSpan,noOfItems:r.dashboardLayout.noOfItems,oldNoOfItems:h.dashboardLayout.noOfItems,autoSpan:r.dashboardLayout.autoSpan,oldAutoSpan:h.dashboardLayout.autoSpan,showOnlyHeader:r.dashboardLayout.showOnlyHeader,oldShowOnlyHeader:h.dashboardLayout.showOnlyHeader}},isUserDependent:true})}this.layoutUtil.oLayoutCtrl.fireAfterDragEnds({positionChanges:this.layoutUtil.dragOrResizeChanges});if(a.system.desktop){document.body.classList.remove("sapOVPDisableUserSelect");document.body.classList.remove("sapOVPDisableImageDrag")}jQuery(this.settings.wrapper).removeClass("dragAndDropMode");if(window.getSelection){var u=window.getSelection();u.removeAllRanges()}this.uiActions.removeClone();e.classList.remove(this.placeHolderClass);var p=this.layoutUtil.dashboardLayoutModel._findHighestOccupiedRow()+32;o.addStyleToAllElements(document.querySelectorAll(".sapUshellEasyScanLayoutInner"),"height",p+"px");o.addStyleToAllElements(document.querySelectorAll(".sapUshellEasyScanLayoutInner"),"zIndex","1");o.addStyleToAllElements(document.querySelectorAll(".sapUshellEasyScanLayout"),"height",p+"px");this.layoutUtil.setAriaPos();this.layoutUtil.dragStartCardsConfig=[]}.bind(this))}};r.prototype._endHandler=function(t,e){l.info(e);if(a.browser.mobile&&this.selectableElemets){this.selectableElemets.addClass("sapUiSelectable")}};r.prototype.initCardsSettings=function(){this.jqLayout=this.layout.$();this.jqLayoutInner=this.jqLayout&&this.jqLayout.children().first();var t=this.jqLayout.scrollTop();var a=this.jqLayoutInner.height();this.isRTLEnabled=i.getRTL();this.aCardsOrder=[];this.layoutOffset=this.jqLayout.offset();this.corrY=this.jqLayout.get(0).getBoundingClientRect().top+this.jqLayout.scrollTop();this.corrX=this.layoutOffset.left;this.columnCount=this.layoutUtil.dashboardLayoutModel.getColCount();var e=this.layout.getVisibleLayoutItems();if(!e){return}function s(t){return t.$().parent()[0]}this.aCardsOrder=e.map(s);var o=this.jqLayoutInner&&this.jqLayoutInner.children().first();var l=this.isRTLEnabled?"margin-left":"margin-right";this.verticalMargin=parseInt(o.css(l),10);var r=this.aCardsOrder[0];var n=r.getBoundingClientRect();var d=this.jqLayoutInner[0].getBoundingClientRect();this.horizontalMargin=parseInt(jQuery(r).css("margin-bottom"),10);this.verticalMargin=this.horizontalMargin;this.top=n.top-d.top;this.left=n.left-d.left;this.width=r.offsetWidth;jQuery(this.aCardsOrder).css("position","absolute");this.drawLayout(this.aCardsOrder);this.jqLayoutInner.height(a);this.jqLayout.scrollTop(t)};r.prototype.drawLayout=function(t){var a=this;function e(t){var e=jQuery(t).position();t.style[a.layoutUtil.cssVendorTransition]="all 300ms ease";t.style[a.layoutUtil.cssVendorTransform]="translate3d("+e.left+","+e.top+", 0px) "}var s=function(t){requestAnimationFrame(function(){e(t)})};var o=t.length;if(o>0){t.forEach(function(t){s(t)})}};r.prototype.showGhostWhileDragMove=function(t,a){var e=document.getElementById("ovpDashboardLayoutMarker"),s=(t.column-1)*this.layoutUtil.getColWidthPx(),o={top:(t.row-1)*this.layoutUtil.getRowHeightPx()+this.layoutUtil.CARD_BORDER_PX,left:this.isRTLEnabled?-s-this.layoutUtil.CARD_BORDER_PX:s+this.layoutUtil.CARD_BORDER_PX};if(!e){var i=document.createElement("div");i.id="ovpDashboardLayoutMarker";i.position="absolute";i.style.height=this.floaterData.height+"px";i.style.width=this.floaterData.width+"px";i.style[this.layoutUtil.cssVendorTransform]="translate3d("+o.left+"px,"+o.top+"px, 0px) ";document.getElementsByClassName("sapUshellEasyScanLayoutInner")[0].appendChild(i)}else{e.style[this.layoutUtil.cssVendorTransition]="all 300ms ease";e.style[this.layoutUtil.cssVendorTransform]="translate3d("+o.left+"px,"+o.top+"px, 0px) "}a.element.style[this.layoutUtil.cssVendorTransition]="all 300ms ease";a.element.style[this.layoutUtil.cssVendorTransform]="translate3d("+o.left+"px,"+o.top+"px, 0px) "};r.prototype.showGhostWhileResize=function(t,a){var e=document.getElementById("ovpResizeRubberBand"),s=(a.dashboardLayout.column-1)*this.layoutUtil.getColWidthPx(),o={top:(a.dashboardLayout.row-1)*this.layoutUtil.getRowHeightPx()+this.layoutUtil.CARD_BORDER_PX,left:this.isRTLEnabled?-s-this.layoutUtil.CARD_BORDER_PX:s+this.layoutUtil.CARD_BORDER_PX},i=this.resizeData.rowSpan*this.layoutUtil.getRowHeightPx()-2*this.layoutUtil.CARD_BORDER_PX+2,l=this.resizeData.colSpan*this.layoutUtil.getColWidthPx()-2*this.layoutUtil.CARD_BORDER_PX+2;if(!e){var r=document.createElement("div");r.id="ovpResizeRubberBand";r.classList.add("ovpResizeRubberBand");r.position="absolute";r.style.height=i+"px";r.style.width=l+"px";r.style[this.layoutUtil.cssVendorTransition]="all 300ms ease";r.style[this.layoutUtil.cssVendorTransform]="translate3d("+o.left+"px,"+o.top+"px, 0px) ";t.element.parentElement.appendChild(r)}else{e.style.height=i+"px";e.style.width=l+"px"}};r.prototype._addOverLay=function(t){var a=document.getElementById("sapOvpOverlayDivForCursor");if(!a){var e=document.createElement("div");e.id="sapOvpOverlayDivForCursor";e.style.cursor=t;this.jqLayout[0].appendChild(e)}else{a.style.cursor=t}};r.prototype._calculateMinimumCardHeight=function(t){var a=t.element.getBoundingClientRect(),e=a.top,s=a.right,o,i,l;if(this.uiActions.isResizeX&&!this.uiActions.isResizeY){o=this.isRTLEnabled?s-t.moveX:t.moveX-a.left;i=a.height;l="ew-resize"}else if(!this.uiActions.isResizeX&&this.uiActions.isResizeY){o=a.width;i=t.moveY-e;l="ns-resize"}else{o=this.isRTLEnabled?s-t.moveX:t.moveX-a.left;i=t.moveY-e;l=this.isRTLEnabled?"nesw-resize":"nwse-resize"}return{ghostWidthCursor:o,ghostHeightCursor:i,cursor:l}};function n(t,a){return t.filter(function(t){return t.id===a})}return r});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/DashboardLayoutUtil", ["sap/ovp/ui/DashboardLayoutRearrange","sap/ovp/ui/DashboardLayoutModel","sap/ovp/cards/CommonUtils","sap/ui/Device","sap/ui/thirdparty/jquery","sap/base/util/merge","sap/ovp/app/OVPLogger","sap/ovp/cards/jUtils","sap/ovp/ui/cardPositionHelper","sap/ui/core/Element","sap/base/i18n/Localization"],function(t,a,o,e,jQuery,s,r,i,d,n,h){"use strict";var l=new r("OVP.ui.DashboardLayoutUtil");var u=function(t){this.aCards=null;this.ROW_HEIGHT_PX=16;this.MIN_COL_WIDTH_PX=320;this.CARD_BORDER_PX=8;this.EXTRA_MARGIN=8;this.oLayoutData={layoutWidthPx:1680,contentWidthPx:1600,colCount:5,previousColCount:0,colWidthPx:this.MIN_COL_WIDTH_PX,rowHeightPx:this.ROW_HEIGHT_PX,marginPx:this.convertRemToPx(3)-this.CARD_BORDER_PX};this.dashboardLayoutModel=new a(t,this.oLayoutData.colCount,this.ROW_HEIGHT_PX,this.CARD_BORDER_PX);this.layoutDomId="";this.oLayoutCtrl={};this.componentDomId="";this.lastTriggeredColWidth=0;this.changedCards={};this.isRTLEnabled=h.getRTL();switch(true){case e.browser.webkit:this.cssVendorTransition="-webkit-transition";this.cssVendorTransform="-webkit-transform";break;case e.browser.msie:this.cssVendorTransition="-ms-transition";this.cssVendorTransform="-ms-transform";break;case e.browser.mozilla:this.cssVendorTransition="-moz-transition";this.cssVendorTransform="-moz-transform";break;default:this.cssVendorTransition="transition";this.cssVendorTransform="transform"}};u.prototype.setLayout=function(t){this.oLayoutCtrl=t;this.layoutDomId=t.getId();var a=this.layoutDomId.indexOf("---")+3;var o=this.layoutDomId.substring(0,a);var e=this.layoutDomId.substring(a);this.componentDomId=o+e.split("--")[0]};u.prototype.getDashboardLayoutModel=function(){return this.dashboardLayoutModel};u.prototype.updateCardVisibility=function(t){this.dashboardLayoutModel.updateCardVisibility(t);this.aCards=this.dashboardLayoutModel.getCards(this.oLayoutData.colCount);this.dashboardLayoutModel._removeSpaceBeforeCard();this._setCardsCssValues(this.aCards);this._positionCards(this.aCards)};u.prototype.updateLayoutData=function(t){var a=this.oLayoutData.marginPx,o=0,s=320,r=1024,i=this.CARD_BORDER_PX,d=this.EXTRA_MARGIN,n=t+a,h,l;this.oLayoutData.layoutWidthPx=t;if(n<=s){a=this.convertRemToPx(.5)-i;o=e.system.desktop?16:0}else if(n<=r){a=this.convertRemToPx(1)-i;o=e.system.desktop?8:0}else{a=this.convertRemToPx(3)-i}if(a!==this.oLayoutData.marginPx){this.oLayoutData.marginPx=a;jQuery(".sapUshellEasyScanLayout").css({"margin-left":a+"px"})}this.oLayoutData.contentWidthPx=t-a-o;this.oLayoutData.previousColCount=this.oLayoutData.colCount;this.oLayoutData.colCount=Math.round(this.oLayoutData.contentWidthPx/this.MIN_COL_WIDTH_PX);if(this.oLayoutData.colCount===0){this.oLayoutData.colCount=1}this.oLayoutData.colWidthPx=this.oLayoutData.contentWidthPx/this.oLayoutData.colCount;if(jQuery(".sapOvpDashboardDragAndDrop").length>0&&jQuery(".easyScanLayoutItemWrapper").length>0){h=jQuery(".sapOvpDashboardDragAndDrop")[0].offsetLeft+d;if(jQuery(".sapOvpDashboardDragAndDrop")[0].offsetLeft<40){l=h+8}else{l=h}}else{h=a+d;l=a+o+d}if(e.system.desktop){jQuery(".ovpWrapper .sapFDynamicPageTitle").css({"margin-left":h+"px","margin-right":l+"px"});jQuery(".ovpWrapper .sapFDynamicPageHeader").css({"margin-left":h+"px","margin-right":l+"px"})}return this.oLayoutData};u.prototype.getRearrange=function(a){var o={containerSelector:".sapUshellEasyScanLayoutInner",wrapper:".sapUshellEasyScanLayout",draggableSelector:".easyScanLayoutItemWrapper",placeHolderClass:"dashboardLayoutItemWrapper-placeHolder",cloneClass:"easyScanLayoutItemWrapperClone",moveTolerance:10,switchModeDelay:500,isTouch:!e.system.desktop,debug:false,aCards:this.aCards,layoutUtil:this,rowHeight:this.oLayoutData.rowHeightPx,colWidth:this.oLayoutData.colWidthPx};return new t(s(o,a))};u.prototype.resizeLayout=function(t){var a=this.oLayoutData.colCount;var o=false;if(this.oLayoutData.layoutWidthPx!==t&&t!==0&&Math.abs(t-this.oLayoutData.layoutWidthPx)>20){this.updateLayoutData(t);o=Math.abs(this.lastTriggeredColWidth-this.oLayoutData.colWidthPx)>this.convertRemToPx(.5);this.aCards=this.dashboardLayoutModel.getCards(this.oLayoutData.colCount);for(var e=0;e<this.aCards.length;e++){var s=this.aCards[e];this.setCardCssValues(s);var r=document.getElementById(this.getCardDomId(s.id));if(r){r.style.width=s.dashboardLayout.width;r.style.height=s.dashboardLayout.height;if(a!==this.oLayoutData.colCount){r.style[this.cssVendorTransition]="all 0.25s ease"}else{r.style[this.cssVendorTransition]=""}r.style[this.cssVendorTransform]="translate3d("+s.dashboardLayout.left+" ,"+s.dashboardLayout.top+", 0px)";this.setKpiNumericContentWidth(r)}if(a!==this.oLayoutData.colCount&&o){this._triggerCardResize(s)}}this.dashboardLayoutModel._removeSpaceBeforeCard();this.oLayoutCtrl.fireAfterDragEnds();if(o){this.lastTriggeredColWidth=this.oLayoutData.colWidthPx}this.setAriaPos()}};u.prototype.getCards=function(t){if(this.aCards&&this.oLayoutData.previousColCount===t){return this.aCards}this._setColCount(t);this.aCards=this.dashboardLayoutModel.getCards(t);this._setCardsCssValues(this.aCards);return this.aCards};u.prototype.resetToManifest=function(){this.aCards=[];this.dashboardLayoutModel.resetToManifest()};u.prototype.getCardDomId=function(t){return this.layoutDomId+"--"+t};u.prototype.getCardId=function(t){var a=t.indexOf("---")+3;var o=t.substring(a);return o?o.split("--")[2]:""};u.prototype.getCardIdFromComponent=function(t){var a=t.indexOf("---")+3;var o=t.substring(a);return o?o.split("--")[1]:""};u.prototype.isCardAutoSpan=function(t){return this.dashboardLayoutModel.getCardById(t).dashboardLayout.autoSpan};u.prototype.setAutoCardSpanHeight=function(t,a,o){var e,s,r;if(!a&&t&&t.target.parentElement){var i=t.target.parentElement.parentElement.id;var d=i.indexOf("---")+3;var n=i.substring(d);a=n.split("--")[1]}var h=o;if(!h&&t){h=t.size.height}if(this.isCardAutoSpan(a)){r=this.dashboardLayoutModel.getCardById(a);if(r.dashboardLayout.showOnlyHeader){e=Math.ceil((h+2*this.CARD_BORDER_PX)/this.getRowHeightPx())}else{e=Math.round((h+2*this.CARD_BORDER_PX)/this.getRowHeightPx())}s=this.dashboardLayoutModel.resizeCard(a,{rowSpan:e,colSpan:1},false);this._sizeCard(s.resizeCard);this._positionCards(s.affectedCards);this.setAriaPos()}};u.prototype.calculateCardProperties=function(t){var a=this._getCardController(t);var o=this.dashboardLayoutModel.getCardById(t);var e=250,s,r,d,n,h;if(a){h=a.getItemHeight(a,"ovpCardHeader");s=h===0?o.dashboardLayout.headerHeight:h;r=a.getItemHeight(a,"toolbar");if(o.template==="sap.ovp.cards.list"||o.template==="sap.ovp.cards.v4.list"){h=a.getItemHeight(a,"ovpList",true);d=h===0?o.dashboardLayout.itemHeight:h;n=s+r+d}else if(o.template==="sap.ovp.cards.table"||o.template==="sap.ovp.cards.v4.table"){d=o.dashboardLayout.itemHeight;n=s+r+2*d}else if(o.template==="sap.ovp.cards.linklist"||o.template==="sap.ovp.cards.v4.linklist"){if(o.settings.listFlavor==="carousel"){n=s+i.getOuterHeight(document.querySelector(".sapOvpCarouselContentHeader"))+240+i.getOuterHeight(document.querySelector(".sapMCrslControlsBottom.sapMCrslControls"))}else{d=a.getItemHeight(a,"ovpLinkList",true);var l=a.getView().getModel("ovpCardProperties").getProperty("/densityStyle");if(l==="cozy"){n=s+r+d+8}else{n=s+r+d+4}}}else if(o.template==="sap.ovp.cards.charts.analytical"){var u=a.getView().byId("bubbleText")?43:0;n=s+r+e+u+50}else{n=s+r}return{headerHeight:s,dropDownHeight:r,itemHeight:d,minCardHeight:n,leastHeight:s}}};u.prototype._sizeCard=function(t){if(!t){return}var a=document.getElementById(this.getCardDomId(t.id));t.dashboardLayout.width=t.dashboardLayout.colSpan*this.oLayoutData.colWidthPx+"px";t.dashboardLayout.height=t.dashboardLayout.rowSpan*this.oLayoutData.rowHeightPx+"px";if(a){a.style.height=t.dashboardLayout.height;a.style.width=t.dashboardLayout.width;this._triggerCardResize(t)}this.dashboardLayoutModel._removeSpaceBeforeCard();var o=this.dashboardLayoutModel._findHighestOccupiedRow()+32;jQuery(".sapUshellEasyScanLayoutInner").css({height:o+"px"});jQuery(".sapUshellEasyScanLayout").css({height:o+"px"})};u.prototype._triggerCardResize=function(t){var a=t.dashboardLayout,o=t.id,e=this._getCardComponentDomId(o),s=document.getElementById(e),r=this._getCardController(o),i,d,n;try{if((a.autoSpan||!a.visible)&&r){d=r.getCardItemsBinding();i=this.calculateCardProperties(o);if(d&&i){var h=d.getLength();var u=h?Math.min(h,t.dashboardLayout.noOfItems):t.dashboardLayout.noOfItems;var p=h===0?t.dashboardLayout.noOfItems:u;var y=a.rowSpan*this.ROW_HEIGHT_PX;var c=y-(i.headerHeight+2*this.CARD_BORDER_PX);if(t.template==="sap.ovp.cards.table"||t.template==="sap.ovp.cards.v4.table"){r.addColumnInTable(s,a)}else if(t.template==="sap.ovp.cards.list"||t.template==="sap.ovp.cards.v4.list"){n=p*i.itemHeight+i.dropDownHeight;s.style.height=Math.min(n,c)+t.dashboardLayout.headerHeight+"px"}}return}}catch(t){l.warning("Card auto span failed for card "+o+" and error is  "+t.toString())}a.iRowHeightPx=this.getRowHeightPx();a.iCardBorderPx=this.CARD_BORDER_PX;try{if(r){i=this.calculateCardProperties(o);r.resizeCard(a,i)}else{l.warning("OVP resize: no controller found for "+o)}}catch(t){l.warning("OVP resize: "+o+" catch "+t.toString())}};u.prototype._positionCards=function(t){if(!t){return}var a={},o=false;t.forEach(function(t){if(!t.dashboardLayout.visible){return}a=this._mapGridToPositionPx(t.dashboardLayout);t.dashboardLayout.top=a.top;t.dashboardLayout.left=a.left;var e=document.getElementById(this.getCardDomId(t.id));if(e){e.classList.remove("sapOvpNotResizableLeftRight","sapOvpNotResizableRight","sapOvpNotResizableDown");e.style[this.cssVendorTransition]="all 0.15s ease";e.style[this.cssVendorTransform]="translate3d("+a.left+" ,"+a.top+", 0px)";o=t.dashboardLayout.column+t.dashboardLayout.colSpan===this.oLayoutData.colCount+1;if(o){if(t.dashboardLayout.colSpan===1){e.classList.add("sapOvpNotResizableLeftRight")}else{e.classList.add("sapOvpNotResizableRight")}}if((t.template==="sap.ovp.cards.list"||t.template==="sap.ovp.cards.v4.list")&&t.dashboardLayout.colSpan===2||(t.template==="sap.ovp.cards.linklist"||t.template==="sap.ovp.cards.v4.linklist")&&t.settings.listFlavor==="carousel"&&t.dashboardLayout.colSpan===3){e.classList.add("sapOvpNotResizableRight")}if((t.template==="sap.ovp.cards.linklist"||t.template==="sap.ovp.cards.v4.linklist")&&t.settings.listFlavor==="carousel"&&t.dashboardLayout.rowSpan===45){e.classList.add("sapOvpNotResizableDown")}}}.bind(this))};u.prototype.updateCardSize=function(t,a,o){var e=this.dashboardLayoutModel.getCardById(t);var s=this._getCardController(t);var r=document.getElementById(this.getCardDomId(t));r.style.height=a+"px";r.style.width=o+"px";r.style[this.cssVendorTransition]="none";r.style.zIndex=10;if((e.template==="sap.ovp.cards.linklist"||e.template==="sap.ovp.cards.v4.linklist")&&e.settings.listFlavor==="carousel"){s.getView().byId("pictureCarousel").$().css("height",a-(e.dashboardLayout.headerHeight+2*this.CARD_BORDER_PX)+"px")}};u.prototype.resizeCard=function(t,a,o){this.changedCards=this.dashboardLayoutModel.resizeCard(this.getCardId(t),a,true,o);this._positionCards(this.changedCards.affectedCards)};u.prototype._mapGridToPositionPx=function(t){var a=(t.column-1)*this.getColWidthPx();var o={top:(t.row-1)*this.getRowHeightPx()+"px",left:(this.isRTLEnabled?-a:a)+"px"};return o};u.prototype._getCardComponentDomId=function(t){return this.componentDomId+"--"+t};u.prototype._getCardController=function(t){var a=null;var o=n.getElementById(this._getCardComponentDomId(t));if(o){var e=o.getComponentInstance();if(e){a=e.getAggregation("rootControl").getController()}}return a};u.prototype._setCardsCssValues=function(t){var a=0;for(a=0;a<t.length;a++){this.setCardCssValues(t[a])}};u.prototype.setCardCssValues=function(t){var a=(t.dashboardLayout.column-1)*this.oLayoutData.colWidthPx;t.dashboardLayout.top=(t.dashboardLayout.row-1)*this.oLayoutData.rowHeightPx+"px";t.dashboardLayout.width=t.dashboardLayout.colSpan*this.oLayoutData.colWidthPx+"px";t.dashboardLayout.height=t.dashboardLayout.rowSpan*this.oLayoutData.rowHeightPx+"px";t.dashboardLayout.left=(this.isRTLEnabled?-a:a)+"px"};u.prototype.convertRemToPx=function(t){var a=t;if(typeof t==="string"||t instanceof String){a=t.length>0?parseInt(t.split("rem")[0],10):0}return a*o.getPixelPerRem()};u.prototype.convertPxToRem=function(t){var a=t;if(typeof t==="string"||t instanceof String){a=t.length>0?parseFloat(t.split("px")[0],10):0}return a/o.getPixelPerRem()};u.prototype.setKpiNumericContentWidth=function(t){var a=t.getElementsByClassName("sapOvpKpiContent");if(!!a&&a.length>0){var o=a[0];var e=8;var s=16;o.style.width=this.getColWidthPx()-(2*e+2*s)+"px"}};u.prototype.getLayoutWidthPx=function(){return this.oLayoutData.colCount*this.oLayoutData.colWidthPx};u.prototype.getColWidthPx=function(){return this.oLayoutData.colWidthPx};u.prototype.getRowHeightPx=function(){return this.oLayoutData.rowHeightPx};u.prototype._setColCount=function(t){this.oLayoutData.colCount=t};u.prototype.setAriaPos=function(){var t=[];this.ariaPos={};this.aCards.forEach(function(a){if(a.dashboardLayout.visible===true){a.visited=false;if(t[a.dashboardLayout.column-1]){t[a.dashboardLayout.column-1].push(a)}else{t[a.dashboardLayout.column-1]=[a]}}});t.forEach(function(t){t.sort(function(t,a){if(t.dashboardLayout.row<a.dashboardLayout.row){return-1}else if(t.dashboardLayout.row>a.dashboardLayout.row){return 1}else{return 0}})});d.setAriaPosition(t,this)};return u},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/EasyScanLayout", ["sap/ui/thirdparty/jquery","sap/ovp/cards/CommonUtils","sap/ovp/ui/UIActions","sap/ui/Device","sap/ui/core/Control","sap/ui/core/ResizeHandler","sap/ovp/app/resources","sap/ui/events/F6Navigation","sap/ui/events/KeyCodes","sap/ovp/cards/jUtils","sap/ui/core/Component","sap/ui/core/Element","sap/base/i18n/Localization","sap/ui/dom/jquery/Selectors"],function(jQuery,e,t,a,i,n,s,r,o,l,d,u,p){"use strict";var h=function(e){this.init(e)};h.prototype.init=function(e){e.beforeDragCallback=this._beforeDragHandler.bind(this);e.dragStartCallback=this._dragStartHandler.bind(this);e.dragMoveCallback=this._dragMoveHandler.bind(this);e.dragEndCallback=this._dragEndHandler.bind(this);e.endCallback=this._endHandler.bind(this);this.layout=e.layout;this.afterReplaceElements=e.afterReplaceElements||function(){};this.settings=e;delete e.afterReplaceElements;this.destroy();this.uiActions=new t(this.settings).enable();this.aCardsOrder=null;this.verticalMargin=null;this.horizontalMargin=null;this.columnCount=null;this.top=null;this.left=null;this.width=null;this.layoutOffset=null;this.jqLayout=null;this.jqLayoutInner=null;this.isRTLEnabled=null;this.lastCollidedEl=null;this.lastCollisionTop=null;this.SCROLL_OFFSET=16};h.prototype.findCollision=function(e,t,a){var i;for(var n=0;n<a.length;n++){var s=a[n];var r=!(s.posDnD.right<e||s.posDnD.left>e);var o=!(s.posDnD.bottom<t||s.posDnD.top>t);if(r&&o){i=s;break}}return i};h.prototype.isCollisionTop=function(e,t,a){var i=(a.posDnD.bottom-a.posDnD.top)/2+a.posDnD.top;var n=!(i<t||a.posDnD.top>t);return n};h.prototype._dragMoveHandler=function(e,t){var a=e.element;var i=e.moveX-this.layoutOffset.left;var n=e.moveY-this.jqLayout.get(0).getBoundingClientRect().top+this.jqLayout.scrollTop();if(!t){var s=document.getElementsByClassName("sapFDynamicPageContentWrapper")[0];var r=s.offsetHeight;var o=s.getBoundingClientRect();if(e.evt.clientY-s.offsetTop+this.SCROLL_OFFSET>r){s.scrollTop=s.scrollTop+this.SCROLL_OFFSET}else if(e.evt.clientY-s.offsetTop<o.top+this.SCROLL_OFFSET&&s.scrollTop!==0){s.scrollTop=s.scrollTop-this.SCROLL_OFFSET}}var l=this.findCollision(i,n,this.aCardsOrder);if(!l){return}var d=this.isCollisionTop(i,n,l);if(l===a){this.lastCollidedEl=l;return}if(l===this.lastCollidedEl){if(this.lastCollisionTop===d){return}if(this.lastCollisionTop){this.lastCollisionTop=d;if(a.posDnD.top>l.posDnD.top){return}}else{this.lastCollisionTop=d;if(a.posDnD.top<l.posDnD.top){return}}}if(this.lastCollidedEl&&this.lastCollidedEl!==l&&this.lastCollidedEl!==a&&this.lastCollidedEl.posDnD.left===l.posDnD.left&&this.lastCollidedEl.posDnD.left===a.posDnD.left){l=this.lastCollidedEl}this.dragAndDropElement(a,l);this.lastCollidedEl=this.findCollision(i,n,this.aCardsOrder);if(this.lastCollidedEl){this.lastCollisionTop=this.isCollisionTop(i,n,this.lastCollidedEl)}};h.prototype.dragAndDropElement=function(e,t){if(e&&t){this.aCardsOrder=this.dragAndDropSwapElement(e,t,this.aCardsOrder);this.drawLayout(this.aCardsOrder)}};h.prototype.dragAndDropSwapElement=function(e,t,a){var i=a.slice();var n=a.indexOf(e);var s=a.indexOf(t);i[s]=e;i[n]=t;if(!!this.positionChanges&&t&&t.children){var r=t.children[0].getAttribute("id");this.positionChanges.push({changeType:"position",content:{cardId:r.substring(r.indexOf("mainView--")+10,r.length),position:n},isUserDependent:true});if(e&&e.children){var o=e.children[0].getAttribute("id");this.positionChanges.push({changeType:"position",content:{cardId:o.substring(o.indexOf("mainView--")+10,o.length),position:s},isUserDependent:true})}}return i};h.prototype.dragAndDropSwapElementForKeyboardNavigation=function(e,t){if(e&&t){var a=this.layout.getVisibleLayoutItems().map(function(e){return e.$().parent()[0]});var i=0;for(var n=0;n<a.length;n++){if(a[n]===e){a[n]=t;i++;continue}if(a[n]===t){a[n]=e;i++;continue}}if(i===2){this.afterReplaceElements(a)}}};h.prototype.initCardsSettingsForDragAndDrop=function(){this.jqLayout=this.layout.$();this.jqLayoutInner=this.jqLayout&&this.jqLayout.children().first();var e=this.jqLayout.scrollTop();var t=this.jqLayoutInner.height();this.isRTLEnabled=p.getRTL()?1:-1;this.aCardsOrder=[];this.layoutOffset=this.jqLayout.offset();if(a.system.tablet===true&&a.system.desktop===false){this.jqLayout.css("height",this.jqLayoutInner.height())}var i=this.layout.getVisibleLayoutItems();if(!i){return}this.aCardsOrder=i.map(function(e){var t=e.$().parent()[0];t.posDnD={width:t.offsetWidth,height:t.offsetHeight};t.style.width=t.offsetWidth+"px";return t});var n=this.jqLayoutInner&&this.jqLayoutInner.children().first();var s=this.isRTLEnabled===1?"margin-left":"margin-right";this.verticalMargin=parseInt(n.css(s),10);var r=this.aCardsOrder[0];this.horizontalMargin=parseInt(getComputedStyle(r)["margin-bottom"],10);this.columnCount=this.layout.getColumnCount();this.top=r.getBoundingClientRect().top-this.jqLayoutInner[0].getBoundingClientRect().top;this.left=r.getBoundingClientRect().left-this.jqLayoutInner[0].getBoundingClientRect().left;this.width=r.offsetWidth;l.addStyleToAllElements(this.aCardsOrder,"position","absolute");this.drawLayout(this.aCardsOrder);this.jqLayoutInner.height(t);this.jqLayout.scrollTop(e)};h.prototype.drawLayout=function(e){var t=[];for(var a=0;a<this.columnCount;a++){t[a]=0}for(var i=0;i<e.length;i++){var n=i%this.columnCount;var s=t[n]++;var r=this.left-this.isRTLEnabled*(n*this.verticalMargin+n*this.width);var o=this.top;var l=e[i];for(var d=0;d<s;d++){o+=this.horizontalMargin;var u=i-(d+1)*this.columnCount;o+=e[u].posDnD.height}l.posDnD.top=o;l.posDnD.bottom=o+l.posDnD.height;l.posDnD.left=r;l.posDnD.right=r+l.posDnD.width;this.updateElementCSS(e[i])}};h.prototype.updateElementCSS=function(e){jQuery(e).css({top:e.posDnD.top,left:e.posDnD.left})};h.prototype._dragStartHandler=function(e,t){this.positionChanges=[];if(a.system.desktop){l.addClassToAllElements(document.querySelectorAll("body"),"sapOVPDisableUserSelect");l.addClassToAllElements(document.querySelectorAll("body"),"sapOVPDisableImageDrag")}if(window.getSelection){var i=window.getSelection();i.removeAllRanges()}this.initCardsSettingsForDragAndDrop()};h.prototype._beforeDragHandler=function(e,t){if(a.browser.mobile){this.selectableElemets=jQuery(t).find(".sapUiSelectable");this.selectableElemets.removeClass("sapUiSelectable")}jQuery(this.settings.wrapper).addClass("dragAndDropMode")};h.prototype._dragEndHandler=function(e,t){this.lastCollidedEl=null;if(e.type=="mouseup"||e.type=="touchend"){if(this.aCardsOrder){this.afterReplaceElements(this.aCardsOrder)}}if(a.system.desktop){l.addClassToAllElements(document.querySelectorAll("body"),"sapOVPDisableUserSelect");l.addClassToAllElements(document.querySelectorAll("body"),"sapOVPDisableImageDrag")}jQuery(this.settings.wrapper).removeClass("dragAndDropMode");if(this.jqLayoutInner){this.jqLayoutInner.removeAttr("style")}if(this.aCardsOrder){jQuery(this.aCardsOrder).removeAttr("style")}this.uiActions.removeClone()};h.prototype._endHandler=function(e,t){if(a.browser.mobile&&this.selectableElemets){this.selectableElemets.addClass("sapUiSelectable")}};h.prototype.getSwapItemsFunction=function(){return this.dragAndDropSwapElementForKeyboardNavigation.bind(this)};h.prototype.destroy=function(){if(this.uiActions){this.uiActions.disable();this.uiActions=null}};var c={buildReplaceItemsInstance:function(e){var t={containerSelector:".sapUshellEasyScanLayoutInner",wrapper:".sapUshellEasyScanLayout",draggableSelector:".easyScanLayoutItemWrapper",placeHolderClass:"easyScanLayoutItemWrapper-placeHolder",cloneClass:"easyScanLayoutItemWrapperClone",moveTolerance:10,switchModeDelay:800,isTouch:!a.system.desktop,debug:false};e=Object.assign({},t,e);return new h(e)}};var f=function(e,t){this.init(e,t)};f.prototype.init=function(e,t){this.easyScanLayout=e;this.swapItemsFunction=typeof t==="function"?t:function(){};this.keyCodes=o;this.jqElement=e.$();var a=this;this.jqElement.on("keydown",function(e){a.keydownHandler.call(a,e)});this.jqElement.on("keyup",function(e){a.keyupHandler.call(a,e)});this.jqElement.find(".after").on("focus.keyboardNavigation",function(){a.afterFocusHandler.call(a)});this.jqElement.find(".sapUshellEasyScanLayoutInner").on("focus.keyboardNavigation",function(){a.layoutFocusHandler.call(a)});this.jqElement.on("focus.keyboardNavigation",".easyScanLayoutItemWrapper",this.layoutItemFocusHandler);this._ignoreSelfFocus=false;this.swapSourceElement=null;this.lastFocussedElement=null;this.lastFocussedClassId=null;this.jqElement.on("keyup",function(e){a.ctrlArrowUpDownHandler.call(a,e)})};f.prototype.ctrlArrowUpDownHandler=function(e){switch(e.keyCode){case this.keyCodes.PAGE_UP:if(e.ctrlKey){this.ctrlArrowHandler(e);this.pageUpDownHandler(e,true)}break;case this.keyCodes.PAGE_DOWN:if(e.ctrlKey){this.ctrlArrowHandler(e);this.pageUpDownHandler(e,false)}break;default:break}};f.prototype.destroy=function(){if(this.jqElement){this.jqElement.off(".keyboardNavigation");this.jqElement.find(".after").off(".keyboardNavigation");this.jqElement.find(".sapUshellEasyScanLayoutInner").off(".keyboardNavigation")}delete this.jqElement;delete this.easyScanLayout};f.prototype.getVisibleLayoutItems=function(){var e=this.easyScanLayout.getContent();var t=e.filter(function(e){return e.getVisible()});return t};f.prototype.afterFocusHandler=function(){if(this._ignoreSelfFocus){this._ignoreSelfFocus=false;return}var e=this.jqElement.find(".easyScanLayoutItemWrapper:sapTabbable").first();var t=e.find(":sapTabbable").last();if(!t.length){t=e}t.focus()};f.prototype.layoutFocusHandler=function(){if(this._ignoreSelfFocus){this._ignoreSelfFocus=false;return}var e=this.jqElement.find(".easyScanLayoutItemWrapper:sapTabbable").first();e=e.length===1?e.get(0):e;e.focus();this.handleScrollBar(true)};f.prototype.layoutItemFocusHandler=function(){var e=jQuery(document.activeElement);if(e){var t,a="";if(e.find(".valueStateText").length==1){var i=e.find(".valueStateText").find(".sapMObjectNumberText").text();var n=e.find(".valueStateText").find(".sapUiInvisibleText").text();e.find(".valueStateText").attr("aria-label",i+" "+n);e.find(".valueStateText").attr("aria-labelledby","")}e.find("[role='listitem']").attr("aria-label","");if(e.hasClass("easyScanLayoutItemWrapper")){var r="";var o=e.find(".cardCount");if(o.length===0){r="countDiv_"+(new Date).getTime();var l='<div id="'+r+'" class="cardCount"'+'" hidden></div>';e.append(l)}else{r=o[0].id}a+=r+" ";var d=e.find(".cardType");if(d.length!==0){a+=d[0].id+" "}}var u="cardHeaderType_";if(e.hasClass("sapOvpCardHeader")&&!e.hasClass("sapOvpStackCardContent")){var p="";var h=e.find(".cardHeaderType");if(h.length===0){var c=s.getText("CardHeaderType");p=u+(new Date).getTime();var f='<div id="'+p+'" class="cardHeaderType" aria-label="'+c+'" hidden></div>';e.append(f)}else{p=h[0].id}a+=p+" "}var m,y;if(e.hasClass("easyScanLayoutItemWrapper")){y=e.find(".sapOvpCardHeader");m=y.find("[aria-label]")}else{m=e.find("[aria-label]")}var g=e.find(".sapOvpStackCardHeader").length!==1;if(g){var v=[u,"sapOvpCardAdditionalActions","listItem","linkListItem"];var C=function(e){return!v.some(function(t){return e.includes(t)})};for(t=0;t<m.length;t++){var b=m[t].id;var S=b&&C(b);if(S){a+=b+" "}}}if(e.hasClass("sapOvpCardHeader")){var E=e.find(".cardHeaderText");if(E.length!==0){for(var t=0;t<E.length;t++){if(a.indexOf(E[t].id)===-1){a+=E[t].id+" "}}}}if(a.length){e.attr("aria-labelledby",a)}if(e.prop("nodeName")==="LI"&&e.find(".linkListHasPopover").length!==0){if(e.find("#hasDetails").length===0){e.append("<div id='hasDetails' hidden>"+s.getText("HAS_DETAILS")+"</div>");e.attr("aria-describedby","hasDetails")}}var D=e.attr("id");if(D&&D.indexOf("ovpTable")!=-1&&e.find("[role='Link']")&&!e.hasClass("sapUiCompSmartLink")){var w=e.closest("td").attr("data-sap-ui-column"),L=e.closest("tbody").siblings().children().filter("tr").children();for(var t=0;t<L.length;t++){if(L[t].getAttribute("data-sap-ui")==w&&L[t].hasChildNodes("span")){var I=L[t].firstElementChild.getAttribute("id");e.attr("aria-labelledby",I)}}}}};f.prototype._getLayoutItemIndex=function(e){if(!e.hasClass("easyScanLayoutItemWrapper")){return false}var t=e.children().attr("id");var a=false;this.getVisibleLayoutItems().forEach(function(e,i){if(t==e.getId()){a=i}});return a};f.prototype._changeItemsFocus=function(e){var t=document.querySelectorAll(".easyScanLayoutItemWrapper");l.addAttributeToAllElements(t,"tabindex","-1");e.attr("tabindex",0);setTimeout(function(){e.focus()},500)};f.prototype._swapItemsFocus=function(e,t,a){e.preventDefault();t.attr("tabindex","-1");setTimeout(function(){a.attr("tabindex","0").focus()},0)};f.prototype.tabButtonHandler=function(e){var t=jQuery(document.activeElement);this.lastFocussedElement=t;if(t.hasClass("easyScanLayoutItemWrapper")){return}var a=t.closest(".easyScanLayoutItemWrapper");if(!a.length){return}var i=a.find(jQuery(".lastElement"));if(t.is(i)){e.stopPropagation();e.stopImmediatePropagation();var n=this.jqElement.scrollTop();this._ignoreSelfFocus=true;this.jqElement.find(".after").focus();this.jqElement.scrollTop(n)}};f.prototype.f7Handler=function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();var t=jQuery(document.activeElement);if(t.hasClass("easyScanLayoutItemWrapper")){t.find(":sapTabbable").first().focus()}else{var a=t.closest(".easyScanLayoutItemWrapper");a=a.length===1?a.get(0):a;a.focus()}};f.prototype.shiftTabButtonHandler=function(e){var t=jQuery(document.activeElement);if(t.hasClass("after")){this.lastFocussedElement.focus();return}if(!t.hasClass("easyScanLayoutItemWrapper")){return}this._ignoreSelfFocus=true;this.jqElement.find(".sapUshellEasyScanLayoutInner").focus()};f.prototype.arrowUpDownHandler=function(e,t){e.preventDefault();var a=t?"prev":"next";var i=jQuery(document.activeElement);if(!i.hasClass("sapOvpCardHeader")){var n=jQuery(i)[a](".easyScanLayoutItemWrapper");if(!n.is(i)){this._swapItemsFocus(e,i,n)}}};f.prototype.arrowRightLeftHandler=function(e,t){var a=t?1:-1;var i=jQuery(document.activeElement);var n=this._getLayoutItemIndex(i);if(n===false){return}var s=this.getVisibleLayoutItems()[n+a];if(s){this._swapItemsFocus(e,i,s.$().parent())}};f.prototype.altPageUpAndHomeHandler=function(e){var t=jQuery(document.activeElement);var a=this._getLayoutItemIndex(t);if(a===false){return}var i=this.easyScanLayout.getColumnCount();var n=a%i;var s;var r=this.getVisibleLayoutItems();if(n==0){s=r[0]}else{s=r[a-n]}this._swapItemsFocus(e,t,s.$().parent())};f.prototype.altPageDownAndEndHandler=function(e){var t=jQuery(document.activeElement);var a=this._getLayoutItemIndex(t);if(a===false){return}var i=this.easyScanLayout.getColumnCount();var n=a%i;var s;var r=this.getVisibleLayoutItems();if(n==i-1||a+(i-n)>r.length){s=r[r.length-1]}else{s=r[a+(i-n-1)]}this._swapItemsFocus(e,t,s.$().parent())};f.prototype.ctrlHomeHandler=function(e){var t=jQuery(document.activeElement);var a=this._getLayoutItemIndex(t);if(a===false){return}var i=this.easyScanLayout.getColumnCount();var n=a%i;var s=this.getVisibleLayoutItems();var r=s[n];var o=r.$().parent();if(o.is(t)){o=s[0].$().parent()}this._swapItemsFocus(e,t,o)};f.prototype.ctrlEndHandler=function(e){var t=jQuery(document.activeElement);var a=this._getLayoutItemIndex(t);if(a<0){return}var i=this.easyScanLayout.getColumnCount();var n=a%i;var s;var r=this.getVisibleLayoutItems();for(var o=r.length-1;o>=0;o--){if(o%i==n){s=r[o];break}}var l=s.$().parent();if(l.is(t)){l=r[r.length-1].$().parent()}this._swapItemsFocus(e,t,l)};f.prototype.pageUpDownHandler=function(e,t){var a=t?"prev":"next";var i=jQuery(document.activeElement);if(!i.hasClass("easyScanLayoutItemWrapper")){return}if(!i[a]().length){return}var n=false;var s=i;var r=jQuery(window).height();while(!n){var o=s[a]();if(!o.length){n=s;break}if(!t&&o.offset().top>r){n=o;break}var l=o.offset().top;var d=0;if(l){d=l<0?-1:1}if(t&&d<=0){n=o;break}s=o}this._swapItemsFocus(e,i,n)};f.prototype.ctrlArrowHandler=function(e){if(this.swapSourceElement==null){this.swapSourceElement=jQuery(document.activeElement);if(!this.swapSourceElement.hasClass("easyScanLayoutItemWrapper")){this.endSwap()}else{var t=this;this.jqElement.on("keyup.keyboardNavigation",function(e){t.keyupHandler.call(t,e)});this.jqElement.addClass("dragAndDropMode");this.swapSourceElement.addClass("dragHovered")}}};f.prototype.keyupHandler=function(e){if(this.swapSourceElement!=null&&e.keyCode===this.keyCodes.CONTROL){var t=jQuery(document.activeElement);if(t.hasClass("easyScanLayoutItemWrapper")){this.swapItemsFunction(this.swapSourceElement[0],t[0]);this._changeItemsFocus(this.swapSourceElement)}this.endSwap()}else if(e.keyCode===this.keyCodes.SPACE){this.spacebarHandler(e)}else if(e.keyCode===this.keyCodes.F6){if(e.shiftKey){var a=document.getElementsByClassName("sapUshellEasyScanLayoutInner");var i=a[0].firstElementChild;if(i.firstElementChild){document.getElementsByClassName(i.firstElementChild.className)[0].focus()}this.handleScrollBar(true)}}};f.prototype.endSwap=function(e){this.swapSourceElement.removeClass("dragHovered");this.jqElement.removeClass("dragAndDropMode");this.swapSourceElement=null;this.jqElement.off("keyup.keyboardNavigation")};f.prototype.checkIfSwapInterrupted=function(e){if(this.swapSourceElement!=null&&e.keyCode!=this.keyCodes.ARROW_LEFT&&e.keyCode!=this.keyCodes.ARROW_RIGHT&&e.keyCode!=this.keyCodes.ARROW_UP&&e.keyCode!=this.keyCodes.ARROW_DOWN){this.endSwap()}};f.prototype.spacebarHandler=function(e){var t=u.getElementById(e.target.id);if(t&&t.mEventRegistry.hasOwnProperty("press")){var a="#"+e.target.id;l.addClassToAllElements(document.querySelectorAll(a),"sapMLIBActive");t.firePress()}};f.prototype.keydownHandler=function(e){this.checkIfSwapInterrupted(e);switch(e.keyCode){case this.keyCodes.TAB:e.shiftKey?this.shiftTabButtonHandler(e):this.tabButtonHandler(e);break;case this.keyCodes.F6:if(e.shiftKey){this._ignoreSelfFocus=true;this.jqElement.find(".sapUshellEasyScanLayoutInner").focus();r.handleF6GroupNavigation(e)}else{this._ignoreSelfFocus=true;var t=this.jqElement.scrollTop();this.jqElement.find(".after").focus();r.handleF6GroupNavigation(e);this.jqElement.scrollTop(t);this.handleScrollBar(true)}break;case this.keyCodes.F7:this.f7Handler(e);break;case this.keyCodes.ARROW_UP:if(e.ctrlKey==true){this.ctrlArrowHandler(e)}this.arrowUpDownHandler(e,true);this.handleScrollBar(false);break;case this.keyCodes.ARROW_DOWN:if(e.ctrlKey==true){this.ctrlArrowHandler(e)}this.arrowUpDownHandler(e,false);break;case this.keyCodes.ARROW_RIGHT:if(e.ctrlKey==true){this.ctrlArrowHandler(e)}this.arrowRightLeftHandler(e,true);break;case this.keyCodes.ARROW_LEFT:if(e.ctrlKey==true){this.ctrlArrowHandler(e)}this.arrowRightLeftHandler(e,false);break;case this.keyCodes.HOME:e.ctrlKey==true?this.ctrlHomeHandler(e):this.altPageUpAndHomeHandler(e);break;case this.keyCodes.END:e.ctrlKey==true?this.ctrlEndHandler(e):this.altPageDownAndEndHandler(e);break;case this.keyCodes.PAGE_UP:e.altKey==true?this.altPageUpAndHomeHandler(e):this.pageUpDownHandler(e,true);if(e.ctrlKey){this.ctrlArrowHandler(e);this.pageUpDownHandler(e,true)}break;case this.keyCodes.PAGE_DOWN:e.altKey==true?this.altPageDownAndEndHandler(e):this.pageUpDownHandler(e,false);if(e.ctrlKey){this.ctrlArrowHandler(e);this.pageUpDownHandler(e,false)}break;case this.keyCodes.ENTER:this.spacebarHandler(e);break;default:break}};f.prototype.handleScrollBar=function(e){var t=this.easyScanLayout._sOwnerId+"---mainView--ovpMain";if(t){var a=u.getElementById(t);if(a){setTimeout(function(){var t=a.getScrollDelegate();if(t){var i=document.activeElement.getBoundingClientRect().height;var n=t.getScrollTop();var s=e?0:n-i-32;t.scrollTo(0,s)}},0)}}};var m=i.extend("sap.ovp.ui.EasyScanLayout",{metadata:{designTime:true,library:"sap.ovp",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},defaultAggregation:"content",events:{afterRendering:{},afterDragEnds:{},afterColumnUpdate:{}},properties:{useMediaQueries:{group:"Misc",type:"boolean",defaultValue:false},dragAndDropRootSelector:{group:"Misc",type:"string"},dragAndDropEnabled:{group:"Misc",type:"boolean",defaultValue:true},debounceTime:{group:"Misc",type:"int",defaultValue:150}}},renderer:{render:function(e,t){var a=d.getComponentById(t._sOwnerId)&&d.getComponentById(t._sOwnerId).oOvpConfig.cards;e.openStart("div",t);e.class("sapUshellEasyScanLayout");e.openEnd();e.openStart("div");e.class("sapUshellEasyScanLayoutInner");e.attr("role","list");e.attr("aria-label","Cards");if(a&&a.length>0){e.attr("tabindex",0)}e.openEnd();var i=t.columnCount;var n=Array.apply(null,new Array(i)).map(function(){return[]});var s=t.getContent().filter(function(e){return e.getVisible()});for(var r=0;r<s.length;r++){n[r%i].push(s[r])}var o=1;n.forEach(function(t){e.openStart("div");e.class("easyScanLayoutColumn");e.accessibilityState(undefined,{role:"list"});e.openEnd();t.forEach(function(t,a){e.openStart("div");if(o===1){e.attr("tabindex",0)}else{e.attr("tabindex",-1)}e.class("easyScanLayoutItemWrapper");e.accessibilityState(undefined,{role:"listitem"});e.attr("aria-setsize",s.length);e.attr("aria-posinset",o);o++;e.openEnd();e.renderControl(t);e.openStart("div").class("lastElement").accessibilityState(undefined,{role:"none"}).attr("tabindex",0).openEnd();e.close("div");e.close("div")});e.close("div")});e.close("div");e.openStart("div");e.class("after");if(a&&a.length>0){e.attr("tabindex",0).accessibilityState(undefined,{role:"none"})}e.openEnd();e.close("div")}}});m.prototype.getColumnResolutionList=function(){return[{minWidth:0,styleClass:"columns-blank",columnCount:1},{minWidth:240,styleClass:"columns-block",columnCount:1},{minWidth:352,styleClass:"columns-narrow",columnCount:1},{minWidth:433,styleClass:"columns-wide",columnCount:1},{minWidth:704,styleClass:"columns-narrow",columnCount:2},{minWidth:864,styleClass:"columns-wide",columnCount:2},{minWidth:1024,styleClass:"columns-narrow",columnCount:3},{minWidth:1280,styleClass:"columns-wide",columnCount:3},{minWidth:1440,styleClass:"columns-narrow",columnCount:4},{minWidth:1800,styleClass:"columns-wide",columnCount:4},{minWidth:2560,styleClass:"columns-narrow",columnCount:5},{minWidth:3008,styleClass:"columns-wide",columnCount:5},{minWidth:3600,styleClass:"columns-narrow",columnCount:4},{minWidth:3840,styleClass:"columns-wide",columnCount:4},{minWidth:5120,styleClass:"columns-wide",columnCount:5},{minWidth:6016,styleClass:"columns-wide",columnCount:5}]};m.prototype.init=function(){this.columnResolutionList=this.getColumnResolutionList();this.columnCount=this.columnResolutionList[0].columnCount;this.columnStyle="";this.updateColumnClass(this.columnResolutionList[0].styleClass);this.initResizeHandlerOrMediaListeners(this.columnResolutionList);if(d.getComponentById(this._sOwnerId)&&d.getComponentById(this._sOwnerId).oOvpConfig.cards.length===0){this.data("sap-ui-fastnavgroup","false",false)}else{this.data("sap-ui-fastnavgroup","true",true)}};var y;var g=function(e,t,a){var i=function(e,t){this.updateColumnClass(t);this.refreshColumnCount(e,this.getContent())};if(a.matches){window.clearTimeout(y);y=window.setTimeout(i.bind(this,e,t),this.getDebounceTime())}};var v=function(e,t){var a=e.minWidth;var i=t&&t.minWidth;return"(min-width: "+a+"px)"+(i?" and (max-width: "+(i-1)+"px)":"")};m.prototype.initMediaListeners=function(e){var t=[];for(var a=0;a<e.length;a++){var i=v(e[a],e[a+1]);var n=window.matchMedia(i);var s=g.bind(this,e[a].columnCount,e[a].styleClass);n.addListener(s);n.bindedListener=s;s(n);t.push(n)}return t};m.prototype.initResizeHandler=function(e){var t;var a=this.getDebounceTime();var i=function(){window.clearTimeout(t);t=window.setTimeout(this.oControl.resizeHandler.bind(this,e),a)};return n.register(this,i)};m.prototype.initResizeHandlerOrMediaListeners=function(e){var t=a.browser.msie&&a.browser.version>9;if(t&&this.getUseMediaQueries()){this.mediaQueryList=this.initMediaListeners(e)}else{this.resizeHandlerId=this.initResizeHandler(e)}};m.prototype.resizeHandler=function(e){var t=this.iWidth;var a=this;var i=this.oControl;var n;if(document.querySelectorAll(".ovpWrapper .sapFDynamicPageContent").length>0){t=window.innerWidth}for(var s=0;s<e.length;s++){if(!e[s+1]){n=e[s];break}if(e[s].minWidth<=t&&e[s+1].minWidth>t){n=e[s];break}}i.refreshColumnCount(n.columnCount,i.getContent(),a);i.updateColumnClass(n.styleClass);i.fireAfterColumnUpdate(n)};m.prototype.getColumnWidth=function(e){var t;switch(e){case"columns-blank":t=0;break;case"columns-narrow":t=20;break;case"columns-wide":t=25;break;default:break}return t};m.prototype.refreshColumnCount=function(e,t,a){this.columnCount=e;var i=jQuery();for(var n=0;n<e;n++){i=i.add("<div class='easyScanLayoutColumn'></div>")}var s=t.filter(function(e){return e.getVisible()});var r=1;for(var o=0;o<s.length;o++){jQuery(s[o].getDomRef()).parent().attr("aria-posinset",r);r++;i.get(o%e).appendChild(s[o].getDomRef().parentNode)}this.$().children(".sapUshellEasyScanLayoutInner").empty().append(i);if(a&&a.iWidth){this.headerMargin(a)}};m.prototype.headerMargin=function(t){var i=0,n=0;var s=t.iWidth;var r,o,l,d=0,u,p=0;var h=this.getColumnResolutionList();var c=e.getPixelPerRem();var f=parseInt(window.getComputedStyle(document.querySelector(".ovpWrapper .sapFDynamicPageTitleWrapper"),null).getPropertyValue("width").split("px")[0],10)*1/c;if(document.querySelectorAll(".ovpWrapper .sapFDynamicPageContent").length>0){s=window.innerWidth}for(var m=0;m<h.length;m++){if(!h[m+1]){r=h[m];break}if(h[m].minWidth<=s&&h[m+1].minWidth>s){r=h[m];break}}u=this.getColumnWidth(r.styleClass);l=r.columnCount*u+(r.columnCount-1)*1;o=(f-l)/2;if(a.system.desktop){jQuery(".ovpWrapper .sapFDynamicPageTitle").css({"margin-left":o+"rem","margin-right":o+"rem"});jQuery(".ovpWrapper .sapFDynamicPageHeader").css({"margin-left":o+"rem","margin-right":o+"rem"})}if(a.system.desktop){f=document.body.clientWidth;if(document.querySelectorAll(".ovpWrapper .sapFDynamicPageContentFitContainer").length>0){i=document.querySelectorAll(".ovpWrapper .sapFDynamicPageContentFitContainer")[0].clientWidth}if(f===i){var y=document.querySelector(".ovpWrapper .sapFDynamicPageTitle")||undefined;var g=y&&getComputedStyle(y)["margin-left"];var v=y&&getComputedStyle(y)["margin-right"];if(typeof g==="string"||g instanceof String){g=g.length>0?parseInt(g.split("px")[0],10):0}if(typeof v==="string"||v instanceof String){v=v.length>0?parseInt(v.split("px")[0],10):0}d=jQuery(".ovpWrapper .sapFDynamicPageScrollBar").css("width");if(typeof d==="string"||d instanceof String){p=d.length>0?parseInt(d.split("px")[0],10):0}d=p;n=d/2;g=(g+n)/(c*1);v=(v+n)/(c*1);jQuery(".ovpWrapper .sapFDynamicPageTitle").css({"margin-left":g+"rem","margin-right":v+"rem",visibility:"visible"});jQuery(".ovpWrapper .sapFDynamicPageHeader").css({"margin-left":g+"rem","margin-right":v+"rem"})}}};m.prototype.getColumnCount=function(){return this.columnCount};m.prototype.getVisibleLayoutItems=function(){var e=this.getContent();var t=e.filter(function(e){return e.getVisible()});return t};m.prototype.updateColumnClass=function(e){if(this.columnStyle===e){return}this.removeStyleClass(this.columnStyle);this.addStyleClass(e);this.columnStyle=e};m.prototype.afterDragAndDropHandler=function(e){var t=this.removeAllAggregation("content",true);var a=[];var i=0;e.forEach(function(e,t){var i=e.children[0].getAttribute("id");var n=u.getElementById(i);a.push(n);jQuery(e).attr("aria-posinset",t+1)});for(var n=0;n<t.length;n++){if(t[n].getVisible()){this.addAggregation("content",a[i],true);i++}else{this.addAggregation("content",t[n],true)}}this.fireAfterDragEnds({positionChanges:this.layoutDragAndDrop.positionChanges});this.refreshColumnCount(this.getColumnCount(),this.getContent())};m.prototype.setActive=function(e){if(e){this.removeStyleClass("ovpOverlay")}else{this.addStyleClass("ovpOverlay")}};m.prototype.getActive=function(){return!this.hasStyleClass("ovpOverlay")};m.prototype.onAfterRendering=function(){if(!this.getDragAndDropRootSelector()){this.setDragAndDropRootSelector("#"+this.getId())}if(this.layoutDragAndDrop){this.layoutDragAndDrop.destroy()}if(this.getDragAndDropEnabled()){this.layoutDragAndDrop=c.buildReplaceItemsInstance({afterReplaceElements:this.afterDragAndDropHandler.bind(this),rootSelector:this.getDragAndDropRootSelector(),layout:this})}if(this.keyboardNavigation){this.keyboardNavigation.destroy()}var e=this.layoutDragAndDrop?this.layoutDragAndDrop.getSwapItemsFunction():null;this.keyboardNavigation=new f(this,e);this.fireAfterRendering()};m.prototype.exit=function(){if(this.mediaQueryList){this.mediaQueryList.forEach(function(e){e.removeListener(e.bindedListener)});delete this.mediaQueryList}if(this.resizeHandlerId){n.deregister(this.resizeHandlerId)}if(this.layoutDragAndDrop){this.layoutDragAndDrop.destroy();delete this.layoutDragAndDrop}};return m});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/OVPControllerExtensionTemplate", ["sap/ui/core/mvc/Controller","sap/ui/core/mvc/ControllerExtension","sap/m/MessageToast","sap/ui/util/openWindow"],function(e,n,o,s){"use strict";return n.extend("{{controllerExtensionName}}",{})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/OVPWrapper", ["sap/ui/core/Control"],function(e){"use strict";return e.extend("sap.ovp.ui.OVPWrapper",{metadata:{library:"sap.ovp",designTime:true,aggregations:{DynamicPage:{type:"sap.ui.core.Control",multiple:false}},defaultAggregation:"DynamicPage"},init:function(){},renderer:function(e,a){e.openStart("div",a);e.class("ovpWrapper");e.openEnd();e.renderControl(a.getAggregation("DynamicPage"));e.close("div")}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/ObjectStream", ["sap/ui/thirdparty/jquery","sap/ui/Device","sap/ui/core/Control","sap/m/Dialog","sap/ovp/app/resources","sap/ui/events/KeyCodes","sap/base/util/uid","sap/m/Button","./ObjectStreamRenderer","sap/base/i18n/Localization","sap/ui/core/Element","sap/ui/dom/jquery/Selectors"],function(jQuery,t,e,s,a,i,r,o,n,l,p){"use strict";var c=null;var h=function(t){this.init(t)};h.prototype.init=function(t){this.objectStream=t;this.keyCodes=i;this.jqElement=t.$();var e=this;this.jqElement.on("keydown.keyboardNavigation",function(t){e.keydownHandler.call(e,t)});this.jqElement.on("focus.keyboardNavigation",".sapOvpObjectStreamItem",this.ObjectStreamFocusAccessabilityHandler)};h.prototype.destroy=function(){if(this.jqElement){this.jqElement.off(".keyboardNavigation")}delete this.jqElement;delete this.objectStream};h.prototype._scrollItemToView=function(t,e){var s=t&&t.currentTarget&&t.currentTarget.id;if(s){var a=p.getElementById(s),i=a&&a.wrapper,r=e&&e.get()&&e.get()[0];if(r&&i){var o=r.getBoundingClientRect(),n=i.getBoundingClientRect(),l=o&&o.left,c=o&&o.right,h=n&&n.left,d=n&&n.right;if(d<c||h>l){r.scrollIntoView()}}}};h.prototype._swapItemsFocus=function(t,e,s){s=s.length===1?s.get(0):s;e=e.length===1?e.get(0):e;t.preventDefault();e.setAttribute("tabindex","-1");s.setAttribute("tabindex","0");s.focus()};h.prototype.ObjectStreamFocusAccessabilityHandler=function(){var t=document.activeElement;t=jQuery(t);if(t){var e=t.find("[aria-label]");var s,a="";for(s=0;s<e.length;s++){if(e[s].getAttribute("role")=="heading"){a+=e[s].id+" "}}if(a.length){t.attr("aria-labelledby",a)}if(t.hasClass("sapOvpCardHeader")){t.closest(".sapOvpObjectStreamItem").removeAttr("aria-labelledby")}}};h.prototype.tabButtonHandler=function(t){var e=jQuery(document.activeElement);if(e.hasClass("sapOvpObjectStreamItem")){return}if(e.hasClass("sapOvpObjectStreamClose")){t.preventDefault();this.jqElement.find(".sapOvpObjectStreamItem:sapTabbable").focus();return}var s=e.closest(".sapOvpObjectStreamItem");if(!s.length){return}var a=s.find(":sapTabbable");if(a.eq(a.length-1).is(e)){t.preventDefault();this.jqElement.find("a.sapOvpObjectStreamHeader").focus()}};h.prototype.shiftTabButtonHandler=function(t){var e=jQuery(document.activeElement);if(e.hasClass("sapOvpObjectStreamItem")){t.preventDefault();this.jqElement.find(".sapOvpObjectStreamClose").focus()}if(e.hasClass("sapOvpObjectStreamClose")){t.preventDefault();this.jqElement.find("a.sapOvpObjectStreamHeader").focus()}if(e.hasClass("sapOvpObjectStreamHeader")){t.preventDefault();this.jqElement.find(".sapOvpObjectStreamItem:sapTabbable *:sapTabbable").last().focus();return}};h.prototype.enterHandler=function(t){var e=jQuery(document.activeElement);if(e.hasClass("sapOvpObjectStreamClose")){t.preventDefault();this.objectStream.getParent().close();if(c){c.focus()}return}if(e.hasClass("sapOvpObjectStreamItem")&&!e.next().length){e.children().click();return}};h.prototype.f6Handler=function(t){var e=jQuery(document.activeElement);t.preventDefault();if(e.hasClass("sapOvpObjectStreamClose")){this.jqElement.find(".sapOvpObjectStreamItem").attr("tabindex","-1").first().attr("tabindex","0").focus()}else{this.jqElement.find(".sapOvpObjectStreamClose").focus()}};h.prototype.f7Handler=function(t){var e=jQuery(document.activeElement);if(e.hasClass("sapOvpObjectStreamItem")){e.find(":sapTabbable").first().focus()}else{e.closest(".sapOvpObjectStreamItem").focus()}t.preventDefault()};h.prototype.leftRightHandler=function(t,e){var s=e?"next":"prev";var a=jQuery(document.activeElement);if(!a.hasClass("sapOvpObjectStreamItem")){return false}var i=a[s]();if(!i.length){return}this._swapItemsFocus(t,a,i);this._scrollItemToView(t,i)};h.prototype.homeEndHandler=function(t,e){var s=e?"first":"last";var a=jQuery(document.activeElement);if(!a.hasClass("sapOvpObjectStreamItem")){return false}t.preventDefault();var i=this.jqElement.find(".sapOvpObjectStreamItem")[s]();this._swapItemsFocus(t,a,i)};h.prototype.pageUpDownHandler=function(t,e){var s=e?"prev":"next";var a=jQuery(document.activeElement);if(!a.hasClass("sapOvpObjectStreamItem")){return}if(!a[s]().length){return}var i=false;var r=a;var o=window.innerWidth;while(!i){var n=r[s]();if(!n.length){i=r;break}if(!e&&n.offset().left>o){i=n;break}if(e&&n.offset().left+n.outerHeight()<=0){i=n;break}r=n}this._swapItemsFocus(t,a,i)};h.prototype.keydownHandler=function(t){switch(t.keyCode){case this.keyCodes.TAB:t.shiftKey?this.shiftTabButtonHandler(t):this.tabButtonHandler(t);break;case this.keyCodes.ENTER:case this.keyCodes.SPACE:this.enterHandler(t);break;case this.keyCodes.F6:this.f6Handler(t);break;case this.keyCodes.F7:this.f7Handler(t);break;case this.keyCodes.ARROW_UP:case this.keyCodes.ARROW_LEFT:this.leftRightHandler(t,false);break;case this.keyCodes.ARROW_DOWN:case this.keyCodes.ARROW_RIGHT:this.leftRightHandler(t,true);break;case this.keyCodes.HOME:this.homeEndHandler(t,true);break;case this.keyCodes.END:this.homeEndHandler(t,false);break;case this.keyCodes.PAGE_UP:this.pageUpDownHandler(t,true);break;case this.keyCodes.PAGE_DOWN:this.pageUpDownHandler(t,false);break;default:break}};var d=e.extend("sap.ovp.ui.ObjectStream",{metadata:{library:"sap.ovp",aggregations:{content:{type:"sap.ui.core.Control",multiple:true},placeHolder:{type:"sap.ui.core.Control",multiple:false},title:{type:"sap.ui.core.Control",multiple:false}}},renderer:n});d.prototype.init=function(){var t=this;this._closeButton=new o({icon:"sap-icon://decline",tooltip:a.getText("close"),type:"Transparent",press:function(){t.getParent().close()}}).addStyleClass("sapOvpObjectStreamClose")};d.prototype._startScroll=function(t){this._direction=t;var e=this.wrapper.scrollWidth-this.wrapper.offsetWidth-Math.abs(this.wrapper.scrollLeft);var s;if(t=="left"){s=this.rtl&&!this.scrollReverse?e:this.wrapper.scrollLeft;if(s<=0){return}this.jqRightEdge.css("opacity",1)}else{s=this.rtl&&!this.scrollReverse?Math.abs(this.wrapper.scrollLeft):e;if(s<=0){return}this.jqLeftEdge.css("opacity",1)}var a=s*3;var i=t=="left"?s:~s+1;var r=this;jQuery(this.container).one("transitionend",function(){r._mouseLeave({data:r})});this.container.style.transition="transform "+a+"ms linear";this.container.style.transform="translate("+i+"px, 0px) scale(1) translateZ(0px) "};d.prototype._mouseLeave=function(e){var s=window.getComputedStyle(e.data.container).transform;e.data.container.style.transform=s;e.data.container.style.transition="";this.rtl=l.getRTL();var a;var i=s.split(",");if(s.substr(0,8)=="matrix3d"){a=parseInt(i[12],10)}else if(s.substr(0,6)=="matrix"){a=parseInt(i[4],10)}if(isNaN(a)){return}e.data.container.style.transform="none";if(t.browser.msie){a=this.rtl?~a:a}e.data.wrapper.scrollLeft+=~a+(e.data._direction=="left"?-5:5);e.data._checkEdgesVisibility()};var f;d.prototype.debounceScrollHandler=function(){window.clearTimeout(f);var t=this;f=window.setTimeout(function(){t._checkEdgesVisibility.call(t)},150)};d.prototype._initScrollVariables=function(){var e=this.$();this.container=e.find(".sapOvpObjectStreamScroll").get(0);this.rtl=l.getRTL();this.wrapper=e.find(".sapOvpObjectStreamCont").get(0);this.scrollReverse=this.scrollReverse||this.wrapper.scrollLeft>0;this.shouldShowScrollButton=!t.system.phone&&!t.system.tablet||t.system.combi;this.jqRightEdge=e.find(".sapOvpOSEdgeRight");this.jqLeftEdge=e.find(".sapOvpOSEdgeLeft");if(this.shouldShowScrollButton){var s=this;this.jqRightEdge.add(this.jqLeftEdge).on("mouseenter.objectStream",this,this._mouseEnter).on("mouseleave.objectStream",this,this._mouseLeave);jQuery(this.wrapper).on("scroll.objectStream",function(){s.debounceScrollHandler.call(s)})}else{this.jqLeftEdge.css("display","none");this.jqRightEdge.css("display","none")}this._checkEdgesVisibility()};d.prototype._afterOpen=function(){if(t.os.ios&&this.$().length){this.$().on("touchmove.scrollFix",function(t){t.stopPropagation()})}var e=this.$().find("a.sapOvpObjectStreamHeader");e.removeAttr("aria-describedby");e.removeAttr("href");e.focus();if(this.keyboardNavigation){this.keyboardNavigation.destroy()}this.keyboardNavigation=new h(this);this._initScrollVariables();this.jqBackground=jQuery("<div id='objectStreamBackgroundId' class='objectStreamNoBackground'></div>");jQuery("#sap-ui-static").prepend(this.jqBackground);var s=this;this.jqBackground.on("click.closePopup",function(){s._oPopup.close()});jQuery(".sapUshellEasyScanLayout").addClass("bluredLayout");var a=this.$().find(".sapOvpObjectStreamItem");for(var i=0;i<a.length;i++){var r=jQuery(a[i]).find(".sapOvpActionFooter");if(r.find("button").length==0){r.attr("tabindex","-1")}}};d.prototype._beforeClose=function(){if(t.os.ios&&this.$().length){this.$().off(".scrollFix")}this.keyboardNavigation.destroy();this.jqBackground.remove();this.jqLeftEdge.add(this.jqRightEdge).add(this.wrapper).off(".objectStream");jQuery(".sapUshellEasyScanLayout").removeClass("bluredLayout");this._oPopup=undefined;if(c){c.focus()}};d.prototype._mouseEnter=function(t){var e="right";if(t.target==t.data.jqRightEdge.get(0)||t.currentTarget==t.data.jqRightEdge.get(0)){e=l.getRTL()?"left":"right"}if(t.target==t.data.jqLeftEdge.get(0)||t.currentTarget==t.data.jqLeftEdge.get(0)){e=l.getRTL()?"right":"left"}t.data._startScroll(e)};d.prototype._checkEdgesVisibility=function(){var t=this.wrapper.scrollLeft;var e=this.wrapper.scrollWidth-this.wrapper.offsetWidth-this.wrapper.scrollLeft;var s=t==0?0:1;var a=e==0?0:1;if(l.getRTL()&&this.scrollReverse){this.jqLeftEdge.css("opacity",a);this.jqRightEdge.css("opacity",s);this.jqRightEdge.css("z-index",s===0?0:1)}else{this.jqLeftEdge.css("opacity",s);this.jqRightEdge.css("opacity",a);this.jqRightEdge.css("z-index",a===0?0:1)}};d.prototype._createPopup=function(){this._oPopup=new s({showHeader:false,afterOpen:this._afterOpen.bind(this),beforeClose:this._beforeClose.bind(this),content:[this],stretch:t.system.phone}).removeStyleClass("sapUiPopupWithPadding").addStyleClass("sapOvpStackedCardPopup");this._oPopup.oPopup.setModal(false)};d.prototype.open=function(t,e){if(!this._oPopup){this._createPopup()}this._cardWidth=t;c=e;this.setCardsSize(this._cardWidth);this._oPopup.open()};d.prototype.onBeforeRendering=function(){var t=this.getBinding("content");var e=this.getPlaceHolder();if(t&&t.getLength()<=20){this.setPlaceHolder(null);if(e){e.destroy()}}};d.prototype.onAfterRendering=function(){if(!this._oPopup||!this._oPopup.isOpen()||!this.getContent().length){return}setTimeout(function(){this._initScrollVariables()}.bind(this))};d.prototype.exit=function(){if(this._oPopup){this._oPopup.destroy()}if(this.jqBackground){this.jqBackground.remove()}this._closeButton.destroy();if(this._oScroller){this._oScroller.destroy();this._oScroller=null}};d.prototype.setCardsSize=function(e){var s=parseInt(window.getComputedStyle(document.documentElement).fontSize,10);var a=t.system.phone?document.body.clientHeight/s-4.5:28.75;var i=this.getContent();i.map(function(t){t.setWidth(e+"px");t.setHeight(a+"rem")});var r=this.getPlaceHolder();if(r){r.setWidth(e+"px");r.setHeight(a+"rem")}};d.prototype.getNewContentAvailable=function(){return this.onRefreshNewContent};d.prototype.setNewContentAvailable=function(t){this.onRefreshNewContent=t};d.prototype.updateContent=function(t){var e=this.mBindingInfos["content"],s=e.binding,a=s.getContexts(e.startIndex,e.length);if(t==="change"){e.clearQuickViewCard();var i=e.factory,o=0,n=this.getContent(),l=function(t){var s=this.getId()+"-"+r(),a=i(s,t);a.setBindingContext(t,e.model);this.addContent(a)};var p=l.bind(this);if(n.length<a.length){for(o=0;o<n.length;++o){n[o].destroy()}n.length=0;this.setNewContentAvailable(true);for(o=0;o<a.length;o++){p(a[o])}}if(!this.getNewContentAvailable()){for(o=0;o<a.length;++o){n[o].setBindingContext(a[o],e.model)}}if(n.length>=a.length){for(o=0;o<n.length;++o){n[o].destroy()}n.length=a.length;this.setNewContentAvailable(true);for(o=0;o<a.length;o++){p(a[o])}}}};return d});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/ObjectStreamRenderer", ["sap/ovp/app/resources"],function(e){"use strict";var t={apiVersion:2};t.render=function(t,i){if(!i.getVisible()){return}t.openStart("div",i);t.accessibilityState(undefined,{role:"dialog"});t.accessibilityState(i,{label:i.getTitle()});t.class("sapOvpObjectStream");t.openEnd();t.openStart("div");t.openEnd();var n=i.getTitle();if(n){t.renderControl(n)}t.renderControl(i._closeButton);t.close("div");t.openStart("div",i.getId()+"-cont");t.class("sapOvpObjectStreamCont");t.openEnd();t.openStart("div",i.getId()+"-scroll");t.accessibilityState(undefined,{role:"list"});t.class("sapOvpObjectStreamScroll");t.openEnd();var a=i.getContent();var r=i.getPlaceHolder();a.forEach(function(e,i){t.openStart("div");t.class("sapOvpObjectStreamItem");t.attr("tabindex",i==0?0:-1);t.accessibilityState(undefined,{role:"listitem"});t.attr("aria-label"," ");t.attr("aria-setsize",r?a.length+1:a.length);t.attr("aria-posinset",i+1);t.openEnd();t.renderControl(e);t.close("div")});if(r){t.openStart("div");t.class("sapOvpObjectStreamItem");t.attr("tabindex",!a.length?0:-1);t.accessibilityState(undefined,{role:"listitem"});t.attr("aria-setsize",a.length+1);t.attr("aria-posinset",a.length+1);t.openEnd();t.renderControl(r);t.close("div")}t.close("div");t.openStart("div",i.getId()+"-leftedge");t.class("sapOvpOSEdgeLeft");t.openEnd();t.icon("sap-icon://slim-arrow-left",[],{title:e.getText("PREVIOUS")});t.close("div");t.openStart("div",i.getId()+"-rightedge");t.class("sapOvpOSEdgeRight");t.openEnd();t.icon("sap-icon://slim-arrow-right",[],{title:e.getText("NEXT")});t.close("div");t.close("div");t.close("div")};t.renderFooterContent=function(e,t){};return t},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/SmartphoneHeaderToggle", [],function(){"use strict";return{threshold:10,headerVisible:true,startY:undefined,app:undefined,jqView:undefined,startHandler:function(e){if(this.app.getGlobalFilter()&&this.app.getGlobalFilter().hasOwnProperty("getVisible")&&this.app.getGlobalFilter().getVisible()){return}this.startY=e.touches[0].pageY},resizeHandler:function(){if(!this.headerVisible){this.animateHeader.call(this,this.headerVisible)}},animateHeader:function(e){var i=this.jqView.find(".ovpApplication > .sapUiFixFlexFixed > .sapMVBox");var t=this.jqView.find(".ovpApplication > .sapUiFixFlexFlexible");var a=t&&t.children();var s;var r=this;if(e){s="translateY(0px)";i.add(t).css({transform:s,"-webkit-transform":s});t.one("transitionend",function(e){if(r.headerVisible){a.css({bottom:"0px"})}})}else{var n=this.getView().byId("ovpMain").getHeader();if(n){var h=n.$().height();a.css({bottom:"-"+h+"px"});s="translateY(-"+h+"px)";t.add(i).css({transform:s,"-webkit-transform":s})}}},moveHandler:function(e){var i=e.touches[0].pageY;if(typeof this.startY==="undefined"){if(this.app.getGlobalFilter()&&this.app.getGlobalFilter().hasOwnProperty("getVisible")&&this.app.getGlobalFilter().getVisible()){return}this.startY=i}if(Math.abs(this.startY-i)<this.threshold){return}if(this.startY>i&&this.headerVisible){this.headerVisible=false;this.startY=i;this.animateHeader.call(this,this.headerVisible)}if(this.startY<i&&!this.headerVisible){this.headerVisible=true;this.startY=i;this.animateHeader.call(this,this.headerVisible)}},endHandler:function(){this.startY=undefined;return},enable:function(e){this.app=e;this.view=this.app.getView();this.jqView=this.view.$();var i=this;this.jqView.on("touchstart.headerHiding",function(e){i.startHandler.call(i,e)});this.jqView.on("touchmove.headerHiding",function(e){i.moveHandler.call(i,e)});this.jqView.on("touchend.headerHiding touchcancel.headerHiding touchleave.headerHiding",function(){i.endHandler.call(i)});window.addEventListener("resize.headerHiding",function(){i.resizeHandler.call(i)})},disable:function(){this.jqView.off("touchstart.headerHiding touchmove.headerHiding touchend.headerHiding touchcancel.headerHiding touchleave.headerHiding");window.removeEventListener("resize.headerHiding")}}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/UIActions", ["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ui/events/KeyCodes","sap/ui/core/Element","sap/base/i18n/Localization"],function(jQuery,e,t,l,s){"use strict";return e.extend("sap.ovp.ui.UIActions",{constructor:function(e){if(!e||!e.rootSelector||!e.containerSelector||!e.draggableSelector){throw new Error("No configuration object to initialize User Interaction module.")}this.captureStart=null;this.captureMove=null;this.captureEnd=null;this.clickCallback=null;this.clickEvent=null;this.clickHandler=null;this.clone=null;this.cloneClass=null;this.container=null;this.contextMenuEvent=null;this.debug=false;this.dragMoveCallback=null;this.draggable=null;this.placeHolderClass=null;this.draggableSelector=null;this.doubleTapCallback=null;this.doubleTapDelay=null;this.element=null;this.swapTargetElement=null;this.endX=null;this.endY=null;this.isTouch=null;this.lastElement=null;this.lastTapTime=null;this.lockMode=null;this.log=null;this.mode=null;this.mouseDownEvent=null;this.mouseMoveEvent=null;this.mouseUpEvent=null;this.keyUpEvent=null;this.moveTolerance=null;this.moveX=null;this.moveY=null;this.noop=null;this.preventClickFlag=false;this.preventClickTimeoutId=null;this.scrollContainer=null;this.scrollContainerSelector=null;this.scrollEvent=null;this.scrollTimer=null;this.startX=null;this.startY=null;this.switchModeDelay=null;this.tapsNumber=null;this.timer=null;this.scrollHandler=null;this.touchCancelEvent=null;this.dragStartCallback=null;this.dragEndCallback=null;this.endCallback=null;this.touchEndEvent=null;this.touchMoveEvent=null;this.beforeDragCallback=null;this.touchStartEvent=null;this.wrapper=null;this.wrapperRect=null;this.scrollEdge=100;this.isRTLEnabled=null;this.resizeStartCallback=null;this.resizeMoveCallback=null;this.resizeEndCallback=null;this.isResize=null;this.isResizeX=null;this.isResizeY=null;this.resizeHandleDistance=null;this.layoutDetails=null;this.init=function(e){this.startX=-1;this.startY=-1;this.moveX=-1;this.moveY=-1;this.endX=-1;this.endY=-1;this.resizeHandleDistance=16;this.isResize=false;this.isResizeX=false;this.isResizeY=false;this.noop=function(){};this.isTouch=e.isTouch?!!e.isTouch:false;this.container=document.querySelector(e.containerSelector);this.scrollContainerSelector=e.scrollContainerSelector||e.containerSelector;this.switchModeDelay=e.switchModeDelay||1500;this.moveTolerance=e.moveTolerance===0?0:e.moveTolerance||1e3;this.draggableSelector=e.draggableSelector;this.mode="normal";this.debug=e.debug||false;this.root=document.querySelector(e.rootSelector);this.tapsNumber=0;this.lastTapTime=0;this.log=this.debug?this.logToConsole:this.noop;this.lockMode=false;this.placeHolderClass=e.placeHolderClass||"";this.cloneClass=e.cloneClass||"";this.wrapper=e.wrapperSelector?document.querySelector(e.wrapperSelector):this.container.parentNode;this.clickCallback=typeof e.clickCallback==="function"?e.clickCallback:this.noop;this.beforeDragCallback=typeof e.beforeDragCallback==="function"?e.beforeDragCallback:this.noop;this.doubleTapCallback=typeof e.doubleTapCallback==="function"?e.doubleTapCallback:this.noop;this.dragEndCallback=typeof e.dragEndCallback==="function"?e.dragEndCallback:this.noop;this.endCallback=typeof e.endCallback==="function"?e.endCallback:this.noop;this.dragStartCallback=typeof e.dragStartCallback==="function"?e.dragStartCallback:this.noop;this.dragMoveCallback=typeof e.dragMoveCallback==="function"?e.dragMoveCallback:this.noop;this.doubleTapDelay=e.doubleTapDelay||500;this.wrapperRect=this.wrapper.getBoundingClientRect();this.scrollEvent="scroll";this.touchStartEvent="touchstart";this.touchMoveEvent="touchmove";this.touchEndEvent="touchend";this.mouseDownEvent="mousedown";this.mouseMoveEvent="mousemove";this.mouseUpEvent="mouseup";this.keyUpEvent="keyup";this.contextMenuEvent="contextmenu";this.touchCancelEvent="touchcancel";this.clickEvent="click";this.layoutDetails=e.layout?e.layout.dashboardLayoutUtil:null;this.isRTLEnabled=s.getRTL();this.resizeStartCallback=typeof e.resizeStartCallback==="function"?e.resizeStartCallback:this.noop;this.resizeMoveCallback=typeof e.resizeMoveCallback==="function"?e.resizeMoveCallback:this.noop;this.resizeEndCallback=typeof e.resizeEndCallback==="function"?e.resizeEndCallback:this.noop;if(this.wrapper){jQuery(this.wrapper).css({position:"relative",top:0,left:0,right:0,bottom:0,"-webkit-transform":"translateZ(0)",transform:"translateZ(0)"})}};this.forEach=function(e,t){return Array.prototype.forEach.call(e,t)};this.indexOf=function(e,t){return Array.prototype.indexOf.call(e,t)};this.insertBefore=function(e,t,l){var s,i,a;a=Array.prototype.splice;s=this.indexOf(e,t);i=this.indexOf(e,l);a.call(e,i-(s<i?1:0),0,a.call(e,s,1)[0])};this.logToConsole=function(){window.console.log.apply(console,arguments)};this.getDraggableElement=function(e){var t;this.draggable=jQuery(this.draggableSelector,this.container);while(typeof t==="undefined"&&e!==this.root){if(this.indexOf(this.draggable,e)>=0){t=e}e=e.parentNode}return t};this.captureStart=function(e){var t;if(e.type==="touchstart"&&e.touches.length===1){t=e.touches[0]}else if(e.type==="mousedown"){t=e;if(e.which!==1){return}}if(t){this.element=this.getDraggableElement(t.target);this.startX=t.pageX;this.startY=t.pageY;this.lastMoveX=0;this.lastMoveY=0;if(this.element){var l=jQuery(this.element);var s=l.offset().left;var i=l.offset().top;var a=l.height();var n=l.width();if(this.layoutDetails){var o=this.isRTLEnabled?this.startX-s<this.resizeHandleDistance:s+n-this.startX<this.resizeHandleDistance;var r=i+a-this.startY<this.resizeHandleDistance;if(o||r){if(o&&r){this.isResizeX=false;this.isResizeY=false}else if(!o&&r){this.isResizeX=false;this.isResizeY=true}else if(o&&!r){this.isResizeX=true;this.isResizeY=false}this.isResize=true}}else{var h=s+n-this.startX;var c=i+a-this.startY;if(h<this.resizeHandleDistance&&c<this.resizeHandleDistance){this.isResize=true}}}if(this.lastTapTime&&this.lastElement&&this.element&&this.lastElement===this.element&&Math.abs(Date.now()-this.lastTapTime)<this.doubleTapDelay){this.lastTapTime=0;this.tapsNumber=2}else{this.lastTapTime=Date.now();this.tapsNumber=1;this.lastElement=this.element}this.log("captureStart("+this.startX+", "+this.startY+")")}};var i=this;this.startHandler=function(e){i.log("startHandler");i.captureStart(e);if(i.element){i.beforeDragCallback(e,i.element);if(i.lockMode===false){if(i.tapsNumber===2){i.mode="double-tap";return}if(e.type==="touchstart"){i.timer=setTimeout(function(){if(i.isResize){i.log("mode switched to resize");i.mode="resize";i.resizeStartCallback(e,i.element)}else{i.log("mode switched to drag");i.mode="drag";i.createClone();i.dragStartCallback(e,i.element)}},i.switchModeDelay)}}}};this.captureMove=function(e){var t;if(e.type==="touchmove"&&e.touches.length===1){t=e.touches[0]}else if(e.type==="mousemove"){t=e}if(t){this.moveX=t.pageX;this.moveY=t.pageY;this.log("captureMove("+this.moveX+", "+this.moveY+")")}};this.moveHandler=function(e){i.log("moveHandler");i.captureMove(e);switch(i.mode){case"normal":if(Math.abs(i.startX-i.moveX)>i.moveTolerance||Math.abs(i.startY-i.moveY)>i.moveTolerance){if(e.type==="touchmove"){i.log("-> normal");clearTimeout(i.timer);delete i.timer}else if(i.element){if(i.isResize){i.log("mode switched to resize");i.mode="resize"}else{i.log("mode switched to drag");i.mode="drag";i.createClone()}}}break;case"drag":e.preventDefault();i.log("-> drag");i.mode="drag-and-scroll";window.addEventListener(i.mouseUpEvent,i.endHandler,true);window.addEventListener(i.keyUpEvent,i.endHandler,true);i.translateClone();i.scrollContainer=document.querySelector(i.scrollContainerSelector);if(e.type==="mousemove"){i.dragStartCallback(e,i.element)}break;case"drag-and-scroll":e.stopPropagation();e.preventDefault();i.log("-> drag-and-scroll");i.translateClone();i.dragMoveCallback({evt:e,clone:i.clone,element:i.element,draggable:i.draggable,moveX:i.moveX,moveY:i.moveY});break;case"resize":e.preventDefault();i.log("-> resize");i.mode="resize-and-scroll";window.addEventListener(i.mouseUpEvent,i.endHandler,true);i.scrollContainer=document.querySelector(i.scrollContainerSelector);if(e.type==="mousemove"){i.resizeStartCallback(e,i.element)}break;case"resize-and-scroll":e.stopPropagation();e.preventDefault();i.log("-> resize-and-scroll");i.resizeMoveCallback({evt:e,element:i.element,draggable:i.draggable,moveX:i.moveX,moveY:i.moveY});break;default:break}};this.captureEnd=function(e){var t;if((e.type==="touchend"||e.type==="touchcancel")&&e.changedTouches.length===1){t=e.changedTouches[0]}else if(e.type==="mouseup"){t=e}if(t){this.endX=t.pageX;this.endY=t.pageY;this.log("captureEnd("+this.endX+", "+this.endY+")")}};this.contextMenuHandler=function(e){if(i.isTouch){e.preventDefault()}};this.clickHandler=function(e){var t=document.getElementsByClassName("viz-controls-chartTooltip");var s=t&&t[0]&&t[0].id;var a=l.getElementById(s);if(a){var n=a&&a.aDelegates[0]&&a.aDelegates[0].oDelegate;if(n){n.close()}}if(i.preventClickFlag){i.preventClickFlag=false;e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();clearTimeout(i.preventClickTimeoutId)}i.clickCallback()};this.preventClick=function(){this.preventClickFlag=true;this.preventClickTimeoutId=setTimeout(function(){i.preventClickFlag=false},100)};this.endHandler=function(e){i.log("endHandler");if(e.type==i.keyUpEvent&&e.which==t.ESCAPE||e.type==i.mouseUpEvent||e.type==i.touchEndEvent){i.captureEnd(e);switch(i.mode){case"normal":i.log("-> normal");break;case"drag":i.log("-> drag");i.dragEndCallback(e,i.element,i.clone);i.preventClick();break;case"drag-and-scroll":i.log("-> drag-and-scroll");window.removeEventListener(i.mouseUpEvent,i.endHandler,true);i.dragEndCallback(e,i.element,i.clone);i.preventClick();e.stopPropagation();e.preventDefault();break;case"double-tap":i.log("-> double-tap");i.doubleTapCallback(e,i.element);break;case"resize":i.log("-> resize");i.isResize=false;i.resizeEndCallback(e,i.element);i.preventClick();break;case"resize-and-scroll":i.log("-> resize-and-scroll");window.removeEventListener(i.mouseUpEvent,i.endHandler,true);i.isResize=false;i.resizeEndCallback(e,i.element);i.preventClick();e.stopPropagation();e.preventDefault();break;default:break}if(i.element){i.endCallback(e,i.element)}clearTimeout(i.timer);delete i.timer;i.lastMoveX=0;i.lastMoveY=0;i.swapTargetElement=null;i.element=null;i.mode="normal"}};this.defaultDragStartHandler=function(e){e.preventDefault()};this.scrollHandler=function(){clearTimeout(i.scrollTimer);i.lockMode=true;i.scrollTimer=setTimeout(function(){i.lockMode=false},500)};this.createClone=function(){var e,t;if(this.clone){this.removeClone()}t=this.element.getBoundingClientRect();this.clone=this.element.cloneNode(true);var l=this.element.querySelectorAll("canvas");if(l.length){var s=this.clone.querySelectorAll("canvas");for(var i=0;i<l.length;i++){s[i].getContext("2d").drawImage(l[i],0,0)}}this.clone.className+=" "+this.cloneClass;if(!this.layoutDetails){this.element.className+=" "+"easyScanLayoutItemWrapper-placeHolder"}else{this.element.className+=" "+"dashboardLayoutItemWrapper-placeHolder"}e=this.clone.style;e.position="absolute";e.display="block";e.top=t.top-this.root.getBoundingClientRect().top+"px";e.left=t.left-this.root.getBoundingClientRect().left+"px";e.width=t.width+"px";e.zIndex="100";e.webkitTransition="-webkit-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)";e.mozTransition="-moz-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)";e.msTransition="-ms-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)";e.transition="transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)";e.webkitTransform="translate3d(0px, 0px, 0px) ";e.mozTransform="translate3d(0px, 0px, 0px) ";e.msTransform="translate3d(0px, 0px, 0px) ";e.transform="translate3d(0px, 0px, 0px) ";this.root.appendChild(this.clone);this.log("createClone")};this.removeClone=function(){if(this.element!==null&&typeof this.element!=="undefined"){this.element.className=this.element.className.split(" "+this.placeHolderClass).join("")}if(this.clone!==null){this.clone.parentElement.removeChild(this.clone);this.clone=null;this.log("removeClone")}};this.translateClone=function(){var e,t;e=this.moveX-this.startX;t=this.moveY-this.startY;if(this.clone&&e&&t){this.clone.style.webkitTransform="translate3d("+e+"px, "+t+"px, 0px)";this.clone.style.mozTransform="translate3d("+e+"px, "+t+"px, 0px)";this.clone.style.msTransform="translate("+e+"px, "+t+"px)";this.clone.style.transform="translate3d("+e+"px, "+t+"px, 0px)";this.log("translateClone ("+e+", "+t+")")}};this.enable=function(){this.log("enable");this.root.addEventListener(this.touchStartEvent,this.startHandler,false);this.root.addEventListener(this.touchMoveEvent,this.moveHandler,true);this.root.addEventListener(this.touchEndEvent,this.endHandler,false);this.root.addEventListener(this.touchCancelEvent,this.endHandler,false);this.root.addEventListener(this.mouseMoveEvent,this.moveHandler,true);this.root.addEventListener(this.mouseDownEvent,this.startHandler,false);this.root.addEventListener(this.mouseUpEvent,this.endHandler,false);this.root.addEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.addEventListener(this.clickEvent,this.clickHandler,true);this.wrapper.addEventListener(this.scrollEvent,this.scrollHandler,false);return this};this.disable=function(){this.log("disable");this.root.removeEventListener(this.touchStartEvent,this.startHandler,false);this.root.removeEventListener(this.touchMoveEvent,this.moveHandler,true);this.root.removeEventListener(this.touchEndEvent,this.endHandler,false);this.root.removeEventListener(this.mouseDownEvent,this.startHandler,false);this.root.removeEventListener(this.mouseMoveEvent,this.moveHandler,true);this.root.removeEventListener(this.mouseUpEvent,this.endHandler,false);this.root.removeEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.removeEventListener(this.clickEvent,this.clickHandler,true);this.root.removeEventListener(this.touchCancelEvent,this.endHandler,false);this.wrapper.removeEventListener(this.scrollEvent,this.scrollHandler,false);return this};this.init(e);this.getMove=function(){return{x:this.moveX,y:this.moveY}}}})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/cardPositionHelper", [],function(){"use strict";var t={getDependentColumns:function(t,e,o,n){var s=[];var a={};var r=function(e,o,n,s,r){if(t&&o){a[t.id]=true;e.forEach(function(t){if((t.dashboardLayout.row<o||t.dashboardLayout.row===o&&t.dashboardLayout.column<n)&&!r[t.id]&&!t.visited){s.push(t);r[t.id]=true}else if(t.dashboardLayout.row+t.dashboardLayout.rowSpan===o&&!r[t.id]&&!t.visited){r[t.id]=true;s.push(t)}},this)}}.bind(this);for(var u=0;u<this.allColumns.length;u++){r(this.allColumns[u],e,n,s,a)}return s},getNextIndexColumns:function(t,e,o,n,s,a,r){var u=function(t,e,o,n,s,a,r,u){t[e].visited=true;o[t[e].id]=n+1;s.rowValue=a+r;s.Result=true;var i=u.getCardDomId(t[e].id)&&document.getElementById(u.getCardDomId(t[e].id));if(i){i.ariaPosInSet=n+1}};var i={Result:false,rowValue:""},d=t[s]&&t[s].dashboardLayout&&t[s].dashboardLayout.row,l=t[s]&&t[s].dashboardLayout&&t[s].dashboardLayout.rowSpan,f=t[s]&&t[s].dashboardLayout&&t[s].dashboardLayout.column;if(d===e&&f===o&&t[s]&&!t[s].visited){u(t,s,n,a,i,d,l,r)}else{var h=this.getDependentColumns(t[s],d,l,f);if(h&&!h.length&&t[s]){u(t,s,n,a,i,d,l,r)}}return i},processAllColumns:function(t,e,o,n,s,a){var r;for(var u=0;u<t.length;u++){var i=t[u];if(i&&i.length&&i[n[u]]&&!i[n[u]].visited){r=this.getNextIndexColumns(i,e[u],i[n[u]].dashboardLayout.column,o,n[u],s,a);if(r.Result){e[u]=r.rowValue;s=s+1;n[u]=n[u]+1}}}var d=function(t){return t.some(function(t){return t.some(function(t){return t.visited===false})})};if(!d(t)){return}this.processAllColumns(t,e,o,n,s,a)},fnSetAriaPos:function(t,e){var o=e.ariaPos,n=0,s=[],a=[],r=[];for(var u=0;u<t.length;u++){s[u]=0;a[u]=1;r[u]=t[u]||[]}this.allColumns=r;this.processAllColumns(r,a,o,s,n,e)}};return{setAriaPosition:t.fnSetAriaPos,getNextIndexColumns:t.getNextIndexColumns,getDependentColumns:t.getDependentColumns,processAllColumns:t.processAllColumns}});
sap.ui.require.preload({
	"sap/ovp/app/CardContainer.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:sap.ui.fl="sap.ui.fl"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:EasyScanLayout \n        id="ovpLayout" \n        dragAndDropRootSelector=".ovpApplication" \n        afterDragEnds="layoutChanged"\n        dragAndDropEnabled="{path:\'ui>\', formatter:\'.isDragAndDropEnabled\'}"><ovp:content><template:repeat list="{ui>/cards}" var="card"><core:ComponentContainer id="{card>id}"/></template:repeat></ovp:content><ovp:customData><ovp:CustomData key="role" value="region" writeToDom="true" /><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>Cards}" writeToDom="true" /></ovp:customData></ovp:EasyScanLayout></core:FragmentDefinition>\n',
	"sap/ovp/app/DashboardCardContainer.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:sap.ui.fl="sap.ui.fl"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:DashboardLayout \n        id="ovpLayout" \n        dragAndDropRootSelector=".ovpApplication" \n        afterDragEnds="layoutChanged"\n        dragAndDropEnabled="{path:\'ui>\', formatter:\'.isDragAndDropEnabled\'}"><ovp:content><template:repeat \n                list="{ui>/cards}" \n                var="card"><core:ComponentContainer id="{card>id}"/></template:repeat></ovp:content><ovp:customData><ovp:CustomData key="role" value="region" writeToDom="true" /><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>Cards}" writeToDom="true" /></ovp:customData></ovp:DashboardLayout></core:FragmentDefinition>',
	"sap/ovp/app/Error.view.xml":'<mvc:View\r\n    xmlns="sap.m"\r\n    xmlns:core="sap.ui.core"\r\n    xmlns:mvc="sap.ui.core.mvc"><IllustratedMessage \r\n        illustrationType="sapIllus-UnableToLoad" \r\n        title="{ovplibResourceBundle>LOAD_DATA_ERROR_PAGE}"\r\n        description="{ovplibResourceBundle>LOAD_DATA_ERROR_CONTENT}"\r\n        enableDefaultTitleAndDescription="false"></IllustratedMessage></mvc:View>',
	"sap/ovp/app/HeaderCommands.fragment.xml":'<core:FragmentDefinition \n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns:core="sap.ui.core"><core:CommandExecution execute="onShareButtonPress" command="Share"/><core:CommandExecution execute="onTriggerFilterSearch" command="Search"/></core:FragmentDefinition>',
	"sap/ovp/app/MacroFilterBar.fragment.xml":'\n<core:FragmentDefinition \nxmlns:core="sap.ui.core"\nxmlns:macros="sap.fe.macros"><macros:FilterBar id="ovpGlobalMacroFilter" metaPath="@com.sap.vocabularies.UI.v1.SelectionFields" variantBackreference="{= !${ui>/enableLiveFilter} ? \'ovpGlobalMacroFilterVariantMGMT\': undefined }" liveMode="{ui>/enableLiveFilter}"\n      search=".onMacroFilterBarSearch" showSetAsDefault="true" useOldVH="true"/></core:FragmentDefinition>',
	"sap/ovp/app/Main.view.xml":'<mvc:View\n    controllerName="sap.ovp.app.Main"\n    xmlns="sap.m"\n    xmlns:variants="sap.ui.comp.smartvariants"\n    xmlns:core="sap.ui.core"\n    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"\n    xmlns:f="sap.f"\n    xmlns:v="sap.ui.fl.variants"><IllustratedMessage\n        id="ovpErrorPage" \n        illustrationType="sapIllus-UnableToLoad" \n        title="{ovplibResourceBundle>LOAD_DATA_ERROR_HEADER}"\n        description="{ovplibResourceBundle>LOAD_DATA_ERROR_CONTENT}"\n        enableDefaultTitleAndDescription="false"\n        visible="false"></IllustratedMessage><ovp:OVPWrapper id="ovpWrapper"><f:DynamicPage \n            id="ovpMain" \n            class="ovpApplication" \n            preserveHeaderStateOnScroll="false" \n            headerExpanded="{ui>/bHeaderExpanded}"><f:dependents><core:Fragment fragmentName="sap.ovp.app.HeaderCommands" type="XML"/></f:dependents><template:if test="{= !${ui>/globalFilterEntityType} &amp;&amp; !${ui>/subTitleIfVariantMgmtHidden} &amp;&amp; !${ui>/description} ? false : true}"><f:title><f:DynamicPageTitle id="ovpMainPageTitle" areaShrinkRatio="0:1.6:1.6"><f:heading><HBox class="ovpDescription"><template:if test="{= ${ui>/useMacroFilterBar} === false &amp;&amp; !${ui>/smartVariantRequired}}"><template:then><Title text="{parts: [{path:\'ui>/subTitleIfVariantMgmtHidden\'}, {path:\'ui>/description\'}, {path:\'ui>/title\'}], formatter: \'.setTitle\'}"/></template:then></template:if><template:if test="{= ${ui>/useMacroFilterBar} === false &amp;&amp; ${ui>/smartVariantRequired} === true || (!${ui>/subTitleIfVariantMgmtHidden} &amp;&amp; !${ui>/description} &amp;&amp; !${ui>/title})}"><variants:SmartVariantManagement \n                                        id="ovpPageVariant"\n                                        persistencyKey="ovpGlobalFilter"\n                                        visible="{= ${ui>/globalFilterEntityType} ? true : false}" \n                                        showShare="true" \n                                        showExecuteOnSelection="true"\n                                        displayTextForExecuteOnSelectionForStandardVariant="{= (${ui>/dataLoadSettings/loadDataOnAppLaunch} === \'ifAnyFilterExist\' || ${ui>/dataLoadSettings/loadDataOnAppLaunch} === undefined) ? \'{ovplibResourceBundle>ST_LIST_DISPLAY_TEXT_FOR_EXECUTE_ON_SELECTION}\' : undefined}"/></template:if><template:if test="{= ${ui>/useMacroFilterBar} === true &amp;&amp; !${ui>/smartVariantRequired}}"><template:then><Title text="{parts: [{path:\'ui>/subTitleIfVariantMgmtHidden\'}, {path:\'ui>/description\'}, {path:\'ui>/title\'}], formatter: \'.setTitle\'}"/></template:then></template:if><template:if test="{= ${ui>/useMacroFilterBar} === true &amp;&amp; ${ui>/smartVariantRequired} === true &amp;&amp; ${ui>/globalFilterEntityType} || (!${ui>/subTitleIfVariantMgmtHidden} &amp;&amp; !${ui>/description} &amp;&amp; !${ui>/title} &amp;&amp; ${ui>/globalFilterEntityType})}"><v:VariantManagement\n                                        id="ovpGlobalMacroFilterVariantMGMT"\n                                        for="ovpGlobalMacroFilter"\n                                        headerLevel="H2"\n                                        displayTextForExecuteOnSelectionForStandardVariant="{= (${ui>/dataLoadSettings/loadDataOnAppLaunch} === \'ifAnyFilterExist\' || ${ui>/dataLoadSettings/loadDataOnAppLaunch} === undefined) ? \'{ovplibResourceBundle>ST_LIST_DISPLAY_TEXT_FOR_EXECUTE_ON_SELECTION}\' : undefined}"\n                                    /></template:if></HBox></f:heading><f:actions><ToolbarSpacer /><core:ExtensionPoint name="SmartFilterBarGlobalActionExtension"/><MenuButton \n                                id="sapOvpShareButton"\n                                icon="sap-icon://action"\n                                tooltip="{ovplibResourceBundle>shareBtn} (Shift+Ctrl+S)"\n                                text=""\n                                visible="{= (${ui>/globalFilterEntityType} &amp;&amp; ${ui>/smartVariantRequired} &amp;&amp; !${ui>/isTeamsModeActive})}"\n                                type="Transparent"><layoutData><OverflowToolbarLayoutData closeOverflowOnInteraction="false"/></layoutData></MenuButton></f:actions><f:snappedContent><Text id="ovpFilterText"></Text></f:snappedContent></f:DynamicPageTitle></f:title></template:if><template:if test="{ui>/globalFilterEntityType}"><f:header><f:DynamicPageHeader id="ovpPageHeader" pinnable="true"><template:if test="{= ${ui>/useMacroFilterBar} === false }"><template:then><f:content><template:if test="{= ${ui>/smartVariantRequired} === true || !${ui>/description}}"><template:then><core:Fragment fragmentName="sap.ovp.app.SmartFilterBarWithVariant" type="XML"/></template:then><template:else><core:Fragment fragmentName="sap.ovp.app.SmarFilterBarWithoutVariant" type="XML"/></template:else></template:if></f:content></template:then></template:if><template:if test="{= ${ui>/useMacroFilterBar} === true }"><f:content><core:Fragment fragmentName="sap.ovp.app.MacroFilterBar" type="XML"/></f:content></template:if></f:DynamicPageHeader></f:header></template:if><f:content><VBox height="inherit"><IllustratedMessage \n                    illustrationType="sapIllus-NoFilterResults" \n                    id="ovpFilterNotFulfilledPage"  \n                    visible="false"\n                    title="{ovplibResourceBundle>FILTER_NOT_FULFILLED_ERROR_PAGE}"\n                    description="{= ${ui>/enableLiveFilter} ? \'{ovplibResourceBundle>FILTER_NOT_FULFILLED_LIVE_MODE_ERROR_CONTENT}\' : \'{ovplibResourceBundle>FILTER_NOT_FULFILLED_ERROR_CONTENT}\' }"></IllustratedMessage><VBox id="ovpCardPage" visible="true" height="inherit"><core:Fragment fragmentName="{ui>/cardContainerFragment}" type="XML"/><IllustratedMessage illustrationType="sapIllus-PageNotFound" id="ovpAllCardsHiddenPage"  visible="false"\n                                title="{ovplibResourceBundle>CARDS_HIDDEN_ERROR_PAGE}"\n                                description="{ovplibResourceBundle>CARDS_HIDDEN_ERROR_CONTENT}"><additionalContent><Button type="Emphasized" text="{ovplibResourceBundle>MANAGE_CARDS_GO_BTN}" \n                                            press="onCardManage"/></additionalContent></IllustratedMessage></VBox></VBox></f:content></f:DynamicPage></ovp:OVPWrapper></mvc:View>',
	"sap/ovp/app/ManageCard.fragment.xml":'<core:FragmentDefinition \n    xmlns:core="sap.ui.core"\n    xmlns:p13n="sap.m.p13n"\n    class="sapUiContentPadding"\n    xmlns="sap.m"><p13n:Popup close="onManageCardOkButtonPressed" warningText="{ovplibResourceBundle>MANAGE_CARDS_WARNING_TEXT}" reset=".onManageCardResetButtonPressed"\n        id="manageCardsDialog" \n        class="sapOVPCardsVisibilityDialog" \n        title="{ovplibResourceBundle>MANAGE_CARDS_TITLE}"><p13n:panels><p13n:SelectionPanel id="manageCardsSelectionPanel" enableCount="true" enableReorder="false" showHeader="true" change="onCardVisibilityChange"><p13n:messageStrip><MessageStrip id="manageCardsPanelWarningMessage" text="" showIcon="true" type="Warning"/></p13n:messageStrip></p13n:SelectionPanel></p13n:panels></p13n:Popup></core:FragmentDefinition>',
	"sap/ovp/app/SharePage.fragment.xml":'<core:FragmentDefinition \n\txmlns="sap.m" \n\txmlns:core="sap.ui.core"><Menu><MenuItem \n\t\t\tid="ShareEmailButton"\n\t\t\ticon="sap-icon://email"\n\t\t\tpress="shareEmailPressed"\n\t\t\ttext="{ovplibResourceBundle>Email_Text}"\n\t\t\tclass="sapMFlexBox"/><MenuItem \n\t\t\tid="shareJamButton"\n\t\t\ticon="sap-icon://share-2"\n\t\t\tpress="shareJamPressed"\n\t\t\ttext="{ovplibResourceBundle>share_jam}"\n\t\t\tclass="sapMFlexBox"\n\t\t\tvisible="{ui>/jamVisible}"/><MenuItem \n\t\t\tid="BookmarkButton"\n\t\t\ticon="{ui>/tileIcon}"\n\t\t\tpress="shareTilePressed"\n\t\t\ttext="{ui>/tileText}"\n\t\t\tvisible="{ui>/tileVisible}" \n\t\t\tclass="sapMFlexBox"/></Menu></core:FragmentDefinition>\n',
	"sap/ovp/app/SmarFilterBarWithoutVariant.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'\n\t}"    \n><smartFilterBar:SmartFilterBar \n        id="ovpGlobalFilter"\n        entitySet="{ui>/globalFilterEntitySet}"\n        filterBarExpanded="false"\n        assignedFiltersChanged="onAssignedFiltersChanged"\n        useToolbar="false"\n        showMessages="false"\n        liveMode="{ui>/enableLiveFilter}"\n        enableBasicSearch="{ui>/showBasicSearch}"\n        considerAnalyticalParameters="{ui>/considerAnalyticalParameters}"\n        search="cmd:Search"\n        useDateRangeType="{ui>/useDateRangeType}"><template:if test="{meta>}"><smartFilterBar:controlConfiguration><template:with \n                    path=\'ui>allControlConfiguration\'\n                    var=\'selectionField\'><template:repeat list="{selectionField>}"><template:if test="{parts: [{path: \'selectionField>PropertyPath\'}, {path: \'ui>datePropertiesSettings\'}], formatter: \'CardAnnotationhelper.isDateRangeType\'}"><template:then><smartFilterBar:ControlConfiguration\n                                    key="{= (${selectionField>PropertyPath}).replace(\'/\', \'.\').trim() }"\n                                    groupId="{path: \'selectionField>bNotPartOfSelectionField\', formatter: \'CardAnnotationhelper.getGroupID\'}"\n                                    conditionType="{parts: [{path: \'selectionField>PropertyPath\'}, {path: \'ui>datePropertiesSettings\'}], formatter: \'CardAnnotationhelper.getConditionTypeForDateProperties\'}"/></template:then><template:else><smartFilterBar:ControlConfiguration\n                                    key="{= (${selectionField>PropertyPath}).replace(\'/\', \'.\').trim() }"\n                                    groupId="_BASIC"/></template:else></template:if></template:repeat></template:with><template:if test="{= ${ui>globalFilterEntityType}}"><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui>globalFilterEntityTypeNQ}"/><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui>globalFilterEntityType}"/></template:if></smartFilterBar:controlConfiguration></template:if><smartFilterBar:customData><core:CustomData key="dateFormatSettings" value=\'\\{"UTC":true,"style":"medium"\\}\'/></smartFilterBar:customData></smartFilterBar:SmartFilterBar></core:FragmentDefinition>',
	"sap/ovp/app/SmartFilterBarWithVariant.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'\n\t}"    \n><smartFilterBar:SmartFilterBar \n        id="ovpGlobalFilter"\n        entitySet="{ui>/globalFilterEntitySet}"\n        persistencyKey="ovpGlobalFilter"\n        filterBarExpanded="true"\n        showMessages="false"\n        beforeVariantFetch="onBeforeSFBVariantSave"\n        afterVariantLoad="onAfterSFBVariantLoad"\n        assignedFiltersChanged="onAssignedFiltersChanged"\n        useToolbar="false"\n        smartVariant="ovpPageVariant"\n        useDateRangeType="{ui>/useDateRangeType}"\n        liveMode="{ui>/enableLiveFilter}"\n        enableBasicSearch="{ui>/showBasicSearch}"\n        search="cmd:Search"\n        considerAnalyticalParameters="{ui>/considerAnalyticalParameters}"><template:if test="{meta>}"><smartFilterBar:controlConfiguration><template:with \n                    path=\'ui>allControlConfiguration\'\n                    var=\'selectionField\'><template:repeat list="{selectionField>}"><template:if test="{parts: [{path: \'selectionField>PropertyPath\'}, {path: \'ui>datePropertiesSettings\'}], formatter: \'CardAnnotationhelper.isDateRangeType\'}"><template:then><smartFilterBar:ControlConfiguration\n                                    key="{= (${selectionField>PropertyPath}).replace(\'/\', \'.\').trim() }"\n                                    groupId="{path: \'selectionField>bNotPartOfSelectionField\', formatter: \'CardAnnotationhelper.getGroupID\'}"\n                                    conditionType="{parts: [{path: \'selectionField>PropertyPath\'}, {path: \'ui>datePropertiesSettings\'}], formatter: \'CardAnnotationhelper.getConditionTypeForDateProperties\'}" /></template:then><template:else><smartFilterBar:ControlConfiguration\n                                    key="{= (${selectionField>PropertyPath}).replace(\'/\', \'.\').trim() }"\n                                    groupId="_BASIC" /></template:else></template:if></template:repeat></template:with><template:if test="{= ${ui>globalFilterEntityType}}"><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui>globalFilterEntityTypeNQ}"/><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui>globalFilterEntityType}"/></template:if></smartFilterBar:controlConfiguration></template:if><smartFilterBar:customData><core:CustomData key="dateFormatSettings" value=\'\\{"UTC":true,"style":"medium"\\}\'/></smartFilterBar:customData></smartFilterBar:SmartFilterBar></core:FragmentDefinition>',
	"sap/ovp/app/manifest.json":'{"_version":"1.21.0","sap.app":{"_version":"1.1.0","id":"sap.ovp.app","type":"application","i18n":{"bundleUrl":"../messagebundle.properties","supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"},"applicationVersion":{"version":"1.141.0"},"title":"{{TITLE}}","description":"{{DESCRIPTION}}","tags":{"keywords":["{{TITLE}}"]},"ach":"CA-UI5-ST-OVP","embeddedBy":"../","offline":false,"resources":"resources.json"},"sap.ui":{"_version":"1.1.0","technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"_version":"1.1.0","services":{"ShellUIService":{"factoryName":"sap.ushell.ui5service.ShellUIService"},"routingService":{"factoryName":"","startup":"none"}},"dependencies":{"minUI5Version":"1.30.1","libs":{"sap.ui.core":{"minVersion":"1.30.1"},"sap.ui.comp":{"minVersion":"1.30.1"},"sap.ui.layout":{"minVersion":"1.30.1"},"sap.m":{"minVersion":"1.30.1"},"sap.ui.rta":{"minVersion":"1.30.1"},"sap.f":{"minVersion":"1.41.0"},"sap.suite.ui.microchart":{"minVersion":"1.41.0"},"sap.viz":{"minVersion":"1.41.0"},"sap.fe.placeholder":{"minVersion":"1.96.0"},"sap.insights":{"minVersion":"1.105.0"},"sap.suite.ui.commons":{"minVersion":"1.108.0"}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"../messagebundle.properties","settings":{"supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"}}},"commands":{"Share":{"ref":"sap:share"},"Search":{"description":"{{M_FILTERBAR_SEARCH}}","shortcut":"Enter"}},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ovp/cards/charts/analytical/analyticalChart.fragment.xml":'<core:FragmentDefinition \n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns:suite="sap.suite.ui.commons" \n\txmlns:viz="sap.viz.ui5.controls"\n\txmlns:dataSet="sap.viz.ui5.data" \n\txmlns:feed="sap.viz.ui5.controls.common.feeds"\n\txmlns:ovp="sap.ovp.ui" \n\txmlns:charts="sap.ovp.cards.charts"\n\ttemplate:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n\t\tVizAnnotationManagerV2: \'sap/ovp/cards/charts/VizAnnotationManager\',\n\t\tModelAnnotationhelper: \'sap/ui/model/odata/AnnotationHelper\'\n\t}"\t\n><VBox class="ovpChartTitleVBox cardType" id="vbLayout"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>analyticalCardType}" writeToDom="true" /></customData><template:with \n\t\t\tpath="ovpCardProperties>/chartAnnotationPath"\n\t\t\thelper="CardAnnotationhelper.resolveEntityTypePath" \n\t\t\tvar=\'chart\'><template:with \n\t\t\t\tpath="ovpCardProperties>/selectionAnnotationPath"\n\t\t\t\thelper="CardAnnotationhelper.resolveEntityTypePath" \n\t\t\t\tvar=\'selVar\'><template:with \n\t\t\t\t\tpath="ovpCardProperties>/presentationAnnotationPath"\n\t\t\t\t\thelper="CardAnnotationhelper.resolveEntityTypePath" \n\t\t\t\t\tvar=\'preVar\'><template:if test="{chart>}"><template:if test="{path:\'chart>DimensionAttributes\', formatter: \'VizAnnotationManagerV2.dimensionAttrCheck\'}"><template:if test="{path:\'chart>MeasureAttributes\', formatter: \'VizAnnotationManagerV2.measureAttrCheck\'}"><template:if test="{chart>ChartType}"><template:if test="{preVar>MaxItems}"><template:then><charts:OVPVizDataHandler\n\t\t\t\t\t\t\t\t\t\t\t\tchartType="{path: \'chart>ChartType\', formatter: \'VizAnnotationManagerV2.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\t\tentitySet="{ path:\'entitySet>\' , formatter: \'VizAnnotationManagerV2.getEntitySet\' }"\n\t\t\t\t\t\t\t\t\t\t\t\tdata="{parts: [{path:\'entitySet>\'}, {path:\'selVar>\'}, {path:\'preVar>\'}, {path:\'chart>DimensionAttributes\'}, {path:\'chart>MeasureAttributes\'}, {path:\'chart>ChartType\'}], formatter: \'VizAnnotationManagerV2.formatItems\'}"\n\t\t\t\t\t\t\t\t\t\t\t\taggregateData="{parts: [{path:\'entitySet>\'}, {path:\'selVar>\'}, {path:\'preVar>\'}, {path:\'chart>undefined\'}, {path:\'chart>MeasureAttributes\'}, {path:\'chart>ChartType\'}], formatter: \'VizAnnotationManagerV2.formatItems\'}"><charts:data><core:Element /></charts:data><charts:aggregateData><core:Element /></charts:aggregateData><charts:content width="100%"><viz:VizFrame \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="analyticalChart" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="ovpViz"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuiConfig="{applicationSet:\'fiori\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvizType="{parts: [{path: \'chart>ChartType\'}, {path: \'chart>DimensionAttributes\'}], formatter: \'VizAnnotationManagerV2.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth="100%"><viz:customData><template:if test="{chart>Title}"><ovp:CustomData\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey="aria-label"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue="{path: \'chart>Title\', formatter: \'ModelAnnotationhelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twriteToDom="true" /></template:if></viz:customData><viz:dataset><dataSet:FlattenedDataset data="{analyticalmodel>/}"></dataSet:FlattenedDataset></viz:dataset></viz:VizFrame></charts:content></charts:OVPVizDataHandler></template:then><template:else><charts:OVPVizDataHandler\n\t\t\t\t\t\t\t\t\t\t\t\tchartType="{path: \'chart>ChartType\', formatter: \'VizAnnotationManagerV2.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\t\tentitySet="{ path:\'entitySet>\' , formatter: \'VizAnnotationManagerV2.getEntitySet\' }"\n\t\t\t\t\t\t\t\t\t\t\t\tdata="{parts: [{path:\'entitySet>\'}, {path:\'selVar>\'}, {path:\'preVar>\'}, {path:\'chart>DimensionAttributes\'}, {path:\'chart>MeasureAttributes\'}, {path:\'chart>ChartType\'}], formatter: \'VizAnnotationManagerV2.formatItems\'}"><charts:data><core:Element /></charts:data><charts:aggregateData><core:Element /></charts:aggregateData><charts:content width="100%"><viz:VizFrame \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="analyticalChart" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="ovpViz"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuiConfig="{applicationSet:\'fiori\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvizType="{parts: [{path: \'chart>ChartType\'}, {path: \'chart>DimensionAttributes\'}], formatter: \'VizAnnotationManagerV2.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth="100%"><viz:customData><template:if test="{chart>Title}"><ovp:CustomData\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey="aria-label"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue="{path: \'chart>Title\', formatter: \'ModelAnnotationhelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twriteToDom="true" /></template:if></viz:customData><viz:dataset><dataSet:FlattenedDataset data="{analyticalmodel>/}"></dataSet:FlattenedDataset></viz:dataset></viz:VizFrame></charts:content></charts:OVPVizDataHandler></template:else></template:if></template:if></template:if></template:if></template:if></template:with></template:with></template:with></VBox><template:with \n\t\tpath="ovpCardProperties>/chartAnnotationPath"\n\t\thelper="CardAnnotationhelper.resolveEntityTypePath" \n\t\tvar=\'chart\'><template:if test="{chart>}"><template:if test="{chart>ChartType}"><template:if test="{path:\'chart>ChartType\',formatter:\'VizAnnotationManagerV2.checkBubbleChart\'}"><Text id="bubbleText" class="ovpChartFooter"/></template:if></template:if></template:if></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/charts/generic/noData.fragment.xml":'<core:FragmentDefinition \n\txmlns:core="sap.ui.core"\n\txmlns:ovp="sap.ovp.ui"\n\txmlns="sap.m"><IllustratedMessage \n\t\tillustrationType="sapIllus-NoEntries" \n\t\ttitle="{ovplibResourceBundle>CARDS_NODATA_ERROR_PAGE}"\n\t\tdescription="{ovplibResourceBundle>CARDS_NODATA_ERROR_CONTENT}"\n        enableVerticalResponsiveness="true"\n\t\tclass="{= ${ovpCardProperties>/oldTemplate} === \'sap.ovp.cards.stack\' ? \'stackContentOfError\' : \'contentOfError\' }"></IllustratedMessage></core:FragmentDefinition>',
	"sap/ovp/cards/generic/Action.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n\t\tModelAnnotationhelper: \'sap/ui/model/odata/AnnotationHelper\'\n\t}"    \n><template:if test="{=  ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAction\' ||\n                           ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\'||\n                           ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldWithUrl\'}"><Button\n            text="{path: \'dataField>Label\', formatter: \'ModelAnnotationhelper.format\'}"\n            press="onActionPress" \n            type="Transparent"><layoutData><OverflowToolbarLayoutData /></layoutData><customData><core:CustomData key="type" value="{dataField>RecordType}"/><template:if test="{= ${dataField>SemanticObject}}"><core:CustomData \n                        key="semanticObject"\n                        value="{path: \'dataField>SemanticObject\', formatter: \'ModelAnnotationhelper.format\'}"/></template:if><template:if test="{= ${dataField>Url}}"><core:CustomData \n                        key="url"\n                        value="{path: \'dataField>Url\', formatter: \'ModelAnnotationhelper.format\'}"/></template:if><template:if test="{= ${dataField>Action}}"><core:CustomData \n                    key="action"\n                    value="{path: \'dataField>Action\', formatter: \'ModelAnnotationhelper.format\'}"/></template:if><core:CustomData \n                    key="label"\n                    value="{path: \'dataField>Label\', formatter: \'ModelAnnotationhelper.format\'}"/></customData></Button></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/generic/ActionsFooter.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:core="sap.ui.core" \n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'\n\t}"    \n><template:with \n        path=\'ovpCardProperties>/identificationAnnotationPath\' \n        helper="CardAnnotationhelper.resolveEntityTypePath" \n        var=\'identification\'><template:if test="{path: \'identification>\', formatter: \'CardAnnotationhelper.hasActions\'}"><OverflowToolbar id="ovpActionFooter" class="sapOvpActionFooter"><customData><ovp:CustomData key="role" value="toolbar" writeToDom="true" /></customData><ToolbarSpacer/><template:repeat\n                        list="{path:\'identification>\',\n                                filters: [\n                                    {path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\', operator: \'EndsWith\', value1: \'High\'},\n                                    {path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\', operator: \'EndsWith\', value1: \'Medium\'}\n                                ],\n                                sorter: [{path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\'}]\n                             }" \n                        var="dataField"><core:Fragment fragmentName="sap.ovp.cards.generic.Action" type="XML"/></template:repeat><template:repeat\n                        list="{path:\'identification>\',\n                                filters: [\n                                    {path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\', operator: \'EndsWith\', value1: \'Low\'}\n                                ]\n                             }" \n                        var="dataField"><core:Fragment fragmentName="sap.ovp.cards.generic.Action" type="XML"/></template:repeat><template:repeat \n                    list="{path:\'identification>\'}" \n                    var="dataField"><template:if test="{=  !${dataField>com.sap.vocabularies.UI.v1.Importance/EnumMember} }"><core:Fragment fragmentName="sap.ovp.cards.generic.Action" type="XML"/></template:if></template:repeat></OverflowToolbar></template:if></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/generic/Card.view.xml":'<mvc:View\n    controllerName="{ovpCardProperties>/controllerName}"\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><VBox class="sapOvpCardOverlaySideContainer sapOvpCardRightOverlayCursor"></VBox><FlexBox \n        width="100%" \n        justifyContent="End" \n        class="sapOvpNewBadgeWrapper" \n        visible="{= ${ovpCardProperties>/cloneCard} ? true : false}"><HBox class="sapOvpNewBadge"><Text text="{ovplibResourceBundle>OVP_KEYUSER_LABEL_COPY}" class="sapOvpNewBadgeText"/></HBox></FlexBox><FlexBox \n        width="100%" \n        justifyContent="End" \n        class="sapOvpNewBadgeWrapper" \n        visible="{= ${ovpCardProperties>/newCard} ? true : false}"><HBox class="sapOvpNewBadge"><Text text="{ovplibResourceBundle>OVP_KEYUSER_LABEL_NEW}" class="sapOvpNewBadgeText"/></HBox></FlexBox><template:if test="{= ${ovpCardProperties>/contentPosition} === \'Right\'}" ><template:then><core:Fragment fragmentName="sap.ovp.cards.generic.ContentRight" type="XML"/></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.generic.ContentMiddle" type="XML"/></template:else></template:if><template:if test="{device>/support/touch}"><template:then><core:HTML content="&lt;div&gt;&lt;/div&gt;"></core:HTML></template:then><template:else><core:HTML content="&lt;div;&gt;&lt;/div&gt;"></core:HTML></template:else></template:if><HBox class="sapOvpCardOverlayContainer sapOvpCardBottomOverlayCursor"></HBox></mvc:View>',
	"sap/ovp/cards/generic/ContactDetails.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickView placement="Auto"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetailsQuickViewGroup" type="XML"/></QuickView></core:FragmentDefinition>',
	"sap/ovp/cards/generic/ContactDetailsQuickViewGroup.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n\t\tModelAnnotationhelper: \'sap/ui/model/odata/AnnotationHelper\'\n\t}"    \n><QuickViewPage \n        header="{ovplibResourceBundle>CONTACT_INFO}"\n        icon="{= ${contact>photo} ? ${path: \'contact>photo\', formatter: \'ModelAnnotationhelper.format\'} : \'sap-icon://person-placeholder\'}"\n        title="{path: \'contact>fn\', formatter: \'ModelAnnotationhelper.format\'}"\n        description="{path: \'contact>role\', formatter: \'ModelAnnotationhelper.format\'}"><QuickViewGroup><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_JOB_TITLE}" \n                type="text"\n                value="{path: \'contact>title\', formatter: \'ModelAnnotationhelper.format\'}"\n                visible="{= !!${contact>title}}"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_DEPARTMENT}" \n                type="text"\n                value="{path: \'contact>org\', formatter: \'ModelAnnotationhelper.format\'}"\n                visible="{= !!${contact>org}}"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_EMAIL}" \n                type="email"\n                value="{path: \'contact>email/[${type/EnumMember}.indexOf(\\\'ContactInformationType/work\\\')>=0]/address\', formatter: \'ModelAnnotationhelper.format\'}"\n                visible="{= !!${path: \'contact>email/[${type/EnumMember}.indexOf(\\\'ContactInformationType/work\\\')>=0]/address\', formatter: \'ModelAnnotationhelper.format\'} }"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_PHONE}" \n                type="phone"\n                value="{= ${path: \'contact>tel/[${type/EnumMember}.indexOf(\\\'PhoneType/work\\\')>=0]/uri\', formatter: \'ModelAnnotationhelper.format\'}.replace(\'tel:\',\'\') }"\n                visible="{= !!${path: \'contact>tel/[${type/EnumMember}.indexOf(\\\'PhoneType/work\\\')>=0]/uri\'} }"/><QuickViewGroupElement  \n                label="{ovplibResourceBundle>CONTACT_MOBILE}" \n                type="{= (${device>/system/phone} || ${device>/system/tablet})  ? \'mobile\'  : \'phone\' }"\n                value="{= ${path: \'contact>tel/[${type/EnumMember}.indexOf(\\\'PhoneType/cell\\\')>=0]/uri\', formatter: \'ModelAnnotationhelper.format\'}.replace(\'tel:\',\'\') }"\n                visible="{= !!${path: \'contact>tel/[${type/EnumMember}.indexOf(\\\'PhoneType/cell\\\')>=0]/uri\'} }"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_FAX}" \n                type="text"\n                value="{= ${path: \'contact>tel/[${type/EnumMember}.indexOf(\\\'PhoneType/fax\\\')>=0]/uri\', formatter: \'ModelAnnotationhelper.format\'}.replace(\'tel:\',\'\') }"\n                visible="{= !!${path: \'contact>tel/[${type/EnumMember}.indexOf(\\\'PhoneType/fax\\\')>=0]/uri\'} }"/></QuickViewGroup></QuickViewPage></core:FragmentDefinition>',
	"sap/ovp/cards/generic/ContentMiddle.fragment.xml":'<core:FragmentDefinition\n\tcontrollerName="sap.ovp.cards.generic.Card"\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\ttemplate:require="{\n\t\tCommonUtils: \'sap/ovp/cards/CommonUtils\'\n\t}" \t\n><ovp:Card id="ovpCardControl"><VBox class="sapOvpBaseCard"><template:if test="{ovpCardProperties>/headerFragment}"><core:Fragment fragmentName="{ovpCardProperties>/headerFragment}" type="XML"/></template:if><ovp:CardContentContainer \n\t\t\t\tid="ovpCardContentContainer" \n\t\t\t\tclass="{= ${ovpCardProperties>/cardLayout/containerLayout} === \'resizable\' &amp;&amp; ${ovpCardProperties>/cardLayout/showOnlyHeader} === true ? \'sapOvpWrapper sapOvpContentHidden\' :  \'sapOvpWrapper\'}"><template:if test="{= ${ovpCardProperties>/state} !== \'Loading\' || !${ovpCardProperties>/reason} || ${ovpCardProperties>/state} === \'undefined\'}" ><template:if test="{ovpCardProperties>/tabs}"><Toolbar id="toolbar" class="sapOvpDropDown {= ${ovpCardProperties>/densityStyle} === \'compact\' ? \'sapUiSizeCompact dropDrownCompact\' : \'sapUiSizeCozy sapOvpDropDownPadding dropDrownCozy\' }"><core:InvisibleText id="ovp_card_dropdown_label" text="{ovplibResourceBundle>OVP_CARD_DROP_DOWN_LABEL}" /><Select \n\t\t\t\t\t\t\t\tid="ovp_card_dropdown" \n\t\t\t\t\t\t\t\tselectedKey="1" \n\t\t\t\t\t\t\t\tchange="changeSelection"><template:repeat \n\t\t\t\t\t\t\t\t\tlist="{ovpCardProperties>/tabs}" \n\t\t\t\t\t\t\t\t\tvar="tab"><core:Item\n\t\t\t\t\t\t\t\t\t\tid ="{parts: [{path: \'ovpCardProperties>/tabs\'}, {path: \'tab>\'}], formatter: \'CommonUtils.createKeyForCB\'}"\n\t\t\t\t\t\t\t\t\t\tkey="{parts: [{path: \'ovpCardProperties>/tabs\'}, {path: \'tab>\'}], formatter: \'CommonUtils.createKeyForCB\'}"\n\t\t\t\t\t\t\t\t\t\ttext="{tab>value}"></core:Item></template:repeat></Select></Toolbar></template:if><template:if test="{ovpCardProperties>/contentFragment}"><core:Fragment fragmentName="{ovpCardProperties>/contentFragment}" type="XML"/></template:if></template:if></ovp:CardContentContainer><template:if\n\t\t\t\ttest="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.quickview.Quickview\' || ${ovpCardProperties>/layoutDetail} !== \'resizable\' || ${ovpCardProperties>/state} === \'Loading\' || ${ovpCardProperties>/reason}}"><template:if test="{ovpCardProperties>/footerFragment}"><core:Fragment fragmentName="{ovpCardProperties>/footerFragment}" type="XML"/></template:if></template:if></VBox></ovp:Card></core:FragmentDefinition>',
	"sap/ovp/cards/generic/ContentRight.fragment.xml":'<core:FragmentDefinition\n\tcontrollerName="sap.ovp.cards.generic.Card"\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:Card id="ovpCardControl" class = "cardType"><HBox class="sapOvpBaseCard sapOvpCardRightContent"><FlexBox class="sapOvpCardContentRightHeader"><core:Fragment fragmentName="sap.ovp.cards.generic.Header" type="XML"/><layoutData><FlexItemData growFactor="1" baseSize="1rem"/></layoutData></FlexBox><ovp:CardContentContainer id="ovpCardContentContainer"><template:if test="{ovpCardProperties>/contentFragment}"><core:Fragment fragmentName="{ovpCardProperties>/contentFragment}" type="XML"/></template:if></ovp:CardContentContainer></HBox></ovp:Card></core:FragmentDefinition>',
	"sap/ovp/cards/generic/CountFooter.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:core="sap.ui.core"\n    xmlns:ovp="sap.ovp.ui"><Text id="ovpCountFooter" class="sapOvpCardFooter"><customData><ovp:CustomData key="role" value="heading" writeToDom="true" /></customData></Text></core:FragmentDefinition>',
	"sap/ovp/cards/generic/CountHeader.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m" \n\txmlns:core="sap.ui.core"\n\txmlns:ovp="sap.ovp.ui"><FlexBox class = "sapOvpHeaderCountMainDiv"><Text id="ovpCountHeader" class="sapOvpHeaderCounter sapUiTinyMarginTop" maxLines="1"><customData><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></core:FragmentDefinition>',
	"sap/ovp/cards/generic/Header.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n\t\tModelAnnotationhelper: \'sap/ui/model/odata/AnnotationHelper\'\n\t}"\n><VBox \n        id="ovpCardHeader"\n        class="{= ${ovpCardProperties>/category} || ${ovpCardProperties>/title} || ${ovpCardProperties>/subTitle} ? \'sapOvpCardHeader sapUiContentPadding\' : \'sapOvpCardHeader sapOvpCardHideHeader\' } \n               {= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.stack.Stack\' ? \'sapOvpStackCardHeader\' :  \'\'} \n               {= ${ovpCardProperties>/bInsightRTEnabled} ? \'sapOvpCardInsightRunTime\' :  \'\' } \n               {= ${ovpCardProperties>/bInsightDTEnabled} ? \'sapOvpCardInsightDesignTime\' :  \'\' }"><customData><ovp:CustomData key="tabindex" value="0" writeToDom="true"/><ovp:CustomData key="role" value="button" writeToDom="true"/></customData><template:if test="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.quickview.Quickview\'}"><template:then><template:with \n                    path="entityType>com.sap.vocabularies.UI.v1.HeaderInfo" \n                    var="header"><Text \n                        id="ovpQuickviewCardHeader"\n                        text="{= ${ovpCardProperties>/title} + \': \' + ${path: \'header>Title/Value\', formatter: \'ModelAnnotationhelper.format\'}}"\n                        class="sapOvpCardTitle tabindex-1"><customData><ovp:CustomData key="aria-label" value="{= ${ovpCardProperties>/title} + \': \' + ${path: \'header>Title/Value\', formatter: \'ModelAnnotationhelper.format\'}}" writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></template:with></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.generic.Title" type="XML"/></template:else></template:if><template:if test="{= ${ovpCardProperties>/contentFragment} !== \'sap.ovp.cards.quickview.Quickview\'}"><core:Fragment fragmentName="sap.ovp.cards.generic.SubTitle" type="XML"/></template:if><template:if test="{ovpCardProperties>/headerExtensionFragment}"><core:Fragment fragmentName="{ovpCardProperties>/headerExtensionFragment}" type="XML"/></template:if><template:if test="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.stack.Stack\'}"><FlexBox class="sapOvpCardViewAllContainer"><Text\n                    id= "ViewAll"\n                    text="{ovplibResourceBundle>View_All_Stack_Card}"\n                    class="sapOvpCardViewAll cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>View_All_Stack_Card}" writeToDom="true" /><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></template:if></VBox><HBox class="sapOvpCardAdditionalActions"><Button\n            id="sapOvpCardAdditionalActions"\n            enabled="false"\n            type="Transparent"\n            icon="sap-icon://overflow"\n            tooltip="{ovplibResourceBundle>MORE_MENU}"\n            press="onShowAdditionalCardActions"/></HBox></core:FragmentDefinition>\n',
	"sap/ovp/cards/generic/HeaderActions.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"><Menu><MenuItem\n\t\t\tvisible="{= ${ovpCardProperties>/showRefresh} }"\n\t\t\ticon="sap-icon://refresh"\n\t\t\tid = "ovpRefreshCardButton"\n\t\t\tpress="refreshCardContent"\n\t\t\ttext="{ovplibResourceBundle>OVP_REFRESH_CARD}"\n\t\t\tclass="sapMFlexBox"/><MenuItem\n\t\t\tvisible="{= ${ovpCardProperties>/bInsightEnabled} &amp;&amp; ${ovpCardProperties>/enableAddToInsights} }"\n\t\t\tid = "ovpAddToInsightButton"\n\t\t\ticon="sap-icon://add-folder"\n\t\t\tpress="onShowInsightCardPreview"\n\t\t\ttext="{= ${ovpCardProperties>/bInsightRTEnabled} ? ${ovplibResourceBundle>INT_PREVIEW_POPOVER_BUTTON_TITLE_RT} : ${ovplibResourceBundle>INT_ADD_CARD_TO_REPOSITORY_DT} }"\n\t\t\tclass="sapMFlexBox"\n\t\t\tenabled="false"\n\t\t\t/><MenuItem\n\t\t\ticon="sap-icon://dimension"\n\t\t\tid = "ovpManageCardsButton"\n\t\t\tpress="onCardManage"\n\t\t\ttext="{ovplibResourceBundle>MANAGE_CARDS_TITLE}"\n\t\t\tvisible="{= ${ovpCardProperties>/enableAdditionalActionsManageCards} }"\n\t\t\tclass="sapMFlexBox"/></Menu></core:FragmentDefinition>',
	"sap/ovp/cards/generic/KPIHeader.fragment.xml":'<core:FragmentDefinition \n    xmlns="sap.m"\n    xmlns:core="sap.ui.core" \n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" \n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'\n\t}"    \n><template:with \n        path="ovpCardProperties>/dataPointAnnotationPath"\n        helper="CardAnnotationhelper.resolveEntityTypePath" \n        var=\'dataPoint\'><template:with \n            path="ovpCardProperties>/selectionAnnotationPath"\n            helper="CardAnnotationhelper.resolveEntityTypePath" \n            var=\'selVar\'><template:with \n                path="ovpCardProperties>/presentationAnnotationPath"\n                helper="CardAnnotationhelper.resolveEntityTypePath" \n                var=\'preVar\'><template:if test="{dataPoint>}"><VBox id="kpiHeader" \n                        class="sapOVPKpiHeaderVbox tabindex-1" \n                        core:require="{CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'}"><template:if test="{dataPoint>Value/Path}"><FlexBox \n                                items="{parts:[{path:\'entitySet>\'}, {path:\'dataPoint>\'}, {path:\'selVar>\'}], formatter: \'CardAnnotationhelper.getAggregateNumber\'}"\n                                id="kpiHBoxNumeric" \n                                class="numericContentHbox sapUiTinyMarginTop sapOvpKPIHeaderAggregateNumber" ><items><HBox class="innerNumericContentHbox sapOvpKpiContent" alignItems="End" justifyContent="SpaceBetween"><NumericContent \n                                            id="kpiNumberValue" \n                                            truncateValueTo="8"\n                                            indicator="{parts:[{path:\'dataPoint>\'}], formatter:\'CardAnnotationhelper.formThePathForTrendIcon\'}"\n                                            value="{path:\'dataPoint>\', formatter: \'CardAnnotationhelper.formThePathForAggregateNumber\'}"\n                                            formatterValue="true"\n                                            valueColor="{path:\'dataPoint>\', formatter: \'CardAnnotationhelper.formatKPIHeaderState\'}"\n                                            state="Loaded" class="sapOvpKPIHeaderNumberValueStyle kpiHeaderClass"               \n                                            withMargin="false"><customData><ovp:CustomData \n                                                    key="aria-label"\n                                                    value="{path:\'dataPoint>\', formatter: \'CardAnnotationhelper.getKPIHeaderAggregateNumber\'} {path:\'dataPoint>\', formatter: \'CardAnnotationhelper.formatKPIHeaderState\'}"\n                                                    writeToDom="true"/></customData></NumericContent><template:if test="{= ${path:\'dataPoint>\', formatter: \'CardAnnotationhelper.formPathForPercentageChange\'} !== \'\'}"><FlexBox class="TargetDeviationFlexbox"><VBox class="KpiTargetContainer"><Text id = "ovpKpiTarget" text="{ovplibResourceBundle>KPI_Target_Text}" class="KpiTargetText tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>KPI_Target_Text}" writeToDom="true" /></customData></Text><Text id = "ovpTargetValue" text="{path:\'dataPoint>\', formatter: \'CardAnnotationhelper.formPathForTargetValue\'}"\n                                                          class="sapOvpKPIHeaderTrendPercentStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{path:\'dataPoint>\', formatter: \'CardAnnotationhelper.formPathForTargetValue\'}" writeToDom="true" /></customData><layoutData><FlexItemData growFactor="1"/></layoutData></Text></VBox><VBox class="KpiDeviationContainer"><Text id= "ovpKPIDeviation" text="{ovplibResourceBundle>KPI_Deviation_Text}" class="KpiDeviationText tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>KPI_Deviation_Text}" writeToDom="true" /></customData></Text><Text\n                                                        id="kpiNumberPercentage"\n                                                        text="{path:\'dataPoint>\', formatter: \'CardAnnotationhelper.formPathForPercentageChange\'}"\n                                                        class="sapOvpKPIHeaderTrendPercentStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{path:\'dataPoint>\', formatter: \'CardAnnotationhelper.formPathForPercentageChange\'}" writeToDom="true" /></customData><layoutData><FlexItemData growFactor="1"/></layoutData></Text></VBox></FlexBox></template:if></HBox></items></FlexBox></template:if><template:if test="{dataPoint>Value/Path}"><template:if test="{ovpCardProperties>/valueSelectionInfo}"><FlexBox class="UOMFlexbox"><Text\n                                        id="ovpValueSelectionInfo"\n                                        maxLines="1"\n                                        text="{ovpCardProperties>/valueSelectionInfo}"\n                                        class="sapOvpKPIHeaderUnitOfMeasureStyle sapOvpCardSubtitle tabindex-1 cardHeaderText"><customData><ovp:CustomData \n                                                key="aria-label"\n                                                value="{ovpCardProperties>/valueSelectionInfo}"\n                                                writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true" /><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></template:if></template:if><template:if  test="{= (${ovpCardProperties>/showSortingInHeader} === true) &amp;&amp; ${path:\'preVar>\', formatter: \'CardAnnotationhelper.isPresentationVarientPresent\'} === true}"><FlexBox \n                                alignItems="Start" \n                                justifyContent="SpaceBetween" \n                                class="KpiPreVarFlex" \n                                visible="{ovpCardProperties>/showSortingInHeader}"><Text \n                                    id="headerGroupByText" \n                                    maxLines="1"\n                                    text="{path:\'preVar>\', formatter:\'CardAnnotationhelper.listGroupBy\'}"\n                                    class="sapOvpKPIHeaderDimensionStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData \n                                            key="aria-label" \n                                            value="{path:\'preVar>\', formatter:\'CardAnnotationhelper.listGroupBy\'}" \n                                            writeToDom="true" /></customData></Text></FlexBox></template:if><template:if test="{= (${ovpCardProperties>/showFilterInHeader} === true) &amp;&amp; {parts:[{path:\'selectionVar>\'}, {path:\'selVar>\'}], formatter:\'CardAnnotationhelper.formTheFilterByString\'} !== \'\'}"><template:if test="{= !${ovpCardProperties>/ignoreSelectionVariant} === true}"><template:then><FlexBox \n                                        alignItems="Start" \n                                        justifyContent="Start" \n                                        class="KpiSelVarFlex" \n                                        visible="{ovpCardProperties>/showFilterInHeader}"><template:repeat \n                                            list="{path:\'selVar>SelectOptions\'}" \n                                            var="selectionVar"><Text \n                                                id="{path:\'selectionVar>\', formatter:\'CardAnnotationhelper.formTheIdForFilter\'}" \n                                                text="{parts:[{path:\'selectionVar>\'}, {path:\'selVar>\'}], formatter:\'CardAnnotationhelper.formTheFilterByString\'}" \n                                                class="sapOvpKPIHeaderFilterStyle tabindex-1 cardHeaderText" ><customData><ovp:CustomData \n                                                        key="aria-label" \n                                                        value="{parts:[{path:\'selectionVar>\'}, {path:\'selVar>\'}], formatter:\'CardAnnotationhelper.formTheFilterByString\'}" \n                                                        writeToDom="true" /></customData></Text></template:repeat></FlexBox></template:then><template:else><FlexBox \n                                        alignItems="Start" \n                                        justifyContent="Start" \n                                        class="KpiSelVarFlex" \n                                        visible="{ovpCardProperties>/showFilterInHeader}"><template:repeat \n                                            list="{path:\'ovpCardProperties>/idForExternalFilters\'}" \n                                            var="selectionVar"><Text \n                                                id="{path:\'selectionVar>\', formatter:\'CardAnnotationhelper.formTheIdForFilterNotFromSelVar\'}" \n                                                text="{parts:[{path:\'selectionVar>\'}, {path:\'ovpCardProperties>/filters\'}], formatter:\'CardAnnotationhelper.formTheFilterByStringNotFromSelVar\'}" \n                                                class="sapOvpKPIHeaderFilterStyle tabindex-1 cardHeaderText" ><customData><ovp:CustomData \n                                                        key="aria-label" \n                                                        value="{parts:[{path:\'selectionVar>\'}, {path:\'ovpCardProperties>/filters\'}], formatter:\'CardAnnotationhelper.formTheFilterByStringNotFromSelVar\'}" \n                                                        writeToDom="true" /></customData></Text></template:repeat></FlexBox></template:else></template:if></template:if></VBox></template:if></template:with></template:with></template:with></core:FragmentDefinition>\n',
	"sap/ovp/cards/generic/LineItemDetails.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickView placement="Auto"><core:Fragment fragmentName="sap.ovp.cards.generic.LineItemDetailsQuickViewGroup" type="XML"/></QuickView></core:FragmentDefinition>',
	"sap/ovp/cards/generic/LineItemDetailsQuickViewGroup.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:l="sap.ui.layout"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n        ModelAnnotationhelper: \'sap/ui/model/odata/AnnotationHelper\'\n\t}"    \n><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>quickViewCard}" writeToDom="true" /></customData><template:with \n        path="entityType>com.sap.vocabularies.UI.v1.HeaderInfo" \n        var="header"><template:with \n            path="entityType>com.sap.vocabularies.UI.v1.Facets" \n            var="facets"><QuickViewPage\n                header="{= ${header>TypeNamePlural} ? ${path: \'header>TypeNamePlural\', formatter: \'ModelAnnotationhelper.format\'} :  \'{ovplibResourceBundle>LineItem_Detail_Text}\' }"\n                icon="{= ${header>ImageUrl} ? ${path: \'header>ImageUrl\', formatter: \'ModelAnnotationhelper.format\'} : (${header>TypeImageUrl} ? ${path: \'header>TypeImageUrl\', formatter: \'ModelAnnotationhelper.format\'} : \'\') }"\n                title="{= ${header>Title/Value} ? ${path: \'header>Title/Value\', formatter: \'ModelAnnotationhelper.format\'} :  \'\' }"\n                description="{= ${header>Description/Value} ? ${path: \'header>Description/Value\', formatter: \'ModelAnnotationhelper.format\'} :  \'\' }"><template:repeat \n                    list="{path:\'facets>\'}" \n                    var="referenceFacet"><template:if test="{referenceFacet>com.sap.vocabularies.UI.v1.IsSummary}"><template:with \n                            path="referenceFacet>Target"\n                            helper="ModelAnnotationhelper.resolvePath"\n                            var="target"><QuickViewGroup heading="{path: \'target>Label\', formatter: \'ModelAnnotationhelper.format\'}"><template:repeat \n                                    list="{path:\'target>Data\'}" \n                                    var="dataField"><template:if test="{dataField>Url}"><template:then><template:if test="{dataField>Url/UrlRef}"><template:then><QuickViewGroupElement\n                                                        label="{path: \'dataField>Label\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                        value="{path: \'dataField>Value\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                        url="{path: \'dataField>Url/UrlRef\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                        type="link"></QuickViewGroupElement></template:then><template:else><QuickViewGroupElement\n                                                        label="{path: \'dataField>Label\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                        value="{path: \'dataField>Value\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                        url="{path: \'dataField>Url\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                        type="link"></QuickViewGroupElement></template:else></template:if></template:then><template:else><template:if test="{dataField>Value}"><template:with \n                                                    path="dataField>Value"\n                                                    helper="ModelAnnotationhelper.resolvePath"\n                                                    var="fValue"><template:if test="{= ${fValue>sap:semantics} === \'url\'}"><template:then><QuickViewGroupElement\n                                                                label="{path: \'dataField>Label\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                                value="{path: \'dataField>Value\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                                url="{path: \'dataField>Value\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                                type="url"></QuickViewGroupElement></template:then><template:else><template:if test="{= ${fValue>sap:semantics} === \'email\'}"><template:then><QuickViewGroupElement\n                                                                        label="{path: \'dataField>Label\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                                        value="{path: \'dataField>Value\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                                        type="email"></QuickViewGroupElement></template:then><template:else><template:if test="{= ${fValue>sap:semantics} === \'tel\'}"><template:then><QuickViewGroupElement\n                                                                                label="{path: \'dataFie\\ld>Label\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                                                value="{path: \'dataField>Value\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                                                type="phone"></QuickViewGroupElement></template:then><template:else><QuickViewGroupElement\n                                                                                core:require="{CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'}"\n                                                                                label="{path: \'dataField>Label\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                                                value="{path: \'dataField>\', formatter: \'CardAnnotationhelper.formatField\'}"></QuickViewGroupElement></template:else></template:if></template:else></template:if></template:else></template:if></template:with></template:if></template:else></template:if></template:repeat></QuickViewGroup></template:with></template:if></template:repeat></QuickViewPage></template:with></template:with></core:FragmentDefinition>\n',
	"sap/ovp/cards/generic/SubTitle.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n        ModelAnnotationhelper: \'sap/ui/model/odata/AnnotationHelper\'\n\t}"    \n><template:if test="{= ${ovpCardProperties>/state} !== \'Loading\'}"><HBox justifyContent="SpaceBetween" renderType="Bare"><template:if test="{ovpCardProperties>/dynamicSubtitleAnnotationPath}"><template:then><template:with \n                        path=\'ovpCardProperties>/dynamicSubtitleAnnotationPath\'\n                        helper="CardAnnotationhelper.resolveEntityTypePath"\n                        var=\'headerInfo\'><template:with \n                            path="ovpCardProperties>/selectionAnnotationPath"\n                            helper="CardAnnotationhelper.resolveEntityTypePath" \n                            var=\'selVar\'><template:if test="{headerInfo>Description}"><HBox><FlexBox\n                                        core:require="{CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'}"\n                                        items="{parts:[{path:\'entitySet>\'}, {path:\'headerInfo>\'}, {path:\'selVar>\'}], formatter: \'CardAnnotationhelper.getAggregateNumber\'}"\n                                        class="sapOvpCardSubtitleContainer ovpHeaderContainer sapOvpCardDynamicSubTitle"><Text\n                                            id="ovpDescriptionValue" \n                                            maxLines="2"\n                                            text="{path: \'headerInfo>Description/Value\', formatter: \'ModelAnnotationhelper.format\'}"\n                                            class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData \n                                                    key="aria-label"\n                                                    value="{path: \'headerInfo>Description/Value\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                    writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></HBox></template:if></template:with></template:with></template:then><template:else><template:if test="{ovpCardProperties>/subTitle}"><template:then><FlexBox class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text\n                                    id = "SubTitle-Text" \n                                    maxLines="2"\n                                    text="{ovpCardProperties>/subTitle}"\n                                    class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData \n                                            key="aria-label" \n                                            value="{ovpCardProperties>/subTitle}"\n                                            writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></template:then><template:else><template:if test="{ovpCardProperties>/dataPointAnnotationPath}"><template:then><template:with \n                                        path=\'ovpCardProperties>/dataPointAnnotationPath\'\n                                        helper="CardAnnotationhelper.resolveEntityTypePath"\n                                        var=\'dataPoint\'><template:with \n                                            path="ovpCardProperties>/selectionAnnotationPath"\n                                            helper="CardAnnotationhelper.resolveEntityTypePath" \n                                            var=\'selVar\'><template:if test="{dataPoint>Description}"><HBox width="100%"><FlexBox\n                                                        core:require="{CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'}"\n                                                        items="{parts:[{path:\'entitySet>\'}, {path:\'dataPoint>\'}, {path:\'selVar>\'} ], formatter: \'CardAnnotationhelper.getAggregateNumber\'}"\n                                                        class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text\n                                                            id = "ovpDescriptionValue" \n                                                            maxLines="2"\n                                                            text="{path: \'dataPoint>Description\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                            class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData \n                                                                    key="aria-label"\n                                                                    value="{path: \'dataPoint>Description\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                                    writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></HBox></template:if></template:with></template:with></template:then><template:else><FlexBox class="sapOvpCardSubtitleContainer ovpHeaderContainer"></FlexBox></template:else></template:if></template:else></template:if></template:else></template:if><template:if test="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.list.List\' || ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.table.Table\'}"><template:if test="{ovpCardProperties>/countHeaderFragment}"><core:Fragment fragmentName="{ovpCardProperties>/countHeaderFragment}" type="XML"/></template:if></template:if></HBox></template:if></core:FragmentDefinition>\n',
	"sap/ovp/cards/generic/Title.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n        ModelAnnotationhelper: \'sap/ui/model/odata/AnnotationHelper\'\n\t}"    \n><template:if test="{ovpCardProperties>/title} || {ovpCardProperties>/dataPointAnnotationPath}"><HBox><template:if test="{ovpCardProperties>/title}"><template:then><FlexBox class="ovpHeaderContainer sapOvpCardHeaderTitleWidth"><Text\n                    id= "ovpHeaderTitle" \n                    maxLines="3"\n                    text="{ovpCardProperties>/title}"\n                    class="sapOvpCardTitle tabindex-1"\n                    build:metadata="#pattern:GenericCard;prop:text:Title"><customData><ovp:CustomData \n                            key="aria-label" \n                            value="{ovpCardProperties>/title}"\n                            writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></template:then><template:else><template:if test="{= ${ovpCardProperties>/state} !== \'Loading\' &amp;&amp; ${ovpCardProperties>/dataPointAnnotationPath}}"><template:then><template:with \n                                path=\'ovpCardProperties>/dataPointAnnotationPath\'\n                                helper="CardAnnotationhelper.resolveEntityTypePath"\n                                var=\'dataPoint\'><template:if test="{dataPoint>Title}"><FlexBox \n                                        core:require="{CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'}"\n                                        items="{parts:[{path:\'entitySet>\'}, {path:\'dataPoint>\'}], formatter: \'CardAnnotationhelper.getAggregateNumber\'}" \n                                        class="ovpHeaderContainer sapOvpCardHeaderTitleWidth"><Text\n                                            id="ovpHeaderTitleFromKPI" \n                                            maxLines="3"\n                                            text="{path: \'dataPoint>Title\', formatter: \'ModelAnnotationhelper.format\'}"\n                                            class="sapOvpCardTitle tabindex-1"\n                                            build:metadata="#pattern:GenericCard;prop:text:Title"><customData><ovp:CustomData \n                                                    key="aria-label" \n                                                    value="{path: \'dataPoint>Title\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                    writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="3" writeToDom="true"/></customData></Text></FlexBox></template:if></template:with></template:then></template:if></template:else></template:if></HBox></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/generic/base/error/Error.fragment.xml":'<core:FragmentDefinition \n    xmlns="sap.m" \n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n><template:if test="{= ${ovpCardProperties>/errorStatusText} &amp;&amp; !${ovpCardProperties>/sTitle}}"><template:then><Page\n            id="sapOvpErrorCard"\n            showHeader="false"\n            class="{= ${ovpCardProperties>/oldTemplate} === \'sap.ovp.cards.stack\' ? \'stackContentOfError\' : \'contentOfError\' }"><content><VBox alignItems="Center" justifyContent="Center" height="100%"><core:Icon src="{ovpCardProperties>/sMessageIcon}" class="sapUiLargeMarginTop" /><Title text="{ovpCardProperties>/errorStatusText}" /><Text text="{ovpCardProperties>/errorDescription}" /></VBox></content></Page></template:then><template:else><IllustratedMessage\n                id="sapOvpErrorCard"  \n                illustrationType="{ovpCardProperties>/sIllustration}"\n                title="{ovpCardProperties>/sTitle}"\n                description="{ovpCardProperties>/sDescription}"\n                enableDefaultTitleAndDescription="false"\n                enableVerticalResponsiveness="true"\n                class="{= ${ovpCardProperties>/oldTemplate} === \'sap.ovp.cards.stack\' ? \'stackContentOfError\' : \'contentOfError\' }" \n            /></template:else></template:if></core:FragmentDefinition>\n',
	"sap/ovp/cards/linklist/LinkList.fragment.xml":'<core:FragmentDefinition\n\txmlns:build="sap.build"\n\txmlns:core="sap.ui.core"\n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns="sap.m"\n\ttemplate:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'\n\t}"\t\n><template:if test="{ovpCardProperties>/staticContent}"><template:then><template:if test="{= ${ovpCardProperties>/listFlavor} === \'standard\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.linklist.fragments.LinkListStaticDataStandard" type="XML"/></template:then><template:elseif test="{= ${ovpCardProperties>/listFlavor} === \'carousel\'}"><core:Fragment fragmentName="sap.ovp.cards.linklist.fragments.LinkListStaticDataCarousel" type="XML"/></template:elseif></template:if></template:then><template:else><template:with \n\t\t\t\thelper="CardAnnotationhelper.resolveEntityTypePath" \n\t\t\t\tpath=\'ovpCardProperties>/headerAnnotationPath\' \n\t\t\t\tvar=\'header\'><template:if test="{= ${ovpCardProperties>/listFlavor} === \'standard\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.linklist.fragments.LinkListStandard" type="XML"/></template:then><template:elseif test="{= ${ovpCardProperties>/listFlavor} === \'carousel\'}"><core:Fragment fragmentName="sap.ovp.cards.linklist.fragments.LinkListCarousel" type="XML"/></template:elseif></template:if></template:with></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/fragments/LinkListCarousel.fragment.xml":'<core:FragmentDefinition \n\txmlns:build="sap.build" \n\txmlns:core="sap.ui.core" \n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \n\txmlns="sap.m"\n\ttemplate:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n\t\tLinkListAnnotationhelper: \'sap/ovp/cards/linklist/AnnotationHelper\',\n\t\tModelAnnotationhelper: \'sap/ui/model/odata/AnnotationHelper\'\n\t}"\t\n><Carousel \n\t\tcore:require="{CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'}"\n\t\tid="pictureCarousel" \n\t\tloop="true" \n\t\tclass="sapOvpCardLinkListCarousel cardType" \n\t\tarrowsPlacement="PageIndicator"\n\t\tpages="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'CardAnnotationhelper.formatItems\'}"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListCarouselType}" writeToDom="true" /></customData><pages><VBox class="sapMCrslItemTableCell"><template:with \n\t\t\t\t\thelper="CardAnnotationhelper.resolveEntityTypePath" \n\t\t\t\t\tpath=\'ovpCardProperties>/identificationAnnotationPath\' \n\t\t\t\t\tvar=\'identification\'><template:if test="{= ${header>Title/Value} || ${header>Description/Value}}"><VBox class="{= ${header>Title/Value} || ${header>Description/Value} ? \'sapOvpCarouselContentHeader\' : \'sapOvpCarouselContentHeader sapOvpCarouselHideContentHeader\' }"><template:if test="{path: \'identification>0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:then><Link \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkNavigationSingleTarget"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelper.formatField\'}"\n\t\t\t\t\t\t\t\t\t\treactiveAreaMode="Overlay"><customData><ovp:CustomData key="aria-label" value="{path: \'header>Title/Value\', formatter: \'ModelAnnotationhelper.format\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:then><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><Link \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPress"\n\t\t\t\t\t\t\t\t\t\tapp:dataAction="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'ModelAnnotationhelper.format\'}"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelper.formatField\'}"\n\t\t\t\t\t\t\t\t\t\treactiveAreaMode="Overlay"><customData><ovp:CustomData key="aria-label" value="{path: \'header>Title/Value\', formatter: \'ModelAnnotationhelper.format\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><Link \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\t\t\t\t\thref="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'LinkListAnnotationhelper.formatString\'}"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelper.formatField\'}"\n\t\t\t\t\t\t\t\t\t\treactiveAreaMode="Overlay"><customData><ovp:CustomData key="aria-label" value="{path: \'header>Title\', formatter: \'CardAnnotationhelper.formatField\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="CardAnnotationhelper.resolveEntityTypePath" \n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelper.formatField\'}"\n\t\t\t\t\t\t\t\t\t\t\t\treactiveAreaMode="Overlay"><customData><ovp:CustomData key="aria-label" value="{path: \'header>Title\', formatter: \'CardAnnotationhelper.formatField\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:if></template:with></template:elseif><template:else><Text \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelper.formatField\'}"/></template:else></template:if><Text \n\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListSubTitle"\n\t\t\t\t\t\t\t\ttext="{path: \'header>Description\', formatter: \'CardAnnotationhelper.formatField\'}"/></VBox></template:if><template:if test="{path: \'header>ImageUrl\', formatter: \'ModelAnnotationhelper.format\'}"><template:then><template:if test="{path: \'identification>0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:then><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkNavigationSingleTarget"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>ImageUrl\', formatter: \'ModelAnnotationhelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\talt="{path: \'header>Title/Value\', formatter: \'ModelAnnotationhelper.format\'}"/></HBox></template:then><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPress"\n\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'ModelAnnotationhelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>ImageUrl\', formatter: \'ModelAnnotationhelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\talt="{path: \'header>Title/Value\', formatter: \'ModelAnnotationhelper.format\'}"/></HBox></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPress"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>ImageUrl\', formatter: \'ModelAnnotationhelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\talt="{path: \'header>Title/Value\', formatter: \'ModelAnnotationhelper.format\'}"/></HBox></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="CardAnnotationhelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><HBox \n\t\t\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer"\n\t\t\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Image \n\t\t\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\t\t\tdensityAware="true"\n\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>ImageUrl\', formatter: \'ModelAnnotationhelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\talt="{path: \'header>Title/Value\', formatter: \'ModelAnnotationhelper.format\'}"/></HBox></template:if></template:with></template:elseif><template:else><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>ImageUrl\', formatter: \'ModelAnnotationhelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\talt="{path: \'header>Title/Value\', formatter: \'ModelAnnotationhelper.format\'}"/></HBox></template:else></template:if></template:then><template:else><template:if test="{path: \'identification>0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:then><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkNavigationSingleTarget"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'LinkListAnnotationhelper.getIconPath\'}"/></template:then><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPress"\n\t\t\t\t\t\t\t\t\t\tapp:dataAction="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'ModelAnnotationhelper.format\'}"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'LinkListAnnotationhelper.getIconPath\'}"/></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPress"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'LinkListAnnotationhelper.getIconPath\'}"/></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="CardAnnotationhelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><core:Icon \n\t\t\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'LinkListAnnotationhelper.getIconPath\'}"/></template:if></template:with></template:elseif><template:else><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'LinkListAnnotationhelper.getIconPath\'}"/></template:else></template:if></template:else></template:if></template:with></VBox></pages><customData><ovp:CustomData key="aria-live" value="assertive" writeToDom="true" /></customData></Carousel></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/fragments/LinkListNavigationTargets.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Popover title="{ovplibResourceBundle>RELATED_APPS}" placement="Auto"><HBox class="sapOvpLinkListStandardHBox"><List \n\t\t\t\tshowSeparators="None"\n\t\t\t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\' }"><CustomListItem></CustomListItem></List></HBox></Popover></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/fragments/LinkListStandard.fragment.xml":'<core:FragmentDefinition \n\txmlns:build="sap.build" \n\txmlns:core="sap.ui.core" \n\txmlns:l="sap.ui.layout" \n\txmlns:ovp="sap.ovp.ui"\n  \txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n  \txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \n\txmlns="sap.m"\n\ttemplate:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n\t\tLinkListAnnotationhelper: \'sap/ovp/cards/linklist/AnnotationHelper\',\n\t\tModelAnnotationhelper: \'sap/ui/model/odata/AnnotationHelper\'\n\t}"\t\n><HBox id="ovpListRow" class="sapOvpLinkListStandardHBox cardType"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListType}" writeToDom="true" /></customData><List \n\t\t\tid="ovpLinkList"\n\t\t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\'}"\n\t\t\tshowSeparators="None"\n\t\t\titems="{parts:[{path:\'entitySet>\'}, {path:\'header>\'}], formatter: \'LinkListAnnotationhelper.formatItems\'}"><template:with \n\t\t\t\thelper="CardAnnotationhelper.resolveEntityTypePath" \n\t\t\t\tpath=\'ovpCardProperties>/identificationAnnotationPath\' \n\t\t\t\tvar=\'identification\'><CustomListItem \n\t\t\t\t\tid="ovpCLI" \n\t\t\t\t\ttype="Active" \n\t\t\t\t\tpress="{= ${path: \'identification>0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'} ? \'onLinkNavigationSingleTarget\'\n\t\t\t\t\t\t: ${path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'} ? \'onLinkListActionPress\'\n\t\t\t\t\t\t: ${path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'LinkListAnnotationhelper.linkedAction\'} ? \'onLinkListLineItemUrl\'\n\t\t\t\t\t\t: ${path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'LinkListAnnotationhelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t: \'\'}"\n\t\t\t\t\tapp:dataAction="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'ModelAnnotationhelper.format\'}"><HBox\n\t\t\t\t\t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCozyTitle\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCozyTitleImage\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCozyTitleIcon sapOvpCozyTitleIconQuickLink\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCozyTitleSubtitle\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCozyTitleImageSubtitle\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCozyTitleIconSubtitle\'\n\t\t\t\t\t\t: ${ovpCardProperties>/densityStyle} === \'compact\' &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCompactTitle\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCompactTitleImage\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCompactTitleIcon\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCompactTitleSubtitle\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCompactTitleImageSubtitle\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCompactTitleIconSubtitle\'\n\t\t\t\t\t\t: \'ovpDefaultClass\'}\n\t\t\t\t\t\t{= ${path: \'identification>0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t: ${path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t: ${path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'LinkListAnnotationhelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t: ${path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'LinkListAnnotationhelper.linkedAction\'} ? \'linkListHasPopover\'\n\t\t\t\t\t\t: \'\'} "><template:if test="{= ${header>ImageUrl} || ${header>TypeImageUrl}}"><template:then><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemImageCozy sapOvpListItemDynamicCozy\' : \'sapOvpLinkListItemImageCompact sapOvpListItemDynamic\' } sapOvpListItemQuickLink"><template:if test="{path: \'header>ImageUrl\', formatter: \'ModelAnnotationhelper.format\'}"><template:then><template:if test="{= ${ovpCardProperties>/densityStyle} === \'cozy\'}"><template:then><FlexBox height="40px"><Avatar \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sapUiSmallMarginEnd"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayShape="Circle" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplaySize="Custom"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcustomDisplaySize="40px"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>ImageUrl\', formatter: \'ModelAnnotationhelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinitials="{path: \'header>Initials\', formatter: \'LinkListAnnotationhelper.getAvatarInitials\'}"></Avatar></FlexBox></template:then><template:else><FlexBox height="40px"><Avatar \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sapUiSmallMarginEnd"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayShape="Circle" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplaySize="Custom"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcustomDisplaySize="36px"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>ImageUrl\', formatter: \'ModelAnnotationhelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinitials="{path: \'header>Initials\', formatter: \'LinkListAnnotationhelper.getAvatarInitials\'}"></Avatar></FlexBox></template:else></template:if></template:then><template:else><FlexBox height="40px"><core:Icon \n\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListIcon" \n\t\t\t\t\t\t\t\t\t\t\t\t\tsize="24px" \n\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpLinkListImageCenter"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'LinkListAnnotationhelper.getIconPath\'}"/></FlexBox></template:else></template:if></VBox></template:then></template:if><VBox core:require="{CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'}" \n\t\t\t\t\t\t\tclass="sapOvpLinkListItem sapOvpListItemQuickLink {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpListItemDynamicCozy\' : \'sapOvpListItemDynamic\' }"><template:if test="{path: \'identification>0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:then><template:if test="{path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:then><template:with \n\t\t\t\t\t\t\t\t\t\t\t\thelper="CardAnnotationhelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelper.formatField\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treactiveAreaMode="Overlay"/></template:if></template:with></template:then><template:else><Label \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelper.formatField\'}"/></template:else></template:if></template:then><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:if test="{path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:then><template:with \n\t\t\t\t\t\t\t\t\t\t\t\thelper="CardAnnotationhelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelper.formatField\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treactiveAreaMode="Overlay"/></template:if></template:with></template:then><template:else><Label \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'ModelAnnotationhelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelper.formatField\'}"/></template:else></template:if></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:if test="{path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:then><template:with \n\t\t\t\t\t\t\t\t\t\t\t\thelper="CardAnnotationhelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelper.formatField\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treactiveAreaMode="Overlay"/></template:if></template:with></template:then><template:else><Label \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelper.formatField\'}"/></template:else></template:if></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="CardAnnotationhelper.resolveEntityTypePath" \n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelper.formatField\'}"\n\t\t\t\t\t\t\t\t\t\t\t\treactiveAreaMode="Overlay"/></template:if></template:with></template:elseif><template:else><Label \n\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelper.formatField\'}"/></template:else></template:if><template:if test="{header>Description/Value}"><template:then><Label \n\t\t\t\t\t\t\t\t\t\tid="linkListSubTitleLabel"\n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListSubTitle"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Description\', formatter: \'CardAnnotationhelper.formatField\'}"/></template:then></template:if></VBox></HBox></CustomListItem></template:with></List></HBox></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/fragments/LinkListStaticDataCarousel.fragment.xml":'<core:FragmentDefinition \r\n\txmlns:build="sap.build" \r\n\txmlns:core="sap.ui.core" \r\n\txmlns:ovp="sap.ovp.ui"\r\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\r\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \r\n\txmlns="sap.m"\r\n\ttemplate:require="{\r\n\t\tLinkListAnnotationhelper: \'sap/ovp/cards/linklist/AnnotationHelper\'\r\n\t}"\r\n><VBox><Carousel \r\n\t\t\tid="pictureCarousel" \r\n\t\t\tloop="true" \r\n\t\t\tclass="sapOvpCardLinkListCarousel cardType" \r\n\t\t\tarrowsPlacement="PageIndicator"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListCarouselType}" writeToDom="true" /></customData><pages><template:repeat \r\n\t\t\t\t\tlist="{ovpCardProperties>/staticContent}" \r\n\t\t\t\t\tvar="contentRow"><VBox class="sapMCrslItemTableCell"><template:if test="{= ${contentRow>title} || ${contentRow>subTitle}}"><VBox class="{= ${contentRow>title} || ${contentRow>subTitle} ? \'sapOvpCarouselContentHeader\' : \'sapOvpCarouselContentHeader sapOvpCarouselHideContentHeader\' }"><template:if test="{contentRow>dataAction}"><template:then><Link \r\n\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel--{contentRow>id}" \r\n\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \r\n\t\t\t\t\t\t\t\t\t\t\ttext="{contentRow>title}" \r\n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPressLocalData"\r\n\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{contentRow>dataAction}"\r\n\t\t\t\t\t\t\t\t\t\t\treactiveAreaMode="Overlay"><customData><ovp:CustomData key="aria-label" value="{contentRow>title}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:then><template:else><Link \r\n\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel--{contentRow>id}" \r\n\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \r\n\t\t\t\t\t\t\t\t\t\t\ttext="{contentRow>title}" \r\n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPressLocalData"\r\n\t\t\t\t\t\t\t\t\t\t\tapp:targetUri="{contentRow>targetUri}" \r\n\t\t\t\t\t\t\t\t\t\t\tapp:openInNewWindow="{contentRow>openInNewWindow}"\r\n\t\t\t\t\t\t\t\t\t\t\treactiveAreaMode="Overlay"><customData><ovp:CustomData key="aria-label" value="{contentRow>title}" writeToDom="true" /><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:else></template:if><Text id="linkListSubTitleLabel--{contentRow>id}" class="sapOvpCardLinkListSubTitle" text="{contentRow>subTitle}"><customData><ovp:CustomData key="aria-label" value="{contentRow>subTitle}" writeToDom="true" /><ovp:CustomData key="role" value="text" writeToDom="true" /></customData></Text></VBox></template:if><template:if test="{contentRow>dataAction}"><template:then><template:if test="{path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'}"><template:then><HBox \r\n\t\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \r\n\t\t\t\t\t\t\t\t\t\t\talignItems="Center" \r\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \r\n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage--{contentRow>id}" \r\n\t\t\t\t\t\t\t\t\t\t\t\talt="{contentRow>imageAltText}" \r\n\t\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \r\n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPressLocalData" \r\n\t\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{contentRow>dataAction}" \r\n\t\t\t\t\t\t\t\t\t\t\t\tdensityAware="true"\r\n                                                src="{path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.formatUrl\'}"></Image></HBox></template:then><template:else><core:Icon \r\n\t\t\t\t\t\t\t\t\t\t\tid="linkListIcon--{contentRow>id}" \r\n\t\t\t\t\t\t\t\t\t\t\tsize="128px" \r\n\t\t\t\t\t\t\t\t\t\t\tsrc="{contentRow>imageUri}" \r\n\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \r\n\t\t\t\t\t\t\t\t\t\t\tuseIconTooltip="false" \r\n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPressLocalData" \r\n\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{contentRow>dataAction}"/></template:else></template:if></template:then><template:else><template:if test="{path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'}"><template:then><HBox \r\n\t\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \r\n\t\t\t\t\t\t\t\t\t\t\talignItems="Center" \r\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \r\n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage--{contentRow>id}" \r\n\t\t\t\t\t\t\t\t\t\t\t\talt="{contentRow>imageAltText}" \r\n\t\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \r\n\t\t\t\t\t\t\t\t\t\t\t\tapp:targetUri="{contentRow>targetUri}" \r\n\t\t\t\t\t\t\t\t\t\t\t\tapp:openInNewWindow="{contentRow>openInNewWindow}"\r\n                                                densityAware="true" \r\n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPressLocalData"\r\n                                                src="{path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.formatUrl\'}"></Image></HBox></template:then><template:else><core:Icon \r\n\t\t\t\t\t\t\t\t\t\t\tid="linkListIcon--{contentRow>id}" \r\n\t\t\t\t\t\t\t\t\t\t\tsize="128px" \r\n\t\t\t\t\t\t\t\t\t\t\tsrc="{contentRow>imageUri}" \r\n\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \r\n\t\t\t\t\t\t\t\t\t\t\tuseIconTooltip="false" \r\n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPressLocalData" \r\n\t\t\t\t\t\t\t\t\t\t\tapp:targetUri="{contentRow>targetUri}"\r\n\t\t\t\t\t\t\t\t\t\t\tapp:openInNewWindow="{contentRow>openInNewWindow}"/></template:else></template:if></template:else></template:if></VBox></template:repeat></pages><customData><ovp:CustomData key="aria-live" value="assertive" writeToDom="true" /></customData></Carousel></VBox></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/fragments/LinkListStaticDataStandard.fragment.xml":'<core:FragmentDefinition \n    xmlns:build="sap.build" \n    xmlns:core="sap.ui.core" \n    xmlns:l="sap.ui.layout" \n    xmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" \n    xmlns:smartlink="sap.ui.comp.navpopover"\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \n    xmlns="sap.m"\n    template:require="{\n\t\tLinkListAnnotationhelper: \'sap/ovp/cards/linklist/AnnotationHelper\'\n\t}"\n><HBox id="ovpListRow" class="sapOvpLinkListStandardHBox"><List \n            id="ovpLinkList"\n\t\t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\' } cardType"\n\t\t\tshowSeparators="None"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListType}" writeToDom="true" /></customData><items><template:repeat \n                    list="{ovpCardProperties>/staticContent}" \n                    var="contentRow"><CustomListItem \n                        id="{contentRow>id}" \n                        type="Active"\n                        press="{= ${contentRow>semanticObject} &amp;&amp; ${contentRow>action} ? \'onLinkListSemanticObjectPressLocalData\' : ${contentRow>dataAction} ? \'onLinkListActionPressLocalData\' : ${contentRow>semanticObject} &amp;&amp; !${contentRow>action} ? \'\' : \'onLinkListItemPressLocalData\'}"\n                        app:targetUri="{= ${contentRow>targetUri} ? ${contentRow>targetUri} : \'\'}"\n                        app:openInNewWindow="{=${contentRow>openInNewWindow} ? ${contentRow>openInNewWindow} :\'\' }"\n                        app:dataAction="{= ${contentRow>dataAction} ? ${contentRow>dataAction} : \'\'}"\n                        app:contentRowIndex="{path: \'contentRow>\', formatter: \'LinkListAnnotationhelper.contentRowIndex\'}"><HBox\n                            class="{= ${ovpCardProperties>/densityStyle} === \'cozy\' &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCozyTitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCozyTitleImage\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCozyTitleIcon sapOvpCozyTitleIconQuickLink\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCozyTitleSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCozyTitleImageSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCozyTitleIconSubtitle\'\n                            : ${ovpCardProperties>/densityStyle} === \'compact\' &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCompactTitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCompactTitleImage\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCompactTitleIcon\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCompactTitleSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCompactTitleImageSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCompactTitleIconSubtitle\'\n                            : \'ovpDefaultClass\'}"><template:if test="{path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'}"><template:then><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemImageCozy\' : \'sapOvpLinkListItemImageCompact\' } sapOvpListItemQuickLink"><template:if test="{= ${ovpCardProperties>/densityStyle} === \'cozy\'}"><template:then><FlexBox height="40px"><Avatar \n                                                        id="linkListImage--{contentRow>id}"\n                                                        class="sapUiSmallMarginEnd"\n                                                        tooltip="{contentRow>toolTip}"\n                                                        displayShape="Circle" \n                                                        displaySize="Custom"\n                                                        customDisplaySize="40px"\n                                                        src="{path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.formatUrl\'}"></Avatar></FlexBox></template:then><template:else><FlexBox height="40px"><Avatar \n                                                        id="linkListImage--{contentRow>id}"\n                                                        class="sapUiSmallMarginEnd"\n                                                        tooltip="{contentRow>toolTip}"\n                                                        displayShape="Circle" \n                                                        displaySize="Custom"\n                                                        customDisplaySize="36px"\n                                                        src="{path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.formatUrl\'}"></Avatar></FlexBox></template:else></template:if></VBox></template:then><template:elseif test="{contentRow>imageUri}"><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemIconCozy\' : \'sapOvpLinkListItemIconCompact\' } sapOvpListItemQuickLink"><FlexBox height="40px"><core:Icon \n                                                id="linkListIcon--{contentRow>id}"\n                                                class="sapOvpLinkListImageCenter"\n                                                tooltip="{contentRow>toolTip}" \n                                                useIconTooltip="false"\n                                                size="22px" \n                                                src="{contentRow>imageUri}"/></FlexBox></VBox></template:elseif></template:if><template:if test="{contentRow>dataAction}"><template:then><VBox class="sapOvpLinkListItem sapOvpListItemQuickLink"><Label \n                                            id="linkListTitleLabel--{contentRow>id}"\n                                            text="{contentRow>title}"\n                                            class="{= ${contentRow>subTitle} || !${contentRow>subTitle} &amp;&amp; !${contentRow>imageUri} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"/><Label \n                                            id="linkListSubTitleLabel--{contentRow>id}" \n                                            class="sapOvpCardLinkListSubTitle" \n                                            text="{contentRow>subTitle}"/></VBox></template:then><template:elseif\n                                    test="{= ${contentRow>semanticObject} &amp;&amp; ${contentRow>action} }"><VBox class="sapOvpLinkListItem sapOvpListItemQuickLink"><Label \n                                            id="linkListTitleLabel--{contentRow>id}"\n                                            text="{contentRow>title}"\n                                            class="{= ${contentRow>subTitle} || !${contentRow>subTitle} &amp;&amp; !${contentRow>imageUri} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"/><Label id="linkListSubTitleLabel--{contentRow>id}" class="sapOvpCardLinkListSubTitle" text="{contentRow>subTitle}"/></VBox></template:elseif><template:else><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemCozy\' : \'sapOvpLinkListItemCompact\' } sapOvpListItemQuickLink"><Label \n                                            id="linkListTitleLabel--{contentRow>id}"\n                                            text="{contentRow>title}"\n                                            class="{= ${contentRow>subTitle} || !${contentRow>subTitle} &amp;&amp; !${contentRow>imageUri} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"/><Label id="linkListSubTitleLabel--{contentRow>id}" class="sapOvpCardLinkListSubTitle" text="{contentRow>subTitle}"/></VBox></template:else></template:if></HBox></CustomListItem></template:repeat></items></List></HBox></core:FragmentDefinition>',
	"sap/ovp/cards/list/CondensedBarList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:navpopover="sap.ui.comp.navpopover"\n    xmlns:micro="sap.suite.ui.microchart"\n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n        ModelAnnotationhelper: \'sap/ui/model/odata/AnnotationHelper\'\n\t}"    \n><items><CustomListItem\n            core:require="{CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'}"\n            id="listItem"\n            type="Active"\n            press="onListItemPress"\n            class="sapOvpBarList sapOvpBarCondensedList"><template:if test="{= ${ovpCardProperties>/showLineItemDetail} === true}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.LineItemDetails" type="XML"/><Link\n                        id="DataField"\n                        class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                        text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"\n                        press="onContactDetailsLinkPress"\n                        reactiveAreaMode="Overlay"></Link></VBox></template:then><template:elseif test="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'CardAnnotationhelper.semanticObjectOfFirstDataField\'}"><navpopover:SmartLink\n                    id="DataField"\n                    class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"\n                    semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'CardAnnotationhelper.semanticObjectOfFirstDataField\'}"\n                    contactAnnotationPath="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                    forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'CardAnnotationhelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:elseif><template:else><Text\n                        id="DataField"\n                        class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                        text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if><HBox class="sapOvpBarListHBox sapOvpBarStandardList"><micro:ComparisonMicroChart \n                    id= "BarChartDataPoint"\n                    class="sapOvpBarListComparisonMicroChartAlignment" \n                    width="100%"\n                    shrinkable="true"\n                    colorPalette="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.colorPaletteForComparisonMicroChart\'}"\n                    minValue="{minMaxModel>/minValue}"\n                    maxValue="{minMaxModel>/maxValue}"><micro:data><micro:ComparisonMicroChartData \n                            displayValue=" "\n                            value="{= \'{path: \\\'\' + ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getFirstDataPointValue\'} + \'\\\', formatter: \\\'.returnBarChartValue\\\'}\' }"\n                            color="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointColor\'}"></micro:ComparisonMicroChartData></micro:data></micro:ComparisonMicroChart><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 0}" ><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.isFirstDataPointPercentageUnit\'}}" ><template:then><ObjectNumber\n                                    id="DataPoint1"\n                                    class="sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpBarListObjectNumberPercentage"\n                                    textAlign="End"\n                                    number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'CardAnnotationhelper.formatDataPointValueOnIndex\'}"/></template:then><template:else><ObjectNumber\n                                    id="DataPoint1"\n                                    class="sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpObjectNumber"\n                                    textAlign="End"\n                                    state="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointState\'}"\n                                    number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'CardAnnotationhelper.formatObjectNumber\'}"\n                                    unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'CardAnnotationhelper.formatUnit\'}"/></template:else></template:if></template:if><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.isFirstContactAnnotation\'} === true}"><template:then><template:repeat \n                            list="{path:\'lineItem>\'}" \n                            var="dataField"><template:if test="{= ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:then><template:if test="{= ${dataField>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                path="dataField>Target"\n                                                helper="ModelAnnotationhelper.resolvePath"\n                                                var="contact"><VBox class="textAlignRight"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n                                                        id = "contactLink"\n                                                        binding="{= ${ path: \'dataField>Target/AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField>Target/AnnotationPath\'}.slice(0, ${ path: \'dataField>Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                        text="{path: \'contact>fn\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                        press="onContactDetailsLinkPress"\n                                                        reactiveAreaMode="Overlay"></Link></VBox></template:with></template:then></template:if></template:then></template:if></template:repeat></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 1}" ><ObjectNumber\n                                id="DataPoint2"\n                                class="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointState\'} === \'None\' ?\n                                        \'sapOvpBarListObjectNumber sapOvpBarListSubDataField\' : \'sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber"\n                                textAlign="End"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'CardAnnotationhelper.formatObjectNumber\'}"\n                                state="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatSecondDataPointState\'}"\n                                unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}], formatter: \'CardAnnotationhelper.formatUnit\'}"/></template:if></template:else></template:if></HBox></CustomListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/list/ExtendedBarList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:navpopover="sap.ui.comp.navpopover"\n    xmlns:micro="sap.suite.ui.microchart"\n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n        ModelAnnotationhelper: \'sap/ui/model/odata/AnnotationHelper\'\n\t}"    \n><items><CustomListItem\n            core:require="{CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'}"\n            id="listItem"\n            type="Active"\n            press="onListItemPress"><HBox class="sapOvpBarListHBox sapOvpExtendedBarListHBox"><VBox class="sapOvpBarListVBoxLeft"><template:if test="{= ${ovpCardProperties>/showLineItemDetail} === true}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.LineItemDetails" type="XML"/><Link\n                                    id="DataField1"\n                                    class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"\n                                    press="onContactDetailsLinkPress"\n                                    reactiveAreaMode="Overlay"></Link></VBox></template:then><template:elseif test="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'CardAnnotationhelper.semanticObjectOfFirstDataField\'}"><navpopover:SmartLink\n                                id="DataField1"\n                                class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"\n                                semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'CardAnnotationhelper.semanticObjectOfFirstDataField\'}"\n                                contactAnnotationPath="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                                forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'CardAnnotationhelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:elseif><template:else><Text\n                                id="DataField1"\n                                class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if><template:if test="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'CardAnnotationhelper.semanticObjectOfSecondDataField\'}"><template:then><navpopover:SmartLink\n                                id="DataField2"\n                                class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"\n                                semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'CardAnnotationhelper.semanticObjectOfSecondDataField\'}"\n                                contactAnnotationPath="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'CardAnnotationhelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                                forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'CardAnnotationhelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text\n                                id="DataField2"\n                                class="sapOvpBarListDataField sapOvpBarListSubDataField sapOvpExtendedBarListBlock sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if><layoutData><FlexItemData growFactor="1"/></layoutData><micro:ComparisonMicroChart \n                        id="BarChartDataPoint" \n                        class="sapOvpBarListComparisonMicroChartAlignment" \n                        width="100%" \n                        height="1rem"\n                        colorPalette="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.colorPaletteForComparisonMicroChart\'}"\n                        minValue="{minMaxModel>/minValue}"\n                        maxValue="{minMaxModel>/maxValue}"><micro:data><micro:ComparisonMicroChartData \n                                displayValue=" "\n                                value="{= \'{path: \\\'\' + ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getFirstDataPointValue\'} + \'\\\', formatter: \\\'.returnBarChartValue\\\'}\' }"\n                                color="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointColor\'}"></micro:ComparisonMicroChartData></micro:data></micro:ComparisonMicroChart></VBox><VBox class="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 0 ? \'sapOvpBarListVBoxRight\' : \'sapOvpListEmptyField\'}"><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.isFirstContactAnnotation\'} === true}"><template:then><template:repeat \n                                list="{path:\'lineItem>\'}"\n                                var="dataField"><template:if test="{= ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:then><template:if test="{= ${dataField>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                    path="dataField>Target"\n                                                    helper="ModelAnnotationhelper.resolvePath"\n                                                    var="contact"><VBox class="textAlignRight" width="100%"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n                                                            id="DataField2Link"\n                                                            binding="{= ${ path: \'dataField>Target/AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField>Target/AnnotationPath\'}.slice(0, ${ path: \'dataField>Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                            text="{path: \'contact>fn\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                            textAlign="Right"\n                                                            press="onContactDetailsLinkPress"\n                                                            reactiveAreaMode="Overlay"></Link></VBox></template:with></template:then></template:if></template:then></template:if></template:repeat></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 1}" ><ObjectNumber\n                                    id="DataPoint2"\n                                    class="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointState\'} === \'None\' ?\n                                        \'sapOvpBarListObjectNumber\' : \'sapOvpBarListObjectNumber sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber"\n                                    textAlign="End"\n                                    number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'CardAnnotationhelper.formatObjectNumber\'}"\n                                    unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}], formatter: \'CardAnnotationhelper.formatUnit\'}"\n                                    state="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatSecondDataPointState\'}"/></template:if></template:else></template:if><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 2}" ><ObjectNumber\n                            id="DataPoint3"\n                            class="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointState\'} === \'None\' ?\n                                        \'sapOvpBarListObjectNumber\' : \'sapOvpBarListObjectNumber sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber"\n                            textAlign="End"\n                            number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'CardAnnotationhelper.formatObjectNumber\'}"\n                            unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataPointIndex\'}], formatter: \'CardAnnotationhelper.formatUnit\'}"\n                            state="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatThirdDataPointState\'}"/></template:if><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.isFirstDataPointPercentageUnit\'}}" ><template:then><ObjectNumber\n                                id="BarChartValue"\n                                class="sapOvpBarListObjectNumber sapOvpBarListObjectNumberPercentage sapOvpObjectNumber"\n                                textAlign="End"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'CardAnnotationhelper.formatDataPointValueOnIndex\'}"/></template:then><template:else><ObjectNumber\n                                id="BarChartStateValue"\n                                class="sapOvpBarListObjectNumber valueStateText "\n                                textAlign="End"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'CardAnnotationhelper.formatObjectNumber\'}"\n                                unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'CardAnnotationhelper.formatUnit\'}"\n                                state="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointState\'}"></ObjectNumber></template:else></template:if></VBox></HBox></CustomListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/list/List.fragment.xml":'<core:FragmentDefinition\r\n    xmlns="sap.m"\r\n    xmlns:core="sap.ui.core"\r\n    xmlns:ovp="sap.ovp.ui"\r\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\r\n    template:require="{\r\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'\r\n\t}"    \r\n><template:if test="{= ${ovpCardProperties>/imageSupported} &amp;&amp; ${ovpCardProperties>/listType} === \'condensed\' }" ><template:then><core:Fragment fragmentName="sap.ovp.cards.list.StandardListImage" type="XML"/></template:then><template:else><List \r\n                core:require="{CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'}"\r\n                id="ovpList" \r\n                items="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'CardAnnotationhelper.formatItems\'}" \r\n                class="listCardType"><template:with \r\n                    path=\'ovpCardProperties>/annotationPath\' \r\n                    helper="CardAnnotationhelper.resolveEntityTypePath" \r\n                    var=\'lineItem\'><template:if test="{= ${ovpCardProperties>/listType} === \'extended\'}" ><template:then><template:if test="{= ${ovpCardProperties>/listFlavor} === \'bar\'}" ><template:then><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>barChartCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.list.ExtendedBarList" type="XML"/></template:then><template:else><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>listCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.list.ObjectList" type="XML"/></template:else></template:if></template:then><template:else><template:if test="{= ${ovpCardProperties>/listFlavor} === \'bar\'}" ><template:then><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>barChartCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.list.CondensedBarList" type="XML"/></template:then><template:else><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>listCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.list.StandardList" type="XML"/></template:else></template:if></template:else></template:if></template:with></List></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/list/ObjectList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"\n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'\n\t}"    \n><items><ObjectListItem\n            core:require="{CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'}"\n            id="listItem"\n            class="sapOvpObjectListItem sapOvpListFragment sapUiContentPadding"\n            title="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"\n            number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataPointOrField\'}"\n            numberState="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 0 ? ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointState\'} : \'None\' }"\n            type="Active"\n            press="onListItemPress"><attributes><ObjectAttribute \n                    id="listItem2Row1Column"\n                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"/><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 1}" ><template:then><ObjectAttribute \n                            id="listItem3row1column"\n                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 0}" ><template:then><ObjectAttribute \n                                    id="listItem3row1column"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fourthDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"/></template:then><template:else><ObjectAttribute \n                                    id="listItem3row1column" \n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fifthDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if></template:else></template:if></attributes><firstStatus><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 1}" ><template:then><ObjectStatus\n                            id="listItem2row2column"\n                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}], formatter: \'CardAnnotationhelper.formatDataPointValueOnIndex\'}"\n                            state="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatSecondDataPointState\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 0}" ><template:then><ObjectStatus\n                                    id="listItem2row2column"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"\n                                    state="None"/></template:then><template:else><ObjectStatus\n                                    id="listItem2row2column"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fourthDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"\n                                    state="None"/></template:else></template:if></template:else></template:if></firstStatus><secondStatus><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 2}" ><template:then><ObjectStatus\n                            id="listItem3row2column"\n                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataPointIndex\'}], formatter: \'CardAnnotationhelper.formatDataPointValueOnIndex\'}"\n                            state="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatThirdDataPointState\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 1}" ><template:then><ObjectStatus\n                                    id="listItem3row2column"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fourthDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"\n                                    state="None"/></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 0}" ><template:then><ObjectStatus\n                                            id="listItem3row2column"\n                                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fifthDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"\n                                            state="None"/></template:then><template:else><ObjectStatus\n                                            id="listItem3row2column"\n                                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/sixthDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"\n                                            state="None"/></template:else></template:if></template:else></template:if></template:else></template:if></secondStatus></ObjectListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/list/StandardList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"   \n><items><StandardListItem\n            core:require="{CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'}"\n            id="listItem"\n            class="sapOvpStandardListItem"\n            title="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"\n            description="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"\n            info="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataPointOrField\'}"\n            infoState="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 0 ? ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointState\'} : \'None\' }"\n            type="Active"\n            press="onListItemPress"></StandardListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/list/StandardListImage.fragment.xml":'<core:FragmentDefinition\r\n    xmlns="sap.m"\r\n    xmlns:core="sap.ui.core"\r\n    xmlns:ovp="sap.ovp.ui"\r\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\r\n    xmlns:build="sap.build"\r\n    template:require="{\r\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'\r\n\t}"    \r\n><List \r\n        core:require="{CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'}"\r\n        id="ovpList" \r\n        items="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'CardAnnotationhelper.formatItems\'}"><template:with \r\n            path=\'ovpCardProperties>/annotationPath\' \r\n            helper="CardAnnotationhelper.resolveEntityTypePath" \r\n            var=\'lineItem\'><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>imageListCardType}" writeToDom="true" /></customData><items><StandardListItem\r\n                        core:require="{CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'}"\r\n                        id="listItem"\r\n                        class="sapOvpStandardListItem sapOvpStandardListItemImagesIcons"\r\n                        icon="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatImageUrl\'}"\r\n                        iconInset = "false"\r\n                        title="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"\r\n                        description="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"\r\n                        info="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataPointOrField\'}"\r\n                        infoState="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 0 ? ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointState\'} : \'None\' }"\r\n                        type="Active"\r\n                        press="onListItemPress"></StandardListItem></items></template:with></List></core:FragmentDefinition>\r\n',
	"sap/ovp/cards/quickview/Quickview.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:l="sap.ui.layout"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n        ModelAnnotationhelper: \'sap/ui/model/odata/AnnotationHelper\'\n\t}"    \n><QuickViewCard id="quickViewCard" class="sapMPanelContent sapOvpCardContent cardType"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>quickViewCard}" writeToDom="true" /></customData><template:with \n            path="entityType>com.sap.vocabularies.UI.v1.HeaderInfo" \n            var="header"><QuickViewPage\n                core:require="{CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'}"\n                pageId="quickViewPage"\n                header="{= ${header>TypeNamePlural} ? ${path: \'header>TypeNamePlural\', formatter: \'ModelAnnotationhelper.format\'} :  \'\' }"\n                icon="{= ${header>ImageUrl} ? ${path: \'header>ImageUrl\', formatter: \'ModelAnnotationhelper.format\'} : (${header>TypeImageUrl} ? ${path: \'header>TypeImageUrl\', formatter: \'ModelAnnotationhelper.format\'} : \'\') }"\n                title="{= ${header>Title} ? ${path: \'header>Title\', formatter: \'CardAnnotationhelper.formatField\'} :  \'\' }"\n                description="{= ${header>Description} ? ${path: \'header>Description\', formatter: \'CardAnnotationhelper.formatField\'} :  \'\' }"><template:with \n                    path="ovpCardProperties>/annotationPath" \n                    helper="CardAnnotationhelper.resolveEntityTypePath" \n                    var="facets"><template:repeat \n                        list="{path:\'facets>\'}" \n                        var="referenceFacet"><template:if test="{referenceFacet>com.sap.vocabularies.UI.v1.IsSummary}"><template:with \n                                path="referenceFacet>Target"\n                                helper="ModelAnnotationhelper.resolvePath"\n                                var="target"><QuickViewGroup heading="{path: \'target>Label\', formatter: \'ModelAnnotationhelper.format\'}"><template:repeat \n                                        list="{path:\'target>Data\'}" \n                                        var="dataField"><template:if test="{dataField>Url}"><template:then><template:if test="{dataField>Url/UrlRef}"><template:then><QuickViewGroupElement\n                                                            label="{path: \'dataField>Label\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                            value="{path: \'dataField>\', formatter: \'CardAnnotationhelper.formatField\'}"\n                                                            url="{path: \'dataField>Url/UrlRef\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                            type="link"></QuickViewGroupElement></template:then><template:else><QuickViewGroupElement\n                                                            label="{path: \'dataField>Label\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                            value="{path: \'dataField>\', formatter: \'CardAnnotationhelper.formatField\'}"\n                                                            url="{path: \'dataField>Url\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                            type="link"></QuickViewGroupElement></template:else></template:if></template:then><template:else><template:if test="{dataField>Value}"><template:with \n                                                        path="dataField>Value"\n                                                        helper="ModelAnnotationhelper.resolvePath"\n                                                        var="fValue"><template:if test="{= ${fValue>sap:semantics} === \'url\'}"><template:then><QuickViewGroupElement\n                                                                    label="{path: \'dataField>Label\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                                    value="{path: \'dataField>\', formatter: \'CardAnnotationhelper.formatField\'}"\n                                                                    url="{path: \'dataField>Value\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                                    type="url"></QuickViewGroupElement></template:then><template:else><template:if test="{= ${fValue>sap:semantics} === \'email\'}"><template:then><QuickViewGroupElement\n                                                                            label="{path: \'dataField>Label\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                                            value="{path: \'dataField>\', formatter: \'CardAnnotationhelper.formatField\'}"\n                                                                            type="email"></QuickViewGroupElement></template:then><template:else><template:if test="{= ${fValue>sap:semantics} === \'tel\'}"><template:then><QuickViewGroupElement\n                                                                                    label="{path: \'dataField>Label\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                                                    value="{path: \'dataField>\', formatter: \'CardAnnotationhelper.formatField\'}"\n                                                                                    type="phone"></QuickViewGroupElement></template:then><template:else><QuickViewGroupElement\n                                                                                    label="{path: \'dataField>Label\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                                                    value="{path: \'dataField>\', formatter: \'CardAnnotationhelper.formatField\'}"></QuickViewGroupElement></template:else></template:if></template:else></template:if></template:else></template:if></template:with></template:if></template:else></template:if></template:repeat></QuickViewGroup></template:with></template:if></template:repeat></template:with></QuickViewPage></template:with></QuickViewCard></core:FragmentDefinition>\n',
	"sap/ovp/cards/rta/AddCustomActions.fragment.xml":'<core:FragmentDefinition\n    xmlns:core="sap.ui.core"\n    xmlns:f="sap.ui.layout.form"\n    xmlns="sap.m"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><Toolbar id="sapOVPCustomActionsToolbar"><ToolbarSpacer/><Button icon="sap-icon://add"  press="addActionRow"/></Toolbar><Table \n        id="sapOvpCustomActions"\n        items="{path:\'/objectStreamCardsSettings/customActions\'}"\n        sticky="ColumnHeaders"\n        inset="false"\n        fixedLayout="false"\n        visible="true"><columns><Column><Text text="Text"/></Column><Column><Text text="Action"/></Column><Column><Text text="Position"/></Column><Column><Text text=""/></Column></columns><items><ColumnListItem><cells><Input type="Text" value="{text}" change="updateCard" required="true" /><Input type="Text" value="{press}" change="updateCard" required="true"/><Input type="Text" value="{position}" change="updateCard" required="true"/><Button icon="sap-icon://delete" press="onActionDelete"/></cells></ColumnListItem></items></Table></core:FragmentDefinition>',
	"sap/ovp/cards/rta/AddStaticParameters.fragment.xml":'<core:FragmentDefinition\n    xmlns:core="sap.ui.core"\n    xmlns:f="sap.ui.layout.form"\n    xmlns="sap.m"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><Toolbar id="sapOVPCustomParamToolbar"><ToolbarSpacer/><Button icon="sap-icon://add"  press="addStaticParameterRow"/></Toolbar><Table \n        id="sapOvpStaticParameters"\n        items="{path:\'/aAllStaticParameters\'}" \n        sticky="ColumnHeaders" \n        inset="false"\n        fixedLayout="false"\n        visible="true"><columns><Column id="1"><Text text="key"/></Column><Column id="2"><Text text="value"/></Column><Column><Text text=""/></Column></columns><items><ColumnListItem><cells><Input type="Text" value="{key}" change="updateCard" required="true" /><Input type="Text" value="{value}" change="updateCard" required="true"/><Button icon="sap-icon://delete" press="onParameterDelete"/></cells></ColumnListItem></items></Table></core:FragmentDefinition>',
	"sap/ovp/cards/rta/AppSettingsDialog.view.xml":'<mvc:View \n    xmlns:mvc="sap.ui.core.mvc" \n    xmlns="sap.m" \n    xmlns:core="sap.ui.core"\n    xmlns:f="sap.ui.layout.form"\n    xmlns:l="sap.ui.layout"\n    controllerName="sap.ovp.cards.rta.AppSettingsDialog"><VBox class="sapOvpScrollContainer sapUiLargeMargin"><f:Form editable="true"><f:layout><f:ResponsiveGridLayout\n                    labelSpanXL="6" \n                    labelSpanL="6" \n                    labelSpanM="6" \n                    labelSpanS="6" \n                    adjustLabelSpan="false"\n                    emptySpanXL="0" \n                    emptySpanL="0" \n                    emptySpanM="0" \n                    emptySpanS="0"\n                    singleContainerFullSize="false" /></f:layout><f:formContainers><f:FormContainer><f:formElements><f:FormElement label="{ovpResourceModel>showGlobalFilter}"><f:fields><Switch state="{/showGlobalFilters}" type="Default" change="onChange" /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LABEL_FILTER_ENTITY_TYPE}" visible="{/showGlobalFilters}"><f:fields><ComboBox \n                                    items="{path: \'/allEntityTypes\'}"\n                                    selectedKey= "{/globalFilterEntityType}"\n                                    forceSelection="false"\n                                    change="onChange" ><core:Item key="{name}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LABEL_LIVE_FILTER}" visible="{/showGlobalFilters}"><f:fields><Switch state="{/enableLiveFilter}"  change="onChange" type="Default"  /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LABEL_SMART_VARIANT}" visible="{/showGlobalFilters}"><f:fields><Switch state="{/smartVariantRequired}"  change="onChange" type="Default"  /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LABEL_CONTAINER_LAYOUT}"><f:fields><SegmentedButton selectedKey="{/containerLayout}" select="onChange" ><items><SegmentedButtonItem key="fixed" text="fixed" /><SegmentedButtonItem key="resizable" text="resizable" /></items></SegmentedButton></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LABEL_DATE_RANGE_TYPE}" visible="{/showGlobalFilters}"><f:fields><Switch state="{/useDateRangeType}"  change="onChange" type="Default"  /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LABEL_DATE_RELATIVE_FORMAT}"><f:fields><Switch state="{/showDateInRelativeFormat}"  change="onChange" type="Default"  /></f:fields></f:FormElement></f:formElements></f:FormContainer></f:formContainers></f:Form></VBox></mvc:View>',
	"sap/ovp/cards/rta/KPICardTable.fragment.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns="sap.m"><Toolbar><Title text="{ovpResourceModel>OVP_KEYUSER_KPI_TABLE}({/NoOfKPIItem})" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><SearchField \r\n            placeholder="{ovpResourceModel>OVP_KEYUSER_PLACEHOLDER_FOR_SEARCH}"\r\n            width="40%"\r\n            search="onSearch"\r\n            class="{= ${tableRows>/densityStyle} === \'compact\' ? \'sapUiSizeCompact\' : \'\'}"/></Toolbar><Table \r\n        id="sapOvpKPITable"\r\n        items="{path:\'/KPIData\', length:5}" \r\n        sticky="ColumnHeaders" \r\n        inset="false"\r\n        fixedLayout="false"><columns><Column id="sapOvpGroupTitle"><Text text="{ovpResourceModel>OVP_KEYUSER_KPI_GROUP_TITLE}"/></Column><Column id="sapOvpKPITitle" minScreenWidth="Tablet" demandPopin="true"><Text text="{ovpResourceModel>OVP_KEYUSER_KPI_TITLE}"/></Column></columns><items><ColumnListItem press="onItemPress" type="Active"><cells><Text text="{GroupTitle}"/><Text text="{KPITitle}"/></cells></ColumnListItem></items></Table></core:FragmentDefinition>',
	"sap/ovp/cards/rta/SelectIcons.view.xml":'<mvc:View \r\n    xmlns:mvc="sap.ui.core.mvc" \r\n    xmlns="sap.m" \r\n    xmlns:core="sap.ui.core"\r\n    controllerName="sap.ovp.cards.rta.SelectIcons"><Toolbar><Title text="{ovpResourceModel>OVP_KEYUSER_ICONS_DIALOG}({/NoOfIcons})" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><SearchField \r\n            placeholder="{ovpResourceModel>OVP_KEYUSER_PLACEHOLDER_FOR_SEARCH}" \r\n            width="40%" \r\n            search="filterTable"\r\n            class="{= ${tableRows>/densityStyle} === \'compact\' ? \'sapUiSizeCompact\' : \'\'}"/></Toolbar><ScrollContainer \r\n        id="iconsScrollContainer"\r\n        class="sapOvpScrollContainer"\r\n        width="100%"\r\n        horizontal="false"\r\n        vertical="true"\r\n        focusable="true"><Table \r\n            id="IconTable" \r\n            sticky="ColumnHeaders" \r\n            inset="false" \r\n            fixedLayout="false"\r\n            items="{/Icons}" \r\n            visible="{= ${/tableName} === \'IconTable\' ? true : false}"><columns><Column><Label text="{ovpResourceModel>OVP_KEYUSER_TABLE_TITLE_ICON}" /></Column><Column><Label text="{ovpResourceModel>OVP_KEYUSER_TABLE_TITLE_NAME}" /></Column></columns><items><ColumnListItem type="Active" press="onItemPress"><cells><core:Icon src="{Icon}"/><Text text="{Name}"/></cells></ColumnListItem></items></Table><Table \r\n            id="ImageTable" \r\n            inset="false" \r\n            fixedLayout="false"\r\n            items="{/Images}" \r\n            visible="{= ${/tableName} === \'ImageTable\' ? true : false}"><columns><Column><Label text="{ovpResourceModel>OVP_KEYUSER_TABLE_TITLE_IMAGE}" /></Column><Column><Label text="{ovpResourceModel>OVP_KEYUSER_TABLE_TITLE_NAME}" /></Column></columns><items><ColumnListItem type="Active" press="onItemPress"><cells><Image src="{Image}" width="3rem" height="3rem"/><Text text="{Name}"/></cells></ColumnListItem></items></Table></ScrollContainer></mvc:View>',
	"sap/ovp/cards/rta/SelectKPI.view.xml":'<mvc:View \r\n    xmlns:mvc="sap.ui.core.mvc" \r\n    xmlns="sap.m" \r\n    xmlns:core="sap.ui.core"\r\n    controllerName="sap.ovp.cards.rta.SelectKPI"><Toolbar><Title text="{ovpResourceModel>OVP_KEYUSER_KPI_TABLE}({/NoOfKPIItem})" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><SearchField \r\n            placeholder="{ovpResourceModel>OVP_KEYUSER_PLACEHOLDER_FOR_SEARCH}" \r\n            width="40%"\r\n            search="onSearch"\r\n            class="{= ${tableRows>/densityStyle} === \'compact\' ? \'sapUiSizeCompact\' : \'\'}"/></Toolbar><ScrollContainer \r\n        id="KPIItemScrollContainer"\r\n        class="sapOvpScrollContainer"\r\n        width="100%"\r\n        horizontal="false"\r\n        vertical="true"\r\n        focusable="true"><Table \r\n            id="KPITable" \r\n            sticky="ColumnHeaders" \r\n            inset="false" \r\n            fixedLayout="false"\r\n            items="{/KPIItem}"><columns><Column><Label text="{ovpResourceModel>OVP_KEYUSER_KPI_GROUP_TITLE}"/></Column><Column><Label text="{ovpResourceModel>OVP_KEYUSER_KPI_TITLE}"/></Column></columns><items><ColumnListItem type="Active" press="onItemPress"><cells><Text text="{GroupTitle}"/><Text text="{KPITitle}"/></cells></ColumnListItem></items></Table></ScrollContainer></mvc:View>',
	"sap/ovp/cards/rta/SelectLineItem.view.xml":'<mvc:View \r\n    xmlns:mvc="sap.ui.core.mvc" \r\n    xmlns="sap.m" \r\n    xmlns:core="sap.ui.core"\r\n    controllerName="sap.ovp.cards.rta.SelectLineItem"><Toolbar><Title text="{ovpResourceModel>OVP_KEYUSER_LINEITEM_ANNO}({/NoOfLineItem})" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><SearchField \r\n            placeholder="{ovpResourceModel>OVP_KEYUSER_PLACEHOLDER_FOR_SEARCH}" \r\n            width="40%" \r\n            search="filterTable"\r\n            class="{= ${tableRows>/densityStyle} === \'compact\' ? \'sapUiSizeCompact\' : \'\'}"/></Toolbar><ScrollContainer \r\n        id="lineItemScrollContainer"\r\n        class="sapOvpScrollContainer"\r\n        width="100%"\r\n        horizontal="false"\r\n        vertical="true"\r\n        focusable="true"><Table \r\n            id="LineItemTable" \r\n            sticky="ColumnHeaders" \r\n            inset="false" \r\n            fixedLayout="false"\r\n            items="{/lineItem}"><columns><Column><Label text="{ovpResourceModel>OVP_KEYUSER_LINEITEM_QUAL}" /></Column><Column><Label text="{ovpResourceModel>OVP_KEYUSER_VISIBLE_FIELDS}" /></Column></columns><items><ColumnListItem type="Active" press="onItemPress"><cells><Text text="{Label}"/><Text text="{VisibleFields}"/></cells></ColumnListItem></items></Table></ScrollContainer></mvc:View>',
	"sap/ovp/cards/rta/SelectLinks.view.xml":'<mvc:View \r\n    xmlns:mvc="sap.ui.core.mvc" \r\n    xmlns="sap.m" \r\n    xmlns:core="sap.ui.core"\r\n    controllerName="sap.ovp.cards.rta.SelectLinks"><Toolbar><Title text="{ovpResourceModel>OVP_KEYUSER_APPLICATIONS_DIALOG}({/NoOfLinks})" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><SearchField \r\n            placeholder="{ovpResourceModel>OVP_KEYUSER_PLACEHOLDER_FOR_SEARCH}" \r\n            width="40%" \r\n            search="filterTable"\r\n            class="{= ${tableRows>/densityStyle} === \'compact\' ? \'sapUiSizeCompact\' : \'\'}"/></Toolbar><ScrollContainer \r\n        id="linksScrollContainer"\r\n        class="sapOvpScrollContainer"\r\n        width="100%"\r\n        horizontal="false"\r\n        vertical="true"\r\n        focusable="true"><Table \r\n            id="LinkTable" \r\n            sticky="ColumnHeaders" \r\n            inset="false" \r\n            fixedLayout="false"\r\n            items="{/links}"><columns><Column><Label text="{ovpResourceModel>OVP_KEYUSER_TABLE_TITLE_APPLICATION_NAME}" /></Column><Column><Label text="{ovpResourceModel>OVP_KEYUSER_TABLE_TITLE_TECHNICAL_NAME}" /></Column></columns><items><ColumnListItem type="Active" press="onItemPress"><cells><Text text="{name}"/><Text text="{value}"/></cells></ColumnListItem></items></Table></ScrollContainer></mvc:View>',
	"sap/ovp/cards/rta/SettingsDialog.view.xml":'<mvc:View \n    xmlns:mvc="sap.ui.core.mvc" \n    xmlns="sap.m" \n    xmlns:core="sap.ui.core"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:l="sap.ui.layout"\n\tcontrollerName="sap.ovp.cards.rta.SettingsDialog"><OverflowToolbar \n        width="100%" \n        visible="{visibility>/viewSwitchEnabled}" \n        class="sapOvpSettingsDialogOverFlowToolbar sapUiSmallMarginTopBottom"><ToolbarSpacer/><Select enabled="{visibility>/showViewSwitch}"\n                    items="{\n                        path: \'/aViews\'\n                    }"\n                    selectedKey="{/selectedKey}"\n                    change="selectViewSwitch"><core:Item key="{key}" text="{text}"/></Select><Button \n                id="addView" \n                text="{ovpResourceModel>OVP_KEYUSER_ADD_VIEW_BUTTON}" \n                press="addView" \n                type="Transparent"/><Button \n                id="deleteView" \n                enabled="{visibility>/showViewName}" \n                type="Transparent"\n                text="{ovpResourceModel>OVP_KEYUSER_DELETE_VIEW_BUTTON}" \n                press="deleteView"/><ToolbarSpacer/></OverflowToolbar><template:if test="{= ${deviceSystemProperties>/phone}}" ><template:then><Carousel><pages><l:VerticalLayout><core:Fragment fragmentName="sap.ovp.cards.rta.SettingsDialogCardPreview" type="XML"/></l:VerticalLayout><l:VerticalLayout><core:Fragment fragmentName="sap.ovp.cards.rta.SettingsDialogForm" type="XML"/></l:VerticalLayout></pages></Carousel></template:then><template:else><ScrollContainer\n                id="SettingsDialogScrollContainerForForm"\n                class="sapOvpScrollContainer"\n                width="100%"\n                height="100%"\n                horizontal="false"\n                vertical="true"\n                focusable="true"><FlexBox id="dialogContainer" direction="{deviceMediaProperties>/deviceMedia}"><template:if test="{= !${ovpCardProperties>/addNewCard}}" ><VBox id="dialogCardVBox"><core:Fragment fragmentName="sap.ovp.cards.rta.SettingsDialogCardPreview" type="XML"/></VBox></template:if><VBox id="sapOvpSettingsForm"><core:Fragment fragmentName="sap.ovp.cards.rta.SettingsDialogForm" type="XML"/></VBox></FlexBox></ScrollContainer></template:else></template:if></mvc:View>',
	"sap/ovp/cards/rta/SettingsDialogCardPreview.fragment.xml":'<core:FragmentDefinition\r\n    xmlns:core="sap.ui.core"\r\n    xmlns="sap.m"><VBox class="sapUiSmallMarginTop sapUiSmallMarginBegin"><HBox id="dialogCardOverlay" class="dialogCardVBox dialogCardOverlay"><core:ComponentContainer \r\n                id="dialogCard" \r\n                busyIndicatorDelay="0" \r\n                busy="true" \r\n                visible="{visibility>/cardPreview}"/><IllustratedMessage\r\n                id="dialogCardNoPreview" \r\n                visible="{= !${visibility>/cardPreview}}"\r\n                class="sapOvpSettingsDialogErrorPreviewWidth"\r\n                illustrationType="sapIllus-UnableToLoad"\r\n                enableDefaultTitleAndDescription="false"\r\n                description=""/></HBox><HBox visible="{visibility>/showViewSwitch}"><Button \r\n                class="sapUiMediumMarginBottom" \r\n                enabled="{/isViewResetEnabled}"\r\n                press="resetView" \r\n                text="{ovpResourceModel>OVP_KEYUSER_RESET_VIEW_BUTTON}" \r\n                type="Transparent"/></HBox></VBox></core:FragmentDefinition>',
	"sap/ovp/cards/rta/SettingsDialogForm.fragment.xml":'<core:FragmentDefinition \r\n    xmlns:f="sap.ui.layout.form"\r\n    xmlns:core="sap.ui.core"\r\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" \r\n    xmlns="sap.m"\r\n    template:require="{\r\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'\r\n\t}"    \r\n><f:Form editable="true" core:require="{CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'}"><f:layout><f:ResponsiveGridLayout\r\n                labelSpanXL="12" \r\n                labelSpanL="12" \r\n                labelSpanM="12" \r\n                labelSpanS="12" \r\n                adjustLabelSpan="false"\r\n                emptySpanXL="0" \r\n                emptySpanL="0" \r\n                emptySpanM="0" \r\n                emptySpanS="0"\r\n                singleContainerFullSize="false" /></f:layout><f:formContainers><template:if test="{= !${ovpCardProperties>/addNewCard}}"><template:then><f:FormContainer id="sapOvpSettingsFormContainer"><f:formElements><template:if test="{= !(${ovpCardProperties>/bFioriToolsRTAMode} === true || ${ovpCardProperties>/layer} ===\'CUSTOMER_BASE\')}"><template:then><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_TITLE}" visible="{visibility>/title}"><f:fields><Input \r\n                                                id="sapOvpSettingsTitle" \r\n                                                value="{/title}" \r\n                                                change="validateInputField"\r\n                                                editable="true" \r\n                                                required="true" \r\n                                                valueState="{= ${/title} === \'\' ? \'Error\' : \'None\'}"\r\n                                                valueStateText="{= ${/title} === \'\' ? ${ovpResourceModel>OVP_KEYUSER_INPUT_ERROR_VALUE_STATE} : \'\'}" /></f:fields></f:FormElement></template:then><template:else><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_TITLE}" visible="{visibility>/title}"><f:fields><Input \r\n                                                id="sapOvpSettingsTitle" \r\n                                                value="{/title}" \r\n                                                change="updateCard"\r\n                                                editable="true" \r\n                                                showSuggestion="true"\r\n                                                required="true"\r\n                                                suggestionItems="{path: \'/ai18nPropertiesAndTitle\'}"><core:Item key="{value}" text="{value}"/></Input></f:fields></f:FormElement></template:else></template:if><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_DYNAMIC_SUBTITLE_SWITCH}" visible="{visibility>/dynamicSwitchSubTitle}"><f:fields><Switch \r\n                                        id="sapOvpSettingsSwitchSubTitle"\r\n                                        state="{visibility>/dynamicSwitchStateSubTitle}"\r\n                                        type="Default"  \r\n                                        change="updateCard" /></f:fields></f:FormElement><template:if test="{= ${ovpCardProperties>/bInsightEnabled} &amp;&amp; \r\n                                                (${ovpCardProperties>/template} === \'sap.ovp.cards.list\' || \r\n                                                ${ovpCardProperties>/template} === \'sap.ovp.cards.table\' || \r\n                                                ${ovpCardProperties>/template} === \'sap.ovp.cards.v4.table\' || \r\n                                                ${ovpCardProperties>/template} === \'sap.ovp.cards.charts.analytical\' ||\r\n                                                ${ovpCardProperties>/template} === \'sap.ovp.cards.v4.charts.analytical\')}" ><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_INSIGHTS_ENABLE}" visible="{visibility>/enableAddToInsights}"><f:fields><Switch \r\n                                            id="sapOvpSettingsSwitchInsights"\r\n                                            state="{/bInsightsEnable}"\r\n                                            type="Default"  \r\n                                            change="updateCard" /></f:fields></f:FormElement></template:if><template:if test="{= ${ovpCardProperties>/template} !== \'sap.ovp.cards.linklist\' &amp;&amp; ${ovpCardProperties>/template} !== \'sap.ovp.cards.v4.linklist\'}"><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SUBTITLE}" visible="{visibility>/dynamicSubTitle}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsDynamicSubTitle" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/dynamicSubTitle\'\r\n                                            }"\r\n                                            selectedKey= "{/dynamicSubtitleAnnotationPath}"\r\n                                            forceSelection="false"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_VIEW_NAME}" visible="{visibility>/showViewName}"><f:fields><Input \r\n                                            id="sapOvpSettingsViewName" \r\n                                            value="{/viewName}" \r\n                                            change="validateInputField"\r\n                                            required="true"\r\n                                            valueState="{= ${/viewName} === \'\' ? \'Error\' : \'None\'}"\r\n                                            valueStateText="{= ${/viewName} === \'\' ? ${ovpResourceModel>OVP_KEYUSER_INPUT_ERROR_VIEW_NAME} : \'\'}" /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SET_DEFAULT}" visible="{visibility>/showDefaultView}"><f:fields><Switch \r\n                                            id="sapOvpDefaultViewSwitch" \r\n                                            state="{/isDefaultView}" \r\n                                            change="updateCard"\r\n                                            type="Default"  /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_ENTITYSET}" visible="{visibility>/showEntitySet}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsEntitySet" width="100%"\r\n                                            items="{\r\n                                                path: \'/allEntitySet\'\r\n                                            }"\r\n                                            selectedKey= "{/entitySet}"\r\n                                            forceSelection="false"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement></template:if><template:if test="{= !(${ovpCardProperties>/bFioriToolsRTAMode} === true || ${ovpCardProperties>/layer} ===\'CUSTOMER_BASE\')}"><template:then><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SUBTITLE}" visible="{visibility>/subTitle}"><f:fields><Input \r\n                                                id="sapOvpSettingsSubTitle" \r\n                                                value="{/subTitle}" \r\n                                                change="updateCard"\r\n                                                editable="true" /></f:fields></f:FormElement></template:then><template:else><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SUBTITLE}" visible="{visibility>/subTitle}"><f:fields><Input \r\n                                                id="sapOvpSettingsSubTitle" \r\n                                                value="{/subTitle}" \r\n                                                change="updateCard"\r\n                                                editable="true" \r\n                                                showSuggestion="true"\r\n                                                suggestionItems="{path: \'/ai18nPropertiesAndSubTitle\'}"><core:Item key="{value}" text="{value}"/></Input></f:fields></f:FormElement></template:else></template:if><template:if test="{= ${ovpCardProperties>/template} !== \'sap.ovp.cards.linklist\' &amp;&amp; ${ovpCardProperties>/template} !== \'sap.ovp.cards.v4.linklist\'}" ><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_KPI_HEADER}" visible="{visibility>/kpiHeader}"><f:fields><Switch \r\n                                            id="sapOvpSettingsKPIHeaderSwitch"\r\n                                            state="{/hasKPIHeader}"\r\n                                            type="Default"  \r\n                                            change="updateCard" /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_KPI_Value}" visible="{visibility>/dataPoint}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsDataPoint" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/dataPoint\'\r\n                                            }"\r\n                                            selectedKey="{/dataPointAnnotationPath}"\r\n                                            forceSelection="false"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><template:if test="{= !(${ovpCardProperties>/bFioriToolsRTAMode} === true || ${ovpCardProperties>/layer} ===\'CUSTOMER_BASE\')}"><template:then><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_KPI_DESCRIPTION}" visible="{visibility>/valueSelectionInfo}"><f:fields><Input \r\n                                                    id="sapOvpSettingsValueSelectionInfo" \r\n                                                    value="{/valueSelectionInfo}" \r\n                                                    change="updateCard"\r\n                                                    editable="true" /></f:fields></f:FormElement></template:then><template:else><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_KPI_DESCRIPTION}" visible="{visibility>/valueSelectionInfo}"><f:fields><Input \r\n                                                    id="sapOvpSettingsValueSelectionInfo" \r\n                                                    value="{/valueSelectionInfo}" \r\n                                                    change="updateCard"\r\n                                                    editable="true"\r\n                                                    showSuggestion="true"\r\n                                                    suggestionItems="{path: \'/ai18nPropertiesAndValSelInfo\'}"><core:Item key="{value}" text="{value}"/></Input></f:fields></f:FormElement></template:else></template:if><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LIST_TYPE}" visible="{visibility>/listType}"><f:fields><Switch \r\n                                            id="sapOvpSettingsListType" \r\n                                            state="{/isExtendedList}" \r\n                                            change="updateCard"\r\n                                            type="Default"  /></f:fields></f:FormElement></template:if><f:FormElement label="{ovpCardProperties>/listFlavorName}" visible="{visibility>/listFlavor}"><f:fields><Switch \r\n                                            id="sapOvpSettingsListFlavorForList" \r\n                                            state="{/isBarList}" \r\n                                            type="Default"\r\n                                            change="updateCard" /></f:fields></f:FormElement><f:FormElement label="{ovpCardProperties>/listFlavorName}" visible="{visibility>/listFlavorForLinkList}"><f:fields><SegmentedButton \r\n                                            id="sapOvpSettingsListFlavorForLinkList" \r\n                                            select="updateCard"\r\n                                            selectedKey="{/listFlavor}" ><items><SegmentedButtonItem \r\n                                                    id="sapOvpSettingsListFlavorList" \r\n                                                    key="standard"\r\n                                                    text="{ovpResourceModel>OVP_KEYUSER_LIST_TEXT_SEG_BUTTON}" /><SegmentedButtonItem \r\n                                                    id="sapOvpSettingsListFlavorCarousel" \r\n                                                    key="carousel"\r\n                                                    text="{ovpResourceModel>OVP_KEYUSER_CAROUSEL_TEXT_SEG_BUTTON}" /></items></SegmentedButton></f:fields></f:FormElement><template:if test="{= ${ovpCardProperties>/template} !== \'sap.ovp.cards.linklist\' &amp;&amp; ${ovpCardProperties>/template} !== \'sap.ovp.cards.v4.linklist\'}" ><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SELECTION_PRESENTATION_VAR}" visible="{visibility>/selectionPresentationVariant}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsFilterAndPresentedBy" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/selectionPresentationVariant\'\r\n                                            }"\r\n                                            selectedKey= "{/selectionPresentationAnnotationPath}"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_KPI_ANNO}" visible="{visibility>/KPI}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsKPIAnnotation"\r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/KPI\'\r\n                                            }"\r\n                                            selectedKey="{/kpiAnnotationPath}"\r\n                                            change="updateCard"><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_TOLERANCE_HIGH}" visible="{visibility>/toleranceRangeHighValue}"><f:fields><Input \r\n                                                id="sapOvpSettingsToleranceRangeHighInput" \r\n                                                value="{/toleranceRangeHighValue}" \r\n                                                type="Number"\r\n                                                change="updateCard"\r\n                                                editable="true" /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_DEVIATION_HIGH}" visible="{visibility>/deviationRangeHighValue}"><f:fields><Input \r\n                                                id="sapOvpSettingsDeviationRangeHighInput" \r\n                                                value="{/deviationRangeHighValue}" \r\n                                                type="Number"\r\n                                                change="updateCard"\r\n                                                editable="true" /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_TOLERANCE_LOW}" visible="{visibility>/toleranceRangeLowValue}"><f:fields><Input \r\n                                                id="sapOvpSettingsToleranceRangeLowInput" \r\n                                                value="{/toleranceRangeLowValue}" \r\n                                                type="Number"\r\n                                                change="updateCard"\r\n                                                editable="true" /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_DEVIATION_LOW}" visible="{visibility>/deviationRangeLowValue}"><f:fields><Input \r\n                                                id="sapOvpSettingsDeviationRangeLowInput" \r\n                                                value="{/deviationRangeLowValue}" \r\n                                                type="Number"\r\n                                                change="updateCard"\r\n                                                editable="true" /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SELECTION_VAR}" visible="{visibility>/selectionVariantSPVorKPI}"><f:fields><Text \r\n                                            id="sapOvpSettingsFilterByAnalytical" \r\n                                            width="100%"\r\n                                            text="{parts:[{path:\'/selectionVariant\'}, {path:\'/selectionAnnotationPath\'}], formatter: \'CardAnnotationhelper.getAnnotationLabel\'}"></Text></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_PRESENTATION_VAR}" visible="{visibility>/presentationVariantSPVorKPI}"><f:fields><Text \r\n                                            id="sapOvpSettingsPresentedByAnalytical" \r\n                                            width="100%"\r\n                                            text="{parts:[{path:\'/presentationVariant\'}, {path:\'/presentationAnnotationPath\'}], formatter: \'CardAnnotationhelper.getAnnotationLabel\'}"></Text></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_IDENTIFICATION_ANNO}" visible="{visibility>/KPI}"><f:fields><Text \r\n                                            id="sapOvpSettingsIdentificationForKPI" \r\n                                            width="100%"\r\n                                            text="{parts:[{path:\'staticCardProperties>/links\'}, {path:\'/KPINav\'}], formatter: \'CardAnnotationhelper.getApplicationName\'}"></Text></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_TYPE_OF_CHART}" visible="{visibility>/chartSPVorKPI}"><f:fields><Text \r\n                                            id="sapOvpSettingsChartAnalytical" \r\n                                            width="100%"\r\n                                            text="{parts:[{path:\'/chart\'}, {path:\'/chartAnnotationPath\'}], formatter: \'CardAnnotationhelper.getAnnotationLabel\'}"></Text></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SELECTION_VAR}" visible="{visibility>/selectionVariant}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsFilterBy" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                                path: \'/selectionVariant\'\r\n                                                            }"\r\n                                            selectedKey= "{/selectionAnnotationPath}"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_PRESENTATION_VAR}" visible="{visibility>/presentationVariant}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsPresentedBy" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/presentationVariant\'\r\n                                            }"\r\n                                            selectedKey= "{/presentationAnnotationPath}"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LINEITEM_ANNO}" visible="{visibility>/lineItem}"><f:fields><Input \r\n                                            id="sapOvpSettingsLineItem"\r\n                                            value="{\r\n                                                path: \'/lineItemQualifier\'\r\n                                            }"\r\n                                            showValueHelp="true" \r\n                                            editable="true" \r\n                                            enabled="true" \r\n                                            valueHelpOnly="true"\r\n                                            valueHelpRequest="openLineItemValueHelpDialog" /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_IDENTIFICATION_ANNO}" visible="{visibility>/identification}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsIdentification" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/identification\'\r\n                                            }"\r\n                                            selectedKey= "{/identificationAnnotationPath}"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_TYPE_OF_CHART}" visible="{visibility>/chart}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsChart" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/chart\'\r\n                                            }"\r\n                                            forceSelection="false"\r\n                                            selectedKey= "{/chartAnnotationPath}"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement></template:if><template:if test="{= (${ovpCardProperties>/template} === \'sap.ovp.cards.linklist\' ||\r\n                                ${ovpCardProperties>/template} === \'sap.ovp.cards.v4.linklist\') &amp;&amp; \r\n                                ${ovpCardProperties>/staticContent}}" ><f:FormElement><f:fields><Toolbar><content><ToolbarSpacer /><Button \r\n                                                    id="moveToTheTop" \r\n                                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_TOP}" \r\n                                                    icon="sap-icon://collapse-group" \r\n                                                    press="onPressMoveToTheTop" \r\n                                                    enabled="{visibility>/moveToTheTop}" \r\n                                                    type="Transparent"/><Button \r\n                                                    id="moveUp" \r\n                                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_UP}" \r\n                                                    icon="sap-icon://navigation-up-arrow" \r\n                                                    press="onPressMoveUp" \r\n                                                    enabled="{visibility>/moveUp}" \r\n                                                    type="Transparent"/><Button \r\n                                                    id="moveDown" \r\n                                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_DOWN}" \r\n                                                    icon="sap-icon://navigation-down-arrow" \r\n                                                    press="onPressMoveDown" \r\n                                                    enabled="{visibility>/moveDown}" \r\n                                                    type="Transparent"/><Button \r\n                                                    id="moveToTheBottom" \r\n                                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_BOTTOM}" \r\n                                                    icon="sap-icon://expand-group" \r\n                                                    press="onPressMoveToTheBottom" \r\n                                                    enabled="{visibility>/moveToTheBottom}" \r\n                                                    type="Transparent"/><Button \r\n                                                    id="delete" \r\n                                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_DELETE}" \r\n                                                    icon="sap-icon://delete" \r\n                                                    press="onPressDelete" \r\n                                                    enabled="{visibility>/delete}" \r\n                                                    type="Transparent"/><Button \r\n                                                    id="add" \r\n                                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_ADD}" \r\n                                                    icon="sap-icon://add" \r\n                                                    press="onPressAdd" \r\n                                                    type="Transparent"/></content></Toolbar></f:fields></f:FormElement><f:FormElement><f:fields><core:Fragment fragmentName="sap.ovp.cards.rta.StaticLinkListCardLineItemsPanel" type="XML"/></f:fields></f:FormElement></template:if><template:if test="{= (${ovpCardProperties>/template} === \'sap.ovp.cards.charts.analytical\' ||\r\n                                ${ovpCardProperties>/template} === \'sap.ovp.cards.charts.smart.chart\') &amp;&amp; ${ovpCardProperties>/NewKPICard}}" ><f:FormElement><f:fields><core:Fragment fragmentName="sap.ovp.cards.rta.KPICardTable" type="XML"/></f:fields></f:FormElement><f:FormElement><f:fields><FlexBox justifyContent="End"><Link  text="{ovpResourceModel>OVP_KEYUSER_KPI_LINK}({/NoKPI})" press="onSeePress" \r\n                                            reactiveAreaMode="Overlay"/></FlexBox></f:fields></f:FormElement></template:if><template:if test="{= ${ovpCardProperties>/layoutDetail} === \'resizable\'}"><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_STOP_RESIZE}" visible="{visibility>/stopResizing}"><f:fields><Switch \r\n                                            id="sapOvpSettingsStopResize"\r\n                                            state="{= !${/stopResizing}}"\r\n                                            type="Default" \r\n                                            change="onResizingChange"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_DEFAULT_NUMBER_OF_COLUMNS}" visible="{visibility>/noOfColumns}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsNumberOfColumns" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/NoOfColumns\'\r\n                                            }"\r\n                                            forceSelection="false"\r\n                                            selectedKey= "{/defaultSpan/cols}"\r\n                                            change="onNumberOfColumnsChanged" ><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_DEFAULT_NUMBER_OF_ROWS}" visible="{visibility>/noOfRows}"><f:fields><template:if test="{= ${ovpCardProperties>/template} === \'sap.ovp.cards.charts.analytical\' ||\r\n                                            ${ovpCardProperties>/template} === \'sap.ovp.cards.charts.smart.chart\' ||\r\n                                            ${ovpCardProperties>/template} === \'sap.ovp.cards.charts.bubble\' ||\r\n                                            ${ovpCardProperties>/template} === \'sap.ovp.cards.charts.donut\' ||\r\n                                            ${ovpCardProperties>/template} === \'sap.ovp.cards.charts.line\' ||\r\n                                            ${ovpCardProperties>/template} === \'sap.ovp.cards.linklist\' ||\r\n                                            ${ovpCardProperties>/template} === \'sap.ovp.cards.v4.linklist\'}" ><template:then><ComboBox \r\n                                                    id="sapOvpSettingsNumberOfRows" \r\n                                                    width="100%"\r\n                                                    items="{\r\n                                                        path: \'/NoOfRows\'\r\n                                                    }"\r\n                                                    forceSelection="false"\r\n                                                    selectedKey= "{/defaultSpan/rows}"\r\n                                                    change="onNumberOfRowsChanged" ><core:Item key="{value}" text="{name}"/></ComboBox></template:then><template:else><StepInput\r\n                                                    id="sapOvpSettingsNumberOfRows"\r\n                                                    value="{/defaultSpan/rows}"\r\n                                                    min="0"\r\n                                                    max="99"\r\n                                                    valueStateText="Number of Rows should be between 0 and 99"\r\n                                                    change="onNumberOfRowsChanged"/></template:else></template:if></f:fields></f:FormElement></template:if><template:if test="{= (${ovpCardProperties>/bFioriToolsRTAMode} === true || ${ovpCardProperties>/layer} ===\'CUSTOMER_BASE\')}"><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_AUTHORIZATION}"><f:fields><Input \r\n                                            id="sapOvpCardProperiesAuthorization" \r\n                                            value="{/requireAppAuthorization}" \r\n                                            change="updateProperty" \r\n                                            width="100%"\r\n                                            editable="true"/></f:fields></f:FormElement><f:FormElement><f:fields><CheckBox \r\n                                            id="sapOVPAddODataSelect" \r\n                                            width="100%" \r\n                                            visible="{visibility>/addODataSelect}"\r\n                                            text="{ovpResourceModel>OVP_KEYUSER_ADDODATASELECT}"\r\n                                            tooltip="{ovpResourceModel>OVP_KEYUSER_ADDODATASELECT}"\r\n                                            selected="{/addODataSelectCheckBox}"\r\n                                            select="updateProperty"></CheckBox></f:fields></f:FormElement><f:FormElement><f:fields><CheckBox \r\n                                            id="sapOVPEnableCustomParameter" \r\n                                            width="100%"\r\n                                            text="{ovpResourceModel>OVP_DTA_CUSTOM_PARAMS}"\r\n                                            selected="{/addCustomParameters}"\r\n                                            select="updateProperty"></CheckBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_CUSTOM_PARAMETERS}" visible="{/addCustomParameters}"><f:fields><Input \r\n                                            id="sapOVPCustomParams" \r\n                                            value="{/customParams}" \r\n                                            change="validateInputField"\r\n                                            editable="true"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_STATIC_PARAMETERS}" visible="{/addCustomParameters}"><f:fields><core:Fragment fragmentName="sap.ovp.cards.rta.AddStaticParameters" type="XML"/></f:fields></f:FormElement><f:FormElement visible="{visibility>/addCustomActions}"><f:fields><CheckBox \r\n                                            id="sapOVPEnableCustomActions"\r\n                                            width="100%"\r\n                                            text="{ovpResourceModel>OVP_DTA_CUSTOM_Actions}"\r\n                                            selected="{/addCustomActions}"\r\n                                            select="updateProperty" ></CheckBox></f:fields></f:FormElement><f:FormElement visible="{/addCustomActions}"><f:fields><core:Fragment fragmentName="sap.ovp.cards.rta.AddCustomActions" type="XML"/></f:fields></f:FormElement></template:if><template:if test="{= (${ovpCardProperties>/bFioriToolsRTAMode} !== true || ${ovpCardProperties>/layer} !==\'CUSTOMER_BASE\') &amp;&amp; ${ovpCardProperties>/NewKPICard}}"><f:FormElement><f:fields><CheckBox \r\n                                            id="sapOVPEnableCustomParameter"\r\n                                            width="100%"\r\n                                            text="{ovpResourceModel>OVP_DTA_CUSTOM_PARAMS}"\r\n                                            selected="{/addCustomParameters}"\r\n                                            select="updateProperty"></CheckBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_STATIC_PARAMETERS}" visible="{/addCustomParameters}"><f:fields><core:Fragment fragmentName="sap.ovp.cards.rta.AddStaticParameters" type="XML"/></f:fields></f:FormElement></template:if></f:formElements></f:FormContainer></template:then><template:else><f:FormContainer><f:formElements><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_DATASOURCE}" visible="{visibility>/dataSource}"><f:fields><RadioButtonGroup id="useDatasource_RadioButtonGroup" columns="2" width="100%" class="sapUiMediumMarginBottom"><buttons><RadioButton id="sapOVPExistingDataSource" text="{ovpResourceModel>OVP_KEYUSER_EXISTING_DS}" selected="true" select="updateProperty"/><RadioButton id="sapOVPNewDataSource" text="{ovpResourceModel>OVP_KEYUSER_NEW_DS}" selected="false" select="updateProperty"/></buttons></RadioButtonGroup></f:fields></f:FormElement><f:FormElement visible="{visibility>/dataSourceExisting}"><f:fields><ComboBox \r\n                                            id="sapOVPDataSourceExistingComboBox" \r\n                                            width="100%"\r\n                                            items="{path: \'/datasources\'}"\r\n                                            change="onDatasourceComboboxChanged" \r\n                                            selectedKey= "{/datasSourceExisting}"\r\n                                            visible="{visibility>/dataSourceExisting}"><core:Item key="{Title}" text="{Title}"/></ComboBox></f:fields></f:FormElement><f:FormElement visible="{visibility>/dataSourceNew}"><f:fields><Input \r\n                                            id="sapOVPDataSourceNewInput" \r\n                                            value="{/datasSourceNew}" \r\n                                            change="onDatasourceComboboxChanged"\r\n                                            editable="true" \r\n                                            showSuggestion="true"\r\n                                            required="true"\r\n                                            suggestionItems="{path: \'/datasources\'}"\r\n                                            width="100%"\r\n                                            visible="{visibility>/dataSourceNew}"><core:Item key="{Title}" text="{Title}"/></Input></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>SELECTCARDTYPEWIZARDSTEP_TITLE_LABEL}" visible="{visibility>/selectCardType}"><f:fields><ComboBox \r\n                                            id="sapOVPCardType" \r\n                                            width="100%"\r\n                                            items="{path: \'/cardType\'}"\r\n                                            selectedKey="{/template}"\r\n                                            selectionChange="onCardTypeSelected" ><core:Item key="{template}" text="{text}"/></ComboBox></f:fields></f:FormElement><f:FormElement visible="{visibility>/addKPIHeader}"><f:fields><CheckBox \r\n                                            id="sapOVPAddKpiCheckBoxID" \r\n                                            width="100%" \r\n                                            text="{ovpResourceModel>CARD_CUSTOMIZATION_ADD_KPI_HEADER_LABEL}"\r\n                                            tooltip="{ovpResourceModel>CARD_CUSTOMIZATION_ADD_KPI_HEADER_TOOLTIP}"\r\n                                            selected="{/addKPIHeaderCheckBox}"\r\n                                            select="updateProperty"></CheckBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>CARD_ENTITYSET}" visible="{visibility>/setEntitySet}"><f:fields><ComboBox \r\n                                            id="sapOVPEntitySetList" \r\n                                            width="100%" \r\n                                            required="true"\r\n                                            items="{path: \'/allEntitySet\'}"\r\n                                            change="updateProperty" \r\n                                            forceSelection="false"\r\n                                            selectedKey= "{/entitySet}"><core:Item key="{entityType}" text="{value}"/></ComboBox></f:fields></f:FormElement></f:formElements></f:FormContainer><f:FormContainer title="{ovpResourceModel>OVP_KEYUSER_GENERAL}" visible="{visibility>/setGeneralCardProperties}"><f:formElements><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_TITLE}"><f:fields><Input \r\n                                        id="sapOvpCardTitle" \r\n                                        value="{/title}" \r\n                                        change="updateProperty"\r\n                                        editable="true" \r\n                                        required="true"\r\n                                        showSuggestion="true"\r\n                                        suggestionItems="{path: \'/ai18nProperties\'}"><core:Item key="{key}" text="{value}"/></Input></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SUBTITLE}"><f:fields><Input \r\n                                        id="sapOvpCardSubTitle" \r\n                                        value="{/subTitle}" \r\n                                        change="updateProperty"\r\n                                        required="{visibility>/requiredSubTitle}"\r\n                                        editable="true" \r\n                                        showSuggestion="true"\r\n                                        suggestionItems="{path: \'/ai18nProperties\'}"><core:Item key="{value}" text="{value}"/></Input></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_AUTHORIZATION}"><f:fields><Input \r\n                                        id="sapOvpCardProperiesAuthorization" \r\n                                        value="{/requireAppAuthorization}" \r\n                                        change="updateProperty" \r\n                                        width="100%"\r\n                                        editable="true"/></f:fields></f:FormElement></f:formElements></f:FormContainer><f:FormContainer title="{ovpResourceModel>OVP_KEYUSER_ANNOTATIONS}" visible="{visibility>/setAnnotationCardProperties}"><f:formElements><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_KPI_ANNO_PATH}" visible="{visibility>/KPI}"><f:fields><ComboBox \r\n                                            id="sapOvpKpiAnnotationPath" \r\n                                            width="100%"\r\n                                            items="{path: \'/KPI\'}"\r\n                                            selectedKey="{/kpiAnnotationPath}"\r\n                                            change="updateProperty"><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_IDENTIFICATION}" visible="{visibility>/identification}"><f:fields><ComboBox \r\n                                        id="sapOVPIdentification" \r\n                                        width="100%"\r\n                                        items="{path: \'/identification\'}"\r\n                                        selectedKey="{/identificationAnnotationPath}"\r\n                                        change="updateProperty"><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SELECTIONPRESENTATIONVARIANT}" visible="{visibility>/selectionPresentationVariant}"><f:fields><ComboBox \r\n                                        id="sapOVPSelectionPresentationVariant" \r\n                                        width="100%"\r\n                                        items="{path: \'/selectionPresentationVariant\'}"\r\n                                        selectedKey="{/selectionPresentationAnnotationPath}"\r\n                                        change="updateProperty" ><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SELECTIONVARIANT}" visible="{visibility>/selectionVariant}"><f:fields><ComboBox \r\n                                        id="sapOVPSelectionVariant" \r\n                                        width="100%"\r\n                                        items="{path: \'/selectionVariant\'}"\r\n                                        selectedKey="{/selectionAnnotationPath}"\r\n                                        change="updateProperty" ><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_PRESENTATIONVARIANT}" visible="{visibility>/presentationVariant}"><f:fields><ComboBox \r\n                                        id="sapOVPPresentationVariant" \r\n                                        width="100%"\r\n                                        items="{path: \'/presentationVariant\'}"\r\n                                        selectedKey="{/presentationAnnotationPath}"\r\n                                        change="updateProperty" ><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_ANNOTATIONPATH}" visible="{visibility>/lineItem}"><f:fields><ComboBox \r\n                                        id="sapOVPAnnotationPath" \r\n                                        width="100%"\r\n                                        items="{path: \'/lineItem\'}"\r\n                                        selectedKey="{/annotationPath}"\r\n                                        change="updateProperty" ><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_DATAPOINT}" visible="{visibility>/dataPoint}"><f:fields><ComboBox \r\n                                            id="sapOvpDataPoint" \r\n                                            width="100%" \r\n                                            required="true"\r\n                                            items="{path: \'/dataPoint\'}"\r\n                                            selectedKey="{/dataPointAnnotationPath}"\r\n                                            change="updateProperty" ><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_DATA_POINT_SELMODE}" visible="{visibility>/dataPointSelectionMode}"><f:fields><ComboBox \r\n                                        id="sapOVPDataPointSelectionMode" \r\n                                        width="100%"\r\n                                        items="{path: \'/navigation\'}"\r\n                                        selectedKey="{/navigationPath}"\r\n                                        change="updateProperty" ><core:Item key="{key}" text="{name}"/></ComboBox></f:fields></f:FormElement></f:formElements></f:FormContainer><f:FormContainer title="{ovpResourceModel>OVP_KEYUSER_CARDPROPERTIES}" visible="{visibility>/setCardProperties}"><f:formElements><f:FormElement><f:fields><CheckBox \r\n                                        id="sapOVPAddODataSelect" \r\n                                        width="100%" \r\n                                        visible="{visibility>/addODataSelect}"\r\n                                        text="{ovpResourceModel>OVP_KEYUSER_ADDODATASELECT}"\r\n                                        tooltip="{ovpResourceModel>OVP_KEYUSER_ADDODATASELECT}"\r\n                                        selected="{/addODataSelectCheckBox}"\r\n                                        select="updateProperty"></CheckBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LISTTYPE}" visible="{visibility>/listFlavorForLinkList}"><f:fields><ComboBox \r\n                                        id="sapOVPLinkListFlavor" \r\n                                        width="100%"\r\n                                        items="{path: \'/aLinkListFlavour\'}"\r\n                                        selectedKey="{/listFlavor}"\r\n                                        change="updateProperty"\r\n                                        required="true"><core:Item key="{key}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LISTTYPE}" visible="{visibility>/listType}"><f:fields><ComboBox \r\n                                        id="sapOVPListType" \r\n                                        width="100%"\r\n                                        items="{path: \'/aListType\'}"\r\n                                        selectedKey="{/listType}"\r\n                                        change="updateProperty" ><core:Item key="{key}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LISTFLAVOR}" visible="{visibility>/listFlavor}"><f:fields><ComboBox \r\n                                        id="sapOVPListFlavor" \r\n                                        width="100%"\r\n                                        items="{path: \'/aListFlavour\'}"\r\n                                        selectedKey="{/listFlavor}"\r\n                                        change="updateProperty" ><core:Item key="{key}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_VALUESELECTIONINFO}" visible="{visibility>/valueSelectionInfo}"><f:fields><Input \r\n                                        id="sapOvpValueSelectionInfo" \r\n                                        value="{/valueSelectionInfo}" \r\n                                        change="updateProperty"\r\n                                        required="true"\r\n                                        editable="true"\r\n                                        showSuggestion="true"\r\n                                        suggestionItems="{path: \'/ai18nProperties\'}"><core:Item key="{key}" text="{value}"/></Input></f:fields></f:FormElement></f:formElements></f:FormContainer></template:else></template:if></f:formContainers></f:Form></core:FragmentDefinition>',
	"sap/ovp/cards/rta/StaticLinkListCardLineItemsPanel.fragment.xml":'<core:FragmentDefinition \r\n    xmlns:core="sap.ui.core" \r\n    xmlns:f="sap.ui.layout.form"\r\n    xmlns="sap.m"\r\n><ScrollContainer core:require="{LinkListAnnotationhelper: \'sap/ovp/cards/linklist/AnnotationHelper\'}"\r\n        id="scrollContainer"\r\n        class="sapOvpScrollContainer"\r\n        height="20rem"\r\n        width="100%"\r\n        horizontal="false"\r\n        vertical="true"\r\n        focusable="true"><List \r\n            id="sapOvpStaticLinkListLineItem" \r\n            class="sapOvpSettingsDialogCustomList"\r\n            items="{/staticContent}"\r\n            selectionChange="onSelectionChange"\r\n            mode="SingleSelectLeft"\r\n            includeItemInSelection="true"><items><CustomListItem type="Active"><HBox><VBox \r\n                            width="30%" \r\n                            visible="{= !${deviceSystemProperties>/phone}}"\r\n                            alignItems="Center"\r\n                            justifyContent="Center"><HBox><Image \r\n                                    class="sapUiSmallMargin"\r\n                                    visible="{= !!${imageUri} &amp;&amp; ${path: \'imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'} === true}"\r\n                                    alt="{imageAltText}"\r\n                                    tooltip="{toolTip}" \r\n                                    densityAware="true"\r\n                                    width="4rem" \r\n                                    height="4rem"\r\n                                    backgroundPosition="center center" \r\n                                    mode="Background"\r\n                                    src="{parts: [{path: \'/\'}, {path: \'imageUri\'}], formatter: \'LinkListAnnotationhelper.getImageUrl\'}"/><VBox \r\n                                    visible="{= !!${imageUri} &amp;&amp; ${path: \'imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'} === false}"\r\n                                    class="sapUiSmallMargin sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemIconCozy\' : \'sapOvpLinkListItemIconCompact\' }"><FlexBox height="3rem"><core:Icon \r\n                                            class="sapOvpLinkListImageCenter"\r\n                                            tooltip="{toolTip}" \r\n                                            useIconTooltip="false"\r\n                                            size="3rem" src="{imageUri}"/></FlexBox></VBox><VBox visible="{= !${imageUri}}"\r\n                                      class="sapUiSmallMargin sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemIconCozy\' : \'sapOvpLinkListItemIconCompact\' }"><FlexBox height="3rem"><core:Icon \r\n                                            class="sapOvpLinkListImageCenter"\r\n                                            tooltip="{toolTip}" \r\n                                            useIconTooltip="false"\r\n                                            size="3rem" \r\n                                            src="sap-icon://background"/></FlexBox></VBox></HBox><HBox visible="{parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}], formatter: \'LinkListAnnotationhelper.isVisible\'}"><Button \r\n                                    class="sapOvpSettingsMiniMarginBeginEnd" \r\n                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_CHANGE_VISUAL}" \r\n                                    icon="sap-icon://edit" \r\n                                    press="onChangeVisualPress" \r\n                                    enabled="true" \r\n                                    type="Transparent"/><Button \r\n                                    class="sapOvpSettingsMiniMarginBeginEnd" \r\n                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_REMOVE_VISUAL}" \r\n                                    icon="sap-icon://delete" \r\n                                    press="onRemoveVisualPress"\r\n                                    enabled="{parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}, {path:\'visibility>/removeVisual\'}], formatter: \'LinkListAnnotationhelper.isVisible\'}"\r\n                                    type="Transparent"/></HBox></VBox><VBox><f:Form editable="true"><f:layout><f:ResponsiveGridLayout \r\n                                        labelSpanXL="12"\r\n                                        labelSpanL="12" \r\n                                        labelSpanM="12" \r\n                                        labelSpanS="12" \r\n                                        adjustLabelSpan="false"\r\n                                        emptySpanXL="0" \r\n                                        emptySpanL="0" \r\n                                        emptySpanM="0" \r\n                                        emptySpanS="0"\r\n                                        singleContainerFullSize="false" /></f:layout><f:formContainers><f:FormContainer><f:formElements><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_TITLE_FOR_LINK}" visible="{visibility>/lineItemTitle}"><f:fields><Input \r\n                                                        id="sapOvpSettingsLineItemTitle" \r\n                                                        value="{title}" \r\n                                                        change="validateInputField"\r\n                                                        required="true" \r\n                                                        valueState="{= ${title} === \'\' ? \'Error\' : \'None\'}"\r\n                                                        valueStateText="{= ${title} === \'\' ? ${ovpResourceModel>OVP_KEYUSER_INPUT_ERROR_RECORD_TITLE} : \'\'}"/></f:fields></f:FormElement><f:FormElement \r\n                                                label="{ovpResourceModel>OVP_KEYUSER_SUBTITLE_FOR_LINK}" \r\n                                                visible="{parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}, {path:\'visibility>/lineItemSubTitle\'}], formatter: \'LinkListAnnotationhelper.isVisible\'}"><f:fields><Input \r\n                                                        id="sapOvpSettingsLineItemSubTitle" \r\n                                                        value="{subTitle}" \r\n                                                        change="updateCard"/></f:fields></f:FormElement><f:FormElement \r\n                                                label="{ovpResourceModel>OVP_KEYUSER_LINK_TYPE}" \r\n                                                visible="{parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}], formatter: \'LinkListAnnotationhelper.isVisible\'}"><f:fields><RadioButtonGroup \r\n                                                        columns="2" \r\n                                                        select="onLinkSourceChange"\r\n                                                        selectedIndex="{= ${parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}, {path:\'visibility>/staticLink\'}], formatter: \'LinkListAnnotationhelper.isVisible\'} === true ? 1 : 0}"><buttons><RadioButton text="{ovpResourceModel>OVP_KEYUSER_APPLICATION_TEXT_RAD_BUTTON}"/><RadioButton text="{ovpResourceModel>OVP_KEYUSER_URL_TEXT_RAD_BUTTON}"/></buttons></RadioButtonGroup></f:fields></f:FormElement><f:FormElement \r\n                                                label="{ovpResourceModel>OVP_KEYUSER_LINKS}"\r\n                                                visible="{parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}, {path:\'visibility>/staticLink\'}], formatter: \'LinkListAnnotationhelper.isVisible\'}"><f:fields><Input \r\n                                                        value="{targetUri}" \r\n                                                        change="onExternalUrlChange"\r\n                                                        required="true" \r\n                                                        valueState="{= ${path: \'targetUri\', formatter: \'LinkListAnnotationhelper.isValidURL\'} === false ? \'Error\' : \'None\'}"\r\n                                                        valueStateText="{= ${path: \'targetUri\', formatter: \'LinkListAnnotationhelper.isValidURL\'} === false ? ${ovpResourceModel>OVP_KEYUSER_INPUT_ERROR_RECORD_URL} : \'\'}"/></f:fields></f:FormElement><f:FormElement \r\n                                                label="{ovpResourceModel>OVP_KEYUSER_LINKS}"\r\n                                                visible="{parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}, {path:\'visibility>/links\'}], formatter: \'LinkListAnnotationhelper.isVisible\'}"><f:fields><Input \r\n                                                        value="{parts:[{path:\'staticCardProperties>/links\'}, {path:\'semanticObject\'}, {path:\'action\'}], formatter: \'LinkListAnnotationhelper.getApplicationName\'}"\r\n                                                        showValueHelp="true" \r\n                                                        editable="true" \r\n                                                        enabled="true" \r\n                                                        valueHelpOnly="true" \r\n                                                        required="true"\r\n                                                        valueHelpRequest="createValueHelpDialogForInternalUrl"/></f:fields></f:FormElement><f:FormElement><f:fields><FlexBox justifyContent="End"><Link \r\n                                                            text="{= !${parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}], formatter: \'LinkListAnnotationhelper.isVisible\'} ? ${ovpResourceModel>OVP_KEYUSER_SHOW_MORE_LINK}: ${ovpResourceModel>OVP_KEYUSER_SHOW_LESS_LINK}}"\r\n                                                            press="onShowMorePress"\r\n                                                            reactiveAreaMode="Overlay"/></FlexBox></f:fields></f:FormElement></f:formElements></f:FormContainer></f:formContainers></f:Form></VBox></HBox></CustomListItem></items></List></ScrollContainer></core:FragmentDefinition>',
	"sap/ovp/cards/stack/Stack.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:ovp="sap.ovp.ui"><VBox id="stackContent" class="sapOvpStackCardContent" justifyContent="SpaceBetween"><customData><ovp:CustomData key="tabindex" value="0" writeToDom="true"/><ovp:CustomData key="role" value="button" writeToDom="true"/></customData><Label id="stackSize" class="sapOvpStackCardSize"><customData><ovp:CustomData key="role" value="" writeToDom="true"/></customData></Label><Text id="stackTotalSize" class="sapOvpStackCardTotalSize"/><core:Icon \n            id="StackCardIcon" \n            class="sapOvpStackCardIcon" \n            src="sap-icon://dimension" \n            useIconTooltip="false"></core:Icon></VBox></core:FragmentDefinition>\n',
	"sap/ovp/cards/table/Table.fragment.xml":'<core:FragmentDefinition\r\n    xmlns="sap.m"\r\n    xmlns:core="sap.ui.core"\r\n    xmlns:build="sap.build"\r\n    xmlns:ovp="sap.ovp.ui"\r\n    xmlns:sfi="sap.ui.comp.smartfield"\r\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\r\n    template:require="{\r\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'\r\n\t}"\r\n><Table \r\n        core:require="{CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'}"\r\n        id="ovpTable" \r\n        class="ovpTableClass cardType"\r\n        items="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'CardAnnotationhelper.formatItems\'}"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>tableCard}" writeToDom="true"/></customData><template:if test="{= ${ovpCardProperties>/layoutDetail} === \'resizable\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.table.TableDashBoardLayout" type="XML"/></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.table.TableEasyScanLayout" type="XML"/></template:else></template:if></Table></core:FragmentDefinition>',
	"sap/ovp/cards/table/TableDashBoardLayout.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:navpopover="sap.ui.comp.navpopover"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n        ModelAnnotationhelper: \'sap/ui/model/odata/AnnotationHelper\'\n\t}"    \n><template:with \n        path=\'ovpCardProperties>/annotationPath\'\n        helper="CardAnnotationhelper.resolveEntityTypePath" \n        var=\'eachItem\'><template:with  \n            path="eachItem>" \n            helper="CardAnnotationhelper.removeDuplicateDataField" \n            var="lineItem"><columns><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField"><template:if test="{= ${dataField>com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/High\'}"><template:then><template:if test="{= ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                            styleClass="sapTableColumnHide" \n                                            visible="false" \n                                            hAlign="{= ${path: \'dataField>\', formatter: \'CardAnnotationhelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                                text="{path: \'dataField>\', formatter: \'CardAnnotationhelper.getLabelForDataItem\'}"\n                                                wrapping="true"\n                                                wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                                styleClass="sapTableColumnHide" \n                                                visible="false" \n                                                hAlign="{= ${path: \'dataField>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'Left\' : ${dataField>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                                        class="displayBlock {= ${path: \'dataField>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'textAlignLeft\' : ${dataField>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                                        text="{path: \'dataField>\', formatter: \'CardAnnotationhelper.getLabelForDataItem\'}"\n                                                        wrapping="true"\n                                                        wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField1"><template:if test="{= ${dataField1>com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Medium\'}"><template:then><template:if test="{= ${dataField1>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField1>\', formatter: \'CardAnnotationhelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                            text="{path: \'dataField1>\', formatter: \'CardAnnotationhelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField1>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField1>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'Left\' : ${dataField1>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                            class="displayBlock {= ${path: \'dataField1>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'textAlignLeft\' : ${dataField1>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                            text="{path: \'dataField1>\', formatter: \'CardAnnotationhelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField2"><template:if test="{= ${dataField2>com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Low\'}"><template:then><template:if test="{= ${dataField2>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField2>\', formatter: \'CardAnnotationhelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                            text="{path: \'dataField2>\', formatter: \'CardAnnotationhelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField2>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField2>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'Left\' : ${dataField2>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                            class="displayBlock {= ${path: \'dataField2>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'textAlignLeft\' : ${dataField2>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                            text="{path: \'dataField2>\', formatter: \'CardAnnotationhelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField3"><template:if test="{=  !${dataField3>com.sap.vocabularies.UI.v1.Importance/EnumMember}}"><template:then><template:if test="{= ${dataField3>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField3>\', formatter: \'CardAnnotationhelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                            text="{path: \'dataField3>\', formatter: \'CardAnnotationhelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField3>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField3>\', \n                                            formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\'? \'Left\':\n                                            ${dataField3>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                            class="displayBlock {= ${path: \'dataField3>\', \n                                                formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\'? \'textAlignLeft\':\n                                                ${dataField3>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                            text="{path: \'dataField3>\', formatter: \'CardAnnotationhelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat></columns><items><ColumnListItem\n                    core:require="{CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'}"\n                    id = "tableItem"\n                    type="Active"\n                    press="onColumnListItemPress"><cells><template:repeat \n                            list="{path:\'lineItem>\'}" \n                            var="dataField4"><template:if test="{= ${dataField4>com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/High\'}"><template:then><template:if test="{= ${dataField4>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if\n                                                test="{= (${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getFirstDataFieldName\'} === ${dataField4>Label/String} &amp;&amp; ${ovpCardProperties>/showLineItemDetail})}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.LineItemDetails" type="XML"/><Link\n                                                            class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                            text="{path: \'dataField4>\', formatter: \'CardAnnotationhelper.formatDataFieldValueGeneric\'}"\n                                                            press="onContactDetailsLinkPress"\n                                                            reactiveAreaMode="Overlay"></Link></VBox></template:then><template:elseif\n                                                    test="{parts:[{path:\'entitySet>\'}, {path:\'dataField4>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"><navpopover:SmartLink\n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                        text="{path: \'dataField4>\', formatter: \'CardAnnotationhelper.formatDataFieldValueGeneric\'}"\n                                                        semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField4>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                        fieldName="{parts:[{path:\'entitySet>\'}, {path:\'dataField4>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                        contactAnnotationPath="{path: \'dataField4>\', formatter: \'CardAnnotationhelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                                                        forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'CardAnnotationhelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:elseif><template:else><Text \n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField4>\', formatter: \'CardAnnotationhelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField4>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField4>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                        path="dataField4>Target" \n                                                        helper="ModelAnnotationhelper.resolvePath" \n                                                        var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n                                                                binding="{= ${ path: \'dataField4>Target/AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField4>Target/AnnotationPath\'}.slice(0, ${ path: \'dataField4>Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{path: \'contact>fn\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                                press="onContactDetailsLinkPress"\n                                                                reactiveAreaMode="Overlay"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField4>\', formatter: \'CardAnnotationhelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><ObjectStatus class="{= ${path: \'dataField4>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                                        text="{path: \'dataField4>\', formatter: \'CardAnnotationhelper.formatDataPointValue\'}" \n                                                        state="{path: \'dataField4>\', formatter: \'CardAnnotationhelper.formatDataPointStateGeneric\'}"/></template:elseif><template:else><ObjectNumber\n                                                        class="{= ${path: \'dataField4>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} + \' sapOvpObjectNumber\'}"\n                                                        number="{parts:[{path:\'dataField4>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'CardAnnotationhelper.formatDataPointValue\'}"\n                                                        unit="{parts:[{path:\'dataField4>\'}], formatter: \'CardAnnotationhelper.formatUnit\'}"\n                                                        state="{path: \'dataField4>\', formatter: \'CardAnnotationhelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat list="{path:\'lineItem>\'}" var="dataField5"><template:if\n                                    test="{= ${dataField5>com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Medium\'}"><template:then><template:if\n                                            test="{= ${dataField5>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if\n                                                    test="{parts:[{path:\'entitySet>\'}, {path:\'dataField5>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink\n                                                            class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                            text="{path: \'dataField5>\', formatter: \'CardAnnotationhelper.formatDataFieldValueGeneric\'}"\n                                                            semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField5>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                            fieldName="{parts:[{path:\'entitySet>\'}, {path:\'dataField5>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                            contactAnnotationPath="{path: \'dataField5>\', formatter: \'CardAnnotationhelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                                                            forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'CardAnnotationhelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField5>\', formatter: \'CardAnnotationhelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif\n                                                test="{= ${dataField5>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField5>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with path="dataField5>Target" helper="ModelAnnotationhelper.resolvePath" var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails"\n                                                                        type="XML"/><Link binding="{= ${ path: \'dataField5>Target/AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField5>Target/AnnotationPath\'}.slice(0, ${ path: \'dataField5>Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{path: \'contact>fn\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                                press="onContactDetailsLinkPress"\n                                                                reactiveAreaMode="Overlay"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField5>\', formatter: \'CardAnnotationhelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><ObjectStatus class="{= ${path: \'dataField5>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                                        text="{path: \'dataField5>\', formatter: \'CardAnnotationhelper.formatDataPointValue\'}" \n                                                        state="{path: \'dataField5>\', formatter: \'CardAnnotationhelper.formatDataPointStateGeneric\'}"/></template:elseif><template:else><ObjectNumber\n                                                            class="{= ${path: \'dataField5>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} + \' sapOvpObjectNumber\'}"\n                                                            number="{parts:[{path:\'dataField5>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'CardAnnotationhelper.formatDataPointValue\'}"\n                                                            unit="{parts:[{path:\'dataField5>\'}], formatter: \'CardAnnotationhelper.formatUnit\'}"\n                                                            state="{path: \'dataField5>\', formatter: \'CardAnnotationhelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat list="{path:\'lineItem>\'}" var="dataField6"><template:if\n                                    test="{= ${dataField6>com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Low\'}"><template:then><template:if\n                                            test="{= ${dataField6>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if\n                                                    test="{parts:[{path:\'entitySet>\'}, {path:\'dataField6>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink\n                                                            class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                            text="{path: \'dataField6>\', formatter: \'CardAnnotationhelper.formatDataFieldValueGeneric\'}"\n                                                            semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField6>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                            fieldName="{parts:[{path:\'entitySet>\'}, {path:\'dataField6>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                            contactAnnotationPath="{path: \'dataField6>\', formatter: \'CardAnnotationhelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                                                            forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'CardAnnotationhelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField6>\', formatter: \'CardAnnotationhelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif\n                                                test="{= ${dataField6>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField6>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with path="dataField6>Target" helper="ModelAnnotationhelper.resolvePath" var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails"\n                                                                        type="XML"/><Link binding="{= ${ path: \'dataField6>Target/AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField6>Target/AnnotationPath\'}.slice(0, ${ path: \'dataField6>Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{path: \'contact>fn\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                                press="onContactDetailsLinkPress"\n                                                                reactiveAreaMode="Overlay"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField6>\', formatter: \'CardAnnotationhelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><ObjectStatus class="{= ${path: \'dataField6>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                                        text="{path: \'dataField6>\', formatter: \'CardAnnotationhelper.formatDataPointValue\'}" \n                                                        state="{path: \'dataField6>\', formatter: \'CardAnnotationhelper.formatDataPointStateGeneric\'}"/></template:elseif><template:else><ObjectNumber\n                                                            class="{= ${path: \'dataField6>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} + \' sapOvpObjectNumber\'}"\n                                                            number="{parts:[{path:\'dataField6>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'CardAnnotationhelper.formatDataPointValue\'}"\n                                                            unit="{parts:[{path:\'dataField6>\'}], formatter: \'CardAnnotationhelper.formatUnit\'}"\n                                                            state="{path: \'dataField6>\', formatter: \'CardAnnotationhelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat list="{path:\'lineItem>\'}" var="dataField7"><template:if test="{=  !${dataField7>com.sap.vocabularies.UI.v1.Importance/EnumMember} }"><template:then><template:if\n                                            test="{= ${dataField7>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if\n                                                    test="{parts:[{path:\'entitySet>\'}, {path:\'dataField7>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink\n                                                            class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                            text="{path: \'dataField7>\', formatter: \'CardAnnotationhelper.formatDataFieldValueGeneric\'}"\n                                                            semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField7>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                            fieldName="{parts:[{path:\'entitySet>\'}, {path:\'dataField7>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                            contactAnnotationPath="{path: \'dataField7>\', formatter: \'CardAnnotationhelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                                                            forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'CardAnnotationhelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField7>\', formatter: \'CardAnnotationhelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif\n                                                test="{= ${dataField7>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField7>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with path="dataField7>Target" helper="ModelAnnotationhelper.resolvePath" var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails"\n                                                                        type="XML"/><Link binding="{= ${ path: \'dataField7>Target/AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField7>Target/AnnotationPath\'}.slice(0, ${ path: \'dataField7>Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{path: \'contact>fn\', formatter: \'ModelAnnotationhelper.format\'}"\n                                                                press="onContactDetailsLinkPress"\n                                                                reactiveAreaMode="Overlay"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField7>\', formatter: \'CardAnnotationhelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><ObjectStatus class="ovpSmartLink {= ${path: \'dataField7>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                                        text="{path: \'dataField7>\', formatter: \'CardAnnotationhelper.formatDataPointValue\'}" \n                                                        state="{path: \'dataField7>\', formatter: \'CardAnnotationhelper.formatDataPointStateGeneric\'}"/></template:elseif><template:else><ObjectNumber\n                                                            class="{= ${path: \'dataField7>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} + \' sapOvpObjectNumber\'}"\n                                                            number="{parts:[{path:\'dataField7>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'CardAnnotationhelper.formatDataPointValue\'}"\n                                                            unit="{parts:[{path:\'dataField7>\'}], formatter: \'CardAnnotationhelper.formatUnit\'}"\n                                                            state="{path: \'dataField7>\', formatter: \'CardAnnotationhelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat></cells></ColumnListItem></items></template:with></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/table/TableEasyScanLayout.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'\n\t}"    \n><template:if test="{= ${ovpCardProperties>/disableTableCardFlexibility} === true}"><template:then><template:with \n                path=\'ovpCardProperties>/annotationPath\'\n                helper="CardAnnotationhelper.resolveEntityTypePath" \n                var=\'lineItem\'><columns><Column><Text text="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.getFirstDataFieldName\'}"/></Column><Column><Text text="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.getSecondDataFieldName\'}"/></Column><Column hAlign="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'Center\' : \'Right\'}"><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 0}"><template:then><Text \n                                    class="displayBlock {= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                    text="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.getLabelForFirstDataPoint\'}"/></template:then><template:else><Text text="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.getThirdDataFieldName\'}"/></template:else></template:if></Column></columns><items><ColumnListItem\n                        core:require="{CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'}"\n                        id = "tableItem"\n                        type="Active"\n                        press="onColumnListItemPress"><cells><Text \n                                class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"/><Text \n                                class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"/><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 0}"><template:then><template:if\n                                        test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.isFirstDataPointCriticality\'} === true &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><template:then><ObjectStatus class="textAlignCenter"\n                                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'CardAnnotationhelper.formatDataPointValueOnIndex\'}" \n                                                state="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointState\'}"/></template:then><template:else><ObjectNumber\n                                                class="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'CardAnnotationhelper.formatObjectNumber\'}"\n                                                unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'CardAnnotationhelper.formatUnit\'}"\n                                                state="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointState\'}"/></template:else></template:if></template:then><template:else><Text\n                                    class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'CardAnnotationhelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if></cells></ColumnListItem></items></template:with></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.table.TableDashBoardLayout" type="XML"/></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/v4/charts/analytical/analyticalChart.fragment.xml":'<core:FragmentDefinition \n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns:suite="sap.suite.ui.commons" \n\txmlns:viz="sap.viz.ui5.controls"\n\txmlns:dataSet="sap.viz.ui5.data" \n\txmlns:feed="sap.viz.ui5.controls.common.feeds"\n\txmlns:ovp="sap.ovp.ui" \n\txmlns:charts="sap.ovp.cards.v4.charts"\n\ttemplate:require="{\n\t\tCardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\',\n\t\tVizAnnotationManagerV2: \'sap/ovp/cards/charts/VizAnnotationManager\',\n\t\tVizAnnotationManagerV4: \'sap/ovp/cards/v4/charts/VizAnnotationManager\',\n\t\tModelAnnotationhelperV4: \'sap/ui/model/odata/v4/AnnotationHelper\'\n\t}" \t\n><VBox visible="{= ${oAnalyticalCardErrorModel>/error} === true ? false : true}" class="ovpChartTitleVBox cardType" id="vbLayout"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>analyticalCardType}" writeToDom="true" /></customData><template:with \n\t\tpath="ovpCardProperties>/chartAnnotationPath"\n\t\thelper="CardAnnotationhelperV4.resolveEntityTypePath" \n\t\tvar=\'chart\'><template:with \n\t\t\tpath="ovpCardProperties>/selectionAnnotationPath"\n\t\t\thelper="CardAnnotationhelperV4.resolveEntityTypePath" \n\t\t\tvar=\'selVar\'><template:with \n\t\t\t\tpath="ovpCardProperties>/presentationAnnotationPath"\n\t\t\t\thelper="CardAnnotationhelperV4.resolveEntityTypePath" \n\t\t\t\tvar=\'preVar\'><template:if test="{chart>}"><template:if test="{path:\'chart>DimensionAttributes\', formatter: \'VizAnnotationManagerV4.dimensionAttrCheck\'}"><template:if test="{path:\'chart>MeasureAttributes\', formatter: \'VizAnnotationManagerV4.measureAttrCheck\'}"><template:if test="{chart>ChartType}"><template:if test="{preVar>MaxItems}"><template:then><charts:OVPVizDataHandler\n\t\t\t\t\t\t\t\t\t\t\tchartType="{path: \'chart>ChartType\', formatter: \'VizAnnotationManagerV2.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\tentitySet="{ path:\'entitySet>\' , formatter: \'VizAnnotationManagerV4.getEntitySet\' }"\n\t\t\t\t\t\t\t\t\t\t\tdata="{parts: [{path:\'entitySet>\'}, {path:\'selVar>\'}, {path:\'preVar>\'}, {path:\'chart>DimensionAttributes\'}, {path:\'chart>MeasureAttributes\'}, {path:\'chart>ChartType\'}], formatter: \'VizAnnotationManagerV4.formatItems\'}"\n\t\t\t\t\t\t\t\t\t\t\taggregateData="{parts: [{path:\'entitySet>\'}, {path:\'selVar>\'}, {path:\'preVar>\'}, {path:\'chart>undefined\'}, {path:\'chart>MeasureAttributes\'}, {path:\'chart>ChartType\'}], formatter: \'VizAnnotationManagerV4.formatItems\'}"><charts:data><core:Element /></charts:data><charts:aggregateData><core:Element /></charts:aggregateData><charts:content width="100%"><viz:VizFrame id="analyticalChart" class="ovpViz"\n\t\t\t\t\t\t\t\t\t\t\t\t\tuiConfig="{applicationSet:\'fiori\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvizType="{parts: [{path: \'chart>ChartType\'}, {path: \'chart>DimensionAttributes\'}], formatter: \'VizAnnotationManagerV2.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth="100%"><viz:customData><template:if test="{chart>Title}"><ovp:CustomData key="aria-label"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue="{chart>Title@@ModelAnnotationhelperV4.format}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twriteToDom="true" /></template:if></viz:customData><viz:dataset><dataSet:FlattenedDataset data="{analyticalmodel>/}"></dataSet:FlattenedDataset></viz:dataset></viz:VizFrame></charts:content></charts:OVPVizDataHandler></template:then><template:else><charts:OVPVizDataHandler\n\t\t\t\t\t\t\t\t\t\t\tchartType="{path: \'chart>ChartType\', formatter: \'VizAnnotationManagerV2.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\tentitySet="{ path:\'entitySet>\' , formatter: \'VizAnnotationManagerV4.getEntitySet\' }"\n\t\t\t\t\t\t\t\t\t\t\tdata="{parts: [{path:\'entitySet>\'}, {path:\'selVar>\'}, {path:\'preVar>\'}, {path:\'chart>DimensionAttributes\'}, {path:\'chart>MeasureAttributes\'}, {path:\'chart>ChartType\'}], formatter: \'VizAnnotationManagerV4.formatItems\'}"><charts:data><core:Element /></charts:data><charts:aggregateData><core:Element /></charts:aggregateData><charts:content width="100%"><viz:VizFrame id="analyticalChart" class="ovpViz"\n\t\t\t\t\t\t\t\t\t\t\t\t\tuiConfig="{applicationSet:\'fiori\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvizType="{parts: [{path: \'chart>ChartType\'}, {path: \'chart>DimensionAttributes\'}], formatter: \'VizAnnotationManagerV2.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth="100%"><viz:customData><template:if test="{chart>Title}"><ovp:CustomData key="aria-label"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue="{chart>Title@@ModelAnnotationhelperV4.format}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twriteToDom="true" /></template:if></viz:customData><viz:dataset><dataSet:FlattenedDataset data="{analyticalmodel>/}"></dataSet:FlattenedDataset></viz:dataset></viz:VizFrame></charts:content></charts:OVPVizDataHandler></template:else></template:if></template:if></template:if></template:if></template:if></template:with></template:with></template:with></VBox><template:with \n\t\tpath="ovpCardProperties>/chartAnnotationPath"\n\t\thelper="CardAnnotationhelperV4.resolveEntityTypePath" \n\t\tvar=\'chart\'><template:if test="{chart>}"><template:if test="{chart>ChartType}"><template:if test="{path:\'chart>ChartType\',formatter:\'VizAnnotationManagerV4.checkBubbleChart\'}"><Text visible="{= ${oAnalyticalCardErrorModel>/error} === true ? false : true}" id="bubbleText" class="ovpChartFooter"/></template:if></template:if></template:if></template:with><IllustratedMessage visible="{= ${oAnalyticalCardErrorModel>/error} === true ? true : false}" illustrationType="sapIllus-UnableToLoad" enableDefaultTitleAndDescription="false" /></core:FragmentDefinition>',
	"sap/ovp/cards/v4/charts/generic/noData.fragment.xml":'<core:FragmentDefinition \n\txmlns:core="sap.ui.core"\n\txmlns:ovp="sap.ovp.ui"\n\txmlns="sap.m"><FlexBox \n\t\talignItems="Center" \n\t\tjustifyContent="SpaceAround" \n\t\tclass="noDataSection"><Text maxLines="1"\n\t\t\ttext="{ovplibResourceBundle>noData}"><customData><ovp:CustomData \n\t\t\t\t\tkey="aria-label"\n\t\t\t\t\tvalue="{ovplibResourceBundle>noData}"\n\t\t\t\t\twriteToDom="true" /><ovp:CustomData key="tabindex" value="0" writeToDom="true" /></customData></Text></FlexBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/Action.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n\t\tModelAnnotationhelperV4: \'sap/ui/model/odata/v4/AnnotationHelper\'\n\t}"     \n><template:if test="{=  ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAction\' ||\n        ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\'||\n        ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldWithUrl\'}"><Button \n            text="{dataField>Label@@ModelAnnotationhelperV4.format\'}"\n            press="onActionPress" \n            type="Transparent"><layoutData><OverflowToolbarLayoutData /></layoutData><customData><core:CustomData key="type" value="{dataField>RecordType}"/><template:if test="{= ${dataField>SemanticObject}}"><core:CustomData key="semanticObject" value="{dataField>SemanticObject@@ModelAnnotationhelperV4.format\'}"/></template:if><template:if test="{= ${dataField>Url}}"><core:CustomData key="url" value="{dataField>Url@@ModelAnnotationhelperV4.format\'}"/></template:if><template:if test="{= ${dataField>Action}}"><core:CustomData key="action" value="{dataField>Action@@ModelAnnotationhelperV4.format\'}"/></template:if><core:CustomData key="label" value="{dataField>Label@@ModelAnnotationhelperV4.format\'}"/></customData></Button></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/ActionsFooter.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:core="sap.ui.core" \n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n        CardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\'\n\t}"  \n><template:with \n        path=\'ovpCardProperties>/identificationAnnotationPath\' \n        helper="CardAnnotationhelperV4.resolveEntityTypePath" \n        var=\'identification\'><template:if test="{path: \'identification>\', formatter: \'CardAnnotationhelper.hasActions\'}"><OverflowToolbar id="ovpActionFooter" class="sapOvpActionFooter"><customData><ovp:CustomData key="role" value="toolbar" writeToDom="true" /></customData><ToolbarSpacer/><template:repeat\n                        list="{\n                            path:\'identification>\',\n                            filters: [\n                                {path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\', operator: \'EndsWith\', value1: \'High\'},\n                                {path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\', operator: \'EndsWith\', value1: \'Medium\'}\n                            ],\n                            sorter: [{path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\'}]\n                        }" \n                        var="dataField"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.Action" type="XML"/></template:repeat><template:repeat\n                        list="{\n                            path:\'identification>\',\n                            filters: [\n                                {path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\', operator: \'EndsWith\', value1: \'Low\'}\n                            ]\n                            }" \n                            var="dataField"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.Action" type="XML"/></template:repeat><template:repeat \n                    list="{path:\'identification>\'}" \n                    var="dataField"><template:if test="{=  !${dataField>com.sap.vocabularies.UI.v1.Importance/EnumMember} }"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.Action" type="XML"/></template:if></template:repeat></OverflowToolbar></template:if></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/Card.view.xml":'<mvc:View\n    controllerName="{ovpCardProperties>/controllerName}"\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><VBox class="sapOvpCardOverlaySideContainer sapOvpCardRightOverlayCursor"></VBox><FlexBox \n        width="100%" \n        justifyContent="End" \n        class="sapOvpNewBadgeWrapper" \n        visible="{= ${ovpCardProperties>/cloneCard} ? true : false}"><HBox class="sapOvpNewBadge"><Text text="{ovplibResourceBundle>OVP_KEYUSER_LABEL_COPY}" class="sapOvpNewBadgeText"/></HBox></FlexBox><FlexBox \n        width="100%" \n        justifyContent="End" \n        class="sapOvpNewBadgeWrapper" \n        visible="{= ${ovpCardProperties>/newCard} ? true : false}"><HBox class="sapOvpNewBadge"><Text text="{ovplibResourceBundle>OVP_KEYUSER_LABEL_NEW}" class="sapOvpNewBadgeText"/></HBox></FlexBox><template:if test="{= ${ovpCardProperties>/contentPosition} === \'Right\'}" ><template:then><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContentRight" type="XML"/></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContentMiddle" type="XML"/></template:else></template:if><template:if test="{device>/support/touch}"><template:then><core:HTML content="&lt;div&gt;&lt;/div&gt;"></core:HTML></template:then><template:else><core:HTML content="&lt;div;&gt;&lt;/div&gt;"></core:HTML></template:else></template:if><HBox class="sapOvpCardOverlayContainer sapOvpCardBottomOverlayCursor"></HBox></mvc:View>',
	"sap/ovp/cards/v4/generic/ContactDetails.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickView placement="Auto"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetailsQuickViewGroup" type="XML"/></QuickView></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/ContactDetailsQuickViewGroup.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n        CardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\',\n        ModelAnnotationhelperV4: \'sap/ui/model/odata/v4/AnnotationHelper\'\n\t}"\n><QuickViewPage \n        header="{ovplibResourceBundle>CONTACT_INFO}"\n        icon="{= ${contact>photo} ? ${contact>photo@@ModelAnnotationhelperV4.format} : \'sap-icon://person-placeholder\'}"\n        title="{contact>fn@@ModelAnnotationhelperV4.format}"\n        description="{contact>role@@ModelAnnotationhelperV4.format}"><QuickViewGroup><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_JOB_TITLE}" \n                type="text"\n                value="{contact>title@@ModelAnnotationhelperV4.format}"\n                visible="{= !!${contact>title}}"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_DEPARTMENT}" \n                type="text"\n                value="{contact>org@@ModelAnnotationhelperV4.format}"\n                visible="{= !!${contact>org}}"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_EMAIL}" \n                type="email"\n                value="{path: \'contact>email\', formatter: \'CardAnnotationhelperV4.getEmail\'}"\n                visible="{path: \'contact>email\', formatter: \'CardAnnotationhelperV4.getEmail\'}"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_PHONE}" \n                type="phone"\n                value="{path: \'contact>tel\', formatter: \'CardAnnotationhelperV4.getPhone\'}"\n                visible="{path: \'contact>tel\', formatter: \'CardAnnotationhelperV4.getPhone\'}"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_MOBILE}" \n                type="{= (${device>/system/phone} || ${device>/system/tablet})  ? \'mobile\'  : \'phone\' }"\n                value="{path: \'contact>tel\', formatter: \'CardAnnotationhelperV4.getDevice\'}"\n                visible="{path: \'contact>tel\', formatter: \'CardAnnotationhelperV4.getDevice\'}"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_FAX}" \n                type="text"\n                value="{path: \'contact>tel\', formatter: \'CardAnnotationhelperV4.getPhoneType\'}"\n                visible="{path: \'contact>tel\', formatter: \'CardAnnotationhelperV4.getPhoneType\'}"/></QuickViewGroup></QuickViewPage></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/ContentMiddle.fragment.xml":'<core:FragmentDefinition\n\tcontrollerName="sap.ovp.cards.generic.Card"\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\ttemplate:require="{\n\t\tCommonUtils: \'sap/ovp/cards/CommonUtils\'\n\t}" \t\n><ovp:Card id="ovpCardControl"><VBox class="sapOvpBaseCard"><template:if test="{= ${ovpCardProperties>/contentFragment} &amp;&amp; ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.generic.base.error.Error\' }"><template:then><core:Fragment fragmentName="sap.ovp.cards.v4.generic.Header" type="XML"/></template:then><template:elseif test="{ovpCardProperties>/headerFragment}"><core:Fragment fragmentName="{ovpCardProperties>/headerFragment}" type="XML"/></template:elseif></template:if><ovp:CardContentContainer \n\t\t\t\tid="ovpCardContentContainer" \n\t\t\t\tclass="{= ${ovpCardProperties>/cardLayout/containerLayout} === \'resizable\' &amp;&amp; ${ovpCardProperties>/cardLayout/showOnlyHeader} === true ? \'sapOvpWrapper sapOvpContentHidden\' :  \'sapOvpWrapper\'}"><template:if test="{= ${ovpCardProperties>/state} !== \'Loading\' || !${ovpCardProperties>/reason} || ${ovpCardProperties>/state} === \'undefined\'}" ><template:if test="{ovpCardProperties>/tabs}"><Toolbar \n\t\t\t\t\t\t\tid="toolbar" \n\t\t\t\t\t\t\tclass="sapOvpDropDown {= ${ovpCardProperties>/densityStyle} === \'compact\' ? \'sapUiSizeCompact dropDrownCompact\' : \'sapUiSizeCozy sapOvpDropDownPadding dropDrownCozy\' }"><core:InvisibleText id="ovp_card_dropdown_label" text="{ovplibResourceBundle>OVP_CARD_DROP_DOWN_LABEL}" /><Select \n\t\t\t\t\t\t\t\tid="ovp_card_dropdown" \n\t\t\t\t\t\t\t\tselectedKey="1" \n\t\t\t\t\t\t\t\tchange="changeSelection"><template:repeat \n\t\t\t\t\t\t\t\t\tlist="{ovpCardProperties>/tabs}" \n\t\t\t\t\t\t\t\t\tvar="tab"><core:Item\n\t\t\t\t\t\t\t\t\t\tid ="{parts: [{path: \'ovpCardProperties>/tabs\'}, {path: \'tab>\'}], formatter: \'CommonUtils.createKeyForCB\'}"\n\t\t\t\t\t\t\t\t\t\tkey="{parts: [{path: \'ovpCardProperties>/tabs\'}, {path: \'tab>\'}], formatter: \'CommonUtils.createKeyForCB\'}"\n\t\t\t\t\t\t\t\t\t\ttext="{tab>value}"></core:Item></template:repeat></Select></Toolbar></template:if><template:if test="{ovpCardProperties>/contentFragment}"><core:Fragment fragmentName="{ovpCardProperties>/contentFragment}" type="XML"/></template:if></template:if></ovp:CardContentContainer><template:if\n\t\t\t\ttest="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.quickview.Quickview\' || ${ovpCardProperties>/layoutDetail} !== \'resizable\' || ${ovpCardProperties>/state} === \'Loading\' || ${ovpCardProperties>/reason}}"><template:if test="{ovpCardProperties>/footerFragment}"><core:Fragment fragmentName="{ovpCardProperties>/footerFragment}" type="XML"/></template:if></template:if></VBox></ovp:Card></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/ContentRight.fragment.xml":'<core:FragmentDefinition\n\tcontrollerName="sap.ovp.cards.generic.Card"\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:Card id="ovpCardControl" class = "cardType"><HBox class="sapOvpBaseCard sapOvpCardRightContent"><FlexBox class="sapOvpCardContentRightHeader"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.Header" type="XML"/><layoutData><FlexItemData growFactor="1" baseSize="1rem"/></layoutData></FlexBox><ovp:CardContentContainer id="ovpCardContentContainer"><template:if test="{ovpCardProperties>/contentFragment}"><core:Fragment fragmentName="{ovpCardProperties>/contentFragment}" type="XML"/></template:if></ovp:CardContentContainer></HBox></ovp:Card></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/CountFooter.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:core="sap.ui.core"\n    xmlns:ovp="sap.ovp.ui"><Text id="ovpCountFooter" class="sapOvpCardFooter"><customData><ovp:CustomData key="role" value="heading" writeToDom="true" /></customData></Text></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/CountHeader.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:ovp="sap.ovp.ui"><FlexBox class = "sapOvpHeaderCountMainDiv"><Text id="ovpCountHeader" class="sapOvpHeaderCounter sapUiTinyMarginTop" maxLines="1"><customData><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/Header.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n        ModelAnnotationhelper: \'sap/ui/model/odata/AnnotationHelper\'\n\t}"    \n><VBox \n        id="ovpCardHeader"\n        class="{= ${ovpCardProperties>/category} || ${ovpCardProperties>/title} || ${ovpCardProperties>/subTitle} ? \'sapOvpCardHeader sapUiContentPadding\' : \'sapOvpCardHeader sapOvpCardHideHeader\' } {= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.stack.Stack\' ? \'sapOvpStackCardHeader\' :  \'\'}"><customData><ovp:CustomData key="tabindex" value="0" writeToDom="true"/><ovp:CustomData key="role" value="button" writeToDom="true"/></customData><template:if test="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.quickview.Quickview\'}"><template:then><template:with \n                    path="entityType>com.sap.vocabularies.UI.v1.HeaderInfo" \n                    var="header"><Text \n                        id="ovpQuickviewCardHeader"\n                        text="{= ${ovpCardProperties>/title} + \': \' + ${path: \'header>Title/Value\', formatter: \'ModelAnnotationhelper.format\'}}"\n                        class="sapOvpCardTitle tabindex-1"><customData><ovp:CustomData \n                                key="aria-label" \n                                value="{= ${ovpCardProperties>/title} + \': \' + ${path: \'header>Title/Value\', formatter: \'ModelAnnotationhelper.format\'}}" \n                                writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></template:with></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.v4.generic.Title" type="XML"/></template:else></template:if><template:if test="{= ${ovpCardProperties>/contentFragment} !== \'sap.ovp.cards.quickview.Quickview\'}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.SubTitle" type="XML"/></template:if><template:if test="{ovpCardProperties>/headerExtensionFragment}"><core:Fragment fragmentName="{ovpCardProperties>/headerExtensionFragment}" type="XML"/></template:if><template:if test="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.stack.Stack\'}"><FlexBox class="sapOvpCardViewAllContainer"><Text\n                    id= "ViewAll"\n                    text="{ovplibResourceBundle>View_All_Stack_Card}"\n                    class="sapOvpCardViewAll cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>View_All_Stack_Card}" writeToDom="true" /></customData></Text></FlexBox></template:if></VBox><HBox class="sapOvpCardAdditionalActions"><Button\n            id="sapOvpCardAdditionalActions"\n            enabled="false"\n            type="Transparent"\n            icon="sap-icon://overflow"\n            tooltip="{ovplibResourceBundle>MORE_MENU}"\n            press="onShowAdditionalCardActions"/></HBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/KPIHeader.fragment.xml":'<core:FragmentDefinition \n    xmlns="sap.m"\n    xmlns:core="sap.ui.core" \n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" \n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n        CardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\'\n\t}"\n><template:with \n        path="ovpCardProperties>/dataPointAnnotationPath"\n        helper="CardAnnotationhelperV4.resolveEntityTypePath" \n        var=\'dataPoint\'><template:with \n            path="ovpCardProperties>/selectionAnnotationPath"\n            helper="CardAnnotationhelperV4.resolveEntityTypePath" \n            var=\'selVar\'><template:with \n                path="ovpCardProperties>/presentationAnnotationPath"\n                helper="CardAnnotationhelperV4.resolveEntityTypePath" \n                var=\'preVar\'><template:if test="{dataPoint>}"><VBox id="kpiHeader" class="sapOVPKpiHeaderVbox tabindex-1" core:require="{CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\'}"><template:if test="{dataPoint>Value/$Path}"><FlexBox \n                                items="{parts:[{path:\'entitySet>\'}, {path:\'dataPoint>\'}, {path:\'selVar>\'}], formatter: \'CardAnnotationhelperV4.getAggregateNumber\'}"\n                                id="kpiHBoxNumeric" \n                                class="numericContentHbox sapUiTinyMarginTop sapOvpKPIHeaderAggregateNumber" ><items><HBox class="innerNumericContentHbox sapOvpKpiContent" alignItems="End" justifyContent="SpaceBetween"><NumericContent id="kpiNumberValue"\n                                            truncateValueTo="8"\n                                            indicator="{parts:[{path:\'dataPoint>\'}], formatter:\'CardAnnotationhelper.formThePathForTrendIcon\'}"\n                                            value="{path:\'dataPoint>\', formatter: \'CardAnnotationhelper.formThePathForAggregateNumber\'}"\n                                            formatterValue="true"\n                                            valueColor="{path:\'dataPoint>\', formatter: \'CardAnnotationhelper.formatKPIHeaderState\'}"\n                                            state="Loaded" class="sapOvpKPIHeaderNumberValueStyle kpiHeaderClass"\n                                            withMargin="false"><customData><ovp:CustomData \n                                                    key="aria-label"\n                                                    value="{path:\'dataPoint>\', formatter: \'CardAnnotationhelper.getKPIHeaderAggregateNumber\'} {path:\'dataPoint>\', formatter: \'CardAnnotationhelper.formatKPIHeaderState\'}"\n                                                    writeToDom="true"/></customData></NumericContent><template:if test="{= ${path:\'dataPoint>\', formatter: \'CardAnnotationhelper.formPathForPercentageChange\'} !== \'\'}"><FlexBox class="TargetDeviationFlexbox"><VBox class="KpiTargetContainer"><Text id="ovpKpiTarget" text="{ovplibResourceBundle>KPI_Target_Text}" class="KpiTargetText tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>KPI_Target_Text}" writeToDom="true" /></customData></Text><Text \n                                                        id="ovpTargetValue" \n                                                        text="{path:\'dataPoint>\', formatter: \'CardAnnotationhelper.formPathForTargetValue\'}"\n                                                        class="sapOvpKPIHeaderTrendPercentStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData \n                                                                key="aria-label" \n                                                                value="{path:\'dataPoint>\', formatter: \'CardAnnotationhelper.formPathForTargetValue\'}" \n                                                                writeToDom="true" /></customData><layoutData><FlexItemData growFactor="1"/></layoutData></Text></VBox><VBox class="KpiDeviationContainer"><Text \n                                                        id= "ovpKPIDeviation" \n                                                        text="{ovplibResourceBundle>KPI_Deviation_Text}" \n                                                        class="KpiDeviationText tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>KPI_Deviation_Text}" writeToDom="true" /></customData></Text><Text\n                                                        id="kpiNumberPercentage"\n                                                        text="{path:\'dataPoint>\', formatter: \'CardAnnotationhelper.formPathForPercentageChange\'}"\n                                                        class="sapOvpKPIHeaderTrendPercentStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData \n                                                                key="aria-label" \n                                                                value="{path:\'dataPoint>\', formatter: \'CardAnnotationhelper.formPathForPercentageChange\'}" \n                                                                writeToDom="true" /></customData><layoutData><FlexItemData growFactor="1"/></layoutData></Text></VBox></FlexBox></template:if></HBox></items></FlexBox></template:if><template:if test="{dataPoint>Value/$Path}"><template:if test="{ovpCardProperties>/valueSelectionInfo}"><FlexBox class="UOMFlexbox"><Text\n                                        id="ovpValueSelectionInfo"\n                                        maxLines="1"\n                                        text="{ovpCardProperties>/valueSelectionInfo}"\n                                        class="sapOvpKPIHeaderUnitOfMeasureStyle sapOvpCardSubtitle tabindex-1 cardHeaderText"><customData><ovp:CustomData \n                                                key="aria-label"\n                                                value="{ovpCardProperties>/valueSelectionInfo}"\n                                                writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true" /><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></template:if></template:if><template:if  \n                            test="{= (${ovpCardProperties>/showSortingInHeader} === true) &amp;&amp; ${path:\'preVar>\', formatter: \'CardAnnotationhelper.isPresentationVarientPresent\'} === true}"><FlexBox \n                                alignItems="Start" \n                                justifyContent="SpaceBetween" \n                                class="KpiPreVarFlex" \n                                visible="{ovpCardProperties>/showSortingInHeader}"><Text \n                                    id="headerGroupByText" \n                                    maxLines="1"\n                                    text="{path:\'preVar>\', formatter:\'CardAnnotationhelper.listGroupBy\'}"\n                                    class="sapOvpKPIHeaderDimensionStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{path:\'preVar>\', formatter:\'CardAnnotationhelper.listGroupBy\'}" writeToDom="true" /></customData></Text></FlexBox></template:if><template:if \n                            test="{= (${ovpCardProperties>/showFilterInHeader} === true) &amp;&amp; {parts:[{path:\'selectionVar>\'}, {path:\'selVar>\'}], formatter:\'CardAnnotationhelper.formTheFilterByString\'} !== \'\'}"><template:if test="{= !${ovpCardProperties>/ignoreSelectionVariant} === true}"><template:then><FlexBox \n                                        alignItems="Start" \n                                        justifyContent="Start" \n                                        class="KpiSelVarFlex" \n                                        visible="{ovpCardProperties>/showFilterInHeader}"><template:repeat \n                                            list="{path:\'selVar>SelectOptions\'}" \n                                            var="selectionVar"><Text \n                                                id="{path:\'selectionVar>\', formatter:\'CardAnnotationhelper.formTheIdForFilter\'}" \n                                                text="{parts:[{path:\'selectionVar>\'}, {path:\'selVar>\'}], formatter:\'CardAnnotationhelper.formTheFilterByString\'}"\n                                                class="sapOvpKPIHeaderFilterStyle tabindex-1 cardHeaderText" ><customData><ovp:CustomData \n                                                        key="aria-label" \n                                                        value="{parts:[{path:\'selectionVar>\'}, {path:\'selVar>\'}], formatter:\'CardAnnotationhelper.formTheFilterByString\'}" \n                                                        writeToDom="true" /></customData></Text></template:repeat></FlexBox></template:then><template:else><FlexBox \n                                        alignItems="Start" \n                                        justifyContent="Start" \n                                        class="KpiSelVarFlex" \n                                        visible="{ovpCardProperties>/showFilterInHeader}"><template:repeat \n                                            list="{path:\'ovpCardProperties>/idForExternalFilters\'}" \n                                            var="selectionVar"><Text \n                                                id="{path:\'selectionVar>\', formatter:\'CardAnnotationhelper.formTheIdForFilterNotFromSelVar\'}" \n                                                text="{parts:[{path:\'selectionVar>\'}, {path:\'ovpCardProperties>/filters\'}], formatter:\'CardAnnotationhelper.formTheFilterByStringNotFromSelVar\'}" \n                                                class="sapOvpKPIHeaderFilterStyle tabindex-1 cardHeaderText" ><customData><ovp:CustomData\n                                                        key="aria-label" \n                                                        value="{parts:[{path:\'selectionVar>\'}, {path:\'ovpCardProperties>/filters\'}], formatter:\'CardAnnotationhelper.formTheFilterByStringNotFromSelVar\'}" \n                                                        writeToDom="true" /></customData></Text></template:repeat></FlexBox></template:else></template:if></template:if></VBox></template:if></template:with></template:with></template:with></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/generic/LineItemDetails.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickView placement="Auto"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.LineItemDetailsQuickViewGroup" type="XML"/></QuickView></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/LineItemDetailsQuickViewGroup.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:l="sap.ui.layout"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n        ModelAnnotationhelperV4: \'sap/ui/model/odata/v4/AnnotationHelper\',\n        CardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\'\n\t}"\n><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>quickViewCard}" writeToDom="true" /></customData><template:with \n        path="entityType>@com.sap.vocabularies.UI.v1.HeaderInfo" \n        var="header"><template:with \n            path="entityType>@com.sap.vocabularies.UI.v1.Facets" \n            var="facets"><QuickViewPage\n                core:require="{CardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\'}"\n                header="{= ${header>TypeNamePlural} ? ${header>TypeNamePlural@@ModelAnnotationhelperV4.format} :  \'{ovplibResourceBundle>LineItem_Detail_Text}\' }"\n                icon="{= ${header>ImageUrl} ? ${header>ImageUrl@@ModelAnnotationhelperV4.format} : (${header>TypeImageUrl} ? ${header>TypeImageUrl@@ModelAnnotationhelperV4.format} : \'\') }"\n                title="{= ${header>Title/Value} ? ${path: \'header>Title/Value@@ModelAnnotationhelperV4.format\'} :  \'\' }"\n                description="{= ${header>Description/Value} ? ${header>Description/Value@@ModelAnnotationhelperV4.format} :  \'\' }"><template:repeat \n                    list="{path:\'facets>\'}" \n                    var="referenceFacet"><template:if test="{referenceFacet>com.sap.vocabularies.UI.v1.IsSummary}"><template:with \n                            path="referenceFacet>Target/$AnnotationPath"\n                            helper="ModelAnnotationhelperV4.resolve$Path"\n                            var="target"><QuickViewGroup heading="{target>Label@@ModelAnnotationhelperV4.format}"><template:repeat \n                                    list="{path:\'target>Data\'}" \n                                    var="dataField"><template:if test="{dataField>Url}"><template:then><template:if test="{dataField>Url/UrlRef}"><template:then><QuickViewGroupElement\n                                                        label="{dataField>Label@@ModelAnnotationhelperV4.format}"\n                                                        value="{dataField>Value@@ModelAnnotationhelperV4.format}"\n                                                        url="{dataField>Url/UrlRef@@ModelAnnotationhelperV4.format}"\n                                                        type="link"></QuickViewGroupElement></template:then><template:else><QuickViewGroupElement\n                                                        label="{dataField>Label@@ModelAnnotationhelperV4.format}"\n                                                        value="{dataField>Value@@ModelAnnotationhelperV4.format}"\n                                                        url="{dataField>Url@@ModelAnnotationhelperV4.format}"\n                                                        type="link"></QuickViewGroupElement></template:else></template:if></template:then><template:else><template:if test="{dataField>Value}"><template:with \n                                                    path="dataField>Value/$AnnotationPath"\n                                                    helper="ModelAnnotationhelperV4.resolve$Path"\n                                                    var="fValue"><template:if test="{= ${fValue>sap:semantics} === \'url\'}"><template:then><QuickViewGroupElement\n                                                                label="{dataField>Label@@ModelAnnotationhelperV4.format}"\n                                                                value="{dataField>Value@@ModelAnnotationhelperV4.format}"\n                                                                url="{dataField>Value@@ModelAnnotationhelperV4.format}"\n                                                                type="url"></QuickViewGroupElement></template:then><template:else><template:if test="{= ${fValue>sap:semantics} === \'email\'}"><template:then><QuickViewGroupElement\n                                                                        label="{dataField>Label@@ModelAnnotationhelperV4.format}"\n                                                                        value="{dataField>Value@@ModelAnnotationhelperV4.format}"\n                                                                        type="email"></QuickViewGroupElement></template:then><template:else><template:if test="{= ${fValue>sap:semantics} === \'tel\'}"><template:then><QuickViewGroupElement\n                                                                                label="{dataFie\\ld>Label@@ModelAnnotationhelperV4.format}"\n                                                                                value="{dataField>Value@@ModelAnnotationhelperV4.format}"\n                                                                                type="phone"></QuickViewGroupElement></template:then><template:else><QuickViewGroupElement\n                                                                                label="{dataField>Label@@ModelAnnotationhelperV4.format}"\n                                                                                value="{path: \'dataField>\', formatter: \'CardAnnotationhelperV4.formatField\'}"></QuickViewGroupElement></template:else></template:if></template:else></template:if></template:else></template:if></template:with></template:if></template:else></template:if></template:repeat></QuickViewGroup></template:with></template:if></template:repeat></QuickViewPage></template:with></template:with></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/generic/SubTitle.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n\t\tCardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\',\n        ModelAnnotationhelperV4: \'sap/ui/model/odata/v4/AnnotationHelper\'\n\t}"\n><template:if test="{= ${ovpCardProperties>/state} !== \'Loading\'}"><HBox justifyContent="SpaceBetween" renderType="Bare"><template:if test="{ovpCardProperties>/dynamicSubtitleAnnotationPath}"><template:then><template:with \n                        path=\'ovpCardProperties>/dynamicSubtitleAnnotationPath\'\n                        helper="CardAnnotationhelperV4.resolveEntityTypePath"\n                        var=\'headerInfo\'><template:with \n                            path="ovpCardProperties>/selectionAnnotationPath"\n                            helper="CardAnnotationhelperV4.resolveEntityTypePath" \n                            var=\'selVar\'><template:if test="{headerInfo>Description}"><HBox><FlexBox\n                                        items="{parts:[{path:\'entitySet>\'}, {path:\'headerInfo>\'}, {path:\'selVar>\'}], formatter: \'CardAnnotationhelperV4.getAggregateNumber\'}"\n                                        class="sapOvpCardSubtitleContainer ovpHeaderContainer sapOvpCardDynamicSubTitle"><Text\n                                            id="ovpDescriptionValue" \n                                            maxLines="2"\n                                            text="{path: \'headerInfo>Description/Value\', formatter: \'CardAnnotationhelperV4.formatDynamicSubtitle\'}"\n                                            class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData \n                                                    key="aria-label"\n                                                    value="{path: \'headerInfo>Description/Value\', formatter: \'CardAnnotationhelperV4.formatDynamicSubtitle\'}"\n                                                    writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></HBox></template:if></template:with></template:with></template:then><template:else><template:if test="{ovpCardProperties>/subTitle}"><template:then><FlexBox class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text\n                                    id="SubTitle-Text"\n                                    maxLines="2"\n                                    text="{ovpCardProperties>/subTitle}"\n                                    class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData \n                                            key="aria-label" \n                                            value="{ovpCardProperties>/subTitle}"\n                                            writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></template:then><template:else><template:if test="{ovpCardProperties>/dataPointAnnotationPath}"><template:then><template:with \n                                        path=\'ovpCardProperties>/dataPointAnnotationPath\'\n                                        helper="CardAnnotationhelperV4.resolveEntityTypePath"\n                                        var=\'dataPoint\'><template:with \n                                        path="ovpCardProperties>/selectionAnnotationPath"\n                                        helper="CardAnnotationhelperV4.resolveEntityTypePath" \n                                        var=\'selVar\'><template:if test="{dataPoint>Description}"><HBox width="100%"><FlexBox\n                                                    items="{parts:[{path:\'entitySet>\'}, {path:\'dataPoint>\'}, {path:\'selVar>\'} ], formatter: \'CardAnnotationhelperV4.getAggregateNumber\'}"\n                                                    class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text\n                                                        id="ovpDescriptionValue"\n                                                        maxLines="2"\n                                                        text="{dataPoint>Description@@ModelAnnotationhelperV4.format}"\n                                                        class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData \n                                                                key="aria-label"\n                                                                value="{dataPoint>Description@@ModelAnnotationhelperV4.format}"\n                                                                writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></HBox></template:if></template:with></template:with></template:then><template:else><FlexBox class="sapOvpCardSubtitleContainer ovpHeaderContainer"></FlexBox></template:else></template:if></template:else></template:if></template:else></template:if><template:if\n                test="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.v4.list.List\' || ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.v4.table.Table\'}"><template:if test="{ovpCardProperties>/countHeaderFragment}"><core:Fragment fragmentName="{ovpCardProperties>/countHeaderFragment}" type="XML"/></template:if></template:if></HBox></template:if></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/generic/Title.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n\t\tCardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\',\n        ModelAnnotationhelperV4: \'sap/ui/model/odata/v4/AnnotationHelper\'\n\t}"    \n><template:if test="{ovpCardProperties>/title} || {ovpCardProperties>/dataPointAnnotationPath}"><HBox><template:if test="{ovpCardProperties>/title}"><template:then><FlexBox class="ovpHeaderContainer sapOvpCardHeaderTitleWidth"><Text\n                    id= "ovpHeaderTitle" \n                    maxLines="3"\n                    text="{ovpCardProperties>/title}"\n                    class="sapOvpCardTitle tabindex-1"\n                    build:metadata="#pattern:GenericCard;prop:text:Title"><customData><ovp:CustomData \n                            key="aria-label" \n                            value="{ovpCardProperties>/title}"\n                            writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></template:then><template:else><template:if test="{= ${ovpCardProperties>/state} !== \'Loading\' &amp;&amp; ${ovpCardProperties>/dataPointAnnotationPath}}"><template:then><template:with \n                                path=\'ovpCardProperties>/dataPointAnnotationPath\'\n                                helper="CardAnnotationhelperV4.resolveEntityTypePath"\n                                var=\'dataPoint\'><template:if test="{dataPoint>Title}"><FlexBox \n                                        items="{parts:[{path:\'entitySet>\'}, {path:\'dataPoint>\'}], formatter: \'CardAnnotationhelperV4.getAggregateNumber\'}" \n                                        class="ovpHeaderContainer sapOvpCardHeaderTitleWidth"><Text\n                                            id="ovpHeaderTitleFromKPI" \n                                            maxLines="3"\n                                            text="{dataPoint>Title@@ModelAnnotationhelperV4.format}"\n                                            class="sapOvpCardTitle tabindex-1"\n                                            build:metadata="#pattern:GenericCard;prop:text:Title"><customData><ovp:CustomData \n                                                    key="aria-label" \n                                                    value="{dataPoint>Title@@ModelAnnotationhelperV4.format}"\n                                                    writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="3" writeToDom="true"/></customData></Text></FlexBox></template:if></template:with></template:then></template:if></template:else></template:if></HBox></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/LinkList.fragment.xml":'<core:FragmentDefinition \n\txmlns:build="sap.build" \n\txmlns:core="sap.ui.core" \n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" \n\txmlns="sap.m"\n\ttemplate:require="{\n\t\tCardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\'\n\t}"\t\n><template:if test="{ovpCardProperties>/staticContent}"><template:then><template:if test="{= ${ovpCardProperties>/listFlavor} === \'standard\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.v4.linklist.fragments.LinkListStaticDataStandard" type="XML"/></template:then><template:elseif test="{= ${ovpCardProperties>/listFlavor} === \'carousel\'}"><core:Fragment fragmentName="sap.ovp.cards.v4.linklist.fragments.LinkListStaticDataCarousel" type="XML"/></template:elseif></template:if></template:then><template:else><template:with helper="CardAnnotationhelperV4.resolveEntityTypePath" path=\'ovpCardProperties>/headerAnnotationPath\' var=\'header\'><template:if test="{= ${ovpCardProperties>/listFlavor} === \'standard\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.v4.linklist.fragments.LinkListStandard" type="XML"/></template:then><template:elseif test="{= ${ovpCardProperties>/listFlavor} === \'carousel\'}"><core:Fragment fragmentName="sap.ovp.cards.v4.linklist.fragments.LinkListCarousel" type="XML"/></template:elseif></template:if></template:with></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/fragments/LinkListCarousel.fragment.xml":'<core:FragmentDefinition \n\txmlns:build="sap.build" \n\txmlns:core="sap.ui.core" \n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \n\txmlns="sap.m"\n\ttemplate:require="{\n\t\tCardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\',\n\t\tLinkListAnnotationhelper: \'sap/ovp/cards/linklist/AnnotationHelper\',\n\t\tModelAnnotationhelperV4: \'sap/ui/model/odata/v4/AnnotationHelper\'\n\t}"\t\n><Carousel \n\t\tid="pictureCarousel" \n\t\tloop="true" \n\t\tclass="sapOvpCardLinkListCarousel cardType" \n\t\tarrowsPlacement="PageIndicator"\n\t\tpages="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'CardAnnotationhelperV4.formatItems\'}"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListCarouselType}" writeToDom="true" /></customData><pages><VBox class="sapMCrslItemTableCell"><template:with \n\t\t\t\t\thelper="CardAnnotationhelperV4.resolveEntityTypePath" \n\t\t\t\t\tpath=\'ovpCardProperties>/identificationAnnotationPath\' \n\t\t\t\t\tvar=\'identification\'><template:if test="{= ${header>Title/Value} || ${header>Description/Value}}"><VBox\n\t\t\t\t\t\t\tclass="{= ${header>Title/Value} || ${header>Description/Value} ? \'sapOvpCarouselContentHeader\' : \'sapOvpCarouselContentHeader sapOvpCarouselHideContentHeader\' }"><template:if test="{path: \'identification>0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:then><Link \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkNavigationSingleTarget"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelperV4.formatField\'}"\n\t\t\t\t\t\t\t\t\t\treactiveAreaMode="Overlay"><customData><ovp:CustomData key="aria-label" value="{header>Title/Value@@ModelAnnotationhelperV4.format}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:then><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><Link \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPress"\n\t\t\t\t\t\t\t\t\t\tapp:dataAction="{entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action@@ModelAnnotationhelperV4.format}"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelperV4.formatField\'}"\n\t\t\t\t\t\t\t\t\t\treactiveAreaMode="Overlay"><customData><ovp:CustomData key="aria-label" value="{header>Title/Value@@ModelAnnotationhelperV4.format}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:elseif><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><Link \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\t\t\t\t\thref="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'LinkListAnnotationhelper.formatString\'}"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelperV4.formatField\'}"\n\t\t\t\t\t\t\t\t\t\treactiveAreaMode="Overlay"><customData><ovp:CustomData key="aria-label" value="{path: \'header>Title\', formatter: \'CardAnnotationhelperV4.formatField\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:elseif><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="CardAnnotationhelperV4.resolveEntityTypePath" \n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel"\n\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelperV4.formatField\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\treactiveAreaMode="Overlay"><customData><ovp:CustomData key="aria-label" value="{path: \'header>Title\', formatter: \'CardAnnotationhelperV4.formatField\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:if></template:with></template:elseif><template:else><Text \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelperV4.formatField\'}"/></template:else></template:if><Text \n\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListSubTitle"\n\t\t\t\t\t\t\t\ttext="{path: \'header>Description\', formatter: \'CardAnnotationhelperV4.formatField\'}"/></VBox></template:if><template:if test="{header>ImageUrl@@ModelAnnotationhelperV4.format\'}"><template:then><template:if test="{path: \'identification>0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:then><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkNavigationSingleTarget"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{header>ImageUrl@@ModelAnnotationhelperV4.format}"\n\t\t\t\t\t\t\t\t\t\t\talt="{path: \'header>Title/Value\', formatter: \'ModelAnnotationhelperV4.format\'}"/></HBox></template:then><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPress"\n\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action@@ModelAnnotationhelperV4.format}"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{header>ImageUrl@@sap.ui.model.odata.v4..format}"\n\t\t\t\t\t\t\t\t\t\t\talt="{header>Title/Value@@ModelAnnotationhelperV4.format}"/></HBox></template:elseif><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPress"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{header>ImageUrl@@ModelAnnotationhelperV4.format}"\n\t\t\t\t\t\t\t\t\t\t\talt="{header>Title/Value@@ModelAnnotationhelperV4.format}"/></HBox></template:elseif><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="CardAnnotationhelperV4.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><HBox \n\t\t\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer"\n\t\t\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Image \n\t\t\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\t\t\tdensityAware="true"\n\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{header>ImageUrl@@ModelAnnotationhelperV4.format}"\n\t\t\t\t\t\t\t\t\t\t\t\t\talt="{header>Title/Value@@ModelAnnotationhelperV4.format}"/></HBox></template:if></template:with></template:elseif><template:else><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{header>ImageUrl@@ModelAnnotationhelperV4.format}"\n\t\t\t\t\t\t\t\t\t\t\talt="{header>Title/Value@@ModelAnnotationhelperV4.format}"/></HBox></template:else></template:if></template:then><template:else><template:if test="{path: \'identification>0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:then><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkNavigationSingleTarget"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'LinkListAnnotationhelper.getIconPath\'}"/></template:then><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPress"\n\t\t\t\t\t\t\t\t\t\tapp:dataAction="{entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action@@ModelAnnotationhelperV4.format}"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'LinkListAnnotationhelper.getIconPath\'}"/></template:elseif><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPress"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'LinkListAnnotationhelper.getIconPath\'}"/></template:elseif><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="CardAnnotationhelperV4.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><core:Icon \n\t\t\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'LinkListAnnotationhelper.getIconPath\'}"/></template:if></template:with></template:elseif><template:else><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'LinkListAnnotationhelper.getIconPath\'}"/></template:else></template:if></template:else></template:if></template:with></VBox></pages><customData><ovp:CustomData key="aria-live" value="assertive" writeToDom="true" /></customData></Carousel></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/fragments/LinkListNavigationTargets.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Popover title="{ovplibResourceBundle>RELATED_APPS}" placement="Auto"><HBox class="sapOvpLinkListStandardHBox"><List showSeparators="None"\n\t\t\t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\' }"><CustomListItem></CustomListItem></List></HBox></Popover></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/fragments/LinkListStandard.fragment.xml":'<core:FragmentDefinition \n\txmlns:build="sap.build" \n\txmlns:core="sap.ui.core" \n\txmlns:l="sap.ui.layout" \n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \n\txmlns="sap.m"\n\ttemplate:require="{\n\t\tCardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\',\n\t\tLinkListAnnotationhelper: \'sap/ovp/cards/linklist/AnnotationHelper\',\n\t\tModelAnnotationhelperV4: \'sap/ui/model/odata/v4/AnnotationHelper\',\n\t\tModelAnnotationhelper: \'sap/ui/model/odata/AnnotationHelper\'\n\t}"\n><HBox id="ovpListRow" class="sapOvpLinkListStandardHBox cardType"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListType}" writeToDom="true" /></customData><List \n\t\t\tid="ovpLinkList"\n      \t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\'}"\n      \t\tshowSeparators="None"\n      \t\titems="{parts:[{path:\'entitySet>\'}, {path:\'header>\'}], formatter: \'LinkListAnnotationhelper.formatItems\'}"><template:with \n\t\t\t\thelper="CardAnnotationhelperV4.resolveEntityTypePath" \n\t\t\t\tpath=\'ovpCardProperties>/identificationAnnotationPath\' \n\t\t\t\tvar=\'identification\'><CustomListItem \n\t\t\t\t\tid="ovpCLI" \n\t\t\t\t\ttype="Active"\n\t\t\t\t\tpress="{= ${path: \'identification>0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'} ? \'onLinkNavigationSingleTarget\'\n\t\t\t\t\t\t: ${path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'} ? \'onLinkListActionPress\'\n\t\t\t\t\t\t: ${path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'LinkListAnnotationhelper.linkedAction\'} ? \'onLinkListLineItemUrl\'\n\t\t\t\t\t\t: ${path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'LinkListAnnotationhelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t: \'\'}"\n\t\t\t\t\tapp:dataAction="entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action@@ModelAnnotationhelperV4.format}"><HBox\n\t\t\t\t\t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCozyTitle\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCozyTitleImage\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCozyTitleIcon sapOvpCozyTitleIconQuickLink\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCozyTitleSubtitle\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCozyTitleImageSubtitle\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCozyTitleIconSubtitle\'\n\t\t\t\t\t\t\t: ${ovpCardProperties>/densityStyle} === \'compact\' &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCompactTitle\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCompactTitleImage\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCompactTitleIcon\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCompactTitleSubtitle\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCompactTitleImageSubtitle\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCompactTitleIconSubtitle\'\n\t\t\t\t\t\t\t: \'ovpDefaultClass\'}\n\t\t\t\t\t\t\t{= ${path: \'identification>0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t\t: ${path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t\t: ${path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'LinkListAnnotationhelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t\t: ${path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'LinkListAnnotationhelper.linkedAction\'} ? \'linkListHasPopover\'\n\t\t\t\t\t\t\t: \'\'} "><template:if test="{= ${header>ImageUrl} || ${header>TypeImageUrl}}"><template:then><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemImageCozy sapOvpListItemDynamicCozy\' : \'sapOvpLinkListItemImageCompact sapOvpListItemDynamic\' } sapOvpListItemQuickLink"><template:if test="{header>ImageUrl@@ModelAnnotationhelperV4.format\'}"><template:then><template:if test="{= ${ovpCardProperties>/densityStyle} === \'cozy\'}"><template:then><FlexBox height="40px"><Avatar \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sapUiSmallMarginEnd"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayShape="Circle" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplaySize="Custom"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcustomDisplaySize="40px"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{header>ImageUrl@@ModelAnnotationhelperV4.format}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinitials="{path: \'header>Initials\', formatter: \'LinkListAnnotationhelper.getAvatarInitials\'}"></Avatar></FlexBox></template:then><template:else><FlexBox height="40px"><Avatar \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sapUiSmallMarginEnd"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayShape="Circle" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplaySize="Custom"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcustomDisplaySize="36px"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{header>ImageUrl@@ModelAnnotationhelperV4.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinitials="{path: \'header>Initials\', formatter: \'LinkListAnnotationhelper.getAvatarInitials\'}"></Avatar></FlexBox></template:else></template:if></template:then><template:else><FlexBox height="40px"><core:Icon \n\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListIcon" \n\t\t\t\t\t\t\t\t\t\t\t\t\tsize="24px" \n\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpLinkListImageCenter"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'LinkListAnnotationhelper.getIconPath\'}"/></FlexBox></template:else></template:if></VBox></template:then></template:if><VBox class="sapOvpLinkListItem sapOvpListItemQuickLink {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpListItemDynamicCozy\' : \'sapOvpListItemDynamic\' }"><template:if test="{path: \'identification>0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:then><template:if test="{path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:then><template:with \n\t\t\t\t\t\t\t\t\t\t\t\thelper="CardAnnotationhelperV4.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelperV4.formatField\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treactiveAreaMode="Overlay"/></template:if></template:with></template:then><template:else><Label \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelperV4.formatField\'}"/></template:else></template:if></template:then><template:elseif test="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:if test="{path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:then><template:with \n\t\t\t\t\t\t\t\t\t\t\t\thelper="CardAnnotationhelperV4.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelperV4.formatField\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treactiveAreaMode="Overlay"/></template:if></template:with></template:then><template:else><Label \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'ModelAnnotationhelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelperV4.formatField\'}"/></template:else></template:if></template:elseif><template:elseif test="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:if test="{path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:then><template:with \n\t\t\t\t\t\t\t\t\t\t\t\thelper="CardAnnotationhelperV4.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelperV4.formatField\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treactiveAreaMode="Overlay"/></template:if></template:with></template:then><template:else><Label \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelperV4.formatField\'}"/></template:else></template:if></template:elseif><template:elseif test="{path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'LinkListAnnotationhelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="CardAnnotationhelperV4.resolveEntityTypePath" \n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelperV4.formatField\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\treactiveAreaMode="Overlay"/></template:if></template:with></template:elseif><template:else><Label \n\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'CardAnnotationhelperV4.formatField\'}"/></template:else></template:if><template:if test="{header>Description/Value}"><template:then><Label \n\t\t\t\t\t\t\t\t\t\tid="linkListSubTitleLabel"\n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListSubTitle"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Description\', formatter: \'CardAnnotationhelperV4.formatField\'}"/></template:then></template:if></VBox></HBox></CustomListItem></template:with></List></HBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/fragments/LinkListStaticDataCarousel.fragment.xml":'<core:FragmentDefinition \n\txmlns:build="sap.build" \n\txmlns:core="sap.ui.core" \n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \n\txmlns="sap.m"\n\ttemplate:require="{\n\t\tLinkListAnnotationhelper: \'sap/ovp/cards/linklist/AnnotationHelper\'\n\t}"\t\n><VBox><Carousel \n\t\t\tid="pictureCarousel" \n\t\t\tloop="true" \t\n\t\t\tclass="sapOvpCardLinkListCarousel cardType" \n\t\t\tarrowsPlacement="PageIndicator"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListCarouselType}" writeToDom="true" /></customData><pages><template:repeat \n\t\t\t\t\tlist="{ovpCardProperties>/staticContent}" \n\t\t\t\t\tvar="contentRow"><VBox class="sapMCrslItemTableCell"><template:if test="{= ${contentRow>title} || ${contentRow>subTitle}}"><VBox class="{= ${contentRow>title} || ${contentRow>subTitle} ? \'sapOvpCarouselContentHeader\' : \'sapOvpCarouselContentHeader sapOvpCarouselHideContentHeader\' }"><template:if test="{contentRow>dataAction}"><template:then><Link \n\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel--{contentRow>id}" \n\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\t\ttext="{contentRow>title}" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPressLocalData"\n\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{contentRow>dataAction}"\n\t\t\t\t\t\t\t\t\t\t\treactiveAreaMode="Overlay"><customData><ovp:CustomData key="aria-label" value="{contentRow>title}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:then><template:else><Link \n\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel--{contentRow>id}" \n\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\t\ttext="{contentRow>title}" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPressLocalData"\n\t\t\t\t\t\t\t\t\t\t\tapp:targetUri="{contentRow>targetUri}" \n\t\t\t\t\t\t\t\t\t\t\tapp:openInNewWindow="{contentRow>openInNewWindow}"\n\t\t\t\t\t\t\t\t\t\t\treactiveAreaMode="Overlay"><customData><ovp:CustomData key="aria-label" value="{contentRow>title}" writeToDom="true" /><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:else></template:if><Text \n\t\t\t\t\t\t\t\t\tid="linkListSubTitleLabel--{contentRow>id}" \n\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListSubTitle" \n\t\t\t\t\t\t\t\t\ttext="{contentRow>subTitle}"><customData><ovp:CustomData key="aria-label" value="{contentRow>subTitle}" writeToDom="true" /><ovp:CustomData key="role" value="text" writeToDom="true" /></customData></Text></VBox></template:if><template:if test="{contentRow>dataAction}"><template:then><template:if test="{path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'}"><template:then><HBox \n\t\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage--{contentRow>id}" \n\t\t\t\t\t\t\t\t\t\t\t\talt="{contentRow>imageAltText}" \n\t\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPressLocalData" \n\t\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{contentRow>dataAction}" \n\t\t\t\t\t\t\t\t\t\t\t\tdensityAware="true"\n                                                src="{path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.formatUrl\'}"></Image></HBox></template:then><template:else><core:Icon \n\t\t\t\t\t\t\t\t\t\t\tid="linkListIcon--{contentRow>id}" \n\t\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\t\tsrc="{contentRow>imageUri}" \n\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \n\t\t\t\t\t\t\t\t\t\t\tuseIconTooltip="false" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPressLocalData" \n\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{contentRow>dataAction}"/></template:else></template:if></template:then><template:else><template:if test="{path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'}"><template:then><HBox \n\t\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage--{contentRow>id}" \n\t\t\t\t\t\t\t\t\t\t\t\talt="{contentRow>imageAltText}"\n\t\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \n\t\t\t\t\t\t\t\t\t\t\t\tapp:targetUri="{contentRow>targetUri}" \n\t\t\t\t\t\t\t\t\t\t\t\tapp:openInNewWindow="{contentRow>openInNewWindow}"\n                                                densityAware="true" \n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPressLocalData"\n                                                src="{path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.formatUrl\'}"></Image></HBox></template:then><template:else><core:Icon \n\t\t\t\t\t\t\t\t\t\t\tid="linkListIcon--{contentRow>id}" \n\t\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\t\tsrc="{contentRow>imageUri}" \n\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \n\t\t\t\t\t\t\t\t\t\t\tuseIconTooltip="false" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPressLocalData" \n\t\t\t\t\t\t\t\t\t\t\tapp:targetUri="{contentRow>targetUri}"\n\t\t\t\t\t\t\t\t\t\t\tapp:openInNewWindow="{contentRow>openInNewWindow}"/></template:else></template:if></template:else></template:if></VBox></template:repeat></pages><customData><ovp:CustomData key="aria-live" value="assertive" writeToDom="true" /></customData></Carousel></VBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/fragments/LinkListStaticDataStandard.fragment.xml":'<core:FragmentDefinition \n    xmlns:build="sap.build" \n    xmlns:core="sap.ui.core" \n    xmlns:l="sap.ui.layout" \n    xmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" \n    xmlns:smartlink="sap.ui.comp.navpopover"\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \n    xmlns="sap.m"\n    template:require="{\n\t\tLinkListAnnotationhelper: \'sap/ovp/cards/linklist/AnnotationHelper\'\n\t}"    \n><HBox id="ovpListRow" class="sapOvpLinkListStandardHBox"><List \n            id="ovpLinkList"\n\t\t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\' } cardType"\n\t\t\tshowSeparators="None"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListType}" writeToDom="true" /></customData><items><template:repeat \n                    list="{ovpCardProperties>/staticContent}" \n                    var="contentRow"><CustomListItem \n                        id="{contentRow>id}" \n                        type="Active"\n                        press="{= ${contentRow>semanticObject} &amp;&amp; ${contentRow>action} ? \'onLinkListSemanticObjectPressLocalData\' : ${contentRow>dataAction} ? \'onLinkListActionPressLocalData\' : ${contentRow>semanticObject} &amp;&amp; !${contentRow>action} ? \'\' : \'onLinkListItemPressLocalData\'}"\n                        app:targetUri="{= ${contentRow>targetUri} ? ${contentRow>targetUri} : \'\'}"\n                        app:openInNewWindow="{=${contentRow>openInNewWindow} ? ${contentRow>openInNewWindow} :\'\' }"\n                        app:dataAction="{= ${contentRow>dataAction} ? ${contentRow>dataAction} : \'\'}"\n                        app:contentRowIndex="{path: \'contentRow>\', formatter: \'LinkListAnnotationhelper.contentRowIndex\'}"><HBox\n                            class="{= ${ovpCardProperties>/densityStyle} === \'cozy\' &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCozyTitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCozyTitleImage\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCozyTitleIcon sapOvpCozyTitleIconQuickLink\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCozyTitleSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCozyTitleImageSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCozyTitleIconSubtitle\'\n                            : ${ovpCardProperties>/densityStyle} === \'compact\' &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCompactTitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCompactTitleImage\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCompactTitleIcon\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCompactTitleSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCompactTitleImageSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCompactTitleIconSubtitle\'\n                            : \'ovpDefaultClass\'}"><template:if test="{path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.isImageUrlStaticData\'}"><template:then><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemImageCozy\' : \'sapOvpLinkListItemImageCompact\' } sapOvpListItemQuickLink"><template:if test="{= ${ovpCardProperties>/densityStyle} === \'cozy\'}"><template:then><FlexBox height="40px"><Avatar \n                                                        id="linkListImage--{contentRow>id}"\n                                                        class="sapUiSmallMarginEnd"\n                                                        tooltip="{contentRow>toolTip}"\n                                                        displayShape="Circle" \n                                                        displaySize="Custom"\n                                                        customDisplaySize="40px"\n                                                        src="{path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.formatUrl\'}"></Avatar></FlexBox></template:then><template:else><FlexBox height="40px"><Avatar \n                                                        id="linkListImage--{contentRow>id}"\n                                                        class="sapUiSmallMarginEnd"\n                                                        tooltip="{contentRow>toolTip}"\n                                                        displayShape="Circle" \n                                                        displaySize="Custom"\n                                                        customDisplaySize="36px"\n                                                        src="{path: \'contentRow>imageUri\', formatter: \'LinkListAnnotationhelper.formatUrl\'}"></Avatar></FlexBox></template:else></template:if></VBox></template:then><template:elseif test="{contentRow>imageUri}"><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemIconCozy\' : \'sapOvpLinkListItemIconCompact\' } sapOvpListItemQuickLink"><FlexBox height="40px"><core:Icon \n                                                id="linkListIcon--{contentRow>id}"\n                                                class="sapOvpLinkListImageCenter"\n                                                tooltip="{contentRow>toolTip}" \n                                                useIconTooltip="false"\n                                                size="22px" \n                                                src="{contentRow>imageUri}"/></FlexBox></VBox></template:elseif></template:if><template:if test="{contentRow>dataAction}"><template:then><VBox class="sapOvpLinkListItem sapOvpListItemQuickLink"><Label \n                                            id="linkListTitleLabel--{contentRow>id}"\n                                            text="{contentRow>title}"\n                                            class="{= ${contentRow>subTitle} || !${contentRow>subTitle} &amp;&amp; !${contentRow>imageUri} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"/><Label \n                                            id="linkListSubTitleLabel--{contentRow>id}" \n                                            class="sapOvpCardLinkListSubTitle" text="{contentRow>subTitle}"/></VBox></template:then><template:elseif test="{= ${contentRow>semanticObject} &amp;&amp; ${contentRow>action} }"><VBox class="sapOvpLinkListItem sapOvpListItemQuickLink"><Label \n                                            id="linkListTitleLabel--{contentRow>id}"\n                                            text="{contentRow>title}"\n                                            class="{= ${contentRow>subTitle} || !${contentRow>subTitle} &amp;&amp; !${contentRow>imageUri} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"/><Label id="linkListSubTitleLabel--{contentRow>id}" class="sapOvpCardLinkListSubTitle" text="{contentRow>subTitle}"/></VBox></template:elseif><template:else><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemCozy\' : \'sapOvpLinkListItemCompact\' } sapOvpListItemQuickLink"><Label \n                                            id="linkListTitleLabel--{contentRow>id}"\n                                            text="{contentRow>title}"\n                                            class="{= ${contentRow>subTitle} || !${contentRow>subTitle} &amp;&amp; !${contentRow>imageUri} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"/><Label \n                                            id="linkListSubTitleLabel--{contentRow>id}" \n                                            class="sapOvpCardLinkListSubTitle" \n                                            text="{contentRow>subTitle}"/></VBox></template:else></template:if></HBox></CustomListItem></template:repeat></items></List></HBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/list/CondensedBarList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:navpopover="sap.ui.comp.navpopover"\n    xmlns:micro="sap.suite.ui.microchart"\n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n        CardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\',\n        ModelAnnotationhelperV4: \'sap/ui/model/odata/v4/AnnotationHelper\'\n\t}"  \n><items><CustomListItem\n            core:require="{\n                CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n                CardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\'\n            }"\n            id="listItem"\n            type="Active"\n            press="onListItemPress"\n            class="sapOvpBarList sapOvpBarCondensedList"><template:if test="{= ${ovpCardProperties>/showLineItemDetail} === true}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.LineItemDetails" type="XML"/><Link\n                            class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"\n                            press="onContactDetailsLinkPress"\n                            reactiveAreaMode="Overlay"></Link></VBox></template:then><template:elseif test="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'CardAnnotationhelper.semanticObjectOfFirstDataField\'}"><navpopover:SmartLink\n                        class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                        text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"\n                        semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'CardAnnotationhelper.semanticObjectOfFirstDataField\'}"\n                        contactAnnotationPath="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                        forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'CardAnnotationhelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:elseif><template:else><Text\n                        id="DataField"\n                        class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                        text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"/></template:else></template:if><HBox class="sapOvpBarListHBox sapOvpBarStandardList"><micro:ComparisonMicroChart\n                    id= "BarChartDataPoint"\n                    class="sapOvpBarListComparisonMicroChartAlignment" \n                    width="100%"\n                    shrinkable="true"\n                    colorPalette="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.colorPaletteForComparisonMicroChart\'}"\n                    minValue="{minMaxModel>/minValue}"\n                    maxValue="{minMaxModel>/maxValue}"><micro:data><micro:ComparisonMicroChartData \n                            displayValue=" "\n                            value="{= \'{path: \\\'\' + ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getFirstDataPointValue\'} + \'\\\', formatter: \\\'.returnBarChartValue\\\'}\' }"\n                            color="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointColor\'}"></micro:ComparisonMicroChartData></micro:data></micro:ComparisonMicroChart><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 0}" ><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.isFirstDataPointPercentageUnit\'}}" ><template:then><ObjectNumber\n                                id="DataPoint1"\n                                class="sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpBarListObjectNumberPercentage"\n                                textAlign="End"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataPointValueOnIndex\'}"/></template:then><template:else><ObjectNumber\n                                id="DataPoint1"\n                                class="sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpObjectNumber"\n                                textAlign="End"\n                                state="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointState\'}"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'CardAnnotationhelperV4.formatObjectNumber\'}"\n                                unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'CardAnnotationhelper.formatUnit\'}"/></template:else></template:if></template:if><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.isFirstContactAnnotation\'} === true}"><template:then><template:repeat \n                            list="{path:\'lineItem>\'}" \n                            var="dataField"><template:if test="{= ${dataField>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:then><template:if test="{= ${dataField>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                path="dataField>Target/$AnnotationPath"\n                                                helper="ModelAnnotationhelperV4.resolve$Path"\n                                                var="contact"><VBox class="textAlignRight"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n                                                        binding="{= ${ path: \'dataField>Target/$AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField>Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField>Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                        text="{contact>fn@@ModelAnnotationhelperV4.format}"\n                                                        press="onContactDetailsLinkPress"\n                                                        reactiveAreaMode="Overlay"></Link></VBox></template:with></template:then></template:if></template:then></template:if></template:repeat></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 1}" ><ObjectNumber\n                                id="DataPoint2"\n                                class="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointState\'} === \'None\' ?\n                                        \'sapOvpBarListObjectNumber sapOvpBarListSubDataField\' : \'sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber"\n                                textAlign="End"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'CardAnnotationhelperV4.formatObjectNumber\'}"\n                                state="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatSecondDataPointState\'}"\n                                unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}], formatter: \'CardAnnotationhelper.formatUnit\'}"/></template:if></template:else></template:if></HBox></CustomListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/list/ExtendedBarList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:navpopover="sap.ui.comp.navpopover"\n    xmlns:micro="sap.suite.ui.microchart"\n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n        CardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\',\n        ModelAnnotationhelperV4: \'sap/ui/model/odata/v4/AnnotationHelper\'\n\t}"   \n><items><CustomListItem\n            core:require="{\n                CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n                CardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\'\n            }"\n            id="listItem"\n            type="Active"\n            press="onListItemPress"><HBox class="sapOvpBarListHBox sapOvpExtendedBarListHBox"><VBox class="sapOvpBarListVBoxLeft"><template:if\n                        test="{= ${ovpCardProperties>/showLineItemDetail} === true}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.LineItemDetails" type="XML"/><Link\n                                    class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"\n                                    press="onContactDetailsLinkPress"\n                                    reactiveAreaMode="Overlay"></Link></VBox></template:then><template:elseif\n                        test="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'CardAnnotationhelper.semanticObjectOfFirstDataField\'}"><navpopover:SmartLink\n                                class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"\n                                semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'CardAnnotationhelper.semanticObjectOfFirstDataField\'}"\n                                contactAnnotationPath="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelper.checkNavTargetForContactAnno\'}" \n                                enableAvailableActionsPersonalization="false"\n                                forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'CardAnnotationhelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:elseif><template:else><Text\n                                id="DataField1"\n                                class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"/></template:else></template:if><template:if\n                            test="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'CardAnnotationhelper.semanticObjectOfSecondDataField\'}"><template:then><navpopover:SmartLink\n                                class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"\n                                semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'CardAnnotationhelper.semanticObjectOfSecondDataField\'}"\n                                contactAnnotationPath="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'CardAnnotationhelper.checkNavTargetForContactAnno\'}" \n                                enableAvailableActionsPersonalization="false"\n                                forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'CardAnnotationhelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text\n                                id="DataField2"\n                                class="sapOvpBarListDataField sapOvpBarListSubDataField sapOvpExtendedBarListBlock sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"/></template:else></template:if><layoutData><FlexItemData growFactor="1"/></layoutData><micro:ComparisonMicroChart \n                        id="BarChartDataPoint" \n                        class="sapOvpBarListComparisonMicroChartAlignment" \n                        width="100%" \n                        height="1rem"\n                        colorPalette="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.colorPaletteForComparisonMicroChart\'}"\n                        minValue="{minMaxModel>/minValue}"\n                        maxValue="{minMaxModel>/maxValue}"><micro:data><micro:ComparisonMicroChartData \n                                displayValue=" "\n                                value="{= \'{path: \\\'\' + ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getFirstDataPointValue\'} + \'\\\', formatter: \\\'.returnBarChartValue\\\'}\' }"\n                                color="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointColor\'}"></micro:ComparisonMicroChartData></micro:data></micro:ComparisonMicroChart></VBox><VBox class="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 0 ? \'sapOvpBarListVBoxRight\' : \'sapOvpListEmptyField\'}"><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.isFirstContactAnnotation\'} === true}"><template:then><template:repeat \n                                list="{path:\'lineItem>\'}" \n                                var="dataField"><template:if test="{= ${dataField>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:then><template:if test="{= ${dataField>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                    path="dataField>Target/$AnnotationPath"\n                                                    helper="ModelAnnotationhelperV4.resolve$Path"\n                                                    var="contact"><VBox class="textAlignRight" width="100%"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n                                                            binding="{= ${ path: \'dataField>Target/$AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField>Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField>Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                            text="{contact>fn@@ModelAnnotationhelperV4.format}"\n                                                            textAlign="Right"\n                                                            press="onContactDetailsLinkPress"\n                                                            reactiveAreaMode="Overlay"></Link></VBox></template:with></template:then></template:if></template:then></template:if></template:repeat></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 1}" ><ObjectNumber\n                                    id="DataPoint2"\n                                    class="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointState\'} === \'None\' ?\n                                        \'sapOvpBarListObjectNumber\' : \'sapOvpBarListObjectNumber sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber"\n                                    textAlign="End"\n                                    number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'CardAnnotationhelperV4.formatObjectNumber\'}"\n                                    unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}], formatter: \'CardAnnotationhelper.formatUnit\'}"\n                                    state="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatSecondDataPointState\'}"/></template:if></template:else></template:if><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 2}" ><ObjectNumber\n                            id="DataPoint3"\n                            class="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointState\'} === \'None\' ?\n                                        \'sapOvpBarListObjectNumber\' : \'sapOvpBarListObjectNumber sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber"\n                            textAlign="End"\n                            number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'CardAnnotationhelperV4.formatObjectNumber\'}"\n                            unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataPointIndex\'}], formatter: \'CardAnnotationhelper.formatUnit\'}"\n                            state="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatThirdDataPointState\'}"/></template:if><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.isFirstDataPointPercentageUnit\'}}" ><template:then><ObjectNumber\n                                id="BarChartValue"\n                                class="sapOvpBarListObjectNumber sapOvpBarListObjectNumberPercentage sapOvpObjectNumber"\n                                textAlign="End"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataPointValueOnIndex\'}"/></template:then><template:else><ObjectNumber\n                                id="BarChartStateValue"\n                                class="sapOvpBarListObjectNumber valueStateText "\n                                textAlign="End"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'CardAnnotationhelperV4.formatObjectNumber\'}"\n                                unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'CardAnnotationhelper.formatUnit\'}"\n                                state="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointState\'}"></ObjectNumber></template:else></template:if></VBox></HBox></CustomListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/list/List.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n\t\tCardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\'\n\t}"    \n><template:if test="{= ${ovpCardProperties>/imageSupported} &amp;&amp; ${ovpCardProperties>/listType} === \'condensed\' }" ><template:then><core:Fragment fragmentName="sap.ovp.cards.v4.list.StandardListImage" type="XML"/></template:then><template:else><List \n                id="ovpList" \n                items="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'CardAnnotationhelperV4.formatItems\'}" \n                class = "listCardType"><template:with \n                    path=\'ovpCardProperties>/annotationPath\'\n                    helper="CardAnnotationhelperV4.resolveEntityTypePath" \n                    var=\'lineItem\'><template:if test="{= ${ovpCardProperties>/listType} === \'extended\'}" ><template:then><template:if test="{= ${ovpCardProperties>/listFlavor} === \'bar\'}" ><template:then><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>barChartCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.v4.list.ExtendedBarList" type="XML"/></template:then><template:else><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>listCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.v4.list.ObjectList" type="XML"/></template:else></template:if></template:then><template:else><template:if test="{= ${ovpCardProperties>/listFlavor} === \'bar\'}" ><template:then><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>barChartCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.v4.list.CondensedBarList" type="XML"/></template:then><template:else><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>listCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.v4.list.StandardList" type="XML"/></template:else></template:if></template:else></template:if></template:with></List></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/v4/list/ObjectList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"\n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n        CardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\'\n\t}"   \n><items><ObjectListItem\n            id="listItem"\n            core:require="{\n                CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n                CardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\'\n            }"\n            class="sapOvpObjectListItem sapOvpListFragment sapUiContentPadding"\n            title="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"\n            number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataPointOrField\'}"\n            numberState="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 0 ? ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointState\'} : \'None\' }"\n            type="Active"\n            press="onListItemPress"><attributes><ObjectAttribute \n                    id="listItem2Row1Column"\n                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"/><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 1}" ><template:then><ObjectAttribute \n                            id="listItem3row1column"\n                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 0}" ><template:then><ObjectAttribute \n                                    id="listItem3row1column"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fourthDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"/></template:then><template:else><ObjectAttribute \n                                    id="listItem3row1column" \n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fifthDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"/></template:else></template:if></template:else></template:if></attributes><firstStatus><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 1}" ><template:then><ObjectStatus\n                            id="listItem2row2column"\n                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataPointValueOnIndex\'}"\n                            state="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatSecondDataPointState\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 0}" ><template:then><ObjectStatus\n                                    id="listItem2row2column"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"\n                                    state="None"/></template:then><template:else><ObjectStatus\n                                    id="listItem2row2column"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fourthDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"\n                                    state="None"/></template:else></template:if></template:else></template:if></firstStatus><secondStatus><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 2}" ><template:then><ObjectStatus\n                            id="listItem3row2column"\n                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataPointIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataPointValueOnIndex\'}"\n                            state="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatThirdDataPointState\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 1}" ><template:then><ObjectStatus\n                                id="listItem3row2column"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fourthDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"\n                                state="None"/></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 0}" ><template:then><ObjectStatus\n                                            id="listItem3row2column"\n                                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fifthDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"\n                                            state="None"/></template:then><template:else><ObjectStatus\n                                            id="listItem3row2column"\n                                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/sixthDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"\n                                            state="None"/></template:else></template:if></template:else></template:if></template:else></template:if></secondStatus></ObjectListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/list/StandardList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"\n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n        CardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\'\n\t}"   \n><items><StandardListItem\n            id="listItem"\n            core:require="{\n                CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n                CardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\'\n            }"\n            class="sapOvpStandardListItem"\n            title="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"\n            description="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"\n            info="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataPointOrField\'}"\n            infoState="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 0 ? ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointState\'} : \'None\' }"\n            type="Active"\n            press="onListItemPress"></StandardListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/list/StandardListImage.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"\n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n        CardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\'\n\t}"\n><List \n        id="ovpList" \n        items="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'CardAnnotationhelperV4.formatItems\'}"><template:with \n            path=\'ovpCardProperties>/annotationPath\' \n            helper="CardAnnotationhelperV4.resolveEntityTypePath" \n            var=\'lineItem\'><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>imageListCardType}" writeToDom="true" /></customData><items><StandardListItem\n                    core:require="{\n                        CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n                        CardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\'\n                    }"\n                    id="listItem"\n                    class="sapOvpStandardListItem sapOvpStandardListItemImagesIcons"\n                    icon="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatImageUrl\'}"\n                    iconInset = "false"\n                    title="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"\n                    description="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"\n                    info="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataPointOrField\'}"\n                    infoState="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 0 ? ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointState\'} : \'None\' }"\n                    type="Active"\n                    press="onListItemPress"></StandardListItem></items></template:with></List></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/table/Table.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n        CardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\'\n\t}"    \n><Table \n        id="ovpTable"\n        class="ovpTableClass cardType"\n        items="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'CardAnnotationhelperV4.formatItems\'}"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>tableCard}" writeToDom="true"/></customData><template:if test="{= ${ovpCardProperties>/layoutDetail} === \'resizable\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.v4.table.TableDashBoardLayout" type="XML"/></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.v4.table.TableEasyScanLayout" type="XML"/></template:else></template:if></Table></core:FragmentDefinition>',
	"sap/ovp/cards/v4/table/TableDashBoardLayout.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:navpopover="sap.ui.comp.navpopover"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n        CardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\',\n        ModelAnnotationhelperV4: \'sap/ui/model/odata/v4/AnnotationHelper\'\n\t}"    \n><template:with\n        path=\'ovpCardProperties>/annotationPath\'           \n        helper="CardAnnotationhelperV4.resolveEntityTypePath" \n        var=\'eachItem\'><template:with  \n            path="eachItem>" \n            helper="CardAnnotationhelper.removeDuplicateDataField"\n            var="lineItem"><columns><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField"><template:if test="{= ${dataField>@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/High\'}"><template:then><template:if test="{= ${dataField>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField>\', formatter: \'CardAnnotationhelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                            text="{path: \'dataField>\', formatter: \'CardAnnotationhelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'Left\' : ${dataField>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                            class="displayBlock {= ${path: \'dataField>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'textAlignLeft\' : ${dataField>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                            text="{path: \'dataField>\', formatter: \'CardAnnotationhelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField1"><template:if test="{= ${dataField1>@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Medium\'}"><template:then><template:if test="{= ${dataField1>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField1>\', formatter: \'CardAnnotationhelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                            text="{path: \'dataField1>\', formatter: \'CardAnnotationhelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField1>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField1>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'Left\' : ${dataField1>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                            class="displayBlock {= ${path: \'dataField1>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'textAlignLeft\' : ${dataField1>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                            text="{path: \'dataField1>\', formatter: \'CardAnnotationhelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField2"><template:if\n                        test="{= ${dataField2>@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Low\'}"><template:then><template:if test="{= ${dataField2>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField2>\', formatter: \'CardAnnotationhelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                            text="{path: \'dataField2>\', formatter: \'CardAnnotationhelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField2>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField2>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'Left\' : ${dataField2>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                            class="displayBlock {= ${path: \'dataField2>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'textAlignLeft\' : ${dataField2>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                            text="{path: \'dataField2>\', formatter: \'CardAnnotationhelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField3"><template:if test="{=  !${dataField3>@com.sap.vocabularies.UI.v1.Importance/$EnumMember}}"><template:then><template:if test="{= ${dataField3>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField3>\', formatter: \'CardAnnotationhelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                            text="{path: \'dataField3>\', formatter: \'CardAnnotationhelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField3>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField3>\',  \n                                            formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'Left\':\n                                            ${dataField3>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                            class="displayBlock {= ${path: \'dataField3>\', \n                                                formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'textAlignLeft\':\n                                                ${dataField3>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                            text="{path: \'dataField3>\', formatter: \'CardAnnotationhelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat></columns><items><ColumnListItem\n                    core:require="{\n                        CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n                        CardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\'\n                    }"\n                    id = "tableItem"\n                    type="Active"\n                    press="onColumnListItemPress"><cells><template:repeat \n                            list="{path:\'lineItem>\'}" \n                            var="dataField4"><template:if test="{= ${dataField4>@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/High\'}"><template:then><template:if test="{= ${dataField4>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if\n                                                test="{= (${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getFirstDataFieldName\'} === ${dataField4>Label} &amp;&amp; ${ovpCardProperties>/showLineItemDetail})}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.LineItemDetails" type="XML"/><Link\n                                                            class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                            text="{path: \'dataField4>\', formatter: \'CardAnnotationhelperV4.formatDataFieldValueGeneric\'}"\n                                                            press="onContactDetailsLinkPress"\n                                                            reactiveAreaMode="Overlay"></Link></VBox></template:then><template:elseif\n                                                    test="{parts:[{path:\'entitySet>\'}, {path:\'dataField4>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"><navpopover:SmartLink\n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                        text="{path: \'dataField4>\', formatter: \'CardAnnotationhelperV4.formatDataFieldValueGeneric\'}"\n                                                        semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField4>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                        fieldName="{parts:[{path:\'entitySet>\'}, {path:\'dataField4>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                        contactAnnotationPath="{path: \'dataField4>\', formatter: \'CardAnnotationhelper.checkNavTargetForContactAnno\'}" \n                                                        enableAvailableActionsPersonalization="false"\n                                                        forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'CardAnnotationhelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:elseif><template:else><Text \n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField4>\', formatter: \'CardAnnotationhelperV4.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField4>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField4>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                        path="dataField4>Target/$AnnotationPath" \n                                                        helper="ModelAnnotationhelperV4.resolve$Path" \n                                                        var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n                                                                binding="{= ${ path: \'dataField4>Target/$AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField4>Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField4>Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{contact>fn@@ModelAnnotationhelperV4.format}"\n                                                                press="onContactDetailsLinkPress"\n                                                                reactiveAreaMode="Overlay"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField4>\', formatter: \'CardAnnotationhelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><ObjectStatus class="{= ${path: \'dataField4>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                                        text="{path: \'dataField4>\', formatter: \'CardAnnotationhelperV4.formatDataPointValue\'}" \n                                                        state="{path: \'dataField4>\', formatter: \'CardAnnotationhelper.formatDataPointStateGeneric\'}"/></template:elseif><template:else><ObjectNumber\n                                                        class="{= ${path: \'dataField4>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} + \' sapOvpObjectNumber\'}"\n                                                        number="{parts:[{path:\'dataField4>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'CardAnnotationhelperV4.formatDataPointValue\'}"\n                                                        unit="{parts:[{path:\'dataField4>\'}], formatter: \'CardAnnotationhelper.formatUnit\'}"\n                                                        state="{path: \'dataField4>\', formatter: \'CardAnnotationhelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                            list="{path:\'lineItem>\'}" \n                            var="dataField5"><template:if\n                                test="{= ${dataField5>@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Medium\'}"><template:then><template:if test="{= ${dataField5>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if\n                                                test="{parts:[{path:\'entitySet>\'}, {path:\'dataField5>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink\n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                        text="{path: \'dataField5>\', formatter: \'CardAnnotationhelperV4.formatDataFieldValueGeneric\'}"\n                                                        semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField5>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                        fieldName="{parts:[{path:\'entitySet>\'}, {path:\'dataField5>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                        contactAnnotationPath="{path: \'dataField5>\', formatter: \'CardAnnotationhelper.checkNavTargetForContactAnno\'}" \n                                                        enableAvailableActionsPersonalization="false"\n                                                        forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'CardAnnotationhelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text \n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField5>\', formatter: \'CardAnnotationhelperV4.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField5>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField5>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                        path="dataField5>Target/$AnnotationPath"\n                                                        helper="ModelAnnotationhelperV4.resolve$Path" \n                                                        var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n                                                                binding="{= ${ path: \'dataField5>Target/$AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField5>Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField5>Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{contact>fn@@ModelAnnotationhelperV4.format}"\n                                                                press="onContactDetailsLinkPress"\n                                                                reactiveAreaMode="Overlay"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField5>\', formatter: \'CardAnnotationhelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><ObjectStatus class="{= ${path: \'dataField5>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                                        text="{path: \'dataField5>\', formatter: \'CardAnnotationhelperV4.formatDataPointValue\'}" \n                                                        state="{path: \'dataField5>\', formatter: \'CardAnnotationhelper.formatDataPointStateGeneric\'}"/></template:elseif><template:else><ObjectNumber\n                                                        class="{= ${path: \'dataField5>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} + \' sapOvpObjectNumber\'}"\n                                                        number="{parts:[{path:\'dataField5>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'CardAnnotationhelperV4.formatDataPointValue\'}"\n                                                        unit="{parts:[{path:\'dataField5>\'}], formatter: \'CardAnnotationhelper.formatUnit\'}"\n                                                        state="{path: \'dataField5>\', formatter: \'CardAnnotationhelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                            list="{path:\'lineItem>\'}" \n                            var="dataField6"><template:if test="{= ${dataField6>@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Low\'}"><template:then><template:if test="{= ${dataField6>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if test="{parts:[{path:\'entitySet>\'}, {path:\'dataField6>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink\n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                        text="{path: \'dataField6>\', formatter: \'CardAnnotationhelperV4.formatDataFieldValueGeneric\'}"\n                                                        semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField6>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                        fieldName="{parts:[{path:\'entitySet>\'}, {path:\'dataField6>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                        contactAnnotationPath="{path: \'dataField6>\', formatter: \'CardAnnotationhelper.checkNavTargetForContactAnno\'}" \n                                                        enableAvailableActionsPersonalization="false"\n                                                        forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'CardAnnotationhelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text \n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField6>\', formatter: \'CardAnnotationhelperV4.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField6>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField6>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                        path="dataField6>Target/$AnnotationPath" \n                                                        helper="ModelAnnotationhelperV4.resolve$Path" \n                                                        var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n                                                                binding="{= ${ path: \'dataField6>Target/$AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField6>Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField6>Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{contact>fn@@ModelAnnotationhelperV4.format}"\n                                                                press="onContactDetailsLinkPress"\n                                                                reactiveAreaMode="Overlay"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField6>\', formatter: \'CardAnnotationhelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><ObjectStatus class="{= ${path: \'dataField6>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                                        text="{path: \'dataField6>\', formatter: \'CardAnnotationhelperV4.formatDataPointValue\'}" \n                                                        state="{path: \'dataField6>\', formatter: \'CardAnnotationhelper.formatDataPointStateGeneric\'}"/></template:elseif><template:else><ObjectNumber\n                                                        class="{= ${path: \'dataField6>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} + \' sapOvpObjectNumber\'}"\n                                                        number="{parts:[{path:\'dataField6>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'CardAnnotationhelperV4.formatDataPointValue\'}"\n                                                        unit="{parts:[{path:\'dataField6>\'}], formatter: \'CardAnnotationhelper.formatUnit\'}"\n                                                        state="{path: \'dataField6>\', formatter: \'CardAnnotationhelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                            list="{path:\'lineItem>\'}" \n                            var="dataField7"><template:if test="{=  !${dataField7>@com.sap.vocabularies.UI.v1.Importance/$EnumMember} }"><template:then><template:if test="{= ${dataField7>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if\n                                                test="{parts:[{path:\'entitySet>\'}, {path:\'dataField7>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink\n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                        text="{path: \'dataField7>\', formatter: \'CardAnnotationhelperV4.formatDataFieldValueGeneric\'}"\n                                                        semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField7>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                        fieldName="{parts:[{path:\'entitySet>\'}, {path:\'dataField7>\'}], formatter: \'CardAnnotationhelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                        contactAnnotationPath="{path: \'dataField7>\', formatter: \'CardAnnotationhelper.checkNavTargetForContactAnno\'}" \n                                                        enableAvailableActionsPersonalization="false"\n                                                        forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'CardAnnotationhelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text \n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField7>\', formatter: \'CardAnnotationhelperV4.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField7>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField7>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with\n                                                        path="dataField7>Target/$AnnotationPath" \n                                                        helper="ModelAnnotationhelperV4.resolve$Path" \n                                                        var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n                                                                binding="{= ${ path: \'dataField7>Target/$AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField7>Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField7>Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{contact>fn@@ModelAnnotationhelperV4.format}"\n                                                                press="onContactDetailsLinkPress"\n                                                                reactiveAreaMode="Overlay"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField7>\', formatter: \'CardAnnotationhelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><ObjectStatus class="ovpSmartLink {= ${path: \'dataField7>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} === \'textAlignLeft\' ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                                        text="{path: \'dataField7>\', formatter: \'CardAnnotationhelperV4.formatDataPointValue\'}" \n                                                        state="{path: \'dataField7>\', formatter: \'CardAnnotationhelper.formatDataPointStateGeneric\'}"/></template:elseif><template:else><ObjectNumber\n                                                        class="{= ${path: \'dataField7>\', formatter: \'CardAnnotationhelper.checkCriticalityGenericForTableStatus\'} + \' sapOvpObjectNumber\'}"\n                                                        number="{parts:[{path:\'dataField7>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'CardAnnotationhelperV4.formatDataPointValue\'}"\n                                                        unit="{parts:[{path:\'dataField7>\'}], formatter: \'CardAnnotationhelper.formatUnit\'}"\n                                                        state="{path: \'dataField7>\', formatter: \'CardAnnotationhelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat></cells></ColumnListItem></items></template:with></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/v4/table/TableEasyScanLayout.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    template:require="{\n\t\tCardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n        CardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\'\n\t}"    \n><template:if test="{= ${ovpCardProperties>/disableTableCardFlexibility} === true}"><template:then><template:with \n                path=\'ovpCardProperties>/annotationPath\'\n                helper="CardAnnotationhelperV4.resolveEntityTypePath" \n                var=\'lineItem\'><columns><Column><Text text="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.getFirstDataFieldName\'}"/></Column><Column><Text text="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.getSecondDataFieldName\'}"/></Column><Column hAlign="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'Center\' : \'Right\'}"><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 0}"><template:then><Text \n                                    class="displayBlock {= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                    text="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.getLabelForFirstDataPoint\'}"/></template:then><template:else><Text text="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.getThirdDataFieldName\'}"/></template:else></template:if></Column></columns><items><ColumnListItem\n                        core:require="{\n                            CardAnnotationhelper: \'sap/ovp/cards/AnnotationHelper\',\n                            CardAnnotationhelperV4: \'sap/ovp/cards/v4/V4AnnotationHelper\'\n                        }"\n                        id = "tableItem"\n                        type="Active"\n                        press="onColumnListItemPress"><cells><Text \n                                class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"/><Text \n                                class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"/><template:if test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.getDataPointsCount\'} > 0}"><template:then><template:if\n                                        test="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.isFirstDataPointCriticality\'} === true &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><template:then><ObjectStatus class="textAlignCenter"\n                                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataPointValueOnIndex\'}" \n                                                state="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointState\'}"/></template:then><template:else><ObjectNumber \n                                                class="{= ${path: \'lineItem>\', formatter: \'CardAnnotationhelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'CardAnnotationhelperV4.formatObjectNumber\'}"\n                                                unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'CardAnnotationhelper.formatUnit\'}"\n                                                state="{path: \'lineItem>\', formatter: \'CardAnnotationhelper.formatFirstDataPointState\'}"/></template:else></template:if></template:then><template:else><Text \n                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                        text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'CardAnnotationhelperV4.formatDataFieldValueOnIndex\'}"/></template:else></template:if></cells></ColumnListItem></items></template:with></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.v4.table.TableDashBoardLayout" type="XML"/></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/insights/Preview.fragment.xml":'<Dialog\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:w="sap.ui.integration.widgets"\n    xmlns:smartForm="sap.ui.comp.smartform"\n\txmlns:smartField="sap.ui.comp.smartfield"\n    title="{ovpResourceModel>INT_ADD_CARD_TO_REPOSITORY_DT}"\n    resizable="true"\n    contentWidth= "352px"\n    contentHeight = "712px"\n    draggable="true"><content><NavContainer id="navCon"><Page id="previewPage" showHeader="false" backgroundDesign="Transparent"><FlexBox\n                    direction="Column" \n                    id="flexBoxNew" \n                    justifyContent="Center" \n                    class="sapUiNoMargin sapMPageBgSolid" ><Title \n                        id="previewTitle" \n                        text="{ovpResourceModel>INT_Preview_Title}" \n                        class="sapUiSmallMarginBegin sapUiTinyMarginTop"\n                        visible="false"/><FlexBox \n                        justifyContent="Center" \n                        id="subFlexBoxNew"  \n                        class="sapUiTinyMargin sapUiSmallMarginTopBottom"/><HBox id="ovpIntPreviewOverflowLayer" class="sapMFlexBoxJustifyCenter" height="0" visible="false"><HBox class="ovpIntPreviewOverflowLayer"/></HBox></FlexBox><VBox class="sapUiSmallMargin"><FlexBox direction="Column"><items><Label \n                                id="labelTitle" \n                                text="{ovpResourceModel>INT_Preview_TitleField_Label}"\n                                required="true"\n                                visible="true" \n                                labelFor="titleTextInput"/><Input \n                                id="titleTextInput" \n                                visible="true"\n                                liveChange=".handleTitleLiveChange" \n                                value="{/dialogSettings/cardTitle}" \n                                valueState="{/dialogSettings/valueState}" \n                                valueStateText="{/dialogSettings/valueStateText}"/><Label \n                                id="labelSubTitle" \n                                text="{ovpResourceModel>INT_Preview_SubTitleTitleField_Label}"\n                                required="false" \n                                class="sapUiTinyMarginTop"\n                                visible="true" \n                                labelFor="subTitleTextInput"/><Input  \n                                id="subTitleTextInput"\n                                visible="true" \n                                value="{/dialogSettings/cardSubTitle}"\n                                liveChange=".handleSubTitleLiveChange"/></items></FlexBox></VBox></Page><Page id="filterDetailPage"><FlexBox direction="Column" class="sapUiContentPadding" id="flexBoxFilterPage" justifyContent="Center"></FlexBox></Page></NavContainer></content><buttons><Button text="{ovpResourceModel>INT_DIALOG_Ok}" type="Emphasized" press=".confirmActionHandler"/><Button text="{ovpResourceModel>INT_DIALOG_CANCEL}" press=".handleCancel" /></buttons></Dialog>',
	"sap/ovp/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ovp","type":"library","embeds":["app"],"applicationVersion":{"version":"1.141.0"},"title":"SAP library: sap.ovp","description":"SAP library: sap.ovp","ach":"CA-UI5-ST-OVP","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_base","sap_belize_hcb","sap_belize_hcw","sap_belize_plus","sap_bluecrystal","sap_bluecrystal_base","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_horizon","sap_horizon_dark","sap_horizon_hcb","sap_horizon_hcw"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.141","libs":{"sap.ui.core":{"minVersion":"1.141.0"},"sap.ui.layout":{"minVersion":"1.141.0"},"sap.m":{"minVersion":"1.141.0"},"sap.f":{"minVersion":"1.141.0"},"sap.ui.comp":{"minVersion":"1.141.0"},"sap.viz":{"minVersion":"1.141.0"},"sap.suite.ui.microchart":{"minVersion":"1.141.0"},"sap.ui.rta":{"minVersion":"1.141.0"},"sap.fe.placeholder":{"minVersion":"1.141.0"},"sap.insights":{"minVersion":"1.141.0"},"sap.suite.ui.commons":{"minVersion":"1.141.0"}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cnr","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","mk","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"content":{"controls":[],"elements":[],"types":[],"interfaces":[]}}}}',
	"sap/ovp/support/DiagnosticsTool/view/DiagnosticsTool.view.xml":'<mvc:View\n\tcontrollerName="sap.ovp.support.DiagnosticsTool.controller.DiagnosticsTool"\n\txmlns="sap.m"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:html="http://www.w3.org/1999/xhtml"><Panel expandable="false" class="sapUiNoContentPadding"><content><VBox \n\t\t\t\tvisible="{= ${data>/status} === \'Loading\'}"\n\t\t\t\twidth="100%"\n\t\t\t\talignItems="Center"\n\t\t\t\tclass="sapUiSmallMarginTopBottom sapUiNoMarginBegin sapUiNoMarginEnd"><BusyIndicator text="The application is still loading! Please wait a few more seconds..."/></VBox><MessageStrip\n\t\t\t\ttext="{data>/statusMessage}"\n\t\t\t\ttype="Warning"\n\t\t\t\tshowIcon="true"\n\t\t\t\tvisible="{= ${data>/status} === \'Failed\'}"\n\t\t\t\tclass="sapUiTinyMarginBegin sapUiTinyMarginEnd sapUiSmallMarginTop sapUiNoContentPadding"></MessageStrip><MessageStrip\n\t\t\t\ttext="The current state of the application is not known by the plugin!"\n\t\t\t\ttype="Error"\n\t\t\t\tshowIcon="true"\n\t\t\t\tvisible="{= ${data>/status} !== \'Failed\' &amp;&amp; ${data>/status} !== \'Rendered\' &amp;&amp; ${data>/status} !== \'Loading\' &amp;&amp; ${data>/status} !== \'Unknown\'}"\n\t\t\t\tclass="sapUiTinyMarginBegin sapUiTinyMarginEnd sapUiSmallMarginTop sapUiNoContentPadding"></MessageStrip><Table\n\t\t\t\tid="diagnosticPropertiesTable"\n\t\t\t\tnoDataText="No data available! Please verify that the Fiori Elements application is still running."\n\t\t\t\titems="{data>/properties}"\n\t\t\t\tvisible="{= ${data>/status} === \'Rendered\' || ${data>/status} === \'Failed\' || ${data>/status} === \'Unknown\'}"\n\t\t\t\tclass="sapUiSizeCompact"><headerToolbar><Toolbar><Title text="Time of Retrieval: {data>/retrieval}"/><ToolbarSpacer/><Button\n\t\t\t\t\t\t\ticon="sap-icon://synchronize"\n\t\t\t\t\t\t\ttooltip="Refresh"\n\t\t\t\t\t\t\tpress="onRefreshData"/><MenuButton icon="sap-icon://copy" tooltip="Copy Plaintext" enabled="{data>/copyEnabled}" buttonMode="Split" defaultAction="onCopyDataPlain" useDefaultActionOnly="true" width="auto"><menu><Menu><items><MenuItem text="Copy Plaintext" icon="sap-icon://copy" press="onCopyDataPlain" /><MenuItem text="Copy HTML" icon="sap-icon://attachment-html" press="onCopyDataHTML" /></items></Menu></menu></MenuButton><Button\n\t\t\t\t\t\t\ticon="sap-icon://sys-help"\n\t\t\t\t\t\t\ttooltip="Documentation"\n\t\t\t\t\t\t\tpress="onShowDocumentation"/></Toolbar></headerToolbar><columns><Column id="nameCol" width="30%"/><Column id="valueCol"/></columns><items><ColumnListItem><cells><VBox><Text \n\t\t\t\t\t\t\t\t\ttext="{data>name}" \n\t\t\t\t\t\t\t\t\tclass="diagnosticPropertiesGroupHeaderContent"\n\t\t\t\t\t\t\t\t\tvisible="{= ${data>type} === \'group\'}"/><Text \n\t\t\t\t\t\t\t\t\ttext="{data>name}" \n\t\t\t\t\t\t\t\t\tvisible="{= ${data>type} !== \'group\'}"/></VBox><VBox><Text text="{data>value}" wrapping="true" visible="{= ${data>type} === \'string\'}"/><Link \n\t\t\t\t\t\t\t\t\ttext="{data>value}" \n\t\t\t\t\t\t\t\t\thref="{data>target}" \n\t\t\t\t\t\t\t\t\ttarget="_blank" \n\t\t\t\t\t\t\t\t\twrapping="true"\n\t\t\t\t\t\t\t\t\tvisible="{= ${data>type} === \'link\'}"\n\t\t\t\t\t\t\t\t\treactiveAreaMode="Overlay"/></VBox></cells></ColumnListItem></items></Table><html:textarea \n\t\t\t\tid="CopyDataTextArea"\n\t\t\t\tclass="diagnosticPropertiesCopyDataTextArea"></html:textarea><html:div id="CopyDataHTML"></html:div></content></Panel></mvc:View>\n'
});
//# sourceMappingURL=library-preload.js.map
