/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.define(["./library","./MakitLib","./Row","sap/ui/core/Element","sap/base/Log","sap/base/assert"],function(e,t,a,r,o,n){"use strict";var i=e.ChartType;var s=r.extend("sap.makit.Layer",{metadata:{deprecated:true,library:"sap.makit",properties:{type:{type:"sap.makit.ChartType",group:"Appearance",defaultValue:i.Column},lineThickness:{type:"float",group:"Appearance",defaultValue:1},primaryColorPalette:{type:"any",group:"Misc",defaultValue:null},drawOnSecondaryAxis:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{rows:{type:"sap.makit.Row",multiple:true,singularName:"row",bindable:"bindable"},columns:{type:"sap.makit.Column",multiple:true,singularName:"column",bindable:"bindable"},series:{type:"sap.makit.Series",multiple:false},values:{type:"sap.makit.Value",multiple:true,singularName:"value"}}}});s.prototype.init=function(){this._datarows=[];this._createRowsCalled=false;this._lineType=null};s.prototype.addValue=function(e){r.prototype.addAggregation.call(this,"values",e,false);e.attachEvent("_change",{type:"values"},this._onDataRegionPropChanged,this);return this};s.prototype.addColumn=function(e){r.prototype.addAggregation.call(this,"columns",e,false);e.attachEvent("_change",{type:"columns"},this._onColumnPropChanged,this);return this};sap.makit.Chart.prototype.insertValue=function(e,t){r.prototype.insertAggregation.call(this,"values",e,t,false);e.attachEvent("_change",{type:"values"},this._onDataRegionPropChanged,this);return this};sap.makit.Chart.prototype.removeValue=function(e){var t=r.prototype.removeAggregation.call(this,"values",e,false);if(t!=null){t.detachEvent("_change",this._onDataRegionPropChanged,this)}return t};sap.makit.Chart.prototype.removeAllValues=function(){var e=r.prototype.removeAllAggregation.call(this,"values",false);var t=e.length;var a;for(a=0;a<t;a++){e[a].detachEvent("_change",this._onDataRegionPropChanged,this)}return e};s.prototype.setSeries=function(e){r.prototype.setAggregation.call(this,"series",e,false);e.attachEvent("_change",{type:"series"},this._onDataRegionPropChanged,this);return this};s.prototype.bindAggregation=function(e,t){if(e==="rows"){if(typeof t=="string"){t={path:arguments[1],template:arguments[2],sorter:arguments[3],filters:arguments[4]}}t.template=undefined;t.factory=function(){};return r.prototype.bindAggregation.call(this,e,t)}return r.prototype.bindAggregation.apply(this,arguments)};s.prototype.addRow=function(e){o.error('The control manages the rows aggregation. The method "addRow" cannot be used programmatically!')};s.prototype.insertRow=function(e,t){o.error('The control manages the rows aggregation. The method "insertRow" cannot be used programmatically!')};s.prototype.removeRow=function(e){o.error('The control manages the rows aggregation. The method "removeRow" cannot be used programmatically!')};s.prototype.removeAllRows=function(){o.error('The control manages the rows aggregation. The method "removeAllRows" cannot be used programmatically!')};s.prototype.destroyRows=function(e){o.error('The control manages the rows aggregation. The method "destroyRows" cannot be used programmatically!')};s.prototype.updateRows=function(){this.fireEvent("_startUpdateRows",this);this._createRows();this._createRowsCalled=true;this.fireEvent("rowsUpdated");this.fireEvent("_endUpdateRows",this)};sap.makit.CombinationChart.prototype.setType=function(e){if(e==i.Pie||e==i.Donut||e==i.Bubble){throw new Error("Combination Chart does not support "+e+" chart type");return}else{r.prototype.setProperty.call(this,"type",e,false)}return this};s.prototype._onDataRegionPropChanged=function(e,t){n(t,"oData is expected to be set in _onDataRegionPropChanged");var a=e.mParameters;a["type"]=t["type"];if(t["type"]=="values"){var r=e.oSource;var o=this.indexOfValue(r);a["index"]=o}this.fireEvent("dataRegionChanged",a)};s.prototype._onColumnPropChanged=function(e,t){var a=e.mParameters;if(a["name"]=="name"&&this._createRowsCalled){o.info("Column name property is changed due to name has been binded");this._createRows()}};s.prototype._createRows=function(){var e=new a(this.getId()+"-dummyrows");var t=this.getColumns();for(var r=0,o=t.length;r<o;r++){var n=t[r];if(n){var i=n.clone("col"+r);i.detachEvent("_change",this._onColumnPropChanged,this);for(var s in n.mProperties){if(n.mProperties.hasOwnProperty(s)){i.setProperty(s,n.getProperty(s),false)}}i.data("sap-ui-colindex",r);e.addAggregation("cells",i);i.unbindAggregation("name",true)}}this.destroyAggregation("rows");var l=undefined;var p=this.getBinding("rows");if(p){l=p.getContexts()}var g=p.getLength();this._datarows=[];var h=this.getBindingInfo("rows");var u=undefined;if(h&&h.model){u=h.model}for(var r=0;r<g;r++){if(l&&l[r]){var i=e.clone("row"+r);i.setBindingContext(l[r],u);this.addAggregation("rows",i);this._datarows.push(i._datarow)}}e.destroy()};s.prototype.setLineType=function(e){this._lineType=e};s.prototype.getLineType=function(){return this._lineType};s.prototype.getSyntax=function(e,t){var a=this.getSeries();var r="";if(a){r='<Series Column ="'+a.getColumn()+'"';if(a.getFormat()){r+=' format ="'+a.getFormat()+'"'}if(a.getDisplayName()){r+=' displayname ="'+a.getDisplayName()+'"'}r+="/>"}var o=this.getDrawOnSecondaryAxis();var n="<Values>";var i=o?t:e;if(i){n="<Values";if(o){n+=' SecondaryAxis ="'+o+'"'}n+=' showprimaryline ="'+i.getShowPrimaryLine()+'"';n+=' showgrid ="'+i.getShowGrid()+'"';n+=' showlabel ="'+i.getShowLabel()+'"';n+=' thickness ="'+i.getThickness()+'"';n+=' color ="'+i.getColor()+'"';if(i.getMin()!==""){n+=' min ="'+i.getMin()+'"'}if(i.getMax()!==""){n+=' max ="'+i.getMax()+'"'}n+=">"}var s=this.getValues();var l=s.length;if(l==0){throw new Error("Chart '"+this.getId()+"' needs at least one Value data region")}var p;for(var g=0;g<l;g++){p=s[g];n+='<Value Expression ="'+p.getExpression()+'"';if(p.getFormat()){n+=' format ="'+p.getFormat()+'"'}if(p.getDisplayName()){n+=' displayname ="'+p.getDisplayName()+'"'}if(p.getLocale()!==""){n+=' Locale ="'+p.getLocale()+'"'}n+="/>"}n+="</Values>";var h=this.getType().toLowerCase();var u=this.getLineType();var d=null;if(h==="donut"||h==="pie"){d=h;h="pie"}else if(h==="line"&&u){h=u}var m='<Layer Name ="'+this.getId()+'" ChartType ="'+h+'"';if(d!==null){m+=' PieStyle ="'+d+'"'}m+=" >";if(a){m+=r}m+=n;m+="</Layer>";return m};s.prototype.getDataTable=function(){if(this._datarows&&this._datarows.length>0){var e=this._datarows;var t=new window.$MA.DataTable;var a=this.getColumns();var r=a.length;if(r==0){a=this.getRows()[0].getCells();r=a.length}for(var o=0;o<r;o++){t.addColumn(a[o].getName(),a[o].getType())}t.addRows(e);return t}return null};s.prototype.getSelectedSeries=function(){var e=this.getParent();if(e){return e._getSelectedSeries(this)}};return s});
//# sourceMappingURL=Layer.js.map