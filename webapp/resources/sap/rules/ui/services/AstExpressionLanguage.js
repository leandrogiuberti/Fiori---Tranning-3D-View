/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2016 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/core/Element","sap/rules/ui/library","sap/rules/ui/ast/parser/bundlelibrary","sap/rules/ui/ast/model/Token","sap/rules/ui/ast/util/utilsBase","sap/rules/ui/ast/autoComplete/AutoComplete","sap/rules/ui/ast/builder/TermsBuilder","sap/rules/ui/ast/provider/TermsProvider","sap/rules/ui/ast/builder/OperatorBuilder","sap/rules/ui/ast/builder/FunctionBuilder","sap/rules/ui/ast/constants/Constants","sap/ui/core/LocaleData","sap/ui/core/format/DateFormat","sap/base/i18n/Formatting","sap/ui/core/Lib"],function(e,t,a,s,n,r,o,i,l,c,T,u,p,b,y){"use strict";var D=[];var d=e.extend("sap.rules.ui.services.AstExpressionLanguage",{metadata:{library:"sap.rule.ui",properties:{bindingContextPath:{type:"string",group:"Misc"}},publicMethods:["setData","getData","getSuggesstions"],events:{dataChange:{}}}});d.prototype.init=function(){this._astBunldeInstance=a.getInstance();this._idpCustomVisitor=new this._astBunldeInstance.IDPCustomVisitor;this._antlr4=this._astBunldeInstance.antlr4;this._astUtil=this._astBunldeInstance.ASTUtil;this._termsBuilder=this._astBunldeInstance.TermsBuilder;this._termsProvider=this._astBunldeInstance.TermsProvider;this._infraUtils=new n.utilsBaseLib;this._autoComplete=new r;this.attachModelContextChange(this._setDataFromModel.bind(this));this.oBundle=y.getResourceBundleFor("sap.rules.ui.i18n")};d.prototype._isDataExist=function(){if(!this._oData){return false}return true};d.prototype.getExpressionLanguageVersion=function(){return"2.0.0"};d.prototype.getResults=function(){if(!this._isDataExist()){return null}var e=[];var t=this._oData.DataObjects;for(var a=0;a<t.length;a++){var s=t[a].Label?t[a].Label:t[a].Name;e.push({id:t[a].Id,name:t[a].Name,label:s,description:t[a].Description})}return e};d.prototype.getResultInfo=function(e){if(!this._isDataExist()){return null}var t={requiredParams:[]};var a=this._oData.DataObjects;for(var s in a){if(a[s].Name===e){var n=a[s].Attributes;for(var r in n){t.requiredParams.push({name:n[r].Name,paramId:n[r].Id,businessDataType:n[r].BusinessDataType})}}}return t};d.prototype._setDataFromModel=function(){if(this.hasModel()&&this.getBindingContextPath()){this.getModel().read(this.getBindingContextPath(),{urlParameters:{$expand:"DataObjects/Associations,DataObjects/Attributes,ValueSources,Rules"},success:this.setData.bind(this)})}};d.prototype.setData=function(e){this._oData=this._CopyAndRemoveOdataTags(e);o.getInstance().construct(this._oData);this._astBunldeInstance.TermsBuilder.TermsBuilder.construct(this._oData);var t=this._getOpertorAndFunctionsMetdata();l.getInstance().construct(t.operators);c.getInstance().construct(t.functions);this.fireDataChange({data:e})};d.prototype.getData=function(){return this._oData};d.prototype._removeOdataTags=function(e){for(var t in e){if(e[t]&&typeof e[t]==="object"){if(Array.isArray(e[t].results)){e[t]=e[t].results}this._removeOdataTags(e[t])}}};d.prototype._CopyAndRemoveOdataTags=function(e){var t={};if(e){t=JSON.parse(JSON.stringify(e));this._removeOdataTags(t)}return t};d.prototype._getOpertorAndFunctionsMetdata=function(){return{operators:[{name:"+",label:this.oBundle.getText("add"),noOfArgs:2,returnValueBusinessDataTypeCollection:{N:{N:"N",S:"S"},S:{S:"S",N:"S",D:"S",T:"S",U:"S",Q:"S"},T:{S:"S",Q:"T"},U:{S:"S",Q:"U"},D:{S:"S",Q:"D"},Q:{Q:"Q",S:"S",D:"D",T:"T",U:"U"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"arithmetic"},{name:"-",label:this.oBundle.getText("subtract"),noOfArgs:2,returnValueBusinessDataTypeCollection:{N:{N:"N"},Q:{Q:"Q"},D:{S:"S",Q:"D",D:"Q",U:"Q",T:"Q"},U:{S:"S",Q:"U",U:"Q",D:"Q",T:"Q"},T:{S:"S",Q:"T",T:"Q",D:"Q",U:"Q"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"arithmetic"},{name:"/",label:this.oBundle.getText("divide"),noOfArgs:2,returnValueBusinessDataTypeCollection:{N:{N:"N"},Q:{N:"Q"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"arithmetic"},{name:"*",label:this.oBundle.getText("multiply"),noOfArgs:2,returnValueBusinessDataTypeCollection:{N:{N:"N",Q:"Q"},Q:{N:"Q"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"arithmetic"},{name:"=",label:this.oBundle.getText("is_equal"),noOfArgs:2,returnValueBusinessDataTypeCollection:{N:{N:"B"},B:{B:"B",S:"B",N:"B",D:"B",T:"B",U:"B",Q:"B",A:"B",G:"B"},D:{D:"B",T:"B",U:"B"},T:{T:"B",U:"B",D:"B"},U:{T:"B",U:"B",D:"B"},S:{S:"B"},Q:{Q:"B"},A:{A:"B"},G:{G:"B"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"comparison"},{name:"!=",label:this.oBundle.getText("is_not_equal"),noOfArgs:2,returnValueBusinessDataTypeCollection:{N:{N:"B"},B:{B:"B"},D:{D:"B",T:"B",U:"B"},T:{T:"B",U:"B",D:"B"},U:{T:"B",U:"B",D:"B"},S:{S:"B"},Q:{Q:"B"},A:{A:"B"},G:{G:"B"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"comparison"},{name:">",label:this.oBundle.getText("is_greater_than"),noOfArgs:2,returnValueBusinessDataTypeCollection:{N:{N:"B"},D:{D:"B",T:"B",U:"B"},T:{T:"B",U:"B",D:"B"},U:{T:"B",U:"B",D:"B"},S:{S:"B"},Q:{Q:"B"},A:{A:"B"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"comparison"},{name:">=",label:this.oBundle.getText("is_equal_or_greater_than"),noOfArgs:2,returnValueBusinessDataTypeCollection:{N:{N:"B"},D:{D:"B",T:"B",U:"B"},T:{T:"B",U:"B",D:"B"},U:{T:"B",U:"B",D:"B"},S:{S:"B"},Q:{Q:"B"},A:{A:"B"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"comparison"},{name:"<",label:this.oBundle.getText("is_less_than"),noOfArgs:2,returnValueBusinessDataTypeCollection:{N:{N:"B"},D:{D:"B",T:"B",U:"B"},T:{T:"B",U:"B",D:"B"},U:{T:"B",U:"B",D:"B"},S:{S:"B"},Q:{Q:"B"},A:{A:"B"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"comparison"},{name:"<=",label:this.oBundle.getText("is_equal_or_less_than"),noOfArgs:2,returnValueBusinessDataTypeCollection:{N:{N:"B"},D:{D:"B",T:"B",U:"B"},T:{T:"B",U:"B",D:"B"},U:{T:"B",U:"B",D:"B"},S:{S:"B"},Q:{Q:"B"},A:{A:"B"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"comparison"},{name:"IN",label:this.oBundle.getText("in"),noOfArgs:2,returnValueBusinessDataTypeCollection:{N:{N:"B"},B:{B:"B"},D:{D:"B"},T:{T:"B",U:"B"},U:{T:"B",U:"B"},S:{S:"B"},Q:{Q:"B"},A:{A:"B"},G:{G:"B"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"range"},{name:"NOTIN",label:this.oBundle.getText("not_in"),noOfArgs:2,returnValueBusinessDataTypeCollection:{N:{N:"B"},B:{B:"B"},D:{D:"B"},T:{T:"B",U:"B"},U:{T:"B",U:"B"},S:{S:"B"},Q:{Q:"B"},A:{A:"B"},G:{G:"B"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"range"},{name:"EXISTSIN",label:this.oBundle.getText("exists_in"),noOfArgs:2,returnValueBusinessDataTypeCollection:{N:{N:"B"},B:{B:"B"},D:{D:"B"},T:{T:"B",U:"B"},U:{T:"B",U:"B"},S:{S:"B"},Q:{Q:"B"},A:{A:"B"}},returnValueDataObjectTypeCollection:{E:{E:"E",T:"E"}},category:"array",supportedFunctions:[{name:"SELECT",dataObjectTypeList:["E"],businessDataType:"B"}]},{name:"NOTEXISTSIN",label:this.oBundle.getText("does_not_exists_in"),noOfArgs:2,returnValueBusinessDataTypeCollection:{N:{N:"B"},B:{B:"B"},D:{D:"B"},T:{T:"B",U:"B"},U:{T:"B",U:"B"},S:{S:"B"},Q:{Q:"B"},A:{A:"B"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"array",supportedFunctions:[{name:"SELECT",dataObjectTypeList:["E"],businessDataType:"B"}]},{name:"MATCHES",label:this.oBundle.getText("matches"),noOfArgs:2,returnValueBusinessDataTypeCollection:{S:{S:"B"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"functional"},{name:"NOTMATCHES",label:this.oBundle.getText("does_not_matches"),noOfArgs:2,returnValueBusinessDataTypeCollection:{S:{S:"B"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"functional"},{name:"CONTAINS",label:this.oBundle.getText("contains_string"),noOfArgs:2,returnValueBusinessDataTypeCollection:{S:{S:"B"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"functional"},{name:"NOTCONTAINS",label:this.oBundle.getText("does_not_contains_string"),noOfArgs:2,returnValueBusinessDataTypeCollection:{S:{S:"B"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"functional"},{name:"STARTSWITH",label:this.oBundle.getText("starts_with"),noOfArgs:2,returnValueBusinessDataTypeCollection:{S:{S:"B"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"functional"},{name:"NOTSTARTSWITH",label:this.oBundle.getText("does_not_starts_with"),noOfArgs:2,returnValueBusinessDataTypeCollection:{S:{S:"B"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"functional"},{name:"ENDSWITH",label:this.oBundle.getText("ends_with"),noOfArgs:2,returnValueBusinessDataTypeCollection:{S:{S:"B"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"functional"},{name:"NOTENDSWITH",label:this.oBundle.getText("does_not_ends_with"),noOfArgs:2,returnValueBusinessDataTypeCollection:{S:{S:"B"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"functional"},{name:"NOT",label:this.oBundle.getText("not"),noOfArgs:1,returnValueBusinessDataTypeCollection:{D:{D:"B"},T:{T:"B"},U:{T:"B"},N:{N:"B"},B:{B:"B"},S:{S:"B"},Q:{Q:"B"},A:{A:"B"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"logical"},{name:"AND",label:this.oBundle.getText("and"),noOfArgs:2,returnValueBusinessDataTypeCollection:{B:{B:"B"},D:{Q:"B"},T:{Q:"B"},U:{Q:"B"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"logical"},{name:"OR",label:this.oBundle.getText("or"),noOfArgs:2,returnValueBusinessDataTypeCollection:{B:{B:"B"},D:{Q:"B"},T:{Q:"B"},U:{Q:"B"}},returnValueDataObjectTypeCollection:{E:{E:"E"}},category:"logical"}],functions:[{name:"AVG",label:this.oBundle.getText("average"),category:"aggregate",noOfArgs:"*",argsMetadata:[{sequence:1,dataObjectTypeList:["T"]},{sequence:2,dataObjectTypeList:["E"],businessDataTypeList:["Q","N","A"],determinesReturnDataObjectType:"Y"}],noOfMandatoryArgs:"2",probableBusinessDataTypeList:["N"],probableDataObjectTypeList:["E","T"]},{name:"SUM",label:this.oBundle.getText("sum"),category:"aggregate",noOfArgs:"*",argsMetadata:[{sequence:1,dataObjectTypeList:["T"]},{sequence:2,dataObjectTypeList:["E"],businessDataTypeList:["Q","N","A"],determinesReturnDataObjectType:"Y"}],noOfMandatoryArgs:"2",probableBusinessDataTypeList:["N","Q","A"],probableDataObjectTypeList:["E","T"]},{name:"COUNT",label:this.oBundle.getText("count"),category:"aggregate",noOfArgs:"*",argsMetadata:[{sequence:1,dataObjectTypeList:["T"],determinesReturnDataObjectType:"Y"}],noOfMandatoryArgs:"1",probableBusinessDataTypeList:["N","A"],probableDataObjectTypeList:["E","T"],defaultDataObjectReturnType:"E",defaultBusinessDataReturnType:"N"},{name:"COUNTDISTINCT",label:this.oBundle.getText("count_distinct"),category:"aggregate",noOfArgs:"2",argsMetadata:[{sequence:1,dataObjectTypeList:["T"]},{sequence:2,dataObjectTypeList:["E"],businessDataTypeList:["N","A"],determinesReturnDataObjectType:"Y"}],noOfMandatoryArgs:"2",probableBusinessDataTypeList:["N","A"],probableDataObjectTypeList:["E"]},{name:"DISTINCT",label:this.oBundle.getText("distinct"),category:"aggregate",noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"]},{sequence:2,dataObjectTypeList:["E"]}],noOfMandatoryArgs:"2",probableBusinessDataTypeList:["N","A"],probableDataObjectTypeList:["T"]},{name:"MIN",label:this.oBundle.getText("minimum"),category:"aggregate",noOfArgs:"*",argsMetadata:[{sequence:1,dataObjectTypeList:["E"]},{sequence:2,dataObjectTypeList:["E"],businessDataTypeList:["N","A","Q","D","T","U","S"],determinesReturnDataObjectType:"Y"}],noOfMandatoryArgs:"2",probableBusinessDataTypeList:["N","A","Q","D","T","U","S"],probableDataObjectTypeList:["E","T"]},{name:"MAX",label:this.oBundle.getText("maximum"),category:"aggregate",noOfArgs:"*",argsMetadata:[{sequence:1,dataObjectTypeList:["E"]},{sequence:2,dataObjectTypeList:["E"],businessDataTypeList:["N","A","Q","D","T","U","S"],determinesReturnDataObjectType:"Y"}],noOfMandatoryArgs:"2",probableBusinessDataTypeList:["N","A","Q","D","T","U","S"],probableDataObjectTypeList:["E","T"]},{name:"ISWITHIN",label:this.oBundle.getText("is_with_in"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["G"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{G:{G:"B"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"advanced",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["B"],probableDataObjectTypeList:["E"]},{name:"ISNOTWITHIN",label:this.oBundle.getText("is_not_with_in"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["G"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{G:{G:"B"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],noOfMandatoryArgs:"2",category:"advanced",probableBusinessDataTypeList:["B"],probableDataObjectTypeList:["E"]},{name:"FILTER",label:this.oBundle.getText("where_label"),category:"aggregate",noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["T"]}],noOfMandatoryArgs:"1",probableBusinessDataTypeList:[],probableDataObjectTypeList:["T"]},{name:"TOP",label:this.oBundle.getText("top"),category:"selection",noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["T"]},{sequence:2,dataObjectTypeList:["E"]}],noOfMandatoryArgs:"2",probableBusinessDataTypeList:[],probableDataObjectTypeList:["T"]},{name:"BOTTOM",label:this.oBundle.getText("bottom"),category:"selection",noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["T"]},{sequence:2,dataObjectTypeList:["E"]}],noOfMandatoryArgs:"2",probableBusinessDataTypeList:[],probableDataObjectTypeList:["T"]},{name:"SELECT",label:this.oBundle.getText("select"),category:"selection",noOfArgs:"*",argsMetadata:[{sequence:1,dataObjectTypeList:["T"]}],noOfMandatoryArgs:"1",probableBusinessDataTypeList:[],probableDataObjectTypeList:["T"]},{name:"FIRST",label:this.oBundle.getText("first"),category:"selection",noOfArgs:1,argsMetadata:[{sequence:1,dataObjectTypeList:["T"]}],noOfMandatoryArgs:"1",probableBusinessDataTypeList:[],probableDataObjectTypeList:["T"]},{name:"SORTASC",label:this.oBundle.getText("sort_ascending_label"),category:"selection",noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["T"]},{sequence:2,dataObjectTypeList:["E"]}],noOfMandatoryArgs:"2",probableBusinessDataTypeList:[],probableDataObjectTypeList:["T"]},{name:"SORTDESC",label:this.oBundle.getText("sort_descending_label"),category:"selection",noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["T"]},{sequence:2,dataObjectTypeList:["E"]}],noOfMandatoryArgs:"2",probableBusinessDataTypeList:[],probableDataObjectTypeList:["T"]},{name:"ISINNEXT",label:this.oBundle.getText("is_in_next"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","T","U"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{Q:"B"},T:{Q:"B"},U:{Q:"B"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],noOfMandatoryArgs:"2",category:"time_duration",probableBusinessDataTypeList:["B"],probableDataObjectTypeList:["E"]},{name:"ISNOTINNEXT",label:this.oBundle.getText("is_not_in_next"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","T","U"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{Q:"B"},T:{Q:"B"},U:{Q:"B"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],noOfMandatoryArgs:"2",category:"time_duration",probableBusinessDataTypeList:["B"],probableDataObjectTypeList:["E"]},{name:"ISINLAST",label:this.oBundle.getText("is_in_last"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","T","U"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{Q:"B"},T:{Q:"B"},U:{Q:"B"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],noOfMandatoryArgs:"2",category:"time_duration",probableBusinessDataTypeList:["B"],probableDataObjectTypeList:["E"]},{name:"ISNOTINLAST",label:this.oBundle.getText("is_not_in_last"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","T","U"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{Q:"B"},T:{Q:"B"},U:{Q:"B"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],noOfMandatoryArgs:"2",category:"time_duration",probableBusinessDataTypeList:["B"],probableDataObjectTypeList:["E"]},{name:"CONCAT",label:this.oBundle.getText("concatenate"),noOfArgs:"*",argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["N","A","Q","D","T","U","S","B","G"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{S:{S:"S",N:"S",A:"S",Q:"S",D:"S",T:"S",U:"S",B:"S",G:"S"},N:{S:"S",N:"S",A:"S",Q:"S",D:"S",T:"S",U:"S",B:"S",G:"S"},A:{S:"S",N:"S",A:"S",Q:"S",D:"S",T:"S",U:"S",B:"S",G:"S"},Q:{S:"S",N:"S",A:"S",Q:"S",D:"S",T:"S",U:"S",B:"S",G:"S"},D:{S:"S",N:"S",A:"S",Q:"S",D:"S",T:"S",U:"S",B:"S",G:"S"},T:{S:"S",N:"S",A:"S",Q:"S",D:"S",T:"S",U:"S",B:"S",G:"S"},U:{S:"S",N:"S",A:"S",Q:"S",D:"S",T:"S",U:"S",B:"S",G:"S"},B:{S:"S",N:"S",A:"S",Q:"S",D:"S",T:"S",U:"S",B:"S",G:"S"},G:{S:"S",N:"S",A:"S",Q:"S",D:"S",T:"S",U:"S",B:"S",G:"S"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],noOfMandatoryArgs:"2",category:"advanced",probableBusinessDataTypeList:["S"],probableDataObjectTypeList:["E"]},{name:"ROUND",label:this.oBundle.getText("round"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["S"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{N:{N:"N"},Q:{N:"Q"},S:{S:"S"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],noOfMandatoryArgs:"2",category:"advanced",probableBusinessDataTypeList:["Q","N","A","S"],probableDataObjectTypeList:["E"]},{name:"POWER",label:this.oBundle.getText("power"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["N"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{N:{N:"N"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],noOfMandatoryArgs:"2",category:"advanced",probableBusinessDataTypeList:["N"],probableDataObjectTypeList:["E"]},{name:"SIN",label:this.oBundle.getText("sin"),noOfArgs:1,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["S"],referenceIndex:1,referenceBusinessDataTypeCollection:{N:{N:"N"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],noOfMandatoryArgs:"1",category:"advanced",probableBusinessDataTypeList:["N"],probableDataObjectTypeList:["E"]},{name:"COS",label:this.oBundle.getText("cos"),noOfArgs:1,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["S"],referenceIndex:1,referenceBusinessDataTypeCollection:{N:{N:"N"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],noOfMandatoryArgs:"1",category:"advanced",probableBusinessDataTypeList:["N"],probableDataObjectTypeList:["E"]},{name:"ISNULL",label:this.oBundle.getText("is_null"),noOfArgs:1,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["N","A","Q","D","T","U","S","B","G"],referenceIndex:1,referenceBusinessDataTypeCollection:{N:{N:"B"},S:{S:"B"},A:{A:"B"},Q:{Q:"B"},D:{D:"B"},T:{T:"B"},U:{U:"B"},B:{B:"B"},G:{G:"B"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],noOfMandatoryArgs:"1",category:"advanced",probableBusinessDataTypeList:["B"],probableDataObjectTypeList:["E"]},{name:"ISNOTNULL",label:this.oBundle.getText("is_not_null"),noOfArgs:1,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["N","A","Q","D","T","U","S","B","G"],referenceIndex:1,referenceBusinessDataTypeCollection:{N:{N:"B"},S:{S:"B"},A:{A:"B"},Q:{Q:"B"},D:{D:"B"},T:{T:"B"},U:{U:"B"},B:{B:"B"},G:{G:"B"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],noOfMandatoryArgs:"1",category:"advanced",probableBusinessDataTypeList:["B"],probableDataObjectTypeList:["E"]},{name:"ISINITIAL",label:this.oBundle.getText("is_initial"),noOfArgs:1,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["N","A","Q","D","T","U","S","B","G"],referenceIndex:1,referenceBusinessDataTypeCollection:{N:{N:"B"},S:{S:"B"},A:{A:"B"},Q:{Q:"B"},D:{D:"B"},T:{T:"B"},U:{U:"B"},B:{B:"B"},G:{G:"B"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],noOfMandatoryArgs:"1",category:"advanced",probableBusinessDataTypeList:["B"],probableDataObjectTypeList:["E"]},{name:"CONVERTAMOUNT",label:this.oBundle.getText("convert_amount"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["A"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{A:{S:"A"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],noOfMandatoryArgs:"2",category:"advanced",probableBusinessDataTypeList:["A"],probableDataObjectTypeList:["E"]},{name:"ISNOTINITIAL",label:this.oBundle.getText("is_not_initial"),noOfArgs:1,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["N","A","Q","D","T","U","S","B","G"],referenceIndex:1,referenceBusinessDataTypeCollection:{N:{N:"B"},S:{S:"B"},A:{A:"B"},Q:{Q:"B"},D:{D:"B"},T:{T:"B"},U:{U:"B"},B:{B:"B"},G:{G:"B"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],noOfMandatoryArgs:"1",category:"advanced",probableBusinessDataTypeList:["B"],probableDataObjectTypeList:["E"]},{name:"TODAY",label:this.oBundle.getText("today"),noOfArgs:0,defaultBusinessDataReturnType:"D",defaultDataObjectReturnType:"E",noOfMandatoryArgs:"0",category:"time_duration",probableBusinessDataTypeList:["D"],probableDataObjectTypeList:["E"]},{name:"YESTERDAY",label:this.oBundle.getText("yesterday"),noOfArgs:0,defaultBusinessDataReturnType:"D",defaultDataObjectReturnType:"E",noOfMandatoryArgs:"0",category:"time_duration",probableBusinessDataTypeList:["D"],probableDataObjectTypeList:["E"]},{name:"TOMORROW",label:this.oBundle.getText("tomorrow"),noOfArgs:0,noOfMandatoryArgs:"0",defaultBusinessDataReturnType:"D",defaultDataObjectReturnType:"E",category:"time_duration",probableBusinessDataTypeList:["D"],probableDataObjectTypeList:["E"]},{name:"UPDATE",label:this.oBundle.getText("UPDATELABEL"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["T","E"],businessDataTypeList:["S","N","T","U","B","Q","G","D"]},{sequence:2,referenceIndex:-1}],probableBusinessDataTypeList:[],probableDataObjectTypeList:[],context:"result",noOfMandatoryArgs:"2",category:"operations"},{name:"APPEND",label:this.oBundle.getText("APPENDLABEL"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["T","E"],businessDataTypeList:["S","N","T","U","B","Q","G","D"]},{sequence:2,referenceIndex:-1}],probableBusinessDataTypeList:[],probableDataObjectTypeList:[],context:"result",noOfMandatoryArgs:"2",category:"operations"},{name:"FOREACH",label:this.oBundle.getText("FOREACHLABEL"),noOfArgs:"*",argsMetadata:[{sequence:1,dataObjectTypeList:["T"]},{sequence:2,referenceIndex:-1}],probableBusinessDataTypeList:[],probableDataObjectTypeList:[],context:"result",noOfMandatoryArgs:"2",category:"loop"},{name:"ADDSECONDS",label:this.oBundle.getText("add_seconds"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{N:"D"},U:{N:"U"},T:{N:"T"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["D","U","T"],probableDataObjectTypeList:["E"]},{name:"ADDMINUTES",label:this.oBundle.getText("add_minutes"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{N:"D"},U:{N:"U"},T:{N:"T"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["D","U","T"],probableDataObjectTypeList:["E"]},{name:"ADDHOURS",label:this.oBundle.getText("add_hours"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{N:"D"},U:{N:"U"},T:{N:"T"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["D","U","T"],probableDataObjectTypeList:["E"]},{name:"ADDDAYS",label:this.oBundle.getText("add_days"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{N:"D"},U:{N:"U"},T:{N:"T"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["D","U","T"],probableDataObjectTypeList:["E"]},{name:"ADDWEEKS",label:this.oBundle.getText("add_weeks"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{N:"D"},U:{N:"U"},T:{N:"T"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["D","U","T"],probableDataObjectTypeList:["E"]},{name:"ADDMONTHS",label:this.oBundle.getText("add_months"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{N:"D"},U:{N:"U"},T:{N:"T"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["D","U","T"],probableDataObjectTypeList:["E"]},{name:"ADDQUARTERS",label:this.oBundle.getText("add_quarters"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{N:"D"},U:{N:"U"},T:{N:"T"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["D","U","T"],probableDataObjectTypeList:["E"]},{name:"ADDYEARS",label:this.oBundle.getText("add_years"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{N:"D"},U:{N:"U"},T:{N:"T"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["D","U","T"],probableDataObjectTypeList:["E"]},{name:"SUBTRACTSECONDS",label:this.oBundle.getText("subtract_seconds"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{N:"D"},U:{N:"U"},T:{N:"T"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["D","U","T"],probableDataObjectTypeList:["E"]},{name:"SUBTRACTMINUTES",label:this.oBundle.getText("subtract_minutes"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{N:"D"},U:{N:"U"},T:{N:"T"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["D","U","T"],probableDataObjectTypeList:["E"]},{name:"SUBTRACTHOURS",label:this.oBundle.getText("subtract_hours"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{N:"D"},U:{N:"U"},T:{N:"T"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["D","U","T"],probableDataObjectTypeList:["E"]},{name:"SUBTRACTDAYS",label:this.oBundle.getText("subtract_days"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{N:"D"},U:{N:"U"},T:{N:"T"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["D","U","T"],probableDataObjectTypeList:["E"]},{name:"SUBTRACTWEEKS",label:this.oBundle.getText("subtract_weeks"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{N:"D"},U:{N:"U"},T:{N:"T"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["D","U","T"],probableDataObjectTypeList:["E"]},{name:"SUBTRACTMONTHS",label:this.oBundle.getText("subtract_months"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{N:"D"},U:{N:"U"},T:{N:"T"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["D","U","T"],probableDataObjectTypeList:["E"]},{name:"SUBTRACTQUARTERS",label:this.oBundle.getText("subtract_quarters"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{N:"D"},U:{N:"U"},T:{N:"T"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["D","U","T"],probableDataObjectTypeList:["E"]},{name:"SUBTRACTYEARS",label:this.oBundle.getText("subtract_years"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{N:"D"},U:{N:"U"},T:{N:"T"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["D","U","T"],probableDataObjectTypeList:["E"]},{name:"SECONDSBETWEEN",label:this.oBundle.getText("seconds_between"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{D:"N"},T:{T:"N"},U:{U:"N"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["N"],probableDataObjectTypeList:["E"]},{name:"MINUTESBETWEEN",label:this.oBundle.getText("minutes_between"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{D:"N"},T:{T:"N"},U:{U:"N"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["N"],probableDataObjectTypeList:["E"]},{name:"HOURSBETWEEN",label:this.oBundle.getText("hours_between"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{D:"N"},T:{T:"N"},U:{U:"N"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["N"],probableDataObjectTypeList:["E"]},{name:"DAYSBETWEEN",label:this.oBundle.getText("days_between"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{D:"N"},T:{T:"N"},U:{U:"N"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["N"],probableDataObjectTypeList:["E"]},{name:"WEEKSBETWEEN",label:this.oBundle.getText("weeks_between"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{D:"N"},T:{T:"N"},U:{U:"N"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["N"],probableDataObjectTypeList:["E"]},{name:"MONTHSBETWEEN",label:this.oBundle.getText("months_between"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{D:"N"},T:{T:"N"},U:{U:"N"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["N"],probableDataObjectTypeList:["E"]},{name:"QUARTERSBETWEEN",label:this.oBundle.getText("quarters_between"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{D:"N"},T:{T:"N"},U:{U:"N"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["N"],probableDataObjectTypeList:["E"]},{name:"YEARSBETWEEN",label:this.oBundle.getText("years_between"),noOfArgs:2,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"]},{sequence:2,referenceIndex:1,referenceBusinessDataTypeCollection:{D:{D:"N"},T:{T:"N"},U:{U:"N"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"2",probableBusinessDataTypeList:["N"],probableDataObjectTypeList:["E"]},{name:"SECOND",label:this.oBundle.getText("second"),noOfArgs:1,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["U","T"],referenceIndex:1,referenceBusinessDataTypeCollection:{T:{T:"N"},U:{U:"N"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"1",probableBusinessDataTypeList:["N"],probableDataObjectTypeList:["E"]},{name:"MINUTE",label:this.oBundle.getText("minute"),noOfArgs:1,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["U","T"],referenceIndex:1,referenceBusinessDataTypeCollection:{T:{T:"N"},U:{U:"N"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"1",probableBusinessDataTypeList:["N"],probableDataObjectTypeList:["E"]},{name:"HOUR",label:this.oBundle.getText("hour"),noOfArgs:1,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["U","T"],referenceIndex:1,referenceBusinessDataTypeCollection:{T:{T:"N"},U:{U:"N"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"1",probableBusinessDataTypeList:["N"],probableDataObjectTypeList:["E"]},{name:"DAYOFWEEK",label:this.oBundle.getText("day_of_week"),noOfArgs:1,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"],referenceIndex:1,referenceBusinessDataTypeCollection:{D:{D:"N"},T:{T:"N"},U:{U:"N"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"1",probableBusinessDataTypeList:["N"],probableDataObjectTypeList:["E"]},{name:"DAYOFMONTH",label:this.oBundle.getText("day_Of_month"),noOfArgs:1,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"],referenceIndex:1,referenceBusinessDataTypeCollection:{D:{D:"N"},T:{T:"N"},U:{U:"N"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"1",probableBusinessDataTypeList:["N"],probableDataObjectTypeList:["E"]},{name:"DAYOFYEAR",label:this.oBundle.getText("day_Of_year"),noOfArgs:1,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"],referenceIndex:1,referenceBusinessDataTypeCollection:{D:{D:"N"},T:{T:"N"},U:{U:"N"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"1",probableBusinessDataTypeList:["N"],probableDataObjectTypeList:["E"]},{name:"MONTH",label:this.oBundle.getText("month"),noOfArgs:1,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"],referenceIndex:1,referenceBusinessDataTypeCollection:{D:{D:"N"},T:{T:"N"},U:{U:"N"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"1",probableBusinessDataTypeList:["N"],probableDataObjectTypeList:["E"]},{name:"YEAR",label:this.oBundle.getText("year"),noOfArgs:1,argsMetadata:[{sequence:1,dataObjectTypeList:["E"],businessDataTypeList:["D","U","T"],referenceIndex:1,referenceBusinessDataTypeCollection:{D:{D:"N"},T:{T:"N"},U:{U:"N"}},referenceDataObjectTypeCollection:{E:{E:"E"}}}],category:"time_duration",noOfMandatoryArgs:"1",probableBusinessDataTypeList:["N"],probableDataObjectTypeList:["E"]}]}};d.prototype.getTokensForGivenStringInput=function(e){var t=this._getParser(e);try{var a=t.rules();if(D.length===0){this._idpCustomVisitor.visitRules(a)}else{this._idpCustomVisitor.createErrorNode(D[0].expr);D.length=0}}catch(e){console.log(e)}return t._input.tokens};d.prototype.getAstNodesString=function(e){if(e&&e.trim().length>0){var t=this._getParser(e);this._astUtil.clearNodes();try{var a=t.rules();if(D.length===0){this._idpCustomVisitor.visitRules(a)}else{this._idpCustomVisitor.createErrorNode(D[0].expr);D.length=0}}catch(e){console.log(e)}return this._astUtil.toASTObject()}else{return"[]"}};d.prototype._getLocaleData=function(){var e=b.getLanguageTag();return u.getInstance(e)};d.prototype._getDateFormatter=function(){var e=this._getLocaleData();var t=e.getDatePattern("medium");var a=p.getDateInstance({pattern:t});return a};d.prototype._getDateTimeFormatter=function(){var e=this._getLocaleData();var t=e.getDatePattern("medium");var a=e.getTimePattern("medium");var s=p.getDateTimeInstance({pattern:t+" "+a});return s};d.prototype.getRelStringForGivenAstString=function(e){var t=this._astUtil.toRELString(e);this._astUtil.clearNodes();return t};d.prototype.convertTokensToUiModel=function(e,t,a){var n=[];var r=-1;var o=[];var i=0;var l=0;var c=false;var u;var p="";var b=0;var y=false;var D=[T.AVG,T.SUM,T.COUNT,T.COUNTDISTINCT,T.DISTINCT,T.MIN,T.MAX,T.FILTER,T.TOP,T.BOTTOM,T.SELECT,T.FIRST,T.SORTASC,T.SORTDESC,T.FOREACH];for(var d=0;d<e.length;d++){var g=e[d];if(this.includes(D,g.text.toUpperCase())){c=true}if(g.text==="("&&d>0&&this.includes(D,e[d-1].text.toUpperCase())&&!y){i=d-1;y=true;u=e[d-1].type}if(c&&t&&t[b]){if(this.includes(D,g.text.toUpperCase())||(g.text==="("||g.text==="[")&&d>0){o.push(g.text);r++;continue}if((g.text===")"||g.text==="]")&&this.includes(D,o[r-1].toUpperCase())){o.pop();o.pop();r-=2}else if(g.text===")"||g.text==="]"){o.pop();r-=1}if(r==-1){l=d;g.type=u;for(var B=i;B<=l;B++){p+=e[B].text}t[b]["expandedText"]=p;g.text=t[b].functionLabel;var O=new s(g.type,g.text,g.start,g.stop,this._createUUID(),g.reference,g.json);if(O.tokenType==="ID"){O.reference=O.text}O.json=t[b];b++;n.push(O);c=false;i=0;l=0;u=0;p="";y=false}}else{if(g.type===this._astBunldeInstance.IDPLexer.EOF)continue;var O=new s(g.type,g.text,g.start,g.stop,this._createUUID(),g.reference);if(O.tokenType==="ID"){O.reference=O.text}if(O.tokenType==="D"){O.reference=O.text;O.text="'"+this._getDateFormatter().format(new Date(O.reference.replace(/\'/g,"")),true)+"'"}if(O.tokenType==="T"){O.reference=O.text;O.text="'"+this._getDateTimeFormatter().format(new Date(O.reference.replace(/\'/g,"")),false)+"'"}n.push(O)}}return n};d.prototype.includes=function(e,t){var a=false;if(e.indexOf(t)!==-1){a=true}return a};d.prototype.convertTokensToUiModelForAutoSuggestion=function(e){var t=[];for(var a=0;a<e.length;a++){var n=e[a];if(n.type===this._astBunldeInstance.IDPLexer.EOF)continue;var r=n.type?n.type:n._type;var o=new s(r,n.text,n.start,n.stop,this._createUUID(),n.reference,n.json);if(o.tokenType==="ID"){o.reference=o.text;var l=this._termsProvider.TermsProvider.getTermByTermId(o.reference.split("/")[1]);if(l&&(l._isDataObjectElement||l.isResultDataObjectElement)){var c=l._termId;var T=i.getInstance()._getAllAttrsRefsAssocsForDataObject(c)[0];o.bussinessDataType=T._bussinessDataType;o.hasValueSource=T._hasValueSource;o.dataObjectType=T._dataObjectType;if(l._isDataObjectElement){o._isDataObjectElement=true}else{o.isResultDataObjectElement=true}}}else if(o.tokenType==="D"){o.reference=o.text;o.text="'"+this._getDateFormatter().format(new Date(o.reference.replace(/\'/g,"")),true)+"'"}else if(o.tokenType==="T"){o.reference=o.text;o.text="'"+this._getDateTimeFormatter().format(new Date(o.reference.replace(/\'/g,"")),false)+"'"}t.push(o)}return t};d.prototype.convertTokensToRelString=function(e){var t="";for(var a=0;a<e.length;a++){t+=e[a].getText()}return t};d.prototype._createUUID=function(){return this._infraUtils.createUUID()};d.prototype._getAutoSuggestionCandidates=function(e){var t=0;if(e&&e.length>0){t=e.length+2}var a=this._getParser(this.convertTokensToRelString(e));var s=new this._astBunldeInstance.CodeCompletionCore(a);return s.collectSuggestions(t)};d.prototype._getParser=function(e){this._idpCustomVisitor.resetSequenceNumber();var t=new this._antlr4.InputStream(e);var a=new this._astBunldeInstance.IDPLexer(t);var s=new this._antlr4.CommonTokenStream(a);var n=new this._astBunldeInstance.IDPParser(s);var r=new this._astBunldeInstance.ASTErrorListener(D);n.removeErrorListeners();n.addErrorListener(r);return n};d.prototype.getSuggesstions=function(e,t){var a=this._getAutoSuggestionCandidates(e);return this._autoComplete.getSuggestions(e,a,t,this._oData)};return d},true);
//# sourceMappingURL=AstExpressionLanguage.js.map