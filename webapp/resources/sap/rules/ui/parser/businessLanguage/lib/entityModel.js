sap.ui.define(["sap/rules/ui/parser/businessLanguage/lib/constants","sap/rules/ui/parser/businessLanguage/lib/parseUtils","sap/rules/ui/parser/businessLanguage/lib/parseModel","sap/rules/ui/parser/businessLanguage/lib/utils","sap/rules/ui/parser/businessLanguage/lib/entityModelConstractor","sap/base/Log"],function(t,e,n,r,i,a){"use strict";var s=new e.parseUtilsLib;var o=new n.parseModelLib;var u=new r;function l(){}l.prototype.getType=function(){try{s.handleWarning(t.objectNamesEnum.abstractStatement+": getType function is not implemented.")}catch(t){}};l.prototype.getString=function(){try{s.handleWarning(t.objectNamesEnum.abstractStatement+": getString function is not implemented.")}catch(t){throw t}};function g(){}g.prototype.getType=function(){try{s.handleWarning(t.objectNamesEnum.abstractSelection+": getType function is not implemented.")}catch(t){throw t}};g.prototype.getString=function(){try{s.handleWarning(t.objectNamesEnum.abstractSelection+": getString function is not implemented.")}catch(t){throw t}};function h(){}h.prototype.getType=function(){try{s.handleWarning(t.objectNamesEnum.abstractValue+": getType function is not implemented.")}catch(t){throw t}};h.prototype.getString=function(){try{s.handleWarning(t.objectNamesEnum.abstractValue+": getString function is not implemented.")}catch(t){throw t}};function c(t){try{u.addProperties(this,t,["value","originalValue"]);this.getType=function(){return"OperatorOption"};this.getString=function(){return this.getType()+": \n { \n Value: "+this.getValue()+",\n OriginalValue: "+this.getOriginalValue()+"\n} \n"}}catch(t){throw t}}function p(e){try{var n=function(){s.validateArgumentsType(e,t.objectNamesEnum.aggregationOption,[{name:"aggregationOperator",required:true,type:[c],typeName:[t.objectNamesEnum.operatorOption]}])};n();u.addProperties(this,e,["aggregationOperator","groupByArray"],[null,null]);this.getType=function(){return t.objectNamesEnum.aggregationOption};this.getString=function(){var t=this.getGroupByArray()!==null?s.getStringArray(this.getGroupByArray()):null;var e=this.getAggregationOperator()!==null?this.getAggregationOperator().getString():null;return this.getType()+": \n { \n AggregationOperator: "+e+",\n GroupByArray: "+t+"\n} \n"};this.isNoneValuelistAggOperator=function(){var t=this.getAggregationOperator().getValue();if(t==="sum"||t==="avg"){return true}return false}}catch(t){throw t}}function y(e){try{u.addProperties(this,e,["operator","quantity","orderBy"]);this.getType=function(){return t.objectNamesEnum.collectionOperatorOption};this.getString=function(){var t=this.hasOwnProperty("getOrderBy")?this.getOrderBy().getString():null;return this.getType()+": \n { \n Operator: "+this.getOperator().getString()+",\n Quantity: "+this.getQuantity().getString()+",\n OrderBy: "+t+"\n} \n"}}catch(t){throw t}}function d(e){try{var n=function(e){s.validateNumberOfArguments(e,1,t.objectNamesEnum.arithmeticOperator)};n(arguments.length);u.addProperty(this,"Value",e);this.getType=function(){return t.objectNamesEnum.arithmeticOperator};this.getString=function(){var t=this.getValue();if(t===")"||t==="("){t="'"+t+"'"}return this.getType()+": \n { \n Value: "+t+"\n } \n"}}catch(t){throw t}}function m(e){try{this.params=[];this.push=function(e){if(e===null||e===undefined){s.handleWarning(t.objectNamesEnum.advanceFunction+": No value to push",o.getModelManger().mode);return}this.params.push(e)};this.getType=function(){return t.objectNamesEnum.advanceFunction};u.addProperty(this,"name",e);this.getString=function(){return this.getType()+": \n { Name: "+this.getName()+", \n Params: "+s.getStringArray(this.params)+"} \n"}}catch(t){throw t}}function f(){try{this.selectionsArray=[];this.push=function(e){if(e===null||e===undefined){s.handleWarning(t.objectNamesEnum.selectionClause+": No value to push",o.getModelManger().mode);return}if(Array.isArray(e)){var n;for(n=0;n<e.length;n++){this.validateAndAdd(e[n])}}else{this.validateAndAdd(e)}};this.addCurrentProperty=function(t){if(t===undefined||t===null){t=false}u.addProperty(this,"isCurrent",t)};this.validateAndAdd=function(t){if(t instanceof g){this.validateType(t)}this.selectionsArray.push(t)};this.validateType=function(t){if(!t.hasOwnProperty("getValueType")){return}if(!this.hasOwnProperty("getValueType")){u.addProperty(this,"ValueType",t.getValueType())}};this.getType=function(){return t.objectNamesEnum.selectionClause};this.getString=function(){return this.getType()+": \n { \n  isCurrent: "+this.getIsCurrent()+", \n selectionsArray: "+s.getStringArray(this.selectionsArray)+"} \n"};this.validateValueListForOp=function(t){var e=o.getModelManger();var n=e.getValueListAttribute();if(!n){return}if(!this.lastOpError){e.parseResult.cursorPosition=this.lastOpIndex;s.handleWarning("error_in_expression_invalid_op_for_value_list_message",[t,n.navPath]);this.lastOpError=true}};this.validateValueListAfterOp=function(t,e){this.lastOpIndex=t.start;this.validateValueListForOp(e)}}catch(t){throw t}}function v(){try{this.valuesArray=[];this.valueType=null;this.push=function(e){if(e===null||e===undefined){s.handleWarning(t.objectNamesEnum.setOfValues+": No value to push",o.getModelManger().mode);return}this.valuesArray.push(e)};this.getType=function(){return t.objectNamesEnum.setOfValues};this.setValueType=function(t){a.debug("setValueType: add property of "+t);u.addProperty(this,"ValueType",t)};this.getString=function(){return this.getType()+": \n {"+s.getStringArray(this.valuesArray)+"} \n"}}catch(t){throw t}}function S(e){try{this.valueType=null;var n=function(e){s.validateNumberOfArguments(e,1,t.objectNamesEnum.complexStatement)};n(arguments.length);u.addProperty(this,"Model",e);this.getType=function(){return t.objectNamesEnum.complexStatement};this.getValueType=function(){return this.getModel().getValueType()};this.getString=function(){return this.getType()+": \n { \n Model: "+this.getModel().getString()+"\n } \n"}}catch(t){throw t}}S.prototype=new l;S.prototype.constructor=S;function O(e){try{this.valueType=null;var n=function(){s.validateArgumentsType(e,t.objectNamesEnum.simpleStatement,[{name:"leftSelectionClause",required:true,type:[f],typeName:[t.objectNamesEnum.selectionClause]}])};this.validateAmbiguity=function(t,e,n){var r={};r.key="";r.args=[];var i=t.replace(/\s+/g,"");var a=e.replace(/\s+/g,"");if(i===a){if(!this.getLeftSelectionClause().getIsCurrent()&&(this.hasOwnProperty("getRightSelectionClause")&&!this.getRightSelectionClause().getIsCurrent())){r.key="error_in_expression_missing_current_message";s.handleError(r.key,r.args,n)}if(this.getLeftSelectionClause().getIsCurrent()&&this.hasOwnProperty("getRightSelectionClause")&&this.getRightSelectionClause().getIsCurrent()){r.key="error_in_expression_redundant_current_message";s.handleError(r.key,r.args,n)}}};n();u.addProperties(this,e,["leftSelectionClause","selectionOperator","rightSelectionClause"]);this.getType=function(){return t.objectNamesEnum.simpleStatement};this.getValueType=function(){return this.valueType};this.getString=function(){var t=null;if(this.hasOwnProperty("getSelectionOperator")){t=this.getSelectionOperator().getString()}var e=this.hasOwnProperty("getRightSelectionClause")?this.getRightSelectionClause().getString():null;return this.getType()+": \n { \n LeftSelectionClause: "+this.getLeftSelectionClause().getString()+", \n SelectionOperator: "+t+", \n RightSelectionClause: "+e+"\n } \n"}}catch(t){throw t}}O.prototype=new l;O.prototype.constructor=O;function T(e,n){try{var r={};r.args=[];var i=e.hasOwnProperty("navigationPredicateDetails")?e.navigationPredicateDetails.getModifiers().hasOwnProperty("current"):false;var a=e.hasOwnProperty("navigationPredicateDetails")?e.navigationPredicateDetails.getModifiers().hasOwnProperty("all"):false;var o=e.hasOwnProperty("isCurrent")&&e.isCurrent===true||i;if(o&&!n.isInsideWhere){r.key="error_in_expression_current_not_in_where_clause_message";s.handleError(r.key,r.args,n)}else if(e.hasOwnProperty("isCurrent")&&e.isCurrent===true&&i){r.key="error_in_expression_redundant_current_message";s.handleError(r.key,r.args,n)}else if(o&&a){r.key="error_in_expression_invalid_current_with_all_term_message";s.handleError(r.key,r.args,n)}else if(n.isAllContext()&&a&&e.navigationPredicateDetails.getNavigationFullPath()!==e.navigationPredicateDetails.getDataObject()){r.key="error_in_expression_invalid_all_with_all_term_message";s.handleError(r.key,r.args,n)}else if(!n.hasOwnProperty("isCurrent")&&n.isInsideWhere){n.isCurrent=o}else if(n.isInsideWhere&&n.isCurrent!==o){r.key="error_in_expression_missing_current_in_arithmetic__message";s.handleError(r.key,r.args,n)}else if(n.isInsideWhere&&o){n.isCurrent=true}e.isCurrent=o;u.addProperties(this,e,["navigationPredicateDetails","filterClause","isCurrent"]);this.getType=function(){return t.objectNamesEnum.selection};this.getString=function(){var t=this.hasOwnProperty("getFilterClause")&&this.getFilterClause()!==null?this.getFilterClause().getString():null;var e=this.hasOwnProperty("getNavigationPredicateDetails")&&this.getNavigationPredicateDetails()!==null&&this.getNavigationPredicateDetails().hasOwnProperty("getString")?this.getNavigationPredicateDetails().getString():null;return this.getType()+": \n { \n "+e+", \n FilterClause: "+t+", \n isCurrent: "+this.getIsCurrent()+"} \n"}}catch(t){throw t}}function P(e){try{var n=function(){s.validateArgumentExist(e,t.objectNamesEnum.compoundSelection,o);var n=t.SIMPLE_SELECTION_VALUE_TYPE.getByValue("string",e.valueType);if(n===null){s.handleWarning(t.objectNamesEnum.simpleSelection+":  valueType input arg must be "+t.SIMPLE_SELECTION_VALUE_TYPE.getStringByField("string"));return}};if(!e.hasOwnProperty("isParameter")){e.isParameter=false}if(!e.hasOwnProperty("index")){e.index=null}if(!e.hasOwnProperty("isCompound")||e.isCompound===false){e.isCompound=false;e.compoundValue=null}else{e.value=null}if(e.isParameter&&!(e.value instanceof Object)&&e.value!==null){e.value=e.value.replace(/^:/,"")}if(!e.hasOwnProperty("originalValue")){e.originalValue=e.value}n();u.addProperties(this,e,["value","compoundValue","originalValue","valueType","isParameter","isCompound","index"]);this.getType=function(){return t.objectNamesEnum.simpleSelection};this.getString=function(){var t=this.getValue()instanceof Object?this.getValue().getString():this.getValue();var e=null;if(this.getIsCompound()===true){var n=this.getCompoundValue();e="{ \n Value: "+n.value+",\n Constant: "+n.constant+"\n }"}return this.getType()+": \n { \n Value: "+t+",  \n CompoundValue: "+e+", \n OriginalValue: "+this.getOriginalValue()+",  \n ValueType: "+this.getValueType()+", \n IsParameter: "+this.getIsParameter()+", \n isCompound: "+this.getIsCompound()+", \n index: "+this.getIndex()+"\n } \n"}}catch(t){throw t}}P.prototype=new g;P.prototype.constructor=P;function b(e){try{var n=function(){s.validateArgumentsType(e,t.objectNamesEnum.compoundSelection,[{name:"compoundSelection",required:false,type:[b],typeName:[t.objectNamesEnum.compoundSelection]},{name:"selection",required:false,type:[T],typeName:[t.objectNamesEnum.selection]}])};n();if(!e.hasOwnProperty("valueType")){e.valueType=null}u.addProperties(this,e,["aggregationOption","compoundSelection","selection","valueType"]);this.getType=function(){return t.objectNamesEnum.compoundSelection};this.getString=function(){var t=this.hasOwnProperty("getAggregationOption")?this.getAggregationOption().getString():null;var e=this.hasOwnProperty("getValueType")?this.getValueType():null;var n=this.hasOwnProperty("getCompoundSelection")&&this.getCompoundSelection()?this.getCompoundSelection().getString():null;var r=this.hasOwnProperty("getSelection")?this.getSelection().getString():null;return this.getType()+": \n { \n AggregationOption: "+t+", \n ValueType: "+e+", \n CompoundSelection: "+n+", \n Selection: "+r+"\n } \n"}}catch(t){throw t}}b.prototype=new g;b.prototype.constructor=b;function V(e){try{var n=function(e){s.validateNumberOfArguments(e,2,t.objectNamesEnum.stringFilter)};n(arguments.length);u.addProperties(this,e,["value","operator"]);this.getType=function(){return t.SIMPLE_SELECTION_VALUE_TYPE.STRING.string};this.getString=function(){return this.getType()+": \n { \n NavigationDetails: "+this.getNavigationDetails.getString()+", \n Operator: "+this.getOperator()+", \n Value: "+this.getValue()+"\n } \n"}}catch(t){throw t}}V.prototype=new i.AbstractFilterClause;V.prototype.constructor=V;function N(e){try{var n=function(){s.validateArgumentsType(e,t.objectNamesEnum.dateFilter,[{name:"navigationDetails",required:false,type:[i.NavigationPredicateDetails],typeName:[t.objectNamesEnum.navigationPredicateDetails]}])};n();u.addProperties(this,e,["timeInterval","navigationDetails"]);this.getType=function(){return t.SIMPLE_SELECTION_VALUE_TYPE.DATE.string};this.getString=function(){var t=this.hasOwnProperty("getTimeInterval")?this.getTimeInterval().getString():null;var e=this.hasOwnProperty("getNavigationDetails")?this.getNavigationDetails().getString():null;return this.getType()+": \n { \n TimeInterval: "+t+", \n NavigationDetails: "+e+"\n } \n"}}catch(t){throw t}}N.prototype=new i.AbstractFilterClause;N.prototype.constructor=N;function w(e){try{var n=function(e){s.validateNumberOfArguments(e,1,t.objectNamesEnum.filterSelectionValue)};n(arguments.length);u.addProperty(this,"Value",e);this.getType=function(){return"FilterSelectionValue"};this.getString=function(){var t=this.hasOwnProperty("getValue")?this.getValue().getString():null;return this.getType()+": \n { \n Value: "+t+"\n } \n"}}catch(t){throw t}}w.prototype=new h;w.prototype.constructor=w;function E(){try{this.isParameter=false;this.prefix=null;this.type=null;this.date={start:{str:null,day:null,month:null,year:null,isParameter:false,parameterName:null},end:{str:null,day:null,month:null,year:null,isParameter:false,parameterName:null}};this.interval={};this.interval.number=null;this.interval.constant=null;this.interval.milliseconds=null;this.resolveType=function(t){a.debug("resolveType func,  dateString - "+t);if(this.prefix===null){this.type="simpleDate";this.date.start.str=t}else if(this.prefix==="between"){this.prefix=null;this.type="IntervalDate";this.date.end.str=t}else{this.date.start.str=t}a.debug("Date string - "+t+" and type - "+this.type)};this.getType=function(){return"DateValue"};this.subtractDateString=function(){a.debug("subtractDateString func,  start - "+this.date.start.str+", and end - "+this.date.end.str);if(this.date.start.str!==null){var e=t.DATE_CONST.getByValue("string",this.date.start.str);if(e===null){this.splitDate(this.date.start)}}if(this.date.end.str!==null){var n=t.DATE_CONST.getByValue("string",this.date.end.str);if(n===null){this.splitDate(this.date.end)}}};this.splitDate=function(t){var e=t.str.replace(/[']+/g,"");var n=e.split(/[\.\-\/]/);t.day=n[1];t.month=n[0];t.year=n[2]};this.calculateMilliseconds=function(){if(this.isParameter===false&&this.interval.number!==null&&this.interval.constant!==null&&this.interval.constant instanceof Object){this.interval.milliseconds=this.interval.number*this.interval.constant.multiply}};this.getString=function(){var t=this.interval.constant;if(this.interval.constant!==null&&this.interval.constant instanceof Object){a.debug("**** DateValue, getString - "+this.interval.constant.toString());t=this.interval.constant.string}return this.getType()+": \n { \n  Type: "+this.type+"\n Prefix: "+this.prefix+"\n isParameter: "+this.isParameter+"\n  Date: \n { start:  { \n day: "+this.date.start.day+"\n month: "+this.date.start.month+"\n year: "+this.date.start.year+"\n startDateString: "+this.date.start.str+"\n isParameter: "+this.date.start.isParameter+"\n parameterName: "+this.date.start.parameterName+"} \n end: {  \n day: "+this.date.end.day+"\n month: "+this.date.end.month+"\n year: "+this.date.end.year+"\n endDateString: "+this.date.end.str+"\n isParameter: "+this.date.end.isParameter+"\n parameterName: "+this.date.end.parameterName+"\n }}\n Interval: \n { number: "+this.interval.number+"\n constant: "+t+"\n milliseconds: "+this.interval.milliseconds+"\n \n}\n} \n"}}catch(t){throw t}}E.prototype=new h;E.prototype.constructor=E;function C(e){try{var n=function(e){s.validateNumberOfArguments(e,1,t.objectNamesEnum.stringValue)};n(arguments.length);u.addProperty(this,"Value",e);n();this.getType=function(){return"StringValue"};this.getString=function(){return this.getType()+": \n { \n Value: "+this.getValue()+"\n } \n"}}catch(t){throw t}}C.prototype=new h;C.prototype.constructor=C;function _(e){try{var n=function(e){s.validateNumberOfArguments(e,1,t.objectNamesEnum.booleanValue)};n(arguments.length);u.addProperty(this,"Value",e);n();this.getType=function(){return"BooleanValue"};this.getString=function(){return this.getType()+": \n { \n Value: "+this.getValue()+"\n } \n"}}catch(t){throw t}}_.prototype=new h;_.prototype.constructor=_;function A(e){try{var n=function(e){s.validateNumberOfArguments(e,1,t.objectNamesEnum.timeValue)};n(arguments.length);u.addProperty(this,"Value",e);n();this.getType=function(){return"TimeValue"};this.getString=function(){var t=this.hasOwnProperty("getValue")?this.getValue():null;return this.getType()+": \n { \n Value: "+t+"\n } \n"}}catch(t){throw t}}A.prototype=new h;A.prototype.constructor=A;return{AbstractStatement:l,AbstractSelection:g,AbstractValue:h,SimpleStatement:O,SelectionClause:f,OperatorOption:c,CollectionOperatorOption:y,Selection:T,CompoundSelection:b,SetOfValues:v,SimpleSelection:P,AdvanceFunction:m,AggregationOption:p,ArithmeticOperator:d}},true);
//# sourceMappingURL=entityModel.js.map