sap.ui.define(["sap/rules/ui/parser/businessLanguage/lib/constants","sap/rules/ui/parser/businessLanguage/lib/parseUtils"],function(e,r){"use strict";var s=new r.parseUtilsLib;function n(e,r){var s=0;for(s=0;s<r.length;++s){if(r[s].id===e){return s}}return-1}function t(r,s){if(s===e.TYPE_STRING||s===e.TYPE_DATE||s===e.TYPE_TIMESTAMP||s===e.TYPE_TIME){return r.slice(1,-1)}return r}function a(r,s,n){var a={};a.id=r.info.id;var i=n.vocaRTServ.getValueList(n.vocabulary,r.info.id);if(i.hasOwnProperty(e.propertiesEnum.metadata)&&i.hasOwnProperty(e.propertiesEnum.businessType)){var u=i[e.propertiesEnum.metadata];u.businessDataType=i[e.propertiesEnum.businessType];a.metadata=u}a.values=[];a.values.push(t(r.token,a.metadata.businessDataType));s.push(a)}function i(e,r){var s=0;for(s=0;s<r.length;++s){if(e===r[s]){return}}r.push(e)}function u(r,u,o,p){var l=[];var f=0;var v=p.tokens||s.buildTokenTypes(r,u,o);var E=0;for(E=0;E<v.length;++E){if(v[E].tokenType===e.tokenTypesEnum.valueList){f=n(v[E].info.id,l);if(f===-1){a(v[E],l,o)}else{i(t(v[E].token,l[f].metadata.businessDataType),l[f].values)}}}if(l.length>0){p[e.propertiesEnum.valueHelp]={};p[e.propertiesEnum.valueHelp][e.propertiesEnum.info]=l}}function o(r,n,a,i,u,o,p){if(a.length===0){a=s.buildTokenTypes(i,u,o)}var l=null;var f=o.vocaRTServ.getValueList(o.vocabulary,n);if(f.hasOwnProperty(e.propertiesEnum.businessType)){l=f[e.propertiesEnum.businessType]}var v={args:[]};var E={};var m=0;for(m=0;m<a.length;++m){if(a[m].tokenType===e.tokenTypesEnum.valueList&&a[m].info.id===n&&t(a[m].token,l)===r){v.key="error_in_expression_invalid_value_from_external_list_message";v.args[0]=t(a[m].token,l);o.parseResult.cursorPosition=a[m].start;s.handleError(v.key,v.args,o);E=o.parseResult.getParseResults();p.status=E.status;p.errorDetails=E.errorDetails;p.errorID=E.errorID;p.cursorPosition=E.cursorPosition;return true}}return false}function p(r,s,n,t,a){var i=a.tokens||[];var u="";var p=[];var l=false;var f=0;for(f=0;f<r.length;++f){if(!r[f].hasOwnProperty(e.propertiesEnum.values)){continue}p=r[f][e.propertiesEnum.values];for(u in p){if(p.hasOwnProperty(u)){if(!p[u]){l=o(u,r[f][e.propertiesEnum.id],i,s,n,t,a);if(l){return}}}}}}var l=function(r,s,n,t){if(n.flags[e.propertiesEnum.valueHelp]&&n.flags[e.propertiesEnum.valueHelp].hasOwnProperty(e.propertiesEnum.collectInfo)&&n.flags[e.propertiesEnum.valueHelp][e.propertiesEnum.collectInfo]===true){u(r,s,n,t)}if(n.flags[e.propertiesEnum.valueHelp]&&n.flags[e.propertiesEnum.valueHelp].hasOwnProperty(e.propertiesEnum.info)){p(n.flags[e.propertiesEnum.valueHelp][e.propertiesEnum.info],r,s,n,t)}};return{handleExternalValueHelp:l,getValueHelpIndexInInfoArray:n}},true);
//# sourceMappingURL=valueHelpValidator.js.map