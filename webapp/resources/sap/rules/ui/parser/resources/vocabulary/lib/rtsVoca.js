sap.ui.define(["sap/rules/ui/parser/resources/rule/lib/constantsBase","sap/rules/ui/parser/resources/vocabulary/lib/constants","sap/rules/ui/parser/resources/vocabulary/lib/runtimeServicesUtils","sap/rules/ui/parser/resources/vocabulary/lib/vocaObjects","sap/rules/ui/parser/resources/vocabulary/lib/vocaConversionUtils"],function(t,l,a,e,s){"use strict";a=new a.runtimeServicesUtilsLib;function i(t){this.globalObjects=null;this.globalRuleAttributes=null;this.globalStaticRuleTemplateAttributes=null;this.globalDynamicRuleTemplateAttributes=null;this.globalStaticVocabularyAttributes=null;this.allVocaObjects={allAssocAttr:null,allAssoc:null,allObjects:null,allActions:null,allOutputs:null,allAliases:null,allTerms:null,allTermsModifiers:null,allValueLists:null,allAttr:null,allActionsStaticParams:null,allOutputsStaticParams:null,allActionsRequiredParams:null,allOutputsRequiredParams:null,allAdvancedFunctions:null,allVocabularies:null};this.rtContext=t}i.prototype.refresh=function(){this.clearAll()};i.prototype.partialRefresh=function(t){if(t.hasOwnProperty(l.PARTIAL_REFRESH.ALIASES)){this.allVocaObjects.allAliases=null;var a;for(a in this.allVocaObjects.allVocabularies){if(this.allVocaObjects.allVocabularies.hasOwnProperty(a)){this.allVocaObjects.allVocabularies[a].aliases=null}}}else{this.clearAll()}};i.prototype.getAllVocaObjects=function(){return this.allVocaObjects};i.prototype.readValueListValues=function(t){if(t[l.VALUE_LIST_VALUES]){return t[l.VALUE_LIST_VALUES]}return this.rtContext.readValueListValues(t)};i.prototype.getValueListDescriptions=function(t,l,a){var e=[];var s;if(arguments.length>2&&a){s=a}else{s=null}var i;var o=this.loadVoca(t,false,false,false,false,true,false,false);if(o){if(o.valueLists.hasOwnProperty(l)){o.valueLists[l].values=this.readValueListValues(o.valueLists[l]);var r=null;for(r in o.valueLists[l].values){if(o.valueLists[l].values.hasOwnProperty(r)){if(s===null||r.toLowerCase().indexOf(s.toLowerCase())===0){i=r.replace(/\\/g,"\\\\").replace(/"/g,'\\"');e.push(i)}}}}}return e};i.prototype.GetValueFromValueListDescription=function(t,l,a){var e=null;var s=this.loadVoca(t,false,false,false,false,true,false,false);if(s){if(s.valueLists.hasOwnProperty(l)){s.valueLists[l].values=this.readValueListValues(s.valueLists[l]);if(s.valueLists[l].values.hasOwnProperty(a)){e=s.valueLists[l].values[a]}}}return e};i.prototype.GetDescriptionFromValueListValue=function(t,l,a){var e,s;var i=this.loadVoca(t,false,false,false,false,true,false,false);if(i){if(i.valueLists.hasOwnProperty(l)){e=this.readValueListValues(i.valueLists[l]);for(s in e){if(e.hasOwnProperty(s)&&("'"+e[s]+"'"===a||e[s]===a)){return s}}}}return null};i.prototype.IsValueListDescriptionExist=function(t,l){var a=false;var e=this.loadVoca(t,false,false,false,false,true,false,false);if(e){if(e.valueLists.hasOwnProperty(l)){if(e.valueLists[l].descriptionColumn){a=true}}}return a};i.prototype.getValueList=function(t,l){var a=null;var e=this.loadVoca(t,false,false,false,false,true,false,false);if(e){if(e.valueLists.hasOwnProperty(l)){a=e.valueLists[l]}}return a};i.prototype.getObjects=function(t,l){var a=[];var e;if(arguments.length>1&&l){e=l}else{e=null}var s=this.loadVoca(t,true,false,false,false,false,false,false);if(s){var i=null;for(i in s.objects){if(s.objects.hasOwnProperty(i)&&(e===null||i.indexOf(e)===0)){a.push(this.getObject(t,i))}}}return{objects:a}};i.prototype.getAllActionNames=function(t,a){var e;var s={};this.loadAllActions(this.allVocaObjects);for(e=0;e<this.allVocaObjects.allActions.length;e++){if(this.allVocaObjects.allActions[e].isPrivate===true){continue}if(this.allVocaObjects.allActions[e].vocaName===a){continue}if(t===l.GLOBAL||(t===this.allVocaObjects.allActions[e].scope||this.allVocaObjects.allActions[e].scope===l.GLOBAL)){s[this.allVocaObjects.allActions[e].name]=this.allVocaObjects.allActions[e].vocaName}}return s};i.prototype.getAllOutputNames=function(t,a){var e;var s={};this.loadAllOutputs(this.allVocaObjects);for(e=0;e<this.allVocaObjects.allOutputs.length;e++){if(this.allVocaObjects.allOutputs[e].isPrivate===true){continue}if(this.allVocaObjects.allOutputs[e].vocaName===a){continue}if(t===l.GLOBAL||(t===this.allVocaObjects.allOutputs[e].scope||this.allVocaObjects.allOutputs[e].scope===l.GLOBAL)){s[this.allVocaObjects.allOutputs[e].name]=this.allVocaObjects.allOutputs[e].vocaName}}return s};i.prototype.getAllPersistedAliasNames=function(t,a,e){var s;var i={};this.loadAllAliases(this.allVocaObjects);for(s=0;s<this.allVocaObjects.allAliases.length;s++){if(this.allVocaObjects.allAliases[s].isPrivate===true&&(!e||this.allVocaObjects.allAliases[s].vocaName!==e)){continue}if(a&&this.allVocaObjects.allAliases[s].vocaName===a){continue}if(t===l.GLOBAL||(t===this.allVocaObjects.allAliases[s].scope||this.allVocaObjects.allAliases[s].scope===l.GLOBAL)){i[this.allVocaObjects.allAliases[s].name]=this.allVocaObjects.allAliases[s]}}return i};i.prototype.getAllPersistedValueListsNames=function(t,a,e){var s={};var i=null;var o;this.loadAllValueLists();for(o=0;o<this.allVocaObjects.allValueLists.length;o++){i=this.allVocaObjects.allValueLists[o];if(i.isPrivate===true&&(!e||i.vocaName!==e)){continue}if(a&&i.vocaName===a){continue}if(t===l.GLOBAL||(t===i.scope||i.scope===l.GLOBAL)){s[this.allVocaObjects.allValueLists[o].name]=i}}return s};i.prototype.isVocabularyExist=function(t,a){var e=l.ALL;if(a){e=a}var s=this.getVocabulariesNames(e,true);var i;for(i=0;i<s.length;i++){if(s[i].name===t){return true}}return false};i.prototype.isTermsExist=function(t){var l=this.loadVoca(t,false,false,false,false,false,true,false);if(!l){return null}var a="";for(a in l.terms){if(l.terms.hasOwnProperty(a)){return true}}return false};i.prototype.getAllObjectModelNames=function(t,a,e){var s;var i={};this.loadAllObjects(this.allVocaObjects);for(s=0;s<this.allVocaObjects.allObjects.length;s++){if(this.allVocaObjects.allObjects[s].isPrivate===true&&(!e||this.allVocaObjects.allObjects[s].vocaName!==e)){continue}if(a&&this.allVocaObjects.allObjects[s].vocaName===a){continue}if(t===l.GLOBAL||(t===this.allVocaObjects.allObjects[s].scope||this.allVocaObjects.allObjects[s].scope===l.GLOBAL)){i[this.allVocaObjects.allObjects[s].name]=this.allVocaObjects.allObjects[s].vocaName}}this.loadAllGlobalObjects();var o=null;for(o in this.globalObjects){if(this.globalObjects.hasOwnProperty(o)){i[o]=this.globalObjects[o].vocaName}}return i};i.prototype.getAllAttributesNames=function(t,a,e){var s;var i={};var o=null;this.loadRuleAttributes();for(o in this.globalRuleAttributes){if(this.globalRuleAttributes.hasOwnProperty(o)){i[o]=this.globalRuleAttributes[o]}}this.addStaticRuleTemplateAttributes();this.addDynamicRuleTemplateAttributes();this.addStaticVocabularyAttributes();for(o in this.globalStaticRuleTemplateAttributes){if(this.globalStaticRuleTemplateAttributes.hasOwnProperty(o)){i[o]=this.globalStaticRuleTemplateAttributes[o]}}for(o in this.globalDynamicRuleTemplateAttributes){if(this.globalDynamicRuleTemplateAttributes.hasOwnProperty(o)){i[o]=this.globalDynamicRuleTemplateAttributes[o]}}for(o in this.globalStaticVocabularyAttributes){if(this.globalStaticVocabularyAttributes.hasOwnProperty(o)){i[o]=this.globalStaticVocabularyAttributes[o]}}this.loadAllAttributes(this.allVocaObjects);for(s=0;s<this.allVocaObjects.allAttr.length;s++){if(this.allVocaObjects.allAttr[s].isPrivate===true&&(!e||this.allVocaObjects.allAttr[s].vocaName!==e)){continue}if(a&&this.allVocaObjects.allAttr[s].vocaName===a){continue}if(t===l.GLOBAL||(this.allVocaObjects.allAttr[s].scope===t||this.allVocaObjects.allAttr[s].scope===l.GLOBAL)){i[this.allVocaObjects.allAttr[s].name]=this.allVocaObjects.allAttr[s]}}return i};i.prototype.isAttributeExists=function(t,l){var a=this.getVocabularyScope(t);var e=this.getAllAttributesNames(a);if(e.hasOwnProperty(l)){return true}return false};i.prototype.getVocabulary=function(t,l,a){var e=this.loadVoca(t,true,true,true,true,true,false,true,l);if(!e){return null}var i=null;var o=s.getVocaConversionUtils().isValueListConversionDefined(a);if(o){i=JSON.parse(JSON.stringify(e))}else{i=e}var r=null;for(r in i.objects){if(i.objects.hasOwnProperty(r)){i.objects[r]=this.getObject(t,r)}}var n=null;for(n in i.actions){if(i.actions.hasOwnProperty(n)){i.actions[n]=this.getAction(t,n,a)}}var u=null;for(u in i.outputs){if(i.outputs.hasOwnProperty(u)){i.outputs[u]=this.getOutput(t,u,a)}}if(o){var c=null;for(c in i.aliases){if(i.aliases.hasOwnProperty(c)){i.aliases[c]=this.getAlias(t,c,a)}}}return i};i.prototype.getVocabularyScope=function(t){this.loadAllVocabularies();if(this.allVocaObjects.allVocabularies.hasOwnProperty(t)){return this.allVocaObjects.allVocabularies[t].scope}return null};i.prototype.getVocabulariesInScope=function(t){var l=this.getVocabularyScope(t);return this.getVocabulariesNames(l,true)};i.prototype.getIsIncludeGlobal=function(t){if(t===null||t===undefined){return true}if(t==="false"){return false}return true};i.prototype.getVocabulariesNames=function(t,a){var e=l.ALL;var s=this.getIsIncludeGlobal(a);if(t){e=t}this.loadAllVocabularies();var i=[];var o=null;for(o in this.allVocaObjects.allVocabularies){if(this.allVocaObjects.allVocabularies.hasOwnProperty(o)){if(s===false&&this.allVocaObjects.allVocabularies[o].scope===l.GLOBAL){continue}if(e===l.ALL){i.push({name:o})}else if(t===l.PUBLIC&&this.allVocaObjects.allVocabularies[o].isPrivate===false){i.push({name:o})}else if(t===l.PRIVATE&&this.allVocaObjects.allVocabularies[o].isPrivate===true){i.push({name:o})}else if(t===this.allVocaObjects.allVocabularies[o].scope||this.allVocaObjects.allVocabularies[o].scope===l.GLOBAL){i.push({name:o})}}}return i};i.prototype.getDefaultWritableForAppByVocabulary=function(t){var l=this.getVocabularyScope(t);return this.getDefaultWritableForAppByScope(l)};i.prototype.getDefaultWritableForAppByScope=function(t){this.loadAllVocabularies();var l=null;var a={vocabularies:[]};for(l in this.allVocaObjects.allVocabularies){if(this.allVocaObjects.allVocabularies.hasOwnProperty(l)){if(this.allVocaObjects.allVocabularies[l].scope===t&&this.allVocaObjects.allVocabularies[l].isWritable===true){a.vocabularies.push(l);a.scope=t;break}}}return a};i.prototype.isObjectExist=function(t,l){if(this.isGlobalObject(l)){return true}var a=this.loadVoca(t,true,false,false,false,false,false,false);if(!a){return false}return a.objects.hasOwnProperty(l)};i.prototype.isGlobalObject=function(t){this.loadAllGlobalObjects();return this.globalObjects.hasOwnProperty(t)};i.prototype.getObject=function(t,l){return this.loadObject(t,l,true,true)};i.prototype.getObjectIgnoreCase=function(t,l){return this.loadObjectIgnoreCase(t,l,true,true)};i.prototype.getObjectRuntimeInfo=function(t,l){var a=this.loadObject(t,l,false,false);if(!a){return null}return{schema:a.schema,runtime_name:a.runtimeName}};i.prototype.getObjectRuntimeName=function(t,l){var a=this.loadObject(t,l,false,false);if(!a){return null}return a.runtimeName};i.prototype.getObjectRuntimeSchemaName=function(t,l){var a=this.loadObject(t,l,false,false);if(!a){return null}return a.schema};i.prototype.getActionsNames=function(t,l){var a=[];var e;if(arguments.length>1&&l){e=l}else{e=null}var s=this.loadVoca(t,false,true,false,false,false,false,false);if(s){var i=null;for(i in s.actions){if(s.actions.hasOwnProperty(i)&&(e===null||i.indexOf(e)===0)){a.push({name:i})}}}return a};i.prototype.getTerms=function(t,l){var a=[];var e;if(arguments.length>1&&l){e=l}else{e=null}var s=this.loadVoca(t,false,false,false,false,false,true,false);if(s){var i=null;for(i in s.terms){if(s.terms.hasOwnProperty(i)&&(e===null||i.toLowerCase().indexOf(e.toLowerCase())===0)){a.push(s.terms[i])}}}return{terms:a}};i.prototype.getActions=function(t,l,a){var e=[];var s;if(arguments.length>1&&l){s=l}else{s=null}var i=this.loadVoca(t,false,true,false,false,false,false,false);if(i){var o=null;for(o in i.actions){if(i.actions.hasOwnProperty(o)&&(s===null||o.indexOf(s)===0)){e.push(this.getAction(t,o,a))}}}return{actions:e}};i.prototype.getAction=function(t,l,a){var e=this.loadVoca(t,false,true,false,false,false,false,false);if(!e){return null}if(!e.actions[l]){return null}var i=e.actions[l];if(i){if(!i.staticParams){this.loadAllActionsStaticParams();i.staticParams=[];var o;for(o=0;o<this.allVocaObjects.allActionsStaticParams.length;o++){if(i.id===this.allVocaObjects.allActionsStaticParams[o].actionId){i.staticParams.push(this.allVocaObjects.allActionsStaticParams[o])}}}if(!i.requiredParams){this.loadAllActionsRequiredParams();i.requiredParams=[];var r;for(r=0;r<this.allVocaObjects.allActionsRequiredParams.length;r++){if(i.id===this.allVocaObjects.allActionsRequiredParams[r].actionId){i.requiredParams.push(this.allVocaObjects.allActionsRequiredParams[r])}}}}var n=s.getVocaConversionUtils().convertAction(this.rtContext.getConnection(),t,i,a);return n};i.prototype.getTerm=function(t,l){var a=this.loadVoca(t,false,false,false,false,false,true,false);if(!a){return null}if(!a.terms[l]){return null}var e=a.terms[l];return e};i.prototype.isTermModifierEmpty=function(t){var l=this.loadVoca(t,false,false,false,false,false,true,false);if(!l){return null}if(!l.terms){return null}var a=true;var e;if(Object.keys(l.terms).length!==0){for(e in l.terms){if(l.terms.hasOwnProperty(e)){if(Object.keys(l.terms[e].modifiers).length!==0){a=false;break}}}}return a};i.prototype.isCurrentTermModifierEmpty=function(t){var a=this.loadVoca(t,false,false,false,false,false,true,false);if(!a){return null}if(!a.terms){return null}var e=true;var s;if(Object.keys(a.terms).length!==0){for(s in a.terms){if(a.terms.hasOwnProperty(s)){if(a.terms[s].modifiers&&a.terms[s].modifiers[l.TERM_MODIFIER_CURRENT]){e=false;break}}}}return e};i.prototype.getAlias=function(t,l,a){var e=this.rtContext.getTransientVocabulary();var i=null;if(e){i=e.getAlias(l)}if(i){return i}var o=this.loadVoca(t,false,false,false,true,false,false,false);if(!o){return null}i=o.aliases[l];if(!i){return null}var r=i;if(a){r=s.getVocaConversionUtils().convertAlias(this.rtContext.getConnection(),this,t,i,a)}return r};i.prototype.isAliasExist=function(t,l){var a=this.loadVoca(t,false,false,false,true,false,false,false);if(!a){return false}if(!a.aliases[l]){var e=this.rtContext.getTransientVocabulary();if(e&&e.getAlias(l)){return true}return false}return true};i.prototype.isActionExist=function(t,l){var a=this.loadVoca(t,false,true,false,false,false,false,false);if(!a){return false}if(!a.actions[l]){return false}return true};i.prototype.getAliasesNames=function(t,l){var a=[];var e;if(arguments.length>1&&l){e=l}else{e=null}var s=this.loadVoca(t,false,false,false,true,false,false,false);if(s){var i=null;for(i in s.aliases){if(s.aliases.hasOwnProperty(i)&&(e===null||i.indexOf(e)===0)){a.push({name:i})}}}return a};i.prototype.getOutputsNames=function(t,l){var a=[];var e;if(arguments.length>1&&l){e=l}else{e=null}var s=this.loadVoca(t,false,false,true,false,false,false,false);if(s){var i=null;for(i in s.outputs){if(s.outputs.hasOwnProperty(i)&&(e===null||i.indexOf(e)===0)){a.push({name:i})}}}return a};i.prototype.getOutputs=function(t,l,a){var e=[];var s;if(arguments.length>1&&l){s=l}else{s=null}var i=this.loadVoca(t,false,false,true,false,false,false,false);if(i){var o=null;for(o in i.outputs){if(i.outputs.hasOwnProperty(o)&&(s===null||o.indexOf(s)===0)){e.push(this.getOutput(t,o,a))}}}return{outputs:e}};i.prototype.getAliases=function(t,l,a){var e=[];var s;if(arguments.length>1&&l){s=l}else{s=null}var i=this.rtContext.getTransientVocabulary();var o=null;if(i){o=i.getAliasesMap();var r=null;for(r in o){if(o.hasOwnProperty(r)&&(s===null||r.toLowerCase().indexOf(s.toLowerCase())===0)){e.push(o[r])}}}var n=this.loadVoca(t,false,false,false,true,false,false,false);if(n){var u=null;for(u in n.aliases){if(n.aliases.hasOwnProperty(u)&&(s===null||u.toLowerCase().indexOf(s.toLowerCase())===0)){if(!o||!o[u]){e.push(this.getAlias(t,u,a))}}}}return{aliases:e}};i.prototype.getOutput=function(t,l,a){var e=this.loadVoca(t,false,false,true,false,false,false,false);if(!e){return null}if(!e.outputs[l]){return null}var i=e.outputs[l];if(i){if(!i.staticParams){this.loadAllOutputsStaticParams();i.staticParams=[];var o;for(o=0;o<this.allVocaObjects.allOutputsStaticParams.length;o++){if(i.id===this.allVocaObjects.allOutputsStaticParams[o].outputId){i.staticParams.push(this.allVocaObjects.allOutputsStaticParams[o])}}}if(!i.requiredParams){this.loadAllOutputsRequiredParams();i.requiredParams=[];var r;for(r=0;r<this.allVocaObjects.allOutputsRequiredParams.length;r++){if(i.id===this.allVocaObjects.allOutputsRequiredParams[r].outputId){i.requiredParams.push(this.allVocaObjects.allOutputsRequiredParams[r])}}}}var n=s.getVocaConversionUtils().convertOutput(this.rtContext.getConnection(),t,i,a);return n};i.prototype.isOutputExist=function(t,l){var a=this.loadVoca(t,false,false,true,false,false,false,false);if(!a){return false}if(!a.outputs[l]){return false}return true};i.prototype.getObjectsNames=function(t,l){var a=[];var e;if(arguments.length>1&&l){e=l}else{e=null}var s=this.loadVoca(t,true,false,false,false,false,false,false);if(s){var i=null;for(i in s.objects){if(s.objects.hasOwnProperty(i)&&(e===null||i.toLowerCase().indexOf(e.toLowerCase())===0)){a.push({name:i})}}}return a};i.prototype.getObjectAssociationsNames=function(t,l,a){var e=[];var s;if(arguments.length>1&&a){s=a}else{s=null}var i=this.loadObject(t,l,false,true);if(i){var o=null;for(o in i.associations){if(i.associations.hasOwnProperty(o)&&(s===null||o.toLowerCase().indexOf(s.toLowerCase())===0)){e.push({name:o})}}}return e};i.prototype.getObjectAttributesNames=function(t,l,a){var e=[];var s;if(arguments.length>1&&a){s=a}else{s=null}var i=this.loadObject(t,l,true,false);if(i){var o=null;for(o in i.attributes){if(i.attributes.hasOwnProperty(o)){if(s===null||o.toLowerCase().indexOf(s.toLowerCase())===0){e.push({name:o})}}}}return e};i.prototype.getAttribute=function(t,l,a){var e=this.loadObject(t,l,true,false);if(!e){return null}if(!e.attributes[a]){return null}return e.attributes[a]};i.prototype.getAttributeIgnoreCase=function(t,l,a){var e=this.loadObjectIgnoreCase(t,l,true,false);if(!e){return null}if(!e.attributes[a]){return null}return e.attributes[a]};i.prototype.getAttributeDataType=function(t,l,a){var e=this.loadObject(t,l,true,false);if(!e){return null}if(!e.attributes[a]){return null}return e.attributes[a].dataType};i.prototype.getAttributeRuntimeName=function(t,l,a){var e=this.loadObject(t,l,true,false);if(!e){return null}if(!e.attributes[a]){return null}return e.attributes[a].runtimeName};i.prototype.getAttributes=function(t,l){var a=[];var e=this.loadObject(t,l,true,false);if(e){var s=null;for(s in e.attributes){if(e.attributes.hasOwnProperty(s)){a.push(e.attributes[s])}}}return a};i.prototype.getAssociations=function(t,l,a){var e=[];var s;var i=this.loadObject(t,l,false,true);if(i){var o=null;for(o in i.associations){if(i.associations.hasOwnProperty(o)){s=i.associations[o];e.push(s);if(a){this.loadAssocAttr(s)}}}}return e};i.prototype.getAssociation=function(t,l,a,e){var s=this.loadObject(t,l,false,true);if(!s){return null}if(!s.associations[a]){return null}var i=s.associations[a];if(i&&e){this.loadAssocAttr(i)}return i};i.prototype.getAssociationIgnoreCase=function(t,l,a,e){var s=this.loadObjectIgnoreCase(t,l,false,true);if(!s){return null}if(!s.associations[a]){return null}var i=s.associations[a];if(i&&e){this.loadAssocAttr(i)}return i};i.prototype.getAdvancedFunctions=function(t,l){var a=[];var e;if(arguments.length>1&&l){e=l}else{e=null}var s=this.loadVoca(t,false,false,false,false,false,false,true);if(s){var i=null;for(i in s.advancedFunctions){if(s.advancedFunctions.hasOwnProperty(i)&&(e===null||i.indexOf(e)===0)){a.push(this.getAdvancedFunction(t,i))}}}return{advancedFunctions:a}};i.prototype.getAdvancedFunction=function(t,l){var a=this.loadVoca(t,false,false,false,false,false,false,true);if(!a){return null}if(!a.advancedFunctions[l]){return null}var e=a.advancedFunctions[l];return e};i.prototype.clearAll=function(){this.globalObjects=null;this.globalRuleAttributes=null;this.globalStaticRuleTemplateAttributes=null;this.globalDynamicRuleTemplateAttributes=null;this.globalStaticVocabularyAttributes=null;this.globalAttr=null;this.allVocaObjects.allAssocAttr=null;this.allVocaObjects.allAssoc=null;this.allVocaObjects.allObjects=null;this.allVocaObjects.allAttr=null;this.allVocaObjects.allActions=null;this.allVocaObjects.allOutputs=null;this.allVocaObjects.allAliases=null;this.allVocaObjects.allValueLists=null;this.allVocaObjects.allTerms=null;this.allVocaObjects.allTermsModifiers=null;this.allVocaObjects.allActionsStaticParams=null;this.allVocaObjects.allOutputsStaticParams=null;this.allVocaObjects.allActionsRequiredParams=null;this.allVocaObjects.allOutputsRequiredParams=null;this.allVocaObjects.allAdvancedFunctions=null;this.allVocaObjects.allVocabularies=null};i.prototype.loadAllVocabularies=function(){if(this.allVocaObjects.allVocabularies){return}this.rtContext.loadAllVocabularies(this.allVocaObjects)};i.prototype.loadVoca=function(t,l,a,e,s,i,o,r,n){this.loadAllVocabularies();if(!this.isVocabularyExist(t)){return null}var u=this.allVocaObjects.allVocabularies[t];if(l&&u.objects===null){this.loadVocaObjects(u,n)}if(a&&u.actions===null){this.loadVocaActions(u)}if(e&&u.outputs===null){this.loadVocaOutputs(u)}if(s&&u.aliases===null){this.loadVocaAliases(u)}if(i&&u.valueLists===null){this.loadVocaValueLists(u)}if(o&&u.terms===null){this.loadVocaTerms(u)}if(r&&u.advancedFunctions===null){this.loadVocaAdvancedFunctions(u)}return u};i.prototype.loadAllObjects=function(){if(this.allVocaObjects.allObjects){return}this.rtContext.loadAllObjects(this.allVocaObjects)};i.prototype.addStaticRuleAssocs=function(t){var a=new e.AssocInfo("","",l.DO_RULE_TEMPLATE,l.DO_RULE_TEMPLATE,l.CARDINALITY_MANY_TO_ONE,null);a.attrs=[];a.attrs.push(new e.AssocAttrInfo("",l.ATT_RULE__TEMPLATE_ID,l.ATT_ID));t.associations[a.name]=a;var s=new e.AssocInfo("","",l.ASSOC_VOCABULARY,l.DO_VOCABULARY,l.CARDINALITY_MANY_TO_ONE,null);s.attrs=[];s.attrs.push(new e.AssocAttrInfo("",l.ATT_VOCABULARY,l.ATT_VOCA_FULL_NAME));t.associations[s.name]=s};i.prototype.addStaticVocabularyAttributes=function(){if(this.globalStaticVocabularyAttributes){return}this.globalStaticVocabularyAttributes={};this.globalStaticVocabularyAttributes[l.ATT_VOCA_SCOPE]=new e.AttrInfo("",l.ATT_VOCA_SCOPE,l.DO_VOCABULARY,l.VOCABULARY_COL_SCOPE,"","NVARCHAR","String",512,"Data",l.VOCABULARY_COL_SCOPE,null,null,null,null);this.globalStaticVocabularyAttributes[l.ATT_VOCA_FULL_NAME]=new e.AttrInfo("",l.ATT_VOCA_FULL_NAME,l.DO_VOCABULARY,l.VOCABULARY_COL_PATH_FULL_NAME,"","NVARCHAR","String",512,"Data",l.VOCABULARY_COL_PATH_FULL_NAME,null,null,null,null)};i.prototype.addStaticRuleTemplateAttributes=function(){if(this.globalStaticRuleTemplateAttributes){return}this.globalStaticRuleTemplateAttributes={};this.globalStaticRuleTemplateAttributes[l.ATT_ID]=new e.AttrInfo("",l.ATT_ID,l.DO_RULE_TEMPLATE,t.COL_ID,"","CHAR","String",32,"Data",t.TABLE_RULE_TEMPLATE,null,null,null,null);this.globalStaticRuleTemplateAttributes[l.ATT_PACKAGE]=new e.AttrInfo("",l.ATT_PACKAGE,l.DO_RULE_TEMPLATE,t.COL_PACKAGE,"","NVARCHAR","String",256,"Data",t.TABLE_RULE_TEMPLATE,null,null,null,null);this.globalStaticRuleTemplateAttributes[l.ATT_NAME]=new e.AttrInfo("",l.ATT_NAME,l.DO_RULE_TEMPLATE,t.COL_NAME,"","NVARCHAR","String",256,"Data",t.TABLE_RULE_TEMPLATE,null,null,null,null);this.globalStaticRuleTemplateAttributes[l.ATT_DESC]=new e.AttrInfo("",l.ATT_DESC,l.DO_RULE_TEMPLATE,t.COL_DESCRIPTION,"","NVARCHAR","String",256,"Data",t.TABLE_RULE_TEMPLATE,null,null,null,null);this.globalStaticRuleTemplateAttributes[l.ATT_VOCABULARY]=new e.AttrInfo("",l.ATT_VOCABULARY,l.DO_RULE_TEMPLATE,t.COL_DEFAULT_VOCABULARY,"","NVARCHAR","String",256,"Data",t.TABLE_RULE_TEMPLATE,null,null,null,null);this.globalStaticRuleTemplateAttributes[l.ATT_OUTPUT]=new e.AttrInfo("",l.ATT_OUTPUT,l.DO_RULE_TEMPLATE,t.COL_OUTPUT,"","NVARCHAR","String",256,"Data",t.TABLE_RULE,null,null)};i.prototype.addDynamicRuleTemplateAttributes=function(){if(this.globalDynamicRuleTemplateAttributes){return}this.globalDynamicRuleTemplateAttributes=this.rtContext.getDynamicRuleTemplateAttributes()};i.prototype.addStaticRuleAttributes=function(){this.globalRuleAttributes[l.ATT_ID]=new e.AttrInfo("",l.ATT_ID,l.DO_RULE,t.COL_ID,"","CHAR","String",32,"Data",t.TABLE_RULE,null,null,null,null);this.globalRuleAttributes[l.ATT_PACKAGE]=new e.AttrInfo("",l.ATT_PACKAGE,l.DO_RULE,t.COL_PACKAGE,"","NVARCHAR","String",256,"Data",t.TABLE_RULE,null,null,null,null);this.globalRuleAttributes[l.ATT_NAME]=new e.AttrInfo("",l.ATT_NAME,l.DO_RULE,t.COL_NAME,"","NVARCHAR","String",256,"Data",t.TABLE_RULE,null,null,null,null);this.globalRuleAttributes[l.ATT_RULE__TEMPLATE_ID]=new e.AttrInfo("",l.ATT_RULE__TEMPLATE_ID,l.DO_RULE,t.COL_RULE_TEMPLATE_ID,"","CHAR","String",32,"Data",t.TABLE_RULE,null,null,null,null);this.globalRuleAttributes[l.ATT_DESC]=new e.AttrInfo("",l.ATT_DESC,l.DO_RULE,t.COL_DESCRIPTION,"","NVARCHAR","String",256,"Data",t.TABLE_RULE,null,null,null,null);this.globalRuleAttributes[l.ATT_RULE__STATUS]=new e.AttrInfo("",l.ATT_RULE__STATUS,l.DO_RULE,t.COL_STATUS,"","NVARCHAR","String",32,"Data",t.TABLE_RULE,null,null,null,null);this.globalRuleAttributes[l.ATT_OUTPUT]=new e.AttrInfo("",l.ATT_OUTPUT,l.DO_RULE,t.COL_OUTPUT,"","NVARCHAR","String",256,"Data",t.TABLE_RULE,null,null,null,null);this.globalRuleAttributes[l.ATT_SINGLE_CONSUMPTION]=new e.AttrInfo("",l.ATT_SINGLE_CONSUMPTION,l.DO_RULE,t.COL_SINGLE_CONSUMPTION,"","TINYINT","Boolean","Data",t.TABLE_RULE,null,null,null,null);this.globalRuleAttributes[l.ATT_VOCABULARY]=new e.AttrInfo("",l.ATT_VOCABULARY,l.DO_RULE,t.COL_VOCABULARY,"","NVARCHAR","String",256,"Data",t.TABLE_RULE,null,null,null,null);this.globalRuleAttributes[l.ATT_MANUAL_ASSIGNMENT]=new e.AttrInfo("",l.ATT_MANUAL_ASSIGNMENT,l.DO_RULE,t.COL_MANUAL_ASSIGNMENT,"","TINYINT","Boolean",1,"Data",t.TABLE_RULE,null,null,null,null)};i.prototype.loadRuleAttributes=function(){if(this.globalRuleAttributes){return}this.globalRuleAttributes={};this.addStaticRuleAttributes()};i.prototype.loadAllGlobalObjects=function(){if(this.globalObjects){return}var s={};var i=new e.ObjectInfo(null,null,l.HRF_MODEL,"",l.DO_VOCABULARY,l.TABLE_VOCABULARY,this.rtContext.getHRFSchema());s[i.name]=i;i.associations={};var o=new e.ObjectInfo(null,null,l.HRF_MODEL,"",l.DO_RULE_TEMPLATE,t.TABLE_RULE_TEMPLATE,this.rtContext.getHRFSchema());s[o.name]=o;o.associations={};var r=new e.AssocInfo("","",l.DO_RULE,l.DO_RULE,l.CARDINALITY_ONE_TO_MANY,null);r.attrs=[];r.attrs.push(new e.AssocAttrInfo("",l.ATT_ID,l.ATT_RULE__TEMPLATE_ID));o.associations[r.name]=r;var n=new e.ObjectInfo(null,null,l.HRF_MODEL,"",l.DO_RULE,t.TABLE_RULE,this.rtContext.getHRFSchema());s[n.name]=n;n.associations={};this.addStaticRuleAssocs(n);var u=this.rtContext.getDefinedTemplates();var c,f,A,b;for(c=0;c<u.length;c++){f=u[c].pack;A=u[c].name;b=new e.ObjectInfo(null,null,l.RULE_TEMPLATE,"",A,a.makeGlobalObjectRTName(f,A),this.rtContext.getHRFSchema());s[b.name]=b;r=new e.AssocInfo("","",A,A,l.CARDINALITY_ONE_TO_ONE,null);r.attrs=[];r.attrs.push(new e.AssocAttrInfo("",l.ATT_ID,l.ATT_ID));n.associations[r.name]=r}this.globalObjects=s};i.prototype.loadAllActions=function(){if(this.allVocaObjects.allActions){return}this.rtContext.loadAllActions(this.allVocaObjects)};i.prototype.loadAllAliases=function(){if(this.allVocaObjects.allAliases){return}this.rtContext.loadAllAliases(this.allVocaObjects)};i.prototype.loadAllValueLists=function(){if(this.allVocaObjects.allValueLists){return}this.rtContext.loadAllValueLists(this.allVocaObjects)};i.prototype.loadAllTerms=function(){if(this.allVocaObjects.allTerms){return}this.rtContext.loadAllTerms(this.allVocaObjects)};i.prototype.loadAllTermModifiers=function(){if(this.allVocaObjects.allTermsModifiers){return}this.rtContext.loadAllTermModifiers(this.allVocaObjects)};i.prototype.loadAllOutputs=function(){if(this.allVocaObjects.allOutputs){return}this.rtContext.loadAllOutputs(this.allVocaObjects)};i.prototype.loadAllActionsStaticParams=function(){if(this.allVocaObjects.allActionsStaticParams){return}this.rtContext.loadAllActionsStaticParams(this.allVocaObjects)};i.prototype.loadAllActionsRequiredParams=function(){if(this.allVocaObjects.allActionsRequiredParams){return}this.rtContext.loadAllActionsRequiredParams(this.allVocaObjects)};i.prototype.loadAllOutputsRequiredParams=function(){if(this.allVocaObjects.allOutputsRequiredParams){return}this.rtContext.loadAllOutputsRequiredParams(this.allVocaObjects)};i.prototype.loadAllOutputsStaticParams=function(){if(this.allVocaObjects.allOutputsStaticParams){return}this.rtContext.loadAllOutputsStaticParams(this.allVocaObjects)};i.prototype.loadAllAdvancedFunctions=function(){if(this.allVocaObjects.allAdvancedFunctions){return}this.rtContext.loadAllAdvancedFunctions(this.allVocaObjects)};i.prototype.loadVocaObjects=function(t,a){if(t.objects){return}this.loadAllObjects();t.objects={};var e=t.scope!==l.GLOBAL;var s;for(s=0;s<this.allVocaObjects.allObjects.length;s++){if(t.id===this.allVocaObjects.allObjects[s].vocaId||e&&(this.allVocaObjects.allObjects[s].scope===l.GLOBAL||this.allVocaObjects.allObjects[s].scope===t.scope)){t.objects[this.allVocaObjects.allObjects[s].name]=this.allVocaObjects.allObjects[s]}}this.loadAllGlobalObjects();if(!a){var i=null;for(i in this.globalObjects){if(this.globalObjects.hasOwnProperty(i)){t.objects[i]=this.globalObjects[i]}}}};i.prototype.loadVocaActions=function(t){if(t.actions){return}this.loadAllActions();t.actions={};var a=t.scope!==l.GLOBAL;var e;for(e=0;e<this.allVocaObjects.allActions.length;e++){if(t.id===this.allVocaObjects.allActions[e].vocaId||a&&(this.allVocaObjects.allActions[e].scope===l.GLOBAL||this.allVocaObjects.allActions[e].scope===t.scope&&this.allVocaObjects.allActions[e].isPrivate===false)){t.actions[this.allVocaObjects.allActions[e].name]=this.allVocaObjects.allActions[e]}}};i.prototype.loadVocaAliases=function(t){if(t.aliases){return}this.loadAllAliases();a.loadAllAliases(t,this.allVocaObjects.allAliases,this.rtContext)};i.prototype.loadVocaTerms=function(t){if(t.terms){return}this.loadAllTerms();this.loadAllTermModifiers();t.terms={};var a=t.scope!==l.GLOBAL;var e;var s,i;for(s=0;s<this.allVocaObjects.allTerms.length;s++){if(t.id===this.allVocaObjects.allTerms[s].vocaId||a&&(this.allVocaObjects.allTerms[s].scope===l.GLOBAL||this.allVocaObjects.allTerms[s].scope===t.scope&&this.allVocaObjects.allTerms[s].isPrivate===false)){t.terms[this.allVocaObjects.allTerms[s].description]=this.allVocaObjects.allTerms[s];e={};for(i=0;i<this.allVocaObjects.allTermsModifiers.length;i++){if(this.allVocaObjects.allTermsModifiers[i].termId===this.allVocaObjects.allTerms[s].termId){e[this.allVocaObjects.allTermsModifiers[i].modifier]=true}}t.terms[this.allVocaObjects.allTerms[s].description].modifiers=e}}};i.prototype.loadVocaValueLists=function(t){if(t.valueLists){return}this.loadAllValueLists();t.valueLists={};var a=t.scope!==l.GLOBAL;var e;for(e=0;e<this.allVocaObjects.allValueLists.length;e++){if(t.id===this.allVocaObjects.allValueLists[e].vocaId){t.valueLists[this.allVocaObjects.allValueLists[e].name]=this.allVocaObjects.allValueLists[e]}else if(a&&(this.allVocaObjects.allValueLists[e].scope===l.GLOBAL||this.allVocaObjects.allValueLists[e].scope===t.scope)){if(!t.valueLists[this.allVocaObjects.allValueLists[e].name]){t.valueLists[this.allVocaObjects.allValueLists[e].name]=this.allVocaObjects.allValueLists[e]}}}};i.prototype.loadVocaOutputs=function(t){if(t.outputs){return}this.loadAllOutputs();t.outputs={};var a=t.scope!==l.GLOBAL;var e;for(e=0;e<this.allVocaObjects.allOutputs.length;e++){if(t.id===this.allVocaObjects.allOutputs[e].vocaId||a&&(this.allVocaObjects.allOutputs[e].scope===l.GLOBAL||this.allVocaObjects.allOutputs[e].scope===t.scope&&this.allVocaObjects.allOutputs[e].isPrivate===false)){t.outputs[this.allVocaObjects.allOutputs[e].name]=this.allVocaObjects.allOutputs[e]}}};i.prototype.loadVocaAdvancedFunctions=function(t){if(t.advancedFunctions){return}this.loadAllAdvancedFunctions();t.advancedFunctions={};var a=t.scope!==l.GLOBAL;var e;for(e=0;e<this.allVocaObjects.allAdvancedFunctions.length;e++){if(t.id===this.allVocaObjects.allAdvancedFunctions[e].vocaId||a&&(this.allVocaObjects.allAdvancedFunctions[e].scope===l.GLOBAL||this.allVocaObjects.allAdvancedFunctions[e].scope===t.scope&&this.allVocaObjects.allAdvancedFunctions[e].isPrivate===false)){t.advancedFunctions[this.allVocaObjects.allAdvancedFunctions[e].name]=this.allVocaObjects.allAdvancedFunctions[e]}}};i.prototype.loadObject=function(t,l,a,e){var s;var i=this.loadVoca(t,true,false,false,false,false,false,false);if(!i){return null}s=i.objects[l];if(!s){return null}if(a){this.loadObjectAttributes(i,s)}if(e){this.loadObjectAssociations(s)}return s};i.prototype.loadObjectIgnoreCase=function(t,l,a,e){var s=null;var i=this.loadVoca(t,true,false,false,false,false,false,false);if(!i){return null}var o=null;for(o in i.objects){if(i.objects.hasOwnProperty(o)){if(o.toLowerCase()===l.toLowerCase()){s=i.objects[o];break}}}if(!s){return null}if(a){this.loadObjectAttributes(i,s)}if(e){this.loadObjectAssociations(s)}return s};i.prototype.loadAssocAttr=function(t){if(t.attrs){return}this.loadAllAssocAttr();t.attrs=[];var l;for(l=0;l<this.allVocaObjects.allAssocAttr.length;l++){if(t.id===this.allVocaObjects.allAssocAttr[l].assocId){t.attrs.push(this.allVocaObjects.allAssocAttr[l])}}};i.prototype.loadAllAssocAttr=function(){if(this.allVocaObjects.allAssocAttr){return}this.rtContext.loadAllAssocAttr(this.allVocaObjects)};i.prototype.loadObjectAssociations=function(t){if(t.associations){return}t.associations={};if(t.vocaId){this.loadAllAssociations();var l;for(l=0;l<this.allVocaObjects.allAssoc.length;l++){if(t.id===this.allVocaObjects.allAssoc[l].objId){t.associations[this.allVocaObjects.allAssoc[l].name]=this.allVocaObjects.allAssoc[l]}}}else{this.addStaticRuleAssocs(t)}};i.prototype.loadObjectAttributes=function(t,a){if(a.attributes){return}a.attributes={};var e;if(!a.vocaId){var s=null;var i;if(a.name===l.DO_VOCABULARY){this.addStaticVocabularyAttributes();for(s in this.globalStaticVocabularyAttributes){if(this.globalStaticVocabularyAttributes.hasOwnProperty(s)){i=this.globalStaticVocabularyAttributes[s];a.attributes[s]=i}}}else if(a.name===l.DO_RULE){this.loadRuleAttributes();for(s in this.globalRuleAttributes){if(this.globalRuleAttributes.hasOwnProperty(s)){i=this.globalRuleAttributes[s];a.attributes[s]=i}}}else if(a.name===l.DO_RULE_TEMPLATE){this.addStaticRuleTemplateAttributes();for(s in this.globalStaticRuleTemplateAttributes){if(this.globalStaticRuleTemplateAttributes.hasOwnProperty(s)){i=this.globalStaticRuleTemplateAttributes[s];a.attributes[s]=i}}}else{this.addDynamicRuleTemplateAttributes();for(e=0;e<this.globalDynamicRuleTemplateAttributes.length;e++){i=this.globalDynamicRuleTemplateAttributes[e];if(a.name===i.objectName){a.attributes[i.name]=i}}}}else{this.loadAllAttributes(t.name);for(e=0;e<this.allVocaObjects.allAttr.length;e++){if(a.id===this.allVocaObjects.allAttr[e].objId){a.attributes[this.allVocaObjects.allAttr[e].name]=this.allVocaObjects.allAttr[e]}}}};i.prototype.loadAllAssociations=function(){if(this.allVocaObjects.allAssoc){return}this.rtContext.loadAllAssociations(this.allVocaObjects)};i.prototype.loadAllAttributes=function(){if(this.allVocaObjects.allAttr){return}this.rtContext.loadAllAttributes(this.allVocaObjects)};return{vocabularyRuntimeServices:i}},true);
//# sourceMappingURL=rtsVoca.js.map