sap.ui.define(["sap/rules/ui/parser/infrastructure/util/utilsBase","sap/rules/ui/parser/resources/vocabulary/lib/utilsBase","sap/rules/ui/parser/resources/common/lib/constants","sap/rules/ui/parser/resources/vocabulary/lib/utils","sap/rules/ui/parser/resources/vocabulary/lib/constants","sap/rules/ui/parser/businessLanguage/lib/constants","sap/rules/ui/parser/infrastructure/messageHandling/lib/responseCollector","sap/rules/ui/parser/infrastructure/errorHandling/hrfException","sap/rules/ui/parser/resources/vocabulary/lib/termGeneration","sap/rules/ui/parser/resources/vocabulary/lib/vocaObjects","sap/rules/ui/parser/resources/vocabulary/lib/runtimeServicesUtils","sap/rules/ui/parser/resources/vocabulary/lib/vocabularyDataProviderFactory"],function(a,e,_,r,E,P,A,T,n,R,s,t){"use strict";var O=new a.utilsBaseLib;var i=new e.utilsBaseLib;var l=new r.utilsLib;var N=new n.termGenerationLib;var o=new s.runtimeServicesUtilsLib;var c=A.ResponseCollector;function M(){}M.prototype.loadAll=function(a,e,r,A,n,s,M){var u=null;var I=null;var S=JSON.parse(JSON.stringify(e));var v=n.name;var f=O.createUUID();var Y=null;var p;var U;var D;var C;if(A){C=sap.ui.require("sap/rules/ui/parser/ruleBody/lib/ruleBodyValidator")}U=new t.vocaDataProviderFactoryLib;var L=sap.ui.require("sap/rules/ui/parser/businessLanguage/lib/parsingBackendMediator");var b=new L.parsingBackendMediatorLib;if(M){D=sap.ui.require("sap/rules/ui/parser/resources/dependencies/lib/constants");u=sap.ui.require("sap/rules/ui/parser/resources/dependencies/lib/dependenciesUtils");I=sap.ui.require("sap/rules/ui/parser/resources/dependencies/lib/dependencyManager")}if(n.package&&n.package.length>0){v=l.getVocabularyFullName(n,S)}function d(a){if(a.hasOwnProperty(E.PROPERTY_NAME_CONVERSION_FLAGS)){return a[E.PROPERTY_NAME_CONVERSION_FLAGS]}return null}function y(a){var e=d(a);if(e===null){return"0"}if(e.hasOwnProperty(E.PROPERTY_NAME_IS_VALUE_LIST_CONVERTED)){return e[E.PROPERTY_NAME_IS_VALUE_LIST_CONVERTED]===true?"1":"0"}return"0"}function h(a,e,r,P,A,T,n,s){var t=A===true?"1":"0";var O=r[E.PROPERTY_NAME_IS_WRITABLE]?"1":"0";Y=y(r);var i=new R.VocaInfo(T,e,P[_.PROPERTY_NAME_SUFFIX],s,O,t,Y,P[_.PROPERTY_NAME_PACKAGE],P[_.PROPERTY_NAME_NAME],n);a.allVocabularies=a.allVocabularies||{};a.allVocabularies[e]=i}function g(a,e,_,r,A,n,R){var s;var t,O;var i;var l;var N;var o,S;var v;var f=[];if(!_){return}for(t=0;t<_.length;t++){if(_[t].hasOwnProperty(E.PROPERTY_NAME_STATIC_PARAMS)){N=_[t][E.PROPERTY_NAME_STATIC_PARAMS];for(O=0;O<N.length;O++){i=N[O][E.PROPERTY_NAME_MAPPING];l=N[O][E.PROPERTY_NAME_NAME];s=b.parseInput(i,P.VALIDATE_MODE,a,null,null,e,{dependenciesOutput:true});if(s===undefined||s===null){o=[r,i,s];S=c.getInstance().addMessage("error_vocabulary_invalid_expression",o);throw new T.HrfException(JSON.stringify(S),false)}if(s.status===P.statusEnum.ERROR){o=[r,i,s.errorDetails];S=c.getInstance().addMessage("error_vocabulary_problem_in_rule",o);throw new T.HrfException(JSON.stringify(S),false)}if(R===false&&s.isCollection===true){o=[_[t][E.PROPERTY_NAME_NAME],l];S=c.getInstance().addMessage("error_vocabulary_parameter_action_param_cant_be_collection",o);throw new T.HrfException(JSON.stringify(S),false)}if(M){v=s[D.PROPERTY_NAME_DEPENDENCIES_OUTPUT];if(v!==null&&v!==undefined){f=f.concat(u.createDependenciesInVocabulary(r+"."+_[t][E.PROPERTY_NAME_NAME],e,v,A,a))}}}}}if(M&&f.length>0){I.getInstance(a).setDependencies(n,f)}}function w(a,e,_){var r;var A=U.getVocabularyDataProvider(_);var n=A.getValueList(e,a[E.PROPERTY_NAME_VALUE_LIST]);if(n===null){var R=[a[E.PROPERTY_NAME_VALUE_LIST],a[E.PROPERTY_NAME_NAME]];r=c.getInstance().addMessage("error_vocabulary_value_list_does_not_exist",R);throw new T.HrfException(JSON.stringify(r),false)}a[E.PROPERTY_NAME_OM_ATTR_VALUE_LIST_ID]=n[E.ATT_ID];if(n.hasOwnProperty(E.PROPERTY_VALUE_LIST_DESCRIPTION_COLUMN)&&n[E.PROPERTY_VALUE_LIST_DESCRIPTION_COLUMN]!==null){a[E.PROPERTY_NAME_BUSINESS_DATA_TYPE]=P.SIMPLE_SELECTION_VALUE_TYPE.STRING.string}else{a[E.PROPERTY_NAME_BUSINESS_DATA_TYPE]=n[E.PROPERTY_NAME_BUSINESS_DATA_TYPE]}a[E.PROPERTY_NAME_DATA_TYPE]=n[E.PROPERTY_NAME_DATA_TYPE];a[E.PROPERTY_NAME_SIZE]=n[E.PROPERTY_NAME_SIZE]}function V(a,e,_){if(a[E.PROPERTY_NAME_VALUE_LIST]){w(a,e,_)}if(!a[E.PROPERTY_NAME_BUSINESS_DATA_TYPE]){var r=l.getBusinessDataType(a[E.PROPERTY_NAME_DATA_TYPE]);a[E.PROPERTY_NAME_BUSINESS_DATA_TYPE]=r}}function k(a){if(!a[E.PROPERTY_NAME_OM_ATTR_DATA_MAPPING]){a[E.PROPERTY_NAME_OM_ATTR_DATA_MAPPING]={column:a[E.PROPERTY_NAME_OM_ATTR_NAME]}}else if(!a[E.PROPERTY_NAME_OM_ATTR_DATA_MAPPING][E.PROPERTY_NAME_OM_ATTR_DATA_MAPPING_COLUMN]){a[E.PROPERTY_NAME_OM_ATTR_DATA_MAPPING][E.PROPERTY_NAME_OM_ATTR_DATA_MAPPING_COLUMN]=a[E.PROPERTY_NAME_OM_ATTR_NAME]}}function m(a,e,_,r,P,A,T,n,s){var t="";var i="";var l;var N=O.createUUID();var o="",c="",M="",u="",I=null,S="",v="",f=null;V(e,A,s);k(e);for(t in e){if(e.hasOwnProperty(t)){switch(t){case E.PROPERTY_NAME_OM_ATTR_NAME:o=e[t];break;case E.PROPERTY_NAME_OM_ATTR_DESCRIPTION:M=e[t];break;case E.PROPERTY_NAME_OM_ATTR_DATA_TYPE:u=e[t];break;case E.PROPERTY_NAME_OM_ATTR_SIZE:I=e[t];break;case E.PROPERTY_NAME_OM_ATTR_BUSINESS_DATA_TYPE:S=e[t];break;case E.PROPERTY_NAME_OM_ATTR_SOURCE_TYPE:v=e[t];break;case E.PROPERTY_NAME_VALUE_LIST:f=e[t];break;case E.PROPERTY_NAME_OM_ATTR_DATA_MAPPING:l=e[t];for(i in l){if(l.hasOwnProperty(i)){switch(i){case E.PROPERTY_NAME_OM_ATTR_DATA_MAPPING_COLUMN:c=l[i];break}}}break}}}var Y=new R.AttrInfo(_,o,r,c,M,u,S,I,v,P,A,T,n?"1":"0",f,N);a.allAttr=a.allAttr?a.allAttr.concat([Y]):[Y]}function B(a,e,_,r,E,P,A,T,n){var R;var s;for(R=0;R<e.length;++R){s=e[R];m(a,s,_,r,E,P,A,T,n)}}function G(a,e,_,r){var P="",A="",T="";var n=O.createUUID();for(P in e){if(e.hasOwnProperty(P)){switch(P){case E.PROPERTY_NAME_OM_ASSOC_ATTR_MAPPINGS_SOURCE:A=e[P];break;case E.PROPERTY_NAME_OM_ASSOC_ATTR_MAPPINGS_TARGET:T=e[P];break}}}var s=new R.AssocAttrInfo(r,A,T,_,n);a.allAssocAttr=a.allAssocAttr?a.allAssocAttr.concat([s]):[s]}function F(a,e,_,r){var E;var P;for(E=0;E<e.length;++E){P=e[E];G(a,P,_,r)}}function J(a,e,_,r){var P,A="",T="",n="",s="";var t=O.createUUID();var i="";for(i in e){if(e.hasOwnProperty(i)){switch(i){case E.PROPERTY_NAME_OM_ASSOC_NAME:A=e[i];break;case E.PROPERTY_NAME_OM_ASSOC_DESCRIPTION:T=e[i];break;case E.PROPERTY_NAME_OM_ASSOC_TARGET:n=e[i];break;case E.PROPERTY_NAME_OM_ASSOC_CARDINALITY:s=e[i];break;case E.PROPERTY_NAME_OM_ASSOC_ATTR_MAPPINGS:P=e[i];F(a,P,_,t);break}}}var l=new R.AssocInfo(_,t,A,n,s,r,T);a.allAssoc=a.allAssoc?a.allAssoc.concat([l]):[l]}function H(a,e,_,r){var E;var P;for(E=0;E<e.length;++E){P=e[E];J(a,P,_,r)}}function x(a,e,_,r,P,A,T){var n,s,t;var i="";var l=O.createUUID();var N="";var o="";var c="";var M="";var u="";var I="";var S=null;if(e.hasOwnProperty(E.PROPERTY_NAME_OM_NAME)){N=e[E.PROPERTY_NAME_OM_NAME]}if(e.hasOwnProperty(E.PROPERTY_NAME_OM_DESCRIPTION)){o=e[E.PROPERTY_NAME_OM_DESCRIPTION]}if(e.hasOwnProperty(E.PROPERTY_NAME_IS_VOCABULARY_RULE)){c=e[E.PROPERTY_NAME_IS_VOCABULARY_RULE]}if(e.hasOwnProperty(E.PROPERTY_NAME_OM_MAPPING_INFO)){n=e[E.PROPERTY_NAME_OM_MAPPING_INFO];for(i in n){if(n.hasOwnProperty(i)){switch(i){case E.PROPERTY_NAME_OM_MAPPING_INFO_SCHEMA:u=n[E.PROPERTY_NAME_OM_MAPPING_INFO_SCHEMA];break;case E.PROPERTY_NAME_OM_MAPPING_INFO_TYPE:I=n[E.PROPERTY_NAME_OM_MAPPING_INFO_TYPE];break;case E.PROPERTY_NAME_OM_MAPPING_INFO_NAME:M=n[E.PROPERTY_NAME_OM_MAPPING_INFO_NAME];break;case E.PROPERTY_NAME_OM_MAPPING_INFO_PARAMETERS:S=n[E.PROPERTY_NAME_OM_MAPPING_INFO_PARAMETERS];break}}}}if(e.hasOwnProperty(E.PROPERTY_NAME_OM_ATTRIBUTES)){B(a,e[E.PROPERTY_NAME_OM_ATTRIBUTES],l,N,M,r,P,A,T)}if(e.hasOwnProperty(E.PROPERTY_NAME_OM_ASSOCIATIONS)){H(a,e[E.PROPERTY_NAME_OM_ASSOCIATIONS],l,r)}s=new R.ObjectInfo(_,r,E.OM_SOURCE,l,N,M,u,P,A,o,I,c);a.allObjects=a.allObjects?a.allObjects.concat([s]):[s];if(S){t=new R.ParameterInfo(_,r,E.OM_SOURCE,l,N,M,u,S,a,P,A,o,I);a.allParameterInfos=a.allParameterInfos?a.allParameterInfos.concat([t]):[t]}}function q(a,e,_){var r=O.createUUID();var P="",A="",T="",n;for(P in e){if(e.hasOwnProperty(P)){switch(P){case E.PROPERTY_NAME_ACTION_STATIC_PARAM_NAME:A=e[P];break;case E.PROPERTY_NAME_ACTION_STATIC_PARAM_MAPPING:T=e[P];break}}}n=new R.ActionStaticParams(_,A,T,r);a.allActionsStaticParams=a.allActionsStaticParams?a.allActionsStaticParams.concat([n]):[n]}function Z(a,e,_){var r;var E;for(r=0;r<e.length;++r){E=e[r];q(a,E,_)}}function j(a,e,_,r,P){var A=O.createUUID();var T,n="",s="",t=null,i="";var l="";V(e,r,P);for(l in e){if(e.hasOwnProperty(l)){switch(l){case E.PROPERTY_NAME_ACTION_INPUT_PARAM_NAME:n=e[l];break;case E.PROPERTY_NAME_ACTION_INPUT_PARAM_DATA_TYPE:s=e[l];break;case E.PROPERTY_NAME_ACTION_INPUT_BUSINESS_DATA_TYPE:i=e[l];break;case E.PROPERTY_NAME_ACTION_INPUT_PARAM_SIZE:t=e[l];break}}}T=new R.ActionRequiredParams(_,n,s,t,i,A);a.allActionsRequiredParams=a.allActionsRequiredParams?a.allActionsRequiredParams.concat([T]):[T]}function X(a,e,_,r,E){var P;var A;for(P=0;P<e.length;++P){A=e[P];j(a,A,_,r,E)}}function K(a,e,_,r,P,A,T,n){var s="";var t=O.createUUID();var i="";var l="";var N="";var o="";var c,M="",u="",I="",S="";for(s in e){if(e.hasOwnProperty(s)){switch(s){case E.PROPERTY_NAME_ACTION_NAME:M=e[s];break;case E.PROPERTY_NAME_ACTION_DESCRIPTION:u=e[s];break;case E.PROPERTY_NAME_ACTION_STATIC_PARAMS:N=e[s];Z(a,N,t);break;case E.PROPERTY_NAME_ACTION_INPUT_PARAMS:o=e[s];X(a,o,t,r,P);break;case E.PROPERTY_NAME_ACTION_RUNTIME_EXE:i=e[s];for(l in i){if(i.hasOwnProperty(l)){switch(l){case E.PROPERTY_NAME_ACTION_LIB_NAME:S=i[l];break;case E.PROPERTY_NAME_ACTION_LIB_PATH:I=i[l];break}}}break}}}c=new R.ActionInfo(_,r,t,M,I,S,A,T,n,u);a.allActions=a.allActions?a.allActions.concat([c]):[c]}function W(a,e,_,r,E,P,A,T){var n;var R;for(R=0;R<e.length;++R){n=e[R];K(a,n,_,r,E,P,A,T)}}function z(a,e,_,r,E,P,A){var T;var n;for(n=0;n<e.length;++n){T=e[n];x(a,T,_,r,E,P,A)}}function Q(a,e,_){var r="";var P=O.createUUID();var A,T="",n="";for(r in e){if(e.hasOwnProperty(r)){switch(r){case E.PROPERTY_NAME_OUTPUT_STATIC_PARAM_NAME:T=e[r];break;case E.PROPERTY_NAME_OUTPUT_STATIC_PARAM_MAPPING:n=e[r];break}}}A=new R.OutputStaticParams(_,T,n,P);a.allOutputsStaticParams=a.allOutputsStaticParams?a.allOutputsStaticParams.concat([A]):[A]}function $(a,e,_){var r;var E;for(E=0;E<e.length;++E){r=e[E];Q(a,r,_)}}function aa(a,e,_,r,P){var A="";var T=e.id||O.createUUID();var n,s="",t="",l="",N=null,o=null,c=null;V(e,r,P);for(A in e){if(e.hasOwnProperty(A)){switch(A){case E.PROPERTY_NAME_OUTPUT_PARAM_NAME:s=e[A];break;case E.PROPERTY_NAME_DESCRIPTION:c=e[A];break;case E.PROPERTY_NAME_OUTPUT_PARAM_DATA_TYPE:l=e[A];break;case E.PROPERTY_NAME_OUTPUT_PARAM_BUSINESS_DATA_TYPE:t=e[A];break;case E.PROPERTY_NAME_OUTPUT_PARAM_SIZE:N=e[A];break;case E.PROPERTY_NAME_IS_COLLECTION:o=i.convertBooleanToTinyInt(e[A]);break}}}n=R.getOutputParamsObj(_,s,l,N,t,o,T,c);a.allOutputsRequiredParams=a.allOutputsRequiredParams?a.allOutputsRequiredParams.concat([n]):[n]}function ea(a,e,_,r,E){var P;var A;for(A=0;A<e.length;++A){P=e[A];aa(a,P,_,r,E)}}function _a(a,e,_,r,P,A,T,n,s){var t=null;var i="";var l="";var N="";var o="",c="",M;if(e.hasOwnProperty(E.ATT_ID)){t=e[E.ATT_ID]}else{t=O.createUUID()}for(i in e){if(e.hasOwnProperty(i)){switch(i){case E.PROPERTY_NAME_OUTPUT_NAME:o=e[i];break;case E.PROPERTY_NAME_OUTPUT_DESCRIPTION:c=e[i];break;case E.PROPERTY_NAME_OUTPUT_STATIC_PARAMS:N=e[i];$(a,N,t);break;case E.PROPERTY_NAME_OUTPUT_INPUT_PARAMS:l=e[i];ea(a,l,t,r,P);break}}}M=new R.OutputInfo(_,r,t,o,A,T,n,c);if(s){a.allVocaRulesOutputs=a.allVocaRulesOutputs?a.allVocaRulesOutputs.concat([M]):[M]}else{a.allOutputs=a.allOutputs?a.allOutputs.concat([M]):[M]}}function ra(a,e,_,r,E,P,A,T,n){var R;var s;for(s=0;s<e.length;++s){R=e[s];_a(a,R,_,r,E,P,A,T,n)}}function Ea(a,e,_,r,A,T,n,s,t){var i=O.createUUID();var l;var N;var o;var c=null;var M=null;var u=null;if(r[P.propertiesEnum.isCollection]===true){N="1"}else{N="0"}if(_[E.PROPERTY_NAME_TYPE]===E.ALIAS_CONTENT_DECISION_TABLE){o=JSON.stringify(_[E.CONTENT])}else{o=_[E.CONTENT]}if(_[E.PROPERTY_NAME_ALIAS_DESCRIPTION]){c=_[E.PROPERTY_NAME_ALIAS_DESCRIPTION]}if(_[E.PROPERTY_NAME_ALIAS_EXTERNAL_METADATA]){M=JSON.stringify(_[E.PROPERTY_NAME_ALIAS_EXTERNAL_METADATA])}if(_[E.PROPERTY_NAME_ALIAS_RENDERING_DATA]){u=JSON.stringify(_[E.PROPERTY_NAME_ALIAS_RENDERING_DATA])}l=new R.AliasInfo(A,n,i,e,o,r[P.propertiesEnum.businessType],N,T,s?"1":"0",_[E.PROPERTY_NAME_TYPE],c,M,u,t);a.allAliases=a.allAliases?a.allAliases.concat([l]):[l];if(!a.allVocabularies[n].aliases){a.allVocabularies[n].aliases={}}a.allVocabularies[n].aliases[e]=l}function Pa(a){var e;if(a===E.ALIAS_CONTENT_DECISION_TABLE){e=new C.RuleBodyValidator}else{e=b}return e}function Aa(a){var e={};var _;var r;var P;var A;var T;var n;var R;var s;for(T=0;T<a.length;++T){_=a[T];l.autoCompleteAliasType(_);r=_[E.PROPERTY_NAME_ALIAS_NAME];P=_[E.PROPERTY_NAME_ALIAS_CONTENT];A=_[E.PROPERTY_NAME_ALIAS_TYPE];n=_[E.PROPERTY_NAME_DESCRIPTION];R=_[E.PROPERTY_NAME_ALIAS_EXTERNAL_METADATA];s=_[E.PROPERTY_NAME_ALIAS_RENDERING_DATA];e[r]={};e[r][E.IS_CREATED]=false;e[r][E.TYPE]=A;e[r][E.CONTENT]=P;e[r][E.PROPERTY_NAME_DESCRIPTION]=n;e[r][E.PROPERTY_NAME_ALIAS_EXTERNAL_METADATA]=R;e[r][E.PROPERTY_NAME_ALIAS_RENDERING_DATA]=s}return e}function Ta(a,e,_,r,A,n,R,s,t,O,i,N){var o=[];var I=null;var S;var v;var f=[];var Y;var p;var C,L;var b;var d=false;var y=null;var h=null;s[e]={};Y=_[E.PROPERTY_NAME_TYPE];var g=Pa(Y);c.getInstance().hold();h=U.getVocabularyDataProvider(R);var w=l.validateAliasContent(g,_[E.CONTENT],n,Y,h);p=c.getInstance().getStandByMessagesList();c.getInstance().unHold();if(l.isAliasContentValid(w,Y)===false){o=w[P.propertiesEnum.unknownTokens];if(o.length===0){C=l.collectErrorMessages(Y,w,p);L=l.addErrorMessages("error_vocabulary_invalid_alias_content",C,e);throw new T.HrfException(L,false)}for(I in o){if(o.hasOwnProperty(I)){if(s.hasOwnProperty(I)){y=[I];continue}if(r.hasOwnProperty(I)===false){continue}S=r[I];if(S[E.IS_CREATED]===true){continue}v=JSON.parse(JSON.stringify(s));d=true;f=f.concat(Ta(a,I,S,r,A,n,R,v,t,O,i,N))}}if(d===true&&y===null){c.getInstance().hold();w=l.reValidateAliasContent(g,_[E.CONTENT],n,Y,h);p=c.getInstance().getStandByMessagesList();c.getInstance().unHold();if(l.isAliasContentValid(w,Y)===false){C=l.collectErrorMessages(Y,w,p);L=l.addErrorMessages("error_vocabulary_invalid_alias_content",C,e,y);throw new T.HrfException(L,false)}if(M){b=w[D.PROPERTY_NAME_DEPENDENCIES_OUTPUT];if(b!==null&&b!==undefined){f=f.concat(u.createDependenciesInVocabulary(E.PROPERTY_NAME_ALIASES+"."+e,n,b,t,R))}}}else{C=l.collectErrorMessages(Y,w,p);L=l.addErrorMessages("error_vocabulary_invalid_alias_content",C,e,y);throw new T.HrfException(L,false)}}else{if(M){b=w[D.PROPERTY_NAME_DEPENDENCIES_OUTPUT];if(b!==null&&b!==undefined){f=f.concat(u.createDependenciesInVocabulary(E.PROPERTY_NAME_ALIASES+"."+e,n,b,t,R))}}}Ea(a,e,_,w,A,i,n,t,N);_[E.IS_CREATED]=true;return f}function na(a,e,_,r,P,A,T,n,R){o.loadAllAliases(a.allVocabularies[r],a.allAliases,U.getVocabularyDataProvider(P));var s=Aa(e);var t;var O="";var i={};var l=[];for(O in s){if(s.hasOwnProperty(O)){t=s[O];if(t[E.IS_CREATED]===false){l=l.concat(Ta(a,O,t,s,_,r,P,i,A,T,n,R))}i={}}}if(M&&l.length>0){I.getInstance(P).setDependencies(T,l)}}function Ra(a,e,_,r,P,A,T){var n=O.createUUID();var s;var t=null;var i=null;var N=null;var o=null;var c=null;if(_[E.PROPERTY_NAME_BUSINESS_DATA_TYPE]){o=_[E.PROPERTY_NAME_BUSINESS_DATA_TYPE]}else{o=l.getBusinessDataType(_[E.PROPERTY_NAME_DATA_TYPE])}if(_.hasOwnProperty(E.PROPERTY_VALUE_LIST_METADATA)&&_[E.PROPERTY_VALUE_LIST_METADATA]){c=_[E.PROPERTY_VALUE_LIST_METADATA];s=new R.ExternalValueListInfo(r,P,e,o,A,T?"1":"0",c)}else{i=_[E.PROPERTY_VALUE_LIST_MAPPING_INFO];if(i.hasOwnProperty(E.PROPERTY_VALUE_LIST_DESCRIPTION_COLUMN)&&i[E.PROPERTY_VALUE_LIST_DESCRIPTION_COLUMN]!==null){t=i[E.PROPERTY_VALUE_LIST_DESCRIPTION_COLUMN]}if(_.hasOwnProperty(E.PROPERTY_NAME_SIZE)&&_[E.PROPERTY_NAME_SIZE]!==null){N=_[E.PROPERTY_NAME_SIZE]}s=new R.InternalValueListInfo(r,P,n,e,i[E.PROPERTY_VALUE_LIST_SCHEMA],i[E.PROPERTY_VALUE_LIST_NAME],_[E.PROPERTY_NAME_DATA_TYPE],o,N,i[E.PROPERTY_VALUE_LIST_VALUE_COLUMN],t,A,T?"1":"0",i[E.PROPERTY_VALUE_LIST_TYPE])}a.allValueLists=a.allValueLists?a.allValueLists.concat([s]):[s]}function sa(a,e,_,r,E,P){var A;var T="";for(T in e){if(e.hasOwnProperty(T)){A=e[T];Ra(a,T,A,_,r,E,P)}}}function ta(a,e,_,r,P){var A;var n;var R;var s;var t;var O=[];var i,l;var N=U.getVocabularyDataProvider(r);var o=[];var I;var S;var v=E.PROPERTY_NAME_DATA_OBJECTS+"."+e+"."+E.PROPERTY_NAME_OM_ASSOCIATIONS;var f;var Y;var p;for(i=0;i<a.length;i++){A=a[i];s=A[E.PROPERTY_NAME_OM_ASSOC_TARGET];f=E.PROPERTY_NAME_DATA_OBJECTS+"."+s;S=N.getObject(_,s);if(!S){O=[e,a[i].name];p=c.getInstance().addMessage("error_vocabulary_invalid_association",O);throw new T.HrfException(JSON.stringify(p),false)}else if(M&&(!P||S.vocaName!==_)){if(S.vocaName!==_){I=u.createDependencyInVocabulary(D.PROPERTY_NAME_EMPTY_PATH,S.vocaName,D.PROPERTY_NAME_EMPTY_PATH,r);o.push(I)}I=u.createDependencyInVocabulary(v+"."+A[E.PROPERTY_NAME_NAME],S.vocaName,f,r);o.push(I);I=u.createDependencyInVocabulary(v+"."+A[E.PROPERTY_NAME_NAME],S.vocaName,f+"."+E.PROPERTY_NAME_OM_MAPPING_INFO,r);o.push(I)}n=A[E.PROPERTY_NAME_OM_ASSOC_ATTR_MAPPINGS];Y=f+"."+E.PROPERTY_NAME_ATTRIBUTES;for(l=0;l<n.length;l++){R=n[l];t=R[E.PROPERTY_NAME_OM_ASSOC_ATTR_MAPPINGS_TARGET];if(N.getAttribute(_,s,t)===null){O=[A[E.PROPERTY_NAME_OM_ASSOC_NAME],t];p=c.getInstance().addMessage("error_vocabulary_invalid_assoc_attr",O);throw new T.HrfException(JSON.stringify(p),false)}else if(M&&(!P||S.vocaName!==_)){I=u.createDependencyInVocabulary(v+"."+A[E.PROPERTY_NAME_NAME],S.vocaName,Y+"."+t,r);o.push(I)}}}return o}function Oa(a,e,_,r,P){var A;var T;var n;var R=[];var s=a[E.PROPERTY_NAME_DATA_OBJECTS];if(s.length>0){for(A=0;A<s.length;A++){n=s[A];if(s[A].hasOwnProperty([E.PROPERTY_NAME_OM_ASSOCIATIONS])){T=s[A][E.PROPERTY_NAME_OM_ASSOCIATIONS];R=R.concat(ta(T,n[E.PROPERTY_NAME_OM_NAME],e,_,r))}}if(M&&R.length>0){I.getInstance(_).setDependencies(P,R)}}}function ia(a,e,_,r){var P;var A=[];var n;var R=U.getVocabularyDataProvider(r);var s=[];var t;var O;var i=E.PROPERTY_NAME_DATA_OBJECTS+"."+e+"."+E.PROPERTY_NAME_OM_ATTRIBUTES+".";var l;var N;var o=E.PROPERTY_NAME_VALUE_LISTS+".";for(n=0;n<a.length;n++){P=a[n];if(!P[E.PROPERTY_NAME_VALUE_LIST]){continue}l=P[E.PROPERTY_NAME_VALUE_LIST];O=R.getValueList(_,l);N=P[E.PROPERTY_NAME_NAME];if(!O){A=[l,N,e];c.getInstance().addMessage("error_vocabulary_value_list_does_not_exist",A);throw new T.HrfException("error_vocabulary_value_list_does_not_exist",false)}if(M){t=u.createDependencyInVocabulary(i+N,O.vocaName,o+l,r);s.push(t)}}return s}function la(a,e,_,r,P){var A;var T;var n;var R=[];var s=a[E.PROPERTY_NAME_DATA_OBJECTS];if(s.length>0){for(A=0;A<s.length;A++){n=s[A];if(s[A].hasOwnProperty([E.PROPERTY_NAME_OM_ATTRIBUTES])){T=s[A][E.PROPERTY_NAME_OM_ATTRIBUTES];R=R.concat(ia(T,n[E.PROPERTY_NAME_OM_NAME],e,_,r))}}if(M&&R.length>0){I.getInstance(_).setDependencies(P,R)}}}function Na(a,e,_,r,P,A){var T="";var n=O.createUUID();var s="";var t;for(T in e){if(e.hasOwnProperty(T)){switch(T){case E.PROPERTY_NAME_ADVANCED_FUNCTION_NAME:s=e[T];break}}}t=new R.AdvancedFunctionInfo(n,s,_,r,P,A);a.allAdvancedFunctions=a.allAdvancedFunctions?a.allAdvancedFunctions.concat([t]):[t]}function oa(a,e,_,r,E,P){var A;var T;for(T=0;T<e.length;T++){A=e[T];Na(a,A,_,r,E,P)}}p=l.calculateScope(S,v,A);h(a,v,S,n,r,f,s,p);if(S.hasOwnProperty(E.PROPERTY_NAME_VALUE_LISTS)){sa(a,S[E.PROPERTY_NAME_VALUE_LISTS],f,v,p,r)}if(S.hasOwnProperty(E.PROPERTY_NAME_DATA_OBJECTS)){z(a,S[E.PROPERTY_NAME_DATA_OBJECTS],f,v,p,r,A);N.generate(a,S[E.PROPERTY_NAME_DATA_OBJECTS],v,f,A,r,n,p,M)}if(S.hasOwnProperty(E.PROPERTY_NAME_ALIASES)){na(a,S[E.PROPERTY_NAME_ALIASES],f,v,A,r,n,p,Y)}if(S.hasOwnProperty(E.PROPERTY_NAME_DATA_OBJECTS)){Oa(S,v,A,r,n);la(S,v,A,r,n)}if(S.hasOwnProperty(E.PROPERTY_NAME_ACTIONS)){g(A,v,S[E.PROPERTY_NAME_ACTIONS],E.PROPERTY_NAME_ACTIONS,r,n,false);W(a,S[E.PROPERTY_NAME_ACTIONS],f,v,A,p,r,Y)}if(S.hasOwnProperty(E.PROPERTY_NAME_OUTPUTS)){g(A,v,S[E.PROPERTY_NAME_OUTPUTS],E.PROPERTY_NAME_OUTPUTS,r,n,true);ra(a,S[E.PROPERTY_NAME_OUTPUTS],f,v,A,p,r,Y,false);if(S.hasOwnProperty(E.PROPERTY_NAME_VOCA_RULES_OUTPUTS)){ra(a,S[E.PROPERTY_NAME_VOCA_RULES_OUTPUTS],f,v,A,p,r,Y,true)}}if(S.hasOwnProperty(E.PROPERTY_NAME_ADVANCED_FUNCTION)){oa(a,S[E.PROPERTY_NAME_ADVANCED_FUNCTION],f,v,p,r)}};return{JSONLoaderLib:M}},true);
//# sourceMappingURL=JSONLoader.js.map