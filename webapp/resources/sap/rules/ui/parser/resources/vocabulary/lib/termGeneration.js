sap.ui.define(["sap/rules/ui/parser/infrastructure/util/utilsBase","sap/rules/ui/parser/resources/vocabulary/lib/constants","sap/rules/ui/parser/resources/vocabulary/lib/vocaObjects","sap/rules/ui/parser/resources/vocabulary/lib/vocabularyDataProviderFactory"],function(e,r,a,i){"use strict";var s=new e.utilsBaseLib;function n(){}n.prototype.generate=function(e,n,l,t,f,T,c,d,_){var u=false;var E=null;var R=null;var o=null;var v=null;o=new i.vocaDataProviderFactoryLib;if(_){v=sap.ui.require("sap/rules/ui/parser/resources/dependencies/lib/constants");E=sap.ui.require("sap/rules/ui/parser/resources/dependencies/lib/dependenciesUtils");R=sap.ui.require("sap/rules/ui/parser/resources/dependencies/lib/dependencyManager")}function p(e,r,a){var i;var s;var n=null;n=e;for(i=0;i<r.length;i++){s=r[i];n+="."+s.name}if(a){n+="."+a}return n}function N(e,r){var a;for(a=0;a<e.length;a++){if(e[a].id===r.id){return true}}return false}function O(e){if(e.indexOf("i")===0||e.indexOf("I")===0||e.indexOf("a")===0||e.indexOf("A")===0||e.indexOf("e")===0||e.indexOf("E")===0||e.indexOf("o")===0||e.indexOf("O")===0||e.indexOf("u")===0||e.indexOf("U")===0){return true}return false}function M(e,r){return e.indexOf(r,e.length-r.length)!==-1}function I(e){if(M(e,"s")){return"es"}return"s"}function S(e){if(e.slice(-1).toLowerCase()!==e.slice(-1)||M(e.toLowerCase(),"z")||M(e.toLowerCase(),"y")&&!O(e.slice(-2))||M(e.toLowerCase(),"ch")||M(e.toLowerCase(),"sh")||M(e.toLowerCase(),"x")||M(e.toLowerCase(),"f")||M(e.toLowerCase(),"fe")){return true}return false}function D(e){var r=e.split(" ");var a=r[r.length-1];var i=new RegExp("[A-Za-z]$");var s=e;if(i.test(a)){if(M(a,"y")&&!O(a.slice(-2))){a=a.slice(0,-1)+"ies"}else if(M(a,"Y")&&!O(a.slice(-2))){a=a.slice(0,-1)+"IES"}else if(M(a,"s")||M(a,"z")||M(a,"ch")||M(a,"Ch")||M(a,"sh")||M(a,"Sh")||M(a,"x")){a=a+"es"}else if(M(a,"S")||M(a,"Z")||M(a,"CH")||M(a,"cH")||M(a,"SH")||M(a,"sH")||M(a,"X")){a=a+"ES"}else if(M(a,"f")){a=a.slice(0,-1)+"ves"}else if(M(a,"F")){a=a.slice(0,-1)+"VES"}else if(M(a,"fe")){a=a.slice(0,-2)+"ves"}else if(M(a,"FE")){a=a.slice(0,-2)+"VES"}else if(M(a,"Fe")){a=a.slice(0,-2)+"Ves"}else{a=a.slice(-1).toLowerCase()===a.slice(-1)?a+"s":a+"S"}r[r.length-1]=a;s=r.join(" ")}return s}function A(e,a){var i;var s;var n;var l;l=e;n=l;for(i=0;i<a.length;i++){s=a[i];l+="."+s.name;if(s.cardinality===r.CARDINALITY_ONE_TO_MANY){n=l}}return n}function P(e,a){var i=false;if(a){i=true}else{if(e===r.CARDINALITY_ONE_TO_MANY){i=true}else{i=false}}return i}function y(r){var i,n,t;var f=s.createUUID();i=new a.TermInfo(r.vocabularyId,l,f,r.description,r.expression,r.businessDataType,r.isCollection?"1":"0",r.isConditionalContext?"1":"0",r.context,d,T?"1":"0",r.isDeprecated?"1":"0",r.isVocaRuleTerm);if(r.friendlyDesc){i.friendlyTerm=r.friendlyDesc}e.allTerms=e.allTerms?e.allTerms.concat([i]):[i];for(n in r.modifiers){if(r.modifiers.hasOwnProperty(n)&&r.modifiers[n]===true){t=new a.TermModifierInfo(f,n,s.createUUID());e.allTermsModifiers=e.allTermsModifiers?e.allTermsModifiers.concat([t]):[t]}}}function Y(e,r,a,i,s,n,l,t,f){var T;var c={};c.expression=r;c.modifiers=a;c.businessDataType=i;c.isCollection=s;c.isConditionalContext=n;c.context=l;c.vocabularyId=t;c.isDeprecated=false;c.description=e.description;if(u){c.friendlyDesc=e.friendlyDesc}if(f){c.isVocaRuleTerm=true}y(c);for(T=0;T<e.deprecated.length;T++){c.isDeprecated=true;c.description=e.deprecated[T];y(c)}}function m(e,a,i){var s={};s[r.TERM_MODIFIER_ALL]=e;s[r.TERM_MODIFIER_NOT]=a;s[r.TERM_MODIFIER_CURRENT]=i;return s}function C(e,r,a,i,s){if(s){e[0]=r+a+I(a)+i}else{e[0]=r+a+i}}function b(e,a,i,s){var n;var l=[];var t=null;var f="";var T="";var c=r.PROPERTY_NAME_OM_DESCRIPTION;var d="";var _={description:"",deprecated:[],friendlyDesc:""};var E=r.TERM_OF_THE_STRING;var R=r.TERM_OF_STRING+r.TERM_ALL_STRING;for(n=0;n<e.length;n++){if(n===e.length-1&&s){break}t=e[n];if(t.cardinality===r.CARDINALITY_ONE_TO_MANY&&!a){d=f;f=R+D(t.name)+d;if(u){T=R+D(t[c])+T}if(l.length>0){C(l,R,t.name,l[0],true)}else if(S(t.name)&&!i){C(l,R,t.name,d,true)}}else{if(!i){f=E+t.name+f;T=u?E+t[c]+T:"";if(l.length>0){C(l,E,t.name,l[0],false)}}else{f=E+D(t.name)+f;T=u?E+D(t[c])+T:""}}}_.description=f;_.deprecated=l;_.friendlyDesc=T;return _}function G(e){var r;var a=3;var i=e.description;var s=e.deprecated;var n=e.friendlyDesc;for(r=0;r<a;r++){if(i.indexOf(" ")>-1){i=i.substr(i.indexOf(" ")+1);n=u?n.substr(n.indexOf(" ")+1):""}if(s.length&&s[0].indexOf(" ")>-1){s[0]=s[0].substr(s[0].indexOf(" ")+1)}}e.description=i;e.deprecated=s;e.friendlyDesc=n}function g(e,a,i,s,n,l,t){var f="";var T=r.TERM_OF_STRING;var c=r.TERM_A_STRING;var d=r.TERM_AN_STRING;var _=r.TERM_IS_STRING;var E=null;var R=[];var o="";var v="";var p={};var N={};var M=m(false,false,false);var I={description:"",deprecated:[],friendlyDesc:""};var S=e[r.PROPERTY_NAME_OM_NAME];var D=r.PROPERTY_NAME_OM_DESCRIPTION;if(O(S)){f=T+d+S}else{f=T+r.TERM_A_STRING+S}if(u){if(O(e[D])){E=T+d+e[D]}else{E=T+c+e[D]}}p=b(a,false,false);if(s===null&&l){G(p);o=p.description+f;if(p.deprecated&&p.deprecated[0]){R[0]=p.deprecated[0]+f}I.description=o;I.deprecated=R;if(u){v=p.friendlyDesc+E;I.friendlyDesc=v}Y(I,i,M,null,l,false,n,t)}else if(s!==null&&s.businessDataType!==r.BUSINESS_DATA_TYPE_BOOLEAN){o=s.name+p.description+f;if(p.deprecated&&p.deprecated[0]){R[0]=s.name+p.deprecated[0]+f}I.description=o;I.deprecated=R;if(u){v=s[D]+p.friendlyDesc+E;I.friendlyDesc=v}Y(I,i,M,s.businessDataType,l,false,n,t);if(l){N=b(a,true,false);o=s.name+N.description+f;I.description=o;I.deprecated=[];if(u){v=s[D]+N.friendlyDesc+E;I.friendlyDesc=v}Y(I,i,M,s.businessDataType,false,true,n,t)}}else if(s!==null&&s.businessDataType===r.BUSINESS_DATA_TYPE_BOOLEAN){N=b(a,true,false);G(N);o=N.description+f+_+s.name;if(N.deprecated&&N.deprecated[0]){R[0]=N.deprecated[0]+f+_+s.name}I.description=o;I.deprecated=R;if(u){v=N.friendlyDesc+E+_+s[D];I.friendlyDesc=v}if(l){Y(I,i,M,s.businessDataType,false,true,n,t)}else{Y(I,i,M,s.businessDataType,false,false,n,t)}}}function L(e,a,i,s,n,l,t){var f="";var T="";var c=[];var d="";var _="";var E=null;var R=m(true,false,false);var o="";var v=e[r.PROPERTY_NAME_OM_NAME];var p=a.name;var N=r.PROPERTY_NAME_DESCRIPTION;f=r.TERM_OF_STRING+r.TERM_ALL_STRING+D(v);if(u){T=r.TERM_OF_STRING+r.TERM_ALL_STRING+D(e[N])}if(n===null){o=b(i,false,true,true);o.description=o.description.length?o.description:"";d=D(p)+o.description+f;if(u){_=D(a.description)+o.friendlyDesc+T}if(o.deprecated&&o.deprecated[0]){c[0]=D(p)+o.deprecated[0]+f}E={description:d,deprecated:c,friendlyDesc:_};Y(E,s,R,null,true,false,null,t)}else if(n!==null&&n.businessDataType!==r.BUSINESS_DATA_TYPE_BOOLEAN){o=b(i,false,true,false);d=n.name+o.description+f;if(u){_=n[N]+o.friendlyDesc+T}E={description:d,deprecated:c,friendlyDesc:_};Y(E,s,R,n.businessDataType,true,false,l,t)}}function h(e,a,i,s,n,l,t){var f=r.TERM_OF_STRING;var T=r.TERM_A_STRING;var c=r.TERM_AN_STRING;var d="";var _="";var E="";var R=null;var o={};var v=m(false,true,false);var p="";var N=e[r.PROPERTY_NAME_OM_NAME];var M=r.PROPERTY_NAME_DESCRIPTION;if(O(N)){d=f+c+N}else{d=f+T+N}if(u){if(O(e[M])){_=f+c+e[M]}else{_=f+T+e[M]}}if(s!==null&&s.businessDataType===r.BUSINESS_DATA_TYPE_BOOLEAN){o=b(a,true,false);G(o);E=o.description+d+r.TERM_IS_NOT_STRING+s.name;if(u){p=o.friendlyDesc+_+r.TERM_IS_NOT_STRING+s[M]}R={description:E,deprecated:[],friendlyDesc:p};if(l){Y(R,i,v,s.businessDataType,false,true,n,t)}else{Y(R,i,v,s.businessDataType,false,false,n,t)}}}function B(e,a,i,s,n,l,t,f){var T="";var c="";var d=[];var _="";var E="";var R=null;var o=m(false,false,true);var v="";var p=e[r.PROPERTY_NAME_OM_NAME];var N=a.name;var O=r.PROPERTY_NAME_DESCRIPTION;T=r.TERM_OF_STRING+r.TERM_CURRENT_STRING+p;if(u){c=r.TERM_OF_STRING+r.TERM_CURRENT_STRING+e[O]}if(n===null&&t){v=b(i,false,false,true);v.description=v.description.length?v.description:"";E=D(N)+v.description+T;if(v.deprecated&&v.deprecated[0]||S(N)){N=S(N)?N+I(N):N;d[0]=v.deprecated&&v.deprecated[0]&&v.deprecated[0].length?" "+v.deprecated[0]:v.description;d[0]=N+d[0]+T}if(u){_=D(e[O])+v.friendlyDesc+c}R={description:E,deprecated:d,friendlyDesc:_};Y(R,s,o,null,true,true,null,f)}else if(n!==null&&n.businessDataType!==r.BUSINESS_DATA_TYPE_BOOLEAN){v=b(i,false,false,false);E=n.name+v.description+T;if(v.deprecated&&v.deprecated[0]){d[0]=n.name+v.deprecated[0]+T}if(u){_=n[O]+v.friendlyDesc+c}R={description:E,deprecated:d,friendlyDesc:_};Y(R,s,o,n.businessDataType,t,true,l,f)}else if(n!==null&&n.businessDataType===r.BUSINESS_DATA_TYPE_BOOLEAN&&!t){v=b(i,false,false,false);G(v);E=v.description+T+r.TERM_IS_STRING+n.name;if(v.deprecated&&v.deprecated[0]){d[0]=v.deprecated[0]+T+r.TERM_IS_STRING+n.name}if(u){_=v.friendlyDesc+c+r.TERM_IS_STRING+n[O]}R={description:E,deprecated:d,friendlyDesc:_};Y(R,s,o,n.businessDataType,t,true,l,f);o=m(false,true,true);E=v.description+T+r.TERM_IS_NOT_STRING+n.name;if(v.deprecated&&v.deprecated[0]){d[0]=v.deprecated[0]+T+r.TERM_IS_NOT_STRING+n.name}if(u){_=v.friendlyDesc+c+r.TERM_IS_NOT_STRING+n[O]}R={description:E,deprecated:d,friendlyDesc:_};Y(R,s,o,n.businessDataType,t,true,l,f)}}function U(e,a,i,s,n,l){var t="";var f="";var T=e[r.PROPERTY_NAME_OM_NAME];if(s!==null){t=A(T,a)}f=p(T,a,s.name);g(e,a,f,s,t,n,l);var c=e.type;if(!c){L(e,i,a,f,s,t,l)}else if(c.toLowerCase()===r.PROPERTY_DATA_OBJECT_TYPE_TABLE){L(e,i,a,f,s,t,l)}h(e,a,f,s,t,n,l);B(e,i,a,f,s,t,n,l)}function x(e,a,i,s,n,l,t,f){var T,c;var d;var u;var E;var R;var O;var M=o.getVocabularyDataProvider(t);if(!N(a,i)){a.push(i);O=P(i.cardinality,n);R=p(e[r.PROPERTY_NAME_OM_NAME],a);g(e,a,R,null,null,O,l);var I=e.type;if(!I){L(e,i,a,R,null,null,l)}else if(I.toLowerCase()===r.PROPERTY_DATA_OBJECT_TYPE_TABLE){L(e,i,a,R,null,null,l)}B(e,i,a,R,null,null,O,l);d=M.getAttributes(s,i.target);for(T=0,c=d.length;T<c;T++){u=d[T];U(e,a,i,u,O,l)}E=M.getAssociations(s,i.target);for(T=0,c=E.length;T<c;T++){x(e,a,E[T],s,O,l,t,f)}if(_&&i.vocaName!==s){f[r.PROPERTY_NAME_DATA_OBJECTS+"."+i.target+"."+r.PROPERTY_NAME_OM_ATTRIBUTES]={category:v.CATEGORY_VOCA_DO_ATTRIBUTES,DOName:i.target,vocaName:i.vocaName}}a.pop()}}function w(e,a,i,s){var n=null;var l=null;var t=null;var f=null;var T="";var c=[];var d="";var _=u?e[r.PROPERTY_NAME_OM_DESCRIPTION]:null;var E=e[r.PROPERTY_NAME_OM_NAME];var R={description:"",deprecated:[],friendlyDesc:""};if(a===null||!a.hasOwnProperty("name")){T=D(E);if(S(E)){c.push(E+I(E))}if(u){d=D(_)}R.description=T;R.deprecated=c;R.friendlyDesc=d;f=m(true,false,false);Y(R,i,f,null,true,false,null,s)}else{n=a.name;t=a.businessDataType;f=m(false,false,false);if(t===r.BUSINESS_DATA_TYPE_BOOLEAN){T=E+r.TERM_IS_STRING+n;R.description=T;if(u){l=a[r.PROPERTY_NAME_DESCRIPTION];d=_+r.TERM_IS_STRING+l}R.friendlyDesc=d;Y(R,i,f,t,false,false,E,s)}else{T=n+r.TERM_OF_THE_STRING+E;R.description=T;if(u){l=a[r.PROPERTY_NAME_DESCRIPTION];d=l+r.TERM_OF_THE_STRING+_}R.friendlyDesc=d;Y(R,i,f,t,false,false,E,s)}}}function F(e,a,i,s){var n=null;var l=u?a[r.PROPERTY_NAME_DESCRIPTION]:null;var t=a.businessDataType;var f=m(true,false,false);var T={description:"",deprecated:[],friendlyDesc:""};var c=u?e[r.PROPERTY_NAME_OM_DESCRIPTION]:null;var d=e[r.PROPERTY_NAME_OM_NAME];var _="";if(a!==null||a.hasOwnProperty("name")){n=a.name;T.description=n+r.TERM_OF_STRING+r.TERM_ALL_STRING+D(d);if(u){_=l+r.TERM_OF_STRING+r.TERM_ALL_STRING+D(c)}T.friendlyDesc=_;Y(T,i,f,t,true,false,d,s)}}function V(e,a,i,s){var n=null;var l=u?a[r.PROPERTY_NAME_DESCRIPTION]:null;var t=e[r.PROPERTY_NAME_OM_NAME];var f=u?e[r.PROPERTY_NAME_OM_DESCRIPTION]:null;var T=a.businessDataType;var c=m(false,true,false);var d={description:"",deprecated:[],friendlyDesc:""};var _="";if(a!==null||a.hasOwnProperty("name")){n=a.name;d.description=t+r.TERM_IS_NOT_STRING+n;if(u){_=f+r.TERM_IS_NOT_STRING+l}d.friendlyDesc=_;Y(d,i,c,T,false,false,t,s)}}function H(e,a,i,s){var n=null;var l=u?a[r.PROPERTY_NAME_DESCRIPTION]:null;var t=e[r.PROPERTY_NAME_OM_NAME];var f=u?e[r.PROPERTY_NAME_OM_DESCRIPTION]:null;var T=null;var c=null;var d={description:"",deprecated:[],friendlyDesc:""};var _="";if(a!==null||a.hasOwnProperty("name")){n=a.name;T=a.businessDataType;if(T===r.BUSINESS_DATA_TYPE_BOOLEAN){c=m(false,false,true);d.description=r.TERM_CURRENT_STRING+t+r.TERM_IS_STRING+n;if(u){_=r.TERM_CURRENT_STRING+f+r.TERM_IS_STRING+l}d.friendlyDesc=_;Y(d,i,c,T,false,true,t,s);c=m(false,true,true);d.description=r.TERM_CURRENT_STRING+t+r.TERM_IS_NOT_STRING+n;if(u){_=r.TERM_CURRENT_STRING+f+r.TERM_IS_NOT_STRING+l}d.friendlyDesc=_;Y(d,i,c,T,false,true,t,s)}else{c=m(false,false,true);d.description=n+r.TERM_OF_STRING+r.TERM_CURRENT_STRING+t;if(u){_=l+r.TERM_OF_STRING+r.TERM_CURRENT_STRING+f}d.friendlyDesc=_;Y(d,i,c,T,false,true,t,s)}}}function J(e,a,i,s){if(a.businessDataType!==r.BUSINESS_DATA_TYPE_GEOMETRY){w(e,a,i,s);H(e,a,i,s);if(a.businessDataType===r.BUSINESS_DATA_TYPE_BOOLEAN){V(e,a,i,s)}else{var n=e.type;if(!n){F(e,a,i,s)}else if(n.toLowerCase()===r.PROPERTY_DATA_OBJECT_TYPE_TABLE){F(e,a,i,s)}}}}function j(e,a,i,s){var n=null;var l=null;var t=[];var f="";var T=u?e[r.PROPERTY_NAME_OM_DESCRIPTION]:null;var c=e[r.PROPERTY_NAME_OM_NAME];var d={description:"",deprecated:[],friendlyDesc:""};if(u){f=T}d.description=c;d.deprecated=t;d.friendlyDesc=f;l=m(false,false,false);n=a.businessDataType;Y(d,i,l,n,false,false,null,s,true)}function k(e,a,i,s){var n,l;var t;var f;var T;var c=e[r.PROPERTY_NAME_OM_NAME];var d=o.getVocabularyDataProvider(s);t=d.getAttributes(a,c);for(n=0,l=t.length;n<l;n++){f=t[n];T=p(c,{},f.name);j(e,f,T,i)}}function q(e,a,i,s,n){var l,t;var f;var T;var c;var d;var _=e[r.PROPERTY_NAME_OM_NAME];var u=o.getVocabularyDataProvider(s);d=p(_,{},null);w(e,null,d,i);f=u.getAttributes(a,_);for(l=0,t=f.length;l<t;l++){c=f[l];d=p(_,{},c.name);J(e,c,d,i)}T=u.getAssociations(a,_);for(l=0,t=T.length;l<t;l++){x(e,[],T[l],a,false,i,s,n)}}function z(e,a,i,s,n,l){var t,f;var T;var c={};var d=null;var p=o.getVocabularyDataProvider();d=p.getTermModes();for(t=0;t<d.length;t++){if(d[t]===r.TermModeRelated.TERM_MODE_BY_DESCRIPTION){u=true;break}}for(t=0,f=e.length;t<f;++t){if(e[t].type!==r.PROPERTY_DATA_OBJECT_TYPE_ELEMENT){if(e[t].isVocaRule===true){k(e[t],a,i,s)}else{q(e[t],a,i,s,c)}}}if(_){T=E.createDependenciesInVocabulary(v.CATEGORY_VOCA_TERMS,a,c,n,s);if(Object.keys(c).length!==0){R.getInstance(s).setDependencies(l,T)}}}z(n,l,t,f,T,c)};return{termGenerationLib:n}},true);
//# sourceMappingURL=termGeneration.js.map