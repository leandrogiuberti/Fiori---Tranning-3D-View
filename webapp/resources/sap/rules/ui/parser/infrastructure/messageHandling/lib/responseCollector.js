sap.ui.define(["sap/rules/ui/parser/infrastructure/messageHandling/lib/message","sap/rules/ui/parser/infrastructure/messageHandling/lib/opMessages","sap/rules/ui/parser/infrastructure/locale/lib/constants","sap/rules/ui/parser/infrastructure/errorHandling/hrfException","sap/rules/ui/parser/infrastructure/locale/lib/resourceBundle","sap/base/Log"],function(e,r,s,n,t,a){"use strict";var u=e.messages;var i=r.opMessages;var o=s.propertiesEnum;var c=function(){var e={error:1,warn:2,info:3,debug:4};var r=null;function s(){var r=-1;var s={code:{},message:{},output:{},details:[]};var c=[];var f=function(){};var l={};var g=false;var p=t.getInstance();function d(){c=[];g=false}function v(e,r){if(!r||r===true){d()}l=new f;l.subject=e;s.details.push(l)}function b(){if(!l||!l.subject){a.error("ResponseCollector addMessage: no subject was defined");v("GENERAL",false)}if(!l.messages){l.messages=[]}}function m(e,r){var s="";s=p.getString(e.code,r,o.MESSAGES);return s}function S(s,n,t){if(t){s.additionalInfo=t}if(n){s.path=n}if(g===false){if(r===-1||e[s.severity]<e[r]){r=s.severity}}var a=JSON.parse(JSON.stringify(s));if(g===true){c.push(a)}else{l.messages.push(a)}return a}return{build:function(){return s},setOutput:function(e){s.output=e},addMessage:function(e,r,s,n,t){b();var a=JSON.parse(JSON.stringify(u[e]));if(t!==null&&t!==undefined){a.description=t}else{a.description=m(a,r)}return S(a,s,n)},getLastMessage:function(){if(!l.messages||l.messages.length===0){return null}return l.messages[l.messages.length-1].description},getMessage:function(e,r){var s="";var n=JSON.parse(JSON.stringify(u[e]));s=m(n,r);return s},getTopSeverity:function(){if(r===-1){return null}return r},hold:function(){c=[];g=true},unHold:function(){d()},getStandByMessagesList:function(){return c},addSubject:function(e,r){v(e,r)},setOpMessage:function(e,r){if(!e||!r){throw new n.HrfException("setOpMessage: missing patrameters")}s.code=i[e][r].code;s.message=p.getString(s.code,null,o.OP_MESSAGES)},clear:function(){r=-1;s={code:{},message:{},output:{},details:[]};c=[];f=function(){};l={};g=false},trace:function(r,s,t){if(t){n.trace(t);return}var u="HRF Trace Message: "+s;switch(r){case e.error:a.error(u+"\n\nCall stack:\n----------\n"+(new Error).stack+"\n\n-------------------------------------");break;case e.info:a.info(u);break;case e.debug:a.debug(u);break;case e.warn:a.error(u);break}}}}return{severity:function(){return e},getInstance:function(){if(!r){r=new s;r.constructor=null}return r}}}();return{ResponseCollector:c}},true);
//# sourceMappingURL=responseCollector.js.map