// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE
(function(e){e(CodeMirror)})(function(e){"use strict";e.defineOption("styleSelectedText",false,function(r,i,o){var l=o&&o!=e.Init;if(i&&!l){r.state.markedSelection=[];r.state.markedSelectionStyle=typeof i=="string"?i:"CodeMirror-selectedtext";f(r);r.on("cursorActivity",t);r.on("change",n)}else if(!i&&l){r.off("cursorActivity",t);r.off("change",n);a(r);r.state.markedSelection=r.state.markedSelectionStyle=null}});function t(e){e.operation(function(){c(e)})}function n(e){if(e.state.markedSelection.length)e.operation(function(){a(e)})}var r=8;var i=e.Pos;var o=e.cmpPos;function l(e,t,n,l){if(o(t,n)==0)return;var a=e.state.markedSelection;var f=e.state.markedSelectionStyle;for(var c=t.line;;){var s=c==t.line?t:i(c,0);var u=c+r,d=u>=n.line;var m=d?n:i(u,0);var v=e.markText(s,m,{className:f});if(l==null)a.push(v);else a.splice(l++,0,v);if(d)break;c=u}}function a(e){var t=e.state.markedSelection;for(var n=0;n<t.length;++n)t[n].clear();t.length=0}function f(e){a(e);var t=e.listSelections();for(var n=0;n<t.length;n++)l(e,t[n].from(),t[n].to())}function c(e){if(!e.somethingSelected())return a(e);if(e.listSelections().length>1)return f(e);var t=e.getCursor("start"),n=e.getCursor("end");var i=e.state.markedSelection;if(!i.length)return l(e,t,n);var c=i[0].find(),s=i[i.length-1].find();if(!c||!s||n.line-t.line<r||o(t,s.to)>=0||o(n,c.from)<=0)return f(e);while(o(t,c.from)>0){i.shift().clear();c=i[0].find()}if(o(t,c.from)<0){if(c.to.line-t.line<r){i.shift().clear();l(e,t,c.to,0)}else{l(e,t,c.from,0)}}while(o(n,s.to)<0){i.pop().clear();s=i[i.length-1].find()}if(o(n,s.to)>0){if(n.line-s.from.line<r){i.pop().clear();l(e,s.from,n)}else{l(e,s.to,n)}}}});
//# sourceMappingURL=mark-selection.js.map