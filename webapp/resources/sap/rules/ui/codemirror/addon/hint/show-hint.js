(function(){"use strict";var t="sapMLIB sapMLIBHoverable CodeMirror-hint";var e="sapMLIB sapMLIBHoverable sapMLIBSelected CodeMirror-hint-active";var i="Select value from list...";var o="any of the following conditions is true:";var n="all of the following conditions are true:";var r="<add line>";var s="\n•  \n;";var l="•  ";var c="\n"+l;var a="<'string'>";var f="<number>";var h="<'dd/mm/yyyy'>";var u="<'hh:mi:ss'>";var d="<'dd/mm/yyyy hh:mi:ss'>";var m="constant";var p="Date";var v="Time";var g="Timestamp";var C="Number";var y="valueList";var M="CustomDate";var w="CodeMirror-hint-valueHelp";var H="<'M/d/yy'>";var k="Select Date using Calendar";CodeMirror.handleEnter=function(t,e,i){var o=CodeMirror.initComplition(t,e,i);if(o){var n=o.getHints(t,o.options);if(!n){return}var s=jQuery.map(n.list,function(t,e){if(t.text===r){return e}});if(s.length>0){o.pick(n,s[0],"enter")}o.close()}};CodeMirror.handleColon=function(t,e,i){var o=CodeMirror.initComplition(t,e,i);if(o){var n=o.getHints(t,o.options);if(n){var l=n.list.indexOf(r);if(l>0){n.list[l]=s;o.pick(n,l)}}}};CodeMirror.closeAutoComplete=function(t,e,i){var o=t.state.completionActive;o&&o.close()};CodeMirror.showHint=function(t,e,i){var o=CodeMirror.initComplition(t,e,i);if(o){CodeMirror.signal(t,"startCompletion",t);if(o.options.async)e(t,function(t){o.showHints(t)},o.options);else return o.showHints(o.getHints(t,o.options))}};CodeMirror.initComplition=function(t,e,i){if(t.somethingSelected())return;if(e==null){if(i&&i.async)return;else e=CodeMirror.hint.auto}if(t.state.completionActive)t.state.completionActive.close();if(t.state.completionActive&&t.state.completionActive.widget!==null)return;var o=t.state.completionActive=new T(t,e,i||{});return o};function T(t,e,i){this.cm=t;this.getHints=e;this.options=this.buildOptions(i);this.widget=this.onClose=null}T.prototype={setNewCursorPosition:function(t,e){var i=e.getCursor();if(t===o+s||t===s||t===n+s){i.line--;i.ch+=e.getOption("indentUnit")+2;e.setCursor(i)}if(t===l||t===c){i.ch+=e.getOption("indentUnit")+2;e.setCursor(i)}if(t==="''"){i.ch-=1;e.setCursor(i)}},handleSimpleTypesPick:function(t,e){switch(t){case a:t="''";break;case f:t="0";break;case h:t="'dd/mm/yyyy'";break;case u:t="'hh:mi:ss'";break;case d:t="'dd/mm/yyyy hh:mi:ss'";break;default:if(t.charAt(0)==="<"&&t.charAt(t.length-1)===">"&&e.tokenType===m&&(e.info.type===p||e.info.type===v||e.info.type===g||e.info.type===C)){t=t.substring(1,t.length-1)}break}return t},close:function(){if(!this.active())return;this.cm.state.completionActive=null;if(this.widget)this.widget.close();if(this.onClose)this.onClose();CodeMirror.signal(this.cm,"endCompletion",this.cm)},active:function(){return this.cm.state.completionActive==this},pick:function(t,e,i){var a=null;var f=t.list[e];var h=f.text;var u=f.completion;var d=h;var m=t.list[e].tokenType===y;var p=t.list[e].tokenType===M;if(!m&&!p){d=this.handleSimpleTypesPick(h,f);if(d!==h){u=u.replace(h,d);h=h.replace(h,d)}if(d===o||d===n){d=d+s}if(h.trim()===r){if(i==="enter"){d=l}else{d=c}}if(f.hint){f.hint(this.cm,t,f)}else{var v=h.length-u.length;if(v>0){var g=this.cm.getCursor().ch-v;var C={line:this.cm.getCursor().line,ch:g};this.cm.replaceRange(d,C,this.cm.getCursor())}else{var w=d.replace(h,u);this.cm.replaceRange(w,this.cm.getCursor())}}this._setModal(false);CodeMirror.signal(t,"pick",d)}else if(m){this._setModal(true);CodeMirror.signal(this.cm,"onValueListSelect")}else if(p){this._setModal(true);CodeMirror.signal(this.cm,"onChangeDate")}this.setNewCursorPosition(d,this.cm);this.close()},_setModal:function(t){sap.ui.require(["sap/ui/core/Element"],e=>{var i=e.getElementById("popover");if(i){i.setModal(t)}})},showHints:function(t){if(!t||!t.list.length||!this.active())return this.close();if(this.options.completeSingle!=false&&t.list.length==1)this.pick(t,0);else this.showWidget(t)},showWidget:function(t){this.widget=new S(this,t);CodeMirror.signal(this.cm,"shown");var e=0,i=this,o;var n=this.options.closeCharacters||/[\s()\[\]{};:>,]/;var r=this.cm.getCursor(),s=this.cm.getLine(r.line).length;var l=window.requestAnimationFrame||function(t){return setTimeout(t,1e3/60)};var c=window.cancelAnimationFrame||clearTimeout;function a(){if(o)return;o=true;i.close();i.cm.off("cursorActivity",d);if(t)CodeMirror.signal(this.cm,"close")}function f(){if(o)return;CodeMirror.signal(t,"update");if(i.options.async)i.getHints(i.cm,h,i.options);else h(i.getHints(i.cm,i.options))}function h(e){t=e;if(o)return;if(!t||!t.list.length)return a();i.widget=new S(i,t)}function u(){if(e){c(e);e=0}}function d(){u();var t=i.cm.getCursor(),o=i.cm.getLine(t.line);if(t.line!=r.line||o.length-t.ch!=s-r.ch||t.ch<r.ch||i.cm.somethingSelected()||t.ch&&n.test(o.charAt(t.ch-1))){i.close()}else{e=l(f);if(i.widget)i.widget.close()}}this.cm.on("cursorActivity",d);this.onClose=a},buildOptions:function(t){var e=this.cm.options.hintOptions;var i={};for(var o in N)i[o]=N[o];if(e)for(var o in e)if(e[o]!==undefined)i[o]=e[o];if(t)for(var o in t)if(t[o]!==undefined)i[o]=t[o];return i}};function b(t){if(typeof t=="string")return t;else return t.text}function A(t,e){var i={Up:function(){e.moveFocus(-1)},Down:function(){e.moveFocus(1)},PageUp:function(){e.moveFocus(-e.menuSize()+1,true)},PageDown:function(){e.moveFocus(e.menuSize()-1,true)},Home:function(){e.setFocus(0)},End:function(){e.setFocus(e.length-1)},Enter:e.pick,Esc:e.close};var o=t.customKeys?{}:i;function n(t,n){var r;if(typeof n!="string")r=function(t){return n(t,e)};else if(i.hasOwnProperty(n))r=i[n];else r=n;o[t]=r}if(t.customKeys)for(var r in t.customKeys)if(t.customKeys.hasOwnProperty(r))n(r,t.customKeys[r]);if(t.extraKeys)for(var r in t.extraKeys)if(t.extraKeys.hasOwnProperty(r))n(r,t.extraKeys[r]);return o}function x(t,e){while(e&&e!=t){if(e.nodeName.toUpperCase()==="LI"&&e.parentNode==t)return e;e=e.parentNode}}function S(i,o){this.completion=i;this.data=o;var n=this,r=i.cm,s=i.options;var l=this.hints=document.createElement("ul");l.className="CodeMirror-hints";this.selectedHint=s.getDefaultSelection?s.getDefaultSelection(r,s,o):0;var c=o.list;var a=false;var f;var h="";var u;for(u=0;u<c.length;u++){if(c[u].tokenType===y){f=u;a=true;h=c[u].info.metadata.businessDataType}else if(c[u]&&c[u].info&&c[u].info.type&&c[u].info.type===p){h="Date"}}if(a||h==="Date"){var d=[];if(a){d.push(c[f])}if(h==="Date"){var m={};m.text=k;m.tokenType="CustomDate";d.push(m)}for(u=0;u<c.length;u++){if(c[u].tokenType===y){continue}d.push(c[u])}c=d}o.list=c;for(var v=0;v<c.length;++v){var g=l.appendChild(document.createElement("li")),C=c[v];var M=t+(v!==this.selectedHint?"":" "+e);if(C.className!=null){M=C.className+" "+M}if(c[v].tokenType===y||c[v].text===k){M=M+" "+w}g.className=M;if(C.render){C.render(g,o,C)}else{g.appendChild(document.createTextNode(C.displayText||b(C)))}g.hintId=v}var H=r.cursorCoords(s.alignWithWord!==false?o.from:null);var T=H.left,S=H.bottom,N=true;l.style.left=T+"px";l.style.top=S+"px";var E=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth);var O=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(s.container||document.body).appendChild(l);var D=l.getBoundingClientRect();var K=D.right-E,F=D.bottom-O;if(K>0){if(D.right-D.left>E){l.style.width=E-5+"px";K-=D.right-D.left-E}l.style.left=(T=H.left-K)+"px"}if(F>0){var I=D.bottom-D.top;if(D.top-(H.bottom-H.top)-I>0){F=I+(H.bottom-H.top);N=false}else if(I>O){l.style.height=O-5+"px";F-=I-O}l.style.top=(S=H.bottom-F)+"px"}r.addKeyMap(this.keyMap=A(s,{moveFocus:function(t,e){n.changeActive(n.selectedHint+t,e)},setFocus:function(t){n.changeActive(t)},menuSize:function(){return n.screenAmount()},length:c.length,close:function(){i.close()},pick:function(){n.pick()}}));if(s.closeOnUnfocus!==false){var L;r.on("blur",this.onBlur=function(){L=setTimeout(function(){i.close()},100)});r.on("focus",this.onFocus=function(){clearTimeout(L)})}var P=r.getScrollInfo();r.on("scroll",this.onScroll=function(){var t=r.getScrollInfo(),e=r.getWrapperElement().getBoundingClientRect();var o=S+P.top-t.top;var n=o-(window.pageYOffset||(document.documentElement||document.body).scrollTop);if(!N)n+=l.offsetHeight;if(n<=e.top||n>=e.bottom)return i.close();l.style.top=o+"px";l.style.left=T+P.left-t.left+"px"});CodeMirror.on(l,"click",function(t){var e=x(l,t.target||t.srcElement);if(e&&e.hintId!=null){n.changeActive(e.hintId);n.pick()}});CodeMirror.on(l,"mousedown",function(){r.options.shouldValidate=false;setTimeout(function(){r.focus()},20)});CodeMirror.signal(o,"select",c[0],l.firstChild);return true}S.prototype={close:function(){if(this.completion.widget!=this)return;this.completion.widget=null;this.hints.parentNode.removeChild(this.hints);this.completion.cm.removeKeyMap(this.keyMap);var t=this.completion.cm;if(this.completion.options.closeOnUnfocus!==false){t.off("blur",this.onBlur);t.off("focus",this.onFocus)}t.off("scroll",this.onScroll)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(t,i){if(t>=this.data.list.length)t=i?this.data.list.length-1:0;else if(t<0)t=i?0:this.data.list.length-1;if(this.selectedHint==t)return;var o=this.hints.childNodes[this.selectedHint];o.className=o.className.replace(" "+e,"");o=this.hints.childNodes[this.selectedHint=t];o.className+=" "+e;if(o.offsetTop<this.hints.scrollTop)this.hints.scrollTop=o.offsetTop-3;else if(o.offsetTop+o.offsetHeight>this.hints.scrollTop+this.hints.clientHeight)this.hints.scrollTop=o.offsetTop+o.offsetHeight-this.hints.clientHeight+3;CodeMirror.signal(this.data,"select",this.data.list[this.selectedHint],o)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}};CodeMirror.registerHelper("hint","auto",function(t,e){var i=t.getHelpers(t.getCursor(),"hint");if(i.length){for(var o=0;o<i.length;o++){var n=i[o](t,e);if(n&&n.list.length)return n}}else{var r=t.getHelper(t.getCursor(),"hintWords");if(r)return CodeMirror.hint.fromList(t,{words:r})}});CodeMirror.registerHelper("hint","fromList",function(t,e){var i=t.getCursor(),o=t.getTokenAt(i);var n=[];for(var r=0;r<e.words.length;r++){var s=e.words[r];if(s.slice(0,o.string.length)==o.string)n.push(s)}if(n.length)return{list:n,from:CodeMirror.Pos(i.line,o.start),to:CodeMirror.Pos(i.line,o.end)}});var N={hint:CodeMirror.hint.auto,completeSingle:false,alignWithWord:true,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:true,completeOnSingleClick:false,container:null,customKeys:null,extraKeys:null};CodeMirror.commands.autocomplete=CodeMirror.showHint;CodeMirror.commands.enterAutocomplete=CodeMirror.handleEnter;CodeMirror.commands.colonAutocomplete=CodeMirror.handleColon;CodeMirror.commands.closeAutoComplete=CodeMirror.closeAutoComplete})();
//# sourceMappingURL=show-hint.js.map