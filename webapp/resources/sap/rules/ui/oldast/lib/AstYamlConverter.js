/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2016 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/rules/ui/oldast/lib/Constants"],function(e){"use strict";var t={};t.parseConditionStatement=function(t){if(!this.hasOwnProperty("Id")){this.Id=0}var r=[];var s;var a=false;var i=t[e.STATEMENTS_ARRAY];if(i.hasOwnProperty(e.RESULTS)){i=i[e.RESULTS]}var n;for(n=0;n<i.length;n++){var u=i[n];var E=u.getType();if(E===e.MODEL){r.push(this.parseConditionStatement(u))}else if(E===e.COMPLEX_STATEMENT){r.push(this.parseConditionStatement(u.getModel()))}else if(E===e.SIMPLE_STATEMENT){r.push(this.parseSimpleStatement(u))}else if(E===e.STATEMENT_OPERATOR){a=e.TRUE;var T={DataObjectType:e.ELEMENT,BusinessDataType:e.BOOLEAN};s=this._getEmptyAstObject();s.Id=this.Id++;s.Token.Type=e.FUNCTION;s.Token.Value=e[u.getValue()];s.Output=T;s.Root=e.TRUE}}if(a){s.Children=[];for(n=0;n<r.length;n++){s.Children.push({Id:r[n].Id,sequenceNumber:n+1,Object:r[n]})}}else{s=r[0]}return s};t._getEmptyAstObject=function(){var e={Id:null,Root:false,Token:{Type:null,Value:null}};return e};t.parseSimpleStatement=function(t){var r,s,a;if(t.hasOwnProperty(e.LEFT_SELECTION_CLAUSE)){var i=t.getLeftSelectionClause();s=this._recursiveParseExpression(i)}if(t.hasOwnProperty(e.SELECTION_OPERATOR)){r=t.getSelectionOperator()}else{return s}if(t.hasOwnProperty(e.RIGHT_SELECTION_CLAUSE)){var n=t.getRightSelectionClause();a=this._recursiveParseExpression(n)}var u=this._getEmptyAstObject();u.Id=this.Id++;u.Token.Type=e.FUNCTION;u.Token.Value=e[r.getValue()];u.Root=true;u.Output={BusinessDataType:e.BOOLEAN,DataObjectType:e.ELEMENT};u[e.CHILDREN]=[];this._addChildren(u,s,1);this._addChildren(u,a,2);return u};t._addChildren=function(e,t,r){if(t instanceof Array){var s;for(s in t){e.Children.push({Id:t[s].Id,SequenceNumber:r++,Object:t[s]})}}else{e.Children.push({Id:t.Id,SequenceNumber:r,Object:t})}};t._recursiveParseExpression=function(t){var r;var s=[];var a=[];var i;var n;var u;var E;if(t.hasOwnProperty(e.SELECTIONS_ARRAY)){var T=t[e.SELECTIONS_ARRAY];for(i=0;i<T.length;i++){var p=T[i].getType();if(p===e.SIMPLE_SELECTION){n=T[i];if(n.hasOwnProperty(e.ORIGINALVALUE)){u=n.getOriginalValue()}else{u=n.getValue()}var o=n.getValueType();E=this._getEmptyAstObject();E.Id=this.Id++;E.Token.Type=e.LITERAL;E.Token.Value=u;E.Root=false;E.Output={BusinessDataType:e[o.toUpperCase()],DataObjectType:e.ELEMENT};s.push(E)}else if(p===e.COMPOUND_SELECTION){n=T[i].getSelection();var h=n.getNavigationPredicateDetails();var l=h.getNavigationFullPathId();var O=h.getAttributeType();E=this._getEmptyAstObject();E.Id=this.Id++;E.Token.Type=e.OBJECT;E.Token.Value=l;E.Output={BusinessDataType:e[O.toUpperCase()],DataObjectType:e.ELEMENT};s.push(E)}else if(p===e.ARITHMETICOPERATOR){n=T[i];u=n.getValue();if(u===e.LEFT_SMALL_BRACKET||u===e.RIGHT_SMALL_BRACKET){continue}var c;c=this._getEmptyAstObject();c.Id=this.Id++;c.Token.Type=e.FUNCTION;c.Token.Value=e[u];c.Output={BusinessDataType:e.NUMBER,DataObjectType:e.ELEMENT};a.push(c)}else if(p===e.SELECTION_CLAUSE){s.push(this._recursiveParseExpression(T[i]))}}}else if(t.hasOwnProperty(e.VALUES_ARRAY)){var d=t[e.VALUES_ARRAY];for(i=0;i<d.length;i++){s.push(this._recursiveParseExpression(d[i])[0])}}if(a.length>0){r=this._constructArithmeticObject(a,s)}else{r=s}return r};t._constructArithmeticObject=function(e,t){for(var r=0;r<e.length;r++){var s=e[r];s.Children=[];var a=t.shift();var i=t.shift();s.Root=true;s.Children.push({Id:a.Id,SequenceNumber:0,Object:a});s.Children.push({Id:i.Id,SequenceNumber:1,Object:i});t.unshift(s)}return t[0]};return t},true);
//# sourceMappingURL=AstYamlConverter.js.map