sap.ui.define(["sap/ui/thirdparty/jquery","../../library","sap/ui/core/Control","sap/m/List","sap/ui/model/json/JSONModel","sap/m/library","sap/ui/core/CustomData","sap/ui/model/Sorter","sap/rules/ui/ast/util/utilsBase","sap/m/DisplayListItem","sap/m/Panel","sap/m/Link","sap/m/Dialog","sap/ui/layout/VerticalLayout","sap/m/Button","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/SearchField","sap/ui/core/Lib","sap/ui/core/Element","./AutoSuggestionTimeAndDurationFunctionPanelRenderer"],function(jQuery,e,t,a,i,n,r,l,o,s,u,d,c,h,p,m,g,f,D,b,v){"use strict";var y=n.ListMode;var T=t.extend("sap.rules.ui.ast.autoCompleteContent.AutoSuggestionTimeAndDurationFunctionPanel",{metadata:{library:"sap.rules.ui",properties:{reference:{type:"object",defaultValue:null},dialogOpenedCallbackReference:{type:"object",defaultValue:null},data:{type:"object",defaultValue:null},expand:{type:"boolean",defaultValue:false}},aggregations:{PanelLayout:{type:"sap.m.Panel",multiple:false}},events:{}},init:function(){this.oBundle=D.getResourceBundleFor("sap.rules.ui.i18n");this.infraUtils=new o.utilsBaseLib;this.needCreateLayout=true;this.AttributeSegmentSelected=true;this.dataObjectName=""},onBeforeRendering:function(){this._reference=this.getReference();this._dialogOpenedCallbackReference=this.getDialogOpenedCallbackReference();if(this.needCreateLayout){var e=this._createLayout();this.setAggregation("PanelLayout",e,true);this.needCreateLayout=false}},initializeVariables:function(){},_createLayout:function(){var e=this;this.vocabularyData=this.getData();var t=new i;this.timeAndDurationFunctionlist=new a({growingScrollToLoad:true,enableBusyIndicator:true});var n=[];for(var r=0;r<5&&r<this.vocabularyData.length;r++){n.push(this.vocabularyData[r])}t.setData(n);this.timeAndDurationFunctionlist.bindItems({path:"/",sorter:new l("name"),rememberSelections:false,mode:y.SingleSelectMaster,template:new s({label:"{name}",value:"{label}",type:"Active",press:function(t){e._reference(t)}})});this.timeAndDurationFunctionlist.setModel(t);var o=this.getMoreTimeAndDurationLink();var e=this;var d=new u({headerText:this.oBundle.getText("timeAndDurationFunctionsPanelTitle"),expandable:true,expanded:this.getExpand(),content:this.timeAndDurationFunctionlist,width:"auto"});if(this.vocabularyData.length>=5){d.addContent(o)}return d},getMoreTimeAndDurationLink:function(){var e=this;var t=this.getData();var a=new d({text:this.oBundle.getText("more_link"),tooltip:this.oBundle.getText("more_link_tooltip"),enabled:true,press:function(t){e._setModal(true);e._dialogOpenedCallbackReference(true);if(e.vocabularyData){e.getTimeAndDurationDialog()}}});return a},_setModal:function(e){var t=b.getElementById("popover");if(t){t.setModal(e)}},getTimeAndDurationDialog:function(){var e=this;var t=this.oBundle.getText("searchTextTimeAndDuration");var a=this.getSearchField(t);this.detailedTimeAndDurationList=this.initializeTimeAndDurationList(this.vocabularyData);this.bindFilteredTermsToList(this.detailedTimeAndDurationList,"",false);var i=new h({content:[a,e.detailedTimeAndDurationList]}).addStyleClass("sapAstVocabularyPanel");this.timeAndDurationDialog=new c({title:this.oBundle.getText("selectTimeAndDurationTitle"),contentWidth:"500px",contentHeight:"500px",showHeader:true,content:[i],afterClose:function(){e._dialogOpenedCallbackReference(false)},buttons:[new p({text:this.oBundle.getText("cancelBtn"),tooltip:this.oBundle.getText("cancelBtn"),press:function(t){e._setModal(false);e.timeAndDurationDialog.close()}})]});e.timeAndDurationDialog.open()},bindFilteredTermsToList:function(e,t,n){var r=new i(this.vocabularyData);var l=this;var o="/";if(!e){e=new a({})}e.setModel(r);e.bindItems({path:o,template:new s({label:"{name}",value:"{label}",type:"Active",press:function(e){l._setModal(false);if(l.timeAndDurationDialog.isOpen()){l.timeAndDurationDialog.close()}l._reference(e)}}),rememberSelections:false,mode:y.SingleSelectMaster});if(n){var u=[];var d="name";u.push(new m(d,g.Contains,t));e.getBinding("items").filter(u);e.getModel().refresh(true)}},initializeTimeAndDurationList:function(e){var t=new i(e);var n="/";var r=new a({headerText:this.oBundle.getText("timeAndDuration")});r.setModel(t);r.bindItems({path:n,template:new s({label:"{name}",value:"{label}",type:"Active"})});return r},getSearchField:function(e){var t=this;this.searchField=new f({showSearchButton:false,width:"462px",placeholder:e,liveChange:function(e){t.bindFilteredTermsToList(t.detailedTimeAndDurationList,e.getParameter("newValue"),true)}});return this.searchField},renderer:v});return T},true);
//# sourceMappingURL=AutoSuggestionTimeAndDurationFunctionPanel.js.map