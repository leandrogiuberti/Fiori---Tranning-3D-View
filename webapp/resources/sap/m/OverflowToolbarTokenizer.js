/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/Tokenizer","sap/m/OverflowToolbarTokenizerRenderer","sap/m/Button","sap/m/Label","sap/ui/core/IconPool","./library","sap/ui/core/library"],function(e,t,o,r,i,n,s){"use strict";const a=n.OverflowToolbarTokenizerRenderMode;const l=n.PlacementType;const p=n.ButtonAccessibleRole;const d=s.aria.HasPopup;const g="sapMOverflowToolbarTokenizerTokensPopup";const h=e.extend("sap.m.OverflowToolbarTokenizer",{metadata:{library:"sap.m",properties:{labelText:{type:"string",group:"Misc",defaultValue:null},renderMode:{type:"string",group:"Misc",defaultValue:a.Narrow}},interfaces:["sap.m.IOverflowToolbarContent","sap.m.IToolbarInteractiveControl","sap.m.IOverflowToolbarFlexibleContent"],aggregations:{moreItemsButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},label:{type:"sap.m.Label",multiple:false,visibility:"hidden"}}},renderer:t});i.insertFontFaceStyle();h.prototype.onBeforeRendering=function(){const t=this.getLabelText();const o=this.getAggregation("label")?.getText();const r=this.getAggregation("moreItemsButton")?.getText();e.prototype.onBeforeRendering.call(this);if(t!==o){this._updateLabel()}if(t!==r){this._updateButton()}if(this.getRenderMode()!==a.Overflow){this._sOriginalWidth=this.getWidth();this._originalMaxWidth=this.getMaxWidth()}};h.prototype._updateButton=function(){const e=this.getLabelText();const t=this.getAggregation("moreItemsButton");if(!t){this.setAggregation("moreItemsButton",new o({text:e,accessibleRole:p.Link,ariaHasPopup:d.Dialog,width:"100%",icon:i.getIconURI("slim-arrow-left"),press:this._handleNMoreIndicatorPress.bind(this)}).addStyleClass("sapMTokenizerIndicator sapMBarChild"));return}t.setText(e)};h.prototype._updateLabel=function(){const e=this.getLabelText();if(!e){this.removeAllAggregation("label");return}if(!this.getAggregation("label")){this.setAggregation("label",new r({text:e,tooltip:e}));return}this.getAggregation("label").setText(e);this.getAggregation("label").setTooltip(e)};h.prototype._useCollapsedMode=function(){if(this.getRenderMode()===a.Overflow){this._getVisibleTokens().forEach(e=>e.addStyleClass("sapMHiddenToken"));return}e.prototype._useCollapsedMode.call(this,this.getRenderMode())};h.prototype.setOverflowMode=function(e){const t=this.getLabelText();const o=this.getAggregation("moreItemsButton");this.setRenderMode(e?a.Overflow:a.Narrow);if(e){o?.setText(t||this._oIndicator.html());this.setWidth(`auto`);this.setMaxWidth(`auto`);return this}this._adjustTokensVisibility();this.setWidth(this._sOriginalWidth);this.setMaxWidth(this._originalMaxWidth);return this};h.prototype._setPopoverMode=function(){const t=e.prototype.getTokensPopup.call(this);if(this.getRenderMode()!==a.Overflow){t.setPlacement(l.VerticalPreferredBottom);t.setShowArrow(true);return}t.setShowArrow(false);t.setPlacement(l.HorizontalPreferredRight);t.setOffsetX(-10);return};h.prototype.addPopupClasses=function(t){e.prototype.addPopupClasses.call(this,t);t.addStyleClass(g)};h.prototype._getLabelWidth=function(){return this.getAggregation("label")?.getDomRef()?.offsetWidth||0};h.prototype.onfocusin=function(t){if(this.getRenderMode()===a.Overflow){return}e.prototype.onfocusin.call(this,t)};h.prototype._handleNMoreIndicator=function(t){const o=this.getLabelText();if(this.getRenderMode()!==a.Overflow){e.prototype._handleNMoreIndicator.call(this,t)}if(this.getRenderMode()===a.Overflow&&o){this.getAggregation("moreItemsButton").setText(o)}};h.prototype._handleTokenizerAfterOpen=function(t){if(this.getRenderMode()===a.Overflow){return}e.prototype._handleTokenizerAfterOpen.call(this,t)};h.prototype.getOverflowToolbarConfig=function(){const e={canOverflow:true,propsUnrelatedToSize:["hiddenTokensCount"],onBeforeEnterOverflow:function(e){e.setOverflowMode(true)},onAfterExitOverflow:function(e){e.setOverflowMode(false)}};return e};h.prototype._getToolbarInteractive=function(){return true};return h});
//# sourceMappingURL=OverflowToolbarTokenizer.js.map