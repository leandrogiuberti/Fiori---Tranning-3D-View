"use strict";sap.ui.define(["sap/ui/core/Component","./controller/ControllerFactory","./ui/ControlFactory"],function(e,t,n){"use strict";function r(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}var i=r(t);var o=r(n);var a=e.extend("sap.feedback.ui.flpplugin.MyComponent",{metadata:{manifest:"json",properties:{url:{name:"url",type:"string"},tenantId:{name:"tenantId",type:"string"},tenantRole:{name:"tenantRole",type:"string"},isPushEnabled:{name:"isPushEnabled",type:"boolean"},pushChannelPath:{name:"pushChannelPath",type:"string"},productName:{name:"productName",type:"string"},platformType:{name:"platformType",type:"string"},scopeSet:{name:"scopeSet",type:"string"},configIdentifier:{name:"configIdentifier",type:"object"},configJson:{name:"configJson",type:"object"}}},constructor:function t(n,r){e.prototype.constructor.call(this,n,r)},init:function e(){var t=this;(function(){try{var e=t.readFlpSettings();var n=function(){if(e){return Promise.resolve(t.runInitProcess(e)).then(function(){})}}();return n&&n.then?n.then(function(){}):void 0}catch(e){Promise.reject(e)}})()},load:function e(){try{var t=this;var n=t.readProperties();var r=function(){if(n){return Promise.resolve(t.runInitProcess(n)).then(function(){})}}();return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},runInitProcess:function e(t){try{var n=this;var r={id:n.getManifestEntry("/sap.app/id"),version:n.getManifestEntry("/sap.app/applicationVersion/version")};var a=i.createInitController(r);var s=o.createSurveyInvitationDialog(n.getResourceBundle());var u=s.surveyInvitationDialogShowCallback.bind(s);return Promise.resolve(a.init(t,u)).then(function(e){if(e){n._pxApiWrapper=a.pxApiWrapper;if(n._pxApiWrapper){n._pxApiWrapper.invitationDialog=s;n.initializePluginController()}}})}catch(e){return Promise.reject(e)}},initializePluginController:function e(){try{var t=this;var n=i.createPluginController(t._pxApiWrapper,t.getResourceBundle());return Promise.resolve(n.initPlugin()).then(function(){})}catch(e){return Promise.reject(e)}},getResourceBundle:function e(){var t=this.getModel("i18n");return t.getResourceBundle()},readFlpSettings:function e(){var t=this.readComponentData();if(t){if(t.qualtricsInternalUri&&t.tenantId&&!t.configUrl||!t.qualtricsInternalUri&&t.tenantId&&t.configUrl&&t.unitId&&t.environment){return t}}return undefined},readComponentData:function e(){var t=this.getComponentData();if(t&&t.config){return t.config}return undefined},readProperties:function e(){if((this.getProperty("url")||this.getProperty("configIdentifier")||this.getProperty("configJson"))&&this.getProperty("tenantId")){var t={tenantId:this.getProperty("tenantId"),tenantRole:this.getProperty("tenantRole"),qualtricsInternalUri:this.getProperty("url"),isPushEnabled:this.getProperty("isPushEnabled"),pushChannelPath:this.getProperty("pushChannelPath"),platformType:this.getProperty("platformType"),productName:this.getProperty("productName"),scopeSet:this.getProperty("scopeSet"),configJson:this.getProperty("configJson")};if(this.getProperty("configIdentifier")){var n=this.getProperty("configIdentifier");t.configUrl=n.configUrl;t.unitId=n.unitId;t.environment=n.environment}return t}return undefined}});return a});
//# sourceMappingURL=Component.js.map