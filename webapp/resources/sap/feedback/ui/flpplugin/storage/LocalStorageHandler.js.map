{"version":3,"file":"LocalStorageHandler.js","names":["Constants","_interopRequireDefault","__Constants","LocalStorageHandler","_classCallCheck","this","_createClass","key","value","getUserState","userStateString","getLocalStorage","getItem","PUSH_STATE_STORAGE_KEY","JSON","parse","error","Log","ERROR","UNABLE_TO_PARSE_USER_STATE","message","COMPONENT","LOCAL_STORAGE_HANDLER","undefined","updateUserState","userState","stringify","setItem","debug","DEBUG","PUSH_STATE_MIGRATED","UNABLE_TO_UPDATE_USER_STATE","updateLastTheme","themeId","lastTheme","updateCurrentTheme","currentTheme","localStorage"],"sources":["./LocalStorageHandler.ts"],"sourcesContent":["import { ThemeId } from '@sap-px/pxapi';\nimport Log from 'sap/base/Log';\nimport Constants from '../common/Constants';\nimport { UserState } from '../common/Types';\n\nexport default class LocalStorageHandler {\n\tstatic getUserState(): UserState | undefined {\n\t\ttry {\n\t\t\tconst userStateString = this.getLocalStorage().getItem(Constants.PUSH_STATE_STORAGE_KEY);\n\t\t\tif (userStateString) {\n\t\t\t\treturn JSON.parse(userStateString);\n\t\t\t}\n\t\t} catch (error: any) {\n\t\t\tLog.error(Constants.ERROR.UNABLE_TO_PARSE_USER_STATE, error.message, Constants.COMPONENT.LOCAL_STORAGE_HANDLER);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tstatic updateUserState(userState: UserState): boolean {\n\t\ttry {\n\t\t\tif (userState) {\n\t\t\t\tconst userStateString = JSON.stringify(userState);\n\t\t\t\tthis.getLocalStorage().setItem(Constants.PUSH_STATE_STORAGE_KEY, userStateString);\n\t\t\t\tLog.debug(Constants.DEBUG.PUSH_STATE_MIGRATED);\n\t\t\t}\n\t\t} catch (error: any) {\n\t\t\tLog.error(Constants.ERROR.UNABLE_TO_UPDATE_USER_STATE, error.message, Constants.COMPONENT.LOCAL_STORAGE_HANDLER);\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tstatic updateLastTheme(themeId: ThemeId) {\n\t\tconst userState = this.getUserState();\n\t\tif (userState && themeId) {\n\t\t\tuserState.lastTheme = themeId;\n\t\t\tthis.updateUserState(userState);\n\t\t}\n\t}\n\n\tstatic updateCurrentTheme(themeId: ThemeId) {\n\t\tconst userState = this.getUserState();\n\t\tif (userState && themeId) {\n\t\t\tuserState.currentTheme = themeId;\n\t\t\tthis.updateUserState(userState);\n\t\t}\n\t}\n\n\tstatic getLocalStorage(): Storage {\n\t\treturn localStorage;\n\t}\n}\n"],"mappings":"mmCAEOA,EAASC,EAAAC,GAAA,IAGKC,EAAmB,oBAAAA,IAAAC,EAAAC,KAAAF,EAAA,QAAAG,EAAAH,EAAA,OAAAI,IAAA,eAAAC,MACvC,SAAOC,IACN,IACC,IAAMC,EAAkBL,KAAKM,kBAAkBC,QAAQZ,EAAUa,wBACjE,GAAIH,EAAiB,CACpB,OAAOI,KAAKC,MAAML,EACnB,CACD,CAAE,MAAOM,GACRC,EAAID,MAAMhB,EAAUkB,MAAMC,2BAA4BH,EAAMI,QAASpB,EAAUqB,UAAUC,sBAC1F,CACA,OAAOC,SACR,GAAC,CAAAhB,IAAA,kBAAAC,MAED,SAAOgB,EAAgBC,GACtB,IACC,GAAIA,EAAW,CACd,IAAMf,EAAkBI,KAAKY,UAAUD,GACvCpB,KAAKM,kBAAkBgB,QAAQ3B,EAAUa,uBAAwBH,GACjEO,EAAIW,MAAM5B,EAAU6B,MAAMC,oBAC3B,CACD,CAAE,MAAOd,GACRC,EAAID,MAAMhB,EAAUkB,MAAMa,4BAA6Bf,EAAMI,QAASpB,EAAUqB,UAAUC,uBAC1F,OAAO,KACR,CACA,OAAO,IACR,GAAC,CAAAf,IAAA,kBAAAC,MAED,SAAOwB,EAAgBC,GACtB,IAAMR,EAAYpB,KAAKI,eACvB,GAAIgB,GAAaQ,EAAS,CACzBR,EAAUS,UAAYD,EACtB5B,KAAKmB,gBAAgBC,EACtB,CACD,GAAC,CAAAlB,IAAA,qBAAAC,MAED,SAAO2B,EAAmBF,GACzB,IAAMR,EAAYpB,KAAKI,eACvB,GAAIgB,GAAaQ,EAAS,CACzBR,EAAUW,aAAeH,EACzB5B,KAAKmB,gBAAgBC,EACtB,CACD,GAAC,CAAAlB,IAAA,kBAAAC,MAED,SAAOG,IACN,OAAO0B,YACR,IAAC,CA7CsC,GA6CtC,OAAAlC,CAAA","ignoreList":[]}