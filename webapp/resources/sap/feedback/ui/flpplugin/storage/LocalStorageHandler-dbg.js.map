{"version":3,"file":"LocalStorageHandler-dbg.js","names":["Constants","_interopRequireDefault","__Constants","LocalStorageHandler","_classCallCheck","_createClass","key","value","getUserState","userStateString","getLocalStorage","getItem","PUSH_STATE_STORAGE_KEY","JSON","parse","error","Log","ERROR","UNABLE_TO_PARSE_USER_STATE","message","COMPONENT","LOCAL_STORAGE_HANDLER","undefined","updateUserState","userState","stringify","setItem","debug","DEBUG","PUSH_STATE_MIGRATED","UNABLE_TO_UPDATE_USER_STATE","updateLastTheme","themeId","lastTheme","updateCurrentTheme","currentTheme","localStorage"],"sourceRoot":".","sources":["LocalStorageHandler.ts"],"sourcesContent":["import { ThemeId } from '@sap-px/pxapi';\nimport Log from 'sap/base/Log';\nimport Constants from '../common/Constants';\nimport { UserState } from '../common/Types';\n\nexport default class LocalStorageHandler {\n\tstatic getUserState(): UserState | undefined {\n\t\ttry {\n\t\t\tconst userStateString = this.getLocalStorage().getItem(Constants.PUSH_STATE_STORAGE_KEY);\n\t\t\tif (userStateString) {\n\t\t\t\treturn JSON.parse(userStateString);\n\t\t\t}\n\t\t} catch (error: any) {\n\t\t\tLog.error(Constants.ERROR.UNABLE_TO_PARSE_USER_STATE, error.message, Constants.COMPONENT.LOCAL_STORAGE_HANDLER);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tstatic updateUserState(userState: UserState): boolean {\n\t\ttry {\n\t\t\tif (userState) {\n\t\t\t\tconst userStateString = JSON.stringify(userState);\n\t\t\t\tthis.getLocalStorage().setItem(Constants.PUSH_STATE_STORAGE_KEY, userStateString);\n\t\t\t\tLog.debug(Constants.DEBUG.PUSH_STATE_MIGRATED);\n\t\t\t}\n\t\t} catch (error: any) {\n\t\t\tLog.error(Constants.ERROR.UNABLE_TO_UPDATE_USER_STATE, error.message, Constants.COMPONENT.LOCAL_STORAGE_HANDLER);\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tstatic updateLastTheme(themeId: ThemeId) {\n\t\tconst userState = this.getUserState();\n\t\tif (userState && themeId) {\n\t\t\tuserState.lastTheme = themeId;\n\t\t\tthis.updateUserState(userState);\n\t\t}\n\t}\n\n\tstatic updateCurrentTheme(themeId: ThemeId) {\n\t\tconst userState = this.getUserState();\n\t\tif (userState && themeId) {\n\t\t\tuserState.currentTheme = themeId;\n\t\t\tthis.updateUserState(userState);\n\t\t}\n\t}\n\n\tstatic getLocalStorage(): Storage {\n\t\treturn localStorage;\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;MAEOA,SAAS,GAAAC,sBAAA,CAAAC,WAAA;EAAA,IAGKC,mBAAmB;IAAA,SAAAA,oBAAA;MAAAC,eAAA,OAAAD,mBAAA;IAAA;IAAA,OAAAE,YAAA,CAAAF,mBAAA;MAAAG,GAAA;MAAAC,KAAA,EACvC,SAAOC,YAAYA,CAAA,EAA0B;QAC5C,IAAI;UACH,IAAMC,eAAe,GAAG,IAAI,CAACC,eAAe,CAAC,CAAC,CAACC,OAAO,CAACX,SAAS,CAACY,sBAAsB,CAAC;UACxF,IAAIH,eAAe,EAAE;YACpB,OAAOI,IAAI,CAACC,KAAK,CAACL,eAAe,CAAC;UACnC;QACD,CAAC,CAAC,OAAOM,KAAU,EAAE;UACpBC,GAAG,CAACD,KAAK,CAACf,SAAS,CAACiB,KAAK,CAACC,0BAA0B,EAAEH,KAAK,CAACI,OAAO,EAAEnB,SAAS,CAACoB,SAAS,CAACC,qBAAqB,CAAC;QAChH;QACA,OAAOC,SAAS;MACjB;IAAC;MAAAhB,GAAA;MAAAC,KAAA,EAED,SAAOgB,eAAeA,CAACC,SAAoB,EAAW;QACrD,IAAI;UACH,IAAIA,SAAS,EAAE;YACd,IAAMf,eAAe,GAAGI,IAAI,CAACY,SAAS,CAACD,SAAS,CAAC;YACjD,IAAI,CAACd,eAAe,CAAC,CAAC,CAACgB,OAAO,CAAC1B,SAAS,CAACY,sBAAsB,EAAEH,eAAe,CAAC;YACjFO,GAAG,CAACW,KAAK,CAAC3B,SAAS,CAAC4B,KAAK,CAACC,mBAAmB,CAAC;UAC/C;QACD,CAAC,CAAC,OAAOd,KAAU,EAAE;UACpBC,GAAG,CAACD,KAAK,CAACf,SAAS,CAACiB,KAAK,CAACa,2BAA2B,EAAEf,KAAK,CAACI,OAAO,EAAEnB,SAAS,CAACoB,SAAS,CAACC,qBAAqB,CAAC;UAChH,OAAO,KAAK;QACb;QACA,OAAO,IAAI;MACZ;IAAC;MAAAf,GAAA;MAAAC,KAAA,EAED,SAAOwB,eAAeA,CAACC,OAAgB,EAAE;QACxC,IAAMR,SAAS,GAAG,IAAI,CAAChB,YAAY,CAAC,CAAC;QACrC,IAAIgB,SAAS,IAAIQ,OAAO,EAAE;UACzBR,SAAS,CAACS,SAAS,GAAGD,OAAO;UAC7B,IAAI,CAACT,eAAe,CAACC,SAAS,CAAC;QAChC;MACD;IAAC;MAAAlB,GAAA;MAAAC,KAAA,EAED,SAAO2B,kBAAkBA,CAACF,OAAgB,EAAE;QAC3C,IAAMR,SAAS,GAAG,IAAI,CAAChB,YAAY,CAAC,CAAC;QACrC,IAAIgB,SAAS,IAAIQ,OAAO,EAAE;UACzBR,SAAS,CAACW,YAAY,GAAGH,OAAO;UAChC,IAAI,CAACT,eAAe,CAACC,SAAS,CAAC;QAChC;MACD;IAAC;MAAAlB,GAAA;MAAAC,KAAA,EAED,SAAOG,eAAeA,CAAA,EAAY;QACjC,OAAO0B,YAAY;MACpB;IAAC;EAAA;EAAA,OAAAjC,mBAAA;AAAA","ignoreList":[]}