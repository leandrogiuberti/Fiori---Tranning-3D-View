{"version":3,"file":"Component-dbg.js","names":["ControllerFactory","_interopRequireDefault","__ControllerFactory","ControlFactory","__ControlFactory","MyComponent","Component","extend","metadata","manifest","properties","url","name","type","tenantId","tenantRole","isPushEnabled","pushChannelPath","productName","platformType","scopeSet","configIdentifier","configJson","constructor","_constructor","id","settings","Component.prototype.constructor.call","init","_init","_this","readFlpSettings","_temp","Promise","resolve","runInitProcess","then","e","reject","load","_load","_this2","readProperties","_temp2","_runInitProcess","parameters","_this3","pluginInfo","getManifestEntry","version","initController","createInitController","invitationDialog","createSurveyInvitationDialog","getResourceBundle","showCallback","surveyInvitationDialogShowCallback","bind","_initController$init","_pxApiWrapper","pxApiWrapper","initializePluginController","_initializePluginController","_this4","pluginController","createPluginController","initPlugin","_getResourceBundle","resourceModel","getModel","_readFlpSettings","componentData","readComponentData","qualtricsInternalUri","configUrl","unitId","environment","undefined","_readComponentData","getComponentData","config","_readProperties","getProperty"],"sourceRoot":".","sources":["Component.ts"],"sourcesContent":["import ResourceBundle from 'sap/base/i18n/ResourceBundle';\nimport Component from 'sap/ui/core/Component';\nimport ResourceModel from 'sap/ui/model/resource/ResourceModel';\nimport { PluginInfo, RawStartParameters } from './common/Types';\nimport ControllerFactory from './controller/ControllerFactory';\nimport PxApiWrapper from './pxapi/PxApiWrapper';\nimport ControlFactory from './ui/ControlFactory';\n\n/**\n *\n * @namespace sap.feedback.ui.flpplugin\n *\n * @class\n * Enables users to provide feedback in the Fiori Launchpad.\n *\n * @extends sap.ui.core.Component\n * @name sap.feedback.ui.flpplugin.Component\n * @author SAP SE\n * @since 1.90.0\n */\nexport default class MyComponent extends Component {\n\tstatic readonly metadata = {\n\t\tmanifest: 'json',\n\t\tproperties: {\n\t\t\t/**\n\t\t\t * @deprecated Deprecated with 1.114. Please use 'configIdentifier' property.\n\t\t\t * Specifies the url for the Web/App Feedback project which should be loaded. This property is mandatory when providing the configuration manually.\n\t\t\t */\n\t\t\turl: {\n\t\t\t\tname: 'url',\n\t\t\t\ttype: 'string'\n\t\t\t},\n\t\t\t/**\n\t\t\t * Specifies the unique tenant id to map feedback results to this tenant. This property is mandatory when providing the configuration manually.\n\t\t\t */\n\t\t\ttenantId: {\n\t\t\t\tname: 'tenantId',\n\t\t\t\ttype: 'string'\n\t\t\t},\n\t\t\t/**\n\t\t\t * @deprecated Deprecated with 1.114. Please use 'configIdentifier' property.\n\t\t\t * The tenant role provides an indicator of the tenant and its purpose (development, test, productive, etc.). Helpful to identify feedback from different source systems.\n\t\t\t */\n\t\t\ttenantRole: {\n\t\t\t\tname: 'tenantRole',\n\t\t\t\ttype: 'string'\n\t\t\t},\n\t\t\t/**\n\t\t\t * @deprecated Deprecated with 1.114. Please use 'configIdentifier' property.\n\t\t\t * Enables some new features and changes the data format for the context data collected with the survey to version 2.\n\t\t\t */\n\t\t\tisPushEnabled: {\n\t\t\t\tname: 'isPushEnabled',\n\t\t\t\ttype: 'boolean'\n\t\t\t},\n\t\t\t/**\n\t\t\t * @deprecated Deprecated with 1.114. Please use 'configIdentifier' property.\n\t\t\t * Internal usage only\n\t\t\t */\n\t\t\tpushChannelPath: {\n\t\t\t\tname: 'pushChannelPath',\n\t\t\t\ttype: 'string'\n\t\t\t},\n\t\t\t/**\n\t\t\t * Can be provided with the collected context data to the survey to allow filtering of survey results by product name.\n\t\t\t */\n\t\t\tproductName: {\n\t\t\t\tname: 'productName',\n\t\t\t\ttype: 'string'\n\t\t\t},\n\t\t\t/**\n\t\t\t * Can be provided with the collected context data to the survey to allow filtering of survey results by platform type.\n\t\t\t */\n\t\t\tplatformType: {\n\t\t\t\tname: 'platformType',\n\t\t\t\ttype: 'string'\n\t\t\t},\n\t\t\t/**\n\t\t\t * @deprecated Deprecated with 1.114. Please use 'configIdentifier' property.\n\t\t\t * Optional comma-separated string list of scope items to enable single features.\n\t\t\t */\n\t\t\tscopeSet: {\n\t\t\t\tname: 'scopeSet',\n\t\t\t\ttype: 'string'\n\t\t\t},\n\t\t\t/**\n\t\t\t * Identification data to select and load respective Central configuration.\n\t\t\t */\n\t\t\tconfigIdentifier: {\n\t\t\t\tname: 'configIdentifier',\n\t\t\t\ttype: 'object'\n\t\t\t},\n\t\t\t/**\n\t\t\t * Configuration providing all necessary information to start and run.\n\t\t\t */\n\t\t\tconfigJson: {\n\t\t\t\tname: 'configJson',\n\t\t\t\ttype: 'object'\n\t\t\t}\n\t\t}\n\t};\n\n\tprivate _pxApiWrapper: PxApiWrapper;\n\n\t// The following three lines were generated and should remain as-is to make TypeScript aware of the constructor signatures\n\tconstructor(idOrSettings?: string | $MyComponentSettings);\n\tconstructor(id?: string, settings?: $MyComponentSettings);\n\tconstructor(id?: string, settings?: $MyComponentSettings) {\n\t\tsuper(id, settings);\n\t}\n\n\tpublic init() {\n\t\t(async () => {\n\t\t\tconst settings = this.readFlpSettings();\n\t\t\tif (settings) {\n\t\t\t\tawait this.runInitProcess(settings);\n\t\t\t}\n\t\t})();\n\t}\n\n\tpublic async load(): Promise<void> {\n\t\tconst properties = this.readProperties();\n\t\tif (properties) {\n\t\t\tawait this.runInitProcess(properties);\n\t\t}\n\t}\n\n\tprivate async runInitProcess(parameters: RawStartParameters) {\n\t\tconst pluginInfo = {\n\t\t\tid: this.getManifestEntry('/sap.app/id'),\n\t\t\tversion: this.getManifestEntry('/sap.app/applicationVersion/version')\n\t\t} as PluginInfo;\n\t\tconst initController = ControllerFactory.createInitController(pluginInfo);\n\t\tconst invitationDialog = ControlFactory.createSurveyInvitationDialog(this.getResourceBundle());\n\t\tconst showCallback = invitationDialog.surveyInvitationDialogShowCallback.bind(invitationDialog);\n\t\tif (await initController.init(parameters, showCallback)) {\n\t\t\tthis._pxApiWrapper = initController.pxApiWrapper;\n\t\t\tif (this._pxApiWrapper) {\n\t\t\t\tthis._pxApiWrapper.invitationDialog = invitationDialog;\n\t\t\t\tthis.initializePluginController();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async initializePluginController(): Promise<void> {\n\t\tconst pluginController = ControllerFactory.createPluginController(this._pxApiWrapper, this.getResourceBundle());\n\t\tawait pluginController.initPlugin();\n\t}\n\n\tprivate getResourceBundle(): ResourceBundle {\n\t\tconst resourceModel = this.getModel('i18n') as ResourceModel;\n\t\treturn resourceModel.getResourceBundle() as ResourceBundle;\n\t}\n\n\t// FLP Settings\n\tprivate readFlpSettings(): RawStartParameters | undefined {\n\t\tconst componentData = this.readComponentData();\n\t\tif (componentData) {\n\t\t\tif (\n\t\t\t\t(componentData.qualtricsInternalUri && componentData.tenantId && !componentData.configUrl) ||\n\t\t\t\t(!componentData.qualtricsInternalUri &&\n\t\t\t\t\tcomponentData.tenantId &&\n\t\t\t\t\tcomponentData.configUrl &&\n\t\t\t\t\tcomponentData.unitId &&\n\t\t\t\t\tcomponentData.environment)\n\t\t\t) {\n\t\t\t\treturn componentData as RawStartParameters;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate readComponentData(): any | undefined {\n\t\tconst componentData = this.getComponentData() as any;\n\t\tif (componentData && componentData.config) {\n\t\t\treturn componentData.config;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\t// Component Properties\n\tprivate readProperties(): RawStartParameters | undefined {\n\t\tif ((this.getProperty('url') || this.getProperty('configIdentifier') || this.getProperty('configJson')) && this.getProperty('tenantId')) {\n\t\t\tconst properties = {\n\t\t\t\ttenantId: this.getProperty('tenantId'),\n\t\t\t\ttenantRole: this.getProperty('tenantRole'),\n\t\t\t\tqualtricsInternalUri: this.getProperty('url'),\n\t\t\t\tisPushEnabled: this.getProperty('isPushEnabled'),\n\t\t\t\tpushChannelPath: this.getProperty('pushChannelPath'),\n\t\t\t\tplatformType: this.getProperty('platformType'),\n\t\t\t\tproductName: this.getProperty('productName'),\n\t\t\t\tscopeSet: this.getProperty('scopeSet'),\n\t\t\t\tconfigJson: this.getProperty('configJson')\n\t\t\t} as RawStartParameters;\n\n\t\t\tif (this.getProperty('configIdentifier')) {\n\t\t\t\tconst configIdentifier = this.getProperty('configIdentifier');\n\t\t\t\tproperties.configUrl = configIdentifier.configUrl;\n\t\t\t\tproperties.unitId = configIdentifier.unitId;\n\t\t\t\tproperties.environment = configIdentifier.environment;\n\t\t\t}\n\t\t\treturn properties;\n\t\t}\n\t\treturn undefined;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}