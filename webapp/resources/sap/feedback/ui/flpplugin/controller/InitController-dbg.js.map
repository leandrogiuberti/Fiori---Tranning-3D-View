{"version":3,"file":"InitController-dbg.js","names":["Environment","___sap_px_pxapi","Constants","_interopRequireDefault","__Constants","Util","__Util","EmbeddedPxConfig","__EmbeddedPxConfig","PxApiWrapper","__PxApiWrapper","PushStateMigrator","__PushStateMigrator","InitController","pluginInfo","_classCallCheck","_pxApiWrapper","_createClass","key","get","value","init","parameters","surveyInvitationDialogCallback","_temp2","_result","_exit","Log","error","ERROR","INIT_PARAMS_INCONSISTENT","undefined","COMPONENT","INIT_CONTROLLER","_this","migrate","PUSH_STATE_MIGRATION_FAILED","Promise","resolve","isPhone","info","INFO","PHONE_NOT_SUPPORTED","_temp","hasOldParameters","initWithOldParameters","then","_await$_this$initWith","hasNewParameters","hasUrlParameters","overwriteWithUrlParameters","initWithNewParameters","_await$_this$initWith2","e","reject","Device","system","phone","configUrl","unitId","environment","debug","DEBUG","INIT_PARAMS_MANDATORY_FOUND_NEW","INIT_PARAMS_MANDATORY_NOT_SET_NEW","configJson","INIT_PARAMS_MANDATORY_FOUND_JSON","INIT_PARAMS_MANDATORY_NOT_SET_JSON","qualtricsInternalUri","tenantId","INIT_PARAMS_MANDATORY_FOUND_OLD","INIT_PARAMS_MANDATORY_NOT_SET_OLD","isUnitIdUrlParamSet","isEnvironmentUrlParamSet","INIT_PARAMS_URL_MODIFIED","getUnitIdUrlParamValue","env","getEnvironmentUrlParamValue","_temp4","_result3","_exit2","_this2","_temp3","tenantInfo","tenantRole","configIdentifier","initialize","_await$_this2$_pxApiW","_await$_this2$_pxApiW2","_this3","version","prod","startupConfig","productName","platformType","scopeSet","convertScopeSet","runtimeConfig","useApi","themingConfig","writeToGlobals","pushConfig","scopeSetString","scopeSetMap","featurePush","SCOPE_SETS","APP_PUSH","dynamicPush","TIMED_PUSH","scopeSetArray","split","appendManualScopeSet","map","scopeItem","trim","MANUAL","indexOf","push"],"sourceRoot":".","sources":["InitController.ts"],"sourcesContent":["import { Environment } from '@sap-px/pxapi';\nimport { ConfigIdentifier, JSONValue, SurveyInvitationDialogCallback, TenantInfo } from '@sap-px/pxapi/dist/api/common/Types';\nimport Log from 'sap/base/Log';\nimport Device from 'sap/ui/Device';\nimport Constants from '../common/Constants';\nimport { PluginInfo, PxConfigType, RawStartParameters } from '../common/Types';\nimport Util from '../common/Util';\nimport EmbeddedPxConfig from '../embeddedCfg/EmbeddedPxConfig';\nimport PxApiWrapper from '../pxapi/PxApiWrapper';\nimport PushStateMigrator from '../storage/PushStateMigrator';\n\nexport default class InitController {\n\tprivate _pxApiWrapper: PxApiWrapper;\n\n\tconstructor(pluginInfo: PluginInfo) {\n\t\tthis._pxApiWrapper = new PxApiWrapper(pluginInfo);\n\t}\n\n\tpublic get pxApiWrapper() {\n\t\treturn this._pxApiWrapper;\n\t}\n\n\tpublic async init(parameters: RawStartParameters, surveyInvitationDialogCallback: SurveyInvitationDialogCallback): Promise<boolean> {\n\t\tif (!PushStateMigrator.migrate()) {\n\t\t\tLog.error(Constants.ERROR.PUSH_STATE_MIGRATION_FAILED, undefined, Constants.COMPONENT.INIT_CONTROLLER);\n\t\t\treturn false;\n\t\t}\n\t\tif (this.isPhone()) {\n\t\t\tLog.info(Constants.INFO.PHONE_NOT_SUPPORTED, undefined, Constants.COMPONENT.INIT_CONTROLLER);\n\t\t\treturn false;\n\t\t}\n\t\tif (this.hasOldParameters(parameters)) {\n\t\t\treturn await this.initWithOldParameters(parameters, surveyInvitationDialogCallback);\n\t\t} else if (this.hasNewParameters(parameters)) {\n\t\t\tif (this.hasUrlParameters()) {\n\t\t\t\tthis.overwriteWithUrlParameters(parameters);\n\t\t\t}\n\t\t\treturn await this.initWithNewParameters(parameters, surveyInvitationDialogCallback);\n\t\t}\n\t\tLog.error(Constants.ERROR.INIT_PARAMS_INCONSISTENT, undefined, Constants.COMPONENT.INIT_CONTROLLER);\n\t\treturn false;\n\t}\n\n\tprivate isPhone(): boolean {\n\t\treturn Device.system.phone;\n\t}\n\n\tprivate hasNewParameters(parameters: RawStartParameters): boolean {\n\t\tif (parameters.configUrl && parameters.unitId && parameters.environment) {\n\t\t\tLog.debug(Constants.DEBUG.INIT_PARAMS_MANDATORY_FOUND_NEW, undefined, Constants.COMPONENT.INIT_CONTROLLER);\n\t\t\treturn true;\n\t\t}\n\t\tLog.debug(Constants.DEBUG.INIT_PARAMS_MANDATORY_NOT_SET_NEW, undefined, Constants.COMPONENT.INIT_CONTROLLER);\n\t\tif (parameters.configJson) {\n\t\t\tLog.debug(Constants.DEBUG.INIT_PARAMS_MANDATORY_FOUND_JSON, undefined, Constants.COMPONENT.INIT_CONTROLLER);\n\t\t\treturn true;\n\t\t}\n\t\tLog.debug(Constants.DEBUG.INIT_PARAMS_MANDATORY_NOT_SET_JSON, undefined, Constants.COMPONENT.INIT_CONTROLLER);\n\t\treturn false;\n\t}\n\n\tprivate hasOldParameters(parameters: RawStartParameters): boolean {\n\t\tif (parameters.qualtricsInternalUri && parameters.tenantId) {\n\t\t\tLog.debug(Constants.DEBUG.INIT_PARAMS_MANDATORY_FOUND_OLD, undefined, Constants.COMPONENT.INIT_CONTROLLER);\n\t\t\treturn true;\n\t\t}\n\t\tLog.debug(Constants.DEBUG.INIT_PARAMS_MANDATORY_NOT_SET_OLD, undefined, Constants.COMPONENT.INIT_CONTROLLER);\n\t\treturn false;\n\t}\n\n\tprivate hasUrlParameters(): boolean {\n\t\tif (Util.isUnitIdUrlParamSet() && Util.isEnvironmentUrlParamSet()) {\n\t\t\tLog.debug(Constants.DEBUG.INIT_PARAMS_URL_MODIFIED, undefined, Constants.COMPONENT.INIT_CONTROLLER);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate overwriteWithUrlParameters(parameters: RawStartParameters) {\n\t\tconst unitId = Util.getUnitIdUrlParamValue();\n\t\tif (unitId) {\n\t\t\tparameters.unitId = unitId;\n\t\t}\n\t\tconst env = Util.getEnvironmentUrlParamValue();\n\t\tif (env) {\n\t\t\tparameters.environment = env;\n\t\t}\n\t}\n\n\t// FLP Settings\n\tprivate async initWithNewParameters(\n\t\tparameters: RawStartParameters,\n\t\tsurveyInvitationDialogCallback: SurveyInvitationDialogCallback\n\t): Promise<boolean> {\n\t\t//Load PX-API\n\t\tif (parameters.configUrl && !parameters.configJson) {\n\t\t\tconst tenantInfo = {\n\t\t\t\ttenantId: parameters.tenantId,\n\t\t\t\ttenantRole: parameters.tenantRole\n\t\t\t} as TenantInfo;\n\t\t\tconst configIdentifier = {\n\t\t\t\tconfigUrl: parameters.configUrl,\n\t\t\t\tunitId: parameters.unitId,\n\t\t\t\tenvironment: parameters.environment\n\t\t\t} as ConfigIdentifier;\n\t\t\treturn await this._pxApiWrapper.initialize(tenantInfo, configIdentifier, undefined, surveyInvitationDialogCallback);\n\t\t} else if (!parameters.configUrl && parameters.configJson) {\n\t\t\tconst tenantInfo = {\n\t\t\t\ttenantId: parameters.tenantId,\n\t\t\t\ttenantRole: parameters.tenantRole\n\t\t\t} as TenantInfo;\n\t\t\tconst configJson = parameters.configJson as PxConfigType;\n\t\t\treturn await this._pxApiWrapper.initialize(tenantInfo, undefined, configJson as JSONValue, surveyInvitationDialogCallback);\n\t\t}\n\t\tLog.error(Constants.ERROR.INIT_PARAMS_INCONSISTENT, undefined, Constants.COMPONENT.INIT_CONTROLLER);\n\t\treturn false;\n\t}\n\n\tprivate async initWithOldParameters(\n\t\tparameters: RawStartParameters,\n\t\tsurveyInvitationDialogCallback: SurveyInvitationDialogCallback\n\t): Promise<boolean> {\n\t\t//Load embedded config\n\t\tconst configJson = {\n\t\t\tversion: '0.4.0',\n\t\t\tunitId: '83cec47d-199c-4fc9-8848-330c6e3ec6bb',\n\t\t\tenvironment: Environment.prod,\n\t\t\tstartupConfig: {\n\t\t\t\tqualtricsInternalUri: parameters.qualtricsInternalUri,\n\t\t\t\tproductName: parameters.productName,\n\t\t\t\tplatformType: parameters.platformType,\n\t\t\t\tscopeSet: this.convertScopeSet(parameters.scopeSet)\n\t\t\t},\n\t\t\truntimeConfig: {\n\t\t\t\tuseApi: true\n\t\t\t},\n\t\t\tthemingConfig: {\n\t\t\t\twriteToGlobals: true\n\t\t\t},\n\t\t\tpushConfig: EmbeddedPxConfig.pushConfig()\n\t\t} as PxConfigType;\n\n\t\tconst tenantInfo = {\n\t\t\ttenantId: parameters.tenantId,\n\t\t\ttenantRole: parameters.tenantRole\n\t\t} as TenantInfo;\n\t\t//Load and init PX-API\n\t\treturn await this._pxApiWrapper.initialize(tenantInfo, undefined, configJson as JSONValue, surveyInvitationDialogCallback);\n\t}\n\n\tprivate convertScopeSet(scopeSetString: string | undefined): string[] {\n\t\tconst scopeSetMap = { featurePush: Constants.SCOPE_SETS.APP_PUSH, dynamicPush: Constants.SCOPE_SETS.TIMED_PUSH };\n\t\tif (scopeSetString) {\n\t\t\tlet scopeSetArray = scopeSetString.split(',');\n\t\t\tscopeSetArray = this.appendManualScopeSet(scopeSetArray);\n\t\t\tconst scopeSet = scopeSetArray.map((scopeItem) => {\n\t\t\t\treturn scopeSetMap[scopeItem.trim() as keyof typeof scopeSetMap] || scopeItem.trim();\n\t\t\t});\n\t\t\treturn scopeSet;\n\t\t}\n\t\treturn [Constants.SCOPE_SETS.MANUAL];\n\t}\n\n\tprivate appendManualScopeSet(scopeSetArray: string[]): string[] {\n\t\tif (scopeSetArray.indexOf(Constants.SCOPE_SETS.MANUAL) > -1) {\n\t\t\treturn scopeSetArray;\n\t\t}\n\t\tscopeSetArray.push(Constants.SCOPE_SETS.MANUAL);\n\t\treturn scopeSetArray;\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;MAASA,WAAW,GAAAC,eAAA;EAAA,IAIbC,SAAS,GAAAC,sBAAA,CAAAC,WAAA;EAAA,IAETC,IAAI,GAAAF,sBAAA,CAAAG,MAAA;EAAA,IACJC,gBAAgB,GAAAJ,sBAAA,CAAAK,kBAAA;EAAA,IAChBC,YAAY,GAAAN,sBAAA,CAAAO,cAAA;EAAA,IACZC,iBAAiB,GAAAR,sBAAA,CAAAS,mBAAA;EAAA,IAEHC,cAAc;IAGlC,SAAAA,eAAYC,UAAsB,EAAE;MAAAC,eAAA,OAAAF,cAAA;MACnC,IAAI,CAACG,aAAa,GAAG,IAAIP,YAAY,CAACK,UAAU,CAAC;IAClD;IAAC,OAAAG,YAAA,CAAAJ,cAAA;MAAAK,GAAA;MAAAC,GAAA,EAED,SAAAA,IAAA,EAA0B;QACzB,OAAO,IAAI,CAACH,aAAa;MAC1B;IAAC;MAAAE,GAAA;MAAAE,KAAA,WAEYC,IAAIA,CAACC,UAA8B,EAAEC,8BAA8D;QAAA,IAAoB;UAAA,IAAAC,MAAA,YAAAA,OAAAC,OAAA;YAAA,IAAAC,KAAA,SAAAD,OAAA;YAiBnIE,GAAG,CAACC,KAAK,CAAC1B,SAAS,CAAC2B,KAAK,CAACC,wBAAwB,EAAEC,SAAS,EAAE7B,SAAS,CAAC8B,SAAS,CAACC,eAAe,CAAC;YACnG,OAAO,KAAK;UAAC;UAAA,IAAAP,KAAA;UAAA,IAAAQ,KAAA,GAbT,IAAI;UAJR,IAAI,CAACvB,iBAAiB,CAACwB,OAAO,CAAC,CAAC,EAAE;YACjCR,GAAG,CAACC,KAAK,CAAC1B,SAAS,CAAC2B,KAAK,CAACO,2BAA2B,EAAEL,SAAS,EAAE7B,SAAS,CAAC8B,SAAS,CAACC,eAAe,CAAC;YACtG,OAAAI,OAAA,CAAAC,OAAA,CAAO,KAAK;UACb;UACA,IAAIJ,KAAA,CAAKK,OAAO,CAAC,CAAC,EAAE;YACnBZ,GAAG,CAACa,IAAI,CAACtC,SAAS,CAACuC,IAAI,CAACC,mBAAmB,EAAEX,SAAS,EAAE7B,SAAS,CAAC8B,SAAS,CAACC,eAAe,CAAC;YAC5F,OAAAI,OAAA,CAAAC,OAAA,CAAO,KAAK;UACb;UAAC,IAAAK,KAAA;YAAA,IACGT,KAAA,CAAKU,gBAAgB,CAACtB,UAAU,CAAC;cAAA,OAAAe,OAAA,CAAAC,OAAA,CACvBJ,KAAA,CAAKW,qBAAqB,CAACvB,UAAU,EAAEC,8BAA8B,CAAC,EAAAuB,IAAA,WAAAC,qBAAA;gBAAArB,KAAA;gBAAA,OAAAqB,qBAAA;cAAA;YAAA;cAAA,IACzEb,KAAA,CAAKc,gBAAgB,CAAC1B,UAAU,CAAC;gBAC3C,IAAIY,KAAA,CAAKe,gBAAgB,CAAC,CAAC,EAAE;kBAC5Bf,KAAA,CAAKgB,0BAA0B,CAAC5B,UAAU,CAAC;gBAC5C;gBAAC,OAAAe,OAAA,CAAAC,OAAA,CACYJ,KAAA,CAAKiB,qBAAqB,CAAC7B,UAAU,EAAEC,8BAA8B,CAAC,EAAAuB,IAAA,WAAAM,sBAAA;kBAAA1B,KAAA;kBAAA,OAAA0B,sBAAA;gBAAA;cAAA;YAAA;UAAA;UAAA,OAAAf,OAAA,CAAAC,OAAA,CAAAK,KAAA,IAAAA,KAAA,CAAAG,IAAA,GAAAH,KAAA,CAAAG,IAAA,CAAAtB,MAAA,IAAAA,MAAA,CAAAmB,KAAA;QAIrF,CAAC,QAAAU,CAAA;UAAA,OAAAhB,OAAA,CAAAiB,MAAA,CAAAD,CAAA;QAAA;MAAA;IAAA;MAAAnC,GAAA;MAAAE,KAAA,EAED,SAAQmB,OAAOA,CAAA,EAAY;QAC1B,OAAOgB,MAAM,CAACC,MAAM,CAACC,KAAK;MAC3B;IAAC;MAAAvC,GAAA;MAAAE,KAAA,EAED,SAAQ4B,gBAAgBA,CAAC1B,UAA8B,EAAW;QACjE,IAAIA,UAAU,CAACoC,SAAS,IAAIpC,UAAU,CAACqC,MAAM,IAAIrC,UAAU,CAACsC,WAAW,EAAE;UACxEjC,GAAG,CAACkC,KAAK,CAAC3D,SAAS,CAAC4D,KAAK,CAACC,+BAA+B,EAAEhC,SAAS,EAAE7B,SAAS,CAAC8B,SAAS,CAACC,eAAe,CAAC;UAC1G,OAAO,IAAI;QACZ;QACAN,GAAG,CAACkC,KAAK,CAAC3D,SAAS,CAAC4D,KAAK,CAACE,iCAAiC,EAAEjC,SAAS,EAAE7B,SAAS,CAAC8B,SAAS,CAACC,eAAe,CAAC;QAC5G,IAAIX,UAAU,CAAC2C,UAAU,EAAE;UAC1BtC,GAAG,CAACkC,KAAK,CAAC3D,SAAS,CAAC4D,KAAK,CAACI,gCAAgC,EAAEnC,SAAS,EAAE7B,SAAS,CAAC8B,SAAS,CAACC,eAAe,CAAC;UAC3G,OAAO,IAAI;QACZ;QACAN,GAAG,CAACkC,KAAK,CAAC3D,SAAS,CAAC4D,KAAK,CAACK,kCAAkC,EAAEpC,SAAS,EAAE7B,SAAS,CAAC8B,SAAS,CAACC,eAAe,CAAC;QAC7G,OAAO,KAAK;MACb;IAAC;MAAAf,GAAA;MAAAE,KAAA,EAED,SAAQwB,gBAAgBA,CAACtB,UAA8B,EAAW;QACjE,IAAIA,UAAU,CAAC8C,oBAAoB,IAAI9C,UAAU,CAAC+C,QAAQ,EAAE;UAC3D1C,GAAG,CAACkC,KAAK,CAAC3D,SAAS,CAAC4D,KAAK,CAACQ,+BAA+B,EAAEvC,SAAS,EAAE7B,SAAS,CAAC8B,SAAS,CAACC,eAAe,CAAC;UAC1G,OAAO,IAAI;QACZ;QACAN,GAAG,CAACkC,KAAK,CAAC3D,SAAS,CAAC4D,KAAK,CAACS,iCAAiC,EAAExC,SAAS,EAAE7B,SAAS,CAAC8B,SAAS,CAACC,eAAe,CAAC;QAC5G,OAAO,KAAK;MACb;IAAC;MAAAf,GAAA;MAAAE,KAAA,EAED,SAAQ6B,gBAAgBA,CAAA,EAAY;QACnC,IAAI5C,IAAI,CAACmE,mBAAmB,CAAC,CAAC,IAAInE,IAAI,CAACoE,wBAAwB,CAAC,CAAC,EAAE;UAClE9C,GAAG,CAACkC,KAAK,CAAC3D,SAAS,CAAC4D,KAAK,CAACY,wBAAwB,EAAE3C,SAAS,EAAE7B,SAAS,CAAC8B,SAAS,CAACC,eAAe,CAAC;UACnG,OAAO,IAAI;QACZ;QACA,OAAO,KAAK;MACb;IAAC;MAAAf,GAAA;MAAAE,KAAA,EAED,SAAQ8B,0BAA0BA,CAAC5B,UAA8B,EAAE;QAClE,IAAMqC,MAAM,GAAGtD,IAAI,CAACsE,sBAAsB,CAAC,CAAC;QAC5C,IAAIhB,MAAM,EAAE;UACXrC,UAAU,CAACqC,MAAM,GAAGA,MAAM;QAC3B;QACA,IAAMiB,GAAG,GAAGvE,IAAI,CAACwE,2BAA2B,CAAC,CAAC;QAC9C,IAAID,GAAG,EAAE;UACRtD,UAAU,CAACsC,WAAW,GAAGgB,GAAG;QAC7B;MACD;;MAEA;IAAA;MAAA1D,GAAA;MAAAE,KAAA,WACc+B,qBAAqBA,CAClC7B,UAA8B,EAC9BC,8BAA8D;QAAA,IAC3C;UAAA,IAAAuD,MAAA,YAAAA,OAAAC,QAAA;YAAA,IAAAC,MAAA,SAAAD,QAAA;YAqBnBpD,GAAG,CAACC,KAAK,CAAC1B,SAAS,CAAC2B,KAAK,CAACC,wBAAwB,EAAEC,SAAS,EAAE7B,SAAS,CAAC8B,SAAS,CAACC,eAAe,CAAC;YACnG,OAAO,KAAK;UAAC;UAAA,IAAA+C,MAAA;UAAA,IAAAC,MAAA,GAVC,IAAI;UAAA,IAAAC,MAAA;YAAA,IAVd5D,UAAU,CAACoC,SAAS,IAAI,CAACpC,UAAU,CAAC2C,UAAU;cACjD,IAAMkB,UAAU,GAAG;gBAClBd,QAAQ,EAAE/C,UAAU,CAAC+C,QAAQ;gBAC7Be,UAAU,EAAE9D,UAAU,CAAC8D;cACxB,CAAe;cACf,IAAMC,gBAAgB,GAAG;gBACxB3B,SAAS,EAAEpC,UAAU,CAACoC,SAAS;gBAC/BC,MAAM,EAAErC,UAAU,CAACqC,MAAM;gBACzBC,WAAW,EAAEtC,UAAU,CAACsC;cACzB,CAAqB;cAAC,OAAAvB,OAAA,CAAAC,OAAA,CACT2C,MAAA,CAAKjE,aAAa,CAACsE,UAAU,CAACH,UAAU,EAAEE,gBAAgB,EAAEtD,SAAS,EAAER,8BAA8B,CAAC,EAAAuB,IAAA,WAAAyC,qBAAA;gBAAAP,MAAA;gBAAA,OAAAO,qBAAA;cAAA;YAAA;cAAA,IACzG,CAACjE,UAAU,CAACoC,SAAS,IAAIpC,UAAU,CAAC2C,UAAU;gBACxD,IAAMkB,WAAU,GAAG;kBAClBd,QAAQ,EAAE/C,UAAU,CAAC+C,QAAQ;kBAC7Be,UAAU,EAAE9D,UAAU,CAAC8D;gBACxB,CAAe;gBACf,IAAMnB,UAAU,GAAG3C,UAAU,CAAC2C,UAA0B;gBAAC,OAAA5B,OAAA,CAAAC,OAAA,CAC5C2C,MAAA,CAAKjE,aAAa,CAACsE,UAAU,CAACH,WAAU,EAAEpD,SAAS,EAAEkC,UAAU,EAAe1C,8BAA8B,CAAC,EAAAuB,IAAA,WAAA0C,sBAAA;kBAAAR,MAAA;kBAAA,OAAAQ,sBAAA;gBAAA;cAAA;YAAA;UAAA;UAlB3H;UAAA,OAAAnD,OAAA,CAAAC,OAAA,CAAA4C,MAAA,IAAAA,MAAA,CAAApC,IAAA,GAAAoC,MAAA,CAAApC,IAAA,CAAAgC,MAAA,IAAAA,MAAA,CAAAI,MAAA;QAsBD,CAAC,QAAA7B,CAAA;UAAA,OAAAhB,OAAA,CAAAiB,MAAA,CAAAD,CAAA;QAAA;MAAA;IAAA;MAAAnC,GAAA;MAAAE,KAAA,WAEayB,qBAAqBA,CAClCvB,UAA8B,EAC9BC,8BAA8D;QAAA,IAC3C;UAAA,IAAAkE,MAAA,GAUP,IAAI;UAThB;UACA,IAAMxB,UAAU,GAAG;YAClByB,OAAO,EAAE,OAAO;YAChB/B,MAAM,EAAE,sCAAsC;YAC9CC,WAAW,EAAE5D,WAAW,CAAC2F,IAAI;YAC7BC,aAAa,EAAE;cACdxB,oBAAoB,EAAE9C,UAAU,CAAC8C,oBAAoB;cACrDyB,WAAW,EAAEvE,UAAU,CAACuE,WAAW;cACnCC,YAAY,EAAExE,UAAU,CAACwE,YAAY;cACrCC,QAAQ,EAAEN,MAAA,CAAKO,eAAe,CAAC1E,UAAU,CAACyE,QAAQ;YACnD,CAAC;YACDE,aAAa,EAAE;cACdC,MAAM,EAAE;YACT,CAAC;YACDC,aAAa,EAAE;cACdC,cAAc,EAAE;YACjB,CAAC;YACDC,UAAU,EAAE9F,gBAAgB,CAAC8F,UAAU,CAAC;UACzC,CAAiB;UAEjB,IAAMlB,UAAU,GAAG;YAClBd,QAAQ,EAAE/C,UAAU,CAAC+C,QAAQ;YAC7Be,UAAU,EAAE9D,UAAU,CAAC8D;UACxB,CAAe;UACf;UAAA,OAAA/C,OAAA,CAAAC,OAAA,CACamD,MAAA,CAAKzE,aAAa,CAACsE,UAAU,CAACH,UAAU,EAAEpD,SAAS,EAAEkC,UAAU,EAAe1C,8BAA8B,CAAC;QAC3H,CAAC,QAAA8B,CAAA;UAAA,OAAAhB,OAAA,CAAAiB,MAAA,CAAAD,CAAA;QAAA;MAAA;IAAA;MAAAnC,GAAA;MAAAE,KAAA,EAED,SAAQ4E,eAAeA,CAACM,cAAkC,EAAY;QACrE,IAAMC,WAAW,GAAG;UAAEC,WAAW,EAAEtG,SAAS,CAACuG,UAAU,CAACC,QAAQ;UAAEC,WAAW,EAAEzG,SAAS,CAACuG,UAAU,CAACG;QAAW,CAAC;QAChH,IAAIN,cAAc,EAAE;UACnB,IAAIO,aAAa,GAAGP,cAAc,CAACQ,KAAK,CAAC,GAAG,CAAC;UAC7CD,aAAa,GAAG,IAAI,CAACE,oBAAoB,CAACF,aAAa,CAAC;UACxD,IAAMd,QAAQ,GAAGc,aAAa,CAACG,GAAG,CAAC,UAACC,SAAS,EAAK;YACjD,OAAOV,WAAW,CAACU,SAAS,CAACC,IAAI,CAAC,CAAC,CAA6B,IAAID,SAAS,CAACC,IAAI,CAAC,CAAC;UACrF,CAAC,CAAC;UACF,OAAOnB,QAAQ;QAChB;QACA,OAAO,CAAC7F,SAAS,CAACuG,UAAU,CAACU,MAAM,CAAC;MACrC;IAAC;MAAAjG,GAAA;MAAAE,KAAA,EAED,SAAQ2F,oBAAoBA,CAACF,aAAuB,EAAY;QAC/D,IAAIA,aAAa,CAACO,OAAO,CAAClH,SAAS,CAACuG,UAAU,CAACU,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE;UAC5D,OAAON,aAAa;QACrB;QACAA,aAAa,CAACQ,IAAI,CAACnH,SAAS,CAACuG,UAAU,CAACU,MAAM,CAAC;QAC/C,OAAON,aAAa;MACrB;IAAC;EAAA;EAAA,OAAAhG,cAAA;AAAA","ignoreList":[]}