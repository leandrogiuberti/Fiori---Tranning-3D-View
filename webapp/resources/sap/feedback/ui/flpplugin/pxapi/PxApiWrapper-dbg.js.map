{"version":3,"file":"PxApiWrapper-dbg.js","names":["PxApiFactory","_interopRequireDefault","__PxApiFactory","Constants","__Constants","Util","__Util","PxApiWrapper","pluginInfo","_classCallCheck","_pxApi","createPxApi","updatePxClient","_createClass","key","get","_invitationDialog","set","value","initialize","tenantInfo","configIdentifier","configJson","surveyInvitationDialogCallback","_this","Promise","resolve","e","reject","openSurvey","appContextData","requestPush","pushData","updateThemeId","themeId","currentThemeId","infoContext","ensureGlobalContext","version","indexOf","PXCLIENT_INFO_VERSION_FALLBACK","pxclient","concat","id","pxlient","PXCLIENT_INFO_NAME_FALLBACK"],"sourceRoot":".","sources":["PxApiWrapper.ts"],"sourcesContent":["import { PxApi, ThemeId } from '@sap-px/pxapi';\nimport {\n\tAppContextData,\n\tConfigIdentifier,\n\tJSONValue,\n\tPushFeedbackRequestData,\n\tSurveyInvitationDialogCallback,\n\tTenantInfo\n} from '@sap-px/pxapi/dist/api/common/Types';\nimport PxApiFactory from './PxApiFactory';\nimport Constants from '../common/Constants';\nimport { PluginInfo } from '../common/Types';\nimport Util from '../common/Util';\nimport InvitationDialog from '../ui/InvitationDialog';\n\nexport default class PxApiWrapper {\n\t_pxApi: PxApi;\n\t_invitationDialog: InvitationDialog;\n\n\tget pxApi(): PxApi {\n\t\treturn this._pxApi;\n\t}\n\n\tset invitationDialog(value: InvitationDialog) {\n\t\tthis._invitationDialog = value;\n\t}\n\tget invitationDialog(): InvitationDialog {\n\t\treturn this._invitationDialog;\n\t}\n\n\tconstructor(pluginInfo: PluginInfo) {\n\t\tthis._pxApi = PxApiFactory.createPxApi();\n\t\tthis.updatePxClient(pluginInfo);\n\t}\n\n\tasync initialize(\n\t\ttenantInfo: TenantInfo,\n\t\tconfigIdentifier?: ConfigIdentifier,\n\t\tconfigJson?: JSONValue,\n\t\tsurveyInvitationDialogCallback?: SurveyInvitationDialogCallback\n\t): Promise<boolean> {\n\t\treturn await this._pxApi.initialize(tenantInfo, configIdentifier, configJson, surveyInvitationDialogCallback);\n\t}\n\n\topenSurvey(appContextData: AppContextData) {\n\t\tthis._pxApi.openSurvey(appContextData);\n\t}\n\n\trequestPush(pushData: PushFeedbackRequestData) {\n\t\tthis._pxApi.requestPush(pushData);\n\t}\n\n\tupdateThemeId(themeId: ThemeId) {\n\t\tthis._pxApi.currentThemeId = themeId;\n\t}\n\n\tprivate updatePxClient(pluginInfo: PluginInfo) {\n\t\tconst infoContext = Util.ensureGlobalContext('qtx', 'info');\n\t\tif (pluginInfo && pluginInfo.version) {\n\t\t\tconst version = pluginInfo.version.indexOf('project.version') === -1 ? pluginInfo.version : Constants.PXCLIENT_INFO_VERSION_FALLBACK;\n\t\t\tinfoContext.pxclient += ` ${pluginInfo.id}/1.141.0`;\n\t\t\treturn;\n\t\t}\n\t\tinfoContext.pxlient += `${Constants.PXCLIENT_INFO_NAME_FALLBACK}/${Constants.PXCLIENT_INFO_VERSION_FALLBACK}`;\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;MASOA,YAAY,GAAAC,sBAAA,CAAAC,cAAA;EAAA,IACZC,SAAS,GAAAF,sBAAA,CAAAG,WAAA;EAAA,IAETC,IAAI,GAAAJ,sBAAA,CAAAK,MAAA;EAAA,IAGUC,YAAY;IAehC,SAAAA,aAAYC,UAAsB,EAAE;MAAAC,eAAA,OAAAF,YAAA;MACnC,IAAI,CAACG,MAAM,GAAGV,YAAY,CAACW,WAAW,CAAC,CAAC;MACxC,IAAI,CAACC,cAAc,CAACJ,UAAU,CAAC;IAChC;IAAC,OAAAK,YAAA,CAAAN,YAAA;MAAAO,GAAA;MAAAC,GAAA,EAdD,SAAAA,IAAA,EAAmB;QAClB,OAAO,IAAI,CAACL,MAAM;MACnB;IAAC;MAAAI,GAAA;MAAAC,GAAA,EAKD,SAAAA,IAAA,EAAyC;QACxC,OAAO,IAAI,CAACC,iBAAiB;MAC9B,CAAC;MAAAC,GAAA,EALD,SAAAA,IAAqBC,KAAuB,EAAE;QAC7C,IAAI,CAACF,iBAAiB,GAAGE,KAAK;MAC/B;IAAC;MAAAJ,GAAA;MAAAI,KAAA,WAUKC,UAAUA,CACfC,UAAsB,EACtBC,gBAAmC,EACnCC,UAAsB,EACtBC,8BAA+D;QAAA,IAC5C;UAAA,IAAAC,KAAA,GACN,IAAI;UAAA,OAAAC,OAAA,CAAAC,OAAA,CAAJF,KAAA,CAAKd,MAAM,CAACS,UAAU,CAACC,UAAU,EAAEC,gBAAgB,EAAEC,UAAU,EAAEC,8BAA8B,CAAC;QAC9G,CAAC,QAAAI,CAAA;UAAA,OAAAF,OAAA,CAAAG,MAAA,CAAAD,CAAA;QAAA;MAAA;IAAA;MAAAb,GAAA;MAAAI,KAAA,EAED,SAAAW,UAAUA,CAACC,cAA8B,EAAE;QAC1C,IAAI,CAACpB,MAAM,CAACmB,UAAU,CAACC,cAAc,CAAC;MACvC;IAAC;MAAAhB,GAAA;MAAAI,KAAA,EAED,SAAAa,WAAWA,CAACC,QAAiC,EAAE;QAC9C,IAAI,CAACtB,MAAM,CAACqB,WAAW,CAACC,QAAQ,CAAC;MAClC;IAAC;MAAAlB,GAAA;MAAAI,KAAA,EAED,SAAAe,aAAaA,CAACC,OAAgB,EAAE;QAC/B,IAAI,CAACxB,MAAM,CAACyB,cAAc,GAAGD,OAAO;MACrC;IAAC;MAAApB,GAAA;MAAAI,KAAA,EAED,SAAQN,cAAcA,CAACJ,UAAsB,EAAE;QAC9C,IAAM4B,WAAW,GAAG/B,IAAI,CAACgC,mBAAmB,CAAC,KAAK,EAAE,MAAM,CAAC;QAC3D,IAAI7B,UAAU,IAAIA,UAAU,CAAC8B,OAAO,EAAE;UACrC,IAAMA,OAAO,GAAG9B,UAAU,CAAC8B,OAAO,CAACC,OAAO,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,GAAG/B,UAAU,CAAC8B,OAAO,GAAGnC,SAAS,CAACqC,8BAA8B;UACpIJ,WAAW,CAACK,QAAQ,QAAAC,MAAA,CAAQlC,UAAU,CAACmC,EAAE,aAAU;UACnD;QACD;QACAP,WAAW,CAACQ,OAAO,OAAAF,MAAA,CAAOvC,SAAS,CAAC0C,2BAA2B,OAAAH,MAAA,CAAIvC,SAAS,CAACqC,8BAA8B,CAAE;MAC9G;IAAC;EAAA;EAAA,OAAAjC,YAAA;AAAA","ignoreList":[]}