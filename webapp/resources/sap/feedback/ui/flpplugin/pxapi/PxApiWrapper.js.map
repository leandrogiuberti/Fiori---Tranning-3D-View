{"version":3,"file":"PxApiWrapper.js","names":["PxApiFactory","_interopRequireDefault","__PxApiFactory","Constants","__Constants","Util","__Util","PxApiWrapper","pluginInfo","_classCallCheck","this","_pxApi","createPxApi","updatePxClient","_createClass","key","get","_invitationDialog","set","value","initialize","tenantInfo","configIdentifier","configJson","surveyInvitationDialogCallback","_this","Promise","resolve","e","reject","openSurvey","appContextData","requestPush","pushData","updateThemeId","themeId","currentThemeId","infoContext","ensureGlobalContext","version","indexOf","PXCLIENT_INFO_VERSION_FALLBACK","pxclient","concat","id","pxlient","PXCLIENT_INFO_NAME_FALLBACK"],"sources":["./PxApiWrapper.ts"],"sourcesContent":["import { PxApi, ThemeId } from '@sap-px/pxapi';\nimport {\n\tAppContextData,\n\tConfigIdentifier,\n\tJSONValue,\n\tPushFeedbackRequestData,\n\tSurveyInvitationDialogCallback,\n\tTenantInfo\n} from '@sap-px/pxapi/dist/api/common/Types';\nimport PxApiFactory from './PxApiFactory';\nimport Constants from '../common/Constants';\nimport { PluginInfo } from '../common/Types';\nimport Util from '../common/Util';\nimport InvitationDialog from '../ui/InvitationDialog';\n\nexport default class PxApiWrapper {\n\t_pxApi: PxApi;\n\t_invitationDialog: InvitationDialog;\n\n\tget pxApi(): PxApi {\n\t\treturn this._pxApi;\n\t}\n\n\tset invitationDialog(value: InvitationDialog) {\n\t\tthis._invitationDialog = value;\n\t}\n\tget invitationDialog(): InvitationDialog {\n\t\treturn this._invitationDialog;\n\t}\n\n\tconstructor(pluginInfo: PluginInfo) {\n\t\tthis._pxApi = PxApiFactory.createPxApi();\n\t\tthis.updatePxClient(pluginInfo);\n\t}\n\n\tasync initialize(\n\t\ttenantInfo: TenantInfo,\n\t\tconfigIdentifier?: ConfigIdentifier,\n\t\tconfigJson?: JSONValue,\n\t\tsurveyInvitationDialogCallback?: SurveyInvitationDialogCallback\n\t): Promise<boolean> {\n\t\treturn await this._pxApi.initialize(tenantInfo, configIdentifier, configJson, surveyInvitationDialogCallback);\n\t}\n\n\topenSurvey(appContextData: AppContextData) {\n\t\tthis._pxApi.openSurvey(appContextData);\n\t}\n\n\trequestPush(pushData: PushFeedbackRequestData) {\n\t\tthis._pxApi.requestPush(pushData);\n\t}\n\n\tupdateThemeId(themeId: ThemeId) {\n\t\tthis._pxApi.currentThemeId = themeId;\n\t}\n\n\tprivate updatePxClient(pluginInfo: PluginInfo) {\n\t\tconst infoContext = Util.ensureGlobalContext('qtx', 'info');\n\t\tif (pluginInfo && pluginInfo.version) {\n\t\t\tconst version = pluginInfo.version.indexOf('project.version') === -1 ? pluginInfo.version : Constants.PXCLIENT_INFO_VERSION_FALLBACK;\n\t\t\tinfoContext.pxclient += ` ${pluginInfo.id}/1.141.0`;\n\t\t\treturn;\n\t\t}\n\t\tinfoContext.pxlient += `${Constants.PXCLIENT_INFO_NAME_FALLBACK}/${Constants.PXCLIENT_INFO_VERSION_FALLBACK}`;\n\t}\n}\n"],"mappings":"wnCASOA,EAAYC,EAAAC,GAAA,IACZC,EAASF,EAAAG,GAAA,IAETC,EAAIJ,EAAAK,GAAA,IAGUC,EAAY,WAehC,SAAAA,EAAYC,GAAwBC,EAAAC,KAAAH,GACnCG,KAAKC,OAASX,EAAaY,cAC3BF,KAAKG,eAAeL,EACrB,CAAC,OAAAM,EAAAP,EAAA,EAAAQ,IAAA,QAAAC,IAdD,SAAAA,IACC,OAAON,KAAKC,MACb,GAAC,CAAAI,IAAA,mBAAAC,IAKD,SAAAA,IACC,OAAON,KAAKO,iBACb,EAACC,IALD,SAAAA,EAAqBC,GACpBT,KAAKO,kBAAoBE,CAC1B,GAAC,CAAAJ,IAAA,aAAAI,MAAA,SAUKC,EACLC,EACAC,EACAC,EACAC,GAA+D,IAC5C,IAAAC,EACNf,KAAI,OAAAgB,QAAAC,QAAJF,EAAKd,OAAOS,WAAWC,EAAYC,EAAkBC,EAAYC,GAC/E,CAAC,MAAAI,GAAA,OAAAF,QAAAG,OAAAD,EAAA,KAAAb,IAAA,aAAAI,MAED,SAAAW,EAAWC,GACVrB,KAAKC,OAAOmB,WAAWC,EACxB,GAAC,CAAAhB,IAAA,cAAAI,MAED,SAAAa,EAAYC,GACXvB,KAAKC,OAAOqB,YAAYC,EACzB,GAAC,CAAAlB,IAAA,gBAAAI,MAED,SAAAe,EAAcC,GACbzB,KAAKC,OAAOyB,eAAiBD,CAC9B,GAAC,CAAApB,IAAA,iBAAAI,MAED,SAAQN,EAAeL,GACtB,IAAM6B,EAAchC,EAAKiC,oBAAoB,MAAO,QACpD,GAAI9B,GAAcA,EAAW+B,QAAS,CACrC,IAAMA,EAAU/B,EAAW+B,QAAQC,QAAQ,sBAAwB,EAAIhC,EAAW+B,QAAUpC,EAAUsC,+BACtGJ,EAAYK,UAAQ,IAAAC,OAAQnC,EAAWoC,GAAE,YACzC,MACD,CACAP,EAAYQ,SAAO,GAAAF,OAAOxC,EAAU2C,4BAA2B,KAAAH,OAAIxC,EAAUsC,+BAC9E,IAAC,CAjD+B,GAiD/B,OAAAlC,CAAA","ignoreList":[]}