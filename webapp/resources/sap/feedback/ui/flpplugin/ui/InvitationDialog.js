"use strict";sap.ui.define(["sap/feedback/ui/thirdparty/sap-px/pxapi","sap/m/library","./Ui5ControlFactory","../common/Constants","../data/AppContextData"],function(t,e,n,i,o){"use strict";function r(t){return t&&t.__esModule&&typeof t.default!=="undefined"?t.default:t}function a(t){"@babel/helpers - typeof";return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,c(i.key),i)}}function l(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=v(t,"string");return"symbol"==typeof e?e:e+""}function v(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var f=t["PushType"];var y=e["ButtonType"];var h=e["DialogType"];var p=r(n);var m=r(i);var g=r(o);var I=function(){function t(e){s(this,t);this._resourceBundle=e}return l(t,[{key:"surveyInvitationDialogShowCallback",value:function t(e){try{var n=this;var i=new Promise(function(t){return n._resolveSurveyInvitation=t});var o=function(){if(e.showInvitation){n.showInvitationDialog(e.pushType)}else{return Promise.resolve(n.sendInvitationCallbackResponse(true)).then(function(){})}}();return Promise.resolve(o&&o.then?o.then(function(){return i}):i)}catch(t){return Promise.reject(t)}}},{key:"showInvitationDialog",value:function t(e){if(!this._invitationDialog){this._invitationDialog=this.createInvitationDialog()}if(!this._invitationDialog.isOpen()){this.setDismissButtonText(e);this._invitationDialog.open()}}},{key:"setDismissButtonText",value:function t(e){var n=this.getText("YOUR_OPINION_NOTNOW");if(e===f.timedPush){n=this.getText("YOUR_OPINION_ASKLATERBUTTON")}this._invitationDialog.getEndButton().setText(n)}},{key:"onInvitationDialogClose",value:function t(e){try{var n=this;n._invitationDialog.close();return Promise.resolve(n.sendInvitationCallbackResponse(e)).then(function(){})}catch(t){return Promise.reject(t)}}},{key:"sendInvitationCallbackResponse",value:function t(e){try{var n=this;return Promise.resolve(g.getData()).then(function(t){n._resolveSurveyInvitation({appContextData:t,surveyUser:e})})}catch(t){return Promise.reject(t)}}},{key:"getText",value:function t(e){var n;return(n=this._resourceBundle.getText(e))!==null&&n!==void 0?n:e}},{key:"createFeedbackButton",value:function t(){var e=this;return p.createButton({type:y.Emphasized,text:this.getText("YOUR_OPINION_PROVIDEBUTTON"),press:function t(){e.onInvitationDialogClose(true)}})}},{key:"createDismissButton",value:function t(){var e=this;return p.createButton({text:this.getText("YOUR_OPINION_NOTNOW"),press:function t(){e.onInvitationDialogClose(false)}})}},{key:"createInvitationDialog",value:function t(){return p.createDialog({type:h.Message,title:this.getText("YOUR_OPINION_TITLE"),content:p.createFormattedText({htmlText:this.getText("YOUR_OPINION_TEXT")}),beginButton:this.createFeedbackButton(),endButton:this.createDismissButton(),escapeHandler:this.handleEscape.bind(this)},m.SURVEY_INVITATION_DIALOG_ID)}},{key:"handleEscape",value:function t(e){e.resolve();this.onInvitationDialogClose(false)}}])}();return I});
//# sourceMappingURL=InvitationDialog.js.map