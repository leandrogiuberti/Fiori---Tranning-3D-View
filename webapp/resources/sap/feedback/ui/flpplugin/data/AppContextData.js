"use strict";sap.ui.define(["sap/base/Log","sap/ushell/services/AppConfiguration","./ThemeData","../common/Constants","../common/UI5Util","../common/Util"],function(e,t,r,n,o,a){"use strict";function p(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}function i(e){"@babel/helpers - typeof";return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function l(e,t,r){return t&&A(e.prototype,t),r&&A(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t=s(e,"string");return"symbol"==typeof t?t:t+""}function s(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var T=p(r);var _=p(n);var E=p(o);var m=p(a);var L=function(){function r(){u(this,r)}return l(r,null,[{key:"getData",value:function e(){try{var t=this;return Promise.resolve(t.calculateAppContextData())}catch(e){return Promise.reject(e)}}},{key:"calculateAppContextData",value:function t(){try{var r=this;return Promise.resolve(E.getCurrentApp()).then(function(t){if(t){if(r.isAppTypeSupported(t.applicationType.toLowerCase())){return Promise.resolve(r.getAppInfo(t)).then(function(e){return r.getContextData(e)})}else{e.warning(_.WARNING.UNSUPPORTED_APP_TYPE,undefined,_.COMPONENT.APP_CONTEXT_DATA);return r._appContextData}}else{e.error(_.ERROR.CURRENT_APP_NOT_AVAILABLE,undefined,_.COMPONENT.APP_CONTEXT_DATA);throw new Error(_.ERROR.CURRENT_APP_NOT_AVAILABLE)}})}catch(e){return Promise.reject(e)}}},{key:"isAppTypeSupported",value:function e(t){return _.SUPPORTED_APP_TYPES.indexOf(t)>-1}},{key:"getAppInfo",value:function e(r){try{return Promise.resolve(r.getInfo(["appId","appVersion","appSupportInfo","technicalAppComponentId","appFrameworkId","appFrameworkVersion"])).then(function(e){var r=e;if(r){var n=t.getMetadata();if(n!==null&&n!==void 0&&n.title){r.appTitle=n.title}if((r===null||r===void 0?void 0:r.appId)===_.LAUNCHPAD_VALUE){r.appTitle=m.stringToTitleCase(r.appId)}}return r})}catch(e){return Promise.reject(e)}}},{key:"getContextData",value:function e(t){try{var r=this;var n={};n.previousTheme=T.getPreviousTheme();n.theme=E.getTheme();n.languageTag=r.getLanguage();if(t){n.appFrameworkId=m.convertAppFrameworkTypeToId(t["appFrameworkId"]);n.appFrameworkVersion=t["appFrameworkVersion"]||_.DEFAULT_VALUE_NA;n.appId=t["appId"]||_.DEFAULT_VALUE_NA;n.appTitle=t["appTitle"]||_.DEFAULT_VALUE_NA;n.technicalAppComponentId=t["technicalAppComponentId"]||_.DEFAULT_VALUE_NA;n.appVersion=t["appVersion"]||_.DEFAULT_VALUE_NA;n.appSupportInfo=t["appSupportInfo"]||_.DEFAULT_VALUE_NA}else{n.appFrameworkId=m.convertAppFrameworkTypeToId(undefined);n.appFrameworkVersion=_.DEFAULT_VALUE_NA;n.appId=_.DEFAULT_VALUE_NA;n.appTitle=_.DEFAULT_VALUE_NA;n.technicalAppComponentId=_.DEFAULT_VALUE_NA;n.appVersion=_.DEFAULT_VALUE_NA;n.appSupportInfo=_.DEFAULT_VALUE_NA}return Promise.resolve(n)}catch(e){return Promise.reject(e)}}},{key:"getLanguage",value:function e(){return m.formatLanguageTag(E.getLanguage())}}])}();c(L,"_appContextData",{appFrameworkId:_.DEFAULT_VALUE_NA,appFrameworkVersion:_.DEFAULT_VALUE_NA,theme:_.DEFAULT_VALUE_NA,appId:_.DEFAULT_VALUE_NA,appTitle:_.DEFAULT_VALUE_NA,languageTag:_.DEFAULT_VALUE_NA,technicalAppComponentId:_.DEFAULT_VALUE_NA,appVersion:_.DEFAULT_VALUE_NA,appSupportInfo:_.DEFAULT_VALUE_NA});return L});
//# sourceMappingURL=AppContextData.js.map