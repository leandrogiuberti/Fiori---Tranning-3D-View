{"version":3,"file":"Application-dbg.js","names":["sap","ui","define","ODataModelVersion","Application","constructor","rootComponent","this","_rootComponent","model","getModel","_oDataModelVersion","isA","V4","V2","getRootComponent","fetchDetails","bODataV4","serviceUrl","getServiceUrl","sServiceUrl","hash","window","hasher","getHash","sapApp","getManifestEntry","componentName","id","hashPartial","split","navigationURI","floorplan","semanticObject","action","includes","entitySet","entitySetWithObjectContext","getEntityRelatedInfo","searchParams","URLSearchParams","variantParameter","get","floorPlan","odataModel","getInstance","instance","Error","_resetInstance","__exports","__esModule"],"sources":["Application.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport Component from \"sap/ui/core/Component\";\nimport V2ODataModel from \"sap/ui/model/odata/v2/ODataModel\";\nimport V4ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\n\ntype Model = V2ODataModel | V4ODataModel;\n\ntype ObjectPageApplication = {\n\trootComponent: Component;\n\tfloorPlan: string;\n\todataModel: string;\n\tentitySet: string;\n\tserviceUrl: string;\n\tentitySetWithObjectContext: string;\n\tcomponentName: string;\n\tsemanticObject: string;\n\taction: string;\n\tvariantParameter: string | null;\n\tnavigationURI: string | null;\n};\n\nexport enum ODataModelVersion {\n\tV2 = \"V2\",\n\tV4 = \"V4\"\n}\n\nexport type LibVersionInfo = {\n\tbuildTimestamp: string;\n\tname: string;\n\tscmRevision: string;\n\tversion: string;\n};\n\n/**\n * Abstract class for Application Info\n * Provides methods to validate card generation, retrieve entity-related information,\n * and fetch details about the application.\n * @abstract\n */\nexport abstract class Application {\n\tstatic instance: Application | null;\n\t_oDataModelVersion: ODataModelVersion;\n\t_rootComponent: Component;\n\tstatic floorplan: string;\n\n\tpublic abstract validateCardGeneration(): boolean;\n\tpublic abstract getEntityRelatedInfo(): { entitySet: string; entitySetWithObjectContext: string };\n\n\t/**\n\t * Constructor for the class Application\n\t * @param {Component} rootComponent - The root component of the application\n\t */\n\tconstructor(rootComponent: Component) {\n\t\tthis._rootComponent = rootComponent;\n\t\tconst model = rootComponent.getModel() as Model;\n\t\tthis._oDataModelVersion = model.isA<V4ODataModel>(\"sap.ui.model.odata.v4.ODataModel\") ? ODataModelVersion.V4 : ODataModelVersion.V2;\n\t}\n\n\t/**\n\t * Returns the root component of the application\n\t */\n\tgetRootComponent() {\n\t\treturn this._rootComponent;\n\t}\n\n\t/**\n\t * Fetches details for the given application eg: Object Page, Freestyle\n\t */\n\tfetchDetails(): ObjectPageApplication {\n\t\tconst model = this._rootComponent.getModel();\n\t\tconst bODataV4 = this._oDataModelVersion === ODataModelVersion.V4;\n\t\tconst serviceUrl = bODataV4\n\t\t\t? (model as V4ODataModel).getServiceUrl()\n\t\t\t: (model as unknown as { V2ODataModel: V2ODataModel; sServiceUrl: string }).sServiceUrl;\n\t\tconst hash = window.hasher.getHash();\n\t\tconst sapApp = this._rootComponent.getManifestEntry(\"sap.app\");\n\t\tconst componentName = sapApp.id;\n\t\tconst [hashPartial] = hash.split(\"&/\");\n\t\tconst navigationURI = Application.floorplan === \"FreeStyle\" ? hashPartial[1] : null;\n\t\tconst [semanticObject, action] = hashPartial.includes(\"?\") ? hashPartial.split(\"?\")[0].split(\"-\") : hashPartial.split(\"-\");\n\t\tconst { entitySet, entitySetWithObjectContext } = this.getEntityRelatedInfo();\n\t\tconst searchParams = new URLSearchParams(hash.split(\"?\")[1]);\n\t\tconst variantParameter = searchParams.get(\"sap-appvar-id\");\n\n\t\treturn {\n\t\t\trootComponent: this._rootComponent,\n\t\t\tfloorPlan: Application.floorplan,\n\t\t\todataModel: bODataV4 ? ODataModelVersion.V4 : ODataModelVersion.V2,\n\t\t\tentitySet,\n\t\t\tserviceUrl,\n\t\t\tentitySetWithObjectContext: entitySetWithObjectContext,\n\t\t\tcomponentName,\n\t\t\tsemanticObject,\n\t\t\taction,\n\t\t\tvariantParameter,\n\t\t\tnavigationURI\n\t\t};\n\t}\n\n\t/**\n\t * Gets the singleton instance of the Application class.\n\t *\n\t * @returns {Application} - The singleton instance of the Application class.\n\t * @throws {Error} - Throws an error if the instance is not found.\n\t */\n\tpublic static getInstance(): Application {\n\t\tif (Application.instance) {\n\t\t\treturn Application.instance;\n\t\t}\n\n\t\tthrow new Error(\"Application instance not found\");\n\t}\n\n\t/**\n\t * for testing purposes only\n\t */\n\t_resetInstance() {\n\t\tApplication.instance = null;\n\t}\n}\n"],"mappings":";;;;AAAA,aAAAA,IAAAC,GAAAC,OAAA,+BAwBYC,EAAiB,SAAjBA,KAAiB,WAAjBA,EAAiB,kBAAjBA,CAAiB,EAAjBA,GAAiB,IAkBtB,MAAeC,EAarBC,YAAYC,GACXC,KAAKC,eAAiBF,EACtB,MAAMG,EAAQH,EAAcI,WAC5BH,KAAKI,mBAAqBF,EAAMG,IAAkB,oCAAsCT,EAAkBU,GAAKV,EAAkBW,EAClI,CAKAC,mBACC,OAAOR,KAAKC,cACb,CAKAQ,eACC,MAAMP,EAAQF,KAAKC,eAAeE,WAClC,MAAMO,EAAWV,KAAKI,qBAAuBR,EAAkBU,GAC/D,MAAMK,EAAaD,EACfR,EAAuBU,gBACvBV,EAAyEW,YAC7E,MAAMC,EAAOC,OAAOC,OAAOC,UAC3B,MAAMC,EAASlB,KAAKC,eAAekB,iBAAiB,WACpD,MAAMC,EAAgBF,EAAOG,GAC7B,MAAOC,GAAeR,EAAKS,MAAM,MACjC,MAAMC,EAAgB3B,EAAY4B,YAAc,YAAcH,EAAY,GAAK,KAC/E,MAAOI,EAAgBC,GAAUL,EAAYM,SAAS,KAAON,EAAYC,MAAM,KAAK,GAAGA,MAAM,KAAOD,EAAYC,MAAM,KACtH,MAAMM,UAAEA,EAASC,2BAAEA,GAA+B9B,KAAK+B,uBACvD,MAAMC,EAAe,IAAIC,gBAAgBnB,EAAKS,MAAM,KAAK,IACzD,MAAMW,EAAmBF,EAAaG,IAAI,iBAE1C,MAAO,CACNpC,cAAeC,KAAKC,eACpBmC,UAAWvC,EAAY4B,UACvBY,WAAY3B,EAAWd,EAAkBU,GAAKV,EAAkBW,GAChEsB,YACAlB,aACAmB,2BAA4BA,EAC5BV,gBACAM,iBACAC,SACAO,mBACAV,gBAEF,CAQA,kBAAcc,GACb,GAAIzC,EAAY0C,SAAU,CACzB,OAAO1C,EAAY0C,QACpB,CAEA,MAAM,IAAIC,MAAM,iCACjB,CAKAC,iBACC5C,EAAY0C,SAAW,IACxB,EACA,IAAAG,EAAA,CAAAC,WAAA,MAAAD,EAAA9C,oBAAA8C,EAAA7C,cAAA,OAAA6C,CAAA","ignoreList":[]}