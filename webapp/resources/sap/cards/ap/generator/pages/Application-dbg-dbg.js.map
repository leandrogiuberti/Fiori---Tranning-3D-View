{"version":3,"file":"Application-dbg-dbg.js","names":["sap","ui","define","ODataModelVersion","Application","constructor","rootComponent","_rootComponent","model","getModel","_oDataModelVersion","isA","V4","V2","getRootComponent","fetchDetails","bODataV4","serviceUrl","getServiceUrl","sServiceUrl","hash","window","hasher","getHash","sapApp","getManifestEntry","componentName","id","hashPartial","split","navigationURI","floorplan","semanticObject","action","includes","entitySet","entitySetWithObjectContext","getEntityRelatedInfo","searchParams","URLSearchParams","variantParameter","get","floorPlan","odataModel","getInstance","instance","Error","_resetInstance","__exports","__esModule"],"sources":["Application.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport Component from \"sap/ui/core/Component\";\nimport V2ODataModel from \"sap/ui/model/odata/v2/ODataModel\";\nimport V4ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\n\ntype Model = V2ODataModel | V4ODataModel;\n\ntype ObjectPageApplication = {\n\trootComponent: Component;\n\tfloorPlan: string;\n\todataModel: string;\n\tentitySet: string;\n\tserviceUrl: string;\n\tentitySetWithObjectContext: string;\n\tcomponentName: string;\n\tsemanticObject: string;\n\taction: string;\n\tvariantParameter: string | null;\n\tnavigationURI: string | null;\n};\n\nexport enum ODataModelVersion {\n\tV2 = \"V2\",\n\tV4 = \"V4\"\n}\n\nexport type LibVersionInfo = {\n\tbuildTimestamp: string;\n\tname: string;\n\tscmRevision: string;\n\tversion: string;\n};\n\n/**\n * Abstract class for Application Info\n * Provides methods to validate card generation, retrieve entity-related information,\n * and fetch details about the application.\n * @abstract\n */\nexport abstract class Application {\n\tstatic instance: Application | null;\n\t_oDataModelVersion: ODataModelVersion;\n\t_rootComponent: Component;\n\tstatic floorplan: string;\n\n\tpublic abstract validateCardGeneration(): boolean;\n\tpublic abstract getEntityRelatedInfo(): { entitySet: string; entitySetWithObjectContext: string };\n\n\t/**\n\t * Constructor for the class Application\n\t * @param {Component} rootComponent - The root component of the application\n\t */\n\tconstructor(rootComponent: Component) {\n\t\tthis._rootComponent = rootComponent;\n\t\tconst model = rootComponent.getModel() as Model;\n\t\tthis._oDataModelVersion = model.isA<V4ODataModel>(\"sap.ui.model.odata.v4.ODataModel\") ? ODataModelVersion.V4 : ODataModelVersion.V2;\n\t}\n\n\t/**\n\t * Returns the root component of the application\n\t */\n\tgetRootComponent() {\n\t\treturn this._rootComponent;\n\t}\n\n\t/**\n\t * Fetches details for the given application eg: Object Page, Freestyle\n\t */\n\tfetchDetails(): ObjectPageApplication {\n\t\tconst model = this._rootComponent.getModel();\n\t\tconst bODataV4 = this._oDataModelVersion === ODataModelVersion.V4;\n\t\tconst serviceUrl = bODataV4\n\t\t\t? (model as V4ODataModel).getServiceUrl()\n\t\t\t: (model as unknown as { V2ODataModel: V2ODataModel; sServiceUrl: string }).sServiceUrl;\n\t\tconst hash = window.hasher.getHash();\n\t\tconst sapApp = this._rootComponent.getManifestEntry(\"sap.app\");\n\t\tconst componentName = sapApp.id;\n\t\tconst [hashPartial] = hash.split(\"&/\");\n\t\tconst navigationURI = Application.floorplan === \"FreeStyle\" ? hashPartial[1] : null;\n\t\tconst [semanticObject, action] = hashPartial.includes(\"?\") ? hashPartial.split(\"?\")[0].split(\"-\") : hashPartial.split(\"-\");\n\t\tconst { entitySet, entitySetWithObjectContext } = this.getEntityRelatedInfo();\n\t\tconst searchParams = new URLSearchParams(hash.split(\"?\")[1]);\n\t\tconst variantParameter = searchParams.get(\"sap-appvar-id\");\n\n\t\treturn {\n\t\t\trootComponent: this._rootComponent,\n\t\t\tfloorPlan: Application.floorplan,\n\t\t\todataModel: bODataV4 ? ODataModelVersion.V4 : ODataModelVersion.V2,\n\t\t\tentitySet,\n\t\t\tserviceUrl,\n\t\t\tentitySetWithObjectContext: entitySetWithObjectContext,\n\t\t\tcomponentName,\n\t\t\tsemanticObject,\n\t\t\taction,\n\t\t\tvariantParameter,\n\t\t\tnavigationURI\n\t\t};\n\t}\n\n\t/**\n\t * Gets the singleton instance of the Application class.\n\t *\n\t * @returns {Application} - The singleton instance of the Application class.\n\t * @throws {Error} - Throws an error if the instance is not found.\n\t */\n\tpublic static getInstance(): Application {\n\t\tif (Application.instance) {\n\t\t\treturn Application.instance;\n\t\t}\n\n\t\tthrow new Error(\"Application instance not found\");\n\t}\n\n\t/**\n\t * for testing purposes only\n\t */\n\t_resetInstance() {\n\t\tApplication.instance = null;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}