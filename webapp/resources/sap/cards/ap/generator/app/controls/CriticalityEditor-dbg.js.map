{"version":3,"file":"CriticalityEditor-dbg.js","names":["sap","ui","define","Button","ComboBox","CustomListItem","HBox","Input","List","Text","VBox","Control","CoreElement","ListItem","sap_ui_core_library","Filter","Sorter","JSONModel","____helpers_IntegrationCardHelper","ValueState","getPreviewItems","CriticalityEditor","extend","renderer","apiVersion","render","rm","control","getType","addButton","setVisible","openStart","openEnd","renderControl","list","close","metadata","properties","type","selectionKeys","defaultValue","navigationSelectionKeys","items","aggregations","multiple","visibility","events","change","parameters","value","isCalcuationType","selectedItem","selectionChange","constructor","_constructor","settings","Control.prototype.constructor.call","this","setCriticalityModel","init","_init","showSeparators","showNoData","propertyComboBox","valueState","valueStateText","event","handleComboBoxEvents","call","width","source","getSource","bindingContext","getBindingContext","path","getPath","model","getModel","getProperty","fireEvent","getItems","activeCalculation","_idNavigationComboBox","visible","addStyleClass","separatorColon","text","criticalityComboBox","selectedKey","getSelectedKey","sourceCriticalityCalculationPath","setProperty","String","getObject","isSelectedKey","criticalityCalculator","justifyContent","textAlign","placeholder","key","press","icon","onAddButtonClicked","bind","deleteButton","onDeleteButtonClicked","onAfterRendering","_onAfterRendering","entityData","JSON","parse","stringify","getSelectionKeys","selectPropertyText","selectOthersText","forEach","entity","nameKey","setSelectionKeysMap","name","labelKey","label","category","isPotentialCriticality","mergedEntityData","concat","staticCriticality","criticalityComboBoxModel","setData","refresh","setSelectionKeys","_setSelectionKeys","setAggregation","getBindingInfo","propertyBindingPath","getBindingPath","propertyFilter","bindAggregation","sorter","length","filters","factory","setModel","getCriticalityModel","_getCriticalityModel","setItems","_setItems","itemsMap","bindProperty","setWidth","bindingPath","bindItems","template","content","renderType","_handleComboBoxEvents","isNavigation","controlId","getParameter","getElementById","group","navigationProperties","isNavigationalProperty","hasNavigationProperty","navigationKeyForId","propertyKeyForId","navProperty","filter","prop","navigationalPropertiesForId","isNavigationForId","previewItems","isItemNotSelected","includes","setValueStateForModel","_getInternalModel","_getItems","_onAddButtonClicked","boundData","push","_onDeleteButtonClicked","itemBindingPath","sourceCriticalityPropertyName","criticalityData","index","findIndex","data","propertyName","splice","slice","_isPotentialCriticality","property","_setCriticalityModel","criticalityCategory","_hasNavigationProperty","propertyToCheck","some","_setValueStateForModel","i18nModel","informativeMessage","item","itemName","None","undefined","Information"],"sources":["CriticalityEditor.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport Button from \"sap/m/Button\";\nimport ComboBox from \"sap/m/ComboBox\";\nimport CustomListItem from \"sap/m/CustomListItem\";\nimport HBox from \"sap/m/HBox\";\nimport Input from \"sap/m/Input\";\nimport List from \"sap/m/List\";\nimport Text from \"sap/m/Text\";\nimport VBox from \"sap/m/VBox\";\nimport type Event from \"sap/ui/base/Event\";\nimport { PropertyBindingInfo } from \"sap/ui/base/ManagedObject\";\nimport Control, { $ControlSettings } from \"sap/ui/core/Control\";\nimport type { MetadataOptions } from \"sap/ui/core/Element\";\nimport CoreElement from \"sap/ui/core/Element\";\nimport ListItem from \"sap/ui/core/ListItem\";\nimport RenderManager from \"sap/ui/core/RenderManager\";\nimport { ValueState } from \"sap/ui/core/library\";\nimport type Context from \"sap/ui/model/Context\";\nimport Filter from \"sap/ui/model/Filter\";\nimport type Model from \"sap/ui/model/Model\";\nimport Sorter from \"sap/ui/model/Sorter\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type ResourceModel from \"sap/ui/model/resource/ResourceModel\";\nimport { getPreviewItems } from \"../../helpers/IntegrationCardHelper\";\nimport type { NavigationParameter, Property } from \"../../types/PropertyTypes\";\n\nexport type CriticalityOptions = {\n\tname: string;\n\tvalue?: string;\n\tactiveCalculation?: boolean;\n\tisNavigationForId?: boolean;\n\tnavigationKeyForId?: string;\n\tpropertyKeyForId?: string;\n\tcriticality?: string;\n\tisNavigationForDescription?: boolean;\n\tnavigationalPropertiesForId?: Property[];\n\tvalueState: ValueState;\n\tvalueStateText: string;\n\tnavigationValueState?: ValueState;\n\tnavigationValueStateText?: string;\n};\n\nexport type PropertyInfo = {\n\tlabel?: string;\n\ttype?: string;\n\tname?: string;\n\tvalue?: string | number;\n\tcategory?: string;\n};\n\nexport default interface ICriticalityEditor {\n\taddButton: Button;\n\tlist: List;\n\tgetType(): string;\n\tgetSelectionKeys(): object;\n\tgetItems(): Array<CriticalityOptions>;\n}\n\nexport interface CriticalitySettings extends $ControlSettings {\n\ttype: string;\n\tselectionKeys: object;\n\titems: object;\n\tchange?: (event: CriticalityEditorChangeEvent) => void;\n\tnavigationSelectionKeys: object;\n}\ninterface CriticalityEditorChangeEventParameters {\n\tvalue?: object;\n\tisCalcuationType?: boolean;\n\tselectedItem?: object;\n}\n\ninterface SelectionKeyMap {\n\tname?: string;\n\tlabel?: string;\n}\n\ntype CriticalityEditorChangeEvent = Event<CriticalityEditorChangeEventParameters>;\n\n/**\n * @namespace sap.cards.ap.generator.app.controls\n */\nexport default class CriticalityEditor extends Control {\n\tlist!: List;\n\taddButton!: Button;\n\tseparatorColon!: Text;\n\tdeleteButton!: Button;\n\tpropertyComboBox!: ComboBox;\n\tsetSelectionKeysMap!: SelectionKeyMap;\n\tpropertyFilter!: Filter;\n\titemsMap!: CriticalityOptions;\n\tcriticalityComboBox!: ComboBox;\n\tcriticalityCalculator!: VBox;\n\tcriticalityComboBoxModel!: ComboBox;\n\tstaticCriticality!: Array<PropertyInfo>;\n\t_idNavigationComboBox!: ComboBox;\n\n\tstatic readonly metadata: MetadataOptions = {\n\t\tproperties: {\n\t\t\ttype: \"string\",\n\t\t\tselectionKeys: { type: \"object\", defaultValue: {} },\n\t\t\tnavigationSelectionKeys: { type: \"object\", defaultValue: {} },\n\t\t\titems: { type: \"object\", defaultValue: {} }\n\t\t},\n\t\taggregations: {\n\t\t\tlist: { type: \"sap.m.List\", multiple: false, visibility: \"hidden\" }\n\t\t},\n\t\tevents: {\n\t\t\tchange: {\n\t\t\t\tparameters: {\n\t\t\t\t\tvalue: { type: \"object\" },\n\t\t\t\t\tisCalcuationType: { type: \"boolean\" },\n\t\t\t\t\tselectedItem: { type: \"object\" }\n\t\t\t\t}\n\t\t\t},\n\t\t\tselectionChange: {\n\t\t\t\tparameters: {\n\t\t\t\t\tvalue: { type: \"int\" }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tconstructor(settings: CriticalitySettings) {\n\t\tsuper(settings);\n\t\tthis.setCriticalityModel();\n\t}\n\n\tstatic renderer = {\n\t\tapiVersion: 2,\n\t\trender: function (rm: RenderManager, control: ICriticalityEditor): void {\n\t\t\tif (control.getType() === \"COMPACT\") {\n\t\t\t\tcontrol.addButton.setVisible(false);\n\t\t\t}\n\t\t\trm.openStart(\"div\", control);\n\t\t\trm.openEnd();\n\t\t\trm.renderControl(control.list);\n\t\t\trm.renderControl(control.addButton);\n\t\t\trm.close(\"div\");\n\t\t}\n\t};\n\n\t/**\n\t * Initializes the CriticalityEditor custom control\n\t *\n\t * This method sets up various controls and event handlers used by the methods in this control\n\t *\n\t * @returns {void}\n\t */\n\n\tinit(): void {\n\t\tthis.list = new List({\n\t\t\tshowSeparators: \"Inner\",\n\t\t\tshowNoData: false\n\t\t});\n\t\tthis.propertyComboBox = new ComboBox({\n\t\t\tvalueState: \"{= ${valueState} }\",\n\t\t\tvalueStateText: \"{= ${valueStateText} }\",\n\t\t\tselectionChange: (event: Event) => {\n\t\t\t\tthis.handleComboBoxEvents.call(this, event, false);\n\t\t\t},\n\t\t\twidth: \"100%\",\n\t\t\tchange: (event) => {\n\t\t\t\tconst source: ComboBox = event.getSource();\n\t\t\t\tconst bindingContext = source.getBindingContext() as Context;\n\t\t\t\tconst path = bindingContext?.getPath() || \"\";\n\t\t\t\tconst model = this.getModel() as JSONModel;\n\t\t\t\tconst selectedItem = model.getProperty(path);\n\t\t\t\tthis.fireEvent(\"change\", {\n\t\t\t\t\tvalue: this.getItems(),\n\t\t\t\t\tselectedItem,\n\t\t\t\t\tisCalcuationType: model.getProperty(path)?.activeCalculation || false\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tthis._idNavigationComboBox = new ComboBox({\n\t\t\tvisible: \"{= !!${isNavigationForId} }\",\n\t\t\twidth: \"100%\",\n\t\t\tvalueState: \"{= ${navigationValueState} }\",\n\t\t\tvalueStateText: \"{= ${navigationValueStateText} }\",\n\t\t\tchange: () => {\n\t\t\t\tthis.fireEvent(\"change\", {\n\t\t\t\t\tvalue: this.getItems()\n\t\t\t\t});\n\t\t\t},\n\t\t\tselectionChange: (event: Event) => {\n\t\t\t\tthis.handleComboBoxEvents.call(this, event, true);\n\t\t\t}\n\t\t}).addStyleClass(\"sapUiTinyMarginBegin\");\n\n\t\tthis.separatorColon = new Text({ text: \":\" }).addStyleClass(\"sapUiTinyMarginTop sapUiTinyMarginBeginEnd\");\n\n\t\tthis.criticalityComboBox = new ComboBox({\n\t\t\twidth: \"100%\",\n\t\t\tchange: (event) => {\n\t\t\t\tconst source: ComboBox = event.getSource();\n\t\t\t\tconst bindingContext = source.getBindingContext() as Context;\n\t\t\t\tconst path = bindingContext?.getPath() || \"\";\n\t\t\t\tconst model = this.getModel() as JSONModel;\n\t\t\t\tconst selectedKey = event.getSource().getSelectedKey();\n\t\t\t\tif (this.getType() === \"COMPACT\") {\n\t\t\t\t\tconst sourceCriticalityCalculationPath =\n\t\t\t\t\t\t\"/configuration/advancedFormattingOptions/sourceCriticalityProperty/0/activeCalculation\";\n\t\t\t\t\tmodel.setProperty(\n\t\t\t\t\t\tsourceCriticalityCalculationPath,\n\t\t\t\t\t\tString(bindingContext?.getObject(\"hostCriticality\")) === \"Calculation\"\n\t\t\t\t\t);\n\t\t\t\t\tmodel.setProperty(\"/configuration/advancedFormattingOptions/selectedKeyCriticality\", selectedKey);\n\t\t\t\t} else {\n\t\t\t\t\tmodel.getProperty(path).activeCalculation = String(bindingContext?.getObject(\"criticality\")) === \"Calculation\";\n\t\t\t\t\tmodel.setProperty(\"/configuration/advancedFormattingOptions/sourceCriticalityProperty/0/hostCriticality\", selectedKey);\n\t\t\t\t}\n\n\t\t\t\tconst isSelectedKey = selectedKey ? true : false;\n\t\t\t\tmodel.setProperty(\"/configuration/advancedFormattingOptions/isCriticalityApplied\", isSelectedKey);\n\n\t\t\t\tthis.fireEvent(\"change\", {\n\t\t\t\t\tvalue: this.getItems(),\n\t\t\t\t\tisCalcuationType: this.getModel()?.getProperty(path)?.activeCalculation || false\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.criticalityCalculator = new VBox({\n\t\t\tvisible: \"{= !!${activeCalculation} }\",\n\t\t\titems: [\n\t\t\t\tnew HBox({\n\t\t\t\t\tjustifyContent: \"SpaceAround\",\n\t\t\t\t\titems: [\n\t\t\t\t\t\tnew Text({ textAlign: \"End\", width: \"150px\", text: \"{i18n>CRITICALITY_CONTROL_TOL_RANGE}\" }).addStyleClass(\n\t\t\t\t\t\t\t\"sapUiTinyMarginTop\"\n\t\t\t\t\t\t),\n\t\t\t\t\t\tnew Input({\n\t\t\t\t\t\t\tvalue: \"{toleranceRangeLowValue}\",\n\t\t\t\t\t\t\tplaceholder: \"{i18n>CRITICALITY_CONTROL_LOW}\",\n\t\t\t\t\t\t\twidth: \"80px\"\n\t\t\t\t\t\t}).addStyleClass(\"sapUiTinyMarginBeginEnd\"),\n\t\t\t\t\t\tnew Input({\n\t\t\t\t\t\t\tvalue: \"{toleranceRangeHighValue}\",\n\t\t\t\t\t\t\tplaceholder: \"{i18n>CRITICALITY_CONTROL_HIGH}\",\n\t\t\t\t\t\t\twidth: \"80px\"\n\t\t\t\t\t\t}).addStyleClass(\"sapUiTinyMarginBeginEnd\")\n\t\t\t\t\t]\n\t\t\t\t}),\n\t\t\t\tnew HBox({\n\t\t\t\t\tjustifyContent: \"SpaceAround\",\n\t\t\t\t\titems: [\n\t\t\t\t\t\tnew Text({ textAlign: \"End\", width: \"150px\", text: \"{i18n>CRITICALITY_CONTROL_DEV_RANGE}\" }).addStyleClass(\n\t\t\t\t\t\t\t\"sapUiTinyMarginTop\"\n\t\t\t\t\t\t),\n\t\t\t\t\t\tnew Input({\n\t\t\t\t\t\t\tvalue: \"{deviationRangeLowValue}\",\n\t\t\t\t\t\t\tplaceholder: \"{i18n>CRITICALITY_CONTROL_LOW}\",\n\t\t\t\t\t\t\twidth: \"80px\"\n\t\t\t\t\t\t}).addStyleClass(\"sapUiTinyMarginBeginEnd\"),\n\t\t\t\t\t\tnew Input({\n\t\t\t\t\t\t\tvalue: \"{deviationRangeHighValue}\",\n\t\t\t\t\t\t\tplaceholder: \"{i18n>CRITICALITY_CONTROL_HIGH}\",\n\t\t\t\t\t\t\twidth: \"80px\"\n\t\t\t\t\t\t}).addStyleClass(\"sapUiTinyMarginBeginEnd\")\n\t\t\t\t\t]\n\t\t\t\t}),\n\t\t\t\tnew HBox({\n\t\t\t\t\tjustifyContent: \"SpaceAround\",\n\t\t\t\t\titems: [\n\t\t\t\t\t\tnew Text({\n\t\t\t\t\t\t\ttextAlign: \"End\",\n\t\t\t\t\t\t\twidth: \"150px\",\n\t\t\t\t\t\t\ttext: \"{i18n>CRITICALITY_CONTROL_IMP_DIRECTION}\"\n\t\t\t\t\t\t}).addStyleClass(\"sapUiTinyMarginTop\"),\n\t\t\t\t\t\tnew ComboBox({\n\t\t\t\t\t\t\tvalue: \"{improvementDirection}\",\n\t\t\t\t\t\t\twidth: \"176px\",\n\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\tnew ListItem({ key: \"{i18n>CRITICALITY_CONTROL_MINIMIZE}\", text: \"Minimize\" }),\n\t\t\t\t\t\t\t\tnew ListItem({ key: \"{i18n>CRITICALITY_CONTROL_TARGET}\", text: \"Target\" }),\n\t\t\t\t\t\t\t\tnew ListItem({ key: \"{i18n>CRITICALITY_CONTROL_MAXIMIZE}\", text: \"Maximize\" })\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}).addStyleClass(\"sapUiTinyMarginBeginEnd\")\n\t\t\t\t\t]\n\t\t\t\t}),\n\t\t\t\tnew HBox({\n\t\t\t\t\tjustifyContent: \"End\",\n\t\t\t\t\titems: [\n\t\t\t\t\t\tnew Button({\n\t\t\t\t\t\t\ttext: \"{i18n>CRITICALITY_CONTROL_APPLY}\",\n\t\t\t\t\t\t\twidth: \"176px\",\n\t\t\t\t\t\t\ttype: \"Ghost\",\n\t\t\t\t\t\t\tpress: (event) => {\n\t\t\t\t\t\t\t\tconst source: ComboBox = event.getSource();\n\t\t\t\t\t\t\t\tconst bindingContext = source.getBindingContext() as Context;\n\t\t\t\t\t\t\t\tconst path = bindingContext.getPath() || \"\";\n\t\t\t\t\t\t\t\tthis.fireEvent(\"change\", {\n\t\t\t\t\t\t\t\t\tvalue: this.getItems(),\n\t\t\t\t\t\t\t\t\tisCalcuationType: this.getModel()?.getProperty(path)?.activeCalculation || false\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).addStyleClass(\"sapUiTinyMarginBeginEnd\")\n\t\t\t\t\t]\n\t\t\t\t})\n\t\t\t]\n\t\t}).addStyleClass(\"sapUiTinyMarginBottom\");\n\n\t\tthis.addButton = new Button({\n\t\t\ticon: \"sap-icon://add\",\n\t\t\ttype: \"Transparent\",\n\t\t\tpress: this.onAddButtonClicked.bind(this)\n\t\t});\n\n\t\tthis.deleteButton = new Button({\n\t\t\ticon: \"sap-icon://delete\",\n\t\t\ttype: \"Transparent\",\n\t\t\tpress: this.onDeleteButtonClicked.bind(this)\n\t\t});\n\t}\n\n\t/**\n\t * Performs actions after CriticalityEditor custom control has been rendered\n\t *\n\t * This method is called after the control has been rendered in the UI. It fetches the selection keys\n\t *\n\t * @returns {void}\n\t */\n\n\tonAfterRendering(): void {\n\t\tconst entityData = JSON.parse(JSON.stringify(this.getSelectionKeys()));\n\t\tconst selectPropertyText = this.getModel(\"i18n\")?.getObject(\"CRITICALITY_CONTROL_SELECT_PROP\");\n\t\tconst selectOthersText = this.getModel(\"i18n\")?.getObject(\"CRITICALITY_CONTROL_SELECT_OTHERS\");\n\n\t\tentityData.forEach((entity: PropertyInfo) => {\n\t\t\tconst nameKey = this.setSelectionKeysMap.name as keyof PropertyInfo;\n\t\t\tconst labelKey = this.setSelectionKeysMap.label as keyof PropertyInfo;\n\n\t\t\tentity.category = this.isPotentialCriticality(entity) ? selectPropertyText : selectOthersText;\n\t\t\tentity.name = `{${entity[nameKey]}}`;\n\t\t\tentity.label = String(entity[labelKey]);\n\t\t});\n\n\t\tconst mergedEntityData = entityData.concat(this.staticCriticality);\n\t\tconst criticalityComboBoxModel = this.criticalityComboBox.getModel(\"internal\") as JSONModel;\n\t\tcriticalityComboBoxModel.setData(mergedEntityData, true);\n\t\tcriticalityComboBoxModel.refresh();\n\t}\n\n\t/**\n\t * Sets the selection keys\n\t *\n\t * This method forms the setSelectionKeysMap from selectionKeys binding information,\n\t * and binds aggregation items for ComboBox controls, updates internal model of text criticality ComboBox\n\t * @param {Array<PropertyInfo>} value - The array of selection keys\n\t * @returns {void}\n\t */\n\tsetSelectionKeys(value: Array<PropertyInfo>): void {\n\t\tthis.setAggregation(\"list\", this.list);\n\t\tthis.setProperty(\"selectionKeys\", value);\n\t\tthis.setProperty(\"navigationSelectionKeys\", value);\n\t\tthis.setSelectionKeysMap = this.getBindingInfo(\"selectionKeys\").parameters as SelectionKeyMap;\n\t\tconst propertyBindingPath = this.getBindingPath(\"navigationSelectionKeys\") || \"\";\n\n\t\tthis.propertyFilter = new Filter({\n\t\t\tpath: this.setSelectionKeysMap.name\n\t\t});\n\t\tthis.propertyComboBox.bindAggregation(\"items\", {\n\t\t\tpath: propertyBindingPath,\n\t\t\tsorter: [new Sorter(\"category\", true, true), new Sorter(\"label\", false)],\n\t\t\tlength: 500,\n\t\t\tfilters: this.propertyFilter,\n\t\t\tfactory: () => {\n\t\t\t\treturn new ListItem({\n\t\t\t\t\tkey: \"{\" + this.setSelectionKeysMap.name + \"}\",\n\t\t\t\t\ttext: \"{\" + this.setSelectionKeysMap.label + \"}\"\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tthis._idNavigationComboBox.bindAggregation(\"items\", {\n\t\t\tpath: \"navigationalPropertiesForId/\",\n\t\t\tsorter: new Sorter(\"label\", false),\n\t\t\tlength: 500,\n\t\t\tfactory: function () {\n\t\t\t\treturn new ListItem({\n\t\t\t\t\tkey: \"{name}\",\n\t\t\t\t\ttext: \"{labelWithValue}\"\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tthis.criticalityComboBox.setModel(this.getCriticalityModel(), \"internal\");\n\t\tthis.criticalityComboBox.bindAggregation(\"items\", {\n\t\t\tpath: \"internal>/\",\n\t\t\tsorter: [new Sorter(\"category\", true, true), new Sorter(\"label\", false)],\n\t\t\tlength: 500,\n\t\t\tfactory: function () {\n\t\t\t\treturn new ListItem({\n\t\t\t\t\tkey: \"{internal>name}\",\n\t\t\t\t\ttext: \"{internal>label}\"\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tgetCriticalityModel() {\n\t\treturn new JSONModel(this.staticCriticality);\n\t}\n\n\t/**\n\t * Sets the items property with the selectionKeys provided\n\t * bind items for list control using binding path of items,\n\t * creates a custom layout for each item using a HBox and arranging the content within the HBox according to the specified styles\n\t *\n\t * @param {Array<CriticalityOptions>} selectionKeys - The array of items to be set\n\t * @returns {void}\n\t */\n\n\tsetItems(selectionKeys: Array<CriticalityOptions>): void {\n\t\tthis.setProperty(\"items\", selectionKeys, true);\n\t\tthis.itemsMap = this.getBindingInfo(\"items\").parameters as CriticalityOptions;\n\t\tthis.criticalityComboBox.bindProperty(\"selectedKey\", this.itemsMap.value as PropertyBindingInfo);\n\t\tthis._idNavigationComboBox.bindProperty(\"selectedKey\", { path: \"navigationKeyForId\" });\n\t\tif (this.getType() === \"COMPACT\") {\n\t\t\tthis.criticalityComboBox.setWidth(\"300px\");\n\t\t\tconst length = this.criticalityCalculator.getItems().length;\n\t\t\tif (length > 0) {\n\t\t\t\tthis.criticalityCalculator.getItems()[length - 1].setVisible(false);\n\t\t\t}\n\t\t}\n\n\t\tthis.propertyComboBox.bindProperty(\"selectedKey\", this.itemsMap.name as PropertyBindingInfo);\n\t\tconst bindingPath = this.getBindingPath(\"items\") ?? \"\";\n\t\tthis.list.bindItems({\n\t\t\tpath: bindingPath,\n\t\t\ttemplate: new CustomListItem({\n\t\t\t\tcontent: [\n\t\t\t\t\tnew HBox({\n\t\t\t\t\t\tjustifyContent: \"SpaceAround\",\n\t\t\t\t\t\trenderType: \"Bare\",\n\t\t\t\t\t\titems:\n\t\t\t\t\t\t\tthis.getType() === \"COMPACT\"\n\t\t\t\t\t\t\t\t? [this.criticalityComboBox]\n\t\t\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t\t\t\tthis.propertyComboBox,\n\t\t\t\t\t\t\t\t\t\tthis._idNavigationComboBox,\n\t\t\t\t\t\t\t\t\t\tthis.separatorColon,\n\t\t\t\t\t\t\t\t\t\tthis.criticalityComboBox,\n\t\t\t\t\t\t\t\t\t\tthis.deleteButton\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t}),\n\t\t\t\t\tnew HBox({\n\t\t\t\t\t\tjustifyContent: this.getType() === \"COMPACT\" ? \"Start\" : \"SpaceAround\",\n\t\t\t\t\t\titems: [this.criticalityCalculator]\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t})\n\t\t});\n\t}\n\n\t/**\n\t *\n\t * @param event Event object\n\t * @param editor CriticalityEditor instance\n\t * @param isNavigation boolean flag to check if the event is for navigation\n\t * @returns object\n\t */\n\n\thandleComboBoxEvents(event: Event, isNavigation: boolean = false) {\n\t\tconst controlId = (event.getParameter as (param: string) => string)(\"id\");\n\t\tconst control = CoreElement.getElementById(controlId) as ComboBox;\n\t\tlet selectedKey = control.getSelectedKey();\n\t\tconst source = event.getSource();\n\t\tconst bindingContext = (source as ComboBox).getBindingContext() as Context;\n\t\tconst path = bindingContext?.getPath() || \"\";\n\t\tconst model = this.getModel() as JSONModel;\n\t\tconst group = model.getProperty(path);\n\n\t\tconst navigationProperties: NavigationParameter[] = model.getProperty(\"/configuration/navigationProperty\") || [];\n\t\tconst isNavigationalProperty = this.hasNavigationProperty(navigationProperties, group?.name);\n\t\tif (!isNavigation) {\n\t\t\tgroup.navigationKeyForId = \"\";\n\t\t}\n\t\tif (isNavigationalProperty) {\n\t\t\tgroup.propertyKeyForId = selectedKey;\n\t\t\tconst navProperty = navigationProperties.filter((prop) => prop.name === group?.name);\n\t\t\tgroup.navigationalPropertiesForId = navProperty?.[0]?.properties || [];\n\t\t\tgroup.isNavigationForId = group.navigationalPropertiesForId.length > 0;\n\t\t} else {\n\t\t\tgroup.isNavigationForId = false;\n\t\t}\n\t\tif (isNavigation && selectedKey !== \"\") {\n\t\t\tselectedKey = `${group.name}/${selectedKey}`;\n\t\t}\n\t\tconst previewItems = getPreviewItems(model);\n\t\tconst isItemNotSelected = !previewItems.includes(selectedKey);\n\t\tthis.setValueStateForModel(model, selectedKey, isItemNotSelected);\n\t\tmodel.refresh();\n\t\treturn group;\n\t}\n\n\t/**\n\t * Retrieves the internal model of the CriticalityEditor control\n\t *\n\t * This method checks if the internal model exists. If not, it creates a new JSON model\n\t * and sets it as the internal model. It then returns the internal model\n\t *\n\t * @returns {sap.ui.model.Model} The internal model of the control\n\t */\n\n\tprotected _getInternalModel(): Model {\n\t\tlet model = this.getModel(\"internal\");\n\t\tif (!model) {\n\t\t\tmodel = new JSONModel({});\n\t\t\tthis.setModel(model, \"internal\");\n\t\t}\n\t\treturn model;\n\t}\n\n\t/**\n\t * Retrieves the items from the model\n\t *\n\t * This method fetches the items from the model using the binding path for items\n\t *\n\t * @returns {Array<CriticalityOptions>} An array containing the items retrieved from the model\n\t */\n\n\tgetItems(): Array<CriticalityOptions> {\n\t\tconst path = this.getBindingPath(\"items\") || \"\";\n\t\treturn (this.getModel() as JSONModel).getProperty(path);\n\t}\n\t/**\n\t * Handles the click event of the add button, adds a new item to the array and refreshes the model\n\t *\n\t * @returns {void}\n\t */\n\n\tonAddButtonClicked(): void {\n\t\tconst model = this.getModel();\n\t\tconst path = this.getBindingPath(\"items\") || \"\";\n\t\tif (model) {\n\t\t\tlet boundData = model.getProperty(path);\n\t\t\tif (!boundData) {\n\t\t\t\tboundData = [];\n\t\t\t}\n\t\t\tboundData.push({});\n\t\t\tmodel.refresh();\n\t\t}\n\t}\n\n\t/**\n\t * Handles the click event of the delete button, removes item to be deleted, refreshes the model and fires a change event\n\t *\n\t * @param {Event} event - The event object representing the click event\n\t * @returns {void}\n\t */\n\n\tonDeleteButtonClicked(event: Event): void {\n\t\tlet itemBindingPath = this.getBindingPath(\"items\");\n\t\tconst model = this.getModel() as JSONModel;\n\t\tconst sourceCriticalityPropertyName =\n\t\t\tmodel.getProperty(\"/configuration/advancedFormattingOptions/sourceCriticalityProperty/0/name\") || \"\";\n\t\tconst criticalityData = model.getProperty(\"/configuration/mainIndicatorOptions/criticality\") || [];\n\t\tlet path;\n\n\t\tif (this.getType() === \"COMPACT\") {\n\t\t\tif (sourceCriticalityPropertyName) {\n\t\t\t\tconst index = criticalityData.findIndex((data: CriticalityOptions) => data?.name === sourceCriticalityPropertyName);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tpath = `/configuration/mainIndicatorOptions/criticality/${index}`;\n\t\t\t\t\tmodel.setProperty(\"/configuration/advancedFormattingOptions/sourceCriticalityProperty\", []);\n\t\t\t\t\titemBindingPath = \"/configuration/mainIndicatorOptions/criticality\";\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tconst source: ComboBox = event.getSource();\n\t\t\tconst bindingContext = source.getBindingContext() as Context;\n\t\t\tpath = bindingContext.getPath() || \"\";\n\t\t\tconst propertyName = model.getProperty(path) && model.getProperty(path).name;\n\t\t\tif (propertyName === sourceCriticalityPropertyName) {\n\t\t\t\tmodel.setProperty(\"/configuration/advancedFormattingOptions/sourceCriticalityProperty\", []);\n\t\t\t}\n\t\t}\n\n\t\tif (path && itemBindingPath) {\n\t\t\tmodel.getProperty(itemBindingPath).splice(path.slice(path.length - 1), 1);\n\t\t\tmodel.refresh();\n\t\t\tthis.fireEvent(\"change\", {\n\t\t\t\tvalue: this.getItems()\n\t\t\t});\n\t\t}\n\t}\n\n\tisPotentialCriticality(property: PropertyInfo): boolean {\n\t\tswitch (property.type) {\n\t\t\tcase \"Edm.Date\":\n\t\t\tcase \"Edm.Boolean\":\n\t\t\tcase \"Edm.Guid\":\n\t\t\tcase \"Edm.DateTimeOffset\":\n\t\t\t\treturn false;\n\t\t\tcase \"Edm.Decimal\":\n\t\t\tcase \"Edm.Byte\":\n\t\t\tcase \"Edm.Int32\":\n\t\t\t\tif (typeof property.value === \"number\" && property.value > -2 && property.value < 6) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\tcase \"Edm.String\":\n\t\t\t\tswitch (property.value) {\n\t\t\t\t\tcase null:\n\t\t\t\t\tcase \"-1\":\n\t\t\t\t\tcase \"0\":\n\t\t\t\t\tcase \"1\":\n\t\t\t\t\tcase \"2\":\n\t\t\t\t\tcase \"3\":\n\t\t\t\t\tcase \"4\":\n\t\t\t\t\tcase \"5\":\n\t\t\t\t\tcase \"Positive\":\n\t\t\t\t\tcase \"Negative\":\n\t\t\t\t\tcase \"Neutral\":\n\t\t\t\t\tcase \"Critical\":\n\t\t\t\t\tcase \"VeryNegative\":\n\t\t\t\t\tcase \"VeryPositive\":\n\t\t\t\t\tcase \"Information\":\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Sets the static criticality data\n\t * This method fetches the criticality category and assigns it to the static criticality items.\n\t */\n\tsetCriticalityModel(): void {\n\t\tconst criticalityCategory = this.getModel(\"i18n\")?.getObject(\"CRITICALITY_CONTROL_SELECT_CRITICALITY\");\n\n\t\tthis.staticCriticality = [\n\t\t\t{\n\t\t\t\tname: \"Neutral\",\n\t\t\t\tlabel: \"Neutral\",\n\t\t\t\tcategory: criticalityCategory\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Good\",\n\t\t\t\tlabel: \"Positive\",\n\t\t\t\tcategory: criticalityCategory\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Critical\",\n\t\t\t\tlabel: \"Critical\",\n\t\t\t\tcategory: criticalityCategory\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Error\",\n\t\t\t\tlabel: \"Negative\",\n\t\t\t\tcategory: criticalityCategory\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Calculation\",\n\t\t\t\tlabel: \"Create Calculation\",\n\t\t\t\tcategory: \"Calculation:\"\n\t\t\t}\n\t\t];\n\t}\n\t/**\n\t * Checks if a specific property exists within the given navigation properties.\n\t *\n\t * @param {NavigationParameter[]} navigationProperties - An array of navigation parameters to search through.\n\t * @param {string} propertyToCheck - The name of the property to check for.\n\t * @returns {boolean} True if the property exists in the navigation properties, otherwise false.\n\t */\n\thasNavigationProperty(navigationProperties: NavigationParameter[], propertyToCheck: string): boolean {\n\t\treturn navigationProperties.length > 0 && navigationProperties.some((prop) => prop.name === propertyToCheck);\n\t}\n\n\t/**\n\t * The function sets the ValueState of properties present in advanced formatting panel,\n\t * to ValueState.Information or ValueState.None on the basis of properties present in card preview.\n\t * @param {JSONModel} model - The JSON model containing the card configuration.\n\t * @param {string} selectedKey - The selected key from the ComboBox.\n\t * @param {boolean} isItemNotSelected - Flag indicating if the item is not present in the card preview.\n\t * @returns {void}\n\t */\n\tsetValueStateForModel(model: JSONModel, selectedKey: string, isItemNotSelected: boolean): void {\n\t\tconst criticalityData = model.getProperty(\"/configuration/mainIndicatorOptions/criticality\") || [];\n\t\tconst i18nModel = this.getModel(\"i18n\") as ResourceModel;\n\t\tconst informativeMessage = i18nModel.getObject(\"UNSELECTED_ITEM\");\n\t\tcriticalityData.forEach((item: CriticalityOptions, index: number) => {\n\t\t\tconst itemName = item.navigationKeyForId ? `${item.name}/${item.navigationKeyForId}` : item.name;\n\t\t\tlet isNavigationalProperty: boolean = false;\n\t\t\tif (item.isNavigationForId && item.navigationKeyForId) {\n\t\t\t\tisNavigationalProperty = true;\n\t\t\t}\n\t\t\tif (isItemNotSelected && selectedKey === itemName) {\n\t\t\t\tif (item.valueState === ValueState.None || item.valueState === undefined) {\n\t\t\t\t\tmodel.setProperty(`/configuration/mainIndicatorOptions/criticality/${index}/valueState`, ValueState.Information);\n\t\t\t\t\tmodel.setProperty(`/configuration/mainIndicatorOptions/criticality/${index}/valueStateText`, informativeMessage);\n\t\t\t\t}\n\t\t\t\tif (isNavigationalProperty) {\n\t\t\t\t\tmodel.setProperty(\n\t\t\t\t\t\t`/configuration/mainIndicatorOptions/criticality/${index}/navigationValueState`,\n\t\t\t\t\t\tValueState.Information\n\t\t\t\t\t);\n\t\t\t\t\tmodel.setProperty(\n\t\t\t\t\t\t`/configuration/mainIndicatorOptions/criticality/${index}/navigationValueStateText`,\n\t\t\t\t\t\tinformativeMessage\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else if (!isItemNotSelected && selectedKey === itemName) {\n\t\t\t\tif (item.valueState === ValueState.Information) {\n\t\t\t\t\tmodel.setProperty(`/configuration/mainIndicatorOptions/criticality/${index}/valueState`, ValueState.None);\n\t\t\t\t\tmodel.setProperty(`/configuration/mainIndicatorOptions/criticality/${index}/valueStateText`, \"\");\n\t\t\t\t}\n\t\t\t\tif (isNavigationalProperty) {\n\t\t\t\t\tmodel.setProperty(`/configuration/mainIndicatorOptions/criticality/${index}/navigationValueState`, ValueState.None);\n\t\t\t\t\tmodel.setProperty(`/configuration/mainIndicatorOptions/criticality/${index}/navigationValueStateText`, \"\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n"],"mappings":"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","ignoreList":[]}