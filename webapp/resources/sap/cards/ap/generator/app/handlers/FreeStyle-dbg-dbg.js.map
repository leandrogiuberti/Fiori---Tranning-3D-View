{"version":3,"file":"FreeStyle-dbg-dbg.js","names":["sap","ui","define","sap_cards_ap_common_odata_ODataUtils","____helpers_CardGeneratorModel","____helpers_IntegrationCardHelper","____pages_Application","____utils_CommonUtils","applyServiceDetails","appComponent","Application","getInstance","getRootComponent","freeStyleDialogModel","getDialogModel","setProperty","currentCardManifest","getCurrentCardManifest","isEntityPathChanged","getProperty","configuration","parameters","_entitySet","value","isContextPathChanged","cardManifest","Object","keys","length","undefined","dialog","getCardGeneratorDialog","Promise","resolve","getCardGeneratorDialogModel","then","dialogModel","setModel","createCardManifest","getModel","integrationCardManifest","renderCardPreview","e","reject","onContextPathChange","event","applicationInstance","control","getSource","selectedContextPath","getValue","_temp","fetchDataForObjectContext","onEntitySetPathChange","rootComponent","fetchDetails","selectedEntitySet","serviceUrl","getEntitySetWithContextURLs","entitySetWithContextList","onServiceChange","selectedService","onBackButtonPress","__exports","__esModule"],"sources":["FreeStyle.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport { getEntitySetWithContextURLs } from \"sap/cards/ap/common/odata/ODataUtils\";\nimport type ComboBox from \"sap/m/ComboBox\";\nimport type Event from \"sap/ui/base/Event\";\nimport type { CardManifest } from \"sap/ui/integration/widgets/Card\";\nimport type JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type V2ODataModel from \"sap/ui/model/odata/v2/ODataModel\";\nimport type V4ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport { getCardGeneratorDialogModel } from \"../../helpers/CardGeneratorModel\";\nimport { createCardManifest, getCurrentCardManifest, renderCardPreview } from \"../../helpers/IntegrationCardHelper\";\nimport { Application } from \"../../pages/Application\";\nimport { FreeStyle } from \"../../pages/FreeStyle\";\nimport { getCardGeneratorDialog, getDialogModel } from \"../../utils/CommonUtils\";\n\n/**\n * Handles the service change event.\n *\n * @param {Event} event - The event object triggered by the service change.\n */\nfunction onServiceChange(event: Event) {\n\tconst control: ComboBox = event.getSource();\n\tconst selectedService = control.getValue();\n\tconst freeStyleDialogModel = getDialogModel(\"freeStyle\") as JSONModel;\n\tfreeStyleDialogModel.setProperty(\"/entitySet\", \"\");\n\tfreeStyleDialogModel.setProperty(\"/entitySetWithObjectContext\", \"\");\n\tfreeStyleDialogModel.setProperty(\"/currentService\", selectedService);\n\tfreeStyleDialogModel.setProperty(\"/isApplyServiceDetailsEnabled\", false);\n}\n\n/**\n * Handles the entity set path change event.\n *\n * @param event\n */\nasync function onEntitySetPathChange(event: Event) {\n\tconst applicationInstance = Application.getInstance() as FreeStyle;\n\tconst { rootComponent } = applicationInstance.fetchDetails();\n\tconst control: ComboBox = event.getSource();\n\tconst selectedEntitySet = control.getValue();\n\tconst freeStyleDialogModel = getDialogModel(\"freeStyle\") as JSONModel;\n\tconst serviceUrl = freeStyleDialogModel.getProperty(\"/currentService\");\n\tfreeStyleDialogModel.setProperty(\"/entitySet\", selectedEntitySet);\n\tfreeStyleDialogModel.setProperty(\"/entitySetWithObjectContext\", \"\");\n\tfreeStyleDialogModel.setProperty(\"/entitySetWithObjectContextList\", []);\n\tfreeStyleDialogModel.setProperty(\"/isApplyServiceDetailsEnabled\", false);\n\tfreeStyleDialogModel.setProperty(\"/isEntityPathChanged\", true);\n\tconst entitySetWithContextList = await getEntitySetWithContextURLs(\n\t\tserviceUrl,\n\t\tselectedEntitySet,\n\t\trootComponent.getModel() as V2ODataModel | V4ODataModel\n\t);\n\tif (entitySetWithContextList?.length) {\n\t\tfreeStyleDialogModel.setProperty(\"/entitySetWithObjectContextList\", entitySetWithContextList);\n\t}\n}\n\n/**\n * Handles the context path change event.\n *\n * @param event\n */\nasync function onContextPathChange(event: Event) {\n\tconst freeStyleDialogModel = getDialogModel(\"freeStyle\") as JSONModel;\n\tfreeStyleDialogModel.setProperty(\"/isApplyServiceDetailsEnabled\", false);\n\tconst applicationInstance = Application.getInstance() as FreeStyle;\n\tconst control: ComboBox = event.getSource();\n\tconst selectedContextPath = control.getValue();\n\n\tif (selectedContextPath) {\n\t\tawait applicationInstance.fetchDataForObjectContext(selectedContextPath);\n\t\tfreeStyleDialogModel.setProperty(\"/entitySetWithObjectContext\", selectedContextPath);\n\t\tfreeStyleDialogModel.setProperty(\"/isApplyServiceDetailsEnabled\", true);\n\t\tfreeStyleDialogModel.setProperty(\"/isContextPathChanged\", true);\n\t}\n}\n\n/**\n * Applies the service details.\n */\nasync function applyServiceDetails() {\n\tconst appComponent = Application.getInstance().getRootComponent();\n\tconst freeStyleDialogModel = getDialogModel(\"freeStyle\") as JSONModel;\n\tfreeStyleDialogModel.setProperty(\"/isServiceDetailsView\", false);\n\n\tconst currentCardManifest = getCurrentCardManifest();\n\tconst isEntityPathChanged = currentCardManifest\n\t\t? freeStyleDialogModel.getProperty(\"/entitySet\") !==\n\t\t\t(currentCardManifest?.[\"sap.card\"]?.configuration?.parameters?._entitySet as { value?: string })?.value\n\t\t: freeStyleDialogModel.getProperty(\"/isEntityPathChanged\");\n\tconst isContextPathChanged = freeStyleDialogModel.getProperty(\"/isContextPathChanged\");\n\tconst cardManifest = Object.keys(currentCardManifest).length > 0 && !isEntityPathChanged ? currentCardManifest : undefined;\n\tconst dialog = getCardGeneratorDialog();\n\tconst dialogModel = await getCardGeneratorDialogModel(appComponent, cardManifest);\n\n\tif (isEntityPathChanged || isContextPathChanged) {\n\t\tdialog?.setModel(dialogModel);\n\t\tfreeStyleDialogModel.setProperty(\"/isEntityPathChanged\", false);\n\t\tfreeStyleDialogModel.setProperty(\"/isContextPathChanged\", false);\n\t}\n\n\tconst integrationCardManifest = await createCardManifest(\n\t\tappComponent,\n\t\tcardManifest as unknown as CardManifest,\n\t\tdialog?.getModel() as JSONModel\n\t);\n\trenderCardPreview(integrationCardManifest);\n}\n\nfunction onBackButtonPress() {\n\tconst freeStyleDialogModel = getDialogModel(\"freeStyle\") as JSONModel;\n\tfreeStyleDialogModel.setProperty(\"/isServiceDetailsView\", true);\n}\n\nexport { applyServiceDetails, onBackButtonPress, onContextPathChange, onEntitySetPathChange, onServiceChange };\n"],"mappings":"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","ignoreList":[]}