{"version":3,"file":"FreeStyle.js","names":["sap","ui","define","sap_cards_ap_common_odata_ODataUtils","____helpers_CardGeneratorModel","____helpers_IntegrationCardHelper","____pages_Application","____utils_CommonUtils","applyServiceDetails","appComponent","Application","getInstance","getRootComponent","freeStyleDialogModel","getDialogModel","setProperty","currentCardManifest","getCurrentCardManifest","isEntityPathChanged","getProperty","configuration","parameters","_entitySet","value","isContextPathChanged","cardManifest","Object","keys","length","undefined","dialog","getCardGeneratorDialog","Promise","resolve","getCardGeneratorDialogModel","then","dialogModel","setModel","createCardManifest","getModel","integrationCardManifest","renderCardPreview","e","reject","onContextPathChange","event","applicationInstance","control","getSource","selectedContextPath","getValue","_temp","fetchDataForObjectContext","onEntitySetPathChange","rootComponent","fetchDetails","selectedEntitySet","serviceUrl","getEntitySetWithContextURLs","entitySetWithContextList","onServiceChange","selectedService","onBackButtonPress","__exports","__esModule"],"sources":["FreeStyle.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport { getEntitySetWithContextURLs } from \"sap/cards/ap/common/odata/ODataUtils\";\nimport type ComboBox from \"sap/m/ComboBox\";\nimport type Event from \"sap/ui/base/Event\";\nimport type { CardManifest } from \"sap/ui/integration/widgets/Card\";\nimport type JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type V2ODataModel from \"sap/ui/model/odata/v2/ODataModel\";\nimport type V4ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport { getCardGeneratorDialogModel } from \"../../helpers/CardGeneratorModel\";\nimport { createCardManifest, getCurrentCardManifest, renderCardPreview } from \"../../helpers/IntegrationCardHelper\";\nimport { Application } from \"../../pages/Application\";\nimport { FreeStyle } from \"../../pages/FreeStyle\";\nimport { getCardGeneratorDialog, getDialogModel } from \"../../utils/CommonUtils\";\n\n/**\n * Handles the service change event.\n *\n * @param {Event} event - The event object triggered by the service change.\n */\nfunction onServiceChange(event: Event) {\n\tconst control: ComboBox = event.getSource();\n\tconst selectedService = control.getValue();\n\tconst freeStyleDialogModel = getDialogModel(\"freeStyle\") as JSONModel;\n\tfreeStyleDialogModel.setProperty(\"/entitySet\", \"\");\n\tfreeStyleDialogModel.setProperty(\"/entitySetWithObjectContext\", \"\");\n\tfreeStyleDialogModel.setProperty(\"/currentService\", selectedService);\n\tfreeStyleDialogModel.setProperty(\"/isApplyServiceDetailsEnabled\", false);\n}\n\n/**\n * Handles the entity set path change event.\n *\n * @param event\n */\nasync function onEntitySetPathChange(event: Event) {\n\tconst applicationInstance = Application.getInstance() as FreeStyle;\n\tconst { rootComponent } = applicationInstance.fetchDetails();\n\tconst control: ComboBox = event.getSource();\n\tconst selectedEntitySet = control.getValue();\n\tconst freeStyleDialogModel = getDialogModel(\"freeStyle\") as JSONModel;\n\tconst serviceUrl = freeStyleDialogModel.getProperty(\"/currentService\");\n\tfreeStyleDialogModel.setProperty(\"/entitySet\", selectedEntitySet);\n\tfreeStyleDialogModel.setProperty(\"/entitySetWithObjectContext\", \"\");\n\tfreeStyleDialogModel.setProperty(\"/entitySetWithObjectContextList\", []);\n\tfreeStyleDialogModel.setProperty(\"/isApplyServiceDetailsEnabled\", false);\n\tfreeStyleDialogModel.setProperty(\"/isEntityPathChanged\", true);\n\tconst entitySetWithContextList = await getEntitySetWithContextURLs(\n\t\tserviceUrl,\n\t\tselectedEntitySet,\n\t\trootComponent.getModel() as V2ODataModel | V4ODataModel\n\t);\n\tif (entitySetWithContextList?.length) {\n\t\tfreeStyleDialogModel.setProperty(\"/entitySetWithObjectContextList\", entitySetWithContextList);\n\t}\n}\n\n/**\n * Handles the context path change event.\n *\n * @param event\n */\nasync function onContextPathChange(event: Event) {\n\tconst freeStyleDialogModel = getDialogModel(\"freeStyle\") as JSONModel;\n\tfreeStyleDialogModel.setProperty(\"/isApplyServiceDetailsEnabled\", false);\n\tconst applicationInstance = Application.getInstance() as FreeStyle;\n\tconst control: ComboBox = event.getSource();\n\tconst selectedContextPath = control.getValue();\n\n\tif (selectedContextPath) {\n\t\tawait applicationInstance.fetchDataForObjectContext(selectedContextPath);\n\t\tfreeStyleDialogModel.setProperty(\"/entitySetWithObjectContext\", selectedContextPath);\n\t\tfreeStyleDialogModel.setProperty(\"/isApplyServiceDetailsEnabled\", true);\n\t\tfreeStyleDialogModel.setProperty(\"/isContextPathChanged\", true);\n\t}\n}\n\n/**\n * Applies the service details.\n */\nasync function applyServiceDetails() {\n\tconst appComponent = Application.getInstance().getRootComponent();\n\tconst freeStyleDialogModel = getDialogModel(\"freeStyle\") as JSONModel;\n\tfreeStyleDialogModel.setProperty(\"/isServiceDetailsView\", false);\n\n\tconst currentCardManifest = getCurrentCardManifest();\n\tconst isEntityPathChanged = currentCardManifest\n\t\t? freeStyleDialogModel.getProperty(\"/entitySet\") !==\n\t\t\t(currentCardManifest?.[\"sap.card\"]?.configuration?.parameters?._entitySet as { value?: string })?.value\n\t\t: freeStyleDialogModel.getProperty(\"/isEntityPathChanged\");\n\tconst isContextPathChanged = freeStyleDialogModel.getProperty(\"/isContextPathChanged\");\n\tconst cardManifest = Object.keys(currentCardManifest).length > 0 && !isEntityPathChanged ? currentCardManifest : undefined;\n\tconst dialog = getCardGeneratorDialog();\n\tconst dialogModel = await getCardGeneratorDialogModel(appComponent, cardManifest);\n\n\tif (isEntityPathChanged || isContextPathChanged) {\n\t\tdialog?.setModel(dialogModel);\n\t\tfreeStyleDialogModel.setProperty(\"/isEntityPathChanged\", false);\n\t\tfreeStyleDialogModel.setProperty(\"/isContextPathChanged\", false);\n\t}\n\n\tconst integrationCardManifest = await createCardManifest(\n\t\tappComponent,\n\t\tcardManifest as unknown as CardManifest,\n\t\tdialog?.getModel() as JSONModel\n\t);\n\trenderCardPreview(integrationCardManifest);\n}\n\nfunction onBackButtonPress() {\n\tconst freeStyleDialogModel = getDialogModel(\"freeStyle\") as JSONModel;\n\tfreeStyleDialogModel.setProperty(\"/isServiceDetailsView\", true);\n}\n\nexport { applyServiceDetails, onBackButtonPress, onContextPathChange, onEntitySetPathChange, onServiceChange };\n"],"mappings":"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","ignoreList":[]}