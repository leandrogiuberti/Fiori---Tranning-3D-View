{"version":3,"file":"CardGeneratorDialogController-dbg-dbg.js","names":["sap","ui","define","Log","merge","ODataUtils","MessageBox","MessageToast","Event","CoreElement","Fragment","Popup","sap_ui_core_library","JSONModel","jQuery","___helpers_Batch","___helpers_Formatter","___helpers_I18nHelper","___helpers_IntegrationCardHelper","___helpers_PropertyExpression","___helpers_Transpiler","___odata_ODataTypes","___pages_Application","___utils_CommonUtils","cardActionHandlers","freeStyleHandlers","toggleAdvancedSetting","toggleEvent","toggleButton","getSource","setEnabled","splitter","getElementById","controller","onCriticalityChange","criticalityChangeEvent","Promise","resolve","checkForNavigationProperty","then","updateCriticality","getParameter","onArrangementsChange","arrangementChangeEvent","updateArrangements","dialogModel","getDialogModel","groups","getProperty","setProperty","i","items","length","item","uom","value","split","slice","undefined","aPropsWithUoM","indexOf","name","push","onPropertyFormatterChangeFromAdvancedSettings","updateHeaderArrangements","load","advancedSettings","getPressed","lastContentArea","getContentAreas","removeContentArea","insertContentArea","setTimeout","transpileIntegrationCardToAdaptive","e","reject","event","isTextArrangement","selectedParameters","getParameters","selectedItem","model","navigationProperties","selectedNavigationalProperties","existingIndex","findIndex","navItem","selectedProperty","find","prop","selectedPropertyName","properties","selectedPropertyValues","data","_temp2","updateCardConfigurationData","textArrangementChanged","navigationalPropertiesForId","isNavigationForId","navigationKeyForId","navigationalPropertiesForDescription","isNavigationForDescription","navigationKeyForDescription","onPropertySelection","oEvent","rootComponent","entitySet","Application","getInstance","fetchDetails","control","selectedKey","getSelectedKey","newValue","currentValue","oModel","validateControl","updateSelectedNavigationProperty","selectedNavigationPropertiesContent","sPath","getBindingContext","getPath","group","getArrangements","unitOfMeasures","textArrangements","propertyValueFormatters","navigationProperty","navigationalProperties","setValueStateForAdvancedPanel","propertyLabel","getPropertyLabel","getModel","PropertyInfoType","Property","label","isNavigationEnabled","isEnabled","refresh","updateCardGroups","okPressed","hasError","validateHeader","oCard","mManifest","getManifest","enhanceManifestWithInsights","enhanceManifestWithConfigurationParameters","createAndStoreGeneratedi18nKeys","updateManifestWithSelectQueryParams","configuration","parameters","contextParameters","payload","floorplan","localPath","fileName","manifests","type","manifest","default","ajax","url","headers","JSON","stringify","success","show","getTranslatedText","error","jqXHR","textStatus","errorThrown","errorMessage","status","statusText","getCardGeneratorDialog","close","toggleOffAdvancedPanel","isHeader","_temp","onStateIndicatorSelection","getHeaderConfiguration","header","mainIndicator","state","getCriticality","number","selectedNavigationPropertyHeader","selectedValue","dataType","isDateType","checkForDateType","isNumberType","updateTrendForCardHeader","updateSideIndicatorsForHeader","updateCardHeader","selectedNavigationProperty","entitySetWithObjectContext","serviceUrl","oDataV4","$data","queryParameters","map","property","fetchDataAsync","createUrlParameters","result","addLabelsForProperties","ValueState","formatPropertyDropdownValues","getCurrentCardManifest","getPreviewItems","renderCardPreview","resolvePropertyPathFromExpression","extractValueWithoutBooleanExprBinding","hasBooleanBindingExpression","isBinding","context","MAX_GROUPS","MAX_GROUP_ITEMS","CardGeneratorDialogController","initialize","setDefaultCardPreview","cancelPressed","closeDialog","onAddClick","onGroupAddClick","onGroupDeleteClick","deleteGroup","onDeleteClick","updateContentNavigationSelection","onPropertyLabelChange","onTitleSelection","onSubTitleSelection","onGroupTitleChange","onDrop","onHeaderUOMSelection","updateHeaderNavigationSelection","onHeightChange","onWidthChange","onResetPressed","onItemsActionsButtonPressed","onPreviewTypeChange","onPropertyFormatting","onFormatTypeSelection","onActionAddClick","onAddedActionDelete","onAddedActionStyleChange","onAddedActionTitleChange","loadActions","_setDefaultCardPreview","_updateTrendForCardHeader","_updateSideIndicatorsForHeader","_setAdvancedFormattingOptionsEnablement","setAdvancedFormattingOptionsEnablement","_updateHeaderArrangements","_updateArrangements","_updateCriticality","_validateHeader","applyCriticality","applyUoMFormatting","onTrendDelete","loadAdvancedFormattingConfigurationFragment","disableOrEnableUOMAndTrend","handleCriticalityAction","onEntitySetPathChange","applyServiceDetails","onServiceChange","onContextPathChange","onBackButtonPress","handleFormatterUomAction","onBeforeDialogClosed","setCriticalitySourceProperty","propertyName","isCalcuationType","mainIndicatorCriticality","matchedCriticality","oCriticality","criticalityName","propertyKeyForId","criticality","activeCalculation","staticValues","deviationLow","deviationRangeLowValue","deviationHigh","deviationRangeHighValue","toleranceLow","toleranceRangeLowValue","toleranceHigh","toleranceRangeHighValue","sImprovementDirection","improvementDirection","oCriticalityConfigValues","None","Negative","Critical","Positive","sourceProperty","mainIndicatorProperty","unitsOfMeasure","selectedTrendOptions","selectedIndicatorOptions","getPropertyDataType","isFormatterApplied","some","formatterDetail","formatterApplied","filter","formatterName","isUOMApplied","arrangementDetail","isCriticalityApplied","indicatorCriticality","indicatorCriticalityName","isTrendApplied","trendDetail","downDifference","isIndicatorsApplied","indicatorDetail","targetUnit","trendOptions","indicatorsValue","referenceValue","upDifference","targetValue","deviationValue","deviationUnit","includes","navSelectedProperty","selectedNavProperties","propertiesSelected","fnGetHeaderConfig","key","navigationValue","setValueState","sapCardHeader","currentManifest","oManifest","sideIndicators","title","controlName","errorControls","resourceBundle","getResourceBundle","getKey","getText","controlErrorText","setValueStateText","Error","forEach","errorControl","index","getId","splice","subTitle","unitOfMeasurement","propVal","ele","propertyValue","labelWithValue","mainIndicatorStatusKeyInitial","mainIndicatorStatusKey","sourcePropertyToSet","updateSelectedNavigation","getPropertyAndSelectedValue","propertyType","selectProperty","typeSupported","isNaN","Number","isUoMEnabled","navProperty","NavigationProperty","oProperty","source","selectedNavigation","existingItem","navValues","propertyPath","sKey","getObject","comboBox","nextItemNumber","newItem","iItemsAdded","getValue","getValueState","validateIndicatorsValues","buttonId","targetInputId","setValueStateTextForControl","deviationInputId","targetUnitInputId","deviationUnitInputId","validateTrendValues","trendValues","referenceInputId","trendDownDifferenceInputId","trendUpDifferenceInputId","controlId","isSelectControl","elementControl","validationText","iLength","currentDefaultValue","groupLength","groupIndex","_itemActionsMenu","warningMessage","warning","actions","Action","DELETE","CANCEL","emphasizedAction","onClose","action","itemIndex","match","sValue","destroy","trend","selectedTrendOptionIndex","selectedTrendOption","newTrendValues","getTrendDirection","selectedIndicatorOptionIndex","selectedIndicatorOption","unit","indicatorsValueToAdd","mainIndicatorKey","informativeMessage","previewItems","propertyPaths","path","formattingOptions","itemName","navigationalProperty","isPropertyExists","valueState","Information","oDragged","oDropped","sInsertPosition","oDragPos","getParent","oDropPos","sDraggedPath","sDroppedPath","aDragItems","aDropItems","iDragPosition","indexOfItem","iDropPosition","oSelectedItem","setWidth","setHeight","setValue","relavantCriticality","relavantProperty","indicatorName","parse","hostCriticality","oSource","sourceItem","aUom","sSourceUoMProperty","aSourceUom","onAdvancedFormattingConfigOpen","navSelectedKey","_advancedFormattingOptionsPopover","id","oPopover","addDependent","oContext","setBindingContext","openBy","oConfigurationController","onPopoverClose","onPropertyFormatterChange","applyFormatting","applyFormatter","resetValueState","onDownDifferenceChange","onUpDifferenceChange","onReferenceValInputChange","onTargetValueChange","onDeviationValueChange","onTargetUnitChange","onDeviationUnitChange","applyIndicators","hasIndicatorsError","_advancedFormattingConfigurationPopover","applyTrendCalculation","hasTrendError","onDelete","sourceUoMProperty","iIndex","itemsBindingPath","relativeIndex","updatedPropertyValueFormatters","formatter","onIndicatorsDelete","selectedIndicatorValues","onDeleteFormatter","deleteFormatter","onDeleteCriticality","onDeleteButtonClicked","sourceCriticalityProperty","navProperites","isNavEnabled","navSelectedProperies","propertyExists","targetProperty","propertyKeyForDescription","proprtetyKeyFromSource","navAllProperties","navPropertiesValues","getNavValues","oData","bMatchingProperty","oUom","navProperties","propertyKeyFromSource","selectedTrendValues","oResourceBundle","mLabels","uomText","criticalityText","formatterText","indicatorsText","trendCalculatorText","setModel","sourcePropertyName","oController","onNavigationActionSelect","sId","propertyToBeSet","customData","getCustomData","customAction","custom","actionType","hasActions","isDestroyed","oMenu","open","Dock","BeginTop","BeginBottom","bind","navProp","sourceUom","selectedCardType","getSelectedItem","oAdaptiveCardContainer","oCustomSize","setVisible","subtitle","mainIndicatorValue","aUnitOfMeasures","aTextArrangements","aPropertyValueFormatters","groupItem","groupItemValue","content","dialog","getCustomHeader","getContentMiddle","setPressed","setSelectedKey","defaultIntegrationCard","adaptiveCardContainer","customIntegrationCard","previewHostsProperties","defaultPreviewOption","option","width","height","isDialogEdited","OK","sAction","preventDefault","__exports","__esModule"],"sources":["CardGeneratorDialogController.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport Log from \"sap/base/Log\";\nimport ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport merge from \"sap/base/util/merge\";\nimport CompactFormatterSelection from \"sap/cards/ap/generator/app/controls/CompactFormatterSelection\";\nimport CriticalityEditor from \"sap/cards/ap/generator/app/controls/CriticalityEditor\";\nimport type { Model } from \"sap/cards/ap/generator/odata/ODataTypes\";\nimport * as ODataUtils from \"sap/cards/ap/generator/odata/ODataUtils\";\nimport type MenuBar from \"sap/m/Bar\";\nimport type ComboBox from \"sap/m/ComboBox\";\nimport type Dialog from \"sap/m/Dialog\";\nimport type Input from \"sap/m/Input\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport MessageToast from \"sap/m/MessageToast\";\nimport type Popover from \"sap/m/Popover\";\nimport type ToggleButton from \"sap/m/ToggleButton\";\nimport Event from \"sap/ui/base/Event\";\nimport type Control from \"sap/ui/core/Control\";\nimport CoreElement from \"sap/ui/core/Element\";\nimport Fragment from \"sap/ui/core/Fragment\";\nimport Popup from \"sap/ui/core/Popup\";\nimport { ValueState } from \"sap/ui/core/library\";\nimport type Card from \"sap/ui/integration/widgets/Card\";\nimport type { CardManifest, ObjectContent } from \"sap/ui/integration/widgets/Card\";\nimport type Splitter from \"sap/ui/layout/Splitter\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type ResourceModel from \"sap/ui/model/resource/ResourceModel\";\nimport jQuery from \"sap/ui/thirdparty/jquery\";\nimport type { Host } from \"../config/PreviewOptions\";\nimport { QueryParameters, createUrlParameters, updateManifestWithSelectQueryParams } from \"../helpers/Batch\";\nimport type { SideIndicatorOptions, TrendOptions, TrendOrIndicatorOptions } from \"../helpers/CardGeneratorModel\";\nimport { formatPropertyDropdownValues, type FormatterConfigurationMap } from \"../helpers/Formatter\";\nimport { createAndStoreGeneratedi18nKeys } from \"../helpers/I18nHelper\";\nimport {\n\tenhanceManifestWithConfigurationParameters,\n\tenhanceManifestWithInsights,\n\tgetCurrentCardManifest,\n\tgetPreviewItems,\n\trenderCardPreview,\n\tupdateCardGroups\n} from \"../helpers/IntegrationCardHelper\";\nimport { getArrangements, resolvePropertyPathFromExpression } from \"../helpers/PropertyExpression\";\nimport { transpileIntegrationCardToAdaptive } from \"../helpers/Transpiler\";\nimport { PropertyInfo, PropertyInfoMap, PropertyInfoType } from \"../odata/ODataTypes\";\nimport { Application } from \"../pages/Application\";\nimport type { GroupItem, NavigationParameter, NavigationalData, ObjectCardGroups, Property } from \"../types/PropertyTypes\";\nimport {\n\tcheckForDateType,\n\textractValueWithoutBooleanExprBinding,\n\tgetCardGeneratorDialog,\n\tgetDialogModel,\n\thasBooleanBindingExpression,\n\tisBinding\n} from \"../utils/CommonUtils\";\nimport { ArrangementOptions } from \"./controls/ArrangementsEditor\";\nimport * as cardActionHandlers from \"./handlers/CardActions\";\nimport * as freeStyleHandlers from \"./handlers/FreeStyle\";\n\ntype UnitOfMeasures = {\n\tpropertyKeyForDescription: string;\n\tname: string;\n\tpropertyKeyForId: string;\n\tvalue: string;\n\tvalueState: ValueState;\n\tvalueStateText: string;\n\tnavigationValueState?: ValueState;\n\tnavigationValueStateText?: string;\n\tisNavigationForId?: boolean;\n\tnavigationKeyForId?: string;\n};\ntype ValueFormatter = {\n\tproperty: string;\n};\ntype Criticality = {\n\tcriticality: string;\n\tname: string;\n\tactiveCalculation: boolean;\n\tpropertyKeyForId: string;\n};\n\ntype EventParameters = {\n\tselectedItem: ArrangementOptions;\n\ttextArrangementChanged: boolean;\n};\n\nconst context: any = {};\nconst aPropsWithUoM: any = [];\nconst MAX_GROUPS = 5;\nconst MAX_GROUP_ITEMS = 5;\n\nexport const CardGeneratorDialogController = {\n\tinitialize: function () {\n\t\tsetDefaultCardPreview();\n\t},\n\tokPressed,\n\tcancelPressed: closeDialog,\n\tonAddClick,\n\tonGroupAddClick,\n\tonGroupDeleteClick,\n\tdeleteGroup,\n\tonDeleteClick,\n\tonPropertySelection,\n\tupdateContentNavigationSelection,\n\tonPropertyLabelChange,\n\tonTitleSelection,\n\tonSubTitleSelection,\n\tonGroupTitleChange,\n\tvalidateControl,\n\tonDrop,\n\tonHeaderUOMSelection,\n\tonStateIndicatorSelection,\n\tupdateHeaderNavigationSelection,\n\tonHeightChange,\n\tonWidthChange,\n\tonResetPressed,\n\tonItemsActionsButtonPressed,\n\tonPreviewTypeChange,\n\ttoggleAdvancedSetting,\n\tgetTranslatedText,\n\tonPropertyFormatting,\n\tonFormatTypeSelection,\n\tonActionAddClick: cardActionHandlers.onActionAddClick,\n\tonAddedActionDelete: cardActionHandlers.onAddedActionDelete,\n\tonAddedActionStyleChange: cardActionHandlers.onAddedActionStyleChange,\n\tonAddedActionTitleChange: cardActionHandlers.onAddedActionTitleChange,\n\tloadActions: cardActionHandlers.loadActions,\n\t/* Methods exposed for testing */\n\t_setDefaultCardPreview: setDefaultCardPreview,\n\t_updateTrendForCardHeader: updateTrendForCardHeader,\n\t_updateSideIndicatorsForHeader: updateSideIndicatorsForHeader,\n\t_setAdvancedFormattingOptionsEnablement: setAdvancedFormattingOptionsEnablement,\n\t_updateHeaderArrangements: updateHeaderArrangements,\n\t_updateArrangements: updateArrangements,\n\t_updateCriticality: updateCriticality,\n\t_validateHeader: validateHeader,\n\tapplyCriticality: applyCriticality,\n\tapplyUoMFormatting: applyUoMFormatting,\n\tonTrendDelete: onTrendDelete,\n\tloadAdvancedFormattingConfigurationFragment: loadAdvancedFormattingConfigurationFragment,\n\taddLabelsForProperties: addLabelsForProperties,\n\tcheckForNavigationProperty: checkForNavigationProperty,\n\tdisableOrEnableUOMAndTrend: disableOrEnableUOMAndTrend,\n\thandleCriticalityAction: handleCriticalityAction,\n\tonEntitySetPathChange: freeStyleHandlers.onEntitySetPathChange,\n\tapplyServiceDetails: freeStyleHandlers.applyServiceDetails,\n\tonServiceChange: freeStyleHandlers.onServiceChange,\n\tonContextPathChange: freeStyleHandlers.onContextPathChange,\n\tonBackButtonPress: freeStyleHandlers.onBackButtonPress,\n\thandleFormatterUomAction,\n\tonBeforeDialogClosed: onBeforeDialogClosed,\n\tsetCriticalitySourceProperty: setCriticalitySourceProperty\n};\nexport function getCriticality(propertyName: string, isCalcuationType?: boolean) {\n\tconst model = getDialogModel() as JSONModel;\n\tconst mainIndicatorCriticality = model?.getProperty(\"/configuration/mainIndicatorOptions/criticality\");\n\tif (hasBooleanBindingExpression(propertyName)) {\n\t\tpropertyName = extractValueWithoutBooleanExprBinding(propertyName);\n\t}\n\tconst matchedCriticality = mainIndicatorCriticality?.find(\n\t\t(oCriticality: { name: string; criticality: string; propertyKeyForId: string }) => {\n\t\t\tconst { name: criticalityName, propertyKeyForId } = oCriticality;\n\t\t\treturn (\n\t\t\t\tcriticalityName === propertyName ||\n\t\t\t\tpropertyName === `{${criticalityName}}` ||\n\t\t\t\tpropertyName === `{${criticalityName}/${propertyKeyForId}}`\n\t\t\t);\n\t\t}\n\t);\n\tif (matchedCriticality) {\n\t\tif (isBinding(matchedCriticality?.criticality)) {\n\t\t\treturn \"{= extension.formatters.formatCriticality($\" + matchedCriticality?.criticality + \", 'color') }\";\n\t\t}\n\t\tif (matchedCriticality?.activeCalculation || isCalcuationType) {\n\t\t\tconst staticValues = {\n\t\t\t\tdeviationLow: matchedCriticality?.deviationRangeLowValue,\n\t\t\t\tdeviationHigh: matchedCriticality?.deviationRangeHighValue,\n\t\t\t\ttoleranceLow: matchedCriticality?.toleranceRangeLowValue,\n\t\t\t\ttoleranceHigh: matchedCriticality?.toleranceRangeHighValue,\n\t\t\t\tsImprovementDirection: matchedCriticality?.improvementDirection,\n\t\t\t\toCriticalityConfigValues: { None: \"Neutral\", Negative: \"Error\", Critical: \"Critical\", Positive: \"Good\" }\n\t\t\t};\n\t\t\treturn \"{= extension.formatters.formatValueColor(${\" + matchedCriticality?.name + \"},\" + JSON.stringify(staticValues) + \") }\";\n\t\t}\n\t\treturn matchedCriticality?.criticality;\n\t}\n\treturn \"None\";\n}\n\n/**\n * This functions updates the enablement of the advanced formatting options based on the source property.\n * @param sourceProperty\n * @returns\n */\nfunction setAdvancedFormattingOptionsEnablement(sourceProperty: string) {\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst mainIndicatorProperty = oModel.getProperty(\"/configuration/mainIndicatorStatusKey\");\n\toModel.setProperty(\"/configuration/trendOptions/sourceProperty\", mainIndicatorProperty);\n\toModel.setProperty(\"/configuration/indicatorsValue/sourceProperty\", mainIndicatorProperty);\n\tconst properties = oModel.getProperty(\"/configuration/properties\");\n\tconst unitsOfMeasure = oModel.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\") || [];\n\tconst propertyValueFormatters = oModel.getProperty(\"/configuration/advancedFormattingOptions/propertyValueFormatters\") || [];\n\tconst mainIndicatorCriticality = oModel.getProperty(\"/configuration/mainIndicatorOptions/criticality\") || [];\n\tconst selectedTrendOptions = oModel.getProperty(\"/configuration/selectedTrendOptions\") || [];\n\tconst selectedIndicatorOptions = oModel.getProperty(\"/configuration/selectedIndicatorOptions\") || [];\n\tconst dataType = getPropertyDataType(sourceProperty, properties, oModel);\n\tconst isDateType = checkForDateType(dataType);\n\tconst isNumberType = [\"Edm.Decimal\", \"Edm.Int16\", \"Edm.Int32\", \"Edm.Double\"].indexOf(dataType) > -1;\n\n\tlet isFormatterApplied = propertyValueFormatters.some(function (formatterDetail: ValueFormatter) {\n\t\treturn formatterDetail.property === sourceProperty || \"{\" + formatterDetail.property + \"}\" === sourceProperty;\n\t});\n\n\tconst formatterApplied = propertyValueFormatters.filter(function (formatterDetail: ValueFormatter) {\n\t\treturn formatterDetail.property === sourceProperty || \"{\" + formatterDetail.property + \"}\" === sourceProperty;\n\t})[0];\n\n\tif (formatterApplied?.formatterName === \"format.unit\" && typeof formatterApplied?.parameters[1].properties[0].value !== \"number\") {\n\t\tisFormatterApplied = false;\n\t}\n\n\tconst isUOMApplied = unitsOfMeasure.some(function (arrangementDetail: UnitOfMeasures) {\n\t\treturn arrangementDetail.name === sourceProperty;\n\t});\n\tconst isCriticalityApplied = mainIndicatorCriticality.some((indicatorCriticality: Criticality) => {\n\t\tconst { name: indicatorCriticalityName, propertyKeyForId } = indicatorCriticality;\n\t\treturn indicatorCriticalityName === sourceProperty || `${indicatorCriticalityName}/${propertyKeyForId}` === sourceProperty;\n\t});\n\tconst isTrendApplied = selectedTrendOptions.some(function (trendDetail: TrendOptions) {\n\t\treturn trendDetail.sourceProperty === sourceProperty && trendDetail.downDifference;\n\t});\n\tconst isIndicatorsApplied = selectedIndicatorOptions.some(function (indicatorDetail: SideIndicatorOptions) {\n\t\treturn indicatorDetail.sourceProperty === sourceProperty && indicatorDetail.targetUnit;\n\t});\n\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/isFormatterApplied\", isFormatterApplied);\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/isFormatterEnabled\", isDateType || isNumberType);\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/isUOMApplied\", isUOMApplied);\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/isCriticalityApplied\", isCriticalityApplied);\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/isTrendApplied\", isTrendApplied);\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/isIndicatorsApplied\", isIndicatorsApplied);\n\n\tconst trendOptions = oModel.getProperty(\"/configuration/trendOptions\") as TrendOptions;\n\tconst indicatorsValue = oModel.getProperty(\"/configuration/indicatorsValue\") as SideIndicatorOptions;\n\n\tif (trendOptions) {\n\t\tconst { referenceValue, downDifference, upDifference } = trendOptions;\n\t\tif (referenceValue && downDifference && upDifference) {\n\t\t\toModel.setProperty(\"/configuration/trendOptions/upDown\", true);\n\t\t}\n\t}\n\n\tif (indicatorsValue) {\n\t\tconst { targetValue, deviationValue, targetUnit, deviationUnit } = indicatorsValue;\n\t\tif (targetValue && deviationValue && targetUnit && deviationUnit) {\n\t\t\toModel.setProperty(\"/configuration/indicatorsValue/targetDeviation\", true);\n\t\t}\n\t}\n}\n\nfunction getPropertyDataType(sourceProperty: string, properties: Property[], model: JSONModel) {\n\tconst navigationProperty = model.getProperty(\"/configuration/navigationProperty\");\n\tif (sourceProperty.includes(\"/\") && navigationProperty) {\n\t\tconst [selectedProperty, navSelectedProperty] = sourceProperty.split(\"/\");\n\t\tconst selectedNavProperties = navigationProperty.find((prop: Property) => prop.name === selectedProperty);\n\t\tconst propertiesSelected = selectedNavProperties?.properties.find((prop: Property) => prop.name === navSelectedProperty);\n\t\treturn propertiesSelected?.type;\n\t}\n\treturn properties.find((property: Property) => property.name === sourceProperty)?.type || \"\";\n}\n\n/**\n * Updates \"sap.card.header\" property of integration card manifest and triggers rendering of the card preview.\n *\n * @param oEvent\n * @param key\n * @param fnGetHeaderConfig\n */\nfunction updateCardHeader(oEvent: Event, fnGetHeaderConfig: Function, key?: string) {\n\tconst control = oEvent.getSource() as ComboBox;\n\tlet selectedKey = control.getSelectedKey() || \"\";\n\tconst newValue = (oEvent.getParameter as (param: string) => string)(\"newValue\");\n\tlet currentValue = selectedKey !== \"\" ? `{${selectedKey}}` : newValue;\n\tconst oModel = getDialogModel() as JSONModel;\n\n\tif (key === \"navSelection\") {\n\t\tconst navigationValue = oModel.getProperty(\"/configuration/navigationValue\");\n\t\tcurrentValue = navigationValue ? `{${navigationValue}}` : \"\";\n\t}\n\n\tif (!selectedKey && key === \"mainIndicator\") {\n\t\tcurrentValue = \"\";\n\t}\n\n\tif (selectedKey !== \"\" || currentValue !== \"\") {\n\t\tcontrol.setValueState(ValueState.None);\n\t}\n\n\tconst sapCardHeader = fnGetHeaderConfig(currentValue);\n\tconst currentManifest = getCurrentCardManifest();\n\tconst oManifest = merge(currentManifest, sapCardHeader) as CardManifest;\n\n\tif (currentValue === \"\" && key === \"mainIndicator\") {\n\t\tdelete oManifest[\"sap.card\"].header.mainIndicator;\n\t\tdelete oManifest[\"sap.card\"].header.sideIndicators;\n\t}\n\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/sourceProperty\", selectedKey);\n\tif (key === \"navSelection\") {\n\t\tselectedKey = oModel.getProperty(\"/configuration/mainIndicatorStatusKey\");\n\t}\n\tsetValueStateForAdvancedPanel(selectedKey);\n\trenderCardPreview(oManifest, getDialogModel() as JSONModel);\n\ttranspileIntegrationCardToAdaptive(getDialogModel() as JSONModel);\n}\n\n/**\n * Handles the change event for card title selection.\n * @param oEvent\n */\nfunction onTitleSelection(oEvent: Event) {\n\tconst getHeaderConfiguration = (value: string) => {\n\t\treturn {\n\t\t\t\"sap.card\": {\n\t\t\t\theader: {\n\t\t\t\t\ttitle: value\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t};\n\tvalidateControl(oEvent, \"title\");\n\tupdateCardHeader(oEvent, getHeaderConfiguration);\n}\n/**\n * Validates the control(control's selected key) based on the provided event and control name.\n * @param {Event} oEvent The event triggered by the control.\n * @param {string} [controlName] The name of the control being validated.\n */\nfunction validateControl(oEvent: Event, controlName?: string) {\n\tconst control: ComboBox = oEvent.getSource();\n\tconst selectedKey = control.getSelectedKey();\n\tconst value: string = (oEvent.getParameter as (param: string) => string)(\"newValue\");\n\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst errorControls = oModel.getProperty(\"/configuration/errorControls\");\n\tconst resourceBundle = (getDialogModel(\"i18n\") as ResourceModel)?.getResourceBundle() as ResourceBundle;\n\n\t/**\n\t * Gets the key for the given control name.\n\t * @param {string} name The name of the control.\n\t * @returns {string} The key associated with the control name.\n\t */\n\tconst getKey = (name: string): string => {\n\t\tswitch (name) {\n\t\t\tcase \"title\":\n\t\t\t\treturn resourceBundle?.getText(\"GENERATOR_CARD_TITLE\") as string;\n\t\t\tcase \"stateIndicator\":\n\t\t\t\treturn resourceBundle?.getText(\"GENERATOR_MAIN_INDICATOR\") as string;\n\t\t\tdefault:\n\t\t\t\treturn resourceBundle?.getText(\"GENERATOR_GROUP_PROPERTY\") as string;\n\t\t}\n\t};\n\n\tconst controlErrorText = resourceBundle?.getText(\"GENERIC_ERR_MSG\", [getKey(controlName ?? \"\")]);\n\n\tif (!selectedKey && !value && controlName === \"title\") {\n\t\terrorControls?.push(control);\n\t\tcontrol.setValueStateText(controlErrorText);\n\t} else if (!selectedKey && value) {\n\t\terrorControls?.push(control);\n\t\tcontrol.setValueState(ValueState.Error);\n\t\tcontrol.setValueStateText(controlErrorText);\n\t} else {\n\t\terrorControls?.forEach((errorControl: ComboBox, index: number) => {\n\t\t\tif (control.getId() === errorControl.getId()) {\n\t\t\t\terrorControls.splice(index, 1);\n\t\t\t}\n\t\t});\n\t\tcontrol.setValueState(ValueState.None);\n\t}\n}\n\n/**\n * Handles the change event for card subtitle selection.\n * @param oEvent\n */\nfunction onSubTitleSelection(oEvent: Event) {\n\tconst getHeaderConfiguration = (value: string) => {\n\t\tconst oModel = getDialogModel() as JSONModel;\n\t\treturn {\n\t\t\t\"sap.card\": {\n\t\t\t\theader: {\n\t\t\t\t\tsubTitle: getArrangements(value, {\n\t\t\t\t\t\tunitOfMeasures: oModel.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\"),\n\t\t\t\t\t\ttextArrangements: oModel.getProperty(\"/configuration/advancedFormattingOptions/textArrangements\"),\n\t\t\t\t\t\tpropertyValueFormatters: oModel.getProperty(\"/configuration/advancedFormattingOptions/propertyValueFormatters\")\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t};\n\tupdateCardHeader(oEvent, getHeaderConfiguration);\n}\n\n/**\n * Handles the change event for card header UOM selection.\n * @param oEvent\n */\nfunction onHeaderUOMSelection(oEvent: Event) {\n\tconst getHeaderConfiguration = (value: string) => {\n\t\tconst oModel = getDialogModel() as JSONModel;\n\t\treturn {\n\t\t\t\"sap.card\": {\n\t\t\t\theader: {\n\t\t\t\t\tunitOfMeasurement: getArrangements(value, {\n\t\t\t\t\t\tunitOfMeasures: oModel.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\"),\n\t\t\t\t\t\ttextArrangements: oModel.getProperty(\"/configuration/advancedFormattingOptions/textArrangements\"),\n\t\t\t\t\t\tpropertyValueFormatters: oModel.getProperty(\"/configuration/advancedFormattingOptions/propertyValueFormatters\")\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t};\n\n\tupdateCardHeader(oEvent, getHeaderConfiguration);\n}\nfunction addLabelsForProperties(selectedNavigationProperty: NavigationalData, data: Record<string, unknown>) {\n\tif (\n\t\tselectedNavigationProperty.name &&\n\t\tdata[selectedNavigationProperty.name] !== undefined &&\n\t\tdata[selectedNavigationProperty.name] !== null\n\t) {\n\t\tconst propVal = selectedNavigationProperty?.value as unknown as PropertyInfoMap;\n\t\tpropVal?.forEach((ele: PropertyInfo) => {\n\t\t\tconst name = data[selectedNavigationProperty.name] as Record<string, unknown>;\n\t\t\tif (name[ele.name] !== undefined && name[ele.name] !== null) {\n\t\t\t\tconst propertyValue = name[ele.name] as string;\n\t\t\t\tconst value = formatPropertyDropdownValues(ele, propertyValue);\n\t\t\t\tele.labelWithValue = value;\n\t\t\t} else {\n\t\t\t\tele.labelWithValue = `${ele.label} (<empty>)`;\n\t\t\t}\n\t\t});\n\t} else {\n\t\tselectedNavigationProperty.value = [];\n\t}\n}\n\nasync function updateCardConfigurationData(selectedProperty: string, selectedNavigationProperty: NavigationalData) {\n\tconst { entitySetWithObjectContext } = Application.getInstance().fetchDetails();\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst { serviceUrl, oDataV4, $data } = oModel.getProperty(\"/configuration\");\n\tconst queryParameters: QueryParameters = {\n\t\tproperties: [],\n\t\tnavigationProperties: [\n\t\t\t{\n\t\t\t\tname: selectedProperty,\n\t\t\t\tproperties: selectedNavigationProperty.value.map((property) => property.name) || []\n\t\t\t}\n\t\t]\n\t};\n\tconst result = await ODataUtils.fetchDataAsync(serviceUrl, entitySetWithObjectContext, oDataV4, createUrlParameters(queryParameters));\n\taddLabelsForProperties(selectedNavigationProperty, result);\n\t$data[selectedProperty] = result[selectedProperty];\n\toModel.setProperty(\"/configuration/$data\", $data);\n}\n\nfunction updateHeaderNavigationSelection(oEvent: Event) {\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst getHeaderConfiguration = (value: string) => ({\n\t\t\"sap.card\": {\n\t\t\theader: {\n\t\t\t\tmainIndicator: {\n\t\t\t\t\tstate: getCriticality(value),\n\t\t\t\t\tnumber: getArrangements(value, {\n\t\t\t\t\t\tunitOfMeasures: oModel.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\"),\n\t\t\t\t\t\ttextArrangements: oModel.getProperty(\"/configuration/advancedFormattingOptions/textArrangements\"),\n\t\t\t\t\t\tpropertyValueFormatters: oModel.getProperty(\"/configuration/advancedFormattingOptions/propertyValueFormatters\")\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tconst control = oEvent.getSource() as ComboBox;\n\tconst selectedKey = control.getSelectedKey();\n\tconst mainIndicatorStatusKeyInitial = oModel.getProperty(\"/configuration/mainIndicatorStatusKeyInitial\");\n\tconst mainIndicatorStatusKey = oModel.getProperty(\"/configuration/mainIndicatorStatusKey\");\n\tconst sourcePropertyToSet = mainIndicatorStatusKeyInitial ?? mainIndicatorStatusKey;\n\n\tif (!mainIndicatorStatusKeyInitial) {\n\t\toModel.setProperty(\"/configuration/mainIndicatorStatusKeyInitial\", sourcePropertyToSet);\n\t} else {\n\t\toModel.setProperty(\"/configuration/mainIndicatorStatusKey\", sourcePropertyToSet);\n\t}\n\tconst sourceProperty = oModel.getProperty(\"/configuration/mainIndicatorStatusKey\");\n\tupdateSelectedNavigation(selectedKey, sourceProperty, oModel, \"header\");\n\toModel.setProperty(\"/configuration/navigationValue\", `${sourcePropertyToSet}/${selectedKey}`);\n\toModel.setProperty(\"/configuration/mainIndicatorNavigationSelectedKey\", selectedKey);\n\toModel.setProperty(\"/configuration/mainIndicatorStatusKey\", `${sourceProperty}/${selectedKey}`);\n\tupdateCardHeader(oEvent, getHeaderConfiguration, \"navSelection\");\n}\n\n/**\n * Handles the change event for card KPI value selection.\n * @param oEvent\n */\nasync function onStateIndicatorSelection(oEvent: Event) {\n\tconst getHeaderConfiguration = (value: string) => {\n\t\tconst oModel = getDialogModel() as JSONModel;\n\t\treturn {\n\t\t\t\"sap.card\": {\n\t\t\t\theader: {\n\t\t\t\t\tmainIndicator: {\n\t\t\t\t\t\tstate: getCriticality(value),\n\t\t\t\t\t\tnumber: getArrangements(value, {\n\t\t\t\t\t\t\tunitOfMeasures: oModel.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\"),\n\t\t\t\t\t\t\ttextArrangements: oModel.getProperty(\"/configuration/advancedFormattingOptions/textArrangements\"),\n\t\t\t\t\t\t\tpropertyValueFormatters: oModel.getProperty(\"/configuration/advancedFormattingOptions/propertyValueFormatters\")\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t};\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst control = oEvent.getSource() as ComboBox;\n\tconst selectedKey = control.getSelectedKey();\n\tawait updateSelectedNavigationProperty(selectedKey, true);\n\tconst selectedNavigationPropertyHeader = oModel.getProperty(\"/configuration/selectedNavigationPropertyHeader\");\n\tconst selectedValue: string = (oEvent.getParameter as (param: string) => string)(\"newValue\");\n\tvalidateControl(oEvent, \"stateIndicator\");\n\tconst currentValue = selectedKey !== \"\" ? `{${selectedKey}}` : selectedValue;\n\toModel.setProperty(\"/configuration/mainIndicatorNavigationSelectedValue\", \"\");\n\toModel.setProperty(\"/configuration/mainIndicatorStatusKeyInitial\", selectedValue);\n\toModel.setProperty(\"/configuration/mainIndicatorNavigationSelectedKey\", \"\");\n\n\tconst properties = oModel.getProperty(\"/configuration/properties\");\n\tconst dataType = properties.find((prop: Property) => prop.name === selectedKey)?.type || \"\";\n\tconst isDateType = checkForDateType(dataType);\n\tconst isNumberType = [\"Edm.Decimal\", \"Edm.Int16\", \"Edm.Int32\", \"Edm.Double\"].indexOf(dataType) > -1;\n\toModel.setProperty(\"/configuration/mainIndicatorStatusKey\", selectedKey);\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/isFormatterEnabled\", isDateType || isNumberType);\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/textArrangementSourceProperty\", currentValue);\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/textArrangementSelectedKey\", selectedKey);\n\n\tif (oModel.getProperty(\"/configuration/trendOptions/sourceProperty\") !== selectedKey) {\n\t\toModel.setProperty(\"/configuration/trendOptions\", {});\n\t\toModel.setProperty(\"/configuration/indicatorsValue\", {});\n\t}\n\n\toModel.setProperty(\"/configuration/trendOptions/sourceProperty\", selectedKey);\n\toModel.setProperty(\"/configuration/indicatorsValue/sourceProperty\", selectedKey);\n\n\tsetValueStateForAdvancedPanel(selectedKey);\n\tupdateTrendForCardHeader();\n\tupdateSideIndicatorsForHeader();\n\toModel.setProperty(\"/configuration/navigationValue\", \"\");\n\tif (!selectedNavigationPropertyHeader?.value.length) {\n\t\tupdateCardHeader(oEvent, getHeaderConfiguration, \"mainIndicator\");\n\t} else {\n\t\tupdateCardHeader(oEvent, getHeaderConfiguration, \"navSelection\");\n\t}\n}\n\n/**\n * Retrieves the property type and selected value from the given model based on the selected property.\n *\n * @param {JSONModel} model - The JSON model containing configuration and data.\n * @param {string} selectedProperty - The property path to retrieve the type and value for.\n *                                     It can be a simple property or a navigation property (e.g., \"propertyName\" or \"navigationProperty/propertyName\").\n * @returns {{ propertyType: string | undefined, selectedValue: string }} - An object containing:\n *   - `propertyType`: The type of the selected property (if found).\n *   - `selectedValue`: The value of the selected property (if found).\n */\nfunction getPropertyAndSelectedValue(model: JSONModel, selectedProperty: string) {\n\tlet propertyType;\n\tlet selectedValue;\n\tconst navigationProperty = model.getProperty(\"/configuration/navigationProperty\");\n\tconst [selectProperty, navSelectedProperty] = selectedProperty.split(\"/\");\n\n\tif (navSelectedProperty && navigationProperty) {\n\t\tconst selectedNavProperties = navigationProperty.find((prop: Property) => prop.name === selectProperty);\n\t\tconst propertiesSelected = selectedNavProperties?.properties.find((prop: Property) => prop.name === navSelectedProperty);\n\t\tpropertyType = propertiesSelected?.type;\n\t\tselectedValue = model.getProperty(\"/configuration/$data\")[selectProperty][navSelectedProperty];\n\t} else {\n\t\tpropertyType = model.getProperty(\"/configuration/properties\").find((prop: Property) => prop.name === selectedProperty)?.type;\n\t\tselectedValue = model.getProperty(\"/configuration/$data\")[selectedProperty];\n\t}\n\n\treturn { propertyType, selectedValue };\n}\n\n/**\n * Disables or enables the apply unit of measure based on the selected property.\n * @param {JSONModel} model - The JSON model containing the configuration.\n * @param {string} selectedProperty - The name of the selected property.\n */\nfunction disableOrEnableUOMAndTrend(model: JSONModel, selectedProperty: string) {\n\tlet typeSupported = true;\n\tconst { propertyType, selectedValue } = getPropertyAndSelectedValue(model, selectedProperty);\n\tif (propertyType === \"Edm.String\") {\n\t\ttypeSupported = !isNaN(Number(selectedValue));\n\t}\n\tconst isDateType = checkForDateType(propertyType);\n\tconst isUoMEnabled = !(propertyType === \"Edm.Boolean\" || propertyType === \"Edm.Guid\" || isDateType) && typeSupported;\n\tconst isNumberType = [\"Edm.Decimal\", \"Edm.Int16\", \"Edm.Int32\", \"Edm.Double\"].indexOf(propertyType) > -1;\n\tmodel.setProperty(\"/configuration/advancedFormattingOptions/isUoMEnabled\", isUoMEnabled);\n\tmodel.setProperty(\"/configuration/advancedFormattingOptions/isTrendEnabled\", isNumberType);\n}\n\nfunction updateContentNavigationSelection(oEvent: Event) {\n\tconst { rootComponent, entitySet } = Application.getInstance().fetchDetails();\n\tconst control: ComboBox = oEvent.getSource();\n\tlet selectedKey = control.getSelectedKey() || \"\";\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst sPath = control?.getBindingContext()?.getPath() as string;\n\tconst group: GroupItem = oModel.getProperty(sPath);\n\tconst currentValue = `{${group.name}/${selectedKey}}`;\n\tgroup.value =\n\t\tselectedKey &&\n\t\tgetArrangements(currentValue, {\n\t\t\tunitOfMeasures: oModel.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\"),\n\t\t\ttextArrangements: oModel.getProperty(\"/configuration/advancedFormattingOptions/textArrangements\"),\n\t\t\tpropertyValueFormatters: oModel.getProperty(\"/configuration/advancedFormattingOptions/propertyValueFormatters\")\n\t\t});\n\tupdateSelectedNavigation(selectedKey, group.name, oModel, \"content\");\n\n\tconst navProperty = ODataUtils.getPropertyLabel(\n\t\trootComponent.getModel() as Model,\n\t\tentitySet,\n\t\tgroup.name,\n\t\tPropertyInfoType.NavigationProperty\n\t) as NavigationParameter;\n\tconst property = navProperty?.properties?.find((oProperty) => oProperty.name === selectedKey);\n\tconst propertyLabel = property ? property.label : \"\";\n\tgroup.label = propertyLabel ? propertyLabel : \"\";\n\n\toModel.refresh();\n\tupdateCardGroups(oModel);\n\tselectedKey = `${group.name}/${selectedKey}`;\n\tsetValueStateForAdvancedPanel(selectedKey);\n\ttranspileIntegrationCardToAdaptive(getDialogModel() as JSONModel);\n}\n\nfunction updateSelectedNavigation(selectedKey: string, sourceProperty: string, oModel: JSONModel, source: string) {\n\tconst selectedNavigation: NavigationParameter[] =\n\t\tsource === \"header\"\n\t\t\t? oModel.getProperty(\"/configuration/selectedHeaderNavigation\")\n\t\t\t: oModel.getProperty(\"/configuration/selectedContentNavigation\");\n\tconst existingIndex = selectedNavigation.findIndex((navItem) => navItem.name === sourceProperty);\n\n\tif (existingIndex !== -1) {\n\t\tconst existingItem = selectedNavigation[existingIndex];\n\t\tconst navValues = existingItem?.value?.includes(selectedKey) ? existingItem.value : [...existingItem.value, selectedKey];\n\t\tselectedNavigation[existingIndex] = { ...existingItem, value: navValues };\n\t} else {\n\t\tconst name = sourceProperty;\n\t\tselectedNavigation.push({ name, value: [selectedKey] });\n\t}\n\n\tconst propertyPath = source === \"header\" ? \"/configuration/selectedHeaderNavigation\" : \"/configuration/selectedContentNavigation\";\n\toModel.setProperty(propertyPath, selectedNavigation);\n}\nasync function updateSelectedNavigationProperty(selectedKey: string, isHeader: boolean) {\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst navigationProperty: NavigationParameter[] = oModel.getProperty(\"/configuration/navigationProperty\") || [];\n\tconst selectedNavigationalProperties: NavigationalData[] = oModel.getProperty(\"/configuration/selectedNavigationalProperties\") || [];\n\tconst existingIndex = selectedNavigationalProperties.findIndex((navItem) => navItem.name === selectedKey);\n\n\tconst selectedProperty = navigationProperty.find((prop) => prop.name === selectedKey);\n\tconst selectedPropertyName = selectedProperty?.name || \"\";\n\tconst selectedPropertyValues = selectedProperty?.properties || [];\n\n\tconst data: NavigationalData = {\n\t\tname: selectedPropertyName,\n\t\tvalue: selectedPropertyValues\n\t};\n\n\tif (existingIndex === -1 && selectedProperty) {\n\t\tselectedNavigationalProperties.push(data);\n\t}\n\toModel.setProperty(\"/configuration/selectedNavigationalProperties\", selectedNavigationalProperties);\n\tif (isHeader) {\n\t\toModel.setProperty(\"/configuration/selectedNavigationPropertyHeader\", data);\n\t} else {\n\t\toModel.setProperty(\"/configuration/selectedNavigationPropertiesContent\", data);\n\t}\n\n\tif (selectedProperty) {\n\t\tawait updateCardConfigurationData(selectedProperty.name, data);\n\t}\n}\n\nfunction getTranslatedText(sKey: string) {\n\treturn getDialogModel(\"i18n\").getObject(sKey);\n}\n\nfunction onAddClick(oEvent: Event) {\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst comboBox: ComboBox = oEvent.getSource();\n\tconst sPath = comboBox.getBindingContext()?.getPath();\n\n\tif (sPath) {\n\t\tconst group = oModel.getProperty(sPath);\n\t\tif (!group.items) {\n\t\t\tgroup.items = [];\n\t\t}\n\t\tconst nextItemNumber = oModel.getProperty(sPath).items.length;\n\t\tconst newItem = {\n\t\t\tlabel: null,\n\t\t\tvalue: `{/items/${nextItemNumber}}`,\n\t\t\tisEnabled: false,\n\t\t\tisNavigationEnabled: false,\n\t\t\tnavigationalProperties: []\n\t\t};\n\t\toModel.getProperty(sPath).items.push(newItem);\n\t\tconst iItemsAdded = oModel.getProperty(sPath).items.length;\n\t\toModel.setProperty(sPath + \"/enableAddMoreGroupItems\", true);\n\t\tif (iItemsAdded === MAX_GROUP_ITEMS) {\n\t\t\toModel.setProperty(sPath + \"/enableAddMoreGroupItems\", false);\n\t\t}\n\t\toModel.setProperty(\"/configuration/isEdited\", true);\n\t\toModel.refresh();\n\t}\n}\n\nasync function okPressed() {\n\tconst { rootComponent, entitySet } = Application.getInstance().fetchDetails();\n\n\tconst hasError = validateHeader();\n\tif (hasError) {\n\t\treturn;\n\t}\n\n\tconst oCard = CoreElement.getElementById(\"cardGeneratorDialog--cardPreview\") as Card;\n\tconst mManifest = oCard.getManifest() as CardManifest;\n\n\tawait enhanceManifestWithInsights(mManifest, rootComponent);\n\tenhanceManifestWithConfigurationParameters(mManifest, getDialogModel() as JSONModel);\n\tcreateAndStoreGeneratedi18nKeys(mManifest);\n\tupdateManifestWithSelectQueryParams(mManifest);\n\n\tdelete mManifest[\"sap.card\"].configuration?.parameters?.contextParameters;\n\tconst payload = {\n\t\tfloorplan: \"ObjectPage\",\n\t\tlocalPath: `cards/op/${entitySet}`,\n\t\tfileName: \"manifest.json\",\n\t\tmanifests: [\n\t\t\t{\n\t\t\t\ttype: \"integration\",\n\t\t\t\tmanifest: mManifest,\n\t\t\t\tdefault: true,\n\t\t\t\tentitySet: entitySet\n\t\t\t}\n\t\t]\n\t};\n\n\tjQuery.ajax({\n\t\ttype: \"POST\",\n\t\turl: \"/cards/store\",\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\"\n\t\t},\n\t\tdata: JSON.stringify(payload),\n\t\tsuccess: function () {\n\t\t\tMessageToast.show(getTranslatedText(\"CARD_SAVE_SUCCESS_MESSAGE\"));\n\t\t},\n\t\terror: function (jqXHR, textStatus, errorThrown) {\n\t\t\tconst errorMessage = `Unable to save the card: ${textStatus} - ${errorThrown} (Status: ${jqXHR.status} - ${jqXHR.statusText})`;\n\t\t\tLog.error(errorMessage);\n\t\t\tMessageBox.error(getTranslatedText(\"CARD_SAVE_ERROR_MESSAGE\"));\n\t\t}\n\t});\n\t(getDialogModel() as JSONModel).setProperty(\"/configuration/isEdited\", false);\n\t(getCardGeneratorDialog() as Dialog)?.close();\n\ttoggleOffAdvancedPanel();\n}\n\nfunction validateHeader() {\n\tlet hasError = false;\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst errorControls = oModel.getProperty(\"/configuration/errorControls\");\n\terrorControls?.forEach((ele: ComboBox) => {\n\t\tif (!ele.getValue() || ele.getValueState() == \"Error\") {\n\t\t\tele.setValueState(ValueState.Error);\n\t\t\thasError = true;\n\t\t}\n\t});\n\treturn hasError;\n}\n\nfunction validateIndicatorsValues(buttonId: string) {\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst indicatorsValue = oModel.getProperty(\"/configuration/indicatorsValue\");\n\tlet hasError = false;\n\tconst { targetValue, deviationValue, targetUnit, deviationUnit } = indicatorsValue;\n\n\tif (!targetValue) {\n\t\toModel.setProperty(\"/configuration/indicatorsValue/targetValueState\", \"Error\");\n\t\tconst targetInputId = buttonId + \"--targetInputValue\";\n\t\tsetValueStateTextForControl(targetInputId, getTranslatedText(\"TARGET_VALUE_ERR_MSG\"));\n\t}\n\tif (!deviationValue) {\n\t\toModel.setProperty(\"/configuration/indicatorsValue/deviationValueState\", \"Error\");\n\t\tconst deviationInputId = buttonId + \"--deviationInputValue\";\n\t\tsetValueStateTextForControl(deviationInputId, getTranslatedText(\"DEVIATION_VALUE_ERR_MSG\"));\n\t}\n\tif (!targetUnit) {\n\t\toModel.setProperty(\"/configuration/indicatorsValue/targetUnitValueState\", \"Error\");\n\t\tconst targetUnitInputId = buttonId + \"--targetUnitInput\";\n\t\tsetValueStateTextForControl(targetUnitInputId, getTranslatedText(\"TARGET_UNIT_ERR_MSG\"), true);\n\t}\n\tif (!deviationUnit) {\n\t\toModel.setProperty(\"/configuration/indicatorsValue/deviationUnitValueState\", \"Error\");\n\t\tconst deviationUnitInputId = buttonId + \"--deviationUnitInput\";\n\t\tsetValueStateTextForControl(deviationUnitInputId, getTranslatedText(\"DEVIATION_UNIT_ERR_MSG\"), true);\n\t}\n\tif (!targetValue || !deviationValue || !targetUnit || !deviationUnit) {\n\t\thasError = true;\n\t}\n\treturn hasError;\n}\n\nfunction validateTrendValues(buttonId: string) {\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst trendValues = oModel.getProperty(\"/configuration/trendOptions\");\n\tlet hasError = false;\n\tconst { referenceValue, downDifference, upDifference } = trendValues;\n\n\tif (!referenceValue) {\n\t\toModel.setProperty(\"/configuration/trendOptions/referenceValueState\", \"Error\");\n\t\tconst referenceInputId = buttonId + \"--trendReferenceValueInput\";\n\t\tsetValueStateTextForControl(referenceInputId, getTranslatedText(\"REF_ERR_MSG\"));\n\t}\n\tif (!downDifference) {\n\t\toModel.setProperty(\"/configuration/trendOptions/downDifferenceValueState\", \"Error\");\n\t\tconst trendDownDifferenceInputId = buttonId + \"--trendDownDifferenceInput\";\n\t\tsetValueStateTextForControl(trendDownDifferenceInputId, getTranslatedText(\"LOW_RANGE_ERR_MSG\"));\n\t}\n\tif (!upDifference) {\n\t\toModel.setProperty(\"/configuration/trendOptions/upDifferenceValueState\", \"Error\");\n\t\tconst trendUpDifferenceInputId = buttonId + \"--trendUpDifferenceInput\";\n\t\tsetValueStateTextForControl(trendUpDifferenceInputId, getTranslatedText(\"HIGH_RANGE_ERR_MSG\"));\n\t}\n\tif (!referenceValue || !downDifference || !upDifference) {\n\t\thasError = true;\n\t}\n\treturn hasError;\n}\n\nfunction setValueStateTextForControl(controlId: string, errorMessage: string, isSelectControl?: boolean) {\n\tconst elementControl = CoreElement?.getElementById(controlId) as ComboBox;\n\telementControl.key = errorMessage;\n\tconst validateControl = isSelectControl\n\t\t? !elementControl?.getSelectedKey() || elementControl.getValueState() == \"Error\"\n\t\t: !elementControl?.getValue() || elementControl.getValueState() == \"Error\";\n\tif (validateControl) {\n\t\tconst resourceBundle = (getDialogModel(\"i18n\") as ResourceModel)?.getResourceBundle() as ResourceBundle;\n\t\tconst validationText = resourceBundle?.getText(\"GENERIC_ERR_MSG\", [elementControl?.key]);\n\t\telementControl?.setValueStateText(validationText);\n\t}\n}\n\nfunction onGroupAddClick(oEvent: any) {\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst iLength = oModel.getProperty(\"/configuration/groups\").length;\n\tconst currentDefaultValue = ((getDialogModel(\"i18n\") as ResourceModel)?.getResourceBundle() as ResourceBundle)?.getText(\n\t\t\"GENERATOR_DEFAULT_GROUP_NAME\",\n\t\t[iLength + 1]\n\t);\n\toModel.getProperty(\"/configuration/groups\").push({\n\t\ttitle: currentDefaultValue,\n\t\titems: [\n\t\t\t{\n\t\t\t\tlabel: null,\n\t\t\t\tvalue: \"{/items/0}\",\n\t\t\t\tisEnabled: false,\n\t\t\t\tisNavigationEnabled: false,\n\t\t\t\tnavigationalProperties: []\n\t\t\t}\n\t\t],\n\t\tnewItem: {\n\t\t\tlabel: null,\n\t\t\tvalue: null,\n\t\t\tisEnabled: false,\n\t\t\tisNavigationEnabled: false,\n\t\t\tnavigationalProperties: []\n\t\t}\n\t});\n\tconst groupLength = oModel.getProperty(\"/configuration/groups\").length;\n\tif (groupLength === MAX_GROUPS) {\n\t\toModel.setProperty(\"/configuration/groupLimitReached\", true);\n\t}\n\toModel.setProperty(\"/configuration/isEdited\", true);\n\toModel.refresh();\n\tupdateCardGroups(oModel);\n\ttranspileIntegrationCardToAdaptive(getDialogModel() as JSONModel);\n}\n\nfunction deleteGroup(event: any) {\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst sPath = event.getSource().getBindingContext().getPath();\n\tconst groupIndex = sPath.split(\"/configuration/groups/\")[1];\n\toModel.getProperty(\"/configuration/groups\").splice(groupIndex, 1);\n\tconst groupLength = oModel.getProperty(\"/configuration/groups\").length;\n\tif (groupLength < MAX_GROUPS) {\n\t\toModel.setProperty(\"/configuration/groupLimitReached\", false);\n\t}\n\tdelete context._itemActionsMenu;\n\toModel.setProperty(\"/configuration/isEdited\", true);\n\toModel.refresh();\n\tupdateCardGroups(oModel);\n\tsetValueStateForAdvancedPanel();\n\ttranspileIntegrationCardToAdaptive(getDialogModel() as JSONModel);\n}\n\nfunction onGroupDeleteClick(event: any) {\n\tconst resourceBundle = (getDialogModel(\"i18n\") as ResourceModel)?.getResourceBundle() as ResourceBundle;\n\tconst warningMessage = resourceBundle?.getText(\"GENERATOR_DELETE_GROUP_WARNING\") || \"\";\n\tMessageBox.warning(warningMessage, {\n\t\tactions: [MessageBox.Action.DELETE, MessageBox.Action.CANCEL],\n\t\temphasizedAction: MessageBox.Action.DELETE,\n\t\tonClose: function (action: string) {\n\t\t\tif (action === \"DELETE\") {\n\t\t\t\tdeleteGroup(event);\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction onGroupTitleChange(oEvent: any) {\n\tconst currentValue = oEvent.getParameters().newValue;\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst sPath = oEvent.getSource().getBindingContext().getPath();\n\tconst group = oModel.getProperty(sPath);\n\tgroup.title = currentValue;\n\toModel.refresh();\n\tupdateCardGroups(oModel);\n\ttranspileIntegrationCardToAdaptive(getDialogModel() as JSONModel);\n}\n\nfunction onDeleteClick(oEvent: any) {\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst sPath = oEvent.getSource().getBindingContext().getPath();\n\tconst [groupIndex, itemIndex] = sPath.match(/(\\d+)/g).map(function (sValue: string) {\n\t\treturn Number(sValue);\n\t});\n\toModel.getProperty(\"/configuration/groups/\" + groupIndex).items.splice(itemIndex, 1);\n\tconst iLength = oModel.getProperty(\"/configuration/groups/\" + groupIndex).items.length;\n\tif (iLength < MAX_GROUP_ITEMS) {\n\t\toModel.setProperty(\"/configuration/groups/\" + groupIndex + \"/enableAddMoreGroupItems\", true);\n\t}\n\tcontext._itemActionsMenu?.destroy();\n\tdelete context._itemActionsMenu;\n\toModel.setProperty(\"/configuration/isEdited\", true);\n\toModel.refresh();\n\tupdateCardGroups(oModel);\n\tsetValueStateForAdvancedPanel();\n\ttranspileIntegrationCardToAdaptive(getDialogModel() as JSONModel);\n}\n\n/**\n * Updates the sap.card.header.mainIndicator.trend property of the integration card manifest and triggers rendering of the card preview.\n */\nfunction updateTrendForCardHeader() {\n\tconst oModel = getDialogModel() as JSONModel;\n\tlet trendOptions = oModel.getProperty(\"/configuration/trendOptions\");\n\tconst selectedTrendOptions = oModel.getProperty(\"/configuration/selectedTrendOptions\");\n\n\tconst sapCardHeader = {\n\t\t\"sap.card\": {\n\t\t\theader: {\n\t\t\t\tmainIndicator: {\n\t\t\t\t\ttrend: \"None\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tlet selectedTrendOptionIndex = -1;\n\tselectedTrendOptions?.forEach((selectedTrendOption: any, index: number) => {\n\t\tif (selectedTrendOption.sourceProperty === trendOptions.sourceProperty) {\n\t\t\tselectedTrendOptionIndex = index;\n\t\t\ttrendOptions = { ...selectedTrendOption, ...trendOptions };\n\t\t\toModel.setProperty(\"/configuration/trendOptions\", trendOptions);\n\t\t}\n\t});\n\tconst { referenceValue, downDifference, upDifference, sourceProperty } = trendOptions;\n\n\tif (referenceValue && downDifference && upDifference && sourceProperty) {\n\t\tconst newTrendValues = { referenceValue, downDifference, upDifference, sourceProperty };\n\t\tif (selectedTrendOptionIndex !== -1) {\n\t\t\tselectedTrendOptions[selectedTrendOptionIndex] = newTrendValues;\n\t\t} else {\n\t\t\tselectedTrendOptions.push(newTrendValues);\n\t\t}\n\t\tconst staticValues = {\n\t\t\treferenceValue: Number(referenceValue),\n\t\t\tdownDifference: Number(downDifference),\n\t\t\tupDifference: Number(upDifference)\n\t\t};\n\t\tsapCardHeader[\"sap.card\"][\"header\"][\"mainIndicator\"][\"trend\"] = getTrendDirection(staticValues);\n\t}\n\n\tconst currentManifest = getCurrentCardManifest();\n\tconst oManifest = merge(currentManifest, sapCardHeader) as CardManifest;\n\trenderCardPreview(oManifest, getDialogModel() as JSONModel);\n\ttranspileIntegrationCardToAdaptive(getDialogModel() as JSONModel);\n}\n\n/**\n * Updates the sap.card.header.sideIndicators property of the integration card manifest and triggers rendering of the card preview.\n */\nfunction updateSideIndicatorsForHeader() {\n\tconst oModel = getDialogModel() as JSONModel;\n\tlet indicatorsValue = oModel.getProperty(\"/configuration/indicatorsValue\");\n\tconst selectedIndicatorOptions = oModel.getProperty(\"/configuration/selectedIndicatorOptions\");\n\n\tlet selectedIndicatorOptionIndex = -1;\n\tselectedIndicatorOptions?.forEach((selectedIndicatorOption: any, index: number) => {\n\t\tif (selectedIndicatorOption.sourceProperty === indicatorsValue.sourceProperty) {\n\t\t\tselectedIndicatorOptionIndex = index;\n\t\t\tindicatorsValue = { ...selectedIndicatorOption, ...indicatorsValue };\n\t\t\toModel.setProperty(\"/configuration/indicatorsValue\", indicatorsValue);\n\t\t}\n\t});\n\n\tlet sapCardHeader = {\n\t\t\"sap.card\": {\n\t\t\theader: {\n\t\t\t\tsideIndicators: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"\",\n\t\t\t\t\t\tnumber: \"\",\n\t\t\t\t\t\tunit: \"\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"\",\n\t\t\t\t\t\tnumber: \"\",\n\t\t\t\t\t\tunit: \"\"\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t};\n\tconst { targetValue, deviationValue, targetUnit, deviationUnit, sourceProperty } = indicatorsValue;\n\tif (targetValue && deviationValue && targetUnit && deviationUnit && sourceProperty) {\n\t\tconst indicatorsValueToAdd = { targetValue, deviationValue, targetUnit, deviationUnit, sourceProperty };\n\t\tif (selectedIndicatorOptionIndex !== -1) {\n\t\t\tselectedIndicatorOptions[selectedIndicatorOptionIndex] = indicatorsValueToAdd;\n\t\t} else {\n\t\t\tselectedIndicatorOptions.push(indicatorsValueToAdd);\n\t\t}\n\t\toModel.setProperty(\"/configuration/indicatorsValue/targetDeviation\", targetValue);\n\t\tsapCardHeader = {\n\t\t\t\"sap.card\": {\n\t\t\t\theader: {\n\t\t\t\t\tsideIndicators: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Target\",\n\t\t\t\t\t\t\tnumber: targetValue,\n\t\t\t\t\t\t\tunit: targetUnit\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: \"Deviation\",\n\t\t\t\t\t\t\tnumber: deviationValue,\n\t\t\t\t\t\t\tunit: deviationUnit\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tconst currentManifest = getCurrentCardManifest();\n\tconst oManifest = merge(currentManifest, sapCardHeader) as CardManifest;\n\trenderCardPreview(oManifest, getDialogModel() as JSONModel);\n\toModel.refresh();\n\ttranspileIntegrationCardToAdaptive(getDialogModel() as JSONModel);\n}\n\n/**\n * Get trend direction based on the static values.\n * @param staticValues\n * @returns\n */\nfunction getTrendDirection(staticValues: object | undefined) {\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst mainIndicatorKey = oModel.getProperty(\"/configuration/mainIndicatorStatusKey\");\n\tconst trendValues = oModel.getProperty(\"/configuration/trendOptions\");\n\tconst { referenceValue } = trendValues;\n\n\tif (mainIndicatorKey && staticValues) {\n\t\toModel.setProperty(\"/configuration/trendOptions/upDown\", referenceValue);\n\t\treturn \"{= extension.formatters.formatTrendIcon(${\" + mainIndicatorKey + \"},\" + JSON.stringify(staticValues) + \") }\";\n\t}\n\treturn \"None\";\n}\n\nasync function onPropertySelection(oEvent: Event) {\n\tconst { rootComponent, entitySet } = Application.getInstance().fetchDetails();\n\tconst control: ComboBox = oEvent.getSource();\n\tconst selectedKey = control.getSelectedKey() || \"\";\n\tconst newValue = (oEvent.getParameter as (param: string) => string)(\"newValue\");\n\n\tconst currentValue = selectedKey !== \"\" ? `{${selectedKey}}` : newValue;\n\tconst oModel = getDialogModel() as JSONModel;\n\tvalidateControl(oEvent);\n\tawait updateSelectedNavigationProperty(selectedKey, false);\n\tconst selectedNavigationPropertiesContent = oModel.getProperty(\"/configuration/selectedNavigationPropertiesContent\");\n\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/sourceProperty\", selectedKey);\n\tconst sPath = control?.getBindingContext()?.getPath() as string;\n\tconst group = oModel.getProperty(sPath);\n\n\tif (!selectedNavigationPropertiesContent?.value?.length) {\n\t\tgroup.value =\n\t\t\tselectedKey &&\n\t\t\tgetArrangements(currentValue, {\n\t\t\t\tunitOfMeasures: oModel.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\"),\n\t\t\t\ttextArrangements: oModel.getProperty(\"/configuration/advancedFormattingOptions/textArrangements\"),\n\t\t\t\tpropertyValueFormatters: oModel.getProperty(\"/configuration/advancedFormattingOptions/propertyValueFormatters\")\n\t\t\t});\n\t} else {\n\t\tgroup.value = \"\";\n\t\tgroup.navigationProperty = \"\";\n\t\tgroup.navigationalProperties = selectedNavigationPropertiesContent?.value;\n\t}\n\n\tsetValueStateForAdvancedPanel(selectedKey);\n\n\tconst propertyLabel = ODataUtils.getPropertyLabel(rootComponent.getModel() as Model, entitySet, selectedKey, PropertyInfoType.Property);\n\tgroup.label = selectedNavigationPropertiesContent?.value?.length ? \"\" : propertyLabel;\n\tgroup.isNavigationEnabled = selectedNavigationPropertiesContent?.value?.length > 0;\n\tgroup.isEnabled = true;\n\toModel.refresh();\n\tupdateCardGroups(oModel);\n\ttranspileIntegrationCardToAdaptive(getDialogModel() as JSONModel);\n}\n\n/**\n * This function sets the ValueState of properties present in advanced formatting panel,\n * to ValueState.Information or ValueState.None on the basis of properties present in card preview.\n * @param selectedKey - The selected key from the ComboBox.\n */\nexport function setValueStateForAdvancedPanel(selectedKey?: string) {\n\tconst model = getDialogModel() as JSONModel;\n\tconst resourceBundle = (getDialogModel(\"i18n\") as ResourceModel)?.getResourceBundle() as ResourceBundle;\n\tconst informativeMessage = resourceBundle?.getText(\"UNSELECTED_ITEM\");\n\tconst previewItems = getPreviewItems(model);\n\tconst propertyPaths: Record<string, string> = {\n\t\tunitOfMeasures: \"/configuration/advancedFormattingOptions/unitOfMeasures\",\n\t\ttextArrangements: \"/configuration/advancedFormattingOptions/textArrangements\",\n\t\tcriticality: \"/configuration/mainIndicatorOptions/criticality\"\n\t};\n\t[\"unitOfMeasures\", \"textArrangements\", \"criticality\"].forEach((property) => {\n\t\tconst path = propertyPaths[property];\n\t\tconst formattingOptions = model.getProperty(path) ?? [];\n\t\tformattingOptions.forEach((item: UnitOfMeasures, index: number) => {\n\t\t\tlet itemName = item.name;\n\t\t\tlet navigationalProperty: boolean = false;\n\t\t\tif (path === propertyPaths.criticality && item.isNavigationForId && item.navigationKeyForId !== \"\") {\n\t\t\t\titemName = `${item.name}/${item.navigationKeyForId}`;\n\t\t\t}\n\t\t\tif (item.isNavigationForId && item.navigationKeyForId !== \"\") {\n\t\t\t\tnavigationalProperty = true;\n\t\t\t}\n\t\t\tconst isPropertyExists: boolean = previewItems.includes(itemName);\n\t\t\tif (!isPropertyExists && item.valueState !== ValueState.Information) {\n\t\t\t\tmodel.setProperty(`${path}/${index}/valueState`, ValueState.Information);\n\t\t\t\tmodel.setProperty(`${path}/${index}/valueStateText`, informativeMessage);\n\t\t\t\tif (navigationalProperty) {\n\t\t\t\t\tmodel.setProperty(`${path}/${index}/navigationValueState`, ValueState.Information);\n\t\t\t\t\tmodel.setProperty(`${path}/${index}/navigationValueStateText`, informativeMessage);\n\t\t\t\t}\n\t\t\t} else if (isPropertyExists && selectedKey && selectedKey === itemName && item.valueState === ValueState.Information) {\n\t\t\t\tmodel.setProperty(`${path}/${index}/valueState`, ValueState.None);\n\t\t\t\tmodel.setProperty(`${path}/${index}/valueStateText`, \"\");\n\t\t\t\tif (navigationalProperty) {\n\t\t\t\t\tmodel.setProperty(`${path}/${index}/navigationValueState`, ValueState.None);\n\t\t\t\t\tmodel.setProperty(`${path}/${index}/navigationValueStateText`, \"\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\nfunction onPropertyLabelChange(oEvent: any) {\n\tconst currentValue = oEvent.getParameters().newValue;\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst sPath = oEvent.getSource().getBindingContext().getPath();\n\tconst group = oModel.getProperty(sPath);\n\tgroup.label = currentValue;\n\toModel.refresh();\n\tupdateCardGroups(oModel);\n\ttranspileIntegrationCardToAdaptive(getDialogModel() as JSONModel);\n}\nfunction onDrop(oEvent: any) {\n\tconst oDragged = oEvent.getParameter(\"draggedControl\"),\n\t\toDropped = oEvent.getParameter(\"droppedControl\"),\n\t\tsInsertPosition = oEvent.getParameter(\"dropPosition\"),\n\t\toModel = getDialogModel() as JSONModel,\n\t\toDragPos = oDragged.getParent(),\n\t\toDropPos = oDropped.getParent(),\n\t\tsDraggedPath = oDragPos.getBindingContext().getPath(),\n\t\tsDroppedPath = oDropPos.getBindingContext().getPath(),\n\t\taDragItems = oModel.getProperty(sDraggedPath).items,\n\t\taDropItems = oModel.getProperty(sDroppedPath).items,\n\t\tiDragPosition = oDragPos.indexOfItem(oDragged),\n\t\tiDropPosition = oDropPos.indexOfItem(oDropped);\n\n\tconst oSelectedItem = aDragItems[iDragPosition];\n\t// insert the control in target aggregation, remove the item\n\tif (sInsertPosition === \"Before\" && aDropItems.length < MAX_GROUP_ITEMS) {\n\t\taDragItems.splice(iDragPosition, 1);\n\t\taDropItems.splice(iDropPosition, 0, oSelectedItem);\n\t} else if (sInsertPosition && aDropItems.length < MAX_GROUP_ITEMS) {\n\t\taDragItems.splice(iDragPosition, 1);\n\t\taDropItems.splice(iDropPosition + 1, 0, oSelectedItem);\n\t}\n\tif (aDragItems.length < MAX_GROUP_ITEMS) {\n\t\toModel.setProperty(sDraggedPath + \"/enableAddMoreGroupItems\", true);\n\t}\n\tif (aDropItems.length === MAX_GROUP_ITEMS) {\n\t\toModel.setProperty(sDroppedPath + \"/enableAddMoreGroupItems\", false);\n\t}\n\toModel.refresh();\n\tupdateCardGroups(oModel);\n\ttranspileIntegrationCardToAdaptive(getDialogModel() as JSONModel);\n}\nfunction onResetPressed() {\n\tconst oCard: any = CoreElement.getElementById(\"cardGeneratorDialog--cardPreview\");\n\toCard.setWidth();\n\toCard.setHeight();\n\t(CoreElement.getElementById(\"cardGeneratorDialog--widthInput\") as Input)?.setValue(\"\");\n\t(CoreElement.getElementById(\"cardGeneratorDialog--heightInput\") as Input)?.setValue(\"\");\n\toCard.refresh();\n}\nfunction onHeightChange(oEvent: any) {\n\tconst oCard: any = CoreElement.getElementById(\"cardGeneratorDialog--cardPreview\");\n\tconst currentValue = Number(oEvent.getParameters().newValue);\n\tcurrentValue > 200 ? oCard.setHeight(currentValue + \"px\") : oCard.setHeight(\"232px\");\n\toCard.refresh();\n}\nfunction onWidthChange(oEvent: any) {\n\tconst oCard: any = CoreElement.getElementById(\"cardGeneratorDialog--cardPreview\");\n\tconst currentValue = Number(oEvent.getParameters().newValue);\n\tcurrentValue > 200 ? oCard.setWidth(currentValue + \"px\") : oCard.setWidth(\"582px\");\n\toCard.refresh();\n}\n\nfunction closeDialog() {\n\tconst oModel = getDialogModel() as JSONModel;\n\tif (oModel) {\n\t\tif (!oModel.getProperty(\"/configuration/isEdited\")) {\n\t\t\ttoggleOffAdvancedPanel();\n\t\t}\n\t\tconst errorControls = oModel.getProperty(\"/configuration/errorControls\");\n\t\terrorControls?.forEach((ele: ComboBox) => {\n\t\t\tele.setValueState(ValueState.None);\n\t\t});\n\t}\n\n\t(getCardGeneratorDialog() as Dialog).close();\n}\n\nfunction setCriticalitySourceProperty(property: string) {\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst mainIndicatorCriticality = oModel?.getProperty(\"/configuration/mainIndicatorOptions/criticality\");\n\tlet relavantCriticality;\n\n\tconst relavantProperty = mainIndicatorCriticality?.filter((indicatorCriticality: Criticality) => {\n\t\tconst { name: indicatorName, propertyKeyForId } = indicatorCriticality;\n\t\treturn indicatorName === property || `${indicatorName}/${propertyKeyForId}` === property;\n\t});\n\tif (relavantProperty) {\n\t\trelavantCriticality = JSON.parse(JSON.stringify(relavantProperty));\n\t}\n\tif (relavantProperty?.length === 1) {\n\t\trelavantCriticality[0].hostCriticality = relavantProperty[0].criticality;\n\t\tdelete relavantCriticality.criticality;\n\t\toModel?.setProperty(\"/configuration/advancedFormattingOptions/sourceCriticalityProperty\", relavantCriticality);\n\t} else {\n\t\toModel?.setProperty(\"/configuration/advancedFormattingOptions/sourceCriticalityProperty\", [{ name: property }]);\n\t}\n}\n\nfunction onFormatTypeSelection(oEvent: any, oSource: ComboBox) {\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst sourceItem = oEvent.getParameter(\"item\");\n\tconst key = sourceItem.getKey();\n\toModel.setProperty(\"/configuration/popoverContentType\", key);\n\tconst aUom = oModel.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\");\n\tconst sSourceUoMProperty = oModel.getProperty(\"/configuration/advancedFormattingOptions/sourceUoMProperty\");\n\tif (aUom.length > 0) {\n\t\tconst aSourceUom = aUom.filter((oProperty: any) => {\n\t\t\treturn oProperty.name === sSourceUoMProperty;\n\t\t})[0];\n\t\tif (aSourceUom) {\n\t\t\toModel.setProperty(\"/configuration/advancedFormattingOptions/targetProperty\", aSourceUom.value);\n\t\t}\n\t}\n\tif (aPropsWithUoM.indexOf(sSourceUoMProperty) === -1) {\n\t\toModel.setProperty(\"/configuration/advancedFormattingOptions/targetProperty\", \"\");\n\t}\n\tonAdvancedFormattingConfigOpen(oEvent, oSource);\n}\n\nfunction onPropertyFormatting(oEvent: any) {\n\tconst oSource = oEvent.getSource();\n\tconst oModel = getDialogModel() as JSONModel;\n\tlet property = oModel.getProperty(\"/configuration/mainIndicatorStatusKey\");\n\tconst navSelectedKey = oModel.getProperty(\"/configuration/mainIndicatorNavigationSelectedKey\");\n\tif (navSelectedKey && !property.includes(\"/\")) {\n\t\tproperty = `${property}/${navSelectedKey}`;\n\t}\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/targetFormatterProperty\", property);\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/sourceUoMProperty\", property);\n\tdisableOrEnableUOMAndTrend(oModel, property);\n\tsetCriticalitySourceProperty(property);\n\tsetAdvancedFormattingOptionsEnablement(property);\n\n\tif (!context._advancedFormattingOptionsPopover) {\n\t\tFragment.load({\n\t\t\tid: \"advancedFormattingOptions\",\n\t\t\tname: \"sap.cards.ap.generator.app.fragments.configuration.AdvancedFormattingOptions\",\n\t\t\tcontroller: {\n\t\t\t\tonFormatTypeSelection: function (oEvent: any) {\n\t\t\t\t\tCardGeneratorDialogController.onFormatTypeSelection(oEvent, oSource);\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t\t.then(function (oPopover: any) {\n\t\t\t\tcontext._advancedFormattingOptionsPopover = oPopover;\n\t\t\t\toSource.addDependent(oPopover);\n\t\t\t\treturn oPopover;\n\t\t\t})\n\t\t\t.then(function (oPopover) {\n\t\t\t\tconst oContext = oSource.getBindingContext();\n\t\t\t\toPopover.setBindingContext(oContext);\n\t\t\t\toPopover.openBy(oSource);\n\t\t\t});\n\t} else {\n\t\tconst oContext = oSource.getBindingContext();\n\t\tcontext._advancedFormattingOptionsPopover.setBindingContext(oContext);\n\t\tcontext._advancedFormattingOptionsPopover.openBy(oSource);\n\t}\n}\n\nfunction onAdvancedFormattingConfigOpen(oEvent: any, oSource: any) {\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst oConfigurationController = {\n\t\tonPopoverClose: (oEvent: any) => {\n\t\t\tconst source = oEvent.getSource();\n\t\t\tsource?.destroy();\n\t\t},\n\t\tonPropertyFormatterChange: () => {\n\t\t\tupdateArrangements();\n\t\t\tconst buttonId = oSource?.getId();\n\t\t\tconst oPopover = CoreElement.getElementById(buttonId + \"--advanceFormattingPopover\");\n\t\t\t(oPopover as Popover)?.close();\n\t\t},\n\t\tapplyCriticality: () => applyCriticality(oEvent),\n\t\tapplyUoMFormatting: () => applyUoMFormatting(),\n\t\tapplyFormatting: () => {\n\t\t\tconst buttonId = oSource?.getId();\n\t\t\t(CoreElement.getElementById(buttonId + \"--headerFormatterEditor\") as CompactFormatterSelection).applyFormatter();\n\t\t\ttranspileIntegrationCardToAdaptive(getDialogModel() as JSONModel);\n\t\t},\n\t\tresetValueState(oEvent: any, isSelectControl?: boolean) {\n\t\t\tconst control = oEvent.getSource();\n\t\t\tconst currentValue = !isSelectControl ? oEvent.getParameters().newValue : control.getSelectedKey();\n\t\t\tif (currentValue !== \"\") {\n\t\t\t\tcontrol.setValueState(ValueState.None);\n\t\t\t}\n\t\t},\n\t\tonDownDifferenceChange(oEvent: any) {\n\t\t\toModel.setProperty(\"/configuration/trendOptions/downDifferenceValueState\", \"None\");\n\t\t\tthis.resetValueState(oEvent);\n\t\t},\n\t\tonUpDifferenceChange(oEvent: any) {\n\t\t\toModel.setProperty(\"/configuration/trendOptions/upDifferenceValueState\", \"None\");\n\t\t\tthis.resetValueState(oEvent);\n\t\t},\n\t\tonReferenceValInputChange(oEvent: any) {\n\t\t\toModel.setProperty(\"/configuration/trendOptions/referenceValueState\", \"None\");\n\t\t\tthis.resetValueState(oEvent);\n\t\t},\n\t\tonTargetValueChange(oEvent: any) {\n\t\t\toModel.setProperty(\"/configuration/indicatorsValue/targetValueState\", \"None\");\n\t\t\tthis.resetValueState(oEvent);\n\t\t},\n\t\tonDeviationValueChange(oEvent: any) {\n\t\t\toModel.setProperty(\"/configuration/indicatorsValue/deviationValueState\", \"None\");\n\t\t\tthis.resetValueState(oEvent);\n\t\t},\n\t\tonTargetUnitChange(oEvent: any) {\n\t\t\toModel.setProperty(\"/configuration/indicatorsValue/targetUnitValueState\", \"None\");\n\t\t\tthis.resetValueState(oEvent, true);\n\t\t},\n\t\tonDeviationUnitChange(oEvent: any) {\n\t\t\toModel.setProperty(\"/configuration/indicatorsValue/deviationUnitValueState\", \"None\");\n\t\t\tthis.resetValueState(oEvent, true);\n\t\t},\n\t\tapplyIndicators: () => {\n\t\t\tconst buttonId = oSource?.getId();\n\t\t\tconst hasIndicatorsError = validateIndicatorsValues(buttonId);\n\t\t\tif (!hasIndicatorsError) {\n\t\t\t\tupdateSideIndicatorsForHeader();\n\t\t\t\tcontext?._advancedFormattingConfigurationPopover?.close();\n\t\t\t}\n\t\t},\n\t\tapplyTrendCalculation: () => {\n\t\t\tconst buttonId = oSource?.getId();\n\t\t\tconst hasTrendError = validateTrendValues(buttonId);\n\t\t\tif (!hasTrendError) {\n\t\t\t\tupdateTrendForCardHeader();\n\t\t\t\tcontext?._advancedFormattingConfigurationPopover?.close();\n\t\t\t}\n\t\t},\n\t\tonDelete: () => {\n\t\t\tconst oModel = getDialogModel() as JSONModel;\n\t\t\tconst sourceUoMProperty: any = oModel?.getProperty(\"/configuration/advancedFormattingOptions/sourceUoMProperty\");\n\t\t\tconst iIndex = aPropsWithUoM?.indexOf(sourceUoMProperty);\n\t\t\taPropsWithUoM?.splice(iIndex, 1);\n\t\t\toModel?.setProperty(\"/configuration/advancedFormattingOptions/targetProperty\", \"\");\n\n\t\t\tconst itemsBindingPath: string = \"/configuration/advancedFormattingOptions/unitOfMeasures\",\n\t\t\t\tunitOfMeasures: any = oModel?.getProperty(itemsBindingPath);\n\t\t\tlet relativeIndex: number = -1;\n\t\t\tconst propertyValueFormatters = oModel.getProperty(\"/configuration/advancedFormattingOptions/propertyValueFormatters\");\n\t\t\tconst updatedPropertyValueFormatters = propertyValueFormatters.filter(\n\t\t\t\t(formatter: ValueFormatter) => formatter.property !== sourceUoMProperty\n\t\t\t);\n\t\t\toModel.setProperty(\"/configuration/advancedFormattingOptions/propertyValueFormatters\", updatedPropertyValueFormatters);\n\t\t\toModel.setProperty(\"/configuration/isEdited\", true);\n\t\t\tfor (let i = 0; i < unitOfMeasures.length; i++) {\n\t\t\t\tif (unitOfMeasures[i]?.name === sourceUoMProperty) {\n\t\t\t\t\trelativeIndex = i;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (relativeIndex >= 0 && itemsBindingPath) {\n\t\t\t\tconst sPath = itemsBindingPath + \"/\" + relativeIndex;\n\t\t\t\tunitOfMeasures?.splice(sPath.slice(sPath.length - 1), 1);\n\t\t\t\tupdateArrangements();\n\t\t\t\toModel?.refresh();\n\t\t\t}\n\t\t\tcontext?._advancedFormattingConfigurationPopover?.close();\n\t\t},\n\t\tonTrendDelete: () => onTrendDelete(),\n\t\tonIndicatorsDelete: () => {\n\t\t\tconst oModel = getDialogModel() as JSONModel;\n\t\t\tconst indicatorsValue = oModel.getProperty(\"/configuration/indicatorsValue\");\n\t\t\tconst selectedIndicatorValues = oModel.getProperty(\"/configuration/selectedIndicatorOptions\");\n\t\t\tlet iIndex: number = -1;\n\t\t\tselectedIndicatorValues?.forEach((trend: any, index: number) => {\n\t\t\t\tif (trend.sourceProperty === indicatorsValue.sourceProperty) {\n\t\t\t\t\tiIndex = index;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (iIndex !== -1) {\n\t\t\t\tselectedIndicatorValues.splice(iIndex, 1);\n\t\t\t}\n\t\t\toModel.setProperty(\"/configuration/indicatorsValue\", {});\n\t\t\toModel.setProperty(\"/configuration/isEdited\", true);\n\t\t\tupdateSideIndicatorsForHeader();\n\t\t\tcontext?._advancedFormattingConfigurationPopover?.close();\n\t\t},\n\t\tonDeleteFormatter: () => {\n\t\t\tconst buttonId = oSource?.getId();\n\t\t\tconst oModel = getDialogModel() as JSONModel;\n\t\t\toModel.setProperty(\"/configuration/isEdited\", true);\n\t\t\t(CoreElement.getElementById(buttonId + \"--headerFormatterEditor\") as CompactFormatterSelection).deleteFormatter();\n\t\t\ttranspileIntegrationCardToAdaptive(getDialogModel() as JSONModel);\n\t\t},\n\t\tonDeleteCriticality: (event: Event) => {\n\t\t\tconst oModel = getDialogModel() as JSONModel;\n\t\t\tconst buttonId = oSource?.getId();\n\t\t\t(CoreElement.getElementById(buttonId + \"--headerCriticalityEditor\") as CriticalityEditor).onDeleteButtonClicked(event);\n\t\t\toModel.setProperty(\"/configuration/advancedFormattingOptions/selectedKeyCriticality\", \"\");\n\t\t\toModel.setProperty(\"/configuration/isEdited\", true);\n\t\t\tupdateCriticality(false);\n\t\t\tcontext?._advancedFormattingConfigurationPopover?.close();\n\t\t}\n\t};\n\n\tif (oEvent?.getParameter(\"item\")?.getKey?.() === \"uom\") {\n\t\toConfigurationController.applyUoMFormatting();\n\t}\n\tif (oEvent.getSource()?.getParent()?.close) {\n\t\toEvent.getSource().getParent().close();\n\t}\n\n\tloadAdvancedFormattingConfigurationFragment(oSource, oConfigurationController);\n}\n\nfunction applyCriticality(oEvent: Event) {\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst mainIndicatorCriticality = oModel?.getProperty(\"/configuration/mainIndicatorOptions/criticality\");\n\tlet sourceCriticalityProperty = oModel?.getProperty(\"/configuration/advancedFormattingOptions/sourceCriticalityProperty\");\n\n\tsourceCriticalityProperty = sourceCriticalityProperty?.[0];\n\tconst navProperites = oModel?.getProperty(\"/configuration/navigationProperty\");\n\tconst isNavEnabled = sourceCriticalityProperty?.name?.includes(\"/\");\n\n\tif (isNavEnabled) {\n\t\tsourceCriticalityProperty.propertyKeyForId = sourceCriticalityProperty.name.split(\"/\")[1];\n\t\tsourceCriticalityProperty.navigationKeyForId = sourceCriticalityProperty.name.split(\"/\")[1];\n\t\tsourceCriticalityProperty.name = sourceCriticalityProperty.name.split(\"/\")[0];\n\t\tsourceCriticalityProperty.isNavigationForId = true;\n\t\tconst navSelectedProperies = navProperites?.filter((property: { name: string }) => {\n\t\t\treturn property?.name === sourceCriticalityProperty?.name.split(\"/\")[0];\n\t\t});\n\t\tsourceCriticalityProperty.navigationalPropertiesForId = navSelectedProperies[0]?.properties;\n\t}\n\tif (sourceCriticalityProperty?.hostCriticality !== sourceCriticalityProperty?.criticality) {\n\t\tsourceCriticalityProperty.criticality = sourceCriticalityProperty.hostCriticality;\n\t}\n\n\tconst propertyExists: boolean = mainIndicatorCriticality?.some((indicatorCriticality: Property) => {\n\t\tconst { name: indicatorName, propertyKeyForId } = indicatorCriticality;\n\t\tif (isNavEnabled) {\n\t\t\treturn indicatorName === sourceCriticalityProperty?.name && propertyKeyForId === sourceCriticalityProperty?.propertyKeyForId;\n\t\t} else {\n\t\t\treturn indicatorName === sourceCriticalityProperty?.name;\n\t\t}\n\t});\n\n\tif (!propertyExists && sourceCriticalityProperty) {\n\t\tdelete sourceCriticalityProperty.hostCriticality;\n\t\tmainIndicatorCriticality?.push(sourceCriticalityProperty);\n\t} else {\n\t\tfor (let i = 0; i < mainIndicatorCriticality.length; i++) {\n\t\t\tif (mainIndicatorCriticality[i]?.name === sourceCriticalityProperty?.name) {\n\t\t\t\tdelete mainIndicatorCriticality[i];\n\t\t\t\tdelete sourceCriticalityProperty.hostCriticality;\n\t\t\t\tmainIndicatorCriticality[i] = sourceCriticalityProperty;\n\t\t\t}\n\t\t}\n\t}\n\toModel?.setProperty(\"/configuration/mainIndicatorOptions/criticality\", mainIndicatorCriticality);\n\tupdateCriticality((oEvent.getParameter as (param: string) => boolean)(\"isCalcuationType\") || false);\n\tcontext?._advancedFormattingConfigurationPopover?.close();\n}\n\nfunction applyUoMFormatting() {\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst unitOfMeasures = oModel?.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\"),\n\t\tsourceProperty: string = oModel?.getProperty(\"/configuration/advancedFormattingOptions/sourceUoMProperty\");\n\tlet relavantProperty = unitOfMeasures?.filter((property: Property) => property?.name === sourceProperty),\n\t\ttargetProperty: string = oModel?.getProperty(\"/configuration/advancedFormattingOptions/targetProperty\");\n\trelavantProperty = relavantProperty?.[0];\n\n\tif (!targetProperty && relavantProperty) {\n\t\toModel.setProperty(\"/configuration/advancedFormattingOptions/targetProperty\", relavantProperty?.propertyKeyForDescription);\n\t}\n\n\ttargetProperty = oModel?.getProperty(\"/configuration/advancedFormattingOptions/targetProperty\");\n\tconst proprtetyKeyFromSource = sourceProperty.includes(\"/\") ? sourceProperty.split(\"/\")[0] : sourceProperty;\n\tconst navAllProperties = oModel.getProperty(\"/configuration/navigationProperty\");\n\tlet navPropertiesValues: object[] = [];\n\tif (sourceProperty.includes(\"/\") && navAllProperties) {\n\t\tnavPropertiesValues = getNavValues(navAllProperties, proprtetyKeyFromSource);\n\t}\n\tconst oData = {\n\t\tpropertyKeyForId: proprtetyKeyFromSource,\n\t\tname: sourceProperty,\n\t\tvalue: targetProperty,\n\t\tnavigationalPropertiesForId: navPropertiesValues.length === 0 ? \"\" : navPropertiesValues,\n\t\tisNavigationForId: sourceProperty.includes(\"/\") ? true : false,\n\t\tnavigationKeyForId: sourceProperty.includes(\"/\") ? sourceProperty.split(\"/\")[1] : \"\",\n\t\tpropertyKeyForDescription: targetProperty,\n\t\tisNavigationForDescription: false,\n\t\tnavigationKeyForDescription: \"\"\n\t};\n\tlet bMatchingProperty = false;\n\tunitOfMeasures.forEach((oUom: any) => {\n\t\tif (oUom.name === oData.name) {\n\t\t\tbMatchingProperty = true;\n\t\t\toUom.propertyKeyForDescription = oData.value;\n\t\t\toUom.value = oData.value;\n\t\t}\n\t});\n\tif (!bMatchingProperty && sourceProperty && targetProperty) {\n\t\tunitOfMeasures.push(oData);\n\t}\n\toModel.setProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\", unitOfMeasures);\n\tupdateArrangements();\n\tfor (let i = 0; i < unitOfMeasures.length; i++) {\n\t\tif (unitOfMeasures[i].value !== \"\" && aPropsWithUoM?.indexOf(unitOfMeasures[i]?.name) === -1) {\n\t\t\taPropsWithUoM?.push(unitOfMeasures[i]?.name);\n\t\t}\n\t}\n\tcontext?._advancedFormattingConfigurationPopover?.close();\n}\n\n/**\n * Retrieves the properties of a navigation property that matches the given key.\n *\n * @param {Array<{ name: string; properties: Array<object> }>} navProperties - An array of navigation properties, each containing a name and a list of properties.\n * @param {string} propertyKeyFromSource - The key to match against the name of the navigation properties.\n * @returns {Array<object>} The properties of the matching navigation property, or an empty array if no match is found.\n */\nfunction getNavValues(navProperties: [{ name: string; properties: Array<object> }], propertyKeyFromSource: string): Array<object> {\n\tfor (const navProperty of navProperties) {\n\t\tif (propertyKeyFromSource === navProperty?.name) {\n\t\t\treturn navProperty.properties;\n\t\t}\n\t}\n\treturn [];\n}\n\nfunction onTrendDelete() {\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst trendValues = oModel.getProperty(\"/configuration/trendOptions\");\n\tconst selectedTrendValues = oModel.getProperty(\"/configuration/selectedTrendOptions\");\n\tlet iIndex: number = -1;\n\tselectedTrendValues?.forEach((trend: TrendOrIndicatorOptions, index: number) => {\n\t\tif (trend.sourceProperty === trendValues.sourceProperty) {\n\t\t\tiIndex = index;\n\t\t}\n\t});\n\tif (iIndex !== -1) {\n\t\tselectedTrendValues.splice(iIndex, 1);\n\t}\n\toModel.setProperty(\"/configuration/trendOptions\", {});\n\toModel.setProperty(\"/configuration/isEdited\", true);\n\tupdateTrendForCardHeader();\n\tcontext?._advancedFormattingConfigurationPopover?.close();\n}\n\nfunction loadAdvancedFormattingConfigurationFragment(oSource: any, oConfigurationController: object) {\n\tFragment.load({\n\t\tid: oSource.getId(),\n\t\tname: \"sap.cards.ap.generator.app.fragments.configuration.AdvancedFormattingConfiguration\",\n\t\tcontroller: oConfigurationController\n\t})\n\t\t.then(function (oPopover: any) {\n\t\t\tcontext._advancedFormattingConfigurationPopover = oPopover;\n\t\t\tconst oResourceBundle = (getDialogModel(\"i18n\") as ResourceModel)?.getResourceBundle() as ResourceBundle;\n\t\t\tconst mLabels = {\n\t\t\t\tuomText: oResourceBundle?.getText(\"SELECT_UOM_TEXT\"),\n\t\t\t\tcriticalityText: oResourceBundle?.getText(\"SELECT_CRITICALITY_TEXT\"),\n\t\t\t\tformatterText: oResourceBundle?.getText(\"SELECT_FORMATTER_TEXT\"),\n\t\t\t\tindicatorsText: oResourceBundle?.getText(\"SELECT_INDICATORS_TEXT\"),\n\t\t\t\ttrendCalculatorText: oResourceBundle?.getText(\"TREND_CALCULATION_TEXT\")\n\t\t\t};\n\t\t\toPopover.setModel(new JSONModel(mLabels), \"i18nLabelText\");\n\t\t\toSource.addDependent(oPopover);\n\t\t\treturn oPopover;\n\t\t})\n\t\t.then(function (oPopover) {\n\t\t\tconst oContext = oSource.getBindingContext();\n\t\t\toPopover.setBindingContext(oContext);\n\t\t\toPopover.openBy(oSource);\n\t\t\treturn oPopover;\n\t\t});\n}\n\nfunction onItemsActionsButtonPressed(oEvent: any) {\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst sPath = oEvent?.getSource().getBindingContext().getPath();\n\tconst sourcePropertyName = oModel?.getProperty(sPath)?.name;\n\tconst navProperty = oModel?.getProperty(sPath)?.navigationProperty;\n\tconst sourceProperty = navProperty ? sourcePropertyName + \"/\" + navProperty : sourcePropertyName;\n\tconst oSource = oEvent.getSource();\n\tdisableOrEnableUOMAndTrend(oModel, sourceProperty);\n\tsetAdvancedFormattingOptionsEnablement(sourceProperty);\n\tconst oController = {\n\t\tonNavigationActionSelect: (oEvent: any) => {\n\t\t\tconst sId = oEvent.getParameter(\"item\").getId();\n\t\t\tconst oModel = getDialogModel() as JSONModel;\n\t\t\tif (sId === \"formatter\" || sId === \"uom\") {\n\t\t\t\thandleFormatterUomAction(sId, oEvent, oModel);\n\t\t\t\tonAdvancedFormattingConfigOpen(oEvent, oEvent.getSource().getParent());\n\t\t\t} else if (sId === \"criticality\") {\n\t\t\t\tconst propertyToBeSet = handleCriticalityAction(sId, oEvent, oModel);\n\t\t\t\tsetCriticalitySourceProperty(propertyToBeSet);\n\t\t\t\tonAdvancedFormattingConfigOpen(oEvent, oEvent.getSource().getParent());\n\t\t\t} else if (sId === \"actions\") {\n\t\t\t\t// do nothing\n\t\t\t} else {\n\t\t\t\tconst sourceItem = oEvent.getParameter(\"item\");\n\t\t\t\tconst customData = sourceItem.getCustomData();\n\t\t\t\tconst customAction = customData.filter((custom: any) => custom.getKey() === \"action\")[0];\n\t\t\t\tconst actionType = customAction.getValue();\n\t\t\t\tconst source = oEvent.getSource();\n\t\t\t\tconst sPath = source.getBindingContext().getPath();\n\t\t\t\tconst [groupIndex, itemIndex] = sPath.match(/(\\d+)/g).map((sValue: any) => Number(sValue));\n\t\t\t\tconst group = oModel.getProperty(\"/configuration/groups/\" + groupIndex);\n\t\t\t\tconst item = group.items[itemIndex];\n\n\t\t\t\tif (actionType === \"add\") {\n\t\t\t\t\tlet value = \"\";\n\t\t\t\t\tconst key = sourceItem.getId();\n\n\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\tcase \"url\":\n\t\t\t\t\t\t\tvalue = `${item.value}`;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"email\":\n\t\t\t\t\t\t\tvalue = `mailto: ${item.value}`;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"tel\":\n\t\t\t\t\t\t\tvalue = `tel: ${item.value}`;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (value === \"\") {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst actions = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: \"Navigation\",\n\t\t\t\t\t\t\tparameters: {\n\t\t\t\t\t\t\t\turl: value\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\n\t\t\t\t\titem[\"hasActions\"] = true;\n\t\t\t\t\titem[\"actionType\"] = key;\n\t\t\t\t\titem[\"actions\"] = actions;\n\t\t\t\t}\n\n\t\t\t\tif (actionType === \"remove\" && item.hasActions) {\n\t\t\t\t\tdelete item.hasActions;\n\t\t\t\t\tdelete item.actionType;\n\t\t\t\t\tdelete item.actions;\n\t\t\t\t}\n\t\t\t}\n\t\t\toModel.refresh();\n\t\t\tupdateCardGroups(oModel);\n\t\t\ttranspileIntegrationCardToAdaptive(getDialogModel() as JSONModel);\n\t\t}\n\t};\n\tif (!context._itemActionsMenu || context?._itemActionsMenu?.isDestroyed()) {\n\t\tFragment.load({\n\t\t\tname: \"sap.cards.ap.generator.app.fragments.configuration.ItemActions\",\n\t\t\tcontroller: oController\n\t\t}).then(\n\t\t\tfunction (oMenu: any) {\n\t\t\t\tcontext._itemActionsMenu = oMenu;\n\t\t\t\tconst oContext = oSource.getBindingContext();\n\t\t\t\toMenu.setBindingContext(oContext);\n\t\t\t\toSource.addDependent(oMenu);\n\t\t\t\tcontext._itemActionsMenu.open(false, oSource, Popup.Dock.BeginTop, Popup.Dock.BeginBottom, oSource);\n\t\t\t}.bind(oController)\n\t\t);\n\t} else {\n\t\tconst oContext = oSource.getBindingContext();\n\t\tcontext._itemActionsMenu.setBindingContext(oContext);\n\t\toSource.addDependent(context._itemActionsMenu);\n\t\tcontext._itemActionsMenu.open(false, oSource, Popup.Dock.BeginTop, Popup.Dock.BeginBottom, oSource);\n\t}\n}\n\n/**\n * Handles the formatter Unit of Measure (UoM) action by updating the model properties\n * based on the provided ID, event, and model.\n *\n * @param {string} id - The ID of the formatter UoM action.\n * @param event - The event object triggered by the action.\n * @param {JSONModel} model - The JSON model used to update the configuration properties.\n */\nfunction handleFormatterUomAction(id: string, event: any, model: JSONModel) {\n\tmodel?.setProperty(\"/configuration/popoverContentType\", id);\n\tconst path = event.getSource().getBindingContext().getPath();\n\tconst navProp = model.getProperty(path)?.navigationProperty;\n\tconst propertyToBeSet = model.getProperty(path)?.name + (navProp ? \"/\" + navProp : \"\");\n\tmodel?.setProperty(\"/configuration/advancedFormattingOptions/targetFormatterProperty\", propertyToBeSet);\n\tmodel?.setProperty(\"/configuration/advancedFormattingOptions/sourceUoMProperty\", propertyToBeSet);\n\tconst uom = model?.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\");\n\tconst sourceUoMProperty = model?.getProperty(\"/configuration/advancedFormattingOptions/sourceUoMProperty\");\n\tif (uom.length > 0) {\n\t\tconst sourceUom = uom.filter((property: { name: string }) => {\n\t\t\treturn property.name === sourceUoMProperty;\n\t\t})[0];\n\t\tif (sourceUom) {\n\t\t\tmodel?.setProperty(\"/configuration/advancedFormattingOptions/targetProperty\", sourceUom.value);\n\t\t}\n\t}\n\tif (aPropsWithUoM.length && aPropsWithUoM.indexOf(sourceUoMProperty) === -1) {\n\t\tmodel?.setProperty(\"/configuration/advancedFormattingOptions/targetProperty\", \"\");\n\t}\n}\n\n/**\n * Handles the criticality action by updating the model properties and returning the derived property path.\n *\n * @param {string} id - The ID of the criticality action.\n * @param event - The event object triggered by the action.\n * @param {JSONModel} model - The JSON model used to update the configuration properties.\n *\n * @returns {string} - The derived property path combining the property name and navigation property.\n */\nfunction handleCriticalityAction(id: string, event: any, model: JSONModel): string {\n\tmodel?.setProperty(\"/configuration/popoverContentType\", id);\n\tconst path = event.getSource().getBindingContext().getPath();\n\tconst navProp = model?.getProperty(path)?.navigationProperty;\n\tlet propertyToBeSet = model?.getProperty(path)?.name;\n\tif (navProp) {\n\t\tpropertyToBeSet = `${propertyToBeSet}/${navProp}`;\n\t}\n\treturn propertyToBeSet;\n}\n\nfunction onPreviewTypeChange(oEvent: any) {\n\tconst selectedCardType = oEvent.getSource().getSelectedItem().getBindingContext(\"previewOptions\").getProperty(\"type\");\n\tconst oCard: any = CoreElement.getElementById(\"cardGeneratorDialog--cardPreview\");\n\tconst oAdaptiveCardContainer: any = CoreElement.getElementById(\"cardGeneratorDialog--adaptiveCardPreviewContainer\");\n\tconst oCustomSize: any = CoreElement.getElementById(\"cardGeneratorDialog--custom-entry\");\n\toCard.setVisible(false);\n\toAdaptiveCardContainer.setVisible(false);\n\toCustomSize.setVisible(false);\n\tswitch (selectedCardType) {\n\t\tcase \"adaptive\":\n\t\t\toAdaptiveCardContainer.setVisible(true);\n\t\t\tsetTimeout(() => {\n\t\t\t\ttranspileIntegrationCardToAdaptive(getDialogModel() as JSONModel);\n\t\t\t}, 0);\n\t\t\tbreak;\n\t\tcase \"custom\":\n\t\t\toCard.setVisible(true);\n\t\t\toCustomSize.setVisible(true);\n\t\t\tbreak;\n\t\tcase \"integration\":\n\t\t\toCard.setVisible(true);\n\t\t\toCard.setWidth(oEvent.getSource().getSelectedItem().getBindingContext(\"previewOptions\").getProperty(\"width\"));\n\t\t\toCard.setHeight(oEvent.getSource().getSelectedItem().getBindingContext(\"previewOptions\").getProperty(\"height\"));\n\t\t\tbreak;\n\t\tdefault:\n\t\t\toCard.setVisible(true);\n\t\t\toCard.setWidth(oEvent.getSource().getSelectedItem().getBindingContext(\"previewOptions\").getProperty(\"width\"));\n\t\t\toCard.setHeight(oEvent.getSource().getSelectedItem().getBindingContext(\"previewOptions\").getProperty(\"height\"));\n\t\t\tbreak;\n\t}\n}\n\n/**\n * Update the sap.card.header of the integration card manifest by appling latest text arrangements, unit of measurement and formatters and triggers rendering of the card preview.\n * - This method is triggered when text arrrangement, unit of measurement or formatters are changed.\n */\nfunction updateHeaderArrangements() {\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst currentManifest = getCurrentCardManifest();\n\tconst header = currentManifest[\"sap.card\"].header;\n\tconst subtitle = resolvePropertyPathFromExpression(header.subTitle, currentManifest);\n\tconst unitOfMeasurement = resolvePropertyPathFromExpression(header.unitOfMeasurement, currentManifest);\n\tconst mainIndicatorValue =\n\t\toModel.getProperty(\"/configuration/navigationValue\") || oModel.getProperty(\"/configuration/mainIndicatorStatusKey\");\n\tconst aUnitOfMeasures = oModel.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\");\n\tconst aTextArrangements = oModel.getProperty(\"/configuration/advancedFormattingOptions/textArrangements\");\n\tconst aPropertyValueFormatters: FormatterConfigurationMap = oModel.getProperty(\n\t\t\"/configuration/advancedFormattingOptions/propertyValueFormatters\"\n\t);\n\n\tconst sapCardHeader = {\n\t\t\"sap.card\": {\n\t\t\theader: {\n\t\t\t\tmainIndicator: {\n\t\t\t\t\tnumber:\n\t\t\t\t\t\tmainIndicatorValue &&\n\t\t\t\t\t\tgetArrangements(`{${mainIndicatorValue}}`, {\n\t\t\t\t\t\t\tunitOfMeasures: aUnitOfMeasures,\n\t\t\t\t\t\t\ttextArrangements: aTextArrangements,\n\t\t\t\t\t\t\tpropertyValueFormatters: aPropertyValueFormatters\n\t\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tsubTitle: getArrangements(subtitle, {\n\t\t\t\t\tunitOfMeasures: aUnitOfMeasures,\n\t\t\t\t\ttextArrangements: aTextArrangements,\n\t\t\t\t\tpropertyValueFormatters: aPropertyValueFormatters\n\t\t\t\t}),\n\t\t\t\tunitOfMeasurement: getArrangements(unitOfMeasurement, {\n\t\t\t\t\tunitOfMeasures: aUnitOfMeasures,\n\t\t\t\t\ttextArrangements: aTextArrangements,\n\t\t\t\t\tpropertyValueFormatters: aPropertyValueFormatters\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t};\n\toModel.setProperty(\"/configuration/isEdited\", true);\n\tconst oManifest = merge(currentManifest, sapCardHeader) as CardManifest;\n\trenderCardPreview(oManifest, getDialogModel() as JSONModel);\n}\n\nfunction updateArrangements() {\n\tconst oModel = getDialogModel() as JSONModel;\n\tupdateHeaderArrangements();\n\tconst groups: ObjectCardGroups[] = oModel.getProperty(\"/configuration/groups\");\n\tgroups?.forEach(function (group) {\n\t\tgroup?.items?.forEach((groupItem) => {\n\t\t\tif (groupItem.name && groupItem.name !== \"\") {\n\t\t\t\tconst groupItemValue = groupItem.isNavigationEnabled ? `${groupItem.name}/${groupItem.navigationProperty}` : groupItem.name;\n\t\t\t\tgroupItem.value = getArrangements(`{${groupItemValue}}`, {\n\t\t\t\t\tunitOfMeasures: oModel.getProperty(\"/configuration/advancedFormattingOptions/unitOfMeasures\"),\n\t\t\t\t\ttextArrangements: oModel.getProperty(\"/configuration/advancedFormattingOptions/textArrangements\"),\n\t\t\t\t\tpropertyValueFormatters: oModel.getProperty(\"/configuration/advancedFormattingOptions/propertyValueFormatters\")\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t});\n\toModel.refresh();\n\tupdateCardGroups(oModel);\n\ttranspileIntegrationCardToAdaptive(getDialogModel() as JSONModel);\n}\n\nfunction updateCriticality(isCalcuationType: boolean) {\n\tconst currentManifest = getCurrentCardManifest();\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst mainIndicator = currentManifest[\"sap.card\"].header.mainIndicator;\n\tconst groups = (currentManifest[\"sap.card\"].content as ObjectContent).groups;\n\n\tif (!mainIndicator && groups.length < 1) {\n\t\treturn;\n\t}\n\tlet oManifest;\n\tif (mainIndicator) {\n\t\tconst mainIndicatorValue = resolvePropertyPathFromExpression(mainIndicator.number, currentManifest);\n\t\tconst sapCardHeader = {\n\t\t\t\"sap.card\": {\n\t\t\t\theader: {\n\t\t\t\t\tmainIndicator: {\n\t\t\t\t\t\tstate: getCriticality(mainIndicatorValue || mainIndicator.number, isCalcuationType)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\toManifest = merge(currentManifest, sapCardHeader) as CardManifest;\n\t} else {\n\t\toManifest = currentManifest;\n\t}\n\toModel.setProperty(\"/configuration/isEdited\", true);\n\trenderCardPreview(oManifest, getDialogModel() as JSONModel);\n\tupdateCardGroups(oModel);\n\ttranspileIntegrationCardToAdaptive(getDialogModel() as JSONModel);\n}\n\nasync function checkForNavigationProperty(event: Event, isTextArrangement?: boolean) {\n\tconst selectedParameters = event.getParameters() as EventParameters;\n\tconst selectedItem = selectedParameters.selectedItem;\n\tif (!selectedItem) return;\n\tconst model = getDialogModel() as JSONModel;\n\tconst navigationProperties: NavigationParameter[] = model.getProperty(\"/configuration/navigationProperty\") || [];\n\tconst selectedNavigationalProperties: NavigationalData[] = model.getProperty(\"/configuration/selectedNavigationalProperties\") || [];\n\n\tconst existingIndex = selectedNavigationalProperties.findIndex((navItem) => navItem.name === (selectedItem.value || selectedItem.name));\n\tconst selectedProperty = navigationProperties.find((prop) => prop.name === (selectedItem.value || selectedItem.name));\n\n\tconst { name: selectedPropertyName = \"\", properties: selectedPropertyValues = [] } = selectedProperty || {};\n\n\tconst data: NavigationalData = { name: selectedPropertyName, value: selectedPropertyValues };\n\n\tif (existingIndex === -1 && selectedProperty) {\n\t\tselectedNavigationalProperties.push(data);\n\t}\n\tmodel.setProperty(\"/configuration/selectedNavigationalProperties\", selectedNavigationalProperties);\n\n\tif (selectedProperty) {\n\t\tawait updateCardConfigurationData(selectedProperty.name, data);\n\t\tif (selectedParameters.textArrangementChanged) {\n\t\t\tselectedItem.navigationalPropertiesForId = data.value;\n\t\t\tselectedItem.isNavigationForId = data.value.length > 0;\n\t\t\tselectedItem.navigationKeyForId = \"\";\n\t\t} else {\n\t\t\tselectedItem.navigationalPropertiesForDescription = data.value;\n\t\t\tif (isTextArrangement) {\n\t\t\t\tselectedItem.isNavigationForDescription = data.value.length > 0;\n\t\t\t\tselectedItem.navigationKeyForDescription = \"\";\n\t\t\t}\n\t\t}\n\t\tif (isTextArrangement) {\n\t\t\tselectedItem.value = \"\"; // to reset navigation combobox value in the card and dropdown.\n\t\t}\n\t} else {\n\t\tif (selectedParameters.textArrangementChanged) {\n\t\t\tselectedItem.isNavigationForId = false;\n\t\t\tselectedItem.navigationKeyForId = \"\";\n\t\t} else {\n\t\t\tselectedItem.isNavigationForDescription = false;\n\t\t\tselectedItem.navigationKeyForDescription = \"\";\n\t\t}\n\t}\n}\n\nexport function toggleOffAdvancedPanel() {\n\tconst dialog = CoreElement.getElementById(\"cardGeneratorDialog--cardGeneratorDialog\") as Dialog;\n\tconst toggleButton = (dialog.getCustomHeader() as MenuBar).getContentMiddle()[4] as ToggleButton;\n\n\tif (toggleButton.getPressed()) {\n\t\ttoggleButton.setPressed(false);\n\t\tconst toggleEvent = new Event(\"toggle\", toggleButton, {});\n\t\ttoggleAdvancedSetting(toggleEvent);\n\t}\n}\n\nasync function toggleAdvancedSetting(toggleEvent: Event) {\n\tconst toggleButton: ToggleButton = toggleEvent.getSource();\n\ttoggleButton.setEnabled(false);\n\n\tconst splitter = CoreElement.getElementById(\"cardGeneratorDialog--contentSplitter\") as Splitter;\n\tconst controller = {\n\t\tonCriticalityChange: async (criticalityChangeEvent: Event<{ isCalcuationType: boolean }>) => {\n\t\t\tawait checkForNavigationProperty(criticalityChangeEvent, false);\n\t\t\tupdateCriticality(criticalityChangeEvent.getParameter(\"isCalcuationType\") || false);\n\t\t},\n\t\tonArrangementsChange: async (arrangementChangeEvent: Event) => {\n\t\t\tawait checkForNavigationProperty(arrangementChangeEvent, true);\n\t\t\tupdateArrangements();\n\t\t\tconst dialogModel = getDialogModel() as JSONModel;\n\t\t\tconst groups = dialogModel.getProperty(\"/configuration/groups\");\n\t\t\tdialogModel.setProperty(\"/configuration/isEdited\", true);\n\t\t\tfor (let i = 0; i < groups?.[0].items.length; i++) {\n\t\t\t\tconst item = groups[0].items[i];\n\t\t\t\tconst uom = item.value.split(\" \")[1] && item.value.split(\" \")[1].slice(1, -1);\n\n\t\t\t\tif (uom !== \"undefined\" && uom !== undefined) {\n\t\t\t\t\tdialogModel.setProperty(\"/configuration/advancedFormattingOptions/targetProperty\", uom);\n\t\t\t\t} else if (uom === undefined) {\n\t\t\t\t\tdialogModel.setProperty(\"/configuration/advancedFormattingOptions/targetProperty\", \"\");\n\t\t\t\t}\n\n\t\t\t\tif (uom !== \"undefined\" && uom !== undefined && aPropsWithUoM?.indexOf(item?.name) === -1) {\n\t\t\t\t\taPropsWithUoM.push(item?.name);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonPropertyFormatterChangeFromAdvancedSettings: function () {\n\t\t\tupdateHeaderArrangements();\n\t\t}\n\t};\n\n\tawait Fragment.load({\n\t\tname: \"sap.cards.ap.generator.app.fragments.AdvancedSettings\",\n\t\tcontroller: controller\n\t}).then(function (advancedSettings: Control | Control[]) {\n\t\tif (!toggleButton.getPressed()) {\n\t\t\tconst lastContentArea = splitter.getContentAreas()[1]; // position 1 is the advance panel\n\t\t\tsplitter.removeContentArea(lastContentArea);\n\t\t} else {\n\t\t\tsplitter.insertContentArea(advancedSettings as Control, 1); // position 1 is the advance panel\n\t\t}\n\t\ttoggleButton.setEnabled(true);\n\t\tsetTimeout(() => {\n\t\t\ttranspileIntegrationCardToAdaptive(getDialogModel() as JSONModel);\n\t\t}, 0);\n\t});\n}\n\nfunction setDefaultCardPreview() {\n\tconst comboBox = CoreElement.getElementById(\"cardGeneratorDialog--preview-select\") as ComboBox;\n\tif (comboBox) {\n\t\tconst selectedKey = comboBox.getSelectedKey();\n\t\tif (selectedKey !== \"int-default\") {\n\t\t\tcomboBox.setSelectedKey(\"int-default\");\n\t\t\tconst defaultIntegrationCard = CoreElement.getElementById(\"cardGeneratorDialog--cardPreview\") as Card;\n\t\t\tconst adaptiveCardContainer = CoreElement.getElementById(\"cardGeneratorDialog--adaptiveCardPreviewContainer\") as Control;\n\t\t\tconst customIntegrationCard = CoreElement.getElementById(\"cardGeneratorDialog--custom-entry\") as Control;\n\t\t\tadaptiveCardContainer.setVisible(false);\n\t\t\tcustomIntegrationCard.setVisible(false);\n\t\t\tdefaultIntegrationCard.setVisible(true);\n\n\t\t\tconst previewHostsProperties = getDialogModel(\"previewOptions\").getProperty(\"/hosts\");\n\t\t\tconst defaultPreviewOption = previewHostsProperties.find((option: Host) => option.key === \"int-default\");\n\t\t\tdefaultIntegrationCard.setWidth(defaultPreviewOption.width);\n\t\t\tdefaultIntegrationCard.setHeight(defaultPreviewOption.height);\n\t\t}\n\t}\n}\n\nfunction onBeforeDialogClosed(oEvent: object) {\n\tconst oModel = getDialogModel() as JSONModel;\n\tconst isDialogEdited = oModel?.getProperty(\"/configuration/isEdited\");\n\tconst resourceBundle = (getDialogModel(\"i18n\") as ResourceModel)?.getResourceBundle() as ResourceBundle;\n\tconst warningMessage = resourceBundle?.getText(\"GENERATOR_UNSAVED_CHANGE_WARNING\") || \"\";\n\tif (isDialogEdited) {\n\t\tMessageBox.warning(warningMessage, {\n\t\t\tactions: [MessageBox.Action.OK, MessageBox.Action.CANCEL],\n\t\t\temphasizedAction: MessageBox.Action.OK,\n\t\t\tonClose: function (sAction: string) {\n\t\t\t\tif (sAction === \"OK\") {\n\t\t\t\t\toModel.setProperty(\"/configuration/isEdited\", false);\n\t\t\t\t\ttoggleOffAdvancedPanel();\n\t\t\t\t\tcloseDialog();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\toEvent.preventDefault();\n\t}\n}\n"],"mappings":"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","ignoreList":[]}