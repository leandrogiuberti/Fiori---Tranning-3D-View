{"version":3,"file":"FooterActions-dbg-dbg.js","names":["sap","ui","define","Log","sap_m_library","CoreLib","___helpers_I18nHelper","___pages_Application","___utils_CommonUtils","_iteratorSymbol","Symbol","iterator","_settle","pact","state","value","s","_Pact","v","o","bind","then","observer","prototype","onFulfilled","onRejected","result","callback","e","_this","_isSettledPact","thenable","_forTo","array","body","check","i","reject","_cycle","length","addActionToCardManifest","manifest","controlProperties","rootComponent","Application","getInstance","fetchDetails","bODataV4","getDialogModel","getProperty","metaModel","getModel","getMetaModel","Promise","resolve","getAdaptiveCardAction","actionInfo","addActionToCardFooter","_forOf","target","step","next","done","return","_fixup","TypeError","values","push","ButtonType","resolveI18nTextFromResourceModel","ODataModelVersion","formActionInfoFromDataField","dataField","entitySetName","metadataAnnotationInfo","isConfirmationRequired","enablePath","getMetadataAnnotationInfoV4","getMetadataAnnotationInfoV2","label","Label","String","action","Action","split","getButtonTypeForCard","actionStyle","Accept","Reject","Default","addActionInfoToConfigParameters","configuration","parameters","footerActionParameters","_adaptiveFooterActionParameters","cardConfiguration","configParams","titleKey","removeActionInfoFromConfigParams","updateAdaptiveCardInfo","adaptiveCardStyle","adaptiveCardActionInfo","style","cardFooter","footer","actionsStrip","actionLength","type","visible","text","buttonType","actions","enabled","getActionStyles","actionStyles","name","labelWithValue","getActionFromDataField","dataFields","dataFieldForAnnotation","filter","dataFieldType","$Type","RecordType","map","updateActionParameterData","actionParameters","data","resourceBundle","actionParameter","errorMessage","placeholder","actionParameterConfig","valueHelpEntitySet","entitySet","_temp","updateModelData","serviceUrl","getActionsFromManifest","cardManifest","_exit","_temp7","_result","title","enablePathKey","isStyleControlEnabled","_temp6","_temp5","aKeys","Object","keys","_temp4","key","_temp3","triggerActionText","_temp2","getDefaultAction","resourceModel","mCardManifest","_exit2","_temp9","_result2","_temp8","_await$getActionsFrom","getCardActionInfo","_temp1","_getDefaultAction","annotationActions","cardActions","addedActions","styles","isAddActionEnabled","actionExists","odataModel","V4","getCardActions","_temp0","appComponent","appModel","getObject","getODataEntitySet","entityTypeName","entityType","getODataEntityType","identificationPath","entityTypeAnnotation","entityTypeKeys","identificationAnnotation","removeActionFromManifest","relatedAction","cardParameters","resetCardActions","updateCardManifestAction","forEach","isEnabledExpression","getActionStyle","getActionParameters","oResourceBundle","getResourceBundleFor","_temp12","parameter","_temp11","actionParamInfoToAdd","EnumMember","isRequired","nullable","id","getText","_temp10","getActionParameterConfigurationV2","functionImportInfo","enabledPathKey","verb","getActionParams","_getActionParams","getActionVerb","getFunctionImportInfo","mActionParams","parameterData","additionalParameters","_getActionParameters","actionParams","getRelatedBoundAction","actionValue","actionType","isBoundAction","$IsBound","$Parameter","some","actionParam","getRelatedUnboundActions","getValueHelpInfo","contextPath","actionParamName","requestValueListInfo","valueListInfo","valueListAnnotationInfo","valueListModel","$model","valueListPropertyName","getValueListPropertyName","valueHelpAnnotation","valueListModelServiceUrl","getServiceUrl","getActionParameterName","actionVerb","_exit3","_temp15","_result3","actionParameterAnnotation","entitySetInfo","_temp14","_temp13","oValueList","sPropertyName","oValueListParameter","Parameters","find","oParameter","LocalDataProperty","$PropertyPath","ValueListProperty","getActionParameterValue","propertyPath","descriptionPath","textArrangementType","fetch","valueHelpData","_temp16","json","valueHelpDataJson","valueHelpDataValue","d","results","getActionParameterConfiguration","oDialogModel","actionParamAnnotations","textArrangementPath","$Path","textArrangementAnnotation","actionParameterValue","$EnumMember","setProperty","getActionParameterInfo","_exit4","actionParamInfo","actionIndex","_temp18","isActionRequired","_temp17","$Nullable","_actionParam$$Name","$Name","_getActionParameterNa","_getActionParameterCo","getEnabledValueFromAnnotation","actionAnnotation","operationAvailable","Bool","getCriticalValueFromAnnotation","oCriticalAnnotation","undefined","oParameterValue","oActionValue","toLowerCase","dataFieldAction","indexOf","functionName","functionImport","getODataFunctionImport","replace","$kind","$Action","unBoundActions","relatedUnboundAction","relatedBoundAction","oContextObject","mKeyProperties","getPropertyKeys","oSkipProperties","importParameter","addParameterLabel","parameterName","isKey","parameterValue","hasOwnProperty","error","Error","skip","mode","toUpperCase","oKeyMap","propertyRef","property","getODataProperty","getParameterConfigFromValueList","serviceUrlPrefix","valueListParameters","selectProps","valueListPropertyPath","valueListParameter","valueListProperty","join","ValueListAnnotation","CollectionPath","sServiceUrl","__exports","__esModule"],"sources":["FooterActions.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport Log from \"sap/base/Log\";\nimport { ButtonType } from \"sap/m/library\";\nimport type UIComponent from \"sap/ui/core/Component\";\nimport CoreLib from \"sap/ui/core/Lib\";\nimport type {\n\tActionParameterConfiguration,\n\tAdaptiveCardAction,\n\tAdaptiveCardActionParameter,\n\tCardManifest,\n\tData\n} from \"sap/ui/integration/widgets/Card\";\nimport type JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type V2ODataMetaModel from \"sap/ui/model/odata/ODataMetaModel\";\nimport type { EntitySet, EntityType } from \"sap/ui/model/odata/ODataMetaModel\";\nimport type V2ODataModel from \"sap/ui/model/odata/v2/ODataModel\";\nimport type V4ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type V4ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport type ResourceModel from \"sap/ui/model/resource/ResourceModel\";\nimport { resolveI18nTextFromResourceModel } from \"../helpers/I18nHelper\";\nimport { Application, ODataModelVersion } from \"../pages/Application\";\nimport type {\n\tActionAnnotation,\n\tActionStyles,\n\tAnnotationAction,\n\tControlProperties,\n\tCriticalAction,\n\tFunctionImport,\n\tFunctionImportParameter,\n\tParametersInfoV2,\n\tProperty,\n\tValueListParameter\n} from \"../types/ActionTypes\";\nimport { getDialogModel } from \"../utils/CommonUtils\";\n\ntype ActionParameter = {\n\t$Type?: string;\n\t$Nullable?: boolean;\n\t$Name: string;\n};\n\ntype Action = {\n\t$IsBound: boolean;\n\t$Parameter?: Array<ActionParameter>;\n\t$Action?: string;\n};\n\ntype DataFieldString = {\n\tString: string;\n};\n\ntype DataFieldV4 = {\n\t$Type: string;\n\tRecordType: string;\n\tLabel: string;\n\tAction: string;\n};\n\ntype DataField = {\n\t$Type: string;\n\tRecordType: string;\n\tLabel: DataFieldString;\n\tAction: DataFieldString;\n};\n\ntype EntityTypeAnnotation = {\n\t[key: string]: Array<DataField>;\n};\n\ntype KeyMap = {\n\t[key: string]: boolean;\n};\n\ntype SkipProperty = {\n\t[key: string]: string;\n};\n\ntype ValueListAnnotationInfo = {\n\t$model: V4ODataModel;\n\t[\"CollectionPath\"]: string;\n\tParameters: Array<any>;\n};\n\ntype PropertyValue = string | null | undefined;\n\n/**\n * Forms the action info from the data field\n * @param dataField The data field\n * @param bODataV4 The OData version\n * @returns Action info\n */\nfunction formActionInfoFromDataField(\n\tdataField: DataField,\n\tbODataV4: boolean,\n\tmetaModel: V2ODataMetaModel | V4ODataMetaModel,\n\tentitySetName: string\n) {\n\tlet metadataAnnotationInfo = {\n\t\tisConfirmationRequired: false,\n\t\tenablePath: \"\"\n\t};\n\n\tif (bODataV4) {\n\t\tmetadataAnnotationInfo = getMetadataAnnotationInfoV4(\n\t\t\tdataField as unknown as DataFieldV4,\n\t\t\tmetaModel as V4ODataMetaModel,\n\t\t\tentitySetName\n\t\t);\n\t} else {\n\t\tmetadataAnnotationInfo = getMetadataAnnotationInfoV2(dataField as unknown as DataField, metaModel as V2ODataMetaModel);\n\t}\n\n\treturn {\n\t\tlabel: bODataV4 ? dataField?.Label : dataField?.Label?.String,\n\t\taction: bODataV4 ? dataField.Action : dataField.Action.String.split(\"/\")[1],\n\t\tisConfirmationRequired: metadataAnnotationInfo.isConfirmationRequired || false,\n\t\tenablePath: metadataAnnotationInfo.enablePath\n\t};\n}\n\n/**\n * Gets the button type for the card\n * @param actionStyle The action style\n * @returns The button type\n */\n\nfunction getButtonTypeForCard(actionStyle: string | undefined) {\n\tif (actionStyle === \"Positive\") {\n\t\treturn ButtonType.Accept;\n\t}\n\tif (actionStyle === \"Negative\") {\n\t\treturn ButtonType.Reject;\n\t}\n\treturn ButtonType.Default;\n}\n\n/**\n *\n * Adds action information to integration card configuration parameters\n *\n * @param manifest\n * @param actionInfo\n * @param controlProperties\n */\nfunction addActionInfoToConfigParameters(manifest: CardManifest, actionInfo: AdaptiveCardAction, controlProperties: ControlProperties) {\n\tif (!manifest[\"sap.card\"].configuration) {\n\t\tmanifest[\"sap.card\"].configuration = {\n\t\t\tparameters: {\n\t\t\t\tfooterActionParameters: {},\n\t\t\t\t_adaptiveFooterActionParameters: {}\n\t\t\t}\n\t\t};\n\t} else if (manifest[\"sap.card\"].configuration && !manifest[\"sap.card\"].configuration.parameters) {\n\t\tmanifest[\"sap.card\"].configuration.parameters = {\n\t\t\tfooterActionParameters: {},\n\t\t\t_adaptiveFooterActionParameters: {}\n\t\t};\n\t}\n\n\tconst cardConfiguration = manifest[\"sap.card\"].configuration;\n\tconst configParams = cardConfiguration.parameters;\n\n\tif (configParams && !configParams._adaptiveFooterActionParameters) {\n\t\tconfigParams._adaptiveFooterActionParameters = {};\n\t}\n\tif (configParams && !configParams.footerActionParameters) {\n\t\tconfigParams.footerActionParameters = {};\n\t}\n\n\tif (configParams?._adaptiveFooterActionParameters && configParams?.footerActionParameters) {\n\t\tconfigParams.footerActionParameters[controlProperties.titleKey] = actionInfo.parameters || {};\n\t\tconfigParams._adaptiveFooterActionParameters[controlProperties.titleKey] = actionInfo || {};\n\t}\n}\n\n/**\n *\n * Removes action information from integration card configuration parameters\n *\n * @param manifest\n * @param controlProperties\n */\nfunction removeActionInfoFromConfigParams(manifest: CardManifest, controlProperties: ControlProperties) {\n\tconst cardConfiguration = manifest[\"sap.card\"].configuration;\n\tconst configParams = cardConfiguration?.parameters;\n\tif (configParams?._adaptiveFooterActionParameters && configParams?.footerActionParameters) {\n\t\tdelete configParams.footerActionParameters[controlProperties.titleKey];\n\t\tdelete configParams._adaptiveFooterActionParameters[controlProperties.titleKey];\n\t}\n}\n\n/**\n *\n * Updates the style and enablePath for the adaptive card action\n *\n * @param manifest\n * @param controlProperties\n * @param adaptiveCardStyle\n * @param enablePath\n */\nfunction updateAdaptiveCardInfo(\n\tmanifest: CardManifest,\n\tcontrolProperties: ControlProperties,\n\tadaptiveCardStyle: string,\n\tenablePath: string\n) {\n\tconst cardConfiguration = manifest[\"sap.card\"].configuration;\n\tconst configParams = cardConfiguration?.parameters;\n\n\tif (configParams?._adaptiveFooterActionParameters && configParams?.footerActionParameters) {\n\t\tconst adaptiveCardActionInfo = configParams._adaptiveFooterActionParameters[controlProperties.titleKey];\n\t\tadaptiveCardActionInfo.style = adaptiveCardStyle;\n\t\tadaptiveCardActionInfo.enablePath = enablePath;\n\t}\n}\n\n/**\n * Adds the action to the card footer\n * @param manifest The card manifest\n * @param actionInfo The action info\n */\nfunction addActionToCardFooter(manifest: CardManifest, actionInfo: AdaptiveCardAction, controlProperties: ControlProperties) {\n\tlet cardFooter = manifest[\"sap.card\"].footer;\n\n\tif (!cardFooter) {\n\t\tmanifest[\"sap.card\"].footer = {\n\t\t\tactionsStrip: []\n\t\t};\n\t\tcardFooter = manifest[\"sap.card\"].footer;\n\t}\n\n\tconst actionLength = cardFooter.actionsStrip.length;\n\n\tif (actionLength < 2) {\n\t\tcardFooter.actionsStrip.push({\n\t\t\ttype: \"Button\",\n\t\t\tvisible: false,\n\t\t\ttext: actionInfo.label,\n\t\t\tbuttonType: getButtonTypeForCard(actionInfo.style),\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\ttype: \"custom\",\n\t\t\t\t\tenabled: actionInfo.enablePath ? \"${\" + actionInfo.enablePath + \"}\" : \"true\",\n\t\t\t\t\tparameters: \"{{parameters.footerActionParameters.\" + controlProperties.titleKey + \"}}\"\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\n\t\taddActionInfoToConfigParameters(manifest, actionInfo, controlProperties);\n\t}\n}\n\n/**\n * Gets the action styles for the card\n * @returns The action styles\n */\nexport function getActionStyles() {\n\tconst actionStyles: Array<ActionStyles> = [\n\t\t{\n\t\t\tname: \"Default\",\n\t\t\tlabel: \"Default\",\n\t\t\tlabelWithValue: \"Default\"\n\t\t},\n\t\t{\n\t\t\tname: \"Positive\",\n\t\t\tlabel: \"Positive\",\n\t\t\tlabelWithValue: \"Positive\"\n\t\t},\n\t\t{\n\t\t\tname: \"Negative\",\n\t\t\tlabel: \"Negative\",\n\t\t\tlabelWithValue: \"Negative\"\n\t\t}\n\t];\n\n\treturn actionStyles;\n}\n\n/**\n * Forms action info from the data field\n * @param dataFields The data fields\n * @param bODataV4 The OData version\n * @returns Action info\n */\nfunction getActionFromDataField(\n\tdataFields: Array<DataField>,\n\tbODataV4: boolean,\n\tmetaModel: V2ODataMetaModel | V4ODataMetaModel,\n\tentitySetName: string\n) {\n\tconst actions: Array<AnnotationAction> = [];\n\tconst dataFieldForAnnotation: string = \"com.sap.vocabularies.UI.v1.DataFieldForAction\";\n\n\tdataFields\n\t\t?.filter(function (dataField: DataField) {\n\t\t\tconst dataFieldType: string = bODataV4 ? dataField?.$Type : dataField?.RecordType;\n\t\t\treturn dataFieldType === dataFieldForAnnotation;\n\t\t})\n\t\t.map(function (dataField: DataField) {\n\t\t\tconst actionInfo = formActionInfoFromDataField(dataField, bODataV4, metaModel, entitySetName) as AnnotationAction;\n\t\t\tactions.push(actionInfo);\n\t\t});\n\n\treturn actions;\n}\n\n/**\n *\n * Updates the action parameter data to the model data.\n * Resolves the i18n keys for label, errorMessage and placeholder properties of adaptive card action parameters.\n *\n *\n * @param actionParameters\n * @param data\n * @param resourceBundle\n */\nconst updateActionParameterData = async function (\n\tactionParameters: AdaptiveCardActionParameter[],\n\tdata: Record<string, PropertyValue>,\n\tresourceBundle?: ResourceModel\n) {\n\tfor (const actionParameter of actionParameters) {\n\t\tif (resourceBundle) {\n\t\t\tactionParameter.label = resolveI18nTextFromResourceModel(actionParameter.label, resourceBundle);\n\t\t\tactionParameter.errorMessage = resolveI18nTextFromResourceModel(actionParameter?.errorMessage || \"\", resourceBundle);\n\t\t\tactionParameter.placeholder = resolveI18nTextFromResourceModel(actionParameter?.placeholder || \"\", resourceBundle);\n\t\t}\n\n\t\tconst actionParameterConfig = actionParameter.configuration;\n\t\tconst valueHelpEntitySet = actionParameterConfig?.entitySet;\n\n\t\tif (valueHelpEntitySet) {\n\t\t\tawait updateModelData(data, actionParameterConfig?.serviceUrl, valueHelpEntitySet);\n\t\t}\n\t}\n};\n\n/**\n *\n * Gets the saved action from card manifest\n * Resolves i18n keys to text for label and ok button used for Submit type of action in adaptive card.\n *\n * @param cardManifest\n * @param data\n * @param resourceBundle\n * @returns\n */\nconst getActionsFromManifest = async function (\n\tcardManifest: CardManifest,\n\tdata: Record<string, PropertyValue>,\n\tresourceBundle?: ResourceModel\n) {\n\tconst cardConfiguration = cardManifest[\"sap.card\"].configuration;\n\tconst configParams = cardConfiguration?.parameters;\n\tconst actions: Array<ControlProperties> = [];\n\n\tif (configParams?._adaptiveFooterActionParameters) {\n\t\tconst _adaptiveFooterActionParameters = configParams._adaptiveFooterActionParameters;\n\t\tconst aKeys = Object.keys(_adaptiveFooterActionParameters);\n\n\t\tfor (const key of aKeys) {\n\t\t\tconst action = _adaptiveFooterActionParameters[key];\n\n\t\t\tif (resourceBundle) {\n\t\t\t\taction.label = resolveI18nTextFromResourceModel(action.label, resourceBundle);\n\t\t\t\taction.triggerActionText = resolveI18nTextFromResourceModel(action.triggerActionText, resourceBundle);\n\t\t\t}\n\n\t\t\tif (action.actionParameters?.length) {\n\t\t\t\tawait updateActionParameterData(action.actionParameters, data, resourceBundle);\n\t\t\t}\n\n\t\t\tlet style = \"Default\";\n\n\t\t\tif (action.style === \"positive\") {\n\t\t\t\tstyle = \"Positive\";\n\t\t\t} else if (action.style === \"destructive\") {\n\t\t\t\tstyle = \"Negative\";\n\t\t\t}\n\n\t\t\tconst actionInfo: ControlProperties = {\n\t\t\t\ttitle: action.label,\n\t\t\t\ttitleKey: key,\n\t\t\t\tstyle: style,\n\t\t\t\tenablePathKey: action.enablePath,\n\t\t\t\tisStyleControlEnabled: true,\n\t\t\t\tisConfirmationRequired: action.data?.isConfirmationRequired || false,\n\t\t\t\ttriggerActionText: action.triggerActionText\n\t\t\t};\n\t\t\tactions.push(actionInfo);\n\t\t}\n\t\treturn actions;\n\t}\n\n\treturn [\n\t\t{\n\t\t\ttitle: \"\",\n\t\t\ttitleKey: \"\",\n\t\t\tstyle: \"Default\",\n\t\t\tenablePathKey: \"\",\n\t\t\tisStyleControlEnabled: false\n\t\t}\n\t];\n};\n\n/**\n * Gets the saved actions if exists in card manifest otherwise an initial action with default values\n *\n * @param resourceModel\n * @param data\n * @param mCardManifest\n * @returns\n */\nexport const getDefaultAction = async function (\n\tresourceModel?: ResourceModel,\n\tdata?: Record<string, PropertyValue>,\n\tmCardManifest?: CardManifest\n) {\n\tif (mCardManifest && data) {\n\t\treturn await getActionsFromManifest(mCardManifest, data, resourceModel);\n\t}\n\n\treturn [\n\t\t{\n\t\t\ttitle: \"\",\n\t\t\ttitleKey: \"\",\n\t\t\tstyle: \"Default\",\n\t\t\tenablePathKey: \"\",\n\t\t\tisStyleControlEnabled: false\n\t\t}\n\t];\n};\n\n/**\n * Retrieves card action information.\n *\n * @param {Record<string, PropertyValue>} data - The data record containing property values.\n * @param {ResourceModel} [resourceModel] - The resource model for localization (optional).\n * @param {CardManifest} [mCardManifest] - The card manifest object (optional).\n * @returns {Promise<Object>} An object containing card action information.\n */\nexport const getCardActionInfo = async function (\n\tdata: Record<string, PropertyValue>,\n\tresourceModel?: ResourceModel,\n\tmCardManifest?: CardManifest\n) {\n\tconst { odataModel, entitySet, rootComponent } = Application.getInstance().fetchDetails();\n\tconst bODataV4 = odataModel === ODataModelVersion.V4;\n\tconst cardActions = getCardActions(rootComponent, entitySet, bODataV4);\n\treturn {\n\t\tannotationActions: cardActions,\n\t\taddedActions: cardActions.length > 0 ? await getDefaultAction(resourceModel, data, mCardManifest) : [],\n\t\tbODataV4: bODataV4,\n\t\tstyles: getActionStyles(),\n\t\tisAddActionEnabled: true,\n\t\tactionExists: cardActions.length > 0\n\t};\n};\n\n/**\n * Gets the card actions\n * @param appComponent The app component\n * @param entitySetName The entity set name\n * @param bODataV4 The OData version\n * @returns The card actions\n */\nexport function getCardActions(appComponent: UIComponent, entitySetName: string, bODataV4: boolean) {\n\tconst appModel = bODataV4 ? (appComponent.getModel() as V2ODataModel) : (appComponent.getModel() as V4ODataModel),\n\t\tmetaModel = appModel.getMetaModel(),\n\t\tentitySet = bODataV4 ? metaModel.getObject(\"/\" + entitySetName) : (metaModel as V2ODataMetaModel).getODataEntitySet(entitySetName),\n\t\tentityTypeName: string = bODataV4 ? entitySet?.$Type : entitySet?.entityType,\n\t\tentityType = bODataV4\n\t\t\t? metaModel.getObject(\"/\" + entityTypeName)\n\t\t\t: (metaModel as V2ODataMetaModel).getODataEntityType(entityTypeName),\n\t\tidentificationPath: string = bODataV4 ? \"@com.sap.vocabularies.UI.v1.Identification\" : \"com.sap.vocabularies.UI.v1.Identification\";\n\tlet entityTypeAnnotation: EntityTypeAnnotation = {};\n\n\tif (bODataV4) {\n\t\tentityTypeAnnotation = metaModel.getObject(\"/\" + entityTypeName + \"@\");\n\t}\n\n\tconst entityTypeKeys: Array<string> = bODataV4 ? Object.keys(entityTypeAnnotation) : Object.keys(entityType);\n\tconst identificationAnnotation: Array<string> = entityTypeKeys?.filter((key: string) => {\n\t\treturn key === identificationPath;\n\t});\n\tlet dataFields: Array<DataField> = [];\n\n\tif (identificationAnnotation?.length) {\n\t\tdataFields = bODataV4 ? entityTypeAnnotation[identificationPath] : entityType[identificationPath];\n\t}\n\n\treturn getActionFromDataField(dataFields, bODataV4, metaModel, entitySetName);\n}\n\n/**\n * Adds the action to the card manifest\n * @param manifest The card manifest\n * @param controlProperties The control properties\n */\nexport async function addActionToCardManifest(manifest: CardManifest, controlProperties: ControlProperties) {\n\tconst { rootComponent } = Application.getInstance().fetchDetails();\n\tconst bODataV4 = getDialogModel().getProperty(\"/configuration/actions/bODataV4\") as boolean;\n\tconst metaModel = rootComponent.getModel()?.getMetaModel() as V2ODataMetaModel | V4ODataMetaModel;\n\tconst actionInfo = await getAdaptiveCardAction(controlProperties, bODataV4, metaModel);\n\taddActionToCardFooter(manifest, actionInfo, controlProperties);\n}\n\n/**\n * Removes the action from the card manifest\n * @param manifest The card manifest\n * @param controlProperties The control properties\n */\nexport function removeActionFromManifest(manifest: CardManifest, controlProperties: ControlProperties) {\n\tconst cardFooter = manifest[\"sap.card\"]?.footer;\n\tconst actionLength = cardFooter?.actionsStrip.length;\n\n\tif (actionLength && cardFooter) {\n\t\tconst relatedAction = cardFooter.actionsStrip.filter((actionsStrip) => {\n\t\t\tconst cardParameters = actionsStrip.actions[0].parameters;\n\t\t\treturn cardParameters !== \"{{parameters.footerActionParameters.\" + controlProperties.titleKey + \"}}\";\n\t\t});\n\n\t\tif (relatedAction.length) {\n\t\t\tcardFooter.actionsStrip = relatedAction;\n\t\t} else {\n\t\t\tdelete manifest[\"sap.card\"]?.footer;\n\t\t}\n\n\t\tremoveActionInfoFromConfigParams(manifest, controlProperties);\n\t}\n}\n\n/**\n * Updates the actions in the footer of the card manifest based on the provided control properties.\n *\n * @param {CardManifest} manifest - The card manifest object that contains the footer actions.\n */\nexport function resetCardActions(manifest: CardManifest) {\n\tmanifest[\"sap.card\"].footer = {\n\t\tactionsStrip: []\n\t};\n\n\tconst cardConfiguration = manifest[\"sap.card\"].configuration;\n\tconst configParams = cardConfiguration?.parameters;\n\tif (configParams) {\n\t\tconfigParams._adaptiveFooterActionParameters = {};\n\t\tconfigParams.footerActionParameters = {};\n\t}\n}\n\n/**\n * Updates the actions in the footer of the card manifest based on the provided control properties.\n *\n * @param {CardManifest} manifest - The card manifest object that contains the footer actions.\n * @param {ControlProperties} controlProperties - The control properties used to update the footer actions.\n */\nexport function updateCardManifestAction(manifest: CardManifest, controlProperties: ControlProperties) {\n\tconst cardFooter = manifest[\"sap.card\"].footer;\n\tconst actionLength = cardFooter?.actionsStrip.length;\n\n\tif (actionLength && cardFooter) {\n\t\tcardFooter.actionsStrip.forEach((actionsStrip) => {\n\t\t\tconst action = actionsStrip.actions[0];\n\t\t\tconst cardParameters = action.parameters;\n\n\t\t\tif (cardParameters === \"{{parameters.footerActionParameters.\" + controlProperties.titleKey + \"}}\") {\n\t\t\t\tconst isEnabledExpression = controlProperties.enablePathKey ? \"${\" + controlProperties.enablePathKey + \"}\" : \"true\";\n\t\t\t\tconst adaptiveCardStyle = getActionStyle(controlProperties);\n\t\t\t\tactionsStrip.buttonType = getButtonTypeForCard(controlProperties.style);\n\t\t\t\taction.enabled = isEnabledExpression;\n\t\t\t\tupdateAdaptiveCardInfo(manifest, controlProperties, adaptiveCardStyle, controlProperties.enablePathKey || \"\");\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * Gets the action style\n * @param controlProperties The control properties\n * @returns Action style\n */\n\nfunction getActionStyle(controlProperties: ControlProperties) {\n\tlet actionStyle: string = \"default\";\n\n\tif (controlProperties.style === \"Positive\") {\n\t\tactionStyle = \"positive\";\n\t} else if (controlProperties.style === \"Negative\") {\n\t\tactionStyle = \"destructive\";\n\t}\n\treturn actionStyle;\n}\n\n/**\n *\n * Gets the OData V2 action parameters for the card\n *\n * @param parameters The parameters\n * @returns The OData V2 action parameters\n */\nconst getActionParameters = async function (parameters: Array<FunctionImportParameter>) {\n\tconst actionParameters: Array<AdaptiveCardActionParameter> = [];\n\tconst oResourceBundle = CoreLib.getResourceBundleFor(\"sap.cards.ap.generator.i18n\");\n\n\tfor (const parameter of parameters) {\n\t\tconst EnumMember = parameter?.[\"com.sap.vocabularies.Common.v1.FieldControl\"]?.EnumMember;\n\t\tconst isRequired = EnumMember === \"com.sap.vocabularies.Common.v1.FieldControlType/Mandatory\" || parameter?.nullable === \"false\";\n\t\tconst actionParamInfoToAdd: AdaptiveCardActionParameter = {\n\t\t\tlabel: parameter?.[\"sap:label\"] || parameter?.name || \"\",\n\t\t\tid: parameter?.name || \"\",\n\t\t\tisRequired: isRequired,\n\t\t\terrorMessage: isRequired ? oResourceBundle.getText(\"GENERATOR_ADAPTIVE_CARD_ACTION_PARAMETERS_ERROR_MESSAGE\") : \"\",\n\t\t\tplaceholder: \"\"\n\t\t};\n\n\t\tif (parameter?.[\"sap:value-list\"] === \"fixed-values\") {\n\t\t\tconst actionParameterConfig = await getActionParameterConfigurationV2(parameter);\n\n\t\t\tif (actionParameterConfig?.entitySet) {\n\t\t\t\tactionParamInfoToAdd.configuration = actionParameterConfig as ActionParameterConfiguration;\n\t\t\t\tactionParamInfoToAdd.placeholder = oResourceBundle.getText(\"GENERATOR_ADAPTIVE_CARD_ACTION_PARAMETERS_PLACEHOLDER\");\n\t\t\t}\n\t\t}\n\t\tactionParameters.push(actionParamInfoToAdd);\n\t}\n\n\treturn actionParameters;\n};\n\n/**\n * Forms the Adaptive Card action from the control properties\n * @param controlProperties The control properties\n * @param bODataV4 The OData version\n * @param metaModel The meta model\n * @returns The action info\n */\nconst getAdaptiveCardAction = async function (\n\tcontrolProperties: ControlProperties,\n\tbODataV4: boolean,\n\tmetaModel: V2ODataMetaModel | V4ODataMetaModel\n) {\n\tconst oResourceBundle = CoreLib.getResourceBundleFor(\"sap.cards.ap.generator.i18n\");\n\tconst actionStyle = getActionStyle(controlProperties);\n\tlet actionParameters: Array<AdaptiveCardActionParameter> = [];\n\tlet functionImportInfo;\n\tconst data: Data = {\n\t\tisConfirmationRequired: controlProperties.isConfirmationRequired || false\n\t};\n\tconst enabledPathKey = controlProperties.enablePathKey;\n\tconst actionInfo: AdaptiveCardAction = {\n\t\tstyle: actionStyle,\n\t\tverb: \"\",\n\t\tlabel: controlProperties.title,\n\t\tactionParameters: [],\n\t\tdata: data,\n\t\tenablePath: enabledPathKey || \"\",\n\t\ttriggerActionText: oResourceBundle.getText(\"GENERATOR_ADAPTIVE_CARD_SUBMIT_ACTION_OK_BUTTON\")\n\t};\n\n\tif (bODataV4) {\n\t\tactionParameters = await getActionParams(controlProperties, metaModel as V4ODataMetaModel);\n\t\tactionInfo.verb = getActionVerb(controlProperties, metaModel as V4ODataMetaModel);\n\t\tactionInfo.actionParameters = actionParameters || [];\n\n\t\treturn actionInfo;\n\t} else {\n\t\tfunctionImportInfo = getFunctionImportInfo(controlProperties, metaModel as V2ODataMetaModel);\n\t\tactionInfo.verb = controlProperties.titleKey;\n\t\tactionInfo.parameters = functionImportInfo?.mActionParams?.parameterData;\n\t\tactionInfo.actionParameters = await getActionParameters(functionImportInfo?.mActionParams?.additionalParameters);\n\t\tdata.actionParams = {\n\t\t\tkeys: Object.keys(functionImportInfo?.mActionParams?.parameterData)\n\t\t};\n\t\tactionInfo.data = data;\n\n\t\treturn actionInfo;\n\t}\n};\n\n/**\n * Gets the related bound action for OData V4 model\n * @param actionValue The action value\n * @param actionType The action type\n * @returns Bound action\n */\n\nfunction getRelatedBoundAction(actionValue: Array<Action>, actionType: string) {\n\treturn actionValue?.filter((action: Action) => {\n\t\tconst isBoundAction: boolean = action?.$IsBound;\n\t\tif (isBoundAction) {\n\t\t\treturn action?.$Parameter?.some((actionParam: ActionParameter) => {\n\t\t\t\treturn actionType === actionParam?.$Type;\n\t\t\t});\n\t\t}\n\t});\n}\n\n/**\n * Returns the related unbound actions for OData V4 model\n * @param actionValue The action value\n * @returns\n */\nfunction getRelatedUnboundActions(actionValue: Array<Action>) {\n\treturn actionValue?.filter((action: Action) => {\n\t\treturn !action?.$IsBound;\n\t});\n}\n\n/**\n * Gets the valuehelp info for OData V4 metamodel\n *\n * @param metaModel\n * @param contextPath\n * @param actionParamName\n * @returns\n */\nconst getValueHelpInfo = async function (metaModel: V4ODataMetaModel, contextPath: string, actionParamName?: string) {\n\tconst valueListInfo = await metaModel.requestValueListInfo(contextPath, true);\n\tconst valueListAnnotationInfo = valueListInfo?.[\"\"] as ValueListAnnotationInfo;\n\tconst valueListModel = valueListAnnotationInfo?.$model;\n\tconst valueListPropertyName = getValueListPropertyName(valueListAnnotationInfo, actionParamName || \"\");\n\tconst valueHelpEntitySet = valueListAnnotationInfo?.[\"CollectionPath\"];\n\tconst valueHelpAnnotation = valueListModel?.getMetaModel()?.getObject(`/${valueHelpEntitySet}/${valueListPropertyName}@`);\n\treturn {\n\t\tvalueHelpAnnotation,\n\t\tvalueListPropertyName,\n\t\tvalueHelpEntitySet,\n\t\tvalueListModelServiceUrl: valueListModel?.getServiceUrl()\n\t};\n};\n\n/**\n * Returns the action parameter name for OData V4 model\n * @param actionVerb\n * @param actionParamName\n * @returns The action parameter label for OData V4 model\n */\nconst getActionParameterName = async function (actionVerb: string, actionParamName?: string) {\n\tconst { rootComponent, entitySet } = Application.getInstance().fetchDetails();\n\tif (actionParamName) {\n\t\tconst metaModel = rootComponent.getModel()?.getMetaModel() as V4ODataMetaModel;\n\t\tconst contextPath = `/${entitySet}/${actionVerb}/${actionParamName}`;\n\t\tconst entitySetInfo = metaModel.getObject(`/${entitySet}`);\n\t\tconst actionParameterAnnotation = metaModel.getObject(`/${entitySetInfo?.$Type}/${actionParamName}@`);\n\n\t\tif (metaModel.getObject(`${contextPath}@`)?.[\"@com.sap.vocabularies.Common.v1.ValueListWithFixedValues\"]) {\n\t\t\tconst { valueHelpAnnotation } = await getValueHelpInfo(metaModel as V4ODataMetaModel, contextPath, actionParamName);\n\n\t\t\treturn (\n\t\t\t\tactionParameterAnnotation?.[\"@com.sap.vocabularies.Common.v1.Label\"] ||\n\t\t\t\tvalueHelpAnnotation?.[\"@com.sap.vocabularies.Common.v1.Label\"]\n\t\t\t);\n\t\t}\n\n\t\treturn actionParameterAnnotation?.[\"@com.sap.vocabularies.Common.v1.Label\"] || actionParamName;\n\t}\n};\n\n/**\n * Returns the value list property name from annotations\n *\n * @param oValueList\n * @param sPropertyName\n * @returns\n */\nfunction getValueListPropertyName(oValueList: ValueListAnnotationInfo, sPropertyName: string): string {\n\tconst oValueListParameter = oValueList?.Parameters.find(function (oParameter: ValueListParameter) {\n\t\treturn oParameter?.LocalDataProperty?.$PropertyPath === sPropertyName;\n\t});\n\treturn oValueListParameter?.ValueListProperty;\n}\n\n/**\n * Function to get the action parameter value based on the text arrangement annotation\n *\n * @param propertyPath\n * @param descriptionPath\n * @param textArrangementType\n * @returns\n */\nexport function getActionParameterValue(propertyPath: string, descriptionPath: string, textArrangementType: string): string {\n\tif (textArrangementType === \"TextOnly\") {\n\t\treturn \"${\" + descriptionPath + \"}\";\n\t} else if (textArrangementType === \"TextLast\") {\n\t\treturn \"${\" + propertyPath + \"}\" + \" (\" + \"${\" + descriptionPath + \"}\" + \")\";\n\t} else if (textArrangementType === \"TextSeparate\") {\n\t\treturn \"${\" + propertyPath + \"}\";\n\t}\n\n\treturn \"${\" + descriptionPath + \"}\" + \" (${\" + propertyPath + \"})\";\n}\n\n/**\n * Updates the model data with value help data for the action parameter\n *\n * @param data\n * @param serviceUrl\n * @param valueHelpEntitySet\n */\nexport const updateModelData = async function (data: Record<string, PropertyValue>, serviceUrl: string, valueHelpEntitySet: string) {\n\tconst valueHelpData = await fetch(serviceUrl);\n\tconst { odataModel } = Application.getInstance().fetchDetails();\n\tconst bODataV4 = odataModel === ODataModelVersion.V4;\n\n\tif (valueHelpData && typeof valueHelpData.json === \"function\") {\n\t\tconst valueHelpDataJson = await valueHelpData.json();\n\t\tconst valueHelpDataValue = bODataV4 ? valueHelpDataJson?.value : valueHelpDataJson?.d?.results;\n\n\t\tif (valueHelpDataValue?.length) {\n\t\t\tdata[valueHelpEntitySet] = valueHelpDataValue;\n\t\t}\n\t}\n};\n\n/**\n * Get Action Parameter Data for OData V4 model\n *\n * @param actionVerb\n * @param actionParamName\n * @returns\n */\nconst getActionParameterConfiguration = async function (actionVerb: string, actionParamName?: string) {\n\tconst actionParameterConfig = {\n\t\tserviceUrl: \"\",\n\t\tvalue: \"\",\n\t\tentitySet: \"\",\n\t\ttitle: \"\"\n\t};\n\n\tif (!actionParamName) {\n\t\treturn actionParameterConfig;\n\t}\n\n\tconst { entitySet, rootComponent } = Application.getInstance().fetchDetails();\n\n\tconst entitySetName = entitySet;\n\tconst oDialogModel = getDialogModel() as JSONModel;\n\tconst metaModel = rootComponent.getModel()?.getMetaModel() as V4ODataMetaModel;\n\tconst contextPath = `/${entitySetName}/${actionVerb}/${actionParamName}`;\n\tconst actionParamAnnotations = metaModel.getObject(`${contextPath}@`);\n\tif (!actionParamAnnotations?.[\"@com.sap.vocabularies.Common.v1.ValueListWithFixedValues\"]) {\n\t\treturn actionParameterConfig;\n\t}\n\n\tconst { valueHelpAnnotation, valueListPropertyName, valueHelpEntitySet, valueListModelServiceUrl } = await getValueHelpInfo(\n\t\tmetaModel as V4ODataMetaModel,\n\t\tcontextPath,\n\t\tactionParamName\n\t);\n\tconst textArrangementPath = valueHelpAnnotation?.[\"@com.sap.vocabularies.Common.v1.Text\"]?.$Path;\n\tconst textArrangementAnnotation =\n\t\tvalueHelpAnnotation?.[\"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\"];\n\tconst actionParameterValue =\n\t\t(textArrangementAnnotation?.$EnumMember && valueListPropertyName && textArrangementPath) ||\n\t\t(valueListPropertyName && textArrangementPath)\n\t\t\t? getActionParameterValue(valueListPropertyName, textArrangementPath, textArrangementAnnotation?.$EnumMember?.split(\"/\")[1])\n\t\t\t: \"${\" + valueListPropertyName + \"}\";\n\n\tlet serviceUrl = valueListModelServiceUrl;\n\tserviceUrl =\n\t\tvalueListPropertyName && textArrangementPath\n\t\t\t? `${serviceUrl}${valueHelpEntitySet}?$select=${valueListPropertyName},${textArrangementPath}`\n\t\t\t: `${serviceUrl}${valueHelpEntitySet}?$select=${valueListPropertyName}`;\n\tserviceUrl = `${serviceUrl}&skip=0&$top=20`;\n\n\tconst data = oDialogModel.getProperty(\"/configuration/$data\");\n\tawait updateModelData(data, serviceUrl, valueHelpEntitySet);\n\toDialogModel.setProperty(\"/configuration/$data\", data);\n\n\treturn {\n\t\tentitySet: valueHelpEntitySet,\n\t\tserviceUrl: serviceUrl,\n\t\tvalue: actionParameterValue,\n\t\ttitle: \"${\" + valueListPropertyName + \"}\"\n\t};\n};\n\n/**\n * Get Action Parameter Info for OData V4 application's Action\n *\n * The action parameter will consist of errorMessage and placeholder which will be used by adaptive card.\n * Currently the errorMessage and placeholder will have values only for actions having dropdown value as input.\n *\n * @param relatedAction The related action\n * @param actionVerb The action verb\n * @param isBoundAction Is bound action\n * @returns The action parameter info\n */\nconst getActionParameterInfo = async function (relatedAction: Action, actionVerb: string, isBoundAction?: boolean) {\n\tconst actionParamInfo: any = [];\n\tlet actionIndex = 0;\n\n\tif (relatedAction && relatedAction.$Parameter) {\n\t\tconst oResourceBundle = CoreLib.getResourceBundleFor(\"sap.cards.ap.generator.i18n\");\n\n\t\tfor (const actionParam of relatedAction.$Parameter) {\n\t\t\tconst isActionRequired = !isBoundAction || (isBoundAction && actionIndex > 0);\n\t\t\tif (isActionRequired) {\n\t\t\t\tconst isRequired = actionParam.$Nullable === false;\n\t\t\t\tconst actionParamInfoToAdd: AdaptiveCardActionParameter = {\n\t\t\t\t\tisRequired: isRequired,\n\t\t\t\t\tid: actionParam.$Name,\n\t\t\t\t\tlabel: await getActionParameterName(actionVerb, actionParam.$Name),\n\t\t\t\t\terrorMessage: isRequired ? oResourceBundle.getText(\"GENERATOR_ADAPTIVE_CARD_ACTION_PARAMETERS_ERROR_MESSAGE\") : \"\",\n\t\t\t\t\tplaceholder: \"\"\n\t\t\t\t};\n\t\t\t\tconst actionParameterConfig = (await getActionParameterConfiguration(\n\t\t\t\t\tactionVerb,\n\t\t\t\t\tactionParam.$Name\n\t\t\t\t)) as ActionParameterConfiguration;\n\t\t\t\tif (actionParameterConfig?.entitySet) {\n\t\t\t\t\tactionParamInfoToAdd[\"configuration\"] = actionParameterConfig;\n\t\t\t\t\tactionParamInfoToAdd.placeholder = oResourceBundle.getText(\"GENERATOR_ADAPTIVE_CARD_ACTION_PARAMETERS_PLACEHOLDER\");\n\t\t\t\t}\n\t\t\t\tactionParamInfo.push(actionParamInfoToAdd);\n\t\t\t}\n\t\t\tactionIndex++;\n\n\t\t\tif (actionIndex === relatedAction.$Parameter.length) {\n\t\t\t\treturn actionParamInfo;\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Gets the enabled value from annotation\n *\n * @param actionAnnotation\n * @returns\n */\nfunction getEnabledValueFromAnnotation(actionAnnotation: ActionAnnotation) {\n\tif (actionAnnotation) {\n\t\tconst operationAvailable = actionAnnotation[\"@Org.OData.Core.V1.OperationAvailable\"];\n\n\t\tif (operationAvailable?.$Path) {\n\t\t\treturn operationAvailable.$Path;\n\t\t} else if (operationAvailable?.Bool) {\n\t\t\treturn operationAvailable.Bool;\n\t\t}\n\t}\n\n\treturn \"\";\n}\n\n/**\n * Gets the critical value from annotation\n *\n * @param oCriticalAnnotation\n * @returns\n */\nfunction getCriticalValueFromAnnotation(oCriticalAnnotation?: CriticalAction) {\n\tif (!oCriticalAnnotation) {\n\t\treturn false;\n\t}\n\tif (oCriticalAnnotation.Bool === undefined) {\n\t\treturn true;\n\t}\n\n\tconst oParameterValue = oCriticalAnnotation.Bool;\n\n\tif (typeof oParameterValue === \"string\") {\n\t\tconst oActionValue = oParameterValue.toLowerCase();\n\t\treturn !(oActionValue == \"false\" || oActionValue == \"\" || oActionValue == \" \");\n\t}\n\n\treturn !!oParameterValue;\n}\n\n/**\n *\n * Returns the metadata annotation info for OData V4 model ( enabled or critical value coming from metadata annotations )\n *\n * @param dataField\n * @param metaModel\n * @param entityTypeName\n * @returns\n */\n\nfunction getMetadataAnnotationInfoV4(dataField: DataFieldV4, metaModel: V4ODataMetaModel, entitySetName: string) {\n\tconst dataFieldAction = dataField.Action;\n\tconst actionVerb = dataFieldAction.indexOf(\"(\") > -1 ? dataFieldAction.split(\"(\")[0] : dataFieldAction;\n\tconst actionAnnotation = metaModel.getObject(\"/\" + entitySetName + \"/\" + actionVerb + \"@\");\n\tconst enablePath = getEnabledValueFromAnnotation(actionAnnotation);\n\tconst isConfirmationRequired = getCriticalValueFromAnnotation(actionAnnotation?.[\"@com.sap.vocabularies.UI.v1.Critical\"]);\n\n\treturn {\n\t\tenablePath: enablePath,\n\t\tisConfirmationRequired: isConfirmationRequired\n\t};\n}\n\n/**\n * Get the metadata annotation info for OData V2 model\n *\n * @param dataField\n * @param metaModel\n * @returns\n */\nfunction getMetadataAnnotationInfoV2(dataField: DataField, metaModel: V2ODataMetaModel) {\n\tconst functionName: string = dataField.Action.String.split(\"/\")[1];\n\tconst functionImport = metaModel.getODataFunctionImport(functionName) as unknown as FunctionImport;\n\n\treturn {\n\t\tenablePath: functionImport?.[\"sap:applicable-path\"] || \"\",\n\t\tisConfirmationRequired: getCriticalValueFromAnnotation(functionImport?.[\"com.sap.vocabularies.Common.v1.IsActionCritical\"])\n\t};\n}\n\n/**\n * Gets the action parameters for OData V4 model\n * @param controlProperties The control properties\n * @param metaModel The meta model\n * @returns Action parameters\n */\nconst getActionParams = async function (controlProperties: ControlProperties, metaModel: V4ODataMetaModel) {\n\tconst { entitySet } = Application.getInstance().fetchDetails();\n\tconst titleKey = controlProperties.titleKey || \"\";\n\tconst actionVerb: string = titleKey.indexOf(\"(\") > -1 ? titleKey.split(\"(\")[0] : titleKey;\n\tconst actionValue = metaModel.getObject(`/${entitySet}/${actionVerb}`);\n\tlet actionType: string = titleKey.indexOf(\"(\") > -1 ? titleKey?.split(\"(\")[1] : \"\";\n\tactionType = actionType.indexOf(\")\") > -1 ? actionType.replace(\")\", \"\") : actionType;\n\n\t//Get action Parameters for unbound action\n\tif (actionValue?.$kind === \"ActionImport\" && actionValue?.$Action) {\n\t\tconst unBoundActions = metaModel.getObject(\"/\" + actionValue?.$Action);\n\t\tconst relatedUnboundAction = getRelatedUnboundActions(unBoundActions);\n\t\treturn getActionParameterInfo(relatedUnboundAction[0], actionVerb);\n\t}\n\n\t//Get action Parameters for Bound actions\n\tconst relatedBoundAction = getRelatedBoundAction(actionValue, actionType);\n\n\tif (relatedBoundAction?.length && relatedBoundAction[0]?.$Parameter != null && relatedBoundAction[0]?.$Parameter.length > 1) {\n\t\treturn await getActionParameterInfo(relatedBoundAction[0], actionVerb, true);\n\t}\n};\n\n/**\n * Get the action verb for OData V4 model\n * @param controlProperties The control properties\n * @param metaModel The meta model\n * @returns Returns the action string\n */\nfunction getActionVerb(controlProperties: ControlProperties, metaModel: V4ODataMetaModel) {\n\tconst titleKey = controlProperties.titleKey || \"\";\n\tconst actionVerb = titleKey.indexOf(\"(\") > -1 ? titleKey.split(\"(\")[0] : titleKey;\n\tconst actionValue = metaModel.getObject(\"/\" + actionVerb) || [];\n\tlet actionType: string = titleKey.indexOf(\"(\") > -1 ? titleKey.split(\"(\")[1] : \"\";\n\tactionType = actionType.indexOf(\")\") > -1 ? actionType.replace(\")\", \"\") : actionType;\n\n\t//Get action string for unbound action\n\tif (actionValue?.$kind === \"ActionImport\" && actionValue?.$Action) {\n\t\treturn titleKey?.split(\"/\")[1];\n\t}\n\n\tconst relatedBoundAction = getRelatedBoundAction(actionValue, actionType);\n\t//Get action string for bound action\n\tif (relatedBoundAction?.length) {\n\t\treturn actionVerb;\n\t}\n\n\treturn actionVerb;\n}\n\n/**\n * Get the function import info for OData V2 model's action\n *\n * @param controlProperties The control properties\n * @param metaModel The meta model\n * @returns Functionimport info\n */\nfunction getFunctionImportInfo(controlProperties: ControlProperties, metaModel: V2ODataMetaModel) {\n\tconst { entitySet } = Application.getInstance().fetchDetails();\n\tconst functionName: string = controlProperties.titleKey;\n\tconst functionImport = metaModel.getODataFunctionImport(functionName) as unknown as FunctionImport;\n\tconst oContextObject = getDialogModel().getProperty(\"/configuration/$data\");\n\tconst entitySetInfo = metaModel.getODataEntitySet(entitySet) as EntitySet;\n\tconst entityType = metaModel.getODataEntityType(entitySetInfo?.entityType) as EntityType;\n\tconst mKeyProperties: KeyMap = getPropertyKeys(entityType);\n\tconst oSkipProperties: SkipProperty = {};\n\tconst mActionParams = {\n\t\tparameterData: {},\n\t\tadditionalParameters: []\n\t} as ParametersInfoV2;\n\n\tfunctionImport?.parameter?.forEach(function (importParameter: FunctionImportParameter) {\n\t\taddParameterLabel(importParameter, entityType, metaModel);\n\n\t\tconst parameterName: string = importParameter?.name || \"\";\n\t\tconst isKey = !!mKeyProperties[parameterName];\n\t\tlet parameterValue;\n\n\t\tif (oContextObject?.hasOwnProperty(parameterName)) {\n\t\t\tparameterValue = oContextObject[parameterName];\n\t\t} else if (isKey && oContextObject && functionImport[\"sap:action-for\"]) {\n\t\t\t// parameter is key but not part of the current projection - raise error\n\t\t\tLog.error(\"Key parameter of action not found in current context: \" + parameterName);\n\t\t\tthrow new Error(\"Key parameter of action not found in current context: \" + parameterName);\n\t\t}\n\n\t\tmActionParams.parameterData[parameterName] = parameterValue;\n\n\t\tconst skip = !!oSkipProperties[parameterName];\n\t\tif (!skip && (!isKey || !functionImport[\"sap:action-for\"]) && importParameter.mode.toUpperCase() == \"IN\") {\n\t\t\t// offer as optional parameter with default value from context\n\t\t\tmActionParams.additionalParameters.push(importParameter);\n\t\t}\n\t});\n\n\treturn {\n\t\tmActionParams: mActionParams,\n\t\tfunctionImport: functionImport\n\t};\n}\n\n/**\n * Get the property keys for the entity type\n * @param entityType The entity type\n * @returns The property keys map\n */\nconst getPropertyKeys = function (entityType: EntityType) {\n\tconst oKeyMap: KeyMap = {};\n\n\tentityType.key.propertyRef.forEach((property: Property) => {\n\t\tif (property.name) {\n\t\t\toKeyMap[property.name] = true;\n\t\t}\n\t});\n\n\treturn oKeyMap;\n};\n\n/**\n * Adds the parameter label to the entity type property\n *\n * @param parameter The Action parameter\n * @param entityType The entity type\n * @param metaModel The meta model\n */\nconst addParameterLabel = function (parameter: FunctionImportParameter, entityType: EntityType, metaModel: V2ODataMetaModel) {\n\tif (entityType && parameter && !parameter[\"com.sap.vocabularies.Common.v1.Label\"]) {\n\t\tconst property = metaModel.getODataProperty(entityType, parameter.name, false) as Property;\n\t\tif (property && property[\"com.sap.vocabularies.Common.v1.Label\"]) {\n\t\t\t// copy label from property to parameter with same name as default if no label is set for function import parameter\n\t\t\tparameter[\"com.sap.vocabularies.Common.v1.Label\"] = property[\"com.sap.vocabularies.Common.v1.Label\"];\n\t\t}\n\t}\n};\n\n/**\n *\n * Returns the service URL, valueListPropertyPath, descriptionPath for OData V2 model using the value list parameters\n *\n * @param serviceUrlPrefix\n * @param valueListParameters\n * @returns\n */\nfunction getParameterConfigFromValueList(serviceUrlPrefix: string, valueListParameters: ValueListParameter[]) {\n\tconst selectProps: Array<string> = [];\n\tlet valueListPropertyPath = \"\",\n\t\tdescriptionPath = \"\";\n\n\tvalueListParameters.forEach((valueListParameter) => {\n\t\tconst valueListProperty = valueListParameter?.ValueListProperty?.String;\n\t\tif (valueListProperty) {\n\t\t\tselectProps.push(valueListProperty);\n\t\t\tdescriptionPath =\n\t\t\t\tvalueListParameter?.RecordType === \"com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly\"\n\t\t\t\t\t? valueListProperty\n\t\t\t\t\t: descriptionPath;\n\t\t\tvalueListPropertyPath =\n\t\t\t\tvalueListParameter?.RecordType === \"com.sap.vocabularies.Common.v1.ValueListParameterInOut\"\n\t\t\t\t\t? valueListProperty\n\t\t\t\t\t: valueListPropertyPath;\n\t\t}\n\t});\n\n\tconst serviceUrl = `${serviceUrlPrefix}?$select=${selectProps.join(\",\")}`;\n\n\treturn {\n\t\tserviceUrl,\n\t\tvalueListPropertyPath,\n\t\tdescriptionPath\n\t};\n}\n\n/**\n *\n * Get the action parameter configuration for OData V2 model\n *\n * @param parameter\n * @returns The action parameter configuration for OData V2 model\n */\nexport const getActionParameterConfigurationV2 = async function (parameter: FunctionImportParameter) {\n\tconst actionParameterConfig = {\n\t\tserviceUrl: \"\",\n\t\tvalue: \"\",\n\t\tentitySet: \"\",\n\t\ttitle: \"\"\n\t};\n\n\tif (!parameter) {\n\t\treturn actionParameterConfig;\n\t}\n\n\tconst ValueListAnnotation = parameter?.[\"com.sap.vocabularies.Common.v1.ValueList\"];\n\tconst valueListParameters = ValueListAnnotation?.Parameters as ValueListParameter[];\n\tconst entitySetName = ValueListAnnotation?.CollectionPath?.String;\n\n\tif (entitySetName) {\n\t\tconst { rootComponent } = Application.getInstance().fetchDetails();\n\t\tconst { serviceUrl, valueListPropertyPath, descriptionPath } = getParameterConfigFromValueList(\n\t\t\t`${(rootComponent.getModel() as any)?.sServiceUrl}/${entitySetName}`,\n\t\t\tvalueListParameters\n\t\t);\n\n\t\tlet textArrangementType = \"TextOnly\";\n\n\t\tif (parameter?.[\"com.sap.vocabularies.UI.v1.TextArrangement\"]) {\n\t\t\ttextArrangementType = parameter[\"com.sap.vocabularies.UI.v1.TextArrangement\"]?.EnumMember?.split(\"/\")[1];\n\t\t}\n\n\t\tconst actionParameterValue =\n\t\t\tvalueListPropertyPath && descriptionPath\n\t\t\t\t? getActionParameterValue(valueListPropertyPath, descriptionPath, textArrangementType)\n\t\t\t\t: \"${\" + valueListPropertyPath + \"}\";\n\n\t\tconst oDialogModel = getDialogModel() as JSONModel;\n\t\tconst data = oDialogModel.getProperty(\"/configuration/$data\");\n\t\tawait updateModelData(data, serviceUrl, entitySetName);\n\t\toDialogModel.setProperty(\"/configuration/$data\", data);\n\n\t\treturn {\n\t\t\tentitySet: entitySetName,\n\t\t\tserviceUrl: serviceUrl,\n\t\t\tvalue: actionParameterValue,\n\t\t\ttitle: \"${\" + valueListPropertyPath + \"}\"\n\t\t};\n\t}\n};\n"],"mappings":"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","ignoreList":[]}