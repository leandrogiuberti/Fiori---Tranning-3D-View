{"version":3,"file":"Batch-dbg-dbg.js","names":["sap","ui","define","___pages_Application","___utils_IntegrationCardManifestParser","Application","ODataModelVersion","getContentProperties","getHeaderProperties","updateManifestWithSelectQueryParams","cardManifest","headerSelectProperties","headerSelect","createUrlParameters","$select","headerSelectQuery","contentSelectProperties","contentSelect","contentSelectQuery","configParameters","configuration","parameters","_headerSelectQuery","value","_contentSelectQuery","updateManifestWithExpandQueryParams","headerProperties","headerExpand","$expand","headerExpandQuery","contentProperties","contentExpand","contentExpandQuery","_headerExpandQuery","_contentExpandQuery","queryParameters","odataModel","getInstance","fetchDetails","selectQuery","properties","join","expandQuery","V4","navigationProperties","forEach","navProp","selectQueryForNavigationProperty","length","name","V2","map","property","createURLParams","selectProperties","urlParameters","__exports","__esModule"],"sources":["Batch.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport type { CardManifest } from \"sap/ui/integration/widgets/Card\";\nimport type { PropertyInfo, PropertyInfoMap } from \"../odata/ODataTypes\";\nimport { Application, ODataModelVersion } from \"../pages/Application\";\nimport type { Property } from \"../types/PropertyTypes\";\nimport { getContentProperties, getHeaderProperties } from \"../utils/IntegrationCardManifestParser\";\n\nexport type QueryParameters = {\n\tproperties: string[];\n\tnavigationProperties: {\n\t\tname: string;\n\t\tproperties: string[];\n\t}[];\n};\n\nexport type RequestQueryNavigationProperties = {\n\tname: string;\n\tproperties: Property[];\n};\n\nexport type RequestQueryComplexProperties = {\n\tname: string;\n\tproperties: Property[];\n};\n\nexport type RequestQueryParametersV4 = {\n\tproperties: PropertyInfo[];\n\tnavigationProperties: RequestQueryNavigationProperties[];\n\tcomplexProperties: RequestQueryComplexProperties[];\n};\nexport type RequestQueryParametersV2 = {\n\tproperties: Property[];\n\tnavigationProperties: RequestQueryNavigationProperties[];\n\tcomplexProperties: RequestQueryComplexProperties[];\n};\n\n/**\n * Updates the card manifest with select query parameters for header and content properties.\n *\n * @param {CardManifest} cardManifest - The card manifest object to be updated.\n */\nexport function updateManifestWithSelectQueryParams(cardManifest: CardManifest) {\n\tconst headerSelectProperties = getHeaderProperties(cardManifest);\n\tconst headerSelect = createUrlParameters(headerSelectProperties).$select;\n\tconst headerSelectQuery = headerSelect && `$select=${headerSelect}`;\n\tconst contentSelectProperties = getContentProperties(cardManifest);\n\tconst contentSelect = createUrlParameters(contentSelectProperties).$select;\n\tconst contentSelectQuery = contentSelect && `$select=${contentSelect}`;\n\tconst configParameters = cardManifest[\"sap.card\"].configuration?.parameters;\n\n\tif (!configParameters && cardManifest[\"sap.card\"].configuration) {\n\t\tcardManifest[\"sap.card\"].configuration.parameters = {\n\t\t\t_headerSelectQuery: {\n\t\t\t\tvalue: headerSelectQuery\n\t\t\t},\n\t\t\t_contentSelectQuery: {\n\t\t\t\tvalue: contentSelectQuery\n\t\t\t}\n\t\t};\n\t\treturn;\n\t}\n\n\tif (headerSelectQuery && configParameters) {\n\t\tconfigParameters._headerSelectQuery = {\n\t\t\tvalue: headerSelectQuery\n\t\t};\n\t}\n\tif (contentSelectQuery && configParameters) {\n\t\tconfigParameters._contentSelectQuery = {\n\t\t\tvalue: contentSelectQuery\n\t\t};\n\t}\n}\n\n/**\n * Updates the card manifest with expand query parameters for header and content properties.\n *\n * @param {CardManifest} cardManifest - The card manifest object to be updated.\n */\nexport function updateManifestWithExpandQueryParams(cardManifest: CardManifest) {\n\tconst headerProperties = getHeaderProperties(cardManifest);\n\tconst headerExpand = createUrlParameters(headerProperties).$expand;\n\tconst headerExpandQuery = headerExpand && `&$expand=${headerExpand}`;\n\tconst contentProperties = getContentProperties(cardManifest);\n\tconst contentExpand = createUrlParameters(contentProperties).$expand;\n\tconst contentExpandQuery = contentExpand && `&$expand=${contentExpand}`;\n\tconst configParameters = cardManifest[\"sap.card\"].configuration?.parameters;\n\n\tif (!configParameters && cardManifest[\"sap.card\"].configuration) {\n\t\tcardManifest[\"sap.card\"].configuration.parameters = {\n\t\t\t_headerExpandQuery: {\n\t\t\t\tvalue: headerExpandQuery\n\t\t\t},\n\t\t\t_contentExpandQuery: {\n\t\t\t\tvalue: contentExpandQuery\n\t\t\t}\n\t\t};\n\t\treturn;\n\t}\n\n\tif (headerExpandQuery && configParameters) {\n\t\tconfigParameters._headerExpandQuery = {\n\t\t\tvalue: headerExpandQuery\n\t\t};\n\t}\n\tif (contentExpandQuery && configParameters) {\n\t\tconfigParameters._contentExpandQuery = {\n\t\t\tvalue: contentExpandQuery\n\t\t};\n\t}\n}\n\n/*\n * Based on the odata model version(either v2 or v4) and the query parameters, this function creates the select and expand query parameters\n *\n * @param mParameters\n * @param odataModel\n * @returns\n */\nexport function createUrlParameters(queryParameters: QueryParameters) {\n\tconst { odataModel } = Application.getInstance().fetchDetails();\n\tlet selectQuery = queryParameters.properties.join(\",\");\n\tlet expandQuery = \"\";\n\n\tif (odataModel === ODataModelVersion.V4) {\n\t\tqueryParameters.navigationProperties.forEach((navProp) => {\n\t\t\tconst selectQueryForNavigationProperty = navProp.properties.join(\",\");\n\t\t\texpandQuery += expandQuery.length ? \",\" : \"\";\n\t\t\tselectQuery += selectQuery.length ? \",\" : \"\";\n\t\t\tselectQuery += `${navProp.name}`;\n\t\t\texpandQuery += selectQueryForNavigationProperty.length\n\t\t\t\t? `${navProp.name}($select=${selectQueryForNavigationProperty})`\n\t\t\t\t: `${navProp.name}`;\n\t\t});\n\t}\n\n\tif (odataModel === ODataModelVersion.V2) {\n\t\tqueryParameters.navigationProperties.forEach((navProp) => {\n\t\t\tselectQuery += selectQuery.length ? \",\" : \"\";\n\t\t\texpandQuery += expandQuery.length ? \",\" : \"\";\n\t\t\tselectQuery += navProp.properties.length\n\t\t\t\t? navProp.properties.map((property) => `${navProp.name}/${property}`)\n\t\t\t\t: `${navProp.name}`;\n\t\t\texpandQuery += `${navProp.name}`;\n\t\t});\n\t}\n\n\treturn {\n\t\t$select: selectQuery,\n\t\t$expand: expandQuery\n\t};\n}\n\n/**\n * Creates URL parameters for the given properties.\n *\n * @param {PropertyInfoMap} properties - The map of properties to create URL parameters from.\n * @returns {Record<string, string>} The URL parameters object containing the $select query parameter.\n */\nexport function createURLParams(properties: PropertyInfoMap): Record<string, string> {\n\tconst selectProperties = properties.map((property) => property.name);\n\tlet urlParameters = {};\n\tif (selectProperties.length) {\n\t\turlParameters = {\n\t\t\t$select: selectProperties.join(\",\")\n\t\t};\n\t}\n\n\treturn urlParameters;\n}\n"],"mappings":"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","ignoreList":[]}