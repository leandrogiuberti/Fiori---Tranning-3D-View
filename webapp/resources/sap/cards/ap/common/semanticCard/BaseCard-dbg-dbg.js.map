{"version":3,"file":"BaseCard-dbg-dbg.js","names":["sap","ui","define","___odata_ODataUtils","_catch","body","recover","result","e","then","fetchFileContent","_iteratorSymbol","Symbol","iterator","_settle","pact","state","value","s","_Pact","v","o","bind","observer","prototype","onFulfilled","onRejected","callback","_this","_isSettledPact","thenable","_forTo","array","check","i","reject","_cycle","length","isODataV4Model","_forOf","target","step","next","done","return","_fixup","TypeError","values","push","BaseCard","constructor","appComponent","getApplicationManifest","getManifest","getMetadata","appModel","getModel","Error","bODataV4","serviceUrl","getServiceUrl","sServiceUrl","Promise","resolve","metadataUrl","endsWith","error","errorMessage","message","getAnnotations","_exit","_this2","annotations","annotationURIs","getMetaModel","aAnnotationUris","aAnnotationURIs","_temp","uri","trim","annotation","_result2","__exports","__esModule"],"sources":["BaseCard.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport type Component from \"sap/ui/core/Component\";\nimport type V4ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport type { AppManifest } from \"../helpers/ApplicationInfo\";\nimport { fetchFileContent, isODataV4Model, type ODataModel } from \"../odata/ODataUtils\";\n\ntype AnnotatedODataModel = {\n\taAnnotationURIs?: string[];\n\taAnnotationUris?: string[];\n};\n\n/**\n * Base class for semantic card generation providing common functionality\n * for accessing application metadata, annotations, and OData service information.\n */\nexport abstract class BaseCard {\n\tprotected readonly appComponent: Component;\n\n\tconstructor(appComponent: Component) {\n\t\tthis.appComponent = appComponent;\n\t}\n\n\t/**\n\t * Abstract method to generate the semantic card object.\n\t * Must be implemented by concrete card types.\n\t */\n\tabstract generateObjectCard(): Promise<any>;\n\n\t/**\n\t * Retrieves the application manifest with validation.\n\t * @returns The application manifest\n\t * @throws Error if manifest is not available\n\t */\n\tprotected getApplicationManifest(): AppManifest {\n\t\treturn this.appComponent.getManifest() as AppManifest;\n\t}\n\n\t/**\n\t * Retrieves OData service metadata as XML string.\n\t * @returns Promise resolving to metadata XML string\n\t * @throws Error if model is not available or metadata fetch fails\n\t */\n\tprotected async getMetadata(): Promise<string> {\n\t\tconst appModel = this.appComponent.getModel();\n\t\tif (!appModel) {\n\t\t\tthrow new Error(\"OData model is not available.\");\n\t\t}\n\n\t\tconst bODataV4 = isODataV4Model(appModel as ODataModel);\n\t\tconst serviceUrl = bODataV4\n\t\t\t? (appModel as V4ODataModel).getServiceUrl()\n\t\t\t: (appModel as unknown as { sServiceUrl?: string }).sServiceUrl;\n\n\t\tif (!serviceUrl) {\n\t\t\tthrow new Error(\"Service URL is not available from the model.\");\n\t\t}\n\n\t\ttry {\n\t\t\tconst metadataUrl = serviceUrl?.endsWith(\"/\") ? `${serviceUrl}$metadata` : `${serviceUrl}/$metadata`;\n\t\t\tconst metadataFileContent = await fetchFileContent(metadataUrl);\n\t\t\treturn metadataFileContent;\n\t\t} catch (error) {\n\t\t\tconst errorMessage = error instanceof Error ? error.message : \"Unknown error\";\n\t\t\tthrow new Error(`Failed to fetch OData metadata: ${errorMessage}`);\n\t\t}\n\t}\n\n\t/**\n\t * Retrieves annotation files from the OData model.\n\t * @returns Promise resolving to array of annotation XML strings\n\t * @throws Error if model is not available or annotation fetch fails\n\t */\n\tprotected async getAnnotations(): Promise<string[]> {\n\t\tconst appModel = this.appComponent.getModel();\n\t\tif (!appModel) {\n\t\t\tthrow new Error(\"OData model is not available.\");\n\t\t}\n\n\t\tconst bODataV4 = isODataV4Model(appModel as ODataModel);\n\t\tconst annotations = [];\n\t\tconst annotationURIs =\n\t\t\t(bODataV4\n\t\t\t\t? (appModel.getMetaModel() as unknown as AnnotatedODataModel)?.aAnnotationUris\n\t\t\t\t: (appModel as unknown as AnnotatedODataModel)?.aAnnotationURIs) ?? [];\n\n\t\tfor (const uri of annotationURIs) {\n\t\t\tif (!uri || uri.trim().length === 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tconst annotation = await fetchFileContent(uri);\n\t\t\t\tannotations.push(annotation);\n\t\t\t} catch (error) {\n\t\t\t\tconst errorMessage = error instanceof Error ? error.message : \"Unknown error\";\n\t\t\t\tthrow new Error(`Failed to fetch annotation from ${uri}: ${errorMessage}`);\n\t\t\t}\n\t\t}\n\n\t\treturn annotations;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}