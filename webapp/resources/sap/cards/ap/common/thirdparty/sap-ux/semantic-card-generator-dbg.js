sap.ui.define(function(){"use strict";var e=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function t(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function e(){if(this instanceof e){return Reflect.construct(t,arguments,this.constructor)}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};Object.defineProperty(r,"__esModule",{value:true});Object.keys(e).forEach(function(t){var a=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,a.get?a:{enumerable:true,get:function(){return e[t]}})});return r}var r={exports:{}};var a=typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{};var n=[];var i=[];var o=typeof Uint8Array!=="undefined"?Uint8Array:Array;var s=false;function u(){s=true;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var t=0,r=e.length;t<r;++t){n[t]=e[t];i[e.charCodeAt(t)]=t}i["-".charCodeAt(0)]=62;i["_".charCodeAt(0)]=63}function l(e){if(!s){u()}var t,r,a,n,l,c;var f=e.length;if(f%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}l=e[f-2]==="="?2:e[f-1]==="="?1:0;c=new o(f*3/4-l);a=l>0?f-4:f;var p=0;for(t=0,r=0;t<a;t+=4,r+=3){n=i[e.charCodeAt(t)]<<18|i[e.charCodeAt(t+1)]<<12|i[e.charCodeAt(t+2)]<<6|i[e.charCodeAt(t+3)];c[p++]=n>>16&255;c[p++]=n>>8&255;c[p++]=n&255}if(l===2){n=i[e.charCodeAt(t)]<<2|i[e.charCodeAt(t+1)]>>4;c[p++]=n&255}else if(l===1){n=i[e.charCodeAt(t)]<<10|i[e.charCodeAt(t+1)]<<4|i[e.charCodeAt(t+2)]>>2;c[p++]=n>>8&255;c[p++]=n&255}return c}function c(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[e&63]}function f(e,t,r){var a;var n=[];for(var i=t;i<r;i+=3){a=(e[i]<<16)+(e[i+1]<<8)+e[i+2];n.push(c(a))}return n.join("")}function p(e){if(!s){u()}var t;var r=e.length;var a=r%3;var i="";var o=[];var l=16383;for(var c=0,p=r-a;c<p;c+=l){o.push(f(e,c,c+l>p?p:c+l))}if(a===1){t=e[r-1];i+=n[t>>2];i+=n[t<<4&63];i+="=="}else if(a===2){t=(e[r-2]<<8)+e[r-1];i+=n[t>>10];i+=n[t>>4&63];i+=n[t<<2&63];i+="="}o.push(i);return o.join("")}function d(e,t,r,a,n){var i,o;var s=n*8-a-1;var u=(1<<s)-1;var l=u>>1;var c=-7;var f=r?n-1:0;var p=r?-1:1;var d=e[t+f];f+=p;i=d&(1<<-c)-1;d>>=-c;c+=s;for(;c>0;i=i*256+e[t+f],f+=p,c-=8){}o=i&(1<<-c)-1;i>>=-c;c+=a;for(;c>0;o=o*256+e[t+f],f+=p,c-=8){}if(i===0){i=1-l}else if(i===u){return o?NaN:(d?-1:1)*Infinity}else{o=o+Math.pow(2,a);i=i-l}return(d?-1:1)*o*Math.pow(2,i-a)}function m(e,t,r,a,n,i){var o,s,u;var l=i*8-n-1;var c=(1<<l)-1;var f=c>>1;var p=n===23?Math.pow(2,-24)-Math.pow(2,-77):0;var d=a?0:i-1;var m=a?1:-1;var h=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){s=isNaN(t)?1:0;o=c}else{o=Math.floor(Math.log(t)/Math.LN2);if(t*(u=Math.pow(2,-o))<1){o--;u*=2}if(o+f>=1){t+=p/u}else{t+=p*Math.pow(2,1-f)}if(t*u>=2){o++;u/=2}if(o+f>=c){s=0;o=c}else if(o+f>=1){s=(t*u-1)*Math.pow(2,n);o=o+f}else{s=t*Math.pow(2,f-1)*Math.pow(2,n);o=0}}for(;n>=8;e[r+d]=s&255,d+=m,s/=256,n-=8){}o=o<<n|s;l+=n;for(;l>0;e[r+d]=o&255,d+=m,o/=256,l-=8){}e[r+d-m]|=h*128}var h={}.toString;var y=Array.isArray||function(e){return h.call(e)=="[object Array]"};
/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */var g=50;T.TYPED_ARRAY_SUPPORT=a.TYPED_ARRAY_SUPPORT!==undefined?a.TYPED_ARRAY_SUPPORT:true;v();function v(){return T.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function b(e,t){if(v()<t){throw new RangeError("Invalid typed array length")}if(T.TYPED_ARRAY_SUPPORT){e=new Uint8Array(t);e.__proto__=T.prototype}else{if(e===null){e=new T(t)}e.length=t}return e}function T(e,t,r){if(!T.TYPED_ARRAY_SUPPORT&&!(this instanceof T)){return new T(e,t,r)}if(typeof e==="number"){if(typeof t==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return E(this,e)}return C(this,e,t,r)}T.poolSize=8192;T._augment=function(e){e.__proto__=T.prototype;return e};function C(e,t,r,a){if(typeof t==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof ArrayBuffer!=="undefined"&&t instanceof ArrayBuffer){return w(e,t,r,a)}if(typeof t==="string"){return D(e,t,r)}return A(e,t)}T.from=function(e,t,r){return C(null,e,t,r)};if(T.TYPED_ARRAY_SUPPORT){T.prototype.__proto__=Uint8Array.prototype;T.__proto__=Uint8Array;if(typeof Symbol!=="undefined"&&Symbol.species&&T[Symbol.species]===T);}function O(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be a number')}else if(e<0){throw new RangeError('"size" argument must not be negative')}}function P(e,t,r,a){O(t);if(t<=0){return b(e,t)}if(r!==undefined){return typeof a==="string"?b(e,t).fill(r,a):b(e,t).fill(r)}return b(e,t)}T.alloc=function(e,t,r){return P(null,e,t,r)};function E(e,t){O(t);e=b(e,t<0?0:I(t)|0);if(!T.TYPED_ARRAY_SUPPORT){for(var r=0;r<t;++r){e[r]=0}}return e}T.allocUnsafe=function(e){return E(null,e)};T.allocUnsafeSlow=function(e){return E(null,e)};function D(e,t,r){if(typeof r!=="string"||r===""){r="utf8"}if(!T.isEncoding(r)){throw new TypeError('"encoding" must be a valid string encoding')}var a=S(t,r)|0;e=b(e,a);var n=e.write(t,r);if(n!==a){e=e.slice(0,n)}return e}function _(e,t){var r=t.length<0?0:I(t.length)|0;e=b(e,r);for(var a=0;a<r;a+=1){e[a]=t[a]&255}return e}function w(e,t,r,a){t.byteLength;if(r<0||t.byteLength<r){throw new RangeError("'offset' is out of bounds")}if(t.byteLength<r+(a||0)){throw new RangeError("'length' is out of bounds")}if(r===undefined&&a===undefined){t=new Uint8Array(t)}else if(a===undefined){t=new Uint8Array(t,r)}else{t=new Uint8Array(t,r,a)}if(T.TYPED_ARRAY_SUPPORT){e=t;e.__proto__=T.prototype}else{e=_(e,t)}return e}function A(e,t){if(N(t)){var r=I(t.length)|0;e=b(e,r);if(e.length===0){return e}t.copy(e,0,0,r);return e}if(t){if(typeof ArrayBuffer!=="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t){if(typeof t.length!=="number"||pe(t.length)){return b(e,0)}return _(e,t)}if(t.type==="Buffer"&&y(t.data)){return _(e,t.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function I(e){if(e>=v()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+v().toString(16)+" bytes")}return e|0}T.isBuffer=de;function N(e){return!!(e!=null&&e._isBuffer)}T.compare=function e(t,r){if(!N(t)||!N(r)){throw new TypeError("Arguments must be Buffers")}if(t===r)return 0;var a=t.length;var n=r.length;for(var i=0,o=Math.min(a,n);i<o;++i){if(t[i]!==r[i]){a=t[i];n=r[i];break}}if(a<n)return-1;if(n<a)return 1;return 0};T.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};T.concat=function e(t,r){if(!y(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return T.alloc(0)}var a;if(r===undefined){r=0;for(a=0;a<t.length;++a){r+=t[a].length}}var n=T.allocUnsafe(r);var i=0;for(a=0;a<t.length;++a){var o=t[a];if(!N(o)){throw new TypeError('"list" argument must be an Array of Buffers')}o.copy(n,i);i+=o.length}return n};function S(e,t){if(N(e)){return e.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){e=""+e}var r=e.length;if(r===0)return 0;var a=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case undefined:return se(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return ce(e).length;default:if(a)return se(e).length;t=(""+t).toLowerCase();a=true}}}T.byteLength=S;function x(e,t,r){var a=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;t>>>=0;if(r<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return q(this,t,r);case"utf8":case"utf-8":return z(this,t,r);case"ascii":return K(this,t,r);case"latin1":case"binary":return G(this,t,r);case"base64":return B(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,t,r);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();a=true}}}T.prototype._isBuffer=true;function F(e,t,r){var a=e[t];e[t]=e[r];e[r]=a}T.prototype.swap16=function e(){var t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var r=0;r<t;r+=2){F(this,r,r+1)}return this};T.prototype.swap32=function e(){var t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var r=0;r<t;r+=4){F(this,r,r+3);F(this,r+1,r+2)}return this};T.prototype.swap64=function e(){var t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var r=0;r<t;r+=8){F(this,r,r+7);F(this,r+1,r+6);F(this,r+2,r+5);F(this,r+3,r+4)}return this};T.prototype.toString=function e(){var t=this.length|0;if(t===0)return"";if(arguments.length===0)return z(this,0,t);return x.apply(this,arguments)};T.prototype.equals=function e(t){if(!N(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return T.compare(this,t)===0};T.prototype.inspect=function e(){var t="";var r=g;if(this.length>0){t=this.toString("hex",0,r).match(/.{2}/g).join(" ");if(this.length>r)t+=" ... "}return"<Buffer "+t+">"};T.prototype.compare=function e(t,r,a,n,i){if(!N(t)){throw new TypeError("Argument must be a Buffer")}if(r===undefined){r=0}if(a===undefined){a=t?t.length:0}if(n===undefined){n=0}if(i===undefined){i=this.length}if(r<0||a>t.length||n<0||i>this.length){throw new RangeError("out of range index")}if(n>=i&&r>=a){return 0}if(n>=i){return-1}if(r>=a){return 1}r>>>=0;a>>>=0;n>>>=0;i>>>=0;if(this===t)return 0;var o=i-n;var s=a-r;var u=Math.min(o,s);var l=this.slice(n,i);var c=t.slice(r,a);for(var f=0;f<u;++f){if(l[f]!==c[f]){o=l[f];s=c[f];break}}if(o<s)return-1;if(s<o)return 1;return 0};function M(e,t,r,a,n){if(e.length===0)return-1;if(typeof r==="string"){a=r;r=0}else if(r>2147483647){r=2147483647}else if(r<-2147483648){r=-2147483648}r=+r;if(isNaN(r)){r=n?0:e.length-1}if(r<0)r=e.length+r;if(r>=e.length){if(n)return-1;else r=e.length-1}else if(r<0){if(n)r=0;else return-1}if(typeof t==="string"){t=T.from(t,a)}if(N(t)){if(t.length===0){return-1}return V(e,t,r,a,n)}else if(typeof t==="number"){t=t&255;if(T.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==="function"){if(n){return Uint8Array.prototype.indexOf.call(e,t,r)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,r)}}return V(e,[t],r,a,n)}throw new TypeError("val must be string, number or Buffer")}function V(e,t,r,a,n){var i=1;var o=e.length;var s=t.length;if(a!==undefined){a=String(a).toLowerCase();if(a==="ucs2"||a==="ucs-2"||a==="utf16le"||a==="utf-16le"){if(e.length<2||t.length<2){return-1}i=2;o/=2;s/=2;r/=2}}function u(e,t){if(i===1){return e[t]}else{return e.readUInt16BE(t*i)}}var l;if(n){var c=-1;for(l=r;l<o;l++){if(u(e,l)===u(t,c===-1?0:l-c)){if(c===-1)c=l;if(l-c+1===s)return c*i}else{if(c!==-1)l-=l-c;c=-1}}}else{if(r+s>o)r=o-s;for(l=r;l>=0;l--){var f=true;for(var p=0;p<s;p++){if(u(e,l+p)!==u(t,p)){f=false;break}}if(f)return l}}return-1}T.prototype.includes=function e(t,r,a){return this.indexOf(t,r,a)!==-1};T.prototype.indexOf=function e(t,r,a){return M(this,t,r,a,true)};T.prototype.lastIndexOf=function e(t,r,a){return M(this,t,r,a,false)};function R(e,t,r,a){r=Number(r)||0;var n=e.length-r;if(!a){a=n}else{a=Number(a);if(a>n){a=n}}var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");if(a>i/2){a=i/2}for(var o=0;o<a;++o){var s=parseInt(t.substr(o*2,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function L(e,t,r,a){return fe(se(t,e.length-r),e,r,a)}function $(e,t,r,a){return fe(ue(t),e,r,a)}function j(e,t,r,a){return $(e,t,r,a)}function U(e,t,r,a){return fe(ce(t),e,r,a)}function k(e,t,r,a){return fe(le(t,e.length-r),e,r,a)}T.prototype.write=function e(t,r,a,n){if(r===undefined){n="utf8";a=this.length;r=0}else if(a===undefined&&typeof r==="string"){n=r;a=this.length;r=0}else if(isFinite(r)){r=r|0;if(isFinite(a)){a=a|0;if(n===undefined)n="utf8"}else{n=a;a=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var i=this.length-r;if(a===undefined||a>i)a=i;if(t.length>0&&(a<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!n)n="utf8";var o=false;for(;;){switch(n){case"hex":return R(this,t,r,a);case"utf8":case"utf-8":return L(this,t,r,a);case"ascii":return $(this,t,r,a);case"latin1":case"binary":return j(this,t,r,a);case"base64":return U(this,t,r,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,r,a);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase();o=true}}};T.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function B(e,t,r){if(t===0&&r===e.length){return p(e)}else{return p(e.slice(t,r))}}function z(e,t,r){r=Math.min(e.length,r);var a=[];var n=t;while(n<r){var i=e[n];var o=null;var s=i>239?4:i>223?3:i>191?2:1;if(n+s<=r){var u,l,c,f;switch(s){case 1:if(i<128){o=i}break;case 2:u=e[n+1];if((u&192)===128){f=(i&31)<<6|u&63;if(f>127){o=f}}break;case 3:u=e[n+1];l=e[n+2];if((u&192)===128&&(l&192)===128){f=(i&15)<<12|(u&63)<<6|l&63;if(f>2047&&(f<55296||f>57343)){o=f}}break;case 4:u=e[n+1];l=e[n+2];c=e[n+3];if((u&192)===128&&(l&192)===128&&(c&192)===128){f=(i&15)<<18|(u&63)<<12|(l&63)<<6|c&63;if(f>65535&&f<1114112){o=f}}}}if(o===null){o=65533;s=1}else if(o>65535){o-=65536;a.push(o>>>10&1023|55296);o=56320|o&1023}a.push(o);n+=s}return Y(a)}var Q=4096;function Y(e){var t=e.length;if(t<=Q){return String.fromCharCode.apply(String,e)}var r="";var a=0;while(a<t){r+=String.fromCharCode.apply(String,e.slice(a,a+=Q))}return r}function K(e,t,r){var a="";r=Math.min(e.length,r);for(var n=t;n<r;++n){a+=String.fromCharCode(e[n]&127)}return a}function G(e,t,r){var a="";r=Math.min(e.length,r);for(var n=t;n<r;++n){a+=String.fromCharCode(e[n])}return a}function q(e,t,r){var a=e.length;if(!t||t<0)t=0;if(!r||r<0||r>a)r=a;var n="";for(var i=t;i<r;++i){n+=oe(e[i])}return n}function H(e,t,r){var a=e.slice(t,r);var n="";for(var i=0;i<a.length;i+=2){n+=String.fromCharCode(a[i]+a[i+1]*256)}return n}T.prototype.slice=function e(t,r){var a=this.length;t=~~t;r=r===undefined?a:~~r;if(t<0){t+=a;if(t<0)t=0}else if(t>a){t=a}if(r<0){r+=a;if(r<0)r=0}else if(r>a){r=a}if(r<t)r=t;var n;if(T.TYPED_ARRAY_SUPPORT){n=this.subarray(t,r);n.__proto__=T.prototype}else{var i=r-t;n=new T(i,undefined);for(var o=0;o<i;++o){n[o]=this[o+t]}}return n};function W(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}T.prototype.readUIntLE=function e(t,r,a){t=t|0;r=r|0;if(!a)W(t,r,this.length);var n=this[t];var i=1;var o=0;while(++o<r&&(i*=256)){n+=this[t+o]*i}return n};T.prototype.readUIntBE=function e(t,r,a){t=t|0;r=r|0;if(!a){W(t,r,this.length)}var n=this[t+--r];var i=1;while(r>0&&(i*=256)){n+=this[t+--r]*i}return n};T.prototype.readUInt8=function e(t,r){if(!r)W(t,1,this.length);return this[t]};T.prototype.readUInt16LE=function e(t,r){if(!r)W(t,2,this.length);return this[t]|this[t+1]<<8};T.prototype.readUInt16BE=function e(t,r){if(!r)W(t,2,this.length);return this[t]<<8|this[t+1]};T.prototype.readUInt32LE=function e(t,r){if(!r)W(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};T.prototype.readUInt32BE=function e(t,r){if(!r)W(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};T.prototype.readIntLE=function e(t,r,a){t=t|0;r=r|0;if(!a)W(t,r,this.length);var n=this[t];var i=1;var o=0;while(++o<r&&(i*=256)){n+=this[t+o]*i}i*=128;if(n>=i)n-=Math.pow(2,8*r);return n};T.prototype.readIntBE=function e(t,r,a){t=t|0;r=r|0;if(!a)W(t,r,this.length);var n=r;var i=1;var o=this[t+--n];while(n>0&&(i*=256)){o+=this[t+--n]*i}i*=128;if(o>=i)o-=Math.pow(2,8*r);return o};T.prototype.readInt8=function e(t,r){if(!r)W(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};T.prototype.readInt16LE=function e(t,r){if(!r)W(t,2,this.length);var a=this[t]|this[t+1]<<8;return a&32768?a|4294901760:a};T.prototype.readInt16BE=function e(t,r){if(!r)W(t,2,this.length);var a=this[t+1]|this[t]<<8;return a&32768?a|4294901760:a};T.prototype.readInt32LE=function e(t,r){if(!r)W(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};T.prototype.readInt32BE=function e(t,r){if(!r)W(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};T.prototype.readFloatLE=function e(t,r){if(!r)W(t,4,this.length);return d(this,t,true,23,4)};T.prototype.readFloatBE=function e(t,r){if(!r)W(t,4,this.length);return d(this,t,false,23,4)};T.prototype.readDoubleLE=function e(t,r){if(!r)W(t,8,this.length);return d(this,t,true,52,8)};T.prototype.readDoubleBE=function e(t,r){if(!r)W(t,8,this.length);return d(this,t,false,52,8)};function Z(e,t,r,a,n,i){if(!N(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<i)throw new RangeError('"value" argument is out of bounds');if(r+a>e.length)throw new RangeError("Index out of range")}T.prototype.writeUIntLE=function e(t,r,a,n){t=+t;r=r|0;a=a|0;if(!n){var i=Math.pow(2,8*a)-1;Z(this,t,r,a,i,0)}var o=1;var s=0;this[r]=t&255;while(++s<a&&(o*=256)){this[r+s]=t/o&255}return r+a};T.prototype.writeUIntBE=function e(t,r,a,n){t=+t;r=r|0;a=a|0;if(!n){var i=Math.pow(2,8*a)-1;Z(this,t,r,a,i,0)}var o=a-1;var s=1;this[r+o]=t&255;while(--o>=0&&(s*=256)){this[r+o]=t/s&255}return r+a};T.prototype.writeUInt8=function e(t,r,a){t=+t;r=r|0;if(!a)Z(this,t,r,1,255,0);if(!T.TYPED_ARRAY_SUPPORT)t=Math.floor(t);this[r]=t&255;return r+1};function X(e,t,r,a){if(t<0)t=65535+t+1;for(var n=0,i=Math.min(e.length-r,2);n<i;++n){e[r+n]=(t&255<<8*(a?n:1-n))>>>(a?n:1-n)*8}}T.prototype.writeUInt16LE=function e(t,r,a){t=+t;r=r|0;if(!a)Z(this,t,r,2,65535,0);if(T.TYPED_ARRAY_SUPPORT){this[r]=t&255;this[r+1]=t>>>8}else{X(this,t,r,true)}return r+2};T.prototype.writeUInt16BE=function e(t,r,a){t=+t;r=r|0;if(!a)Z(this,t,r,2,65535,0);if(T.TYPED_ARRAY_SUPPORT){this[r]=t>>>8;this[r+1]=t&255}else{X(this,t,r,false)}return r+2};function J(e,t,r,a){if(t<0)t=4294967295+t+1;for(var n=0,i=Math.min(e.length-r,4);n<i;++n){e[r+n]=t>>>(a?n:3-n)*8&255}}T.prototype.writeUInt32LE=function e(t,r,a){t=+t;r=r|0;if(!a)Z(this,t,r,4,4294967295,0);if(T.TYPED_ARRAY_SUPPORT){this[r+3]=t>>>24;this[r+2]=t>>>16;this[r+1]=t>>>8;this[r]=t&255}else{J(this,t,r,true)}return r+4};T.prototype.writeUInt32BE=function e(t,r,a){t=+t;r=r|0;if(!a)Z(this,t,r,4,4294967295,0);if(T.TYPED_ARRAY_SUPPORT){this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255}else{J(this,t,r,false)}return r+4};T.prototype.writeIntLE=function e(t,r,a,n){t=+t;r=r|0;if(!n){var i=Math.pow(2,8*a-1);Z(this,t,r,a,i-1,-i)}var o=0;var s=1;var u=0;this[r]=t&255;while(++o<a&&(s*=256)){if(t<0&&u===0&&this[r+o-1]!==0){u=1}this[r+o]=(t/s>>0)-u&255}return r+a};T.prototype.writeIntBE=function e(t,r,a,n){t=+t;r=r|0;if(!n){var i=Math.pow(2,8*a-1);Z(this,t,r,a,i-1,-i)}var o=a-1;var s=1;var u=0;this[r+o]=t&255;while(--o>=0&&(s*=256)){if(t<0&&u===0&&this[r+o+1]!==0){u=1}this[r+o]=(t/s>>0)-u&255}return r+a};T.prototype.writeInt8=function e(t,r,a){t=+t;r=r|0;if(!a)Z(this,t,r,1,127,-128);if(!T.TYPED_ARRAY_SUPPORT)t=Math.floor(t);if(t<0)t=255+t+1;this[r]=t&255;return r+1};T.prototype.writeInt16LE=function e(t,r,a){t=+t;r=r|0;if(!a)Z(this,t,r,2,32767,-32768);if(T.TYPED_ARRAY_SUPPORT){this[r]=t&255;this[r+1]=t>>>8}else{X(this,t,r,true)}return r+2};T.prototype.writeInt16BE=function e(t,r,a){t=+t;r=r|0;if(!a)Z(this,t,r,2,32767,-32768);if(T.TYPED_ARRAY_SUPPORT){this[r]=t>>>8;this[r+1]=t&255}else{X(this,t,r,false)}return r+2};T.prototype.writeInt32LE=function e(t,r,a){t=+t;r=r|0;if(!a)Z(this,t,r,4,2147483647,-2147483648);if(T.TYPED_ARRAY_SUPPORT){this[r]=t&255;this[r+1]=t>>>8;this[r+2]=t>>>16;this[r+3]=t>>>24}else{J(this,t,r,true)}return r+4};T.prototype.writeInt32BE=function e(t,r,a){t=+t;r=r|0;if(!a)Z(this,t,r,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;if(T.TYPED_ARRAY_SUPPORT){this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255}else{J(this,t,r,false)}return r+4};function ee(e,t,r,a,n,i){if(r+a>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function te(e,t,r,a,n){if(!n){ee(e,t,r,4)}m(e,t,r,a,23,4);return r+4}T.prototype.writeFloatLE=function e(t,r,a){return te(this,t,r,true,a)};T.prototype.writeFloatBE=function e(t,r,a){return te(this,t,r,false,a)};function re(e,t,r,a,n){if(!n){ee(e,t,r,8)}m(e,t,r,a,52,8);return r+8}T.prototype.writeDoubleLE=function e(t,r,a){return re(this,t,r,true,a)};T.prototype.writeDoubleBE=function e(t,r,a){return re(this,t,r,false,a)};T.prototype.copy=function e(t,r,a,n){if(!a)a=0;if(!n&&n!==0)n=this.length;if(r>=t.length)r=t.length;if(!r)r=0;if(n>0&&n<a)n=a;if(n===a)return 0;if(t.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds")}if(a<0||a>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");if(n>this.length)n=this.length;if(t.length-r<n-a){n=t.length-r+a}var i=n-a;var o;if(this===t&&a<r&&r<n){for(o=i-1;o>=0;--o){t[o+r]=this[o+a]}}else if(i<1e3||!T.TYPED_ARRAY_SUPPORT){for(o=0;o<i;++o){t[o+r]=this[o+a]}}else{Uint8Array.prototype.set.call(t,this.subarray(a,a+i),r)}return i};T.prototype.fill=function e(t,r,a,n){if(typeof t==="string"){if(typeof r==="string"){n=r;r=0;a=this.length}else if(typeof a==="string"){n=a;a=this.length}if(t.length===1){var i=t.charCodeAt(0);if(i<256){t=i}}if(n!==undefined&&typeof n!=="string"){throw new TypeError("encoding must be a string")}if(typeof n==="string"&&!T.isEncoding(n)){throw new TypeError("Unknown encoding: "+n)}}else if(typeof t==="number"){t=t&255}if(r<0||this.length<r||this.length<a){throw new RangeError("Out of range index")}if(a<=r){return this}r=r>>>0;a=a===undefined?this.length:a>>>0;if(!t)t=0;var o;if(typeof t==="number"){for(o=r;o<a;++o){this[o]=t}}else{var s=N(t)?t:se(new T(t,n).toString());var u=s.length;for(o=0;o<a-r;++o){this[o+r]=s[o%u]}}return this};var ae=/[^+\/0-9A-Za-z-_]/g;function ne(e){e=ie(e).replace(ae,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function ie(e){if(e.trim)return e.trim();return e.replace(/^\s+|\s+$/g,"")}function oe(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function se(e,t){t=t||Infinity;var r;var a=e.length;var n=null;var i=[];for(var o=0;o<a;++o){r=e.charCodeAt(o);if(r>55295&&r<57344){if(!n){if(r>56319){if((t-=3)>-1)i.push(239,191,189);continue}else if(o+1===a){if((t-=3)>-1)i.push(239,191,189);continue}n=r;continue}if(r<56320){if((t-=3)>-1)i.push(239,191,189);n=r;continue}r=(n-55296<<10|r-56320)+65536}else if(n){if((t-=3)>-1)i.push(239,191,189)}n=null;if(r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return i}function ue(e){var t=[];for(var r=0;r<e.length;++r){t.push(e.charCodeAt(r)&255)}return t}function le(e,t){var r,a,n;var i=[];for(var o=0;o<e.length;++o){if((t-=2)<0)break;r=e.charCodeAt(o);a=r>>8;n=r%256;i.push(n);i.push(a)}return i}function ce(e){return l(ne(e))}function fe(e,t,r,a){for(var n=0;n<a;++n){if(n+r>=t.length||n>=e.length)break;t[n+r]=e[n]}return n}function pe(e){return e!==e}function de(e){return e!=null&&(!!e._isBuffer||me(e)||he(e))}function me(e){return!!e.constructor&&typeof e.constructor.isBuffer==="function"&&e.constructor.isBuffer(e)}function he(e){return typeof e.readFloatLE==="function"&&typeof e.slice==="function"&&me(e.slice(0,0))}
// Copyright Joyent, Inc. and other Node contributors.
// distribute, sublicense, and/or sell copies of the Software, and to permit
// The above copyright notice and this permission notice shall be included
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
var ye=T.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function ge(e){if(e&&!ye(e)){throw new Error("Unknown encoding: "+e)}}function ve(e){this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,"");ge(e);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2;this.detectIncompleteChar=Te;break;case"base64":this.surrogateSize=3;this.detectIncompleteChar=Ce;break;default:this.write=be;return}this.charBuffer=new T(6);this.charReceived=0;this.charLength=0}ve.prototype.write=function(e){var t="";while(this.charLength){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;e.copy(this.charBuffer,this.charReceived,0,r);this.charReceived+=r;if(this.charReceived<this.charLength){return""}e=e.slice(r,e.length);t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var a=t.charCodeAt(t.length-1);if(a>=55296&&a<=56319){this.charLength+=this.surrogateSize;t="";continue}this.charReceived=this.charLength=0;if(e.length===0){return t}break}this.detectIncompleteChar(e);var n=e.length;if(this.charLength){e.copy(this.charBuffer,0,e.length-this.charReceived,n);n-=this.charReceived}t+=e.toString(this.encoding,0,n);var n=t.length-1;var a=t.charCodeAt(n);if(a>=55296&&a<=56319){var i=this.surrogateSize;this.charLength+=i;this.charReceived+=i;this.charBuffer.copy(this.charBuffer,i,0,i);e.copy(this.charBuffer,0,0,i);return t.substring(0,n)}return t};ve.prototype.detectIncompleteChar=function(e){var t=e.length>=3?3:e.length;for(;t>0;t--){var r=e[e.length-t];if(t==1&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t};ve.prototype.end=function(e){var t="";if(e&&e.length)t=this.write(e);if(this.charReceived){var r=this.charReceived;var a=this.charBuffer;var n=this.encoding;t+=a.slice(0,r).toString(n)}return t};function be(e){return e.toString(this.encoding)}function Te(e){this.charReceived=e.length%2;this.charLength=this.charReceived?2:0}function Ce(e){this.charReceived=e.length%3;this.charLength=this.charReceived?3:0}var Oe=Object.freeze({__proto__:null,StringDecoder:ve});var Pe=t(Oe);var Ee;function De(){}De.prototype=Object.create(null);function _e(){_e.init.call(this)}_e.EventEmitter=_e;_e.usingDomains=false;_e.prototype.domain=undefined;_e.prototype._events=undefined;_e.prototype._maxListeners=undefined;_e.defaultMaxListeners=10;_e.init=function(){this.domain=null;if(_e.usingDomains){if(Ee.active);}if(!this._events||this._events===Object.getPrototypeOf(this)._events){this._events=new De;this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};_e.prototype.setMaxListeners=function e(t){if(typeof t!=="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');this._maxListeners=t;return this};function we(e){if(e._maxListeners===undefined)return _e.defaultMaxListeners;return e._maxListeners}_e.prototype.getMaxListeners=function e(){return we(this)};function Ae(e,t,r){if(t)e.call(r);else{var a=e.length;var n=$e(e,a);for(var i=0;i<a;++i)n[i].call(r)}}function Ie(e,t,r,a){if(t)e.call(r,a);else{var n=e.length;var i=$e(e,n);for(var o=0;o<n;++o)i[o].call(r,a)}}function Ne(e,t,r,a,n){if(t)e.call(r,a,n);else{var i=e.length;var o=$e(e,i);for(var s=0;s<i;++s)o[s].call(r,a,n)}}function Se(e,t,r,a,n,i){if(t)e.call(r,a,n,i);else{var o=e.length;var s=$e(e,o);for(var u=0;u<o;++u)s[u].call(r,a,n,i)}}function xe(e,t,r,a){if(t)e.apply(r,a);else{var n=e.length;var i=$e(e,n);for(var o=0;o<n;++o)i[o].apply(r,a)}}_e.prototype.emit=function e(t){var r,a,n,i,o,s,u;var l=t==="error";s=this._events;if(s)l=l&&s.error==null;else if(!l)return false;u=this.domain;if(l){r=arguments[1];if(u){if(!r)r=new Error('Uncaught, unspecified "error" event');r.domainEmitter=this;r.domain=u;r.domainThrown=false;u.emit("error",r)}else if(r instanceof Error){throw r}else{var c=new Error('Uncaught, unspecified "error" event. ('+r+")");c.context=r;throw c}return false}a=s[t];if(!a)return false;var f=typeof a==="function";n=arguments.length;switch(n){case 1:Ae(a,f,this);break;case 2:Ie(a,f,this,arguments[1]);break;case 3:Ne(a,f,this,arguments[1],arguments[2]);break;case 4:Se(a,f,this,arguments[1],arguments[2],arguments[3]);break;default:i=new Array(n-1);for(o=1;o<n;o++)i[o-1]=arguments[o];xe(a,f,this,i)}return true};function Fe(e,t,r,a){var n;var i;var o;if(typeof r!=="function")throw new TypeError('"listener" argument must be a function');i=e._events;if(!i){i=e._events=new De;e._eventsCount=0}else{if(i.newListener){e.emit("newListener",t,r.listener?r.listener:r);i=e._events}o=i[t]}if(!o){o=i[t]=r;++e._eventsCount}else{if(typeof o==="function"){o=i[t]=a?[r,o]:[o,r]}else{if(a){o.unshift(r)}else{o.push(r)}}if(!o.warned){n=we(e);if(n&&n>0&&o.length>n){o.warned=true;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. "+"Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning";s.emitter=e;s.type=t;s.count=o.length;Me(s)}}}return e}function Me(e){typeof console.warn==="function"?console.warn(e):console.log(e)}_e.prototype.addListener=function e(t,r){return Fe(this,t,r,false)};_e.prototype.on=_e.prototype.addListener;_e.prototype.prependListener=function e(t,r){return Fe(this,t,r,true)};function Ve(e,t,r){var a=false;function n(){e.removeListener(t,n);if(!a){a=true;r.apply(e,arguments)}}n.listener=r;return n}_e.prototype.once=function e(t,r){if(typeof r!=="function")throw new TypeError('"listener" argument must be a function');this.on(t,Ve(this,t,r));return this};_e.prototype.prependOnceListener=function e(t,r){if(typeof r!=="function")throw new TypeError('"listener" argument must be a function');this.prependListener(t,Ve(this,t,r));return this};_e.prototype.removeListener=function e(t,r){var a,n,i,o,s;if(typeof r!=="function")throw new TypeError('"listener" argument must be a function');n=this._events;if(!n)return this;a=n[t];if(!a)return this;if(a===r||a.listener&&a.listener===r){if(--this._eventsCount===0)this._events=new De;else{delete n[t];if(n.removeListener)this.emit("removeListener",t,a.listener||r)}}else if(typeof a!=="function"){i=-1;for(o=a.length;o-- >0;){if(a[o]===r||a[o].listener&&a[o].listener===r){s=a[o].listener;i=o;break}}if(i<0)return this;if(a.length===1){a[0]=undefined;if(--this._eventsCount===0){this._events=new De;return this}else{delete n[t]}}else{Le(a,i)}if(n.removeListener)this.emit("removeListener",t,s||r)}return this};_e.prototype.off=function(e,t){return this.removeListener(e,t)};_e.prototype.removeAllListeners=function e(t){var r,a;a=this._events;if(!a)return this;if(!a.removeListener){if(arguments.length===0){this._events=new De;this._eventsCount=0}else if(a[t]){if(--this._eventsCount===0)this._events=new De;else delete a[t]}return this}if(arguments.length===0){var n=Object.keys(a);for(var i=0,o;i<n.length;++i){o=n[i];if(o==="removeListener")continue;this.removeAllListeners(o)}this.removeAllListeners("removeListener");this._events=new De;this._eventsCount=0;return this}r=a[t];if(typeof r==="function"){this.removeListener(t,r)}else if(r){do{this.removeListener(t,r[r.length-1])}while(r[0])}return this};_e.prototype.listeners=function e(t){var r;var a;var n=this._events;if(!n)a=[];else{r=n[t];if(!r)a=[];else if(typeof r==="function")a=[r.listener||r];else a=je(r)}return a};_e.listenerCount=function(e,t){if(typeof e.listenerCount==="function"){return e.listenerCount(t)}else{return Re.call(e,t)}};_e.prototype.listenerCount=Re;function Re(e){var t=this._events;if(t){var r=t[e];if(typeof r==="function"){return 1}else if(r){return r.length}}return 0}_e.prototype.eventNames=function e(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function Le(e,t){for(var r=t,a=r+1,n=e.length;a<n;r+=1,a+=1)e[r]=e[a];e.pop()}function $e(e,t){var r=new Array(t);while(t--)r[t]=e[t];return r}function je(e){var t=new Array(e.length);for(var r=0;r<t.length;++r){t[r]=e[r].listener||e[r]}return t}function Ue(){throw new Error("setTimeout has not been defined")}function ke(){throw new Error("clearTimeout has not been defined")}var Be=Ue;var ze=ke;if(typeof a.setTimeout==="function"){Be=setTimeout}if(typeof a.clearTimeout==="function"){ze=clearTimeout}function Qe(e){if(Be===setTimeout){return setTimeout(e,0)}if((Be===Ue||!Be)&&setTimeout){Be=setTimeout;return setTimeout(e,0)}try{return Be(e,0)}catch(t){try{return Be.call(null,e,0)}catch(t){return Be.call(this,e,0)}}}function Ye(e){if(ze===clearTimeout){return clearTimeout(e)}if((ze===ke||!ze)&&clearTimeout){ze=clearTimeout;return clearTimeout(e)}try{return ze(e)}catch(t){try{return ze.call(null,e)}catch(t){return ze.call(this,e)}}}var Ke=[];var Ge=false;var qe;var He=-1;function We(){if(!Ge||!qe){return}Ge=false;if(qe.length){Ke=qe.concat(Ke)}else{He=-1}if(Ke.length){Ze()}}function Ze(){if(Ge){return}var e=Qe(We);Ge=true;var t=Ke.length;while(t){qe=Ke;Ke=[];while(++He<t){if(qe){qe[He].run()}}He=-1;t=Ke.length}qe=null;Ge=false;Ye(e)}function Xe(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}Ke.push(new Je(e,t));if(Ke.length===1&&!Ge){Qe(Ze)}}function Je(e,t){this.fun=e;this.array=t}Je.prototype.run=function(){this.fun.apply(null,this.array)};var et="browser";var tt="browser";var rt=true;var at={};var nt=[];var it="";var ot={};var st={};var ut={};function lt(){}var ct=lt;var ft=lt;var pt=lt;var dt=lt;var mt=lt;var ht=lt;var yt=lt;function gt(e){throw new Error("process.binding is not supported")}function vt(){return"/"}function bt(e){throw new Error("process.chdir is not supported")}function Tt(){return 0}var Ct=a.performance||{};var Ot=Ct.now||Ct.mozNow||Ct.msNow||Ct.oNow||Ct.webkitNow||function(){return(new Date).getTime()};function Pt(e){var t=Ot.call(Ct)*.001;var r=Math.floor(t);var a=Math.floor(t%1*1e9);if(e){r=r-e[0];a=a-e[1];if(a<0){r--;a+=1e9}}return[r,a]}var Et=new Date;function Dt(){var e=new Date;var t=e-Et;return t/1e3}var _t={nextTick:Xe,title:et,browser:rt,env:at,argv:nt,version:it,versions:ot,on:ct,addListener:ft,once:pt,off:dt,removeListener:mt,removeAllListeners:ht,emit:yt,binding:gt,cwd:vt,chdir:bt,umask:Tt,hrtime:Pt,platform:tt,release:st,config:ut,uptime:Dt};var wt;if(typeof Object.create==="function"){wt=function e(t,r){t.super_=r;t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}else{wt=function e(t,r){t.super_=r;var a=function(){};a.prototype=r.prototype;t.prototype=new a;t.prototype.constructor=t}}var At=wt;var It=/%[sdj%]/g;function Nt(e){if(!Ht(e)){var t=[];for(var r=0;r<arguments.length;r++){t.push(Vt(arguments[r]))}return t.join(" ")}var r=1;var a=arguments;var n=a.length;var i=String(e).replace(It,function(e){if(e==="%%")return"%";if(r>=n)return e;switch(e){case"%s":return String(a[r++]);case"%d":return Number(a[r++]);case"%j":try{return JSON.stringify(a[r++])}catch(e){return"[Circular]"}default:return e}});for(var o=a[r];r<n;o=a[++r]){if(Gt(o)||!Xt(o)){i+=" "+o}else{i+=" "+Vt(o)}}return i}function St(e,t){if(Wt(a.process)){return function(){return St(e,t).apply(this,arguments)}}if(_t.noDeprecation===true){return e}var r=false;function n(){if(!r){if(_t.throwDeprecation){throw new Error(t)}else if(_t.traceDeprecation){console.trace(t)}else{console.error(t)}r=true}return e.apply(this,arguments)}return n}var xt={};var Ft;function Mt(e){if(Wt(Ft))Ft=_t.env.NODE_DEBUG||"";e=e.toUpperCase();if(!xt[e]){if(new RegExp("\\b"+e+"\\b","i").test(Ft)){var t=0;xt[e]=function(){var r=Nt.apply(null,arguments);console.error("%s %d: %s",e,t,r)}}else{xt[e]=function(){}}}return xt[e]}function Vt(e,t){var r={seen:[],stylize:Lt};if(arguments.length>=3)r.depth=arguments[2];if(arguments.length>=4)r.colors=arguments[3];if(Kt(t)){r.showHidden=t}else if(t){ar(r,t)}if(Wt(r.showHidden))r.showHidden=false;if(Wt(r.depth))r.depth=2;if(Wt(r.colors))r.colors=false;if(Wt(r.customInspect))r.customInspect=true;if(r.colors)r.stylize=Rt;return jt(r,e,r.depth)}Vt.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Vt.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Rt(e,t){var r=Vt.styles[t];if(r){return"["+Vt.colors[r][0]+"m"+e+"["+Vt.colors[r][1]+"m"}else{return e}}function Lt(e,t){return e}function $t(e){var t={};e.forEach(function(e,r){t[e]=true});return t}function jt(e,t,r){if(e.customInspect&&t&&tr(t.inspect)&&t.inspect!==Vt&&!(t.constructor&&t.constructor.prototype===t)){var a=t.inspect(r,e);if(!Ht(a)){a=jt(e,a,r)}return a}var n=Ut(e,t);if(n){return n}var i=Object.keys(t);var o=$t(i);if(e.showHidden){i=Object.getOwnPropertyNames(t)}if(er(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0)){return kt(t)}if(i.length===0){if(tr(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(Zt(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}if(Jt(t)){return e.stylize(Date.prototype.toString.call(t),"date")}if(er(t)){return kt(t)}}var u="",l=false,c=["{","}"];if(Yt(t)){l=true;c=["[","]"]}if(tr(t)){var f=t.name?": "+t.name:"";u=" [Function"+f+"]"}if(Zt(t)){u=" "+RegExp.prototype.toString.call(t)}if(Jt(t)){u=" "+Date.prototype.toUTCString.call(t)}if(er(t)){u=" "+kt(t)}if(i.length===0&&(!l||t.length==0)){return c[0]+u+c[1]}if(r<0){if(Zt(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}else{return e.stylize("[Object]","special")}}e.seen.push(t);var p;if(l){p=Bt(e,t,r,o,i)}else{p=i.map(function(a){return zt(e,t,r,o,a,l)})}e.seen.pop();return Qt(p,u,c)}function Ut(e,t){if(Wt(t))return e.stylize("undefined","undefined");if(Ht(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(qt(t))return e.stylize(""+t,"number");if(Kt(t))return e.stylize(""+t,"boolean");if(Gt(t))return e.stylize("null","null")}function kt(e){return"["+Error.prototype.toString.call(e)+"]"}function Bt(e,t,r,a,n){var i=[];for(var o=0,s=t.length;o<s;++o){if(nr(t,String(o))){i.push(zt(e,t,r,a,String(o),true))}else{i.push("")}}n.forEach(function(n){if(!n.match(/^\d+$/)){i.push(zt(e,t,r,a,n,true))}});return i}function zt(e,t,r,a,n,i){var o,s,u;u=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]};if(u.get){if(u.set){s=e.stylize("[Getter/Setter]","special")}else{s=e.stylize("[Getter]","special")}}else{if(u.set){s=e.stylize("[Setter]","special")}}if(!nr(a,n)){o="["+n+"]"}if(!s){if(e.seen.indexOf(u.value)<0){if(Gt(r)){s=jt(e,u.value,null)}else{s=jt(e,u.value,r-1)}if(s.indexOf("\n")>-1){if(i){s=s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2)}else{s="\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")}}}else{s=e.stylize("[Circular]","special")}}if(Wt(o)){if(i&&n.match(/^\d+$/)){return s}o=JSON.stringify(""+n);if(o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){o=o.substr(1,o.length-2);o=e.stylize(o,"name")}else{o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");o=e.stylize(o,"string")}}return o+": "+s}function Qt(e,t,r){var a=e.reduce(function(e,t){if(t.indexOf("\n")>=0);return e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(a>60){return r[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]}return r[0]+t+" "+e.join(", ")+" "+r[1]}function Yt(e){return Array.isArray(e)}function Kt(e){return typeof e==="boolean"}function Gt(e){return e===null}function qt(e){return typeof e==="number"}function Ht(e){return typeof e==="string"}function Wt(e){return e===void 0}function Zt(e){return Xt(e)&&rr(e)==="[object RegExp]"}function Xt(e){return typeof e==="object"&&e!==null}function Jt(e){return Xt(e)&&rr(e)==="[object Date]"}function er(e){return Xt(e)&&(rr(e)==="[object Error]"||e instanceof Error)}function tr(e){return typeof e==="function"}function rr(e){return Object.prototype.toString.call(e)}function ar(e,t){if(!t||!Xt(t))return e;var r=Object.keys(t);var a=r.length;while(a--){e[r[a]]=t[r[a]]}return e}function nr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ir(){this.head=null;this.tail=null;this.length=0}ir.prototype.push=function(e){var t={data:e,next:null};if(this.length>0)this.tail.next=t;else this.head=t;this.tail=t;++this.length};ir.prototype.unshift=function(e){var t={data:e,next:this.head};if(this.length===0)this.tail=t;this.head=t;++this.length};ir.prototype.shift=function(){if(this.length===0)return;var e=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return e};ir.prototype.clear=function(){this.head=this.tail=null;this.length=0};ir.prototype.join=function(e){if(this.length===0)return"";var t=this.head;var r=""+t.data;while(t=t.next){r+=e+t.data}return r};ir.prototype.concat=function(e){if(this.length===0)return T.alloc(0);if(this.length===1)return this.head.data;var t=T.allocUnsafe(e>>>0);var r=this.head;var a=0;while(r){r.data.copy(t,a);a+=r.data.length;r=r.next}return t};cr.ReadableState=lr;var or=Mt("stream");At(cr,_e);function sr(e,t,r){if(typeof e.prependListener==="function"){return e.prependListener(t,r)}else{if(!e._events||!e._events[t])e.on(t,r);else if(Array.isArray(e._events[t]))e._events[t].unshift(r);else e._events[t]=[r,e._events[t]]}}function ur(e,t){return e.listeners(t).length}function lr(e,t){e=e||{};this.objectMode=!!e.objectMode;if(t instanceof na)this.objectMode=this.objectMode||!!e.readableObjectMode;var r=e.highWaterMark;var a=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:a;this.highWaterMark=~~this.highWaterMark;this.buffer=new ir;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.defaultEncoding=e.defaultEncoding||"utf8";this.ranOut=false;this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(e.encoding){this.decoder=new ve(e.encoding);this.encoding=e.encoding}}function cr(e){if(!(this instanceof cr))return new cr(e);this._readableState=new lr(e,this);this.readable=true;if(e&&typeof e.read==="function")this._read=e.read;_e.call(this)}cr.prototype.push=function(e,t){var r=this._readableState;if(!r.objectMode&&typeof e==="string"){t=t||r.defaultEncoding;if(t!==r.encoding){e=T.from(e,t);t=""}}return fr(this,r,e,t,false)};cr.prototype.unshift=function(e){var t=this._readableState;return fr(this,t,e,"",true)};cr.prototype.isPaused=function(){return this._readableState.flowing===false};function fr(e,t,r,a,n){var i=yr(t,r);if(i){e.emit("error",i)}else if(r===null){t.reading=false;gr(e,t)}else if(t.objectMode||r&&r.length>0){if(t.ended&&!n){var o=new Error("stream.push() after EOF");e.emit("error",o)}else if(t.endEmitted&&n){var s=new Error("stream.unshift() after end event");e.emit("error",s)}else{var u;if(t.decoder&&!n&&!a){r=t.decoder.write(r);u=!t.objectMode&&r.length===0}if(!n)t.reading=false;if(!u){if(t.flowing&&t.length===0&&!t.sync){e.emit("data",r);e.read(0)}else{t.length+=t.objectMode?1:r.length;if(n)t.buffer.unshift(r);else t.buffer.push(r);if(t.needReadable)vr(e)}}Tr(e,t)}}else if(!n){t.reading=false}return pr(t)}function pr(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}cr.prototype.setEncoding=function(e){this._readableState.decoder=new ve(e);this._readableState.encoding=e;return this};var dr=8388608;function mr(e){if(e>=dr){e=dr}else{e--;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;e++}return e}function hr(e,t){if(e<=0||t.length===0&&t.ended)return 0;if(t.objectMode)return 1;if(e!==e){if(t.flowing&&t.length)return t.buffer.head.data.length;else return t.length}if(e>t.highWaterMark)t.highWaterMark=mr(e);if(e<=t.length)return e;if(!t.ended){t.needReadable=true;return 0}return t.length}cr.prototype.read=function(e){or("read",e);e=parseInt(e,10);var t=this._readableState;var r=e;if(e!==0)t.emittedReadable=false;if(e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended)){or("read: emitReadable",t.length,t.ended);if(t.length===0&&t.ended)Sr(this);else vr(this);return null}e=hr(e,t);if(e===0&&t.ended){if(t.length===0)Sr(this);return null}var a=t.needReadable;or("need readable",a);if(t.length===0||t.length-e<t.highWaterMark){a=true;or("length less than watermark",a)}if(t.ended||t.reading){a=false;or("reading or ended",a)}else if(a){or("do read");t.reading=true;t.sync=true;if(t.length===0)t.needReadable=true;this._read(t.highWaterMark);t.sync=false;if(!t.reading)e=hr(r,t)}var n;if(e>0)n=wr(e,t);else n=null;if(n===null){t.needReadable=true;e=0}else{t.length-=e}if(t.length===0){if(!t.ended)t.needReadable=true;if(r!==e&&t.ended)Sr(this)}if(n!==null)this.emit("data",n);return n};function yr(e,t){var r=null;if(!T.isBuffer(t)&&typeof t!=="string"&&t!==null&&t!==undefined&&!e.objectMode){r=new TypeError("Invalid non-string/buffer chunk")}return r}function gr(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();if(r&&r.length){t.buffer.push(r);t.length+=t.objectMode?1:r.length}}t.ended=true;vr(e)}function vr(e){var t=e._readableState;t.needReadable=false;if(!t.emittedReadable){or("emitReadable",t.flowing);t.emittedReadable=true;if(t.sync)Xe(br,e);else br(e)}}function br(e){or("emit readable");e.emit("readable");_r(e)}function Tr(e,t){if(!t.readingMore){t.readingMore=true;Xe(Cr,e,t)}}function Cr(e,t){var r=t.length;while(!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark){or("maybeReadMore read 0");e.read(0);if(r===t.length)break;else r=t.length}t.readingMore=false}cr.prototype._read=function(e){this.emit("error",new Error("not implemented"))};cr.prototype.pipe=function(e,t){var r=this;var a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e);break}a.pipesCount+=1;or("pipe count=%d opts=%j",a.pipesCount,t);var n=!t||t.end!==false;var i=n?s:c;if(a.endEmitted)Xe(i);else r.once("end",i);e.on("unpipe",o);function o(e){or("onunpipe");if(e===r){c()}}function s(){or("onend");e.end()}var u=Or(r);e.on("drain",u);var l=false;function c(){or("cleanup");e.removeListener("close",m);e.removeListener("finish",h);e.removeListener("drain",u);e.removeListener("error",d);e.removeListener("unpipe",o);r.removeListener("end",s);r.removeListener("end",c);r.removeListener("data",p);l=true;if(a.awaitDrain&&(!e._writableState||e._writableState.needDrain))u()}var f=false;r.on("data",p);function p(t){or("ondata");f=false;var n=e.write(t);if(false===n&&!f){if((a.pipesCount===1&&a.pipes===e||a.pipesCount>1&&Mr(a.pipes,e)!==-1)&&!l){or("false write response, pause",r._readableState.awaitDrain);r._readableState.awaitDrain++;f=true}r.pause()}}function d(t){or("onerror",t);y();e.removeListener("error",d);if(ur(e,"error")===0)e.emit("error",t)}sr(e,"error",d);function m(){e.removeListener("finish",h);y()}e.once("close",m);function h(){or("onfinish");e.removeListener("close",m);y()}e.once("finish",h);function y(){or("unpipe");r.unpipe(e)}e.emit("pipe",r);if(!a.flowing){or("pipe resume");r.resume()}return e};function Or(e){return function(){var t=e._readableState;or("pipeOnDrain",t.awaitDrain);if(t.awaitDrain)t.awaitDrain--;if(t.awaitDrain===0&&e.listeners("data").length){t.flowing=true;_r(e)}}}cr.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1){if(e&&e!==t.pipes)return this;if(!e)e=t.pipes;t.pipes=null;t.pipesCount=0;t.flowing=false;if(e)e.emit("unpipe",this);return this}if(!e){var r=t.pipes;var a=t.pipesCount;t.pipes=null;t.pipesCount=0;t.flowing=false;for(var n=0;n<a;n++){r[n].emit("unpipe",this)}return this}var i=Mr(t.pipes,e);if(i===-1)return this;t.pipes.splice(i,1);t.pipesCount-=1;if(t.pipesCount===1)t.pipes=t.pipes[0];e.emit("unpipe",this);return this};cr.prototype.on=function(e,t){var r=_e.prototype.on.call(this,e,t);if(e==="data"){if(this._readableState.flowing!==false)this.resume()}else if(e==="readable"){var a=this._readableState;if(!a.endEmitted&&!a.readableListening){a.readableListening=a.needReadable=true;a.emittedReadable=false;if(!a.reading){Xe(Pr,this)}else if(a.length){vr(this)}}}return r};cr.prototype.addListener=cr.prototype.on;function Pr(e){or("readable nexttick read 0");e.read(0)}cr.prototype.resume=function(){var e=this._readableState;if(!e.flowing){or("resume");e.flowing=true;Er(this,e)}return this};function Er(e,t){if(!t.resumeScheduled){t.resumeScheduled=true;Xe(Dr,e,t)}}function Dr(e,t){if(!t.reading){or("resume read 0");e.read(0)}t.resumeScheduled=false;t.awaitDrain=0;e.emit("resume");_r(e);if(t.flowing&&!t.reading)e.read(0)}cr.prototype.pause=function(){or("call pause flowing=%j",this._readableState.flowing);if(false!==this._readableState.flowing){or("pause");this._readableState.flowing=false;this.emit("pause")}return this};function _r(e){var t=e._readableState;or("flow",t.flowing);while(t.flowing&&e.read()!==null){}}cr.prototype.wrap=function(e){var t=this._readableState;var r=false;var a=this;e.on("end",function(){or("wrapped end");if(t.decoder&&!t.ended){var e=t.decoder.end();if(e&&e.length)a.push(e)}a.push(null)});e.on("data",function(n){or("wrapped data");if(t.decoder)n=t.decoder.write(n);if(t.objectMode&&(n===null||n===undefined))return;else if(!t.objectMode&&(!n||!n.length))return;var i=a.push(n);if(!i){r=true;e.pause()}});for(var n in e){if(this[n]===undefined&&typeof e[n]==="function"){this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n)}}var i=["error","close","destroy","pause","resume"];Fr(i,function(t){e.on(t,a.emit.bind(a,t))});a._read=function(t){or("wrapped _read",t);if(r){r=false;e.resume()}};return a};cr._fromList=wr;function wr(e,t){if(t.length===0)return null;var r;if(t.objectMode)r=t.buffer.shift();else if(!e||e>=t.length){if(t.decoder)r=t.buffer.join("");else if(t.buffer.length===1)r=t.buffer.head.data;else r=t.buffer.concat(t.length);t.buffer.clear()}else{r=Ar(e,t.buffer,t.decoder)}return r}function Ar(e,t,r){var a;if(e<t.head.data.length){a=t.head.data.slice(0,e);t.head.data=t.head.data.slice(e)}else if(e===t.head.data.length){a=t.shift()}else{a=r?Ir(e,t):Nr(e,t)}return a}function Ir(e,t){var r=t.head;var a=1;var n=r.data;e-=n.length;while(r=r.next){var i=r.data;var o=e>i.length?i.length:e;if(o===i.length)n+=i;else n+=i.slice(0,e);e-=o;if(e===0){if(o===i.length){++a;if(r.next)t.head=r.next;else t.head=t.tail=null}else{t.head=r;r.data=i.slice(o)}break}++a}t.length-=a;return n}function Nr(e,t){var r=T.allocUnsafe(e);var a=t.head;var n=1;a.data.copy(r);e-=a.data.length;while(a=a.next){var i=a.data;var o=e>i.length?i.length:e;i.copy(r,r.length-e,0,o);e-=o;if(e===0){if(o===i.length){++n;if(a.next)t.head=a.next;else t.head=t.tail=null}else{t.head=a;a.data=i.slice(o)}break}++n}t.length-=n;return r}function Sr(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');if(!t.endEmitted){t.ended=true;Xe(xr,t,e)}}function xr(e,t){if(!e.endEmitted&&e.length===0){e.endEmitted=true;t.readable=false;t.emit("end")}}function Fr(e,t){for(var r=0,a=e.length;r<a;r++){t(e[r],r)}}function Mr(e,t){for(var r=0,a=e.length;r<a;r++){if(e[r]===t)return r}return-1}$r.WritableState=Lr;At($r,_e);function Vr(){}function Rr(e,t,r){this.chunk=e;this.encoding=t;this.callback=r;this.next=null}function Lr(e,t){Object.defineProperty(this,"buffer",{get:St(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.")});e=e||{};this.objectMode=!!e.objectMode;if(t instanceof na)this.objectMode=this.objectMode||!!e.writableObjectMode;var r=e.highWaterMark;var a=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:a;this.highWaterMark=~~this.highWaterMark;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;var n=e.decodeStrings===false;this.decodeStrings=!n;this.defaultEncoding=e.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(e){Kr(t,e)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.bufferedRequestCount=0;this.corkedRequestsFree=new ea(this)}Lr.prototype.getBuffer=function e(){var t=this.bufferedRequest;var r=[];while(t){r.push(t);t=t.next}return r};function $r(e){if(!(this instanceof $r)&&!(this instanceof na))return new $r(e);this._writableState=new Lr(e,this);this.writable=true;if(e){if(typeof e.write==="function")this._write=e.write;if(typeof e.writev==="function")this._writev=e.writev}_e.call(this)}$r.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function jr(e,t){var r=new Error("write after end");e.emit("error",r);Xe(t,r)}function Ur(e,t,r,a){var n=true;var i=false;if(r===null){i=new TypeError("May not write null values to stream")}else if(!T.isBuffer(r)&&typeof r!=="string"&&r!==undefined&&!t.objectMode){i=new TypeError("Invalid non-string/buffer chunk")}if(i){e.emit("error",i);Xe(a,i);n=false}return n}$r.prototype.write=function(e,t,r){var a=this._writableState;var n=false;if(typeof t==="function"){r=t;t=null}if(T.isBuffer(e))t="buffer";else if(!t)t=a.defaultEncoding;if(typeof r!=="function")r=Vr;if(a.ended)jr(this,r);else if(Ur(this,a,e,r)){a.pendingcb++;n=Br(this,a,e,t,r)}return n};$r.prototype.cork=function(){var e=this._writableState;e.corked++};$r.prototype.uncork=function(){var e=this._writableState;if(e.corked){e.corked--;if(!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest)Hr(this,e)}};$r.prototype.setDefaultEncoding=function e(t){if(typeof t==="string")t=t.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);this._writableState.defaultEncoding=t;return this};function kr(e,t,r){if(!e.objectMode&&e.decodeStrings!==false&&typeof t==="string"){t=T.from(t,r)}return t}function Br(e,t,r,a,n){r=kr(t,r,a);if(T.isBuffer(r))a="buffer";var i=t.objectMode?1:r.length;t.length+=i;var o=t.length<t.highWaterMark;if(!o)t.needDrain=true;if(t.writing||t.corked){var s=t.lastBufferedRequest;t.lastBufferedRequest=new Rr(r,a,n);if(s){s.next=t.lastBufferedRequest}else{t.bufferedRequest=t.lastBufferedRequest}t.bufferedRequestCount+=1}else{zr(e,t,false,i,r,a,n)}return o}function zr(e,t,r,a,n,i,o){t.writelen=a;t.writecb=o;t.writing=true;t.sync=true;if(r)e._writev(n,t.onwrite);else e._write(n,i,t.onwrite);t.sync=false}function Qr(e,t,r,a,n){--t.pendingcb;if(r)Xe(n,a);else n(a);e._writableState.errorEmitted=true;e.emit("error",a)}function Yr(e){e.writing=false;e.writecb=null;e.length-=e.writelen;e.writelen=0}function Kr(e,t){var r=e._writableState;var a=r.sync;var n=r.writecb;Yr(r);if(t)Qr(e,r,a,t,n);else{var i=Wr(r);if(!i&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest){Hr(e,r)}if(a){Xe(Gr,e,r,i,n)}else{Gr(e,r,i,n)}}}function Gr(e,t,r,a){if(!r)qr(e,t);t.pendingcb--;a();Xr(e,t)}function qr(e,t){if(t.length===0&&t.needDrain){t.needDrain=false;e.emit("drain")}}function Hr(e,t){t.bufferProcessing=true;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var a=t.bufferedRequestCount;var n=new Array(a);var i=t.corkedRequestsFree;i.entry=r;var o=0;while(r){n[o]=r;r=r.next;o+=1}zr(e,t,true,t.length,n,"",i.finish);t.pendingcb++;t.lastBufferedRequest=null;if(i.next){t.corkedRequestsFree=i.next;i.next=null}else{t.corkedRequestsFree=new ea(t)}}else{while(r){var s=r.chunk;var u=r.encoding;var l=r.callback;var c=t.objectMode?1:s.length;zr(e,t,false,c,s,u,l);r=r.next;if(t.writing){break}}if(r===null)t.lastBufferedRequest=null}t.bufferedRequestCount=0;t.bufferedRequest=r;t.bufferProcessing=false}$r.prototype._write=function(e,t,r){r(new Error("not implemented"))};$r.prototype._writev=null;$r.prototype.end=function(e,t,r){var a=this._writableState;if(typeof e==="function"){r=e;e=null;t=null}else if(typeof t==="function"){r=t;t=null}if(e!==null&&e!==undefined)this.write(e,t);if(a.corked){a.corked=1;this.uncork()}if(!a.ending&&!a.finished)Jr(this,a,r)};function Wr(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function Zr(e,t){if(!t.prefinished){t.prefinished=true;e.emit("prefinish")}}function Xr(e,t){var r=Wr(t);if(r){if(t.pendingcb===0){Zr(e,t);t.finished=true;e.emit("finish")}else{Zr(e,t)}}return r}function Jr(e,t,r){t.ending=true;Xr(e,t);if(r){if(t.finished)Xe(r);else e.once("finish",r)}t.ended=true;e.writable=false}function ea(e){var t=this;this.next=null;this.entry=null;this.finish=function(r){var a=t.entry;t.entry=null;while(a){var n=a.callback;e.pendingcb--;n(r);a=a.next}if(e.corkedRequestsFree){e.corkedRequestsFree.next=t}else{e.corkedRequestsFree=t}}}At(na,cr);var ta=Object.keys($r.prototype);for(var ra=0;ra<ta.length;ra++){var aa=ta[ra];if(!na.prototype[aa])na.prototype[aa]=$r.prototype[aa]}function na(e){if(!(this instanceof na))return new na(e);cr.call(this,e);$r.call(this,e);if(e&&e.readable===false)this.readable=false;if(e&&e.writable===false)this.writable=false;this.allowHalfOpen=true;if(e&&e.allowHalfOpen===false)this.allowHalfOpen=false;this.once("end",ia)}function ia(){if(this.allowHalfOpen||this._writableState.ended)return;Xe(oa,this)}function oa(e){e.end()}At(la,na);function sa(e){this.afterTransform=function(t,r){return ua(e,t,r)};this.needTransform=false;this.transforming=false;this.writecb=null;this.writechunk=null;this.writeencoding=null}function ua(e,t,r){var a=e._transformState;a.transforming=false;var n=a.writecb;if(!n)return e.emit("error",new Error("no writecb in Transform class"));a.writechunk=null;a.writecb=null;if(r!==null&&r!==undefined)e.push(r);n(t);var i=e._readableState;i.reading=false;if(i.needReadable||i.length<i.highWaterMark){e._read(i.highWaterMark)}}function la(e){if(!(this instanceof la))return new la(e);na.call(this,e);this._transformState=new sa(this);var t=this;this._readableState.needReadable=true;this._readableState.sync=false;if(e){if(typeof e.transform==="function")this._transform=e.transform;if(typeof e.flush==="function")this._flush=e.flush}this.once("prefinish",function(){if(typeof this._flush==="function")this._flush(function(e){ca(t,e)});else ca(t)})}la.prototype.push=function(e,t){this._transformState.needTransform=false;return na.prototype.push.call(this,e,t)};la.prototype._transform=function(e,t,r){throw new Error("Not implemented")};la.prototype._write=function(e,t,r){var a=this._transformState;a.writecb=r;a.writechunk=e;a.writeencoding=t;if(!a.transforming){var n=this._readableState;if(a.needTransform||n.needReadable||n.length<n.highWaterMark)this._read(n.highWaterMark)}};la.prototype._read=function(e){var t=this._transformState;if(t.writechunk!==null&&t.writecb&&!t.transforming){t.transforming=true;this._transform(t.writechunk,t.writeencoding,t.afterTransform)}else{t.needTransform=true}};function ca(e,t){if(t)return e.emit("error",t);var r=e._writableState;var a=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(a.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}At(fa,la);function fa(e){if(!(this instanceof fa))return new fa(e);la.call(this,e)}fa.prototype._transform=function(e,t,r){r(null,e)};At(pa,_e);pa.Readable=cr;pa.Writable=$r;pa.Duplex=na;pa.Transform=la;pa.PassThrough=fa;pa.Stream=pa;function pa(){_e.call(this)}pa.prototype.pipe=function(e,t){var r=this;function a(t){if(e.writable){if(false===e.write(t)&&r.pause){r.pause()}}}r.on("data",a);function n(){if(r.readable&&r.resume){r.resume()}}e.on("drain",n);if(!e._isStdio&&(!t||t.end!==false)){r.on("end",o);r.on("close",s)}var i=false;function o(){if(i)return;i=true;e.end()}function s(){if(i)return;i=true;if(typeof e.destroy==="function")e.destroy()}function u(e){l();if(_e.listenerCount(this,"error")===0){throw e}}r.on("error",u);e.on("error",u);function l(){r.removeListener("data",a);e.removeListener("drain",n);r.removeListener("end",o);r.removeListener("close",s);r.removeListener("error",u);e.removeListener("error",u);r.removeListener("end",l);r.removeListener("close",l);e.removeListener("close",l)}r.on("end",l);r.on("close",l);e.on("close",l);e.emit("pipe",r);return e};var da=Object.freeze({__proto__:null,Duplex:na,PassThrough:fa,Readable:cr,Stream:pa,Transform:la,Writable:$r,default:pa});var ma=t(da);(function(t,r){(function(e,t){t(r,Pe)})(e,function(e,t){class r{manifest;_metadata;constructor(){}get servicePath(){const e=this.manifest["sap.app"]?.["dataSources"];const t=(e["mainService"]??Object.values(e)[0]).uri;return t.endsWith("/")?t:`${t}/`}get componentId(){return this.manifest?.["sap.app"].id||""}get objectEntitySet(){if(this.fe==="v4"){const e=Object.values(this.manifest["sap.ui5"]?.routing?.targets??{});const t=e.find(e=>e.name==="sap.fe.templates.ListReport");return t?.options?.settings?.entitySet}else if(this.fe==="v2"){const e=this.manifest["sap.ui.generic.app"]?.pages;return(Array.isArray(e)?e:Object.values(e))[0]?.entitySet}else{return""}}get filters(){const e=this.getMetadata();if(e){const t=e.entitySets.find(e=>e.name===this.objectEntitySet);return t?.entityType.entityProperties.filter(e=>e.type.startsWith("Edm.")).map(({name:e,type:t})=>({name:e,type:t}))}return[]}get objectKeys(){const e=this.getMetadata();if(e){const t=e.entitySets.find(e=>e.name===this.objectEntitySet);return t?.entityType.keys.map(({name:e,type:t})=>({name:e,type:t}))}else{return undefined}}get fe(){if(!!this.manifest?.["sap.ui5"]?.dependencies?.libs?.["sap.fe.templates"]){return"v4"}else if(!!this.manifest?.["sap.ui.generic.app"]?.pages){return"v2"}else{return undefined}}addMetadata(e){this._metadata=e}addManifest(e){this.manifest=e}getMetadata(){return this._metadata}isUI5(){return this.manifest["sap.ui5"]!==undefined}isFE(){return this.fe!==undefined}}var a={};var n={};var i={};var o;function s(){if(o)return i;o=1;Object.defineProperty(i,"__esModule",{value:true});i.Placement=i.BaseDefinition=void 0;i.annotation=a;i.configurable=r;i.Placement=function(e){e["After"]="After";e["Before"]="Before";e["End"]="End";return e}({});let e=class e{constructor(e,t){this.annotationPath=e?.getPath();for(const e in this.__configurableProperties){const r=this.__configurableProperties[e];if(r){const a=t[r.aliasFor];if(a!==undefined){this[e]=r.validator(a)}else if(r.defaultValue!==undefined){this[e]=r.defaultValue}}}const r=e?.getTarget();if(r){for(const e in this.__annotationProperties){const t=this.__annotationProperties[e];if(t){const a=r.annotations._annotations?.[t.term];if(a!==undefined&&a!==null){this[e]=a.valueOf()}else if(t.defaultValue!==undefined){this[e]=t.defaultValue}}}}}getConfiguration(){const e={};for(const t in this.__configurableProperties){const r=this.__configurableProperties[t];if(r){e[r.aliasFor]=this[t]}}return e}};i.BaseDefinition=e;function t(e){return e}function r(e={}){return function(r,a,n){const i={name:a,validator:e.validator||t,aliasFor:e.aliasFor||a,defaultValue:n.initializer?.()};const o=r.constructor.prototype;if(!o.__configurableProperties){o.__configurableProperties={}}delete n?.initializer;o.__configurableProperties[a]=i}}function a(e){return function(t,r,a){const n={name:r,term:e.term,defaultValue:a.initializer?.()};const i=t.constructor.prototype;if(!i.__annotationProperties){i.__annotationProperties={}}i.__annotationProperties[r]=n;delete a.initializer;return a}}return i}var u={};var l;function c(){if(l)return u;l=1;Object.defineProperty(u,"__esModule",{value:true});u.default=void 0;var e=s();class t extends e.BaseDefinition{constructor(e,t={}){super(e,t);this.entitySet=e;this.entitySetConfiguration=t}getRequiredProperties(){const e=this.entitySet.getTarget().annotations.Capabilities?.FilterRestrictions?.RequiredProperties??[];return e.map(e=>e.$target).filter(e=>!!e)}getNonFilterableProperties(){const e=this.entitySet.getTarget().annotations.Capabilities?.FilterRestrictions?.NonFilterableProperties??[];return e.map(e=>e.$target).filter(e=>!!e)}getAllowedFilterExpression(e){const t=this.entitySet.getTarget().annotations.Capabilities?.FilterRestrictions?.FilterExpressionRestrictions??[];const r=t.filter(t=>t.Property?.$target===e);return r.map(e=>e.AllowedExpressions).filter(e=>!!e)}isSearchAllowed(){return!!this.entitySet.getTarget().annotations.Capabilities?.SearchRestrictions?.Searchable}}u.default=t;return u}var f={};var p;function d(){if(p)return f;p=1;Object.defineProperty(f,"__esModule",{value:true});f.isAnnotationOfTerm=t;f.isAnnotationOfType=e;f.isAnnotationPath=g;f.isAnnotationTerm=r;f.isComplexType=n;f.isEntityContainer=o;f.isEntitySet=s;f.isEntityType=l;f.isMultipleNavigationProperty=h;f.isNavigationProperty=d;f.isPathAnnotationExpression=y;f.isProperty=c;f.isPropertyPathExpression=v;f.isServiceObject=a;f.isSingleNavigationProperty=m;f.isSingleton=u;f.isTypeDefinition=i;f.isValidPropertyPathExpression=b;function e(e,t){if(Array.isArray(t)){return t.includes(e?.$Type)}return e?.$Type===t}function t(e,t){return e.term===t}function r(e){return e.hasOwnProperty("term")}function a(e){return e?.hasOwnProperty("_type")??false}function n(e){return e._type==="ComplexType"}function i(e){return e._type==="TypeDefinition"}function o(e){return e._type==="EntityContainer"}function s(e){return e._type==="EntitySet"}function u(e){return e._type==="Singleton"}function l(e){return e._type==="EntityType"}function c(e){return e._type==="Property"}function d(e){return e._type==="NavigationProperty"}function m(e){return d(e)&&!e.isCollection}function h(e){return d(e)&&e.isCollection}function y(e){return e.type==="Path"}function g(e){return e.type=="AnnotationPath"}function v(e){return e?.type==="PropertyPath"}function b(e){return e.type==="PropertyPath"&&!!e.$target}return f}var m;function h(){if(m)return n;m=1;Object.defineProperty(n,"__esModule",{value:true});n.default=n.FilterField=void 0;var e=s();var t=v(c());var r=d();var a,i,o,u,l,f,p,h,y,g;function v(e){return e&&e.__esModule?e:{default:e}}function b(e,t,r,a){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(a):void 0})}function T(e,t,r,a,n){var i={};return Object.keys(a).forEach(function(e){i[e]=a[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=true),i=r.slice().reverse().reduce(function(r,a){return a(e,t,r)||r},i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer?(Object.defineProperty(e,t,i),null):i}let C=n.FilterField=(a=(0,e.configurable)(),i=(0,e.configurable)(),o=(0,e.configurable)(),u=(0,e.configurable)(),l=(0,e.configurable)(),f=class t extends e.BaseDefinition{get name(){return this.filterFieldProperty.getTarget().name}get isParameter(){return!!this.filterFieldProperty.getClosestEntityType().annotations.Common?.ResultContext}get label(){return this.filterFieldProperty.getTarget().annotations.Common?.Label?.toString()??this.filterFieldProperty.getTarget().name}constructor(e,t){super(e,t);b(this,"group",p,this);b(this,"groupLabel",h,this);b(this,"visible",y,this);b(this,"required",g,this);this.filterFieldProperty=e}getTarget(){return this.filterFieldProperty.getTarget()}},p=T(f.prototype,"group",[a],{configurable:true,enumerable:true,writable:true,initializer:null}),h=T(f.prototype,"groupLabel",[i],{configurable:true,enumerable:true,writable:true,initializer:null}),y=T(f.prototype,"visible",[o],{configurable:true,enumerable:true,writable:true,initializer:null}),g=T(f.prototype,"required",[u],{configurable:true,enumerable:true,writable:true,initializer:null}),T(f.prototype,"name",[l],Object.getOwnPropertyDescriptor(f.prototype,"name"),f.prototype),f);let O=class e{constructor(e,t,r){this.selectionFields=e;this.filterBarConfiguration=t;this.metaPath=r}isParameterizedEntitySet(){const e=this.metaPath.getTarget();if(e._type==="NavigationProperty"&&e.containsTarget){return this.metaPath.getClosestEntitySet().entityType.annotations.Common?.ResultContext!==undefined}return false}getFilterGroups(){const e=this.metaPath.getClosestEntityType().annotations.UI?.FilterFacets;const t={};if(!e){const e=Object.keys(this.metaPath.getClosestEntityType().annotations.UI??{}).filter(e=>e.startsWith("FieldGroup")).map(e=>this.metaPath.getClosestEntityType().annotations.UI?.[e]);for(const a of e){a.Data.forEach(e=>{switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataField":{const n=e.Value;if((0,r.isPathAnnotationExpression)(n)&&n.$target){t[n.$target.fullyQualifiedName]={group:a.fullyQualifiedName,groupLabel:a.Label?.toString()??a.annotations?.Common?.Label?.toString()??a.qualifier}}break}}})}}else{e.forEach(e=>{const a=e.Target.$target;if((0,r.isAnnotationOfType)(a,"com.sap.vocabularies.UI.v1.FieldGroupType")){a.Data.forEach(a=>{switch(a.$Type){case"com.sap.vocabularies.UI.v1.DataField":{const n=a.Value;if((0,r.isPathAnnotationExpression)(n)&&n.$target){t[n.$target.fullyQualifiedName]={group:e.ID?.toString(),groupLabel:e.Label?.toString()}}break}}})}})}return t}getFilterFields(){const e=this.getFilterGroups();const a={};let n=[];if(this.isParameterizedEntitySet()){const t=this.metaPath.getMetaPathForClosestEntitySet();n=t.getClosestEntityType().entityProperties.map(r=>{const n=t.getMetaPathForPath(r.name);if(n){a[n.getTarget().fullyQualifiedName]=true;return new C(n,{group:e[n.getTarget().fullyQualifiedName]?.group,groupLabel:e[n.getTarget().fullyQualifiedName]?.groupLabel,visible:true,required:true,isParameter:true})}}).filter(e=>!!e)}const i=new t.default(this.metaPath).getRequiredProperties();const o=this.selectionFields.filter(r.isValidPropertyPathExpression).map(t=>{const r=this.metaPath.getMetaPathForPath(t.value);if(r&&!a[r.getTarget().fullyQualifiedName]){a[r.getTarget().fullyQualifiedName]=true;return new C(r,{group:e[r.getTarget().fullyQualifiedName]?.group,groupLabel:e[r.getTarget().fullyQualifiedName]?.groupLabel,visible:true,required:i.includes(r.getTarget())})}}).filter(e=>!!e);const s=new t.default(this.metaPath).getNonFilterableProperties();this.metaPath.getClosestEntityType().entityProperties.forEach(t=>{if(!a[t.fullyQualifiedName]&&!s.includes(t)&&t.targetType===undefined&&t.annotations.UI?.Hidden?.valueOf()!==true){a[t.fullyQualifiedName]=true;o.push(new C(this.metaPath.getMetaPathForPath(t.name),{group:e[t.fullyQualifiedName]?.group,groupLabel:e[t.fullyQualifiedName]?.groupLabel,visible:false}))}});return[...n,...o]}isSearchSupported(){return new t.default(this.metaPath).isSearchAllowed()}};n.default=O;return n}var y={};var g={};var v={};var b={};var T;function C(){if(T)return b;T=1;Object.defineProperty(b,"__esModule",{value:true});b._checkExpressionsAreEqual=r;b.and=i;b.annotationApplyExpression=F;b.annotationIfExpression=S;b.concat=q;b.constant=f;b.equal=R;b.fn=K;b.formatResult=Q;b.getExpressionFromAnnotation=I;b.getFiscalType=void 0;b.greaterOrEqual=$;b.greaterThan=j;b.hasUnresolvableExpression=t;b.ifElse=B;b.isComplexTypeExpression=O;b.isConstant=y;b.isEmpty=G;b.isExpression=h;b.isPathInModelExpression=C;b.isTruthy=u;b.isUndefinedExpression=_;b.length=V;b.lessOrEqual=U;b.lessThan=k;b.not=s;b.notEqual=L;b.objectPath=l;b.or=o;b.pathInModel=c;b.ref=d;b.resolveBindingString=p;b.transformRecursively=H;b.unresolvableExpression=void 0;b.wrapPrimitive=m;const e=b.unresolvableExpression={_type:"Unresolvable"};function t(...e){return e.find(e=>e._type==="Unresolvable")!==undefined}function r(e,t){if(!e||!t){return false}if(e._type!==t._type){return false}switch(e._type){case"Unresolvable":return false;case"Constant":case"EmbeddedBinding":case"EmbeddedExpressionBinding":return e.value===t.value;case"Not":return r(e.operand,t.operand);case"Truthy":return r(e.operand,t.operand);case"Set":return e.operator===t.operator&&e.operands.length===t.operands.length&&e.operands.every(e=>t.operands.some(t=>r(e,t)));case"IfElse":return r(e.condition,t.condition)&&r(e.onTrue,t.onTrue)&&r(e.onFalse,t.onFalse);case"Comparison":return e.operator===t.operator&&r(e.operand1,t.operand1)&&r(e.operand2,t.operand2);case"Concat":{const a=e.expressions;const n=t.expressions;if(a.length!==n.length){return false}return a.every((e,t)=>r(e,n[t]))}case"Length":return r(e.pathInModel,t.pathInModel);case"PathInModel":return e.modelName===t.modelName&&e.path===t.path&&e.targetEntitySet===t.targetEntitySet;case"Formatter":return e.fn===t.fn&&e.parameters.length===t.parameters.length&&e.parameters.every((e,a)=>r(t.parameters[a],e));case"ComplexType":return e.type===t.type&&e.bindingParameters.length===t.bindingParameters.length&&e.bindingParameters.every((e,a)=>r(t.bindingParameters[a],e));case"Function":const a=t;if(e.obj===undefined||a.obj===undefined){return e.obj===a}return e.fn===a.fn&&r(e.obj,a.obj)&&e.parameters.length===a.parameters.length&&e.parameters.every((e,t)=>r(a.parameters[t],e));case"Ref":return e.ref===t.ref}return false}function a(e){return e.operands.reduce((t,a)=>{const n=a._type==="Set"&&a.operator===e.operator?a.operands:[a];n.forEach(e=>{if(t.operands.every(t=>!r(t,e))){t.operands.push(e)}});return t},{_type:"Set",operator:e.operator,operands:[]})}function n(e){const t=e.map(s);return e.some((e,a)=>{for(let n=a+1;n<t.length;n++){if(r(e,t[n])){return true}}return false})}function i(...r){const i=a({operator:"&&",operands:r.map(m)}).operands;if(t(...i)){return e}let o=false;const s=i.filter(e=>{if(v(e)){o=true}return!y(e)});if(o){return f(false)}else if(s.length===0){const e=i.reduce((e,t)=>e&&g(t),true);return f(e)}else if(s.length===1){return s[0]}else if(n(s)){return f(false)}else{return{_type:"Set",operator:"&&",operands:s}}}function o(...r){const i=a({operator:"||",operands:r.map(m)}).operands;if(t(...i)){return e}let o=false;const s=i.filter(e=>{if(g(e)){o=true}return!y(e)||e.value});if(o){return f(true)}else if(s.length===0){const e=i.reduce((e,t)=>e&&g(t),true);return f(e)}else if(s.length===1){return s[0]}else if(n(s)){return f(true)}else{return{_type:"Set",operator:"||",operands:s}}}function s(r){r=m(r);if(t(r)){return e}else if(y(r)){return f(!r.value)}else if(typeof r==="object"&&r._type==="Set"&&r.operator==="||"&&r.operands.every(e=>y(e)||D(e))){return i(...r.operands.map(e=>s(e)))}else if(typeof r==="object"&&r._type==="Set"&&r.operator==="&&"&&r.operands.every(e=>y(e)||D(e))){return o(...r.operands.map(e=>s(e)))}else if(D(r)){switch(r.operator){case"!==":return{...r,operator:"==="};case"<":return{...r,operator:">="};case"<=":return{...r,operator:">"};case"===":return{...r,operator:"!=="};case">":return{...r,operator:"<="};case">=":return{...r,operator:"<"}}}else if(r._type==="Not"){return r.operand}return{_type:"Not",operand:r}}function u(e){if(y(e)){return f(!!e.value)}else{return{_type:"Truthy",operand:e}}}function l(e,t,r=[],a){return c(e,t,r,a)}function c(t,r,a=[],n){if(t===undefined){return e}let i;if(n){i=n(t);if(i===undefined){return e}}else{const e=a.concat();e.push(t);i=e.join("/")}return{_type:"PathInModel",modelName:r,path:i,ownPath:t}}function f(e){let t;if(typeof e==="object"&&e!==null&&e!==undefined){if(Array.isArray(e)){t=e.map(m)}else if(w(e)){t=e.valueOf()}else{t=Object.entries(e).reduce((e,[t,r])=>{const a=m(r);if(a._type!=="Constant"||a.value!==undefined){e[t]=a}return e},{})}}else{t=e}return{_type:"Constant",value:t}}function p(e,t){if(e!==undefined&&typeof e==="string"&&e.startsWith("{")){const t=/^{(.*)>(.+)}$/;const r=t.exec(e);if(e.startsWith("{=")){return{_type:"EmbeddedExpressionBinding",value:e}}else if(r){return c(r[2]||"",r[1]||undefined)}else{return{_type:"EmbeddedBinding",value:e}}}else if(t==="boolean"&&typeof e==="string"&&(e==="true"||e==="false")){return f(e==="true")}else if(t==="number"&&typeof e==="string"&&(!isNaN(Number(e))||e==="NaN")){return f(Number(e))}else{return f(e)}}function d(e){return{_type:"Ref",ref:e}}function m(e){if(h(e)){return e}return f(e)}function h(e){return e?._type!==undefined}function y(e){return typeof e!=="object"||e._type==="Constant"}function g(e){return y(e)&&e.value===true}function v(e){return y(e)&&e.value===false}function C(e){return e._type==="PathInModel"}function O(e){return e._type==="ComplexType"}function P(e){return e._type==="Concat"}function E(e){return e._type==="IfElse"}function D(e){return e._type==="Comparison"}function _(e){const t=e;return t._type==="Constant"&&t.value===undefined}function w(e){switch(e.constructor.name){case"String":case"Number":case"Boolean":return true;default:return false}}function A(e){return typeof e==="object"&&!w(e)}function I(t,r=[],a,n){if(t===undefined){return m(a)}t=t.valueOf();if(!A(t)){return f(t)}switch(t.type){case"Path":return c(t.path,undefined,r,n);case"If":return S(t.$If,r,n);case"Not":return s(N(t.$Not,r,n));case"Eq":return R(N(t.$Eq[0],r,n),N(t.$Eq[1],r,n));case"Ne":return L(N(t.$Ne[0],r,n),N(t.$Ne[1],r,n));case"Gt":return j(N(t.$Gt[0],r,n),N(t.$Gt[1],r,n));case"Ge":return $(N(t.$Ge[0],r,n),N(t.$Ge[1],r,n));case"Lt":return k(N(t.$Lt[0],r,n),N(t.$Lt[1],r,n));case"Le":return U(N(t.$Le[0],r,n),N(t.$Le[1],r,n));case"Or":return o(...t.$Or.map(function(e){return N(e,r,n)}));case"And":return i(...t.$And.map(function(e){return N(e,r,n)}));case"Apply":return F(t,r,n);case"Constant":return f(t.value)}return e}function N(e,t=[],r){if(e===null||typeof e!=="object"){return f(e)}else if(e.hasOwnProperty("$Or")){return o(...e.$Or.map(function(e){return N(e,t,r)}))}else if(e.hasOwnProperty("$And")){return i(...e.$And.map(function(e){return N(e,t,r)}))}else if(e.hasOwnProperty("$Not")){return s(N(e.$Not,t,r))}else if(e.hasOwnProperty("$Eq")){return R(N(e.$Eq[0],t,r),N(e.$Eq[1],t,r))}else if(e.hasOwnProperty("$Ne")){return L(N(e.$Ne[0],t,r),N(e.$Ne[1],t,r))}else if(e.hasOwnProperty("$Gt")){return j(N(e.$Gt[0],t,r),N(e.$Gt[1],t,r))}else if(e.hasOwnProperty("$Ge")){return $(N(e.$Ge[0],t,r),N(e.$Ge[1],t,r))}else if(e.hasOwnProperty("$Lt")){return k(N(e.$Lt[0],t,r),N(e.$Lt[1],t,r))}else if(e.hasOwnProperty("$Le")){return U(N(e.$Le[0],t,r),N(e.$Le[1],t,r))}else if(e.hasOwnProperty("$Path")){return c(e.$Path,undefined,t,r)}else if(e.hasOwnProperty("Path")){return c(e.Path,undefined,t,r)}else if(e.hasOwnProperty("$Apply")){return I({type:"Apply",$Function:e.$Function,$Apply:e.$Apply},t,undefined,r)}else if(e.hasOwnProperty("$If")){return I({type:"If",$If:e.$If},t,undefined,r)}else if(e.hasOwnProperty("$EnumMember")){return f(e.$EnumMember)}else if(e.hasOwnProperty("String")){return f(e.String)}else if(e.hasOwnProperty("Bool")){return f(e.Bool)}else if(e.hasOwnProperty("Int")){return f(e.Int)}else if(e.hasOwnProperty("Decimal")){return f(e.Decimal)}else if(e.hasOwnProperty("type")&&e.type==="Null"){return f(null)}return f(false)}function S(e,t=[],r){return B(N(e[0],t,r),N(e[1],t,r),N(e[2],t,r))}function x(e){let t=e;if(e.hasOwnProperty("$Path")){t={type:"Path",path:e.$Path}}else if(e.hasOwnProperty("Path")){t={type:"Path",path:e.Path}}else if(e.hasOwnProperty("$If")){t={type:"If",$If:e.$If}}else if(e.hasOwnProperty("$Apply")){t={type:"Apply",$Function:e.$Function,$Apply:e.$Apply}}return t}function F(t,r=[],a){switch(t.$Function){case"odata.concat":return q(...t.$Apply.map(e=>I(x(e),r,undefined,a)));case"odata.uriEncode":const e=I(x(t.$Apply[0]),r,undefined,a);return K("odata.uriEncode",[e,"Edm.String"],undefined,true);case"odata.fillUriTemplate":const n=t.$Apply[0];const i=t.$Apply.slice(1);const o={};i.forEach(e=>{o[e.$Name]=I(x(e.$LabeledElement),r,undefined,a)});return K("odata.fillUriTemplate",[n,o],undefined,true)}return e}function M(r,a,n){const i=m(a);const o=m(n);if(t(i,o)){return e}if(y(i)&&y(o)){switch(r){case"!==":return f(i.value!==o.value);case"===":return f(i.value===o.value);case"<":if(i.value===null||i.value===undefined||o.value===null||o.value===undefined){return f(false)}return f(i.value<o.value);case"<=":if(i.value===null||i.value===undefined||o.value===null||o.value===undefined){return f(false)}return f(i.value<=o.value);case">":if(i.value===null||i.value===undefined||o.value===null||o.value===undefined){return f(false)}return f(i.value>o.value);case">=":if(i.value===null||i.value===undefined||o.value===null||o.value===undefined){return f(false)}return f(i.value>=o.value)}}else{return{_type:"Comparison",operator:r,operand1:i,operand2:o}}}function V(e,t=false){if(e._type==="Unresolvable"){return e}if(!t){return{_type:"Length",pathInModel:e}}return B(R(e,undefined),-1,V(e))}function R(a,n){const i=m(a);const u=m(n);if(t(i,u)){return e}if(r(i,u)){return f(true)}function l(e,t){if(e._type==="Comparison"&&g(t)){return e}else if(e._type==="Comparison"&&v(t)){return s(e)}else if(e._type==="IfElse"&&r(e.onTrue,t)){return o(e.condition,R(e.onFalse,t))}else if(e._type==="IfElse"&&r(e.onFalse,t)){return o(s(e.condition),R(e.onTrue,t))}else if(e._type==="IfElse"&&y(e.onTrue)&&y(e.onFalse)&&y(t)&&!r(e.onTrue,t)&&!r(e.onFalse,t)){return f(false)}return undefined}const c=l(i,u)??l(u,i);return c??M("===",i,u)}function L(e,t){return s(R(e,t))}function $(e,t){return M(">=",e,t)}function j(e,t){return M(">",e,t)}function U(e,t){return M("<=",e,t)}function k(e,t){return M("<",e,t)}function B(a,n,u){let l=m(a);let p=m(n);let d=m(u);if(l._type==="Not"){[p,d]=[d,p];l=s(l)}if(p._type==="IfElse"&&r(l,p.condition)){p=p.onTrue}if(d._type==="IfElse"&&r(l,d.condition)){d=d.onFalse}if(y(l)){return l.value?p:d}if(r(p,d)){return p}if(v(d)){return i(l,p)}if(g(d)){return o(s(l),p)}if(v(p)){return i(s(l),d)}if(g(p)){return o(l,d)}if(t(l,p,d)){return e}if(O(a)||O(n)||O(u)){let e=0;const t=Q([a,n,u],"sap.fe.core.formatters.StandardFormatter#ifElse");const r=[];H(t,"PathInModel",t=>{r.push(t);return c(`$${e++}`,"$")},true);r.unshift(f(JSON.stringify(t)));return Q(r,"sap.fe.core.formatters.StandardFormatter#evaluateComplexExpression",undefined,true)}return{_type:"IfElse",condition:l,onTrue:p,onFalse:d}}function z(e){switch(e._type){case"Constant":case"Formatter":case"ComplexType":return false;case"Set":return e.operands.some(z);case"PathInModel":return e.modelName===undefined;case"Comparison":return z(e.operand1)||z(e.operand2);case"IfElse":return z(e.condition)||z(e.onTrue)||z(e.onFalse);case"Not":case"Truthy":return z(e.operand);default:return false}}function Q(r,a,n,i=false){const o=r.map(m);if(t(...o)){return e}if(n){if(!o.some(z)){n.keys.forEach(e=>o.push(c(e.name,"")))}}let s="";if(typeof a==="string"){s=a}else{s=a.__functionName}const[u,l]=s.split("#");if(!i&&(o.some(O)||o.some(P)||o.some(E))){let e=0;const t=Q(o,s,undefined,true);const r=[];H(t,"PathInModel",t=>{r.push(t);return c(`$${e++}`,"$")},true);r.unshift(f(JSON.stringify(t)));return Q(r,"sap.fe.core.formatters.StandardFormatter#evaluateComplexExpression",undefined,true)}else if(!!l&&l.length>0){o.unshift(f(l))}return{_type:"Formatter",fn:u,parameters:o}}const Y=function(e){if(e.annotations.Common?.IsFiscalYear){return"com.sap.vocabularies.Common.v1.IsFiscalYear"}if(e.annotations.Common?.IsFiscalPeriod){return"com.sap.vocabularies.Common.v1.IsFiscalPeriod"}if(e.annotations.Common?.IsFiscalYearPeriod){return"com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"}if(e.annotations.Common?.IsFiscalQuarter){return"com.sap.vocabularies.Common.v1.IsFiscalQuarter"}if(e.annotations.Common?.IsFiscalYearQuarter){return"com.sap.vocabularies.Common.v1.IsFiscalYearQuarter"}if(e.annotations.Common?.IsFiscalWeek){return"com.sap.vocabularies.Common.v1.IsFiscalWeek"}if(e.annotations.Common?.IsFiscalYearWeek){return"com.sap.vocabularies.Common.v1.IsFiscalYearWeek"}if(e.annotations.Common?.IsDayOfFiscalYear){return"com.sap.vocabularies.Common.v1.IsDayOfFiscalYear"}};b.getFiscalType=Y;function K(e,t,r,a=false){const n=typeof e==="string"?e:e.__functionName;return{_type:"Function",obj:r!==undefined?m(r):undefined,fn:n,isFormattingFn:a,parameters:t.map(m)}}function G(e){const t=[];H(e,"PathInModel",e=>{t.push(o(R(e,""),R(e,undefined),R(e,null)));return e});return i(...t)}function q(...r){const a=r.map(m);if(t(...a)){return e}if(a.every(y)){return f(a.reduce((e,t)=>{if(t.value!==undefined&&t.value!==null){return e+t.value.toString()}return e},""))}else if(a.some(O)){let e=0;const t=Q(a,"sap.fe.core.formatters.StandardFormatter#concat",undefined,true);const r=[];H(t,"PathInModel",t=>{r.push(t);return c(`$${e++}`,"$")});r.unshift(f(JSON.stringify(t)));return Q(r,"sap.fe.core.formatters.StandardFormatter#evaluateComplexExpression",undefined,true)}return{_type:"Concat",expressions:a}}function H(e,t,r,a=false){let n=e;switch(n._type){case"Function":case"Formatter":n.parameters=n.parameters.map(e=>H(e,t,r,a));break;case"Concat":n.expressions=n.expressions.map(e=>H(e,t,r,a));n=q(...n.expressions);break;case"ComplexType":n.bindingParameters=n.bindingParameters.map(e=>H(e,t,r,a));break;case"IfElse":{const e=H(n.onTrue,t,r,a);const i=H(n.onFalse,t,r,a);let o=n.condition;if(a){o=H(n.condition,t,r,a)}n=B(o,e,i);break}case"Not":if(a){const e=H(n.operand,t,r,a);n=s(e)}break;case"Truthy":break;case"Set":if(a){const e=n.operands.map(e=>H(e,t,r,a));n=n.operator==="||"?o(...e):i(...e)}break;case"Comparison":if(a){const e=H(n.operand1,t,r,a);const i=H(n.operand2,t,r,a);n=M(n.operator,e,i)}break;case"Constant":{const e=n.value;if(typeof e==="object"&&e){Object.keys(e).forEach(n=>{e[n]=H(e[n],t,r,a)})}break}}if(t===n._type){n=r(e)}return n}return b}var O={};var P={};var E;function D(){if(E)return P;E=1;Object.defineProperty(P,"__esModule",{value:true});P.default=P.FORMATTERS_PATH=void 0;P.formatCurrency=n;P.formatDate=a;P.formatWithBrackets=r;P.formatters=void 0;P.overrideFormatters=i;const e=function(t,...r){if(e.hasOwnProperty(t)){return e[t].apply(this,r)}else{return""}};P.formatters=e;const t=P.FORMATTERS_PATH="sap.fe.definition.formatters";function r(e,t){if(e&&t){return`${e} (${t})`}else{return e||t||""}}r.__functionName=`${t}#formatWithBrackets`;e.formatWithBrackets=r;function a(e,t){throw new Error(`Formatter 'formatDate' is not implemented. Please provide a custom implementation.`)}a.__functionName=`${t}#formatDate`;e.formatDate=a;function n(e,t){throw new Error(`Formatter 'formatCurrency' is not implemented. Please provide a custom implementation.`)}n.__functionName=`${t}#formatCurrency`;e.formatCurrency=n;function i(r={}){if(r.formatDate){r.formatDate.__functionName=`${t}#formatDate`;e.formatDate=r.formatDate}if(r.formatCurrency){r.formatCurrency.__functionName=`${t}#formatCurrency`;e.formatCurrency=r.formatCurrency}}P.default=e;return P}var _;function w(){if(_)return O;_=1;Object.defineProperty(O,"__esModule",{value:true});O.applyDisplayModeFormatting=a;var e=C();var t=r(D());function r(e){return e&&e.__esModule?e:{default:e}}function a(r,a){return(0,e.transformRecursively)(r,"PathInModel",r=>{const s=a.getMetaPathForPath(r.ownPath);if(!s){return e.unresolvableExpression}const u=s.getTarget();const l=o(s);if(l){return(0,e.formatResult)([r,l],t.default.formatCurrency)}if(i(s)){return(0,e.formatResult)([r,u.type],t.default.formatDate)}const c=n(s);if(c!=="Value"){const a=(0,e.getExpressionFromAnnotation)(u.annotations.Common?.Text,s.getNavigationProperties().map(e=>e.name));switch(c){case"Description":return a;case"DescriptionValue":return(0,e.formatResult)([a,r],t.default.formatWithBrackets);case"ValueDescription":return(0,e.formatResult)([r,a],t.default.formatWithBrackets)}}return r})}function n(e){const t=e.getClosestEntityType();const r=e.getTarget().annotations.Common?.Text;const a=r?.annotations?.UI?.TextArrangement??t.annotations.UI?.TextArrangement;let n=r?"DescriptionValue":"Value";if(r&&a!=null){switch(a.valueOf()){case"UI.TextArrangementType/TextOnly":n="Description";break;case"UI.TextArrangementType/TextLast":n="ValueDescription";break;case"UI.TextArrangementType/TextSeparate":n="Value";break;default:n="DescriptionValue"}}return n}function i(e){return e.getTarget().type==="Edm.Date"||e.getTarget().type==="Edm.DateTime"||e.getTarget().type==="Edm.DateTimeOffset"}function o(t){const r=t.getTarget().annotations.Measures;if(r){const t=r.Unit??r.ISOCurrency;if(t){return(0,e.getExpressionFromAnnotation)(t)}}return undefined}return O}var A;function I(){if(A)return v;A=1;Object.defineProperty(v,"__esModule",{value:true});v._DataField=void 0;var e=C();var t=d();var r=w();let a=class a{constructor(e,t){this.dataField=e;this.scopedContextMetaPath=t}getValue(){if(!(0,t.isAnnotationOfType)(this.dataField,"com.sap.vocabularies.UI.v1.DataFieldForAnnotation")){return(0,e.getExpressionFromAnnotation)(this.dataField.Value)}return e.unresolvableExpression}getFormattedValue(){if(!(0,t.isAnnotationOfType)(this.dataField,"com.sap.vocabularies.UI.v1.DataFieldForAnnotation")){const t=(0,e.getExpressionFromAnnotation)(this.dataField.Value,this.scopedContextMetaPath.getNavigationProperties().map(e=>e.name));return(0,r.applyDisplayModeFormatting)(t,this.scopedContextMetaPath)}else{const r=this.dataField.Target.$target;if((0,t.isAnnotationOfType)(r,"com.sap.vocabularies.Communication.v1.ContactType")){const t=this.dataField.Target.value.split("/")?.slice(0,-1)?.join()||"";const a=r.fn;return(0,e.getExpressionFromAnnotation)(a,[t])}}return e.unresolvableExpression}getLabel(){let e=this.dataField.Label?.toString()??this.dataField.annotations?.Common?.Label?.toString();if(!e){e=this.dataField.fullyQualifiedName;if((0,t.isAnnotationOfType)(this.dataField,"com.sap.vocabularies.UI.v1.DataFieldForAnnotation")){const r=this.dataField.Target.$target;if((0,t.isAnnotationOfType)(r,"com.sap.vocabularies.UI.v1.FieldGroupType")&&r.Label){e=r.Label.toString()}}else{const r=this.dataField.Value;if(r&&(0,t.isPathAnnotationExpression)(r)){e=r.$target?.annotations.Common?.Label?.toString()??r.$target?.name??r.path}}}return e}getProperty(){if(!(0,t.isAnnotationOfType)(this.dataField,"com.sap.vocabularies.UI.v1.DataFieldForAnnotation")){const e=this.dataField.Value;if(e&&(0,t.isPathAnnotationExpression)(e)){return e.$target}}return undefined}getFullyQualifiedName(){return this.dataField.fullyQualifiedName}getVisible(){if(!(0,t.isAnnotationOfType)(this.dataField,"com.sap.vocabularies.UI.v1.DataFieldForAnnotation")){const r=this.dataField.Value;if(r&&(0,t.isPathAnnotationExpression)(r)){const t=r.$target?.annotations?.UI?.Hidden;if(t){return(0,e.not)((0,e.getExpressionFromAnnotation)(t,this.scopedContextMetaPath.getNavigationProperties().map(e=>e.name)))}}}const r=this.dataField.annotations?.UI?.Hidden;if(r){return(0,e.not)((0,e.getExpressionFromAnnotation)(r,this.scopedContextMetaPath.getNavigationProperties().map(e=>e.name)))}return(0,e.constant)(true)}getImportance(){return this.dataField.annotations?.UI?.Importance?.toString()??"UI.ImportanceType/High"}};v._DataField=a;return v}var N;function S(){if(N)return g;N=1;Object.defineProperty(g,"__esModule",{value:true});g._HeaderInfo=void 0;var e=I();let t=class t{constructor(e,t){this.info=e;this.pageMetaPath=t}getFullyQualifiedName(){return this.info.fullyQualifiedName}getTitle(){return this.info.Title?new e._DataField(this.info.Title,this.pageMetaPath):undefined}getDescription(){return this.info.Description?new e._DataField(this.info.Description,this.pageMetaPath):undefined}getTypeName(){return this.info.TypeName.toString()}};g._HeaderInfo=t;return g}var x={};var F;function M(){if(F)return x;F=1;Object.defineProperty(x,"__esModule",{value:true});x._Identification=void 0;var e=I();let t=class t{constructor(e,t){this.id=e;this.pageMetaPath=t}getDataFields(t){return this.id.filter(e=>{if(t?.restrictTypes&&!t.restrictTypes.includes(e.$Type)){return false}switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":case"com.sap.vocabularies.UI.v1.DataFieldWithActionGroup":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldForActionGroup":return t?.importance===undefined||t.importance.includes(e.annotations?.UI?.Importance?.toString());default:return false}}).map(t=>new e._DataField(t,this.pageMetaPath))}};x._Identification=t;return x}var V={};var R;function L(){if(R)return V;R=1;Object.defineProperty(V,"__esModule",{value:true});V._LineItem=void 0;var e=I();let t=class t{constructor(e,t){this.lineItem=e;this.pageMetaPath=t}static createDefault(e){const r=e.getClosestEntityType().entityProperties.map(e=>{if(e.annotations.UI?.DataFieldDefault){return e.annotations.UI.DataFieldDefault}else{return{$Type:"com.sap.vocabularies.UI.v1.DataField",Value:{type:"Path",path:e.name,$target:e}}}});r.term="com.sap.vocabularies.UI.v1.LineItem";return new t(r,e)}static fromSPV(e,r){switch(e?.term){case"com.sap.vocabularies.UI.v1.LineItem":return new t(e,r);case"com.sap.vocabularies.UI.v1.PresentationVariant":return new t(e.Visualizations[0].$target,r);case"com.sap.vocabularies.UI.v1.SelectionPresentationVariant":return new t(e.PresentationVariant.Visualizations[0].$target,r);case undefined:return undefined}}getActions(){return this.lineItem.filter(e=>e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction")}getHeaderActions(){return this.getActions().filter(e=>e.Determining===true)}getDataFields(t){return this.lineItem.filter(e=>{if(t?.restrictTypes&&!t.restrictTypes.includes(e.$Type)){return false}switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":case"com.sap.vocabularies.UI.v1.DataFieldWithActionGroup":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldForActionGroup":return t?.importance===undefined||t.importance.includes(e.annotations?.UI?.Importance?.toString());default:return false}}).map(t=>new e._DataField(t,this.pageMetaPath))}};V._LineItem=t;return V}var $;function j(){if($)return y;$=1;Object.defineProperty(y,"__esModule",{value:true});y.DefinitionPage=void 0;var e=n(h());var t=S();var r=M();var a=L();function n(e){return e&&e.__esModule?e:{default:e}}let i=class n{constructor(e){this.metaPath=e}getMetaPath(){return this.metaPath}getIdentification(){const e=this.metaPath.getClosestEntityType();const t=e.annotations.UI?.Identification;if(t){return new r._Identification(t,this.metaPath)}else{return undefined}}getHeaderInfo(){const e=this.metaPath.getClosestEntityType();const r=e.annotations.UI?.HeaderInfo;if(r){return new t._HeaderInfo(r,this.metaPath)}else{return undefined}}getTableVisualization(){return a._LineItem.fromSPV(this._getTableVisualizationAnnotation(),this.metaPath)}getFilterBarDefinition(t){const r=this.metaPath.getClosestEntityType();let a=r.annotations.UI?.SelectionFields;if(!a){a=Object.assign([],{term:"com.sap.vocabularies.UI.v1.SelectionFields"})}return new e.default(a,t,this.metaPath)}createDefaultTableVisualization(){return a._LineItem.createDefault(this.metaPath)}getTitle(){let e;const t=this.getHeaderInfo();e=t?.getTitle()?.getFormattedValue()??null;if(!e||e._type==="Unresolvable"){const r=this.getMetaPath();const a=r.getClosestEntityType();const n=a.annotations.Common?.Label;e=t?.getTypeName()||n?.toString()||r.getTarget().name}return{value:e}}getDescription(){let e;const t=this.getHeaderInfo();e=t?.getDescription()?.getValue()??null;if(e?._type==="Unresolvable"){e=null}return{value:e}}_getTableVisualizationAnnotation(){const e=this.metaPath.getClosestEntityType();const t=e.annotations.UI?.SelectionPresentationVariant;if(t){if(t.PresentationVariant.Visualizations.find(e=>e.$target?.term==="com.sap.vocabularies.UI.v1.LineItem")){return t}}const r=e.annotations.UI?.PresentationVariant;if(r?.Visualizations){if(r.Visualizations.find(e=>e.$target?.term==="com.sap.vocabularies.UI.v1.LineItem")){return r}}return e.annotations.UI?.LineItem}};y.DefinitionPage=i;return y}var U={};var k;function B(){if(k)return U;k=1;Object.defineProperty(U,"__esModule",{value:true});U._DataPoint=void 0;var e=C();var t=w();let r=class r{constructor(e,t){this.dataPoint=e;this.scopedContextMetaPath=t}getTitle(){return this.dataPoint?.Title?.toString()??this.dataPoint?.Description?.toString()}getValue(){const r=(0,e.getExpressionFromAnnotation)(this.dataPoint.Value,this.scopedContextMetaPath.getNavigationProperties().map(e=>e.name));return(0,t.applyDisplayModeFormatting)(r,this.scopedContextMetaPath)}getCriticality(){return(0,e.getExpressionFromAnnotation)(this.dataPoint.Criticality)}};U._DataPoint=r;return U}var z={};var Q={};var Y;function K(){if(Y)return Q;Y=1;Object.defineProperty(Q,"__esModule",{value:true});Q.default=void 0;var e=d();function t(e,t){if(t){if(t.startsWith("/")){return t}else if(t.startsWith("@")){return e+t}else if(!e.endsWith("/")){return e+"/"+t}else{return e+t}}return e}let r=class r{constructor(r,a,n){this.convertedMetadata=r;this.metaPath=a;this.contextPath=n;this.navigationProperties=[];this.contextNavigationProperties=[];this.absolutePath=t(n,a);this.relativePath=this.absolutePath.replace(n,"");if(this.relativePath.startsWith("/")){this.relativePath=this.relativePath.substring(1)}const i=this.convertedMetadata.resolvePath(this.absolutePath);const o=this.convertedMetadata.resolvePath(n);if(i.target===undefined||i.target===null){throw new Error(`No annotation target found for ${a}`)}this.targetObject=i.target;let s;let u;let l;let c=[];i.objectPath.forEach(t=>{if((0,e.isServiceObject)(t)){switch(t._type){case"NavigationProperty":c.push(t.name);this.navigationProperties.push(t);l=t.targetType;if(u?.navigationPropertyBinding.hasOwnProperty(c.join("/"))){u=u.navigationPropertyBinding[c.join("/")];c=[]}break;case"EntitySet":if(s===undefined){s=t}u=t;l=u.entityType;break;case"EntityType":if(l===undefined){l=t}break}}});o.objectPath.forEach(e=>{s=this.getResolvedContextPath(e,l,s)});if(s===undefined||l===undefined){throw new Error("MetaPath doesn't contain an entitySet -> Should never happen")}this.serviceObjectPath="/"+s.name;if(this.navigationProperties.length){this.serviceObjectPath+="/"+this.navigationProperties.map(e=>e.name).join("/")}this.rootEntitySet=s;this.currentEntitySet=u;this.currentEntityType=l}getResolvedContextPath(t,r,a){if((0,e.isServiceObject)(t)){switch(t._type){case"NavigationProperty":this.contextNavigationProperties.push(t);break;case"EntitySet":if(this.contextRootEntitySet===undefined){this.contextRootEntitySet=t}if(a===undefined&&t.entityType===r){a=t}break}}return a}getContextPath(){return this.contextPath}getPath(e){return t(this.absolutePath,e)}getRelativePath(e){return t(this.relativePath,e)}getTarget(){return this.targetObject}getClosestEntitySet(){let e=this.rootEntitySet;for(const t of this.navigationProperties){const r=e.navigationPropertyBinding[t.name];if(r){e=r}}return e}getClosestEntityType(){let e=this.rootEntitySet.entityType;for(const t of this.navigationProperties){e=t.targetType}return e}getContextClosestEntitySet(){let e=this.contextRootEntitySet;if(e===undefined){return e}const t=e;for(const r of this.contextNavigationProperties){if(t.navigationPropertyBinding[r.name]){e=t.navigationPropertyBinding[r.name]}}return e}getNavigationProperties(){return this.navigationProperties}getMetaPathForClosestEntitySet(){return new r(this.convertedMetadata,"",this.getClosestEntitySet().fullyQualifiedName)}getMetaPathForPath(e){try{return new r(this.convertedMetadata,t(this.serviceObjectPath,e),this.contextPath)}catch(e){return undefined}}getMetaPathForObject(t){if((0,e.isAnnotationPath)(t)){return this.getMetaPathForPath(t.value)}else if((0,e.isPathAnnotationExpression)(t)){return this.getMetaPathForPath(t.path)}else{const e=t.fullyQualifiedName.replace(this.rootEntitySet.entityType.fullyQualifiedName,this.contextPath);return new r(this.convertedMetadata,e,this.contextPath)}}getConvertedMetadata(){return this.convertedMetadata}};Q.default=r;return Q}var G;function q(){if(G)return z;G=1;Object.defineProperty(z,"__esModule",{value:true});z.DefinitionContext=void 0;var e=r(K());var t=j();function r(e){return e&&e.__esModule?e:{default:e}}let a=class r{constructor(e){this.convertedMetadata=e}addApplicationManifest(e){this.manifest=e}getEntitySets(){return this.convertedMetadata.entitySets}getEntitySet(e){return this.convertedMetadata.entitySets.by_name(e)}getRootEntitySet(){if(this.manifest){const e=":?query:";const t=(this.manifest["sap.ui5"]?.routing?.routes).find(t=>t.pattern===e);if(t?.target&&this.manifest["sap.ui5"]?.routing?.targets){const e=this.manifest["sap.ui5"].routing.targets[t.target];if(e?.name){const t=e.options;const r=t?.settings;const a=this.convertedMetadata.resolvePath(r?.contextPath??`${r?.entitySet}`);return a.target}}}}getMetaPath(t,r){return new e.default(this.convertedMetadata,t,r)}getPageFor(r){return new t.DefinitionPage(new e.default(this.convertedMetadata,r,r))}getVersion(){const e=this.convertedMetadata.version.match(/^(\d+)\.(\d+)$/);if(!e){throw new Error("Invalid version format")}return{major:parseInt(e[1],10),minor:parseInt(e[2],10)}}};z.DefinitionContext=a;return z}var H={};var W;function Z(){if(W)return H;W=1;Object.defineProperty(H,"__esModule",{value:true});H.QueryBuilder=void 0;var e=C();function t(e,t,a){return(t=r(t))in e?Object.defineProperty(e,t,{value:a,enumerable:true,configurable:true,writable:true}):e[t]=a,e}function r(e){var t=a(e,"string");return"symbol"==typeof t?t:t+""}function a(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}let n=class r{constructor(e,r){t(this,"paths",new Set);this.contextMetaPath=e;this.definitionContext=r}addPathsFromExpression(t){(0,e.transformRecursively)(t,"PathInModel",e=>{this.addPath(e.path);return e},true)}addPath(e){this.paths.add(e)}buildQuery(){let e;if(this.definitionContext.getVersion().major>=4){e=this.createQueryV4(this.paths)}else{e=this.createQueryV2(this.paths)}return e}createQueryV2(e){const t=[];const r=new Set;e.forEach(e=>{const a=e.split("/");const n=this.contextMetaPath.getMetaPathForPath(e);const i=a[0];if(i&&this.isNavigationProperty(i,n?.getNavigationProperties()??[])){r.add(i)}else{t.push(e)}});const a={$format:"json",$select:t.join(",")};if(r.size>0){a.$expand=Array.from(r).join(",")}return a}createQueryV4(e){const t={name:"",$select:new Set,$expand:new Map};e.forEach(e=>{const r=e.split("/");const a=this.contextMetaPath.getMetaPathForPath(e);const n=a?.getNavigationProperties()??[];this.processPathRecursiveV4(r,t,n)});const r={$format:"json",$select:Array.from(t.$select).join(",")};if(t.$expand.size>0){r.$expand=Array.from(t.$expand.values()).map(i).join(",")}return r}processPathRecursiveV4(e,t,r){let a;const n=e[0];if(n&&this.isNavigationProperty(n,r)){a=t.$expand.get(n);if(!a){a={name:n,$select:new Set,$expand:new Map}}t.$expand.set(n,a);if(e.length===2){a.$select.add(e[1]??"")}else{this.processPathRecursiveV4(e.slice(1),a,r.slice(1))}}else{t.$select.add(e.join("/"))}}isNavigationProperty(e,t){const r=this.contextMetaPath.getNavigationProperties().length;return t.length>r&&e===t[r]?.name}};H.QueryBuilder=n;function i(e){const t=o(e.$select);const r=Array.from(e.$expand.values()).map(i).join(",");const a=r.length>0?`$expand=${r}`:"";const n=t.length>0&&a.length>0?";":"";return`${e.name}(${t}${n}${a})`}function o(e){return e.size>0?`$select=${Array.from(e).join(",")}`:""}return H}var X;function J(){if(X)return a;X=1;(function(e){Object.defineProperty(e,"__esModule",{value:true});var t={FilterField:true,DefinitionPage:true,_DataField:true,_DataPoint:true,_LineItem:true,DefinitionContext:true,QueryBuilder:true,FORMATTERS_PATH:true,formatters:true};Object.defineProperty(e,"DefinitionContext",{enumerable:true,get:function(){return s.DefinitionContext}});Object.defineProperty(e,"DefinitionPage",{enumerable:true,get:function(){return a.DefinitionPage}});Object.defineProperty(e,"FORMATTERS_PATH",{enumerable:true,get:function(){return l.FORMATTERS_PATH}});Object.defineProperty(e,"FilterField",{enumerable:true,get:function(){return r.FilterField}});Object.defineProperty(e,"QueryBuilder",{enumerable:true,get:function(){return u.QueryBuilder}});Object.defineProperty(e,"_DataField",{enumerable:true,get:function(){return n._DataField}});Object.defineProperty(e,"_DataPoint",{enumerable:true,get:function(){return i._DataPoint}});Object.defineProperty(e,"_LineItem",{enumerable:true,get:function(){return o._LineItem}});Object.defineProperty(e,"formatters",{enumerable:true,get:function(){return l.formatters}});var r=h();var a=j();var n=I();var i=B();var o=L();var s=q();var u=Z();var l=D();var c=d();Object.keys(c).forEach(function(r){if(r==="default"||r==="__esModule")return;if(Object.prototype.hasOwnProperty.call(t,r))return;if(r in e&&e[r]===c[r])return;Object.defineProperty(e,r,{enumerable:true,get:function(){return c[r]}})})})(a);return a}var ee=J();var te=C();var re={};var ae={};var ne={};var ie;function oe(){if(ie)return ne;ie=1;Object.defineProperty(ne,"__esModule",{value:true});ne.MergedRawMetadata=ne.RawMetadataInstance=ne.ensureArray=void 0;function e(e){if(e===undefined||e===null){return[]}if(Array.isArray(e)){return e}else{return[e]}}ne.ensureArray=e;class t{constructor(e,t,r,a){this.identification=e;this.references=a;this.version=t;this.schema=r}}ne.RawMetadataInstance=t;class r{get references(){return this._references}get schema(){return{associations:this._associations,associationSets:this._associationSets,annotations:this._annotations,entityContainer:this._entityContainer,namespace:this._namespace,entitySets:this._entitySets,singletons:this._singletons,complexTypes:this._complexTypes,typeDefinitions:this._typeDefinitions,actions:this._actions,actionImports:this._actionImports,entityTypes:this._entityTypes}}constructor(e){this._references=[];this._parserOutput=[];this._annotations={};this._associations=[];this._associationSets=[];this._entitySets=[];this._singletons=[];this._actions=[];this._actionImports=[];this._entityContainer={_type:"EntityContainer",fullyQualifiedName:""};this._entityTypes=[];this._complexTypes=[];this._typeDefinitions=[];this.identification="mergedParserInstance";this.version=e.version;this._namespace=e.schema.namespace}addParserOutput(e){this._parserOutput.push(e);this._references=this._references.concat(e.references);this._associations=this._associations.concat(e.schema.associations);this._associationSets=this._associationSets.concat(e.schema.associationSets);this._annotations=Object.assign(this._annotations,e.schema.annotations);this._entitySets=this._entitySets.concat(e.schema.entitySets);this._singletons=this._singletons.concat(e.schema.singletons);this._actions=this._actions.concat(e.schema.actions);this._actionImports=this._actionImports.concat(e.schema.actionImports);this._entityTypes=this._entityTypes.concat(e.schema.entityTypes);this._complexTypes=this._complexTypes.concat(e.schema.complexTypes);this._typeDefinitions=this._typeDefinitions.concat(e.schema.typeDefinitions);if(e.schema.entityContainer.fullyQualifiedName.length>0){this._entityContainer=Object.assign(this._entityContainer,e.schema.entityContainer)}}}ne.MergedRawMetadata=r;return ne}var se;function ue(){if(se)return ae;se=1;Object.defineProperty(ae,"__esModule",{value:true});ae.merge=void 0;const e=oe();function t(...t){const r=new e.MergedRawMetadata(t[0]);t.forEach(e=>{r.addParserOutput(e)});return r}ae.merge=t;return ae}var le={};var ce={};var fe;function pe(){if(fe)return ce;fe=1;(function(e){(function(e){e.parser=function(e,t){return new a(e,t)};e.SAXParser=a;e.SAXStream=c;e.createStream=l;e.MAX_BUFFER_LENGTH=64*1024;var r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function a(t,r){if(!(this instanceof a)){return new a(t,r)}var n=this;i(n);n.q=n.c="";n.bufferCheckPosition=e.MAX_BUFFER_LENGTH;n.opt=r||{};n.opt.lowercase=n.opt.lowercase||n.opt.lowercasetags;n.looseCase=n.opt.lowercase?"toLowerCase":"toUpperCase";n.tags=[];n.closed=n.closedRoot=n.sawRoot=false;n.tag=n.error=null;n.strict=!!t;n.noscript=!!(t||n.opt.noscript);n.state=D.BEGIN;n.strictEntities=n.opt.strictEntities;n.ENTITIES=n.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES);n.attribList=[];if(n.opt.xmlns){n.ns=Object.create(h)}if(n.opt.unquotedAttributeValues===undefined){n.opt.unquotedAttributeValues=!t}n.trackPosition=n.opt.position!==false;if(n.trackPosition){n.position=n.line=n.column=0}w(n,"onready")}if(!Object.create){Object.create=function(e){function t(){}t.prototype=e;var r=new t;return r}}if(!Object.keys){Object.keys=function(e){var t=[];for(var r in e)if(e.hasOwnProperty(r))t.push(r);return t}}function n(t){var a=Math.max(e.MAX_BUFFER_LENGTH,10);var n=0;for(var i=0,o=r.length;i<o;i++){var s=t[r[i]].length;if(s>a){switch(r[i]){case"textNode":I(t);break;case"cdata":A(t,"oncdata",t.cdata);t.cdata="";break;case"script":A(t,"onscript",t.script);t.script="";break;default:S(t,"Max buffer length exceeded: "+r[i])}}n=Math.max(n,s)}var u=e.MAX_BUFFER_LENGTH-n;t.bufferCheckPosition=u+t.position}function i(e){for(var t=0,a=r.length;t<a;t++){e[r[t]]=""}}function o(e){I(e);if(e.cdata!==""){A(e,"oncdata",e.cdata);e.cdata=""}if(e.script!==""){A(e,"onscript",e.script);e.script=""}}a.prototype={end:function(){x(this)},write:B,resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){o(this)}};var s;try{s=ma.Stream}catch(e){s=function(){}}if(!s)s=function(){};var u=e.EVENTS.filter(function(e){return e!=="error"&&e!=="end"});function l(e,t){return new c(e,t)}function c(e,t){if(!(this instanceof c)){return new c(e,t)}s.apply(this);this._parser=new a(e,t);this.writable=true;this.readable=true;var r=this;this._parser.onend=function(){r.emit("end")};this._parser.onerror=function(e){r.emit("error",e);r._parser.error=null};this._decoder=null;u.forEach(function(e){Object.defineProperty(r,"on"+e,{get:function(){return r._parser["on"+e]},set:function(t){if(!t){r.removeAllListeners(e);r._parser["on"+e]=t;return t}r.on(e,t)},enumerable:true,configurable:false})})}c.prototype=Object.create(s.prototype,{constructor:{value:c}});c.prototype.write=function(e){if(typeof Buffer==="function"&&typeof Buffer.isBuffer==="function"&&Buffer.isBuffer(e)){if(!this._decoder){var r=t.StringDecoder;this._decoder=new r("utf8")}e=this._decoder.write(e)}this._parser.write(e.toString());this.emit("data",e);return true};c.prototype.end=function(e){if(e&&e.length){this.write(e)}this._parser.end();return true};c.prototype.on=function(e,t){var r=this;if(!r._parser["on"+e]&&u.indexOf(e)!==-1){r._parser["on"+e]=function(){var t=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e);r.emit.apply(r,t)}}return s.prototype.on.call(r,e,t)};var f="[CDATA[";var p="DOCTYPE";var d="http://www.w3.org/XML/1998/namespace";var m="http://www.w3.org/2000/xmlns/";var h={xml:d,xmlns:m};var y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;var g=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;var v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;var b=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function T(e){return e===" "||e==="\n"||e==="\r"||e==="\t"}function C(e){return e==='"'||e==="'"}function O(e){return e===">"||T(e)}function P(e,t){return e.test(t)}function E(e,t){return!P(e,t)}var D=0;e.STATE={BEGIN:D++,BEGIN_WHITESPACE:D++,TEXT:D++,TEXT_ENTITY:D++,OPEN_WAKA:D++,SGML_DECL:D++,SGML_DECL_QUOTED:D++,DOCTYPE:D++,DOCTYPE_QUOTED:D++,DOCTYPE_DTD:D++,DOCTYPE_DTD_QUOTED:D++,COMMENT_STARTING:D++,COMMENT:D++,COMMENT_ENDING:D++,COMMENT_ENDED:D++,CDATA:D++,CDATA_ENDING:D++,CDATA_ENDING_2:D++,PROC_INST:D++,PROC_INST_BODY:D++,PROC_INST_ENDING:D++,OPEN_TAG:D++,OPEN_TAG_SLASH:D++,ATTRIB:D++,ATTRIB_NAME:D++,ATTRIB_NAME_SAW_WHITE:D++,ATTRIB_VALUE:D++,ATTRIB_VALUE_QUOTED:D++,ATTRIB_VALUE_CLOSED:D++,ATTRIB_VALUE_UNQUOTED:D++,ATTRIB_VALUE_ENTITY_Q:D++,ATTRIB_VALUE_ENTITY_U:D++,CLOSE_TAG:D++,CLOSE_TAG_SAW_WHITE:D++,SCRIPT:D++,SCRIPT_ENDING:D++};e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(e.ENTITIES).forEach(function(t){var r=e.ENTITIES[t];var a=typeof r==="number"?String.fromCharCode(r):r;e.ENTITIES[t]=a});for(var _ in e.STATE){e.STATE[e.STATE[_]]=_}D=e.STATE;function w(e,t,r){e[t]&&e[t](r)}function A(e,t,r){if(e.textNode)I(e);w(e,t,r)}function I(e){e.textNode=N(e.opt,e.textNode);if(e.textNode)w(e,"ontext",e.textNode);e.textNode=""}function N(e,t){if(e.trim)t=t.trim();if(e.normalize)t=t.replace(/\s+/g," ");return t}function S(e,t){I(e);if(e.trackPosition){t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c}t=new Error(t);e.error=t;w(e,"onerror",t);return e}function x(e){if(e.sawRoot&&!e.closedRoot)F(e,"Unclosed root tag");if(e.state!==D.BEGIN&&e.state!==D.BEGIN_WHITESPACE&&e.state!==D.TEXT){S(e,"Unexpected end")}I(e);e.c="";e.closed=true;w(e,"onend");a.call(e,e.strict,e.opt);return e}function F(e,t){if(typeof e!=="object"||!(e instanceof a)){throw new Error("bad call to strictFail")}if(e.strict){S(e,t)}}function M(e){if(!e.strict)e.tagName=e.tagName[e.looseCase]();var t=e.tags[e.tags.length-1]||e;var r=e.tag={name:e.tagName,attributes:{}};if(e.opt.xmlns){r.ns=t.ns}e.attribList.length=0;A(e,"onopentagstart",r)}function V(e,t){var r=e.indexOf(":");var a=r<0?["",e]:e.split(":");var n=a[0];var i=a[1];if(t&&e==="xmlns"){n="xmlns";i=""}return{prefix:n,local:i}}function R(e){if(!e.strict){e.attribName=e.attribName[e.looseCase]()}if(e.attribList.indexOf(e.attribName)!==-1||e.tag.attributes.hasOwnProperty(e.attribName)){e.attribName=e.attribValue="";return}if(e.opt.xmlns){var t=V(e.attribName,true);var r=t.prefix;var a=t.local;if(r==="xmlns"){if(a==="xml"&&e.attribValue!==d){F(e,"xml: prefix must be bound to "+d+"\n"+"Actual: "+e.attribValue)}else if(a==="xmlns"&&e.attribValue!==m){F(e,"xmlns: prefix must be bound to "+m+"\n"+"Actual: "+e.attribValue)}else{var n=e.tag;var i=e.tags[e.tags.length-1]||e;if(n.ns===i.ns){n.ns=Object.create(i.ns)}n.ns[a]=e.attribValue}}e.attribList.push([e.attribName,e.attribValue])}else{e.tag.attributes[e.attribName]=e.attribValue;A(e,"onattribute",{name:e.attribName,value:e.attribValue})}e.attribName=e.attribValue=""}function L(e,t){if(e.opt.xmlns){var r=e.tag;var a=V(e.tagName);r.prefix=a.prefix;r.local=a.local;r.uri=r.ns[a.prefix]||"";if(r.prefix&&!r.uri){F(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName));r.uri=a.prefix}var n=e.tags[e.tags.length-1]||e;if(r.ns&&n.ns!==r.ns){Object.keys(r.ns).forEach(function(t){A(e,"onopennamespace",{prefix:t,uri:r.ns[t]})})}for(var i=0,o=e.attribList.length;i<o;i++){var s=e.attribList[i];var u=s[0];var l=s[1];var c=V(u,true);var f=c.prefix;var p=c.local;var d=f===""?"":r.ns[f]||"";var m={name:u,value:l,prefix:f,local:p,uri:d};if(f&&f!=="xmlns"&&!d){F(e,"Unbound namespace prefix: "+JSON.stringify(f));m.uri=f}e.tag.attributes[u]=m;A(e,"onattribute",m)}e.attribList.length=0}e.tag.isSelfClosing=!!t;e.sawRoot=true;e.tags.push(e.tag);A(e,"onopentag",e.tag);if(!t){if(!e.noscript&&e.tagName.toLowerCase()==="script"){e.state=D.SCRIPT}else{e.state=D.TEXT}e.tag=null;e.tagName=""}e.attribName=e.attribValue="";e.attribList.length=0}function $(e){if(!e.tagName){F(e,"Weird empty close tag.");e.textNode+="</>";e.state=D.TEXT;return}if(e.script){if(e.tagName!=="script"){e.script+="</"+e.tagName+">";e.tagName="";e.state=D.SCRIPT;return}A(e,"onscript",e.script);e.script=""}var t=e.tags.length;var r=e.tagName;if(!e.strict){r=r[e.looseCase]()}var a=r;while(t--){var n=e.tags[t];if(n.name!==a){F(e,"Unexpected close tag")}else{break}}if(t<0){F(e,"Unmatched closing tag: "+e.tagName);e.textNode+="</"+e.tagName+">";e.state=D.TEXT;return}e.tagName=r;var i=e.tags.length;while(i-- >t){var o=e.tag=e.tags.pop();e.tagName=e.tag.name;A(e,"onclosetag",e.tagName);var s={};for(var u in o.ns){s[u]=o.ns[u]}var l=e.tags[e.tags.length-1]||e;if(e.opt.xmlns&&o.ns!==l.ns){Object.keys(o.ns).forEach(function(t){var r=o.ns[t];A(e,"onclosenamespace",{prefix:t,uri:r})})}}if(t===0)e.closedRoot=true;e.tagName=e.attribValue=e.attribName="";e.attribList.length=0;e.state=D.TEXT}function j(e){var t=e.entity;var r=t.toLowerCase();var a;var n="";if(e.ENTITIES[t]){return e.ENTITIES[t]}if(e.ENTITIES[r]){return e.ENTITIES[r]}t=r;if(t.charAt(0)==="#"){if(t.charAt(1)==="x"){t=t.slice(2);a=parseInt(t,16);n=a.toString(16)}else{t=t.slice(1);a=parseInt(t,10);n=a.toString(10)}}t=t.replace(/^0+/,"");if(isNaN(a)||n.toLowerCase()!==t){F(e,"Invalid character entity");return"&"+e.entity+";"}return String.fromCodePoint(a)}function U(e,t){if(t==="<"){e.state=D.OPEN_WAKA;e.startTagPosition=e.position}else if(!T(t)){F(e,"Non-whitespace before first tag.");e.textNode=t;e.state=D.TEXT}}function k(e,t){var r="";if(t<e.length){r=e.charAt(t)}return r}function B(t){var r=this;if(this.error){throw this.error}if(r.closed){return S(r,"Cannot write after close. Assign an onready handler.")}if(t===null){return x(r)}if(typeof t==="object"){t=t.toString()}var a=0;var i="";while(true){i=k(t,a++);r.c=i;if(!i){break}if(r.trackPosition){r.position++;if(i==="\n"){r.line++;r.column=0}else{r.column++}}switch(r.state){case D.BEGIN:r.state=D.BEGIN_WHITESPACE;if(i==="\ufeff"){continue}U(r,i);continue;case D.BEGIN_WHITESPACE:U(r,i);continue;case D.TEXT:if(r.sawRoot&&!r.closedRoot){var o=a-1;while(i&&i!=="<"&&i!=="&"){i=k(t,a++);if(i&&r.trackPosition){r.position++;if(i==="\n"){r.line++;r.column=0}else{r.column++}}}r.textNode+=t.substring(o,a-1)}if(i==="<"&&!(r.sawRoot&&r.closedRoot&&!r.strict)){r.state=D.OPEN_WAKA;r.startTagPosition=r.position}else{if(!T(i)&&(!r.sawRoot||r.closedRoot)){F(r,"Text data outside of root node.")}if(i==="&"){r.state=D.TEXT_ENTITY}else{r.textNode+=i}}continue;case D.SCRIPT:if(i==="<"){r.state=D.SCRIPT_ENDING}else{r.script+=i}continue;case D.SCRIPT_ENDING:if(i==="/"){r.state=D.CLOSE_TAG}else{r.script+="<"+i;r.state=D.SCRIPT}continue;case D.OPEN_WAKA:if(i==="!"){r.state=D.SGML_DECL;r.sgmlDecl=""}else if(T(i));else if(P(y,i)){r.state=D.OPEN_TAG;r.tagName=i}else if(i==="/"){r.state=D.CLOSE_TAG;r.tagName=""}else if(i==="?"){r.state=D.PROC_INST;r.procInstName=r.procInstBody=""}else{F(r,"Unencoded <");if(r.startTagPosition+1<r.position){var s=r.position-r.startTagPosition;i=new Array(s).join(" ")+i}r.textNode+="<"+i;r.state=D.TEXT}continue;case D.SGML_DECL:if(r.sgmlDecl+i==="--"){r.state=D.COMMENT;r.comment="";r.sgmlDecl="";continue}if(r.doctype&&r.doctype!==true&&r.sgmlDecl){r.state=D.DOCTYPE_DTD;r.doctype+="<!"+r.sgmlDecl+i;r.sgmlDecl=""}else if((r.sgmlDecl+i).toUpperCase()===f){A(r,"onopencdata");r.state=D.CDATA;r.sgmlDecl="";r.cdata=""}else if((r.sgmlDecl+i).toUpperCase()===p){r.state=D.DOCTYPE;if(r.doctype||r.sawRoot){F(r,"Inappropriately located doctype declaration")}r.doctype="";r.sgmlDecl=""}else if(i===">"){A(r,"onsgmldeclaration",r.sgmlDecl);r.sgmlDecl="";r.state=D.TEXT}else if(C(i)){r.state=D.SGML_DECL_QUOTED;r.sgmlDecl+=i}else{r.sgmlDecl+=i}continue;case D.SGML_DECL_QUOTED:if(i===r.q){r.state=D.SGML_DECL;r.q=""}r.sgmlDecl+=i;continue;case D.DOCTYPE:if(i===">"){r.state=D.TEXT;A(r,"ondoctype",r.doctype);r.doctype=true}else{r.doctype+=i;if(i==="["){r.state=D.DOCTYPE_DTD}else if(C(i)){r.state=D.DOCTYPE_QUOTED;r.q=i}}continue;case D.DOCTYPE_QUOTED:r.doctype+=i;if(i===r.q){r.q="";r.state=D.DOCTYPE}continue;case D.DOCTYPE_DTD:if(i==="]"){r.doctype+=i;r.state=D.DOCTYPE}else if(i==="<"){r.state=D.OPEN_WAKA;r.startTagPosition=r.position}else if(C(i)){r.doctype+=i;r.state=D.DOCTYPE_DTD_QUOTED;r.q=i}else{r.doctype+=i}continue;case D.DOCTYPE_DTD_QUOTED:r.doctype+=i;if(i===r.q){r.state=D.DOCTYPE_DTD;r.q=""}continue;case D.COMMENT:if(i==="-"){r.state=D.COMMENT_ENDING}else{r.comment+=i}continue;case D.COMMENT_ENDING:if(i==="-"){r.state=D.COMMENT_ENDED;r.comment=N(r.opt,r.comment);if(r.comment){A(r,"oncomment",r.comment)}r.comment=""}else{r.comment+="-"+i;r.state=D.COMMENT}continue;case D.COMMENT_ENDED:if(i!==">"){F(r,"Malformed comment");r.comment+="--"+i;r.state=D.COMMENT}else if(r.doctype&&r.doctype!==true){r.state=D.DOCTYPE_DTD}else{r.state=D.TEXT}continue;case D.CDATA:if(i==="]"){r.state=D.CDATA_ENDING}else{r.cdata+=i}continue;case D.CDATA_ENDING:if(i==="]"){r.state=D.CDATA_ENDING_2}else{r.cdata+="]"+i;r.state=D.CDATA}continue;case D.CDATA_ENDING_2:if(i===">"){if(r.cdata){A(r,"oncdata",r.cdata)}A(r,"onclosecdata");r.cdata="";r.state=D.TEXT}else if(i==="]"){r.cdata+="]"}else{r.cdata+="]]"+i;r.state=D.CDATA}continue;case D.PROC_INST:if(i==="?"){r.state=D.PROC_INST_ENDING}else if(T(i)){r.state=D.PROC_INST_BODY}else{r.procInstName+=i}continue;case D.PROC_INST_BODY:if(!r.procInstBody&&T(i)){continue}else if(i==="?"){r.state=D.PROC_INST_ENDING}else{r.procInstBody+=i}continue;case D.PROC_INST_ENDING:if(i===">"){A(r,"onprocessinginstruction",{name:r.procInstName,body:r.procInstBody});r.procInstName=r.procInstBody="";r.state=D.TEXT}else{r.procInstBody+="?"+i;r.state=D.PROC_INST_BODY}continue;case D.OPEN_TAG:if(P(g,i)){r.tagName+=i}else{M(r);if(i===">"){L(r)}else if(i==="/"){r.state=D.OPEN_TAG_SLASH}else{if(!T(i)){F(r,"Invalid character in tag name")}r.state=D.ATTRIB}}continue;case D.OPEN_TAG_SLASH:if(i===">"){L(r,true);$(r)}else{F(r,"Forward-slash in opening tag not followed by >");r.state=D.ATTRIB}continue;case D.ATTRIB:if(T(i)){continue}else if(i===">"){L(r)}else if(i==="/"){r.state=D.OPEN_TAG_SLASH}else if(P(y,i)){r.attribName=i;r.attribValue="";r.state=D.ATTRIB_NAME}else{F(r,"Invalid attribute name")}continue;case D.ATTRIB_NAME:if(i==="="){r.state=D.ATTRIB_VALUE}else if(i===">"){F(r,"Attribute without value");r.attribValue=r.attribName;R(r);L(r)}else if(T(i)){r.state=D.ATTRIB_NAME_SAW_WHITE}else if(P(g,i)){r.attribName+=i}else{F(r,"Invalid attribute name")}continue;case D.ATTRIB_NAME_SAW_WHITE:if(i==="="){r.state=D.ATTRIB_VALUE}else if(T(i)){continue}else{F(r,"Attribute without value");r.tag.attributes[r.attribName]="";r.attribValue="";A(r,"onattribute",{name:r.attribName,value:""});r.attribName="";if(i===">"){L(r)}else if(P(y,i)){r.attribName=i;r.state=D.ATTRIB_NAME}else{F(r,"Invalid attribute name");r.state=D.ATTRIB}}continue;case D.ATTRIB_VALUE:if(T(i)){continue}else if(C(i)){r.q=i;r.state=D.ATTRIB_VALUE_QUOTED}else{if(!r.opt.unquotedAttributeValues){S(r,"Unquoted attribute value")}r.state=D.ATTRIB_VALUE_UNQUOTED;r.attribValue=i}continue;case D.ATTRIB_VALUE_QUOTED:if(i!==r.q){if(i==="&"){r.state=D.ATTRIB_VALUE_ENTITY_Q}else{r.attribValue+=i}continue}R(r);r.q="";r.state=D.ATTRIB_VALUE_CLOSED;continue;case D.ATTRIB_VALUE_CLOSED:if(T(i)){r.state=D.ATTRIB}else if(i===">"){L(r)}else if(i==="/"){r.state=D.OPEN_TAG_SLASH}else if(P(y,i)){F(r,"No whitespace between attributes");r.attribName=i;r.attribValue="";r.state=D.ATTRIB_NAME}else{F(r,"Invalid attribute name")}continue;case D.ATTRIB_VALUE_UNQUOTED:if(!O(i)){if(i==="&"){r.state=D.ATTRIB_VALUE_ENTITY_U}else{r.attribValue+=i}continue}R(r);if(i===">"){L(r)}else{r.state=D.ATTRIB}continue;case D.CLOSE_TAG:if(!r.tagName){if(T(i)){continue}else if(E(y,i)){if(r.script){r.script+="</"+i;r.state=D.SCRIPT}else{F(r,"Invalid tagname in closing tag.")}}else{r.tagName=i}}else if(i===">"){$(r)}else if(P(g,i)){r.tagName+=i}else if(r.script){r.script+="</"+r.tagName;r.tagName="";r.state=D.SCRIPT}else{if(!T(i)){F(r,"Invalid tagname in closing tag")}r.state=D.CLOSE_TAG_SAW_WHITE}continue;case D.CLOSE_TAG_SAW_WHITE:if(T(i)){continue}if(i===">"){$(r)}else{F(r,"Invalid characters in closing tag")}continue;case D.TEXT_ENTITY:case D.ATTRIB_VALUE_ENTITY_Q:case D.ATTRIB_VALUE_ENTITY_U:var u;var l;switch(r.state){case D.TEXT_ENTITY:u=D.TEXT;l="textNode";break;case D.ATTRIB_VALUE_ENTITY_Q:u=D.ATTRIB_VALUE_QUOTED;l="attribValue";break;case D.ATTRIB_VALUE_ENTITY_U:u=D.ATTRIB_VALUE_UNQUOTED;l="attribValue";break}if(i===";"){var c=j(r);if(r.opt.unparsedEntities&&!Object.values(e.XML_ENTITIES).includes(c)){r.entity="";r.state=u;r.write(c)}else{r[l]+=c;r.entity="";r.state=u}}else if(P(r.entity.length?b:v,i)){r.entity+=i}else{F(r,"Invalid character in entity name");r[l]+="&"+r.entity+i;r.entity="";r.state=u}continue;default:{throw new Error(r,"Unknown state: "+r.state)}}}if(r.position>=r.bufferCheckPosition){n(r)}return r}if(!String.fromCodePoint){(function(){var e=String.fromCharCode;var t=Math.floor;var r=function(){var r=16384;var a=[];var n;var i;var o=-1;var s=arguments.length;if(!s){return""}var u="";while(++o<s){var l=Number(arguments[o]);if(!isFinite(l)||l<0||l>1114111||t(l)!==l){throw RangeError("Invalid code point: "+l)}if(l<=65535){a.push(l)}else{l-=65536;n=(l>>10)+55296;i=l%1024+56320;a.push(n,i)}if(o+1===s||a.length>r){u+=e.apply(null,a);a.length=0}}return u};if(Object.defineProperty){Object.defineProperty(String,"fromCodePoint",{value:r,configurable:true,writable:true})}else{String.fromCodePoint=r}})()}})(e)})(ce);return ce}var de;var me;function he(){if(me)return de;me=1;de={isArray:function(e){if(Array.isArray){return Array.isArray(e)}return Object.prototype.toString.call(e)==="[object Array]"}};return de}var ye;var ge;function ve(){if(ge)return ye;ge=1;var e=he().isArray;ye={copyOptions:function(e){var t,r={};for(t in e){if(e.hasOwnProperty(t)){r[t]=e[t]}}return r},ensureFlagExists:function(e,t){if(!(e in t)||typeof t[e]!=="boolean"){t[e]=false}},ensureSpacesExists:function(e){if(!("spaces"in e)||typeof e.spaces!=="number"&&typeof e.spaces!=="string"){e.spaces=0}},ensureAlwaysArrayExists:function(t){if(!("alwaysArray"in t)||typeof t.alwaysArray!=="boolean"&&!e(t.alwaysArray)){t.alwaysArray=false}},ensureKeyExists:function(e,t){if(!(e+"Key"in t)||typeof t[e+"Key"]!=="string"){t[e+"Key"]=t.compact?"_"+e:e}},checkFnExists:function(e,t){return e+"Fn"in t}};return ye}var be;var Te;function Ce(){if(Te)return be;Te=1;var e=pe();var t=ve();var r=he().isArray;var a;var n;function i(e){a=t.copyOptions(e);t.ensureFlagExists("ignoreDeclaration",a);t.ensureFlagExists("ignoreInstruction",a);t.ensureFlagExists("ignoreAttributes",a);t.ensureFlagExists("ignoreText",a);t.ensureFlagExists("ignoreComment",a);t.ensureFlagExists("ignoreCdata",a);t.ensureFlagExists("ignoreDoctype",a);t.ensureFlagExists("compact",a);t.ensureFlagExists("alwaysChildren",a);t.ensureFlagExists("addParent",a);t.ensureFlagExists("trim",a);t.ensureFlagExists("nativeType",a);t.ensureFlagExists("nativeTypeAttributes",a);t.ensureFlagExists("sanitize",a);t.ensureFlagExists("instructionHasAttributes",a);t.ensureFlagExists("captureSpacesBetweenElements",a);t.ensureAlwaysArrayExists(a);t.ensureKeyExists("declaration",a);t.ensureKeyExists("instruction",a);t.ensureKeyExists("attributes",a);t.ensureKeyExists("text",a);t.ensureKeyExists("comment",a);t.ensureKeyExists("cdata",a);t.ensureKeyExists("doctype",a);t.ensureKeyExists("type",a);t.ensureKeyExists("name",a);t.ensureKeyExists("elements",a);t.ensureKeyExists("parent",a);t.checkFnExists("doctype",a);t.checkFnExists("instruction",a);t.checkFnExists("cdata",a);t.checkFnExists("comment",a);t.checkFnExists("text",a);t.checkFnExists("instructionName",a);t.checkFnExists("elementName",a);t.checkFnExists("attributeName",a);t.checkFnExists("attributeValue",a);t.checkFnExists("attributes",a);return a}function o(e){var t=Number(e);if(!isNaN(t)){return t}var r=e.toLowerCase();if(r==="true"){return true}else if(r==="false"){return false}return e}function s(e,t){var i;if(a.compact){if(!n[a[e+"Key"]]&&(r(a.alwaysArray)?a.alwaysArray.indexOf(a[e+"Key"])!==-1:a.alwaysArray)){n[a[e+"Key"]]=[]}if(n[a[e+"Key"]]&&!r(n[a[e+"Key"]])){n[a[e+"Key"]]=[n[a[e+"Key"]]]}if(e+"Fn"in a&&typeof t==="string"){t=a[e+"Fn"](t,n)}if(e==="instruction"&&("instructionFn"in a||"instructionNameFn"in a)){for(i in t){if(t.hasOwnProperty(i)){if("instructionFn"in a){t[i]=a.instructionFn(t[i],i,n)}else{var o=t[i];delete t[i];t[a.instructionNameFn(i,o,n)]=o}}}}if(r(n[a[e+"Key"]])){n[a[e+"Key"]].push(t)}else{n[a[e+"Key"]]=t}}else{if(!n[a.elementsKey]){n[a.elementsKey]=[]}var s={};s[a.typeKey]=e;if(e==="instruction"){for(i in t){if(t.hasOwnProperty(i)){break}}s[a.nameKey]="instructionNameFn"in a?a.instructionNameFn(i,t,n):i;if(a.instructionHasAttributes){s[a.attributesKey]=t[i][a.attributesKey];if("instructionFn"in a){s[a.attributesKey]=a.instructionFn(s[a.attributesKey],i,n)}}else{if("instructionFn"in a){t[i]=a.instructionFn(t[i],i,n)}s[a.instructionKey]=t[i]}}else{if(e+"Fn"in a){t=a[e+"Fn"](t,n)}s[a[e+"Key"]]=t}if(a.addParent){s[a.parentKey]=n}n[a.elementsKey].push(s)}}function u(e){if("attributesFn"in a&&e){e=a.attributesFn(e,n)}if((a.trim||"attributeValueFn"in a||"attributeNameFn"in a||a.nativeTypeAttributes)&&e){var t;for(t in e){if(e.hasOwnProperty(t)){if(a.trim)e[t]=e[t].trim();if(a.nativeTypeAttributes){e[t]=o(e[t])}if("attributeValueFn"in a)e[t]=a.attributeValueFn(e[t],t,n);if("attributeNameFn"in a){var r=e[t];delete e[t];e[a.attributeNameFn(t,e[t],n)]=r}}}}return e}function l(e){var t={};if(e.body&&(e.name.toLowerCase()==="xml"||a.instructionHasAttributes)){var r=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;var i;while((i=r.exec(e.body))!==null){t[i[1]]=i[2]||i[3]||i[4]}t=u(t)}if(e.name.toLowerCase()==="xml"){if(a.ignoreDeclaration){return}n[a.declarationKey]={};if(Object.keys(t).length){n[a.declarationKey][a.attributesKey]=t}if(a.addParent){n[a.declarationKey][a.parentKey]=n}}else{if(a.ignoreInstruction){return}if(a.trim){e.body=e.body.trim()}var o={};if(a.instructionHasAttributes&&Object.keys(t).length){o[e.name]={};o[e.name][a.attributesKey]=t}else{o[e.name]=e.body}s("instruction",o)}}function c(e,t){var i;if(typeof e==="object"){t=e.attributes;e=e.name}t=u(t);if("elementNameFn"in a){e=a.elementNameFn(e,n)}if(a.compact){i={};if(!a.ignoreAttributes&&t&&Object.keys(t).length){i[a.attributesKey]={};var o;for(o in t){if(t.hasOwnProperty(o)){i[a.attributesKey][o]=t[o]}}}if(!(e in n)&&(r(a.alwaysArray)?a.alwaysArray.indexOf(e)!==-1:a.alwaysArray)){n[e]=[]}if(n[e]&&!r(n[e])){n[e]=[n[e]]}if(r(n[e])){n[e].push(i)}else{n[e]=i}}else{if(!n[a.elementsKey]){n[a.elementsKey]=[]}i={};i[a.typeKey]="element";i[a.nameKey]=e;if(!a.ignoreAttributes&&t&&Object.keys(t).length){i[a.attributesKey]=t}if(a.alwaysChildren){i[a.elementsKey]=[]}n[a.elementsKey].push(i)}i[a.parentKey]=n;n=i}function f(e){if(a.ignoreText){return}if(!e.trim()&&!a.captureSpacesBetweenElements){return}if(a.trim){e=e.trim()}if(a.nativeType){e=o(e)}if(a.sanitize){e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}s("text",e)}function p(e){if(a.ignoreComment){return}if(a.trim){e=e.trim()}s("comment",e)}function d(e){var t=n[a.parentKey];if(!a.addParent){delete n[a.parentKey]}n=t}function m(e){if(a.ignoreCdata){return}if(a.trim){e=e.trim()}s("cdata",e)}function h(e){if(a.ignoreDoctype){return}e=e.replace(/^ /,"");if(a.trim){e=e.trim()}s("doctype",e)}function y(e){e.note=e}be=function(t,r){var o=e.parser(true,{});var s={};n=s;a=i(r);{o.opt={strictEntities:true};o.onopentag=c;o.ontext=f;o.oncomment=p;o.onclosetag=d;o.onerror=y;o.oncdata=m;o.ondoctype=h;o.onprocessinginstruction=l}{o.write(t).close()}if(s[a.elementsKey]){var u=s[a.elementsKey];delete s[a.elementsKey];s[a.elementsKey]=u;delete s.text}return s};return be}var Oe;var Pe;function Ee(){if(Pe)return Oe;Pe=1;var e=ve();var t=Ce();function r(t){var r=e.copyOptions(t);e.ensureSpacesExists(r);return r}Oe=function(e,a){var n,i,o,s;n=r(a);i=t(e,n);s="compact"in n&&n.compact?"_parent":"parent";if("addParent"in n&&n.addParent){o=JSON.stringify(i,function(e,t){return e===s?"_":t},n.spaces)}else{o=JSON.stringify(i,null,n.spaces)}return o.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")};return Oe}var De;var _e;function we(){if(_e)return De;_e=1;var e=ve();var t=he().isArray;var r,a;function n(t){var r=e.copyOptions(t);e.ensureFlagExists("ignoreDeclaration",r);e.ensureFlagExists("ignoreInstruction",r);e.ensureFlagExists("ignoreAttributes",r);e.ensureFlagExists("ignoreText",r);e.ensureFlagExists("ignoreComment",r);e.ensureFlagExists("ignoreCdata",r);e.ensureFlagExists("ignoreDoctype",r);e.ensureFlagExists("compact",r);e.ensureFlagExists("indentText",r);e.ensureFlagExists("indentCdata",r);e.ensureFlagExists("indentAttributes",r);e.ensureFlagExists("indentInstruction",r);e.ensureFlagExists("fullTagEmptyElement",r);e.ensureFlagExists("noQuotesForNativeAttributes",r);e.ensureSpacesExists(r);if(typeof r.spaces==="number"){r.spaces=Array(r.spaces+1).join(" ")}e.ensureKeyExists("declaration",r);e.ensureKeyExists("instruction",r);e.ensureKeyExists("attributes",r);e.ensureKeyExists("text",r);e.ensureKeyExists("comment",r);e.ensureKeyExists("cdata",r);e.ensureKeyExists("doctype",r);e.ensureKeyExists("type",r);e.ensureKeyExists("name",r);e.ensureKeyExists("elements",r);e.checkFnExists("doctype",r);e.checkFnExists("instruction",r);e.checkFnExists("cdata",r);e.checkFnExists("comment",r);e.checkFnExists("text",r);e.checkFnExists("instructionName",r);e.checkFnExists("elementName",r);e.checkFnExists("attributeName",r);e.checkFnExists("attributeValue",r);e.checkFnExists("attributes",r);e.checkFnExists("fullTagEmptyElement",r);return r}function i(e,t,r){return(!r&&e.spaces?"\n":"")+Array(t+1).join(e.spaces)}function o(e,t,n){if(t.ignoreAttributes){return""}if("attributesFn"in t){e=t.attributesFn(e,a,r)}var o,s,u,l,c=[];for(o in e){if(e.hasOwnProperty(o)&&e[o]!==null&&e[o]!==undefined){l=t.noQuotesForNativeAttributes&&typeof e[o]!=="string"?"":'"';s=""+e[o];s=s.replace(/"/g,"&quot;");u="attributeNameFn"in t?t.attributeNameFn(o,s,a,r):o;c.push(t.spaces&&t.indentAttributes?i(t,n+1,false):" ");c.push(u+"="+l+("attributeValueFn"in t?t.attributeValueFn(s,o,a,r):s)+l)}}if(e&&Object.keys(e).length&&t.spaces&&t.indentAttributes){c.push(i(t,n,false))}return c.join("")}function s(e,t,n){r=e;a="xml";return t.ignoreDeclaration?"":"<?"+"xml"+o(e[t.attributesKey],t,n)+"?>"}function u(e,t,n){if(t.ignoreInstruction){return""}var i;for(i in e){if(e.hasOwnProperty(i)){break}}var s="instructionNameFn"in t?t.instructionNameFn(i,e[i],a,r):i;if(typeof e[i]==="object"){r=e;a=s;return"<?"+s+o(e[i][t.attributesKey],t,n)+"?>"}else{var u=e[i]?e[i]:"";if("instructionFn"in t)u=t.instructionFn(u,i,a,r);return"<?"+s+(u?" "+u:"")+"?>"}}function l(e,t){return t.ignoreComment?"":"\x3c!--"+("commentFn"in t?t.commentFn(e,a,r):e)+"--\x3e"}function c(e,t){return t.ignoreCdata?"":"<![CDATA["+("cdataFn"in t?t.cdataFn(e,a,r):e.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function f(e,t){return t.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in t?t.doctypeFn(e,a,r):e)+">"}function p(e,t){if(t.ignoreText)return"";e=""+e;e=e.replace(/&amp;/g,"&");e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return"textFn"in t?t.textFn(e,a,r):e}function d(e,t){var r;if(e.elements&&e.elements.length){for(r=0;r<e.elements.length;++r){switch(e.elements[r][t.typeKey]){case"text":if(t.indentText){return true}break;case"cdata":if(t.indentCdata){return true}break;case"instruction":if(t.indentInstruction){return true}break;case"doctype":case"comment":case"element":return true;default:return true}}}return false}function m(e,t,n){r=e;a=e.name;var i=[],s="elementNameFn"in t?t.elementNameFn(e.name,e):e.name;i.push("<"+s);if(e[t.attributesKey]){i.push(o(e[t.attributesKey],t,n))}var u=e[t.elementsKey]&&e[t.elementsKey].length||e[t.attributesKey]&&e[t.attributesKey]["xml:space"]==="preserve";if(!u){if("fullTagEmptyElementFn"in t){u=t.fullTagEmptyElementFn(e.name,e)}else{u=t.fullTagEmptyElement}}if(u){i.push(">");if(e[t.elementsKey]&&e[t.elementsKey].length){i.push(h(e[t.elementsKey],t,n+1));r=e;a=e.name}i.push(t.spaces&&d(e,t)?"\n"+Array(n+1).join(t.spaces):"");i.push("</"+s+">")}else{i.push("/>")}return i.join("")}function h(e,t,r,a){return e.reduce(function(e,n){var o=i(t,r,a&&!e);switch(n.type){case"element":return e+o+m(n,t,r);case"comment":return e+o+l(n[t.commentKey],t);case"doctype":return e+o+f(n[t.doctypeKey],t);case"cdata":return e+(t.indentCdata?o:"")+c(n[t.cdataKey],t);case"text":return e+(t.indentText?o:"")+p(n[t.textKey],t);case"instruction":var s={};s[n[t.nameKey]]=n[t.attributesKey]?n:n[t.instructionKey];return e+(t.indentInstruction?o:"")+u(s,t,r)}},"")}function y(e,t,r){var a;for(a in e){if(e.hasOwnProperty(a)){switch(a){case t.parentKey:case t.attributesKey:break;case t.textKey:if(t.indentText||r){return true}break;case t.cdataKey:if(t.indentCdata||r){return true}break;case t.instructionKey:if(t.indentInstruction||r){return true}break;case t.doctypeKey:case t.commentKey:return true;default:return true}}}return false}function g(e,t,n,s,u){r=e;a=t;var l="elementNameFn"in n?n.elementNameFn(t,e):t;if(typeof e==="undefined"||e===null||e===""){return"fullTagEmptyElementFn"in n&&n.fullTagEmptyElementFn(t,e)||n.fullTagEmptyElement?"<"+l+"></"+l+">":"<"+l+"/>"}var c=[];if(t){c.push("<"+l);if(typeof e!=="object"){c.push(">"+p(e,n)+"</"+l+">");return c.join("")}if(e[n.attributesKey]){c.push(o(e[n.attributesKey],n,s))}var f=y(e,n,true)||e[n.attributesKey]&&e[n.attributesKey]["xml:space"]==="preserve";if(!f){if("fullTagEmptyElementFn"in n){f=n.fullTagEmptyElementFn(t,e)}else{f=n.fullTagEmptyElement}}if(f){c.push(">")}else{c.push("/>");return c.join("")}}c.push(v(e,n,s+1,false));r=e;a=t;if(t){c.push((u?i(n,s,false):"")+"</"+l+">")}return c.join("")}function v(e,r,a,n){var o,d,m,h=[];for(d in e){if(e.hasOwnProperty(d)){m=t(e[d])?e[d]:[e[d]];for(o=0;o<m.length;++o){switch(d){case r.declarationKey:h.push(s(m[o],r,a));break;case r.instructionKey:h.push((r.indentInstruction?i(r,a,n):"")+u(m[o],r,a));break;case r.attributesKey:case r.parentKey:break;case r.textKey:h.push((r.indentText?i(r,a,n):"")+p(m[o],r));break;case r.cdataKey:h.push((r.indentCdata?i(r,a,n):"")+c(m[o],r));break;case r.doctypeKey:h.push(i(r,a,n)+f(m[o],r));break;case r.commentKey:h.push(i(r,a,n)+l(m[o],r));break;default:h.push(i(r,a,n)+g(m[o],d,r,a,y(m[o],r)))}n=n&&!h.length}}}return h.join("")}De=function(e,t){t=n(t);var i=[];r=e;a="_root_";if(t.compact){i.push(v(e,t,0,true))}else{if(e[t.declarationKey]){i.push(s(e[t.declarationKey],t,0))}if(e[t.elementsKey]&&e[t.elementsKey].length){i.push(h(e[t.elementsKey],t,0,!i.length))}}return i.join("")};return De}var Ae;var Ie;function Ne(){if(Ie)return Ae;Ie=1;var e=we();Ae=function(t,r){if(t instanceof Buffer){t=t.toString()}var a=null;if(typeof t==="string"){try{a=JSON.parse(t)}catch(e){throw new Error("The JSON structure is invalid")}}else{a=t}return e(a,r)};return Ae}var Se;var xe;function Fe(){if(xe)return Se;xe=1;var e=Ce();var t=Ee();var r=we();var a=Ne();Se={xml2js:e,xml2json:t,js2xml:r,json2xml:a};return Se}var Me={};var Ve;function Re(){if(Ve)return Me;Ve=1;Object.defineProperty(Me,"__esModule",{value:true});Me.convertEntityTypeAnnotations=Me.convertPropertyAnnotations=Me.convertNavigationPropertyAnnotations=Me.convertEntitySetAnnotations=Me.convertGenericAnnotations=Me.convertV2Annotations=void 0;function e(e,o,s){const u=[];switch(o){case"EntitySet":r(e,u);break;case"EntityType":i(e,u);break;case"NavigationProperty":a(e,s,u);break;case"Property":n(e,s,u);break}t(e,s,u);return u}Me.convertV2Annotations=e;function t(e,t,r){function a(e,t){if(e){r.push(t)}}a(e["sap:schema-version"]!==undefined,{term:"Org.OData.Core.V1.SchemaVersion",value:{type:"String",String:e["sap:schema-version"]}});a(e["sap:searchable"]!==undefined,{term:"Org.OData.Capabilities.V1.SearchRestrictions",record:{propertyValues:[{name:"Searchable",value:{type:"Bool",Bool:e["sap:searchable"]==="true"}}]}});a(e["sap:pageable"]!==undefined,{term:"Org.OData.Capabilities.V1.TopSupported",value:{type:"Bool",Bool:e["sap:pageable"]==="true"}});a(e["sap:pageable"]!==undefined,{term:"Org.OData.Capabilities.V1.SkipSupported",value:{type:"Bool",Bool:e["sap:pageable"]==="true"}});a(e["sap:topable"]!==undefined,{term:"Org.OData.Capabilities.V1.TopSupported",value:{type:"Bool",Bool:e["sap:topable"]==="true"}});a(e["sap:requires-filter"]!==undefined,{term:"Org.OData.Capabilities.V1.FilterRestrictions",record:{propertyValues:[{name:"RequiresFilter",value:{type:"Bool",Bool:e["sap:requires-filter"]==="true"}}]}});a(e["sap:required-in-filter"]!==undefined,{term:"Org.OData.Capabilities.V1.FilterRestrictions",record:{propertyValues:[{name:"RequiredProperties",value:{type:"Collection",Collection:[{type:"PropertyPath",PropertyPath:t}]}}]}});a(e["sap:filter-restricton"]!==undefined,{term:"Org.OData.Capabilities.V1.FilterRestrictions",record:{propertyValues:[{name:"FilterExpressionRestrictions",value:{type:"Collection",Collection:[{type:"Record",propertyValues:[{name:"FilterExpressionRestrictions",value:{type:"String",String:e["sap:filter-restricton"]}},{name:"Property",value:{type:"PropertyPath",PropertyPath:t}}]}]}}]}});a(e["sap:sortable"]==="false",{term:"Org.OData.Capabilities.V1.SortRestrictions",record:{propertyValues:[{name:"NonSortableProperties",value:{type:"PropertyPath",PropertyPath:t}}]}});a(e["sap:visible"]==="false",{term:"com.sap.vocabularies.UI.v1.Hidden",value:{type:"Bool",Bool:true}});a(e["sap:label"]!==undefined,{term:"com.sap.vocabularies.Common.v1.Label",value:{type:"String",String:e["sap:label"]}});a(e["sap:heading"]!==undefined,{term:"com.sap.vocabularies.Common.v1.Heading",value:{type:"String",String:e["sap:heading"]}});a(e["sap:quickinfo"]!==undefined,{term:"com.sap.vocabularies.Common.v1.QuickInfo",value:{type:"String",String:e["sap:quickinfo"]}});a(e["sap:text"]!==undefined,{term:"com.sap.vocabularies.Common.v1.Text",value:{type:"Path",Path:e["sap:text"]}});a(e["sap:unit"]!==undefined,{term:"Org.OData.Measures.V1.Unit",value:{type:"Path",Path:e["sap:unit"]}});a(e["sap:unit"]!==undefined,{term:"Org.OData.Measures.V1.ISOCurrency",value:{type:"Path",Path:e["sap:unit"]}});a(e["sap:precision"]!==undefined,{term:"Org.OData.Measures.V1.Scale",value:{type:"Int",Int:parseInt(e["sap:precision"],10)}});a(e["sap:value-list"]==="fixed-value",{term:"com.sap.vocabularies.Common.v1.ValueListWithFixedValues",value:{type:"Bool",Bool:true}});a(e["sap:display-format"]==="NonNegative",{term:"com.sap.vocabularies.Common.v1.IsDigitSequence",value:{type:"Bool",Bool:true}});a(e["sap:display-format"]==="UpperCase",{term:"com.sap.vocabularies.Common.v1.IsUpperCase",value:{type:"Bool",Bool:true}});if(e["sap:lower-boundary"]||e["sap:upper-boundary"]){const t=[];if(e["sap:lower-boundary"]){t.push({name:"LowerBoundary",value:{type:"PropertyPath",PropertyPath:e["sap:lower-boundary"]}})}if(e["sap:upper-boundary"]){t.push({name:"UpperBoundary",value:{type:"PropertyPath",PropertyPath:e["sap:upper-boundary"]}})}r.push({term:"com.sap.vocabularies.Common.v1.Interval",record:{propertyValues:t}})}a(e["sap:field-control"]!==undefined,{term:"com.sap.vocabularies.Common.v1.FieldControl",value:{type:"Path",Path:e["sap:field-control"]}});a(e["sap:applicable-path"]!==undefined,{term:"Org.OData.Core.V1.OperationAvailable",value:{type:"Path",Path:e["sap:applicable-path"]}});a(e["sap:minoccurs"]!==undefined,{term:"com.sap.vocabularies.Common.v1.MinOccurs",value:{type:"Int",Int:parseInt(e["sap:minoccurs"],10)}});a(e["sap:maxoccurs"]!==undefined,{term:"com.sap.vocabularies.Common.v1.MaxOccurs",value:{type:"Int",Int:parseInt(e["sap:maxoccurs"],10)}});a(e["sap:parameter"]==="mandatory",{term:"com.sap.vocabularies.Common.v1.FieldControl",value:{type:"EnumMember",EnumMember:"Common.FieldControlType/Mandatory"}});a(e["sap:parameter"]==="optional",{term:"com.sap.vocabularies.Common.v1.FieldControl",value:{type:"EnumMember",EnumMember:"Common.FieldControlType/Optional"}});a(e["sap:attribute-for"]!==undefined,{term:"com.sap.vocabularies.Common.v1.Attributes",value:{type:"Collection",Collection:[{type:"PropertyPath",PropertyPath:t}]}})}Me.convertGenericAnnotations=t;function r(e,t){if(e["sap:creatable"]){t.push({term:"Org.OData.Capabilities.V1.InsertRestrictions",record:{propertyValues:[{name:"Insertable",value:{type:"Bool",Bool:e["sap:creatable"]==="true"}}]}})}if(e["sap:updatable"]){t.push({term:"Org.OData.Capabilities.V1.UpdateRestrictions",record:{propertyValues:[{name:"Updatable",value:{type:"Bool",Bool:e["sap:updatable"]==="true"}}]}})}if(e["sap:updatable-path"]){t.push({term:"Org.OData.Capabilities.V1.UpdateRestrictions",record:{propertyValues:[{name:"Updatable",value:{type:"Path",Path:e["sap:updatable-path"]}}]}})}if(e["sap:deletable"]){t.push({term:"Org.OData.Capabilities.V1.DeleteRestrictions",record:{propertyValues:[{name:"Deletable",value:{type:"Bool",Bool:e["sap:updatable"]==="true"}}]}})}if(e["sap:deletable-path"]){t.push({term:"Org.OData.Capabilities.V1.DeleteRestrictions",record:{propertyValues:[{name:"Deletable",value:{type:"Path",Path:e["sap:deletable-path"]}}]}})}}Me.convertEntitySetAnnotations=r;function a(e,t,r){if(e["sap:creatable"]){r.push({term:"Org.OData.Capabilities.V1.NavigationRestrictions",record:{propertyValues:[{name:"RestrictedProperties",value:{type:"Record",Record:{propertyValues:[{name:"InsertRestrictrions",value:{type:"Record",Record:{propertyValues:[{name:"Insertable",value:{type:"Bool",Bool:e["sap:creatable"]==="true"}}]}}}]}}}]}})}if(e["sap:creatable-path"]){r.push({term:"Org.OData.Capabilities.V1.NavigationRestrictions",record:{propertyValues:[{name:"RestrictedProperties",value:{type:"Record",Record:{propertyValues:[{name:"InsertRestrictrions",value:{type:"Record",Record:{propertyValues:[{name:"Insertable",value:{type:"Path",Path:e["sap:creatable-path"]}}]}}}]}}}]}})}if(e["sap:filterable"]==="false"){r.push({term:"Org.OData.Capabilities.V1.NavigationRestrictions",record:{propertyValues:[{name:"RestrictedProperties",value:{type:"Collection",Collection:[{type:"Record",propertyValues:[{name:"NavigationProperty",value:{type:"NavigationPropertyPath",NavigationPropertyPath:t}},{name:"FilterRestrictions",value:{type:"Record",Record:{propertyValues:[{name:"Filterable",value:{type:"Bool",Bool:false}}]}}}]}]}}]}})}}Me.convertNavigationPropertyAnnotations=a;function n(e,t,r){if(e["sap:creatable"]==="true"&&e["sap:updatable"]==="false"){r.push({term:"Org.OData.Core.V1.Immutable",value:{type:"Bool",Bool:true}})}if(e["sap:creatable"]==="false"&&e["sap:updatable"]==="false"){r.push({term:"Org.OData.Core.V1.Computed",value:{type:"Bool",Bool:true}})}if(e["sap:updatable-path"]){r.push({term:"com.sap.vocabularies.Common.v1.FieldControl",value:{type:"Path",Path:e["sap:updatable-path"]}})}if(e["sap:filterable"]==="false"){r.push({term:"Org.OData.Capabilities.V1.FilterRestrictions",record:{propertyValues:[{name:"NonFilterableProperties",value:{type:"Collection",Collection:[{type:"PropertyPath",PropertyPath:t}]}}]}})}}Me.convertPropertyAnnotations=n;function i(e,t){if(e["sap:semantics"]==="aggregate"){t.push({term:"Org.OData.Aggregation.V1.ApplySupported",record:{propertyValues:[{name:"PropertyRestrictions",value:{type:"Collection",Collection:[]}},{name:"GroupableProperties",value:{type:"Collection",Collection:[]}},{name:"AggregatableProperties",value:{type:"Collection",Collection:[]}}]}})}}Me.convertEntityTypeAnnotations=i;return Me}var Le;function $e(){if(Le)return le;Le=1;Object.defineProperty(le,"__esModule",{value:true});le.parse=void 0;const e=Fe();const t=oe();const r=Re();const a=/^Collection\((.+)\)$/;function n(e){return e.Type!==null&&e.Type!==undefined}function i(e){return e.map(e=>e._attributes.Name)}function o(e,t,a,n){return e.reduce((e,i)=>{const o={_type:"Property",name:i._attributes.Name,fullyQualifiedName:`${a}/${i._attributes.Name}`,type:V(i._attributes.Type).type};if(i._attributes.MaxLength){o.maxLength=parseInt(i._attributes.MaxLength,10)}if(i._attributes.Precision){o.precision=parseInt(i._attributes.Precision,10)}if(i._attributes.Scale){o.scale=parseInt(i._attributes.Scale,10)}o.nullable=i._attributes.Nullable!=="false";if(i._attributes.DefaultValue){switch(o.type){case"Edm.Int16":case"Edm.Byte":case"Edm.Int32":case"Edm.Int64":o.defaultValue=parseInt(i._attributes.DefaultValue,10);break;case"Edm.Decimal":case"Edm.Double":o.defaultValue=parseFloat(i._attributes.DefaultValue);break;case"Edm.Boolean":o.defaultValue=i._attributes.DefaultValue==="true";break;default:o.defaultValue=i._attributes.DefaultValue;break}}e.entityProperties.push(o);if(t.indexOf(o.name)!==-1){e.entityKeys.push(o)}const s=(0,r.convertV2Annotations)(i._attributes,"Property",i._attributes.Name);if(s.length>0){n.push(N(o.fullyQualifiedName,s))}return e},{entityProperties:[],entityKeys:[]})}function s(e,t,r){return e.reduce((e,a)=>{e.push({sourceTypeName:t,sourceProperty:a._attributes.Property,targetTypeName:r,targetProperty:a._attributes.ReferencedProperty});return e},[])}function u(e,r){return e.reduce((e,a)=>{let n=r.find(e=>e.role===a.Principal._attributes.Role);let i=r.find(e=>e.role===a.Dependent._attributes.Role);if(n!==undefined&&i!==undefined){let o=(0,t.ensureArray)(a.Principal.PropertyRef);let s=(0,t.ensureArray)(a.Dependent.PropertyRef);if(n.multiplicity!=="1"){i=n;n=r.find(e=>e.role===a.Dependent._attributes.Role);s=o;o=(0,t.ensureArray)(a.Dependent.PropertyRef)}for(const t of o){const r=o.indexOf(t);e.push({sourceTypeName:n.type,sourceProperty:t._attributes.Name,targetTypeName:i.type,targetProperty:s[r]._attributes.Name})}}return e},[])}function l(e,i,o,u){return e.reduce((e,l)=>{const c=l._attributes;if(n(c)){const r=c.Type.match(a);const n=r!==null;const u=R(r?r[1]:c.Type);e.push({_type:"NavigationProperty",name:c.Name,fullyQualifiedName:`${o}/${c.Name}`,partner:c.Partner,containsTarget:c.ContainsTarget==="true",isCollection:n,targetTypeName:u,referentialConstraint:s((0,t.ensureArray)(l.ReferentialConstraint),i._attributes.Name,u)})}else{const{Relationship:t,ToRole:a,FromRole:n}=c;e.push({_type:"NavigationProperty",name:c.Name,fullyQualifiedName:`${o}/${c.Name}`,relationship:t,toRole:a,fromRole:n});const i=(0,r.convertV2Annotations)(c,"NavigationProperty",c.Name);if(i.length>0){u.push(N(`${o}/${c.Name}`,i))}}return e},[])}function c(e,r,a){return e.map(e=>{const n=`${r}.${e._attributes.Name}`;const i=(0,t.ensureArray)(e.End).map(e=>({entitySet:`${r}.${a._attributes.Name}/${e._attributes.EntitySet}`,role:e._attributes.Role}));return{fullyQualifiedName:n,name:e._attributes.Name,association:e._attributes.Association,associationEnd:i}})}function f(e,r){return e.map(e=>{const a=`${r}.${e._attributes.Name}`;const n=(0,t.ensureArray)(e.End).map(e=>({type:e._attributes.Type,role:e._attributes.Role,multiplicity:e._attributes.Multiplicity}));return{fullyQualifiedName:a,name:e._attributes.Name,associationEnd:n,referentialConstraints:u((0,t.ensureArray)(e.ReferentialConstraint),n)}})}function p(e,a,n){return e.reduce((e,s)=>{const u=s.Key?i((0,t.ensureArray)(s.Key.PropertyRef)):[];const c=`${n}.${s._attributes.Name}`;const{entityProperties:f,entityKeys:p}=o((0,t.ensureArray)(s.Property),u,c,a);const d=l((0,t.ensureArray)(s.NavigationProperty),s,c,a);const m={_type:"EntityType",name:s._attributes.Name,fullyQualifiedName:c,keys:p,entityProperties:f,actions:{},navigationProperties:d};const h=(0,r.convertV2Annotations)(s._attributes,"EntityType",s._attributes.Name);if(h.length>0){a.push(N(m.fullyQualifiedName,h))}e.push(m);return e},[])}function d(e,r,a){return e.reduce((e,n)=>{const i=`${a}.${n._attributes.Name}`;const{entityProperties:s}=o((0,t.ensureArray)(n.Property),[],i,r);const u=l((0,t.ensureArray)(n.NavigationProperty),n,i,r);e.push({_type:"ComplexType",name:n._attributes.Name,fullyQualifiedName:i,properties:s,navigationProperties:u});return e},[])}function m(e,t){return e.reduce((e,r)=>{const a=`${t}.${r._attributes.Name}`;e.push({_type:"TypeDefinition",name:r._attributes.Name,fullyQualifiedName:a,underlyingType:r._attributes.UnderlyingType});return e},[])}function h(e,a,n,i){const o=e.map(e=>{const o=Object.fromEntries((0,t.ensureArray)(e.NavigationPropertyBinding).map(e=>[e._attributes.Path,`${a}.${n}/${e._attributes.Target}`]));const s={_type:"EntitySet",name:e._attributes.Name,entityTypeName:R(e._attributes.EntityType),navigationPropertyBinding:o,fullyQualifiedName:`${a}.${n}/${e._attributes.Name}`};const u=(0,r.convertV2Annotations)(e._attributes,"EntitySet",e._attributes.Name);if(u.length>0){i.push(N(s.fullyQualifiedName,u))}return s});return o}function y(e,a,n,i){const o=e.map(e=>{const o=Object.fromEntries((0,t.ensureArray)(e.NavigationPropertyBinding).map(e=>[e._attributes.Path,`${a}.${n}/${e._attributes.Target}`]));const s={_type:"Singleton",name:e._attributes.Name,entityTypeName:R(e._attributes.Type),nullable:e._attributes.Nullable!=="false",navigationPropertyBinding:o,fullyQualifiedName:`${a}.${n}/${e._attributes.Name}`};const u=(0,r.convertV2Annotations)(e._attributes,"Singleton",e._attributes.Name);if(u.length>0){i.push(N(s.fullyQualifiedName,u))}return s});return o}function g(e,r,n){return e.map(e=>{const i=(0,t.ensureArray)(e.Parameter);const o=e._attributes.IsBound==="true";let s;if(n){s=i.map(e=>V(e._attributes.Type).type).join(",")}else{s=o?V(i[0]._attributes.Type).type:""}const u=`${r}.${e._attributes.Name}(${s})`;return{_type:"Action",name:e._attributes.Name,isBound:o,sourceType:o?V(i[0]._attributes.Type).type:"",fullyQualifiedName:u,isFunction:n,parameters:i.map(e=>{const{isCollection:t,type:r}=V(e._attributes.Type);const a={_type:"ActionParameter",fullyQualifiedName:`${u}/${e._attributes.Name}`,name:`${e._attributes.Name}`,type:r,isCollection:t};if(e._attributes.MaxLength){a.maxLength=parseInt(e._attributes.MaxLength,10)}if(e._attributes.Precision){a.precision=parseInt(e._attributes.Precision,10)}if(e._attributes.Scale){a.scale=parseInt(e._attributes.Scale,10)}a.nullable=e._attributes.Nullable!=="false";return a}),returnType:e.ReturnType?V(e.ReturnType._attributes.Type).type:"",returnCollection:e.ReturnType?e.ReturnType._attributes.Type.match(a)!==null:false}})}function v(e,r,n){return e.map(e=>{const i=r.find(t=>t.name===e._attributes.EntitySet);const o=`${n}/${e._attributes.Name}`;return{_type:"Action",name:e._attributes.Name,isBound:false,sourceType:i?i.entityTypeName:"",fullyQualifiedName:o,isFunction:false,parameters:(0,t.ensureArray)(e.Parameter).map(e=>({_type:"ActionParameter",name:e._attributes.Name,fullyQualifiedName:`${o}/${e._attributes.Name}`,type:e._attributes.Type,isCollection:e._attributes.Type.match(/^Collection\(.+\)$/)!==null})),returnType:e._attributes.ReturnType?e._attributes.ReturnType:"",returnCollection:e._attributes.ReturnType?e._attributes.ReturnType.match(a)!==null:false}})}function b(e,t){return e.map(e=>{var r;const a=(r=e._attributes.Function)!==null&&r!==void 0?r:e._attributes.Action;return{_type:"ActionImport",name:R(e._attributes.Name),fullyQualifiedName:`${t}/${e._attributes.Name}`,actionName:R(a)}})}function T(e,r,a){return e.map(e=>{const{Annotation:n,_attributes:i,...o}=e;const s={};if(i){const n=Object.keys(i).find(e=>e!=="Property");s.name=i.Property;const u=`${r}/${s.name}`;if(o&&Object.keys(o).length>0){s.value=w(o,u,a,false)}else if(n){s.value=_({[n]:i[n]},u,a)}if(e.Annotation){const r=I((0,t.ensureArray)(e.Annotation),u,a);if(r&&r.length>0){a.push(N(u,r))}}}return s})}function C(e,r,a){const n=I((0,t.ensureArray)(e.Annotation),r,a);const i={type:e._attributes?R(e._attributes.Type):undefined,propertyValues:T((0,t.ensureArray)(e.PropertyValue),r,a)};if(n&&n.length>0){i.annotations=n}return i}function O(e,t){return e[t]!=null}function P(e,t){switch(t){case"NavigationPropertyPath":return{type:"NavigationPropertyPath",NavigationPropertyPath:e._text};case"PropertyPath":return{type:"PropertyPath",PropertyPath:e._text};case"AnnotationPath":return{type:"AnnotationPath",AnnotationPath:e._text};case"Path":return{type:"Path",Path:e._text}}}function E(e,r,a){if(O(e,"Record")){const n=(0,t.ensureArray)(e.Record).map((e,t)=>C(e,r+"/"+t,a));n.type="Record";return n}else if(O(e,"PropertyPath")){const r=(0,t.ensureArray)(e.PropertyPath).map(e=>P(e,"PropertyPath"));r.type="PropertyPath";return r}else if(O(e,"NavigationPropertyPath")){const r=(0,t.ensureArray)(e.NavigationPropertyPath).map(e=>P(e,"NavigationPropertyPath"));r.type="NavigationPropertyPath";return r}else if(O(e,"String")){const r=(0,t.ensureArray)(e.String).map(e=>({type:"String",String:e._text}));r.type="String";return r}else if(O(e,"AnnotationPath")){const r=(0,t.ensureArray)(e.AnnotationPath).map(e=>P(e,"AnnotationPath"));r.type="AnnotationPath";return r}else if(O(e,"Path")){const r=(0,t.ensureArray)(e.Path).map(e=>P(e,"Path"));r.type="Path";return r}else if(O(e,"If")){const r=(0,t.ensureArray)(e.If).map(e=>e._text);r.type="String";return r}else if(Object.keys(e).length===0){return[]}else{console.error(`Cannot parse ${JSON.stringify(e)}, collection type is not supported`)}return[]}function D(e){const t=Object.keys(e).filter(e=>e!=="_attributes"&&e!=="Annotation");let r=[];t.forEach(t=>{if(Array.isArray(e[t])){r=r.concat(e[t].map(e=>w({[t]:e},"",[],true)))}else{r.push(w({[t]:e[t]},"",[],true))}});return r}function _(e,t,r){const a=Object.keys(e);if(a.length>1){throw new Error(`Too many expressions defined on a single object ${JSON.stringify(e)}`)}const n=a[0];switch(n){case"String":return{type:"String",String:e[n]};case"Bool":return{type:"Bool",Bool:e.Bool==="true"};case"Decimal":return{type:"Decimal",Decimal:parseFloat(e.Decimal)};case"Double":return{type:"Double",Double:parseFloat(e.Double)};case"Date":return{type:"Date",Date:e.Date};case"Int":return{type:"Int",Int:parseInt(e.Int,10)};case"Float":return{type:"Float",Float:parseFloat(e.Float)};case"Path":return{type:"Path",Path:e.Path};case"PropertyPath":return{type:"PropertyPath",PropertyPath:e.PropertyPath};case"AnnotationPath":return{type:"AnnotationPath",AnnotationPath:e.AnnotationPath};case"NavigationPropertyPath":return{type:"NavigationPropertyPath",NavigationPropertyPath:e.NavigationPropertyPath};case"EnumMember":return{type:"EnumMember",EnumMember:e[n]};case"Collection":return{type:"Collection",Collection:E(e.Collection,t,r)};case"Record":return{type:"Record",Record:C(e.Record,t,r)};case"Apply":return{type:"Apply",$Apply:D(e.Apply),$Function:D(e.Function)};case"And":return{type:"And",$And:D(e.And)};case"Or":return{type:"Or",$Or:D(e.Or)};case"Eq":return{type:"Eq",$Eq:D(e.Eq)};case"Gt":return{type:"Gt",$Gt:D(e.Gt)};case"Ge":return{type:"Ge",$Ge:D(e.Ge)};case"Lt":return{type:"Lt",$Lt:D(e.Lt)};case"Le":return{type:"Le",$Le:D(e.Le)};case"If":return{type:"If",$If:D(e.If)};case"Null":return{type:"Null"};default:console.error("Unsupported inline expression type "+n);return{type:"Unknown"}}}function w(e,t,r,a){const n=Object.keys(e);if(n.length>1){throw new Error(`Too many expressions defined on a single object ${JSON.stringify(e)}`)}const i=n[0];switch(i){case"String":if(a){return e[i]._text}return{type:"String",String:e[i]._text};case"LabeledElement":return{type:"LabeledElement",$Name:e.LabeledElement._attributes.Name,$LabeledElement:D(e.LabeledElement)[0]};case"Bool":if(a){return e.Bool._text==="true"}return{type:"Bool",Bool:e.Bool._text==="true"};case"Int":if(a){return parseInt(e.Int._text,10)}return{type:"Int",Int:parseInt(e.Int._text,10)};case"Decimal":if(a){return parseFloat(e.Decimal._text)}return{type:"Decimal",Decimal:parseFloat(e.Decimal._text)};case"Double":if(a){return parseFloat(e.Double._text)}return{type:"Double",Decimal:parseFloat(e.Double._text)};case"Path":return{type:"Path",Path:e.Path._text};case"PropertyPath":return{type:"PropertyPath",PropertyPath:e.PropertyPath._text};case"NavigationPropertyPath":return{type:"NavigationPropertyPath",NavigationPropertyPath:e.NavigationPropertyPath._text};case"AnnotationPath":return{type:"AnnotationPath",AnnotationPath:e.AnnotationPath._text};case"EnumMember":return{type:"EnumMember",EnumMember:e[i]._text};case"Collection":return{type:"Collection",Collection:E(e.Collection,t,r)};case"Record":return{type:"Record",Record:C(e.Record,t,r)};case"Apply":return{type:"Apply",$Apply:D(e.Apply),$Function:e.Apply._attributes.Function};case"Null":if(a){return null}return{type:"Null"};case"And":return{type:"And",$And:D(e.And)};case"Ne":return{type:"Ne",$Ne:D(e.Ne)};case"Not":return{type:"Not",$Not:D(e.Not)[0]};case"Or":return{type:"Or",$Or:D(e.Or)};case"Eq":return{type:"Eq",$Eq:D(e.Eq)};case"If":return{type:"If",$If:D(e.If)};case"Gt":return{type:"Gt",$Gt:D(e.Gt)};case"Ge":return{type:"Ge",$Ge:D(e.Ge)};case"Lt":return{type:"Lt",$Lt:D(e.Lt)};case"Le":return{type:"Le",$Le:D(e.Le)};default:console.error("Unsupported expression type "+i);return{type:"Unknown"}}}function A(e,r,a){const{Term:n,Qualifier:i,...o}=e._attributes;const s={term:R(n),qualifier:i};let u=`${r}@${R(n)}`;if(i!==""&&i!==undefined){u+=`#${i}`}if(o&&Object.keys(o).length>0){s.value=_(o,u,a)}if(e.Annotation){const r=I((0,t.ensureArray)(e.Annotation),u,a);if(r&&r.length>0){s.annotations=r}}const l=Object.keys(e).filter(e=>e!=="_attributes"&&e!=="Annotation");if(O(e,"Record")){s.record=C(e.Record,u,a)}else if(O(e,"Collection")){s.collection=E(e.Collection,u,a)}else if(l.length===1){s.value=w({[l[0]]:e[l[0]]},u,a,false)}else if(l.length>1){console.error(`Cannot parse ${JSON.stringify(e)}, expression type is not supported`)}return s}function I(e,t,r){return e.map(e=>A(e,t,r))}function N(e,t){return{target:e,annotations:t}}function S(e,r){e.filter(e=>e._attributes!==undefined).forEach(e=>{r.push(N(R(e._attributes.Target),I((0,t.ensureArray)(e.Annotation),e._attributes.Target,r)))})}function x(e,r,a){const n=e._attributes.Namespace;const i=[];const o=p((0,t.ensureArray)(e.EntityType),i,n);const s=d((0,t.ensureArray)(e.ComplexType),i,n);const u=m((0,t.ensureArray)(e.TypeDefinition),n);let l=[];let T=[];let C=[];let O={_type:"EntityContainer",fullyQualifiedName:""};let P=[];let E=[];if(e.EntityContainer){l=h((0,t.ensureArray)(e.EntityContainer.EntitySet),n,e.EntityContainer._attributes.Name,i);T=y((0,t.ensureArray)(e.EntityContainer.Singleton),n,e.EntityContainer._attributes.Name,i);C=c((0,t.ensureArray)(e.EntityContainer.AssociationSet),n,e.EntityContainer);O={_type:"EntityContainer",name:e.EntityContainer._attributes.Name,fullyQualifiedName:`${n}.${e.EntityContainer._attributes.Name}`};if(r==="1.0"){P=P.concat(v((0,t.ensureArray)(e.EntityContainer.FunctionImport),l,O.fullyQualifiedName))}else if(r==="4.0"){E=E.concat(b((0,t.ensureArray)(e.EntityContainer.FunctionImport),O.fullyQualifiedName));E=E.concat(b((0,t.ensureArray)(e.EntityContainer.ActionImport),O.fullyQualifiedName))}else{throw new Error(`Unsupported EDMX version: ${r}`)}}if(r==="4.0"){P=P.concat(g((0,t.ensureArray)(e.Action),n,false));P=P.concat(g((0,t.ensureArray)(e.Function),n,true))}const D=f((0,t.ensureArray)(e.Association),n);S((0,t.ensureArray)(e.Annotations),i);const _={};_[a]=i;return{associations:D,associationSets:C,annotations:_,entityContainer:O,namespace:n,entitySets:l,singletons:T,complexTypes:s,typeDefinitions:u,actions:P,actionImports:E,entityTypes:o}}function F(e){return e.reduce((e,r)=>{const a=(0,t.ensureArray)(r["edmx:Include"]);a.forEach(t=>{e.push({uri:r._attributes.Uri,alias:t._attributes.Alias,namespace:t._attributes.Namespace})});return e},[])}let M={};function V(e){const t=e.match(a);const r=t?t[1]:e;const n=R(r);return{type:t?`Collection(${n})`:n,isCollection:t!==null}}function R(e){var t;if(!e){return e}const r=["@","/","("];const a=[];let n=0;for(let i=0,o=true;i<e.length;i++){const s=e[i];if(o&&s==="."){const r=e.substring(n,i);a.push((t=M[r])!==null&&t!==void 0?t:r);n=i;o=false}if(r.includes(s)){a.push(e.substring(n,i+1));n=i+1;o=true}}a.push(e.substring(n));return a.join("")}function L(e){const t=e.reduce((e,t)=>e.concat(t.associations),[]);const r=e.reduce((e,t)=>e.concat(t.associationSets),[]);const a=e.reduce((e,t)=>e.concat(t.entitySets),[]);const n=e.reduce((e,t)=>e.concat(t.singletons),[]);const i=e.reduce((e,t)=>e.concat(t.entityTypes),[]);const o=e.reduce((e,t)=>e.concat(t.actions),[]);const s=e.reduce((e,t)=>e.concat(t.actionImports),[]);const u=e.reduce((e,t)=>e.concat(t.complexTypes),[]);const l=e.reduce((e,t)=>e.concat(t.typeDefinitions),[]);let c={};e.forEach(e=>{c=Object.assign(c,e.annotations)});let f;let p;e.forEach(e=>{if(e.entityContainer&&Object.keys(e.entityContainer).length>0){f=e.entityContainer;p=e.namespace}});a.forEach(e=>{const t=i.find(t=>t.fullyQualifiedName===e.entityTypeName);t===null||t===void 0?void 0:t.navigationProperties.forEach(t=>{const a=t;const n=r.find(e=>e.association===a.relationship);if(n){const r=n.associationEnd.find(t=>t.entitySet!==e.fullyQualifiedName);if(r){e.navigationPropertyBinding[t.name]=r.entitySet}}})});i.forEach(e=>{e.navigationProperties.forEach(r=>{const a=r;const n=t.find(e=>e.fullyQualifiedName===a.relationship);if(n&&n.referentialConstraints&&n.referentialConstraints.length>0){if(n.referentialConstraints[0].sourceTypeName===e.fullyQualifiedName){a.referentialConstraint=n.referentialConstraints}else{a.referentialConstraint=n.referentialConstraints.map(e=>({sourceTypeName:e.targetTypeName,sourceProperty:e.targetProperty,targetTypeName:e.sourceTypeName,targetProperty:e.sourceProperty}))}}})});return{associations:t,associationSets:r,annotations:c,entityContainer:f,namespace:p,entitySets:a,singletons:n,complexTypes:u,typeDefinitions:l,actions:o,actionImports:s,entityTypes:i}}function $(e,t){M=e.reduce((e,t)=>{e[t.alias]=t.namespace;return e},{});t.filter(e=>e._attributes.Alias).forEach(e=>{M[e._attributes.Alias]=e._attributes.Namespace})}function j(r,a="serviceFile"){const n=(0,e.xml2js)(r,{compact:true});const i=n["edmx:Edmx"]._attributes.Version;const o=(0,t.ensureArray)(n["edmx:Edmx"]["edmx:DataServices"].Schema);const s=F((0,t.ensureArray)(n["edmx:Edmx"]["edmx:Reference"]));$(s,o);const u=o.map(e=>x(e,i,a));const l=new t.RawMetadataInstance(a,i,L(u),s);return l}le.parse=j;return le}var je;function Ue(){if(je)return re;je=1;(function(e){Object.defineProperty(e,"__esModule",{value:true});e.parse=e.merge=void 0;var t=ue();Object.defineProperty(e,"merge",{enumerable:true,get:function(){return t.merge}});var r=$e();Object.defineProperty(e,"parse",{enumerable:true,get:function(){return r.parse}})})(re);return re}var ke=Ue();var Be={};var ze={};var Qe={};var Ye;function Ke(){if(Ye)return Qe;Ye=1;Object.defineProperty(Qe,"__esModule",{value:true});Qe.VocabularyReferences=void 0;Qe.VocabularyReferences=[{alias:"Authorization",namespace:"Org.OData.Authorization.V1",uri:"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Authorization.V1.xml"},{alias:"Core",namespace:"Org.OData.Core.V1",uri:"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Core.V1.xml"},{alias:"Capabilities",namespace:"Org.OData.Capabilities.V1",uri:"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Capabilities.V1.xml"},{alias:"Aggregation",namespace:"Org.OData.Aggregation.V1",uri:"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Aggregation.V1.xml"},{alias:"Validation",namespace:"Org.OData.Validation.V1",uri:"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Validation.V1.xml"},{alias:"Measures",namespace:"Org.OData.Measures.V1",uri:"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Measures.V1.xml"},{alias:"Analytics",namespace:"com.sap.vocabularies.Analytics.v1",uri:"https://sap.github.io/odata-vocabularies/vocabularies/Analytics.xml"},{alias:"Common",namespace:"com.sap.vocabularies.Common.v1",uri:"https://sap.github.io/odata-vocabularies/vocabularies/Common.xml"},{alias:"CodeList",namespace:"com.sap.vocabularies.CodeList.v1",uri:"https://sap.github.io/odata-vocabularies/vocabularies/CodeList.xml"},{alias:"Communication",namespace:"com.sap.vocabularies.Communication.v1",uri:"https://sap.github.io/odata-vocabularies/vocabularies/Communication.xml"},{alias:"Hierarchy",namespace:"com.sap.vocabularies.Hierarchy.v1",uri:"https://sap.github.io/odata-vocabularies/vocabularies/Hierarchy.xml"},{alias:"PersonalData",namespace:"com.sap.vocabularies.PersonalData.v1",uri:"https://sap.github.io/odata-vocabularies/vocabularies/PersonalData.xml"},{alias:"Session",namespace:"com.sap.vocabularies.Session.v1",uri:"https://sap.github.io/odata-vocabularies/vocabularies/Session.xml"},{alias:"UI",namespace:"com.sap.vocabularies.UI.v1",uri:"https://sap.github.io/odata-vocabularies/vocabularies/UI.xml"},{alias:"HTML5",namespace:"com.sap.vocabularies.HTML5.v1",uri:"https://sap.github.io/odata-vocabularies/vocabularies/HTML5.xml"}];return Qe}var Ge={};var qe={};var He;function We(){if(He)return qe;He=1;Object.defineProperty(qe,"__esModule",{value:true});qe.EnumIsFlag=void 0;qe.EnumIsFlag={"Authorization.KeyLocation":false,"Core.RevisionKind":false,"Core.DataModificationOperationKind":false,"Core.Permission":true,"Capabilities.ConformanceLevelType":false,"Capabilities.IsolationLevel":true,"Capabilities.NavigationType":false,"Capabilities.SearchExpressions":true,"Capabilities.HttpMethod":true,"Aggregation.RollupType":false,"Common.TextFormatType":false,"Common.FilterExpressionType":false,"Common.FieldControlType":false,"Common.EffectType":true,"Communication.KindType":false,"Communication.ContactInformationType":true,"Communication.PhoneType":true,"Communication.GenderType":false,"UI.VisualizationType":false,"UI.CriticalityType":false,"UI.ImprovementDirectionType":false,"UI.TrendType":false,"UI.ChartType":false,"UI.ChartAxisScaleBehaviorType":false,"UI.ChartAxisAutoScaleDataScopeType":false,"UI.ChartDimensionRoleType":false,"UI.ChartMeasureRoleType":false,"UI.SelectionRangeSignType":false,"UI.SelectionRangeOptionType":false,"UI.TextArrangementType":false,"UI.ImportanceType":false,"UI.CriticalityRepresentationType":false,"UI.OperationGroupingType":false};return qe}var Ze={};var Xe;function Je(){if(Xe)return Ze;Xe=1;(function(e){Object.defineProperty(e,"__esModule",{value:true});e.TermToTypes=void 0;(function(e){e["Org.OData.Authorization.V1.SecuritySchemes"]="Org.OData.Authorization.V1.SecurityScheme";e["Org.OData.Authorization.V1.Authorizations"]="Org.OData.Authorization.V1.Authorization";e["Org.OData.Core.V1.Revisions"]="Org.OData.Core.V1.RevisionType";e["Org.OData.Core.V1.Links"]="Org.OData.Core.V1.Link";e["Org.OData.Core.V1.Example"]="Org.OData.Core.V1.ExampleValue";e["Org.OData.Core.V1.Messages"]="Org.OData.Core.V1.MessageType";e["Org.OData.Core.V1.ValueException"]="Org.OData.Core.V1.ValueExceptionType";e["Org.OData.Core.V1.ResourceException"]="Org.OData.Core.V1.ResourceExceptionType";e["Org.OData.Core.V1.DataModificationException"]="Org.OData.Core.V1.DataModificationExceptionType";e["Org.OData.Core.V1.IsLanguageDependent"]="Org.OData.Core.V1.Tag";e["Org.OData.Core.V1.AppliesViaContainer"]="Org.OData.Core.V1.Tag";e["Org.OData.Core.V1.DereferenceableIDs"]="Org.OData.Core.V1.Tag";e["Org.OData.Core.V1.ConventionalIDs"]="Org.OData.Core.V1.Tag";e["Org.OData.Core.V1.Permissions"]="Org.OData.Core.V1.Permission";e["Org.OData.Core.V1.DefaultNamespace"]="Org.OData.Core.V1.Tag";e["Org.OData.Core.V1.Immutable"]="Org.OData.Core.V1.Tag";e["Org.OData.Core.V1.Computed"]="Org.OData.Core.V1.Tag";e["Org.OData.Core.V1.ComputedDefaultValue"]="Org.OData.Core.V1.Tag";e["Org.OData.Core.V1.IsURL"]="Org.OData.Core.V1.Tag";e["Org.OData.Core.V1.IsMediaType"]="Org.OData.Core.V1.Tag";e["Org.OData.Core.V1.ContentDisposition"]="Org.OData.Core.V1.ContentDispositionType";e["Org.OData.Core.V1.OptimisticConcurrency"]="Edm.PropertyPath";e["Org.OData.Core.V1.AdditionalProperties"]="Org.OData.Core.V1.Tag";e["Org.OData.Core.V1.AutoExpand"]="Org.OData.Core.V1.Tag";e["Org.OData.Core.V1.AutoExpandReferences"]="Org.OData.Core.V1.Tag";e["Org.OData.Core.V1.MayImplement"]="Org.OData.Core.V1.QualifiedTypeName";e["Org.OData.Core.V1.Ordered"]="Org.OData.Core.V1.Tag";e["Org.OData.Core.V1.PositionalInsert"]="Org.OData.Core.V1.Tag";e["Org.OData.Core.V1.AlternateKeys"]="Org.OData.Core.V1.AlternateKey";e["Org.OData.Core.V1.OptionalParameter"]="Org.OData.Core.V1.OptionalParameterType";e["Org.OData.Core.V1.OperationAvailable"]="Edm.Boolean";e["Org.OData.Core.V1.RequiresExplicitBinding"]="Org.OData.Core.V1.Tag";e["Org.OData.Core.V1.ExplicitOperationBindings"]="Org.OData.Core.V1.QualifiedBoundOperationName";e["Org.OData.Core.V1.SymbolicName"]="Org.OData.Core.V1.SimpleIdentifier";e["Org.OData.Core.V1.GeometryFeature"]="Org.OData.Core.V1.GeometryFeatureType";e["Org.OData.Core.V1.AnyStructure"]="Org.OData.Core.V1.Tag";e["Org.OData.Core.V1.IsDelta"]="Org.OData.Core.V1.Tag";e["Org.OData.Capabilities.V1.ConformanceLevel"]="Org.OData.Capabilities.V1.ConformanceLevelType";e["Org.OData.Capabilities.V1.AsynchronousRequestsSupported"]="Org.OData.Core.V1.Tag";e["Org.OData.Capabilities.V1.BatchContinueOnErrorSupported"]="Org.OData.Core.V1.Tag";e["Org.OData.Capabilities.V1.IsolationSupported"]="Org.OData.Capabilities.V1.IsolationLevel";e["Org.OData.Capabilities.V1.CrossJoinSupported"]="Org.OData.Core.V1.Tag";e["Org.OData.Capabilities.V1.CallbackSupported"]="Org.OData.Capabilities.V1.CallbackType";e["Org.OData.Capabilities.V1.ChangeTracking"]="Org.OData.Capabilities.V1.ChangeTrackingType";e["Org.OData.Capabilities.V1.CountRestrictions"]="Org.OData.Capabilities.V1.CountRestrictionsType";e["Org.OData.Capabilities.V1.NavigationRestrictions"]="Org.OData.Capabilities.V1.NavigationRestrictionsType";e["Org.OData.Capabilities.V1.IndexableByKey"]="Org.OData.Core.V1.Tag";e["Org.OData.Capabilities.V1.TopSupported"]="Org.OData.Core.V1.Tag";e["Org.OData.Capabilities.V1.SkipSupported"]="Org.OData.Core.V1.Tag";e["Org.OData.Capabilities.V1.ComputeSupported"]="Org.OData.Core.V1.Tag";e["Org.OData.Capabilities.V1.SelectSupport"]="Org.OData.Capabilities.V1.SelectSupportType";e["Org.OData.Capabilities.V1.BatchSupported"]="Org.OData.Core.V1.Tag";e["Org.OData.Capabilities.V1.BatchSupport"]="Org.OData.Capabilities.V1.BatchSupportType";e["Org.OData.Capabilities.V1.FilterRestrictions"]="Org.OData.Capabilities.V1.FilterRestrictionsType";e["Org.OData.Capabilities.V1.SortRestrictions"]="Org.OData.Capabilities.V1.SortRestrictionsType";e["Org.OData.Capabilities.V1.ExpandRestrictions"]="Org.OData.Capabilities.V1.ExpandRestrictionsType";e["Org.OData.Capabilities.V1.SearchRestrictions"]="Org.OData.Capabilities.V1.SearchRestrictionsType";e["Org.OData.Capabilities.V1.KeyAsSegmentSupported"]="Org.OData.Core.V1.Tag";e["Org.OData.Capabilities.V1.QuerySegmentSupported"]="Org.OData.Core.V1.Tag";e["Org.OData.Capabilities.V1.InsertRestrictions"]="Org.OData.Capabilities.V1.InsertRestrictionsType";e["Org.OData.Capabilities.V1.DeepInsertSupport"]="Org.OData.Capabilities.V1.DeepInsertSupportType";e["Org.OData.Capabilities.V1.UpdateRestrictions"]="Org.OData.Capabilities.V1.UpdateRestrictionsType";e["Org.OData.Capabilities.V1.DeepUpdateSupport"]="Org.OData.Capabilities.V1.DeepUpdateSupportType";e["Org.OData.Capabilities.V1.DeleteRestrictions"]="Org.OData.Capabilities.V1.DeleteRestrictionsType";e["Org.OData.Capabilities.V1.CollectionPropertyRestrictions"]="Org.OData.Capabilities.V1.CollectionPropertyRestrictionsType";e["Org.OData.Capabilities.V1.OperationRestrictions"]="Org.OData.Capabilities.V1.OperationRestrictionsType";e["Org.OData.Capabilities.V1.AnnotationValuesInQuerySupported"]="Org.OData.Core.V1.Tag";e["Org.OData.Capabilities.V1.ModificationQueryOptions"]="Org.OData.Capabilities.V1.ModificationQueryOptionsType";e["Org.OData.Capabilities.V1.ReadRestrictions"]="Org.OData.Capabilities.V1.ReadRestrictionsType";e["Org.OData.Capabilities.V1.CustomHeaders"]="Org.OData.Capabilities.V1.CustomParameter";e["Org.OData.Capabilities.V1.CustomQueryOptions"]="Org.OData.Capabilities.V1.CustomParameter";e["Org.OData.Capabilities.V1.MediaLocationUpdateSupported"]="Org.OData.Core.V1.Tag";e["Org.OData.Capabilities.V1.DefaultCapabilities"]="Org.OData.Capabilities.V1.DefaultCapabilitiesType";e["Org.OData.Aggregation.V1.ApplySupported"]="Org.OData.Aggregation.V1.ApplySupportedType";e["Org.OData.Aggregation.V1.ApplySupportedDefaults"]="Org.OData.Aggregation.V1.ApplySupportedBase";e["Org.OData.Aggregation.V1.Groupable"]="Org.OData.Core.V1.Tag";e["Org.OData.Aggregation.V1.Aggregatable"]="Org.OData.Core.V1.Tag";e["Org.OData.Aggregation.V1.ContextDefiningProperties"]="Edm.PropertyPath";e["Org.OData.Aggregation.V1.LeveledHierarchy"]="Edm.PropertyPath";e["Org.OData.Aggregation.V1.RecursiveHierarchy"]="Org.OData.Aggregation.V1.RecursiveHierarchyType";e["Org.OData.Aggregation.V1.AvailableOnAggregates"]="Org.OData.Aggregation.V1.AvailableOnAggregatesType";e["Org.OData.Validation.V1.Minimum"]="Edm.PrimitiveType";e["Org.OData.Validation.V1.Maximum"]="Edm.PrimitiveType";e["Org.OData.Validation.V1.Exclusive"]="Org.OData.Core.V1.Tag";e["Org.OData.Validation.V1.AllowedValues"]="Org.OData.Validation.V1.AllowedValue";e["Org.OData.Validation.V1.MultipleOf"]="Edm.Decimal";e["Org.OData.Validation.V1.Constraint"]="Org.OData.Validation.V1.ConstraintType";e["Org.OData.Validation.V1.ItemsOf"]="Org.OData.Validation.V1.ItemsOfType";e["Org.OData.Validation.V1.OpenPropertyTypeConstraint"]="Org.OData.Validation.V1.SingleOrCollectionType";e["Org.OData.Validation.V1.DerivedTypeConstraint"]="Org.OData.Validation.V1.SingleOrCollectionType";e["Org.OData.Validation.V1.AllowedTerms"]="Org.OData.Core.V1.QualifiedTermName";e["Org.OData.Validation.V1.ApplicableTerms"]="Org.OData.Core.V1.QualifiedTermName";e["Org.OData.Validation.V1.MaxItems"]="Edm.Int64";e["Org.OData.Validation.V1.MinItems"]="Edm.Int64";e["Org.OData.Measures.V1.Scale"]="Edm.Byte";e["Org.OData.Measures.V1.DurationGranularity"]="Org.OData.Measures.V1.DurationGranularityType";e["com.sap.vocabularies.Analytics.v1.Dimension"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Analytics.v1.Measure"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Analytics.v1.AccumulativeMeasure"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Analytics.v1.RolledUpPropertyCount"]="Edm.Int16";e["com.sap.vocabularies.Analytics.v1.PlanningAction"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Analytics.v1.AggregatedProperties"]="com.sap.vocabularies.Analytics.v1.AggregatedPropertyType";e["com.sap.vocabularies.Analytics.v1.AggregatedProperty"]="com.sap.vocabularies.Analytics.v1.AggregatedPropertyType";e["com.sap.vocabularies.Analytics.v1.AnalyticalContext"]="com.sap.vocabularies.Analytics.v1.AnalyticalContextType";e["com.sap.vocabularies.Common.v1.ServiceVersion"]="Edm.Int32";e["com.sap.vocabularies.Common.v1.ServiceSchemaVersion"]="Edm.Int32";e["com.sap.vocabularies.Common.v1.TextFor"]="Edm.PropertyPath";e["com.sap.vocabularies.Common.v1.IsLanguageIdentifier"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.TextFormat"]="com.sap.vocabularies.Common.v1.TextFormatType";e["com.sap.vocabularies.Common.v1.IsTimezone"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsDigitSequence"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsUpperCase"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsCurrency"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsUnit"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.UnitSpecificScale"]="Edm.PrimitiveType";e["com.sap.vocabularies.Common.v1.UnitSpecificPrecision"]="Edm.PrimitiveType";e["com.sap.vocabularies.Common.v1.SecondaryKey"]="Edm.PropertyPath";e["com.sap.vocabularies.Common.v1.MinOccurs"]="Edm.Int64";e["com.sap.vocabularies.Common.v1.MaxOccurs"]="Edm.Int64";e["com.sap.vocabularies.Common.v1.AssociationEntity"]="Edm.NavigationPropertyPath";e["com.sap.vocabularies.Common.v1.DerivedNavigation"]="Edm.NavigationPropertyPath";e["com.sap.vocabularies.Common.v1.Masked"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.RevealOnDemand"]="Edm.Boolean";e["com.sap.vocabularies.Common.v1.SemanticObjectMapping"]="com.sap.vocabularies.Common.v1.SemanticObjectMappingAbstract";e["com.sap.vocabularies.Common.v1.IsInstanceAnnotation"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.FilterExpressionRestrictions"]="com.sap.vocabularies.Common.v1.FilterExpressionRestrictionType";e["com.sap.vocabularies.Common.v1.FieldControl"]="com.sap.vocabularies.Common.v1.FieldControlType";e["com.sap.vocabularies.Common.v1.Application"]="com.sap.vocabularies.Common.v1.ApplicationType";e["com.sap.vocabularies.Common.v1.Timestamp"]="Edm.DateTimeOffset";e["com.sap.vocabularies.Common.v1.ErrorResolution"]="com.sap.vocabularies.Common.v1.ErrorResolutionType";e["com.sap.vocabularies.Common.v1.Messages"]="Edm.ComplexType";e["com.sap.vocabularies.Common.v1.numericSeverity"]="com.sap.vocabularies.Common.v1.NumericMessageSeverityType";e["com.sap.vocabularies.Common.v1.MaximumNumericMessageSeverity"]="com.sap.vocabularies.Common.v1.NumericMessageSeverityType";e["com.sap.vocabularies.Common.v1.IsActionCritical"]="Edm.Boolean";e["com.sap.vocabularies.Common.v1.Attributes"]="Edm.PropertyPath";e["com.sap.vocabularies.Common.v1.RelatedRecursiveHierarchy"]="Edm.AnnotationPath";e["com.sap.vocabularies.Common.v1.Interval"]="com.sap.vocabularies.Common.v1.IntervalType";e["com.sap.vocabularies.Common.v1.ResultContext"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.SAPObjectNodeType"]="com.sap.vocabularies.Common.v1.SAPObjectNodeTypeType";e["com.sap.vocabularies.Common.v1.Composition"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsNaturalPerson"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.ValueList"]="com.sap.vocabularies.Common.v1.ValueListType";e["com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers"]="Org.OData.Core.V1.SimpleIdentifier";e["com.sap.vocabularies.Common.v1.ValueListWithFixedValues"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.ValueListShowValuesImmediately"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.ValueListMapping"]="com.sap.vocabularies.Common.v1.ValueListMappingType";e["com.sap.vocabularies.Common.v1.IsCalendarYear"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsCalendarHalfyear"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsCalendarQuarter"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsCalendarMonth"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsCalendarWeek"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsDayOfCalendarMonth"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsDayOfCalendarYear"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsCalendarYearHalfyear"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsCalendarDate"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsFiscalYear"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsFiscalPeriod"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsFiscalQuarter"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsFiscalYearQuarter"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsFiscalWeek"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsFiscalYearWeek"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsDayOfFiscalYear"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.IsFiscalYearVariant"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.MutuallyExclusiveTerm"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.DraftRoot"]="com.sap.vocabularies.Common.v1.DraftRootType";e["com.sap.vocabularies.Common.v1.DraftNode"]="com.sap.vocabularies.Common.v1.DraftNodeType";e["com.sap.vocabularies.Common.v1.DraftActivationVia"]="Org.OData.Core.V1.SimpleIdentifier";e["com.sap.vocabularies.Common.v1.EditableFieldFor"]="Edm.PropertyPath";e["com.sap.vocabularies.Common.v1.SemanticKey"]="Edm.PropertyPath";e["com.sap.vocabularies.Common.v1.SideEffects"]="com.sap.vocabularies.Common.v1.SideEffectsType";e["com.sap.vocabularies.Common.v1.DefaultValuesFunction"]="com.sap.vocabularies.Common.v1.QualifiedName";e["com.sap.vocabularies.Common.v1.FilterDefaultValue"]="Edm.PrimitiveType";e["com.sap.vocabularies.Common.v1.FilterDefaultValueHigh"]="Edm.PrimitiveType";e["com.sap.vocabularies.Common.v1.SortOrder"]="com.sap.vocabularies.Common.v1.SortOrderType";e["com.sap.vocabularies.Common.v1.RecursiveHierarchy"]="com.sap.vocabularies.Common.v1.RecursiveHierarchyType";e["com.sap.vocabularies.Common.v1.CreatedAt"]="Edm.DateTimeOffset";e["com.sap.vocabularies.Common.v1.CreatedBy"]="com.sap.vocabularies.Common.v1.UserID";e["com.sap.vocabularies.Common.v1.ChangedAt"]="Edm.DateTimeOffset";e["com.sap.vocabularies.Common.v1.ChangedBy"]="com.sap.vocabularies.Common.v1.UserID";e["com.sap.vocabularies.Common.v1.ApplyMultiUnitBehaviorForSortingAndFiltering"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Common.v1.PrimitivePropertyPath"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.CodeList.v1.CurrencyCodes"]="com.sap.vocabularies.CodeList.v1.CodeListSource";e["com.sap.vocabularies.CodeList.v1.UnitsOfMeasure"]="com.sap.vocabularies.CodeList.v1.CodeListSource";e["com.sap.vocabularies.CodeList.v1.StandardCode"]="Edm.PropertyPath";e["com.sap.vocabularies.CodeList.v1.ExternalCode"]="Edm.PropertyPath";e["com.sap.vocabularies.CodeList.v1.IsConfigurationDeprecationCode"]="Edm.Boolean";e["com.sap.vocabularies.Communication.v1.Contact"]="com.sap.vocabularies.Communication.v1.ContactType";e["com.sap.vocabularies.Communication.v1.Address"]="com.sap.vocabularies.Communication.v1.AddressType";e["com.sap.vocabularies.Communication.v1.IsEmailAddress"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Communication.v1.IsPhoneNumber"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Communication.v1.Event"]="com.sap.vocabularies.Communication.v1.EventData";e["com.sap.vocabularies.Communication.v1.Task"]="com.sap.vocabularies.Communication.v1.TaskData";e["com.sap.vocabularies.Communication.v1.Message"]="com.sap.vocabularies.Communication.v1.MessageData";e["com.sap.vocabularies.Hierarchy.v1.RecursiveHierarchy"]="com.sap.vocabularies.Hierarchy.v1.RecursiveHierarchyType";e["com.sap.vocabularies.Hierarchy.v1.RecursiveHierarchyActions"]="com.sap.vocabularies.Hierarchy.v1.RecursiveHierarchyActionsType";e["com.sap.vocabularies.Hierarchy.v1.MatchCount"]="Edm.Int64";e["com.sap.vocabularies.Hierarchy.v1.RecursiveHierarchySupported"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.PersonalData.v1.EntitySemantics"]="com.sap.vocabularies.PersonalData.v1.EntitySemanticsType";e["com.sap.vocabularies.PersonalData.v1.FieldSemantics"]="com.sap.vocabularies.PersonalData.v1.FieldSemanticsType";e["com.sap.vocabularies.PersonalData.v1.IsPotentiallyPersonal"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.Session.v1.StickySessionSupported"]="com.sap.vocabularies.Session.v1.StickySessionSupportedType";e["com.sap.vocabularies.UI.v1.HeaderInfo"]="com.sap.vocabularies.UI.v1.HeaderInfoType";e["com.sap.vocabularies.UI.v1.Identification"]="com.sap.vocabularies.UI.v1.DataFieldAbstract";e["com.sap.vocabularies.UI.v1.Badge"]="com.sap.vocabularies.UI.v1.BadgeType";e["com.sap.vocabularies.UI.v1.LineItem"]="com.sap.vocabularies.UI.v1.DataFieldAbstract";e["com.sap.vocabularies.UI.v1.StatusInfo"]="com.sap.vocabularies.UI.v1.DataFieldAbstract";e["com.sap.vocabularies.UI.v1.FieldGroup"]="com.sap.vocabularies.UI.v1.FieldGroupType";e["com.sap.vocabularies.UI.v1.ConnectedFields"]="com.sap.vocabularies.UI.v1.ConnectedFieldsType";e["com.sap.vocabularies.UI.v1.GeoLocations"]="com.sap.vocabularies.UI.v1.GeoLocationType";e["com.sap.vocabularies.UI.v1.GeoLocation"]="com.sap.vocabularies.UI.v1.GeoLocationType";e["com.sap.vocabularies.UI.v1.Contacts"]="Edm.AnnotationPath";e["com.sap.vocabularies.UI.v1.MediaResource"]="com.sap.vocabularies.UI.v1.MediaResourceType";e["com.sap.vocabularies.UI.v1.DataPoint"]="com.sap.vocabularies.UI.v1.DataPointType";e["com.sap.vocabularies.UI.v1.KPI"]="com.sap.vocabularies.UI.v1.KPIType";e["com.sap.vocabularies.UI.v1.Chart"]="com.sap.vocabularies.UI.v1.ChartDefinitionType";e["com.sap.vocabularies.UI.v1.ValueCriticality"]="com.sap.vocabularies.UI.v1.ValueCriticalityType";e["com.sap.vocabularies.UI.v1.CriticalityLabels"]="com.sap.vocabularies.UI.v1.CriticalityLabelType";e["com.sap.vocabularies.UI.v1.SelectionFields"]="Edm.PropertyPath";e["com.sap.vocabularies.UI.v1.Facets"]="com.sap.vocabularies.UI.v1.Facet";e["com.sap.vocabularies.UI.v1.HeaderFacets"]="com.sap.vocabularies.UI.v1.Facet";e["com.sap.vocabularies.UI.v1.QuickViewFacets"]="com.sap.vocabularies.UI.v1.Facet";e["com.sap.vocabularies.UI.v1.QuickCreateFacets"]="com.sap.vocabularies.UI.v1.Facet";e["com.sap.vocabularies.UI.v1.FilterFacets"]="com.sap.vocabularies.UI.v1.ReferenceFacet";e["com.sap.vocabularies.UI.v1.OperationParameterFacets"]="com.sap.vocabularies.UI.v1.ReferenceFacet";e["com.sap.vocabularies.UI.v1.SelectionPresentationVariant"]="com.sap.vocabularies.UI.v1.SelectionPresentationVariantType";e["com.sap.vocabularies.UI.v1.PresentationVariant"]="com.sap.vocabularies.UI.v1.PresentationVariantType";e["com.sap.vocabularies.UI.v1.SelectionVariant"]="com.sap.vocabularies.UI.v1.SelectionVariantType";e["com.sap.vocabularies.UI.v1.ThingPerspective"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.UI.v1.IsSummary"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.UI.v1.PartOfPreview"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.UI.v1.Map"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.UI.v1.Gallery"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.UI.v1.IsImageURL"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.UI.v1.IsImage"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.UI.v1.MultiLineText"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.UI.v1.InputMask"]="com.sap.vocabularies.UI.v1.InputMaskType";e["com.sap.vocabularies.UI.v1.TextArrangement"]="com.sap.vocabularies.UI.v1.TextArrangementType";e["com.sap.vocabularies.UI.v1.Note"]="com.sap.vocabularies.UI.v1.NoteType";e["com.sap.vocabularies.UI.v1.Importance"]="com.sap.vocabularies.UI.v1.ImportanceType";e["com.sap.vocabularies.UI.v1.Hidden"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.UI.v1.IsCopyAction"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.UI.v1.IsAIOperation"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.UI.v1.CreateHidden"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.UI.v1.UpdateHidden"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.UI.v1.DeleteHidden"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.UI.v1.HiddenFilter"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.UI.v1.AdaptationHidden"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.UI.v1.DataFieldDefault"]="com.sap.vocabularies.UI.v1.DataFieldAbstract";e["com.sap.vocabularies.UI.v1.Criticality"]="com.sap.vocabularies.UI.v1.CriticalityType";e["com.sap.vocabularies.UI.v1.CriticalityCalculation"]="com.sap.vocabularies.UI.v1.CriticalityCalculationType";e["com.sap.vocabularies.UI.v1.Emphasized"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.UI.v1.OrderBy"]="Edm.PropertyPath";e["com.sap.vocabularies.UI.v1.ParameterDefaultValue"]="Edm.PrimitiveType";e["com.sap.vocabularies.UI.v1.RecommendationState"]="com.sap.vocabularies.UI.v1.RecommendationStateType";e["com.sap.vocabularies.UI.v1.RecommendationList"]="com.sap.vocabularies.UI.v1.RecommendationListType";e["com.sap.vocabularies.UI.v1.Recommendations"]="Edm.ComplexType";e["com.sap.vocabularies.UI.v1.ExcludeFromNavigationContext"]="Org.OData.Core.V1.Tag";e["com.sap.vocabularies.UI.v1.DoNotCheckScaleOfMeasuredQuantity"]="Edm.Boolean";e["com.sap.vocabularies.HTML5.v1.CssDefaults"]="com.sap.vocabularies.HTML5.v1.CssDefaultsType";e["com.sap.vocabularies.HTML5.v1.LinkTarget"]="com.sap.vocabularies.HTML5.v1.LinkTargetType";e["com.sap.vocabularies.HTML5.v1.RowSpanForDuplicateValues"]="Org.OData.Core.V1.Tag"})(e.TermToTypes||(e.TermToTypes={}))})(Ze);return Ze}var et;function tt(){if(et)return Ge;et=1;(function(e){Object.defineProperty(e,"__esModule",{value:true});e.mergeAnnotations=e.addGetByValue=e.createIndexedFind=e.lazy=e.Decimal=e.Double=e.isComplexTypeDefinition=e.unalias=e.alias=e.substringBeforeLast=e.substringBeforeFirst=e.splitAtLast=e.splitAtFirst=e.defaultReferences=e.TermToTypes=e.EnumIsFlag=void 0;var t=We();Object.defineProperty(e,"EnumIsFlag",{enumerable:true,get:function(){return t.EnumIsFlag}});var r=Je();Object.defineProperty(e,"TermToTypes",{enumerable:true,get:function(){return r.TermToTypes}});var a=Ke();Object.defineProperty(e,"defaultReferences",{enumerable:true,get:function(){return a.VocabularyReferences}});function n(e,t){return t<0?[e,""]:[e.substring(0,t),e.substring(t+1)]}function i(e,t){return t<0?e:e.substring(0,t)}function o(e,t){return n(e,e.indexOf(t))}e.splitAtFirst=o;function s(e,t){return n(e,e.lastIndexOf(t))}e.splitAtLast=s;function u(e,t){return i(e,e.indexOf(t))}e.substringBeforeFirst=u;function l(e,t){return i(e,e.lastIndexOf(t))}e.substringBeforeLast=l;function c(e,t){if(!e.reverseReferenceMap){e.reverseReferenceMap=e.reduce((e,t)=>{e[t.namespace]=t;return e},{})}if(!t){return t}const[r,a]=s(t,".");const n=e.reverseReferenceMap[r];if(n){return`${n.alias}.${a}`}else if(t.includes("@")){const[r,a]=o(t,"@");return`${r}@${c(e,a)}`}else{return t}}e.alias=c;function f(e,t,r){var a;const n=t=>{if(!e.referenceMap){e.referenceMap=Object.fromEntries(e.map(e=>[e.alias,e]))}const[a,n]=o(t,".");if(!n||n.includes(".")){return t}const i=a.startsWith("@");const s=i?a.substring(1):a;const u=e.referenceMap[s];if(u){return i?`@${u.namespace}.${n}`:`${u.namespace}.${n}`}return r&&!i?`${r}.${n}`:t};return(a=t===null||t===void 0?void 0:t.split("/").reduce((e,t)=>{const[r,a]=o(t,"(");const i=[n(r)];if(a){const e=a.slice(0,-1);i.push(`(${n(e)})`)}e.push(i.join(""));return e},[]))===null||a===void 0?void 0:a.join("/")}e.unalias=f;function p(e){return!!e&&e._type==="ComplexType"&&!!e.properties}e.isComplexTypeDefinition=p;function d(e){return{isDouble(){return true},valueOf(){return e},toString(){return e.toString()}}}e.Double=d;function m(e){return{isDecimal(){return true},valueOf(){return e},toString(){return e.toString()}}}e.Decimal=m;function h(e,t,r){const a=Symbol("initial");let n=a;Object.defineProperty(e,t,{enumerable:true,get(){if(n===a){n=r()}return n},set(e){n=e}})}e.lazy=h;function y(e,t){const r=new Map;return function a(n){const i=r.get(n);if((i===null||i===void 0?void 0:i[t])===n){return i}return e.find(e=>{if(!(e===null||e===void 0?void 0:e.hasOwnProperty(t))){return false}const a=e[t];r.set(a,e);return a===n})}}e.createIndexedFind=y;function g(e,t){const r=`by_${t}`;if(!e.hasOwnProperty(r)){Object.defineProperty(e,r,{writable:false,value:y(e,t)})}else{throw new Error(`Property '${r}' already exists`)}return e}e.addGetByValue=g;function v(e,...t){return t.reduceRight((t,{name:r,annotationList:a})=>{var n;for(const{target:i,annotations:o}of a){const a=(n=f(e,i))!==null&&n!==void 0?n:i;if(!t[a]){t[a]=[]}const s=o.map(t=>{var n;t.term=(n=f(e,t.term))!==null&&n!==void 0?n:t.term;t.fullyQualifiedName=t.qualifier?`${a}@${t.term}#${t.qualifier}`:`${a}@${t.term}`;t.__source=r;return t}).filter(e=>!t[a].some(t=>t.term===e.term&&t.qualifier===e.qualifier));t[a].push(...s)}return t},{})}e.mergeAnnotations=v})(Ge);return Ge}var rt;function at(){if(rt)return ze;rt=1;Object.defineProperty(ze,"__esModule",{value:true});ze.convert=void 0;const e=Ke();const t=tt();const r=Symbol("Annotation Target");function a(e,t){if(e[e.length-1]!==t){e.push(t)}return e}function n(e,i,o,s){var u,l,c,p,d;if(o===undefined){return{target:undefined,objectPath:[],messages:[]}}if(o.startsWith("/")){o=o.substring(1);i=undefined}const m=o.split("/").reduce((e,r)=>{if(r.includes("@")){const[a,n]=(0,t.splitAtFirst)(r,"@");e.push(a);e.push(`@${n}`)}else{e.push(r)}return e},[]);if(i===undefined){if(m[0].startsWith(`${e.rawSchema.namespace}.`)&&m[0]!==((u=e.getConvertedEntityContainer())===null||u===void 0?void 0:u.fullyQualifiedName)){i=(p=(c=(l=e.getConvertedEntityType(m[0]))!==null&&l!==void 0?l:e.getConvertedComplexType(m[0]))!==null&&c!==void 0?c:e.getConvertedAction(m[0]))!==null&&p!==void 0?p:e.getConvertedAction(`${m[0]}()`);m.shift()}else{i=e.getConvertedEntityContainer()}}else if(i[r]!==undefined){i=i[r]}else if(i._type==="Property"){const r=(0,t.substringBeforeFirst)(i.fullyQualifiedName,"/");i=(d=e.getConvertedEntityType(r))!==null&&d!==void 0?d:e.getConvertedComplexType(r)}const h=m.reduce((i,o)=>{var s,u,l,c,f;const p=e=>{i.messages.push({message:e});i.target=undefined;return i};if(i.target===undefined){return i}i.objectPath=a(i.objectPath,i.target);if(o.startsWith("@")&&o!=="@$ui5.overload"){const[t,r]=e.splitTerm(o);const a=(s=i.target.annotations[t.substring(1)])===null||s===void 0?void 0:s[r];if(a!==undefined){i.target=a;return i}return p(`Annotation '${o.substring(1)}' not found on ${i.target._type} '${i.target.fullyQualifiedName}'`)}if(i.target.$target){let t;if(o==="$AnnotationPath"){t=i.target.value}else if(o==="$Path"){t=i.target.path}if(t!==undefined){const o=n(e,i.target[r],t);o.objectPath.forEach(e=>{if(!i.objectPath.includes(e)){i.objectPath=a(i.objectPath,e)}});i.target=o.target;i.objectPath=a(i.objectPath,i.target);return i}}switch((u=i.target)===null||u===void 0?void 0:u._type){case"Schema":break;case"EntityContainer":{const t=i.target;if(o===""||e.unalias(o)===t.fullyQualifiedName){return i}const r=(c=(l=t.entitySets.by_name(o))!==null&&l!==void 0?l:t.singletons.by_name(o))!==null&&c!==void 0?c:t.actionImports.by_name(o);if(r){i.target=r;return i}}break;case"EntitySet":case"Singleton":{const t=i.target;if(o===""||o==="$Type"){i.target=t.entityType;return i}if(o==="$"){return i}if(o==="$NavigationPropertyBinding"){const e=t.navigationPropertyBinding;i.target=e;return i}const r=n(e,t.entityType,o);i.target=r.target;i.objectPath=r.objectPath.reduce(a,i.objectPath);return i}case"EntityType":{const r=i.target;if(o===""||o==="$Type"){return i}const a=r.entityProperties.by_name(o);if(a){i.target=a;return i}const n=r.navigationProperties.by_name(o);if(n){i.target=n;return i}const s=(0,t.substringBeforeFirst)(e.unalias(o),"(");const u=r.actions[s];if(u){i.target=u;return i}}break;case"ActionImport":{const t=n(e,i.target.action,o);i.target=t.target;i.objectPath=t.objectPath.reduce(a,i.objectPath);return i}case"Action":{const e=i.target;if(o===""){return i}if(o==="@$ui5.overload"||o==="0"){return i}if(o==="$Parameter"&&e.isBound){i.target=e.parameters;return i}const t=(f=e.parameters[o])!==null&&f!==void 0?f:e.parameters.find(e=>e.name===o);if(t){i.target=t;return i}break}case"Property":{const e=i.target;const t=e.targetType;if(t!==undefined){const e=t.properties.by_name(o);if(e){i.target=e;return i}const r=t.navigationProperties.by_name(o);if(r){i.target=r;return i}}}break;case"ActionParameter":const r=i.target.typeReference;if(r!==undefined){const t=n(e,r,o);i.target=t.target;i.objectPath=t.objectPath.reduce(a,i.objectPath);return i}break;case"NavigationProperty":const s=n(e,i.target.targetType,o);i.target=s.target;i.objectPath=s.objectPath.reduce(a,i.objectPath);return i;default:if(o===""){return i}if(i.target[o]){i.target=i.target[o];i.objectPath=a(i.objectPath,i.target);return i}}return p(`Element '${o}' not found at ${i.target._type} '${i.target.fullyQualifiedName}'`)},{target:i,objectPath:[],messages:[]});h.messages.forEach(t=>e.logError(t.message));if(!h.target){if(s){const t=f(e,s,i.fullyQualifiedName);e.logError("Unable to resolve the path expression: "+"\n"+o+"\n"+"\n"+"Hint: Check and correct the path values under the following structure in the metadata (annotation.xml file or CDS annotations for the application): \n\n"+"<Annotation Term = "+s+">"+"\n"+"<Record Type = "+t+">"+"\n"+"<AnnotationPath = "+o+">")}else{e.logError("Unable to resolve the path expression: "+o+"\n"+"\n"+"Hint: Check and correct the path values under the following structure in the metadata (annotation.xml file or CDS annotations for the application): \n\n"+"<Annotation Term = "+m[0]+">"+"\n"+"<PropertyValue  Path= "+m[1]+">")}}return h}function i(e){return e.includes("@")}function o(e,a,i,o,s){const u={type:"PropertyPath",value:a.PropertyPath,fullyQualifiedName:i,[r]:o};(0,t.lazy)(u,"$target",()=>n(e,o,a.PropertyPath,s).target);return u}function s(e,a,i,o,s){const u={type:"AnnotationPath",value:e.unalias(a.AnnotationPath),fullyQualifiedName:i,[r]:o};(0,t.lazy)(u,"$target",()=>n(e,o,u.value,s).target);return u}function u(e,a,i,o,s){var u;const l={type:"NavigationPropertyPath",value:(u=a.NavigationPropertyPath)!==null&&u!==void 0?u:"",fullyQualifiedName:i,[r]:o};(0,t.lazy)(l,"$target",()=>n(e,o,a.NavigationPropertyPath,s).target);return l}function l(e,a,i,o,s){const u={type:"Path",path:a.Path,fullyQualifiedName:i,getValue(){return undefined},[r]:o};(0,t.lazy)(u,"$target",()=>n(e,o,a.Path,s).target);return u}function c(r,a,c,f,p,d,h){if(d===undefined){return undefined}switch(d.type){case"String":return d.String;case"Int":return d.Int;case"Bool":return d.Bool;case"Double":return(0,t.Double)(d.Double);case"Decimal":return(0,t.Decimal)(d.Decimal);case"Date":return d.Date;case"EnumMember":const g=d.EnumMember.split(" ").map(a=>{var n;const i=(n=r.unalias(a))!==null&&n!==void 0?n:"";return(0,t.alias)(e.VocabularyReferences,i)});if(g[0]!==undefined&&t.EnumIsFlag[(0,t.substringBeforeFirst)(g[0],"/")]){return g}return g[0];case"PropertyPath":return o(r,d,h,a,c);case"NavigationPropertyPath":return u(r,d,h,a,c);case"AnnotationPath":return s(r,d,h,a,c);case"Path":{if(i(d.Path)){return n(r,a,d.Path,c).target}else{return l(r,d,h,a,c)}}case"Record":return m(r,c,a,f,p,d.Record,h);case"Collection":return y(r,a,c,f,p,d.Collection,h);case"Apply":case"Null":case"Not":case"Eq":case"Ne":case"Gt":case"Ge":case"Lt":case"Le":case"If":case"And":case"Or":default:return d}}function f(e,r,a,n){let i=t.TermToTypes[r];if(n){r=`${(0,t.substringBeforeLast)(r,".")}.${n}`;i=t.TermToTypes[r]}e.logError(`The type of the record used within the term ${r} was not defined and was inferred as ${i}.\nHint: If possible, try to maintain the Type property for each Record.\n<Annotations Target="${a}">\n\t<Annotation Term="${r}">\n\t\t<Record>...</Record>\n\t</Annotation>\n</Annotations>`);return i}function p(e){return e.hasOwnProperty("Action")&&(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithAction")}function d(e,t,r,a,n){let i;if(!n.type&&t){i=f(e,t,r.fullyQualifiedName,a)}else{i=e.unalias(n.type)}return i}function m(e,a,n,i,o,s,u){const l={$Type:d(e,a,n,i,s),fullyQualifiedName:u,[r]:n,__source:o};for(const r of s.propertyValues){(0,t.lazy)(l,r.name,()=>c(e,n,a,r.name,o,r.value,`${u}/${r.name}`))}(0,t.lazy)(l,"annotations",P(e,s,l));if(p(l)){(0,t.lazy)(l,"ActionTarget",()=>{var t,r;const a=e.unalias((t=l.Action)===null||t===void 0?void 0:t.toString());let i=n.actions[a];if(!i){i=(r=e.getConvertedActionImport(a))===null||r===void 0?void 0:r.action}if(!i){i=e.getConvertedAction(a);if(!(i===null||i===void 0?void 0:i.isBound)){i=undefined}}if(!i){e.logError(`${l.fullyQualifiedName}: Unable to resolve '${l.Action}' ('${a}')`)}return i})}return l}function h(e){let t=e.type;if(t===undefined&&e.length>0){const r=e[0];if(r.hasOwnProperty("PropertyPath")){t="PropertyPath"}else if(r.hasOwnProperty("Path")){t="Path"}else if(r.hasOwnProperty("AnnotationPath")){t="AnnotationPath"}else if(r.hasOwnProperty("NavigationPropertyPath")){t="NavigationPropertyPath"}else if(typeof r==="object"&&(r.hasOwnProperty("type")||r.hasOwnProperty("propertyValues"))){t="Record"}else if(typeof r==="string"){t="String"}}else if(t===undefined){t="EmptyCollection"}return t}function y(e,t,r,a,i,l,c){const f=h(l);switch(f){case"PropertyPath":return l.map((a,n)=>o(e,a,`${c}/${n}`,t,r));case"Path":return l.map(a=>n(e,t,a.Path,r).target);case"AnnotationPath":return l.map((a,n)=>s(e,a,`${c}/${n}`,t,r));case"NavigationPropertyPath":return l.map((a,n)=>u(e,a,`${c}/${n}`,t,r));case"Record":return l.map((n,o)=>m(e,r,t,a,i,n,`${c}/${o}`));case"Apply":case"Null":case"If":case"Eq":case"Ne":case"Lt":case"Gt":case"Le":case"Ge":case"Not":case"And":case"Or":return l.map(e=>e);case"String":return l.map(e=>{if(typeof e==="string"||e===undefined){return e}else{return e.String}});default:if(l.length===0){return[]}throw new Error("Unsupported case")}}function g(e){return!!e.targetTypeName}function v(a,n,i){var o;let s;if(i.record){s=m(a,i.term,n,"",i.__source,i.record,i.fullyQualifiedName)}else if(i.collection===undefined){s=c(a,n,i.term,"",i.__source,(o=i.value)!==null&&o!==void 0?o:{type:"Bool",Bool:true},i.fullyQualifiedName)}else if(i.collection){s=y(a,n,i.term,"",i.__source,i.collection,i.fullyQualifiedName)}else{throw new Error("Unsupported case")}switch(typeof s){case"string":s=new String(s);break;case"boolean":s=new Boolean(s);break;case"number":s=new Number(s);break}s.fullyQualifiedName=i.fullyQualifiedName;s[r]=n;const[u,l]=a.splitTerm(i.term);s.term=a.unalias(`${u}.${l}`,e.VocabularyReferences);s.qualifier=i.qualifier;s.__source=i.__source;try{(0,t.lazy)(s,"annotations",P(a,i,s))}catch(e){}return s}class b{getAnnotations(e){var r;if(this.annotationsByTarget===undefined){const e=Object.keys(this.rawSchema.annotations).map(e=>({name:e,annotationList:this.rawSchema.annotations[e]}));this.annotationsByTarget=(0,t.mergeAnnotations)(this.rawMetadata.references,...e)}return(r=this.annotationsByTarget[e])!==null&&r!==void 0?r:[]}getConvertedEntityContainer(){return this.getConvertedElement(this.rawMetadata.schema.entityContainer.fullyQualifiedName,this.rawMetadata.schema.entityContainer,D)}getConvertedEntitySet(e){return this.convertedOutput.entitySets.by_fullyQualifiedName(e)}getConvertedSingleton(e){return this.convertedOutput.singletons.by_fullyQualifiedName(e)}getConvertedEntityType(e){return this.convertedOutput.entityTypes.by_fullyQualifiedName(e)}getConvertedComplexType(e){return this.convertedOutput.complexTypes.by_fullyQualifiedName(e)}getConvertedTypeDefinition(e){return this.convertedOutput.typeDefinitions.by_fullyQualifiedName(e)}getConvertedActionImport(e){let t=this.convertedOutput.actionImports.by_fullyQualifiedName(e);if(!t){t=this.convertedOutput.actionImports.by_name(e)}return t}getConvertedAction(e){return this.convertedOutput.actions.by_fullyQualifiedName(e)}convert(e,r){if(Array.isArray(e)){return()=>{const a=e.reduce((e,t)=>{const a=this.getConvertedElement(t.fullyQualifiedName,t,r);if(a){e.push(a)}return e},[]);(0,t.addGetByValue)(a,"name");(0,t.addGetByValue)(a,"fullyQualifiedName");return a}}else{return()=>this.getConvertedElement(e.fullyQualifiedName,e,r)}}constructor(e,t){this.convertedElements=new Map;this.rawMetadata=e;this.rawSchema=e.schema;this.convertedOutput=t}getConvertedElement(e,t,r){let a=this.convertedElements.get(e);if(a===undefined){const n=typeof t==="function"?t.apply(undefined,[e]):t;if(n!==undefined){a=r.apply(undefined,[this,n]);this.convertedElements.set(e,a)}}return a}logError(e){this.convertedOutput.diagnostics.push({message:e})}splitTerm(r){const a=(0,t.alias)(e.VocabularyReferences,r);return(0,t.splitAtLast)(a,".")}unalias(e,r=this.rawMetadata.references){var a;return(a=(0,t.unalias)(r,e,this.rawSchema.namespace))!==null&&a!==void 0?a:""}}function T(e,t){return()=>{let r=e.getConvertedEntityType(t);if(!r){e.logError(`EntityType '${t}' not found`);r={}}return r}}function C(e,r){return()=>Object.keys(r).reduce((a,n)=>{const i=r[n];(0,t.lazy)(a,n,()=>{var t;return(t=e.getConvertedEntitySet(i))!==null&&t!==void 0?t:e.getConvertedSingleton(i)});return a},{})}function O(e,t){const r=t.annotations;return()=>E(e,t,r!==null&&r!==void 0?r:e.getAnnotations(t.fullyQualifiedName))}function P(e,t,a){return()=>{const n=a.fullyQualifiedName;let i;if(t.annotations&&t.annotations.length>0){i=t.annotations}else{i=e.getAnnotations(n)}i===null||i===void 0?void 0:i.forEach(e=>{e.target=n;e.__source=a.__source;e[r]=a[r];e.fullyQualifiedName=`${n}@${e.term}`});return E(e,a,i!==null&&i!==void 0?i:[])}}function E(e,r,a){return a.reduce((a,n)=>{const[i,o]=e.splitTerm(n.term);const s=`${o}${n.qualifier?"#"+n.qualifier:""}`;if(a[i]===undefined){a[i]={}}if(!a[i].hasOwnProperty(s)){(0,t.lazy)(a[i],s,()=>e.getConvertedElement(n.fullyQualifiedName,n,(e,t)=>v(e,r,t)))}return a},{})}function D(e,r){const a=r;(0,t.lazy)(a,"annotations",O(e,r));(0,t.lazy)(a,"entitySets",e.convert(e.rawSchema.entitySets,w));(0,t.lazy)(a,"singletons",e.convert(e.rawSchema.singletons,_));(0,t.lazy)(a,"actionImports",e.convert(e.rawSchema.actionImports,S));return a}function _(e,r){const a=r;(0,t.lazy)(a,"entityType",T(e,r.entityTypeName));(0,t.lazy)(a,"annotations",O(e,a));const n=r.navigationPropertyBinding;(0,t.lazy)(a,"navigationPropertyBinding",C(e,n));return a}function w(e,r){const a=r;(0,t.lazy)(a,"entityType",T(e,r.entityTypeName));(0,t.lazy)(a,"annotations",O(e,a));const n=r.navigationPropertyBinding;(0,t.lazy)(a,"navigationPropertyBinding",C(e,n));return a}function A(e,r){const a=r;r.keys.forEach(e=>{e.isKey=true});(0,t.lazy)(a,"annotations",O(e,r));(0,t.lazy)(a,"keys",e.convert(r.keys,I));(0,t.lazy)(a,"entityProperties",e.convert(r.entityProperties,I));(0,t.lazy)(a,"navigationProperties",e.convert(r.navigationProperties,N));(0,t.lazy)(a,"actions",()=>e.rawSchema.actions.filter(e=>e.isBound&&(e.sourceType===r.fullyQualifiedName||e.sourceType===`Collection(${r.fullyQualifiedName})`)).reduce((t,r)=>{const a=`${e.rawSchema.namespace}.${r.name}`;t[a]=e.getConvertedAction(r.fullyQualifiedName);return t},{}));a.resolvePath=(t,a)=>{const i=n(e,r,t);if(a){return{target:i.target,visitedObjects:i.objectPath,messages:i.messages}}else{return i.target}};return a}function I(e,r){const a=r;(0,t.lazy)(a,"annotations",O(e,r));(0,t.lazy)(a,"targetType",()=>{var t;const a=r.type;const n=a.startsWith("Collection")?a.substring(11,a.length-1):a;return(t=e.getConvertedComplexType(n))!==null&&t!==void 0?t:e.getConvertedTypeDefinition(n)});return a}function N(e,r){var a,n,i;const o=r;o.referentialConstraint=(a=o.referentialConstraint)!==null&&a!==void 0?a:[];if(!g(r)){const t=(n=e.rawSchema.associations.find(e=>e.fullyQualifiedName===r.relationship))===null||n===void 0?void 0:n.associationEnd.find(e=>e.role===r.toRole);o.isCollection=(t===null||t===void 0?void 0:t.multiplicity)==="*";o.targetTypeName=(i=t===null||t===void 0?void 0:t.type)!==null&&i!==void 0?i:""}(0,t.lazy)(o,"targetType",T(e,r.targetTypeName));(0,t.lazy)(o,"annotations",O(e,r));return o}function S(e,r){const a=r;(0,t.lazy)(a,"annotations",O(e,r));(0,t.lazy)(a,"action",()=>{const t=e.rawSchema.actions.filter(e=>!e.isBound&&e.fullyQualifiedName.startsWith(r.actionName));if(t.length>1){e.logError(`Ambiguous reference in action import: ${r.fullyQualifiedName}`)}return e.getConvertedAction(t[0].fullyQualifiedName)});return a}function x(e,r){const a=r;if(a.sourceType){(0,t.lazy)(a,"sourceEntityType",T(e,r.sourceType))}if(a.returnType){(0,t.lazy)(a,"returnEntityType",T(e,r.returnType))}(0,t.lazy)(a,"parameters",e.convert(r.parameters,F));(0,t.lazy)(a,"annotations",()=>{const a=(0,t.substringBeforeFirst)(r.fullyQualifiedName,"(");const n=r.fullyQualifiedName;const i=e.getAnnotations(n);const o=e.getAnnotations(a);for(const e of o){if(!i.some(t=>t.term===e.term&&t.qualifier===e.qualifier)){i.push(e)}}return E(e,r,i)});return a}function F(e,r){const a=r;(0,t.lazy)(a,"typeReference",()=>{var t,a;return(a=(t=e.getConvertedEntityType(r.type))!==null&&t!==void 0?t:e.getConvertedComplexType(r.type))!==null&&a!==void 0?a:e.getConvertedTypeDefinition(r.type)});(0,t.lazy)(a,"annotations",()=>{const t=r.fullyQualifiedName.substring(0,r.fullyQualifiedName.indexOf("("))+r.fullyQualifiedName.substring(r.fullyQualifiedName.lastIndexOf(")")+1);const a=r.fullyQualifiedName;const n=e.getAnnotations(a);const i=e.getAnnotations(t);for(const e of i){if(!n.some(t=>t.term===e.term&&t.qualifier===e.qualifier)){n.push(e)}}return E(e,r,n)});return a}function M(e,r){const a=r;(0,t.lazy)(a,"properties",e.convert(r.properties,I));(0,t.lazy)(a,"navigationProperties",e.convert(r.navigationProperties,N));(0,t.lazy)(a,"annotations",O(e,r));return a}function V(e,r){const a=r;(0,t.lazy)(a,"annotations",O(e,r));return a}function R(r){const i={version:r.version,namespace:r.schema.namespace,annotations:r.schema.annotations,references:e.VocabularyReferences,diagnostics:[]};const o=new b(r,i);(0,t.lazy)(i,"entityContainer",o.convert(o.rawSchema.entityContainer,D));(0,t.lazy)(i,"entitySets",o.convert(o.rawSchema.entitySets,w));(0,t.lazy)(i,"singletons",o.convert(o.rawSchema.singletons,_));(0,t.lazy)(i,"entityTypes",o.convert(o.rawSchema.entityTypes,A));(0,t.lazy)(i,"actions",o.convert(o.rawSchema.actions,x));(0,t.lazy)(i,"complexTypes",o.convert(o.rawSchema.complexTypes,M));(0,t.lazy)(i,"actionImports",o.convert(o.rawSchema.actionImports,S));(0,t.lazy)(i,"typeDefinitions",o.convert(o.rawSchema.typeDefinitions,V));i.resolvePath=function e(t){const r=n(o,undefined,t);if(r.target){a(r.objectPath,r.target)}return r};return i}ze.convert=R;return ze}var nt={};var it;function ot(){if(it)return nt;it=1;Object.defineProperty(nt,"__esModule",{value:true});nt.revertTermToGenericType=void 0;const e=tt();function t(t,r){var a,n,o,s,u,l,c;let f;if(Array.isArray(r)){const a=r[0];let n=false;if(a&&typeof a==="string"){const r=a.valueOf().split(".");if(r.length>1&&t.find(e=>e.alias===r[0])){n=e.EnumIsFlag[(0,e.substringBeforeFirst)(a,"/")]}}if(n){f={type:"EnumMember",EnumMember:r.map(e=>e.valueOf()).join(" ")}}else{f={type:"Collection",Collection:r.map(e=>i(t,e))}}}else if((a=r.isDecimal)===null||a===void 0?void 0:a.call(r)){f={type:"Decimal",Decimal:r.valueOf()}}else if((n=r.isDouble)===null||n===void 0?void 0:n.call(r)){f={type:"Double",Double:r.valueOf()}}else if((o=r.isString)===null||o===void 0?void 0:o.call(r)){const e=r.valueOf().split(".");if(e.length>1&&t.find(t=>t.alias===e[0])){f={type:"EnumMember",EnumMember:r.valueOf()}}else{f={type:"String",String:r.valueOf()}}}else if((s=r.isInt)===null||s===void 0?void 0:s.call(r)){f={type:"Int",Int:r.valueOf()}}else if((u=r.isFloat)===null||u===void 0?void 0:u.call(r)){f={type:"Float",Float:r.valueOf()}}else if((l=r.isDate)===null||l===void 0?void 0:l.call(r)){f={type:"Date",Date:r.valueOf()}}else if((c=r.isBoolean)===null||c===void 0?void 0:c.call(r)){f={type:"Bool",Bool:r.valueOf()}}else if(r.type==="Path"){f={type:"Path",Path:r.path}}else if(r.type==="AnnotationPath"){f={type:"AnnotationPath",AnnotationPath:r.value}}else if(r.type==="Apply"){f={type:"Apply",$Apply:r.$Apply,$Function:r.$Function}}else if(r.type==="Null"){f={type:"Null"}}else if(r.type==="PropertyPath"){f={type:"PropertyPath",PropertyPath:r.value}}else if(r.type==="NavigationPropertyPath"){f={type:"NavigationPropertyPath",NavigationPropertyPath:r.value}}else if(Object.prototype.hasOwnProperty.call(r,"$Type")){f={type:"Record",Record:i(t,r)}}return f}function r(e,r){let a;if(r.type==="Constant"){r=r.value}const n=r===null||r===void 0?void 0:r.constructor.name;switch(n){case"String":case"string":const n=r.toString().split(".");if(n.length>1&&e.find(e=>e.alias===n[0])){a={type:"EnumMember",EnumMember:r.toString()}}else{a={type:"String",String:r.toString()}}break;case"Boolean":case"boolean":a={type:"Bool",Bool:r.valueOf()};break;case"Number":case"number":if(r.toString()===r.toFixed()){a={type:"Int",Int:r.valueOf()}}else{a={type:"Decimal",Decimal:r.valueOf()}}break;case"object":default:a=t(e,r);break}return a}const a=["$Type","term","__source","qualifier","ActionTarget","fullyQualifiedName","annotations"];function n(t,r,a){Object.keys(r).filter(e=>e!=="_annotations").forEach(n=>{Object.keys(r[n]).forEach(i=>{const s=o(t,r[n][i]);if(!s.term){const r=(0,e.unalias)(t,`${n}.${i}`);if(r){const e=r.split("#");s.term=e[0];if(e.length>1){s.qualifier=e[1]}}}a.push(s)})})}function i(e,t){if(typeof t==="string"){return{type:"String",String:t}}else if(typeof t==="object"){if(t.hasOwnProperty("$Type")){const i={type:t.$Type,propertyValues:[]};Object.keys(t).forEach(o=>{if(a.indexOf(o)===-1){const a=t[o];i.propertyValues.push({name:o,value:r(e,a)})}else if(o==="annotations"&&Object.keys(t[o]).length>0){i.annotations=[];n(e,t[o],i.annotations)}});return i}else if(t.type==="PropertyPath"){return{type:"PropertyPath",PropertyPath:t.value}}else if(t.type==="AnnotationPath"){return{type:"AnnotationPath",AnnotationPath:t.value}}else if(t.type==="NavigationPropertyPath"){return{type:"NavigationPropertyPath",NavigationPropertyPath:t.value}}else if(t.type==="Constant"){return t.value}}return undefined}function o(e,t){const a={term:t.term,qualifier:t.qualifier};if(Array.isArray(t)){if(t.hasOwnProperty("annotations")&&Object.keys(t.annotations).length>0){a.annotations=[];n(e,t.annotations,a.annotations)}return{...a,collection:t.map(t=>i(e,t))}}else if(t.hasOwnProperty("$Type")){return{...a,record:i(e,t)}}else{return{...a,value:r(e,t)}}}nt.revertTermToGenericType=o;return nt}var st;function ut(){if(st)return Be;st=1;(function(e){var t=Be&&Be.__createBinding||(Object.create?function(e,t,r,a){if(a===undefined)a=r;var n=Object.getOwnPropertyDescriptor(t,r);if(!n||("get"in n?!t.__esModule:n.writable||n.configurable)){n={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,a,n)}:function(e,t,r,a){if(a===undefined)a=r;e[a]=t[r]});var r=Be&&Be.__exportStar||function(e,r){for(var a in e)if(a!=="default"&&!Object.prototype.hasOwnProperty.call(r,a))t(r,e,a)};Object.defineProperty(e,"__esModule",{value:true});r(at(),e);r(tt(),e);r(ot(),e)})(Be);return Be}var lt=ut();const ct=(e,t,r)=>{const a=[];const n=e["sap.app"]?.["dataSources"]??{};const i=Object.keys(n).find(e=>n[e].type!=="ODataAnnotation"&&n[e].uri);if(!i){throw new Error(`No valid OData service found in the manifest data sources, Data sources content: ${JSON.stringify(n,null,2)}`)}try{a.push(ke.parse(t,i));for(const e of r){a.push(ke.parse(e))}}catch(e){throw new Error(`Failed to parse metadata: ${e}`)}return lt.convert(ke.merge(...a))};e.TargetCardType=void 0;(function(e){e["AdaptiveCard"]="adaptive-card";e["UI5IntegrationCard"]="ui5-integration-card"})(e.TargetCardType||(e.TargetCardType={}));e.CardType=void 0;(function(e){e["Object"]="object";e["List"]="list";e["Table"]="table"})(e.CardType||(e.CardType={}));const ft="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBoZWlnaHQ9IjMwIiB3aWR0aD0iNjAuOTM3NSIgdmlld0JveD0iMCAwIDQxMi4zOCAyMDQiPjxkZWZzPjxzdHlsZT4uY2xzLTEsLmNscy0ye2ZpbGwtcnVsZTpldmVub2RkO30uY2xzLTF7ZmlsbDp1cmwoI2xpbmVhci1ncmFkaWVudCk7fS5jbHMtMntmaWxsOiNmZmY7fTwvc3R5bGU+PGxpbmVhckdyYWRpZW50IGlkPSJsaW5lYXItZ3JhZGllbnQiIHgxPSIyMDYuMTkiIHgyPSIyMDYuMTkiIHkyPSIyMDQiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiMwMGI4ZjEiLz48c3RvcCBvZmZzZXQ9IjAuMDIiIHN0b3AtY29sb3I9IiMwMWI2ZjAiLz48c3RvcCBvZmZzZXQ9IjAuMzEiIHN0b3AtY29sb3I9IiMwZDkwZDkiLz48c3RvcCBvZmZzZXQ9IjAuNTgiIHN0b3AtY29sb3I9IiMxNzc1YzgiLz48c3RvcCBvZmZzZXQ9IjAuODIiIHN0b3AtY29sb3I9IiMxYzY1YmYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMxZTVmYmIiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cG9seWxpbmUgY2xhc3M9ImNscy0xIiBwb2ludHM9IjAgMjA0IDIwOC40MSAyMDQgNDEyLjM4IDAgMCAwIDAgMjA0Ii8+PHBhdGggY2xhc3M9ImNscy0yIiBkPSJNMjQ0LjczLDM4LjM2bC00MC42LDB2OTYuNTJMMTY4LjY3LDM4LjMzSDEzMy41MWwtMzAuMjcsODAuNzJDMTAwLDk4LjcsNzksOTEuNjcsNjIuNCw4Ni40LDUxLjQ2LDgyLjg5LDM5Ljg1LDc3LjcyLDQwLDcyYy4wOS00LjY4LDYuMjMtOSwxOC4zOC04LjM4LDguMTcuNDMsMTUuMzcsMS4wOSwyOS43MSw4bDE0LjEtMjQuNTVDODkuMDYsNDAuNDIsNzEsMzYuMjEsNTYuMTcsMzYuMTloLS4wOWMtMTcuMjgsMC0zMS42OCw1LjYtNDAuNiwxNC44M0EzNC4yMywzNC4yMywwLDAsMCw1Ljc3LDc0LjdDNS41NCw4Ny4xNSwxMC4xMSw5NiwxOS43MSwxMDNjOC4xLDUuOTQsMTguNDYsOS43OSwyNy42LDEyLjYyLDExLjI3LDMuNDksMjAuNDcsNi41MywyMC4zNiwxM0E5LjU3LDkuNTcsMCwwLDEsNjUsMTM1Yy0yLjgxLDIuOS03LjEzLDQtMTMuMDksNC4xLTExLjQ5LjI0LTIwLTEuNTYtMzMuNjEtOS41OUw1Ljc3LDE1NC40MmE5My43Nyw5My43NywwLDAsMCw0NiwxMi4yMmwyLjExLDBjMTQuMjQtLjI1LDI1Ljc0LTQuMzEsMzQuOTItMTEuNzEuNTMtLjQxLDEtLjg0LDEuNDktMS4yOEw4Ni4xNywxNjQuNUgxMjNsNi4xOS0xOC44MmE2Ny40Niw2Ny40NiwwLDAsMCwyMS42OCwzLjQzLDY4LjMzLDY4LjMzLDAsMCwwLDIxLjE2LTMuMjVsNiwxOC42NGg2MC4xNHYtMzloMTMuMTFjMzEuNzEsMCw1MC40Ni0xNi4xNSw1MC40Ni00My4yQzMwMS43NCw1Mi4xOSwyODMuNTIsMzguMzYsMjQ0LjczLDM4LjM2Wk0xNTAuOTEsMTIxYTM2LjkzLDM2LjkzLDAsMCwxLTEzLTIuMjhsMTIuODctNDAuNTlIMTUxbDEyLjY1LDQwLjcxQTM4LjUsMzguNSwwLDAsMSwxNTAuOTEsMTIxWm05Ni4yLTIzLjMzaC04Ljk0VjY0LjkxaDguOTRjMTEuOTMsMCwyMS40NCw0LDIxLjQ0LDE2LjE0LDAsMTIuNi05LjUxLDE2LjU3LTIxLjQ0LDE2LjU3Ii8+PC9zdmc+Cg==";const pt=(t,r,a)=>{let n;if(a){n=a===e.TargetCardType.UI5IntegrationCard?`{{parameters.${t}}}`:`{{${t}}}`}else{n=t}return r==="Edm.String"?`'${n}'`:`${n}`};const dt=(e,t,r,a)=>{const n=e.objectKeys;if(n.length===1&&e.fe==="v4"){const e=pt(n[0].name,n[0].type,a);return`${r}(${e})?${t}`}const i=n.map(e=>`${e.name}=${pt(e.name,e.type,a)}`).join(",");return`${r}(${i})?${t}`};function mt(e){return Object.entries(e).map(([e,t])=>`${e}=${t}`).join("&")}const ht=(t,r,a,{query:n})=>{if(!t.objectEntitySet||!t.objectKeys){throw new Error("EntitySet or Keys not found")}const i=`${t.servicePath}${t.objectEntitySet}`;if(r===e.CardType.Object){return dt(t,mt(n),i,a)}else{n["$top"]="6";if(t.fe==="v4"){n["$count"]="true"}else{n["$inlinecount"]="allpages"}return`${i}?${mt(n)}`}};const yt=e=>{const t=e.getMetaPath()?.getClosestEntityType();if(!t||!t.annotations?.UI){return{actionsMetadata:[],functionImports:[],mainService:[]}}const r=t.annotations.UI.LineItem?.filter(e=>e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction");const a=t.annotations.UI.Identification?.filter(e=>e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction");const n=e=>{const t=e.annotations?.Core?.OperationAvailable;return{operationAvailable:t?.type==="Path"?t?.path:t?.Bool}};const i=e=>({name:e.name,type:e.type,fullyQualifiedName:e.fullyQualifiedName,keys:e.typeReference?.keys?.map(e=>({name:e.name,type:e.type,nullable:e.nullable}))||[]});const o=e=>({action:e.Action,label:e.Label,id:e.fullyQualifiedName,enableConfig:e.ActionTarget?n(e.ActionTarget):{},parameters:e.ActionTarget?.parameters.map(i)??[]});const s=r?.map(o)??[];const u=a?.map(o)??[];let l=[...s,...u];l=gt(l);const c=e.getMetaPath().getConvertedMetadata();const f=c.actions;const p=e?.getMetaPath()?.getConvertedMetadata().annotations?.mainService;return{actionsMetadata:l,functionImports:f,mainService:p}};const gt=e=>{const t=new Set;return e.filter(e=>{if(!t.has(e.action)){t.add(e.action);return true}return false})};const vt=(e,t)=>{const{actionsMetadata:r,functionImports:a,mainService:n}=yt(e);const i=t?.context?.fe;const o=t?.context?.keys??[];const s=t?.context?.path??"";const u=[];for(const e of r){const t=bt(e,a,n,i,o,s);if(t){u.push(t)}}const l=u.filter(e=>e.parameters.length>0);const c=u.filter(e=>e.parameters.length===0);return{parameterizedActions:l,simpleActions:c}};function bt(e,t,r,a,n,i){const o=Tt(e,a);const s=Ct(e,a);const u=Ot(e,t,a,n);const l=Pt(u,r,a);return{verb:o,label:s,parameters:l,contextKeys:n,contextPath:i}}function Tt(e,t){const r=t==="v4"?e.action:e.action?.toString().split("/")?.[1];return r?.indexOf("(")>-1?r?.split("(")?.[0]:r||""}function Ct(e,t){return t==="v4"?e?.label:e?.label?.toString()}function Ot(e,t,r,a){let n=e.parameters??[];if(r==="v2"){const r=e.action?.toString().split("/")?.[1]??"";const i=t?.find(e=>e.name===r);let o=i?.parameters;if(!i||!Array.isArray(o))return n;n=o.filter(e=>!a.includes(e.name))}else if(r==="v4"){n=n.slice(1)}return n}function Pt(e,t,r){return e.map(e=>({name:e.name,label:Et(e,t,r),type:e.type,isRequired:true}))}function Et(e,t,r){if(r==="v4"){const r=e.fullyQualifiedName;const a=r?.lastIndexOf("(");const n=r?.slice(a+1).replaceAll(")","")||"";const i=t.filter(e=>e?.target?.endsWith(n)||e?.target?.endsWith(r));const o=i[0]?.annotations?.find(e=>e.term==="com.sap.vocabularies.Common.v1.Label");return o?.value?.type==="String"?o.value.String:e.name}return e.label||e.name}class Dt{}class _t extends Dt{targetCardType;constructor(){super()}generateAppCard(t,a,n=[],i){const o=i?.cardType??e.CardType.Object;const s=i?.enableFooterActions??false;if(this.supportedCards().indexOf(o)===-1){throw new Error(`Card type ${o} is not supported by ${this.targetCardType}`)}const u=ct(t,a,n);const l=new r;l.addManifest(t);l.addMetadata(u);try{if(!l.objectEntitySet){throw new Error("Object entity set is missing.")}if(!l.isUI5()){throw new Error("UI5 check failed.")}return this.generateFECard(l,{cardType:o,enableFooterActions:s})}catch(e){throw new Error(`Card generation failed: ${e.message}`)}}createDefinitionContext(e){const t=new ee.DefinitionContext(e.getMetadata());t.addApplicationManifest(e.manifest);return t}generateFECard(t,r){const{cardType:a,enableFooterActions:n}=r;const i=this.createDefinitionContext(t);const o=i.getPageFor(`/${t.objectEntitySet}`);const s=new ee.QueryBuilder(o.getMetaPath(),i);const{header:u,headerDFs:l}=this.convertHeaderInfo(o,s,t.objectEntitySet);const c=o.getTableVisualization()||o.createDefaultTableVisualization();const f=this.convertTableVisualizationToFacts(s,c,l);if(!t.objectKeys||t.objectKeys.length===0){throw new Error("Object keys are missing")}const p=s.buildQuery();const d=ht(t,a,this.targetCardType,{query:p});const m={key:{app:t.componentId,object:t.objectEntitySet},context:{type:"fe",service:t.servicePath??"",fe:t.fe??"",path:d,entitySet:t.objectEntitySet,keys:t.objectKeys.map(e=>e.name),filters:t.filters??[]},footer:{simpleActions:[],parameterizedActions:[]}};let h,y;if(n){({simpleActions:h,parameterizedActions:y}=vt(o,m));m.footer.simpleActions.push(...h);m.footer.parameterizedActions.push(...y)}const g={header:u,facts:f};switch(a){case e.CardType.Table:return this.generateTableCard(g,m);case e.CardType.List:return this.generateListCard(g,m);case e.CardType.Object:return this.generateObjectCard(g,m);default:throw new Error(`Unsupported card type: ${a}`)}}isPotentiallySensitive(e){if(!e){return false}const t=e.annotations?.PersonalData;return t?.IsPotentiallySensitive?.valueOf()===true||t?.IsPotentiallyPersonal?.valueOf()===true}convertHeaderInfo(e,t,r){const a={type:"SAP S/4HANA Cloud",title:r};const n=[];const i=e.getHeaderInfo();if(!i){return{header:a,headerDFs:n}}const o=i.getTypeName();if(o){a.type=o}const s=i.getTitle();const u=s?.getProperty();if(s&&u&&!this.isPotentiallySensitive(u)){n.push(s);const e=s.getFormattedValue();a.title=this.compileExpression(e);t.addPathsFromExpression(e);const r=i.getDescription();const o=r?.getProperty();if(r&&o){n.push(r);const e=r.getFormattedValue();a.description=this.compileExpression(e);t.addPathsFromExpression(e)}}return{header:a,headerDFs:n}}convertTableVisualizationToFacts(e,t,r=[]){const a=e=>r.findIndex(t=>t.getProperty()?.name===e.getProperty()?.name)===-1;const n=e=>{const r=e?t.getDataFields({importance:e,restrictTypes:["com.sap.vocabularies.UI.v1.DataField"]}):t.getDataFields({restrictTypes:["com.sap.vocabularies.UI.v1.DataField"]});return r.filter(a)};let i=n(["UI.ImportanceType/High"]);if(i.length<7){i.push(...n(["UI.ImportanceType/Medium"]))}if(i.length<7){i=n()}const o=[];while(i.length>0&&o.length<7){const t=i.shift();const r=t.getProperty();if(r&&!this.isPotentiallySensitive(r)){const a=r.name;const n=t.getFormattedValue();if(a&&n!==te.unresolvableExpression){e.addPathsFromExpression(n);o.push({label:t.getLabel(),value:this.compileExpression(n)})}}}return o}}const wt=3;function At(e,t=false,r){switch(e._type){case"PathInModel":const a=e.modelName??r;const n=a?`${a}.`:"";let i;if(e.path.includes("/")){const t=e.path.split("/")[0];i=`${n}${t} ? string(${n}${e.path.replaceAll("/",".")}) : ''`}else{i=`string(${n}${e.path})`}return t?i:`\${${i}}`;case"IfElse":const o=At(e.condition,true,r);const s=At(e.onTrue,true,r);const u=At(e.onFalse,true,r);return`\${if(${o}, ${s}, ${u})}`;case"Comparison":const l=At(e.operand1,t,r);const c=At(e.operand2,t,r);return`${l} ${e.operator} ${c}`;case"Set":return e.operands.map(e=>At(e,t,r)).join(` ${e.operator} `);case"Concat":return`${e.expressions.map(e=>At(e,t,r)).join("")}`;case"Truthy":const f=`length(${At(e.operand,true,r)}) > 0`;return t?f:`\${${f}}`;case"Constant":if(typeof e.value==="string"){return e.value?.toString()??"undefined"}return e.value?.toString()??"undefined";case"Formatter":const p=e.parameters;const d=At(p[0],true,r);const m=p.slice(1).map(e=>At(e,true,r));if(d==="formatWithBrackets"){return At(te.concat("${",d,"(",...m.join(","),")}"))}else{return`\${${m[0]}}`}}return"''"}class It extends _t{targetCardType;constructor(){super();this.targetCardType=e.TargetCardType.AdaptiveCard}supportedCards(){return[e.CardType.Object,e.CardType.Table]}compileExpression(e){return At(e,false)}generateBaseCard(e,t){return{$schema:"https://adaptivecards.io/schemas/adaptive-card.json",type:"AdaptiveCard",version:"1.6",body:[{type:"ColumnSet",columns:[{type:"Column",items:[{type:"Image",url:ft,altText:"SAP",size:"Small"}],width:"auto"},{type:"Column",items:[{type:"TextBlock",weight:"Bolder",text:e,wrap:true}],width:"auto"}]}],actions:[],metadata:{context:t.context}}}generateObjectCard({header:e,facts:t},r){const a=this.generateBaseCard(e.type,r);const n=this.chunkObjectFacts(t,wt).map(e=>({type:"ColumnSet",columns:e.map(e=>({type:"Column",width:"stretch",items:[{type:"TextBlock",wrap:false,isSubtle:true,maxLines:1,size:"small",weight:"default",spacing:"default",color:"Default",text:e.label},{type:"TextBlock",wrap:true,maxLines:2,size:"small",weight:"default",spacing:"none",color:"Default",text:e.value}]})).concat(Array(wt-e.length).fill({type:"Column",width:"stretch"}))}));if(e.title||e.description){a.body.push({type:"Container",spacing:"large",items:[{type:"Container",spacing:"medium",items:[e.title&&{type:"TextBlock",wrap:true,weight:"bolder",size:"small",maxLines:2,spacing:"medium",color:"Default",text:e.title},e.description&&{type:"TextBlock",wrap:true,weight:"default",size:"small",maxLines:2,spacing:"none",color:"Default",text:e.description},{type:"Container",spacing:"small",items:n}].filter(Boolean)}]})}this.addActionSets(a,r);return a}chunkObjectFacts(e,t){const r=[];for(let a=0;a<e.length;a+=t){r.push(e.slice(a,a+t))}return r}generateTableCard({header:e,facts:t},r){const a=this.generateBaseCard(e.type,r);const n={type:"Table",firstRowAsHeaders:true,showGridLines:true,columns:[],rows:[]};const i=t.length>3?t.slice(0,3):t;n.columns=i.map(()=>({width:1}));n.rows.push({type:"TableRow",cells:i.map(e=>({type:"TableCell",items:[{type:"TextBlock",text:e.label,wrap:true,weight:"Bolder"}]}))});n.rows.push({type:"TableRow",$data:r.context?.fe==="v4"?"${value}":"${d.results}",cells:i.map(e=>({type:"TableCell",items:[{type:"TextBlock",text:e.value,wrap:true}]}))});a.body.push(n);return a}generateListCard(e,t){throw new Error("List card is not supported for Adaptive Card.")}addActionSets(e,t){const r=t.footer;for(const a of r.parameterizedActions){this.processNormalizedAction(e,a,t,true)}for(const a of r.simpleActions){this.processNormalizedAction(e,a,t,false)}}processNormalizedAction(e,t,r,a){let n;if(a){n=this.createShowCardActionFromNormalized(t,r)}else{n=this.createExecuteAction(t,r)}e.body.push(n)}createShowCardActionFromNormalized(e,t){const r={type:"ActionSet",actions:[{type:"Action.ShowCard",title:e.label,card:{type:"AdaptiveCard",$schema:"https://adaptivecards.io/schemas/adaptive-card.json",version:"1.6",body:e.parameters.map(e=>({type:"Input.Text",id:e.name,label:e.label,errorMessage:"Enter the required input",placeholder:"Enter the required input",isRequired:true,isMultiline:false})),actions:[{type:"Action.Execute",title:"OK",verb:e.verb,data:{isConfirmationRequired:false,actionParams:{keys:t?.context?.keys},contextURL:t?.context?.path},style:"positive"}]},style:"positive"}]};return r}createExecuteAction(e,t){return{type:"ActionSet",actions:[{type:"Action.Execute",title:e.label,verb:e.verb,data:{isConfirmationRequired:false,contextURL:t?.context?.path},style:"positive"}]}}}var Nt={};var St;function xt(){if(St)return Nt;St=1;Object.defineProperty(Nt,"__esModule",{value:true});Nt.escapeXmlAttribute=t;Nt.compileConstant=n;Nt.wrapBindingExpression=s;Nt.compileExpression=u;const e=C();function t(e){return e.replace(/'/g,"\\'")}const r=function(t){return!(0,e.isConstant)(t)&&!(0,e.isPathInModelExpression)(t)&&(0,e.isExpression)(t)&&t._type!=="IfElse"&&t._type!=="Function"};function a(e,t=false){if(t&&Object.keys(e.value).length===0){return""}const r=e.value;const a=[];Object.keys(r).forEach(e=>{const n=r[e];const i=u(n,true,false,t);if(i&&i.length>0){a.push(`${e}: ${i}`)}});return`{${a.join(", ")}}`}function n(e,r,n=false,i=false){if(e.value===null){return i?null:"null"}if(e.value===undefined){return i?undefined:"undefined"}if(typeof e.value==="object"){if(Array.isArray(e.value)){const t=e.value.map(e=>u(e,true));return`[${t.join(", ")}]`}else{return a(e,n)}}if(r){switch(typeof e.value){case"number":case"bigint":case"boolean":return e.value.toString();case"string":return`'${t(e.value.toString())}'`;default:return""}}else{return i?e.value:e.value.toString()}}function i(e,t,r,a){if(e.type||e.parameters||e.targetType||e.formatOptions){const a={path:d(e),type:e.type,targetType:e.targetType,parameters:e.parameters,formatOptions:e.formatOptions};const n=u(a,false,false,true);if(t){return`${r}${n}`}return n}else if(t){return`${r}{${d(e,a)}}`}else{return`{${d(e,a)}}`}}function o(e){if(e.bindingParameters.length===1){return`{${f(e.bindingParameters[0],true)}, type: '${e.type}'}`}let t=`], type: '${e.type}'`;if(p(e.formatOptions)){t+=`, formatOptions: ${u(e.formatOptions)}`}if(p(e.parameters)){t+=`, parameters: ${u(e.parameters)}`}t+="}";return`{mode:'TwoWay', parts:[${e.bindingParameters.map(e=>f(e)).join(",")}${t}`}function s(e,t,r=false){if(t){if(r){return`(${e})`}else{return e}}else{return`{= ${e}}`}}function u(t,r=false,a=false,f=false,p){const d=(0,e.wrapPrimitive)(t);const m=a?"$":"%";switch(d._type){case"Unresolvable":return undefined;case"Constant":return n(d,r,f);case"Ref":return d.ref||"null";case"Function":let t=false;if(d.isFormattingFn){(0,e.transformRecursively)(d,"Function",e=>{if(e!==d&&e.obj===undefined){t=true}return e},true);(0,e.transformRecursively)(d,"Constant",r=>{if(r!==d&&typeof r.value==="object"){(0,e.transformRecursively)(r,"PathInModel",e=>{t=true;return e})}return r},true)}const h=`${d.parameters.map(e=>u(e,true,false,false,p)).join(", ")}`;let y=d.obj===undefined?`${d.fn}(${h})`:`${u(d.obj,true,false,false,p)}.${d.fn}(${h})`;if(!r&&t){y=`{= ${y}}`}return y;case"EmbeddedExpressionBinding":return r?`(${d.value.substring(2,d.value.length-1)})`:`${d.value}`;case"EmbeddedBinding":return r?`${m}${d.value}`:`${d.value}`;case"PathInModel":return i(d,r,m,p);case"Comparison":const g=l(d,p);return s(g,r);case"IfElse":const v=`${u(d.condition,true,false,false,p)} ? ${u(d.onTrue,true,a,false,p)} : ${u(d.onFalse,true,a,false,p)}`;return s(v,r,true);case"Set":const b=d.operands.map(e=>u(e,true,false,false,p)).join(` ${d.operator} `);return s(b,r,true);case"Concat":const T=d.expressions.map(e=>u(e,true,true,false,p)).join(" + ");return s(T,r);case"Length":const C=`${u(d.pathInModel,true,false,false,p)}.length`;return s(C,r);case"Not":const O=`!${u(d.operand,true,false,false,p)}`;return s(O,r);case"Truthy":const P=`!!${u(d.operand,true,false,false,p)}`;return s(P,r);case"Formatter":const E=c(d,p);return r?`$${E}`:E;case"ComplexType":const D=o(d);return r?`$${D}`:D;default:return""}}function l(e,t){function a(e){const a=u(e,true,false,false,t)??"undefined";return s(a,true,r(e))}return`${a(e.operand1)} ${e.operator} ${a(e.operand2)}`}function c(e,t){if(e.parameters.length===1){return`{${f(e.parameters[0],true,t)}, formatter: '${e.fn}'}`}else{const r=e.parameters.map(e=>{if(e._type==="ComplexType"){return o(e)}else{return f(e,false,t)}});return`{parts: [${r.join(", ")}], formatter: '${e.fn}'}`}}function f(e,t=false,r){let a="";if(e._type==="Constant"){if(e.value===undefined){a=`value: 'undefined'`}else{a=`value: ${n(e,true)}`}}else if(e._type==="PathInModel"){a=`path: '${d(e,r)}'`;a+=e.type?`, type: '${e.type}'`:`, targetType: 'any'`;if(e.mode){a+=`, mode: '${u(e.mode)}'`}if(p(e.formatOptions)){a+=`, formatOptions: ${u(e.formatOptions)}`}if(p(e.parameters)){a+=`, parameters: ${u(e.parameters)}`}}else{return""}return t?a:`{${a}}`}function p(e){return!!e&&Object.keys(e).length>0}function d(e,t){if(e.modelName){return`${e.modelName}>${e.path}`}else if(t){return`${t}>${e.path}`}else{return`${e.path}`}}return Nt}var Ft=xt();class Mt extends _t{targetCardType;extensionPath="module:sap/insights/CardExtension";constructor(){super();this.targetCardType=e.TargetCardType.UI5IntegrationCard}supportedCards(){return[e.CardType.Object,e.CardType.List,e.CardType.Table]}compileExpression(e){if(e._type==="Formatter"){const t=e.parameters;const r=Ft.compileExpression(t[0]);const a=t.slice(1).map(e=>Ft.compileExpression(e,false,true));if(r==="formatWithBrackets"){return Ft.compileExpression(te.concat("{= extension.formatters.",`${r}(`,...a.map(e=>`$${e}`).join(","),") }"))??""}else{return Ft.compileExpression(a[0])??""}}return Ft.compileExpression(e)??""}generateBaseCard(e,t){return{_version:"1.15.0","sap.app":{id:`${e.key.app}.${t}`,type:"card"},"sap.ui":{technology:"UI5"},"sap.insights":{cardType:"GEN_CARD",parentAppId:`${e.key.app}`,templateName:t}}}getDestinations(){return{destinations:{service:{name:"(default)",defaultUrl:"/"}}}}getCSRFToken(e){return{csrfTokens:{token1:{data:{request:{url:`{{destinations.service}}${e.context?.service}`,method:"HEAD",headers:{"X-CSRF-Token":"Fetch"}}}}}}}getDataConfig(e){const t=e.context.path;const r=t.replace(e.context.service,"");return{data:{request:{url:`{{destinations.service}}${e.context?.service}$batch`,method:"POST",headers:{"Accept-Language":"{{parameters.LOCALE}}","X-CSRF-Token":"{{csrfTokens.token1}}"},batch:{header:{method:"GET",url:r,headers:{Accept:"application/json","Accept-Language":"{{parameters.LOCALE}}"}},content:{method:"GET",url:r,headers:{Accept:"application/json","Accept-Language":"{{parameters.LOCALE}}"}}}}}}}generateObjectCard({header:e,facts:t},r){const a=this.generateBaseCard(r,"Object");const n=r.context.fe==="v2"?"/content/d/":"/content/";const i=r.context.keys;const o=i.reduce((e,t)=>{e[t]={value:"",type:"string"};return e},{});a["sap.card"]={type:"Object",extension:this.extensionPath,configuration:{parameters:{...o,_entitySet:{value:r.context?.entitySet||"",type:"string"},_mandatoryODataParameters:{value:i},logo:{value:ft,type:"string"}},...this.getCSRFToken(r),...this.getDestinations()},...this.getDataConfig(r),header:{icon:{src:"{{parameters.logo}}",fitType:"Contain",shape:"Square"},data:{path:n},title:e.title,subTitle:e.description||""},content:{data:{path:n},groups:[{title:e.type,items:t}]},footer:{actionsStrip:this.createActionsStrip(r)}};return a}generateListCard({header:e,facts:t},r){const a=this.generateBaseCard(r,"List");const n=r.context.fe==="v2"?"/d/results/":"/value/";const i=r.context.fe==="v2"?"${/content/d/__count}":"${/content/@odata.count}";const o=5;a["sap.card"]={extension:this.extensionPath,configuration:{parameters:{_entitySet:{value:r.context?.entitySet||"",type:"string"},logo:{value:ft,type:"string"},metadata:{context:{applicationType:"fe",oDataType:r.context.fe,service:r.context.service,path:r.context.path,filters:r.context.filters||[]}}},...this.getDestinations(),...this.getCSRFToken(r)},...this.getDataConfig(r),type:"List",header:{icon:{src:"{{parameters.logo}}",fitType:"Contain",shape:"Square"},data:{path:`/header${n}0`},title:e.title,subTitle:e.type,status:{text:`{= Math.min(${o}, ${i}) + ' of ' + ${i} }`}},content:{data:{path:`/content${n}`},maxItems:o,item:{attributes:t.map(e=>({value:e.value}))}},footer:{actionsStrip:[]}};return a}generateTableCard({header:e,facts:t},r){const a=r.context;const n=a.fe==="v2"?"/d/results/":"/value/";const i=a.fe==="v2"?"${/content/d/__count}":"${/content/@odata.count}";const o=5;const s=3;const u=(t||[]).slice(0,s).map(e=>({title:this.compileExpression(e.label??""),value:this.compileExpression(e.value??"")}));const l=this.generateBaseCard(r,"Table");l["sap.card"]={type:"Table",extension:this.extensionPath,configuration:{parameters:{_entitySet:{value:a?.entitySet||"",type:"string"},logo:{value:ft,type:"string"},metadata:{context:{applicationType:"fe",oDataType:a.fe,service:a.service,path:a.path,filters:a.filters||[]}}},...this.getCSRFToken(r),...this.getDestinations()},...this.getDataConfig(r),header:{icon:{src:"{{parameters.logo}}",fitType:"Contain",shape:"Square"},data:{path:`/header${n}0`},title:e?.title||"",subTitle:e?.description||"",status:{text:`{= Math.min(${o}, ${i}) + ' of ' + ${i} }`}},content:{data:{path:`/content${n}`},maxItems:o,row:{columns:u}}};return l}createActionsStrip(e){const t=[];const r=e?.footer;if(!r){return t}for(const e of r.simpleActions){t.push({text:e.label,buttonType:"Default",actions:[{type:"Custom",parameters:{verb:e.verb,contextURL:e.contextPath,contextKeys:e.contextKeys}}]})}return t}}function Vt(t){return t===e.TargetCardType.UI5IntegrationCard?new Mt:new It}const Rt=(t,r,a,n)=>{const i=n.target??e.TargetCardType.UI5IntegrationCard;const o=Vt(i);return o.generateAppCard(t,r,a,{...n})};e.generateAppCard=Rt})})(r,r.exports);var ha=r.exports;Object.defineProperty(ha,"__"+"esModule",{value:true});return ha});
//# sourceMappingURL=semantic-card-generator-dbg.js.map