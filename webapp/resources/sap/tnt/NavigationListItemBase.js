/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./library","sap/ui/core/Item","sap/ui/core/Icon","sap/ui/core/Lib","sap/ui/events/KeyCodes","sap/base/i18n/Localization"],function(t,e,n,i,o,r){"use strict";const s="sap-icon://navigation-right-arrow";const a="sap-icon://navigation-down-arrow";const p="sap-icon://arrow-right";const l=e.extend("sap.tnt.NavigationListItemBase",{metadata:{library:"sap.tnt",properties:{expanded:{type:"boolean",group:"Misc",defaultValue:true},hasExpander:{type:"boolean",group:"Misc",defaultValue:true},visible:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{_expandIconControl:{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"},_externalLinkIconControl:{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"}},events:{press:{allowPreventDefault:true,parameters:{item:{type:"sap.ui.core.Item"},ctrlKey:{type:"boolean"},shiftKey:{type:"boolean"},altKey:{type:"boolean"},metaKey:{type:"boolean"}}}}}});l.prototype.init=function(){this._resourceBundleCore=i.getResourceBundleFor("sap.ui.core");this._resourceBundleTnt=i.getResourceBundleFor("sap.tnt")};l.prototype.exit=function(){this._resourceBundleCore=null;this._resourceBundleTnt=null};l.prototype.getLevel=function(){const t=0;const e=this.getParent();if(e&&e.isA("sap.tnt.NavigationListItem")){return e.getLevel()+1}return t};l.prototype.getNavigationList=function(){let t=this.getParent();while(t&&!t.isA("sap.tnt.NavigationList")){t=t.getParent()}return t};l.prototype.getAllParentsEnabled=function(){let t=this.getParent();while(t&&!t.isA("sap.tnt.NavigationList")){if(!t.getEnabled()){return false}t=t.getParent()}return true};l.prototype._isListExpanded=function(){const t=this.getNavigationList();if(!t){return false}return t.getExpanded()||t.hasStyleClass("sapTntNLPopup")};l.prototype._getUniqueKey=function(){const t=this.getKey();return t?t:this.getId()};l.prototype._getFocusDomRefs=function(){};l.prototype._getExpandIconControl=function(){let t=this.getAggregation("_expandIconControl");if(!t){const e=this.getExpanded();t=new n({src:e?a:s,visible:!!this.getItems()?.length&&this.getHasExpander(),useIconTooltip:false,tooltip:this._getExpandIconTooltip(!e)}).addStyleClass(`sapTntNLIExpandIcon ${this._getExpandIconStyleClass()}`);this.setAggregation("_expandIconControl",t,true)}return t};l.prototype._getExternalIcon=function(){var t=this.getAggregation("_externalLinkIconControl");if(!t){t=new n({src:p}).addStyleClass(`sapTntNLIExternalLinkIcon`);this.setAggregation("_externalLinkIconControl",t)}return t};l.prototype._getExpandIconStyleClass=function(){return""};l.prototype._getExpandIconTooltip=function(t){if(!this.getEnabled()||!this.getAllParentsEnabled()){return""}const e=t?"Icon.expand":"Icon.collapse";return this._resourceBundleCore.getText(e)};l.prototype.getFocusDomRef=function(){const t=this.getDomRef()?.querySelector("[tabindex]");if(!t){return null}return t};l.prototype.onkeydown=function(t){const e=r.getRTL();if(t.key?t.key===" ":t.keyCode===o.SPACE){t.preventDefault()}if(this._isInsidePopover()){if(t.which==o.ARROW_LEFT&&!e||t.which==o.ARROW_RIGHT&&e){this.getNavigationList().oParent.close();t.stopPropagation()}if(t.which==o.ARROW_RIGHT&&!e||t.which==o.ARROW_LEFT&&e){t.stopPropagation()}return}if(!this._isListExpanded()){if(t.which==o.ARROW_RIGHT&&!e||t.which==o.ARROW_LEFT&&e){if(this.getItems().length>0){this.ontap(t)}t.stopPropagation()}if(t.which==o.ARROW_LEFT&&!e||t.which==o.ARROW_RIGHT&&e){t.stopPropagation()}return}if(t.isMarked("subItem")){return}if(t.srcControl.getLevel()===1){t.setMarked("subItem")}if(this.getLevel()!==0){if(t.which==o.ARROW_RIGHT&&!e||t.which==o.ARROW_LEFT&&e||t.which==o.ARROW_LEFT&&!e||t.which==o.ARROW_RIGHT&&e){t.stopPropagation()}return}if(t.shiftKey&&t.which==189||t.which==o.NUMPAD_MINUS||t.which==o.ARROW_RIGHT&&e||t.which==o.ARROW_LEFT&&!e){this.collapse();t.preventDefault();t.stopPropagation()}else if(t.which==o.NUMPAD_PLUS||t.shiftKey&&t.which==o.PLUS||t.which==o.ARROW_LEFT&&e||t.which==o.ARROW_RIGHT&&!e){this.expand();t.preventDefault();t.stopPropagation()}};l.prototype.ontap=function(t){if(this.getEnabled()&&!t.srcControl.isA("sap.ui.core.Icon")&&!this._isOverflow&&!(!this.getNavigationList().getExpanded()&&this.getItems().length)){if(!this._firePress(t,this)){return true}t.stopPropagation()}if(t.isMarked("subItem")){return true}t.setMarked("subItem");if(!this.getEnabled()||!this.getAllParentsEnabled()){t.stopPropagation();return true}if(this._handleExpanderClick(t)){return true}return false};l.prototype.onmouseover=function(t){const e=t.target,n=t.srcControl;if(!e||n&&!n.isA("sap.tnt.NavigationListItemBase")){return}t.stopPropagation();const i=this._getTooltipElement();if(!i){return}const o=i.querySelector(".sapMText")||i.querySelector(".sapTntNLGroupText");if(o.offsetWidth>=o.scrollWidth){return}let r=n?.getText();const s=n.getTooltip_AsString();if(s){r+=" - "+s}i.setAttribute("title",r)};l.prototype._getTooltipElement=function(){return this.getDomRef().querySelector("[role='treeitem']")};l.prototype.onmouseout=function(t){const e=t.target,n=t.srcControl;if(!e||n&&!n.isA("sap.tnt.NavigationListItemBase")){return}t.stopPropagation();const i=this._getTooltipElement();const o=n?.getTooltip_AsString();if(i){if(o){i.setAttribute("title",o)}else{i.removeAttribute("title")}}};l.prototype._firePress=function(t,e){const n=this.getNavigationList();const i=t.getParameters?t.getParameters():{item:e,ctrlKey:!!t.ctrlKey,shiftKey:!!t.shiftKey,altKey:!!t.altKey,metaKey:!!t.metaKey};if(!this.getEnabled()){return false}if(!this.firePress(i)){t.preventDefault();return false}if(!n?.fireItemPress(i)){t.preventDefault();return false}return true};l.prototype._handleExpanderClick=function(t){const e=this._getExpanderActivationTarget(),n=t.target.closest(e);if(!this._isListExpanded()||this.getLevel()!==0||!n){return false}if((t.key?t.key==="Enter":t.keyCode===o.ENTER)||(t.key?t.key===" ":t.keyCode===o.SPACE)){return false}if(this.getExpanded()){this.collapse()}else{this.expand()}return true};l.prototype._getExpanderActivationTarget=function(){if(!this.getSelectable()&&!(this.getHref()&&this.getTarget()==="_blank")){return".sapTntNLIFirstLevel"}return".sapTntNLIExpandIcon"};l.prototype.expand=function(){if(!this.getEnabled()||this.getExpanded()||!this.getHasExpander()||this.getItems().length==0||this.getLevel()!==0){return false}this.setProperty("expanded",true);this._animateExpand=true;return true};l.prototype.collapse=function(){if(!this.getEnabled()||!this.getExpanded()||!this.getHasExpander()||this.getItems().length==0||this.getLevel()!==0){return false}this.setProperty("expanded",false);this._animateCollapse=true;return true};l.prototype._isInsidePopover=function(){return!!this.getNavigationList()?.hasStyleClass("sapTntNLPopup")};return l});
//# sourceMappingURL=NavigationListItemBase.js.map