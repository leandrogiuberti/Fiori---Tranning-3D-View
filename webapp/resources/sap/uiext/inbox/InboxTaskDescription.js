/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
jQuery.sap.declare("sap.uiext.inbox.InboxTaskDescription");jQuery.sap.declare("sap.uiext.inbox.InboxTaskDetails");jQuery.sap.declare("sap.uiext.inbox.Inbox");sap.ui.commons.FormattedTextView.extend("sap.uiext.inbox.InboxTaskDescription",{metadata:{properties:{wrapping:{type:"boolean",defaultValue:true},maxLines:{type:"int",defaultValue:1}}},renderer:function(e,t){sap.ui.commons.FormattedTextViewRenderer.render.apply(this,arguments)}});sap.uiext.inbox.InboxTaskDescription.prototype.setMaxLines=function(e){this.setProperty("maxLines",e);var t=this.getTextDomRef();if(t){if(this.getWrapping()&&this.getMaxLines()>0){if(!this.canUseNativeLineClamp()){this.clampHeight();jQuery(t).css({"text-overflow":"ellipsis",overflow:"hidden","max-width":"100%"})}else{jQuery(t).css({display:"-webkit-box","-webkit-box-orient":"vertical",overflow:"hidden","-webkit-line-clamp":this.getMaxLines()+""})}}else if(!this.getWrapping()){jQuery(t).css({"text-overflow":"ellipsis",overflow:"hidden","max-width":"100%",whitespace:"nowrap"})}}return this};sap.uiext.inbox.InboxTaskDescription.prototype.onAfterRendering=function(){var e=this.getTextDomRef();if(e){if(this.getWrapping()&&this.getMaxLines()>0){if(!this.canUseNativeLineClamp()){this.clampHeight();jQuery(e).css({"text-overflow":"ellipsis",overflow:"hidden","max-width":"100%"})}else{jQuery(e).css({display:"-webkit-box","-webkit-box-orient":"vertical",overflow:"hidden","-webkit-line-clamp":this.getMaxLines()+""})}}else if(!this.getWrapping()){jQuery(e).css({"text-overflow":"ellipsis",overflow:"hidden","max-width":"100%",whitespace:"nowrap"})}}};sap.uiext.inbox.InboxTaskDescription.hasNativeLineClamp=function(){return typeof document.documentElement.style.webkitLineClamp!="undefined"};sap.uiext.inbox.InboxTaskDescription.prototype.canUseNativeLineClamp=function(){if(!sap.uiext.inbox.InboxTaskDescription.hasNativeLineClamp){return false}return true};sap.uiext.inbox.InboxTaskDescription.prototype.getClampHeight=function(e){var t=t||this.getTextDomRef();return this.getMaxLines()*this.getLineHeight(t)};sap.uiext.inbox.InboxTaskDescription.prototype.getTextDomRef=function(){var e=this.getDomRef();return e&&(e.firstElementChild||e)};sap.uiext.inbox.InboxTaskDescription.prototype.getLineHeight=function(e){var t=t||this.getTextDomRef();if(!t){return}var i=window.getComputedStyle(t),s=parseFloat(i.lineHeight);if(!s){s=parseFloat(i.fontSize)*this.normalLineHeight}var o=Math.floor(s);return o};sap.uiext.inbox.InboxTaskDescription.prototype.isClamped=function(){var e=e||this.getTextDomRef();if(!e){return}var t=this.getHtmlText(true);var i=this.getClampHeight(e);var s=s||t.length;e.textContent=t.slice(0,s);if(e.scrollHeight>i){return true}return false};sap.uiext.inbox.InboxTaskDescription.prototype.removeClamp=function(){var e=e||this.getTextDomRef();if(!e){return}jQuery(e).css("-webkit-line-clamp","");jQuery(e).css("max-height","");jQuery(e).css("height","auto")};sap.ui.core.Control.extend("sap.uiext.inbox.InboxTaskDetails",{metadata:{properties:{showMore:{type:"string",defaultValue:"auto"}},aggregations:{fTV:{type:"sap.ui.commons.FormattedTextView",multiple:false,visibility:"public"},taskDescriptionLink:{type:"sap.ui.commons.Link",multiple:false,visibility:"hidden"}},events:{showMoreClick:{enablePreventDefault:true}}},init:function(){var e=this;this._oBundle=sap.ui.getCore().getLibraryResourceBundle("sap.uiext.inbox");this.setAggregation("taskDescriptionLink",new sap.ui.commons.Link({text:e._oBundle.getText("INBOX_SHOW_MORE_TEXT"),tooltip:e._oBundle.getText("INBOX_SHOW_MORE_LINK_TOOLTIP"),visible:false}).attachPress(jQuery.proxy(this.showMoreClick,this)))},renderer:{render:function(e,t){e.write("<div");e.writeControlData(t);e.addClass("inboxTaskDetails");e.writeClasses();e.write(">");e.write("<div");e.addClass("fTV");e.writeClasses();e.writeStyles();e.write(">");e.renderControl(t.getAggregation("fTV"));e.write("</div>");if(t.getAggregation("taskDescriptionLink").getVisible()){e.write("<div");e.addClass("taskDescriptionLink");e.writeClasses();e.writeStyles();e.write(">");e.renderControl(t.getAggregation("taskDescriptionLink"));e.write("</div>")}e.write("</div>")}},onAfterRendering:function(){var e=this.getAggregation("fTV");if(this.getShowMore()==="true"||e.isClamped()&&this.getShowMore()==="auto"){this.getAggregation("taskDescriptionLink").setVisible(true)}},showMoreClick:function(e){var t=sap.ui.getCore().getLibraryResourceBundle("sap.uiext.inbox");var i=t.getText("INBOX_SHOW_MORE_TEXT");var s=t.getText("INBOX_SHOW_LESS_TEXT");if(e.getSource().getText()===i){e.getSource().setText(t.getText("INBOX_SHOW_LESS_TEXT"));e.getSource().setTooltip(t.getText("INBOX_SHOW_LESS_LINK_TOOLTIP"));this.fireShowMoreClick({text:i})}else{e.getSource().setText(i);e.getSource().setTooltip(t.getText("INBOX_SHOW_MORE_LINK_TOOLTIP"));this.fireShowMoreClick({text:s})}}});
//# sourceMappingURL=InboxTaskDescription.js.map