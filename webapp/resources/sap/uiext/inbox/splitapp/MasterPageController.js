/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
jQuery.sap.declare("sap.uiext.inbox.splitapp.MasterPageController");sap.ui.base.Object.extend("sap.uiext.inbox.splitapp.MasterPageController",{constructor:function(){sap.ui.base.Object.apply(this)}});sap.uiext.inbox.splitapp.MasterPageController.prototype._selectDetail=function(){var e=sap.ui.getCore().byId(this.Id+"-list");var t=e.getItems();if(!jQuery.device.is.phone&&t.length>0&&!e.getSelectedItem()){e.setSelectedItem(t[0],true);this._showDetail(t[0])}};sap.uiext.inbox.splitapp.MasterPageController.prototype.handleSearch=function(e,t){t._updateList()};sap.uiext.inbox.splitapp.MasterPageController.prototype._updateList=function(){var e=this;var t=new Array;var a=sap.ui.getCore().byId(e.Id+"-searchFld").getValue();if(a&&a.length>0){t.push(new sap.ui.model.Filter("TaskTitle",sap.ui.model.FilterOperator.Contains,a))}t=t.concat(e.oSplitAppObj.filters);var i=sap.ui.getCore().byId(e.Id+"-list");var o=i.getSelectedItem();var s=i.getBinding("items");s.filter(t);if(t.length==0){i.setSelectedItem(o,true)}};sap.uiext.inbox.splitapp.MasterPageController.prototype.handleListSelect=function(e,t){var a=sap.ui.getCore().byId(t.Id+"-list");var i=a.mBindingInfos.items.binding.iLength;t.masterPage.setTitle(t._oBundle.getText("INBOX_LP_TASKS_AND_COUNT",[i]));var o=a.getItems();if(o.length>0&&!a.getSelectedItem()){a.setSelectedItem(o[0],true)}var s=a.getSelectedItem();var p=s.getBindingContext();var r=t.oSplitAppObj.oInboxDetailPage.detailViewPage;r.setBindingContext(p);var l=t.oSplitAppObj.getAggregation("splitAppl");if(r.getId()==l.getCurrentPage().getId()){t.oSplitAppObj.oInboxDetailPage.renderDetailsPage()}else{var n=t.oSplitAppObj._oTaskExecutionUIPageObj;if(!n){jQuery.sap.require("sap.uiext.inbox.splitapp.TaskExecutionUIPage");n=new sap.uiext.inbox.splitapp.TaskExecutionUIPage(t.oSplitAppObj.getId()+"-exUi");t.oSplitAppObj.app.addPage(n.oTaskExecutionUIPage);n._oParentSplitAppObj=t.oSplitAppObj;t.oSplitAppObj._oTaskExecutionUIPageObj=n}n.oTaskExecutionUIPage.setBindingContext(p);n.open()}};sap.uiext.inbox.splitapp.MasterPageController.prototype._openManageSubstitutionOverlay=function(e,t){var a=sap.ui.getCore().byId(t.Id+"--"+"substitutionRulesManager");if(a===undefined){jQuery.sap.require("sap.uiext.inbox.SubstitutionRulesManager");a=new sap.uiext.inbox.SubstitutionRulesManager(t.Id+"--"+"substitutionRulesManager");a.setParent(t.oSplitAppObj._oLaunchPad)}if(a.getModel()===undefined){var i=sap.ui.getCore().getModel();var o=new sap.ui.model.odata.ODataModel(i.sServiceUrl,true);o.oHeaders["x-csrf-token"]=i.oHeaders["x-csrf-token"];a.setModel(o)}jQuery.sap.require("sap.uiext.inbox.tcm.TCMModel");a.oTCMModel=new sap.uiext.inbox.tcm.TCMModel;a.open()};sap.uiext.inbox.splitapp.MasterPageController.prototype._refreshTasks=function(e,t){if(!t.oTaskData){t.oCoreModel=sap.ui.getCore().getModel();t.oCoreModel.read("/TaskCollection?$filter=Status ne 'COMPLETED'&$orderby=CreatedOn desc",null,null,true,function(e,a){t.oTaskData=e.results;t._updateModel(t)},function(e){sap.m.MessageToast.show(t._oBundle.getText("INBOX_LP_MSG_FAILED_TO_READ_SERVICE_WHILE_REFRESH"))})}};sap.uiext.inbox.splitapp.MasterPageController.prototype._updateModel=function(e){var t=e.masterPage.getModel();var a={TaskCollection:e.oTaskData};t.setData(a);e.oSplitAppObj._setModel(t,e.oSplitAppObj.filters)};sap.uiext.inbox.splitapp.MasterPageController.prototype._rerenderTask=function(e){var t=e.Status=="COMPLETED"?true:false;var a=sap.ui.getCore().byId(this.Id+"-list");var i=a.getSelectedItem();var o=i.getBindingContext().getPath();var s=o.split("/");if(t){this.masterPage.getModel().oData.TaskCollection.splice(s[2],1)}else{this.masterPage.getModel().oData.TaskCollection[s[2]]=e}this.masterPage.getModel().checkUpdate(false)};
//# sourceMappingURL=MasterPageController.js.map