/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *  * (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/f/GridContainer","sap/f/GridContainerItemLayoutData","sap/m/Button","sap/m/CustomListItem","sap/m/Dialog","sap/m/GenericTile","sap/m/HBox","sap/m/HeaderContainer","sap/m/IllustratedMessage","sap/m/IllustratedMessageSize","sap/m/IllustratedMessageType","sap/m/Label","sap/m/List","sap/m/ObjectIdentifier","sap/m/Title","sap/m/VBox","sap/m/library","sap/ui/core/EventBus","sap/ui/core/Icon","sap/ui/core/Lib","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/ushell/Container","sap/ushell/api/S4MyHome","./BasePanel","./MenuItem","./utils/Accessibility","./utils/AppManager","./utils/Constants","./utils/DataFormatUtils","./utils/Device","./utils/DragDropUtils","./utils/FESRUtil","./utils/InsightsUtils"],function(t,e,i,n,s,o,a,r,l,c,d,h,u,g,p,f,m,I,_,v,M,A,S,T,y,D,P,F,C,B,E,x,$,b,z){"use strict";function w(t){return t&&t.__esModule&&typeof t.default!=="undefined"?t.default:t}function H(t,e){try{var i=t()}catch(t){return e(t)}if(i&&i.then){return i.then(void 0,e)}return i}const R=I["ButtonType"];function L(t,e){try{var i=t()}catch(t){return e(true,t)}if(i&&i.then){return i.then(e.bind(null,false),e.bind(null,true))}return e(false,i)}const O=I["LoadState"];const V=w(D);const W=w(P);const k=F["checkPanelExists"];const U=w(C);const N=B["DEFAULT_BG_COLOR"];const j=B["END_USER_COLORS"];const G=B["MYHOME_PAGE_ID"];const Y=B["MYINSIGHT_SECTION_ID"];const J=B["SETTINGS_PANELS_KEYS"];const K=E["recycleId"];const X=x["DeviceType"];const q=x["fetchElementProperties"];const Q=$["focusDraggedItem"];const Z=b["addFESRId"];const tt=b["addFESRSemanticStepName"];const et=b["FESR_EVENTS"];const it=z["createShowMoreActionButton"];const nt=z["createShowMoreMenuItem"];const st=z["getAssociatedFullScreenMenuItem"];const ot=z["sortMenuItems"];var at=function(t){t["REFRESH"]="tiles-refresh";t["ADD_APPS"]="tiles-addSmartApps";t["EDIT_TILES"]="tiles-editTiles";return t}(at||{});var rt=function(t){t["REFRESH"]="container-tiles-refresh";t["ADD_APPS"]="container-tiles-addSmartApps";t["EDIT_TILES"]="container-tiles-editTiles";t["SHOW_MORE"]="tilesContainerFullScreenMenuItem";return t}(rt||{});var lt=function(t){t["ADD_TILES"]="tiles-addTilesButton";return t}(lt||{});var ct=function(t){t["ADD_TILES"]="container-tiles-addTilesButton";t["SHOW_MORE"]="tilesContanerFullScreenActionButton";return t}(ct||{});var dt=function(t){t["Standard"]="standard";t["StandardWide"]="standardWide";return t}(dt||{});const ht="sap.cux.home.FavAppPanel";const ut="sap.cux.home.AppsContainer";const gt=[at.REFRESH,at.ADD_APPS,at.EDIT_TILES,"showMore","settings"];const pt=()=>S.last("/core/shell/enablePersonalization")||S.last("/core/catalog/enabled");const ft=176;const mt=368;const It=16;const _t=V.extend("sap.cux.home.TilesPanel",{metadata:{library:"sap.cux.home",properties:{title:{type:"string",group:"Misc",defaultValue:"",visibility:"hidden"},key:{type:"string",group:"Misc",defaultValue:"",visibility:"hidden"},fullScreenName:{type:"string",group:"Misc",defaultValue:"SI1",visibility:"hidden"}},defaultAggregation:"tiles",aggregations:{content:{multiple:true,singularName:"content",visibility:"hidden"},tiles:{type:"sap.cux.home.App",multiple:true,singularName:"tile",visibility:"hidden"}},events:{handleHidePanel:{parameters:{}},handleUnhidePanel:{parameters:{}}}},constructor:function t(e,i){V.prototype.constructor.call(this,e,i);this._insightsSectionTitle=this._i18nBundle.getText("insights");this._addFromFavDialogId=`${this.getId()}-addFromFavDialog`;this.aInsightsApps=[];this._headerVisible=false},init:function e(){const i=this;V.prototype.init.call(this);this._controlMap=new Map;this._oData={tiles:[],activateInsightsTiles:true,activateInsightsTilesOnPhone:false,activateInsightsTilesOnDesktop:false};this._controlModel=new A(this._oData);this.appManagerInstance=U.getInstance();this.setProperty("key","tiles");this.setProperty("enableFullScreen",true);const n=this._createRefreshMenuItem(at.REFRESH,"tilesRefresh");const s=this._createEditTilesMenuItem(at.EDIT_TILES,"manageTiles");const o=[n,s];o.forEach(t=>this.addAggregation("menuItems",t));this._sortMenuItems(gt);const a=this._createAddTilesButton(lt.ADD_TILES,"addTiles");const r=[a];r.forEach(t=>this.addAggregation("actionButtons",t));this._createTilesFlexWrapper();T.getServiceAsync("VisualizationInstantiation").then(t=>{this.VizInstantiationService=t}).catch(e=>{t.error(e instanceof Error?e.message:String(e))});this.oEventBus=_.getInstance();this.oEventBus.subscribe("importChannel","tilesImport",function(t,e,n){try{return Promise.resolve(i.appManagerInstance.createInsightSection(i._i18nBundle.getText("insightsTiles"))).then(function(){return Promise.resolve(i._addSectionViz(n,Y)).then(function(){return Promise.resolve(i.refreshData()).then(function(){i._adjustLayout();i._importdone()})})})}catch(t){return Promise.reject(t)}},this);this._toggleTileActivity()},_toggleTileActivity:function e(){const i=this;const n=function(t){try{const e=t.getParameter("isMyHomeRoute");i._controlModel.setProperty("/activateInsightsTiles",e);const n=function(){if(e){const t=function(){if(i._appSwitched){return Promise.resolve(i.refreshData(true)).then(function(){i._appSwitched=false})}}();if(t&&t.then)return t.then(function(){})}else{i._appSwitched=true}}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(t){return Promise.reject(t)}};try{y.attachRouteMatched({},n,this)}catch(e){t.warning(e instanceof Error?e.message:String(e))}},_addSectionViz:function t(e,i){return e.reduce((t,e)=>t.then(()=>{if(e.isBookmark){return this.appManagerInstance.addBookMark(e)}else{return i?this.appManagerInstance.addVisualization(e.vizId,i):this.appManagerInstance.addVisualization(e.vizId)}}),Promise.resolve())},_importdone:function t(){const e={status:true};this.oEventBus.publish("importChannel","tilesImported",e)},_showPlaceHolders:function t(){const e=new Array(this._calculatePlaceholderTileCount()).fill(O.Loading);this.aInsightsApps=e.map((t,e)=>new a(K(`${this.getId()}--placeHolderTile--${e}`),{sizeBehavior:"Responsive",state:t,frameType:"OneByOne",mode:"IconMode",visible:true,renderOnThemeChange:true,ariaRole:"listitem",dropAreaOffset:8}).setLayoutData?.(new i(K(`${this.getId()}--placeHolderTileLayoutData--${e}`),{columns:2})));this._controlModel.setProperty("/tiles",this.aInsightsApps,undefined,true)},_clearPlaceHolders:function t(){this._controlModel.setProperty("/tiles",[])},renderPanel:function t(){try{let e=false;const i=this;function n(t){return e?t:Promise.resolve()}const s=L(function(){return H(function(){const t=i.getParent();i._showPlaceHolders();if(k(t,ut,ht)){const t=i._createAddFromFavMenuItem(at.ADD_APPS,"smartAppsDialog");i.addAggregation("menuItems",t);i._sortMenuItems(gt)}return Promise.resolve(i.refreshData()).then(function(t){e=true;return t})},function(t){i.fireHandleHidePanel()})},function(t,e){i.fireEvent("loaded");if(t)throw e;return e});return Promise.resolve(s&&s.then?s.then(n):n(s))}catch(o){return Promise.reject(o)}},_sortMenuItems:function t(e){const i=this.getAggregation("menuItems");let n=ot(e,i);this.removeAllAggregation("menuItems");n?.forEach(t=>this.addAggregation("menuItems",t))},refreshData:function t(e=false){try{const t=this;const i=t.getMetadata().getName();return Promise.resolve(t.appManagerInstance.fetchInsightApps(true,t._insightsSectionTitle)).then(function(n){function s(){t._clearPlaceHolders();t._controlModel.setProperty("/tiles",t.aInsightsApps);if(t.aInsightsApps?.length){t.fireHandleUnhidePanel();if(e){const e=t.getDeviceType()===X.Mobile;const i=e?t.tilesMobileContainer:t.tilesContainer;const n=i.getMetadata().getDefaultAggregationName();const s=i.getAggregation(n)||[];s.forEach(t=>t.refresh?.())}t._getInsightsContainer()?.updatePanelsItemCount(t.aInsightsApps.length,i);if(t._headerVisible){t.setProperty("title",`${t._i18nBundle?.getText("insightsTiles")} (${t.aInsightsApps.length})`)}}else{t.fireHandleHidePanel()}}t.aInsightsApps=n;const o=t.aInsightsApps.some(t=>t.isSmartBusinessTile);const a=function(){if(o){return Promise.resolve(M.load({name:"sap.cloudfnd.smartbusiness.lib.reusetiles"})).then(function(){})}}();return a&&a.then?a.then(s):s(a)})}catch(t){return Promise.reject(t)}},_createTilesFlexWrapper:function t(){if(!this._tilesWrapper){this._tilesWrapper=new m(`${this.getId()}-tilesWrapper`,{renderType:"Bare",width:"100%",items:[this._createMobileFlexWrapper(),this._createWrapperFlexBox()]});this._tilesWrapper.setModel(this._controlModel);this.addContent(this._tilesWrapper)}},_createMobileFlexWrapper:function t(){if(!this.tilesMobileContainer){this.tilesMobileContainer=new l(`${this.getId()}-insightsTilesMobileContainer`,{scrollStep:0,scrollStepByItem:1,gridLayout:true,scrollTime:1e3,showDividers:false,visible:"{/isPhone}"}).addStyleClass("sectionMarginTopTilesInsight sapMHeaderContainerMarginBottom");this._attachAggregationToContainer(this.tilesMobileContainer)}return this.tilesMobileContainer},_createWrapperFlexBox:function t(){if(!this.tilesContainer){this.tilesContainer=new e(`${this.getId()}-insightsTilesContainer`,{visible:"{= !${/isPhone}}"}).addStyleClass("insightTiles sapUiSmallMarginTop sapUiSmallMarginBottom");this._attachAggregationToContainer(this.tilesContainer)}return this.tilesContainer},_updateTilesActivity:function t(){const e=this.getDeviceType()===X.Mobile;const i=Boolean(this._controlModel.getProperty("/activateInsightsTiles"));this._controlModel.setProperty("/activateInsightsTilesOnPhone",i&&e);this._controlModel.setProperty("/activateInsightsTilesOnDesktop",i&&!e)},_attachAggregationToContainer:function t(e){e.setModel(this._controlModel);const n=e.getMetadata().getDefaultAggregationName();const s=this.getDeviceType()===X.Mobile;e.bindAggregation(n,{path:"/tiles",factory:(t,e)=>{const n=e.getObject();if(n instanceof a){return n}const o=this.VizInstantiationService.instantiateVisualization(n.visualization);o.setLayoutData?.(new i(`${this.getId()}-itemLayoutData-${t}`,{minRows:2,columns:o.getDisplayFormat?.()===dt.Standard?2:4}));o?.bindProperty?.("active",s?"/activateInsightsTilesOnPhone":"/activateInsightsTilesOnDesktop");this._setDropAreaRectFunction(o);return o}});this.addDragDropConfigTo(e,t=>this._handleTilesDnd(t))},_setDropAreaRectFunction:function t(e){const i=8;const n=e;if(typeof n.getDropAreaRect!=="function"){Object.defineProperty(e,"getDropAreaRect",{value:function(){const t=this.getDomRef();if(!t)return null;const e=t.getBoundingClientRect();return{left:e.left-i,right:e.right+i,top:e.top,bottom:e.bottom,width:e.width,height:e.height}}})}},_handleTilesDnd:function t(e){const i=e.getParameter?.("dropPosition"),n=e?.getParameter?.("draggedControl"),s=e.getParameter("droppedControl"),o=n.getParent()?.indexOfItem(n);let a=n.getParent()?.indexOfItem(s);if(i==="Before"&&o===a-1){a--}else if(i==="After"&&o===a+1){a++}if(o!==a){void this._DragnDropTiles(o,a,i)}},_DragnDropTiles:function t(e,i,n){try{const t=this;if(n==="Before"&&e<i){i--}else if(n==="After"&&e>i){i++}const s=t.aInsightsApps[i],o=t.aInsightsApps.splice(e,1)[0];t.aInsightsApps.splice(i,0,o);const a={pageId:G,sourceSectionIndex:o.persConfig?.sectionIndex,sourceVisualizationIndex:o.persConfig?.visualizationIndex,targetSectionIndex:s.persConfig?.sectionIndex,targetVisualizationIndex:s.persConfig?.visualizationIndex};t._controlModel.setProperty("/tiles",t.aInsightsApps);return Promise.resolve(t.appManagerInstance.moveVisualization(a)).then(function(){return Promise.resolve(t.refreshData(true)).then(function(){setTimeout(()=>{Q(t.tilesContainer,i)},0)})})}catch(t){return Promise.reject(t)}},handleEditTiles:function t(e){let i=e.getSource().getParent()||this;if(i instanceof _t){i=i.getParent()}i?._getLayout().openSettingsDialog(J.INSIGHTS_TILES)},handleHideHeader:function t(){this._headerVisible=false;this.setProperty("title","");this._toggleHeaderActions(false)},handleAddHeader:function t(){this._headerVisible=true;this.setProperty("title",`${this._i18nBundle?.getText("insightsTiles")} (${this.aInsightsApps.length})`);this._toggleHeaderActions(true)},_closeAddFromFavDialog:function t(){const e=this._controlMap.get(`${this._addFromFavDialogId}-list`);e?.removeSelections();this._controlMap.get(this._addFromFavDialogId)?.close()},navigateToAppFinder:function t(){try{return Promise.resolve(T.getServiceAsync("Navigation")).then(function(t){const e={pageID:G,sectionID:Y};return Promise.resolve(t.navigate({target:{shellHash:`Shell-appfinder?&/catalog/${JSON.stringify(e)}`}})).then(function(){})})}catch(t){return Promise.reject(t)}},_getLegendColor:function t(e){return j().find(t=>t.value===e)||N()},_handleAddFromFavApps:function t(){try{const t=this;return Promise.resolve(t._getFavToAdd()).then(function(e){const i=t._generateAddFromFavAppsDialog();t._controlMap.get(`${t._addFromFavDialogId}-errorMessage`)?.setVisible(e.length===0);t._generateAddFromFavAppsListItems(e);i.open()})}catch(t){return Promise.reject(t)}},_getFavToAdd:function t(){try{const t=this;return Promise.resolve(t.appManagerInstance.fetchFavVizs(false,true)).then(function(e){const i=e.filter(function(t){return t.isCount||t.isSmartBusinessTile});const n=i.filter(e=>{const i=t.aInsightsApps.findIndex(function(t){return!e.visualization?.isBookmark&&t.visualization?.vizId===e.visualization?.vizId||e.visualization?.isBookmark&&t.visualization?.targetURL===e.visualization?.targetURL});return i===-1});return n})}catch(t){return Promise.reject(t)}},_getSelectedInsights:function t(){const e=this._controlMap.get(`${this._addFromFavDialogId}-list`);return e.getSelectedItems()||[]},_generateAddFromFavAppsListItems:function t(e){const i=this._addFromFavDialogId;const n=this._controlMap.get(`${i}-list`);if(e.length){n.destroyItems();const t=e.map((t,e)=>new s({id:`${i}-listItem-${e}`,content:[new r({id:`${i}-listItem-${e}-content`,alignItems:"Center",items:[new v({id:`${i}-listItem-${e}-content-icon`,src:t.icon,backgroundColor:this._getLegendColor(typeof t.BGColor==="object"?t.BGColor.key:t.BGColor??"").value,color:"white",width:"2.25rem",height:"2.25rem",size:"1.25rem"}).addStyleClass("sapUiRoundedBorder sapUiTinyMargin"),new p({id:`${i}-listItem-${e}-content-identifier`,title:t.title,text:t.subtitle,tooltip:t.title}).addStyleClass("sapUiTinyMargin")]})]}).addStyleClass("sapUiContentPadding").data("app",t));t.forEach(t=>n.addItem(t))}n?.setVisible(e.length!==0)},_generateAddFromFavAppsDialog:function t(){const e=this._addFromFavDialogId;const i=()=>{const t=this._getSelectedInsights();this._controlMap.get(`${e}-addBtn`).setEnabled(t.length>0)};if(!this._controlMap.get(e)){const t=(t,e)=>{const i=new n(t,{icon:"sap-icon://action",text:this._i18nBundle.getText("appFinderBtn"),press:()=>{this._closeAddFromFavDialog();void this.navigateToAppFinder()},visible:pt(),type:e??R.Default});tt(i,et.PRESS,"tilesAppFinder");return i};this._controlMap.set(`${e}-list`,new g({id:`${e}-list`,mode:"MultiSelect",selectionChange:i}));const s=new n({id:`${e}-addBtn`,text:this._i18nBundle.getText("addBtn"),type:"Emphasized",press:()=>{void this._addFromFavApps()},enabled:false});tt(s,et.PRESS,"addSmartApps");this._controlMap.set(`${e}-addBtn`,s);this._controlMap.set(`${e}-errorMessage`,new c({id:`${e}-errorMessage`,illustrationSize:d.Small,illustrationType:h.AddDimensions,title:this._i18nBundle.getText("noAppsTitle"),description:this._i18nBundle.getText("tilesSectionNoDataDescription"),visible:true}).addStyleClass("sapUiLargeMarginTop"));const a=new o(e,{title:this._i18nBundle.getText("addSmartApps"),content:[new u({id:`${e}-label`,text:this._i18nBundle.getText("suggTileDialogLabel"),wrapping:true}).addStyleClass("sapMTitleAlign sapUiTinyMarginTopBottom sapUiSmallMarginBeginEnd"),new r({id:`${e}-textContainer`,justifyContent:"SpaceBetween",alignItems:"Center",items:[new f({id:`${e}-text`,text:this._i18nBundle.getText("suggTileDialogTitle")}),t(`${e}-addAppsBtn`,R.Transparent)]}).addStyleClass("sapUiTinyMarginTop dialogHeader sapUiSmallMarginBeginEnd"),this._controlMap.get(`${e}-list`),this._controlMap.get(`${e}-errorMessage`)],contentWidth:"42.75rem",contentHeight:"32.5rem",endButton:new n({id:`${e}-addFromFavDialogCloseBtn`,text:this._i18nBundle.getText("XBUT_CLOSE"),press:this._closeAddFromFavDialog.bind(this)}),escapeHandler:this._closeAddFromFavDialog.bind(this),buttons:[this._controlMap.get(`${e}-addBtn`),new n({id:`${e}-cancelBtn`,text:this._i18nBundle.getText("cancelBtn"),press:this._closeAddFromFavDialog.bind(this)})]}).addStyleClass("sapContrastPlus sapCuxAddFromInsightsDialog");this.addDependent(a);this._controlMap.set(e,a)}i();return this._controlMap.get(e)},_addFromFavApps:function t(){try{const t=this;const e=t._controlMap.get(t._addFromFavDialogId);e.setBusy(true);const i=t._getSelectedInsights();return Promise.resolve(t.appManagerInstance._getSections()).then(function(n){return Promise.resolve(i.reduce(function(e,i){return Promise.resolve(e).then(function(){const e=i.data("app");const s={pageId:G,sourceSectionIndex:e.persConfig?.sectionIndex,sourceVisualizationIndex:e.persConfig?.visualizationIndex,targetSectionIndex:t.appManagerInstance.insightsSectionIndex,targetVisualizationIndex:-1};if(e.visualization?.isBookmark){const e=n.findIndex(t=>t.default);if(e===-1){s.sourceSectionIndex=0;s.sourceVisualizationIndex=0;s.targetSectionIndex=t.appManagerInstance.insightsSectionIndex+1}else{s.sourceSectionIndex=e;s.sourceVisualizationIndex=n[e]?.visualizations?.length||0;s.targetSectionIndex=t.appManagerInstance.insightsSectionIndex}}if(e.visualization?.displayFormatHint!=="standard"&&e.visualization?.displayFormatHint!=="standardWide"){if(e.visualization?.supportedDisplayFormats==="standard"){e.visualization.displayFormatHint="standard"}else if(e.visualization?.supportedDisplayFormats==="standardWide"){e.visualization.displayFormatHint="standardWide"}}if(!e.visualization?.vizId){e.visualization.vizId=e.visualization?.targetURL??""}const o=function(){if(e.visualization?.isBookmark===true){return Promise.resolve(t.appManagerInstance.addBookMark(e.visualization,s)).then(function(){})}else{return Promise.resolve(t.appManagerInstance.addVisualization(e.visualization?.vizId,Y)).then(function(){})}}();if(o&&o.then)return o.then(function(){})})},Promise.resolve())).then(function(){return Promise.resolve(t.refreshData()).then(function(){e.setBusy(false);e.close()})})})}catch(t){return Promise.reject(t)}},_calculateVisibleTileCount:function t(e){const i=this._getInsightsContainer()?._getLayout();const n=i?.getDomRef();const s=e||[];let o=0;if(n&&s.length){const t=i.getProperty("showHeader");const e=t?1:0;const a=n.childNodes[e];const r=q(a,["width","padding-left","padding-right"]);let l=r.width-r["padding-left"]-r["padding-right"];const c={};c[dt.Standard]=ft+It;c[dt.StandardWide]=mt+It;let d=c[s[o].visualization?.displayFormatHint??dt.Standard];do{l-=d;++o;d=c[s[o]?.visualization?.displayFormatHint??dt.Standard]}while(l>d)}return o||1},_calculatePlaceholderTileCount:function t(){const e=this._getInsightsContainer()?._getLayout()?.getDomRef();let i=0;if(e){const t=e.childNodes[0];const n=q(t,["width","padding-left","padding-right"]);let s=n.width-n["padding-left"]-n["padding-right"];const o=ft+It;i=Math.floor(s/o)}return i||1},_adjustLayout:function t(){const e=this._getInsightsContainer()?._getLayout();const i=this.getDeviceType()===X.Mobile;if(e){const t=i?this.aInsightsApps?.length:this._calculateVisibleTileCount(this.aInsightsApps);const n=e._getCurrentExpandedElementName()===this.getProperty("fullScreenName");this._controlModel.setProperty("/tiles",n?this.aInsightsApps:this.aInsightsApps?.slice(0,t));this._controlModel.setProperty("/isPhone",i);this._updateTilesActivity();const s=n||this.aInsightsApps.length>t;if(this._headerVisible){if(!i){this.getAggregation("actionButtons")?.forEach(t=>{if(t.getId().includes(lt.ADD_TILES)){this._getInsightsContainer().toggleActionButton(t,true)}})}this._getInsightsContainer()?.toggleFullScreenElements(this,s)}else{const t=st(this);const e=t?.getTitle()??"";this._getInsightsContainer()?.updateMenuItem(this._controlMap.get(`${this.getId()}-${rt.SHOW_MORE}`),s,e);this._getInsightsContainer()?.updateActionButton(this._controlMap.get(`${this.getId()}-${ct.SHOW_MORE}`),s,e)}}},_getInsightsContainer:function t(){if(!this.insightsContainer){this.insightsContainer=this.getParent()}return this.insightsContainer},getContainerMenuItems:function t(){if(!this._containerMenuItems){const t=this._createRefreshMenuItem(rt.REFRESH,"containerTilesRefresh");const e=this._createEditTilesMenuItem(rt.EDIT_TILES,"containerManageTiles");const i=nt(this,rt.SHOW_MORE,"containerTilesShowMore");const n=this.getParent();this._controlMap.set(`${this.getId()}-${rt.SHOW_MORE}`,i);this._containerMenuItems=[t,e,i];if(k(n,ut,ht)){const t=this._createAddFromFavMenuItem(rt.ADD_APPS,"containerSmartAppsDialog");this._containerMenuItems.splice(1,0,t)}}return this._containerMenuItems},getContainerActionButtons:function t(){if(!this._containerActionButtons){this._containerActionButtons=[];this._containerActionButtons.push(this._createAddTilesButton(ct.ADD_TILES,"containerSmartAppsDialog"));const t=it(this,ct.SHOW_MORE,"containerTilesShowMore");if(t){this._controlMap.set(`${this.getId()}-${ct.SHOW_MORE}`,t);this._containerActionButtons.push(t)}}return this._containerActionButtons},_createRefreshMenuItem:function t(e,i){const n=new W(`${this.getId()}-${e}`,{title:this._i18nBundle.getText("refresh"),icon:"sap-icon://refresh",visible:false,press:()=>void this.refreshData(true)});this._controlMap.set(`${this.getId()}-${e}`,n);if(i){Z(n,i)}return n},_createAddFromFavMenuItem:function t(e,i){if(!this._controlMap.get(`${this.getId()}-${e}`)){const t=new W(`${this.getId()}-${e}`,{title:this._i18nBundle.getText("addSmartApps"),icon:"sap-icon://duplicate",visible:false,press:()=>void this._handleAddFromFavApps()});this._controlMap.set(`${this.getId()}-${e}`,t);if(i){Z(t,i)}}return this._controlMap.get(`${this.getId()}-${e}`)},_createEditTilesMenuItem:function t(e,i){const n=new W(`${this.getId()}-${e}`,{title:this._i18nBundle.getText("editLinkTiles"),icon:"sap-icon://edit",visible:false,press:t=>this.handleEditTiles(t)});this._controlMap.set(`${this.getId()}-${e}`,n);if(i){Z(n,i)}return n},_createAddTilesButton:function t(e,i){const s=this;const o=new n(`${this.getId()}-${e}`,{text:this._i18nBundle.getText("appFinderLink"),tooltip:this._i18nBundle.getText("appFinderLink"),press:function(){try{const t=s._getInsightsContainer();const e=function(){if(k(t,ut,ht)){void s._handleAddFromFavApps()}else{return Promise.resolve(s.navigateToAppFinder()).then(function(){})}}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(t){return Promise.reject(t)}}});this._controlMap.set(`${this.getId()}-${e}`,o);if(i){Z(o,i)}return o},_toggleHeaderActions:function t(e){this.getAggregation("menuItems")?.forEach(t=>{this._getInsightsContainer()?.toggleMenuListItem(t,e)});this.getAggregation("actionButtons")?.forEach(t=>this._getInsightsContainer()?.toggleActionButton(t,e))}});_t.tilesMenuItems=at;_t.tilesContainerMenuItems=rt;_t.tilesActionButtons=lt;_t.tilesContainerActionButtons=ct;_t.DisplayFormat=dt;return _t});
//# sourceMappingURL=TilesPanel.js.map