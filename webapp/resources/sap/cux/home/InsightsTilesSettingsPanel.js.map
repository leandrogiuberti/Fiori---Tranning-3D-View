{"version":3,"file":"InsightsTilesSettingsPanel.js","names":["sap","ui","define","Log","Button","Column","ColumnListItem","FlexBox","HBox","MessageBox","MessageToast","ObjectIdentifier","ScrollContainer","SearchField","Switch","Table","Text","Title","VBox","UI5Element","Icon","__BaseSettingsPanel","___TilesPanel","___utils_Accessibility","__AppManager","___utils_Constants","___utils_DragDropUtils","_interopRequireDefault","obj","__esModule","default","_catch","body","recover","result","e","then","BaseSettingsPanel","_finallyRethrows","finalizer","bind","DisplayFormat","getInvisibleText","AppManager","MYHOME_PAGE_ID","SETTINGS_PANELS_KEYS","focusDraggedItem","InsightsTilesSettingsPanel","extend","init","_init","BaseSettingsPanel.prototype.init.call","this","_controlMap","Map","setProperty","INSIGHTS_TILES","_i18nBundle","getText","appManagerInstance","getInstance","_allInsightsApps","_wrapperId","getId","set","alignItems","justifyContent","height","width","direction","addStyleClass","addAggregation","get","_showMessageStrip","_showToolbar","_showTilesList","attachPanelNavigated","setValue","fetchInsightApps","insightsApps","setText","length","_createTableRows","oMessageStripVBox","addItem","text","_getWrapperFlexBox","titleStyle","oInvisibleTitleText","liveChange","oEvent","_onTilesSearch","ariaLabelledBy","titleContainer","toolbarContainer","items","event","sSearchQuery","getSource","getValue","toLowerCase","filteredTiles","filter","app","visualization","title","includes","_createTableWithContainer","table","columns","hAlign","invisibleDragDropText","addDragDropConfigTo","_handleTilesDrop","scrollContainer","vertical","horizontal","content","containerVBox","containerFlexBox","_this","_temp2","iDropItemIndex","oDragItem","getParameter","draggedControl","iDragItemIndex","getParent","indexOfItem","oDropItem","droppedControl","oDragItemPersConfig","data","oDropItemPersConfig","_temp","setBusy","moveConfigs","pageId","sourceSectionIndex","sectionIndex","sourceVisualizationIndex","visualizationIndex","targetSectionIndex","targetVisualizationIndex","Promise","resolve","moveVisualization","_this$appManagerInsta","_getTilePanel","refreshData","reject","removeAllItems","forEach","filteredTile","index","_createColumnListItem","insightsApp","id","existingControl","getElementById","destroy","columnListItem","type","addCell","src","aSupportedDisplayFormats","supportedDisplayFormats","convertSwitchContainer","isCount","isSmartBusinessTile","indexOf","Standard","StandardWide","wrapping","state","displayFormatHint","change","_onConvertTilePress","customTextOn","customTextOff","tooltip","deleteBtn","icon","press","_onDeleteApp","buttonsWrapper","subtitle","persConfig","_this2","updateConfigs","oVisualizationData","updateVisualizations","show","styleClass","QUESTION","actions","Action","CANCEL","emphasizedAction","onClose","action","_handleDeleteApp","_this3","_temp4","_temp3","removeVisualizations","sectionId","vizIds","_this3$appManagerInst","err","error","_wasThrown","_result","_getPanel"],"sources":["InsightsTilesSettingsPanel.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\n\nimport Log from \"sap/base/Log\";\nimport Button from \"sap/m/Button\";\nimport Column from \"sap/m/Column\";\nimport ColumnListItem from \"sap/m/ColumnListItem\";\nimport FlexBox from \"sap/m/FlexBox\";\nimport HBox from \"sap/m/HBox\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport MessageToast from \"sap/m/MessageToast\";\nimport ObjectIdentifier from \"sap/m/ObjectIdentifier\";\nimport ScrollContainer from \"sap/m/ScrollContainer\";\nimport SearchField from \"sap/m/SearchField\";\nimport Switch from \"sap/m/Switch\";\nimport Table from \"sap/m/Table\";\nimport Text from \"sap/m/Text\";\nimport Title from \"sap/m/Title\";\nimport VBox from \"sap/m/VBox\";\nimport Event from \"sap/ui/base/Event\";\nimport Control from \"sap/ui/core/Control\";\nimport UI5Element from \"sap/ui/core/Element\";\nimport Icon from \"sap/ui/core/Icon\";\nimport { DropInfo$DropEvent } from \"sap/ui/core/dnd/DropInfo\";\nimport BaseSettingsPanel from \"./BaseSettingsPanel\";\nimport TilesPanel, { DisplayFormat } from \"./TilesPanel\";\nimport { ICustomVisualization, IPersConfig, ISectionAndVisualization } from \"./interface/AppsInterface\";\nimport { getInvisibleText } from \"./utils/Accessibility\";\nimport AppManager from \"./utils/AppManager\";\nimport { MYHOME_PAGE_ID, SETTINGS_PANELS_KEYS } from \"./utils/Constants\";\nimport { focusDraggedItem } from \"./utils/DragDropUtils\";\n\ninterface IDragEvent {\n\tdraggedControl: ColumnListItem;\n\tdroppedControl: ColumnListItem;\n}\n\n/**\n *\n * Class for My Home Insights Tiles Settings Panel.\n *\n * @extends BaseSettingsPanel\n *\n * @author SAP SE\n * @version 0.0.1\n * @since 1.121\n * @private\n *\n * @alias sap.cux.home.InsightsTilesSettingsPanel\n */\nexport default class InsightsTilesSettingsPanel extends BaseSettingsPanel {\n\tprivate _wrapperId!: string;\n\tprivate _controlMap!: Map<string, Control | Element>;\n\tprivate _allInsightsApps!: ICustomVisualization[];\n\tprivate appManagerInstance!: AppManager;\n\t/**\n\t * Init lifecycle method\n\t *\n\t * @public\n\t * @override\n\t */\n\tpublic init() {\n\t\tsuper.init();\n\t\tthis._controlMap = new Map();\n\n\t\t//setup panel\n\t\tthis.setProperty(\"key\", SETTINGS_PANELS_KEYS.INSIGHTS_TILES);\n\t\tthis.setProperty(\"title\", this._i18nBundle.getText(\"insightsTiles\"));\n\t\tthis.setProperty(\"icon\", \"sap-icon://manager-insight\");\n\n\t\t//Fetch Data\n\t\tthis.appManagerInstance = AppManager.getInstance();\n\t\tthis._allInsightsApps = [];\n\n\t\t//setup Container & content Aggregation\n\t\tthis._wrapperId = `${this.getId()}-tilesSettingsWrapper`;\n\t\tthis._controlMap.set(\n\t\t\tthis._wrapperId,\n\t\t\tnew FlexBox(this._wrapperId, {\n\t\t\t\talignItems: \"Start\",\n\t\t\t\tjustifyContent: \"Start\",\n\t\t\t\theight: \"100%\",\n\t\t\t\twidth: \"100%\",\n\t\t\t\tdirection: \"Column\"\n\t\t\t}).addStyleClass(\"flexContainerCards\")\n\t\t);\n\t\tthis.addAggregation(\"content\", this._controlMap.get(this._wrapperId) as FlexBox);\n\n\t\t//setup content for the settings panel\n\t\tthis._showMessageStrip();\n\t\tthis._showToolbar();\n\t\tthis._showTilesList();\n\n\t\t//fired every time on panel navigation\n\t\tthis.attachPanelNavigated(() => {\n\t\t\t(this._controlMap.get(`${this._wrapperId}--searchField`) as SearchField).setValue(\"\");\n\t\t\tvoid this.appManagerInstance.fetchInsightApps(true, this._i18nBundle.getText(\"insights\") as string).then((insightsApps) => {\n\t\t\t\tthis._allInsightsApps = insightsApps;\n\t\t\t\t(this._controlMap.get(`${this._wrapperId}--title`) as Title).setText(\n\t\t\t\t\t`${this._i18nBundle.getText(\"insightsTilesTitle\")} (${this._allInsightsApps.length})`\n\t\t\t\t);\n\t\t\t\tthis._createTableRows(this._allInsightsApps);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Add the Message Strip to the wrapper FlexBox.\n\t *\n\t * @private\n\t */\n\n\tprivate _showMessageStrip() {\n\t\tconst oMessageStripVBox = new VBox(`${this._wrapperId}--msgStripContainer`, {\n\t\t\twidth: \"calc(100% - 2rem)\"\n\t\t}).addStyleClass(\"sapUiSmallMarginTop sapUiSmallMarginBegin\");\n\t\toMessageStripVBox.addItem(\n\t\t\tnew Text(`${this._wrapperId}--msgStripText`, {\n\t\t\t\ttext: this._i18nBundle.getText(\"insightAppsTabText\")\n\t\t\t})\n\t\t);\n\t\tthis._getWrapperFlexBox().addItem(oMessageStripVBox);\n\t}\n\n\t/**\n\t * Add the Header ToolBar to the wrapper FlexBox.\n\t *\n\t * @private\n\t */\n\tprivate _showToolbar() {\n\t\t// To address an accessibility issue, we adjusted the font size via a custom class (`tilesFontChange`)\n\t\t// while retaining the semantic heading level as H3 to preserve hierarchy structure.\n\t\t// This ensures the title remains visually balanced without compromising screen reader navigation.\n\t\tthis._controlMap.set(\n\t\t\t`${this._wrapperId}--title`,\n\t\t\tnew Title(`${this._wrapperId}--title`, {\n\t\t\t\ttext: `${this._i18nBundle.getText(\"insightsTilesTitle\")} (${this._allInsightsApps.length})`,\n\t\t\t\ttitleStyle: \"H3\",\n\t\t\t\twidth: \"100%\"\n\t\t\t}).addStyleClass(\"tilesFontChange\")\n\t\t);\n\t\tconst oInvisibleTitleText = getInvisibleText(`${this.getId()}--TileTitleText`, this._i18nBundle.getText(\"insightsTiles\"));\n\t\tthis._controlMap.set(\n\t\t\t`${this._wrapperId}--searchField`,\n\t\t\tnew SearchField(`${this._wrapperId}--pagesListSearch`, {\n\t\t\t\tliveChange: (oEvent) => this._onTilesSearch(oEvent),\n\t\t\t\twidth: \"100%\",\n\t\t\t\tariaLabelledBy: [oInvisibleTitleText.getId(), this._wrapperId + \"--msgStripText\", this._wrapperId + \"--title\"]\n\t\t\t}).addStyleClass(\"sapUiTinyMarginTop\")\n\t\t);\n\n\t\tconst titleContainer = new HBox(`${this._wrapperId}--titleContainer`, {\n\t\t\talignItems: \"Center\",\n\t\t\tjustifyContent: \"SpaceBetween\",\n\t\t\twidth: \"100%\"\n\t\t});\n\t\ttitleContainer.addItem(this._controlMap.get(`${this._wrapperId}--title`) as Title);\n\t\ttitleContainer.addItem(oInvisibleTitleText);\n\t\tconst toolbarContainer = new VBox(`${this._wrapperId}--toolbarContainer`, {\n\t\t\twidth: \"calc(100% - 2rem)\",\n\t\t\titems: [titleContainer, this._controlMap.get(`${this._wrapperId}--searchField`) as SearchField]\n\t\t}).addStyleClass(\"sapUiSmallMarginTop sapUiSmallMarginBegin\");\n\t\tthis._getWrapperFlexBox().addItem(toolbarContainer);\n\t}\n\n\t/**\n\t * Handles Search Field change\n\t * @private\n\t */\n\tprivate _onTilesSearch(event: Event) {\n\t\tconst sSearchQuery = event.getSource<SearchField>().getValue().toLowerCase();\n\t\tconst filteredTiles = this._allInsightsApps.filter((app) => app.visualization?.title?.toLowerCase().includes(sSearchQuery));\n\t\tthis._createTableRows(filteredTiles);\n\t}\n\n\t/**\n\t * Adds Tiles List Table to Wrapper FlexBox\n\t * @private\n\t */\n\tprivate _showTilesList() {\n\t\tthis._createTableWithContainer();\n\t\tthis._createTableRows(this._allInsightsApps);\n\t}\n\n\t/**\n\t * Creates Table to Render Tiles List\n\t * @private\n\t */\n\tprivate _createTableWithContainer() {\n\t\tconst table = new Table(`${this._wrapperId}-table`, {\n\t\t\tcolumns: [\n\t\t\t\tnew Column(`${this._wrapperId}-table-dndIcon`, {\n\t\t\t\t\thAlign: \"Center\",\n\t\t\t\t\twidth: \"6%\"\n\t\t\t\t}),\n\t\t\t\tnew Column(`${this._wrapperId}-table-title`, {\n\t\t\t\t\twidth: \"94%\"\n\t\t\t\t})\n\t\t\t]\n\t\t}).addStyleClass(\"sapContrastPlus\");\n\t\tconst invisibleDragDropText = getInvisibleText(`${this._wrapperId}-dndAria`, this._i18nBundle.getText(\"keyPressAriaText\"));\n\t\tthis.addDragDropConfigTo(table, (event) => void this._handleTilesDrop(event));\n\t\tthis._controlMap.set(`${this._wrapperId}-table`, table);\n\t\tconst scrollContainer = new ScrollContainer(`${this._wrapperId}-scrollContainer`, {\n\t\t\tvertical: true,\n\t\t\thorizontal: false,\n\t\t\theight: \"100%\",\n\t\t\twidth: \"100%\",\n\t\t\tcontent: [this._controlMap.get(`${this._wrapperId}-table`) as Table]\n\t\t});\n\t\tconst containerVBox = new VBox(`${this._wrapperId}-containerVBox`, {\n\t\t\theight: \"100%\",\n\t\t\twidth: \"100%\",\n\t\t\tjustifyContent: \"Start\",\n\t\t\tdirection: \"Column\",\n\t\t\titems: [invisibleDragDropText, scrollContainer]\n\t\t});\n\t\tconst containerFlexBox = new FlexBox(`${this._wrapperId}-containerFlexBox`, {\n\t\t\talignItems: \"Start\",\n\t\t\tjustifyContent: \"Start\",\n\t\t\theight: \"100%\",\n\t\t\twidth: \"calc(100% - 2rem)\",\n\t\t\tdirection: \"Row\",\n\t\t\titems: [containerVBox]\n\t\t}).addStyleClass(\"sapUiSmallMarginBegin sapUiSmallMarginTop flexContainerCards\");\n\n\t\tthis._getWrapperFlexBox().addItem(containerFlexBox);\n\t}\n\n\t/**\n\t * Handles Drag Drop of Tiles\n\t * @private\n\t */\n\tprivate async _handleTilesDrop(oEvent: DropInfo$DropEvent | IDragEvent) {\n\t\tconst oDragItem = ((oEvent as DropInfo$DropEvent).getParameter?.(\"draggedControl\") ||\n\t\t\t\t(oEvent as IDragEvent).draggedControl) as ColumnListItem,\n\t\t\tiDragItemIndex = (oDragItem.getParent() as Table)?.indexOfItem(oDragItem),\n\t\t\toDropItem = ((oEvent as DropInfo$DropEvent).getParameter?.(\"droppedControl\") ||\n\t\t\t\t(oEvent as IDragEvent).droppedControl) as ColumnListItem,\n\t\t\tiDropItemIndex = (oDragItem.getParent() as Table)?.indexOfItem(oDropItem),\n\t\t\toDragItemPersConfig = oDragItem.data(\"persConfig\") as IPersConfig,\n\t\t\toDropItemPersConfig = oDropItem.data(\"persConfig\") as IPersConfig,\n\t\t\ttable = this._controlMap.get(`${this._wrapperId}-table`) as Table;\n\t\tif (iDragItemIndex !== iDropItemIndex) {\n\t\t\tthis._getWrapperFlexBox().setBusy(true);\n\t\t\tconst moveConfigs = {\n\t\t\t\tpageId: MYHOME_PAGE_ID,\n\t\t\t\tsourceSectionIndex: oDragItemPersConfig.sectionIndex as number,\n\t\t\t\tsourceVisualizationIndex: oDragItemPersConfig.visualizationIndex as number,\n\t\t\t\ttargetSectionIndex: oDropItemPersConfig.sectionIndex as number,\n\t\t\t\ttargetVisualizationIndex: oDropItemPersConfig.visualizationIndex as number\n\t\t\t};\n\t\t\tawait this.appManagerInstance.moveVisualization(moveConfigs);\n\t\t\tthis._allInsightsApps = await this.appManagerInstance.fetchInsightApps(true, this._i18nBundle.getText(\"insights\") as string);\n\t\t\tthis._createTableRows(this._allInsightsApps);\n\t\t\tawait this._getTilePanel().refreshData();\n\t\t\tthis._getWrapperFlexBox().setBusy(false);\n\t\t}\n\t\tfocusDraggedItem(table, iDropItemIndex);\n\t}\n\n\t/**\n\t * Create Table Rows\n\t * @private\n\t */\n\tprivate _createTableRows(insightsApps: ICustomVisualization[]) {\n\t\tconst table = this._controlMap.get(`${this._wrapperId}-table`) as Table;\n\t\ttable.removeAllItems();\n\t\tlet filteredTiles = insightsApps;\n\t\tconst sSearchQuery = (this._controlMap.get(`${this._wrapperId}--searchField`) as SearchField).getValue();\n\t\tif (sSearchQuery) {\n\t\t\tfilteredTiles = this._allInsightsApps.filter((app) => app.visualization?.title?.toLowerCase().includes(sSearchQuery));\n\t\t}\n\t\tfilteredTiles.forEach((filteredTile, index) => {\n\t\t\ttable.addItem(this._createColumnListItem(filteredTile, index));\n\t\t});\n\t}\n\n\t/**\n\t * Create ColumnListItem for each Insights App\n\t * @private\n\t */\n\tprivate _createColumnListItem(insightsApp: ICustomVisualization, index: number): ColumnListItem {\n\t\tconst id = `insightsTiles-${index}-listItem`;\n\t\tconst existingControl = UI5Element.getElementById(id);\n\t\tif (existingControl) {\n\t\t\texistingControl.destroy();\n\t\t}\n\t\t// Create Column List Item\n\t\tconst columnListItem = new ColumnListItem({\n\t\t\tid,\n\t\t\ttype: \"Inactive\",\n\t\t\tariaLabelledBy: [id, `${this._wrapperId}-dndAria`]\n\t\t}).addStyleClass(\"insightsListItem insightsListMargin manageSectionsTable\");\n\n\t\t// Add first cell as Drag & Drop Icon\n\t\tcolumnListItem.addCell(\n\t\t\tnew HBox(`${id}-DndHBox`, {\n\t\t\t\titems: [\n\t\t\t\t\tnew Icon(`${id}-DndIcon`, {\n\t\t\t\t\t\tsrc: \"sap-icon://BusinessSuiteInAppSymbols/icon-grip\"\n\t\t\t\t\t}).addStyleClass(\"tilesDndIcon\")\n\t\t\t\t]\n\t\t\t})\n\t\t);\n\n\t\t//Create Convert Switch\n\t\tconst aSupportedDisplayFormats = insightsApp.visualization?.supportedDisplayFormats || \"\";\n\t\tlet convertSwitchContainer;\n\t\t// if it is not static tile and standard/standardWide display format is supported, display convert switch\n\t\tif (\n\t\t\t(insightsApp.isCount || insightsApp.isSmartBusinessTile) &&\n\t\t\taSupportedDisplayFormats.length > 1 &&\n\t\t\taSupportedDisplayFormats.indexOf(DisplayFormat.Standard) > -1 &&\n\t\t\taSupportedDisplayFormats.indexOf(DisplayFormat.StandardWide) > -1\n\t\t) {\n\t\t\tconvertSwitchContainer = new HBox({\n\t\t\t\tid: `${id}-convertSwitchContainer`,\n\t\t\t\talignItems: \"Center\",\n\t\t\t\titems: [\n\t\t\t\t\tnew Text({\n\t\t\t\t\t\tid: `${id}-switchAppSizeLabel`,\n\t\t\t\t\t\ttext: this._i18nBundle.getText(\"wide\"),\n\t\t\t\t\t\twrapping: false\n\t\t\t\t\t}),\n\t\t\t\t\tnew Switch({\n\t\t\t\t\t\tid: `${id}-convertSwitch`,\n\t\t\t\t\t\t// ariaLabelledBy=\"switchAppSizeLabel\"\n\t\t\t\t\t\tstate: insightsApp.visualization?.displayFormatHint !== DisplayFormat.Standard,\n\t\t\t\t\t\tchange: () => void this._onConvertTilePress(insightsApp),\n\t\t\t\t\t\tcustomTextOn: \" \",\n\t\t\t\t\t\tcustomTextOff: \" \",\n\t\t\t\t\t\ttooltip:\n\t\t\t\t\t\t\tinsightsApp.visualization?.displayFormatHint === DisplayFormat.Standard\n\t\t\t\t\t\t\t\t? this._i18nBundle.getText(\"ConvertToWideTile\")\n\t\t\t\t\t\t\t\t: this._i18nBundle.getText(\"ConvertToTile\")\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t});\n\t\t}\n\n\t\tconst deleteBtn = new Button({\n\t\t\tid: `${id}-deleteAppBtn`,\n\t\t\ttype: \"Transparent\",\n\t\t\ticon: \"sap-icon://decline\",\n\t\t\tpress: () => this._onDeleteApp(insightsApp),\n\t\t\ttooltip: this._i18nBundle.getText(\"removeFromInsights\")\n\t\t});\n\n\t\tconst buttonsWrapper = new HBox({\n\t\t\tid: `${id}-buttonsWrapper`,\n\t\t\talignItems: \"Center\"\n\t\t}).addStyleClass(\"sapUiSmallMarginEnd\");\n\n\t\tif (convertSwitchContainer) {\n\t\t\tbuttonsWrapper.addItem(convertSwitchContainer);\n\t\t}\n\t\tbuttonsWrapper.addItem(deleteBtn);\n\n\t\tcolumnListItem.addCell(\n\t\t\tnew HBox({\n\t\t\t\tid: `${id}-cell`,\n\t\t\t\talignItems: \"Center\",\n\t\t\t\tjustifyContent: \"SpaceBetween\",\n\t\t\t\titems: [\n\t\t\t\t\tnew ObjectIdentifier({\n\t\t\t\t\t\tid: `${id}-cellItem`,\n\t\t\t\t\t\ttitle: insightsApp.visualization?.title as string,\n\t\t\t\t\t\ttext: insightsApp.visualization?.subtitle as string,\n\t\t\t\t\t\ttooltip: insightsApp.visualization?.title as string\n\t\t\t\t\t}).addStyleClass(\"objectIdentifierMargin\"),\n\t\t\t\t\tbuttonsWrapper\n\t\t\t\t]\n\t\t\t})\n\t\t);\n\t\tcolumnListItem.data(\"persConfig\", insightsApp.persConfig);\n\n\t\treturn columnListItem;\n\t}\n\n\t/**\n\t * Handles Convert Tile\n\t * @private\n\t */\n\tprivate async _onConvertTilePress(app: ICustomVisualization) {\n\t\tconst displayFormatHint = app.visualization?.displayFormatHint,\n\t\t\tupdateConfigs = {\n\t\t\t\tpageId: MYHOME_PAGE_ID,\n\t\t\t\tsourceSectionIndex: app.persConfig?.sectionIndex as number,\n\t\t\t\tsourceVisualizationIndex: app.persConfig?.visualizationIndex as number,\n\t\t\t\toVisualizationData: {\n\t\t\t\t\tdisplayFormatHint: displayFormatHint === DisplayFormat.Standard ? DisplayFormat.StandardWide : DisplayFormat.Standard\n\t\t\t\t}\n\t\t\t};\n\n\t\tthis._getWrapperFlexBox().setBusy(true);\n\t\tawait this.appManagerInstance.updateVisualizations(updateConfigs);\n\t\tawait this._getTilePanel().refreshData();\n\t\tif (app.visualization) {\n\t\t\tapp.visualization.displayFormatHint = updateConfigs.oVisualizationData.displayFormatHint;\n\t\t}\n\t\tthis._getWrapperFlexBox().setBusy(false);\n\t}\n\n\t/**\n\t * Deletes Insights App\n\t * @private\n\t */\n\tprivate _onDeleteApp(app: ICustomVisualization) {\n\t\tMessageBox.show(this._i18nBundle.getText(\"remove_tile_confirmation_title\", [app.title]) as string, {\n\t\t\tid: \"removeTileConfirmation\",\n\t\t\tstyleClass: \"msgBoxWidth\",\n\t\t\ticon: MessageBox.Icon.QUESTION,\n\t\t\ttitle: this._i18nBundle.getText(\"remove\") as string,\n\t\t\tactions: [this._i18nBundle.getText(\"remove\") as string, MessageBox.Action.CANCEL],\n\t\t\temphasizedAction: this._i18nBundle.getText(\"remove\"),\n\t\t\tonClose: (action: string) => this._handleDeleteApp(action, app)\n\t\t});\n\t}\n\n\t/**\n\t * Handle Delete App Confirmation Decision\n\t * @private\n\t */\n\tprivate async _handleDeleteApp(action: string, app: ISectionAndVisualization) {\n\t\tif (action === this._i18nBundle.getText(\"remove\")) {\n\t\t\tthis._getWrapperFlexBox().setBusy(true);\n\t\t\ttry {\n\t\t\t\tawait this.appManagerInstance.removeVisualizations({\n\t\t\t\t\tsectionId: app.persConfig?.sectionId as string,\n\t\t\t\t\tvizIds: [app.visualization?.id as string]\n\t\t\t\t});\n\t\t\t\tMessageToast.show(this._i18nBundle.getText(\"appRemovedInsights\") as string);\n\t\t\t\tthis._allInsightsApps = await this.appManagerInstance.fetchInsightApps(\n\t\t\t\t\ttrue,\n\t\t\t\t\tthis._i18nBundle.getText(\"insights\") as string\n\t\t\t\t);\n\t\t\t\t(this._controlMap.get(`${this._wrapperId}--title`) as Title).setText(\n\t\t\t\t\t`${this._i18nBundle.getText(\"insightsTilesTitle\")} (${this._allInsightsApps.length})`\n\t\t\t\t);\n\t\t\t\tthis._createTableRows(this._allInsightsApps);\n\t\t\t\tawait this._getTilePanel().refreshData();\n\t\t\t} catch (err) {\n\t\t\t\tLog.error(err as string);\n\t\t\t\tMessageToast.show(this._i18nBundle.getText(\"unableToRemoveInsightsApp\") as string);\n\t\t\t} finally {\n\t\t\t\tthis._getWrapperFlexBox().setBusy(false);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns wrapper FlexBox\n\t * @private\n\t */\n\tprivate _getWrapperFlexBox(): FlexBox {\n\t\treturn this._controlMap.get(this._wrapperId) as FlexBox;\n\t}\n\n\t/**\n\t * Returns Tiles Panel\n\t * @private\n\t */\n\tprivate _getTilePanel(): TilesPanel {\n\t\treturn this._getPanel() as TilesPanel;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}