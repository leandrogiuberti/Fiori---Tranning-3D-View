/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *  * (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/ushell/Container","./BaseContainer","./utils/placeholder/ToDosPlaceholder","./utils/Device"],function(e,t,n,r,o){"use strict";function i(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}function s(e,t){try{var n=e()}catch(e){return t(e)}if(n&&n.then){return n.then(void 0,t)}return n}const c=i(n);const u=typeof Symbol!=="undefined"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function l(e,t,n){if(!e.s){if(n instanceof a){if(n.s){if(t&1){t=n.s}n=n.v}else{n.o=l.bind(null,e,t);return}}if(n&&n.then){n.then(l.bind(null,e,t),l.bind(null,e,2));return}e.s=t;e.v=n;const r=e.o;if(r){r(e)}}}const a=function(){function e(){}e.prototype.then=function(t,n){const r=new e;const o=this.s;if(o){const e=o&1?t:n;if(e){try{l(r,1,e(this.v))}catch(e){l(r,2,e)}return r}else{return this}}this.o=function(e){try{const o=e.v;if(e.s&1){l(r,1,t?t(o):o)}else if(n){l(r,1,n(o))}else{l(r,2,o)}}catch(e){l(r,2,e)}};return r};return e}();function f(e){return e instanceof a&&e.s&1}function h(e,t,n){var r=-1,o,i;function s(c){try{while(++r<e.length&&(!n||!n())){c=t(r);if(c&&c.then){if(f(c)){c=c.v}else{c.then(s,i||(i=l.bind(null,o=new a,2)));return}}}if(o){l(o,1,c)}else{o=c}}catch(e){l(o||(o=new a),2,e)}}s();return o}const d=r["getTodosPlaceholder"];function y(e,t,n){if(typeof e[u]==="function"){var r=e[u](),o,i,s;function p(e){try{while(!(o=r.next()).done&&(!n||!n())){e=t(o.value);if(e&&e.then){if(f(e)){e=e.v}else{e.then(p,s||(s=l.bind(null,i=new a,2)));return}}}if(i){l(i,1,e)}else{i=e}}catch(e){l(i||(i=new a),2,e)}}p();if(r.return){var c=function(e){try{if(!o.done){r.return()}}catch(e){}return e};if(i&&i.then){return i.then(c,function(e){throw c(e)})}c()}return i}if(!("length"in e)){throw new TypeError("Object is not iterable")}var d=[];for(var y=0;y<e.length;y++){d.push(e[y])}return h(d,function(e){return t(d[e])},n)}const p=o["DeviceType"];const g=c.extend("sap.cux.home.ToDosContainer",{renderer:{...c.renderer,apiVersion:2},metadata:{library:"sap.cux.home",properties:{fullScreenName:{type:"string",group:"Misc",defaultValue:"ST1",visibility:"hidden"}}},constructor:function e(t,n){c.prototype.constructor.call(this,t,n)},init:function e(){c.prototype.init.call(this);this.setProperty("title",this._i18nBundle?.getText("toDosTitle"));this.addStyleClass("sapCuxToDosContainer");this._isAuthCheckRequired=true;this.addCustomSetting("title",this._i18nBundle.getText("toDosTitle"));this.addCustomSetting("text",this._i18nBundle.getText("forMeTodayMsg"))},load:function e(){try{const e=this;const t=s(function(){return Promise.resolve(e._performAuthCheck()).then(function(){const t=e.getContent()||[];const n=t.filter(e=>!e._getSupported());const r=function(){if(n.length===t.length){e._handleToDoUnauthorizedAccess()}else{return Promise.resolve(e._loadAllPanels()).then(function(){})}}();if(r&&r.then)return r.then(function(){})})},function(t){e._handleToDoUnauthorizedAccess(t)});return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},_performAuthCheck:function e(){try{const e=this;return Promise.resolve(s(function(){if(!e._isAuthCheckRequired){return Promise.resolve()}else{return Promise.resolve(t.getServiceAsync("Navigation")).then(function(t){const n=e.getContent()||[];const r=n.map(e=>e.getTargetAppUrl()?e._getAppIntent():"#");return Promise.resolve(t.isNavigationSupported(r)).then(function(t){const r=t;n.forEach((e,t)=>e._setSupported(r[t].supported));e._isAuthCheckRequired=false;return Promise.resolve()})})}},function(e){return Promise.reject(e)}))}catch(e){return Promise.reject(e)}},_handleToDoUnauthorizedAccess:function t(n){e.error(n?.message||"User has no access to any available panels");this.getContent()?.forEach(e=>{e.fireEvent("loaded");this.removeContent(e)});this.setVisible(false);this.getParent()?.resetSections?.()},_loadAllPanels:function e(t){try{const e=this;const n=e.getProperty("selectedKey");const r=e.getContent()||[];const o=[...r].sort((e,t)=>{if(e.getProperty("key")===n){return-1}if(t.getProperty("key")===n){return 1}return 0});return Promise.resolve(y(o,function(e){const n=function(){if(!e._isLoaded?.()){return Promise.resolve(e._loadCards(t)).then(function(){})}}();if(n&&n.then)return n.then(function(){})}))}catch(e){return Promise.reject(e)}},_onPanelSelect:function e(t){try{const n=this;function r(){o._updateRefreshInformation()}c.prototype._onPanelSelect.call(n,t);const o=n._getSelectedPanel();const i=function(){if(!o._isLoaded()){return Promise.resolve(o._loadCards(true)).then(function(){})}}();return Promise.resolve(i&&i.then?i.then(r):r(i))}catch(s){return Promise.reject(s)}},refreshData:function e(){try{const e=this;e.getContent()?.forEach(e=>e._setLoaded(false));return Promise.resolve(e._loadAllPanels(true))}catch(e){return Promise.reject(e)}},getSelectedKey:function e(){if(!this.getProperty("selectedKey")){this.setProperty("selectedKey",this._getDefaultKey())}return this.getProperty("selectedKey")},_getDefaultKey:function e(){return this.getContent()?.[0]?.getProperty("key")},adjustLayout:function e(){this.toggleActionButtons(this.getDeviceType()!==p.Mobile);this.getContent()?.forEach(e=>e._adjustLayout())},getGenericPlaceholderContent:function e(){return d()}});return g});
//# sourceMappingURL=ToDosContainer.js.map