{"version":3,"file":"KeyUserNewsSettingsPanel-dbg.js","names":["sap","ui","define","Button","Input","Label","MessageBox","MessageStrip","MessageToast","RadioButton","Toolbar","VBox","Library","EventBus","MessageType","SimpleForm","FileUploader","Container","__BaseSettingsPanel","___flexibility_Layoutflexibility","___library","___utils_Constants","__HttpHelper","_interopRequireDefault","obj","__esModule","default","_catch","body","recover","result","e","then","BaseSettingsPanel","CHANGE_TYPES","NewsType","DEFAULT_NEWS_URL","KEYUSER_SETTINGS_PANELS_KEYS","HttpHelper","Constants","NEWS_FEED_POST_API","KeyUserNewsSettingsPanel","extend","metadata","library","init","_init","BaseSettingsPanel.prototype.init.call","controlMap","Map","setProperty","NEWS","_i18nBundle","getText","addAggregation","getContent","attachPanelNavigated","loadSettings","_eventBus","getInstance","subscribe","channelId","eventId","data","showError","showMessageStrip","Warning","validChanges","getMessageStrip","setVisible","getCurrentKeyUserChange","_getCurrentKeyUserChange","keyUserChanges","getKeyUserChanges","existingChange","find","change","changeSpecificData","changeType","NEWS_FEED_URL","content","_getContent","wrapperVBoxId","getId","wrapperVBox","set","checkNewsType","_checkNewsType","type","_getPanel","getProperty","isValidChanges","_isValidChanges","newsVisible","_this","_temp5","fileUploader","getFileUploader","keyUserChangeContent","showCustom","customNewsVisibility","Custom","showDefault","defaultNewsVisibility","Default","_temp4","getNewsFeedUploadBtn","getEnabled","error","String","setValue","customNewsFeedFileName","_temp3","getValue","Error","_temp2","getVisible","newsUrl","get","_temp","getValidURL","Promise","resolve","setURL","reject","clearNewsPanelChanges","_clearNewsPanelChanges","newsPanel","newsUrlInput","url","rssNewsVisibility","NewsUrl","setEnabled","setSelected","clearKeyUserChanges","addMessageStrip","_addMessageStrip","keyUserNewsPanelToolbarId","keyUserNewsPanelToolbar","height","messageStripWrapper","width","messageStripId","messsageStrip","showIcon","visible","addItem","addContent","handleSelectCustomNewsFeed","_handleSelectCustomNewsFeed","oEvent","getParameter","newsPageContainer","getParent","layout","addKeyUserChanges","selectorControl","oldNewsFeedUrl","oldShowCustomNewsFeed","oldCustomNewsFeedKey","oldshowDefaultNewsFeed","oldShowRssNewsFeed","newsFeedURL","showCustomNewsFeed","customNewsFeedKey","showDefaultNewsFeed","showRssNewsFeed","publish","changes","removeUrlMesageStrip","disable","date","Date","addCustomNewsFeedRadioBtn","_addCustomNewsFeedRadioBtn","customNewsFeedRadioBtnId","customNewsFeedRadioBtn","text","selected","select","bind","addStyleClass","customRadioBtn","addDefaultNewsFeedRadioBtn","_addDefaultNewsFeedRadioBtn","defaultNewsFeedRadioBtnId","defaultNewsFeedRadioBtn","handleselectDefaultNewsFeed","defaultRadioBtn","addNewsPaneLabel","_addNewsPaneLabel","newsPanelLabelId","newsPanelLabel","handleSelectRssNewsFeed","_handleSelectRssNewsFeed","addNewsUrlRadioBtn","_addNewsUrlRadioBtn","newsUrlRadioBtnId","showRss","newsUrlRadioBtn","rssRadioBtn","_handleselectDefaultNewsFeed","onNewsUrlChange","_onNewsUrlChange","keyUserContent","validUrl","_showMessageStrip","bShow","textKey","setType","setText","_getValidURL","urlString","URL","href","_removeUrlMesageStrip","onUrlLiveChange","_onUrlLiveChange","sNewValue","_getMessageStrip","addNewsURLSimpleForm","_addNewsURLSimpleForm","newsFeedURLSimpleFormId","newsInputUrl","newsFeedURLSimpleForm","newsFeedURLInputId","newsFeedURLInput","value","InputType","Url","liveChange","enabled","inputUrlField","handleFileChange","_handleFileChange","getSource","setNewsFeedEnabled","_setNewsFeedEnabled","bEnabled","newsFeedUploadBtn","_getNewsFeedUploadBtn","customNewsUploadFileUploaderButtonId","handleFileUploadError","_handleFileUploadError","iMaxFileSize","getMaximumFileSize","handleFileDialogClose","_handleFileDialogClose","event","fileName","handleNewsFeedFileUpload","_handleNewsFeedFileUpload","_this2","errorMsg","all","getUploadedFile","getServiceAsync","response","fileData","userInfo","userId","payload","changeId","now","toString","attachment","documentType","Post","oResponse","message","includes","customKey","show","oErr","_getUploadedFile","file","oFileUpload","files","reader","FileReader","onload","fileContent","base64String","window","btoa","encodeURIComponent","replace","match","p1","fromCharCode","parseInt","readAsText","readAsDataURL","_getFileUploader","customNewsUploadFileUploader","addCustomNewsUploadSimpleForm","_addCustomNewsUploadSimpleForm","customNewsUploadSimpleFormId","customNewsUploadSimpleForm","customNewsUploadVBox","customNewsUploadFileUploaderControl","name","tooltip","fileType","maximumFileSize","fileSizeExceed","sameFilenameAllowed","afterDialogClose","customNewsUploadFileUploaderButton","press","_loadSettings","removeAllItems"],"sources":["KeyUserNewsSettingsPanel.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\n\nimport Button from \"sap/m/Button\";\nimport Input, { Input$LiveChangeEvent } from \"sap/m/Input\";\nimport { InputBase$ChangeEvent } from \"sap/m/InputBase\";\nimport Label from \"sap/m/Label\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport MessageStrip from \"sap/m/MessageStrip\";\nimport MessageToast from \"sap/m/MessageToast\";\nimport RadioButton, { RadioButton$SelectEvent } from \"sap/m/RadioButton\";\nimport Toolbar from \"sap/m/Toolbar\";\nimport VBox from \"sap/m/VBox\";\nimport Library from \"sap/m/library\";\nimport Event from \"sap/ui/base/Event\";\nimport Control from \"sap/ui/core/Control\";\nimport type { MetadataOptions } from \"sap/ui/core/Element\";\nimport EventBus from \"sap/ui/core/EventBus\";\nimport MessageType from \"sap/ui/core/message/MessageType\";\nimport SimpleForm from \"sap/ui/layout/form/SimpleForm\";\nimport FileUploader, { FileUploader$ChangeEvent, FileUploader$FileSizeExceedEvent } from \"sap/ui/unified/FileUploader\";\nimport Container from \"sap/ushell/Container\";\nimport UserInfo from \"sap/ushell/services/UserInfo\";\nimport BaseLayout from \"./BaseLayout\";\nimport BaseSettingsPanel from \"./BaseSettingsPanel\";\nimport NewsAndPagesContainer from \"./NewsAndPagesContainer\";\nimport NewsPanel, { FileFormat } from \"./NewsPanel\";\nimport { CHANGE_TYPES } from \"./flexibility/Layout.flexibility\";\nimport { INewsPersData } from \"./interface/KeyUserInterface\";\nimport { NewsType } from \"./library\";\nimport { DEFAULT_NEWS_URL, KEYUSER_SETTINGS_PANELS_KEYS } from \"./utils/Constants\";\nimport HttpHelper from \"./utils/HttpHelper\";\n\nconst Constants = {\n\tNEWS_FEED_POST_API: \"/sap/opu/odata4/ui2/insights_srv/srvd/ui2/\" + \"insights_repo_srv/0001/\" + \"NEWS_FEED\"\n};\n\ninterface ShowError {\n\tshowError: boolean;\n\tdate: Date;\n}\n\ninterface UploadedFilePayload {\n\tchangeId: string;\n\tattachment: string | PromiseLike<string>;\n\tdocumentType?: string; // Optional\n}\n\ninterface FileMetaData {\n\ttype: string;\n\tcontent: string | PromiseLike<string>;\n}\n\n/**\n *\n * Class for News Settings Panel for KeyUser Settings Dialog.\n *\n * @extends BaseSettingsPanel\n *\n * @author SAP SE\n * @version 0.0.1\n * @since 1.121\n * @private\n *\n * @alias sap.cux.home.KeyUserNewsSettingsPanel\n */\nexport default class KeyUserNewsSettingsPanel extends BaseSettingsPanel {\n\tstatic readonly metadata: MetadataOptions = {\n\t\tlibrary: \"sap.cux.home\"\n\t};\n\n\tprivate controlMap!: Map<string, Control | Element>;\n\tprivate _eventBus!: EventBus;\n\tprivate customNewsVisibility!: boolean;\n\tprivate defaultNewsVisibility!: boolean;\n\tprivate validChanges!: boolean;\n\tprivate rssNewsVisibility!: boolean;\n\n\t/**\n\t * Init lifecycle method\n\t *\n\t * @public\n\t * @override\n\t */\n\tpublic init(): void {\n\t\tsuper.init();\n\t\tthis.controlMap = new Map();\n\n\t\t//setup panel\n\t\tthis.setProperty(\"key\", KEYUSER_SETTINGS_PANELS_KEYS.NEWS);\n\t\tthis.setProperty(\"title\", this._i18nBundle.getText(\"editNewsFeed\"));\n\n\t\t// //setup layout content\n\t\tthis.addAggregation(\"content\", this.getContent());\n\n\t\t// fired every time on panel navigation\n\t\tthis.attachPanelNavigated(() => this.loadSettings());\n\n\t\tthis._eventBus = EventBus.getInstance();\n\t\tthis._eventBus.subscribe(\n\t\t\t\"KeyUserChanges\",\n\t\t\t\"newsFeedLoadFailed\",\n\t\t\t(channelId?: string, eventId?: string, data?: object) => {\n\t\t\t\t//errorstate is false when import is successful\n\t\t\t\tif ((data as unknown as ShowError)?.showError) {\n\t\t\t\t\tthis.showMessageStrip(true, MessageType.Warning, \"invalidNewsUrl\");\n\t\t\t\t\tthis.validChanges = false;\n\t\t\t\t} else {\n\t\t\t\t\tthis.getMessageStrip().setVisible(false);\n\t\t\t\t\tthis.validChanges = true;\n\t\t\t\t}\n\t\t\t},\n\t\t\tthis\n\t\t);\n\t}\n\n\tprivate getCurrentKeyUserChange(): INewsPersData {\n\t\tconst keyUserChanges = this.getKeyUserChanges();\n\t\tconst existingChange = keyUserChanges.find((change) => {\n\t\t\treturn change.changeSpecificData.changeType === CHANGE_TYPES.NEWS_FEED_URL;\n\t\t});\n\t\treturn existingChange?.changeSpecificData.content as INewsPersData;\n\t}\n\n\t/**\n\t * Returns the content for the KeyUser news Settings Panel.\n\t *\n\t * @private\n\t * @returns {VBox} The control containing the KeyUser news Settings Panel content.\n\t */\n\tprivate getContent(): VBox {\n\t\tconst wrapperVBoxId = `${this.getId()}-wrapperVBox`;\n\t\tconst wrapperVBox = new VBox(wrapperVBoxId);\n\t\tthis.controlMap.set(wrapperVBoxId, wrapperVBox);\n\n\t\treturn wrapperVBox;\n\t}\n\n\tpublic checkNewsType(type: NewsType): boolean {\n\t\tif (this._getPanel().getProperty(\"type\") === type) return true;\n\t\treturn false;\n\t}\n\n\tpublic async isValidChanges(newsVisible: boolean) {\n\t\tthis.validChanges = true;\n\t\tconst fileUploader = this.getFileUploader();\n\t\tconst keyUserChangeContent = this.getCurrentKeyUserChange();\n\t\tconst showCustom = this.customNewsVisibility ?? !!this.checkNewsType(NewsType.Custom);\n\t\tconst showDefault = this.defaultNewsVisibility ?? !!this.checkNewsType(NewsType.Default);\n\t\tif (this.getNewsFeedUploadBtn().getEnabled()) {\n\t\t\tif (showCustom) {\n\t\t\t\tMessageBox.error(String(this._i18nBundle.getText(\"newsFeedSaveUploadChanges\")));\n\t\t\t\tthis.validChanges = false;\n\t\t\t} else {\n\t\t\t\tif (fileUploader) {\n\t\t\t\t\tfileUploader.setValue(\n\t\t\t\t\t\tkeyUserChangeContent.customNewsFeedFileName || String(this._getPanel().getProperty(\"customFileName\"))\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (showCustom && fileUploader.getValue() === \"\" && newsVisible) {\n\t\t\tthis.showMessageStrip(true, MessageType.Error, \"noNewsFileError\");\n\t\t\tthis.validChanges = false;\n\t\t} else if (!showCustom && !showDefault && newsVisible && !this.getMessageStrip().getVisible()) {\n\t\t\tconst newsUrl = (this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input).getValue();\n\t\t\tif (!this.getValidURL(newsUrl)) {\n\t\t\t\tthis.showMessageStrip(true, MessageType.Error, \"invalidNewsUrl\");\n\t\t\t\tthis.validChanges = false;\n\t\t\t} else {\n\t\t\t\tawait (this._getPanel() as NewsPanel).setURL(String(newsUrl));\n\t\t\t}\n\t\t}\n\t\treturn this.validChanges;\n\t}\n\n\tpublic clearNewsPanelChanges() {\n\t\tconst newsPanel = this._getPanel();\n\t\tthis.getMessageStrip().setVisible(false);\n\t\tconst newsUrlInput = this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input;\n\t\tconst url = String(newsPanel.getProperty(\"url\"));\n\t\tnewsUrlInput.setValue(url !== DEFAULT_NEWS_URL ? url : \"\");\n\t\tthis.customNewsVisibility = this.checkNewsType(NewsType.Custom);\n\t\tthis.defaultNewsVisibility = this.checkNewsType(NewsType.Default);\n\t\tthis.rssNewsVisibility = this.checkNewsType(NewsType.NewsUrl);\n\n\t\t(this.controlMap.get(`${this.getId()}-customNewsUploadFileUploader`) as FileUploader).setEnabled(this.customNewsVisibility);\n\t\t(this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input).setEnabled(this.rssNewsVisibility);\n\t\t(this.controlMap.get(`${this.getId()}-customNewsFeedRadioBtn`) as RadioButton).setSelected(this.customNewsVisibility);\n\t\t(this.controlMap.get(`${this.getId()}-defaultNewsFeedRadioBtn`) as RadioButton).setSelected(this.defaultNewsVisibility);\n\t\t(this.controlMap.get(`${this.getId()}-newsUrlRadioBtn`) as RadioButton).setSelected(this.rssNewsVisibility);\n\t\tthis.getFileUploader().setValue(String(newsPanel.getProperty(\"customFileName\")));\n\t\tthis.clearKeyUserChanges();\n\t}\n\n\tprivate addMessageStrip(wrapperVBox: VBox): void {\n\t\tconst keyUserNewsPanelToolbarId = `${this.getId()}-keyUserNewsPanelToolbar`;\n\t\tif (!this.controlMap.get(keyUserNewsPanelToolbarId)) {\n\t\t\tconst keyUserNewsPanelToolbar = new Toolbar(keyUserNewsPanelToolbarId, { height: \"auto\" });\n\t\t\tconst messageStripWrapper = new VBox(`${this.getId()}-messageStripWrapper`, { width: \"100%\" });\n\t\t\tconst messageStripId = `${this.getId()}-messageStrip`;\n\t\t\tconst messsageStrip = new MessageStrip(messageStripId, {\n\t\t\t\tshowIcon: true,\n\t\t\t\tvisible: false\n\t\t\t});\n\t\t\tthis.controlMap.set(messageStripId, messsageStrip);\n\t\t\tmessageStripWrapper.addItem(messsageStrip);\n\t\t\tkeyUserNewsPanelToolbar.addContent(messageStripWrapper);\n\t\t\tthis.controlMap.set(keyUserNewsPanelToolbarId, keyUserNewsPanelToolbar);\n\t\t}\n\t\twrapperVBox.addItem(this.controlMap.get(keyUserNewsPanelToolbarId) as Toolbar);\n\t}\n\n\tprivate handleSelectCustomNewsFeed(oEvent: RadioButton$SelectEvent): void {\n\t\tthis.customNewsVisibility = oEvent.getParameter(\"selected\") as boolean;\n\n\t\t(this.controlMap.get(`${this.getId()}-customNewsUploadFileUploader`) as FileUploader).setEnabled(this.customNewsVisibility);\n\t\t(this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input).setEnabled(!this.customNewsVisibility);\n\n\t\tconst newsPanel = this._getPanel() as NewsPanel;\n\t\tconst newsPageContainer = newsPanel.getParent() as NewsAndPagesContainer;\n\t\tconst layout = newsPageContainer.getParent() as BaseLayout;\n\t\tconst keyUserChangeContent = this.getCurrentKeyUserChange();\n\t\tif (!keyUserChangeContent) {\n\t\t\tthis.addKeyUserChanges({\n\t\t\t\tselectorControl: layout,\n\t\t\t\tchangeSpecificData: {\n\t\t\t\t\tchangeType: CHANGE_TYPES.NEWS_FEED_URL,\n\t\t\t\t\tcontent: {\n\t\t\t\t\t\toldNewsFeedUrl: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\toldShowCustomNewsFeed: this.checkNewsType(NewsType.Custom),\n\t\t\t\t\t\toldCustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\toldshowDefaultNewsFeed: this.checkNewsType(NewsType.Default),\n\t\t\t\t\t\toldShowRssNewsFeed: this.checkNewsType(NewsType.NewsUrl),\n\n\t\t\t\t\t\tnewsFeedURL: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\tshowCustomNewsFeed: this.customNewsVisibility,\n\t\t\t\t\t\tcustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\tcustomNewsFeedFileName: String(this._getPanel().getProperty(\"customFileName\")),\n\t\t\t\t\t\tshowDefaultNewsFeed: false,\n\t\t\t\t\t\tshowRssNewsFeed: false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._eventBus.publish(\"KeyUserChanges\", \"addNewsPagesChanges\", { changes: this.getKeyUserChanges() });\n\t\t} else if (keyUserChangeContent.showCustomNewsFeed !== this.customNewsVisibility) {\n\t\t\tkeyUserChangeContent.showCustomNewsFeed = this.customNewsVisibility;\n\t\t}\n\t\tthis.removeUrlMesageStrip();\n\t\tthis._eventBus.publish(\"KeyUserChanges\", \"disabledSaveBtn\", { disable: false, date: new Date() });\n\t}\n\n\t/**\n\t * Add Radio Button for Custom News Feed.\n\t *\n\t * @private\n\t */\n\tprivate addCustomNewsFeedRadioBtn(wrapperVBox: VBox): void {\n\t\tconst customNewsFeedRadioBtnId = `${this.getId()}-customNewsFeedRadioBtn`;\n\t\tconst showCustom = this.checkNewsType(NewsType.Custom);\n\n\t\tif (!this.controlMap.get(customNewsFeedRadioBtnId)) {\n\t\t\tconst customNewsFeedRadioBtn = new RadioButton(`${this.getId()}-customNewsFeedRadioBtn`, {\n\t\t\t\ttext: this._i18nBundle.getText(\"selectCustomNewsFeed\"),\n\t\t\t\tselected: showCustom,\n\t\t\t\tselect: this.handleSelectCustomNewsFeed.bind(this)\n\t\t\t}).addStyleClass(\"sapUiTinyMargin\");\n\t\t\tthis.controlMap.set(customNewsFeedRadioBtnId, customNewsFeedRadioBtn);\n\t\t} else if (!this.getCurrentKeyUserChange()) {\n\t\t\tlet customRadioBtn = this.controlMap.get(`${this.getId()}-customNewsFeedRadioBtn`) as RadioButton;\n\t\t\tcustomRadioBtn.setSelected(showCustom);\n\t\t\t(this.controlMap.get(`${this.getId()}-customNewsUploadFileUploader`) as FileUploader).setEnabled(showCustom);\n\t\t}\n\t\twrapperVBox.addItem(this.controlMap.get(customNewsFeedRadioBtnId) as RadioButton);\n\t}\n\n\t/**\n\t * Add Radio Button for Manage News Feed.\n\t *\n\t * @private\n\t */\n\tprivate addDefaultNewsFeedRadioBtn(wrapperVBox: VBox): void {\n\t\tconst defaultNewsFeedRadioBtnId = `${this.getId()}-defaultNewsFeedRadioBtn`;\n\t\tconst showDefault = this.checkNewsType(NewsType.Default);\n\n\t\tif (!this.controlMap.get(defaultNewsFeedRadioBtnId)) {\n\t\t\tconst defaultNewsFeedRadioBtn = new RadioButton(`${this.getId()}-defaultNewsFeedRadioBtn`, {\n\t\t\t\ttext: this._i18nBundle.getText(\"selectDefaultNewsFeed\"),\n\t\t\t\tselected: showDefault,\n\t\t\t\tselect: this.handleselectDefaultNewsFeed.bind(this)\n\t\t\t}).addStyleClass(\"sapUiTinyMargin\");\n\t\t\tthis.controlMap.set(defaultNewsFeedRadioBtnId, defaultNewsFeedRadioBtn);\n\t\t} else if (!this.getCurrentKeyUserChange()) {\n\t\t\tlet defaultRadioBtn = this.controlMap.get(`${this.getId()}-defaultNewsFeedRadioBtn`) as RadioButton;\n\t\t\tdefaultRadioBtn.setSelected(showDefault);\n\t\t}\n\t\twrapperVBox.addItem(this.controlMap.get(defaultNewsFeedRadioBtnId) as RadioButton);\n\t}\n\n\tprivate addNewsPaneLabel(wrapperVBox: VBox): void {\n\t\tconst newsPanelLabelId = `${this.getId()}-newsPanelLabel`;\n\t\tif (!this.controlMap.get(newsPanelLabelId)) {\n\t\t\tconst newsPanelLabel = new Label(newsPanelLabelId, {\n\t\t\t\ttext: this._i18nBundle.getText(\"newsFeedOptionLabel\")\n\t\t\t}).addStyleClass(\"sapUiTinyMargin\");\n\t\t\tthis.controlMap.set(newsPanelLabelId, newsPanelLabel);\n\t\t}\n\t\twrapperVBox.addItem(this.controlMap.get(newsPanelLabelId) as Label);\n\t}\n\n\tprivate handleSelectRssNewsFeed(oEvent: RadioButton$SelectEvent): void {\n\t\tthis.rssNewsVisibility = oEvent.getParameter(\"selected\") as boolean;\n\t\t(this.controlMap.get(`${this.getId()}-customNewsUploadFileUploader`) as FileUploader).setEnabled(!this.rssNewsVisibility);\n\t\t(this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input).setEnabled(this.rssNewsVisibility);\n\n\t\tconst newsPanel = this._getPanel() as NewsPanel;\n\t\tconst newsPageContainer = newsPanel.getParent() as NewsAndPagesContainer;\n\t\tconst layout = newsPageContainer.getParent() as BaseLayout;\n\t\tconst keyUserChangeContent = this.getCurrentKeyUserChange();\n\t\tif (!keyUserChangeContent) {\n\t\t\tthis.addKeyUserChanges({\n\t\t\t\tselectorControl: layout,\n\t\t\t\tchangeSpecificData: {\n\t\t\t\t\tchangeType: CHANGE_TYPES.NEWS_FEED_URL,\n\t\t\t\t\tcontent: {\n\t\t\t\t\t\toldNewsFeedUrl: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\toldShowCustomNewsFeed: this.checkNewsType(NewsType.Custom),\n\t\t\t\t\t\toldCustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\toldshowDefaultNewsFeed: this.checkNewsType(NewsType.Default),\n\t\t\t\t\t\toldShowRssNewsFeed: this.checkNewsType(NewsType.NewsUrl),\n\t\t\t\t\t\tnewsFeedURL: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\tshowCustomNewsFeed: false,\n\t\t\t\t\t\tcustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\tcustomNewsFeedFileName: String(this._getPanel().getProperty(\"customFileName\")),\n\t\t\t\t\t\tshowDefaultNewsFeed: false,\n\t\t\t\t\t\tshowRssNewsFeed: this.rssNewsVisibility\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._eventBus.publish(\"KeyUserChanges\", \"addNewsPagesChanges\", { changes: this.getKeyUserChanges() });\n\t\t} else if (keyUserChangeContent.showRssNewsFeed !== this.rssNewsVisibility) {\n\t\t\tkeyUserChangeContent.showRssNewsFeed = this.rssNewsVisibility;\n\t\t}\n\t\tthis.removeUrlMesageStrip();\n\t\tthis._eventBus.publish(\"KeyUserChanges\", \"disabledSaveBtn\", { disable: false, date: new Date() });\n\t}\n\n\tprivate addNewsUrlRadioBtn(wrapperVBox: VBox): void {\n\t\tconst newsUrlRadioBtnId = `${this.getId()}-newsUrlRadioBtn`;\n\t\tconst showRss = this.checkNewsType(NewsType.NewsUrl);\n\t\tif (!this.controlMap.get(newsUrlRadioBtnId)) {\n\t\t\tconst newsUrlRadioBtn = new RadioButton(`${this.getId()}-newsUrlRadioBtn`, {\n\t\t\t\ttext: this._i18nBundle.getText(\"selectNewsFeedUrl\"),\n\t\t\t\tselected: showRss,\n\t\t\t\tselect: this.handleSelectRssNewsFeed.bind(this)\n\t\t\t}).addStyleClass(\"sapUiTinyMargin\");\n\t\t\tthis.controlMap.set(newsUrlRadioBtnId, newsUrlRadioBtn);\n\t\t} else if (!this.getCurrentKeyUserChange()) {\n\t\t\tlet rssRadioBtn = this.controlMap.get(`${this.getId()}-newsUrlRadioBtn`) as RadioButton;\n\t\t\trssRadioBtn.setSelected(showRss);\n\t\t\t(this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input).setEnabled(showRss);\n\t\t}\n\n\t\twrapperVBox.addItem(this.controlMap.get(newsUrlRadioBtnId) as RadioButton);\n\t}\n\n\t/**\n\t * Handle the selection of the Manage News Feed Radio Button.\n\t *\n\t * @private\n\t */\n\tprivate handleselectDefaultNewsFeed(oEvent: RadioButton$SelectEvent): void {\n\t\tthis.defaultNewsVisibility = oEvent.getParameter(\"selected\") as boolean;\n\n\t\t(this.controlMap.get(`${this.getId()}-customNewsUploadFileUploader`) as FileUploader).setEnabled(!this.defaultNewsVisibility);\n\t\t(this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input).setEnabled(!this.defaultNewsVisibility);\n\n\t\tconst newsPanel = this._getPanel() as NewsPanel;\n\t\tconst newsPageContainer = newsPanel.getParent() as NewsAndPagesContainer;\n\t\tconst layout = newsPageContainer.getParent() as BaseLayout;\n\t\tconst keyUserChangeContent = this.getCurrentKeyUserChange();\n\t\tconst newsUrlInput = this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input;\n\n\t\tif (!keyUserChangeContent) {\n\t\t\tthis.addKeyUserChanges({\n\t\t\t\tselectorControl: layout,\n\t\t\t\tchangeSpecificData: {\n\t\t\t\t\tchangeType: CHANGE_TYPES.NEWS_FEED_URL,\n\t\t\t\t\tcontent: {\n\t\t\t\t\t\toldNewsFeedUrl: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\toldShowCustomNewsFeed: this.checkNewsType(NewsType.Custom),\n\t\t\t\t\t\toldCustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\toldshowDefaultNewsFeed: this.checkNewsType(NewsType.Default),\n\t\t\t\t\t\toldShowRssNewsFeed: this.checkNewsType(NewsType.NewsUrl),\n\n\t\t\t\t\t\tnewsFeedURL: String(newsUrlInput.getValue()),\n\t\t\t\t\t\tshowCustomNewsFeed: false,\n\t\t\t\t\t\tcustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\tcustomNewsFeedFileName: String(this._getPanel().getProperty(\"customFileName\")),\n\t\t\t\t\t\tshowDefaultNewsFeed: this.defaultNewsVisibility,\n\t\t\t\t\t\tshowRssNewsFeed: false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._eventBus.publish(\"KeyUserChanges\", \"addNewsPagesChanges\", { changes: this.getKeyUserChanges() });\n\t\t} else if (keyUserChangeContent.showDefaultNewsFeed !== this.defaultNewsVisibility) {\n\t\t\tkeyUserChangeContent.showDefaultNewsFeed = this.defaultNewsVisibility;\n\t\t\tkeyUserChangeContent.showCustomNewsFeed = false;\n\t\t}\n\t\tthis.removeUrlMesageStrip();\n\t\tthis._eventBus.publish(\"KeyUserChanges\", \"disabledSaveBtn\", { disable: false, date: new Date() });\n\t}\n\tprivate onNewsUrlChange(oEvent: InputBase$ChangeEvent): void {\n\t\tconst newsPanel = this._getPanel() as NewsPanel;\n\t\tconst newsPageContainer = newsPanel.getParent() as NewsAndPagesContainer;\n\t\tconst layout = newsPageContainer.getParent() as BaseLayout;\n\t\tlet newsUrl = oEvent.getParameter(\"value\");\n\t\tconst keyUserContent = this.getCurrentKeyUserChange();\n\t\tconst validUrl = this.getValidURL(String(newsUrl));\n\t\tif (!validUrl) {\n\t\t\treturn;\n\t\t} else {\n\t\t\tnewsUrl = validUrl;\n\t\t}\n\t\tif (!keyUserContent) {\n\t\t\tthis.addKeyUserChanges({\n\t\t\t\tselectorControl: layout,\n\t\t\t\tchangeSpecificData: {\n\t\t\t\t\tchangeType: CHANGE_TYPES.NEWS_FEED_URL,\n\t\t\t\t\tcontent: {\n\t\t\t\t\t\toldNewsFeedUrl: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\toldShowCustomNewsFeed: this.checkNewsType(NewsType.Custom),\n\t\t\t\t\t\toldCustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\toldshowDefaultNewsFeed: this.checkNewsType(NewsType.Default),\n\t\t\t\t\t\toldShowRssNewsFeed: this.checkNewsType(NewsType.NewsUrl),\n\n\t\t\t\t\t\tnewsFeedURL: newsUrl,\n\t\t\t\t\t\tshowCustomNewsFeed: false,\n\t\t\t\t\t\tcustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\tcustomNewsFeedFileName: String(this._getPanel().getProperty(\"customFileName\")),\n\t\t\t\t\t\tshowDefaultNewsFeed: false,\n\t\t\t\t\t\tshowRssNewsFeed: this.rssNewsVisibility\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._eventBus.publish(\"KeyUserChanges\", \"addNewsPagesChanges\", { changes: this.getKeyUserChanges() });\n\t\t} else if (keyUserContent.newsFeedURL !== newsUrl) {\n\t\t\tkeyUserContent.newsFeedURL = newsUrl;\n\t\t\tkeyUserContent.showCustomNewsFeed = false;\n\t\t\tkeyUserContent.showDefaultNewsFeed = false;\n\t\t}\n\t}\n\n\tprivate showMessageStrip(bShow: boolean, type: MessageType, textKey: string): void {\n\t\tthis.getMessageStrip().setType(type);\n\t\tthis.getMessageStrip().setVisible(bShow);\n\t\tthis.getMessageStrip().setText(String(this._i18nBundle.getText(textKey)));\n\t\tif (type === MessageType.Error) {\n\t\t\tthis._eventBus.publish(\"KeyUserChanges\", \"disabledSaveBtn\", { disable: bShow, date: new Date() });\n\t\t}\n\t}\n\n\tprivate getValidURL(urlString: string): string {\n\t\ttry {\n\t\t\tconst url = new URL(urlString);\n\t\t\treturn url.href;\n\t\t} catch {\n\t\t\treturn \"\";\n\t\t}\n\t}\n\n\tpublic removeUrlMesageStrip() {\n\t\tthis._eventBus.publish(\"KeyUserChanges\", \"disabledSaveBtn\", { disable: false, date: new Date() });\n\t\tthis.getMessageStrip().setVisible(false);\n\t\tconst newsUrlInput = this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input;\n\t\tif (!this.getValidURL(newsUrlInput.getValue())) {\n\t\t\tnewsUrlInput.setValue(\"\");\n\t\t}\n\t}\n\n\tprivate onUrlLiveChange(oEvent: Input$LiveChangeEvent) {\n\t\tconst sNewValue = oEvent.getParameter(\"value\") || \"\";\n\t\tthis.showMessageStrip(!this.getValidURL(sNewValue), MessageType.Error, \"invalidNewsUrl\");\n\t}\n\n\tprivate getMessageStrip(): MessageStrip {\n\t\tconst messageStripId = `${this.getId()}-messageStrip`;\n\t\treturn this.controlMap.get(messageStripId) as MessageStrip;\n\t}\n\n\t/**\n\t * Add SimpleForm for News URL.\n\t *\n\t * @private\n\t */\n\tprivate addNewsURLSimpleForm(wrapperVBox: VBox): void {\n\t\tconst newsFeedURLSimpleFormId = `${this.getId()}-newsFeedURLSimpleForm`;\n\t\tconst showRss = this.checkNewsType(NewsType.NewsUrl);\n\n\t\tconst newsInputUrl = String(this._getPanel().getProperty(\"url\"));\n\t\tif (!this.controlMap.get(newsFeedURLSimpleFormId)) {\n\t\t\tconst newsFeedURLSimpleForm = new SimpleForm(`${this.getId()}-newsFeedURLSimpleForm`).addStyleClass(\n\t\t\t\t\"sapContrastPlus formCustomPadding\"\n\t\t\t);\n\t\t\tconst newsFeedURLInputId = `${this.getId()}-newsFeedURLInput`;\n\t\t\tconst newsFeedURLInput = new Input(newsFeedURLInputId, {\n\t\t\t\tvalue: newsInputUrl !== DEFAULT_NEWS_URL ? newsInputUrl : \"\",\n\t\t\t\ttype: Library.InputType.Url,\n\t\t\t\tchange: this.onNewsUrlChange.bind(this),\n\t\t\t\tliveChange: this.onUrlLiveChange.bind(this),\n\t\t\t\tenabled: showRss\n\t\t\t});\n\t\t\tthis.controlMap.set(newsFeedURLInputId, newsFeedURLInput);\n\t\t\tnewsFeedURLSimpleForm.addContent(newsFeedURLInput);\n\t\t\tthis.controlMap.set(newsFeedURLSimpleFormId, newsFeedURLSimpleForm);\n\t\t} else if (this.getCurrentKeyUserChange()) {\n\t\t\tlet inputUrlField = this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input;\n\t\t\tinputUrlField.setValue(newsInputUrl);\n\t\t}\n\t\twrapperVBox.addItem(this.controlMap.get(newsFeedURLSimpleFormId) as SimpleForm);\n\t}\n\n\tprivate handleFileChange(oEvent: FileUploader$ChangeEvent): void {\n\t\tconst fileUploader = oEvent.getSource();\n\t\tthis.getMessageStrip().setVisible(false);\n\t\tthis._eventBus.publish(\"KeyUserChanges\", \"disabledSaveBtn\", { disable: false, date: new Date() });\n\t\tthis.setNewsFeedEnabled(fileUploader.getValue() !== \"\");\n\t}\n\n\tprivate setNewsFeedEnabled(bEnabled: boolean): void {\n\t\tconst newsFeedUploadBtn = this.getNewsFeedUploadBtn();\n\t\tif (newsFeedUploadBtn) {\n\t\t\tnewsFeedUploadBtn.setEnabled(bEnabled);\n\t\t}\n\t}\n\n\tprivate getNewsFeedUploadBtn(): Button {\n\t\tconst customNewsUploadFileUploaderButtonId = `${this.getId()}-customNewsUploadFileUploaderButton`;\n\t\treturn this.controlMap.get(customNewsUploadFileUploaderButtonId) as Button;\n\t}\n\n\tprivate handleFileUploadError(oEvent: FileUploader$FileSizeExceedEvent): void {\n\t\tconst fileUploader = oEvent.getSource();\n\t\tconst iMaxFileSize = fileUploader.getMaximumFileSize();\n\t\tthis.setNewsFeedEnabled(false);\n\t\tMessageBox.error(String(this._i18nBundle.getText(\"newsFeedMaxFileSizeError\", [iMaxFileSize])));\n\t}\n\n\thandleFileDialogClose(event: Event): void {\n\t\tconst fileUploader = event.getSource<FileUploader>();\n\t\tlet fileName = fileUploader.getValue();\n\t\t// if file selection dialog is closed and no file is selected, set value as last uploaded file\n\n\t\tif (fileName === \"\") {\n\t\t\tfileName = this.getCurrentKeyUserChange()?.customNewsFeedFileName || String(this._getPanel().getProperty(\"customFileName\"));\n\t\t\tthis.setNewsFeedEnabled(false);\n\t\t}\n\t\tfileUploader.setValue(fileName);\n\t}\n\n\tprivate async handleNewsFeedFileUpload(): Promise<void> {\n\t\tlet errorMsg = this._i18nBundle.getText(\"newsFeedFileUploadError\");\n\t\ttry {\n\t\t\tconst response = await Promise.all([this.getUploadedFile(), Container.getServiceAsync<UserInfo>(\"UserInfo\")]);\n\t\t\tconst fileData = response[0];\n\t\t\tconst userInfo = response[1];\n\t\t\tconst userId = userInfo && userInfo.getId();\n\t\t\tconst payload: UploadedFilePayload = { changeId: userId + \"_\" + Date.now().toString(), attachment: fileData.content };\n\n\t\t\t//pass documentType if file is in csv format\n\t\t\t//if documentType is not passed by default document type is considered as excel.\n\t\t\tif (fileData.type) {\n\t\t\t\tpayload.documentType = fileData.type;\n\t\t\t}\n\t\t\tconst oResponse = await HttpHelper.Post(Constants.NEWS_FEED_POST_API, payload);\n\t\t\tconst keyUserChangeContent = this.getCurrentKeyUserChange();\n\t\t\tconst newsPanel = this._getPanel() as NewsPanel;\n\t\t\tconst newsPageContainer = newsPanel.getParent() as NewsAndPagesContainer;\n\t\t\tconst layout = newsPageContainer.getParent() as BaseLayout;\n\t\t\tif (oResponse && (oResponse as { error: { message: string } }).error) {\n\t\t\t\tthis.getFileUploader().setValue(\"\");\n\t\t\t\tif (keyUserChangeContent) {\n\t\t\t\t\tkeyUserChangeContent.customNewsFeedFileName = \"\";\n\t\t\t\t} else {\n\t\t\t\t\tthis.addKeyUserChanges({\n\t\t\t\t\t\tselectorControl: layout,\n\t\t\t\t\t\tchangeSpecificData: {\n\t\t\t\t\t\t\tchangeType: CHANGE_TYPES.NEWS_FEED_URL,\n\t\t\t\t\t\t\tcontent: {\n\t\t\t\t\t\t\t\toldNewsFeedUrl: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\t\t\toldShowCustomNewsFeed: this.checkNewsType(NewsType.Custom),\n\t\t\t\t\t\t\t\toldCustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\t\t\toldshowDefaultNewsFeed: this.checkNewsType(NewsType.Default),\n\t\t\t\t\t\t\t\toldShowRssNewsFeed: this.checkNewsType(NewsType.NewsUrl),\n\n\t\t\t\t\t\t\t\tnewsFeedURL: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\t\t\tshowCustomNewsFeed: true,\n\t\t\t\t\t\t\t\tcustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\t\t\tcustomNewsFeedFileName: String(this._getPanel().getProperty(\"customFileName\")),\n\t\t\t\t\t\t\t\tshowDefaultNewsFeed: false,\n\t\t\t\t\t\t\t\tshowRssNewsFeed: false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\terrorMsg = (oResponse as { error: { message: string } }).error.message.includes(\"NODATA\")\n\t\t\t\t\t? this._i18nBundle.getText(\"newsFeedEmptyFileError\")\n\t\t\t\t\t: errorMsg;\n\t\t\t\tthrow new Error(errorMsg);\n\t\t\t}\n\t\t\tconst customKey = (oResponse as { changeId: string }).changeId;\n\t\t\tif (keyUserChangeContent) {\n\t\t\t\tkeyUserChangeContent.customNewsFeedKey = customKey;\n\t\t\t\tkeyUserChangeContent.customNewsFeedFileName = this.getFileUploader().getValue();\n\t\t\t} else {\n\t\t\t\tthis.addKeyUserChanges({\n\t\t\t\t\tselectorControl: layout,\n\t\t\t\t\tchangeSpecificData: {\n\t\t\t\t\t\tchangeType: CHANGE_TYPES.NEWS_FEED_URL,\n\t\t\t\t\t\tcontent: {\n\t\t\t\t\t\t\toldNewsFeedUrl: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\t\toldShowCustomNewsFeed: this.checkNewsType(NewsType.Custom),\n\t\t\t\t\t\t\toldCustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\t\toldshowDefaultNewsFeed: this.checkNewsType(NewsType.Default),\n\t\t\t\t\t\t\toldShowRssNewsFeed: this.checkNewsType(NewsType.NewsUrl),\n\t\t\t\t\t\t\tnewsFeedURL: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\t\tshowCustomNewsFeed: true,\n\t\t\t\t\t\t\tcustomNewsFeedKey: customKey,\n\t\t\t\t\t\t\tcustomNewsFeedFileName: this.getFileUploader().getValue(),\n\t\t\t\t\t\t\tshowDefaultNewsFeed: false,\n\t\t\t\t\t\t\tshowRssNewsFeed: false\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis._eventBus.publish(\"KeyUserChanges\", \"addNewsPagesChanges\", { changes: this.getKeyUserChanges() });\n\t\t\t}\n\t\t\tMessageToast.show(String(this._i18nBundle.getText(\"customNewsFeedUploaded\")));\n\t\t\tthis.setNewsFeedEnabled(false);\n\t\t} catch (oErr) {\n\t\t\tMessageBox.error((oErr as { message: string }).message);\n\t\t\tthis.setNewsFeedEnabled(false);\n\t\t}\n\t}\n\n\tprivate getUploadedFile(): Promise<FileMetaData> {\n\t\treturn new Promise<FileMetaData>((resolve, reject) => {\n\t\t\tconst fileUploader = this.getFileUploader();\n\t\t\tlet errorMsg = this._i18nBundle.getText(\"newsFeedFileUploadError\");\n\t\t\tif (fileUploader && !fileUploader.getValue()) {\n\t\t\t\terrorMsg = this._i18nBundle.getText(\"noNewsFileError\");\n\t\t\t\treject(new Error(errorMsg));\n\t\t\t}\n\n\t\t\tconst file = fileUploader.oFileUpload.files[0];\n\t\t\tconst reader = new FileReader();\n\n\t\t\treader.onload = function () {\n\t\t\t\ttry {\n\t\t\t\t\tconst fileContent = reader.result as string;\n\t\t\t\t\tlet base64String;\n\t\t\t\t\tconst fileData: FileMetaData = { type: \"\", content: \"\" };\n\t\t\t\t\tif (file.type === \"text/csv\") {\n\t\t\t\t\t\tbase64String = window.btoa(\n\t\t\t\t\t\t\tencodeURIComponent(String(fileContent)).replace(/%([0-9A-F]{2})/g, function (match, p1: string) {\n\t\t\t\t\t\t\t\treturn String.fromCharCode(parseInt(p1, 16));\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t\tfileData.type = \"CSV\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbase64String = fileContent.replace(\"data:\", \"\").replace(/^.+,/, \"\");\n\t\t\t\t\t}\n\t\t\t\t\tfileData.content = base64String;\n\t\t\t\t\tresolve(fileData);\n\t\t\t\t} catch {\n\t\t\t\t\treject(new Error(errorMsg));\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (file.type === \"text/csv\") {\n\t\t\t\treader.readAsText(file);\n\t\t\t} else {\n\t\t\t\treader.readAsDataURL(file);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate getFileUploader(): FileUploader {\n\t\tconst customNewsUploadFileUploader = `${this.getId()}-customNewsUploadFileUploader`;\n\t\treturn this.controlMap.get(customNewsUploadFileUploader) as FileUploader;\n\t}\n\n\t/**\n\t * Add SimpleForm for Custom News Upload Form.\n\t *\n\t * @private\n\t */\n\tprivate addCustomNewsUploadSimpleForm(wrapperVBox: VBox): void {\n\t\tconst customNewsUploadSimpleFormId = `${this.getId()}-customNewsUploadSimpleForm`;\n\t\tif (!this.controlMap.get(customNewsUploadSimpleFormId)) {\n\t\t\tconst customNewsUploadSimpleForm = new SimpleForm(`${this.getId()}-customNewsUploadSimpleForm`).addStyleClass(\n\t\t\t\t\"sapContrastPlus formCustomPadding\"\n\t\t\t);\n\t\t\tconst customNewsUploadVBox = new VBox(`${this.getId()}-customNewsUploadVBox`);\n\t\t\tconst customNewsUploadFileUploader = `${this.getId()}-customNewsUploadFileUploader`;\n\t\t\tconst newsPanel = this._getPanel() as NewsPanel;\n\t\t\tconst customNewsUploadFileUploaderControl = new FileUploader(customNewsUploadFileUploader, {\n\t\t\t\tname: \"newsFeedFileUploader\",\n\t\t\t\ttooltip: this._i18nBundle.getText(\"uploadNewsFeedFile\"),\n\t\t\t\tfileType: newsPanel?.getProperty(\"supportedFileFormats\") as FileFormat[],\n\t\t\t\twidth: \"100%\",\n\t\t\t\tchange: this.handleFileChange.bind(this),\n\t\t\t\tmaximumFileSize: 25,\n\t\t\t\tfileSizeExceed: this.handleFileUploadError.bind(this),\n\t\t\t\tsameFilenameAllowed: true,\n\t\t\t\tafterDialogClose: this.handleFileDialogClose.bind(this),\n\t\t\t\tvalue: String(this._getPanel().getProperty(\"customFileName\")),\n\t\t\t\tenabled: this.checkNewsType(NewsType.Custom)\n\t\t\t});\n\t\t\tthis.controlMap.set(customNewsUploadFileUploader, customNewsUploadFileUploaderControl);\n\t\t\tconst customNewsUploadFileUploaderButtonId = `${this.getId()}-customNewsUploadFileUploaderButton`;\n\t\t\tconst customNewsUploadFileUploaderButton = new Button(customNewsUploadFileUploaderButtonId, {\n\t\t\t\ttext: this._i18nBundle.getText(\"uploadNewsFeedBtn\"),\n\t\t\t\tpress: this.handleNewsFeedFileUpload.bind(this),\n\t\t\t\ttype: \"Emphasized\",\n\t\t\t\tenabled: false\n\t\t\t});\n\t\t\tthis.controlMap.set(customNewsUploadFileUploaderButtonId, customNewsUploadFileUploaderButton);\n\t\t\tcustomNewsUploadVBox.addItem(customNewsUploadFileUploaderControl);\n\t\t\tcustomNewsUploadVBox.addItem(customNewsUploadFileUploaderButton);\n\t\t\tcustomNewsUploadSimpleForm.addContent(customNewsUploadVBox);\n\t\t\tthis.controlMap.set(customNewsUploadSimpleFormId, customNewsUploadSimpleForm);\n\t\t}\n\t\twrapperVBox.addItem(this.controlMap.get(customNewsUploadSimpleFormId) as SimpleForm);\n\t}\n\n\t/**\n\t * Load settings for the panel.\n\t *\n\t * @private\n\t */\n\tprivate loadSettings(): void {\n\t\tconst wrapperVBoxId = `${this.getId()}-wrapperVBox`;\n\t\tconst wrapperVBox = this.controlMap.get(wrapperVBoxId) as VBox;\n\t\twrapperVBox.removeAllItems();\n\t\tthis.addMessageStrip(wrapperVBox);\n\t\tthis.addNewsPaneLabel(wrapperVBox);\n\t\tthis.addDefaultNewsFeedRadioBtn(wrapperVBox);\n\t\tthis.addNewsUrlRadioBtn(wrapperVBox);\n\t\tthis.addNewsURLSimpleForm(wrapperVBox);\n\t\tthis.addCustomNewsFeedRadioBtn(wrapperVBox);\n\t\tthis.addCustomNewsUploadSimpleForm(wrapperVBox);\n\t}\n}\n"],"mappings":"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","ignoreList":[]}