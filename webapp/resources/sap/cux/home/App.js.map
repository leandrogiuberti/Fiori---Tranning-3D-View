{"version":3,"file":"App.js","names":["sap","ui","define","Log","GenericTile","mobileLibrary","Container","__BaseApp","__AppManager","_interopRequireDefault","obj","__esModule","default","BaseApp","AppManager","App","extend","metadata","library","properties","url","type","group","defaultValue","vizId","constructor","_constructor","id","settings","BaseApp.prototype.constructor.call","this","_getSSBRootControl","oSmartBusinessAppViz","getContent","getComponentInstance","getRootControl","oError","error","Error","message","String","_getInnerGenericTile","oControl","oControlMetadata","getMetadata","oDefaultAggregationDefinition","getDefaultAggregation","sDefaultAggregationName","name","aAggregationData","getAggregation","oAggregationValue","Array","isArray","getState","LoadState","Loaded","_launchApp","event","_this","appManagerInstance","getInstance","tile","getSource","Promise","resolve","fetchFavVizs","then","favoriteApps","selectedApp","find","app","appUrl","getUrl","includes","smartBusinessAppViz","vizInstance","isSmartBusinessTile","ssbRootControl","ssbGenericTile","firePress","getServiceAsync","spaceContentService","launchTileTarget","getTitle","e","reject","_handlePress","_this2","_temp"],"sources":["App.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\n\nimport Log from \"sap/base/Log\";\nimport GenericTile, { GenericTile$PressEvent } from \"sap/m/GenericTile\";\nimport mobileLibrary from \"sap/m/library\";\nimport Control from \"sap/ui/core/Control\";\nimport type { MetadataOptions } from \"sap/ui/core/Element\";\nimport Container from \"sap/ushell/Container\";\nimport SpaceContent from \"sap/ushell/services/SpaceContent\";\nimport { $AppSettings } from \"./App\";\nimport BaseApp from \"./BaseApp\";\nimport { ICustomVizInstance, ISectionAndVisualization } from \"./interface/AppsInterface\";\nimport AppManager from \"./utils/AppManager\";\n\n/**\n *\n * App class for managing and storing Apps.\n *\n * @extends sap.cux.home.BaseApp\n *\n * @author SAP SE\n * @version 0.0.1\n * @since 1.121.0\n *\n * @private\n * @ui5-restricted ux.eng.s4producthomes1\n *\n * @alias sap.cux.home.App\n */\nexport default class App extends BaseApp {\n\tconstructor(idOrSettings?: string | $AppSettings);\n\tconstructor(id?: string, settings?: $AppSettings);\n\t/**\n\t * Constructor for a new App.\n\t *\n\t * @param {string} [id] ID for the new app, generated automatically if an ID is not provided\n\t * @param {object} [settings] Initial settings for the new app\n\t */\n\tpublic constructor(id?: string, settings?: $AppSettings) {\n\t\tsuper(id, settings);\n\t}\n\tprivate appManagerInstance!: AppManager;\n\tstatic readonly metadata: MetadataOptions = {\n\t\tlibrary: \"sap.cux.home\",\n\t\tproperties: {\n\t\t\t/**\n\t\t\t * Url of the app where the user navigates to on click\n\t\t\t */\n\t\t\turl: { type: \"string\", group: \"Misc\", defaultValue: \"\" },\n\t\t\t/**\n\t\t\t * VizId of the app. Used for enabling addition of apps to FavoriteApp panel\n\t\t\t */\n\t\t\tvizId: { type: \"string\", group: \"Misc\", defaultValue: \"\" }\n\t\t}\n\t};\n\tprivate _getSSBRootControl(oSmartBusinessAppViz: ICustomVizInstance): Control | null {\n\t\ttry {\n\t\t\treturn oSmartBusinessAppViz.getContent().getComponentInstance().getRootControl() as Control | null;\n\t\t} catch (oError) {\n\t\t\tLog.error(oError instanceof Error ? oError.message : String(oError));\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tprivate _getInnerGenericTile(oControl: Control | null): GenericTile | null {\n\t\tif (!oControl) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst oControlMetadata = oControl.getMetadata();\n\t\tconst oDefaultAggregationDefinition = oControlMetadata.getDefaultAggregation() as { name?: string } | null;\n\t\tconst sDefaultAggregationName = oDefaultAggregationDefinition ? oDefaultAggregationDefinition?.name : \"content\";\n\n\t\tconst aAggregationData = sDefaultAggregationName ? oControl.getAggregation(sDefaultAggregationName) : null;\n\t\tconst oAggregationValue = Array.isArray(aAggregationData) ? aAggregationData[0] : aAggregationData;\n\n\t\tif (!oAggregationValue) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (oAggregationValue instanceof GenericTile && oAggregationValue.getState() === mobileLibrary.LoadState.Loaded) {\n\t\t\treturn oAggregationValue;\n\t\t}\n\n\t\treturn this._getInnerGenericTile(oAggregationValue as Control);\n\t}\n\n\t/**\n\t * Navigates to the clicked app\n\t * @private\n\t */\n\tprivate async _launchApp(event: GenericTile$PressEvent): Promise<void> {\n\t\tthis.appManagerInstance = this.appManagerInstance || AppManager.getInstance();\n\t\tconst tile = event.getSource();\n\t\tconst favoriteApps: ISectionAndVisualization[] = await this.appManagerInstance.fetchFavVizs(false, true);\n\t\tconst selectedApp = favoriteApps.find((app) => {\n\t\t\tconst appUrl = app.url || \"\";\n\t\t\treturn tile.getUrl().includes(appUrl);\n\t\t});\n\t\tconst smartBusinessAppViz = selectedApp?.vizInstance;\n\t\tconst isSmartBusinessTile = selectedApp?.isSmartBusinessTile;\n\t\tif (smartBusinessAppViz) {\n\t\t\tconst ssbRootControl = this._getSSBRootControl(smartBusinessAppViz);\n\t\t\tconst ssbGenericTile = isSmartBusinessTile && this._getInnerGenericTile(ssbRootControl);\n\n\t\t\tif (ssbGenericTile) {\n\t\t\t\tssbGenericTile.firePress();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t// Fallback in case smartBusinessAppViz is undefined or ssbGenericTile is not present\n\t\tconst spaceContentService = await Container.getServiceAsync<SpaceContent>(\"SpaceContent\");\n\t\tawait spaceContentService.launchTileTarget(this.getUrl(), this.getTitle());\n\t}\n\n\t/**\n\t * App Press Handler\n\t * @private\n\t */\n\tpublic async _handlePress(event: GenericTile$PressEvent) {\n\t\tif (this.getUrl()) {\n\t\t\tawait this._launchApp(event);\n\t\t}\n\t}\n}\n"],"mappings":";;;;AAAAA,IAAAC,GAAAC,OAAA,sHAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAAA,sBAAAC,EAAAC,GAAA,OAAAA,KAAAC,mBAAAD,EAAAE,UAAA,YAAAF,EAAAE,QAAAF,CAAA,OAaOG,EAAOJ,EAAAF,GAAA,MAEPO,EAAUL,EAAAD,GAEjB,MAeqBO,EAAYF,EAAOG,OAAA,oBAavBC,SAA4B,CAC3CC,QAAS,eACTC,WAAY,CAIXC,IAAK,CAAEC,KAAM,SAAUC,MAAO,OAAQC,aAAc,IAIpDC,MAAO,CAAEH,KAAM,SAAUC,MAAO,OAAQC,aAAc,MAdjDE,YAAW,SAAAC,EAACC,EAAaC,GAC/BC,6BAAAC,KAAMH,EAAIC,EACX,EAeQG,mBAAkB,SAAAA,EAACC,GAC1B,IACC,OAAOA,EAAqBC,aAAaC,uBAAuBC,gBACjE,CAAE,MAAOC,GACRjC,EAAIkC,MAAMD,aAAkBE,MAAQF,EAAOG,QAAUC,OAAOJ,IAC5D,OAAO,IACR,CACD,EAEQK,qBAAoB,SAAAA,EAACC,GAC5B,IAAKA,EAAU,CACd,OAAO,IACR,CAEA,MAAMC,EAAmBD,EAASE,cAClC,MAAMC,EAAgCF,EAAiBG,wBACvD,MAAMC,EAA0BF,EAAgCA,GAA+BG,KAAO,UAEtG,MAAMC,EAAmBF,EAA0BL,EAASQ,eAAeH,GAA2B,KACtG,MAAMI,EAAoBC,MAAMC,QAAQJ,GAAoBA,EAAiB,GAAKA,EAElF,IAAKE,EAAmB,CACvB,OAAO,IACR,CAEA,GAAIA,aAA6B/C,GAAe+C,EAAkBG,aAAejD,EAAckD,UAAUC,OAAQ,CAChH,OAAOL,CACR,CAEA,OAAOrB,KAAKW,qBAAqBU,EAClC,EAMcM,WAAU,SAAAA,EAACC,GAA6B,IAAiB,MAAAC,EACtE7B,KAAA6B,EAAKC,mBAAqBD,EAAKC,oBAAsB9C,EAAW+C,cAChE,MAAMC,EAAOJ,EAAMK,YAAY,OAAAC,QAAAC,QACwBN,EAAKC,mBAAmBM,aAAa,MAAO,OAAKC,KAAA,SAAlGC,GACN,MAAMC,EAAcD,EAAaE,KAAMC,IACtC,MAAMC,EAASD,EAAInD,KAAO,GAC1B,OAAO0C,EAAKW,SAASC,SAASF,KAE/B,MAAMG,EAAsBN,GAAaO,YACzC,MAAMC,EAAsBR,GAAaQ,oBACzC,GAAIF,EAAqB,CACxB,MAAMG,EAAiBnB,EAAK5B,mBAAmB4C,GAC/C,MAAMI,EAAiBF,GAAuBlB,EAAKlB,qBAAqBqC,GAExE,GAAIC,EAAgB,CACnBA,EAAeC,YACf,MACD,CACD,CACA,OAAAhB,QAAAC,QACkC3D,EAAU2E,gBAA8B,iBAAed,KAAA,SAAnFe,GAAmB,OAAAlB,QAAAC,QACnBiB,EAAoBC,iBAAiBxB,EAAKc,SAAUd,EAAKyB,aAAWjB,KAAA,iBAC3E,CAAC,MAAAkB,GAAA,OAAArB,QAAAsB,OAAAD,EAAA,GAMYE,aAAY,SAAAA,EAAC7B,GAA6B,IAAE,MAAA8B,EACpD1D,KAAI,MAAA2D,EAAA,cAAJD,EAAKf,SAAQ,QAAAT,QAAAC,QACVuB,EAAK/B,WAAWC,IAAMS,KAAA,eADrB,GACqB,OAAAH,QAAAC,QAAAwB,KAAAtB,KAAAsB,EAAAtB,KAAA,qBAE9B,CAAC,MAAAkB,GAAA,OAAArB,QAAAsB,OAAAD,EAAA,YA9FmBtE,CAAG","ignoreList":[]}