/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *  * (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["./BaseContainer","./utils/placeholder/NewsAndPagesPlaceholder","./library","./utils/Device"],function(e,t,s,n){"use strict";function i(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const a=typeof Symbol!=="undefined"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function o(e,t,s){if(!e.s){if(s instanceof r){if(s.s){if(t&1){t=s.s}s=s.v}else{s.o=o.bind(null,e,t);return}}if(s&&s.then){s.then(o.bind(null,e,t),o.bind(null,e,2));return}e.s=t;e.v=s;const n=e.o;if(n){n(e)}}}const r=function(){function e(){}e.prototype.then=function(t,s){const n=new e;const i=this.s;if(i){const e=i&1?t:s;if(e){try{o(n,1,e(this.v))}catch(e){o(n,2,e)}return n}else{return this}}this.o=function(e){try{const i=e.v;if(e.s&1){o(n,1,t?t(i):i)}else if(s){o(n,1,s(i))}else{o(n,2,i)}}catch(e){o(n,2,e)}};return n};return e}();function l(e){return e instanceof r&&e.s&1}function h(e,t,s){var n=-1,i,a;function h(c){try{while(++n<e.length&&(!s||!s())){c=t(n);if(c&&c.then){if(l(c)){c=c.v}else{c.then(h,a||(a=o.bind(null,i=new r,2)));return}}}if(i){o(i,1,c)}else{i=c}}catch(e){o(i||(i=new r),2,e)}}h();return i}const c=i(e);function u(e,t,s){if(typeof e[a]==="function"){var n=e[a](),i,c,u;function g(e){try{while(!(i=n.next()).done&&(!s||!s())){e=t(i.value);if(e&&e.then){if(l(e)){e=e.v}else{e.then(g,u||(u=o.bind(null,c=new r,2)));return}}}if(c){o(c,1,e)}else{c=e}}catch(e){o(c||(c=new r),2,e)}}g();if(n.return){var d=function(e){try{if(!i.done){n.return()}}catch(e){}return e};if(c&&c.then){return c.then(d,function(e){throw d(e)})}d()}return c}if(!("length"in e)){throw new TypeError("Object is not iterable")}var f=[];for(var p=0;p<e.length;p++){f.push(e[p])}return h(f,function(e){return t(f[e])},s)}const d=t["getNewsPagesPlaceholder"];const f=s["NewsType"];const p=s["OrientationType"];const g=n["DeviceType"];const y=c.extend("sap.cux.home.NewsAndPagesContainer",{metadata:{properties:{colorPersonalizations:{type:"array",group:"Misc",defaultValue:[],visibility:"hidden"},iconPersonalizations:{type:"array",group:"Misc",defaultValue:[],visibility:"hidden"},newsFeedVisibility:{type:"boolean",group:"Misc",defaultValue:true,visibility:"hidden"}}},renderer:{...c.renderer,apiVersion:2},constructor:function e(t,s){c.prototype.constructor.call(this,t,s);this.panelLoaded={};this.keyUserChange=false;this.isEndUserChange={isEndUser:false,newsType:f.None}},init:function e(){c.prototype.init.call(this);this.panelLoaded={};this.setProperty("orientation",this.getDeviceType()===g.Desktop||this.getDeviceType()===g.LargeDesktop||this.getDeviceType()===g.XLargeDesktop?p.Horizontal:p.Vertical);this.addCustomSetting("title",this._i18nBundle.getText("myInterestMsg"));this.addStyleClass("sapCuxNewsAndPagesContainer")},load:function e(){try{const e=this;const t=e.getContent();const s=u(t,function(t){if(!e.keyUserChange){e.checkEndUserChanges(t)}return Promise.resolve(t.getData()).then(function(){const s=e.getProperty("newsFeedVisibility");if(t&&t.getMetadata().getName()==="sap.cux.home.NewsPanel"&&!s){t.setVisible(false)}})});return Promise.resolve(s&&s.then?s.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},setColorPersonalizations:function e(t){const s=this.getProperty("colorPersonalizations")||[];const n=s.concat(t);this.setProperty("colorPersonalizations",n);this.getContent().forEach(e=>{if(e.getMetadata().getName()==="sap.cux.home.PagePanel"){e.applyColorPersonalizations(n)}});return this},setIconPersonalizations:function e(t){const s=this.getProperty("iconPersonalizations")||[];const n=s.concat(t);this.setProperty("iconPersonalizations",n);this.getContent().forEach(e=>{if(e.getMetadata().getName()==="sap.cux.home.PagePanel"){e.applyIconPersonalizations(n)}});return this},checkEndUserChanges:function e(t){if(t.getMetadata().getName()==="sap.cux.home.NewsPanel"&&t.getProperty("url")&&!this.keyUserChange){this.isEndUserChange.isEndUser=true}},getIsEndUserChange:function e(){return this.isEndUserChange},newsVisibilityChangeHandler:function e(t){const s=this.getContent();s.forEach(e=>{if(e.getMetadata().getName()==="sap.cux.home.NewsPanel"){let s=e;if(t.isNewsFeedVisible){this.setProperty("newsFeedVisibility",true);s.setVisible(true)}else{this.setProperty("newsFeedVisibility",false);s.setVisible(false)}}})},newsPersonalization:function e(t){const s=this.getContent();let n;s.forEach(e=>{this.checkEndUserChanges(e);if(e.getMetadata().getName()==="sap.cux.home.NewsPanel"&&!this.isEndUserChange.isEndUser){let s=e;const i=Boolean(this.getProperty("newsFeedVisibility"));this.keyUserChange=true;if(t.showCustomNewsFeed){n=f.Custom}else if(t.showRssNewsFeed){n=f.NewsUrl}else{n=f.Default}s.setProperty("type",n);s.setProperty("url",t.newsFeedURL);s.setProperty("customFeedKey",t.customNewsFeedKey);s.setProperty("customFileName",t.customNewsFeedFileName);if(i){const e=t.newsFeedURL;s.setVisible(true);const n=String(s.getProperty("customFeedKey"));if(t.showCustomNewsFeed&&n){s.setProperty("newsAvailable",true);void s.setCustomNewsFeed(n)}else if(t.showDefaultNewsFeed){void s.setDefaultNews()}else if(t.showRssNewsFeed&&e){void s.setURL(e)}else{s.setVisible(false);this.setProperty("newsFeedVisibility",false)}}}})},panelLoadedFn:function e(t,s){const n=this.getContent();n.forEach(e=>{if(e.getMetadata().getName()==="sap.cux.home.PagePanel"){this.pagePanel=e}else if(e.getMetadata().getName()==="sap.cux.home.NewsPanel"){this.newsPanel=e}});this.panelLoaded[t]=s;this.adjustLayout()},adjustStyleLayout:function e(t){const s=this.getDeviceType();const n=this.newsPanel?this.newsPanel.getContent()?.[0]:undefined;const i=this.pagePanel?this.pagePanel.getContent()?.[0]:undefined;if(t){this.newsPanel.adjustLayout()}if(s===g.Desktop||s===g.LargeDesktop||s===g.XLargeDesktop){if(t){i?.setWidth("100%")}this.setOrientation(p.Horizontal);n?.setWidth("100%");n?.addStyleClass("newsTileMaxWidth")}else if(s===g.Tablet){this.setOrientation(p.Vertical);i?.setWidth("100%");i?.setJustifyContent("Start");n?.setWidth("calc(100vw - 64px)");n?.removeStyleClass("newsTileMaxWidth")}else{this.setOrientation(p.Vertical);n?.setWidth("calc(100vw - 16px)")}if(i){setTimeout(this.pagePanel.attachResizeHandler.bind(this.pagePanel,t,this.getDomRef()?.clientWidth||0,i))}},adjustLayout:function e(){if(this.pagePanel&&this.newsPanel&&this.newsPanel.getVisible()){let e=true;if(this.panelLoaded["Page"]?.loaded||this.panelLoaded["News"]?.loaded){if(this.panelLoaded["News"]?.loaded===false){e=false;this.removeContent(this.newsPanel)}else if(this.panelLoaded["Page"]?.loaded===false){this.removeContent(this.pagePanel)}this.adjustStyleLayout(e)}}else if(this.pagePanel&&this.panelLoaded["Page"]?.loaded){this.adjustStyleLayout(false)}},getGenericPlaceholderContent:function e(){return d()}});return y});
//# sourceMappingURL=NewsAndPagesContainer.js.map