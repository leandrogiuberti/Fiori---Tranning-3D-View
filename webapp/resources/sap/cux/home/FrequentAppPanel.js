/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *  * (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/ui/core/EventBus","sap/ushell/Container","sap/ushell/EventHub","./BaseAppPersPanel","./MenuItem"],function(e,t,n,s,r,i){"use strict";function o(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}function a(e,t){try{var n=e()}catch(e){return t(e)}if(n&&n.then){return n.then(void 0,t)}return n}const u=o(r);const c=o(i);const p=u.extend("sap.cux.home.FrequentAppPanel",{metadata:{library:"sap.cux.home",defaultAggregation:"apps",aggregations:{apps:{type:"sap.cux.home.App",singularName:"app",multiple:true,visibility:"hidden"}}},constructor:function e(t,n){u.prototype.constructor.call(this,t,n);this.setSupported(false)},init:function e(){u.prototype.init.call(this);this.setProperty("key","frequentApps");this.setProperty("title",this._i18nBundle.getText("frequentlyUsedTab"));this.setProperty("tooltip",this._i18nBundle.getText("frequentlyUsedTabInfo"));this._attachUserActivityTracking();s.on("userRecentsCleared").do(()=>{void this.refresh()});this.oEventBus=t.getInstance();this.oEventBus.subscribe("appsChannel","favAppColorChanged",(e,t,n)=>{const{item:s,color:r}=n;this._applyUngroupedTileColor(s,r)},this)},loadApps:function e(){try{const e=this;return Promise.resolve(e._getFrequentVisualizations()).then(function(t){e.destroyAggregation("apps",true);t=t.map((t,n)=>({...t,menuItems:e._getActions(t.addedInFavorites,n)}));const n=e.generateApps(t);e.setApps(n)})}catch(e){return Promise.reject(e)}},_getFrequentVisualizations:function t(){try{const t=this;return Promise.resolve(a(function(){return Promise.resolve(n.getServiceAsync("UserRecents")).then(function(e){return Promise.resolve(e?.getFrequentActivity()).then(function(e){return Promise.resolve(t.convertActivitiesToVisualizations(e))})})},function(t){e.error(t);return[]}))}catch(e){return Promise.reject(e)}},_getActions:function e(t=false,n){const s=[];if(!t){s.push(new c(`${this.getKey()}--addToFavorites--${n}`,{title:this._i18nBundle.getText("addToFavorites"),icon:"sap-icon://add-favorite",press:e=>{void this._addAppToFavorites(e)}}))}return s},generateIllustratedMessage:function e(){const t=u.prototype.generateIllustratedMessage.call(this);t.setDescription(this._i18nBundle.getText("noFreqAppsDescription"));return t}});return p});
//# sourceMappingURL=FrequentAppPanel.js.map