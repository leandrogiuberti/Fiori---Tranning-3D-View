/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *  * (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/i18n/Localization","sap/m/GenericTile","sap/m/Text","sap/m/TileContent","sap/m/library","sap/ui/core/Component","sap/ushell/api/S4MyHome","./ToDoPanel","./utils/SituationUtils"],function(t,e,n,o,i,r,a,s,u){"use strict";function c(t){return t&&t.__esModule&&typeof t.default!=="undefined"?t.default:t}function l(t,e){try{var n=t()}catch(t){return e(t)}if(n&&n.then){return n.then(void 0,e)}return n}const g=i["LoadState"];const p=i["URLHelper"];const f=i["ValueColor"];const d=c(s);const h=u["executeNavigation"];const T=u["fetchNavigationTargetData"];const y=u["getSituationMessage"];const S=d.extend("sap.cux.home.SituationPanel",{constructor:function t(e,n){d.prototype.constructor.call(this,e,n)},init:function t(){d.prototype.init.call(this);this.setProperty("key","situations");this.setProperty("title",this._i18nBundle.getText("situationsTabTitle"))},generateRequestUrls:function e(n){const o=t.getSAPLogonLanguage()||"";return[this.getCountUrl(),`${this.getDataUrl()}&$expand=_InstanceAttribute($expand=_InstanceAttributeValue($filter=(Language eq '${o}' or Language eq ''))),_InstanceText($filter=(Language eq '${o}' or Language eq ''))&$skip=0&$top=${n}`]},generateCardTemplate:function t(i,r){return new e(`${i}-actionTile`,{mode:"ActionMode",frameType:"TwoByOne",pressEnabled:true,header:y(r.getProperty("_InstanceText/0/SituationTitle"),r.getProperty("_InstanceAttribute")),headerImage:"sap-icon://alert",valueColor:f.Critical,state:r.getProperty("loadState"),press:t=>{void this._onPressSituation(t)},tileContent:[new o(`${i}-actionTileContent`,{content:new n(`${i}-text`,{text:y(r.getProperty("_InstanceText/0/SituationText"),r.getProperty("_InstanceAttribute"))}),footer:a.formatDate(r.getProperty("SitnInstceCreatedAtDateTime"))})]})},_onPressSituation:function t(e){try{const t=this;const n=e.getSource();const o=n.getBindingContext();const{loadState:i,SitnInstceKey:a,SitnEngineType:s}=o?.getObject();const u=t.getTargetAppUrl();const c=function(){if(i!==g.Loading&&u){const e=function(){if(a){const e=l(function(){return Promise.resolve(T(a,s)).then(function(e){const n=e;return Promise.resolve(h(n,r.getOwnerComponentFor(t.getParent()))).then(function(){})})},function(e){if(e&&s==="1"&&e._sErrorCode==="NavigationHandler.isIntentSupported.notSupported"){p.redirect(t.getTargetAppUrl(),false)}});if(e&&e.then)return e.then(function(){})}else{p.redirect(u,false)}}();if(e&&e.then)return e.then(function(){})}}();return Promise.resolve(c&&c.then?c.then(function(){}):void 0)}catch(t){return Promise.reject(t)}},getNoDataText:function t(){return this._i18nBundle.getText("noSituationTitle")}});return S});
//# sourceMappingURL=SituationPanel.js.map