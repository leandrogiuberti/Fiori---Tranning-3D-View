{"version":3,"file":"SpaceInsightsPanel-dbg.js","names":["sap","ui","define","Log","GridContainer","GridContainerItemLayoutData","GenericTile","HeaderContainer","VBox","sap_m_library","Lib","JSONModel","Container","S4MyHome","__BasePanel","__AppManager","___utils_CommonUtils","___utils_DataFormatUtils","___utils_Device","___utils_InsightsUtils","_interopRequireDefault","obj","__esModule","default","_catch","body","recover","result","e","then","LoadState","_finallyRethrows","finalizer","bind","BasePanel","_iteratorSymbol","Symbol","iterator","_settle","pact","state","value","s","_Pact","v","o","observer","prototype","onFulfilled","onRejected","callback","_this","_isSettledPact","thenable","_forTo","array","check","i","reject","_cycle","length","AppManager","_forOf","target","step","next","done","return","_fixup","TypeError","values","push","filterVisualizations","getPageManagerInstance","recycleId","DeviceType","fetchElementProperties","createShowMoreActionButton","createShowMoreMenuItem","getAssociatedFullScreenMenuItem","tilesMenuItems","tilesContainerMenuItems","tilesActionButtons","tilesContainerActionButtons","DisplayFormat","StandardTileWidth","StandardWideTileWidth","Gap","SpaceInsightsPanel","extend","metadata","library","properties","spaceId","type","group","defaultValue","title","fullScreenName","visibility","defaultAggregation","aggregations","content","multiple","singularName","tiles","events","handleHidePanel","parameters","handleUnhidePanel","constructor","_constructor","id","settings","BasePanel.prototype.constructor.call","_headerVisible","init","_init","BasePanel.prototype.init.call","_controlMap","Map","_oData","activateInsightsTiles","activateInsightsTilesOnPhone","activateInsightsTilesOnDesktop","_controlModel","appManagerInstance","getInstance","pageManager","setProperty","_createTilesFlexWrapper","getServiceAsync","VizInstantiationService","catch","error","Error","message","String","_toggleTileActivity","setTitle","_setTitle","spaceTitle","getTitle","_getTitle","getProperty","toggleUserActions","event","show","getParameter","_temp2","_temp","_appSwitched","Promise","resolve","refreshData","attachRouteMatched","warning","_showPlaceHolders","placeholderArray","Array","_calculatePlaceholderTileCount","fill","Loading","aInsightsApps","map","tileState","index","getId","sizeBehavior","frameType","mode","visible","renderOnThemeChange","ariaRole","dropAreaOffset","setLayoutData","columns","_clearPlaceHolders","renderPanel","_renderPanel","_exit","_this2","_temp4","_result","_temp3","_await$_this2$refresh","fireHandleHidePanel","_wasThrown","fireEvent","fetchDynamicAppInSpace","_fetchDynamicAppInSpace","_this3","_temp8","_this3$pageManager$fe","_temp7","allVisualizations","_filterDuplicateVizs","allSpaces","space","find","children","_temp6","_temp5","child","fetchFavVizs","visualizations","_this3$allSpaces","fetchAllAvailableSpaces","_refreshData","refreshTiles","_this4","panelName","getMetadata","getName","_this4$fetchDynamicAp","_temp0","fireHandleUnhidePanel","isMobile","getDeviceType","Mobile","container","tilesMobileContainer","tilesContainer","sDefaultAggreName","getDefaultAggregationName","dynamicTiles","getAggregation","forEach","refresh","_getInsightsContainer","updatePanelsItemCount","bIsSmartBusinessTilePresent","some","oApp","isSmartBusinessTile","_temp9","load","name","_tilesWrapper","renderType","width","items","_createMobileFlexWrapper","_createWrapperFlexBox","setModel","addContent","scrollStep","scrollStepByItem","gridLayout","scrollTime","showDividers","addStyleClass","_attachAggregationToContainer","_updateTilesActivity","isPhoneScreen","bActivateInsightsTiles","Boolean","bindAggregation","path","factory","context","getObject","oVisualization","instantiateVisualization","visualization","minRows","getDisplayFormat","Standard","bindProperty","handleHideHeader","_handleHideHeader","_toggleHeaderActions","handleAddHeader","_handleAddHeader","_calculateVisibleTileCount","insightsApps","layout","_getLayout","layoutDomRef","getDomRef","apps","count","isHeaderVisible","sectionNodeIndex","sectionDomRef","childNodes","domProperties","availableWidth","widthMap","StandardWide","nextTileWidth","displayFormatHint","Math","floor","_adjustLayout","isMobileDevice","visibleTileCount","isElementExpanded","_getCurrentExpandedElementName","slice","showFullScreenButton","actionButton","includes","ADD_TILES","toggleActionButton","toggleFullScreenElements","fullScreenButton","fullScreenText","updateMenuItem","get","SHOW_MORE","updateActionButton","insightsContainer","getParent","getContainerMenuItems","_getContainerMenuItems","_containerMenuItems","containerShowMore","set","getContainerActionButtons","_getContainerActionButtons","_containerActionButtons","containerFullScreenActionButton","bShow","menuItem","toggleMenuListItem"],"sources":["SpaceInsightsPanel.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\n\nimport Log from \"sap/base/Log\";\nimport GridContainer from \"sap/f/GridContainer\";\nimport GridContainerItemLayoutData from \"sap/f/GridContainerItemLayoutData\";\nimport Button from \"sap/m/Button\";\nimport GenericTile from \"sap/m/GenericTile\";\nimport HeaderContainer from \"sap/m/HeaderContainer\";\nimport VBox from \"sap/m/VBox\";\nimport { LoadState } from \"sap/m/library\";\nimport Event from \"sap/ui/base/Event\";\nimport ManagedObject from \"sap/ui/base/ManagedObject\";\nimport Control from \"sap/ui/core/Control\";\nimport type { MetadataOptions } from \"sap/ui/core/Element\";\nimport UI5Element from \"sap/ui/core/Element\";\nimport Lib from \"sap/ui/core/Lib\";\nimport Context from \"sap/ui/model/Context\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport Container from \"sap/ushell/Container\";\nimport S4MyHome from \"sap/ushell/api/S4MyHome\";\nimport VisualizationInstantiation from \"sap/ushell/services/VisualizationInstantiation\";\nimport BasePanel from \"./BasePanel\";\nimport InsightsContainer from \"./InsightsContainer\";\nimport MenuItem from \"./MenuItem\";\nimport { $SpaceInsightsPanelSettings } from \"./SpaceInsightsPanel\";\nimport { ICustomVisualization, ISectionAndVisualization } from \"./interface/AppsInterface\";\nimport { ISpace } from \"./interface/PageSpaceInterface\";\nimport AppManager from \"./utils/AppManager\";\nimport { filterVisualizations, getPageManagerInstance } from \"./utils/CommonUtils\";\nimport { recycleId } from \"./utils/DataFormatUtils\";\nimport { DeviceType, fetchElementProperties } from \"./utils/Device\";\nimport { createShowMoreActionButton, createShowMoreMenuItem, getAssociatedFullScreenMenuItem } from \"./utils/InsightsUtils\";\nimport PageManager from \"./utils/PageManager\";\n\nexport enum tilesMenuItems {\n\tREFRESH = \"tiles-refresh\",\n\tADD_APPS = \"tiles-addSmartApps\",\n\tEDIT_TILES = \"tiles-editTiles\"\n}\n\nexport enum tilesContainerMenuItems {\n\tREFRESH = \"container-tiles-refresh\",\n\tADD_APPS = \"container-tiles-addSmartApps\",\n\tEDIT_TILES = \"container-tiles-editTiles\",\n\tSHOW_MORE = \"tilesContainerFullScreenMenuItem\"\n}\n\nexport enum tilesActionButtons {\n\tADD_TILES = \"tiles-addTilesButton\"\n}\n\nexport enum tilesContainerActionButtons {\n\tADD_TILES = \"container-tiles-addTilesButton\",\n\tSHOW_MORE = \"tilesContanerFullScreenActionButton\"\n}\n\nexport enum DisplayFormat {\n\tStandard = \"standard\",\n\tStandardWide = \"standardWide\"\n}\n\nconst StandardTileWidth = 176;\nconst StandardWideTileWidth = 368;\nconst Gap = 16;\n\n/**\n *\n * Tiles Panel class for managing and storing Space Insights Tiles.\n *\n * @extends sap.cux.home.BasePanel\n *\n * @author SAP SE\n * @version 0.0.1\n *\n * @private\n * @ui5-experimental-since 1.138.0\n * @ui5-restricted ux.eng.s4producthomes1\n *\n * @alias sap.cux.home.SpaceInsightsPanel\n */\n\nexport default class SpaceInsightsPanel extends BasePanel {\n\tconstructor(idOrSettings?: string | $SpaceInsightsPanelSettings);\n\tconstructor(id?: string, settings?: $SpaceInsightsPanelSettings);\n\t/**\n\t * Constructor for a new Tiles Panel.\n\t *\n\t * @param {string} [id] ID for the new control, generated automatically if an ID is not provided\n\t * @param {object} [settings] Initial settings for the new control\n\t */\n\tpublic constructor(id?: string, settings?: $SpaceInsightsPanelSettings) {\n\t\tsuper(id, settings);\n\t}\n\tprivate _oData!: Record<string, unknown>;\n\tprivate appManagerInstance!: AppManager;\n\tprivate VizInstantiationService!: VisualizationInstantiation;\n\tprivate tilesContainer!: GridContainer;\n\tprivate tilesMobileContainer!: HeaderContainer;\n\tprivate _tilesWrapper!: VBox;\n\tprivate aInsightsApps!: ICustomVisualization[] | GenericTile[];\n\tprivate _controlModel!: JSONModel;\n\tpublic _controlMap!: Map<string, Control | Element | UI5Element>;\n\tprivate _containerMenuItems!: MenuItem[];\n\tprivate _containerActionButtons!: Button[];\n\tprivate insightsContainer!: InsightsContainer;\n\tprivate _appSwitched!: boolean;\n\tprivate _headerVisible: boolean = false;\n\tprivate pageManager!: PageManager;\n\tprivate allSpaces!: ISpace[];\n\tprivate spaceTitle!: string | undefined;\n\tstatic readonly metadata: MetadataOptions = {\n\t\tlibrary: \"sap.cux.home\",\n\t\tproperties: {\n\t\t\t/**\n\t\t\t * Specifies the space whose apps should be loaded.\n\t\t\t */\n\t\t\tspaceId: { type: \"string\", group: \"Data\", defaultValue: \"\" },\n\t\t\t/**\n\t\t\t * Title for the tiles panel\n\t\t\t */\n\t\t\ttitle: { type: \"string\", group: \"Misc\", defaultValue: \"\" },\n\t\t\t/**\n\t\t\t * The name of the URL parameter used to expand the container into full-screen mode.\n\t\t\t */\n\t\t\tfullScreenName: { type: \"string\", group: \"Misc\", defaultValue: \"SI3\", visibility: \"hidden\" }\n\t\t},\n\t\tdefaultAggregation: \"tiles\",\n\t\taggregations: {\n\t\t\t/**\n\t\t\t * Specifies the content aggregation of the panel.\n\t\t\t */\n\t\t\tcontent: { multiple: true, singularName: \"content\", visibility: \"hidden\" },\n\t\t\t/**\n\t\t\t * Aggregation of tiles available within the tiles Panel\n\t\t\t */\n\t\t\ttiles: { type: \"sap.cux.home.App\", multiple: true, singularName: \"tile\", visibility: \"hidden\" }\n\t\t},\n\t\tevents: {\n\t\t\thandleHidePanel: {\n\t\t\t\tparameters: {}\n\t\t\t},\n\t\t\thandleUnhidePanel: {\n\t\t\t\tparameters: {}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Initializes the Tiles Panel.\n\t *\n\t * @private\n\t * @override\n\t */\n\tinit() {\n\t\tsuper.init();\n\t\tthis._controlMap = new Map();\n\t\t//Initialise Tiles Model\n\t\tthis._oData = {\n\t\t\ttiles: [] as ICustomVisualization[],\n\t\t\tactivateInsightsTiles: true,\n\t\t\tactivateInsightsTilesOnPhone: false,\n\t\t\tactivateInsightsTilesOnDesktop: false\n\t\t};\n\t\tthis._controlModel = new JSONModel(this._oData);\n\t\tthis.appManagerInstance = AppManager.getInstance();\n\t\tthis.pageManager = getPageManagerInstance(this);\n\t\tthis.setProperty(\"enableFullScreen\", true);\n\n\t\tthis._createTilesFlexWrapper();\n\t\tContainer.getServiceAsync<VisualizationInstantiation>(\"VisualizationInstantiation\")\n\t\t\t.then((VizInstantiationService) => {\n\t\t\t\tthis.VizInstantiationService = VizInstantiationService;\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tLog.error(error instanceof Error ? error.message : String(error));\n\t\t\t});\n\n\t\t// Toggles the activity of tiles\n\t\tthis._toggleTileActivity();\n\t}\n\n\tpublic setTitle(title: string) {\n\t\tif (!this.spaceTitle) this.spaceTitle = title;\n\t\treturn this.setProperty(\"title\", title);\n\t}\n\n\tpublic getTitle(): string {\n\t\tif (this.spaceTitle) return this.spaceTitle;\n\t\treturn this.getProperty(\"title\") as string;\n\t}\n\n\t/**\n\t * Toggles the activity of tiles on route change.\n\t *\n\t * @private\n\t * @returns {void}\n\t */\n\tprivate _toggleTileActivity(): void {\n\t\tconst toggleUserActions = async (event: Event<{ isMyHomeRoute: boolean }>) => {\n\t\t\tconst show = event.getParameter(\"isMyHomeRoute\");\n\t\t\tthis._controlModel.setProperty(\"/activateInsightsTiles\", show);\n\t\t\tif (show) {\n\t\t\t\tif (this._appSwitched) {\n\t\t\t\t\tawait this.refreshData(true);\n\t\t\t\t\tthis._appSwitched = false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._appSwitched = true;\n\t\t\t}\n\t\t};\n\n\t\ttry {\n\t\t\tS4MyHome.attachRouteMatched({}, toggleUserActions, this);\n\t\t} catch (error) {\n\t\t\tLog.warning(error instanceof Error ? error.message : String(error));\n\t\t}\n\t}\n\n\t/**\n\t * Displays placeholder tiles while loading.\n\t *\n\t * @private\n\t * @returns {void}\n\t */\n\tprivate _showPlaceHolders() {\n\t\tconst placeholderArray = new Array(this._calculatePlaceholderTileCount()).fill(LoadState.Loading) as LoadState[];\n\t\tthis.aInsightsApps = placeholderArray.map((tileState: LoadState, index: number) => {\n\t\t\treturn new GenericTile(recycleId(`${this.getId()}--placeHolderTile--${index}`), {\n\t\t\t\tsizeBehavior: \"Responsive\",\n\t\t\t\tstate: tileState,\n\t\t\t\tframeType: \"OneByOne\",\n\t\t\t\tmode: \"IconMode\",\n\t\t\t\tvisible: true,\n\t\t\t\trenderOnThemeChange: true,\n\t\t\t\tariaRole: \"listitem\",\n\t\t\t\tdropAreaOffset: 8\n\t\t\t}).setLayoutData?.(\n\t\t\t\tnew GridContainerItemLayoutData(recycleId(`${this.getId()}--placeHolderTileLayoutData--${index}`), {\n\t\t\t\t\tcolumns: 2\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\t\tthis._controlModel.setProperty(\"/tiles\", this.aInsightsApps);\n\t}\n\n\t/**\n\t * Clears the placeholder tiles.\n\t *\n\t * @private\n\t * @returns {void}\n\t */\n\tprivate _clearPlaceHolders() {\n\t\tthis._controlModel.setProperty(\"/tiles\", []);\n\t}\n\n\t/**\n\t * Renders the panel.\n\t *\n\t * @private\n\t * @returns {Promise<void>} A promise that resolves when the panel is rendered.\n\t */\n\tpublic async renderPanel(): Promise<void> {\n\t\ttry {\n\t\t\treturn await this.refreshData();\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t\tthis.fireHandleHidePanel();\n\t\t} finally {\n\t\t\tthis.fireEvent(\"loaded\");\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n\n\tprivate async fetchDynamicAppInSpace(): Promise<ICustomVisualization[]> {\n\t\tconst spaceId = this.getProperty(\"spaceId\") as string;\n\t\tthis.allSpaces = this.allSpaces || (await this.pageManager.fetchAllAvailableSpaces());\n\t\tconst space = this.allSpaces.find((space) => space.id === spaceId);\n\n\t\tif (!space || space.children.length === 0) return [];\n\t\tlet allVisualizations: ISectionAndVisualization[] = [];\n\n\t\tif (space && space.children.length > 0) {\n\t\t\tfor (const child of space.children) {\n\t\t\t\tconst visualizations = await this.appManagerInstance.fetchFavVizs(true, true, child.id);\n\t\t\t\tallVisualizations.push(...visualizations);\n\t\t\t}\n\t\t}\n\n\t\t//Filter out dynamic tiles\n\t\tallVisualizations = filterVisualizations(allVisualizations, true);\n\n\t\t//filter out duplicate visualizations\n\t\tallVisualizations = this.appManagerInstance._filterDuplicateVizs(allVisualizations, false);\n\n\t\treturn allVisualizations;\n\t}\n\n\t/**\n\t * Refreshes the data in the panel.\n\t *\n\t * @private\n\t * @param {boolean} [refreshTiles=false] - Whether to refresh the tiles.\n\t * @returns {Promise<void>} A promise that resolves when the data is refreshed.\n\t */\n\tpublic async refreshData(refreshTiles: boolean = false) {\n\t\tconst panelName = this.getMetadata().getName();\n\t\tthis.aInsightsApps = await this.fetchDynamicAppInSpace();\n\t\tconst bIsSmartBusinessTilePresent = this.aInsightsApps.some((oApp) => oApp.isSmartBusinessTile);\n\t\tif (bIsSmartBusinessTilePresent) {\n\t\t\tawait Lib.load({ name: \"sap.cloudfnd.smartbusiness.lib.reusetiles\" });\n\t\t}\n\t\tthis._clearPlaceHolders();\n\t\tthis._controlModel.setProperty(\"/tiles\", this.aInsightsApps);\n\t\tif (this.aInsightsApps?.length) {\n\t\t\tthis.fireHandleUnhidePanel();\n\t\t\tif (refreshTiles) {\n\t\t\t\tconst isMobile = this.getDeviceType() === DeviceType.Mobile;\n\t\t\t\tconst container = isMobile ? this.tilesMobileContainer : this.tilesContainer;\n\t\t\t\tconst sDefaultAggreName = container.getMetadata().getDefaultAggregationName();\n\t\t\t\tconst dynamicTiles = (container.getAggregation(sDefaultAggreName) as ManagedObject[]) || [];\n\t\t\t\tdynamicTiles.forEach((tiles) => (tiles as ICustomVisualization).refresh?.());\n\t\t\t}\n\t\t\tthis._getInsightsContainer().updatePanelsItemCount(this.aInsightsApps.length, panelName);\n\t\t\tif (this._headerVisible) {\n\t\t\t\tthis.setProperty(\"title\", `${this.spaceTitle} (${this.aInsightsApps.length})`);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.fireHandleHidePanel();\n\t\t}\n\t}\n\n\t/**\n\t * Generates the wrapper for the tiles container, if it doesn't already exist\n\t *\n\t * @private\n\t * @override\n\t * @returns {sap.m.VBox} The tiles Vbox wrapper.\n\t */\n\tprivate _createTilesFlexWrapper() {\n\t\tif (!this._tilesWrapper) {\n\t\t\tthis._tilesWrapper = new VBox(`${this.getId()}-tilesWrapper`, {\n\t\t\t\trenderType: \"Bare\",\n\t\t\t\twidth: \"100%\",\n\t\t\t\titems: [this._createMobileFlexWrapper(), this._createWrapperFlexBox()]\n\t\t\t});\n\t\t\tthis._showPlaceHolders();\n\t\t\tthis._tilesWrapper.setModel(this._controlModel);\n\t\t\tthis.addContent(this._tilesWrapper);\n\t\t}\n\t}\n\n\t/**\n\t * Generates wrapper for displaying tiles in mobile mode.\n\t * @private\n\t * @returns {sap.m.HeaderContainer} The generated tiles wrapper.\n\t */\n\n\tprivate _createMobileFlexWrapper(): HeaderContainer {\n\t\t// Check if the mobile container already exists\n\t\tif (!this.tilesMobileContainer) {\n\t\t\t// Create the HeaderContainer with required properties\n\t\t\tthis.tilesMobileContainer = new HeaderContainer(`${this.getId()}-insightsTilesMobileContainer`, {\n\t\t\t\tscrollStep: 0,\n\t\t\t\tscrollStepByItem: 1,\n\t\t\t\tgridLayout: true,\n\t\t\t\tscrollTime: 1000,\n\t\t\t\tshowDividers: false,\n\t\t\t\tvisible: \"{/isPhone}\"\n\t\t\t}).addStyleClass(\"sectionMarginTopTilesInsight sapMHeaderContainerMarginBottom\");\n\n\t\t\t// Attach aggregation to the container\n\t\t\tthis._attachAggregationToContainer(this.tilesMobileContainer);\n\t\t}\n\t\t// Return the existing or newly created container\n\t\treturn this.tilesMobileContainer;\n\t}\n\n\t/**\n\t * Generates app wrapper (GridContainer) for displaying tiles.\n\t * @private\n\t * @returns {sap.m.GridContainer} The generated tiles wrapper.\n\t */\n\n\tprivate _createWrapperFlexBox(): GridContainer {\n\t\t// Check if the tilesContainer already exists\n\t\tif (!this.tilesContainer) {\n\t\t\t// Create the GridContainer with required properties\n\t\t\tthis.tilesContainer = new GridContainer(`${this.getId()}-insightsTilesContainer`, {\n\t\t\t\tvisible: \"{= !${/isPhone}}\"\n\t\t\t}).addStyleClass(\"insightTiles sapUiSmallMarginTop sapUiSmallMarginBottom\");\n\t\t\t// Attach aggregation to the container\n\t\t\tthis._attachAggregationToContainer(this.tilesContainer);\n\t\t}\n\t\t// Return the existing or newly created container\n\t\treturn this.tilesContainer;\n\t}\n\n\t/**\n\t * Updates the activation flags for Insights Tiles based on the device type and viewport.\n\t *\n\t *\n\t * @private\n\t * @returns {void}\n\t */\n\tprivate _updateTilesActivity(): void {\n\t\t// Activate Insights Tiles based on container in viewport\n\t\tconst isPhoneScreen: boolean = this.getDeviceType() === DeviceType.Mobile;\n\t\t// Explicitly type the property being retrieved\n\t\tconst bActivateInsightsTiles: boolean = Boolean(this._controlModel.getProperty(\"/activateInsightsTiles\"));\n\t\tthis._controlModel.setProperty(\"/activateInsightsTilesOnPhone\", bActivateInsightsTiles && isPhoneScreen);\n\t\tthis._controlModel.setProperty(\"/activateInsightsTilesOnDesktop\", bActivateInsightsTiles && !isPhoneScreen);\n\t}\n\t/**\n\t * Attaches necessary aggregations and configurations to the provided container.\n\t *\n\t * @private\n\t * @param {GridContainer | HeaderContainer} tilesContainer - The container to which the aggregation and events are to be attached.\n\t * @returns {void}\n\t *\n\t */\n\tprivate _attachAggregationToContainer(tilesContainer: GridContainer | HeaderContainer) {\n\t\ttilesContainer.setModel(this._controlModel);\n\t\tconst sDefaultAggreName = tilesContainer.getMetadata().getDefaultAggregationName();\n\t\tconst isPhoneScreen = this.getDeviceType() === DeviceType.Mobile;\n\t\ttilesContainer.bindAggregation(sDefaultAggreName, {\n\t\t\tpath: \"/tiles\",\n\t\t\tfactory: (id: string, context: Context): ManagedObject => {\n\t\t\t\tconst oApp = context.getObject() as ICustomVisualization;\n\t\t\t\tif (oApp instanceof GenericTile) {\n\t\t\t\t\treturn oApp;\n\t\t\t\t}\n\t\t\t\tconst oVisualization = this.VizInstantiationService.instantiateVisualization(oApp.visualization) as ICustomVisualization;\n\t\t\t\toVisualization.setLayoutData?.(\n\t\t\t\t\tnew GridContainerItemLayoutData(`${this.getId()}-itemLayoutData-${id}`, {\n\t\t\t\t\t\tminRows: 2,\n\t\t\t\t\t\tcolumns: oVisualization.getDisplayFormat?.() === DisplayFormat.Standard ? 2 : 4\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\toVisualization?.bindProperty?.(\n\t\t\t\t\t\"active\",\n\t\t\t\t\tisPhoneScreen ? \"/activateInsightsTilesOnPhone\" : \"/activateInsightsTilesOnDesktop\"\n\t\t\t\t);\n\t\t\t\treturn oVisualization as ManagedObject;\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Hides the header of the tiles panel.\n\t * @private\n\t */\n\tpublic handleHideHeader() {\n\t\tthis._headerVisible = false;\n\t\tthis.setProperty(\"title\", \"\");\n\t\tthis._toggleHeaderActions(false);\n\t}\n\n\t/**\n\t * Adds the header to the tiles panel.\n\t * @private\n\t */\n\tpublic handleAddHeader() {\n\t\tthis._headerVisible = true;\n\t\tthis.setProperty(\"title\", `${this.spaceTitle} (${this.aInsightsApps.length})`);\n\t\tthis._toggleHeaderActions(true);\n\t}\n\n\t/**\n\t * Calculates the number of visible tiles that can fit within the available width of the parent container.\n\t *\n\t * @private\n\t * @param {ICustomVisualization[]} insightsApps - An array of custom visualizations to be displayed as tiles.\n\t * @returns {number} - The number of visible tiles.\n\t */\n\tprivate _calculateVisibleTileCount(insightsApps: ICustomVisualization[]): number {\n\t\tconst layout = this._getInsightsContainer()?._getLayout();\n\t\tconst layoutDomRef = layout?.getDomRef();\n\t\tconst apps = insightsApps || [];\n\t\tlet count = 0;\n\n\t\tif (layoutDomRef && apps.length) {\n\t\t\tconst isHeaderVisible = layout.getProperty(\"showHeader\") as boolean;\n\t\t\tconst sectionNodeIndex = isHeaderVisible ? 1 : 0;\n\t\t\tconst sectionDomRef = layoutDomRef.childNodes[sectionNodeIndex] as Element;\n\t\t\tconst domProperties = fetchElementProperties(sectionDomRef, [\"width\", \"padding-left\", \"padding-right\"]);\n\t\t\tlet availableWidth = domProperties.width - domProperties[\"padding-left\"] - domProperties[\"padding-right\"];\n\t\t\tconst widthMap = {} as Record<DisplayFormat, number>;\n\n\t\t\twidthMap[DisplayFormat.Standard] = StandardTileWidth + Gap;\n\t\t\twidthMap[DisplayFormat.StandardWide] = StandardWideTileWidth + Gap;\n\n\t\t\tlet nextTileWidth = widthMap[(apps[count].visualization?.displayFormatHint ?? DisplayFormat.Standard) as DisplayFormat];\n\t\t\tdo {\n\t\t\t\tavailableWidth -= nextTileWidth;\n\t\t\t\t++count;\n\t\t\t\tnextTileWidth = widthMap[(apps[count]?.visualization?.displayFormatHint ?? DisplayFormat.Standard) as DisplayFormat];\n\t\t\t} while (availableWidth > nextTileWidth);\n\t\t}\n\n\t\treturn count || 1;\n\t}\n\n\tprivate _calculatePlaceholderTileCount(): number {\n\t\tconst layoutDomRef = this._getInsightsContainer()?._getLayout()?.getDomRef();\n\t\tlet count = 0;\n\t\tif (layoutDomRef) {\n\t\t\tconst sectionDomRef = layoutDomRef.childNodes[0] as Element;\n\t\t\tconst domProperties = fetchElementProperties(sectionDomRef, [\"width\", \"padding-left\", \"padding-right\"]);\n\t\t\tlet availableWidth = domProperties.width - domProperties[\"padding-left\"] - domProperties[\"padding-right\"];\n\t\t\tconst width = StandardTileWidth + Gap;\n\n\t\t\tcount = Math.floor(availableWidth / width);\n\t\t}\n\n\t\treturn count || 1;\n\t}\n\n\t/**\n\t * Adjusts the layout of the tiles panel based on the current layout and device type.\n\t *\n\t * @private\n\t * @override\n\t */\n\tpublic _adjustLayout() {\n\t\tconst layout = this._getInsightsContainer()?._getLayout();\n\t\tconst isMobileDevice = this.getDeviceType() === DeviceType.Mobile;\n\n\t\tif (layout) {\n\t\t\tconst visibleTileCount = isMobileDevice\n\t\t\t\t? this.aInsightsApps?.length\n\t\t\t\t: this._calculateVisibleTileCount(this.aInsightsApps as ICustomVisualization[]);\n\t\t\tconst isElementExpanded = layout._getCurrentExpandedElementName() === this.getProperty(\"fullScreenName\");\n\t\t\tthis._controlModel.setProperty(\n\t\t\t\t\"/tiles\",\n\t\t\t\tisElementExpanded ? this.aInsightsApps : this.aInsightsApps?.slice(0, visibleTileCount)\n\t\t\t);\n\t\t\tthis._controlModel.setProperty(\"/isPhone\", isMobileDevice);\n\t\t\tthis._updateTilesActivity();\n\t\t\t//Show/Hide Full Screen Button if panel header is visible otherwise update visibility of container Full Screen Button\n\t\t\tconst showFullScreenButton = isElementExpanded || this.aInsightsApps.length > visibleTileCount;\n\t\t\tif (this._headerVisible) {\n\t\t\t\tif (!isMobileDevice) {\n\t\t\t\t\t(this.getAggregation(\"actionButtons\") as Button[])?.forEach((actionButton) => {\n\t\t\t\t\t\tif (actionButton.getId().includes(tilesActionButtons.ADD_TILES)) {\n\t\t\t\t\t\t\tthis._getInsightsContainer().toggleActionButton(actionButton, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis._getInsightsContainer()?.toggleFullScreenElements(this, showFullScreenButton);\n\t\t\t} else {\n\t\t\t\tconst fullScreenButton = getAssociatedFullScreenMenuItem(this);\n\t\t\t\tconst fullScreenText = fullScreenButton?.getTitle() ?? \"\";\n\t\t\t\tthis._getInsightsContainer()?.updateMenuItem(\n\t\t\t\t\tthis._controlMap.get(`${this.getId()}-${tilesContainerMenuItems.SHOW_MORE}`) as MenuItem,\n\t\t\t\t\tshowFullScreenButton,\n\t\t\t\t\tfullScreenText\n\t\t\t\t);\n\t\t\t\tthis._getInsightsContainer()?.updateActionButton(\n\t\t\t\t\tthis._controlMap.get(`${this.getId()}-${tilesContainerActionButtons.SHOW_MORE}`) as Button,\n\t\t\t\t\tshowFullScreenButton,\n\t\t\t\t\tfullScreenText\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Retrieves the InsightsContainer instance associated with this TilesPanel.\n\t *\n\t * @private\n\t * @returns {InsightsContainer} The InsightsContainer instance.\n\t */\n\tprivate _getInsightsContainer(): InsightsContainer {\n\t\tif (!this.insightsContainer) {\n\t\t\tthis.insightsContainer = this.getParent() as InsightsContainer;\n\t\t}\n\t\treturn this.insightsContainer;\n\t}\n\n\t/**\n\t * Retrieves the menu items for the container.\n\t *\n\t * @private\n\t * @returns {MenuItem[]} An array of MenuItem instances.\n\t */\n\tpublic getContainerMenuItems(): MenuItem[] {\n\t\tif (!this._containerMenuItems) {\n\t\t\tconst containerShowMore = createShowMoreMenuItem(this, tilesContainerMenuItems.SHOW_MORE, \"containerTilesShowMore\");\n\t\t\tthis._controlMap.set(`${this.getId()}-${tilesContainerMenuItems.SHOW_MORE}`, containerShowMore);\n\t\t\tthis._containerMenuItems = [containerShowMore];\n\t\t}\n\t\treturn this._containerMenuItems;\n\t}\n\n\t/**\n\t * Retrieves the action buttons for the container.\n\t *\n\t * @private\n\t * @returns {Button[]} An array of Button instances.\n\t */\n\tpublic getContainerActionButtons(): Button[] {\n\t\tif (!this._containerActionButtons) {\n\t\t\tthis._containerActionButtons = [];\n\n\t\t\tconst containerFullScreenActionButton = createShowMoreActionButton(\n\t\t\t\tthis,\n\t\t\t\ttilesContainerActionButtons.SHOW_MORE,\n\t\t\t\t\"containerTilesShowMore\"\n\t\t\t);\n\t\t\tif (containerFullScreenActionButton) {\n\t\t\t\tthis._controlMap.set(`${this.getId()}-${tilesContainerActionButtons.SHOW_MORE}`, containerFullScreenActionButton);\n\t\t\t\tthis._containerActionButtons.push(containerFullScreenActionButton);\n\t\t\t}\n\t\t}\n\t\treturn this._containerActionButtons;\n\t}\n\n\t/**\n\t * Toggles the visibility of the header actions.\n\t *\n\t * @param {boolean} bShow - Whether to show or hide the header actions.\n\t * @private\n\t */\n\tprivate _toggleHeaderActions(bShow: boolean) {\n\t\t(this.getAggregation(\"menuItems\") as MenuItem[])?.forEach((menuItem) => {\n\t\t\tthis._getInsightsContainer()?.toggleMenuListItem(menuItem, bShow);\n\t\t});\n\t\t(this.getAggregation(\"actionButtons\") as Button[])?.forEach((actionButton) =>\n\t\t\tthis._getInsightsContainer()?.toggleActionButton(actionButton, bShow)\n\t\t);\n\t}\n}\n"],"mappings":"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","ignoreList":[]}