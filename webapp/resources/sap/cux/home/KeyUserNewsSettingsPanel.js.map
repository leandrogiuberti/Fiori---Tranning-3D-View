{"version":3,"file":"KeyUserNewsSettingsPanel.js","names":["sap","ui","define","Button","Input","Label","MessageBox","MessageStrip","MessageToast","RadioButton","Toolbar","VBox","Library","EventBus","MessageType","SimpleForm","FileUploader","Container","__BaseSettingsPanel","___flexibility_Layoutflexibility","___library","___utils_Constants","__HttpHelper","_interopRequireDefault","obj","__esModule","default","_catch","body","recover","result","e","then","BaseSettingsPanel","CHANGE_TYPES","NewsType","DEFAULT_NEWS_URL","KEYUSER_SETTINGS_PANELS_KEYS","HttpHelper","Constants","NEWS_FEED_POST_API","KeyUserNewsSettingsPanel","extend","metadata","library","init","_init","BaseSettingsPanel.prototype.init.call","this","controlMap","Map","setProperty","NEWS","_i18nBundle","getText","addAggregation","getContent","attachPanelNavigated","loadSettings","_eventBus","getInstance","subscribe","channelId","eventId","data","showError","showMessageStrip","Warning","validChanges","getMessageStrip","setVisible","getCurrentKeyUserChange","_getCurrentKeyUserChange","keyUserChanges","getKeyUserChanges","existingChange","find","change","changeSpecificData","changeType","NEWS_FEED_URL","content","_getContent","wrapperVBoxId","getId","wrapperVBox","set","checkNewsType","_checkNewsType","type","_getPanel","getProperty","isValidChanges","_isValidChanges","newsVisible","_this","_temp5","fileUploader","getFileUploader","keyUserChangeContent","showCustom","customNewsVisibility","Custom","showDefault","defaultNewsVisibility","Default","_temp4","getNewsFeedUploadBtn","getEnabled","error","String","setValue","customNewsFeedFileName","_temp3","getValue","Error","_temp2","getVisible","newsUrl","get","_temp","getValidURL","Promise","resolve","setURL","reject","clearNewsPanelChanges","_clearNewsPanelChanges","newsPanel","newsUrlInput","url","rssNewsVisibility","NewsUrl","setEnabled","setSelected","clearKeyUserChanges","addMessageStrip","_addMessageStrip","keyUserNewsPanelToolbarId","keyUserNewsPanelToolbar","height","messageStripWrapper","width","messageStripId","messsageStrip","showIcon","visible","addItem","addContent","handleSelectCustomNewsFeed","_handleSelectCustomNewsFeed","oEvent","getParameter","newsPageContainer","getParent","layout","addKeyUserChanges","selectorControl","oldNewsFeedUrl","oldShowCustomNewsFeed","oldCustomNewsFeedKey","oldshowDefaultNewsFeed","oldShowRssNewsFeed","newsFeedURL","showCustomNewsFeed","customNewsFeedKey","showDefaultNewsFeed","showRssNewsFeed","publish","changes","removeUrlMesageStrip","disable","date","Date","addCustomNewsFeedRadioBtn","_addCustomNewsFeedRadioBtn","customNewsFeedRadioBtnId","customNewsFeedRadioBtn","text","selected","select","bind","addStyleClass","customRadioBtn","addDefaultNewsFeedRadioBtn","_addDefaultNewsFeedRadioBtn","defaultNewsFeedRadioBtnId","defaultNewsFeedRadioBtn","handleselectDefaultNewsFeed","defaultRadioBtn","addNewsPaneLabel","_addNewsPaneLabel","newsPanelLabelId","newsPanelLabel","handleSelectRssNewsFeed","_handleSelectRssNewsFeed","addNewsUrlRadioBtn","_addNewsUrlRadioBtn","newsUrlRadioBtnId","showRss","newsUrlRadioBtn","rssRadioBtn","_handleselectDefaultNewsFeed","onNewsUrlChange","_onNewsUrlChange","keyUserContent","validUrl","_showMessageStrip","bShow","textKey","setType","setText","_getValidURL","urlString","URL","href","_removeUrlMesageStrip","onUrlLiveChange","_onUrlLiveChange","sNewValue","_getMessageStrip","addNewsURLSimpleForm","_addNewsURLSimpleForm","newsFeedURLSimpleFormId","newsInputUrl","newsFeedURLSimpleForm","newsFeedURLInputId","newsFeedURLInput","value","InputType","Url","liveChange","enabled","inputUrlField","handleFileChange","_handleFileChange","getSource","setNewsFeedEnabled","_setNewsFeedEnabled","bEnabled","newsFeedUploadBtn","_getNewsFeedUploadBtn","customNewsUploadFileUploaderButtonId","handleFileUploadError","_handleFileUploadError","iMaxFileSize","getMaximumFileSize","handleFileDialogClose","_handleFileDialogClose","event","fileName","handleNewsFeedFileUpload","_handleNewsFeedFileUpload","_this2","errorMsg","all","getUploadedFile","getServiceAsync","response","fileData","userInfo","userId","payload","changeId","now","toString","attachment","documentType","Post","oResponse","message","includes","customKey","show","oErr","_getUploadedFile","file","oFileUpload","files","reader","FileReader","onload","fileContent","base64String","window","btoa","encodeURIComponent","replace","match","p1","fromCharCode","parseInt","readAsText","readAsDataURL","_getFileUploader","customNewsUploadFileUploader","addCustomNewsUploadSimpleForm","_addCustomNewsUploadSimpleForm","customNewsUploadSimpleFormId","customNewsUploadSimpleForm","customNewsUploadVBox","customNewsUploadFileUploaderControl","name","tooltip","fileType","maximumFileSize","fileSizeExceed","sameFilenameAllowed","afterDialogClose","customNewsUploadFileUploaderButton","press","_loadSettings","removeAllItems"],"sources":["KeyUserNewsSettingsPanel.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\n\nimport Button from \"sap/m/Button\";\nimport Input, { Input$LiveChangeEvent } from \"sap/m/Input\";\nimport { InputBase$ChangeEvent } from \"sap/m/InputBase\";\nimport Label from \"sap/m/Label\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport MessageStrip from \"sap/m/MessageStrip\";\nimport MessageToast from \"sap/m/MessageToast\";\nimport RadioButton, { RadioButton$SelectEvent } from \"sap/m/RadioButton\";\nimport Toolbar from \"sap/m/Toolbar\";\nimport VBox from \"sap/m/VBox\";\nimport Library from \"sap/m/library\";\nimport Event from \"sap/ui/base/Event\";\nimport Control from \"sap/ui/core/Control\";\nimport type { MetadataOptions } from \"sap/ui/core/Element\";\nimport EventBus from \"sap/ui/core/EventBus\";\nimport MessageType from \"sap/ui/core/message/MessageType\";\nimport SimpleForm from \"sap/ui/layout/form/SimpleForm\";\nimport FileUploader, { FileUploader$ChangeEvent, FileUploader$FileSizeExceedEvent } from \"sap/ui/unified/FileUploader\";\nimport Container from \"sap/ushell/Container\";\nimport UserInfo from \"sap/ushell/services/UserInfo\";\nimport BaseLayout from \"./BaseLayout\";\nimport BaseSettingsPanel from \"./BaseSettingsPanel\";\nimport NewsAndPagesContainer from \"./NewsAndPagesContainer\";\nimport NewsPanel, { FileFormat } from \"./NewsPanel\";\nimport { CHANGE_TYPES } from \"./flexibility/Layout.flexibility\";\nimport { INewsPersData } from \"./interface/KeyUserInterface\";\nimport { NewsType } from \"./library\";\nimport { DEFAULT_NEWS_URL, KEYUSER_SETTINGS_PANELS_KEYS } from \"./utils/Constants\";\nimport HttpHelper from \"./utils/HttpHelper\";\n\nconst Constants = {\n\tNEWS_FEED_POST_API: \"/sap/opu/odata4/ui2/insights_srv/srvd/ui2/\" + \"insights_repo_srv/0001/\" + \"NEWS_FEED\"\n};\n\ninterface ShowError {\n\tshowError: boolean;\n\tdate: Date;\n}\n\ninterface UploadedFilePayload {\n\tchangeId: string;\n\tattachment: string | PromiseLike<string>;\n\tdocumentType?: string; // Optional\n}\n\ninterface FileMetaData {\n\ttype: string;\n\tcontent: string | PromiseLike<string>;\n}\n\n/**\n *\n * Class for News Settings Panel for KeyUser Settings Dialog.\n *\n * @extends BaseSettingsPanel\n *\n * @author SAP SE\n * @version 0.0.1\n * @since 1.121\n * @private\n *\n * @alias sap.cux.home.KeyUserNewsSettingsPanel\n */\nexport default class KeyUserNewsSettingsPanel extends BaseSettingsPanel {\n\tstatic readonly metadata: MetadataOptions = {\n\t\tlibrary: \"sap.cux.home\"\n\t};\n\n\tprivate controlMap!: Map<string, Control | Element>;\n\tprivate _eventBus!: EventBus;\n\tprivate customNewsVisibility!: boolean;\n\tprivate defaultNewsVisibility!: boolean;\n\tprivate validChanges!: boolean;\n\tprivate rssNewsVisibility!: boolean;\n\n\t/**\n\t * Init lifecycle method\n\t *\n\t * @public\n\t * @override\n\t */\n\tpublic init(): void {\n\t\tsuper.init();\n\t\tthis.controlMap = new Map();\n\n\t\t//setup panel\n\t\tthis.setProperty(\"key\", KEYUSER_SETTINGS_PANELS_KEYS.NEWS);\n\t\tthis.setProperty(\"title\", this._i18nBundle.getText(\"editNewsFeed\"));\n\n\t\t// //setup layout content\n\t\tthis.addAggregation(\"content\", this.getContent());\n\n\t\t// fired every time on panel navigation\n\t\tthis.attachPanelNavigated(() => this.loadSettings());\n\n\t\tthis._eventBus = EventBus.getInstance();\n\t\tthis._eventBus.subscribe(\n\t\t\t\"KeyUserChanges\",\n\t\t\t\"newsFeedLoadFailed\",\n\t\t\t(channelId?: string, eventId?: string, data?: object) => {\n\t\t\t\t//errorstate is false when import is successful\n\t\t\t\tif ((data as unknown as ShowError)?.showError) {\n\t\t\t\t\tthis.showMessageStrip(true, MessageType.Warning, \"invalidNewsUrl\");\n\t\t\t\t\tthis.validChanges = false;\n\t\t\t\t} else {\n\t\t\t\t\tthis.getMessageStrip().setVisible(false);\n\t\t\t\t\tthis.validChanges = true;\n\t\t\t\t}\n\t\t\t},\n\t\t\tthis\n\t\t);\n\t}\n\n\tprivate getCurrentKeyUserChange(): INewsPersData {\n\t\tconst keyUserChanges = this.getKeyUserChanges();\n\t\tconst existingChange = keyUserChanges.find((change) => {\n\t\t\treturn change.changeSpecificData.changeType === CHANGE_TYPES.NEWS_FEED_URL;\n\t\t});\n\t\treturn existingChange?.changeSpecificData.content as INewsPersData;\n\t}\n\n\t/**\n\t * Returns the content for the KeyUser news Settings Panel.\n\t *\n\t * @private\n\t * @returns {VBox} The control containing the KeyUser news Settings Panel content.\n\t */\n\tprivate getContent(): VBox {\n\t\tconst wrapperVBoxId = `${this.getId()}-wrapperVBox`;\n\t\tconst wrapperVBox = new VBox(wrapperVBoxId);\n\t\tthis.controlMap.set(wrapperVBoxId, wrapperVBox);\n\n\t\treturn wrapperVBox;\n\t}\n\n\tpublic checkNewsType(type: NewsType): boolean {\n\t\tif (this._getPanel().getProperty(\"type\") === type) return true;\n\t\treturn false;\n\t}\n\n\tpublic async isValidChanges(newsVisible: boolean) {\n\t\tthis.validChanges = true;\n\t\tconst fileUploader = this.getFileUploader();\n\t\tconst keyUserChangeContent = this.getCurrentKeyUserChange();\n\t\tconst showCustom = this.customNewsVisibility ?? !!this.checkNewsType(NewsType.Custom);\n\t\tconst showDefault = this.defaultNewsVisibility ?? !!this.checkNewsType(NewsType.Default);\n\t\tif (this.getNewsFeedUploadBtn().getEnabled()) {\n\t\t\tif (showCustom) {\n\t\t\t\tMessageBox.error(String(this._i18nBundle.getText(\"newsFeedSaveUploadChanges\")));\n\t\t\t\tthis.validChanges = false;\n\t\t\t} else {\n\t\t\t\tif (fileUploader) {\n\t\t\t\t\tfileUploader.setValue(\n\t\t\t\t\t\tkeyUserChangeContent.customNewsFeedFileName || String(this._getPanel().getProperty(\"customFileName\"))\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (showCustom && fileUploader.getValue() === \"\" && newsVisible) {\n\t\t\tthis.showMessageStrip(true, MessageType.Error, \"noNewsFileError\");\n\t\t\tthis.validChanges = false;\n\t\t} else if (!showCustom && !showDefault && newsVisible && !this.getMessageStrip().getVisible()) {\n\t\t\tconst newsUrl = (this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input).getValue();\n\t\t\tif (!this.getValidURL(newsUrl)) {\n\t\t\t\tthis.showMessageStrip(true, MessageType.Error, \"invalidNewsUrl\");\n\t\t\t\tthis.validChanges = false;\n\t\t\t} else {\n\t\t\t\tawait (this._getPanel() as NewsPanel).setURL(String(newsUrl));\n\t\t\t}\n\t\t}\n\t\treturn this.validChanges;\n\t}\n\n\tpublic clearNewsPanelChanges() {\n\t\tconst newsPanel = this._getPanel();\n\t\tthis.getMessageStrip().setVisible(false);\n\t\tconst newsUrlInput = this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input;\n\t\tconst url = String(newsPanel.getProperty(\"url\"));\n\t\tnewsUrlInput.setValue(url !== DEFAULT_NEWS_URL ? url : \"\");\n\t\tthis.customNewsVisibility = this.checkNewsType(NewsType.Custom);\n\t\tthis.defaultNewsVisibility = this.checkNewsType(NewsType.Default);\n\t\tthis.rssNewsVisibility = this.checkNewsType(NewsType.NewsUrl);\n\n\t\t(this.controlMap.get(`${this.getId()}-customNewsUploadFileUploader`) as FileUploader).setEnabled(this.customNewsVisibility);\n\t\t(this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input).setEnabled(this.rssNewsVisibility);\n\t\t(this.controlMap.get(`${this.getId()}-customNewsFeedRadioBtn`) as RadioButton).setSelected(this.customNewsVisibility);\n\t\t(this.controlMap.get(`${this.getId()}-defaultNewsFeedRadioBtn`) as RadioButton).setSelected(this.defaultNewsVisibility);\n\t\t(this.controlMap.get(`${this.getId()}-newsUrlRadioBtn`) as RadioButton).setSelected(this.rssNewsVisibility);\n\t\tthis.getFileUploader().setValue(String(newsPanel.getProperty(\"customFileName\")));\n\t\tthis.clearKeyUserChanges();\n\t}\n\n\tprivate addMessageStrip(wrapperVBox: VBox): void {\n\t\tconst keyUserNewsPanelToolbarId = `${this.getId()}-keyUserNewsPanelToolbar`;\n\t\tif (!this.controlMap.get(keyUserNewsPanelToolbarId)) {\n\t\t\tconst keyUserNewsPanelToolbar = new Toolbar(keyUserNewsPanelToolbarId, { height: \"auto\" });\n\t\t\tconst messageStripWrapper = new VBox(`${this.getId()}-messageStripWrapper`, { width: \"100%\" });\n\t\t\tconst messageStripId = `${this.getId()}-messageStrip`;\n\t\t\tconst messsageStrip = new MessageStrip(messageStripId, {\n\t\t\t\tshowIcon: true,\n\t\t\t\tvisible: false\n\t\t\t});\n\t\t\tthis.controlMap.set(messageStripId, messsageStrip);\n\t\t\tmessageStripWrapper.addItem(messsageStrip);\n\t\t\tkeyUserNewsPanelToolbar.addContent(messageStripWrapper);\n\t\t\tthis.controlMap.set(keyUserNewsPanelToolbarId, keyUserNewsPanelToolbar);\n\t\t}\n\t\twrapperVBox.addItem(this.controlMap.get(keyUserNewsPanelToolbarId) as Toolbar);\n\t}\n\n\tprivate handleSelectCustomNewsFeed(oEvent: RadioButton$SelectEvent): void {\n\t\tthis.customNewsVisibility = oEvent.getParameter(\"selected\") as boolean;\n\n\t\t(this.controlMap.get(`${this.getId()}-customNewsUploadFileUploader`) as FileUploader).setEnabled(this.customNewsVisibility);\n\t\t(this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input).setEnabled(!this.customNewsVisibility);\n\n\t\tconst newsPanel = this._getPanel() as NewsPanel;\n\t\tconst newsPageContainer = newsPanel.getParent() as NewsAndPagesContainer;\n\t\tconst layout = newsPageContainer.getParent() as BaseLayout;\n\t\tconst keyUserChangeContent = this.getCurrentKeyUserChange();\n\t\tif (!keyUserChangeContent) {\n\t\t\tthis.addKeyUserChanges({\n\t\t\t\tselectorControl: layout,\n\t\t\t\tchangeSpecificData: {\n\t\t\t\t\tchangeType: CHANGE_TYPES.NEWS_FEED_URL,\n\t\t\t\t\tcontent: {\n\t\t\t\t\t\toldNewsFeedUrl: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\toldShowCustomNewsFeed: this.checkNewsType(NewsType.Custom),\n\t\t\t\t\t\toldCustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\toldshowDefaultNewsFeed: this.checkNewsType(NewsType.Default),\n\t\t\t\t\t\toldShowRssNewsFeed: this.checkNewsType(NewsType.NewsUrl),\n\n\t\t\t\t\t\tnewsFeedURL: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\tshowCustomNewsFeed: this.customNewsVisibility,\n\t\t\t\t\t\tcustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\tcustomNewsFeedFileName: String(this._getPanel().getProperty(\"customFileName\")),\n\t\t\t\t\t\tshowDefaultNewsFeed: false,\n\t\t\t\t\t\tshowRssNewsFeed: false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._eventBus.publish(\"KeyUserChanges\", \"addNewsPagesChanges\", { changes: this.getKeyUserChanges() });\n\t\t} else if (keyUserChangeContent.showCustomNewsFeed !== this.customNewsVisibility) {\n\t\t\tkeyUserChangeContent.showCustomNewsFeed = this.customNewsVisibility;\n\t\t}\n\t\tthis.removeUrlMesageStrip();\n\t\tthis._eventBus.publish(\"KeyUserChanges\", \"disabledSaveBtn\", { disable: false, date: new Date() });\n\t}\n\n\t/**\n\t * Add Radio Button for Custom News Feed.\n\t *\n\t * @private\n\t */\n\tprivate addCustomNewsFeedRadioBtn(wrapperVBox: VBox): void {\n\t\tconst customNewsFeedRadioBtnId = `${this.getId()}-customNewsFeedRadioBtn`;\n\t\tconst showCustom = this.checkNewsType(NewsType.Custom);\n\n\t\tif (!this.controlMap.get(customNewsFeedRadioBtnId)) {\n\t\t\tconst customNewsFeedRadioBtn = new RadioButton(`${this.getId()}-customNewsFeedRadioBtn`, {\n\t\t\t\ttext: this._i18nBundle.getText(\"selectCustomNewsFeed\"),\n\t\t\t\tselected: showCustom,\n\t\t\t\tselect: this.handleSelectCustomNewsFeed.bind(this)\n\t\t\t}).addStyleClass(\"sapUiTinyMargin\");\n\t\t\tthis.controlMap.set(customNewsFeedRadioBtnId, customNewsFeedRadioBtn);\n\t\t} else if (!this.getCurrentKeyUserChange()) {\n\t\t\tlet customRadioBtn = this.controlMap.get(`${this.getId()}-customNewsFeedRadioBtn`) as RadioButton;\n\t\t\tcustomRadioBtn.setSelected(showCustom);\n\t\t\t(this.controlMap.get(`${this.getId()}-customNewsUploadFileUploader`) as FileUploader).setEnabled(showCustom);\n\t\t}\n\t\twrapperVBox.addItem(this.controlMap.get(customNewsFeedRadioBtnId) as RadioButton);\n\t}\n\n\t/**\n\t * Add Radio Button for Manage News Feed.\n\t *\n\t * @private\n\t */\n\tprivate addDefaultNewsFeedRadioBtn(wrapperVBox: VBox): void {\n\t\tconst defaultNewsFeedRadioBtnId = `${this.getId()}-defaultNewsFeedRadioBtn`;\n\t\tconst showDefault = this.checkNewsType(NewsType.Default);\n\n\t\tif (!this.controlMap.get(defaultNewsFeedRadioBtnId)) {\n\t\t\tconst defaultNewsFeedRadioBtn = new RadioButton(`${this.getId()}-defaultNewsFeedRadioBtn`, {\n\t\t\t\ttext: this._i18nBundle.getText(\"selectDefaultNewsFeed\"),\n\t\t\t\tselected: showDefault,\n\t\t\t\tselect: this.handleselectDefaultNewsFeed.bind(this)\n\t\t\t}).addStyleClass(\"sapUiTinyMargin\");\n\t\t\tthis.controlMap.set(defaultNewsFeedRadioBtnId, defaultNewsFeedRadioBtn);\n\t\t} else if (!this.getCurrentKeyUserChange()) {\n\t\t\tlet defaultRadioBtn = this.controlMap.get(`${this.getId()}-defaultNewsFeedRadioBtn`) as RadioButton;\n\t\t\tdefaultRadioBtn.setSelected(showDefault);\n\t\t}\n\t\twrapperVBox.addItem(this.controlMap.get(defaultNewsFeedRadioBtnId) as RadioButton);\n\t}\n\n\tprivate addNewsPaneLabel(wrapperVBox: VBox): void {\n\t\tconst newsPanelLabelId = `${this.getId()}-newsPanelLabel`;\n\t\tif (!this.controlMap.get(newsPanelLabelId)) {\n\t\t\tconst newsPanelLabel = new Label(newsPanelLabelId, {\n\t\t\t\ttext: this._i18nBundle.getText(\"newsFeedOptionLabel\")\n\t\t\t}).addStyleClass(\"sapUiTinyMargin\");\n\t\t\tthis.controlMap.set(newsPanelLabelId, newsPanelLabel);\n\t\t}\n\t\twrapperVBox.addItem(this.controlMap.get(newsPanelLabelId) as Label);\n\t}\n\n\tprivate handleSelectRssNewsFeed(oEvent: RadioButton$SelectEvent): void {\n\t\tthis.rssNewsVisibility = oEvent.getParameter(\"selected\") as boolean;\n\t\t(this.controlMap.get(`${this.getId()}-customNewsUploadFileUploader`) as FileUploader).setEnabled(!this.rssNewsVisibility);\n\t\t(this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input).setEnabled(this.rssNewsVisibility);\n\n\t\tconst newsPanel = this._getPanel() as NewsPanel;\n\t\tconst newsPageContainer = newsPanel.getParent() as NewsAndPagesContainer;\n\t\tconst layout = newsPageContainer.getParent() as BaseLayout;\n\t\tconst keyUserChangeContent = this.getCurrentKeyUserChange();\n\t\tif (!keyUserChangeContent) {\n\t\t\tthis.addKeyUserChanges({\n\t\t\t\tselectorControl: layout,\n\t\t\t\tchangeSpecificData: {\n\t\t\t\t\tchangeType: CHANGE_TYPES.NEWS_FEED_URL,\n\t\t\t\t\tcontent: {\n\t\t\t\t\t\toldNewsFeedUrl: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\toldShowCustomNewsFeed: this.checkNewsType(NewsType.Custom),\n\t\t\t\t\t\toldCustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\toldshowDefaultNewsFeed: this.checkNewsType(NewsType.Default),\n\t\t\t\t\t\toldShowRssNewsFeed: this.checkNewsType(NewsType.NewsUrl),\n\t\t\t\t\t\tnewsFeedURL: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\tshowCustomNewsFeed: false,\n\t\t\t\t\t\tcustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\tcustomNewsFeedFileName: String(this._getPanel().getProperty(\"customFileName\")),\n\t\t\t\t\t\tshowDefaultNewsFeed: false,\n\t\t\t\t\t\tshowRssNewsFeed: this.rssNewsVisibility\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._eventBus.publish(\"KeyUserChanges\", \"addNewsPagesChanges\", { changes: this.getKeyUserChanges() });\n\t\t} else if (keyUserChangeContent.showRssNewsFeed !== this.rssNewsVisibility) {\n\t\t\tkeyUserChangeContent.showRssNewsFeed = this.rssNewsVisibility;\n\t\t}\n\t\tthis.removeUrlMesageStrip();\n\t\tthis._eventBus.publish(\"KeyUserChanges\", \"disabledSaveBtn\", { disable: false, date: new Date() });\n\t}\n\n\tprivate addNewsUrlRadioBtn(wrapperVBox: VBox): void {\n\t\tconst newsUrlRadioBtnId = `${this.getId()}-newsUrlRadioBtn`;\n\t\tconst showRss = this.checkNewsType(NewsType.NewsUrl);\n\t\tif (!this.controlMap.get(newsUrlRadioBtnId)) {\n\t\t\tconst newsUrlRadioBtn = new RadioButton(`${this.getId()}-newsUrlRadioBtn`, {\n\t\t\t\ttext: this._i18nBundle.getText(\"selectNewsFeedUrl\"),\n\t\t\t\tselected: showRss,\n\t\t\t\tselect: this.handleSelectRssNewsFeed.bind(this)\n\t\t\t}).addStyleClass(\"sapUiTinyMargin\");\n\t\t\tthis.controlMap.set(newsUrlRadioBtnId, newsUrlRadioBtn);\n\t\t} else if (!this.getCurrentKeyUserChange()) {\n\t\t\tlet rssRadioBtn = this.controlMap.get(`${this.getId()}-newsUrlRadioBtn`) as RadioButton;\n\t\t\trssRadioBtn.setSelected(showRss);\n\t\t\t(this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input).setEnabled(showRss);\n\t\t}\n\n\t\twrapperVBox.addItem(this.controlMap.get(newsUrlRadioBtnId) as RadioButton);\n\t}\n\n\t/**\n\t * Handle the selection of the Manage News Feed Radio Button.\n\t *\n\t * @private\n\t */\n\tprivate handleselectDefaultNewsFeed(oEvent: RadioButton$SelectEvent): void {\n\t\tthis.defaultNewsVisibility = oEvent.getParameter(\"selected\") as boolean;\n\n\t\t(this.controlMap.get(`${this.getId()}-customNewsUploadFileUploader`) as FileUploader).setEnabled(!this.defaultNewsVisibility);\n\t\t(this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input).setEnabled(!this.defaultNewsVisibility);\n\n\t\tconst newsPanel = this._getPanel() as NewsPanel;\n\t\tconst newsPageContainer = newsPanel.getParent() as NewsAndPagesContainer;\n\t\tconst layout = newsPageContainer.getParent() as BaseLayout;\n\t\tconst keyUserChangeContent = this.getCurrentKeyUserChange();\n\t\tconst newsUrlInput = this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input;\n\n\t\tif (!keyUserChangeContent) {\n\t\t\tthis.addKeyUserChanges({\n\t\t\t\tselectorControl: layout,\n\t\t\t\tchangeSpecificData: {\n\t\t\t\t\tchangeType: CHANGE_TYPES.NEWS_FEED_URL,\n\t\t\t\t\tcontent: {\n\t\t\t\t\t\toldNewsFeedUrl: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\toldShowCustomNewsFeed: this.checkNewsType(NewsType.Custom),\n\t\t\t\t\t\toldCustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\toldshowDefaultNewsFeed: this.checkNewsType(NewsType.Default),\n\t\t\t\t\t\toldShowRssNewsFeed: this.checkNewsType(NewsType.NewsUrl),\n\n\t\t\t\t\t\tnewsFeedURL: String(newsUrlInput.getValue()),\n\t\t\t\t\t\tshowCustomNewsFeed: false,\n\t\t\t\t\t\tcustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\tcustomNewsFeedFileName: String(this._getPanel().getProperty(\"customFileName\")),\n\t\t\t\t\t\tshowDefaultNewsFeed: this.defaultNewsVisibility,\n\t\t\t\t\t\tshowRssNewsFeed: false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._eventBus.publish(\"KeyUserChanges\", \"addNewsPagesChanges\", { changes: this.getKeyUserChanges() });\n\t\t} else if (keyUserChangeContent.showDefaultNewsFeed !== this.defaultNewsVisibility) {\n\t\t\tkeyUserChangeContent.showDefaultNewsFeed = this.defaultNewsVisibility;\n\t\t\tkeyUserChangeContent.showCustomNewsFeed = false;\n\t\t}\n\t\tthis.removeUrlMesageStrip();\n\t\tthis._eventBus.publish(\"KeyUserChanges\", \"disabledSaveBtn\", { disable: false, date: new Date() });\n\t}\n\tprivate onNewsUrlChange(oEvent: InputBase$ChangeEvent): void {\n\t\tconst newsPanel = this._getPanel() as NewsPanel;\n\t\tconst newsPageContainer = newsPanel.getParent() as NewsAndPagesContainer;\n\t\tconst layout = newsPageContainer.getParent() as BaseLayout;\n\t\tlet newsUrl = oEvent.getParameter(\"value\");\n\t\tconst keyUserContent = this.getCurrentKeyUserChange();\n\t\tconst validUrl = this.getValidURL(String(newsUrl));\n\t\tif (!validUrl) {\n\t\t\treturn;\n\t\t} else {\n\t\t\tnewsUrl = validUrl;\n\t\t}\n\t\tif (!keyUserContent) {\n\t\t\tthis.addKeyUserChanges({\n\t\t\t\tselectorControl: layout,\n\t\t\t\tchangeSpecificData: {\n\t\t\t\t\tchangeType: CHANGE_TYPES.NEWS_FEED_URL,\n\t\t\t\t\tcontent: {\n\t\t\t\t\t\toldNewsFeedUrl: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\toldShowCustomNewsFeed: this.checkNewsType(NewsType.Custom),\n\t\t\t\t\t\toldCustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\toldshowDefaultNewsFeed: this.checkNewsType(NewsType.Default),\n\t\t\t\t\t\toldShowRssNewsFeed: this.checkNewsType(NewsType.NewsUrl),\n\n\t\t\t\t\t\tnewsFeedURL: newsUrl,\n\t\t\t\t\t\tshowCustomNewsFeed: false,\n\t\t\t\t\t\tcustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\tcustomNewsFeedFileName: String(this._getPanel().getProperty(\"customFileName\")),\n\t\t\t\t\t\tshowDefaultNewsFeed: false,\n\t\t\t\t\t\tshowRssNewsFeed: this.rssNewsVisibility\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._eventBus.publish(\"KeyUserChanges\", \"addNewsPagesChanges\", { changes: this.getKeyUserChanges() });\n\t\t} else if (keyUserContent.newsFeedURL !== newsUrl) {\n\t\t\tkeyUserContent.newsFeedURL = newsUrl;\n\t\t\tkeyUserContent.showCustomNewsFeed = false;\n\t\t\tkeyUserContent.showDefaultNewsFeed = false;\n\t\t}\n\t}\n\n\tprivate showMessageStrip(bShow: boolean, type: MessageType, textKey: string): void {\n\t\tthis.getMessageStrip().setType(type);\n\t\tthis.getMessageStrip().setVisible(bShow);\n\t\tthis.getMessageStrip().setText(String(this._i18nBundle.getText(textKey)));\n\t\tif (type === MessageType.Error) {\n\t\t\tthis._eventBus.publish(\"KeyUserChanges\", \"disabledSaveBtn\", { disable: bShow, date: new Date() });\n\t\t}\n\t}\n\n\tprivate getValidURL(urlString: string): string {\n\t\ttry {\n\t\t\tconst url = new URL(urlString);\n\t\t\treturn url.href;\n\t\t} catch {\n\t\t\treturn \"\";\n\t\t}\n\t}\n\n\tpublic removeUrlMesageStrip() {\n\t\tthis._eventBus.publish(\"KeyUserChanges\", \"disabledSaveBtn\", { disable: false, date: new Date() });\n\t\tthis.getMessageStrip().setVisible(false);\n\t\tconst newsUrlInput = this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input;\n\t\tif (!this.getValidURL(newsUrlInput.getValue())) {\n\t\t\tnewsUrlInput.setValue(\"\");\n\t\t}\n\t}\n\n\tprivate onUrlLiveChange(oEvent: Input$LiveChangeEvent) {\n\t\tconst sNewValue = oEvent.getParameter(\"value\") || \"\";\n\t\tthis.showMessageStrip(!this.getValidURL(sNewValue), MessageType.Error, \"invalidNewsUrl\");\n\t}\n\n\tprivate getMessageStrip(): MessageStrip {\n\t\tconst messageStripId = `${this.getId()}-messageStrip`;\n\t\treturn this.controlMap.get(messageStripId) as MessageStrip;\n\t}\n\n\t/**\n\t * Add SimpleForm for News URL.\n\t *\n\t * @private\n\t */\n\tprivate addNewsURLSimpleForm(wrapperVBox: VBox): void {\n\t\tconst newsFeedURLSimpleFormId = `${this.getId()}-newsFeedURLSimpleForm`;\n\t\tconst showRss = this.checkNewsType(NewsType.NewsUrl);\n\n\t\tconst newsInputUrl = String(this._getPanel().getProperty(\"url\"));\n\t\tif (!this.controlMap.get(newsFeedURLSimpleFormId)) {\n\t\t\tconst newsFeedURLSimpleForm = new SimpleForm(`${this.getId()}-newsFeedURLSimpleForm`).addStyleClass(\n\t\t\t\t\"sapContrastPlus formCustomPadding\"\n\t\t\t);\n\t\t\tconst newsFeedURLInputId = `${this.getId()}-newsFeedURLInput`;\n\t\t\tconst newsFeedURLInput = new Input(newsFeedURLInputId, {\n\t\t\t\tvalue: newsInputUrl !== DEFAULT_NEWS_URL ? newsInputUrl : \"\",\n\t\t\t\ttype: Library.InputType.Url,\n\t\t\t\tchange: this.onNewsUrlChange.bind(this),\n\t\t\t\tliveChange: this.onUrlLiveChange.bind(this),\n\t\t\t\tenabled: showRss\n\t\t\t});\n\t\t\tthis.controlMap.set(newsFeedURLInputId, newsFeedURLInput);\n\t\t\tnewsFeedURLSimpleForm.addContent(newsFeedURLInput);\n\t\t\tthis.controlMap.set(newsFeedURLSimpleFormId, newsFeedURLSimpleForm);\n\t\t} else if (this.getCurrentKeyUserChange()) {\n\t\t\tlet inputUrlField = this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input;\n\t\t\tinputUrlField.setValue(newsInputUrl);\n\t\t}\n\t\twrapperVBox.addItem(this.controlMap.get(newsFeedURLSimpleFormId) as SimpleForm);\n\t}\n\n\tprivate handleFileChange(oEvent: FileUploader$ChangeEvent): void {\n\t\tconst fileUploader = oEvent.getSource();\n\t\tthis.getMessageStrip().setVisible(false);\n\t\tthis._eventBus.publish(\"KeyUserChanges\", \"disabledSaveBtn\", { disable: false, date: new Date() });\n\t\tthis.setNewsFeedEnabled(fileUploader.getValue() !== \"\");\n\t}\n\n\tprivate setNewsFeedEnabled(bEnabled: boolean): void {\n\t\tconst newsFeedUploadBtn = this.getNewsFeedUploadBtn();\n\t\tif (newsFeedUploadBtn) {\n\t\t\tnewsFeedUploadBtn.setEnabled(bEnabled);\n\t\t}\n\t}\n\n\tprivate getNewsFeedUploadBtn(): Button {\n\t\tconst customNewsUploadFileUploaderButtonId = `${this.getId()}-customNewsUploadFileUploaderButton`;\n\t\treturn this.controlMap.get(customNewsUploadFileUploaderButtonId) as Button;\n\t}\n\n\tprivate handleFileUploadError(oEvent: FileUploader$FileSizeExceedEvent): void {\n\t\tconst fileUploader = oEvent.getSource();\n\t\tconst iMaxFileSize = fileUploader.getMaximumFileSize();\n\t\tthis.setNewsFeedEnabled(false);\n\t\tMessageBox.error(String(this._i18nBundle.getText(\"newsFeedMaxFileSizeError\", [iMaxFileSize])));\n\t}\n\n\thandleFileDialogClose(event: Event): void {\n\t\tconst fileUploader = event.getSource<FileUploader>();\n\t\tlet fileName = fileUploader.getValue();\n\t\t// if file selection dialog is closed and no file is selected, set value as last uploaded file\n\n\t\tif (fileName === \"\") {\n\t\t\tfileName = this.getCurrentKeyUserChange()?.customNewsFeedFileName || String(this._getPanel().getProperty(\"customFileName\"));\n\t\t\tthis.setNewsFeedEnabled(false);\n\t\t}\n\t\tfileUploader.setValue(fileName);\n\t}\n\n\tprivate async handleNewsFeedFileUpload(): Promise<void> {\n\t\tlet errorMsg = this._i18nBundle.getText(\"newsFeedFileUploadError\");\n\t\ttry {\n\t\t\tconst response = await Promise.all([this.getUploadedFile(), Container.getServiceAsync<UserInfo>(\"UserInfo\")]);\n\t\t\tconst fileData = response[0];\n\t\t\tconst userInfo = response[1];\n\t\t\tconst userId = userInfo && userInfo.getId();\n\t\t\tconst payload: UploadedFilePayload = { changeId: userId + \"_\" + Date.now().toString(), attachment: fileData.content };\n\n\t\t\t//pass documentType if file is in csv format\n\t\t\t//if documentType is not passed by default document type is considered as excel.\n\t\t\tif (fileData.type) {\n\t\t\t\tpayload.documentType = fileData.type;\n\t\t\t}\n\t\t\tconst oResponse = await HttpHelper.Post(Constants.NEWS_FEED_POST_API, payload);\n\t\t\tconst keyUserChangeContent = this.getCurrentKeyUserChange();\n\t\t\tconst newsPanel = this._getPanel() as NewsPanel;\n\t\t\tconst newsPageContainer = newsPanel.getParent() as NewsAndPagesContainer;\n\t\t\tconst layout = newsPageContainer.getParent() as BaseLayout;\n\t\t\tif (oResponse && (oResponse as { error: { message: string } }).error) {\n\t\t\t\tthis.getFileUploader().setValue(\"\");\n\t\t\t\tif (keyUserChangeContent) {\n\t\t\t\t\tkeyUserChangeContent.customNewsFeedFileName = \"\";\n\t\t\t\t} else {\n\t\t\t\t\tthis.addKeyUserChanges({\n\t\t\t\t\t\tselectorControl: layout,\n\t\t\t\t\t\tchangeSpecificData: {\n\t\t\t\t\t\t\tchangeType: CHANGE_TYPES.NEWS_FEED_URL,\n\t\t\t\t\t\t\tcontent: {\n\t\t\t\t\t\t\t\toldNewsFeedUrl: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\t\t\toldShowCustomNewsFeed: this.checkNewsType(NewsType.Custom),\n\t\t\t\t\t\t\t\toldCustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\t\t\toldshowDefaultNewsFeed: this.checkNewsType(NewsType.Default),\n\t\t\t\t\t\t\t\toldShowRssNewsFeed: this.checkNewsType(NewsType.NewsUrl),\n\n\t\t\t\t\t\t\t\tnewsFeedURL: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\t\t\tshowCustomNewsFeed: true,\n\t\t\t\t\t\t\t\tcustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\t\t\tcustomNewsFeedFileName: String(this._getPanel().getProperty(\"customFileName\")),\n\t\t\t\t\t\t\t\tshowDefaultNewsFeed: false,\n\t\t\t\t\t\t\t\tshowRssNewsFeed: false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\terrorMsg = (oResponse as { error: { message: string } }).error.message.includes(\"NODATA\")\n\t\t\t\t\t? this._i18nBundle.getText(\"newsFeedEmptyFileError\")\n\t\t\t\t\t: errorMsg;\n\t\t\t\tthrow new Error(errorMsg);\n\t\t\t}\n\t\t\tconst customKey = (oResponse as { changeId: string }).changeId;\n\t\t\tif (keyUserChangeContent) {\n\t\t\t\tkeyUserChangeContent.customNewsFeedKey = customKey;\n\t\t\t\tkeyUserChangeContent.customNewsFeedFileName = this.getFileUploader().getValue();\n\t\t\t} else {\n\t\t\t\tthis.addKeyUserChanges({\n\t\t\t\t\tselectorControl: layout,\n\t\t\t\t\tchangeSpecificData: {\n\t\t\t\t\t\tchangeType: CHANGE_TYPES.NEWS_FEED_URL,\n\t\t\t\t\t\tcontent: {\n\t\t\t\t\t\t\toldNewsFeedUrl: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\t\toldShowCustomNewsFeed: this.checkNewsType(NewsType.Custom),\n\t\t\t\t\t\t\toldCustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\t\toldshowDefaultNewsFeed: this.checkNewsType(NewsType.Default),\n\t\t\t\t\t\t\toldShowRssNewsFeed: this.checkNewsType(NewsType.NewsUrl),\n\t\t\t\t\t\t\tnewsFeedURL: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\t\tshowCustomNewsFeed: true,\n\t\t\t\t\t\t\tcustomNewsFeedKey: customKey,\n\t\t\t\t\t\t\tcustomNewsFeedFileName: this.getFileUploader().getValue(),\n\t\t\t\t\t\t\tshowDefaultNewsFeed: false,\n\t\t\t\t\t\t\tshowRssNewsFeed: false\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis._eventBus.publish(\"KeyUserChanges\", \"addNewsPagesChanges\", { changes: this.getKeyUserChanges() });\n\t\t\t}\n\t\t\tMessageToast.show(String(this._i18nBundle.getText(\"customNewsFeedUploaded\")));\n\t\t\tthis.setNewsFeedEnabled(false);\n\t\t} catch (oErr) {\n\t\t\tMessageBox.error((oErr as { message: string }).message);\n\t\t\tthis.setNewsFeedEnabled(false);\n\t\t}\n\t}\n\n\tprivate getUploadedFile(): Promise<FileMetaData> {\n\t\treturn new Promise<FileMetaData>((resolve, reject) => {\n\t\t\tconst fileUploader = this.getFileUploader();\n\t\t\tlet errorMsg = this._i18nBundle.getText(\"newsFeedFileUploadError\");\n\t\t\tif (fileUploader && !fileUploader.getValue()) {\n\t\t\t\terrorMsg = this._i18nBundle.getText(\"noNewsFileError\");\n\t\t\t\treject(new Error(errorMsg));\n\t\t\t}\n\n\t\t\tconst file = fileUploader.oFileUpload.files[0];\n\t\t\tconst reader = new FileReader();\n\n\t\t\treader.onload = function () {\n\t\t\t\ttry {\n\t\t\t\t\tconst fileContent = reader.result as string;\n\t\t\t\t\tlet base64String;\n\t\t\t\t\tconst fileData: FileMetaData = { type: \"\", content: \"\" };\n\t\t\t\t\tif (file.type === \"text/csv\") {\n\t\t\t\t\t\tbase64String = window.btoa(\n\t\t\t\t\t\t\tencodeURIComponent(String(fileContent)).replace(/%([0-9A-F]{2})/g, function (match, p1: string) {\n\t\t\t\t\t\t\t\treturn String.fromCharCode(parseInt(p1, 16));\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t\tfileData.type = \"CSV\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbase64String = fileContent.replace(\"data:\", \"\").replace(/^.+,/, \"\");\n\t\t\t\t\t}\n\t\t\t\t\tfileData.content = base64String;\n\t\t\t\t\tresolve(fileData);\n\t\t\t\t} catch {\n\t\t\t\t\treject(new Error(errorMsg));\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (file.type === \"text/csv\") {\n\t\t\t\treader.readAsText(file);\n\t\t\t} else {\n\t\t\t\treader.readAsDataURL(file);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate getFileUploader(): FileUploader {\n\t\tconst customNewsUploadFileUploader = `${this.getId()}-customNewsUploadFileUploader`;\n\t\treturn this.controlMap.get(customNewsUploadFileUploader) as FileUploader;\n\t}\n\n\t/**\n\t * Add SimpleForm for Custom News Upload Form.\n\t *\n\t * @private\n\t */\n\tprivate addCustomNewsUploadSimpleForm(wrapperVBox: VBox): void {\n\t\tconst customNewsUploadSimpleFormId = `${this.getId()}-customNewsUploadSimpleForm`;\n\t\tif (!this.controlMap.get(customNewsUploadSimpleFormId)) {\n\t\t\tconst customNewsUploadSimpleForm = new SimpleForm(`${this.getId()}-customNewsUploadSimpleForm`).addStyleClass(\n\t\t\t\t\"sapContrastPlus formCustomPadding\"\n\t\t\t);\n\t\t\tconst customNewsUploadVBox = new VBox(`${this.getId()}-customNewsUploadVBox`);\n\t\t\tconst customNewsUploadFileUploader = `${this.getId()}-customNewsUploadFileUploader`;\n\t\t\tconst newsPanel = this._getPanel() as NewsPanel;\n\t\t\tconst customNewsUploadFileUploaderControl = new FileUploader(customNewsUploadFileUploader, {\n\t\t\t\tname: \"newsFeedFileUploader\",\n\t\t\t\ttooltip: this._i18nBundle.getText(\"uploadNewsFeedFile\"),\n\t\t\t\tfileType: newsPanel?.getProperty(\"supportedFileFormats\") as FileFormat[],\n\t\t\t\twidth: \"100%\",\n\t\t\t\tchange: this.handleFileChange.bind(this),\n\t\t\t\tmaximumFileSize: 25,\n\t\t\t\tfileSizeExceed: this.handleFileUploadError.bind(this),\n\t\t\t\tsameFilenameAllowed: true,\n\t\t\t\tafterDialogClose: this.handleFileDialogClose.bind(this),\n\t\t\t\tvalue: String(this._getPanel().getProperty(\"customFileName\")),\n\t\t\t\tenabled: this.checkNewsType(NewsType.Custom)\n\t\t\t});\n\t\t\tthis.controlMap.set(customNewsUploadFileUploader, customNewsUploadFileUploaderControl);\n\t\t\tconst customNewsUploadFileUploaderButtonId = `${this.getId()}-customNewsUploadFileUploaderButton`;\n\t\t\tconst customNewsUploadFileUploaderButton = new Button(customNewsUploadFileUploaderButtonId, {\n\t\t\t\ttext: this._i18nBundle.getText(\"uploadNewsFeedBtn\"),\n\t\t\t\tpress: this.handleNewsFeedFileUpload.bind(this),\n\t\t\t\ttype: \"Emphasized\",\n\t\t\t\tenabled: false\n\t\t\t});\n\t\t\tthis.controlMap.set(customNewsUploadFileUploaderButtonId, customNewsUploadFileUploaderButton);\n\t\t\tcustomNewsUploadVBox.addItem(customNewsUploadFileUploaderControl);\n\t\t\tcustomNewsUploadVBox.addItem(customNewsUploadFileUploaderButton);\n\t\t\tcustomNewsUploadSimpleForm.addContent(customNewsUploadVBox);\n\t\t\tthis.controlMap.set(customNewsUploadSimpleFormId, customNewsUploadSimpleForm);\n\t\t}\n\t\twrapperVBox.addItem(this.controlMap.get(customNewsUploadSimpleFormId) as SimpleForm);\n\t}\n\n\t/**\n\t * Load settings for the panel.\n\t *\n\t * @private\n\t */\n\tprivate loadSettings(): void {\n\t\tconst wrapperVBoxId = `${this.getId()}-wrapperVBox`;\n\t\tconst wrapperVBox = this.controlMap.get(wrapperVBoxId) as VBox;\n\t\twrapperVBox.removeAllItems();\n\t\tthis.addMessageStrip(wrapperVBox);\n\t\tthis.addNewsPaneLabel(wrapperVBox);\n\t\tthis.addDefaultNewsFeedRadioBtn(wrapperVBox);\n\t\tthis.addNewsUrlRadioBtn(wrapperVBox);\n\t\tthis.addNewsURLSimpleForm(wrapperVBox);\n\t\tthis.addCustomNewsFeedRadioBtn(wrapperVBox);\n\t\tthis.addCustomNewsUploadSimpleForm(wrapperVBox);\n\t}\n}\n"],"mappings":";;;;AAAAA,IAAAC,GAAAC,OAAA,gbAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAAA,sBAAAC,EAAAC,GAAA,OAAAA,KAAAC,mBAAAD,EAAAE,UAAA,YAAAF,EAAAE,QAAAF,CAAA,CAkjBO,SAAAG,EAAgBC,EAAMC,GAC5B,IACC,IAAIC,EAASF,GACd,CAAE,MAAMG,GACP,OAAOF,EAAQE,EAChB,CACA,GAAID,GAAUA,EAAOE,KAAM,CAC1B,OAAOF,EAAOE,UAAU,EAAGH,EAC5B,CACA,OAAOC,CACR,CAAC,MAliBMG,EAAiBV,EAAAL,GAAA,MAGfgB,EAAYf,EAAA,sBAEZgB,EAAQf,EAAA,kBACRgB,EAAgBf,EAAA,0BAAEgB,EAA4BhB,EAAA,sCAChDiB,EAAUf,EAAAD,GAEjB,MAAMiB,EAAY,CACjBC,mBAAoB,6CAA+C,0BAA4B,aAmBhG,MAaqBC,EAAiCR,EAAiBS,OAAA,yCACtDC,SAA4B,CAC3CC,QAAS,gBAgBHC,KAAI,SAAAC,IACVC,sBAAAC,MACAA,KAAKC,WAAa,IAAIC,IAGtBF,KAAKG,YAAY,MAAOd,EAA6Be,MACrDJ,KAAKG,YAAY,QAASH,KAAKK,YAAYC,QAAQ,iBAGnDN,KAAKO,eAAe,UAAWP,KAAKQ,cAGpCR,KAAKS,qBAAqB,IAAMT,KAAKU,gBAErCV,KAAKW,UAAY9C,EAAS+C,cAC1BZ,KAAKW,UAAUE,UACd,iBACA,qBACA,CAACC,EAAoBC,EAAkBC,KAEtC,GAAKA,GAA+BC,UAAW,CAC9CjB,KAAKkB,iBAAiB,KAAMpD,EAAYqD,QAAS,kBACjDnB,KAAKoB,aAAe,KACrB,KAAO,CACNpB,KAAKqB,kBAAkBC,WAAW,OAClCtB,KAAKoB,aAAe,IACrB,GAEDpB,KAEF,EAEQuB,wBAAuB,SAAAC,IAC9B,MAAMC,EAAiBzB,KAAK0B,oBAC5B,MAAMC,EAAiBF,EAAeG,KAAMC,GACpCA,EAAOC,mBAAmBC,aAAe7C,EAAa8C,eAE9D,OAAOL,GAAgBG,mBAAmBG,OAC3C,EAQQzB,WAAU,SAAA0B,IACjB,MAAMC,EAAgB,GAAGnC,KAAKoC,sBAC9B,MAAMC,EAAc,IAAI1E,EAAKwE,GAC7BnC,KAAKC,WAAWqC,IAAIH,EAAeE,GAEnC,OAAOA,CACR,EAEOE,cAAa,SAAAC,EAACC,GACpB,GAAIzC,KAAK0C,YAAYC,YAAY,UAAYF,EAAM,OAAO,KAC1D,OAAO,KACR,EAEaG,eAAc,SAAAC,EAACC,GAAoB,IAAE,MAAAC,EACjD/C,KAAI,SAAAgD,IA4BJ,OAAOD,EAAK3B,YAAa,CA5BzB2B,EAAK3B,aAAe,KACpB,MAAM6B,EAAeF,EAAKG,kBAC1B,MAAMC,EAAuBJ,EAAKxB,0BAClC,MAAM6B,EAAaL,EAAKM,wBAA0BN,EAAKR,cAAcpD,EAASmE,QAC9E,MAAMC,EAAcR,EAAKS,yBAA2BT,EAAKR,cAAcpD,EAASsE,SAAS,MAAAC,EAAA,cACrFX,EAAKY,uBAAuBC,aAAY,IACvCR,EAAU,CACb9F,EAAWuG,MAAMC,OAAOf,EAAK1C,YAAYC,QAAQ,+BACjDyC,EAAK3B,aAAe,KAAM,SAEtB6B,EAAY,CACfA,EAAac,SACZZ,EAAqBa,wBAA0BF,OAAOf,EAAKL,YAAYC,YAAY,mBAClF,cAAAsB,EAAA,cAGMb,GAAcH,EAAaiB,aAAe,IAAMpB,EAAW,CACrEC,EAAK7B,iBAAiB,KAAMpD,EAAYqG,MAAO,mBAC/CpB,EAAK3B,aAAe,KAAM,YAAAgD,EAAA,eACfhB,IAAeG,GAAeT,IAAgBC,EAAK1B,kBAAkBgD,aAAY,CAC5F,MAAMC,EAAWvB,EAAK9C,WAAWsE,IAAI,GAAGxB,EAAKX,4BAAsC8B,WAAW,MAAAM,EAAA,eACzFzB,EAAK0B,YAAYH,GAAQ,CAC7BvB,EAAK7B,iBAAiB,KAAMpD,EAAYqG,MAAO,kBAC/CpB,EAAK3B,aAAe,KAAM,aAAAsD,QAAAC,QAEnB5B,EAAKL,YAA0BkC,OAAOd,OAAOQ,KAAStF,KAAA,eALgC,GAKhC,GAAAwF,KAAAxF,KAAA,OAAAwF,EAAAxF,KAAA,eAPpC,GAOoC,GAAAoF,KAAApF,KAAA,OAAAoF,EAAApF,KAAA,eAZ1D,GAY0D,GAAAiF,KAAAjF,KAAA,OAAAiF,EAAAjF,KAAA,eArB0B,GAqB1B,OAAA0F,QAAAC,QAAAjB,KAAA1E,KAAA0E,EAAA1E,KAAAgE,KAAAU,GAIhE,CAAC,MAAA3E,GAAA,OAAA2F,QAAAG,OAAA9F,EAAA,GAEM+F,sBAAqB,SAAAC,IAC3B,MAAMC,EAAYhF,KAAK0C,YACvB1C,KAAKqB,kBAAkBC,WAAW,OAClC,MAAM2D,EAAejF,KAAKC,WAAWsE,IAAI,GAAGvE,KAAKoC,4BACjD,MAAM8C,EAAMpB,OAAOkB,EAAUrC,YAAY,QACzCsC,EAAalB,SAASmB,IAAQ9F,EAAmB8F,EAAM,IACvDlF,KAAKqD,qBAAuBrD,KAAKuC,cAAcpD,EAASmE,QACxDtD,KAAKwD,sBAAwBxD,KAAKuC,cAAcpD,EAASsE,SACzDzD,KAAKmF,kBAAoBnF,KAAKuC,cAAcpD,EAASiG,SAEpDpF,KAAKC,WAAWsE,IAAI,GAAGvE,KAAKoC,wCAAyDiD,WAAWrF,KAAKqD,sBACrGrD,KAAKC,WAAWsE,IAAI,GAAGvE,KAAKoC,4BAAsCiD,WAAWrF,KAAKmF,mBAClFnF,KAAKC,WAAWsE,IAAI,GAAGvE,KAAKoC,kCAAkDkD,YAAYtF,KAAKqD,sBAC/FrD,KAAKC,WAAWsE,IAAI,GAAGvE,KAAKoC,mCAAmDkD,YAAYtF,KAAKwD,uBAChGxD,KAAKC,WAAWsE,IAAI,GAAGvE,KAAKoC,2BAA2CkD,YAAYtF,KAAKmF,mBACzFnF,KAAKkD,kBAAkBa,SAASD,OAAOkB,EAAUrC,YAAY,oBAC7D3C,KAAKuF,qBACN,EAEQC,gBAAe,SAAAC,EAACpD,GACvB,MAAMqD,EAA4B,GAAG1F,KAAKoC,kCAC1C,IAAKpC,KAAKC,WAAWsE,IAAImB,GAA4B,CACpD,MAAMC,EAA0B,IAAIjI,EAAQgI,EAA2B,CAAEE,OAAQ,SACjF,MAAMC,EAAsB,IAAIlI,EAAK,GAAGqC,KAAKoC,8BAA+B,CAAE0D,MAAO,SACrF,MAAMC,EAAiB,GAAG/F,KAAKoC,uBAC/B,MAAM4D,EAAgB,IAAIzI,EAAawI,EAAgB,CACtDE,SAAU,KACVC,QAAS,QAEVlG,KAAKC,WAAWqC,IAAIyD,EAAgBC,GACpCH,EAAoBM,QAAQH,GAC5BL,EAAwBS,WAAWP,GACnC7F,KAAKC,WAAWqC,IAAIoD,EAA2BC,EAChD,CACAtD,EAAY8D,QAAQnG,KAAKC,WAAWsE,IAAImB,GACzC,EAEQW,2BAA0B,SAAAC,EAACC,GAClCvG,KAAKqD,qBAAuBkD,EAAOC,aAAa,YAE/CxG,KAAKC,WAAWsE,IAAI,GAAGvE,KAAKoC,wCAAyDiD,WAAWrF,KAAKqD,sBACrGrD,KAAKC,WAAWsE,IAAI,GAAGvE,KAAKoC,4BAAsCiD,YAAYrF,KAAKqD,sBAEpF,MAAM2B,EAAYhF,KAAK0C,YACvB,MAAM+D,EAAoBzB,EAAU0B,YACpC,MAAMC,EAASF,EAAkBC,YACjC,MAAMvD,EAAuBnD,KAAKuB,0BAClC,IAAK4B,EAAsB,CAC1BnD,KAAK4G,kBAAkB,CACtBC,gBAAiBF,EACjB7E,mBAAoB,CACnBC,WAAY7C,EAAa8C,cACzBC,QAAS,CACR6E,eAAgBhD,OAAO9D,KAAK0C,YAAYC,YAAY,QACpDoE,sBAAuB/G,KAAKuC,cAAcpD,EAASmE,QACnD0D,qBAAsBlD,OAAO9D,KAAK0C,YAAYC,YAAY,kBAC1DsE,uBAAwBjH,KAAKuC,cAAcpD,EAASsE,SACpDyD,mBAAoBlH,KAAKuC,cAAcpD,EAASiG,SAEhD+B,YAAarD,OAAO9D,KAAK0C,YAAYC,YAAY,QACjDyE,mBAAoBpH,KAAKqD,qBACzBgE,kBAAmBvD,OAAO9D,KAAK0C,YAAYC,YAAY,kBACvDqB,uBAAwBF,OAAO9D,KAAK0C,YAAYC,YAAY,mBAC5D2E,oBAAqB,MACrBC,gBAAiB,UAIpBvH,KAAKW,UAAU6G,QAAQ,iBAAkB,sBAAuB,CAAEC,QAASzH,KAAK0B,qBACjF,MAAO,GAAIyB,EAAqBiE,qBAAuBpH,KAAKqD,qBAAsB,CACjFF,EAAqBiE,mBAAqBpH,KAAKqD,oBAChD,CACArD,KAAK0H,uBACL1H,KAAKW,UAAU6G,QAAQ,iBAAkB,kBAAmB,CAAEG,QAAS,MAAOC,KAAM,IAAIC,MACzF,EAOQC,0BAAyB,SAAAC,EAAC1F,GACjC,MAAM2F,EAA2B,GAAGhI,KAAKoC,iCACzC,MAAMgB,EAAapD,KAAKuC,cAAcpD,EAASmE,QAE/C,IAAKtD,KAAKC,WAAWsE,IAAIyD,GAA2B,CACnD,MAAMC,EAAyB,IAAIxK,EAAY,GAAGuC,KAAKoC,iCAAkC,CACxF8F,KAAMlI,KAAKK,YAAYC,QAAQ,wBAC/B6H,SAAU/E,EACVgF,OAAQpI,KAAKqG,2BAA2BgC,KAAKrI,QAC3CsI,cAAc,mBACjBtI,KAAKC,WAAWqC,IAAI0F,EAA0BC,EAC/C,MAAO,IAAKjI,KAAKuB,0BAA2B,CAC3C,IAAIgH,EAAiBvI,KAAKC,WAAWsE,IAAI,GAAGvE,KAAKoC,kCACjDmG,EAAejD,YAAYlC,GAC1BpD,KAAKC,WAAWsE,IAAI,GAAGvE,KAAKoC,wCAAyDiD,WAAWjC,EAClG,CACAf,EAAY8D,QAAQnG,KAAKC,WAAWsE,IAAIyD,GACzC,EAOQQ,2BAA0B,SAAAC,EAACpG,GAClC,MAAMqG,EAA4B,GAAG1I,KAAKoC,kCAC1C,MAAMmB,EAAcvD,KAAKuC,cAAcpD,EAASsE,SAEhD,IAAKzD,KAAKC,WAAWsE,IAAImE,GAA4B,CACpD,MAAMC,EAA0B,IAAIlL,EAAY,GAAGuC,KAAKoC,kCAAmC,CAC1F8F,KAAMlI,KAAKK,YAAYC,QAAQ,yBAC/B6H,SAAU5E,EACV6E,OAAQpI,KAAK4I,4BAA4BP,KAAKrI,QAC5CsI,cAAc,mBACjBtI,KAAKC,WAAWqC,IAAIoG,EAA2BC,EAChD,MAAO,IAAK3I,KAAKuB,0BAA2B,CAC3C,IAAIsH,EAAkB7I,KAAKC,WAAWsE,IAAI,GAAGvE,KAAKoC,mCAClDyG,EAAgBvD,YAAY/B,EAC7B,CACAlB,EAAY8D,QAAQnG,KAAKC,WAAWsE,IAAImE,GACzC,EAEQI,iBAAgB,SAAAC,EAAC1G,GACxB,MAAM2G,EAAmB,GAAGhJ,KAAKoC,yBACjC,IAAKpC,KAAKC,WAAWsE,IAAIyE,GAAmB,CAC3C,MAAMC,EAAiB,IAAI5L,EAAM2L,EAAkB,CAClDd,KAAMlI,KAAKK,YAAYC,QAAQ,yBAC7BgI,cAAc,mBACjBtI,KAAKC,WAAWqC,IAAI0G,EAAkBC,EACvC,CACA5G,EAAY8D,QAAQnG,KAAKC,WAAWsE,IAAIyE,GACzC,EAEQE,wBAAuB,SAAAC,EAAC5C,GAC/BvG,KAAKmF,kBAAoBoB,EAAOC,aAAa,YAC5CxG,KAAKC,WAAWsE,IAAI,GAAGvE,KAAKoC,wCAAyDiD,YAAYrF,KAAKmF,mBACtGnF,KAAKC,WAAWsE,IAAI,GAAGvE,KAAKoC,4BAAsCiD,WAAWrF,KAAKmF,mBAEnF,MAAMH,EAAYhF,KAAK0C,YACvB,MAAM+D,EAAoBzB,EAAU0B,YACpC,MAAMC,EAASF,EAAkBC,YACjC,MAAMvD,EAAuBnD,KAAKuB,0BAClC,IAAK4B,EAAsB,CAC1BnD,KAAK4G,kBAAkB,CACtBC,gBAAiBF,EACjB7E,mBAAoB,CACnBC,WAAY7C,EAAa8C,cACzBC,QAAS,CACR6E,eAAgBhD,OAAO9D,KAAK0C,YAAYC,YAAY,QACpDoE,sBAAuB/G,KAAKuC,cAAcpD,EAASmE,QACnD0D,qBAAsBlD,OAAO9D,KAAK0C,YAAYC,YAAY,kBAC1DsE,uBAAwBjH,KAAKuC,cAAcpD,EAASsE,SACpDyD,mBAAoBlH,KAAKuC,cAAcpD,EAASiG,SAChD+B,YAAarD,OAAO9D,KAAK0C,YAAYC,YAAY,QACjDyE,mBAAoB,MACpBC,kBAAmBvD,OAAO9D,KAAK0C,YAAYC,YAAY,kBACvDqB,uBAAwBF,OAAO9D,KAAK0C,YAAYC,YAAY,mBAC5D2E,oBAAqB,MACrBC,gBAAiBvH,KAAKmF,sBAIzBnF,KAAKW,UAAU6G,QAAQ,iBAAkB,sBAAuB,CAAEC,QAASzH,KAAK0B,qBACjF,MAAO,GAAIyB,EAAqBoE,kBAAoBvH,KAAKmF,kBAAmB,CAC3EhC,EAAqBoE,gBAAkBvH,KAAKmF,iBAC7C,CACAnF,KAAK0H,uBACL1H,KAAKW,UAAU6G,QAAQ,iBAAkB,kBAAmB,CAAEG,QAAS,MAAOC,KAAM,IAAIC,MACzF,EAEQuB,mBAAkB,SAAAC,EAAChH,GAC1B,MAAMiH,EAAoB,GAAGtJ,KAAKoC,0BAClC,MAAMmH,EAAUvJ,KAAKuC,cAAcpD,EAASiG,SAC5C,IAAKpF,KAAKC,WAAWsE,IAAI+E,GAAoB,CAC5C,MAAME,EAAkB,IAAI/L,EAAY,GAAGuC,KAAKoC,0BAA2B,CAC1E8F,KAAMlI,KAAKK,YAAYC,QAAQ,qBAC/B6H,SAAUoB,EACVnB,OAAQpI,KAAKkJ,wBAAwBb,KAAKrI,QACxCsI,cAAc,mBACjBtI,KAAKC,WAAWqC,IAAIgH,EAAmBE,EACxC,MAAO,IAAKxJ,KAAKuB,0BAA2B,CAC3C,IAAIkI,EAAczJ,KAAKC,WAAWsE,IAAI,GAAGvE,KAAKoC,2BAC9CqH,EAAYnE,YAAYiE,GACvBvJ,KAAKC,WAAWsE,IAAI,GAAGvE,KAAKoC,4BAAsCiD,WAAWkE,EAC/E,CAEAlH,EAAY8D,QAAQnG,KAAKC,WAAWsE,IAAI+E,GACzC,EAOQV,4BAA2B,SAAAc,EAACnD,GACnCvG,KAAKwD,sBAAwB+C,EAAOC,aAAa,YAEhDxG,KAAKC,WAAWsE,IAAI,GAAGvE,KAAKoC,wCAAyDiD,YAAYrF,KAAKwD,uBACtGxD,KAAKC,WAAWsE,IAAI,GAAGvE,KAAKoC,4BAAsCiD,YAAYrF,KAAKwD,uBAEpF,MAAMwB,EAAYhF,KAAK0C,YACvB,MAAM+D,EAAoBzB,EAAU0B,YACpC,MAAMC,EAASF,EAAkBC,YACjC,MAAMvD,EAAuBnD,KAAKuB,0BAClC,MAAM0D,EAAejF,KAAKC,WAAWsE,IAAI,GAAGvE,KAAKoC,4BAEjD,IAAKe,EAAsB,CAC1BnD,KAAK4G,kBAAkB,CACtBC,gBAAiBF,EACjB7E,mBAAoB,CACnBC,WAAY7C,EAAa8C,cACzBC,QAAS,CACR6E,eAAgBhD,OAAO9D,KAAK0C,YAAYC,YAAY,QACpDoE,sBAAuB/G,KAAKuC,cAAcpD,EAASmE,QACnD0D,qBAAsBlD,OAAO9D,KAAK0C,YAAYC,YAAY,kBAC1DsE,uBAAwBjH,KAAKuC,cAAcpD,EAASsE,SACpDyD,mBAAoBlH,KAAKuC,cAAcpD,EAASiG,SAEhD+B,YAAarD,OAAOmB,EAAaf,YACjCkD,mBAAoB,MACpBC,kBAAmBvD,OAAO9D,KAAK0C,YAAYC,YAAY,kBACvDqB,uBAAwBF,OAAO9D,KAAK0C,YAAYC,YAAY,mBAC5D2E,oBAAqBtH,KAAKwD,sBAC1B+D,gBAAiB,UAIpBvH,KAAKW,UAAU6G,QAAQ,iBAAkB,sBAAuB,CAAEC,QAASzH,KAAK0B,qBACjF,MAAO,GAAIyB,EAAqBmE,sBAAwBtH,KAAKwD,sBAAuB,CACnFL,EAAqBmE,oBAAsBtH,KAAKwD,sBAChDL,EAAqBiE,mBAAqB,KAC3C,CACApH,KAAK0H,uBACL1H,KAAKW,UAAU6G,QAAQ,iBAAkB,kBAAmB,CAAEG,QAAS,MAAOC,KAAM,IAAIC,MACzF,EACQ8B,gBAAe,SAAAC,EAACrD,GACvB,MAAMvB,EAAYhF,KAAK0C,YACvB,MAAM+D,EAAoBzB,EAAU0B,YACpC,MAAMC,EAASF,EAAkBC,YACjC,IAAIpC,EAAUiC,EAAOC,aAAa,SAClC,MAAMqD,EAAiB7J,KAAKuB,0BAC5B,MAAMuI,EAAW9J,KAAKyE,YAAYX,OAAOQ,IACzC,IAAKwF,EAAU,CACd,MACD,KAAO,CACNxF,EAAUwF,CACX,CACA,IAAKD,EAAgB,CACpB7J,KAAK4G,kBAAkB,CACtBC,gBAAiBF,EACjB7E,mBAAoB,CACnBC,WAAY7C,EAAa8C,cACzBC,QAAS,CACR6E,eAAgBhD,OAAO9D,KAAK0C,YAAYC,YAAY,QACpDoE,sBAAuB/G,KAAKuC,cAAcpD,EAASmE,QACnD0D,qBAAsBlD,OAAO9D,KAAK0C,YAAYC,YAAY,kBAC1DsE,uBAAwBjH,KAAKuC,cAAcpD,EAASsE,SACpDyD,mBAAoBlH,KAAKuC,cAAcpD,EAASiG,SAEhD+B,YAAa7C,EACb8C,mBAAoB,MACpBC,kBAAmBvD,OAAO9D,KAAK0C,YAAYC,YAAY,kBACvDqB,uBAAwBF,OAAO9D,KAAK0C,YAAYC,YAAY,mBAC5D2E,oBAAqB,MACrBC,gBAAiBvH,KAAKmF,sBAIzBnF,KAAKW,UAAU6G,QAAQ,iBAAkB,sBAAuB,CAAEC,QAASzH,KAAK0B,qBACjF,MAAO,GAAImI,EAAe1C,cAAgB7C,EAAS,CAClDuF,EAAe1C,YAAc7C,EAC7BuF,EAAezC,mBAAqB,MACpCyC,EAAevC,oBAAsB,KACtC,CACD,EAEQpG,iBAAgB,SAAA6I,EAACC,EAAgBvH,EAAmBwH,GAC3DjK,KAAKqB,kBAAkB6I,QAAQzH,GAC/BzC,KAAKqB,kBAAkBC,WAAW0I,GAClChK,KAAKqB,kBAAkB8I,QAAQrG,OAAO9D,KAAKK,YAAYC,QAAQ2J,KAC/D,GAAIxH,IAAS3E,EAAYqG,MAAO,CAC/BnE,KAAKW,UAAU6G,QAAQ,iBAAkB,kBAAmB,CAAEG,QAASqC,EAAOpC,KAAM,IAAIC,MACzF,CACD,EAEQpD,YAAW,SAAA2F,EAACC,GACnB,IACC,MAAMnF,EAAM,IAAIoF,IAAID,GACpB,OAAOnF,EAAIqF,IACZ,CAAE,MACD,MAAO,EACR,CACD,EAEO7C,qBAAoB,SAAA8C,IAC1BxK,KAAKW,UAAU6G,QAAQ,iBAAkB,kBAAmB,CAAEG,QAAS,MAAOC,KAAM,IAAIC,OACxF7H,KAAKqB,kBAAkBC,WAAW,OAClC,MAAM2D,EAAejF,KAAKC,WAAWsE,IAAI,GAAGvE,KAAKoC,4BACjD,IAAKpC,KAAKyE,YAAYQ,EAAaf,YAAa,CAC/Ce,EAAalB,SAAS,GACvB,CACD,EAEQ0G,gBAAe,SAAAC,EAACnE,GACvB,MAAMoE,EAAYpE,EAAOC,aAAa,UAAY,GAClDxG,KAAKkB,kBAAkBlB,KAAKyE,YAAYkG,GAAY7M,EAAYqG,MAAO,iBACxE,EAEQ9C,gBAAe,SAAAuJ,IACtB,MAAM7E,EAAiB,GAAG/F,KAAKoC,uBAC/B,OAAOpC,KAAKC,WAAWsE,IAAIwB,EAC5B,EAOQ8E,qBAAoB,SAAAC,EAACzI,GAC5B,MAAM0I,EAA0B,GAAG/K,KAAKoC,gCACxC,MAAMmH,EAAUvJ,KAAKuC,cAAcpD,EAASiG,SAE5C,MAAM4F,EAAelH,OAAO9D,KAAK0C,YAAYC,YAAY,QACzD,IAAK3C,KAAKC,WAAWsE,IAAIwG,GAA0B,CAClD,MAAME,EAAwB,IAAIlN,EAAW,GAAGiC,KAAKoC,iCAAiCkG,cACrF,qCAED,MAAM4C,EAAqB,GAAGlL,KAAKoC,2BACnC,MAAM+I,EAAmB,IAAI/N,EAAM8N,EAAoB,CACtDE,MAAOJ,IAAiB5L,EAAmB4L,EAAe,GAC1DvI,KAAM7E,EAAQyN,UAAUC,IACxBzJ,OAAQ7B,KAAK2J,gBAAgBtB,KAAKrI,MAClCuL,WAAYvL,KAAKyK,gBAAgBpC,KAAKrI,MACtCwL,QAASjC,IAEVvJ,KAAKC,WAAWqC,IAAI4I,EAAoBC,GACxCF,EAAsB7E,WAAW+E,GACjCnL,KAAKC,WAAWqC,IAAIyI,EAAyBE,EAC9C,MAAO,GAAIjL,KAAKuB,0BAA2B,CAC1C,IAAIkK,EAAgBzL,KAAKC,WAAWsE,IAAI,GAAGvE,KAAKoC,4BAChDqJ,EAAc1H,SAASiH,EACxB,CACA3I,EAAY8D,QAAQnG,KAAKC,WAAWsE,IAAIwG,GACzC,EAEQW,iBAAgB,SAAAC,EAACpF,GACxB,MAAMtD,EAAesD,EAAOqF,YAC5B5L,KAAKqB,kBAAkBC,WAAW,OAClCtB,KAAKW,UAAU6G,QAAQ,iBAAkB,kBAAmB,CAAEG,QAAS,MAAOC,KAAM,IAAIC,OACxF7H,KAAK6L,mBAAmB5I,EAAaiB,aAAe,GACrD,EAEQ2H,mBAAkB,SAAAC,EAACC,GAC1B,MAAMC,EAAoBhM,KAAK2D,uBAC/B,GAAIqI,EAAmB,CACtBA,EAAkB3G,WAAW0G,EAC9B,CACD,EAEQpI,qBAAoB,SAAAsI,IAC3B,MAAMC,EAAuC,GAAGlM,KAAKoC,6CACrD,OAAOpC,KAAKC,WAAWsE,IAAI2H,EAC5B,EAEQC,sBAAqB,SAAAC,EAAC7F,GAC7B,MAAMtD,EAAesD,EAAOqF,YAC5B,MAAMS,EAAepJ,EAAaqJ,qBAClCtM,KAAK6L,mBAAmB,OACxBvO,EAAWuG,MAAMC,OAAO9D,KAAKK,YAAYC,QAAQ,2BAA4B,CAAC+L,KAC/E,EAEAE,sBAAqB,SAAAC,EAACC,GACrB,MAAMxJ,EAAewJ,EAAMb,YAC3B,IAAIc,EAAWzJ,EAAaiB,WAG5B,GAAIwI,IAAa,GAAI,CACpBA,EAAW1M,KAAKuB,2BAA2ByC,wBAA0BF,OAAO9D,KAAK0C,YAAYC,YAAY,mBACzG3C,KAAK6L,mBAAmB,MACzB,CACA5I,EAAac,SAAS2I,EACvB,EAEcC,yBAAwB,SAAAC,IAAA,IAAkB,MAAAC,EACxC7M,KAAf,IAAI8M,EAAWD,EAAKxM,YAAYC,QAAQ,2BAA2B,OAAAoE,QAAAC,QAAAhG,EAAA,WAC/D,OAAA+F,QAAAC,QACoBD,QAAQqI,IAAI,CAACF,EAAKG,kBAAmB/O,EAAUgP,gBAA0B,eAAajO,KAAA,SAAvGkO,GACN,MAAMC,EAAWD,EAAS,GAC1B,MAAME,EAAWF,EAAS,GAC1B,MAAMG,EAASD,GAAYA,EAAShL,QACpC,MAAMkL,EAA+B,CAAEC,SAAUF,EAAS,IAAMxF,KAAK2F,MAAMC,WAAYC,WAAYP,EAASlL,SAI5G,GAAIkL,EAAS1K,KAAM,CAClB6K,EAAQK,aAAeR,EAAS1K,IACjC,CAAC,OAAAiC,QAAAC,QACuBrF,EAAWsO,KAAKrO,EAAUC,mBAAoB8N,IAAQtO,KAAA,SAAxE6O,GACN,MAAM1K,EAAuB0J,EAAKtL,0BAClC,MAAMyD,EAAY6H,EAAKnK,YACvB,MAAM+D,EAAoBzB,EAAU0B,YACpC,MAAMC,EAASF,EAAkBC,YACjC,GAAImH,GAAcA,EAA6ChK,MAAO,CACrEgJ,EAAK3J,kBAAkBa,SAAS,IAChC,GAAIZ,EAAsB,CACzBA,EAAqBa,uBAAyB,EAC/C,KAAO,CACN6I,EAAKjG,kBAAkB,CACtBC,gBAAiBF,EACjB7E,mBAAoB,CACnBC,WAAY7C,EAAa8C,cACzBC,QAAS,CACR6E,eAAgBhD,OAAO+I,EAAKnK,YAAYC,YAAY,QACpDoE,sBAAuB8F,EAAKtK,cAAcpD,EAASmE,QACnD0D,qBAAsBlD,OAAO+I,EAAKnK,YAAYC,YAAY,kBAC1DsE,uBAAwB4F,EAAKtK,cAAcpD,EAASsE,SACpDyD,mBAAoB2F,EAAKtK,cAAcpD,EAASiG,SAEhD+B,YAAarD,OAAO+I,EAAKnK,YAAYC,YAAY,QACjDyE,mBAAoB,KACpBC,kBAAmBvD,OAAO+I,EAAKnK,YAAYC,YAAY,kBACvDqB,uBAAwBF,OAAO+I,EAAKnK,YAAYC,YAAY,mBAC5D2E,oBAAqB,MACrBC,gBAAiB,SAIrB,CACAuF,EAAYe,EAA6ChK,MAAMiK,QAAQC,SAAS,UAC7ElB,EAAKxM,YAAYC,QAAQ,0BACzBwM,EACH,MAAM,IAAI3I,MAAM2I,EACjB,CACA,MAAMkB,EAAaH,EAAmCN,SACtD,GAAIpK,EAAsB,CACzBA,EAAqBkE,kBAAoB2G,EACzC7K,EAAqBa,uBAAyB6I,EAAK3J,kBAAkBgB,UACtE,KAAO,CACN2I,EAAKjG,kBAAkB,CACtBC,gBAAiBF,EACjB7E,mBAAoB,CACnBC,WAAY7C,EAAa8C,cACzBC,QAAS,CACR6E,eAAgBhD,OAAO+I,EAAKnK,YAAYC,YAAY,QACpDoE,sBAAuB8F,EAAKtK,cAAcpD,EAASmE,QACnD0D,qBAAsBlD,OAAO+I,EAAKnK,YAAYC,YAAY,kBAC1DsE,uBAAwB4F,EAAKtK,cAAcpD,EAASsE,SACpDyD,mBAAoB2F,EAAKtK,cAAcpD,EAASiG,SAChD+B,YAAarD,OAAO+I,EAAKnK,YAAYC,YAAY,QACjDyE,mBAAoB,KACpBC,kBAAmB2G,EACnBhK,uBAAwB6I,EAAK3J,kBAAkBgB,WAC/CoD,oBAAqB,MACrBC,gBAAiB,UAIpBsF,EAAKlM,UAAU6G,QAAQ,iBAAkB,sBAAuB,CAAEC,QAASoF,EAAKnL,qBACjF,CACAlE,EAAayQ,KAAKnK,OAAO+I,EAAKxM,YAAYC,QAAQ,4BAClDuM,EAAKhB,mBAAmB,MAAO,IAChC,EAAC,SAAQqC,GACR5Q,EAAWuG,MAAOqK,EAA6BJ,SAC/CjB,EAAKhB,mBAAmB,MACzB,GACD,CAAC,MAAA9M,GAAA,OAAA2F,QAAAG,OAAA9F,EAAA,GAEOiO,gBAAe,SAAAmB,IACtB,OAAO,IAAIzJ,QAAsB,CAACC,EAASE,KAC1C,MAAM5B,EAAejD,KAAKkD,kBAC1B,IAAI4J,EAAW9M,KAAKK,YAAYC,QAAQ,2BACxC,GAAI2C,IAAiBA,EAAaiB,WAAY,CAC7C4I,EAAW9M,KAAKK,YAAYC,QAAQ,mBACpCuE,EAAO,IAAIV,MAAM2I,GAClB,CAEA,MAAMsB,EAAOnL,EAAaoL,YAAYC,MAAM,GAC5C,MAAMC,EAAS,IAAIC,WAEnBD,EAAOE,OAAS,WACf,IACC,MAAMC,EAAcH,EAAOzP,OAC3B,IAAI6P,EACJ,MAAMxB,EAAyB,CAAE1K,KAAM,GAAIR,QAAS,IACpD,GAAImM,EAAK3L,OAAS,WAAY,CAC7BkM,EAAeC,OAAOC,KACrBC,mBAAmBhL,OAAO4K,IAAcK,QAAQ,kBAAmB,SAAUC,EAAOC,GACnF,OAAOnL,OAAOoL,aAAaC,SAASF,EAAI,IACzC,IAED9B,EAAS1K,KAAO,KACjB,KAAO,CACNkM,EAAeD,EAAYK,QAAQ,QAAS,IAAIA,QAAQ,OAAQ,GACjE,CACA5B,EAASlL,QAAU0M,EACnBhK,EAAQwI,EACT,CAAE,MACDtI,EAAO,IAAIV,MAAM2I,GAClB,CACD,EAEA,GAAIsB,EAAK3L,OAAS,WAAY,CAC7B8L,EAAOa,WAAWhB,EACnB,KAAO,CACNG,EAAOc,cAAcjB,EACtB,GAEF,EAEQlL,gBAAe,SAAAoM,IACtB,MAAMC,EAA+B,GAAGvP,KAAKoC,uCAC7C,OAAOpC,KAAKC,WAAWsE,IAAIgL,EAC5B,EAOQC,8BAA6B,SAAAC,EAACpN,GACrC,MAAMqN,EAA+B,GAAG1P,KAAKoC,qCAC7C,IAAKpC,KAAKC,WAAWsE,IAAImL,GAA+B,CACvD,MAAMC,EAA6B,IAAI5R,EAAW,GAAGiC,KAAKoC,sCAAsCkG,cAC/F,qCAED,MAAMsH,EAAuB,IAAIjS,EAAK,GAAGqC,KAAKoC,gCAC9C,MAAMmN,EAA+B,GAAGvP,KAAKoC,uCAC7C,MAAM4C,EAAYhF,KAAK0C,YACvB,MAAMmN,EAAsC,IAAI7R,EAAauR,EAA8B,CAC1FO,KAAM,uBACNC,QAAS/P,KAAKK,YAAYC,QAAQ,sBAClC0P,SAAUhL,GAAWrC,YAAY,wBACjCmD,MAAO,OACPjE,OAAQ7B,KAAK0L,iBAAiBrD,KAAKrI,MACnCiQ,gBAAiB,GACjBC,eAAgBlQ,KAAKmM,sBAAsB9D,KAAKrI,MAChDmQ,oBAAqB,KACrBC,iBAAkBpQ,KAAKuM,sBAAsBlE,KAAKrI,MAClDoL,MAAOtH,OAAO9D,KAAK0C,YAAYC,YAAY,mBAC3C6I,QAASxL,KAAKuC,cAAcpD,EAASmE,UAEtCtD,KAAKC,WAAWqC,IAAIiN,EAA8BM,GAClD,MAAM3D,EAAuC,GAAGlM,KAAKoC,6CACrD,MAAMiO,EAAqC,IAAIlT,EAAO+O,EAAsC,CAC3FhE,KAAMlI,KAAKK,YAAYC,QAAQ,qBAC/BgQ,MAAOtQ,KAAK2M,yBAAyBtE,KAAKrI,MAC1CyC,KAAM,aACN+I,QAAS,QAEVxL,KAAKC,WAAWqC,IAAI4J,EAAsCmE,GAC1DT,EAAqBzJ,QAAQ0J,GAC7BD,EAAqBzJ,QAAQkK,GAC7BV,EAA2BvJ,WAAWwJ,GACtC5P,KAAKC,WAAWqC,IAAIoN,EAA8BC,EACnD,CACAtN,EAAY8D,QAAQnG,KAAKC,WAAWsE,IAAImL,GACzC,EAOQhP,aAAY,SAAA6P,IACnB,MAAMpO,EAAgB,GAAGnC,KAAKoC,sBAC9B,MAAMC,EAAcrC,KAAKC,WAAWsE,IAAIpC,GACxCE,EAAYmO,iBACZxQ,KAAKwF,gBAAgBnD,GACrBrC,KAAK8I,iBAAiBzG,GACtBrC,KAAKwI,2BAA2BnG,GAChCrC,KAAKoJ,mBAAmB/G,GACxBrC,KAAK6K,qBAAqBxI,GAC1BrC,KAAK8H,0BAA0BzF,GAC/BrC,KAAKwP,8BAA8BnN,EACpC,IAAC,OA5qBmB5C,CAAwB","ignoreList":[]}