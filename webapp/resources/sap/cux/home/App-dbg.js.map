{"version":3,"file":"App-dbg.js","names":["sap","ui","define","Log","GenericTile","mobileLibrary","Container","__BaseApp","__AppManager","_interopRequireDefault","obj","__esModule","default","BaseApp","AppManager","App","extend","metadata","library","properties","url","type","group","defaultValue","vizId","constructor","_constructor","id","settings","BaseApp.prototype.constructor.call","_getSSBRootControl","oSmartBusinessAppViz","getContent","getComponentInstance","getRootControl","oError","error","Error","message","String","_getInnerGenericTile","oControl","oControlMetadata","getMetadata","oDefaultAggregationDefinition","getDefaultAggregation","sDefaultAggregationName","name","aAggregationData","getAggregation","oAggregationValue","Array","isArray","getState","LoadState","Loaded","_launchApp","event","_this","appManagerInstance","getInstance","tile","getSource","Promise","resolve","fetchFavVizs","then","favoriteApps","selectedApp","find","app","appUrl","getUrl","includes","smartBusinessAppViz","vizInstance","isSmartBusinessTile","ssbRootControl","ssbGenericTile","firePress","getServiceAsync","spaceContentService","launchTileTarget","getTitle","e","reject","_handlePress","_this2","_temp"],"sources":["App.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\n\nimport Log from \"sap/base/Log\";\nimport GenericTile, { GenericTile$PressEvent } from \"sap/m/GenericTile\";\nimport mobileLibrary from \"sap/m/library\";\nimport Control from \"sap/ui/core/Control\";\nimport type { MetadataOptions } from \"sap/ui/core/Element\";\nimport Container from \"sap/ushell/Container\";\nimport SpaceContent from \"sap/ushell/services/SpaceContent\";\nimport { $AppSettings } from \"./App\";\nimport BaseApp from \"./BaseApp\";\nimport { ICustomVizInstance, ISectionAndVisualization } from \"./interface/AppsInterface\";\nimport AppManager from \"./utils/AppManager\";\n\n/**\n *\n * App class for managing and storing Apps.\n *\n * @extends sap.cux.home.BaseApp\n *\n * @author SAP SE\n * @version 0.0.1\n * @since 1.121.0\n *\n * @private\n * @ui5-restricted ux.eng.s4producthomes1\n *\n * @alias sap.cux.home.App\n */\nexport default class App extends BaseApp {\n\tconstructor(idOrSettings?: string | $AppSettings);\n\tconstructor(id?: string, settings?: $AppSettings);\n\t/**\n\t * Constructor for a new App.\n\t *\n\t * @param {string} [id] ID for the new app, generated automatically if an ID is not provided\n\t * @param {object} [settings] Initial settings for the new app\n\t */\n\tpublic constructor(id?: string, settings?: $AppSettings) {\n\t\tsuper(id, settings);\n\t}\n\tprivate appManagerInstance!: AppManager;\n\tstatic readonly metadata: MetadataOptions = {\n\t\tlibrary: \"sap.cux.home\",\n\t\tproperties: {\n\t\t\t/**\n\t\t\t * Url of the app where the user navigates to on click\n\t\t\t */\n\t\t\turl: { type: \"string\", group: \"Misc\", defaultValue: \"\" },\n\t\t\t/**\n\t\t\t * VizId of the app. Used for enabling addition of apps to FavoriteApp panel\n\t\t\t */\n\t\t\tvizId: { type: \"string\", group: \"Misc\", defaultValue: \"\" }\n\t\t}\n\t};\n\tprivate _getSSBRootControl(oSmartBusinessAppViz: ICustomVizInstance): Control | null {\n\t\ttry {\n\t\t\treturn oSmartBusinessAppViz.getContent().getComponentInstance().getRootControl() as Control | null;\n\t\t} catch (oError) {\n\t\t\tLog.error(oError instanceof Error ? oError.message : String(oError));\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tprivate _getInnerGenericTile(oControl: Control | null): GenericTile | null {\n\t\tif (!oControl) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst oControlMetadata = oControl.getMetadata();\n\t\tconst oDefaultAggregationDefinition = oControlMetadata.getDefaultAggregation() as { name?: string } | null;\n\t\tconst sDefaultAggregationName = oDefaultAggregationDefinition ? oDefaultAggregationDefinition?.name : \"content\";\n\n\t\tconst aAggregationData = sDefaultAggregationName ? oControl.getAggregation(sDefaultAggregationName) : null;\n\t\tconst oAggregationValue = Array.isArray(aAggregationData) ? aAggregationData[0] : aAggregationData;\n\n\t\tif (!oAggregationValue) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (oAggregationValue instanceof GenericTile && oAggregationValue.getState() === mobileLibrary.LoadState.Loaded) {\n\t\t\treturn oAggregationValue;\n\t\t}\n\n\t\treturn this._getInnerGenericTile(oAggregationValue as Control);\n\t}\n\n\t/**\n\t * Navigates to the clicked app\n\t * @private\n\t */\n\tprivate async _launchApp(event: GenericTile$PressEvent): Promise<void> {\n\t\tthis.appManagerInstance = this.appManagerInstance || AppManager.getInstance();\n\t\tconst tile = event.getSource();\n\t\tconst favoriteApps: ISectionAndVisualization[] = await this.appManagerInstance.fetchFavVizs(false, true);\n\t\tconst selectedApp = favoriteApps.find((app) => {\n\t\t\tconst appUrl = app.url || \"\";\n\t\t\treturn tile.getUrl().includes(appUrl);\n\t\t});\n\t\tconst smartBusinessAppViz = selectedApp?.vizInstance;\n\t\tconst isSmartBusinessTile = selectedApp?.isSmartBusinessTile;\n\t\tif (smartBusinessAppViz) {\n\t\t\tconst ssbRootControl = this._getSSBRootControl(smartBusinessAppViz);\n\t\t\tconst ssbGenericTile = isSmartBusinessTile && this._getInnerGenericTile(ssbRootControl);\n\n\t\t\tif (ssbGenericTile) {\n\t\t\t\tssbGenericTile.firePress();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t// Fallback in case smartBusinessAppViz is undefined or ssbGenericTile is not present\n\t\tconst spaceContentService = await Container.getServiceAsync<SpaceContent>(\"SpaceContent\");\n\t\tawait spaceContentService.launchTileTarget(this.getUrl(), this.getTitle());\n\t}\n\n\t/**\n\t * App Press Handler\n\t * @private\n\t */\n\tpublic async _handlePress(event: GenericTile$PressEvent) {\n\t\tif (this.getUrl()) {\n\t\t\tawait this._launchApp(event);\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[]}