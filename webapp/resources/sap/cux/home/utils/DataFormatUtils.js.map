{"version":3,"file":"DataFormatUtils.js","names":["sap","ui","define","sap_m_library","UI5Element","DateFormat","___TaskUtils","ValueColor","TaskPriority","oRelativeDateTimeFormatter","getDateTimeInstance","style","relative","relativeStyle","oRelativeDateFormatter","getDateInstance","toPriority","oTask","criticality","Error","Critical","Neutral","toTaskPriorityText","sPriority","VERY_HIGH","HIGH","MEDIUM","LOW","toRelativeDateTime","oDate","format","Date","toRelativeDate","iTimeStamp","sRelativeDate","charAt","toUpperCase","slice","createBookMarkData","oBookMark","finalBookMarkData","title","url","targetURL","icon","info","subtitle","serviceUrl","indicatorDataSource","path","numberUnit","vizType","vizConfig","dataSource","getImportance","oDataField","sImportance","iImportance","EnumMember","sortCollectionByImportance","aCollection","sort","oFirstData","oSecondData","iFirstDataImportance","iSecondDataImportance","getLeanURL","constructFullUrl","query","fullURL","URL","window","location","href","search","hash","toString","indexOf","recycleId","id","existingControl","getElementById","destroy","__exports","__esModule"],"sources":["DataFormatUtils.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\n\nimport { ValueColor } from \"sap/m/library\";\nimport UI5Element from \"sap/ui/core/Element\";\nimport DateFormat from \"sap/ui/core/format/DateFormat\";\nimport { BookmarkParameters } from \"sap/ushell/services/BookmarkV2\";\nimport { IVisualization } from \"../interface/AppsInterface\";\nimport { TaskPriority } from \"./TaskUtils\";\n\nconst oRelativeDateTimeFormatter = DateFormat.getDateTimeInstance({\n\tstyle: \"medium\",\n\trelative: true,\n\trelativeStyle: \"short\"\n});\n\nconst oRelativeDateFormatter = DateFormat.getDateInstance({\n\trelative: true\n});\n\nexport function toPriority(oTask: { criticality: ValueColor }) {\n\tswitch (oTask.criticality) {\n\t\tcase ValueColor.Error:\n\t\t\treturn 1;\n\t\tcase ValueColor.Critical:\n\t\t\treturn 2;\n\t\tcase ValueColor.Neutral:\n\t\t\treturn 3;\n\t\tdefault:\n\t\t\treturn 99;\n\t}\n}\n\nexport function toTaskPriorityText(sPriority: TaskPriority) {\n\tswitch (sPriority) {\n\t\tcase TaskPriority.VERY_HIGH:\n\t\t\treturn \"veryHighPriority\";\n\t\tcase TaskPriority.HIGH:\n\t\t\treturn \"highPriority\";\n\t\tcase TaskPriority.MEDIUM:\n\t\t\treturn \"mediumPriority\";\n\t\tcase TaskPriority.LOW:\n\t\t\treturn \"lowPriority\";\n\t\tdefault:\n\t\t\treturn \"nonePriority\";\n\t}\n}\n\n/**\n * Formats a given date as a relative date and time string.\n *\n * @param {Date} oDate - The input date to format as a relative date and time string.\n * @returns {string} A string representing the input date in a relative date and time format.\n */\nexport function toRelativeDateTime(oDate: Date) {\n\treturn oRelativeDateTimeFormatter.format(new Date(oDate));\n}\n\n/**\n * Converts a given date to a relative date string.\n *\n * @param {Date} iTimeStamp - The input timestamp to convert to a relative date string.\n * @returns {string} A relative date string with the first letter capitalized.\n */\nexport function toRelativeDate(iTimeStamp: Date) {\n\tconst sRelativeDate = oRelativeDateFormatter.format(new Date(iTimeStamp));\n\treturn sRelativeDate.charAt(0).toUpperCase() + sRelativeDate.slice(1);\n}\n\nexport function createBookMarkData(oBookMark: IVisualization) {\n\tconst finalBookMarkData = {\n\t\ttitle: oBookMark.title || \"\",\n\t\turl: oBookMark.targetURL,\n\t\ticon: oBookMark.icon,\n\t\tinfo: oBookMark.info,\n\t\tsubtitle: oBookMark.subtitle,\n\t\tserviceUrl: oBookMark.indicatorDataSource && oBookMark.indicatorDataSource.path,\n\t\tnumberUnit: oBookMark.numberUnit,\n\t\tvizType: oBookMark.vizType,\n\t\tvizConfig: oBookMark.vizConfig,\n\t\tdataSource: oBookMark.dataSource\n\t} as unknown as BookmarkParameters;\n\treturn finalBookMarkData;\n}\n\nexport function getImportance(oDataField: unknown) {\n\tlet sImportance,\n\t\tiImportance = -1;\n\tif ((oDataField as { importance: { EnumMember: string } })[\"importance\"]) {\n\t\tsImportance = (oDataField as { importance: { EnumMember: string } })[\"importance\"].EnumMember;\n\t\tswitch (sImportance) {\n\t\t\tcase \"com.sap.vocabularies.UI.v1.ImportanceType/High\":\n\t\t\t\tiImportance = 1;\n\t\t\t\tbreak;\n\t\t\tcase \"com.sap.vocabularies.UI.v1.ImportanceType/Medium\":\n\t\t\t\tiImportance = 2;\n\t\t\t\tbreak;\n\t\t\tcase \"com.sap.vocabularies.UI.v1.ImportanceType/Low\":\n\t\t\t\tiImportance = 3;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t} else {\n\t\tiImportance = 2; // default importance to be considered as Medium\n\t}\n\treturn iImportance;\n}\n\nexport function sortCollectionByImportance(aCollection: Array<unknown>) {\n\treturn aCollection.sort((oFirstData, oSecondData) => {\n\t\tconst iFirstDataImportance = getImportance(oFirstData);\n\t\tconst iSecondDataImportance = getImportance(oSecondData);\n\t\treturn iFirstDataImportance < iSecondDataImportance ? -1 : 1;\n\t});\n}\n\nexport function getLeanURL(targetURL: string) {\n\tconst url = targetURL;\n\tconst constructFullUrl = function (query: string, url: string) {\n\t\tconst fullURL = new URL(window.location.href);\n\t\tfullURL.search = query;\n\t\tfullURL.hash = url;\n\t\treturn fullURL.toString();\n\t};\n\n\t// append appState only in the case when targetURL starts with \"#\"\n\tif ((url || \"\").charAt(0) !== \"#\") {\n\t\treturn url;\n\t}\n\n\tlet query = window.location.search;\n\tif (!query) {\n\t\tquery = \"?sap-ushell-config=lean\";\n\t} else if (query.indexOf(\"sap-ushell-config=\") >= -1) {\n\t\t// avoid duplicates: lean FLP opens a link again\n\t\tquery += \"&sap-ushell-config=lean\";\n\t}\n\n\treturn constructFullUrl(query, url);\n}\n\n/**\n * Destroys the element if it already exist with given ID\n *\n * @private\n * @param {string} id - ID of the element.\n */\nexport function recycleId(id: string) {\n\tconst existingControl = UI5Element.getElementById(id);\n\tif (existingControl) {\n\t\texistingControl.destroy();\n\t}\n\treturn id;\n}\n"],"mappings":";;;;AAAAA,IAAAC,GAAAC,OAAA,+FAAAC,EAAAC,EAAAC,EAAAC,GAAA,mBAKSC,EAAUJ,EAAA,oBAKVK,EAAYF,EAAA,gBAErB,MAAMG,EAA6BJ,EAAWK,oBAAoB,CACjEC,MAAO,SACPC,SAAU,KACVC,cAAe,UAGhB,MAAMC,EAAyBT,EAAWU,gBAAgB,CACzDH,SAAU,OAGJ,SAASI,EAAWC,GAC1B,OAAQA,EAAMC,aACb,KAAKX,EAAWY,MACf,OAAO,EACR,KAAKZ,EAAWa,SACf,OAAO,EACR,KAAKb,EAAWc,QACf,OAAO,EACR,QACC,OAAO,GAEV,CAEO,SAASC,EAAmBC,GAClC,OAAQA,GACP,KAAKf,EAAagB,UACjB,MAAO,mBACR,KAAKhB,EAAaiB,KACjB,MAAO,eACR,KAAKjB,EAAakB,OACjB,MAAO,iBACR,KAAKlB,EAAamB,IACjB,MAAO,cACR,QACC,MAAO,eAEV,CAQO,SAASC,EAAmBC,GAClC,OAAOpB,EAA2BqB,OAAO,IAAIC,KAAKF,GACnD,CAQO,SAASG,EAAeC,GAC9B,MAAMC,EAAgBpB,EAAuBgB,OAAO,IAAIC,KAAKE,IAC7D,OAAOC,EAAcC,OAAO,GAAGC,cAAgBF,EAAcG,MAAM,EACpE,CAEO,SAASC,EAAmBC,GAClC,MAAMC,EAAoB,CACzBC,MAAOF,EAAUE,OAAS,GAC1BC,IAAKH,EAAUI,UACfC,KAAML,EAAUK,KAChBC,KAAMN,EAAUM,KAChBC,SAAUP,EAAUO,SACpBC,WAAYR,EAAUS,qBAAuBT,EAAUS,oBAAoBC,KAC3EC,WAAYX,EAAUW,WACtBC,QAASZ,EAAUY,QACnBC,UAAWb,EAAUa,UACrBC,WAAYd,EAAUc,YAEvB,OAAOb,CACR,CAEO,SAASc,EAAcC,GAC7B,IAAIC,EACHC,GAAe,EAChB,GAAKF,EAAsD,cAAe,CACzEC,EAAeD,EAAsD,cAAcG,WACnF,OAAQF,GACP,IAAK,iDACJC,EAAc,EACd,MACD,IAAK,mDACJA,EAAc,EACd,MACD,IAAK,gDACJA,EAAc,EACd,MACD,QACC,MAEH,KAAO,CACNA,EAAc,CACf,CACA,OAAOA,CACR,CAEO,SAASE,EAA2BC,GAC1C,OAAOA,EAAYC,KAAK,CAACC,EAAYC,KACpC,MAAMC,EAAuBV,EAAcQ,GAC3C,MAAMG,EAAwBX,EAAcS,GAC5C,OAAOC,EAAuBC,GAAyB,EAAI,GAE7D,CAEO,SAASC,EAAWvB,GAC1B,MAAMD,EAAMC,EACZ,MAAMwB,EAAmB,SAAUC,EAAe1B,GACjD,MAAM2B,EAAU,IAAIC,IAAIC,OAAOC,SAASC,MACxCJ,EAAQK,OAASN,EACjBC,EAAQM,KAAOjC,EACf,OAAO2B,EAAQO,UAChB,EAGA,IAAKlC,GAAO,IAAIP,OAAO,KAAO,IAAK,CAClC,OAAOO,CACR,CAEA,IAAI0B,EAAQG,OAAOC,SAASE,OAC5B,IAAKN,EAAO,CACXA,EAAQ,yBACT,MAAO,GAAIA,EAAMS,QAAQ,wBAA0B,EAAG,CAErDT,GAAS,yBACV,CAEA,OAAOD,EAAiBC,EAAO1B,EAChC,CAQO,SAASoC,EAAUC,GACzB,MAAMC,EAAkB5E,EAAW6E,eAAeF,GAClD,GAAIC,EAAiB,CACpBA,EAAgBE,SACjB,CACA,OAAOH,CACR,CAAC,IAAAI,EAAA,CAAAC,WAAA,MAAAD,EAAAnE,aAAAmE,EAAA7D,qBAAA6D,EAAAvD,qBAAAuD,EAAAnD,iBAAAmD,EAAA7C,qBAAA6C,EAAA7B,gBAAA6B,EAAAxB,6BAAAwB,EAAAjB,aAAAiB,EAAAL,YAAA,OAAAK,CAAA","ignoreList":[]}