{"version":3,"file":"UshellPersonalizer-dbg.js","names":["sap","ui","define","BaseObject","Container","UShellPersonalizer","extend","constructor","_constructor","persContainerId","oOwnerComponent","BaseObject.prototype.constructor.call","init","_init","_this","Promise","resolve","getServiceAsync","then","oPersonalizationService","oScope","keyCategory","constants","FIXED_KEY","writeFrequency","LOW","clientStorageAllowed","oPersId","container","item","oPersonalizer","getPersonalizer","e","reject","write","_write","oData","_this2","setPersData","read","_read","_this3","getPersData","oCacheInstances","getInstance","UShellPersonalizerInstance"],"sources":["UshellPersonalizer.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\nimport BaseObject from \"sap/ui/base/Object\";\nimport Container from \"sap/ushell/Container\";\nimport { IAppPersonalization } from \"../interface/AppsInterface\";\nimport { IPage } from \"../interface/PageSpaceInterface\";\n\ninterface IPersonalizer {\n\tgetPersData: () => Promise<IPersonalizationData>;\n\tsetPersData: (oData: object) => Promise<void>;\n}\n\nexport interface IPersonalizationData {\n\tfavNewsFeed?: { items: string[]; showAllPreparationRequired?: boolean };\n\tdefaultNewsFeed?: { items: string[] };\n\tfavouritePages?: IPage[] | [];\n\tfavoriteApps?: IAppPersonalization[];\n\tshowRecommendation?: boolean;\n}\n\n/**\n *\n * Provides the UshellPersonalizer Class used for fetch and update end user (Ushell) personalisation.\n *\n * @extends sap.ui.BaseObject\n *\n * @author SAP SE\n * @version 0.0.1\n * @since 1.121.0\n * @private\n *\n * @alias sap.cux.home.utils.UshellPersonalizer\n */\nexport default class UShellPersonalizer extends BaseObject {\n\tprivate persContainerId: string;\n\tprivate oOwnerComponent: object;\n\tprivate oPersonalizer!: IPersonalizer;\n\tstatic oCacheInstances: { [key: string]: UShellPersonalizer } = {};\n\n\tprivate constructor(persContainerId: string, oOwnerComponent: object) {\n\t\tsuper();\n\t\tthis.persContainerId = persContainerId;\n\t\tthis.oOwnerComponent = oOwnerComponent;\n\t}\n\n\tstatic async getInstance(persContainerId: string, oOwnerComponent: object) {\n\t\tif (UShellPersonalizer.oCacheInstances[persContainerId]) {\n\t\t\treturn Promise.resolve(UShellPersonalizer.oCacheInstances[persContainerId]);\n\t\t}\n\t\tconst UShellPersonalizerInstance = new UShellPersonalizer(persContainerId, oOwnerComponent);\n\t\tawait UShellPersonalizerInstance.init();\n\t\tUShellPersonalizer.oCacheInstances[persContainerId] = UShellPersonalizerInstance;\n\t\treturn UShellPersonalizer.oCacheInstances[persContainerId];\n\t}\n\n\tpublic async init() {\n\t\tconst oPersonalizationService: {\n\t\t\t\tconstants: {\n\t\t\t\t\tkeyCategory: { FIXED_KEY: string };\n\t\t\t\t\twriteFrequency: { LOW: string };\n\t\t\t\t};\n\t\t\t\tgetPersonalizer: (id: { container: string; item: string }, oScope: object, oOwnerComponent: object) => IPersonalizer;\n\t\t\t} = await Container.getServiceAsync(\"Personalization\"),\n\t\t\toScope = {\n\t\t\t\tkeyCategory: oPersonalizationService?.constants?.keyCategory?.FIXED_KEY,\n\t\t\t\twriteFrequency: oPersonalizationService?.constants?.writeFrequency?.LOW,\n\t\t\t\tclientStorageAllowed: true\n\t\t\t},\n\t\t\toPersId = {\n\t\t\t\tcontainer: this.persContainerId,\n\t\t\t\titem: \"settings\"\n\t\t\t};\n\t\tthis.oPersonalizer = oPersonalizationService?.getPersonalizer(oPersId, oScope, this.oOwnerComponent);\n\t}\n\n\tpublic async write(oData: IPersonalizationData) {\n\t\tawait this.oPersonalizer?.setPersData(oData);\n\t\treturn \"success\";\n\t}\n\tpublic async read(): Promise<IPersonalizationData> {\n\t\tconst oData = await this.oPersonalizer?.getPersData();\n\t\treturn oData;\n\t}\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AAHAA,GAAA,CAAAC,EAAA,CAAAC,MAAA,2DAAAC,UAAA,EAAAC,SAAA;EAAA;;EAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAZA,MAaqBC,kBAAkB,GAASF,UAAU,CAAAG,MAAA;IAMjDC,WAAW,WAAAC,aAACC,eAAuB,EAAEC,eAAuB,EAAE;MACrEC,qCAAA;MACA,IAAI,CAACF,eAAe,GAAGA,eAAe;MACtC,IAAI,CAACC,eAAe,GAAGA,eAAe;IACvC,CAAC;IAYYE,IAAI,WAAAC,MAAA;MAAA,IAAG;QAAA,MAAAC,KAAA,GAcN,IAAI;QAAA,OAAAC,OAAA,CAAAC,OAAA,CAPNZ,SAAS,CAACa,eAAe,CAAC,iBAAiB,CAAC,EAAAC,IAAA,WANjDC,uBAMJ;UANF,MAOCC,MAAM,GAAG;cACRC,WAAW,EAAEF,uBAAuB,EAAEG,SAAS,EAAED,WAAW,EAAEE,SAAS;cACvEC,cAAc,EAAEL,uBAAuB,EAAEG,SAAS,EAAEE,cAAc,EAAEC,GAAG;cACvEC,oBAAoB,EAAE;YACvB,CAAC;YACDC,OAAO,GAAG;cACTC,SAAS,EAAEd,KAAA,CAAKL,eAAe;cAC/BoB,IAAI,EAAE;YACP,CAAC;UACFf,KAAA,CAAKgB,aAAa,GAAGX,uBAAuB,EAAEY,eAAe,CAACJ,OAAO,EAAEP,MAAM,EAAEN,KAAA,CAAKJ,eAAe,CAAC;QAAC;MACtG,CAAC,QAAAsB,CAAA;QAAA,OAAAjB,OAAA,CAAAkB,MAAA,CAAAD,CAAA;MAAA;IAAA;IAEYE,KAAK,WAAAC,OAACC,KAA2B;MAAA,IAAE;QAAA,MAAAC,MAAA,GACzC,IAAI;QAAA,OAAAtB,OAAA,CAAAC,OAAA,CAAJqB,MAAA,CAAKP,aAAa,EAAEQ,WAAW,CAACF,KAAK,CAAC,EAAAlB,IAAA;UAC5C,OAAO,SAAS;QAAC;MAClB,CAAC,QAAAc,CAAA;QAAA,OAAAjB,OAAA,CAAAkB,MAAA,CAAAD,CAAA;MAAA;IAAA;IACYO,IAAI,WAAAC,MAAA;MAAA,IAAkC;QAAA,MAAAC,MAAA,GAC9B,IAAI;QAAA,OAAA1B,OAAA,CAAAC,OAAA,CAAJyB,MAAA,CAAKX,aAAa,EAAEY,WAAW,CAAC,CAAC;MAEtD,CAAC,QAAAV,CAAA;QAAA,OAAAjB,OAAA,CAAAkB,MAAA,CAAAD,CAAA;MAAA;IAAA;EAAA;EAjDmB3B,kBAAkB,CAI/BsC,eAAe,GAA0C,CAAC,CAAC;EAJ9CtC,kBAAkB,CAYzBuC,WAAW,YAAXA,WAAWA,CAACnC,eAAuB,EAAEC,eAAuB;IAAA,IAAE;MAC1E,IAAIL,kBAAkB,CAACsC,eAAe,CAAClC,eAAe,CAAC,EAAE;QACxD,OAAOM,OAAO,CAACC,OAAO,CAACX,kBAAkB,CAACsC,eAAe,CAAClC,eAAe,CAAC,CAAC;MAC5E;MACA,MAAMoC,0BAA0B,GAAG,IAAIxC,kBAAkB,CAACI,eAAe,EAAEC,eAAe,CAAC;MAAC,OAAAK,OAAA,CAAAC,OAAA,CACtF6B,0BAA0B,CAACjC,IAAI,CAAC,CAAC,EAAAM,IAAA;QACvCb,kBAAkB,CAACsC,eAAe,CAAClC,eAAe,CAAC,GAAGoC,0BAA0B;QAChF,OAAOxC,kBAAkB,CAACsC,eAAe,CAAClC,eAAe,CAAC;MAAC;IAC5D,CAAC,QAAAuB,CAAA;MAAA,OAAAjB,OAAA,CAAAkB,MAAA,CAAAD,CAAA;IAAA;EAAA;EAAA,OApBmB3B,kBAAkB;AAAA","ignoreList":[]}