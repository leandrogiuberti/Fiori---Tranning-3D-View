{"version":3,"file":"DataFormatUtils-dbg.js","names":["sap","ui","define","sap_m_library","UI5Element","DateFormat","___TaskUtils","ValueColor","TaskPriority","oRelativeDateTimeFormatter","getDateTimeInstance","style","relative","relativeStyle","oRelativeDateFormatter","getDateInstance","toPriority","oTask","criticality","Error","Critical","Neutral","toTaskPriorityText","sPriority","VERY_HIGH","HIGH","MEDIUM","LOW","toRelativeDateTime","oDate","format","Date","toRelativeDate","iTimeStamp","sRelativeDate","charAt","toUpperCase","slice","createBookMarkData","oBookMark","finalBookMarkData","title","url","targetURL","icon","info","subtitle","serviceUrl","indicatorDataSource","path","numberUnit","vizType","vizConfig","dataSource","getImportance","oDataField","sImportance","iImportance","EnumMember","sortCollectionByImportance","aCollection","sort","oFirstData","oSecondData","iFirstDataImportance","iSecondDataImportance","getLeanURL","constructFullUrl","query","fullURL","URL","window","location","href","search","hash","toString","indexOf","recycleId","id","existingControl","getElementById","destroy","__exports","__esModule"],"sources":["DataFormatUtils.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\n\nimport { ValueColor } from \"sap/m/library\";\nimport UI5Element from \"sap/ui/core/Element\";\nimport DateFormat from \"sap/ui/core/format/DateFormat\";\nimport { BookmarkParameters } from \"sap/ushell/services/BookmarkV2\";\nimport { IVisualization } from \"../interface/AppsInterface\";\nimport { TaskPriority } from \"./TaskUtils\";\n\nconst oRelativeDateTimeFormatter = DateFormat.getDateTimeInstance({\n\tstyle: \"medium\",\n\trelative: true,\n\trelativeStyle: \"short\"\n});\n\nconst oRelativeDateFormatter = DateFormat.getDateInstance({\n\trelative: true\n});\n\nexport function toPriority(oTask: { criticality: ValueColor }) {\n\tswitch (oTask.criticality) {\n\t\tcase ValueColor.Error:\n\t\t\treturn 1;\n\t\tcase ValueColor.Critical:\n\t\t\treturn 2;\n\t\tcase ValueColor.Neutral:\n\t\t\treturn 3;\n\t\tdefault:\n\t\t\treturn 99;\n\t}\n}\n\nexport function toTaskPriorityText(sPriority: TaskPriority) {\n\tswitch (sPriority) {\n\t\tcase TaskPriority.VERY_HIGH:\n\t\t\treturn \"veryHighPriority\";\n\t\tcase TaskPriority.HIGH:\n\t\t\treturn \"highPriority\";\n\t\tcase TaskPriority.MEDIUM:\n\t\t\treturn \"mediumPriority\";\n\t\tcase TaskPriority.LOW:\n\t\t\treturn \"lowPriority\";\n\t\tdefault:\n\t\t\treturn \"nonePriority\";\n\t}\n}\n\n/**\n * Formats a given date as a relative date and time string.\n *\n * @param {Date} oDate - The input date to format as a relative date and time string.\n * @returns {string} A string representing the input date in a relative date and time format.\n */\nexport function toRelativeDateTime(oDate: Date) {\n\treturn oRelativeDateTimeFormatter.format(new Date(oDate));\n}\n\n/**\n * Converts a given date to a relative date string.\n *\n * @param {Date} iTimeStamp - The input timestamp to convert to a relative date string.\n * @returns {string} A relative date string with the first letter capitalized.\n */\nexport function toRelativeDate(iTimeStamp: Date) {\n\tconst sRelativeDate = oRelativeDateFormatter.format(new Date(iTimeStamp));\n\treturn sRelativeDate.charAt(0).toUpperCase() + sRelativeDate.slice(1);\n}\n\nexport function createBookMarkData(oBookMark: IVisualization) {\n\tconst finalBookMarkData = {\n\t\ttitle: oBookMark.title || \"\",\n\t\turl: oBookMark.targetURL,\n\t\ticon: oBookMark.icon,\n\t\tinfo: oBookMark.info,\n\t\tsubtitle: oBookMark.subtitle,\n\t\tserviceUrl: oBookMark.indicatorDataSource && oBookMark.indicatorDataSource.path,\n\t\tnumberUnit: oBookMark.numberUnit,\n\t\tvizType: oBookMark.vizType,\n\t\tvizConfig: oBookMark.vizConfig,\n\t\tdataSource: oBookMark.dataSource\n\t} as unknown as BookmarkParameters;\n\treturn finalBookMarkData;\n}\n\nexport function getImportance(oDataField: unknown) {\n\tlet sImportance,\n\t\tiImportance = -1;\n\tif ((oDataField as { importance: { EnumMember: string } })[\"importance\"]) {\n\t\tsImportance = (oDataField as { importance: { EnumMember: string } })[\"importance\"].EnumMember;\n\t\tswitch (sImportance) {\n\t\t\tcase \"com.sap.vocabularies.UI.v1.ImportanceType/High\":\n\t\t\t\tiImportance = 1;\n\t\t\t\tbreak;\n\t\t\tcase \"com.sap.vocabularies.UI.v1.ImportanceType/Medium\":\n\t\t\t\tiImportance = 2;\n\t\t\t\tbreak;\n\t\t\tcase \"com.sap.vocabularies.UI.v1.ImportanceType/Low\":\n\t\t\t\tiImportance = 3;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t} else {\n\t\tiImportance = 2; // default importance to be considered as Medium\n\t}\n\treturn iImportance;\n}\n\nexport function sortCollectionByImportance(aCollection: Array<unknown>) {\n\treturn aCollection.sort((oFirstData, oSecondData) => {\n\t\tconst iFirstDataImportance = getImportance(oFirstData);\n\t\tconst iSecondDataImportance = getImportance(oSecondData);\n\t\treturn iFirstDataImportance < iSecondDataImportance ? -1 : 1;\n\t});\n}\n\nexport function getLeanURL(targetURL: string) {\n\tconst url = targetURL;\n\tconst constructFullUrl = function (query: string, url: string) {\n\t\tconst fullURL = new URL(window.location.href);\n\t\tfullURL.search = query;\n\t\tfullURL.hash = url;\n\t\treturn fullURL.toString();\n\t};\n\n\t// append appState only in the case when targetURL starts with \"#\"\n\tif ((url || \"\").charAt(0) !== \"#\") {\n\t\treturn url;\n\t}\n\n\tlet query = window.location.search;\n\tif (!query) {\n\t\tquery = \"?sap-ushell-config=lean\";\n\t} else if (query.indexOf(\"sap-ushell-config=\") >= -1) {\n\t\t// avoid duplicates: lean FLP opens a link again\n\t\tquery += \"&sap-ushell-config=lean\";\n\t}\n\n\treturn constructFullUrl(query, url);\n}\n\n/**\n * Destroys the element if it already exist with given ID\n *\n * @private\n * @param {string} id - ID of the element.\n */\nexport function recycleId(id: string) {\n\tconst existingControl = UI5Element.getElementById(id);\n\tif (existingControl) {\n\t\texistingControl.destroy();\n\t}\n\treturn id;\n}\n"],"mappings":"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","ignoreList":[]}