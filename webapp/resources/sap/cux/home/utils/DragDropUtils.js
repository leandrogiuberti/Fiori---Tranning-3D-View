/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *  * (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/f/GridContainer","sap/m/FlexBox","sap/m/Table","sap/ui/base/Event","sap/ui/core/Element","sap/ui/core/library"],function(e,t,n,o,r,i){"use strict";const s=function(e,t,n){try{const i=r.closestTo(e.target.firstElementChild);const s=i.getParent();const l=e.metaKey||e.ctrlKey;const p=s.getItems();const g=p.findIndex(e=>document.activeElement===e.getDomRef());u(p.map(e=>e.getDomRef()),g);if(!i||!s||!(t&&["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Home","End"].includes(e.key))){return Promise.resolve()}e.preventDefault();e.stopPropagation();let m=s.indexOfItem(i);const h=[...p].reverse();const w=e=>p[e]?.getDomRef();switch(e.key){case"ArrowRight":if(c(w(m),w(m+1))){m++}break;case"ArrowLeft":if(c(w(m),w(m-1))){m--}break;case"ArrowUp":case"ArrowDown":m=f(s,m,e.key);break;case"Home":m=i.data("groupId")?p.findIndex(e=>e.data("groupId")):p.findIndex(e=>!e.data("groupId"));break;case"End":m=p.length-1-(i.data("groupId")?h.findIndex(e=>e.data("groupId")):h.findIndex(e=>!e.data("groupId")));break}const I=m>-1&&m<p.length?p[m]:null;const A=function(){if(i&&I){function t(){d(s,m)}const r=new o("keyboardDragDropEvent",s,{draggedControl:i,droppedControl:I,dropPosition:["ArrowLeft","ArrowUp","Home"].includes(e.key)?a.RelativeDropPosition.Before:a.RelativeDropPosition.After});u(p.map(e=>e.getDomRef()),m);const c=function(){if(n&&l){return Promise.resolve(n(r)).then(function(){})}}();return c&&c.then?c.then(t):t(c)}}();return Promise.resolve(A&&A.then?A.then(function(){}):void 0)}catch(e){return Promise.reject(e)}};const a=i["dnd"];function c(e,t){if(!e||!t){return false}return e.getBoundingClientRect().top===t.getBoundingClientRect().top}const d=(o,r)=>{let i=null;if(o instanceof e){const e=[];o.$("listUl").children().each(function(t,n){if(n.classList.contains("sapFGridContainerItemWrapper")){e.push(n)}});i=e[r]}else if(o instanceof t||o instanceof n){i=o.getItems()[r].getDomRef()}if(i){i.setAttribute("tabindex","0");i.focus()}};const f=(e,t,n)=>{const o=function(e){return e.getBoundingClientRect().x};const r=function(e){return e.getBoundingClientRect().y};let i=t;let s=Number.MAX_SAFE_INTEGER;const a=e.getItems().map(e=>e.getDomRef());a.forEach(function(e,c){const d=Math.sqrt(Math.pow(o(a[t])-o(e),2)+Math.pow(r(a[t])-r(e),2));const f=n==="ArrowDown"&&c>t||n==="ArrowUp"&&c<t;if(f&&d<s&&r(e)!==r(a[t])){s=d;i=c}});return i};const u=(e,t)=>{e.forEach((e,n)=>{e.tabIndex=n===t?0:-1})};var l={__esModule:true};l.attachKeyboardHandler=s;l.focusDraggedItem=d;return l});
//# sourceMappingURL=DragDropUtils.js.map