/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2021 SAP SE. All rights reserved
	
 */
sap.ui.define(["./TableAPI","sap/fe/test/Utils","sap/ui/test/OpaBuilder","sap/fe/test/builder/FEBuilder","sap/fe/test/builder/MdcTableBuilder","sap/fe/test/builder/MdcFilterFieldBuilder","sap/ui/core/library","./APIHelper","sap/ui/test/Opa5"],function(e,t,i,r,n,s,a,o,c){"use strict";var u=a.SortOrder;var h=function(t,i){return e.call(this,t,i)};h.prototype=Object.create(e.prototype);h.prototype.constructor=h;h.prototype.isAction=false;h.prototype.iCheckState=function(e){var i=this.getBuilder();return this.prepareResult(i.hasState(e).description(t.formatMessage("Checking table '{0}' in state '{1}'",this.getIdentifier(),e)).execute())};h.prototype.iSeeIllustratedMessage=function(e,t,r){return i.create(this).hasType("sap.m.IllustratedMessage").hasProperties({title:e,description:t,illustrationType:r}).description("IllustratedMessage with title '"+e+"', description '"+t+"', illustrationType '"+r+"' are present").execute()};h.prototype.iCheckRows=function(i,r,n,s){var a=t.parseArguments([Object,Number,Object,Array],arguments),o=a[1],c=e.createRowMatchers(a[0],a[2],undefined,a[3]),u=this.getBuilder();if(c.length){u.hasRows(c,true).has(function(e){return t.isOfType(o,Number)?e.length===o:e.length>0})}else{u.hasNumberOfRows(o).hasRows(null,true)}return this.prepareResult(u.description(t.formatMessage("Checking table '{0}' having {1} rows with values='{2}', state='{3}' and hidden cells='{4}'",this.getIdentifier(),o===undefined?"> 0":o,a[0],a[2],a[3])).execute())};h.prototype.iCheckCreationRow=function(e,s){var a=this.getBuilder();return this.prepareResult(a.has(i.Matchers.childrenMatcher(r.create(this).hasType("sap.ui.table.CreationRow").has(n.Row.Matchers.cellValues(e)).hasState(s))).description(t.formatMessage("Checking table '{0}' having a CreationRow with values='{1}' and state='{2}'",this.getIdentifier(),e,s)).execute())};h.prototype.iCheckQuickFilterItems=function(e){return this.prepareResult(this.getBuilder().hasQuickFilterItems(e).description(t.formatMessage("Checking table '{0}' having  '{1}' item(s)",this.getIdentifier(),e)).execute())};h.prototype.iCheckColumns=function(e,i){var r=t.parseArguments([Number,Object],arguments),n=r[1],s=r[0],a=this.getBuilder();if(s!==undefined){a.hasAggregationLength("columns",s)}else{a.hasAggregation("columns")}a.hasColumns(n);return this.prepareResult(a.description(t.formatMessage("Checking table '{0}' having {1} columns and column states='{2}'",this.getIdentifier(),s===undefined?"> 0":s,n)).execute())};h.prototype.iCheckCells=function(i,r){var s=arguments.length>1?arguments[0]:undefined,a=arguments.length>1?arguments[1]:arguments[0],o=e.createRowMatchers(s,n.Row.Matchers.cellProperties(a)),c=this.getBuilder();return this.prepareResult(c.hasRows(o).description(t.formatMessage("Checking table '{0}' having cells properties '{2}' of rows with values '{1}'",this.getIdentifier(),s,a)).execute())};h.prototype.iCheckAction=function(e,n){var s=this.getBuilder(),a=this.createActionMatcher(e),o=r.Matchers.deepAggregationMatcher("actions/action",[a,r.Matchers.states(n)]);if(n&&n.visible===false){o=i.Matchers.some(o,i.Matchers.not(r.Matchers.deepAggregationMatcher("actions/action",a)))}return this.prepareResult(s.has(o).description(t.formatMessage("Checking table '{0}' having action '{1}' with state='{2}'",this.getIdentifier(),e.service==="StandardAction"?e.action:e,n)).execute())};h.prototype.iCheckMenuAction=function(e){return this.prepareResult(o.createMenuActionCheckBuilder(e).execute())};h.prototype.iCheckDelete=function(e){return this.iCheckAction({service:"StandardAction",action:"Delete",unbound:true},e)};h.prototype.iCheckSearchField=function(e,i){var r=t.parseArguments([String,Object],arguments),n=this.getBuilder();return this.prepareResult(n.hasSearchField(e,i).description(t.formatMessage("Checking the search field on table '{0}' having search text '{1}' and state='{2}'",this.getIdentifier(),r[0]||"",r[1])).execute())};h.prototype.iCheckCreate=function(e){return this.iCheckAction({service:"StandardAction",action:"Create",unbound:true},e)};h.prototype.iCheckPaste=function(){var e=this.getBuilder();return this.prepareResult(e.hasPaste().description(t.formatMessage("Checking paste action is available for table '{0}'",this.getIdentifier())).execute())};h.prototype.iCheckFullScreen=function(e){return this.iCheckAction({service:"StandardAction",action:"FullScreen",unbound:true},e)};h.prototype._iCheckTableProvidedAction=function(e){var i=this.getBuilder();return this.prepareResult(i["has"+e]().description(t.formatMessage("Checking table '{0}' having button available for '{1}'",this.getIdentifier(),e)).execute())};h.prototype.iCheckColumnAdaptation=function(){return this._iCheckTableProvidedAction("ColumnAdaptation")};h.prototype.iCheckColumnSorting=function(){this.iOpenColumnSorting();n.createSortingDialogBuilder(this.getOpaInstance()).execute();return this.iConfirmColumnSorting()};h.prototype.iCheckColumnFiltering=function(){this.iOpenFilterDialog();n.createFilteringDialogBuilder(this.getOpaInstance()).execute();return this.iConfirmFilterDialog()};h.prototype.iCheckExport=function(){var e=this.getBuilder();return this.prepareResult(e.hasExport().description(t.formatMessage("Checking export action is available for table '{0}'",this.getIdentifier())).execute())};h.prototype.iCheckQuickFilter=function(e){var i=this.getBuilder();var n=r.Matchers.deepAggregationMatcher("quickFilter/content",[r.Matchers.states(e)]);return this.prepareResult(i.has(n).description(t.formatMessage("Checking that table '{0}' has a QuickFilter Control with state='{1}'",this.getIdentifier(),e)).execute())};h.prototype.iCheckColumnAdaptationDialog=function(){var e=n.createAdaptationDialogBuilder(this.getOpaInstance());return this.prepareResult(e.description(t.formatMessage("Checking column adaptation dialog for table '{0}'",this.getIdentifier())).execute())};h.prototype.iCheckAdaptationColumn=function(e,i){return this.columnAdaptation(e,i,undefined,t.formatMessage("Checking adaptation column '{1}' on table '{0}' for state='{2}'",this.getIdentifier(),e,i))};h.prototype.iCheckSortOrder=function(e,i,r){var n=t.parseArguments([[String,Object],String,Boolean],arguments);i=n[1]||u.Ascending;r=n[2];var s=t.formatMessage("Checking column '{1}' on table '{0}' to be sorted '{2}'",this.getIdentifier(),e,i);if(r){var a={};a.sortOrder=i;return this.columnSorting(e,a,undefined,s)}var o={};o[t.isOfType(e,Object)?e.name:e]={sortOrder:i};return this.prepareResult(this.getBuilder().hasColumns(o).description(s).execute())};h.prototype.iCheckFilterField=function(e,t){return this._iCheckFilterFieldOnQueryPanel(e,t)};h.prototype._iCheckFilterFieldOnQueryPanel=function(e,a){var o=this,c=false,u=false,h=this.getIdentifier().id,l=function(e){return e.startsWith("Property::")?e.split("::")[1]:e},p=n.createFilteringDialogBuilder(this.getOpaInstance()).hasChildren(i.create().hasType("sap.m.ComboBox")),g=s.create(this.getOpaInstance()).isDialogElement().hasType("sap.ui.mdc.FilterField"),d=s.create(this.getOpaInstance()).isDialogElement().hasType("sap.ui.mdc.FilterField").has(function(i){if(!u){if(t.isOfType(e,String)){u=i.getLabel()===e}else{u=l(i.getFieldPath())===e.name}}return true}).description(t.formatMessage("Checking the filter field '{0}' of table '{1}' in state '{2}'",e,h,a)),f=r.create(this.getOpaInstance()).isDialogElement().hasType("sap.m.ComboBox").has(function(e){return e.getItems()}).description(t.formatMessage("Checking the filter field '{0}' of table '{1}' in state '{2}'",e,h,a)),C=t.isOfType(e,String)?function(t){return t.getText()===e}:function(t){return l(t.getKey())===e.name},m=function(e){return e.filter(C).length===1||u},b=function(e){return e[0].every(function(e){return i.Matchers.not(C)(e)})};if(a&&a.visible===false){f.check(b)}else{f.has(m)}return this.prepareResult(r.create(this.getOpaInstance()).success(function(){if(!r.controlsExist(p)){o.iOpenFilterDialog.bind(o)();c=true}}).success(function(){if(r.controlsExist(g)){return d.success(function(){if(c){o.iConfirmFilterDialog.bind(o)()}if(u&&a.visible===false){throw new Error(t.formatMessage("Set Filter Field '{0}' found on table '{1}' even though state should be: '{2}'",e,h,a))}}).execute()}return true}).success(function(){f.success(function(){if(c){o.iConfirmFilterDialog.bind(o)()}}).execute()}).execute())};h.prototype._iCheckFilterFieldOnListPanel=function(e,n){var a=s.create(this.getOpaInstance()).isDialogElement().hasType("sap.ui.mdc.FilterField").description(t.formatMessage("Checking the filter field '{0}' of table '{1}' in state '{2}'",e,this.getIdentifier(),n)),o=t.isOfType(e,String)?i.Matchers.properties({label:e}):i.Matchers.properties({fieldPath:e.name}),c,u=n&&n.visible===false,h=this.iOpenFilterDialog.bind(this),l=this.iConfirmFilterDialog.bind(this);if(u){a.check(function(e){return e.every(function(e){return i.Matchers.not(o)(e)})})}else{a.has(o).checkNumberOfMatches(1);if(!t.isOfType(n,[null,undefined])){a.hasState(n)}}return this.prepareResult(r.create(this.getOpaInstance()).success(function(){c=r.controlsExist(a);if(!c){h();a.success(l)}return a.execute()}).execute())};h.prototype.iCheckMessageStrip=function(e){var n=this.getBuilder();return this.prepareResult(n.has(i.Matchers.childrenMatcher(r.create(this).hasType("sap.m.MessageStrip").hasProperties(e))).description(t.formatMessage("Checking table '{0}' having a MessageStrip with text ='{1}' and type ='{2}'",this.getIdentifier(),e.text,e.type)).execute())};h.prototype.iSeeFocusOnHeader=function(){var e=this.getBuilder();return this.prepareResult(e.hasHeaderFocused().description(t.formatMessage("Checking focus on header table '{0}' ",this.getIdentifier())).execute())};h.prototype.iSeeFocusOnRow=function(e){var i=this.getBuilder();return this.prepareResult(i.hasFocusOnRow(e).description(t.formatMessage("Checking focus on table '{0}', row '{1}' ",this.getIdentifier(),e)).execute())};h.prototype.iCheckGroupByColumn=function(e,i,r){var n=this.getBuilder(),s=t.isOfType(e,Object)?e.name:e;return this.prepareResult(n.hasGroupByColumn(s,r,i).description(t.formatMessage("Checking table '{0}' having {1} groupBy options for {2}{3}",this.getIdentifier(),i===undefined?"any":i,e,r?"/"+r:"")).execute())};h.prototype.iCheckAggregationColumn=function(e,i,r){var n=this.getBuilder(),s=t.isOfType(e,Object)?e.name:e;return this.prepareResult(n.hasAggregationColumn(s,r,i).description(t.formatMessage("Checking table '{0}' having {1} aggregate options for {2}{3}",this.getIdentifier(),i===undefined?"any":i,e,r?"/"+r:"")).execute())};h.prototype.iCheckTitle=function(e){var i=this.getBuilder();return this.prepareResult(i.hasTitle(e).description(t.formatMessage("Checking table '{0}' has title '{1}'",this.getIdentifier(),e)).execute())};return h});
//# sourceMappingURL=TableAssertions.js.map