{"version":3,"names":["CollaborationAPI","_lastReceivedMessages","_rootPath","_oModel","undefined","_lockedPropertyPath","_internalModel","_receivedLocks","enterDraft","oContext","userID","userName","webSocketBaseURL","getModel","getMetaModel","getObject","Log","error","sDraftUUID","getProperty","JSONModel","model","initializeCollaboration","id","name","initialName","_onMessageReceived","bind","getPath","checkReceived","message","resetHistory","arguments","length","found","some","receivedMessage","userAction","clientContent","leaveDraft","endCollaboration","destroy","lockField","sPropertyPath","unlockField","broadcastCollaborationMessage","Activity","Lock","updatePropertyValue","value","oContextBinding","bindContext","$$patchWithoutSideEffects","$$groupId","$$updateGroupId","oPropertyBinding","bindProperty","getBoundContext","requestValue","then","setValue","attachEventOnce","Change","catch","err","Unlock","discardDraft","draftContext","_getDraftContext","requestProperty","draft","deleteDraft","MessageHandler","AppComponent","Discard","replace","deleteObject","objectPath","objectContext","_getObjectContext","delete","Delete","checkLockedByOther","includes","path","clientAction","push","Join","JoinEcho","split","filter","lock"],"sourceRoot":".","sources":["CollaborationAPI.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport AppComponent from \"sap/fe/core/AppComponent\";\nimport type { FEView } from \"sap/fe/core/BaseController\";\nimport MessageHandler from \"sap/fe/core/controllerextensions/MessageHandler\";\nimport {\n\tbroadcastCollaborationMessage,\n\tendCollaboration,\n\tinitializeCollaboration\n} from \"sap/fe/core/controllerextensions/collaboration/ActivityBase\";\nimport type { Message } from \"sap/fe/core/controllerextensions/collaboration/CollaborationCommon\";\nimport { Activity } from \"sap/fe/core/controllerextensions/collaboration/CollaborationCommon\";\nimport draft from \"sap/fe/core/controllerextensions/editFlow/draft\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\n\nconst CollaborationAPI = {\n\t_lastReceivedMessages: [] as Message[],\n\t_rootPath: \"\",\n\t_oModel: undefined as ODataModel | undefined,\n\t_lockedPropertyPath: \"\",\n\t_internalModel: undefined as JSONModel | undefined,\n\t_receivedLocks: [] as string[],\n\n\t/**\n\t * Open an existing collaborative draft with a new user, and creates a 'ghost client' for this user.\n\t * @param oContext The context of the collaborative draft\n\t * @param userID The ID of the user\n\t * @param userName The name of the user\n\t */\n\tenterDraft: function (oContext: Context, userID: string, userName: string) {\n\t\tconst webSocketBaseURL: string = oContext.getModel().getMetaModel().getObject(\"/@com.sap.vocabularies.Common.v1.WebSocketBaseURL\");\n\n\t\tif (!webSocketBaseURL) {\n\t\t\tLog.error(\"Cannot find WebSocketBaseURL annotation\");\n\t\t\treturn;\n\t\t}\n\n\t\tconst sDraftUUID: string = oContext.getProperty(\"DraftAdministrativeData/DraftUUID\");\n\t\tthis._internalModel = new JSONModel({});\n\t\tconst model = oContext.getModel();\n\n\t\tinitializeCollaboration(\n\t\t\t{\n\t\t\t\tid: userID,\n\t\t\t\tname: userName,\n\t\t\t\tinitialName: userName\n\t\t\t},\n\t\t\tsDraftUUID,\n\t\t\tthis._internalModel,\n\t\t\tthis._onMessageReceived.bind(this),\n\t\t\t{\n\t\t\t\tgetModel: function () {\n\t\t\t\t\treturn model;\n\t\t\t\t}\n\t\t\t} as FEView,\n\t\t\ttrue\n\t\t);\n\n\t\tthis._rootPath = oContext.getPath();\n\t\tthis._oModel = model;\n\t},\n\n\t/**\n\t * Checks if the ghost client has received a given message.\n\t * @param message The message content to be looked for\n\t * @param resetHistory If true, reset history of received messages\n\t * @returns True if a previously received message matches the content\n\t */\n\tcheckReceived: function (message: Partial<Message>, resetHistory = true): boolean {\n\t\tif (this._lastReceivedMessages.length === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst found = this._lastReceivedMessages.some((receivedMessage) => {\n\t\t\treturn (\n\t\t\t\t(!message.userID || message.userID === receivedMessage.userID) &&\n\t\t\t\t(!message.userAction || message.userAction === receivedMessage.userAction) &&\n\t\t\t\t(!message.clientContent || message.clientContent === receivedMessage.clientContent)\n\t\t\t);\n\t\t});\n\n\t\tif (resetHistory) {\n\t\t\tthis._lastReceivedMessages = []; // by default, reset history to avoid finding the same message twice\n\t\t}\n\n\t\treturn found;\n\t},\n\n\t/**\n\t * Closes the ghost client and removes the user from the collaborative draft.\n\t */\n\tleaveDraft: function () {\n\t\tif (this._internalModel) {\n\t\t\tendCollaboration(this._internalModel);\n\t\t\tthis._internalModel.destroy();\n\t\t\tthis._internalModel = undefined;\n\t\t}\n\t},\n\n\t/**\n\t * Simulates that the user starts typing in an input (live change).\n\t * @param sPropertyPath The path of the property being modified\n\t */\n\tlockField: function (sPropertyPath: string) {\n\t\tif (this._internalModel) {\n\t\t\tif (this._lockedPropertyPath) {\n\t\t\t\t// Unlock previous property path\n\t\t\t\tthis.unlockField();\n\t\t\t}\n\t\t\tthis._lockedPropertyPath = sPropertyPath;\n\t\t\tbroadcastCollaborationMessage(Activity.Lock, `${this._rootPath}/${sPropertyPath}`, this._internalModel);\n\t\t}\n\t},\n\n\t/**\n\t * Simulates that the user has modified a property.\n\t * @param sPropertyPath The path of the property being modified\n\t * @param value The new value of the property being modified\n\t */\n\tupdatePropertyValue: function (sPropertyPath: string, value: any) {\n\t\tif (this._internalModel) {\n\t\t\tif (this._lockedPropertyPath !== sPropertyPath) {\n\t\t\t\tthis.lockField(sPropertyPath);\n\t\t\t}\n\n\t\t\tconst oContextBinding = this._oModel!.bindContext(this._rootPath, undefined, {\n\t\t\t\t$$patchWithoutSideEffects: true,\n\t\t\t\t$$groupId: \"$auto\",\n\t\t\t\t$$updateGroupId: \"$auto\"\n\t\t\t});\n\n\t\t\tconst oPropertyBinding = this._oModel!.bindProperty(sPropertyPath, oContextBinding.getBoundContext());\n\n\t\t\toPropertyBinding\n\t\t\t\t.requestValue()\n\t\t\t\t.then(() => {\n\t\t\t\t\toPropertyBinding.setValue(value);\n\t\t\t\t\toContextBinding.attachEventOnce(\"patchCompleted\", () => {\n\t\t\t\t\t\tbroadcastCollaborationMessage(Activity.Change, `${this._rootPath}/${sPropertyPath}`, this._internalModel!);\n\t\t\t\t\t\tthis.unlockField();\n\t\t\t\t\t\tthis._lockedPropertyPath = \"\";\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch(function (err) {\n\t\t\t\t\tLog.error(err);\n\t\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * Simulates that the user unlocked a field (to be called after lockField).\n\t */\n\tunlockField: function () {\n\t\tif (this._lockedPropertyPath) {\n\t\t\tbroadcastCollaborationMessage(Activity.Unlock, `${this._rootPath}/${this._lockedPropertyPath}`, this._internalModel!);\n\t\t\tthis._lockedPropertyPath = \"\";\n\t\t}\n\t},\n\n\t/**\n\t * Simulates that the user has discarded the draft.\n\t */\n\tdiscardDraft: function () {\n\t\tif (this._internalModel) {\n\t\t\tconst draftContext = this._getDraftContext();\n\n\t\t\tdraftContext\n\t\t\t\t.requestProperty(\"IsActiveEntity\")\n\t\t\t\t.then(() => {\n\t\t\t\t\tdraft.deleteDraft(draftContext, new MessageHandler(), new AppComponent());\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tbroadcastCollaborationMessage(\n\t\t\t\t\t\tActivity.Discard,\n\t\t\t\t\t\tthis._rootPath.replace(\"IsActiveEntity=false\", \"IsActiveEntity=true\"),\n\t\t\t\t\t\tthis._internalModel!\n\t\t\t\t\t);\n\t\t\t\t\tthis._internalModel!.destroy();\n\t\t\t\t\tthis._internalModel = undefined;\n\t\t\t\t})\n\t\t\t\t.catch(function (err: any) {\n\t\t\t\t\tLog.error(err);\n\t\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * Simulates that the user has deleted an object (child of draft root).\n\t * @param objectPath The path of the object to delete\n\t */\n\tdeleteObject: function (objectPath: string) {\n\t\tif (this._internalModel) {\n\t\t\tconst objectContext = this._getObjectContext(objectPath);\n\n\t\t\tobjectContext\n\t\t\t\t.requestProperty(\"IsActiveEntity\")\n\t\t\t\t.then(() => {\n\t\t\t\t\tobjectContext.delete();\n\t\t\t\t\tbroadcastCollaborationMessage(Activity.Delete, objectPath, this._internalModel!);\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tLog.error(err);\n\t\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * Checks if a property has been locked by another user.\n\t * @param objectPath\n\t * @returns True if locked\n\t */\n\tcheckLockedByOther: function (objectPath: string): boolean {\n\t\treturn this._receivedLocks.includes(objectPath);\n\t},\n\n\t// /////////////////////////////\n\t// Private methods\n\n\t_getDraftContext: function (): any {\n\t\treturn this._getObjectContext(this._rootPath);\n\t},\n\n\t_getObjectContext: function (path: string): Context {\n\t\treturn this._oModel!.bindContext(path, undefined, {\n\t\t\t$$patchWithoutSideEffects: true,\n\t\t\t$$groupId: \"$auto\",\n\t\t\t$$updateGroupId: \"$auto\"\n\t\t}).getBoundContext();\n\t},\n\n\t/**\n\t * Callback of the ghost client when receiving a message on the web socket.\n\t * @param message\n\t */\n\t_onMessageReceived: function (message: Message) {\n\t\tmessage.userAction = message.userAction || message.clientAction;\n\t\tif (!message.clientContent) {\n\t\t\tmessage.clientContent = \"\";\n\t\t}\n\t\tthis._lastReceivedMessages.push(message);\n\n\t\tswitch (message.userAction) {\n\t\t\tcase Activity.Join:\n\t\t\t\tbroadcastCollaborationMessage(\n\t\t\t\t\tActivity.JoinEcho,\n\t\t\t\t\tthis._lockedPropertyPath ? `${this._rootPath}/${this._lockedPropertyPath}` : undefined,\n\t\t\t\t\tthis._internalModel!\n\t\t\t\t);\n\t\t\t\tbreak;\n\n\t\t\tcase Activity.JoinEcho:\n\t\t\tcase Activity.Lock:\n\t\t\t\tthis._receivedLocks.push(...message.clientContent.split(\"|\"));\n\t\t\t\tbreak;\n\n\t\t\tcase Activity.Unlock:\n\t\t\t\tthis._receivedLocks = this._receivedLocks.filter((lock) => {\n\t\t\t\t\treturn !message.clientContent.split(\"|\").includes(lock);\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t// Nothing\n\t\t}\n\t}\n};\n\nexport default CollaborationAPI;\n"],"mappings":"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","ignoreList":[],"file":"CollaborationAPI-dbg.js"}