{"version":3,"names":["CollaborationClient","oPageDefinition","sAppId","appId","sComponentId","componentId","viewId","actions","iEnterDraft","userID","userName","OpaBuilder","create","hasId","do","view","oContext","getBindingContext","CollaborationAPI","enterDraft","description","execute","iLeaveDraft","leaveDraft","iLockPropertyForEdition","sPropertyPath","lockField","iUnlockPropertyForEdition","unlockField","iUpdatePropertyValue","value","updatePropertyValue","iDiscardDraft","discardDraft","iDeleteObject","objectPath","deleteObject","assertions","iCheckDefaultUserChangedValue","check","checkReceived","userAction","Activity","Change","clientContent","iCheckDefaultUserRemovedLock","Unlock","iCheckValueIsLockedByDefaultUser","checkLockedByOther","iCheckValueIsNotLockedByDefaultUser","iCheckDefaultUserLeftDraft","Leave","iCheckDefaultUserEnteredDraft","Join","iCheckDefaultUserCreatedDocument","sDocumentPath","Create"],"sourceRoot":".","sources":["CollaborationClient.ts"],"sourcesContent":["import { Activity } from \"sap/fe/core/controllerextensions/collaboration/CollaborationCommon\";\nimport CollaborationAPI from \"sap/fe/test/api/CollaborationAPI\";\nimport type Opa5 from \"sap/ui/test/Opa5\";\nimport OpaBuilder from \"sap/ui/test/OpaBuilder\";\n\nfunction CollaborationClient(oPageDefinition: { appId: string; componentId: string }) {\n\tconst sAppId = oPageDefinition.appId,\n\t\tsComponentId = oPageDefinition.componentId,\n\t\tviewId = `${sAppId}::${sComponentId}`;\n\n\treturn {\n\t\tactions: {\n\t\t\tiEnterDraft: function (userID: string, userName: string) {\n\t\t\t\treturn OpaBuilder.create(this as any as Opa5)\n\t\t\t\t\t.hasId(viewId)\n\t\t\t\t\t.do(function (view: any) {\n\t\t\t\t\t\tconst oContext = view.getBindingContext();\n\t\t\t\t\t\tCollaborationAPI.enterDraft(oContext, userID, userName);\n\t\t\t\t\t})\n\t\t\t\t\t.viewId(\"\")\n\t\t\t\t\t.description(\"Remote session entering draft\")\n\t\t\t\t\t.execute();\n\t\t\t},\n\n\t\t\tiLeaveDraft: function () {\n\t\t\t\treturn OpaBuilder.create(this as any as Opa5)\n\t\t\t\t\t.do(function () {\n\t\t\t\t\t\tCollaborationAPI.leaveDraft();\n\t\t\t\t\t})\n\t\t\t\t\t.description(\"Remote session leaving draft\")\n\t\t\t\t\t.execute();\n\t\t\t},\n\n\t\t\tiLockPropertyForEdition: function (sPropertyPath: string) {\n\t\t\t\treturn OpaBuilder.create(this as any as Opa5)\n\t\t\t\t\t.do(function () {\n\t\t\t\t\t\tCollaborationAPI.lockField(sPropertyPath);\n\t\t\t\t\t})\n\t\t\t\t\t.description(`Remote session locking property ${sPropertyPath}`)\n\t\t\t\t\t.execute();\n\t\t\t},\n\n\t\t\tiUnlockPropertyForEdition: function () {\n\t\t\t\treturn OpaBuilder.create(this as any as Opa5)\n\t\t\t\t\t.do(function () {\n\t\t\t\t\t\tCollaborationAPI.unlockField();\n\t\t\t\t\t})\n\t\t\t\t\t.description(\"Remote session unlocking property \")\n\t\t\t\t\t.execute();\n\t\t\t},\n\n\t\t\tiUpdatePropertyValue: function (sPropertyPath: string, value: any) {\n\t\t\t\treturn OpaBuilder.create(this as any as Opa5)\n\t\t\t\t\t.do(function () {\n\t\t\t\t\t\tCollaborationAPI.updatePropertyValue(sPropertyPath, value);\n\t\t\t\t\t})\n\t\t\t\t\t.description(`Remote session updating property ${sPropertyPath} with ${value}`)\n\t\t\t\t\t.execute();\n\t\t\t},\n\n\t\t\tiDiscardDraft: function () {\n\t\t\t\treturn OpaBuilder.create(this as any as Opa5)\n\t\t\t\t\t.do(function () {\n\t\t\t\t\t\tCollaborationAPI.discardDraft();\n\t\t\t\t\t})\n\t\t\t\t\t.description(\"Remote session discarding draft\")\n\t\t\t\t\t.execute();\n\t\t\t},\n\n\t\t\tiDeleteObject: function (objectPath: string) {\n\t\t\t\treturn OpaBuilder.create(this as any as Opa5)\n\t\t\t\t\t.do(function () {\n\t\t\t\t\t\tCollaborationAPI.deleteObject(objectPath);\n\t\t\t\t\t})\n\t\t\t\t\t.description(`Remote session deleting object ${objectPath}`)\n\t\t\t\t\t.execute();\n\t\t\t}\n\t\t},\n\t\tassertions: {\n\t\t\tiCheckDefaultUserChangedValue: function (sPropertyPath: string) {\n\t\t\t\treturn OpaBuilder.create(this as any as Opa5)\n\t\t\t\t\t.check(function () {\n\t\t\t\t\t\treturn CollaborationAPI.checkReceived({\n\t\t\t\t\t\t\tuserID: \"DEFAULT_USER\",\n\t\t\t\t\t\t\tuserAction: Activity.Change,\n\t\t\t\t\t\t\tclientContent: sPropertyPath\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.description(`Remote session received change notification for${sPropertyPath} changed`)\n\t\t\t\t\t.execute();\n\t\t\t},\n\t\t\tiCheckDefaultUserRemovedLock: function (sPropertyPath: string) {\n\t\t\t\treturn OpaBuilder.create(this as any as Opa5)\n\t\t\t\t\t.check(function () {\n\t\t\t\t\t\t// Check that we have received an UNLOCK without a CHANGE\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t!CollaborationAPI.checkReceived(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tuserID: \"DEFAULT_USER\",\n\t\t\t\t\t\t\t\t\tuserAction: Activity.Change,\n\t\t\t\t\t\t\t\t\tclientContent: sPropertyPath\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t) &&\n\t\t\t\t\t\t\tCollaborationAPI.checkReceived({\n\t\t\t\t\t\t\t\tuserID: \"DEFAULT_USER\",\n\t\t\t\t\t\t\t\tuserAction: Activity.Unlock,\n\t\t\t\t\t\t\t\tclientContent: sPropertyPath\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t})\n\t\t\t\t\t.description(`Remote session received unlock without change notification for${sPropertyPath}`)\n\t\t\t\t\t.execute();\n\t\t\t},\n\t\t\tiCheckValueIsLockedByDefaultUser: function (sPropertyPath: string) {\n\t\t\t\treturn OpaBuilder.create(this as unknown as Opa5)\n\t\t\t\t\t.check(function () {\n\t\t\t\t\t\treturn CollaborationAPI.checkLockedByOther(sPropertyPath);\n\t\t\t\t\t})\n\t\t\t\t\t.description(`On remote session, property ${sPropertyPath} is currently locked by another user`)\n\t\t\t\t\t.execute();\n\t\t\t},\n\t\t\tiCheckValueIsNotLockedByDefaultUser: function (sPropertyPath: string) {\n\t\t\t\treturn OpaBuilder.create(this as unknown as Opa5)\n\t\t\t\t\t.check(function () {\n\t\t\t\t\t\treturn !CollaborationAPI.checkLockedByOther(sPropertyPath);\n\t\t\t\t\t})\n\t\t\t\t\t.description(`On remote session, property ${sPropertyPath} is not locked by another user`)\n\t\t\t\t\t.execute();\n\t\t\t},\n\t\t\tiCheckDefaultUserLeftDraft: function () {\n\t\t\t\treturn OpaBuilder.create(this as any as Opa5)\n\t\t\t\t\t.check(function () {\n\t\t\t\t\t\treturn CollaborationAPI.checkReceived({ userID: \"DEFAULT_USER\", userAction: Activity.Leave });\n\t\t\t\t\t})\n\t\t\t\t\t.description(\"Remote session received notification on default user leaving the draft session\")\n\t\t\t\t\t.execute();\n\t\t\t},\n\n\t\t\tiCheckDefaultUserEnteredDraft: function () {\n\t\t\t\treturn OpaBuilder.create(this as any as Opa5)\n\t\t\t\t\t.check(function () {\n\t\t\t\t\t\treturn CollaborationAPI.checkReceived({ userID: \"DEFAULT_USER\", userAction: Activity.Join });\n\t\t\t\t\t})\n\t\t\t\t\t.description(\"Remote session received notification on default user entering the draft session\")\n\t\t\t\t\t.execute();\n\t\t\t},\n\n\t\t\tiCheckDefaultUserCreatedDocument: function (sDocumentPath?: string) {\n\t\t\t\treturn OpaBuilder.create(this as any as Opa5)\n\t\t\t\t\t.check(function () {\n\t\t\t\t\t\treturn CollaborationAPI.checkReceived({\n\t\t\t\t\t\t\tuserID: \"DEFAULT_USER\",\n\t\t\t\t\t\t\tuserAction: Activity.Create,\n\t\t\t\t\t\t\tclientContent: sDocumentPath\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.description(\n\t\t\t\t\t\tsDocumentPath\n\t\t\t\t\t\t\t? `Remote session received create notification for ${sDocumentPath}`\n\t\t\t\t\t\t\t: \"Remote session received create notification\"\n\t\t\t\t\t)\n\t\t\t\t\t.execute();\n\t\t\t}\n\t\t}\n\t};\n}\n\nexport default CollaborationClient;\n"],"mappings":"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","ignoreList":[],"file":"CollaborationClient-dbg.js"}