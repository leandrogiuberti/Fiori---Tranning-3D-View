/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2021 SAP SE. All rights reserved
	
 */
sap.ui.define(["./FEBuilder","sap/ui/mdc/enums/FieldDisplay","sap/fe/test/Utils","sap/ui/mdc/enums/ConditionValidated"],function(e,t,n,i){"use strict";var r=/(.+?) \((.+?)\)/;function a(e,t){e=e&&[].concat(e)||[];t=t&&[].concat(t)||[];return e.every(function(e,n){return n<t.length&&(e||"")==(t[n]||"")})}function o(e,i,r,o,u){switch(e){case t.Value:return a(i,o);case t.Description:return r===undefined?a(i,u):a(r,u);case t.ValueDescription:case t.DescriptionValue:return a(i,o)&&(r===undefined||a(r,u));default:throw new Error(n.formatMessage("unsupported field display '{0}'",e))}}function u(e,i){var a={};if(n.isOfType(e,Array)){a.value=e.length>0?e[0]:null;a.description=e.length>1?e[1]:undefined}else if(n.isOfType(e,Object)){a.value=e.value;a.description=e.description}else{switch(i){case t.Description:a.value=undefined;a.description=e;break;case t.ValueDescription:case t.DescriptionValue:var o=r.exec(e);if(o){a.value=i===t.ValueDescription?o[1]:o[2];a.description=i===t.ValueDescription?o[2]:o[1];break}case t.Value:default:a.value=e;a.description=undefined}}return a}var s=function(){return e.apply(this,arguments)};s.create=function(e){return new s(e)};s.prototype=Object.create(e.prototype);s.prototype.constructor=s;s.prototype.hasValue=function(e){if(e===undefined){return this}return this.has(s.Matchers.value(e))};s.prototype.hasConditionValues=function(e,t){if(e===undefined){return this}return this.has(s.Matchers.conditionsValue(e,t))};s.prototype.doChangeValue=function(e){if(e===undefined){return this}return this.doEnterText(e)};s.prototype.getStatesMatcher=function(e){return s.Matchers.states(e)};s.prototype.doPressKeyboardShortcut=function(t){return this.do(e.Actions.keyboardShortcut(t,"input"))};s.prototype.doOpenValueHelp=function(){return this.doPressKeyboardShortcut("F4")};s.Matchers={value:function(e){return function(t){if(!t.isA("sap.ui.mdc.Field")){throw new Error("Expected sap.ui.mdc.Field but got "+t.getMetadata().getName())}var n=u(e,t.getDisplay()),i=t.getValue(),r=t.getAdditionalValue();return o(t.getDisplay(),n.value,n.description,i,r)}},conditionsValue:function(e,t){if(!n.isOfType(e,Array)){e=[e]}return function(n){var r=e.map(function(e){return u(e,n.getDisplay())}),a=n.getConditions().map(function(e){return{conditionOperator:e.operator,conditionValue:u(e.values),conditionValidated:e.validated===i.Validated}}),s=function(e){return function(i){if(t&&i.conditionOperator!==t){return false}return o(n.getDisplay(),e.value,e.description,i.conditionValue.value,i.conditionValidated?e.description:i.conditionValue.description)}};return a&&r.every(function(e){return a.some(s(e))})}},state:function(t,n){switch(t){case"content":return function(t){var i=t.getContentDisplay(),r=t.getContentEdit(),a=t.getContent(),o=(t.getAggregation("_content")||[]).concat(a||[],i||[],r||[]),u=e.Matchers.states(n);return o.some(u)};case"contentEdit":case"contentDisplay":return function(i){return e.Matchers.states(n)(i.getAggregation(t))};default:return e.Matchers.state(t,n)}},states:function(t){return e.Matchers.states(t,s.Matchers.state)}};s.Actions={};return s});
//# sourceMappingURL=MdcFieldBuilder.js.map