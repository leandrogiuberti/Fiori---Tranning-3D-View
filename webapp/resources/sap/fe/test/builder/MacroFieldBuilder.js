/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2021 SAP SE. All rights reserved
	
 */
sap.ui.define(["./FEBuilder","./MdcFieldBuilder","sap/ui/test/OpaBuilder","sap/fe/test/Utils"],function(t,e,r,s){"use strict";function a(s,a){if(s.isA("sap.ui.mdc.Field")){return e.Matchers.value(a)}if(s.isA("sap.fe.macros.controls.NumberWithUnitOrCurrency")){return function(e){const s=r.Matchers.childrenMatcher(t.create(this).hasType("sap.m.Text").hasProperties({width:"3.3em",text:a.currency||a.unit}));const n=r.Matchers.childrenMatcher(t.create(this).hasType("sap.m.Text").hasProperties({text:a.value}));return t.Matchers.match([s,n])(e)}}var n=a;if(a.value){n=a.description?a.description+" ("+a.value+")":a.value}if(s.isA("sap.m.InputBase")){return r.Matchers.properties({value:n})}if(s.isA("sap.m.ObjectIdentifier")){return r.Matchers.properties({title:n})}return r.Matchers.properties({text:n})}function n(s,a,n){if(s.isA("sap.ui.mdc.Field")){return e.Matchers.state(a,n)}else if(a==="lockedBy"){return function(e){var s=r.Matchers.childrenMatcher(t.create(this).hasType("sap.m.Avatar").hasProperties({initials:n}));return t.Matchers.match(s)(e)}}return t.Matchers.state(a,n)}function i(e){if(e.isA("sap.fe.macros.Field")){return i(e.getContent())}if(e.isA("sap.fe.core.controls.FormElementWrapper")){return i(e.getContent())}if(e.isA("sap.fe.macros.controls.FileWrapper")){return i(e.getAvatar())}if(e.isA("sap.fe.macros.controls.FieldWrapper")){if(e.getEditMode()==="Display"){return i(e.getContentDisplay())}else{return i(e.getContentEdit()[0])}}if(e.isA("sap.fe.macros.controls.ConditionalWrapper")){var s=e.getCondition()?e.getContentTrue():e.getContentFalse();return i(s)}return e.isA("sap.ui.mdc.Field")||e.isA("sap.m.Text")||e.isA("sap.m.ExpandableText")||e.isA("sap.m.Label")||e.isA("sap.m.CheckBox")||e.isA("sap.m.Link")||e.isA("sap.m.ObjectStatus")||e.isA("sap.m.InputBase")||e.isA("sap.m.Avatar")||e.isA("sap.m.ObjectIdentifier")||e.isA("sap.m.RatingIndicator")||e.isA("sap.m.ProgressIndicator")||e.isA("sap.fe.macros.controls.NumberWithUnitOrCurrency")?[e]:r.Matchers.children(r.create().hasSome(t.Matchers.state("controlType","sap.ui.mdc.Field"),t.Matchers.state("controlType","sap.m.Text"),t.Matchers.state("controlType","sap.m.ExpandableText"),t.Matchers.state("controlType","sap.m.Label"),t.Matchers.state("controlType","sap.m.CheckBox"),t.Matchers.state("controlType","sap.m.Link"),t.Matchers.state("controlType","sap.m.ObjectStatus"),t.Matchers.state("controlType","sap.m.InputBase"),t.Matchers.state("controlType","sap.m.Avatar"),t.Matchers.state("controlType","sap.m.ObjectIdentifier"),t.Matchers.state("controlType","sap.m.RatingIndicator"),t.Matchers.state("controlType","sap.m.ProgressIndicator")))(e)}var c=function(){return t.apply(this,arguments)};c.create=function(t){return new c(t)};c.prototype=Object.create(t.prototype);c.prototype.constructor=c;c.prototype.getStatesMatcher=function(t){return c.Matchers.states(t)};c.prototype.hasValue=function(t){if(t===undefined){return this}return this.has(c.Matchers.value(t))};c.prototype.do=function(e){this.has(function(t){if(!t){return null}if(!Array.isArray(t)){t=[t]}return t.reduce(function(t,e){return t.concat(i(e))},[])});return t.prototype.do.call(this,r.Actions.executor(e))};c.prototype.doOpenValueHelp=function(){return this.do(function(e){if(e.isA("sap.ui.mdc.Field")){t.Actions.keyboardShortcut("F4","input")(e)}})};c.Matchers={value:function(t){return function(e){var s=i(e);return s.some(function(e){return r.Matchers.match(a(e,t))(e)})}},empty:function(t){return t.getVisible()===false},state:function(t,e){return function(s){var a=[s].concat(i(s));return a.some(function(s){return r.Matchers.match(n(s,t,e))(s)})}},states:function(e){return t.Matchers.states(e,c.Matchers.state)}};return c});
//# sourceMappingURL=MacroFieldBuilder.js.map