/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define([],function(){"use strict";function e(e){if(e instanceof RegExp){return t=>t.match(e)!==null}else{return t=>t.includes(e)}}const t=[/library-preload\.(json|js)/,"/resources/sap/fe/macros/manifest.json"].map(e);let s=function(){function s(e){this.matchers=[];this.messages=[];this.observer=new MutationObserver(e=>{const t=e.reduce((e,t)=>{if(e!==null){return e}for(const e of Array.from(t.addedNodes)){if(e instanceof Element){const t=e.querySelector("#OpaFrame");if(t instanceof HTMLIFrameElement&&t.contentWindow){return t}}}return e},null);if(t&&t.contentWindow){this.prepareWindow(t.contentWindow)}});QUnit.moduleStart(()=>{this.observer.observe(e.document.body,{childList:true})});QUnit.moduleDone(()=>{this.observer.disconnect()});QUnit.testStart(()=>{this.reset()});QUnit.log(()=>{this.handleFailedMessages()});this.karma=e.__karma__;const t=new URLSearchParams(e.location.search);const s=t.get("strictConsoleErrors");if(s!==null){this.isStrict=s==="true"}else{this.isStrict=this.karma?.config.ui5?.config.strictconsoleerrors??false}this.reset()}var n=s.prototype;n.handleFailedMessages=function e(){const t=this.messages;this.messages=[];if(t.length>0){QUnit.assert.pushResult({result:false,source:"FE Console Log Check",message:`There were ${t.length} unexpected console errors`,actual:t,expected:[]})}};n.reset=function e(){this.messages=[];if(this.isStrict){this.matchers=t}else{this.matchers=[()=>true]}};n.setAcceptedErrorPatterns=function s(n){if(!n||n.length===0){this.matchers=t}else{this.matchers=n.map(e).concat(t)}};n.checkAndLog=function e(t){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++){n[r-1]=arguments[r]}if(t==="error"){const e=n[0];const t=this.matchers.some(t=>t(e));if(!t){this.messages.push(e)}}if(this.karma){const e=n.map(e=>[e]);this.karma.log(t,e)}};n.prepareWindow=function e(t){var s=this;const n=t.console;const r=e=>{const t=n[e];n[e]=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++){o[i]=arguments[i]}s.checkAndLog(e,...o);return t.apply(n,o)}};r("log");r("debug");r("info");r("warn");r("error");n.assert=function(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(e){return}const t="Assertion failed";for(var s=arguments.length,r=new Array(s>1?s-1:0),o=1;o<s;o++){r[o-1]=arguments[o]}if(r.length===0){r.push(t)}else{let e=r[0];if(typeof e!=="string"){r.unshift(t)}else{e=`${t}: ${e}`;r[0]=e}}n.error(...r)};function o(e){const t=`UNHANDLED PROMISE REJECTION: ${e.reason}`;this.checkAndLog("error",t,e.reason?.stack)}function i(e){const t=e.message;this.checkAndLog("error",t,e.filename)}t.addEventListener("error",i.bind(this),{passive:true});t.addEventListener("unhandledrejection",o.bind(this),{passive:true})};s.getInstance=function e(t){if(!t.sapFEConsoleErrorChecker){t.sapFEConsoleErrorChecker=new s(t)}return t.sapFEConsoleErrorChecker};return s}();return s.getInstance(window)},false);
//# sourceMappingURL=ConsoleErrorChecker.js.map