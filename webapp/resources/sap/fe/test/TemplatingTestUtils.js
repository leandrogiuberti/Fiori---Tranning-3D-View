/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2021 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/model/odata/v4/ODataMetaModel","sap/ui/core/util/XMLPreprocessor","sap/ui/core/XMLTemplateProcessor","sap/fe/macros/macroLibrary","sap/fe/core/TemplateModel","sap/ui/base/Object"],function(e,t,n,i,s,r){"use strict";function o(o,a,c,u,f,l,d){var m="./test/",p={read:function(){return Promise.resolve(c)},mHeaders:{}},b=new e(p,m+"$metadata",undefined,null);i.unregister();if(f){i.register()}function g(e,n,i,o){var a={models:Object.assign({},o),bindingContexts:{}};Object.keys(i).forEach(function(t){var n=o[t]||b;if(!r.isObjectA(n,"sap.ui.model.Model")&&!r.isObjectA(n,"sap.ui.model.odata.v4.ODataMetaModel")){n=new s(n,b)}e.ok(typeof n.getObject(i[t])!=="undefined",t+": "+i[t]+" exists");a.bindingContexts[t]=n.createBindingContext(i[t]);a.models[t]=n});if(a.models["this"]){a.bindingContexts["this"]=a.models["this"].createBindingContext("/")}return Promise.resolve(t.process(n,{},a))}o.module("Smoke Tests for "+a);o.test("Check if metadata is available",function(e){return Promise.all([b.requestObject("/").then(function(t){e.ok(t,"Entity Container found")}),b.requestObject("/$").then(function(t){e.ok(t,"Metadata Document found")})])});var h;function O(e){e.fileType=e.fileType||"fragment";o.module("Tests for "+a+" against "+e.fileType+" "+e.sFragmentName+(e.sDescription?" ("+e.sDescription+")":""),{beforeEach:function(){if(l){h=d.stub(l,"getText").callsFake(function(e){if(e==="T_NEW_OBJECT"){return"New Object"}else{return"Unnamed Object"}})}},afterEach:function(){if(h){h.restore()}}});e.tests.forEach(function(t,i){o.test(t.description||"Test "+e.fileType+" scope: "+i,function(i){return b.requestObject("/$").then(function(){return n.loadTemplatePromise(e.sFragmentName,e.fileType)}).then(function(n){return g(i,n,t.mBindingContexts,Object.assign({},e.mModels,t.mModels))}).then(function(e){var n=[].filter.call(e.ownerDocument.querySelectorAll("*"),o),s,r=0;function o(e){return e.getAttribute("unittest:id")!==null}function a(e,t,n){function s(s){if(t[s]===undefined){i.ok(!e.hasAttribute(s),'unittest:id="'+n+"\": attribute '"+s+"' is expected not to be rendered")}else{var r=e.getAttribute(s);i.strictEqual(r,t[s],'unittest:id="'+n+"\": attribute '"+s+"' properly created as "+r)}}if(t){r++;Object.keys(t).forEach(s)}}n.forEach(c);function c(e){s=e.getAttribute("unittest:id");a(e,t.oExpectedResultsPerTest[s],s)}i.equal(r,Object.keys(t.oExpectedResultsPerTest).length,"All tests have been executed for this test case")}).catch(function(e){var n=t.sExpectedException;if(e&&n){i.strictEqual(e.message||e,n,"expected exception occurred: "+n)}else{throw e}})})})}u.forEach(O)}return{testFragments:o}});
//# sourceMappingURL=TemplatingTestUtils.js.map