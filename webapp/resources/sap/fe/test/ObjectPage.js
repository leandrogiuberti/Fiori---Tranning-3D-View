/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2021 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/base/util/merge","./TemplatePage","sap/ui/test/OpaBuilder","sap/ui/test/Opa5","sap/fe/test/Utils","sap/fe/test/builder/FEBuilder","sap/fe/test/builder/MacroFieldBuilder","sap/fe/test/builder/OverflowToolbarBuilder","sap/fe/test/api/FooterActionsOP","sap/fe/test/api/FooterAssertionsOP","sap/fe/test/api/HeaderActions","sap/fe/test/api/HeaderAssertions","sap/fe/test/api/FormActions","sap/fe/test/api/FormAssertions","sap/ui/core/Lib"],function(e,t,i,n,r,s,a,o,c,u,p,h,l,d,f){"use strict";function g(e,t){return t?"fe::table::"+e.split("/").join("::")+"::LineItem::"+t:"fe::table::"+e.split("/").join("::")+"::LineItem"}function m(e){return"fe::Chart::"+e+"::Chart"}function T(e,t){return o.create(e).hasId(t.id)}function x(e,t){return s.create(e).hasId(t.id)}function S(e,t){var n=s.create(e);if(r.isOfType(t,String)){n.hasType("sap.uxap.ObjectPageSubSection");n.hasProperties({title:t})}else if(t.fieldGroupId){n.hasId(t.fieldGroupId);if(t.fullSubSectionId){n.has(i.Matchers.ancestor(t.fullSubSectionId,false))}}else{n.hasId(t.id)}return n}function b(e,t){var n,a;if(!r.isOfType(e,String)){if(typeof e.section==="string"&&!e.subSection){a=e.section==="EditableHeaderSection"?"fe::"+e.section+"-anchor":t+"::"+e.section+"-anchor";n=i.Matchers.children(s.Matchers.id(new RegExp(r.formatMessage("{0}$",a))))}else{throw new Error("not supported section and subsection parameters for creating a control id: "+e.section+"/"+e.subSection)}}else{n=i.Matchers.children(s.Matchers.states({controlType:"sap.m.IconTabFilter",text:e}))}return n}function y(e,t){var i,n=e==="EditableHeaderSection"?"fe::"+e+"-anchor":t+"::"+e+"-anchor";i=s.Matchers.id(new RegExp(r.formatMessage("{0}$",n)));return i}function M(e){var t;t=s.Matchers.states({text:e});return t}function C(e,t){var n,a=t+"::"+e+"-anchor";n=i.Matchers.aggregationMatcher("items",s.Matchers.id(new RegExp(r.formatMessage("{0}$",a))));return n}function P(e,t){var i,n=t+"::"+e+"-anchor-expandIcon";i=s.Matchers.id(new RegExp(r.formatMessage("{0}$",n)));return i}function I(){var e;e=s.Matchers.id(new RegExp("fe::ObjectPage-anchBar-.+verflow$"));return e}function k(e,t){if(!e){throw new Error("vMenuAction parameter missing")}var i=t+"::"+e+"-anchor-unifiedmenu";return s.create().hasType("sap.m.MenuItem").hasId(new RegExp(r.formatMessage("{0}$",i))).doPress().description(r.formatMessage("Executing action '{0}' from currently open action menu",e))}function E(e,t,i,n){var a=s.create(e).hasType(n);if(r.isOfType(t,String)){a.hasProperties({title:t})}else if(t.section){a.hasId(i+"::"+t.section)}else{throw new Error("section or sub-section parameters not supported for creating a control id: "+t)}return a}function O(e,t,i){return E(e,t,i,"sap.uxap.ObjectPageSection")}function v(e,t,i){return E(e,t,i,"sap.uxap.ObjectPageSubSection")}function w(n,o){var b=n.appId,C=n.componentId,k=b+"::"+C,E=k+"--fe::ObjectPage",w="fe::HeaderFacet",L="fe::ObjectPage-OPHeaderContent",F=k+"--fe::HeaderContentContainer",B="fe::FooterBar::_fc",D="fe::FacetSection",_="fe::FacetSubSection",A="fe::Form",j="fe::FormContainer",N="fe::HeaderFacet::FormContainer",G=k+"--fe::Breadcrumbs",H="fe::ObjectPage-anchBar",V="fe::Paginator",R="EditableHeaderForm::EditableHeaderTitle",W={DISPLAY:"Display",EDITABLE:"Editable"},$=f.getResourceBundleFor("sap.fe.core"),Q=Array.prototype.slice.call(arguments,1);return t.apply(t,[k,{actions:{onTable:function(e){if(!r.isOfType(e,String)&&!e.id){e={id:g(e.property,e.qualifier)}}return this._onTable(e)},onChart:function(e){var t;if(e){t=!r.isOfType(e,String)?m(e.property):e}return this._onChart({id:t})},onFilterBar:function(e){var t=typeof e==="string"?{id:e}:e;return this._onFilterBar(t)},onFooter:function(){return new c(T(this,{id:B}),{id:B})},onHeader:function(){return new p(x(this,{id:E}),{id:E,headerId:w,headerContentId:L,headerContentContainerId:F,viewId:k,paginatorId:V,breadCrumbId:G})},onForm:function(e){if(!r.isOfType(e,String)){if(e.section){e.id=_+"::"+e.section;e.fullSubSectionId=k+"--"+e.id}if(e.fieldGroup){e.fieldGroupId=e.isHeaderFacet?N+"::"+e.fieldGroup:j+"::"+e.fieldGroup}}return new l(S(this,e),e)},iCollapseExpandPageHeader:function(e){return this._iCollapseExpandPageHeader(e)},iClickQuickViewMoreLinksButton:function(){return i.create(this).hasType("sap.m.Button").has(i.Matchers.resourceBundle("text","sap.ui.mdc","info.POPOVER_DEFINE_LINKS")).doPress().description("Pressing 'More Links' button").execute()},iClickQuickViewCancelButton:function(){return i.create(this).hasType("sap.m.Button").has(i.Matchers.resourceBundle("text","sap.ui.mdc","p13nDialog.CANCEL")).doPress().description("Pressing Quickview 'Cancel' button").execute()},iClickQuickViewTitleLink:function(e){return i.create(this).hasType("sap.m.Link").isDialogElement(true).hasProperties({text:e}).doPress().description("Navigating via quickview title link '"+e+"'").execute()},iClickLinkWithText:function(e){return i.create(this).hasType("sap.m.Link").hasProperties({text:e}).doPress().description("Navigating via link '"+e+"'").execute()},iClickObjectStatus:function(e){return i.create(this).hasType("sap.m.ObjectStatus").hasProperties({text:e}).doPress().description("Press Object Status '"+e+"'").execute()},iCheckLinksCount:function(e){return i.create(this).hasType("sap.m.ColumnListItem").check(function(t){if(t.length===e){return true}else{return false}},true).description("Seeing QuickView Card with "+e+" target applications in ObjectPage").execute()},iEnableLink:function(e){var t=s.Matchers.deepAggregationMatcher("cells/items/items",[i.Matchers.properties({text:e})]);return i.create(this).hasType("sap.m.ColumnListItem").has(t).doPress("selectMulti").description("The CheckBox for link "+e+" is selected").execute()},iPressKeyboardShortcutOnSection:function(e,t){return this._iPressKeyboardShortcut(undefined,e,t,"sap.uxap.ObjectPageSection")},iGoToSection:function(e){var t=function(e,t){var i=t+"::"+e+"-anchor-expandIcon";s.create(this).hasId(new RegExp(r.formatMessage("{0}$",i))).doPress().description(r.formatMessage("Pressing drop-down icon for section '{0}'",e)).execute()},n=function(e,i){s.create(this).hasType("sap.ui.core.Icon").doConditional(P(e,i),function(n){t(e,i)}).description(r.formatMessage("Checking for section icon '{0}'",e)).execute()},a=function(e,t){var i=t+"::"+e+"-anchor-__clone";s.create(this).hasId(new RegExp(r.formatMessage("{0}.+",i))).doPress().description(r.formatMessage("Pressing sub-section by id: '{0}'",e)).execute()},o=function(e){var t="fe::"+e;s.create(this).hasType("sap.m.IconTabFilter").hasId(new RegExp(r.formatMessage("{0}.+",t))).doPress().description("Pressing editable header section").execute()},c=function(e){i.create(this).hasType("sap.m.IconTabFilter").hasProperties({text:e}).doPress().description(r.formatMessage("Pressing section by text: '{0}'",e)).execute()},u=function(){i.create(this).hasType("sap.m.IconTabFilter").hasId(new RegExp("fe::ObjectPage-anchBar-.+verflow$")).doPress().description("Pressing Overflow button").execute()};var p;if(r.isOfType(e,Object)){p=y(e.section,D)}else{p=M(e)}var h=false,l=false;return i.create(this).hasType("sap.m.IconTabFilter").doConditional(p,function(i){if(!l){if(r.isOfType(e,Object)){if(e.section==="EditableHeaderSection"){o(e.section)}else{t(e.section,D);a(e.subSection,_)}}else{c(e)}h=true}}).doConditional(I(),function(t){if(!h){u();if(r.isOfType(e,Object)){if(e.section==="EditableHeaderSection"){o(e.section)}else{n(e.section,D);a(e.subSection,_)}}else{c(e)}l=true}}).description("Switching section anchorBar").execute()},iOpenSectionWithTitle:function(e){return i.create(this).timeout(1).check(function(){return false}).error("Test function iOpenSectionWithTitle() is deprecated - please use function iGoToSection() with the same parameters").execute()},iClickOnSectionWithTitle:function(e){i.create(this).hasType("sap.m.IconTabFilter").hasProperties({text:e}).doPress().description(r.formatMessage("Clicking section with title: '{0}'",e)).execute()},iEnterValueForFieldInEditableHeader:function(e){return a.create(this).hasId(k+"--fe::"+R).doEnterText(e).description("Entering '"+e+" in field ").execute()},iClickOnMessageButton:function(){return i.create(this).hasType("sap.fe.macros.messages.MessageButton").doPress().description("Clicked on Message Button").execute()},iCheckMessageButtonTooltip:function(e){return i.create(this).hasType("sap.fe.macros.messages.MessageButton").check(function(t){return t[0].getTooltip()===e},true).description("Checking tooltip of MessageButton").execute()},iClickOnMessage:function(e){return i.create(this).hasType("sap.m.MessageListItem").hasProperties({title:e.MessageText}).isDialogElement(true).description("MessageItem with correct text and group label").doOnChildren(i.create(this).hasType("sap.m.Link").hasProperties({text:e.MessageText}).doPress().description("Click on the message")).execute()},iClickBackOnMessageView:function(){return i.create(this).hasType("sap.m.MessageView").isDialogElement(true).doOnChildren(i.create(this).hasType("sap.m.Button").hasProperties({icon:"sap-icon://nav-back"}).doPress().description("Click on the message view back")).execute()}},assertions:{onTable:function(e){if(!r.isOfType(e,String)&&!e.id){e={id:g(e.property,e.qualifier)}}return this._onTable(e)},onChart:function(e){var t;if(e){t=!r.isOfType(e,String)?m(e.property):e}return this._onChart({id:t})},onFilterBar:function(e){var t=typeof e==="string"?{id:e}:e;return this._onFilterBar(t)},onFooter:function(){return new u(T(this,{id:B}),{id:B})},onHeader:function(){return new h(x(this,{id:E}),{id:E,headerId:w,headerContentId:L,headerContentContainerId:F,viewId:k,paginatorId:V,breadCrumbId:G})},onForm:function(e){if(!r.isOfType(e,String)){if(e.section){e.id=_+"::"+e.section;e.fullSubSectionId=k+"--"+e.id}if(e.fieldGroup){e.fieldGroupId=e.isHeaderFacet?N+"::"+e.fieldGroup:j+"::"+e.fieldGroup}}return new d(S(this,e),e)},iSeeMessageButton:function(e,t){var n={Error:{type:"Negative"},Warning:{type:"Critical"},Information:{type:"Neutral"}};return i.create(this).hasType("sap.fe.macros.messages.MessageButton").hasProperties({text:t,type:n[e]["type"]}).description("Messagebutton is visible with "+n[e]["type"]+" button type").execute()},iSeeLinkWithText:function(e){return i.create(this).hasType("sap.m.Link").hasProperties({text:e}).description("Seeing link with text '"+e+"'").execute()},iSeeTextWithText:function(e){return i.create(this).hasType("sap.m.Text").hasProperties({text:e}).description("Seeing Text with text '"+e+"'").execute()},iSeeBetterLinkWithText:function(e){return i.create(this).hasType("sap.fe.macros.controls.TextLink").hasProperties({text:e}).description("Seeing Text with text '"+e+"'").execute()},iSeeTitleWithText:function(e){return i.create(this).hasType("sap.m.Title").hasProperties({text:e}).description("Seeing Title with text '"+e+"'").execute()},iSeeContactDetailsPopover:function(e){return i.create(this).hasType("sap.ui.mdc.link.Panel").description("Contact card with title '"+e+"' is present").execute()},iSeeContactPopoverWithAvatarImage:function(e){return i.create(this).hasType("sap.ui.mdc.link.Panel").check(function(t){var i=t.some(function(t){return t.src===e});return i===false},true).description("Seeing Contact Card with Avatar Image in ObjectPage").execute()},iSeeQuickViewMoreLinksButton:function(){return i.create(this).isDialogElement(true).hasType("sap.m.Button").has(i.Matchers.resourceBundle("text","sap.ui.mdc","info.POPOVER_DEFINE_LINKS")).description("The 'More Links' button found").execute()},iSeeObjectPageInDisplayMode:function(){return this._iSeeObjectPageInMode(W.DISPLAY)},iSeeObjectPageInEditMode:function(){return this._iSeeObjectPageInMode(W.EDITABLE)},_iSeeObjectPageInMode:function(e){return i.create(this).hasId(k).viewId(null).has(function(t){return t.getModel("ui").getProperty("/editMode")===e}).description("Object Page is in mode '"+e+"'").execute()},iCheckSection:function(e,t){var i=O(this,e,D);return i.hasState(t).description(r.formatMessage("Checking section '{0}' having state='{1}'",e,t)).execute()},iSeeSectionWithTitle:function(e){return this.iCheckSection(e,{visible:true})},iCheckNumberOfSections:function(e){return s.create(this).hasId(H).hasAggregationLength("items",e).description(r.formatMessage("Object Page contains the expected number of {0} sections",e)).execute()},iCheckSubSection:function(e,t){var i=v(this,e,_);return i.hasState(t).description(r.formatMessage("Checking sub-section '{0}' having state='{1}'",e,t)).execute()},iSeeSubSectionWithTitle:function(e){return this.iCheckSubSection(e,{visible:true})},iSeeSectionButtonWithTitle:function(t,n){return s.create(this).hasId(H).has(i.Matchers.children(s.Matchers.states(e({},{controlType:"sap.m.Button",text:t},n)))).description(r.formatMessage("Seeing section button with title '{0}' and state='{1}'",t,n)).execute()},iSeeFlpLink:function(e){return i.create(this).hasType("sap.m.Link").isDialogElement(true).hasProperties({text:e}).description("FLP link with text '"+e+"' is present").execute()},iSeeLabel:function(e){return i.create(this).hasType("sap.m.Label").hasProperties({text:e}).description("Label '"+e+"' is present").execute()},iSeeSimpleFormWithLabel:function(e){return i.create(this).hasType("sap.m.Label").isDialogElement(true).hasProperties({text:e}).description("SimpleForm has label '"+e+"' is present").execute()},iSeeSimpleFormWithText:function(e){return i.create(this).hasType("sap.ui.layout.form.SimpleForm").isDialogElement(true).doOnChildren(i.create(this).hasType("sap.m.Text").hasProperties({text:e})).description("SimpleForm has text '"+e+"' is present").execute()},iSeeSimpleFormWithLink:function(e){return i.create(this).hasType("sap.ui.layout.form.SimpleForm").isDialogElement(true).doOnChildren(i.create(this).hasType("sap.m.Link").hasProperties({text:e})).description("SimpleForm has link '"+e+"' is present").execute()},iSeeSimpleFormWithTitle:function(e){return i.create(this).hasSome(s.Matchers.state("controlType","sap.m.Title"),s.Matchers.state("controlType","sap.ui.core.Title")).isDialogElement(true).hasProperties({text:e}).description("SimpleForm has label '"+e+"' is present").execute()},iSeeGridWithLabel:function(e){return i.create(this).hasType("sap.ui.layout.Grid").isDialogElement(true).doOnChildren(i.create(this).hasType("sap.m.Label").hasProperties({text:e})).description("Grid Layout has label '"+e+"' is present").execute()},iSeeSelectLinksDialog:function(){return i.create(this).hasType("sap.m.Title").isDialogElement(true).has(i.Matchers.resourceBundle("text","sap.ui.mdc","info.SELECTION_DIALOG_ALIGNEDTITLE")).description("Seeing dialog open").execute()},iDoNotSeeFlpLink:function(e){return i.create(this).hasType("sap.m.Link").isDialogElement(true).check(function(t){var i=t.some(function(t){return t.getText()===e});return i===false},true).description("FLP link with text '"+e+"' is not found").execute()},iSeeTextInQuickViewForm:function(e){return i.create(this).hasType("sap.m.Text").isDialogElement(true).hasProperties({text:e}).description("Seeing label with text '"+e+"'").execute()},iSeeCreateConfirmation:function(){return this._iSeeTheMessageToast($.getText("C_TRANSACTION_HELPER_OBJECT_CREATED"))},iSeeSaveConfirmation:function(){return this._iSeeTheMessageToast($.getText("C_TRANSACTION_HELPER_OBJECT_SAVED"))},iSeeDeleteConfirmation:function(){return this._iSeeTheMessageToast($.getText("C_TRANSACTION_HELPER_DELETE_TOAST_SINGULAR"))},iSeeConfirmMessageBoxWithTitle:function(e){return i.create(this).hasType("sap.m.Dialog").isDialogElement(true).hasProperties({title:e}).description("Seeing Message dialog open").execute()},iSeeMoreFormContent:function(e){return i.create(this).hasId(A+"::"+e+"::MoreContent").description("Seeing More Form Content in "+e).execute()},iDoNotSeeMoreFormContent:function(e){return i.create(this).hasType("sap.ui.layout.form.Form").check(function(t){var i=t.some(function(t){return t.getId().includes(e+"::MoreContent")});return i===false}).description("Not Seeing More Form Content in "+e).execute()},iSeeControlVMTableTitle:function(e,t){return i.create(this).hasType("sap.m.Title").hasId(g(t)+"::VM-vm-text").hasProperties({text:e}).description("Seeing variant title '"+e+"'").execute()},iSeeMessageView:function(){return i.create(this).hasType("sap.m.MessageView").isDialogElement(true).description("MessageView is visible").execute()},iCheckMessageItemsOrder:function(e){return i.create(this).hasType("sap.m.MessageView").check(function(t){var i=t[0].getItems();var n=[];if(e instanceof Array){n=e}else{Object.keys(e).forEach(function(t){n.push(e[t])})}return i[0].getGroupName()===n[0].GroupLabel&&i[1].getGroupName()===n[1].GroupLabel&&i[0].getTitle()===n[0].MessageText&&i[1].getTitle()===n[1].MessageText},true).isDialogElement(true).description("MessageItems are correctly ordered").execute()},iCheckMessageItemProperties:function(e,t){return i.create(this).hasType("sap.m.MessageView").check(function(i){var n=i[0].getItems();var r=n[t].getGroupName()===e.GroupLabel&&n[t].getTitle()===e.MessageText&&n[t].getSubtitle()===e.SubTitle&&n[t].getActiveTitle()===e.ActiveTitle;if(e.Description){return r&&n[t].getGroupName()===e.GroupLabel}return r},true).isDialogElement(true).description("MessageItem is correctly displayed").execute()},iCheckVisibilityOfButtonWithText:function(e,t){return i.create(this).hasType("sap.m.Button").mustBeVisible(t).hasProperties({text:e,visible:t}).description("Button '"+e+"' is "+(t?"visible":"NOT visible")).execute()},iCheckFieldVisibilityInMassEditDialog:function(e,t){return i.create(this).isDialogElement().hasType("sap.m.ComboBox").check(function(i){var n=i.some(function(t){return t.getId()===e});return n===t}).description("Checking visibility of field in mass edit dialog").execute()}}}].concat(Q))}return w});
//# sourceMappingURL=ObjectPage.js.map