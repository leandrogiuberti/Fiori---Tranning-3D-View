/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/ui/model/odata/v4/ODataModel"],function(t){"use strict";var e={};const n=window?.opener?.$fe??window?.$fe;let o;let r;let i;const s=function(t){let e=t;while(e){if(e.isA("sap.ui.core.mvc.View")){const t=e.getViewData();return t?.contextPath||"/"+t?.entitySet}else if(e.isA("sap.fe.macros.Field")){return e.contextPath+"/"+e.mainPropertyRelativePath}else if(e.isA("sap.m.Button")){const t=e.getCustomData()?.find(t=>t.getKey()==="annotatedActionIdentifier")?.getValue();if(t){return t.split("::")[1].split(".").pop()}}else if(e.isA("sap.fe.macros.table.TableAPI")){return e.metaPath.split("/@")[0]}e=e.getParent()}return};const a=async function(e){const o=n.supportModel;const a=e.getModel();if(!a){return}o.setProperty("/supportLinksStateText","Loading...");let p=a.getServiceUrl();if(!p.startsWith("/")){const t=new URL(p);p=t.pathname}if(!r){const e=new URLSearchParams(window.location.search).get("useBackendUrl");let n="";if(e){const t=new URL(e);n=`/databinding/proxy/${t.protocol.replace(":","")}/${t.hostname}:${t.port}`}const s=a.getMetaModel();const c=s.getObject("/@com.sap.vocabularies.Support.v1.TechnicalInfoLinks");if(!c){o.setProperty("/supportLinksStateText","Service links not implemented for this application");return}const l=new URL(c.Url,`http://dummy${p}`).pathname;const u=l.replace(/\/\$metadata$/,"/");r=new t({serviceUrl:`${n}${u}`});try{await r.getMetaModel().requestObject("/")}catch(t){o.setProperty("/supportLinksStateText","System/Application does not provide service implementation information");return}i=c.FunctionImport}if(!i){return}const c=s(e);if(c){const t=r.bindContext(`/${i}(...)`);const e=c.split("/").join("_");const n=o.getProperty("/cachedSupportLinks/"+e);if(n){o.setProperty("/supportLinks",n)}else{t.setParameter("ServiceRoot",p);t.setParameter("EdmPath",c.replace(/^\//,""));try{await t.execute("$auto");const n=t.getBoundContext().getObject().value;for(const t of n){if(t.Url?.startsWith("../")){t.Url=new URL(t.Url,`http://dummy${r.getServiceUrl()}`).pathname}}o.setProperty("/supportLinks",n);o.setProperty("/cachedSupportLinks/"+e,n)}catch(t){o.setProperty("/supportLinks",[]);o.setProperty("/supportLinksStateText","Failed to load service implementation links");return}}}o.setProperty("/supportLinksStateText","No service implementation links were found")};e.loadSupportLinks=a;const p=function(t){const e=(t,e)=>function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++){r[i]=arguments[i]}if(o!==undefined){clearTimeout(o)}o=window.setTimeout(()=>{t(...r)},e)};const n=e(a,500);n(t)};e.loadSupportLinksForElement=p;return e},false);
//# sourceMappingURL=SupportLinks.js.map