{"version":3,"file":"Inspector.js","names":["onMouseOver","e","target","closestUI5Elt","closest","isLocked","style","outline","inspector","showElement","UI5Element","getElementById","getAttribute","onKeyDown","ctrlKey","lastTarget","window","$fe","supportModel","getProperty","preventDefault","stopPropagation","stopImmediatePropagation","onMouseDown","onMouseClick","onMouseOut","isInspecting","toggleElementInspector","textRef","document","addEventListener","localInspector","showInspector","ui5Control","removeAllContent","addContent","_jsx","CodeEditor","type","height","value","serializeControlAsXML","removeEventListener","_exports","subInspector","Panel","width","headerText","expanded","children","content","Text","text","popup","Popup","open","Dock","EndBottom"],"sources":["./Inspector.tsx"],"sourcesContent":["import { serializeControlAsXML } from \"sap/fe/tools/XMLSerializer\";\nimport Panel from \"sap/m/Panel\";\nimport Text from \"sap/m/Text\";\nimport CodeEditor from \"sap/ui/codeeditor/CodeEditor\";\nimport UI5Element from \"sap/ui/core/Element\";\nimport Popup from \"sap/ui/core/Popup\";\n\nfunction onMouseOver(e: MouseEvent): void {\n\tconst target = e.target as HTMLElement | null;\n\tif (target) {\n\t\tconst closestUI5Elt = target.closest(\"[data-sap-ui]\");\n\t\tif (closestUI5Elt && !isLocked) {\n\t\t\t(closestUI5Elt as HTMLElement).style.outline = \"2px auto rebeccapurple\";\n\t\t\tinspector?.showElement(UI5Element.getElementById(closestUI5Elt.getAttribute(\"data-sap-ui\"))!);\n\t\t}\n\t}\n}\nfunction onKeyDown(e: KeyboardEvent): void {\n\tif (e.ctrlKey) {\n\t\tisLocked = !isLocked;\n\t\tif (isLocked) {\n\t\t\tconst target = e.target as HTMLElement | null;\n\t\t\tif (target) {\n\t\t\t\tconst closestUI5Elt = target.closest(\"[data-sap-ui]\");\n\t\t\t\tif (closestUI5Elt) {\n\t\t\t\t\t(closestUI5Elt as HTMLElement).style.outline = \"3px auto red\";\n\t\t\t\t\tlastTarget = closestUI5Elt as HTMLElement;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (lastTarget) {\n\t\t\tlastTarget.style.outline = \"none\";\n\t\t}\n\t\t// @ts-ignore\n\t\tif (window.$fe.supportModel.getProperty(\"/preventInteraction\")) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\t}\n}\nfunction onMouseDown(e: MouseEvent): void {\n\tisLocked = !isLocked;\n\tif (isLocked) {\n\t\tconst target = e.target as HTMLElement | null;\n\t\tif (target) {\n\t\t\tconst closestUI5Elt = target.closest(\"[data-sap-ui]\");\n\t\t\tif (closestUI5Elt) {\n\t\t\t\t(closestUI5Elt as HTMLElement).style.outline = \"3px auto red\";\n\t\t\t\tlastTarget = closestUI5Elt as HTMLElement;\n\t\t\t}\n\t\t}\n\t} else if (lastTarget) {\n\t\tlastTarget.style.outline = \"none\";\n\t}\n\t// @ts-ignore\n\tif (window.$fe.supportModel.getProperty(\"/preventInteraction\")) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\te.stopImmediatePropagation();\n\t}\n}\nfunction onMouseClick(e: MouseEvent): void {\n\t// @ts-ignore\n\tif (window.$fe.supportModel.getProperty(\"/preventInteraction\")) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\te.stopImmediatePropagation();\n\t}\n}\nfunction onMouseOut(e: MouseEvent): void {\n\tconst target = e.target as HTMLElement | null;\n\tif (target && !isLocked) {\n\t\tconst closestUI5Elt = target.closest(\"[data-sap-ui]\");\n\t\tif (closestUI5Elt) {\n\t\t\t(closestUI5Elt as HTMLElement).style.outline = \"none\";\n\t\t}\n\t}\n}\nlet lastTarget: HTMLElement | null;\nlet isInspecting = false;\nlet isLocked = false;\nlet inspector: { showElement: (ui5Control: UI5Element) => void } | null = null;\nexport function toggleElementInspector(textRef: { showElement: (ui5Control: UI5Element) => void } | null): void {\n\tif (!isInspecting) {\n\t\tisInspecting = true;\n\t\tdocument.addEventListener(\"keydown\", onKeyDown);\n\t\tdocument.addEventListener(\"mousedown\", onMouseDown);\n\t\tdocument.addEventListener(\"mouseover\", onMouseOver);\n\t\tdocument.addEventListener(\"click\", onMouseClick);\n\t\tdocument.addEventListener(\"mouseout\", onMouseOut);\n\t\tif (!textRef) {\n\t\t\tconst localInspector = showInspector();\n\t\t\tinspector = {\n\t\t\t\tshowElement: function (ui5Control: UI5Element): void {\n\t\t\t\t\tlocalInspector.removeAllContent();\n\t\t\t\t\tlocalInspector.addContent(<CodeEditor type=\"XML\" height={\"500px\"} value={serializeControlAsXML(ui5Control)} />);\n\t\t\t\t}\n\t\t\t};\n\t\t} else {\n\t\t\tinspector = textRef;\n\t\t}\n\t} else {\n\t\tdocument.removeEventListener(\"keydown\", onKeyDown);\n\t\tdocument.removeEventListener(\"mousedown\", onMouseDown);\n\t\tdocument.removeEventListener(\"mouseover\", onMouseOver);\n\t\tdocument.removeEventListener(\"click\", onMouseClick);\n\t\tdocument.removeEventListener(\"mouseout\", onMouseOut);\n\t\tisInspecting = false;\n\t}\n}\n\nfunction showInspector(): Panel {\n\tconst subInspector: Panel = (\n\t\t<Panel width=\"500px\" headerText=\"UI5 Element Inspector\" expanded={true}>\n\t\t\t{{\n\t\t\t\tcontent: <Text text=\"Hover over an element to inspect it\" />\n\t\t\t}}\n\t\t</Panel>\n\t);\n\tconst popup = new Popup(subInspector);\n\tpopup.open(Popup.Dock.EndBottom, Popup.Dock.EndBottom);\n\treturn subInspector;\n}\n"],"mappings":"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","ignoreList":[]}