{"version":3,"names":["onMouseOver","e","target","closestUI5Elt","closest","isLocked","style","outline","inspector","showElement","UI5Element","getElementById","getAttribute","onKeyDown","ctrlKey","lastTarget","window","$fe","supportModel","getProperty","preventDefault","stopPropagation","stopImmediatePropagation","onMouseDown","onMouseClick","onMouseOut","isInspecting","toggleElementInspector","textRef","document","addEventListener","localInspector","showInspector","ui5Control","removeAllContent","addContent","_jsx","CodeEditor","type","height","value","serializeControlAsXML","removeEventListener","_exports","subInspector","Panel","width","headerText","expanded","children","content","Text","text","popup","Popup","open","Dock","EndBottom"],"sourceRoot":".","sources":["Inspector.tsx"],"sourcesContent":["import { serializeControlAsXML } from \"sap/fe/tools/XMLSerializer\";\nimport Panel from \"sap/m/Panel\";\nimport Text from \"sap/m/Text\";\nimport CodeEditor from \"sap/ui/codeeditor/CodeEditor\";\nimport UI5Element from \"sap/ui/core/Element\";\nimport Popup from \"sap/ui/core/Popup\";\n\nfunction onMouseOver(e: MouseEvent): void {\n\tconst target = e.target as HTMLElement | null;\n\tif (target) {\n\t\tconst closestUI5Elt = target.closest(\"[data-sap-ui]\");\n\t\tif (closestUI5Elt && !isLocked) {\n\t\t\t(closestUI5Elt as HTMLElement).style.outline = \"2px auto rebeccapurple\";\n\t\t\tinspector?.showElement(UI5Element.getElementById(closestUI5Elt.getAttribute(\"data-sap-ui\"))!);\n\t\t}\n\t}\n}\nfunction onKeyDown(e: KeyboardEvent): void {\n\tif (e.ctrlKey) {\n\t\tisLocked = !isLocked;\n\t\tif (isLocked) {\n\t\t\tconst target = e.target as HTMLElement | null;\n\t\t\tif (target) {\n\t\t\t\tconst closestUI5Elt = target.closest(\"[data-sap-ui]\");\n\t\t\t\tif (closestUI5Elt) {\n\t\t\t\t\t(closestUI5Elt as HTMLElement).style.outline = \"3px auto red\";\n\t\t\t\t\tlastTarget = closestUI5Elt as HTMLElement;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (lastTarget) {\n\t\t\tlastTarget.style.outline = \"none\";\n\t\t}\n\t\t// @ts-ignore\n\t\tif (window.$fe.supportModel.getProperty(\"/preventInteraction\")) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\t}\n}\nfunction onMouseDown(e: MouseEvent): void {\n\tisLocked = !isLocked;\n\tif (isLocked) {\n\t\tconst target = e.target as HTMLElement | null;\n\t\tif (target) {\n\t\t\tconst closestUI5Elt = target.closest(\"[data-sap-ui]\");\n\t\t\tif (closestUI5Elt) {\n\t\t\t\t(closestUI5Elt as HTMLElement).style.outline = \"3px auto red\";\n\t\t\t\tlastTarget = closestUI5Elt as HTMLElement;\n\t\t\t}\n\t\t}\n\t} else if (lastTarget) {\n\t\tlastTarget.style.outline = \"none\";\n\t}\n\t// @ts-ignore\n\tif (window.$fe.supportModel.getProperty(\"/preventInteraction\")) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\te.stopImmediatePropagation();\n\t}\n}\nfunction onMouseClick(e: MouseEvent): void {\n\t// @ts-ignore\n\tif (window.$fe.supportModel.getProperty(\"/preventInteraction\")) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\te.stopImmediatePropagation();\n\t}\n}\nfunction onMouseOut(e: MouseEvent): void {\n\tconst target = e.target as HTMLElement | null;\n\tif (target && !isLocked) {\n\t\tconst closestUI5Elt = target.closest(\"[data-sap-ui]\");\n\t\tif (closestUI5Elt) {\n\t\t\t(closestUI5Elt as HTMLElement).style.outline = \"none\";\n\t\t}\n\t}\n}\nlet lastTarget: HTMLElement | null;\nlet isInspecting = false;\nlet isLocked = false;\nlet inspector: { showElement: (ui5Control: UI5Element) => void } | null = null;\nexport function toggleElementInspector(textRef: { showElement: (ui5Control: UI5Element) => void } | null): void {\n\tif (!isInspecting) {\n\t\tisInspecting = true;\n\t\tdocument.addEventListener(\"keydown\", onKeyDown);\n\t\tdocument.addEventListener(\"mousedown\", onMouseDown);\n\t\tdocument.addEventListener(\"mouseover\", onMouseOver);\n\t\tdocument.addEventListener(\"click\", onMouseClick);\n\t\tdocument.addEventListener(\"mouseout\", onMouseOut);\n\t\tif (!textRef) {\n\t\t\tconst localInspector = showInspector();\n\t\t\tinspector = {\n\t\t\t\tshowElement: function (ui5Control: UI5Element): void {\n\t\t\t\t\tlocalInspector.removeAllContent();\n\t\t\t\t\tlocalInspector.addContent(<CodeEditor type=\"XML\" height={\"500px\"} value={serializeControlAsXML(ui5Control)} />);\n\t\t\t\t}\n\t\t\t};\n\t\t} else {\n\t\t\tinspector = textRef;\n\t\t}\n\t} else {\n\t\tdocument.removeEventListener(\"keydown\", onKeyDown);\n\t\tdocument.removeEventListener(\"mousedown\", onMouseDown);\n\t\tdocument.removeEventListener(\"mouseover\", onMouseOver);\n\t\tdocument.removeEventListener(\"click\", onMouseClick);\n\t\tdocument.removeEventListener(\"mouseout\", onMouseOut);\n\t\tisInspecting = false;\n\t}\n}\n\nfunction showInspector(): Panel {\n\tconst subInspector: Panel = (\n\t\t<Panel width=\"500px\" headerText=\"UI5 Element Inspector\" expanded={true}>\n\t\t\t{{\n\t\t\t\tcontent: <Text text=\"Hover over an element to inspect it\" />\n\t\t\t}}\n\t\t</Panel>\n\t);\n\tconst popup = new Popup(subInspector);\n\tpopup.open(Popup.Dock.EndBottom, Popup.Dock.EndBottom);\n\treturn subInspector;\n}\n"],"mappings":"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","ignoreList":[],"file":"Inspector-dbg.js"}