{"version":3,"file":"XMLSerializer.js","names":["nameSpaceMap","macro","macros","feBB","macroField","macrodata","log","customData","control","controls","core","dt","m","f","fl","internalMacro","mdc","actiontoolbar","mdcField","mdcTable","u","uxap","macroMicroChart","microChart","macroTable","mdcvc","mdcv","valueHelp","contentSwitcher","filterBar","draftIndicator","visualFilter","reveseNamespaceMap","Object","keys","reduce","reverseMap","currentName","escapeXMLAttributeValue","value","replace","_exports","serializeObject","objectType","maxDepth","arguments","length","undefined","out","map","key","filter","val","join","serializeControlAsXML","controlToSerialize","showCustomStyleClasses","asString","tabCount","UID","CONTROLID","definedNamespaces","getNamespaceAlias","className","namesSplit","split","namespace","slice","namespaceAlias","toLowerCase","getTab","toAdd","tab","i","serializeDelegate","start","sAggregationName","controlDetail","getParent","indexInParent","getAggregation","indexOf","nameFull","getMetadata","getName","name","end","hasAggregation","mAggregations","getAllAggregations","mAggregationsKey","controlAggregation","_sGetter","Array","isArray","getBindingPath","getBindingInfo","template","middle","id","getId","data","mProperties","concat","mBindingInfos","mAssociations","mEventRegistry","sort","a","b","localeCompare","uniqueKeys","Set","from","oControlKey","hasOwnProperty","bindingDetail","bindingString","type","oOutputFormat","binding","propertyValue","e","associationValue","associationValueElement","fFunction","aCustomStyleClasses","startAggregation","sName","startsWith","substring","endAggregation","outXML","controlToRender","Serializer","serialize","xmlString","parser","DOMParser","parseFromString","firstElementChild","outerHTML","async","serializeControlAsFormattedXML","ui5ControlOrBB","serialized"],"sources":["./XMLSerializer.tsx"],"sourcesContent":["import type ManagedObject from \"sap/ui/base/ManagedObject\";\nimport type Control from \"sap/ui/core/Control\";\nimport type UI5Element from \"sap/ui/core/Element\";\n// @ts-ignore\nimport Serializer from \"sap/ui/core/util/serializer/Serializer\";\n\nconst nameSpaceMap: Record<string, string> = {\n\tmacro: \"sap.fe.macros\",\n\tmacros: \"sap.fe.macros\",\n\tfeBB: \"sap.fe.core.buildingBlocks.templating\",\n\tmacroField: \"sap.fe.macros.field\",\n\tmacrodata: \"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\",\n\tlog: \"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\",\n\tcustomData: \"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\",\n\tcontrol: \"sap.fe.core.controls\",\n\tcontrols: \"sap.fe.macros.controls\",\n\tcore: \"sap.ui.core\",\n\tdt: \"sap.ui.dt\",\n\tm: \"sap.m\",\n\tf: \"sap.ui.layout.form\",\n\tfl: \"sap.ui.fl\",\n\tinternalMacro: \"sap.fe.macros.internal\",\n\tmdc: \"sap.ui.mdc\",\n\tactiontoolbar: \"sap.ui.mdc.actiontoolbar\",\n\tmdcField: \"sap.ui.mdc.field\",\n\tmdcTable: \"sap.ui.mdc.table\",\n\tu: \"sap.ui.unified\",\n\tuxap: \"sap.uxap\",\n\tmacroMicroChart: \"sap.fe.macros.microchart\",\n\tmicroChart: \"sap.suite.ui.microchart\",\n\tmacroTable: \"sap.fe.macros.table\",\n\tmdcvc: \"sap.ui.mdc.valuehelp.content\",\n\tmdcv: \"sap.ui.mdc.valuehelp\",\n\tvalueHelp: \"sap.fe.macros.valueHelp\",\n\tcontentSwitcher: \"sap.fe.macros.contentSwitcher\",\n\tfilterBar: \"sap.fe.macros.filterBar\",\n\tdraftIndicator: \"sap.fe.macros.draftIndicator\",\n\tvisualFilter: \"sap.fe.macros.visualFilters\"\n};\nconst reveseNamespaceMap = Object.keys(nameSpaceMap).reduce((reverseMap: Record<string, string>, currentName) => {\n\treverseMap[nameSpaceMap[currentName]] = currentName;\n\treturn reverseMap;\n}, {});\n\nexport function escapeXMLAttributeValue(value?: string): string | undefined {\n\treturn value?.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&apos;\");\n}\n\nfunction serializeObject(objectType: object, maxDepth: int = 3): string | undefined {\n\tif (maxDepth == 0) return undefined;\n\tif (!objectType) {\n\t\treturn undefined;\n\t}\n\tconst keys = Object.keys(objectType);\n\tconst out: string[] = keys.map((key) => {\n\t\tconst value: never = objectType[key as keyof typeof objectType] as unknown as never;\n\t\tif (typeof value === \"function\") {\n\t\t\treturn \"\";\n\t\t} else if (typeof value === \"object\") {\n\t\t\treturn `${key}: ${serializeObject(value, maxDepth - 1)}`;\n\t\t} else {\n\t\t\treturn `${key}: ${value}`;\n\t\t}\n\t});\n\treturn out.filter((val) => val.length).join(\", \");\n}\nexport function serializeControlAsXML(\n\tcontrolToSerialize?: UI5Element | UI5Element[],\n\tshowCustomStyleClasses = false,\n\tasString = false\n): string {\n\tlet tabCount = 0;\n\tconst UID = /uid--id-\\d{13}-\\d{1,3}/;\n\tconst CONTROLID = /id-\\d{13}-\\d{1,3}/;\n\tconst definedNamespaces: Record<string, boolean> = {};\n\n\tfunction getNamespaceAlias(className: string): string {\n\t\tconst namesSplit = className.split(\".\");\n\t\tconst namespace = namesSplit.slice(0, -1);\n\t\tlet namespaceAlias = namespace[namespace.length - 1];\n\t\tif (reveseNamespaceMap[namespace.join(\".\")]) {\n\t\t\tnamespaceAlias = reveseNamespaceMap[namespace.join(\".\")];\n\t\t}\n\t\tif (namespaceAlias === undefined) {\n\t\t\tnamespaceAlias = \"test\";\n\t\t}\n\t\treturn namespaceAlias.toLowerCase();\n\t}\n\n\tfunction getTab(toAdd = 0): string {\n\t\tlet tab = \"\";\n\t\tfor (let i = 0; i < tabCount + toAdd; i++) {\n\t\t\ttab += \"\\t\";\n\t\t}\n\t\treturn tab;\n\t}\n\tconst serializeDelegate = {\n\t\tstart: function (control: Control, sAggregationName: string): string {\n\t\t\tlet controlDetail = \"\";\n\t\t\tif (sAggregationName) {\n\t\t\t\tif (control.getParent()) {\n\t\t\t\t\tconst indexInParent = (control.getParent()!.getAggregation(sAggregationName) as ManagedObject[])?.indexOf?.(control);\n\t\t\t\t\tif (indexInParent > 0) {\n\t\t\t\t\t\tcontrolDetail += `\\n${getTab()}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst nameFull = control.getMetadata().getName();\n\t\t\tconst namesSplit = nameFull.split(\".\");\n\t\t\tconst name = namesSplit[namesSplit.length - 1];\n\t\t\tconst namespaceAlias = getNamespaceAlias(nameFull);\n\t\t\tcontrolDetail += `<${namespaceAlias}:${name}\\n`;\n\t\t\t//if (!definedNamespaces[namespaceAlias]) {\n\t\t\tdefinedNamespaces[namespaceAlias] = true;\n\t\t\tcontrolDetail += `${getTab()}xmlns:${namespaceAlias}=\"${nameSpaceMap[namespaceAlias]}\"`;\n\t\t\t//}\n\t\t\treturn controlDetail;\n\t\t},\n\t\tend: function (control: any): string {\n\t\t\tconst nameFull = control.getMetadata().getName();\n\t\t\tconst namesSplit = nameFull.split(\".\");\n\t\t\tconst name = namesSplit[namesSplit.length - 1];\n\t\t\tconst namespaceAlias = getNamespaceAlias(nameFull);\n\t\t\tlet hasAggregation = false;\n\t\t\tconst mAggregations = control.getMetadata().getAllAggregations();\n\t\t\tfor (const mAggregationsKey in mAggregations) {\n\t\t\t\tconst controlAggregation = control[mAggregations[mAggregationsKey]._sGetter]();\n\t\t\t\tif (\n\t\t\t\t\t(!Array.isArray(controlAggregation) && controlAggregation !== null && controlAggregation !== undefined) ||\n\t\t\t\t\t(Array.isArray(controlAggregation) && controlAggregation.length > 0)\n\t\t\t\t) {\n\t\t\t\t\thasAggregation = true;\n\t\t\t\t}\n\t\t\t\tif (control.getBindingPath(mAggregationsKey) && control.getBindingInfo(mAggregationsKey).template) {\n\t\t\t\t\thasAggregation = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hasAggregation) {\n\t\t\t\treturn `</${namespaceAlias}:${name}>`;\n\t\t\t} else {\n\t\t\t\treturn `/>`;\n\t\t\t}\n\t\t},\n\t\tmiddle: function (control: any): string {\n\t\t\tlet id = control.getId();\n\t\t\tid = typeof id === \"string\" ? id?.replace?.(CONTROLID, \"id\") : id;\n\t\t\tlet data = \"\";\n\t\t\t//if (!ManagedObjectMetadata.isGeneratedId(id)) {\n\t\t\tdata = ` id=\"${id}\"`;\n\t\t\t//}\n\t\t\tlet keys = Object.keys(control.mProperties)\n\t\t\t\t.concat(Object.keys(control.mBindingInfos))\n\t\t\t\t.concat(Object.keys(control.mAssociations))\n\t\t\t\t.concat(Object.keys(control.mEventRegistry));\n\t\t\tkeys = keys.sort((a, b) => a.localeCompare(b));\n\t\t\tconst uniqueKeys = new Set(keys);\n\t\t\tkeys = Array.from(uniqueKeys);\n\t\t\tfor (const oControlKey of keys) {\n\t\t\t\tif (oControlKey !== \"id\") {\n\t\t\t\t\tif (control.mBindingInfos.hasOwnProperty(oControlKey)) {\n\t\t\t\t\t\tconst bindingDetail = { ...control.mBindingInfos[oControlKey] };\n\t\t\t\t\t\tif (bindingDetail.bindingString) {\n\t\t\t\t\t\t\tdata += `\\n${getTab()}${oControlKey}=\"${escapeXMLAttributeValue(bindingDetail.bindingString)}\"`;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (bindingDetail.type?.oOutputFormat) {\n\t\t\t\t\t\t\t\tdelete bindingDetail.type.oOutputFormat;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (bindingDetail.binding) {\n\t\t\t\t\t\t\t\tdelete bindingDetail.binding;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (bindingDetail.template) {\n\t\t\t\t\t\t\t\tdelete bindingDetail.template;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdata += `\\n${getTab()}${oControlKey}='${escapeXMLAttributeValue(serializeObject(bindingDetail))}'`;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (control.mProperties.hasOwnProperty(oControlKey) && control.mProperties[oControlKey] !== undefined) {\n\t\t\t\t\t\tlet propertyValue = control.mProperties[oControlKey];\n\t\t\t\t\t\tpropertyValue = typeof propertyValue === \"string\" ? propertyValue?.replace?.(UID, \"uid--id\") : propertyValue;\n\t\t\t\t\t\tpropertyValue = typeof propertyValue === \"string\" ? propertyValue?.replace?.(CONTROLID, \"id\") : propertyValue;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tpropertyValue =\n\t\t\t\t\t\t\t\ttypeof propertyValue === \"object\"\n\t\t\t\t\t\t\t\t\t? escapeXMLAttributeValue(serializeObject(propertyValue))\n\t\t\t\t\t\t\t\t\t: escapeXMLAttributeValue(propertyValue);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t// Stringify may fail for circular references but it's not the end of the world\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdata += `\\n${getTab()} ${oControlKey}=\"${propertyValue}\"`;\n\t\t\t\t\t} else if (control.mAssociations.hasOwnProperty(oControlKey)) {\n\t\t\t\t\t\tlet associationValue = control.mAssociations[oControlKey];\n\t\t\t\t\t\tif (!Array.isArray(associationValue)) {\n\t\t\t\t\t\t\tassociationValue = [associationValue];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tassociationValue = associationValue.map((associationValueElement: string) => {\n\t\t\t\t\t\t\treturn typeof associationValueElement === \"string\"\n\t\t\t\t\t\t\t\t? associationValueElement?.replace?.(CONTROLID, \"id\")\n\t\t\t\t\t\t\t\t: associationValueElement;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdata += `\\n${getTab()} ${oControlKey}=\"${(associationValue?.join?.(\",\") ?? associationValue) || undefined}\"`;\n\t\t\t\t\t} else if (control.mEventRegistry.hasOwnProperty(oControlKey)) {\n\t\t\t\t\t\tif (control.mEventRegistry[oControlKey][0]?.fFunction?.name) {\n\t\t\t\t\t\t\tdata += `\\n${getTab()} ${oControlKey}=\"${control.mEventRegistry[oControlKey][0]?.fFunction?.name}\"`;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdata += `\\n${getTab()} ${oControlKey}=\"someEventHandler\"`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (showCustomStyleClasses && control.aCustomStyleClasses?.length > 0) {\n\t\t\t\tdata += `\\n${getTab()} customStyleClasses : ${control.aCustomStyleClasses.join(\", \")}`;\n\t\t\t}\n\t\t\tdata += `\\n`;\n\t\t\tlet hasAggregation = false;\n\t\t\tconst mAggregations = control.getMetadata().getAllAggregations();\n\t\t\tfor (const mAggregationsKey in mAggregations) {\n\t\t\t\tconst controlAggregation = control[mAggregations[mAggregationsKey]._sGetter]();\n\t\t\t\tif (\n\t\t\t\t\t(!Array.isArray(controlAggregation) && controlAggregation !== null && controlAggregation !== undefined) ||\n\t\t\t\t\t(Array.isArray(controlAggregation) && controlAggregation.length > 0)\n\t\t\t\t) {\n\t\t\t\t\thasAggregation = true;\n\t\t\t\t}\n\t\t\t\tif (control.getBindingPath(mAggregationsKey) && control.getBindingInfo(mAggregationsKey).template) {\n\t\t\t\t\thasAggregation = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hasAggregation) {\n\t\t\t\tdata += \">\";\n\t\t\t}\n\t\t\treturn data;\n\t\t},\n\t\tstartAggregation: function (control: Control, sName: string): string {\n\t\t\tconst namespaceAlias = getNamespaceAlias(control.getMetadata().getName());\n\t\t\tif (sName.startsWith(\"$\")) {\n\t\t\t\tsName = sName.substring(1);\n\t\t\t}\n\t\t\tlet out = `\\n${getTab()}<${namespaceAlias}:${sName}>`;\n\t\t\ttabCount++;\n\t\t\tout += `\\n${getTab()}`;\n\t\t\treturn out;\n\t\t},\n\t\tendAggregation: function (control: any, sName: string): string {\n\t\t\ttabCount--;\n\t\t\tif (sName.startsWith(\"$\")) {\n\t\t\t\tsName = sName.substring(1);\n\t\t\t}\n\t\t\tconst namespaceAlias = getNamespaceAlias(control.getMetadata().getName());\n\t\t\tif (control.mBindingInfos[sName]) {\n\t\t\t\treturn `\\n${getTab()}</${namespaceAlias}:${sName}>\\n`;\n\t\t\t} else {\n\t\t\t\treturn `\\n${getTab()}</${namespaceAlias}:${sName}>\\n`;\n\t\t\t}\n\t\t}\n\t};\n\tlet outXML;\n\tif (Array.isArray(controlToSerialize)) {\n\t\toutXML = controlToSerialize.map((controlToRender: UI5Element) => {\n\t\t\treturn new Serializer(controlToRender, serializeDelegate).serialize();\n\t\t});\n\t} else {\n\t\toutXML = new Serializer(controlToSerialize, serializeDelegate).serialize();\n\t}\n\tif (asString) {\n\t\treturn Array.isArray(outXML) ? outXML.join(\"\\n\") : outXML;\n\t}\n\tconst xmlString = `<root>${outXML}</root>`;\n\tconst parser = new DOMParser();\n\treturn parser.parseFromString(xmlString, \"text/xml\").firstElementChild?.firstElementChild?.outerHTML ?? \"No Content\";\n}\n\nexport async function serializeControlAsFormattedXML(ui5ControlOrBB: UI5Element): Promise<string> {\n\tconst serialized = serializeControlAsXML(ui5ControlOrBB);\n\treturn serialized;\n}\n"],"mappings":"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","ignoreList":[]}