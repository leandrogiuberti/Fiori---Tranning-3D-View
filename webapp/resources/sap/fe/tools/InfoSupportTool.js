/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/tools/SupportLinks","sap/fe/tools/XMLSerializer","sap/m/Button","sap/m/CheckBox","sap/m/CustomListItem","sap/m/HBox","sap/m/IconTabBar","sap/m/IconTabFilter","sap/m/Label","sap/m/Link","sap/m/List","sap/m/MessageBox","sap/m/StandardListItem","sap/m/Text","sap/m/Toolbar","sap/m/VBox","sap/ui/codeeditor/CodeEditor","sap/ui/core/HTML","sap/ui/core/ResizeHandler","sap/ui/layout/form/SimpleForm","./BuildingBlockTab","sap/fe/base/jsx-runtime/jsx","sap/fe/base/jsx-runtime/jsxs"],function(e,t,o,n,s,r,i,a,c,l,d,p,g,m,h,u,f,x,y,C,P,M,S,B){"use strict";var b=M.addBuildingBlockTab;var I=M.addBBInfo;var k=o.serializeControlAsFormattedXML;var L=t.loadSupportLinksForElement;let T;const _=S(x,{syntaxHints:false,type:"XML"});const w=S(n,{enabled:false,text:"Select an item to see it's parent",press:function(){R(T?.getParent())}});const D=window?.opener?.$fe??window?.$fe;const j=S(p,{items:"{/data}",mode:"SingleSelectMaster",class:"feRequestList",selectionChange:function(e){const t=e.getParameter("listItem");if(t){const e=t.getBindingContext()?.getObject();this.getModel().setProperty("/selectedItem",e);const o=D.createdCaches[e.trace];const n=[];if(o){Object.keys(o.mChangeListeners).forEach(e=>{n.push({key:e,count:o.mChangeListeners[e].length})});this.getModel().setProperty("/odataPropsToControl",n);this.getModel().setProperty("/currentCache",o)}}},children:{items:S(m,{title:"{urlBase}",description:"{request/method}",info:"#{trace}"})}});const v=S(a,{expanded:true,children:{items:[B(c,{text:"Service Implementation",children:[S(p,{items:"{/supportLinks}",noData:"{/supportLinksStateText}",children:S(r,{children:S(d,{text:"{Text}",href:"{Url}",target:"linkContent",class:"sapUiTinyMargin"})})}),S(y,{content:'<iframe name="linkContent" width="99%" height="85%"/>'})]},"supportLinks"),B(c,{text:"Control Tree",children:[S(f,{renderType:"Bare",children:{items:[S(u,{children:{content:[S(s,{text:"Prevent interaction",selected:"{/preventInteraction}"}),S(n,{text:"Send to Console",press:function(){D["$"+D.controlIndex]=T;g.alert("Control sent to console as $fe.$"+D.controlIndex);D.controlIndex++}}),w]}}),_]}}),";"]},"tree"),S(c,{text:"Control Properties"},"properties"),S(c,{text:"Control State",children:S(p,{items:"{/state}",children:S(m,{title:"{key}",description:"{value}"})})},"state"),B(c,{text:"OData Requests",children:[S(n,{press:function(){this.getModel().setProperty("/data",[])},text:"Clear All"}),S(i,{height:"100%",class:"feRequestHBox",children:{items:[j,B(f,{width:"100%",children:[S(n,{text:"Highlight related controls",press:function(){const t=this.getModel().getProperty("/selectedItem").trace;const o=D.createdCaches[t].__feBinding.getDependentBindings();o.forEach(t=>{try{if(t.__feSource&&t.closestDomRef){t.closestDomRef.style.outline="3px auto green"}}catch(t){e.info("Error while highlighting dependent bindings",t)}})}}),B(P,{children:[S(l,{text:"Method"}),S(h,{text:"{/selectedItem/request/method}"}),S(l,{text:"URL"}),S(h,{text:"{/selectedItem/urlBase}"}),S(l,{text:"Parameters"}),S(x,{value:"{/selectedItem/parameters}",type:"json",editable:true,height:"200px"}),S(l,{text:"Data"}),S(x,{value:"{/selectedItem/responseBody}",type:"json",editable:true,height:"300px"}),S(l,{text:"Data Tree"})]})]})]}})]},"requests"),S(c,{text:"OData Properties > Controls",children:S(i,{children:{items:[S(p,{items:"{/odataPropsToControl}",mode:"SingleSelectMaster",selectionChange:function(e){const t=e.getParameter("listItem");if(t){const e=t.getBindingContext()?.getObject();const o=this.getModel().getProperty("/currentCache");const n=o.mChangeListeners[e.key];const s=[];const r={};for(const e of n){const t=e.__feSource.getMetadata().getName()+" #"+e.__feSource.getId();const o=e.__feForProp;r[t+"_"+o]??={key:t,prop:o,count:0,control:e.__feSource};r[t+"_"+o].count++}Object.keys(r).forEach(e=>{s.push(r[e])});this.getModel().setProperty("/selectedOdataPropControls",s)}},children:S(m,{title:"{key}",description:"{count}"})}),S(p,{items:"{/selectedOdataPropControls}",mode:"SingleSelectMaster",selectionChange:function(e){const t=e.getParameter("listItem");if(t){const e=t.getBindingContext()?.getObject();R(e.control)}},children:S(m,{title:"{key}",description:"Used #{count}",info:"Property: {prop}"})})]}})},"state")],content:[]}});v.placeAt("sapUiSupportBody");v.setModel(D.supportModel);b(v);C.register(document.querySelector("body"),()=>{_?.setHeight(window.innerHeight-120+"px")});const R=async function(e){_.setHeight(window.innerHeight-120+"px");if(T&&T.getDomRef()){T.getDomRef().style.outline="none"}T=e;w.setEnabled(!!T?.getParent());w.setText("Parent "+T?.getParent()?.getMetadata().getName());if(e.getDomRef()){e.getDomRef().style.outline="3px auto red"}const t=await k(e);_.setValue(t);I(e);const o=[];if(e.getModel("$componentState")){const t=e.getModel("$componentState").getData();for(const e in t){const n=t[e];if(e!=="__boundProperties"){o.push({key:e,value:n})}}}_.getModel().setProperty("/state",o);L(e)};D.toggleElementInspector({showElement:R})},false);
//# sourceMappingURL=InfoSupportTool.js.map