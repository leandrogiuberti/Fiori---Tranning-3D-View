{"version":3,"file":"Chart.js","names":["getChartActionsFromAnnotations","chartAnnotation","visualizationPath","converterContext","chartActions","Actions","forEach","dataField","key","KeyHelper","generateKeyFromDataField","isDataFieldForActionAbstract","Inline","Determining","$Type","ActionTarget","isBound","push","type","ActionType","DataFieldForAction","annotationPath","getEntitySetBasedAnnotationPath","fullyQualifiedName","visible","getCompileExpressionForAction","isAIOperation","isActionAIOperation","undefined","DataFieldForIntentBasedNavigation","isNavigable","isAnnotationActionGroup","Menu","text","Label","toString","menu","map","action","getDataFieldAnnotationAction","isMenuAIOperation","getChartActions","aAnnotationActions","manifestActions","getActionsFromManifest","getManifestControlConfiguration","actions","actionOverwriteConfig","enabled","OverrideType","overwrite","enableOnSelect","command","position","group","priority","insertCustomElements","commandActions","_exports","getP13nMode","manifestWrapper","getManifestWrapper","chartManifestSettings","variantManagement","getVariantManagement","aPersonalization","personalization","chartSettings","isControlVariant","VariantManagementType","Control","item","sort","filter","join","getHeaderInfo","header","headerVisible","getSelectionMode","selectionMode","getAggregatablePropertiesObject","aggProp","obj","Property","$PropertyPath","value","name","createChartVisualization","doNotCheckApplySupported","selectionPresentationVariantPath","aggregationHelper","AggregationHelper","getEntityType","isAnalyticsSupported","Error","aTransAggregations","getTransAggregations","aCustomAggregates","getCustomAggregateDefinitions","pageManifestSettings","p13nMode","Log","warning","mCustomAggregates","entityType","customAggregate","aContextDefiningProperties","annotations","Aggregation","ContextDefiningProperties","qualifier","relatedCustomAggregateProperty","entityProperties","find","property","label","Common","sortable","mTransAggregations","oResourceBundleCore","Library","getResourceBundleFor","element","Name","propertyPath","AggregatableProperty","aggregationMethod","AggregationMethod","getText","custom","aAggProps","getAggregatableProperties","aGrpProps","getGroupableProperties","mApplySupported","AggregatableProperties","GroupableProperties","prop","navigationPropertyPath","split","lastIndexOf","length","substring","title","Title","dataModelPath","getDataModelObjectPath","isEntitySet","entityName","targetEntitySet","startingEntitySet","sFilterbarId","getFilterBarID","getContextPath","oVizProperties","plotArea","window","start","end","legendGroup","layout","tooltip","formatString","autoBindOnInit","getTemplateType","TemplateType","ObjectPage","ListReport","AnalyticalListPage","hasMultipleVisualizations","onSegmentedButtonPressed","allowedTransformations","getAllowedTransformations","enableSearch","includes","isInsightsVisible","getInsightsVisibility","isParameterizedEntitySet","getParameterEntityType","isInsightsEnabled","and","getInsightsEnablement","chartDimensionKeyAndRole","DimensionAttributes","dimensionAttribute","Dimension","Role","chartMeasureKeyAndRole","MeasureAttributes","measureAttribute","Measure","containsTransAggInMeasures","getAggregatedProperties","Measures","some","measure","VisualizationType","Chart","id","getChartID","collection","getTargetObjectPath","apiId","generate","navigationPath","getAbsoluteAnnotationPath","filterId","vizProperties","JSON","stringify","customAgg","transAgg","applySupported","findVariantManagement","containsAggregatedProperty","getAggregatedProperty","None","createChartVisualizationForTemplating","visualization","compileExpression","not","equal","getExpressionFromAnnotation","UI","Hidden","getRelativeModelPathFunction","createBlankChartVisualization","multiViews"],"sources":["./Chart.ts"],"sourcesContent":["import type { Property, PropertyPath } from \"@sap-ux/vocabularies-types\";\nimport type { AggregatablePropertyType, AggregationMethod } from \"@sap-ux/vocabularies-types/vocabularies/Aggregation\";\nimport { AggregationAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/Aggregation\";\nimport type {\n\tChart,\n\tDataFieldAbstractTypes,\n\tDataFieldForActionGroup,\n\tDataFieldForActionGroupTypes,\n\tDataFieldForActionTypes\n} from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { UIAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport type { CompiledBindingToolkitExpression } from \"sap/fe/base/BindingToolkit\";\nimport { and, compileExpression, equal, getExpressionFromAnnotation, not, type BindingToolkitExpression } from \"sap/fe/base/BindingToolkit\";\nimport type { PageContextPathTarget } from \"sap/fe/core/converters/TemplateConverter\";\nimport { isDataFieldForActionAbstract } from \"sap/fe/core/converters/annotations/DataField\";\nimport type {\n\tAnnotationAction,\n\tAnnotationActionActionGroup,\n\tBaseAction,\n\tCombinedAction,\n\tCustomAction,\n\tOverrideTypeAction\n} from \"sap/fe/core/converters/controls/Common/Action\";\nimport { getActionsFromManifest, isActionAIOperation, isMenuAIOperation } from \"sap/fe/core/converters/controls/Common/Action\";\nimport { OverrideType, insertCustomElements } from \"sap/fe/core/converters/helpers/ConfigurableObject\";\nimport { KeyHelper } from \"sap/fe/core/converters/helpers/Key\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { getTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport Library from \"sap/ui/core/Lib\";\nimport type { ExpandPathType } from \"../../../../../../../../../types/metamodel_types\";\nimport type ConverterContext from \"../../ConverterContext\";\nimport type { ChartManifestConfiguration, ManifestAction } from \"../../ManifestSettings\";\nimport { ActionType, TemplateType, VariantManagementType, VisualizationType } from \"../../ManifestSettings\";\nimport type ManifestWrapper from \"../../ManifestWrapper\";\nimport { AggregationHelper } from \"../../helpers/Aggregation\";\nimport { getChartID, getFilterBarID } from \"../../helpers/ID\";\nimport { getInsightsEnablement, getInsightsVisibility } from \"../../helpers/InsightsHelpers\";\nimport type { ActualVisualizationAnnotations } from \"./DataVisualization\";\n\nexport type ChartApplySupported = {\n\t$Type: string;\n\tenableSearch?: boolean;\n\tAggregatableProperties?: (ExpandPathType<PropertyPath> & { Property: ExpandPathType<PropertyPath> })[];\n\tGroupableProperties?: (ExpandPathType<PropertyPath> & { Property: ExpandPathType<PropertyPath> })[];\n};\nexport type ChartTemplateVisualization = {\n\ttype: VisualizationType.Chart;\n\tid: string;\n\tapiId: string;\n\tentityName: string;\n\tcollection: string;\n\tannotationPath: string;\n\tapplySupported: ChartApplySupported;\n\tisParameterizedEntitySet?: boolean;\n};\n\n/**\n * @typedef ChartVisualization\n */\nexport type ChartVisualization = ChartTemplateVisualization & {\n\tentityName: string;\n\tpersonalization?: string | boolean;\n\tnavigationPath: string;\n\tfilterId?: string;\n\tvizProperties: string;\n\tactions: BaseAction[];\n\tcommandActions: Record<string, CustomAction>;\n\ttitle: string | undefined;\n\tautoBindOnInit: boolean | undefined;\n\tonSegmentedButtonPressed: string;\n\tvisible: string;\n\tcustomAgg: object;\n\ttransAgg: object;\n\tmultiViews?: boolean;\n\tvariantManagement: VariantManagementType;\n\tselectionPresentationVariantPath?: string;\n\tisInsightsEnabled?: BindingToolkitExpression<boolean>;\n\tisInsightsVisible?: BindingToolkitExpression<boolean>;\n\theader?: string;\n\theaderVisible?: boolean;\n\tselectionMode?: string;\n\tchartDimensionKeyAndRole?: object;\n\tchartMeasureKeyAndRole?: object;\n\tcontainsAggregatedProperty?: boolean;\n\tcontainsTransAggInMeasures?: boolean;\n};\n\nexport type ChartP13nType = string | boolean | undefined;\n\n/**\n * Method to retrieve all chart actions from annotations.\n * @param chartAnnotation\n * @param visualizationPath\n * @param converterContext\n * @returns The chart actions from the annotation\n */\nfunction getChartActionsFromAnnotations(\n\tchartAnnotation: Chart,\n\tvisualizationPath: string,\n\tconverterContext: ConverterContext<PageContextPathTarget>\n): Array<AnnotationAction | AnnotationActionActionGroup> {\n\tconst chartActions: Array<AnnotationAction | AnnotationActionActionGroup> = [];\n\tif (chartAnnotation?.Actions) {\n\t\tchartAnnotation.Actions.forEach((dataField: DataFieldAbstractTypes | DataFieldForActionGroupTypes) => {\n\t\t\tconst key = KeyHelper.generateKeyFromDataField(dataField);\n\t\t\tif (isDataFieldForActionAbstract(dataField) && !dataField.Inline && !dataField.Determining) {\n\t\t\t\tswitch (dataField.$Type) {\n\t\t\t\t\tcase UIAnnotationTypes.DataFieldForAction:\n\t\t\t\t\t\tif (dataField.ActionTarget && !dataField.ActionTarget.isBound) {\n\t\t\t\t\t\t\tchartActions.push({\n\t\t\t\t\t\t\t\ttype: ActionType.DataFieldForAction,\n\t\t\t\t\t\t\t\tannotationPath: converterContext.getEntitySetBasedAnnotationPath(dataField.fullyQualifiedName),\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tvisible: getCompileExpressionForAction(dataField, converterContext),\n\t\t\t\t\t\t\t\tisAIOperation: isActionAIOperation(dataField) === true || undefined\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase UIAnnotationTypes.DataFieldForIntentBasedNavigation:\n\t\t\t\t\t\tchartActions.push({\n\t\t\t\t\t\t\ttype: ActionType.DataFieldForIntentBasedNavigation,\n\t\t\t\t\t\t\tannotationPath: converterContext.getEntitySetBasedAnnotationPath(dataField.fullyQualifiedName),\n\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\tvisible: getCompileExpressionForAction(dataField, converterContext),\n\t\t\t\t\t\t\tisNavigable: true\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (isAnnotationActionGroup(dataField)) {\n\t\t\t\tchartActions.push({\n\t\t\t\t\ttype: ActionType.Menu,\n\t\t\t\t\ttext: dataField.Label?.toString(),\n\t\t\t\t\tvisible: getCompileExpressionForAction(dataField, converterContext),\n\t\t\t\t\tmenu: dataField.Actions.map((action) =>\n\t\t\t\t\t\tgetDataFieldAnnotationAction(action as DataFieldForActionTypes, converterContext)\n\t\t\t\t\t),\n\t\t\t\t\tkey: KeyHelper.generateKeyFromDataField(dataField),\n\t\t\t\t\tisAIOperation: isMenuAIOperation(dataField.Actions) === true || undefined\n\t\t\t\t} as AnnotationActionActionGroup);\n\t\t\t}\n\t\t});\n\t}\n\treturn chartActions;\n}\n/**\n * Checks if the dataField is a DataFieldForActionGroup.\n * @param dataField The dataField to check.\n * @returns The dataField if it matches DataFieldForActionGroup.\n */\nfunction isAnnotationActionGroup(dataField: DataFieldAbstractTypes): dataField is DataFieldForActionGroup {\n\treturn dataField.$Type === UIAnnotationTypes.DataFieldForActionGroup;\n}\n\n/**\n * Creates and returns DataFieldForAction for menu of DataFieldForActionGroup.\n * @param dataField The datafield to get the annotation action from.\n * @param converterContext The converter context.\n * @returns An annotation action.\n */\nfunction getDataFieldAnnotationAction(\n\tdataField: DataFieldForActionTypes,\n\tconverterContext: ConverterContext<PageContextPathTarget>\n): AnnotationAction {\n\treturn {\n\t\ttype: ActionType.DataFieldForAction,\n\t\tannotationPath: converterContext.getEntitySetBasedAnnotationPath(dataField.fullyQualifiedName),\n\t\tkey: KeyHelper.generateKeyFromDataField(dataField),\n\t\tvisible: getCompileExpressionForAction(dataField, converterContext)\n\t};\n}\n\nexport function getChartActions(\n\tchartAnnotation: Chart,\n\tvisualizationPath: string,\n\tconverterContext: ConverterContext<PageContextPathTarget>\n): CombinedAction {\n\tconst aAnnotationActions = getChartActionsFromAnnotations(chartAnnotation, visualizationPath, converterContext);\n\tconst manifestActions = getActionsFromManifest(\n\t\tconverterContext.getManifestControlConfiguration<ChartManifestConfiguration>(visualizationPath).actions as Record<\n\t\t\tstring,\n\t\t\tManifestAction\n\t\t>,\n\t\tconverterContext,\n\t\taAnnotationActions\n\t);\n\tconst actionOverwriteConfig: OverrideTypeAction = {\n\t\tenabled: OverrideType.overwrite,\n\t\tenableOnSelect: OverrideType.overwrite,\n\t\tvisible: OverrideType.overwrite,\n\t\tcommand: OverrideType.overwrite,\n\t\tposition: OverrideType.overwrite,\n\t\tgroup: OverrideType.overwrite,\n\t\tpriority: OverrideType.overwrite\n\t};\n\tconst chartActions = insertCustomElements<BaseAction>(aAnnotationActions, manifestActions.actions, actionOverwriteConfig);\n\treturn {\n\t\tactions: chartActions,\n\t\tcommandActions: manifestActions.commandActions\n\t};\n}\n\nexport function getP13nMode(\n\tvisualizationPath: string,\n\tconverterContext: ConverterContext<PageContextPathTarget>\n): string | boolean | undefined {\n\tconst manifestWrapper: ManifestWrapper = converterContext.getManifestWrapper();\n\tconst chartManifestSettings: ChartManifestConfiguration = converterContext.getManifestControlConfiguration(visualizationPath);\n\tconst variantManagement: VariantManagementType = manifestWrapper.getVariantManagement();\n\tconst aPersonalization: string[] = [];\n\t// Personalization configured in manifest.\n\tconst personalization = chartManifestSettings?.chartSettings?.personalization;\n\tconst isControlVariant = variantManagement === VariantManagementType.Control ? true : false;\n\t// if personalization is set to false do not show any option\n\tif ((personalization !== undefined && !personalization) || personalization == \"false\") {\n\t\treturn false;\n\t}\n\tif (typeof personalization === \"object\") {\n\t\t// Specific personalization options enabled in manifest. Use them as is.\n\t\tif (personalization.type) {\n\t\t\taPersonalization.push(\"Type\");\n\t\t}\n\t\tif (personalization.item) {\n\t\t\taPersonalization.push(\"Item\");\n\t\t}\n\t\tif (personalization.sort) {\n\t\t\taPersonalization.push(\"Sort\");\n\t\t}\n\t\tif (personalization.filter) {\n\t\t\taPersonalization.push(\"Filter\");\n\t\t}\n\t\treturn aPersonalization.join(\",\");\n\t} else if (isControlVariant || !!personalization) {\n\t\t// manifest has personalization configured, check if it's true\n\t\t// if manifest doesn't have personalization, check for variant management is set to control\n\t\treturn \"Sort,Type,Item,Filter\";\n\t} else {\n\t\t// if manifest doesn't have personalization, show default options without filter\n\t\treturn \"Sort,Type,Item\";\n\t}\n}\n\nexport function getHeaderInfo(\n\tvisualizationPath: string,\n\tconverterContext: ConverterContext<PageContextPathTarget>\n): { header: string | undefined; headerVisible: boolean | undefined } {\n\tconst chartManifestSettings: ChartManifestConfiguration = converterContext.getManifestControlConfiguration(visualizationPath);\n\treturn {\n\t\theader: chartManifestSettings.chartSettings?.header,\n\t\theaderVisible: chartManifestSettings?.chartSettings?.headerVisible\n\t};\n}\n\nexport function getSelectionMode(\n\tvisualizationPath: string,\n\tconverterContext: ConverterContext<PageContextPathTarget>\n): \"Multiple\" | \"Single\" | \"None\" | undefined {\n\tconst chartManifestSettings: ChartManifestConfiguration = converterContext.getManifestControlConfiguration(visualizationPath);\n\treturn chartManifestSettings.chartSettings?.selectionMode;\n}\nexport type ChartCustomAggregate = {\n\tname: string;\n\tlabel: string;\n\tsortable: boolean;\n};\n\nexport type TransAgg = {\n\tname: string;\n\tpropertyPath: string;\n\taggregationMethod: AggregationMethod;\n\tlabel: string;\n\tsortable: boolean;\n\tcustom: boolean;\n};\nfunction getAggregatablePropertiesObject(aggProp: AggregatablePropertyType | Property): { Property: { $PropertyPath: string } } {\n\tlet obj;\n\tif ((aggProp as AggregatablePropertyType)?.Property) {\n\t\tobj = {\n\t\t\tProperty: {\n\t\t\t\t$PropertyPath: (aggProp as AggregatablePropertyType)?.Property?.value\n\t\t\t}\n\t\t};\n\t} else {\n\t\tobj = {\n\t\t\tProperty: {\n\t\t\t\t$PropertyPath: (aggProp as Property)?.name\n\t\t\t}\n\t\t};\n\t}\n\treturn obj;\n}\n/**\n * Create the ChartVisualization configuration that will be used to display a chart using the Chart building block.\n * @param chartAnnotation The targeted chart annotation\n * @param visualizationPath The path of the visualization annotation\n * @param converterContext The converter context\n * @param doNotCheckApplySupported Flag that indicates whether ApplySupported needs to be checked or not\n * @param selectionPresentationVariantPath\n * @returns The chart visualization based on the annotation\n */\nexport function createChartVisualization(\n\tchartAnnotation: Chart,\n\tvisualizationPath: string,\n\tconverterContext: ConverterContext<PageContextPathTarget>,\n\tdoNotCheckApplySupported?: boolean,\n\tselectionPresentationVariantPath?: string\n): ChartVisualization {\n\tconst aggregationHelper = new AggregationHelper(converterContext.getEntityType(), converterContext, true); // passing the last parameter as true to consider the old annotations i.e. Aggregation.Aggregatable for backward compatibility in case of chart\n\tif (!doNotCheckApplySupported && !aggregationHelper.isAnalyticsSupported()) {\n\t\tthrow new Error(\"ApplySupported is not added to the annotations\");\n\t}\n\tconst aTransAggregations = aggregationHelper.getTransAggregations();\n\tconst aCustomAggregates = aggregationHelper.getCustomAggregateDefinitions();\n\tconst pageManifestSettings: ManifestWrapper = converterContext.getManifestWrapper();\n\tconst variantManagement: VariantManagementType = pageManifestSettings.getVariantManagement();\n\tconst p13nMode: ChartP13nType = getP13nMode(visualizationPath, converterContext);\n\tif (p13nMode === undefined && variantManagement === \"Control\") {\n\t\tLog.warning(\"Variant Management cannot be enabled when personalization is disabled\");\n\t}\n\tconst mCustomAggregates: Record<string, object> = {};\n\tif (aCustomAggregates) {\n\t\tconst entityType = aggregationHelper.getEntityType();\n\t\tfor (const customAggregate of aCustomAggregates) {\n\t\t\tconst aContextDefiningProperties = customAggregate?.annotations?.Aggregation?.ContextDefiningProperties;\n\t\t\tconst qualifier = customAggregate?.qualifier;\n\t\t\tconst relatedCustomAggregateProperty = qualifier && entityType.entityProperties.find((property) => property.name === qualifier);\n\t\t\tconst label = relatedCustomAggregateProperty && relatedCustomAggregateProperty?.annotations?.Common?.Label?.toString();\n\t\t\tmCustomAggregates[qualifier] = {\n\t\t\t\tname: qualifier,\n\t\t\t\tlabel: label || `Custom Aggregate (${qualifier})`,\n\t\t\t\tsortable: true\n\t\t\t};\n\t\t}\n\t}\n\n\tconst mTransAggregations: Record<string, TransAgg> = {};\n\tconst oResourceBundleCore = Library.getResourceBundleFor(\"sap.fe.core\")!;\n\tif (aTransAggregations) {\n\t\tfor (const element of aTransAggregations) {\n\t\t\tmTransAggregations[element.Name as string] = {\n\t\t\t\tname: element.Name as string,\n\t\t\t\tpropertyPath: element.AggregatableProperty.value,\n\t\t\t\taggregationMethod: element.AggregationMethod,\n\t\t\t\tlabel: element?.annotations?.Common?.Label\n\t\t\t\t\t? element?.annotations?.Common?.Label?.toString()\n\t\t\t\t\t: `${oResourceBundleCore.getText(\"AGGREGATABLE_PROPERTY\")} (${element.Name})`,\n\t\t\t\tsortable: true,\n\t\t\t\tcustom: false\n\t\t\t};\n\t\t}\n\t}\n\n\tconst aAggProps = aggregationHelper.getAggregatableProperties();\n\tconst aGrpProps = aggregationHelper.getGroupableProperties();\n\tconst mApplySupported = {} as ChartApplySupported;\n\tmApplySupported.$Type = AggregationAnnotationTypes.ApplySupportedType;\n\tmApplySupported.AggregatableProperties = [];\n\tmApplySupported.GroupableProperties = [];\n\n\tif (aAggProps) {\n\t\tmApplySupported.AggregatableProperties = aAggProps.map((prop) =>\n\t\t\tgetAggregatablePropertiesObject(prop)\n\t\t) as (ExpandPathType<PropertyPath> & { Property: ExpandPathType<PropertyPath> })[];\n\t}\n\n\tif (aGrpProps) {\n\t\tmApplySupported.GroupableProperties = aGrpProps.map((prop) => ({\n\t\t\t[\"$PropertyPath\"]: prop.value\n\t\t})) as (ExpandPathType<PropertyPath> & { Property: ExpandPathType<PropertyPath> })[];\n\t}\n\n\tconst chartActions = getChartActions(chartAnnotation, visualizationPath, converterContext);\n\tlet [navigationPropertyPath /*, annotationPath*/] = visualizationPath.split(\"@\");\n\tif (navigationPropertyPath.lastIndexOf(\"/\") === navigationPropertyPath.length - 1) {\n\t\t// Drop trailing slash\n\t\tnavigationPropertyPath = navigationPropertyPath.substring(0, navigationPropertyPath.length - 1);\n\t}\n\tconst title = chartAnnotation.Title?.toString() || \"\"; // read title from chart annotation\n\tconst dataModelPath = converterContext.getDataModelObjectPath();\n\tconst isEntitySet: boolean = navigationPropertyPath.length === 0;\n\tconst entityName: string = dataModelPath.targetEntitySet ? dataModelPath.targetEntitySet.name : dataModelPath.startingEntitySet.name;\n\tconst sFilterbarId = isEntitySet ? getFilterBarID(converterContext.getContextPath()) : undefined;\n\tconst oVizProperties = {\n\t\tplotArea: {\n\t\t\twindow: {\n\t\t\t\tstart: \"firstDataPoint\",\n\t\t\t\tend: \"lastDataPoint\"\n\t\t\t}\n\t\t},\n\t\tlegendGroup: {\n\t\t\tlayout: {\n\t\t\t\tposition: \"bottom\"\n\t\t\t}\n\t\t},\n\t\ttooltip: { formatString: \"\" }\n\t};\n\tlet autoBindOnInit: boolean | undefined;\n\t// autoBindOnInit is responsible for load of data in the charts.\n\t// For ListReport and AnalyticalListPage since there is filterbar associated to it so we have to set it false. But there may be cases where we want to\n\t// show charts in popover in LR and ALP links then it might not have filterbar eventhough we are in LR and ALP. For this we set it to true.\n\t// For OP we set it to true always.\n\tif (!sFilterbarId || converterContext.getTemplateType() === TemplateType.ObjectPage) {\n\t\tautoBindOnInit = true;\n\t} else if (\n\t\tconverterContext.getTemplateType() === TemplateType.ListReport ||\n\t\tconverterContext.getTemplateType() === TemplateType.AnalyticalListPage\n\t) {\n\t\tautoBindOnInit = false;\n\t}\n\tconst hasMultipleVisualizations =\n\t\tconverterContext.getManifestWrapper().hasMultipleVisualizations() ||\n\t\tconverterContext.getTemplateType() === TemplateType.AnalyticalListPage;\n\tconst onSegmentedButtonPressed = hasMultipleVisualizations ? \".handlers.onSegmentedButtonPressed\" : \"\";\n\tconst visible = hasMultipleVisualizations ? \"{= ${pageInternal>alpContentView} !== 'Table'}\" : \"true\";\n\tconst allowedTransformations = aggregationHelper.getAllowedTransformations();\n\tmApplySupported.enableSearch = allowedTransformations ? allowedTransformations.includes(\"search\") : true;\n\tlet qualifier = \"\";\n\tif (chartAnnotation.fullyQualifiedName.split(\"#\").length > 1) {\n\t\tqualifier = chartAnnotation.fullyQualifiedName.split(\"#\")[1];\n\t}\n\tconst isInsightsVisible = getInsightsVisibility(\"Analytical\", converterContext, visualizationPath);\n\tconst isParameterizedEntitySet = converterContext.getParameterEntityType() ? true : false;\n\tconst isInsightsEnabled = and(getInsightsEnablement(), isInsightsVisible);\n\tconst { header, headerVisible } = getHeaderInfo(visualizationPath, converterContext);\n\tconst selectionMode = getSelectionMode(visualizationPath, converterContext);\n\tconst chartDimensionKeyAndRole: Record<string, string>[] = [];\n\tchartAnnotation?.DimensionAttributes?.forEach((dimensionAttribute) => {\n\t\tconst obj: Record<string, string> = {};\n\t\tobj[dimensionAttribute?.Dimension?.value as string] = dimensionAttribute?.Role as string;\n\t\tchartDimensionKeyAndRole.push(obj);\n\t});\n\n\tconst chartMeasureKeyAndRole: Record<string, string>[] = [];\n\tchartAnnotation?.MeasureAttributes?.forEach((measureAttribute) => {\n\t\tconst obj: Record<string, string> = {};\n\t\tobj[measureAttribute?.Measure?.value as string] = measureAttribute?.Role as string;\n\t\tchartMeasureKeyAndRole.push({});\n\t});\n\n\t// check if there are measures pointing to aggregated properties\n\tconst containsTransAggInMeasures = !!aggregationHelper\n\t\t.getAggregatedProperties()[0]\n\t\t?.filter((property) => chartAnnotation.Measures?.some((measure) => property.Name === measure.value))?.length;\n\n\treturn {\n\t\ttype: VisualizationType.Chart,\n\t\tid: qualifier\n\t\t\t? getChartID(isEntitySet ? entityName : navigationPropertyPath, qualifier, VisualizationType.Chart)\n\t\t\t: getChartID(isEntitySet ? entityName : navigationPropertyPath, VisualizationType.Chart),\n\t\tcollection: getTargetObjectPath(converterContext.getDataModelObjectPath()),\n\t\tapiId: generate([\n\t\t\tqualifier\n\t\t\t\t? getChartID(isEntitySet ? entityName : navigationPropertyPath, qualifier, VisualizationType.Chart)\n\t\t\t\t: getChartID(isEntitySet ? entityName : navigationPropertyPath, VisualizationType.Chart),\n\t\t\t\"Chart\"\n\t\t]),\n\t\tentityName: entityName,\n\t\tpersonalization: getP13nMode(visualizationPath, converterContext),\n\t\tnavigationPath: navigationPropertyPath,\n\t\tannotationPath: converterContext.getAbsoluteAnnotationPath(visualizationPath),\n\t\tfilterId: sFilterbarId,\n\t\tvizProperties: JSON.stringify(oVizProperties),\n\t\tactions: chartActions.actions,\n\t\tcommandActions: chartActions.commandActions,\n\t\ttitle: title,\n\t\tautoBindOnInit: autoBindOnInit,\n\t\tonSegmentedButtonPressed: onSegmentedButtonPressed,\n\t\tvisible: visible,\n\t\tcustomAgg: mCustomAggregates,\n\t\ttransAgg: mTransAggregations,\n\t\tapplySupported: mApplySupported,\n\t\tselectionPresentationVariantPath,\n\t\tvariantManagement: findVariantManagement(p13nMode, variantManagement),\n\t\tisInsightsEnabled: isInsightsEnabled,\n\t\tisInsightsVisible: isInsightsVisible,\n\t\tisParameterizedEntitySet: isParameterizedEntitySet,\n\t\theader: header,\n\t\theaderVisible: headerVisible,\n\t\tselectionMode: selectionMode,\n\t\tchartDimensionKeyAndRole: chartDimensionKeyAndRole,\n\t\tchartMeasureKeyAndRole: chartMeasureKeyAndRole,\n\t\tcontainsAggregatedProperty: aggregationHelper.getAggregatedProperty().length > 0,\n\t\tcontainsTransAggInMeasures\n\t};\n}\n/**\n * Method to determine the variant management.\n * @param p13nMode\n * @param variantManagement\n * @returns The variant management for the chart\n */\nfunction findVariantManagement(p13nMode: ChartP13nType, variantManagement: VariantManagementType): VariantManagementType {\n\treturn variantManagement === \"Control\" && !p13nMode ? VariantManagementType.None : variantManagement;\n}\n\n/**\n * Create the ChartVisualization configuration that will be used to during templating.\n * @param converterContext The converter context\n * @param visualizationPath The path of the visualization annotation\n * @param visualization The visualization annotation\n * @returns The chart visualization based on the annotation used for templating\n */\nexport function createChartVisualizationForTemplating(\n\tconverterContext: ConverterContext<PageContextPathTarget>,\n\tvisualizationPath: string,\n\tvisualization: ActualVisualizationAnnotations\n): ChartTemplateVisualization {\n\tconst qualifier = visualization.fullyQualifiedName.split(\"#\").length > 1 ? visualization.fullyQualifiedName.split(\"#\")[1] : \"\";\n\tconst [navigationPropertyPath] = visualizationPath.split(\"@\");\n\n\tconst dataModelPath = converterContext.getDataModelObjectPath();\n\tconst isEntitySet: boolean = navigationPropertyPath.length === 0;\n\tconst entityName: string = dataModelPath.targetEntitySet?.name ?? dataModelPath.startingEntitySet.name;\n\tconst aggregationHelper = new AggregationHelper(converterContext.getEntityType(), converterContext, true);\n\tconst allowedTransformations = aggregationHelper.getAllowedTransformations();\n\tconst isParameterizedEntitySet = !!converterContext.getParameterEntityType();\n\treturn {\n\t\tannotationPath: converterContext.getAbsoluteAnnotationPath(visualizationPath),\n\t\tisParameterizedEntitySet,\n\t\tcollection: getTargetObjectPath(converterContext.getDataModelObjectPath()),\n\t\ttype: VisualizationType.Chart,\n\t\tentityName,\n\t\tid: qualifier\n\t\t\t? getChartID(isEntitySet ? entityName : navigationPropertyPath, qualifier, VisualizationType.Chart)\n\t\t\t: getChartID(isEntitySet ? entityName : navigationPropertyPath, VisualizationType.Chart),\n\t\tapiId: generate([\n\t\t\tqualifier\n\t\t\t\t? getChartID(isEntitySet ? entityName : navigationPropertyPath, qualifier, VisualizationType.Chart)\n\t\t\t\t: getChartID(isEntitySet ? entityName : navigationPropertyPath, VisualizationType.Chart),\n\t\t\t\"Chart\"\n\t\t]),\n\t\tapplySupported: {\n\t\t\t$Type: \"Org.OData.Aggregation.V1.ApplySupportedType\",\n\t\t\tenableSearch: allowedTransformations?.includes(\"search\") ?? true\n\t\t}\n\t};\n}\n\n/**\n * Method to get compile expression for DataFieldForAction and DataFieldForIntentBasedNavigation.\n * @param dataField\n * @param converterContext\n * @returns Compile expression for DataFieldForAction and DataFieldForIntentBasedNavigation\n */\nfunction getCompileExpressionForAction(\n\tdataField: DataFieldAbstractTypes,\n\tconverterContext: ConverterContext<PageContextPathTarget>\n): CompiledBindingToolkitExpression {\n\treturn compileExpression(\n\t\tnot(\n\t\t\tequal(\n\t\t\t\tgetExpressionFromAnnotation(\n\t\t\t\t\tdataField.annotations?.UI?.Hidden,\n\t\t\t\t\t[],\n\t\t\t\t\tundefined,\n\t\t\t\t\tconverterContext.getRelativeModelPathFunction()\n\t\t\t\t),\n\t\t\t\ttrue\n\t\t\t)\n\t\t)\n\t);\n}\n\nexport function createBlankChartVisualization(converterContext: ConverterContext<PageContextPathTarget>): ChartVisualization {\n\tconst hasMultipleVisualizations =\n\t\tconverterContext.getManifestWrapper().hasMultipleVisualizations() ||\n\t\tconverterContext.getTemplateType() === TemplateType.AnalyticalListPage;\n\tconst dataModelPath = converterContext.getDataModelObjectPath();\n\tconst entityName = dataModelPath.targetEntitySet ? dataModelPath.targetEntitySet.name : dataModelPath.startingEntitySet.name;\n\n\tconst visualization: ChartVisualization = {\n\t\ttype: VisualizationType.Chart,\n\t\tid: getChartID(entityName, VisualizationType.Chart),\n\t\tapiId: generate([getChartID(entityName, VisualizationType.Chart), \"Chart\"]),\n\t\tentityName: entityName,\n\t\ttitle: \"\",\n\t\tcollection: \"\",\n\t\tpersonalization: undefined,\n\t\tnavigationPath: \"\",\n\t\tannotationPath: \"\",\n\t\tvizProperties: JSON.stringify({\n\t\t\tlegendGroup: {\n\t\t\t\tlayout: {\n\t\t\t\t\tposition: \"bottom\"\n\t\t\t\t}\n\t\t\t}\n\t\t}),\n\t\tactions: [],\n\t\tcommandActions: {},\n\t\tautoBindOnInit: false,\n\t\tonSegmentedButtonPressed: \"\",\n\t\tvisible: hasMultipleVisualizations ? \"{= ${pageInternal>alpContentView} !== 'Table'}\" : \"true\",\n\t\tcustomAgg: {},\n\t\ttransAgg: {},\n\t\tapplySupported: {\n\t\t\t$Type: \"Org.OData.Aggregation.V1.ApplySupportedType\",\n\t\t\tAggregatableProperties: [],\n\t\t\tGroupableProperties: [],\n\t\t\tenableSearch: false\n\t\t},\n\t\tmultiViews: false,\n\t\tvariantManagement: VariantManagementType.None\n\t};\n\n\treturn visualization;\n}\n"],"mappings":"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","ignoreList":[]}