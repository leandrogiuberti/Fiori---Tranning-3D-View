{"version":3,"file":"SelectionVariantHelper.js","names":["getRangeDefinition","range","propertyType","operator","bInclude","Sign","Option","rangeLow","indexOf","Date","Low","rangeHigh","High","_exports","getFilterDefinitionsFromSelectionVariant","selectionVariant","aFilterDefs","SelectOptions","forEach","selectOption","PropertyName","$target","Ranges","length","type","push","propertyPath","value","ranges","map"],"sources":["./SelectionVariantHelper.ts"],"sourcesContent":["import type { SelectionRangeType, SelectionVariantType } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\n\nexport type RangeDefinition = {\n\toperator: string;\n\trangeLow: string | number | Date;\n\trangeHigh?: string | number | Date;\n};\n\nexport type FilterDefinition = {\n\tpropertyPath: string;\n\tpropertyType: string;\n\tranges: RangeDefinition[];\n};\n\nexport function getRangeDefinition(range: SelectionRangeType, propertyType: string | undefined): RangeDefinition {\n\tlet operator: string;\n\tconst bInclude = range.Sign !== \"UI.SelectionRangeSignType/E\" ? true : false;\n\n\tswitch (range.Option as string) {\n\t\tcase \"UI.SelectionRangeOptionType/BT\":\n\t\t\toperator = bInclude ? \"BT\" : \"NB\";\n\t\t\tbreak;\n\n\t\tcase \"UI.SelectionRangeOptionType/CP\":\n\t\t\toperator = bInclude ? \"Contains\" : \"NotContains\";\n\t\t\tbreak;\n\n\t\tcase \"UI.SelectionRangeOptionType/EQ\":\n\t\t\toperator = bInclude ? \"EQ\" : \"NE\";\n\t\t\tbreak;\n\n\t\tcase \"UI.SelectionRangeOptionType/GE\":\n\t\t\toperator = bInclude ? \"GE\" : \"LT\";\n\t\t\tbreak;\n\n\t\tcase \"UI.SelectionRangeOptionType/GT\":\n\t\t\toperator = bInclude ? \"GT\" : \"LE\";\n\t\t\tbreak;\n\n\t\tcase \"UI.SelectionRangeOptionType/LE\":\n\t\t\toperator = bInclude ? \"LE\" : \"GT\";\n\t\t\tbreak;\n\n\t\tcase \"UI.SelectionRangeOptionType/LT\":\n\t\t\toperator = bInclude ? \"LT\" : \"GE\";\n\t\t\tbreak;\n\n\t\tcase \"UI.SelectionRangeOptionType/NB\":\n\t\t\toperator = bInclude ? \"NB\" : \"BT\";\n\t\t\tbreak;\n\n\t\tcase \"UI.SelectionRangeOptionType/NE\":\n\t\t\toperator = bInclude ? \"NE\" : \"EQ\";\n\t\t\tbreak;\n\n\t\tcase \"UI.SelectionRangeOptionType/NP\":\n\t\t\toperator = bInclude ? \"NotContains\" : \"Contains\";\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\toperator = \"EQ\";\n\t}\n\n\treturn {\n\t\toperator: operator,\n\t\trangeLow: propertyType && propertyType.indexOf(\"Edm.Date\") === 0 ? new Date(range.Low) : range.Low,\n\t\trangeHigh: range.High && propertyType && propertyType.indexOf(\"Edm.Date\") === 0 ? new Date(range.High) : range.High\n\t};\n}\n\n/**\n * Parses a SelectionVariant annotations and creates the corresponding filter definitions.\n * @param selectionVariant SelectionVariant annotation\n * @returns Returns an array of filter definitions corresponding to the SelectionVariant.\n */\nexport function getFilterDefinitionsFromSelectionVariant(selectionVariant: SelectionVariantType): FilterDefinition[] {\n\tconst aFilterDefs: FilterDefinition[] = [];\n\n\tif (selectionVariant.SelectOptions) {\n\t\tselectionVariant.SelectOptions.forEach((selectOption) => {\n\t\t\tif (selectOption.PropertyName?.$target && selectOption.Ranges.length > 0) {\n\t\t\t\tconst propertyType = selectOption.PropertyName.$target.type;\n\t\t\t\taFilterDefs.push({\n\t\t\t\t\tpropertyPath: selectOption.PropertyName.value,\n\t\t\t\t\tpropertyType: propertyType,\n\t\t\t\t\tranges: selectOption.Ranges.map((range) => getRangeDefinition(range, propertyType))\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\treturn aFilterDefs;\n}\n"],"mappings":";;;;kDAcO,SAASA,EAAmBC,EAA2BC,GAC7D,IAAIC,EACJ,MAAMC,EAAWH,EAAMI,OAAS,8BAAgC,KAAO,MAEvE,OAAQJ,EAAMK,QACb,IAAK,iCACJH,EAAWC,EAAW,KAAO,KAC7B,MAED,IAAK,iCACJD,EAAWC,EAAW,WAAa,cACnC,MAED,IAAK,iCACJD,EAAWC,EAAW,KAAO,KAC7B,MAED,IAAK,iCACJD,EAAWC,EAAW,KAAO,KAC7B,MAED,IAAK,iCACJD,EAAWC,EAAW,KAAO,KAC7B,MAED,IAAK,iCACJD,EAAWC,EAAW,KAAO,KAC7B,MAED,IAAK,iCACJD,EAAWC,EAAW,KAAO,KAC7B,MAED,IAAK,iCACJD,EAAWC,EAAW,KAAO,KAC7B,MAED,IAAK,iCACJD,EAAWC,EAAW,KAAO,KAC7B,MAED,IAAK,iCACJD,EAAWC,EAAW,cAAgB,WACtC,MAED,QACCD,EAAW,KAGb,MAAO,CACNA,SAAUA,EACVI,SAAUL,GAAgBA,EAAaM,QAAQ,cAAgB,EAAI,IAAIC,KAAKR,EAAMS,KAAOT,EAAMS,IAC/FC,UAAWV,EAAMW,MAAQV,GAAgBA,EAAaM,QAAQ,cAAgB,EAAI,IAAIC,KAAKR,EAAMW,MAAQX,EAAMW,KAEjH,CAEAC,EAAAb,qBAKO,SAASc,EAAyCC,GACxD,MAAMC,EAAkC,GAExC,GAAID,EAAiBE,cAAe,CACnCF,EAAiBE,cAAcC,QAASC,IACvC,GAAIA,EAAaC,cAAcC,SAAWF,EAAaG,OAAOC,OAAS,EAAG,CACzE,MAAMrB,EAAeiB,EAAaC,aAAaC,QAAQG,KACvDR,EAAYS,KAAK,CAChBC,aAAcP,EAAaC,aAAaO,MACxCzB,aAAcA,EACd0B,OAAQT,EAAaG,OAAOO,IAAK5B,GAAUD,EAAmBC,EAAOC,KAEvE,GAEF,CAEA,OAAOc,CACR,CAACH,EAAAC,2CAAA,OAAAD,CAAA","ignoreList":[]}