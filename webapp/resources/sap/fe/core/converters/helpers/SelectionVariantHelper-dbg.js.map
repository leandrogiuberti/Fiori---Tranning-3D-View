{"version":3,"names":["getRangeDefinition","range","propertyType","operator","bInclude","Sign","Option","rangeLow","indexOf","Date","Low","rangeHigh","High","_exports","getFilterDefinitionsFromSelectionVariant","selectionVariant","aFilterDefs","SelectOptions","forEach","selectOption","PropertyName","$target","Ranges","length","type","push","propertyPath","value","ranges","map"],"sourceRoot":".","sources":["SelectionVariantHelper.ts"],"sourcesContent":["import type { SelectionRangeType, SelectionVariantType } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\n\nexport type RangeDefinition = {\n\toperator: string;\n\trangeLow: string | number | Date;\n\trangeHigh?: string | number | Date;\n};\n\nexport type FilterDefinition = {\n\tpropertyPath: string;\n\tpropertyType: string;\n\tranges: RangeDefinition[];\n};\n\nexport function getRangeDefinition(range: SelectionRangeType, propertyType: string | undefined): RangeDefinition {\n\tlet operator: string;\n\tconst bInclude = range.Sign !== \"UI.SelectionRangeSignType/E\" ? true : false;\n\n\tswitch (range.Option as string) {\n\t\tcase \"UI.SelectionRangeOptionType/BT\":\n\t\t\toperator = bInclude ? \"BT\" : \"NB\";\n\t\t\tbreak;\n\n\t\tcase \"UI.SelectionRangeOptionType/CP\":\n\t\t\toperator = bInclude ? \"Contains\" : \"NotContains\";\n\t\t\tbreak;\n\n\t\tcase \"UI.SelectionRangeOptionType/EQ\":\n\t\t\toperator = bInclude ? \"EQ\" : \"NE\";\n\t\t\tbreak;\n\n\t\tcase \"UI.SelectionRangeOptionType/GE\":\n\t\t\toperator = bInclude ? \"GE\" : \"LT\";\n\t\t\tbreak;\n\n\t\tcase \"UI.SelectionRangeOptionType/GT\":\n\t\t\toperator = bInclude ? \"GT\" : \"LE\";\n\t\t\tbreak;\n\n\t\tcase \"UI.SelectionRangeOptionType/LE\":\n\t\t\toperator = bInclude ? \"LE\" : \"GT\";\n\t\t\tbreak;\n\n\t\tcase \"UI.SelectionRangeOptionType/LT\":\n\t\t\toperator = bInclude ? \"LT\" : \"GE\";\n\t\t\tbreak;\n\n\t\tcase \"UI.SelectionRangeOptionType/NB\":\n\t\t\toperator = bInclude ? \"NB\" : \"BT\";\n\t\t\tbreak;\n\n\t\tcase \"UI.SelectionRangeOptionType/NE\":\n\t\t\toperator = bInclude ? \"NE\" : \"EQ\";\n\t\t\tbreak;\n\n\t\tcase \"UI.SelectionRangeOptionType/NP\":\n\t\t\toperator = bInclude ? \"NotContains\" : \"Contains\";\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\toperator = \"EQ\";\n\t}\n\n\treturn {\n\t\toperator: operator,\n\t\trangeLow: propertyType && propertyType.indexOf(\"Edm.Date\") === 0 ? new Date(range.Low) : range.Low,\n\t\trangeHigh: range.High && propertyType && propertyType.indexOf(\"Edm.Date\") === 0 ? new Date(range.High) : range.High\n\t};\n}\n\n/**\n * Parses a SelectionVariant annotations and creates the corresponding filter definitions.\n * @param selectionVariant SelectionVariant annotation\n * @returns Returns an array of filter definitions corresponding to the SelectionVariant.\n */\nexport function getFilterDefinitionsFromSelectionVariant(selectionVariant: SelectionVariantType): FilterDefinition[] {\n\tconst aFilterDefs: FilterDefinition[] = [];\n\n\tif (selectionVariant.SelectOptions) {\n\t\tselectionVariant.SelectOptions.forEach((selectOption) => {\n\t\t\tif (selectOption.PropertyName?.$target && selectOption.Ranges.length > 0) {\n\t\t\t\tconst propertyType = selectOption.PropertyName.$target.type;\n\t\t\t\taFilterDefs.push({\n\t\t\t\t\tpropertyPath: selectOption.PropertyName.value,\n\t\t\t\t\tpropertyType: propertyType,\n\t\t\t\t\tranges: selectOption.Ranges.map((range) => getRangeDefinition(range, propertyType))\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\treturn aFilterDefs;\n}\n"],"mappings":";;;;;;;;EAcO,SAASA,kBAAkBA,CAACC,KAAyB,EAAEC,YAAgC,EAAmB;IAChH,IAAIC,QAAgB;IACpB,MAAMC,QAAQ,GAAGH,KAAK,CAACI,IAAI,KAAK,6BAA6B,GAAG,IAAI,GAAG,KAAK;IAE5E,QAAQJ,KAAK,CAACK,MAAM;MACnB,KAAK,gCAAgC;QACpCH,QAAQ,GAAGC,QAAQ,GAAG,IAAI,GAAG,IAAI;QACjC;MAED,KAAK,gCAAgC;QACpCD,QAAQ,GAAGC,QAAQ,GAAG,UAAU,GAAG,aAAa;QAChD;MAED,KAAK,gCAAgC;QACpCD,QAAQ,GAAGC,QAAQ,GAAG,IAAI,GAAG,IAAI;QACjC;MAED,KAAK,gCAAgC;QACpCD,QAAQ,GAAGC,QAAQ,GAAG,IAAI,GAAG,IAAI;QACjC;MAED,KAAK,gCAAgC;QACpCD,QAAQ,GAAGC,QAAQ,GAAG,IAAI,GAAG,IAAI;QACjC;MAED,KAAK,gCAAgC;QACpCD,QAAQ,GAAGC,QAAQ,GAAG,IAAI,GAAG,IAAI;QACjC;MAED,KAAK,gCAAgC;QACpCD,QAAQ,GAAGC,QAAQ,GAAG,IAAI,GAAG,IAAI;QACjC;MAED,KAAK,gCAAgC;QACpCD,QAAQ,GAAGC,QAAQ,GAAG,IAAI,GAAG,IAAI;QACjC;MAED,KAAK,gCAAgC;QACpCD,QAAQ,GAAGC,QAAQ,GAAG,IAAI,GAAG,IAAI;QACjC;MAED,KAAK,gCAAgC;QACpCD,QAAQ,GAAGC,QAAQ,GAAG,aAAa,GAAG,UAAU;QAChD;MAED;QACCD,QAAQ,GAAG,IAAI;IACjB;IAEA,OAAO;MACNA,QAAQ,EAAEA,QAAQ;MAClBI,QAAQ,EAAEL,YAAY,IAAIA,YAAY,CAACM,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,IAAIC,IAAI,CAACR,KAAK,CAACS,GAAG,CAAC,GAAGT,KAAK,CAACS,GAAG;MAClGC,SAAS,EAAEV,KAAK,CAACW,IAAI,IAAIV,YAAY,IAAIA,YAAY,CAACM,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,IAAIC,IAAI,CAACR,KAAK,CAACW,IAAI,CAAC,GAAGX,KAAK,CAACW;IAChH,CAAC;EACF;;EAEA;AACA;AACA;AACA;AACA;EAJAC,QAAA,CAAAb,kBAAA,GAAAA,kBAAA;EAKO,SAASc,wCAAwCA,CAACC,gBAAsC,EAAsB;IACpH,MAAMC,WAA+B,GAAG,EAAE;IAE1C,IAAID,gBAAgB,CAACE,aAAa,EAAE;MACnCF,gBAAgB,CAACE,aAAa,CAACC,OAAO,CAAEC,YAAY,IAAK;QACxD,IAAIA,YAAY,CAACC,YAAY,EAAEC,OAAO,IAAIF,YAAY,CAACG,MAAM,CAACC,MAAM,GAAG,CAAC,EAAE;UACzE,MAAMrB,YAAY,GAAGiB,YAAY,CAACC,YAAY,CAACC,OAAO,CAACG,IAAI;UAC3DR,WAAW,CAACS,IAAI,CAAC;YAChBC,YAAY,EAAEP,YAAY,CAACC,YAAY,CAACO,KAAK;YAC7CzB,YAAY,EAAEA,YAAY;YAC1B0B,MAAM,EAAET,YAAY,CAACG,MAAM,CAACO,GAAG,CAAE5B,KAAK,IAAKD,kBAAkB,CAACC,KAAK,EAAEC,YAAY,CAAC;UACnF,CAAC,CAAC;QACH;MACD,CAAC,CAAC;IACH;IAEA,OAAOc,WAAW;EACnB;EAACH,QAAA,CAAAC,wCAAA,GAAAA,wCAAA;EAAA,OAAAD,QAAA;AAAA","ignoreList":[],"file":"SelectionVariantHelper-dbg.js"}