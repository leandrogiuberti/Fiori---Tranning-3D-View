{"version":3,"names":["ResourceModel","_dec","defineUI5Class","_class","_UI5ResourceModel","apply","arguments","_inheritsLoose","_proto","prototype","getText","textID","parameters","metaPath","resourceKey","resourceBundle","_oResourceBundle","resourceKeyExists","checkIfResourceKeyExists","_checkIfResourceKeyExists","aCustomBundles","bundles","length","i","sValue","hasText","UI5ResourceModel"],"sourceRoot":".","sources":["ResourceModel.ts"],"sourcesContent":["import type ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport { defineUI5Class } from \"sap/fe/base/ClassSupport\";\nimport UI5ResourceModel from \"sap/ui/model/resource/ResourceModel\";\n\ntype InternalResourceBundle = ResourceBundle & {\n\taCustomBundles: InternalResourceBundle[];\n};\n\n@defineUI5Class(\"sap.fe.core.ResourceModel\")\nclass ResourceModel extends UI5ResourceModel {\n\tprivate _oResourceBundle!: InternalResourceBundle;\n\n\t/**\n\t * Returns text for a given resource key.\n\t * @param textID ID of the Text\n\t * @param parameters Array of parameters that are used to create the text\n\t * @param metaPath Entity set name or action name to overload a text\n\t * @returns Determined text\n\t */\n\tgetText(textID: string, parameters?: unknown[], metaPath?: string): string {\n\t\tlet resourceKey = textID;\n\t\tconst resourceBundle = this._oResourceBundle;\n\n\t\tif (metaPath) {\n\t\t\tconst resourceKeyExists = this.checkIfResourceKeyExists(`${resourceKey}|${metaPath}`);\n\n\t\t\t// if resource key with metapath (i.e. entity set name) for instance specific text overriding is provided by the application\n\t\t\t// then use the same key otherwise use the Framework key\n\t\t\tresourceKey = resourceKeyExists ? `${resourceKey}|${metaPath}` : resourceKey;\n\t\t}\n\n\t\treturn resourceBundle?.getText(resourceKey, parameters, true) || textID;\n\t}\n\n\t/**\n\t * Check if a text exists for a given resource key.\n\t * @param textID ID of the Text\n\t * @returns True in case the text exists\n\t */\n\tcheckIfResourceKeyExists(textID: string): boolean {\n\t\t// There are console errors logged when making calls to getText for keys that are not defined in the resource bundle\n\t\t// for instance keys which are supposed to be provided by the application, e.g, <key>|<entitySet> to override instance specific text\n\t\t// hence check if text exists (using \"hasText\") in the resource bundle before calling \"getText\"\n\n\t\t// \"hasText\" only checks for the key in the immediate resource bundle and not it's custom bundles\n\t\t// hence we need to do this recurrsively to check if the key exists in any of the bundles the forms the FE resource bundle\n\t\treturn this._checkIfResourceKeyExists(textID, this._oResourceBundle.aCustomBundles);\n\t}\n\n\t_checkIfResourceKeyExists(textID: string, bundles?: InternalResourceBundle[]): boolean {\n\t\tif (bundles?.length) {\n\t\t\tfor (let i = bundles.length - 1; i >= 0; i--) {\n\t\t\t\tconst sValue = bundles[i].hasText(textID);\n\t\t\t\t// text found return true\n\t\t\t\tif (sValue) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tthis._checkIfResourceKeyExists(textID, bundles[i].aCustomBundles);\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n\nexport default ResourceModel;\n"],"mappings":";;;;;;;;;;;MASMA,aAAa,IAAAC,IAAA,GADlBC,cAAc,CAAC,2BAA2B,CAAC,EAAAD,IAAA,CAAAE,MAAA,0BAAAC,iBAAA;IAAA,SAAAJ,cAAA;MAAA,OAAAI,iBAAA,CAAAC,KAAA,OAAAC,SAAA;IAAA;IAAAC,cAAA,CAAAP,aAAA,EAAAI,iBAAA;IAAA,IAAAI,MAAA,GAAAR,aAAA,CAAAS,SAAA;IAI3C;AACD;AACA;AACA;AACA;AACA;AACA;IANCD,MAAA,CAOAE,OAAO,GAAP,SAAAA,OAAOA,CAACC,MAAc,EAAEC,UAAsB,EAAEC,QAAiB,EAAU;MAC1E,IAAIC,WAAW,GAAGH,MAAM;MACxB,MAAMI,cAAc,GAAG,IAAI,CAACC,gBAAgB;MAE5C,IAAIH,QAAQ,EAAE;QACb,MAAMI,iBAAiB,GAAG,IAAI,CAACC,wBAAwB,CAAC,GAAGJ,WAAW,IAAID,QAAQ,EAAE,CAAC;;QAErF;QACA;QACAC,WAAW,GAAGG,iBAAiB,GAAG,GAAGH,WAAW,IAAID,QAAQ,EAAE,GAAGC,WAAW;MAC7E;MAEA,OAAOC,cAAc,EAAEL,OAAO,CAACI,WAAW,EAAEF,UAAU,EAAE,IAAI,CAAC,IAAID,MAAM;IACxE;;IAEA;AACD;AACA;AACA;AACA,OAJC;IAAAH,MAAA,CAKAU,wBAAwB,GAAxB,SAAAA,wBAAwBA,CAACP,MAAc,EAAW;MACjD;MACA;MACA;;MAEA;MACA;MACA,OAAO,IAAI,CAACQ,yBAAyB,CAACR,MAAM,EAAE,IAAI,CAACK,gBAAgB,CAACI,cAAc,CAAC;IACpF,CAAC;IAAAZ,MAAA,CAEDW,yBAAyB,GAAzB,SAAAA,yBAAyBA,CAACR,MAAc,EAAEU,OAAkC,EAAW;MACtF,IAAIA,OAAO,EAAEC,MAAM,EAAE;QACpB,KAAK,IAAIC,CAAC,GAAGF,OAAO,CAACC,MAAM,GAAG,CAAC,EAAEC,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;UAC7C,MAAMC,MAAM,GAAGH,OAAO,CAACE,CAAC,CAAC,CAACE,OAAO,CAACd,MAAM,CAAC;UACzC;UACA,IAAIa,MAAM,EAAE;YACX,OAAO,IAAI;UACZ;UACA,IAAI,CAACL,yBAAyB,CAACR,MAAM,EAAEU,OAAO,CAACE,CAAC,CAAC,CAACH,cAAc,CAAC;QAClE;MACD;MACA,OAAO,KAAK;IACb,CAAC;IAAA,OAAApB,aAAA;EAAA,EApD0B0B,gBAAgB,MAAAvB,MAAA;EAAA,OAuD7BH,aAAa;AAAA","ignoreList":[],"file":"ResourceModel-dbg.js"}