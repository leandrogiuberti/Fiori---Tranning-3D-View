{"version":3,"file":"AppComponent.js","names":["StartupMode","library","NAVCONF","FCL","VIEWNAME","VIEWNAME_COMPATIBILITY","ROUTERCLASS","NAVCONTAINER","_mRouter","Router","AppComponent","_dec","defineUI5Class","config","fullWidth","manifest","_version","services","viewPreloaderService","factoryName","startup","resourceModel","settings","bundles","modelName","routingService","shellServices","ShellUIService","navigationService","environmentCapabilities","sideEffectsService","asyncComponentService","collaborationManagerService","collaborativeToolsService","telemetryService","valueHelpHistoryService","CollaborativeDraftService","ContextSharingService","inlineEditService","rootView","viewName","id","routing","controlId","routerClass","viewType","controlAggregation","containerOptions","propagateModel","designtime","_dec2","implementInterface","_class","_class2","_AppComponent","_UIComponent","_this","_len","arguments","length","args","Array","_key","call","this","_initializerDefineProperty","_descriptor","additionalConfiguration","startupMode","Normal","_startedServices","isAdaptationEnabled","isExiting","pageConfigurationChanges","suspended","discardPromise","Promise","resolve","_inheritsLoose","_proto","prototype","getAdditionalConfiguration","_isFclEnabled","oManifestUI5","getManifestEntry","setAdaptationMode","isAdaptationMode","registerConfigurationHandlers","handler","configurationHandlers","push","initializeFeatureToggles","async","changePageConfiguration","pageId","path","value","changeConfiguration","getManifest","getEnvironmentCapabilities","setCapability","cleanPageConfigurationChanges","getRouterProxy","_oRouterProxy","getAppStateHandler","_oAppStateHandler","getRootViewController","getRootControl","getController","getRootContainer","getContent","getStartupMode","setStartupModeCreate","Create","setStartupModeAutoCreate","AutoCreate","setStartupModeDeeplink","Deeplink","init","params","URLSearchParams","window","location","search","has","setTimeout","Library","load","name","_initializedKeeper","PromiseKeeper","initialized","promise","uiModel","JSONModel","editMode","EditMode","Display","isEditable","draftStatus","DraftStatus","Clear","busy","busyLocal","pages","oInternalModel","setDefaultBindingMode","ModelHelper","enhanceUiJSONModel","enhanceInternalJSONModel","setModel","bInitializeRouting","undefined","RouterProxy","AppStateHandler","_oDiagnostics","Diagnostics","oModel","getModel","isA","enhanceODataModel","setRetryAfterHandler","http503RetryHandler","bind","entityContainer","getMetaModel","requestObject","app","disableCollaborationDraft","checkRoutingConfiguration","_customManifestChecks","forEach","fnProcess","instanceMap","getId","error","HTTP503Handler","handle503Delay","getResourceModel","Log","info","includes","Error","onServicesStarted","allServices","all","map","allSettled","instanceDependentProcesses","finalizedRoutingInitialization","then","attachRouteMatchers","getRouter","initialize","getValueHelpHistoryService","registerShellHook","catch","oResourceBundle","getResourceBundleFor","displayErrorPage","getText","title","description","message","getRoutingService","initializeRouting","attachAfterInit","err","toString","exit","destroy","deleteModelCacheData","getDiagnostics","bSuppressInvalidate","_routing","e","oMainModel","oModels","oHeaders","oRequestor","Object","assign","mHeaders","beforeExit","unregisterCallbacks","getShellServices","getNavigationService","getSideEffectsService","getCollaborationManagerService","getViewPreloaderService","getCollaborativeToolsService","getCollaborativeDraftService","getContextSharingService","getTelemetryService","getInlineEditService","getStartupParameters","oComponentData","getComponentData","startupParameters","restore","startedService","onRestore","viewState","resetVersionActivationStatus","suspend","onSuspend","isSuspended","isAppComponentBusy","navigateBasedOnStartupParameter","BusyLocker","isLocked","_manageDeepLinkStartup","exception","unlock","isCollaborationManagerServiceEnabled","registerInstanceDependentProcessForStartUp","registerInitChecks","registerCallbacks","dirtyStateProviderCallback","discardAfterNavigationCallback","sessionTimeoutCallback","registerDirtyStateProvider","stickySessionTimeoutCallback","attachSessionTimeout","_routeMatchHandler","attachRouteMatched","deregisterDirtyStateProvider","detachSessionTimeout","detachRouteMatched","_isEmbedded","feEnvironment","UIComponent","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./AppComponent.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type FlexibleColumnLayout from \"sap/f/FlexibleColumnLayout\";\nimport { defineUI5Class,implementInterface } from \"sap/fe/base/ClassSupport\";\nimport AppStateHandler from \"sap/fe/core/AppStateHandler\";\nimport RouterProxy from \"sap/fe/core/controllerextensions/routing/RouterProxy\";\nimport HTTP503Handler from \"sap/fe/core/helpers/HTTP503Handler\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport PromiseKeeper from \"sap/fe/core/helpers/PromiseKeeper\";\nimport library from \"sap/fe/core/library\";\nimport { changeConfiguration } from \"sap/fe/core/manifestMerger/ChangePageConfiguration\";\nimport type RootViewBaseController from \"sap/fe/core/rootView/RootViewBaseController\";\nimport type { CollaborationManagerService } from \"sap/fe/core/services/CollaborationManagerServiceFactory\";\nimport type { CollaborativeToolsService } from \"sap/fe/core/services/CollaborativeToolsServiceFactory\";\nimport type { ContextSharingService } from \"sap/fe/core/services/ContextSharingServiceFactory\";\nimport type { EnvironmentCapabilitiesService } from \"sap/fe/core/services/EnvironmentServiceFactory\";\nimport type { InlineEditService } from \"sap/fe/core/services/InlineEditServiceFactory\";\nimport type { NavigationService } from \"sap/fe/core/services/NavigationServiceFactory\";\nimport type { RoutingService } from \"sap/fe/core/services/RoutingServiceFactory\";\nimport type { IShellServices } from \"sap/fe/core/services/ShellServicesFactory\";\nimport type { SideEffectsService } from \"sap/fe/core/services/SideEffectsServiceFactory\";\nimport type { TelemetryService } from \"sap/fe/core/services/TelemetryServiceFactory\";\nimport type { CollaborativeDraftService } from \"sap/fe/core/services/collaborativeDraftServiceFactory\";\nimport Diagnostics from \"sap/fe/core/support/Diagnostics\";\nimport type NavContainer from \"sap/m/NavContainer\";\nimport Router from \"sap/m/routing/Router\";\nimport Library from \"sap/ui/core/Lib\";\nimport type { ManifestContent } from \"sap/ui/core/Manifest\";\nimport UIComponent from \"sap/ui/core/UIComponent\";\nimport type { IAsyncContentCreation } from \"sap/ui/core/library\";\nimport type View from \"sap/ui/core/mvc/View\";\nimport type Service from \"sap/ui/core/service/Service\";\nimport type Model from \"sap/ui/model/Model\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport \"sap/ui/model/odata/type/Currency\";\nimport \"sap/ui/model/odata/type/Unit\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport BusyLocker from \"./controllerextensions/BusyLocker\";\nimport { deleteModelCacheData } from \"./converters/MetaModelConverter\";\nimport { getResourceModel } from \"./helpers/ResourceModelHelper\";\nimport type { ValueHelpHistoryService } from \"./services/ValueHelpHistoryServiceFactory\";\nimport type { ViewPreloaderService } from \"./services/ViewPreloaderServiceFactory\";\n\n/**\n * Represents the additional configuration that can be provided by libraries.\n */\nexport type AdditionalConfiguration = {\n\t/**\n\t * Configuration options for SAP Fiori elements macros.\n\t */\n\t\"sap.fe.macros\"?: {\n\t\t/**\n\t\t * Configuration for the Status macro.\n\t\t */\n\t\tStatus?: {\n\t\t\t/**\n\t\t\t * Whether the default value is inverted.\n\t\t\t */\n\t\t\tinvertedDefaultValue?: boolean;\n\t\t\t/**\n\t\t\t * Color mapping for different status values.\n\t\t\t */\n\t\t\tcolorMap?: Record<string, string>;\n\t\t};\n\t};\n};\n\nconst StartupMode = library.StartupMode;\nconst NAVCONF = {\n\tFCL: {\n\t\tVIEWNAME: \"sap.fe.core.rootView.Fcl\",\n\t\tVIEWNAME_COMPATIBILITY: \"sap.fe.templates.RootContainer.view.Fcl\",\n\t\tROUTERCLASS: \"sap.f.routing.Router\"\n\t},\n\tNAVCONTAINER: {\n\t\tVIEWNAME: \"sap.fe.core.rootView.NavContainer\",\n\t\tVIEWNAME_COMPATIBILITY: \"sap.fe.templates.RootContainer.view.NavContainer\",\n\t\tROUTERCLASS: \"sap.m.routing.Router\"\n\t}\n};\n\nexport type ComponentData = {\n\tstartupParameters?: StartupParameters;\n\t//feEnvironment is object which is received as a part of the component data for My Inbox applications.\n\tfeEnvironment?: {\n\t\t//Within this object they pass a function called getIntent() which returns an object containing the semanticObject and action as separate property-value entries that are then used to update the related apps button.\n\t\tgetIntent: Function;\n\t\t//Within this object they pass a function called getShareControlVisibility() that returns boolean values(true or false) which determines the visibility of the share button.\n\t\tgetShareControlVisibility: Function;\n\t};\n};\n// Keep a reference so as to keep the import despite it not being directly used\nconst _mRouter = Router;\n\nexport type StartupParameters = {\n\tpreferredMode?: string[];\n} & Record<string, unknown[]>;\n/**\n * Main class for components used for an application in SAP Fiori elements.\n *\n * Application developers using the templates and building blocks provided by SAP Fiori elements should create their apps by extending this component.\n * This ensures that all the necessary services that you need for the building blocks and templates to work properly are started.\n *\n * When you use sap.fe.core.AppComponent as the base component, you also need to use a rootView. SAP Fiori elements provides two options: <br/>\n * - sap.fe.core.rootView.NavContainer when using sap.m.routing.Router <br/>\n * - sap.fe.core.rootView.Fcl when using sap.f.routing.Router (FCL use case) <br/>\n * @hideconstructor\n * @public\n */\n@defineUI5Class(\"sap.fe.core.AppComponent\", {\n\tconfig: {\n\t\tfullWidth: true\n\t},\n\tmanifest: {\n\t\t_version: \"2.0.0\",\n\t\t\"sap.ui5\": {\n\t\t\tservices: {\n\t\t\t\tviewPreloaderService: {\n\t\t\t\t\tfactoryName: \"sap.fe.core.services.ViewPreloaderService\",\n\t\t\t\t\tstartup: \"waitFor\"\n\t\t\t\t},\n\t\t\t\tresourceModel: {\n\t\t\t\t\tfactoryName: \"sap.fe.core.services.ResourceModelService\",\n\t\t\t\t\tstartup: \"waitFor\",\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tbundles: [\"sap.fe.core.messagebundle\"],\n\t\t\t\t\t\tmodelName: \"sap.fe.i18n\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\troutingService: {\n\t\t\t\t\tfactoryName: \"sap.fe.core.services.RoutingService\",\n\t\t\t\t\tstartup: \"waitFor\"\n\t\t\t\t},\n\t\t\t\tshellServices: {\n\t\t\t\t\tfactoryName: \"sap.fe.core.services.ShellServices\",\n\t\t\t\t\tstartup: \"waitFor\"\n\t\t\t\t},\n\t\t\t\tShellUIService: {\n\t\t\t\t\tfactoryName: \"sap.ushell.ui5service.ShellUIService\"\n\t\t\t\t},\n\t\t\t\tnavigationService: {\n\t\t\t\t\tfactoryName: \"sap.fe.core.services.NavigationService\",\n\t\t\t\t\tstartup: \"waitFor\"\n\t\t\t\t},\n\t\t\t\tenvironmentCapabilities: {\n\t\t\t\t\tfactoryName: \"sap.fe.core.services.EnvironmentService\",\n\t\t\t\t\tstartup: \"waitFor\"\n\t\t\t\t},\n\t\t\t\tsideEffectsService: {\n\t\t\t\t\tfactoryName: \"sap.fe.core.services.SideEffectsService\",\n\t\t\t\t\tstartup: \"waitFor\"\n\t\t\t\t},\n\t\t\t\tasyncComponentService: {\n\t\t\t\t\tfactoryName: \"sap.fe.core.services.AsyncComponentService\",\n\t\t\t\t\tstartup: \"waitFor\"\n\t\t\t\t},\n\t\t\t\tcollaborationManagerService: {\n\t\t\t\t\tfactoryName: \"sap.fe.core.services.CollaborationManagerService\",\n\t\t\t\t\tstartup: \"waitFor\"\n\t\t\t\t},\n\t\t\t\tcollaborativeToolsService: {\n\t\t\t\t\tfactoryName: \"sap.fe.core.services.CollaborativeToolsService\",\n\t\t\t\t\tstartup: \"waitFor\"\n\t\t\t\t},\n\t\t\t\ttelemetryService: {\n\t\t\t\t\tfactoryName: \"sap.fe.core.services.TelemetryService\",\n\t\t\t\t\tstartup: \"waitFor\"\n\t\t\t\t},\n\t\t\t\tvalueHelpHistoryService: {\n\t\t\t\t\tfactoryName: \"sap.fe.core.services.ValueHelpHistoryService\",\n\t\t\t\t\tstartup: \"waitFor\"\n\t\t\t\t},\n\t\t\t\tCollaborativeDraftService: {\n\t\t\t\t\tfactoryName: \"sap.fe.core.services.CollaborativeDraftService\",\n\t\t\t\t\tstartup: \"waitFor\"\n\t\t\t\t},\n\t\t\t\tContextSharingService: {\n\t\t\t\t\tfactoryName: \"sap.fe.core.services.ContextSharingService\",\n\t\t\t\t\tstartup: \"waitFor\"\n\t\t\t\t},\n\t\t\t\tinlineEditService: {\n\t\t\t\t\tfactoryName: \"sap.fe.core.services.InlineEditService\",\n\t\t\t\t\tstartup: \"waitFor\"\n\t\t\t\t}\n\t\t\t},\n\t\t\trootView: {\n\t\t\t\tviewName: NAVCONF.NAVCONTAINER.VIEWNAME,\n\t\t\t\tid: \"appRootView\"\n\t\t\t},\n\t\t\trouting: {\n\t\t\t\tconfig: {\n\t\t\t\t\tcontrolId: \"appContent\",\n\t\t\t\t\trouterClass: NAVCONF.NAVCONTAINER.ROUTERCLASS,\n\t\t\t\t\tviewType: \"XML\",\n\t\t\t\t\tcontrolAggregation: \"pages\",\n\t\t\t\t\tcontainerOptions: {\n\t\t\t\t\t\tpropagateModel: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tdesigntime: \"sap/fe/core/designtime/AppComponent.designtime\",\n\n\tlibrary: \"sap.fe.core\"\n})\nclass AppComponent extends UIComponent implements IAsyncContentCreation {\n\t@implementInterface(\"sap.ui.core.IAsyncContentCreation\")\n\t__implements__sap_ui_core_IAsyncContentCreation = true;\n\n\tstatic instanceMap: Record<string, AppComponent> = {};\n\n\t/**\n\t * The additional configuration for the application.\n\t * @private\n\t */\n\tprivate additionalConfiguration: AdditionalConfiguration = {};\n\n\t/**\n\t * Gets the additional configuration for the application.\n\t * @returns The additional configuration\n\t */\n\tgetAdditionalConfiguration(): AdditionalConfiguration {\n\t\treturn this.additionalConfiguration;\n\t}\n\n\t/**\n\t * Registered handlers for modifying additional configuration.\n\t */\n\tprivate static configurationHandlers: ((additionalConfiguration: AdditionalConfiguration) => Promise<void>)[] = [];\n\n\tprivate _oRouterProxy!: RouterProxy;\n\n\tprivate _oAppStateHandler!: AppStateHandler;\n\n\tprivate bInitializeRouting?: boolean;\n\n\tprivate _oDiagnostics!: Diagnostics;\n\n\tprivate entityContainer!: Promise<void>;\n\n\tprivate startupMode: string = StartupMode.Normal;\n\n\tprivate _startedServices: Service<unknown>[] = [];\n\n\tpublic initialized!: Promise<void>;\n\n\tprivate _initializedKeeper!: PromiseKeeper<void>;\n\n\tprivate isAdaptationEnabled = false;\n\n\tpublic isExiting = false;\n\n\tpublic pageConfigurationChanges: Record<string, string[]> = {};\n\n\tprivate dirtyStateProviderCallback?: Function;\n\n\tprivate stickySessionTimeoutCallback?: Function;\n\n\tprivate discardAfterNavigationCallback?: Function;\n\n\tprivate suspended = false;\n\n\tprivate discardPromise = Promise.resolve();\n\n\tprivate _routeMatchHandler?: Function;\n\n\t/**\n\t * Singleton to hold processes from libraries that need to be run for every instance prior to startup.\n\t */\n\tprivate static instanceDependentProcesses: ((appComponent: AppComponent) => Promise<void>)[] = [];\n\n\t/**\n\t * Singleton holding custom initialization checks that can be registered by libraries.\n\t */\n\tprivate static _customManifestChecks: ((manifestContent: ManifestContent[\"sap.ui5\"]) => void)[] = [];\n\n\t_isFclEnabled(): boolean {\n\t\tconst oManifestUI5 = this.getManifestEntry(\"sap.ui5\");\n\t\treturn oManifestUI5?.routing?.config?.routerClass === NAVCONF.FCL.ROUTERCLASS;\n\t}\n\n\tsetAdaptationMode(isAdaptationEnabled: boolean): void {\n\t\tthis.isAdaptationEnabled = isAdaptationEnabled;\n\t}\n\n\tisAdaptationMode(): boolean {\n\t\treturn this.isAdaptationEnabled;\n\t}\n\n\t/**\n\t * Register a handler for modifying additional configuration.\n\t * The handler will be called before feature toggles are initialized.\n\t * @param handler The handler function that will modify the additional configuration\n\t */\n\tstatic registerConfigurationHandlers(handler: (additionalConfiguration: AdditionalConfiguration) => Promise<void>): void {\n\t\tthis.configurationHandlers.push(handler);\n\t}\n\n\t/**\n\t * Provides a hook to initialize feature toggles.\n\t *\n\t * This hook is being called by the SAP Fiori elements AppComponent at the time feature toggles can be initialized.\n\t * To change page configuration, use the {@link sap.fe.core.AppComponent#changePageConfiguration} method.\n\t * @public\n\t * @returns A promise without any value to allow asynchronous processes\n\t */\n\tasync initializeFeatureToggles(): Promise<void> {\n\t\t// this method can be overridden by applications\n\t\treturn Promise.resolve();\n\t}\n\n\t/**\n\t * Changes the page configuration of SAP Fiori elements.\n\t *\n\t * This method enables you to change the page configuration of SAP Fiori elements.\n\t * @param pageId The ID of the page for which the configuration is to be changed.\n\t * @param path The path in the page settings for which the configuration is to be changed.\n\t * @param value The new value of the configuration. This could be a plain value like a string, or a Boolean, or a structured object.\n\t * @public\n\t */\n\tchangePageConfiguration(pageId: string, path: string, value: unknown): void {\n\t\tconst manifest = changeConfiguration(this.getManifest(), pageId, path, value, true, this) as ManifestContent;\n\t\tif (\n\t\t\tpath === \"app/disableInputAssistance\" &&\n\t\t\t(manifest?.[\"sap.fe\"] as Record<string, Record<string, boolean>>)?.[\"app\"]?.[\"disableInputAssistance\"] === value\n\t\t) {\n\t\t\tthis.getEnvironmentCapabilities().setCapability(\"DisableInputAssistance\", value);\n\t\t}\n\t}\n\n\t/**\n\t * Cleans all registered page configuration changes.\n\t */\n\tcleanPageConfigurationChanges(): void {\n\t\tthis.pageConfigurationChanges = {};\n\t}\n\n\t/**\n\t * Get a reference to the RouterProxy.\n\t * @returns A Reference to the RouterProxy\n\t * @final\n\t */\n\tgetRouterProxy(): RouterProxy {\n\t\treturn this._oRouterProxy;\n\t}\n\n\t/**\n\t * Get a reference to the AppStateHandler.\n\t * @returns A reference to the AppStateHandler\n\t * @final\n\t */\n\tgetAppStateHandler(): AppStateHandler {\n\t\treturn this._oAppStateHandler;\n\t}\n\n\t/**\n\t * Get a reference to the nav/FCL Controller.\n\t * @returns  A reference to the FCL Controller\n\t * @final\n\t */\n\tgetRootViewController(): RootViewBaseController {\n\t\treturn this.getRootControl().getController();\n\t}\n\n\t/**\n\t * Get the NavContainer control or the FCL control.\n\t * @returns  A reference to NavContainer control or the FCL control\n\t * @final\n\t */\n\tgetRootContainer(): NavContainer | FlexibleColumnLayout {\n\t\treturn this.getRootControl().getContent()[0] as NavContainer | FlexibleColumnLayout;\n\t}\n\n\t/**\n\t * Get the startup mode of the app.\n\t * @returns The startup mode\n\t */\n\tgetStartupMode(): string {\n\t\treturn this.startupMode;\n\t}\n\n\t/**\n\t * Set the startup mode for the app to 'Create'.\n\t *\n\t */\n\tsetStartupModeCreate(): void {\n\t\tthis.startupMode = StartupMode.Create;\n\t}\n\n\t/**\n\t * Set the startup mode for the app to 'AutoCreate'.\n\t *\n\t */\n\tsetStartupModeAutoCreate(): void {\n\t\tthis.startupMode = StartupMode.AutoCreate;\n\t}\n\n\t/**\n\t * Set the startup mode for the app to 'Deeplink'.\n\t *\n\t */\n\tsetStartupModeDeeplink(): void {\n\t\tthis.startupMode = StartupMode.Deeplink;\n\t}\n\n\tinit(): void {\n\t\tconst params = new URLSearchParams(window.location.search);\n\t\tif (params.has(\"sap-ui-xx-fe-support\")) {\n\t\t\tsetTimeout(function () {\n\t\t\t\tLibrary.load({ name: \"sap.fe.tools\" });\n\t\t\t}, 2000);\n\t\t}\n\t\tthis._initializedKeeper = new PromiseKeeper<void>();\n\t\tthis.initialized = this._initializedKeeper.promise;\n\t\tconst uiModel = new JSONModel({\n\t\t\teditMode: library.EditMode.Display,\n\t\t\tisEditable: false,\n\t\t\tdraftStatus: library.DraftStatus.Clear,\n\t\t\tbusy: false,\n\t\t\tbusyLocal: {},\n\t\t\tpages: {}\n\t\t});\n\t\tconst oInternalModel = new JSONModel({\n\t\t\tpages: {}\n\t\t});\n\t\t// set the binding OneWay for uiModel to prevent changes if controller extensions modify a bound property of a control\n\t\tuiModel.setDefaultBindingMode(\"OneWay\");\n\t\t// for internal model binding needs to be two way\n\t\tModelHelper.enhanceUiJSONModel(uiModel, library);\n\t\tModelHelper.enhanceInternalJSONModel(oInternalModel);\n\n\t\tthis.setModel(uiModel, \"ui\");\n\t\tthis.setModel(oInternalModel, \"internal\");\n\n\t\tthis.bInitializeRouting = this.bInitializeRouting !== undefined ? this.bInitializeRouting : true;\n\t\tthis._oRouterProxy = new RouterProxy();\n\t\tthis._oAppStateHandler = new AppStateHandler(this);\n\t\tthis._oDiagnostics = new Diagnostics();\n\n\t\tconst oModel = this.getModel();\n\t\tif (oModel?.isA?.<ODataModel>(\"sap.ui.model.odata.v4.ODataModel\")) {\n\t\t\tModelHelper.enhanceODataModel(oModel, this);\n\t\t\toModel.setRetryAfterHandler(this.http503RetryHandler.bind(this));\n\t\t\tthis.entityContainer = oModel.getMetaModel().requestObject(\"/$EntityContainer/\");\n\t\t} else {\n\t\t\t// not an OData v4 service\n\t\t\tthis.entityContainer = Promise.resolve();\n\t\t}\n\n\t\tif (this.getManifestEntry(\"sap.fe\")?.app?.disableCollaborationDraft) {\n\t\t\t// disable the collaboration draft globally in case private manifest flag is set\n\t\t\t// this allows customers to disable the collaboration draft in case we run into issues with the first delivery\n\t\t\t// this will be removed with the next S/4 release\n\t\t\tModelHelper.disableCollaborationDraft = true;\n\t\t}\n\n\t\tconst oManifestUI5 = this.getManifest()[\"sap.ui5\"];\n\t\tthis.checkRoutingConfiguration(oManifestUI5);\n\t\tAppComponent._customManifestChecks.forEach((fnProcess) => {\n\t\t\treturn fnProcess.call(this, oManifestUI5);\n\t\t});\n\n\t\t// the init function configures the routing according to the settings above\n\t\t// it will call the createContent function to instantiate the RootView and add it to the UIComponent aggregations\n\n\t\tsuper.init();\n\t\tAppComponent.instanceMap[this.getId()] = this;\n\t}\n\n\tprivate async http503RetryHandler(error: Error & { retryAfter?: Date }): Promise<undefined> {\n\t\treturn HTTP503Handler.handle503Delay(error, this.getRootControl(), getResourceModel(this));\n\t}\n\n\tprivate checkRoutingConfiguration(oManifestUI5: ManifestContent[\"sap.ui5\"]): void {\n\t\tif (oManifestUI5?.rootView?.viewName) {\n\t\t\t// The application specified an own root view in the manifest\n\n\t\t\t// Root View was moved from sap.fe.templates to sap.fe.core - keep it compatible\n\t\t\tif (oManifestUI5.rootView.viewName === NAVCONF.FCL.VIEWNAME_COMPATIBILITY) {\n\t\t\t\toManifestUI5.rootView.viewName = NAVCONF.FCL.VIEWNAME;\n\t\t\t} else if (oManifestUI5.rootView.viewName === NAVCONF.NAVCONTAINER.VIEWNAME_COMPATIBILITY) {\n\t\t\t\toManifestUI5.rootView.viewName = NAVCONF.NAVCONTAINER.VIEWNAME;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\toManifestUI5.rootView.viewName === NAVCONF.FCL.VIEWNAME &&\n\t\t\t\toManifestUI5.routing?.config?.routerClass === NAVCONF.FCL.ROUTERCLASS\n\t\t\t) {\n\t\t\t\tLog.info(`Rootcontainer: \"${NAVCONF.FCL.VIEWNAME}\" - Routerclass: \"${NAVCONF.FCL.ROUTERCLASS}\"`);\n\t\t\t} else if (\n\t\t\t\toManifestUI5.rootView.viewName === NAVCONF.NAVCONTAINER.VIEWNAME &&\n\t\t\t\toManifestUI5.routing?.config?.routerClass === NAVCONF.NAVCONTAINER.ROUTERCLASS\n\t\t\t) {\n\t\t\t\tLog.info(`Rootcontainer: \"${NAVCONF.NAVCONTAINER.VIEWNAME}\" - Routerclass: \"${NAVCONF.NAVCONTAINER.ROUTERCLASS}\"`);\n\t\t\t} else if (oManifestUI5.rootView?.viewName?.includes(\"sap.fe.core.rootView\")) {\n\t\t\t\tthrow Error(\n\t\t\t\t\t`\\nWrong configuration for the couple (rootView/routerClass) in manifest file.\\n` +\n\t\t\t\t\t\t`Current values are :(${oManifestUI5.rootView.viewName}/${\n\t\t\t\t\t\t\toManifestUI5.routing?.config?.routerClass || \"<missing router class>\"\n\t\t\t\t\t\t})\\n` +\n\t\t\t\t\t\t`Expected values are \\n` +\n\t\t\t\t\t\t`\\t - (${NAVCONF.NAVCONTAINER.VIEWNAME}/${NAVCONF.NAVCONTAINER.ROUTERCLASS})\\n` +\n\t\t\t\t\t\t`\\t - (${NAVCONF.FCL.VIEWNAME}/${NAVCONF.FCL.ROUTERCLASS})`\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tLog.info(`Rootcontainer: \"${oManifestUI5.rootView.viewName}\" - Routerclass: \"${NAVCONF.NAVCONTAINER.ROUTERCLASS}\"`);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync onServicesStarted(allServices: Service<unknown>[]): Promise<void> {\n\t\tthis._startedServices = allServices;\n\t\t// Execute all registered configuration handlers\n\t\tawait Promise.all(AppComponent.configurationHandlers.map(async (handler) => handler(this.additionalConfiguration)));\n\t\tawait this.initializeFeatureToggles();\n\t\tawait Promise.allSettled(\n\t\t\tAppComponent.instanceDependentProcesses.map(async (fnProcess) => {\n\t\t\t\treturn fnProcess.call(null, this);\n\t\t\t})\n\t\t);\n\n\t\t//router must be started once the rootcontainer is initialized\n\t\t//starting of the router\n\t\tconst finalizedRoutingInitialization = (): void => {\n\t\t\tthis.entityContainer\n\t\t\t\t.then(async () => {\n\t\t\t\t\tif (this.getRootViewController().attachRouteMatchers) {\n\t\t\t\t\t\tthis.getRootViewController().attachRouteMatchers();\n\t\t\t\t\t}\n\t\t\t\t\tthis.getRouter().initialize();\n\t\t\t\t\tthis.getRouterProxy().init(this, this._isFclEnabled());\n\n\t\t\t\t\treturn this.getValueHelpHistoryService().registerShellHook();\n\t\t\t\t})\n\t\t\t\t.catch((error: Error) => {\n\t\t\t\t\tconst oResourceBundle = Library.getResourceBundleFor(\"sap.fe.core\")!;\n\n\t\t\t\t\tthis.getRootViewController().displayErrorPage(\n\t\t\t\t\t\toResourceBundle.getText(\"C_APP_COMPONENT_SAPFE_APPSTART_TECHNICAL_ISSUES\"),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: oResourceBundle.getText(\"C_COMMON_SAPFE_ERROR\"),\n\t\t\t\t\t\t\tdescription: error.message\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t};\n\n\t\tif (this.bInitializeRouting) {\n\t\t\treturn this.getRoutingService()\n\t\t\t\t.initializeRouting()\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (this.getRootViewController()) {\n\t\t\t\t\t\tfinalizedRoutingInitialization();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.getRootControl().attachAfterInit(function () {\n\t\t\t\t\t\t\tfinalizedRoutingInitialization();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tthis._initializedKeeper.resolve();\n\t\t\t\t\treturn;\n\t\t\t\t})\n\t\t\t\t.catch(function (err: Error) {\n\t\t\t\t\tLog.error(`cannot cannot initialize routing: ${err.toString()}`);\n\t\t\t\t});\n\t\t} else {\n\t\t\tthis._initializedKeeper.resolve();\n\t\t}\n\t}\n\n\texit(): void {\n\t\tthis._startedServices = [];\n\t\tthis._oAppStateHandler.destroy();\n\t\tthis._oRouterProxy.destroy();\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t// @ts-ignore\n\t\tdelete this._oAppStateHandler;\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t// @ts-ignore\n\t\tdelete this._oRouterProxy;\n\t\tdeleteModelCacheData(this.getMetaModel());\n\t\tthis.getModel(\"ui\").destroy();\n\t\tthis.cleanPageConfigurationChanges();\n\t}\n\n\tgetMetaModel(): ODataMetaModel {\n\t\treturn this.getModel().getMetaModel();\n\t}\n\n\tgetDiagnostics(): Diagnostics {\n\t\treturn this._oDiagnostics;\n\t}\n\n\tdestroy(bSuppressInvalidate?: boolean): void {\n\t\tthis.isExiting = true;\n\n\t\t// LEAKS, with workaround for some Flex / MDC issue\n\t\ttry {\n\t\t\tdelete AppComponent.instanceMap[this.getId()];\n\n\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t// @ts-ignore\n\t\t\tdelete (window as unknown)._routing;\n\t\t} catch (e) {\n\t\t\tLog.info(e as string);\n\t\t}\n\n\t\t//WORKAROUND for sticky discard request : due to async callback, request triggered by the exitApplication will be send after the UIComponent.prototype.destroy\n\t\t//so we need to copy the Requestor headers as it will be destroy\n\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t// @ts-ignore\n\t\tconst oMainModel = this.oModels[undefined];\n\t\tlet oHeaders;\n\t\tif (oMainModel?.oRequestor) {\n\t\t\toHeaders = Object.assign({}, oMainModel.oRequestor.mHeaders);\n\t\t}\n\n\t\t// As we need to cleanup the application / handle the dirty object we need to call our cleanup before the models are destroyed\n\t\tthis.getRoutingService()?.beforeExit?.();\n\t\tthis.unregisterCallbacks();\n\t\tsuper.destroy(bSuppressInvalidate);\n\t\tif (oHeaders && oMainModel.oRequestor) {\n\t\t\toMainModel.oRequestor.mHeaders = oHeaders;\n\t\t}\n\t}\n\n\tgetRoutingService(): RoutingService {\n\t\treturn {} as RoutingService; // overriden at runtime\n\t}\n\n\tgetShellServices(): IShellServices {\n\t\treturn {} as IShellServices; // overriden at runtime\n\t}\n\n\tgetNavigationService(): NavigationService {\n\t\treturn {} as NavigationService; // overriden at runtime\n\t}\n\n\tgetSideEffectsService(): SideEffectsService {\n\t\treturn {} as SideEffectsService;\n\t}\n\n\tgetEnvironmentCapabilities(): EnvironmentCapabilitiesService {\n\t\treturn {} as EnvironmentCapabilitiesService;\n\t}\n\n\tgetCollaborationManagerService(): CollaborationManagerService {\n\t\treturn {} as CollaborationManagerService;\n\t}\n\n\tgetViewPreloaderService(): ViewPreloaderService {\n\t\treturn {} as ViewPreloaderService;\n\t}\n\n\tgetCollaborativeToolsService(): CollaborativeToolsService {\n\t\treturn {} as CollaborativeToolsService;\n\t}\n\n\tgetCollaborativeDraftService(): CollaborativeDraftService {\n\t\treturn {} as CollaborativeDraftService;\n\t}\n\n\tgetContextSharingService(): ContextSharingService {\n\t\treturn {} as ContextSharingService;\n\t}\n\n\tgetTelemetryService(): TelemetryService {\n\t\treturn {} as TelemetryService;\n\t}\n\n\tgetValueHelpHistoryService(): ValueHelpHistoryService {\n\t\treturn {} as ValueHelpHistoryService;\n\t}\n\n\tgetInlineEditService(): InlineEditService {\n\t\treturn {} as InlineEditService;\n\t}\n\n\tasync getStartupParameters(): Promise<StartupParameters> {\n\t\tconst oComponentData = this.getComponentData();\n\t\treturn Promise.resolve((oComponentData && oComponentData.startupParameters) || {});\n\t}\n\n\trestore(): void {\n\t\t// called by FLP when app sap-keep-alive is enabled and app is restored\n\t\tfor (const startedService of this._startedServices) {\n\t\t\tstartedService.onRestore?.();\n\t\t}\n\t\tthis.getRootViewController().viewState.onRestore();\n\n\t\t// Reset all values in versionActivationStatus to false\n\t\tAppStateHandler.resetVersionActivationStatus();\n\n\t\tthis.suspended = false;\n\t}\n\n\tsuspend(): void {\n\t\t// called by FLP when app sap-keep-alive is enabled and app is suspended\n\t\tfor (const startedService of this._startedServices) {\n\t\t\tstartedService.onSuspend?.();\n\t\t}\n\t\tthis.getRootViewController().viewState.onSuspend();\n\n\t\tthis.suspended = true;\n\t}\n\n\tisSuspended(): boolean {\n\t\treturn this.suspended;\n\t}\n\n\tasync isAppComponentBusy() : Promise<void> {\n\t\treturn this.discardPromise;\n\t}\n\n\t/**\n\t * navigateBasedOnStartupParameter function is a public api that acts as a wrapper to _manageDeepLinkStartup function. It passes the startup parameters further to _manageDeepLinkStartup function\n\t * @param startupParameters Defines the startup parameters which is further passed to _manageDeepLinkStartup function.\n\t */\n\n\tasync navigateBasedOnStartupParameter(startupParameters: StartupParameters | null | undefined): Promise<void> {\n\t\ttry {\n\t\t\tif (!BusyLocker.isLocked(this.getModel(\"ui\"))) {\n\t\t\t\tif (!startupParameters) {\n\t\t\t\t\tstartupParameters = null;\n\t\t\t\t}\n\t\t\t\tconst routingService = this.getRoutingService();\n\t\t\t\tawait routingService._manageDeepLinkStartup(startupParameters);\n\t\t\t}\n\t\t} catch (exception: unknown) {\n\t\t\tLog.error(exception as string);\n\t\t\tBusyLocker.unlock(this.getModel(\"ui\"));\n\t\t}\n\t}\n\n\t/**\n\t * Used to allow disabling the Collaboration Manager integration for the OVP use case.\n\t * @returns Whether the collaboration manager service is active.\n\t */\n\tisCollaborationManagerServiceEnabled(): boolean {\n\t\treturn true;\n\t}\n\n\t/**\n\t * Register processes that need to be run for every instance prior to startup.\n\t * @param fnProcess Function that hold the implementation of the process.\n\t *\n\t * The registered process can be an asynchronous process.\n\t * It shall be called with the AppComponent instance as a parameter before startup.\n\t */\n\tstatic registerInstanceDependentProcessForStartUp(fnProcess: (appComponent: AppComponent) => Promise<void>): void {\n\t\tthis.instanceDependentProcesses.push(fnProcess);\n\t}\n\n\t/**\n\t * Registers custom initialization checks that are run before the component is initialized.\n\t * This is useful for running checks that are specific to a library.\n\t * These checks are run before the component is initialized and before the manifest is merged.\n\t * @param fnProcess\n\t */\n\tstatic registerInitChecks(fnProcess: (manifestContent: ManifestContent[\"sap.ui5\"]) => void): void {\n\t\tthis._customManifestChecks.push(fnProcess);\n\t}\n\n\t/**\n\t * Registers the callbacks related to a sticky edit session.\n\t * @param dirtyStateProviderCallback\n\t * @param discardAfterNavigationCallback\n\t * @param sessionTimeoutCallback\n\t */\n\tregisterCallbacks(\n\t\tdirtyStateProviderCallback: Function,\n\t\tdiscardAfterNavigationCallback: Function,\n\t\tsessionTimeoutCallback?: Function\n\t): void {\n\t\tthis.dirtyStateProviderCallback = dirtyStateProviderCallback;\n\t\tthis.getShellServices().registerDirtyStateProvider(dirtyStateProviderCallback);\n\n\t\tif (sessionTimeoutCallback) {\n\t\t\tthis.stickySessionTimeoutCallback = sessionTimeoutCallback;\n\t\t\tthis.getModel().attachSessionTimeout(sessionTimeoutCallback);\n\t\t}\n\n\t\tthis.discardAfterNavigationCallback = discardAfterNavigationCallback;\n\t\tthis._routeMatchHandler = (): void => {\n\t\t\tif (this.discardAfterNavigationCallback) {\n\t\t\t\tthis.discardPromise = this.discardAfterNavigationCallback();\n\t\t\t}\n\t\t};\n\t\tthis.getRoutingService().attachRouteMatched({}, this._routeMatchHandler);\n\t}\n\n\t/**\n\t * Unregisters the callbacks related to a sticky edit session.\n\t */\n\tunregisterCallbacks(): void {\n\t\tif (this.dirtyStateProviderCallback) {\n\t\t\tthis.getShellServices().deregisterDirtyStateProvider(this.dirtyStateProviderCallback);\n\t\t\tthis.dirtyStateProviderCallback = undefined;\n\t\t}\n\t\tif (this.stickySessionTimeoutCallback && this.getModel()) {\n\t\t\tthis.getModel().detachSessionTimeout(this.stickySessionTimeoutCallback);\n\t\t\tthis.stickySessionTimeoutCallback = undefined;\n\t\t}\n\t\tif (this._routeMatchHandler) {\n\t\t\tthis.getRoutingService().detachRouteMatched(this._routeMatchHandler);\n\t\t\tthis._routeMatchHandler = undefined;\n\t\t\tthis.discardAfterNavigationCallback = undefined;\n\t\t}\n\t}\n\n\t/**\n\t * Checks if the component is embedded in another application.\n\t * This is determined by checking if the component data contains a `feEnvironment` object.\n\t * This is set when the component is embedded in My Inbox.\n\t * @returns True if the component is embedded, false otherwise.\n\t */\n\t_isEmbedded(): boolean {\n\t\treturn !!this.getComponentData().feEnvironment;\n\t}\n}\n\ninterface AppComponent extends UIComponent {\n\tisAdaptationMode(): boolean;\n\tgetManifest(): ManifestContent;\n\tgetManifestEntry(entry: \"sap.app\"): ManifestContent[\"sap.app\"];\n\tgetManifestEntry(entry: \"sap.ui5\"): ManifestContent[\"sap.ui5\"];\n\t_getManifestEntry(entry: \"sap.ui5\", merged: boolean): ManifestContent[\"sap.ui5\"];\n\tgetManifestEntry(entry: \"sap.ui\"): ManifestContent[\"sap.ui\"];\n\tgetManifestEntry(entry: \"sap.fe\"): ManifestContent[\"sap.fe\"] | undefined;\n\tgetManifestEntry(entry: \"sap.fiori\"): ManifestContent[\"sap.fiori\"];\n\tgetComponentData(): ComponentData;\n\tgetRootControl(): {\n\t\tgetController(): RootViewBaseController;\n\t} & View;\n\tgetModel(): ODataModel;\n\tgetModel(name: \"ui\"): JSONModel;\n\tgetModel(name: string): Model | undefined;\n}\n\nexport default AppComponent;\n"],"mappings":"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","ignoreList":[]}