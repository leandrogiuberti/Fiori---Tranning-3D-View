{"version":3,"file":"ExtensionAPI.js","names":["ExtensionAPI","_dec","defineUI5Class","_dec2","property","type","_dec3","_dec4","_dec5","_class","_class2","_BaseObject","oController","sId","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_formatters","ValueFormatter","StandardFormatter","CriticalityFormatter","FPMFormatter","KPIFormatter","CollaborationFormatter","_controller","_view","getView","extension","editFlow","routing","intentBasedNavigation","collaborativeDraft","_routing","_intentBasedNavigation","_prefix","_inheritsLoose","_proto","prototype","getEditFlow","getRouting","getIntentBasedNavigation","byId","id","control","undefined","isA","parent","getParent","Error","getId","getModel","sModelName","oAppComponent","CommonUtils","getAppComponent","getManifestEntry","models","addDependent","oControl","removeDependent","navigateToTarget","sTarget","oContext","loadFragment","async","mSettings","_this2","oTemplateComponent","Component","getOwnerComponentFor","getService","oPageModel","i18nModel","oMetaModel","getMetaModel","mViewData","getViewData","targetContextPath","getEntitySet","getContextPath","oViewDataModel","JSONModel","oPreprocessorSettings","bindingContexts","contextPath","createBindingContext","converterContext","noResolve","viewData","metaModel","appComponent","controllerInstance","controller","subClass","getMetadata","getClass","extend","controllerElementKey","controllerElement","bind","boundFunction","_len","arguments","length","args","Array","_key","runAsOwner","apply","Object","defineProperty","get","set","v","newIsA","className","oTemplatePromise","templateControlFragment","name","isXML","containingView","oFragment","initialBindingContext","setBindingContext","oError","Log","error","updateAppState","view","appStateInfo","getAppStateHandler","createAppState","viewId","appStateData","runWithFPMContext","fn","templateComponent","watchProperty","propertyName","callback","DataWatcher","propertyBinding","compileExpression","pathInModel","valueChanged","e","getParameter","BaseObject","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./ExtensionAPI.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport { compileExpression, pathInModel } from \"sap/fe/base/BindingToolkit\";\nimport type { EnhanceWithUI5 } from \"sap/fe/base/ClassSupport\";\nimport { defineUI5Class, property } from \"sap/fe/base/ClassSupport\";\nimport type { FEView } from \"sap/fe/core/BaseController\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type PageController from \"sap/fe/core/PageController\";\nimport type TemplateComponent from \"sap/fe/core/TemplateComponent\";\nimport type EditFlow from \"sap/fe/core/controllerextensions/EditFlow\";\nimport type IntentBasedNavigation from \"sap/fe/core/controllerextensions/IntentBasedNavigation\";\nimport type InternalRouting from \"sap/fe/core/controllerextensions/InternalRouting\";\nimport type Routing from \"sap/fe/core/controllerextensions/Routing\";\nimport type { WatcherCallback } from \"sap/fe/core/controls/DataWatcher\";\nimport DataWatcher from \"sap/fe/core/controls/DataWatcher\";\nimport CollaborationFormatter from \"sap/fe/core/formatters/CollaborationFormatter\";\nimport CriticalityFormatter from \"sap/fe/core/formatters/CriticalityFormatter\";\nimport FPMFormatter from \"sap/fe/core/formatters/FPMFormatter\";\nimport KPIFormatter from \"sap/fe/core/formatters/KPIFormatter\";\nimport StandardFormatter from \"sap/fe/core/formatters/StandardFormatter\";\nimport ValueFormatter from \"sap/fe/core/formatters/ValueFormatter\";\nimport type MacroAPI from \"sap/fe/macros/MacroAPI\";\nimport type FormAPI from \"sap/fe/macros/form/FormAPI\";\nimport BaseObject from \"sap/ui/base/Object\";\nimport Component from \"sap/ui/core/Component\";\nimport type Control from \"sap/ui/core/Control\";\nimport type UI5Element from \"sap/ui/core/Element\";\nimport type Context from \"sap/ui/model/Context\";\nimport type Model from \"sap/ui/model/Model\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type ODataV4Context from \"sap/ui/model/odata/v4/Context\";\nimport type { TSFunction } from \"../../../../../../types/extension_types\";\nimport type CollaborativeDraft from \"./controllerextensions/CollaborativeDraft\";\nimport type InternalIntentBasedNavigation from \"./controllerextensions/InternalIntentBasedNavigation\";\n\n/**\n * Common Extension API for all pages of SAP Fiori elements for OData V4.\n *\n * To correctly integrate your app extension coding with SAP Fiori elements, use only the extensionAPI of SAP Fiori elements. Don't access or manipulate controls, properties, models, or other internal objects created by the SAP Fiori elements framework.\n * {@link demo:sap/fe/core/fpmExplorer/index.html#/controllerExtensions/controllerExtensionsOverview Overview of Building Block}\n * @public\n * @hideconstructor\n * @since 1.79.0\n */\n@defineUI5Class(\"sap.fe.core.ExtensionAPI\")\nclass ExtensionAPI extends BaseObject {\n\t/**\n\t * A controller extension offering hooks into the edit flow of the application.\n\t * {@link demo:sap/fe/core/fpmExplorer/index.html#/controllerExtensions/basicExtensibility Overview of Building Block}\n\t * @public\n\t */\n\t@property({ type: \"sap.fe.core.controllerextensions.EditFlow\" })\n\teditFlow: EditFlow;\n\n\t/**\n\t * A controller extension offering hooks into the routing flow of the application.\n\t * {@link demo:sap/fe/core/fpmExplorer/index.html#/controllerExtensions/routingExtensibility Overview of Building Block}\n\t * @public\n\t */\n\t@property({ type: \"sap.fe.core.controllerextensions.Routing\" })\n\trouting: Routing;\n\n\t/**\n\t * ExtensionAPI for intent-based navigation\n\t * @public\n\t */\n\t@property({ type: \"sap.fe.core.controllerextensions.IntentBasedNavigation\" })\n\tintentBasedNavigation: IntentBasedNavigation;\n\n\t/**\n\t * ExtensionAPI for collaborative draft handling\n\t * @public\n\t * @ui5-experimental-since 1.141.0\n\t * @since 1.141.0\n\t */\n\t@property({ type: \"sap.fe.core.controllerextensions.CollaborativeDraft\" })\n\tcollaborativeDraft: CollaborativeDraft;\n\n\tpublic _controller: PageController;\n\n\tprotected _view: FEView;\n\n\tprivate _routing: InternalRouting;\n\n\tprivate _intentBasedNavigation: InternalIntentBasedNavigation;\n\n\tprivate _prefix?: string;\n\n\tprivate extension: Record<string, unknown>;\n\n\tprotected _formatters = {\n\t\tValueFormatter: ValueFormatter,\n\t\tStandardFormatter: StandardFormatter,\n\t\tCriticalityFormatter: CriticalityFormatter,\n\t\tFPMFormatter: FPMFormatter,\n\t\tKPIFormatter: KPIFormatter,\n\t\tCollaborationFormatter: CollaborationFormatter\n\t};\n\n\tconstructor(oController: PageController, sId?: string) {\n\t\tsuper();\n\t\tthis._controller = oController;\n\t\tthis._view = oController.getView();\n\t\tthis.extension = this._controller.extension;\n\t\tthis.editFlow = this._controller.editFlow;\n\t\tthis.routing = this._controller.routing;\n\t\tthis.intentBasedNavigation = this._controller.intentBasedNavigation;\n\t\tthis.collaborativeDraft = this._controller.collaborativeDraft;\n\n\t\t// Setting internal controller extensions for default building block handler to work when using ExtensionAPI as controller in custom fragment scnearios.\n\t\tthis._routing = this._controller._routing;\n\t\tthis._intentBasedNavigation = this._controller._intentBasedNavigation;\n\t\tthis._prefix = sId;\n\t}\n\n\t/**\n\t * Retrieves the editFlow controller extension for this page.\n\t * @public\n\t * @returns The editFlow controller extension\n\t */\n\tgetEditFlow(): EditFlow {\n\t\treturn this.editFlow;\n\t}\n\n\t/**\n\t * Retrieves the routing controller extension for this page.\n\t * @public\n\t * @returns The routing controller extension\n\t */\n\tgetRouting(): Routing {\n\t\treturn this.routing;\n\t}\n\n\t/**\n\t * Retrieves the intentBasedNavigation controller extension for this page.\n\t * @public\n\t * @returns The intentBasedNavigation controller extension\n\t */\n\tgetIntentBasedNavigation(): IntentBasedNavigation {\n\t\treturn this.intentBasedNavigation;\n\t}\n\n\t/**\n\t * Access a control by its ID. If you attempt to access an internal control instead of the stable API, the method will raise an error.\n\t * @param id ID of the control without view and section prefix.\n\t * @returns The requested control, if found in the view / section.\n\t * @public\n\t */\n\tbyId(id: string): UI5Element | undefined {\n\t\tlet control = this._view.byId(id);\n\n\t\tif (!control && this._prefix) {\n\t\t\t// give it a try with the prefix\n\t\t\tcontrol = this._view.byId(`${this._prefix}--${id}`);\n\t\t}\n\n\t\tif (!control) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (!control.isA<MacroAPI>(\"sap.fe.macros.MacroAPI\")) {\n\t\t\t// check if app tried to access an internal control wrapped by a macro API\n\t\t\tlet parent = control.getParent();\n\n\t\t\twhile (parent) {\n\t\t\t\tif (parent.isA<FormAPI>(\"sap.fe.macros.form.FormAPI\")) {\n\t\t\t\t\t// we reached the formAPI but no field - the app tries to access any custom control which is fine\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (parent.isA<MacroAPI>(\"sap.fe.macros.MacroAPI\")) {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`You attempted to access an internal control. This is risky and might change later. Instead access its stable API by using ID ${parent.getId()}`\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tparent = parent.getParent();\n\t\t\t}\n\t\t}\n\n\t\treturn control;\n\t}\n\n\t/**\n\t * Get access to models managed by SAP Fiori elements.<br>\n\t * The following models can be accessed:\n\t * <ul>\n\t * <li>undefined: the undefined model returns the SAPUI5 OData V4 model bound to this page</li>\n\t * <li>i18n / further data models defined in the manifest</li>\n\t * <li>ui: returns a SAPUI5 JSON model containing UI information.\n\t * Only the following properties are public and supported:\n\t * <ul>\n\t * <li>isEditable: set to true if the application is in edit mode</li>\n\t * </ul>\n\t * </li>\n\t * </ul>.\n\t * editMode is deprecated and should not be used anymore. Use isEditable instead.\n\t * @param sModelName Name of the model\n\t * @returns The required model\n\t * @public\n\t */\n\tgetModel(sModelName?: string): Model | undefined {\n\t\tlet oAppComponent;\n\n\t\tif (sModelName && sModelName !== \"ui\") {\n\t\t\toAppComponent = CommonUtils.getAppComponent(this._view);\n\t\t\tif (!oAppComponent.getManifestEntry(\"sap.ui5\").models[sModelName]) {\n\t\t\t\t// don't allow access to our internal models\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\n\t\treturn this._view.getModel(sModelName);\n\t}\n\n\t/**\n\t * Add any control as a dependent control to this SAP Fiori elements page.\n\t * @param oControl Control to be added as a dependent control\n\t * @public\n\t */\n\taddDependent(oControl: Control): void {\n\t\tthis._view.addDependent(oControl);\n\t}\n\n\t/**\n\t * Remove a dependent control from this SAP Fiori elements page.\n\t * @param oControl Control to be added as a dependent control\n\t * @public\n\t */\n\tremoveDependent(oControl: Control): void {\n\t\tthis._view.removeDependent(oControl);\n\t}\n\n\t/**\n\t * Navigate to another target.\n\t * @param sTarget Name of the target route\n\t * @param [oContext] OData v4 context instance\n\t * @public\n\t */\n\tnavigateToTarget(sTarget: string, oContext: ODataV4Context): void {\n\t\tthis._controller._routing.navigateToTarget(oContext, sTarget);\n\t}\n\n\t/**\n\t * Load a fragment and go through the template preprocessor with the current page context.\n\t * @param mSettings The settings object\n\t * @param mSettings.id The ID of the fragment itself\n\t * @param mSettings.name The name of the fragment to be loaded\n\t * @param mSettings.controller The controller to be attached to the fragment\n\t * @param mSettings.contextPath The contextPath to be used for the templating process\n\t * @param mSettings.initialBindingContext The initial binding context\n\t * @returns The fragment definition\n\t * @public\n\t */\n\tasync loadFragment(mSettings: {\n\t\tid: string;\n\t\tname: string;\n\t\tcontroller?: object;\n\t\tcontextPath?: string;\n\t\tinitialBindingContext?: Context;\n\t}): Promise<UI5Element | UI5Element[]> {\n\t\tconst oTemplateComponent = Component.getOwnerComponentFor(this._view) as EnhanceWithUI5<TemplateComponent>;\n\t\tawait oTemplateComponent.getService(\"templatedViewService\");\n\t\tconst oPageModel = this._view.getModel(\"_pageModel\");\n\t\tconst i18nModel = this._view.getModel(\"sap.fe.i18n\");\n\t\tconst oMetaModel = oTemplateComponent.getMetaModel();\n\t\tconst mViewData = oTemplateComponent.getViewData();\n\t\tconst targetContextPath = oTemplateComponent.getEntitySet()\n\t\t\t? `/${oTemplateComponent.getEntitySet()!}`\n\t\t\t: oTemplateComponent.getContextPath()!;\n\t\tconst oViewDataModel = new JSONModel(mViewData),\n\t\t\toPreprocessorSettings = {\n\t\t\t\tbindingContexts: {\n\t\t\t\t\tcontextPath: oMetaModel?.createBindingContext(mSettings.contextPath || targetContextPath),\n\t\t\t\t\tconverterContext: oPageModel.createBindingContext(\"/\", undefined, { noResolve: true }),\n\t\t\t\t\tviewData: mViewData ? oViewDataModel.createBindingContext(\"/\") : null\n\t\t\t\t},\n\t\t\t\tmodels: {\n\t\t\t\t\tcontextPath: oMetaModel,\n\t\t\t\t\tconverterContext: oPageModel,\n\t\t\t\t\tmetaModel: oMetaModel,\n\t\t\t\t\tviewData: oViewDataModel,\n\t\t\t\t\t\"sap.fe.i18n\": i18nModel\n\t\t\t\t},\n\t\t\t\tappComponent: CommonUtils.getAppComponent(this._view)\n\t\t\t};\n\n\t\t// We scope the fragment with our ExtensionAPI. If a controller object is passed we merge it with the extensionAPI\n\t\tlet controllerInstance: ExtensionAPI;\n\t\tif (mSettings.controller && !(mSettings.controller as ExtensionAPI)?.isA?.(\"sap.fe.core.ExtensionAPI\")) {\n\t\t\tconst subClass = (\n\t\t\t\tthis.getMetadata().getClass() as unknown as {\n\t\t\t\t\textend: (id: string, content: object) => { new (pageController: PageController): ExtensionAPI };\n\t\t\t\t}\n\t\t\t).extend(mSettings.id + \"-controller\", {});\n\t\t\tfor (const controllerElementKey in mSettings.controller) {\n\t\t\t\tconst controllerElement = mSettings.controller[controllerElementKey as keyof typeof mSettings.controller];\n\t\t\t\tif ((controllerElement as Function)?.bind) {\n\t\t\t\t\tconst boundFunction = (controllerElement as Function).bind(mSettings.controller);\n\t\t\t\t\tif (oTemplateComponent) {\n\t\t\t\t\t\tsubClass.prototype[controllerElementKey] = (...args: unknown[]): unknown => {\n\t\t\t\t\t\t\treturn oTemplateComponent.runAsOwner(() => boundFunction.apply(this, args));\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsubClass.prototype[controllerElementKey] = boundFunction;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tObject.defineProperty(subClass.prototype, controllerElementKey, {\n\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\treturn mSettings.controller?.[controllerElementKey as keyof typeof mSettings.controller];\n\t\t\t\t\t\t},\n\t\t\t\t\t\tset(v: unknown) {\n\t\t\t\t\t\t\tif (mSettings.controller) {\n\t\t\t\t\t\t\t\t(mSettings.controller[controllerElementKey as keyof typeof mSettings.controller] as unknown) = v;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tcontrollerInstance = new subClass(this._controller);\n\t\t\tconst newIsA = controllerInstance.isA;\n\t\t\tcontrollerInstance.isA = (className: string): boolean => {\n\t\t\t\t// We keep the \tsap.fe.core.ExtensionAPI as a valid type for this new class\n\t\t\t\t// this type is lost as soon as the merged controller object gets a method isA\n\t\t\t\treturn newIsA.bind(controllerInstance)(className) || this.isA(className);\n\t\t\t};\n\t\t} else {\n\t\t\tcontrollerInstance = (mSettings.controller as ExtensionAPI) ?? this;\n\t\t}\n\t\treturn oTemplateComponent.runAsOwner(async () => {\n\t\t\tconst oTemplatePromise = CommonUtils.templateControlFragment(mSettings.name, oPreprocessorSettings, {\n\t\t\t\tcontroller: controllerInstance,\n\t\t\t\tisXML: false,\n\t\t\t\tid: mSettings.id,\n\t\t\t\tcontainingView: this._view,\n\t\t\t\tcontextPath: mSettings.contextPath ?? targetContextPath\n\t\t\t}) as Promise<Control>;\n\t\t\ttry {\n\t\t\t\tconst oFragment: Control = await oTemplatePromise;\n\t\t\t\tif (mSettings.initialBindingContext !== undefined) {\n\t\t\t\t\toFragment.setBindingContext(mSettings.initialBindingContext);\n\t\t\t\t}\n\t\t\t\tthis.addDependent(oFragment);\n\t\t\t\treturn oFragment;\n\t\t\t} catch (oError) {\n\t\t\t\tLog.error(oError as string);\n\t\t\t}\n\t\t}) as Promise<UI5Element | UI5Element[]>;\n\t}\n\n\t/**\n\t * Triggers an update of the app state.\n\t * Should be called if the state of a control, or any other state-relevant information, was changed.\n\t * @returns A promise that resolves with the new app state object.\n\t * @public\n\t */\n\tasync updateAppState(): Promise<void | { appState: object | undefined }> {\n\t\tconst view = this._controller.getView();\n\t\tconst appComponent = this._controller.getAppComponent();\n\t\tconst appStateInfo = await appComponent.getAppStateHandler().createAppState({\n\t\t\tviewId: view.getId()\n\t\t});\n\t\treturn appStateInfo?.appStateData;\n\t}\n\n\t/**\n\t * Run the given function with the FPM context of the current page.\n\t * This allows to initialize all the elements required by building blocks to render correctly.\n\t * @param fn The Function to be executed\n\t * @returns The result of the function\n\t * @public\n\t */\n\trunWithFPMContext(fn: Function): unknown {\n\t\tconst templateComponent = Component.getOwnerComponentFor(this._view) as EnhanceWithUI5<TemplateComponent>;\n\t\treturn templateComponent.runAsOwner(fn as TSFunction);\n\t}\n\n\t/**\n\t * Watch a property from the main page context and trigger a callback when the value changes.\n\t * @param propertyName The name of the property to watch\n\t * @param callback The callback to trigger when the value changes\n\t * @public\n\t */\n\twatchProperty(propertyName: string, callback: WatcherCallback): void {\n\t\tthis._view.addDependent(\n\t\t\tnew DataWatcher({\n\t\t\t\tpropertyBinding: compileExpression(pathInModel(propertyName)),\n\t\t\t\tvalueChanged: (e): void => {\n\t\t\t\t\tcallback(e.getParameter(\"value\"), e.getParameter(\"oldValue\"), e.getParameter(\"isInitial\"), e.getParameter(\"context\"));\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n}\n\nexport default ExtensionAPI;\n"],"mappings":"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","ignoreList":[]}