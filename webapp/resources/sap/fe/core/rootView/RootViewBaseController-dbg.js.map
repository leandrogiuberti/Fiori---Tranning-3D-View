{"version":3,"names":["RootViewBaseController","_dec","defineUI5Class","_dec2","usingExtension","Placeholder","_dec3","ViewState","_class","_class2","_BaseController","_this","_len","arguments","length","args","Array","_key","call","_initializerDefineProperty","_descriptor","_descriptor2","bIsComputingTitleHierachy","_numberOfRoutesInProgress","_inheritsLoose","_proto","prototype","onInit","SizeHelper","init","_aHelperModels","getPlaceholder","oPlaceholder","attachRouteMatchers","getAppComponent","getRoutingService","attachAfterRouteMatched","onAfterRouteMatched","onExit","detachAfterRouteMatched","oRouter","undefined","exit","forEach","oModel","destroy","getViewFromContainer","container","result","isA","getComponentInstance","getRootControl","getViewsFromPages","pages","views","page","view","push","getResourceBundle","getOwnerComponent","getModel","getRouter","_createHelperModel","JSONModel","routingIsComplete","_routingIsComplete","promise","Promise","resolve","waitForRightMostViewReady","oEvent","reject","aContainers","getParameter","aFEContainers","defaultView","oContainer","oView","oComponentInstance","getController","pageReady","oRightMostFEView","isPageReady","attachEventOnce","Error","restoreFocusFromHistory","history","state","focusInfo","type","table","Element","getElementById","tableId","pos","getRowBinding","getCurrentContexts","findIndex","context","getPath","contextPathFocus","focusRow","controlId","focus","replaceState","Object","assign","event","PromiseKeeper","currentRouteId","getVisibleViews","includes","rootControl","getView","getContent","getAutoFocus","setProperty","appComponent","_scrollTablesToLastNavigatedItems","getEnvironmentCapabilities","getCapabilities","UShell","computeTitleHierarchy","forceFocus","getRouterProxy","isFocusForced","setFocusForced","getParent","onPageReady","getLastHistoryEntry","focusControlId","restoreFocusForCurrentHash","onContainerReady","error","Log","_getTitleHierarchyCache","oTitleHierarchyCache","clearTitleHierarchyCache","path","_computeTitleInfo","title","subtitle","sIntent","description","icon","aParts","split","intent","_formatTitle","displayMode","titleValue","titleDescription","formattedTitle","_fetchTitleValue","model","metaModel","getMetaModel","metaPath","getMetaPath","bindingViewContext","createBindingContext","headerInfoTitleValueAnnotation","getObject","valueExpression","AnnotationHelper","format","$Function","anyObject","Any","any","setModel","setBindingContext","textBinding","getBinding","all","getBindings","map","binding","requestValue","infoTitle","getAny","textExpression","propertyContext","promises","parsedvalueExpression","BindingInfo","parse","promiseForDisplayMode","CommonUtils","computeDisplayMode","valuePath","parts","fnValueFormatter","formatter","valueBinding","bindProperty","$$groupId","initialize","promiseForTitleValue","fnChange","targetValue","getSource","getValue","detachChange","attachChange","parsedTextExpression","textPath","lastIndexOf","slice","fnTextFormatter","promiseForTitleText","targetText","titleInfo","getAppSpecificHash","hashChanger","HashChanger","getInstance","hrefForAppSpecificHash","URI","decode","_getHash","getHash","getTitleInfoFromPath","sPath","oMetaModel","sEntityPath","sTypeName","sAppSpecificHash","then","sTitle","oTitleInfo","_ensureHierarchyElementsAreStrings","aHierarchy","aHierarchyShell","level","oHierarchy","oShellHierarchy","key","String","getTargetOptionsFromHash","sHash","oAppComponent","aRoutes","getManifestEntry","routing","routes","route","oRoute","getRoute","name","match","sTarget","getRouteTargetNames","target","getTarget","_oOptions","getTargetTypeFromHash","_getBrowserTitle","titleInfoHierarchyShell","pageTitleInformation","breadcrumbTexts","firstPart","secondPart","titleInfoHierarchy","pop","toString","trim","join","headerText","_setTitles","appTitle","browserTitle","_setShellMenuTitle","removeEmptyParamFromHash","appSpecificHash","shellServiceHelper","getShellServices","parsedUrl","parseShellHash","params","startsWith","constructShellHash","getBindingContext","currentPage","titleInfoHierarchySeq","manifestAppSettings","appSubTitle","subTitle","appIcon","newPath","_getPageTitleInformation","getRootLevelTitleInformation","pathParts","shift","pathPart","getRouteInfoByHash","parameterPath","isParameterized","hash","endsWith","substring","reverse","setHierarchy","errorMessage","calculateLayout","iNextFCLLevel","sProposedLayout","keepCurrentLayout","onContextBoundToView","oContext","sDeepestPath","getProperty","sViewContextPath","indexOf","displayErrorPage","_errorMessage","_parameters","_FCLLevel","updateUIStateForView","FCLLevel","getInstancedViews","isFclEnabled","sAppTitle","additionalInformation","setTitle","getAppContentContainer","appContentId","config","byId","BaseController","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sourceRoot":".","sources":["RootViewBaseController.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport type FlexibleColumnLayout from \"sap/f/FlexibleColumnLayout\";\nimport { defineUI5Class, usingExtension } from \"sap/fe/base/ClassSupport\";\nimport type { FEView } from \"sap/fe/core/BaseController\";\nimport BaseController from \"sap/fe/core/BaseController\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type TemplateComponent from \"sap/fe/core/TemplateComponent\";\nimport { type NavigationToErrorPageResult } from \"sap/fe/core/controllerextensions/MessageHandler\";\nimport Placeholder from \"sap/fe/core/controllerextensions/Placeholder\";\nimport ViewState from \"sap/fe/core/controllerextensions/ViewState\";\nimport { getRouteTargetNames } from \"sap/fe/core/helpers/ManifestHelper\";\nimport PromiseKeeper from \"sap/fe/core/helpers/PromiseKeeper\";\nimport SizeHelper from \"sap/fe/core/helpers/SizeHelper\";\nimport type FclController from \"sap/fe/core/rootView/Fcl.controller\";\nimport type NavContainer from \"sap/m/NavContainer\";\nimport BindingInfo from \"sap/ui/base/BindingInfo\";\nimport type ComponentContainer from \"sap/ui/core/ComponentContainer\";\nimport type Control from \"sap/ui/core/Control\";\nimport Element from \"sap/ui/core/Element\";\nimport type View from \"sap/ui/core/mvc/View\";\nimport HashChanger from \"sap/ui/core/routing/HashChanger\";\nimport type { Route$MatchedEvent } from \"sap/ui/core/routing/Route\";\nimport type Router from \"sap/ui/core/routing/Router\";\nimport type Table from \"sap/ui/mdc/Table\";\nimport type CompositeBinding from \"sap/ui/model/CompositeBinding\";\nimport type Context from \"sap/ui/model/Context\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport AnnotationHelper from \"sap/ui/model/odata/v4/AnnotationHelper\";\nimport type { ODataPropertyBinding$ChangeEvent } from \"sap/ui/model/odata/v4/ODataPropertyBinding\";\nimport type ResourceModel from \"sap/ui/model/resource/ResourceModel\";\nimport URI from \"sap/ui/thirdparty/URI\";\nimport type { TitleAdditionalInfo } from \"sap/ushell/ui5service/ShellUIService\";\nimport type AppComponent from \"../AppComponent\";\nimport Any from \"../controls/Any\";\n\nexport type TitleInformation = {\n\ttitle?: string;\n\tsubtitle?: string;\n\ticon?: string;\n\tintent?: string;\n\tdescription?: string;\n};\n\ntype TargetOptions = {\n\tname: string;\n\toptions?: {\n\t\tsettings?: {\n\t\t\tcontextPath?: string;\n\t\t\tentitySet?: string;\n\t\t};\n\t};\n};\n\n@defineUI5Class(\"sap.fe.core.rootView.RootViewBaseController\")\nclass RootViewBaseController extends BaseController {\n\t@usingExtension(Placeholder)\n\toPlaceholder!: Placeholder;\n\n\t@usingExtension(ViewState)\n\tviewState!: ViewState;\n\n\tprivate _aHelperModels!: JSONModel[];\n\n\tprivate oRouter?: Router;\n\n\tprivate oTitleHierarchyCache?: Record<string, TitleInformation>;\n\n\tprivate bIsComputingTitleHierachy = false;\n\n\tprivate _routingIsComplete?: PromiseKeeper<void>;\n\n\tprivate _numberOfRoutesInProgress = 0;\n\n\tonInit(): void {\n\t\tSizeHelper.init();\n\n\t\tthis._aHelperModels = [];\n\t}\n\n\tgetPlaceholder(): Placeholder {\n\t\treturn this.oPlaceholder;\n\t}\n\n\tattachRouteMatchers(): void {\n\t\tthis.oPlaceholder.attachRouteMatchers();\n\t\tthis.getAppComponent().getRoutingService().attachAfterRouteMatched({}, this.onAfterRouteMatched, this);\n\t}\n\n\tonExit(): void {\n\t\tthis.getAppComponent().getRoutingService().detachAfterRouteMatched(this.onAfterRouteMatched, this);\n\t\tthis.oRouter = undefined;\n\n\t\tSizeHelper.exit();\n\n\t\t// Destroy all JSON models created dynamically for the views\n\t\tthis._aHelperModels.forEach(function (oModel: JSONModel) {\n\t\t\toModel.destroy();\n\t\t});\n\t}\n\n\tgetViewFromContainer(container: Control): View | undefined {\n\t\tconst result = container.isA<ComponentContainer>(\"sap.ui.core.ComponentContainer\")\n\t\t\t? container.getComponentInstance().getRootControl()\n\t\t\t: container;\n\n\t\treturn result?.isA<View>(\"sap.ui.core.mvc.View\") ? result : undefined;\n\t}\n\n\t/**\n\t * Analyze the pages and return the corresponding views.\n\t * @param pages The pages to be analyzed.\n\t * @returns The views\n\t */\n\tprotected getViewsFromPages(pages: Control[]): View[] {\n\t\tconst views: View[] = [];\n\n\t\tpages.forEach((page) => {\n\t\t\tconst view = this.getViewFromContainer(page);\n\n\t\t\tif (view !== undefined) {\n\t\t\t\tviews.push(view);\n\t\t\t}\n\t\t});\n\n\t\treturn views;\n\t}\n\n\t/**\n\t * Convenience method for getting the resource bundle.\n\t * @public\n\t * @returns The resourceModel of the component\n\t */\n\tgetResourceBundle(): ResourceBundle | Promise<ResourceBundle> {\n\t\treturn (this.getOwnerComponent().getModel(\"i18n\") as ResourceModel).getResourceBundle();\n\t}\n\n\tgetRouter(): Router {\n\t\tif (!this.oRouter) {\n\t\t\tthis.oRouter = this.getAppComponent().getRouter();\n\t\t}\n\n\t\treturn this.oRouter;\n\t}\n\n\t_createHelperModel(): JSONModel {\n\t\t// We keep a reference on the models created dynamically, as they don't get destroyed\n\t\t// automatically when the view is destroyed.\n\t\t// This is done during onExit\n\t\tconst oModel = new JSONModel();\n\t\tthis._aHelperModels.push(oModel);\n\n\t\treturn oModel;\n\t}\n\n\tasync routingIsComplete(): Promise<void> {\n\t\tawait (this._routingIsComplete?.promise || Promise.resolve());\n\t}\n\n\t/**\n\t * Function waiting for the Right most view to be ready.\n\t * @param oEvent Reference an Event parameter coming from routeMatched event\n\t * @returns A promise indicating when the right most view is ready\n\t */\n\tasync waitForRightMostViewReady(oEvent: Route$MatchedEvent): Promise<FEView> {\n\t\treturn new Promise(function (resolve: (value: FEView) => void, reject: (reason?: Error) => void) {\n\t\t\tconst aContainers = oEvent.getParameter(\"views\") ?? [],\n\t\t\t\t// There can also be reuse components in the view, remove them before processing.\n\t\t\t\taFEContainers: FEView[] = [];\n\t\t\tlet defaultView: FEView | undefined;\n\t\t\taContainers.forEach(function (oContainer: View | ComponentContainer | undefined) {\n\t\t\t\tlet oView = oContainer as FEView | undefined;\n\t\t\t\tif (oContainer && (oContainer as ComponentContainer).getComponentInstance) {\n\t\t\t\t\tconst oComponentInstance = (oContainer as ComponentContainer).getComponentInstance();\n\t\t\t\t\toView = oComponentInstance.getRootControl() as FEView;\n\t\t\t\t}\n\t\t\t\tif (oView && oView.getController() && oView.getController().pageReady) {\n\t\t\t\t\taFEContainers.push(oView);\n\t\t\t\t} else if (oView) {\n\t\t\t\t\tdefaultView = oView;\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst oRightMostFEView = aFEContainers[aFEContainers.length - 1];\n\t\t\tif (oRightMostFEView && oRightMostFEView.getController().pageReady.isPageReady()) {\n\t\t\t\tresolve(oRightMostFEView);\n\t\t\t} else if (oRightMostFEView) {\n\t\t\t\toRightMostFEView.getController().pageReady.attachEventOnce(\"pageReady\", function () {\n\t\t\t\t\tresolve(oRightMostFEView);\n\t\t\t\t});\n\t\t\t} else if (defaultView) {\n\t\t\t\tresolve(defaultView);\n\t\t\t} else {\n\t\t\t\treject(new Error(\"No view was found during onAfterRouteMatched\"));\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Method to restore the focusInformation from the history Object.\n\t */\n\tprotected restoreFocusFromHistory(): void {\n\t\tswitch (history.state.focusInfo.type) {\n\t\t\tcase \"Row\":\n\t\t\t\tconst table = Element.getElementById(history.state.focusInfo.tableId) as Table;\n\t\t\t\tconst pos = table\n\t\t\t\t\t.getRowBinding()\n\t\t\t\t\t.getCurrentContexts()\n\t\t\t\t\t.findIndex((context) => context.getPath() === history.state.focusInfo.contextPathFocus);\n\t\t\t\tif (pos !== -1) {\n\t\t\t\t\ttable.focusRow(pos);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tElement.getElementById(history.state.focusInfo.controlId)?.focus();\n\t\t}\n\t\t//once applied, the focus info is removed to prevent focusing on it each time the user do a back navigation to this page\n\t\thistory.replaceState(Object.assign(history.state, { focusInfo: null }), \"\");\n\t}\n\n\t/**\n\t * Callback when the navigation is done.\n\t * - update the shell title.\n\t * - update table scroll.\n\t * - call onPageReady on the rightMostView.\n\t * @param event\n\t * @returns A promise for the current navigation\n\t */\n\tasync onAfterRouteMatched(event: Route$MatchedEvent): Promise<FEView | undefined> {\n\t\t// We create a debouncer for '_routingIsComplete' to handler multiple 'onAfterRouteMatched' calls.\n\t\tthis._routingIsComplete = this._routingIsComplete ?? new PromiseKeeper<void>();\n\t\tthis._numberOfRoutesInProgress = ++this._numberOfRoutesInProgress;\n\t\tconst currentRouteId = this._numberOfRoutesInProgress;\n\n\t\ttry {\n\t\t\tconst view = await this.waitForRightMostViewReady(event);\n\n\t\t\tif (view && this.getVisibleViews().includes(view)) {\n\t\t\t\t// The autoFocus is initially disabled on the navContainer or the FCL, so that the focus stays on the Shell menu\n\t\t\t\t// even if the app takes a long time to launch\n\t\t\t\t// The first time the view is displayed, we need to enable the autofocus so that it's managed properly during navigation\n\t\t\t\tconst rootControl = this.getView().getContent()[0];\n\t\t\t\tif (\n\t\t\t\t\trootControl &&\n\t\t\t\t\t(rootControl as FlexibleColumnLayout).getAutoFocus &&\n\t\t\t\t\t!(rootControl as FlexibleColumnLayout).getAutoFocus()\n\t\t\t\t) {\n\t\t\t\t\trootControl.setProperty(\"autoFocus\", true, true); // Do not mark the container as invalid, otherwise it's re-rendered\n\t\t\t\t}\n\n\t\t\t\tconst appComponent = this.getAppComponent();\n\t\t\t\tthis._scrollTablesToLastNavigatedItems();\n\t\t\t\tif (appComponent.getEnvironmentCapabilities().getCapabilities().UShell) {\n\t\t\t\t\tthis.computeTitleHierarchy(view);\n\t\t\t\t}\n\t\t\t\tconst forceFocus = appComponent.getRouterProxy().isFocusForced();\n\t\t\t\tappComponent.getRouterProxy().setFocusForced(false); // reset\n\t\t\t\tif (view.getController() && (view.getParent() as TemplateComponent).onPageReady) {\n\t\t\t\t\t(view.getParent() as TemplateComponent).onPageReady({ forceFocus: forceFocus });\n\t\t\t\t}\n\t\t\t\tif (history.state.focusInfo) {\n\t\t\t\t\tthis.restoreFocusFromHistory();\n\t\t\t\t} else if (appComponent.getRouterProxy().getLastHistoryEntry().focusControlId) {\n\t\t\t\t\t// Try to restore the focus on where it was when we last visited the current hash\n\t\t\t\t\tappComponent.getRouterProxy().restoreFocusForCurrentHash();\n\t\t\t\t}\n\t\t\t\tif (this.onContainerReady) {\n\t\t\t\t\tthis.onContainerReady();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn view;\n\t\t} catch (error: unknown) {\n\t\t\tLog.error(\"An error occurs while computing the title hierarchy and calling focus method\", error as string);\n\t\t\treturn undefined;\n\t\t} finally {\n\t\t\tif (currentRouteId === this._numberOfRoutesInProgress) {\n\t\t\t\t// We reset the debouncer logic after completion of latest route match.\n\t\t\t\tthis._numberOfRoutesInProgress = 0;\n\t\t\t\tthis._routingIsComplete.resolve();\n\t\t\t\tthis._routingIsComplete = undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * This function returns the TitleHierarchy cache ( or initializes it if undefined).\n\t * @returns  The TitleHierarchy cache\n\t */\n\t_getTitleHierarchyCache(): Record<string, TitleInformation> {\n\t\tif (!this.oTitleHierarchyCache) {\n\t\t\tthis.oTitleHierarchyCache = {};\n\t\t}\n\t\treturn this.oTitleHierarchyCache;\n\t}\n\n\t/**\n\t * This function clear the TitleHierarchy cache for the given context path.\n\t * @param  path The path of the context to clear the cache for\n\t */\n\tclearTitleHierarchyCache(path: string): void {\n\t\tdelete this._getTitleHierarchyCache()[path];\n\t}\n\n\t/**\n\t * This function returns a titleInfo object.\n\t * @param title The application's title\n\t * @param subtitle The application's subTitle\n\t * @param sIntent The intent path to be redirected to\n\t * @param description The application's description\n\t * @param icon The application's icon\n\t * @returns The title information\n\t */\n\t_computeTitleInfo(title: string, subtitle: string, sIntent: string, description?: string, icon = \"\"): TitleInformation {\n\t\tconst aParts = sIntent.split(\"/\");\n\t\tif (!aParts[aParts.length - 1].includes(\"?\")) {\n\t\t\tsIntent += \"?restoreHistory=true\";\n\t\t} else {\n\t\t\tsIntent += \"&restoreHistory=true\";\n\t\t}\n\t\treturn {\n\t\t\ttitle: title,\n\t\t\tsubtitle: subtitle,\n\t\t\tintent: sIntent,\n\t\t\ticon: icon,\n\t\t\tdescription: description\n\t\t};\n\t}\n\n\t_formatTitle(displayMode: string, titleValue: string, titleDescription: string): string {\n\t\tlet formattedTitle = \"\";\n\t\tswitch (displayMode) {\n\t\t\tcase \"Value\":\n\t\t\t\tformattedTitle = `${titleValue}`;\n\t\t\t\tbreak;\n\t\t\tcase \"ValueDescription\":\n\t\t\t\tformattedTitle = `${titleValue} (${titleDescription})`;\n\t\t\t\tbreak;\n\t\t\tcase \"DescriptionValue\":\n\t\t\t\tformattedTitle = `${titleDescription} (${titleValue})`;\n\t\t\t\tbreak;\n\t\t\tcase \"Description\":\n\t\t\t\tformattedTitle = `${titleDescription}`;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\t\treturn formattedTitle;\n\t}\n\n\t/**\n\t * Fetches the value of the HeaderInfo title for a given path.\n\t * @param path The path to the entity\n\t * @returns A promise containing the formatted title, or an empty string if no HeaderInfo title annotation is available\n\t */\n\tasync _fetchTitleValue(path: string): Promise<string> {\n\t\tconst appComponent = this.getAppComponent(),\n\t\t\tmodel = this.getView().getModel(),\n\t\t\tmetaModel = appComponent.getMetaModel(),\n\t\t\tmetaPath = metaModel.getMetaPath(path),\n\t\t\tbindingViewContext = model.createBindingContext(path),\n\t\t\theaderInfoTitleValueAnnotation = metaModel.getObject(`${metaPath}/@com.sap.vocabularies.UI.v1.HeaderInfo/Title/Value`),\n\t\t\tvalueExpression = AnnotationHelper.format(headerInfoTitleValueAnnotation, { context: metaModel.createBindingContext(\"/\") });\n\t\tif (!valueExpression) {\n\t\t\treturn Promise.resolve(\"\");\n\t\t}\n\t\tif (headerInfoTitleValueAnnotation.$Function === \"odata.concat\") {\n\t\t\tconst anyObject = new Any({ any: valueExpression });\n\t\t\tanyObject.setModel(model);\n\t\t\tanyObject.setBindingContext(bindingViewContext);\n\t\t\tconst textBinding = anyObject.getBinding(\"any\");\n\t\t\tif (textBinding?.isA<CompositeBinding>(\"sap.ui.model.CompositeBinding\")) {\n\t\t\t\tawait Promise.all(textBinding.getBindings().map((binding) => binding.requestValue?.()));\n\t\t\t}\n\t\t\tconst infoTitle = anyObject.getAny();\n\t\t\tanyObject.destroy();\n\t\t\treturn Promise.resolve(infoTitle as string);\n\t\t}\n\t\tconst textExpression = AnnotationHelper.format(\n\t\t\t\tmetaModel.getObject(\n\t\t\t\t\t`${metaPath}/@com.sap.vocabularies.UI.v1.HeaderInfo/Title/Value/$Path@com.sap.vocabularies.Common.v1.Text`\n\t\t\t\t),\n\t\t\t\t{ context: metaModel.createBindingContext(\"/\") }\n\t\t\t),\n\t\t\tpropertyContext = metaModel.getObject(`${metaPath}/@com.sap.vocabularies.UI.v1.HeaderInfo/Title/Value/$Path@`),\n\t\t\tpromises: Promise<string>[] = [],\n\t\t\tparsedvalueExpression = BindingInfo.parse(valueExpression),\n\t\t\tpromiseForDisplayMode = new Promise(function (resolve: (value: string) => void) {\n\t\t\t\tconst displayMode = CommonUtils.computeDisplayMode(propertyContext);\n\t\t\t\tresolve(displayMode);\n\t\t\t});\n\t\tpromises.push(promiseForDisplayMode);\n\t\tconst valuePath = parsedvalueExpression.parts ? parsedvalueExpression.parts[0].path : parsedvalueExpression.path,\n\t\t\tfnValueFormatter = parsedvalueExpression.formatter,\n\t\t\tvalueBinding = model.bindProperty(valuePath, bindingViewContext, { $$groupId: \"$auto.Heroes\" });\n\t\tvalueBinding.initialize();\n\t\tconst promiseForTitleValue = new Promise(function (resolve: (value: string) => void) {\n\t\t\tconst fnChange = function (event: ODataPropertyBinding$ChangeEvent): void {\n\t\t\t\tconst targetValue = fnValueFormatter ? fnValueFormatter(event.getSource().getValue()) : event.getSource().getValue();\n\n\t\t\t\tvalueBinding.detachChange(fnChange);\n\t\t\t\tresolve(targetValue);\n\t\t\t};\n\t\t\tvalueBinding.attachChange(fnChange);\n\t\t});\n\t\tpromises.push(promiseForTitleValue);\n\n\t\tif (textExpression) {\n\t\t\tconst parsedTextExpression = BindingInfo.parse(textExpression);\n\t\t\tlet textPath = parsedTextExpression.parts ? parsedTextExpression.parts[0].path : parsedTextExpression.path;\n\t\t\ttextPath = valuePath.lastIndexOf(\"/\") > -1 ? `${valuePath.slice(0, valuePath.lastIndexOf(\"/\"))}/${textPath}` : textPath;\n\n\t\t\tconst fnTextFormatter = parsedTextExpression.formatter,\n\t\t\t\ttextBinding = model.bindProperty(textPath, bindingViewContext, { $$groupId: \"$auto.Heroes\" });\n\t\t\ttextBinding.initialize();\n\t\t\tconst promiseForTitleText = new Promise(function (resolve: (description: string) => void) {\n\t\t\t\tconst fnChange = function (event: ODataPropertyBinding$ChangeEvent): void {\n\t\t\t\t\tconst targetText = fnTextFormatter ? fnTextFormatter(event.getSource().getValue()) : event.getSource().getValue();\n\n\t\t\t\t\ttextBinding.detachChange(fnChange);\n\t\t\t\t\tresolve(targetText);\n\t\t\t\t};\n\n\t\t\t\ttextBinding.attachChange(fnChange);\n\t\t\t});\n\t\t\tpromises.push(promiseForTitleText);\n\t\t}\n\t\ttry {\n\t\t\tconst titleInfo: string[] = await Promise.all(promises);\n\t\t\tlet formattedTitle = \"\";\n\t\t\tif (typeof titleInfo !== \"string\") {\n\t\t\t\tformattedTitle = this._formatTitle(titleInfo[0], titleInfo[1], titleInfo[2]);\n\t\t\t}\n\t\t\treturn formattedTitle;\n\t\t} catch (error: unknown) {\n\t\t\tLog.error(\"Error while fetching the title from the header info :\" + error);\n\t\t}\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * Function returning the decoded application-specific hash.\n\t * @returns Decoded application-specific hash\n\t */\n\tgetAppSpecificHash(): string {\n\t\t// HashChanged isShellNavigationHashChanger\n\t\tconst hashChanger = HashChanger.getInstance();\n\t\treturn hashChanger.hrefForAppSpecificHash ? URI.decode(hashChanger.hrefForAppSpecificHash(\"\")) : \"#/\";\n\t}\n\n\t_getHash(): string {\n\t\treturn HashChanger.getInstance().getHash();\n\t}\n\n\t/**\n\t * This function returns titleInformation from a path.\n\t * It updates the cache to store title information if necessary\n\t * @param {*} sPath path of the context to retrieve title information from MetaModel\n\t * @returns {Promise}  oTitleinformation returned as promise\n\t */\n\n\tasync getTitleInfoFromPath(sPath: string): Promise<TitleInformation> {\n\t\tconst oTitleHierarchyCache = this._getTitleHierarchyCache();\n\n\t\tif (oTitleHierarchyCache[sPath]) {\n\t\t\t// The title info is already stored in the cache\n\t\t\treturn Promise.resolve(oTitleHierarchyCache[sPath]);\n\t\t}\n\n\t\tconst oMetaModel = this.getAppComponent().getMetaModel();\n\t\tconst sEntityPath = oMetaModel.getMetaPath(sPath);\n\t\tconst sTypeName = oMetaModel.getObject(`${sEntityPath}/@com.sap.vocabularies.UI.v1.HeaderInfo/TypeName`);\n\t\tconst sAppSpecificHash = this.getAppSpecificHash();\n\t\tconst sIntent = sAppSpecificHash + sPath.slice(1);\n\t\treturn this._fetchTitleValue(sPath).then((sTitle: string) => {\n\t\t\tconst oTitleInfo = this._computeTitleInfo(sTypeName, sTitle, sIntent);\n\t\t\toTitleHierarchyCache[sPath] = oTitleInfo;\n\t\t\treturn oTitleInfo;\n\t\t});\n\t}\n\n\t/**\n\t * Ensure that the ushell service receives all elements\n\t * (title, subtitle, intent, icon) as strings.\n\t *\n\t * Annotation HeaderInfo allows for binding of title and description\n\t * (which are used here as title and subtitle) to any element in the entity\n\t * (such types as Boolean, timestamp, double, and others are possible)\n\t *\n\t * Creates a new hierarchy and converts non-string types to string.\n\t * @param aHierarchy Shell title hierarchy\n\t * @returns Copy of shell title hierarchy containing all elements as strings\n\t */\n\t_ensureHierarchyElementsAreStrings(aHierarchy: TitleInformation[]): object[] {\n\t\tconst aHierarchyShell = [];\n\t\tfor (const level in aHierarchy) {\n\t\t\tconst oHierarchy = aHierarchy[level];\n\t\t\tconst oShellHierarchy: Record<string, string> = {};\n\t\t\tfor (const key in oHierarchy) {\n\t\t\t\toShellHierarchy[key] = (\n\t\t\t\t\ttypeof oHierarchy[key as keyof TitleInformation] !== \"string\"\n\t\t\t\t\t\t? String(oHierarchy[key as keyof TitleInformation])\n\t\t\t\t\t\t: oHierarchy[key as keyof TitleInformation]\n\t\t\t\t) as string;\n\t\t\t}\n\t\t\taHierarchyShell.push(oShellHierarchy);\n\t\t}\n\t\treturn aHierarchyShell;\n\t}\n\n\t/**\n\t * Get target options from the hash.\n\t * @param sHash The hash to get the target options from\n\t * @returns Target options from the corresponding route target\n\t */\n\tgetTargetOptionsFromHash(sHash: string): TargetOptions | undefined {\n\t\tconst oAppComponent = this.getAppComponent();\n\n\t\tconst aRoutes = oAppComponent.getManifestEntry(\"sap.ui5\").routing?.routes ?? [];\n\t\tfor (const route of aRoutes) {\n\t\t\tconst oRoute = oAppComponent.getRouter().getRoute(route.name);\n\t\t\tif (oRoute?.match(sHash)) {\n\t\t\t\tconst sTarget = getRouteTargetNames(route.target)[0];\n\t\t\t\treturn (oAppComponent.getRouter().getTarget(sTarget) as unknown as { _oOptions: TargetOptions })._oOptions;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Get the target type name from the hash.\n\t * @param sHash The hash to get the target type from\n\t * @returns Target type name from the corresponding route target\n\t */\n\tgetTargetTypeFromHash(sHash: string): string {\n\t\treturn this.getTargetOptionsFromHash(sHash)?.name || \"\";\n\t}\n\n\t/**\n\t * Helper method to determine the format of the browser title based on the current view.\n\t * @param titleInfoHierarchyShell TitleInformation array\n\t * @param pageTitleInformation TitleInformation object\n\t * @returns An object with a header text and an additional context\n\t */\n\t_getBrowserTitle(titleInfoHierarchyShell: TitleInformation[], pageTitleInformation: TitleInformation): { headerText: string } {\n\t\tconst breadcrumbTexts = [];\n\t\tlet firstPart = \"\",\n\t\t\tsecondPart = \"\";\n\n\t\tconst titleInfoHierarchy = [...titleInfoHierarchyShell];\n\t\tif (titleInfoHierarchy.length > 1) {\n\t\t\ttitleInfoHierarchy.pop();\n\t\t\ttitleInfoHierarchy.forEach((titleInfo) => {\n\t\t\t\tif (titleInfo.subtitle) {\n\t\t\t\t\tbreadcrumbTexts.push(titleInfo.subtitle);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tif (pageTitleInformation.title) {\n\t\t\tbreadcrumbTexts.push(pageTitleInformation.title);\n\t\t}\n\t\tif (pageTitleInformation.description) {\n\t\t\tfirstPart = `${pageTitleInformation.subtitle?.toString().trim()} (${pageTitleInformation.description})`;\n\t\t} else {\n\t\t\tfirstPart = `${pageTitleInformation.subtitle}`;\n\t\t}\n\t\tsecondPart = breadcrumbTexts.join(\" - \");\n\n\t\treturn {\n\t\t\theaderText: secondPart ? `${firstPart} - ${secondPart}` : firstPart\n\t\t};\n\t}\n\n\t/**\n\t * Calculate the browser title and menu title, then trigger the set API of the shell.\n\t * @param appTitle Application title\n\t * @param titleInfoHierarchyShell An object for title information\n\t * @param pageTitleInformation TitleInformation object\n\t */\n\tasync _setTitles(appTitle: string, titleInfoHierarchyShell: TitleInformation[], pageTitleInformation: TitleInformation): Promise<void> {\n\t\t// Get the title of the browser\n\t\tlet browserTitle;\n\t\tconst appComponent = this.getAppComponent(),\n\t\t\ttitle = pageTitleInformation.title ?? \"\";\n\t\tif (titleInfoHierarchyShell.length) {\n\t\t\tbrowserTitle = this._getBrowserTitle(titleInfoHierarchyShell, pageTitleInformation);\n\t\t}\n\t\tawait this._setShellMenuTitle(appComponent, title, appTitle, browserTitle);\n\t}\n\n\tremoveEmptyParamFromHash(appComponent: AppComponent, appSpecificHash: string): string {\n\t\tconst shellServiceHelper = appComponent.getShellServices();\n\t\tconst parsedUrl = shellServiceHelper.parseShellHash(appSpecificHash);\n\t\tfor (const key in parsedUrl?.params) {\n\t\t\tif (!key.startsWith(\"sap-\") && parsedUrl.params[key][0] === \"\") {\n\t\t\t\tdelete parsedUrl.params[key];\n\t\t\t}\n\t\t}\n\t\tif (parsedUrl?.params) {\n\t\t\tdelete parsedUrl.params[\"sap-xapp-state\"];\n\t\t}\n\t\treturn `#${shellServiceHelper.constructShellHash(parsedUrl)}`;\n\t}\n\t/**\n\t * This function updates the shell title after each navigation.\n\t * @param view The current view\n\t * @returns A Promise that is resolved when the menu is filled properly\n\t * @private\n\t */\n\tasync computeTitleHierarchy(view: View): Promise<void> {\n\t\tconst appComponent = this.getAppComponent(),\n\t\t\tcontext = view.getBindingContext(),\n\t\t\tcurrentPage = view.getParent(),\n\t\t\ttitleInfoHierarchySeq: TitleInformation[] = [],\n\t\t\tappSpecificHash = this.getAppSpecificHash(),\n\t\t\tmanifestAppSettings = appComponent.getManifestEntry(\"sap.app\"),\n\t\t\tappTitle = manifestAppSettings.title || \"\",\n\t\t\tappSubTitle = manifestAppSettings.subTitle || \"\",\n\t\t\tappIcon = manifestAppSettings.icon || \"\";\n\t\tlet pageTitleInformation: TitleInformation, newPath: string | undefined;\n\n\t\tif (currentPage && (currentPage as TemplateComponent)._getPageTitleInformation) {\n\t\t\tif (context) {\n\t\t\t\t// If the first page of the application is a LR, use the title and subtitle from the manifest\n\t\t\t\tif (this.getTargetTypeFromHash(\"\") === \"sap.fe.templates.ListReport\") {\n\t\t\t\t\ttitleInfoHierarchySeq.push(\n\t\t\t\t\t\tawait this.getRootLevelTitleInformation(\n\t\t\t\t\t\t\tthis.removeEmptyParamFromHash(appComponent, appSpecificHash),\n\t\t\t\t\t\t\tappTitle,\n\t\t\t\t\t\t\tappSubTitle,\n\t\t\t\t\t\t\tappIcon\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// Then manage other pages\n\t\t\t\tnewPath = context.getPath();\n\t\t\t\tconst pathParts = newPath.split(\"/\");\n\t\t\t\tlet path = \"\";\n\n\t\t\t\tpathParts.shift(); // Remove the first segment (empty string) as it has been managed above\n\t\t\t\tpathParts.pop(); // Remove the last segment as it corresponds to the current page and shouldn't appear in the menu\n\n\t\t\t\tfor (const pathPart of pathParts) {\n\t\t\t\t\tpath += `/${pathPart}`;\n\t\t\t\t\t//if the associated target is not declared in the routes, we skip it\n\t\t\t\t\tif (!appComponent.getRouter().getRouteInfoByHash(path)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tconst metaModel = appComponent.getMetaModel(),\n\t\t\t\t\t\tparameterPath = metaModel.getMetaPath(path),\n\t\t\t\t\t\tisParameterized = metaModel.getObject(`${parameterPath}/@com.sap.vocabularies.Common.v1.ResultContext`);\n\t\t\t\t\tif (!isParameterized) {\n\t\t\t\t\t\ttitleInfoHierarchySeq.push(await this.getTitleInfoFromPath(path));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Current page\n\t\t\tpageTitleInformation = await (currentPage as TemplateComponent)._getPageTitleInformation();\n\t\t\tconst hash = this._getHash();\n\t\t\tconst intent =\n\t\t\t\tappSpecificHash.endsWith(\"/\") && hash.startsWith(\"/\") ? appSpecificHash + hash.substring(1) : appSpecificHash + hash;\n\t\t\tpageTitleInformation = this._computeTitleInfo(\n\t\t\t\tpageTitleInformation.title ?? \"\",\n\t\t\t\tpageTitleInformation.subtitle ?? \"\",\n\t\t\t\tintent,\n\t\t\t\tpageTitleInformation.description\n\t\t\t);\n\n\t\t\tif (context && newPath) {\n\t\t\t\tthis._getTitleHierarchyCache()[newPath] = pageTitleInformation;\n\t\t\t} else if (!this._getTitleHierarchyCache()[appSpecificHash]) {\n\t\t\t\tthis._getTitleHierarchyCache()[appSpecificHash] = pageTitleInformation;\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new Error(\"Title information missing in HeaderInfo\");\n\t\t}\n\t\ttry {\n\t\t\t//We now use directly the hierarchy already sequentially resolved\n\t\t\tconst titleInfoHierarchy = titleInfoHierarchySeq;\n\t\t\t// workaround for shell which is expecting all elements being of type string\n\t\t\tconst titleInfoHierarchyShell = this._ensureHierarchyElementsAreStrings(titleInfoHierarchy);\n\t\t\ttitleInfoHierarchyShell.reverse();\n\t\t\tawait appComponent.getShellServices().setHierarchy(titleInfoHierarchyShell);\n\n\t\t\tawait this._setTitles(appTitle, titleInfoHierarchyShell as unknown as TitleInformation[], pageTitleInformation);\n\t\t\treturn;\n\t\t} catch (errorMessage: unknown) {\n\t\t\tLog.error(errorMessage as string);\n\t\t} finally {\n\t\t\tthis.bIsComputingTitleHierachy = false;\n\t\t}\n\t}\n\n\t/**\n\t * Retrieve the title information for the root level.\n\t * @param appSpecificHash The application-specific hash\n\t * @param appTitle The application title\n\t * @param appSubTitle The application subtitle\n\t * @param appIcon The application icon\n\t * @returns A Promise containing the title information\n\t */\n\tasync getRootLevelTitleInformation(\n\t\tappSpecificHash: string,\n\t\tappTitle: string,\n\t\tappSubTitle: string,\n\t\tappIcon: string\n\t): Promise<TitleInformation> {\n\t\tconst oTitleHierarchyCache = this._getTitleHierarchyCache();\n\n\t\tif (oTitleHierarchyCache[appSpecificHash]) {\n\t\t\t// The title info is already stored in the cache\n\t\t\treturn Promise.resolve(oTitleHierarchyCache[appSpecificHash]);\n\t\t} else {\n\t\t\treturn Promise.resolve(this._computeTitleInfo(appTitle, appSubTitle, appSpecificHash, undefined, appIcon));\n\t\t}\n\t}\n\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tcalculateLayout(iNextFCLLevel: number, sHash: string, sProposedLayout: string | undefined, keepCurrentLayout = false): string {\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * Callback after a view has been bound to a context.\n\t * @param oContext The context that has been bound to a view\n\t */\n\tonContextBoundToView(oContext: Context | undefined | null): void {\n\t\tif (oContext) {\n\t\t\tconst sDeepestPath = this.getView().getModel(\"internal\").getProperty(\"/deepestPath\"),\n\t\t\t\tsViewContextPath = oContext.getPath();\n\n\t\t\tif (!sDeepestPath || sDeepestPath.indexOf(sViewContextPath) !== 0) {\n\t\t\t\t// There was no previous value for the deepest reached path, or the path\n\t\t\t\t// for the view isn't a subpath of the previous deepest path --> update\n\t\t\t\tthis.getView().getModel(\"internal\").setProperty(\"/deepestPath\", sViewContextPath, undefined, true);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync displayErrorPage(_errorMessage: string, _parameters: NavigationToErrorPageResult, _FCLLevel = 0): Promise<boolean> {\n\t\t// To be overridden\n\t\treturn Promise.resolve(true);\n\t}\n\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tupdateUIStateForView(oView: FEView, FCLLevel: number): void {\n\t\t// To be overriden\n\t}\n\n\tgetInstancedViews(): View[] {\n\t\treturn [];\n\t\t// To be overriden\n\t}\n\n\t/**\n\t * Return all visible views.\n\t * @returns The visible views\n\t */\n\tgetVisibleViews(): View[] {\n\t\treturn [];\n\t\t// To be overriden\n\t}\n\n\t_scrollTablesToLastNavigatedItems(): void {\n\t\t// To be overriden\n\t}\n\n\tisFclEnabled(): this is FclController {\n\t\treturn false;\n\t}\n\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tasync _setShellMenuTitle(\n\t\toAppComponent: AppComponent,\n\t\tsTitle: string,\n\t\tsAppTitle: string,\n\t\tadditionalInformation?: TitleAdditionalInfo\n\t): Promise<void> {\n\t\t// To be overriden by FclController\n\t\tawait oAppComponent.getShellServices().setTitle(sTitle, additionalInformation);\n\t}\n\n\tgetAppContentContainer(): NavContainer | FlexibleColumnLayout {\n\t\tconst oAppComponent = this.getAppComponent();\n\t\tconst appContentId = oAppComponent.getManifestEntry(\"sap.ui5\").routing?.config?.controlId ?? \"appContent\";\n\t\treturn this.getView().byId(appContentId) as NavContainer | FlexibleColumnLayout;\n\t}\n}\ninterface RootViewBaseController {\n\tonContainerReady?(): void;\n}\n\nexport default RootViewBaseController;\n"],"mappings":"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","ignoreList":[],"file":"RootViewBaseController-dbg.js"}