{"version":3,"file":"Fcl.controller.js","names":["LayoutType","fLibrary","FclController","_dec","defineUI5Class","_dec2","usingExtension","ViewState","override","applyInitialStateOnly","adaptBindingRefreshControls","aControls","this","getView","getController","_getAllViews","forEach","oChildView","pChildView","Promise","resolve","push","adaptStateControls","aStateControls","onRestore","fclController","appContentContainer","getAppContentContainer","internalModel","getModel","pages","getProperty","componentId","setProperty","onContainerReady","onSuspend","fclControl","getFclControl","beginColumnPages","getBeginColumnPages","midColumnPages","getMidColumnPages","endColumnPages","getEndColumnPages","concat","getViewsFromPages","view","controller","viewState","_class","_class2","_BaseController","_this","_len","arguments","length","args","Array","_key","call","_initializerDefineProperty","_descriptor","_oTargetsAggregation","_oTargetsFromRoutePattern","messagePages","undefined","_inheritsLoose","_proto","prototype","onInit","_internalInit","setColumnDistributionModel","manageDataReceived","event","getParameter","path","targetedView","_getAllVisibleViews","find","getBindingContext","getPath","isKeepAlive","_routing","onDataReceived","attachRouteMatchers","getRouter","attachBeforeRouteMatched","_updateViewForNavigatedRowsComputation","onBeforeRouteMatched","attachRouteMatched","onRouteMatched","attachStateChange","_saveLayout","_oRouterProxy","sCurrentRouteName","sCurrentArguments","oAppComponent","getAppComponent","oDataModel","attachEvent","bind","getRouterProxy","_oFCLConfig","maxColumnsCount","oRoutingConfig","getManifest","routing","config","flexibleColumnLayout","oFCLManifestConfig","defaultTwoColumnLayoutType","defaultThreeColumnLayoutType","limitFCLToTwoColumns","controlAggregation","defaultControlAggregation","_initializeTargetAggregation","_initializeRoutesInformation","onStateChanged","attachAfterEndColumnNavigate","getFclConfig","oEvent","sPreviousLayout","getParameters","layout","allVisibleViewsBeforeRouteMatched","rightMostViewBeforeRouteMatched","attachEventOnce","views","rightMostViewCurrent","getViewFromContainer","viewLevelBefore","getViewData","viewLevel","viewLevelAfter","oAdditionalViewForNavRowsComputation","getViewForNavigatedRowsComputation","onExit","detachRouteMatched","detachBeforeRouteMatched","detachStateChange","detachAfterEndColumnNavigate","BaseController","isFclEnabled","displayErrorPage","async","errorMessage","parameters","fclLevel","reject","legacyParameters","FCLLevel","messagePage","Page","showHeader","addBeginColumnPage","addMidColumnPage","addEndColumnPage","fromPage","header","FlexBox","alignItems","justifyContent","items","Button","type","icon","tooltip","press","handleShellBack","to","getId","window","history","back","addStyleClass","illustratedMessage","IllustratedMessage","title","description","illustrationType","errorType","removeAllContent","addContent","afterNavigateEventName","getCurrentBeginColumnPage","getCurrentMidColumnPage","getCurrentEndColumnPage","CommonUtils","getShellServices","setBackNavigation","fromView","_event","isA","pageReady","forcePageReady","e","Log","info","oManifest","oTargets","targets","Object","keys","sTargetName","oTarget","aggregation","pattern","contextPattern","aRoutes","routes","route","target","getCurrentArgument","getCurrentRouteName","getTargetAggregation","sRouteName","_scrollTablesToLastNavigatedItems","aViews","oAdditionalView","includes","index","oView","oPreviousView","bindingContext","previousViewController","_scrollTablesToRow","bIsNavigationArrow","_forceModelContextChangeOnBreadCrumbs","navTo","getRightmostView","computeTitleHierarchy","oFcl","getSource","oPages","oPage","oBreadCrumbs","byId","fireModelContextChange","_updateShareButtonVisibility","viewColumn","sLayout","bShowShareIcon","_updateEditButtonVisiblity","hiddenDraft","getEnvironmentCapabilities","getCapabilities","HiddenDraft","enabled","bEditButtonVisible","_updateSaveAndCancelButtonVisiblity","bSaveAndCancelButtonVisible","updateUIStateForView","oUIState","getHelper","getCurrentUIState","oFclColName","getLayout","setModel","_createHelperModel","actionButtonsInfo","midColumn","endColumn","fullScreen","exitFullScreen","closeColumn","beginColumn","oActionButtonInfos","assign","switchVisible","switchIcon","isFullScreen","closeVisible","oQueryParams","oNextUIState","getNextUIState","aTargets","_correctLayoutForTargets","getStoredLayout","setLayout","FlexibleColumnLayoutSemanticHelper","getInstanceFor","calculateLayout","iNextFCLLevel","sHash","sProposedLayout","keepCurrentLayout","oRoute","getRouteByHash","getPattern","allAllowedLayouts","isArray","aLayouts","toString","defaultLayout","_getDefaultLayout","sTargetAggregation","getRouteTargetName","OneColumn","MidColumnFullScreen","EndColumnFullScreen","numberOfTargetsFromRoute","getInstancedViews","componentContainers","getVisibleViews","forLayout","visibleViews","addView","page","ThreeColumnsEndExpanded","ThreeColumnsMidExpanded","TwoColumnsBeginExpanded","TwoColumnsMidExpanded","ThreeColumnsMidExpandedEndHidden","ThreeColumnsBeginExpandedEndHidden","error","allViews","layoutWhenExitFullScreen","startsWith","aRestorePromises","reduce","aPromises","oTargetView","KeepAliveHelper","restoreView","all","getRightmostContext","pop","isContextUsedInPages","oContext","aAllVisibleViews","_setShellMenuTitle","sTitle","sAppTitle","browerTitle","setTitle","getFCLPersonalizationData","shellServices","fclState","getApplicationPersonalizationData","defaultLayouts","columnsDistribution","desktop","tablet","setFCLPersonalizationData","setApplicationPersonalizationData","fclStateCache","model","onColumnsDistributionChange","media","columnsSizes","nbColumnsDisplayed","getNumberOfColumnsFromLayout","exec","proposedLayout","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./Fcl.controller.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type FlexibleColumnLayout from \"sap/f/FlexibleColumnLayout\";\nimport type { FlexibleColumnLayout$AfterEndColumnNavigateEvent, FlexibleColumnLayout$StateChangeEvent } from \"sap/f/FlexibleColumnLayout\";\nimport type { ColumnsNavigationActions, NavigationActionsTargets } from \"sap/f/FlexibleColumnLayoutSemanticHelper\";\nimport FlexibleColumnLayoutSemanticHelper from \"sap/f/FlexibleColumnLayoutSemanticHelper\";\nimport fLibrary from \"sap/f/library\";\nimport { defineUI5Class, usingExtension } from \"sap/fe/base/ClassSupport\";\nimport type AppComponent from \"sap/fe/core/AppComponent\";\nimport type { FEView } from \"sap/fe/core/BaseController\";\nimport type PageController from \"sap/fe/core/PageController\";\nimport type { NavigationToErrorPageResult } from \"sap/fe/core/controllerextensions/MessageHandler\";\nimport ViewState from \"sap/fe/core/controllerextensions/ViewState\";\nimport type RouterProxy from \"sap/fe/core/controllerextensions/routing/RouterProxy\";\nimport KeepAliveHelper from \"sap/fe/core/helpers/KeepAliveHelper\";\nimport { getRouteTargetName } from \"sap/fe/core/helpers/ManifestHelper\";\nimport Button from \"sap/m/Button\";\nimport FlexBox from \"sap/m/FlexBox\";\nimport IllustratedMessage from \"sap/m/IllustratedMessage\";\nimport Page from \"sap/m/Page\";\nimport type Event from \"sap/ui/base/Event\";\n\nimport type { ManagedObject$ModelContextChangeEventParameters } from \"sap/ui/base/ManagedObject\";\nimport type Control from \"sap/ui/core/Control\";\nimport type View from \"sap/ui/core/mvc/View\";\nimport type Route from \"sap/ui/core/routing/Route\";\nimport type { Router$BeforeRouteMatchedEvent, Router$RouteMatchedEvent } from \"sap/ui/core/routing/Router\";\nimport type JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type { TitleAdditionalInfo } from \"sap/ushell/ui5service/ShellUIService\";\nimport CommonUtils from \"../CommonUtils\";\nimport type { HiddenDraft } from \"../converters/ManifestSettings\";\nimport BaseController from \"./RootViewBaseController\";\n\nconst LayoutType = fLibrary.LayoutType;\ntype LayoutTypeType = keyof typeof LayoutType;\n\ntype DefaultLayouts = {\n\t1?: LayoutTypeType;\n\t2?: LayoutTypeType;\n\t3?: LayoutTypeType;\n};\n\ntype FCLColumnDistributionState = {\n\ttablet: { [key in LayoutTypeType]?: string };\n\tdesktop: { [key in LayoutTypeType]?: string };\n};\n\ntype FCLConfig = {\n\tmaxColumnsCount: number;\n\tdefaultTwoColumnLayoutType?: LayoutTypeType;\n\tdefaultThreeColumnLayoutType?: LayoutTypeType;\n\tdefaultControlAggregation?: string;\n};\n\nexport type FCLState = {\n\tcolumnsDistribution: FCLColumnDistributionState;\n\tdefaultLayouts: DefaultLayouts;\n};\n\n/**\n * Base controller class for your own root view with an sap.f.FlexibleColumnLayout control.\n *\n * By using or extending this controller, you can use your own root view with the sap.fe.core.AppComponent and\n * you can make use of SAP Fiori elements pages and SAP Fiori elements building blocks.\n * @hideconstructor\n * @public\n * @since 1.110.0\n */\n@defineUI5Class(\"sap.fe.core.rootView.Fcl\")\nclass FclController extends BaseController {\n\t@usingExtension(\n\t\tViewState.override({\n\t\t\tapplyInitialStateOnly: function () {\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tadaptBindingRefreshControls: function (this: ViewState, aControls: Promise<View>[]): void {\n\t\t\t\t(this.getView().getController() as FclController)._getAllViews().forEach(function (oChildView: View) {\n\t\t\t\t\tconst pChildView = Promise.resolve(oChildView);\n\t\t\t\t\taControls.push(pChildView);\n\t\t\t\t});\n\t\t\t},\n\t\t\tadaptStateControls: function (this: ViewState, aStateControls: Promise<View>[]): void {\n\t\t\t\t(this.getView().getController() as FclController)._getAllViews().forEach(function (oChildView: View) {\n\t\t\t\t\tconst pChildView = Promise.resolve(oChildView);\n\t\t\t\t\taStateControls.push(pChildView);\n\t\t\t\t});\n\t\t\t},\n\t\t\tonRestore: function (this: ViewState) {\n\t\t\t\tconst fclController = this.getView().getController() as FclController;\n\t\t\t\tconst appContentContainer = fclController.getAppContentContainer();\n\t\t\t\tconst internalModel = appContentContainer.getModel(\"internal\") as JSONModel;\n\t\t\t\tconst pages = internalModel.getProperty(\"/pages\");\n\n\t\t\t\tfor (const componentId in pages) {\n\t\t\t\t\tinternalModel.setProperty(`/pages/${componentId}/restoreStatus`, \"pending\");\n\t\t\t\t}\n\t\t\t\tfclController.onContainerReady();\n\t\t\t},\n\t\t\tonSuspend: function (this: ViewState) {\n\t\t\t\tconst fclController = this.getView().getController() as FclController;\n\t\t\t\tconst fclControl = fclController.getFclControl();\n\t\t\t\tconst beginColumnPages = fclControl.getBeginColumnPages();\n\t\t\t\tconst midColumnPages = fclControl.getMidColumnPages();\n\t\t\t\tconst endColumnPages = fclControl.getEndColumnPages();\n\t\t\t\tconst pages = ([] as Control[]).concat(beginColumnPages, midColumnPages, endColumnPages);\n\n\t\t\t\tfclController.getViewsFromPages(pages).forEach((view) => {\n\t\t\t\t\tconst controller = view.getController() as PageController | undefined;\n\t\t\t\t\tif (controller?.viewState?.onSuspend) {\n\t\t\t\t\t\tcontroller.viewState.onSuspend();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t})\n\t)\n\tviewState!: ViewState;\n\n\tprotected _oRouterProxy!: RouterProxy;\n\n\tprivate sCurrentRouteName?: string;\n\n\tprivate sCurrentArguments?: { noPreservationCache?: boolean; bIsStickyMode?: boolean; [\"?query\"]?: { layout?: string } };\n\n\tprivate sPreviousLayout?: keyof typeof LayoutType;\n\n\tprotected _oFCLConfig!: FCLConfig;\n\n\tprivate oAdditionalViewForNavRowsComputation?: View;\n\n\tprivate _oTargetsAggregation: Record<\n\t\tstring,\n\t\t{\n\t\t\taggregation: string;\n\t\t\tpattern?: string | null;\n\t\t}\n\t> = {};\n\n\tprivate _oTargetsFromRoutePattern: Record<string, string[] | undefined> = {};\n\n\tprivate messagePages: (Page | undefined)[] = [undefined, undefined, undefined];\n\n\tprivate fclStateCache!: Promise<FCLState>;\n\n\tonInit(): void {\n\t\tsuper.onInit();\n\t\tthis._internalInit();\n\t\tthis.setColumnDistributionModel();\n\t}\n\n\tmanageDataReceived(event: Event<{ error: { status: number }; path: string }>): void {\n\t\tif (event.getParameter(\"error\")) {\n\t\t\tconst path = event.getParameter(\"path\");\n\t\t\tconst targetedView = this._getAllVisibleViews().find((view) => view.getBindingContext()?.getPath() === path);\n\t\t\t// We need to manage error when the request is related to a form  into an ObjectPage\n\t\t\tif (path && (targetedView?.getBindingContext() as Context)?.isKeepAlive()) {\n\t\t\t\t(targetedView!.getController() as PageController)._routing.onDataReceived(event);\n\t\t\t}\n\t\t}\n\t}\n\n\tattachRouteMatchers(): void {\n\t\tthis.getRouter().attachBeforeRouteMatched(this._updateViewForNavigatedRowsComputation, this);\n\t\tsuper.attachRouteMatchers();\n\t\tthis._internalInit();\n\n\t\tthis.getRouter().attachBeforeRouteMatched(this.onBeforeRouteMatched, this);\n\t\tthis.getRouter().attachRouteMatched(this.onRouteMatched, this);\n\t\tthis.getFclControl().attachStateChange(this._saveLayout, this);\n\t}\n\n\t_internalInit(): void {\n\t\tif (this._oRouterProxy) {\n\t\t\treturn; // Already initialized\n\t\t}\n\n\t\tthis.sCurrentRouteName = \"\";\n\t\tthis.sCurrentArguments = {};\n\n\t\tconst oAppComponent = this.getAppComponent();\n\n\t\tconst oDataModel = this.getAppComponent().getModel();\n\t\toDataModel?.attachEvent(\"dataReceived\", this.manageDataReceived.bind(this));\n\n\t\tthis._oRouterProxy = oAppComponent.getRouterProxy();\n\n\t\t// Get FCL configuration in the manifest\n\t\tthis._oFCLConfig = { maxColumnsCount: 3 };\n\t\tconst oRoutingConfig = oAppComponent.getManifest()[\"sap.ui5\"].routing;\n\n\t\tif (oRoutingConfig?.config?.flexibleColumnLayout) {\n\t\t\tconst oFCLManifestConfig = oRoutingConfig.config.flexibleColumnLayout;\n\n\t\t\t// Default layout for 2 columns\n\t\t\tif (oFCLManifestConfig.defaultTwoColumnLayoutType) {\n\t\t\t\tthis._oFCLConfig.defaultTwoColumnLayoutType = oFCLManifestConfig.defaultTwoColumnLayoutType;\n\t\t\t}\n\n\t\t\t// Default layout for 3 columns\n\t\t\tif (oFCLManifestConfig.defaultThreeColumnLayoutType) {\n\t\t\t\tthis._oFCLConfig.defaultThreeColumnLayoutType = oFCLManifestConfig.defaultThreeColumnLayoutType;\n\t\t\t}\n\n\t\t\t// Limit FCL to 2 columns ?\n\t\t\tif (oFCLManifestConfig.limitFCLToTwoColumns === true) {\n\t\t\t\tthis._oFCLConfig.maxColumnsCount = 2;\n\t\t\t}\n\t\t}\n\t\tif (oRoutingConfig?.config?.controlAggregation) {\n\t\t\tthis._oFCLConfig.defaultControlAggregation = oRoutingConfig.config.controlAggregation;\n\t\t}\n\n\t\tthis._initializeTargetAggregation(oAppComponent);\n\t\tthis._initializeRoutesInformation(oAppComponent);\n\n\t\tthis.getFclControl().attachStateChange(this.onStateChanged, this);\n\t\tthis.getFclControl().attachAfterEndColumnNavigate(this.onStateChanged, this);\n\t}\n\n\tgetFclControl(): FlexibleColumnLayout {\n\t\treturn this.getAppContentContainer() as FlexibleColumnLayout;\n\t}\n\n\tgetFclConfig(): FCLConfig {\n\t\treturn this._oFCLConfig;\n\t}\n\n\t_saveLayout(oEvent: FlexibleColumnLayout$StateChangeEvent): void {\n\t\tthis.sPreviousLayout = oEvent.getParameters().layout;\n\t}\n\n\t/**\n\t * Get the additional view (on top of the visible views), to be able to compute the latest table navigated rows of\n\t * the most right visible view after a nav back or column fullscreen.\n\t *\n\t */\n\n\t_updateViewForNavigatedRowsComputation(): void {\n\t\tconst allVisibleViewsBeforeRouteMatched = this._getAllVisibleViews(this.sPreviousLayout);\n\t\tconst rightMostViewBeforeRouteMatched = allVisibleViewsBeforeRouteMatched.length\n\t\t\t? allVisibleViewsBeforeRouteMatched[allVisibleViewsBeforeRouteMatched.length - 1]\n\t\t\t: undefined;\n\n\t\tthis.getRouter().attachEventOnce(\"routeMatched\", (event: Event<{ views: Control[] }>) => {\n\t\t\tconst views = event.getParameter(\"views\");\n\t\t\tconst rightMostViewCurrent = this.getViewFromContainer(views[views.length - 1]);\n\n\t\t\tif (rightMostViewBeforeRouteMatched && rightMostViewCurrent) {\n\t\t\t\tconst viewLevelBefore = (rightMostViewBeforeRouteMatched.getViewData() as { viewLevel?: number })?.viewLevel;\n\t\t\t\tconst viewLevelAfter = (rightMostViewCurrent.getViewData() as { viewLevel?: number })?.viewLevel;\n\n\t\t\t\t// Navigation forward from L2 to view level L3 (FullScreenLayout):\n\t\t\t\tif (viewLevelAfter === this._oFCLConfig.maxColumnsCount) {\n\t\t\t\t\tthis.oAdditionalViewForNavRowsComputation = rightMostViewCurrent;\n\t\t\t\t}\n\t\t\t\t// Navigations backward from L3 down to L2, L1, L0 (ThreeColumn layout):\n\t\t\t\tif (\n\t\t\t\t\tviewLevelBefore !== undefined &&\n\t\t\t\t\tviewLevelAfter !== undefined &&\n\t\t\t\t\tviewLevelBefore < this._oFCLConfig.maxColumnsCount &&\n\t\t\t\t\tviewLevelBefore > viewLevelAfter &&\n\t\t\t\t\trightMostViewCurrent !== rightMostViewBeforeRouteMatched\n\t\t\t\t) {\n\t\t\t\t\tthis.oAdditionalViewForNavRowsComputation = rightMostViewBeforeRouteMatched;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetViewForNavigatedRowsComputation(): View | undefined {\n\t\treturn this.oAdditionalViewForNavRowsComputation;\n\t}\n\n\tonExit(): void {\n\t\tthis.getRouter().detachRouteMatched(this.onRouteMatched, this);\n\t\tthis.getRouter().detachBeforeRouteMatched(this.onBeforeRouteMatched, this);\n\t\tthis.getFclControl().detachStateChange(this.onStateChanged, this);\n\t\tthis.getFclControl().detachAfterEndColumnNavigate(this.onStateChanged, this);\n\n\t\tBaseController.prototype.onExit.bind(this)();\n\t}\n\n\t/**\n\t * Check if the FCL component is enabled.\n\t * @returns `true` since we are in FCL scenario\n\t * @final\n\t */\n\tisFclEnabled(): this is FclController {\n\t\treturn true;\n\t}\n\n\t/**\n\t * Method that creates a new Page to display the IllustratedMessage containing the current error.\n\t * @param errorMessage\n\t * @param parameters\n\t * @param fclLevel\n\t * @returns A promise that creates a Page to display the error\n\t */\n\tasync displayErrorPage(errorMessage: string, parameters: NavigationToErrorPageResult, fclLevel = 0): Promise<boolean> {\n\t\treturn new Promise<boolean>(async (resolve, reject) => {\n\t\t\ttry {\n\t\t\t\tconst fclControl = this.getFclControl();\n\n\t\t\t\t// Manage the old API where the FCL level was passed in the parameters\n\t\t\t\tconst legacyParameters = parameters as { FCLLevel?: number };\n\t\t\t\tif (legacyParameters.FCLLevel !== undefined && fclLevel === 0) {\n\t\t\t\t\tfclLevel = legacyParameters.FCLLevel;\n\t\t\t\t}\n\n\t\t\t\tif (this._oFCLConfig && fclLevel >= this._oFCLConfig.maxColumnsCount) {\n\t\t\t\t\tfclLevel = this._oFCLConfig.maxColumnsCount - 1;\n\t\t\t\t}\n\t\t\t\tif (fclLevel < 0 || fclLevel > 2) {\n\t\t\t\t\tfclLevel = 0;\n\t\t\t\t}\n\n\t\t\t\tlet messagePage = this.messagePages[fclLevel];\n\n\t\t\t\tif (!messagePage) {\n\t\t\t\t\tmessagePage = new Page({\n\t\t\t\t\t\tshowHeader: false\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.messagePages[fclLevel] = messagePage;\n\n\t\t\t\t\tswitch (fclLevel) {\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\tfclControl.addBeginColumnPage(messagePage);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\tfclControl.addMidColumnPage(messagePage);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tfclControl.addEndColumnPage(messagePage);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet fromPage: Control;\n\t\t\t\tconst header = new FlexBox({\n\t\t\t\t\talignItems: \"Start\",\n\t\t\t\t\tjustifyContent: \"End\",\n\t\t\t\t\titems: [\n\t\t\t\t\t\tnew Button({\n\t\t\t\t\t\t\ttype: \"Transparent\",\n\t\t\t\t\t\t\ticon: \"sap-icon://decline\",\n\t\t\t\t\t\t\ttooltip: \"{sap.fe.i18n>C_COMMON_SAPFE_CLOSE}\",\n\t\t\t\t\t\t\tpress: (): void => {\n\t\t\t\t\t\t\t\tif (parameters.handleShellBack === true) {\n\t\t\t\t\t\t\t\t\tfclControl.to(fromPage.getId(), {}, {});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\twindow.history.back();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).addStyleClass(\"sapUiLargeMarginEnd\")\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t\tconst illustratedMessage = new IllustratedMessage({\n\t\t\t\t\ttitle: errorMessage,\n\t\t\t\t\tdescription: parameters.description ?? \"\",\n\t\t\t\t\tillustrationType: parameters.errorType ? `sapIllus-${parameters.errorType}` : \"sapIllus-UnableToLoad\"\n\t\t\t\t});\n\t\t\t\tmessagePage.removeAllContent();\n\t\t\t\tmessagePage.addContent(header);\n\t\t\t\tmessagePage.addContent(illustratedMessage);\n\n\t\t\t\tlet afterNavigateEventName: string;\n\t\t\t\tswitch (fclLevel) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tfromPage = fclControl.getCurrentBeginColumnPage();\n\t\t\t\t\t\tafterNavigateEventName = \"afterBeginColumnNavigate\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tfromPage = fclControl.getCurrentMidColumnPage();\n\t\t\t\t\t\tafterNavigateEventName = \"afterMidColumnNavigate\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tfromPage = fclControl.getCurrentEndColumnPage();\n\t\t\t\t\t\tafterNavigateEventName = \"afterEndColumnNavigate\";\n\t\t\t\t}\n\n\t\t\t\tif (parameters.handleShellBack === true) {\n\t\t\t\t\tconst oAppComponent = CommonUtils.getAppComponent(fromPage);\n\t\t\t\t\tawait oAppComponent.getShellServices().setBackNavigation(async function () {\n\t\t\t\t\t\tfclControl.to(fromPage.getId(), {}, {});\n\t\t\t\t\t\tawait oAppComponent.getShellServices().setBackNavigation();\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tconst fromView = this.getViewFromContainer(fromPage);\n\t\t\t\tfclControl.attachEventOnce(afterNavigateEventName, (_event: Event<{ from: Control }>) => {\n\t\t\t\t\tif (fromView && fromView.isA<View>(\"sap.ui.core.mvc.View\")) {\n\t\t\t\t\t\t(fromView.getController() as PageController).pageReady?.forcePageReady();\n\t\t\t\t\t}\n\t\t\t\t\tresolve(true);\n\t\t\t\t});\n\n\t\t\t\tfclControl.to(messagePage.getId(), {}, {});\n\t\t\t} catch (e) {\n\t\t\t\treject(false);\n\t\t\t\tLog.info(`${e}`);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Initialize the object _oTargetsAggregation that defines for each route the relevant aggregation and pattern.\n\t * @param oAppComponent Reference to the AppComponent\n\t */\n\t_initializeTargetAggregation(oAppComponent: AppComponent): void {\n\t\tconst oManifest = oAppComponent.getManifest(),\n\t\t\toTargets = oManifest[\"sap.ui5\"].routing ? oManifest[\"sap.ui5\"].routing.targets : null;\n\n\t\tthis._oTargetsAggregation = {};\n\n\t\tif (oTargets) {\n\t\t\tObject.keys(oTargets).forEach((sTargetName: string) => {\n\t\t\t\tconst oTarget = oTargets[sTargetName];\n\t\t\t\tif (oTarget.controlAggregation) {\n\t\t\t\t\tthis._oTargetsAggregation[sTargetName] = {\n\t\t\t\t\t\taggregation: oTarget.controlAggregation,\n\t\t\t\t\t\tpattern: oTarget.contextPattern\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tthis._oTargetsAggregation[sTargetName] = {\n\t\t\t\t\t\taggregation: \"page\",\n\t\t\t\t\t\tpattern: null\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Initializes the mapping between a route (identifed as its pattern) and the corresponding targets\n\t * @param oAppComponent ref to the AppComponent\n\t */\n\n\t_initializeRoutesInformation(oAppComponent: AppComponent): void {\n\t\tconst oManifest = oAppComponent.getManifest(),\n\t\t\taRoutes = oManifest[\"sap.ui5\"].routing ? oManifest[\"sap.ui5\"].routing.routes : null;\n\n\t\tthis._oTargetsFromRoutePattern = {};\n\n\t\tif (aRoutes) {\n\t\t\taRoutes.forEach((route) => {\n\t\t\t\tif (route.pattern) {\n\t\t\t\t\tthis._oTargetsFromRoutePattern[route.pattern] = route.target as string[];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tgetCurrentArgument(): unknown {\n\t\treturn this.sCurrentArguments;\n\t}\n\n\tgetCurrentRouteName(): string | undefined {\n\t\treturn this.sCurrentRouteName;\n\t}\n\n\t/**\n\t * Getter for oTargetsAggregation array.\n\t * @returns The _oTargetsAggregation array\n\t */\n\tgetTargetAggregation(): Record<\n\t\tstring,\n\t\t{\n\t\t\taggregation: string;\n\t\t\tpattern?: string | null;\n\t\t}\n\t> {\n\t\treturn this._oTargetsAggregation;\n\t}\n\n\t/**\n\t * Function triggered by the router RouteMatched event.\n\t * @param oEvent\n\t */\n\tonRouteMatched(oEvent: Router$RouteMatchedEvent): void {\n\t\tconst sRouteName = oEvent.getParameter(\"name\");\n\n\t\t// Save the current/previous routes and arguments\n\t\tthis.sCurrentRouteName = sRouteName;\n\t\tthis.sCurrentArguments = oEvent.getParameter(\"arguments\");\n\t}\n\n\t/**\n\t * This function is triggering the table scroll to the navigated row after each layout change.\n\t *\n\t */\n\n\t_scrollTablesToLastNavigatedItems(): void {\n\t\tconst aViews = this._getAllVisibleViews();\n\t\t//The scrolls are triggered only if the layout is with several columns or when switching the mostRight column in full screen\n\t\tif (\n\t\t\taViews.length > 1 ||\n\t\t\t(aViews.length && (aViews[0].getViewData() as { viewLevel: number }).viewLevel < this._oFCLConfig.maxColumnsCount)\n\t\t) {\n\t\t\tconst oAdditionalView = this.getViewForNavigatedRowsComputation();\n\t\t\tif (oAdditionalView && !aViews.includes(oAdditionalView)) {\n\t\t\t\taViews.push(oAdditionalView);\n\t\t\t}\n\t\t\tfor (let index = aViews.length - 1; index > 0; index--) {\n\t\t\t\tconst oView = aViews[index],\n\t\t\t\t\toPreviousView = aViews[index - 1];\n\t\t\t\tconst bindingContext = oView.getBindingContext();\n\t\t\t\tconst previousViewController = oPreviousView.getController() as { _scrollTablesToRow?: Function };\n\t\t\t\tif (bindingContext && previousViewController._scrollTablesToRow) {\n\t\t\t\t\tpreviousViewController._scrollTablesToRow(bindingContext.getPath());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Function triggered by the FCL StateChanged event.\n\t * @param oEvent\n\t */\n\tonStateChanged(oEvent: FlexibleColumnLayout$StateChangeEvent | FlexibleColumnLayout$AfterEndColumnNavigateEvent): void {\n\t\tconst bIsNavigationArrow = (oEvent as FlexibleColumnLayout$StateChangeEvent).getParameter(\"isNavigationArrow\");\n\t\tif (this.sCurrentArguments !== undefined) {\n\t\t\tif (!this.sCurrentArguments[\"?query\"]) {\n\t\t\t\tthis.sCurrentArguments[\"?query\"] = {};\n\t\t\t}\n\t\t\tthis.sCurrentArguments[\"?query\"].layout = (oEvent as FlexibleColumnLayout$StateChangeEvent).getParameter(\"layout\");\n\t\t}\n\t\tthis._forceModelContextChangeOnBreadCrumbs(oEvent);\n\n\t\t// Replace the URL with the new layout if a navigation arrow was used\n\t\tif (bIsNavigationArrow && this.sCurrentRouteName) {\n\t\t\tthis._oRouterProxy.navTo(this.sCurrentRouteName, this.sCurrentArguments);\n\t\t}\n\n\t\tconst oView = this.getRightmostView();\n\t\tif (oView) {\n\t\t\tthis.computeTitleHierarchy(oView);\n\t\t}\n\t}\n\n\t/**\n\t * Function to fire ModelContextChange event on all breadcrumbs ( on each ObjectPages).\n\t * @param oEvent\n\t */\n\t_forceModelContextChangeOnBreadCrumbs(oEvent: Event<ManagedObject$ModelContextChangeEventParameters, FlexibleColumnLayout>): void {\n\t\t//force modelcontextchange on ObjectPages to refresh the breadcrumbs link hrefs\n\t\tconst oFcl = oEvent.getSource();\n\t\tlet oPages: Control[] = [];\n\t\toPages = oPages.concat(oFcl.getBeginColumnPages()).concat(oFcl.getMidColumnPages()).concat(oFcl.getEndColumnPages());\n\t\toPages.forEach((oPage) => {\n\t\t\tconst oView = this.getViewFromContainer(oPage);\n\t\t\tconst oBreadCrumbs = oView?.byId && oView.byId(\"breadcrumbs\");\n\t\t\tif (oBreadCrumbs) {\n\t\t\t\toBreadCrumbs.fireModelContextChange();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Function triggered to update the Share button Visibility.\n\t * @param viewColumn Name of the current column (\"beginColumn\", \"midColumn\", \"endColumn\")\n\t * @param sLayout The current layout used by the FCL\n\t * @returns The share button visibility\n\t */\n\t_updateShareButtonVisibility(viewColumn: string, sLayout: string): boolean {\n\t\tlet bShowShareIcon;\n\t\tswitch (sLayout) {\n\t\t\tcase \"OneColumn\":\n\t\t\t\tbShowShareIcon = viewColumn === \"beginColumn\";\n\t\t\t\tbreak;\n\t\t\tcase \"MidColumnFullScreen\":\n\t\t\tcase \"ThreeColumnsBeginExpandedEndHidden\":\n\t\t\tcase \"ThreeColumnsMidExpandedEndHidden\":\n\t\t\tcase \"TwoColumnsBeginExpanded\":\n\t\t\tcase \"TwoColumnsMidExpanded\":\n\t\t\t\tbShowShareIcon = viewColumn === \"midColumn\";\n\t\t\t\tbreak;\n\t\t\tcase \"EndColumnFullScreen\":\n\t\t\tcase \"ThreeColumnsEndExpanded\":\n\t\t\tcase \"ThreeColumnsMidExpanded\":\n\t\t\t\tbShowShareIcon = viewColumn === \"endColumn\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbShowShareIcon = false;\n\t\t}\n\t\treturn bShowShareIcon;\n\t}\n\n\t_updateEditButtonVisiblity(viewColumn: string, sLayout: string): boolean {\n\t\tconst hiddenDraft = (this.getAppComponent()?.getEnvironmentCapabilities()?.getCapabilities()?.HiddenDraft as HiddenDraft)?.enabled;\n\t\tlet bEditButtonVisible = true;\n\t\tswitch (viewColumn) {\n\t\t\tcase \"midColumn\":\n\t\t\t\tswitch (sLayout) {\n\t\t\t\t\tcase \"TwoColumnsMidExpanded\":\n\t\t\t\t\tcase \"ThreeColumnsMidExpandedEndHidden\":\n\t\t\t\t\tcase \"ThreeColumnsBeginExpandedEndHidden\":\n\t\t\t\t\tcase \"TwoColumnsBeginExpanded\":\n\t\t\t\t\t\tif (!hiddenDraft) {\n\t\t\t\t\t\t\tbEditButtonVisible = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"ThreeColumnsMidExpanded\":\n\t\t\t\t\tcase \"ThreeColumnsEndExpanded\":\n\t\t\t\t\t\tbEditButtonVisible = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"endColumn\":\n\t\t\t\tswitch (sLayout) {\n\t\t\t\t\tcase \"ThreeColumnsMidExpanded\":\n\t\t\t\t\tcase \"ThreeColumnsEndExpanded\":\n\t\t\t\t\t\tif (!hiddenDraft) {\n\t\t\t\t\t\t\tbEditButtonVisible = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\treturn bEditButtonVisible;\n\t}\n\n\t_updateSaveAndCancelButtonVisiblity(viewColumn: string, sLayout: string): boolean {\n\t\tconst hiddenDraft = (this.getAppComponent()?.getEnvironmentCapabilities()?.getCapabilities()?.HiddenDraft as HiddenDraft)?.enabled;\n\t\tlet bSaveAndCancelButtonVisible = true;\n\t\tswitch (viewColumn) {\n\t\t\tcase \"midColumn\":\n\t\t\t\tswitch (sLayout) {\n\t\t\t\t\tcase \"ThreeColumnsEndExpanded\":\n\t\t\t\t\tcase \"ThreeColumnsMidExpanded\":\n\t\t\t\t\t\tif (hiddenDraft) {\n\t\t\t\t\t\t\tbSaveAndCancelButtonVisible = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\treturn bSaveAndCancelButtonVisible;\n\t}\n\n\tupdateUIStateForView(oView: FEView, FCLLevel: number): void {\n\t\tconst oUIState = this.getHelper().getCurrentUIState(),\n\t\t\toFclColName = [\"beginColumn\", \"midColumn\", \"endColumn\"],\n\t\t\tsLayout = this.getFclControl().getLayout();\n\t\tlet viewColumn;\n\n\t\tif (!oView.getModel(\"fclhelper\")) {\n\t\t\toView.setModel(this._createHelperModel(), \"fclhelper\");\n\t\t}\n\t\tif (!oUIState.actionButtonsInfo) {\n\t\t\toUIState.actionButtonsInfo = {};\n\t\t}\n\t\tif (!oUIState.actionButtonsInfo.midColumn) {\n\t\t\toUIState.actionButtonsInfo.midColumn = {};\n\t\t}\n\t\tif (!oUIState.actionButtonsInfo.endColumn) {\n\t\t\toUIState.actionButtonsInfo.endColumn = {};\n\t\t}\n\t\tif (FCLLevel >= this._oFCLConfig.maxColumnsCount) {\n\t\t\t// The view is on a level > max number of columns. It's always fullscreen without close/exit buttons\n\t\t\tviewColumn = oFclColName[this._oFCLConfig.maxColumnsCount - 1];\n\n\t\t\toUIState.actionButtonsInfo.midColumn.fullScreen = null;\n\t\t\toUIState.actionButtonsInfo.midColumn.exitFullScreen = null;\n\t\t\toUIState.actionButtonsInfo.midColumn.closeColumn = null;\n\t\t\toUIState.actionButtonsInfo.endColumn.exitFullScreen = null;\n\t\t\toUIState.actionButtonsInfo.endColumn.fullScreen = null;\n\t\t\toUIState.actionButtonsInfo.endColumn.closeColumn = null;\n\t\t} else {\n\t\t\tviewColumn = oFclColName[FCLLevel];\n\t\t}\n\n\t\tif (\n\t\t\tFCLLevel >= this._oFCLConfig.maxColumnsCount ||\n\t\t\tsLayout === \"EndColumnFullScreen\" ||\n\t\t\tsLayout === \"MidColumnFullScreen\" ||\n\t\t\tsLayout === \"OneColumn\"\n\t\t) {\n\t\t\toView.getModel(\"fclhelper\").setProperty(\"/breadCrumbIsVisible\", true);\n\t\t} else {\n\t\t\toView.getModel(\"fclhelper\").setProperty(\"/breadCrumbIsVisible\", false);\n\t\t}\n\t\t// Unfortunately, the FCLHelper doesn't provide actionButton values for the first column\n\t\t// so we have to add this info manually\n\t\t(oUIState.actionButtonsInfo as { beginColumn?: object }).beginColumn = {\n\t\t\tfullScreen: null,\n\t\t\texitFullScreen: null,\n\t\t\tcloseColumn: null\n\t\t};\n\n\t\tconst oActionButtonInfos: NavigationActionsTargets & {\n\t\t\tswitchVisible?: boolean;\n\t\t\tswitchIcon?: string;\n\t\t\tisFullScreen?: boolean;\n\t\t\tcloseVisible?: boolean;\n\t\t} = Object.assign({}, oUIState.actionButtonsInfo[viewColumn as keyof ColumnsNavigationActions]);\n\t\toActionButtonInfos.switchVisible = oActionButtonInfos.fullScreen !== null || oActionButtonInfos.exitFullScreen !== null;\n\t\toActionButtonInfos.switchIcon = oActionButtonInfos.fullScreen !== null ? \"sap-icon://full-screen\" : \"sap-icon://exit-full-screen\";\n\t\toActionButtonInfos.isFullScreen = oActionButtonInfos.fullScreen === null;\n\t\toActionButtonInfos.closeVisible = oActionButtonInfos.closeColumn !== null;\n\n\t\toView.getModel(\"fclhelper\").setProperty(\"/actionButtonsInfo\", oActionButtonInfos);\n\n\t\toView.getModel(\"fclhelper\").setProperty(\"/showEditButton\", this._updateEditButtonVisiblity(viewColumn, sLayout));\n\n\t\toView.getModel(\"fclhelper\").setProperty(\"/showSaveAndCancelButton\", this._updateSaveAndCancelButtonVisiblity(viewColumn, sLayout));\n\n\t\toView.getModel(\"fclhelper\").setProperty(\"/showShareIcon\", this._updateShareButtonVisibility(viewColumn, sLayout));\n\t}\n\n\t/**\n\t * Function triggered by the router BeforeRouteMatched event.\n\t * @param oEvent\n\t */\n\tasync onBeforeRouteMatched(oEvent: Router$BeforeRouteMatchedEvent): Promise<void> {\n\t\tif (oEvent) {\n\t\t\tconst oQueryParams = (oEvent.getParameters().arguments! as Record<string, { layout: LayoutTypeType }>)[\"?query\"];\n\t\t\tlet sLayout = oQueryParams ? oQueryParams.layout : undefined;\n\n\t\t\t// If there is no layout parameter, query for the default level 0 layout (normally OneColumn)\n\t\t\tif (!sLayout) {\n\t\t\t\tconst oNextUIState = this.getHelper().getNextUIState(0);\n\t\t\t\tsLayout = oNextUIState.layout as LayoutTypeType | undefined;\n\t\t\t}\n\n\t\t\t// Check if the layout if compatible with the number of targets\n\t\t\t// This should always be the case for normal navigation, just needed in case\n\t\t\t// the URL has been manually modified\n\t\t\tconst aTargets = (oEvent.getParameter(\"config\") as { target?: string[] })?.target;\n\t\t\tsLayout = this._correctLayoutForTargets(sLayout!, aTargets);\n\t\t\tsLayout = await this.getStoredLayout(sLayout);\n\n\t\t\t// Update the layout of the FlexibleColumnLayout.\n\t\t\tif (sLayout) {\n\t\t\t\tthis.getFclControl().setLayout(sLayout);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Helper for the FCL Component.\n\t * @returns Instance of a semantic helper\n\t */\n\tgetHelper(): FlexibleColumnLayoutSemanticHelper {\n\t\treturn FlexibleColumnLayoutSemanticHelper.getInstanceFor(this.getFclControl(), this._oFCLConfig);\n\t}\n\n\t/**\n\t * Calculates the FCL layout for a given FCL level and a target hash.\n\t * @param iNextFCLLevel FCL level to be navigated to\n\t * @param sHash The hash to be navigated to\n\t * @param sProposedLayout The proposed layout\n\t * @param keepCurrentLayout True if we want to keep the current layout if possible\n\t * @returns The calculated layout\n\t */\n\tcalculateLayout(iNextFCLLevel: number, sHash: string, sProposedLayout: LayoutTypeType | undefined, keepCurrentLayout = false): string {\n\t\t// First, ask the FCL helper to calculate the layout if nothing is proposed\n\t\tif (!sProposedLayout) {\n\t\t\tsProposedLayout = (\n\t\t\t\tkeepCurrentLayout ? this.getFclControl().getLayout() : this.getHelper().getNextUIState(iNextFCLLevel).layout\n\t\t\t) as LayoutTypeType | undefined;\n\t\t}\n\n\t\t// Then change this value if necessary, based on the number of targets\n\t\tconst oRoute = (this.getRouter() as { getRouteByHash?: (hash: string) => Route }).getRouteByHash?.(\n\t\t\t`${sHash}?layout=${sProposedLayout}`\n\t\t);\n\t\tconst aTargets = this._oTargetsFromRoutePattern[oRoute!.getPattern()];\n\n\t\treturn this._correctLayoutForTargets(sProposedLayout!, aTargets);\n\t}\n\n\t/**\n\t * Checks whether a given FCL layout is compatible with an array of targets.\n\t * @param sProposedLayout Proposed value for the FCL layout\n\t * @param aTargets Array of target names used for checking\n\t * @returns The corrected layout\n\t */\n\t_correctLayoutForTargets(sProposedLayout: LayoutTypeType, aTargets: string[] | undefined): LayoutTypeType {\n\t\tconst allAllowedLayouts = {\n\t\t\t\"2\": [\"TwoColumnsMidExpanded\", \"TwoColumnsBeginExpanded\", \"MidColumnFullScreen\"],\n\t\t\t\"3\": [\n\t\t\t\t\"ThreeColumnsMidExpanded\",\n\t\t\t\t\"ThreeColumnsEndExpanded\",\n\t\t\t\t\"ThreeColumnsMidExpandedEndHidden\",\n\t\t\t\t\"ThreeColumnsBeginExpandedEndHidden\",\n\t\t\t\t\"MidColumnFullScreen\",\n\t\t\t\t\"EndColumnFullScreen\"\n\t\t\t]\n\t\t};\n\n\t\tif (aTargets && !Array.isArray(aTargets)) {\n\t\t\t// To support single target as a string in the manifest\n\t\t\taTargets = [aTargets];\n\t\t}\n\n\t\tif (!aTargets) {\n\t\t\t// Defensive, just in case...\n\t\t\treturn sProposedLayout;\n\t\t} else if (aTargets.length > 1) {\n\t\t\t// More than 1 target: just simply check from the allowed values\n\t\t\tconst aLayouts = allAllowedLayouts[aTargets.length.toString() as \"2\" | \"3\"] as LayoutTypeType[];\n\t\t\tif (!aLayouts.includes(sProposedLayout)) {\n\t\t\t\t// The proposed layout isn't compatible with the number of columns\n\t\t\t\t// --> Ask the helper for the default layout for the number of columns\n\t\t\t\tconst defaultLayout = this._getDefaultLayout(aTargets.length);\n\t\t\t\tsProposedLayout = defaultLayout && aLayouts.includes(defaultLayout) ? defaultLayout : aLayouts[0];\n\t\t\t}\n\t\t} else {\n\t\t\t// Only one target\n\t\t\tconst sTargetAggregation =\n\t\t\t\tthis.getTargetAggregation()[getRouteTargetName(aTargets[0])].aggregation || this._oFCLConfig.defaultControlAggregation;\n\t\t\tswitch (sTargetAggregation) {\n\t\t\t\tcase \"beginColumnPages\":\n\t\t\t\t\tsProposedLayout = LayoutType.OneColumn;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"midColumnPages\":\n\t\t\t\t\tsProposedLayout = LayoutType.MidColumnFullScreen;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"endColumnPages\":\n\t\t\t\t\tsProposedLayout = LayoutType.EndColumnFullScreen;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t\t// no default\n\t\t\t}\n\t\t}\n\n\t\treturn sProposedLayout;\n\t}\n\n\t/**\n\t * Gets default Layout for number of columns.\n\t * @param numberOfTargetsFromRoute\n\t * @returns An FCL Layout based on the manifest configuration if it is defined.\n\t */\n\t_getDefaultLayout(numberOfTargetsFromRoute: number): LayoutTypeType | undefined {\n\t\tswitch (numberOfTargetsFromRoute) {\n\t\t\tcase 3:\n\t\t\t\treturn this._oFCLConfig.defaultTwoColumnLayoutType;\n\t\t\tcase 2:\n\t\t\t\treturn this._oFCLConfig.defaultTwoColumnLayoutType;\n\t\t\tdefault:\n\t\t\t\treturn undefined;\n\t\t}\n\t}\n\n\t/**\n\t * Gets the instanced views in the FCL component.\n\t * @returns Return the instanced views.\n\t */\n\tgetInstancedViews(): View[] {\n\t\tconst fclControl = this.getFclControl();\n\t\tconst componentContainers: Control[] = [\n\t\t\t...fclControl.getBeginColumnPages(),\n\t\t\t...fclControl.getMidColumnPages(),\n\t\t\t...fclControl.getEndColumnPages()\n\t\t];\n\t\treturn this.getViewsFromPages(componentContainers);\n\t}\n\n\t/**\n\t * Gets the current visible pages.\n\t * @returns Return the visible views.\n\t */\n\tgetVisibleViews(): View[] {\n\t\treturn this._getAllVisibleViews();\n\t}\n\n\t/**\n\t * Get all visible views in the FCL component.\n\t * @param forLayout  Optional parameter is very specific as part of the calculation of the latest navigated row\n\t * @returns Array of all visible views\n\t */\n\t_getAllVisibleViews(forLayout?: string): View[] {\n\t\tconst visibleViews: View[] = [];\n\t\tconst layout = forLayout ? forLayout : this.getFclControl().getLayout();\n\t\tconst addView = (page: Control | undefined): void => {\n\t\t\tif (page) {\n\t\t\t\tconst view = this.getViewFromContainer(page);\n\t\t\t\tif (view) {\n\t\t\t\t\tvisibleViews.push(view);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tswitch (layout) {\n\t\t\tcase LayoutType.EndColumnFullScreen:\n\t\t\t\taddView(this.getFclControl().getCurrentEndColumnPage());\n\t\t\t\tbreak;\n\n\t\t\tcase LayoutType.MidColumnFullScreen:\n\t\t\t\taddView(this.getFclControl().getCurrentMidColumnPage());\n\t\t\t\tbreak;\n\n\t\t\tcase LayoutType.OneColumn:\n\t\t\t\taddView(this.getFclControl().getCurrentBeginColumnPage());\n\t\t\t\tbreak;\n\n\t\t\tcase LayoutType.ThreeColumnsEndExpanded:\n\t\t\tcase LayoutType.ThreeColumnsMidExpanded:\n\t\t\t\taddView(this.getFclControl().getCurrentBeginColumnPage());\n\t\t\t\taddView(this.getFclControl().getCurrentMidColumnPage());\n\t\t\t\taddView(this.getFclControl().getCurrentEndColumnPage());\n\t\t\t\tbreak;\n\n\t\t\tcase LayoutType.TwoColumnsBeginExpanded:\n\t\t\tcase LayoutType.TwoColumnsMidExpanded:\n\t\t\tcase LayoutType.ThreeColumnsMidExpandedEndHidden:\n\t\t\tcase LayoutType.ThreeColumnsBeginExpandedEndHidden:\n\t\t\t\taddView(this.getFclControl().getCurrentBeginColumnPage());\n\t\t\t\taddView(this.getFclControl().getCurrentMidColumnPage());\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tLog.error(`Unhandled switch case for ${this.getFclControl().getLayout()}`);\n\t\t}\n\n\t\treturn visibleViews;\n\t}\n\n\t_getAllViews(forLayout?: string): View[] {\n\t\tconst allViews: View[] = [];\n\t\tconst layout = forLayout ? forLayout : this.getFclControl().getLayout();\n\n\t\tconst addView = (page: Control | undefined): void => {\n\t\t\tif (page) {\n\t\t\t\tconst view = this.getViewFromContainer(page);\n\t\t\t\tif (view) {\n\t\t\t\t\tallViews.push(view);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tswitch (layout) {\n\t\t\tcase LayoutType.OneColumn:\n\t\t\t\taddView(this.getFclControl().getCurrentBeginColumnPage());\n\t\t\t\tbreak;\n\t\t\tcase LayoutType.ThreeColumnsEndExpanded:\n\t\t\tcase LayoutType.ThreeColumnsMidExpanded:\n\t\t\tcase LayoutType.ThreeColumnsMidExpandedEndHidden:\n\t\t\tcase LayoutType.ThreeColumnsBeginExpandedEndHidden:\n\t\t\tcase LayoutType.EndColumnFullScreen:\n\t\t\t\taddView(this.getFclControl().getCurrentBeginColumnPage());\n\t\t\t\taddView(this.getFclControl().getCurrentMidColumnPage());\n\t\t\t\taddView(this.getFclControl().getCurrentEndColumnPage());\n\t\t\t\tbreak;\n\n\t\t\tcase LayoutType.TwoColumnsBeginExpanded:\n\t\t\tcase LayoutType.TwoColumnsMidExpanded:\n\t\t\t\taddView(this.getFclControl().getCurrentBeginColumnPage());\n\t\t\t\taddView(this.getFclControl().getCurrentMidColumnPage());\n\t\t\t\tbreak;\n\n\t\t\tcase LayoutType.MidColumnFullScreen:\n\t\t\t\t// In this case we need to determine if this mid column fullscreen comes from a 2 or a 3 column layout\n\t\t\t\t{\n\t\t\t\t\tconst layoutWhenExitFullScreen =\n\t\t\t\t\t\tthis.getHelper().getCurrentUIState().actionButtonsInfo?.midColumn?.exitFullScreen ?? \"\";\n\t\t\t\t\taddView(this.getFclControl().getCurrentBeginColumnPage());\n\t\t\t\t\taddView(this.getFclControl().getCurrentMidColumnPage());\n\t\t\t\t\tif (layoutWhenExitFullScreen.startsWith(\"ThreeColumn\")) {\n\t\t\t\t\t\t// We come from a 3 column layout\n\t\t\t\t\t\taddView(this.getFclControl().getCurrentEndColumnPage());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tLog.error(`Unhandled switch case for ${this.getFclControl().getLayout()}`);\n\t\t}\n\t\treturn allViews;\n\t}\n\n\tasync onContainerReady(): Promise<void[]> {\n\t\t// Restore views if neccessary.\n\t\tconst aViews = this._getAllVisibleViews();\n\t\tconst aRestorePromises: Promise<void>[] = aViews.reduce(function (aPromises: Promise<void>[], oTargetView: View) {\n\t\t\tif (oTargetView.isA && oTargetView.isA(\"sap.ui.core.mvc.View\")) {\n\t\t\t\taPromises.push(KeepAliveHelper.restoreView(oTargetView as FEView));\n\t\t\t}\n\n\t\t\treturn aPromises;\n\t\t}, []);\n\t\treturn Promise.all(aRestorePromises);\n\t}\n\n\tgetRightmostContext(): Context | undefined {\n\t\treturn this.getRightmostView()?.getBindingContext() ?? undefined;\n\t}\n\n\tgetRightmostView(): FEView {\n\t\treturn this._getAllViews().pop() as FEView;\n\t}\n\n\tisContextUsedInPages(oContext: Context): boolean {\n\t\tif (!this.getFclControl()) {\n\t\t\treturn false;\n\t\t}\n\t\tconst aAllVisibleViews = this._getAllViews();\n\t\tfor (const view of aAllVisibleViews) {\n\t\t\tif (view) {\n\t\t\t\tif (view.getBindingContext() === oContext) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// A view has been destroyed --> app is currently being destroyed\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tasync _setShellMenuTitle(\n\t\toAppComponent: AppComponent,\n\t\tsTitle: string,\n\t\tsAppTitle: string,\n\t\tbrowerTitle?: TitleAdditionalInfo\n\t): Promise<void> {\n\t\tif (this.getHelper().getCurrentUIState().isFullScreen !== true) {\n\t\t\tawait oAppComponent.getShellServices().setTitle(sAppTitle, browerTitle);\n\t\t} else {\n\t\t\tawait oAppComponent.getShellServices().setTitle(sTitle, browerTitle);\n\t\t}\n\t}\n\n\t/**\n\t * This method is called to retieve the FCL state from the personalization service.\n\t * @returns The FCL state\n\t */\n\tasync getFCLPersonalizationData(): Promise<FCLState> {\n\t\tconst shellServices = this.getAppComponent()?.getShellServices();\n\t\tlet fclState;\n\t\ttry {\n\t\t\tfclState = (await shellServices.getApplicationPersonalizationData?.(\"FCL-Personalization\")) as FCLState | undefined;\n\t\t} catch (error: unknown) {\n\t\t\tLog.error(\"Error while getting the FCL-Personalization data from the personalization service\", error as Error);\n\t\t}\n\t\treturn (\n\t\t\tfclState ?? {\n\t\t\t\tdefaultLayouts: {},\n\t\t\t\tcolumnsDistribution: {\n\t\t\t\t\tdesktop: {},\n\t\t\t\t\ttablet: {}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\t/**\n\t * This method is called to set the FCL state in the personalization service.\n\t * @param fclState The FCL state\n\t */\n\tsetFCLPersonalizationData(fclState: FCLState): void {\n\t\tconst shellServices = this.getAppComponent()?.getShellServices();\n\t\tshellServices.setApplicationPersonalizationData(\"FCL-Personalization\", fclState);\n\t}\n\n\t/**\n\t * This method requests the FCL state from the personalization service and sets the model accordingly.\n\t */\n\tprivate async setColumnDistributionModel(): Promise<void> {\n\t\tthis.fclStateCache = this.getFCLPersonalizationData();\n\t\tconst columnsDistribution = (await this.fclStateCache).columnsDistribution;\n\t\tif (columnsDistribution) {\n\t\t\tconst model = this.getView().getModel(\"internal\");\n\t\t\tmodel.setProperty(\"/FCLColumnsDistribution\", columnsDistribution);\n\t\t}\n\t}\n\n\t/**\n\t * This method is called when the user changes the columns distribution in the FCL settings dialog.\n\t * It updates the FCL state in the personalization service.\n\t * @param event\n\t */\n\tprivate async onColumnsDistributionChange(\n\t\tevent: Event<{ media: \"tablet\" | \"desktop\"; layout: LayoutTypeType; columnsSizes: string }>\n\t): Promise<void> {\n\t\tconst { media, layout, columnsSizes } = event.getParameters();\n\t\tconst model = this.getView().getModel(\"internal\");\n\t\tmodel.setProperty(`/FCLColumnsDistribution/${media}/${layout}`, columnsSizes);\n\t\tconst fclState = await this.fclStateCache;\n\t\tconst nbColumnsDisplayed = this.getNumberOfColumnsFromLayout(layout);\n\t\tif (nbColumnsDisplayed) {\n\t\t\tfclState.defaultLayouts[nbColumnsDisplayed] = layout;\n\t\t\tfclState.columnsDistribution[media][layout] = columnsSizes;\n\t\t\tthis.setFCLPersonalizationData(fclState);\n\t\t\tthis.fclStateCache = Promise.resolve(fclState);\n\t\t}\n\t}\n\n\t/**\n\t * This method returns the number of columns displayed in the FCL based on the layout.\n\t * @param layout  The layout\n\t * @returns The number of columns displayed\n\t */\n\tprivate getNumberOfColumnsFromLayout(layout: LayoutTypeType): 1 | 2 | 3 | null {\n\t\tconst nbColumnsDisplayed = /^(One|Two|Three)Column/.exec(layout)?.[1] as \"One\" | \"Two\" | \"Three\";\n\t\tswitch (nbColumnsDisplayed) {\n\t\t\tcase \"One\":\n\t\t\t\treturn 1;\n\t\t\tcase \"Two\":\n\t\t\t\treturn 2;\n\t\t\tcase \"Three\":\n\t\t\t\treturn 3;\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * This method returns the layout stored in the personalization service based on the proposed layout.\n\t * @param proposedLayout\n\t * @returns The FCL layout stored in the personalization service\n\t */\n\tasync getStoredLayout(proposedLayout?: LayoutTypeType): Promise<LayoutTypeType | undefined> {\n\t\tconst layout = proposedLayout ?? (this.getFclControl().getLayout() as LayoutTypeType);\n\t\tconst nbColumnsDisplayed = this.getNumberOfColumnsFromLayout(layout);\n\t\tif (nbColumnsDisplayed) {\n\t\t\tconst defaultLayouts = (await this.fclStateCache).defaultLayouts;\n\t\t\treturn defaultLayouts?.[nbColumnsDisplayed] ?? layout;\n\t\t}\n\t\treturn layout;\n\t}\n}\n\nexport default FclController;\n"],"mappings":"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","ignoreList":[]}