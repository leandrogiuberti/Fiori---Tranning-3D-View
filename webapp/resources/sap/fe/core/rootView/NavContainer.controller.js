/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/base/ClassSupport","sap/fe/core/CommonUtils","sap/fe/core/controllerextensions/ViewState","sap/fe/core/helpers/KeepAliveHelper","sap/m/IllustratedMessage","sap/m/Page","./RootViewBaseController"],function(e,t,n,r,i,o,a,s){"use strict";var l,c,g,u,f;var p=t.usingExtension;var d=t.defineUI5Class;function h(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function C(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,v(e,t)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function w(e,t,n,r,i){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer?(Object.defineProperty(e,t,o),null):o}function P(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let y=(l=d("sap.fe.core.rootView.NavContainer"),c=p(r.override({applyInitialStateOnly:function(){return false},adaptBindingRefreshControls:function(e){const t=this.getView(),n=t.getController();e.push(n._getCurrentPage(t))},adaptStateControls:function(e){const t=this.getView(),n=t.getController();e.push(n._getCurrentPage(t))},onRestore:function(){const e=this.getView(),t=e.getController(),n=t.getAppContentContainer();const r=n.getModel("internal");const i=r.getProperty("/pages");for(const e in i){r.setProperty(`/pages/${e}/restoreStatus`,"pending")}t.onContainerReady()},onSuspend:function(){const e=this.getView(),t=e.getController(),r=t.getAppContentContainer();const i=r.getPages();i.forEach(function(e){const t=n.getTargetView(e);const r=t&&t.getController();if(r&&r.viewState&&r.viewState.onSuspend){r.viewState.onSuspend()}})}})),l(g=(u=function(t){function r(){var e;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++){r[i]=arguments[i]}e=t.call(this,...r)||this;h(e,"viewState",f,e);return e}C(r,t);var s=r.prototype;s.onContainerReady=async function e(){const t=this.getView(),r=this._getCurrentPage(t);return r.then(async function(e){if(e){const t=n.getTargetView(e);return i.restoreView(t)}return})};s._getCurrentPage=async function e(t){const r=this.getAppContentContainer();return new Promise(function(e){const i=r.getCurrentPage();if(i?.getController?.()?.isPlaceholder?.()){i.getController().attachEventOnce("targetPageInsertedInContainer",function(r){const i=r.getParameter("targetpage");const o=n.getTargetView(i);e(o!==t?o:undefined)})}else{const r=n.getTargetView(i);e(r!==t?r:undefined)}})};s._getNavContainer=function e(){return this.getAppContentContainer()};s.getInstancedViews=function e(){const t=this._getNavContainer();const n=t.getPages();return this.getViewsFromPages(n)};s.getVisibleViews=function e(){const t=this._getNavContainer();const n=[t.getCurrentPage()];return this.getViewsFromPages(n)};s.isFclEnabled=function e(){return false};s._scrollTablesToLastNavigatedItems=function e(){};s.displayErrorPage=async function t(r,i){let s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return new Promise(async(t,s)=>{try{const e=this._getNavContainer();if(!this.messagePage){this.messagePage=new a({showHeader:false});e.addPage(this.messagePage)}const s=new o({title:r,description:i.description??"",illustrationType:i.errorType?`sapIllus-${i.errorType}`:"sapIllus-UnableToLoad"});this.messagePage.removeAllContent();this.messagePage.addContent(s);const l=e.getCurrentPage();if(i.handleShellBack===true){const t=n.getAppComponent(l);await t.getShellServices().setBackNavigation(async function(){e.to(l.getId());await t.getShellServices().setBackNavigation()})}const c=this.getViewFromContainer(l);e.attachEventOnce("afterNavigate",()=>{if(c&&c.isA("sap.ui.core.mvc.View")){c.getController().pageReady?.forcePageReady()}t(true)});e.to(this.messagePage.getId())}catch(t){s(false);e.info(t)}})};return r}(s),f=w(u.prototype,"viewState",[c],{configurable:true,enumerable:true,writable:true,initializer:null}),u))||g);return y},false);
//# sourceMappingURL=NavContainer.controller.js.map