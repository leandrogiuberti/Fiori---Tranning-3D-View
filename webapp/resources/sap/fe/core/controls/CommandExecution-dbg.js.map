{"version":3,"names":["CommandExecution","_dec","defineUI5Class","_class","_CoreCommandExecution","sId","mSettings","call","_exports","_inheritsLoose","_proto","prototype","setParent","oParent","aCommands","data","Array","isArray","length","oCommand","oShortcut","shortcutSpec","key","destroy","bSuppressInvalidate","getParent","_getCommandInfo","Shortcut","unregister","shortcut","_cleanupContext","Element","apply","setVisible","bValue","oParentControl","oComponent","Component","getOwnerComponentFor","getCommand","Log","info","CoreCommandExecution"],"sourceRoot":".","sources":["CommandExecution.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type { BindingToolkitExpression } from \"sap/fe/base/BindingToolkit\";\nimport { defineUI5Class } from \"sap/fe/base/ClassSupport\";\nimport CoreCommandExecution from \"sap/ui/core/CommandExecution\";\nimport Component from \"sap/ui/core/Component\";\nimport Element from \"sap/ui/core/Element\";\nimport Shortcut from \"sap/ui/core/Shortcut\";\n\ntype $CommandExecutionSettings = {\n\tvisible?: boolean | BindingToolkitExpression<boolean>;\n\tenabled?: boolean | BindingToolkitExpression<boolean>;\n\texecute?: Function;\n\tcommand: string;\n};\n@defineUI5Class(\"sap.fe.core.controls.CommandExecution\")\nexport default class CommandExecution extends CoreCommandExecution {\n\tconstructor(sId?: string | $CommandExecutionSettings, mSettings?: $CommandExecutionSettings) {\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t// @ts-ignore\n\t\tsuper(sId, mSettings);\n\t}\n\n\tsetParent(oParent: Element): void {\n\t\tsuper.setParent(oParent);\n\t\tconst aCommands = oParent.data(\"sap.ui.core.Shortcut\");\n\t\tif (Array.isArray(aCommands) && aCommands.length > 0) {\n\t\t\tconst oCommand = oParent.data(\"sap.ui.core.Shortcut\")[aCommands.length - 1],\n\t\t\t\toShortcut = oCommand.shortcutSpec;\n\t\t\tif (oShortcut) {\n\t\t\t\t// Check if single key shortcut\n\t\t\t\tfor (const key in oShortcut) {\n\t\t\t\t\tif (oShortcut[key] && key !== \"key\") {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t}\n\n\tdestroy(bSuppressInvalidate: boolean): void {\n\t\tconst oParent = this.getParent();\n\t\tif (oParent) {\n\t\t\tconst oCommand = this._getCommandInfo();\n\t\t\tif (oCommand) {\n\t\t\t\tShortcut.unregister(this.getParent(), oCommand.shortcut);\n\t\t\t}\n\t\t\tthis._cleanupContext(oParent);\n\t\t}\n\t\tElement.prototype.destroy.apply(this, [bSuppressInvalidate]);\n\t}\n\n\tsetVisible(bValue: boolean): this {\n\t\tlet oCommand,\n\t\t\toParentControl = this.getParent(),\n\t\t\toComponent: Component | undefined;\n\n\t\tif (!oParentControl) {\n\t\t\tsuper.setVisible(bValue);\n\t\t}\n\n\t\twhile (!oComponent && oParentControl) {\n\t\t\toComponent = Component.getOwnerComponentFor(oParentControl);\n\t\t\toParentControl = oParentControl.getParent();\n\t\t}\n\n\t\tif (oComponent) {\n\t\t\toCommand = (oComponent as Component & { getCommand: Function }).getCommand(this.getCommand());\n\n\t\t\tif (oCommand) {\n\t\t\t\tsuper.setVisible(bValue);\n\t\t\t} else {\n\t\t\t\tLog.info(\"There is no shortcut definition registered in the manifest for the command : \" + this.getCommand());\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"CommandExecution-dbg.js"}