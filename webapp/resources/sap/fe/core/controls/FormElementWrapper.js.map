{"version":3,"file":"FormElementWrapper.js","names":["FormElementWrapper","_dec","defineUI5Class","_dec2","implementInterface","_dec3","property","type","defaultValue","undefined","_dec4","_dec5","association","multiple","singularName","_dec6","aggregation","isDefault","_class","_class2","_Control","id","settings","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_inheritsLoose","_proto","prototype","getAccessibilityInfo","oContent","content","onBeforeRendering","setAriaLabelledByForControl","control","isA","items","getItems","filter","item","setAriaLabelledByForDraftIndicator","setAriaLabelledBy","getContent","addAriaLabelledBy","ariaLabelledBy","element","ariaLabelledBys","getAriaLabelledBy","indexOf","addAriaLabelledByForDraftIndicator","includes","render","oRm","oControl","openStart","style","width","openEnd","renderControl","close","Control","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./FormElementWrapper.ts"],"sourcesContent":["import type { EnhanceWithUI5, PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { aggregation, association, defineUI5Class, implementInterface, property } from \"sap/fe/base/ClassSupport\";\nimport type DraftIndicator from \"sap/fe/macros/draftIndicator/DraftIndicator\";\nimport type Avatar from \"sap/m/Avatar\";\nimport type HBox from \"sap/m/HBox\";\nimport type VBox from \"sap/m/VBox\";\nimport type { $ControlSettings } from \"sap/ui/core/Control\";\nimport Control from \"sap/ui/core/Control\";\nimport type RenderManager from \"sap/ui/core/RenderManager\";\nimport type { AccessibilityInfo, CSSSize, IFormContent } from \"sap/ui/core/library\";\n\n@defineUI5Class(\"sap.fe.core.controls.FormElementWrapper\")\nclass FormElementWrapper extends Control implements IFormContent {\n\t@implementInterface(\"sap.ui.core.IFormContent\")\n\t__implements__sap_ui_core_IFormContent = true;\n\n\t@property({\n\t\ttype: \"sap.ui.core.CSSSize\",\n\t\tdefaultValue: undefined\n\t})\n\twidth!: CSSSize;\n\n\t@property({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: false\n\t})\n\tformDoNotAdjustWidth!: boolean;\n\n\t/**\n\t * Association to controls / IDs that label this control (see WAI-ARIA attribute aria-labelledby).\n\t */\n\t@association({ type: \"sap.ui.core.Control\", multiple: true, singularName: \"ariaLabelledBy\" })\n\tariaLabelledBy!: (string | Control)[];\n\n\t@aggregation({ type: \"sap.ui.core.Control\", multiple: false, isDefault: true })\n\tcontent!: Control;\n\n\tgetAccessibilityInfo(): AccessibilityInfo {\n\t\tconst oContent = this.content;\n\t\treturn oContent && oContent.getAccessibilityInfo ? oContent.getAccessibilityInfo() : {};\n\t}\n\n\tconstructor(\n\t\tid?: string | undefined | (PropertiesOf<FormElementWrapper> & $ControlSettings),\n\t\tsettings?: $ControlSettings & PropertiesOf<FormElementWrapper>\n\t) {\n\t\tsuper(id as string, settings);\n\t}\n\n\tonBeforeRendering(): void {\n\t\tconst setAriaLabelledByForControl = (control: Control): void => {\n\t\t\tif (control.isA<VBox>(\"sap.m.VBox\") || control.isA<HBox>(\"sap.m.HBox\")) {\n\t\t\t\tconst items = control.getItems().filter((item) => !item.isA<Avatar>(\"sap.m.Avatar\"));\n\t\t\t\t//exclude Avatar from aria-labelledby to avoid overriding aria-label\n\t\t\t\tfor (const item of items) {\n\t\t\t\t\tsetAriaLabelledByForControl(item);\n\t\t\t\t}\n\t\t\t} else if (control.isA(\"sap.fe.macros.draftIndicator.DraftIndicator\")) {\n\t\t\t\tthis.setAriaLabelledByForDraftIndicator(control as DraftIndicator);\n\t\t\t} else {\n\t\t\t\tthis.setAriaLabelledBy(control);\n\t\t\t}\n\t\t};\n\t\tsetAriaLabelledByForControl((this as unknown as EnhanceWithUI5<FormElementWrapper>).getContent());\n\t}\n\n\t/**\n\t * Sets ariaLabelledBy for the content control.\n\t * @param content The content control.\n\t */\n\tprivate setAriaLabelledBy(content: (Control & { addAriaLabelledBy?: Function; getAriaLabelledBy?: Function }) | undefined): void {\n\t\tif (content?.addAriaLabelledBy) {\n\t\t\tconst ariaLabelledBy = this.ariaLabelledBy;\n\n\t\t\tfor (const element of ariaLabelledBy) {\n\t\t\t\tconst ariaLabelledBys = content.getAriaLabelledBy?.() || [];\n\t\t\t\tif (ariaLabelledBys.indexOf(element) === -1) {\n\t\t\t\t\tcontent.addAriaLabelledBy(element);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Sets ariaLabelledBy for the draft indicator.\n\t * @param content The draft indicator control.\n\t */\n\tprivate setAriaLabelledByForDraftIndicator(content: DraftIndicator | undefined): void {\n\t\tif (content?.addAriaLabelledByForDraftIndicator) {\n\t\t\tconst ariaLabelledBy = this.ariaLabelledBy;\n\n\t\t\tfor (const element of ariaLabelledBy) {\n\t\t\t\tconst ariaLabelledBys = content.getAriaLabelledBy();\n\t\t\t\tif (!ariaLabelledBys.includes(element as string)) {\n\t\t\t\t\tcontent.addAriaLabelledByForDraftIndicator(element as string);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic render(oRm: RenderManager, oControl: FormElementWrapper): void {\n\t\toRm.openStart(\"div\", oControl);\n\t\toRm.style(\"min-height\", \"1rem\");\n\t\toRm.style(\"width\", oControl.width);\n\t\toRm.openEnd();\n\n\t\toRm.openStart(\"div\");\n\t\toRm.style(\"display\", \"flex\");\n\t\toRm.style(\"box-sizing\", \"border-box\");\n\t\toRm.style(\"justify-content\", \"space-between\");\n\t\toRm.style(\"align-items\", \"center\");\n\t\toRm.style(\"flex-wrap\", \"wrap\");\n\t\toRm.style(\"align-content\", \"stretch\");\n\t\toRm.style(\"width\", \"100%\");\n\t\toRm.openEnd();\n\t\toRm.renderControl(oControl.content); // render the child Control\n\t\toRm.close(\"div\");\n\t\toRm.close(\"div\"); // end of the complete Control\n\t}\n}\nexport default FormElementWrapper;\n"],"mappings":"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","ignoreList":[]}