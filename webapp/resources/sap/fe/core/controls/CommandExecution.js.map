{"version":3,"file":"CommandExecution.js","names":["CommandExecution","_dec","defineUI5Class","_class","_CoreCommandExecution","sId","mSettings","call","this","_exports","_inheritsLoose","_proto","prototype","setParent","oParent","aCommands","data","Array","isArray","length","oCommand","oShortcut","shortcutSpec","key","destroy","bSuppressInvalidate","getParent","_getCommandInfo","Shortcut","unregister","shortcut","_cleanupContext","Element","apply","setVisible","bValue","oParentControl","oComponent","Component","getOwnerComponentFor","getCommand","Log","info","CoreCommandExecution"],"sources":["./CommandExecution.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type { BindingToolkitExpression } from \"sap/fe/base/BindingToolkit\";\nimport { defineUI5Class } from \"sap/fe/base/ClassSupport\";\nimport CoreCommandExecution from \"sap/ui/core/CommandExecution\";\nimport Component from \"sap/ui/core/Component\";\nimport Element from \"sap/ui/core/Element\";\nimport Shortcut from \"sap/ui/core/Shortcut\";\n\ntype $CommandExecutionSettings = {\n\tvisible?: boolean | BindingToolkitExpression<boolean>;\n\tenabled?: boolean | BindingToolkitExpression<boolean>;\n\texecute?: Function;\n\tcommand: string;\n};\n@defineUI5Class(\"sap.fe.core.controls.CommandExecution\")\nexport default class CommandExecution extends CoreCommandExecution {\n\tconstructor(sId?: string | $CommandExecutionSettings, mSettings?: $CommandExecutionSettings) {\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t// @ts-ignore\n\t\tsuper(sId, mSettings);\n\t}\n\n\tsetParent(oParent: Element): void {\n\t\tsuper.setParent(oParent);\n\t\tconst aCommands = oParent.data(\"sap.ui.core.Shortcut\");\n\t\tif (Array.isArray(aCommands) && aCommands.length > 0) {\n\t\t\tconst oCommand = oParent.data(\"sap.ui.core.Shortcut\")[aCommands.length - 1],\n\t\t\t\toShortcut = oCommand.shortcutSpec;\n\t\t\tif (oShortcut) {\n\t\t\t\t// Check if single key shortcut\n\t\t\t\tfor (const key in oShortcut) {\n\t\t\t\t\tif (oShortcut[key] && key !== \"key\") {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t}\n\n\tdestroy(bSuppressInvalidate: boolean): void {\n\t\tconst oParent = this.getParent();\n\t\tif (oParent) {\n\t\t\tconst oCommand = this._getCommandInfo();\n\t\t\tif (oCommand) {\n\t\t\t\tShortcut.unregister(this.getParent(), oCommand.shortcut);\n\t\t\t}\n\t\t\tthis._cleanupContext(oParent);\n\t\t}\n\t\tElement.prototype.destroy.apply(this, [bSuppressInvalidate]);\n\t}\n\n\tsetVisible(bValue: boolean): this {\n\t\tlet oCommand,\n\t\t\toParentControl = this.getParent(),\n\t\t\toComponent: Component | undefined;\n\n\t\tif (!oParentControl) {\n\t\t\tsuper.setVisible(bValue);\n\t\t}\n\n\t\twhile (!oComponent && oParentControl) {\n\t\t\toComponent = Component.getOwnerComponentFor(oParentControl);\n\t\t\toParentControl = oParentControl.getParent();\n\t\t}\n\n\t\tif (oComponent) {\n\t\t\toCommand = (oComponent as Component & { getCommand: Function }).getCommand(this.getCommand());\n\n\t\t\tif (oCommand) {\n\t\t\t\tsuper.setVisible(bValue);\n\t\t\t} else {\n\t\t\t\tLog.info(\"There is no shortcut definition registered in the manifest for the command : \" + this.getCommand());\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n}\n"],"mappings":";;;;8bAeqBA,GAAgBC,EADpCC,EAAe,yCAAwCD,EAAAE,EAAA,SAAAC,GAEvD,SAAAJ,EAAYK,EAA0CC,GAErD,OACAF,EAAAG,KAAAC,KAAMH,EAAKC,IAAUE,IACtB,CAACC,EAAAT,EAAAU,EAAAV,EAAAI,GAAA,IAAAO,EAAAX,EAAAY,UAAAD,EAEDE,UAAA,SAAAA,EAAUC,GACTV,EAAAQ,UAAMC,UAASN,KAAAC,KAACM,GAChB,MAAMC,EAAYD,EAAQE,KAAK,wBAC/B,GAAIC,MAAMC,QAAQH,IAAcA,EAAUI,OAAS,EAAG,CACrD,MAAMC,EAAWN,EAAQE,KAAK,wBAAwBD,EAAUI,OAAS,GACxEE,EAAYD,EAASE,aACtB,GAAID,EAAW,CAEd,IAAK,MAAME,KAAOF,EAAW,CAC5B,GAAIA,EAAUE,IAAQA,IAAQ,MAAO,CACpC,MACD,CACD,CACD,CACA,MACD,CACD,EAACZ,EAEDa,QAAA,SAAAA,EAAQC,GACP,MAAMX,EAAUN,KAAKkB,YACrB,GAAIZ,EAAS,CACZ,MAAMM,EAAWZ,KAAKmB,kBACtB,GAAIP,EAAU,CACbQ,EAASC,WAAWrB,KAAKkB,YAAaN,EAASU,SAChD,CACAtB,KAAKuB,gBAAgBjB,EACtB,CACAkB,EAAQpB,UAAUY,QAAQS,MAAMzB,KAAM,CAACiB,GACxC,EAACd,EAEDuB,WAAA,SAAAA,EAAWC,GACV,IAAIf,EACHgB,EAAiB5B,KAAKkB,YACtBW,EAED,IAAKD,EAAgB,CACpBhC,EAAAQ,UAAMsB,WAAU3B,KAAAC,KAAC2B,EAClB,CAEA,OAAQE,GAAcD,EAAgB,CACrCC,EAAaC,EAAUC,qBAAqBH,GAC5CA,EAAiBA,EAAeV,WACjC,CAEA,GAAIW,EAAY,CACfjB,EAAYiB,EAAoDG,WAAWhC,KAAKgC,cAEhF,GAAIpB,EAAU,CACbhB,EAAAQ,UAAMsB,WAAU3B,KAAAC,KAAC2B,EAClB,KAAO,CACNM,EAAIC,KAAK,gFAAkFlC,KAAKgC,aACjG,CACD,CACA,OAAOhC,IACR,EAAC,OAAAR,CAAA,CA9DsD,CACV2C,KAAoBxC,GAAAM,EAAAT,EAAA,OAAAS,CAAA","ignoreList":[]}