/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/base/ClassSupport","sap/fe/core/helpers/ResourceModelHelper","sap/fe/core/helpers/StableIdHelper","sap/m/Button","sap/m/CustomListItem","sap/m/Dialog","sap/m/Label","sap/m/List","sap/m/Text","sap/m/VBox","sap/ui/base/ManagedObject","sap/ui/core/CustomData","sap/ui/core/library","../../CommonUtils","sap/fe/base/jsx-runtime/jsx","sap/fe/base/jsx-runtime/jsxs","sap/fe/base/jsx-runtime/Fragment"],function(e,t,s,i,a,o,n,r,l,c,d,u,h,D,p,f,T){"use strict";var g,_,L,A,S,R,m;var O={};var b=h.ValueState;var v=s.generate;var y=t.getResourceModel;var x=e.defineUI5Class;var C=e.defineReference;function E(e,t,s,i){s&&Object.defineProperty(e,t,{enumerable:s.enumerable,configurable:s.configurable,writable:s.writable,value:s.initializer?s.initializer.call(i):void 0})}function F(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,M(e,t)}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}function w(e,t,s,i,a){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=s.slice().reverse().reduce(function(s,i){return i(e,t,s)||s},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer?(Object.defineProperty(e,t,o),null):o}function I(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let B=(g=x("sap.fe.core.controls.DataLossOrDraftDiscard.DraftDataLossDialog"),_=C(),L=C(),g(A=(S=function(e){function t(){var t;for(var s=arguments.length,i=new Array(s),a=0;a<s;a++){i[a]=arguments[a]}t=e.call(this,...i)||this;E(t,"dataLossDialog",R,t);E(t,"optionsList",m,t);t.shallForceDraftSaveOrDiscard=false;return t}O=t;F(t,e);var s=t.prototype;s.open=async function e(t,s){this.view=t.getView();const i=D.getAppComponent(this.view);this.isHiddenDraft=i.getEnvironmentCapabilities()?.getCapabilities()?.HiddenDraft?.enabled;const a=this.view.getBindingContext();this.isRootContextNew=a?await t.editFlow.isRootContextNew(a):false;this.shallForceDraftSaveOrDiscard=t.editFlow.shallForceDraftSaveOrDiscard();this.dataLossResourceModel=y(this.view);this.createContent();const o=()=>this.handleDataLossOk();this.optionsList.current?.addEventDelegate({onkeyup:function(e){if(e.key==="Enter"){o()}}});this.view.addDependent(this.dataLossDialog.current);this.dataLossDialog.current?.open();if(s!=null){this.selectAndFocusFirstEntry(s)}else{this.selectAndFocusFirstEntry()}return new Promise(e=>{this.promiseResolve=e})};s.close=function e(){this.dataLossDialog.current?.close();this.dataLossDialog.current?.destroy()};s.handleDataLossOk=function e(){this.promiseResolve(this.getSelectedKey())};s.handleDataLossCancel=function e(){this.promiseResolve("cancel")};s.selectAndFocusFirstEntry=function e(t){if(t===true){const e=this.optionsList.current?.getItems()[1];this.optionsList.current?.setSelectedItem(e);e?.focus();return}const s=this.optionsList.current?.getItems()[0];this.optionsList.current?.setSelectedItem(s);s?.focus()};s.getSelectedKey=function e(){const t=this.optionsList.current;return t.getSelectedItem().data("itemKey")};s.getConfirmButton=function e(){return p(i,{text:this.dataLossResourceModel.getText("C_COMMON_DIALOG_OK"),type:"Emphasized",press:()=>this.handleDataLossOk()})};s.getCancelButton=function e(){return p(i,{text:this.isHiddenDraft?this.dataLossResourceModel.getText("C_COMMON_SAPFE_CLOSE"):this.dataLossResourceModel.getText("C_COMMON_DIALOG_CANCEL"),press:()=>this.handleDataLossCancel()})};s.getItems=function e(t){let s="";let i=this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_SAVE_DRAFT_RBL");if(t){s=this.isHiddenDraft?this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_SAVE_HIDDEN_DRAFT_TOL"):this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_SAVE_DRAFT_TOL")}else{i=this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_CREATE_ENTITY_RBL");s=this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_CREATE_ENTITY_TOL")}const o=[];o.push(p(a,{customData:[new u({key:"itemKey",value:"draftDataLossOptionSave"})],children:f(c,{class:"sapUiTinyMargin",children:[p(n,{text:i,design:"Bold"}),p(l,{text:s})]})}));if((t||!this.shallForceDraftSaveOrDiscard)&&!this.isHiddenDraft){o.push(p(a,{customData:[new u({key:"itemKey",value:"draftDataLossOptionKeep"})],children:f(c,{class:"sapUiTinyMargin",children:[p(n,{text:this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_KEEP_DRAFT_RBL"),design:"Bold"}),p(l,{text:this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_KEEP_DRAFT_TOL")})]})}))}o.push(p(a,{customData:[new u({key:"itemKey",value:"draftDataLossOptionDiscard"})],children:f(c,{class:"sapUiTinyMargin",children:[p(n,{text:this.isHiddenDraft?this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_DISCARD_HIDDEN_DRAFT_RBL"):this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_DISCARD_DRAFT_RBL"),design:"Bold"}),p(l,{text:this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_DISCARD_DRAFT_TOL")})]})}));return o};s.createContent=function e(){const t=this.view.getBindingContext()?.getObject().HasActiveEntity===true;const s=this.isHiddenDraft?!this.isRootContextNew:t;const i=s?this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_POPUP_MESSAGE_SAVE"):this.dataLossResourceModel.getText("ST_DRAFT_DATALOSS_POPUP_MESSAGE_CREATE");return p(o,{id:v([this.getId(),"draftDataLossDialog"]),title:this.dataLossResourceModel.getText("WARNING"),state:b.Warning,type:"Message",contentWidth:"22rem",ref:this.dataLossDialog,children:{content:f(T,{children:[p(l,{text:i,class:"sapUiTinyMarginBegin sapUiTinyMarginTopBottom"}),p(r,{mode:"SingleSelectLeft",showSeparators:"None",includeItemInSelection:"true",backgroundDesign:"Transparent",class:"sapUiNoContentPadding",ref:this.optionsList,items:this.getItems(s)})]}),buttons:f(T,{children:["confirmButton = ",this.getConfirmButton(),"cancelButton = ",this.getCancelButton()]})}})};return t}(d),R=w(S.prototype,"dataLossDialog",[_],{configurable:true,enumerable:true,writable:true,initializer:null}),m=w(S.prototype,"optionsList",[L],{configurable:true,enumerable:true,writable:true,initializer:null}),S))||A);O=B;return O},false);
//# sourceMappingURL=DraftDataLossDialog.js.map