{"version":3,"file":"ComponentLoader.js","names":["ComponentLoader","_dec","defineUI5Class","_dec2","property","type","required","_dec3","_dec4","_dec5","aggregation","multiple","isDefault","_class","_class2","_Control","_this","_len","arguments","length","args","Array","_key","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_exports","_inheritsLoose","_proto","prototype","init","targets","getTargets","component","Component","getOwnerComponentFor","isA","Error","addTarget","target","getTarget","getId","targetSettings","name","id","controlId","controlAggregation","settings","options","applySettings","mSettings","oScope","onBeforeRendering","display","prefix","routeRelevant","render","rm","loader","getRenderer","Control","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./ComponentLoader.ts"],"sourcesContent":["import { aggregation, defineUI5Class, property } from \"sap/fe/base/ClassSupport\";\nimport type { $ManagedObjectSettings } from \"sap/ui/base/ManagedObject\";\nimport Component from \"sap/ui/core/Component\";\nimport type ComponentContainer from \"sap/ui/core/ComponentContainer\";\nimport type { $ComponentContainerSettings } from \"sap/ui/core/ComponentContainer\";\nimport Control from \"sap/ui/core/Control\";\nimport type RenderManager from \"sap/ui/core/RenderManager\";\nimport type { $TargetSettings } from \"sap/ui/core/routing/Target\";\nimport type Targets from \"sap/ui/core/routing/Targets\";\nimport type UIComponent from \"sap/ui/core/UIComponent\";\n\n/**\n * Control for loading a component using UI5 routing.\n */\n@defineUI5Class(\"sap.fe.core.controls.ComponentLoader\")\nexport default class ComponentLoader extends Control {\n\t/**\n\t * Name of the component.\n\t */\n\t@property({ type: \"string\", required: true })\n\tname!: string;\n\n\t/**\n\t * Route prefix for the component.\n\t */\n\t@property({ type: \"string\" })\n\tprefix?: string;\n\n\t/**\n\t * Setting that will be passed to the component.\n\t */\n\t@property({ type: \"object\" })\n\tsettings?: $ComponentContainerSettings[\"settings\"];\n\n\t/**\n\t * This aggregation holds the embedded component.\n\t */\n\t@aggregation({ type: \"sap.ui.core.ComponentContainer\", multiple: false, isDefault: true })\n\tprivate component: ComponentContainer | null = null;\n\n\t/**\n\t * Targets API.\n\t */\n\tprivate targets!: Targets;\n\n\tinit(): void {\n\t\tthis.targets = this.getTargets();\n\t}\n\n\t/**\n\t * Get the {@link Targets} instance responsible for this control.\n\t * @returns The {@link Targets} instance.\n\t * @throws If the instance could not be found, e.g., if there is no router at all.\n\t */\n\tprivate getTargets(): Targets {\n\t\tlet component = Component.getOwnerComponentFor(this);\n\t\tlet targets: Targets | undefined;\n\t\twhile (component && !targets) {\n\t\t\tif (component.isA<UIComponent>(\"sap.ui.core.UIComponent\")) {\n\t\t\t\ttargets = component.getTargets();\n\t\t\t}\n\t\t\tcomponent = Component.getOwnerComponentFor(component);\n\t\t}\n\n\t\tif (!targets) {\n\t\t\tthrow new Error(\"Could not determine the instance of sap.ui.core.routing.Targets\");\n\t\t}\n\n\t\treturn targets;\n\t}\n\n\t/**\n\t * Add a target, using this control's ID as the name.\n\t */\n\tprivate addTarget(): void {\n\t\tconst target = this.targets.getTarget(this.getId(), true);\n\t\tif (!target) {\n\t\t\t// UI5 routing will later create one instance of the component per tuple [name, id] or [usage, id], respectively.\n\t\t\tconst targetSettings: $TargetSettings & { options?: object } = {\n\t\t\t\ttype: \"Component\",\n\t\t\t\tname: this.name,\n\t\t\t\tid: this.getId(),\n\n\t\t\t\t// this is where the component's view will be placed. It must be **this** control's 'component' aggregation.\n\t\t\t\tcontrolId: this.getId(),\n\t\t\t\tcontrolAggregation: \"component\"\n\t\t\t};\n\n\t\t\tif (this.settings) {\n\t\t\t\ttargetSettings.options = { settings: this.settings };\n\t\t\t}\n\n\t\t\tthis.targets.addTarget(this.getId(), targetSettings);\n\t\t}\n\t}\n\n\tapplySettings(mSettings: $ManagedObjectSettings, oScope?: object): this {\n\t\tsuper.applySettings(mSettings, oScope);\n\t\tthis.addTarget();\n\t\treturn this;\n\t}\n\n\tonBeforeRendering(): void {\n\t\tthis.targets.display({\n\t\t\tname: this.getId(),\n\t\t\tprefix: this.prefix,\n\t\t\trouteRelevant: true\n\t\t});\n\t}\n\n\tstatic render(rm: RenderManager, loader: ComponentLoader): void {\n\t\t// delegate rendering to the nested ComponentContainer\n\t\tif (loader.component) {\n\t\t\tloader.component.getRenderer().render(rm, loader.component);\n\t\t}\n\t}\n}\n"],"mappings":";;;;ypCAWA,IAIqBA,GAAeC,EADnCC,EAAe,wCAAuCC,EAKrDC,EAAS,CAAEC,KAAM,SAAUC,SAAU,OAAOC,EAM5CH,EAAS,CAAEC,KAAM,WAAWG,EAM5BJ,EAAS,CAAEC,KAAM,WAAWI,EAM5BC,EAAY,CAAEL,KAAM,iCAAkCM,SAAU,MAAOC,UAAW,OAAOX,EAAAY,GAAAC,EAAA,SAAAC,GAAA,SAAAf,IAAA,IAAAgB,EAAA,QAAAC,EAAAC,UAAAC,OAAAC,EAAA,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAA,CAAAF,EAAAE,GAAAJ,UAAAI,EAAA,CAAAN,EAAAD,EAAAQ,KAAAC,QAAAJ,IAAAI,KArB1FC,EAAAT,EAAA,OAAAU,EAAAV,GAMAS,EAAAT,EAAA,SAAAW,EAAAX,GAMAS,EAAAT,EAAA,WAAAY,EAAAZ,GAMAS,EAAAT,EAAA,YAAAa,EAAAb,GAAA,OAAAA,CAAA,CAAAc,EAAA9B,EAAA+B,EAAA/B,EAAAe,GAAA,IAAAiB,EAAAhC,EAAAiC,UAMAD,EAKAE,KAAA,SAAAA,IACCV,KAAKW,QAAUX,KAAKY,YACrB,EAEAJ,EAKQI,WAAR,SAAQA,IACP,IAAIC,EAAYC,EAAUC,qBAAqBf,MAC/C,IAAIW,EACJ,MAAOE,IAAcF,EAAS,CAC7B,GAAIE,EAAUG,IAAiB,2BAA4B,CAC1DL,EAAUE,EAAUD,YACrB,CACAC,EAAYC,EAAUC,qBAAqBF,EAC5C,CAEA,IAAKF,EAAS,CACb,MAAM,IAAIM,MAAM,kEACjB,CAEA,OAAON,CACR,EAEAH,EAGQU,UAAR,SAAQA,IACP,MAAMC,EAASnB,KAAKW,QAAQS,UAAUpB,KAAKqB,QAAS,MACpD,IAAKF,EAAQ,CAEZ,MAAMG,EAAyD,CAC9DzC,KAAM,YACN0C,KAAMvB,KAAKuB,KACXC,GAAIxB,KAAKqB,QAGTI,UAAWzB,KAAKqB,QAChBK,mBAAoB,aAGrB,GAAI1B,KAAK2B,SAAU,CAClBL,EAAeM,QAAU,CAAED,SAAU3B,KAAK2B,SAC3C,CAEA3B,KAAKW,QAAQO,UAAUlB,KAAKqB,QAASC,EACtC,CACD,EAACd,EAEDqB,cAAA,SAAAA,EAAcC,EAAmCC,GAChDxC,EAAAkB,UAAMoB,cAAa9B,KAAAC,KAAC8B,EAAWC,GAC/B/B,KAAKkB,YACL,OAAOlB,IACR,EAACQ,EAEDwB,kBAAA,SAAAA,IACChC,KAAKW,QAAQsB,QAAQ,CACpBV,KAAMvB,KAAKqB,QACXa,OAAQlC,KAAKkC,OACbC,cAAe,MAEjB,EAAC3D,EAEM4D,OAAP,SAAOA,EAAOC,EAAmBC,GAEhC,GAAIA,EAAOzB,UAAW,CACrByB,EAAOzB,UAAU0B,cAAcH,OAAOC,EAAIC,EAAOzB,UAClD,CACD,EAAC,OAAArC,CAAA,CA9EyF,CAtB9CgE,GAAOtC,EAAAuC,EAAAnD,EAAAmB,UAAA,QAAA9B,GAAA,CAAA+D,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAA1C,EAAAsC,EAAAnD,EAAAmB,UAAA,UAAA1B,GAAA,CAAA2D,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAzC,EAAAqC,EAAAnD,EAAAmB,UAAA,YAAAzB,GAAA,CAAA0D,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAxC,EAAAoC,EAAAnD,EAAAmB,UAAA,aAAAxB,GAAA,CAAAyD,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,kBAuBJ,IAAI,IAAAvD,KAAAD,GAAAiB,EAAA9B,EAAA,OAAA8B,CAAA","ignoreList":[]}