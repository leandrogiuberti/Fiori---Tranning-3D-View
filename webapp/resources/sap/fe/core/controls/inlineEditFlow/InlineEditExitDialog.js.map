{"version":3,"file":"InlineEditExitDialog.js","names":["DIALOGRESULT","_exports","InlineEditExitDialog","view","dialogCallBack","this","containingView","optionsList","_jsx","List","mode","showSeparators","includeItemInSelection","backgroundDesign","class","children","items","CustomListItem","customData","CustomData","key","value","_jsxs","VBox","Label","text","design","Text","dialog","Dialog","title","type","contentWidth","state","ValueState","Warning","content","beginButton","Button","press","closeAndOK","endButton","closeAndCancel","addDependent","_proto","prototype","open","selectAndFocusFirstEntry","getSelectedKey","getSelectedItem","data","firstListItemOption","getItems","setSelectedItem","focus","SAVE","DISCARD","close","destroy","CANCEL"],"sources":["./InlineEditExitDialog.tsx"],"sourcesContent":["import type { FEView } from \"sap/fe/core/BaseController\";\nimport Button from \"sap/m/Button\";\nimport CustomListItem from \"sap/m/CustomListItem\";\nimport Dialog from \"sap/m/Dialog\";\nimport Label from \"sap/m/Label\";\nimport List from \"sap/m/List\";\nimport Text from \"sap/m/Text\";\nimport VBox from \"sap/m/VBox\";\nimport CustomData from \"sap/ui/core/CustomData\";\nimport { ValueState } from \"sap/ui/core/library\";\n\nexport enum DIALOGRESULT {\n\tSAVE = \"Save\",\n\tDISCARD = \"Discard\",\n\tCANCEL = \"Cancel\"\n}\nexport default class InlineEditExitDialog {\n\tpublic containingView!: FEView;\n\n\tpublic dialog!: Dialog;\n\n\tprivate optionsList!: List;\n\n\tprivate dialogCallBack!: Function;\n\n\tconstructor(view: FEView, dialogCallBack: Function) {\n\t\tthis.containingView = view;\n\t\tthis.dialogCallBack = dialogCallBack;\n\t\tthis.optionsList = (\n\t\t\t<List\n\t\t\t\tmode=\"SingleSelectLeft\"\n\t\t\t\tshowSeparators=\"None\"\n\t\t\t\tincludeItemInSelection=\"true\"\n\t\t\t\tbackgroundDesign=\"Transparent\"\n\t\t\t\tclass=\"sapUiNoContentPadding\"\n\t\t\t>\n\t\t\t\t{{\n\t\t\t\t\titems: [\n\t\t\t\t\t\t<CustomListItem customData={[new CustomData({ key: \"itemKey\", value: \"SAVE\" })]}>\n\t\t\t\t\t\t\t<VBox class=\"sapUiTinyMargin\">\n\t\t\t\t\t\t\t\t<Label text=\"{sap.fe.i18n>C_INLINE_EDIT_BEFORENAVIGATION_SAVE_RBL}\" design=\"Bold\" />\n\t\t\t\t\t\t\t\t<Text text=\"{sap.fe.i18n>C_INLINE_EDIT_BEFORENAVIGATION_SAVE_TOL}\" />\n\t\t\t\t\t\t\t</VBox>\n\t\t\t\t\t\t</CustomListItem>,\n\t\t\t\t\t\t<CustomListItem customData={[new CustomData({ key: \"itemKey\", value: \"DISCARD\" })]}>\n\t\t\t\t\t\t\t<VBox class=\"sapUiTinyMargin\">\n\t\t\t\t\t\t\t\t<Label text=\"{sap.fe.i18n>C_INLINE_EDIT_BEFORENAVIGATION_DISCARD_RBL}\" design=\"Bold\" />\n\t\t\t\t\t\t\t\t<Text text=\"{sap.fe.i18n>C_INLINE_EDIT_BEFORENAVIGATION_DISCARD_TOL}\" />\n\t\t\t\t\t\t\t</VBox>\n\t\t\t\t\t\t</CustomListItem>\n\t\t\t\t\t]\n\t\t\t\t}}\n\t\t\t</List>\n\t\t);\n\n\t\tthis.dialog = (\n\t\t\t<Dialog title=\"{sap.fe.i18n>WARNING}\" type=\"Message\" contentWidth={\"22rem\"} state={ValueState.Warning}>\n\t\t\t\t{{\n\t\t\t\t\tcontent: [\n\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\ttext=\"{sap.fe.i18n>C_INLINE_EDIT_BEFORENAVIGATION_MESSAGE}\"\n\t\t\t\t\t\t\tclass=\"sapUiTinyMarginBegin sapUiTinyMarginTopBottom\"\n\t\t\t\t\t\t/>,\n\t\t\t\t\t\tthis.optionsList\n\t\t\t\t\t]\n\t\t\t\t}}\n\t\t\t\t{{\n\t\t\t\t\tbeginButton: <Button type=\"Emphasized\" text=\"{sap.fe.i18n>C_COMMON_DIALOG_OK}\" press={(): void => this.closeAndOK()} />\n\t\t\t\t}}\n\t\t\t\t{{ endButton: <Button text=\"{sap.fe.i18n>C_COMMON_DIALOG_CANCEL}\" press={(): void => this.closeAndCancel()} /> }}\n\t\t\t</Dialog>\n\t\t);\n\t\tview.addDependent(this.dialog);\n\t}\n\n\t/**\n\t * Open the dialog.\n\t */\n\tpublic open(): void {\n\t\tthis.dialog.open();\n\t\tthis.selectAndFocusFirstEntry();\n\t}\n\n\t/**\n\t * Gets the key of the selected item from the list of options that was set via customData.\n\t * @returns The key of the currently selected item\n\t */\n\tprivate getSelectedKey(): string {\n\t\tconst optionsList = this.optionsList;\n\t\treturn optionsList.getSelectedItem().data(\"itemKey\");\n\t}\n\n\t/**\n\t * Sets the focus on the first list item of the dialog.\n\t *\n\t */\n\tprivate selectAndFocusFirstEntry(): void {\n\t\tconst firstListItemOption: CustomListItem = this.optionsList.getItems()[0] as CustomListItem;\n\t\tthis.optionsList.setSelectedItem(firstListItemOption);\n\t\t// We do not set the focus on the button, but catch the ENTER key in the dialog\n\t\t// and process it as Ok, since focusing the button was reported as an ACC issue\n\t\tfirstListItemOption?.focus();\n\t}\n\n\t/**\n\t * Close the dialog and call the callBack with the selected key.\n\t * @private\n\t */\n\tprivate closeAndOK(): void {\n\t\tif (this.getSelectedKey() === \"SAVE\") {\n\t\t\tthis.dialogCallBack(DIALOGRESULT.SAVE);\n\t\t} else {\n\t\t\tthis.dialogCallBack(DIALOGRESULT.DISCARD);\n\t\t}\n\t\tthis.dialog.close();\n\t\tthis.dialog.destroy();\n\t}\n\n\t/**\n\t * Close the dialog and call the callBack with 'CANCEL'.\n\t * @private\n\t */\n\tprivate closeAndCancel(): void {\n\t\tthis.dialogCallBack(DIALOGRESULT.CANCEL);\n\t\tthis.dialog.close();\n\t\tthis.dialog.destroy();\n\t}\n}\n"],"mappings":";;;;mTAWYA,EAAY,SAAZA,KAAY,eAAZA,EAAY,qBAAZA,EAAY,0BAAZA,CAAY,MAAAC,EAAAD,eAAA,IAKHE,EAAoB,WASxC,SAAAA,EAAYC,EAAcC,GACzBC,KAAKC,eAAiBH,EACtBE,KAAKD,eAAiBA,EACtBC,KAAKE,YACJC,EAACC,EAAI,CACJC,KAAK,mBACLC,eAAe,OACfC,uBAAuB,OACvBC,iBAAiB,cACjBC,MAAM,wBAAuBC,SAE5B,CACAC,MAAO,CACNR,EAACS,EAAc,CAACC,WAAY,CAAC,IAAIC,EAAW,CAAEC,IAAK,UAAWC,MAAO,UAAWN,SAC/EO,EAACC,EAAI,CAACT,MAAM,kBAAiBC,SAAA,CAC5BP,EAACgB,EAAK,CAACC,KAAK,wDAAwDC,OAAO,SAC3ElB,EAACmB,EAAI,CAACF,KAAK,+DAGbjB,EAACS,EAAc,CAACC,WAAY,CAAC,IAAIC,EAAW,CAAEC,IAAK,UAAWC,MAAO,aAAcN,SAClFO,EAACC,EAAI,CAACT,MAAM,kBAAiBC,SAAA,CAC5BP,EAACgB,EAAK,CAACC,KAAK,2DAA2DC,OAAO,SAC9ElB,EAACmB,EAAI,CAACF,KAAK,sEAQjBpB,KAAKuB,OACJN,EAACO,EAAM,CAACC,MAAM,wBAAwBC,KAAK,UAAUC,aAAc,QAASC,MAAOC,EAAWC,QAAQpB,SAAA,CACpG,CACAqB,QAAS,CACR5B,EAACmB,EAAI,CACJF,KAAK,uDACLX,MAAM,kDAEPT,KAAKE,cAGN,CACA8B,YAAa7B,EAAC8B,EAAM,CAACP,KAAK,aAAaN,KAAK,mCAAmCc,MAAOA,IAAYlC,KAAKmC,gBAEvG,CAAEC,UAAWjC,EAAC8B,EAAM,CAACb,KAAK,uCAAuCc,MAAOA,IAAYlC,KAAKqC,uBAG5FvC,EAAKwC,aAAatC,KAAKuB,OACxB,CAEA3B,EAAAC,EAAA,IAAA0C,EAAA1C,EAAA2C,UAAAD,EAGOE,KAAP,SAAOA,IACNzC,KAAKuB,OAAOkB,OACZzC,KAAK0C,0BACN,EAEAH,EAIQI,eAAR,SAAQA,IACP,MAAMzC,EAAcF,KAAKE,YACzB,OAAOA,EAAY0C,kBAAkBC,KAAK,UAC3C,EAEAN,EAIQG,yBAAR,SAAQA,IACP,MAAMI,EAAsC9C,KAAKE,YAAY6C,WAAW,GACxE/C,KAAKE,YAAY8C,gBAAgBF,GAGjCA,GAAqBG,OACtB,EAEAV,EAIQJ,WAAR,SAAQA,IACP,GAAInC,KAAK2C,mBAAqB,OAAQ,CACrC3C,KAAKD,eAAeJ,EAAauD,KAClC,KAAO,CACNlD,KAAKD,eAAeJ,EAAawD,QAClC,CACAnD,KAAKuB,OAAO6B,QACZpD,KAAKuB,OAAO8B,SACb,EAEAd,EAIQF,eAAR,SAAQA,IACPrC,KAAKD,eAAeJ,EAAa2D,QACjCtD,KAAKuB,OAAO6B,QACZpD,KAAKuB,OAAO8B,SACb,EAAC,OAAAxD,CAAA,CA9GuC,GA8GvCD,EAAAC,EAAA,OAAAD,CAAA","ignoreList":[]}