{"version":3,"names":["DataWatcher","_dec","defineUI5Class","_dec2","property","type","_dec3","event","_class","_class2","_UI5Element","idOrProps","props","scope","_this","call","_initializerDefineProperty","_descriptor","_descriptor2","isInitial","isSingleton","propertyBinding","startsWith","_exports","_inheritsLoose","_proto","prototype","setPropertyBinding","oldValue","getProperty","_previousContextPath","getBindingContext","getPath","_initialValue","setProperty","fireEvent","value","context","UI5Element","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sourceRoot":".","sources":["DataWatcher.tsx"],"sourcesContent":["import type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { defineUI5Class, event, property } from \"sap/fe/base/ClassSupport\";\nimport type UI5Event from \"sap/ui/base/Event\";\nimport UI5Element from \"sap/ui/core/Element\";\nimport type Context from \"sap/ui/model/Context\";\nimport type { EventHandler } from \"types/extension_types\";\n\n/**\n * A callback function that is called when the value of the watched property changes.\n * @param value The new value of the watched property\n * @param oldValue The old value of the watched property\n * @param isInitial Whether the value change is the initial value\n * @param context The binding context of the watched property\n * @typedef\n * @public\n */\nexport type WatcherCallback = (value: unknown, oldValue: unknown, isInitial: boolean, context: Context) => void;\n\n/**\n * The DataWatcher is an element you can use to watch a property binding and get notified when the value changes.\n *\n */\n@defineUI5Class(\"sap.fe.core.controls.DataWatcher\")\nexport default class DataWatcher extends UI5Element {\n\t@property({ type: \"any\" })\n\tpropertyBinding?: unknown;\n\n\t@event()\n\tvalueChanged?: EventHandler<UI5Event<{ value: unknown; oldValue: unknown; isInitial: boolean; context: Context }, DataWatcher>>;\n\n\tprivate _initialValue?: unknown;\n\n\tprivate isInitial: boolean;\n\n\tprivate _previousContextPath?: string;\n\n\tprivate isSingleton?: boolean;\n\n\tconstructor(idOrProps?: string | PropertiesOf<DataWatcher>, props?: PropertiesOf<DataWatcher>, scope?: unknown) {\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t// @ts-ignore\n\t\tsuper(idOrProps as string | undefined, props, scope); // need to pass scope here\n\t\tthis.isInitial = true;\n\t\tthis.isSingleton = ((typeof idOrProps !== \"string\" ? idOrProps : props)?.propertyBinding as string).startsWith(\"{/\");\n\t}\n\n\tsetPropertyBinding(propertyBinding: string): void {\n\t\tconst oldValue = this.getProperty(\"propertyBinding\");\n\t\t// for singleton it doesn't matter if the context of the view changes\n\t\tif (this.isInitial || (!this.isSingleton && this._previousContextPath !== this.getBindingContext()?.getPath())) {\n\t\t\tthis.isInitial = false;\n\t\t\tthis._initialValue = propertyBinding;\n\t\t\tthis._previousContextPath = this.getBindingContext()?.getPath();\n\t\t}\n\t\tsuper.setProperty(\"propertyBinding\", propertyBinding, true);\n\t\tthis.fireEvent(\"valueChanged\", {\n\t\t\tvalue: propertyBinding,\n\t\t\toldValue: oldValue,\n\t\t\tisInitial: propertyBinding === this._initialValue,\n\t\t\tcontext: this.getBindingContext()\n\t\t});\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;EAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAGA;AACA;AACA;AACA;EAHA,IAKqBA,WAAW,IAAAC,IAAA,GAD/BC,cAAc,CAAC,kCAAkC,CAAC,EAAAC,KAAA,GAEjDC,QAAQ,CAAC;IAAEC,IAAI,EAAE;EAAM,CAAC,CAAC,EAAAC,KAAA,GAGzBC,KAAK,CAAC,CAAC,EAAAN,IAAA,CAAAO,MAAA,IAAAC,OAAA,0BAAAC,WAAA;IAWR,SAAAV,YAAYW,SAA8C,EAAEC,KAAiC,EAAEC,KAAe,EAAE;MAAA,IAAAC,KAAA;MAC/G;MACA;MACAA,KAAA,GAAAJ,WAAA,CAAAK,IAAA,OAAMJ,SAAS,EAAwBC,KAAK,EAAEC,KAAK,CAAC,SAAC,CAAC;MAAAG,0BAAA,CAAAF,KAAA,qBAAAG,WAAA,EAAAH,KAAA;MAAAE,0BAAA,CAAAF,KAAA,kBAAAI,YAAA,EAAAJ,KAAA;MACtDA,KAAA,CAAKK,SAAS,GAAG,IAAI;MACrBL,KAAA,CAAKM,WAAW,GAAG,CAAC,CAAC,OAAOT,SAAS,KAAK,QAAQ,GAAGA,SAAS,GAAGC,KAAK,GAAGS,eAAe,EAAYC,UAAU,CAAC,IAAI,CAAC;MAAC,OAAAR,KAAA;IACtH;IAACS,QAAA,GAAAvB,WAAA;IAAAwB,cAAA,CAAAxB,WAAA,EAAAU,WAAA;IAAA,IAAAe,MAAA,GAAAzB,WAAA,CAAA0B,SAAA;IAAAD,MAAA,CAEDE,kBAAkB,GAAlB,SAAAA,kBAAkBA,CAACN,eAAuB,EAAQ;MACjD,MAAMO,QAAQ,GAAG,IAAI,CAACC,WAAW,CAAC,iBAAiB,CAAC;MACpD;MACA,IAAI,IAAI,CAACV,SAAS,IAAK,CAAC,IAAI,CAACC,WAAW,IAAI,IAAI,CAACU,oBAAoB,KAAK,IAAI,CAACC,iBAAiB,CAAC,CAAC,EAAEC,OAAO,CAAC,CAAE,EAAE;QAC/G,IAAI,CAACb,SAAS,GAAG,KAAK;QACtB,IAAI,CAACc,aAAa,GAAGZ,eAAe;QACpC,IAAI,CAACS,oBAAoB,GAAG,IAAI,CAACC,iBAAiB,CAAC,CAAC,EAAEC,OAAO,CAAC,CAAC;MAChE;MACAtB,WAAA,CAAAgB,SAAA,CAAMQ,WAAW,CAAAnB,IAAA,OAAC,iBAAiB,EAAEM,eAAe,EAAE,IAAI;MAC1D,IAAI,CAACc,SAAS,CAAC,cAAc,EAAE;QAC9BC,KAAK,EAAEf,eAAe;QACtBO,QAAQ,EAAEA,QAAQ;QAClBT,SAAS,EAAEE,eAAe,KAAK,IAAI,CAACY,aAAa;QACjDI,OAAO,EAAE,IAAI,CAACN,iBAAiB,CAAC;MACjC,CAAC,CAAC;IACH,CAAC;IAAA,OAAA/B,WAAA;EAAA,EAtCuCsC,UAAU,GAAArB,WAAA,GAAAsB,yBAAA,CAAA9B,OAAA,CAAAiB,SAAA,sBAAAvB,KAAA;IAAAqC,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAAzB,YAAA,GAAAqB,yBAAA,CAAA9B,OAAA,CAAAiB,SAAA,mBAAApB,KAAA;IAAAkC,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAAlC,OAAA,MAAAD,MAAA;EAAAe,QAAA,GAAAvB,WAAA;EAAA,OAAAuB,QAAA;AAAA","ignoreList":[],"file":"DataWatcher-dbg.js"}