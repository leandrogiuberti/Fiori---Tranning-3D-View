{"version":3,"file":"AttributeModel.js","names":["AttributeModel","_JSONModel","oNode","oProps","BuildingBlockClass","_this","call","this","$$valueAsPromise","_inheritsLoose","_proto","prototype","_getObject","sPath","oContext","undefined","getPath","oValue","ObjectPath","get","replace","hasOwnProperty","includes","Log","error","name","getAttribute","JSONModel"],"sources":["./AttributeModel.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport ObjectPath from \"sap/base/util/ObjectPath\";\nimport type BuildingBlockTemplatingBase from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplatingBase\";\nimport type Context from \"sap/ui/model/Context\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\n\n/**\n * Special JSONModel that is used to store the attribute model for the building block.\n * It has specific handling for undefinedValue mapping\n */\nclass AttributeModel extends JSONModel {\n\tpublic $$valueAsPromise: boolean;\n\n\tconstructor(\n\t\tprivate readonly oNode: Element,\n\t\tprivate readonly oProps: Record<string, unknown>,\n\t\tprivate readonly BuildingBlockClass: typeof BuildingBlockTemplatingBase\n\t) {\n\t\tsuper();\n\t\tthis.$$valueAsPromise = true;\n\t}\n\n\t_getObject(sPath: string, oContext?: Context): unknown {\n\t\tif (sPath === undefined || sPath === \"\") {\n\t\t\tif (oContext !== undefined && oContext.getPath() !== \"/\") {\n\t\t\t\treturn this._getObject(oContext.getPath(sPath));\n\t\t\t}\n\t\t\treturn this.oProps;\n\t\t}\n\t\tif (sPath === \"/undefinedValue\" || sPath === \"undefinedValue\") {\n\t\t\treturn undefined;\n\t\t}\n\t\t// just return the attribute - we can't validate them, and we don't support aggregations for now\n\t\tconst oValue = ObjectPath.get(sPath.replace(/\\//g, \".\"), this.oProps);\n\t\tif (oValue !== undefined) {\n\t\t\treturn oValue;\n\t\t}\n\t\t// Deal with undefined properties\n\t\tif (this.oProps.hasOwnProperty(sPath)) {\n\t\t\treturn this.oProps[sPath];\n\t\t}\n\t\tif (!sPath.includes(\":\") && !sPath.includes(\"/\")) {\n\t\t\t// Gloves are off, if you have this error you forgot to decorate your property with @blockAttribute but are still using it in underlying templating\n\t\t\tLog.error(`Missing property ${sPath} on building block metadata ${this.BuildingBlockClass.name}`);\n\t\t}\n\t\treturn this.oNode.getAttribute(sPath);\n\t}\n}\n\nexport default AttributeModel;\n"],"mappings":";;;;sUAMA,IAIMA,EAAc,SAAAC,GAGnB,SAAAD,EACkBE,EACAC,EACAC,GAChB,IAAAC,EACDA,EAAAJ,EAAAK,KAAAC,OAAOA,KAACF,EAJSH,QAAcG,EACdF,SAA+BE,EAC/BD,qBAGjBC,EAAKG,iBAAmB,KAAK,OAAAH,CAC9B,CAACI,EAAAT,EAAAC,GAAA,IAAAS,EAAAV,EAAAW,UAAAD,EAEDE,WAAA,SAAAA,EAAWC,EAAeC,GACzB,GAAID,IAAUE,WAAaF,IAAU,GAAI,CACxC,GAAIC,IAAaC,WAAaD,EAASE,YAAc,IAAK,CACzD,OAAOT,KAAKK,WAAWE,EAASE,QAAQH,GACzC,CACA,OAAON,KAAKJ,MACb,CACA,GAAIU,IAAU,mBAAqBA,IAAU,iBAAkB,CAC9D,OAAOE,SACR,CAEA,MAAME,EAASC,EAAWC,IAAIN,EAAMO,QAAQ,MAAO,KAAMb,KAAKJ,QAC9D,GAAIc,IAAWF,UAAW,CACzB,OAAOE,CACR,CAEA,GAAIV,KAAKJ,OAAOkB,eAAeR,GAAQ,CACtC,OAAON,KAAKJ,OAAOU,EACpB,CACA,IAAKA,EAAMS,SAAS,OAAST,EAAMS,SAAS,KAAM,CAEjDC,EAAIC,MAAM,oBAAoBX,gCAAoCN,KAAKH,mBAAmBqB,OAC3F,CACA,OAAOlB,KAAKL,MAAMwB,aAAab,EAChC,EAAC,OAAAb,CAAA,CApCkB,CAAS2B,GAAS,OAuCvB3B,CAAc","ignoreList":[]}