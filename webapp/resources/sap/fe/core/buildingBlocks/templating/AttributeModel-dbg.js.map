{"version":3,"names":["AttributeModel","_JSONModel","oNode","oProps","BuildingBlockClass","_this","call","$$valueAsPromise","_inheritsLoose","_proto","prototype","_getObject","sPath","oContext","undefined","getPath","oValue","ObjectPath","get","replace","hasOwnProperty","includes","Log","error","name","getAttribute","JSONModel"],"sourceRoot":".","sources":["AttributeModel.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport ObjectPath from \"sap/base/util/ObjectPath\";\nimport type BuildingBlockTemplatingBase from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplatingBase\";\nimport type Context from \"sap/ui/model/Context\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\n\n/**\n * Special JSONModel that is used to store the attribute model for the building block.\n * It has specific handling for undefinedValue mapping\n */\nclass AttributeModel extends JSONModel {\n\tpublic $$valueAsPromise: boolean;\n\n\tconstructor(\n\t\tprivate readonly oNode: Element,\n\t\tprivate readonly oProps: Record<string, unknown>,\n\t\tprivate readonly BuildingBlockClass: typeof BuildingBlockTemplatingBase\n\t) {\n\t\tsuper();\n\t\tthis.$$valueAsPromise = true;\n\t}\n\n\t_getObject(sPath: string, oContext?: Context): unknown {\n\t\tif (sPath === undefined || sPath === \"\") {\n\t\t\tif (oContext !== undefined && oContext.getPath() !== \"/\") {\n\t\t\t\treturn this._getObject(oContext.getPath(sPath));\n\t\t\t}\n\t\t\treturn this.oProps;\n\t\t}\n\t\tif (sPath === \"/undefinedValue\" || sPath === \"undefinedValue\") {\n\t\t\treturn undefined;\n\t\t}\n\t\t// just return the attribute - we can't validate them, and we don't support aggregations for now\n\t\tconst oValue = ObjectPath.get(sPath.replace(/\\//g, \".\"), this.oProps);\n\t\tif (oValue !== undefined) {\n\t\t\treturn oValue;\n\t\t}\n\t\t// Deal with undefined properties\n\t\tif (this.oProps.hasOwnProperty(sPath)) {\n\t\t\treturn this.oProps[sPath];\n\t\t}\n\t\tif (!sPath.includes(\":\") && !sPath.includes(\"/\")) {\n\t\t\t// Gloves are off, if you have this error you forgot to decorate your property with @blockAttribute but are still using it in underlying templating\n\t\t\tLog.error(`Missing property ${sPath} on building block metadata ${this.BuildingBlockClass.name}`);\n\t\t}\n\t\treturn this.oNode.getAttribute(sPath);\n\t}\n}\n\nexport default AttributeModel;\n"],"mappings":";;;;;;;;;EAMA;AACA;AACA;AACA;EAHA,IAIMA,cAAc,0BAAAC,UAAA;IAGnB,SAAAD,eACkBE,KAAc,EACdC,MAA+B,EAC/BC,kBAAsD,EACtE;MAAA,IAAAC,KAAA;MACDA,KAAA,GAAAJ,UAAA,CAAAK,IAAA,KAAM,CAAC;MAACD,KAAA,CAJSH,KAAc,GAAdA,KAAc;MAAAG,KAAA,CACdF,MAA+B,GAA/BA,MAA+B;MAAAE,KAAA,CAC/BD,kBAAsD,GAAtDA,kBAAsD;MAGvEC,KAAA,CAAKE,gBAAgB,GAAG,IAAI;MAAC,OAAAF,KAAA;IAC9B;IAACG,cAAA,CAAAR,cAAA,EAAAC,UAAA;IAAA,IAAAQ,MAAA,GAAAT,cAAA,CAAAU,SAAA;IAAAD,MAAA,CAEDE,UAAU,GAAV,SAAAA,UAAUA,CAACC,KAAa,EAAEC,QAAkB,EAAW;MACtD,IAAID,KAAK,KAAKE,SAAS,IAAIF,KAAK,KAAK,EAAE,EAAE;QACxC,IAAIC,QAAQ,KAAKC,SAAS,IAAID,QAAQ,CAACE,OAAO,CAAC,CAAC,KAAK,GAAG,EAAE;UACzD,OAAO,IAAI,CAACJ,UAAU,CAACE,QAAQ,CAACE,OAAO,CAACH,KAAK,CAAC,CAAC;QAChD;QACA,OAAO,IAAI,CAACT,MAAM;MACnB;MACA,IAAIS,KAAK,KAAK,iBAAiB,IAAIA,KAAK,KAAK,gBAAgB,EAAE;QAC9D,OAAOE,SAAS;MACjB;MACA;MACA,MAAME,MAAM,GAAGC,UAAU,CAACC,GAAG,CAACN,KAAK,CAACO,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,EAAE,IAAI,CAAChB,MAAM,CAAC;MACrE,IAAIa,MAAM,KAAKF,SAAS,EAAE;QACzB,OAAOE,MAAM;MACd;MACA;MACA,IAAI,IAAI,CAACb,MAAM,CAACiB,cAAc,CAACR,KAAK,CAAC,EAAE;QACtC,OAAO,IAAI,CAACT,MAAM,CAACS,KAAK,CAAC;MAC1B;MACA,IAAI,CAACA,KAAK,CAACS,QAAQ,CAAC,GAAG,CAAC,IAAI,CAACT,KAAK,CAACS,QAAQ,CAAC,GAAG,CAAC,EAAE;QACjD;QACAC,GAAG,CAACC,KAAK,CAAC,oBAAoBX,KAAK,+BAA+B,IAAI,CAACR,kBAAkB,CAACoB,IAAI,EAAE,CAAC;MAClG;MACA,OAAO,IAAI,CAACtB,KAAK,CAACuB,YAAY,CAACb,KAAK,CAAC;IACtC,CAAC;IAAA,OAAAZ,cAAA;EAAA,EApC2B0B,SAAS;EAAA,OAuCvB1B,cAAc;AAAA","ignoreList":[],"file":"AttributeModel-dbg.js"}