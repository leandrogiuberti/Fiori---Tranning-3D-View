{"version":3,"file":"BuildingBlock.js","names":["BuildingBlock","_dec","defineUI5Class","_dec2","property","type","_class","_class2","_BuildingBlock","_BuildingBlockBase","settings","others","_this","call","this","_initializerDefineProperty","_descriptor","_applyingSettings","notifyBBObservers","_inheritsLoose","_proto","prototype","applySettings","mSettings","oScope","_checkIfMetadataReady","destroy","arguments","length","undefined","bbobserverMap","_bbobserverMap","get","getId","observeBB","onDestroy","onAvailable","observeBuildingBlock","id","parameters","element","ElementRegistry","push","set","_getOwner","control","owner","Component","getOwnerComponentFor","isA","getParent","getPageController","logError","pageController","getRootController","Log","error","getMetaModel","metaModel","startsWith","getMetaModelById","suppressInvalidate","viewState","deregisterStateContributor","removeControllerExtensionHookHandlers","fromApplySettings","onMetadataAvailable","err","getMetadata","getName","registerStateContributor","initControllerExtensionHookHandlers","content","warning","attachEventOnce","clone","sIdSuffix","aLocalIds","runAsOwner","_ownerComponent","getAppComponent","getDataModelObjectPath","targetPath","targetPathToUse","getOwnerContextPath","getInvolvedDataModelObjectsForTargetPath","getFullContextPath","getDataModelObjectForMetaPath","metapath","contextPath","contextPathToUse","getComputedContextPath","resolvedContextPath","endsWith","charAt","Error","metaContext","createBindingContext","metaPathContext","MetaModelConverter","getInvolvedDataModelObjects","getMetaPathObject","metaPath","MetaPath","convertTypes","e","createId","_len","stringParts","Array","_key","generate","getTranslatedText","textID","getModel","getText","getManifestWrapper","getOwnerPageDefinition","preprocessorContext","getDefinitionForPage","BuildingBlockBase","Map","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./BuildingBlock.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport BuildingBlockBase from \"sap/fe/base/BuildingBlockBase\";\nimport type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { defineUI5Class, property } from \"sap/fe/base/ClassSupport\";\nimport { initControllerExtensionHookHandlers, removeControllerExtensionHookHandlers } from \"sap/fe/base/HookSupport\";\nimport type { FEView } from \"sap/fe/core/BaseController\";\nimport type PageController from \"sap/fe/core/PageController\";\nimport type ResourceModel from \"sap/fe/core/ResourceModel\";\nimport type TemplateComponent from \"sap/fe/core/TemplateComponent\";\nimport type IViewStateContributor from \"sap/fe/core/controllerextensions/viewState/IViewStateContributor\";\nimport type ManifestWrapper from \"sap/fe/core/converters/ManifestWrapper\";\nimport * as MetaModelConverter from \"sap/fe/core/converters/MetaModelConverter\";\nimport { convertTypes, getInvolvedDataModelObjectsForTargetPath, getMetaModelById } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { DefinitionPage } from \"sap/fe/core/definition/FEDefinition\";\nimport MetaPath from \"sap/fe/core/helpers/MetaPath\";\nimport type { AuthorizedIdAnnotationsType } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport type ManagedObject from \"sap/ui/base/ManagedObject\";\nimport type { $ManagedObjectSettings } from \"sap/ui/base/ManagedObject\";\nimport Component from \"sap/ui/core/Component\";\nimport type Control from \"sap/ui/core/Control\";\nimport type UI5Element from \"sap/ui/core/Element\";\nimport ElementRegistry from \"sap/ui/core/ElementRegistry\";\n\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type AppComponent from \"../AppComponent\";\n\nexport type ObserveBuildingBlock = {\n\tonAvailable?: (bb: UI5Element) => void;\n\tonDestroy?: (bb: UI5Element) => void;\n};\n/**\n * Defines a control that will not exist in the DOM.\n * Instead, only its child will be there and this control will forward all DOM related instruction to it.\n * @since 1.121.0\n * @public\n */\n@defineUI5Class(\"sap.fe.core.buildingBlocks.BuildingBlock\")\nclass BuildingBlock<T extends UI5Element = Control, K extends object = {}> extends BuildingBlockBase<T, K> {\n\t/**\n\t * The metamodel name or id to be used for this building block\n\t */\n\t@property({ type: \"string\" })\n\tmetaModel?: string;\n\n\tprotected _applyingSettings = false;\n\n\tprivate static _bbobserverMap: Map<string, ObserveBuildingBlock[]> = new Map();\n\n\tconstructor(settings?: string | PropertiesOf<BuildingBlockBase<T>>, others?: PropertiesOf<BuildingBlockBase<T>>) {\n\t\tsuper(settings, others);\n\t\tthis.notifyBBObservers();\n\t}\n\n\toverride applySettings(mSettings: $ManagedObjectSettings, oScope?: object): this {\n\t\tthis._applyingSettings = true;\n\n\t\tsuper.applySettings(mSettings, oScope);\n\t\tthis._applyingSettings = false;\n\t\tthis._checkIfMetadataReady(true);\n\n\t\treturn this;\n\t}\n\n\tnotifyBBObservers(destroy = false): void {\n\t\tconst bbobserverMap = BuildingBlock._bbobserverMap.get(this.getId());\n\t\tif (bbobserverMap && bbobserverMap.length > 0) {\n\t\t\tfor (const observeBB of bbobserverMap) {\n\t\t\t\tif (destroy) {\n\t\t\t\t\tif (observeBB.onDestroy) {\n\t\t\t\t\t\tobserveBB.onDestroy(this);\n\t\t\t\t\t}\n\t\t\t\t} else if (observeBB.onAvailable) {\n\t\t\t\t\tobserveBB.onAvailable(this);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Allows to observe building block once it is created.\n\t * @param id The id of the building block which will be observed\n\t * @param parameters The id of the building block which is being requsted\n\t * @param parameters.onAvailable Callback which is called with the instance of the BB when it is available\n\t * @param parameters.onDestroy Callback which is called with the instance of the BB when it is destroyed\n\t */\n\tstatic observeBuildingBlock(id: string, parameters: ObserveBuildingBlock): void {\n\t\t//if (parameters)\n\t\tconst element = ElementRegistry.get(id);\n\t\t// if the element is already registered\n\t\tif (element) {\n\t\t\tif (parameters.onAvailable) {\n\t\t\t\tparameters.onAvailable(element);\n\t\t\t}\n\t\t} else {\n\t\t\tconst bbobserverMap = BuildingBlock._bbobserverMap.get(id);\n\t\t\tif (bbobserverMap) {\n\t\t\t\tbbobserverMap.push(parameters);\n\t\t\t} else {\n\t\t\t\tBuildingBlock._bbobserverMap.set(id, [parameters]);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Get the instance of a building block based once it is registered.\n\t * @param id The id of the building block which is being requsted\n\t * @returns Promise resolved with an instance of the building block once it is registered/instantied.\n\t * \t The promise is resolved when the building block is intantied hence it recommended to only await on the promise\n\t * \t when it is known that the building block will be available. In cases here the building block might not be available,\n\t * \t for example becuase of lazy loading, then it is recommended not to await on the promise and instead use Promise.then().\n\t */\n\n\t_getOwner(): TemplateComponent | undefined {\n\t\t//eslint-disable-next-line @typescript-eslint/no-this-alias\n\t\tlet control: Control | undefined = this;\n\t\tlet owner = Component.getOwnerComponentFor(control);\n\t\twhile (!owner && control && !control.isA<FEView>(\"sap.ui.core.mvc.View\")) {\n\t\t\tcontrol = control.getParent() as Control | undefined;\n\t\t\tif (control) {\n\t\t\t\towner = Component.getOwnerComponentFor(control);\n\t\t\t}\n\t\t}\n\t\tif (owner?.isA<TemplateComponent>(\"sap.fe.core.TemplateComponent\")) {\n\t\t\treturn owner;\n\t\t}\n\t\tif (owner?.isA<TemplateComponent>(\"sap.fe.core.buildingBlocks.IBuildingBlockOwnerComponent\")) {\n\t\t\treturn owner;\n\t\t}\n\t}\n\n\t/*\n\t * Get the page controller instance\n\t * @param logError Whether to log an error if the page controller is not found\n\t * @returns The page controller instance\n\t */\n\tgetPageController(logError = true): PageController {\n\t\tconst pageController = this._getOwner()?.getRootController?.();\n\t\tif (!pageController && logError) {\n\t\t\tLog.error(\"No sap.fe.core.PageController found\");\n\t\t}\n\t\treturn pageController!;\n\t}\n\n\tgetMetaModel(): ODataMetaModel | undefined {\n\t\tconst owner = this._getOwner();\n\t\tif (owner?.isA<TemplateComponent>(\"sap.fe.core.buildingBlocks.IBuildingBlockOwnerComponent\")) {\n\t\t\tlet metaModel = owner?.getMetaModel(this.metaModel);\n\t\t\t// Fallback in case they don't apply the logic for the metamodel converter\n\t\t\tif (!metaModel && this.metaModel?.startsWith(\"id-\")) {\n\t\t\t\tmetaModel = getMetaModelById(this.metaModel);\n\t\t\t}\n\t\t\treturn metaModel;\n\t\t} else {\n\t\t\treturn owner?.getMetaModel(this.metaModel);\n\t\t}\n\t}\n\n\toverride destroy(suppressInvalidate?: boolean): void {\n\t\tif (this.isA<IViewStateContributor<unknown> & ManagedObject>(\"sap.fe.core.controllerextensions.viewState.IViewStateContributor\")) {\n\t\t\tthis.getPageController(false)?.viewState?.deregisterStateContributor(this);\n\t\t}\n\t\tif (this.getPageController(false)) {\n\t\t\tremoveControllerExtensionHookHandlers(this, this.getPageController()!);\n\t\t}\n\t\tthis.notifyBBObservers(true);\n\t\tsuper.destroy(suppressInvalidate);\n\t}\n\n\t_checkIfMetadataReady(fromApplySettings = false): void {\n\t\tconst owner = this._getOwner();\n\t\tif (owner) {\n\t\t\ttry {\n\t\t\t\tthis.onMetadataAvailable(owner);\n\t\t\t} catch (err) {\n\t\t\t\tLog.error(\n\t\t\t\t\t`Error creating content for building block ${this.getMetadata().getName()} with ID: ${this.getId()}`,\n\t\t\t\t\terr as Error\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (\n\t\t\t\tthis.isA<IViewStateContributor<unknown> & ManagedObject>(\"sap.fe.core.controllerextensions.viewState.IViewStateContributor\")\n\t\t\t) {\n\t\t\t\tthis.getPageController()?.viewState.registerStateContributor(this);\n\t\t\t}\n\t\t\tif (this.getPageController()) {\n\t\t\t\tinitControllerExtensionHookHandlers(this, this.getPageController()!);\n\t\t\t}\n\t\t} else {\n\t\t\tif (!fromApplySettings && !this.content) {\n\t\t\t\t// In case couldn't create the content during the applySettings, try again\n\t\t\t\tLog.warning(\n\t\t\t\t\t\"The building block was not created within an ExtensionAPI.runWithFPMContext call, for performance reason it's recommended to do so.\",\n\t\t\t\t\tthis as unknown as string\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.attachEventOnce(\"modelContextChange\", function (this: BuildingBlock): void {\n\t\t\t\tthis._checkIfMetadataReady();\n\t\t\t});\n\t\t}\n\t}\n\n\tclone(sIdSuffix?: string, aLocalIds?: string[]): this {\n\t\tconst owner = this._getOwner();\n\t\tif (owner) {\n\t\t\treturn owner.runAsOwner(() => {\n\t\t\t\treturn super.clone(sIdSuffix, aLocalIds);\n\t\t\t});\n\t\t} else {\n\t\t\treturn super.clone(sIdSuffix, aLocalIds);\n\t\t}\n\t}\n\n\tonMetadataAvailable(_ownerComponent: TemplateComponent): void {\n\t\t// To be overriden by the child class\n\t}\n\n\tgetAppComponent(): AppComponent | undefined {\n\t\tconst owner = this._getOwner();\n\t\treturn owner?.getAppComponent();\n\t}\n\n\tgetDataModelObjectPath<N>(targetPath?: string): DataModelObjectPath<N> | undefined {\n\t\tconst metaModel = this.getMetaModel();\n\t\tconst targetPathToUse = targetPath ?? this.getOwnerContextPath();\n\t\treturn getInvolvedDataModelObjectsForTargetPath(targetPathToUse!, metaModel);\n\t}\n\n\t/**\n\t * Retrieves the context path from the owner component.\n\t * @returns The context path\n\t */\n\tgetOwnerContextPath(): string | undefined {\n\t\tconst owner = this._getOwner()!;\n\t\treturn owner.getFullContextPath(this.metaModel);\n\t}\n\n\t/**\n\t * Get the data model object for the given metapath and optional contextPath.\n\t * @param metapath\n\t * @param contextPath\n\t * @returns The data model object path\n\t */\n\tgetDataModelObjectForMetaPath<ExpectedDataModelType>(\n\t\tmetapath: string,\n\t\tcontextPath?: string\n\t): DataModelObjectPath<ExpectedDataModelType> | undefined {\n\t\tconst metaModel = this.getMetaModel();\n\t\tconst contextPathToUse = this.getComputedContextPath(contextPath);\n\n\t\tlet resolvedContextPath;\n\t\tif (contextPathToUse) {\n\t\t\tresolvedContextPath = contextPathToUse.endsWith(\"/\") ? contextPathToUse : contextPathToUse + \"/\";\n\t\t}\n\t\tif (!metaModel || !(resolvedContextPath || metapath.charAt(0) === \"/\")) {\n\t\t\tthrow new Error(\"No metamodel or metapath is not reachable with contextPath\");\n\t\t}\n\t\tlet metaContext = resolvedContextPath ? metaModel.createBindingContext(resolvedContextPath) : undefined;\n\t\tmetaContext = metaContext ? metaContext : undefined;\n\t\tconst metaPathContext = metaModel.createBindingContext(metapath, metaContext);\n\t\treturn metaPathContext\n\t\t\t? MetaModelConverter.getInvolvedDataModelObjects<ExpectedDataModelType>(metaPathContext, metaContext)\n\t\t\t: undefined;\n\t}\n\n\tgetComputedContextPath(contextPath?: string): string {\n\t\tlet contextPathToUse = contextPath ?? this.getOwnerContextPath()!;\n\t\tif (contextPathToUse && !contextPathToUse.startsWith(\"/\")) {\n\t\t\tcontextPathToUse = this.getOwnerContextPath() + contextPathToUse;\n\t\t}\n\t\treturn contextPathToUse;\n\t}\n\n\t/**\n\t * Retrieves the MetaPath object for the given metaPath and optional contextPath.\n\t * @param metaPath\n\t * @param contextPath\n\t * @returns A MetaPath pointing to the target {metaPath, contextPath}\n\t */\n\tgetMetaPathObject<ExpectedDataModelType>(metaPath: string, contextPath?: string): MetaPath<ExpectedDataModelType> | null {\n\t\tconst metaModel = this.getMetaModel();\n\t\tconst contextPathToUse = this.getComputedContextPath(contextPath);\n\t\tif (!metaModel || !(contextPathToUse || metaPath.charAt(0) === \"/\")) {\n\t\t\tLog.warning(`No metamodel or metaPath is not reachable with ${contextPath}:${metaPath}`);\n\t\t\treturn null;\n\t\t}\n\t\ttry {\n\t\t\treturn new MetaPath(convertTypes(metaModel), metaPath, contextPathToUse);\n\t\t} catch (e) {\n\t\t\tif (!contextPathToUse.endsWith(\"/\")) {\n\t\t\t\treturn this.getMetaPathObject<ExpectedDataModelType>(metaPath, contextPathToUse + \"/\");\n\t\t\t}\n\t\t\tLog.warning(`No metamodel or metaPath is not reachable with ${contextPath}:${metaPath}`);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tprotected createId(...stringParts: (string | undefined | DataModelObjectPath<AuthorizedIdAnnotationsType>)[]): string | undefined {\n\t\t// If the child instance has an ID property use it otherwise return undefined\n\t\tif (this.getId()) {\n\t\t\treturn generate([this.getId(), ...stringParts]);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tgetTranslatedText(textID: string, parameters?: unknown[], metaPath?: string): string {\n\t\treturn (\n\t\t\t((this.getModel(\"sap.fe.i18n\") ?? this._getOwner()?.getModel(\"sap.fe.i18n\")) as ResourceModel)?.getText(\n\t\t\t\ttextID,\n\t\t\t\tparameters,\n\t\t\t\tmetaPath\n\t\t\t) || textID\n\t\t);\n\t}\n\n\tgetManifestWrapper(): ManifestWrapper | undefined {\n\t\treturn this._getOwner()?.getManifestWrapper();\n\t}\n\n\tgetOwnerPageDefinition(): DefinitionPage | undefined {\n\t\treturn this._getOwner()?.preprocessorContext?.getDefinitionForPage();\n\t}\n}\n\ninterface BuildingBlock<T extends UI5Element> {\n\tgetContent(): T | undefined;\n\tgetAriaLabelledBy(): string[];\n}\n\nexport default BuildingBlock;\n"],"mappings":"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","ignoreList":[]}