{"version":3,"names":["FieldEditMode","Disabled","Display","Editable","EditableDisplay","EditableReadOnly","ReadOnly","_exports","getDisplayMode","oDataModelObjectPath","DisplayModeFormatter","targetObject","getEditableExpressionAsObject","oPropertyPath","oDataFieldConverted","isEditable","arguments","length","undefined","UI","IsEditable","considerUpdateRestrictions","getEditableExpression","bAsObject","relativePath","getRelativePaths","compileExpression","dataFieldEditableExpression","constant","isProperty","ifElse","isNonEditableExpression","oProperty","isPathAnnotationExpression","$target","isPathUpdatableExpression","isPathUpdatable","propertyPath","pathVisitor","path","navigationPaths","singletonPathVisitor","convertedTypes","editableExpression","or","and","not","isComputed","isKey","isImmutable","IsTransientBinding","unresolvableExpression","getCollaborationExpression","dataModelObjectPath","formatter","objectPath","getTargetObjectPath","activityExpression","pathInModel","keys","contextLocation","targetEntityType","keysExpressions","forEach","key","keyExpression","name","push","formatResult","getEnabledExpressionAsObject","getEnabledExpression","dataFieldEnabledExpression","isDisabledExpression","enabledExpression","getEditMode","measureReadOnly","asObject","dataFieldConverted","$Type","property","associatedCurrencyProperty","getAssociatedCurrencyProperty","unitProperty","getAssociatedUnitProperty","resultExpression","isUnitReadOnly","isReadOnlyExpression","isConstant","annotations","Measures","ISOCurrency","Unit","readOnlyExpression","editModeExpression","hasValidAnalyticalCurrencyOrUnit","oPropertyDataModelObjectPath","oPropertyDefinition","getExpressionForMeasureUnit","currency","measure","isTruthy","getExpressionFromAnnotation","IsTotal","getFieldDisplay","sTargetDisplayMode","oComputedEditMode","hasTextAnnotation","Common","Text","hasValueHelp","equal","getTypeConfig","dataType","oTargetMapping","EDM_TYPE_MAPPING","type","propertyTypeConfig","constraints","formatOptions","scale","$Scale","precision","$Precision","maxLength","$MaxLength","nullable","$Nullable","minimum","isNaN","Validation","Minimum","maximum","Maximum","isDigitSequence","IsDigitSequence","V4","$V4","parseAsString","indexOf","emptyString","parseKeepsEmptyString","getConstraintOptions","DoNotCheckScaleOfMeasuredQuantity","valueOf","skipDecimalsValidation","getBindingWithUnitOrCurrency","oPropertyDataModelPath","propertyBindingExpression","ignoreUnitConstraint","forDisplayMode","showOnlyUnitDecimals","preserveDecimalsForCurrency","unit","relativeLocation","formatWithTypeInformation","complexType","unitBindingExpression","constraintOptions","addTypeInformation","getBindingForDatePicker","minDate","$Date","maxDate","minExpression","maxExpression","getBindingForUnitOrCurrency","hasStaticPercentUnit","getContextRelativeTargetObjectPath","showNumber","getBindingWithTimezone","hideTimezoneForEmptyValues","fieldFormatOptions","timezone","Timezone","style","DateTimeStyle","showTimezoneForEmptyValues","dateTimeStyle","dateTimePattern","pattern","showTime","showDate","showTimezone","getBindingForDateFormat","propertyDataModelPath","formatOptionsDateFormat","toString","getBindingForTimezone","propertyDefinition","getAlignmentExpression","sAlignDisplay","sAlignEdit","getConverterContext","oContext","oInterface","context","convertMetaModelContext","requiresIContext","getDataModelObjectPath","getInvolvedDataModelObjects","isMultiValueField","oDataModelPath","navigationProperties","hasOneToManyNavigation","findIndex","oNav","isMultipleNavigationProperty","oContextNav","getRequiredExpressionAsObject","forceEditMode","getRequiredExpression","oRequiredProperties","aRequiredPropertiesFromInsertRestrictions","requiredPropertiesFromInsertRestrictions","aRequiredPropertiesFromUpdateRestrictions","requiredPropertiesFromUpdateRestrictions","dataFieldRequiredExpression","isRequiredExpression","requiredPropertyFromInsertRestrictionsExpression","requiredPropertyFromUpdateRestrictionsExpression","requiredExpression","editMode","includes","IsCreateMode","returnExpression","getRequiredExpressionForFieldGroup","dataFieldObjectPath","getRequiredExpressionForConnectedDataField","data","Data","Target","Object","dataFields","isRequiredExpressions","dataField","Value","isAnnotationOfType","isVisible","Hidden","isMultiLine","isMultiLineText","getActionEnabledExpression","actionTarget","pathFromContextLocation","operationAvailableIsAnnotated","Core","OperationAvailable","term","prefix","sourceEntityType","navigations","sourceActionDataModelObject","enhanceDataModelPath","nav","join","bindingParameterFullName","isBound","parameters","fullyQualifiedName","operationAvailableExpression","bindingContextPathVisitor","isQuickViewFacetVisible","facetModelPath","targetVisible","getVisibleExpressionForBreadcrumbs","viewData","breadcrumbsHierarchyMode","fclEnabled"],"sourceRoot":".","sources":["UIFormatters.ts"],"sourcesContent":["import type { Action, ActionParameter, ConvertedMetadata, PathAnnotationExpression, Property } from \"@sap-ux/vocabularies-types\";\nimport type { AnnotationPath, AnnotationTerm } from \"@sap-ux/vocabularies-types/Edm\";\nimport { CoreAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/Core\";\nimport type { Unit } from \"@sap-ux/vocabularies-types/vocabularies/Measures\";\nimport type {\n\tCollectionFacet,\n\tConnectedFieldsType,\n\tConnectedFieldsTypeTypes,\n\tDataField,\n\tDataFieldAbstractTypes,\n\tDataFieldForActionTypes,\n\tDataFieldForAnnotation,\n\tDataFieldTypes,\n\tDataPointType,\n\tDataPointTypeTypes,\n\tFieldGroup,\n\tFieldGroupType,\n\tReferenceFacet\n} from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { UIAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport type {\n\tBindingToolkitExpression,\n\tCompiledBindingToolkitExpression,\n\tComplexTypeConstraintOptions,\n\tFn\n} from \"sap/fe/base/BindingToolkit\";\nimport {\n\tEDM_TYPE_MAPPING,\n\taddTypeInformation,\n\tand,\n\tcompileExpression,\n\tconstant,\n\tequal,\n\tformatResult,\n\tformatWithTypeInformation,\n\tgetExpressionFromAnnotation,\n\tifElse,\n\tisConstant,\n\tisTruthy,\n\tnot,\n\tor,\n\tpathInModel,\n\tunresolvableExpression\n} from \"sap/fe/base/BindingToolkit\";\nimport { convertMetaModelContext, getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { PageContextPathTarget } from \"sap/fe/core/converters/TemplateConverter\";\nimport { UI, bindingContextPathVisitor, singletonPathVisitor } from \"sap/fe/core/helpers/BindingHelper\";\nimport { isAnnotationOfType, isMultipleNavigationProperty, isPathAnnotationExpression, isProperty } from \"sap/fe/core/helpers/TypeGuards\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport {\n\tenhanceDataModelPath,\n\tgetContextRelativeTargetObjectPath,\n\tgetRelativePaths,\n\tgetTargetObjectPath,\n\tisPathUpdatable\n} from \"sap/fe/core/templating/DataModelPathHelper\";\nimport * as DisplayModeFormatter from \"sap/fe/core/templating/DisplayModeFormatter\";\nimport {\n\tisDisabledExpression,\n\tisNonEditableExpression,\n\tisReadOnlyExpression,\n\tisRequiredExpression\n} from \"sap/fe/core/templating/FieldControlHelper\";\nimport {\n\tgetAssociatedCurrencyProperty,\n\tgetAssociatedUnitProperty,\n\thasStaticPercentUnit,\n\thasValueHelp,\n\tisComputed,\n\tisImmutable,\n\tisKey,\n\tisMultiLineText\n} from \"sap/fe/core/templating/PropertyHelper\";\nimport type FieldFormatOptions from \"sap/fe/macros/field/FieldFormatOptions\";\nimport type { DataPointFormatOptions } from \"sap/fe/macros/internal/helpers/DataPointTemplating\";\nimport type Context from \"sap/ui/model/Context\";\nimport type { ViewData } from \"../services/TemplatedViewServiceFactory\";\n\n// Import-export method used by the converter to use them in the templating through the UIFormatters.\nexport type DisplayMode = DisplayModeFormatter.DisplayMode;\n\nexport type FieldEditStyle = \"RadioButtons\";\n\nexport type PropertyOrPath<P> = string | P | PathAnnotationExpression<P>;\nexport type MetaModelContext = {\n\t$kind: string;\n\t$Type: string;\n\t$Nullable?: boolean;\n};\n\n/**\n * Interface representing the structure returned by the ODataMetaModel when using the @@ operator in XML templates.\n */\nexport type ComputedAnnotationInterface = {\n\tcontext: Context;\n\targuments?: unknown[];\n\t$$valueAsPromise?: boolean;\n};\n\nexport type configTypeConstraints = {\n\tscale?: number;\n\tprecision?: number;\n\tmaxLength?: number;\n\tnullable?: boolean;\n\tminimum?: string;\n\tmaximum?: string;\n\tisDigitSequence?: boolean;\n\tV4?: boolean;\n};\n\nexport type configTypeformatOptions = {\n\tparseAsString?: boolean;\n\temptyString?: string;\n\tparseKeepsEmptyString?: boolean;\n};\n\nexport type ConfigType = {\n\ttype: string;\n\tconstraints: configTypeConstraints;\n\tformatOptions: configTypeformatOptions;\n};\n\nexport type DateTimeStyle = \"short\" | \"medium\" | \"long\" | \"full\";\n\nexport type FormatOptionsDateFormat = FieldFormatOptions | DataPointFormatOptions;\n\nexport const FieldEditMode = {\n\t/**\n\t * {@link sap.ui.mdc.Field Field}, {@link sap.ui.mdc.FilterField FilterField} or {@link sap.ui.mdc.MultiValueField MultiValueField }\n\t * is rendered in disabled mode\n\t */\n\tDisabled: \"Disabled\",\n\t/**\n\t * {@link sap.ui.mdc.Field Field}, {@link sap.ui.mdc.FilterField FilterField} or {@link sap.ui.mdc.MultiValueField MultiValueField }\n\t * is rendered in display mode\n\t */\n\tDisplay: \"Display\",\n\t/**\n\t * {@link sap.ui.mdc.Field Field}, {@link sap.ui.mdc.FilterField FilterField} or {@link sap.ui.mdc.MultiValueField MultiValueField }\n\t * is rendered in editable mode\n\t */\n\tEditable: \"Editable\",\n\t/**\n\t * If more than one control is rendered by the {@link sap.ui.mdc.Field Field}, {@link sap.ui.mdc.FilterField FilterField }\n\t * or {@link sap.ui.mdc.MultiValueField MultiValueField} control, the first part is editable, and the other\n\t * parts are in display mode.\n\t */\n\tEditableDisplay: \"EditableDisplay\",\n\t/**\n\t * If more than one control is rendered by the {@link sap.ui.mdc.Field Field}, {@link sap.ui.mdc.FilterField FilterField }\n\t * or {@link sap.ui.mdc.MultiValueField MultiValueField} control, the first part is editable, and the other\n\t * parts are read-only.\n\t */\n\tEditableReadOnly: \"EditableReadOnly\",\n\t/**\n\t * {@link sap.ui.mdc.Field Field}, {@link sap.ui.mdc.FilterField FilterField} or {@link sap.ui.mdc.MultiValueField MultiValueField }\n\t * is rendered in read-only mode\n\t */\n\tReadOnly: \"ReadOnly\"\n};\n\nexport const getDisplayMode = function (\n\toDataModelObjectPath: DataModelObjectPath<Property | DataFieldAbstractTypes | DataPointTypeTypes>\n): DisplayMode {\n\treturn DisplayModeFormatter.getDisplayMode(oDataModelObjectPath.targetObject, oDataModelObjectPath);\n};\nexport const getEditableExpressionAsObject = function (\n\toPropertyPath: PropertyOrPath<Property>,\n\toDataFieldConverted: Property | DataFieldAbstractTypes | DataPointTypeTypes | undefined,\n\toDataModelObjectPath: DataModelObjectPath<unknown>,\n\tisEditable: BindingToolkitExpression<boolean> = UI.IsEditable,\n\tconsiderUpdateRestrictions = true\n): BindingToolkitExpression<boolean> {\n\treturn getEditableExpression(\n\t\toPropertyPath,\n\t\toDataFieldConverted,\n\t\toDataModelObjectPath,\n\t\ttrue,\n\t\tisEditable,\n\t\tconsiderUpdateRestrictions\n\t) as BindingToolkitExpression<boolean>;\n};\n\n/**\n * Create the expression to generate an \"editable\" Boolean value.\n * @param oPropertyPath The input property\n * @param oDataFieldConverted The DataFieldConverted object to read the fieldControl annotation\n * @param oDataModelObjectPath The path to this property object\n * @param bAsObject Whether or not this should be returned as an object or a binding string\n * @param isEditable Whether or not UI.IsEditable be considered.\n * @param considerUpdateRestrictions Whether we want to take into account UpdateRestrictions to compute the editable\n * @returns The binding expression used to determine if a property is editable or not\n */\nexport const getEditableExpression = function (\n\toPropertyPath: PropertyOrPath<Property>,\n\toDataFieldConverted: Property | DataFieldAbstractTypes | DataPointTypeTypes | undefined = undefined,\n\toDataModelObjectPath: DataModelObjectPath<unknown>,\n\tbAsObject = false,\n\tisEditable: BindingToolkitExpression<boolean> = UI.IsEditable,\n\tconsiderUpdateRestrictions = true\n): CompiledBindingToolkitExpression | BindingToolkitExpression<boolean> {\n\tconst relativePath = getRelativePaths(oDataModelObjectPath);\n\tif (!oPropertyPath || typeof oPropertyPath === \"string\") {\n\t\treturn compileExpression(false);\n\t}\n\tlet dataFieldEditableExpression: BindingToolkitExpression<boolean> = constant(true);\n\tif (oDataFieldConverted !== undefined && !isProperty(oDataFieldConverted)) {\n\t\tdataFieldEditableExpression = ifElse(isNonEditableExpression(oDataFieldConverted), false, isEditable);\n\t} else if (oDataFieldConverted !== undefined) {\n\t\tdataFieldEditableExpression = isEditable;\n\t}\n\n\tconst oProperty = isPathAnnotationExpression(oPropertyPath) ? oPropertyPath.$target : oPropertyPath;\n\n\t// Editability depends on the field control expression\n\t// If the Field control is statically in ReadOnly or Inapplicable (disabled) -> not editable\n\t// If the property is a key -> not editable except in creation if not computed\n\t// If the property is computed -> not editable\n\t// If the property is not updatable -> not editable\n\t// If the property is immutable -> not editable except in creation\n\t// If the Field control is a path resolving to ReadOnly or Inapplicable (disabled) (<= 1) -> not editable\n\t// Else, to be editable you need\n\t// immutable and key while in the creation row\n\t// ui/isEditable\n\tconst isPathUpdatableExpression = isPathUpdatable(oDataModelObjectPath, {\n\t\tpropertyPath: oPropertyPath,\n\t\tpathVisitor: (path: string, navigationPaths: string[]) =>\n\t\t\tsingletonPathVisitor(path, oDataModelObjectPath.convertedTypes, navigationPaths)\n\t});\n\tif (compileExpression(isPathUpdatableExpression) === \"false\" && considerUpdateRestrictions) {\n\t\treturn bAsObject ? isPathUpdatableExpression : \"false\";\n\t}\n\tconst editableExpression =\n\t\toProperty !== undefined\n\t\t\t? ifElse(\n\t\t\t\t\tor(\n\t\t\t\t\t\tand(not(isPathUpdatableExpression), considerUpdateRestrictions),\n\t\t\t\t\t\tisComputed(oProperty),\n\t\t\t\t\t\tisKey(oProperty),\n\t\t\t\t\t\tisImmutable(oProperty),\n\t\t\t\t\t\tisNonEditableExpression(oProperty, relativePath)\n\t\t\t\t\t),\n\t\t\t\t\tifElse(or(isComputed(oProperty), isNonEditableExpression(oProperty, relativePath)), false, UI.IsTransientBinding),\n\t\t\t\t\tisEditable\n\t\t\t  )\n\t\t\t: unresolvableExpression;\n\tif (bAsObject) {\n\t\treturn and(editableExpression, dataFieldEditableExpression);\n\t}\n\treturn compileExpression(and(editableExpression, dataFieldEditableExpression));\n};\n\nexport const getCollaborationExpression = function <T>(\n\tdataModelObjectPath: DataModelObjectPath<Property>,\n\tformatter: Fn<T>\n): BindingToolkitExpression<T> {\n\tconst objectPath = getTargetObjectPath(dataModelObjectPath);\n\tconst activityExpression = pathInModel(`/collaboration/activities${objectPath}`, \"internal\");\n\tconst keys = dataModelObjectPath?.contextLocation?.targetEntityType?.keys;\n\tconst keysExpressions: BindingToolkitExpression<unknown>[] = [];\n\tkeys?.forEach(function (key) {\n\t\tconst keyExpression = pathInModel(key.name);\n\t\tkeysExpressions.push(keyExpression);\n\t});\n\treturn formatResult([activityExpression, ...keysExpressions], formatter);\n};\nexport const getEnabledExpressionAsObject = function (\n\toPropertyPath: PropertyOrPath<Property>,\n\toDataFieldConverted?: Property | DataFieldAbstractTypes | DataPointTypeTypes,\n\toDataModelObjectPath?: DataModelObjectPath<unknown>\n): BindingToolkitExpression<boolean> {\n\treturn getEnabledExpression(oPropertyPath, oDataFieldConverted, true, oDataModelObjectPath) as BindingToolkitExpression<boolean>;\n};\n/**\n * Create the expression to generate an \"enabled\" Boolean value.\n * @param oPropertyPath The input property\n * @param oDataFieldConverted The DataFieldConverted Object to read the fieldControl annotation\n * @param bAsObject Whether or not this should be returned as an object or a binding string\n * @param oDataModelObjectPath\n * @returns The binding expression to determine if a property is enabled or not\n */\nexport const getEnabledExpression = function (\n\toPropertyPath: PropertyOrPath<Property>,\n\toDataFieldConverted?: Property | DataFieldAbstractTypes | DataPointTypeTypes,\n\tbAsObject = false,\n\toDataModelObjectPath?: DataModelObjectPath<unknown>\n): CompiledBindingToolkitExpression | BindingToolkitExpression<boolean> {\n\tif (!oPropertyPath || typeof oPropertyPath === \"string\") {\n\t\treturn compileExpression(true);\n\t}\n\tlet relativePath;\n\tif (oDataModelObjectPath) {\n\t\trelativePath = getRelativePaths(oDataModelObjectPath);\n\t}\n\tlet dataFieldEnabledExpression: BindingToolkitExpression<boolean> = constant(true);\n\tif (oDataFieldConverted !== undefined && !isProperty(oDataFieldConverted)) {\n\t\tdataFieldEnabledExpression = ifElse(isDisabledExpression(oDataFieldConverted), false, true);\n\t}\n\n\tconst oProperty = isPathAnnotationExpression(oPropertyPath) ? oPropertyPath.$target : oPropertyPath;\n\t// Enablement depends on the field control expression\n\t// If the Field control is statically in Inapplicable (disabled) -> not enabled\n\tconst enabledExpression =\n\t\toProperty !== undefined ? ifElse(isDisabledExpression(oProperty, relativePath), false, true) : unresolvableExpression;\n\tif (bAsObject) {\n\t\treturn and(enabledExpression, dataFieldEnabledExpression);\n\t}\n\treturn compileExpression(and(enabledExpression, dataFieldEnabledExpression));\n};\n\n/**\n * Create the expression to generate an \"editMode\" enum value.\n * @param propertyPath The input property\n * @param dataModelObjectPath The list of data model objects that are involved to reach that property\n * @param measureReadOnly Whether we should set UoM / currency field mode to read only\n * @param asObject Whether we should return this as an expression or as a string\n * @param dataFieldConverted The dataField object\n * @param isEditable Whether or not UI.IsEditable be considered.\n * @returns The binding expression representing the current property edit mode, compliant with the MDC Field definition of editMode.\n */\nexport const getEditMode = function (\n\tpropertyPath: PropertyOrPath<Property>,\n\tdataModelObjectPath: DataModelObjectPath<unknown>,\n\tmeasureReadOnly = false,\n\tasObject = false,\n\tdataFieldConverted: Property | DataFieldAbstractTypes | DataPointTypeTypes | undefined = undefined,\n\tisEditable: BindingToolkitExpression<boolean> = UI.IsEditable\n): CompiledBindingToolkitExpression | BindingToolkitExpression<string> {\n\tif (\n\t\t!propertyPath ||\n\t\ttypeof propertyPath === \"string\" ||\n\t\t(!isProperty(dataFieldConverted) && dataFieldConverted?.$Type === UIAnnotationTypes.DataFieldWithNavigationPath)\n\t) {\n\t\treturn FieldEditMode.Display;\n\t}\n\tconst property = isPathAnnotationExpression(propertyPath) ? propertyPath.$target : propertyPath;\n\tif (!isProperty(property)) {\n\t\treturn FieldEditMode.Display;\n\t}\n\tconst relativePath = getRelativePaths(dataModelObjectPath);\n\tconst isPathUpdatableExpression = isPathUpdatable(dataModelObjectPath, {\n\t\tpropertyPath: property,\n\t\tpathVisitor: (path: string, navigationPaths: string[]) =>\n\t\t\tsingletonPathVisitor(path, dataModelObjectPath.convertedTypes, navigationPaths)\n\t});\n\n\t// we get the editable Expression without considering update Restrictions because they are handled separately\n\tconst editableExpression = getEditableExpressionAsObject(propertyPath, dataFieldConverted, dataModelObjectPath, isEditable, false);\n\n\tconst enabledExpression = getEnabledExpressionAsObject(propertyPath, dataFieldConverted, dataModelObjectPath);\n\tconst associatedCurrencyProperty = getAssociatedCurrencyProperty(property);\n\tconst unitProperty = associatedCurrencyProperty || getAssociatedUnitProperty(property);\n\tlet resultExpression: BindingToolkitExpression<string> = constant(FieldEditMode.Editable);\n\tif (unitProperty) {\n\t\tconst isUnitReadOnly = isReadOnlyExpression(unitProperty, relativePath);\n\t\tresultExpression = ifElse(\n\t\t\tor(isUnitReadOnly, isComputed(unitProperty), and(isImmutable(unitProperty), not(UI.IsTransientBinding)), measureReadOnly),\n\t\t\tifElse(!isConstant(isUnitReadOnly) && isUnitReadOnly, FieldEditMode.EditableReadOnly, FieldEditMode.EditableDisplay),\n\t\t\tFieldEditMode.Editable\n\t\t);\n\t}\n\tif (!unitProperty && (property?.annotations?.Measures?.ISOCurrency || property?.annotations?.Measures?.Unit)) {\n\t\t// no unit property associated means this is a static unit\n\t\tresultExpression = constant(FieldEditMode.EditableDisplay);\n\t}\n\tlet readOnlyExpression;\n\tif (dataFieldConverted != undefined && !isProperty(dataFieldConverted)) {\n\t\treadOnlyExpression = or(isReadOnlyExpression(property, relativePath), isReadOnlyExpression(dataFieldConverted));\n\t} else {\n\t\treadOnlyExpression = isReadOnlyExpression(property, relativePath);\n\t}\n\n\t// if there are update Restrictions it is always display mode\n\tconst editModeExpression = ifElse(\n\t\tor(isPathUpdatableExpression, UI.IsTransientBinding),\n\t\tifElse(\n\t\t\tenabledExpression,\n\t\t\tifElse(\n\t\t\t\teditableExpression,\n\t\t\t\tresultExpression,\n\t\t\t\tifElse(\n\t\t\t\t\tand(!isConstant(readOnlyExpression) && readOnlyExpression, isEditable),\n\t\t\t\t\tFieldEditMode.ReadOnly,\n\t\t\t\t\tFieldEditMode.Display\n\t\t\t\t)\n\t\t\t),\n\t\t\tifElse(isEditable, FieldEditMode.Disabled, FieldEditMode.Display)\n\t\t),\n\t\tFieldEditMode.Display\n\t);\n\tif (asObject) {\n\t\treturn editModeExpression;\n\t}\n\treturn compileExpression(editModeExpression);\n};\n\nexport const hasValidAnalyticalCurrencyOrUnit = function (\n\toPropertyDataModelObjectPath: DataModelObjectPath<Property> | undefined\n): CompiledBindingToolkitExpression {\n\tconst oPropertyDefinition = oPropertyDataModelObjectPath?.targetObject;\n\treturn oPropertyDefinition && getExpressionForMeasureUnit(oPropertyDefinition);\n};\n\nexport const getExpressionForMeasureUnit = function (oPropertyDefinition: Property): CompiledBindingToolkitExpression {\n\tconst currency = oPropertyDefinition?.annotations?.Measures?.ISOCurrency;\n\tconst measure = currency ? currency : oPropertyDefinition?.annotations?.Measures?.Unit;\n\tif (measure) {\n\t\treturn compileExpression(or(isTruthy(getExpressionFromAnnotation(measure)), not(UI.IsTotal)));\n\t} else {\n\t\treturn compileExpression(constant(true));\n\t}\n};\n\n/**\n * Create the binding expression for the fieldDisplay.\n * @param oPropertyPath\n * @param sTargetDisplayMode\n * @param oComputedEditMode\n * @returns The binding expression representing the current property display mode, compliant with the MDC Field definition of displayMode.\n */\nexport const getFieldDisplay = function (\n\toPropertyPath: PropertyOrPath<Property>,\n\tsTargetDisplayMode: string,\n\toComputedEditMode: BindingToolkitExpression<string>\n): CompiledBindingToolkitExpression {\n\tconst oProperty = (isPathAnnotationExpression(oPropertyPath) && oPropertyPath.$target) || (oPropertyPath as Property);\n\tconst hasTextAnnotation = oProperty.annotations?.Common?.Text !== undefined;\n\n\tif (hasValueHelp(oProperty)) {\n\t\treturn compileExpression(sTargetDisplayMode);\n\t} else {\n\t\treturn hasTextAnnotation ? compileExpression(ifElse(equal(oComputedEditMode, \"Editable\"), \"Value\", sTargetDisplayMode)) : \"Value\";\n\t}\n};\n\nexport const getTypeConfig = function (oProperty: Property | DataFieldAbstractTypes, dataType: string | undefined): ConfigType {\n\tconst oTargetMapping = EDM_TYPE_MAPPING[(oProperty as Property)?.type] || (dataType ? EDM_TYPE_MAPPING[dataType] : undefined);\n\tconst propertyTypeConfig: ConfigType = {\n\t\ttype: oTargetMapping.type,\n\t\tconstraints: {},\n\t\tformatOptions: {}\n\t};\n\tif (isProperty(oProperty)) {\n\t\tpropertyTypeConfig.constraints = {\n\t\t\tscale: oTargetMapping.constraints?.$Scale ? oProperty.scale : undefined,\n\t\t\tprecision: oTargetMapping.constraints?.$Precision ? oProperty.precision : undefined,\n\t\t\tmaxLength: oTargetMapping.constraints?.$MaxLength ? oProperty.maxLength : undefined,\n\t\t\tnullable: oTargetMapping.constraints?.$Nullable ? oProperty.nullable : undefined,\n\t\t\tminimum:\n\t\t\t\toTargetMapping.constraints?.[\"@Org.OData.Validation.V1.Minimum/$Decimal\"] &&\n\t\t\t\t!isNaN(oProperty.annotations?.Validation?.Minimum)\n\t\t\t\t\t? `${oProperty.annotations?.Validation?.Minimum}`\n\t\t\t\t\t: undefined,\n\t\t\tmaximum:\n\t\t\t\toTargetMapping.constraints?.[\"@Org.OData.Validation.V1.Maximum/$Decimal\"] &&\n\t\t\t\t!isNaN(oProperty.annotations?.Validation?.Maximum)\n\t\t\t\t\t? `${oProperty.annotations?.Validation?.Maximum}`\n\t\t\t\t\t: undefined,\n\t\t\tisDigitSequence:\n\t\t\t\tpropertyTypeConfig.type === \"sap.ui.model.odata.type.String\" &&\n\t\t\t\toTargetMapping.constraints?.[\"@com.sap.vocabularies.Common.v1.IsDigitSequence\"] &&\n\t\t\t\toProperty.annotations?.Common?.IsDigitSequence\n\t\t\t\t\t? true\n\t\t\t\t\t: undefined,\n\t\t\tV4: oTargetMapping.constraints?.$V4 ? true : undefined\n\t\t};\n\t}\n\tpropertyTypeConfig.formatOptions = {\n\t\tparseAsString:\n\t\t\tpropertyTypeConfig?.type?.indexOf(\"sap.ui.model.odata.type.Int\") === 0 ||\n\t\t\tpropertyTypeConfig?.type?.indexOf(\"sap.ui.model.odata.type.Double\") === 0\n\t\t\t\t? false\n\t\t\t\t: undefined,\n\t\temptyString:\n\t\t\tpropertyTypeConfig?.type?.indexOf(\"sap.ui.model.odata.type.Int\") === 0 ||\n\t\t\tpropertyTypeConfig?.type?.indexOf(\"sap.ui.model.odata.type.Double\") === 0\n\t\t\t\t? \"\"\n\t\t\t\t: undefined,\n\t\tparseKeepsEmptyString: propertyTypeConfig.type === \"sap.ui.model.odata.type.String\" ? true : undefined\n\t};\n\treturn propertyTypeConfig;\n};\n\nexport const getConstraintOptions = function (property: Property | undefined): ComplexTypeConstraintOptions {\n\treturn property?.annotations?.UI?.DoNotCheckScaleOfMeasuredQuantity &&\n\t\tproperty?.annotations?.UI.DoNotCheckScaleOfMeasuredQuantity?.valueOf()\n\t\t? { skipDecimalsValidation: true }\n\t\t: {};\n};\n\nexport const getBindingWithUnitOrCurrency = function (\n\toPropertyDataModelPath: DataModelObjectPath<Property>,\n\tpropertyBindingExpression: BindingToolkitExpression<string>,\n\tignoreUnitConstraint?: boolean,\n\tformatOptions?: {\n\t\tshowMeasure?: boolean;\n\t\tdecimalPadding?: number;\n\t\temptyString?: string | number;\n\t},\n\tforDisplayMode?: boolean,\n\tshowOnlyUnitDecimals?: boolean,\n\tpreserveDecimalsForCurrency?: boolean\n): BindingToolkitExpression<string> {\n\tconst oPropertyDefinition = oPropertyDataModelPath.targetObject as Property;\n\tlet unit = oPropertyDefinition.annotations?.Measures?.Unit;\n\tconst relativeLocation = getRelativePaths(oPropertyDataModelPath);\n\tpropertyBindingExpression = formatWithTypeInformation(oPropertyDefinition, propertyBindingExpression);\n\tconst complexType = unit ? \"sap.ui.model.odata.type.Unit\" : \"sap.ui.model.odata.type.Currency\";\n\tunit = unit ? unit : (oPropertyDefinition.annotations?.Measures?.ISOCurrency as unknown as Unit | undefined);\n\tconst unitBindingExpression =\n\t\tisPathAnnotationExpression(unit) && unit.$target\n\t\t\t? formatWithTypeInformation(unit.$target, getExpressionFromAnnotation(unit, relativeLocation), ignoreUnitConstraint)\n\t\t\t: getExpressionFromAnnotation(unit, relativeLocation);\n\tlet constraintOptions: ComplexTypeConstraintOptions | undefined;\n\tif (complexType === \"sap.ui.model.odata.type.Unit\") {\n\t\tif (forDisplayMode && !showOnlyUnitDecimals) {\n\t\t\tconstraintOptions = { skipDecimalsValidation: true };\n\t\t} else if (!forDisplayMode) {\n\t\t\t// Consider annotation only in edit mode\n\t\t\tconstraintOptions = getConstraintOptions(oPropertyDataModelPath.targetObject);\n\t\t}\n\t}\n\tif (complexType === \"sap.ui.model.odata.type.Currency\") {\n\t\tif (preserveDecimalsForCurrency) {\n\t\t\tconstraintOptions = { skipDecimalsValidation: true };\n\t\t}\n\t}\n\tif (forDisplayMode) {\n\t\tformatOptions = { ...formatOptions, emptyString: \"\" };\n\t}\n\n\treturn addTypeInformation([propertyBindingExpression, unitBindingExpression], complexType, undefined, formatOptions, constraintOptions);\n};\n\n/**\n * Create the binding expression for the date picker with minimum and maximum value present.\n * @param oPropertyDataModelPath The list of data model objects that are involved to reach that property\n * @param propertyBindingExpression Binding expression for the property\n * @returns The binding expression representing the date property with minimum and maximum value for the same\n */\nexport const getBindingForDatePicker = function (\n\toPropertyDataModelPath: DataModelObjectPath<Property | DataFieldTypes>,\n\tpropertyBindingExpression: BindingToolkitExpression<string>\n): BindingToolkitExpression<string> | CompiledBindingToolkitExpression {\n\tconst oPropertyDefinition = oPropertyDataModelPath.targetObject as Property;\n\tconst relativeLocation = getRelativePaths(oPropertyDataModelPath);\n\tconst formatOptions = {};\n\tpropertyBindingExpression = formatWithTypeInformation(oPropertyDefinition, propertyBindingExpression);\n\tconst complexType = \"sap.fe.core.type.Date\";\n\tconst minDate = oPropertyDefinition?.annotations?.Validation?.Minimum?.$Date\n\t\t? oPropertyDefinition?.annotations?.Validation?.Minimum?.$Date\n\t\t: oPropertyDefinition?.annotations?.Validation?.Minimum;\n\tconst maxDate = oPropertyDefinition?.annotations?.Validation?.Maximum?.$Date\n\t\t? oPropertyDefinition?.annotations?.Validation?.Maximum?.$Date\n\t\t: oPropertyDefinition?.annotations?.Validation?.Maximum;\n\tconst minExpression =\n\t\tminDate && isPathAnnotationExpression(minDate)\n\t\t\t? formatWithTypeInformation(\n\t\t\t\t\toPropertyDefinition?.annotations?.Validation?.Minimum,\n\t\t\t\t\tgetExpressionFromAnnotation(oPropertyDefinition?.annotations?.Validation?.Minimum, relativeLocation)\n\t\t\t  )\n\t\t\t: minDate;\n\tconst maxExpression =\n\t\tmaxDate && isPathAnnotationExpression(maxDate)\n\t\t\t? formatWithTypeInformation(\n\t\t\t\t\toPropertyDefinition?.annotations?.Validation?.Maximum,\n\t\t\t\t\tgetExpressionFromAnnotation(oPropertyDefinition?.annotations?.Validation?.Maximum, relativeLocation)\n\t\t\t  )\n\t\t\t: maxDate;\n\n\treturn (\n\t\t(minExpression || maxExpression) &&\n\t\taddTypeInformation([propertyBindingExpression, minExpression, maxExpression], complexType, undefined, formatOptions)\n\t);\n};\n\nexport const getBindingForUnitOrCurrency = function (\n\toPropertyDataModelPath: DataModelObjectPath<Property> | undefined,\n\tforDisplayMode: boolean,\n\tshowOnlyUnitDecimals: boolean,\n\tpreserveDecimalsForCurrency: boolean\n): BindingToolkitExpression<string> | string {\n\tconst oPropertyDefinition = oPropertyDataModelPath?.targetObject;\n\tif (!oPropertyDefinition) {\n\t\treturn \"\";\n\t}\n\n\tlet unit = oPropertyDefinition.annotations?.Measures?.Unit;\n\tif (hasStaticPercentUnit(oPropertyDefinition)) {\n\t\treturn constant(\"%\");\n\t}\n\tconst relativeLocation = getRelativePaths(oPropertyDataModelPath);\n\n\tconst complexType = unit ? \"sap.ui.model.odata.type.Unit\" : \"sap.ui.model.odata.type.Currency\";\n\tunit = unit ? unit : (oPropertyDefinition.annotations?.Measures?.ISOCurrency as unknown as Unit | undefined);\n\tconst unitBindingExpression =\n\t\tisPathAnnotationExpression(unit) && unit.$target\n\t\t\t? formatWithTypeInformation(unit.$target, getExpressionFromAnnotation(unit, relativeLocation))\n\t\t\t: getExpressionFromAnnotation(unit, relativeLocation);\n\n\tlet propertyBindingExpression = pathInModel(\n\t\tgetContextRelativeTargetObjectPath(oPropertyDataModelPath)\n\t) as BindingToolkitExpression<string>;\n\tpropertyBindingExpression = formatWithTypeInformation(oPropertyDefinition, propertyBindingExpression, true);\n\tlet constraintOptions: ComplexTypeConstraintOptions | undefined;\n\tif (complexType === \"sap.ui.model.odata.type.Unit\") {\n\t\tif (forDisplayMode && !showOnlyUnitDecimals) {\n\t\t\tconstraintOptions = { skipDecimalsValidation: true };\n\t\t} else if (!forDisplayMode) {\n\t\t\tconstraintOptions = getConstraintOptions(oPropertyDefinition);\n\t\t}\n\t} else if (complexType === \"sap.ui.model.odata.type.Currency\") {\n\t\tif (preserveDecimalsForCurrency) {\n\t\t\tconstraintOptions = { skipDecimalsValidation: true };\n\t\t}\n\t}\n\treturn addTypeInformation(\n\t\t[propertyBindingExpression, unitBindingExpression],\n\t\tcomplexType,\n\t\tundefined,\n\t\t{\n\t\t\tparseKeepsEmptyString: true,\n\t\t\tshowNumber: false\n\t\t},\n\t\tconstraintOptions\n\t);\n};\nexport const getBindingWithTimezone = function (\n\toPropertyDataModelPath: DataModelObjectPath<Property>,\n\tpropertyBindingExpression: BindingToolkitExpression<string>,\n\tignoreUnitConstraint = false,\n\thideTimezoneForEmptyValues = false,\n\tfieldFormatOptions?: FieldFormatOptions\n): BindingToolkitExpression<string> {\n\tconst oPropertyDefinition = oPropertyDataModelPath.targetObject as Property;\n\tconst timezone = oPropertyDefinition.annotations?.Common?.Timezone;\n\tconst style = oPropertyDefinition.annotations?.UI?.DateTimeStyle;\n\tconst relativeLocation = getRelativePaths(oPropertyDataModelPath);\n\tpropertyBindingExpression = formatWithTypeInformation(oPropertyDefinition, propertyBindingExpression);\n\n\tconst complexType = \"sap.fe.core.type.DateTimeWithTimezone\";\n\tconst unitBindingExpression =\n\t\tisPathAnnotationExpression(timezone) && timezone.$target\n\t\t\t? formatWithTypeInformation(\n\t\t\t\t\t(timezone as PathAnnotationExpression<unknown>).$target as Property,\n\t\t\t\t\tgetExpressionFromAnnotation(timezone, relativeLocation),\n\t\t\t\t\tignoreUnitConstraint\n\t\t\t  )\n\t\t\t: getExpressionFromAnnotation(timezone, relativeLocation);\n\tlet formatOptions = {};\n\tif (hideTimezoneForEmptyValues) {\n\t\tformatOptions = {\n\t\t\tshowTimezoneForEmptyValues: false\n\t\t};\n\t}\n\t// if style or pattern is also set\n\tif (style) {\n\t\tformatOptions = { ...formatOptions, ...{ style: style } };\n\t} else if (fieldFormatOptions?.dateTimeStyle !== undefined) {\n\t\tformatOptions = { ...formatOptions, ...{ style: fieldFormatOptions.dateTimeStyle } };\n\t}\n\n\tif (fieldFormatOptions?.dateTimePattern !== undefined) {\n\t\tformatOptions = { ...formatOptions, ...{ pattern: fieldFormatOptions.dateTimePattern } };\n\t}\n\n\tif (fieldFormatOptions?.showTime !== undefined) {\n\t\tformatOptions = { ...formatOptions, ...{ showTime: fieldFormatOptions.showTime } };\n\t}\n\tif (fieldFormatOptions?.showDate !== undefined) {\n\t\tformatOptions = { ...formatOptions, ...{ showDate: fieldFormatOptions.showDate } };\n\t}\n\tif (fieldFormatOptions?.showTimezone !== undefined) {\n\t\tformatOptions = { ...formatOptions, ...{ showTimezone: fieldFormatOptions.showTimezone } };\n\t}\n\n\treturn addTypeInformation([propertyBindingExpression, unitBindingExpression], complexType, undefined, formatOptions);\n};\n\n/**\n * Creates the binding expression for the date format of a date, time or dateTime.\n * @param propertyDataModelPath The list of data model objects that are involved to reach that property\n * @param propertyBindingExpression Binding expression for the property\n * @param formatOptionsDateFormat Format options which contain the style or pattern property\n * @returns The binding expression representing a date, time, or date-time, with the given pattern or style property\n */\nexport const getBindingForDateFormat = function (\n\tpropertyDataModelPath: DataModelObjectPath<Property>,\n\tpropertyBindingExpression: BindingToolkitExpression<string>,\n\tformatOptionsDateFormat?: FormatOptionsDateFormat\n): BindingToolkitExpression<string> {\n\tconst oPropertyDefinition = propertyDataModelPath.targetObject as Property;\n\tconst pattern = formatOptionsDateFormat?.dateTimePattern;\n\tconst style = oPropertyDefinition.annotations?.UI?.DateTimeStyle ?? formatOptionsDateFormat?.dateTimeStyle;\n\tpropertyBindingExpression = formatWithTypeInformation(oPropertyDefinition, propertyBindingExpression);\n\tpropertyBindingExpression.type = EDM_TYPE_MAPPING[oPropertyDefinition.type].type;\n\tpropertyBindingExpression.formatOptions = {\n\t\t...(style && { style: style.toString() }),\n\t\t...(pattern && { pattern: pattern })\n\t};\n\n\treturn propertyBindingExpression;\n};\n\nexport const getBindingForTimezone = function (\n\tpropertyDataModelPath: DataModelObjectPath<Property>,\n\tpropertyBindingExpression: BindingToolkitExpression<string>\n): BindingToolkitExpression<string> {\n\tconst propertyDefinition = propertyDataModelPath.targetObject as Property;\n\tpropertyBindingExpression = formatWithTypeInformation(propertyDefinition, propertyBindingExpression);\n\tconst complexType = \"sap.ui.model.odata.type.DateTimeWithTimezone\";\n\tconst formatOptions = { showTime: false, showDate: false, showTimezone: true, parseKeepsEmptyString: true };\n\n\t// null is required by formatter when there is just a timezone\n\treturn addTypeInformation([null, propertyBindingExpression], complexType, undefined, formatOptions);\n};\n\nexport const getAlignmentExpression = function (\n\toComputedEditMode: BindingToolkitExpression<string>,\n\tsAlignDisplay = \"Begin\",\n\tsAlignEdit = \"Begin\"\n): CompiledBindingToolkitExpression {\n\treturn compileExpression(ifElse(equal(oComputedEditMode, \"Display\"), sAlignDisplay, sAlignEdit));\n};\n\n/**\n * Formatter helper to retrieve the converterContext from the metamodel context.\n * @param oContext The original metamodel context\n * @param oInterface The current templating context\n * @returns The ConverterContext representing that object\n */\nexport const getConverterContext = function (oContext: MetaModelContext, oInterface: ComputedAnnotationInterface): object | null {\n\tif (oInterface && oInterface.context) {\n\t\treturn convertMetaModelContext(oInterface.context) as object;\n\t}\n\treturn null;\n};\ngetConverterContext.requiresIContext = true;\n\n/**\n * Formatter helper to retrieve the data model objects that are involved from the metamodel context.\n * @param oContext The original ODataMetaModel context\n * @param oInterface The current templating context\n * @returns An array of entitysets and navproperties that are involved to get to a specific object in the metamodel\n */\nexport const getDataModelObjectPath = function <T>(\n\toContext: MetaModelContext,\n\toInterface: ComputedAnnotationInterface\n): DataModelObjectPath<T> | null {\n\tif (oInterface && oInterface.context) {\n\t\treturn getInvolvedDataModelObjects(oInterface.context);\n\t}\n\treturn null;\n};\ngetDataModelObjectPath.requiresIContext = true;\n\n/**\n * Checks if the referenced property is part of a 1..n navigation.\n * @param oDataModelPath The data model path to check\n * @returns True if the property is part of a 1..n navigation\n */\nexport const isMultiValueField = function (oDataModelPath: DataModelObjectPath<unknown>): boolean {\n\tif (oDataModelPath.navigationProperties?.length) {\n\t\tconst hasOneToManyNavigation =\n\t\t\toDataModelPath?.navigationProperties.findIndex((oNav) => {\n\t\t\t\tif (isMultipleNavigationProperty(oNav)) {\n\t\t\t\t\tif (oDataModelPath.contextLocation?.navigationProperties?.length) {\n\t\t\t\t\t\t//we check the one to many nav is not already part of the context\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\toDataModelPath.contextLocation?.navigationProperties.findIndex(\n\t\t\t\t\t\t\t\t(oContextNav) => oContextNav.name === oNav.name\n\t\t\t\t\t\t\t) === -1\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}) > -1;\n\t\tif (hasOneToManyNavigation) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\nexport const getRequiredExpressionAsObject = function (\n\toPropertyPath: PropertyOrPath<Property>,\n\toDataFieldConverted?: Property | DataFieldAbstractTypes | DataPointTypeTypes,\n\tforceEditMode = false\n): BindingToolkitExpression<boolean> {\n\treturn getRequiredExpression(oPropertyPath, oDataFieldConverted, forceEditMode, true) as BindingToolkitExpression<boolean>;\n};\nexport const getRequiredExpression = function (\n\toPropertyPath: PropertyOrPath<Property>,\n\toDataFieldConverted?: Property | DataFieldAbstractTypes | DataPointTypeTypes,\n\tforceEditMode = false,\n\tbAsObject = false,\n\toRequiredProperties: {\n\t\trequiredPropertiesFromInsertRestrictions?: unknown[];\n\t\trequiredPropertiesFromUpdateRestrictions?: unknown[];\n\t} = {},\n\tdataModelObjectPath?: DataModelObjectPath<unknown>\n): CompiledBindingToolkitExpression | BindingToolkitExpression<boolean> {\n\tconst aRequiredPropertiesFromInsertRestrictions = oRequiredProperties.requiredPropertiesFromInsertRestrictions;\n\tconst aRequiredPropertiesFromUpdateRestrictions = oRequiredProperties.requiredPropertiesFromUpdateRestrictions;\n\tif (!oPropertyPath || typeof oPropertyPath === \"string\") {\n\t\tif (bAsObject) {\n\t\t\treturn constant(false);\n\t\t}\n\t\treturn compileExpression(constant(false));\n\t}\n\tlet relativePath;\n\tif (dataModelObjectPath) {\n\t\trelativePath = getRelativePaths(dataModelObjectPath);\n\t}\n\tlet dataFieldRequiredExpression: BindingToolkitExpression<boolean> = constant(false);\n\tif (oDataFieldConverted !== undefined && !isProperty(oDataFieldConverted)) {\n\t\t// For the datafield expression we should not  consider the relative path\n\t\tdataFieldRequiredExpression = isRequiredExpression(oDataFieldConverted);\n\t}\n\tlet requiredPropertyFromInsertRestrictionsExpression: BindingToolkitExpression<boolean> = constant(false);\n\tlet requiredPropertyFromUpdateRestrictionsExpression: BindingToolkitExpression<boolean> = constant(false);\n\n\tconst oProperty: Property = (isPathAnnotationExpression(oPropertyPath) && oPropertyPath.$target) || (oPropertyPath as Property);\n\t// Enablement depends on the field control expression\n\t// If the Field control is statically in Inapplicable (disabled) -> not enabled\n\tconst requiredExpression = isRequiredExpression(oProperty, relativePath);\n\tconst editMode = forceEditMode || UI.IsEditable;\n\tif (aRequiredPropertiesFromInsertRestrictions?.includes(oProperty.name)) {\n\t\trequiredPropertyFromInsertRestrictionsExpression = UI.IsCreateMode;\n\t}\n\tif (aRequiredPropertiesFromUpdateRestrictions?.includes(oProperty.name)) {\n\t\trequiredPropertyFromUpdateRestrictionsExpression = and(UI.IsEditable, not(UI.IsCreateMode));\n\t}\n\tconst returnExpression = or(\n\t\tand(or(requiredExpression, dataFieldRequiredExpression), editMode),\n\t\trequiredPropertyFromInsertRestrictionsExpression,\n\t\trequiredPropertyFromUpdateRestrictionsExpression\n\t);\n\tif (bAsObject) {\n\t\treturn returnExpression;\n\t}\n\treturn compileExpression(returnExpression);\n};\n\nexport const getRequiredExpressionForFieldGroup = function (\n\tdataFieldObjectPath: DataModelObjectPath<AnnotationPath<FieldGroupType>>\n): CompiledBindingToolkitExpression | BindingToolkitExpression<boolean> {\n\treturn compileExpression(and(UI.IsEditable, isRequiredExpression(dataFieldObjectPath.targetObject?.$target)));\n};\n\nexport const getRequiredExpressionForConnectedDataField = function (\n\tdataFieldObjectPath: DataModelObjectPath<AnnotationPath<ConnectedFieldsType>>\n): CompiledBindingToolkitExpression {\n\tconst targetObject = dataFieldObjectPath?.targetObject as DataFieldForAnnotation | undefined;\n\tconst data: Record<string, DataFieldAbstractTypes> = (dataFieldObjectPath?.targetObject?.$target?.Data ??\n\t\t(targetObject?.Target.$target as unknown as AnnotationTerm<ConnectedFieldsTypeTypes>)?.Data ??\n\t\t{}) as unknown as Record<string, DataFieldAbstractTypes>;\n\tconst keys: Array<string> = Object.keys(data);\n\tconst dataFields = [];\n\tlet propertyPath;\n\tconst isRequiredExpressions: (CompiledBindingToolkitExpression | BindingToolkitExpression<boolean>)[] | undefined = [];\n\tfor (const key of keys) {\n\t\tif (data[key]?.[\"$Type\"] && data[key][\"$Type\"]?.includes(\"DataField\")) {\n\t\t\tdataFields.push(data[key]);\n\t\t}\n\t}\n\tfor (const dataField of dataFields) {\n\t\tswitch (dataField.$Type) {\n\t\t\tcase UIAnnotationTypes.DataField:\n\t\t\tcase UIAnnotationTypes.DataFieldWithNavigationPath:\n\t\t\tcase UIAnnotationTypes.DataFieldWithUrl:\n\t\t\tcase UIAnnotationTypes.DataFieldWithIntentBasedNavigation:\n\t\t\tcase UIAnnotationTypes.DataFieldWithAction:\n\t\t\t\tif (typeof dataField.Value === \"object\") {\n\t\t\t\t\tpropertyPath = dataField.Value.$target;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase UIAnnotationTypes.DataFieldForAnnotation:\n\t\t\t\tif (dataField.Target?.$target) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tisAnnotationOfType<DataField | DataPointType>(dataField.Target.$target, [\n\t\t\t\t\t\t\tUIAnnotationTypes.DataField,\n\t\t\t\t\t\t\tUIAnnotationTypes.DataPointType\n\t\t\t\t\t\t])\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (typeof dataField.Target.$target.Value === \"object\") {\n\t\t\t\t\t\t\tpropertyPath = dataField.Target.$target.Value.$target;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (typeof dataField.Target === \"object\") {\n\t\t\t\t\t\t\tpropertyPath = dataField.Target.$target;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t\t// no default\n\t\t}\n\t\tisRequiredExpressions.push(getRequiredExpressionAsObject(propertyPath, dataField, false));\n\t}\n\treturn compileExpression(or(...(isRequiredExpressions as BindingToolkitExpression<boolean>[])));\n};\n\n/**\n * Check if header facet or action is visible.\n * @param targetObject Header facets or Actions\n * @param navigationProperties Navigation properties to be considered\n * @returns BindingToolkitExpression<boolean>\n */\nexport function isVisible(\n\ttargetObject:\n\t\t| DataFieldAbstractTypes\n\t\t| DataPointTypeTypes\n\t\t| ReferenceFacet\n\t\t| CollectionFacet\n\t\t| DataFieldForActionTypes\n\t\t| FieldGroup\n\t\t| Property\n\t\t| undefined,\n\tnavigationProperties?: string[]\n): BindingToolkitExpression<boolean> {\n\treturn not(equal(getExpressionFromAnnotation(targetObject?.annotations?.UI?.Hidden, navigationProperties), true));\n}\n\n/**\n * Checks whether action parameter is supports multi line input.\n * @param dataModelObjectPath Object path to the action parameter.\n * @returns Boolean\n */\nexport const isMultiLine = function (dataModelObjectPath: DataModelObjectPath<ActionParameter>): boolean {\n\treturn isMultiLineText(dataModelObjectPath.targetObject);\n};\n\n/**\n * Check if the action is enabled.\n * @param actionTarget Action\n * @param convertedTypes ConvertedMetadata\n * @param dataModelObjectPath DataModelObjectPath\n * @param pathFromContextLocation Boolean\n * @returns BindingToolkitExpression\n */\nexport function getActionEnabledExpression(\n\tactionTarget: Action,\n\tconvertedTypes: ConvertedMetadata,\n\tdataModelObjectPath?: DataModelObjectPath<PageContextPathTarget>,\n\tpathFromContextLocation?: boolean\n): BindingToolkitExpression<boolean> {\n\tconst operationAvailableIsAnnotated =\n\t\tactionTarget.annotations.Core?.OperationAvailable?.term === CoreAnnotationTerms.OperationAvailable;\n\n\tif (!operationAvailableIsAnnotated) {\n\t\t// OperationAvailable term doesn't exist for the action\n\t\treturn constant(true);\n\t}\n\n\tlet prefix = \"\";\n\tif (\n\t\tdataModelObjectPath &&\n\t\tpathFromContextLocation &&\n\t\tpathFromContextLocation === true &&\n\t\tdataModelObjectPath.contextLocation?.targetEntityType &&\n\t\tdataModelObjectPath.contextLocation.targetEntityType !== actionTarget.sourceEntityType\n\t) {\n\t\tconst navigations = getRelativePaths(dataModelObjectPath);\n\t\tlet sourceActionDataModelObject = enhanceDataModelPath(dataModelObjectPath.contextLocation);\n\t\t//Start from contextLocation and navigate until the source entityType of the action to get the right prefix\n\t\tfor (const nav of navigations) {\n\t\t\tsourceActionDataModelObject = enhanceDataModelPath(sourceActionDataModelObject, nav);\n\t\t\tif (sourceActionDataModelObject.targetEntityType === actionTarget.sourceEntityType) {\n\t\t\t\tprefix = `${getRelativePaths(sourceActionDataModelObject).join(\"/\")}/`;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tconst bindingParameterFullName = actionTarget.isBound ? actionTarget.parameters[0]?.fullyQualifiedName : undefined;\n\tconst operationAvailableExpression = getExpressionFromAnnotation(\n\t\tactionTarget.annotations.Core?.OperationAvailable,\n\t\t[],\n\t\tundefined,\n\t\t(path: string) => `${prefix}${bindingContextPathVisitor(path, convertedTypes, bindingParameterFullName)}`\n\t);\n\n\treturn equal(operationAvailableExpression, true);\n}\n\n/**\n * Generates the expression to check if the quickView facet is visible.\n * @param facetModelPath\n * @returns BindingToolkitExpression The binding expression of the visibility\n */\nexport function isQuickViewFacetVisible(facetModelPath: DataModelObjectPath<ReferenceFacet>): CompiledBindingToolkitExpression {\n\tlet targetVisible: BindingToolkitExpression<boolean> = constant(true);\n\tif (isAnnotationOfType<FieldGroup>(facetModelPath.targetObject?.Target?.$target, UIAnnotationTypes.FieldGroupType)) {\n\t\ttargetVisible = isVisible(facetModelPath.targetObject?.Target?.$target);\n\t}\n\treturn compileExpression(and(isVisible(facetModelPath.targetObject), targetVisible));\n}\n\n/*\n * Get visiblity of breadcrumbs.\n *\n * @function\n * @param {Object} [oViewData] ViewData model\n * returns {*} Expression or a Boolean value\n */\nexport const getVisibleExpressionForBreadcrumbs = function (viewData: ViewData): string | boolean | undefined {\n\treturn viewData.breadcrumbsHierarchyMode && viewData.fclEnabled === true\n\t\t? \"{fclhelper>/breadCrumbIsVisible}\"\n\t\t: !!viewData.breadcrumbsHierarchyMode;\n};\n"],"mappings":"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","ignoreList":[],"file":"UIFormatters-dbg.js"}