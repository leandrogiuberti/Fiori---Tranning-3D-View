{"version":3,"names":["getIsActionCriticalExpression","actionTarget","convertedTypes","bindingParameterFullName","isBound","parameters","fullyQualifiedName","undefined","isActionCriticalExp","getExpressionFromAnnotation","annotations","Common","IsActionCritical","path","bindingContextPathVisitor","equal","_exports","isActionParameterRequired","context","actionParameterPath","getInterface","getPath","actionPath","metaModel","getModel","convertTypes","actionParameterTarget","resolvePath","actionParameter","target","action","compileExpression","isActionParameterRequiredExpression","requiresIContext"],"sourceRoot":".","sources":["ActionHelper.ts"],"sourcesContent":["import type {\n\tAction,\n\tActionParameter,\n\tAnnotationTerm,\n\tConvertedMetadata,\n\tBoolean as EdmBoolean,\n\tPropertyAnnotationValue\n} from \"@sap-ux/vocabularies-types\";\nimport type { BindingToolkitExpression, CompiledBindingToolkitExpression } from \"sap/fe/base/BindingToolkit\";\nimport { compileExpression, equal, getExpressionFromAnnotation } from \"sap/fe/base/BindingToolkit\";\nimport type { IContext } from \"sap/ui/core/util/XMLPreprocessor\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport { convertTypes } from \"../converters/MetaModelConverter\";\nimport { bindingContextPathVisitor } from \"../helpers/BindingHelper\";\nimport { isActionParameterRequiredExpression } from \"./FieldControlHelper\";\n\n/**\n * Get binding toolkit expressiono for 'is action critical'.\n * @param actionTarget Action\n * @param convertedTypes ConvertedMetadata\n * @returns BindingToolkitExpression\n */\nexport function getIsActionCriticalExpression(actionTarget: Action, convertedTypes: ConvertedMetadata): BindingToolkitExpression<boolean> {\n\tconst bindingParameterFullName = actionTarget.isBound ? actionTarget.parameters[0]?.fullyQualifiedName : undefined;\n\tconst isActionCriticalExp = getExpressionFromAnnotation(\n\t\tactionTarget.annotations.Common?.IsActionCritical as unknown as AnnotationTerm<PropertyAnnotationValue<EdmBoolean>>,\n\t\t[],\n\t\tundefined,\n\t\t(path: string) => bindingContextPathVisitor(path, convertedTypes, bindingParameterFullName)\n\t);\n\treturn equal(isActionCriticalExp, true);\n}\n\n/**\n * Checks whether action parameter is required.\n * @param context Interface context to function arguments' contexts.\n * @returns Compiled expression\n */\nexport const isActionParameterRequired = function (context: IContext): CompiledBindingToolkitExpression {\n\tconst actionParameterPath = context.getInterface(0).getPath();\n\tconst actionPath = context.getInterface(1).getPath();\n\tconst metaModel = context.getInterface(0).getModel();\n\n\tif (actionParameterPath && actionPath && metaModel) {\n\t\tconst convertedTypes = convertTypes(metaModel as ODataMetaModel);\n\t\tconst actionParameterTarget = convertedTypes.resolvePath<ActionParameter>(actionParameterPath);\n\t\tconst actionParameter = actionParameterTarget.target;\n\t\tconst actionTarget = convertedTypes.resolvePath<Action>(actionPath);\n\t\tconst action = actionTarget.target;\n\t\tif (actionParameter && action) {\n\t\t\treturn compileExpression(isActionParameterRequiredExpression(actionParameter, action, convertedTypes));\n\t\t}\n\t}\n};\nisActionParameterRequired.requiresIContext = true;\n"],"mappings":";;;;;;;;;;;;;;EAgBA;AACA;AACA;AACA;AACA;AACA;EACO,SAASA,6BAA6BA,CAACC,YAAoB,EAAEC,cAAiC,EAAqC;IACzI,MAAMC,wBAAwB,GAAGF,YAAY,CAACG,OAAO,GAAGH,YAAY,CAACI,UAAU,CAAC,CAAC,CAAC,EAAEC,kBAAkB,GAAGC,SAAS;IAClH,MAAMC,mBAAmB,GAAGC,2BAA2B,CACtDR,YAAY,CAACS,WAAW,CAACC,MAAM,EAAEC,gBAAgB,EACjD,EAAE,EACFL,SAAS,EACRM,IAAY,IAAKC,yBAAyB,CAACD,IAAI,EAAEX,cAAc,EAAEC,wBAAwB,CAC3F,CAAC;IACD,OAAOY,KAAK,CAACP,mBAAmB,EAAE,IAAI,CAAC;EACxC;;EAEA;AACA;AACA;AACA;AACA;EAJAQ,QAAA,CAAAhB,6BAAA,GAAAA,6BAAA;EAKO,MAAMiB,yBAAyB,GAAG,SAAAA,CAAUC,OAAiB,EAAoC;IACvG,MAAMC,mBAAmB,GAAGD,OAAO,CAACE,YAAY,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;IAC7D,MAAMC,UAAU,GAAGJ,OAAO,CAACE,YAAY,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;IACpD,MAAME,SAAS,GAAGL,OAAO,CAACE,YAAY,CAAC,CAAC,CAAC,CAACI,QAAQ,CAAC,CAAC;IAEpD,IAAIL,mBAAmB,IAAIG,UAAU,IAAIC,SAAS,EAAE;MACnD,MAAMrB,cAAc,GAAGuB,YAAY,CAACF,SAA2B,CAAC;MAChE,MAAMG,qBAAqB,GAAGxB,cAAc,CAACyB,WAAW,CAAkBR,mBAAmB,CAAC;MAC9F,MAAMS,eAAe,GAAGF,qBAAqB,CAACG,MAAM;MACpD,MAAM5B,YAAY,GAAGC,cAAc,CAACyB,WAAW,CAASL,UAAU,CAAC;MACnE,MAAMQ,MAAM,GAAG7B,YAAY,CAAC4B,MAAM;MAClC,IAAID,eAAe,IAAIE,MAAM,EAAE;QAC9B,OAAOC,iBAAiB,CAACC,mCAAmC,CAACJ,eAAe,EAAEE,MAAM,EAAE5B,cAAc,CAAC,CAAC;MACvG;IACD;EACD,CAAC;EACDe,yBAAyB,CAACgB,gBAAgB,GAAG,IAAI;EAACjB,QAAA,CAAAC,yBAAA,GAAAA,yBAAA;EAAA,OAAAD,QAAA;AAAA","ignoreList":[],"file":"ActionHelper-dbg.js"}