/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/base/BindingToolkit","sap/fe/core/formatters/ValueFormatter","sap/fe/core/helpers/BindingHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataFieldFormatters","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/UIFormatters","../converters/annotations/DataField"],function(t,e,a,n,r,o,i,s){"use strict";var l={};var c=s.isDataField;var u=o.getTargetNavigationPath;var f=o.getRelativePaths;var T=o.getContextRelativeTargetObjectPath;var p=o.enhanceDataModelPath;var d=r.getLabelForConnectedFields;var g=n.isPropertyPathExpression;var m=n.isProperty;var v=n.isPathAnnotationExpression;var E=a.UI;var I=a.Draft;var D=t.transformRecursively;var h=t.pathInModel;var O=t.or;var _=t.not;var y=t.isUndefinedExpression;var C=t.isEmpty;var A=t.isConstant;var $=t.ifElse;var F=t.getExpressionFromAnnotation;var N=t.formatWithTypeInformation;var b=t.formatResult;var x=t.constant;var V=t.compileExpression;const P=function(t,e){return D(t,"PathInModel",t=>{let a=t;if(t.modelName===undefined){const n=p(e,t.path);a=N(n.targetObject,t)}return a})};l.formatValueRecursively=P;const R=t=>{const e=t.targetObject;return g(e)?e.$target:e};const M=t=>{const e=t.targetEntitySet?.annotations?.Common?.DraftRoot;const a=t.targetEntitySet?.annotations?.Common?.DraftNode;if(!!e||!!a){return _(I.IsNewObject)}return true};const U=t=>t._type==="Constant"?x(!t.value):C(t);const L=function(t,e,a){const n=a?.displayMode;const r=R(t);const o=n||i.getDisplayMode(t);const s=r?.annotations?.Common?.Text;const l=f(t);if(r){e=N(r,e)}let c=[e];if(o!=="Value"&&s){switch(o){case"Description":c=[F(s,l)];break;case"DescriptionValue":const t=a?.splitTitleOnTwoLines===undefined?$(!!s.annotations?.UI?.TextArrangement,e,x("")):$(!!a?.splitTitleOnTwoLines,x(""),e);c=[F(s,l),t];break;case"ValueDescription":c=[e,$(!!a?.splitTitleOnTwoLines,x(""),F(s,l))];break}}return c};const H=function(t,e){return D(t,"PathInModel",t=>{if(t.modelName!==undefined)return t;const a=p(e,t.path);return L(a,t)})};const j=function(t){const a=u(t,true);const n="T_NEW_OBJECT";const r=a?`${n}|${a}`:n;const o=h(n,"sap.fe.i18n");const i=h(r,"sap.fe.i18n");return b([o,i],e.formatCreationTitle)};l.getCreateModeTitle=j;const w=t=>{const e=R(t);if(e&&e.annotations?.Core?.Computed){return E.IsInactive}else{return x(false)}};const B=function(t,e,a){let n;if(e.$Type==="com.sap.vocabularies.UI.v1.DataField"){n=F(e.Value);if(e.Value?.$target?.annotations.Common?.Text?.annotations?.UI?.TextArrangement){n=H(n,t)}n=P(n,t)}if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&e.Target.$target?.$Type==="com.sap.vocabularies.UI.v1.ConnectedFieldsType"){const e=p(t,"$Type/@UI.HeaderInfo/Title/Target/$AnnotationPath");n=d(e,a,false)}return n};const k=function(t,a,n,r,o,i){const s=i||e.formatTitle;let l=j(t);let u;let f=false;let d;if(c(r?.Title)&&r?.Title.Value?.$target?.annotations?.Common?.ExternalID){d={...r.Title,Value:{...r.Title.Value,$target:{...r.Title.Value.$target}}};d.Value.path=r.Title.Value.$target?.annotations?.Common?.ExternalID.path;d.Value.$target=r.Title.Value.$target?.annotations?.Common?.ExternalID.$target}if(r?.Title?.$Type&&o){if(d===undefined){u=B(t,r.Title,a)}else{u=B(t,d,a)}l=j(t);if(A(u)&&u.value===""){f=true}}else if(r&&(r.Title===undefined||r.Title.toString()==="")){f=true;if(!o){u=x("")}}if(u&&A(u)){return V(u)}if(v(t.targetObject)){t=p(t,t.targetObject.path)}const g=h(T(t));let I;if(u){I=Array.isArray(u)?u:[u]}else if(t.targetObject&&m(t.targetObject)){I=L(t,g,n)}const D=I===undefined||U(I[0]);const C=w(t);const F=I!=undefined&&b(I,s);u=$(D,$(O(f&&M(t),C),"",$(y(x(i)),$(O(E.IsCreateMode,_(M(t))),l,h("T_ANNOTATION_HELPER_DEFAULT_HEADER_TITLE_NO_HEADER_INFO","sap.fe.i18n")),$(_(M(t)),o?.resourceModel.getText("T_NEW_OBJECT"),o?.resourceModel.getText("T_ANNOTATION_HELPER_DEFAULT_HEADER_TITLE_NO_HEADER_INFO")))),F);return V(u)};l.getTitleBindingExpression=k;return l},false);
//# sourceMappingURL=TitleHelper.js.map