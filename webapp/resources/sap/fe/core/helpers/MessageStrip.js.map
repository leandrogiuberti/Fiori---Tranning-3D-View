{"version":3,"file":"MessageStrip.js","names":["getLabels","aIgnoredFields","sEntityTypePath","oFilterControl","resourceModel","oMetaModel","getModel","getMetaModel","aIgnoredLabels","map","sProperty","getText","sLabel","getObject","getLocalizedText","getALPText","oFilterBar","bIsSearchIgnored","sResourceKey","aParameters","oResourceBundle","_getResourceBundle","view","CommonUtils","getTargetView","oChart","getController","getChartControl","bIsDraftSupported","data","oMacroResourceBundle","Library","getResourceBundleFor","includes","sDefaultResourceKey","_getArgumentSize","_getSizeText","length","join","sTabTitle","Device","system","desktop","MessageStripHelper"],"sources":["./MessageStrip.ts"],"sourcesContent":["import type ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { getLocalizedText } from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport type ResourceModel from \"sap/fe/core/ResourceModel\";\nimport type Control from \"sap/ui/core/Control\";\nimport Library from \"sap/ui/core/Lib\";\nimport Device from \"sap/ui/Device\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\n\nfunction getLabels(aIgnoredFields: string[], sEntityTypePath: string, oFilterControl: Control, resourceModel: ResourceModel): string[] {\n\tconst oMetaModel = (oFilterControl.getModel() as ODataModel).getMetaModel(),\n\t\taIgnoredLabels = aIgnoredFields.map(function (sProperty) {\n\t\t\tif (sProperty === \"$search\") {\n\t\t\t\treturn resourceModel.getText(\"M_FILTERBAR_SEARCH\") || \"\";\n\t\t\t}\n\t\t\tif (sProperty === \"$editState\") {\n\t\t\t\treturn resourceModel.getText(\"FILTERBAR_EDITING_STATUS\") || \"\";\n\t\t\t}\n\t\t\tconst sLabel = oMetaModel.getObject(`${sEntityTypePath}${sProperty}@com.sap.vocabularies.Common.v1.Label`) ?? sProperty;\n\t\t\treturn getLocalizedText(sLabel, oFilterControl);\n\t\t});\n\treturn aIgnoredLabels;\n}\nfunction getALPText(aIgnoredLabels: string[], oFilterBar: Control, bIsSearchIgnored: boolean): string {\n\tlet sResourceKey = \"\";\n\tlet aParameters: string[] = [];\n\tconst oResourceBundle = _getResourceBundle();\n\n\tif (!oResourceBundle) {\n\t\treturn \"\";\n\t}\n\n\tconst view = CommonUtils.getTargetView(oFilterBar);\n\tconst oChart = (view.getController() as { getChartControl?: Function }).getChartControl?.();\n\tconst bIsDraftSupported = oChart?.data(\"draftSupported\") === \"true\";\n\tconst oMacroResourceBundle = Library.getResourceBundleFor(\"sap.fe.macros\")!;\n\tbIsSearchIgnored = bIsSearchIgnored && aIgnoredLabels.includes(oMacroResourceBundle.getText(\"M_FILTERBAR_SEARCH\"));\n\tconst sDefaultResourceKey = `C_LR_MULTIVIZ_CHART_${_getArgumentSize(aIgnoredLabels)}_IGNORED_FILTER_${_getSizeText()}`;\n\n\tif (bIsDraftSupported && ((aIgnoredLabels.length === 2 && bIsSearchIgnored) || aIgnoredLabels.length === 1)) {\n\t\tsResourceKey =\n\t\t\taIgnoredLabels.length === 1\n\t\t\t\t? \"C_MULTIVIZ_CHART_IGNORED_FILTER_DRAFT_DATA\"\n\t\t\t\t: \"C_LR_MULTIVIZ_CHART_IGNORED_FILTER_DRAFT_DATA_AND_SEARCH\";\n\t} else {\n\t\tsResourceKey = sDefaultResourceKey;\n\t\taParameters = [aIgnoredLabels.join(\", \")];\n\t}\n\treturn oResourceBundle.getText(sResourceKey, aParameters);\n}\n\nfunction getText(aIgnoredLabels: string[], oFilterBar: Control, sTabTitle: string): string {\n\tconst oResourceBundle = _getResourceBundle();\n\treturn oResourceBundle\n\t\t? oResourceBundle.getText(`C_LR_MULTITABLES_${_getArgumentSize(aIgnoredLabels)}_IGNORED_FILTER_${_getSizeText()}`, [\n\t\t\t\taIgnoredLabels.join(\", \"),\n\t\t\t\tgetLocalizedText(sTabTitle, oFilterBar)\n\t\t  ])\n\t\t: \"\";\n}\n\nfunction _getSizeText(): \"LARGE\" | \"SMALL\" {\n\treturn Device.system.desktop ? \"LARGE\" : \"SMALL\";\n}\n\nfunction _getArgumentSize(aIgnoredLabels: string[]): \"SINGLE\" | \"MULTI\" {\n\treturn aIgnoredLabels.length === 1 ? \"SINGLE\" : \"MULTI\";\n}\n\nfunction _getResourceBundle(): ResourceBundle | undefined {\n\treturn Library.getResourceBundleFor(\"sap.fe.templates\");\n}\n\nconst MessageStripHelper = {\n\tgetALPText: getALPText,\n\tgetText: getText,\n\tgetLabels: getLabels\n};\n\nexport default MessageStripHelper;\n"],"mappings":";;;;8KASA,SAASA,EAAUC,EAA0BC,EAAyBC,EAAyBC,GAC9F,MAAMC,EAAcF,EAAeG,WAA0BC,eAC5DC,EAAiBP,EAAeQ,IAAI,SAAUC,GAC7C,GAAIA,IAAc,UAAW,CAC5B,OAAON,EAAcO,QAAQ,uBAAyB,EACvD,CACA,GAAID,IAAc,aAAc,CAC/B,OAAON,EAAcO,QAAQ,6BAA+B,EAC7D,CACA,MAAMC,EAASP,EAAWQ,UAAU,GAAGX,IAAkBQ,2CAAqDA,EAC9G,OAAOI,EAAiBF,EAAQT,EACjC,GACD,OAAOK,CACR,CACA,SAASO,EAAWP,EAA0BQ,EAAqBC,GAClE,IAAIC,EAAe,GACnB,IAAIC,EAAwB,GAC5B,MAAMC,EAAkBC,IAExB,IAAKD,EAAiB,CACrB,MAAO,EACR,CAEA,MAAME,EAAOC,EAAYC,cAAcR,GACvC,MAAMS,EAAUH,EAAKI,gBAAmDC,oBACxE,MAAMC,EAAoBH,GAAQI,KAAK,oBAAsB,OAC7D,MAAMC,EAAuBC,EAAQC,qBAAqB,iBAC1Df,EAAmBA,GAAoBT,EAAeyB,SAASH,EAAqBnB,QAAQ,uBAC5F,MAAMuB,EAAsB,uBAAuBC,EAAiB3B,qBAAkC4B,MAEtG,GAAIR,IAAuBpB,EAAe6B,SAAW,GAAKpB,GAAqBT,EAAe6B,SAAW,GAAI,CAC5GnB,EACCV,EAAe6B,SAAW,EACvB,6CACA,0DACL,KAAO,CACNnB,EAAegB,EACff,EAAc,CAACX,EAAe8B,KAAK,MACpC,CACA,OAAOlB,EAAgBT,QAAQO,EAAcC,EAC9C,CAEA,SAASR,EAAQH,EAA0BQ,EAAqBuB,GAC/D,MAAMnB,EAAkBC,IACxB,OAAOD,EACJA,EAAgBT,QAAQ,oBAAoBwB,EAAiB3B,qBAAkC4B,MAAkB,CACjH5B,EAAe8B,KAAK,MACpBxB,EAAiByB,EAAWvB,KAE5B,EACJ,CAEA,SAASoB,IACR,OAAOI,EAAOC,OAAOC,QAAU,QAAU,OAC1C,CAEA,SAASP,EAAiB3B,GACzB,OAAOA,EAAe6B,SAAW,EAAI,SAAW,OACjD,CAEA,SAAShB,IACR,OAAOU,EAAQC,qBAAqB,mBACrC,CAEA,MAAMW,EAAqB,CAC1B5B,WAAYA,EACZJ,QAASA,EACTX,UAAWA,GACV,OAEa2C,CAAkB","ignoreList":[]}