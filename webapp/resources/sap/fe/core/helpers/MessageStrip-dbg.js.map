{"version":3,"names":["getLabels","aIgnoredFields","sEntityTypePath","oFilterControl","resourceModel","oMetaModel","getModel","getMetaModel","aIgnoredLabels","map","sProperty","getText","sLabel","getObject","getLocalizedText","getALPText","oFilterBar","bIsSearchIgnored","sResourceKey","aParameters","oResourceBundle","_getResourceBundle","view","CommonUtils","getTargetView","oChart","getController","getChartControl","bIsDraftSupported","data","oMacroResourceBundle","Library","getResourceBundleFor","includes","sDefaultResourceKey","_getArgumentSize","_getSizeText","length","join","sTabTitle","Device","system","desktop","MessageStripHelper"],"sourceRoot":".","sources":["MessageStrip.ts"],"sourcesContent":["import type ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { getLocalizedText } from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport type ResourceModel from \"sap/fe/core/ResourceModel\";\nimport type Control from \"sap/ui/core/Control\";\nimport Library from \"sap/ui/core/Lib\";\nimport Device from \"sap/ui/Device\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\n\nfunction getLabels(aIgnoredFields: string[], sEntityTypePath: string, oFilterControl: Control, resourceModel: ResourceModel): string[] {\n\tconst oMetaModel = (oFilterControl.getModel() as ODataModel).getMetaModel(),\n\t\taIgnoredLabels = aIgnoredFields.map(function (sProperty) {\n\t\t\tif (sProperty === \"$search\") {\n\t\t\t\treturn resourceModel.getText(\"M_FILTERBAR_SEARCH\") || \"\";\n\t\t\t}\n\t\t\tif (sProperty === \"$editState\") {\n\t\t\t\treturn resourceModel.getText(\"FILTERBAR_EDITING_STATUS\") || \"\";\n\t\t\t}\n\t\t\tconst sLabel = oMetaModel.getObject(`${sEntityTypePath}${sProperty}@com.sap.vocabularies.Common.v1.Label`) ?? sProperty;\n\t\t\treturn getLocalizedText(sLabel, oFilterControl);\n\t\t});\n\treturn aIgnoredLabels;\n}\nfunction getALPText(aIgnoredLabels: string[], oFilterBar: Control, bIsSearchIgnored: boolean): string {\n\tlet sResourceKey = \"\";\n\tlet aParameters: string[] = [];\n\tconst oResourceBundle = _getResourceBundle();\n\n\tif (!oResourceBundle) {\n\t\treturn \"\";\n\t}\n\n\tconst view = CommonUtils.getTargetView(oFilterBar);\n\tconst oChart = (view.getController() as { getChartControl?: Function }).getChartControl?.();\n\tconst bIsDraftSupported = oChart?.data(\"draftSupported\") === \"true\";\n\tconst oMacroResourceBundle = Library.getResourceBundleFor(\"sap.fe.macros\")!;\n\tbIsSearchIgnored = bIsSearchIgnored && aIgnoredLabels.includes(oMacroResourceBundle.getText(\"M_FILTERBAR_SEARCH\"));\n\tconst sDefaultResourceKey = `C_LR_MULTIVIZ_CHART_${_getArgumentSize(aIgnoredLabels)}_IGNORED_FILTER_${_getSizeText()}`;\n\n\tif (bIsDraftSupported && ((aIgnoredLabels.length === 2 && bIsSearchIgnored) || aIgnoredLabels.length === 1)) {\n\t\tsResourceKey =\n\t\t\taIgnoredLabels.length === 1\n\t\t\t\t? \"C_MULTIVIZ_CHART_IGNORED_FILTER_DRAFT_DATA\"\n\t\t\t\t: \"C_LR_MULTIVIZ_CHART_IGNORED_FILTER_DRAFT_DATA_AND_SEARCH\";\n\t} else {\n\t\tsResourceKey = sDefaultResourceKey;\n\t\taParameters = [aIgnoredLabels.join(\", \")];\n\t}\n\treturn oResourceBundle.getText(sResourceKey, aParameters);\n}\n\nfunction getText(aIgnoredLabels: string[], oFilterBar: Control, sTabTitle: string): string {\n\tconst oResourceBundle = _getResourceBundle();\n\treturn oResourceBundle\n\t\t? oResourceBundle.getText(`C_LR_MULTITABLES_${_getArgumentSize(aIgnoredLabels)}_IGNORED_FILTER_${_getSizeText()}`, [\n\t\t\t\taIgnoredLabels.join(\", \"),\n\t\t\t\tgetLocalizedText(sTabTitle, oFilterBar)\n\t\t  ])\n\t\t: \"\";\n}\n\nfunction _getSizeText(): \"LARGE\" | \"SMALL\" {\n\treturn Device.system.desktop ? \"LARGE\" : \"SMALL\";\n}\n\nfunction _getArgumentSize(aIgnoredLabels: string[]): \"SINGLE\" | \"MULTI\" {\n\treturn aIgnoredLabels.length === 1 ? \"SINGLE\" : \"MULTI\";\n}\n\nfunction _getResourceBundle(): ResourceBundle | undefined {\n\treturn Library.getResourceBundleFor(\"sap.fe.templates\");\n}\n\nconst MessageStripHelper = {\n\tgetALPText: getALPText,\n\tgetText: getText,\n\tgetLabels: getLabels\n};\n\nexport default MessageStripHelper;\n"],"mappings":"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","ignoreList":[],"file":"MessageStrip-dbg.js"}