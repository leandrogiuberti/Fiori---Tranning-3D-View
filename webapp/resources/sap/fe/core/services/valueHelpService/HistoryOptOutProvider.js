/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/m/Button","sap/m/Dialog","sap/m/FlexBox","sap/m/HBox","sap/m/Label","sap/m/MessageBox","sap/m/Switch","sap/m/VBox","sap/ui/core/IconPool","sap/ui/core/Lib"],function(e,t,s,i,o,n,r,a,l,c,u){"use strict";var h={};let S=function(){function S(e){this.resourceBundle=u.getResourceBundleFor("sap.fe.core");this._userAction=null;this.valueHelpHistoryService=e}h=S;var T=S.prototype;T.getDialog=function e(){return this.dialog};T.createOptOutUserProfileEntry=async function t(){const s=this.valueHelpHistoryService.getShellExtensionService();let i;try{i=await s.createUserAction({text:this.resourceBundle.getText("C_HISTORY_SETTING_TITLE"),icon:c.getIconURI("history"),press:async()=>{this.historyEnabledSwitch=new a;this.dialog=this.createDialog();const e=await this.valueHelpHistoryService.getHistoryEnabled();this.historyEnabledSwitch.setState(e);this.dialog.open()}},{controlType:"sap.m.Button"});if(this._userAction){this._userAction.destroy()}this._userAction=i;i.showForCurrentApp()}catch(t){e.error("Cannot add user action",t instanceof Error?t.message:String(t))}return i};T.createDialogLayout=function e(){const s=new n({text:this.resourceBundle.getText("C_HISTORY_SETTING_ENABLE_TRACKING_DESCRIPTION"),labelFor:this.historyEnabledSwitch}).addStyleClass("sapUiSmallMarginEnd");const r=new o({alignItems:"Center",items:[s,this.historyEnabledSwitch]});const a=new t({busyIndicatorDelay:0,text:this.resourceBundle.getText("C_HISTORY_SETTING_DELETE_BUTTON"),press:this.onDeleteHistoryPress.bind(this)});const c=new n({text:this.resourceBundle.getText("C_HISTORY_SETTING_DELETE_DESCRIPTION"),labelFor:a}).addStyleClass("sapUiSmallMarginEnd");const u=new i({alignItems:"Center",items:[c,a]});return new l({items:[r,u]}).addStyleClass("sapUiSmallMargin")};T.createDialog=function e(){const i=this.createDialogLayout();const o=new t({text:this.resourceBundle.getText("C_HISTORY_SETTING_SAVE"),press:this.onSavePress.bind(this)});const n=new t({text:this.resourceBundle.getText("C_HISTORY_SETTING_CANCEL"),press:()=>this.closeDialog()});return new s("sapui5.history.optOutDialog",{title:this.resourceBundle.getText("C_HISTORY_SETTING_TITLE"),content:[i],buttons:[o,n],afterClose:()=>{this.dialog?.destroy();this.dialog=undefined;this.historyEnabledSwitch=undefined}})};T.onDeleteHistoryPress=function e(t){const s=t.getSource();s.setBusy(true);r.confirm(this.resourceBundle.getText("C_HISTORY_SETTING_DELETE_CONFIRM_MESSAGE"),{onClose:async e=>{if(e==="CANCEL"){return}await this.valueHelpHistoryService.deleteHistoryForAllApps().then(function(){return window.location.reload()});this.closeDialog()}});s.setBusy(false)};T.onSavePress=function e(){r.confirm(this.resourceBundle.getText("C_HISTORY_SETTING_SAVE_CONFIRM_MESSAGE"),{onClose:async e=>{if(e==="CANCEL"){return}const t=this.historyEnabledSwitch?.getState()??false;await this.valueHelpHistoryService.setHistoryEnabled(t);this.closeDialog()}})};T.closeDialog=function e(){this.dialog?.close()};return S}();h=S;return h},false);
//# sourceMappingURL=HistoryOptOutProvider.js.map