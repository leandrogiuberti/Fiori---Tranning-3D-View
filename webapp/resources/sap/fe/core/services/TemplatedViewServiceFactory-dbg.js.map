{"version":3,"names":["TemplatedViewService","_Service","apply","arguments","_exports","_inheritsLoose","_proto","prototype","init","aServiceDependencies","oContext","getContext","oComponent","scopeObject","oAppComponent","CommonUtils","getAppComponent","viewPreloaderService","getViewPreloaderService","oMetaModel","getMetaModel","pageId","getLocalId","getId","sStableId","getMetadata","getComponentName","aEnhanceI18n","getEnhanceI18n","sAppNamespace","oFactory","factory","i","length","oResourceModel","getModel","isA","replace","sCacheIdentifier","getName","Localization","getLanguageTag","push","ServiceFactoryRegistry","get","createInstance","scopeType","settings","bundles","enhanceI18n","modelName","then","oResourceModelService","getResourceModel","metaModel","appComponent","component","oCacheHandlerService","isCacheReady","validateCacheKey","getEnvironmentCapabilities","VersionInfo","load","oInfo","sTimestamp","libraries","Core","buildinfo","buildtime","forEach","oLibrary","buildTimestamp","catch","initPromise","Promise","all","aDependenciesResult","sCacheKey","TemplateConverter","MetaModelConverter","requireDependencies","createView","getInstance","invalidateIfNeeded","refreshView","oRootView","getRootControl","destroy","oView","resourceModel","stableId","getUIArea","invalidate","oError","Log","error","_getViewSettings","preprocessorContext","mServiceSettings","mViewData","oPageModel","viewType","getViewType","undefined","type","preprocessors","xml","controls","id","viewName","getViewName","viewData","cache","keys","additionalData","getAdditionalCacheData","getData","setAdditionalCacheData","value","setData","models","height","_createErrorPage","reason","oViewSettings","message","JSONModel","runAsOwner","View","create","setModel","setAggregation","getController","getPlaceholder","hideRootPlaceholder","sConverterType","converterType","sFullContextPath","getRoutingService","getTargetInformationFor","options","fullContextPath","getContextPath","oManifestContent","getManifest","oDeviceModel","Device","setDefaultBindingMode","oManifestModel","oViewDataModel","oRoutingService","getService","oTargetInfo","mOutbounds","crossNavigation","outbounds","mNavigation","getNavigation","convertedMetadata","convertTypes","getCapabilities","_enhanceNavigationConfig","definitionContext","DefinitionContext","addApplicationManifest","navigation","viewLevel","contentDensities","isDesktop","system","desktop","isPhone","phone","TemplateType","FreeStylePage","getViewData","Object","assign","TemplatedViewServiceFactory","setPageConfigurationChanges","isShareButtonVisibleForMyInbox","getShareButtonVisibilityForMyInbox","oShellServices","getShellServices","shellContentDensity","getContentDensity","sapfeManifestContent","sapFeManifestConfiguration","retrieveTextFromValueList","form","controlConfiguration","sAnnotationPath","includes","sTargetAnnotationPath","resolveDynamicExpression","TemplateModel","oDiagnostics","getDiagnostics","iIssueCount","getIssues","oConverterPageModel","convertPage","ManifestWrapper","_getControllerName","controllerName","aIssues","aAddedIssues","slice","warning","aSplitPath","split","sEntitySetPath","_getFullPathToEntitySet","bindingContexts","entitySet","createBindingContext","contextPath","converterContext","noResolve","device","manifest","getConvertedMetadata","getDefinitionContext","getDefinitionForPage","endsWith","substring","getPageFor","viewId","setPreprocessorContext","viewJSONModel","ModelHelper","enhanceViewJSONModel","errorViewName","e","Error","convertedTypes","navigationObjectKey","navigationObject","outboundConfig","detail","outbound","outboundDetail","semanticObject","action","parameters","availability","registerVirtualProperty","route","resolveBindingString","reduce","sPathSoFar","sNextPathPart","oTarget","getObject","getView","getInterface","exit","removeGlobalInstance","Service","_ServiceFactory","_this","_len","args","Array","_key","call","_oInstanceRegistry","_proto2","oServiceContext","iCreatingViews","oTemplatedViewService","componentData","getComponentData","feEnvironment","getShareControlVisibility","getNumberOfViewsInCreationState","targets","routing","realTarget","targetToFind","actualSettings","applyPageConfigurationChanges","ServiceFactory"],"sourceRoot":".","sources":["TemplatedViewServiceFactory.ts"],"sourcesContent":["import type { ConvertedMetadata } from \"@sap-ux/vocabularies-types\";\nimport type { SAPJSONSchemaForWebApplicationManifestFile } from \"@ui5/manifest/types/manifest\";\nimport Log from \"sap/base/Log\";\nimport Localization from \"sap/base/i18n/Localization\";\nimport { resolveBindingString } from \"sap/fe/base/BindingToolkit\";\nimport type { EnhanceWithUI5 } from \"sap/fe/base/ClassSupport\";\nimport type AppComponent from \"sap/fe/core/AppComponent\";\nimport type { ComponentData } from \"sap/fe/core/AppComponent\";\nimport type { SemanticObject } from \"sap/fe/core/CommonUtils\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type ResourceModel from \"sap/fe/core/ResourceModel\";\nimport type TemplateComponent from \"sap/fe/core/TemplateComponent\";\nimport type { NavigationConfiguration, XMLPreprocessorContext } from \"sap/fe/core/TemplateComponent\";\nimport TemplateModel from \"sap/fe/core/TemplateModel\";\nimport type { SurveyConfig } from \"sap/fe/core/controllerextensions/Feedback\";\nimport type {\n\tBaseManifestSettings,\n\tContentDensitiesType,\n\tControlConfiguration,\n\tManifestAction,\n\tManifestHeaderFacet,\n\tVariantManagementType\n} from \"sap/fe/core/converters/ManifestSettings\";\nimport { TemplateType } from \"sap/fe/core/converters/ManifestSettings\";\nimport ManifestWrapper from \"sap/fe/core/converters/ManifestWrapper\";\nimport type * as _MetaModelConverter from \"sap/fe/core/converters/MetaModelConverter\";\nimport { registerVirtualProperty } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type * as _TemplateConverter from \"sap/fe/core/converters/TemplateConverter\";\nimport type { ConfigurableRecord } from \"sap/fe/core/converters/helpers/ConfigurableObject\";\nimport type { DefinitionPage } from \"sap/fe/core/definition/FEDefinition\";\nimport { DefinitionContext } from \"sap/fe/core/definition/FEDefinition\";\nimport { requireDependencies } from \"sap/fe/core/helpers/LoaderUtils\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { applyPageConfigurationChanges } from \"sap/fe/core/manifestMerger/ChangePageConfiguration\";\nimport type { CacheHandlerService } from \"sap/fe/core/services/CacheHandlerServiceFactory\";\nimport { type HierachyMode as BreadcrumbsHierachyMode } from \"sap/fe/macros/Breadcrumbs\";\nimport type { OverflowToolbarPriority } from \"sap/m/library\";\nimport Device from \"sap/ui/Device\";\nimport VersionInfo from \"sap/ui/VersionInfo\";\nimport Core from \"sap/ui/core/Core\";\nimport type { ManifestContent, ManifestOutboundEntry, ShareOptions } from \"sap/ui/core/Manifest\";\nimport View from \"sap/ui/core/mvc/View\";\nimport Service from \"sap/ui/core/service/Service\";\nimport ServiceFactory from \"sap/ui/core/service/ServiceFactory\";\nimport ServiceFactoryRegistry from \"sap/ui/core/service/ServiceFactoryRegistry\";\nimport type Model from \"sap/ui/model/Model\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type { ServiceContext } from \"types/metamodel_types\";\nimport { resolveDynamicExpression } from \"../helpers/DynamicAnnotationPathHelper\";\nimport type { ResourceModelService } from \"./ResourceModelServiceFactory\";\n\ntype TemplatedViewServiceSettings = {\n\tviewType?: string;\n\tviewName?: string;\n};\n\ntype ViewSettings = Parameters<typeof View.create>[0] & { cache: unknown; models: unknown; height: string };\nexport type ViewData = {\n\tbreadcrumbsHierarchyMode?: BreadcrumbsHierachyMode;\n\tfclEnabled?: boolean;\n\teditableHeaderContent?: boolean;\n\thideFilterBar?: boolean;\n\tuseHiddenFilterBar?: boolean;\n\tsectionLayout?: string;\n\tadditionalSemanticObjects?: Record<string, SemanticObject>;\n\tappComponent: AppComponent;\n\tnavigation: object;\n\tviewLevel: number;\n\tvariantManagement?: VariantManagementType;\n\tstableId: string;\n\tcontentDensities?: ContentDensitiesType;\n\tresourceModel: ResourceModel;\n\tfullContextPath: string;\n\tisDesktop: boolean;\n\tisPhone: boolean;\n\tconverterType: TemplateType;\n\tshellContentDensity?: string;\n\tuseNewLazyLoading?: boolean;\n\tinitialLoad?: string;\n\tliveMode?: boolean;\n\tretrieveTextFromValueList?: boolean;\n\tcontrolConfiguration?: ControlConfiguration;\n\trefreshStrategyOnAppRestore?: unknown;\n\tentitySet?: string;\n\tisShareButtonVisibleForMyInbox?: boolean;\n\tcontextPath?: string;\n\tshare?: ShareOptions;\n\tshareOverflowPriority?: OverflowToolbarPriority;\n\tsapFeManifestConfiguration?: ManifestContent[\"sap.fe\"];\n\tcontent?: {\n\t\tfeedback?: { actions?: Record<string, SurveyConfig>; standardActions?: Record<string, SurveyConfig> };\n\t\theader?: {\n\t\t\tfacets?: ConfigurableRecord<ManifestHeaderFacet>;\n\t\t\tactions?: ConfigurableRecord<ManifestAction>;\n\t\t};\n\t\tfooter?: {\n\t\t\tactions?: ConfigurableRecord<ManifestAction>;\n\t\t};\n\t};\n};\nexport class TemplatedViewService extends Service<TemplatedViewServiceSettings> {\n\tinitPromise!: Promise<void>;\n\n\toView!: View;\n\n\toResourceModelService!: ResourceModelService;\n\n\toCacheHandlerService!: CacheHandlerService;\n\n\toFactory!: TemplatedViewServiceFactory;\n\n\tresourceModel!: ResourceModel;\n\n\tstableId!: string;\n\n\tpageId!: string;\n\n\tTemplateConverter?: typeof _TemplateConverter;\n\n\tMetaModelConverter?: typeof _MetaModelConverter;\n\n\tinit(): void {\n\t\tconst aServiceDependencies = [];\n\t\tconst oContext = this.getContext();\n\t\tconst oComponent = oContext.scopeObject;\n\t\tconst oAppComponent = CommonUtils.getAppComponent(oComponent);\n\t\tconst viewPreloaderService = oAppComponent.getViewPreloaderService();\n\t\tconst oMetaModel = oAppComponent.getMetaModel();\n\t\tthis.pageId = oAppComponent.getLocalId(oComponent.getId()) as string;\n\t\tconst sStableId = `${oAppComponent.getMetadata().getComponentName()}::${this.pageId}`;\n\t\tconst aEnhanceI18n = oComponent.getEnhanceI18n() || [];\n\t\tlet sAppNamespace;\n\t\tthis.oFactory = oContext.factory;\n\t\tif (aEnhanceI18n) {\n\t\t\tsAppNamespace = oAppComponent.getMetadata().getComponentName();\n\t\t\tfor (let i = 0; i < aEnhanceI18n.length; i++) {\n\t\t\t\t// In order to support text-verticalization applications can also pass a resource model defined in the manifest\n\t\t\t\t// UI5 takes care of text-verticalization for resource models defined in the manifest\n\t\t\t\t// Hence check if the given key is a resource model defined in the manifest\n\t\t\t\t// if so this model should be used to enhance the sap.fe resource model so pass it as it is\n\t\t\t\tconst oResourceModel = oAppComponent.getModel(aEnhanceI18n[i]);\n\t\t\t\tif (oResourceModel && oResourceModel.isA(\"sap.ui.model.resource.ResourceModel\")) {\n\t\t\t\t\taEnhanceI18n[i] = oResourceModel;\n\t\t\t\t} else {\n\t\t\t\t\taEnhanceI18n[i] = `${sAppNamespace}.${aEnhanceI18n[i].replace(\".properties\", \"\")}`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst sCacheIdentifier = `${oAppComponent.getMetadata().getName()}_${sStableId}_${Localization.getLanguageTag()}`;\n\t\taServiceDependencies.push(\n\t\t\tServiceFactoryRegistry.get(\"sap.fe.core.services.ResourceModelService\")\n\t\t\t\t.createInstance({\n\t\t\t\t\tscopeType: \"component\",\n\t\t\t\t\tscopeObject: oComponent,\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tbundles: [\"sap.fe.core.messagebundle\", \"sap.fe.macros.messagebundle\", \"sap.fe.templates.messagebundle\"],\n\t\t\t\t\t\tenhanceI18n: aEnhanceI18n,\n\t\t\t\t\t\tmodelName: \"sap.fe.i18n\"\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then((oResourceModelService: ResourceModelService) => {\n\t\t\t\t\tthis.oResourceModelService = oResourceModelService;\n\t\t\t\t\treturn oResourceModelService.getResourceModel();\n\t\t\t\t})\n\t\t);\n\t\taServiceDependencies.push(\n\t\t\tServiceFactoryRegistry.get(\"sap.fe.core.services.CacheHandlerService\")\n\t\t\t\t.createInstance({\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tmetaModel: oMetaModel,\n\t\t\t\t\t\tappComponent: oAppComponent,\n\t\t\t\t\t\tcomponent: oComponent\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(async (oCacheHandlerService: CacheHandlerService): Promise<string | null> => {\n\t\t\t\t\tawait viewPreloaderService.isCacheReady();\n\t\t\t\t\tthis.oCacheHandlerService = oCacheHandlerService;\n\t\t\t\t\treturn oCacheHandlerService.validateCacheKey(sCacheIdentifier, oComponent, oAppComponent.getEnvironmentCapabilities());\n\t\t\t\t})\n\t\t);\n\t\taServiceDependencies.push(\n\t\t\tVersionInfo.load()\n\t\t\t\t.then(function (oInfo) {\n\t\t\t\t\tlet sTimestamp = \"\";\n\t\t\t\t\tif (!oInfo.libraries) {\n\t\t\t\t\t\tsTimestamp = (Core as { buildinfo?: { buildtime?: string } })?.buildinfo?.buildtime ?? \"<NOVALUE>\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\toInfo.libraries.forEach(function (oLibrary) {\n\t\t\t\t\t\t\tsTimestamp += oLibrary.buildTimestamp;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn sTimestamp;\n\t\t\t\t})\n\t\t\t\t.catch(function () {\n\t\t\t\t\treturn \"<NOVALUE>\";\n\t\t\t\t})\n\t\t);\n\t\tthis.initPromise = Promise.all(aServiceDependencies)\n\t\t\t.then(async (aDependenciesResult: unknown[]) => {\n\t\t\t\tconst oResourceModel = aDependenciesResult[0] as ResourceModel;\n\t\t\t\tconst sCacheKey = aDependenciesResult[1] as string | null;\n\t\t\t\tconst [TemplateConverter, MetaModelConverter] = await requireDependencies([\n\t\t\t\t\t\"sap/fe/core/converters/TemplateConverter\",\n\t\t\t\t\t\"sap/fe/core/converters/MetaModelConverter\"\n\t\t\t\t]);\n\t\t\t\treturn this.createView(\n\t\t\t\t\toResourceModel,\n\t\t\t\t\tsStableId,\n\t\t\t\t\tsCacheKey,\n\t\t\t\t\tTemplateConverter as typeof _TemplateConverter,\n\t\t\t\t\tMetaModelConverter as typeof _MetaModelConverter\n\t\t\t\t);\n\t\t\t})\n\t\t\t.then(function (sCacheKey: string | void | null): void {\n\t\t\t\tconst oCacheHandlerService = ServiceFactoryRegistry.get(\"sap.fe.core.services.CacheHandlerService\").getInstance(oMetaModel);\n\t\t\t\toCacheHandlerService.invalidateIfNeeded(\n\t\t\t\t\tsCacheKey,\n\t\t\t\t\tsCacheIdentifier,\n\t\t\t\t\toComponent,\n\t\t\t\t\toAppComponent.getEnvironmentCapabilities()\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t});\n\t}\n\n\t/**\n\t * Refresh the current view using the same configuration as before.\n\t * @param oComponent\n\t * @returns A promise indicating when the view is refreshed\n\t */\n\tasync refreshView(oComponent: TemplateComponent): Promise<void> {\n\t\tconst oRootView = oComponent.getRootControl();\n\t\tif (oRootView) {\n\t\t\toRootView.destroy();\n\t\t} else if (this.oView) {\n\t\t\tthis.oView.destroy();\n\t\t}\n\t\treturn this.createView(this.resourceModel, this.stableId, \"\", this.TemplateConverter!, this.MetaModelConverter!)\n\t\t\t.then(function (): void {\n\t\t\t\toComponent.getUIArea().invalidate();\n\t\t\t\treturn;\n\t\t\t})\n\t\t\t.catch(function (oError: unknown) {\n\t\t\t\toComponent.getUIArea().invalidate();\n\t\t\t\tLog.error(oError as string);\n\t\t\t});\n\t}\n\n\t_getViewSettings(\n\t\tpreprocessorContext: XMLPreprocessorContext,\n\t\tmServiceSettings: TemplatedViewServiceSettings,\n\t\toComponent: EnhanceWithUI5<TemplateComponent>,\n\t\tmViewData: ViewData,\n\t\tsCacheKey: string | null,\n\t\toPageModel: JSONModel,\n\t\toResourceModel: ResourceModel\n\t): ViewSettings {\n\t\tlet viewType: string | undefined = mServiceSettings.viewType || oComponent.getViewType() || \"XML\";\n\t\tif (viewType !== \"XML\") {\n\t\t\tviewType = undefined;\n\t\t}\n\t\treturn {\n\t\t\ttype: viewType,\n\t\t\tpreprocessors: {\n\t\t\t\txml: preprocessorContext,\n\t\t\t\tcontrols: {}\n\t\t\t},\n\t\t\tid: mViewData.stableId,\n\t\t\tviewName: mServiceSettings.viewName || oComponent.getViewName?.(),\n\t\t\tviewData: mViewData,\n\t\t\tcache: {\n\t\t\t\tkeys: [sCacheKey],\n\t\t\t\tadditionalData: {\n\t\t\t\t\t// We store the page model data in the `additionalData` of the view cache, this way it is always in sync\n\t\t\t\t\tgetAdditionalCacheData: (): unknown => {\n\t\t\t\t\t\treturn oPageModel.getData();\n\t\t\t\t\t},\n\t\t\t\t\tsetAdditionalCacheData: (value: object): void => {\n\t\t\t\t\t\toPageModel.setData(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tmodels: {\n\t\t\t\t\"sap.fe.i18n\": oResourceModel\n\t\t\t},\n\t\t\theight: \"100%\"\n\t\t};\n\t}\n\n\tasync _createErrorPage(\n\t\treason: Error,\n\t\toViewSettings: ViewSettings,\n\t\tviewName: string,\n\t\toComponent: TemplateComponent,\n\t\tsCacheKey: string | null\n\t): Promise<string> {\n\t\t// just replace the view name and a model containing the reason, but keep the other settings\n\t\tLog.error(reason.message, reason);\n\t\toViewSettings.viewName = viewName;\n\t\tif (oViewSettings.preprocessors) {\n\t\t\t(oViewSettings.preprocessors as Record<string, { models: Record<string, Model> }>).xml.models[\"error\"] = new JSONModel(reason);\n\t\t}\n\n\t\treturn oComponent.runAsOwner(async () => {\n\t\t\treturn View.create(oViewSettings).then((oView: View) => {\n\t\t\t\tthis.oView = oView;\n\t\t\t\tthis.oView.setModel(new JSONModel(this.oView), \"$view\");\n\t\t\t\toComponent.setAggregation(\"rootControl\", this.oView);\n\t\t\t\toComponent.getAppComponent().getRootControl().getController().getPlaceholder().hideRootPlaceholder();\n\t\t\t\treturn sCacheKey;\n\t\t\t});\n\t\t}) as Promise<string>;\n\t}\n\n\tasync createView(\n\t\toResourceModel: ResourceModel,\n\t\tsStableId: string,\n\t\tsCacheKey: string | null,\n\t\tTemplateConverter: typeof _TemplateConverter,\n\t\tMetaModelConverter: typeof _MetaModelConverter\n\t): Promise<string | null | void> {\n\t\tthis.resourceModel = oResourceModel;\n\t\tthis.stableId = sStableId;\n\t\tthis.TemplateConverter = TemplateConverter;\n\t\tthis.MetaModelConverter = MetaModelConverter;\n\t\tconst oContext = this.getContext();\n\t\tconst mServiceSettings = oContext.settings;\n\t\tconst sConverterType = mServiceSettings.converterType;\n\t\tconst oComponent = oContext.scopeObject as EnhanceWithUI5<TemplateComponent>;\n\t\tconst oAppComponent = CommonUtils.getAppComponent(oComponent);\n\t\tlet sFullContextPath: string =\n\t\t\toAppComponent.getRoutingService().getTargetInformationFor(oComponent)?.options?.settings?.fullContextPath ?? \"\";\n\t\tif (!sFullContextPath) {\n\t\t\t// if the context path couldn't be retrieved from the routing service, try to get it from the component itself\n\t\t\tsFullContextPath = oComponent.getContextPath() ?? \"\";\n\t\t}\n\t\tconst oMetaModel = oAppComponent.getMetaModel();\n\t\tconst oManifestContent = oAppComponent.getManifest();\n\t\tconst oDeviceModel = new JSONModel(Device).setDefaultBindingMode(\"OneWay\");\n\t\tconst oManifestModel = new JSONModel(oManifestContent);\n\t\tlet oPageModel: TemplateModel, oViewDataModel: Model, mViewData: ViewData;\n\t\t// Load the index for the additional building blocks which is responsible for initializing them\n\t\ttry {\n\t\t\tconst oRoutingService = await oAppComponent.getService(\"routingService\");\n\t\t\t// Retrieve the viewLevel for the component\n\t\t\tconst oTargetInfo = oRoutingService.getTargetInformationFor(oComponent);\n\t\t\tconst mOutbounds =\n\t\t\t\t(oManifestContent[\"sap.app\"] &&\n\t\t\t\t\toManifestContent[\"sap.app\"].crossNavigation &&\n\t\t\t\t\toManifestContent[\"sap.app\"].crossNavigation.outbounds) ||\n\t\t\t\t{};\n\t\t\tconst mNavigation = oComponent.getNavigation() || {};\n\t\t\tconst convertedMetadata = MetaModelConverter.convertTypes(\n\t\t\t\toMetaModel,\n\t\t\t\toAppComponent.getEnvironmentCapabilities().getCapabilities()\n\t\t\t);\n\t\t\tthis._enhanceNavigationConfig(mNavigation, mOutbounds, convertedMetadata, sStableId);\n\t\t\tconst definitionContext = new DefinitionContext(convertedMetadata);\n\t\t\tdefinitionContext.addApplicationManifest(oManifestContent as SAPJSONSchemaForWebApplicationManifestFile);\n\n\t\t\tmViewData = {\n\t\t\t\tappComponent: oAppComponent,\n\t\t\t\tnavigation: mNavigation,\n\t\t\t\tviewLevel: oTargetInfo?.viewLevel,\n\t\t\t\tstableId: sStableId,\n\t\t\t\tcontentDensities: oManifestContent[\"sap.ui5\"]?.contentDensities,\n\t\t\t\tresourceModel: oResourceModel,\n\t\t\t\tfullContextPath: sFullContextPath,\n\t\t\t\tisDesktop: Device.system.desktop,\n\t\t\t\tisPhone: Device.system.phone,\n\t\t\t\tconverterType: TemplateType.FreeStylePage\n\t\t\t};\n\t\t\tif (oComponent.getViewData) {\n\t\t\t\tObject.assign(mViewData, oComponent.getViewData());\n\t\t\t\tmViewData = TemplatedViewServiceFactory.setPageConfigurationChanges(\n\t\t\t\t\toManifestContent,\n\t\t\t\t\tmViewData,\n\t\t\t\t\toAppComponent,\n\t\t\t\t\tthis.pageId\n\t\t\t\t);\n\t\t\t}\n\t\t\tmViewData.isShareButtonVisibleForMyInbox = TemplatedViewServiceFactory.getShareButtonVisibilityForMyInbox(oAppComponent);\n\t\t\tconst oShellServices = oAppComponent.getShellServices();\n\t\t\tmViewData.converterType = sConverterType;\n\t\t\tmViewData.shellContentDensity = oShellServices.getContentDensity();\n\t\t\tconst sapfeManifestContent = oManifestContent[\"sap.fe\"];\n\t\t\tmViewData.sapFeManifestConfiguration = oManifestContent[\"sap.fe\"];\n\t\t\tmViewData.retrieveTextFromValueList = sapfeManifestContent?.form\n\t\t\t\t? sapfeManifestContent?.form?.retrieveTextFromValueList\n\t\t\t\t: undefined;\n\t\t\toViewDataModel = new JSONModel(mViewData);\n\t\t\tif (mViewData.controlConfiguration) {\n\t\t\t\tfor (const sAnnotationPath in mViewData.controlConfiguration) {\n\t\t\t\t\tif (sAnnotationPath.includes(\"[\")) {\n\t\t\t\t\t\tconst sTargetAnnotationPath = resolveDynamicExpression(sAnnotationPath, oMetaModel);\n\t\t\t\t\t\tmViewData.controlConfiguration[sTargetAnnotationPath] = mViewData.controlConfiguration[sAnnotationPath];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toPageModel = new TemplateModel(() => {\n\t\t\t\ttry {\n\t\t\t\t\tconst oDiagnostics = oAppComponent.getDiagnostics();\n\t\t\t\t\tconst iIssueCount = oDiagnostics.getIssues().length;\n\t\t\t\t\tconst oConverterPageModel = TemplateConverter.convertPage(\n\t\t\t\t\t\tsConverterType,\n\t\t\t\t\t\toMetaModel,\n\t\t\t\t\t\tmViewData as unknown as BaseManifestSettings,\n\t\t\t\t\t\tnew ManifestWrapper(mViewData as unknown as BaseManifestSettings, oAppComponent),\n\t\t\t\t\t\toDiagnostics,\n\t\t\t\t\t\tsFullContextPath,\n\t\t\t\t\t\toAppComponent.getEnvironmentCapabilities().getCapabilities(),\n\t\t\t\t\t\toComponent\n\t\t\t\t\t);\n\t\t\t\t\tif (oConverterPageModel && oComponent._getControllerName()) {\n\t\t\t\t\t\t(oConverterPageModel as { controllerName?: string }).controllerName = oComponent._getControllerName();\n\t\t\t\t\t}\n\t\t\t\t\tconst aIssues = oDiagnostics.getIssues();\n\t\t\t\t\tconst aAddedIssues = aIssues.slice(iIssueCount);\n\t\t\t\t\tif (aAddedIssues.length > 0) {\n\t\t\t\t\t\tLog.warning(\n\t\t\t\t\t\t\t\"Some issues have been detected in your project, please check the UI5 support assistant rule for sap.fe.core\"\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn oConverterPageModel;\n\t\t\t\t} catch (error: unknown) {\n\t\t\t\t\tLog.error(error as string, error as string);\n\t\t\t\t\treturn {};\n\t\t\t\t}\n\t\t\t}, oMetaModel);\n\t\t\tconst aSplitPath = sFullContextPath.split(\"/\");\n\t\t\tconst sEntitySetPath = this._getFullPathToEntitySet(aSplitPath, oMetaModel);\n\t\t\tconst preprocessorContext: XMLPreprocessorContext = {\n\t\t\t\t\tbindingContexts: {\n\t\t\t\t\t\tentitySet: sEntitySetPath ? oMetaModel.createBindingContext(sEntitySetPath) : null,\n\t\t\t\t\t\tfullContextPath: sFullContextPath ? oMetaModel.createBindingContext(sFullContextPath) : null,\n\t\t\t\t\t\tcontextPath: sFullContextPath ? oMetaModel.createBindingContext(sFullContextPath) : null,\n\t\t\t\t\t\tconverterContext: oPageModel.createBindingContext(\"/\", undefined, { noResolve: true }),\n\t\t\t\t\t\tviewData: mViewData ? oViewDataModel.createBindingContext(\"/\") : null\n\t\t\t\t\t},\n\t\t\t\t\tmodels: {\n\t\t\t\t\t\tentitySet: oMetaModel,\n\t\t\t\t\t\tfullContextPath: oMetaModel,\n\t\t\t\t\t\tcontextPath: oMetaModel,\n\t\t\t\t\t\t\"sap.fe.i18n\": oResourceModel,\n\t\t\t\t\t\tmetaModel: oMetaModel,\n\t\t\t\t\t\tdevice: oDeviceModel,\n\t\t\t\t\t\tmanifest: oManifestModel,\n\t\t\t\t\t\tconverterContext: oPageModel as unknown as JSONModel,\n\t\t\t\t\t\tviewData: oViewDataModel\n\t\t\t\t\t},\n\t\t\t\t\tfullContextPath: sFullContextPath,\n\t\t\t\t\tgetConvertedMetadata: () => convertedMetadata,\n\t\t\t\t\tgetDefinitionContext(): DefinitionContext {\n\t\t\t\t\t\treturn definitionContext;\n\t\t\t\t\t},\n\t\t\t\t\tgetDefinitionForPage(): DefinitionPage {\n\t\t\t\t\t\tlet fullContextPath = sFullContextPath;\n\t\t\t\t\t\tif (fullContextPath.endsWith(\"/\")) {\n\t\t\t\t\t\t\tfullContextPath = fullContextPath.substring(0, fullContextPath.length - 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn definitionContext.getPageFor(fullContextPath);\n\t\t\t\t\t},\n\t\t\t\t\tappComponent: oAppComponent,\n\t\t\t\t\tviewId: sStableId\n\t\t\t\t},\n\t\t\t\toViewSettings = this._getViewSettings(\n\t\t\t\t\tpreprocessorContext,\n\t\t\t\t\tmServiceSettings,\n\t\t\t\t\toComponent,\n\t\t\t\t\tmViewData,\n\t\t\t\t\tsCacheKey,\n\t\t\t\t\toPageModel as unknown as JSONModel,\n\t\t\t\t\toResourceModel\n\t\t\t\t);\n\t\t\t// Setting the pageModel on the component for potential reuse\n\t\t\toComponent.setModel(oPageModel as unknown as JSONModel, \"_pageModel\");\n\t\t\toComponent.setPreprocessorContext(preprocessorContext);\n\t\t\treturn oComponent.runAsOwner(async () => {\n\t\t\t\treturn View.create(oViewSettings)\n\n\t\t\t\t\t.then((oView: View) => {\n\t\t\t\t\t\tthis.oView = oView;\n\t\t\t\t\t\tconst viewJSONModel = new JSONModel(this.oView);\n\t\t\t\t\t\tModelHelper.enhanceViewJSONModel(viewJSONModel as JSONModel & { _getObject: Function });\n\t\t\t\t\t\tthis.oView.setModel(viewJSONModel, \"$view\");\n\t\t\t\t\t\tthis.oView.setModel(oViewDataModel, \"viewData\");\n\t\t\t\t\t\toComponent.setAggregation(\"rootControl\", this.oView);\n\t\t\t\t\t\treturn sCacheKey;\n\t\t\t\t\t})\n\t\t\t\t\t.catch(async (reason: Error) =>\n\t\t\t\t\t\tthis._createErrorPage(\n\t\t\t\t\t\t\treason,\n\t\t\t\t\t\t\toViewSettings,\n\t\t\t\t\t\t\tmServiceSettings.errorViewName || \"sap.fe.core.services.view.TemplatingErrorPage\",\n\t\t\t\t\t\t\toComponent,\n\t\t\t\t\t\t\tsCacheKey\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t.catch((e) => Log.error(e.message, e));\n\t\t\t});\n\t\t} catch (error: unknown) {\n\t\t\tLog.error((error as Error).message, error as string);\n\t\t\tthrow new Error(`Error while creating view : ${error}`);\n\t\t}\n\t}\n\n\tprivate _enhanceNavigationConfig(\n\t\tmNavigation: Record<string, NavigationConfiguration>,\n\t\tmOutbounds: Record<string, ManifestOutboundEntry>,\n\t\tconvertedTypes: ConvertedMetadata,\n\t\tstableId: string\n\t): void {\n\t\tObject.keys(mNavigation).forEach(function (navigationObjectKey: string): void {\n\t\t\tconst navigationObject = mNavigation[navigationObjectKey];\n\t\t\tlet outboundConfig;\n\t\t\tif (navigationObject.detail && navigationObject.detail.outbound && mOutbounds[navigationObject.detail.outbound]) {\n\t\t\t\toutboundConfig = mOutbounds[navigationObject.detail.outbound];\n\t\t\t\tnavigationObject.detail.outboundDetail = {\n\t\t\t\t\tsemanticObject: outboundConfig.semanticObject,\n\t\t\t\t\taction: outboundConfig.action,\n\t\t\t\t\tparameters: outboundConfig.parameters\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (navigationObject.detail.availability) {\n\t\t\t\tregisterVirtualProperty(\n\t\t\t\t\tconvertedTypes,\n\t\t\t\t\t\"routeNavigable-\" + navigationObject.detail.route,\n\t\t\t\t\t() => {\n\t\t\t\t\t\treturn resolveBindingString(navigationObject.detail.availability!);\n\t\t\t\t\t},\n\t\t\t\t\tstableId\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (navigationObject.create && navigationObject.create.outbound && mOutbounds[navigationObject.create.outbound]) {\n\t\t\t\toutboundConfig = mOutbounds[navigationObject.create.outbound];\n\t\t\t\tnavigationObject.create.outboundDetail = {\n\t\t\t\t\tsemanticObject: outboundConfig.semanticObject,\n\t\t\t\t\taction: outboundConfig.action,\n\t\t\t\t\tparameters: outboundConfig.parameters\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _getFullPathToEntitySet(aSplitPath: string[], oMetaModel: ODataMetaModel): string {\n\t\treturn aSplitPath.reduce(function (sPathSoFar: string, sNextPathPart: string): string {\n\t\t\tif (sNextPathPart === \"\") {\n\t\t\t\treturn sPathSoFar;\n\t\t\t}\n\t\t\tif (sPathSoFar === \"\") {\n\t\t\t\tsPathSoFar = `/${sNextPathPart}`;\n\t\t\t} else {\n\t\t\t\tconst oTarget = oMetaModel.getObject(`${sPathSoFar}/$NavigationPropertyBinding/${sNextPathPart}`);\n\t\t\t\tif (oTarget && Object.keys(oTarget).length > 0) {\n\t\t\t\t\tsPathSoFar += \"/$NavigationPropertyBinding\";\n\t\t\t\t}\n\t\t\t\tsPathSoFar += `/${sNextPathPart}`;\n\t\t\t}\n\t\t\treturn sPathSoFar;\n\t\t}, \"\");\n\t}\n\n\tgetView(): View {\n\t\treturn this.oView;\n\t}\n\n\tgetInterface(): TemplatedViewService {\n\t\treturn this;\n\t}\n\n\texit(): void {\n\t\t// Deregister global instance\n\t\tif (this.oResourceModelService) {\n\t\t\tthis.oResourceModelService.destroy();\n\t\t}\n\t\tif (this.oCacheHandlerService) {\n\t\t\tthis.oCacheHandlerService.destroy();\n\t\t}\n\t\tthis.oFactory.removeGlobalInstance();\n\t}\n}\nexport class TemplatedViewServiceFactory extends ServiceFactory<TemplatedViewServiceSettings> {\n\t_oInstanceRegistry: Record<string, TemplatedViewService> = {};\n\n\tstatic iCreatingViews: 0;\n\n\tasync createInstance(oServiceContext: ServiceContext<TemplatedViewServiceSettings>): Promise<TemplatedViewService> {\n\t\tTemplatedViewServiceFactory.iCreatingViews++;\n\t\tconst oTemplatedViewService = new TemplatedViewService(Object.assign({ factory: this }, oServiceContext));\n\t\treturn oTemplatedViewService.initPromise.then(function () {\n\t\t\tTemplatedViewServiceFactory.iCreatingViews--;\n\t\t\treturn oTemplatedViewService;\n\t\t});\n\t}\n\n\tremoveGlobalInstance(): void {\n\t\tthis._oInstanceRegistry = {};\n\t}\n\n\t/**\n\t * This function checks if the component data specifies the visibility of the 'Share' button and returns true or false based on the visibility.\n\t * @param appComponent Specifies the app component\n\t * @returns Boolean value as true or false based whether the 'Share' button should be visible or not\n\t */\n\tstatic getShareButtonVisibilityForMyInbox(appComponent: AppComponent): boolean | undefined {\n\t\tconst componentData: ComponentData = appComponent.getComponentData();\n\t\tif (componentData !== undefined && componentData.feEnvironment) {\n\t\t\treturn componentData.feEnvironment.getShareControlVisibility();\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tstatic getNumberOfViewsInCreationState(): number {\n\t\treturn TemplatedViewServiceFactory.iCreatingViews;\n\t}\n\n\t/**\n\t * Sets page configuration changes for a specific page identified by its ID.\n\t * @param manifest The manifest content object containing configuration details.\n\t * @param viewData The view data object representing the current state of the view.\n\t * @param appComponent The application component instance.\n\t * @param pageId The unique identifier of the page for which configuration changes are to be applied.\n\t * @returns The updated view data object reflecting the applied changes.\n\t */\n\tstatic setPageConfigurationChanges(\n\t\tmanifest: ManifestContent,\n\t\tviewData: ViewData,\n\t\tappComponent: AppComponent,\n\t\tpageId: string\n\t): ViewData {\n\t\tconst targets = manifest?.[\"sap.ui5\"]?.routing?.targets ?? {};\n\t\tlet realTarget = \"\";\n\t\tfor (const targetToFind in targets) {\n\t\t\tif (targets[targetToFind].id === pageId) {\n\t\t\t\trealTarget = targetToFind;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (realTarget === \"\") {\n\t\t\trealTarget = pageId;\n\t\t}\n\t\tconst actualSettings = manifest?.[\"sap.ui5\"]?.routing?.targets?.[realTarget]?.options?.settings || {};\n\t\treturn applyPageConfigurationChanges(actualSettings, viewData, appComponent, pageId);\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"TemplatedViewServiceFactory-dbg.js"}