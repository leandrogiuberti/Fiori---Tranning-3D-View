{"version":3,"names":["TriggerType","_exports","StandardActions","channel","feature","triggerSurvey","areaId","triggerName","payload","parameters","EventBus","getInstance","publish","triggerConfiguredSurvey","view","action","triggerType","feedbackConfig","getViewData","content","feedback","surveyConfig"],"sourceRoot":".","sources":["Feedback.ts"],"sourcesContent":["import type { FEView } from \"sap/fe/core/BaseController\";\nimport EventBus from \"sap/ui/core/EventBus\";\n\nexport type SurveyConfig = {\n\tareaId: string;\n\ttriggerName: string;\n\tpayload?: object;\n};\n\nexport enum TriggerType {\n\taction = \"actions\",\n\tstandardAction = \"standardActions\"\n}\n\nexport enum StandardActions {\n\tsave = \"save\"\n}\n\n/**\n * Asking user for feedback\n *\n */\n\nconst channel = \"sap.feedback\";\nconst feature = \"inapp.feature\";\n\n/**\n * Triggers a feedback survey.\n * @param areaId The area id of the application.\n * @param triggerName The name of the trigger.\n * @param payload A flat list of key/values to be passed to the survey.\n */\nexport function triggerSurvey(areaId: string, triggerName: string, payload: unknown): void {\n\tconst parameters = {\n\t\tareaId: areaId,\n\t\ttriggerName: triggerName,\n\t\tpayload: payload\n\t};\n\tEventBus.getInstance().publish(channel, feature, parameters);\n}\n\n/**\n * Triggers a feedback survey configured for a given action on the current page.\n * @param view The view which is checked for a feedback configuration.\n * @param action The name of the action.\n * @param triggerType The trigger type of the action (actions|standardActions)\n */\nexport function triggerConfiguredSurvey(view: FEView, action: string, triggerType: TriggerType): void {\n\tconst feedbackConfig = view.getViewData()?.content?.feedback;\n\tconst surveyConfig = feedbackConfig?.[triggerType]?.[action];\n\tif (surveyConfig) {\n\t\ttriggerSurvey(surveyConfig.areaId, surveyConfig.triggerName, surveyConfig.payload);\n\t}\n}\n"],"mappings":";;;;;;;;MASYA,WAAW,0BAAXA,WAAW;IAAXA,WAAW;IAAXA,WAAW;IAAA,OAAXA,WAAW;EAAA;EAAAC,QAAA,CAAAD,WAAA,GAAAA,WAAA;EAAA,IAKXE,eAAe,0BAAfA,eAAe;IAAfA,eAAe;IAAA,OAAfA,eAAe;EAAA;EAI3B;AACA;AACA;AACA;EAHAD,QAAA,CAAAC,eAAA,GAAAA,eAAA;EAKA,MAAMC,OAAO,GAAG,cAAc;EAC9B,MAAMC,OAAO,GAAG,eAAe;;EAE/B;AACA;AACA;AACA;AACA;AACA;EACO,SAASC,aAAaA,CAACC,MAAc,EAAEC,WAAmB,EAAEC,OAAgB,EAAQ;IAC1F,MAAMC,UAAU,GAAG;MAClBH,MAAM,EAAEA,MAAM;MACdC,WAAW,EAAEA,WAAW;MACxBC,OAAO,EAAEA;IACV,CAAC;IACDE,QAAQ,CAACC,WAAW,CAAC,CAAC,CAACC,OAAO,CAACT,OAAO,EAAEC,OAAO,EAAEK,UAAU,CAAC;EAC7D;;EAEA;AACA;AACA;AACA;AACA;AACA;EALAR,QAAA,CAAAI,aAAA,GAAAA,aAAA;EAMO,SAASQ,uBAAuBA,CAACC,IAAY,EAAEC,MAAc,EAAEC,WAAwB,EAAQ;IACrG,MAAMC,cAAc,GAAGH,IAAI,CAACI,WAAW,CAAC,CAAC,EAAEC,OAAO,EAAEC,QAAQ;IAC5D,MAAMC,YAAY,GAAGJ,cAAc,GAAGD,WAAW,CAAC,GAAGD,MAAM,CAAC;IAC5D,IAAIM,YAAY,EAAE;MACjBhB,aAAa,CAACgB,YAAY,CAACf,MAAM,EAAEe,YAAY,CAACd,WAAW,EAAEc,YAAY,CAACb,OAAO,CAAC;IACnF;EACD;EAACP,QAAA,CAAAY,uBAAA,GAAAA,uBAAA;EAAA,OAAAZ,QAAA;AAAA","ignoreList":[],"file":"Feedback-dbg.js"}