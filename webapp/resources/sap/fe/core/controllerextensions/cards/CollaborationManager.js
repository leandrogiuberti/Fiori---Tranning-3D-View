/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/base/ClassSupport","sap/fe/core/CommonUtils","sap/ui/core/mvc/ControllerExtension"],function(e,t,i){"use strict";var r,n,o,a,s,p,c,l;var u={};var d=e.publicExtension;var f=e.methodOverride;var b=e.extensible;var v=e.defineUI5Class;function g(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,y(e,t)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function h(e,t,i,r,n){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce(function(i,r){return r(e,t,i)||i},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer?(Object.defineProperty(e,t,o),null):o}let C=(r=v("sap.fe.core.controllerextensions.cards.CollaborationManager"),n=f(),o=f("_routing"),a=f(),s=d(),p=b("AfterAsync"),r(c=(l=function(e){function i(){var t;t=e.call(this)||this;t.init();return t}u=i;g(i,e);var r=i.prototype;r.onInit=function e(){const i=async function(){this.feView=this.base.getView();this.appComponent=t.getAppComponent(this.feView);const e=await this.appComponent.getService("environmentCapabilities");this.serviceEnabled=true;if(!this.appComponent["isCollaborationManagerServiceEnabled"]()||!e.getCapabilities().InsightsSupported||!await e.isInsightsEnabled()){this.serviceEnabled=false}};i.apply(this)};r.onAfterBinding=async function e(){if(this.serviceEnabled===false){return}await this.getService().connect(this.appComponent.getId(),async()=>{const e=[];await this.collectAvailableCards(e);const t=this.updateCards(e);const i=this.appComponent.getId();this.getService().addCardsToCollaborationManager(t,i,this.base.getView().getId())})};r.updateCards=function e(t){return t.reduce((e,t)=>{if(t?.card["sap.app"]?.id){e[t?.card["sap.app"]?.id]=t}return e},{})};r.onExit=function e(){this.getService().unregisterProvider()};r.getService=function e(){return this.appComponent.getCollaborationManagerService()};r.collectAvailableCards=async function e(t){return Promise.resolve()};return i}(i),h(l.prototype,"onInit",[n],Object.getOwnPropertyDescriptor(l.prototype,"onInit"),l.prototype),h(l.prototype,"onAfterBinding",[o],Object.getOwnPropertyDescriptor(l.prototype,"onAfterBinding"),l.prototype),h(l.prototype,"onExit",[a],Object.getOwnPropertyDescriptor(l.prototype,"onExit"),l.prototype),h(l.prototype,"collectAvailableCards",[s,p],Object.getOwnPropertyDescriptor(l.prototype,"collectAvailableCards"),l.prototype),l))||c);u=C;return u},false);
//# sourceMappingURL=CollaborationManager.js.map