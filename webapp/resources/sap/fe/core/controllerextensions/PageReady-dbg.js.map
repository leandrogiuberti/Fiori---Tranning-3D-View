{"version":3,"names":["PageReadyControllerExtension","_dec","defineUI5Class","_dec2","methodOverride","_dec3","_dec4","publicExtension","_dec5","finalExtension","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","privateExtension","_dec20","extensible","OverrideExecution","Instead","_dec21","_class","_class2","_ControllerExtension","_this","call","pageReadyTimeoutDefault","_inheritsLoose","_proto","prototype","onInit","_nbWaits","_oEventProvider","EventProvider","view","getView","appComponent","CommonUtils","getAppComponent","pageComponent","Component","getOwnerComponentFor","manifestContent","getManifest","pageReadyTimeout","attachContainerDefined","oEvent","registerContainer","getParameter","rootControlController","getRootControl","getController","placeholder","getPlaceholder","isPlaceholderDebugEnabled","attachEvent","getPlaceholderDebugStats","iPageReadyEventTimestamp","Date","now","iHeroesBatchReceivedEventTimestamp","queryWatcher","DataQueryWatcher","checkPageReadyDebounced","bind","onExit","_oAppComponent","_oContainer","_fnContainerDelegate","removeEventDelegate","waitFor","oPromise","finally","setTimeout","catch","onRouteMatched","_bIsPageReady","onRouteMatchedFinished","onAfterBindingPromise","registerAggregatedControls","mainBindingContext","mainObjectBinding","getBinding","registerBinding","promises","controls","findAggregatedObjects","forEach","element","objectBinding","getObjectBinding","aBindingKeys","Object","keys","mBindingInfos","propertyName","listBinding","binding","isA","tableOrChart","getContent","getChartControl","getBindingContext","bTablesChartsLoaded","push","registerTableOrChart","registerFilterBar","onAfterBinding","oBindingContext","parameters","pageReadyTimeoutTimer","clearTimeout","deferredCreation","isContextExpected","Log","error","fireEvent","disableAnimation","bHasContext","_bAfterBindingAlreadyApplied","attachEventOnce","undefined","reset","Promise","resolve","aTableChartInitializedPromises","length","all","isPageReady","waitPageReady","sEventId","oData","fnFunction","oListener","detachEvent","oContainer","onBeforeShow","bShown","onBeforeHide","onAfterShow","then","addEventDelegate","bFromNav","arguments","pageReadyTimer","model","getModel","timeOut","getOptimisticBatchEnabler","_checkPageReady","fnUIUpdated","Rendering","isPending","detachUIUpdated","_bWaitingForRefresh","checkUIUpdated","isDataReceived","resetDataReceived","attachUIUpdated","TemplatedViewServiceFactory","getNumberOfViewsInCreationState","isSearchPending","forcePageReady","ControllerExtension","_applyDecoratedDescriptor","getOwnPropertyDescriptor"],"sourceRoot":".","sources":["PageReady.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport { defineUI5Class, extensible, finalExtension, methodOverride, privateExtension, publicExtension } from \"sap/fe/base/ClassSupport\";\nimport type AppComponent from \"sap/fe/core/AppComponent\";\nimport type PageController from \"sap/fe/core/PageController\";\nimport DataQueryWatcher from \"sap/fe/core/controllerextensions/pageReady/DataQueryWatcher\";\nimport { TemplatedViewServiceFactory } from \"sap/fe/core/services/TemplatedViewServiceFactory\";\nimport type ChartBlock from \"sap/fe/macros/Chart\";\nimport type FilterBar from \"sap/fe/macros/controls/FilterBar\";\nimport type TableAPI from \"sap/fe/macros/table/TableAPI\";\nimport type Event from \"sap/ui/base/Event\";\nimport EventProvider from \"sap/ui/base/EventProvider\";\nimport type ManagedObject from \"sap/ui/base/ManagedObject\";\nimport Component from \"sap/ui/core/Component\";\nimport type ComponentContainer from \"sap/ui/core/ComponentContainer\";\nimport type Control from \"sap/ui/core/Control\";\nimport Rendering from \"sap/ui/core/Rendering\";\nimport ControllerExtension from \"sap/ui/core/mvc/ControllerExtension\";\nimport OverrideExecution from \"sap/ui/core/mvc/OverrideExecution\";\nimport type View from \"sap/ui/core/mvc/View\";\nimport type Binding from \"sap/ui/model/Binding\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport CommonUtils from \"../CommonUtils\";\n\ntype RenderingEx = typeof Rendering & {\n\tattachUIUpdated: Function;\n\tdetachUIUpdated: Function;\n};\n@defineUI5Class(\"sap.fe.core.controllerextensions.PageReady\")\nclass PageReadyControllerExtension extends ControllerExtension {\n\tprotected base!: PageController;\n\n\tprivate _oEventProvider!: EventProvider;\n\n\tprivate view!: View;\n\n\tprivate appComponent!: AppComponent;\n\n\tprivate pageComponent!: Component;\n\n\tprivate _oContainer!: Control;\n\n\tprivate _bAfterBindingAlreadyApplied!: boolean;\n\n\tprivate _fnContainerDelegate?: object;\n\n\tprivate _nbWaits!: number;\n\n\tprivate _bIsPageReady!: boolean;\n\n\tprivate _bWaitingForRefresh!: boolean;\n\n\tprivate bShown!: boolean;\n\n\tprivate bHasContext!: boolean;\n\n\tprivate bTablesChartsLoaded?: boolean;\n\n\tprivate pageReadyTimer: number | undefined;\n\n\tprivate queryWatcher!: DataQueryWatcher;\n\n\tprivate onAfterBindingPromise!: Promise<void>;\n\n\tprivate pageReadyTimeoutDefault = 7000;\n\n\tprivate pageReadyTimeoutTimer?: number;\n\n\tprivate pageReadyTimeout?: number;\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t@methodOverride()\n\tpublic onInit(): void {\n\t\tthis._nbWaits = 0;\n\t\tthis._oEventProvider = this._oEventProvider ? this._oEventProvider : new EventProvider();\n\t\tthis.view = this.getView();\n\n\t\tthis.appComponent = CommonUtils.getAppComponent(this.view);\n\t\tthis.pageComponent = Component.getOwnerComponentFor(this.view) as Component;\n\t\tconst manifestContent = this.appComponent.getManifest();\n\t\tthis.pageReadyTimeout = manifestContent[\"sap.ui5\"]?.pageReadyTimeout ?? this.pageReadyTimeoutDefault;\n\n\t\tif (this.pageComponent?.attachContainerDefined) {\n\t\t\tthis.pageComponent.attachContainerDefined((oEvent: Event<{ container: ComponentContainer }>) =>\n\t\t\t\tthis.registerContainer(oEvent.getParameter(\"container\"))\n\t\t\t);\n\t\t} else {\n\t\t\tthis.registerContainer(this.view);\n\t\t}\n\n\t\tconst rootControlController = this.appComponent.getRootControl().getController();\n\t\tconst placeholder = rootControlController?.getPlaceholder?.();\n\t\tif (placeholder?.isPlaceholderDebugEnabled()) {\n\t\t\tthis.attachEvent(\n\t\t\t\t\"pageReady\",\n\t\t\t\tnull,\n\t\t\t\t() => {\n\t\t\t\t\tplaceholder.getPlaceholderDebugStats().iPageReadyEventTimestamp = Date.now();\n\t\t\t\t},\n\t\t\t\tthis\n\t\t\t);\n\t\t\tthis.attachEvent(\n\t\t\t\t\"heroesBatchReceived\",\n\t\t\t\tnull,\n\t\t\t\t() => {\n\t\t\t\t\tplaceholder.getPlaceholderDebugStats().iHeroesBatchReceivedEventTimestamp = Date.now();\n\t\t\t\t},\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\tthis.queryWatcher = new DataQueryWatcher(this._oEventProvider, this.checkPageReadyDebounced.bind(this));\n\t}\n\n\t@methodOverride()\n\tpublic onExit(): void {\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t// @ts-ignore\n\t\tdelete this._oAppComponent;\n\t\tif (this._oContainer && this._fnContainerDelegate) {\n\t\t\tthis._oContainer.removeEventDelegate(this._fnContainerDelegate);\n\t\t}\n\t}\n\n\t@publicExtension()\n\t@finalExtension()\n\tpublic waitFor(oPromise: Promise<unknown>): void {\n\t\tthis._nbWaits++;\n\t\toPromise\n\t\t\t.finally(() => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis._nbWaits--;\n\t\t\t\t}, 0);\n\t\t\t})\n\t\t\t.catch(null);\n\t}\n\n\t@methodOverride(\"_routing\")\n\tonRouteMatched(): void {\n\t\tthis._bIsPageReady = false;\n\t}\n\n\t@methodOverride(\"_routing\")\n\tasync onRouteMatchedFinished(): Promise<void> {\n\t\tawait this.onAfterBindingPromise;\n\t\tthis.checkPageReadyDebounced();\n\t}\n\n\tpublic registerAggregatedControls(mainBindingContext?: Context): Promise<void>[] {\n\t\tif (mainBindingContext) {\n\t\t\tconst mainObjectBinding = mainBindingContext.getBinding();\n\t\t\tthis.queryWatcher.registerBinding(mainObjectBinding);\n\t\t}\n\n\t\tconst promises: Promise<void>[] = [];\n\t\tconst controls = this.getView().findAggregatedObjects(true);\n\n\t\tcontrols.forEach((element: ManagedObject & { mBindingInfos?: Record<string, { binding?: Binding }> }): void => {\n\t\t\tconst objectBinding = element.getObjectBinding();\n\t\t\tif (objectBinding) {\n\t\t\t\t// Register on all object binding (mostly used on object pages)\n\t\t\t\tthis.queryWatcher.registerBinding(objectBinding);\n\t\t\t} else {\n\t\t\t\tconst aBindingKeys = Object.keys(element?.mBindingInfos ?? {});\n\t\t\t\taBindingKeys.forEach((propertyName) => {\n\t\t\t\t\tconst listBinding = element?.mBindingInfos?.[propertyName].binding;\n\n\t\t\t\t\tif (listBinding && listBinding.isA<ODataListBinding>(\"sap.ui.model.odata.v4.ODataListBinding\")) {\n\t\t\t\t\t\tthis.queryWatcher.registerBinding(listBinding);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t// This is dirty but MDCTables and MDCCharts have a weird loading lifecycle\n\t\t\tif (element.isA<TableAPI>(\"sap.fe.macros.table.TableAPI\") || element.isA<ChartBlock>(\"sap.fe.macros.Chart\")) {\n\t\t\t\tconst tableOrChart = (element as TableAPI).getContent?.() ?? (element as ChartBlock).getChartControl();\n\n\t\t\t\tif (tableOrChart.getBindingContext() !== null) {\n\t\t\t\t\t// Only consider non lazy loaded tables and charts\n\t\t\t\t\tthis.bTablesChartsLoaded = false;\n\t\t\t\t\tpromises.push(this.queryWatcher.registerTableOrChart(tableOrChart));\n\t\t\t\t}\n\t\t\t} else if (element.isA<FilterBar>(\"sap.fe.macros.controls.FilterBar\")) {\n\t\t\t\tthis.queryWatcher.registerFilterBar(element);\n\t\t\t}\n\t\t});\n\n\t\treturn promises;\n\t}\n\n\t@methodOverride(\"_routing\")\n\tonAfterBinding(oBindingContext?: Context, parameters?: { deferredCreation?: boolean }): void {\n\t\t// In case the page is rebind we need to clear the timer (eg: in FCL, the user can select 2 items successively in the list report)\n\t\tif (this.pageReadyTimeoutTimer) {\n\t\t\tclearTimeout(this.pageReadyTimeoutTimer);\n\t\t}\n\n\t\tif (!parameters?.deferredCreation || !this.isContextExpected() || oBindingContext) {\n\t\t\tthis.pageReadyTimeoutTimer = setTimeout(() => {\n\t\t\t\tLog.error(\n\t\t\t\t\t`The PageReady Event was not fired within the ${this.pageReadyTimeout} ms timeout . It has been forced. Please contact your application developer for further analysis`\n\t\t\t\t);\n\t\t\t\tthis._oEventProvider.fireEvent(\"pageReady\");\n\t\t\t}, this.pageReadyTimeout);\n\t\t} else {\n\t\t\t// We are in deferred creation with no context, we need to wait for the context to be set by the create dialog\n\t\t\t// We also need to disable the placeholder animation\n\t\t\tconst rootControlController = this.appComponent.getRootControl().getController();\n\t\t\tconst placeholder = rootControlController?.getPlaceholder?.();\n\t\t\tplaceholder?.disableAnimation();\n\t\t}\n\n\t\tif (this.isContextExpected() && !oBindingContext) {\n\t\t\t// Force to mention we are expecting data\n\t\t\tthis.bHasContext = false;\n\t\t\treturn;\n\t\t} else {\n\t\t\tthis.bHasContext = true;\n\t\t}\n\n\t\tif (this._bAfterBindingAlreadyApplied) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._bAfterBindingAlreadyApplied = true;\n\n\t\tthis.attachEventOnce(\"pageReady\", null, () => {\n\t\t\tclearTimeout(this.pageReadyTimeoutTimer);\n\t\t\tthis.pageReadyTimeoutTimer = undefined;\n\t\t\tthis._bAfterBindingAlreadyApplied = false;\n\t\t\tthis.queryWatcher.reset();\n\t\t});\n\n\t\tthis.onAfterBindingPromise = new Promise<void>(async (resolve): Promise<void> => {\n\t\t\tconst aTableChartInitializedPromises = this.registerAggregatedControls(oBindingContext);\n\n\t\t\tif (aTableChartInitializedPromises.length > 0) {\n\t\t\t\tawait Promise.all(aTableChartInitializedPromises);\n\t\t\t\tthis.bTablesChartsLoaded = true;\n\t\t\t\tthis.checkPageReadyDebounced();\n\t\t\t\tresolve();\n\t\t\t} else {\n\t\t\t\tthis.checkPageReadyDebounced();\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t}\n\n\t@publicExtension()\n\t@finalExtension()\n\tpublic isPageReady(): boolean {\n\t\treturn this._bIsPageReady;\n\t}\n\n\t@publicExtension()\n\t@finalExtension()\n\tpublic async waitPageReady(): Promise<void> {\n\t\treturn new Promise((resolve) => {\n\t\t\tif (this.isPageReady()) {\n\t\t\t\tresolve();\n\t\t\t} else {\n\t\t\t\tif (!this._oEventProvider) {\n\t\t\t\t\tthis._oEventProvider = new EventProvider();\n\t\t\t\t}\n\t\t\t\tthis.attachEventOnce(\n\t\t\t\t\t\"pageReady\",\n\t\t\t\t\tnull,\n\t\t\t\t\t() => {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t},\n\t\t\t\t\tthis\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\t@publicExtension()\n\t@finalExtension()\n\tpublic attachEventOnce(sEventId: string, oData: object | null, fnFunction?: Function, oListener?: object): EventProvider {\n\t\t// eslint-disable-next-line prefer-rest-params\n\t\treturn this._oEventProvider.attachEventOnce(sEventId, oData as object, fnFunction as Function, oListener);\n\t}\n\n\t@publicExtension()\n\t@finalExtension()\n\tpublic attachEvent(sEventId: string, oData: object | null, fnFunction: Function, oListener: object): EventProvider {\n\t\t// eslint-disable-next-line prefer-rest-params\n\t\treturn this._oEventProvider.attachEvent(sEventId, oData as object, fnFunction, oListener);\n\t}\n\n\t@publicExtension()\n\t@finalExtension()\n\tpublic detachEvent(sEventId: string, fnFunction: Function): EventProvider {\n\t\t// eslint-disable-next-line prefer-rest-params\n\t\treturn this._oEventProvider.detachEvent(sEventId, fnFunction);\n\t}\n\n\tprivate registerContainer(oContainer: Control): void {\n\t\tthis._oContainer = oContainer;\n\t\tthis._fnContainerDelegate = {\n\t\t\tonBeforeShow: (): void => {\n\t\t\t\tthis.bShown = false;\n\t\t\t\tthis._bIsPageReady = false;\n\t\t\t},\n\t\t\tonBeforeHide: (): void => {\n\t\t\t\tthis.bShown = false;\n\t\t\t\tthis._bIsPageReady = false;\n\t\t\t},\n\t\t\tonAfterShow: (): void => {\n\t\t\t\tthis.bShown = true;\n\t\t\t\tthis.onAfterBindingPromise?.then((): void => {\n\t\t\t\t\treturn this.checkPageReadyDebounced(true);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\tthis._oContainer?.addEventDelegate(this._fnContainerDelegate, this);\n\t}\n\n\t@privateExtension()\n\t@extensible(OverrideExecution.Instead)\n\tpublic isContextExpected(): boolean {\n\t\treturn false;\n\t}\n\n\t@publicExtension()\n\tpublic checkPageReadyDebounced(bFromNav = false): void {\n\t\tif (this.pageReadyTimer) {\n\t\t\tclearTimeout(this.pageReadyTimer);\n\t\t}\n\t\tconst model = this.getView().getModel() as ODataModel;\n\t\tlet timeOut: number;\n\t\t// isContextExpected = true when Object Page is displayed\n\t\tif ((model && model.getOptimisticBatchEnabler() === null) || this.isContextExpected()) {\n\t\t\ttimeOut = 200;\n\t\t} else {\n\t\t\t// We are waiting less time because data is already there (optimisticBatch)\n\t\t\ttimeOut = 20;\n\t\t}\n\t\tthis.pageReadyTimer = setTimeout(() => {\n\t\t\tthis._checkPageReady(bFromNav);\n\t\t}, timeOut) as unknown as number;\n\t}\n\n\tpublic _checkPageReady(bFromNav = false): void {\n\t\tconst fnUIUpdated = (): void => {\n\t\t\t// Wait until the UI is no longer dirty\n\t\t\tif (!Rendering.isPending()) {\n\t\t\t\t(Rendering as RenderingEx).detachUIUpdated(fnUIUpdated);\n\t\t\t\tthis._bWaitingForRefresh = false;\n\t\t\t\tthis.checkPageReadyDebounced();\n\t\t\t}\n\t\t};\n\n\t\t// In case UIUpdate does not get called, check if UI is not dirty and then call _checkPageReady\n\t\tconst checkUIUpdated = (): void => {\n\t\t\tif (Rendering.isPending()) {\n\t\t\t\tsetTimeout(checkUIUpdated, 500);\n\t\t\t} else if (this._bWaitingForRefresh) {\n\t\t\t\tthis._bWaitingForRefresh = false;\n\t\t\t\t(Rendering as RenderingEx).detachUIUpdated(fnUIUpdated);\n\t\t\t\tthis.checkPageReadyDebounced();\n\t\t\t}\n\t\t};\n\n\t\tif (\n\t\t\tthis.bShown &&\n\t\t\tthis.queryWatcher.isDataReceived() !== false &&\n\t\t\tthis.bTablesChartsLoaded !== false &&\n\t\t\t(!this.isContextExpected() || this.bHasContext) // Either no context is expected or there is one\n\t\t) {\n\t\t\tif (this.queryWatcher.isDataReceived() === true && !bFromNav && !this._bWaitingForRefresh && Rendering.isPending()) {\n\t\t\t\t// If we requested data we get notified as soon as the data arrived, so before the next rendering tick\n\t\t\t\tthis.queryWatcher.resetDataReceived();\n\t\t\t\tthis._bWaitingForRefresh = true;\n\t\t\t\t(Rendering as RenderingEx).attachUIUpdated(fnUIUpdated);\n\t\t\t\tsetTimeout(checkUIUpdated, 500);\n\t\t\t} else if (\n\t\t\t\t(!this._bWaitingForRefresh && Rendering.isPending()) ||\n\t\t\t\tthis._nbWaits !== 0 ||\n\t\t\t\tTemplatedViewServiceFactory.getNumberOfViewsInCreationState() > 0 ||\n\t\t\t\tthis.queryWatcher.isSearchPending()\n\t\t\t) {\n\t\t\t\tthis._bWaitingForRefresh = true;\n\t\t\t\t(Rendering as RenderingEx).attachUIUpdated(fnUIUpdated);\n\t\t\t\tsetTimeout(checkUIUpdated, 500);\n\t\t\t} else if (!this._bWaitingForRefresh) {\n\t\t\t\t// In the case we're not waiting for any data (navigating back to a page we already have loaded)\n\t\t\t\t// just wait for a frame to fire the event.\n\t\t\t\tthis._bIsPageReady = true;\n\t\t\t\tthis._oEventProvider.fireEvent(\"pageReady\");\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Forces the 'pageReady' event to be sent.\n\t */\n\tforcePageReady(): void {\n\t\tthis._oEventProvider.fireEvent(\"pageReady\");\n\t}\n}\n\nexport default PageReadyControllerExtension;\n"],"mappings":"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","ignoreList":[],"file":"PageReady-dbg.js"}