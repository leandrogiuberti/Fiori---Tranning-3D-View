{"version":3,"file":"Share.js","names":["oLastFocusedControl","ShareUtils","_dec","defineUI5Class","_dec2","methodOverride","_dec3","_dec4","publicExtension","_dec5","finalExtension","_dec6","_dec7","extensible","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_class","_class2","_BaseControllerExtens","call","this","_inheritsLoose","_proto","prototype","onInit","shareInfoModel","JSONModel","saveAsTileClicked","collaborationInfo","url","appTitle","subTitle","minifyUrlForChat","appId","base","getView","setModel","onExit","getModel","destroy","openShareSheet","oControl","_openShareSheetImpl","getCardDefinition","async","Promise","resolve","undefined","adaptShareMetadata","oShareMetadata","manifest","getAppComponent","getManifest","id","title","document","setProperty","by","oShareActionSheet","hashChangerInstance","HashChanger","getInstance","sHash","getHash","sBasePath","hrefForAppSpecificHash","window","location","origin","pathname","search","hash","getShellServices","getTitle","email","jam","tile","subtitle","icon","queryUrl","setShareEmailData","shareActionSheet","oModelData","oShareMailModel","oNewMailData","extend","getData","setData","getController","share","fragmentController","shareEmailPressed","oMailModel","oMailData","oResource","Library","getResourceBundleFor","sEmailSubject","getText","library","URLHelper","triggerEmail","shareMSTeamsPressed","msTeamsModel","msTeamsData","message","newWindowOpen","open","opener","encodeURIComponent","onSaveTilePress","setTimeout","Element","getElementById","attachAfterClose","focus","shareJamPressed","_doOpenJamShareDialog","onCancelPressed","close","setShareSheet","oShareSheet","shareSheet","oThis","oPreprocessorSettings","bindingContexts","createBindingContext","models","oTileData","substring","indexOf","oShareModel","_setStaticShareData","oNewData","openBy","sFragmentName","oPopoverFragment","XMLTemplateProcessor","loadTemplate","oFragment","XMLPreprocessor","process","name","Fragment","load","definition","controller","addDependent","oError","Log","error","getTeamsUrl","shareUrl","appUrl","getInframeUrl","shareModel","ObjectPath","get","fnGetUser","isJamActive","sap","ui","require","text","sUrl","oShareDialog","Component","create","settings","object","_triggerEmail","shareMetadata","_adaptShareMetadata","_triggerShareToJam","_saveAsTile","source","internalAddBookmarkButton","getDependents","setTitle","setSubtitle","setTileIcon","setCustomUrl","setServiceUrl","setDataSource","type","odataVersion","firePress","BaseControllerExtension","_applyDecoratedDescriptor","Object","getOwnPropertyDescriptor"],"sources":["./Share.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport ObjectPath from \"sap/base/util/ObjectPath\";\nimport extend from \"sap/base/util/extend\";\nimport { defineUI5Class, extensible, finalExtension, methodOverride, publicExtension } from \"sap/fe/base/ClassSupport\";\nimport type ActionSheet from \"sap/m/ActionSheet\";\nimport type Dialog from \"sap/m/Dialog\";\nimport library from \"sap/m/library\";\nimport type { $ComponentSettings } from \"sap/ui/core/Component\";\nimport Component from \"sap/ui/core/Component\";\nimport type Control from \"sap/ui/core/Control\";\nimport Element from \"sap/ui/core/Element\";\nimport Fragment from \"sap/ui/core/Fragment\";\nimport type Item from \"sap/ui/core/Item\";\nimport Library from \"sap/ui/core/Lib\";\nimport XMLTemplateProcessor from \"sap/ui/core/XMLTemplateProcessor\";\nimport HashChanger from \"sap/ui/core/routing/HashChanger\";\nimport XMLPreprocessor from \"sap/ui/core/util/XMLPreprocessor\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type AddBookmarkButton from \"sap/ushell/ui/footerbar/AddBookmarkButton\";\nimport type { IAdaptiveCard } from \"types/adaptiveCard_types\";\nimport type PageController from \"../PageController\";\nimport BaseControllerExtension from \"./BaseControllerExtension\";\n\nlet oLastFocusedControl: Control;\n\nexport type ShareMetadata = {\n\turl: string;\n\ttitle: string;\n\temail: { url: string; title: string };\n\tjam: { url?: string; title: string };\n\ttile: { url?: string; title: string; subtitle: string; icon?: string; queryUrl?: string };\n};\n\n/**\n * A controller extension offering hooks into the routing flow of the application\n * @hideconstructor\n * @public\n * @since 1.86.0\n */\n@defineUI5Class(\"sap.fe.core.controllerextensions.Share\")\nclass ShareUtils extends BaseControllerExtension {\n\tprotected base!: PageController;\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t@methodOverride()\n\tonInit(): void {\n\t\tconst shareInfoModel: JSONModel = new JSONModel({\n\t\t\tsaveAsTileClicked: false,\n\t\t\tcollaborationInfo: {\n\t\t\t\turl: \"\",\n\t\t\t\tappTitle: \"\",\n\t\t\t\tsubTitle: \"\",\n\t\t\t\tminifyUrlForChat: true,\n\t\t\t\tappId: \"\"\n\t\t\t}\n\t\t});\n\t\tthis.base.getView().setModel(shareInfoModel, \"shareInfo\");\n\t}\n\n\t@methodOverride()\n\tonExit(): void {\n\t\tconst shareInfoModel = this.base?.getView()?.getModel(\"shareInfo\") as JSONModel | undefined;\n\t\tif (shareInfoModel) {\n\t\t\tshareInfoModel.destroy();\n\t\t}\n\t}\n\n\t/**\n\t * Opens the share sheet.\n\t * @param oControl The control to which the ActionSheet is opened.\n\t * @public\n\t * @since 1.93.0\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\topenShareSheet(oControl: Control): void {\n\t\tthis._openShareSheetImpl(oControl);\n\t}\n\n\t/**\n\t * Get adaptive card definition.\n\t * @returns Adaptive card definition or a Promise resolving the Adaptive card definition\n\t */\n\t@publicExtension()\n\t@extensible(\"AfterAsync\")\n\tasync getCardDefinition(): Promise<IAdaptiveCard | undefined> {\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\t/**\n\t * Adapts the metadata used while sharing the page URL via 'Send Email', 'Share in SAP Jam', and 'Save as Tile'.\n\t * @param oShareMetadata Object containing the share metadata.\n\t * @param oShareMetadata.url Default URL that will be used via 'Send Email', 'Share in SAP Jam', and 'Save as Tile'\n\t * @param oShareMetadata.title Default title that will be used as 'email subject' in 'Send Email', 'share text' in 'Share in SAP Jam' and 'title' in 'Save as Tile'\n\t * @param oShareMetadata.email Email-specific metadata.\n\t * @param oShareMetadata.email.url URL that will be used specifically for 'Send Email'. This takes precedence over oShareMetadata.url.\n\t * @param oShareMetadata.email.title Title that will be used as \"email subject\" in 'Send Email'. This takes precedence over oShareMetadata.title.\n\t * @param oShareMetadata.jam SAP Jam-specific metadata.\n\t * @param oShareMetadata.jam.url URL that will be used specifically for 'Share in SAP Jam'. This takes precedence over oShareMetadata.url.\n\t * @param oShareMetadata.jam.title Title that will be used as 'share text' in 'Share in SAP Jam'. This takes precedence over oShareMetadata.title.\n\t * @param oShareMetadata.tile Save as Tile-specific metadata.\n\t * @param oShareMetadata.tile.url URL that will be used specifically for 'Save as Tile'. This takes precedence over oShareMetadata.url.\n\t * @param oShareMetadata.tile.title Title to be used for the tile. This takes precedence over oShareMetadata.title.\n\t * @param oShareMetadata.tile.subtitle Subtitle to be used for the tile.\n\t * @param oShareMetadata.tile.icon Icon to be used for the tile.\n\t * @param oShareMetadata.tile.queryUrl Query URL of an OData service from which data for a dynamic tile is read.\n\t * @returns Share Metadata or a Promise resolving the Share Metadata\n\t * @public\n\t * @since 1.93.0\n\t */\n\t@publicExtension()\n\t@extensible(\"AfterAsync\")\n\tadaptShareMetadata(oShareMetadata: {\n\t\turl: string;\n\t\ttitle: string;\n\t\temail: { url: string; title: string };\n\t\tjam: { url?: string; title: string };\n\t\ttile: { url?: string; title: string; subtitle: string; icon?: string; queryUrl?: string };\n\t}): ShareMetadata | Promise<ShareMetadata> {\n\t\tconst shareInfoModel = this.base?.getView()?.getModel(\"shareInfo\") as JSONModel | undefined;\n\t\tconst manifest = this.base.getAppComponent().getManifest();\n\t\tconst appId = manifest?.[\"sap.app\"]?.id;\n\t\tconst appTitle = manifest?.[\"sap.app\"]?.title || document.title;\n\t\tif (shareInfoModel) {\n\t\t\tshareInfoModel.setProperty(\"/collaborationInfo/appId\", appId);\n\t\t\tshareInfoModel.setProperty(\"/collaborationInfo/url\", oShareMetadata.url);\n\t\t\tshareInfoModel.setProperty(\"/collaborationInfo/appTitle\", appTitle);\n\t\t}\n\t\treturn oShareMetadata;\n\t}\n\n\tasync _openShareSheetImpl(by: Control & { shareSheet?: ActionSheet }): Promise<void> {\n\t\tlet oShareActionSheet: ActionSheet;\n\t\tconst hashChangerInstance = HashChanger.getInstance();\n\t\tconst sHash = hashChangerInstance.getHash();\n\t\tconst sBasePath = hashChangerInstance.hrefForAppSpecificHash ? hashChangerInstance.hrefForAppSpecificHash(\"\") : \"\";\n\t\tconst oShareMetadata = {\n\t\t\turl:\n\t\t\t\twindow.location.origin +\n\t\t\t\twindow.location.pathname +\n\t\t\t\twindow.location.search +\n\t\t\t\t(sHash ? sBasePath + sHash : window.location.hash),\n\t\t\ttitle: await this.base.getAppComponent()?.getShellServices()?.getTitle(),\n\t\t\temail: {\n\t\t\t\turl: \"\",\n\t\t\t\ttitle: \"\"\n\t\t\t},\n\t\t\tjam: {\n\t\t\t\turl: \"\",\n\t\t\t\ttitle: \"\"\n\t\t\t},\n\t\t\ttile: {\n\t\t\t\turl: \"\",\n\t\t\t\ttitle: \"\",\n\t\t\t\tsubtitle: \"\",\n\t\t\t\ticon: \"\",\n\t\t\t\tqueryUrl: \"\"\n\t\t\t}\n\t\t};\n\t\toLastFocusedControl = by;\n\n\t\tconst setShareEmailData = function (shareActionSheet: ActionSheet, oModelData: object): void {\n\t\t\tconst oShareMailModel = shareActionSheet.getModel(\"shareData\") as JSONModel;\n\t\t\tconst oNewMailData = extend(oShareMailModel.getData(), oModelData);\n\t\t\toShareMailModel.setData(oNewMailData);\n\t\t};\n\n\t\ttry {\n\t\t\tconst oModelData: ShareMetadata = await this.base.getView().getController()?.share?.adaptShareMetadata(oShareMetadata);\n\t\t\tconst fragmentController: Record<string, Function> = {\n\t\t\t\tshareEmailPressed: function (): void {\n\t\t\t\t\tconst oMailModel = oShareActionSheet.getModel(\"shareData\") as JSONModel;\n\t\t\t\t\tconst oMailData = oMailModel.getData();\n\t\t\t\t\tconst oResource = Library.getResourceBundleFor(\"sap.fe.core\")!;\n\t\t\t\t\tconst sEmailSubject = oMailData.email.title\n\t\t\t\t\t\t? oMailData.email.title\n\t\t\t\t\t\t: oResource.getText(\"T_SHARE_UTIL_HELPER_SAPFE_EMAIL_SUBJECT\", [oMailData.title]);\n\t\t\t\t\tlibrary.URLHelper.triggerEmail(undefined, sEmailSubject, oMailData.email.url ? oMailData.email.url : oMailData.url);\n\t\t\t\t},\n\t\t\t\tshareMSTeamsPressed: function (): void {\n\t\t\t\t\tconst msTeamsModel = oShareActionSheet.getModel(\"shareData\") as JSONModel;\n\t\t\t\t\tconst msTeamsData = msTeamsModel.getData();\n\t\t\t\t\tconst message = msTeamsData.email.title ? msTeamsData.email.title : msTeamsData.title;\n\t\t\t\t\tconst url = msTeamsData.email.url ? msTeamsData.email.url : msTeamsData.url;\n\t\t\t\t\tconst newWindowOpen = window.open(\"\", \"ms-teams-share-popup\", \"width=700,height=600\");\n\t\t\t\t\tnewWindowOpen!.opener = null;\n\t\t\t\t\tnewWindowOpen!.location = `https://teams.microsoft.com/share?msgText=${encodeURIComponent(\n\t\t\t\t\t\tmessage\n\t\t\t\t\t)}&href=${encodeURIComponent(url)}`;\n\t\t\t\t},\n\t\t\t\tonSaveTilePress: function (): void {\n\t\t\t\t\t// TODO it seems that the press event is executed before the dialog is available - adding a timeout is a cheap workaround\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t(Element.getElementById(\"bookmarkDialog\") as Dialog | undefined)?.attachAfterClose(function () {\n\t\t\t\t\t\t\toLastFocusedControl.focus();\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 0);\n\t\t\t\t},\n\t\t\t\tshareJamPressed: async (): Promise<void> => {\n\t\t\t\t\tawait this._doOpenJamShareDialog(\n\t\t\t\t\t\toModelData?.jam?.title ? oModelData.jam.title : oModelData.title,\n\t\t\t\t\t\toModelData?.jam?.url ? oModelData.jam.url : oModelData.url\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfragmentController.onCancelPressed = function (): void {\n\t\t\t\toShareActionSheet.close();\n\t\t\t};\n\n\t\t\tfragmentController.setShareSheet = function (oShareSheet: ActionSheet): void {\n\t\t\t\tby.shareSheet = oShareSheet;\n\t\t\t};\n\n\t\t\tconst oThis = new JSONModel({});\n\t\t\tconst oPreprocessorSettings = {\n\t\t\t\tbindingContexts: {\n\t\t\t\t\tthis: oThis.createBindingContext(\"/\")\n\t\t\t\t},\n\t\t\t\tmodels: {\n\t\t\t\t\tthis: oThis\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst oTileData = {\n\t\t\t\ttitle: oModelData?.tile?.title ? oModelData.tile.title : oModelData.title,\n\t\t\t\tsubtitle: oModelData?.tile?.subtitle,\n\t\t\t\ticon: oModelData?.tile?.icon,\n\t\t\t\turl: oModelData?.tile?.url ? oModelData.tile.url : oModelData.url.substring(oModelData.url.indexOf(\"#\")),\n\t\t\t\tqueryUrl: oModelData?.tile?.queryUrl\n\t\t\t};\n\t\t\tif (by.shareSheet) {\n\t\t\t\toShareActionSheet = by.shareSheet;\n\n\t\t\t\tconst oShareModel = oShareActionSheet.getModel(\"share\") as JSONModel;\n\t\t\t\tthis._setStaticShareData(oShareModel);\n\t\t\t\tconst oNewData = extend(oShareModel.getData(), oTileData);\n\t\t\t\toShareModel.setData(oNewData);\n\t\t\t\tsetShareEmailData(oShareActionSheet, oModelData);\n\t\t\t\toShareActionSheet.openBy(by);\n\t\t\t} else {\n\t\t\t\tconst sFragmentName = \"sap.fe.macros.share.ShareSheet\";\n\t\t\t\tconst oPopoverFragment = XMLTemplateProcessor.loadTemplate(sFragmentName, \"fragment\");\n\n\t\t\t\ttry {\n\t\t\t\t\tconst oFragment = await XMLPreprocessor.process(oPopoverFragment, { name: sFragmentName }, oPreprocessorSettings);\n\t\t\t\t\toShareActionSheet = (await Fragment.load({\n\t\t\t\t\t\tdefinition: oFragment as unknown as string,\n\t\t\t\t\t\tcontroller: fragmentController\n\t\t\t\t\t})) as ActionSheet;\n\n\t\t\t\t\toShareActionSheet.setModel(new JSONModel(oTileData || {}), \"share\");\n\t\t\t\t\tconst oShareModel = oShareActionSheet.getModel(\"share\") as JSONModel;\n\t\t\t\t\tthis._setStaticShareData(oShareModel);\n\t\t\t\t\tconst oNewData = extend(oShareModel.getData(), oTileData);\n\t\t\t\t\toShareModel.setData(oNewData);\n\n\t\t\t\t\toShareActionSheet.setModel(new JSONModel(oModelData || {}), \"shareData\");\n\t\t\t\t\tsetShareEmailData(oShareActionSheet, oModelData);\n\n\t\t\t\t\tby.addDependent(oShareActionSheet);\n\t\t\t\t\toShareActionSheet.openBy(by);\n\t\t\t\t\tfragmentController.setShareSheet(oShareActionSheet);\n\t\t\t\t} catch (oError: unknown) {\n\t\t\t\t\tLog.error(\"Error while opening the share fragment\", oError as string);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (oError: unknown) {\n\t\t\tLog.error(\"Error while fetching the share model data\", oError as string);\n\t\t}\n\t}\n\n\t/**\n\t * This function returns the url based on iframe and non-iframe applications.\n\t * @param shareUrl The url to be shared.\n\t * @returns Url.\n\t */\n\tasync getTeamsUrl(shareUrl: string): Promise<string | undefined> {\n\t\tconst appUrl = await this.base.getAppComponent()?.getShellServices().getInframeUrl();\n\t\treturn appUrl ? appUrl : shareUrl;\n\t}\n\n\t_setStaticShareData(shareModel: JSONModel): void {\n\t\tconst oResource = Library.getResourceBundleFor(\"sap.fe.core\")!;\n\t\tshareModel.setProperty(\"/jamButtonText\", oResource.getText(\"T_COMMON_SAPFE_SHARE_JAM\"));\n\t\tshareModel.setProperty(\"/emailButtonText\", oResource.getText(\"T_SEMANTIC_CONTROL_SEND_EMAIL\"));\n\t\tshareModel.setProperty(\"/msTeamsShareButtonText\", oResource.getText(\"T_COMMON_SAPFE_SHARE_MSTEAMS\"));\n\t\t// Share to Microsoft Teams is feature which for now only gets enabled for selected customers.\n\t\t// The switch \"sapHorizonEnabled\" and check for it was aligned with the Fiori launchpad team.\n\t\tif (ObjectPath.get(\"sap-ushell-config.renderers.fiori2.componentData.config.sapHorizonEnabled\") === true) {\n\t\t\tshareModel.setProperty(\"/msTeamsVisible\", true);\n\t\t} else {\n\t\t\tshareModel.setProperty(\"/msTeamsVisible\", false);\n\t\t}\n\t\tconst fnGetUser = ObjectPath.get(\"sap.ushell.Container.getUser\");\n\t\tshareModel.setProperty(\"/jamVisible\", !!fnGetUser && fnGetUser().isJamActive());\n\t\tshareModel.setProperty(\"/saveAsTileVisible\", !!sap.ui.require(\"sap/ushell/Container\"));\n\t}\n\n\t//the actual opening of the JAM share dialog\n\tasync _doOpenJamShareDialog(text: string, sUrl?: string): Promise<void> {\n\t\tconst oShareDialog = await Component.create({\n\t\t\tname: \"sap.collaboration.components.fiori.sharing.dialog\",\n\t\t\tsettings: {\n\t\t\t\tobject: {\n\t\t\t\t\tid: sUrl,\n\t\t\t\t\tshare: text\n\t\t\t\t}\n\t\t\t} as $ComponentSettings\n\t\t});\n\t\t(oShareDialog as unknown as { open: Function }).open();\n\t}\n\n\t/**\n\t * Triggers the email flow.\n\t *\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\tasync _triggerEmail(): Promise<void> {\n\t\tconst shareMetadata: ShareMetadata = await this._adaptShareMetadata();\n\t\tconst oResource = Library.getResourceBundleFor(\"sap.fe.core\")!;\n\t\tconst sEmailSubject = shareMetadata.email.title\n\t\t\t? shareMetadata.email.title\n\t\t\t: oResource.getText(\"T_SHARE_UTIL_HELPER_SAPFE_EMAIL_SUBJECT\", [shareMetadata.title]);\n\t\tlibrary.URLHelper.triggerEmail(undefined, sEmailSubject, shareMetadata.email.url ? shareMetadata.email.url : shareMetadata.url);\n\t}\n\n\t/**\n\t * Triggers the share to jam flow.\n\t *\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\tasync _triggerShareToJam(): Promise<void> {\n\t\tconst shareMetadata: ShareMetadata = await this._adaptShareMetadata();\n\t\tawait this._doOpenJamShareDialog(\n\t\t\tshareMetadata.jam.title ? shareMetadata.jam.title : shareMetadata.title,\n\t\t\tshareMetadata.jam.url ? shareMetadata.jam.url : window.location.origin + window.location.pathname + shareMetadata.url\n\t\t);\n\t}\n\n\t/**\n\t * Triggers the save as tile flow.\n\t * @param [source]\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\tasync _saveAsTile(source: Item): Promise<void> {\n\t\tconst shareInfoModel = this.base?.getView()?.getModel(\"shareInfo\") as JSONModel | undefined;\n\t\tif (shareInfoModel) {\n\t\t\t// set the saveAsTileClicked flag to true when save as tile is clicked\n\t\t\tshareInfoModel.setProperty(\"/saveAsTileClicked\", true);\n\t\t}\n\t\tconst shareMetadata: ShareMetadata = await this._adaptShareMetadata(),\n\t\t\tinternalAddBookmarkButton = source.getDependents()[0] as AddBookmarkButton,\n\t\t\thashChangerInstance = HashChanger.getInstance(),\n\t\t\tsHash = hashChangerInstance.getHash(),\n\t\t\tsBasePath = hashChangerInstance.hrefForAppSpecificHash ? hashChangerInstance.hrefForAppSpecificHash(\"\") : \"\";\n\t\tshareMetadata.url = sHash ? sBasePath + sHash : window.location.hash;\n\n\t\t// set AddBookmarkButton properties\n\t\tinternalAddBookmarkButton.setTitle(shareMetadata.tile.title ? shareMetadata.tile.title : shareMetadata.title);\n\t\tinternalAddBookmarkButton.setSubtitle(shareMetadata.tile.subtitle);\n\t\tinternalAddBookmarkButton.setTileIcon(shareMetadata.tile.icon);\n\t\tinternalAddBookmarkButton.setCustomUrl(shareMetadata.tile.url ? shareMetadata.tile.url : shareMetadata.url);\n\t\tinternalAddBookmarkButton.setServiceUrl(shareMetadata.tile.queryUrl);\n\t\tinternalAddBookmarkButton.setDataSource({\n\t\t\ttype: \"OData\",\n\t\t\tsettings: {\n\t\t\t\todataVersion: \"4.0\"\n\t\t\t}\n\t\t});\n\n\t\t// once the service url is read, set the saveAsTileClicked flag to false\n\t\tif (shareInfoModel) {\n\t\t\tshareInfoModel.setProperty(\"/saveAsTileClicked\", false);\n\t\t}\n\n\t\t// addBookmarkButton fire press\n\t\tinternalAddBookmarkButton.firePress();\n\t}\n\n\t/**\n\t * Call the adaptShareMetadata extension.\n\t * @returns Share Metadata\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\tasync _adaptShareMetadata(): Promise<ShareMetadata> {\n\t\tconst hashChangerInstance = HashChanger.getInstance();\n\t\tconst sHash = encodeURIComponent(hashChangerInstance.getHash());\n\t\tconst sBasePath = hashChangerInstance.hrefForAppSpecificHash ? hashChangerInstance.hrefForAppSpecificHash(\"\") : \"\";\n\n\t\tconst oShareMetadata: ShareMetadata = {\n\t\t\turl:\n\t\t\t\twindow.location.origin +\n\t\t\t\twindow.location.pathname +\n\t\t\t\twindow.location.search +\n\t\t\t\t(sHash ? sBasePath + sHash : window.location.hash),\n\t\t\ttitle: await this.base.getAppComponent()?.getShellServices()?.getTitle(),\n\t\t\temail: {\n\t\t\t\turl: \"\",\n\t\t\t\ttitle: \"\"\n\t\t\t},\n\t\t\tjam: {\n\t\t\t\turl: \"\",\n\t\t\t\ttitle: \"\"\n\t\t\t},\n\t\t\ttile: {\n\t\t\t\turl: \"\",\n\t\t\t\ttitle: \"\",\n\t\t\t\tsubtitle: \"\",\n\t\t\t\ticon: \"\",\n\t\t\t\tqueryUrl: \"\"\n\t\t\t}\n\t\t};\n\t\treturn this.base.getView().getController().share.adaptShareMetadata(oShareMetadata);\n\t}\n}\n\nexport default ShareUtils;\n"],"mappings":"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","ignoreList":[]}