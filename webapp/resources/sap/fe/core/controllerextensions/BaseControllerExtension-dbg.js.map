{"version":3,"names":["BaseControllerExtension","_dec","defineUI5Class","_class","_ControllerExtension","_this","call","init","_exports","_inheritsLoose","_proto","prototype","getInterface","_this2","interfaceObj","metadata","getMetadata","allMethods","getAllMethods","methodHolder","methodName","method","overrideExecution","Object","defineProperty","configurable","set","v","push","get","methodArrays","reverse","result","_len","arguments","length","args","Array","_key","arg","apply","ControllerExtension"],"sourceRoot":".","sources":["BaseControllerExtension.ts"],"sourcesContent":["import { defineUI5Class } from \"sap/fe/base/ClassSupport\";\nimport type BaseObject from \"sap/ui/base/Object\";\nimport ControllerExtension from \"sap/ui/core/mvc/ControllerExtension\";\nimport type ControllerMetadata from \"sap/ui/core/mvc/ControllerMetadata\";\n/**\n * A base implementation for controller extension used internally in sap.fe for central functionalities.\n * @public\n * @since 1.118.0\n */\n@defineUI5Class(\"sap.fe.core.controllerextensions.BaseControllerExtension\")\nexport default class BaseControllerExtension extends ControllerExtension {\n\tconstructor() {\n\t\tsuper();\n\t\t(this as unknown as { init: Function }).init();\n\t}\n\n\t/**\n\t * This method is called when the controller extension is instantiated.\n\t * We need to override it for the specific handling for BeforeAsync and AfterAsync methods, otherwise the last level of extension just replace our implementation.\n\t * @returns The interface for this controller extension\n\t */\n\tgetInterface(): BaseObject {\n\t\tconst interfaceObj = super.getInterface();\n\t\tconst metadata = this.getMetadata() as ControllerMetadata;\n\t\tconst allMethods = metadata.getAllMethods();\n\t\tconst methodHolder: Record<string, Function[]> = {};\n\n\t\tfor (const methodName in allMethods) {\n\t\t\tconst method = allMethods[methodName];\n\t\t\tif (method.overrideExecution && (method.overrideExecution === \"AfterAsync\" || method.overrideExecution === \"BeforeAsync\")) {\n\t\t\t\tmethodHolder[methodName] = [(interfaceObj as unknown as Record<string, Function>)[methodName]];\n\t\t\t\tObject.defineProperty(interfaceObj, methodName, {\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\tset: (v: Function) => {\n\t\t\t\t\t\treturn methodHolder[methodName].push(v);\n\t\t\t\t\t},\n\t\t\t\t\tget: () => {\n\t\t\t\t\t\treturn async (...args: unknown[]) => {\n\t\t\t\t\t\t\tconst methodArrays = methodHolder[methodName];\n\t\t\t\t\t\t\tif (method.overrideExecution === \"BeforeAsync\") {\n\t\t\t\t\t\t\t\tmethodArrays.reverse();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlet result;\n\t\t\t\t\t\t\tfor (const arg of methodArrays) {\n\t\t\t\t\t\t\t\tresult = await arg.apply(this, args);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn interfaceObj;\n\t}\n}\n"],"mappings":";;;;;;;;;;;;EAIA;AACA;AACA;AACA;AACA;EAJA,IAMqBA,uBAAuB,IAAAC,IAAA,GAD3CC,cAAc,CAAC,0DAA0D,CAAC,EAAAD,IAAA,CAAAE,MAAA,0BAAAC,oBAAA;IAE1E,SAAAJ,wBAAA,EAAc;MAAA,IAAAK,KAAA;MACbA,KAAA,GAAAD,oBAAA,CAAAE,IAAA,KAAM,CAAC;MACPD,KAAA,CAAwCE,IAAI,CAAC,CAAC;MAAC,OAAAF,KAAA;IAChD;;IAEA;AACD;AACA;AACA;AACA;IAJCG,QAAA,GAAAR,uBAAA;IAAAS,cAAA,CAAAT,uBAAA,EAAAI,oBAAA;IAAA,IAAAM,MAAA,GAAAV,uBAAA,CAAAW,SAAA;IAAAD,MAAA,CAKAE,YAAY,GAAZ,SAAAA,YAAYA,CAAA,EAAe;MAAA,IAAAC,MAAA;MAC1B,MAAMC,YAAY,GAAAV,oBAAA,CAAAO,SAAA,CAASC,YAAY,CAAAN,IAAA,MAAE;MACzC,MAAMS,QAAQ,GAAG,IAAI,CAACC,WAAW,CAAC,CAAuB;MACzD,MAAMC,UAAU,GAAGF,QAAQ,CAACG,aAAa,CAAC,CAAC;MAC3C,MAAMC,YAAwC,GAAG,CAAC,CAAC;MAEnD,KAAK,MAAMC,UAAU,IAAIH,UAAU,EAAE;QACpC,MAAMI,MAAM,GAAGJ,UAAU,CAACG,UAAU,CAAC;QACrC,IAAIC,MAAM,CAACC,iBAAiB,KAAKD,MAAM,CAACC,iBAAiB,KAAK,YAAY,IAAID,MAAM,CAACC,iBAAiB,KAAK,aAAa,CAAC,EAAE;UAC1HH,YAAY,CAACC,UAAU,CAAC,GAAG,CAAEN,YAAY,CAAyCM,UAAU,CAAC,CAAC;UAC9FG,MAAM,CAACC,cAAc,CAACV,YAAY,EAAEM,UAAU,EAAE;YAC/CK,YAAY,EAAE,IAAI;YAClBC,GAAG,EAAGC,CAAW,IAAK;cACrB,OAAOR,YAAY,CAACC,UAAU,CAAC,CAACQ,IAAI,CAACD,CAAC,CAAC;YACxC,CAAC;YACDE,GAAG,EAAEA,CAAA,KAAM;cACV,OAAO,kBAA8B;gBACpC,MAAMC,YAAY,GAAGX,YAAY,CAACC,UAAU,CAAC;gBAC7C,IAAIC,MAAM,CAACC,iBAAiB,KAAK,aAAa,EAAE;kBAC/CQ,YAAY,CAACC,OAAO,CAAC,CAAC;gBACvB;gBACA,IAAIC,MAAM;gBAAC,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EALKC,IAAI,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;kBAAJF,IAAI,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;gBAAA;gBAMpB,KAAK,MAAMC,GAAG,IAAIT,YAAY,EAAE;kBAC/BE,MAAM,GAAG,MAAMO,GAAG,CAACC,KAAK,CAAC3B,MAAI,EAAEuB,IAAI,CAAC;gBACrC;gBACA,OAAOJ,MAAM;cACd,CAAC;YACF;UACD,CAAC,CAAC;QACH;MACD;MAEA,OAAOlB,YAAY;IACpB,CAAC;IAAA,OAAAd,uBAAA;EAAA,EA5CmDyC,mBAAmB,MAAAtC,MAAA;EAAAK,QAAA,GAAAR,uBAAA;EAAA,OAAAQ,QAAA;AAAA","ignoreList":[],"file":"BaseControllerExtension-dbg.js"}