{"version":3,"names":["InvocationGrouping","FELibrary","ODataStrictHandling","parameters","strictHandlingResolves","strictHandlingWarningMessages","canceled","isCanceled","contexts","length","binding","getBinding","isA","tableAPI","ElementRegistry","filter","element","getContent","getRowBinding","_exports","_proto","prototype","handleOdataStrictHandling","operationContextBinding","internalOperationsPromiseResolve","onContextValidation","messages412","arguments","undefined","handlingResolve","strictHandlingPromise","Promise","resolve","push","message","getType","MessageType","Error","Log","warning","additionalText","column","getIdentifierColumn","getContext","getObject","setAdditionalText","events","onResponse","manageStrictHandlingFails","messageHandling","hasTransitionErrorsOrWarnings","invocationGrouping","ChangeSet","displayMessages","strictHandlingResolve","messageModel","Messaging","getMessageModel","messagesInModel","getData","setData","concat","error","messages","actionName","ResourceModelHelper","getLocalizedText","label","appComponent","getDescription","getDescriptionUrl","displayMessageOnMessageBox","displayMessagesOnDialog","messageResolve","promise","resourceModel","getResourceModel","messageText","getMessage","identifierText","getAdditionalText","isMultiContext412","genericChangesetMessage","getText","warningMessageText","cancelButtonTxt","displayedMessage","tableTypeName","getTableDefinition","headerInfoTypeName","CommonUtils","getTranslatedTextFromExpBindingString","toString","MessageBox","title","actions","emphasizedAction","onClose","action","messageDialogModel","JSONModel","warningMessage","warningDesc","genericMessage","Message","type","Information","target","persistent","description","StrictDialog","messageObject","prepareMessageViewForDialog","onBeginButtonPress","handleMessageOnValidation","bind","onEndButtonPress","handleMessageOnCancel","open","removeBoundTransitionMessages","removeUnboundTransitionMessages","onValidation","information","contentWidth","onCancel"],"sourceRoot":".","sources":["ODataStrictHandling.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type AppComponent from \"sap/fe/core/AppComponent\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport ResourceModelHelper from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport FELibrary from \"sap/fe/core/library\";\nimport type TableAPI from \"sap/fe/macros/table/TableAPI\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport ElementRegistry from \"sap/ui/core/ElementRegistry\";\nimport Messaging from \"sap/ui/core/Messaging\";\nimport Message from \"sap/ui/core/message/Message\";\nimport MessageType from \"sap/ui/core/message/MessageType\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataContextBinding from \"sap/ui/model/odata/v4/ODataContextBinding\";\nimport StrictDialog from \"../../dialog/ODataStrictDialog\";\nimport messageHandling from \"../../messageHandler/messageHandling\";\nconst InvocationGrouping = FELibrary.InvocationGrouping;\n\nexport default class ODataStrictHandling {\n\tprivate strictHandlingResolves: { handlingResolve: (value: boolean) => void; onContextValidation: Function }[] = [];\n\n\tprivate strictHandlingWarningMessages: Message[] = [];\n\n\tprivate canceled = false;\n\n\tprivate readonly tableAPI: TableAPI | undefined;\n\n\t/**\n\t * Creates an instance of ODataStrictHandling.\n\t * This class is used to handle strict handling operations in OData V4.\n\t * It manages the responses from the OData service when strict handling is enabled,\n\t * and provides a way to display messages to the user when operations fail due to strict handling.\n\t * @param parameters The parameters for the strict handling.\n\t * @param parameters.appComponent The AppComponent instance.\n\t * @param parameters.contexts An array of Context instances used for the operation.\n\t * @param parameters.label A label for the operation, used in messages.\n\t * @param parameters.invocationGrouping Optional parameter to specify the grouping of the invocation (e.g., ChangeSet).\n\t * @param parameters.events The events for the strict handling\n\t * @param parameters.events.onResponse The event triggered when the backend returns 412 messages.\n\t * @param parameters.events.onCancel The event triggered when the strict handling is canceled by the end user.\n\t * @param parameters.events.onValidation The event triggered when the strict handling is validated by the end user.\n\t */\n\tconstructor(\n\t\tprivate readonly parameters: {\n\t\t\tappComponent: AppComponent;\n\t\t\tcontexts: Context[];\n\t\t\tlabel: string;\n\t\t\tinvocationGrouping?: string;\n\t\t\tevents?: {\n\t\t\t\tonResponse?: (messages: Message[]) => void;\n\t\t\t\tonCancel?: () => void;\n\t\t\t\tonValidation?: () => void;\n\t\t\t};\n\t\t}\n\t) {\n\t\tif (this.parameters.contexts.length) {\n\t\t\tconst binding = this.parameters.contexts[0].getBinding();\n\t\t\tif (binding?.isA(\"sap.ui.model.odata.v4.ODataListBinding\")) {\n\t\t\t\tthis.tableAPI = ElementRegistry.filter(\n\t\t\t\t\t(element) => element.isA<TableAPI>(\"sap.fe.macros.table.TableAPI\") && element.getContent()?.getRowBinding() === binding\n\t\t\t\t)[0] as TableAPI | undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync handleOdataStrictHandling(\n\t\toperationContextBinding: ODataContextBinding,\n\t\tinternalOperationsPromiseResolve: Function | undefined,\n\t\tonContextValidation: Function,\n\t\tmessages412: Message[] = []\n\t): Promise<boolean> {\n\t\tlet handlingResolve!: (value: boolean) => void;\n\t\tconst strictHandlingPromise = new Promise<boolean>(function (resolve) {\n\t\t\thandlingResolve = resolve;\n\t\t});\n\t\tthis.strictHandlingResolves.push({ handlingResolve, onContextValidation });\n\t\t// Find error message in the 412 response and raise warning.\n\t\tif (messages412.filter((message) => message.getType() === MessageType.Error).length) {\n\t\t\tLog.warning(\n\t\t\t\t\"Warning: 412 ('Pre-condition Check Failed due to strict-handling') returns messages of type error but only warning messages are appropriate!\"\n\t\t\t);\n\t\t}\n\t\tlet additionalText = \"\";\n\t\t// If there is more than one context we need the identifier. This would fix if the action is triggered via table chevron\n\t\tif (this.parameters.contexts.length > 1) {\n\t\t\tconst column = this.tableAPI?.getIdentifierColumn();\n\t\t\tif (typeof column === \"string\") {\n\t\t\t\tadditionalText = operationContextBinding.getContext()?.getObject(column);\n\t\t\t}\n\t\t}\n\t\t// set type and subtitle for all warning messages\n\t\tfor (const message of messages412) {\n\t\t\tmessage.setAdditionalText(additionalText);\n\t\t\tthis.strictHandlingWarningMessages.push(message);\n\t\t}\n\t\tthis.parameters.events?.onResponse?.(messages412);\n\t\tinternalOperationsPromiseResolve?.();\n\t\treturn strictHandlingPromise;\n\t}\n\n\tpublic isCanceled = (): boolean => {\n\t\treturn this.canceled;\n\t};\n\n\t/**\n\t * Manages the strict handling fails.\n\t * @returns The promise of the strict handling\n\t */\n\tpublic async manageStrictHandlingFails(): Promise<void> {\n\t\tif (this.strictHandlingResolves.length) {\n\t\t\ttry {\n\t\t\t\tif (\n\t\t\t\t\t(!messageHandling.hasTransitionErrorsOrWarnings() ||\n\t\t\t\t\t\tthis.parameters.invocationGrouping !== InvocationGrouping.ChangeSet) &&\n\t\t\t\t\tthis.strictHandlingWarningMessages.length\n\t\t\t\t) {\n\t\t\t\t\tawait this.displayMessages();\n\t\t\t\t} else {\n\t\t\t\t\tfor (const strictHandlingResolve of this.strictHandlingResolves) {\n\t\t\t\t\t\tstrictHandlingResolve.handlingResolve(false);\n\t\t\t\t\t}\n\t\t\t\t\tconst messageModel = Messaging.getMessageModel();\n\t\t\t\t\tconst messagesInModel = messageModel.getData();\n\t\t\t\t\tmessageModel.setData(messagesInModel.concat(this.strictHandlingWarningMessages));\n\t\t\t\t}\n\t\t\t} catch {\n\t\t\t\tLog.error(\"Re-triggering of strict handling operations failed\");\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async displayMessages(): Promise<void> {\n\t\tconst messages = this.strictHandlingWarningMessages;\n\t\tif (!messages.length) {\n\t\t\treturn;\n\t\t}\n\t\tconst actionName = ResourceModelHelper.getLocalizedText(this.parameters.label, this.parameters.appComponent);\n\t\treturn messages.length === 1 && !(messages[0].getDescription()?.length || messages[0].getDescriptionUrl()?.length)\n\t\t\t? this.displayMessageOnMessageBox(messages[0], actionName)\n\t\t\t: this.displayMessagesOnDialog(messages, actionName);\n\t}\n\n\tprivate async displayMessageOnMessageBox(message: Message, actionName: string): Promise<void> {\n\t\tlet messageResolve!: Function;\n\t\tconst promise = new Promise<void>((resolve) => {\n\t\t\tmessageResolve = resolve;\n\t\t});\n\t\tconst resourceModel = ResourceModelHelper.getResourceModel(this.parameters.appComponent);\n\t\tconst messageText = message.getMessage();\n\t\tconst identifierText = message.getAdditionalText();\n\t\tconst isMultiContext412 = this.parameters.contexts.length > 1;\n\t\tconst genericChangesetMessage = resourceModel.getText(\"C_COMMON_DIALOG_CANCEL_SINGLE_MESSAGE_TEXT\");\n\t\tconst warningMessageText =\n\t\t\tthis.parameters.invocationGrouping === InvocationGrouping.ChangeSet\n\t\t\t\t? resourceModel.getText(\"C_COMMON_DIALOG_CANCEL_MESSAGE_TEXT\", [actionName])\n\t\t\t\t: resourceModel.getText(\"C_COMMON_DIALOG_SKIP_SINGLE_MESSAGE_TEXT\");\n\t\tlet cancelButtonTxt: string = resourceModel.getText(\"C_COMMON_DIALOG_CANCEL\");\n\t\tlet displayedMessage = \"\";\n\t\tif (!isMultiContext412) {\n\t\t\tdisplayedMessage = `${messageText}\\n${resourceModel.getText(\"PROCEED\")}`;\n\t\t} else if (identifierText !== undefined && identifierText !== \"\") {\n\t\t\tcancelButtonTxt =\n\t\t\t\tthis.parameters.invocationGrouping === InvocationGrouping.ChangeSet\n\t\t\t\t\t? cancelButtonTxt\n\t\t\t\t\t: resourceModel.getText(\"C_COMMON_DIALOG_SKIP\");\n\t\t\tconst tableTypeName = this.tableAPI?.getTableDefinition().headerInfoTypeName;\n\t\t\tconst headerInfoTypeName =\n\t\t\t\tthis.tableAPI && typeof tableTypeName === \"string\"\n\t\t\t\t\t? CommonUtils.getTranslatedTextFromExpBindingString(tableTypeName, this.tableAPI)\n\t\t\t\t\t: tableTypeName;\n\t\t\tif (headerInfoTypeName) {\n\t\t\t\tdisplayedMessage = `${headerInfoTypeName.toString()} ${identifierText}: ${messageText}\\n\\n${warningMessageText}`;\n\t\t\t} else {\n\t\t\t\tdisplayedMessage = `${identifierText}: ${messageText}\\n\\n${warningMessageText}`;\n\t\t\t}\n\t\t} else {\n\t\t\tcancelButtonTxt =\n\t\t\t\tthis.parameters.invocationGrouping === InvocationGrouping.ChangeSet\n\t\t\t\t\t? cancelButtonTxt\n\t\t\t\t\t: resourceModel.getText(\"C_COMMON_DIALOG_SKIP\");\n\t\t\tdisplayedMessage = `${messageText}\\n\\n${warningMessageText}`;\n\t\t}\n\t\tif (isMultiContext412 && this.parameters.invocationGrouping === InvocationGrouping.ChangeSet) {\n\t\t\tdisplayedMessage = `${genericChangesetMessage}\\n\\n${displayedMessage}`;\n\t\t}\n\t\tMessageBox.warning(displayedMessage, {\n\t\t\ttitle: resourceModel.getText(\"WARNING\"),\n\t\t\tactions: [actionName, cancelButtonTxt],\n\t\t\temphasizedAction: actionName,\n\t\t\tonClose: (action: string) => {\n\t\t\t\tthis[action === actionName ? \"handleMessageOnValidation\" : \"handleMessageOnCancel\"]();\n\t\t\t\tmessageResolve();\n\t\t\t}\n\t\t});\n\t\treturn promise;\n\t}\n\n\tprivate async displayMessagesOnDialog(messages: Message[], actionName: string): Promise<void> {\n\t\tlet messageResolve!: Function;\n\t\tconst promise = new Promise<void>((resolve) => {\n\t\t\tmessageResolve = resolve;\n\t\t});\n\t\tconst messageDialogModel = new JSONModel();\n\t\tconst resourceModel = ResourceModelHelper.getResourceModel(this.parameters.appComponent);\n\t\tconst isMultiContext412 = this.parameters.contexts.length > 1;\n\t\tlet warningMessage = \"\";\n\t\tlet warningDesc = \"\";\n\t\tlet cancelButtonTxt: string = resourceModel.getText(\"C_COMMON_DIALOG_CANCEL\");\n\t\tif (isMultiContext412) {\n\t\t\tcancelButtonTxt =\n\t\t\t\tthis.parameters.invocationGrouping === InvocationGrouping.ChangeSet\n\t\t\t\t\t? cancelButtonTxt\n\t\t\t\t\t: resourceModel.getText(\"C_COMMON_DIALOG_SKIP\");\n\t\t\twarningMessage = resourceModel.getText(\n\t\t\t\tthis.parameters.invocationGrouping === InvocationGrouping.ChangeSet\n\t\t\t\t\t? \"C_COMMON_DIALOG_CANCEL_MESSAGES_WARNING\"\n\t\t\t\t\t: \"C_COMMON_DIALOG_SKIP_MESSAGES_WARNING\"\n\t\t\t);\n\t\t\twarningDesc = resourceModel.getText(\n\t\t\t\tthis.parameters.invocationGrouping === InvocationGrouping.ChangeSet\n\t\t\t\t\t? \"C_COMMON_DIALOG_CANCEL_MESSAGES_TEXT\"\n\t\t\t\t\t: \"C_COMMON_DIALOG_SKIP_MESSAGES_TEXT\",\n\t\t\t\t[actionName]\n\t\t\t);\n\t\t} else {\n\t\t\twarningMessage = resourceModel.getText(\"C_COMMON_DIALOG_CANCEL_MESSAGES_GENERIC_ACTION_WARNING\", [actionName]);\n\t\t}\n\t\tconst genericMessage = new Message({\n\t\t\tmessage: warningMessage,\n\t\t\ttype: MessageType.Information,\n\t\t\ttarget: undefined,\n\t\t\tpersistent: true,\n\t\t\tdescription: warningDesc.length ? warningDesc : undefined\n\t\t});\n\t\tmessages = [genericMessage].concat(messages);\n\t\tmessageDialogModel.setData(messages);\n\t\tnew StrictDialog({\n\t\t\tmessageObject: messageHandling.prepareMessageViewForDialog(messageDialogModel, true, isMultiContext412),\n\t\t\tactionName,\n\t\t\tmessageDialogModel,\n\t\t\tcancelButtonTxt,\n\t\t\tonBeginButtonPress: this.handleMessageOnValidation.bind(this),\n\t\t\tonEndButtonPress: this.handleMessageOnCancel.bind(this),\n\t\t\tonClose: messageResolve\n\t\t}).open();\n\t\treturn promise;\n\t}\n\n\tprivate handleMessageOnValidation(): void {\n\t\tfor (const strictHandlingResolve of this.strictHandlingResolves) {\n\t\t\tstrictHandlingResolve.onContextValidation();\n\t\t\tstrictHandlingResolve.handlingResolve(true);\n\t\t}\n\t\tmessageHandling.removeBoundTransitionMessages();\n\t\tmessageHandling.removeUnboundTransitionMessages();\n\t\tthis.strictHandlingWarningMessages = [];\n\t\tthis.parameters.events?.onValidation?.();\n\t}\n\n\tprivate handleMessageOnCancel(): void {\n\t\tconst resourceModel = ResourceModelHelper.getResourceModel(this.parameters.appComponent);\n\t\tthis.strictHandlingWarningMessages = [];\n\t\tthis.canceled = true;\n\t\tfor (const strictHandlingResolve of this.strictHandlingResolves) {\n\t\t\tstrictHandlingResolve.handlingResolve(false);\n\t\t}\n\t\tthis.strictHandlingResolves = [];\n\t\tif (this.parameters.invocationGrouping === InvocationGrouping.ChangeSet) {\n\t\t\tMessageBox.information(resourceModel.getText(\"M_CHANGESET_CANCEL_MESSAGES\"), {\n\t\t\t\tcontentWidth: \"150px\"\n\t\t\t} as object);\n\t\t}\n\t\tthis.parameters.events?.onCancel?.();\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"ODataStrictHandling-dbg.js"}