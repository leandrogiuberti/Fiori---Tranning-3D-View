{"version":3,"names":["NotApplicableContextDialog","props","title","resourceModel","entityType","applicableContexts","notApplicableContexts","_shouldContinue","actionName","entitySetName","entitySet","_dialog","createDialog","_processingPromise","Promise","resolve","_fnResolve","_exports","_proto","prototype","onAfterClose","destroy","onContinue","close","open","owner","addDependent","getDialog","boundActionName","includes","split","length","suffixResourceKey","totalContexts","_jsx","Dialog","state","showHeader","resizable","verticalScrolling","horizontalScrolling","class","getTitleText","afterClose","bind","children","beginButton","Button","text","getText","undefined","press","type","endButton","content","_jsxs","_Fragment","VBox","Text","List","headerText","annotations","UI","HeaderInfo","TypeNamePlural","showSeparators","items","map","notApplicableContext","titleExpression","getTitleExpression","customListItem","CustomListItem","HBox","justifyContent","setBindingContext","actionLabel","key","defaultKey","getOverriddenText","pop","checkIfResourceKeyExists"],"sourceRoot":".","sources":["NotApplicableContextDialog.tsx"],"sourcesContent":["import type { EntityType } from \"@sap-ux/vocabularies-types\";\nimport type ResourceModel from \"sap/fe/core/ResourceModel\";\nimport { getTitleExpression } from \"sap/fe/core/templating/EntityTypeHelper\";\nimport Button from \"sap/m/Button\";\nimport CustomListItem from \"sap/m/CustomListItem\";\nimport Dialog from \"sap/m/Dialog\";\nimport HBox from \"sap/m/HBox\";\nimport List from \"sap/m/List\";\nimport Text from \"sap/m/Text\";\nimport VBox from \"sap/m/VBox\";\nimport type Control from \"sap/ui/core/Control\";\nimport type Context from \"sap/ui/model/Context\";\n\n/**\n * Display a dialog to inform the user that some contexts are not applicable for the action.\n * This is not the target Ux but just keeping the current behavior\n */\nexport default class NotApplicableContextDialog {\n\tprivate readonly title: string;\n\n\tprivate resourceModel: ResourceModel;\n\n\tprivate readonly entityType: EntityType;\n\n\tprivate readonly _dialog: Dialog;\n\n\tprivate readonly _processingPromise: Promise<boolean>;\n\n\tprivate _fnResolve!: (resolveValue: boolean) => void;\n\n\tprivate _shouldContinue: boolean;\n\n\tprivate readonly actionName: string | undefined;\n\n\tprivate readonly entitySetName: string | undefined;\n\n\tprivate notApplicableContexts: Context[];\n\n\tprivate applicableContexts: Context[];\n\n\tconstructor(props: {\n\t\ttitle: string;\n\t\tentityType: EntityType;\n\t\tresourceModel: ResourceModel;\n\t\tnotApplicableContexts: Context[];\n\t\tapplicableContexts: Context[];\n\t\tentitySet?: string;\n\t\tactionName?: string;\n\t}) {\n\t\tthis.title = props.title;\n\t\tthis.resourceModel = props.resourceModel;\n\t\tthis.entityType = props.entityType;\n\t\tthis.applicableContexts = props.applicableContexts;\n\t\tthis.notApplicableContexts = props.notApplicableContexts;\n\t\tthis._shouldContinue = false;\n\t\tthis.actionName = props.actionName;\n\t\tthis.entitySetName = props.entitySet;\n\t\tthis._dialog = this.createDialog();\n\t\tthis._processingPromise = new Promise((resolve) => {\n\t\t\tthis._fnResolve = resolve;\n\t\t});\n\t}\n\n\tprivate onAfterClose(): void {\n\t\tthis._fnResolve(this._shouldContinue);\n\t\tthis._dialog.destroy();\n\t}\n\n\tprivate onContinue(): void {\n\t\tthis._shouldContinue = true;\n\t\tthis._dialog.close();\n\t}\n\n\tasync open(owner: Control): Promise<boolean> {\n\t\towner.addDependent(this._dialog);\n\t\tthis._dialog.open();\n\t\treturn this._processingPromise;\n\t}\n\n\tgetDialog(): Dialog {\n\t\treturn this._dialog;\n\t}\n\n\tcreateDialog(): Dialog {\n\t\tlet boundActionName = this.actionName;\n\t\tboundActionName = boundActionName?.includes(\".\")\n\t\t\t? boundActionName?.split(\".\")[boundActionName?.split(\".\").length - 1]\n\t\t\t: boundActionName;\n\t\tconst suffixResourceKey = boundActionName && this.entitySetName ? `${this.entitySetName}|${boundActionName}` : \"\";\n\t\tconst totalContexts = this.notApplicableContexts?.length + this.applicableContexts.length;\n\t\treturn (\n\t\t\t<Dialog\n\t\t\t\tstate={\"Warning\"}\n\t\t\t\tshowHeader={true}\n\t\t\t\tresizable={true}\n\t\t\t\tverticalScrolling={true}\n\t\t\t\thorizontalScrolling={true}\n\t\t\t\tclass={\"sapUiContentPadding\"}\n\t\t\t\ttitle={this.getTitleText(this.title)}\n\t\t\t\tafterClose={this.onAfterClose.bind(this)}\n\t\t\t>\n\t\t\t\t{{\n\t\t\t\t\tbeginButton: (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ttext={this.resourceModel.getText(\n\t\t\t\t\t\t\t\t\"C_ACTION_PARTIAL_FRAGMENT_SAPFE_CONTINUE_ANYWAY\",\n\t\t\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\t\tsuffixResourceKey\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tpress={this.onContinue.bind(this)}\n\t\t\t\t\t\t\ttype=\"Emphasized\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t),\n\t\t\t\t\tendButton: (\n\t\t\t\t\t\t<Button text={this.resourceModel.getText(\"C_COMMON_SAPFE_CLOSE\")} press={(): Dialog => this._dialog.close()} />\n\t\t\t\t\t),\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<VBox>\n\t\t\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\t\t\ttext={\n\t\t\t\t\t\t\t\t\t\tthis.notApplicableContexts.length === 1\n\t\t\t\t\t\t\t\t\t\t\t? this.resourceModel.getText(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"C_ACTION_PARTIAL_FRAGMENT_SAPFE_BOUND_ACTION\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t[this.notApplicableContexts.length, totalContexts],\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuffixResourceKey\n\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t\t: this.resourceModel.getText(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"C_ACTION_PARTIAL_FRAGMENT_SAPFE_BOUND_ACTION_PLURAL\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t[this.notApplicableContexts.length, totalContexts],\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuffixResourceKey\n\t\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tclass=\"sapUiTinyMarginBegin sapUiTinyMarginTopBottom\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</VBox>\n\t\t\t\t\t\t\t<List headerText={this.entityType.annotations.UI?.HeaderInfo?.TypeNamePlural} showSeparators=\"None\">\n\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\titems: this.notApplicableContexts.map((notApplicableContext) => {\n\t\t\t\t\t\t\t\t\t\t// Either show the HeaderInfoName or the Semantic Key property\n\t\t\t\t\t\t\t\t\t\tconst titleExpression = getTitleExpression(this.entityType);\n\t\t\t\t\t\t\t\t\t\tconst customListItem = (\n\t\t\t\t\t\t\t\t\t\t\t<CustomListItem>\n\t\t\t\t\t\t\t\t\t\t\t\t<HBox justifyContent={\"Start\"}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text={titleExpression} class=\"sapUiTinyMarginBegin sapUiTinyMarginTopBottom\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</HBox>\n\t\t\t\t\t\t\t\t\t\t\t</CustomListItem>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tcustomListItem.setBindingContext(notApplicableContext);\n\t\t\t\t\t\t\t\t\t\treturn customListItem;\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t</Dialog>\n\t\t) as Dialog;\n\t}\n\n\t/**\n\t * Gets the title of the dialog.\n\t * @param actionLabel The label of the action\n\t * @returns The title.\n\t */\n\tprivate getTitleText(actionLabel: string | undefined): string {\n\t\tconst key = \"ACTION_PARAMETER_DIALOG_ACTION_TITLE\";\n\t\tconst defaultKey = \"C_OPERATIONS_ACTION_PARAMETER_DIALOG_TITLE\";\n\t\treturn this.getOverriddenText(key, defaultKey, actionLabel);\n\t}\n\n\t/**\n\t * Gets an overridden text.\n\t * @param key The key for an overridden text\n\t * @param defaultKey The default key for the text\n\t * @param actionLabel The label of the action\n\t * @returns The overridden text or label.\n\t */\n\tprivate getOverriddenText(key: string, defaultKey: string, actionLabel?: string): string {\n\t\tlet boundActionName = this.actionName?.split(\"(\")[0];\n\t\tboundActionName = boundActionName?.split(\".\").pop() ?? boundActionName;\n\t\tconst suffixResourceKey = boundActionName && this.entitySetName ? `${this.entitySetName}|${boundActionName}` : \"\";\n\t\tif (actionLabel) {\n\t\t\tif (this.resourceModel.checkIfResourceKeyExists(`${key}|${suffixResourceKey}`)) {\n\t\t\t\treturn this.resourceModel.getText(key, undefined, suffixResourceKey);\n\t\t\t} else if (this.resourceModel.checkIfResourceKeyExists(`${key}|${this.entitySetName}`)) {\n\t\t\t\treturn this.resourceModel.getText(key, undefined, `${this.entitySetName}`);\n\t\t\t} else if (this.resourceModel.checkIfResourceKeyExists(`${key}`)) {\n\t\t\t\treturn this.resourceModel.getText(key);\n\t\t\t} else {\n\t\t\t\treturn actionLabel;\n\t\t\t}\n\t\t} else {\n\t\t\treturn this.resourceModel.getText(defaultKey);\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"NotApplicableContextDialog-dbg.js"}