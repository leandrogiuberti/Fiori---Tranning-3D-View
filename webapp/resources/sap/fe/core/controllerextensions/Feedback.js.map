{"version":3,"file":"Feedback.js","names":["TriggerType","_exports","StandardActions","channel","feature","triggerSurvey","areaId","triggerName","payload","parameters","EventBus","getInstance","publish","triggerConfiguredSurvey","view","action","triggerType","feedbackConfig","getViewData","content","feedback","surveyConfig"],"sources":["./Feedback.ts"],"sourcesContent":["import type { FEView } from \"sap/fe/core/BaseController\";\nimport EventBus from \"sap/ui/core/EventBus\";\n\nexport type SurveyConfig = {\n\tareaId: string;\n\ttriggerName: string;\n\tpayload?: object;\n};\n\nexport enum TriggerType {\n\taction = \"actions\",\n\tstandardAction = \"standardActions\"\n}\n\nexport enum StandardActions {\n\tsave = \"save\"\n}\n\n/**\n * Asking user for feedback\n *\n */\n\nconst channel = \"sap.feedback\";\nconst feature = \"inapp.feature\";\n\n/**\n * Triggers a feedback survey.\n * @param areaId The area id of the application.\n * @param triggerName The name of the trigger.\n * @param payload A flat list of key/values to be passed to the survey.\n */\nexport function triggerSurvey(areaId: string, triggerName: string, payload: unknown): void {\n\tconst parameters = {\n\t\tareaId: areaId,\n\t\ttriggerName: triggerName,\n\t\tpayload: payload\n\t};\n\tEventBus.getInstance().publish(channel, feature, parameters);\n}\n\n/**\n * Triggers a feedback survey configured for a given action on the current page.\n * @param view The view which is checked for a feedback configuration.\n * @param action The name of the action.\n * @param triggerType The trigger type of the action (actions|standardActions)\n */\nexport function triggerConfiguredSurvey(view: FEView, action: string, triggerType: TriggerType): void {\n\tconst feedbackConfig = view.getViewData()?.content?.feedback;\n\tconst surveyConfig = feedbackConfig?.[triggerType]?.[action];\n\tif (surveyConfig) {\n\t\ttriggerSurvey(surveyConfig.areaId, surveyConfig.triggerName, surveyConfig.payload);\n\t}\n}\n"],"mappings":";;;;6EASYA,EAAW,SAAXA,KAAW,oBAAXA,EAAW,2CAAXA,CAAW,MAAAC,EAAAD,cAAA,IAKXE,EAAe,SAAfA,KAAe,sBAAfA,CAAe,MAI3BD,EAAAC,kBAKA,MAAMC,EAAU,eAChB,MAAMC,EAAU,gBAQT,SAASC,EAAcC,EAAgBC,EAAqBC,GAClE,MAAMC,EAAa,CAClBH,OAAQA,EACRC,YAAaA,EACbC,QAASA,GAEVE,EAASC,cAAcC,QAAQT,EAASC,EAASK,EAClD,CAEAR,EAAAI,gBAMO,SAASQ,EAAwBC,EAAcC,EAAgBC,GACrE,MAAMC,EAAiBH,EAAKI,eAAeC,SAASC,SACpD,MAAMC,EAAeJ,IAAiBD,KAAeD,GACrD,GAAIM,EAAc,CACjBhB,EAAcgB,EAAaf,OAAQe,EAAad,YAAac,EAAab,QAC3E,CACD,CAACP,EAAAY,0BAAA,OAAAZ,CAAA","ignoreList":[]}