{"version":3,"file":"StandardFormatter.js","names":["evaluateComplexExpression","expressionAsString","_len","arguments","length","partsToConcat","Array","_key","myExpression","JSON","parse","transformRecursively","pathInModelDef","modelName","constant","parseInt","path","substring","complexTypeDef","compiledExpression","compileExpression","getValue","this","myCompiledExpression","target","myAny","Any","anyText","jsx","getFormatterContext","setModel","getModel","setBindingContext","getBindingContext","getAnyText","__functionName","concat","_len2","_key2","join","ifElse","condition","onTrue","onFalse","asArray","value","undefined","standardFormatter","sName","hasOwnProperty","_len3","oArgs","_key3","apply","loadProperties","formatPluralMessageConditionally","textSingular","textPlural","values","ui5FormatMessage"],"sources":["./StandardFormatter.ts"],"sourcesContent":["import ui5FormatMessage from \"sap/base/strings/formatMessage\";\nimport type {\n\tBindingToolkitExpression,\n\tCompiledBindingToolkitExpression,\n\tExpressionOrPrimitive,\n\tPathInModelExpression\n} from \"sap/fe/base/BindingToolkit\";\nimport { compileExpression, constant, transformRecursively } from \"sap/fe/base/BindingToolkit\";\nimport jsx from \"sap/fe/base/jsx-runtime/jsx\";\nimport Any from \"sap/fe/core/controls/Any\";\nimport type Control from \"sap/ui/core/Control\";\n\nconst evaluateComplexExpression = function (this: Control, expressionAsString: string, ...partsToConcat: string[]): string {\n\tconst myExpression = JSON.parse(expressionAsString) as BindingToolkitExpression<string>;\n\ttransformRecursively(\n\t\tmyExpression,\n\t\t\"PathInModel\",\n\t\t(pathInModelDef: PathInModelExpression<unknown>) => {\n\t\t\tif (pathInModelDef.modelName === \"$\") {\n\t\t\t\treturn constant(partsToConcat[parseInt(pathInModelDef.path.substring(1), 10)]);\n\t\t\t}\n\t\t\treturn pathInModelDef;\n\t\t},\n\t\ttrue\n\t);\n\ttransformRecursively(myExpression, \"ComplexType\", (complexTypeDef: unknown) => {\n\t\tconst compiledExpression = compileExpression(complexTypeDef as ExpressionOrPrimitive<string>);\n\t\tif (compiledExpression) {\n\t\t\treturn constant(getValue(compiledExpression, this));\n\t\t}\n\t\treturn constant(compiledExpression) as BindingToolkitExpression<string>;\n\t});\n\n\tconst myCompiledExpression = compileExpression(myExpression);\n\n\treturn getValue(myCompiledExpression, this);\n};\n\nconst getValue = function (myExpression: CompiledBindingToolkitExpression, target: Control): string {\n\tconst myAny = new Any({ anyText: myExpression }, jsx.getFormatterContext());\n\tmyAny.setModel(target.getModel());\n\tmyAny.setBindingContext(target.getBindingContext());\n\treturn myAny.getAnyText();\n};\nevaluateComplexExpression.__functionName = \"._formatters.StandardFormatter#evaluateComplexExpression\";\nconst concat = function (...partsToConcat: string[]): string {\n\treturn partsToConcat.join(\"\");\n};\nconcat.__functionName = \"._formatters.StandardFormatter#concat\";\n\nconst ifElse = function (condition: boolean, onTrue: string, onFalse: string): string {\n\treturn condition ? onTrue : onFalse;\n};\nifElse.__functionName = \"._formatters.StandardFormatter#ifElse\";\n\nconst asArray = function (value: string): string[] | undefined {\n\tif (value === undefined || value === null || value === \"undefined\" || value === \"null\") {\n\t\treturn [];\n\t}\n\treturn [value];\n};\nasArray.__functionName = \"._formatters.StandardFormatter#asArray\";\n\n/**\n * Collection of table formatters.\n * @param this The context\n * @param sName The inner function name\n * @param oArgs The inner function parameters\n * @returns The value from the inner function\n */\nconst standardFormatter = function (this: object, sName: string, ...oArgs: unknown[]): unknown {\n\tif (standardFormatter.hasOwnProperty(sName)) {\n\t\treturn (standardFormatter as unknown as Record<string, Function>)[sName].apply(this, oArgs);\n\t} else {\n\t\treturn \"\";\n\t}\n};\n\n/**\n * Dummy formatter to ensure complex binding paths are loaded.\n * @param args The arguments\n * @returns Returns null\n */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst loadProperties = function (...args: unknown[]): null {\n\treturn null;\n};\nloadProperties.__functionName = \"._formatters.StandardFormatter#loadProperties\";\n\nconst formatPluralMessageConditionally = function (textSingular: string, textPlural: string, values: number): string {\n\treturn values === 1 ? textSingular : ui5FormatMessage(textPlural, [values]);\n};\nformatPluralMessageConditionally.__functionName = \"._formatters.StandardFormatter#formatPluralMessageConditionally\";\n\nstandardFormatter.evaluateComplexExpression = evaluateComplexExpression;\nstandardFormatter.concat = concat;\nstandardFormatter.ifElse = ifElse;\nstandardFormatter.asArray = asArray;\nstandardFormatter.loadProperties = loadProperties;\nstandardFormatter.formatPluralMessageConditionally = formatPluralMessageConditionally;\n\nexport default standardFormatter;\n"],"mappings":";;;;8OAYA,MAAMA,EAA4B,SAAyBC,GAAgE,QAAAC,EAAAC,UAAAC,OAAjCC,EAAa,IAAAC,MAAAJ,EAAA,EAAAA,EAAA,KAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAA,CAAbF,EAAaE,EAAA,GAAAJ,UAAAI,EAAA,CACtG,MAAMC,EAAeC,KAAKC,MAAMT,GAChCU,EACCH,EACA,cACCI,IACA,GAAIA,EAAeC,YAAc,IAAK,CACrC,OAAOC,EAAST,EAAcU,SAASH,EAAeI,KAAKC,UAAU,GAAI,KAC1E,CACA,OAAOL,GAER,MAEDD,EAAqBH,EAAc,cAAgBU,IAClD,MAAMC,EAAqBC,EAAkBF,GAC7C,GAAIC,EAAoB,CACvB,OAAOL,EAASO,EAASF,EAAoBG,MAC9C,CACA,OAAOR,EAASK,KAGjB,MAAMI,EAAuBH,EAAkBZ,GAE/C,OAAOa,EAASE,EAAsBD,KACvC,EAEA,MAAMD,EAAW,SAAUb,EAAgDgB,GAC1E,MAAMC,EAAQ,IAAIC,EAAI,CAAEC,QAASnB,GAAgBoB,EAAIC,uBACrDJ,EAAMK,SAASN,EAAOO,YACtBN,EAAMO,kBAAkBR,EAAOS,qBAC/B,OAAOR,EAAMS,YACd,EACAlC,EAA0BmC,eAAiB,2DAC3C,MAAMC,EAAS,WAA8C,QAAAC,EAAAlC,UAAAC,OAAjCC,EAAa,IAAAC,MAAA+B,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAA,CAAbjC,EAAaiC,GAAAnC,UAAAmC,EAAA,CACxC,OAAOjC,EAAckC,KAAK,GAC3B,EACAH,EAAOD,eAAiB,wCAExB,MAAMK,EAAS,SAAUC,EAAoBC,EAAgBC,GAC5D,OAAOF,EAAYC,EAASC,CAC7B,EACAH,EAAOL,eAAiB,wCAExB,MAAMS,EAAU,SAAUC,GACzB,GAAIA,IAAUC,WAAaD,IAAU,MAAQA,IAAU,aAAeA,IAAU,OAAQ,CACvF,MAAO,EACR,CACA,MAAO,CAACA,EACT,EACAD,EAAQT,eAAiB,yCASzB,MAAMY,EAAoB,SAAwBC,GACjD,GAAID,EAAkBE,eAAeD,GAAQ,SAAAE,EAAA/C,UAAAC,OADsB+C,EAAK,IAAA7C,MAAA4C,EAAA,EAAAA,EAAA,KAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAA,CAALD,EAAKC,EAAA,GAAAjD,UAAAiD,EAAA,CAEvE,OAAQL,EAA0DC,GAAOK,MAAM/B,KAAM6B,EACtF,KAAO,CACN,MAAO,EACR,CACD,EAQA,MAAMG,EAAiB,WACtB,OAAO,IACR,EACAA,EAAenB,eAAiB,gDAEhC,MAAMoB,EAAmC,SAAUC,EAAsBC,EAAoBC,GAC5F,OAAOA,IAAW,EAAIF,EAAeG,EAAiBF,EAAY,CAACC,GACpE,EACAH,EAAiCpB,eAAiB,kEAElDY,EAAkB/C,0BAA4BA,EAC9C+C,EAAkBX,OAASA,EAC3BW,EAAkBP,OAASA,EAC3BO,EAAkBH,QAAUA,EAC5BG,EAAkBO,eAAiBA,EACnCP,EAAkBQ,iCAAmCA,EAAiC,OAEvER,CAAiB","ignoreList":[]}