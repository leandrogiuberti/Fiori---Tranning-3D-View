{"version":3,"file":"TimeFactory.js","names":["TimeFactory","_BaseFactory","EFB","token","_this","call","this","setControl","TimePickerClocks","_inheritsLoose","_proto","prototype","invokeOkButtonHandler","timePickerControl","getControl","popover","getToken","getCustomDataValue","key","keySpecificSelectedValues","formattedTime","DateFormat","getTimeInstance","format","getTimeValues","operator","length","FilterOperator","EQ","newSpecificValue","selectedValues","EasyFilterUtils","areItemsSame","getEasyFilter","updateTokenArray","close","invokeShowAllButtonHandler","async","getKey","valueHelpPromise","Promise","resolve","reject","fireEvent","getItems","newSelectedValues","error","Error","Log","message","String","BaseFactory"],"sources":["./TimeFactory.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type { EnhanceWithUI5 } from \"sap/fe/base/ClassSupport\";\nimport { BaseFactory } from \"sap/fe/controls/easyFilter/innerControls/BaseFactory\";\nimport type Popover from \"sap/m/Popover\";\nimport TimePickerClocks from \"sap/m/TimePickerClocks\";\nimport type UI5Date from \"sap/ui/core/date/UI5Date\";\nimport DateFormat from \"sap/ui/core/format/DateFormat\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport type EasyFilterBarContainer from \"../EasyFilterBarContainer\";\nimport type { TokenDefinition, TokenSelectedValuesDefinition } from \"../EasyFilterBarContainer\";\nimport type EasyFilterToken from \"../Token\";\nimport EasyFilterUtils from \"../utils\";\n\nclass TimeFactory extends BaseFactory<TimePickerClocks> {\n\tconstructor(EFB: EnhanceWithUI5<EasyFilterBarContainer>, token: EnhanceWithUI5<EasyFilterToken>) {\n\t\tsuper(EFB, token);\n\t\tthis.setControl(new TimePickerClocks());\n\t}\n\n\tinvokeOkButtonHandler(): void {\n\t\tconst timePickerControl = this.getControl();\n\t\tconst popover = this.getToken()?.getCustomDataValue(\"popover\") as Popover;\n\t\tconst { key, keySpecificSelectedValues } = this.getToken()?.getCustomDataValue(\"TokenInfo\") as TokenDefinition;\n\t\tconst formattedTime: string = DateFormat.getTimeInstance().format(timePickerControl?.getTimeValues() as UI5Date | Date);\n\t\tconst operator = keySpecificSelectedValues.length === 0 ? FilterOperator.EQ : keySpecificSelectedValues[0].operator;\n\t\tconst newSpecificValue: TokenDefinition[\"keySpecificSelectedValues\"] = [\n\t\t\t{\n\t\t\t\toperator: operator as Exclude<\n\t\t\t\t\tFilterOperator,\n\t\t\t\t\tFilterOperator.BT | FilterOperator.NB | FilterOperator.All | FilterOperator.Any\n\t\t\t\t>,\n\t\t\t\tselectedValues: [formattedTime] as string[] | number[] | boolean[]\n\t\t\t}\n\t\t];\n\t\tif (EasyFilterUtils.areItemsSame(keySpecificSelectedValues, newSpecificValue)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.getEasyFilter()?.updateTokenArray(\"setSelectedValues\", newSpecificValue, key);\n\t\tpopover?.close();\n\t}\n\n\tasync invokeShowAllButtonHandler(): Promise<void> {\n\t\tconst token = this.getToken();\n\t\tconst key = token?.getKey() as string;\n\t\tconst valueHelpPromise = new Promise<TokenSelectedValuesDefinition[]>((resolve, reject) => {\n\t\t\tthis.getEasyFilter()?.fireEvent(\"showValueHelp\", {\n\t\t\t\tkey,\n\t\t\t\tselectedValues: token?.getItems(),\n\t\t\t\tresolve,\n\t\t\t\treject\n\t\t\t});\n\t\t});\n\n\t\ttry {\n\t\t\tconst newSelectedValues = await valueHelpPromise;\n\t\t\tthis.getEasyFilter()?.updateTokenArray(\"setSelectedValues\", newSelectedValues, key);\n\t\t} catch (error) {\n\t\t\tif (error instanceof Error) {\n\t\t\t\tLog.error(\"Error while fetching new tokens\", error.message);\n\t\t\t} else {\n\t\t\t\tLog.error(\"Error while fetching new tokens\", String(error));\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default TimeFactory;\n"],"mappings":";;;;ocAaMA,EAAW,SAAAC,GAChB,SAAAD,EAAYE,EAA6CC,GAAwC,IAAAC,EAChGA,EAAAH,EAAAI,KAAAC,KAAMJ,EAAKC,IAAMG,KACjBF,EAAKG,WAAW,IAAIC,GAAoB,OAAAJ,CACzC,CAACK,EAAAT,EAAAC,GAAA,IAAAS,EAAAV,EAAAW,UAAAD,EAEDE,sBAAA,SAAAA,IACC,MAAMC,EAAoBP,KAAKQ,aAC/B,MAAMC,EAAUT,KAAKU,YAAYC,mBAAmB,WACpD,MAAMC,IAAEA,EAAGC,0BAAEA,GAA8Bb,KAAKU,YAAYC,mBAAmB,aAC/E,MAAMG,EAAwBC,EAAWC,kBAAkBC,OAAOV,GAAmBW,iBACrF,MAAMC,EAAWN,EAA0BO,SAAW,EAAIC,EAAeC,GAAKT,EAA0B,GAAGM,SAC3G,MAAMI,EAAiE,CACtE,CACCJ,SAAUA,EAIVK,eAAgB,CAACV,KAGnB,GAAIW,EAAgBC,aAAab,EAA2BU,GAAmB,CAC9E,MACD,CACAvB,KAAK2B,iBAAiBC,iBAAiB,oBAAqBL,EAAkBX,GAC9EH,GAASoB,OACV,EAACzB,EAEK0B,2BAANC,eAAMD,IACL,MAAMjC,EAAQG,KAAKU,WACnB,MAAME,EAAMf,GAAOmC,SACnB,MAAMC,EAAmB,IAAIC,QAAyC,CAACC,EAASC,KAC/EpC,KAAK2B,iBAAiBU,UAAU,gBAAiB,CAChDzB,MACAY,eAAgB3B,GAAOyC,WACvBH,UACAC,aAIF,IACC,MAAMG,QAA0BN,EAChCjC,KAAK2B,iBAAiBC,iBAAiB,oBAAqBW,EAAmB3B,EAChF,CAAE,MAAO4B,GACR,GAAIA,aAAiBC,MAAO,CAC3BC,EAAIF,MAAM,kCAAmCA,EAAMG,QACpD,KAAO,CACND,EAAIF,MAAM,kCAAmCI,OAAOJ,GACrD,CACD,CACD,EAAC,OAAA9C,CAAA,CAlDe,CAASmD,GAAW,OAqDtBnD,CAAW","ignoreList":[]}