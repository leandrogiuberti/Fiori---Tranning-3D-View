{"version":3,"names":["TimeFactory","_BaseFactory","EFB","token","_this","call","setControl","TimePickerClocks","_inheritsLoose","_proto","prototype","invokeOkButtonHandler","timePickerControl","getControl","popover","getToken","getCustomDataValue","key","keySpecificSelectedValues","formattedTime","DateFormat","getTimeInstance","format","getTimeValues","operator","length","FilterOperator","EQ","newSpecificValue","selectedValues","EasyFilterUtils","areItemsSame","getEasyFilter","updateTokenArray","close","invokeShowAllButtonHandler","getKey","valueHelpPromise","Promise","resolve","reject","fireEvent","getItems","newSelectedValues","error","Error","Log","message","String","BaseFactory"],"sourceRoot":".","sources":["TimeFactory.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type { EnhanceWithUI5 } from \"sap/fe/base/ClassSupport\";\nimport { BaseFactory } from \"sap/fe/controls/easyFilter/innerControls/BaseFactory\";\nimport type Popover from \"sap/m/Popover\";\nimport TimePickerClocks from \"sap/m/TimePickerClocks\";\nimport type UI5Date from \"sap/ui/core/date/UI5Date\";\nimport DateFormat from \"sap/ui/core/format/DateFormat\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport type EasyFilterBarContainer from \"../EasyFilterBarContainer\";\nimport type { TokenDefinition, TokenSelectedValuesDefinition } from \"../EasyFilterBarContainer\";\nimport type EasyFilterToken from \"../Token\";\nimport EasyFilterUtils from \"../utils\";\n\nclass TimeFactory extends BaseFactory<TimePickerClocks> {\n\tconstructor(EFB: EnhanceWithUI5<EasyFilterBarContainer>, token: EnhanceWithUI5<EasyFilterToken>) {\n\t\tsuper(EFB, token);\n\t\tthis.setControl(new TimePickerClocks());\n\t}\n\n\tinvokeOkButtonHandler(): void {\n\t\tconst timePickerControl = this.getControl();\n\t\tconst popover = this.getToken()?.getCustomDataValue(\"popover\") as Popover;\n\t\tconst { key, keySpecificSelectedValues } = this.getToken()?.getCustomDataValue(\"TokenInfo\") as TokenDefinition;\n\t\tconst formattedTime: string = DateFormat.getTimeInstance().format(timePickerControl?.getTimeValues() as UI5Date | Date);\n\t\tconst operator = keySpecificSelectedValues.length === 0 ? FilterOperator.EQ : keySpecificSelectedValues[0].operator;\n\t\tconst newSpecificValue: TokenDefinition[\"keySpecificSelectedValues\"] = [\n\t\t\t{\n\t\t\t\toperator: operator as Exclude<\n\t\t\t\t\tFilterOperator,\n\t\t\t\t\tFilterOperator.BT | FilterOperator.NB | FilterOperator.All | FilterOperator.Any\n\t\t\t\t>,\n\t\t\t\tselectedValues: [formattedTime] as string[] | number[] | boolean[]\n\t\t\t}\n\t\t];\n\t\tif (EasyFilterUtils.areItemsSame(keySpecificSelectedValues, newSpecificValue)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.getEasyFilter()?.updateTokenArray(\"setSelectedValues\", newSpecificValue, key);\n\t\tpopover?.close();\n\t}\n\n\tasync invokeShowAllButtonHandler(): Promise<void> {\n\t\tconst token = this.getToken();\n\t\tconst key = token?.getKey() as string;\n\t\tconst valueHelpPromise = new Promise<TokenSelectedValuesDefinition[]>((resolve, reject) => {\n\t\t\tthis.getEasyFilter()?.fireEvent(\"showValueHelp\", {\n\t\t\t\tkey,\n\t\t\t\tselectedValues: token?.getItems(),\n\t\t\t\tresolve,\n\t\t\t\treject\n\t\t\t});\n\t\t});\n\n\t\ttry {\n\t\t\tconst newSelectedValues = await valueHelpPromise;\n\t\t\tthis.getEasyFilter()?.updateTokenArray(\"setSelectedValues\", newSelectedValues, key);\n\t\t} catch (error) {\n\t\t\tif (error instanceof Error) {\n\t\t\t\tLog.error(\"Error while fetching new tokens\", error.message);\n\t\t\t} else {\n\t\t\t\tLog.error(\"Error while fetching new tokens\", String(error));\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default TimeFactory;\n"],"mappings":";;;;;;;;;;MAaMA,WAAW,0BAAAC,YAAA;IAChB,SAAAD,YAAYE,GAA2C,EAAEC,KAAsC,EAAE;MAAA,IAAAC,KAAA;MAChGA,KAAA,GAAAH,YAAA,CAAAI,IAAA,OAAMH,GAAG,EAAEC,KAAK,CAAC;MACjBC,KAAA,CAAKE,UAAU,CAAC,IAAIC,gBAAgB,CAAC,CAAC,CAAC;MAAC,OAAAH,KAAA;IACzC;IAACI,cAAA,CAAAR,WAAA,EAAAC,YAAA;IAAA,IAAAQ,MAAA,GAAAT,WAAA,CAAAU,SAAA;IAAAD,MAAA,CAEDE,qBAAqB,GAArB,SAAAA,qBAAqBA,CAAA,EAAS;MAC7B,MAAMC,iBAAiB,GAAG,IAAI,CAACC,UAAU,CAAC,CAAC;MAC3C,MAAMC,OAAO,GAAG,IAAI,CAACC,QAAQ,CAAC,CAAC,EAAEC,kBAAkB,CAAC,SAAS,CAAY;MACzE,MAAM;QAAEC,GAAG;QAAEC;MAA0B,CAAC,GAAG,IAAI,CAACH,QAAQ,CAAC,CAAC,EAAEC,kBAAkB,CAAC,WAAW,CAAoB;MAC9G,MAAMG,aAAqB,GAAGC,UAAU,CAACC,eAAe,CAAC,CAAC,CAACC,MAAM,CAACV,iBAAiB,EAAEW,aAAa,CAAC,CAAmB,CAAC;MACvH,MAAMC,QAAQ,GAAGN,yBAAyB,CAACO,MAAM,KAAK,CAAC,GAAGC,cAAc,CAACC,EAAE,GAAGT,yBAAyB,CAAC,CAAC,CAAC,CAACM,QAAQ;MACnH,MAAMI,gBAA8D,GAAG,CACtE;QACCJ,QAAQ,EAAEA,QAGT;QACDK,cAAc,EAAE,CAACV,aAAa;MAC/B,CAAC,CACD;MACD,IAAIW,eAAe,CAACC,YAAY,CAACb,yBAAyB,EAAEU,gBAAgB,CAAC,EAAE;QAC9E;MACD;MACA,IAAI,CAACI,aAAa,CAAC,CAAC,EAAEC,gBAAgB,CAAC,mBAAmB,EAAEL,gBAAgB,EAAEX,GAAG,CAAC;MAClFH,OAAO,EAAEoB,KAAK,CAAC,CAAC;IACjB,CAAC;IAAAzB,MAAA,CAEK0B,0BAA0B,GAAhC,eAAMA,0BAA0BA,CAAA,EAAkB;MACjD,MAAMhC,KAAK,GAAG,IAAI,CAACY,QAAQ,CAAC,CAAC;MAC7B,MAAME,GAAG,GAAGd,KAAK,EAAEiC,MAAM,CAAC,CAAW;MACrC,MAAMC,gBAAgB,GAAG,IAAIC,OAAO,CAAkC,CAACC,OAAO,EAAEC,MAAM,KAAK;QAC1F,IAAI,CAACR,aAAa,CAAC,CAAC,EAAES,SAAS,CAAC,eAAe,EAAE;UAChDxB,GAAG;UACHY,cAAc,EAAE1B,KAAK,EAAEuC,QAAQ,CAAC,CAAC;UACjCH,OAAO;UACPC;QACD,CAAC,CAAC;MACH,CAAC,CAAC;MAEF,IAAI;QACH,MAAMG,iBAAiB,GAAG,MAAMN,gBAAgB;QAChD,IAAI,CAACL,aAAa,CAAC,CAAC,EAAEC,gBAAgB,CAAC,mBAAmB,EAAEU,iBAAiB,EAAE1B,GAAG,CAAC;MACpF,CAAC,CAAC,OAAO2B,KAAK,EAAE;QACf,IAAIA,KAAK,YAAYC,KAAK,EAAE;UAC3BC,GAAG,CAACF,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAACG,OAAO,CAAC;QAC5D,CAAC,MAAM;UACND,GAAG,CAACF,KAAK,CAAC,iCAAiC,EAAEI,MAAM,CAACJ,KAAK,CAAC,CAAC;QAC5D;MACD;IACD,CAAC;IAAA,OAAA5C,WAAA;EAAA,EAlDwBiD,WAAW;EAAA,OAqDtBjD,WAAW;AAAA","ignoreList":[],"file":"TimeFactory-dbg.js"}