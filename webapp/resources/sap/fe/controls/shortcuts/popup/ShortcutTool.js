/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/base/BuildingBlockBase","sap/fe/base/ClassSupport","sap/m/CustomTreeItem","sap/m/FlexBox","sap/m/FormattedText","sap/m/Label","sap/m/Panel","sap/m/SearchField","sap/m/Tree","sap/ui/core/Lib","sap/fe/base/jsx-runtime/jsx","sap/fe/base/jsx-runtime/jsxs"],function(e,t,r,n,s,a,i,o,l,c,u,p){"use strict";var d,f,h,b,m,g,T;var y={};var w=t.defineUI5Class;var C=t.defineReference;function v(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function S(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,x(e,t)}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function F(e,t,r,n,s){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),s&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(s):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}function O(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}function j(e,t){const r=e.split("/");let n=t;r.forEach(e=>{n=n[e]});return n}function A(e,t){const r={};e.forEach(e=>{if(!r[e.label]){r[e.label]=[]}e.nodes.filter(e=>e.label.toLowerCase().includes(t.toLowerCase())).forEach(t=>{if(!r[e.label].some(e=>e.label===t.label)){r[e.label].push(t)}})});return Object.entries(r).map(e=>{let[t,r]=e;return{label:t,nodes:r}})}function B(e,t){switch(e.trim()){case"ArrowDown":return"↓";case"ArrowUp":return"↑";case"ArrowLeft":return"←";case"ArrowRight":return"→";default:return t}}let E=(d=w("sap.fe.controls.shortcuts.popup.ShortcutTool"),f=C(),h=C(),d(b=(m=function(e){function t(){var t;t=e.call(this)||this;t.resourceBundle=c.getResourceBundleFor("sap.fe.controls");v(t,"$searchField",g,t);v(t,"$tree",T,t);t.state.shortcutsTree=[];t.state.originalTree=[];t.content=t.createContent();t.state.initialFocus=true;t.$searchField.current?.addEventDelegate({onAfterRendering:()=>{if(t.state.initialFocus){t.$searchField.current?.focus();t.state.initialFocus=false}}});if(window.messagePort){t.setupPort(window.messagePort)}return t}y=t;S(t,e);var d=t.prototype;d.setupPort=function e(t){t.onmessage=this.onMessageReceived.bind(this);t.postMessage({service:"sap.ui.interaction.StopDisplay"});t.postMessage({service:"sap.ui.interaction.StartDisplay"})};d.onMessageReceived=function e(t){if(t?.data?.service==="sap.ui.interaction.UpdateDisplay"){const e=t.data.payload.elements;e.reverse();this.state.originalTree=e.map(e=>{const r=[];e.interactions.forEach(e=>{if(e.$ref){const n=j(e.$ref,t.data.payload);n?.forEach(e=>{r.push({label:e.description.replaceAll("<kbd","<strong").replaceAll("</kbd>","</strong>"),shortcutKeys:e.kbd})})}else{r.push({label:(e.description??e.name).replaceAll("<kbd","<strong").replaceAll("</kbd>","</strong>"),shortcutKeys:e.kbd})}});return{label:e.label.replaceAll("<kbd","<strong").replaceAll("</kbd>","</strong>"),nodes:r}})}this.state.shortcutsTree=A(this.state.originalTree.concat(),"")};d.onStateChange=function e(){this.$tree.current?.expandToLevel(1)};d.onSearch=function e(t){const r=t.getParameter("query")??"";this.state.shortcutsTree=A(this.state.originalTree.filter(e=>{const t=e.label.toLowerCase().includes(r.toLowerCase());const n=e.nodes.some(e=>e.label.toLowerCase().includes(r.toLowerCase()));return t||n}).concat(),r)};d.createContent=function e(){return u(i,{headerText:this.resourceBundle.getText("C_SHORTCUT_TITLE"),width:"100%",children:{content:[u(o,{ref:this.$searchField,placeholder:this.resourceBundle.getText("C_SHORTCUT_PLACEHOLDER"),search:e=>this.onSearch(e)}),u(l,{ref:this.$tree,items:{model:"$componentState",path:"/shortcutsTree",parameters:{arrayNames:["nodes"]}},noDataText:this.resourceBundle.getText("C_SHORTCUT_NODATA"),children:u(r,{children:p(n,{alignItems:"Start",width:"100%",renderType:"Bare",justifyContent:"SpaceBetween",children:[u(s,{htmlText:this.state.shortcutsTree.label,class:"sapFeControlsShorcutMFT"}),u(n,{renderType:"Bare",justifyContent:"SpaceBetween",items:"{$componentState>shortcutKeys}",direction:"Column",children:{items:function(e,t){const r=t.getObject();const s=typeof r==="string"?r:r.raw;const i=typeof r==="string"?r:r.translated;const o=s.split("+");const l=i.split("+");const c=[];o.forEach((e,t)=>{const r=l[t]??e;c.push(u(a,{text:B(e,r),class:"sapUiTinyMarginEnd sapFeControlsShortcutKey"}));if(t!==o.length-1){c.push(u(a,{text:"+",class:"sapUiTinyMarginEnd"}))}});return u(n,{id:e,renderType:"Bare",alignItems:"Center",children:{items:c}})}}})]})})})]}})};return t}(e),g=F(m.prototype,"$searchField",[f],{configurable:true,enumerable:true,writable:true,initializer:null}),T=F(m.prototype,"$tree",[h],{configurable:true,enumerable:true,writable:true,initializer:null}),m))||b);y=E;return y},false);
//# sourceMappingURL=ShortcutTool.js.map