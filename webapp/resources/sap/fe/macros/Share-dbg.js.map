{"version":3,"names":["enumMSTeamsOption","COLLABORATION_MSTEAMS_CARD","COLLABORATION_MSTEAMS_TAB","COLLABORATION_MSTEAMS_CHAT","enumShareOption","SEND_EMAIL","SHARE_JAM","SAVE_AS_TILE","MS_TEAMS_GROUP","SHARE_COLLABORATION_MANAGER","Share","_dec","defineUI5Class","_dec2","property","type","_dec3","implementInterface","_dec4","aggregation","defaultClass","ShareOptions","isDefault","_dec5","defaultValue","OverflowToolbarPriority","High","_dec6","MsTeamsOptions","_dec7","defineReference","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_class","_class2","_BuildingBlock","idOrProps","props","_this","shareAPIId","id","undefined","call","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_descriptor17","_descriptor18","_descriptor19","_descriptor20","_exports","_inheritsLoose","_proto","prototype","onMetadataAvailable","_ownerComponent","content","createContent","getAppComponent","_initializeMenuItems","view","appComponent","isTeamsModeActive","getEnvironmentCapabilities","getCapabilities","Collaboration","default","CollaborationHelper","__ui5_require_async","menuButton","current","unbindProperty","setVisible","controller","getController","shellServices","getShellServices","isPluginInfoStable","waitForPluginsLoad","internalButton","getAggregation","attachEventOnce","_blockInternalConfig","_getShareBlockConfig","_addMenuItems","setShareOptionsVisibility","_addSendEmailOption","_addShellBasedMenuItems","_addPrintOptions","_addExportExcelOptions","_addExportCSVOptions","_addExportPDFOptions","_callManifestActionsEvents","shareOptionProp","viewData","getViewData","shareActionProps","share","module","press","substring","lastIndexOf","replace","method","length","FPMHelper","loadModuleAndCallMethod","Log","error","hasOwnProperty","print","menu","addItem","_jsx","MenuItem","ref","printMenuItem","text","getTranslatedText","icon","PRINT_ICON","exportToSpreadsheetMenuItem","EXPORT_TO_SPREADSHEET_ICON","exportToCSVMenuItem","EXPORT_TO_CSV_ICON","exportToPDFMenuItem","EXPORT_TO_PDF_ICON","shareOptions","showSendEmail","sendEmailMenuItem","_triggerEmail","hasUshell","hasUShell","_addShareViaJAMOption","_addMSTeamsOptions","_addCollaborationManagerOption","_addSaveAsTileOption","collaborativeToolsService","getCollaborativeToolsService","collaborationOption","getCollaborationManagerOption","showCollaborationManager","menuItem","shareAsCollaborationManager","event","_collaborationManagerButtonPress","FESRHelper","setSemanticStepname","fesrStepName","err","message","Error","String","collaborationCallBack","clickedMenuItem","getSource","CommonUtils","getTargetView","_adaptShareMetadata","shareInfoModel","getModel","shareInfo","getData","collaborationInfo","appTitle","url","hasJam","isJamActive","shareViaJAMMenuItem","_triggerShareToJam","showMsTeamsOptions","shareCollaborationOptions","getTeamsCollabOptionsViaShare","isShareAsCardEnabled","_getIsShareAsCardEnabled","menuItemSettings","_getMsTeamsMenuItemSettings","subOptions","items","menuItemKey","Array","isArray","key","_addMsTeamsMenuItem","AddBookmarkButton","addBookmarkButton","getEnabled","saveAsTileMenuItem","getText","getIcon","_saveAsTile","children","dependents","destroy","showShareAsCard","msTeamsOptions","enableCard","Boolean","BindingInfo","parse","_getMsTeamsSubOptions","collaborationMenuItemPress","CustomData","value","_getMenuItemReference","customData","attachPress","reduce","menuItems","subOption","subMenuItem","collaborationData","data","teamsHelperService","getCollaborationServices","oTeamsHelperService","isFeatureFlagEnabled","cardDefinition","getCardDefinition","cardId","shellServiceHelper","semanticObject","action","parseShellHash","document","location","hash","reason","info","optionKeys","Object","keys","visibleBindingExps","bindingToolkitExps","option","exp","_getShareOptionVisibilityExpression","_setShareOptionVisibility","shareBlockVisibleExp","or","cmdExecution","_bindUIVisibility","shareAsCardMenuItem","shareViaChatMenuItem","shareAsTabMenuItem","msTeamsGroupMenuItem","optionMenuItemRef","constant","_getMSTeamsShareOptionVisibility","_getCollaborationOptionExpression","resolveBindingString","internalOption","isConstant","and","msTeamsConfigExp","_getShowMsTeamsOptionsExpression","msTeamsOptionsValue","allMSTeamsOptionsExps","bindingToolkitExp","msTeamsOption","msTeamOptionExp","optionExp","internalOptionExp","_getShareAsCardVisibility","shareAsCardOptionRef","expShowMSTeamsOptions","expShowShareAsCard","not","UI","IsEditable","msTeamsOptionRef","expression","menuItemRef","item","compiledExp","compileExpression","startsWith","endsWith","parsedExp","bindProperty","viewShareConfigs","feAppShareConfigs","getManifestEntry","app","_getOptionBlockConfig","teams","asCard","feAppSetting","viewLevelSetting","feAppExp","viewLevelExp","ShareAPI","OverflowToolbarMenuButton","tooltip","Menu","getPageController","getView","addDependent","CommandExecution","command","execute","getMenu","openBy","isInitialized","catch","setLayoutData","OverflowToolbarLayoutData","priority","getOverflowToolbarConfig","canOverflow","onBeforeEnterOverflow","oControl","getContent","resourceModel","getResourceModel","onAfterExitOverflow","BuildingBlock","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sourceRoot":".","sources":["Share.tsx"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type { BindingToolkitExpression, CompiledBindingToolkitExpression, EmbeddedUI5BindingExpression } from \"sap/fe/base/BindingToolkit\";\nimport { and, compileExpression, constant, isConstant, not, or, resolveBindingString } from \"sap/fe/base/BindingToolkit\";\nimport type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { aggregation, defineReference, defineUI5Class, implementInterface, property } from \"sap/fe/base/ClassSupport\";\nimport type { Ref } from \"sap/fe/base/jsx-runtime/jsx\";\nimport type AppComponent from \"sap/fe/core/AppComponent\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type PageController from \"sap/fe/core/PageController\";\nimport CommandExecution from \"sap/fe/core/controls/CommandExecution\";\nimport { UI } from \"sap/fe/core/helpers/BindingHelper\";\nimport type { IShellServices } from \"sap/fe/core/services/ShellServicesFactory\";\nimport Menu from \"sap/m/Menu\";\nimport type MenuButton from \"sap/m/MenuButton\";\nimport type { $MenuItemSettings } from \"sap/m/MenuItem\";\nimport MenuItem from \"sap/m/MenuItem\";\nimport type { CollaborationOptionKey, CollaborationOptions } from \"sap/suite/ui/commons/collaboration/TeamsHelperService\";\nimport type UI5Event from \"sap/ui/base/Event\";\nimport type ManagedObject from \"sap/ui/base/ManagedObject\";\nimport CustomData from \"sap/ui/core/CustomData\";\nimport type View from \"sap/ui/core/mvc/View\";\nimport type JSONModel from \"sap/ui/model/json/JSONModel\";\nimport FESRHelper from \"sap/ui/performance/trace/FESRHelper\";\n\nimport type TemplateComponent from \"sap/fe/core/TemplateComponent\";\nimport BuildingBlock from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport {\n\tEXPORT_TO_CSV_ICON,\n\tEXPORT_TO_PDF_ICON,\n\tEXPORT_TO_SPREADSHEET_ICON,\n\tPRINT_ICON\n} from \"sap/fe/core/converters/controls/Common/Action\";\nimport FPMHelper from \"sap/fe/core/helpers/FPMHelper\";\nimport { getResourceModel } from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport type { ViewData } from \"sap/fe/core/services/TemplatedViewServiceFactory\";\nimport ShareOptions from \"sap/fe/macros/share/ShareOptions\";\nimport OverflowToolbarLayoutData from \"sap/m/OverflowToolbarLayoutData\";\nimport OverflowToolbarMenuButton from \"sap/m/OverflowToolbarMenuButton\";\nimport { OverflowToolbarPriority } from \"sap/m/library\";\nimport BindingInfo from \"sap/ui/base/BindingInfo\";\nimport type Control from \"sap/ui/core/Control\";\nimport type { $ControlSettings } from \"sap/ui/core/Control\";\nimport MsTeamsOptions from \"./share/MsTeamsOptions\";\nimport ShareAPI from \"./share/ShareAPI\";\n\n// MS Teams options are not public via Share building block.\n// So, 'showMsTeamsOptions' is internal and shall be only picked from template manifest.\ntype InternalShareOptions = PropertiesOf<ShareOptions>;\n\ntype ShareOptionKey =\n\t| CollaborationOptionKey\n\t| \"SEND_EMAIL\"\n\t| \"SHARE_JAM\"\n\t| \"SAVE_AS_TILE\"\n\t| \"MS_TEAMS_GROUP\"\n\t| \"SHARE_COLLABORATION_MANAGER\";\n\nconst enumMSTeamsOption: {\n\t[key in CollaborationOptionKey]: CollaborationOptionKey;\n} = {\n\tCOLLABORATION_MSTEAMS_CARD: \"COLLABORATION_MSTEAMS_CARD\",\n\tCOLLABORATION_MSTEAMS_TAB: \"COLLABORATION_MSTEAMS_TAB\",\n\tCOLLABORATION_MSTEAMS_CHAT: \"COLLABORATION_MSTEAMS_CHAT\"\n};\n\nconst enumShareOption: {\n\t[key in ShareOptionKey]: ShareOptionKey;\n} = {\n\t...enumMSTeamsOption,\n\t...{\n\t\tSEND_EMAIL: \"SEND_EMAIL\",\n\t\tSHARE_JAM: \"SHARE_JAM\",\n\t\tSAVE_AS_TILE: \"SAVE_AS_TILE\",\n\t\tMS_TEAMS_GROUP: \"MS_TEAMS_GROUP\",\n\t\tSHARE_COLLABORATION_MANAGER: \"SHARE_COLLABORATION_MANAGER\"\n\t}\n};\n\ntype ConfigOptions = InternalShareOptions & PropertiesOf<MsTeamsOptions>;\n\n/**\n * Building block used to create the ‘Share’ functionality.\n * <br>\n * Please note that the 'Share in SAP Jam' option is only available on platforms that are integrated with SAP Jam.\n * <br>\n * If you are consuming this macro in an environment where the SAP Fiori launchpad is not available, then the 'Save as Tile' option is not visible.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macros:Share\n * id=\"someID\"\n * visible=\"true\"\n * /&gt;\n * </pre>\n * {@link demo:sap/fe/core/fpmExplorer/index.html#/buildingBlocks/features/shareDefault Overview of Building Blocks}\n * @hideconstructor\n * @public\n * @since 1.93.0\n */\n@defineUI5Class(\"sap.fe.macros.Share\")\nexport default class Share extends BuildingBlock<ShareAPI> {\n\t@property({ type: \"string\" })\n\tpublic shareAPIId?: string;\n\n\t@implementInterface(\"sap.m.IOverflowToolbarContent\")\n\t__implements__sap_m_IOverflowToolbarContent = true;\n\n\t/**\n\t * Supported Share options {@link sap.fe.macros.share.ShareOptions}.\n\t * @public\n\t */\n\t@aggregation({\n\t\ttype: \"sap.fe.macros.share.ShareOptions\",\n\t\tdefaultClass: ShareOptions,\n\t\tisDefault: true\n\t})\n\tpublic shareOptions?: ShareOptions;\n\n\t@property({\n\t\ttype: \"string\",\n\t\tdefaultValue: OverflowToolbarPriority.High\n\t})\n\tpriority?: string;\n\n\t/**\n\t * Supported Microsoft Teams options.\n\t */\n\t@aggregation({\n\t\ttype: \"sap.fe.macros.share.MsTeamsOptions\",\n\t\tdefaultClass: MsTeamsOptions\n\t})\n\tpublic msTeamsOptions?: MsTeamsOptions;\n\n\t@defineReference()\n\tmenuButton!: Ref<MenuButton>;\n\n\t@defineReference()\n\tcmdExecution!: Ref<CommandExecution>;\n\n\t@defineReference()\n\tmenu!: Ref<Menu>;\n\n\t@defineReference()\n\tsaveAsTileMenuItem!: Ref<MenuItem>;\n\n\t@defineReference()\n\tshareAsCollaborationManager!: Ref<MenuItem>;\n\n\t@defineReference()\n\tshareViaJAMMenuItem!: Ref<MenuItem>;\n\n\t@defineReference()\n\tsendEmailMenuItem!: Ref<MenuItem>;\n\n\t@defineReference()\n\tshareAsCardMenuItem!: Ref<MenuItem>;\n\n\t@defineReference()\n\tshareViaChatMenuItem!: Ref<MenuItem>;\n\n\t@defineReference()\n\tshareAsTabMenuItem!: Ref<MenuItem>;\n\n\t@defineReference()\n\tmsTeamsGroupMenuItem!: Ref<MenuItem>;\n\n\t@defineReference()\n\tprintMenuItem!: Ref<MenuItem>;\n\n\t@defineReference()\n\texportToSpreadsheetMenuItem!: Ref<MenuItem>;\n\n\t@defineReference()\n\texportToPDFMenuItem!: Ref<MenuItem>;\n\n\t@defineReference()\n\texportToCSVMenuItem!: Ref<MenuItem>;\n\n\tpublic isInitialized?: Promise<void>;\n\n\tprivate _blockInternalConfig!: ConfigOptions;\n\n\tconstructor(idOrProps: string | (PropertiesOf<Share> & $ControlSettings), props?: PropertiesOf<Share> & $ControlSettings) {\n\t\tlet shareAPIId: string | undefined;\n\t\tif (typeof idOrProps !== \"string\") {\n\t\t\tprops = idOrProps;\n\t\t\tshareAPIId = props.id;\n\t\t} else {\n\t\t\tshareAPIId = idOrProps;\n\t\t}\n\t\tprops ??= {};\n\t\tprops.shareAPIId = shareAPIId;\n\t\tprops.id = undefined;\n\t\tsuper(undefined, props);\n\t}\n\n\tonMetadataAvailable(_ownerComponent: TemplateComponent): void {\n\t\tsuper.onMetadataAvailable(_ownerComponent);\n\t\tthis.content = this.createContent(_ownerComponent.getAppComponent());\n\t}\n\n\t/**\n\t * Retrieves the share option from the shell configuration asynchronously and prepare the content of the menu button.\n\t * Options order are:\n\t * - Send as Email\n\t * - Share as Jam (if available)\n\t * - Teams options (if available)\n\t * - Save as tile.\n\t * @param view The view this building block is used in\n\t * @param appComponent The AppComponent instance\n\t */\n\tasync _initializeMenuItems(view: View, appComponent: AppComponent): Promise<void> {\n\t\tlet isTeamsModeActive = false;\n\t\tif (appComponent.getEnvironmentCapabilities().getCapabilities().Collaboration) {\n\t\t\tconst { default: CollaborationHelper } = await import(\"sap/suite/ui/commons/collaboration/CollaborationHelper\");\n\t\t\tisTeamsModeActive = await CollaborationHelper.isTeamsModeActive();\n\t\t}\n\n\t\tif (isTeamsModeActive) {\n\t\t\t//need to clear the visible property bindings otherwise when the binding value changes then it will set back the visible to the resolved value\n\t\t\tthis.menuButton.current?.unbindProperty(\"visible\", true);\n\t\t\tthis.menuButton.current?.setVisible(false);\n\t\t\treturn;\n\t\t}\n\t\tconst controller = view.getController() as PageController;\n\t\tconst shellServices = appComponent.getShellServices();\n\t\tconst isPluginInfoStable = await shellServices.waitForPluginsLoad();\n\t\tif (!isPluginInfoStable) {\n\t\t\t// In case the plugin info is not yet available we need to do this computation again on the next button click\n\t\t\tconst internalButton = this.menuButton.current?.getAggregation(\"_control\") as ManagedObject;\n\t\t\tinternalButton?.attachEventOnce(\"press\", {}, () => this._initializeMenuItems, this);\n\t\t}\n\n\t\tthis._blockInternalConfig = this._getShareBlockConfig(view);\n\n\t\tawait this._addMenuItems(controller, shellServices, view);\n\t\tthis.setShareOptionsVisibility();\n\t}\n\n\t/**\n\t * Add share options as menu items to the share button.\n\t * @param controller Page controller\n\t * @param shellServices Shell Services\n\t * @param view The view this building block is used in\n\t */\n\tasync _addMenuItems(controller: PageController, shellServices: IShellServices, view: View): Promise<void> {\n\t\tthis._addSendEmailOption(controller);\n\t\tawait this._addShellBasedMenuItems(controller, shellServices);\n\t\tthis._addPrintOptions(controller, view);\n\t\tthis._addExportExcelOptions(controller, view);\n\t\tthis._addExportCSVOptions(controller, view);\n\t\tthis._addExportPDFOptions(controller, view);\n\t}\n\n\t/**\n\t * Call the functions within the custom handlers.\n\t * @param controller Page controller\n\t * @param view The view this building block is used in\n\t * @param shareOptionProp The key of the action you want to call\n\t */\n\t_callManifestActionsEvents(\n\t\tcontroller: PageController,\n\t\tview: View,\n\t\tshareOptionProp: \"print\" | \"exportToCSV\" | \"exportToSpreadsheet\" | \"exportToPDF\"\n\t): void {\n\t\tconst viewData = view.getViewData() as ViewData;\n\t\tconst shareActionProps = viewData?.share?.[shareOptionProp];\n\t\tconst module = shareActionProps?.press?.substring(0, shareActionProps?.press?.lastIndexOf(\".\")).replace(/\\./gi, \"/\");\n\t\tconst method = shareActionProps?.press?.substring(shareActionProps?.press?.lastIndexOf(\".\") + 1, shareActionProps?.press?.length);\n\n\t\tif (module && method) {\n\t\t\tFPMHelper.loadModuleAndCallMethod(module, method, view, controller);\n\t\t} else {\n\t\t\tLog.error(\"Failed to call event handler, Module and/or Method is not set properly\");\n\t\t}\n\t}\n\n\t/**\n\t * Add print option to menu button.\n\t * @param controller Page controller\n\t * @param view The view this building block is used in\n\t */\n\t_addPrintOptions(controller: PageController, view: View): void {\n\t\tconst viewData = view.getViewData() as ViewData;\n\t\tif (viewData?.share?.hasOwnProperty(\"print\") === true && viewData?.share?.print?.hasOwnProperty(\"press\") === true) {\n\t\t\tthis?.menu?.current?.addItem(\n\t\t\t\t<MenuItem\n\t\t\t\t\tref={this.printMenuItem}\n\t\t\t\t\ttext={this.getTranslatedText(\"T_SHARE_CONTROL_PRINT\")}\n\t\t\t\t\ticon={PRINT_ICON}\n\t\t\t\t\tpress={(): void => {\n\t\t\t\t\t\tthis._callManifestActionsEvents(controller, view, \"print\");\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Add Export as Excel option to menu button.\n\t * @param controller Page controller\n\t * @param view The view this building block is used in\n\t */\n\t_addExportExcelOptions(controller: PageController, view: View): void {\n\t\tconst viewData = view.getViewData() as ViewData;\n\t\tif (viewData?.share?.hasOwnProperty(\"exportToSpreadsheet\") === true && viewData?.share?.print?.hasOwnProperty(\"press\") === true) {\n\t\t\tthis?.menu?.current?.addItem(\n\t\t\t\t<MenuItem\n\t\t\t\t\tref={this.exportToSpreadsheetMenuItem}\n\t\t\t\t\ttext={this.getTranslatedText(\"T_SHARE_CONTROL_EXPORT_AS_EXCEL\")}\n\t\t\t\t\ticon={EXPORT_TO_SPREADSHEET_ICON}\n\t\t\t\t\tpress={(): void => {\n\t\t\t\t\t\tthis._callManifestActionsEvents(controller, view, \"exportToSpreadsheet\");\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Add Export as CSV option to menu button.\n\t * @param controller Page controller\n\t * @param view The view this building block is used in\n\t */\n\t_addExportCSVOptions(controller: PageController, view: View): void {\n\t\tconst viewData = view.getViewData() as ViewData;\n\t\tif (viewData?.share?.hasOwnProperty(\"exportToCSV\") === true && viewData?.share?.print?.hasOwnProperty(\"press\") === true) {\n\t\t\tthis?.menu?.current?.addItem(\n\t\t\t\t<MenuItem\n\t\t\t\t\tref={this.exportToCSVMenuItem}\n\t\t\t\t\ttext={this.getTranslatedText(\"T_SHARE_CONTROL_EXPORT_AS_CSV\")}\n\t\t\t\t\ticon={EXPORT_TO_CSV_ICON}\n\t\t\t\t\tpress={(): void => {\n\t\t\t\t\t\tthis._callManifestActionsEvents(controller, view, \"exportToCSV\");\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Add Export as PDF option to menu button.\n\t * @param controller Page controller\n\t * @param view The view this building block is used in\n\t */\n\t_addExportPDFOptions(controller: PageController, view: View): void {\n\t\tconst viewData = view.getViewData() as ViewData;\n\t\tif (viewData?.share?.hasOwnProperty(\"exportToPDF\") === true && viewData?.share?.print?.hasOwnProperty(\"press\") === true) {\n\t\t\tthis?.menu?.current?.addItem(\n\t\t\t\t<MenuItem\n\t\t\t\t\tref={this.exportToPDFMenuItem}\n\t\t\t\t\ttext={this.getTranslatedText(\"T_SHARE_CONTROL_EXPORT_AS_PDF\")}\n\t\t\t\t\ticon={EXPORT_TO_PDF_ICON}\n\t\t\t\t\tpress={(): void => {\n\t\t\t\t\t\tthis._callManifestActionsEvents(controller, view, \"exportToPDF\");\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Add send email option to menu button.\n\t * @param controller Page controller\n\t */\n\t_addSendEmailOption(controller: PageController): void {\n\t\tif (this.shareOptions?.showSendEmail ?? true) {\n\t\t\tthis?.menu?.current?.addItem(\n\t\t\t\t<MenuItem\n\t\t\t\t\tref={this.sendEmailMenuItem}\n\t\t\t\t\ttext={this.getTranslatedText(\"T_SEMANTIC_CONTROL_SEND_EMAIL\")}\n\t\t\t\t\ticon={\"sap-icon://email\"}\n\t\t\t\t\tpress={async (): Promise<void> => controller.share._triggerEmail()}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Add UShell based share options.\n\t * @param controller Page controller\n\t * @param shellServices Shell Services\n\t */\n\tasync _addShellBasedMenuItems(controller: PageController, shellServices: IShellServices): Promise<void> {\n\t\tconst hasUshell = shellServices.hasUShell();\n\t\tif (hasUshell) {\n\t\t\t// share via JAM\n\t\t\tthis._addShareViaJAMOption(controller, shellServices);\n\n\t\t\t// Prepare teams menu items\n\t\t\tawait this._addMSTeamsOptions(controller);\n\n\t\t\t// Prepare Collaboration Manager Options\n\t\t\tawait this._addCollaborationManagerOption(controller);\n\n\t\t\t// Save as Tile\n\t\t\tawait this._addSaveAsTileOption(controller);\n\t\t}\n\t}\n\n\t/**\n\t * Add CM option.\n\t * @param controller The controller instance\n\t * @returns MenuItems\n\t */\n\tasync _addCollaborationManagerOption(controller: PageController): Promise<void> {\n\t\ttry {\n\t\t\tconst collaborativeToolsService = controller.getAppComponent().getCollaborativeToolsService();\n\t\t\tconst collaborationOption = await collaborativeToolsService.getCollaborationManagerOption();\n\t\t\tif (collaborationOption && (this.shareOptions?.showCollaborationManager ?? false)) {\n\t\t\t\tconst menuItem = (\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\tref={this.shareAsCollaborationManager}\n\t\t\t\t\t\ttext={collaborationOption.text}\n\t\t\t\t\t\ticon={collaborationOption.icon}\n\t\t\t\t\t\tpress={async (event: UI5Event<{}, MenuItem>): Promise<void> =>\n\t\t\t\t\t\t\tthis._collaborationManagerButtonPress(collaborationOption.press, event)\n\t\t\t\t\t\t}\n\t\t\t\t\t></MenuItem>\n\t\t\t\t);\n\t\t\t\tFESRHelper.setSemanticStepname(menuItem, \"press\", collaborationOption.fesrStepName);\n\t\t\t\tthis?.menu?.current?.addItem(menuItem);\n\t\t\t}\n\t\t} catch (err: unknown) {\n\t\t\tconst message = err instanceof Error ? err.message : String(err);\n\t\t\tLog.error(`FE : Adding Collaboration Manager Option : ${message}`);\n\t\t}\n\t}\n\n\tasync _collaborationManagerButtonPress(collaborationCallBack: Function, event: UI5Event<{}, MenuItem>): Promise<void> {\n\t\tconst clickedMenuItem = event.getSource();\n\n\t\tconst view: View = CommonUtils.getTargetView(clickedMenuItem);\n\t\tconst controller: PageController = view.getController() as PageController;\n\t\tawait controller.share._adaptShareMetadata();\n\t\tconst shareInfoModel = view.getModel(\"shareInfo\") as JSONModel | undefined;\n\n\t\tif (shareInfoModel) {\n\t\t\tconst shareInfo = shareInfoModel.getData();\n\t\t\tconst { collaborationInfo } = shareInfo;\n\t\t\tcollaborationCallBack(collaborationInfo.appTitle, collaborationInfo.url);\n\t\t}\n\t}\n\n\t/**\n\t * Add share via JAM option.\n\t * @param controller Page controller\n\t * @param shellServices Shell Services\n\t */\n\t_addShareViaJAMOption(controller: PageController, shellServices: IShellServices): void {\n\t\tconst hasJam = !!shellServices.isJamActive?.();\n\t\tif (hasJam) {\n\t\t\tthis?.menu?.current?.addItem(\n\t\t\t\t<MenuItem\n\t\t\t\t\tref={this.shareViaJAMMenuItem}\n\t\t\t\t\ttext={this.getTranslatedText(\"T_COMMON_SAPFE_SHARE_JAM\")}\n\t\t\t\t\ticon={\"sap-icon://share-2\"}\n\t\t\t\t\tpress={async (): Promise<void> => controller.share._triggerShareToJam()}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Add options to share via Microsoft Teams.\n\t * @param controller PageController\n\t */\n\tasync _addMSTeamsOptions(controller: PageController): Promise<void> {\n\t\ttry {\n\t\t\tif (this._blockInternalConfig?.showMsTeamsOptions === false) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst collaborativeToolsService = controller.getAppComponent().getCollaborativeToolsService();\n\t\t\tconst shareCollaborationOptions = await collaborativeToolsService.getTeamsCollabOptionsViaShare({\n\t\t\t\tisShareAsCardEnabled: this._getIsShareAsCardEnabled()\n\t\t\t});\n\n\t\t\tif (!shareCollaborationOptions) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (const collaborationOption of shareCollaborationOptions) {\n\t\t\t\tconst menuItemSettings: $MenuItemSettings = this._getMsTeamsMenuItemSettings(collaborationOption);\n\t\t\t\tconst subOptions = menuItemSettings.items;\n\t\t\t\t// Multiple sub options are grouped into single teams group menu item.\n\t\t\t\tconst menuItemKey =\n\t\t\t\t\tArray.isArray(subOptions) && subOptions.length ? enumShareOption.MS_TEAMS_GROUP : collaborationOption.key;\n\n\t\t\t\tthis._addMsTeamsMenuItem(menuItemSettings, menuItemKey, collaborationOption.fesrStepName);\n\t\t\t}\n\t\t} catch (err: unknown) {\n\t\t\tconst message = err instanceof Error ? err.message : String(err);\n\t\t\tLog.error(`FE : Buildingblock : Share : adding MS teams options : ${message}`);\n\t\t}\n\t}\n\n\t/**\n\t * Add save as tile option.\n\t * @param controller Page controller\n\t */\n\tasync _addSaveAsTileOption(controller: PageController): Promise<void> {\n\t\ttry {\n\t\t\t// set save as tile\n\t\t\t// for now we need to create addBookmarkButton to use the save as tile feature.\n\t\t\t// In the future save as tile should be available as an API or a MenuItem so that it can be added to the Menu button.\n\t\t\t// This needs to be discussed with AddBookmarkButton team.\n\t\t\t// Included in a hasUshell branch\n\t\t\tconst { default: AddBookmarkButton } = await import(\"sap/ushell/ui/footerbar/AddBookmarkButton\");\n\t\t\tconst addBookmarkButton = new AddBookmarkButton();\n\t\t\tif (addBookmarkButton.getEnabled()) {\n\t\t\t\tthis?.menu?.current?.addItem(\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\tref={this.saveAsTileMenuItem}\n\t\t\t\t\t\ttext={addBookmarkButton.getText()}\n\t\t\t\t\t\ticon={addBookmarkButton.getIcon()}\n\t\t\t\t\t\tpress={async (): Promise<void> => controller.share._saveAsTile(this.saveAsTileMenuItem.current!)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ dependents: [addBookmarkButton] }}\n\t\t\t\t\t</MenuItem>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\taddBookmarkButton.destroy();\n\t\t\t}\n\t\t} catch (err: unknown) {\n\t\t\tconst message = err instanceof Error ? err.message : String(err);\n\t\t\tLog.error(`FE : Buildingblock : Share : adding Save as tile option : ${message}`);\n\t\t}\n\t}\n\n\t/**\n\t * Get isShareAsCardEnabled to fetch supported collaboration options.\n\t * @returns Boolean.\n\t */\n\t_getIsShareAsCardEnabled(): boolean {\n\t\tconst showShareAsCard = this.msTeamsOptions?.enableCard ?? false;\n\n\t\tif (typeof showShareAsCard === \"boolean\") {\n\t\t\treturn showShareAsCard;\n\t\t} else if (typeof showShareAsCard === \"string\") {\n\t\t\t// \"true\" or a binding expression\n\t\t\ttry {\n\t\t\t\treturn showShareAsCard === \"true\" || Boolean(BindingInfo.parse(showShareAsCard));\n\t\t\t} catch (err) {\n\t\t\t\tLog.error(err as string);\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\t/**\n\t * Get Menu Item settings for main MS teams option.\n\t * @param collaborationOption Root Collaboration Option\n\t * @returns MenuItemSettings\n\t */\n\t_getMsTeamsMenuItemSettings(collaborationOption: CollaborationOptions): $MenuItemSettings {\n\t\tconst items = this._getMsTeamsSubOptions(collaborationOption?.subOptions);\n\t\tconst menuItemSettings: $MenuItemSettings = {\n\t\t\ttext: collaborationOption.text,\n\t\t\ticon: collaborationOption.icon,\n\t\t\titems\n\t\t};\n\n\t\tif (items.length === 0) {\n\t\t\t// if there are no sub option then the main option should be clickable\n\t\t\t// so add a press handler.\n\t\t\tmenuItemSettings.press = async (event: UI5Event<{}, MenuItem>): Promise<void> => this.collaborationMenuItemPress(event);\n\t\t\tmenuItemSettings[\"customData\"] = new CustomData({\n\t\t\t\tkey: \"collaborationData\",\n\t\t\t\tvalue: collaborationOption\n\t\t\t});\n\t\t}\n\t\treturn menuItemSettings;\n\t}\n\n\t/**\n\t * Add main MS Teams Menu Item to the Share building block menu.\n\t * @param menuItemSettings Menu Item settings\n\t * @param menuItemKey MS teams option key\n\t * @param fesrStepName Step name\n\t */\n\t_addMsTeamsMenuItem(menuItemSettings: $MenuItemSettings, menuItemKey?: ShareOptionKey, fesrStepName?: string): void {\n\t\tconst menuItem: MenuItem = (\n\t\t\t<MenuItem\n\t\t\t\tref={this._getMenuItemReference(menuItemKey)}\n\t\t\t\ttext={menuItemSettings.text}\n\t\t\t\ticon={menuItemSettings.icon}\n\t\t\t\tcustomData={menuItemSettings.customData}\n\t\t\t\titems={menuItemSettings.items}\n\t\t\t></MenuItem>\n\t\t);\n\t\tif (menuItemSettings.press) {\n\t\t\t//\n\t\t\tmenuItem.attachPress(menuItemSettings.press);\n\t\t\tif (fesrStepName) {\n\t\t\t\tFESRHelper.setSemanticStepname(menuItem, \"press\", fesrStepName);\n\t\t\t}\n\t\t}\n\t\tthis?.menu?.current?.addItem(menuItem);\n\t}\n\n\t/**\n\t * Get Menu Items corresponding to MS teams sub options.\n\t * @param subOptions Array of collaboration options\n\t * @returns MenuItems\n\t */\n\t_getMsTeamsSubOptions(subOptions?: CollaborationOptions[]): MenuItem[] {\n\t\tif (!Array.isArray(subOptions)) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn subOptions.reduce((menuItems: MenuItem[], subOption: CollaborationOptions) => {\n\t\t\tconst subMenuItem = (\n\t\t\t\t<MenuItem\n\t\t\t\t\tref={this._getMenuItemReference(subOption.key)}\n\t\t\t\t\ttext={subOption.text}\n\t\t\t\t\ticon={subOption.icon}\n\t\t\t\t\tpress={async (event: UI5Event<{}, MenuItem>): Promise<void> => this.collaborationMenuItemPress(event)}\n\t\t\t\t\tcustomData={\n\t\t\t\t\t\tnew CustomData({\n\t\t\t\t\t\t\tkey: \"collaborationData\",\n\t\t\t\t\t\t\tvalue: subOption\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t></MenuItem>\n\t\t\t);\n\t\t\tif (subOption.fesrStepName) {\n\t\t\t\tFESRHelper.setSemanticStepname(subMenuItem, \"press\", subOption.fesrStepName);\n\t\t\t}\n\t\t\treturn [...menuItems, subMenuItem];\n\t\t}, []);\n\t}\n\n\t/**\n\t * Press handler for collaboration menu items.\n\t *`\n\t * @param event Event object\n\t */\n\tasync collaborationMenuItemPress(event: UI5Event<{}, MenuItem>): Promise<void> {\n\t\tconst clickedMenuItem = event.getSource();\n\n\t\tconst view: View = CommonUtils.getTargetView(clickedMenuItem);\n\t\tconst controller: PageController = view.getController() as PageController;\n\t\tawait controller.share._adaptShareMetadata();\n\t\tconst shareInfoModel = view.getModel(\"shareInfo\") as JSONModel | undefined;\n\n\t\tif (shareInfoModel) {\n\t\t\tconst shareInfo = shareInfoModel.getData();\n\t\t\tconst { collaborationInfo } = shareInfo;\n\n\t\t\tconst collaborationData = clickedMenuItem.data(\"collaborationData\");\n\t\t\tconst collaborativeToolsService = controller.getAppComponent().getCollaborativeToolsService();\n\t\t\tconst teamsHelperService = (await collaborativeToolsService.getCollaborationServices()).oTeamsHelperService;\n\t\t\tif (collaborationData[\"key\"] === enumMSTeamsOption.COLLABORATION_MSTEAMS_CARD) {\n\t\t\t\tconst isShareAsCardEnabled = teamsHelperService.isFeatureFlagEnabled();\n\t\t\t\tconst cardDefinition = isShareAsCardEnabled ? await controller.share.getCardDefinition() : undefined;\n\t\t\t\tlet cardId: string | undefined;\n\t\t\t\tif (cardDefinition) {\n\t\t\t\t\tconst shellServiceHelper = controller.getAppComponent().getShellServices();\n\t\t\t\t\tconst { semanticObject, action } = shellServiceHelper.parseShellHash(document.location.hash);\n\t\t\t\t\tcardId = `${semanticObject}_${action}`;\n\t\t\t\t} else {\n\t\t\t\t\tconst reason = !isShareAsCardEnabled\n\t\t\t\t\t\t? \"Feature flag disabled in collaboration teams helper\"\n\t\t\t\t\t\t: \"Card definition was not created\";\n\t\t\t\t\tLog.info(`FE V4 : Share block : share as Card : ${reason}`);\n\t\t\t\t}\n\t\t\t\tcollaborationInfo[\"cardManifest\"] = cardDefinition;\n\t\t\t\tcollaborationInfo[\"cardId\"] = cardId;\n\t\t\t}\n\t\t\tteamsHelperService.share(collaborationData, collaborationInfo);\n\t\t}\n\t}\n\n\t/**\n\t * Set the visibility of individual UI elements of the Share building block. Like, MenuItems, MenuButton and Command execution.\n\t */\n\tsetShareOptionsVisibility(): void {\n\t\tconst optionKeys = Object.keys(enumShareOption) as ShareOptionKey[];\n\t\tconst visibleBindingExps = optionKeys.reduce((bindingToolkitExps: BindingToolkitExpression<boolean>[], option: ShareOptionKey) => {\n\t\t\tconst exp = this._getShareOptionVisibilityExpression(option);\n\t\t\tthis._setShareOptionVisibility(option, exp);\n\t\t\treturn [...bindingToolkitExps, exp];\n\t\t}, []);\n\t\tconst shareBlockVisibleExp = or(...visibleBindingExps);\n\t\tif (this.menuButton.current && this.cmdExecution.current) {\n\t\t\tthis._bindUIVisibility(this.menuButton.current, shareBlockVisibleExp);\n\t\t\tthis._bindUIVisibility(this.cmdExecution.current, shareBlockVisibleExp);\n\t\t}\n\t}\n\n\t/**\n\t * Get Menu Item reference of the corresponding Share option.\n\t *`\n\t * @param option Share option key\n\t * @returns Reference to the Menu Item\n\t */\n\t_getMenuItemReference(option?: ShareOptionKey): Ref<MenuItem> | undefined {\n\t\tlet ref: Ref<MenuItem> | undefined;\n\t\tswitch (option) {\n\t\t\tcase enumShareOption.COLLABORATION_MSTEAMS_CARD:\n\t\t\t\tref = this.shareAsCardMenuItem;\n\t\t\t\tbreak;\n\t\t\tcase enumShareOption.COLLABORATION_MSTEAMS_CHAT:\n\t\t\t\tref = this.shareViaChatMenuItem;\n\t\t\t\tbreak;\n\t\t\tcase enumShareOption.COLLABORATION_MSTEAMS_TAB:\n\t\t\t\tref = this.shareAsTabMenuItem;\n\t\t\t\tbreak;\n\t\t\tcase enumShareOption.SEND_EMAIL:\n\t\t\t\tref = this.sendEmailMenuItem;\n\t\t\t\tbreak;\n\t\t\tcase enumShareOption.SHARE_JAM:\n\t\t\t\tref = this.shareViaJAMMenuItem;\n\t\t\t\tbreak;\n\t\t\tcase enumShareOption.SAVE_AS_TILE:\n\t\t\t\tref = this.saveAsTileMenuItem;\n\t\t\t\tbreak;\n\t\t\tcase enumShareOption.MS_TEAMS_GROUP:\n\t\t\t\tref = this.msTeamsGroupMenuItem;\n\t\t\t\tbreak;\n\t\t\tcase enumShareOption.SHARE_COLLABORATION_MANAGER:\n\t\t\t\tref = this.shareAsCollaborationManager;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn ref;\n\t}\n\n\t/**\n\t * Get the visibility expression of share option based on the building block configuration.\n\t * @param option Share option name of the visible expression that needs to be fetched.\n\t * @returns Binding toolkit expression.\n\t */\n\t_getShareOptionVisibilityExpression(option?: ShareOptionKey): BindingToolkitExpression<boolean> {\n\t\tconst optionMenuItemRef = this._getMenuItemReference(option);\n\t\tif (!optionMenuItemRef?.current) {\n\t\t\treturn constant(false);\n\t\t}\n\n\t\tlet exp: BindingToolkitExpression<boolean>;\n\t\tswitch (option) {\n\t\t\tcase enumShareOption.COLLABORATION_MSTEAMS_CARD:\n\t\t\tcase enumShareOption.COLLABORATION_MSTEAMS_CHAT:\n\t\t\tcase enumShareOption.COLLABORATION_MSTEAMS_TAB:\n\t\t\t\texp = this._getMSTeamsShareOptionVisibility(option);\n\t\t\t\tbreak;\n\t\t\tcase enumShareOption.SHARE_COLLABORATION_MANAGER:\n\t\t\t\texp = this._getCollaborationOptionExpression();\n\t\t\t\tbreak;\n\t\t\tcase enumShareOption.SEND_EMAIL: {\n\t\t\t\tconst showSendEmail = resolveBindingString<boolean>(this.shareOptions?.showSendEmail ?? true, \"boolean\");\n\t\t\t\tconst internalOption = resolveBindingString(\n\t\t\t\t\tthis._blockInternalConfig.showSendEmail ?? true,\n\t\t\t\t\t\"boolean\"\n\t\t\t\t) as unknown as BindingToolkitExpression<boolean>;\n\t\t\t\tif (isConstant(internalOption) && internalOption.value === false) {\n\t\t\t\t\texp = constant(false);\n\t\t\t\t} else if (isConstant(internalOption) && internalOption.value === true) {\n\t\t\t\t\texp = (this.shareOptions?.showSendEmail ?? true) as unknown as EmbeddedUI5BindingExpression<boolean>;\n\t\t\t\t} else {\n\t\t\t\t\texp = and(showSendEmail, internalOption) as unknown as EmbeddedUI5BindingExpression<boolean>;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase enumShareOption.SHARE_JAM:\n\t\t\tcase enumShareOption.SAVE_AS_TILE: {\n\t\t\t\t// No overrides for Share via Jam and Save as tile yet.\n\t\t\t\texp = constant(true);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase enumShareOption.MS_TEAMS_GROUP: {\n\t\t\t\tconst msTeamsConfigExp = this._getShowMsTeamsOptionsExpression();\n\t\t\t\tconst msTeamsOptionsValue = Object.keys(enumMSTeamsOption) as ShareOptionKey[];\n\t\t\t\tconst allMSTeamsOptionsExps = msTeamsOptionsValue.reduce(\n\t\t\t\t\t(bindingToolkitExp: BindingToolkitExpression<boolean>[], msTeamsOption: ShareOptionKey) => {\n\t\t\t\t\t\tconst msTeamOptionExp = this._getMSTeamsShareOptionVisibility(msTeamsOption);\n\t\t\t\t\t\treturn [...bindingToolkitExp, msTeamOptionExp];\n\t\t\t\t\t},\n\t\t\t\t\t[] as BindingToolkitExpression<boolean>[]\n\t\t\t\t);\n\t\t\t\texp = and(msTeamsConfigExp, or(...allMSTeamsOptionsExps));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\texp = constant(false);\n\t\t}\n\n\t\treturn exp;\n\t}\n\n\t_getCollaborationOptionExpression(): BindingToolkitExpression<boolean> {\n\t\tconst showCollaborationManager = this.shareOptions?.showCollaborationManager ?? false;\n\t\tconst optionExp = resolveBindingString<boolean>(showCollaborationManager, \"boolean\");\n\t\tconst internalOption = this._blockInternalConfig.showCollaborationManager ?? true;\n\t\tconst internalOptionExp = resolveBindingString<boolean>(internalOption, \"boolean\");\n\t\treturn and(optionExp, internalOptionExp);\n\t}\n\n\t/**\n\t * Get expression for showMsTeamsOptions share option based on the building block configuration.\n\t * @returns Binding toolkit expression.\n\t */\n\t_getShowMsTeamsOptionsExpression(): BindingToolkitExpression<boolean> {\n\t\tconst internalOption = this._blockInternalConfig.showMsTeamsOptions ?? true;\n\t\treturn resolveBindingString<boolean>(internalOption, \"boolean\");\n\t}\n\n\t/**\n\t * Get binding toolkit expression for share as card visibility.\n\t * @returns Binding toolkit expression.\n\t */\n\t_getShareAsCardVisibility(): BindingToolkitExpression<boolean> {\n\t\tlet exp: BindingToolkitExpression<boolean>;\n\t\tconst shareAsCardOptionRef = this._getMenuItemReference(enumShareOption.COLLABORATION_MSTEAMS_CARD);\n\t\tif (shareAsCardOptionRef?.current) {\n\t\t\tconst expShowMSTeamsOptions = this._getShowMsTeamsOptionsExpression();\n\t\t\tconst showShareAsCard = this.msTeamsOptions?.enableCard ?? true;\n\t\t\tconst optionExp = resolveBindingString<boolean>(showShareAsCard, \"boolean\");\n\t\t\tconst internalOption = this._blockInternalConfig.enableCard ?? true;\n\t\t\tconst internalOptionExp = resolveBindingString<boolean>(internalOption, \"boolean\");\n\t\t\tconst expShowShareAsCard = and(optionExp, internalOptionExp);\n\t\t\texp = and(not(UI.IsEditable), expShowMSTeamsOptions, expShowShareAsCard);\n\t\t} else {\n\t\t\texp = constant(false);\n\t\t}\n\t\treturn exp;\n\t}\n\n\t/**\n\t * Get binding toolkit expression for share option's visibility.\n\t * @param option Share option key\n\t * @returns Binding toolkit expression.\n\t */\n\t_getMSTeamsShareOptionVisibility(option: ShareOptionKey): BindingToolkitExpression<boolean> {\n\t\tif (option === enumShareOption.COLLABORATION_MSTEAMS_CARD) {\n\t\t\treturn this._getShareAsCardVisibility();\n\t\t}\n\t\t// No overrides for Share as Tab and Chat yet.\n\n\t\tconst msTeamsOptionRef = this._getMenuItemReference(option);\n\t\treturn msTeamsOptionRef?.current ? this._getShowMsTeamsOptionsExpression() : constant(false);\n\t}\n\n\t/**\n\t * Set visiblity of individual share option's MenuItem.\n\t * @param option Share option key\n\t * @param expression Visibility binding toolkit expression\n\t */\n\t_setShareOptionVisibility(option: ShareOptionKey, expression: BindingToolkitExpression<boolean>): void {\n\t\tconst menuItemRef = this._getMenuItemReference(option);\n\t\tif (menuItemRef?.current) {\n\t\t\tthis._bindUIVisibility(menuItemRef.current, expression);\n\t\t}\n\t}\n\n\t/**\n\t * Bind the UI element's visibility property.\n\t * @param item UI element\n\t * @param expression Expression to bind.\n\t */\n\t_bindUIVisibility(item: MenuButton | MenuItem | CommandExecution, expression: BindingToolkitExpression<boolean>): void {\n\t\t// NOTE: We need convert the binding toolkit expression to the format that can be consumed by the UI element.\n\t\t// At runtime, we can't use binding toolkit expression or compiled expression directly to bind the visibility or set the visible property or the UI element.\n\t\t// We would need to convert the binding toolkit expression -> UI5 BindingInfo to bind the UI element.\n\t\tconst compiledExp = compileExpression(expression);\n\n\t\tif (compiledExp && compiledExp.startsWith(\"{\") && compiledExp?.endsWith(\"}\")) {\n\t\t\t// Probable binding\n\t\t\ttry {\n\t\t\t\tconst parsedExp = BindingInfo.parse(compiledExp);\n\t\t\t\titem.bindProperty(\"visible\", parsedExp);\n\t\t\t} catch (err) {\n\t\t\t\tLog.error(err as string);\n\t\t\t}\n\t\t} else if (compiledExp === \"false\") {\n\t\t\t// Statically false\n\t\t\titem.unbindProperty(\"visible\", true);\n\t\t\titem.setVisible(false);\n\t\t}\n\t}\n\n\t_getShareBlockConfig(view: View): ConfigOptions {\n\t\tconst viewData = view.getViewData() as ViewData;\n\t\tconst viewShareConfigs = viewData?.share;\n\t\tconst controller = view.getController() as PageController;\n\t\tconst feAppShareConfigs = controller.getAppComponent().getManifestEntry(\"sap.fe\")?.app?.share;\n\n\t\tconst showSendEmail = this._getOptionBlockConfig(feAppShareConfigs?.showSendEmail, viewShareConfigs?.showSendEmail);\n\t\tconst showCollaborationManager = this._getOptionBlockConfig(\n\t\t\tfeAppShareConfigs?.showCollaborationManager,\n\t\t\tviewShareConfigs?.showCollaborationManager\n\t\t);\n\n\t\tconst showMsTeamsOptions = this._getOptionBlockConfig(\n\t\t\tfeAppShareConfigs?.teams?.showMsTeamsOptions,\n\t\t\tviewShareConfigs?.teams?.showMsTeamsOptions\n\t\t);\n\t\tconst enableCard = this._getOptionBlockConfig(feAppShareConfigs?.teams?.asCard, viewShareConfigs?.teams?.asCard);\n\n\t\treturn { showSendEmail, showMsTeamsOptions, enableCard, showCollaborationManager };\n\t}\n\n\t_getOptionBlockConfig(feAppSetting?: boolean | string, viewLevelSetting?: boolean | string): CompiledBindingToolkitExpression {\n\t\tconst feAppExp = typeof feAppSetting === \"string\" ? resolveBindingString<boolean>(feAppSetting) : constant(feAppSetting ?? true);\n\t\tconst viewLevelExp =\n\t\t\ttypeof viewLevelSetting === \"string\" ? resolveBindingString<boolean>(viewLevelSetting) : constant(viewLevelSetting ?? true);\n\t\treturn compileExpression(and(feAppExp, viewLevelExp));\n\t}\n\n\tcreateContent(appComponent: AppComponent): ShareAPI {\n\t\t// Ctrl+Shift+S is needed for the time being but this needs to be removed after backlog from menu button\n\t\tconst menuButton = (\n\t\t\t<ShareAPI id={this.shareAPIId}>\n\t\t\t\t<OverflowToolbarMenuButton\n\t\t\t\t\ttext={\"{sap.fe.i18n>M_COMMON_SAPFE_ACTION_SHARE}\"}\n\t\t\t\t\tref={this.menuButton}\n\t\t\t\t\ticon={\"sap-icon://action\"}\n\t\t\t\t\ttooltip={\"{sap.fe.i18n>M_COMMON_SAPFE_ACTION_SHARE} (Ctrl+Shift+S)\"}\n\t\t\t\t>\n\t\t\t\t\t<Menu ref={this.menu}></Menu>\n\t\t\t\t</OverflowToolbarMenuButton>\n\t\t\t</ShareAPI>\n\t\t) as ShareAPI;\n\t\tthis.getPageController()\n\t\t\t.getView()\n\t\t\t.addDependent(\n\t\t\t\t<CommandExecution\n\t\t\t\t\tref={this.cmdExecution}\n\t\t\t\t\tcommand=\"Share\"\n\t\t\t\t\texecute={(): void => {\n\t\t\t\t\t\tthis.menuButton.current?.getMenu().openBy(this.menuButton.current, true);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t// The initialization is asynchronous, so we just trigger it and hope for the best :D\n\t\tthis.isInitialized = this._initializeMenuItems(this.getPageController().getView(), appComponent).catch((error) => {\n\t\t\tLog.error(error as string);\n\t\t});\n\n\t\tthis.setLayoutData(\n\t\t\tnew OverflowToolbarLayoutData({\n\t\t\t\tpriority: this.priority\n\t\t\t})\n\t\t);\n\t\treturn menuButton;\n\t}\n\n\t/**\n\t * Returns properties for the interface IOverflowToolbarContent.\n\t * @returns Returns the configuration of IOverflowToolbarContent\n\t */\n\tgetOverflowToolbarConfig(): object {\n\t\treturn {\n\t\t\tcanOverflow: true,\n\t\t\tonBeforeEnterOverflow: function (oControl: Share): void {\n\t\t\t\t(oControl?.getContent()?.getContent() as OverflowToolbarMenuButton).getText = function (): string {\n\t\t\t\t\tconst resourceModel = getResourceModel(oControl as Control);\n\t\t\t\t\treturn resourceModel.getText(\"M_COMMON_SAPFE_ACTION_SHARE\");\n\t\t\t\t};\n\t\t\t},\n\t\t\tonAfterExitOverflow: function (oControl: Share): void {\n\t\t\t\t(oControl?.getContent()?.getContent() as OverflowToolbarMenuButton).getText = function (): string {\n\t\t\t\t\treturn \"\";\n\t\t\t\t};\n\t\t\t},\n\t\t\tpriority: this.priority\n\t\t};\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"Share-dbg.js"}