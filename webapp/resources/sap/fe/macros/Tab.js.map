{"version":3,"file":"Tab.js","names":["Tab","_dec","defineUI5Class","_dec2","property","type","_dec3","_dec4","event","_dec5","_dec6","_dec7","_dec8","xmlEventHandler","_class","_class2","_IconTabFilter","settings","others","_this","id","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","isSuspended","setKey","generate","insertContent","_jsx","MessageStrip","text","showIcon","showCloseButton","class","visible","getTabContent","attachEvent","onInternalDataRequested","bind","_exports","_inheritsLoose","_proto","prototype","evt","fireEvent","getParameters","getContent","filter","item","isA","resumeBinding","requestIfNotInitialized","forEach","content","suspendBinding","invalidateContent","hasCounts","hasListeners","getCounts","refreshCount","setCount","then","count","catch","error","Log","refreshNotApplicableFields","filterControl","IconTabFilter","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer","Object","getOwnPropertyDescriptor"],"sources":["./Tab.tsx"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport { defineUI5Class, event, property, xmlEventHandler, type PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport type { $IconTabFilterSettings } from \"sap/m/IconTabFilter\";\nimport IconTabFilter from \"sap/m/IconTabFilter\";\nimport MessageStrip from \"sap/m/MessageStrip\";\nimport type UI5Event from \"sap/ui/base/Event\";\nimport type Control from \"sap/ui/core/Control\";\nimport type MacroAPI from \"./MacroAPI\";\n\nexport type InnerControlType = MacroAPI &\n\tPartial<{\n\t\tresumeBinding: Function;\n\t\tsuspendBinding: Function;\n\t\tgetCounts: Function;\n\t\trefreshNotApplicableFields: Function;\n\t\tinvalidateContent: Function;\n\t\tgetContent: Function;\n\t}>;\n\n@defineUI5Class(\"sap.fe.macros.Tab\")\nexport default class Tab extends IconTabFilter {\n\t@property({ type: \"string\" })\n\tid!: string;\n\n\t@property({ type: \"string\" })\n\tcount?: string;\n\n\t@event()\n\tinternalDataRequested!: Function;\n\n\t@event()\n\tcustomRefreshCount?: Function;\n\n\t@event()\n\tcustomResumeBinding?: Function;\n\n\t@event()\n\tcustomSuspendBinding?: Function;\n\n\tisSuspended = false;\n\n\tconstructor(settings: string | ($IconTabFilterSettings & PropertiesOf<Tab>), others?: $IconTabFilterSettings & PropertiesOf<Tab>) {\n\t\tif (typeof settings === \"string\") {\n\t\t\tothers ??= {};\n\t\t\tothers.id = settings;\n\t\t}\n\t\tsuper(settings as unknown as string, others);\n\t\tthis.setKey(generate([this.id]));\n\t\tthis.insertContent(\n\t\t\t<MessageStrip\n\t\t\t\ttext={\"{tabsInternal>/\" + this.id + \"/notApplicable/title}\"}\n\t\t\t\ttype=\"Information\"\n\t\t\t\tshowIcon=\"true\"\n\t\t\t\tshowCloseButton=\"true\"\n\t\t\t\tclass=\"sapUiTinyMargin\"\n\t\t\t\tvisible={\"{= (${tabsInternal>/\" + this.id + \"/notApplicable/fields} || []).length>0 }\"}\n\t\t\t/>,\n\t\t\t0\n\t\t);\n\t\tthis.getTabContent()[0]?.attachEvent(\"internalDataRequested\", this.onInternalDataRequested.bind(this));\n\t}\n\n\t@xmlEventHandler()\n\tonInternalDataRequested(evt: UI5Event): void {\n\t\tthis.fireEvent(\"internalDataRequested\", evt.getParameters());\n\t}\n\n\t/**\n\t * Gets tab content only of inner control type (table or chart).\n\t * @returns Array of inner controls\n\t */\n\tgetTabContent(): InnerControlType[] {\n\t\treturn this.getContent().filter((item) => item.isA([\"sap.fe.macros.table.TableAPI\", \"sap.fe.macros.Chart\"])) as InnerControlType[];\n\t}\n\n\tresumeBinding(requestIfNotInitialized: boolean): void {\n\t\tif (this.isSuspended) {\n\t\t\tthis.getTabContent()?.forEach((content) => content.resumeBinding?.(requestIfNotInitialized));\n\t\t\tthis.fireEvent(\"customResumeBinding\");\n\t\t\tthis.isSuspended = false;\n\t\t}\n\t}\n\n\tsuspendBinding(): void {\n\t\tif (!this.isSuspended) {\n\t\t\tthis.getTabContent()?.forEach((content) => content.suspendBinding?.());\n\t\t\tthis.fireEvent(\"customSuspendBinding\");\n\t\t\tthis.isSuspended = true;\n\t\t}\n\t}\n\n\tinvalidateContent(): void {\n\t\tthis.getTabContent()?.forEach((content) => content.invalidateContent?.());\n\t}\n\n\thasCounts(): boolean {\n\t\tif (this.hasListeners(\"customRefreshCount\") || this.getTabContent()?.[0]?.getCounts) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Refreshes the tab count.\n\t *\n\t */\n\trefreshCount(): void {\n\t\tif (this.hasCounts()) {\n\t\t\tthis.setCount(\"...\");\n\t\t\tthis.getTabContent()?.[0]\n\t\t\t\t?.getCounts?.()\n\t\t\t\t.then((count: string): Tab => {\n\t\t\t\t\treturn this.setCount(count || \"0\");\n\t\t\t\t})\n\t\t\t\t.catch(function (error: unknown): void {\n\t\t\t\t\tLog.error(`Error while requesting Counts for Control: ${error}`);\n\t\t\t\t});\n\t\t\tthis.fireEvent(\"customRefreshCount\");\n\t\t}\n\t}\n\n\trefreshNotApplicableFields(filterControl: Control): string[] {\n\t\treturn this.getTabContent()?.[0]?.refreshNotApplicableFields?.(filterControl);\n\t}\n}\n"],"mappings":"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","ignoreList":[]}