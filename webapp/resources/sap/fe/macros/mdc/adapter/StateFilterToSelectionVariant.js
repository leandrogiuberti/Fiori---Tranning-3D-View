/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/base/util/isEmptyObject","sap/fe/macros/filterBar/SemanticDateOperators","sap/fe/navigation/SelectionVariant","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/RangeOperator","sap/ui/mdc/odata/v4/TypeMap"],function(e,t,n,o,i,a,r){"use strict";const s={getSelectionVariantFromConditions:function(e,n,i){const a=new o;if(!t(e)){for(const t in e){const o=e[t];if(o?.length){const e=s.getSelectionOptionsFromCondition(o,t,n);if(e.length){const n=t.replace(/\*\//g,".");if(i?.includes(t)){a.massAddSelectOption(`$Parameter.${n}`,e)}a.massAddSelectOption(n,e)}}}}return a},compareSelectOptions:function(e,t){return e.Option===t.Option&&e.Sign===t.Sign&&e.Low===t.Low&&e.High===t.High},mergeSelectionVariants:function(e,t){const n=new o(e.toJSONString());const i=t.getSelectOptionsPropertyNames();const a=[];for(const e of i){const o=t.getSelectOption(e)||[];const i=n.getSelectOption(e)||[];if(!a.includes(e)){n.massAddSelectOption(e,o);a.push(e)}else{for(const e of o){if(!i.some(t=>s.compareSelectOptions(t,e))){i.push(e)}}n.massAddSelectOption(e,i)}}return n},getSelectionOptionsFromCondition:function(e,t,n){const o=[];for(const i of e){const e=s.getSelectionOption(i,t,n);if(e){o.push(e)}}return o},getSelectionOption:function(e,t,o){let r;let c;const p=e.operator&&e.operator!==""?i.getOperator(e.operator):undefined;if(p instanceof a){r=s.createSemanticDatesFromConditions(e);c=s.getOptionForPropertyWithRangeOperator(p,e,t,o)}else{const o=n.getSemanticDateOperations();if(o.includes(e.operator)){r=s.createSemanticDatesFromConditions(e)}c=s.getSelectionFormatForNonRangeOperator(e,t)}if(c?.Option){c.SemanticDates=r?r:undefined}return c},getSelectionFormatForNonRangeOperator:function(e,t){const[n,o]=e.values;return s.getSelectOption(e.operator,n!==undefined&&n!==null?n.toString():"",o!==undefined&&o!==null?o.toString():null,t)},getTypeInfoForFilterProperty:function(e,t){const n=t.getProperty(e);let o;if(n){o=n.typeConfig}return o},getOptionForPropertyWithRangeOperator:function(e,t,n,o){const i={Sign:"I",Option:"",Low:"",High:""};const a=s.getTypeInfoForFilterProperty(n,o);const c=e.getModelFilter(t,n,a?a.typeInstance:undefined,false,a?a.baseType:undefined);const p=c.getFilters();if(p===undefined){i.Sign=e.exclude?"E":"I";i.Low=r.externalizeValue(c.getValue1(),a?a.typeInstance:"string");i.High=r.externalizeValue(c.getValue2(),a?a.typeInstance:"string");i.Option=c.getOperator()??""}return i.Option!=""?i:undefined},getSelectOption:function(t,n,o,i){const a={Option:"",Sign:"I",Low:n,High:o};switch(t){case"Contains":a.Option="CP";a.Low=`*${a.Low}*`;break;case"StartsWith":a.Option="CP";a.Low+="*";break;case"EndsWith":a.Option="CP";a.Low=`*${a.Low}`;break;case"BT":case"LE":case"LT":case"GT":case"GE":case"EQ":a.Option=t;break;case"DATE":a.Option="EQ";break;case"DATERANGE":a.Option="BT";break;case"FROM":a.Option="GE";break;case"TO":a.Option="LE";break;case"EEQ":a.Option="EQ";break;case"Empty":a.Option="EQ";a.Low="";break;case"NE":a.Sign="E";a.Option="EQ";break;case"NotContains":a.Option="CP";a.Sign="E";a.Low=`*${a.Low}*`;break;case"NOTBT":a.Option="BT";a.Sign="E";break;case"NotStartsWith":a.Option="CP";a.Low+="*";a.Sign="E";break;case"NotEndsWith":a.Option="CP";a.Low=`*${a.Low}`;a.Sign="E";break;case"NotEmpty":a.Option="EQ";a.Low="";a.Sign="E";break;case"NOTLE":a.Option="LE";a.Sign="E";break;case"NOTGE":a.Option="GE";a.Sign="E";break;case"NOTLT":a.Option="LT";a.Sign="E";break;case"NOTGT":a.Option="GT";a.Sign="E";break;default:e.warning(`${t} is not supported. ${i} could not be added to the Selection variant`)}if(a.Option!=="BT"){a.High=null}return a.Option!==""?a:undefined},createSemanticDatesFromConditions:function(e){if(!t(e)){return{high:e.values[0]!==undefined&&e.values[0]!==null?e.values[0]:null,low:e.values[1]!==undefined&&e.values[1]!==null?e.values[1]:null,operator:e.operator}}}};return s},false);
//# sourceMappingURL=StateFilterToSelectionVariant.js.map