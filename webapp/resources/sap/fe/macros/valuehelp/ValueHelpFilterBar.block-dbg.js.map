{"version":3,"names":["ValueHelpFilterBarBlock","_dec","defineBuildingBlock","name","namespace","fragment","_dec2","blockAttribute","type","_dec3","required","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","blockEvent","_dec16","_class","_class2","_BuildingBlockTemplat","props","controlConfiguration","settings","_this","call","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","metaModel","contextPath","getModel","metaPathContext","metaPath","metaPathPath","getPath","dataModelObjectPath","getInvolvedDataModelObjects","converterContext","getConverterContext","undefined","selectionFields","getSelectionFields","TemplateModel","createBindingContext","targetEntitySet","expandFilterFields","getExpandFilterFields","annotations","Capabilities","FilterRestrictions","_valueList","_exports","_inheritsLoose","BuildingBlockTemplatingBase","_applyDecoratedDescriptor","prototype","configurable","enumerable","writable","initializer"],"sourceRoot":".","sources":["ValueHelpFilterBar.block.ts"],"sourcesContent":["import type { EntitySet } from \"@sap-ux/vocabularies-types\";\nimport type { ValueList } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport TemplateModel from \"sap/fe/core/TemplateModel\";\nimport { blockAttribute, blockEvent, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/templating/BuildingBlockSupport\";\nimport type { TemplateProcessorSettings } from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplateProcessor\";\nimport BuildingBlockTemplatingBase from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplatingBase\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { getExpandFilterFields, getSelectionFields } from \"sap/fe/core/converters/controls/ListReport/FilterBar\";\nimport type FilterBarP13nMode from \"sap/ui/mdc/enums/FilterBarP13nMode\";\nimport type Context from \"sap/ui/model/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type { MetaModelType } from \"types/metamodel_types\";\nimport type { EventHandler } from \"../../../../../../../types/extension_types\";\n\n/**\n * Building block for creating a FilterBar based on the metadata provided by OData V4 for the value help dialog.\n * @private\n */\n@defineBuildingBlock({\n\tname: \"ValueHelpFilterBar\",\n\tnamespace: \"sap.fe.macros.valuehelp\",\n\tfragment: \"sap.fe.macros.valuehelp.ValueHelpFilterBar\"\n})\nexport default class ValueHelpFilterBarBlock extends BuildingBlockTemplatingBase {\n\t/**\n\t * ID of the FilterBar\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tpublic id?: string;\n\n\t@blockAttribute({ type: \"sap.ui.model.Context\", required: true })\n\tpublic contextPath!: Context;\n\n\t@blockAttribute({ type: \"sap.ui.model.Context\" })\n\tpublic metaPath?: Context;\n\n\t/**\n\t * Don't show the basic search field\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tpublic hideBasicSearch = false;\n\n\t/**\n\t * Enables the fallback to show all fields of the EntityType as filter fields if com.sap.vocabularies.UI.v1.SelectionFields are not present\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tenableFallback = false;\n\n\t/**\n\t * Specifies the personalization options for the filter bar.\n\t */\n\t@blockAttribute({ type: \"sap.ui.mdc.FilterBarP13nMode[]\" })\n\tpublic p13nMode: FilterBarP13nMode[] = [];\n\n\t/**\n\t * Specifies the Sematic Date Range option for the filter bar.\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tpublic useSemanticDateRange = true;\n\n\t/**\n\t * If set the search will be automatically triggered, when a filter value was changed.\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tpublic liveMode = false;\n\n\t/**\n\t * Temporary workaround only\n\t * path to valuelist\n\t */\n\t@blockAttribute({ type: \"sap.ui.model.Context\", required: true })\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\tpublic _valueList!: Context;\n\n\t/**\n\t * selectionFields to be displayed\n\t */\n\t@blockAttribute({ type: \"sap.ui.model.Context\" })\n\tpublic selectionFields?: Context;\n\n\t/**\n\t * Filter conditions to be applied to the filter bar\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tpublic filterConditions?: string;\n\n\t/**\n\t * If set to <code>true</code>, all search requests are ignored. Once it has been set to <code>false</code>,\n\t * a search is triggered immediately if one or more search requests have been triggered in the meantime\n\t * but were ignored based on the setting.\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tpublic suspendSelection = false;\n\n\t/**\n\t * Determines whether the Show/Hide Filters button is in the state show or hide.\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tprivate expandFilterFields = true;\n\n\t/**\n\t * Search handler name\n\t */\n\t@blockEvent()\n\tsearch?: EventHandler;\n\n\t/**\n\t * Filters changed handler name\n\t */\n\t@blockEvent()\n\tfilterChanged?: EventHandler;\n\n\tconstructor(props: PropertiesOf<ValueHelpFilterBarBlock>, controlConfiguration: unknown, settings: TemplateProcessorSettings) {\n\t\tsuper(props);\n\n\t\tconst metaModel = this.contextPath.getModel() as ODataMetaModel;\n\n\t\tconst metaPathContext = this.metaPath;\n\t\tconst metaPathPath = metaPathContext?.getPath();\n\t\tconst dataModelObjectPath = getInvolvedDataModelObjects(this.contextPath);\n\t\tconst converterContext = this.getConverterContext(dataModelObjectPath, undefined, settings);\n\n\t\tif (!this.selectionFields) {\n\t\t\tconst selectionFields = getSelectionFields(converterContext, [], metaPathPath).selectionFields;\n\t\t\tthis.selectionFields = new TemplateModel(selectionFields, metaModel).createBindingContext(\"/\");\n\t\t}\n\n\t\tconst targetEntitySet: EntitySet = dataModelObjectPath.targetEntitySet as EntitySet; // It could be a singleton but the annotaiton are not defined there (yet?)\n\t\tthis.expandFilterFields = getExpandFilterFields(\n\t\t\tconverterContext,\n\t\t\ttargetEntitySet.annotations.Capabilities?.FilterRestrictions,\n\t\t\tthis._valueList as unknown as MetaModelType<ValueList>\n\t\t);\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"ValueHelpFilterBar.block-dbg.js"}