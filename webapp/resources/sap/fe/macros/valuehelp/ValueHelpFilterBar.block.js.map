{"version":3,"file":"ValueHelpFilterBar.block.js","names":["ValueHelpFilterBarBlock","_dec","defineBuildingBlock","name","namespace","fragment","_dec2","blockAttribute","type","_dec3","required","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","blockEvent","_dec16","_class","_class2","_BuildingBlockTemplat","props","controlConfiguration","settings","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","metaModel","contextPath","getModel","metaPathContext","metaPath","metaPathPath","getPath","dataModelObjectPath","getInvolvedDataModelObjects","converterContext","getConverterContext","undefined","selectionFields","getSelectionFields","TemplateModel","createBindingContext","targetEntitySet","expandFilterFields","getExpandFilterFields","annotations","Capabilities","FilterRestrictions","_valueList","_exports","_inheritsLoose","BuildingBlockTemplatingBase","_applyDecoratedDescriptor","prototype","configurable","enumerable","writable","initializer"],"sources":["./ValueHelpFilterBar.block.ts"],"sourcesContent":["import type { EntitySet } from \"@sap-ux/vocabularies-types\";\nimport type { ValueList } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport TemplateModel from \"sap/fe/core/TemplateModel\";\nimport { blockAttribute, blockEvent, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/templating/BuildingBlockSupport\";\nimport type { TemplateProcessorSettings } from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplateProcessor\";\nimport BuildingBlockTemplatingBase from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplatingBase\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { getExpandFilterFields, getSelectionFields } from \"sap/fe/core/converters/controls/ListReport/FilterBar\";\nimport type FilterBarP13nMode from \"sap/ui/mdc/enums/FilterBarP13nMode\";\nimport type Context from \"sap/ui/model/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type { MetaModelType } from \"types/metamodel_types\";\nimport type { EventHandler } from \"../../../../../../../types/extension_types\";\n\n/**\n * Building block for creating a FilterBar based on the metadata provided by OData V4 for the value help dialog.\n * @private\n */\n@defineBuildingBlock({\n\tname: \"ValueHelpFilterBar\",\n\tnamespace: \"sap.fe.macros.valuehelp\",\n\tfragment: \"sap.fe.macros.valuehelp.ValueHelpFilterBar\"\n})\nexport default class ValueHelpFilterBarBlock extends BuildingBlockTemplatingBase {\n\t/**\n\t * ID of the FilterBar\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tpublic id?: string;\n\n\t@blockAttribute({ type: \"sap.ui.model.Context\", required: true })\n\tpublic contextPath!: Context;\n\n\t@blockAttribute({ type: \"sap.ui.model.Context\" })\n\tpublic metaPath?: Context;\n\n\t/**\n\t * Don't show the basic search field\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tpublic hideBasicSearch = false;\n\n\t/**\n\t * Enables the fallback to show all fields of the EntityType as filter fields if com.sap.vocabularies.UI.v1.SelectionFields are not present\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tenableFallback = false;\n\n\t/**\n\t * Specifies the personalization options for the filter bar.\n\t */\n\t@blockAttribute({ type: \"sap.ui.mdc.FilterBarP13nMode[]\" })\n\tpublic p13nMode: FilterBarP13nMode[] = [];\n\n\t/**\n\t * Specifies the Sematic Date Range option for the filter bar.\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tpublic useSemanticDateRange = true;\n\n\t/**\n\t * If set the search will be automatically triggered, when a filter value was changed.\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tpublic liveMode = false;\n\n\t/**\n\t * Temporary workaround only\n\t * path to valuelist\n\t */\n\t@blockAttribute({ type: \"sap.ui.model.Context\", required: true })\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\tpublic _valueList!: Context;\n\n\t/**\n\t * selectionFields to be displayed\n\t */\n\t@blockAttribute({ type: \"sap.ui.model.Context\" })\n\tpublic selectionFields?: Context;\n\n\t/**\n\t * Filter conditions to be applied to the filter bar\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tpublic filterConditions?: string;\n\n\t/**\n\t * If set to <code>true</code>, all search requests are ignored. Once it has been set to <code>false</code>,\n\t * a search is triggered immediately if one or more search requests have been triggered in the meantime\n\t * but were ignored based on the setting.\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tpublic suspendSelection = false;\n\n\t/**\n\t * Determines whether the Show/Hide Filters button is in the state show or hide.\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tprivate expandFilterFields = true;\n\n\t/**\n\t * Search handler name\n\t */\n\t@blockEvent()\n\tsearch?: EventHandler;\n\n\t/**\n\t * Filters changed handler name\n\t */\n\t@blockEvent()\n\tfilterChanged?: EventHandler;\n\n\tconstructor(props: PropertiesOf<ValueHelpFilterBarBlock>, controlConfiguration: unknown, settings: TemplateProcessorSettings) {\n\t\tsuper(props);\n\n\t\tconst metaModel = this.contextPath.getModel() as ODataMetaModel;\n\n\t\tconst metaPathContext = this.metaPath;\n\t\tconst metaPathPath = metaPathContext?.getPath();\n\t\tconst dataModelObjectPath = getInvolvedDataModelObjects(this.contextPath);\n\t\tconst converterContext = this.getConverterContext(dataModelObjectPath, undefined, settings);\n\n\t\tif (!this.selectionFields) {\n\t\t\tconst selectionFields = getSelectionFields(converterContext, [], metaPathPath).selectionFields;\n\t\t\tthis.selectionFields = new TemplateModel(selectionFields, metaModel).createBindingContext(\"/\");\n\t\t}\n\n\t\tconst targetEntitySet: EntitySet = dataModelObjectPath.targetEntitySet as EntitySet; // It could be a singleton but the annotaiton are not defined there (yet?)\n\t\tthis.expandFilterFields = getExpandFilterFields(\n\t\t\tconverterContext,\n\t\t\ttargetEntitySet.annotations.Capabilities?.FilterRestrictions,\n\t\t\tthis._valueList as unknown as MetaModelType<ValueList>\n\t\t);\n\t}\n}\n"],"mappings":"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","ignoreList":[]}