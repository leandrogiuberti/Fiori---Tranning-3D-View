/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/macros/field/FieldTemplating","sap/fe/macros/insights/CommonInsightsHelper"],function(e,t){"use strict";var a={};var r=t.createInsightsParams;var n=e.getTextBinding;function s(e){return e.getMeasures().map(e=>({name:e.getLabel(),value:"{"+e.getName()+"}"}))}a.getMeasures=s;function i(e,t){return e.getDimensions().filter(function(t){return e.getVisibleDimensions().includes(t.getName())}).map(e=>{const a=t.getPropertyDataModel(e.getName());const r=a?n(a,{},false,"extension.formatters.sapfe.formatWithBrackets"):undefined;return{name:e.getLabel(),value:`{${e.getName()}}`,displayValue:r}})}a.getDimensions=i;function o(e){const t=e.getAggregation("_vizFrame").getFeeds();const a=t.map(t=>t.getProperty("values").map(a=>{const r=l(e,a.getProperty("name"),a.getProperty("type"));const n={type:t.getProperty("type"),uid:t.getProperty("uid"),values:[r]};return n}));return a.flat()}a.getFeeds=o;function g(e,t){const a=e.plotArea?.dataPointStyle?.rules??[];a.forEach(e=>{e.dataContext={};if(t){e.dataContext[t]=e.displayName||""}return e});return e}function l(e,t,a){if(a==="Dimension"){const a=e.getDimensions();return a.filter(e=>e.getName()===t)[0].getLabel()||t}else{const a=e.getMeasures();return a.filter(e=>e.getName()===t)[0].getLabel()||t}}async function c(e){const t=e.content;const a=t.getControlDelegate()?.getInnerChart(t);if(!a){throw new Error("Cannot access chart.")}const n=await r("Analytical",e,t.getFilter());if(!n){return}n.entitySetPath=t.data("targetCollectionPath");n.requestParameters.queryUrl=a.getBinding("data").getDownloadUrl()??"";const l=i(a,e);const c={cardTitle:t.getHeader(),legendVisible:false,chartType:t.getChartType(),measures:s(a),dimensions:l,feeds:o(a),allowedChartTypes:a.getAvailableChartTypes().available,chartProperties:g(a.getAggregation("_vizFrame").getVizProperties(),l[0]?.name)};return{...n,content:c}}a.createChartCardParams=c;return a},false);
//# sourceMappingURL=AnalyticalInsightsHelper.js.map