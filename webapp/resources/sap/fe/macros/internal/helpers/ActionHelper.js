/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/base/BindingToolkit","sap/fe/core/helpers/BindingHelper","sap/fe/core/helpers/TypeGuards","sap/fe/macros/CommonHelper"],function(e,t,n,i){"use strict";var a=n.isPathAnnotationExpression;var o=t.bindingContextPathVisitor;var r=e.isPathInModelExpression;var s=e.getExpressionFromAnnotation;const l={getMultiSelectDisabledActions(e){const t=[];const n=e?.filter(e=>e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction")??[];for(const e of n){const n=e?.ActionTarget;if(n?.isBound===true){for(const e of n.parameters){if(a(e.annotations.UI?.Hidden)||a(e.annotations.Common?.FieldControl)){t.push(n.name)}}}}return t},getPressEventDataFieldForActionButton(e,t,n,a){const o=t.InvocationGrouping&&t.InvocationGrouping.$EnumMember==="com.sap.vocabularies.UI.v1.OperationGroupingType/ChangeSet"?"ChangeSet":"Isolated";n=n||{};n["invocationGrouping"]=i.addSingleQuotes(o);n["controlId"]=i.addSingleQuotes(e);n["operationAvailableMap"]=i.addSingleQuotes(a);n["model"]="${$source>/}.getModel()";n["label"]=t.Label&&i.addSingleQuotes(t.Label,true);return i.generateFunction(".editFlow.invokeAction",i.addSingleQuotes(t.Action),i.objectToString(n))},getNumberOfContextsExpression(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let n;const i=!t?"${internal>numberOfSelectedContexts}":"${internal>contextmenu/numberOfSelectedContexts}";if(e==="single"){n=i+" === 1"}else{n=i+" > 0"}return n},getOperationAvailableMap(e,t,n){let i={};if(e){e.forEach(e=>{if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"){const a=e.Action;if(!a?.includes("/")&&!e.Determining){if(t==="table"){i=this._getOperationAvailableMapOfTable(e,a,i,n)}else if(t==="chart"){i=this._getOperationAvailableMapOfChart(a,i,n)}}}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForActionGroup"){const a=this.getOperationAvailableMap(e.Actions,t,n);i={...i,...a}}})}return i},_getOperationAvailableMapOfTable(e,t,n,i){const a=e.ActionTarget;if(a?.annotations?.Core?.OperationAvailable===null){}else if(a?.parameters?.length){const e=a.parameters[0].fullyQualifiedName,l=s(a?.annotations?.Core?.OperationAvailable,[],undefined,t=>o(t,i.getConvertedTypes(),e));if(r(l)){n=this._addToMap(t,l.path,n)}else if(a?.annotations?.Core?.OperationAvailable!==undefined){n=this._addToMap(t,l,n)}}return n},_getOperationAvailableMapOfChart(e,t,n){let a=i.getActionPath(n.context,false,e,true);if(a===null){t=this._addToMap(e,null,t)}else{a=i.getActionPath(n.context,false,e);if(a.sProperty){t=this._addToMap(e,a.sProperty.substring(a.sBindingParameter.length+1),t)}}return t},_addToMap(e,t,n){if(e&&n){n[e]=t}return n},ensurePrimaryActionNeverOverflows(e){return e.map(e=>e.priority==="NeverOverflow"||!this.isPrimaryAction(e)?e:{...e,priority:"NeverOverflow"})},isPrimaryAction(e){const t=e.emphasized===true||e.type==="Emphasized";const n=e.criticality!==undefined&&e.criticality!==null;return t||n}};return l},false);
//# sourceMappingURL=ActionHelper.js.map