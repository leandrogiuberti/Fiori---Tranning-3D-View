/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/base/BindingToolkit","sap/fe/base/ClassSupport","sap/fe/core/buildingBlocks/BuildingBlock","sap/fe/core/helpers/StableIdHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/CriticalityFormatters","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/PropertyHelper","sap/fe/core/templating/SemanticObjectHelper","sap/fe/core/templating/UIFormatters","sap/fe/macros/field/FieldTemplating","sap/fe/macros/internal/helpers/DataPointTemplating","sap/fe/macros/quickView/QuickView","sap/m/ObjectNumber","sap/m/ObjectStatus","sap/m/ProgressIndicator","sap/m/RatingIndicator","../field/FieldRuntimeHelper","./DataPointFormatOptions","sap/fe/base/jsx-runtime/jsx"],function(t,e,i,a,r,n,s,o,l,u,c,d,p,h,f,g,b,m,O,P,v){"use strict";var y,j,V,M,x,D,I,F,z,w,S,T,k;var C={};var B=p.getValueFormatted;var E=p.buildFieldBindingExpression;var N=p.buildExpressionForProgressIndicatorPercentValue;var A=p.buildExpressionForProgressIndicatorDisplayValue;var L=d.isUsedInNavigationWithQuickViewFacets;var Q=d.getVisibleExpression;var R=u.getPropertyWithSemanticObject;var U=l.hasUnit;var H=l.hasCurrency;var W=o.getRelativePaths;var _=o.enhanceDataModelPath;var q=s.buildExpressionForCriticalityIcon;var G=s.buildExpressionForCriticalityColor;var $=n.isProperty;var J=r.generate;var K=i.property;var X=i.defineUI5Class;var Y=i.association;var Z=i.aggregation;var tt=e.getExpressionFromAnnotation;var et=e.compileExpression;function it(t,e,i,a){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(a):void 0})}function at(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,rt(t,e)}function rt(t,e){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rt(t,e)}function nt(t,e,i,a,r){var n={};return Object.keys(a).forEach(function(t){n[t]=a[t]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=i.slice().reverse().reduce(function(i,a){return a(t,e,i)||i},n),r&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(r):void 0,n.initializer=void 0),void 0===n.initializer?(Object.defineProperty(t,e,n),null):n}function st(t,e){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let ot=(y=X("sap.fe.macros.internal.DataPoint"),j=Y({type:"string"}),V=K({type:"string",required:true}),M=K({type:"string"}),x=Z({type:"sap.fe.macros.internal.DataPointFormatOptions",multiple:false,defaultClass:P}),D=K({type:"string",isBindingInfo:true}),y(I=(F=function(e){function i(t,i){var a;a=e.call(this,t,i)||this;it(a,"idPrefix",z,a);it(a,"metaPath",w,a);it(a,"contextPath",S,a);it(a,"formatOptions",T,a);it(a,"value",k,a);a.hasQuickView=false;return a}C=i;at(i,e);var a=i.prototype;a.onMetadataAvailable=function t(){this.getTemplatingObjects();if(!this.content){this.content=this.createContent()}};a.getTemplatingObjects=function t(){const e=this.getDataModelObjectForMetaPath(this.metaPath,this.contextPath);if(!e){return}let i;this.visible=Q(e);if(e?.targetObject?.Value?.path){i=_(e,e.targetObject.Value.path)}this.dataModelPath=e;this.valueDataModelPath=i};a.getDataPointVisualization=function t(e){if(e.targetObject?.Visualization==="UI.VisualizationType/Rating"){this.visualization="Rating";return}if(e.targetObject?.Visualization==="UI.VisualizationType/Progress"){this.visualization="Progress";return}const i=this.valueDataModelPath&&this.valueDataModelPath.targetObject;this.hasQuickView=(i&&L(e,i))??false;if(this.valueDataModelPath&&R(this.valueDataModelPath)){this.hasQuickView=true}if(this.hasQuickView!==true){if($(i)&&(U(i)||H(i))){this.visualization="ObjectNumber";return}}this.visualization="ObjectStatus"};a.getEnabled=function t(){if(this.content?.isA("sap.m.ObjectStatus")){return this.content.getActive()}else{return true}};a.setEnabled=function t(e){if(this.content?.isA("sap.m.ObjectStatus")){this.content.setProperty("active",e)}else{throw"setEnabled isn't implemented for this field type"}return this};a.createRatingIndicator=function t(e){const i=e.targetObject;const a=this.getTargetValueBinding(e);const r=i?.Value||"";const n=r?.$target?.type;let s;if(n==="Edm.Decimal"&&i?.ValueFormat){if(i.ValueFormat.NumberOfFractionalDigits){s=i.ValueFormat.NumberOfFractionalDigits}}const o=B(this.valueDataModelPath,r,n,s);return v(m,{id:this.idPrefix?J([this.idPrefix,"RatingIndicator-Field-display"]):undefined,maxValue:a,value:this.value??et(o),tooltip:this.getTooltipValue(e),iconSize:this.formatOptions?.iconSize,class:this.formatOptions?.showLabels??false?"sapUiTinyMarginTopBottom":undefined,editable:"false",ariaLabelledBy:this.ariaLabelledBy})};a.createProgressIndicator=function t(e){const i=e.targetObject?G(e.targetObject,e):undefined;const a=A(e);const r=N(e);return v(b,{id:this.idPrefix?J([this.idPrefix,"ProgressIndicator-Field-display"]):undefined,displayValue:a,percentValue:r,state:i,tooltip:this.getTooltipValue(e),ariaLabelledBy:this.ariaLabelledBy})};a.createObjectNumber=function t(e){const i=e.targetObject?G(e.targetObject,e):undefined;const a=this.formatOptions?.showEmptyIndicator??false?"On":undefined;const r=E(e,this.formatOptions,true);const n=this.getManifestWrapper()?.getSapFeManifestConfiguration()?.app?.showOnlyUnitDecimals===true;const s=this.getManifestWrapper()?.getSapFeManifestConfiguration()?.app?.preserveDecimalsForCurrency===true;const o=this.formatOptions?.measureDisplayMode==="Hidden"?undefined:et(c.getBindingForUnitOrCurrency(this.valueDataModelPath,true,n,s));return v(f,{id:this.idPrefix?J([this.idPrefix,"ObjectNumber-Field-display"]):undefined,state:i,number:this.value??r,unit:o,visible:this.visible,emphasized:"false",class:this.formatOptions?.dataPointStyle==="large"?"sapMObjectNumberLarge":undefined,tooltip:this.getTooltipValue(e),emptyIndicatorMode:a})};a.createDependents=function t(){if(this.hasQuickView){return new h(this.valueDataModelPath,this.metaPath,this.contextPath??"").createContent()}return undefined};a.createObjectStatus=function t(e){let i=e.targetObject?G(e.targetObject,e):undefined;if(i==="None"&&this.valueDataModelPath){i=this.hasQuickView?"Information":"None"}const a=this.formatOptions?.showEmptyIndicator??false?"On":undefined;const r=E(e,this.formatOptions,false);const n=this.formatOptions?.dataPointStyle==="large"||!e.targetObject?undefined:q(e.targetObject,e);return v(g,{id:this.idPrefix?J([this.idPrefix,"ObjectStatus-Field-display"]):undefined,class:this.formatOptions?.dataPointStyle==="large"?"sapMObjectStatusLarge sapMObjectStatusLongText":undefined,icon:n,tooltip:this.getTooltipValue(e),state:i,text:this.value??r,emptyIndicatorMode:a,active:this.hasQuickView,press:O.pressLink,ariaLabelledBy:this.ariaLabelledBy,reactiveAreaMode:this.formatOptions?.reactiveAreaMode,children:{dependents:this.createDependents()}})};a.getTooltipValue=function t(e){return e.targetObject?.annotations?.Common?.QuickInfo?tt(e.targetObject?.annotations?.Common?.QuickInfo,W(e)):undefined};a.getTargetValueBinding=function t(e){return e.targetObject?.TargetValue?tt(e.targetObject?.TargetValue,W(e)):undefined};a.createContent=function t(){if(!this.dataModelPath){return undefined}this.getDataPointVisualization(this.dataModelPath);switch(this.visualization){case"Rating":{return this.createRatingIndicator(this.dataModelPath)}case"Progress":{return this.createProgressIndicator(this.dataModelPath)}case"ObjectNumber":{return this.createObjectNumber(this.dataModelPath)}default:{return this.createObjectStatus(this.dataModelPath)}}};a.getValue=function t(){if(this.content?.isA("sap.m.ObjectStatus")){return this.content.getText()}else if(this.content?.isA("sap.m.ObjectNumber")){return this.content.getNumber()}else if(this.content?.isA("sap.m.ProgressIndicator")){return this.content.getDisplayValue()}else if(this.content?.isA("sap.m.RatingIndicator")){return this.content.getValue().toString()}else{this.getProperty("value")}};a.setValue=function e(i){this.setProperty("value",i);if(this.content?.isA("sap.m.ObjectStatus")){this.content.setText(i)}else if(this.content?.isA("sap.m.ObjectNumber")){this.content.setNumber(i)}else if(this.content?.isA("sap.m.ProgressIndicator")){t.error("setValue isn't implemented for this field type yet")}else if(this.content?.isA("sap.m.RatingIndicator")){this.content.setValue(i)}return this};return i}(a),z=nt(F.prototype,"idPrefix",[j],{configurable:true,enumerable:true,writable:true,initializer:null}),w=nt(F.prototype,"metaPath",[V],{configurable:true,enumerable:true,writable:true,initializer:null}),S=nt(F.prototype,"contextPath",[M],{configurable:true,enumerable:true,writable:true,initializer:null}),T=nt(F.prototype,"formatOptions",[x],{configurable:true,enumerable:true,writable:true,initializer:null}),k=nt(F.prototype,"value",[D],{configurable:true,enumerable:true,writable:true,initializer:null}),F))||I);C=ot;return C},false);
//# sourceMappingURL=DataPoint.js.map