{"version":3,"names":["columnNotAlreadyDefined","columnDefs","vhKey","some","column","path","AnnotationLabel","AnnotationText","AnnotationTextUITextArrangement","AnnotationValueListParameterIn","AnnotationValueListParameterConstant","AnnotationValueListParameterOut","AnnotationValueListParameterInOut","AnnotationValueListWithFixedValues","AnnotationsPersonalDataPotentiallySensitive","AnnotationsValueListRelevantQualifiers","_exports","_getDefaultSortPropertyName","valueListInfo","sortFieldName","metaModel","$model","getMetaModel","entitySetAnnotations","getObject","CollectionPath","sortRestrictionsInfo","getSortRestrictionsInfo","foundElement","Parameters","find","element","$Type","ValueListProperty","propertyInfo","sortable","undefined","_redundantDescription","oVLParameter","aColumnInfo","oColumnInfo","columnInfo","textColumnName","keyColumnHidden","keyColumnDisplayFormat","_hasImportanceHigh","oValueListContext","oParameter","$EnumMember","_build$SelectString","control","oViewData","getModel","oData","getData","aColumns","columns","reduce","sQuery","oProperty","includes","_getValueHelpColumnDisplayFormat","oPropertyAnnotations","isValueHelpWithFixedValues","sDisplayMode","CommonUtils","computeDisplayMode","oTextAnnotation","oTextArrangementAnnotation","$Path","getPresentationVariant","valueList","presentationVariantQualifier","PresentationVariantQualifier","presentationVariantPath","ValueListHelper","getValueListCollectionEntitySet","mValueList","createBindingContext","isTreeTableType","RecursiveHierarchyQualifier","getTableDelegate","sDefaultSortPropertyName","presentationVariant","recursiveHierarchyQualifier","initialExpansionLevel","InitialExpansionLevel","getSortConditionsFromPresentationVariant","isSuggestion","asCustomdata","arguments","length","SortOrder","sortConditions","sorters","forEach","condition","sorter","propertyPath","Property","$PropertyPath","name","Descending","descending","ascending","push","stringConverter","CommonHelper","stringifyCustomData","JSON","stringify","getSortConditionsForValueList","sortConditionsFromPresentationVariant","getPropertyPath","oParameters","UnboundAction","EntityTypePath","Action","substring","lastIndexOf","getValueListProperty","oPropertyContext","oValueListModel","getColumnVisibility","oValueList","oSource","isDropDownList","valueHelpWithFixedValues","isVisible","columnInfos","isDialogTable","columnWithHiddenAnnotation","columnName","hasHiddenAnnotation","getColumnVisibilityInfo","sPropertyFullPath","bIsDropDownListe","oMetaModel","aColumnInfos","oColumnInfos","getTableItemsParameters","requestGroupId","itemParameters","selectString","selectStringPart","isSuspended","defaultSortPropertyName","join","hasImportance","getMinScreenWidth","getColumnWidth","isValueListWithFixedValues","isSmallDevice","targetObject","property","relatedProperty","additionalProperty","getAssociatedTextProperty","getAssociatedCurrencyProperty","getAssociatedUnitProperty","getAssociatedTimezoneProperty","textAnnotation","annotations","Common","Text","textArrangement","UI","TextArrangement","toString","label","Label","displayMode","getDisplayMode","size","instances","prop","propertyTypeConfig","getTypeConfig","PropertyODataConstructor","ObjectPath","get","type","formatOptions","constraints","sWidth","Util","calcColumnWidth","parseFloat","replace","Log","error","getOutParameterPaths","aParameters","sPath","endsWith","entityIsSearchable","propertyAnnotations","collectionAnnotations","searchSupported","SearchSupported","searchable","Searchable","_getConditionPath","entitySet","parts","split","conditionPath","partialPath","part","shift","$kind","$isCollection","_getColumnDefinitionFromSelectionFields","entityTypeAnnotations","selectionFields","selectionField","selectionFieldPath","columnDef","filterable","isPropertyFilterable","_mergeColumnDefinitionsFromProperties","valueListProperty","columnPath","columnPropertyType","textPropertyPath","textPath","filterInOutParameters","vhParameters","typeFilter","filter","parameter","parmeterType","getInParameters","getOutParameters","createVHUIModel","valueHelp","vhUIModel","JSONModel","setModel","setProperty","_getDialogTitle","valuehelpLabel","propertyLabel","getProperty","dataFieldLabel","getControl","destroyVHContent","getDialog","destroyContent","getTypeahead","putDefaultQualifierFirst","qualifiers","indexDefaultVH","indexOf","unshift","splice","_getContextPrefix","bindingContext","propertyBindingParts","getPath","bindigContextParts","contextPrefixParts","i","_getVhParameter","conditionModel","contextPrefix","vhMetaModel","localDataPropertyPath","valuePath","getBindingContext","getParent","isA","_parameterIsA","firstNavigationProperty","oBoundEntity","getMetaContext","sPathOfTable","getRowBinding","filterBarAPI","filterBarMetaPath","metaPath","valueHelpContextPath","getMetaPath","contextMetaPath","MetaPath","convertTypes","newPath","getMetaPathForPath","getTarget","targetEntitySet","getClosestEntitySet","getMetaPathForObject","getRelativePath","source","helpPath","constantValue","Constant","initialValueIsSignificant","Boolean","InitialValueIsSignificant","parameterTypes","_enrichPath","propertyName","externalIdPath","key","externalIdProperty","pop","fieldPropertyPath","descriptionPath","_enrichKeys","vhKeys","getInAndOutParametersList","_getEntityType","metaModelVH","entitySetPath","requestObject","_processParameters","annotationValueListType","valueHelpQualifier","payload","entityType","isForMultiValueField","useMultiValueField","$Key","firstKey","LocalDataProperty","isPotentiallySensitive","vhParameter","valuelistInfo","keyPath","_logError","status","message","Error","String","msg","getValueListInfo","valueListInfos","propertyPathParts","valueListByQualifier","requestValueListInfo","valueHelpQualifiers","Object","keys","$qualifier","err","ALLFRAGMENTS","logFragment","_logTemplatedFragments","fragmentName","fragmentDefinition","logInfo","fragment","getLevel","Level","DEBUG","setTimeout","_templateFragment","sourceModel","containingView","getTargetView","appComponent","getAppComponent","localValueListInfo","valueListModel","valueListServiceMetaModel","viewData","converterType","XMLPreprocessor","process","XMLTemplateProcessor","loadTemplate","bindingContexts","contextPath","models","templateComponent","getController","getOwnerComponent","runAsOwner","Fragment","load","definition","controller","_getContentId","valueHelpId","isTypeahead","contentType","_addInOutParametersToPayload","vhProperties","Set","add","Array","from","textArrangementAnnotation","_getWidthInRem","isUnitValueHelp","width","$","floatWidth","Rem","fromPx","isNaN","_getTableWidth","table","minWidth","isMultiSelect","getColumns","visibleColumns","getVisible","initialSum","sumWidth","sum","getWidth","Math","max","_getJSONModelForDialog","content","isDropDownListe","id","getId","groupId","bSuggestion","_getJSONModelForCondition","caseSensitive","_getJSONModelForTypeahead","contentId","_createValueHelpTypeahead","setKeyPath","setDescriptionPath","history","enabled","checkHistoryEnabled","data","info","getMetadata","getName","setTable","field","tableMode","getMaxConditions","setMode","addEventDelegate","onAfterRendering","ResizeHandler","register","_setTableWidth","reduceWidthForUnitValueHelp","tableWidth","setWidth","historySettings","getManifestEntry","fields","historyEnabled","isValueListSearchable","valueListMetamodel","_createValueHelpDialog","conditionContent","sourceModelDialog","firstTypeAheadContent","getContent","getCaseSensitive","sourceModelCondition","addDependent","setValueHelp","conditionTable","getTable","tablePromise","filterBarPromise","filterBar","Promise","all","setFilterBar","setFilter","initialized","setCopyProviderVisibility","mdcTable","_setShowP13nButton","getCopyProvider","setVisible","_getContentById","contentList","item","_createPopoverContent","useAsValueHelp","MTable","group","_createDialogContent","forceBind","MDCTable","_showConditionsContent","container","conditionsContent","Conditions","addContent","_alignOrCreateContent","showConditionPanel","FetchValues","insertContent","_prepareValueHelpTypeAhead","qualifierForTypeahead","subValueListInfo","getUseAsValueHelp","removeContent","_prepareValueHelpDialog","selectedContentId","contentListItem","hasOperatorEQ","getOperators","selectedInfo","selectedContent","title","getTranslatedTextFromExpBindingString","setTitle","_addDescriptionInfosToPayload","valueHelpDescriptionPath","convertedMetadata","propertyDescriptionPath","resolvePath","target","valueHelpKeyPath","maxLength","externalIdFullPath","showValueList","map","col"],"sourceRoot":".","sources":["ValueListHelper.ts"],"sourcesContent":["import type { EntityType, PathAnnotationExpression, Property } from \"@sap-ux/vocabularies-types\";\nimport { CommonAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport type { PresentationVariant } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport ObjectPath from \"sap/base/util/ObjectPath\";\nimport type { CompiledBindingToolkitExpression } from \"sap/fe/base/BindingToolkit\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type { MetaModelPropertyAnnotations } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { convertTypes } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { getSortRestrictionsInfo, isPropertyFilterable } from \"sap/fe/core/helpers/MetaModelFunction\";\nimport MetaPath from \"sap/fe/core/helpers/MetaPath\";\nimport type { FieldDataType } from \"sap/fe/core/services/ValueHelpHistoryServiceFactory\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport {\n\tgetAssociatedCurrencyProperty,\n\tgetAssociatedTextProperty,\n\tgetAssociatedTimezoneProperty,\n\tgetAssociatedUnitProperty\n} from \"sap/fe/core/templating/PropertyHelper\";\nimport { getDisplayMode, getTypeConfig } from \"sap/fe/core/templating/UIFormatters\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport type FilterBarAPI from \"sap/fe/macros/filterBar/FilterBarAPI\";\nimport type Table from \"sap/m/Table\";\nimport Util from \"sap/m/table/Util\";\nimport type Control from \"sap/ui/core/Control\";\nimport Fragment from \"sap/ui/core/Fragment\";\nimport ResizeHandler from \"sap/ui/core/ResizeHandler\";\nimport XMLTemplateProcessor from \"sap/ui/core/XMLTemplateProcessor\";\nimport XMLPreprocessor from \"sap/ui/core/util/XMLPreprocessor\";\nimport Rem from \"sap/ui/dom/units/Rem\";\nimport type Field from \"sap/ui/mdc/Field\";\nimport type FilterField from \"sap/ui/mdc/FilterField\";\nimport type MultiValueField from \"sap/ui/mdc/MultiValueField\";\nimport type MdcInnerTable from \"sap/ui/mdc/Table\";\nimport type ValueHelp from \"sap/ui/mdc/ValueHelp\";\nimport type FieldBase from \"sap/ui/mdc/field/FieldBase\";\nimport type MdcFilterBar from \"sap/ui/mdc/filterbar/FilterBarBase\";\nimport type FilterBar from \"sap/ui/mdc/valuehelp/FilterBar\";\nimport type Container from \"sap/ui/mdc/valuehelp/base/Container\";\nimport type Content from \"sap/ui/mdc/valuehelp/base/Content\";\nimport Conditions from \"sap/ui/mdc/valuehelp/content/Conditions\";\nimport MDCTable, { type $MDCTableSettings } from \"sap/ui/mdc/valuehelp/content/MDCTable\";\nimport MTable, { type $MTableSettings } from \"sap/ui/mdc/valuehelp/content/MTable\";\nimport type BaseContext from \"sap/ui/model/Context\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type ODataType from \"sap/ui/model/odata/type/ODataType\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport type { MetaModelEntitySetAnnotation, MetaModelType } from \"types/metamodel_types\";\n\nexport type AnnotationValueListParameter = {\n\t$Type: string;\n\tValueListProperty: string;\n\tLocalDataProperty?: {\n\t\t$PropertyPath: string;\n\t};\n\tConstant?: string;\n\tInitialValueIsSignificant?: boolean;\n\t[\"@com.sap.vocabularies.UI.v1.Importance\"]?: {\n\t\t$EnumMember: string;\n\t};\n};\n\ntype LogFragmentMethod = (info: { path: string; fragmentName: string; fragment: unknown }) => void;\n\n// com.sap.vocabularies.Common.v1.ValueListType\nexport type AnnotationValueListType = {\n\t$Type: string; // CommonAnnotationTypes.ValueListType;\n\tLabel?: string;\n\tCollectionPath: string;\n\tCollectionRoot?: string;\n\tDistinctValuesSupported?: boolean;\n\tSearchSupported?: boolean;\n\tFetchValues?: number;\n\tPresentationVariantQualifier?: string;\n\tSelectionVariantQualifier?: string;\n\tParameters: AnnotationValueListParameter[];\n\t$model: ODataModel;\n\t$qualifier?: string; // defined in case of ValueListWithFixedValues\n};\n\nexport type AnnotationValueListTypeByQualifier = Record<string, AnnotationValueListType>;\n\nconst columnNotAlreadyDefined = (columnDefs: ColumnDef[], vhKey: string): boolean => !columnDefs.some((column) => column.path === vhKey);\n\nexport const AnnotationLabel = \"@com.sap.vocabularies.Common.v1.Label\",\n\tAnnotationText = \"@com.sap.vocabularies.Common.v1.Text\",\n\tAnnotationTextUITextArrangement = \"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\",\n\tAnnotationValueListParameterIn = \"com.sap.vocabularies.Common.v1.ValueListParameterIn\",\n\tAnnotationValueListParameterConstant = \"com.sap.vocabularies.Common.v1.ValueListParameterConstant\",\n\tAnnotationValueListParameterOut = \"com.sap.vocabularies.Common.v1.ValueListParameterOut\",\n\tAnnotationValueListParameterInOut = \"com.sap.vocabularies.Common.v1.ValueListParameterInOut\",\n\tAnnotationValueListWithFixedValues = \"@com.sap.vocabularies.Common.v1.ValueListWithFixedValues\",\n\tAnnotationsPersonalDataPotentiallySensitive = \"@com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive\",\n\tAnnotationsValueListRelevantQualifiers = \"@com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers\";\n\ntype AnnotationsForProperty = {\n\t\"@com.sap.vocabularies.Common.v1.ValueList\"?: {\n\t\tSearchSupported?: boolean;\n\t};\n\t\"@com.sap.vocabularies.Common.v1.Label\"?: string; // AnnotationLabel\n\t\"@com.sap.vocabularies.Common.v1.Text\"?: {\n\t\t// AnnotationText\n\t\t$Path: string;\n\t};\n\t\"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\"?: {\n\t\t// AnnotationTextUITextArrangement\n\t\t$EnumMember?: string;\n\t};\n\t\"@com.sap.vocabularies.UI.v1.HiddenFilter\"?: boolean;\n\t\"@com.sap.vocabularies.Common.v1.ValueListWithFixedValues\"?: boolean; // AnnotationValueListWithFixedValues\n\t\"@com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers\"?: string[];\n\t\"@com.sap.vocabularies.UI.v1.Hidden\"?: string;\n\t\"@com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive\"?: boolean;\n};\n\ntype AnnotationSelectionField = {\n\t$PropertyPath: string;\n};\n\ntype AnnotationsForEntityType = {\n\t\"@com.sap.vocabularies.UI.v1.SelectionFields\"?: AnnotationSelectionField[];\n};\n\ntype ColumnProperty = {\n\t$Type: string;\n\t$kind: string;\n\t$isCollection: boolean;\n};\n\nexport type InOutParameter = {\n\tparmeterType: string;\n\tsource: string;\n\thelpPath: string;\n\tinitialValueIsSignificant: boolean;\n\tconstantValue?: string | boolean;\n};\n\ntype ValueHelpPayloadInfo = {\n\tvhKeys?: string[];\n\tvhParameters?: InOutParameter[];\n\tvhProperties?: string[];\n};\n\ntype ValueHelpQualifierMap = Record<string, ValueHelpPayloadInfo>;\n\ntype HistoryPayload = {\n\tenabled?: boolean;\n\tdata?: FieldDataType[];\n\thasRelevantData?: boolean;\n};\n\nexport type ValueHelpPayload = {\n\tpropertyPath: string;\n\tqualifiers: ValueHelpQualifierMap;\n\tvalueHelpQualifier: string;\n\tconditionModel?: string;\n\tisActionParameterDialog?: boolean;\n\tisUnitValueHelp?: boolean;\n\trequestGroupId?: string;\n\tuseMultiValueField?: boolean;\n\tisValueListWithFixedValues?: boolean;\n\tvalueHelpDescriptionPath?: string;\n\tpropertyDescriptionPath?: string;\n\tmaxLength?: number;\n\tvalueHelpKeyPath?: string;\n\tisDefineConditionValueHelp?: boolean;\n\tisPotentiallySensitive?: boolean;\n\thistory?: HistoryPayload;\n\texternalIdPath?: string;\n};\n\ntype ColumnDef = {\n\tpath: string;\n\ttextPath?: string;\n\tlabel: string;\n\tsortable: boolean;\n\tfilterable: boolean | CompiledBindingToolkitExpression;\n\t$Type: string;\n};\n\nexport type ValueListInfo = {\n\tkeyPath: string;\n\tdescriptionPath: string;\n\tfieldPropertyPath: string;\n\tvhKeys: string[];\n\tvhParameters: InOutParameter[];\n\tvalueListInfo: AnnotationValueListType;\n\tcolumnDefs: ColumnDef[];\n\tvalueHelpQualifier: string;\n};\n\ntype DisplayFormat = \"Description\" | \"ValueDescription\" | \"Value\" | \"DescriptionValue\";\n\ntype Path = {\n\tfieldPropertyPath: string;\n\tdescriptionPath: string;\n\tkey: string;\n};\n\nexport type SorterType = {\n\tascending?: boolean;\n\tdescending?: boolean;\n\tpath?: string;\n\tname?: string;\n};\n\nfunction _getDefaultSortPropertyName(valueListInfo: AnnotationValueListType): string | undefined {\n\tlet sortFieldName: string | undefined;\n\tconst metaModel = valueListInfo.$model.getMetaModel();\n\tconst entitySetAnnotations = metaModel.getObject(`/${valueListInfo.CollectionPath}@`) || {};\n\tconst sortRestrictionsInfo = getSortRestrictionsInfo(entitySetAnnotations);\n\tconst foundElement = valueListInfo.Parameters.find(function (element) {\n\t\treturn (\n\t\t\t(element.$Type === CommonAnnotationTypes.ValueListParameterInOut ||\n\t\t\t\telement.$Type === CommonAnnotationTypes.ValueListParameterOut ||\n\t\t\t\telement.$Type === CommonAnnotationTypes.ValueListParameterDisplayOnly) &&\n\t\t\t!(\n\t\t\t\tmetaModel.getObject(`/${valueListInfo.CollectionPath}/${element.ValueListProperty}@com.sap.vocabularies.UI.v1.Hidden`) ===\n\t\t\t\ttrue\n\t\t\t)\n\t\t);\n\t});\n\tif (foundElement) {\n\t\tif (\n\t\t\tmetaModel.getObject(\n\t\t\t\t`/${valueListInfo.CollectionPath}/${foundElement.ValueListProperty}@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement/$EnumMember`\n\t\t\t) === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly\"\n\t\t) {\n\t\t\tsortFieldName = metaModel.getObject(\n\t\t\t\t`/${valueListInfo.CollectionPath}/${foundElement.ValueListProperty}@com.sap.vocabularies.Common.v1.Text/$Path`\n\t\t\t);\n\t\t} else {\n\t\t\tsortFieldName = foundElement.ValueListProperty;\n\t\t}\n\t}\n\tif (sortFieldName && (!sortRestrictionsInfo.propertyInfo[sortFieldName] || sortRestrictionsInfo.propertyInfo[sortFieldName].sortable)) {\n\t\treturn sortFieldName;\n\t} else {\n\t\treturn undefined;\n\t}\n}\n\nfunction _redundantDescription(\n\toVLParameter: {\n\t\tValueListProperty: string;\n\t},\n\taColumnInfo: ColumnInfo[]\n): boolean | undefined {\n\tconst oColumnInfo = aColumnInfo.find(function (columnInfo: ColumnInfo) {\n\t\treturn oVLParameter.ValueListProperty === columnInfo.textColumnName;\n\t});\n\tif (\n\t\toVLParameter.ValueListProperty === oColumnInfo?.textColumnName &&\n\t\t!oColumnInfo.keyColumnHidden &&\n\t\toColumnInfo.keyColumnDisplayFormat !== \"Value\"\n\t) {\n\t\treturn true;\n\t}\n\treturn undefined;\n}\n\nfunction _hasImportanceHigh(oValueListContext: { Parameters: AnnotationValueListParameter[] }): boolean {\n\treturn oValueListContext.Parameters.some(function (oParameter: AnnotationValueListParameter) {\n\t\treturn (\n\t\t\toParameter[\"@com.sap.vocabularies.UI.v1.Importance\"] &&\n\t\t\toParameter[\"@com.sap.vocabularies.UI.v1.Importance\"].$EnumMember === \"com.sap.vocabularies.UI.v1.ImportanceType/High\"\n\t\t);\n\t});\n}\n\nfunction _build$SelectString(control: Control): string | undefined {\n\tconst oViewData = control.getModel(\"viewData\") as JSONModel;\n\tif (oViewData) {\n\t\tconst oData = oViewData.getData();\n\t\tif (oData) {\n\t\t\tconst aColumns = oData.columns;\n\t\t\tif (aColumns) {\n\t\t\t\treturn aColumns.reduce(function (\n\t\t\t\t\tsQuery: string,\n\t\t\t\t\toProperty: {\n\t\t\t\t\t\tpath?: string;\n\t\t\t\t\t}\n\t\t\t\t) {\n\t\t\t\t\t// Navigation properties (represented by X/Y) should not be added to $select.\n\t\t\t\t\t// TODO : They should be added as $expand=X($select=Y) instead\n\t\t\t\t\tif (oProperty.path && !oProperty.path.includes(\"/\")) {\n\t\t\t\t\t\tsQuery = sQuery ? `${sQuery},${oProperty.path}` : oProperty.path;\n\t\t\t\t\t}\n\t\t\t\t\treturn sQuery;\n\t\t\t\t}, undefined);\n\t\t\t}\n\t\t}\n\t}\n\treturn undefined;\n}\n\nfunction _getValueHelpColumnDisplayFormat(oPropertyAnnotations: MetaModelPropertyAnnotations, isValueHelpWithFixedValues: boolean): string {\n\tconst sDisplayMode = CommonUtils.computeDisplayMode(oPropertyAnnotations);\n\tconst oTextAnnotation = oPropertyAnnotations && oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text\"];\n\tconst oTextArrangementAnnotation =\n\t\toTextAnnotation && oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\"];\n\tif (isValueHelpWithFixedValues) {\n\t\treturn oTextAnnotation && typeof oTextAnnotation !== \"string\" && \"$Path\" in oTextAnnotation && oTextAnnotation.$Path\n\t\t\t? sDisplayMode\n\t\t\t: \"Value\";\n\t} else {\n\t\t// Only explicit defined TextArrangements in a Value Help with Dialog are considered\n\t\treturn oTextArrangementAnnotation ? sDisplayMode : \"Value\";\n\t}\n}\n\n/**\n * Retrieves the valueList's PresentationVariant.\n * @param valueList The valueList annotation\n * @returns The PresentationVariant (if any) of the valueList\n */\nfunction getPresentationVariant(valueList: AnnotationValueListType): MetaModelType<PresentationVariant> | undefined {\n\tconst presentationVariantQualifier = valueList.PresentationVariantQualifier ? `#${valueList.PresentationVariantQualifier}` : \"\";\n\tconst presentationVariantPath = `/${valueList.CollectionPath}/@com.sap.vocabularies.UI.v1.PresentationVariant${presentationVariantQualifier}`;\n\treturn valueList.$model.getMetaModel().getObject(presentationVariantPath) as MetaModelType<PresentationVariant> | undefined;\n}\n\ntype ColumnInfo = {\n\tkeyColumnHidden?: boolean;\n\tkeyColumnDisplayFormat?: string;\n\ttextColumnName?: string;\n\tcolumnName: string;\n\thasHiddenAnnotation?: boolean;\n};\nconst ValueListHelper = {\n\tgetValueListCollectionEntitySet: function (oValueListContext: Context): BaseContext | undefined {\n\t\tconst mValueList = oValueListContext.getObject();\n\t\treturn mValueList.$model.getMetaModel().createBindingContext(`/${mValueList.CollectionPath}`);\n\t},\n\n\t/**\n\t * Checks if the ValueList is annotated with a PresentationVariant.\n\t * If the PresentationVariant is annotated with a RecursiveHierarchyQualifier, the ValueList's table has to be a TreeTable.\n\t * @param valueList The valueList annotation\n\t * @returns True if the table has to be a TreeTable, false otherwise\n\t */\n\tisTreeTableType(valueList: AnnotationValueListType): boolean {\n\t\treturn getPresentationVariant(valueList)?.RecursiveHierarchyQualifier ? true : false;\n\t},\n\n\t/**\n\t * Gets the delegate for the ValueList's table.\n\t * @param valueList The valueList annotation\n\t * @returns The calculated delegate for the ValueList's table\n\t */\n\tgetTableDelegate: function (valueList: AnnotationValueListType): string {\n\t\tlet sDefaultSortPropertyName = _getDefaultSortPropertyName(valueList);\n\t\tif (sDefaultSortPropertyName) {\n\t\t\tsDefaultSortPropertyName = `'${sDefaultSortPropertyName}'`;\n\t\t}\n\t\tconst presentationVariant = getPresentationVariant(valueList);\n\t\tconst recursiveHierarchyQualifier = presentationVariant?.RecursiveHierarchyQualifier;\n\t\tif (recursiveHierarchyQualifier) {\n\t\t\tconst initialExpansionLevel = presentationVariant.InitialExpansionLevel;\n\t\t\treturn (\n\t\t\t\t\"{name: 'sap/fe/macros/internal/valuehelp/TableDelegate', payload: {collectionName: '\" +\n\t\t\t\tvalueList.CollectionPath +\n\t\t\t\t\"'\" +\n\t\t\t\t(sDefaultSortPropertyName ? \", defaultSortPropertyName: \" + sDefaultSortPropertyName : \"\") +\n\t\t\t\t\", hierarchyQualifier: '\" +\n\t\t\t\trecursiveHierarchyQualifier +\n\t\t\t\t\"'\" +\n\t\t\t\t(initialExpansionLevel ? \", initialExpansionLevel: \" + (initialExpansionLevel + 1) : \"\") +\n\t\t\t\t\"}}\"\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t\"{name: 'sap/fe/macros/internal/valuehelp/TableDelegate', payload: {collectionName: '\" +\n\t\t\tvalueList.CollectionPath +\n\t\t\t\"'\" +\n\t\t\t(sDefaultSortPropertyName ? \", defaultSortPropertyName: \" + sDefaultSortPropertyName : \"\") +\n\t\t\t\"}}\"\n\t\t);\n\t},\n\n\t/**\n\t * Gets the sort conditions set on the ValueList's PresentationVariant.\n\t * @param valueListInfo The valueList annotation\n\t * @param isSuggestion Indicates if the ValueList is used in a suggestion scenario\n\t * @param asCustomdata Indicates if the sort conditions should be returned as custom data\n\t * @returns The sort conditions if any, undefined otherwise\n\t */\n\tgetSortConditionsFromPresentationVariant: function (\n\t\tvalueListInfo: AnnotationValueListType,\n\t\tisSuggestion: boolean,\n\t\tasCustomdata = false\n\t): string | undefined {\n\t\tconst presentationVariant = getPresentationVariant(valueListInfo);\n\t\tif (presentationVariant?.SortOrder) {\n\t\t\tconst sortConditions = {\n\t\t\t\tsorters: [] as SorterType[]\n\t\t\t};\n\n\t\t\tpresentationVariant.SortOrder.forEach(function (condition) {\n\t\t\t\tconst sorter: SorterType = {},\n\t\t\t\t\tpropertyPath = condition?.Property?.$PropertyPath;\n\t\t\t\tif (isSuggestion) {\n\t\t\t\t\tsorter.path = propertyPath;\n\t\t\t\t} else {\n\t\t\t\t\tsorter.name = propertyPath;\n\t\t\t\t}\n\n\t\t\t\tif (condition.Descending) {\n\t\t\t\t\tsorter.descending = true;\n\t\t\t\t} else {\n\t\t\t\t\tsorter.ascending = true;\n\t\t\t\t}\n\t\t\t\tsortConditions.sorters.push(sorter);\n\t\t\t});\n\t\t\tconst stringConverter = asCustomdata ? CommonHelper.stringifyCustomData : JSON.stringify;\n\t\t\treturn isSuggestion ? `sorter: ${stringConverter(sortConditions.sorters)}` : stringConverter(sortConditions);\n\t\t}\n\t\treturn;\n\t},\n\n\t/**\n\t * Gets the sort conditions for the ValueList.\n\t * @param valueListInfo The ValueList annotation\n\t * @param isValueHelpWithFixedValues Indicates if ValueList has fixed values\n\t * @returns The sort conditions either from the presentation variant or the default one, undefined otherwise\n\t */\n\tgetSortConditionsForValueList: function (\n\t\tvalueListInfo: AnnotationValueListType,\n\t\tisValueHelpWithFixedValues: boolean\n\t): string | undefined {\n\t\tconst sortConditionsFromPresentationVariant = ValueListHelper.getSortConditionsFromPresentationVariant(valueListInfo, false);\n\n\t\tif (sortConditionsFromPresentationVariant) {\n\t\t\treturn sortConditionsFromPresentationVariant;\n\t\t}\n\t\tif (isValueHelpWithFixedValues) {\n\t\t\tconst sortConditions = {\n\t\t\t\tsorters: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: _getDefaultSortPropertyName(valueListInfo),\n\t\t\t\t\t\tascending: true\n\t\t\t\t\t}\n\t\t\t\t] as SorterType[]\n\t\t\t};\n\t\t\treturn JSON.stringify(sortConditions);\n\t\t}\n\t},\n\n\tgetPropertyPath: function (oParameters: { UnboundAction?: boolean; Property: string; EntityTypePath: string; Action: string }): string {\n\t\treturn !oParameters.UnboundAction\n\t\t\t? `${oParameters.EntityTypePath}/${oParameters.Action}/${oParameters.Property}`\n\t\t\t: `/${oParameters.Action.substring(oParameters.Action.lastIndexOf(\".\") + 1)}/${oParameters.Property}`;\n\t},\n\n\tgetValueListProperty: function (oPropertyContext: BaseContext): BaseContext | undefined {\n\t\tconst oValueListModel = oPropertyContext.getModel();\n\t\tconst mValueList = oValueListModel.getObject(\"/\") as unknown as { CollectionPath: string; $model: ODataModel };\n\t\treturn mValueList.$model.getMetaModel().createBindingContext(`/${mValueList.CollectionPath}/${oPropertyContext.getObject()}`);\n\t},\n\n\t// This function is used for value help m-table and mdc-table\n\tgetColumnVisibility: function (\n\t\toValueList: { Parameters: AnnotationValueListParameter[] },\n\t\toVLParameter: AnnotationValueListParameter,\n\t\toSource: {\n\t\t\tvalueHelpWithFixedValues: boolean;\n\t\t\tcolumnInfo: {\n\t\t\t\tisDialogTable: boolean;\n\t\t\t\tcolumnInfos: ColumnInfo[];\n\t\t\t};\n\t\t}\n\t): boolean {\n\t\tconst isDropDownList = oSource && !!oSource.valueHelpWithFixedValues,\n\t\t\toColumnInfo = oSource.columnInfo,\n\t\t\tisVisible = !_redundantDescription(oVLParameter, oColumnInfo.columnInfos),\n\t\t\tisDialogTable = oColumnInfo.isDialogTable;\n\n\t\tif (isDropDownList || (!isDropDownList && isDialogTable) || (!isDropDownList && !_hasImportanceHigh(oValueList))) {\n\t\t\tconst columnWithHiddenAnnotation = oColumnInfo.columnInfos.find(function (columnInfo: ColumnInfo) {\n\t\t\t\treturn oVLParameter.ValueListProperty === columnInfo.columnName && columnInfo.hasHiddenAnnotation === true;\n\t\t\t});\n\t\t\treturn !columnWithHiddenAnnotation ? isVisible : false;\n\t\t} else if (!isDropDownList && _hasImportanceHigh(oValueList)) {\n\t\t\treturn oVLParameter &&\n\t\t\t\toVLParameter[\"@com.sap.vocabularies.UI.v1.Importance\"] &&\n\t\t\t\toVLParameter[\"@com.sap.vocabularies.UI.v1.Importance\"].$EnumMember === \"com.sap.vocabularies.UI.v1.ImportanceType/High\"\n\t\t\t\t? true\n\t\t\t\t: false;\n\t\t}\n\t\treturn true;\n\t},\n\n\tgetColumnVisibilityInfo: function (\n\t\toValueList: {\n\t\t\t$model: ODataModel;\n\t\t\tCollectionPath: string;\n\t\t\tParameters: AnnotationValueListParameter[];\n\t\t},\n\t\tsPropertyFullPath: string,\n\t\tbIsDropDownListe: boolean,\n\t\tisDialogTable: boolean\n\t): {\n\t\tisDialogTable: boolean;\n\t\tcolumnInfos: ColumnInfo[];\n\t} {\n\t\tconst oMetaModel = oValueList.$model.getMetaModel();\n\t\tconst aColumnInfos: ColumnInfo[] = [];\n\t\tconst oColumnInfos = {\n\t\t\tisDialogTable: isDialogTable,\n\t\t\tcolumnInfos: aColumnInfos\n\t\t};\n\n\t\toValueList.Parameters.forEach(function (oParameter: AnnotationValueListParameter) {\n\t\t\tconst oPropertyAnnotations = oMetaModel.getObject(`/${oValueList.CollectionPath}/${oParameter.ValueListProperty}@`);\n\t\t\tconst oTextAnnotation = oPropertyAnnotations && oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text\"];\n\t\t\tlet columnInfo: ColumnInfo = {} as unknown as ColumnInfo;\n\t\t\tif (oTextAnnotation) {\n\t\t\t\tcolumnInfo = {\n\t\t\t\t\tkeyColumnHidden: oPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"] ? true : false,\n\t\t\t\t\tkeyColumnDisplayFormat: oTextAnnotation && _getValueHelpColumnDisplayFormat(oPropertyAnnotations, bIsDropDownListe),\n\t\t\t\t\ttextColumnName: oTextAnnotation && oTextAnnotation.$Path,\n\t\t\t\t\tcolumnName: oParameter.ValueListProperty,\n\t\t\t\t\thasHiddenAnnotation: oPropertyAnnotations && oPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"] ? true : false\n\t\t\t\t};\n\t\t\t} else if (oPropertyAnnotations && oPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"]) {\n\t\t\t\tcolumnInfo = {\n\t\t\t\t\tcolumnName: oParameter.ValueListProperty,\n\t\t\t\t\thasHiddenAnnotation: oPropertyAnnotations && oPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"] ? true : false\n\t\t\t\t};\n\t\t\t}\n\t\t\toColumnInfos.columnInfos.push(columnInfo);\n\t\t});\n\n\t\treturn oColumnInfos;\n\t},\n\n\tgetTableItemsParameters: function (\n\t\tthis: Control,\n\t\tvalueListInfo: AnnotationValueListType,\n\t\trequestGroupId: string,\n\t\tisSuggestion: boolean,\n\t\tisValueHelpWithFixedValues: boolean\n\t): string {\n\t\tconst itemParameters = [`path: '/${valueListInfo.CollectionPath}'`];\n\n\t\t// add select to oBindingInfo (BCP 2180255956 / 2170163012)\n\t\tconst selectString = _build$SelectString(this);\n\n\t\t// since there could be recommendations/recently used values to show in the suggestion popover\n\t\t// hence we need to create some transient contexts on the valueHelp list binding\n\t\t// so we will set the updateGroupId of the list binding to avoid sending calls to the backend\n\t\t// we need to explicitly set $$sharedRequest to false to make sure we can create transient contexts in RAP\n\t\tif (requestGroupId) {\n\t\t\tconst selectStringPart = selectString ? `, '${selectString}'` : \"\";\n\n\t\t\titemParameters.push(\n\t\t\t\t`parameters: {$$sharedRequest: false, $$updateGroupId: \"donotsubmit\", $$groupId: '${requestGroupId}'${selectStringPart}}`\n\t\t\t);\n\t\t} else if (selectString) {\n\t\t\titemParameters.push(`parameters: {$$sharedRequest: false, $$updateGroupId: \"donotsubmit\", $select: '${selectString}'}`);\n\t\t}\n\n\t\tconst isSuspended = valueListInfo.Parameters.some(function (oParameter) {\n\t\t\treturn isSuggestion || oParameter.$Type === CommonAnnotationTypes.ValueListParameterIn;\n\t\t});\n\t\titemParameters.push(`suspended: ${isSuspended}`);\n\n\t\tif (!isValueHelpWithFixedValues) {\n\t\t\titemParameters.push(\"length: 10\");\n\t\t}\n\n\t\tconst sortConditionsFromPresentationVariant = ValueListHelper.getSortConditionsFromPresentationVariant(valueListInfo, isSuggestion);\n\n\t\tif (sortConditionsFromPresentationVariant) {\n\t\t\titemParameters.push(sortConditionsFromPresentationVariant);\n\t\t} else if (isValueHelpWithFixedValues) {\n\t\t\tconst defaultSortPropertyName = _getDefaultSortPropertyName(valueListInfo);\n\n\t\t\tif (defaultSortPropertyName) {\n\t\t\t\titemParameters.push(`sorter: [{path: '${defaultSortPropertyName}', ascending: true}]`);\n\t\t\t}\n\t\t}\n\n\t\treturn \"{\" + itemParameters.join(\", \") + \"}\";\n\t},\n\n\t// Is needed for \"external\" representation in qunit\n\thasImportance: function (oValueListContext: Context): string {\n\t\treturn _hasImportanceHigh(oValueListContext.getObject()) ? \"Importance/High\" : \"None\";\n\t},\n\n\t// Is needed for \"external\" representation in qunit\n\tgetMinScreenWidth: function (oValueList: { Parameters: AnnotationValueListParameter[] }): string {\n\t\treturn _hasImportanceHigh(oValueList) ? \"{= ${_VHUI>/minScreenWidth}}\" : \"416px\";\n\t},\n\n\t/**\n\t * Retrieves the column width for a given property.\n\t * @param propertyPath The propertyPath\n\t * @param isValueListWithFixedValues An indicator stating if the valueHelp has fixed values\n\t * @returns The width as a string or undefined.\n\t */\n\tgetColumnWidth: function (propertyPath: DataModelObjectPath<Property>, isValueListWithFixedValues = false): string | undefined {\n\t\tif (CommonUtils.isSmallDevice() || !propertyPath.targetObject) return;\n\t\tconst property = propertyPath.targetObject;\n\t\tlet relatedProperty: Property[] = [property];\n\t\t// The additional property could refer to the text, currency, unit or timezone\n\t\tconst additionalProperty =\n\t\t\t\tgetAssociatedTextProperty(property) ||\n\t\t\t\tgetAssociatedCurrencyProperty(property) ||\n\t\t\t\tgetAssociatedUnitProperty(property) ||\n\t\t\t\tgetAssociatedTimezoneProperty(property),\n\t\t\ttextAnnotation = property.annotations?.Common?.Text,\n\t\t\ttextArrangement = textAnnotation?.annotations?.UI?.TextArrangement?.toString(),\n\t\t\tlabel = property.annotations?.Common?.Label?.toString();\n\t\tlet displayMode: string | undefined;\n\n\t\t// default textarrangement is only used for VH with fixed values\n\t\tif (isValueListWithFixedValues && !textArrangement) {\n\t\t\t//displayMode = as annotated or default\n\t\t\tdisplayMode = getDisplayMode(propertyPath);\n\t\t} else {\n\t\t\t//displayMode = as annotated or undefined\n\t\t\tdisplayMode = textArrangement && getDisplayMode(propertyPath);\n\t\t}\n\n\t\tif (additionalProperty) {\n\t\t\tif (displayMode === \"Description\") {\n\t\t\t\trelatedProperty = [additionalProperty];\n\t\t\t} else if (!textAnnotation || (displayMode && displayMode !== \"Value\")) {\n\t\t\t\trelatedProperty.push(additionalProperty);\n\t\t\t}\n\t\t}\n\n\t\tlet size = 0;\n\t\tconst instances: ODataType[] = [];\n\n\t\trelatedProperty.forEach((prop: Property) => {\n\t\t\tconst propertyTypeConfig = getTypeConfig(prop, undefined);\n\t\t\tconst PropertyODataConstructor = ObjectPath.get(propertyTypeConfig.type);\n\t\t\tif (PropertyODataConstructor) {\n\t\t\t\tinstances.push(new PropertyODataConstructor(propertyTypeConfig.formatOptions, propertyTypeConfig.constraints));\n\t\t\t}\n\t\t});\n\t\tconst sWidth = Util.calcColumnWidth(instances, label);\n\t\tsize = sWidth ? parseFloat(sWidth.replace(\"rem\", \"\")) : 0;\n\n\t\tif (size === 0) {\n\t\t\tLog.error(`Cannot compute the column width for property: ${property.name}`);\n\t\t}\n\t\treturn size <= 20 ? size.toString() + \"rem\" : \"20rem\";\n\t},\n\n\tgetOutParameterPaths: function (aParameters: AnnotationValueListParameter[]): string {\n\t\tlet sPath = \"\";\n\t\taParameters.forEach(function (oParameter: AnnotationValueListParameter) {\n\t\t\tif (oParameter.$Type.endsWith(\"Out\")) {\n\t\t\t\tsPath += `{${oParameter.ValueListProperty}}`;\n\t\t\t}\n\t\t});\n\t\treturn sPath;\n\t},\n\n\tentityIsSearchable: function (\n\t\tpropertyAnnotations: AnnotationsForProperty,\n\t\tcollectionAnnotations: MetaModelEntitySetAnnotation\n\t): boolean {\n\t\tconst searchSupported = propertyAnnotations[\"@com.sap.vocabularies.Common.v1.ValueList\"]?.SearchSupported,\n\t\t\tsearchable = collectionAnnotations[\"@Org.OData.Capabilities.V1.SearchRestrictions\"]?.Searchable;\n\n\t\tif (\n\t\t\t(searchable === undefined && searchSupported === false) ||\n\t\t\t(searchable === true && searchSupported === false) ||\n\t\t\tsearchable === false\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t * Returns the condition path required for the condition model.\n\t * For e.g. <1:N-PropertyName>*\\/<1:1-PropertyName>/<PropertyName>.\n\t * @param metaModel The metamodel instance\n\t * @param entitySet The entity set path\n\t * @param propertyPath The property path\n\t * @returns The formatted condition path\n\t * @private\n\t */\n\t_getConditionPath: function (metaModel: ODataMetaModel, entitySet: string, propertyPath: string): string {\n\t\t// (see also: sap/fe/core/converters/controls/ListReport/FilterBar.ts)\n\t\tconst parts = propertyPath.split(\"/\");\n\t\tlet conditionPath = \"\",\n\t\t\tpartialPath: string | undefined;\n\n\t\twhile (parts.length) {\n\t\t\tlet part = parts.shift() as string;\n\t\t\tpartialPath = partialPath ? `${partialPath}/${part}` : part;\n\t\t\tconst property = metaModel.getObject(`${entitySet}/${partialPath}`);\n\t\t\tif (property && property.$kind === \"NavigationProperty\" && property.$isCollection) {\n\t\t\t\tpart += \"*\";\n\t\t\t}\n\t\t\tconditionPath = conditionPath ? `${conditionPath}/${part}` : part;\n\t\t}\n\t\treturn conditionPath;\n\t},\n\n\t/**\n\t * Returns array of column definitions corresponding to properties defined as Selection Fields on the CollectionPath entity set in a ValueHelp.\n\t * @param metaModel The metamodel instance\n\t * @param entitySet The entity set path\n\t * @returns Array of column definitions\n\t * @private\n\t */\n\t_getColumnDefinitionFromSelectionFields: function (metaModel: ODataMetaModel, entitySet: string): ColumnDef[] {\n\t\tconst columnDefs: ColumnDef[] = [],\n\t\t\tentityTypeAnnotations = metaModel.getObject(`${entitySet}/@`) as AnnotationsForEntityType,\n\t\t\tselectionFields = entityTypeAnnotations[\"@com.sap.vocabularies.UI.v1.SelectionFields\"];\n\n\t\tif (selectionFields) {\n\t\t\tselectionFields.forEach(function (selectionField: AnnotationSelectionField) {\n\t\t\t\tconst selectionFieldPath = `${entitySet}/${selectionField.$PropertyPath}`,\n\t\t\t\t\tconditionPath = ValueListHelper._getConditionPath(metaModel, entitySet, selectionField.$PropertyPath),\n\t\t\t\t\tpropertyAnnotations = metaModel.getObject(`${selectionFieldPath}@`) as AnnotationsForProperty,\n\t\t\t\t\tcolumnDef = {\n\t\t\t\t\t\tpath: conditionPath,\n\t\t\t\t\t\tlabel: propertyAnnotations?.[AnnotationLabel] || selectionFieldPath,\n\t\t\t\t\t\tsortable: true,\n\t\t\t\t\t\tfilterable: isPropertyFilterable(metaModel, entitySet, selectionField.$PropertyPath, false),\n\t\t\t\t\t\t$Type: metaModel.getObject(selectionFieldPath)?.$Type\n\t\t\t\t\t};\n\t\t\t\tcolumnDefs.push(columnDef);\n\t\t\t});\n\t\t}\n\n\t\treturn columnDefs;\n\t},\n\n\t_mergeColumnDefinitionsFromProperties: function (\n\t\tcolumnDefs: ColumnDef[],\n\t\tvalueListInfo: AnnotationValueListType,\n\t\tvalueListProperty: string,\n\t\tproperty: ColumnProperty,\n\t\tpropertyAnnotations: AnnotationsForProperty\n\t): void {\n\t\tlet columnPath = valueListProperty,\n\t\t\tcolumnPropertyType = property.$Type;\n\t\tconst label = propertyAnnotations[AnnotationLabel] || columnPath,\n\t\t\ttextAnnotation = propertyAnnotations[AnnotationText];\n\n\t\tif (\n\t\t\ttextAnnotation &&\n\t\t\tpropertyAnnotations[AnnotationTextUITextArrangement]?.$EnumMember === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly\"\n\t\t) {\n\t\t\t// the column property is the one coming from the text annotation\n\t\t\tcolumnPath = textAnnotation.$Path;\n\t\t\tconst textPropertyPath = `/${valueListInfo.CollectionPath}/${columnPath}`;\n\t\t\tcolumnPropertyType = valueListInfo.$model.getMetaModel()?.getObject(textPropertyPath)?.$Type as string;\n\t\t}\n\n\t\tif (columnNotAlreadyDefined(columnDefs, columnPath)) {\n\t\t\tconst columnDef: ColumnDef = {\n\t\t\t\tpath: columnPath,\n\t\t\t\t// ensure the text associated with a column that references a navigation property reflects the same navigation structure as the column\n\t\t\t\ttextPath:\n\t\t\t\t\ttextAnnotation?.$Path && valueListProperty.includes(\"/\")\n\t\t\t\t\t\t? valueListProperty.substring(0, valueListProperty.lastIndexOf(\"/\")) + \"/\" + textAnnotation.$Path\n\t\t\t\t\t\t: textAnnotation?.$Path,\n\t\t\t\tlabel: label,\n\t\t\t\tsortable: true,\n\t\t\t\tfilterable: !propertyAnnotations[\"@com.sap.vocabularies.UI.v1.HiddenFilter\"],\n\t\t\t\t$Type: columnPropertyType\n\t\t\t};\n\t\t\tcolumnDefs.push(columnDef);\n\t\t}\n\t},\n\n\tfilterInOutParameters: function (vhParameters: InOutParameter[], typeFilter: string[]): InOutParameter[] {\n\t\treturn vhParameters.filter(function (parameter) {\n\t\t\treturn typeFilter.includes(parameter.parmeterType);\n\t\t});\n\t},\n\n\tgetInParameters: function (vhParameters: InOutParameter[]): InOutParameter[] {\n\t\treturn ValueListHelper.filterInOutParameters(vhParameters, [\n\t\t\tAnnotationValueListParameterIn,\n\t\t\tAnnotationValueListParameterConstant,\n\t\t\tAnnotationValueListParameterInOut\n\t\t]);\n\t},\n\n\tgetOutParameters: function (vhParameters: InOutParameter[]): InOutParameter[] {\n\t\treturn ValueListHelper.filterInOutParameters(vhParameters, [AnnotationValueListParameterOut, AnnotationValueListParameterInOut]);\n\t},\n\n\tcreateVHUIModel: function (valueHelp: ValueHelp, propertyPath: string, metaModel: ODataMetaModel): JSONModel {\n\t\t// setting the _VHUI model evaluated in the ValueListTable fragment\n\t\tconst vhUIModel = new JSONModel({}),\n\t\t\tpropertyAnnotations = metaModel.getObject(`${propertyPath}@`) as AnnotationsForProperty;\n\n\t\tvalueHelp.setModel(vhUIModel, \"_VHUI\");\n\t\t// Identifies the \"ContextDependent-Scenario\"\n\t\tvhUIModel.setProperty(\"/hasValueListRelevantQualifiers\", !!propertyAnnotations[AnnotationsValueListRelevantQualifiers]);\n\t\t/* Property label for dialog title */\n\t\tvhUIModel.setProperty(\"/propertyLabel\", propertyAnnotations[AnnotationLabel]);\n\n\t\treturn vhUIModel;\n\t},\n\n\t/**\n\t * Returns the title of the value help dialog.\n\t * By default, the data field label is used, otherwise either the property label or the value list label is used as a fallback.\n\t * For context-dependent value helps, by default the value list label is used, otherwise either the property label or the data field label is used as a fallback.\n\t * @param valueHelp The valueHelp instance\n\t * @param valuehelpLabel The label in the value help metadata\n\t * @returns The title for the valueHelp dialog\n\t * @private\n\t */\n\t_getDialogTitle: function (valueHelp: ValueHelp, valuehelpLabel: string | undefined): string {\n\t\tconst propertyLabel = (valueHelp.getModel(\"_VHUI\") as JSONModel).getProperty(\"/propertyLabel\");\n\t\tconst dataFieldLabel = valueHelp.getControl()?.getProperty(\"label\");\n\t\treturn (valueHelp.getModel(\"_VHUI\") as JSONModel).getProperty(\"/hasValueListRelevantQualifiers\")\n\t\t\t? valuehelpLabel || propertyLabel || dataFieldLabel\n\t\t\t: dataFieldLabel || propertyLabel || valuehelpLabel;\n\t},\n\n\tdestroyVHContent: function (valueHelp: ValueHelp | undefined): void {\n\t\tif (valueHelp) {\n\t\t\tvalueHelp.getDialog()?.destroyContent();\n\t\t\tvalueHelp.getTypeahead()?.destroyContent();\n\t\t}\n\t},\n\n\tputDefaultQualifierFirst: function (qualifiers: string[]): string[] {\n\t\tconst indexDefaultVH = qualifiers.indexOf(\"\");\n\n\t\t// default ValueHelp without qualifier should be the first\n\t\tif (indexDefaultVH > 0) {\n\t\t\tqualifiers.unshift(qualifiers[indexDefaultVH]);\n\t\t\tqualifiers.splice(indexDefaultVH + 1, 1);\n\t\t}\n\t\treturn qualifiers;\n\t},\n\n\t_getContextPrefix: function (bindingContext: Context | undefined, propertyBindingParts: string[]): string {\n\t\tif (bindingContext && bindingContext.getPath()) {\n\t\t\tconst bindigContextParts = bindingContext.getPath().split(\"/\");\n\t\t\tif (propertyBindingParts.length - bindigContextParts.length > 1) {\n\t\t\t\tconst contextPrefixParts = [];\n\t\t\t\tfor (let i = bindigContextParts.length; i < propertyBindingParts.length - 1; i++) {\n\t\t\t\t\tcontextPrefixParts.push(propertyBindingParts[i]);\n\t\t\t\t}\n\t\t\t\treturn `${contextPrefixParts.join(\"/\")}/`;\n\t\t\t}\n\t\t}\n\n\t\treturn \"\";\n\t},\n\n\t_getVhParameter: function (\n\t\tconditionModel: string | undefined,\n\t\tvalueHelp: ValueHelp | undefined,\n\t\tcontextPrefix: string,\n\t\tparameter: AnnotationValueListParameter,\n\t\tvhMetaModel: ODataMetaModel,\n\t\tlocalDataPropertyPath: string\n\t): InOutParameter {\n\t\tlet valuePath: string | undefined = \"\";\n\t\tconst bindingContext = valueHelp?.getBindingContext();\n\t\tif (conditionModel && conditionModel.length > 0) {\n\t\t\tif (\n\t\t\t\tvalueHelp?.getParent()?.isA(\"sap.ui.mdc.Table\") === true &&\n\t\t\t\tbindingContext &&\n\t\t\t\tValueListHelper._parameterIsA(parameter, [\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterIn,\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterInOut\n\t\t\t\t])\n\t\t\t) {\n\t\t\t\t// Special handling for value help used in filter dialog\n\t\t\t\tconst parts = localDataPropertyPath.split(\"/\");\n\t\t\t\tif (parts.length > 1) {\n\t\t\t\t\tconst firstNavigationProperty = parts[0];\n\t\t\t\t\tconst oBoundEntity = vhMetaModel.getMetaContext(bindingContext.getPath());\n\t\t\t\t\tconst sPathOfTable = (valueHelp.getParent() as unknown as { getRowBinding: Function }).getRowBinding().getPath(); //TODO\n\t\t\t\t\tif (oBoundEntity.getObject(`${sPathOfTable}/$Partner`) === firstNavigationProperty) {\n\t\t\t\t\t\t// Using the condition model doesn't make any sense in case an in-parameter uses a navigation property\n\t\t\t\t\t\t// referring to the partner. Therefore using the FVH context instead of the condition model.\n\t\t\t\t\t\tvaluePath = localDataPropertyPath;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tvalueHelp?.getParent()?.getParent()?.getParent()?.isA<FilterBarAPI>(\"sap.fe.macros.filterBar.FilterBarAPI\") === true &&\n\t\t\t\tbindingContext &&\n\t\t\t\tValueListHelper._parameterIsA(parameter, [\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterIn,\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterInOut\n\t\t\t\t])\n\t\t\t) {\n\t\t\t\t// In case we are a value help of a FilterBar, we can go up to the API to check if we are on a filterbar representing a navigation property\n\t\t\t\tconst filterBarAPI = valueHelp.getParent()?.getParent()?.getParent() as FilterBarAPI;\n\t\t\t\tconst filterBarMetaPath = filterBarAPI.metaPath;\n\t\t\t\tconst valueHelpContextPath = vhMetaModel.getMetaPath(bindingContext.getPath());\n\t\t\t\tconst contextMetaPath = new MetaPath(convertTypes(vhMetaModel), valueHelpContextPath, valueHelpContextPath);\n\t\t\t\tconst metaPath = new MetaPath(convertTypes(vhMetaModel), filterBarMetaPath, valueHelpContextPath);\n\t\t\t\tconst newPath = metaPath.getMetaPathForPath<Property>(localDataPropertyPath);\n\t\t\t\tif (newPath && newPath.getTarget()) {\n\t\t\t\t\tconst targetEntitySet = newPath.getClosestEntitySet();\n\t\t\t\t\tif (targetEntitySet === contextMetaPath.getClosestEntitySet()) {\n\t\t\t\t\t\tvaluePath = contextMetaPath.getMetaPathForObject(newPath.getTarget())?.getRelativePath();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!valuePath) {\n\t\t\t\tvaluePath = conditionModel + \">/conditions/\" + localDataPropertyPath;\n\t\t\t}\n\t\t} else {\n\t\t\tvaluePath = contextPrefix + localDataPropertyPath;\n\t\t}\n\n\t\treturn {\n\t\t\tparmeterType: parameter.$Type,\n\t\t\tsource: valuePath,\n\t\t\thelpPath: parameter.ValueListProperty,\n\t\t\tconstantValue: parameter.Constant,\n\t\t\tinitialValueIsSignificant: Boolean(parameter.InitialValueIsSignificant)\n\t\t};\n\t},\n\n\t_parameterIsA(parameter: AnnotationValueListParameter, parameterTypes: CommonAnnotationTypes[]): boolean {\n\t\treturn parameterTypes.includes(parameter.$Type as CommonAnnotationTypes);\n\t},\n\n\t_enrichPath: function (\n\t\tpath: Path,\n\t\tpropertyPath: string,\n\t\tlocalDataPropertyPath: string,\n\t\tparameter: AnnotationValueListParameter,\n\t\tpropertyName: string | undefined,\n\t\tpropertyAnnotations: AnnotationsForProperty,\n\t\texternalIdPath: string | undefined\n\t): void {\n\t\tif (\n\t\t\t!path.key &&\n\t\t\tValueListHelper._parameterIsA(parameter, [CommonAnnotationTypes.ValueListParameterInOut]) &&\n\t\t\tlocalDataPropertyPath === propertyName\n\t\t) {\n\t\t\t/* EXTERNALID */\n\t\t\tconst externalIdProperty = externalIdPath?.split(\"/\").pop();\n\t\t\tparameter.ValueListProperty = externalIdProperty ? externalIdProperty : parameter.ValueListProperty;\n\t\t\tpath.fieldPropertyPath = propertyPath;\n\t\t\tpath.key = parameter.ValueListProperty;\n\n\t\t\t//Only the text annotation of the key can specify the description\n\t\t\tpath.descriptionPath = propertyAnnotations[AnnotationText]?.$Path || \"\";\n\t\t}\n\t},\n\n\t_enrichKeys: function (vhKeys: string[], parameter: AnnotationValueListParameter): void {\n\t\tif (\n\t\t\tValueListHelper._parameterIsA(parameter, ValueListHelper.getInAndOutParametersList()) &&\n\t\t\t!vhKeys.includes(parameter.ValueListProperty)\n\t\t) {\n\t\t\tvhKeys.push(parameter.ValueListProperty);\n\t\t}\n\t},\n\n\t_getEntityType: async function (metaModelVH: ODataMetaModel, entitySetPath: string): Promise<EntityType> {\n\t\treturn metaModelVH.getObject(`${entitySetPath}/`) || (await metaModelVH.requestObject(`${entitySetPath}/`));\n\t},\n\n\t/**\n\t * Method to pre-process a value list annotation before using them in the templating.\n\t * @param annotationValueListType\n\t * @param propertyName\n\t * @param conditionModel\n\t * @param valueHelp\n\t * @param contextPrefix\n\t * @param metaModel\n\t * @param valueHelpQualifier\n\t * @param payload\n\t * @param entityType\n\t * @returns The ValueListInfo to be used in templating\n\t */\n\t_processParameters: function (\n\t\tannotationValueListType: AnnotationValueListType,\n\t\tpropertyName: string | undefined,\n\t\tconditionModel: string | undefined,\n\t\tvalueHelp: ValueHelp | undefined,\n\t\tcontextPrefix: string,\n\t\tmetaModel: ODataMetaModel,\n\t\tvalueHelpQualifier: string,\n\t\tpayload: ValueHelpPayload | undefined,\n\t\tentityType: EntityType | undefined\n\t): ValueListInfo | undefined {\n\t\tconst isForMultiValueField = payload?.useMultiValueField;\n\t\tconst metaModelVH = annotationValueListType.$model.getMetaModel(),\n\t\t\tentitySetPath = `/${annotationValueListType.CollectionPath}`;\n\t\tif (entityType === undefined) {\n\t\t\tLog.error(`Inconsistent value help metadata: Entity ${entitySetPath} is not defined`);\n\t\t\treturn;\n\t\t}\n\t\tconst columnDefs = ValueListHelper._getColumnDefinitionFromSelectionFields(metaModelVH, entitySetPath),\n\t\t\tvhParameters: InOutParameter[] = [],\n\t\t\tpath: Path = {\n\t\t\t\tfieldPropertyPath: \"\",\n\t\t\t\tdescriptionPath: \"\",\n\t\t\t\tkey: \"\"\n\t\t\t};\n\t\tlet vhKeys: string[] = [];\n\n\t\tif (\"$Key\" in entityType && entityType.$Key) {\n\t\t\tvhKeys = [...(entityType.$Key as string[])];\n\t\t}\n\t\tconst firstKey = vhKeys[0];\n\n\t\tfor (const parameter of annotationValueListType.Parameters) {\n\t\t\t//All String fields are allowed for filter\n\t\t\tconst propertyPath = `/${annotationValueListType.CollectionPath}/${parameter.ValueListProperty}`,\n\t\t\t\tproperty = metaModelVH.getObject(propertyPath),\n\t\t\t\tpropertyAnnotations = payload?.externalIdPath\n\t\t\t\t\t? ((metaModelVH.getObject(`/${payload?.externalIdPath}@`) || {}) as AnnotationsForProperty)\n\t\t\t\t\t: ((metaModelVH.getObject(`${propertyPath}@`) || {}) as AnnotationsForProperty),\n\t\t\t\tlocalDataPropertyPath = parameter.LocalDataProperty?.$PropertyPath || \"\";\n\n\t\t\tif (payload && propertyAnnotations[AnnotationsPersonalDataPotentiallySensitive]) {\n\t\t\t\tpayload.isPotentiallySensitive = true;\n\t\t\t}\n\n\t\t\t// If property is undefined, then the property coming for the entry isn't defined in\n\t\t\t// the metamodel, therefore we don't need to add it in the in/out parameters\n\t\t\tif (property) {\n\t\t\t\t// Search for the *out Parameter mapped to the local property\n\t\t\t\tValueListHelper._enrichPath(\n\t\t\t\t\tpath,\n\t\t\t\t\tpropertyPath,\n\t\t\t\t\tlocalDataPropertyPath,\n\t\t\t\t\tparameter,\n\t\t\t\t\tpropertyName,\n\t\t\t\t\tpropertyAnnotations,\n\t\t\t\t\tpayload?.externalIdPath\n\t\t\t\t);\n\n\t\t\t\tconst valueListProperty = parameter.ValueListProperty;\n\t\t\t\tValueListHelper._mergeColumnDefinitionsFromProperties(\n\t\t\t\t\tcolumnDefs,\n\t\t\t\t\tannotationValueListType,\n\t\t\t\t\tvalueListProperty,\n\t\t\t\t\tproperty,\n\t\t\t\t\tpropertyAnnotations\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t//In and InOut and Out\n\t\t\tif (\n\t\t\t\t(ValueListHelper._parameterIsA(parameter, [\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterIn,\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterOut,\n\t\t\t\t\tCommonAnnotationTypes.ValueListParameterInOut\n\t\t\t\t]) &&\n\t\t\t\t\tlocalDataPropertyPath !== propertyName) ||\n\t\t\t\tValueListHelper._parameterIsA(parameter, [CommonAnnotationTypes.ValueListParameterOut])\n\t\t\t) {\n\t\t\t\tconst vhParameter = ValueListHelper._getVhParameter(\n\t\t\t\t\tconditionModel,\n\t\t\t\t\tvalueHelp,\n\t\t\t\t\tcontextPrefix,\n\t\t\t\t\tparameter,\n\t\t\t\t\tmetaModel,\n\t\t\t\t\tlocalDataPropertyPath\n\t\t\t\t);\n\t\t\t\tif (\n\t\t\t\t\t!isForMultiValueField ||\n\t\t\t\t\t(isForMultiValueField && ValueListHelper._parameterIsA(parameter, [CommonAnnotationTypes.ValueListParameterIn]))\n\t\t\t\t) {\n\t\t\t\t\t// in case of Multivalue Field we disregard ValueListParameterInOut\n\t\t\t\t\tvhParameters.push(vhParameter);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//Constant as InParamter for filtering\n\t\t\tif (parameter.$Type === AnnotationValueListParameterConstant) {\n\t\t\t\tvhParameters.push({\n\t\t\t\t\tparmeterType: parameter.$Type,\n\t\t\t\t\tsource: parameter.ValueListProperty,\n\t\t\t\t\thelpPath: parameter.ValueListProperty,\n\t\t\t\t\tconstantValue: parameter.Constant,\n\t\t\t\t\tinitialValueIsSignificant: Boolean(parameter.InitialValueIsSignificant)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Enrich keys with out-parameters\n\t\t\tValueListHelper._enrichKeys(vhKeys, parameter);\n\t\t}\n\t\tif (!path.key) {\n\t\t\tpath.key = firstKey;\n\t\t\tconst propertyPath = `/${annotationValueListType.CollectionPath}/${firstKey}`;\n\t\t\tconst propertyAnnotations = (metaModelVH.getObject(`${propertyPath}@`) || {}) as AnnotationsForProperty;\n\t\t\t// We update path.descriptionPath for the key property\n\t\t\tpath.descriptionPath = propertyAnnotations[AnnotationText]?.$Path || \"\";\n\t\t}\n\n\t\t/* Ensure that vhKeys are part of the columnDefs, otherwise it is not considered in $select (BCP 2270141154) */\n\t\tfor (const vhKey of vhKeys) {\n\t\t\tif (columnNotAlreadyDefined(columnDefs, vhKey)) {\n\t\t\t\tconst columnDef: ColumnDef = {\n\t\t\t\t\tpath: vhKey,\n\t\t\t\t\t$Type: metaModelVH.getObject(`/${annotationValueListType.CollectionPath}/${path.key}`)?.$Type,\n\t\t\t\t\tlabel: \"\",\n\t\t\t\t\tsortable: false,\n\t\t\t\t\tfilterable: undefined\n\t\t\t\t};\n\t\t\t\tcolumnDefs.push(columnDef);\n\t\t\t}\n\t\t}\n\n\t\tconst valuelistInfo: ValueListInfo = {\n\t\t\tkeyPath: path.key,\n\t\t\tdescriptionPath: path.descriptionPath,\n\t\t\tfieldPropertyPath: path.fieldPropertyPath,\n\t\t\tvhKeys: vhKeys,\n\t\t\tvhParameters: vhParameters,\n\t\t\tvalueListInfo: annotationValueListType,\n\t\t\tcolumnDefs: columnDefs,\n\t\t\tvalueHelpQualifier\n\t\t};\n\t\treturn valuelistInfo;\n\t},\n\n\t_logError: function (propertyPath: string, error?: unknown): void {\n\t\tconst status = error ? (error as XMLHttpRequest).status : undefined;\n\t\tconst message = error instanceof Error ? error.message : String(error);\n\t\tconst msg = status === 404 ? `Metadata not found (${status}) for value help of property ${propertyPath}` : message;\n\n\t\tLog.error(msg);\n\t},\n\t/**\n\t * Method to compute the value list infos based on the value list annotations before using them at templating.\n\t * @param valueHelp\n\t * @param propertyPath\n\t * @param payload\n\t * @param metaModel\n\t * @returns The value list infos\n\t */\n\tgetValueListInfo: async function (\n\t\tvalueHelp: ValueHelp | undefined,\n\t\tpropertyPath: string,\n\t\tpayload: ValueHelpPayload | undefined,\n\t\tmetaModel: ODataMetaModel\n\t): Promise<ValueListInfo[]> {\n\t\tconst bindingContext = valueHelp?.getBindingContext() as Context | undefined,\n\t\t\tconditionModel = payload?.conditionModel,\n\t\t\tvalueListInfos: ValueListInfo[] = [],\n\t\t\tpropertyPathParts = propertyPath.split(\"/\");\n\t\ttry {\n\t\t\tconst valueListByQualifier = await metaModel.requestValueListInfo(propertyPath, true, bindingContext);\n\t\t\tconst valueHelpQualifiers = ValueListHelper.putDefaultQualifierFirst(Object.keys(valueListByQualifier)),\n\t\t\t\tpropertyName = propertyPathParts.pop();\n\n\t\t\tconst contextPrefix =\n\t\t\t\tpayload?.useMultiValueField === true ? ValueListHelper._getContextPrefix(bindingContext, propertyPathParts) : \"\";\n\n\t\t\tfor (const valueHelpQualifier of valueHelpQualifiers) {\n\t\t\t\t// Add column definitions for properties defined as Selection fields on the CollectionPath entity set.\n\t\t\t\tconst annotationValueListType = valueListByQualifier[valueHelpQualifier];\n\t\t\t\tconst metaModelVH = annotationValueListType.$model.getMetaModel(),\n\t\t\t\t\tentitySetPath = `/${annotationValueListType.CollectionPath}`;\n\t\t\t\tconst entityType = await ValueListHelper._getEntityType(metaModelVH, entitySetPath);\n\t\t\t\tconst valueListInfo = ValueListHelper._processParameters(\n\t\t\t\t\tannotationValueListType,\n\t\t\t\t\tpropertyName,\n\t\t\t\t\tconditionModel,\n\t\t\t\t\tvalueHelp,\n\t\t\t\t\tcontextPrefix,\n\t\t\t\t\tmetaModel,\n\t\t\t\t\tannotationValueListType.$qualifier ?? valueHelpQualifier, // for ValueListWithFixedValues, get the qualifier from $qualifier\n\t\t\t\t\tpayload,\n\t\t\t\t\tentityType\n\t\t\t\t);\n\t\t\t\t/* Only consistent value help definitions shall be part of the value help */\n\t\t\t\tif (valueListInfo) {\n\t\t\t\t\tvalueListInfos.push(valueListInfo);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tthis._logError(propertyPath, err);\n\n\t\t\tValueListHelper.destroyVHContent(valueHelp);\n\t\t}\n\t\treturn valueListInfos;\n\t},\n\n\tALLFRAGMENTS: [] as {\n\t\tpath: string;\n\t\tfragmentName: string;\n\t\tfragment: unknown;\n\t}[],\n\tlogFragment: undefined as LogFragmentMethod | undefined,\n\n\t_logTemplatedFragments: function (propertyPath: string, fragmentName: string, fragmentDefinition: unknown): void {\n\t\tconst logInfo = {\n\t\t\tpath: propertyPath,\n\t\t\tfragmentName: fragmentName,\n\t\t\tfragment: fragmentDefinition\n\t\t};\n\t\tif (Log.getLevel() === Log.Level.DEBUG) {\n\t\t\t//In debug mode we log all generated fragments\n\t\t\tValueListHelper.ALLFRAGMENTS = ValueListHelper.ALLFRAGMENTS || [];\n\t\t\tValueListHelper.ALLFRAGMENTS.push(logInfo);\n\t\t}\n\t\tif (ValueListHelper.logFragment) {\n\t\t\t//One Tool Subscriber allowed\n\t\t\tsetTimeout(function () {\n\t\t\t\tValueListHelper.logFragment?.(logInfo);\n\t\t\t}, 0);\n\t\t}\n\t},\n\n\t_templateFragment: async function <T extends Table | MdcInnerTable | MdcFilterBar | ValueHelp>(\n\t\tfragmentName: string,\n\t\tvalueListInfo: ValueListInfo,\n\t\tsourceModel: JSONModel,\n\t\tpropertyPath: string,\n\t\tvalueHelp: ValueHelp\n\t): Promise<T> {\n\t\tconst containingView = CommonUtils.getTargetView(valueHelp);\n\t\tconst appComponent = CommonUtils.getAppComponent(CommonUtils.getTargetView(valueHelp));\n\n\t\tconst localValueListInfo = valueListInfo.valueListInfo,\n\t\t\tvalueListModel = new JSONModel(localValueListInfo),\n\t\t\tvalueListServiceMetaModel = localValueListInfo.$model.getMetaModel(),\n\t\t\tviewData = new JSONModel({\n\t\t\t\tconverterType: \"ListReport\",\n\t\t\t\tcolumns: valueListInfo.columnDefs || null\n\t\t\t});\n\n\t\tconst fragmentDefinition = await XMLPreprocessor.process(\n\t\t\tXMLTemplateProcessor.loadTemplate(fragmentName, \"fragment\"),\n\t\t\t{ name: fragmentName },\n\t\t\t{\n\t\t\t\tbindingContexts: {\n\t\t\t\t\tvalueList: valueListModel.createBindingContext(\"/\"),\n\t\t\t\t\tcontextPath: valueListServiceMetaModel.createBindingContext(`/${localValueListInfo.CollectionPath}/`),\n\t\t\t\t\tsource: sourceModel.createBindingContext(\"/\")\n\t\t\t\t},\n\t\t\t\tmodels: {\n\t\t\t\t\tvalueList: valueListModel,\n\t\t\t\t\tcontextPath: valueListServiceMetaModel,\n\t\t\t\t\tsource: sourceModel,\n\t\t\t\t\tmetaModel: valueListServiceMetaModel,\n\t\t\t\t\tviewData: viewData\n\t\t\t\t},\n\t\t\t\tappComponent\n\t\t\t}\n\t\t);\n\t\tValueListHelper._logTemplatedFragments(propertyPath, fragmentName, fragmentDefinition);\n\t\tconst templateComponent = containingView.getController()?.getOwnerComponent();\n\t\tif (templateComponent) {\n\t\t\treturn templateComponent.runAsOwner(async () => {\n\t\t\t\treturn (await Fragment.load({\n\t\t\t\t\tdefinition: fragmentDefinition,\n\t\t\t\t\tcontroller: containingView.getController()\n\t\t\t\t})) as T;\n\t\t\t});\n\t\t} else {\n\t\t\treturn (await Fragment.load({\n\t\t\t\tdefinition: fragmentDefinition,\n\t\t\t\tcontroller: containingView.getController()\n\t\t\t})) as T;\n\t\t}\n\t},\n\n\t_getContentId: function (valueHelpId: string, valueHelpQualifier: string, isTypeahead: boolean): string {\n\t\tconst contentType = isTypeahead ? \"Popover\" : \"Dialog\";\n\n\t\treturn `${valueHelpId}::${contentType}::qualifier::${valueHelpQualifier}`;\n\t},\n\n\t_addInOutParametersToPayload: function (payload: ValueHelpPayload, valueListInfo: ValueListInfo): void {\n\t\tconst valueHelpQualifier = valueListInfo.valueHelpQualifier;\n\n\t\tif (!payload.qualifiers) {\n\t\t\tpayload.qualifiers = {};\n\t\t}\n\n\t\tif (!payload.qualifiers[valueHelpQualifier]) {\n\t\t\tconst vhProperties = new Set<string>();\n\t\t\tvalueListInfo.columnDefs.forEach((column) => {\n\t\t\t\tif (!column.path.includes(\"*\")) {\n\t\t\t\t\t// In case of 1..n the condition path includes a * so we have to remove this\n\t\t\t\t\tvhProperties.add(column.path);\n\t\t\t\t}\n\t\t\t\tif (column.textPath) {\n\t\t\t\t\tvhProperties.add(column.textPath);\n\t\t\t\t}\n\t\t\t});\n\t\t\tpayload.qualifiers[valueHelpQualifier] = {\n\t\t\t\tvhKeys: valueListInfo.vhKeys,\n\t\t\t\tvhParameters: valueListInfo.vhParameters,\n\t\t\t\tvhProperties: Array.from(vhProperties)\n\t\t\t};\n\t\t}\n\t},\n\n\t_getValueHelpColumnDisplayFormat: function (\n\t\tpropertyAnnotations: AnnotationsForProperty,\n\t\tisValueHelpWithFixedValues: boolean\n\t): DisplayFormat {\n\t\tconst displayMode = CommonUtils.computeDisplayMode(propertyAnnotations, undefined),\n\t\t\ttextAnnotation = propertyAnnotations && propertyAnnotations[AnnotationText],\n\t\t\ttextArrangementAnnotation = textAnnotation && propertyAnnotations[AnnotationTextUITextArrangement];\n\n\t\tif (isValueHelpWithFixedValues) {\n\t\t\treturn textAnnotation && typeof textAnnotation !== \"string\" && textAnnotation.$Path ? displayMode : \"Value\";\n\t\t} else {\n\t\t\t// Only explicit defined TextArrangements in a Value Help with Dialog are considered\n\t\t\treturn textArrangementAnnotation ? displayMode : \"Value\";\n\t\t}\n\t},\n\n\t_getWidthInRem: function (control: Control, isUnitValueHelp: boolean): number {\n\t\tlet width = control.$().width(); // JQuery\n\t\tif (isUnitValueHelp && width) {\n\t\t\twidth = 0.3 * width;\n\t\t}\n\t\tconst floatWidth = width ? parseFloat(String(Rem.fromPx(width))) : 0;\n\n\t\treturn isNaN(floatWidth) ? 0 : floatWidth;\n\t},\n\n\t_getTableWidth: function (table: Table, minWidth: number, isMultiSelect: boolean): string {\n\t\tlet width: string;\n\t\tconst columns = table.getColumns(),\n\t\t\tvisibleColumns =\n\t\t\t\t(columns &&\n\t\t\t\t\tcolumns.filter(function (column) {\n\t\t\t\t\t\treturn column && column.getVisible && column.getVisible();\n\t\t\t\t\t})) ||\n\t\t\t\t[],\n\t\t\t// we add 1em for every column and 2.5em for a multiselect checkbox\n\t\t\tinitialSum = visibleColumns.length + (isMultiSelect ? 2.5 : 0),\n\t\t\tsumWidth = visibleColumns.reduce(function (sum, column) {\n\t\t\t\twidth = column.getWidth();\n\t\t\t\tif (width && width.endsWith(\"px\")) {\n\t\t\t\t\twidth = String(Rem.fromPx(width));\n\t\t\t\t}\n\t\t\t\tconst floatWidth = parseFloat(width);\n\n\t\t\t\treturn sum + (isNaN(floatWidth) ? 9 : floatWidth);\n\t\t\t}, initialSum);\n\t\treturn `${Math.max(sumWidth, minWidth)}em`;\n\t},\n\n\t/**\n\t * Constructs JSON Model with the properties for the value help dialog fragment where it is used as a source object.\n\t * @param valueListInfo Value list info\n\t * @param propertyPath The property path\n\t * @param content Content for which this fragment will be set\n\t * @param payload Value help payload\n\t * @returns JSONModel\n\t * @private\n\t */\n\t_getJSONModelForDialog: function (\n\t\tvalueListInfo: ValueListInfo,\n\t\tpropertyPath: string,\n\t\tcontent: MDCTable,\n\t\tpayload: ValueHelpPayload\n\t): JSONModel {\n\t\tconst isDropDownListe = false,\n\t\t\tisDialogTable = true,\n\t\t\tcolumnInfo = ValueListHelper.getColumnVisibilityInfo(valueListInfo.valueListInfo, propertyPath, isDropDownListe, isDialogTable);\n\n\t\treturn new JSONModel({\n\t\t\tid: content.getId(),\n\t\t\tgroupId: payload.requestGroupId,\n\t\t\tbSuggestion: false,\n\t\t\tcolumnInfo: columnInfo,\n\t\t\tvalueHelpWithFixedValues: isDropDownListe\n\t\t});\n\t},\n\n\t/**\n\t * Constructs JSON Model with the properties for the define condition value help fragment in the value help dialog where it is used as a source object.\n\t * @param valueListInfo Value list info\n\t * @param propertyPath The property path\n\t * @param content Content for which this fragment will be set\n\t * @param payload Value help payload\n\t * @param caseSensitive\n\t * @returns JSONModel\n\t * @private\n\t */\n\t_getJSONModelForCondition: function (\n\t\tvalueListInfo: ValueListInfo,\n\t\tpropertyPath: string,\n\t\tcontent: MDCTable,\n\t\tpayload: ValueHelpPayload,\n\t\tcaseSensitive: boolean\n\t): JSONModel {\n\t\tconst isDropDownListe = false,\n\t\t\tisDialogTable = false,\n\t\t\tcolumnInfo = ValueListHelper.getColumnVisibilityInfo(valueListInfo.valueListInfo, propertyPath, isDropDownListe, isDialogTable);\n\n\t\treturn new JSONModel({\n\t\t\tid: content.getId(),\n\t\t\tgroupId: payload.requestGroupId || undefined,\n\t\t\tbSuggestion: true,\n\t\t\tcolumnInfo: columnInfo,\n\t\t\tvalueHelpWithFixedValues: isDropDownListe,\n\t\t\tdescriptionPath: valueListInfo.descriptionPath,\n\t\t\tkeyPath: valueListInfo.keyPath,\n\t\t\tpropertyPath,\n\t\t\tcaseSensitive\n\t\t});\n\t},\n\n\t/**\n\t * Constructs JSON Model with the properties for the value help typeahead fragment where it is used as a source object.\n\t * @param valueListInfo Value list info\n\t * @param propertyPath The property path\n\t * @param content Content for which this fragment will be set\n\t * @param payload Value help payload\n\t * @param valueHelpWithFixedValues Specify is it dropdownlist or not\n\t * @returns JSONModel\n\t * @private\n\t */\n\t_getJSONModelForTypeahead: function (\n\t\tvalueListInfo: ValueListInfo,\n\t\tpropertyPath: string,\n\t\tcontent: MTable,\n\t\tpayload: ValueHelpPayload,\n\t\tvalueHelpWithFixedValues: boolean\n\t): JSONModel {\n\t\tconst isDialogTable = false,\n\t\t\tcontentId = content.getId(),\n\t\t\tcolumnInfo = ValueListHelper.getColumnVisibilityInfo(\n\t\t\t\tvalueListInfo.valueListInfo,\n\t\t\t\tpropertyPath,\n\t\t\t\tvalueHelpWithFixedValues,\n\t\t\t\tisDialogTable\n\t\t\t);\n\n\t\treturn new JSONModel({\n\t\t\tid: contentId,\n\t\t\tgroupId: payload.requestGroupId || undefined,\n\t\t\tbSuggestion: true,\n\t\t\tpropertyPath: propertyPath,\n\t\t\tcolumnInfo: columnInfo,\n\t\t\tvalueHelpWithFixedValues: valueHelpWithFixedValues\n\t\t});\n\t},\n\n\t_createValueHelpTypeahead: async function (\n\t\tpropertyPath: string,\n\t\tvalueHelp: ValueHelp,\n\t\tcontent: MTable,\n\t\tvalueListInfo: ValueListInfo,\n\t\tpayload: ValueHelpPayload,\n\t\tmetaModel: ODataMetaModel\n\t): Promise<void> {\n\t\tconst propertyAnnotations = metaModel.getObject(`${propertyPath}@`) as AnnotationsForProperty,\n\t\t\tvalueHelpWithFixedValues = propertyAnnotations[AnnotationValueListWithFixedValues] ?? false,\n\t\t\tsourceModel = this._getJSONModelForTypeahead(valueListInfo, propertyPath, content, payload, valueHelpWithFixedValues);\n\n\t\tcontent.setKeyPath(valueListInfo.keyPath);\n\t\tcontent.setDescriptionPath(valueListInfo.descriptionPath);\n\t\tpayload.isValueListWithFixedValues = valueHelpWithFixedValues;\n\t\tpayload.isPotentiallySensitive = payload.isPotentiallySensitive ?? propertyAnnotations[AnnotationsPersonalDataPotentiallySensitive];\n\t\tpayload.history = {\n\t\t\tenabled: this.checkHistoryEnabled(valueHelp, payload)\n\t\t};\n\n\t\tconst collectionAnnotations =\n\t\t\tvalueListInfo.valueListInfo.$model.getMetaModel().getObject(`/${valueListInfo.valueListInfo.CollectionPath}@`) || {};\n\n\t\tcontent.data(\"searchSupported\", ValueListHelper.entityIsSearchable(propertyAnnotations, collectionAnnotations) ? true : false);\n\n\t\tconst table = await ValueListHelper._templateFragment<Table>(\n\t\t\t\"sap.fe.macros.internal.valuehelp.ValueListTable\",\n\t\t\tvalueListInfo,\n\t\t\tsourceModel,\n\t\t\tpropertyPath,\n\t\t\tvalueHelp\n\t\t);\n\n\t\ttable.setModel(valueListInfo.valueListInfo.$model);\n\n\t\tLog.info(`Value List- suggest Table XML content created [${propertyPath}]`, table.getMetadata().getName(), \"MDC Templating\");\n\n\t\tcontent.setTable(table);\n\n\t\tconst field = valueHelp.getControl();\n\n\t\tif (\n\t\t\tfield !== undefined &&\n\t\t\t(field.isA<FilterField>(\"sap.ui.mdc.FilterField\") ||\n\t\t\t\tfield.isA<Field>(\"sap.ui.mdc.Field\") ||\n\t\t\t\t(field.isA<Field>(\"sap.ui.mdc.Field\") && valueHelpWithFixedValues) ||\n\t\t\t\tfield.isA<MultiValueField>(\"sap.ui.mdc.MultiValueField\"))\n\t\t) {\n\t\t\t//Can the filterfield be something else that we need the .isA() check?\n\t\t\tconst tableMode =\n\t\t\t\tvalueHelpWithFixedValues && (field as FieldBase).getMaxConditions() !== 1 ? \"MultiSelect\" : \"SingleSelectMaster\";\n\t\t\ttable.setMode(tableMode);\n\n\t\t\ttable.addEventDelegate({\n\t\t\t\tonAfterRendering: function () {\n\t\t\t\t\tResizeHandler.register(table, function () {\n\t\t\t\t\t\tValueListHelper._setTableWidth(table, field, tableMode, payload.isUnitValueHelp);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._setTableWidth(table, field, tableMode, payload.isUnitValueHelp);\n\t\t}\n\t},\n\n\t_setTableWidth(table: Table, field: Control, tableMode: string, isUnitValueHelp?: boolean): void {\n\t\tconst reduceWidthForUnitValueHelp = Boolean(isUnitValueHelp);\n\t\tconst tableWidth = ValueListHelper._getTableWidth(\n\t\t\ttable,\n\t\t\tValueListHelper._getWidthInRem(field, reduceWidthForUnitValueHelp),\n\t\t\ttableMode === \"MultiSelect\"\n\t\t);\n\n\t\ttable.setWidth(tableWidth);\n\t},\n\n\t/**\n\t * Check if the history is enabled for a certain field.\n\t * @param valueHelp The value help instance\n\t * @param payload Value help payload\n\t * @returns True if the history is enabled, false otherwise\n\t */\n\tcheckHistoryEnabled: function (valueHelp: ValueHelp, payload: ValueHelpPayload): boolean {\n\t\tconst appComponent = CommonUtils.getAppComponent(CommonUtils.getTargetView(valueHelp));\n\t\tconst historySettings = appComponent.getManifestEntry(\"sap.fe\")?.historySettings;\n\t\treturn historySettings?.fields?.[payload.propertyPath]?.historyEnabled ?? true;\n\t},\n\n\tisValueListSearchable(propertyPath: string, valueList: ValueListInfo): boolean {\n\t\tconst valueListMetamodel = valueList.valueListInfo.$model.getMetaModel();\n\n\t\tconst propertyAnnotations = valueListMetamodel.getObject(`${propertyPath}@`) ?? {};\n\t\tconst collectionAnnotations = valueListMetamodel.getObject(`/${valueList.valueListInfo.CollectionPath}@`) ?? {};\n\t\treturn ValueListHelper.entityIsSearchable(propertyAnnotations, collectionAnnotations);\n\t},\n\n\t_createValueHelpDialog: async function (\n\t\tmetaModel: ODataMetaModel,\n\t\tpropertyPath: string,\n\t\tvalueHelp: ValueHelp,\n\t\tcontent: MDCTable,\n\t\tvalueListInfo: ValueListInfo,\n\t\tpayload: ValueHelpPayload,\n\t\tconditionContent?: Conditions\n\t): Promise<void> {\n\t\tconst propertyAnnotations = (valueHelp.getModel() as ODataModel)\n\t\t\t\t.getMetaModel()!\n\t\t\t\t.getObject(`${propertyPath}@`) as AnnotationsForProperty,\n\t\t\tsourceModelDialog = this._getJSONModelForDialog(valueListInfo, propertyPath, content, payload);\n\n\t\tcontent.setKeyPath(valueListInfo.keyPath);\n\t\tcontent.setDescriptionPath(valueListInfo.descriptionPath);\n\t\tconst collectionAnnotations =\n\t\t\tvalueListInfo.valueListInfo.$model.getMetaModel().getObject(`/${valueListInfo.valueListInfo.CollectionPath}@`) || {};\n\t\tcontent.data(\"searchSupported\", ValueListHelper.entityIsSearchable(propertyAnnotations, collectionAnnotations) ? true : false);\n\t\tpayload.isPotentiallySensitive = payload.isPotentiallySensitive ?? propertyAnnotations[AnnotationsPersonalDataPotentiallySensitive];\n\n\t\tif (conditionContent) {\n\t\t\tconst firstTypeAheadContent = valueHelp.getTypeahead().getContent()[0] as MTable,\n\t\t\t\tcaseSensitive = firstTypeAheadContent.getCaseSensitive();\n\n\t\t\tconst sourceModelCondition = this._getJSONModelForCondition(valueListInfo, propertyPath, content, payload, caseSensitive);\n\n\t\t\tconst condition = await ValueListHelper._templateFragment<ValueHelp>(\n\t\t\t\t\"sap.fe.macros.internal.valuehelp.ValueListForCondition\",\n\t\t\t\tvalueListInfo,\n\t\t\t\tsourceModelCondition,\n\t\t\t\tpropertyPath,\n\t\t\t\tvalueHelp\n\t\t\t);\n\t\t\t/* As the condition is not added to an aggregation, but just associated, we need to explicitly set the model */\n\t\t\tcondition.setModel(metaModel);\n\n\t\t\t/* Add as dependent, otherwise it will not be properly destroyed during lifecycle handling */\n\t\t\tconditionContent.addDependent(condition);\n\t\t\tconditionContent.setValueHelp(condition.getId());\n\n\t\t\tconst conditionTable = condition\n\t\t\t\t.getTypeahead()\n\t\t\t\t.getContent()[0] // there is only one table\n\t\t\t\t.getTable();\n\n\t\t\tconst tableWidth = ValueListHelper._getTableWidth(conditionTable, 0, false);\n\t\t\tconditionTable.setWidth(tableWidth);\n\t\t}\n\n\t\tconst tablePromise = ValueListHelper._templateFragment<MdcInnerTable>(\n\t\t\t\"sap.fe.macros.internal.valuehelp.ValueListDialogTable\",\n\t\t\tvalueListInfo,\n\t\t\tsourceModelDialog,\n\t\t\tpropertyPath,\n\t\t\tvalueHelp\n\t\t);\n\n\t\tconst filterBarPromise = ValueListHelper._templateFragment<FilterBar>(\n\t\t\t\"sap.fe.macros.internal.valuehelp.ValueListFilterBar\",\n\t\t\tvalueListInfo,\n\t\t\tsourceModelDialog,\n\t\t\tpropertyPath,\n\t\t\tvalueHelp\n\t\t);\n\n\t\tconst [table, filterBar] = await Promise.all([tablePromise, filterBarPromise]);\n\n\t\ttable.setModel(valueListInfo.valueListInfo.$model);\n\t\tfilterBar.setModel(valueListInfo.valueListInfo.$model);\n\n\t\tcontent.setFilterBar(filterBar);\n\t\tcontent.setTable(table);\n\n\t\ttable.setFilter(filterBar.getId());\n\t\ttable.initialized();\n\n\t\ttable.setWidth(\"100%\");\n\n\t\tValueListHelper.setCopyProviderVisibility(table, valueHelp);\n\n\t\t//This is a temporary workarround - provided by MDC (see FIORITECHP1-24002)\n\t\tconst mdcTable = table as unknown as { _setShowP13nButton: Function };\n\t\tmdcTable._setShowP13nButton(false);\n\t},\n\n\t/**\n\t * Set the visible attribute of the CopyProvider based on the MaxCondition of the field.\n\t * In case of a single selection, the copy button is hidden. In another case, it is visible.\n\t * @param table The MDC table of the Value Help dialog\n\t * @param valueHelp The Value Help object\n\t */\n\tsetCopyProviderVisibility: function (table: MdcInnerTable, valueHelp: ValueHelp): void {\n\t\tif (valueHelp.getControl()?.isA<FieldBase>(\"sap.ui.mdc.field.FieldBase\")) {\n\t\t\ttable.getCopyProvider()?.setVisible(true);\n\t\t}\n\t},\n\n\t_getContentById: function <T extends MTable | MDCTable>(contentList: Content[], contentId: string): T | undefined {\n\t\treturn contentList.find(function (item) {\n\t\t\treturn item.getId() === contentId;\n\t\t}) as T | undefined;\n\t},\n\n\t_createPopoverContent: function (contentId: string, caseSensitive: boolean, useAsValueHelp: boolean): MTable {\n\t\treturn new MTable({\n\t\t\tid: contentId,\n\t\t\tgroup: \"group1\",\n\t\t\tcaseSensitive: caseSensitive,\n\t\t\tuseAsValueHelp: useAsValueHelp\n\t\t} as $MTableSettings);\n\t},\n\n\t_createDialogContent: function (contentId: string, caseSensitive: boolean, forceBind: boolean): MDCTable {\n\t\treturn new MDCTable({\n\t\t\tid: contentId,\n\t\t\tgroup: \"group1\",\n\t\t\tcaseSensitive: caseSensitive,\n\t\t\tforceBind: forceBind\n\t\t} as $MDCTableSettings);\n\t},\n\n\t_showConditionsContent: function (contentList: Content[], container: Container): Conditions | undefined {\n\t\tlet conditionsContent =\n\t\t\tcontentList.length && contentList[contentList.length - 1].getMetadata().getName() === \"sap.ui.mdc.valuehelp.content.Conditions\"\n\t\t\t\t? (contentList[contentList.length - 1] as Conditions)\n\t\t\t\t: undefined;\n\n\t\tif (conditionsContent) {\n\t\t\tconditionsContent.setVisible(true);\n\t\t} else {\n\t\t\tconditionsContent = new Conditions();\n\t\t\tcontainer.addContent(conditionsContent);\n\t\t}\n\n\t\treturn conditionsContent;\n\t},\n\n\t_alignOrCreateContent: function (\n\t\tvalueListInfo: ValueListInfo,\n\t\tcontentId: string,\n\t\tcaseSensitive: boolean,\n\t\tshowConditionPanel: boolean,\n\t\tcontainer: Container\n\t): MDCTable {\n\t\tconst contentList = container.getContent();\n\t\tlet content = ValueListHelper._getContentById<MDCTable>(contentList, contentId);\n\n\t\tif (!content) {\n\t\t\tconst forceBind = valueListInfo.valueListInfo.FetchValues === 2 ? false : true;\n\n\t\t\tcontent = ValueListHelper._createDialogContent(contentId, caseSensitive, forceBind);\n\n\t\t\tif (!showConditionPanel) {\n\t\t\t\tcontainer.addContent(content);\n\t\t\t} else {\n\t\t\t\tcontainer.insertContent(content, contentList.length - 1); // insert content before conditions content\n\t\t\t}\n\t\t}\n\n\t\treturn content;\n\t},\n\n\t_prepareValueHelpTypeAhead: function (\n\t\tvalueHelp: ValueHelp,\n\t\tcontainer: Container,\n\t\tvalueListInfos: ValueListInfo[],\n\t\tpayload: ValueHelpPayload,\n\t\tcaseSensitive: boolean,\n\t\tfirstTypeAheadContent: MTable\n\t): { valueListInfo: ValueListInfo; content: MTable } {\n\t\tconst contentList = container.getContent();\n\t\tlet qualifierForTypeahead = valueHelp.data(\"valuelistForValidation\") || \"\"; // can also be null\n\t\tif (qualifierForTypeahead === \" \") {\n\t\t\tqualifierForTypeahead = \"\";\n\t\t}\n\t\tconst valueListInfo = qualifierForTypeahead // fallback if qualifier for Typeahead not exists\n\t\t\t? valueListInfos.filter(function (subValueListInfo) {\n\t\t\t\t\treturn subValueListInfo.valueHelpQualifier === qualifierForTypeahead;\n\t\t\t  })[0] || valueListInfos[0]\n\t\t\t: valueListInfos[0];\n\n\t\tValueListHelper._addInOutParametersToPayload(payload, valueListInfo);\n\n\t\tconst contentId = ValueListHelper._getContentId(valueHelp.getId(), valueListInfo.valueHelpQualifier, true);\n\t\tlet content = ValueListHelper._getContentById<MTable>(contentList, contentId);\n\n\t\tif (!content) {\n\t\t\tconst useAsValueHelp = firstTypeAheadContent.getUseAsValueHelp();\n\t\t\tcontent = ValueListHelper._createPopoverContent(contentId, caseSensitive, useAsValueHelp);\n\n\t\t\tcontainer.insertContent(content, 0); // insert content as first content\n\t\t} else if (contentId !== contentList[0].getId()) {\n\t\t\t// content already available but not as first content?\n\t\t\tcontainer.removeContent(content);\n\t\t\tcontainer.insertContent(content, 0); // move content to first position\n\t\t}\n\n\t\treturn { valueListInfo, content };\n\t},\n\n\t_prepareValueHelpDialog: function (\n\t\tvalueHelp: ValueHelp,\n\t\tcontainer: Container,\n\t\tvalueListInfos: ValueListInfo[],\n\t\tpayload: ValueHelpPayload,\n\t\tselectedContentId: string,\n\t\tcaseSensitive: boolean\n\t): {\n\t\tselectedInfo: ValueListInfo;\n\t\tselectedContent: MDCTable;\n\t\tconditionContent?: Conditions;\n\t} {\n\t\tconst showConditionPanel = valueHelp.data(\"showConditionPanel\") && valueHelp.data(\"showConditionPanel\") !== \"false\";\n\t\tconst contentList = container.getContent();\n\n\t\t// set all contents to invisible\n\t\tfor (const contentListItem of contentList) {\n\t\t\tcontentListItem.setVisible(false);\n\t\t}\n\n\t\tconst conditionContent = showConditionPanel ? this._showConditionsContent(contentList, container) : undefined;\n\t\tconst field = valueHelp.getControl();\n\n\t\t// For a FilterField we check the operators if they are default (empty list=all) or include EQ\n\t\tconst hasOperatorEQ =\n\t\t\tfield && field.isA<FilterField>(\"sap.ui.mdc.FilterField\")\n\t\t\t\t? field.getOperators().length === 0 || field.getOperators().includes(\"EQ\")\n\t\t\t\t: true;\n\n\t\tlet selectedInfo: ValueListInfo | undefined, selectedContent: MDCTable | undefined;\n\n\t\t// Create or reuse contents for the current context\n\t\tfor (const valueListInfo of valueListInfos) {\n\t\t\tconst valueHelpQualifier = valueListInfo.valueHelpQualifier;\n\n\t\t\tValueListHelper._addInOutParametersToPayload(payload, valueListInfo);\n\n\t\t\tconst contentId = ValueListHelper._getContentId(valueHelp.getId(), valueHelpQualifier, false);\n\n\t\t\tconst content = this._alignOrCreateContent(valueListInfo, contentId, caseSensitive, showConditionPanel, container);\n\t\t\tcontent.setVisible(hasOperatorEQ); // Do not show a value help table for a filter field without operator 'EQ'\n\n\t\t\tif (valueListInfo.valueListInfo.Label && field) {\n\t\t\t\tconst title = CommonUtils.getTranslatedTextFromExpBindingString(valueListInfo.valueListInfo.Label, field);\n\t\t\t\tcontent.setTitle(title);\n\t\t\t}\n\n\t\t\tif (!selectedContent || (selectedContentId && selectedContentId === contentId)) {\n\t\t\t\tselectedContent = content;\n\t\t\t\tselectedInfo = valueListInfo;\n\t\t\t}\n\t\t}\n\n\t\tif (!selectedInfo || !selectedContent) {\n\t\t\tthrow new Error(\"selectedInfo or selectedContent undefined\");\n\t\t}\n\n\t\treturn { selectedInfo, selectedContent, conditionContent };\n\t},\n\n\t_addDescriptionInfosToPayload: function (payload: ValueHelpPayload, valueListInfo: ValueListInfo, metaModel: ODataMetaModel): void {\n\t\tif (payload.valueHelpDescriptionPath !== valueListInfo.descriptionPath || payload.externalIdPath) {\n\t\t\tconst convertedMetadata = convertTypes(metaModel);\n\t\t\tconst propertyDescriptionPath = (\n\t\t\t\tconvertedMetadata.resolvePath<Property>(payload.propertyPath).target?.annotations?.Common\n\t\t\t\t\t?.Text as unknown as PathAnnotationExpression<string>\n\t\t\t)?.path;\n\n\t\t\t/* Enrich payload with Text Property Infos */\n\t\t\tpayload.valueHelpDescriptionPath = valueListInfo.descriptionPath;\n\t\t\tpayload.valueHelpKeyPath = valueListInfo.keyPath;\n\t\t\tif (propertyDescriptionPath) {\n\t\t\t\tpayload.maxLength = payload.valueHelpDescriptionPath\n\t\t\t\t\t? convertedMetadata.resolvePath<Property>(\n\t\t\t\t\t\t\t`/${valueListInfo.valueListInfo.CollectionPath}/${payload.valueHelpDescriptionPath}`\n\t\t\t\t\t  )?.target?.maxLength\n\t\t\t\t\t: undefined;\n\t\t\t\tpayload.propertyDescriptionPath = propertyDescriptionPath;\n\t\t\t}\n\n\t\t\t/* EXTERNALID */\n\t\t\t// Add descriptionPath to the payload and valueListInfo\n\t\t\tconst externalIdPath = payload.externalIdPath;\n\t\t\tif (externalIdPath && !payload.valueHelpDescriptionPath) {\n\t\t\t\tconst propertyName = metaModel.getObject(`${payload.propertyPath}@sapui.name`);\n\t\t\t\tconst externalIdFullPath = payload.propertyPath.replace(propertyName, externalIdPath);\n\t\t\t\tconst descriptionPath = (\n\t\t\t\t\tconvertedMetadata.resolvePath<Property>(externalIdFullPath).target?.annotations?.Common\n\t\t\t\t\t\t?.Text as unknown as PathAnnotationExpression<string>\n\t\t\t\t)?.path;\n\t\t\t\tvalueListInfo.descriptionPath = descriptionPath;\n\t\t\t\tpayload.valueHelpDescriptionPath = descriptionPath;\n\t\t\t}\n\t\t}\n\t},\n\n\tshowValueList: async function (payload: ValueHelpPayload, container: Container, selectedContentId: string): Promise<void> {\n\t\tconst valueHelp = container.getParent() as ValueHelp,\n\t\t\tisTypeahead = container.isTypeahead(),\n\t\t\tpropertyPath = payload.propertyPath,\n\t\t\t/* In case of RAP the valueHelp model is different to the control model */\n\t\t\tcontrol = valueHelp.getControl(),\n\t\t\tmetaModel = control\n\t\t\t\t? (valueHelp.getControl()?.getModel() as ODataModel).getMetaModel()\n\t\t\t\t: (valueHelp.getModel() as ODataModel).getMetaModel(),\n\t\t\tvhUIModel =\n\t\t\t\tvalueHelp.getModel(\"_VHUI\") !== undefined\n\t\t\t\t\t? (valueHelp.getModel(\"_VHUI\") as JSONModel)\n\t\t\t\t\t: ValueListHelper.createVHUIModel(valueHelp, propertyPath, metaModel);\n\t\t/* EXTERNALID */\n\t\tpayload.externalIdPath = metaModel?.getObject(`${payload.propertyPath}@com.sap.vocabularies.Common.v1.ExternalID`)?.$Path;\n\n\t\tvhUIModel.setProperty(\"/isSuggestion\", isTypeahead);\n\t\tvhUIModel.setProperty(\"/minScreenWidth\", !isTypeahead ? \"418px\" : undefined);\n\n\t\ttry {\n\t\t\tconst valueListInfos = await ValueListHelper.getValueListInfo(valueHelp, propertyPath, payload, metaModel);\n\t\t\tconst firstTypeAheadContent = valueHelp.getTypeahead().getContent()[0] as MTable,\n\t\t\t\tcaseSensitive = firstTypeAheadContent.getCaseSensitive(); // take caseSensitive from first Typeahead content\n\n\t\t\tif (isTypeahead) {\n\t\t\t\tconst { valueListInfo, content } = ValueListHelper._prepareValueHelpTypeAhead(\n\t\t\t\t\tvalueHelp,\n\t\t\t\t\tcontainer,\n\t\t\t\t\tvalueListInfos,\n\t\t\t\t\tpayload,\n\t\t\t\t\tcaseSensitive,\n\t\t\t\t\tfirstTypeAheadContent\n\t\t\t\t);\n\n\t\t\t\tpayload.valueHelpQualifier = valueListInfo.valueHelpQualifier;\n\t\t\t\tvhUIModel.setProperty(\n\t\t\t\t\t\"/selectedProperties\",\n\t\t\t\t\tvalueListInfo.columnDefs.map((col) => col.path)\n\t\t\t\t);\n\t\t\t\tValueListHelper._addDescriptionInfosToPayload(payload, valueListInfo, metaModel);\n\n\t\t\t\tif (content.getTable() === undefined || content.getTable() === null) {\n\t\t\t\t\tawait ValueListHelper._createValueHelpTypeahead(propertyPath, valueHelp, content, valueListInfo, payload, metaModel);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst { selectedInfo, selectedContent, conditionContent } = ValueListHelper._prepareValueHelpDialog(\n\t\t\t\t\tvalueHelp,\n\t\t\t\t\tcontainer,\n\t\t\t\t\tvalueListInfos,\n\t\t\t\t\tpayload,\n\t\t\t\t\tselectedContentId,\n\t\t\t\t\tcaseSensitive\n\t\t\t\t);\n\n\t\t\t\tpayload.valueHelpQualifier = selectedInfo.valueHelpQualifier;\n\t\t\t\tValueListHelper._addDescriptionInfosToPayload(payload, selectedInfo, metaModel);\n\n\t\t\t\t/* For context depentent value helps the value list label is used for the dialog title */\n\t\t\t\tconst field = valueHelp.getControl();\n\t\t\t\tif (field) {\n\t\t\t\t\tconst title = CommonUtils.getTranslatedTextFromExpBindingString(\n\t\t\t\t\t\tValueListHelper._getDialogTitle(valueHelp, selectedInfo.valueListInfo?.Label),\n\t\t\t\t\t\tfield\n\t\t\t\t\t);\n\t\t\t\t\tcontainer.setTitle(title);\n\t\t\t\t}\n\n\t\t\t\tif (selectedContent.getTable() === undefined || selectedContent.getTable() === null) {\n\t\t\t\t\tawait ValueListHelper._createValueHelpDialog(\n\t\t\t\t\t\tmetaModel,\n\t\t\t\t\t\tpropertyPath,\n\t\t\t\t\t\tvalueHelp,\n\t\t\t\t\t\tselectedContent,\n\t\t\t\t\t\tselectedInfo,\n\t\t\t\t\t\tpayload,\n\t\t\t\t\t\tconditionContent\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tthis._logError(propertyPath, err);\n\t\t\tValueListHelper.destroyVHContent(valueHelp);\n\t\t}\n\t},\n\n\tgetInAndOutParametersList(): CommonAnnotationTypes[] {\n\t\treturn [\n\t\t\tCommonAnnotationTypes.ValueListParameterOut,\n\t\t\tCommonAnnotationTypes.ValueListParameterIn,\n\t\t\tCommonAnnotationTypes.ValueListParameterInOut\n\t\t];\n\t}\n};\n\nexport default ValueListHelper;\n"],"mappings":"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","ignoreList":[],"file":"ValueListHelper-dbg.js"}