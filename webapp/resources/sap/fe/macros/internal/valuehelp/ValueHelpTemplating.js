/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/base/BindingToolkit","sap/fe/core/helpers/StableIdHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/PropertyHelper","sap/fe/core/templating/UIFormatters","sap/fe/macros/field/FieldHelper","sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/ModelHelper","sap/fe/macros/internal/valuehelp/AdditionalValueFormatter","sap/ui/core/CustomData","sap/ui/core/Element","sap/ui/mdc/ValueHelp","sap/ui/mdc/valuehelp/Dialog","sap/ui/mdc/valuehelp/Popover","sap/ui/mdc/valuehelp/content/Conditions","sap/ui/mdc/valuehelp/content/MTable","sap/fe/base/jsx-runtime/jsx"],function(e,t,a,n,i,r,o,l,s,u,c,p,d,g,f,m,v,h){"use strict";var V={};var b=l.getInvolvedDataModelObjects;var y=r.getDisplayMode;var x=i.isUnit;var F=i.isSemanticKey;var O=i.isGuid;var j=i.isCurrency;var H=i.hasValueListForValidation;var T=i.hasValueHelpWithFixedValues;var C=i.hasValueHelp;var D=i.hasDateType;var I=i.getLabel;var P=n.getTargetObjectPath;var M=n.enhanceDataModelPath;var S=n.checkFilterExpressionRestrictions;var q=a.isProperty;var A=a.isPathAnnotationExpression;var E=t.generate;var G=e.pathInModel;var U=e.getExpressionFromAnnotation;var w=e.formatResult;var R=e.equal;var L=e.constant;var B=e.compileExpression;const $=function(e,t){const a=y(e);const n=e.targetObject?.annotations?.Common?.Text;const i=typeof n!=="string"&&n?.annotations?.UI?.TextArrangement?.toString();if(t){return n&&A(n)&&n.path?a:"Value"}else{return i?a:"Value"}};V.getValueHelpTableDisplayMode=$;const k=function(e,t,a,n){let i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;const r=e!==a;const o={name:"sap/fe/macros/valuehelp/ValueHelpDelegate",payload:{propertyPath:e,isUnitValueHelp:r,conditionModel:t,requestGroupId:n,useMultiValueField:i,qualifiers:{},valueHelpQualifier:""}};return o};V.getDelegateConfiguration=k;const Q=function(e){const t={name:"sap/fe/macros/valuehelp/ValueHelpDelegate",payload:{propertyPath:e,isDefineConditionValueHelp:true,qualifiers:{},valueHelpQualifier:""}};return B(t)};V.getDelegateConfigurationForDefineConditions=Q;const K=function(e,t,a,n,i){let r=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;if(e){return e}let o=i;if(n!==i){o=`${n}::${i}`}if(r){o+="::withValidation"}return E([t,a,o])};V.generateID=K;const W=function(e){return T(e)||H(e)||C(e)&&(x(e)||j(e)||O(e))};V.requiresValidation=W;const _=function(e,t){const a=e?.targetEntitySet?.annotations?.Capabilities?.FilterFunctions||t;return s.isFilteringCaseSensitive(undefined,a)};V.useCaseSensitiveFilterRequests=_;const z=function(e){const t=e.targetObject;const a=S(e,["SingleRange"]);return t&&D(t)&&B(a)};V.isSemanticDateRange=z;const J=function(e,t){e.contextLocation=t;return B(S(e,["SingleValue","MultiValue"]))==="false"};V.shouldShowConditionPanel=J;const N=function(e,t){const a=t?.targetObject?.annotations?.Common?.Text;return a?.annotations?.UI?.TextArrangement?.valueOf()==="UI.TextArrangementType/TextOnly"&&A(a)?a.path:e};V.getColumnDataProperty=N;const X=function(e,t){const a=t?.targetObject?.annotations?.Common?.Text?.annotations?.UI?.TextArrangement;return a&&a.valueOf()!=="UI.TextArrangementType/TextSeparate"?"Edm.String":e};const Y=function(e){const t=e.targetObject;const a=q(t)?X(t.type,e):"";return!a||F(t,e)?"Begin":o.getPropertyAlignment(a,{textAlignMode:"Table"})};V.getColumnHAlign=Y;const Z=function(e){return B(w([G("/recommendationsData","internal"),L(e)],u.getGrowing))};V.getGrowingFormatter=Z;const ee=function(e,t){let a=b(e,t.contextPath);let n=b(t.metaPath,t.contextPath);if(A(n.targetObject)){n=M(n,n.targetObject.path)}if(A(a.targetObject)){a=M(a,a.targetObject.path)}if(a.targetObject){const e=K(t._flexId,t.idPrefix,!t.filterFieldValueHelp?n.targetEntityType.name:undefined,P(n,true),P(a,true),t.requiresValidation===true);if(p.getElementById(e)){return e}const i=I(a.targetObject)||a.targetObject.name;if(C(a.targetObject)){const i=t.filterFieldValueHelp||t.requiresValidation||W(a.targetObject);const r=t.filterFieldValueHelp?R(S(a,["SingleValue","MultiValue"]),false):false;const o=k(P(a),t.conditionModel,P(n),t.requestGroupId,t.useMultiValueField);const l=_(a,a.targetEntitySet?.annotations?.Capabilities?.FilterFunctions?.map(e=>e.toString())??[]);const s=H(a.targetObject);const u=T(a.targetObject);const p=[h(c,{value:r},"showConditionPanel")];if(s){p.push(h(c,{value:B(U(a.targetObject.annotations?.Common?.ValueListForValidation))},"valuelistForValidation"))}return h(d,{delegate:o,id:e,validateInput:i,children:{customData:p,typeahead:h(f,{children:h(v,{id:`${e}::Popover::qualifier::`,caseSensitive:l,useAsValueHelp:T(a.targetObject)})}),dialog:!u?h(g,{}):undefined}})}else if(t.filterFieldValueHelp){return h(d,{id:e,children:{customData:t.requestGroupId!==undefined?[h(c,{value:t.requestGroupId},"requestGroupId")]:[],dialog:h(g,{title:i,children:h(m,{})})}})}}};V.getValueHelpTemplate=ee;return V},false);
//# sourceMappingURL=ValueHelpTemplating.js.map