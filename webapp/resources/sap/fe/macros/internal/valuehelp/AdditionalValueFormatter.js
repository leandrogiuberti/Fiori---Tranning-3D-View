/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/util/ObjectPath","sap/fe/core/CommonUtils","sap/fe/core/formatters/ValueFormatter","sap/fe/core/helpers/ModelHelper","sap/fe/macros/internal/valuehelp/AdditionalValueHelper","sap/ui/core/Lib","sap/ui/core/library"],function(e,t,a,n,r,i,o){"use strict";var s=o.ValueState;var l=r.additionalValueHelper;function u(e,t){const a=l.getRelevantRecommendations(e||{},this.getBindingContext(),t)||[];if(a.length>0){return true}return false}u.__functionName="sap.fe.macros.internal.valuehelp.AdditionalValueFormatter#getGrowing";function c(e,t){const a=n.getMetaPathForContext(e);return t.replace(`${a}/`,"")}function f(e,t,a,n,r,i){const o=s=>{const l=s.getSource();const u=l.getAllCurrentContexts();if(u.includes(a)){if(a.getObject()){const{valueState:o,valueStateText:s}=d(e,t,n,a,r,i,this);this.setValueStateText(s);this.setValueState(o)}l.detachChange(o)}};a.getBinding().attachChange(o)}function d(e,a,n,r,i,o,u){let f=s.None,d="";if(e||a){d=o;f=s.Information}else if(n){const e=c(r,i);const t=l.getRelevantRecommendations(n,r,i,e);let a;if(n?.version===2){a=l.getAdditionalValueFromPropertyPath(e,r,n)}if(n?.version===2&&(a?.value||a?.text)||!n?.version&&t?.length){d=o;f=s.Information}}if(f===s.Information){const e=t.getTargetView(u);e.getController().recommendations.increaseTelemetryDataCount("numberofTimesFormatterCalled")}return{valueState:f,valueStateText:d}}function h(e,t,a,n,r,o,l){const u=this.getBindingContext();if(!u||!n){return s.None}l=l==="undefined"?undefined:l;const c=this.getValueState();const h=u.isTransient?.();if(!r||h){return c}const g=e||t||!!a&&Object.keys(a).length>0;const m=i.getResourceBundleFor("sap.fe.core").getText("RECOMMENDATIONS_DATA_INFO");const p=this.getValueStateText();const v=c===s.Information&&p===m;if(v&&(!g||o||l)){return s.None}const V=g&&(c==s.None||v);if(!o&&!l&&V){if(!u.getObject()&&u.getBinding()?.isA?.("sap.ui.model.odata.v4.ODataListBinding")){f.call(this,e,t,u,a,r,m)}else{const{valueState:n,valueStateText:i}=d(e,t,a,u,r,m,this);this.setValueStateText(i);return n}}return c}h.__functionName="sap.fe.macros.internal.valuehelp.AdditionalValueFormatter#formatValueState";function g(e,t){let n;const r=e?.value;const i=e?.text;switch(t){case"Value":n=a.formatWithBrackets(r);break;case"Description":n=a.formatWithBrackets(i);break;case"DescriptionValue":n=a.formatWithBrackets(i,r);break;case"ValueDescription":n=a.formatWithBrackets(r,i);break;default:n=a.formatWithBrackets(i,r)}return n}function m(e,t,a,n,r,i,o){let s=this.getPlaceholder();i=i==="undefined"?undefined:i;if(r){return i}if(e){s=g({value:e,text:t},o)}else if(a&&Object.keys(a).length&&a.version===2){const e=this.getBindingContext()||n;const t=this.getBinding("value")?.getPath();if(e&&t){const n=l.getAdditionalValueFromPropertyPath(t,e,a);s=g(n,o)}}else{s=undefined}if(i&&!s){s=i}return s}m.__functionName="sap.fe.macros.internal.valuehelp.AdditionalValueFormatter#formatPlaceholder";const p=function(e){if(p.hasOwnProperty(e)){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++){a[n-1]=arguments[n]}return p[e].apply(this,a)}else{return""}};p.getGrowing=u;p.formatValueState=h;p.formatPlaceholder=m;e.set("sap.fe.macros.internal.valuehelp.AdditionalValueFormatter",p);return p},false);
//# sourceMappingURL=AdditionalValueFormatter.js.map