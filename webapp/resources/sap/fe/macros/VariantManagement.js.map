{"version":3,"file":"VariantManagement.js","names":["VariantManagement","_dec","defineUI5Class","_dec2","property","type","required","_dec3","association","multiple","_dec4","defaultValue","_dec5","_class","_class2","_BuildingBlock","properties","others","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_exports","_inheritsLoose","_proto","prototype","onMetadataAvailable","content","createContent","availableIds","getAssociation","connectToFilterbar","Array","isArray","variantManagementContent","VariantManagementControl","id","generate","for","showSetAsDefault","headerLevel","setAggregation","filterBarIds","ids","forEach","controlId","BuildingBlock","observeBuildingBlock","onAvailable","control","isA","vm","getContent","setVariantBackReference","error","Log","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./VariantManagement.tsx"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport { association, defineUI5Class, property, type PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport BuildingBlock from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport type UI5Element from \"sap/ui/core/Element\";\nimport VariantManagementControl from \"sap/ui/fl/variants/VariantManagement\";\nimport type { $ControlSettings } from \"sap/ui/mdc/Control\";\nimport type FilterBarAPI from \"./filterBar/FilterBarAPI\";\n\n/**\n * Building block used to create a Variant Management based on the metadata provided by OData V4.\n *\n * Usage example:\n * <pre>\n * &lt;macro:VariantManagement\n * id=\"SomeUniqueIdentifier\"\n * for=\"{listOfControlIds&gt;}\"\n * /&gt;\n * </pre>\n *\n * {@link demo:sap/fe/core/fpmExplorer/index.html#/buildingBlocks/filterBar/filterBarVMWithTable Overview of Building Blocks}\n * @classdesc A custom UI5 class for managing variants in applications.\n * Extends the base `BuildingBlock` class and provides additional properties\n * such as `id`, `for`, `showSetAsDefault`, and `headerLevel` to configure variant management behavior.\n *\n * @public\n */\n@defineUI5Class(\"sap.fe.macros.VariantManagement\")\nexport class VariantManagement extends BuildingBlock<VariantManagementControl> {\n\t/**\n\t * Identifier for the variant management control.\n\t * @type {string | undefined}\n\t * @public\n\t */\n\t@property({ type: \"any\", required: true })\n\tid!: string | undefined;\n\n\t/**\n\t * A list of control IDs to which the variant management is applied.\n\t * @type {string[]}\n\t * @public\n\t */\n\t@association({ type: \"sap.ui.core.Control\", multiple: true })\n\tfor: string[] = [];\n\n\t/**\n\t * Whether the \"Set as Default\" option is visible.\n\t * @type {boolean | undefined}\n\t * @default true\n\t * @public\n\t */\n\t@property({ type: \"boolean\", defaultValue: true })\n\tshowSetAsDefault: boolean | undefined;\n\n\t/**\n\t * Header level for the variant management, determining its position or style.\n\t * @type {string | undefined}\n\t * @public\n\t */\n\t@property({ type: \"string\" })\n\theaderLevel: string | undefined;\n\n\tconstructor(properties: $ControlSettings & PropertiesOf<VariantManagement>, others?: $ControlSettings) {\n\t\tsuper(properties, others);\n\t}\n\n\tonMetadataAvailable(): void {\n\t\tthis.content = this.createContent();\n\t\tconst availableIds = this.getAssociation(\"for\", null) || [];\n\t\tthis.connectToFilterbar(Array.isArray(availableIds) ? availableIds : [availableIds]);\n\t}\n\n\t/**\n\t * Create and configure the VariantManagement control content.\n\t * @returns The VariantManagement control.\n\t */\n\tcreateContent(): VariantManagementControl {\n\t\tconst variantManagementContent = new VariantManagementControl({\n\t\t\tid: generate([this.id, \"VM\"]),\n\t\t\tfor: this.for,\n\t\t\tshowSetAsDefault: this.showSetAsDefault,\n\t\t\theaderLevel: this.headerLevel\n\t\t});\n\t\tthis.setAggregation(\"content\", variantManagementContent);\n\t\treturn variantManagementContent;\n\t}\n\n\t/**\n\t * Connects the variant management component to a list of filter bar controls.\n\t * @param filterBarIds The unique identifiers of the filter bar controls to connect with.\n\t * @throws {Error} Logs an error message if the connection to any filter bar control fails.\n\t */\n\tconnectToFilterbar(filterBarIds: string | string[]): void {\n\t\tconst ids = Array.isArray(filterBarIds) ? filterBarIds : [filterBarIds];\n\t\tids.forEach((controlId) => {\n\t\t\ttry {\n\t\t\t\tBuildingBlock.observeBuildingBlock(controlId, {\n\t\t\t\t\tonAvailable: (control: UI5Element) => {\n\t\t\t\t\t\tif (control && control.isA(\"sap.fe.macros.filterBar.FilterBarAPI\")) {\n\t\t\t\t\t\t\tconst vm = this.getContent();\n\t\t\t\t\t\t\tif (vm) {\n\t\t\t\t\t\t\t\t(control as FilterBarAPI).setVariantBackReference(vm);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\tLog.error(`Error setting variant in Filter Bar: ${error}`);\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport default VariantManagement;\n"],"mappings":";;;;swCASA,IAmBaA,GAAiBC,EAD7BC,EAAe,mCAAkCC,EAOhDC,EAAS,CAAEC,KAAM,MAAOC,SAAU,OAAOC,EAQzCC,EAAY,CAAEH,KAAM,sBAAuBI,SAAU,OAAOC,EAS5DN,EAAS,CAAEC,KAAM,UAAWM,aAAc,OAAOC,EAQjDR,EAAS,CAAEC,KAAM,WAAWJ,EAAAY,GAAAC,EAAA,SAAAC,GAG7B,SAAAf,EAAYgB,EAAgEC,GAA2B,IAAAC,EACtGA,EAAAH,EAAAI,KAAAC,KAAMJ,EAAYC,IAAOG,KAlC1BC,EAAAH,EAAA,KAAAI,EAAAJ,GAQAG,EAAAH,EAAA,MAAAK,EAAAL,GAQAG,EAAAH,EAAA,mBAAAM,EAAAN,GASAG,EAAAH,EAAA,cAAAO,EAAAP,GAAA,OAAAA,CAUA,CAACQ,EAAA1B,oBAAA2B,EAAA3B,EAAAe,GAAA,IAAAa,EAAA5B,EAAA6B,UAAAD,EAEDE,oBAAA,SAAAA,IACCV,KAAKW,QAAUX,KAAKY,gBACpB,MAAMC,EAAeb,KAAKc,eAAe,MAAO,OAAS,GACzDd,KAAKe,mBAAmBC,MAAMC,QAAQJ,GAAgBA,EAAe,CAACA,GACvE,EAEAL,EAIAI,cAAA,SAAAA,IACC,MAAMM,EAA2B,IAAIC,EAAyB,CAC7DC,GAAIC,EAAS,CAACrB,KAAKoB,GAAI,OACvBE,IAAKtB,KAAKsB,IACVC,iBAAkBvB,KAAKuB,iBACvBC,YAAaxB,KAAKwB,cAEnBxB,KAAKyB,eAAe,UAAWP,GAC/B,OAAOA,CACR,EAEAV,EAKAO,mBAAA,SAAAA,EAAmBW,GAClB,MAAMC,EAAMX,MAAMC,QAAQS,GAAgBA,EAAe,CAACA,GAC1DC,EAAIC,QAASC,IACZ,IACCC,EAAcC,qBAAqBF,EAAW,CAC7CG,YAAcC,IACb,GAAIA,GAAWA,EAAQC,IAAI,wCAAyC,CACnE,MAAMC,EAAKnC,KAAKoC,aAChB,GAAID,EAAI,CACNF,EAAyBI,wBAAwBF,EACnD,CACD,IAGH,CAAE,MAAOG,GACRC,EAAID,MAAM,wCAAwCA,IACnD,GAEF,EAAC,OAAA1D,CAAA,CAnD4B,CA/BSkD,GAAa5B,EAAAsC,EAAA9C,EAAAe,UAAA,MAAA1B,GAAA,CAAA0D,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAzC,EAAAqC,EAAA9C,EAAAe,UAAA,OAAAtB,GAAA,CAAAsD,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,iBAenC,EAAE,IAAAxC,EAAAoC,EAAA9C,EAAAe,UAAA,oBAAAnB,GAAA,CAAAmD,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAvC,EAAAmC,EAAA9C,EAAAe,UAAA,eAAAjB,GAAA,CAAAiD,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAlD,KAAAD,GAAAa,EAAA1B,oBAAA,OAsEJA,CAAiB","ignoreList":[]}