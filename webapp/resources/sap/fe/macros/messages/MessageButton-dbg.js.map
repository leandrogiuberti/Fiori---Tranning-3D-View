{"version":3,"names":["MessageButton","_dec","defineUI5Class","_dec2","aggregation","type","multiple","singularName","_dec3","event","_class","_class2","_Button","id","settings","_this","call","_initializerDefineProperty","_descriptor","_descriptor2","sGeneralGroupText","sViewId","sLastActionText","_inheritsLoose","_proto","prototype","init","Button","apply","isHiddenDraftEnabled","CommonUtils","getAppComponent","getEnvironmentCapabilities","getCapabilities","HiddenDraft","enabled","attachPress","handleMessagePopoverPress","oMessagePopover","MessagePopover","oItemBinding","getBinding","attachChange","_setMessageData","messageButtonId","getId","addCustomData","CustomData","key","value","attachModelContextChange","_applyFiltersAndSort","bind","attachActiveTitlePress","_activeTitlePress","oEvent","toggle","getSource","_applyGroupingAsync","oView","aWaitForData","oViewBindingContext","getBindingContext","_findTablesRelatedToMessages","view","oRes","aMessages","getContexts","map","oContext","getObject","oViewContext","oObjectPage","getContent","messageHandling","getVisibleSectionsFromObjectPageLayout","forEach","oSection","getSubSections","oSubSection","findElements","oElem","isA","i","length","oRowBinding","getRowBinding","sElemeBindingPath","getPath","target","indexOf","push","table","subsection","oTables","_oTable","oMDCTable","oSubsection","setBindingContext","isLengthFinal","Promise","resolve","attachEventOnce","waitForGroupingApplied","setTimeout","_applyGrouping","all","getModel","checkMessages","err","Log","error","oObjectPageLayout","_getObjectPageLayout","messages","getItems","section","enableBinding","_checkControlIdInSections","_fnEnableBindings","viewId","_getViewId","UI5Element","getElementById","uIModel","setProperty","undefined","_getTableRefErrorContext","oTable","oModel","getProperty","sRefErrorContextPath","replace","getContext","_updateInternalModel","tableRowContext","rowIndex","tableTargetColProperty","messageObject","isCreationRow","temp","targetColProperty","model","context","aValidMessageIds","Messaging","getMessageModel","getData","message","aObsoleteMessagelIds","Object","keys","filter","internalMessageId","obsoleteId","assign","_setGroupLabelForTransientMsg","sActionName","Library","getResourceBundleFor","getText","setGroupName","_computeMessageGroupAndSubTitle","subSection","elements","hasMultipleSubSections","actionName","resourceModel","getResourceModel","detachChange","setSectionNameInGroup","element","targetTableInfo","l","targetedControl","isBackEndMessage","RegExp","test","getTargets","getParent","rowBinding","fnCallbackSetGroupName","obj","getTableColumnDataAndSetSubtile","oTargetTableInfo","subTitle","setSubtitle","setActiveTitle","oTableRowContext","isInactive","_formatMessageDescription","sTableTargetColName","getIndex","sTableTargetColProperty","getSubtitle","formElement","parent","label","getLabel","labelText","isTargetedControlOrphan","bIsOrphanElement","_getMdcTable","tableHeader","getHeader","targetColumnIndex","_getTableColumnIndex","getColumns","getPropertyKey","_getTableRow","_getTableRowIndex","oTableRowBindingContexts","getCurrentContexts","messageSubtitle","getMessageSubtitle","getValueState","includeTableGroupName","_checkMergeLogicForMessageGrouping","sectionBasedGroupName","createSectionGroupName","viewContextPath","messageTargetPropertyName","split","pop","internalModel","internalModelMessageTargetPropertyPath","internalModelMessageTargetPropertyContextPath","substring","lastIndexOf","startsWith","fireActiveTitlePress","item","bIncludeTableGroupName","singleSubsectionInPageLayout","getViewData","sectionLayout","multiSubsectionInTabLayout","block","getBlocks","content","getAggregation","blocks","getMainContent","Function","aSubSections","j","k","aVisibleSections","bIsGeneralGroupName","shouldBreak","oMessageObject","_getGeneralGroupText","aControls","getControlFromMessageRelatingToSubSection","oTargetedControl","persistent","getGroupName","_findTargetForMessage","viewPath","messageTargetPath","includes","oMetaModel","getMetaModel","contextPath","getMetaPath","oContextPathMetadata","$kind","_fnEnableSubSectionBinding","getMoreBlocks","subBlock","getActions","actions","aSections","iSection","iSubSection","oAllBlocks","_findMessageGroupAfterRebinding","attachDataReceived","sControlId","oControl","View","_setLongtextUrlDescription","oDiagnosisTitle","setAsyncDescriptionHandler","config","sLongTextUrl","getLongtextUrl","jQuery","ajax","url","success","data","sDiagnosisText","getHtmlText","oldDescription","getDescription","setDescription","promise","sError","reject","processTableColumnProperties","tableColProperty","rowInformation","tableColBindingContextTextAnnotation","getTableColBindingContextForTextAnnotation","tableColTextAnnotationPath","tableColTextArrangement","labelWithValue","getTableColValue","computeColumnInfo","tableTargetColName","msgObj","colFromTableSettings","fetchColumnInfo","columnInfo","availability","getType","join","_navigationConfigured","getTableColumnVisibilityInfo","_ref","visibility","fieldsAffectedTitle","FormattedText","htmlText","fieldAffectedText","Array","isArray","diagnosisTitle","uIMessageDescription","description","diagnosisText","messageDescriptionContent","handleNoMessages","setVisible","fireEvent","iMessageLength","clearTimeout","_setMessageDataTimeout","sIcon","oMessages","oMessageCount","Error","Warning","Success","Information","oResourceBundle","sButtonType","ButtonType","Default","messageKey","messageText","toString","MessageType","Negative","Critical","Neutral","totalNumberOfMessages","setText","messageCount","messageKeys","singleTooltipKey","multipleTooltipKey","entries","messageType","messageTypeCount","MESSAGEBUTTON_SHORTCUT","toolTip","setTooltip","setIcon","setType","oPageReady","getController","pageReady","waitPageReady","navigateBack","oInternalModelContext","oItem","getParameter","oMessage","bIsBackendMessage","sSectionTitle","_defaultFocus","mdcTable","focusInfo","preventScroll","targetInfo","focus","subSections","visibleSections","controls","oTargetMdcTable","controlIds","controlId","control","parentControl","reduce","acc","val","_routing","navigateToContext","_navigateFromMessageToSectionTableInIconTabBarMode","oRefErrorContext","oRefError","_setFocusOnTargetField","targetMdcTable","iRowIndex","aTargetMdcTableRow","_getMdcTableRows","iFirstVisibleRow","_getGridTable","getFirstVisibleRow","oTargetRow","oTargetCell","getTargetCell","setFocusToControl","errorPropertyPath","navigateForwardToContext","scrollToIndex","focusOnTargetField","focusOnMessageTargetControl","sections","getSections","sectionWithTheControl","find","_navigateFromMessageToSectionInIconTabBarMode","handleMessageNavigation","getControlIds","findSubSection","setMode","groupNames","findSubSectionByTitleOrControl","title","getTitle","some","targetRow","hasNonEditableField","getEditable","isControlInTable","elem","aAllViewElements","aErroneousControls","getDomRef","aNotTableErroneousControls","ColumnListItem","getMetadata","getName","oTargetField","getContentEdit","_getMessageRank","aElements","aAllElements","sectionRank","_fnFilterUponId","getControlId","getVisible","hasOwnProperty","sectionName","subSectionName","getPersistent","_filterOutMessagesInDialog","fnTest","aControlIds","isMessageOutOfParameterDialog","Filter","path","caseSensitive","_filterOutContextSuccessMessages","boundContextSuccessMessages","_getFilterToHideBackendMessageOnErrorValidation","getIdsOfFielsdWithErrorValidation","validation","match","filters","operator","FilterOperator","EQ","value1","and","oValidationFilters","hiddenDraftFilter","oValidationAndContextFilter","oFilters","sPath","oSorter","oDialogFilter","objectPageLayoutSections","aUserDefinedFilter","aCustomFilters","value2","oBindingContext","messageButtonHelper","getCheckControlInViewFilter","oContextSuccessFilters","filterArray","viewContext","editFlow","getRootContext","getHiddenDraftUseCaseFilter","validationAndHiddenDraftFilter","StartsWith","oValidationContextDialogFilters","Sorter","obj1","obj2","rankA","rankB","sort","_getSectionBySectionTitle","bUseIconTabBar","getUseIconTabBar","sSelectedSectionId","getSelectedSection","setSelectedSection","oTableContext","oOPContext","bShouldWaitForTableRefresh","oElement","oParentElement","oMdcTable","oTableRow","getTable","findIndex","getTargetCellIndex","elt","getCells","cell","getTargetColumnIndex","targetElement","targetCellIndex","targetCellId","tableColumns","column","getCreationTemplate","search","component","sap","ui","require","navObject","getOwnerComponentFor","getNavigation","subOPConfigured","navConfigured","detail","route","getRowSettings","getRowActions","messagePopover","fnFocus","isOpen","fnOnClose","detachEvent","attachEvent","close","warning","escape","String","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sourceRoot":".","sources":["MessageButton.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type { EnhanceWithUI5 } from \"sap/fe/base/ClassSupport\";\nimport { aggregation, defineUI5Class, event } from \"sap/fe/base/ClassSupport\";\nimport type { FEView } from \"sap/fe/core/BaseController\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type PageController from \"sap/fe/core/PageController\";\nimport type { TargetTableInfoType } from \"sap/fe/core/controllerextensions/messageHandler/messageHandling\";\nimport messageHandling from \"sap/fe/core/controllerextensions/messageHandler/messageHandling\";\nimport type { HiddenDraft } from \"sap/fe/core/converters/ManifestSettings\";\nimport { type ObjectPageManifestSettings } from \"sap/fe/core/converters/ManifestSettings\";\nimport type { InternalModelContext } from \"sap/fe/core/helpers/ModelHelper\";\nimport { getResourceModel } from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport type Field from \"sap/fe/macros/Field\";\nimport type FieldWrapper from \"sap/fe/macros/controls/FieldWrapper\";\nimport type MessageFilter from \"sap/fe/macros/messages/MessageFilter\";\nimport MessagePopover from \"sap/fe/macros/messages/MessagePopover\";\nimport type TableAPI from \"sap/fe/macros/table/TableAPI\";\nimport type { TableColumnProperties } from \"sap/fe/macros/table/TableAPI\";\nimport type ObjectPageController from \"sap/fe/templates/ObjectPage/ObjectPageController.controller\";\nimport type SubSectionBlock from \"sap/fe/templates/ObjectPage/controls/SubSectionBlock\";\nimport type { $ButtonSettings } from \"sap/m/Button\";\nimport { default as Button } from \"sap/m/Button\";\nimport ColumnListItem from \"sap/m/ColumnListItem\";\nimport FormattedText from \"sap/m/FormattedText\";\nimport type HBox from \"sap/m/HBox\";\nimport type Label from \"sap/m/Label\";\nimport type MessageItem from \"sap/m/MessageItem\";\nimport type { MessagePopover$ActiveTitlePressEvent } from \"sap/m/MessagePopover\";\nimport type ResponsiveTable from \"sap/m/Table\";\nimport { ButtonType } from \"sap/m/library\";\nimport type CoreEvent from \"sap/ui/base/Event\";\nimport type ManagedObject from \"sap/ui/base/ManagedObject\";\nimport type Control from \"sap/ui/core/Control\";\nimport CustomData from \"sap/ui/core/CustomData\";\nimport UI5Element from \"sap/ui/core/Element\";\nimport Library from \"sap/ui/core/Lib\";\nimport Messaging from \"sap/ui/core/Messaging\";\nimport type Message from \"sap/ui/core/message/Message\";\nimport MessageType from \"sap/ui/core/message/MessageType\";\nimport View from \"sap/ui/core/mvc/View\";\nimport type DynamicSideContent from \"sap/ui/layout/DynamicSideContent\";\nimport type FormElement from \"sap/ui/layout/form/FormElement\";\nimport type mdcField from \"sap/ui/mdc/Field\";\nimport type { default as MDCTable, default as Table } from \"sap/ui/mdc/Table\";\nimport type Content from \"sap/ui/mdc/valuehelp/base/Content\";\nimport type BaseContext from \"sap/ui/model/Context\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport Sorter from \"sap/ui/model/Sorter\";\nimport type JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type ODataV4Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type Column from \"sap/ui/table/Column\";\nimport type CreationRow from \"sap/ui/table/CreationRow\";\nimport type Row from \"sap/ui/table/Row\";\nimport type UITable from \"sap/ui/table/Table\";\nimport jQuery from \"sap/ui/thirdparty/jquery\";\nimport type ObjectPageLayout from \"sap/uxap/ObjectPageLayout\";\nimport type ObjectPageSection from \"sap/uxap/ObjectPageSection\";\nimport type ObjectPageSubSection from \"sap/uxap/ObjectPageSubSection\";\nimport type SubSection from \"../controls/section/SubSection\";\nimport messageButtonHelper from \"./MessageButtonHelper\";\n\ntype MessageCount = {\n\tError: number;\n\tWarning: number;\n\tSuccess: number;\n\tInformation: number;\n};\n\ntype $MessageButtonSettings = $ButtonSettings & {\n\tmessageChange: Function;\n};\n\n@defineUI5Class(\"sap.fe.macros.messages.MessageButton\")\nclass MessageButton extends Button {\n\tconstructor(id?: string | $MessageButtonSettings, settings?: $MessageButtonSettings) {\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t// @ts-ignore\n\t\tsuper(id, settings);\n\t}\n\n\t@aggregation({ type: \"sap.fe.macros.messages.MessageFilter\", multiple: true, singularName: \"customFilter\" })\n\tcustomFilters!: MessageFilter;\n\n\t@event()\n\tmessageChange!: Function;\n\n\tpublic oMessagePopover!: MessagePopover;\n\n\tpublic oItemBinding!: ODataListBinding;\n\n\tprivate oObjectPageLayout: ObjectPageLayout | undefined;\n\n\tprivate sGeneralGroupText = \"\";\n\n\tprivate _setMessageDataTimeout: number | undefined;\n\n\tprivate sViewId = \"\";\n\n\tprivate sLastActionText = \"\";\n\n\tpublic isHiddenDraftEnabled: boolean | undefined;\n\n\tinit(): void {\n\t\tButton.prototype.init.apply(this);\n\t\tthis.isHiddenDraftEnabled = (\n\t\t\tCommonUtils.getAppComponent(this)?.getEnvironmentCapabilities()?.getCapabilities()?.HiddenDraft as HiddenDraft\n\t\t)?.enabled;\n\t\t//press event handler attached to open the message popover\n\t\tthis.attachPress(this.handleMessagePopoverPress, this);\n\t\tthis.oMessagePopover = new MessagePopover();\n\t\tthis.oItemBinding = this.oMessagePopover.getBinding(\"items\") as ODataListBinding;\n\t\tthis.oItemBinding.attachChange(this._setMessageData, this);\n\t\tconst messageButtonId = this.getId();\n\t\tif (messageButtonId) {\n\t\t\tthis.oMessagePopover.addCustomData(new CustomData({ key: \"messageButtonId\", value: messageButtonId })); // TODO check for custom data type\n\t\t}\n\t\tthis.attachModelContextChange(this._applyFiltersAndSort.bind(this));\n\t\tthis.oMessagePopover.attachActiveTitlePress(this._activeTitlePress.bind(this));\n\t}\n\n\t/**\n\t * The method that is called when a user clicks on the MessageButton control.\n\t * @param oEvent Event object\n\t */\n\thandleMessagePopoverPress(oEvent: CoreEvent): void {\n\t\tthis.oMessagePopover.toggle(oEvent.getSource());\n\t}\n\n\t/**\n\t * The method that groups the messages based on the section or subsection they belong to.\n\t * This method force the loading of contexts for all tables before to apply the grouping.\n\t * @param oView Current view.\n\t * @returns Return promise.\n\t * @private\n\t */\n\tasync _applyGroupingAsync(oView: FEView): Promise<void> {\n\t\tconst aWaitForData: Promise<void>[] = [];\n\t\tconst oViewBindingContext = oView.getBindingContext();\n\t\tconst _findTablesRelatedToMessages = (view: View): { table: MDCTable; subsection: ObjectPageSubSection }[] => {\n\t\t\tconst oRes: { table: MDCTable; subsection: ObjectPageSubSection }[] = [];\n\t\t\tconst aMessages = this.oItemBinding.getContexts().map(function (oContext: ODataV4Context) {\n\t\t\t\treturn oContext.getObject();\n\t\t\t});\n\t\t\tconst oViewContext = view.getBindingContext();\n\t\t\tif (oViewContext) {\n\t\t\t\tconst oObjectPage: Control = view.getContent()[0];\n\t\t\t\tmessageHandling.getVisibleSectionsFromObjectPageLayout(oObjectPage).forEach(function (oSection: ObjectPageSection) {\n\t\t\t\t\toSection.getSubSections().forEach(function (oSubSection: ObjectPageSubSection) {\n\t\t\t\t\t\toSubSection.findElements(true).forEach(function (oElem: UI5Element) {\n\t\t\t\t\t\t\tif (oElem.isA<MDCTable>(\"sap.ui.mdc.Table\")) {\n\t\t\t\t\t\t\t\tfor (let i = 0; i < aMessages.length; i++) {\n\t\t\t\t\t\t\t\t\tconst oRowBinding = oElem.getRowBinding();\n\t\t\t\t\t\t\t\t\tif (oRowBinding) {\n\t\t\t\t\t\t\t\t\t\tconst sElemeBindingPath = `${oViewContext.getPath()}/${oElem.getRowBinding().getPath()}`;\n\t\t\t\t\t\t\t\t\t\tif (aMessages[i].target.indexOf(sElemeBindingPath) === 0) {\n\t\t\t\t\t\t\t\t\t\t\toRes.push({ table: oElem, subsection: oSubSection });\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn oRes;\n\t\t};\n\t\t// Search for table related to Messages and initialize the binding context of the parent subsection to retrieve the data\n\t\tconst oTables = _findTablesRelatedToMessages.bind(this)(oView);\n\t\toTables.forEach(function (_oTable) {\n\t\t\tconst oMDCTable = _oTable.table,\n\t\t\t\toSubsection = _oTable.subsection;\n\t\t\tif (!oMDCTable.getBindingContext() || oMDCTable.getBindingContext()?.getPath() !== oViewBindingContext?.getPath()) {\n\t\t\t\toSubsection.setBindingContext(oViewBindingContext);\n\t\t\t\tif (!oMDCTable.getRowBinding().isLengthFinal()) {\n\t\t\t\t\taWaitForData.push(\n\t\t\t\t\t\tnew Promise(function (resolve: Function) {\n\t\t\t\t\t\t\toMDCTable.getRowBinding().attachEventOnce(\"dataReceived\", function () {\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tconst waitForGroupingApplied = new Promise((resolve: Function) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis._applyGrouping();\n\t\t\t\tresolve();\n\t\t\t}, 0);\n\t\t});\n\t\ttry {\n\t\t\tawait Promise.all(aWaitForData);\n\t\t\toView.getModel().checkMessages();\n\t\t\tawait waitForGroupingApplied;\n\t\t} catch (err) {\n\t\t\tLog.error(\"Error while grouping the messages in the messagePopOver\");\n\t\t}\n\t}\n\n\t/**\n\t * The method that groups the messages based on the section or subsection they belong to.\n\t * @private\n\t */\n\t_applyGrouping(): void {\n\t\tthis.oObjectPageLayout = this._getObjectPageLayout(this, this.oObjectPageLayout);\n\t\tif (!this.oObjectPageLayout) {\n\t\t\treturn;\n\t\t}\n\t\tconst messages: MessageItem[] = this.oMessagePopover.getItems();\n\t\tconst section = messageHandling.getVisibleSectionsFromObjectPageLayout(this.oObjectPageLayout);\n\t\tconst enableBinding = this._checkControlIdInSections(messages, false);\n\t\tif (enableBinding) {\n\t\t\tthis._fnEnableBindings(section);\n\t\t}\n\t\t//Clear messageTargetProperty\n\t\tconst viewId = this._getViewId(this.getId());\n\t\tconst view = UI5Element.getElementById(viewId as string);\n\t\tconst uIModel = view?.getModel(\"internal\") as JSONModel;\n\t\tuIModel?.setProperty(\"/messageTargetPropertyPath\", undefined);\n\t}\n\n\t/**\n\t * The method retrieves the binding context for the refError object.\n\t * The refError contains a map to store the indexes of the rows with errors.\n\t * @param oTable The table for which we want to get the refError Object.\n\t * @returns Context of the refError.\n\t * @private\n\t */\n\t_getTableRefErrorContext(oTable: MDCTable): BaseContext | undefined {\n\t\tconst oModel = oTable.getModel(\"internal\") as JSONModel;\n\t\t//initialize the refError property if it doesn't exist\n\t\tif (!oTable.getBindingContext(\"internal\")?.getProperty(\"refError\")) {\n\t\t\toModel.setProperty(\"refError\", {}, oTable.getBindingContext(\"internal\")!);\n\t\t}\n\t\tconst sRefErrorContextPath =\n\t\t\toTable.getBindingContext(\"internal\")?.getPath() +\n\t\t\t\"/refError/\" +\n\t\t\toTable.getBindingContext()?.getPath().replace(\"/\", \"$\") +\n\t\t\t\"$\" +\n\t\t\toTable.getRowBinding().getPath().replace(\"/\", \"$\");\n\t\tconst oContext = oModel.getContext(sRefErrorContextPath);\n\t\tif (!oContext.getProperty(\"\")) {\n\t\t\toModel.setProperty(\"\", {}, oContext);\n\t\t}\n\t\treturn oContext;\n\t}\n\n\t_updateInternalModel(\n\t\ttableRowContext: ODataV4Context | undefined,\n\t\trowIndex: number | undefined,\n\t\ttableTargetColProperty: string | undefined,\n\t\ttable: MDCTable,\n\t\tmessageObject: Message,\n\t\tisCreationRow?: boolean\n\t): void {\n\t\tlet temp;\n\t\tif (isCreationRow) {\n\t\t\ttemp = {\n\t\t\t\trowIndex: \"CreationRow\",\n\t\t\t\ttargetColProperty: tableTargetColProperty ? tableTargetColProperty : \"\"\n\t\t\t};\n\t\t} else {\n\t\t\ttemp = {\n\t\t\t\trowIndex: tableRowContext ? rowIndex : \"\",\n\t\t\t\ttargetColProperty: tableTargetColProperty ? tableTargetColProperty : \"\"\n\t\t\t};\n\t\t}\n\t\tconst model = table.getModel(\"internal\") as JSONModel,\n\t\t\tcontext = this._getTableRefErrorContext(table);\n\t\t//we first remove the entries with obsolete message ids from the internal model before inserting the new error info :\n\t\tconst aValidMessageIds = Messaging.getMessageModel()\n\t\t\t.getData()\n\t\t\t.map(function (message: Message) {\n\t\t\t\treturn message.getId();\n\t\t\t});\n\t\tlet aObsoleteMessagelIds;\n\t\tif (context?.getProperty(\"\")) {\n\t\t\taObsoleteMessagelIds = Object.keys(context?.getProperty(\"\")).filter(function (internalMessageId) {\n\t\t\t\treturn aValidMessageIds.indexOf(internalMessageId) === -1;\n\t\t\t});\n\t\t\taObsoleteMessagelIds.forEach(function (obsoleteId) {\n\t\t\t\tdelete context?.getProperty(\"\")[obsoleteId];\n\t\t\t});\n\t\t}\n\t\tmodel?.setProperty(\n\t\t\tmessageObject.getId(),\n\t\t\tObject.assign({}, context?.getProperty(messageObject.getId()) ? context.getProperty(messageObject.getId()) : {}, temp),\n\t\t\tcontext\n\t\t);\n\t}\n\n\t/**\n\t * The method that sets groups for transient messages.\n\t * @param message The transient message for which we want to compute and set group.\n\t * @param sActionName The action name.\n\t * @private\n\t */\n\t_setGroupLabelForTransientMsg(message: MessageItem, sActionName: string | undefined): void {\n\t\tthis.sLastActionText = this.sLastActionText\n\t\t\t? this.sLastActionText\n\t\t\t: Library.getResourceBundleFor(\"sap.fe.core\")!.getText(\"T_MESSAGE_BUTTON_SAPFE_MESSAGE_GROUP_LAST_ACTION\");\n\n\t\tmessage.setGroupName(`${this.sLastActionText}: ${sActionName}`);\n\t}\n\n\t/**\n\t * The method that groups messages and adds the subtitle.\n\t * @param message The message we use to compute the group and subtitle.\n\t * @param section The section containing the controls.\n\t * @param subSection The subsection containing the controls.\n\t * @param elements List of controls from a subsection related to a message.\n\t * @param hasMultipleSubSections True if there is more than 1 subsection in the section.\n\t * @param actionName The action name, if any.\n\t * @returns Return the control targeted by the message.\n\t * @private\n\t */\n\t_computeMessageGroupAndSubTitle(\n\t\tmessage: MessageItem,\n\t\tsection: ObjectPageSection,\n\t\tsubSection: ObjectPageSubSection,\n\t\telements: UI5Element[],\n\t\thasMultipleSubSections: boolean,\n\t\tactionName: string | undefined\n\t): UI5Element | undefined {\n\t\tconst resourceModel = getResourceModel(section);\n\t\tthis.oItemBinding.detachChange(this._setMessageData, this);\n\t\tconst messageObject = message.getBindingContext(\"message\")?.getObject() as Message;\n\t\tconst setSectionNameInGroup = true;\n\t\tlet element: UI5Element,\n\t\t\ttable: MDCTable | undefined,\n\t\t\ttargetTableInfo = {} as TargetTableInfoType,\n\t\t\tl,\n\t\t\trowIndex: number | undefined,\n\t\t\ttargetedControl: UI5Element | undefined,\n\t\t\tisCreationRow: boolean;\n\t\tconst isBackEndMessage = new RegExp(\"^/\").test(messageObject?.getTargets()[0]);\n\t\tif (isBackEndMessage) {\n\t\t\tfor (l = 0; l < elements.length; l++) {\n\t\t\t\telement = elements[l];\n\t\t\t\ttargetedControl = element;\n\t\t\t\tif (element.isA(\"sap.m.Table\") || (element as UI5Element).isA(\"sap.ui.table.Table\")) {\n\t\t\t\t\ttable = element.getParent() as MDCTable;\n\t\t\t\t\tconst rowBinding = table.getRowBinding();\n\t\t\t\t\tconst fnCallbackSetGroupName = (): void => {\n\t\t\t\t\t\tthis._setGroupLabelForTransientMsg(message, actionName);\n\t\t\t\t\t};\n\t\t\t\t\tif (rowBinding && rowBinding.isLengthFinal() && table.getBindingContext()) {\n\t\t\t\t\t\tconst obj = messageHandling.getTableColumnDataAndSetSubtile(\n\t\t\t\t\t\t\tmessageObject,\n\t\t\t\t\t\t\ttable,\n\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\trowBinding,\n\t\t\t\t\t\t\tactionName,\n\t\t\t\t\t\t\tsetSectionNameInGroup,\n\t\t\t\t\t\t\tfnCallbackSetGroupName\n\t\t\t\t\t\t);\n\t\t\t\t\t\ttargetTableInfo = obj.oTargetTableInfo;\n\t\t\t\t\t\tif (obj.subTitle) {\n\t\t\t\t\t\t\tmessage.setSubtitle(obj.subTitle);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmessage.setActiveTitle(\n\t\t\t\t\t\t\t!!targetTableInfo.oTableRowContext &&\n\t\t\t\t\t\t\t\t!targetTableInfo.oTableRowContext?.isInactive() && // check if the rowcontext is active\n\t\t\t\t\t\t\t\ttargetTableInfo.oTableRowContext.getPath() !==\n\t\t\t\t\t\t\t\t\tmessage.getBindingContext(\"message\")?.getProperty(\"target\").replace(/\\/$/, \"\") // check if the target of the message is not the row itself (remove the last / if presents)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (targetTableInfo.oTableRowContext && !targetTableInfo.oTableRowContext.isInactive()) {\n\t\t\t\t\t\t\tthis._formatMessageDescription(\n\t\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\t\ttargetTableInfo.oTableRowContext,\n\t\t\t\t\t\t\t\ttargetTableInfo.sTableTargetColName,\n\t\t\t\t\t\t\t\ttable\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\trowIndex = targetTableInfo.oTableRowContext && targetTableInfo.oTableRowContext.getIndex();\n\t\t\t\t\t\tthis._updateInternalModel(\n\t\t\t\t\t\t\ttargetTableInfo.oTableRowContext,\n\t\t\t\t\t\t\trowIndex,\n\t\t\t\t\t\t\ttargetTableInfo.sTableTargetColProperty,\n\t\t\t\t\t\t\ttable,\n\t\t\t\t\t\t\tmessageObject\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tmessage.setActiveTitle(true);\n\n\t\t\t\t\tif (message.getSubtitle() === \"\") {\n\t\t\t\t\t\tlet formElement: FormElement | undefined;\n\t\t\t\t\t\tlet parent = targetedControl.getParent();\n\t\t\t\t\t\twhile (parent) {\n\t\t\t\t\t\t\tif (parent && parent.isA<FormElement>(\"sap.ui.layout.form.FormElement\")) {\n\t\t\t\t\t\t\t\tformElement = parent;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tparent = parent.getParent();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (formElement) {\n\t\t\t\t\t\t\tconst label = formElement.getLabel();\n\t\t\t\t\t\t\tlet labelText = \"\";\n\n\t\t\t\t\t\t\tif (typeof label === \"string\") {\n\t\t\t\t\t\t\t\tlabelText = label;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlabelText = (label as Label).getText();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmessage.setSubtitle(labelText);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t//check if the targeted control is a child of one of the other controls\n\t\t\t\t\tconst isTargetedControlOrphan = messageHandling.bIsOrphanElement(targetedControl, elements);\n\t\t\t\t\tif (isTargetedControlOrphan) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t//There is only one elt as this is a frontEnd message\n\t\t\ttargetedControl = elements[0];\n\t\t\ttable = this._getMdcTable(targetedControl);\n\t\t\ttargetTableInfo = {} as TargetTableInfoType;\n\t\t\tif (table) {\n\t\t\t\ttargetTableInfo.tableHeader = table.getHeader();\n\t\t\t\tconst targetColumnIndex = this._getTableColumnIndex(targetedControl);\n\t\t\t\ttargetTableInfo.sTableTargetColProperty =\n\t\t\t\t\ttargetColumnIndex !== undefined && targetColumnIndex > -1\n\t\t\t\t\t\t? table.getColumns()[targetColumnIndex].getPropertyKey()\n\t\t\t\t\t\t: undefined;\n\n\t\t\t\ttargetTableInfo.sTableTargetColName =\n\t\t\t\t\ttargetTableInfo.sTableTargetColProperty && targetColumnIndex !== undefined && targetColumnIndex > -1\n\t\t\t\t\t\t? table.getColumns()[targetColumnIndex].getHeader()\n\t\t\t\t\t\t: undefined;\n\t\t\t\tisCreationRow = this._getTableRow(targetedControl)?.isA<CreationRow>(\"sap.ui.table.CreationRow\") ?? false;\n\t\t\t\tif (!isCreationRow) {\n\t\t\t\t\trowIndex = this._getTableRowIndex(targetedControl);\n\t\t\t\t\ttargetTableInfo.oTableRowBindingContexts = table.getRowBinding().getCurrentContexts();\n\t\t\t\t\ttargetTableInfo.oTableRowContext =\n\t\t\t\t\t\trowIndex !== undefined ? targetTableInfo.oTableRowBindingContexts[rowIndex] : undefined;\n\t\t\t\t}\n\t\t\t\tconst messageSubtitle = messageHandling.getMessageSubtitle(\n\t\t\t\t\tmessageObject,\n\t\t\t\t\ttargetTableInfo.oTableRowBindingContexts,\n\t\t\t\t\ttargetTableInfo.oTableRowContext,\n\t\t\t\t\ttargetTableInfo.sTableTargetColName,\n\t\t\t\t\ttable,\n\t\t\t\t\tisCreationRow,\n\t\t\t\t\ttargetColumnIndex === 0 && (targetedControl as mdcField).getValueState() === \"Error\"\n\t\t\t\t\t\t? (targetedControl as Control)\n\t\t\t\t\t\t: undefined\n\t\t\t\t);\n\t\t\t\t//set the subtitle\n\t\t\t\tif (messageSubtitle) {\n\t\t\t\t\tmessage.setSubtitle(messageSubtitle);\n\t\t\t\t}\n\t\t\t\tmessage.setActiveTitle(!!targetTableInfo.oTableRowContext);\n\t\t\t\tif (targetTableInfo.oTableRowContext) {\n\t\t\t\t\tthis._formatMessageDescription(message, targetTableInfo.oTableRowContext, targetTableInfo.sTableTargetColName, table);\n\t\t\t\t}\n\t\t\t\tthis._updateInternalModel(\n\t\t\t\t\ttargetTableInfo.oTableRowContext,\n\t\t\t\t\trowIndex,\n\t\t\t\t\ttargetTableInfo.sTableTargetColProperty,\n\t\t\t\t\ttable,\n\t\t\t\t\tmessageObject,\n\t\t\t\t\tisCreationRow\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (setSectionNameInGroup) {\n\t\t\tconst includeTableGroupName = this._checkMergeLogicForMessageGrouping(section, subSection, hasMultipleSubSections);\n\t\t\tconst sectionBasedGroupName = messageHandling.createSectionGroupName(\n\t\t\t\tsection,\n\t\t\t\tsubSection,\n\t\t\t\thasMultipleSubSections,\n\t\t\t\ttargetTableInfo,\n\t\t\t\tresourceModel,\n\t\t\t\tincludeTableGroupName\n\t\t\t);\n\n\t\t\tmessage.setGroupName(sectionBasedGroupName);\n\t\t\tconst view = UI5Element.getElementById(this._getViewId(this.getId()) as string);\n\t\t\tconst viewContextPath = view?.getBindingContext()?.getPath();\n\t\t\tconst messageTargetPropertyName = messageObject.getTargets()[0]?.split(\"/\").pop();\n\t\t\tconst internalModel = view?.getModel(\"internal\") as JSONModel;\n\t\t\tconst internalModelMessageTargetPropertyPath = internalModel?.getProperty(\"/messageTargetPropertyPath\");\n\t\t\tconst internalModelMessageTargetPropertyContextPath = internalModelMessageTargetPropertyPath?.substring(\n\t\t\t\t0,\n\t\t\t\tinternalModelMessageTargetPropertyPath.lastIndexOf(\"/\")\n\t\t\t);\n\t\t\t// activeTitlePress should only be triggered in forward navigation and not in back navigation\n\t\t\tif (\n\t\t\t\tinternalModelMessageTargetPropertyContextPath &&\n\t\t\t\tmessageTargetPropertyName &&\n\t\t\t\tviewContextPath &&\n\t\t\t\tmessageTargetPropertyName === internalModelMessageTargetPropertyPath.split(\"/\").pop() &&\n\t\t\t\tviewContextPath.length >= internalModelMessageTargetPropertyContextPath.length &&\n\t\t\t\tviewContextPath.startsWith(internalModelMessageTargetPropertyContextPath)\n\t\t\t) {\n\t\t\t\tthis.oMessagePopover.fireActiveTitlePress({ item: message });\n\t\t\t\tinternalModel.setProperty(\"/messageTargetPropertyPath\", false);\n\t\t\t}\n\t\t}\n\t\tthis.oItemBinding.attachChange(this._setMessageData, this);\n\t\treturn targetedControl;\n\t}\n\n\t/**\n\t * The method to check if the section and subsection has single table control.\n\t * @param section ObjectPage section.\n\t * @param subSection ObjectPage sub section.\n\t * @param hasMultipleSubSections True if there is more than 1 subsection in the section.\n\t * @returns Returns boolean value for the single control inside the section, by default it is true.\n\t * @private\n\t */\n\t_checkMergeLogicForMessageGrouping(\n\t\tsection: ObjectPageSection,\n\t\tsubSection: ObjectPageSubSection,\n\t\thasMultipleSubSections: boolean\n\t): boolean {\n\t\tconst viewId = this._getViewId(this.getId());\n\t\tconst view = viewId ? (UI5Element.getElementById(viewId) as View) : undefined;\n\t\tlet bIncludeTableGroupName = true;\n\t\tconst singleSubsectionInPageLayout =\n\t\t\t!hasMultipleSubSections && (view?.getViewData() as ObjectPageManifestSettings)?.sectionLayout === \"Page\";\n\t\tconst multiSubsectionInTabLayout =\n\t\t\thasMultipleSubSections && (view?.getViewData() as ObjectPageManifestSettings)?.sectionLayout === \"Tabs\";\n\t\tif (singleSubsectionInPageLayout) {\n\t\t\tconst block = subSection.getBlocks();\n\t\t\tconst content = block.length === 1 ? (block[0].getAggregation(\"content\") as ManagedObject) : undefined;\n\t\t\tif (content?.isA(\"sap.fe.macros.table.TableAPI\")) {\n\t\t\t\tbIncludeTableGroupName = false;\n\t\t\t}\n\t\t} else if (multiSubsectionInTabLayout) {\n\t\t\tlet content;\n\t\t\tconst blocks = subSection.getBlocks();\n\t\t\t// In case of Reference Facet, the first block will be SubSectionBlock\n\t\t\tif (blocks.length === 1 && blocks[0]?.isA<SubSectionBlock>(\"sap.fe.templates.ObjectPage.controls.SubSectionBlock\")) {\n\t\t\t\tcontent = blocks[0].getAggregation(\"content\") as ManagedObject;\n\t\t\t\tif (content?.isA(\"sap.fe.macros.table.TableAPI\")) {\n\t\t\t\t\tbIncludeTableGroupName = false;\n\t\t\t\t} else if ((content as DynamicSideContent)?.isA(\"sap.ui.layout.DynamicSideContent\")) {\n\t\t\t\t\tcontent =\n\t\t\t\t\t\t(content as DynamicSideContent).getMainContent instanceof Function &&\n\t\t\t\t\t\t(content as DynamicSideContent)?.getMainContent();\n\t\t\t\t\tif (content && content.length === 1 && content[0]?.isA(\"sap.fe.macros.table.TableAPI\")) {\n\t\t\t\t\t\tbIncludeTableGroupName = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn bIncludeTableGroupName;\n\t}\n\n\t_checkControlIdInSections(messages: MessageItem[], enableBinding?: boolean): boolean | void {\n\t\tlet section, aSubSections, message, i, j, k;\n\t\tthis.sGeneralGroupText = this.sGeneralGroupText\n\t\t\t? this.sGeneralGroupText\n\t\t\t: Library.getResourceBundleFor(\"sap.fe.core\")!.getText(\"T_MESSAGE_BUTTON_SAPFE_MESSAGE_GROUP_GENERAL\");\n\t\t//Get all sections from the object page layout\n\t\tconst aVisibleSections = messageHandling.getVisibleSectionsFromObjectPageLayout(this.oObjectPageLayout!);\n\t\tif (aVisibleSections) {\n\t\t\tconst viewId = this._getViewId(this.getId());\n\t\t\tconst oView = viewId ? (UI5Element.getElementById(viewId) as View) : undefined;\n\t\t\tconst sActionName = oView?.getBindingContext(\"internal\")?.getProperty(\"sActionName\");\n\t\t\tif (sActionName) {\n\t\t\t\t(oView?.getBindingContext(\"internal\") as InternalModelContext).setProperty(\"sActionName\", null);\n\t\t\t}\n\t\t\tfor (i = messages.length - 1; i >= 0; --i) {\n\t\t\t\t// Loop over all messages\n\t\t\t\tmessage = messages[i];\n\t\t\t\tlet bIsGeneralGroupName = true;\n\t\t\t\tfor (j = aVisibleSections.length - 1; j >= 0; --j) {\n\t\t\t\t\tlet shouldBreak = false;\n\t\t\t\t\t// Loop over all visible sections\n\t\t\t\t\tsection = aVisibleSections[j];\n\t\t\t\t\taSubSections = section.getSubSections();\n\t\t\t\t\tfor (k = aSubSections.length - 1; k >= 0; --k) {\n\t\t\t\t\t\t// Loop over all sub-sections\n\t\t\t\t\t\tconst subSection = aSubSections[k];\n\t\t\t\t\t\tconst oMessageObject = message?.getBindingContext(\"message\")?.getObject();\n\t\t\t\t\t\tthis.sGeneralGroupText = this._getGeneralGroupText(oView, oMessageObject);\n\t\t\t\t\t\tconst aControls = messageHandling.getControlFromMessageRelatingToSubSection(subSection, oMessageObject);\n\t\t\t\t\t\tif (aControls.length > 0) {\n\t\t\t\t\t\t\tconst oTargetedControl = this._computeMessageGroupAndSubTitle(\n\t\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\t\tsection,\n\t\t\t\t\t\t\t\tsubSection,\n\t\t\t\t\t\t\t\taControls,\n\t\t\t\t\t\t\t\taSubSections.length > 1,\n\t\t\t\t\t\t\t\tsActionName\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbIsGeneralGroupName = false;\n\t\t\t\t\t\t\t// if we found table that matches with the message, we don't stop the loop\n\t\t\t\t\t\t\t// in case we find an additional control (eg mdc field) that also match with the message\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\toTargetedControl &&\n\t\t\t\t\t\t\t\t!oTargetedControl.isA(\"sap.m.Table\") &&\n\t\t\t\t\t\t\t\t!(oTargetedControl as UI5Element).isA(\"sap.ui.table.Table\")\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tshouldBreak = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (shouldBreak) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (bIsGeneralGroupName) {\n\t\t\t\t\tconst oMessageObject = message.getBindingContext(\"message\")?.getObject();\n\t\t\t\t\tif (this.isHiddenDraftEnabled) {\n\t\t\t\t\t\tmessage.setActiveTitle(true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmessage.setActiveTitle(false);\n\t\t\t\t\t}\n\t\t\t\t\tif (oMessageObject.persistent && sActionName) {\n\t\t\t\t\t\tthis._setGroupLabelForTransientMsg(message, sActionName);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmessage.setGroupName(this.sGeneralGroupText);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!enableBinding && message.getGroupName() === this.sGeneralGroupText && this._findTargetForMessage(message)) {\n\t\t\t\t\t// when the section is not available in the view port\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//Fetches the group name of the message based on enabledment of hidden draft and page where error is present(current page/other page)\n\t_getGeneralGroupText(oView: View | undefined, oMessageObject: Message): string {\n\t\tconst viewPath = oView?.getBindingContext()?.getPath();\n\t\tconst messageTargetPath = oMessageObject?.getTargets()[0];\n\t\tif (this.isHiddenDraftEnabled && viewPath && !messageTargetPath.includes(viewPath)) {\n\t\t\treturn Library.getResourceBundleFor(\"sap.fe.core\")!.getText(\"T_MESSAGE_BUTTON_SAPFE_MESSAGE_GROUP_OTHER_PAGES\");\n\t\t} else {\n\t\t\treturn Library.getResourceBundleFor(\"sap.fe.core\")!.getText(\"T_MESSAGE_BUTTON_SAPFE_MESSAGE_GROUP_GENERAL\");\n\t\t}\n\t}\n\n\t_findTargetForMessage(message: MessageItem): boolean {\n\t\tconst messageObject = message.getBindingContext(\"message\") && message.getBindingContext(\"message\")?.getObject();\n\t\tif (messageObject && messageObject.target) {\n\t\t\tconst oMetaModel = this.oObjectPageLayout?.getModel()?.getMetaModel() as ODataMetaModel,\n\t\t\t\tcontextPath = oMetaModel && oMetaModel.getMetaPath(messageObject.target),\n\t\t\t\toContextPathMetadata = oMetaModel && oMetaModel.getObject(contextPath);\n\t\t\tif (oContextPathMetadata && oContextPathMetadata.$kind === \"Property\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Enable bindings of sub section content (blocks, more blocks, and actions).\n\t * @param subSection Object page sub section\n\t */\n\t_fnEnableSubSectionBinding(subSection: ObjectPageSubSection): void {\n\t\tsubSection.getBlocks().forEach((block) => block.setBindingContext(undefined));\n\t\tsubSection.getMoreBlocks().forEach((subBlock) => subBlock.setBindingContext(undefined));\n\t\tsubSection.getActions().forEach((actions) => actions.setBindingContext(undefined));\n\t}\n\n\t_fnEnableBindings(aSections: ObjectPageSection[]): void {\n\t\tfor (let iSection = 0; iSection < aSections.length; iSection++) {\n\t\t\tconst oSection = aSections[iSection];\n\t\t\tconst aSubSections = oSection.getSubSections();\n\t\t\tfor (let iSubSection = 0; iSubSection < aSubSections.length; iSubSection++) {\n\t\t\t\tconst oSubSection = aSubSections[iSubSection];\n\t\t\t\tconst oAllBlocks = oSubSection.getBlocks();\n\t\t\t\tif (oAllBlocks) {\n\t\t\t\t\tthis._fnEnableSubSectionBinding(oSubSection);\n\t\t\t\t}\n\t\t\t\tif (oSubSection.getBindingContext()) {\n\t\t\t\t\tthis._findMessageGroupAfterRebinding();\n\t\t\t\t\t(oSubSection.getBindingContext() as ODataV4Context)\n\t\t\t\t\t\t.getBinding()\n\t\t\t\t\t\t.attachDataReceived(this._findMessageGroupAfterRebinding.bind(this));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_findMessageGroupAfterRebinding(): void {\n\t\tconst aMessages = this.oMessagePopover.getItems();\n\t\tthis._checkControlIdInSections(aMessages, true);\n\t}\n\n\t/**\n\t * The method that retrieves the view ID (HTMLView/XMLView/JSONview/JSView/Templateview) of any control.\n\t * @param sControlId ID of the control needed to retrieve the view ID\n\t * @returns The view ID of the control\n\t */\n\t_getViewId(sControlId: string): string | undefined {\n\t\tlet sViewId,\n\t\t\toControl: ManagedObject | undefined | null = UI5Element.getElementById(sControlId);\n\t\twhile (oControl) {\n\t\t\tif (oControl instanceof View) {\n\t\t\t\tsViewId = oControl.getId();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\toControl = oControl.getParent();\n\t\t}\n\t\treturn sViewId;\n\t}\n\n\t_setLongtextUrlDescription(oDiagnosisTitle: FormattedText): void {\n\t\tthis.oMessagePopover.setAsyncDescriptionHandler(function (config: {\n\t\t\titem: MessageItem;\n\t\t\tpromise: {\n\t\t\t\tresolve: Function;\n\t\t\t\treject: Function;\n\t\t\t};\n\t\t}) {\n\t\t\t// Here we can fetch the data and concatenate it to the old one\n\t\t\t// By default, the longtextUrl fetching will overwrite the description (with the default behaviour)\n\t\t\t// Here as we have overwritten the default async handler, which fetches and replaces the description of the item\n\t\t\t// we can manually modify it to include whatever needed.\n\t\t\tconst sLongTextUrl = config.item.getLongtextUrl();\n\t\t\tif (sLongTextUrl) {\n\t\t\t\tjQuery.ajax({\n\t\t\t\t\ttype: \"GET\",\n\t\t\t\t\turl: sLongTextUrl,\n\t\t\t\t\tsuccess: function (data: string) {\n\t\t\t\t\t\tconst sDiagnosisText = oDiagnosisTitle.getHtmlText() + data;\n\t\t\t\t\t\tconst oldDescription = config.item.getDescription() ?? \"\";\n\t\t\t\t\t\tconfig.item.setDescription(`${oldDescription}${sDiagnosisText}`);\n\t\t\t\t\t\tconfig.promise.resolve();\n\t\t\t\t\t},\n\t\t\t\t\terror: function () {\n\t\t\t\t\t\tconst sError = `A request has failed for long text data. URL: ${sLongTextUrl}`;\n\t\t\t\t\t\tLog.error(sError);\n\t\t\t\t\t\tconfig.promise.reject(sError);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * It displays the row information of the error existing in the table.\n\t * @param table\n\t * @param tableRowContext\n\t * @param tableColProperty\n\t * @returns rowInformation\n\t */\n\n\tprocessTableColumnProperties(table: Table, tableRowContext: ODataV4Context, tableColProperty: TableColumnProperties): string {\n\t\tlet rowInformation = \"\";\n\n\t\tconst tableColBindingContextTextAnnotation = messageHandling.getTableColBindingContextForTextAnnotation(\n\t\t\ttable,\n\t\t\ttableRowContext,\n\t\t\ttableColProperty\n\t\t);\n\t\tconst tableColTextAnnotationPath = tableColBindingContextTextAnnotation\n\t\t\t? tableColBindingContextTextAnnotation.getObject(\"$Path\")\n\t\t\t: undefined;\n\t\tconst tableColTextArrangement =\n\t\t\ttableColTextAnnotationPath && tableColBindingContextTextAnnotation\n\t\t\t\t? tableColBindingContextTextAnnotation.getObject(\"@com.sap.vocabularies.UI.v1.TextArrangement/$EnumMember\")\n\t\t\t\t: undefined;\n\t\tconst labelWithValue = (table.getParent() as TableAPI)?.getTableColValue(\n\t\t\ttableRowContext,\n\t\t\ttableColTextAnnotationPath,\n\t\t\ttableColTextArrangement,\n\t\t\ttableColProperty\n\t\t);\n\t\trowInformation += `${labelWithValue}`;\n\n\t\treturn rowInformation;\n\t}\n\n\t/**\n\t * It computes the column information.\n\t * @param message\n\t * @param tableTargetColName\n\t * @param rowInformation\n\t * @param table\n\t * @returns columnInfo\n\t */\n\n\tcomputeColumnInfo(message: MessageItem, tableTargetColName: string | undefined, rowInformation: string[], table: Table): string {\n\t\tconst resourceModel = getResourceModel(table);\n\t\tconst msgObj = message.getBindingContext(\"message\")?.getObject();\n\t\tconst colFromTableSettings = messageHandling.fetchColumnInfo(msgObj, table);\n\t\tlet columnInfo = \"\";\n\n\t\tif (tableTargetColName) {\n\t\t\t// if column in present in table definition\n\t\t\tcolumnInfo = `${resourceModel.getText(\"T_MESSAGE_GROUP_DESCRIPTION_TABLE_COLUMN\")}: ${tableTargetColName}`;\n\t\t} else if (colFromTableSettings) {\n\t\t\tif (colFromTableSettings.availability === \"Hidden\") {\n\t\t\t\t// if column in neither in table definition nor personalization\n\t\t\t\tif (message.getType() === \"Error\") {\n\t\t\t\t\tcolumnInfo =\n\t\t\t\t\t\trowInformation.length > 0\n\t\t\t\t\t\t\t? `${resourceModel.getText(\"T_COLUMN_AVAILABLE_DIAGNOSIS_MSGDESC_ERROR\")} ${rowInformation.join(\", \")}` + \".\"\n\t\t\t\t\t\t\t: `${resourceModel.getText(\"T_COLUMN_AVAILABLE_DIAGNOSIS_MSGDESC_ERROR\")}` + \".\";\n\t\t\t\t} else {\n\t\t\t\t\tcolumnInfo =\n\t\t\t\t\t\trowInformation.length > 0\n\t\t\t\t\t\t\t? `${resourceModel.getText(\"T_COLUMN_AVAILABLE_DIAGNOSIS_MSGDESC\")} ${rowInformation.join(\", \")}` + \".\"\n\t\t\t\t\t\t\t: `${resourceModel.getText(\"T_COLUMN_AVAILABLE_DIAGNOSIS_MSGDESC\")}` + \".\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// if column is not in table definition but in personalization\n\t\t\t\t//if no navigation to sub op then remove link to error field BCP : 2280168899\n\t\t\t\tif (!this._navigationConfigured(table)) {\n\t\t\t\t\tmessage.setActiveTitle(false);\n\t\t\t\t}\n\t\t\t\tcolumnInfo = `${resourceModel.getText(\"T_MESSAGE_GROUP_DESCRIPTION_TABLE_COLUMN\")}: ${\n\t\t\t\t\tcolFromTableSettings.label\n\t\t\t\t} (${resourceModel.getText(\"T_COLUMN_INDICATOR_IN_TABLE_DEFINITION\")})`;\n\t\t\t}\n\t\t}\n\n\t\treturn columnInfo;\n\t}\n\n\t/**\n\t * It displays the row information of the error existing in the table.\n\t * @param message\n\t * @param tableRowContext\n\t * @param tableTargetColName\n\t * @param table\n\t */\n\n\t_formatMessageDescription(\n\t\tmessage: MessageItem,\n\t\ttableRowContext: ODataV4Context,\n\t\ttableTargetColName: string | undefined,\n\t\ttable: MDCTable\n\t): void {\n\t\tconst resourceModel = getResourceModel(table);\n\t\tconst tableColProperty = (table.getParent() as TableAPI)?.getTableColumnVisibilityInfo(tableRowContext);\n\n\t\tconst rowInformation: string[] = [];\n\t\ttableColProperty?.forEach(({ key, visibility }) => {\n\t\t\trowInformation.push(this.processTableColumnProperties(table, tableRowContext, [{ key, visibility }]));\n\t\t});\n\n\t\tconst columnInfo = this.computeColumnInfo(message, tableTargetColName, rowInformation, table);\n\n\t\tconst fieldsAffectedTitle = new FormattedText({\n\t\t\thtmlText: `<html><body><strong>${resourceModel.getText(\"T_FIELDS_AFFECTED_TITLE\")}</strong></body></html><br>`\n\t\t});\n\t\tlet fieldAffectedText: string;\n\t\tif (Array.isArray(rowInformation) && rowInformation.length > 0) {\n\t\t\tif (rowInformation.length === 1) {\n\t\t\t\t// If there’s only one column in the table, display it in a single line.\n\t\t\t\tfieldAffectedText = `${fieldsAffectedTitle.getHtmlText()}<br>${resourceModel.getText(\n\t\t\t\t\t\"T_MESSAGE_GROUP_TITLE_TABLE_DENOMINATOR\"\n\t\t\t\t)}: ${table.getHeader()}<br>${resourceModel.getText(\n\t\t\t\t\t\"T_MESSAGE_GROUP_DESCRIPTION_TABLE_ROW\"\n\t\t\t\t)}: ${rowInformation}<br>${columnInfo}<br>`;\n\t\t\t} else {\n\t\t\t\t// If there are multiple columns in the table, display them in multiple lines.\n\t\t\t\tfieldAffectedText = `${fieldsAffectedTitle.getHtmlText()}<br>${resourceModel.getText(\n\t\t\t\t\t\"T_MESSAGE_GROUP_TITLE_TABLE_DENOMINATOR\"\n\t\t\t\t)}: ${table.getHeader()}<br>${resourceModel.getText(\n\t\t\t\t\t\"T_MESSAGE_GROUP_DESCRIPTION_TABLE_ROW\"\n\t\t\t\t)}:<br>&emsp; ${rowInformation.join(\"<br>&emsp; \")}<br>${columnInfo}<br>`;\n\t\t\t}\n\t\t} else if (columnInfo == \"\" || !columnInfo) {\n\t\t\tfieldAffectedText = \"\";\n\t\t} else {\n\t\t\tfieldAffectedText = `${fieldsAffectedTitle.getHtmlText()}<br>${resourceModel.getText(\n\t\t\t\t\"T_MESSAGE_GROUP_TITLE_TABLE_DENOMINATOR\"\n\t\t\t)}: ${table.getHeader()}<br>${columnInfo}<br>`;\n\t\t}\n\n\t\tconst diagnosisTitle = new FormattedText({\n\t\t\thtmlText: `<html><body><strong>${resourceModel.getText(\"T_DIAGNOSIS_TITLE\")}</strong></body></html><br>`\n\t\t});\n\t\t// get the UI messages from the message context to set it to Diagnosis section\n\t\tconst uIMessageDescription = message.getBindingContext(\"message\")?.getObject().description;\n\t\t//set the description to undefined to reset it below\n\t\tmessage.setDescription(undefined);\n\t\tlet diagnosisText = \"\";\n\t\tlet messageDescriptionContent = \"\";\n\t\tif (message.getLongtextUrl()) {\n\t\t\tmessageDescriptionContent = fieldAffectedText ? `${fieldAffectedText}<br>` : \"\";\n\t\t\tmessage.setDescription(messageDescriptionContent);\n\t\t\tthis._setLongtextUrlDescription(diagnosisTitle);\n\t\t} else if (uIMessageDescription) {\n\t\t\tdiagnosisText = `${diagnosisTitle.getHtmlText()}<br>${uIMessageDescription}`;\n\t\t\tmessageDescriptionContent = `${fieldAffectedText}<br>${diagnosisText}`;\n\t\t\tmessage.setDescription(messageDescriptionContent);\n\t\t} else {\n\t\t\tmessage.setDescription(fieldAffectedText);\n\t\t}\n\t}\n\n\t/**\n\t * When there are no messages to show in the Message Box.\n\t */\n\thandleNoMessages(): void {\n\t\tthis.setVisible(false);\n\t\tthis.fireEvent(\"messageChange\", {\n\t\t\tiMessageLength: 0\n\t\t});\n\t}\n\n\t/**\n\t * Method to set the button text, count and icon property based upon the message items\n\t * ButtonType:  Possible settings for warning and error messages are 'critical' and 'negative'.\n\t * @private\n\t */\n\t_setMessageData(): void {\n\t\tclearTimeout(this._setMessageDataTimeout);\n\n\t\tthis._setMessageDataTimeout = setTimeout(async () => {\n\t\t\tconst sIcon = \"\",\n\t\t\t\toMessages = this.oMessagePopover.getItems(),\n\t\t\t\toMessageCount: MessageCount = { Error: 0, Warning: 0, Success: 0, Information: 0 },\n\t\t\t\toResourceBundle = Library.getResourceBundleFor(\"sap.fe.core\")!,\n\t\t\t\tiMessageLength = oMessages.length;\n\t\t\tlet sButtonType = ButtonType.Default,\n\t\t\t\tmessageKey = \"\",\n\t\t\t\tmessageText = \"\";\n\t\t\tif (iMessageLength > 0) {\n\t\t\t\tfor (let i = 0; i < iMessageLength; i++) {\n\t\t\t\t\tif (!oMessages[i].getType() || oMessages[i].getType().toString() === \"\") {\n\t\t\t\t\t\t++oMessageCount[\"Information\"];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t++oMessageCount[oMessages[i].getType() as keyof MessageCount];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (oMessageCount[MessageType.Error] > 0) {\n\t\t\t\t\tsButtonType = ButtonType.Negative;\n\t\t\t\t} else if (oMessageCount[MessageType.Warning] > 0) {\n\t\t\t\t\tsButtonType = ButtonType.Critical;\n\t\t\t\t} else if (oMessageCount[MessageType.Success] > 0) {\n\t\t\t\t\tsButtonType = ButtonType.Success;\n\t\t\t\t} else if (oMessageCount[MessageType.Information] > 0) {\n\t\t\t\t\tsButtonType = ButtonType.Neutral;\n\t\t\t\t}\n\n\t\t\t\tconst totalNumberOfMessages =\n\t\t\t\t\toMessageCount[MessageType.Error] +\n\t\t\t\t\toMessageCount[MessageType.Warning] +\n\t\t\t\t\toMessageCount[MessageType.Success] +\n\t\t\t\t\toMessageCount[MessageType.Information];\n\n\t\t\t\tthis.setText(totalNumberOfMessages.toString());\n\t\t\t\tlet messageCount = 0;\n\t\t\t\tconst messageKeys = {\n\t\t\t\t\tError: {\n\t\t\t\t\t\tsingleTooltipKey: \"C_COMMON_SAPFE_ERROR_MESSAGES_PAGE_TITLE_ERROR\",\n\t\t\t\t\t\tmultipleTooltipKey: \"C_COMMON_SAPFE_ERROR_MESSAGES_PAGE_MULTIPLE_ERROR_TOOLTIP\"\n\t\t\t\t\t},\n\t\t\t\t\tWarning: {\n\t\t\t\t\t\tsingleTooltipKey: \"C_MESSAGE_HANDLING_SAPFE_ERROR_MESSAGES_PAGE_TITLE_WARNING\",\n\t\t\t\t\t\tmultipleTooltipKey: \"C_COMMON_SAPFE_ERROR_MESSAGES_PAGE_WARNING_TOOLTIP\"\n\t\t\t\t\t},\n\t\t\t\t\tInformation: {\n\t\t\t\t\t\tsingleTooltipKey: \"C_MESSAGE_HANDLING_SAPFE_ERROR_MESSAGES_PAGE_TITLE_INFO\",\n\t\t\t\t\t\tmultipleTooltipKey: \"C_MESSAGE_HANDLING_SAPFE_ERROR_MESSAGES_PAGE_TITLE_INFO\"\n\t\t\t\t\t},\n\t\t\t\t\tSuccess: {\n\t\t\t\t\t\tsingleTooltipKey: \"C_MESSAGE_HANDLING_SAPFE_ERROR_MESSAGES_PAGE_TITLE_SUCCESS\",\n\t\t\t\t\t\tmultipleTooltipKey: \"C_MESSAGE_HANDLING_SAPFE_ERROR_MESSAGES_PAGE_MULTIPLE_SUCCESS_TOOLTIP\"\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tfor (const [key, value] of Object.entries(messageKeys)) {\n\t\t\t\t\tconst messageType = key as keyof MessageCount;\n\t\t\t\t\tconst messageTypeCount = oMessageCount[messageType];\n\t\t\t\t\tif (messageTypeCount > 1) {\n\t\t\t\t\t\tmessageCount = messageTypeCount;\n\t\t\t\t\t\tmessageKey = value.multipleTooltipKey;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if (messageTypeCount === 1) {\n\t\t\t\t\t\tmessageCount = messageTypeCount;\n\t\t\t\t\t\tmessageKey = value.singleTooltipKey;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (messageKey) {\n\t\t\t\t\tmessageText = oResourceBundle.getText(messageKey);\n\t\t\t\t\tconst MESSAGEBUTTON_SHORTCUT = \"Ctrl+Shift+M\";\n\t\t\t\t\tconst toolTip = `${oResourceBundle.getText(\n\t\t\t\t\t\t\"C_COMMON_SAPFE_ERROR_MESSAGES_PAGE_TOOLTIP\"\n\t\t\t\t\t)}: ${messageCount} ${messageText} (${MESSAGEBUTTON_SHORTCUT})`;\n\t\t\t\t\tthis.setTooltip(toolTip);\n\t\t\t\t}\n\t\t\t\tthis.setIcon(sIcon);\n\t\t\t\tthis.setType(sButtonType);\n\t\t\t\tthis.setVisible(true);\n\t\t\t\tconst oView = UI5Element.getElementById(this.sViewId) as FEView;\n\t\t\t\tif (oView) {\n\t\t\t\t\tconst oPageReady = oView.getController().pageReady;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait oPageReady.waitPageReady();\n\t\t\t\t\t\tawait this._applyGroupingAsync(oView);\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tLog.error(\"fail grouping messages\");\n\t\t\t\t\t}\n\t\t\t\t\tthis.fireEvent(\"messageChange\", {\n\t\t\t\t\t\tiMessageLength: iMessageLength\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (iMessageLength > 1) {\n\t\t\t\t\tthis.oMessagePopover.navigateBack();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.handleNoMessages();\n\t\t\t}\n\t\t}, 100) as unknown as number;\n\t}\n\n\t/**\n\t * The method that is called when a user clicks on the title of the message.\n\t * @private\n\t * @param oEvent Event object passed from the handler\n\t */\n\tasync _activeTitlePress(oEvent: MessagePopover$ActiveTitlePressEvent): Promise<void> {\n\t\tconst oInternalModelContext = this.getBindingContext(\"pageInternal\") as InternalModelContext;\n\t\toInternalModelContext.setProperty(\"errorNavigationSectionFlag\", true);\n\t\tconst oItem = oEvent.getParameter(\"item\"),\n\t\t\toMessage = oItem?.getBindingContext(\"message\")?.getObject(),\n\t\t\tbIsBackendMessage = new RegExp(\"^/\").test(oMessage.getTargets()[0]),\n\t\t\toView = UI5Element.getElementById(this.sViewId) as View;\n\t\tif (!oItem) {\n\t\t\treturn;\n\t\t}\n\t\tlet oControl: UI5Element | undefined, sSectionTitle;\n\t\tconst _defaultFocus = function (message: Message, mdcTable: MDCTable): void {\n\t\t\tconst focusInfo = { preventScroll: true, targetInfo: message };\n\t\t\tmdcTable.focus(focusInfo);\n\t\t};\n\n\t\tlet bIsGeneralGroupName = true;\n\t\tlet section, subSections, message, i, j, k;\n\t\tconst visibleSections = messageHandling.getVisibleSectionsFromObjectPageLayout(this.oObjectPageLayout!);\n\t\tif (visibleSections) {\n\t\t\tconst messages = this.oMessagePopover.getItems();\n\t\t\tfor (i = messages.length - 1; i >= 0; --i) {\n\t\t\t\t// Loop over all messages\n\t\t\t\tmessage = messages[i];\n\t\t\t\tfor (j = visibleSections.length - 1; j >= 0; --j) {\n\t\t\t\t\t// Loop over all visible sections\n\t\t\t\t\tsection = visibleSections[j];\n\t\t\t\t\tsubSections = section.getSubSections();\n\t\t\t\t\tfor (k = subSections.length - 1; k >= 0; --k) {\n\t\t\t\t\t\t// Loop over all sub-sections\n\t\t\t\t\t\tconst subSection = subSections[k];\n\t\t\t\t\t\tconst messageObject = message?.getBindingContext(\"message\")?.getObject();\n\t\t\t\t\t\tconst controls = messageHandling.getControlFromMessageRelatingToSubSection(subSection, messageObject);\n\t\t\t\t\t\tif (controls.length > 0) {\n\t\t\t\t\t\t\tbIsGeneralGroupName = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst oTargetMdcTable = oMessage.controlIds\n\t\t\t.map((controlId: string) => {\n\t\t\t\tconst control = UI5Element.getElementById(controlId);\n\t\t\t\tconst parentControl = control && control.getParent();\n\n\t\t\t\tif (this.isHiddenDraftEnabled) {\n\t\t\t\t\treturn parentControl?.isA(\"sap.ui.mdc.Table\") ? parentControl : undefined;\n\t\t\t\t}\n\t\t\t\treturn parentControl &&\n\t\t\t\t\tparentControl.isA(\"sap.ui.mdc.Table\") &&\n\t\t\t\t\toItem.getGroupName().includes((parentControl as Table).getHeader())\n\t\t\t\t\t? parentControl\n\t\t\t\t\t: null;\n\t\t\t})\n\t\t\t.reduce(function (acc: Control, val: Control) {\n\t\t\t\treturn val ? val : acc;\n\t\t\t});\n\n\t\t//check if the pressed item is related to a table control\n\t\tif (oTargetMdcTable) {\n\t\t\tif (bIsBackendMessage) {\n\t\t\t\tsSectionTitle = oItem.getGroupName().split(\", \")[0];\n\t\t\t\ttry {\n\t\t\t\t\tif (this.isHiddenDraftEnabled && (oTargetMdcTable.getId() !== this.sViewId || bIsGeneralGroupName)) {\n\t\t\t\t\t\tconst viewId = this._getViewId(oTargetMdcTable.getId());\n\t\t\t\t\t\t((UI5Element.getElementById(viewId) as View).getController() as ObjectPageController)._routing.navigateToContext(\n\t\t\t\t\t\t\toTargetMdcTable.getBindingContext()\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tawait this._navigateFromMessageToSectionTableInIconTabBarMode(\n\t\t\t\t\t\t\toTargetMdcTable,\n\t\t\t\t\t\t\tthis.oObjectPageLayout!,\n\t\t\t\t\t\t\tsSectionTitle\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tconst oRefErrorContext = this._getTableRefErrorContext(oTargetMdcTable);\n\t\t\t\t\tconst oRefError = oRefErrorContext?.getProperty(oItem.getBindingContext(\"message\")?.getObject().getId());\n\t\t\t\t\tconst _setFocusOnTargetField = async (targetMdcTable: MDCTable, iRowIndex: number): Promise<boolean | undefined> => {\n\t\t\t\t\t\tconst aTargetMdcTableRow = this._getMdcTableRows(targetMdcTable),\n\t\t\t\t\t\t\tiFirstVisibleRow = this._getGridTable(targetMdcTable)?.getFirstVisibleRow() ?? 0;\n\t\t\t\t\t\tif (aTargetMdcTableRow.length > 0 && aTargetMdcTableRow[0]) {\n\t\t\t\t\t\t\tconst oTargetRow = aTargetMdcTableRow[iRowIndex - iFirstVisibleRow],\n\t\t\t\t\t\t\t\toTargetCell = this.getTargetCell(oTargetRow, oMessage);\n\t\t\t\t\t\t\tif (oTargetCell) {\n\t\t\t\t\t\t\t\tthis.setFocusToControl(oTargetCell);\n\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// control not found on table\n\t\t\t\t\t\t\t\tconst errorPropertyPath = oMessage.getTargets()[0];\n\t\t\t\t\t\t\t\tif (errorPropertyPath) {\n\t\t\t\t\t\t\t\t\t(oView.getModel(\"internal\") as JSONModel).setProperty(\"/messageTargetPropertyPath\", errorPropertyPath);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (this._navigationConfigured(targetMdcTable)) {\n\t\t\t\t\t\t\t\t\treturn (oView.getController() as PageController)._routing.navigateForwardToContext(\n\t\t\t\t\t\t\t\t\t\toTargetRow.getBindingContext() as ODataV4Context\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t};\n\t\t\t\t\tif (oTargetMdcTable.data(\"tableType\") === \"GridTable\" && oRefError.rowIndex !== \"\") {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait oTargetMdcTable.scrollToIndex(oRefError.rowIndex);\n\t\t\t\t\t\t\tsetTimeout(async function () {\n\t\t\t\t\t\t\t\tconst focusOnTargetField = await _setFocusOnTargetField(oTargetMdcTable, oRefError.rowIndex);\n\t\t\t\t\t\t\t\tif (focusOnTargetField === false) {\n\t\t\t\t\t\t\t\t\t_defaultFocus(oMessage, oTargetMdcTable);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\tLog.error(\"Error while focusing on error\");\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (oTargetMdcTable.data(\"tableType\") === \"ResponsiveTable\" && oRefError) {\n\t\t\t\t\t\tconst focusOnMessageTargetControl = await this.focusOnMessageTargetControl(\n\t\t\t\t\t\t\toView,\n\t\t\t\t\t\t\toMessage,\n\t\t\t\t\t\t\toTargetMdcTable,\n\t\t\t\t\t\t\toRefError.rowIndex\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (focusOnMessageTargetControl === false) {\n\t\t\t\t\t\t\t_defaultFocus(oMessage, oTargetMdcTable);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.focusOnMessageTargetControl(oView, oMessage);\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\tLog.error(\"Fail to navigate to Error control\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toControl = UI5Element.getElementById(oMessage.controlIds[0]);\n\t\t\t\tif (oControl) {\n\t\t\t\t\t//If the control underlying the frontEnd message is not within the current section, we first go into the target section:\n\t\t\t\t\tconst sections = (this.oObjectPageLayout as ObjectPageLayout).getSections();\n\t\t\t\t\tconst sectionWithTheControl = sections.find((section) => section.findElements(true).includes(oControl as UI5Element));\n\t\t\t\t\tif (sectionWithTheControl) {\n\t\t\t\t\t\tsSectionTitle = oItem.getGroupName().split(\", \")[0];\n\t\t\t\t\t\tthis._navigateFromMessageToSectionInIconTabBarMode(this.oObjectPageLayout!, sSectionTitle);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.setFocusToControl(oControl);\n\t\t\t}\n\t\t} else {\n\t\t\t// Call the function wherever needed\n\t\t\tthis.handleMessageNavigation(oItem, visibleSections, oMessage, oView);\n\t\t}\n\t}\n\n\t/**\n\t * Handles the message navigation by finding the associated subsection, expanding it,\n\t * and navigating to the correct section in the Object Page Layout.\n\t * @param oItem The message item containing the group name.\n\t * @param visibleSections The list of visible sections in the Object Page.\n\t * @param oMessage The message object containing control IDs.\n\t * @param oView The current UI5 view.\n\t */\n\thandleMessageNavigation(oItem: MessageItem, visibleSections: ObjectPageSection[], oMessage: Message, oView: View): void {\n\t\t// Get control if it is inside a hidden subsection\n\t\tconst oControl = UI5Element.getElementById(oMessage.getControlIds()[0]);\n\t\tconst oSubSection = this.findSubSection(oItem, visibleSections, oControl);\n\n\t\t// If subsection found, expand it\n\t\tif (oSubSection) {\n\t\t\t(oSubSection as SubSection).setMode(\"Expanded\");\n\t\t}\n\n\t\t// Navigate to the section based on the message's group name\n\t\tconst sSectionTitle = oItem.getGroupName().split(\", \")[0];\n\t\tthis._navigateFromMessageToSectionInIconTabBarMode(this.oObjectPageLayout!, sSectionTitle);\n\n\t\t// Focus on the target control\n\t\tthis.focusOnMessageTargetControl(oView, oMessage);\n\t}\n\n\t/**\n\t * Finds the corresponding subsection based on the provided message item's group name\n\t * or by checking if the given control exists inside the subsection's MoreBlocks.\n\t * @param oItem The message item containing the group name.\n\t * @param visibleSections The list of visible sections in the Object Page.\n\t * @param oControl The UI5 control to check for inside MoreBlocks.\n\t * @returns - The found subsection, section, or null if not found.\n\t */\n\tfindSubSection(\n\t\toItem: MessageItem,\n\t\tvisibleSections: ObjectPageSection[],\n\t\toControl: UI5Element | undefined\n\t): SubSection | ObjectPageSection | unknown | null {\n\t\tconst groupNames = oItem.getGroupName().split(\", \");\n\t\treturn this.findSubSectionByTitleOrControl(visibleSections, groupNames[1], oControl);\n\t}\n\n\t/**\n\t * Searches for a subsection based on the given title or by checking\n\t * if the specified control is present inside the subsection's MoreBlocks.\n\t * @private\n\t * @param visibleSections The list of visible sections.\n\t * @param title The title to match against subsection titles.\n\t * @param oControl The UI5 control to search for within MoreBlocks.\n\t * @returns - The found subsection or null if no match is found.\n\t */\n\tprivate findSubSectionByTitleOrControl(\n\t\tvisibleSections: ObjectPageSection[],\n\t\ttitle: string,\n\t\toControl: UI5Element | undefined\n\t): SubSection | null {\n\t\tfor (const section of visibleSections) {\n\t\t\tfor (const subSection of section.getSubSections()) {\n\t\t\t\t// Check if subsection title matches\n\t\t\t\tif (subSection.getTitle() === title) {\n\t\t\t\t\treturn subSection as SubSection;\n\t\t\t\t}\n\n\t\t\t\t// Check if control exists inside MoreBlocks\n\t\t\t\tif (\n\t\t\t\t\tsubSection\n\t\t\t\t\t\t.getMoreBlocks()\n\t\t\t\t\t\t.some(\n\t\t\t\t\t\t\t(block) =>\n\t\t\t\t\t\t\t\t((block as View).getContent() as unknown as Content)?.findElements(true).includes(oControl as UI5Element)\n\t\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\treturn subSection as SubSection;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\t/**\n\t * Retrieves a table cell targeted by a message, ensuring the cell is editable.\n\t * @param targetRow A table row\n\t * @param message Message targeting a cell\n\t * @returns Returns the editable cell or null/undefined if none is found\n\t * @private\n\t */\n\tgetTargetCell(targetRow: UI5Element, message: Message): UI5Element | null | undefined {\n\t\tconst controlIds = message.getControlIds();\n\t\tconst hasNonEditableField = controlIds.some((id) => {\n\t\t\tconst control = UI5Element.getElementById(id) as EnhanceWithUI5<Field>;\n\t\t\treturn control?.isA(\"sap.ui.mdc.Field\") && control.getEditable && !control.getEditable();\n\t\t});\n\n\t\treturn controlIds.length > 0\n\t\t\t? controlIds\n\t\t\t\t\t.map(function (controlId) {\n\t\t\t\t\t\tconst isControlInTable = targetRow.findElements(true, function (elem) {\n\t\t\t\t\t\t\treturn elem.getId() === controlId;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (isControlInTable.length > 0) {\n\t\t\t\t\t\t\tconst element = UI5Element.getElementById(controlId) as EnhanceWithUI5<Field>;\n\t\t\t\t\t\t\tif (hasNonEditableField) {\n\t\t\t\t\t\t\t\tif (element?.isA(\"sap.ui.mdc.Field\")) {\n\t\t\t\t\t\t\t\t\tif (element.getEditable && !element.getEditable()) {\n\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn element;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn element;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t})\n\t\t\t\t\t.reduce(function (acc, val) {\n\t\t\t\t\t\treturn val ? val : acc;\n\t\t\t\t\t}, null)\n\t\t\t: null;\n\t}\n\n\t/**\n\t * Focus on the control targeted by a message.\n\t * @param view The current view\n\t * @param message The message targeting the control on which we want to set the focus\n\t * @param targetMdcTable The table targeted by the message (optional)\n\t * @param rowIndex The row index of the table targeted by the message (optional)\n\t * @returns Promise\n\t * @private\n\t */\n\tasync focusOnMessageTargetControl(\n\t\tview: View,\n\t\tmessage: Message,\n\t\ttargetMdcTable?: MDCTable,\n\t\trowIndex?: number\n\t): Promise<boolean | undefined> {\n\t\tconst aAllViewElements = view.findElements(true);\n\t\tconst aErroneousControls = message\n\t\t\t.getControlIds()\n\t\t\t.filter(function (sControlId: string) {\n\t\t\t\treturn aAllViewElements.some(function (oElem) {\n\t\t\t\t\treturn oElem.getId() === sControlId && oElem.getDomRef();\n\t\t\t\t});\n\t\t\t})\n\t\t\t.map(function (sControlId: string) {\n\t\t\t\treturn UI5Element.getElementById(sControlId);\n\t\t\t});\n\t\tconst aNotTableErroneousControls = aErroneousControls.filter(function (oElem: UI5Element | undefined) {\n\t\t\treturn !oElem?.isA<Table>(\"sap.m.Table\") && !oElem?.isA<UITable>(\"sap.ui.table.Table\");\n\t\t});\n\t\t//The focus is set on Not Table control in priority\n\t\tif (aNotTableErroneousControls.length > 0) {\n\t\t\tthis.setFocusToControl(aNotTableErroneousControls[0]);\n\t\t\treturn undefined;\n\t\t} else if (aErroneousControls.length > 0) {\n\t\t\tconst aTargetMdcTableRow = targetMdcTable\n\t\t\t\t? targetMdcTable.findElements(\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t(elem: Control) =>\n\t\t\t\t\t\t\telem.isA(ColumnListItem.getMetadata().getName()) && elem.getParent()?.getParent() === targetMdcTable\n\t\t\t\t  )\n\t\t\t\t: [];\n\t\t\tif (aTargetMdcTableRow.length > 0 && aTargetMdcTableRow[0]) {\n\t\t\t\tconst oTargetRow = aTargetMdcTableRow[rowIndex as number];\n\t\t\t\tconst oTargetCell = this.getTargetCell(oTargetRow, message);\n\t\t\t\tif (oTargetCell) {\n\t\t\t\t\tconst oTargetField = oTargetCell.isA<Field>(\"sap.fe.macros.Field\")\n\t\t\t\t\t\t? (oTargetCell.getContent() as EnhanceWithUI5<FieldWrapper>).getContentEdit()[0]\n\t\t\t\t\t\t: (((oTargetCell as HBox).getItems()[0] as Field).getContent() as EnhanceWithUI5<FieldWrapper>).getContentEdit()[0];\n\t\t\t\t\tthis.setFocusToControl(oTargetField);\n\t\t\t\t\treturn undefined;\n\t\t\t\t} else {\n\t\t\t\t\tconst errorPropertyPath = message.getTargets()[0];\n\t\t\t\t\tif (errorPropertyPath) {\n\t\t\t\t\t\t(view.getModel(\"internal\") as JSONModel).setProperty(\"/messageTargetPropertyPath\", errorPropertyPath);\n\t\t\t\t\t}\n\t\t\t\t\tif (targetMdcTable && this._navigationConfigured(targetMdcTable)) {\n\t\t\t\t\t\treturn (view.getController() as PageController)._routing.navigateForwardToContext(\n\t\t\t\t\t\t\toTargetRow.getBindingContext() as ODataV4Context\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\t/**\n\t *\n\t * @param obj The message object\n\t * @param aSections The array of sections in the object page\n\t * @returns The rank of the message\n\t */\n\t_getMessageRank(obj: Message & { sectionName: string; subSectionName: string }, aSections: ObjectPageSection[] | undefined): number {\n\t\tif (aSections) {\n\t\t\tlet section, aSubSections, subSection, j, k, aElements, aAllElements, sectionRank;\n\t\t\tfor (j = aSections.length - 1; j >= 0; --j) {\n\t\t\t\t// Loop over all sections\n\t\t\t\tsection = aSections[j];\n\t\t\t\taSubSections = section.getSubSections();\n\t\t\t\tfor (k = aSubSections.length - 1; k >= 0; --k) {\n\t\t\t\t\t// Loop over all sub-sections\n\t\t\t\t\tsubSection = aSubSections[k];\n\t\t\t\t\taAllElements = subSection.findElements(true); // Get all elements inside a sub-section\n\t\t\t\t\t//Try to find the control 1 inside the sub section\n\t\t\t\t\taElements = aAllElements.filter(this._fnFilterUponId.bind(this, obj.getControlId()));\n\t\t\t\t\tsectionRank = j + 1;\n\t\t\t\t\tif (aElements.length > 0) {\n\t\t\t\t\t\tif (section.getVisible() && subSection.getVisible()) {\n\t\t\t\t\t\t\tif (!obj.hasOwnProperty(\"sectionName\")) {\n\t\t\t\t\t\t\t\tobj.sectionName = section.getTitle();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!obj.hasOwnProperty(\"subSectionName\")) {\n\t\t\t\t\t\t\t\tobj.subSectionName = subSection.getTitle();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn sectionRank * 10 + (k + 1);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// if section or subsection is invisible then group name would be Last Action\n\t\t\t\t\t\t\t// so ranking should be lower\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t//if sub section title is Other messages, we return a high number(rank), which ensures\n\t\t\t//that messages belonging to this sub section always come later in messagePopover\n\t\t\tif (!obj.sectionName && !obj.subSectionName && obj.getPersistent()) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\treturn 999;\n\t\t}\n\t\treturn 999;\n\t}\n\n\t/**\n\t * Get Filter to hide messages from the dialog.\n\t * @returns Filter\n\t */\n\t_filterOutMessagesInDialog(): Filter {\n\t\tconst fnTest = (aControlIds: string[]): boolean => {\n\t\t\treturn messageHandling.isMessageOutOfParameterDialog(aControlIds);\n\t\t};\n\t\treturn new Filter({\n\t\t\tpath: \"controlIds\",\n\t\t\ttest: fnTest,\n\t\t\tcaseSensitive: true\n\t\t});\n\t}\n\n\t/**\n\t * If there is only one success message bound to the current context, we do not filter it out.\n\t * @returns Boolean if the single success message is found\n\t */\n\t_filterOutContextSuccessMessages(): boolean {\n\t\tconst boundContextSuccessMessages = [];\n\t\tconst messages = Messaging.getMessageModel().getData();\n\t\tmessages.filter((message: Message) => {\n\t\t\tif (\n\t\t\t\tmessage.getTargets().length === 1 &&\n\t\t\t\tmessage.getTargets()[0] === this.getBindingContext()?.getPath() &&\n\t\t\t\tmessage.getPersistent() === true &&\n\t\t\t\tmessage.getType() === MessageType.Success\n\t\t\t) {\n\t\t\t\tboundContextSuccessMessages.push(message);\n\t\t\t}\n\t\t});\n\t\tif (boundContextSuccessMessages.length === 1 && messages.length === 1) {\n\t\t\t// we want to hide success messages only if they are bound to the current context and single success messages\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\t/**\n\t * Filter function to hide back-end messages if the control has error validation.\n\t * @returns Filter\n\t */\n\t_getFilterToHideBackendMessageOnErrorValidation(): Filter {\n\t\tconst getIdsOfFielsdWithErrorValidation = function (): string[] {\n\t\t\treturn (\n\t\t\t\tMessaging.getMessageModel()\n\t\t\t\t\t.getData()\n\t\t\t\t\t.filter((message: Message) => message.validation === true && message.getControlId()?.match(/field.*-inner$/i))\n\t\t\t\t\t//the error point to the inner control, so we need to remove the -inner to get the field id\n\t\t\t\t\t.map((message: Message) => message.getControlId()?.replace(\"-inner\", \"\"))\n\t\t\t);\n\t\t};\n\n\t\tconst fnTest = function (aControlIds: string[]): boolean {\n\t\t\t// filtering out the backend messages if the control has error validation\n\t\t\treturn !aControlIds.some((controlId: string) => getIdsOfFielsdWithErrorValidation().includes(controlId));\n\t\t};\n\t\treturn new Filter({\n\t\t\tfilters: [\n\t\t\t\tnew Filter({\n\t\t\t\t\tfilters: [\n\t\t\t\t\t\tnew Filter({\n\t\t\t\t\t\t\tpath: \"validation\",\n\t\t\t\t\t\t\toperator: FilterOperator.EQ,\n\t\t\t\t\t\t\tvalue1: false\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tnew Filter({\n\t\t\t\t\t\t\tpath: \"controlIds\",\n\t\t\t\t\t\t\ttest: fnTest,\n\t\t\t\t\t\t\tcaseSensitive: true\n\t\t\t\t\t\t})\n\t\t\t\t\t],\n\t\t\t\t\tand: true\n\t\t\t\t}),\n\t\t\t\tnew Filter({\n\t\t\t\t\tpath: \"validation\",\n\t\t\t\t\toperator: FilterOperator.EQ,\n\t\t\t\t\tvalue1: true\n\t\t\t\t})\n\t\t\t],\n\t\t\tand: false\n\t\t});\n\t}\n\n\t/**\n\t * Method to set the filters based upon the message items\n\t * The desired filter operation is:\n\t * ( filters provided by user && ( validation = true && Control should be present in view ) || messages for the current matching context ).\n\t * @private\n\t */\n\tasync _applyFiltersAndSort(): Promise<void> {\n\t\tlet oValidationFilters,\n\t\t\thiddenDraftFilter,\n\t\t\toValidationAndContextFilter,\n\t\t\toFilters,\n\t\t\tsPath,\n\t\t\toSorter,\n\t\t\toDialogFilter,\n\t\t\tobjectPageLayoutSections: ObjectPageSection[] | undefined;\n\t\tconst aUserDefinedFilter: Filter[] = [];\n\n\t\tthis.sViewId = this.sViewId ? this.sViewId : (this._getViewId(this.getId()) as string);\n\t\t//Add the filters provided by the user\n\t\tconst aCustomFilters = this.getAggregation(\"customFilters\") as Control[] | undefined;\n\t\tif (aCustomFilters) {\n\t\t\taCustomFilters.forEach(function (filter: Control) {\n\t\t\t\taUserDefinedFilter.push(\n\t\t\t\t\tnew Filter({\n\t\t\t\t\t\tpath: filter.getProperty(\"path\"),\n\t\t\t\t\t\toperator: filter.getProperty(\"operator\"),\n\t\t\t\t\t\tvalue1: filter.getProperty(\"value1\"),\n\t\t\t\t\t\tvalue2: filter.getProperty(\"value2\")\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t\tconst oBindingContext = this.getBindingContext();\n\t\tif (!oBindingContext) {\n\t\t\tthis.setVisible(false);\n\t\t\treturn;\n\t\t} else {\n\t\t\tsPath = oBindingContext.getPath();\n\t\t\t//Filter for filtering out only validation messages which are currently present in the view\n\t\t\toValidationFilters = new Filter({\n\t\t\t\tfilters: [\n\t\t\t\t\tnew Filter({\n\t\t\t\t\t\tpath: \"validation\",\n\t\t\t\t\t\toperator: FilterOperator.EQ,\n\t\t\t\t\t\tvalue1: true\n\t\t\t\t\t}),\n\t\t\t\t\tmessageButtonHelper.getCheckControlInViewFilter(this.sViewId)\n\t\t\t\t],\n\t\t\t\tand: true\n\t\t\t});\n\n\t\t\toDialogFilter = new Filter({\n\t\t\t\tfilters: [this._filterOutMessagesInDialog()]\n\t\t\t});\n\n\t\t\tconst oContextSuccessFilters = new Filter({\n\t\t\t\tpath: \"target\",\n\t\t\t\ttest: this._filterOutContextSuccessMessages.bind(this),\n\t\t\t\tcaseSensitive: true\n\t\t\t});\n\n\t\t\tlet filterArray;\n\t\t\tif (this.isHiddenDraftEnabled) {\n\t\t\t\tconst viewId = this._getViewId(this.getId());\n\t\t\t\tconst view = UI5Element.getElementById(viewId as string) as View;\n\t\t\t\tconst viewContext = view?.getBindingContext() as ODataV4Context;\n\t\t\t\tconst contextPath = (await (view.getController() as ObjectPageController)?.editFlow.getRootContext(viewContext))?.getPath();\n\t\t\t\thiddenDraftFilter = messageButtonHelper.getHiddenDraftUseCaseFilter(contextPath);\n\t\t\t\tconst validationAndHiddenDraftFilter = new Filter({\n\t\t\t\t\tfilters: [oValidationFilters, hiddenDraftFilter],\n\t\t\t\t\tand: false\n\t\t\t\t});\n\t\t\t\tfilterArray = [validationAndHiddenDraftFilter, oDialogFilter, this._getFilterToHideBackendMessageOnErrorValidation()];\n\t\t\t} else {\n\t\t\t\toValidationAndContextFilter = new Filter({\n\t\t\t\t\tfilters: [\n\t\t\t\t\t\toValidationFilters,\n\t\t\t\t\t\tnew Filter({\n\t\t\t\t\t\t\tpath: \"target\",\n\t\t\t\t\t\t\toperator: FilterOperator.StartsWith,\n\t\t\t\t\t\t\tvalue1: sPath\n\t\t\t\t\t\t})\n\t\t\t\t\t],\n\t\t\t\t\tand: false\n\t\t\t\t});\n\n\t\t\t\tfilterArray = [\n\t\t\t\t\toValidationAndContextFilter,\n\t\t\t\t\toContextSuccessFilters,\n\t\t\t\t\toDialogFilter,\n\t\t\t\t\tthis._getFilterToHideBackendMessageOnErrorValidation()\n\t\t\t\t];\n\t\t\t\t//Filter for filtering out the bound messages i.e target starts with the context path\n\t\t\t}\n\t\t\tconst oValidationContextDialogFilters = new Filter({\n\t\t\t\tfilters: filterArray,\n\t\t\t\tand: true\n\t\t\t});\n\t\t\t// and finally - if there any - add custom filter (via OR)\n\t\t\tif (aUserDefinedFilter.length > 0) {\n\t\t\t\toFilters = new Filter({\n\t\t\t\t\tfilters: [aUserDefinedFilter, oValidationContextDialogFilters] as unknown as Filter[], // TODO incorrect,\n\t\t\t\t\tand: false\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\toFilters = oValidationContextDialogFilters;\n\t\t\t}\n\t\t\tthis.oItemBinding.filter(oFilters);\n\t\t\tthis.oObjectPageLayout = this._getObjectPageLayout(this, this.oObjectPageLayout);\n\t\t\t// We support sorting only for ObjectPageLayout use-case.\n\t\t\tif (this.oObjectPageLayout) {\n\t\t\t\toSorter = new Sorter(\n\t\t\t\t\t\"\",\n\t\t\t\t\tundefined,\n\t\t\t\t\tundefined,\n\t\t\t\t\t(\n\t\t\t\t\t\tobj1: Message & { sectionName: string; subSectionName: string },\n\t\t\t\t\t\tobj2: Message & { sectionName: string; subSectionName: string }\n\t\t\t\t\t) => {\n\t\t\t\t\t\tif (!objectPageLayoutSections) {\n\t\t\t\t\t\t\tobjectPageLayoutSections = this.oObjectPageLayout && this.oObjectPageLayout.getSections();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst rankA = this._getMessageRank(obj1, objectPageLayoutSections);\n\t\t\t\t\t\tconst rankB = this._getMessageRank(obj2, objectPageLayoutSections);\n\t\t\t\t\t\tif (rankA < rankB) {\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (rankA > rankB) {\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tthis.oItemBinding.sort(oSorter);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * @param sControlId\n\t * @param oItem\n\t * @returns True if the control ID matches the item ID\n\t */\n\t_fnFilterUponId(sControlId: string, oItem: UI5Element): boolean {\n\t\treturn sControlId === oItem.getId();\n\t}\n\n\t/**\n\t * Retrieves the section based on section title and visibility.\n\t * @param oObjectPage Object page.\n\t * @param sSectionTitle Section title.\n\t * @returns The section\n\t * @private\n\t */\n\t_getSectionBySectionTitle(oObjectPage: ObjectPageLayout, sSectionTitle: string): ObjectPageSection | undefined {\n\t\tlet oSection: ObjectPageSection | undefined;\n\t\tif (sSectionTitle) {\n\t\t\tconst aSections = oObjectPage.getSections();\n\t\t\tfor (let i = 0; i < aSections.length; i++) {\n\t\t\t\tif (aSections[i].getVisible() && aSections[i].getTitle() === sSectionTitle) {\n\t\t\t\t\toSection = aSections[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn oSection;\n\t}\n\n\t/**\n\t * Navigates to the section if the object page uses an IconTabBar and if the current section is not the target of the navigation.\n\t * @param oObjectPage Object page.\n\t * @param sSectionTitle Section title.\n\t * @private\n\t */\n\t_navigateFromMessageToSectionInIconTabBarMode(oObjectPage: ObjectPageLayout, sSectionTitle: string): void {\n\t\tconst bUseIconTabBar = oObjectPage.getUseIconTabBar();\n\t\tif (bUseIconTabBar) {\n\t\t\tconst oSection = this._getSectionBySectionTitle(oObjectPage, sSectionTitle);\n\t\t\tconst sSelectedSectionId = oObjectPage.getSelectedSection();\n\t\t\tif (oSection && sSelectedSectionId !== oSection.getId()) {\n\t\t\t\toObjectPage.setSelectedSection(oSection.getId());\n\t\t\t}\n\t\t}\n\t}\n\n\tasync _navigateFromMessageToSectionTableInIconTabBarMode(\n\t\toTable: Table,\n\t\toObjectPage: ObjectPageLayout,\n\t\tsSectionTitle: string\n\t): Promise<void> {\n\t\tconst oRowBinding = oTable.getRowBinding();\n\t\tconst oTableContext = oTable.getBindingContext();\n\t\tconst oOPContext = oObjectPage.getBindingContext();\n\t\tconst bShouldWaitForTableRefresh = !(oTableContext === oOPContext);\n\t\tthis._navigateFromMessageToSectionInIconTabBarMode(oObjectPage, sSectionTitle);\n\t\treturn new Promise(function (resolve: Function) {\n\t\t\tif (bShouldWaitForTableRefresh) {\n\t\t\t\toRowBinding.attachEventOnce(\"change\", function () {\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Retrieves the MdcTable if it is found among any of the parent elements.\n\t * @param oElement Control\n\t * @returns MDC table || undefined\n\t * @private\n\t */\n\t_getMdcTable(oElement: UI5Element): MDCTable | undefined {\n\t\t//check if the element has a table within any of its parents\n\t\tlet oParentElement = oElement.getParent();\n\t\twhile (oParentElement && !oParentElement.isA<MDCTable>(\"sap.ui.mdc.Table\")) {\n\t\t\toParentElement = oParentElement.getParent();\n\t\t}\n\t\treturn oParentElement && oParentElement.isA<MDCTable>(\"sap.ui.mdc.Table\") ? oParentElement : undefined;\n\t}\n\n\t_getGridTable(oMdcTable: MDCTable): UITable | undefined {\n\t\treturn oMdcTable.findElements(true, function (oElem: Control) {\n\t\t\treturn (\n\t\t\t\toElem.isA<UITable>(\"sap.ui.table.Table\") &&\n\t\t\t\t/** We check the element belongs to the MdcTable :*/\n\t\t\t\toElem.getParent() === oMdcTable\n\t\t\t);\n\t\t})[0] as UITable | undefined;\n\t}\n\n\t/**\n\t * Retrieves the table row (if available) containing the element.\n\t * @param oElement Control\n\t * @returns Table row || undefined\n\t * @private\n\t */\n\t_getTableRow(oElement: UI5Element): UI5Element | undefined {\n\t\tlet oParentElement = oElement.getParent();\n\t\twhile (\n\t\t\toParentElement &&\n\t\t\t!oParentElement.isA<Row>(\"sap.ui.table.Row\") &&\n\t\t\t!oParentElement.isA<CreationRow>(\"sap.ui.table.CreationRow\") &&\n\t\t\t!oParentElement.isA<ColumnListItem>(ColumnListItem.getMetadata().getName())\n\t\t) {\n\t\t\toParentElement = oParentElement.getParent();\n\t\t}\n\t\treturn oParentElement &&\n\t\t\t(oParentElement.isA<Row>(\"sap.ui.table.Row\") ||\n\t\t\t\toParentElement.isA<CreationRow>(\"sap.ui.table.CreationRow\") ||\n\t\t\t\toParentElement.isA<ColumnListItem>(ColumnListItem.getMetadata().getName()))\n\t\t\t? (oParentElement as UI5Element)\n\t\t\t: undefined;\n\t}\n\n\t/**\n\t * Retrieves the index of the table row containing the element.\n\t * @param oElement Control\n\t * @returns Row index || undefined\n\t * @private\n\t */\n\t_getTableRowIndex(oElement: UI5Element): number {\n\t\tconst oTableRow = this._getTableRow(oElement);\n\t\tlet iRowIndex;\n\t\tif (oTableRow?.isA<Row>(\"sap.ui.table.Row\")) {\n\t\t\tiRowIndex = oTableRow.getIndex();\n\t\t} else {\n\t\t\tiRowIndex = (oTableRow as { getTable?: () => ResponsiveTable })\n\t\t\t\t?.getTable?.()\n\t\t\t\t.getItems()\n\t\t\t\t.findIndex(function (element: UI5Element) {\n\t\t\t\t\treturn element.getId() === oTableRow?.getId();\n\t\t\t\t});\n\t\t}\n\t\treturn iRowIndex ?? -1;\n\t}\n\n\t/**\n\t * Retrieves the index of the table column containing the element.\n\t * @param element Control\n\t * @returns Column index || undefined\n\t * @private\n\t */\n\t_getTableColumnIndex(element: UI5Element): number | undefined {\n\t\tconst getTargetCellIndex = function (elt: UI5Element, targetRow: Row | undefined): number | undefined {\n\t\t\treturn targetRow?.getCells().findIndex(function (cell: Control) {\n\t\t\t\treturn cell.getId() === elt.getId();\n\t\t\t});\n\t\t};\n\t\tconst getTargetColumnIndex = function (elt: UI5Element, targetRow: Row | undefined): number | undefined {\n\t\t\tlet targetElement = elt.getParent() as UI5Element,\n\t\t\t\ttargetCellIndex = getTargetCellIndex(targetElement, targetRow);\n\t\t\twhile (targetElement && targetCellIndex && targetCellIndex < 0) {\n\t\t\t\ttargetElement = targetElement.getParent() as UI5Element;\n\t\t\t\ttargetCellIndex = getTargetCellIndex(targetElement, targetRow);\n\t\t\t}\n\t\t\treturn targetCellIndex;\n\t\t};\n\t\tconst targetRow = this._getTableRow(element) as Row | undefined;\n\n\t\tlet targetColumnIndex = getTargetColumnIndex(element, targetRow);\n\t\tif (targetRow?.isA<CreationRow>(\"sap.ui.table.CreationRow\")) {\n\t\t\tconst targetCellId = targetColumnIndex ? targetRow.getCells()[targetColumnIndex].getId() : undefined,\n\t\t\t\ttableColumns = targetRow.getTable()?.getColumns();\n\t\t\ttargetColumnIndex = tableColumns?.findIndex(function (column: Column) {\n\t\t\t\tif (column.getCreationTemplate() && targetCellId) {\n\t\t\t\t\treturn targetCellId.search(column.getCreationTemplate().getId()) > -1 ? true : false;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn targetColumnIndex;\n\t}\n\n\t_getMdcTableRows(oMdcTable: MDCTable): Row[] {\n\t\treturn oMdcTable.findElements(true, function (oElem: Control) {\n\t\t\treturn (\n\t\t\t\toElem.isA<Row>(\"sap.ui.table.Row\") &&\n\t\t\t\t/** We check the element belongs to the Mdc Table :*/\n\t\t\t\t(oElem as { getTable?: () => UI5Element }).getTable?.().getParent() === oMdcTable\n\t\t\t);\n\t\t}) as Row[];\n\t}\n\n\t_getObjectPageLayout(oElement: ManagedObject | undefined, oObjectPageLayout?: ObjectPageLayout): ObjectPageLayout | undefined {\n\t\tif (oObjectPageLayout) {\n\t\t\treturn oObjectPageLayout;\n\t\t}\n\t\tlet targetElement = oElement;\n\t\t//Iterate over parent till you have not reached the object page layout\n\t\twhile (targetElement && !targetElement.isA<ObjectPageLayout>(\"sap.uxap.ObjectPageLayout\")) {\n\t\t\ttargetElement = targetElement.getParent() ?? undefined;\n\t\t}\n\t\treturn targetElement;\n\t}\n\n\t/**\n\t * The method that is called to check if a navigation is configured from the table to a sub object page.\n\t * @private\n\t * @param table MdcTable\n\t * @returns Either true or false\n\t */\n\t_navigationConfigured(table: Table): boolean {\n\t\t// TODO: this logic would be moved to check the same at the template time to avoid the same check happening multiple times.\n\t\tconst component = sap.ui.require(\"sap/ui/core/Component\"),\n\t\t\tnavObject = table && component.getOwnerComponentFor(table) && component.getOwnerComponentFor(table).getNavigation();\n\t\tlet subOPConfigured = false,\n\t\t\tnavConfigured = false;\n\t\tif (navObject && Object.keys(navObject).includes(table.getRowBinding().getPath())) {\n\t\t\tsubOPConfigured =\n\t\t\t\tnavObject[table?.getRowBinding().getPath()] &&\n\t\t\t\tnavObject[table?.getRowBinding().getPath()].detail &&\n\t\t\t\tnavObject[table?.getRowBinding().getPath()].detail.route\n\t\t\t\t\t? true\n\t\t\t\t\t: false;\n\t\t}\n\t\tnavConfigured =\n\t\t\tsubOPConfigured &&\n\t\t\ttable?.getRowSettings().getRowActions() &&\n\t\t\ttable?.getRowSettings().getRowActions()[0].getType().includes(\"Navigation\");\n\t\treturn navConfigured;\n\t}\n\n\tsetFocusToControl(control?: UI5Element): void {\n\t\tconst messagePopover = this.oMessagePopover;\n\t\tif (messagePopover && control && control.focus) {\n\t\t\tconst fnFocus = (): void => {\n\t\t\t\tcontrol.focus();\n\t\t\t};\n\t\t\tif (!messagePopover.isOpen()) {\n\t\t\t\t// when navigating to parent page to child page (on click of message), the child page might have a focus logic that might use a timeout.\n\t\t\t\t// we use the below timeouts to override this focus so that we focus on the target control of the message in the child page.\n\t\t\t\tsetTimeout(fnFocus, 0);\n\t\t\t} else {\n\t\t\t\tconst fnOnClose = (): void => {\n\t\t\t\t\tsetTimeout(fnFocus, 0);\n\t\t\t\t\tmessagePopover.detachEvent(\"afterClose\", fnOnClose);\n\t\t\t\t};\n\t\t\t\tmessagePopover.attachEvent(\"afterClose\", fnOnClose);\n\t\t\t\tmessagePopover.close();\n\t\t\t}\n\t\t} else {\n\t\t\tLog.warning(\"FE V4 : MessageButton : element doesn't have focus method for focusing.\");\n\t\t}\n\t}\n\n\tescape(value: string): string {\n\t\treturn String(value)\n\t\t\t.replace(/&/g, \"&amp;\")\n\t\t\t.replace(/\"/g, \"&quot;\")\n\t\t\t.replace(/'/g, \"&#39;\")\n\t\t\t.replace(/</g, \"&lt;\")\n\t\t\t.replace(/>/g, \"&gt;\");\n\t}\n}\n\nexport default MessageButton;\n"],"mappings":"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","ignoreList":[],"file":"MessageButton-dbg.js"}