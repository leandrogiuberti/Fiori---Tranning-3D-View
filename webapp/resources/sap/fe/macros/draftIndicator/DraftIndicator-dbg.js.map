{"version":3,"names":["DraftIndicator","_dec","defineUI5Class","_dec2","property","type","_dec3","_dec4","required","_dec5","_dec6","_dec7","_dec8","allowedValues","_class","_class2","_BuildingBlock","properties","others","_this","call","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_exports","_inheritsLoose","_proto","prototype","setDraftIndicatorType","indicator","ObjectMarkerVisibility","IconOnly","IconAndText","includes","setProperty","Error","addAriaLabelledByForDraftIndicator","element","ariaLabelledBys","content","getAriaLabelledBy","addAriaLabelledBy","onMetadataAvailable","createContent","formatDraftOwnerTextInPopover","hasDraftEntity","draftInProcessByUser","draftLastChangedByUser","draftInProcessByUserDesc","draftLastChangedByUserDesc","macroResourceBundle","Library","getResourceBundleFor","userDescription","getText","getDraftAdministrativeDataProperties","metaData","getDataModelObjectPath","contextPath","draftAdminElement","targetEntityType","navigationProperties","find","a","name","draftAdminProperties","targetType","entityProperties","map","oDraftAdminProperty","getPopoverTitleBindingExpression","ifElse","not","Entity","IsActive","isHiddenDraftEnabled","pathInModel","HasDraft","isEmpty","draftIndicatorType","getDraftOwnerTextBindingExpression","draftAdministrativeDataProperties","parts","path","push","formatter","createPopover","control","isDraftWithNoChangesBinding","and","draftWithNoChangesTextBinding","isDraftWithChangesBinding","draftWithChangesTextBinding","model","formatMessage","isActiveInstanceBinding","activeInstanceTextBinding","popover","_jsx","Popover","title","showHeader","verticalScrolling","class","placement","endButton","Button","icon","press","draftPopover","close","children","_jsxs","VBox","visible","Text","text","CommonUtils","getTargetView","addDependent","onObjectMarkerPressed","event","source","getSource","bindingContext","getBindingContext","setBindingContext","openBy","getIconAndTextAdditionalInfoBindingExpression","orBindings","or","getIconAndTextContent","getAppComponent","getEnvironmentCapabilities","getCapabilities","HiddenDraft","enabled","objMarkerType","ObjectMarkerType","Unsaved","Draft","LockedBy","UnsavedBy","Flagged","visibility","TextOnly","ObjectMarker","bind","additionalInfo","ariaLabelledBy","reactiveAreaMode","getIconOnlyContent","usedInAnalyticalTable","Locked","usedInTable","UI","IsEditable","undefined","BuildingBlock","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sourceRoot":".","sources":["DraftIndicator.tsx"],"sourcesContent":["import type { Property } from \"@sap-ux/vocabularies-types\";\nimport formatMessage from \"sap/base/strings/formatMessage\";\nimport type { BindingToolkitExpression, PrimitiveType } from \"sap/fe/base/BindingToolkit\";\nimport { and, ifElse, isEmpty, not, or, pathInModel } from \"sap/fe/base/BindingToolkit\";\nimport type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { defineUI5Class, property } from \"sap/fe/base/ClassSupport\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport BuildingBlock from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport type { HiddenDraft } from \"sap/fe/core/converters/ManifestSettings\";\nimport { Entity, UI } from \"sap/fe/core/helpers/BindingHelper\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport Button from \"sap/m/Button\";\nimport type { ObjectMarker$PressEvent } from \"sap/m/ObjectMarker\";\nimport ObjectMarker from \"sap/m/ObjectMarker\";\nimport Popover from \"sap/m/Popover\";\nimport Text from \"sap/m/Text\";\nimport VBox from \"sap/m/VBox\";\nimport { ObjectMarkerType, ObjectMarkerVisibility } from \"sap/m/library\";\nimport type Control from \"sap/ui/core/Control\";\nimport type { $ControlSettings } from \"sap/ui/core/Control\";\nimport Library from \"sap/ui/core/Lib\";\nimport type ODataV4Context from \"sap/ui/model/odata/v4/Context\";\n\n/**\n * Building block for creating a DraftIndicator based on the metadata provided by OData V4.\n *\n * Usage example:\n * <pre>\n * &lt;macros:DraftIndicator\n * id=\"SomeID\"\n * /&gt;\n * </pre>\n * @private\n */\n@defineUI5Class(\"sap.fe.macros.draftIndicator.DraftIndicator\")\nexport default class DraftIndicator extends BuildingBlock<Control> {\n\t/**\n\t * ID of the DraftIndicator\n\t */\n\t@property({\n\t\ttype: \"string\"\n\t})\n\tpublic id?: string;\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\tpublic draftIndicatorType?: ObjectMarkerVisibility.IconOnly | ObjectMarkerVisibility.IconAndText = ObjectMarkerVisibility.IconAndText;\n\n\t@property({\n\t\ttype: \"string\",\n\t\trequired: true\n\t})\n\tcontextPath!: string;\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\tpublic class = \"\";\n\n\t@property({\n\t\ttype: \"boolean\"\n\t})\n\tpublic usedInTable?: boolean;\n\n\t@property({\n\t\ttype: \"boolean\"\n\t})\n\tpublic usedInAnalyticalTable?: boolean;\n\n\t@property({ type: \"string\", allowedValues: [\"Inline\", \"Overlay\"] })\n\treactiveAreaMode?: \"Inline\" | \"Overlay\";\n\n\tdraftPopover?: Popover;\n\n\tprivate isHiddenDraftEnabled?: boolean;\n\n\tconstructor(properties: $ControlSettings & PropertiesOf<DraftIndicator>, others?: $ControlSettings) {\n\t\tsuper(properties, others);\n\t}\n\n\tsetDraftIndicatorType(\n\t\tindicator: ObjectMarkerVisibility.IconOnly | ObjectMarkerVisibility.IconAndText | ObjectMarkerVisibility.TextOnly\n\t): void {\n\t\tif ([ObjectMarkerVisibility.IconOnly, ObjectMarkerVisibility.IconAndText].includes(indicator)) {\n\t\t\tthis.setProperty(\"draftIndicatorType\", indicator);\n\t\t} else {\n\t\t\tthrow new Error(`Allowed value ${indicator} does not match`);\n\t\t}\n\t}\n\n\taddAriaLabelledByForDraftIndicator(element: string): void {\n\t\tconst ariaLabelledBys = (this.content as unknown as ObjectMarker)?.getAriaLabelledBy() ?? [];\n\t\tif (!ariaLabelledBys.includes(element)) {\n\t\t\t(this.content as unknown as ObjectMarker)?.addAriaLabelledBy(element);\n\t\t}\n\t}\n\n\t/**\n\t * Handler for the onMetadataAvailable event.\n\t */\n\tonMetadataAvailable(): void {\n\t\tif (!this.content) {\n\t\t\tthis.content = this.createContent();\n\t\t}\n\t}\n\n\t/**\n\t * Runtime formatter function to format the correct text that displays the owner of a draft.\n\t *\n\t * This is used in case the DraftIndicator is shown for an active entity that has a draft of another user.\n\t * @param hasDraftEntity\n\t * @param draftInProcessByUser\n\t * @param draftLastChangedByUser\n\t * @param draftInProcessByUserDesc\n\t * @param draftLastChangedByUserDesc\n\t * @returns Text to display\n\t */\n\tstatic formatDraftOwnerTextInPopover(\n\t\t// eslint-disable-next-line @typescript-eslint/no-invalid-void-type\n\t\tthis: void,\n\t\thasDraftEntity: boolean,\n\t\tdraftInProcessByUser: string,\n\t\tdraftLastChangedByUser: string,\n\t\tdraftInProcessByUserDesc: string,\n\t\tdraftLastChangedByUserDesc: string\n\t): string {\n\t\tconst macroResourceBundle = Library.getResourceBundleFor(\"sap.fe.macros\");\n\t\tif (!macroResourceBundle) {\n\t\t\treturn \"\";\n\t\t}\n\t\tif (hasDraftEntity) {\n\t\t\tconst userDescription =\n\t\t\t\tdraftInProcessByUserDesc || draftInProcessByUser || draftLastChangedByUserDesc || draftLastChangedByUser;\n\n\t\t\tif (!userDescription) {\n\t\t\t\treturn macroResourceBundle.getText(\"M_FIELD_RUNTIME_DRAFT_POPOVER_UNSAVED_CHANGES_BY_UNKNOWN\");\n\t\t\t} else {\n\t\t\t\treturn draftInProcessByUser\n\t\t\t\t\t? macroResourceBundle.getText(\"M_FIELD_RUNTIME_DRAFT_POPOVER_LOCKED_BY_KNOWN\", [userDescription])\n\t\t\t\t\t: macroResourceBundle.getText(\"M_FIELD_RUNTIME_DRAFT_POPOVER_UNSAVED_CHANGES_BY_KNOWN\", [userDescription]);\n\t\t\t}\n\t\t} else {\n\t\t\treturn macroResourceBundle.getText(\"M_FIELD_RUNTIME_DRAFT_POPOVER_NO_DATA_TEXT\");\n\t\t}\n\t}\n\n\t/***\n\t * Gets the properties of the DraftAdministrativeData entity connected to the given entity set\n\t *\n\t * @returns List of property names\n\t */\n\tgetDraftAdministrativeDataProperties(): string[] | undefined {\n\t\tconst metaData: DataModelObjectPath<Property> | undefined = this.getDataModelObjectPath(this.contextPath);\n\t\tconst draftAdminElement = metaData?.targetEntityType.navigationProperties.find((a) => a.name === \"DraftAdministrativeData\");\n\t\tconst draftAdminProperties = draftAdminElement?.targetType.entityProperties;\n\t\treturn draftAdminProperties?.map((oDraftAdminProperty) => oDraftAdminProperty.name);\n\t}\n\n\t/**\n\t * Constructs the binding expression for the text displayed as title of the popup.\n\t * @returns The binding expression\n\t */\n\tgetPopoverTitleBindingExpression(): BindingToolkitExpression<PrimitiveType> {\n\t\treturn ifElse(\n\t\t\tnot(Entity.IsActive),\n\t\t\tthis.isHiddenDraftEnabled\n\t\t\t\t? pathInModel(\"M_DRAFT_POPOVER_ADMIN_UNSAVED_OBJECT\", \"sap.fe.i18n\")\n\t\t\t\t: pathInModel(\"M_COMMON_DRAFT_OBJECT\", \"sap.fe.i18n\"),\n\t\t\tifElse(\n\t\t\t\tEntity.HasDraft,\n\t\t\t\tifElse(\n\t\t\t\t\tnot(isEmpty(pathInModel(\"DraftAdministrativeData/InProcessByUser\"))),\n\t\t\t\t\tpathInModel(\"M_COMMON_DRAFT_LOCKED_OBJECT\", \"sap.fe.i18n\"),\n\t\t\t\t\tpathInModel(\"M_DRAFT_POPOVER_ADMIN_UNSAVED_OBJECT\", \"sap.fe.i18n\")\n\t\t\t\t),\n\t\t\t\tthis.draftIndicatorType === ObjectMarkerVisibility.IconAndText\n\t\t\t\t\t? \" \"\n\t\t\t\t\t: pathInModel(\"C_DRAFT_POPOVER_ADMIN_DATA_DRAFTINFO_FLAGGED_OBJECT\", \"sap.fe.i18n\")\n\t\t\t)\n\t\t);\n\t}\n\n\t/**\n\t * Constructs the binding expression for the text displayed to identify the draft owner in the popup.\n\t * This binding is configured to call formatDraftOwnerTextInPopover at runtime.\n\t *\n\t * We cannot reference formatDraftOwnerTextInPopover directly as we need to conditionally pass properties that might exist or not,\n\t * and referring to non-existing properties fails the binding.\n\t * @returns The binding expression\n\t */\n\tgetDraftOwnerTextBindingExpression(): {\n\t\tparts: unknown[];\n\t\tformatter: (\n\t\t\thasDraftEntity: boolean,\n\t\t\tdraftInProcessByUser: string,\n\t\t\tdraftLastChangedByUser: string,\n\t\t\tdraftInProcessByUserDesc: string,\n\t\t\tdraftLastChangedByUserDesc: string\n\t\t) => string;\n\t} {\n\t\tconst draftAdministrativeDataProperties = this.getDraftAdministrativeDataProperties();\n\n\t\tconst parts = [\n\t\t\t{ path: \"HasDraftEntity\", targetType: \"any\" },\n\t\t\t{ path: \"DraftAdministrativeData/InProcessByUser\" },\n\t\t\t{ path: \"DraftAdministrativeData/LastChangedByUser\" }\n\t\t];\n\t\tif (draftAdministrativeDataProperties?.includes(\"InProcessByUserDescription\")) {\n\t\t\tparts.push({ path: \"DraftAdministrativeData/InProcessByUserDescription\" });\n\t\t}\n\t\tif (draftAdministrativeDataProperties?.includes(\"LastChangedByUserDescription\")) {\n\t\t\tparts.push({ path: \"DraftAdministrativeData/LastChangedByUserDescription\" });\n\t\t}\n\n\t\t//parts.push({path: \"sap.fe.i18n>\"})\n\n\t\treturn { parts, formatter: DraftIndicator.formatDraftOwnerTextInPopover };\n\t}\n\n\t/**\n\t * Creates a popover control to display draft information.\n\t * @param control Control that the popover is to be created for\n\t * @returns The created popover control\n\t */\n\tcreatePopover(control: Control): Popover {\n\t\tconst isDraftWithNoChangesBinding = and(not(Entity.IsActive), isEmpty(pathInModel(\"DraftAdministrativeData/LastChangeDateTime\")));\n\t\tconst draftWithNoChangesTextBinding =\n\t\t\tthis.draftIndicatorType === ObjectMarkerVisibility.IconAndText\n\t\t\t\t? pathInModel(\"M_DRAFT_POPOVER_ADMIN_GENERIC_LOCKED_OBJECT_POPOVER_TEXT\", \"sap.fe.i18n\")\n\t\t\t\t: pathInModel(\"C_DRAFT_POPOVER_ADMIN_DATA_DRAFTINFO_POPOVER_NO_DATA_TEXT\", \"sap.fe.i18n\");\n\n\t\tconst isDraftWithChangesBinding = and(\n\t\t\tnot(Entity.IsActive),\n\t\t\tnot(isEmpty(pathInModel(\"DraftAdministrativeData/LastChangeDateTime\")))\n\t\t);\n\t\tconst draftWithChangesTextBinding = {\n\t\t\tparts: [\n\t\t\t\t{ path: \"M_DRAFT_POPOVER_ADMIN_LAST_CHANGE_TEXT\", model: \"sap.fe.i18n\" },\n\t\t\t\t{ path: \"DraftAdministrativeData/LastChangeDateTime\" }\n\t\t\t],\n\t\t\tformatter: formatMessage\n\t\t};\n\n\t\tconst isActiveInstanceBinding = and(Entity.IsActive, not(isEmpty(pathInModel(\"DraftAdministrativeData/LastChangeDateTime\"))));\n\t\tconst activeInstanceTextBinding = { ...draftWithChangesTextBinding };\n\n\t\tconst popover: Popover = (\n\t\t\t<Popover\n\t\t\t\ttitle={this.getPopoverTitleBindingExpression()}\n\t\t\t\tshowHeader={true}\n\t\t\t\tverticalScrolling={false}\n\t\t\t\tclass={\"sapUiContentPadding\"}\n\t\t\t\tplacement={\"Auto\"}\n\t\t\t\tendButton={\n\t\t\t\t\t(\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ticon={\"sap-icon://decline\"}\n\t\t\t\t\t\t\tpress={(): void => {\n\t\t\t\t\t\t\t\tthis.draftPopover?.close();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) as Button\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<VBox class={\"sapUiContentPadding\"}>\n\t\t\t\t\t<VBox visible={isDraftWithNoChangesBinding}>\n\t\t\t\t\t\t<Text text={draftWithNoChangesTextBinding} />\n\t\t\t\t\t</VBox>\n\t\t\t\t\t<VBox visible={isDraftWithChangesBinding}>\n\t\t\t\t\t\t<Text text={draftWithChangesTextBinding} />\n\t\t\t\t\t</VBox>\n\t\t\t\t\t<VBox visible={isActiveInstanceBinding}>\n\t\t\t\t\t\t<Text text={this.getDraftOwnerTextBindingExpression()} />\n\t\t\t\t\t\t<Text class={\"sapUiSmallMarginTop\"} text={activeInstanceTextBinding} />\n\t\t\t\t\t</VBox>\n\t\t\t\t</VBox>\n\t\t\t</Popover>\n\t\t) as Popover;\n\n\t\tCommonUtils.getTargetView(control).addDependent(popover);\n\t\treturn popover;\n\t}\n\n\t/**\n\t * Handles pressing of the object marker by opening a corresponding popover.\n\t * @param event Event object passed from the press event\n\t */\n\tonObjectMarkerPressed(event: ObjectMarker$PressEvent): void {\n\t\tconst source = event.getSource();\n\t\tconst bindingContext = source.getBindingContext() as ODataV4Context;\n\n\t\tthis.draftPopover ??= this.createPopover(source);\n\n\t\tthis.draftPopover.setBindingContext(bindingContext);\n\t\tthis.draftPopover.openBy(source, false);\n\t}\n\n\t/**\n\t * Constructs the binding expression for the \"additionalInfo\" attribute in the \"IconAndText\" case.\n\t * @returns The binding expression\n\t */\n\tgetIconAndTextAdditionalInfoBindingExpression(): BindingToolkitExpression<string> {\n\t\tconst draftAdministrativeDataProperties = this.getDraftAdministrativeDataProperties();\n\n\t\tconst orBindings = [];\n\t\tif (draftAdministrativeDataProperties?.includes(\"InProcessByUserDescription\")) {\n\t\t\torBindings.push(pathInModel(\"DraftAdministrativeData/InProcessByUserDescription\"));\n\t\t}\n\t\torBindings.push(pathInModel(\"DraftAdministrativeData/InProcessByUser\"));\n\t\tif (draftAdministrativeDataProperties?.includes(\"LastChangedByUserDescription\")) {\n\t\t\torBindings.push(pathInModel(\"DraftAdministrativeData/LastChangedByUserDescription\"));\n\t\t}\n\t\torBindings.push(pathInModel(\"DraftAdministrativeData/LastChangedByUser\"));\n\n\t\treturn ifElse<string>(Entity.HasDraft, or(...orBindings) as BindingToolkitExpression<string>, \"\");\n\t}\n\n\t/**\n\t * Returns the content of this building block for the \"IconAndText\" type.\n\t * @returns The control tree\n\t */\n\tgetIconAndTextContent(): ObjectMarker {\n\t\tthis.isHiddenDraftEnabled = (this.getAppComponent()?.getEnvironmentCapabilities().getCapabilities().HiddenDraft as HiddenDraft)\n\t\t\t?.enabled;\n\t\tconst objMarkerType = this.isHiddenDraftEnabled ? ObjectMarkerType.Unsaved : ObjectMarkerType.Draft;\n\t\tconst type = ifElse(\n\t\t\tnot(Entity.IsActive),\n\t\t\tobjMarkerType,\n\t\t\tifElse(\n\t\t\t\tEntity.HasDraft,\n\t\t\t\tifElse(\n\t\t\t\t\tpathInModel(\"DraftAdministrativeData/InProcessByUser\"),\n\t\t\t\t\tObjectMarkerType.LockedBy,\n\t\t\t\t\tifElse(pathInModel(\"DraftAdministrativeData/LastChangedByUser\"), ObjectMarkerType.UnsavedBy, ObjectMarkerType.Unsaved)\n\t\t\t\t),\n\t\t\t\tObjectMarkerType.Flagged\n\t\t\t)\n\t\t);\n\n\t\tconst visibility = ifElse(not(Entity.HasDraft), ObjectMarkerVisibility.TextOnly, ObjectMarkerVisibility.IconAndText);\n\n\t\treturn (\n\t\t\t<ObjectMarker\n\t\t\t\ttype={type}\n\t\t\t\tpress={this.onObjectMarkerPressed.bind(this)}\n\t\t\t\tvisibility={visibility}\n\t\t\t\tadditionalInfo={this.getIconAndTextAdditionalInfoBindingExpression()}\n\t\t\t\tariaLabelledBy={this.ariaLabelledBy ? this.ariaLabelledBy : []}\n\t\t\t\tclass={this.class}\n\t\t\t\treactiveAreaMode={this.reactiveAreaMode}\n\t\t\t/>\n\t\t) as ObjectMarker;\n\t}\n\n\t/**\n\t * Returns the content of this building block for the \"IconOnly\" type.\n\t * @returns The control tree\n\t */\n\tgetIconOnlyContent(): ObjectMarker {\n\t\tconst type = ifElse(\n\t\t\tnot(Entity.IsActive),\n\t\t\tObjectMarkerType.Draft,\n\t\t\tifElse(\n\t\t\t\tEntity.HasDraft,\n\t\t\t\tifElse(\n\t\t\t\t\t!!this.usedInAnalyticalTable,\n\t\t\t\t\tObjectMarkerType.Locked,\n\t\t\t\t\tifElse(pathInModel(\"DraftAdministrativeData/InProcessByUser\"), ObjectMarkerType.Locked, ObjectMarkerType.Unsaved)\n\t\t\t\t),\n\t\t\t\tObjectMarkerType.Flagged\n\t\t\t)\n\t\t);\n\n\t\tlet visible;\n\t\tif (this.usedInTable === true) {\n\t\t\tvisible = or(not(Entity.IsActive), and(Entity.IsActive, Entity.HasDraft));\n\t\t} else {\n\t\t\t// If Entity.HasDraft is empty, there is no context at all, so don't show the indicator\n\t\t\tvisible = and(\n\t\t\t\tnot(isEmpty(Entity.HasDraft)),\n\t\t\t\tnot(UI.IsEditable),\n\t\t\t\tEntity.HasDraft,\n\t\t\t\tnot(pathInModel(\"DraftAdministrativeData/DraftIsCreatedByMe\"))\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<ObjectMarker\n\t\t\t\ttype={type}\n\t\t\t\tpress={!this.usedInAnalyticalTable ? this.onObjectMarkerPressed.bind(this) : undefined}\n\t\t\t\tvisibility={ObjectMarkerVisibility.IconOnly}\n\t\t\t\tvisible={visible}\n\t\t\t\tariaLabelledBy={this.ariaLabelledBy ? this.ariaLabelledBy : []}\n\t\t\t\tclass={this.class}\n\t\t\t\treactiveAreaMode={this.reactiveAreaMode}\n\t\t\t/>\n\t\t) as ObjectMarker;\n\t}\n\n\t/**\n\t * Returns the content of this building block.\n\t * @returns The control tree\n\t */\n\tcreateContent(): ObjectMarker | undefined {\n\t\tif (this.draftIndicatorType === ObjectMarkerVisibility.IconAndText) {\n\t\t\treturn this.getIconAndTextContent();\n\t\t} else {\n\t\t\treturn this.getIconOnlyContent();\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"DraftIndicator-dbg.js"}