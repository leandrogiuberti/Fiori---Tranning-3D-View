/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/base/util/deepClone","sap/base/util/deepEqual","sap/base/util/isPlainObject","sap/fe/base/BindingToolkit","sap/fe/core/CommonUtils","sap/fe/core/helpers/KeepAliveHelper","sap/fe/core/helpers/ToES6Promise","sap/fe/core/templating/SemanticObjectHelper","sap/fe/macros/field/FieldHelper","sap/fe/macros/field/FieldRuntime","sap/fe/navigation/SelectionVariant","sap/ui/core/Fragment","sap/ui/core/Lib","sap/ui/core/XMLTemplateProcessor","sap/ui/core/util/XMLPreprocessor","sap/fe/macros/quickView/QuickViewHeaderOptions","sap/ui/mdc/LinkDelegate","sap/ui/mdc/enums/LinkType","sap/ui/mdc/link/Factory","sap/ui/mdc/link/LinkItem","sap/ui/mdc/ushell/SemanticObjectMapping","sap/ui/mdc/ushell/SemanticObjectMappingItem","sap/ui/mdc/ushell/SemanticObjectUnavailableAction","sap/ui/model/json/JSONModel"],function(e,t,n,i,a,s,c,o,r,l,m,d,u,p,g,f,h,b,y,O,v,j,S,k,P){"use strict";var M=r.getDynamicPathFromSemanticObject;var _=a.resolveBindingString;const C=Object.assign({},b);C.apiVersion=2;const L={iLinksShownInPopup:3,sapmLink:"sap.m.Link",sapuimdcLink:"sap.ui.mdc.Link",sapuimdclinkLinkItem:"sap.ui.mdc.link.LinkItem",sapmObjectIdentifier:"sap.m.ObjectIdentifier",sapmObjectStatus:"sap.m.ObjectStatus"};C.getConstants=function(){return L};C._getEntityType=function(e,t){if(t){return t.createBindingContext(e.entityType)??undefined}else{return undefined}};C._getSemanticsModel=function(e,t){if(t){return new P(e)}else{return undefined}};C._getDataField=function(e,t){return t.createBindingContext(e.dataField)??undefined};C._getContact=function(e,t){return t.createBindingContext(e.contact)??undefined};C.preparePayload=function(e){const t=C.calculatePayloadWithDynamicSemanticObjectsResolved(e);if(!t.LinkId){t.LinkId=this.oControl?.isA(L.sapuimdcLink)?this.oControl.getId():undefined}if(t.LinkId){t.titleLink=this.oControl.getModel("$sapuimdcLink")?.getProperty("/titleLinkHref")}return t};C.fnTemplateFragment=async function(e){const t=s.getTargetView(e);const n=s.getAppComponent(t);let i="";const a={bindingContexts:{},models:{},appComponent:n};const c=C.preparePayload(e);const o=this._getSemanticsModel(c,this.oMetaModel);this.semanticModel=o;let r;if(c.entityType&&this._getEntityType(c,this.oMetaModel)&&o){i="sap.fe.macros.quickView.fragments.QuickViewForEntity";a.bindingContexts={entityType:this._getEntityType(c,this.oMetaModel),semantic:o.createBindingContext("/")};r=this._getEntityType(c,this.oMetaModel)?.getPath();a.models={entityType:this.oMetaModel,semantic:o}}else if(c.dataField&&this._getDataField(c,this.oMetaModel)&&o){i="sap.fe.macros.quickView.fragments.QuickViewForDataField";r=this._getDataField(c,this.oMetaModel)?.getPath();a.bindingContexts={dataField:this._getDataField(c,this.oMetaModel),semantic:o.createBindingContext("/")};a.models={dataField:this.oMetaModel,semantic:o}}a.models.entitySet=this.oMetaModel;a.models.metaModel=this.oMetaModel;a.models.converterContext=t.getModel("_pageModel");a.bindingContexts.converterContext=a.models.converterContext.createBindingContext("/");if(this.oControl&&this.oControl.getModel("viewData")){a.models.viewData=this.oControl.getModel("viewData");a.bindingContexts.viewData=this.oControl.getModel("viewData")?.createBindingContext("/")}const l=g.loadTemplate(i,"fragment");const m=await f.process(l,{name:i},a);const d=t.getController().getOwnerComponent();const p=await d.runAsOwner(async()=>await u.load({definition:m,controller:t.getController()}));if(r&&p.isA("sap.m.VBox")){const e=new h({contextPath:c.contextPath,metaPath:r,semanticPayload:o?.getObject("/")});p.insertItem(e,0)}p.setModel(o,"semantic");if(p){if(a.models&&a.models.semantic){p.setModel(a.models.semantic,"semantic");p.setBindingContext(a.bindingContexts.semantic,"semantic")}if(a.bindingContexts&&a.bindingContexts.entityType){p.setModel(a.models.entityType,"entityType");p.setBindingContext(a.bindingContexts.entityType,"entityType")}}return p};C.fetchAdditionalContent=async function(e){const t=e.getPayload();this.oControl=e;const n=t?.navigationPath?.match(/{(.*?)}/);const i=e.getBindingContext()?.getBinding();const a=i?.getAggregation&&i.getAggregation();const s=a!==undefined&&!a.hierarchyQualifier;const c=s?{$$ownRequest:true}:undefined;const o=n&&n.length>1&&n[1]?e.getModel()?.bindContext(n[1],e.getBindingContext()||undefined,c):null;this.payload=t;this.oMetaModel=e.getModel()?.getMetaModel();const r=await this.fnTemplateFragment(e);if(o){const e=o.getBoundContext();if(e){r.setBindingContext(e)}}return[r]};C._fetchLinkCustomData=function(e){if(e.getParent()&&e.isA(L.sapuimdcLink)&&(e.getParent()?.isA(L.sapmLink)||e.getParent()?.isA(L.sapmObjectIdentifier)||e.getParent()?.isA(L.sapmObjectStatus)||e.getParent()?.isA("sap.fe.macros.controls.TextLink"))){return e.getCustomData()}else{return undefined}};C.fetchLinkItems=async function(e,t,n){const i=e.getPayload();if(t&&C._getSemanticObjects(i)){if(n){n.initialize(C._getSemanticObjects(i))}const a=this._link&&this._fetchLinkCustomData(this._link);this.aLinkCustomData=a&&this._fetchLinkCustomData(this._link)?.map(function(e){return e.getValue()});const s=C._calculateSemanticAttributes(t,i,n,e);const c=s.results;const o=s.payload;return C._retrieveNavigationTargets("",c,o,n,this._link).then(function(e){return e.length===0?null:e})}else{return Promise.resolve(null)}};C._findLinkType=function(e,t){let n,i;if(t?.length===1){i=new v({text:t[0].getText(),href:t[0].getHref()});n=e.hasQuickViewFacets==="false"?y.DirectLink:y.Popover}else if(e.hasQuickViewFacets==="false"&&t?.length===0){n=y.Text}else{n=y.Popover}return{linkType:n,linkItem:i}};C.fetchLinkType=async function(t){const n=t;const i=Object.assign({},t.getPayload());let a={initialType:{type:y.Popover,directLink:undefined},runtimeType:undefined};if(!this.appStateKeyMap){this.appStateKeyMap={}}try{if(i?.semanticObjects){this._link=t;let e=await n._retrieveUnmodifiedLinkItems();if(e.length===1){e=await n.retrieveLinkItems()}const a=C._findLinkType(i,e);return{initialType:{type:a.linkType,directLink:a.linkItem?a.linkItem:undefined},runtimeType:undefined}}else if(i?.contact?.length&&i?.contact?.length>0){return a}else if(i?.entityType&&i?.navigationPath){return a}a=undefined;throw new Error("no payload or semanticObjects found")}catch(t){e.error("Error in SimpleLinkDelegate.fetchLinkType: ",t)}return a};C._RemoveTitleLinkFromTargets=function(e,t,n,i){let a;let s=false;if(n&&i&&t.length){const n=`#${t[0].getProperty("key")}`;const c=i.split("?")[0];const o=c===n;if(o){a=t[0].getProperty("href");this.payload.titleLinkhref=a;const i=e.getModel("$sapuimdcLink");i.setProperty("/titleLinkHref",a);const c=i?.getProperty("/linkItems").filter(function(e){if(`#${e.key}`!==n){return e}});if(c&&c.length>0){i.setProperty("/linkItems/",c)}s=true}}return s};C._IsSemanticObjectDynamic=function(e,t){if(e&&t.aLinkCustomData){return t.aLinkCustomData.filter(function(t){return e.filter(function(e){return e!==t}).length>0}).length>0}else{return false}};C._getLineContext=function(e,t){if(!t){if(e.getAggregation("content")[0]&&e.getAggregation("content")[0].getBindingContext()){return e.getAggregation("content")[0].getBindingContext()}}return t};C._setFilterContextUrlForSelectionVariant=function(e,t,n){if(e.getViewData().entitySet&&t){const i=n.constructContextUrl(e.getViewData().entitySet,e.getModel());t.setFilterContextUrl(i)}return t};C._setObjectMappings=function(e,t,n,i){let a=false;const s=new d(i.toJSONObject());n.forEach(function(n){let i=n.semanticObject;const c=M(n.semanticObject);if(c&&t[c]){i=t[c]}if(e===i){const e=n.items;for(const n in e){const i=e[n].key;const c=e[n].value;if(i!==c){if(t[i]){s.removeParameter(c);s.removeSelectOption(c);s.renameParameter(i,c);s.renameSelectOption(i,c);t[c]=t[i];delete t[i];a=true}else if(i.split("/").length>1){let e=s.getSelectOptionsPropertyNames().find(e=>e.includes(i.replace("/",".")));e=e?e:i.split("/").slice(-1)[0];if(!t[e]){delete t[e];s.removeParameter(e);s.removeSelectOption(e)}else if(e!==c){s.removeParameter(c);s.removeSelectOption(c);s.renameParameter(e,c);s.renameSelectOption(e,c);t[c]=t[e];delete t[e]}}else{delete t[i];s.removeParameter(c);s.removeSelectOption(c)}}}}});return{params:t,hasChanged:a,selectionVariant:s}};C._getAppStateKeyAndUrlParameters=async function(e,t,i,a){let s=[];if(n(i,e.appStateKeyMap[""]?.selectionVariant)){const t=e.appStateKeyMap[""];return[t.semanticAttributes,t.appstatekey]}if(e.appStateKeyMap[`${a}`]===undefined||!n(e.appStateKeyMap[`${a}`].selectionVariant,i)){s=await o(t.getAppStateKeyAndUrlParameters(i.toJSONString()));e.appStateKeyMap[`${a}`]={semanticAttributes:s[0],appstatekey:s[1],selectionVariant:i}}else{const t=e.appStateKeyMap[`${a}`];s=[t.semanticAttributes,t.appstatekey]}return s};C._getLinkItemWithNewParameter=async function(e,t,n,i,a){const c=await e.shellServices.expandCompactHash(n.mdcLinkItem.getHref());const o=e.shellServices.parseShellHash(c);let r;const m={semanticObject:o.semanticObject,action:o.action,propertiesWithoutConflict:n.propertiesWithoutConflict,linkContextPath:n.mdcLink.getBindingContext()?.getPath()};const d=s.getTargetView(n.mdcLink);const u=d.getController();u.intentBasedNavigation.adaptNavigationContext(a,m);const p=Object.assign({},e.navigationService.oNavHandler._getURLParametersFromSelectionVariant(a));const{params:g}=C._setObjectMappings(o.semanticObject,p,n.payload.semanticObjectMappings,a);delete g["sap-xapp-state"];delete g["@odata.etag"];const f={semanticObject:o.semanticObject,action:o.action,params:g,appStateKey:i};const h=await e.shellServices.getLinks([f]);const b=h&&h[0]&&h[0][0].intent;n.mdcLinkItem.setHref(b);if(n.payload.semanticPrimaryActions&&n.payload.semanticPrimaryActions.some(e=>e!==null)){const{primaryIntentFound:e}=l.findPrimaryActionWithinIntents(n.payload.semanticPrimaryActions,n.payload);r=e?e.intent??"":undefined}return C._RemoveTitleLinkFromTargets.bind(t)(n.mdcLink,[n.mdcLinkItem],n.titleHasLink,r)};C._removeEmptyLinkItem=function(e){return e.filter(e=>e!==undefined)};C._checkImplicitSemanticObjectMapping=function(e,t,n,i){if(!t){return}const a=i.getController()._intentBasedNavigation.removeSensitiveData(n.getObject(),i.getModel().getMetaModel().getMetaPath(n?.getPath()||""),i.getModel().getMetaModel());if(Object.keys(a)?.includes(t)){e.semanticObjects?.forEach(n=>{const i=e.semanticObjectMappings.filter(e=>e.semanticObject===n);if(!i.length){e.semanticObjectMappings.push({semanticObject:n,items:[{key:t,value:n}]})}})}};C.modifyLinkItems=async function(t,n,i){if(i.length!==0){this.payload=t.getPayload();const n=C.calculatePayloadWithDynamicSemanticObjectsResolved(t);const a=s.getTargetView(t);const c=s.getAppComponent(a);const o=await l.checkPrimaryActions(n,true,c);const r=o.hasTitleLink;const m=c.getShellServices();if(!m.hasUShell()){e.error("QuickViewDelegate: Cannot retrieve the shell services");return Promise.reject()}const d=a.getModel().getMetaModel();let u=t.getBindingContext();try{const e=c.getNavigationService();const s=a.getController();let o,l;u=C._getLineContext(a,u);const p=d.getMetaPath(u?.getPath()||"");l=u?.getObject();if(u){const e=this.payload?.dataFieldPropPath;const t=[];C._checkImplicitSemanticObjectMapping(n,e,u,a);this.payload.semanticObjectMappings.forEach(e=>{e.items.forEach(e=>{t.push(e.key)})});if(e){t.push(e)}l=s._intentBasedNavigation.processSemanticAttributes(u,l,t);l=s._intentBasedNavigation.removeSensitiveData(l,p,d);l=s._intentBasedNavigation.prepareContextForExternalNavigation(l,u)}o=e.mixAttributesAndSelectionVariant(l.semanticAttributes,{});o=C._setFilterContextUrlForSelectionVariant(a,o,e);C._removeTechnicalParameters(o);const g=undefined;let f;i=C._removeEmptyLinkItem(i);for(const a in i){f=await C._getLinkItemWithNewParameter({shellServices:m,navigationService:e},this,{mdcLink:t,payload:n,titleHasLink:r,mdcLinkItem:i[a],propertiesWithoutConflict:l.propertiesWithoutConflict},g,o);if(f===true&&i.length>1){i[a]=undefined}}return C._removeEmptyLinkItem(i)}catch(t){e.error("Error while getting the navigation service",t);return[]}}else{return i}};C.beforeNavigationCallback=async function(e,t){const n=t.getSource(),i=n.getHref(),a=await O.getServiceAsync("URLParsing"),o=i&&a.parseShellHash(i);c.storeControlRefreshStrategyForHash(n,o);const r=s.getTargetView(e);const l=s.getAppComponent(r);const m=l.getNavigationService();const d=n.getHref();const u=a.parseShellHash(d);m.navigate(u&&u.semanticObject,u&&u.action,u&&u.params);return Promise.resolve(false)};C._removeTechnicalParameters=function(e){e.removeSelectOption("@odata.context");e.removeSelectOption("@odata.metadataEtag");e.removeSelectOption("SAP__Messages")};C._getSemanticObjectCustomDataValue=function(e,t){let n,i;for(const a of e){n=a.getKey();i=a.getValue();t[n]={value:i}}};C._isDynamicPath=function(e){const t=_(e);if(t._type==="EmbeddedBinding"||t._type==="EmbeddedExpressionBinding"||t._type==="PathInModel"){return true}else{return false}};C._updatePayloadWithResolvedSemanticObjectValue=function(e,t){switch(typeof t){case"string":e.semanticObjectsResolved?.push(t);e.semanticObjects.push(t);break;case"object":for(const n in t){e.semanticObjectsResolved?.push(t[n]);e.semanticObjects.push(t[n])}break;default:}};C._createNewPayloadWithDynamicSemanticObjectsResolved=function(e,t,n){let i;const a=function(e,t){return Object.keys(e).find(n=>e[n]===t)};for(const s in e.semanticObjects){i=e.semanticObjects[s];if(C._isDynamicPath(i)){const s=e.qualifiers&&a(e.qualifiers,i);const c=s&&t[s].value;C._updatePayloadWithResolvedSemanticObjectValue(n,c)}else{n.semanticObjects.push(i)}}};C._updateSemanticObjectsForMappings=function(e,t,n){t.semanticObjectMappings.forEach(function(t){if(t.semanticObject&&C._isDynamicPath(t.semanticObject)){t.semanticObject=n.semanticObjects[e.semanticObjects.indexOf(t.semanticObject)]}})};C._updateSemanticObjectsUnavailableActions=function(e,t,n){let i;t.forEach(function(t){if(t?.semanticObject&&C._isDynamicPath(t.semanticObject)){i=e.semanticObjects.findIndex(function(e){return e===t.semanticObject});if(i!==undefined){t.semanticObject=n.semanticObjects[i]}}})};C._removeEmptySemanticObjectsMappings=function(e){for(let t=0;t<e.semanticObjectMappings.length;t++){if(e.semanticObjectMappings[t]&&e.semanticObjectMappings[t].semanticObject===undefined){e.semanticObjectMappings.splice(t,1)}}};C._setPayloadWithDynamicSemanticObjectsResolved=function(e,n){let i;if(n.semanticObjectsResolved&&n.semanticObjectsResolved.length>0){i={qualifiers:e.qualifiers,entityType:e.entityType,dataField:e.dataField,contact:e.contact,contextPath:e.contextPath,navigationPath:e.navigationPath,propertyPathLabel:e.propertyPathLabel,dataFieldPropPath:e.dataFieldPropPath,semanticObjectMappings:t(e.semanticObjectMappings),semanticObjectUnavailableActions:[],semanticObjects:n.semanticObjects};C._updateSemanticObjectsForMappings(e,i,n);const a=t(e.semanticObjectUnavailableActions);C._updateSemanticObjectsUnavailableActions(e,a,i);i.semanticObjectUnavailableActions=a;C._removeEmptySemanticObjectsMappings(i);return i}else{return{}}};C._getPayloadWithDynamicSemanticObjectsResolved=function(e,t){let n;const i={};const a={semanticObjects:[],semanticObjectsResolved:[],semanticObjectMappings:[],semanticObjectUnavailableActions:[],qualifiers:{}};if(e.semanticObjects){if(t&&t.length>0){C._getSemanticObjectCustomDataValue(t,i);C._createNewPayloadWithDynamicSemanticObjectsResolved(e,i,a);n=C._setPayloadWithDynamicSemanticObjectsResolved(e,a);return n}}else{return undefined}};C._updatePayloadWithSemanticAttributes=function(t,n,a,s,c){t.forEach(function(t){if(n){n.addContextObject(t,a)}s[t]={};for(const o in a){let r=null,l=null;if(n){r=n.getSemanticObjectAttribute(t,o);if(!r){r=n.createAttributeStructure();n.addSemanticObjectAttribute(t,o,r)}}if(a[o]===undefined||a[o]===null){if(r){r.transformations.push({value:undefined,description:"ℹ Undefined and null values have been removed in SimpleLinkDelegate."})}continue}if(i(a[o])){if(c&&c[t]){const e=Object.keys(c[t]);let n,i,r,l;for(const m of e){l=m;if(l.indexOf(o)===0){n=c[t][l];i=l.split("/")[l.split("/").length-1];r=a[o][i];if(n&&i&&r){s[t][n]=r}}}}if(r){r.transformations.push({value:undefined,description:"ℹ Plain objects has been removed in SimpleLinkDelegate."})}continue}const m=c&&c[t]&&c[t][o]?c[t][o]:o;if(r&&o!==m){l={value:undefined,description:`ℹ The attribute ${o} has been renamed to ${m} in SimpleLinkDelegate.`,reason:`🔴 A com.sap.vocabularies.Common.v1.SemanticObjectMapping annotation is defined for semantic object ${t} with source attribute ${o} and target attribute ${m}. You can modify the annotation if the mapping result is not what you expected.`}}if(s[t][m]){e.error(`SimpleLinkDelegate: The attribute ${o} can not be renamed to the attribute ${m} due to a clash situation. This can lead to wrong navigation later on.`)}s[t][m]=a[o];if(r){if(l){r.transformations.push(l);const e=n.createAttributeStructure();e.transformations.push({value:a[o],description:`ℹ The attribute ${m} with the value ${a[o]} has been added due to a mapping rule regarding the attribute ${o} in SimpleLinkDelegate.`});n.addSemanticObjectAttribute(t,m,e)}}}})};C.calculatePayloadWithDynamicSemanticObjectsResolved=function(e){const t=e?.getPayload();const n=e&&this._fetchLinkCustomData(e);const i=C._getPayloadWithDynamicSemanticObjectsResolved(t,n);return i?i:t};C._calculateSemanticAttributes=function(e,t,n,i){const a=e.getObject();const c=C.calculatePayloadWithDynamicSemanticObjectsResolved(i);const o=C._getSemanticObjects(c);if(!o.length){return{payload:c,results:{}}}const r={};const l=s.getTargetView(i);const m=c?.dataFieldPropPath;C._checkImplicitSemanticObjectMapping(c,m,e,l);const d=C._convertSemanticObjectMapping(C._getSemanticObjectMappings(c));C._updatePayloadWithSemanticAttributes(o,n,a,r,d);return{payload:c,results:r}};C.checkPrimaryActionForHash=function(e,t,n){return t.some(t=>{let i=e.constructShellHash({target:{shellHash:t.intent}});if(i.includes("?")){i=i.substring(0,i.indexOf("?"))}return`${n.semanticObject}-${n.action}`===i})};C._retrieveNavigationTargets=async function(t,n,i,a,s){if(!i.semanticObjects){return Promise.resolve([])}const c=i.semanticObjects;const o={ownNavigation:undefined,availableActions:[]};let r=0;return p.load({name:"sap.ui.fl"}).then(async()=>new Promise(d=>{sap.ui.require(["sap/ui/fl/Utils"],async u=>{const p=u.getAppComponentForControl(s===undefined?this.oControl:s);const g=p?p.getShellServices():null;if(!g){d(o.availableActions,o.ownNavigation);return}if(!g?.hasUShell()){e.error("SimpleLinkDelegate: Service 'CrossApplicationNavigation' or 'URLParsing' could not be obtained");d(o.availableActions,o.ownNavigation)}const f=c.map(function(e){return{semanticObject:e,params:n?n[e]:undefined,appStateKey:t,sortResultsBy:"text"}});try{const e=await g.getLinks(f);let t=false;for(const n of e){if(n.length>0){t=true;break}if(t){break}}if(!e||!e.length||!t){d(o.availableActions,o.ownNavigation)}const n=C._getSemanticObjectUnavailableActions(i);const s=C._convertSemanticObjectUnavailableAction(n);let u=m._fnFixHashQueryString(p.getShellServices().getHash());if(u){u+="?"}const h=function(e,t){return!!s&&!!s[e]&&s[e].includes(t)};const b=(await l._getPrimaryIntents(p,i&&i.semanticObjects)).filter(Boolean);const y=function(e){const t=g.parseShellHash(e.intent);if(h(t.semanticObject,t.action)){return}const n=`#${g.constructShellHash({target:{shellHash:e.intent}})}`;if(e.intent&&e.intent.indexOf(u)===0){o.ownNavigation=new v({href:n,text:e.text});return}const i=new v({key:t.semanticObject&&t.action?`${t.semanticObject}-${t.action}`:undefined,text:e.text,description:undefined,href:n,icon:undefined,initiallyVisible:e.tags&&e.tags.includes("superiorAction")});if(i.getProperty("initiallyVisible")){if(!C.checkPrimaryActionForHash(g,b,t)){r++}}o.availableActions.push(i);if(a){a.addSemanticObjectIntent(t.semanticObject,{intent:i.getHref(),text:i.getText()})}};for(let t=0;t<c.length;t++){e[t].forEach(y)}if(r===0){for(let e=0;e<o.availableActions.length;e++){if(e<this.getConstants().iLinksShownInPopup){o.availableActions[e].setProperty("initiallyVisible",true)}else{break}}}d(o.availableActions,o.ownNavigation)}catch(t){e.error("SimpleLinkDelegate: '_retrieveNavigationTargets' failed executing getLinks method");d(o.availableActions,o.ownNavigation)}})}))};C._getSemanticObjects=function(e){return e.semanticObjects?e.semanticObjects:[]};C._getSemanticObjectUnavailableActions=function(e){const t=[];if(e.semanticObjectUnavailableActions){e.semanticObjectUnavailableActions.forEach(function(e){t.push(new k({semanticObject:e.semanticObject,actions:e.actions}))})}return t};C._getSemanticObjectMappings=function(e){const t=[];let n=[];if(e.semanticObjectMappings){e.semanticObjectMappings.forEach(function(e){n=[];if(e.items){e.items.forEach(function(e){n.push(new S({key:e.key,value:e.value}))})}t.push(new j({semanticObject:e.semanticObject,items:n}))})}return t};C._convertSemanticObjectMapping=function(e){if(!e.length){return undefined}const t={};e.forEach(e=>{if(!e.getSemanticObject()){throw Error(`SimpleLinkDelegate: 'semanticObject' property with value '${e.getSemanticObject()}' is not valid`)}t[e.getSemanticObject()]=Object.fromEntries(e.getItems().map(e=>[e.getKey(),e.getValue()]))});return t};C._convertSemanticObjectUnavailableAction=function(e){let t;let n;let i=[];if(!e.length){return undefined}const a={};e.forEach(function(e){t=e.getSemanticObject();if(!t){throw Error(`SimpleLinkDelegate: 'semanticObject' property with value '${t}' is not valid`)}i=e.getActions();if(a[t]===undefined){a[t]=i}else{n=a[t];i.forEach(function(e){n.push(e)});a[t]=n}});return a};C.fetchPopoverTitle=async function(e,t){const n="";if(!e||!t){return{sTitle:n,oLabelledByControl:undefined}}const i=C?._getLabelledByControl(t);return Promise.resolve({sTitle:n,oLabelledByControl:i})};return C},false);
//# sourceMappingURL=QuickViewDelegate.js.map