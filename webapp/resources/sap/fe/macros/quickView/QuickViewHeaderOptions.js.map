{"version":3,"file":"QuickViewHeaderOptions.js","names":["QuickViewHeaderOptions","_dec","defineUI5Class","_dec2","property","type","_dec3","_dec4","_dec5","_dec6","_dec7","defineReference","_class","_class2","_BuildingBlock","props","others","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","visible","_exports","_inheritsLoose","_proto","prototype","onMetadataAvailable","_ownerComponent","contextObject","getDataModelObjectForMetaPath","metaPath","contextPath","targetObject","isEntityType","entityType","headerInfo","annotations","UI","HeaderInfo","isDataField","convertedDataField","dataFieldValue","getDataModelObjectPathForValue","targetEntityType","content","createContent","setHeaderDisplayParametersForDataField","IconUrl","icon","fallbackIcon","undefined","title","getTextBinding","displayMode","getDisplayMode","description","Label","compileExpression","Value","$target","Common","setHeaderDisplayParametersForEntityType","iconExpression","ImageUrl","getExpressionFromAnnotation","TypeImageUrl","iconExpressionCompiled","IsNaturalPerson","valueOf","dataModelPath","getDataModelObjectPath","Title","headerTitle","enhanceDataModelPath","path","titleExpression","Description","headerDescription","headerExpression","_type","modelName","getSemanticObjectsPrimaryActions","async","semanticPayload","FieldHelper","checkPrimaryActions","getAppComponent","primaryAction","getPrimaryAction","titleLink","setupTitle","avatar","_jsx","Avatar","class","src","displayShape","AvatarShape","Circle","Square","hLayout","HorizontalLayout","ref","horizontalLayout","children","isInitialized","VBox","Link","text","href","emphasized","level","coreLibrary","TitleLevel","H3","wrapping","Text","maxLines","vLayout","_jsxs","VerticalLayout","current","addContent","BuildingBlock","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./QuickViewHeaderOptions.tsx"],"sourcesContent":["import type { EntityType, Property } from \"@sap-ux/vocabularies-types\";\nimport type * as Edm from \"@sap-ux/vocabularies-types/Edm\";\nimport type {\n\tDataField,\n\tDataFieldForAction,\n\tDataFieldForIntentBasedNavigation,\n\tDataFieldTypes,\n\tDataFieldWithNavigationPath,\n\tDataFieldWithUrl,\n\tHeaderInfoType\n} from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport type { BindingToolkitExpression } from \"sap/fe/base/BindingToolkit\";\nimport { compileExpression, getExpressionFromAnnotation, type CompiledBindingToolkitExpression } from \"sap/fe/base/BindingToolkit\";\nimport type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { defineReference, defineUI5Class, property } from \"sap/fe/base/ClassSupport\";\nimport type { Ref } from \"sap/fe/base/jsx-runtime/jsx\";\nimport type TemplateComponent from \"sap/fe/core/TemplateComponent\";\nimport BuildingBlock from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport { isDataField } from \"sap/fe/core/converters/annotations/DataField\";\nimport { isEntityType } from \"sap/fe/core/helpers/TypeGuards\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { enhanceDataModelPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { getDisplayMode } from \"sap/fe/core/templating/UIFormatters\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport { getDataModelObjectPathForValue, getTextBinding } from \"sap/fe/macros/field/FieldTemplating\";\nimport type { LinkDelegatePayload } from \"sap/fe/macros/quickView/QuickViewDelegate\";\nimport Avatar from \"sap/m/Avatar\";\nimport AvatarShape from \"sap/m/AvatarShape\";\nimport Link from \"sap/m/Link\";\nimport Text from \"sap/m/Text\";\nimport Title from \"sap/m/Title\";\nimport VBox from \"sap/m/VBox\";\nimport coreLibrary from \"sap/ui/core/library\";\nimport HorizontalLayout from \"sap/ui/layout/HorizontalLayout\";\nimport VerticalLayout from \"sap/ui/layout/VerticalLayout\";\n\n@defineUI5Class(\"sap.fe.macros.quickView.QuickViewHeaderOptions\")\nexport default class QuickViewHeaderOptions extends BuildingBlock {\n\t@property({ type: \"string\" })\n\tpublic contextPath?: string;\n\n\t@property({ type: \"string\" })\n\tpublic metaPath?: string;\n\n\t@property({ type: \"object\" })\n\tpublic semanticPayload?: LinkDelegatePayload;\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\tid?: string;\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\ttitleLink?: string;\n\n\t@defineReference()\n\thorizontalLayout!: Ref<HorizontalLayout>;\n\n\tvisible = true;\n\n\tprivate entityType?: EntityType;\n\n\tprivate dataFieldValue?: DataModelObjectPath<Property>;\n\n\tprivate convertedDataField?:\n\t\t| DataField\n\t\t| DataFieldForAction\n\t\t| DataFieldForIntentBasedNavigation\n\t\t| DataFieldWithUrl\n\t\t| DataFieldWithNavigationPath;\n\n\tprivate headerInfo: HeaderInfoType | undefined;\n\n\tprivate icon: CompiledBindingToolkitExpression | Edm.String | undefined;\n\n\tprivate fallbackIcon: CompiledBindingToolkitExpression | undefined;\n\n\tprivate title: BindingToolkitExpression<string> | CompiledBindingToolkitExpression | undefined;\n\n\tprivate description: BindingToolkitExpression<string> | CompiledBindingToolkitExpression | Edm.String | undefined;\n\n\tpublic isInitialized?: Promise<void>;\n\n\tconstructor(props: PropertiesOf<QuickViewHeaderOptions>, others?: PropertiesOf<QuickViewHeaderOptions>) {\n\t\tsuper(props, others);\n\t}\n\n\tonMetadataAvailable(_ownerComponent: TemplateComponent): void {\n\t\tsuper.onMetadataAvailable(_ownerComponent);\n\t\tconst contextObject = this.getDataModelObjectForMetaPath<\n\t\t\tDataField | DataFieldForAction | DataFieldForIntentBasedNavigation | DataFieldWithUrl | DataFieldWithNavigationPath\n\t\t>(this.metaPath ?? \"\", this.contextPath);\n\t\tconst targetObject = contextObject?.targetObject;\n\t\tif (isEntityType(targetObject)) {\n\t\t\tthis.entityType = targetObject;\n\t\t\tthis.headerInfo = this.entityType?.annotations.UI?.HeaderInfo;\n\t\t} else if (isDataField(targetObject)) {\n\t\t\tthis.convertedDataField = targetObject;\n\t\t\tthis.dataFieldValue = getDataModelObjectPathForValue(contextObject!);\n\t\t} else {\n\t\t\tthis.entityType = contextObject?.targetEntityType;\n\t\t\tthis.headerInfo = this.entityType?.annotations.UI?.HeaderInfo;\n\t\t}\n\t\tthis.content = this.createContent();\n\t}\n\n\tsetHeaderDisplayParametersForDataField(): void {\n\t\tif (this.dataFieldValue && this.convertedDataField) {\n\t\t\tif (this.convertedDataField?.IconUrl) {\n\t\t\t\tthis.icon = this.convertedDataField.IconUrl;\n\t\t\t\tthis.fallbackIcon = \"sap-icon://product\";\n\t\t\t} else {\n\t\t\t\tthis.icon = undefined;\n\t\t\t\tthis.fallbackIcon = undefined;\n\t\t\t}\n\t\t\tthis.title = getTextBinding(this.dataFieldValue, {\n\t\t\t\tdisplayMode: getDisplayMode(this.dataFieldValue)\n\t\t\t});\n\t\t\tthis.description = this.convertedDataField.Label\n\t\t\t\t? compileExpression(this.convertedDataField.Label)\n\t\t\t\t: compileExpression((this.convertedDataField as DataFieldTypes).Value?.$target?.annotations?.Common?.Label);\n\t\t}\n\t}\n\n\tsetHeaderDisplayParametersForEntityType(): void {\n\t\tif (this.entityType) {\n\t\t\tconst iconExpression = this.headerInfo?.ImageUrl\n\t\t\t\t? getExpressionFromAnnotation(this.headerInfo.ImageUrl)\n\t\t\t\t: getExpressionFromAnnotation(this.headerInfo?.TypeImageUrl);\n\t\t\tconst iconExpressionCompiled = compileExpression(iconExpression);\n\t\t\tthis.icon = iconExpressionCompiled === \"undefined\" ? undefined : iconExpressionCompiled;\n\t\t\tif (this.headerInfo?.TypeImageUrl) {\n\t\t\t\tthis.fallbackIcon = compileExpression(this.headerInfo.TypeImageUrl);\n\t\t\t} else if (this.entityType?.annotations.Common?.IsNaturalPerson?.valueOf() === true) {\n\t\t\t\tthis.fallbackIcon = \"sap-icon://person-placeholder\";\n\t\t\t} else {\n\t\t\t\tthis.fallbackIcon = \"sap-icon://product\";\n\t\t\t}\n\t\t\tconst dataModelPath = this.getDataModelObjectPath<\n\t\t\t\t| DataField\n\t\t\t\t| DataFieldForAction\n\t\t\t\t| DataFieldForIntentBasedNavigation\n\t\t\t\t| DataFieldWithUrl\n\t\t\t\t| DataFieldWithNavigationPath\n\t\t\t\t| EntityType\n\t\t\t>(this.metaPath);\n\t\t\tif (dataModelPath && isDataField(this.headerInfo?.Title) && this.headerInfo?.Title.Value) {\n\t\t\t\tconst headerTitle = enhanceDataModelPath<Property>(dataModelPath, this.headerInfo.Title?.Value.path);\n\t\t\t\tif (headerTitle.targetObject) {\n\t\t\t\t\tconst titleExpression = getTextBinding(headerTitle, {\n\t\t\t\t\t\tdisplayMode: getDisplayMode(headerTitle)\n\t\t\t\t\t});\n\t\t\t\t\tthis.title = titleExpression !== \"{}\" ? titleExpression : undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (dataModelPath && isDataField(this.headerInfo?.Description) && this.headerInfo?.Description.Value) {\n\t\t\t\tconst headerDescription = enhanceDataModelPath<Property>(dataModelPath, this.headerInfo.Description?.Value.path);\n\t\t\t\tconst headerExpression =\n\t\t\t\t\theaderDescription.targetObject &&\n\t\t\t\t\tgetTextBinding(headerDescription, {\n\t\t\t\t\t\tdisplayMode: getDisplayMode(headerDescription)\n\t\t\t\t\t});\n\t\t\t\tthis.description =\n\t\t\t\t\theaderDescription.targetObject === undefined\n\t\t\t\t\t\t? compileExpression({ _type: \"PathInModel\", modelName: \"semantic\", path: \"propertyPathLabel\" })\n\t\t\t\t\t\t: headerExpression;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync getSemanticObjectsPrimaryActions(): Promise<void> {\n\t\tif (this.semanticPayload && (await FieldHelper.checkPrimaryActions(this.semanticPayload, false, this.getAppComponent()!))) {\n\t\t\tconst primaryAction = FieldHelper.getPrimaryAction(this.semanticPayload);\n\t\t\tthis.titleLink = primaryAction;\n\t\t}\n\t\tthis.setupTitle();\n\t}\n\n\tcreateContent(): VBox {\n\t\tlet avatar;\n\t\tthis.setHeaderDisplayParametersForDataField();\n\t\tthis.setHeaderDisplayParametersForEntityType();\n\n\t\tif (this.icon && this.fallbackIcon) {\n\t\t\tavatar = (\n\t\t\t\t<Avatar\n\t\t\t\t\tclass=\"sapMQuickViewThumbnail sapUiTinyMarginEnd\"\n\t\t\t\t\tsrc={this.icon}\n\t\t\t\t\tdisplayShape={\n\t\t\t\t\t\tthis.entityType?.annotations.Common?.IsNaturalPerson?.valueOf() === true ? AvatarShape.Circle : AvatarShape.Square\n\t\t\t\t\t}\n\t\t\t\t\tfallbackIcon={this.fallbackIcon}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tconst hLayout = (\n\t\t\t<HorizontalLayout class=\"sapUiSmallMarginBottom sapMQuickViewPage sapFeQuickViewFullWidth\" ref={this.horizontalLayout}>\n\t\t\t\t{avatar}\n\t\t\t</HorizontalLayout>\n\t\t);\n\t\tthis.isInitialized = this.getSemanticObjectsPrimaryActions();\n\t\treturn <VBox>{hLayout}</VBox>;\n\t}\n\n\tsetupTitle(): void {\n\t\tlet title;\n\t\tif (this.title) {\n\t\t\tif (this.titleLink) {\n\t\t\t\ttitle = <Link text={this.title} href={this.titleLink} emphasized=\"true\" />;\n\t\t\t} else {\n\t\t\t\ttitle = <Title text={this.title} level={coreLibrary.TitleLevel.H3} wrapping=\"true\" />;\n\t\t\t}\n\t\t}\n\t\tconst description = this.description ? <Text text={this.description} maxLines={1} /> : undefined;\n\t\tconst vLayout = (\n\t\t\t<VerticalLayout>\n\t\t\t\t{title}\n\t\t\t\t{description}\n\t\t\t</VerticalLayout>\n\t\t);\n\t\tthis.horizontalLayout.current?.addContent(vLayout);\n\t}\n}\n"],"mappings":"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","ignoreList":[]}