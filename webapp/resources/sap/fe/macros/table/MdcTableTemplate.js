/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/base/BindingToolkit","sap/fe/core/CommonUtils","sap/fe/core/controls/CommandExecution","sap/fe/core/controls/FormElementWrapper","sap/fe/core/converters/ManifestSettings","sap/fe/core/converters/MetaModelConverter","sap/fe/core/converters/annotations/DataField","sap/fe/core/converters/controls/Common/table/StandardActions","sap/fe/core/helpers/BindingHelper","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/StableIdHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/UIFormatters","sap/fe/macros/ActionCommand","sap/fe/macros/CommonHelper","sap/fe/macros/Field","sap/fe/macros/MultiValueField","sap/fe/macros/TSXUtils","sap/fe/macros/draftIndicator/DraftIndicator","sap/fe/macros/field/FieldHelper","sap/fe/macros/field/FieldTemplating","sap/fe/macros/internal/helpers/ActionHelper","sap/fe/macros/internal/helpers/TableTemplating","sap/fe/macros/situations/SituationsIndicator","sap/fe/macros/table/ActionsTemplating","sap/fe/macros/table/QuickFilterSelector","sap/fe/macros/table/SlotColumn","sap/fe/macros/table/TableHelper","sap/fe/macros/table/uploadTable/UploadTableTemplate","sap/m/FlexItemData","sap/m/HBox","sap/m/Label","sap/m/Menu","sap/m/MenuItem","sap/m/ObjectStatus","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/VBox","sap/m/library","sap/m/plugins/CellSelector","sap/m/plugins/ContextMenuSetting","sap/m/plugins/CopyProvider","sap/m/plugins/DataStateIndicator","sap/ui/core/Lib","sap/ui/core/library","sap/ui/fl/variants/VariantManagement","sap/ui/mdc/Table","sap/ui/mdc/actiontoolbar/ActionToolbarAction","sap/ui/mdc/enums/TableP13nMode","sap/ui/mdc/enums/TableRowActionType","sap/ui/mdc/p13n/PersistenceProvider","sap/ui/mdc/table/Column","sap/ui/mdc/table/CreationRow","sap/ui/mdc/table/DragDropConfig","sap/ui/mdc/table/GridTableType","sap/ui/mdc/table/ResponsiveColumnSettings","sap/ui/mdc/table/ResponsiveTableType","sap/ui/mdc/table/RowActionItem","sap/ui/mdc/table/RowSettings","sap/ui/mdc/table/TreeTableType","../MicroChart","../field/FieldFormatOptions","sap/fe/base/jsx-runtime/jsx","sap/fe/base/jsx-runtime/jsxs"],function(e,t,n,a,o,i,r,l,s,d,c,u,p,f,b,m,g,h,v,C,y,T,D,P,x,M,O,I,A,w,S,E,F,B,k,R,L,N,U,j,H,_,V,$,G,z,q,W,K,X,Q,J,Y,Z,ee,te,ne,ae,oe,ie,re,le,se,de,ce,ue){"use strict";var pe={};var fe=q.Priority;var be=H.ObjectMarkerVisibility;var me=S.getUploadPlugin;var ge=O.getTableContextMenuTemplate;var he=O.getTableActionsTemplate;var ve=x.buildExpressionForHeaderVisible;var Ce=D.getVisibleExpression;var ye=D.getDraftIndicatorVisibleBinding;var Te=C.createCustomDatas;var De=C.createCustomData;var Pe=m.getCommandExecutionForAction;var xe=b.isMultiValueField;var Me=f.isPathUpdatable;var Oe=f.enhanceDataModelPath;var Ie=p.isSingleton;var Ae=p.isAnnotationOfType;var we=p.isAnnotationOfTerm;var Se=u.generate;var Ee=d.singletonPathVisitor;var Fe=d.UI;var Be=s.StandardActionKeys;var ke=l.isDataFieldForAnnotation;var Re=l.isDataField;var Le=l.hasDataPointTarget;var Ne=r.getInvolvedDataModelObjects;var Ue=i.CreationMode;var je=t.pathInModel;var He=t.or;var _e=t.not;var Ve=t.isTruthy;var $e=t.isConstant;var Ge=t.ifElse;var ze=t.greaterThan;var qe=t.equal;var We=t.constant;var Ke=t.compileExpression;var Xe=t.and;function Qe(e,t,n,a){const o=t.getObject();switch(n){case"GridTable":return ce(ne,{rowCountMode:e.control.rowCountMode,rowCount:e.control.rowCount,selectionLimit:a,fixedColumnCount:e.control.frozenColumnCount,scrollThreshold:e.control.scrollThreshold,enableColumnFreeze:e.control.enableColumnFreeze});case"TreeTable":return ce(le,{rowCountMode:e.control.rowCountMode,rowCount:e.control.rowCount,fixedColumnCount:e.control.frozenColumnCount,scrollThreshold:e.control.scrollThreshold,enableColumnFreeze:e.control.enableColumnFreeze});default:return ce(oe,{showDetailsButton:true,detailsButtonSetting:[fe.Low,fe.Medium,fe.None],growingMode:o.$kind==="EntitySet"?"Scroll":undefined,popinLayout:e.control.popinLayout})}}function Je(e){return ce(G,{filter:e.dataStateIndicatorFilter,enableFiltering:true,dataStateChange:e.dataStateChange})}function Ye(e,t){const n=Me(e,{ignoreTargetCollection:true,authorizeUnresolvable:true,pathVisitor:(t,n)=>Ee(t,e.convertedTypes,n)});const a=Me(e,{authorizeUnresolvable:true,pathVisitor:(t,n)=>Ee(t,e.convertedTypes,n)});if(e.startingEntitySet===e.targetEntitySet){if(e.startingEntitySet.annotations.Common?.DraftRoot!==undefined){return Xe(n._type==="Unresolvable"?Ge($e(a),a,We(true)):n,t.control.isHierarchyParentNodeUpdatable)}else{return We(false)}}else{return Xe(n._type==="Unresolvable"?Ge($e(a),a,We(true)):n,Fe.IsEditable,t.control.isHierarchyParentNodeUpdatable)}}function Ze(e,t,n,o){const i=e.contentId;const r=e.tableDefinition;const l=e.tableDefinition.control.type;const s=t.handlerProvider;const d=[];const c=r.actions.find(e=>e.key===Be.Cut);if(c?.isTemplated==="true"&&l==="TreeTable"){d.push(ce(a,{execute:s.getCutHandler(false),command:"Cut",enabled:c.enabled}))}const u=r.actions.find(e=>e.key===Be.Copy);if(u?.isTemplated==="true"&&l==="TreeTable"){d.push(ce(a,{execute:s.getCopyHandler(false),command:"Copy",enabled:u.enabled}))}const p=r.actions.find(e=>e.key===Be.Paste);if(p?.visible!=="false"&&l==="TreeTable"){d.push(ce(a,{execute:s.getPasteHandler(false),command:"Paste",enabled:p?.enabled}))}const f=r.actions.find(e=>e.key===Be.Create);const b=r.actions.find(e=>e.key===Be.Delete);if(r.annotation.isInsertUpdateActionsTemplated&&f?.isTemplated==="true"&&r.control.nodeType===undefined&&r.control.enableUploadPlugin===false){d.push(ce(a,{execute:s.getCreateButtonPressHandler(false,false),visible:f.visible,enabled:f.enabled,command:"Create"}))}if(b?.isTemplated==="true"){d.push(ce(a,{execute:s.getDeleteButtonPressHandler(false),visible:b.visible,enabled:b.enabled,command:"DeleteEntry"}))}const m=r.actions.find(e=>e.key===Be.MoveUp);const g=r.actions.find(e=>e.key===Be.MoveDown);if(m&&g&&m.visible!=="false"&&g.visible!=="false"&&l==="TreeTable"){d.push(ce(a,{execute:s.getMoveUpDownHandler(true,false),command:"TableMoveElementUp",enabled:m.enabled}));d.push(ce(a,{execute:s.getMoveUpDownHandler(false,false),command:"TableMoveElementDown",enabled:g.enabled}))}for(const n in r.commandActions){const a=r.commandActions[n];const i=pt(n,a,false,t,o,r,e.contextObjectPath);if(i){d.push(i)}}if(n==="None"){d.push(ce(Y,{id:Se([i,"PersistenceProvider"]),for:i}))}d.push(ce(V,{scope:"Selection"}));if(r.control.enableUploadPlugin){d.push(me(r,i,s))}return d}pe.getDependents=Ze;function et(e,t,n,a){const o=[];if(e.displaySegmentedButton){const n=[];if(g.isDesktop()){n.push(ce(U,{tooltip:"{sap.fe.i18n>M_COMMON_HYBRID_SEGMENTED_BUTTON_ITEM_TOOLTIP}",icon:"sap-icon://chart-table-view"},"Hybrid"))}n.push(ce(U,{tooltip:"{sap.fe.i18n>M_COMMON_CHART_SEGMENTED_BUTTON_ITEM_TOOLTIP}",icon:"sap-icon://bar-chart"},"Chart"));n.push(ce(U,{tooltip:"{sap.fe.i18n>M_COMMON_TABLE_SEGMENTED_BUTTON_ITEM_TOOLTIP}",icon:"sap-icon://table-view"},"Table"));o.push(ce(X,{layoutInformation:'{ aggregationName: "end", alignment: "End" }',visible:"{= ${pageInternal>alpContentView} === 'Table' }",children:{action:ce(N,{id:Se([e.contentId,"SegmentedButton","TemplateContentView"]),select:t.handlerProvider.segmentedButtonPress,selectedKey:"{pageInternal>alpContentView}",children:{items:n}})}}))}o.push(...he(e,t,n,a));return o.length>0?o:undefined}function tt(e,t,n,a){const o=ce(ie,{type:"Navigation",press:a.rowPress,visible:e.annotation.row?.visible});return ce(re,{navigated:e.annotation.row?.rowNavigated,highlight:e.annotation.row?.rowHighlighting,highlightText:e.annotation.row?.rowHighlighting,children:{rowActions:t===J.Navigation?o:undefined}})}pe.getRowSettings=tt;function nt(e,t,n,a,o,i){const r=ge(e,t,o,n);if(a===J.Navigation&&!i){r.push(at(t.handlerProvider,e.contentId));r.push(ot(t.handlerProvider))}if(r.length>0){return ce(k,{itemSelected:t.handlerProvider.contextMenuItemSelected,children:{dependents:it(e.tableDefinition,t,e.contextObjectPath,o),items:r}})}return undefined}function at(e,t){return ce(R,{"core:require":"{API: 'sap/fe/macros/table/TableAPI'}",startsSection:true,id:Se([t,"ContextMenu","CollaborationManager"]),text:"{sap.fe.i18n>M_COMMON_TABLE_CONTEXT_MENU_SHARE_TO_COLLABORATION_MANAGER}",press:e.contextMenuShareToCollaborationManager,enabled:"{= ${internal>contextmenu/numberOfSelectedContexts} > 0}",visible:false})}function ot(e){const t=Xe(_e(Xe(je("/sessionOn","internal"),Fe.IsEditable)),_e(je("contextmenu/inactiveContext","internal")));return ce(R,{"core:require":"{API: 'sap/fe/macros/table/TableAPI'}",startsSection:true,text:"{sap.fe.i18n>M_COMMON_TABLE_CONTEXT_MENU_OPEN_IN_NEW_TAB}",press:e.contextMenuOpenInNewTab,enabled:ze(je("contextmenu/numberOfNavigableContexts","internal"),0),visible:t})}function it(e,t,n,o){const i=[];const r=e.control.type;const l=e.actions.find(e=>e.key===Be.Create);if(l?.isTemplated==="true"&&r==="TreeTable"){i.push(ce(a,{execute:t.handlerProvider.getCreateButtonPressHandler(true,false),command:"Create::ContextMenu",visible:l.visible,enabled:l.enabledForContextMenu}))}const s=e.actions.find(e=>e.key===Be.Cut);if(s?.isTemplated==="true"){i.push(ce(a,{execute:t.handlerProvider.getCutHandler(true),command:"Cut::ContextMenu",enabled:s.enabledForContextMenu}))}const d=e.actions.find(e=>e.key===Be.Copy);if(d?.isTemplated==="true"){i.push(ce(a,{execute:t.handlerProvider.getCopyHandler(true),command:"Copy::ContextMenu",enabled:d.enabledForContextMenu}))}const c=e.actions.find(e=>e.key===Be.Paste);if(c?.visible!=="false"&&r==="TreeTable"){i.push(ce(a,{execute:t.handlerProvider.getPasteHandler(true),command:"Paste::ContextMenu",enabled:c?.enabledForContextMenu}))}const u=e.actions.find(e=>e.key===Be.Delete);if(u?.isTemplated==="true"){i.push(ce(a,{execute:t.handlerProvider.getDeleteButtonPressHandler(true),visible:u.visible,enabled:u.enabledForContextMenu,command:"DeleteEntry::ContextMenu"}))}const p=e.actions.find(e=>e.key===Be.MoveUp);const f=e.actions.find(e=>e.key===Be.MoveDown);if(p&&f&&p.visible!=="false"&&f.visible!=="false"&&r==="TreeTable"){i.push(ce(a,{execute:t.handlerProvider.getMoveUpDownHandler(true,true),command:"TableMoveElementUp::ContextMenu",enabled:p.enabledForContextMenu}));i.push(ce(a,{execute:t.handlerProvider.getMoveUpDownHandler(false,true),command:"TableMoveElementDown::ContextMenu",enabled:f.enabledForContextMenu}))}for(const a in e.commandActions){const r=e.commandActions[a];const l=pt(a,r,true,t,o,e,n);if(l){i.push(l)}}return i.length>0?i:undefined}function rt(e,t,n,a){if(e==="Control"){return ce(W,{id:Se([t,"VM"]),showSetAsDefault:true,select:a.variantSelected,headerLevel:n,save:a.variantSaved,for:[t]})}return undefined}function lt(e){const t=e.tableDefinition.control.filters?.quickFilters;if(t){return ce(I,{id:Se([e.contentId,"QuickFilterContainer"]),paths:t.paths.map(e=>e.annotationPath),showCounts:t.showCounts})}return undefined}function st(e){const t=e.contextObjectPath;let n;if(e.tableDefinition.control.disableCopyToClipboard){n=We(false)}else if(e.tableDefinition.control.type==="TreeTable"){if(t.startingEntitySet===t.targetEntitySet){n=We(t.startingEntitySet.annotations.Common?.DraftRoot===undefined)}else{n=_e(Fe.IsEditable)}}else{n=We(true)}return ce($,{visible:n})}function dt(e){const t=e.tableDefinition.control.type;if(!e.tableDefinition.control.disableCopyToClipboard&&t&&["ResponsiveTable","GridTable","TreeTable"].includes(t)){return ce(_,{enabled:He(t!=="TreeTable",_e(Ye(e.contextObjectPath,e.tableDefinition))),rangeLimit:200})}return undefined}function ct(e,t){if(e.creationMode?.name===Ue.CreationRow){const n=e.tableDefinition.actions.find(e=>e.key===Be.CreationRow);if(n?.isTemplated){const a=Te([{key:"disableAddRowButtonForEmptyData",value:e.tableDefinition.control.disableAddRowButtonForEmptyData},{key:"customValidationFunction",value:e.tableDefinition.control.customValidationFunction}]);return ce(ee,{id:Se([e.contentId,Ue.CreationRow]),visible:n.visible,apply:t.getCreateButtonPressHandler(false,true),applyEnabled:n.enabled,children:{customData:a}})}}return undefined}function ut(e,t){if(e.tableDefinition.control.type==="TreeTable"){return ce(te,{enabled:Ke(Ye(e.contextObjectPath,e.tableDefinition)),dropPosition:e.tableDefinition.annotation.allowDropBetweenNodes===true?"OnOrBetween":"On",draggable:true,droppable:true,dragStart:t.dragStartDocument,dragEnter:t.dragEnterDocument,drop:t.dropDocument})}return undefined}function pt(e,t,n,a,o,i,r){const l=t.annotationPath?a.convertedMetadata.resolvePath(t.annotationPath).target:undefined;const s=t.annotationPath?g.getActionContext(a.metaModel.createBindingContext(t.annotationPath+"/Action")):undefined;const d=s?a.metaModel.createBindingContext(s):undefined;const c=d?Ne(d,o):undefined;const u=l?.ActionTarget?.isBound;const p=l?.ActionTarget?.annotations?.Core?.OperationAvailable?.valueOf()!==false;const f=t.type==="ForAction"?u!==true||p:true;const b=!n?t.enabled:t.enabledForContextMenu;if(f&&(!n||w.isActionShownInContextMenu(t,r))){const r=!n?t.command:t.command+"::ContextMenu";const d={onExecuteAction:a.handlerProvider.getDataFieldForActionButtonPressHandler(l,t,undefined,n),onExecuteIBN:a.handlerProvider.getDataFieldForIBNPressHandler(t,false),onExecuteManifest:a.handlerProvider.getManifestActionPressHandler(t,n),isIBNEnabled:b??w.isDataFieldForIBNEnabled({collection:o,tableDefinition:i},l,!!l.RequiresContext,l.NavigationAvailable,n),isActionEnabled:b??w.isDataFieldForActionEnabled(i,l.Action,!!u,s,t.enableOnSelect,c?.targetEntityType,n),isEnabled:b};return Pe(r,i.commandActions[e],d)}return undefined}function ft(e){const t=e.control.additionalRequiredModules??[];return`{TableRuntime: 'sap/fe/macros/table/TableRuntime', API: 'sap/fe/macros/table/TableAPI'${t.map((e,t)=>`, customModule${t+1}: '${e}'`).join("")}}`}function bt(e,t,n,a){if(t.isDraftIndicator){return ce(Z,{id:Se([e,"C","computedColumns","draftStatus"]),headerVisible:false,propertyKey:t.name,header:t.label,tooltip:t.tooltip,width:"3em",children:ce(y,{draftIndicatorType:be.IconOnly,contextPath:n.getPath(),usedInTable:true,usedInAnalyticalTable:a})})}else if(t.isSituationsIndicator){return ce(Z,{id:Se([e,"C","computedColumns","situationsIndicator"]),propertyKey:t.name,header:t.label,tooltip:t.tooltip,headerVisible:false,width:"4em",children:ce(M,{contextPath:n.getPath()})})}else{return undefined}}pe.getComputedColumn=bt;function mt(e,t,n){const a=typeof t.template==="string"&&!t.template?.startsWith("<")?ce(A,{templateId:t.template}):t.template;return ce(Z,{id:Se([e,"C",t.id]),propertyKey:t.name,width:t.width,hAlign:t.horizontalAlign,header:t.header,tooltip:t.tooltip,required:n?undefined:t.required,children:{extendedSettings:ce(ae,{importance:t.importance}),template:a}})}pe.getSlotColumn=mt;function gt(e,t){if(e.getObject("@com.sap.vocabularies.Common.v1.DraftRoot")&&e.getObject("./@com.sap.vocabularies.Common.v1.SemanticKey")&&t.formatOptions?.fieldGroupDraftIndicatorPropertyPath){return ce(o,{children:ce(y,{draftIndicatorType:be.IconAndText,contextPath:e.getPath(),visible:ye(t.formatOptions?.fieldGroupName),ariaLabelledBy:["this>ariaLabelledBy"]})})}return undefined}pe.getDraftIndicator=gt;function ht(e,t){if(e.getObject("./@com.sap.vocabularies.Common.v1.SemanticKey")&&t.formatOptions?.fieldGroupDraftIndicatorPropertyPath){return ce(L,{visible:t.formatOptions?.showErrorObjectStatus,class:"sapUiSmallMarginBottom",text:"{sap.fe.i18n>Contains_Errors}",state:"Error"})}return undefined}function vt(e){const t=Ne(e).targetObject;if(Re(t)&&t.Value?.$target?.type==="Edm.TimeOfDay"){return"short"}if(ke(t)&&Le(t)&&t.Target.$target?.Value.$target.type==="Edm.TimeOfDay"){return"short"}}function Ct(e,t,n,a,o,i,r,l,s,d){if(a?.name==="CreationRow"){let a;switch(o){case true:a="Display";break;case false:a="Editable";break;default:a=undefined;break}const c=r.getObject();const u=n==="ResponsiveTable"?"Overlay":undefined;const p={fieldMode:l,textLinesEdit:t.formatOptions?.textLinesEdit,textMaxLines:t.formatOptions?.textMaxLines===undefined?undefined:t.formatOptions?.textMaxLines,textMaxLength:t.formatOptions?.textMaxLength,textMaxCharactersDisplay:t.formatOptions?.textMaxCharactersDisplay,textExpandBehaviorDisplay:t.formatOptions?.textExpandBehaviorDisplay,textAlignMode:"Table",semanticKeyStyle:n==="ResponsiveTable"?"ObjectIdentifier":"Label",hasDraftIndicator:t.formatOptions?.hasDraftIndicator,fieldGroupDraftIndicatorPropertyPath:t.formatOptions?.fieldGroupDraftIndicatorPropertyPath,fieldGroupName:t.formatOptions?.fieldGroupName,showIconUrl:c?.Inline&&!!c?.IconUrl,ignoreNavigationAvailable:s??false,isCurrencyOrUnitAligned:true,dateTimeStyle:vt(r),reactiveAreaMode:u};return ce(h,{"core:require":"{TableRuntime: 'sap/fe/macros/table/TableRuntime'}",vhIdPrefix:Se([e,"TableValueHelp"]),editMode:a,contextPath:i.getPath(),metaPath:r.getPath(),wrap:n==="ResponsiveTable",change:d.fieldChangeInCreationRow,showErrorObjectStatus:t.formatOptions?.showErrorObjectStatus,children:{formatOptions:ce(de,{...p})}})}return undefined}function yt(e,t,n,a,o,i,r,l,s,d,c,u,p,f,b,m){const g=a.getObject();let v;switch(l){case true:v="Display";break;case false:v="Editable";break;default:v=undefined}if(t.control.enableUploadPlugin&&n.typeConfig?.className==="Edm.Stream"){v="Display"}const C=t.control.type==="ResponsiveTable"?"Overlay":undefined;const y={fieldMode:d,textLinesEdit:n.formatOptions?.textLinesEdit,textMaxLines:n.formatOptions?.textMaxLines===undefined?undefined:n.formatOptions?.textMaxLines,textMaxCharactersDisplay:n.formatOptions?.textMaxCharactersDisplay,textMaxLength:n.formatOptions?.textMaxLength,textExpandBehaviorDisplay:n.formatOptions?.textExpandBehaviorDisplay,textAlignMode:"Table",showEmptyIndicator:f,semanticKeyStyle:r==="ResponsiveTable"?"ObjectIdentifier":"Label",hasDraftIndicator:n.formatOptions?.hasDraftIndicator,fieldGroupDraftIndicatorPropertyPath:n.formatOptions?.fieldGroupDraftIndicatorPropertyPath,fieldGroupName:n.formatOptions?.fieldGroupName,showIconUrl:g?.Inline&&!!g?.IconUrl,ignoreNavigationAvailable:i??false,isAnalytics:i,forInlineCreationRows:s?.name==="InlineCreationRows",isCurrencyOrUnitAligned:true,compactSemanticKey:c===undefined?undefined:`${c}`,dateTimeStyle:vt(a),isAnalyticalAggregatedRow:t.control.analyticalConfiguration?.aggregationOnLeafLevel,reactiveAreaMode:C};return ce(h,{vhIdPrefix:Se([e,"TableValueHelp"]),editMode:v,contextPath:o.getPath(),metaPath:a.getPath(),textAlign:u,wrap:r==="ResponsiveTable",class:b,liveChange:m.fieldLiveChange,ariaLabelledBy:p?[p]:undefined,navigateAfterAction:n.isNavigable,showErrorObjectStatus:n.formatOptions?.showErrorObjectStatus,children:{formatOptions:ce(de,{...y})}})}pe.getMacroFieldTemplate=yt;function Tt(e,t,n,a,o,i,r){let l;let s;const d=t.tableDefinition;const c=t.tableDefinition.enableAnalytics;const u=t.tableDefinition.control.type;const p=t.readOnly;const f=t.creationMode;const b=t.fieldMode;const m=t.tableDefinition.control.isCompactType;const h=a.targetObject;if(Ae(h,"com.sap.vocabularies.UI.v1.DataFieldForAnnotation")&&(we(h.Target.$target,"com.sap.vocabularies.UI.v1.Chart")||we(h.Target.$target,"com.sap.vocabularies.UI.v1.PresentationVariant"))){const t=(u==="ResponsiveTable"?!n.settings?.showMicroChartLabel:undefined)??true;const a=u==="ResponsiveTable"?n.settings?.microChartSize??"XS":"XS";let r=i.getModel().createBindingContext(i.getPath(o.getObject("Target/$AnnotationPath")));r=i.getModel().createBindingContext(g.getNavigationContext(r));l=ce(se,{id:Se([e,h]),contextPath:r.getPath(),metaPath:o.getModel().createBindingContext(o.getPath()+"/Target/$AnnotationPath").getPath(),showOnlyChart:t,size:a??"XS",hideOnNoData:true,isAnalytics:c})}else if(Ae(h,"com.sap.vocabularies.UI.v1.DataField")&&xe(Oe(a,h.Value.path))){const e=Ke(Ge(He(p===true,Xe(Ve(Fe.IsInactive),f?.name==="InlineCreationRows")),We(true),Ge(qe(b,"nowrapper"),We(true),We(undefined))));if(e==="undefined"){l=ce(v,{contextPath:i.getPath(),metaPath:o.getPath(),useParentBindingCache:d.disableOwnRequestOnMVF})}else{l=ce(v,{contextPath:i.getPath(),metaPath:o.getPath(),readOnly:e,useParentBindingCache:d.disableOwnRequestOnMVF})}}else if(Ae(h,"com.sap.vocabularies.UI.v1.DataFieldForAnnotation")&&we(h.Target.$target,"com.sap.vocabularies.UI.v1.FieldGroup")){const t=h.Target.$target;const s=o.getModel().createBindingContext(o.getPath()+"/Target/$AnnotationPath/Data");const g=t.Data.length-1;const v=t.Data.map((t,o)=>{const l=s.getModel().createBindingContext(s.getPath()+"/"+o);const h=Ne(l);const v=T.computeLabelText(l.getObject(),{context:l});if(n.showDataFieldsLabel&&!!v){const t=z.getResourceBundleFor("sap.fe.macros");return ue(F,{visible:Ce(h),alignItems:T.buildExpressionForAlignItems(l.getObject("Target/$AnnotationPath/Visualization/$EnumMember")),children:[ce(B,{id:w.getFieldGroupLabelStableId(e,h),text:t.getText("HEADER_FORM_LABEL",[v]),class:"sapUiTinyMarginEnd",visible:Ce(h)}),ce(j,{children:{layoutData:ce(E,{growFactor:"1"}),items:yt(e,d,n,l,i,c,u,p,f,undefined,m,"Left",`${w.getColumnStableId(e,a)} ${w.getFieldGroupLabelStableId(e,h)}`,true,w.getMarginClass(l.getObject("Target/$AnnotationPath/Visualization/$EnumMember"),o===g),r)}})]})}else{return yt(e,d,n,l,i,c,u,p,f,b,m,undefined,w.getColumnStableId(e,a),false,w.getMarginClass(l.getObject("Target/$AnnotationPath/Visualization/$EnumMember"),o===g),r)}});const C=gt(i,n);if(C){v.push(C)}const y=ht(i,n);if(y){v.push(y)}l=ce(j,{visible:w.getVBoxVisibility(s.getObject(),n.FieldGroupHiddenExpressions,o.getObject()),children:{items:v}})}else{l=yt(e,d,n,o,i,c,u,p,f,b,m,undefined,undefined,false,undefined,r);s=Ct(e,n,u,f,p,i,o,b,c,r)}return{template:l,creationTemplate:s}}function Dt(e,t,a,o,i){let r=o.getModel().createBindingContext(a.annotationPath);if(!r){return undefined}r=o.getModel().createBindingContext(T.getDataFieldDefault(r));const l=Ne(r,o);const s=r?.getObject?.()??{};const d=Tt(e,t,a,l,r,o,i);const c=t.enableAutoColumnWidth??t.tableDefinition.control.enableAutoColumnWidth;const u=t.tableDefinition.control.widthIncludingColumnHeader;const p=t.tableDefinition.control.type;return ce(Z,{id:w.getColumnStableId(e,l),width:!n.isSmallDevice()||a.width?w.getColumnWidth({enableAutoColumnWidth:c,widthIncludingColumnHeader:u,tableType:p},a,s,w.getTextOnActionField(s,{context:r}),l,true,{title:r.getObject("Target/$AnnotationPath/Title")||"",description:r.getObject("Target/$AnnotationPath/Title")||""}):undefined,minWidth:n.isSmallDevice()?w.getColumnWidth({enableAutoColumnWidth:c,widthIncludingColumnHeader:u,tableType:p},a,s,w.getTextOnActionField(s,{context:r}),l,false,{title:r.getObject("Target/$AnnotationPath/Title")||"",description:r.getObject("Target/$AnnotationPath/Description")||""}):undefined,header:a.label||a.name,propertyKey:a.name,hAlign:a.horizontalAlign||T.getColumnAlignment(s,{collection:o}),headerVisible:w.setHeaderLabelVisibility(s,r.getObject("Target/$AnnotationPath/Data")),tooltip:a.tooltip,required:t.readOnly?undefined:a.required,children:{customData:De("showDataFieldsLabel",a.showDataFieldsLabel),extendedSettings:ce(ae,{importance:a.importance}),template:d.template,creationTemplate:d.creationTemplate}})}pe.getColumnTemplate=Dt;function Pt(t,n,a){const o=t.contentId;return t.tableDefinition.columns.map(i=>{if(i.availability==="Default"&&i.type==="Default"){e.error("Custom columns defined in the manifest are not supported when using a table building block.");throw new Error("Custom columns defined in the manifest are not supported when using a table building block.")}else if(i.availability==="Default"&&i.type==="Annotation"){return Dt(o,t,i,n,a)}else if(i.availability==="Default"&&i.type==="Slot"){return mt(o,i,t.readOnly)}else if(i.availability==="Default"&&i.type==="Computed"){return bt(o,i,n,t.tableDefinition.enableAnalytics)}return undefined}).filter(e=>e!==undefined)}function xt(){return"sap/fe/macros/table/designtime/Table.designtime"}function Mt(t){switch(t){case"Aggregate":return Q.Aggregate;case"Sort":return Q.Sort;case"Column":return Q.Column;case"Filter":return Q.Filter;case"Group":return Q.Group;default:e.error("Unknown P13n mode: "+t);return Q.Column}}function Ot(e,t){const n=e.tableDefinition.annotation?.row?.navigationInfo;const a=n?.routePath;let o=false;if(a){const e=t.appComponent.getRoutingService()._getTargetInformation(a);o=e?.options?.settings?.openInEditMode??false}const i=e.tableDefinition.control.type;const r=e.contextObjectPath;const l=(i==="TreeTable"||e.tableDefinition.enableAnalytics===true)&&r.startingEntitySet===r.targetEntitySet&&c.isObjectPathDraftSupported(r);const s=w.getDelegate(e.tableDefinition,e.isAlp===true,e.tableDefinition.annotation.entityName,l);const d=e.headerVisible??e.tableDefinition.control.headerVisible;const u=e.header??e.tableDefinition.annotation.title;const p=ve(u??"",e.tabTitle??"",!!d);const f=e.tableDefinition.actions.find(e=>e.key===Be.Paste);const b=t.convertedMetadata.resolvePath(e.tableDefinition.annotation.collection).target;const m=i==="TreeTable"?t.handlerProvider.tableContextChange:undefined;const g=w.getUiLineItemObject(t.metaPath,t.convertedMetadata);const h=e.tableDefinition.annotation.navigationPath;if(e.tableDefinition.annotation.collection.startsWith("/")&&Ie(r.startingEntitySet)){e.tableDefinition.annotation.collection=h}const v=t.metaModel.createBindingContext(e.tableDefinition.annotation.collection);const C=b.annotations.Common?.DraftRoot;const y=e.variantManagement??"None";const T=xt();let D;if(e.overrideRowPress){D=J.Navigation}D??=e.tableDefinition.annotation.row?.actionType==="Navigation"?J.Navigation:undefined;const x=e.tableDefinition.actions.find(e=>e.key===Be.Create)?.visible||true;const M=e.tableDefinition.annotation.updatablePropertyPath;let O;switch(e.personalization){case"false":O=undefined;break;case"true":O=[Q.Sort,Q.Column,Q.Filter];if(i==="ResponsiveTable"||e.tableDefinition.enableAnalytics===true){O=[...O,Q.Group]}break;case undefined:O=e.tableDefinition.annotation.p13nMode?.map(e=>Mt(e));break;default:if(i==="ResponsiveTable"||e.tableDefinition.enableAnalytics===true){O=e.personalization.split(",").map(e=>Mt(e.trim()))}else{const t=e.personalization.split(",").filter(e=>Mt(e.trim())!==Q.Group);O=t.length?t:undefined}}const I=P.getMultiSelectDisabledActions(g);const A=[{key:"kind",value:b._type},{key:"navigationPath",value:h},{key:"enableAnalytics",value:e.tableDefinition.enableAnalytics},{key:"creationMode",value:e.creationMode?.name},{key:"inlineCreationRowCount",value:e.tableDefinition.control.inlineCreationRowCount},{key:"showCreate",value:x},{key:"createAtEnd",value:e.creationMode?.createAtEnd},{key:"displayModePropertyBinding",value:e.readOnly},{key:"tableType",value:i},{key:"targetCollectionPath",value:v.getPath()},{key:"entityType",value:v.getPath()+"/"},{key:"metaPath",value:v.getPath()},{key:"hiddenFilters",value:e.tableDefinition.control.filters?.hiddenFilters},{key:"requestGroupId",value:"$auto.Workers"},{key:"segmentedButtonId",value:Se([e.contentId,"SegmentedButton","TemplateContentView"])},{key:"disableCopyToClipboard",value:e.tableDefinition.control.disableCopyToClipboard},{key:"draft",value:C},{key:"navigationAvailableMap",value:w.getNavigationAvailableMap(g)},{key:"actionsMultiselectDisabled",value:I.length>0?I.join(","):undefined},{key:"updatablePropertyPath",value:M||""},{key:"exportRequestSize",value:e.tableDefinition.control.exportRequestSize}];return ce(K,{"core:require":ft(e.tableDefinition),"fl:flexibility":e["fl:flexibility"],sortConditions:e.tableDefinition.annotation.sortConditions,groupConditions:e.tableDefinition.annotation.groupConditions,aggregateConditions:e.tableDefinition.annotation.aggregateConditions,"dt:designtime":T,id:e.contentId,busyIndicatorDelay:0,enableExport:e.tableDefinition.control.enableExport,delegate:JSON.parse(s),beforeOpenContextMenu:t.handlerProvider.beforeOpenContextMenu,autoBindOnInit:e.useBasicSearch||!e.filterBar,selectionMode:e.tableDefinition.annotation.selectionMode||"None",selectionChange:t.handlerProvider.selectionChange,showRowCount:e.tableDefinition.control.showRowCount,header:u,headerVisible:p,headerLevel:e.headerLevel,headerStyle:e.headerStyle,threshold:e.tableDefinition.control.threshold??e.tableDefinition.annotation.threshold,p13nMode:O,paste:t.handlerProvider.getPasteHandler(false),beforeExport:t.handlerProvider.beforeExport,class:e.tableDefinition.control.useCondensedTableLayout===true?"sapUiSizeCondensed":undefined,multiSelectMode:e.tableDefinition.control.multiSelectMode,showPasteButton:i==="TreeTable"?false:f?.visible,enablePaste:i==="TreeTable"?false:f?.enabled,modelContextChange:m,children:{customData:Te(A),dataStateIndicator:Je(t.handlerProvider),type:Qe(e.tableDefinition,v,i,e.tableDefinition.control.selectionLimit),dependents:Ze(e,t,y,v),actions:et(e,t,v,b),rowSettings:tt(e.tableDefinition,D,i,t.handlerProvider),contextMenu:nt(e,t,b,D,v,o),columns:Pt(e,v,t.handlerProvider),dragDropConfig:ut(e,t.handlerProvider),creationRow:ct(e,t.handlerProvider),variant:rt(y,e.contentId,e.headerLevel,t.handlerProvider),quickFilter:lt(e),copyProvider:st(e),cellSelector:dt(e)}})}pe.getMDCTableTemplate=Ot;return pe},false);
//# sourceMappingURL=MdcTableTemplate.js.map