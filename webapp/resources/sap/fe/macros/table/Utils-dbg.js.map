{"version":3,"names":["getHiddenFilters","oTable","aFilters","hiddenFilters","data","Array","isArray","paths","forEach","mPath","oSvFilters","CommonUtils","getFiltersFromAnnotation","annotationPath","concat","getExternalFilters","table","filters","quickFilter","getQuickFilter","getSelectedKey","getListBindingForCount","pageBindingContext","params","oDataModel","getModel","tableAPI","getParent","filterInfo","tableUtils","getFilterInfo","additionalFilters","getP13nFilters","bindingInfo","path","bindingPath","getRowCollectionPath","Filter","and","fireEvent","collectionBindingInfo","CollectionBindingInfoAPI","quickFilterKey","itemKey","listBindingPath","startsWith","getPath","listBinding","bindList","getBindingContext","stringFilters","fetchFilter","getContext","countBinding","bindProperty","$$groupId","batchGroupId","$filter","$search","search","normalizeSearchTerm","undefined","promiseValue","requestValue","submitBatch","value","destroy","getCountFormatted","iCount","oCountFormatter","NumberFormat","getIntegerInstance","groupingEnabled","format","ignoreProperties","oTableDefinition","getTableDefinition","aIgnoreProperties","enableAnalytics","enableBasicSearch","control","type","FilterUtils","getFilter","ignoredProperties","targetControl","oControl","p13nMode","getP13nMode","p13nProperties","includes","isA","getEnhancedFetchedPropertyInfos","filter","property","filterable","DelegateUtil","getCustomData","oControlProperty","propertiesMetadata","getAllFilterInfo","oIFilterInfo","findValuesForKeyRecursively","obj","key","list","push","children","Object","keys","child","findValues","isFilterEligibleForOptimisticBatch","mdcTable","filterBar","filtersFromTable","filtersConditions","getConditions","filtersConditionsPaths","tableRowBindingsInfoPath","metaModel","getMetaModel","filterPropertiesAsPotentiallySensitiveDataOrDateType","filtersPathsFromTable","getFiltersPathsFromTable","filtersPathsFromFilterBar","getFiltersPathsFromFilterBar","edmDateTypes","allFiltersPaths","potentiallySensitiveAnnotation","getObject","filtersAnnotationsPaths","filterPath","getReferencePathsForFilters","getFilters","filterResult","length","i","left","right","whenBound","_getOrCreateBoundPromiseInfo","promise","onTableBound","oBoundPromiseInfo","resolve","fnResolve","Promise","isBound","updateFiltersForExternalID","entityTypePath","condition","nestedFilters","externalIdPropPath","sPath","$Path"],"sourceRoot":".","sources":["Utils.ts"],"sourcesContent":["import CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type { PropertyInfo } from \"sap/fe/core/converters/controls/ListReport/FilterBar\";\nimport DelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport type { IFilterControl } from \"sap/fe/macros/filter/FilterUtils\";\nimport FilterUtils from \"sap/fe/macros/filter/FilterUtils\";\nimport type QuickFilterSelector from \"sap/fe/macros/table/QuickFilterSelector\";\nimport type TableAPI from \"sap/fe/macros/table/TableAPI\";\nimport type Control from \"sap/ui/core/Control\";\nimport NumberFormat from \"sap/ui/core/format/NumberFormat\";\nimport type MDCChart from \"sap/ui/mdc/Chart\";\nimport type FilterBar from \"sap/ui/mdc/FilterBar\";\nimport type Table from \"sap/ui/mdc/Table\";\nimport type { MDCTablePropertyInfo as TablePropertyInfo } from \"sap/ui/mdc/Table\";\nimport type { ConditionObject } from \"sap/ui/mdc/condition/Condition\";\nimport type Context from \"sap/ui/model/Context\";\nimport Filter from \"sap/ui/model/Filter\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport CollectionBindingInfoAPI from \"../CollectionBindingInfo\";\n\ntype FilterInfo = {\n\tfilters: Filter[];\n\tsearch: string;\n\tbindingPath: string;\n};\n\nexport type InternalBindingInfo = {\n\tparameters?: Record<string, string>;\n\tfilters: Filter[];\n\tsearch?: string | null;\n\tbindingPath?: string;\n};\n\nfunction getHiddenFilters(oTable: Control): Filter[] {\n\tlet aFilters: Filter[] = [];\n\tconst hiddenFilters = oTable.data(\"hiddenFilters\");\n\tif (hiddenFilters && Array.isArray(hiddenFilters.paths)) {\n\t\thiddenFilters.paths.forEach(function (mPath: { annotationPath: string }) {\n\t\t\tconst oSvFilters = CommonUtils.getFiltersFromAnnotation(oTable, mPath.annotationPath);\n\t\t\taFilters = aFilters.concat(oSvFilters);\n\t\t});\n\t}\n\treturn aFilters;\n}\n\n/**\n * Retrieves the external filters configured on the table.\n * @param table The table\n * @returns  The filters\n */\nfunction getExternalFilters(table: Table): Filter[] {\n\tlet filters: Filter[] = getHiddenFilters(table);\n\tconst quickFilter = table.getQuickFilter() as QuickFilterSelector;\n\tif (quickFilter) {\n\t\tfilters = filters.concat(CommonUtils.getFiltersFromAnnotation(table, quickFilter.getSelectedKey()));\n\t}\n\treturn filters;\n}\n\n/**\n * Retrieves the count of the OData list binding.\n * @param table The table used to get the initial OData list binding\n * @param pageBindingContext The binding context of the page\n * @param params Contains the following attributes\n * @param params.batchGroupId The groupId of the batch request\n * @param params.additionalFilters The additional filters to apply to the original OData list binding\n * @returns The count\n */\nasync function getListBindingForCount(\n\ttable: Table,\n\tpageBindingContext: Context | null | undefined,\n\tparams: { batchGroupId?: string; additionalFilters?: Filter[]; itemKey?: string }\n): Promise<number> {\n\tconst oDataModel = table.getModel() as ODataModel;\n\tconst tableAPI = table.getParent() as TableAPI;\n\tconst filterInfo = tableUtils.getFilterInfo(table);\n\tconst filters = (Array.isArray(params.additionalFilters) ? params.additionalFilters : [])\n\t\t.concat(filterInfo.filters)\n\t\t.concat(tableUtils.getP13nFilters(table));\n\tconst bindingInfo = {\n\t\tpath: filterInfo.bindingPath ? filterInfo.bindingPath : tableAPI.getRowCollectionPath(),\n\t\tfilters: new Filter({\n\t\t\tfilters: filters,\n\t\t\tand: true\n\t\t})\n\t};\n\ttable\n\t\t.getParent()\n\t\t?.fireEvent(\"beforeRebindTable\", {\n\t\t\tcollectionBindingInfo: new CollectionBindingInfoAPI(bindingInfo),\n\t\t\tquickFilterKey: params.itemKey\n\t\t});\n\n\t// Need to pass by a temporary ListBinding in order to get $filter query option (as string) thanks to fetchFilter of OdataListBinding\n\tconst listBindingPath =\n\t\tpageBindingContext && !bindingInfo.path.startsWith(\"/\") ? `${pageBindingContext.getPath()}/${bindingInfo.path}` : bindingInfo.path;\n\tconst listBinding = oDataModel.bindList(listBindingPath, table.getBindingContext() as Context, [], bindingInfo.filters);\n\tconst stringFilters: string[] = await (listBinding as ODataListBinding & { fetchFilter: Function }).fetchFilter(\n\t\tlistBinding.getContext()\n\t);\n\tconst countBinding = oDataModel.bindProperty(`${listBinding.getPath()}/$count`, listBinding.getContext(), {\n\t\t$$groupId: params.batchGroupId ?? \"$auto\",\n\t\t$filter: stringFilters[0],\n\t\t$search: filterInfo.search ? CommonUtils.normalizeSearchTerm(filterInfo.search) : undefined\n\t});\n\tconst promiseValue = countBinding.requestValue();\n\tif (params.batchGroupId && params.batchGroupId !== \"$auto\") {\n\t\toDataModel.submitBatch(params.batchGroupId);\n\t}\n\tconst value = await promiseValue;\n\tcountBinding.destroy();\n\tlistBinding.destroy();\n\treturn value;\n}\nfunction getCountFormatted(iCount: number | string): string {\n\tconst oCountFormatter = NumberFormat.getIntegerInstance({ groupingEnabled: true });\n\treturn oCountFormatter.format(iCount);\n}\nfunction getFilterInfo(oTable: Table, ignoreProperties?: string[]): InternalBindingInfo {\n\tconst oTableDefinition = (oTable.getParent() as TableAPI).getTableDefinition();\n\tlet aIgnoreProperties: string[] = ignoreProperties || [];\n\n\tif (oTableDefinition.enableAnalytics) {\n\t\tif (!oTableDefinition.enableBasicSearch) {\n\t\t\t// Search isn't allow as a $apply transformation for this table\n\t\t\taIgnoreProperties = aIgnoreProperties.concat([\"search\"]);\n\t\t}\n\t\taIgnoreProperties = aIgnoreProperties.concat([\"$editState\"]);\n\t} else if (oTableDefinition.control.type === \"TreeTable\") {\n\t\taIgnoreProperties = aIgnoreProperties.concat([\"$editState\"]);\n\t}\n\treturn FilterUtils.getFilterInfo(oTable.getFilter(), {\n\t\tignoredProperties: aIgnoreProperties,\n\t\ttargetControl: oTable\n\t});\n}\n\n/**\n * Retrieves all filters configured in the personalization dialog of the table or chart.\n * @param oControl Table or Chart instance\n * @returns Filters configured in the personalization dialog of the table or chart\n * @private\n */\nfunction getP13nFilters(oControl: Table | MDCChart): Filter[] {\n\tconst p13nMode = oControl.getP13nMode();\n\tlet p13nProperties: TablePropertyInfo[] | PropertyInfo[] | undefined;\n\tif (p13nMode && p13nMode.includes(\"Filter\")) {\n\t\tif (oControl.isA<Table>(\"sap.ui.mdc.Table\")) {\n\t\t\tconst tableAPI = oControl.getParent() as TableAPI;\n\t\t\tp13nProperties = tableAPI.getEnhancedFetchedPropertyInfos().filter(function (property) {\n\t\t\t\treturn property?.filterable !== false;\n\t\t\t});\n\t\t} else {\n\t\t\tp13nProperties = (DelegateUtil.getCustomData<PropertyInfo[]>(oControl, \"sap_fe_ControlDelegate_propertyInfoMap\") || []).filter(\n\t\t\t\tfunction (oControlProperty: PropertyInfo) {\n\t\t\t\t\treturn oControlProperty && !(oControlProperty.filterable === false);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tconst filterInfo = FilterUtils.getFilterInfo(oControl as unknown as IFilterControl, {\n\t\t\tpropertiesMetadata: p13nProperties as PropertyInfo[]\n\t\t});\n\t\tif (filterInfo && filterInfo.filters) {\n\t\t\treturn filterInfo.filters;\n\t\t}\n\t}\n\treturn [];\n}\n\nfunction getAllFilterInfo(oTable: Table, ignoreProperties?: string[]): InternalBindingInfo {\n\tconst oIFilterInfo = tableUtils.getFilterInfo(oTable, ignoreProperties);\n\treturn {\n\t\tfilters: oIFilterInfo.filters.concat(getExternalFilters(oTable), tableUtils.getP13nFilters(oTable)),\n\t\tsearch: oIFilterInfo.search,\n\t\tbindingPath: oIFilterInfo.bindingPath\n\t};\n}\n\n/**\n * Find a value in an object.\n * @param obj The object to look into\n * @param key The key to search\n * @param list An array to return if obj is undefined\n * @returns Return an array of all keys content\n */\nfunction findValuesForKeyRecursively(obj: Record<string, unknown>, key: string, list: string[]): string[] {\n\tif (obj[key]) {\n\t\tlist.push(obj[key] as string);\n\t}\n\tconst children = Object.keys(obj);\n\tfor (const child of children) {\n\t\tif (typeof obj[child] === \"object\") {\n\t\t\tlist = list.concat(findValuesForKeyRecursively(obj[child] as Record<string, unknown>, key, []));\n\t\t}\n\t}\n\treturn list;\n}\n\n/**\n * Find a value into an object.\n * @param obj The object to look into\n * @param key The key to search\n * @returns Return an array of all keys content\n */\nfunction findValues(obj: Record<string, unknown>, key: string): string[] {\n\treturn findValuesForKeyRecursively(obj, key, []);\n}\n\n/**\n * Check all filter conditions for date types or sensitive data.\n * @param mdcTable Table or Chart instance\n * @param filterBar FilterBar\n * @returns True if one filter has a date type or a sensitive data\n */\nfunction isFilterEligibleForOptimisticBatch(mdcTable: Table, filterBar: FilterBar | undefined): boolean {\n\tif (!filterBar) {\n\t\treturn false;\n\t}\n\tconst filtersFromTable = tableUtils.getAllFilterInfo(mdcTable) as unknown as FilterInfo;\n\tconst filtersConditions = filterBar.getConditions();\n\tconst filtersConditionsPaths = Object.keys(filtersConditions);\n\tconst tableRowBindingsInfoPath = mdcTable.data(\"metaPath\");\n\tconst metaModel = mdcTable.getModel()?.getMetaModel();\n\tlet filterPropertiesAsPotentiallySensitiveDataOrDateType = false;\n\tconst filtersPathsFromTable = getFiltersPathsFromTable(tableRowBindingsInfoPath, filtersFromTable);\n\tconst filtersPathsFromFilterBar = getFiltersPathsFromFilterBar(tableRowBindingsInfoPath, filtersConditionsPaths);\n\tconst edmDateTypes = [\"Edm.Date\", \"Edm.DateTimeOffset\", \"Edm.TimeOfDay\"];\n\tconst allFiltersPaths = filtersPathsFromFilterBar.concat(filtersPathsFromTable);\n\tfor (const potentiallySensitiveAnnotation of allFiltersPaths) {\n\t\tif (\n\t\t\tmetaModel?.getObject(`${potentiallySensitiveAnnotation}@com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive`) ||\n\t\t\tmetaModel?.getObject(`${potentiallySensitiveAnnotation}@com.sap.vocabularies.PersonalData.v1.IsPotentiallyPersonal`)\n\t\t) {\n\t\t\tfilterPropertiesAsPotentiallySensitiveDataOrDateType = true;\n\t\t\tbreak;\n\t\t}\n\t\tif (edmDateTypes.includes(metaModel?.getObject(`${potentiallySensitiveAnnotation}/$Type`))) {\n\t\t\tfilterPropertiesAsPotentiallySensitiveDataOrDateType = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn filterPropertiesAsPotentiallySensitiveDataOrDateType;\n}\n\n/**\n * Returns the annotation paths of all filters of the Filter Bar.\n * @param tableRowBindingsInfoPath The table metaPath\n * @param filtersConditionsPaths The paths of all filters conditions\n * @returns An array of paths of all filters\n */\nfunction getFiltersPathsFromFilterBar(tableRowBindingsInfoPath: string, filtersConditionsPaths: string[]): string[] {\n\tconst filtersAnnotationsPaths: string[] = [];\n\tfor (const filterPath of filtersConditionsPaths) {\n\t\tfiltersAnnotationsPaths.push(`${tableRowBindingsInfoPath}/${filterPath}`);\n\t}\n\treturn filtersAnnotationsPaths;\n}\n\n/**\n * Returns the paths of all filters conditions.\n * @param filter The filter to get the paths\n * @returns An object containing paths conditions\n */\nfunction getReferencePathsForFilters(filter: Filter): Record<string, unknown> {\n\tconst filters = filter.getFilters();\n\tlet filterResult = {};\n\t// find all filters in multi filters\n\tif (filters) {\n\t\tfilterResult = getReferencePathsForFilters(filters[filters.length - 1]);\n\t\tfor (let i = filters.length - 2; i >= 0; i--) {\n\t\t\tfilterResult = {\n\t\t\t\tleft: getReferencePathsForFilters(filters[i]),\n\t\t\t\tright: filterResult\n\t\t\t};\n\t\t}\n\t} else {\n\t\treturn {\n\t\t\tpath: filter.getPath()\n\t\t};\n\t}\n\treturn filterResult;\n}\n\n/**\n * Returns the annotation paths of all table filters.\n * @param tableRowBindingsInfoPath The table metaPath\n * @param filters The filters to check for paths\n * @returns An array of paths of all filters\n */\nfunction getFiltersPathsFromTable(tableRowBindingsInfoPath: string, filters: FilterInfo): string[] {\n\tlet paths: string[];\n\tconst filtersAnnotationsPaths: string[] = [];\n\tfor (const filter of filters.filters) {\n\t\tpaths = findValues(getReferencePathsForFilters(filter), \"path\");\n\t\tfor (const filterPath of paths) {\n\t\t\tfiltersAnnotationsPaths.push(`${tableRowBindingsInfoPath}/${filterPath}`);\n\t\t}\n\t}\n\treturn filtersAnnotationsPaths;\n}\n\n/**\n * Returns a promise that is resolved with the table itself when the table was bound.\n * @param oTable The table to check for binding\n * @returns A Promise that will be resolved when table is bound\n */\nasync function whenBound(oTable: Table): Promise<Table> {\n\treturn _getOrCreateBoundPromiseInfo(oTable).promise;\n}\n\n/**\n * If not yet happened, it resolves the table bound promise.\n * @param oTable The table that was bound\n */\nfunction onTableBound(oTable: Table): void {\n\tconst oBoundPromiseInfo = _getOrCreateBoundPromiseInfo(oTable);\n\tif (oBoundPromiseInfo.resolve) {\n\t\toBoundPromiseInfo.resolve(oTable);\n\t\toTable.data(\"boundPromiseResolve\", null);\n\t}\n}\n\nfunction _getOrCreateBoundPromiseInfo(oTable: Table): { promise: Promise<Table>; resolve: Function } {\n\tif (!oTable.data(\"boundPromise\")) {\n\t\tlet fnResolve!: Function;\n\t\toTable.data(\n\t\t\t\"boundPromise\",\n\t\t\tnew Promise(function (resolve) {\n\t\t\t\tfnResolve = resolve;\n\t\t\t})\n\t\t);\n\t\tif ((oTable as unknown as { isBound?: () => boolean }).isBound?.()) {\n\t\t\tfnResolve(oTable);\n\t\t} else {\n\t\t\toTable.data(\"boundPromiseResolve\", fnResolve);\n\t\t}\n\t}\n\treturn { promise: oTable.data(\"boundPromise\"), resolve: oTable.data(\"boundPromiseResolve\") };\n}\n\nfunction updateFiltersForExternalID(metaModel: ODataMetaModel, filters: ConditionObject[], entityTypePath: string): void {\n\tfilters?.forEach((condition) => {\n\t\tconst nestedFilters = condition.getFilters();\n\n\t\tif (nestedFilters) {\n\t\t\tupdateFiltersForExternalID(metaModel, nestedFilters, entityTypePath);\n\t\t} else {\n\t\t\tconst externalIdPropPath = metaModel.getObject(entityTypePath + condition.sPath + \"@com.sap.vocabularies.Common.v1.ExternalID\")\n\t\t\t\t?.$Path;\n\t\t\tif (externalIdPropPath) {\n\t\t\t\tcondition.sPath = externalIdPropPath;\n\t\t\t}\n\t\t}\n\t});\n}\n\nconst tableUtils = {\n\tgetCountFormatted: getCountFormatted,\n\tgetHiddenFilters: getHiddenFilters,\n\tgetListBindingForCount: getListBindingForCount,\n\tgetFilterInfo: getFilterInfo,\n\tgetP13nFilters: getP13nFilters,\n\tgetAllFilterInfo: getAllFilterInfo,\n\tisFilterEligibleForOptimisticBatch: isFilterEligibleForOptimisticBatch,\n\twhenBound: whenBound,\n\tonTableBound: onTableBound,\n\tupdateFiltersForExternalID: updateFiltersForExternalID\n};\n\nexport default tableUtils;\n"],"mappings":";;;;;;;EAkCA,SAASA,gBAAgBA,CAACC,MAAe,EAAY;IACpD,IAAIC,QAAkB,GAAG,EAAE;IAC3B,MAAMC,aAAa,GAAGF,MAAM,CAACG,IAAI,CAAC,eAAe,CAAC;IAClD,IAAID,aAAa,IAAIE,KAAK,CAACC,OAAO,CAACH,aAAa,CAACI,KAAK,CAAC,EAAE;MACxDJ,aAAa,CAACI,KAAK,CAACC,OAAO,CAAC,UAAUC,KAAiC,EAAE;QACxE,MAAMC,UAAU,GAAGC,WAAW,CAACC,wBAAwB,CAACX,MAAM,EAAEQ,KAAK,CAACI,cAAc,CAAC;QACrFX,QAAQ,GAAGA,QAAQ,CAACY,MAAM,CAACJ,UAAU,CAAC;MACvC,CAAC,CAAC;IACH;IACA,OAAOR,QAAQ;EAChB;;EAEA;AACA;AACA;AACA;AACA;EACA,SAASa,kBAAkBA,CAACC,KAAY,EAAY;IACnD,IAAIC,OAAiB,GAAGjB,gBAAgB,CAACgB,KAAK,CAAC;IAC/C,MAAME,WAAW,GAAGF,KAAK,CAACG,cAAc,CAAC,CAAwB;IACjE,IAAID,WAAW,EAAE;MAChBD,OAAO,GAAGA,OAAO,CAACH,MAAM,CAACH,WAAW,CAACC,wBAAwB,CAACI,KAAK,EAAEE,WAAW,CAACE,cAAc,CAAC,CAAC,CAAC,CAAC;IACpG;IACA,OAAOH,OAAO;EACf;;EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA,eAAeI,sBAAsBA,CACpCL,KAAY,EACZM,kBAA8C,EAC9CC,MAAiF,EAC/D;IAClB,MAAMC,UAAU,GAAGR,KAAK,CAACS,QAAQ,CAAC,CAAe;IACjD,MAAMC,QAAQ,GAAGV,KAAK,CAACW,SAAS,CAAC,CAAa;IAC9C,MAAMC,UAAU,GAAGC,UAAU,CAACC,aAAa,CAACd,KAAK,CAAC;IAClD,MAAMC,OAAO,GAAG,CAACZ,KAAK,CAACC,OAAO,CAACiB,MAAM,CAACQ,iBAAiB,CAAC,GAAGR,MAAM,CAACQ,iBAAiB,GAAG,EAAE,EACtFjB,MAAM,CAACc,UAAU,CAACX,OAAO,CAAC,CAC1BH,MAAM,CAACe,UAAU,CAACG,cAAc,CAAChB,KAAK,CAAC,CAAC;IAC1C,MAAMiB,WAAW,GAAG;MACnBC,IAAI,EAAEN,UAAU,CAACO,WAAW,GAAGP,UAAU,CAACO,WAAW,GAAGT,QAAQ,CAACU,oBAAoB,CAAC,CAAC;MACvFnB,OAAO,EAAE,IAAIoB,MAAM,CAAC;QACnBpB,OAAO,EAAEA,OAAO;QAChBqB,GAAG,EAAE;MACN,CAAC;IACF,CAAC;IACDtB,KAAK,CACHW,SAAS,CAAC,CAAC,EACVY,SAAS,CAAC,mBAAmB,EAAE;MAChCC,qBAAqB,EAAE,IAAIC,wBAAwB,CAACR,WAAW,CAAC;MAChES,cAAc,EAAEnB,MAAM,CAACoB;IACxB,CAAC,CAAC;;IAEH;IACA,MAAMC,eAAe,GACpBtB,kBAAkB,IAAI,CAACW,WAAW,CAACC,IAAI,CAACW,UAAU,CAAC,GAAG,CAAC,GAAG,GAAGvB,kBAAkB,CAACwB,OAAO,CAAC,CAAC,IAAIb,WAAW,CAACC,IAAI,EAAE,GAAGD,WAAW,CAACC,IAAI;IACnI,MAAMa,WAAW,GAAGvB,UAAU,CAACwB,QAAQ,CAACJ,eAAe,EAAE5B,KAAK,CAACiC,iBAAiB,CAAC,CAAC,EAAa,EAAE,EAAEhB,WAAW,CAAChB,OAAO,CAAC;IACvH,MAAMiC,aAAuB,GAAG,MAAOH,WAAW,CAAkDI,WAAW,CAC9GJ,WAAW,CAACK,UAAU,CAAC,CACxB,CAAC;IACD,MAAMC,YAAY,GAAG7B,UAAU,CAAC8B,YAAY,CAAC,GAAGP,WAAW,CAACD,OAAO,CAAC,CAAC,SAAS,EAAEC,WAAW,CAACK,UAAU,CAAC,CAAC,EAAE;MACzGG,SAAS,EAAEhC,MAAM,CAACiC,YAAY,IAAI,OAAO;MACzCC,OAAO,EAAEP,aAAa,CAAC,CAAC,CAAC;MACzBQ,OAAO,EAAE9B,UAAU,CAAC+B,MAAM,GAAGhD,WAAW,CAACiD,mBAAmB,CAAChC,UAAU,CAAC+B,MAAM,CAAC,GAAGE;IACnF,CAAC,CAAC;IACF,MAAMC,YAAY,GAAGT,YAAY,CAACU,YAAY,CAAC,CAAC;IAChD,IAAIxC,MAAM,CAACiC,YAAY,IAAIjC,MAAM,CAACiC,YAAY,KAAK,OAAO,EAAE;MAC3DhC,UAAU,CAACwC,WAAW,CAACzC,MAAM,CAACiC,YAAY,CAAC;IAC5C;IACA,MAAMS,KAAK,GAAG,MAAMH,YAAY;IAChCT,YAAY,CAACa,OAAO,CAAC,CAAC;IACtBnB,WAAW,CAACmB,OAAO,CAAC,CAAC;IACrB,OAAOD,KAAK;EACb;EACA,SAASE,iBAAiBA,CAACC,MAAuB,EAAU;IAC3D,MAAMC,eAAe,GAAGC,YAAY,CAACC,kBAAkB,CAAC;MAAEC,eAAe,EAAE;IAAK,CAAC,CAAC;IAClF,OAAOH,eAAe,CAACI,MAAM,CAACL,MAAM,CAAC;EACtC;EACA,SAAStC,aAAaA,CAAC7B,MAAa,EAAEyE,gBAA2B,EAAuB;IACvF,MAAMC,gBAAgB,GAAI1E,MAAM,CAAC0B,SAAS,CAAC,CAAC,CAAciD,kBAAkB,CAAC,CAAC;IAC9E,IAAIC,iBAA2B,GAAGH,gBAAgB,IAAI,EAAE;IAExD,IAAIC,gBAAgB,CAACG,eAAe,EAAE;MACrC,IAAI,CAACH,gBAAgB,CAACI,iBAAiB,EAAE;QACxC;QACAF,iBAAiB,GAAGA,iBAAiB,CAAC/D,MAAM,CAAC,CAAC,QAAQ,CAAC,CAAC;MACzD;MACA+D,iBAAiB,GAAGA,iBAAiB,CAAC/D,MAAM,CAAC,CAAC,YAAY,CAAC,CAAC;IAC7D,CAAC,MAAM,IAAI6D,gBAAgB,CAACK,OAAO,CAACC,IAAI,KAAK,WAAW,EAAE;MACzDJ,iBAAiB,GAAGA,iBAAiB,CAAC/D,MAAM,CAAC,CAAC,YAAY,CAAC,CAAC;IAC7D;IACA,OAAOoE,WAAW,CAACpD,aAAa,CAAC7B,MAAM,CAACkF,SAAS,CAAC,CAAC,EAAE;MACpDC,iBAAiB,EAAEP,iBAAiB;MACpCQ,aAAa,EAAEpF;IAChB,CAAC,CAAC;EACH;;EAEA;AACA;AACA;AACA;AACA;AACA;EACA,SAAS+B,cAAcA,CAACsD,QAA0B,EAAY;IAC7D,MAAMC,QAAQ,GAAGD,QAAQ,CAACE,WAAW,CAAC,CAAC;IACvC,IAAIC,cAAgE;IACpE,IAAIF,QAAQ,IAAIA,QAAQ,CAACG,QAAQ,CAAC,QAAQ,CAAC,EAAE;MAC5C,IAAIJ,QAAQ,CAACK,GAAG,CAAQ,kBAAkB,CAAC,EAAE;QAC5C,MAAMjE,QAAQ,GAAG4D,QAAQ,CAAC3D,SAAS,CAAC,CAAa;QACjD8D,cAAc,GAAG/D,QAAQ,CAACkE,+BAA+B,CAAC,CAAC,CAACC,MAAM,CAAC,UAAUC,QAAQ,EAAE;UACtF,OAAOA,QAAQ,EAAEC,UAAU,KAAK,KAAK;QACtC,CAAC,CAAC;MACH,CAAC,MAAM;QACNN,cAAc,GAAG,CAACO,YAAY,CAACC,aAAa,CAAiBX,QAAQ,EAAE,wCAAwC,CAAC,IAAI,EAAE,EAAEO,MAAM,CAC7H,UAAUK,gBAA8B,EAAE;UACzC,OAAOA,gBAAgB,IAAI,EAAEA,gBAAgB,CAACH,UAAU,KAAK,KAAK,CAAC;QACpE,CACD,CAAC;MACF;MACA,MAAMnE,UAAU,GAAGsD,WAAW,CAACpD,aAAa,CAACwD,QAAQ,EAA+B;QACnFa,kBAAkB,EAAEV;MACrB,CAAC,CAAC;MACF,IAAI7D,UAAU,IAAIA,UAAU,CAACX,OAAO,EAAE;QACrC,OAAOW,UAAU,CAACX,OAAO;MAC1B;IACD;IACA,OAAO,EAAE;EACV;EAEA,SAASmF,gBAAgBA,CAACnG,MAAa,EAAEyE,gBAA2B,EAAuB;IAC1F,MAAM2B,YAAY,GAAGxE,UAAU,CAACC,aAAa,CAAC7B,MAAM,EAAEyE,gBAAgB,CAAC;IACvE,OAAO;MACNzD,OAAO,EAAEoF,YAAY,CAACpF,OAAO,CAACH,MAAM,CAACC,kBAAkB,CAACd,MAAM,CAAC,EAAE4B,UAAU,CAACG,cAAc,CAAC/B,MAAM,CAAC,CAAC;MACnG0D,MAAM,EAAE0C,YAAY,CAAC1C,MAAM;MAC3BxB,WAAW,EAAEkE,YAAY,CAAClE;IAC3B,CAAC;EACF;;EAEA;AACA;AACA;AACA;AACA;AACA;AACA;EACA,SAASmE,2BAA2BA,CAACC,GAA4B,EAAEC,GAAW,EAAEC,IAAc,EAAY;IACzG,IAAIF,GAAG,CAACC,GAAG,CAAC,EAAE;MACbC,IAAI,CAACC,IAAI,CAACH,GAAG,CAACC,GAAG,CAAW,CAAC;IAC9B;IACA,MAAMG,QAAQ,GAAGC,MAAM,CAACC,IAAI,CAACN,GAAG,CAAC;IACjC,KAAK,MAAMO,KAAK,IAAIH,QAAQ,EAAE;MAC7B,IAAI,OAAOJ,GAAG,CAACO,KAAK,CAAC,KAAK,QAAQ,EAAE;QACnCL,IAAI,GAAGA,IAAI,CAAC3F,MAAM,CAACwF,2BAA2B,CAACC,GAAG,CAACO,KAAK,CAAC,EAA6BN,GAAG,EAAE,EAAE,CAAC,CAAC;MAChG;IACD;IACA,OAAOC,IAAI;EACZ;;EAEA;AACA;AACA;AACA;AACA;AACA;EACA,SAASM,UAAUA,CAACR,GAA4B,EAAEC,GAAW,EAAY;IACxE,OAAOF,2BAA2B,CAACC,GAAG,EAAEC,GAAG,EAAE,EAAE,CAAC;EACjD;;EAEA;AACA;AACA;AACA;AACA;AACA;EACA,SAASQ,kCAAkCA,CAACC,QAAe,EAAEC,SAAgC,EAAW;IACvG,IAAI,CAACA,SAAS,EAAE;MACf,OAAO,KAAK;IACb;IACA,MAAMC,gBAAgB,GAAGtF,UAAU,CAACuE,gBAAgB,CAACa,QAAQ,CAA0B;IACvF,MAAMG,iBAAiB,GAAGF,SAAS,CAACG,aAAa,CAAC,CAAC;IACnD,MAAMC,sBAAsB,GAAGV,MAAM,CAACC,IAAI,CAACO,iBAAiB,CAAC;IAC7D,MAAMG,wBAAwB,GAAGN,QAAQ,CAAC7G,IAAI,CAAC,UAAU,CAAC;IAC1D,MAAMoH,SAAS,GAAGP,QAAQ,CAACxF,QAAQ,CAAC,CAAC,EAAEgG,YAAY,CAAC,CAAC;IACrD,IAAIC,oDAAoD,GAAG,KAAK;IAChE,MAAMC,qBAAqB,GAAGC,wBAAwB,CAACL,wBAAwB,EAAEJ,gBAAgB,CAAC;IAClG,MAAMU,yBAAyB,GAAGC,4BAA4B,CAACP,wBAAwB,EAAED,sBAAsB,CAAC;IAChH,MAAMS,YAAY,GAAG,CAAC,UAAU,EAAE,oBAAoB,EAAE,eAAe,CAAC;IACxE,MAAMC,eAAe,GAAGH,yBAAyB,CAAC/G,MAAM,CAAC6G,qBAAqB,CAAC;IAC/E,KAAK,MAAMM,8BAA8B,IAAID,eAAe,EAAE;MAC7D,IACCR,SAAS,EAAEU,SAAS,CAAC,GAAGD,8BAA8B,8DAA8D,CAAC,IACrHT,SAAS,EAAEU,SAAS,CAAC,GAAGD,8BAA8B,6DAA6D,CAAC,EACnH;QACDP,oDAAoD,GAAG,IAAI;QAC3D;MACD;MACA,IAAIK,YAAY,CAACrC,QAAQ,CAAC8B,SAAS,EAAEU,SAAS,CAAC,GAAGD,8BAA8B,QAAQ,CAAC,CAAC,EAAE;QAC3FP,oDAAoD,GAAG,IAAI;QAC3D;MACD;IACD;IACA,OAAOA,oDAAoD;EAC5D;;EAEA;AACA;AACA;AACA;AACA;AACA;EACA,SAASI,4BAA4BA,CAACP,wBAAgC,EAAED,sBAAgC,EAAY;IACnH,MAAMa,uBAAiC,GAAG,EAAE;IAC5C,KAAK,MAAMC,UAAU,IAAId,sBAAsB,EAAE;MAChDa,uBAAuB,CAACzB,IAAI,CAAC,GAAGa,wBAAwB,IAAIa,UAAU,EAAE,CAAC;IAC1E;IACA,OAAOD,uBAAuB;EAC/B;;EAEA;AACA;AACA;AACA;AACA;EACA,SAASE,2BAA2BA,CAACxC,MAAc,EAA2B;IAC7E,MAAM5E,OAAO,GAAG4E,MAAM,CAACyC,UAAU,CAAC,CAAC;IACnC,IAAIC,YAAY,GAAG,CAAC,CAAC;IACrB;IACA,IAAItH,OAAO,EAAE;MACZsH,YAAY,GAAGF,2BAA2B,CAACpH,OAAO,CAACA,OAAO,CAACuH,MAAM,GAAG,CAAC,CAAC,CAAC;MACvE,KAAK,IAAIC,CAAC,GAAGxH,OAAO,CAACuH,MAAM,GAAG,CAAC,EAAEC,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;QAC7CF,YAAY,GAAG;UACdG,IAAI,EAAEL,2BAA2B,CAACpH,OAAO,CAACwH,CAAC,CAAC,CAAC;UAC7CE,KAAK,EAAEJ;QACR,CAAC;MACF;IACD,CAAC,MAAM;MACN,OAAO;QACNrG,IAAI,EAAE2D,MAAM,CAAC/C,OAAO,CAAC;MACtB,CAAC;IACF;IACA,OAAOyF,YAAY;EACpB;;EAEA;AACA;AACA;AACA;AACA;AACA;EACA,SAASX,wBAAwBA,CAACL,wBAAgC,EAAEtG,OAAmB,EAAY;IAClG,IAAIV,KAAe;IACnB,MAAM4H,uBAAiC,GAAG,EAAE;IAC5C,KAAK,MAAMtC,MAAM,IAAI5E,OAAO,CAACA,OAAO,EAAE;MACrCV,KAAK,GAAGwG,UAAU,CAACsB,2BAA2B,CAACxC,MAAM,CAAC,EAAE,MAAM,CAAC;MAC/D,KAAK,MAAMuC,UAAU,IAAI7H,KAAK,EAAE;QAC/B4H,uBAAuB,CAACzB,IAAI,CAAC,GAAGa,wBAAwB,IAAIa,UAAU,EAAE,CAAC;MAC1E;IACD;IACA,OAAOD,uBAAuB;EAC/B;;EAEA;AACA;AACA;AACA;AACA;EACA,eAAeS,SAASA,CAAC3I,MAAa,EAAkB;IACvD,OAAO4I,4BAA4B,CAAC5I,MAAM,CAAC,CAAC6I,OAAO;EACpD;;EAEA;AACA;AACA;AACA;EACA,SAASC,YAAYA,CAAC9I,MAAa,EAAQ;IAC1C,MAAM+I,iBAAiB,GAAGH,4BAA4B,CAAC5I,MAAM,CAAC;IAC9D,IAAI+I,iBAAiB,CAACC,OAAO,EAAE;MAC9BD,iBAAiB,CAACC,OAAO,CAAChJ,MAAM,CAAC;MACjCA,MAAM,CAACG,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC;IACzC;EACD;EAEA,SAASyI,4BAA4BA,CAAC5I,MAAa,EAAkD;IACpG,IAAI,CAACA,MAAM,CAACG,IAAI,CAAC,cAAc,CAAC,EAAE;MACjC,IAAI8I,SAAoB;MACxBjJ,MAAM,CAACG,IAAI,CACV,cAAc,EACd,IAAI+I,OAAO,CAAC,UAAUF,OAAO,EAAE;QAC9BC,SAAS,GAAGD,OAAO;MACpB,CAAC,CACF,CAAC;MACD,IAAKhJ,MAAM,CAA4CmJ,OAAO,GAAG,CAAC,EAAE;QACnEF,SAAS,CAACjJ,MAAM,CAAC;MAClB,CAAC,MAAM;QACNA,MAAM,CAACG,IAAI,CAAC,qBAAqB,EAAE8I,SAAS,CAAC;MAC9C;IACD;IACA,OAAO;MAAEJ,OAAO,EAAE7I,MAAM,CAACG,IAAI,CAAC,cAAc,CAAC;MAAE6I,OAAO,EAAEhJ,MAAM,CAACG,IAAI,CAAC,qBAAqB;IAAE,CAAC;EAC7F;EAEA,SAASiJ,0BAA0BA,CAAC7B,SAAyB,EAAEvG,OAA0B,EAAEqI,cAAsB,EAAQ;IACxHrI,OAAO,EAAET,OAAO,CAAE+I,SAAS,IAAK;MAC/B,MAAMC,aAAa,GAAGD,SAAS,CAACjB,UAAU,CAAC,CAAC;MAE5C,IAAIkB,aAAa,EAAE;QAClBH,0BAA0B,CAAC7B,SAAS,EAAEgC,aAAa,EAAEF,cAAc,CAAC;MACrE,CAAC,MAAM;QACN,MAAMG,kBAAkB,GAAGjC,SAAS,CAACU,SAAS,CAACoB,cAAc,GAAGC,SAAS,CAACG,KAAK,GAAG,4CAA4C,CAAC,EAC5HC,KAAK;QACR,IAAIF,kBAAkB,EAAE;UACvBF,SAAS,CAACG,KAAK,GAAGD,kBAAkB;QACrC;MACD;IACD,CAAC,CAAC;EACH;EAEA,MAAM5H,UAAU,GAAG;IAClBsC,iBAAiB,EAAEA,iBAAiB;IACpCnE,gBAAgB,EAAEA,gBAAgB;IAClCqB,sBAAsB,EAAEA,sBAAsB;IAC9CS,aAAa,EAAEA,aAAa;IAC5BE,cAAc,EAAEA,cAAc;IAC9BoE,gBAAgB,EAAEA,gBAAgB;IAClCY,kCAAkC,EAAEA,kCAAkC;IACtE4B,SAAS,EAAEA,SAAS;IACpBG,YAAY,EAAEA,YAAY;IAC1BM,0BAA0B,EAAEA;EAC7B,CAAC;EAAC,OAEaxH,UAAU;AAAA","ignoreList":[],"file":"Utils-dbg.js"}