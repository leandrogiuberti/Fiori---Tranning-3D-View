/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/base/ClassSupport","sap/fe/core/buildingBlocks/BuildingBlock","sap/fe/core/converters/controls/Common/Action","sap/fe/core/helpers/ResourceModelHelper","sap/m/Button","sap/m/Dialog","sap/m/Page","sap/m/Panel","sap/ui/core/Component","sap/ui/core/util/reflection/JsControlTreeModifier","sap/fe/base/jsx-runtime/jsx"],function(e,t,i,n,o,a,r,l,s,g,c){"use strict";var u,f,h,b,d;var p={};var T=n.getResourceModel;var P=i.ButtonType;var A=e.property;var C=e.defineUI5Class;function m(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function y(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,M(e,t)}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}function D(e,t,i,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}function S(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let v=(u=C("sap.fe.macros.table.TableFullScreenButton"),f=A({type:"string"}),u(h=(b=function(e){function t(t,i){var n;n=e.call(this,t,i)||this;m(n,"id",d,n);n.tablePlaceHolderPanel=new l;n.tablePlaceHolderPanel.data("FullScreenTablePlaceHolder",true);return n}p=t;y(t,e);var i=t.prototype;i.getTableAPI=function e(){if(!this.tableAPI){let e=this.content;do{e=e.getParent()}while(!e.isA("sap.fe.macros.table.TableAPI"));this.tableAPI=e;return this.tableAPI}else{return this.tableAPI}};i.onMetadataAvailable=function e(){if(!this.content){this.initializeContent()}};i.afterDialogOpen=function e(){this.content?.focus()};i.beforeDialogClose=function e(){this.getTableAPI().setFullScreenDialog(undefined);this.restoreNormalState()};i.afterDialogClose=function e(){this.fullScreenDialog?.destroy();this.fullScreenDialog=undefined;const t=s.getOwnerComponentFor(this.getTableAPI());const i=s.getOwnerComponentFor(t);this.content?.focus();i?.getRootViewController()._scrollTablesToLastNavigatedItems()};i.createDialog=function e(){const t=c(o,{text:this.resourceModel.getText("M_COMMON_TABLE_FULLSCREEN_CLOSE"),type:P.Transparent,press:()=>{this.fullScreenDialog?.close()}});const i=c(a,{showHeader:false,stretch:true,afterOpen:this.afterDialogOpen.bind(this),beforeClose:this.beforeDialogClose.bind(this),afterClose:this.afterDialogClose.bind(this),endButton:t,content:c(r,{})});i.data("FullScreenDialog",true);return i};i.restoreNormalState=function e(){const t=this.getTableAPI();try{t.setIgnoreContextChangeEvent(true);this.content?.setIcon("sap-icon://full-screen");this.content?.setTooltip(this.resourceModel.getText("M_COMMON_TABLE_FULLSCREEN_MAXIMIZE"));if(t.getTableDefinition().control.type==="GridTable"||t.getTableDefinition().control.type==="TreeTable"&&t.getTableDefinition().control.rowCountMode){t.getContent().getType().setRowCountMode(t.getTableDefinition().control.rowCountMode)}const e=this.originalTableParent.getAggregation(this.originalAggregationName);if(Array.isArray(e)){this.originalTableParent.removeAggregation(this.originalAggregationName,this.tablePlaceHolderPanel);this.originalTableParent.addAggregation(this.originalAggregationName,t)}else{this.originalTableParent.setAggregation(this.originalAggregationName,t)}}finally{t.setIgnoreContextChangeEvent(false)}};i.setFullScreenState=async function e(){const t=this.getTableAPI();try{t.setIgnoreContextChangeEvent(true);this.content?.setIcon("sap-icon://exit-full-screen");this.content?.setTooltip(this.resourceModel.getText("M_COMMON_TABLE_FULLSCREEN_MINIMIZE"));this.tablePlaceHolderPanel.data("tableAPIreference",t);this.originalTableParent=t.getParent();this.originalAggregationName=await g.getParentAggregationName(t);const e=this.originalTableParent.getAggregation(this.originalAggregationName);if(Array.isArray(e)){this.originalTableParent.removeAggregation(this.originalAggregationName,t);this.originalTableParent.addAggregation(this.originalAggregationName,this.tablePlaceHolderPanel)}else{this.originalTableParent.setAggregation(this.originalAggregationName,this.tablePlaceHolderPanel)}this.fullScreenDialog=this.createDialog();this.originalTableParent?.addDependent(this.fullScreenDialog);if(t.getTableDefinition().control.type==="GridTable"||t.getTableDefinition().control.type==="TreeTable"){t.getContent().getType().setRowCountMode("Auto")}this.fullScreenDialog.getContent()[0].addContent(this.getTableAPI());this.fullScreenDialog.open();t.setFullScreenDialog(this.fullScreenDialog)}finally{t.setIgnoreContextChangeEvent(false)}};i.onFullScreenToggle=async function e(){if(this.fullScreenDialog){this.fullScreenDialog.close()}else{await this.setFullScreenState()}};i.initializeContent=function e(){this.resourceModel=T(this);this.content=c(o,{id:this.createId("_btn"),tooltip:this.resourceModel.getText("M_COMMON_TABLE_FULLSCREEN_MAXIMIZE"),icon:"sap-icon://full-screen",press:this.onFullScreenToggle.bind(this),type:"Transparent",visible:true,enabled:true})};return t}(t),d=D(b.prototype,"id",[f],{configurable:true,enumerable:true,writable:true,initializer:null}),b))||h);p=v;return p},false);
//# sourceMappingURL=TableFullScreenButton.js.map