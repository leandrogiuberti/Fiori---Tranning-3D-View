{"version":3,"names":["TableAPIStateHandler","_IViewStateContributo","apply","arguments","_exports","_inheritsLoose","_proto","prototype","retrieveState","tableState","innerTable","getControlState","StateUtil","retrieveExternalState","content","quickFilter","getQuickFilter","quickFilterState","getSelectedKey","selectedKey","variantToRetrieve","getVariant","getId","variantManagementControl","variantManagement","variantId","getCurrentVariantKey","setInitialState","initialControlState","e","Log","error","applyLegacyState","_navParameters","shouldApplyDiffState","table","vm","vmState","controlState","fullState","initialState","toString","Object","keys","length","applyState","handleVariantIdPassedViaURLParams","urlParams","getStartupParameters","tableVariantId","view","CommonUtils","getTargetView","viewData","getViewData","vmType","variantToApply","getVariants","find","variant","getKey","ControlVariantApplyAPI","__ui5_require_async","default","activateVariant","element","variantReference","controller","getPageController","appComponent","getAppComponent","componentData","getComponentData","startupParameters","applyNavigationParameters","navigationParameter","applyVariantFromURLParams","getMetadata","getName","Promise","resolve","initialized","innerTableState","currentVariant","quickFilterKey","undefined","ovM","aVariants","sVariantReference","some","oVariant","getStandardVariantKey","finalState","supplementaryConfig","diffState","applyExternalState","setSelectedKey","onQuickFilterSelectionChange","initialLoad","filterBar","getFilterBarControl","isA","waitForInitialState","then","rebind","catch","IViewStateContributorMixin"],"sourceRoot":".","sources":["TableAPIStateHandler.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type { NavigationParameter } from \"sap/fe/core/controllerextensions/ViewState\";\nimport IViewStateContributorMixin from \"sap/fe/core/controllerextensions/viewState/IViewStateContributorMixin\";\nimport type FilterBarAPI from \"sap/fe/macros/filterBar/FilterBarAPI\";\nimport type { ControlState } from \"sap/fe/macros/insights/CommonInsightsHelper\";\nimport type TableAPI from \"sap/fe/macros/table/TableAPI\";\nimport type { TableState } from \"sap/fe/macros/table/TableAPI\";\nimport type ManagedObject from \"sap/ui/base/ManagedObject\";\nimport StateUtil from \"sap/ui/mdc/p13n/StateUtil\";\n\nexport default class TableAPIStateHandler extends IViewStateContributorMixin<TableState> {\n\t/**\n\t * Asynchronously retrieves the state of the table based on the provided viewstate.\n\t * @returns A promise that resolves to the table state or null if not found.\n\t */\n\tasync retrieveState(this: TableAPI): Promise<TableState | null> {\n\t\tconst tableState: TableState = {};\n\t\ttableState.innerTable = this.getControlState(await StateUtil.retrieveExternalState(this.content)) as object;\n\t\tconst quickFilter = this.getQuickFilter();\n\t\tif (quickFilter) {\n\t\t\tconst quickFilterState = quickFilter.getSelectedKey();\n\t\t\tif (!tableState.quickFilter) {\n\t\t\t\ttableState.quickFilter = {};\n\t\t\t}\n\t\t\ttableState.quickFilter.selectedKey = quickFilterState;\n\t\t}\n\t\tconst variantToRetrieve = this.content.getVariant()?.getId();\n\t\tif (variantToRetrieve) {\n\t\t\tconst variantManagementControl = this.content.getVariant();\n\t\t\tif (!tableState.variantManagement) {\n\t\t\t\ttableState.variantManagement = { variantId: variantManagementControl?.getCurrentVariantKey() };\n\t\t\t} else {\n\t\t\t\ttableState.variantManagement.variantId = variantManagementControl?.getCurrentVariantKey();\n\t\t\t}\n\t\t}\n\t\treturn tableState;\n\t}\n\n\t/**\n\t * Sets the initial state of the control by retrieving the external state.\n\t * @returns A promise that resolves when the initial state is set.\n\t */\n\tasync setInitialState(this: TableAPI): Promise<void> {\n\t\ttry {\n\t\t\tconst initialControlState = await StateUtil.retrieveExternalState(this.content);\n\t\t\tthis.initialControlState = initialControlState;\n\t\t} catch (e: unknown) {\n\t\t\tLog.error(e as string);\n\t\t}\n\t}\n\n\t/**\n\t * Applies the legacy state to the table based on the provided control state retrieval function.\n\t * @param getControlState Function to retrieve the control state.\n\t * @param [_navParameters] Optional navigation parameters.\n\t * @param [shouldApplyDiffState] Flag indicating whether to apply the diff state.\n\t * @returns - A promise that resolves when the state has been applied.\n\t */\n\tasync applyLegacyState(\n\t\tthis: TableAPI,\n\t\tgetControlState: (control: ManagedObject) => ControlState,\n\t\t_navParameters?: NavigationParameter,\n\t\tshouldApplyDiffState?: boolean\n\t): Promise<void> {\n\t\tconst table = this.content;\n\t\tconst vm = table.getVariant();\n\t\tconst quickFilter = this.getQuickFilter();\n\n\t\tconst tableState = getControlState(table) as { initialState?: TableState; fullState?: TableState };\n\t\tconst vmState = vm ? getControlState(vm) : null;\n\t\tconst quickFilterState = quickFilter?.content ? getControlState(quickFilter.content) : null;\n\n\t\tconst controlState: TableState = {};\n\n\t\tif (tableState) {\n\t\t\tcontrolState.innerTable = {\n\t\t\t\t...controlState.innerTable,\n\t\t\t\t...tableState,\n\t\t\t\tfullState: {\n\t\t\t\t\t...controlState.innerTable?.fullState,\n\t\t\t\t\t...tableState.fullState\n\t\t\t\t},\n\t\t\t\tinitialState: {\n\t\t\t\t\t...controlState.innerTable?.initialState,\n\t\t\t\t\t...tableState.initialState\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tif (vmState?.variantId) {\n\t\t\tcontrolState.variantManagement = {\n\t\t\t\t...controlState.variantManagement,\n\t\t\t\tvariantId: vmState.variantId.toString()\n\t\t\t};\n\t\t}\n\n\t\tif (quickFilterState?.selectedKey) {\n\t\t\tcontrolState.quickFilter = {\n\t\t\t\t...controlState.quickFilter,\n\t\t\t\tselectedKey: quickFilterState.selectedKey.toString()\n\t\t\t};\n\t\t}\n\t\tif (controlState && Object.keys(controlState).length > 0) {\n\t\t\tawait this.applyState(controlState as object, _navParameters, shouldApplyDiffState);\n\t\t}\n\t}\n\n\t/**\n\t * Handles the application of a variant ID passed via URL parameters.\n\t * @returns A promise that resolves when the variant has been applied.\n\t */\n\tasync handleVariantIdPassedViaURLParams(this: TableAPI & TableAPIStateHandler): Promise<unknown> {\n\t\tconst urlParams = this.getStartupParameters() as unknown as Record<string, string[]>;\n\t\tconst tableVariantId = urlParams[\"sap-ui-fe-table-variant-id\"]?.[0];\n\t\tconst view = CommonUtils.getTargetView(this);\n\t\tconst viewData = view.getViewData();\n\t\tconst vmType = viewData.variantManagement;\n\t\tconst vm = this.content.getVariant();\n\t\tif (vm && tableVariantId && vmType === \"Control\") {\n\t\t\tconst variantToApply = vm.getVariants().find((variant) => variant.getKey() === tableVariantId);\n\t\t\tconst ControlVariantApplyAPI = (await import(\"sap/ui/fl/apply/api/ControlVariantApplyAPI\")).default;\n\t\t\treturn ControlVariantApplyAPI.activateVariant({\n\t\t\t\telement: vm,\n\t\t\t\tvariantReference: variantToApply.getKey()\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Retrieves the startup parameters from the application component data.\n\t * These parameters contain URL query parameters that were passed when the application was started.\n\t * @returns The startup parameters as a key-value mapping where each key can have multiple values,\n\t *          or undefined if no parameters are available or if the component chain is not accessible.\n\t */\n\tgetStartupParameters(this: TableAPI): Record<string, string> | undefined {\n\t\tconst controller = this.getPageController();\n\t\tconst appComponent = controller.getAppComponent();\n\t\tconst componentData = appComponent.getComponentData();\n\t\treturn componentData.startupParameters as unknown as Record<string, string>;\n\t}\n\n\t/**\n\t * Asynchronously applies navigation parameters to the filter bar.\n\t * @param navigationParameter The navigation parameters to be applied.\n\t * @returns A promise that resolves when the parameters have been applied.\n\t */\n\tasync applyNavigationParameters(this: TableAPI & TableAPIStateHandler, navigationParameter: NavigationParameter): Promise<void> {\n\t\ttry {\n\t\t\t// Only handle variant ID from URL parameters if applyVariantFromURLParams is true\n\t\t\tif (navigationParameter.applyVariantFromURLParams ?? false) {\n\t\t\t\tawait this.handleVariantIdPassedViaURLParams();\n\t\t\t}\n\t\t} catch (error: unknown) {\n\t\t\tLog.error(\n\t\t\t\t`Error tying to apply navigation parameters to ${this.getMetadata().getName()}} control with ID: ${this.getId()}`,\n\t\t\t\terror as Error\n\t\t\t);\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n\n\t/**\n\t * Asynchronously applies the provided control state to the viewstate.\n\t * @param controlState The state to be applied to the control.\n\t * @param [_navParameters] Optional navigation parameters.\n\t * @param [shouldApplyDiffState] Optional flag to skip merging states.\n\t * @returns A promise that resolves when the state has been applied.\n\t */\n\tasync applyState(\n\t\tthis: TableAPI,\n\t\tcontrolState: TableState,\n\t\t_navParameters?: NavigationParameter,\n\t\tshouldApplyDiffState?: boolean\n\t): Promise<void> {\n\t\tif (!controlState) return;\n\n\t\t// Table properties need to be available before calling diffState/retrieveState. However, applyState\n\t\t// gets called too early in the table's lifecycle, so the delegate and properties are not yet available.\n\t\tawait this.content.initialized();\n\n\t\tconst innerTableState = controlState?.innerTable;\n\t\tconst variantId = controlState?.variantManagement?.variantId;\n\t\tconst currentVariant = this.content?.getVariant();\n\t\tconst quickFilterKey = controlState?.quickFilter?.selectedKey;\n\t\tconst quickFilter = this.getQuickFilter();\n\n\t\t// Handle Variant Management\n\t\tif (variantId !== undefined && variantId !== currentVariant.getCurrentVariantKey()) {\n\t\t\tconst ovM = this.content?.getVariant();\n\t\t\tconst aVariants = ovM?.getVariants();\n\t\t\tconst sVariantReference = aVariants?.some((oVariant) => oVariant.getKey() === variantId)\n\t\t\t\t? variantId\n\t\t\t\t: ovM?.getStandardVariantKey;\n\t\t\ttry {\n\t\t\t\tconst ControlVariantApplyAPI = (await import(\"sap/ui/fl/apply/api/ControlVariantApplyAPI\")).default;\n\t\t\t\tawait ControlVariantApplyAPI.activateVariant({\n\t\t\t\t\telement: ovM,\n\t\t\t\t\tvariantReference: sVariantReference as string\n\t\t\t\t});\n\t\t\t\tawait this.setInitialState();\n\t\t\t} catch (error: unknown) {\n\t\t\t\tLog.error(error as string);\n\t\t\t\tawait this.setInitialState();\n\t\t\t}\n\t\t} else {\n\t\t\t// we need to update initial state even if above condition not satiesfied\n\t\t\tawait this.setInitialState();\n\t\t}\n\n\t\t// Handle Inner Table State\n\n\t\tlet finalState;\n\n\t\tif (innerTableState) {\n\t\t\tif (shouldApplyDiffState && innerTableState.initialState) {\n\t\t\t\tif (!innerTableState.initialState.supplementaryConfig) {\n\t\t\t\t\tinnerTableState.initialState.supplementaryConfig = {};\n\t\t\t\t}\n\t\t\t\tfinalState = await StateUtil.diffState(\n\t\t\t\t\tthis.content,\n\t\t\t\t\tinnerTableState.initialState as object,\n\t\t\t\t\tinnerTableState.fullState as object\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tif (controlState && !controlState?.supplementaryConfig) {\n\t\t\t\t\tcontrolState.supplementaryConfig = {};\n\t\t\t\t}\n\t\t\t\tfinalState = innerTableState.fullState;\n\t\t\t}\n\t\t\tawait StateUtil.applyExternalState(this.content, finalState);\n\t\t}\n\n\t\t// Handle Quick Filter State\n\t\tif (quickFilterKey && quickFilterKey !== quickFilter?.getSelectedKey()) {\n\t\t\tquickFilter?.setSelectedKey(quickFilterKey);\n\t\t\tthis.onQuickFilterSelectionChange();\n\t\t}\n\t\tif (this.initialLoad && this.filterBar) {\n\t\t\tconst filterBar = this.getFilterBarControl(this.filterBar);\n\t\t\tif (filterBar && filterBar.isA<FilterBarAPI>(\"sap.fe.macros.filterBar.FilterBarAPI\")) {\n\t\t\t\tfilterBar\n\t\t\t\t\t.waitForInitialState()\n\t\t\t\t\t.then((): void => {\n\t\t\t\t\t\tthis.content.rebind();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t})\n\t\t\t\t\t.catch((): void => {\n\t\t\t\t\t\tLog.error(\"Error while waiting for initial state of filter bar\");\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"TableAPIStateHandler-dbg.js"}