{"version":3,"names":["ContextMenuHandler","contextMenuActive","_exports","_proto","prototype","setupMixin","_baseClass","alignContextMenuWithTableToolbarChanges","table","contextMenu","getContextMenu","sortHelperForMenuItems","tableActions","getActions","forEach","tableAction","tableActionItem","getAggregation","_isActionSplit","_splitActionsInContextMenu","_isActionCombined","_combineActionInContextMenu","contextMenuItem","_getCorrespondingContextMenuAction","_alignTextAndVisiblityInContextMenu","push","length","menuItem","sortIndex","indexOfContextMenu","indexOfItem","removeItem","insertItem","hideAllContextMenuActionsExceptDelete","menuItems","getItems","deleteAction","find","action","getId","endsWith","deleteVisible","getAction","getVisible","includes","setVisible","actionItem","getMetadata","getName","dependents","getDependents","flexManagedObjectModels","filter","dependent","ManagedObjectModel","some","model","contextMenuItems","menuButton","_findOrCreateMenuButtonInContextMenu","actionItems","getMenu","toolBarAction","actionIdInContextMenu","data","actionIdInToolbar","replace","setText","getText","addItem","actionInSubMenu","_findActionInSubMenu","destroy","subMenu","splice","indexOf","undefined","newMenuButton","MenuItem","id","generate","text","i","item","subItems","subItem","index","tableActionVisibility","setContextMenuActive","active","isContextMenuActive","setCollaborationManagerMenuItemVisibility","contexts","collaborationManagerMenuItem","appComponent","CommonUtils","getAppComponent","collaborativeToolsService","getCollaborativeToolsService","collaborationOption","collaborationService","cmHelperService","getOptions","tableDefinition","getParent","getTableDefinition","navigationType","annotation","row","navigationInfo","type","view","getTargetView","collaborativeDraft","getController","metaModel","getModel","getMetaModel","isDraft","ModelHelper","isDraftSupported","getPath","visible","isCollaborationEnabled","context","getObject","IsActiveEntity","HasActiveEntity","FESRHelper","setSemanticStepname","_onContextMenuPress","oEvent","getSource","tableContexts","getSelectedContexts","contextMenuContext","getParameter","internalModelContext","getBindingContext","contextMenuSelection","getRelevantSelection","oneContextIsActive","isInactive","setProperty","activeSelectedContexts","oContext","onlyInActiveContextsSelected","isInlineCreationMode","getCreationMode","CreationMode","InlineCreationRows","navigableContexts","getLocalAnnotationModel","getProperty","routePath","visibleMenuItems","preventDefault","isExpandable","singleContext","isExpanded","isCollapsable","deleteHelper","updateDeleteInfoForSelectedContexts","navigationAvailableMap","TableRuntime","setIntentBasedNavigationEnablement","updatablePropertyPath","draft","readOnlyDraftEnabled","updatableContexts","selectedContext","isUpdatableContext","control","createEnablement","_updateCreateEnablement","nodeType","updateCutCopyPasteEnablement","updateMoveUpDownEnablement","ActionRuntime","setActionEnablement","JSON","parse","operationAvailableMap"],"sourceRoot":".","sources":["ContextMenuHandler.ts"],"sourcesContent":["import { type IInterfaceWithMixin } from \"sap/fe/base/ClassSupport\";\nimport ActionRuntime from \"sap/fe/core/ActionRuntime\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { CreationMode } from \"sap/fe/core/converters/ManifestSettings\";\nimport deleteHelper from \"sap/fe/core/helpers/DeleteHelper\";\nimport type { InternalModelContext } from \"sap/fe/core/helpers/ModelHelper\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport type TableAPI from \"sap/fe/macros/Table\";\nimport type Button from \"sap/m/Button\";\nimport type Menu from \"sap/m/Menu\";\nimport type MenuButton from \"sap/m/MenuButton\";\nimport MenuItem from \"sap/m/MenuItem\";\nimport ManagedObjectModel from \"sap/ui/fl/util/ManagedObjectModel\";\nimport type MDCTable from \"sap/ui/mdc/Table\";\nimport type { Table$BeforeOpenContextMenuEvent } from \"sap/ui/mdc/Table\";\nimport type ActionToolbarAction from \"sap/ui/mdc/actiontoolbar/ActionToolbarAction\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport FESRHelper from \"sap/ui/performance/trace/FESRHelper\";\nimport type { ITableBlock } from \"../TableAPI\";\nimport TableRuntime from \"../TableRuntime\";\n\nexport default class ContextMenuHandler implements IInterfaceWithMixin {\n\tprotected contextMenuActive = false;\n\n\tsetupMixin(_baseClass: Function): void {\n\t\t// This method is needed to implement interface IInterfaceWithMixin\n\t}\n\n\t/**\n\t * Align context menu with the table actions by RTA changes in table toolbar.\n\t * @param table The table with bound table actions\n\t */\n\talignContextMenuWithTableToolbarChanges(table: MDCTable): void {\n\t\tconst contextMenu = table.getContextMenu() as Menu;\n\t\tconst sortHelperForMenuItems: MenuItem[] = [];\n\t\tconst tableActions = table.getActions();\n\t\ttableActions?.forEach((tableAction) => {\n\t\t\tconst tableActionItem = tableAction.getAggregation(\"action\") as Button;\n\t\t\t// Check if the action item has been split by RTA\n\t\t\tif (this._isActionSplit(tableActionItem)) {\n\t\t\t\t// Remove original menu item and add sub items as new menu items\n\t\t\t\tthis._splitActionsInContextMenu(tableActionItem, contextMenu);\n\t\t\t}\n\t\t\t// Check if the action item has been created by combining the two actions\n\t\t\tif (this._isActionCombined(tableActionItem)) {\n\t\t\t\tthis._combineActionInContextMenu(tableActionItem as unknown as MenuButton, contextMenu, table);\n\t\t\t}\n\t\t\tconst contextMenuItem = this._getCorrespondingContextMenuAction(tableActionItem, contextMenu);\n\t\t\tif (contextMenuItem) {\n\t\t\t\tthis._alignTextAndVisiblityInContextMenu(tableActionItem, contextMenuItem, tableAction as ActionToolbarAction);\n\t\t\t\tsortHelperForMenuItems.push(contextMenuItem);\n\t\t\t}\n\t\t});\n\t\t// Align the order of context-menuItems with bound table actions\n\t\tif (sortHelperForMenuItems.length) {\n\t\t\tsortHelperForMenuItems.forEach((menuItem, sortIndex) => {\n\t\t\t\tconst indexOfContextMenu = contextMenu.indexOfItem(menuItem);\n\t\t\t\tif (indexOfContextMenu !== sortIndex) {\n\t\t\t\t\tcontextMenu.removeItem(menuItem);\n\t\t\t\t\tcontextMenu.insertItem(menuItem, sortIndex);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Hide all context menu actions except delete.\n\t * @param table The MDCTable\n\t */\n\thideAllContextMenuActionsExceptDelete(table: MDCTable): void {\n\t\tconst contextMenu = table.getContextMenu() as Menu;\n\t\tconst menuItems = contextMenu.getItems();\n\t\tconst deleteAction = table.getActions().find((action) => action.getId().endsWith(\"StandardAction::Delete::ActionToolbarAction\"));\n\t\tconst deleteVisible = (deleteAction as ActionToolbarAction)?.getAction().getVisible() ?? true;\n\t\tmenuItems.forEach((menuItem) => {\n\t\t\t// Check if the menu item is the delete action\n\t\t\tif (menuItem.getId().includes(\"StandardAction::Delete::ContextMenu\")) {\n\t\t\t\tmenuItem.setVisible(deleteVisible);\n\t\t\t} else {\n\t\t\t\tmenuItem.setVisible(false);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Check if the action item has been created by a Combine RTA changes in the table toolbar.\n\t * @param actionItem The action to check\n\t * @returns True if the action item has been created by a Combine RTA changes in the table toolbar\n\t */\n\t_isActionCombined(actionItem: Button): boolean {\n\t\tif (actionItem.getMetadata().getName() === \"sap.m.MenuButton\") {\n\t\t\t// We don't have custom data attribute on the MenuButton created by RTA combine change\n\t\t\tconst dependents = actionItem.getDependents();\n\t\t\t// find all the dependents which are a Flex ManagedObjectModel\n\t\t\tconst flexManagedObjectModels = dependents.filter((dependent) => dependent instanceof ManagedObjectModel);\n\t\t\t// check if the name of one of them includes \"$sap.m.flexibility.MenuButtonModel\"\n\t\t\treturn flexManagedObjectModels.some((model) =>\n\t\t\t\t(model as unknown as ManagedObjectModel).getName().includes(\"$sap.m.flexibility.MenuButtonModel\")\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Combine the actions in the context menu to align with the table action toolbar.\n\t * @param actionItem The action item to split\n\t * @param contextMenu The context menu\n\t * @param table The MDCTable\n\t */\n\t_combineActionInContextMenu(actionItem: MenuButton, contextMenu: Menu, table: MDCTable): void {\n\t\tconst contextMenuItems = contextMenu.getItems();\n\t\t// Create a new menu button in the context menu if it does not exist\n\t\tconst menuButton = this._findOrCreateMenuButtonInContextMenu(actionItem, table);\n\t\tconst actionItems = actionItem.getMenu().getItems();\n\t\tfor (const action of actionItems) {\n\t\t\tconst toolBarAction = action;\n\t\t\t// now find the action in the context menu and remove it from the context menu\n\t\t\tfor (const menuItem of contextMenuItems) {\n\t\t\t\tconst actionIdInContextMenu = menuItem.data(\"actionId\");\n\t\t\t\tconst actionIdInToolbar = toolBarAction.data(\"actionId\");\n\t\t\t\tif (\n\t\t\t\t\tactionIdInContextMenu === actionIdInToolbar + \"::ContextMenu\" ||\n\t\t\t\t\tactionIdInContextMenu === actionIdInToolbar.replace(\"::ActionMenu\", \"::ContextMenu\")\n\t\t\t\t) {\n\t\t\t\t\tmenuItem.setText(toolBarAction.getText());\n\t\t\t\t\t// Add the action to the menu button\n\t\t\t\t\tcontextMenu.removeItem(menuItem);\n\t\t\t\t\tmenuButton.addItem(menuItem);\n\t\t\t\t}\n\t\t\t\t// If we find another menu in the context menu we check if the action is in the sub menu\n\t\t\t\tif (menuItem.getItems().length > 0 && !menuItem.getId().includes(actionItem.getId())) {\n\t\t\t\t\tconst actionInSubMenu = this._findActionInSubMenu(menuItem.getItems(), toolBarAction);\n\t\t\t\t\tif (actionInSubMenu) {\n\t\t\t\t\t\tactionInSubMenu.setText(toolBarAction.getText());\n\t\t\t\t\t\tmenuButton.addItem(actionInSubMenu);\n\t\t\t\t\t\tif (menuItem.getItems().length === 0) {\n\t\t\t\t\t\t\tmenuItem.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Finds the action in an action menu in the context menu, it return the action if found and removes it from the menu.\n\t * @param subMenu The array of actions in the menu\n\t * @param actionItem The action we are searching for\n\t * @returns The action if found, otherwise undefined\n\t */\n\t_findActionInSubMenu(subMenu: MenuItem[], actionItem: MenuItem): MenuItem | undefined {\n\t\tfor (const menuItem of subMenu) {\n\t\t\tif (\n\t\t\t\tmenuItem.data(\"actionId\") === actionItem.data(\"actionId\").replace(\"::ActionMenu\", \"::ContextMenu\") ||\n\t\t\t\tmenuItem.data(\"actionId\") === actionItem.data(\"actionId\") + \"::ContextMenu\"\n\t\t\t) {\n\t\t\t\tconst action = menuItem;\n\t\t\t\tsubMenu.splice(subMenu.indexOf(menuItem), 1);\n\t\t\t\treturn action;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * Check's if a particular menu button exists in the context menu, if not creates a new menu button and adds it to the context menu.\n\t * @param actionItem The menu button to find or create\n\t * @param table The MDCTable\n\t * @returns The MenuItem if found, otherwise a new MenuItem\n\t */\n\t_findOrCreateMenuButtonInContextMenu(actionItem: MenuButton, table: MDCTable): MenuItem {\n\t\tconst contextMenu = table.getContextMenu() as Menu;\n\t\tconst contextMenuItems = contextMenu.getItems();\n\t\t//loop over contextMenuItems and check if the required menu button already exists\n\t\tfor (const menuItem of contextMenuItems) {\n\t\t\tif (menuItem.getId().includes(actionItem.getId())) {\n\t\t\t\treturn menuItem;\n\t\t\t}\n\t\t}\n\t\t// if the required menu button does not exist, create a new menu button and add it to the contextMenu\n\t\tconst newMenuButton = new MenuItem({\n\t\t\tid: generate([table.getId(), actionItem.getId(), \"::ContextMenu\"]),\n\t\t\ttext: actionItem.getText()\n\t\t});\n\t\tcontextMenu.addItem(newMenuButton);\n\t\treturn newMenuButton;\n\t}\n\n\t/**\n\t * Split the action items in the context menu.\n\t * @param actionItem The action item to split\n\t * @param contextMenu The context menu\n\t */\n\t_splitActionsInContextMenu(actionItem: Button, contextMenu: Menu): void {\n\t\tconst menuItems = contextMenu.getItems();\n\t\tfor (let i = 0; i < menuItems.length; i++) {\n\t\t\t//check if the menu item is a Menu\n\t\t\tif (menuItems[i].getItems().length > 0) {\n\t\t\t\tif (\n\t\t\t\t\tmenuItems[i]\n\t\t\t\t\t\t.getItems()\n\t\t\t\t\t\t.some((item) => item.data(\"actionId\") === actionItem.data(\"actionId\").replace(\"::ActionMenu\", \"::ContextMenu\"))\n\t\t\t\t) {\n\t\t\t\t\tconst menuItem = menuItems[i];\n\t\t\t\t\tconst subItems = menuItem.getItems();\n\t\t\t\t\t// Remove the menuItem from the context menu\n\t\t\t\t\tcontextMenu.removeItem(menuItem);\n\t\t\t\t\t// Insert these sub-items into the contextMenu starting from the original index\n\t\t\t\t\tsubItems.forEach((subItem, index) => {\n\t\t\t\t\t\tcontextMenu.insertItem(subItem, i + index);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Gets the corresponding context menu action for the table action.\n\t * @param tableAction The action item to split\n\t * @param contextMenu The context menu\n\t * @returns  MenuItem|null the corresponding context menu action or null if not found\n\t */\n\t_getCorrespondingContextMenuAction(tableAction: Button, contextMenu: Menu): MenuItem | null {\n\t\tconst menuItems = contextMenu.getItems();\n\t\tfor (const item of menuItems) {\n\t\t\t// the corresponding context menu action is either an item with an additional \"::ContextMenu\" text at the end of the id\n\t\t\t// or it is a splitted menu item where the \"::ContextMenu\" part is in the middle of the id\n\t\t\tif (\n\t\t\t\ttableAction.getId() + \"::ContextMenu\" === item.getId() ||\n\t\t\t\titem.data(\"actionId\") === tableAction.data(\"actionId\")?.replace(\"::ActionMenu\", \"::ContextMenu\")\n\t\t\t) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t\t// for combined actions, the context menu action is the one with the same text\n\t\t\tif (item.getId().includes(tableAction.getId())) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\t/**\n\t * Adjust the text and visibility of the action items in the context menu.\n\t * @param actionItem The action item to split\n\t * @param contextMenuItem The context menu\n\t * @param tableAction The array of table actions\n\t */\n\t_alignTextAndVisiblityInContextMenu(actionItem: Button, contextMenuItem: MenuItem, tableAction: ActionToolbarAction): void {\n\t\t// change the text of the menu item as the text of action item\n\t\tcontextMenuItem.setText(actionItem.getText());\n\t\t// change the visibility of the contextMenu action as the visibility of table action\n\t\tconst tableActionVisibility = actionItem.getVisible() && tableAction.getVisible();\n\t\tif (tableActionVisibility !== contextMenuItem.getVisible()) {\n\t\t\tcontextMenuItem.setVisible(tableActionVisibility);\n\t\t}\n\t}\n\n\t/**\n\t * Check if an action has been split by RTA.\n\t * @param actionItem The original action item\n\t * @returns Boolean indicating if the action has been split\n\t */\n\t_isActionSplit(actionItem: Button): boolean {\n\t\tif (actionItem.getMetadata().getName() === \"sap.m.MenuButton\") {\n\t\t\treturn false;\n\t\t}\n\t\tconst dependents = actionItem.getDependents();\n\t\t// find all the dependents which are a Flex ManagedObjectModel\n\t\tconst flexManagedObjectModels = dependents.filter((dependent) => dependent instanceof ManagedObjectModel);\n\t\t// check if one of them has the name \"$sap.m.flexibility.SplitButtonsModel\"\n\t\treturn flexManagedObjectModels.some(\n\t\t\t(model) => (model as unknown as ManagedObjectModel).getName() === \"$sap.m.flexibility.SplitButtonsModel\"\n\t\t);\n\t}\n\n\t/**\n\t * Sets a flag to indicate that a context menu item has been pressed.\n\t * @param active\n\t */\n\tsetContextMenuActive(active: boolean): void {\n\t\tthis.contextMenuActive = active;\n\t}\n\n\tisContextMenuActive(): boolean {\n\t\treturn this.contextMenuActive;\n\t}\n\n\t/**\n\t * Make the menu item of SAP Collaboration Manager visible if it is supported.\n\t * @param table\n\t * @param contexts\n\t */\n\tsetCollaborationManagerMenuItemVisibility(table: MDCTable, contexts: Context[]): void {\n\t\t// get collaboration menu item from context menu\n\t\tconst contextMenu = table.getContextMenu() as Menu;\n\t\tconst menuItems = contextMenu.getItems();\n\t\tconst collaborationManagerMenuItem = menuItems?.find((menuItem) => menuItem.getId().includes(\"ContextMenu::CollaborationManager\"));\n\t\tif (collaborationManagerMenuItem) {\n\t\t\t// get collaboration option from collaborative tools service\n\t\t\tconst appComponent = CommonUtils.getAppComponent(table);\n\t\t\tconst collaborativeToolsService = appComponent?.getCollaborativeToolsService();\n\t\t\tconst collaborationOption = collaborativeToolsService?.collaborationService.cmHelperService?.getOptions();\n\t\t\t// get navigation info from table definition\n\t\t\tconst tableDefinition = (table?.getParent() as ITableBlock)?.getTableDefinition();\n\t\t\tconst navigationType = tableDefinition?.annotation?.row?.navigationInfo?.type;\n\t\t\tif (collaborationOption && navigationType === \"Navigation\" && contexts.length > 0) {\n\t\t\t\t// Items to share needs to have an active entity, if it's not Collaborative Draft or a non draft programming model\n\t\t\t\tconst view = CommonUtils.getTargetView(table);\n\t\t\t\tconst collaborativeDraft = view.getController().collaborativeDraft;\n\t\t\t\tconst metaModel = contexts[0].getModel()?.getMetaModel();\n\t\t\t\tconst isDraft = ModelHelper.isDraftSupported(metaModel, contexts[0].getPath());\n\t\t\t\t// If we are in Collaborative Draft or in an non-draft app, we set visible to true.\n\t\t\t\t// Otherwise we only set visible to true, if at least one of the selected contexts is or has an active version.\n\t\t\t\tconst visible =\n\t\t\t\t\tcollaborativeDraft.isCollaborationEnabled() || !isDraft\n\t\t\t\t\t\t? true\n\t\t\t\t\t\t: contexts.some((context) => context.getObject().IsActiveEntity || context.getObject().HasActiveEntity);\n\t\t\t\tcollaborationManagerMenuItem.setVisible(visible);\n\t\t\t\tFESRHelper.setSemanticStepname(collaborationManagerMenuItem, \"press\", \"CM:ShareLink\");\n\t\t\t} else {\n\t\t\t\tcollaborationManagerMenuItem.setVisible(false);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Handler for the beforeOpenContextMenu event of the MDC Table.\n\t * @param oEvent\n\t */\n\t_onContextMenuPress(this: ITableBlock & ContextMenuHandler, oEvent: Table$BeforeOpenContextMenuEvent): void {\n\t\tconst table = oEvent.getSource(),\n\t\t\ttableContexts = table.getSelectedContexts() as Context[], // selected items in the table\n\t\t\tcontextMenuContext = oEvent.getParameter(\"bindingContext\") as Context, // row clicked for context menu\n\t\t\tinternalModelContext = this.getBindingContext(\"internal\") as InternalModelContext;\n\n\t\tconst contextMenuSelection = this.getRelevantSelection(tableContexts, contextMenuContext);\n\n\t\t// Check if all contexts in contextMenuSelection are inactive\n\t\t// if so, set the inactiveContext property in the internal model to true\n\t\t// if just one context is not inactive, set the inactiveContext property to false\n\t\tlet oneContextIsActive = true;\n\t\toneContextIsActive = contextMenuSelection.some((context) => !context.isInactive());\n\t\tinternalModelContext?.setProperty(\"contextmenu/inactiveContext\", !oneContextIsActive);\n\n\t\t// Do not consider empty rows as selected context, for other actions than delete\n\t\tconst activeSelectedContexts = contextMenuSelection.filter(function (oContext: Context) {\n\t\t\treturn !oContext.isInactive();\n\t\t});\n\t\tconst onlyInActiveContextsSelected = contextMenuSelection.length > 0 && activeSelectedContexts.length === 0;\n\t\tconst isInlineCreationMode =\n\t\t\t(table.getParent() as TableAPI & { getCreationMode: Function })?.getCreationMode().getName() ===\n\t\t\tCreationMode.InlineCreationRows;\n\t\tconst tableDefinition = this.getTableDefinition();\n\t\tconst navigableContexts = contextMenuSelection.filter(function (oContext: Context) {\n\t\t\treturn (\n\t\t\t\t!oContext.isInactive() &&\n\t\t\t\toContext\n\t\t\t\t\t.getModel()\n\t\t\t\t\t?.getLocalAnnotationModel()\n\t\t\t\t\t.getProperty(\n\t\t\t\t\t\t\"@$ui5.fe.virtual.routeNavigable-\" +\n\t\t\t\t\t\t\t(tableDefinition.annotation.row?.navigationInfo as { routePath?: string })?.routePath,\n\t\t\t\t\t\toContext\n\t\t\t\t\t) !== false\n\t\t\t);\n\t\t});\n\t\tinternalModelContext?.setProperty(\"contextmenu/selectedContextsIncludingInactive\", contextMenuSelection);\n\t\tinternalModelContext?.setProperty(\"contextmenu/selectedContexts\", activeSelectedContexts);\n\t\tinternalModelContext?.setProperty(\"contextmenu/navigableContexts\", navigableContexts);\n\t\t//reset number of selected contexts to ensure callback for custom enable handler\n\t\tinternalModelContext?.setProperty(\"contextmenu/numberOfSelectedContexts\", -1);\n\t\tinternalModelContext?.setProperty(\"contextmenu/numberOfNavigableContexts\", navigableContexts.length);\n\t\tinternalModelContext?.setProperty(\"contextmenu/numberOfSelectedContexts\", activeSelectedContexts.length);\n\t\tinternalModelContext?.setProperty(\"contextmenu/numberOfSelectedContextsForDelete\", contextMenuSelection.length);\n\n\t\tif (activeSelectedContexts.length > 0) {\n\t\t\t/* Align context menu with RTA changes in table toolbar */\n\t\t\tthis.alignContextMenuWithTableToolbarChanges(table);\n\t\t} else if (onlyInActiveContextsSelected && isInlineCreationMode) {\n\t\t\t// Only Delete is visible\n\t\t\tthis.hideAllContextMenuActionsExceptDelete(table);\n\t\t}\n\n\t\t// Set the visibility of the MenuItem for Collaboration Manager\n\t\tthis.setCollaborationManagerMenuItemVisibility(table, activeSelectedContexts);\n\n\t\t// Check if the context menu contains only not visible items\n\t\t// in that case prevent the context menu from opening\n\t\tconst contextMenu = table.getContextMenu() as Menu;\n\t\tconst menuItems = contextMenu.getItems();\n\n\t\tconst visibleMenuItems = menuItems.filter((menuItem) => menuItem.getVisible());\n\t\tif (visibleMenuItems.length === 0) {\n\t\t\toEvent.preventDefault();\n\t\t}\n\n\t\t// Enablement of the Expand/Collapse buttons\n\t\tconst isExpandable = contextMenuSelection.some((singleContext) => singleContext.isExpanded() !== undefined);\n\t\tconst isCollapsable = contextMenuSelection.some((singleContext) => singleContext.isExpanded());\n\t\tinternalModelContext?.setProperty(\"contextmenu/isExpandable\", isExpandable);\n\t\tinternalModelContext?.setProperty(\"contextmenu/isCollapsable\", isCollapsable);\n\n\t\t// Action enablement for Delete\n\t\tinternalModelContext?.setProperty(\"controlId\", table.getId());\n\t\tdeleteHelper.updateDeleteInfoForSelectedContexts(internalModelContext, contextMenuSelection, true);\n\n\t\t// Action enablement for IBN\n\t\tif (!table.data(\"enableAnalytics\")) {\n\t\t\tconst navigationAvailableMap = table?.data(\"navigationAvailableMap\");\n\t\t\tTableRuntime.setIntentBasedNavigationEnablement(internalModelContext, navigationAvailableMap, activeSelectedContexts, true);\n\t\t}\n\n\t\t// Action enablement for Mass Edit\n\t\tconst updatablePropertyPath = table?.data(\"updatablePropertyPath\");\n\t\tconst draft = table?.data(\"draft\");\n\t\tconst readOnlyDraftEnabled = table.data(\"displayModePropertyBinding\") === \"true\" && draft !== \"undefined\";\n\t\tconst updatableContexts: Context[] = [];\n\t\tfor (const selectedContext of activeSelectedContexts) {\n\t\t\tif (TableRuntime.isUpdatableContext(updatablePropertyPath, selectedContext, readOnlyDraftEnabled)) {\n\t\t\t\tupdatableContexts.push(selectedContext);\n\t\t\t}\n\t\t}\n\t\tinternalModelContext?.setProperty(\"contextmenu/updatableContexts\", updatableContexts);\n\n\t\tif (tableDefinition.control.createEnablement && contextMenuSelection.length === 1) {\n\t\t\tTableRuntime._updateCreateEnablement(\n\t\t\t\tinternalModelContext,\n\t\t\t\ttableDefinition.control.createEnablement,\n\t\t\t\ttable,\n\t\t\t\tcontextMenuSelection[0],\n\t\t\t\ttableDefinition.control.nodeType,\n\t\t\t\ttrue\n\t\t\t);\n\t\t}\n\n\t\tTableRuntime.updateCutCopyPasteEnablement(internalModelContext.getObject(), table, true);\n\t\tTableRuntime.updateMoveUpDownEnablement(internalModelContext.getObject(), table, true);\n\n\t\t// Other action enablement\n\t\tActionRuntime.setActionEnablement(\n\t\t\tinternalModelContext,\n\t\t\tJSON.parse(tableDefinition.operationAvailableMap),\n\t\t\tactiveSelectedContexts,\n\t\t\t\"table\",\n\t\t\ttrue\n\t\t);\n\t}\n\n\tgetRelevantSelection(tableContexts: Context[], contextMenuContext: Context): Context[] {\n\t\tlet contextMenuSelection: Context[];\n\t\tif (tableContexts.includes(contextMenuContext)) {\n\t\t\tcontextMenuSelection = tableContexts;\n\t\t} else {\n\t\t\tcontextMenuSelection = [contextMenuContext] as Context[];\n\t\t}\n\t\treturn contextMenuSelection;\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"ContextMenuHandler-dbg.js"}