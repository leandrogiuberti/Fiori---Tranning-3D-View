{"version":3,"file":"MassEdit.designtime.js","names":["massEditRtaPath","MassEditDesignTime","actions","rename","settings","fe","name","Library","getResourceBundleFor","getText","icon","isEnabled","isManifestChangesEnabled","handler","async","element","dialog","isA","getParent","massEditDialogHelper","getMassEditDialogHelper","configContext","getBindingContext","rtaSelectedItems","getProperty","originalFields","getFieldProperties","map","field","propertyInfo","relativePath","join","result","MassEditDesignDialog","openDialog","isChangeObserved","initialIgnoredFields","getTableDefinition","control","massEdit","ignoredFields","setProperty","extractChanges","id","description","type","value","visibleFields","getPropertyPath","getContent","error","properties","aggregations"],"sources":["./MassEdit.designtime.ts"],"sourcesContent":["import type ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport type { adaptionChange } from \"sap/fe/macros/designtime/Designtime.helper\";\nimport { extractChanges, isManifestChangesEnabled } from \"sap/fe/macros/designtime/Designtime.helper\";\nimport type TableAPI from \"sap/fe/macros/table/TableAPI\";\nimport type Dialog from \"sap/m/Dialog\";\nimport type ManagedObject from \"sap/ui/base/ManagedObject\";\nimport Library from \"sap/ui/core/Lib\";\nimport type Context from \"sap/ui/model/Context\";\nimport { getPropertyPath } from \"../../designtime/Table.designtime.helper\";\nimport MassEditDesignDialog from \"./MassEditDesignDialog\";\n\nconst massEditRtaPath = \"rta/massEditConfigSettings/visibleFields\";\nconst MassEditDesignTime = {\n\tactions: {\n\t\trename: (): null => null, // Remove the rename action of the sap.m.dialog\n\t\tsettings: {\n\t\t\tfe: {\n\t\t\t\tname: (Library.getResourceBundleFor(\"sap.fe.macros\") as ResourceBundle).getText(\"C_MASS_EDIT_DESIGN_CONFIGURATION\"),\n\t\t\t\ticon: \"sap-icon://developer-settings\",\n\t\t\t\tisEnabled: isManifestChangesEnabled,\n\t\t\t\t/**\n\t\t\t\t * Handles the changes for the mass edit configuration.\n\t\t\t\t * @param dialog The dialog that is opened\n\t\t\t\t * @returns The changes\n\t\t\t\t */\n\t\t\t\thandler: async (dialog: Dialog): Promise<adaptionChange[]> => {\n\t\t\t\t\tlet element: ManagedObject | null = dialog;\n\t\t\t\t\twhile (element && !element.isA<TableAPI>(\"sap.fe.macros.table.TableAPI\")) {\n\t\t\t\t\t\telement = element.getParent();\n\t\t\t\t\t}\n\t\t\t\t\tconst massEditDialogHelper = element?.getMassEditDialogHelper();\n\n\t\t\t\t\tif (!element || !massEditDialogHelper) {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst configContext = element.getBindingContext(\"internal\") as Context;\n\t\t\t\t\t\tconst rtaSelectedItems = configContext.getProperty(massEditRtaPath) as undefined | string;\n\t\t\t\t\t\tconst originalFields =\n\t\t\t\t\t\t\trtaSelectedItems ??\n\t\t\t\t\t\t\tmassEditDialogHelper\n\t\t\t\t\t\t\t\t.getFieldProperties()\n\t\t\t\t\t\t\t\t.map((field) => field.propertyInfo.relativePath)\n\t\t\t\t\t\t\t\t.join(\",\");\n\n\t\t\t\t\t\tconst result = await new MassEditDesignDialog(element).openDialog(dialog, originalFields);\n\t\t\t\t\t\tconst isChangeObserved = result !== originalFields;\n\t\t\t\t\t\tconst initialIgnoredFields = element.getTableDefinition().control.massEdit.ignoredFields.join(\",\");\n\t\t\t\t\t\tif (isChangeObserved) {\n\t\t\t\t\t\t\tconfigContext.setProperty(massEditRtaPath, result);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn extractChanges(\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tid: \"visibleFields\",\n\t\t\t\t\t\t\t\t\tname: \"visible fields\",\n\t\t\t\t\t\t\t\t\tdescription: \"Visible fields for the mass edit dialog\",\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tvalue: originalFields\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tid: \"ignoredFields\",\n\t\t\t\t\t\t\t\t\tname: \"ignored fields\",\n\t\t\t\t\t\t\t\t\tdescription: \"Ignored fields for the mass edit dialog\",\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tvalue: initialIgnoredFields\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvisibleFields: originalFields,\n\t\t\t\t\t\t\t\tignoredFields: initialIgnoredFields\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvisibleFields: result,\n\t\t\t\t\t\t\t\tignoredFields: !isChangeObserved ? initialIgnoredFields : \"\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t`${getPropertyPath(element)}/enableMassEdit`,\n\t\t\t\t\t\t\telement.getContent()\n\t\t\t\t\t\t);\n\t\t\t\t\t} catch (error: unknown) {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tproperties: {},\n\taggregations: {}\n};\n\nexport default MassEditDesignTime;\n"],"mappings":";;;;kQAWA,MAAMA,EAAkB,2CACxB,MAAMC,EAAqB,CAC1BC,QAAS,CACRC,OAAQA,IAAY,KACpBC,SAAU,CACTC,GAAI,CACHC,KAAOC,EAAQC,qBAAqB,iBAAoCC,QAAQ,oCAChFC,KAAM,gCACNC,UAAWC,EAMXC,QAASC,UACR,IAAIC,EAAgCC,EACpC,MAAOD,IAAYA,EAAQE,IAAc,gCAAiC,CACzEF,EAAUA,EAAQG,WACnB,CACA,MAAMC,EAAuBJ,GAASK,0BAEtC,IAAKL,IAAYI,EAAsB,CACtC,MAAO,EACR,CACA,IACC,MAAME,EAAgBN,EAAQO,kBAAkB,YAChD,MAAMC,EAAmBF,EAAcG,YAAYxB,GACnD,MAAMyB,EACLF,GACAJ,EACEO,qBACAC,IAAKC,GAAUA,EAAMC,aAAaC,cAClCC,KAAK,KAER,MAAMC,QAAe,IAAIC,EAAqBlB,GAASmB,WAAWlB,EAAQS,GAC1E,MAAMU,EAAmBH,IAAWP,EACpC,MAAMW,EAAuBrB,EAAQsB,qBAAqBC,QAAQC,SAASC,cAAcT,KAAK,KAC9F,GAAII,EAAkB,CACrBd,EAAcoB,YAAYzC,EAAiBgC,EAC5C,CAEA,OAAOU,EACN,CACC,CACCC,GAAI,gBACJrC,KAAM,iBACNsC,YAAa,0CACbC,KAAM,SACNC,MAAOrB,GAER,CACCkB,GAAI,gBACJrC,KAAM,iBACNsC,YAAa,0CACbC,KAAM,SACNC,MAAOV,IAGT,CACCW,cAAetB,EACfe,cAAeJ,GAEhB,CACCW,cAAef,EACfQ,eAAgBL,EAAmBC,EAAuB,IAE3D,GAAGY,EAAgBjC,oBACnBA,EAAQkC,aAEV,CAAE,MAAOC,GACR,MAAO,EACR,MAKJC,WAAY,CAAC,EACbC,aAAc,CAAC,GACd,OAEanD,CAAkB","ignoreList":[]}