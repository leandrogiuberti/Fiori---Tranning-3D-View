{"version":3,"names":["massEditRtaPath","MassEditDesignTime","actions","rename","settings","fe","name","Library","getResourceBundleFor","getText","icon","isEnabled","isManifestChangesEnabled","handler","dialog","element","isA","getParent","massEditDialogHelper","getMassEditDialogHelper","configContext","getBindingContext","rtaSelectedItems","getProperty","originalFields","getFieldProperties","map","field","propertyInfo","relativePath","join","result","MassEditDesignDialog","openDialog","isChangeObserved","initialIgnoredFields","getTableDefinition","control","massEdit","ignoredFields","setProperty","extractChanges","id","description","type","value","visibleFields","getPropertyPath","getContent","error","properties","aggregations"],"sourceRoot":".","sources":["MassEdit.designtime.ts"],"sourcesContent":["import type ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport type { adaptionChange } from \"sap/fe/macros/designtime/Designtime.helper\";\nimport { extractChanges, isManifestChangesEnabled } from \"sap/fe/macros/designtime/Designtime.helper\";\nimport type TableAPI from \"sap/fe/macros/table/TableAPI\";\nimport type Dialog from \"sap/m/Dialog\";\nimport type ManagedObject from \"sap/ui/base/ManagedObject\";\nimport Library from \"sap/ui/core/Lib\";\nimport type Context from \"sap/ui/model/Context\";\nimport { getPropertyPath } from \"../../designtime/Table.designtime.helper\";\nimport MassEditDesignDialog from \"./MassEditDesignDialog\";\n\nconst massEditRtaPath = \"rta/massEditConfigSettings/visibleFields\";\nconst MassEditDesignTime = {\n\tactions: {\n\t\trename: (): null => null, // Remove the rename action of the sap.m.dialog\n\t\tsettings: {\n\t\t\tfe: {\n\t\t\t\tname: (Library.getResourceBundleFor(\"sap.fe.macros\") as ResourceBundle).getText(\"C_MASS_EDIT_DESIGN_CONFIGURATION\"),\n\t\t\t\ticon: \"sap-icon://developer-settings\",\n\t\t\t\tisEnabled: isManifestChangesEnabled,\n\t\t\t\t/**\n\t\t\t\t * Handles the changes for the mass edit configuration.\n\t\t\t\t * @param dialog The dialog that is opened\n\t\t\t\t * @returns The changes\n\t\t\t\t */\n\t\t\t\thandler: async (dialog: Dialog): Promise<adaptionChange[]> => {\n\t\t\t\t\tlet element: ManagedObject | null = dialog;\n\t\t\t\t\twhile (element && !element.isA<TableAPI>(\"sap.fe.macros.table.TableAPI\")) {\n\t\t\t\t\t\telement = element.getParent();\n\t\t\t\t\t}\n\t\t\t\t\tconst massEditDialogHelper = element?.getMassEditDialogHelper();\n\n\t\t\t\t\tif (!element || !massEditDialogHelper) {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst configContext = element.getBindingContext(\"internal\") as Context;\n\t\t\t\t\t\tconst rtaSelectedItems = configContext.getProperty(massEditRtaPath) as undefined | string;\n\t\t\t\t\t\tconst originalFields =\n\t\t\t\t\t\t\trtaSelectedItems ??\n\t\t\t\t\t\t\tmassEditDialogHelper\n\t\t\t\t\t\t\t\t.getFieldProperties()\n\t\t\t\t\t\t\t\t.map((field) => field.propertyInfo.relativePath)\n\t\t\t\t\t\t\t\t.join(\",\");\n\n\t\t\t\t\t\tconst result = await new MassEditDesignDialog(element).openDialog(dialog, originalFields);\n\t\t\t\t\t\tconst isChangeObserved = result !== originalFields;\n\t\t\t\t\t\tconst initialIgnoredFields = element.getTableDefinition().control.massEdit.ignoredFields.join(\",\");\n\t\t\t\t\t\tif (isChangeObserved) {\n\t\t\t\t\t\t\tconfigContext.setProperty(massEditRtaPath, result);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn extractChanges(\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tid: \"visibleFields\",\n\t\t\t\t\t\t\t\t\tname: \"visible fields\",\n\t\t\t\t\t\t\t\t\tdescription: \"Visible fields for the mass edit dialog\",\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tvalue: originalFields\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tid: \"ignoredFields\",\n\t\t\t\t\t\t\t\t\tname: \"ignored fields\",\n\t\t\t\t\t\t\t\t\tdescription: \"Ignored fields for the mass edit dialog\",\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tvalue: initialIgnoredFields\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvisibleFields: originalFields,\n\t\t\t\t\t\t\t\tignoredFields: initialIgnoredFields\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvisibleFields: result,\n\t\t\t\t\t\t\t\tignoredFields: !isChangeObserved ? initialIgnoredFields : \"\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t`${getPropertyPath(element)}/enableMassEdit`,\n\t\t\t\t\t\t\telement.getContent()\n\t\t\t\t\t\t);\n\t\t\t\t\t} catch (error: unknown) {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tproperties: {},\n\taggregations: {}\n};\n\nexport default MassEditDesignTime;\n"],"mappings":";;;;;;;;;;EAWA,MAAMA,eAAe,GAAG,0CAA0C;EAClE,MAAMC,kBAAkB,GAAG;IAC1BC,OAAO,EAAE;MACRC,MAAM,EAAEA,CAAA,KAAY,IAAI;MAAE;MAC1BC,QAAQ,EAAE;QACTC,EAAE,EAAE;UACHC,IAAI,EAAGC,OAAO,CAACC,oBAAoB,CAAC,eAAe,CAAC,CAAoBC,OAAO,CAAC,kCAAkC,CAAC;UACnHC,IAAI,EAAE,+BAA+B;UACrCC,SAAS,EAAEC,wBAAwB;UACnC;AACJ;AACA;AACA;AACA;UACIC,OAAO,EAAE,MAAOC,MAAc,IAAgC;YAC7D,IAAIC,OAA6B,GAAGD,MAAM;YAC1C,OAAOC,OAAO,IAAI,CAACA,OAAO,CAACC,GAAG,CAAW,8BAA8B,CAAC,EAAE;cACzED,OAAO,GAAGA,OAAO,CAACE,SAAS,CAAC,CAAC;YAC9B;YACA,MAAMC,oBAAoB,GAAGH,OAAO,EAAEI,uBAAuB,CAAC,CAAC;YAE/D,IAAI,CAACJ,OAAO,IAAI,CAACG,oBAAoB,EAAE;cACtC,OAAO,EAAE;YACV;YACA,IAAI;cACH,MAAME,aAAa,GAAGL,OAAO,CAACM,iBAAiB,CAAC,UAAU,CAAY;cACtE,MAAMC,gBAAgB,GAAGF,aAAa,CAACG,WAAW,CAACvB,eAAe,CAAuB;cACzF,MAAMwB,cAAc,GACnBF,gBAAgB,IAChBJ,oBAAoB,CAClBO,kBAAkB,CAAC,CAAC,CACpBC,GAAG,CAAEC,KAAK,IAAKA,KAAK,CAACC,YAAY,CAACC,YAAY,CAAC,CAC/CC,IAAI,CAAC,GAAG,CAAC;cAEZ,MAAMC,MAAM,GAAG,MAAM,IAAIC,oBAAoB,CAACjB,OAAO,CAAC,CAACkB,UAAU,CAACnB,MAAM,EAAEU,cAAc,CAAC;cACzF,MAAMU,gBAAgB,GAAGH,MAAM,KAAKP,cAAc;cAClD,MAAMW,oBAAoB,GAAGpB,OAAO,CAACqB,kBAAkB,CAAC,CAAC,CAACC,OAAO,CAACC,QAAQ,CAACC,aAAa,CAACT,IAAI,CAAC,GAAG,CAAC;cAClG,IAAII,gBAAgB,EAAE;gBACrBd,aAAa,CAACoB,WAAW,CAACxC,eAAe,EAAE+B,MAAM,CAAC;cACnD;cAEA,OAAOU,cAAc,CACpB,CACC;gBACCC,EAAE,EAAE,eAAe;gBACnBpC,IAAI,EAAE,gBAAgB;gBACtBqC,WAAW,EAAE,yCAAyC;gBACtDC,IAAI,EAAE,QAAQ;gBACdC,KAAK,EAAErB;cACR,CAAC,EACD;gBACCkB,EAAE,EAAE,eAAe;gBACnBpC,IAAI,EAAE,gBAAgB;gBACtBqC,WAAW,EAAE,yCAAyC;gBACtDC,IAAI,EAAE,QAAQ;gBACdC,KAAK,EAAEV;cACR,CAAC,CACD,EACD;gBACCW,aAAa,EAAEtB,cAAc;gBAC7Be,aAAa,EAAEJ;cAChB,CAAC,EACD;gBACCW,aAAa,EAAEf,MAAM;gBACrBQ,aAAa,EAAE,CAACL,gBAAgB,GAAGC,oBAAoB,GAAG;cAC3D,CAAC,EACD,GAAGY,eAAe,CAAChC,OAAO,CAAC,iBAAiB,EAC5CA,OAAO,CAACiC,UAAU,CAAC,CACpB,CAAC;YACF,CAAC,CAAC,OAAOC,KAAc,EAAE;cACxB,OAAO,EAAE;YACV;UACD;QACD;MACD;IACD,CAAC;IACDC,UAAU,EAAE,CAAC,CAAC;IACdC,YAAY,EAAE,CAAC;EAChB,CAAC;EAAC,OAEalD,kBAAkB;AAAA","ignoreList":[],"file":"MassEdit-dbg.designtime.js"}