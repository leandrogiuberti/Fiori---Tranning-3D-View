/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/core/helpers/SizeHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DisplayModeFormatter","sap/m/table/Util","sap/ui/mdc/odata/v4/TypeMap"],function(e,t,a,n,i,o){"use strict";var l=n.getDisplayMode;var r=a.isPathAnnotationExpression;var s=a.isAnnotationOfType;const p={getMDCColumnWidthFromDataField:function(e,t,a){let n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const i=t.find(t=>t.annotationPath&&a.resolvePath(t.annotationPath)?.target?.fullyQualifiedName===e?.fullyQualifiedName);return i?this.getMDCColumnWidthFromProperty(i,t,n):0},getMDCColumnWidthFromProperty:function(t,a){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let l=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;let r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;const s=Object.assign({headerGap:n&&l,gap:0,truncateLabel:!n,excludeProperties:[],required:r},t.visualSettings?.widthCalculation);let p;if(t.propertyInfos?.length){p=t.propertyInfos.map(e=>{const t=a.find(t=>t.key===e);const n=t&&t.dataType&&!t.typeConfig?o.getTypeConfig(t.dataType,t.formatOptions,t.constraints):null;return n?n.typeInstance:t?.typeConfig?.typeInstance}).filter(e=>e)}else{let e=null;if(t.dataType&&!t.typeConfig){e=o.getTypeConfig(t.dataType,t.formatOptions,t.constraints)}if(t.typeConfig?.typeInstance||e){p=e?[e.typeInstance]:[t.typeConfig?.typeInstance]}}const u=p?i.calcColumnWidth(p,t.label,s):null;if(!u){e.error(`Cannot compute the column width for property: ${t.key}`)}return u?parseFloat(u.replace("Rem","")):0},getWidthForDataFieldForAnnotation:function(e,a,n,i){let o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;const l=s(e,"com.sap.vocabularies.UI.v1.DataFieldForAnnotation")?e?.Target?.$target:undefined;let p=0,u=0;if(s(l,"com.sap.vocabularies.UI.v1.DataPointType")&&l?.Visualization){switch(l.Visualization){case"UI.VisualizationType/Rating":const e=l.TargetValue;p=parseInt(e,10)*1.375;break;case"UI.VisualizationType/Progress":default:p=5}const a=l?l.label:e?.Label?.toString()||"";u=o&&a?t.getButtonWidth(a):0}else if(i&&n&&s(l,"com.sap.vocabularies.Communication.v1.ContactType")&&r(l.fn)){p=this.getMDCColumnWidthFromDataField(l.fn.$target,n,i,a)}return{labelWidth:u,propertyWidth:p}},getWidthForDataField:function(a,n,i,o,r){const s=a.Value?.$target,p=s?.annotations?.Common?.Text,u=l(a.Value?.$target);let c=0,d=0;if(s){switch(u){case"Description":c=this.getMDCColumnWidthFromDataField(p.$target,i,o,r)-1;break;case"DescriptionValue":case"ValueDescription":case"Value":default:c=this.getMDCColumnWidthFromDataField(s,i,o,r)-1}const e=a.Label?a.Label:s.label;d=n&&e?t.getButtonWidth(e):0}else{e.error(`Cannot compute width for type object: ${a.$Type}`)}return{labelWidth:d,propertyWidth:c}}};return p},false);
//# sourceMappingURL=TableSizeHelper.js.map