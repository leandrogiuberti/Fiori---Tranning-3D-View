{"version":3,"file":"ChartHelper.js","names":["getEntitySetPath","annotationContext","getPath","replace","ChartTypeEnum","DimensionRoleTypeEnum","ChartHelper","formatJSONToString","crit","undefined","criticality","JSON","stringify","RegExp","formatChartType","chartType","$EnumMember","formatDimensions","annotation","getObject","metaModel","getModel","entitySetPath","dimensions","isNavigationText","DimensionAttributes","dimension","Dimensions","key","$PropertyPath","text","includes","Log","error","$Path","indexOf","chartDimension","textPath","label","role","attribute","Dimension","Role","this","fetchCriticality","createBindingContext","push","dimensionModel","JSONModel","$$valueAsPromise","oMetaModel","oCtx","UI","aValueCriticality","oCriticality","oValueCriticality","VeryPositive","Positive","Critical","VeryNegative","Negative","Neutral","i","length","Criticality","endsWith","Value","sKey","formatMeasures","getData","getUiChart","presentationContext","getUiControl","getOperationAvailableMap","chart","contextContext","chartCollection","Actions","ActionHelper","getSortConditions","oContext","oPresentationVariant","sPresentationVariantPath","oApplySupported","CommonHelper","_isPresentationVariantAnnotation","SortOrder","aSortConditions","sorters","sEntityPath","split","forEach","oCondition","arguments","oSortProperty","DynamicProperty","$AnnotationPath","Name","Property","aGroupableProperties","GroupableProperties","oSorter","name","descending","Descending","Error","_getModel","oCollection","oInterface","context","isDataFieldForActionButtonEnabled","bIsBound","sAction","sOperationAvailableMap","sEnableSelectOn","oModel","sNavPath","sPartner","$Partner","oOperationAvailableMap","parse","aPath","sNumberOfSelectedContexts","getNumberOfContextsExpression","sPath","getHiddenPathExpressionForTableActionsAndIBN","sHiddenPath","oDetails","sPropertyPath","sEntitySetPath","ODataModelAnnotationHelper","getNavigationPath","aSplitHiddenPath","sNavigationPath","slice","join","getPressEventForDataFieldForActionButton","id","action","operationAvailableMap","getPressEventDataFieldForActionButton","contexts","getActionType","valueOf","getCollectionName","collection","collectionSplit","requiresIContext"],"sources":["./ChartHelper.ts"],"sourcesContent":["import type * as Edm from \"@sap-ux/vocabularies-types/Edm\";\nimport { AggregationAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/Aggregation\";\nimport type { SortOrderType } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport { CommonAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport type {\n\tChart,\n\tChartType,\n\tCriticalityType,\n\tDataFieldForAction,\n\tOperationGroupingType,\n\tPresentationVariantType,\n\tValueCriticalityType\n} from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { UIAnnotationTerms, UIAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport type DimensionRoleType from \"sap/chart/data/DimensionRoleType\";\nimport type AttributeModel from \"sap/fe/core/buildingBlocks/templating/AttributeModel\";\nimport type { ChartApplySupported } from \"sap/fe/core/converters/controls/Common/Chart\";\nimport { getUiControl } from \"sap/fe/core/converters/controls/Common/DataVisualization\";\nimport type { ComputedAnnotationInterface } from \"sap/fe/core/templating/UIFormatters\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport type { MeasureType } from \"sap/fe/macros/chart/MdcChartTemplate\";\nimport ActionHelper from \"sap/fe/macros/internal/helpers/ActionHelper\";\nimport type Context from \"sap/ui/model/Context\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport ODataModelAnnotationHelper from \"sap/ui/model/odata/v4/AnnotationHelper\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type { ExpandPathType, MetaModelEnum, MetaModelType } from \"types/metamodel_types\";\n\nfunction getEntitySetPath(annotationContext: Context): string {\n\treturn annotationContext.getPath().replace(/@com.sap.vocabularies.UI.v1.(Chart|PresentationVariant).*/, \"\");\n}\n\nconst ChartTypeEnum = {\n\t\"com.sap.vocabularies.UI.v1.ChartType/Column\": \"column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked\": \"stacked_column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/ColumnDual\": \"dual_column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/ColumnStackedDual\": \"dual_stacked_column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked100\": \"100_stacked_column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/ColumnStackedDual100\": \"100_dual_stacked_column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Bar\": \"bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/BarStacked\": \"stacked_bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/BarDual\": \"dual_bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/BarStackedDual\": \"dual_stacked_bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/BarStacked100\": \"100_stacked_bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/BarStackedDual100\": \"100_dual_stacked_bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Area\": \"area\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/AreaStacked\": \"stacked_column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/AreaStacked100\": \"100_stacked_column\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HorizontalArea\": \"bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked\": \"stacked_bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked100\": \"100_stacked_bar\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Line\": \"line\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/LineDual\": \"dual_line\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Combination\": \"combination\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/CombinationStacked\": \"stacked_combination\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/CombinationDual\": \"dual_combination\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/CombinationStackedDual\": \"dual_stacked_combination\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HorizontalCombinationStacked\": \"horizontal_stacked_combination\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Pie\": \"pie\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Donut\": \"donut\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Scatter\": \"scatter\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Bubble\": \"bubble\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Radar\": \"line\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HeatMap\": \"heatmap\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/TreeMap\": \"treemap\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Waterfall\": \"waterfall\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/Bullet\": \"bullet\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/VerticalBullet\": \"vertical_bullet\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HorizontalWaterfall\": \"horizontal_waterfall\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HorizontalCombinationDual\": \"dual_horizontal_combination\",\n\t\"com.sap.vocabularies.UI.v1.ChartType/HorizontalCombinationStackedDual\": \"dual_horizontal_stacked_combination\"\n};\nconst DimensionRoleTypeEnum = {\n\t\"com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Category\": \"category\",\n\t\"com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Series\": \"series\",\n\t\"com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Category2\": \"category2\"\n};\n/**\n * Helper class for sap.fe.macros Chart phantom control for preprocessing.\n * <h3><b>Note:</b></h3>\n * The class is experimental and the API/behaviour is not finalised\n * and hence this should not be used for productive usage.\n * Especially this class is not intended to be used for the FE scenario,\n * here we shall use sap.fe.macros.ChartHelper that is especially tailored for V4\n * meta model\n * @author SAP SE\n * @private\n * @since 1.62.0\n * @alias sap.fe.macros.ChartHelper\n */\nconst ChartHelper = {\n\tformatJSONToString(crit: object | undefined): string | undefined {\n\t\tif (!crit) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tlet criticality = JSON.stringify(crit);\n\t\tcriticality = criticality.replace(new RegExp(\"{\", \"g\"), \"\\\\{\");\n\t\tcriticality = criticality.replace(new RegExp(\"}\", \"g\"), \"\\\\}\");\n\t\treturn criticality;\n\t},\n\tformatChartType(chartType: ChartType): string {\n\t\treturn ChartTypeEnum[(chartType as unknown as MetaModelEnum<ChartType>)?.$EnumMember as keyof typeof ChartTypeEnum];\n\t},\n\tformatDimensions(annotationContext: Context): Context {\n\t\tconst annotation = annotationContext.getObject(\"./\") as Chart,\n\t\t\tmetaModel = annotationContext.getModel(),\n\t\t\tentitySetPath = getEntitySetPath(annotationContext),\n\t\t\tdimensions = [];\n\n\t\tlet isNavigationText = false;\n\n\t\t//perhaps there are no dimension\n\t\tannotation.DimensionAttributes = annotation.DimensionAttributes || [];\n\n\t\tfor (const dimension of annotation.Dimensions) {\n\t\t\tconst key = (dimension as unknown as ExpandPathType<Edm.PropertyPath>).$PropertyPath;\n\t\t\tconst text = metaModel.getObject(`${entitySetPath + key}@${CommonAnnotationTerms.Text}`) || {};\n\t\t\tif (key.includes(\"/\")) {\n\t\t\t\tLog.error(`$expand is not yet supported. Dimension: ${key} from an association cannot be used`);\n\t\t\t}\n\t\t\tif (text.$Path && text.$Path.indexOf(\"/\") > -1) {\n\t\t\t\tLog.error(\n\t\t\t\t\t`$expand is not yet supported. Text Property: ${text.$Path} from an association cannot be used for the dimension ${key}`\n\t\t\t\t);\n\t\t\t\tisNavigationText = true;\n\t\t\t}\n\n\t\t\tconst chartDimension: { [key: string]: string | undefined } = {\n\t\t\t\tkey: key,\n\t\t\t\ttextPath: !isNavigationText ? text.$Path : undefined,\n\t\t\t\tlabel: metaModel.getObject(`${entitySetPath + key}@${CommonAnnotationTerms.Label}`),\n\t\t\t\trole: \"category\"\n\t\t\t};\n\n\t\t\tfor (const attribute of annotation.DimensionAttributes) {\n\t\t\t\tif (chartDimension.key === (attribute.Dimension as unknown as ExpandPathType<Edm.PropertyPath>)?.$PropertyPath) {\n\t\t\t\t\tchartDimension.role =\n\t\t\t\t\t\tDimensionRoleTypeEnum[\n\t\t\t\t\t\t\t(attribute.Role as unknown as MetaModelEnum<DimensionRoleType>)\n\t\t\t\t\t\t\t\t?.$EnumMember as keyof typeof DimensionRoleTypeEnum\n\t\t\t\t\t\t] || chartDimension.role;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst criticality = this.fetchCriticality(metaModel, metaModel.createBindingContext(entitySetPath + key));\n\t\t\tchartDimension.criticality = this.formatJSONToString(criticality);\n\t\t\tdimensions.push(chartDimension);\n\t\t}\n\n\t\tconst dimensionModel = new JSONModel(dimensions);\n\t\t(dimensionModel as AttributeModel).$$valueAsPromise = true;\n\t\treturn dimensionModel.createBindingContext(\"/\");\n\t},\n\n\tfetchCriticality(oMetaModel: ODataMetaModel, oCtx: Context): object | undefined {\n\t\tconst UI = \"@com.sap.vocabularies.UI.v1\";\n\t\tconst aValueCriticality: MetaModelType<ValueCriticalityType>[] = oMetaModel.getObject(`${UI}.ValueCriticality`, oCtx);\n\t\tlet oCriticality: Record<string, unknown[]> | undefined, oValueCriticality: MetaModelType<ValueCriticalityType>;\n\n\t\tif (aValueCriticality) {\n\t\t\toCriticality = {\n\t\t\t\tVeryPositive: [],\n\t\t\t\tPositive: [],\n\t\t\t\tCritical: [],\n\t\t\t\tVeryNegative: [],\n\t\t\t\tNegative: [],\n\t\t\t\tNeutral: []\n\t\t\t};\n\n\t\t\tfor (let i = 0; i < aValueCriticality.length; i++) {\n\t\t\t\toValueCriticality = aValueCriticality[i];\n\t\t\t\tconst criticality = oValueCriticality.Criticality as unknown as MetaModelEnum<CriticalityType>;\n\t\t\t\tif (criticality?.$EnumMember.endsWith(\"VeryPositive\")) {\n\t\t\t\t\toCriticality.VeryPositive.push(oValueCriticality.Value);\n\t\t\t\t} else if (criticality?.$EnumMember.endsWith(\"Positive\")) {\n\t\t\t\t\toCriticality.Positive.push(oValueCriticality.Value);\n\t\t\t\t} else if (criticality?.$EnumMember.endsWith(\"Critical\")) {\n\t\t\t\t\toCriticality.Critical.push(oValueCriticality.Value);\n\t\t\t\t} else if (criticality?.$EnumMember.endsWith(\"VeryNegative\")) {\n\t\t\t\t\toCriticality.VeryNegative.push(oValueCriticality.Value);\n\t\t\t\t} else if (criticality?.$EnumMember.endsWith(\"Negative\")) {\n\t\t\t\t\toCriticality.Negative.push(oValueCriticality.Value);\n\t\t\t\t} else {\n\t\t\t\t\toCriticality.Neutral.push(oValueCriticality.Value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const sKey in oCriticality) {\n\t\t\t\tif (oCriticality[sKey]?.length == 0) {\n\t\t\t\t\tdelete oCriticality[sKey];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn oCriticality;\n\t},\n\n\tformatMeasures(annotationContext: Context): MeasureType[] {\n\t\treturn (annotationContext.getModel() as JSONModel).getData();\n\t},\n\n\tgetUiChart(presentationContext: Context): Context {\n\t\treturn getUiControl(presentationContext, `@${UIAnnotationTerms.Chart}`);\n\t},\n\tgetOperationAvailableMap(chart: Chart, contextContext: ComputedAnnotationInterface): string {\n\t\tconst chartCollection = chart?.Actions || [];\n\t\treturn JSON.stringify(ActionHelper.getOperationAvailableMap(chartCollection, \"chart\", contextContext));\n\t},\n\n\t/**\n\t * Returns a JSON object containing Presentation Variant sort conditions.\n\t * @param oContext\n\t * @param oContext.getPath\n\t * @param oContext.getModel\n\t * @param oPresentationVariant Presentation Variant annotation\n\t * @param sPresentationVariantPath\n\t * @param oApplySupported\n\t * @returns JSON object\n\t */\n\tgetSortConditions: function (\n\t\toContext: Context,\n\t\toPresentationVariant: MetaModelType<PresentationVariantType>,\n\t\tsPresentationVariantPath: string,\n\t\toApplySupported: ChartApplySupported\n\t):\n\t\t| {\n\t\t\t\tsorters: { name: string; descending: boolean }[];\n\t\t  }\n\t\t| undefined {\n\t\tif (\n\t\t\toPresentationVariant &&\n\t\t\tCommonHelper._isPresentationVariantAnnotation(sPresentationVariantPath) &&\n\t\t\toPresentationVariant.SortOrder\n\t\t) {\n\t\t\tconst aSortConditions: {\n\t\t\t\tsorters: { name: string; key: string; descending: boolean }[];\n\t\t\t} = {\n\t\t\t\tsorters: []\n\t\t\t};\n\t\t\tconst sEntityPath = oContext.getPath().split(\"@\")[0];\n\t\t\toPresentationVariant.SortOrder.forEach(function (oCondition: MetaModelType<SortOrderType> = {}): void {\n\t\t\t\tlet oSortProperty = \"\";\n\t\t\t\tif (oCondition.DynamicProperty) {\n\t\t\t\t\toSortProperty =\n\t\t\t\t\t\t\"_fe_aggregatable_\" + oContext.getModel().getObject(sEntityPath + oCondition.DynamicProperty.$AnnotationPath)?.Name;\n\t\t\t\t} else if (oCondition.Property) {\n\t\t\t\t\tconst aGroupableProperties = oApplySupported.GroupableProperties;\n\t\t\t\t\tif (aGroupableProperties && aGroupableProperties.length) {\n\t\t\t\t\t\tfor (let i = 0; i < aGroupableProperties.length; i++) {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t(aGroupableProperties[i] as { $PropertyPath: string }).$PropertyPath === oCondition.Property.$PropertyPath\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\toSortProperty = \"_fe_groupable_\" + oCondition.Property.$PropertyPath;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!oSortProperty) {\n\t\t\t\t\t\t\t\toSortProperty = \"_fe_aggregatable_\" + oCondition.Property.$PropertyPath;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (\n\t\t\t\t\t\toContext\n\t\t\t\t\t\t\t.getModel()\n\t\t\t\t\t\t\t.getObject(`${sEntityPath + oCondition.Property.$PropertyPath}@${AggregationAnnotationTerms.Groupable}`)\n\t\t\t\t\t) {\n\t\t\t\t\t\toSortProperty = \"_fe_groupable_\" + oCondition.Property.$PropertyPath;\n\t\t\t\t\t} else {\n\t\t\t\t\t\toSortProperty = \"_fe_aggregatable_\" + oCondition.Property.$PropertyPath;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (oSortProperty) {\n\t\t\t\t\tconst oSorter = {\n\t\t\t\t\t\tname: oSortProperty,\n\t\t\t\t\t\tkey: oSortProperty,\n\t\t\t\t\t\tdescending: !!oCondition.Descending\n\t\t\t\t\t};\n\t\t\t\t\taSortConditions.sorters.push(oSorter);\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(\"Please define the right path to the sort property\");\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn aSortConditions;\n\t\t}\n\t\treturn undefined;\n\t},\n\t_getModel(oCollection: unknown, oInterface: ComputedAnnotationInterface): Context {\n\t\treturn oInterface.context;\n\t},\n\t// TODO: combine this one with the one from the table\n\tisDataFieldForActionButtonEnabled(\n\t\tbIsBound: boolean,\n\t\tsAction: string,\n\t\toCollection: Context,\n\t\tsOperationAvailableMap: string,\n\t\tsEnableSelectOn: string\n\t): string {\n\t\tif (bIsBound !== true) {\n\t\t\treturn \"true\";\n\t\t}\n\t\tconst oModel = oCollection.getModel();\n\t\tconst sNavPath = oCollection.getPath();\n\t\tconst sPartner = oModel.getObject(sNavPath).$Partner;\n\t\tconst oOperationAvailableMap = sOperationAvailableMap && JSON.parse(sOperationAvailableMap);\n\t\tconst aPath = oOperationAvailableMap && oOperationAvailableMap[sAction] && oOperationAvailableMap[sAction].split(\"/\");\n\t\tconst sNumberOfSelectedContexts = ActionHelper.getNumberOfContextsExpression(sEnableSelectOn);\n\t\tif (aPath && aPath[0] === sPartner) {\n\t\t\tconst sPath = oOperationAvailableMap[sAction].replace(sPartner + \"/\", \"\");\n\t\t\treturn \"{= ${\" + sNumberOfSelectedContexts + \" && ${\" + sPath + \"}}\";\n\t\t} else {\n\t\t\treturn \"{= ${\" + sNumberOfSelectedContexts + \"}\";\n\t\t}\n\t},\n\tgetHiddenPathExpressionForTableActionsAndIBN(sHiddenPath: string, oDetails: ComputedAnnotationInterface): string | true {\n\t\tconst oContext = oDetails.context,\n\t\t\tsPropertyPath = oContext.getPath(),\n\t\t\tsEntitySetPath = ODataModelAnnotationHelper.getNavigationPath(sPropertyPath);\n\t\tif (sHiddenPath.indexOf(\"/\") > 0) {\n\t\t\tconst aSplitHiddenPath = sHiddenPath.split(\"/\");\n\t\t\tconst sNavigationPath = aSplitHiddenPath[0];\n\t\t\t// supports visiblity based on the property from the partner association\n\t\t\tif (oContext.getObject(sEntitySetPath + \"/$Partner\") === sNavigationPath) {\n\t\t\t\treturn \"{= !%{\" + aSplitHiddenPath.slice(1).join(\"/\") + \"} }\";\n\t\t\t}\n\t\t\t// any other association will be ignored and the button will be made visible\n\t\t}\n\t\treturn true;\n\t},\n\t/**\n\t * Method to get press event for DataFieldForActionButton.\n\t * @param id Current control ID\n\t * @param action DataFieldForAction model\n\t * @param operationAvailableMap Stringified JSON object\n\t * @returns A binding expression for the press property of the DataFieldForActionButton\n\t */\n\tgetPressEventForDataFieldForActionButton(\n\t\tid: string,\n\t\taction: MetaModelType<DataFieldForAction> & { InvocationGrouping: MetaModelEnum<OperationGroupingType> },\n\t\toperationAvailableMap: string\n\t): string {\n\t\treturn ActionHelper.getPressEventDataFieldForActionButton(\n\t\t\tid,\n\t\t\taction,\n\t\t\t{\n\t\t\t\tcontexts: \"${internal>selectedContexts}\"\n\t\t\t},\n\t\t\toperationAvailableMap\n\t\t);\n\t},\n\t/**\n\t * @param action DataFieldForAction model\n\t * @returns A Boolean value depending on the action type\n\t */\n\tgetActionType(action: DataFieldForAction): boolean {\n\t\treturn (\n\t\t\t(action[\"$Type\"].includes(UIAnnotationTypes.DataFieldForIntentBasedNavigation) ||\n\t\t\t\taction[\"$Type\"].includes(UIAnnotationTypes.DataFieldForAction)) &&\n\t\t\taction[\"Inline\"]\n\t\t).valueOf();\n\t},\n\tgetCollectionName(collection: string): string {\n\t\tconst collectionSplit = collection.split(\"/\");\n\t\treturn collectionSplit[collectionSplit.length - 1];\n\t}\n};\n(ChartHelper.getSortConditions as { requiresIContext?: boolean }).requiresIContext = true;\n\nexport default ChartHelper;\n"],"mappings":"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","ignoreList":[]}