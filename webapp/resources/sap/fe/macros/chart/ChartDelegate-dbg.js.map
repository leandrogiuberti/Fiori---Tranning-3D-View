{"version":3,"names":["ChartDelegate","Object","assign","BaseChartDelegate","apiVersion","_loadChart","Library","load","name","_handleProperty","oContext","oMDCChart","mEntitySetAnnotations","mKnownAggregatableProps","mCustomAggregates","aProperties","sCriticality","unitOfMeasures","oApplySupported","CommonHelper","parseCustomData","data","sortRestrictionsInfo","getSortRestrictionsInfo","metaModel","getModel","entityTypePath","bindingPath","ModelHelper","getEntitySetPath","filterRestrictions","CommonUtils","getFilterRestrictionsByPath","propertyFilterableData","getFilterableData","NonFilterableProperties","keys","FilterAllowedExpressions","oObj","getObject","getPath","sKey","aModes","getP13nMode","checkForNonfilterableEntitySet","$kind","$isCollection","oPropertyAnnotations","sPath","getMetaContext","aGroupableProperties","GroupableProperties","aAggregatableProperties","AggregatableProperties","bGroupable","checkPropertyType","bAggregatable","customAggregates","length","includes","propertyFilterable","isPropertyFilterable","aAggregateProperties","_createPropertyInfosForAggregatable","$Type","forEach","oAggregateProperty","path","push","aKnownAggregatableProps","aGroupablePropertiesValues","map","oProperty","$PropertyPath","addPropertyToChart","checkPropertyFilterable","undefined","sName","sTextProperty","$Path","bIsNavigationText","Log","error","indexOf","_getSortable","propertyInfo","_getUnitOfMeasures","entityType","entitySetPath","context","createBindingContext","propertyAnnotations","unit","isFilterable","oFilterRestrictionsInfo","isSortable","bIsGroupable","bIsAggregatable","bIsHidden","chartRole","ChartItemRoleType","category","chartData","Array","isArray","record","split","pop","toLowerCase","label","toString","sortable","filterable","groupable","aggregatable","maxConditions","isMultiValueFilterExpression","role","criticality","dataType","visible","textProperty","textFormatter","timeUnitType","_getTimeType","formatOptions","style","key","TimeUnitType","Date","fiscalyear","fiscalyearperiod","yearmonth","yearquarter","yearweek","yearmonthday","bEntitySetFilerable","getMetaModel","Filterable","filter","item","setP13nMode","element","Property","formatText","oValue1","oValue2","sValue","typeConfig","typeInstance","formatValue","oTextArrangementAnnotation","$EnumMember","valueFormatters","formatWithBrackets","_updateIllustratedMessage","oChart","illustratedMessageDetail","noDataControl","getNoData","setTitle","title","setDescription","description","setIllustrationType","illustrationType","IllustratedMessageType","NoData","setIllustrationSize","illustrationSize","IllustratedMessageSize","Auto","setChartNoDataIllustratedMessage","chart","bindingInfo","resourceModel","ResourceModelHelper","getResourceModel","illustratedInformation","converterType","getTargetView","getViewData","oChartFilterInfo","ChartUtils","getAllFilterInfo","suffixResourceKey","startsWith","substr","getNoDataIllustratedMessageWithFilters","getText","NoSearchResults","Small","getFilter","search","filters","updateBindingInfo","oBindingInfo","internalBindingContext","getBindingContext","setProperty","oFilter","Element","getElementById","mConditions","getConditions","parameters","oInfo","FilterUtils","getFilterInfo","enableSearch","$search","normalizeSearchTerm","sParameterPath","DelegateUtil","getParametersInfo","oFilterInfo","ChartHelper","getCollectionName","getParent","getChartPropertiesWithoutPrefixes","events","dataRequested","onInternalDataRequested","bind","Filter","and","sorter","getSorters","_checkAndAddDraftFilter","fetchProperties","oModel","_getModel","pCreatePropertyInfos","Promise","resolve","attachModelContextChange","resolver","onModelContextChange","then","oRetrievedModel","_createPropertyInfos","MacrosDelegateUtil","setCachedProperties","oEvent","oData","getSource","detachModelContextChange","sEntitySetPath","oMetaModel","aResults","all","requestObject","oEntityType","getCustomAggregate","sAnno","sAnnoKey","replace","aAnno","mTypeAggregatableProps","sAggregatable","sPropKey","propertyPath","aggregationMethod","fetchCriticality","aDimensions","aMeasures","aChartItems","getItems","getType","getInternalChartNameFromPropertyNameAndKind","getPropertyKey","val","axis1","datapoint","unitPath","sCustom","oItem","merge","rebind","sSearch","oInnerChart","getControlDelegate","getInnerChart","oChartBinding","getBinding","suspend","setAggregation","oInnerChartDelegate","onBeforeRendering","resume","removeEventDelegate","addEventDelegate","fireEvent","_setChart","oChartAPI","setVizProperties","detachSelectData","handleSelectionChange","detachDeselectData","detachDrilledUp","attachSelectData","attachDeselectData","attachDrilledUp","setSelectionMode","getPayload","selectionMode","toUpperCase","_getBindingInfo","_getBindingInfoFromState","oMetadataInfo","getDelegate","payload","oParams","entitySet","chartContextPath","removeItemFromInnerChart","oMDCChartItem","call","fireDeselectData","sortRestrictionsProperty","bIsTransAggregate","FilterOperator","EQ","aFilters","kind","getPropertyFromNameAndKind","mdcChart","getPropertyHelper","getProperty","getFilterDelegate","FilterBarDelegate","addItem","oParentControl","sPropertyInfoName","prop","oFilterItem","bindProperty","setPropertyKey"],"sourceRoot":".","sources":["ChartDelegate.ts"],"sourcesContent":["import type { EntityType, PropertyPath } from \"@sap-ux/vocabularies-types\";\nimport { CommonAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport type { TextArrangement } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport merge from \"sap/base/util/merge\";\nimport type sapChart from \"sap/chart/Chart\";\nimport TimeUnitType from \"sap/chart/TimeUnitType\";\nimport type { SelectionMode } from \"sap/chart/library\";\nimport type { CompiledBindingToolkitExpression } from \"sap/fe/base/BindingToolkit\";\nimport type { _FilterRestrictions } from \"sap/fe/core/CommonUtils\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type { MetaModelPropertyAnnotations } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { ChartApplySupported } from \"sap/fe/core/converters/controls/Common/Chart\";\nimport valueFormatters from \"sap/fe/core/formatters/ValueFormatter\";\nimport type {\n\tFilterRestrictionsPropertyInfoType,\n\tSortRestrictionsInfoType,\n\tSortRestrictionsPropertyInfoType\n} from \"sap/fe/core/helpers/MetaModelFunction\";\nimport { getFilterableData, getSortRestrictionsInfo, isMultiValueFilterExpression } from \"sap/fe/core/helpers/MetaModelFunction\";\nimport type { InternalModelContext } from \"sap/fe/core/helpers/ModelHelper\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport ResourceModelHelper from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport type { CollectionBindingInfo } from \"sap/fe/macros/CollectionBindingInfo\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport type { PropertyInfo } from \"sap/fe/macros/DelegateUtil\";\nimport MacrosDelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport ChartHelper from \"sap/fe/macros/chart/ChartHelper\";\nimport ChartUtils from \"sap/fe/macros/chart/ChartUtils\";\nimport type { IFilterControl } from \"sap/fe/macros/filter/FilterUtils\";\nimport FilterUtils from \"sap/fe/macros/filter/FilterUtils\";\nimport type IllustratedMessage from \"sap/m/IllustratedMessage\";\nimport type { $IllustratedMessageSettings } from \"sap/m/IllustratedMessage\";\nimport IllustratedMessageSize from \"sap/m/IllustratedMessageSize\";\nimport IllustratedMessageType from \"sap/m/IllustratedMessageType\";\nimport type UI5Event from \"sap/ui/base/Event\";\nimport type EventProvider from \"sap/ui/base/EventProvider\";\nimport type { PropertyBindingInfo } from \"sap/ui/base/ManagedObject\";\nimport type Control from \"sap/ui/core/Control\";\nimport type { default as UI5Element } from \"sap/ui/core/Element\";\nimport { default as Element } from \"sap/ui/core/Element\";\nimport Library from \"sap/ui/core/Lib\";\nimport type Chart from \"sap/ui/mdc/Chart\";\nimport type FilterBar from \"sap/ui/mdc/FilterBar\";\nimport type ChartItem from \"sap/ui/mdc/chart/ChartItem\";\nimport type ChartProperty from \"sap/ui/mdc/chart/ChartProperty\";\nimport type Item from \"sap/ui/mdc/chart/Item\";\nimport ChartItemRoleType from \"sap/ui/mdc/enums/ChartItemRoleType\";\nimport type ChartP13nMode from \"sap/ui/mdc/enums/ChartP13nMode\";\nimport DelegateUtil from \"sap/ui/mdc/odata/v4/util/DelegateUtil\";\nimport BaseChartDelegate from \"sap/ui/mdc/odata/v4/vizChart/ChartDelegate\";\nimport type Context from \"sap/ui/model/Context\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport type { ExpandPathType, MetaModelEntitySetAnnotation, MetaModelProperty } from \"types/metamodel_types\";\nimport { type MetaModelEnum } from \"types/metamodel_types\";\nimport type ChartType from \"../Chart\";\nimport FilterBarDelegate from \"../filterBar/FilterBarDelegate\";\n\nconst ChartDelegate = Object.assign({}, BaseChartDelegate);\nBaseChartDelegate.apiVersion = 2;\nChartDelegate._loadChart = async function (): Promise<unknown> {\n\tawait Library.load({ name: \"sap.chart\" });\n\treturn BaseChartDelegate._loadChart();\n};\n\nChartDelegate._handleProperty = function (\n\toContext: Context,\n\toMDCChart: Chart,\n\tmEntitySetAnnotations: MetaModelEntitySetAnnotation,\n\tmKnownAggregatableProps: Record<string, Record<string, { label: string; name: string }>>,\n\tmCustomAggregates: Record<string, unknown>,\n\taProperties: ChartProperty[],\n\tsCriticality: string,\n\tunitOfMeasures: string[]\n): void {\n\tconst oApplySupported = CommonHelper.parseCustomData(oMDCChart.data(\"applySupported\")) as ChartApplySupported;\n\tconst sortRestrictionsInfo = getSortRestrictionsInfo(mEntitySetAnnotations);\n\tconst metaModel = oContext.getModel();\n\tconst entityTypePath = oMDCChart.data(\"entityType\");\n\tconst bindingPath = ModelHelper.getEntitySetPath(entityTypePath);\n\tconst filterRestrictions: _FilterRestrictions = CommonUtils.getFilterRestrictionsByPath(bindingPath, metaModel);\n\tconst propertyFilterableData: Record<string, FilterRestrictionsPropertyInfoType> = {};\n\tgetFilterableData(\n\t\tpropertyFilterableData,\n\t\tfilterRestrictions.NonFilterableProperties,\n\t\tObject.keys(filterRestrictions.FilterAllowedExpressions)\n\t);\n\tconst oObj = oContext.getModel().getObject(oContext.getPath());\n\tconst sKey = oContext.getModel().getObject(`${oContext.getPath()}@sapui.name`) as string;\n\tconst aModes = oMDCChart.getP13nMode();\n\tcheckForNonfilterableEntitySet(oMDCChart, aModes);\n\n\tif (oObj && oObj.$kind === \"Property\") {\n\t\t// ignore (as for now) all complex properties\n\t\t// not clear if they might be nesting (complex in complex)\n\t\t// not clear how they are represented in non-filterable annotation\n\t\t// etc.\n\t\tif (oObj.$isCollection) {\n\t\t\t//Log.warning(\"Complex property with type \" + oObj.$Type + \" has been ignored\");\n\t\t\treturn;\n\t\t}\n\n\t\tconst oPropertyAnnotations = metaModel.getObject(`${oContext.getPath()}@`);\n\t\tconst sPath = metaModel.getObject(\"@sapui.name\", metaModel.getMetaContext(oContext.getPath()));\n\n\t\tconst aGroupableProperties = oApplySupported && oApplySupported.GroupableProperties;\n\t\tconst aAggregatableProperties = oApplySupported && oApplySupported.AggregatableProperties;\n\t\tlet bGroupable = aGroupableProperties ? checkPropertyType(aGroupableProperties, sPath) : false;\n\t\tlet bAggregatable = aAggregatableProperties ? checkPropertyType(aAggregatableProperties, sPath) : false;\n\t\tconst customAggregates = Object.keys(mCustomAggregates);\n\n\t\tif (!aGroupableProperties || (aGroupableProperties && !aGroupableProperties.length)) {\n\t\t\tbGroupable = oPropertyAnnotations[\"@Org.OData.Aggregation.V1.Groupable\"];\n\t\t}\n\t\tif (!aAggregatableProperties || (aAggregatableProperties && !aAggregatableProperties.length)) {\n\t\t\tbAggregatable = oPropertyAnnotations[\"@Org.OData.Aggregation.V1.Aggregatable\"];\n\t\t}\n\t\tif (customAggregates.includes(sKey)) {\n\t\t\tbAggregatable = true;\n\t\t}\n\n\t\t//Right now: skip them, since we can't create a chart from it\n\t\tif (!bGroupable && !bAggregatable) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst propertyFilterable = CommonHelper.isPropertyFilterable(oContext);\n\t\tif (bAggregatable) {\n\t\t\tconst aAggregateProperties = ChartDelegate._createPropertyInfosForAggregatable(\n\t\t\t\toMDCChart,\n\t\t\t\tsKey,\n\t\t\t\toPropertyAnnotations,\n\t\t\t\tfilterRestrictions,\n\t\t\t\tsortRestrictionsInfo,\n\t\t\t\tmKnownAggregatableProps,\n\t\t\t\tmCustomAggregates,\n\t\t\t\toObj.$Type\n\t\t\t);\n\t\t\taAggregateProperties.forEach(function (oAggregateProperty: ChartProperty) {\n\t\t\t\t// if a property is UOM then do not add it to measures\n\t\t\t\tif (!unitOfMeasures.includes(oAggregateProperty.path)) {\n\t\t\t\t\taProperties.push(oAggregateProperty);\n\t\t\t\t}\n\t\t\t});\n\t\t\t//Add transformation aggregated properties to chart properties\n\t\t\tif (aModes && aModes.includes(\"Filter\")) {\n\t\t\t\tconst aKnownAggregatableProps = Object.keys(mKnownAggregatableProps);\n\t\t\t\tconst aGroupablePropertiesValues = aGroupableProperties?.map(\n\t\t\t\t\t(oProperty: { $PropertyPath: string }) => oProperty.$PropertyPath\n\t\t\t\t);\n\t\t\t\t// Add transformation aggregated property to chart so that in the filter dropdown it's visible\n\t\t\t\t// Also mark visibility false as this property should not come up in under chart section of personalization dialog\n\t\t\t\t// if a property is UOM then do not add it to measures\n\t\t\t\tif (\n\t\t\t\t\taKnownAggregatableProps.includes(sKey) &&\n\t\t\t\t\t!aGroupablePropertiesValues?.includes(sKey) &&\n\t\t\t\t\t!unitOfMeasures.includes(sKey)\n\t\t\t\t) {\n\t\t\t\t\taProperties = addPropertyToChart(\n\t\t\t\t\t\taProperties,\n\t\t\t\t\t\tsKey,\n\t\t\t\t\t\toPropertyAnnotations,\n\t\t\t\t\t\tcustomAggregates.includes(sKey) ? false : checkPropertyFilterable(sKey, propertyFilterable, propertyFilterableData),\n\t\t\t\t\t\tfilterRestrictions,\n\t\t\t\t\t\tfalse, // 'isSortable' is set to 'false' to avoid duplicate entries in the sort queue for aggregatable properties. These properties are already queued for sorting in the 'createPropertyInfosForAggregatable' method.\n\t\t\t\t\t\toMDCChart,\n\t\t\t\t\t\tsCriticality,\n\t\t\t\t\t\toObj,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (bGroupable) {\n\t\t\tconst sName = sKey || \"\",\n\t\t\t\tsTextProperty = oPropertyAnnotations[\"@\" + CommonAnnotationTerms.Text]\n\t\t\t\t\t? oPropertyAnnotations[\"@\" + CommonAnnotationTerms.Text].$Path\n\t\t\t\t\t: null;\n\t\t\tlet bIsNavigationText = false;\n\t\t\tif (sName && sName.includes(\"/\")) {\n\t\t\t\tLog.error(`$expand is not yet supported. Property: ${sName} from an association cannot be used`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (sTextProperty && sTextProperty.indexOf(\"/\") > -1) {\n\t\t\t\tLog.error(`$expand is not yet supported. Text Property: ${sTextProperty} from an association cannot be used`);\n\t\t\t\tbIsNavigationText = true;\n\t\t\t}\n\t\t\taProperties = addPropertyToChart(\n\t\t\t\taProperties,\n\t\t\t\tsKey,\n\t\t\t\toPropertyAnnotations,\n\t\t\t\tcheckPropertyFilterable(sKey, propertyFilterable, propertyFilterableData)\n\t\t\t\t\t? (customAggregates.includes(sKey) && unitOfMeasures.includes(sKey)) || !unitOfMeasures.includes(sKey)\n\t\t\t\t\t: false, // UOM property should be filterable if it is marked as custom aggregate as well as groupable\n\t\t\t\tfilterRestrictions,\n\t\t\t\tChartDelegate._getSortable(oMDCChart, sortRestrictionsInfo.propertyInfo[sKey], false),\n\t\t\t\toMDCChart,\n\t\t\t\tsCriticality,\n\t\t\t\toObj,\n\t\t\t\t!customAggregates.includes(sKey) || (customAggregates.includes(sKey) && unitOfMeasures.includes(sKey)) ? true : false, // if a property is UOM, marked as custom aggregate and groupable then show it in dimensions\n\t\t\t\tfalse,\n\t\t\t\tbIsNavigationText\n\t\t\t);\n\t\t}\n\t}\n};\n\n/**\n * Get all the properties which are marked as unit of measure.\n * @param entityType The entity type displayed in the chart\n * @param metaModel  MetaModel\n * @param entitySetPath Entity set path\n * @returns An array of unit of measures\n */\nfunction _getUnitOfMeasures(entityType: EntityType, metaModel: ODataMetaModel, entitySetPath: string): string[] {\n\tconst unitOfMeasures: string[] = [];\n\tfor (const sKey in entityType) {\n\t\tconst context = metaModel.createBindingContext(`${entitySetPath}/${sKey}`);\n\t\tconst propertyAnnotations = metaModel.getObject(`${context?.getPath()}@`);\n\t\tconst unit =\n\t\t\t(propertyAnnotations?.[\"@Org.OData.Measures.V1.ISOCurrency\"] as { $Path: string })?.$Path ||\n\t\t\t(propertyAnnotations?.[\"@Org.OData.Measures.V1.Unit\"] as { $Path: string })?.$Path;\n\t\tif (unit && !unitOfMeasures.includes(unit)) {\n\t\t\tunitOfMeasures.push(unit);\n\t\t}\n\t}\n\treturn unitOfMeasures;\n}\n\n// create properties for chart\nfunction addPropertyToChart(\n\taProperties: ChartProperty[],\n\tsKey: string,\n\toPropertyAnnotations: MetaModelPropertyAnnotations,\n\tisFilterable: boolean,\n\toFilterRestrictionsInfo: _FilterRestrictions,\n\tisSortable: boolean,\n\toMDCChart: Chart,\n\tsCriticality: string,\n\toObj: MetaModelProperty,\n\tbIsGroupable: boolean,\n\tbIsAggregatable: boolean,\n\tbIsNavigationText?: boolean,\n\tbIsHidden?: boolean\n): ChartProperty[] {\n\tlet chartRole = ChartItemRoleType.category;\n\tconst chartData = oMDCChart.data(\"chartDimensionKeyAndRole\");\n\n\tif (Array.isArray(chartData)) {\n\t\tchartData.forEach((record: { [x: string]: string }) => {\n\t\t\tif (record[sKey]) {\n\t\t\t\tchartRole = record[sKey].split(\"/\").pop()?.toLowerCase() || chartRole;\n\t\t\t}\n\t\t});\n\t}\n\n\tconst oProperty: ChartProperty = {\n\t\tname: \"_fe_groupable_\" + sKey,\n\t\tlabel: oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Label\"]?.toString() || sKey,\n\t\tsortable: isSortable,\n\t\tfilterable: isFilterable,\n\t\tgroupable: bIsGroupable,\n\t\taggregatable: bIsAggregatable,\n\t\tmaxConditions: isMultiValueFilterExpression(oFilterRestrictionsInfo[\"FilterAllowedExpressions\"]?.[sKey]?.[0]) ? -1 : 1,\n\t\tpath: sKey,\n\t\trole: chartRole, //standard, normally this should be interpreted from UI.Chart annotation\n\t\tcriticality: sCriticality, //To be implemented by FE\n\t\tdataType: oObj.$Type,\n\t\tvisible: bIsHidden ? !bIsHidden : true,\n\t\ttextProperty:\n\t\t\t!bIsNavigationText && oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text\"]\n\t\t\t\t? (oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Text\"] as { $Path: string }).$Path\n\t\t\t\t: null, //To be implemented by FE\n\t\ttextFormatter: (oPropertyAnnotations as Record<string, unknown>)[\n\t\t\t\"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\"\n\t\t] as MetaModelEnum<TextArrangement>\n\t};\n\t// timeUnitType = undefined -> crashes the chart. therefore:\n\tconst timeUnitType = ChartDelegate._getTimeType(oObj, oPropertyAnnotations);\n\tif (timeUnitType) oProperty.timeUnitType = timeUnitType;\n\n\tif (oObj.$Type === \"Edm.DateTimeOffset\" || oObj.$Type === \"Edm.TimeOfDay\") {\n\t\tswitch (oObj.$Type) {\n\t\t\tcase \"Edm.DateTimeOffset\":\n\t\t\t\toProperty.formatOptions = { style: \"medium/short\" };\n\t\t\t\tbreak;\n\t\t\tcase \"Edm.TimeOfDay\":\n\t\t\t\toProperty.formatOptions = { style: \"short\" };\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\taProperties.push(oProperty);\n\treturn aProperties;\n}\n\n/**\n * Check if a property is filterable or not.\n * @param key Property key\n * @param propertyFilterable  Filter restrictions\n * @param propertyFilterableData\n * @returns Boolean value for a property\n */\nfunction checkPropertyFilterable(\n\tkey: string,\n\tpropertyFilterable: boolean | CompiledBindingToolkitExpression,\n\tpropertyFilterableData: Record<string, FilterRestrictionsPropertyInfoType>\n): boolean {\n\tif (propertyFilterable === false) {\n\t\treturn false;\n\t} else if (typeof propertyFilterable === \"string\") {\n\t\t// path based filterable is yet to handle here in future\n\t\treturn true;\n\t} else {\n\t\treturn propertyFilterableData?.[key]?.filterable ?? true;\n\t}\n}\n\nChartDelegate._getTimeType = function (oObj: MetaModelProperty, oPropertyAnnotations: Record<string, unknown>): TimeUnitType | undefined {\n\tswitch (oObj.$Type) {\n\t\tcase \"Edm.Date\":\n\t\t\treturn TimeUnitType.Date;\n\t\tcase \"Edm.String\":\n\t\t\tif (oPropertyAnnotations[\"@\" + CommonAnnotationTerms.IsFiscalYear]) {\n\t\t\t\treturn TimeUnitType.fiscalyear;\n\t\t\t} else if (oPropertyAnnotations[\"@\" + CommonAnnotationTerms.IsFiscalYearPeriod]) {\n\t\t\t\treturn TimeUnitType.fiscalyearperiod;\n\t\t\t} else if (oPropertyAnnotations[\"@\" + CommonAnnotationTerms.IsCalendarYearMonth]) {\n\t\t\t\treturn TimeUnitType.yearmonth;\n\t\t\t} else if (oPropertyAnnotations[\"@\" + CommonAnnotationTerms.IsCalendarYearQuarter]) {\n\t\t\t\treturn TimeUnitType.yearquarter;\n\t\t\t} else if (oPropertyAnnotations[\"@\" + CommonAnnotationTerms.IsCalendarYearWeek]) {\n\t\t\t\treturn TimeUnitType.yearweek;\n\t\t\t} else if (oPropertyAnnotations[\"@\" + CommonAnnotationTerms.IsCalendarDate]) {\n\t\t\t\treturn TimeUnitType.yearmonthday;\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\treturn undefined;\n\t}\n};\n\n// If entityset is non filterable,then from p13n modes remove Filter so that on UI filter option doesn't show up\nfunction checkForNonfilterableEntitySet(oMDCChart: Chart, aModes: (ChartP13nMode | keyof typeof ChartP13nMode)[]): void {\n\tconst bEntitySetFilerable = oMDCChart\n\t\t?.getModel()\n\t\t?.getMetaModel()\n\t\t?.getObject(`${oMDCChart.data(\"targetCollectionPath\")}@Org.OData.Capabilities.V1.FilterRestrictions`)?.Filterable;\n\tif (bEntitySetFilerable !== undefined && !bEntitySetFilerable) {\n\t\taModes = aModes.filter((item: string) => item !== \"Filter\");\n\t\toMDCChart.setP13nMode(aModes);\n\t}\n}\n\n//  check if Groupable /Aggregatable property is present or not\nfunction checkPropertyType(\n\taProperties: (ExpandPathType<PropertyPath> & { Property: ExpandPathType<PropertyPath> })[],\n\tsPath: string\n): true | undefined {\n\tif (aProperties.length) {\n\t\tfor (const element of aProperties) {\n\t\t\tif (element?.$PropertyPath === sPath || element?.Property?.$PropertyPath === sPath) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n}\n\nChartDelegate.formatText = function (oValue1: string, oValue2: string): string {\n\tconst sValue = this.typeConfig?.typeInstance?.formatValue(oValue1, \"string\") || oValue1;\n\n\tif (oValue2) {\n\t\tconst oTextArrangementAnnotation = this.textFormatter;\n\n\t\tif (\n\t\t\t!oTextArrangementAnnotation ||\n\t\t\toTextArrangementAnnotation.$EnumMember === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst\"\n\t\t) {\n\t\t\treturn valueFormatters.formatWithBrackets(oValue2, sValue);\n\t\t}\n\n\t\tif (oTextArrangementAnnotation.$EnumMember === \"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast\") {\n\t\t\treturn valueFormatters.formatWithBrackets(sValue, oValue2);\n\t\t}\n\t}\n\n\treturn oValue2 || sValue;\n};\n\n/**\n * Update the illustrated message with a new title, description, and type.\n * @param oChart Reference to the MDC_Chart\n * @param illustratedMessageDetail Object corresponds to the illustrated message\n */\nChartDelegate._updateIllustratedMessage = function (oChart: Chart, illustratedMessageDetail: $IllustratedMessageSettings): void {\n\tconst noDataControl = oChart.getNoData() as IllustratedMessage;\n\tnoDataControl.setTitle(illustratedMessageDetail.title);\n\tnoDataControl.setDescription(illustratedMessageDetail.description);\n\tnoDataControl.setIllustrationType(illustratedMessageDetail.illustrationType || IllustratedMessageType.NoData);\n\tnoDataControl.setIllustrationSize(illustratedMessageDetail.illustrationSize || IllustratedMessageSize.Auto);\n};\n\n/**\n * We set the illustrated message's title, description, and type based on different conditions.\n * @param chart Reference to the MDC_Chart\n * @param bindingInfo BindingInfo\n */\nChartDelegate.setChartNoDataIllustratedMessage = function (chart: Chart, bindingInfo: PropertyBindingInfo): void {\n\tconst resourceModel = ResourceModelHelper.getResourceModel(chart);\n\tlet illustratedInformation: $IllustratedMessageSettings = {};\n\tconst converterType = CommonUtils.getTargetView(chart).getViewData().converterType;\n\tconst oChartFilterInfo = ChartUtils.getAllFilterInfo(chart);\n\tconst suffixResourceKey = bindingInfo.path.startsWith(\"/\") ? bindingInfo.path.substr(1) : bindingInfo.path;\n\tconst getNoDataIllustratedMessageWithFilters = function (): $IllustratedMessageSettings {\n\t\tif (chart.data(\"multiViews\") === \"true\") {\n\t\t\treturn {\n\t\t\t\ttitle: resourceModel.getText(\"T_ILLUSTRATED_MESSAGE_TITLE_NOSEARCHRESULTS\", undefined, suffixResourceKey),\n\t\t\t\tdescription: resourceModel.getText(\"M_TABLE_AND_CHART_NO_DATA_TEXT_MULTI_VIEW\", undefined, suffixResourceKey),\n\t\t\t\tillustrationType: IllustratedMessageType.NoSearchResults\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\ttitle: resourceModel.getText(\"T_ILLUSTRATED_MESSAGE_TITLE_NOSEARCHRESULTS\", undefined, suffixResourceKey),\n\t\t\tdescription: resourceModel.getText(\"T_TABLE_AND_CHART_NO_DATA_TEXT_WITH_FILTER\", undefined, suffixResourceKey),\n\t\t\tillustrationType: IllustratedMessageType.NoSearchResults,\n\t\t\tillustrationSize: converterType === \"ObjectPage\" ? IllustratedMessageSize.Small : IllustratedMessageSize.Auto\n\t\t};\n\t};\n\n\tif (chart.getFilter() && converterType !== \"ObjectPage\") {\n\t\tif (oChartFilterInfo.search || oChartFilterInfo.filters?.length) {\n\t\t\tillustratedInformation = getNoDataIllustratedMessageWithFilters();\n\t\t}\n\t} else if (oChartFilterInfo.search || oChartFilterInfo.filters?.length) {\n\t\t//check if chart has any personalization filters\n\t\tillustratedInformation = getNoDataIllustratedMessageWithFilters();\n\t} else {\n\t\tillustratedInformation = {\n\t\t\ttitle: resourceModel.getText(\"T_ILLUSTRATED_MESSAGE_TITLE_NODATA\", undefined, suffixResourceKey),\n\t\t\tdescription: resourceModel.getText(\"M_TABLE_AND_CHART_NO_FILTERS_NO_DATA_TEXT\", undefined, suffixResourceKey),\n\t\t\tillustrationType: IllustratedMessageType.NoData,\n\t\t\tillustrationSize: IllustratedMessageSize.Small\n\t\t};\n\t}\n\n\tChartDelegate._updateIllustratedMessage(chart, illustratedInformation);\n};\n\nChartDelegate.updateBindingInfo = function (oChart: Chart, oBindingInfo: CollectionBindingInfo): void {\n\tconst internalBindingContext = oChart.getBindingContext(\"internal\") as InternalModelContext;\n\n\tinternalBindingContext.setProperty(\"isInsightsEnabled\", true);\n\tChartDelegate.setChartNoDataIllustratedMessage(oChart, oBindingInfo);\n\tconst oFilter = Element.getElementById(oChart.getFilter());\n\tconst mConditions = oChart.getConditions();\n\tif (!oBindingInfo) {\n\t\toBindingInfo = {};\n\t}\n\tif (!oBindingInfo.parameters) {\n\t\toBindingInfo.parameters = {};\n\t}\n\tif (oFilter) {\n\t\t// Search\n\t\tconst oInfo = FilterUtils.getFilterInfo(oFilter as IFilterControl, {});\n\t\tconst oApplySupported = CommonHelper.parseCustomData(oChart.data(\"applySupported\")) as ChartApplySupported;\n\t\tif (oApplySupported && oApplySupported.enableSearch && oInfo.search) {\n\t\t\toBindingInfo.parameters.$search = CommonUtils.normalizeSearchTerm(oInfo.search);\n\t\t} else if (oBindingInfo.parameters.$search) {\n\t\t\tdelete oBindingInfo.parameters.$search;\n\t\t}\n\t}\n\tconst sParameterPath = mConditions ? DelegateUtil.getParametersInfo(oFilter, mConditions) : null;\n\tif (sParameterPath) {\n\t\toBindingInfo.path = sParameterPath;\n\t}\n\tconst oFilterInfo = ChartUtils.getAllFilterInfo(oChart);\n\tif (oFilterInfo.bindingPath) {\n\t\toBindingInfo.path = oFilterInfo.bindingPath;\n\t}\n\n\tif (oBindingInfo.path && oChart.getBindingContext()) {\n\t\toBindingInfo.path = ChartHelper.getCollectionName(oBindingInfo.path);\n\t}\n\n\t// remove prefixes so that entityset will match with the property names with these field\n\tif (oFilterInfo.filters) {\n\t\toFilterInfo.filters.forEach((element) => {\n\t\t\tif (element.getPath()) {\n\t\t\t\t(element as unknown as { sPath: string }).sPath = (oChart.getParent() as ChartType).getChartPropertiesWithoutPrefixes(\n\t\t\t\t\telement.getPath()!\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\toBindingInfo.events ??= {};\n\toBindingInfo.events.dataRequested = (oChart.getParent() as ChartType).onInternalDataRequested.bind(oChart.getParent());\n\n\toBindingInfo.filters = oFilterInfo.filters.length > 0 ? new Filter({ filters: oFilterInfo.filters, and: true }) : undefined;\n\toBindingInfo.sorter = this.getSorters(oChart);\n\tChartDelegate._checkAndAddDraftFilter(oChart, oBindingInfo);\n};\n\nChartDelegate.fetchProperties = async function (oMDCChart: Chart): Promise<PropertyInfo[]> {\n\tconst oModel = this._getModel(oMDCChart);\n\tlet pCreatePropertyInfos: Promise<PropertyInfo[]>;\n\n\tif (!oModel) {\n\t\tpCreatePropertyInfos = new Promise<ODataModel>((resolve): void => {\n\t\t\toMDCChart.attachModelContextChange(\n\t\t\t\t{\n\t\t\t\t\tresolver: resolve\n\t\t\t\t},\n\t\t\t\tonModelContextChange as (ev: UI5Event) => void,\n\t\t\t\tthis\n\t\t\t);\n\t\t}).then((oRetrievedModel: ODataModel) => {\n\t\t\treturn this._createPropertyInfos(oMDCChart, oRetrievedModel);\n\t\t});\n\t} else {\n\t\tpCreatePropertyInfos = this._createPropertyInfos(oMDCChart, oModel);\n\t}\n\n\treturn pCreatePropertyInfos.then(function (aProperties: PropertyInfo[]) {\n\t\tif (oMDCChart.data) {\n\t\t\toMDCChart.data(\"$mdcChartPropertyInfo\", aProperties);\n\t\t\t// store the properties to fetch during p13n calculation\n\t\t\tMacrosDelegateUtil.setCachedProperties(oMDCChart, aProperties);\n\t\t}\n\t\treturn aProperties;\n\t});\n};\nfunction onModelContextChange(this: typeof ChartDelegate, oEvent: UI5Event<{}, Chart>, oData: { resolver: Function }): void {\n\tconst oMDCChart = oEvent.getSource();\n\tconst oModel = this._getModel(oMDCChart);\n\n\tif (oModel) {\n\t\toMDCChart.detachModelContextChange(onModelContextChange as (ev: UI5Event) => void);\n\t\toData.resolver(oModel);\n\t}\n}\nChartDelegate._createPropertyInfos = async function (oMDCChart: Chart, oModel: ODataModel): Promise<PropertyInfo[]> {\n\tconst sEntitySetPath = `/${oMDCChart.data(\"entitySet\")}`;\n\n\tconst oMetaModel = oModel.getMetaModel();\n\tconst aResults = await Promise.all([oMetaModel.requestObject(`${sEntitySetPath}/`), oMetaModel.requestObject(`${sEntitySetPath}@`)]);\n\tconst aProperties: PropertyInfo[] = [];\n\tconst oEntityType = aResults[0];\n\tconst mEntitySetAnnotations = aResults[1];\n\tconst mCustomAggregates = CommonHelper.parseCustomData(oMDCChart.data(\"customAgg\")) as Record<string, unknown>;\n\tgetCustomAggregate(mCustomAggregates, oMDCChart);\n\tlet sAnno;\n\tfor (const sAnnoKey in mEntitySetAnnotations) {\n\t\tif (sAnnoKey.startsWith(\"@Org.OData.Aggregation.V1.CustomAggregate\")) {\n\t\t\tsAnno = sAnnoKey.replace(\"@Org.OData.Aggregation.V1.CustomAggregate#\", \"\");\n\t\t\tconst aAnno = sAnno.split(\"@\");\n\n\t\t\tif (aAnno.length == 2 && aAnno[1] == \"com.sap.vocabularies.Common.v1.Label\") {\n\t\t\t\tmCustomAggregates[aAnno[0]] = mEntitySetAnnotations[sAnnoKey];\n\t\t\t}\n\t\t}\n\t}\n\tconst mTypeAggregatableProps = CommonHelper.parseCustomData(oMDCChart.data(\"transAgg\")) as Record<\n\t\tstring,\n\t\t{ propertyPath: string; aggregationMethod: string; name: string; label: string }\n\t>;\n\tconst mKnownAggregatableProps: Record<string, Record<string, { name: string; label: string }>> = {};\n\tfor (const sAggregatable in mTypeAggregatableProps) {\n\t\tconst sPropKey = mTypeAggregatableProps[sAggregatable].propertyPath;\n\t\tmKnownAggregatableProps[sPropKey] = mKnownAggregatableProps[sPropKey] || {};\n\t\tmKnownAggregatableProps[sPropKey][mTypeAggregatableProps[sAggregatable].aggregationMethod] = {\n\t\t\tname: mTypeAggregatableProps[sAggregatable].name,\n\t\t\tlabel: mTypeAggregatableProps[sAggregatable].label\n\t\t};\n\t}\n\tconst unitOfMeasures = _getUnitOfMeasures(oEntityType, oMetaModel, sEntitySetPath);\n\tfor (const sKey in oEntityType) {\n\t\tif (sKey.indexOf(\"$\") !== 0) {\n\t\t\tconst criticality = ChartHelper.fetchCriticality(oMetaModel, oMetaModel.createBindingContext(`${sEntitySetPath}/${sKey}`)!);\n\t\t\tChartDelegate._handleProperty(\n\t\t\t\toMetaModel.getMetaContext(`${sEntitySetPath}/${sKey}`),\n\t\t\t\toMDCChart,\n\t\t\t\tmEntitySetAnnotations,\n\t\t\t\tmKnownAggregatableProps,\n\t\t\t\tmCustomAggregates,\n\t\t\t\taProperties,\n\t\t\t\tcriticality,\n\t\t\t\tunitOfMeasures\n\t\t\t);\n\t\t}\n\t}\n\treturn aProperties;\n};\n\nfunction getCustomAggregate(mCustomAggregates: Record<string, unknown>, oMDCChart: Chart): void {\n\tconst aDimensions: string[] = [],\n\t\taMeasures: string[] = [];\n\tif (mCustomAggregates && Object.keys(mCustomAggregates).length >= 1) {\n\t\tconst aChartItems = oMDCChart.getItems();\n\t\tfor (const key in aChartItems) {\n\t\t\tif (aChartItems[key].getType() === \"groupable\") {\n\t\t\t\taDimensions.push(ChartDelegate.getInternalChartNameFromPropertyNameAndKind(aChartItems[key].getPropertyKey(), \"groupable\"));\n\t\t\t} else if (aChartItems[key].getType() === \"aggregatable\") {\n\t\t\t\taMeasures.push(\n\t\t\t\t\tChartDelegate.getInternalChartNameFromPropertyNameAndKind(aChartItems[key].getPropertyKey(), \"aggregatable\")\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tif (\n\t\t\taMeasures.filter(function (val: string) {\n\t\t\t\treturn aDimensions.includes(val);\n\t\t\t}).length >= 1\n\t\t) {\n\t\t\tLog.error(\"Dimension and Measure has the sameProperty Configured\");\n\t\t}\n\t}\n}\n\nChartDelegate._createPropertyInfosForAggregatable = function (\n\toMDCChart: Chart,\n\tsKey: string,\n\toPropertyAnnotations: MetaModelPropertyAnnotations,\n\toFilterRestrictionsInfo: _FilterRestrictions,\n\tsortRestrictionsInfo: SortRestrictionsInfoType,\n\tmKnownAggregatableProps: Record<string, Record<string, { label: string; name: string }>>,\n\tmCustomAggregates: { [propertyName: string]: unknown },\n\tdataType: string\n): object[] {\n\tconst aAggregateProperties: object[] = [];\n\tif (Object.keys(mKnownAggregatableProps).includes(sKey)) {\n\t\tfor (const sAggregatable in mKnownAggregatableProps[sKey]) {\n\t\t\taAggregateProperties.push({\n\t\t\t\tname: \"_fe_aggregatable_\" + mKnownAggregatableProps[sKey][sAggregatable].name,\n\t\t\t\tlabel:\n\t\t\t\t\tmKnownAggregatableProps[sKey][sAggregatable].label ||\n\t\t\t\t\t`${oPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Label\"]} (${sAggregatable})` ||\n\t\t\t\t\t`${sKey} (${sAggregatable})`,\n\t\t\t\tsortable: sortRestrictionsInfo.propertyInfo[sKey] ? sortRestrictionsInfo.propertyInfo[sKey].sortable : true,\n\t\t\t\tfilterable: false,\n\t\t\t\tgroupable: false,\n\t\t\t\taggregatable: true,\n\t\t\t\tpath: sKey,\n\t\t\t\tdataType: dataType,\n\t\t\t\taggregationMethod: sAggregatable,\n\t\t\t\tmaxConditions: isMultiValueFilterExpression(oFilterRestrictionsInfo[\"FilterAllowedExpressions\"]?.[sKey]?.[0]) ? -1 : 1,\n\t\t\t\trole: ChartItemRoleType.axis1,\n\t\t\t\tdatapoint: null, //To be implemented by FE\n\t\t\t\tunitPath:\n\t\t\t\t\t(oPropertyAnnotations[\"@Org.OData.Measures.V1.ISOCurrency\"] as { $Path: string })?.$Path ||\n\t\t\t\t\t(oPropertyAnnotations[\"@Org.OData.Measures.V1.Unit\"] as { $Path: string })?.$Path\n\t\t\t});\n\t\t}\n\t}\n\tif (Object.keys(mCustomAggregates).includes(sKey)) {\n\t\tfor (const sCustom in mCustomAggregates) {\n\t\t\tif (sCustom === sKey) {\n\t\t\t\tconst oItem = merge({}, mCustomAggregates[sCustom] as object, {\n\t\t\t\t\tname: \"_fe_aggregatable_\" + sCustom,\n\t\t\t\t\tgroupable: false,\n\t\t\t\t\taggregatable: true,\n\t\t\t\t\tfilterable: false,\n\t\t\t\t\trole: ChartItemRoleType.axis1,\n\t\t\t\t\tpath: sCustom,\n\t\t\t\t\tdataType: dataType,\n\t\t\t\t\tdatapoint: null, //To be implemented by FE\n\t\t\t\t\tunitPath:\n\t\t\t\t\t\t(oPropertyAnnotations[\"@Org.OData.Measures.V1.ISOCurrency\"] as { $Path: string })?.$Path ||\n\t\t\t\t\t\t(oPropertyAnnotations[\"@Org.OData.Measures.V1.Unit\"] as { $Path: string })?.$Path\n\t\t\t\t});\n\t\t\t\taAggregateProperties.push(oItem);\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn aAggregateProperties;\n};\nChartDelegate.rebind = function (oMDCChart: Chart, oBindingInfo: PropertyBindingInfo): void {\n\tconst sSearch = oBindingInfo.parameters.$search;\n\n\tif (sSearch) {\n\t\tdelete oBindingInfo.parameters.$search;\n\t}\n\n\tBaseChartDelegate.rebind(oMDCChart, oBindingInfo);\n\n\tif (sSearch) {\n\t\tconst oInnerChart = (oMDCChart.getControlDelegate() as typeof ChartDelegate).getInnerChart(oMDCChart),\n\t\t\toChartBinding = oInnerChart && oInnerChart.getBinding(\"data\");\n\n\t\t// Temporary workaround until this is fixed in MDCChart / UI5 Chart\n\t\t// In order to avoid having 2 OData requests, we need to suspend the binding before setting some aggregation properties\n\t\t// and resume it once the chart has added other aggregation properties (in onBeforeRendering)\n\t\toChartBinding.suspend();\n\t\toChartBinding.setAggregation({ search: sSearch });\n\n\t\tconst oInnerChartDelegate = {\n\t\t\tonBeforeRendering: function (): void {\n\t\t\t\toChartBinding.resume();\n\t\t\t\toInnerChart.removeEventDelegate(oInnerChartDelegate);\n\t\t\t}\n\t\t};\n\t\toInnerChart.addEventDelegate(oInnerChartDelegate);\n\t}\n\n\toMDCChart.fireEvent(\"bindingUpdated\");\n};\nChartDelegate._setChart = function (oMDCChart: Chart, oInnerChart: sapChart): void {\n\tconst oChartAPI = oMDCChart.getParent() as ChartType;\n\toInnerChart.setVizProperties(oMDCChart.data(\"vizProperties\"));\n\toInnerChart.detachSelectData(oChartAPI.handleSelectionChange.bind(oChartAPI) as (e: UI5Event<object, EventProvider>) => void);\n\toInnerChart.detachDeselectData(oChartAPI.handleSelectionChange.bind(oChartAPI) as (e: UI5Event<object, EventProvider>) => void);\n\toInnerChart.detachDrilledUp(oChartAPI.handleSelectionChange.bind(oChartAPI) as (e: UI5Event<object, EventProvider>) => void);\n\toInnerChart.attachSelectData(oChartAPI.handleSelectionChange.bind(oChartAPI) as (e: UI5Event<object, EventProvider>) => void);\n\toInnerChart.attachDeselectData(oChartAPI.handleSelectionChange.bind(oChartAPI) as (e: UI5Event<object, EventProvider>) => void);\n\toInnerChart.attachDrilledUp(oChartAPI.handleSelectionChange.bind(oChartAPI) as (e: UI5Event<object, EventProvider>) => void);\n\n\toInnerChart.setSelectionMode((oMDCChart.getPayload() as { selectionMode: string }).selectionMode.toUpperCase() as SelectionMode);\n\tBaseChartDelegate._setChart(oMDCChart, oInnerChart);\n};\nChartDelegate._getBindingInfo = function (oMDCChart: Chart): PropertyBindingInfo {\n\tif (this._getBindingInfoFromState(oMDCChart)) {\n\t\treturn this._getBindingInfoFromState(oMDCChart);\n\t}\n\n\tconst oMetadataInfo = (oMDCChart.getDelegate() as { payload: unknown }).payload as { parameters: object; chartContextPath: string };\n\tconst oParams = merge({}, oMetadataInfo.parameters, {\n\t\tentitySet: oMDCChart.data(\"entitySet\")\n\t});\n\treturn {\n\t\tpath: oMetadataInfo.chartContextPath,\n\t\tevents: {\n\t\t\tdataRequested: (oMDCChart.getParent() as ChartType).onInternalDataRequested.bind(oMDCChart.getParent())\n\t\t},\n\t\tparameters: oParams\n\t};\n};\nChartDelegate.removeItemFromInnerChart = function (oMDCChart: Chart, oMDCChartItem: ChartItem): void {\n\tBaseChartDelegate.removeItemFromInnerChart.call(this, oMDCChart, oMDCChartItem);\n\tif (oMDCChartItem.getType() === \"groupable\") {\n\t\tconst oInnerChart = this.getInnerChart(oMDCChart);\n\t\toInnerChart.fireDeselectData();\n\t}\n};\nChartDelegate._getSortable = function (\n\toMDCChart: Chart,\n\tsortRestrictionsProperty: SortRestrictionsPropertyInfoType | undefined,\n\tbIsTransAggregate: boolean\n): boolean {\n\tif (bIsTransAggregate) {\n\t\tif (oMDCChart.data(\"draftSupported\").toString() === \"true\") {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn sortRestrictionsProperty ? sortRestrictionsProperty.sortable : true;\n\t\t}\n\t}\n\treturn sortRestrictionsProperty ? sortRestrictionsProperty.sortable : true;\n};\nChartDelegate._checkAndAddDraftFilter = function (oChart: Chart, oBindingInfo: PropertyBindingInfo): void {\n\tif (oChart.data(\"draftSupported\").toString() === \"true\") {\n\t\tif (!oBindingInfo) {\n\t\t\toBindingInfo = {};\n\t\t}\n\t\tif (!oBindingInfo.filters) {\n\t\t\toBindingInfo.filters = [];\n\t\t\toBindingInfo.filters.push(new Filter(\"IsActiveEntity\", FilterOperator.EQ, true));\n\t\t} else {\n\t\t\toBindingInfo.filters?.aFilters?.push(new Filter(\"IsActiveEntity\", FilterOperator.EQ, true));\n\t\t}\n\t}\n};\n\n/**\n * This function returns an ID which should be used in the internal chart for the measure or dimension.\n * For standard cases, this is just the ID of the property.\n * If it is necessary to use another ID internally inside the chart (e.g. on duplicate property IDs) this method can be overwritten.\n * In this case, <code>getPropertyFromNameAndKind</code> needs to be overwritten as well.\n * @param name ID of the property\n * @param kind Type of the property (measure or dimension)\n * @returns Internal ID for the sap.chart.Chart\n */\nChartDelegate.getInternalChartNameFromPropertyNameAndKind = function (name: string, kind: string): string {\n\treturn name.replace(\"_fe_\" + kind + \"_\", \"\");\n};\n\n/**\n * This maps an id of an internal chart dimension or measure & type of a property to its corresponding property entry.\n * @param name ID of internal chart measure or dimension\n * @param kind The kind of property that is used\n * @param mdcChart Reference to the MDC_Chart\n * @returns PropertyInfo object\n */\nChartDelegate.getPropertyFromNameAndKind = function (name: string, kind: string, mdcChart: Chart): string {\n\treturn mdcChart.getPropertyHelper().getProperty(\"_fe_\" + kind + \"_\" + name);\n};\n\n/**\n * Provide the chart's filter delegate to provide basic filter functionality such as adding FilterFields.\n * @returns Object for the personalization of the chart filter\n */\nChartDelegate.getFilterDelegate = function (): object {\n\treturn Object.assign(\n\t\t{\n\t\t\tapiVersion: 2\n\t\t},\n\t\tFilterBarDelegate,\n\t\t{\n\t\t\taddItem: async function (oParentControl: Control, sPropertyInfoName: string): Promise<UI5Element | undefined> {\n\t\t\t\tconst prop = ChartDelegate.getInternalChartNameFromPropertyNameAndKind(sPropertyInfoName, \"groupable\");\n\t\t\t\treturn FilterBarDelegate.addItem(oParentControl as FilterBar, prop).then((oFilterItem) => {\n\t\t\t\t\t(oFilterItem as UI5Element | undefined)?.bindProperty(\"conditions\", {\n\t\t\t\t\t\tpath: \"$filters>/conditions/\" + sPropertyInfoName\n\t\t\t\t\t});\n\t\t\t\t\t(oFilterItem as unknown as Item)?.setPropertyKey(sPropertyInfoName);\n\t\t\t\t\treturn oFilterItem as UI5Element | undefined;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t);\n};\n\nexport default ChartDelegate;\n"],"mappings":"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","ignoreList":[],"file":"ChartDelegate-dbg.js"}