/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/base/BindingToolkit","sap/fe/base/ClassSupport","sap/fe/core/buildingBlocks/BuildingBlock","sap/fe/core/CommonUtils","sap/fe/core/helpers/ResourceModelHelper","sap/fe/core/helpers/StableIdHelper","sap/m/Breadcrumbs","sap/m/Link","sap/fe/base/jsx-runtime/jsx"],function(e,t,r,n,i,o,a,s,c,l){"use strict";var u,f,d,p,h,g,b;var m={};var B=a.generate;var y=o.getResourceModel;var _=r.property;var v=r.implementInterface;var T=r.defineUI5Class;var L=t.compileExpression;function C(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function P(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,M(e,t)}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}function x(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer?(Object.defineProperty(e,t,o),null):o}function E(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}const k={OBJECT:"objectNavigation",FULL:"fullNavigation"};m.hierachyModeOptions=k;let O=(u=T("sap.fe.macros.Breadcrumbs"),f=v("sap.m.IBreadcrumbs"),d=_({type:"string",defaultValue:k.OBJECT,allowedValues:Object.values(k)}),u(p=(h=function(t){function r(){var e;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}e=t.call(this,...n)||this;C(e,"__implements__sap_m_IBreadcrumbs",g,e);C(e,"hierarchyMode",b,e);return e}m=r;P(r,t);var n=r.prototype;n.onMetadataAvailable=function e(){if(!this.content){this._getOwner()?.runAsOwner(()=>{this.content=this.createContent()})}};n._getBreadcrumbsTitleInfos=function e(t){const r=[],n=this.getAppComponent(),o=n.getRootViewController(),a=n.getMetaModel(),s=this._getBreadcrumbsPathParts(t);let c="";if(this.hierarchyMode===k.FULL){const e=y(this);const t=this._getFEManifestBreadcrumbSettings()?.home;r.push(Promise.resolve({intent:"#Shell-home",title:t?i.getTranslatedTextFromExpBindingString(t,this):e.getText("T_APP_HOME")}))}s.forEach(function(e,t){c+=e?`/${e}`:"";if(!n.getRouter().getRouteInfoByHash(c)){return}if(!t&&c===""&&this.hierarchyMode===k.FULL){r.push(this._getFirstPageTitleInformation());return}const i=a.getMetaPath(c);const s=a.getObject(`${i}/@com.sap.vocabularies.Common.v1.ResultContext`);if(s){return}r.push(o.getTitleInfoFromPath(c))}.bind(this));return r};n._getBreadcrumbsPathParts=function e(t){const r=t?.split("/")??[];if(this.hierarchyMode!==k.FULL){r.shift();r.splice(-1,1)}return r};n._getContextPathFromHash=function e(t){const r=this.getAppComponent(),n=r.getRootViewController();const{entitySet:i,contextPath:o}=n.getTargetOptionsFromHash(t)?.options?.settings??{};return o??(i?`/${i}`:undefined)};n._getFirstPageTitleInformation=async function e(){const t=this.getAppComponent(),r=t.getRootViewController(),n=t.getManifestEntry("sap.app"),o=n.title||"",a=n.subTitle||"",s=n.icon||"",c=r.getAppSpecificHash(),l=this._getContextPathFromHash(""),u=this.getDataModelObjectPath(l),f=u?.targetEntityType?.annotations?.UI?.HeaderInfo?.TypeNamePlural,d=L(f),p=d?i.getTranslatedTextFromExpBindingString(d,this):undefined;const h={...await r.getRootLevelTitleInformation(c,o,a,s)};h.subtitle=p?p:h.title;const g=this._getFEManifestBreadcrumbSettings()?.space;h.title=g?i.getTranslatedTextFromExpBindingString(g,this):"";return h};n._getFEManifestBreadcrumbSettings=function e(){const t=this.getAppComponent(),r=t.getManifestEntry("sap.fe");return r?.app?.breadcrumbs};n.setBreadcrumbLinks=async function t(){let r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getBindingContext()?.getPath();if(typeof r!=="string"){e.info("Breadcrumbs: path not available. Cannot set breadcrumb links.");return}const n=this.getContent();if(!n){e.error("Breadcrumbs Building block: Breadcrumbs control not available. Cannot set breadcrumb links.");return}try{const e=await Promise.all(this._getBreadcrumbsTitleInfos(r));e.forEach(this.updateBreadcrumbLink.bind(this))}catch(t){e.error("Error while setting the breadcrumb links: "+t)}};n.updateBreadcrumbLink=function t(r,n,i){const o=this.getContent();const a=n===i.length-1;const s=this.getLinkText(r,a,n);if(!s){e.error("Breadcrumbs: No link text available for the breadcrumb link at position "+n);return}if(a&&this.hierarchyMode===k.FULL){o.setCurrentLocationText(s)}else{const e=o.getLinks()[n]?o.getLinks()[n]:new c;e.setText(s);e.setHref(encodeURI(r.intent));if(!o.getLinks()[n]){o.addLink(e)}}};n.getLinkText=function e(t,r,n){const{title:i,subtitle:o}=t;const a=i!==undefined&&i!=="";const s=o!==undefined&&o!=="";if(a&&s&&this.hierarchyMode===k.FULL){const e=y(this);const t=n===1;return!t&&r?i:e.getText("T_BREADCRUMBS_TITLE_LONG_TEMPLATE",[i,o])}if(s){return o}else if(a){return i}};n.createContent=function e(){const t=this.getPageController()?.getView().getId();return l(s,{id:t?B([`${t}--fe`,"Breadcrumbs"]):undefined,modelContextChange:()=>{this.setBreadcrumbLinks()}})};return r}(n),g=x(h.prototype,"__implements__sap_m_IBreadcrumbs",[f],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),b=x(h.prototype,"hierarchyMode",[d],{configurable:true,enumerable:true,writable:true,initializer:null}),h))||p);m=O;return m},false);
//# sourceMappingURL=Breadcrumbs.js.map