{"version":3,"names":["SubSection","_dec","defineUI5Class","designtime","_dec2","mixin","SubSectionStateHandler","_dec3","property","type","_dec4","_class","_class2","_ObjectPageSubSection","sId","mSettings","_this","call","_initializerDefineProperty","_descriptor","_descriptor2","eventDelegates","onBeforeRendering","checkAndApplyFormAlignmentClass","addEventDelegate","_inheritsLoose","_proto","prototype","getVisibleContent","blocks","getBlocks","visibleContent","forEach","block","content","getAggregation","Array","isArray","control","getVisible","push","isEligibleForAlignment","isA","length","addStyleClass","removeStyleClass","setTitle","sTitle","feSection","getParent","checkAndAdjustSectionContent","ObjectPageSubSection","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sourceRoot":".","sources":["SubSection.ts"],"sourcesContent":["import { defineUI5Class, mixin, property } from \"sap/fe/base/ClassSupport\";\nimport SubSectionStateHandler from \"sap/fe/macros/controls/section/mixin/SubSectionStateHandler\";\nimport type SubSectionBlock from \"sap/fe/templates/ObjectPage/controls/SubSectionBlock\";\nimport type Control from \"sap/ui/core/Control\";\n// eslint-disable-next-line @typescript-eslint/no-restricted-imports\nimport ObjectPageSubSection from \"sap/uxap/ObjectPageSubSection\";\nimport type Section from \"../Section\";\n\n@defineUI5Class(\"sap.fe.macros.controls.section.SubSection\", { designtime: \"sap/uxap/designtime/ObjectPageSubSection.designtime\" })\n@mixin(SubSectionStateHandler)\nclass SubSection extends ObjectPageSubSection {\n\t/**\n\t * Path to the apply-state handler to be called during state interactions.\n\t */\n\t@property({ type: \"string\" })\n\tapplyStateHandler?: string;\n\n\t/**\n\t * Path to the retrieve-state handler to be called during state interactions.\n\t */\n\t@property({ type: \"string\" })\n\tretrieveStateHandler?: string;\n\n\tconstructor(sId?: string, mSettings?: object) {\n\t\tsuper(sId, mSettings);\n\n\t\t// Register delegate for lifecycle management\n\t\tconst eventDelegates = {\n\t\t\tonBeforeRendering: (): void => {\n\t\t\t\tthis.checkAndApplyFormAlignmentClass();\n\t\t\t}\n\t\t};\n\n\t\tthis.addEventDelegate(eventDelegates);\n\t}\n\n\t/**\n\t * Gets visible content from all blocks in this subsection.\n\t * @returns Array of visible controls\n\t */\n\tprivate getVisibleContent(): Control[] {\n\t\tconst blocks = this.getBlocks() as SubSectionBlock[];\n\t\tconst visibleContent: Control[] = [];\n\n\t\tblocks.forEach((block: SubSectionBlock) => {\n\t\t\tlet content = block.getAggregation(\"content\");\n\t\t\tif (content === null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!Array.isArray(content)) {\n\t\t\t\tcontent = [content];\n\t\t\t}\n\t\t\tfor (const control of content as Control[]) {\n\t\t\t\tif (control.getVisible()) {\n\t\t\t\t\tvisibleContent.push(control);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn visibleContent;\n\t}\n\n\t/**\n\t * Checks if control is eligible for alignment CSS class.\n\t * @param control Control to check\n\t * @returns True if control is Form, Panel, Table, or List\n\t */\n\tprivate isEligibleForAlignment(control: Control): boolean {\n\t\treturn control.isA([\"sap.ui.layout.form.Form\", \"sap.fe.macros.form.FormAPI\", \"sap.m.Panel\", \"sap.m.Table\", \"sap.m.List\"]);\n\t}\n\n\t/**\n\t * Checks subsection content and applies/removes alignment CSS class on Form elements.\n\t */\n\tprivate checkAndApplyFormAlignmentClass(): void {\n\t\tconst visibleContent = this.getVisibleContent();\n\n\t\t// Only apply if exactly one visible control of eligible type\n\t\tif (visibleContent.length === 1 && this.isEligibleForAlignment(visibleContent[0])) {\n\t\t\tvisibleContent[0].addStyleClass(\"sapUxAPObjectPageSubSectionAlignContent\");\n\t\t} else {\n\t\t\tfor (const control of visibleContent) {\n\t\t\t\tcontrol.removeStyleClass(\"sapUxAPObjectPageSubSectionAlignContent\");\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Sets the title of the subsection and adjusts the section content accordingly.\n\t * @param sTitle The title to set for the subsection\n\t * @returns The current instance of SubSection\n\t */\n\tsetTitle(sTitle?: string): this {\n\t\tsuper.setTitle(sTitle);\n\n\t\t// We need to run the title adjustment logic at section level after the title is set.\n\t\tconst feSection = this.getParent();\n\t\tif (feSection && feSection.isA<Section>(\"sap.fe.macros.controls.Section\") && feSection.checkAndAdjustSectionContent) {\n\t\t\tfeSection.checkAndAdjustSectionContent();\n\t\t}\n\n\t\treturn this;\n\t}\n}\n\nexport default SubSection;\n"],"mappings":"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","ignoreList":[],"file":"SubSection-dbg.js"}