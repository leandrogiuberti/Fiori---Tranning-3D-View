{"version":3,"file":"SubSection.js","names":["SubSection","_dec","defineUI5Class","designtime","_dec2","mixin","SubSectionStateHandler","_dec3","property","type","_dec4","_class","_class2","_ObjectPageSubSection","sId","mSettings","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","eventDelegates","onBeforeRendering","checkAndApplyFormAlignmentClass","addEventDelegate","_inheritsLoose","_proto","prototype","getVisibleContent","blocks","getBlocks","visibleContent","forEach","block","content","getAggregation","Array","isArray","control","getVisible","push","isEligibleForAlignment","isA","length","addStyleClass","removeStyleClass","setTitle","sTitle","feSection","getParent","checkAndAdjustSectionContent","ObjectPageSubSection","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./SubSection.ts"],"sourcesContent":["import { defineUI5Class, mixin, property } from \"sap/fe/base/ClassSupport\";\nimport SubSectionStateHandler from \"sap/fe/macros/controls/section/mixin/SubSectionStateHandler\";\nimport type SubSectionBlock from \"sap/fe/templates/ObjectPage/controls/SubSectionBlock\";\nimport type Control from \"sap/ui/core/Control\";\n// eslint-disable-next-line @typescript-eslint/no-restricted-imports\nimport ObjectPageSubSection from \"sap/uxap/ObjectPageSubSection\";\nimport type Section from \"../Section\";\n\n@defineUI5Class(\"sap.fe.macros.controls.section.SubSection\", { designtime: \"sap/uxap/designtime/ObjectPageSubSection.designtime\" })\n@mixin(SubSectionStateHandler)\nclass SubSection extends ObjectPageSubSection {\n\t/**\n\t * Path to the apply-state handler to be called during state interactions.\n\t */\n\t@property({ type: \"string\" })\n\tapplyStateHandler?: string;\n\n\t/**\n\t * Path to the retrieve-state handler to be called during state interactions.\n\t */\n\t@property({ type: \"string\" })\n\tretrieveStateHandler?: string;\n\n\tconstructor(sId?: string, mSettings?: object) {\n\t\tsuper(sId, mSettings);\n\n\t\t// Register delegate for lifecycle management\n\t\tconst eventDelegates = {\n\t\t\tonBeforeRendering: (): void => {\n\t\t\t\tthis.checkAndApplyFormAlignmentClass();\n\t\t\t}\n\t\t};\n\n\t\tthis.addEventDelegate(eventDelegates);\n\t}\n\n\t/**\n\t * Gets visible content from all blocks in this subsection.\n\t * @returns Array of visible controls\n\t */\n\tprivate getVisibleContent(): Control[] {\n\t\tconst blocks = this.getBlocks() as SubSectionBlock[];\n\t\tconst visibleContent: Control[] = [];\n\n\t\tblocks.forEach((block: SubSectionBlock) => {\n\t\t\tlet content = block.getAggregation(\"content\");\n\t\t\tif (content === null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!Array.isArray(content)) {\n\t\t\t\tcontent = [content];\n\t\t\t}\n\t\t\tfor (const control of content as Control[]) {\n\t\t\t\tif (control.getVisible()) {\n\t\t\t\t\tvisibleContent.push(control);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn visibleContent;\n\t}\n\n\t/**\n\t * Checks if control is eligible for alignment CSS class.\n\t * @param control Control to check\n\t * @returns True if control is Form, Panel, Table, or List\n\t */\n\tprivate isEligibleForAlignment(control: Control): boolean {\n\t\treturn control.isA([\"sap.ui.layout.form.Form\", \"sap.fe.macros.form.FormAPI\", \"sap.m.Panel\", \"sap.m.Table\", \"sap.m.List\"]);\n\t}\n\n\t/**\n\t * Checks subsection content and applies/removes alignment CSS class on Form elements.\n\t */\n\tprivate checkAndApplyFormAlignmentClass(): void {\n\t\tconst visibleContent = this.getVisibleContent();\n\n\t\t// Only apply if exactly one visible control of eligible type\n\t\tif (visibleContent.length === 1 && this.isEligibleForAlignment(visibleContent[0])) {\n\t\t\tvisibleContent[0].addStyleClass(\"sapUxAPObjectPageSubSectionAlignContent\");\n\t\t} else {\n\t\t\tfor (const control of visibleContent) {\n\t\t\t\tcontrol.removeStyleClass(\"sapUxAPObjectPageSubSectionAlignContent\");\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Sets the title of the subsection and adjusts the section content accordingly.\n\t * @param sTitle The title to set for the subsection\n\t * @returns The current instance of SubSection\n\t */\n\tsetTitle(sTitle?: string): this {\n\t\tsuper.setTitle(sTitle);\n\n\t\t// We need to run the title adjustment logic at section level after the title is set.\n\t\tconst feSection = this.getParent();\n\t\tif (feSection && feSection.isA<Section>(\"sap.fe.macros.controls.Section\") && feSection.checkAndAdjustSectionContent) {\n\t\t\tfeSection.checkAndAdjustSectionContent();\n\t\t}\n\n\t\treturn this;\n\t}\n}\n\nexport default SubSection;\n"],"mappings":";;;;orCAIA,IAMMA,GAAUC,EAFfC,EAAe,4CAA6C,CAAEC,WAAY,wDAAwDC,EAClIC,EAAMC,GAAuBC,EAK5BC,EAAS,CAAEC,KAAM,WAAWC,EAM5BF,EAAS,CAAEC,KAAM,WAAWR,EAAAU,EAAAP,EAAAO,GAAAC,EAAA,SAAAC,GAG7B,SAAAb,EAAYc,EAAcC,GAAoB,IAAAC,EAC7CA,EAAAH,EAAAI,KAAAC,KAAMJ,EAAKC,IAAUG,KAbtBC,EAAAH,EAAA,oBAAAI,EAAAJ,GAMAG,EAAAH,EAAA,uBAAAK,EAAAL,GAUC,MAAMM,EAAiB,CACtBC,kBAAmBA,KAClBP,EAAKQ,oCAIPR,EAAKS,iBAAiBH,GAAgB,OAAAN,CACvC,CAEAU,EAAA1B,EAAAa,GAAA,IAAAc,EAAA3B,EAAA4B,UAAAD,EAIQE,kBAAR,SAAQA,IACP,MAAMC,EAASZ,KAAKa,YACpB,MAAMC,EAA4B,GAElCF,EAAOG,QAASC,IACf,IAAIC,EAAUD,EAAME,eAAe,WACnC,GAAID,IAAY,KAAM,CACrB,MACD,CACA,IAAKE,MAAMC,QAAQH,GAAU,CAC5BA,EAAU,CAACA,EACZ,CACA,IAAK,MAAMI,KAAWJ,EAAsB,CAC3C,GAAII,EAAQC,aAAc,CACzBR,EAAeS,KAAKF,EACrB,CACD,IAGD,OAAOP,CACR,EAEAL,EAKQe,uBAAR,SAAQA,EAAuBH,GAC9B,OAAOA,EAAQI,IAAI,CAAC,0BAA2B,6BAA8B,cAAe,cAAe,cAC5G,EAEAhB,EAGQH,gCAAR,SAAQA,IACP,MAAMQ,EAAiBd,KAAKW,oBAG5B,GAAIG,EAAeY,SAAW,GAAK1B,KAAKwB,uBAAuBV,EAAe,IAAK,CAClFA,EAAe,GAAGa,cAAc,0CACjC,KAAO,CACN,IAAK,MAAMN,KAAWP,EAAgB,CACrCO,EAAQO,iBAAiB,0CAC1B,CACD,CACD,EAEAnB,EAKAoB,SAAA,SAAAA,EAASC,GACRnC,EAAAe,UAAMmB,SAAQ9B,KAAAC,KAAC8B,GAGf,MAAMC,EAAY/B,KAAKgC,YACvB,GAAID,GAAaA,EAAUN,IAAa,mCAAqCM,EAAUE,6BAA8B,CACpHF,EAAUE,8BACX,CAEA,OAAOjC,IACR,EAAC,OAAAlB,CAAA,CAlF4B,CAVLoD,GAAoBhC,EAAAiC,EAAAzC,EAAAgB,UAAA,qBAAArB,GAAA,CAAA+C,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAApC,EAAAgC,EAAAzC,EAAAgB,UAAA,wBAAAlB,GAAA,CAAA4C,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAA7C,KAAAD,OAAA,OA+F9BX,CAAU","ignoreList":[]}