{"version":3,"file":"FilterContainer.js","names":["FilterContainer","_dec","defineUI5Class","_class","_MdcFilterContainer","apply","this","arguments","_inheritsLoose","_proto","prototype","init","aAllFilterFields","aAllVisualFilters","call","oLayout","setParent","exit","forEach","oFilterField","destroy","Object","keys","sKey","insertFilterField","oControl","iIndex","oFilterItemLayoutEventDelegate","onBeforeRendering","_fnGetContentCopy","getContent","removeEventDelegate","addEventDelegate","oInnerControl","isA","oContent","oVFId","getId","setContent","push","removeFilterField","oFilterFieldIndex","findIndex","splice","removeAllFilterFields","removeAllContent","getAllButtons","buttonLayout","getEndContent","removeButton","removeEndContent","getAllFilterFields","filter","filterFieldLayout","isDestroyed","getAllVisualFilterFields","setAllFilterFields","aFilterFields","MdcFilterContainer"],"sources":["./FilterContainer.ts"],"sourcesContent":["import { defineUI5Class } from \"sap/fe/base/ClassSupport\";\nimport type VisualFilter from \"sap/fe/macros/controls/filterbar/VisualFilter\";\nimport type Button from \"sap/m/Button\";\nimport type OverflowToolbar from \"sap/m/OverflowToolbar\";\nimport type Control from \"sap/ui/core/Control\";\nimport type AlignedFlowLayout from \"sap/ui/layout/AlignedFlowLayout\";\nimport type FilterField from \"sap/ui/mdc/FilterField\";\nimport type IFilterContainer from \"sap/ui/mdc/filterbar/IFilterContainer\";\nimport MdcFilterContainer from \"sap/ui/mdc/filterbar/aligned/FilterContainer\";\n\n/**\n * Constructor for a new FE filter container.\n *\n */\n@defineUI5Class(\"sap.fe.macros.controls.filterbar.FilterContainer\")\nclass FilterContainer extends MdcFilterContainer implements IFilterContainer {\n\taAllFilterFields!: Control[];\n\n\taAllVisualFilters!: Record<string, VisualFilter>;\n\n\toLayout!: AlignedFlowLayout;\n\n\tinit(): void {\n\t\tthis.aAllFilterFields = [];\n\t\tthis.aAllVisualFilters = {};\n\t\tsuper.init();\n\t\tthis.oLayout.setParent(this);\n\t}\n\n\texit(): void {\n\t\t// destroy layout\n\t\tsuper.exit();\n\t\t// destroy all filter fields which are not in the layout\n\t\tthis.aAllFilterFields.forEach(function (oFilterField: Control) {\n\t\t\toFilterField.destroy();\n\t\t});\n\t\tObject.keys(this.aAllVisualFilters).forEach((sKey: string) => {\n\t\t\tthis.aAllVisualFilters[sKey].destroy();\n\t\t});\n\t}\n\n\tinsertFilterField(oControl: Control & { _fnGetContentCopy?: Function; getContent: Function }, iIndex: number): void {\n\t\tconst oFilterItemLayoutEventDelegate = {\n\t\t\tonBeforeRendering: function (): void {\n\t\t\t\t// For compact filters the item layout needs to render both label and filter field.\n\t\t\t\t// hence use the original getContent of the FilterItemLayout\n\t\t\t\tif (oControl._fnGetContentCopy) {\n\t\t\t\t\toControl.getContent = oControl._fnGetContentCopy;\n\t\t\t\t}\n\t\t\t\toControl.removeEventDelegate(oFilterItemLayoutEventDelegate);\n\t\t\t}\n\t\t};\n\t\toControl.addEventDelegate(oFilterItemLayoutEventDelegate);\n\n\t\t// In this layout there is no need to render visual filter\n\t\t// hence find the filter field from the layout and remove it's content aggregation\n\t\toControl.getContent().forEach((oInnerControl: Control) => {\n\t\t\tif (oInnerControl.isA<FilterField>(\"sap.ui.mdc.FilterField\")) {\n\t\t\t\tconst oContent = oInnerControl.getContent && (oInnerControl.getContent() as unknown as Control);\n\t\t\t\tif (oContent && oContent.isA<VisualFilter>(\"sap.fe.macros.visualfilters.VisualFilter\")) {\n\t\t\t\t\t// store the visual filter for later use.\n\t\t\t\t\tconst oVFId = oInnerControl.getId();\n\t\t\t\t\tthis.aAllVisualFilters[oVFId] = oContent;\n\t\t\t\t\t// remove the content aggregation to render internal content of the field\n\t\t\t\t\toInnerControl.setContent(null as unknown as Control);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// store filter fields to refer to when switching between layout\n\t\tthis.aAllFilterFields.push(oControl);\n\t\tsuper.insertFilterField(oControl, iIndex);\n\t}\n\n\tremoveFilterField(oControl: Control & { getContent: Function }): void {\n\t\tconst oFilterFieldIndex = this.aAllFilterFields.findIndex(function (oFilterField: Control) {\n\t\t\treturn oFilterField.getId() === oControl.getId();\n\t\t});\n\n\t\t// Setting VF content for Fillterfield before removing\n\t\toControl.getContent().forEach((oInnerControl: Control) => {\n\t\t\tif (oInnerControl.isA<FilterField>(\"sap.ui.mdc.FilterField\") && !oInnerControl.getContent()) {\n\t\t\t\tconst oVFId = oInnerControl.getId();\n\t\t\t\tif (this.aAllVisualFilters[oVFId]) {\n\t\t\t\t\toInnerControl.setContent(this.aAllVisualFilters[oVFId]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.aAllFilterFields.splice(oFilterFieldIndex, 1);\n\n\t\tsuper.removeFilterField(oControl);\n\t}\n\n\tremoveAllFilterFields(): void {\n\t\tthis.aAllFilterFields = [];\n\t\tthis.aAllVisualFilters = {};\n\t\tthis.oLayout.removeAllContent();\n\t}\n\n\tgetAllButtons(): Button[] {\n\t\tconst buttonLayout = this.oLayout.getEndContent();\n\t\treturn (\n\t\t\t(buttonLayout?.[0] as OverflowToolbar | undefined)?.getContent()?.[1] as OverflowToolbar | undefined\n\t\t)?.getContent() as Button[];\n\t}\n\n\tremoveButton(oControl: Button): void {\n\t\tthis.oLayout.removeEndContent(oControl);\n\t}\n\n\tgetAllFilterFields(): FilterField[] {\n\t\treturn this.aAllFilterFields.filter((filterFieldLayout) => !filterFieldLayout.isDestroyed()) as FilterField[];\n\t}\n\n\tgetAllVisualFilterFields(): Record<string, Control> {\n\t\treturn this.aAllVisualFilters;\n\t}\n\n\tsetAllFilterFields(aFilterFields: FilterField[]): void {\n\t\tthis.aAllFilterFields = aFilterFields;\n\t}\n}\nexport default FilterContainer;\n"],"mappings":";;;;qWAUA,IAKMA,GAAeC,EADpBC,EAAe,oDAAmDD,EAAAE,EAAA,SAAAC,GAAA,SAAAJ,IAAA,OAAAI,EAAAC,MAAAC,KAAAC,YAAAD,IAAA,CAAAE,EAAAR,EAAAI,GAAA,IAAAK,EAAAT,EAAAU,UAAAD,EAQlEE,KAAA,SAAAA,IACCL,KAAKM,iBAAmB,GACxBN,KAAKO,kBAAoB,CAAC,EAC1BT,EAAAM,UAAMC,KAAIG,KAAAR,MACVA,KAAKS,QAAQC,UAAUV,KACxB,EAACG,EAEDQ,KAAA,SAAAA,IAECb,EAAAM,UAAMO,KAAIH,KAAAR,MAEVA,KAAKM,iBAAiBM,QAAQ,SAAUC,GACvCA,EAAaC,SACd,GACAC,OAAOC,KAAKhB,KAAKO,mBAAmBK,QAASK,IAC5CjB,KAAKO,kBAAkBU,GAAMH,WAE/B,EAACX,EAEDe,kBAAA,SAAAA,EAAkBC,EAA4EC,GAC7F,MAAMC,EAAiC,CACtCC,kBAAmB,WAGlB,GAAIH,EAASI,kBAAmB,CAC/BJ,EAASK,WAAaL,EAASI,iBAChC,CACAJ,EAASM,oBAAoBJ,EAC9B,GAEDF,EAASO,iBAAiBL,GAI1BF,EAASK,aAAaZ,QAASe,IAC9B,GAAIA,EAAcC,IAAiB,0BAA2B,CAC7D,MAAMC,EAAWF,EAAcH,YAAeG,EAAcH,aAC5D,GAAIK,GAAYA,EAASD,IAAkB,4CAA6C,CAEvF,MAAME,EAAQH,EAAcI,QAC5B/B,KAAKO,kBAAkBuB,GAASD,EAEhCF,EAAcK,WAAW,KAC1B,CACD,IAIDhC,KAAKM,iBAAiB2B,KAAKd,GAC3BrB,EAAAM,UAAMc,kBAAiBV,KAAAR,KAACmB,EAAUC,EACnC,EAACjB,EAED+B,kBAAA,SAAAA,EAAkBf,GACjB,MAAMgB,EAAoBnC,KAAKM,iBAAiB8B,UAAU,SAAUvB,GACnE,OAAOA,EAAakB,UAAYZ,EAASY,OAC1C,GAGAZ,EAASK,aAAaZ,QAASe,IAC9B,GAAIA,EAAcC,IAAiB,4BAA8BD,EAAcH,aAAc,CAC5F,MAAMM,EAAQH,EAAcI,QAC5B,GAAI/B,KAAKO,kBAAkBuB,GAAQ,CAClCH,EAAcK,WAAWhC,KAAKO,kBAAkBuB,GACjD,CACD,IAGD9B,KAAKM,iBAAiB+B,OAAOF,EAAmB,GAEhDrC,EAAAM,UAAM8B,kBAAiB1B,KAAAR,KAACmB,EACzB,EAAChB,EAEDmC,sBAAA,SAAAA,IACCtC,KAAKM,iBAAmB,GACxBN,KAAKO,kBAAoB,CAAC,EAC1BP,KAAKS,QAAQ8B,kBACd,EAACpC,EAEDqC,cAAA,SAAAA,IACC,MAAMC,EAAezC,KAAKS,QAAQiC,gBAClC,OACED,IAAe,IAAoCjB,eAAe,IACjEA,YACJ,EAACrB,EAEDwC,aAAA,SAAAA,EAAaxB,GACZnB,KAAKS,QAAQmC,iBAAiBzB,EAC/B,EAAChB,EAED0C,mBAAA,SAAAA,IACC,OAAO7C,KAAKM,iBAAiBwC,OAAQC,IAAuBA,EAAkBC,cAC/E,EAAC7C,EAED8C,yBAAA,SAAAA,IACC,OAAOjD,KAAKO,iBACb,EAACJ,EAED+C,mBAAA,SAAAA,EAAmBC,GAClBnD,KAAKM,iBAAmB6C,CACzB,EAAC,OAAAzD,CAAA,CA3GiE,CACrC0D,KAAkBvD,GAAA,OA4GjCH,CAAe","ignoreList":[]}