{"version":3,"file":"VisualFilterContainer.js","names":["VisualFilterContainer","_dec","defineUI5Class","_dec2","aggregation","type","multiple","visibility","_class","_class2","_IFilterContainer","_this","_len","arguments","length","args","Array","_key","call","this","_initializerDefineProperty","_descriptor","aVisualFilterFields","_inheritsLoose","_proto","prototype","init","Orientation","coreLibrabry","sOrientation","Device","system","phone","Vertical","undefined","sDirection","oHeaderContainer","HeaderContainer","orientation","oButtonFlexBox","FlexBox","alignItems","justifyContent","oLayout","direction","items","setParent","aAllFilterFields","exit","getAllFilterFields","forEach","oFilterField","destroy","insertFilterField","oControl","iIndex","oFilterItemLayoutEventDelegate","onBeforeRendering","_fnGetContentCopy","getContent","aContent","push","_oFilterField","removeEventDelegate","addEventDelegate","oVisualFilters","some","oInnerControl","sFFId","getId","isA","setContent","insertContent","removeFilterField","removeContent","removeAllFilterFields","removeAllContent","getFilterFields","addButton","addItem","getAllButtons","getItems","reverse","removeButton","removeItem","filter","filterFieldLayout","isDestroyed","setAllFilterFields","aFilterFields","enableChartBinding","enable","diffState","VisualFilterUtils","IFilterContainer","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./VisualFilterContainer.ts"],"sourcesContent":["import { aggregation, defineUI5Class } from \"sap/fe/base/ClassSupport\";\nimport type VisualFilter from \"sap/fe/macros/visualfilters/VisualFilter\";\nimport type Button from \"sap/m/Button\";\nimport FlexBox from \"sap/m/FlexBox\";\nimport HeaderContainer from \"sap/m/HeaderContainer\";\nimport Device from \"sap/ui/Device\";\nimport type Control from \"sap/ui/core/Control\";\nimport coreLibrabry from \"sap/ui/core/library\";\nimport type FilterField from \"sap/ui/mdc/FilterField\";\nimport IFilterContainer from \"sap/ui/mdc/filterbar/IFilterContainer\";\nimport type { ExternalStateType } from \"../../valuehelp/ValueHelpDelegate\";\nimport VisualFilterUtils from \"./utils/VisualFilterUtils\";\n/**\n * Constructor for a new Visual Filter Container.\n * Used for visual filters.\n *\n */\n@defineUI5Class(\"sap.fe.macros.controls.filterbar.VisualFilterContainer\")\nclass VisualFilterContainer extends IFilterContainer {\n\t@aggregation({\n\t\ttype: \"sap.ui.core.Control\",\n\t\tmultiple: false,\n\t\tvisibility: \"hidden\"\n\t})\n\t/**\n\t * Internal hidden aggregation to hold the inner layout.\n\t */\n\t_layout!: Control;\n\n\toHeaderContainer?: HeaderContainer;\n\n\toButtonFlexBox?: FlexBox;\n\n\toLayout!: FlexBox;\n\n\taAllFilterFields!: FilterField[];\n\n\taVisualFilterFields?: Record<string, VisualFilter> = {};\n\n\tinit(): void {\n\t\tsuper.init();\n\t\tconst Orientation = coreLibrabry.Orientation;\n\n\t\tconst sOrientation = Device.system.phone ? Orientation.Vertical : undefined;\n\t\tconst sDirection = Device.system.phone ? \"ColumnReverse\" : \"Column\";\n\n\t\tthis.oHeaderContainer = new HeaderContainer({\n\t\t\torientation: sOrientation\n\t\t});\n\t\tthis.oButtonFlexBox = new FlexBox({\n\t\t\talignItems: \"End\",\n\t\t\tjustifyContent: \"End\"\n\t\t});\n\n\t\tthis.oLayout = new FlexBox({\n\t\t\tdirection: sDirection, // Direction is Column Reverse for Phone\n\t\t\titems: [this.oHeaderContainer, this.oButtonFlexBox]\n\t\t});\n\t\tthis.oLayout.setParent(this);\n\n\t\tthis.aAllFilterFields = [];\n\t\tthis.aVisualFilterFields = {};\n\t}\n\n\texit(): void {\n\t\t// destroy layout\n\t\tsuper.exit();\n\t\t// destroy all filter fields which are not in the layout\n\t\tconst aAllFilterFields = this.getAllFilterFields();\n\t\taAllFilterFields.forEach(function (oFilterField: FilterField) {\n\t\t\toFilterField.destroy();\n\t\t});\n\t\tthis.oHeaderContainer = undefined;\n\t\tthis.oButtonFlexBox = undefined;\n\t\tthis.aAllFilterFields = [];\n\t}\n\n\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t// @ts-ignore\n\tinsertFilterField(\n\t\toControl: Omit<FilterField, \"getContent\"> & {\n\t\t\t_fnGetContentCopy?: Function;\n\t\t\t_oFilterField: FilterField;\n\t\t\tgetContent: () => Control[];\n\t\t},\n\t\tiIndex: number\n\t): void {\n\t\tconst oFilterItemLayoutEventDelegate = {\n\t\t\tonBeforeRendering: function (): void {\n\t\t\t\t// visual filter does not need to render a label\n\t\t\t\t// hence override the getContent of the FilterItemLayout\n\t\t\t\t// and store the original getContent for later usage in the compact filters\n\t\t\t\tif (!oControl._fnGetContentCopy) {\n\t\t\t\t\toControl._fnGetContentCopy = oControl.getContent;\n\t\t\t\t}\n\t\t\t\t// override getContent of FilterItemLayout\n\t\t\t\t// to add only filterField and not label\n\t\t\t\toControl.getContent = function (): Control[] {\n\t\t\t\t\tconst aContent = [];\n\t\t\t\t\taContent.push(oControl._oFilterField);\n\t\t\t\t\treturn aContent;\n\t\t\t\t};\n\t\t\t\toControl.removeEventDelegate(oFilterItemLayoutEventDelegate);\n\t\t\t}\n\t\t};\n\t\toControl.addEventDelegate(oFilterItemLayoutEventDelegate);\n\n\t\t// Setting VF control for the Filterfield.\n\t\tconst oVisualFilters = this.aVisualFilterFields;\n\t\toControl.getContent().some((oInnerControl: Control) => {\n\t\t\tconst sFFId = oInnerControl.getId();\n\t\t\tif (oVisualFilters && oVisualFilters[sFFId] && oInnerControl.isA<FilterField>(\"sap.ui.mdc.FilterField\")) {\n\t\t\t\toInnerControl.setContent(oVisualFilters[sFFId]);\n\t\t\t\tthis.oHeaderContainer!.insertContent(oControl, iIndex);\n\t\t\t}\n\t\t});\n\t}\n\n\tremoveFilterField(oControl: FilterField): void {\n\t\tthis.oHeaderContainer!.removeContent(oControl);\n\t}\n\n\tremoveAllFilterFields(): void {\n\t\tthis.aAllFilterFields = [];\n\t\tthis.aVisualFilterFields = {};\n\t\tthis.oHeaderContainer!.removeAllContent();\n\t}\n\n\tgetFilterFields(): FilterField[] {\n\t\treturn this.oHeaderContainer!.getContent() as FilterField[];\n\t}\n\n\taddButton(oControl: Button): void {\n\t\tthis.oButtonFlexBox!.addItem(oControl);\n\t}\n\n\tgetAllButtons(): Button[] {\n\t\treturn this.oButtonFlexBox!.getItems().reverse() as Button[];\n\t}\n\n\tremoveButton(oControl: Button): void {\n\t\tthis.oButtonFlexBox!.removeItem(oControl);\n\t}\n\n\tgetAllFilterFields(): FilterField[] {\n\t\treturn this.aAllFilterFields.filter((filterFieldLayout) => !filterFieldLayout.isDestroyed());\n\t}\n\n\tsetAllFilterFields(aFilterFields: FilterField[], aVisualFilterFields?: Record<string, VisualFilter>): void {\n\t\tthis.aAllFilterFields = aFilterFields;\n\t\tthis.aVisualFilterFields = aVisualFilterFields;\n\t}\n\n\t/**\n\t * Enables or disables the chart binding for visual filters in this container.\n\t * @param enable Whether to enable or disable the chart binding\n\t * @param diffState Optional parameter to specify the changed filter field paths, incase of enablement.\n\t */\n\tenableChartBinding(enable: boolean, diffState?: ExternalStateType): void {\n\t\tVisualFilterUtils.enableChartBinding(this.aVisualFilterFields ?? {}, enable, diffState);\n\t}\n}\n\nexport default VisualFilterContainer;\n"],"mappings":"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","ignoreList":[]}