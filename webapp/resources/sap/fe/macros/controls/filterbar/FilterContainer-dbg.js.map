{"version":3,"names":["FilterContainer","_dec","defineUI5Class","_class","_MdcFilterContainer","apply","arguments","_inheritsLoose","_proto","prototype","init","aAllFilterFields","aAllVisualFilters","call","oLayout","setParent","exit","forEach","oFilterField","destroy","Object","keys","sKey","insertFilterField","oControl","iIndex","oFilterItemLayoutEventDelegate","onBeforeRendering","_fnGetContentCopy","getContent","removeEventDelegate","addEventDelegate","oInnerControl","isA","oContent","oVFId","getId","setContent","push","removeFilterField","oFilterFieldIndex","findIndex","splice","removeAllFilterFields","removeAllContent","getAllButtons","buttonLayout","getEndContent","removeButton","removeEndContent","getAllFilterFields","filter","filterFieldLayout","isDestroyed","getAllVisualFilterFields","setAllFilterFields","aFilterFields","MdcFilterContainer"],"sourceRoot":".","sources":["FilterContainer.ts"],"sourcesContent":["import { defineUI5Class } from \"sap/fe/base/ClassSupport\";\nimport type VisualFilter from \"sap/fe/macros/controls/filterbar/VisualFilter\";\nimport type Button from \"sap/m/Button\";\nimport type OverflowToolbar from \"sap/m/OverflowToolbar\";\nimport type Control from \"sap/ui/core/Control\";\nimport type AlignedFlowLayout from \"sap/ui/layout/AlignedFlowLayout\";\nimport type FilterField from \"sap/ui/mdc/FilterField\";\nimport type IFilterContainer from \"sap/ui/mdc/filterbar/IFilterContainer\";\nimport MdcFilterContainer from \"sap/ui/mdc/filterbar/aligned/FilterContainer\";\n\n/**\n * Constructor for a new FE filter container.\n *\n */\n@defineUI5Class(\"sap.fe.macros.controls.filterbar.FilterContainer\")\nclass FilterContainer extends MdcFilterContainer implements IFilterContainer {\n\taAllFilterFields!: Control[];\n\n\taAllVisualFilters!: Record<string, VisualFilter>;\n\n\toLayout!: AlignedFlowLayout;\n\n\tinit(): void {\n\t\tthis.aAllFilterFields = [];\n\t\tthis.aAllVisualFilters = {};\n\t\tsuper.init();\n\t\tthis.oLayout.setParent(this);\n\t}\n\n\texit(): void {\n\t\t// destroy layout\n\t\tsuper.exit();\n\t\t// destroy all filter fields which are not in the layout\n\t\tthis.aAllFilterFields.forEach(function (oFilterField: Control) {\n\t\t\toFilterField.destroy();\n\t\t});\n\t\tObject.keys(this.aAllVisualFilters).forEach((sKey: string) => {\n\t\t\tthis.aAllVisualFilters[sKey].destroy();\n\t\t});\n\t}\n\n\tinsertFilterField(oControl: Control & { _fnGetContentCopy?: Function; getContent: Function }, iIndex: number): void {\n\t\tconst oFilterItemLayoutEventDelegate = {\n\t\t\tonBeforeRendering: function (): void {\n\t\t\t\t// For compact filters the item layout needs to render both label and filter field.\n\t\t\t\t// hence use the original getContent of the FilterItemLayout\n\t\t\t\tif (oControl._fnGetContentCopy) {\n\t\t\t\t\toControl.getContent = oControl._fnGetContentCopy;\n\t\t\t\t}\n\t\t\t\toControl.removeEventDelegate(oFilterItemLayoutEventDelegate);\n\t\t\t}\n\t\t};\n\t\toControl.addEventDelegate(oFilterItemLayoutEventDelegate);\n\n\t\t// In this layout there is no need to render visual filter\n\t\t// hence find the filter field from the layout and remove it's content aggregation\n\t\toControl.getContent().forEach((oInnerControl: Control) => {\n\t\t\tif (oInnerControl.isA<FilterField>(\"sap.ui.mdc.FilterField\")) {\n\t\t\t\tconst oContent = oInnerControl.getContent && (oInnerControl.getContent() as unknown as Control);\n\t\t\t\tif (oContent && oContent.isA<VisualFilter>(\"sap.fe.macros.visualfilters.VisualFilter\")) {\n\t\t\t\t\t// store the visual filter for later use.\n\t\t\t\t\tconst oVFId = oInnerControl.getId();\n\t\t\t\t\tthis.aAllVisualFilters[oVFId] = oContent;\n\t\t\t\t\t// remove the content aggregation to render internal content of the field\n\t\t\t\t\toInnerControl.setContent(null as unknown as Control);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// store filter fields to refer to when switching between layout\n\t\tthis.aAllFilterFields.push(oControl);\n\t\tsuper.insertFilterField(oControl, iIndex);\n\t}\n\n\tremoveFilterField(oControl: Control & { getContent: Function }): void {\n\t\tconst oFilterFieldIndex = this.aAllFilterFields.findIndex(function (oFilterField: Control) {\n\t\t\treturn oFilterField.getId() === oControl.getId();\n\t\t});\n\n\t\t// Setting VF content for Fillterfield before removing\n\t\toControl.getContent().forEach((oInnerControl: Control) => {\n\t\t\tif (oInnerControl.isA<FilterField>(\"sap.ui.mdc.FilterField\") && !oInnerControl.getContent()) {\n\t\t\t\tconst oVFId = oInnerControl.getId();\n\t\t\t\tif (this.aAllVisualFilters[oVFId]) {\n\t\t\t\t\toInnerControl.setContent(this.aAllVisualFilters[oVFId]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.aAllFilterFields.splice(oFilterFieldIndex, 1);\n\n\t\tsuper.removeFilterField(oControl);\n\t}\n\n\tremoveAllFilterFields(): void {\n\t\tthis.aAllFilterFields = [];\n\t\tthis.aAllVisualFilters = {};\n\t\tthis.oLayout.removeAllContent();\n\t}\n\n\tgetAllButtons(): Button[] {\n\t\tconst buttonLayout = this.oLayout.getEndContent();\n\t\treturn (\n\t\t\t(buttonLayout?.[0] as OverflowToolbar | undefined)?.getContent()?.[1] as OverflowToolbar | undefined\n\t\t)?.getContent() as Button[];\n\t}\n\n\tremoveButton(oControl: Button): void {\n\t\tthis.oLayout.removeEndContent(oControl);\n\t}\n\n\tgetAllFilterFields(): FilterField[] {\n\t\treturn this.aAllFilterFields.filter((filterFieldLayout) => !filterFieldLayout.isDestroyed()) as FilterField[];\n\t}\n\n\tgetAllVisualFilterFields(): Record<string, Control> {\n\t\treturn this.aAllVisualFilters;\n\t}\n\n\tsetAllFilterFields(aFilterFields: FilterField[]): void {\n\t\tthis.aAllFilterFields = aFilterFields;\n\t}\n}\nexport default FilterContainer;\n"],"mappings":"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","ignoreList":[],"file":"FilterContainer-dbg.js"}