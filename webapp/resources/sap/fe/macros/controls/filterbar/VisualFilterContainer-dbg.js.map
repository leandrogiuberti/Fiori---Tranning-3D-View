{"version":3,"names":["VisualFilterContainer","_dec","defineUI5Class","_dec2","aggregation","type","multiple","visibility","_class","_class2","_IFilterContainer","_this","_len","arguments","length","args","Array","_key","call","_initializerDefineProperty","_descriptor","aVisualFilterFields","_inheritsLoose","_proto","prototype","init","Orientation","coreLibrabry","sOrientation","Device","system","phone","Vertical","undefined","sDirection","oHeaderContainer","HeaderContainer","orientation","oButtonFlexBox","FlexBox","alignItems","justifyContent","oLayout","direction","items","setParent","aAllFilterFields","exit","getAllFilterFields","forEach","oFilterField","destroy","insertFilterField","oControl","iIndex","oFilterItemLayoutEventDelegate","onBeforeRendering","_fnGetContentCopy","getContent","aContent","push","_oFilterField","removeEventDelegate","addEventDelegate","oVisualFilters","some","oInnerControl","sFFId","getId","isA","setContent","insertContent","removeFilterField","removeContent","removeAllFilterFields","removeAllContent","getFilterFields","addButton","addItem","getAllButtons","getItems","reverse","removeButton","removeItem","filter","filterFieldLayout","isDestroyed","setAllFilterFields","aFilterFields","enableChartBinding","enable","diffState","VisualFilterUtils","IFilterContainer","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sourceRoot":".","sources":["VisualFilterContainer.ts"],"sourcesContent":["import { aggregation, defineUI5Class } from \"sap/fe/base/ClassSupport\";\nimport type VisualFilter from \"sap/fe/macros/visualfilters/VisualFilter\";\nimport type Button from \"sap/m/Button\";\nimport FlexBox from \"sap/m/FlexBox\";\nimport HeaderContainer from \"sap/m/HeaderContainer\";\nimport Device from \"sap/ui/Device\";\nimport type Control from \"sap/ui/core/Control\";\nimport coreLibrabry from \"sap/ui/core/library\";\nimport type FilterField from \"sap/ui/mdc/FilterField\";\nimport IFilterContainer from \"sap/ui/mdc/filterbar/IFilterContainer\";\nimport type { ExternalStateType } from \"../../valuehelp/ValueHelpDelegate\";\nimport VisualFilterUtils from \"./utils/VisualFilterUtils\";\n/**\n * Constructor for a new Visual Filter Container.\n * Used for visual filters.\n *\n */\n@defineUI5Class(\"sap.fe.macros.controls.filterbar.VisualFilterContainer\")\nclass VisualFilterContainer extends IFilterContainer {\n\t@aggregation({\n\t\ttype: \"sap.ui.core.Control\",\n\t\tmultiple: false,\n\t\tvisibility: \"hidden\"\n\t})\n\t/**\n\t * Internal hidden aggregation to hold the inner layout.\n\t */\n\t_layout!: Control;\n\n\toHeaderContainer?: HeaderContainer;\n\n\toButtonFlexBox?: FlexBox;\n\n\toLayout!: FlexBox;\n\n\taAllFilterFields!: FilterField[];\n\n\taVisualFilterFields?: Record<string, VisualFilter> = {};\n\n\tinit(): void {\n\t\tsuper.init();\n\t\tconst Orientation = coreLibrabry.Orientation;\n\n\t\tconst sOrientation = Device.system.phone ? Orientation.Vertical : undefined;\n\t\tconst sDirection = Device.system.phone ? \"ColumnReverse\" : \"Column\";\n\n\t\tthis.oHeaderContainer = new HeaderContainer({\n\t\t\torientation: sOrientation\n\t\t});\n\t\tthis.oButtonFlexBox = new FlexBox({\n\t\t\talignItems: \"End\",\n\t\t\tjustifyContent: \"End\"\n\t\t});\n\n\t\tthis.oLayout = new FlexBox({\n\t\t\tdirection: sDirection, // Direction is Column Reverse for Phone\n\t\t\titems: [this.oHeaderContainer, this.oButtonFlexBox]\n\t\t});\n\t\tthis.oLayout.setParent(this);\n\n\t\tthis.aAllFilterFields = [];\n\t\tthis.aVisualFilterFields = {};\n\t}\n\n\texit(): void {\n\t\t// destroy layout\n\t\tsuper.exit();\n\t\t// destroy all filter fields which are not in the layout\n\t\tconst aAllFilterFields = this.getAllFilterFields();\n\t\taAllFilterFields.forEach(function (oFilterField: FilterField) {\n\t\t\toFilterField.destroy();\n\t\t});\n\t\tthis.oHeaderContainer = undefined;\n\t\tthis.oButtonFlexBox = undefined;\n\t\tthis.aAllFilterFields = [];\n\t}\n\n\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t// @ts-ignore\n\tinsertFilterField(\n\t\toControl: Omit<FilterField, \"getContent\"> & {\n\t\t\t_fnGetContentCopy?: Function;\n\t\t\t_oFilterField: FilterField;\n\t\t\tgetContent: () => Control[];\n\t\t},\n\t\tiIndex: number\n\t): void {\n\t\tconst oFilterItemLayoutEventDelegate = {\n\t\t\tonBeforeRendering: function (): void {\n\t\t\t\t// visual filter does not need to render a label\n\t\t\t\t// hence override the getContent of the FilterItemLayout\n\t\t\t\t// and store the original getContent for later usage in the compact filters\n\t\t\t\tif (!oControl._fnGetContentCopy) {\n\t\t\t\t\toControl._fnGetContentCopy = oControl.getContent;\n\t\t\t\t}\n\t\t\t\t// override getContent of FilterItemLayout\n\t\t\t\t// to add only filterField and not label\n\t\t\t\toControl.getContent = function (): Control[] {\n\t\t\t\t\tconst aContent = [];\n\t\t\t\t\taContent.push(oControl._oFilterField);\n\t\t\t\t\treturn aContent;\n\t\t\t\t};\n\t\t\t\toControl.removeEventDelegate(oFilterItemLayoutEventDelegate);\n\t\t\t}\n\t\t};\n\t\toControl.addEventDelegate(oFilterItemLayoutEventDelegate);\n\n\t\t// Setting VF control for the Filterfield.\n\t\tconst oVisualFilters = this.aVisualFilterFields;\n\t\toControl.getContent().some((oInnerControl: Control) => {\n\t\t\tconst sFFId = oInnerControl.getId();\n\t\t\tif (oVisualFilters && oVisualFilters[sFFId] && oInnerControl.isA<FilterField>(\"sap.ui.mdc.FilterField\")) {\n\t\t\t\toInnerControl.setContent(oVisualFilters[sFFId]);\n\t\t\t\tthis.oHeaderContainer!.insertContent(oControl, iIndex);\n\t\t\t}\n\t\t});\n\t}\n\n\tremoveFilterField(oControl: FilterField): void {\n\t\tthis.oHeaderContainer!.removeContent(oControl);\n\t}\n\n\tremoveAllFilterFields(): void {\n\t\tthis.aAllFilterFields = [];\n\t\tthis.aVisualFilterFields = {};\n\t\tthis.oHeaderContainer!.removeAllContent();\n\t}\n\n\tgetFilterFields(): FilterField[] {\n\t\treturn this.oHeaderContainer!.getContent() as FilterField[];\n\t}\n\n\taddButton(oControl: Button): void {\n\t\tthis.oButtonFlexBox!.addItem(oControl);\n\t}\n\n\tgetAllButtons(): Button[] {\n\t\treturn this.oButtonFlexBox!.getItems().reverse() as Button[];\n\t}\n\n\tremoveButton(oControl: Button): void {\n\t\tthis.oButtonFlexBox!.removeItem(oControl);\n\t}\n\n\tgetAllFilterFields(): FilterField[] {\n\t\treturn this.aAllFilterFields.filter((filterFieldLayout) => !filterFieldLayout.isDestroyed());\n\t}\n\n\tsetAllFilterFields(aFilterFields: FilterField[], aVisualFilterFields?: Record<string, VisualFilter>): void {\n\t\tthis.aAllFilterFields = aFilterFields;\n\t\tthis.aVisualFilterFields = aVisualFilterFields;\n\t}\n\n\t/**\n\t * Enables or disables the chart binding for visual filters in this container.\n\t * @param enable Whether to enable or disable the chart binding\n\t * @param diffState Optional parameter to specify the changed filter field paths, incase of enablement.\n\t */\n\tenableChartBinding(enable: boolean, diffState?: ExternalStateType): void {\n\t\tVisualFilterUtils.enableChartBinding(this.aVisualFilterFields ?? {}, enable, diffState);\n\t}\n}\n\nexport default VisualFilterContainer;\n"],"mappings":"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","ignoreList":[],"file":"VisualFilterContainer-dbg.js"}