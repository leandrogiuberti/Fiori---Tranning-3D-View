{"version":3,"file":"RadioButtons.js","names":["RadioButtons","_dec","defineUI5Class","_dec2","property","type","_dec3","_dec4","_dec5","defaultValue","_dec6","_dec7","bindToState","_dec8","isBindingInfo","_dec9","_dec10","_dec11","_dec12","_class","_class2","_BuildingBlock","properties","others","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","content","createContent","_exports","_inheritsLoose","_proto","prototype","onRadioButtonSelect","event","radioButtonGroup","getSource","selectedIndex","getParameter","undefined","selectedRadioButtonKey","getButtons","getCustomData","getValue","setProperty","CommonUtils","getTargetView","getController","_sideEffects","handleFieldChange","bindProperty","name","bindingInfo","formatter","targetType","setValue","newValue","value","radioButtons","length","radioButtonIndex","radioButton","keyCustomData","getBinding","setSelectedIndex","buttonsBindingContext","possibleValues","bindState","radioButtonTextProperty","pathInModel","radioButtonKeyProperty","path","fixedValuesPath","parameters","$count","events","dataReceived","ev","count","getCount","horizontalLayout","setColumns","getSelectedIndex","bind","_jsx","RadioButtonGroup","buttons","select","enabled","enabledExpression","fieldGroupIds","ariaLabelledBy","width","columns","children","RadioButton","text","customData","CustomData","class","tooltip","BuildingBlock","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./RadioButtons.tsx"],"sourcesContent":["import type { PrimitiveType } from \"sap/fe/base/BindingToolkit\";\nimport { pathInModel } from \"sap/fe/base/BindingToolkit\";\nimport type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { defineUI5Class, property } from \"sap/fe/base/ClassSupport\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport BuildingBlock from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport RadioButton from \"sap/m/RadioButton\";\nimport type { RadioButtonGroup$SelectEvent } from \"sap/m/RadioButtonGroup\";\nimport RadioButtonGroup from \"sap/m/RadioButtonGroup\";\nimport type Event from \"sap/ui/base/Event\";\nimport type { AggregationBindingInfo, PropertyBindingInfo } from \"sap/ui/base/ManagedObject\";\nimport type { $ControlSettings } from \"sap/ui/core/Control\";\nimport CustomData from \"sap/ui/core/CustomData\";\nimport type PropertyBinding from \"sap/ui/model/PropertyBinding\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\n\n@defineUI5Class(\"sap.fe.macros.controls.RadioButtons\")\nexport default class RadioButtons extends BuildingBlock<RadioButtonGroup, { possibleValues: { text: string; key: number }[] }> {\n\t@property({\n\t\ttype: \"string\"\n\t})\n\tpublic id!: string;\n\n\t@property({\n\t\ttype: \"string[]\"\n\t})\n\tpublic fieldGroupIds?: string[];\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\tpublic requiredExpression?: string;\n\n\t// We use type 'raw' here because otherwise the binding will refuse to update the value, as it doesn't know how to convert from any to string\n\t// Setting it to raw make sure that no conversion is attempted which then works\n\t// Default value is set to null to allow having a radio button pointing to a `null` value\n\t@property({ type: \"any\", defaultValue: null })\n\tpublic value!: string | number | boolean;\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\tpublic fixedValuesPath!: `{${string}}`;\n\n\t/**\n\t * An array of possible, fixed value list object\n\t * If this property is used, the fixedValuesPath property is ignored.\n\t */\n\t@property({\n\t\ttype: \"object\",\n\t\tbindToState: true\n\t})\n\tpublic possibleValues?: { key: PrimitiveType; text: string }[];\n\n\t@property({\n\t\ttype: \"any\",\n\t\tisBindingInfo: true\n\t})\n\tpublic radioButtonTextProperty: PropertyBindingInfo;\n\n\t@property({\n\t\ttype: \"any\",\n\t\tisBindingInfo: true\n\t})\n\tpublic radioButtonKeyProperty: PropertyBindingInfo;\n\n\t@property({\n\t\ttype: \"boolean\"\n\t})\n\tpublic horizontalLayout = false;\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\tpublic enabledExpression = \"\";\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\tpublic width = \"100%\";\n\n\tconstructor(properties: $ControlSettings & PropertiesOf<RadioButtons>, others?: $ControlSettings) {\n\t\tsuper(properties, others);\n\t\tthis.content = this.createContent();\n\t}\n\n\t/**\n\t * Event handler for the RadioButtonGroup's select event.\n\t * We need to parse from the radio button group index to the model value.\n\t * @param event\n\t */\n\tonRadioButtonSelect(event: RadioButtonGroup$SelectEvent): void {\n\t\tconst radioButtonGroup: RadioButtonGroup = event.getSource();\n\t\tconst selectedIndex = event.getParameter(\"selectedIndex\");\n\t\tif (selectedIndex !== undefined) {\n\t\t\tconst selectedRadioButtonKey: string = radioButtonGroup?.getButtons()[selectedIndex].getCustomData()[0].getValue();\n\t\t\t// Now we have the value => write it to the model!\n\t\t\tthis.setProperty(\"value\", selectedRadioButtonKey);\n\t\t\tCommonUtils.getTargetView(radioButtonGroup)?.getController()?._sideEffects?.handleFieldChange(event, true);\n\t\t}\n\t}\n\n\t/**\n\t * The value property type needs to be initially 'any' but has to be changed to 'raw' to avoid parsing errors.\n\t * @param name\n\t * @param bindingInfo\n\t * @returns This\n\t */\n\tbindProperty(name: string, bindingInfo: PropertyBindingInfo): this {\n\t\tif (name === \"value\" && !bindingInfo.formatter) {\n\t\t\t// not if a formatter is used, as this needs to be executed\n\t\t\tbindingInfo.targetType = \"raw\";\n\t\t}\n\n\t\treturn super.bindProperty(name, bindingInfo);\n\t}\n\n\t/**\n\t * This is being called when the model fetches the data from the backend or when we call it directly.\n\t * We need to parse from the model value to the radio button group index.\n\t * @param newValue\n\t */\n\tsetValue(newValue: string | number | boolean): void {\n\t\tthis.value = newValue;\n\t\tif (this.content) {\n\t\t\t// Compute the new radio button index\n\t\t\tconst radioButtons = this.content.getButtons();\n\t\t\tif (radioButtons.length != 0) {\n\t\t\t\tlet radioButtonIndex = 0;\n\t\t\t\tfor (const radioButton of radioButtons) {\n\t\t\t\t\tconst keyCustomData = (radioButton.getCustomData()[0].getBinding(\"value\") as PropertyBinding | undefined)?.getValue();\n\t\t\t\t\tif (keyCustomData === newValue) {\n\t\t\t\t\t\tthis.content.setSelectedIndex(radioButtonIndex);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tradioButtonIndex++;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// If no value could be found or if the radio button aggregation was empty, which can happen due to\n\t\t\t// a very early call of setValue, set the selected to index to -1 which results in NO radio button to be selected.\n\t\t\tthis.content.setSelectedIndex(-1);\n\t\t}\n\t}\n\n\t/**\n\t * The building block render function.\n\t * @returns The radio button group\n\t */\n\tcreateContent(): RadioButtonGroup {\n\t\t// Setting up the binding so that we can access $count for getting the number\n\t\t// of entries in the fixed value list and set this as number of radio button columns\n\t\t// in case horizontal layout is configured\n\t\tlet buttonsBindingContext: AggregationBindingInfo | undefined;\n\t\tif (this.possibleValues) {\n\t\t\tbuttonsBindingContext = this.bindState(\"possibleValues\");\n\t\t\tthis.radioButtonTextProperty = pathInModel(\"text\", \"$componentState\");\n\t\t\tthis.radioButtonKeyProperty = pathInModel(\"key\", \"$componentState\");\n\t\t} else {\n\t\t\tbuttonsBindingContext = {\n\t\t\t\tpath: `${this.fixedValuesPath}`,\n\t\t\t\tparameters: { $count: true },\n\t\t\t\tevents: {\n\t\t\t\t\tdataReceived: (ev: Event): void => {\n\t\t\t\t\t\tconst count: number | undefined = (ev.getSource() as unknown as ODataListBinding)?.getCount();\n\t\t\t\t\t\tif (count !== undefined && this.horizontalLayout) {\n\t\t\t\t\t\t\tradioButtonGroup.setColumns(count);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Check if there is a value stored from the initialization but the radio\n\t\t\t\t\t\t// button selection has not yet been done and do this now\n\t\t\t\t\t\tif (this.value !== undefined && radioButtonGroup.getSelectedIndex() === -1) {\n\t\t\t\t\t\t\tthis.setValue(this.value as string);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tthis.onRadioButtonSelect.bind(this);\n\t\tconst radioButtonGroup = (\n\t\t\t<RadioButtonGroup\n\t\t\t\tbuttons={buttonsBindingContext}\n\t\t\t\tselect={this.onRadioButtonSelect.bind(this)}\n\t\t\t\tenabled={this.enabledExpression}\n\t\t\t\tfieldGroupIds={this.fieldGroupIds}\n\t\t\t\tariaLabelledBy={this.ariaLabelledBy}\n\t\t\t\twidth={this.width}\n\t\t\t\tcolumns={this.possibleValues?.length ?? 1}\n\t\t\t>\n\t\t\t\t<RadioButton\n\t\t\t\t\ttext={this.radioButtonTextProperty}\n\t\t\t\t\tcustomData={<CustomData key={\"key\"} value={this.radioButtonKeyProperty} />}\n\t\t\t\t\tclass=\"sapUiSmallMarginEnd\"\n\t\t\t\t\ttooltip={this.radioButtonTextProperty}\n\t\t\t\t/>\n\t\t\t</RadioButtonGroup>\n\t\t) as RadioButtonGroup;\n\n\t\treturn radioButtonGroup;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}