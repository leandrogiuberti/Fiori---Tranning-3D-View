/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/util/merge","sap/fe/base/ClassSupport","sap/fe/macros/filterBar/SemanticDateOperators","sap/ui/base/ManagedObjectObserver","sap/ui/core/Control","sap/ui/mdc/condition/Condition","sap/ui/mdc/enums/ConditionValidated","sap/ui/mdc/field/ConditionsType","sap/ui/model/json/JSONModel"],function(e,t,n,i,r,o,a,l,s){"use strict";var u,c,d,p,f,h,g,b,C,_,y,m,v,w,E,M,O,F,A,I;var L={};var S=t.property;var z=t.implementInterface;var j=t.event;var P=t.defineUI5Class;var V=t.aggregation;function D(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function T(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,B(e,t)}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B(e,t)}function R(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer?(Object.defineProperty(e,t,o),null):o}function N(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let x=(u=P("sap.fe.macros.controls.CustomFilterFieldContentWrapper"),c=z("sap.ui.core.IFormContent"),d=S({type:"sap.ui.core.CSSSize",defaultValue:null}),p=S({type:"boolean",defaultValue:false}),f=S({type:"object[]",defaultValue:[]}),h=V({type:"sap.ui.core.Control",multiple:false,isDefault:true}),g=j(),b=j(),C=j(),u(_=(y=(I=function(t){function r(e,n){var i;i=t.call(this,e,n)||this;D(i,"__implements__sap_ui_core_IFormContent",m,i);D(i,"width",v,i);D(i,"formDoNotAdjustWidth",w,i);D(i,"conditions",E,i);D(i,"content",M,i);D(i,"conditionsChange",O,i);D(i,"change",F,i);D(i,"liveChange",A,i);return i}L=r;T(r,t);r.render=function e(t,n){t.openStart("div",n);t.style("min-height","1rem");t.style("width",n.width);t.openEnd();t.renderControl(n.getContent());t.close("div")};r._filterValuesToConditions=function e(t,i){let r={operators:[]},s=[];if(i){r={operators:[i]}}if(t===""){t=[]}else if(t&&typeof t==="object"&&t.hasOwnProperty("operator")&&t.hasOwnProperty("values")){r={operators:[t.operator]};t=t.values}else if(t!==undefined&&typeof t!=="object"&&typeof t!=="string"){throw new Error(`FilterUtils.js#_filterValuesToConditions: Unexpected type of input parameter vValues: ${typeof t}`)}const u=new l(r);const c=Array.isArray(t)?t:[t];if(typeof i==="string"&&n.getSemanticDateOperations().includes(i)){s=[o.createCondition(i,c,null,null,a.NotValidated)]}else{s=c.map(e=>{const t=e?.toString(),n=u.parseValue(t,"any");return n?.[0]}).filter(e=>e!==undefined)}return s};r._conditionsToFilterModelString=function e(t,n){const i=new l(n);return t.map(e=>i.formatValue([e],"any")||"").filter(e=>e!=="").join(",")};var u=r.prototype;u._handleFilterModelChange=function e(t){const n=this.getObjectBinding("filterValues").getPath(),i=t.getSource().getProperty(n);this.updateConditionsByFilterValues(i)};u._handleConditionsChange=function e(t){this.updateFilterModelByConditions(t)};u.init=function e(){t.prototype.init.call(this);this._wrapperObserver=new i(this._observeChanges.bind(this));this._wrapperObserver.observe(this,{properties:["conditions"],aggregations:["content"]});this._filterModel=new s;this._filterModel.attachPropertyChange(this._handleFilterModelChange,this);this.setModel(this._filterModel,r.FILTER_MODEL_ALIAS)};u.clone=function e(n,i){const e=t.prototype.clone.call(this,n,i);e.setModel(e._filterModel,r.FILTER_MODEL_ALIAS);return e};u._observeChanges=function e(t){const{name:n,current:i,child:r,mutation:o}=t;if(n==="conditions"){this._handleConditionsChange(i)}if(n==="content"&&r){this._handleContentChanged.call(this,o,r)}};u._handleContentChanged=function e(t,n){if(t==="insert"){this._attachContentHandlers.call(this,n)}};u._attachContentHandlers=function e(t){if(t.getMetadata().getAllEvents().change){t.attachEvent("change",this._handleContentEvent.bind(this,"change"),this)}if(t.getMetadata().getAllEvents().liveChange){t.attachEvent("liveChange",this._handleContentEvent.bind(this,"liveChange"),this)}};u._handleContentEvent=function t(n,i){const r=e({},i.getParameters());this.fireEvent(n,r)};u.getContent=function e(){return this.getAggregation("content")};u.getConditions=function e(){return this.getProperty("conditions")};u.setConditions=function e(t){this.setProperty("conditions",t||[]);return this};u.getFilterModelAlias=function e(){return r.FILTER_MODEL_ALIAS};u.updateConditionsByFilterValues=function e(t,n){const i=r._filterValuesToConditions(t,n);this.setConditions(i)};u.updateFilterModelByConditions=function e(t){const n=t[0]?.operator||"";const i=n!==""?{operators:[n]}:{operators:[]};if(this.getBindingContext(r.FILTER_MODEL_ALIAS)){const e=r._conditionsToFilterModelString(t,i);this._filterModel.setProperty(this.getBindingContext(r.FILTER_MODEL_ALIAS).getPath(),e)}};u.getAccessibilityInfo=function e(){const t=this.getContent();return t?.getAccessibilityInfo?.()||{}};u.getIdForLabel=function e(){const t=this.getContent();return t?.getIdForLabel()};return r}(r),I.FILTER_MODEL_ALIAS="filterValues",I),m=R(y.prototype,"__implements__sap_ui_core_IFormContent",[c],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),v=R(y.prototype,"width",[d],{configurable:true,enumerable:true,writable:true,initializer:null}),w=R(y.prototype,"formDoNotAdjustWidth",[p],{configurable:true,enumerable:true,writable:true,initializer:null}),E=R(y.prototype,"conditions",[f],{configurable:true,enumerable:true,writable:true,initializer:null}),M=R(y.prototype,"content",[h],{configurable:true,enumerable:true,writable:true,initializer:null}),O=R(y.prototype,"conditionsChange",[g],{configurable:true,enumerable:true,writable:true,initializer:null}),F=R(y.prototype,"change",[b],{configurable:true,enumerable:true,writable:true,initializer:null}),A=R(y.prototype,"liveChange",[C],{configurable:true,enumerable:true,writable:true,initializer:null}),y))||_);L=x;return L},false);
//# sourceMappingURL=CustomFilterFieldContentWrapper.js.map