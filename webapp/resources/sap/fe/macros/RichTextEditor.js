/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/base/BindingToolkit","sap/fe/base/ClassSupport","sap/fe/core/buildingBlocks/BuildingBlock","sap/fe/core/helpers/BindingHelper","sap/fe/macros/richtexteditor/ButtonGroup","sap/fe/macros/richtexteditor/Plugin","sap/m/FormattedText","sap/ui/richtexteditor/RichTextEditor","sap/fe/base/jsx-runtime/jsx"],function(e,t,i,r,n,o,u,a,s){"use strict";var l,p,c,d,f,b,y,h,g,m,_,v,C,w,G,T,P,x,E;var z={};var B=r.UI;var I=t.property;var O=t.defineUI5Class;var D=t.aggregation;var M=e.compileExpression;function j(e,t,i,r){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0})}function R(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,k(e,t)}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function q(e,t,i,r,n){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce(function(i,r){return r(e,t,i)||i},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer?(Object.defineProperty(e,t,o),null):o}function U(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let S=(l=O("sap.fe.macros.RichTextEditor"),p=I({type:"string",required:true}),c=I({type:"any",isBindingInfo:true}),d=I({type:"boolean"}),f=D({type:"sap.fe.macros.richtexteditor.ButtonGroup",multiple:true,defaultClass:n}),b=D({type:"sap.fe.macros.richtexteditor.Plugin",multiple:true,defaultClass:o}),y=I({type:"boolean"}),h=I({type:"any",bindable:false}),g=I({type:"boolean"}),l(m=(_=function(e){function t(t,i){var r;t._isInEditMode=M(B.IsEditable);r=e.call(this,t,i)||this;j(r,"id",v,r);j(r,"value",C,r);j(r,"readOnly",w,r);j(r,"buttonGroups",G,r);j(r,"plugins",T,r);j(r,"excludeDefaultPlugins",P,r);j(r,"required",x,r);j(r,"_isInEditMode",E,r);r.getPlugins=()=>{let e;if(r.excludeDefaultPlugins){e=[]}else{e=["emoticons","directionality","image","table","link","powerpaste"].map(e=>({name:e}))}if(r.plugins?.length){for(const t of r.plugins){e.push(t)}}return{plugins:e}};r.getButtonGroups=()=>{if(r.buttonGroups&&r.buttonGroups.length>0){return r.buttonGroups.map(e=>({name:e.name??"",visible:e.visible==="true",priority:e.priority,row:e.row,customToolbarPriority:e.customToolbarPriority,buttons:e.buttons?.split(",")||[]}))}return[]};r.getEditContent=()=>{r._cleanupPreviousRTE();r._editContent=s(a,{class:"sapUiHidden",id:r.createId("_rte"),value:r.value,visible:true,customToolbar:true,editable:true,editorType:"TinyMCE6",showGroupFontStyle:true,showGroupTextAlign:true,showGroupStructure:true,showGroupFont:false,showGroupClipboard:true,showGroupInsert:false,showGroupLink:false,showGroupUndo:false,sanitizeValue:true,wrapping:true,width:"100%",required:r.required,...r.getPlugins(),buttonGroups:r.buttonGroups.length>0?[]:undefined});r._editContent.attachReady(r.addButtonGroups,r);clearTimeout(r._buttonGroupsTimer);r._buttonGroupsTimer=setTimeout(()=>{r.createContentDebounced()},2e3);return r._editContent};return r}z=t;R(t,e);var i=t.prototype;i.onMetadataAvailable=function t(i){e.prototype.onMetadataAvailable.call(this,i)};i.createContentDebounced=function e(){if(this._contentTimer){clearTimeout(this._contentTimer)}this._contentTimer=setTimeout(()=>{this.content=this.createContent()},200)};i.exit=function e(){this._displayContent?.destroy();this._editContent?.destroy()};i.set_isInEditMode=function t(i){e.prototype.setProperty.call(this,"_isInEditMode",i);this.createContentDebounced()};i.setReadOnly=function t(i){e.prototype.setProperty.call(this,"readOnly",i);this.createContentDebounced()};i.addButtonGroups=function e(){clearTimeout(this._buttonGroupsTimer);const t=this.getButtonGroups().reverse();for(const e of t){this._editContent?.addButtonGroup(e)}this._editContent?.detachReady(this.addButtonGroups,this);this._editContent?.removeStyleClass("sapUiHidden")};i._cleanupPreviousRTE=function e(){if(this._editContent){this._editContent.destroy()}window.tinymce?.get(this.createId("_rte")+"-textarea")?.destroy()};i.getDisplayContent=function e(){if(this._displayContent){this._displayContent.destroy()}this._cleanupPreviousRTE();this._displayContent=s(u,{htmlText:this.value});return this._displayContent};i.createContent=function e(){if(this._isInEditMode&&!this.readOnly){return this.getEditContent()}else{return this.getDisplayContent()}};return t}(i),v=q(_.prototype,"id",[p],{configurable:true,enumerable:true,writable:true,initializer:null}),C=q(_.prototype,"value",[c],{configurable:true,enumerable:true,writable:true,initializer:null}),w=q(_.prototype,"readOnly",[d],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),G=q(_.prototype,"buttonGroups",[f],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),T=q(_.prototype,"plugins",[b],{configurable:true,enumerable:true,writable:true,initializer:null}),P=q(_.prototype,"excludeDefaultPlugins",[y],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),x=q(_.prototype,"required",[h],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),E=q(_.prototype,"_isInEditMode",[g],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),_))||m);z=S;return z},false);
//# sourceMappingURL=RichTextEditor.js.map