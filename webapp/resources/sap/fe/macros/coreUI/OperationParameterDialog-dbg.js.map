{"version":3,"names":["ActionParameterDialog","action","parameters","parameterValues","entitySetName","messageHandler","isDialogOpen","buttonLock","actionParameterInfos","parameterModel","JSONModel","$displayMode","actionName","actionHelper","getActionName","metaModel","model","getMetaModel","resourceModel","view","getResourceModel","appComponent","parametersValuesPromise","Promise","resolve","reject","parametersValuesResolve","parametersValuesReject","_exports","_proto","prototype","getParameterEditMode","parameter","annotations","fieldControl","Common","FieldControl","immutable","Core","Immutable","valueOf","computed","Computed","constant","FieldEditMode","ReadOnly","ifElse","isReadOnlyExpression","isDisabledExpression","Disabled","Editable","createFormElement","actionMetaPath","isBound","getMetaPath","contexts","getPath","convertTypes","namespace","name","metaContext","createBindingContext","field","label","Label","getText","toString","streamParameter","isCollection","createMultiField","type","startsWith","getStreamProperty","createFileUploader","createField","_jsxs","_Fragment","children","_jsx","id","generate","text","parameterContext","display","FieldHelper","getAPDialogDisplayFormat","getObject","context","err","Log","warning","placeHolder","UI","Placeholder","placeHolderExpression","compileExpression","getExpressionFromAnnotation","undefined","parameterType","EDM_TYPE_MAPPING","MultiValueField","placeholder","items","path","delegate","editMode","width","multipleLines","MultiLineText","required","isActionParameterRequiredExpression","valueHelp","hasValueHelp","change","e","handleFieldChange","visible","not","equal","Hidden","ariaLabelledBy","dependents","createParameterDialogValueHelp","MultiValueFieldItem","description","fileAcceptableMediaTypes","AcceptableMediaTypes","acceptedTypes","Array","from","map","join","handleTypeMissmatch","event","fileUploader","getSource","givenType","getParameter","getMimeType","showTypeMismatchDialog","fileMaximumSize","calculateMBfromByte","maxLength","handleFileSizeExceed","showFileSizeExceedDialog","getMaximumFileSize","toFixed","onUploadComplete","displayMessageForFailedUpload","FileUploader","buttonOnly","iconOnly","multiple","tooltip","icon","style","sendXHR","useMultipart","sameFilenameAllowed","uploadOnChange","mimeType","typeMissmatch","maximumFileSize","fileSizeExceed","httpRequestMethod","FileUploaderHttpRequestMethod","Put","uploadComplete","handleFileUploaderChange","additionalValue","getAdditionalValue","Field","payload","retrieveTextFromValueList","value","AnnotationHelper","format","isMultiLineText","ValueHelp","propertyPath","getTargetNavigationPath","getInvolvedDataModelObjects","substring","lastIndexOf","qualifiers","valueHelpQualifier","validateInput","requiresValidation","typeahead","Popover","MTable","caseSensitive","useCaseSensitiveFilterRequests","entityContainer","Capabilities","FilterFunctions","ModelHelper","isFilteringCaseSensitive","useAsValueHelp","ValueListWithFixedValues","dialog","createFieldVHDialog","VHDialog","fieldPromise","parameterInfo","find","actionParameterInfo","validationPromise","removeMessagesForParameter","parametersValues","hasError","error","ActionRuntime","_addMessageForActionParameter","message","files","getBase64File","getMimeTypePath","getFileNamePath","ContentDisposition","Filename","MediaType","typeReference","properties","property","reader","FileReader","onload","result","split","readAsDataURL","item","messages","Messaging","getMessageModel","getData","controlId","relevantMessages","filter","msg","getControlIds","some","includes","removeMessages","getFormElements","formElements","getDialog","createDialog","dialogContents","dialogContentsWithParameters","actionParameters","slice","OperationParameterFacets","actionParameterGroups","forEach","facet","facetTitle","$Type","hasFieldGroupTarget","fieldGroup","Target","$target","groupedActionParameters","Data","group","push","Value","data","getGroupForm","all","bind","formData","parameterGroup","opFacets","dialogContent","Title","element","opFacet","registerActionParameterInfo","messageStrip","getCustomActionMessageStripText","endButton","Button","press","onCancel","Dialog","title","getTitleText","escapeHandler","draggable","resizable","afterClose","beforeOpen","afterOpen","initialFocus","beginButton","isCreateAction","getBeginButtonLabel","onApply","content","MessageStrip","showIcon","SimpleForm","columnsM","editable","labelSpanL","labelSpanM","binding","actionLabel","key","defaultKey","getOverriddenText","boundActionName","pop","suffixResourceKey","checkIfResourceKeyExists","getObjectBinding","getParameterContext","BusyLocker","lock","validateProperties","unlock","newValuesDictionary","Object","assign","values","getModel","getProperty","paramValue","Key","isNewValue","setProperty","UiModelConstants","DocumentModified","removeTransitionMessages","resetState","unlockDialog","updateDialogBindingContextForError","length","warningContext","infoContext","erroneousCtx","getMessages","getType","MessageType","Warning","Information","Error","contextToUse","setBindingContext","isLocked","FELibrary","Constants","CancelActionDialog","closeDialog","events","onParameterDialogClosed","close","openDialog","CommonUtils","setUserDefaults","setModels","addDependent","setOperationDefaultValues","open","setModel","bindElement","_event","waitForParametersValues","isOpen","getParameterDefaultValue","bindingParameter","operationBinding","parameterModelData","paramName","defaultValue","ParameterDefaultValue","isPathAnnotationExpression","pathForContext","replace","requestSingletonProperty","requestProperty","noPossibleValue","latePropertyError","getManifestFunctionValues","bindingContext","getBindingContext","defaultValuesExtensionFunction","FPMHelper","loadModuleAndCallMethod","getPreDefinedValues","boundFunctionName","DefaultValuesFunction","requestContextObject","functionParams","boundFunction","Operation","getOperationFromName","ODataOperation","enhance$select","groupId","execute","isFulfilled","boundContext","requestObject","contextValues","promises","defaultValues","functionValues","manifestFunctionValues","firstVisibleParameter","getVisible","firstField","focusInfo","getFocusInfo","targetInfo","silent","focus","onParameterDialogOpened","isMultiValue","setParameter","i","parameterName","parameterProvidedValue","hasOwnProperty","setOfFunctionValues","Set","index","size","next","refresh","MessageBox","actions","Action","OK","emphasizedAction","onClose","extensionAPI","getController","getExtensionAPI","contentWidth","functionContext","getBinding","isA","destroy","oInterface","textContext","contextPath","localDataProperty","$Name","valueListByQualifier","requestValueListInfo","valueListParameter","Parameters","LocalDataProperty","$PropertyPath","ValueListProperty","textProperty","CollectionPath","propAnnotations","textProp","textPath","$Path"],"sourceRoot":".","sources":["OperationParameterDialog.tsx"],"sourcesContent":["import type { ComplexType, PathAnnotationExpression, PrimitiveType, Property, PropertyAnnotationValue } from \"@sap-ux/vocabularies-types\";\nimport { type Action, type ActionParameter } from \"@sap-ux/vocabularies-types\";\nimport { type PropertyAnnotations_Core } from \"@sap-ux/vocabularies-types/vocabularies/Core_Edm\";\nimport type { DataField, FieldGroupType, ReferenceFacet } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { UIAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport type { PathInModelExpression } from \"sap/fe/base/BindingToolkit\";\nimport {\n\tEDM_TYPE_MAPPING,\n\tcompileExpression,\n\tconstant,\n\tequal,\n\tgetExpressionFromAnnotation,\n\tifElse,\n\tnot,\n\ttype BindingToolkitExpression\n} from \"sap/fe/base/BindingToolkit\";\nimport type { ActionParameterInfo } from \"sap/fe/core/ActionRuntime\";\nimport ActionRuntime from \"sap/fe/core/ActionRuntime\";\nimport type AppComponent from \"sap/fe/core/AppComponent\";\nimport type { FEView } from \"sap/fe/core/BaseController\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type ResourceModel from \"sap/fe/core/ResourceModel\";\nimport BusyLocker from \"sap/fe/core/controllerextensions/BusyLocker\";\nimport type MessageHandler from \"sap/fe/core/controllerextensions/MessageHandler\";\nimport UiModelConstants from \"sap/fe/core/controllerextensions/editFlow/editFlowConstants\";\nimport ODataOperation from \"sap/fe/core/controllerextensions/editFlow/operations/ODataOperation\";\nimport Operation from \"sap/fe/core/controllerextensions/editFlow/operations/Operation\";\nimport actionHelper from \"sap/fe/core/controllerextensions/editFlow/operations/actionHelper\";\nimport { convertTypes, getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { hasFieldGroupTarget } from \"sap/fe/core/converters/annotations/DataField\";\nimport FPMHelper from \"sap/fe/core/helpers/FPMHelper\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { getResourceModel } from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { isFulfilled, isPathAnnotationExpression } from \"sap/fe/core/helpers/TypeGuards\";\nimport FELibrary from \"sap/fe/core/library\";\nimport { getTargetNavigationPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { isActionParameterRequiredExpression, isDisabledExpression, isReadOnlyExpression } from \"sap/fe/core/templating/FieldControlHelper\";\nimport { hasValueHelp, isMultiLineText } from \"sap/fe/core/templating/PropertyHelper\";\nimport type { ComputedAnnotationInterface } from \"sap/fe/core/templating/UIFormatters\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport { requiresValidation, useCaseSensitiveFilterRequests } from \"sap/fe/macros/internal/valuehelp/ValueHelpTemplating\";\nimport type { AnnotationValueListParameter } from \"sap/fe/macros/internal/valuehelp/ValueListHelper\";\nimport type ListReportExtensionAPI from \"sap/fe/templates/ListReport/ExtensionAPI\";\nimport type ObjectPageExtensionAPI from \"sap/fe/templates/ObjectPage/ExtensionAPI\";\nimport Button from \"sap/m/Button\";\nimport type { Dialog$BeforeOpenEvent } from \"sap/m/Dialog\";\nimport Dialog from \"sap/m/Dialog\";\nimport Label from \"sap/m/Label\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport MessageStrip from \"sap/m/MessageStrip\";\nimport Messaging from \"sap/ui/core/Messaging\";\nimport Title from \"sap/ui/core/Title\";\nimport type Message from \"sap/ui/core/message/Message\";\nimport MessageType from \"sap/ui/core/message/MessageType\";\nimport SimpleForm from \"sap/ui/layout/form/SimpleForm\";\nimport type { Field$ChangeEvent } from \"sap/ui/mdc/Field\";\nimport Field from \"sap/ui/mdc/Field\";\nimport type { MultiValueField$ChangeEvent } from \"sap/ui/mdc/MultiValueField\";\nimport MultiValueField from \"sap/ui/mdc/MultiValueField\";\nimport ValueHelp from \"sap/ui/mdc/ValueHelp\";\nimport FieldEditMode from \"sap/ui/mdc/enums/FieldEditMode\";\nimport MultiValueFieldItem from \"sap/ui/mdc/field/MultiValueFieldItem\";\nimport VHDialog from \"sap/ui/mdc/valuehelp/Dialog\";\nimport Popover from \"sap/ui/mdc/valuehelp/Popover\";\nimport MTable from \"sap/ui/mdc/valuehelp/content/MTable\";\nimport type Context from \"sap/ui/model/Context\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport AnnotationHelper from \"sap/ui/model/odata/v4/AnnotationHelper\";\nimport type { default as ODataV4Context } from \"sap/ui/model/odata/v4/Context\";\nimport type ODataContextBinding from \"sap/ui/model/odata/v4/ODataContextBinding\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport type {\n\tFileUploader$ChangeEvent,\n\tFileUploader$FileSizeExceedEvent,\n\tFileUploader$TypeMissmatchEvent,\n\tFileUploader$UploadCompleteEvent\n} from \"sap/ui/unified/FileUploader\";\nimport FileUploader from \"sap/ui/unified/FileUploader\";\nimport FileUploaderHttpRequestMethod from \"sap/ui/unified/FileUploaderHttpRequestMethod\";\nimport { displayMessageForFailedUpload, showFileSizeExceedDialog, showTypeMismatchDialog } from \"../internal/helpers/Upload\";\n\ntype ParameterDefaultValue = { paramName: string; value: unknown; latePropertyError?: boolean; noPossibleValue?: boolean };\n\ntype ElementGroup = { facetTitle: PropertyAnnotationValue<string> | undefined; data: ActionParameter[] };\ntype ElementGroupConverted = { facetTitle: PropertyAnnotationValue<string> | undefined; data: DialogContentTypes[] };\n\ntype FormElementType = [Label, Field | MultiValueField];\n\ntype DialogContentTypes = {\n\tformElements: FormElementType;\n\tparameter: ActionParameter;\n};\nexport default class ActionParameterDialog {\n\tprivate parametersValuesPromise: Promise<Record<string, PrimitiveType>>;\n\n\tprivate parametersValuesResolve!: (resolveValue: Record<string, PrimitiveType>) => void;\n\n\tprivate parametersValuesReject!: (error: unknown) => void;\n\n\t// the dialog is considered as closed after the afterClose event has been triggered\n\t// this is asynchronous, so we need to keep track of the dialog state since the message handling is synchronous\n\t// and we need to know if the dialog is open or closed\n\tprivate isDialogOpen = false;\n\n\tprivate dialog: Dialog | undefined;\n\n\tprivate readonly actionName: string;\n\n\tprivate buttonLock = false;\n\n\tprivate readonly metaModel: ODataMetaModel;\n\n\tprivate readonly actionParameterInfos: (ActionParameterInfo & { parameter: ActionParameter })[] = [];\n\n\tprivate readonly parameterModel: JSONModel = new JSONModel({\n\t\t$displayMode: {}\n\t});\n\n\tprivate readonly resourceModel: ResourceModel;\n\n\tconstructor(\n\t\tprivate readonly action: Action,\n\t\tprivate readonly parameters: {\n\t\t\tappComponent: AppComponent;\n\t\t\tcontexts: ODataV4Context[];\n\t\t\tparametersValues: Record<string, PrimitiveType>;\n\t\t\tdefaultValuesExtensionFunction?: string;\n\t\t\tisCreateAction?: boolean;\n\t\t\tlabel?: string;\n\t\t\tmodel: ODataModel;\n\t\t\tview?: FEView;\n\t\t\tevents?: {\n\t\t\t\tonParameterDialogOpened?: () => void;\n\t\t\t\tonParameterDialogClosed?: () => void;\n\t\t\t};\n\t\t},\n\t\tprivate readonly parameterValues: Record<string, unknown>[] | undefined,\n\t\tprivate readonly entitySetName: string | undefined,\n\t\tprivate readonly messageHandler: MessageHandler\n\t) {\n\t\tthis.actionName = actionHelper.getActionName(this.action);\n\t\tthis.metaModel = this.parameters.model.getMetaModel();\n\t\tthis.resourceModel = this.parameters.view ? getResourceModel(this.parameters.view) : getResourceModel(this.parameters.appComponent);\n\t\tthis.parametersValuesPromise = new Promise((resolve, reject) => {\n\t\t\tthis.parametersValuesResolve = resolve;\n\t\t\tthis.parametersValuesReject = reject;\n\t\t});\n\t}\n\n\t/**\n\t * Gets binding expression of the edit mode property for a parameter.\n\t * @param parameter The parameter\n\t * @returns The binding expression.\n\t */\n\tprivate getParameterEditMode(parameter: ActionParameter): BindingToolkitExpression<FieldEditMode> {\n\t\tconst annotations = parameter.annotations,\n\t\t\tfieldControl = annotations.Common?.FieldControl,\n\t\t\timmutable = (annotations.Core as unknown as PropertyAnnotations_Core)?.Immutable?.valueOf(),\n\t\t\tcomputed = (annotations.Core as unknown as PropertyAnnotations_Core)?.Computed?.valueOf();\n\n\t\tif (immutable || computed) {\n\t\t\treturn constant(FieldEditMode.ReadOnly);\n\t\t} else if (fieldControl) {\n\t\t\treturn ifElse(\n\t\t\t\tisReadOnlyExpression(parameter),\n\t\t\t\tFieldEditMode.ReadOnly,\n\t\t\t\tifElse(isDisabledExpression(parameter), FieldEditMode.Disabled, FieldEditMode.Editable)\n\t\t\t);\n\t\t}\n\t\treturn constant(FieldEditMode.Editable);\n\t}\n\n\t/**\n\t * Creates the form element control for a parameter.\n\t * @param parameter The parameter\n\t * @returns The form element control.\n\t */\n\tprivate async createFormElement(parameter: ActionParameter): Promise<FormElementType> {\n\t\tconst actionMetaPath = this.action.isBound\n\t\t\t? `${this.metaModel.getMetaPath(this.parameters.contexts[0].getPath())}/${convertTypes(this.metaModel).namespace}.${\n\t\t\t\t\tthis.action.name\n\t\t\t  }`\n\t\t\t: `/${this.action.name}`;\n\t\tconst metaContext = this.metaModel.createBindingContext(`${actionMetaPath}/${parameter.name}`)!;\n\t\tlet field;\n\t\tlet label = parameter.annotations.Common?.Label\n\t\t\t? this.resourceModel.getText(parameter.annotations.Common.Label.toString())\n\t\t\t: parameter.name;\n\t\tlet streamParameter;\n\t\tif (parameter.isCollection) {\n\t\t\tfield = await this.createMultiField(parameter, metaContext);\n\t\t} else if (!parameter.type.startsWith(\"Edm.\") && this.getStreamProperty(parameter)) {\n\t\t\tstreamParameter = this.getStreamProperty(parameter);\n\t\t\t// calculate label from the stream property within the ComplexType\n\t\t\tlabel = streamParameter?.annotations.Common?.Label\n\t\t\t\t? this.resourceModel.getText(streamParameter.annotations.Common.Label.toString())\n\t\t\t\t: (streamParameter?.name as string);\n\t\t\tfield = this.createFileUploader(parameter);\n\t\t} else {\n\t\t\tfield = await this.createField(parameter, metaContext);\n\t\t}\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Label id={generate([\"APD_\", parameter.name, streamParameter?.name, \"Label\"])} text={label} />\n\t\t\t\t{field}\n\t\t\t</>\n\t\t);\n\t}\n\n\t/**\n\t * Creates the multi field control for a parameter.\n\t * @param parameter The parameter\n\t * @param parameterContext The parameter context\n\t * @returns The multi value field control.\n\t */\n\tprivate async createMultiField(parameter: ActionParameter, parameterContext: Context): Promise<MultiValueField> {\n\t\tlet display = \"Value\";\n\t\ttry {\n\t\t\tdisplay = await FieldHelper.getAPDialogDisplayFormat(parameterContext.getObject(), { context: parameterContext });\n\t\t} catch (err: unknown) {\n\t\t\tLog.warning(`Parameter dialog multifield: display format couldn't be calculated for parameter '${parameter.name}': ${err}`);\n\t\t}\n\t\tconst placeHolder = parameter.annotations.UI?.Placeholder as PropertyAnnotationValue<PrimitiveType> | undefined;\n\t\tconst placeHolderExpression = placeHolder ? compileExpression(getExpressionFromAnnotation(placeHolder)) : undefined;\n\t\tconst parameterType = EDM_TYPE_MAPPING?.[parameter.type]?.type;\n\t\treturn (\n\t\t\t<MultiValueField\n\t\t\t\tid={generate([\"APD_\", parameter.name])}\n\t\t\t\tplaceholder={placeHolderExpression}\n\t\t\t\titems={{ path: `mvfview>/${parameter.name}` }}\n\t\t\t\tdelegate={{ name: \"sap/fe/core/controls/MultiValueParameterDelegate\" }}\n\t\t\t\tdisplay={display}\n\t\t\t\teditMode={this.getParameterEditMode(parameter)}\n\t\t\t\twidth=\"100%\"\n\t\t\t\tmultipleLines={parameter.annotations.UI?.MultiLineText?.valueOf() === true}\n\t\t\t\trequired={compileExpression(isActionParameterRequiredExpression(parameter, this.action, convertTypes(this.metaModel)))}\n\t\t\t\tvalueHelp={hasValueHelp(parameter) ? generate([this.actionName, parameter.name]) : undefined}\n\t\t\t\tchange={async (e): Promise<void> => this.handleFieldChange(e, parameter)}\n\t\t\t\tvisible={compileExpression(not(equal(getExpressionFromAnnotation(parameter.annotations?.UI?.Hidden), true)))}\n\t\t\t\tariaLabelledBy={[generate([\"APD_\", parameter.name, \"Label\"])]}\n\t\t\t\tdependents={this.createParameterDialogValueHelp(parameter, parameterContext)}\n\t\t\t>\n\t\t\t\t<MultiValueFieldItem key={`{path: 'mvfview>Key', type:'${parameterType}'}`} description=\"{mvfview>Desc}\" />\n\t\t\t</MultiValueField>\n\t\t);\n\t}\n\n\t/**\n\t * Creates the FileUploader control for a parameter.\n\t * @param parameter The parameter\n\t * @returns The FileUploader control.\n\t */\n\tprivate createFileUploader(parameter: ActionParameter): FileUploader {\n\t\tlet fileAcceptableMediaTypes;\n\t\tif (this.getStreamProperty(parameter)?.annotations.Core?.AcceptableMediaTypes) {\n\t\t\tconst acceptedTypes = Array.from(\n\t\t\t\tthis.getStreamProperty(parameter)?.annotations.Core?.AcceptableMediaTypes as unknown as string[]\n\t\t\t).map((type) => `'${type}'`);\n\t\t\tfileAcceptableMediaTypes = `{=odata.collection([${acceptedTypes.join(\",\")}])}`;\n\t\t}\n\t\tconst handleTypeMissmatch = function (event: FileUploader$TypeMissmatchEvent): void {\n\t\t\tconst fileUploader = event.getSource();\n\t\t\tconst givenType = event.getParameter(\"mimeType\");\n\t\t\tconst acceptedTypes = fileUploader.getMimeType();\n\t\t\tif (givenType) {\n\t\t\t\tshowTypeMismatchDialog(fileUploader, givenType, acceptedTypes);\n\t\t\t}\n\t\t};\n\t\t// verify check for stream\n\t\tconst fileMaximumSize = FieldHelper.calculateMBfromByte(this.getStreamProperty(parameter)?.maxLength);\n\t\tconst handleFileSizeExceed = function (event: FileUploader$FileSizeExceedEvent): void {\n\t\t\tconst fileUploader = event?.getSource();\n\t\t\tshowFileSizeExceedDialog(fileUploader, fileUploader.getMaximumFileSize().toFixed(3));\n\t\t};\n\t\tconst onUploadComplete = function (event: FileUploader$UploadCompleteEvent): void {\n\t\t\tif (event.getParameter(\"status\") === 0 || (event.getParameter(\"status\") as number) >= 400) {\n\t\t\t\tdisplayMessageForFailedUpload(\n\t\t\t\t\tevent.getSource(),\n\t\t\t\t\t(event.getParameter(\"responseRaw\") as string) || (event.getParameter(\"response\") as string)\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\t\treturn (\n\t\t\t<FileUploader\n\t\t\t\tname=\"FEV4FileUpload\"\n\t\t\t\tbuttonOnly=\"false\"\n\t\t\t\ticonOnly=\"true\"\n\t\t\t\tmultiple=\"false\"\n\t\t\t\ttooltip=\"{sap.fe.i18n>M_FIELD_FILEUPLOADER_UPLOAD_BUTTON_TOOLTIP}\"\n\t\t\t\ticon=\"sap-icon://upload\"\n\t\t\t\tstyle=\"Transparent\"\n\t\t\t\tsendXHR=\"true\"\n\t\t\t\tuseMultipart=\"false\"\n\t\t\t\tsameFilenameAllowed=\"true\"\n\t\t\t\tuploadOnChange=\"false\"\n\t\t\t\tmimeType={fileAcceptableMediaTypes}\n\t\t\t\ttypeMissmatch={handleTypeMissmatch}\n\t\t\t\tmaximumFileSize={fileMaximumSize}\n\t\t\t\tfileSizeExceed={handleFileSizeExceed}\n\t\t\t\thttpRequestMethod={FileUploaderHttpRequestMethod.Put}\n\t\t\t\tuploadComplete={onUploadComplete}\n\t\t\t\tchange={async (e): Promise<void> => this.handleFileUploaderChange(e, parameter)}\n\t\t\t/>\n\t\t);\n\t}\n\n\t/**\n\t * Creates the field control for a parameter.\n\t * @param parameter The parameter\n\t * @param parameterContext The parameter context\n\t * @returns The field control.\n\t */\n\tprivate async createField(parameter: ActionParameter, parameterContext: Context): Promise<Field> {\n\t\tlet display = \"Value\";\n\t\tlet additionalValue;\n\t\ttry {\n\t\t\tdisplay = await FieldHelper.getAPDialogDisplayFormat(parameterContext.getObject(), { context: parameterContext });\n\t\t\tif (hasValueHelp(parameter)) {\n\t\t\t\tadditionalValue = await this.getAdditionalValue({ context: parameterContext });\n\t\t\t}\n\t\t} catch (err: unknown) {\n\t\t\tLog.warning(`Parameter dialog field: display format couldn't be calculated for parameter '${parameter.name}': ${err}`);\n\t\t}\n\t\tconst placeHolder = parameter.annotations.UI?.Placeholder as PropertyAnnotationValue<PrimitiveType> | undefined;\n\t\tconst placeHolderExpression = placeHolder ? compileExpression(getExpressionFromAnnotation(placeHolder)) : undefined;\n\t\treturn (\n\t\t\t<Field\n\t\t\t\tdelegate={{ name: \"sap/fe/macros/field/FieldBaseDelegate\", payload: { retrieveTextFromValueList: true } }}\n\t\t\t\tid={generate([\"APD_\", parameter.name])}\n\t\t\t\tvalue={AnnotationHelper.format(parameterContext.getObject(), { context: parameterContext })}\n\t\t\t\tplaceholder={placeHolderExpression}\n\t\t\t\tdisplay={display}\n\t\t\t\teditMode={this.getParameterEditMode(parameter)}\n\t\t\t\twidth=\"100%\"\n\t\t\t\tmultipleLines={isMultiLineText(parameter)}\n\t\t\t\trequired={compileExpression(isActionParameterRequiredExpression(parameter, this.action, convertTypes(this.metaModel)))}\n\t\t\t\tchange={async (e): Promise<void> => this.handleFieldChange(e, parameter)}\n\t\t\t\tvalueHelp={hasValueHelp(parameter) ? generate([this.actionName, parameter.name]) : undefined}\n\t\t\t\tdependents={this.createParameterDialogValueHelp(parameter, parameterContext)}\n\t\t\t\tvisible={compileExpression(\n\t\t\t\t\tifElse(\n\t\t\t\t\t\tparameter.name === \"ResultIsActiveEntity\",\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tnot(equal(getExpressionFromAnnotation(parameter.annotations?.UI?.Hidden), true))\n\t\t\t\t\t)\n\t\t\t\t)}\n\t\t\t\tariaLabelledBy={[generate([\"APD_\", parameter.name, \"Label\"])]}\n\t\t\t\tadditionalValue={additionalValue}\n\t\t\t/>\n\t\t);\n\t}\n\n\t/**\n\t * Creates the valueHelp  for a parameter.\n\t * @param parameter The parameter\n\t * @param parameterContext The parameter context\n\t * @returns A valueHelp if the parameter has a VH, undefined otherwise\n\t */\n\tprivate createParameterDialogValueHelp(parameter: ActionParameter, parameterContext: Context): ValueHelp | undefined {\n\t\tif (!hasValueHelp(parameter)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn (\n\t\t\t<ValueHelp\n\t\t\t\tid={generate([this.actionName, parameter.name])}\n\t\t\t\tdelegate={{\n\t\t\t\t\tname: \"sap/fe/macros/valuehelp/ValueHelpDelegate\",\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tpropertyPath: this.action.isBound\n\t\t\t\t\t\t\t? `${getTargetNavigationPath(getInvolvedDataModelObjects<ActionParameter>(parameterContext))}/${\n\t\t\t\t\t\t\t\t\tthis.actionName\n\t\t\t\t\t\t\t  }/${parameter.name}`\n\t\t\t\t\t\t\t: `/${this.action.name.substring(this.action.name.lastIndexOf(\".\") + 1)}/${parameter.name}`,\n\t\t\t\t\t\tqualifiers: {},\n\t\t\t\t\t\tvalueHelpQualifier: \"\"\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tvalidateInput={requiresValidation(parameter)}\n\t\t\t\ttypeahead={\n\t\t\t\t\t<Popover>\n\t\t\t\t\t\t<MTable\n\t\t\t\t\t\t\tid={generate([this.actionName, parameter.name, \"Popover\", \"qualifier\"])}\n\t\t\t\t\t\t\tcaseSensitive={\n\t\t\t\t\t\t\t\tthis.action.isBound\n\t\t\t\t\t\t\t\t\t? useCaseSensitiveFilterRequests(\n\t\t\t\t\t\t\t\t\t\t\tgetInvolvedDataModelObjects<ActionParameter>(parameterContext),\n\t\t\t\t\t\t\t\t\t\t\t(convertTypes(this.metaModel).entityContainer.annotations.Capabilities\n\t\t\t\t\t\t\t\t\t\t\t\t?.FilterFunctions as unknown as string[]) ?? []\n\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t: ModelHelper.isFilteringCaseSensitive(this.metaModel)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tuseAsValueHelp={!!parameter.annotations.Common?.ValueListWithFixedValues}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Popover>\n\t\t\t\t}\n\t\t\t\tdialog={this.createFieldVHDialog(parameter)}\n\t\t\t></ValueHelp>\n\t\t);\n\t}\n\n\t/**\n\t * Creates the ValueHelp dialog for a parameter.\n\t * @param parameter The parameter\n\t * @returns A dialog if the parameter has a VH, undefined otherwise\n\t */\n\tprivate createFieldVHDialog(parameter: ActionParameter): VHDialog | undefined {\n\t\tif (parameter.annotations.Common?.ValueListWithFixedValues?.valueOf() !== true) {\n\t\t\treturn <VHDialog />;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\t/**\n\t * Handles the field change event for a parameter.\n\t * @param event The ui5 event\n\t * @param parameter The parameter\n\t * @returns Promise.\n\t */\n\tprivate async handleFieldChange(event: MultiValueField$ChangeEvent | Field$ChangeEvent, parameter: ActionParameter): Promise<void> {\n\t\tconst fieldPromise = (event as Field$ChangeEvent).getParameter(\"promise\");\n\t\tconst field = (event as Field$ChangeEvent).getSource() as Field | MultiValueField;\n\t\tconst parameterInfo = this.actionParameterInfos.find((actionParameterInfo) => actionParameterInfo.field === field);\n\t\tif (!parameterInfo) {\n\t\t\treturn;\n\t\t}\n\t\tparameterInfo.validationPromise = fieldPromise;\n\t\t// field value is being changed, thus existing messages related to that field are not valid anymore\n\t\tthis.removeMessagesForParameter(parameter);\n\t\ttry {\n\t\t\tparameterInfo.value = await fieldPromise;\n\t\t\tthis.parameters.parametersValues[parameterInfo.parameter.name] = parameterInfo.value;\n\t\t\tparameterInfo.hasError = false;\n\t\t} catch (error) {\n\t\t\tdelete parameterInfo.value;\n\t\t\tparameterInfo.hasError = true;\n\t\t\tActionRuntime._addMessageForActionParameter([\n\t\t\t\t{\n\t\t\t\t\tactionParameterInfo: parameterInfo,\n\t\t\t\t\tmessage: (error as { message: string }).message\n\t\t\t\t}\n\t\t\t]);\n\t\t}\n\t}\n\n\t/**\n\t * Handles the FileUploader change event for a parameter.\n\t * @param event The SAPUI5 event corresponding to the FileUploader change event.\n\t * @param parameter The action parameter.\n\t * @returns Promise.\n\t */\n\tprivate async handleFileUploaderChange(event: FileUploader$ChangeEvent, parameter: ActionParameter): Promise<void> {\n\t\tconst files = event.getParameter(\"files\");\n\t\tconst fileUploader = event.getSource();\n\t\t// correction needed for multiple file uploaders\n\t\tconst parameterInfo = this.actionParameterInfos.find((actionParameterInfo) => actionParameterInfo.field === fileUploader);\n\t\tif (!parameterInfo || !files) {\n\t\t\treturn;\n\t\t}\n\t\tthis.removeMessagesForParameter(parameter);\n\t\tparameterInfo.value = {};\n\t\tif (this.getStreamProperty(parameter)) {\n\t\t\tparameterInfo.value[this.getStreamProperty(parameter)?.name as keyof typeof parameterInfo.value] =\n\t\t\t\tawait this.getBase64File(files);\n\t\t\tparameterInfo.value[(this.getMimeTypePath(parameter) as PathInModelExpression<string>).path] =\n\t\t\t\t(files[0] as File).type || \"application/octet-stream\";\n\t\t\tparameterInfo.value[this.getFileNamePath(parameter) as string] = (files[0] as File).name;\n\t\t\tparameterInfo.hasError = false;\n\t\t\tthis.parameters.parametersValues[parameterInfo.parameter.name] = parameterInfo.value;\n\t\t}\n\t}\n\n\t/**\n\t * Provides the property name for the file name associated with the Stream property in the action parameter.\n\t * @param parameter The action parameter.\n\t * @returns Path as a string.\n\t */\n\tprivate getFileNamePath(parameter: ActionParameter): string | undefined {\n\t\treturn (this.getStreamProperty(parameter)?.annotations.Core?.ContentDisposition?.Filename as PathAnnotationExpression<string>).path;\n\t}\n\n\t/**\n\t * Provides the property name for the Mime type with the associated Stream property in the action parameter.\n\t * @param parameter The action parameter.\n\t * @returns The path expression.\n\t */\n\tprivate getMimeTypePath(parameter: ActionParameter): BindingToolkitExpression<string> | undefined {\n\t\treturn getExpressionFromAnnotation(this.getStreamProperty(parameter)?.annotations.Core?.MediaType);\n\t}\n\n\t/**\n\t * Provides the Stream property associated with the Complex type action parameter.\n\t * @param parameter The action parameter.\n\t * @returns The Edm.Stream property.\n\t */\n\tprivate getStreamProperty(parameter: ActionParameter): Property | undefined {\n\t\treturn (parameter.typeReference as ComplexType).properties?.find((property) => property.type === \"Edm.Stream\");\n\t}\n\n\t/**\n\t * Provides the content of the file.\n\t * @param files The file selected.\n\t * @returns The file content.\n\t */\n\tprivate async getBase64File(files: object[]): Promise<string> {\n\t\treturn new Promise((resolve) => {\n\t\t\tconst reader = new FileReader();\n\t\t\treader.onload = (): void => {\n\t\t\t\tif (!reader.result) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tresolve((reader.result as string).split(\",\")[1]);\n\t\t\t};\n\t\t\treader.readAsDataURL((files as unknown as FileList).item(0)!);\n\t\t});\n\t}\n\n\t/**\n\t * Removes the messages for a parameter.\n\t * @param parameter The parameter\n\t */\n\tprivate removeMessagesForParameter(parameter: ActionParameter): void {\n\t\tconst messages = Messaging.getMessageModel().getData();\n\t\tconst controlId = generate([\"APD_\", parameter.name]);\n\t\t// also remove messages assigned to inner controls, but avoid removing messages for different parameters (with name being substring of another parameter name)\n\t\tconst relevantMessages = messages.filter((msg: Message) =>\n\t\t\tmsg.getControlIds().some((id: string) => controlId.split(\"-\").includes(id))\n\t\t);\n\t\tMessaging.removeMessages(relevantMessages);\n\t}\n\n\t/**\n\t * Gets the FormElements along with the array of parameters.\n\t * @param parameter The parameter\n\t * @returns The parameter information along with the FormElements.\n\t */\n\tprivate async getFormElements(parameter: ActionParameter): Promise<DialogContentTypes> {\n\t\tconst formElements = await this.createFormElement(parameter);\n\t\treturn {\n\t\t\tformElements: formElements,\n\t\t\tparameter: parameter\n\t\t};\n\t}\n\n\t/**\n\t * Gets the action parameter dialog.\n\t * @returns The dialog or undefined.\n\t */\n\tgetDialog(): Dialog | undefined {\n\t\treturn this.dialog;\n\t}\n\n\t/**\n\t * Creates the action parameter dialog.\n\t * @returns The dialog.\n\t */\n\tasync createDialog(): Promise<Dialog> {\n\t\tlet dialogContents: FormElementType[] = [];\n\t\tlet dialogContentsWithParameters: DialogContentTypes[] = [];\n\t\tconst actionParameters = this.action.isBound ? this.action.parameters.slice(1) : this.action.parameters;\n\n\t\t// If OperationalParameterFacets have been defined for this action, they are used to group the action parameters\n\t\t// with titles\n\t\tif (this.action.annotations?.UI?.OperationParameterFacets) {\n\t\t\tconst actionParameterGroups: ElementGroup[] = [];\n\t\t\tthis.action.annotations.UI?.OperationParameterFacets?.forEach(function (facet: ReferenceFacet) {\n\t\t\t\tlet facetTitle;\n\t\t\t\tif (facet.$Type === UIAnnotationTypes.ReferenceFacet) {\n\t\t\t\t\tfacetTitle = facet.Label;\n\t\t\t\t}\n\t\t\t\tif (hasFieldGroupTarget(facet)) {\n\t\t\t\t\tconst fieldGroup = facet?.Target?.$target as FieldGroupType;\n\t\t\t\t\tconst groupedActionParameters: ActionParameter[] = [];\n\n\t\t\t\t\tfieldGroup.Data.forEach(function (group: unknown) {\n\t\t\t\t\t\tgroupedActionParameters.push((group as DataField).Value.$target as ActionParameter);\n\t\t\t\t\t});\n\t\t\t\t\tactionParameterGroups.push({\n\t\t\t\t\t\tfacetTitle: facetTitle as PropertyAnnotationValue<string> | undefined,\n\t\t\t\t\t\tdata: groupedActionParameters\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Get the fields for each parameter group\n\t\t\tconst getGroupForm = async (group: ElementGroup): Promise<ElementGroupConverted> => {\n\t\t\t\tconst formElements = await Promise.all(group.data.map(this.getFormElements.bind(this)));\n\t\t\t\treturn { facetTitle: group.facetTitle, data: formElements };\n\t\t\t};\n\n\t\t\tconst formData = actionParameterGroups.map(async (parameterGroup) => getGroupForm(parameterGroup));\n\t\t\tconst opFacets = await Promise.all(formData);\n\n\t\t\t// Add the title control to each parameter group\n\t\t\topFacets.forEach((dialogContent) => {\n\t\t\t\tdialogContents.push(<Title text={dialogContent.facetTitle} />);\n\t\t\t\treturn dialogContent.data.map((element) => dialogContents.push(element.formElements));\n\t\t\t});\n\n\t\t\topFacets.forEach(function (opFacet) {\n\t\t\t\topFacet.data.forEach(function (element) {\n\t\t\t\t\tdialogContentsWithParameters.push(element);\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\t// No OperationParameterFacets have been defined\n\t\t\tdialogContentsWithParameters = await Promise.all(actionParameters.map(this.getFormElements.bind(this)));\n\t\t\tdialogContents = dialogContentsWithParameters.map((dialogContent) => {\n\t\t\t\treturn dialogContent.formElements;\n\t\t\t});\n\t\t}\n\n\t\tthis.registerActionParameterInfo(dialogContentsWithParameters);\n\n\t\t// In case of deferred create we have no view, so we need to get the resource model from the app component\n\n\t\tconst messageStrip = this.getCustomActionMessageStripText();\n\n\t\tconst endButton = (\n\t\t\t<Button\n\t\t\t\tid={generate([\"fe\", \"APD_\", this.actionName, \"Action\", \"Cancel\"])}\n\t\t\t\ttext={this.resourceModel.getText(\"C_COMMON_ACTION_PARAMETER_DIALOG_CANCEL\")}\n\t\t\t\tpress={(): void => {\n\t\t\t\t\tthis.onCancel.bind(this)();\n\t\t\t\t}}\n\t\t\t/>\n\t\t);\n\t\tconst dialog = (\n\t\t\t<Dialog\n\t\t\t\ttitle={this.getTitleText(this.parameters.label)}\n\t\t\t\tid={generate([\"fe\", \"APD_\", this.actionName])}\n\t\t\t\tescapeHandler={this.onCancel.bind(this)}\n\t\t\t\tdraggable={true}\n\t\t\t\tresizable={true}\n\t\t\t\tafterClose={this.afterClose.bind(this)}\n\t\t\t\tbeforeOpen={this.beforeOpen.bind(this)}\n\t\t\t\tafterOpen={(): void => {\n\t\t\t\t\tthis.afterOpen();\n\t\t\t\t}}\n\t\t\t\tinitialFocus={endButton} // The initial focus is set programmatically in afterOpen, to avoid opening the VH dialog\n\t\t\t>\n\t\t\t\t{{\n\t\t\t\t\tbeginButton: (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tid={generate([\"fe\", \"APD_\", this.actionName, \"Action\", \"Ok\"])}\n\t\t\t\t\t\t\ttext={\n\t\t\t\t\t\t\t\tthis.parameters.isCreateAction === true\n\t\t\t\t\t\t\t\t\t? this.resourceModel.getText(\"C_TRANSACTION_HELPER_SAPFE_ACTION_CREATE_BUTTON_CONTINUE\")\n\t\t\t\t\t\t\t\t\t: this.getBeginButtonLabel(this.parameters.label)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpress={(): void => {\n\t\t\t\t\t\t\t\tthis.onApply.bind(this)();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttype=\"Emphasized\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t),\n\t\t\t\t\tendButton: endButton,\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t\t\t\t// @ts-ignore (unknown property binding)\n\t\t\t\t\t\t// columnsM only takes effect if there are titles in the content.\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{messageStrip && <MessageStrip showIcon=\"true\" text={messageStrip}></MessageStrip>}\n\t\t\t\t\t\t\t<SimpleForm columnsM={\"2\"} editable=\"true\" labelSpanL={\"12\"} labelSpanM={\"12\"} binding={\"$Parameter\"}>\n\t\t\t\t\t\t\t\t{{ content: dialogContents }}\n\t\t\t\t\t\t\t</SimpleForm>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t</Dialog>\n\t\t);\n\t\tthis.dialog = dialog;\n\t\treturn dialog;\n\t}\n\n\t/**\n\t * Gets the label for the begin button of the dialog.\n\t * @param actionLabel The label of the action\n\t * @returns The label.\n\t */\n\tprivate getBeginButtonLabel(actionLabel: string | undefined): string {\n\t\tconst key = \"ACTION_PARAMETER_DIALOG_ACTION_NAME\";\n\t\tconst defaultKey = \"C_COMMON_DIALOG_OK\";\n\t\treturn this.getOverriddenText(key, defaultKey, actionLabel);\n\t}\n\n\t/**\n\t * Gets the title of the dialog.\n\t * @param actionLabel The label of the action\n\t * @returns The title.\n\t */\n\tprivate getTitleText(actionLabel: string | undefined): string {\n\t\tconst key = \"ACTION_PARAMETER_DIALOG_ACTION_TITLE\";\n\t\tconst defaultKey = \"C_OPERATIONS_ACTION_PARAMETER_DIALOG_TITLE\";\n\t\treturn this.getOverriddenText(key, defaultKey, actionLabel);\n\t}\n\n\t/**\n\t * Gets an overridden text for message strip.\n\t * @returns The overridden text for message strip.\n\t */\n\tprivate getCustomActionMessageStripText(): string | undefined {\n\t\tconst key = \"ACTION_PARAMETER_DIALOG_MESSAGE_TEXT\";\n\t\tlet boundActionName = this.actionName;\n\t\tboundActionName = boundActionName.split(\".\").pop() ?? boundActionName;\n\t\tconst suffixResourceKey = boundActionName && this.entitySetName ? `${this.entitySetName}|${boundActionName}` : \"\";\n\t\tif (this.resourceModel.checkIfResourceKeyExists(`${key}|${suffixResourceKey}`)) {\n\t\t\treturn this.resourceModel.getText(key, undefined, suffixResourceKey);\n\t\t} else if (this.resourceModel.checkIfResourceKeyExists(`${key}|${this.entitySetName}`)) {\n\t\t\treturn this.resourceModel.getText(key, undefined, `${this.entitySetName}`);\n\t\t} else if (this.resourceModel.checkIfResourceKeyExists(`${key}`)) {\n\t\t\treturn this.resourceModel.getText(key);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * Gets an overridden text.\n\t * @param key The key for an overridden text\n\t * @param defaultKey The default key for the text\n\t * @param actionLabel The label of the action\n\t * @returns The overridden text or label.\n\t */\n\tprivate getOverriddenText(key: string, defaultKey: string, actionLabel?: string): string {\n\t\tlet boundActionName = this.actionName;\n\t\tboundActionName = boundActionName.split(\".\").pop() ?? boundActionName;\n\t\tconst suffixResourceKey = boundActionName && this.entitySetName ? `${this.entitySetName}|${boundActionName}` : \"\";\n\t\tif (actionLabel) {\n\t\t\tif (this.resourceModel.checkIfResourceKeyExists(`${key}|${suffixResourceKey}`)) {\n\t\t\t\treturn this.resourceModel.getText(key, undefined, suffixResourceKey);\n\t\t\t} else if (this.resourceModel.checkIfResourceKeyExists(`${key}|${this.entitySetName}`)) {\n\t\t\t\treturn this.resourceModel.getText(key, undefined, `${this.entitySetName}`);\n\t\t\t} else if (this.resourceModel.checkIfResourceKeyExists(`${key}`)) {\n\t\t\t\treturn this.resourceModel.getText(key);\n\t\t\t} else {\n\t\t\t\treturn actionLabel;\n\t\t\t}\n\t\t} else {\n\t\t\treturn this.resourceModel.getText(defaultKey);\n\t\t}\n\t}\n\n\t/**\n\t * Manages the press event of the begin button of the dialog.\n\t * @returns The promise.\n\t */\n\tprivate async onApply(): Promise<void> {\n\t\t// prevent multiple press events. The BusyLocker is not fast enough. (BCP: 2370130210)\n\t\tif (this.buttonLock || !this.dialog) {\n\t\t\treturn;\n\t\t}\n\t\tconst dialog = this.dialog;\n\n\t\tconst parameterContext = (dialog.getObjectBinding() as ODataContextBinding | undefined)?.getParameterContext();\n\n\t\t// lock the button to prevent multiple press events\n\t\tthis.buttonLock = true;\n\t\tBusyLocker.lock(dialog);\n\n\t\t// validate the action parameters. It is important to do this as a first operation as there is a\n\t\t// wait done for the value changes to complete updating the model. Even in cases where validation is\n\t\t// not configured this promise needs to be resolved to read from the model to return user entered values.\n\t\tif (!(await ActionRuntime.validateProperties(this.actionParameterInfos, this.resourceModel))) {\n\t\t\tBusyLocker.unlock(dialog);\n\t\t\tthis.buttonLock = false;\n\t\t\treturn;\n\t\t}\n\n\t\tconst newValuesDictionary = Object.assign(\n\t\t\t{},\n\t\t\t...this.actionParameterInfos.map((actionParameterInfos) => {\n\t\t\t\tconst parameter = actionParameterInfos.parameter;\n\t\t\t\tlet value;\n\t\t\t\tif (parameter.isCollection) {\n\t\t\t\t\tvalue = Object.values((dialog.getModel(\"mvfview\") as JSONModel).getProperty(`/${parameter.name}`) ?? {}).map(\n\t\t\t\t\t\t(paramValue) => (paramValue as { Key?: PrimitiveType })?.Key\n\t\t\t\t\t);\n\t\t\t\t} else if (!parameter.type.startsWith(\"Edm.\") && this.getStreamProperty(parameter)) {\n\t\t\t\t\t// File Uploader\n\t\t\t\t\tvalue = actionParameterInfos.value;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = parameterContext?.getProperty(parameter.name);\n\t\t\t\t}\n\t\t\t\treturn { [parameter.name]: value };\n\t\t\t})\n\t\t) as Record<string, PrimitiveType>;\n\t\tconst isNewValue = Object.values(newValuesDictionary).some((value) => !!value);\n\n\t\tthis.parametersValuesResolve(newValuesDictionary);\n\n\t\tthis.parameters.appComponent.getModel(\"ui\").setProperty(UiModelConstants.DocumentModified, isNewValue);\n\t\t// Due to using the search and value helps on the action dialog transient messages could appear\n\t\t// we need an UX design for those to show them to the user - for now remove them before continuing\n\t\tthis.messageHandler.removeTransitionMessages();\n\t}\n\n\t/**\n\t * Reset the state of the dialog to start a new iteration.\n\t *\n\t */\n\tpublic resetState(): void {\n\t\tthis.unlockDialog();\n\t\tthis.buttonLock = false;\n\t\tthis.updateDialogBindingContextForError();\n\t\tthis.parametersValuesPromise = new Promise((resolve, reject) => {\n\t\t\tthis.parametersValuesResolve = resolve;\n\t\t\tthis.parametersValuesReject = reject;\n\t\t});\n\t}\n\n\t/**\n\t * Change the binding context of the dialog to one with priority message.\n\t *\n\t * On initial action execution, we might have bound messages with any selected contexts as target apart from the dialog's initial context.\n\t * We change the binding context of dialog for the parameter fields' to get the valid value state from the priority bound message.\n\t */\n\tupdateDialogBindingContextForError(): void {\n\t\tif (this.parameters.contexts.length < 2) {\n\t\t\t// We would need to switch the binding context of the dialog only when we have multiple contexts for executing the action.\n\t\t\treturn;\n\t\t}\n\n\t\tlet warningContext: ODataV4Context | undefined, infoContext: ODataV4Context | undefined;\n\t\tconst erroneousCtx = this.parameters.contexts.find((context) => {\n\t\t\tconst messages = context.getMessages();\n\t\t\treturn messages.some((msg) => {\n\t\t\t\t// We hold first context with warning or info messages.\n\t\t\t\twarningContext = !warningContext && msg.getType() === MessageType.Warning ? context : undefined;\n\t\t\t\tinfoContext = !infoContext && msg.getType() === MessageType.Information ? context : undefined;\n\t\t\t\t// Error is found!!! We shall exit.\n\t\t\t\treturn msg.getType() === MessageType.Error;\n\t\t\t});\n\t\t});\n\t\tconst contextToUse = erroneousCtx ?? warningContext ?? infoContext;\n\n\t\tif (contextToUse) {\n\t\t\tthis.dialog?.setBindingContext(contextToUse);\n\t\t}\n\t}\n\n\t/**\n\t * Removes the busy state of the dialog.\n\t */\n\tprivate unlockDialog(): void {\n\t\tif (this.dialog && BusyLocker.isLocked(this.dialog)) {\n\t\t\tBusyLocker.unlock(this.dialog);\n\t\t}\n\t}\n\n\t/**\n\t * Handler for the cancel action of the dialog.\n\t */\n\tprivate onCancel(): void {\n\t\tthis.parametersValuesReject(FELibrary.Constants.CancelActionDialog);\n\t\tthis.closeDialog();\n\t}\n\n\t/**\n\t * Closes the dialog.\n\t */\n\tpublic closeDialog(): void {\n\t\tif (this.dialog) {\n\t\t\tthis.parameters.events?.onParameterDialogClosed?.();\n\t\t\tthis.dialog.close();\n\t\t}\n\t\tthis.isDialogOpen = false;\n\t}\n\n\t/**\n\t * Opens the dialog.\n\t * @returns The promise of the action result.\n\t */\n\tasync openDialog(): Promise<void> {\n\t\tif (!this.dialog) {\n\t\t\tthrow new Error(\"Error on opening the dialog\");\n\t\t}\n\t\tawait CommonUtils.setUserDefaults(\n\t\t\tthis.parameters.appComponent,\n\t\t\tthis.actionParameterInfos.map((actionParameterInfo) => actionParameterInfo.parameter),\n\t\t\tthis.parameterModel,\n\t\t\ttrue\n\t\t);\n\t\tthis.setModels(this.dialog);\n\t\tthis.parameters.view?.addDependent(this.dialog);\n\t\tawait this.setOperationDefaultValues(this.dialog);\n\t\tthis.dialog.open();\n\t\tthis.isDialogOpen = true;\n\t}\n\n\t/**\n\t * Sets the model configuration for the dialog.\n\t * @param dialog The owner of the dialog\n\t */\n\tprivate setModels(dialog: Dialog): void {\n\t\tdialog.setModel(this.parameterModel, \"paramsModel\");\n\t\tdialog.bindElement({\n\t\t\tpath: \"/\",\n\t\t\tmodel: \"paramsModel\"\n\t\t});\n\t\tdialog.setModel(this.parameters.model);\n\t\tdialog.bindElement({\n\t\t\tpath: `${this.parameters.contexts.length ? \"\" : \"/\"}${this.actionName}(...)`\n\t\t});\n\n\t\tif (this.parameters.contexts.length) {\n\t\t\tdialog.setBindingContext(this.parameters.contexts[0]); // use context of first selected line item\n\t\t}\n\t\t// empty model to add elements dynamically depending on number of MVF fields defined on the dialog\n\t\tdialog.setModel(new JSONModel({}), \"mvfview\");\n\t}\n\n\t/**\n\t * Removes the messages before opening the dialog.\n\t * @param _event\n\t */\n\tprivate beforeOpen(_event: Dialog$BeforeOpenEvent): void {\n\t\tthis.messageHandler.removeTransitionMessages();\n\t}\n\n\t/**\n\t * Wait for the parameter values to be set.\n\t * @returns Promise containing the parameter values.\n\t */\n\tpublic async waitForParametersValues(): Promise<Record<string, PrimitiveType>> {\n\t\treturn this.parametersValuesPromise;\n\t}\n\n\t/**\n\t * Determines if the dialog is opened.\n\t * @returns True if the dialog is opened, false otherwise.\n\t */\n\tpublic isOpen(): boolean {\n\t\treturn this.isDialogOpen;\n\t}\n\n\t/**\n\t * Gets the default values for a parameter.\n\t * @param parameter The parameter\n\t * @param bindingParameter The binding parameter\n\t * @param dialog The dialog\n\t * @returns The promise of the default values.\n\t */\n\tprivate async getParameterDefaultValue(\n\t\tparameter: ActionParameter,\n\t\tbindingParameter: string,\n\t\tdialog: Dialog\n\t): Promise<ParameterDefaultValue> {\n\t\tconst operationBinding = dialog.getObjectBinding() as ODataContextBinding;\n\t\tconst parameterModelData = this.parameterModel.getData();\n\t\tconst paramName = parameter.name;\n\t\tconst defaultValue = parameter.annotations.UI?.ParameterDefaultValue;\n\t\t// Case 1: There is a ParameterDefaultValue annotation\n\t\tif (defaultValue) {\n\t\t\tif (this.parameters.contexts.length > 0 && isPathAnnotationExpression(defaultValue)) {\n\t\t\t\ttry {\n\t\t\t\t\tconst pathForContext: string =\n\t\t\t\t\t\tbindingParameter && defaultValue.path.startsWith(`${bindingParameter}/`)\n\t\t\t\t\t\t\t? defaultValue.path.replace(`${bindingParameter}/`, \"\")\n\t\t\t\t\t\t\t: defaultValue.path;\n\t\t\t\t\tlet paramValue = await CommonUtils.requestSingletonProperty(defaultValue.path, operationBinding.getModel());\n\t\t\t\t\tif (paramValue === null) {\n\t\t\t\t\t\tparamValue = await operationBinding.getParameterContext().requestProperty(defaultValue.path);\n\t\t\t\t\t}\n\t\t\t\t\tif (this.parameters.contexts.length > 1) {\n\t\t\t\t\t\t// For multi select, need to loop over contexts (as contexts cannot be retrieved via binding parameter of the operation binding)\n\n\t\t\t\t\t\tif (this.parameters.contexts.some((context) => context.getProperty(pathForContext) !== paramValue)) {\n\t\t\t\t\t\t\t// if the values from the contexts are not all the same, do not prefill\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tparamName,\n\t\t\t\t\t\t\t\tvalue: undefined,\n\t\t\t\t\t\t\t\tnoPossibleValue: true\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn { paramName, value: paramValue };\n\t\t\t\t} catch (error) {\n\t\t\t\t\tLog.error(\"Error while reading default action parameter\", paramName, this.action.name);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tparamName,\n\t\t\t\t\t\tvalue: undefined,\n\t\t\t\t\t\tlatePropertyError: true\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Case 1.2: ParameterDefaultValue defines a fixed string value (i.e. vParamDefaultValue = 'someString')\n\t\t\t\treturn { paramName, value: defaultValue.valueOf() };\n\t\t\t}\n\t\t}\n\t\treturn { paramName, value: parameterModelData[paramName] };\n\t}\n\n\t/**\n\t * Gets the manifest values.\n\t * @returns The promise of the manifest values.\n\t */\n\tprivate async getManifestFunctionValues(): Promise<Record<string, unknown>> {\n\t\tconst bindingContext = this.dialog?.getBindingContext();\n\t\tif (!this.parameters.view || !this.parameters.defaultValuesExtensionFunction || !bindingContext) {\n\t\t\treturn {};\n\t\t}\n\n\t\treturn FPMHelper.loadModuleAndCallMethod(\n\t\t\tthis.parameters.defaultValuesExtensionFunction\n\t\t\t\t.substring(0, this.parameters.defaultValuesExtensionFunction.lastIndexOf(\".\") || -1)\n\t\t\t\t.replace(/\\./gi, \"/\"),\n\t\t\tthis.parameters.defaultValuesExtensionFunction.substring(\n\t\t\t\tthis.parameters.defaultValuesExtensionFunction.lastIndexOf(\".\") + 1,\n\t\t\t\tthis.parameters.defaultValuesExtensionFunction.length\n\t\t\t),\n\t\t\tthis.parameters.view,\n\t\t\tbindingContext,\n\t\t\tthis.parameters.contexts\n\t\t) as Promise<Record<string, unknown>>;\n\t}\n\n\t/**\n\t * Gets the predefined values for the parameters.\n\t * @param bindingParameter The binding parameter\n\t * @param dialog The dialog\n\t * @returns The promise containing all predefined values.\n\t */\n\tprivate async getPreDefinedValues(\n\t\tbindingParameter: string,\n\t\tdialog: Dialog\n\t): Promise<{\n\t\tcontextValues: Record<string, unknown>;\n\t\tdefaultValues: ParameterDefaultValue[];\n\t\tfunctionValues: ODataV4Context[];\n\t\tmanifestFunctionValues: Record<string, unknown>;\n\t}> {\n\t\tconst boundFunctionName = this.action.annotations.Common?.DefaultValuesFunction?.valueOf();\n\t\tlet requestContextObject: Promise<Record<string, unknown>> = Promise.resolve({});\n\t\tlet functionParams: Promise<ODataV4Context>[] = [];\n\t\tif (this.action.isBound) {\n\t\t\tif (typeof boundFunctionName === \"string\") {\n\t\t\t\tconst model = this.parameters.contexts[0].getModel();\n\t\t\t\tconst boundFunction = Operation.getOperationFromName(boundFunctionName, model, this.parameters.contexts[0]);\n\t\t\t\tif (boundFunction) {\n\t\t\t\t\tfunctionParams = this.parameters.contexts.map(async (context) => {\n\t\t\t\t\t\tconst result = await new ODataOperation(\n\t\t\t\t\t\t\tboundFunction,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tappComponent: this.parameters.appComponent,\n\t\t\t\t\t\t\t\tmodel: model,\n\t\t\t\t\t\t\t\tcontexts: [context]\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tenhance$select: false,\n\t\t\t\t\t\t\t\tgroupId: \"functionGroup\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t).execute();\n\t\t\t\t\t\treturn result.filter(isFulfilled)[0]?.value.boundContext;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.parameters.contexts.length > 0) {\n\t\t\t\trequestContextObject = this.parameters.contexts[0].requestObject();\n\t\t\t}\n\t\t}\n\n\t\ttry {\n\t\t\tconst contextValues = await requestContextObject;\n\n\t\t\tconst promises = await Promise.all([\n\t\t\t\tPromise.all(\n\t\t\t\t\tthis.actionParameterInfos.map(async (actionParameterInfo) =>\n\t\t\t\t\t\tthis.getParameterDefaultValue(actionParameterInfo.parameter, bindingParameter, dialog)\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\tPromise.all(functionParams),\n\t\t\t\tthis.getManifestFunctionValues()\n\t\t\t]);\n\t\t\treturn {\n\t\t\t\tcontextValues,\n\t\t\t\tdefaultValues: promises[0],\n\t\t\t\tfunctionValues: promises[1],\n\t\t\t\tmanifestFunctionValues: promises[2]\n\t\t\t};\n\t\t} catch (error: unknown) {\n\t\t\tLog.error(\"Error while retrieving the parameter\", error as string);\n\t\t\t// Remove messages relating to the function for default values as they aren't helpful for a user\n\t\t\tthis.messageHandler.removeTransitionMessages();\n\t\t\treturn {\n\t\t\t\tcontextValues: {},\n\t\t\t\tdefaultValues: [],\n\t\t\t\tfunctionValues: [],\n\t\t\t\tmanifestFunctionValues: {}\n\t\t\t};\n\t\t}\n\t}\n\n\t/**\n\t * Callback when the dialog is opened. Sets the focus on the first field without opening the VH dialog.\n\t */\n\tprivate afterOpen(): void {\n\t\tconst firstVisibleParameter = this.actionParameterInfos.find((parameterInfo) => parameterInfo.field.getVisible());\n\t\tif (firstVisibleParameter) {\n\t\t\tconst firstField = firstVisibleParameter?.field;\n\t\t\tconst focusInfo = firstField?.getFocusInfo() as { targetInfo: object };\n\t\t\tfocusInfo.targetInfo = { silent: true };\n\t\t\tfirstField?.focus(focusInfo);\n\t\t}\n\t\tthis.parameters.events?.onParameterDialogOpened?.();\n\t}\n\n\t/**\n\t * Registers the action parameter info.\n\t * @param dialogContents The dialog contents\n\t */\n\tprivate registerActionParameterInfo(dialogContents: DialogContentTypes[]): void {\n\t\t//Register the field\n\t\tdialogContents.forEach((dialogContent) => {\n\t\t\tconst parameter = dialogContent?.parameter;\n\t\t\tconst field = dialogContent?.formElements?.[1];\n\t\t\tthis.actionParameterInfos.push({\n\t\t\t\tparameter,\n\t\t\t\tfield,\n\t\t\t\tisMultiValue: parameter.isCollection,\n\t\t\t\thasError: false\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Sets the default values for the parameters.\n\t * @param dialog The dialog\n\t * @returns The promise.\n\t */\n\tprivate async setOperationDefaultValues(dialog: Dialog): Promise<void> {\n\t\tconst bindingParameter = this.action.isBound ? this.action.parameters[0].name : \"\";\n\t\tconst { contextValues, defaultValues, functionValues, manifestFunctionValues } = await this.getPreDefinedValues(\n\t\t\tbindingParameter,\n\t\t\tdialog\n\t\t);\n\t\tconst operationBinding = dialog.getObjectBinding() as ODataContextBinding;\n\n\t\tif (bindingParameter) {\n\t\t\toperationBinding.setParameter(bindingParameter, contextValues);\n\t\t}\n\n\t\tfor (const i in this.actionParameterInfos) {\n\t\t\tif (this.actionParameterInfos[i].parameter.name !== \"ResultIsActiveEntity\") {\n\t\t\t\tconst parameterName = this.actionParameterInfos[i].parameter.name;\n\t\t\t\t// Parameter values provided in the call of invokeAction overrule other sources\n\t\t\t\tconst parameterProvidedValue = this.parameterValues?.find((element) => element.name === parameterName)?.value;\n\t\t\t\tif (parameterProvidedValue) {\n\t\t\t\t\toperationBinding.setParameter(parameterName, parameterProvidedValue);\n\t\t\t\t} else if (manifestFunctionValues.hasOwnProperty(parameterName)) {\n\t\t\t\t\toperationBinding.setParameter(parameterName, manifestFunctionValues[parameterName]);\n\t\t\t\t} else if (defaultValues[i] && defaultValues[i].value !== undefined) {\n\t\t\t\t\toperationBinding.setParameter(parameterName, defaultValues[i].value);\n\t\t\t\t} else if (this.action.annotations.Common?.DefaultValuesFunction && !defaultValues[i].noPossibleValue) {\n\t\t\t\t\tconst setOfFunctionValues = new Set<string>(\n\t\t\t\t\t\tthis.parameters.contexts.map((context, index) => functionValues[index].getObject(parameterName))\n\t\t\t\t\t);\n\t\t\t\t\tif (setOfFunctionValues.size === 1 && setOfFunctionValues.values().next().value !== undefined) {\n\t\t\t\t\t\t//param values are all the same:\n\t\t\t\t\t\toperationBinding.setParameter(parameterName, Array.from(setOfFunctionValues)[0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// If at least one Default Property is a Late Property and an eTag error was raised.\n\t\tif (defaultValues.some((value) => value.latePropertyError)) {\n\t\t\tconst refresh = this.resourceModel.getText(\"C_COMMON_SAPFE_REFRESH\");\n\t\t\tMessageBox.warning(getResourceModel(this.parameters.appComponent).getText(\"C_APP_COMPONENT_SAPFE_ETAG_LATE_PROPERTY\"), {\n\t\t\t\tactions: [refresh, MessageBox.Action.OK],\n\t\t\t\temphasizedAction: refresh,\n\t\t\t\tonClose: (action: string) => {\n\t\t\t\t\tif (action === refresh) {\n\t\t\t\t\t\tconst extensionAPI = this.parameters.view?.getController().getExtensionAPI();\n\t\t\t\t\t\t(extensionAPI as ListReportExtensionAPI | ObjectPageExtensionAPI).refresh();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcontentWidth: \"25em\"\n\t\t\t} as object);\n\t\t}\n\n\t\t// destroy the odataContextBinding related to the function call\n\t\tfor (const functionContext of functionValues) {\n\t\t\tconst binding = functionContext.getBinding();\n\t\t\tif (binding?.isA(\"sap.ui.model.odata.v4.ODataContextBinding\")) {\n\t\t\t\tbinding.destroy();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Manages the close of the dialog.\n\t */\n\tprivate afterClose(): void {\n\t\t// when the dialog is cancelled, messages need to be removed in case the same action should be executed again\n\t\tfor (const i in this.actionParameterInfos) {\n\t\t\tthis.removeMessagesForParameter(this.actionParameterInfos[i].parameter);\n\t\t}\n\t\tthis.dialog?.destroy();\n\t\tthis.buttonLock = false; //needed here, not in the press events finally clause. In case the UI is sluggish, begin button could be pressed again.\n\t}\n\n\t/**\n\t * Gets the type of the property used for text annotation in the ValueHelp for the action parameter and provides the formatted binding.\n\t * @param oInterface The parameter\n\t * @returns The form element control.\n\t */\n\tprivate async getAdditionalValue(oInterface: ComputedAnnotationInterface): Promise<string | undefined> {\n\t\tlet textContext;\n\n\t\tconst contextPath = oInterface.context.getPath();\n\t\tconst localDataProperty = oInterface.context.getObject()?.$Name;\n\t\tconst valueListByQualifier = await this.metaModel.requestValueListInfo(contextPath, true);\n\n\t\t// Look for LocalDataProperty in ValueListParameterOut or ValueListParameterInOut where this is the parameter name\n\t\t// We only consider TextAnnotations for this action parameter\n\t\tconst valueListParameter = valueListByQualifier[\"\"].Parameters.find(\n\t\t\t(parameter: AnnotationValueListParameter) =>\n\t\t\t\tparameter.$Type === \"com.sap.vocabularies.Common.v1.ValueListParameterInOut\" ||\n\t\t\t\t(parameter.$Type === \"com.sap.vocabularies.Common.v1.ValueListParameterOut\" &&\n\t\t\t\t\tparameter.LocalDataProperty?.$PropertyPath === localDataProperty)\n\t\t);\n\n\t\tif (valueListParameter && valueListParameter.ValueListProperty) {\n\t\t\tconst textProperty = valueListParameter.ValueListProperty;\n\t\t\t// Now we have the name of the property that is the annotated text\n\t\t\tconst propertyPath = `/${valueListByQualifier[\"\"].CollectionPath}/${textProperty}`;\n\t\t\tconst propAnnotations = this.metaModel.getObject(`${propertyPath}@`);\n\n\t\t\tif (propAnnotations[\"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement\"]) {\n\t\t\t\tconst textProp = propAnnotations[\"@com.sap.vocabularies.Common.v1.Text\"];\n\t\t\t\tconst textPath = `/${valueListByQualifier[\"\"].CollectionPath}/${textProp.$Path}`;\n\t\t\t\ttextContext = this.metaModel.createBindingContext(textPath);\n\t\t\t}\n\n\t\t\tif (textContext) {\n\t\t\t\treturn AnnotationHelper.format(textContext.getObject(), { context: textContext });\n\t\t\t}\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"OperationParameterDialog-dbg.js"}