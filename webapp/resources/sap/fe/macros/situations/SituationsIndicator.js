/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/base/BindingToolkit","sap/fe/base/ClassSupport","sap/fe/core/buildingBlocks/BuildingBlock","sap/fe/core/formatters/StandardFormatter","sap/fe/macros/situations/SituationsPopover","sap/m/Button","sap/m/library","sap/fe/base/jsx-runtime/jsx"],function(t,e,r,i,n,a,o,s,l){"use strict";var u,p,c,f,y,b,d;var g={};var v=s.ButtonType;var m=a.showPopover;var h=r.property;var P=r.defineUI5Class;var T=e.pathInModel;var S=e.ifElse;var j=e.greaterThan;var O=e.formatResult;var w=e.equal;var z=e.compileExpression;var k=e.and;function x(t,e,r,i){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function C(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,N(t,e)}function N(t,e){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},N(t,e)}function B(t,e,r,i,n){var a={};return Object.keys(i).forEach(function(t){a[t]=i[t]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,i){return i(t,e,r)||r},a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(t,e,a),null):a}function E(t,e){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let A=(u=P("sap.fe.macros.situations.SituationsIndicator"),p=h({type:"string",required:true}),c=h({type:"string",required:false}),u(f=(y=function(e){function r(t,r){var i;i=e.call(this,t,r)||this;x(i,"contextPath",b,i);x(i,"propertyPath",d,i);return i}g=r;C(r,e);var i=r.prototype;i.onMetadataAvailable=function t(){this.content=this.createContent()};r.getSituationsNavigationProperty=function e(r){let i;switch(r._type){case"NavigationProperty":i=r.targetType.navigationProperties;break;case"EntityType":i=r.navigationProperties;break;default:i=r.entityType.navigationProperties}const n=i.filter(t=>!t.isCollection&&t.targetType.annotations.Common?.SAPObjectNodeType?.Name==="BusinessSituation");const a=n.length>=1?n[0]:undefined;if(n.length>1){const e=n.map(t=>`'${t.name}'`).join(", ");let i;switch(r._type){case"NavigationProperty":i=r.targetType.name;break;case"EntityType":i=r.name;break;default:i=r.entityType.name}t.error(`Entity type '${i}' has multiple paths to SAP Situations (${e}). Using '${a?.name}'.\nHint: Make sure there is at most one navigation property whose target entity type is annotated with\n<Annotation Term="com.sap.vocabularies.Common.v1.SAPObjectNodeType">\n  <Record>\n    <PropertyValue Property="Name" String="BusinessSituation" />\n  </Record>\n</Annotation>.`)}return a};i.onPress=function t(e,r){const i=this.getPageController();if(i){m(i,e,r)}};i.createContent=function t(){const e=this.getDataModelObjectForMetaPath(this.contextPath)?.targetEntityType;if(!e){return}const i=r.getSituationsNavigationProperty(e);if(!i){return undefined}const a=T(`${i.name}/SitnNumberOfInstances`);let s;if(!this.propertyPath){s=j(a,0)}else{s=k(j(a,0),w(T("semanticKeyHasDraftIndicator","internal"),this.propertyPath))}const u=S(j(a,1),a,"");const p=O([this.getTranslatedText("situationsTooltipSingular"),this.getTranslatedText("situationsTooltipPlural"),a],n.formatPluralMessageConditionally);return l(o,{type:v.Attention,icon:"sap-icon://alert",text:u,tooltip:z(p),visible:s,press:t=>this.onPress(t,i.name)})};return r}(i),b=B(y.prototype,"contextPath",[p],{configurable:true,enumerable:true,writable:true,initializer:null}),d=B(y.prototype,"propertyPath",[c],{configurable:true,enumerable:true,writable:true,initializer:null}),y))||f);g=A;return g},false);
//# sourceMappingURL=SituationsIndicator.js.map