{"version":3,"file":"CustomFragment.block.js","names":["CustomFragmentBlock","_dec","defineBuildingBlock","name","namespace","_dec2","blockAttribute","type","required","_dec3","_dec4","_dec5","blockAggregation","slot","_class","_class2","_BuildingBlockTemplat","props","configuration","settings","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_exports","_inheritsLoose","_proto","prototype","getTemplate","fragmentInstanceName","fragmentName","replace","customData","childCustomData","customDataObj","child","firstElementChild","getAttribute","nextElementSibling","xml","attr","Object","keys","length","JSON","stringify","undefined","id","contextPath","getPath","BuildingBlockTemplatingBase","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./CustomFragment.block.ts"],"sourcesContent":["import { type PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { blockAggregation, blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/templating/BuildingBlockSupport\";\nimport type { TemplateProcessorSettings } from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplateProcessor\";\nimport { xml } from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplateProcessor\";\nimport BuildingBlockTemplatingBase from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplatingBase\";\nimport type Context from \"sap/ui/model/Context\";\n\n/**\n * Content of a custom fragment\n * @private\n */\n@defineBuildingBlock({\n\tname: \"CustomFragment\",\n\tnamespace: \"sap.fe.macros.fpm\"\n})\nexport default class CustomFragmentBlock extends BuildingBlockTemplatingBase {\n\t/**\n\t * ID of the custom fragment\n\t */\n\t@blockAttribute({ type: \"string\", required: true })\n\tpublic id!: string;\n\n\t/**\n\t * Context Path\n\t */\n\t@blockAttribute({ type: \"sap.ui.model.Context\", required: false })\n\tpublic contextPath?: Context;\n\n\t/**\n\t *  Name of the custom fragment\n\t */\n\t@blockAttribute({ type: \"string\", required: true })\n\tpublic fragmentName!: string;\n\n\t@blockAggregation({ type: \"sap.ui.core.CustomData\", slot: \"childCustomData\" })\n\tpublic childCustomData!: Element;\n\n\tconstructor(props: PropertiesOf<CustomFragmentBlock>, configuration: unknown, settings: TemplateProcessorSettings) {\n\t\tsuper(props, configuration, settings);\n\t}\n\n\t/**\n\t * The building block template function.\n\t * @returns An XML-based string\n\t */\n\tgetTemplate(): string {\n\t\tconst fragmentInstanceName = this.fragmentName + \"-JS\".replace(/\\//g, \".\");\n\t\tconst customData: Element = this.childCustomData;\n\t\tconst customDataObj: Record<string, string | null> = {};\n\t\tlet child = customData?.firstElementChild;\n\t\twhile (child) {\n\t\t\tconst name = child.getAttribute(\"key\");\n\t\t\tif (name !== null) {\n\t\t\t\tcustomDataObj[name] = child.getAttribute(\"value\");\n\t\t\t}\n\t\t\tchild = child.nextElementSibling;\n\t\t}\n\t\treturn xml`<macros:CustomFragmentFragment\n\t\t\txmlns:compo=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.xmlcomposite/1\"\n\t\t\txmlns:macros=\"sap.fe.macros.fpm\"\n\t\t\tfragmentName=\"${fragmentInstanceName}\"\n\t\t\t${this.attr(\"childCustomData\", Object.keys(customDataObj).length ? JSON.stringify(customDataObj) : undefined)}\n\t\t\tid=\"${this.id}\"\n\t\t\ttype=\"CUSTOM\"\n\t\t\tcontextPath=\"${this.contextPath?.getPath()}\"\n\t\t>\n\t\t\t<compo:fragmentContent>\n\t\t\t\t<core:FragmentDefinition>\n\t\t\t\t\t<core:Fragment fragmentName=\"${this.fragmentName}\" type=\"XML\"/>\n\t\t\t\t</core:FragmentDefinition>\n\t\t\t</compo:fragmentContent>\n\t\t</macros:CustomFragmentFragment>`;\n\t}\n}\n"],"mappings":";;;;ozCAOA,IAQqBA,GAAmBC,EAJvCC,EAAoB,CACpBC,KAAM,iBACNC,UAAW,sBACVC,EAKAC,EAAe,CAAEC,KAAM,SAAUC,SAAU,OAAOC,EAMlDH,EAAe,CAAEC,KAAM,uBAAwBC,SAAU,QAAQE,EAMjEJ,EAAe,CAAEC,KAAM,SAAUC,SAAU,OAAOG,EAGlDC,EAAiB,CAAEL,KAAM,yBAA0BM,KAAM,oBAAoBZ,EAAAa,GAAAC,EAAA,SAAAC,GAG9E,SAAAhB,EAAYiB,EAA0CC,EAAwBC,GAAqC,IAAAC,EAClHA,EAAAJ,EAAAK,KAAAC,KAAML,EAAOC,EAAeC,IAASG,KAtBtCC,EAAAH,EAAA,KAAAI,EAAAJ,GAMAG,EAAAH,EAAA,cAAAK,EAAAL,GAMAG,EAAAH,EAAA,eAAAM,EAAAN,GAAAG,EAAAH,EAAA,kBAAAO,EAAAP,GAAA,OAAAA,CAWA,CAEAQ,EAAA5B,EAAA6B,EAAA7B,EAAAgB,GAAA,IAAAc,EAAA9B,EAAA+B,UAAAD,EAIAE,YAAA,SAAAA,IACC,MAAMC,EAAuBX,KAAKY,aAAe,MAAMC,QAAQ,MAAO,KACtE,MAAMC,EAAsBd,KAAKe,gBACjC,MAAMC,EAA+C,CAAC,EACtD,IAAIC,EAAQH,GAAYI,kBACxB,MAAOD,EAAO,CACb,MAAMpC,EAAOoC,EAAME,aAAa,OAChC,GAAItC,IAAS,KAAM,CAClBmC,EAAcnC,GAAQoC,EAAME,aAAa,QAC1C,CACAF,EAAQA,EAAMG,kBACf,CACA,OAAOC,CAAG;;;mBAGOV;KACdX,KAAKsB,KAAK,kBAAmBC,OAAOC,KAAKR,GAAeS,OAASC,KAAKC,UAAUX,GAAiBY;SAC7F5B,KAAK6B;;kBAEI7B,KAAK8B,aAAaC;;;;oCAIA/B,KAAKY;;;mCAIxC,EAAC,OAAAlC,CAAA,CAtC6E,CAnB9BsD,GAA2B9B,EAAA+B,EAAAxC,EAAAgB,UAAA,MAAA1B,GAAA,CAAAmD,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAlC,EAAA8B,EAAAxC,EAAAgB,UAAA,eAAAtB,GAAA,CAAA+C,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAjC,EAAA6B,EAAAxC,EAAAgB,UAAA,gBAAArB,GAAA,CAAA8C,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAhC,EAAA4B,EAAAxC,EAAAgB,UAAA,mBAAApB,GAAA,CAAA6C,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAA5C,KAAAD,GAAAc,EAAA5B,EAAA,OAAA4B,CAAA","ignoreList":[]}