/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/CommonUtils","sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/TypeGuards","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,n,r,o){"use strict";var s={};var a=n.isProperty;var i=t.convertTypes;function l(e,t,n,o){let s=o;if(typeof s==="string"&&t.annotations.Common?.IsUpperCase?.valueOf()===true){s=s.toUpperCase()}return new r({path:e.keyPath,operator:n,value1:s})}async function u(t,n,r,s){let a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;const i=t.valueListInfo.$model;const u=`/${t.valueListInfo.CollectionPath}`;const f=d(t);let p=e.normalizeSearchTerm(s instanceof Date?s.toISOString():s.toString());const v=h(r);const g=v?m(r):r;const C=l(t,n,g,s);const P=!p||p.length>(n.maxLength??p.length);if(!a){p=`"${p}"`}const[L,E]=await Promise.allSettled([!P?i.bindList(u,undefined,undefined,C,{$select:f}).requestContexts(0,1):[],i.bindList(u,undefined,undefined,undefined,{$search:p,$select:f}).requestContexts()]);const y=c(t,true);if(L.status==="fulfilled"&&L.value.length>0){return g===o.EQ?{operator:r,selectedValues:L.value.map(y)}:{operator:r,selectedValues:[{value:s,description:s}]}}if(E.status==="fulfilled"&&E.value.length>0){let e=E.value.map(y);if(g===o.EQ){const t=e.filter(e=>e.description.toString().toLowerCase()===s.toString().toLowerCase());if(t.length>0){e=t}}return{operator:r,selectedValues:e}}return{operator:r,selectedValues:[{value:s,description:s}],noMatch:true}}function c(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return n=>{const r=n.getObject();const o=r[e.keyPath];const s=e.descriptionPath?r[e.descriptionPath]:undefined;return{value:o,description:t?s??o:s}}}s.mapValueListToCodeList=c;function d(e){return[e.keyPath,e.descriptionPath].filter(e=>e&&!e.includes("/")).join(",")}s.generateSelectParameter=d;async function f(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;const{operator:r,selectedValues:s}=t;const l=e.valueListInfo.$model;l.setContinueOnError("$auto");const c=i(l.getMetaModel());const d=c.resolvePath(`/${e.valueListInfo.CollectionPath}/${e.keyPath}`)?.target;if(!a(d)){return p([t])}if(v(r)){if(r===o.BT||r===o.NB){const[e,t]=s;return[{operator:r,selectedValues:[{value:e,description:e},{value:t,description:t}]}]}else{return p([t])}}else{const t=await Promise.all(s.map(async t=>u(e,d,r,t,n)));return t.flat()}}s.resolveTokenValue=f;function p(e){return e.map(e=>{let{operator:t,selectedValues:n}=e;return{operator:t,selectedValues:n.map(e=>({value:e,description:e}))}})}s.unresolvedResult=p;function h(e){return[o.NE,o.NotContains,o.NotStartsWith,o.NotEndsWith].includes(e)}function v(e){return[o.GT,o.GE,o.LT,o.LE,o.BT,o.NB].includes(e)}function m(e){switch(e){case o.NE:return o.EQ;case o.NotContains:return o.Contains;case o.NotStartsWith:return o.StartsWith;case o.NotEndsWith:return o.EndsWith;default:return o.EQ}}s.getPositiveOperator=m;return s},false);
//# sourceMappingURL=EasyFilterDataFetcher.js.map