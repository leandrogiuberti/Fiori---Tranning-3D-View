/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/base/BindingToolkit","sap/fe/base/ClassSupport","sap/fe/base/HookSupport","sap/fe/core/buildingBlocks/BuildingBlock","sap/fe/core/helpers/ModelHelper","sap/fe/core/library","sap/m/HBox","sap/ui/core/Element","sap/ui/core/InvisibleText","sap/ui/model/json/JSONModel","sap/fe/base/jsx-runtime/jsx","sap/fe/base/jsx-runtime/jsxs"],function(t,e,n,i,r,o,s,a,u,l,d,c,p){"use strict";var h,f,x,_,C,g,b,I,v,P,y,O,T,B,w,A;function E(t){return new Promise((e,n)=>{sap.ui.require([t],n=>{if(!(n&&n.__esModule)){n=n===null||!(typeof n==="object"&&t.endsWith("/library"))?{default:n}:n;Object.defineProperty(n,"__esModule",{value:true})}e(n)},t=>{n(t)})})}var m={};var N=s.ContextNavigationType;var D=i.controllerExtensionHandler;var L=n.property;var M=n.defineUI5Class;var j=n.defineReference;var z=e.pathInModel;var H=e.or;var R=e.compileExpression;function U(t,e,n,i){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function G(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,k(t,e)}function k(t,e){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},k(t,e)}function S(t,e,n,i,r){var o={};return Object.keys(i).forEach(function(t){o[t]=i[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(t,e,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer?(Object.defineProperty(t,e,o),null):o}function F(t,e){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}var J=function(t){t["Next"]="Next";t["Previous"]="Previous";return t}(J||{});let W=(h=M("sap.fe.macros.Paginator"),f=L({type:"string"}),x=L({type:"string"}),_=j(),C=j(),g=j(),b=j(),I=D("paginator","initialize"),h(v=(P=function(e){function n(t,n){var i;i=e.call(this,t,n)||this;U(i,"id",y,i);U(i,"ariaTitle",O,i);U(i,"upButton",T,i);U(i,"downButton",B,i);U(i,"upDescription",w,i);U(i,"downDescription",A,i);i.paginatorModel=new d({navUpEnabled:false,navDownEnabled:false});i._iCurrentIndex=-1;i._nextIndex=-1;i._previousIndex=-1;i._listCurrentContexts=[];return i}m=n;G(n,e);n.load=async function t(){if(n.ObjectPageHeaderActionButton===undefined){const{default:t}=await E("sap/uxap/ObjectPageHeaderActionButton");n.ObjectPageHeaderActionButton=t}return this};var i=n.prototype;i.onMetadataAvailable=async function t(e){await n.load();this.content=this.createContent(e)};i.onModelContextChange=function t(e){const n=e.getSource();if(n.isA("sap.m.HBox")&&this.upButton.current&&this.downButton.current){const t=n.getBindingContext();if(!t){return}this._updateDescriptionAndFocus(this.upButton.current,this.downButton.current)}};i.initialize=function t(e,n){if(e&&e.getAllCurrentContexts){this._oListBinding=e;this._listCurrentContexts=this._oListBinding.getAllCurrentContexts();e.attachEvent("change",this._updateIndicesAndButtonEnablement.bind(this))}else{this._oListBinding=undefined}if(n){this._oCurrentContext=n}this._updateIndicesAndButtonEnablement()};i._setPrevOrNextIndex=async function t(e,n){let i=await(this.getPageController()?.paginator.determineContextNavigationType(this._listCurrentContexts[e]));const r=await o.evaluateVirtualExpression("@$ui5.fe.virtual.routeNavigable-"+this.getPageController().getRoutingTargetName(),this._listCurrentContexts[e]);if(r===false){i=N.None}if(i===N.Internal){if(n===J.Next){this._nextIndex=e}else{this._previousIndex=e}}else if(n===J.Next){if(e!==this._listCurrentContexts.length-1){await this._setPrevOrNextIndex(e+1,J.Next)}else{this._nextIndex=-1}}else if(e!==0){await this._setPrevOrNextIndex(e-1,J.Previous)}else{this._previousIndex=-1}};i._updateIndicesAndButtonEnablement=async function e(){if(this._oCurrentContext&&this._oListBinding){this._listCurrentContexts=this._oListBinding.getAllCurrentContexts();const e=this._oCurrentContext.getPath();this._iCurrentIndex=this._listCurrentContexts?.findIndex(function(t){return t&&t.getPath()===e});const n=this._listCurrentContexts?.[this._iCurrentIndex];if(!this._iCurrentIndex&&this._iCurrentIndex!==0||!n||this._oCurrentContext.getPath()!==n.getPath()){this._updateCurrentIndex()}return this._invokeSetPrevOrNextIndex().then(()=>{this._handleButtonEnablement();return}).catch(e=>{t.error("Error occurred while setting button indices or handling button enablement:",e)})}else{this._handleButtonEnablement();return Promise.resolve()}};i._handleButtonEnablement=function t(){const e=this.paginatorModel;if(this._oListBinding&&this._oListBinding.getAllCurrentContexts()?.length>1&&this._iCurrentIndex>-1){this._listCurrentContexts=this._oListBinding.getAllCurrentContexts();if(this._iCurrentIndex===this._listCurrentContexts.length-1||this._nextIndex===-1){e.setProperty("/navDownEnabled",false)}else if(this._listCurrentContexts[this._iCurrentIndex+1].isInactive()){e.setProperty("/navDownEnabled",false)}else{e.setProperty("/navDownEnabled",true)}if(this._iCurrentIndex===0||this._previousIndex===-1){e.setProperty("/navUpEnabled",false)}else if(this._listCurrentContexts[this._iCurrentIndex-1].isInactive()){e.setProperty("/navUpEnabled",false)}else{e.setProperty("/navUpEnabled",true)}}else{e.setProperty("/navUpEnabled",false);e.setProperty("/navDownEnabled",false)}};i._updateCurrentIndex=function t(){if(this._oCurrentContext&&this._oListBinding){const t=this._oCurrentContext.getPath();this._iCurrentIndex=this._listCurrentContexts?.findIndex(function(e){return e&&e.getPath()===t})}};i._invokeSetPrevOrNextIndex=async function t(){if(this._listCurrentContexts.length>1){if(this._iCurrentIndex!==this._listCurrentContexts.length-1){await this._setPrevOrNextIndex(this._iCurrentIndex+1,J.Next)}if(this._iCurrentIndex!==0){await this._setPrevOrNextIndex(this._iCurrentIndex-1,J.Previous)}}};i.updateCurrentContext=async function t(e){if(!this._oListBinding){return}const n=this._oCurrentContext?.getModel?this._oCurrentContext?.getModel():undefined;await(n?.submitBatch("$auto"));const i=this._oListBinding.getAllCurrentContexts();const r=i[e];if(r){const t=this.getPageController()?.paginator.onBeforeContextUpdate(this._oListBinding,this._iCurrentIndex,e);if(!t){this._iCurrentIndex=e;this._oCurrentContext=r}this.getPageController()?.paginator.onContextUpdate(r)}this._updateIndicesAndButtonEnablement()};i._updateDescriptionAndFocus=function t(e,n){const i=u.getActiveElement();const r=e.getEnabled();const o=n.getEnabled();let s="";let a="";if(r&&!o&&i===n){e.focus();s=this.getTranslatedText("M_PAGINATOR_TITLE_BOTTOM");a=""}else if(o&&!r&&i===e){n.focus();s="";a=this.getTranslatedText("M_PAGINATOR_TITLE_TOP")}if(this.upDescription.current){this.upDescription.current.setText(s)}if(this.downDescription.current){this.downDescription.current.setText(a)}};i.createContent=function t(e){const i=z("/navUpEnabled","paginator");const r=z("/navDownEnabled","paginator");const o=H(i,r);const s=z("T_PAGINATOR_CONTROL_PAGINATOR_TOOLTIP_UP","sap.fe.i18n");const u=z("T_PAGINATOR_CONTROL_PAGINATOR_TOOLTIP_DOWN","sap.fe.i18n");const d=this.ariaTitle?this.getTranslatedText("M_PAGINATOR_ANNOUNCEMENT_TITLE_LOADED",[this.ariaTitle]):this.getTranslatedText("M_PAGINATOR_ANNOUNCEMENT_OBJECT_LOADED");e.setModel(this.paginatorModel,"paginator");return p(a,{displayInline:"true",id:this.createId("_box"),visible:R(o),modelContextChange:t=>{this.onModelContextChange(t)},children:[c(l,{ref:this.upDescription,id:this.createId("upDescription")}),c(l,{ref:this.downDescription,id:this.createId("downDescription")}),c(l,{id:this.createId("titleDescription"),text:d}),c(n.ObjectPageHeaderActionButton,{id:this.createId("previousItem"),ref:this.upButton,enabled:R(i),tooltip:R(s),icon:"sap-icon://navigation-up-arrow",press:async()=>this.updateCurrentContext(this._previousIndex),type:"Transparent",importance:"High",ariaDescribedBy:[this.createId("titleDescription"),this.createId("upDescription")].filter(t=>t!==undefined)}),c(n.ObjectPageHeaderActionButton,{id:this.createId("nextItem"),ref:this.downButton,enabled:R(r),tooltip:R(u),icon:"sap-icon://navigation-down-arrow",press:async()=>this.updateCurrentContext(this._nextIndex),type:"Transparent",importance:"High",ariaDescribedBy:[this.createId("titleDescription"),this.createId("downDescription")].filter(t=>t!==undefined)})]})};return n}(r),y=S(P.prototype,"id",[f],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),O=S(P.prototype,"ariaTitle",[x],{configurable:true,enumerable:true,writable:true,initializer:null}),T=S(P.prototype,"upButton",[_],{configurable:true,enumerable:true,writable:true,initializer:null}),B=S(P.prototype,"downButton",[C],{configurable:true,enumerable:true,writable:true,initializer:null}),w=S(P.prototype,"upDescription",[g],{configurable:true,enumerable:true,writable:true,initializer:null}),A=S(P.prototype,"downDescription",[b],{configurable:true,enumerable:true,writable:true,initializer:null}),S(P.prototype,"initialize",[I],Object.getOwnPropertyDescriptor(P.prototype,"initialize"),P.prototype),P))||v);m=W;return m},false);
//# sourceMappingURL=Paginator.js.map