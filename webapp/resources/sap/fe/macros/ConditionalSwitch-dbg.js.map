{"version":3,"names":["ConditionalSwitch","_dec","defineUI5Class","_dec2","implementInterface","_dec3","aggregation","type","isDefault","_dec4","multiple","singularName","_dec5","property","_class","_class2","_BuildingBlockBase","idOrSettings","settings","scope","_this","call","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","DEBOUNCE_TIME","_exports","_inheritsLoose","_proto","prototype","_createContentDebounced","_createDebounceTimer","undefined","clearTimeout","window","setTimeout","_createContent","factory","switchProperties","reduce","reducer","prop","key","value","oldContent","content","newContent","getBindingContext","destroy","ariaLabelledBy","addAssociation","join","sAssociationName","sId","bSuppressInvalidate","addSwitchProperty","conditionalSwitchProperty","addAggregation","fnBoundDebounced","bind","attachEvent","removeSwitchProperty","vIndex","removeAggregation","detachEvent","getFormDoNotAdjustWidth","BuildingBlockBase","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sourceRoot":".","sources":["ConditionalSwitch.tsx"],"sourcesContent":["import BuildingBlockBase from \"sap/fe/base/BuildingBlockBase\";\nimport type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { aggregation, defineUI5Class, implementInterface, property } from \"sap/fe/base/ClassSupport\";\nimport type ConditionalSwitchProperty from \"sap/fe/macros/ConditionalSwitchProperty\";\nimport type ManagedObject from \"sap/ui/base/ManagedObject\";\nimport type Control from \"sap/ui/core/Control\";\nimport type { IFormContent } from \"sap/ui/core/library\";\n\n/**\n * Defines a conditional template that renders content based on the evaluation of a set of switchProperties.\n * The switchProperties are defined using the {@link sap.fe.macros.ConditionalSwitchProperty} building block.\n * @public\n * @since 1.141.0\n * @ui5-experimental-since 1.141.0\n */\n@defineUI5Class(\"sap.fe.macros.ConditionalSwitch\")\nexport default class ConditionalSwitch extends BuildingBlockBase implements IFormContent {\n\t@implementInterface(\"sap.ui.core.IFormContent\")\n\t__implements__sap_ui_core_IFormContent = true;\n\n\t@aggregation({ type: \"sap.ui.core.IFormContent\", isDefault: false })\n\tcontent?: Control;\n\n\t@aggregation({ type: \"sap.fe.macros.ConditionalSwitchProperty\", isDefault: true, multiple: true, singularName: \"switchProperty\" })\n\tswitchProperties!: ConditionalSwitchProperty[];\n\n\t/**\n\t * A function that returns the content to be rendered based on the evaluation of the switchProperties.\n\t * The function receives an object with the switchProperties as key-value pairs, the binding context, and the displayed control.\n\t * The function should return a single UI5 control.\n\t * @public\n\t */\n\t@property({ type: \"function\" })\n\tfactory?: Function;\n\n\tprivate _createDebounceTimer?: number;\n\n\tprivate fnBoundDebounced?: Function;\n\n\tconstructor(idOrSettings?: string | PropertiesOf<ConditionalSwitch>, settings?: PropertiesOf<ConditionalSwitch>, scope?: object) {\n\t\tsuper(idOrSettings, settings, scope);\n\t}\n\n\t/**\n\t * Time in milliseconds to debounce content creation calls.\n\t * We use a debounce function to avoid multiple calls in quick succession when multiple switchProperties are changed at once.\n\t * @private\n\t */\n\tprivate readonly DEBOUNCE_TIME = 200;\n\n\t/**\n\t * Debounced content creation to avoid multiple calls in quick succession.\n\t * This is useful when multiple switchProperties are changed at once.\n\t */\n\t_createContentDebounced(): void {\n\t\tif (this._createDebounceTimer !== undefined) {\n\t\t\tclearTimeout(this._createDebounceTimer);\n\t\t}\n\t\tthis._createDebounceTimer = window.setTimeout(() => {\n\t\t\tthis._createContent();\n\t\t}, this.DEBOUNCE_TIME);\n\t}\n\n\t/**\n\t * Creates the content based on the current switchProperties and the factory function.\n\t * If no factory function is provided, the content will be empty.\n\t */\n\tprivate _createContent(): void {\n\t\tif (this.factory) {\n\t\t\tconst switchProperties: object = this.switchProperties.reduce(\n\t\t\t\t(reducer: Record<string, unknown>, prop: ConditionalSwitchProperty): Record<string, unknown> => {\n\t\t\t\t\treducer[prop.key] = prop.value;\n\t\t\t\t\treturn reducer;\n\t\t\t\t},\n\t\t\t\t{} as Record<string, unknown>\n\t\t\t);\n\n\t\t\tconst oldContent = this.content;\n\t\t\tconst newContent = this.factory.call(this, switchProperties, this.getBindingContext(), this.content);\n\t\t\tif (newContent !== oldContent) {\n\t\t\t\toldContent?.destroy();\n\t\t\t\tthis.content = newContent;\n\t\t\t}\n\t\t\tif (this.ariaLabelledBy !== undefined) {\n\t\t\t\tthis.content?.addAssociation(\"ariaLabelledBy\", this.ariaLabelledBy.join(\",\"));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Overrides the addAssociation method to propagate ariaLabelledBy associations to the content.\n\t * @param sAssociationName The name of the association\n\t * @param sId The ID of the associated control or the control instance\n\t * @param bSuppressInvalidate Whether to suppress invalidation\n\t * @returns The current instance for method chaining\n\t */\n\toverride addAssociation(sAssociationName: string, sId: string | ManagedObject, bSuppressInvalidate?: boolean): this {\n\t\tsuper.addAssociation(sAssociationName, sId, bSuppressInvalidate);\n\t\tif (sAssociationName === \"ariaLabelledBy\" && this.content) {\n\t\t\tthis.content.addAssociation(\"ariaLabelledBy\", sId);\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Adds a ConditionalSwitchProperty to the 'switchProperties' aggregation and attaches a change listener to it.\n\t * The change listener will trigger a content re-creation when the property value changes.\n\t * @param conditionalSwitchProperty\n\t * @returns The current instance for method chaining.\n\t */\n\taddSwitchProperty(conditionalSwitchProperty: ConditionalSwitchProperty): this {\n\t\tsuper.addAggregation(\"switchProperties\", conditionalSwitchProperty);\n\t\tif (!this.fnBoundDebounced) {\n\t\t\t// Bind the debounced content creation method to the instance\n\t\t\tthis.fnBoundDebounced = this._createContentDebounced.bind(this);\n\t\t}\n\t\tconditionalSwitchProperty.attachEvent(\"valueChanged\", this.fnBoundDebounced);\n\t\tthis._createContentDebounced();\n\t\treturn this;\n\t}\n\n\t/**\n\t * Removes a ConditionalSwitchProperty from the 'switchProperties' aggregation and detaches its change listener.\n\t * @param vIndex The index, ID, or instance of the ConditionalSwitchProperty to remove.\n\t * @returns The removed ConditionalSwitchProperty instance or null if not found.\n\t */\n\tremoveSwitchProperty(vIndex: number | string | ConditionalSwitchProperty): ConditionalSwitchProperty | null {\n\t\tconst conditionalSwitchProperty = super.removeAggregation(\"switchProperties\", vIndex) as ConditionalSwitchProperty | null;\n\t\tif (conditionalSwitchProperty !== null && this.fnBoundDebounced) {\n\t\t\tconditionalSwitchProperty.detachEvent(\"valueChanged\", this.fnBoundDebounced);\n\t\t}\n\t\tthis._createContentDebounced();\n\t\treturn conditionalSwitchProperty;\n\t}\n\n\t// #region IFormContent\n\n\tgetFormDoNotAdjustWidth(): boolean {\n\t\treturn (this.content as unknown as IFormContent)?.getFormDoNotAdjustWidth?.() ?? false;\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"ConditionalSwitch-dbg.js"}