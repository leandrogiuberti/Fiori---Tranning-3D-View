{"version":3,"names":["_getRestrictions","aDefaultOps","aExpressionOps","filter","sElement","includes","_getDefaultOperators","sPropertyType","oDataClass","TypeMap","getDataTypeClassName","oBaseType","getBaseType","FilterOperatorUtil","getOperatorsForType","_isOperatorExcludedByManifest","operatorName","oSettings","operatorConfiguration","some","config","path","equals","exclude","_getEmptyOps","sType","result","notEmptyExcluded","emptyExcluded","push","ValueColor","mLibrary","CommonHelper","getPathToKey","oCtx","getObject","getParameterEditMode","target","oInterface","oModel","context","getModel","sPropertyPath","getPath","oAnnotations","fieldControl","immutable","computed","sEditMode","FieldEditMode","Editable","ReadOnly","$EnumMember","Disabled","$Path","getMetaPath","undefined","getMetaModelId","convertTypes","getId","isDesktop","Device","system","desktop","getTargetCollectionPath","navCollection","sPath","model","metaModel","isA","getMetaModel","aParts","split","sPart","entitySet","length","navigationCollection","slice","join","isPropertyFilterable","oDataField","skipHiddenFilters","sPropertyLocationPath","getLocationForPropertyPath","sProperty","replace","$Type","iLength","sCollectionPath","lastIndexOf","indexOf","gotoActionParameter","oContext","sPropertyName","CommonUtils","getParameterPath","getEntitySetName","oMetaModel","sEntityType","oEntityContainer","key","getActionPath","oAction","bReturnOnlyPath","sActionName","bCheckStaticValue","sContextPath","sEntityTypeName","sEntityName","sBindingParameter","getNavigationContext","ODataModelAnnotationHelper","getNavigationPath","bKeepProperty","bStartsWithEntityType","startsWith","part","shift","pop","getActionContext","getPathToBoundActionOverload","addSingleQuotes","sValue","bEscape","escapeSingleQuotes","generateFunction","sFuncName","sParams","i","arguments","sFunction","getHeaderDataPointLinkVisibility","isClickable","compileExpression","ifElse","constant","equal","pathInModel","notEqual","objectToString","oParams","iNumberOfKeys","Object","keys","sKey","removeEscapeCharacters","sExpression","stringifyObject","sStringified","oObject","JSON","parse","Array","isArray","oUI5Object","ui5object","assign","stringify","Log","error","Error","stringifyCustomData","vData","Context","parseCustomData","hasOwnProperty","getContextPath","oValue","getSortConditions","oPresentationVariant","sPresentationVariantPath","_isPresentationVariantAnnotation","SortOrder","aSortConditions","sorters","sEntityPath","forEach","oCondition","oSortProperty","oSorter","DynamicProperty","$AnnotationPath","Name","Property","$PropertyPath","name","descending","Descending","annotationPath","createPresentationPathContext","oPresentationContext","aPaths","createBindingContext","getPressHandlerForDataFieldForIBN","sContext","bNavigateWithConfirmationDialog","forContextMenu","mNavigationParameters","navigationContexts","RequiresContext","Inline","applicableProperty","notApplicableProperty","applicableContexts","SemanticObject","Action","notApplicableContexts","label","Label","Mapping","semanticObjectMapping","getEntitySet","ModelHelper","getEntitySetPath","getCriticalityCalculationBinding","sImprovementDirection","sDeviationLow","sToleranceLow","sAcceptanceLow","sAcceptanceHigh","sToleranceHigh","sDeviationHigh","sCriticalityExpression","Neutral","Infinity","Good","Critical","warning","getMeasureAttributeIndex","iMeasure","oChartAnnotations","isMicroChart","aMeasures","sMeasurePropertyPath","Measures","value","DynamicMeasures","bMeasureAttributeExists","aMeasureAttributes","MeasureAttributes","iMeasureAttribute","fnCheckMeasure","sMeasurePath","oMeasureAttribute","index","Measure","DynamicMeasure","bind","getMeasureAttribute","sChartAnnotationPath","requestObject","then","sMeasureAttributePath","DataPoint","getMeasureAttributeForMeasure","substring","isDraftParentEntityForContainment","oTargetCollectionContainsTarget","oTableMetadata","parentEntitySet","sParentEntitySetPath","oDraftRoot","oDraftNode","getDataFromTemplate","dataElement","splitPath","dataKey","connectedDataPath","connectedObject","template","Template","splitTemp","tempArray","trim","Data","notLastIndex","element","isLastIndex","templateInfo","lastIndex","getDelimiter","setMetaModel","getParameters","oParameterInfo","getParameterInfo","parameterProperties","buildActionWrapper","oThis","aParams","ref","handlerModule","handlerMethod","id","internalModelPath","oAdditionalParams","contexts","fn","getHiddenPathExpression","dataFieldAnnotations","hidden","getOperatorsForProperty","sEntitySetPath","bUseSemanticDateRange","settings","oFilterRestrictions","getFilterRestrictionsByPath","aEqualsOps","aSingleRangeOps","aSingleRangeDTBasicOps","aMultiRangeOps","aSearchExpressionOps","aBasicSemanticDateOps","SemanticDateOperators","getBasicSemanticDateOperations","bSemanticDateRange","aSemanticDateOps","customData","emptyOps","getFilterOperations","DefaultSemanticDateOperators","getSemanticDateOperations","aDefaultOperators","supportedOperators","extendedSemanticDateOperators","ExtendedSemanticDateOperators","restrictions","FilterAllowedExpressions","sAllowedExpression","getSpecificAllowedExpression","singleValueDateOps","getSingleValueDateOperations","aSingleValueOps","multiValueOperators","multiRangeOps","concat","getOperatorsForDateProperty","propertyType","getAIIcon","aiIcon","requiresIContext"],"sourceRoot":".","sources":["CommonHelper.ts"],"sourcesContent":["import type {\n\tChart,\n\tChartMeasureAttributeType,\n\tDataFieldForIntentBasedNavigation,\n\tDataFieldTypes,\n\tPresentationVariant\n} from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { UIAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport type { CompiledBindingToolkitExpression } from \"sap/fe/base/BindingToolkit\";\nimport { compileExpression, constant, equal, fn, ifElse, notEqual, pathInModel, ref } from \"sap/fe/base/BindingToolkit\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type { FilterSettings } from \"sap/fe/core/converters/ManifestSettings\";\n\nimport type { PropertyPath } from \"@sap-ux/vocabularies-types\";\nimport { aiIcon, type CustomAction } from \"sap/fe/core/converters/controls/Common/Action\";\nimport { convertTypes } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { isPropertyFilterable } from \"sap/fe/core/helpers/MetaModelFunction\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport type { ComputedAnnotationInterface } from \"sap/fe/core/templating/UIFormatters\";\nimport * as DefaultSemanticDateOperators from \"sap/fe/macros/filterBar/DefaultSemanticDateOperators\";\nimport ExtendedSemanticDateOperators from \"sap/fe/macros/filterBar/ExtendedSemanticDateOperators\";\nimport SemanticDateOperators from \"sap/fe/macros/filterBar/SemanticDateOperators\";\nimport mLibrary from \"sap/m/library\";\nimport Device from \"sap/ui/Device\";\nimport FilterOperatorUtil from \"sap/ui/mdc/condition/FilterOperatorUtil\";\nimport FieldEditMode from \"sap/ui/mdc/enums/FieldEditMode\";\nimport TypeMap from \"sap/ui/mdc/odata/v4/TypeMap\";\nimport Context from \"sap/ui/model/Context\";\nimport ODataModelAnnotationHelper from \"sap/ui/model/odata/v4/AnnotationHelper\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport type { MetaModelType } from \"../../../../../../types/metamodel_types\";\n\ntype MetaModelMeasure = {\n\t$PropertyPath: string;\n};\n\nfunction _getRestrictions(aDefaultOps: string[], aExpressionOps: string[]): string[] {\n\t// From the default set of Operators for the Base Type, select those that are defined in the Allowed Value.\n\t// In case that no operators are found, return undefined so that the default set is used.\n\treturn aDefaultOps.filter(function (sElement) {\n\t\treturn aExpressionOps.includes(sElement);\n\t});\n}\n\nfunction _getDefaultOperators(sPropertyType?: string): string[] {\n\t// mdc defines the full set of operations that are meaningful for each Edm Type\n\t// TODO Replace with model / internal way of retrieving the actual model type used for the property\n\tconst oDataClass = TypeMap.getDataTypeClassName(sPropertyType);\n\t// TODO need to pass proper formatOptions, constraints here\n\tconst oBaseType = TypeMap.getBaseType(oDataClass, {}, {});\n\treturn FilterOperatorUtil.getOperatorsForType(oBaseType);\n}\n\n/**\n * Helper function to check if an operator is excluded by manifest configuration.\n * @param operatorName The operator name to check\n * @param oSettings The settings object containing operator configuration\n * @returns True if the operator is excluded, false otherwise\n */\nfunction _isOperatorExcludedByManifest(operatorName: string, oSettings: FilterSettings | undefined): boolean {\n\tif (!oSettings?.operatorConfiguration) return false;\n\n\treturn oSettings.operatorConfiguration.some(\n\t\t(config) => config.path === \"key\" && config.equals === operatorName && config.exclude === true\n\t);\n}\n\n/**\n * Helper function to get Empty/NotEmpty operators with manifest configuration support.\n * @param sType The field type\n * @param oSettings The settings object containing operator configuration\n * @returns Array of Empty/NotEmpty operators if not excluded by manifest\n */\nfunction _getEmptyOps(sType: string, oSettings: FilterSettings | undefined): string[] {\n\t// Only return Empty/NotEmpty for date types\n\tif (sType !== \"Edm.Date\" && sType !== \"Edm.DateTimeOffset\") {\n\t\treturn [];\n\t}\n\n\tconst result: string[] = [];\n\n\t// Check manifest configuration and add operators in correct order (NotEmpty first to match test expectations)\n\tconst notEmptyExcluded = _isOperatorExcludedByManifest(\"NotEmpty\", oSettings);\n\tconst emptyExcluded = _isOperatorExcludedByManifest(\"Empty\", oSettings);\n\n\tif (!notEmptyExcluded) {\n\t\tresult.push(\"NotEmpty\");\n\t}\n\tif (!emptyExcluded) {\n\t\tresult.push(\"Empty\");\n\t}\n\n\treturn result;\n}\n\nconst ValueColor = mLibrary.ValueColor;\nconst CommonHelper = {\n\tgetPathToKey: function (oCtx: Context): object {\n\t\treturn oCtx.getObject();\n\t},\n\n\t/**\n\t * Determine if field is editable.\n\t * @param target Target instance\n\t * @param oInterface Interface instance\n\t * @returns A Binding Expression to determine if a field should be editable or not.\n\t */\n\tgetParameterEditMode: function (target: object, oInterface: ComputedAnnotationInterface): string {\n\t\tconst oModel = oInterface.context.getModel(),\n\t\t\tsPropertyPath = oInterface.context.getPath(),\n\t\t\toAnnotations = oModel.getObject(`${sPropertyPath}@`),\n\t\t\tfieldControl = oAnnotations[\"@com.sap.vocabularies.Common.v1.FieldControl\"],\n\t\t\timmutable = oAnnotations[\"@Org.OData.Core.V1.Immutable\"],\n\t\t\tcomputed = oAnnotations[\"@Org.OData.Core.V1.Computed\"];\n\n\t\tlet sEditMode: FieldEditMode | string = FieldEditMode.Editable;\n\n\t\tif (immutable || computed) {\n\t\t\tsEditMode = FieldEditMode.ReadOnly;\n\t\t} else if (fieldControl) {\n\t\t\tif (fieldControl.$EnumMember) {\n\t\t\t\tif (fieldControl.$EnumMember === \"com.sap.vocabularies.Common.v1.FieldControlType/ReadOnly\") {\n\t\t\t\t\tsEditMode = FieldEditMode.ReadOnly;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tfieldControl.$EnumMember === \"com.sap.vocabularies.Common.v1.FieldControlType/Inapplicable\" ||\n\t\t\t\t\tfieldControl.$EnumMember === \"com.sap.vocabularies.Common.v1.FieldControlType/Hidden\"\n\t\t\t\t) {\n\t\t\t\t\tsEditMode = FieldEditMode.Disabled;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (fieldControl.$Path) {\n\t\t\t\tsEditMode =\n\t\t\t\t\t\"{= %{\" +\n\t\t\t\t\tfieldControl.$Path +\n\t\t\t\t\t\"} < 3 ? (%{\" +\n\t\t\t\t\tfieldControl.$Path +\n\t\t\t\t\t\"} === 0 ? '\" +\n\t\t\t\t\tFieldEditMode.Disabled +\n\t\t\t\t\t\"' : '\" +\n\t\t\t\t\tFieldEditMode.ReadOnly +\n\t\t\t\t\t\"') : '\" +\n\t\t\t\t\tFieldEditMode.Editable +\n\t\t\t\t\t\"'}\";\n\t\t\t}\n\t\t}\n\n\t\treturn sEditMode;\n\t},\n\t/**\n\t * Get the complete metapath to the target.\n\t * @param target\n\t * @param oInterface\n\t * @returns The metapath\n\t */\n\tgetMetaPath: function (target: unknown, oInterface: ComputedAnnotationInterface): string | undefined {\n\t\treturn (oInterface && oInterface.context && oInterface.context.getPath()) || undefined;\n\t},\n\tgetMetaModelId: function (target: Context, oInterface: ComputedAnnotationInterface): string {\n\t\tconvertTypes(oInterface.context.getModel());\n\t\treturn oInterface.context.getModel().getId();\n\t},\n\tisDesktop: function (): boolean {\n\t\treturn Device.system.desktop === true;\n\t},\n\tgetTargetCollectionPath: function (context: Context, navCollection?: string): string {\n\t\tlet sPath = context.getPath();\n\t\tif (\n\t\t\t(context.getObject(\"$kind\") as unknown as string) === \"EntitySet\" ||\n\t\t\t(context.getObject(\"$ContainsTarget\") as unknown as boolean) === true\n\t\t) {\n\t\t\treturn sPath;\n\t\t}\n\n\t\tconst model = context.getModel() as ODataModel | ODataMetaModel;\n\t\tconst metaModel = model.isA<ODataMetaModel>(\"sap.ui.model.odata.v4.ODataMetaModel\") ? model : model.getMetaModel();\n\t\tsPath = metaModel.getMetaPath(sPath);\n\n\t\t//Supporting sPath of any format, either '/<entitySet>/<navigationCollection>' <OR> '/<entitySet>/$Type/<navigationCollection>'\n\t\tconst aParts = sPath.split(\"/\").filter(function (sPart: string): boolean {\n\t\t\treturn !!sPart && sPart != \"$Type\";\n\t\t}); //filter out empty strings and parts referring to '$Type'\n\t\tconst entitySet = `/${aParts[0]}`;\n\t\tif (aParts.length === 1) {\n\t\t\treturn entitySet;\n\t\t}\n\t\tconst navigationCollection = navCollection === undefined ? aParts.slice(1).join(\"/$NavigationPropertyBinding/\") : navCollection;\n\t\treturn `${entitySet}/$NavigationPropertyBinding/${navigationCollection}`; // used in gotoTargetEntitySet method in the same file\n\t},\n\n\tisPropertyFilterable: function (\n\t\tcontext: Context,\n\t\toDataField?: MetaModelType<DataFieldTypes>,\n\t\tskipHiddenFilters?: boolean\n\t): boolean | CompiledBindingToolkitExpression {\n\t\tconst oModel = context.getModel() as ODataMetaModel,\n\t\t\tsPropertyPath = context.getPath(),\n\t\t\t// LoacationPath would be the prefix of sPropertyPath, example: sPropertyPath = '/Customer/Set/Name' -> sPropertyLocationPath = '/Customer/Set'\n\t\t\tsPropertyLocationPath = CommonHelper.getLocationForPropertyPath(oModel, sPropertyPath),\n\t\t\tsProperty = sPropertyPath.replace(`${sPropertyLocationPath}/`, \"\");\n\n\t\tif (\n\t\t\toDataField &&\n\t\t\t(oDataField.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForAction\" ||\n\t\t\t\toDataField.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\")\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn isPropertyFilterable(oModel, sPropertyLocationPath, sProperty, skipHiddenFilters);\n\t},\n\n\tgetLocationForPropertyPath: function (oModel: ODataMetaModel, sPropertyPath: string): string {\n\t\tlet iLength;\n\t\tlet sCollectionPath = sPropertyPath.slice(0, sPropertyPath.lastIndexOf(\"/\"));\n\t\tif (oModel.getObject(`${sCollectionPath}/$kind`) === \"EntityContainer\") {\n\t\t\tiLength = sCollectionPath.length + 1;\n\t\t\tsCollectionPath = sPropertyPath.slice(iLength, sPropertyPath.indexOf(\"/\", iLength));\n\t\t}\n\t\treturn sCollectionPath;\n\t},\n\tgotoActionParameter: function (oContext: Context): string {\n\t\tconst sPath = oContext.getPath(),\n\t\t\tsPropertyName = oContext.getObject(`${sPath}/$Name`);\n\n\t\treturn CommonUtils.getParameterPath(sPath, sPropertyName);\n\t},\n\t/**\n\t * Returns the entity set name from the entity type name.\n\t * @param oMetaModel OData v4 metamodel instance\n\t * @param sEntityType EntityType of the actiom\n\t * @returns The EntitySet of the bound action\n\t * @private\n\t */\n\tgetEntitySetName: function (oMetaModel: ODataMetaModel, sEntityType: string): string | undefined {\n\t\tconst oEntityContainer = oMetaModel.getObject(\"/\");\n\t\tfor (const key in oEntityContainer) {\n\t\t\tif (typeof oEntityContainer[key] === \"object\" && oEntityContainer[key].$Type === sEntityType) {\n\t\t\t\treturn key;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t},\n\t/**\n\t * Returns the metamodel path correctly for bound actions if used with bReturnOnlyPath as true,\n\t * else returns an object which has 3 properties related to the action. They are the entity set name,\n\t * the $Path value of the OperationAvailable annotation and the binding parameter name. If\n\t * bCheckStaticValue is true, returns the static value of OperationAvailable annotation, if present.\n\t * e.g. for bound action someNameSpace.SomeBoundAction\n\t * of entity set SomeEntitySet, the string \"/SomeEntitySet/someNameSpace.SomeBoundAction\" is returned.\n\t * @param oAction The context object of the action\n\t * @param bReturnOnlyPath If false, additional info is returned along with metamodel path to the bound action\n\t * @param sActionName The name of the bound action of the form someNameSpace.SomeBoundAction\n\t * @param bCheckStaticValue If true, the static value of OperationAvailable is returned, if present\n\t * @returns The string or object as specified by bReturnOnlyPath\n\t * @private\n\t */\n\tgetActionPath: function (\n\t\toAction: Context,\n\t\tbReturnOnlyPath: boolean,\n\t\tsActionName?: string,\n\t\tbCheckStaticValue?: boolean\n\t):\n\t\t| string\n\t\t| {\n\t\t\t\tsContextPath: string;\n\t\t\t\tsProperty: string;\n\t\t\t\tsBindingParameter: string;\n\t\t  } {\n\t\tlet sContextPath = oAction.getPath().split(\"/@\")[0];\n\n\t\tsActionName = !sActionName ? oAction.getObject(oAction.getPath()) : sActionName;\n\n\t\tif (sActionName && sActionName.includes(\"(\")) {\n\t\t\t// action bound to another entity type\n\t\t\tsActionName = sActionName.split(\"(\")[0];\n\t\t} else if (oAction.getObject(sContextPath)) {\n\t\t\t// TODO: this logic sounds wrong, to be corrected\n\t\t\tconst sEntityTypeName = oAction.getObject(sContextPath).$Type;\n\t\t\tconst sEntityName = this.getEntitySetName(oAction.getModel(), sEntityTypeName);\n\t\t\tif (sEntityName) {\n\t\t\t\tsContextPath = `/${sEntityName}`;\n\t\t\t}\n\t\t} else {\n\t\t\treturn sContextPath;\n\t\t}\n\n\t\tif (bCheckStaticValue) {\n\t\t\treturn oAction.getObject(`${sContextPath}/${sActionName}@Org.OData.Core.V1.OperationAvailable`);\n\t\t}\n\t\tif (bReturnOnlyPath) {\n\t\t\treturn `${sContextPath}/${sActionName}`;\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tsContextPath: sContextPath,\n\t\t\t\tsProperty: oAction.getObject(`${sContextPath}/${sActionName}@Org.OData.Core.V1.OperationAvailable/$Path`),\n\t\t\t\tsBindingParameter: oAction.getObject(`${sContextPath}/${sActionName}/@$ui5.overload/0/$Parameter/0/$Name`)\n\t\t\t};\n\t\t}\n\t},\n\n\tgetNavigationContext: function (oContext: Context): string {\n\t\treturn ODataModelAnnotationHelper.getNavigationPath(oContext.getPath());\n\t},\n\n\t/**\n\t * Returns the path without the entity type (potentially first) and property (last) part (optional).\n\t * The result can be an empty string if it is a simple direct property.\n\t *\n\t * If and only if the given property path starts with a slash (/), it is considered that the entity type\n\t * is part of the path and will be stripped away.\n\t * @param sPropertyPath\n\t * @param bKeepProperty\n\t * @returns The navigation path\n\t */\n\tgetNavigationPath: function (sPropertyPath: string, bKeepProperty?: boolean): string {\n\t\tconst bStartsWithEntityType = sPropertyPath.startsWith(\"/\");\n\t\tconst aParts = sPropertyPath.split(\"/\").filter(function (part: string) {\n\t\t\treturn !!part;\n\t\t});\n\t\tif (bStartsWithEntityType) {\n\t\t\taParts.shift();\n\t\t}\n\t\tif (!bKeepProperty) {\n\t\t\taParts.pop();\n\t\t}\n\t\treturn aParts.join(\"/\");\n\t},\n\n\t/**\n\t * Returns the correct metamodel path for bound actions.\n\t *\n\t * Since this method is called irrespective of the action type, this will be applied to unbound actions.\n\t * In such a case, if an incorrect path is returned, it is ignored during templating.\n\t *\n\t * Example: for the bound action someNameSpace.SomeBoundAction of entity set SomeEntitySet,\n\t * the string \"/SomeEntitySet/someNameSpace.SomeBoundAction\" is returned.\n\t * @param oAction Context object for the action\n\t * @returns Correct metamodel path for bound and incorrect path for unbound actions\n\t * @private\n\t */\n\tgetActionContext: function (oAction: Context): string {\n\t\treturn CommonHelper.getActionPath(oAction, true) as string;\n\t},\n\t/**\n\t * Returns the metamodel path correctly for overloaded bound actions. For unbound actions,\n\t * the incorrect path is returned, but ignored during templating.\n\t * e.g. for bound action someNameSpace.SomeBoundAction of entity set SomeEntitySet,\n\t * the string \"/SomeEntitySet/someNameSpace.SomeBoundAction/@$ui5.overload/0\" is returned.\n\t * @param oAction The context object for the action\n\t * @returns The correct metamodel path for bound action overload and incorrect path for unbound actions\n\t * @private\n\t */\n\tgetPathToBoundActionOverload: function (oAction: Context): string {\n\t\tconst sPath = CommonHelper.getActionPath(oAction, true);\n\t\treturn `${sPath}/@$ui5.overload/0`;\n\t},\n\n\t/**\n\t * Returns the string with single quotes.\n\t * @param sValue Some string that needs to be converted into single quotes\n\t * @param [bEscape] Should the string be escaped beforehand\n\t * @returns - String with single quotes\n\t */\n\taddSingleQuotes: function (sValue: string, bEscape?: boolean): string {\n\t\tif (bEscape && sValue) {\n\t\t\tsValue = this.escapeSingleQuotes(sValue);\n\t\t}\n\t\treturn `'${sValue}'`;\n\t},\n\n\t/**\n\t * Returns the string with escaped single quotes.\n\t * @param sValue Some string that needs escaping of single quotes\n\t * @returns - String with escaped single quotes\n\t */\n\tescapeSingleQuotes: function (sValue: string): string {\n\t\treturn sValue.replace(/[']/g, \"\\\\'\");\n\t},\n\n\t/**\n\t * Returns the function string\n\t * The first argument of generateFunction is name of the generated function string.\n\t * Remaining arguments of generateFunction are arguments of the newly generated function string.\n\t * @param sFuncName Some string for the function name\n\t * @param args The remaining arguments\n\t * @returns - Function string depends on arguments passed\n\t */\n\tgenerateFunction: function (sFuncName: string, ...args: string[]): string {\n\t\tlet sParams = \"\";\n\t\tfor (let i = 0; i < args.length; i++) {\n\t\t\tsParams += args[i];\n\t\t\tif (i < args.length - 1) {\n\t\t\t\tsParams += \", \";\n\t\t\t}\n\t\t}\n\n\t\tlet sFunction = `${sFuncName}()`;\n\t\tif (sParams) {\n\t\t\tsFunction = `${sFuncName}(${sParams})`;\n\t\t}\n\t\treturn sFunction;\n\t},\n\t/*\n\t * Returns the visibility expression for datapoint title/link\n\t *\n\t * @function\n\t * @param {string} [path] annotation path of data point or Microchart\n\t * @param {boolean} [isClickable] true if link is visible\n\t * @returns {CompiledBindingToolkitExpression} visibilityExp Used to get the visibility binding for DataPoints title in the Header.\n\t *\n\t */\n\n\tgetHeaderDataPointLinkVisibility: function (path: string, isClickable: boolean): CompiledBindingToolkitExpression {\n\t\treturn compileExpression(\n\t\t\tifElse(\n\t\t\t\tconstant(isClickable),\n\t\t\t\tequal(pathInModel(`isHeaderDPLinkVisible/${path}`, \"internal\"), true),\n\t\t\t\tnotEqual(pathInModel(`isHeaderDPLinkVisible/${path}`, \"internal\"), true)\n\t\t\t)\n\t\t);\n\t},\n\n\t/**\n\t * Converts object to string(different from JSON.stringify or.toString).\n\t * @param oParams Some object\n\t * @returns - Object string\n\t */\n\tobjectToString: function (oParams: Record<string, unknown>): string {\n\t\tlet iNumberOfKeys = Object.keys(oParams).length,\n\t\t\tsParams = \"\";\n\n\t\tfor (const sKey in oParams) {\n\t\t\tlet sValue = oParams[sKey];\n\t\t\tif (sValue && typeof sValue === \"object\") {\n\t\t\t\tsValue = this.objectToString(sValue as Record<string, unknown>);\n\t\t\t}\n\t\t\tsParams += `${sKey}: ${sValue}`;\n\t\t\tif (iNumberOfKeys > 1) {\n\t\t\t\t--iNumberOfKeys;\n\t\t\t\tsParams += \", \";\n\t\t\t}\n\t\t}\n\n\t\treturn `{ ${sParams}}`;\n\t},\n\n\t/**\n\t * Removes escape characters (\\) from an expression.\n\t * @param sExpression An expression with escape characters\n\t * @returns Expression string without escape characters or undefined\n\t */\n\tremoveEscapeCharacters: function (sExpression?: string): string | undefined {\n\t\treturn sExpression ? sExpression.replace(/\\\\?\\\\([{}])/g, \"$1\") : undefined;\n\t},\n\n\t/**\n\t * Makes updates to a stringified object so that it works properly in a template by adding ui5Object:true.\n\t * @param sStringified\n\t * @returns The updated string representation of the object\n\t */\n\tstringifyObject: function (sStringified: string): string | undefined {\n\t\tif (!sStringified || sStringified === \"{}\") {\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\tconst oObject = JSON.parse(sStringified);\n\t\t\tif (typeof oObject === \"object\" && !Array.isArray(oObject)) {\n\t\t\t\tconst oUI5Object = {\n\t\t\t\t\tui5object: true\n\t\t\t\t};\n\t\t\t\tObject.assign(oUI5Object, oObject);\n\t\t\t\treturn JSON.stringify(oUI5Object);\n\t\t\t} else {\n\t\t\t\tconst sType = Array.isArray(oObject) ? \"Array\" : typeof oObject;\n\t\t\t\tLog.error(`Unexpected object type in stringifyObject (${sType}) - only works with object`);\n\t\t\t\tthrow new Error(\"stringifyObject only works with objects!\");\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Create a string representation of the given data, taking care that it is not treated as a binding expression.\n\t * @param vData The data to stringify\n\t * @returns The string representation of the data.\n\t */\n\tstringifyCustomData: function (vData: object | string | undefined): string {\n\t\tconst oObject: { ui5object: true; customData?: unknown } = {\n\t\t\tui5object: true\n\t\t};\n\t\toObject[\"customData\"] = vData instanceof Context ? vData.getObject() : vData;\n\t\treturn JSON.stringify(oObject);\n\t},\n\n\t/**\n\t * Parses the given data, potentially unwraps the data.\n\t * @param vData The data to parse\n\t * @param vData.ui5object\n\t * @param vData.customData\n\t * @returns The result of the data parsing\n\t */\n\tparseCustomData: function (vData?: string | { ui5object: true; customData?: unknown }): unknown {\n\t\tvData = typeof vData === \"string\" ? JSON.parse(vData) : vData;\n\t\tif (vData && vData.hasOwnProperty(\"customData\")) {\n\t\t\treturn (vData as { ui5object: true; customData?: unknown })[\"customData\"];\n\t\t}\n\t\treturn vData;\n\t},\n\tgetContextPath: function (oValue: unknown, oInterface: ComputedAnnotationInterface): string {\n\t\tconst sPath = oInterface && oInterface.context && oInterface.context.getPath();\n\t\treturn sPath[sPath.length - 1] === \"/\" ? sPath.slice(0, -1) : sPath;\n\t},\n\t/**\n\t * Returns a stringified JSON object containing  Presentation Variant sort conditions.\n\t * @param oContext\n\t * @param oContext.getPath\n\t * @param oContext.getModel\n\t * @param oPresentationVariant Presentation variant Annotation\n\t * @param sPresentationVariantPath\n\t * @returns Stringified JSON object\n\t */\n\tgetSortConditions: function (\n\t\toContext: { getPath(num: number): string; getModel(num: number): ODataMetaModel },\n\t\toPresentationVariant: MetaModelType<PresentationVariant>,\n\t\tsPresentationVariantPath: string\n\t): string | undefined {\n\t\tif (\n\t\t\toPresentationVariant &&\n\t\t\tCommonHelper._isPresentationVariantAnnotation(sPresentationVariantPath) &&\n\t\t\toPresentationVariant.SortOrder\n\t\t) {\n\t\t\tconst aSortConditions: { sorters: { name?: string; descending?: boolean }[] } = {\n\t\t\t\tsorters: []\n\t\t\t};\n\n\t\t\tconst sEntityPath = oContext.getPath(0).split(\"@\")[0];\n\t\t\toPresentationVariant.SortOrder.forEach(function (oCondition = {}) {\n\t\t\t\tlet oSortProperty: string | undefined;\n\t\t\t\tconst oSorter: { name?: string; descending?: boolean } = {};\n\t\t\t\tif (oCondition.DynamicProperty) {\n\t\t\t\t\toSortProperty = oContext.getModel(0).getObject(sEntityPath + oCondition.DynamicProperty.$AnnotationPath)?.Name;\n\t\t\t\t} else if (oCondition.Property) {\n\t\t\t\t\toSortProperty = oCondition.Property.$PropertyPath;\n\t\t\t\t}\n\t\t\t\tif (oSortProperty) {\n\t\t\t\t\toSorter.name = oSortProperty;\n\t\t\t\t\toSorter.descending = !!oCondition.Descending;\n\t\t\t\t\taSortConditions.sorters.push(oSorter);\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(\"Please define the right path to the sort property\");\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn JSON.stringify(aSortConditions);\n\t\t}\n\t\treturn undefined;\n\t},\n\t_isPresentationVariantAnnotation: function (annotationPath: string): boolean {\n\t\treturn (\n\t\t\tannotationPath.includes(`@${UIAnnotationTerms.PresentationVariant}`) ||\n\t\t\tannotationPath.includes(`@${UIAnnotationTerms.SelectionPresentationVariant}`)\n\t\t);\n\t},\n\tcreatePresentationPathContext: function (oPresentationContext: Context): Context {\n\t\tconst aPaths = oPresentationContext.getPath().split(\"@\") || [];\n\t\tconst oModel = oPresentationContext.getModel();\n\t\tif (aPaths.length && aPaths[aPaths.length - 1].includes(\"com.sap.vocabularies.UI.v1.SelectionPresentationVariant\")) {\n\t\t\tconst sPath = oPresentationContext.getPath().split(\"/PresentationVariant\")[0];\n\t\t\treturn oModel.createBindingContext(`${sPath}@sapui.name`);\n\t\t}\n\t\treturn oModel.createBindingContext(`${oPresentationContext.getPath()}@sapui.name`);\n\t},\n\tgetPressHandlerForDataFieldForIBN: function (\n\t\toDataField: DataFieldForIntentBasedNavigation,\n\t\tsContext?: string,\n\t\tbNavigateWithConfirmationDialog?: boolean,\n\t\tforContextMenu = false\n\t): string | undefined {\n\t\tif (!oDataField) return undefined;\n\t\tconst mNavigationParameters: {\n\t\t\tnavigationContexts?: string;\n\t\t\tlabel?: string;\n\t\t\tapplicableContexts?: string;\n\t\t\tnotApplicableContexts?: string;\n\t\t\tsemanticObjectMapping?: string;\n\t\t} = {\n\t\t\tnavigationContexts: sContext ? sContext : \"${$source>/}.getBindingContext()\"\n\t\t};\n\t\tif (oDataField.RequiresContext && !oDataField.Inline && bNavigateWithConfirmationDialog) {\n\t\t\tconst applicableProperty = !forContextMenu ? \"aApplicable\" : \"aApplicableForContextMenu\";\n\t\t\tconst notApplicableProperty = !forContextMenu ? \"aNotApplicable\" : \"aNotApplicableForContextMenu\";\n\t\t\tmNavigationParameters.applicableContexts = `\\${internal>ibn/${oDataField.SemanticObject}-${oDataField.Action}/${applicableProperty}/}`;\n\t\t\tmNavigationParameters.notApplicableContexts = `\\${internal>ibn/${oDataField.SemanticObject}-${oDataField.Action}/${notApplicableProperty}/}`;\n\t\t\tmNavigationParameters.label = this.addSingleQuotes(oDataField.Label as string, true);\n\t\t}\n\t\tif (oDataField.Mapping) {\n\t\t\tmNavigationParameters.semanticObjectMapping = this.addSingleQuotes(JSON.stringify(oDataField.Mapping));\n\t\t}\n\t\treturn this.generateFunction(\n\t\t\tbNavigateWithConfirmationDialog ? \"._intentBasedNavigation.navigateWithConfirmationDialog\" : \"._intentBasedNavigation.navigate\",\n\t\t\tthis.addSingleQuotes(oDataField.SemanticObject as unknown as string),\n\t\t\tthis.addSingleQuotes(oDataField.Action as unknown as string),\n\t\t\tthis.objectToString(mNavigationParameters),\n\t\t\t\"${$source>/}\"\n\t\t);\n\t},\n\tgetEntitySet: function (oContext: Context): string {\n\t\tconst sPath = oContext.getPath();\n\t\treturn ModelHelper.getEntitySetPath(sPath);\n\t},\n\n\t/**\n\t * Method to do the calculation of criticality in case CriticalityCalculation present in the annotation\n\t *\n\t * The calculation is done by comparing a value to the threshold values relevant for the specified improvement direction.\n\t * For improvement direction Target, the criticality is calculated using both low and high threshold values. It will be\n\t *\n\t * - Positive if the value is greater than or equal to AcceptanceRangeLowValue and lower than or equal to AcceptanceRangeHighValue\n\t * - Neutral if the value is greater than or equal to ToleranceRangeLowValue and lower than AcceptanceRangeLowValue OR greater than AcceptanceRangeHighValue and lower than or equal to ToleranceRangeHighValue\n\t * - Critical if the value is greater than or equal to DeviationRangeLowValue and lower than ToleranceRangeLowValue OR greater than ToleranceRangeHighValue and lower than or equal to DeviationRangeHighValue\n\t * - Negative if the value is lower than DeviationRangeLowValue or greater than DeviationRangeHighValue\n\t *\n\t * For improvement direction Minimize, the criticality is calculated using the high threshold values. It is\n\t * - Positive if the value is lower than or equal to AcceptanceRangeHighValue\n\t * - Neutral if the value is greater than AcceptanceRangeHighValue and lower than or equal to ToleranceRangeHighValue\n\t * - Critical if the value is greater than ToleranceRangeHighValue and lower than or equal to DeviationRangeHighValue\n\t * - Negative if the value is greater than DeviationRangeHighValue\n\t *\n\t * For improvement direction Maximize, the criticality is calculated using the low threshold values. It is\n\t *\n\t * - Positive if the value is greater than or equal to AcceptanceRangeLowValue\n\t * - Neutral if the value is less than AcceptanceRangeLowValue and greater than or equal to ToleranceRangeLowValue\n\t * - Critical if the value is lower than ToleranceRangeLowValue and greater than or equal to DeviationRangeLowValue\n\t * - Negative if the value is lower than DeviationRangeLowValue\n\t *\n\t * Thresholds are optional. For unassigned values, defaults are determined in this order:\n\t *\n\t * - For DeviationRange, an omitted LowValue translates into the smallest possible number (-INF), an omitted HighValue translates into the largest possible number (+INF)\n\t * - For ToleranceRange, an omitted LowValue will be initialized with DeviationRangeLowValue, an omitted HighValue will be initialized with DeviationRangeHighValue\n\t * - For AcceptanceRange, an omitted LowValue will be initialized with ToleranceRangeLowValue, an omitted HighValue will be initialized with ToleranceRangeHighValue.\n\t * @param sImprovementDirection ImprovementDirection to be used for creating the criticality binding\n\t * @param sValue Value from Datapoint to be measured\n\t * @param sDeviationLow ExpressionBinding for Lower Deviation level\n\t * @param sToleranceLow ExpressionBinding for Lower Tolerance level\n\t * @param sAcceptanceLow ExpressionBinding for Lower Acceptance level\n\t * @param sAcceptanceHigh ExpressionBinding for Higher Acceptance level\n\t * @param sToleranceHigh ExpressionBinding for Higher Tolerance level\n\t * @param sDeviationHigh ExpressionBinding for Higher Deviation level\n\t * @returns Returns criticality calculation as expression binding\n\t */\n\tgetCriticalityCalculationBinding: function (\n\t\tsImprovementDirection: string,\n\t\tsValue: string,\n\t\tsDeviationLow: string | number,\n\t\tsToleranceLow: string | number,\n\t\tsAcceptanceLow: string | number,\n\t\tsAcceptanceHigh: string | number,\n\t\tsToleranceHigh: string | number,\n\t\tsDeviationHigh: string | number\n\t): string {\n\t\tlet sCriticalityExpression: typeof ValueColor | string = ValueColor.Neutral; // Default Criticality State\n\n\t\tsValue = `%${sValue}`;\n\n\t\t// Setting Unassigned Values\n\t\tsDeviationLow = sDeviationLow || -Infinity;\n\t\tsToleranceLow = sToleranceLow || sDeviationLow;\n\t\tsAcceptanceLow = sAcceptanceLow || sToleranceLow;\n\t\tsDeviationHigh = sDeviationHigh || Infinity;\n\t\tsToleranceHigh = sToleranceHigh || sDeviationHigh;\n\t\tsAcceptanceHigh = sAcceptanceHigh || sToleranceHigh;\n\n\t\t// Dealing with Decimal and Path based bingdings\n\t\tsDeviationLow = sDeviationLow && (+sDeviationLow ? +sDeviationLow : `%${sDeviationLow}`);\n\t\tsToleranceLow = sToleranceLow && (+sToleranceLow ? +sToleranceLow : `%${sToleranceLow}`);\n\t\tsAcceptanceLow = sAcceptanceLow && (+sAcceptanceLow ? +sAcceptanceLow : `%${sAcceptanceLow}`);\n\t\tsAcceptanceHigh = sAcceptanceHigh && (+sAcceptanceHigh ? +sAcceptanceHigh : `%${sAcceptanceHigh}`);\n\t\tsToleranceHigh = sToleranceHigh && (+sToleranceHigh ? +sToleranceHigh : `%${sToleranceHigh}`);\n\t\tsDeviationHigh = sDeviationHigh && (+sDeviationHigh ? +sDeviationHigh : `%${sDeviationHigh}`);\n\n\t\t// Creating runtime expression binding from criticality calculation for Criticality State\n\t\tif (sImprovementDirection.includes(\"Minimize\")) {\n\t\t\tsCriticalityExpression =\n\t\t\t\t\"{= \" +\n\t\t\t\tsValue +\n\t\t\t\t\" <= \" +\n\t\t\t\tsAcceptanceHigh +\n\t\t\t\t\" ? '\" +\n\t\t\t\tValueColor.Good +\n\t\t\t\t\"' : \" +\n\t\t\t\tsValue +\n\t\t\t\t\" <= \" +\n\t\t\t\tsToleranceHigh +\n\t\t\t\t\" ? '\" +\n\t\t\t\tValueColor.Neutral +\n\t\t\t\t\"' : \" +\n\t\t\t\t\"(\" +\n\t\t\t\tsDeviationHigh +\n\t\t\t\t\" && \" +\n\t\t\t\tsValue +\n\t\t\t\t\" <= \" +\n\t\t\t\tsDeviationHigh +\n\t\t\t\t\") ? '\" +\n\t\t\t\tValueColor.Critical +\n\t\t\t\t\"' : '\" +\n\t\t\t\tValueColor.Error +\n\t\t\t\t\"' }\";\n\t\t} else if (sImprovementDirection.includes(\"Maximize\")) {\n\t\t\tsCriticalityExpression =\n\t\t\t\t\"{= \" +\n\t\t\t\tsValue +\n\t\t\t\t\" >= \" +\n\t\t\t\tsAcceptanceLow +\n\t\t\t\t\" ? '\" +\n\t\t\t\tValueColor.Good +\n\t\t\t\t\"' : \" +\n\t\t\t\tsValue +\n\t\t\t\t\" >= \" +\n\t\t\t\tsToleranceLow +\n\t\t\t\t\" ? '\" +\n\t\t\t\tValueColor.Neutral +\n\t\t\t\t\"' : \" +\n\t\t\t\t\"(\" +\n\t\t\t\tsDeviationLow +\n\t\t\t\t\" && \" +\n\t\t\t\tsValue +\n\t\t\t\t\" >= \" +\n\t\t\t\tsDeviationLow +\n\t\t\t\t\") ? '\" +\n\t\t\t\tValueColor.Critical +\n\t\t\t\t\"' : '\" +\n\t\t\t\tValueColor.Error +\n\t\t\t\t\"' }\";\n\t\t} else if (sImprovementDirection.includes(\"Target\")) {\n\t\t\tsCriticalityExpression =\n\t\t\t\t\"{= (\" +\n\t\t\t\tsValue +\n\t\t\t\t\" <= \" +\n\t\t\t\tsAcceptanceHigh +\n\t\t\t\t\" && \" +\n\t\t\t\tsValue +\n\t\t\t\t\" >= \" +\n\t\t\t\tsAcceptanceLow +\n\t\t\t\t\") ? '\" +\n\t\t\t\tValueColor.Good +\n\t\t\t\t\"' : \" +\n\t\t\t\t\"((\" +\n\t\t\t\tsValue +\n\t\t\t\t\" >= \" +\n\t\t\t\tsToleranceLow +\n\t\t\t\t\" && \" +\n\t\t\t\tsValue +\n\t\t\t\t\" < \" +\n\t\t\t\tsAcceptanceLow +\n\t\t\t\t\") || (\" +\n\t\t\t\tsValue +\n\t\t\t\t\" > \" +\n\t\t\t\tsAcceptanceHigh +\n\t\t\t\t\" && \" +\n\t\t\t\tsValue +\n\t\t\t\t\" <= \" +\n\t\t\t\tsToleranceHigh +\n\t\t\t\t\")) ? '\" +\n\t\t\t\tValueColor.Neutral +\n\t\t\t\t\"' : \" +\n\t\t\t\t\"((\" +\n\t\t\t\tsDeviationLow +\n\t\t\t\t\" && (\" +\n\t\t\t\tsValue +\n\t\t\t\t\" >= \" +\n\t\t\t\tsDeviationLow +\n\t\t\t\t\") && (\" +\n\t\t\t\tsValue +\n\t\t\t\t\" < \" +\n\t\t\t\tsToleranceLow +\n\t\t\t\t\")) || ((\" +\n\t\t\t\tsValue +\n\t\t\t\t\" > \" +\n\t\t\t\tsToleranceHigh +\n\t\t\t\t\") && \" +\n\t\t\t\tsDeviationHigh +\n\t\t\t\t\" && (\" +\n\t\t\t\tsValue +\n\t\t\t\t\" <= \" +\n\t\t\t\tsDeviationHigh +\n\t\t\t\t\"))) ? '\" +\n\t\t\t\tValueColor.Critical +\n\t\t\t\t\"' : '\" +\n\t\t\t\tValueColor.Error +\n\t\t\t\t\"' }\";\n\t\t} else {\n\t\t\tLog.warning(\"Case not supported, returning the default Value Neutral\");\n\t\t}\n\n\t\treturn sCriticalityExpression;\n\t},\n\t/**\n\t * To fetch measure attribute index.\n\t * @param iMeasure Chart Annotations\n\t * @param oChartAnnotations Chart Annotations\n\t * @param isMicroChart Whether this is a micro chart\n\t * @returns MeasureAttribute index.\n\t * @private\n\t */\n\tgetMeasureAttributeIndex: function (iMeasure: number, oChartAnnotations: MetaModelType<Chart> | Chart, isMicroChart?: boolean): number {\n\t\tlet aMeasures, sMeasurePropertyPath;\n\t\tif (oChartAnnotations?.Measures?.length && oChartAnnotations?.Measures?.length > 0) {\n\t\t\taMeasures = oChartAnnotations.Measures;\n\t\t\tsMeasurePropertyPath = isMicroChart\n\t\t\t\t? (aMeasures[iMeasure] as PropertyPath).value\n\t\t\t\t: (aMeasures[iMeasure] as MetaModelMeasure).$PropertyPath;\n\t\t} else if (oChartAnnotations?.DynamicMeasures?.length && oChartAnnotations?.DynamicMeasures?.length > 0) {\n\t\t\taMeasures = (oChartAnnotations as MetaModelType<Chart>).DynamicMeasures;\n\t\t\tsMeasurePropertyPath = aMeasures?.[iMeasure].$AnnotationPath;\n\t\t}\n\t\tlet bMeasureAttributeExists;\n\t\tconst aMeasureAttributes = oChartAnnotations.MeasureAttributes;\n\t\tlet iMeasureAttribute = -1;\n\t\tconst fnCheckMeasure = function (\n\t\t\tsMeasurePath: string | undefined,\n\t\t\toMeasureAttribute: MetaModelType<ChartMeasureAttributeType> | ChartMeasureAttributeType,\n\t\t\tindex: number\n\t\t): boolean {\n\t\t\tif (oMeasureAttribute) {\n\t\t\t\tconst path = isMicroChart\n\t\t\t\t\t? (oMeasureAttribute as ChartMeasureAttributeType).Measure?.value\n\t\t\t\t\t: (oMeasureAttribute as MetaModelType<ChartMeasureAttributeType>).Measure?.$PropertyPath;\n\t\t\t\tif (oMeasureAttribute.Measure && path === sMeasurePath) {\n\t\t\t\t\tiMeasureAttribute = index;\n\t\t\t\t\treturn true;\n\t\t\t\t} else if (\n\t\t\t\t\toMeasureAttribute.DynamicMeasure &&\n\t\t\t\t\t(oMeasureAttribute as MetaModelType<ChartMeasureAttributeType>)?.DynamicMeasure?.$AnnotationPath === sMeasurePath\n\t\t\t\t) {\n\t\t\t\t\tiMeasureAttribute = index;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tif (aMeasureAttributes) {\n\t\t\tbMeasureAttributeExists = aMeasureAttributes.some(fnCheckMeasure.bind(null, sMeasurePropertyPath));\n\t\t}\n\t\treturn bMeasureAttributeExists && iMeasureAttribute > -1 ? iMeasureAttribute : -1;\n\t},\n\n\tgetMeasureAttribute: async function (oContext: Context): Promise<string | undefined> {\n\t\tconst oMetaModel = oContext.getModel() as ODataMetaModel,\n\t\t\tsChartAnnotationPath = oContext.getPath();\n\t\treturn oMetaModel.requestObject(sChartAnnotationPath).then(function (oChartAnnotations: MetaModelType<Chart>) {\n\t\t\tconst aMeasureAttributes = oChartAnnotations.MeasureAttributes,\n\t\t\t\tiMeasureAttribute = CommonHelper.getMeasureAttributeIndex(0, oChartAnnotations);\n\t\t\tconst sMeasureAttributePath =\n\t\t\t\tiMeasureAttribute > -1 && aMeasureAttributes?.[iMeasureAttribute] && aMeasureAttributes[iMeasureAttribute].DataPoint\n\t\t\t\t\t? `${sChartAnnotationPath}/MeasureAttributes/${iMeasureAttribute}/`\n\t\t\t\t\t: undefined;\n\t\t\tif (sMeasureAttributePath === undefined) {\n\t\t\t\tLog.warning(\"DataPoint missing for the measure\");\n\t\t\t}\n\t\t\treturn sMeasureAttributePath ? `${sMeasureAttributePath}DataPoint/$AnnotationPath/` : sMeasureAttributePath;\n\t\t});\n\t},\n\t/**\n\t * This function returns the measureAttribute for the measure.\n\t * @param oContext Context to the measure annotation\n\t * @returns Path to the measureAttribute of the measure\n\t */\n\tgetMeasureAttributeForMeasure: function (oContext: Context): string | undefined {\n\t\tconst oMetaModel = oContext.getModel() as ODataMetaModel,\n\t\t\tsMeasurePath = oContext.getPath(),\n\t\t\tsChartAnnotationPath = sMeasurePath.substring(0, sMeasurePath.lastIndexOf(\"Measure\")),\n\t\t\tiMeasure = sMeasurePath.replace(/.*\\//, \"\");\n\n\t\tconst oChartAnnotations = oMetaModel.getObject(sChartAnnotationPath);\n\t\tconst aMeasureAttributes = oChartAnnotations.MeasureAttributes,\n\t\t\tiMeasureAttribute = CommonHelper.getMeasureAttributeIndex(iMeasure as unknown as number, oChartAnnotations);\n\t\tconst sMeasureAttributePath =\n\t\t\tiMeasureAttribute > -1 && aMeasureAttributes[iMeasureAttribute] && aMeasureAttributes[iMeasureAttribute].DataPoint\n\t\t\t\t? `${sChartAnnotationPath}MeasureAttributes/${iMeasureAttribute}/`\n\t\t\t\t: undefined;\n\t\tif (sMeasureAttributePath === undefined) {\n\t\t\tLog.warning(\"DataPoint missing for the measure\");\n\t\t}\n\t\treturn sMeasureAttributePath ? `${sMeasureAttributePath}DataPoint/$AnnotationPath/` : sMeasureAttributePath;\n\t},\n\t/**\n\t * Method to determine if the contained navigation property has a draft root/node parent entitySet.\n\t * @param oTargetCollectionContainsTarget Target collection has ContainsTarget property\n\t * @param oTableMetadata Table metadata for which draft support shall be checked\n\t * @param oTableMetadata.parentEntitySet\n\t * @param oTableMetadata.parentEntitySet.oModel\n\t * @param oTableMetadata.parentEntitySet.sPath\n\t * @returns Returns true if draft\n\t */\n\tisDraftParentEntityForContainment: function (\n\t\toTargetCollectionContainsTarget: object,\n\t\toTableMetadata: {\n\t\t\tparentEntitySet?: {\n\t\t\t\toModel: ODataMetaModel;\n\t\t\t\tsPath?: string;\n\t\t\t};\n\t\t}\n\t): boolean {\n\t\tif (oTargetCollectionContainsTarget) {\n\t\t\tif (oTableMetadata && oTableMetadata.parentEntitySet && oTableMetadata.parentEntitySet.sPath) {\n\t\t\t\tconst sParentEntitySetPath = oTableMetadata.parentEntitySet.sPath;\n\t\t\t\tconst oDraftRoot = oTableMetadata.parentEntitySet.oModel.getObject(\n\t\t\t\t\t`${sParentEntitySetPath}@com.sap.vocabularies.Common.v1.DraftRoot`\n\t\t\t\t);\n\t\t\t\tconst oDraftNode = oTableMetadata.parentEntitySet.oModel.getObject(\n\t\t\t\t\t`${sParentEntitySetPath}@com.sap.vocabularies.Common.v1.DraftNode`\n\t\t\t\t);\n\t\t\t\tif (oDraftRoot || oDraftNode) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\t/**\n\t * Ensures the data is processed as defined in the template.\n\t * Since the property Data is of the type 'object', it may not be in the same order as required by the template.\n\t * @param dataElement The data that is currently being processed.\n\t * @returns The correct path according to the template.\n\t */\n\tgetDataFromTemplate: function (dataElement: Context): string {\n\t\tconst splitPath = dataElement.getPath().split(\"/\");\n\t\tconst dataKey = splitPath[splitPath.length - 1];\n\t\tconst connectedDataPath = `/${splitPath.slice(1, -2).join(\"/\")}/@`;\n\t\tconst connectedObject = dataElement.getObject(connectedDataPath);\n\t\tconst template = connectedObject.Template;\n\t\tconst splitTemp = template.split(\"}\");\n\t\tconst tempArray = [];\n\t\tfor (let i = 0; i < splitTemp.length - 1; i++) {\n\t\t\tconst key = splitTemp[i].split(\"{\")[1].trim();\n\t\t\ttempArray.push(key);\n\t\t}\n\t\tObject.keys(connectedObject.Data).forEach(function (sKey: string) {\n\t\t\tif (sKey.startsWith(\"$\")) {\n\t\t\t\tdelete connectedObject.Data[sKey];\n\t\t\t}\n\t\t});\n\t\tconst index = Object.keys(connectedObject.Data).indexOf(dataKey);\n\t\treturn `/${splitPath.slice(1, -2).join(\"/\")}/Data/${tempArray[index]}`;\n\t},\n\n\t/**\n\t * Checks if the end of the template has been reached.\n\t * @param target The target of the connected fields.\n\t * @param target.Template\n\t * @param target.Data\n\t * @param element The element that is currently being processed.\n\t * @returns True or False (depending on the template index).\n\t */\n\tnotLastIndex: function (target: { Template: string; Data: Record<string, unknown> }, element: object): boolean {\n\t\tconst template = target.Template;\n\t\tconst splitTemp = template.split(\"}\");\n\t\tconst tempArray: string[] = [];\n\t\tlet isLastIndex = false;\n\t\tfor (let i = 0; i < splitTemp.length - 1; i++) {\n\t\t\tconst dataKey = splitTemp[i].split(\"{\")[1].trim();\n\t\t\ttempArray.push(dataKey);\n\t\t}\n\n\t\ttempArray.forEach(function (templateInfo: string) {\n\t\t\tconst lastIndex = tempArray.length - 1;\n\t\t\tif (target.Data[templateInfo] === element && tempArray.indexOf(templateInfo) < lastIndex) {\n\t\t\t\tisLastIndex = true;\n\t\t\t}\n\t\t});\n\t\treturn isLastIndex;\n\t},\n\n\t/**\n\t * Determines the delimiter from the template.\n\t * @param template The template string.\n\t * @returns The delimiter in the template string.\n\t */\n\tgetDelimiter: function (template: string): string {\n\t\treturn template.split(\"}\")[1].split(\"{\")[0].trim();\n\t},\n\n\toMetaModel: undefined as ODataMetaModel | undefined,\n\tsetMetaModel: function (oMetaModel: ODataMetaModel): void {\n\t\tthis.oMetaModel = oMetaModel;\n\t},\n\n\tgetMetaModel: function (): ODataMetaModel {\n\t\treturn this.oMetaModel!;\n\t},\n\n\tgetParameters: function (sPath: string, metaModel?: ODataMetaModel): string[] {\n\t\tif (metaModel) {\n\t\t\tconst oParameterInfo = CommonUtils.getParameterInfo(metaModel, sPath);\n\t\t\tif (oParameterInfo.parameterProperties) {\n\t\t\t\treturn Object.keys(oParameterInfo.parameterProperties);\n\t\t\t}\n\t\t}\n\t\treturn [];\n\t},\n\n\t/**\n\t * Build an expression calling an action handler via the FPM helper's actionWrapper function\n\t *\n\t * This function assumes that the 'FPM.actionWrapper()' function is available at runtime.\n\t * @param oAction Action metadata\n\t * @param oAction.handlerModule Module containing the action handler method\n\t * @param oAction.handlerMethod Action handler method name\n\t * @param [oThis] `this` (if the function is called from a macro)\n\t * @param oThis.id The table's ID\n\t * @param forContextMenu Indicates if the action appears in the context menu. If false, the action appears in the table toolbar\n\t * @returns The action wrapper binding\texpression\n\t */\n\tbuildActionWrapper: function (\n\t\toAction: CustomAction,\n\t\toThis: { id?: string } | undefined,\n\t\tforContextMenu = false\n\t): CompiledBindingToolkitExpression {\n\t\tconst aParams: unknown[] = [ref(\"$event\"), oAction.handlerModule, oAction.handlerMethod];\n\n\t\tif (oThis && oThis.id) {\n\t\t\tconst internalModelPath = !forContextMenu ? \"${internal>selectedContexts}\" : \"${internal>contextmenu/selectedContexts}\";\n\t\t\tconst oAdditionalParams = { contexts: ref(internalModelPath) };\n\t\t\taParams.push(oAdditionalParams);\n\t\t}\n\t\treturn compileExpression(fn(\"FPM.actionWrapper\", aParams));\n\t},\n\t/**\n\t * Returns the value whether or not the element should be visible depending on the Hidden annotation.\n\t * It is inverted as the UI elements have a visible property instead of a hidden one.\n\t * @param dataFieldAnnotations The dataField object\n\t * @returns A path or a Boolean\n\t */\n\tgetHiddenPathExpression: function (dataFieldAnnotations: Record<string, { $Path?: string }>): string | boolean {\n\t\tif (dataFieldAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"] !== null) {\n\t\t\tconst hidden = dataFieldAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"];\n\t\t\treturn typeof hidden === \"object\" ? \"{= !${\" + hidden.$Path + \"} }\" : !hidden;\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t * Method to fetch the correct operators based on the filter restrictions that can be annotated on an entity set or a navigation property.\n\t * We return the correct operators based on the specified restriction and also check for the operators defined in the manifest to include or exclude them.\n\t * @param sProperty String name of the property\n\t * @param sEntitySetPath String path to the entity set\n\t * @param oContext Context used during templating\n\t * @param sType String data type od the property, for example edm.Date\n\t * @param bUseSemanticDateRange Boolean passed from the manifest for semantic date range\n\t * @param settings Stringified object of the property settings or property settings as a whole\n\t * @returns An array of strings representing operators for filtering\n\t */\n\tgetOperatorsForProperty: function (\n\t\tsProperty: string,\n\t\tsEntitySetPath: string,\n\t\toContext: ODataMetaModel,\n\t\tsType?: string,\n\t\tbUseSemanticDateRange?: boolean | string,\n\t\tsettings?: FilterSettings | string\n\t): string[] {\n\t\tconst oFilterRestrictions = CommonUtils.getFilterRestrictionsByPath(sEntitySetPath, oContext);\n\t\tconst aEqualsOps = [\"EQ\"];\n\t\tconst aSingleRangeOps = [\"EQ\", \"GE\", \"LE\", \"LT\", \"GT\", \"BT\", \"NE\", \"NOTBT\", \"NOTLE\", \"NOTLT\", \"NOTGE\", \"NOTGT\"];\n\t\tconst aSingleRangeDTBasicOps = [\"EQ\", \"BT\"];\n\t\tconst aMultiRangeOps = [\"EQ\", \"GE\", \"LE\", \"LT\", \"GT\", \"BT\", \"NE\", \"NOTBT\", \"NOTLE\", \"NOTLT\", \"NOTGE\", \"NOTGT\"];\n\t\tconst aSearchExpressionOps = [\"Contains\", \"NotContains\", \"StartsWith\", \"NotStartsWith\", \"EndsWith\", \"NotEndsWith\"];\n\t\tconst aBasicSemanticDateOps = SemanticDateOperators.getBasicSemanticDateOperations();\n\t\tconst bSemanticDateRange = bUseSemanticDateRange === \"true\" || bUseSemanticDateRange === true;\n\t\tlet aSemanticDateOps: string[] = [];\n\t\tconst oSettings = settings && typeof settings === \"string\" ? JSON.parse(settings).customData : settings;\n\n\t\t// Initialize Empty/NotEmpty operators based on field type and manifest settings\n\t\tconst emptyOps = _getEmptyOps(sType || \"\", oSettings);\n\n\t\tif ((oContext.getObject(`${sEntitySetPath}/@com.sap.vocabularies.Common.v1.ResultContext`) as unknown) === true) {\n\t\t\treturn aEqualsOps;\n\t\t}\n\n\t\tif (oSettings && oSettings.operatorConfiguration && oSettings.operatorConfiguration.length > 0) {\n\t\t\taSemanticDateOps = SemanticDateOperators.getFilterOperations(oSettings.operatorConfiguration, sType);\n\t\t} else {\n\t\t\taSemanticDateOps = DefaultSemanticDateOperators.getSemanticDateOperations(sType);\n\t\t}\n\t\t// Get the default Operators for this Property Type\n\t\tconst aDefaultOperators = _getDefaultOperators(sType);\n\t\tlet supportedOperators = aDefaultOperators;\n\t\tif (bSemanticDateRange) {\n\t\t\tconst extendedSemanticDateOperators = ExtendedSemanticDateOperators.getSemanticDateOperations();\n\t\t\tsupportedOperators = [...aBasicSemanticDateOps, ...aDefaultOperators, ...extendedSemanticDateOperators];\n\t\t}\n\n\t\tlet restrictions: string[] = [];\n\n\t\t// Is there a Filter Restriction defined for this property?\n\t\tif (\n\t\t\toFilterRestrictions &&\n\t\t\toFilterRestrictions.FilterAllowedExpressions &&\n\t\t\toFilterRestrictions.FilterAllowedExpressions[sProperty]\n\t\t) {\n\t\t\t// Extending the default operators list with Semantic Date options DATERANGE, DATE, FROM and TO\n\t\t\tconst sAllowedExpression = CommonUtils.getSpecificAllowedExpression(oFilterRestrictions.FilterAllowedExpressions[sProperty]);\n\t\t\t// In case more than one Allowed Expressions has been defined for a property\n\t\t\t// choose the most restrictive Allowed Expression\n\n\t\t\t// MultiValue has same Operator as SingleValue, but there can be more than one (maxConditions)\n\t\t\tswitch (sAllowedExpression) {\n\t\t\t\tcase \"SingleValue\":\n\t\t\t\t\tconst singleValueDateOps = DefaultSemanticDateOperators.getSingleValueDateOperations();\n\t\t\t\t\tlet aSingleValueOps: string[];\n\t\t\t\t\tif (sType === \"Edm.Date\" && bSemanticDateRange) {\n\t\t\t\t\t\taSingleValueOps = [...singleValueDateOps, ...emptyOps];\n\t\t\t\t\t} else if (sType === \"Edm.Date\" || sType === \"Edm.DateTimeOffset\") {\n\t\t\t\t\t\taSingleValueOps = [...aEqualsOps, ...emptyOps]; // [\"EQ\", \"Empty\", \"NotEmpty\"]\n\t\t\t\t\t} else {\n\t\t\t\t\t\taSingleValueOps = aEqualsOps; // [\"EQ\"]\n\t\t\t\t\t}\n\t\t\t\t\trestrictions = _getRestrictions(supportedOperators, aSingleValueOps);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"MultiValue\":\n\t\t\t\t\tconst multiValueOperators = [...aEqualsOps, \"Empty\", \"NotEmpty\"];\n\t\t\t\t\trestrictions = _getRestrictions(supportedOperators, multiValueOperators);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"SingleRange\":\n\t\t\t\t\tlet aExpressionOps: string[];\n\t\t\t\t\tif (bSemanticDateRange && (sType === \"Edm.Date\" || sType === \"Edm.DateTimeOffset\")) {\n\t\t\t\t\t\t// Only Edm.Date and Edm.DateTimeOffset get semantic operators\n\t\t\t\t\t\taExpressionOps = [...aSemanticDateOps, ...emptyOps];\n\t\t\t\t\t} else if (sType === \"Edm.DateTimeOffset\") {\n\t\t\t\t\t\taExpressionOps = [...aSingleRangeDTBasicOps, ...emptyOps];\n\t\t\t\t\t} else if (sType === \"Edm.Date\") {\n\t\t\t\t\t\taExpressionOps = [...aSingleRangeOps, ...emptyOps];\n\t\t\t\t\t} else {\n\t\t\t\t\t\taExpressionOps = aSingleRangeOps;\n\t\t\t\t\t}\n\t\t\t\t\trestrictions = _getRestrictions(supportedOperators, aExpressionOps);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"MultiRange\":\n\t\t\t\t\tconst multiRangeOps =\n\t\t\t\t\t\tsType === \"Edm.Date\" || sType === \"Edm.DateTimeOffset\" ? [...aMultiRangeOps, ...emptyOps] : aMultiRangeOps;\n\t\t\t\t\trestrictions = _getRestrictions(supportedOperators, multiRangeOps);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"SearchExpression\":\n\t\t\t\t\trestrictions = _getRestrictions(supportedOperators, aSearchExpressionOps);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"MultiRangeOrSearchExpression\":\n\t\t\t\t\trestrictions = _getRestrictions(supportedOperators, aSearchExpressionOps.concat(aMultiRangeOps));\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// In case AllowedExpressions is not recognised, undefined in return results in the default set of\n\t\t\t// operators for the type.\n\t\t}\n\t\treturn restrictions;\n\t},\n\tgetOperatorsForDateProperty: function (propertyType: string): string[] {\n\t\t// In case AllowedExpressions is not provided for type Edm.Date then all the default\n\t\t// operators for the type should be returned excluding semantic operators from the list.\n\t\tconst aDefaultOperators = _getDefaultOperators(propertyType);\n\t\tconst aMultiRangeOps = [\"EQ\", \"GE\", \"LE\", \"LT\", \"GT\", \"BT\", \"NE\", \"NOTBT\", \"NOTLE\", \"NOTLT\", \"NOTGE\", \"NOTGT\", \"Empty\", \"NotEmpty\"];\n\t\treturn _getRestrictions(aDefaultOperators, aMultiRangeOps);\n\t},\n\tgetAIIcon: function (): string {\n\t\treturn aiIcon;\n\t}\n};\n(CommonHelper.getSortConditions as { requiresIContext?: boolean }).requiresIContext = true;\n\nexport default CommonHelper;\n"],"mappings":"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","ignoreList":[],"file":"CommonHelper-dbg.js"}