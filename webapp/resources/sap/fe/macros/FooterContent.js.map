{"version":3,"file":"FooterContent.js","names":["FooterContent","_dec","defineUI5Class","_dec2","implementInterface","_dec3","_dec4","property","type","required","_dec5","_dec6","_dec7","defineReference","_dec8","controllerExtensionHandler","_class","_class2","_BuildingBlock","props","others","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_hideCreateNext","_exports","_inheritsLoose","_proto","prototype","onAfterBinding","async","_hiddenDraft","controller","_getOwner","getRootController","viewContext","getView","getBindingContext","isNewObject","editFlow","isRootContextNew","getModel","setProperty","initialize","owner","setModel","JSONModel","actions","preprocessorContext","bindingContexts","converterContext","getObject","contextPathToUse","fullContextPath","oDataMetaModel","models","metaModel","dataViewModelPath","getDataModelObjectForMetaPath","metaPath","contextPath","startingEntitySet","isDraftValidation","ModelHelper","getDraftRoot","PreparationAction","entityType","annotations","Common","Messages","content","createContent","onMetadataAvailable","getAppComponent","getEnvironmentCapabilities","getCapabilities","HiddenDraft","enabled","hideCreateNext","getActionModelPath","action","annotationPath","actionContext","getContext","getInvolvedDataModelObjects","undefined","getDraftIndicator","entitySet","targetEntitySet","commonAnnotation","DraftRoot","DraftNode","_jsx","DraftIndicator","state","visible","getApplyButton","emphasizedExpression","viewData","getViewData","viewLevel","isDesktop","fclEnabled","MenuButton","text","defaultAction","_applyDocument","useDefaultActionOnly","buttonMode","children","Menu","MenuItem","press","_validateDocument","Button","id","createId","getPrimary","hiddenDraft","addDependent","CommandExecution","ref","cmdExecution","command","execute","_saveDocument","or","ifElse","and","UI","IsEditable","equal","pathInModel","getTextSaveButton","compileExpression","layoutData","OverflowToolbarLayoutData","priority","group","saveButtonText","getTranslatedText","createButtonText","Session","StickySessionSupported","IsCreateMode","Draft","IsNewObject","getCancelButton","_cancelDocument","cancelButton","isDraftRoot","ariaHasPopup","constant","closeOverflowOnInteraction","getCreateNextButton","createNextDocument","getToolbarSeparator","ToolbarSeparator","getDataFieldForActionButton","pressEvent","view","annotationPathContext","dataFieldContextModelPath","dataFieldForAction","targetObject","actionParameters","entitySetName","name","invocationGrouping","InvocationGrouping","library","ChangeSet","Isolated","label","Label","toString","isNavigable","defaultValuesExtensionFunction","handlers","onCallAction","Action","contexts","model","startsWith","isActionWithDialog","CriticalityFormatters","buildExpressionForCriticalityButtonType","icon","isAIOperation","aiIcon","getManifestButton","ObjectPageTemplating","isManifestAction","event","FPMHelper","actionWrapper","handlerModule","handlerMethod","catch","error","Log","_jsxs","getActionControls","emphasizedButtonExpression","buildEmphasizedButtonExpression","map","ActionType","DefaultApply","DataFieldForAction","Primary","emphasizedButtonToolKitExp","resolveBindingString","Secondary","CreateNext","Separator","filter","messageButton","MessageButton","messageChange","_getFooterVisibility","ariaLabelledBy","footerBar","OverflowToolbar","asyncMode","InvisibleText","ToolbarSpacer","firePress","BuildingBlock","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer","Object","getOwnPropertyDescriptor"],"sources":["./FooterContent.tsx"],"sourcesContent":["import type { EntitySet } from \"@sap-ux/vocabularies-types\";\nimport type { DataFieldForAction } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport type { BindingToolkitExpression } from \"sap/fe/base/BindingToolkit\";\nimport { and, compileExpression, constant, equal, ifElse, or, pathInModel, resolveBindingString } from \"sap/fe/base/BindingToolkit\";\nimport { defineReference, defineUI5Class, implementInterface, property, type PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport type { CommandProperties, Ref } from \"sap/fe/base/jsx-runtime/jsx\";\nimport BuildingBlock from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport CommandExecution from \"sap/fe/core/controls/CommandExecution\";\nimport type { BaseManifestSettings, HiddenDraft } from \"sap/fe/core/converters/ManifestSettings\";\nimport { ActionType } from \"sap/fe/core/converters/ManifestSettings\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { isActionWithDialog } from \"sap/fe/core/converters/annotations/DataField\";\nimport { aiIcon, type BaseAction } from \"sap/fe/core/converters/controls/Common/Action\";\nimport { Draft, UI } from \"sap/fe/core/helpers/BindingHelper\";\nimport FPMHelper from \"sap/fe/core/helpers/FPMHelper\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport type { CoreLib } from \"sap/fe/core/library\";\nimport library from \"sap/fe/core/library\";\nimport * as CriticalityFormatters from \"sap/fe/core/templating/CriticalityFormatters\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport MessageButton from \"sap/fe/macros/messages/MessageButton\";\nimport type ObjectPageController from \"sap/fe/templates/ObjectPage/ObjectPageController.controller\";\nimport Button from \"sap/m/Button\";\nimport DraftIndicator from \"sap/m/DraftIndicator\";\nimport Menu from \"sap/m/Menu\";\nimport MenuButton from \"sap/m/MenuButton\";\nimport MenuItem from \"sap/m/MenuItem\";\nimport OverflowToolbar from \"sap/m/OverflowToolbar\";\nimport ToolbarSpacer from \"sap/m/ToolbarSpacer\";\nimport type Event from \"sap/ui/base/Event\";\nimport type { PropertyBindingInfo } from \"sap/ui/base/ManagedObject\";\nimport InvisibleText from \"sap/ui/core/InvisibleText\";\nimport type Controller from \"sap/ui/core/mvc/Controller\";\nimport type { $ControlSettings } from \"sap/ui/mdc/Control\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n// eslint-disable-next-line @typescript-eslint/no-restricted-imports\nimport { controllerExtensionHandler } from \"sap/fe/base/HookSupport\";\nimport type PageController from \"sap/fe/core/PageController\";\n// eslint-disable-next-line @typescript-eslint/no-restricted-imports\nimport * as ObjectPageTemplating from \"sap/fe/templates/ObjectPage/ObjectPageTemplating\";\nimport OverflowToolbarLayoutData from \"sap/m/OverflowToolbarLayoutData\";\nimport ToolbarSeparator from \"sap/m/ToolbarSeparator\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\n\ntype ControllerWithAction = Controller & {\n\thandlers: {\n\t\tonCallAction: Function;\n\t};\n};\n\n@defineUI5Class(\"sap.fe.macros.FooterContent\")\nexport default class FooterContent extends BuildingBlock<OverflowToolbar> {\n\t@implementInterface(\"sap.ui.core.Toolbar\")\n\t__implements__sap_ui_core_Toolbar = true;\n\n\t@implementInterface(\"sap.m.IBar\")\n\t__implements__sap_m_IBar = true;\n\n\t@property({\n\t\ttype: \"string\",\n\t\trequired: true\n\t})\n\tid!: string;\n\n\t@property({\n\t\ttype: \"string\",\n\t\trequired: true\n\t})\n\tpublic metaPath!: string;\n\n\t@property({ type: \"string\" })\n\tcontextPath?: string;\n\n\t@defineReference()\n\tcmdExecution!: Ref<CommandExecution>;\n\n\tactions?: BaseAction[];\n\n\toDataMetaModel!: ODataMetaModel;\n\n\tdataViewModelPath!: DataModelObjectPath<EntitySet>;\n\n\tisDraftValidation!: boolean;\n\n\t_hiddenDraft!: boolean;\n\n\tprivate _hideCreateNext = false;\n\n\tconstructor(props: $ControlSettings & PropertiesOf<FooterContent>, others?: $ControlSettings) {\n\t\tsuper(props, others);\n\t}\n\n\t@controllerExtensionHandler(\"routing\", \"onAfterBinding\")\n\tpublic async onAfterBinding(this: FooterContent): Promise<void> {\n\t\tif (this._hiddenDraft) {\n\t\t\tconst controller = this._getOwner()?.getRootController() as PageController;\n\t\t\tconst viewContext = controller.getView().getBindingContext();\n\t\t\tconst isNewObject = await controller.editFlow.isRootContextNew(viewContext);\n\t\t\t(this.getModel(\"footerInternal\") as JSONModel).setProperty(\"/rootIsNewObject\", isNewObject);\n\t\t}\n\t}\n\n\tinitialize(): void {\n\t\tconst owner = this._getOwner();\n\t\tthis.setModel(new JSONModel(), \"footerInternal\");\n\t\tthis.actions = owner?.preprocessorContext?.bindingContexts?.converterContext?.getObject(\"footerActions\");\n\t\tconst contextPathToUse = owner?.preprocessorContext?.fullContextPath;\n\t\tthis.oDataMetaModel = owner?.preprocessorContext?.models.metaModel as ODataMetaModel;\n\t\tthis.dataViewModelPath = this.getDataModelObjectForMetaPath(this.metaPath, contextPathToUse ?? this.contextPath)!;\n\t\tconst startingEntitySet = this.dataViewModelPath.startingEntitySet;\n\t\tthis.isDraftValidation = !!(\n\t\t\tModelHelper.getDraftRoot(startingEntitySet)?.PreparationAction && startingEntitySet?.entityType.annotations.Common?.Messages\n\t\t);\n\t\tthis.content = this.createContent();\n\t}\n\n\t/**\n\t * Handler for the onMetadataAvailable event.\n\t */\n\tonMetadataAvailable(): void {\n\t\tconst controller = this._getOwner()?.getRootController() as ObjectPageController;\n\t\tthis._hiddenDraft = (controller.getAppComponent().getEnvironmentCapabilities().getCapabilities().HiddenDraft as HiddenDraft)\n\t\t\t?.enabled;\n\t\tthis._hideCreateNext =\n\t\t\t(controller.getAppComponent().getEnvironmentCapabilities().getCapabilities().HiddenDraft as HiddenDraft)?.hideCreateNext ===\n\t\t\ttrue;\n\t\tif (!this.content) {\n\t\t\tthis.initialize();\n\t\t}\n\t}\n\n\tprivate getActionModelPath(action: BaseAction): DataModelObjectPath<DataFieldForAction> | undefined {\n\t\tconst annotationPath = action.annotationPath;\n\t\tif (annotationPath) {\n\t\t\tconst actionContext = this.oDataMetaModel.getContext(annotationPath);\n\t\t\treturn getInvolvedDataModelObjects<DataFieldForAction>(actionContext);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tgetDraftIndicator(): DraftIndicator | undefined {\n\t\tconst entitySet = (this.dataViewModelPath.targetEntitySet || this.dataViewModelPath.startingEntitySet) as EntitySet; // startingEntitySet is used on containment scenario\n\t\tconst commonAnnotation = entitySet.annotations?.Common;\n\t\tif ((commonAnnotation?.DraftRoot || commonAnnotation?.DraftNode) && !this._hiddenDraft) {\n\t\t\treturn <DraftIndicator state=\"{ui>/draftStatus}\" visible=\"{ui>/isEditable}\" />;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate getApplyButton(emphasizedExpression: PropertyBindingInfo): Button | MenuButton | null {\n\t\tconst controller = this._getOwner()?.getRootController() as ObjectPageController;\n\t\tconst viewData = controller.getView().getViewData() as BaseManifestSettings;\n\t\tif ((viewData?.viewLevel != null && viewData?.viewLevel <= 1) || this._hiddenDraft) {\n\t\t\treturn null;\n\t\t}\n\t\tif (this.isDraftValidation && !viewData.isDesktop && !viewData.fclEnabled) {\n\t\t\treturn (\n\t\t\t\t<MenuButton\n\t\t\t\t\ttext=\"{sap.fe.i18n>T_COMMON_OBJECT_PAGE_APPLY_DRAFT}\"\n\t\t\t\t\tdefaultAction={async (): Promise<void> => {\n\t\t\t\t\t\tawait controller._applyDocument(controller.getView().getBindingContext());\n\t\t\t\t\t}}\n\t\t\t\t\tuseDefaultActionOnly=\"true\"\n\t\t\t\t\tbuttonMode=\"Split\"\n\t\t\t\t\ttype={emphasizedExpression}\n\t\t\t\t\tdt:designtime=\"not-adaptable\"\n\t\t\t\t>\n\t\t\t\t\t<Menu>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\ttext=\"{sap.fe.i18n>T_COMMON_OBJECT_PAGE_VALIDATE_DRAFT}\"\n\t\t\t\t\t\t\tpress={async (): Promise<void> => {\n\t\t\t\t\t\t\t\tawait controller._validateDocument();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Menu>\n\t\t\t\t</MenuButton>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<Button\n\t\t\t\tid={this.createId(\"StandardAction::Apply\")}\n\t\t\t\ttext=\"{sap.fe.i18n>T_COMMON_OBJECT_PAGE_APPLY_DRAFT}\"\n\t\t\t\ttype={emphasizedExpression}\n\t\t\t\tenabled={true}\n\t\t\t\tpress={async (): Promise<void> => {\n\t\t\t\t\tawait controller._applyDocument(controller.getView().getBindingContext());\n\t\t\t\t}}\n\t\t\t\tvisible=\"{ui>/isEditable}\"\n\t\t\t\tdt:designtime=\"not-adaptable\"\n\t\t\t/>\n\t\t);\n\t}\n\n\tprivate getPrimary(emphasizedExpression?: PropertyBindingInfo, action?: BaseAction): Button | MenuButton | null {\n\t\tconst controller = this._getOwner()?.getRootController() as ObjectPageController;\n\t\tconst hiddenDraft = (controller.getAppComponent().getEnvironmentCapabilities().getCapabilities().HiddenDraft as HiddenDraft)\n\t\t\t?.enabled;\n\t\tconst viewData = controller.getView().getViewData() as BaseManifestSettings;\n\t\tcontroller\n\t\t\t.getView()\n\t\t\t.addDependent(\n\t\t\t\t<CommandExecution\n\t\t\t\t\tref={this.cmdExecution}\n\t\t\t\t\tcommand=\"Save\"\n\t\t\t\t\texecute={controller._saveDocument}\n\t\t\t\t\tvisible={or(\n\t\t\t\t\t\tifElse(\n\t\t\t\t\t\t\thiddenDraft === true,\n\t\t\t\t\t\t\tifElse(\n\t\t\t\t\t\t\t\tviewData.fclEnabled === true,\n\t\t\t\t\t\t\t\tand(UI.IsEditable, equal(pathInModel(\"/showSaveAndCancelButton\", \"fclhelper\"), true)),\n\t\t\t\t\t\t\t\tUI.IsEditable\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tUI.IsEditable\n\t\t\t\t\t\t),\n\t\t\t\t\t\tequal(pathInModel(\"/isInlineEditActive\", \"ui\"), true)\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t);\n\t\tif (this.isDraftValidation && !viewData.isDesktop) {\n\t\t\treturn (\n\t\t\t\t<MenuButton\n\t\t\t\t\ttext={this.getTextSaveButton()}\n\t\t\t\t\tjsx:command=\"cmd:Save|defaultAction\"\n\t\t\t\t\tuseDefaultActionOnly=\"true\"\n\t\t\t\t\tbuttonMode=\"Split\"\n\t\t\t\t\ttype={emphasizedExpression}\n\t\t\t\t\tvisible={compileExpression(\n\t\t\t\t\t\tifElse(\n\t\t\t\t\t\t\thiddenDraft === true,\n\t\t\t\t\t\t\tifElse(\n\t\t\t\t\t\t\t\tviewData.fclEnabled === true,\n\t\t\t\t\t\t\t\tand(UI.IsEditable, equal(pathInModel(\"/showSaveAndCancelButton\", \"fclhelper\"), true)),\n\t\t\t\t\t\t\t\tUI.IsEditable\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tUI.IsEditable\n\t\t\t\t\t\t)\n\t\t\t\t\t)}\n\t\t\t\t\tdt:designtime=\"not-adaptable\"\n\t\t\t\t>\n\t\t\t\t\t<Menu>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\ttext=\"{sap.fe.i18n>T_COMMON_OBJECT_PAGE_VALIDATE_DRAFT}\"\n\t\t\t\t\t\t\tpress={async (): Promise<void> => {\n\t\t\t\t\t\t\t\tawait controller._validateDocument();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Menu>\n\t\t\t\t</MenuButton>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<Button\n\t\t\t\tid={this.createId(\"StandardAction::Save\")}\n\t\t\t\ttext={this.getTextSaveButton()}\n\t\t\t\ttype={emphasizedExpression}\n\t\t\t\tvisible={compileExpression(\n\t\t\t\t\tifElse(\n\t\t\t\t\t\thiddenDraft === true,\n\t\t\t\t\t\tifElse(\n\t\t\t\t\t\t\tviewData.fclEnabled === true,\n\t\t\t\t\t\t\tand(UI.IsEditable, equal(pathInModel(\"/showSaveAndCancelButton\", \"fclhelper\"), true)),\n\t\t\t\t\t\t\tUI.IsEditable\n\t\t\t\t\t\t),\n\t\t\t\t\t\tUI.IsEditable\n\t\t\t\t\t)\n\t\t\t\t)}\n\t\t\t\tenabled={true}\n\t\t\t\tjsx:command=\"cmd:Save|press\"\n\t\t\t\tdt:designtime=\"not-adaptable\"\n\t\t\t>\n\t\t\t\t{{\n\t\t\t\t\tlayoutData: <OverflowToolbarLayoutData priority={action?.priority} group={action?.group}></OverflowToolbarLayoutData>\n\t\t\t\t}}\n\t\t\t</Button>\n\t\t);\n\t}\n\n\tprivate getTextSaveButton(): BindingToolkitExpression<string> {\n\t\tconst saveButtonText = this.getTranslatedText(\"T_OP_OBJECT_PAGE_SAVE\");\n\t\tconst createButtonText = this.getTranslatedText(\"T_OP_OBJECT_PAGE_CREATE\");\n\t\t// If we're in sticky mode  -> the ui is in create mode, show Create, else show Save\n\t\t// If not -> we're in draft or hidden draft\n\t\t// In case of draft if it is a new object (!IsActiveEntity && !HasActiveEntity), show create, else show save\n\t\t// In case of hidden draft the button shows up in all pages and follows the below criteria\n\t\t// \t\tIf the root object is a new object (!IsActiveEntity && !HasActiveEntity) then all pages should show Create.\n\t\t// \t\tIf the roor object is not a new object then all pages should show Save.\n\t\treturn ifElse(\n\t\t\tifElse(\n\t\t\t\t(this.dataViewModelPath.startingEntitySet as EntitySet).annotations.Session?.StickySessionSupported !== undefined,\n\t\t\t\tUI.IsCreateMode,\n\t\t\t\tifElse(this._hiddenDraft, and(pathInModel(\"/rootIsNewObject\", \"footerInternal\")), Draft.IsNewObject)\n\t\t\t),\n\t\t\tcreateButtonText,\n\t\t\tsaveButtonText\n\t\t);\n\t}\n\n\tprivate getCancelButton(action?: BaseAction): Button | null {\n\t\tconst controller = this._getOwner()?.getRootController() as ObjectPageController;\n\t\tconst hiddenDraft = (controller.getAppComponent().getEnvironmentCapabilities().getCapabilities().HiddenDraft as HiddenDraft)\n\t\t\t?.enabled;\n\t\tconst viewData = controller.getView().getViewData() as BaseManifestSettings;\n\t\tcontroller.getView().addDependent(\n\t\t\t<CommandExecution\n\t\t\t\tref={this.cmdExecution}\n\t\t\t\tcommand=\"Cancel\"\n\t\t\t\texecute={(): void => {\n\t\t\t\t\tcontroller._cancelDocument({ cancelButton: \"fe::FooterBar::StandardAction::Cancel\" });\n\t\t\t\t}}\n\t\t\t\tvisible={ifElse(\n\t\t\t\t\thiddenDraft === true,\n\t\t\t\t\tifElse(\n\t\t\t\t\t\tviewData.fclEnabled === true,\n\t\t\t\t\t\tand(UI.IsEditable, equal(pathInModel(\"/showSaveAndCancelButton\", \"fclhelper\"), true)),\n\t\t\t\t\t\tUI.IsEditable\n\t\t\t\t\t),\n\t\t\t\t\tUI.IsEditable\n\t\t\t\t)}\n\t\t\t/>\n\t\t);\n\t\t// OverflowToolbarLayoutData setting is needed when the discard button is in the overflow\n\t\treturn (\n\t\t\t<Button\n\t\t\t\tid={this.createId(\"StandardAction::Cancel\")}\n\t\t\t\ttext={\n\t\t\t\t\tModelHelper.isDraftRoot(this.dataViewModelPath.targetEntitySet) && !this._hiddenDraft\n\t\t\t\t\t\t? \"{sap.fe.i18n>C_COMMON_OBJECT_PAGE_DISCARD_DRAFT}\"\n\t\t\t\t\t\t: \"{sap.fe.i18n>C_COMMON_OBJECT_PAGE_CANCEL}\"\n\t\t\t\t}\n\t\t\t\tjsx:command=\"cmd:Cancel|press\"\n\t\t\t\tvisible={compileExpression(\n\t\t\t\t\tifElse(\n\t\t\t\t\t\thiddenDraft === true,\n\t\t\t\t\t\tifElse(\n\t\t\t\t\t\t\tviewData.fclEnabled === true,\n\t\t\t\t\t\t\tand(UI.IsEditable, equal(pathInModel(\"/showSaveAndCancelButton\", \"fclhelper\"), true)),\n\t\t\t\t\t\t\tUI.IsEditable\n\t\t\t\t\t\t),\n\t\t\t\t\t\tUI.IsEditable\n\t\t\t\t\t)\n\t\t\t\t)}\n\t\t\t\tariaHasPopup={ifElse(pathInModel(\"/isDocumentModified\", \"ui\"), constant(\"Dialog\"), constant(\"None\"))}\n\t\t\t\tenabled={true}\n\t\t\t\tdt:designtime=\"not-adaptable\"\n\t\t\t>\n\t\t\t\t{{\n\t\t\t\t\tlayoutData: (\n\t\t\t\t\t\t<OverflowToolbarLayoutData\n\t\t\t\t\t\t\tpriority={action?.priority}\n\t\t\t\t\t\t\tcloseOverflowOnInteraction={false}\n\t\t\t\t\t\t></OverflowToolbarLayoutData>\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t</Button>\n\t\t);\n\t}\n\n\tprivate getCreateNextButton(emphasizedExpression: PropertyBindingInfo): Button | null {\n\t\tconst controller = this._getOwner()?.getRootController() as ObjectPageController;\n\t\tconst viewData = controller.getView().getViewData() as BaseManifestSettings;\n\t\treturn (\n\t\t\t<Button\n\t\t\t\tid={this.createId(\"StandardAction::CreateNext\")}\n\t\t\t\ttext={\"{sap.fe.i18n>C_COMMON_OBJECT_PAGE_CREATE_NEXT}\"}\n\t\t\t\tpress={controller.editFlow.createNextDocument}\n\t\t\t\ttype={emphasizedExpression}\n\t\t\t\tvisible={ifElse(\n\t\t\t\t\tthis._hiddenDraft === true,\n\t\t\t\t\tifElse(\n\t\t\t\t\t\tviewData.fclEnabled === true,\n\t\t\t\t\t\tand(Draft.IsNewObject, equal(pathInModel(\"/showSaveAndCancelButton\", \"fclhelper\"), true)),\n\t\t\t\t\t\tDraft.IsNewObject\n\t\t\t\t\t),\n\t\t\t\t\tDraft.IsNewObject\n\t\t\t\t)}\n\t\t\t\tenabled={true}\n\t\t\t\tdt:designtime=\"not-adaptable\"\n\t\t\t>\n\t\t\t\t{{ layoutData: <OverflowToolbarLayoutData closeOverflowOnInteraction={false}></OverflowToolbarLayoutData> }}\n\t\t\t</Button>\n\t\t);\n\t}\n\n\tprivate getToolbarSeparator(action: BaseAction): ToolbarSeparator {\n\t\treturn (\n\t\t\t<ToolbarSeparator>\n\t\t\t\t{{\n\t\t\t\t\tlayoutData: <OverflowToolbarLayoutData group={action.group}></OverflowToolbarLayoutData>\n\t\t\t\t}}\n\t\t\t</ToolbarSeparator>\n\t\t);\n\t}\n\n\tprivate getDataFieldForActionButton(action: BaseAction): Button | undefined {\n\t\tif (action.annotationPath) {\n\t\t\tconst controller = this._getOwner()?.getRootController() as ObjectPageController;\n\t\t\tconst annotationPath = action.annotationPath;\n\t\t\tlet pressEvent: { press: (event: Event) => void } | { \"jsx:command\": CommandProperties };\n\t\t\tconst view = controller.getView();\n\t\t\tconst annotationPathContext = this.oDataMetaModel.getContext(annotationPath);\n\t\t\tconst dataFieldContextModelPath = getInvolvedDataModelObjects<DataFieldForAction>(annotationPathContext);\n\t\t\tconst dataFieldForAction = dataFieldContextModelPath.targetObject;\n\t\t\tif (dataFieldForAction) {\n\t\t\t\tconst actionParameters = {\n\t\t\t\t\tentitySetName: this.dataViewModelPath.targetEntitySet?.name,\n\t\t\t\t\tinvocationGrouping:\n\t\t\t\t\t\tdataFieldForAction.InvocationGrouping === \"UI.OperationGroupingType/ChangeSet\"\n\t\t\t\t\t\t\t? (library as CoreLib).InvocationGrouping.ChangeSet\n\t\t\t\t\t\t\t: (library as CoreLib).InvocationGrouping.Isolated,\n\t\t\t\t\tlabel: dataFieldForAction.Label?.toString(),\n\t\t\t\t\tisNavigable: action.isNavigable,\n\t\t\t\t\tdefaultValuesExtensionFunction: action.defaultValuesExtensionFunction\n\t\t\t\t};\n\t\t\t\tif (!action.command) {\n\t\t\t\t\tpressEvent = {\n\t\t\t\t\t\tpress: (): void => {\n\t\t\t\t\t\t\t(controller as ControllerWithAction).handlers.onCallAction(view, dataFieldForAction.Action as string, {\n\t\t\t\t\t\t\t\t...actionParameters,\n\t\t\t\t\t\t\t\t...{\n\t\t\t\t\t\t\t\t\tcontexts: view.getBindingContext(),\n\t\t\t\t\t\t\t\t\tmodel: view.getModel()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\t// command coming from the manifest doesn't get the mandatory prefix \"cmd:\" so we need to add it\n\t\t\t\t\tif (!action.command.startsWith(\"cmd:\")) {\n\t\t\t\t\t\taction.command = `cmd:${action.command}`;\n\t\t\t\t\t}\n\t\t\t\t\tpressEvent = { \"jsx:command\": `${action.command}|press` as CommandProperties };\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tid={this.createId(this.getActionModelPath(action))}\n\t\t\t\t\t\t// This expression considers actions with dynamic visibility.\n\t\t\t\t\t\t// When we have other values than true or false, i.e. an expression, we exclude the actions from adapting the visibility.\n\t\t\t\t\t\tdt:designtime={action.visible === \"true\" || action.visible === \"false\" ? undefined : \"not-adaptable-visibility\"}\n\t\t\t\t\t\ttext={actionParameters.label}\n\t\t\t\t\t\t{...pressEvent}\n\t\t\t\t\t\tariaHasPopup={isActionWithDialog(dataFieldContextModelPath.targetObject)}\n\t\t\t\t\t\tvisible={action.visible}\n\t\t\t\t\t\tenabled={action.enabled}\n\t\t\t\t\t\ttype={CriticalityFormatters.buildExpressionForCriticalityButtonType(dataFieldContextModelPath)}\n\t\t\t\t\t\ticon={action?.isAIOperation === true ? aiIcon : undefined}\n\t\t\t\t\t>\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tlayoutData: (\n\t\t\t\t\t\t\t\t<OverflowToolbarLayoutData priority={action.priority} group={action.group}></OverflowToolbarLayoutData>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t</Button>\n\t\t\t\t) as Button;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getManifestButton(action: BaseAction): Button | undefined {\n\t\tif (ObjectPageTemplating.isManifestAction(action)) {\n\t\t\tlet pressEvent: { press: (event: Event) => void } | { \"jsx:command\": CommandProperties };\n\t\t\tif (action.command) {\n\t\t\t\tpressEvent = { \"jsx:command\": `cmd:${action.command}|press` };\n\t\t\t} else {\n\t\t\t\tpressEvent = {\n\t\t\t\t\tpress: (event: Event): void => {\n\t\t\t\t\t\tFPMHelper.actionWrapper(event, action.handlerModule, action.handlerMethod, {}).catch((error: unknown) =>\n\t\t\t\t\t\t\tLog.error(error as string)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<Button\n\t\t\t\t\tid={this.createId(action.id)}\n\t\t\t\t\tdt:designtime={action.visible === \"true\" || action.visible === \"false\" ? undefined : \"not-adaptable-visibility\"}\n\t\t\t\t\ttext={action.text ?? \"\"}\n\t\t\t\t\t{...pressEvent}\n\t\t\t\t\ttype=\"Transparent\"\n\t\t\t\t\tvisible={action.visible}\n\t\t\t\t\tenabled={action.enabled}\n\t\t\t\t\ticon={action?.isAIOperation === true ? aiIcon : undefined}\n\t\t\t\t>\n\t\t\t\t\t{{\n\t\t\t\t\t\tlayoutData: <OverflowToolbarLayoutData priority={action.priority} group={action.group}></OverflowToolbarLayoutData>\n\t\t\t\t\t}}\n\t\t\t\t\tâ€š\n\t\t\t\t</Button>\n\t\t\t) as Button;\n\t\t}\n\t}\n\n\tgetActionControls(): Button[] | undefined {\n\t\tconst emphasizedButtonExpression = ObjectPageTemplating.buildEmphasizedButtonExpression(this.dataViewModelPath);\n\t\treturn this.actions\n\t\t\t?.map((action: BaseAction) => {\n\t\t\t\tswitch (action.type) {\n\t\t\t\t\tcase ActionType.DefaultApply:\n\t\t\t\t\t\treturn this.getApplyButton(emphasizedButtonExpression);\n\t\t\t\t\tcase ActionType.DataFieldForAction:\n\t\t\t\t\t\treturn this.getDataFieldForActionButton(action);\n\t\t\t\t\tcase ActionType.Primary:\n\t\t\t\t\t\tconst controller = this._getOwner()?.getRootController() as ObjectPageController;\n\t\t\t\t\t\tconst viewData = controller.getView().getViewData() as BaseManifestSettings;\n\t\t\t\t\t\tconst viewLevel = viewData?.viewLevel ?? 0;\n\t\t\t\t\t\tif (this._hiddenDraft && !this._hideCreateNext && viewLevel > 1) {\n\t\t\t\t\t\t\tconst emphasizedButtonToolKitExp = emphasizedButtonExpression\n\t\t\t\t\t\t\t\t? resolveBindingString(emphasizedButtonExpression)\n\t\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\t\treturn this.getPrimary(compileExpression(ifElse(Draft.IsNewObject, undefined, emphasizedButtonToolKitExp)));\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn this.getPrimary(emphasizedButtonExpression, action);\n\t\t\t\t\tcase ActionType.Secondary:\n\t\t\t\t\t\treturn this.getCancelButton(action);\n\t\t\t\t\tcase ActionType.CreateNext:\n\t\t\t\t\t\tif (this._hiddenDraft && !this._hideCreateNext) {\n\t\t\t\t\t\t\tconst emphasizedButtonToolKitExp = emphasizedButtonExpression\n\t\t\t\t\t\t\t\t? resolveBindingString(emphasizedButtonExpression)\n\t\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\t\treturn this.getCreateNextButton(\n\t\t\t\t\t\t\t\tcompileExpression(ifElse(Draft.IsNewObject, emphasizedButtonToolKitExp, undefined))\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase ActionType.Separator:\n\t\t\t\t\t\treturn this.getToolbarSeparator(action);\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn this.getManifestButton(action);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.filter((action): action is Button => !!action);\n\t}\n\n\tcreateContent(): OverflowToolbar {\n\t\tconst controller = this._getOwner()?.getRootController() as ObjectPageController;\n\t\tconst viewData = controller.getView().getViewData() as BaseManifestSettings;\n\t\tconst messageButton: MessageButton = (\n\t\t\t<MessageButton\n\t\t\t\tid={this.createId(\"MessageButton\")}\n\t\t\t\tvisible={compileExpression(\n\t\t\t\t\tifElse(\n\t\t\t\t\t\tthis._hiddenDraft === true,\n\t\t\t\t\t\tifElse(\n\t\t\t\t\t\t\tviewData.fclEnabled === true,\n\t\t\t\t\t\t\tand(UI.IsEditable, equal(pathInModel(\"/showSaveAndCancelButton\", \"fclhelper\"), true)),\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t),\n\t\t\t\t\t\ttrue\n\t\t\t\t\t)\n\t\t\t\t)}\n\t\t\t\tmessageChange={(): void => controller._getFooterVisibility()}\n\t\t\t\tariaLabelledBy={[this.createId(\"MessageButton::AriaText\") as string]}\n\t\t\t\ttype=\"Emphasized\"\n\t\t\t\tariaHasPopup=\"Dialog\"\n\t\t\t/>\n\t\t);\n\t\tconst footerBar = (\n\t\t\t<OverflowToolbar id={this.createId(\"_fc\")} asyncMode={true}>\n\t\t\t\t<InvisibleText\n\t\t\t\t\tid={this.createId(\"MessageButton::AriaText\")}\n\t\t\t\t\ttext=\"{sap.fe.i18n>C_COMMON_SAPFE_ERROR_MESSAGES_PAGE_BUTTON_ARIA_TEXT}\"\n\t\t\t\t/>\n\t\t\t\t{messageButton}\n\t\t\t\t<ToolbarSpacer />\n\t\t\t\t{this.getDraftIndicator()}\n\t\t\t\t{this.getActionControls()}\n\t\t\t</OverflowToolbar>\n\t\t);\n\t\tcontroller\n\t\t\t.getView()\n\t\t\t.addDependent(\n\t\t\t\t<CommandExecution\n\t\t\t\t\tref={this.cmdExecution}\n\t\t\t\t\tcommand=\"OpenMessageButtonMenu\"\n\t\t\t\t\texecute={(): MessageButton => messageButton.firePress()}\n\t\t\t\t/>\n\t\t\t);\n\t\treturn footerBar;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}