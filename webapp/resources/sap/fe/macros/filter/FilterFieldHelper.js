/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/util/JSTokenizer","sap/fe/base/BindingToolkit","sap/fe/core/CommonUtils","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/PropertyFormatters","sap/fe/core/type/FiscalDate","sap/fe/macros/CommonHelper","sap/ui/model/odata/v4/AnnotationHelper"],function(e,t,n,o,i,r,s,a){"use strict";var l={};var c=i.getProperty;var p=o.getContextRelativeTargetObjectPath;var f=t.pathInModel;var u=t.getFiscalType;var g=t.EDM_TYPE_MAPPING;var m=t.compileExpression;function d(e,t){const o=t.context.getModel();const i=t.context.getPath();const r=s.getLocationForPropertyPath(o,i);let a;let l=o.getObject(`${r}/@com.sap.vocabularies.Common.v1.ResultContext`);if(!l){if(typeof e==="string"){a=e}else{a=o.getObject(`${i}@sapui.name`)}const t=n.getFilterRestrictionsByPath(r,o);l=t?.RequiredProperties?.includes(a)}return l}l.isRequiredInFilter=d;function y(e,t){const o=t.context.getModel();const i=t.context.getPath();const r=s.getLocationForPropertyPath(o,i);let a;let l=-1;if(o.getObject(`${r}/@com.sap.vocabularies.Common.v1.ResultContext`)===true){return 1}if(typeof e==="string"){a=e}else{a=o.getObject(`${i}@sapui.name`)}const c=n.getFilterRestrictionsByPath(r,o);let p=o.getObject(`${r}/${a}`);if(!p){p=o.getObject(i)}if(p.$Type==="Edm.Boolean"){l=1}else if(c?.FilterAllowedExpressions?.[a]){const e=n.getSpecificAllowedExpression(c.FilterAllowedExpressions[a]);if(e==="SingleValue"||e==="SingleRange"){l=1}}return l}l.maxConditions=y;function P(e){const t=p(e,false,true);return m(f(`/conditions/${t}`,"$filters"))}l.getConditionsBinding=P;function b(t,n){const o=a.format(t,n)||"";const i=o.match(/constraints:.*?({.*?})/);const r=e.parseJS(i?.[1]||"{}");if(o.includes("sap.ui.model.odata.type.DateTimeOffset")){r.V4=true}if(r.nullable===false){delete r.nullable}return Object.keys(r).length===0?undefined:JSON.stringify(r).replaceAll('"',"'")}l.constraints=b;function h(e,t){if(e.$Type==="Edm.String"){if(!e.hasOwnProperty("$Nullable")||e.$Nullable===true){t.arguments=[null,{parseKeepsEmptyString:false}]}const n=u(c(e,t));if(n){if(!t.arguments){t.arguments=[null,{}]}t.arguments[1].fiscalType=n}}const n=a.format(e,t)||"";return n.match(/formatOptions:.*?({.*?})/)?.[1]||undefined}l.formatOptions=h;function v(e){if(e.type==="Edm.String"){const t=u(e);if(t){return"sap.fe.core.type.FiscalDate"}}const t=g[e.type];return t?t.type:e.type}l.getDataType=v;function O(e){if(e.type==="Edm.String"){const t=u(e);if(t){return new r({fiscalType:t},{}).getPattern()}}return undefined}l.getPlaceholder=O;return l},false);
//# sourceMappingURL=FilterFieldHelper.js.map