{"version":3,"names":["InteractiveChartHelper","getChartDisplayedValue","value","valueFormat","metaPath","infoPath","generate","ScaleFactor","valueOf","NumberOfFractionalDigits","getChartValue","_getCollectionName","collection","contextPath","parameters","collectionObject","targetObject","isNavigationProperty","name","isEntitySet","_getBindingPathForParameters","filterConditions","metaModel","collectionName","entitySetPath","params","convertedFilterConditions","VisualFilterUtils","convertFilterCondions","parameterProperties","CommonUtils","getParameterInfo","i","parameter","property","entityPath","split","propertyContext","createBindingContext","typeConfig","TypeMap","getTypeConfig","$Type","JSTokenizer","parseJS","formatOptions","context","constraints","condition","conditionInternal","undefined","internalParameterCondition","ConditionConverter","toType","edmType","encodeURIComponent","ODataUtils","formatLiteral","values","push","parameterEntitySet","slice","lastIndexOf","targetNavigation","substring","toString","_getUOMAggregationExpression","customAggregate","UoMHasCustomAggregate","UOM","aggregation","aggregationExpression","UOMExpression","path","isPathAnnotationExpression","unit","AggregatableProperty","AggregationMethod","with","getAggregationBinding","chartAnnotations","textAssociation","dimensionType","sortOrder","selectionVariant","filterBarEntityType","draftSupported","chartMeasure","selectionVariantAnnotation","entityType","dimension","Dimensions","filters","getUoM","Filter","operator","value1","value2","getFiltersConditionsFromSelectionVariant","getCustomConditions","bind","conditions","forEach","isParameter","length","bindingPath","UOMAggregationExpression","textAssociationExpression","additionally","finalparameters","getSortOrder","$$aggregation","aggregate","group","templateShareable","suspended","getMaxItems","_getOrderExpressionFromMeasure","sortPropertyName","DynamicProperty","$target","Name","Property","$orderby","Descending","ChartType","startIndex","getColorBinding","dataPoint","valueCriticality","annotations","UI","ValueCriticality","Criticality","buildExpressionForCriticalityColorMicroChart","CriticalityCalculation","oDirection","ImprovementDirection","oDataPointValue","Value","oDeviationRangeLowValue","DeviationRangeLowValue","oToleranceRangeLowValue","ToleranceRangeLowValue","oAcceptanceRangeLowValue","AcceptanceRangeLowValue","oAcceptanceRangeHighValue","AcceptanceRangeHighValue","oToleranceRangeHighValue","ToleranceRangeHighValue","oDeviationRangeHighValue","DeviationRangeHighValue","CommonHelper","getCriticalityCalculationBinding","getValueCriticality","result","valueCriticalityType","_getCriticalityFromEnum","join","criticality","valueColor","mLibrary","ValueColor","indicator","Error","Good","Critical","Neutral","getScaleUoMTitle","chartAnnotation","seperator","toolTip","scaleFactor","MeasureAttributes","DataPoint","ValueFormat","fixedInteger","NumberFormat","getIntegerInstance","style","showScale","shortRefNumber","scale","getScale","UOMExp","pathInModel","constant","scaleExp","compileExpression","formatResult","visualFilterFormatter","formatScaleAndUOM","getMeasureDimensionTitle","measureLabel","measurePath","Measures","DynamicMeasures","dimensionPath","dimensionLabel","Common","Label","Library","getResourceBundleFor","getText","getToolTip","renderLineChart","chartType","measureDimensionToolTip","escapeSingleQuotes","scaleUOMTooltip","_getUOM","UOMObjectPath","customData","aggregatablePropertyPath","UOMObject","$Path","entityProperties","isSingleton","targetType","propertyAnnotations","find","measure","ISOCurrency","Unit","getScaleFactor","getUoMVisiblity","showError","getInParameterFiltersBinding","inParameters","parts","paths","inParameter","localDataProperty","getfilterCountBinding","getInteractiveChartProperties","visualFilter","interactiveChartProperties","id","showErrorExpression","errorMessageExpression","errorMessageTitleExpression","dataPointAnnotation","getParameters","getMetaModel","dimensionText","Text","aggregationBinding","type","aggregateProperties","scalefactor","uom","parseCustomData","inParameterFilters","stringifiedParameters","dimensionContext","fullyQualifiedName","dimensionObject","getDataModelObjectForMetaPath","getPath","chartLabel","getTextBinding","displayedValue","color"],"sourceRoot":".","sources":["InteractiveChartHelper.ts"],"sourcesContent":["import type { PathAnnotationExpression, Property, PropertyAnnotationValue, PropertyPath } from \"@sap-ux/vocabularies-types\";\nimport type { AggregatedProperty, AggregatedPropertyType } from \"@sap-ux/vocabularies-types/vocabularies/Analytics\";\nimport type { Label, SortOrderType } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport type {\n\tChart,\n\tDataPoint,\n\tNumberFormat as NumberFormatType,\n\tSelectionVariant,\n\tValueCriticalityType\n} from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport JSTokenizer from \"sap/base/util/JSTokenizer\";\nimport {\n\tcompileExpression,\n\tconstant,\n\tformatResult,\n\tpathInModel,\n\ttype BindingToolkitExpression,\n\ttype CompiledBindingToolkitExpression\n} from \"sap/fe/base/BindingToolkit\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type { PageContextPathTarget } from \"sap/fe/core/converters/TemplateConverter\";\nimport type { ParameterType } from \"sap/fe/core/converters/controls/ListReport/VisualFilters\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { isEntitySet, isNavigationProperty, isPathAnnotationExpression, isSingleton } from \"sap/fe/core/helpers/TypeGuards\";\nimport { buildExpressionForCriticalityColorMicroChart } from \"sap/fe/core/templating/CriticalityFormatters\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport VisualFilterUtils from \"sap/fe/macros/controls/filterbar/utils/VisualFilterUtils\";\nimport { constraints, formatOptions } from \"sap/fe/macros/filter/FilterFieldHelper\";\nimport type { FilterConditions } from \"sap/fe/macros/filterBar/FilterHelper\";\nimport { getFiltersConditionsFromSelectionVariant } from \"sap/fe/macros/filterBar/FilterHelper\";\nimport type { ValueColor } from \"sap/m/library\";\nimport mLibrary from \"sap/m/library\";\nimport Library from \"sap/ui/core/Lib\";\nimport NumberFormat from \"sap/ui/core/format/NumberFormat\";\nimport ConditionConverter from \"sap/ui/mdc/condition/ConditionConverter\";\nimport TypeMap from \"sap/ui/mdc/odata/v4/TypeMap\";\nimport Filter from \"sap/ui/model/Filter\";\nimport type FilterOperator from \"sap/ui/model/FilterOperator\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport ODataUtils from \"sap/ui/model/odata/v4/ODataUtils\";\nimport { getTextBinding } from \"../field/FieldTemplating\";\nimport visualFilterFormatter from \"../formatters/VisualFilterFormatter\";\nimport type VisualFilter from \"./VisualFilter\";\n\ntype MeasureType = {\n\tvalue?: string;\n\tISOCurrency?: PathAnnotationExpression<string>;\n\tUnit?: PathAnnotationExpression<string>;\n};\nexport type InteractiveChartType = {\n\tchartLabel?: BindingToolkitExpression<string> | CompiledBindingToolkitExpression;\n\taggregationBinding?: aggregationBinding;\n\terrorMessageTitleExpression?: string;\n\terrorMessageExpression?: string;\n\tshowErrorExpression?: string;\n\tinParameters?: ParameterType[];\n\tdisplayedValue?: string;\n\tmeasure?: string;\n\tstringifiedParameters?: string[];\n\tinParameterFilters?: string;\n\tcolor?: string;\n\tuom?: string | PropertyAnnotationValue<unknown> | Record<string, unknown>;\n\tscalefactor?: number | object;\n\tselectionVariant?: SelectionVariant;\n};\n\ntype aggregationBinding = {\n\tpath: string;\n\ttemplateShareable: boolean;\n\tsuspended: boolean;\n\tfilters: Filter[];\n\tparameters: {\n\t\t$$aggregation: {\n\t\t\taggregate: { [x: string]: {} | { unit: string } | { name: string; with: string } | undefined };\n\t\t\tgroup: { [x: string]: { additionally: string[] } | { additionally: undefined } };\n\t\t};\n\t\t$orderby: string | undefined;\n\t};\n};\n\nconst InteractiveChartHelper = {\n\tgetChartDisplayedValue: function (value: string, valueFormat?: NumberFormatType, metaPath?: string): string {\n\t\tconst infoPath = generate([metaPath]);\n\t\treturn (\n\t\t\t\"{parts:[{path:'\" +\n\t\t\tvalue +\n\t\t\t\"',type:'sap.ui.model.odata.type.Decimal', constraints:{'nullable':false}}\" +\n\t\t\t(valueFormat && valueFormat.ScaleFactor\n\t\t\t\t? \",{value:'\" + valueFormat.ScaleFactor.valueOf() + \"'}\"\n\t\t\t\t: \",{path:'internal>scalefactorNumber/\" + infoPath + \"'}\") +\n\t\t\t(valueFormat && valueFormat.NumberOfFractionalDigits\n\t\t\t\t? \",{value:'\" + valueFormat.NumberOfFractionalDigits + \"'}\"\n\t\t\t\t: \",{value:'0'}\") +\n\t\t\t\",{path:'internal>currency/\" +\n\t\t\tinfoPath +\n\t\t\t\"'}\" +\n\t\t\t\",{path:'\" +\n\t\t\tvalue +\n\t\t\t\"',type:'sap.ui.model.odata.type.String', constraints:{'nullable':false}}\" +\n\t\t\t\"], formatter:'sap.fe.macros.visualfilters.VisualFilterRuntime.scaleVisualFilterValue'}\"\n\t\t); //+ sType.split('#').length ? sType.split('#')[1] : 'Decimal' + \"}\";\n\t},\n\tgetChartValue: function (value: string): string {\n\t\treturn \"{path:'\" + value + \"',type:'sap.ui.model.odata.type.Decimal', constraints:{'nullable':false}}\";\n\t},\n\t_getCollectionName: function (\n\t\tcollection: DataModelObjectPath<PageContextPathTarget> | undefined,\n\t\tcontextPath: string,\n\t\tparameters?: Array<string>\n\t): string {\n\t\tconst collectionObject = collection?.targetObject;\n\t\tif (isNavigationProperty(collectionObject)) {\n\t\t\treturn parameters ? contextPath : collectionObject.name;\n\t\t} else if (isEntitySet(collectionObject)) {\n\t\t\treturn \"/\" + collectionObject.name;\n\t\t} else {\n\t\t\treturn collectionObject!.name;\n\t\t}\n\t},\n\t_getBindingPathForParameters: function (\n\t\tfilterConditions: Record<string, FilterConditions[]>,\n\t\tmetaModel: ODataMetaModel | undefined,\n\t\tcollectionName: string,\n\t\tparameters: Array<string>,\n\t\tentitySetPath: string\n\t): string {\n\t\tconst params = [];\n\t\tconst convertedFilterConditions = VisualFilterUtils.convertFilterCondions(filterConditions);\n\t\tconst parameterProperties = CommonUtils.getParameterInfo(\n\t\t\tmetaModel as unknown as ODataMetaModel,\n\t\t\tcollectionName\n\t\t).parameterProperties;\n\t\tif (parameterProperties) {\n\t\t\tfor (const i in parameters) {\n\t\t\t\tconst parameter = parameters[i];\n\t\t\t\tconst property = parameterProperties[parameter];\n\t\t\t\tconst entityPath = entitySetPath.split(\"/\")[1];\n\t\t\t\tconst propertyContext = metaModel?.createBindingContext(`/${entityPath}/${parameter}`);\n\t\t\t\tlet typeConfig;\n\t\t\t\tif (propertyContext) {\n\t\t\t\t\ttypeConfig = TypeMap.getTypeConfig(\n\t\t\t\t\t\tproperty.$Type,\n\t\t\t\t\t\tJSTokenizer.parseJS(formatOptions(property, { context: propertyContext }) || \"{}\"),\n\t\t\t\t\t\tJSTokenizer.parseJS(constraints(property, { context: propertyContext }) || \"{}\")\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tconst condition = convertedFilterConditions[parameter];\n\t\t\t\tconst conditionInternal = condition ? condition[0] : undefined;\n\t\t\t\tif (conditionInternal) {\n\t\t\t\t\tconst internalParameterCondition = ConditionConverter.toType(conditionInternal, typeConfig, TypeMap);\n\t\t\t\t\tconst edmType = property.$Type;\n\t\t\t\t\tlet value = encodeURIComponent(ODataUtils.formatLiteral(internalParameterCondition.values[0], edmType));\n\t\t\t\t\tparams.push(`${parameter}=${value}`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst parameterEntitySet = collectionName.slice(0, collectionName.lastIndexOf(\"/\"));\n\t\tconst targetNavigation = collectionName.substring(collectionName.lastIndexOf(\"/\") + 1);\n\t\t// create parameter context\n\t\treturn `${parameterEntitySet}(${params.toString()})/${targetNavigation}`;\n\t},\n\t_getUOMAggregationExpression: function (\n\t\tcustomAggregate?: boolean,\n\t\tUoMHasCustomAggregate?: boolean,\n\t\tUOM?: PropertyAnnotationValue<unknown> | string | Record<string, unknown>,\n\t\taggregation?: AggregatedPropertyType\n\t): {\n\t\taggregationExpression: { unit: string } | {} | { name: string; with: string } | undefined;\n\t\tUOMExpression: { [x: string]: {} } | undefined | string;\n\t} {\n\t\tlet aggregationExpression, UOMExpression;\n\t\tconst path = UOM && isPathAnnotationExpression(UOM) && UOM.path;\n\t\tif (customAggregate) {\n\t\t\t//custom aggregate for a currency or unit of measure corresponding to this aggregatable property\n\t\t\tif (UoMHasCustomAggregate) {\n\t\t\t\taggregationExpression = path ? { unit: path } : {};\n\t\t\t\tUOMExpression = {};\n\t\t\t} else {\n\t\t\t\taggregationExpression = {};\n\t\t\t\tUOMExpression = path ? { [path]: {} } : {};\n\t\t\t}\n\t\t} else if (\n\t\t\taggregation &&\n\t\t\taggregation.AggregatableProperty &&\n\t\t\taggregation.AggregatableProperty.value &&\n\t\t\taggregation.AggregationMethod\n\t\t) {\n\t\t\taggregationExpression = { name: aggregation.AggregatableProperty.value, with: aggregation.AggregationMethod };\n\t\t\tUOMExpression = path ? { [path]: {} } : {};\n\t\t}\n\n\t\treturn {\n\t\t\taggregationExpression: aggregationExpression,\n\t\t\tUOMExpression: UOMExpression\n\t\t};\n\t},\n\tgetAggregationBinding: function (\n\t\tchartAnnotations: Chart,\n\t\tcollection: DataModelObjectPath<PageContextPathTarget> | undefined,\n\t\tcontextPath: string,\n\t\ttextAssociation?: PathAnnotationExpression<string>,\n\t\tdimensionType?: string,\n\t\tsortOrder?: SortOrderType[],\n\t\tselectionVariant?: SelectionVariant,\n\t\tcustomAggregate?: boolean,\n\t\taggregation?: AggregatedPropertyType,\n\t\tUoMHasCustomAggregate?: boolean,\n\t\tparameters?: Array<string>,\n\t\tfilterBarEntityType?: string,\n\t\tdraftSupported?: boolean,\n\t\tchartMeasure?: string,\n\t\tmetaModel?: ODataMetaModel\n\t): aggregationBinding {\n\t\tconst selectionVariantAnnotation = selectionVariant;\n\t\tconst entityType = filterBarEntityType;\n\t\tconst entitySetPath = contextPath;\n\t\tconst dimension = chartAnnotations.Dimensions[0].value;\n\t\tconst filters: Filter[] = [];\n\t\tlet filterConditions;\n\t\tlet collectionName = this._getCollectionName(collection, contextPath, parameters);\n\t\tconst UOM: PropertyAnnotationValue<unknown> | string | undefined | Record<string, unknown> = InteractiveChartHelper.getUoM(\n\t\t\tchartAnnotations,\n\t\t\tcollection,\n\t\t\tundefined,\n\t\t\tcustomAggregate,\n\t\t\taggregation\n\t\t);\n\t\tif (draftSupported) {\n\t\t\tfilters.push(new Filter({ operator: \"EQ\", value1: \"true\", value2: null, path: \"IsActiveEntity\" }));\n\t\t}\n\t\tif (selectionVariantAnnotation) {\n\t\t\tfilterConditions = getFiltersConditionsFromSelectionVariant(\n\t\t\t\tentitySetPath,\n\t\t\t\tmetaModel as unknown as ODataMetaModel,\n\t\t\t\tselectionVariantAnnotation,\n\t\t\t\tVisualFilterUtils.getCustomConditions.bind(VisualFilterUtils)\n\t\t\t);\n\t\t\tfor (const path in filterConditions) {\n\t\t\t\tconst conditions = filterConditions[path];\n\t\t\t\tconditions.forEach(function (condition: FilterConditions) {\n\t\t\t\t\tif (!condition.isParameter) {\n\t\t\t\t\t\tfilters.push(\n\t\t\t\t\t\t\tnew Filter({\n\t\t\t\t\t\t\t\toperator: condition.operator as FilterOperator,\n\t\t\t\t\t\t\t\tvalue1: condition.value1,\n\t\t\t\t\t\t\t\tvalue2: condition.value2,\n\t\t\t\t\t\t\t\tpath: condition.path\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tif (entityType !== `${collectionName}/` && parameters && parameters.length && filterConditions) {\n\t\t\tconst bindingPath = this._getBindingPathForParameters(filterConditions, metaModel, collectionName, parameters, entitySetPath);\n\t\t\tcollectionName = bindingPath;\n\t\t}\n\t\tconst UOMAggregationExpression = this._getUOMAggregationExpression(customAggregate, UoMHasCustomAggregate, UOM, aggregation);\n\t\tconst aggregationExpression = UOMAggregationExpression.aggregationExpression;\n\t\tconst UOMExpression = UOMAggregationExpression.UOMExpression;\n\t\tconst textAssociationExpression = textAssociation ? { additionally: [textAssociation.path] } : {};\n\t\tconst finalparameters = {\n\t\t\t...this.getSortOrder(chartAnnotations, dimensionType, sortOrder, chartMeasure),\n\t\t\t$$aggregation: {\n\t\t\t\taggregate: {\n\t\t\t\t\t[chartMeasure as string]: aggregationExpression\n\t\t\t\t},\n\t\t\t\tgroup: {\n\t\t\t\t\t[dimension]: { ...textAssociationExpression },\n\t\t\t\t\t...(UOMExpression as object)\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn {\n\t\t\tpath: collectionName,\n\t\t\ttemplateShareable: true,\n\t\t\tsuspended: true,\n\t\t\tfilters: filters,\n\t\t\tparameters: finalparameters,\n\t\t\t...(InteractiveChartHelper.getMaxItems(chartAnnotations) as object)\n\t\t};\n\t},\n\n\t_getOrderExpressionFromMeasure: function (sortOrder?: SortOrderType[], chartMeasure?: string): { $orderby: string } {\n\t\tlet sortPropertyName;\n\t\tif (sortOrder && sortOrder.length) {\n\t\t\tif (sortOrder[0].DynamicProperty) {\n\t\t\t\tsortPropertyName = (sortOrder[0].DynamicProperty.$target as AggregatedProperty)?.Name;\n\t\t\t} else {\n\t\t\t\tsortPropertyName = sortOrder[0].Property?.value;\n\t\t\t}\n\t\t\tif (sortPropertyName === chartMeasure) {\n\t\t\t\treturn { $orderby: chartMeasure + (sortOrder[0].Descending ? \" desc\" : \"\") };\n\t\t\t}\n\t\t\treturn { $orderby: chartMeasure + \" desc\" };\n\t\t}\n\t\treturn { $orderby: chartMeasure + \" desc\" };\n\t},\n\n\tgetSortOrder: function (\n\t\tchartAnnotations: Chart,\n\t\tdimensionType?: string,\n\t\tsortOrder?: SortOrderType[],\n\t\tchartMeasure?: string\n\t): { $orderby: string | undefined } {\n\t\tif (chartAnnotations.ChartType === \"UI.ChartType/Donut\" || chartAnnotations.ChartType === \"UI.ChartType/Bar\") {\n\t\t\treturn this._getOrderExpressionFromMeasure(sortOrder, chartMeasure);\n\t\t} else if (dimensionType === \"Edm.Date\" || dimensionType === \"Edm.Time\" || dimensionType === \"Edm.DateTimeOffset\") {\n\t\t\treturn { $orderby: chartAnnotations.Dimensions[0].value };\n\t\t} else if (\n\t\t\tsortOrder &&\n\t\t\tsortOrder.length &&\n\t\t\t(sortOrder[0].Property?.$target as unknown as PathAnnotationExpression<string>)?.path === chartAnnotations.Dimensions[0].value\n\t\t) {\n\t\t\treturn { $orderby: sortOrder[0].Property?.$target?.name + (sortOrder[0].Descending ? \"desc'\" : \"'\") };\n\t\t} else {\n\t\t\treturn { $orderby: chartAnnotations.Dimensions[0].$target?.name };\n\t\t}\n\t},\n\n\tgetMaxItems: function (chartAnnotations: Chart): string | { startIndex: number; length: number } {\n\t\tif (chartAnnotations.ChartType === \"UI.ChartType/Bar\") {\n\t\t\treturn { startIndex: 0, length: 3 };\n\t\t} else if (chartAnnotations.ChartType === \"UI.ChartType/Line\") {\n\t\t\treturn { startIndex: 0, length: 6 };\n\t\t} else {\n\t\t\treturn \"\";\n\t\t}\n\t},\n\n\tgetColorBinding: function (dataPoint: DataPoint, dimension: PropertyPath): string | undefined {\n\t\tconst valueCriticality = dimension?.$target?.annotations?.UI?.ValueCriticality;\n\t\tif (dataPoint?.Criticality) {\n\t\t\treturn buildExpressionForCriticalityColorMicroChart(dataPoint);\n\t\t} else if (dataPoint?.CriticalityCalculation) {\n\t\t\tconst oDirection = dataPoint.CriticalityCalculation.ImprovementDirection;\n\t\t\tconst oDataPointValue = dataPoint.Value;\n\t\t\tconst oDeviationRangeLowValue = dataPoint.CriticalityCalculation.DeviationRangeLowValue.valueOf();\n\t\t\tconst oToleranceRangeLowValue = dataPoint.CriticalityCalculation.ToleranceRangeLowValue.valueOf();\n\t\t\tconst oAcceptanceRangeLowValue = dataPoint.CriticalityCalculation.AcceptanceRangeLowValue.valueOf();\n\t\t\tconst oAcceptanceRangeHighValue = dataPoint.CriticalityCalculation.AcceptanceRangeHighValue.valueOf();\n\t\t\tconst oToleranceRangeHighValue = dataPoint.CriticalityCalculation.ToleranceRangeHighValue.valueOf();\n\t\t\tconst oDeviationRangeHighValue = dataPoint.CriticalityCalculation.DeviationRangeHighValue.valueOf();\n\t\t\treturn CommonHelper.getCriticalityCalculationBinding(\n\t\t\t\toDirection,\n\t\t\t\toDataPointValue,\n\t\t\t\toDeviationRangeLowValue,\n\t\t\t\toToleranceRangeLowValue,\n\t\t\t\toAcceptanceRangeLowValue,\n\t\t\t\toAcceptanceRangeHighValue,\n\t\t\t\toToleranceRangeHighValue,\n\t\t\t\toDeviationRangeHighValue\n\t\t\t);\n\t\t} else if (valueCriticality && valueCriticality.length) {\n\t\t\treturn InteractiveChartHelper.getValueCriticality(dimension.value, valueCriticality);\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t},\n\tgetValueCriticality: function (dimension: string, valueCriticality: Array<ValueCriticalityType>): string | undefined {\n\t\tlet result;\n\t\tconst values: string[] = [];\n\t\tif (valueCriticality && valueCriticality.length > 0) {\n\t\t\tvalueCriticality.forEach(function (valueCriticalityType: ValueCriticalityType) {\n\t\t\t\tif (valueCriticalityType.Value && valueCriticalityType.Criticality) {\n\t\t\t\t\tconst value =\n\t\t\t\t\t\t\"${\" +\n\t\t\t\t\t\tdimension +\n\t\t\t\t\t\t\"} === '\" +\n\t\t\t\t\t\tvalueCriticalityType.Value +\n\t\t\t\t\t\t\"' ? '\" +\n\t\t\t\t\t\tInteractiveChartHelper._getCriticalityFromEnum(valueCriticalityType.Criticality) +\n\t\t\t\t\t\t\"'\";\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t});\n\t\t\tresult = values.length > 0 && values.join(\" : \") + \" : undefined\";\n\t\t}\n\t\treturn result ? \"{= \" + result + \" }\" : undefined;\n\t},\n\t/**\n\t * This function returns the criticality indicator from annotations if criticality is EnumMember.\n\t * @param criticality Criticality provided in the annotations\n\t * @returns Return the indicator for criticality\n\t * @private\n\t */\n\t_getCriticalityFromEnum: function (criticality: string): ValueColor {\n\t\tconst valueColor = mLibrary.ValueColor;\n\t\tlet indicator;\n\t\tif (criticality === \"UI.CriticalityType/Negative\") {\n\t\t\tindicator = valueColor.Error;\n\t\t} else if (criticality === \"UI.CriticalityType/Positive\") {\n\t\t\tindicator = valueColor.Good;\n\t\t} else if (criticality === \"UI.CriticalityType/Critical\") {\n\t\t\tindicator = valueColor.Critical;\n\t\t} else {\n\t\t\tindicator = valueColor.Neutral;\n\t\t}\n\t\treturn indicator;\n\t},\n\tgetScaleUoMTitle: function (\n\t\tchartAnnotation?: Chart,\n\t\tcollection?: DataModelObjectPath<PageContextPathTarget>,\n\t\tmetaPath?: string,\n\t\tcustomAggregate?: boolean,\n\t\taggregation?: AggregatedPropertyType,\n\t\tseperator?: string,\n\t\ttoolTip?: boolean\n\t): string {\n\t\tconst scaleFactor = chartAnnotation?.MeasureAttributes\n\t\t\t? chartAnnotation.MeasureAttributes[0]?.DataPoint?.$target?.ValueFormat?.ScaleFactor?.valueOf()\n\t\t\t: undefined;\n\t\tconst infoPath = generate([metaPath]);\n\t\tconst fixedInteger = NumberFormat.getIntegerInstance({\n\t\t\tstyle: \"short\",\n\t\t\tshowScale: false,\n\t\t\tshortRefNumber: scaleFactor as number\n\t\t});\n\t\tlet scale = fixedInteger.getScale();\n\t\tlet UOM = InteractiveChartHelper.getUoM(chartAnnotation, collection, undefined, customAggregate, aggregation);\n\t\tconst UOMExp = isPathAnnotationExpression<string>(UOM)\n\t\t\t? (pathInModel<string>(\"uom/\" + infoPath, \"internal\") as BindingToolkitExpression<string>)\n\t\t\t: constant(UOM as string);\n\t\tconst scaleExp = scale ? constant(scale) : (pathInModel(\"scalefactor/\" + infoPath, \"internal\") as BindingToolkitExpression<string>);\n\t\tif (!seperator) {\n\t\t\tseperator = \"|\";\n\t\t}\n\t\tseperator = \" \" + seperator + \" \";\n\t\treturn compileExpression(formatResult([seperator, UOMExp, scaleExp], visualFilterFormatter.formatScaleAndUOM), toolTip) ?? \"\";\n\t},\n\tgetMeasureDimensionTitle: function (chartAnnotation?: Chart, customAggregate?: boolean, aggregation?: AggregatedPropertyType): string {\n\t\tlet measureLabel;\n\t\tlet measurePath;\n\t\tif (customAggregate) {\n\t\t\tmeasurePath = chartAnnotation?.Measures[0]?.$target?.name;\n\t\t}\n\t\tif (chartAnnotation?.DynamicMeasures && chartAnnotation.DynamicMeasures.length > 0) {\n\t\t\tmeasurePath = (chartAnnotation.DynamicMeasures[0]?.$target as AggregatedPropertyType)?.AggregatableProperty?.value;\n\t\t} else if (!customAggregate && chartAnnotation?.Measures && chartAnnotation?.Measures.length > 0) {\n\t\t\tmeasurePath = chartAnnotation.Measures[0]?.$target?.name;\n\t\t}\n\t\tconst dimensionPath = chartAnnotation?.Dimensions[0]?.value as unknown as Label;\n\t\tlet dimensionLabel = chartAnnotation?.Dimensions[0]?.$target?.annotations?.Common?.Label;\n\t\tif (!customAggregate && aggregation) {\n\t\t\t// check if the label is part of aggregated properties (Transformation aggregates)\n\t\t\tmeasureLabel = aggregation.annotations && aggregation.annotations.Common && aggregation.annotations.Common.Label;\n\t\t\tif (measureLabel === undefined) {\n\t\t\t\tmeasureLabel = chartAnnotation?.Measures?.[0]?.$target?.annotations?.Common?.Label;\n\t\t\t}\n\t\t} else {\n\t\t\tmeasureLabel = chartAnnotation?.Measures?.[0]?.$target?.annotations?.Common?.Label;\n\t\t}\n\t\tif (measureLabel === undefined) {\n\t\t\tmeasureLabel = measurePath;\n\t\t}\n\t\tif (dimensionLabel === undefined) {\n\t\t\tdimensionLabel = dimensionPath;\n\t\t}\n\t\treturn Library.getResourceBundleFor(\"sap.fe.macros\")!.getText(\"M_INTERACTIVE_CHART_HELPER_VISUALFILTER_MEASURE_DIMENSION_TITLE\", [\n\t\t\tmeasureLabel,\n\t\t\tdimensionLabel\n\t\t]);\n\t},\n\n\tgetToolTip: function (\n\t\tchartAnnotation?: Chart,\n\t\tcollection?: DataModelObjectPath<PageContextPathTarget>,\n\t\tmetaPath?: string,\n\t\tcustomAggregate?: boolean,\n\t\taggregation?: AggregatedPropertyType,\n\t\trenderLineChart?: boolean | string\n\t): string {\n\t\tconst chartType = chartAnnotation && chartAnnotation[\"ChartType\"];\n\t\tlet measureDimensionToolTip = InteractiveChartHelper.getMeasureDimensionTitle(chartAnnotation, customAggregate, aggregation);\n\t\tmeasureDimensionToolTip = CommonHelper.escapeSingleQuotes(measureDimensionToolTip);\n\t\tif (renderLineChart === false && chartType === \"UI.ChartType/Line\") {\n\t\t\treturn `{= '${measureDimensionToolTip}'}`;\n\t\t}\n\n\t\tconst seperator = Library.getResourceBundleFor(\"sap.fe.macros\")?.getText(\n\t\t\t\"M_INTERACTIVE_CHART_HELPER_VISUALFILTER_TOOLTIP_SEPERATOR\"\n\t\t);\n\t\tconst infoPath = generate([metaPath]);\n\t\tconst scaleUOMTooltip = InteractiveChartHelper.getScaleUoMTitle(\n\t\t\tchartAnnotation,\n\t\t\tcollection,\n\t\t\tinfoPath,\n\t\t\tcustomAggregate,\n\t\t\taggregation,\n\t\t\tseperator,\n\t\t\ttrue\n\t\t);\n\t\treturn \"{= '\" + measureDimensionToolTip + (scaleUOMTooltip ? \"' + \" + scaleUOMTooltip : \"'\") + \"}\";\n\t},\n\t_getUOM: function (\n\t\tUOMObjectPath?: PropertyAnnotationValue<unknown>,\n\t\tUOM?: \"ISOCurrency\" | \"Unit\",\n\t\tcollection?: DataModelObjectPath<PageContextPathTarget>,\n\t\tcustomData?: boolean,\n\t\taggregatablePropertyPath?: string\n\t): string | PathAnnotationExpression<unknown> | Record<string, unknown> | undefined {\n\t\tconst UOMObject: Record<string, unknown> = {};\n\t\tconst collectionObject = collection?.targetObject;\n\t\tif (UOMObjectPath && UOM && isPathAnnotationExpression(UOMObjectPath)) {\n\t\t\t// check if the UOM is part of Measure annotations(Custom aggregates)\n\t\t\tUOMObject[UOM] = { $Path: UOMObjectPath.path };\n\t\t\treturn customData && UOMObjectPath.path ? UOMObject : UOMObjectPath;\n\t\t} else if (aggregatablePropertyPath) {\n\t\t\t// check if the UOM is part of base property annotations(Transformation aggregates)\n\t\t\tconst entityProperties =\n\t\t\t\tisEntitySet(collectionObject) || isSingleton(collectionObject)\n\t\t\t\t\t? collectionObject.entityType.entityProperties\n\t\t\t\t\t: collectionObject?.targetType?.entityProperties;\n\t\t\tconst propertyAnnotations = entityProperties?.find((property: Property) => property.name == aggregatablePropertyPath);\n\t\t\tif (propertyAnnotations?.annotations?.Measures && UOM) {\n\t\t\t\tUOMObjectPath = propertyAnnotations?.annotations?.Measures[UOM] as PathAnnotationExpression<unknown>;\n\t\t\t\tUOMObject[UOM] = { $Path: UOMObjectPath?.path };\n\t\t\t}\n\t\t\treturn UOMObjectPath && customData && isPathAnnotationExpression(UOMObjectPath) && UOMObjectPath.path\n\t\t\t\t? UOMObject\n\t\t\t\t: UOMObjectPath;\n\t\t}\n\t},\n\tgetUoM: function (\n\t\tchartAnnotation?: Chart,\n\t\tcollection?: DataModelObjectPath<PageContextPathTarget>,\n\t\tcustomData?: boolean,\n\t\tcustomAggregate?: boolean,\n\t\taggregation?: AggregatedPropertyType\n\t): string | PropertyAnnotationValue<unknown> | Record<string, unknown> | undefined {\n\t\tlet measure: MeasureType = {};\n\t\tif (customAggregate) {\n\t\t\tmeasure = chartAnnotation?.Measures[0] as MeasureType;\n\t\t}\n\t\tif (chartAnnotation?.DynamicMeasures && chartAnnotation.DynamicMeasures.length > 0) {\n\t\t\tmeasure = (chartAnnotation.DynamicMeasures[0]?.$target as AggregatedPropertyType)?.AggregatableProperty?.$target?.annotations\n\t\t\t\t?.Measures as MeasureType;\n\t\t} else if (!customAggregate && chartAnnotation?.Measures && chartAnnotation.Measures.length > 0) {\n\t\t\tmeasure = chartAnnotation.Measures[0];\n\t\t}\n\t\tconst ISOCurrency = measure?.ISOCurrency;\n\t\tconst unit = measure?.Unit;\n\t\tlet aggregatablePropertyPath: string | undefined;\n\t\tif (!customAggregate && aggregation) {\n\t\t\taggregatablePropertyPath = aggregation.AggregatableProperty && aggregation.AggregatableProperty.value;\n\t\t} else {\n\t\t\taggregatablePropertyPath = measure?.value;\n\t\t}\n\t\treturn (\n\t\t\tthis._getUOM(ISOCurrency, \"ISOCurrency\", collection, customData, aggregatablePropertyPath) ||\n\t\t\tthis._getUOM(unit, \"Unit\", collection, customData, aggregatablePropertyPath)\n\t\t);\n\t},\n\tgetScaleFactor: function (valueFormat?: NumberFormatType): number | undefined {\n\t\tif (valueFormat && valueFormat.ScaleFactor) {\n\t\t\treturn valueFormat.ScaleFactor.valueOf();\n\t\t}\n\t\treturn undefined;\n\t},\n\tgetUoMVisiblity: function (chartAnnotation?: Chart, showError?: boolean): boolean {\n\t\tconst chartType = chartAnnotation && chartAnnotation[\"ChartType\"];\n\t\tif (showError) {\n\t\t\treturn false;\n\t\t} else if (!(chartType === \"UI.ChartType/Bar\" || chartType === \"UI.ChartType/Line\")) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t},\n\tgetInParameterFiltersBinding: function (inParameters: Array<ParameterType>): string | undefined {\n\t\tif (inParameters.length > 0) {\n\t\t\tconst parts: string[] = [];\n\t\t\tlet paths = \"\";\n\t\t\tinParameters.forEach(function (inParameter: ParameterType) {\n\t\t\t\tif (inParameter.localDataProperty) {\n\t\t\t\t\tparts.push(`{path:'$filters>/conditions/${inParameter.localDataProperty}'}`);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (parts.length > 0) {\n\t\t\t\tpaths = parts.join();\n\t\t\t\treturn `{parts:[${paths}], formatter:'sap.fe.macros.visualfilters.VisualFilterRuntime.getFiltersFromConditions'}`;\n\t\t\t} else {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t},\n\n\tgetfilterCountBinding: function (chartAnnotation?: Chart): string {\n\t\tconst dimension = chartAnnotation?.Dimensions[0]?.$target?.name;\n\t\treturn (\n\t\t\t\"{path:'$filters>/conditions/\" + dimension + \"', formatter:'sap.fe.macros.visualfilters.VisualFilterRuntime.getFilterCounts'}\"\n\t\t);\n\t},\n\n\tgetInteractiveChartProperties: function (visualFilter: VisualFilter): InteractiveChartType {\n\t\tconst chartAnnotation = visualFilter.chartAnnotation;\n\t\tconst interactiveChartProperties: InteractiveChartType = {};\n\t\tif (visualFilter.chartMeasure && chartAnnotation?.Dimensions && chartAnnotation.Dimensions[0]) {\n\t\t\tconst id = generate([visualFilter.metaPath]);\n\t\t\tinteractiveChartProperties.showErrorExpression = \"{= ${internal>\" + id + \"/showError}}\";\n\t\t\tinteractiveChartProperties.errorMessageExpression = \"{= ${internal>\" + id + \"/errorMessage}}\";\n\t\t\tinteractiveChartProperties.errorMessageTitleExpression = \"{= ${internal>\" + id + \"/errorMessageTitle}}\";\n\t\t\tlet dataPointAnnotation;\n\t\t\tif (chartAnnotation?.MeasureAttributes && chartAnnotation?.MeasureAttributes[0]) {\n\t\t\t\tdataPointAnnotation = chartAnnotation?.MeasureAttributes[0]?.DataPoint\n\t\t\t\t\t? chartAnnotation?.MeasureAttributes[0].DataPoint.$target\n\t\t\t\t\t: chartAnnotation?.MeasureAttributes[0];\n\t\t\t}\n\t\t\tconst dimension = chartAnnotation?.Dimensions[0];\n\t\t\tconst parameters = CommonHelper.getParameters(visualFilter.contextPath, visualFilter.getMetaModel());\n\t\t\tconst dimensionText = dimension?.$target?.annotations?.Common?.Text as unknown as PathAnnotationExpression<string>;\n\t\t\tinteractiveChartProperties.aggregationBinding = InteractiveChartHelper.getAggregationBinding(\n\t\t\t\tchartAnnotation,\n\t\t\t\tvisualFilter.collection,\n\t\t\t\tvisualFilter.contextPath,\n\t\t\t\tdimensionText,\n\t\t\t\tdimension.$target?.type,\n\t\t\t\tvisualFilter?.sortOrder,\n\t\t\t\tvisualFilter.selectionVariant,\n\t\t\t\tvisualFilter.customAggregate,\n\t\t\t\tvisualFilter.aggregateProperties,\n\t\t\t\tvisualFilter.UoMHasCustomAggregate,\n\t\t\t\tparameters,\n\t\t\t\tvisualFilter.filterBarEntityType,\n\t\t\t\tvisualFilter.draftSupported,\n\t\t\t\tvisualFilter.chartMeasure,\n\t\t\t\tvisualFilter.getMetaModel()\n\t\t\t);\n\t\t\tinteractiveChartProperties.scalefactor = InteractiveChartHelper.getScaleFactor((dataPointAnnotation as DataPoint)?.ValueFormat);\n\t\t\tinteractiveChartProperties.uom = InteractiveChartHelper.getUoM(\n\t\t\t\tchartAnnotation,\n\t\t\t\tvisualFilter.collection,\n\t\t\t\ttrue,\n\t\t\t\tvisualFilter.customAggregate,\n\t\t\t\tvisualFilter.aggregateProperties\n\t\t\t);\n\t\t\tinteractiveChartProperties.inParameters = visualFilter.inParameters;\n\t\t\tconst inParameters = CommonHelper.parseCustomData(visualFilter.inParameters as unknown as string);\n\t\t\tinteractiveChartProperties.inParameterFilters = visualFilter.inParameters\n\t\t\t\t? InteractiveChartHelper.getInParameterFiltersBinding(inParameters as Array<ParameterType>)\n\t\t\t\t: undefined;\n\t\t\tinteractiveChartProperties.selectionVariant = visualFilter.selectionVariant ? visualFilter.selectionVariant : undefined;\n\t\t\tinteractiveChartProperties.stringifiedParameters = parameters;\n\t\t\tconst dimensionContext = visualFilter\n\t\t\t\t.getMetaModel()\n\t\t\t\t?.createBindingContext(visualFilter.contextPath + \"/@\" + dimension.fullyQualifiedName.split(\"@\")[1]);\n\t\t\tif (dimensionContext) {\n\t\t\t\tconst dimensionObject = visualFilter.getDataModelObjectForMetaPath<Property>(\n\t\t\t\t\tdimensionContext.getPath(),\n\t\t\t\t\tvisualFilter.contextPath\n\t\t\t\t);\n\t\t\t\tinteractiveChartProperties.chartLabel = getTextBinding(dimensionObject as DataModelObjectPath<Property>, {});\n\t\t\t}\n\t\t\tinteractiveChartProperties.measure = InteractiveChartHelper.getChartValue(visualFilter.chartMeasure);\n\t\t\tinteractiveChartProperties.displayedValue = InteractiveChartHelper.getChartDisplayedValue(\n\t\t\t\tvisualFilter.chartMeasure,\n\t\t\t\t(dataPointAnnotation as DataPoint)?.ValueFormat,\n\t\t\t\tvisualFilter.metaPath\n\t\t\t);\n\t\t\tinteractiveChartProperties.color = InteractiveChartHelper.getColorBinding(dataPointAnnotation as DataPoint, dimension);\n\t\t}\n\t\treturn interactiveChartProperties;\n\t}\n};\n\nexport default InteractiveChartHelper;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;EAiFA,MAAMA,sBAAsB,GAAG;IAC9BC,sBAAsB,EAAE,SAAAA,CAAUC,KAAa,EAAEC,WAA8B,EAAEC,QAAiB,EAAU;MAC3G,MAAMC,QAAQ,GAAGC,QAAQ,CAAC,CAACF,QAAQ,CAAC,CAAC;MACrC,OACC,iBAAiB,GACjBF,KAAK,GACL,2EAA2E,IAC1EC,WAAW,IAAIA,WAAW,CAACI,WAAW,GACpC,WAAW,GAAGJ,WAAW,CAACI,WAAW,CAACC,OAAO,CAAC,CAAC,GAAG,IAAI,GACtD,qCAAqC,GAAGH,QAAQ,GAAG,IAAI,CAAC,IAC1DF,WAAW,IAAIA,WAAW,CAACM,wBAAwB,GACjD,WAAW,GAAGN,WAAW,CAACM,wBAAwB,GAAG,IAAI,GACzD,cAAc,CAAC,GAClB,4BAA4B,GAC5BJ,QAAQ,GACR,IAAI,GACJ,UAAU,GACVH,KAAK,GACL,0EAA0E,GAC1E,wFAAwF,CACvF,CAAC;IACJ,CAAC;IACDQ,aAAa,EAAE,SAAAA,CAAUR,KAAa,EAAU;MAC/C,OAAO,SAAS,GAAGA,KAAK,GAAG,2EAA2E;IACvG,CAAC;IACDS,kBAAkB,EAAE,SAAAA,CACnBC,UAAkE,EAClEC,WAAmB,EACnBC,UAA0B,EACjB;MACT,MAAMC,gBAAgB,GAAGH,UAAU,EAAEI,YAAY;MACjD,IAAIC,oBAAoB,CAACF,gBAAgB,CAAC,EAAE;QAC3C,OAAOD,UAAU,GAAGD,WAAW,GAAGE,gBAAgB,CAACG,IAAI;MACxD,CAAC,MAAM,IAAIC,WAAW,CAACJ,gBAAgB,CAAC,EAAE;QACzC,OAAO,GAAG,GAAGA,gBAAgB,CAACG,IAAI;MACnC,CAAC,MAAM;QACN,OAAOH,gBAAgB,CAAEG,IAAI;MAC9B;IACD,CAAC;IACDE,4BAA4B,EAAE,SAAAA,CAC7BC,gBAAoD,EACpDC,SAAqC,EACrCC,cAAsB,EACtBT,UAAyB,EACzBU,aAAqB,EACZ;MACT,MAAMC,MAAM,GAAG,EAAE;MACjB,MAAMC,yBAAyB,GAAGC,iBAAiB,CAACC,qBAAqB,CAACP,gBAAgB,CAAC;MAC3F,MAAMQ,mBAAmB,GAAGC,WAAW,CAACC,gBAAgB,CACvDT,SAAS,EACTC,cACD,CAAC,CAACM,mBAAmB;MACrB,IAAIA,mBAAmB,EAAE;QACxB,KAAK,MAAMG,CAAC,IAAIlB,UAAU,EAAE;UAC3B,MAAMmB,SAAS,GAAGnB,UAAU,CAACkB,CAAC,CAAC;UAC/B,MAAME,QAAQ,GAAGL,mBAAmB,CAACI,SAAS,CAAC;UAC/C,MAAME,UAAU,GAAGX,aAAa,CAACY,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;UAC9C,MAAMC,eAAe,GAAGf,SAAS,EAAEgB,oBAAoB,CAAC,IAAIH,UAAU,IAAIF,SAAS,EAAE,CAAC;UACtF,IAAIM,UAAU;UACd,IAAIF,eAAe,EAAE;YACpBE,UAAU,GAAGC,OAAO,CAACC,aAAa,CACjCP,QAAQ,CAACQ,KAAK,EACdC,WAAW,CAACC,OAAO,CAACC,aAAa,CAACX,QAAQ,EAAE;cAAEY,OAAO,EAAET;YAAgB,CAAC,CAAC,IAAI,IAAI,CAAC,EAClFM,WAAW,CAACC,OAAO,CAACG,WAAW,CAACb,QAAQ,EAAE;cAAEY,OAAO,EAAET;YAAgB,CAAC,CAAC,IAAI,IAAI,CAChF,CAAC;UACF;UACA,MAAMW,SAAS,GAAGtB,yBAAyB,CAACO,SAAS,CAAC;UACtD,MAAMgB,iBAAiB,GAAGD,SAAS,GAAGA,SAAS,CAAC,CAAC,CAAC,GAAGE,SAAS;UAC9D,IAAID,iBAAiB,EAAE;YACtB,MAAME,0BAA0B,GAAGC,kBAAkB,CAACC,MAAM,CAACJ,iBAAiB,EAAEV,UAAU,EAAEC,OAAO,CAAC;YACpG,MAAMc,OAAO,GAAGpB,QAAQ,CAACQ,KAAK;YAC9B,IAAIxC,KAAK,GAAGqD,kBAAkB,CAACC,UAAU,CAACC,aAAa,CAACN,0BAA0B,CAACO,MAAM,CAAC,CAAC,CAAC,EAAEJ,OAAO,CAAC,CAAC;YACvG7B,MAAM,CAACkC,IAAI,CAAC,GAAG1B,SAAS,IAAI/B,KAAK,EAAE,CAAC;UACrC;QACD;MACD;MAEA,MAAM0D,kBAAkB,GAAGrC,cAAc,CAACsC,KAAK,CAAC,CAAC,EAAEtC,cAAc,CAACuC,WAAW,CAAC,GAAG,CAAC,CAAC;MACnF,MAAMC,gBAAgB,GAAGxC,cAAc,CAACyC,SAAS,CAACzC,cAAc,CAACuC,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;MACtF;MACA,OAAO,GAAGF,kBAAkB,IAAInC,MAAM,CAACwC,QAAQ,CAAC,CAAC,KAAKF,gBAAgB,EAAE;IACzE,CAAC;IACDG,4BAA4B,EAAE,SAAAA,CAC7BC,eAAyB,EACzBC,qBAA+B,EAC/BC,GAAyE,EACzEC,WAAoC,EAInC;MACD,IAAIC,qBAAqB,EAAEC,aAAa;MACxC,MAAMC,IAAI,GAAGJ,GAAG,IAAIK,0BAA0B,CAACL,GAAG,CAAC,IAAIA,GAAG,CAACI,IAAI;MAC/D,IAAIN,eAAe,EAAE;QACpB;QACA,IAAIC,qBAAqB,EAAE;UAC1BG,qBAAqB,GAAGE,IAAI,GAAG;YAAEE,IAAI,EAAEF;UAAK,CAAC,GAAG,CAAC,CAAC;UAClDD,aAAa,GAAG,CAAC,CAAC;QACnB,CAAC,MAAM;UACND,qBAAqB,GAAG,CAAC,CAAC;UAC1BC,aAAa,GAAGC,IAAI,GAAG;YAAE,CAACA,IAAI,GAAG,CAAC;UAAE,CAAC,GAAG,CAAC,CAAC;QAC3C;MACD,CAAC,MAAM,IACNH,WAAW,IACXA,WAAW,CAACM,oBAAoB,IAChCN,WAAW,CAACM,oBAAoB,CAAC1E,KAAK,IACtCoE,WAAW,CAACO,iBAAiB,EAC5B;QACDN,qBAAqB,GAAG;UAAErD,IAAI,EAAEoD,WAAW,CAACM,oBAAoB,CAAC1E,KAAK;UAAE4E,IAAI,EAAER,WAAW,CAACO;QAAkB,CAAC;QAC7GL,aAAa,GAAGC,IAAI,GAAG;UAAE,CAACA,IAAI,GAAG,CAAC;QAAE,CAAC,GAAG,CAAC,CAAC;MAC3C;MAEA,OAAO;QACNF,qBAAqB,EAAEA,qBAAqB;QAC5CC,aAAa,EAAEA;MAChB,CAAC;IACF,CAAC;IACDO,qBAAqB,EAAE,SAAAA,CACtBC,gBAAuB,EACvBpE,UAAkE,EAClEC,WAAmB,EACnBoE,eAAkD,EAClDC,aAAsB,EACtBC,SAA2B,EAC3BC,gBAAmC,EACnCjB,eAAyB,EACzBG,WAAoC,EACpCF,qBAA+B,EAC/BtD,UAA0B,EAC1BuE,mBAA4B,EAC5BC,cAAwB,EACxBC,YAAqB,EACrBjE,SAA0B,EACL;MACrB,MAAMkE,0BAA0B,GAAGJ,gBAAgB;MACnD,MAAMK,UAAU,GAAGJ,mBAAmB;MACtC,MAAM7D,aAAa,GAAGX,WAAW;MACjC,MAAM6E,SAAS,GAAGV,gBAAgB,CAACW,UAAU,CAAC,CAAC,CAAC,CAACzF,KAAK;MACtD,MAAM0F,OAAiB,GAAG,EAAE;MAC5B,IAAIvE,gBAAgB;MACpB,IAAIE,cAAc,GAAG,IAAI,CAACZ,kBAAkB,CAACC,UAAU,EAAEC,WAAW,EAAEC,UAAU,CAAC;MACjF,MAAMuD,GAAoF,GAAGrE,sBAAsB,CAAC6F,MAAM,CACzHb,gBAAgB,EAChBpE,UAAU,EACVsC,SAAS,EACTiB,eAAe,EACfG,WACD,CAAC;MACD,IAAIgB,cAAc,EAAE;QACnBM,OAAO,CAACjC,IAAI,CAAC,IAAImC,MAAM,CAAC;UAAEC,QAAQ,EAAE,IAAI;UAAEC,MAAM,EAAE,MAAM;UAAEC,MAAM,EAAE,IAAI;UAAExB,IAAI,EAAE;QAAiB,CAAC,CAAC,CAAC;MACnG;MACA,IAAIe,0BAA0B,EAAE;QAC/BnE,gBAAgB,GAAG6E,wCAAwC,CAC1D1E,aAAa,EACbF,SAAS,EACTkE,0BAA0B,EAC1B7D,iBAAiB,CAACwE,mBAAmB,CAACC,IAAI,CAACzE,iBAAiB,CAC7D,CAAC;QACD,KAAK,MAAM8C,IAAI,IAAIpD,gBAAgB,EAAE;UACpC,MAAMgF,UAAU,GAAGhF,gBAAgB,CAACoD,IAAI,CAAC;UACzC4B,UAAU,CAACC,OAAO,CAAC,UAAUtD,SAA2B,EAAE;YACzD,IAAI,CAACA,SAAS,CAACuD,WAAW,EAAE;cAC3BX,OAAO,CAACjC,IAAI,CACX,IAAImC,MAAM,CAAC;gBACVC,QAAQ,EAAE/C,SAAS,CAAC+C,QAA0B;gBAC9CC,MAAM,EAAEhD,SAAS,CAACgD,MAAM;gBACxBC,MAAM,EAAEjD,SAAS,CAACiD,MAAM;gBACxBxB,IAAI,EAAEzB,SAAS,CAACyB;cACjB,CAAC,CACF,CAAC;YACF;UACD,CAAC,CAAC;QACH;MACD;MACA,IAAIgB,UAAU,KAAK,GAAGlE,cAAc,GAAG,IAAIT,UAAU,IAAIA,UAAU,CAAC0F,MAAM,IAAInF,gBAAgB,EAAE;QAC/F,MAAMoF,WAAW,GAAG,IAAI,CAACrF,4BAA4B,CAACC,gBAAgB,EAAEC,SAAS,EAAEC,cAAc,EAAET,UAAU,EAAEU,aAAa,CAAC;QAC7HD,cAAc,GAAGkF,WAAW;MAC7B;MACA,MAAMC,wBAAwB,GAAG,IAAI,CAACxC,4BAA4B,CAACC,eAAe,EAAEC,qBAAqB,EAAEC,GAAG,EAAEC,WAAW,CAAC;MAC5H,MAAMC,qBAAqB,GAAGmC,wBAAwB,CAACnC,qBAAqB;MAC5E,MAAMC,aAAa,GAAGkC,wBAAwB,CAAClC,aAAa;MAC5D,MAAMmC,yBAAyB,GAAG1B,eAAe,GAAG;QAAE2B,YAAY,EAAE,CAAC3B,eAAe,CAACR,IAAI;MAAE,CAAC,GAAG,CAAC,CAAC;MACjG,MAAMoC,eAAe,GAAG;QACvB,GAAG,IAAI,CAACC,YAAY,CAAC9B,gBAAgB,EAAEE,aAAa,EAAEC,SAAS,EAAEI,YAAY,CAAC;QAC9EwB,aAAa,EAAE;UACdC,SAAS,EAAE;YACV,CAACzB,YAAY,GAAahB;UAC3B,CAAC;UACD0C,KAAK,EAAE;YACN,CAACvB,SAAS,GAAG;cAAE,GAAGiB;YAA0B,CAAC;YAC7C,GAAInC;UACL;QACD;MACD,CAAC;MACD,OAAO;QACNC,IAAI,EAAElD,cAAc;QACpB2F,iBAAiB,EAAE,IAAI;QACvBC,SAAS,EAAE,IAAI;QACfvB,OAAO,EAAEA,OAAO;QAChB9E,UAAU,EAAE+F,eAAe;QAC3B,GAAI7G,sBAAsB,CAACoH,WAAW,CAACpC,gBAAgB;MACxD,CAAC;IACF,CAAC;IAEDqC,8BAA8B,EAAE,SAAAA,CAAUlC,SAA2B,EAAEI,YAAqB,EAAwB;MACnH,IAAI+B,gBAAgB;MACpB,IAAInC,SAAS,IAAIA,SAAS,CAACqB,MAAM,EAAE;QAClC,IAAIrB,SAAS,CAAC,CAAC,CAAC,CAACoC,eAAe,EAAE;UACjCD,gBAAgB,GAAInC,SAAS,CAAC,CAAC,CAAC,CAACoC,eAAe,CAACC,OAAO,EAAyBC,IAAI;QACtF,CAAC,MAAM;UACNH,gBAAgB,GAAGnC,SAAS,CAAC,CAAC,CAAC,CAACuC,QAAQ,EAAExH,KAAK;QAChD;QACA,IAAIoH,gBAAgB,KAAK/B,YAAY,EAAE;UACtC,OAAO;YAAEoC,QAAQ,EAAEpC,YAAY,IAAIJ,SAAS,CAAC,CAAC,CAAC,CAACyC,UAAU,GAAG,OAAO,GAAG,EAAE;UAAE,CAAC;QAC7E;QACA,OAAO;UAAED,QAAQ,EAAEpC,YAAY,GAAG;QAAQ,CAAC;MAC5C;MACA,OAAO;QAAEoC,QAAQ,EAAEpC,YAAY,GAAG;MAAQ,CAAC;IAC5C,CAAC;IAEDuB,YAAY,EAAE,SAAAA,CACb9B,gBAAuB,EACvBE,aAAsB,EACtBC,SAA2B,EAC3BI,YAAqB,EACc;MACnC,IAAIP,gBAAgB,CAAC6C,SAAS,KAAK,oBAAoB,IAAI7C,gBAAgB,CAAC6C,SAAS,KAAK,kBAAkB,EAAE;QAC7G,OAAO,IAAI,CAACR,8BAA8B,CAAClC,SAAS,EAAEI,YAAY,CAAC;MACpE,CAAC,MAAM,IAAIL,aAAa,KAAK,UAAU,IAAIA,aAAa,KAAK,UAAU,IAAIA,aAAa,KAAK,oBAAoB,EAAE;QAClH,OAAO;UAAEyC,QAAQ,EAAE3C,gBAAgB,CAACW,UAAU,CAAC,CAAC,CAAC,CAACzF;QAAM,CAAC;MAC1D,CAAC,MAAM,IACNiF,SAAS,IACTA,SAAS,CAACqB,MAAM,IACfrB,SAAS,CAAC,CAAC,CAAC,CAACuC,QAAQ,EAAEF,OAAO,EAAkD/C,IAAI,KAAKO,gBAAgB,CAACW,UAAU,CAAC,CAAC,CAAC,CAACzF,KAAK,EAC7H;QACD,OAAO;UAAEyH,QAAQ,EAAExC,SAAS,CAAC,CAAC,CAAC,CAACuC,QAAQ,EAAEF,OAAO,EAAEtG,IAAI,IAAIiE,SAAS,CAAC,CAAC,CAAC,CAACyC,UAAU,GAAG,OAAO,GAAG,GAAG;QAAE,CAAC;MACtG,CAAC,MAAM;QACN,OAAO;UAAED,QAAQ,EAAE3C,gBAAgB,CAACW,UAAU,CAAC,CAAC,CAAC,CAAC6B,OAAO,EAAEtG;QAAK,CAAC;MAClE;IACD,CAAC;IAEDkG,WAAW,EAAE,SAAAA,CAAUpC,gBAAuB,EAAmD;MAChG,IAAIA,gBAAgB,CAAC6C,SAAS,KAAK,kBAAkB,EAAE;QACtD,OAAO;UAAEC,UAAU,EAAE,CAAC;UAAEtB,MAAM,EAAE;QAAE,CAAC;MACpC,CAAC,MAAM,IAAIxB,gBAAgB,CAAC6C,SAAS,KAAK,mBAAmB,EAAE;QAC9D,OAAO;UAAEC,UAAU,EAAE,CAAC;UAAEtB,MAAM,EAAE;QAAE,CAAC;MACpC,CAAC,MAAM;QACN,OAAO,EAAE;MACV;IACD,CAAC;IAEDuB,eAAe,EAAE,SAAAA,CAAUC,SAAoB,EAAEtC,SAAuB,EAAsB;MAC7F,MAAMuC,gBAAgB,GAAGvC,SAAS,EAAE8B,OAAO,EAAEU,WAAW,EAAEC,EAAE,EAAEC,gBAAgB;MAC9E,IAAIJ,SAAS,EAAEK,WAAW,EAAE;QAC3B,OAAOC,4CAA4C,CAACN,SAAS,CAAC;MAC/D,CAAC,MAAM,IAAIA,SAAS,EAAEO,sBAAsB,EAAE;QAC7C,MAAMC,UAAU,GAAGR,SAAS,CAACO,sBAAsB,CAACE,oBAAoB;QACxE,MAAMC,eAAe,GAAGV,SAAS,CAACW,KAAK;QACvC,MAAMC,uBAAuB,GAAGZ,SAAS,CAACO,sBAAsB,CAACM,sBAAsB,CAACrI,OAAO,CAAC,CAAC;QACjG,MAAMsI,uBAAuB,GAAGd,SAAS,CAACO,sBAAsB,CAACQ,sBAAsB,CAACvI,OAAO,CAAC,CAAC;QACjG,MAAMwI,wBAAwB,GAAGhB,SAAS,CAACO,sBAAsB,CAACU,uBAAuB,CAACzI,OAAO,CAAC,CAAC;QACnG,MAAM0I,yBAAyB,GAAGlB,SAAS,CAACO,sBAAsB,CAACY,wBAAwB,CAAC3I,OAAO,CAAC,CAAC;QACrG,MAAM4I,wBAAwB,GAAGpB,SAAS,CAACO,sBAAsB,CAACc,uBAAuB,CAAC7I,OAAO,CAAC,CAAC;QACnG,MAAM8I,wBAAwB,GAAGtB,SAAS,CAACO,sBAAsB,CAACgB,uBAAuB,CAAC/I,OAAO,CAAC,CAAC;QACnG,OAAOgJ,YAAY,CAACC,gCAAgC,CACnDjB,UAAU,EACVE,eAAe,EACfE,uBAAuB,EACvBE,uBAAuB,EACvBE,wBAAwB,EACxBE,yBAAyB,EACzBE,wBAAwB,EACxBE,wBACD,CAAC;MACF,CAAC,MAAM,IAAIrB,gBAAgB,IAAIA,gBAAgB,CAACzB,MAAM,EAAE;QACvD,OAAOxG,sBAAsB,CAAC0J,mBAAmB,CAAChE,SAAS,CAACxF,KAAK,EAAE+H,gBAAgB,CAAC;MACrF,CAAC,MAAM;QACN,OAAO/E,SAAS;MACjB;IACD,CAAC;IACDwG,mBAAmB,EAAE,SAAAA,CAAUhE,SAAiB,EAAEuC,gBAA6C,EAAsB;MACpH,IAAI0B,MAAM;MACV,MAAMjG,MAAgB,GAAG,EAAE;MAC3B,IAAIuE,gBAAgB,IAAIA,gBAAgB,CAACzB,MAAM,GAAG,CAAC,EAAE;QACpDyB,gBAAgB,CAAC3B,OAAO,CAAC,UAAUsD,oBAA0C,EAAE;UAC9E,IAAIA,oBAAoB,CAACjB,KAAK,IAAIiB,oBAAoB,CAACvB,WAAW,EAAE;YACnE,MAAMnI,KAAK,GACV,IAAI,GACJwF,SAAS,GACT,SAAS,GACTkE,oBAAoB,CAACjB,KAAK,GAC1B,OAAO,GACP3I,sBAAsB,CAAC6J,uBAAuB,CAACD,oBAAoB,CAACvB,WAAW,CAAC,GAChF,GAAG;YACJ3E,MAAM,CAACC,IAAI,CAACzD,KAAK,CAAC;UACnB;QACD,CAAC,CAAC;QACFyJ,MAAM,GAAGjG,MAAM,CAAC8C,MAAM,GAAG,CAAC,IAAI9C,MAAM,CAACoG,IAAI,CAAC,KAAK,CAAC,GAAG,cAAc;MAClE;MACA,OAAOH,MAAM,GAAG,KAAK,GAAGA,MAAM,GAAG,IAAI,GAAGzG,SAAS;IAClD,CAAC;IACD;AACD;AACA;AACA;AACA;AACA;IACC2G,uBAAuB,EAAE,SAAAA,CAAUE,WAAmB,EAAc;MACnE,MAAMC,UAAU,GAAGC,QAAQ,CAACC,UAAU;MACtC,IAAIC,SAAS;MACb,IAAIJ,WAAW,KAAK,6BAA6B,EAAE;QAClDI,SAAS,GAAGH,UAAU,CAACI,KAAK;MAC7B,CAAC,MAAM,IAAIL,WAAW,KAAK,6BAA6B,EAAE;QACzDI,SAAS,GAAGH,UAAU,CAACK,IAAI;MAC5B,CAAC,MAAM,IAAIN,WAAW,KAAK,6BAA6B,EAAE;QACzDI,SAAS,GAAGH,UAAU,CAACM,QAAQ;MAChC,CAAC,MAAM;QACNH,SAAS,GAAGH,UAAU,CAACO,OAAO;MAC/B;MACA,OAAOJ,SAAS;IACjB,CAAC;IACDK,gBAAgB,EAAE,SAAAA,CACjBC,eAAuB,EACvB7J,UAAuD,EACvDR,QAAiB,EACjB+D,eAAyB,EACzBG,WAAoC,EACpCoG,SAAkB,EAClBC,OAAiB,EACR;MACT,MAAMC,WAAW,GAAGH,eAAe,EAAEI,iBAAiB,GACnDJ,eAAe,CAACI,iBAAiB,CAAC,CAAC,CAAC,EAAEC,SAAS,EAAEtD,OAAO,EAAEuD,WAAW,EAAExK,WAAW,EAAEC,OAAO,CAAC,CAAC,GAC7F0C,SAAS;MACZ,MAAM7C,QAAQ,GAAGC,QAAQ,CAAC,CAACF,QAAQ,CAAC,CAAC;MACrC,MAAM4K,YAAY,GAAGC,YAAY,CAACC,kBAAkB,CAAC;QACpDC,KAAK,EAAE,OAAO;QACdC,SAAS,EAAE,KAAK;QAChBC,cAAc,EAAET;MACjB,CAAC,CAAC;MACF,IAAIU,KAAK,GAAGN,YAAY,CAACO,QAAQ,CAAC,CAAC;MACnC,IAAIlH,GAAG,GAAGrE,sBAAsB,CAAC6F,MAAM,CAAC4E,eAAe,EAAE7J,UAAU,EAAEsC,SAAS,EAAEiB,eAAe,EAAEG,WAAW,CAAC;MAC7G,MAAMkH,MAAM,GAAG9G,0BAA0B,CAASL,GAAG,CAAC,GAClDoH,WAAW,CAAS,MAAM,GAAGpL,QAAQ,EAAE,UAAU,CAAC,GACnDqL,QAAQ,CAACrH,GAAa,CAAC;MAC1B,MAAMsH,QAAQ,GAAGL,KAAK,GAAGI,QAAQ,CAACJ,KAAK,CAAC,GAAIG,WAAW,CAAC,cAAc,GAAGpL,QAAQ,EAAE,UAAU,CAAsC;MACnI,IAAI,CAACqK,SAAS,EAAE;QACfA,SAAS,GAAG,GAAG;MAChB;MACAA,SAAS,GAAG,GAAG,GAAGA,SAAS,GAAG,GAAG;MACjC,OAAOkB,iBAAiB,CAACC,YAAY,CAAC,CAACnB,SAAS,EAAEc,MAAM,EAAEG,QAAQ,CAAC,EAAEG,qBAAqB,CAACC,iBAAiB,CAAC,EAAEpB,OAAO,CAAC,IAAI,EAAE;IAC9H,CAAC;IACDqB,wBAAwB,EAAE,SAAAA,CAAUvB,eAAuB,EAAEtG,eAAyB,EAAEG,WAAoC,EAAU;MACrI,IAAI2H,YAAY;MAChB,IAAIC,WAAW;MACf,IAAI/H,eAAe,EAAE;QACpB+H,WAAW,GAAGzB,eAAe,EAAE0B,QAAQ,CAAC,CAAC,CAAC,EAAE3E,OAAO,EAAEtG,IAAI;MAC1D;MACA,IAAIuJ,eAAe,EAAE2B,eAAe,IAAI3B,eAAe,CAAC2B,eAAe,CAAC5F,MAAM,GAAG,CAAC,EAAE;QACnF0F,WAAW,GAAIzB,eAAe,CAAC2B,eAAe,CAAC,CAAC,CAAC,EAAE5E,OAAO,EAA6B5C,oBAAoB,EAAE1E,KAAK;MACnH,CAAC,MAAM,IAAI,CAACiE,eAAe,IAAIsG,eAAe,EAAE0B,QAAQ,IAAI1B,eAAe,EAAE0B,QAAQ,CAAC3F,MAAM,GAAG,CAAC,EAAE;QACjG0F,WAAW,GAAGzB,eAAe,CAAC0B,QAAQ,CAAC,CAAC,CAAC,EAAE3E,OAAO,EAAEtG,IAAI;MACzD;MACA,MAAMmL,aAAa,GAAG5B,eAAe,EAAE9E,UAAU,CAAC,CAAC,CAAC,EAAEzF,KAAyB;MAC/E,IAAIoM,cAAc,GAAG7B,eAAe,EAAE9E,UAAU,CAAC,CAAC,CAAC,EAAE6B,OAAO,EAAEU,WAAW,EAAEqE,MAAM,EAAEC,KAAK;MACxF,IAAI,CAACrI,eAAe,IAAIG,WAAW,EAAE;QACpC;QACA2H,YAAY,GAAG3H,WAAW,CAAC4D,WAAW,IAAI5D,WAAW,CAAC4D,WAAW,CAACqE,MAAM,IAAIjI,WAAW,CAAC4D,WAAW,CAACqE,MAAM,CAACC,KAAK;QAChH,IAAIP,YAAY,KAAK/I,SAAS,EAAE;UAC/B+I,YAAY,GAAGxB,eAAe,EAAE0B,QAAQ,GAAG,CAAC,CAAC,EAAE3E,OAAO,EAAEU,WAAW,EAAEqE,MAAM,EAAEC,KAAK;QACnF;MACD,CAAC,MAAM;QACNP,YAAY,GAAGxB,eAAe,EAAE0B,QAAQ,GAAG,CAAC,CAAC,EAAE3E,OAAO,EAAEU,WAAW,EAAEqE,MAAM,EAAEC,KAAK;MACnF;MACA,IAAIP,YAAY,KAAK/I,SAAS,EAAE;QAC/B+I,YAAY,GAAGC,WAAW;MAC3B;MACA,IAAII,cAAc,KAAKpJ,SAAS,EAAE;QACjCoJ,cAAc,GAAGD,aAAa;MAC/B;MACA,OAAOI,OAAO,CAACC,oBAAoB,CAAC,eAAe,CAAC,CAAEC,OAAO,CAAC,iEAAiE,EAAE,CAChIV,YAAY,EACZK,cAAc,CACd,CAAC;IACH,CAAC;IAEDM,UAAU,EAAE,SAAAA,CACXnC,eAAuB,EACvB7J,UAAuD,EACvDR,QAAiB,EACjB+D,eAAyB,EACzBG,WAAoC,EACpCuI,eAAkC,EACzB;MACT,MAAMC,SAAS,GAAGrC,eAAe,IAAIA,eAAe,CAAC,WAAW,CAAC;MACjE,IAAIsC,uBAAuB,GAAG/M,sBAAsB,CAACgM,wBAAwB,CAACvB,eAAe,EAAEtG,eAAe,EAAEG,WAAW,CAAC;MAC5HyI,uBAAuB,GAAGvD,YAAY,CAACwD,kBAAkB,CAACD,uBAAuB,CAAC;MAClF,IAAIF,eAAe,KAAK,KAAK,IAAIC,SAAS,KAAK,mBAAmB,EAAE;QACnE,OAAO,OAAOC,uBAAuB,IAAI;MAC1C;MAEA,MAAMrC,SAAS,GAAG+B,OAAO,CAACC,oBAAoB,CAAC,eAAe,CAAC,EAAEC,OAAO,CACvE,2DACD,CAAC;MACD,MAAMtM,QAAQ,GAAGC,QAAQ,CAAC,CAACF,QAAQ,CAAC,CAAC;MACrC,MAAM6M,eAAe,GAAGjN,sBAAsB,CAACwK,gBAAgB,CAC9DC,eAAe,EACf7J,UAAU,EACVP,QAAQ,EACR8D,eAAe,EACfG,WAAW,EACXoG,SAAS,EACT,IACD,CAAC;MACD,OAAO,MAAM,GAAGqC,uBAAuB,IAAIE,eAAe,GAAG,MAAM,GAAGA,eAAe,GAAG,GAAG,CAAC,GAAG,GAAG;IACnG,CAAC;IACDC,OAAO,EAAE,SAAAA,CACRC,aAAgD,EAChD9I,GAA4B,EAC5BzD,UAAuD,EACvDwM,UAAoB,EACpBC,wBAAiC,EACkD;MACnF,MAAMC,SAAkC,GAAG,CAAC,CAAC;MAC7C,MAAMvM,gBAAgB,GAAGH,UAAU,EAAEI,YAAY;MACjD,IAAImM,aAAa,IAAI9I,GAAG,IAAIK,0BAA0B,CAACyI,aAAa,CAAC,EAAE;QACtE;QACAG,SAAS,CAACjJ,GAAG,CAAC,GAAG;UAAEkJ,KAAK,EAAEJ,aAAa,CAAC1I;QAAK,CAAC;QAC9C,OAAO2I,UAAU,IAAID,aAAa,CAAC1I,IAAI,GAAG6I,SAAS,GAAGH,aAAa;MACpE,CAAC,MAAM,IAAIE,wBAAwB,EAAE;QACpC;QACA,MAAMG,gBAAgB,GACrBrM,WAAW,CAACJ,gBAAgB,CAAC,IAAI0M,WAAW,CAAC1M,gBAAgB,CAAC,GAC3DA,gBAAgB,CAAC0E,UAAU,CAAC+H,gBAAgB,GAC5CzM,gBAAgB,EAAE2M,UAAU,EAAEF,gBAAgB;QAClD,MAAMG,mBAAmB,GAAGH,gBAAgB,EAAEI,IAAI,CAAE1L,QAAkB,IAAKA,QAAQ,CAAChB,IAAI,IAAImM,wBAAwB,CAAC;QACrH,IAAIM,mBAAmB,EAAEzF,WAAW,EAAEiE,QAAQ,IAAI9H,GAAG,EAAE;UACtD8I,aAAa,GAAGQ,mBAAmB,EAAEzF,WAAW,EAAEiE,QAAQ,CAAC9H,GAAG,CAAsC;UACpGiJ,SAAS,CAACjJ,GAAG,CAAC,GAAG;YAAEkJ,KAAK,EAAEJ,aAAa,EAAE1I;UAAK,CAAC;QAChD;QACA,OAAO0I,aAAa,IAAIC,UAAU,IAAI1I,0BAA0B,CAACyI,aAAa,CAAC,IAAIA,aAAa,CAAC1I,IAAI,GAClG6I,SAAS,GACTH,aAAa;MACjB;IACD,CAAC;IACDtH,MAAM,EAAE,SAAAA,CACP4E,eAAuB,EACvB7J,UAAuD,EACvDwM,UAAoB,EACpBjJ,eAAyB,EACzBG,WAAoC,EAC8C;MAClF,IAAIuJ,OAAoB,GAAG,CAAC,CAAC;MAC7B,IAAI1J,eAAe,EAAE;QACpB0J,OAAO,GAAGpD,eAAe,EAAE0B,QAAQ,CAAC,CAAC,CAAgB;MACtD;MACA,IAAI1B,eAAe,EAAE2B,eAAe,IAAI3B,eAAe,CAAC2B,eAAe,CAAC5F,MAAM,GAAG,CAAC,EAAE;QACnFqH,OAAO,GAAIpD,eAAe,CAAC2B,eAAe,CAAC,CAAC,CAAC,EAAE5E,OAAO,EAA6B5C,oBAAoB,EAAE4C,OAAO,EAAEU,WAAW,EAC1HiE,QAAuB;MAC3B,CAAC,MAAM,IAAI,CAAChI,eAAe,IAAIsG,eAAe,EAAE0B,QAAQ,IAAI1B,eAAe,CAAC0B,QAAQ,CAAC3F,MAAM,GAAG,CAAC,EAAE;QAChGqH,OAAO,GAAGpD,eAAe,CAAC0B,QAAQ,CAAC,CAAC,CAAC;MACtC;MACA,MAAM2B,WAAW,GAAGD,OAAO,EAAEC,WAAW;MACxC,MAAMnJ,IAAI,GAAGkJ,OAAO,EAAEE,IAAI;MAC1B,IAAIV,wBAA4C;MAChD,IAAI,CAAClJ,eAAe,IAAIG,WAAW,EAAE;QACpC+I,wBAAwB,GAAG/I,WAAW,CAACM,oBAAoB,IAAIN,WAAW,CAACM,oBAAoB,CAAC1E,KAAK;MACtG,CAAC,MAAM;QACNmN,wBAAwB,GAAGQ,OAAO,EAAE3N,KAAK;MAC1C;MACA,OACC,IAAI,CAACgN,OAAO,CAACY,WAAW,EAAE,aAAa,EAAElN,UAAU,EAAEwM,UAAU,EAAEC,wBAAwB,CAAC,IAC1F,IAAI,CAACH,OAAO,CAACvI,IAAI,EAAE,MAAM,EAAE/D,UAAU,EAAEwM,UAAU,EAAEC,wBAAwB,CAAC;IAE9E,CAAC;IACDW,cAAc,EAAE,SAAAA,CAAU7N,WAA8B,EAAsB;MAC7E,IAAIA,WAAW,IAAIA,WAAW,CAACI,WAAW,EAAE;QAC3C,OAAOJ,WAAW,CAACI,WAAW,CAACC,OAAO,CAAC,CAAC;MACzC;MACA,OAAO0C,SAAS;IACjB,CAAC;IACD+K,eAAe,EAAE,SAAAA,CAAUxD,eAAuB,EAAEyD,SAAmB,EAAW;MACjF,MAAMpB,SAAS,GAAGrC,eAAe,IAAIA,eAAe,CAAC,WAAW,CAAC;MACjE,IAAIyD,SAAS,EAAE;QACd,OAAO,KAAK;MACb,CAAC,MAAM,IAAI,EAAEpB,SAAS,KAAK,kBAAkB,IAAIA,SAAS,KAAK,mBAAmB,CAAC,EAAE;QACpF,OAAO,KAAK;MACb,CAAC,MAAM;QACN,OAAO,IAAI;MACZ;IACD,CAAC;IACDqB,4BAA4B,EAAE,SAAAA,CAAUC,YAAkC,EAAsB;MAC/F,IAAIA,YAAY,CAAC5H,MAAM,GAAG,CAAC,EAAE;QAC5B,MAAM6H,KAAe,GAAG,EAAE;QAC1B,IAAIC,KAAK,GAAG,EAAE;QACdF,YAAY,CAAC9H,OAAO,CAAC,UAAUiI,WAA0B,EAAE;UAC1D,IAAIA,WAAW,CAACC,iBAAiB,EAAE;YAClCH,KAAK,CAAC1K,IAAI,CAAC,+BAA+B4K,WAAW,CAACC,iBAAiB,IAAI,CAAC;UAC7E;QACD,CAAC,CAAC;QACF,IAAIH,KAAK,CAAC7H,MAAM,GAAG,CAAC,EAAE;UACrB8H,KAAK,GAAGD,KAAK,CAACvE,IAAI,CAAC,CAAC;UACpB,OAAO,WAAWwE,KAAK,0FAA0F;QAClH,CAAC,MAAM;UACN,OAAOpL,SAAS;QACjB;MACD,CAAC,MAAM;QACN,OAAOA,SAAS;MACjB;IACD,CAAC;IAEDuL,qBAAqB,EAAE,SAAAA,CAAUhE,eAAuB,EAAU;MACjE,MAAM/E,SAAS,GAAG+E,eAAe,EAAE9E,UAAU,CAAC,CAAC,CAAC,EAAE6B,OAAO,EAAEtG,IAAI;MAC/D,OACC,8BAA8B,GAAGwE,SAAS,GAAG,iFAAiF;IAEhI,CAAC;IAEDgJ,6BAA6B,EAAE,SAAAA,CAAUC,YAA0B,EAAwB;MAC1F,MAAMlE,eAAe,GAAGkE,YAAY,CAAClE,eAAe;MACpD,MAAMmE,0BAAgD,GAAG,CAAC,CAAC;MAC3D,IAAID,YAAY,CAACpJ,YAAY,IAAIkF,eAAe,EAAE9E,UAAU,IAAI8E,eAAe,CAAC9E,UAAU,CAAC,CAAC,CAAC,EAAE;QAC9F,MAAMkJ,EAAE,GAAGvO,QAAQ,CAAC,CAACqO,YAAY,CAACvO,QAAQ,CAAC,CAAC;QAC5CwO,0BAA0B,CAACE,mBAAmB,GAAG,gBAAgB,GAAGD,EAAE,GAAG,cAAc;QACvFD,0BAA0B,CAACG,sBAAsB,GAAG,gBAAgB,GAAGF,EAAE,GAAG,iBAAiB;QAC7FD,0BAA0B,CAACI,2BAA2B,GAAG,gBAAgB,GAAGH,EAAE,GAAG,sBAAsB;QACvG,IAAII,mBAAmB;QACvB,IAAIxE,eAAe,EAAEI,iBAAiB,IAAIJ,eAAe,EAAEI,iBAAiB,CAAC,CAAC,CAAC,EAAE;UAChFoE,mBAAmB,GAAGxE,eAAe,EAAEI,iBAAiB,CAAC,CAAC,CAAC,EAAEC,SAAS,GACnEL,eAAe,EAAEI,iBAAiB,CAAC,CAAC,CAAC,CAACC,SAAS,CAACtD,OAAO,GACvDiD,eAAe,EAAEI,iBAAiB,CAAC,CAAC,CAAC;QACzC;QACA,MAAMnF,SAAS,GAAG+E,eAAe,EAAE9E,UAAU,CAAC,CAAC,CAAC;QAChD,MAAM7E,UAAU,GAAG0I,YAAY,CAAC0F,aAAa,CAACP,YAAY,CAAC9N,WAAW,EAAE8N,YAAY,CAACQ,YAAY,CAAC,CAAC,CAAC;QACpG,MAAMC,aAAa,GAAG1J,SAAS,EAAE8B,OAAO,EAAEU,WAAW,EAAEqE,MAAM,EAAE8C,IAAmD;QAClHT,0BAA0B,CAACU,kBAAkB,GAAGtP,sBAAsB,CAAC+E,qBAAqB,CAC3F0F,eAAe,EACfkE,YAAY,CAAC/N,UAAU,EACvB+N,YAAY,CAAC9N,WAAW,EACxBuO,aAAa,EACb1J,SAAS,CAAC8B,OAAO,EAAE+H,IAAI,EACvBZ,YAAY,EAAExJ,SAAS,EACvBwJ,YAAY,CAACvJ,gBAAgB,EAC7BuJ,YAAY,CAACxK,eAAe,EAC5BwK,YAAY,CAACa,mBAAmB,EAChCb,YAAY,CAACvK,qBAAqB,EAClCtD,UAAU,EACV6N,YAAY,CAACtJ,mBAAmB,EAChCsJ,YAAY,CAACrJ,cAAc,EAC3BqJ,YAAY,CAACpJ,YAAY,EACzBoJ,YAAY,CAACQ,YAAY,CAAC,CAC3B,CAAC;QACDP,0BAA0B,CAACa,WAAW,GAAGzP,sBAAsB,CAACgO,cAAc,CAAEiB,mBAAmB,EAAgBlE,WAAW,CAAC;QAC/H6D,0BAA0B,CAACc,GAAG,GAAG1P,sBAAsB,CAAC6F,MAAM,CAC7D4E,eAAe,EACfkE,YAAY,CAAC/N,UAAU,EACvB,IAAI,EACJ+N,YAAY,CAACxK,eAAe,EAC5BwK,YAAY,CAACa,mBACd,CAAC;QACDZ,0BAA0B,CAACR,YAAY,GAAGO,YAAY,CAACP,YAAY;QACnE,MAAMA,YAAY,GAAG5E,YAAY,CAACmG,eAAe,CAAChB,YAAY,CAACP,YAAiC,CAAC;QACjGQ,0BAA0B,CAACgB,kBAAkB,GAAGjB,YAAY,CAACP,YAAY,GACtEpO,sBAAsB,CAACmO,4BAA4B,CAACC,YAAoC,CAAC,GACzFlL,SAAS;QACZ0L,0BAA0B,CAACxJ,gBAAgB,GAAGuJ,YAAY,CAACvJ,gBAAgB,GAAGuJ,YAAY,CAACvJ,gBAAgB,GAAGlC,SAAS;QACvH0L,0BAA0B,CAACiB,qBAAqB,GAAG/O,UAAU;QAC7D,MAAMgP,gBAAgB,GAAGnB,YAAY,CACnCQ,YAAY,CAAC,CAAC,EACb7M,oBAAoB,CAACqM,YAAY,CAAC9N,WAAW,GAAG,IAAI,GAAG6E,SAAS,CAACqK,kBAAkB,CAAC3N,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACrG,IAAI0N,gBAAgB,EAAE;UACrB,MAAME,eAAe,GAAGrB,YAAY,CAACsB,6BAA6B,CACjEH,gBAAgB,CAACI,OAAO,CAAC,CAAC,EAC1BvB,YAAY,CAAC9N,WACd,CAAC;UACD+N,0BAA0B,CAACuB,UAAU,GAAGC,cAAc,CAACJ,eAAe,EAAmC,CAAC,CAAC,CAAC;QAC7G;QACApB,0BAA0B,CAACf,OAAO,GAAG7N,sBAAsB,CAACU,aAAa,CAACiO,YAAY,CAACpJ,YAAY,CAAC;QACpGqJ,0BAA0B,CAACyB,cAAc,GAAGrQ,sBAAsB,CAACC,sBAAsB,CACxF0O,YAAY,CAACpJ,YAAY,EACxB0J,mBAAmB,EAAgBlE,WAAW,EAC/C4D,YAAY,CAACvO,QACd,CAAC;QACDwO,0BAA0B,CAAC0B,KAAK,GAAGtQ,sBAAsB,CAAC+H,eAAe,CAACkH,mBAAmB,EAAevJ,SAAS,CAAC;MACvH;MACA,OAAOkJ,0BAA0B;IAClC;EACD,CAAC;EAAC,OAEa5O,sBAAsB;AAAA","ignoreList":[],"file":"InteractiveChartHelper-dbg.js"}