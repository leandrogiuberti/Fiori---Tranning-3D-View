{"version":3,"names":["getVisualFilterChart","visualFilter","showError","getInteractiveChartWithError","chartType","getInteractiveChart","_exports","chartAnnotation","chartMeasure","Dimensions","_jsx","InteractiveLineChart","errorMessageTitle","errorMessage","interactiveChartProperties","InteractiveChartHelper","getInteractiveChartProperties","_jsxs","InteractiveBarChart","selectionChanged","event","VisualFilterRuntime","getChartProperties","children","getBarChartAggregations","customData","getCustomData","getLineChartAggregations","visualFilterChartProperties","visible","showErrorExpression","errorMessageTitleExpression","errorMessageExpression","bars","aggregationBinding","points","barChartAggregations","InteractiveBarChartBar","label","chartLabel","value","measure","displayedValue","color","selected","lineChartAggregations","InteractiveLineChartPoint","id","generate","metaPath","dimension","CustomData","outParameter","valuelistProperty","multipleSelectionAllowed","$target","name","isPathAnnotationExpression","annotations","Common","Text","path","undefined","scalefactor","uom","inParameters","inParameterFilters","type","selectionVariant","required","showOverlayInitially","requiredProperties","stringifiedParameters","draftSupported"],"sourceRoot":".","sources":["InteractiveCharts.tsx"],"sourcesContent":["import { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { isPathAnnotationExpression } from \"sap/fe/core/helpers/TypeGuards\";\nimport InteractiveBarChart, { InteractiveBarChart$SelectionChangedEvent, type $InteractiveBarChartSettings } from \"sap/suite/ui/microchart/InteractiveBarChart\";\nimport InteractiveBarChartBar from \"sap/suite/ui/microchart/InteractiveBarChartBar\";\nimport InteractiveLineChart, { InteractiveLineChart$SelectionChangedEvent, type $InteractiveLineChartSettings } from \"sap/suite/ui/microchart/InteractiveLineChart\";\nimport InteractiveLineChartPoint, { type $InteractiveLineChartPointSettings } from \"sap/suite/ui/microchart/InteractiveLineChartPoint\";\nimport { AggregationBindingInfo } from \"sap/ui/base/ManagedObject\";\nimport CustomData from \"sap/ui/core/CustomData\";\nimport InteractiveChartHelper, { type InteractiveChartType } from \"../InteractiveChartHelper\";\nimport type VisualFilter from \"../VisualFilter\";\nimport VisualFilterRuntime from \"../VisualFilterRuntime\";\n\ntype visualFilterChartAggregations = Pick<$InteractiveBarChartSettings, \"bars\"> | Pick<$InteractiveLineChartSettings, \"points\">;\n\nexport function getVisualFilterChart(visualFilter: VisualFilter): string {\n\tif (visualFilter.showError) {\n\t\treturn getInteractiveChartWithError(visualFilter);\n\t} else if (visualFilter.chartType) {\n\t\treturn getInteractiveChart(visualFilter);\n\t} else {\n\t\treturn \"\";\n\t}\n}\n\nexport function getInteractiveChartWithError(visualFilter: VisualFilter): string {\n\tconst chartAnnotation = visualFilter.chartAnnotation;\n\tif (visualFilter.chartMeasure && chartAnnotation?.Dimensions && chartAnnotation.Dimensions[0]) {\n\t\treturn (\n\t\t\t<InteractiveLineChart\n\t\t\t\tshowError={visualFilter.showError}\n\t\t\t\terrorMessageTitle={visualFilter.errorMessageTitle}\n\t\t\t\terrorMessage={visualFilter.errorMessage}\n\t\t\t/>\n\t\t);\n\t}\n\treturn \"\";\n}\n\nexport function getInteractiveChart(visualFilter: VisualFilter): string {\n\tconst interactiveChartProperties = InteractiveChartHelper.getInteractiveChartProperties(visualFilter);\n\tif (visualFilter.chartType === \"UI.ChartType/Bar\") {\n\t\treturn (\n\t\t\t<InteractiveBarChart\n\t\t\t\tselectionChanged={(event: InteractiveBarChart$SelectionChangedEvent): void => {\n\t\t\t\t\tVisualFilterRuntime.selectionChanged(event);\n\t\t\t\t}}\n\t\t\t\t{...getChartProperties(interactiveChartProperties, visualFilter)}\n\t\t\t>\n\t\t\t\t{getBarChartAggregations(interactiveChartProperties)}\n\t\t\t\t{{\n\t\t\t\t\tcustomData: getCustomData(visualFilter, interactiveChartProperties)\n\t\t\t\t}}\n\t\t\t</InteractiveBarChart>\n\t\t);\n\t} else if (visualFilter.chartType === \"UI.ChartType/Line\") {\n\t\treturn (\n\t\t\t<InteractiveLineChart\n\t\t\t\tselectionChanged={(event: InteractiveLineChart$SelectionChangedEvent): void => {\n\t\t\t\t\tVisualFilterRuntime.selectionChanged(event);\n\t\t\t\t}}\n\t\t\t\t{...getChartProperties(interactiveChartProperties, visualFilter)}\n\t\t\t>\n\t\t\t\t{getLineChartAggregations(interactiveChartProperties)}\n\t\t\t\t{{\n\t\t\t\t\tcustomData: getCustomData(visualFilter, interactiveChartProperties)\n\t\t\t\t}}\n\t\t\t</InteractiveLineChart>\n\t\t);\n\t}\n\treturn \"\";\n}\n\nfunction getChartProperties(\n\tinteractiveChartProperties: InteractiveChartType,\n\tvisualFilter: VisualFilter\n): Partial<PropertiesOf<$InteractiveBarChartSettings | $InteractiveLineChartPointSettings>> | undefined {\n\tconst visualFilterChartProperties: $InteractiveBarChartSettings | $InteractiveLineChartPointSettings = {\n\t\tvisible: interactiveChartProperties.showErrorExpression,\n\t\tshowError: interactiveChartProperties.showErrorExpression,\n\t\terrorMessageTitle: interactiveChartProperties.errorMessageTitleExpression,\n\t\terrorMessage: interactiveChartProperties.errorMessageExpression\n\t};\n\tif (visualFilter.chartType === \"UI.ChartType/Bar\") {\n\t\tvisualFilterChartProperties.bars = interactiveChartProperties.aggregationBinding as unknown as AggregationBindingInfo;\n\t} else if (visualFilter.chartType === \"UI.ChartType/Line\") {\n\t\t(visualFilterChartProperties as $InteractiveLineChartSettings).points =\n\t\t\tinteractiveChartProperties.aggregationBinding as unknown as AggregationBindingInfo;\n\t}\n\treturn visualFilterChartProperties;\n}\n\nfunction getBarChartAggregations(interactiveChartProperties: InteractiveChartType): visualFilterChartAggregations {\n\tconst barChartAggregations = {};\n\t(barChartAggregations as $InteractiveBarChartSettings).bars = (\n\t\t<InteractiveBarChartBar\n\t\t\tlabel={interactiveChartProperties.chartLabel}\n\t\t\tvalue={interactiveChartProperties.measure}\n\t\t\tdisplayedValue={interactiveChartProperties.displayedValue}\n\t\t\tcolor={interactiveChartProperties.color}\n\t\t\tselected=\"{path: '$field>/conditions', formatter: 'sap.fe.macros.visualfilters.VisualFilterRuntime.getAggregationSelected'}\"\n\t\t/>\n\t);\n\treturn barChartAggregations;\n}\n\nfunction getLineChartAggregations(interactiveChartProperties: InteractiveChartType): visualFilterChartAggregations {\n\tconst lineChartAggregations = {};\n\t(lineChartAggregations as $InteractiveLineChartSettings).points = (\n\t\t<InteractiveLineChartPoint\n\t\t\tlabel={interactiveChartProperties.chartLabel}\n\t\t\tvalue={interactiveChartProperties.measure}\n\t\t\tdisplayedValue={interactiveChartProperties.displayedValue}\n\t\t\tcolor={interactiveChartProperties.color}\n\t\t\tselected=\"{path: '$field>/conditions', formatter: 'sap.fe.macros.visualfilters.VisualFilterRuntime.getAggregationSelected'}\"\n\t\t/>\n\t);\n\treturn lineChartAggregations;\n}\n\nfunction getCustomData(visualFilter: VisualFilter, interactiveChartProperties: InteractiveChartType): CustomData[] {\n\tconst id = generate([visualFilter.metaPath]);\n\tconst dimension = visualFilter.chartAnnotation?.Dimensions[0];\n\treturn [\n\t\t<CustomData key={\"outParameter\"} value={visualFilter.outParameter} />,\n\t\t<CustomData key={\"valuelistProperty\"} value={visualFilter.valuelistProperty} />,\n\t\t<CustomData key={\"multipleSelectionAllowed\"} value={visualFilter.multipleSelectionAllowed} />,\n\t\t<CustomData key={\"dimension\"} value={dimension?.$target?.name} />,\n\t\t<CustomData\n\t\t\tkey={\"dimensionText\"}\n\t\t\tvalue={\n\t\t\t\tisPathAnnotationExpression(dimension?.$target?.annotations.Common?.Text)\n\t\t\t\t\t? dimension?.$target?.annotations.Common?.Text.path\n\t\t\t\t\t: undefined\n\t\t\t}\n\t\t/>,\n\t\t<CustomData key={\"scalefactor\"} value={interactiveChartProperties.scalefactor} />,\n\t\t<CustomData key={\"measure\"} value={visualFilter.chartMeasure} />,\n\t\t<CustomData key={\"uom\"} value={interactiveChartProperties.uom} />,\n\t\t<CustomData key={\"inParameters\"} value={interactiveChartProperties.inParameters} />,\n\t\t<CustomData key={\"inParameterFilters\"} value={interactiveChartProperties.inParameterFilters} />,\n\t\t<CustomData key={\"dimensionType\"} value={dimension?.$target?.type} />,\n\t\t<CustomData key={\"selectionVariantAnnotation\"} value={interactiveChartProperties.selectionVariant} />,\n\t\t<CustomData key={\"required\"} value={visualFilter.required} />,\n\t\t<CustomData key={\"showOverlayInitially\"} value={visualFilter.showOverlayInitially} />,\n\t\t<CustomData key={\"requiredProperties\"} value={visualFilter.requiredProperties} />,\n\t\t<CustomData key={\"infoPath\"} value={id} />,\n\t\t<CustomData key={\"parameters\"} value={interactiveChartProperties.stringifiedParameters} />,\n\t\t<CustomData key={\"draftSupported\"} value={visualFilter.draftSupported} />\n\t];\n}\n"],"mappings":"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","ignoreList":[],"file":"InteractiveCharts-dbg.js"}