{"version":3,"file":"FilterHelper.js","names":["oExcludeMap","Contains","StartsWith","EndsWith","Empty","NotEmpty","LE","GE","LT","GT","BT","NE","EQ","_getDateTimeOffsetCompliantValue","sValue","oValue","match","indexOf","length","split","undefined","_exports","_getDateCompliantValue","exact","arguments","getTypeCompliantValue","value","edmType","option","isTypeFilterable","retValue","numFloat","Number","isNaN","parseFloat","toString","numInt","parseInt","resolveConditionValues","sOption","oV1","oV2","sSign","validOperators","semanticDateOperators","oValue2","sInternalOperation","isDateOrDateTimeOffset","nIndexOf","nLastIndex","lastIndexOf","substring","Log","warning","includes","condition","values","isEmpty","operator","push","getRangeProperty","sProperty","_buildConditionsFromSelectionRanges","Ranges","property","propertyName","getCustomConditions","conditions","hasValueHelpAnnotation","hasValueHelp","forEach","Range","oCondition","getConditions","type","_getProperty","propertyPath","metaModel","entitySetPath","propertyContext","getMetaContext","dataModelObjectPath","getInvolvedDataModelObjects","targetObject","_buildFiltersConditionsFromSelectOption","selectOption","PropertyName","filterConditions","$PropertyPath","targetProperty","concat","getFiltersConditionsFromSelectionVariant","sEntitySetPath","oMetaModel","selectionVariant","oFilterConditions","aSelectOptions","SelectOptions","aParameters","Parameters","sPropertyName","Object","keys","parameter","sPropertyPath","value1","PropertyValue","value2","path","isParameter","validated","ConditionValidated","Validated","sign","Sign","Option","Low","High","conditionValues","NotValidated","Condition","createCondition","err","message","Error","String","error","getDefaultValueFilters","oContext","properties","getInterface","getPath","getModel","key","defaultFilterValue","getObject","getDefaultSemanticDateFilters","defaultSemanticDates","oInterface","sEntityTypePath","aPropertyPathParts","sPath","iPropertyPathLength","sNavigationPath","slice","join","vProperty","$kind","$isCollection","operatorParamsArr","getEditStatusFilter","ofilterConditions","getFilterConditions","entitySet","viewData","showDraftEditState","editStateFilter","entityTypeAnnotations","entityTypeProperties","defaultFilters","defaultSemanticDateFilters","retFilterConditions","filterConfigs","controlConfiguration","getConditionsOfSupportedOperators","JSON","stringify","replace","requiresIContext","entitySetContext","controlConfigs","filterFields","useSemanticDateRange","createBindingContext","propertyMetaInfo","propertyFilterFieldConfig","settings","operatorsString","FilterFieldHelper","operators","CommonHelper","stringifyCustomData","supportedOperators","_updateConditionsForSupportedOperators","propertyConditions","retConditions","allSemanticDateOperators","SemanticDateOperators","getSemanticDateOperations","filter"],"sources":["./FilterHelper.ts"],"sourcesContent":["import type { Property } from \"@sap-ux/vocabularies-types\";\nimport type {\n\tParameterTypes,\n\tSelectionRangeTypeTypes,\n\tSelectionVariantType,\n\tSelectOptionType\n} from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport type { FilterManifestConfiguration } from \"sap/fe/core/converters/ManifestSettings\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { ViewData } from \"sap/fe/core/services/TemplatedViewServiceFactory\";\nimport { hasValueHelp } from \"sap/fe/core/templating/PropertyHelper\";\nimport type { DefaultTypeForEdmType } from \"sap/fe/core/type/EDM\";\nimport { isTypeFilterable } from \"sap/fe/core/type/EDM\";\nimport FilterFieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport type { SelectOption } from \"sap/fe/navigation/SelectionVariant\";\nimport type UI5Date from \"sap/ui/core/date/UI5Date\";\nimport type { IContext } from \"sap/ui/core/util/XMLPreprocessor\";\nimport type { ConditionObject } from \"sap/ui/mdc/condition/Condition\";\nimport Condition from \"sap/ui/mdc/condition/Condition\";\nimport ConditionValidated from \"sap/ui/mdc/enums/ConditionValidated\";\nimport type { EntitySet } from \"sap/ui/model/odata/ODataMetaModel\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type { MetaModelType } from \"../../../../../../../types/metamodel_types\";\nimport CommonHelper from \"../CommonHelper\";\nimport SemanticDateOperators from \"./SemanticDateOperators\";\n\nexport type FilterConditions = {\n\toperator: string;\n\tvalue1?: unknown;\n\tvalue2?: unknown;\n\tvalues: Array<string>;\n\tisEmpty?: boolean | null;\n\tvalidated?: string;\n\tisParameter?: boolean;\n\tpath?: string;\n};\n\ntype ConditionValue = string | number | boolean | Date | UI5Date | undefined | null;\n\nconst oExcludeMap: Record<string, string> = {\n\tContains: \"NotContains\",\n\tStartsWith: \"NotStartsWith\",\n\tEndsWith: \"NotEndsWith\",\n\tEmpty: \"NotEmpty\",\n\tNotEmpty: \"Empty\",\n\tLE: \"NOTLE\",\n\tGE: \"NOTGE\",\n\tLT: \"NOTLT\",\n\tGT: \"NOTGT\",\n\tBT: \"NOTBT\",\n\tNE: \"EQ\",\n\tEQ: \"NE\"\n};\n\nexport function _getDateTimeOffsetCompliantValue(sValue: string): string | undefined {\n\tlet oValue;\n\tif (sValue.match(/^(\\d{4})-(\\d{1,2})-(\\d{1,2})T(\\d{1,2}):(\\d{1,2}):(\\d{1,2})\\+(\\d{1,2}):(\\d{1,2})/)) {\n\t\toValue = sValue.match(/^(\\d{4})-(\\d{1,2})-(\\d{1,2})T(\\d{1,2}):(\\d{1,2}):(\\d{1,2})\\+(\\d{1,2}):(\\d{1,2})/)![0];\n\t} else if (sValue.match(/^(\\d{4})-(\\d{1,2})-(\\d{1,2})T(\\d{1,2}):(\\d{1,2}):(\\d{1,2}).(\\d{1,7})[+-](\\d{1,2}):(\\d{1,2})/)) {\n\t\toValue = sValue;\n\t} else if (sValue.match(/^(\\d{4})-(\\d{1,2})-(\\d{1,2})T(\\d{1,2}):(\\d{1,2}):(\\d{1,2})/)) {\n\t\toValue = `${sValue.match(/^(\\d{4})-(\\d{1,2})-(\\d{1,2})T(\\d{1,2}):(\\d{1,2}):(\\d{1,2})/)![0]}+0000`;\n\t} else if (sValue.match(/^(\\d{4})-(\\d{1,2})-(\\d{1,2})/)) {\n\t\toValue = `${sValue.match(/^(\\d{4})-(\\d{1,2})-(\\d{1,2})/)![0]}T00:00:00+0000`;\n\t} else if (sValue.indexOf(\"Z\") === sValue.length - 1) {\n\t\toValue = `${sValue.split(\"Z\")[0]}+0100`;\n\t} else {\n\t\toValue = undefined;\n\t}\n\treturn oValue;\n}\n\n/**\n * Get a date compliant value from the raw value.\n * @param sValue Raw value to convert to a date compliant value.\n * @param exact If true, the value must match the exact date format (YYYY-MM-DD).\n * @returns Converted date compliant value or null if the value does not match the expected format.\n */\nexport function _getDateCompliantValue(sValue: string, exact = false): string | null {\n\tif (exact) {\n\t\treturn sValue.match(/^(\\d{4})-(\\d{1,2})-(\\d{1,2})$/) ? sValue.match(/^(\\d{4})-(\\d{1,2})-(\\d{1,2})/)![0] : null;\n\t}\n\treturn sValue.match(/^(\\d{4})-(\\d{1,2})-(\\d{1,2})/)\n\t\t? sValue.match(/^(\\d{4})-(\\d{1,2})-(\\d{1,2})/)![0]\n\t\t: sValue.match(/^(\\d{8})/) && sValue.match(/^(\\d{8})/)![0];\n}\n\n/**\n * Method to get the compliant value type based on the data type.\n * @param  sValue Raw value\n * @param  sType The property type\n * @param  option The operation to consider\n * @returns Value to be propagated to the condition.\n */\n\nexport function getTypeCompliantValue(value: ConditionValue, edmType: string, option?: string): ConditionValue {\n\tif (!isTypeFilterable(edmType as keyof typeof DefaultTypeForEdmType) || !option) {\n\t\treturn undefined;\n\t}\n\n\tif (value === undefined || value === null) {\n\t\treturn value;\n\t}\n\tlet retValue: ConditionValue = value;\n\tswitch (edmType) {\n\t\tcase \"Edm.Boolean\":\n\t\t\tif (typeof value === \"boolean\") {\n\t\t\t\tretValue = value;\n\t\t\t} else {\n\t\t\t\tretValue = value === \"true\" || (value === \"false\" ? false : undefined);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"Edm.Double\":\n\t\tcase \"Edm.Single\":\n\t\t\tif (value === \"\" && option === \"EQ\") {\n\t\t\t\t// the operator will be calulcated as empty\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tconst numFloat = Number(value);\n\t\t\tretValue = isNaN(numFloat) ? undefined : parseFloat(value.toString());\n\t\t\tbreak;\n\t\tcase \"Edm.Byte\":\n\t\tcase \"Edm.Int16\":\n\t\tcase \"Edm.Int32\":\n\t\tcase \"Edm.SByte\":\n\t\t\tif (retValue === \"\" && option === \"EQ\") {\n\t\t\t\t// the operator will be calulcated as empty\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tconst numInt = Number(value);\n\t\t\tretValue = isNaN(numInt) ? undefined : parseInt(value.toString(), 10);\n\t\t\tbreak;\n\t\tcase \"Edm.Date\":\n\t\t\tretValue = _getDateCompliantValue(value.toString());\n\t\t\tbreak;\n\t\tcase \"Edm.DateTimeOffset\":\n\t\t\tretValue = _getDateCompliantValue(value.toString(), true) ?? _getDateTimeOffsetCompliantValue(value.toString());\n\t\t\tbreak;\n\t\tcase \"Edm.TimeOfDay\":\n\t\t\tretValue = value.toString().match(/(\\d{1,2}):(\\d{1,2}):(\\d{1,2})/)\n\t\t\t\t? value.toString().match(/(\\d{1,2}):(\\d{1,2}):(\\d{1,2})/)?.[0]\n\t\t\t\t: undefined;\n\t\t\tbreak;\n\t\tdefault:\n\t}\n\n\treturn retValue === null ? undefined : retValue;\n}\n\n/**\n * Method to create a condition.\n * @param  sOption Operator to be used.\n * @param  oV1 Lower value\n * @param  oV2 Higher value\n * @param sSign\n * @param validOperators Operators supported.\n * @returns Condition to be created\n */\nexport function resolveConditionValues(\n\tsOption: string | undefined,\n\toV1: string,\n\toV2: string,\n\tsSign: string | undefined,\n\tvalidOperators: string[] = [],\n\tsemanticDateOperators: string[] = [],\n\tedmType?: string\n): FilterConditions | undefined {\n\tlet oValue = oV1,\n\t\toValue2,\n\t\tsInternalOperation: string;\n\tif (oV1 === undefined || oV1 === null) {\n\t\treturn undefined;\n\t}\n\tconst isDateOrDateTimeOffset = edmType === \"Edm.Date\" || edmType === \"Edm.DateTimeOffset\";\n\tswitch (sOption) {\n\t\tcase \"CP\":\n\t\t\tsInternalOperation = \"Contains\";\n\t\t\tif (oValue) {\n\t\t\t\tconst nIndexOf = oValue.indexOf(\"*\");\n\t\t\t\tconst nLastIndex = oValue.lastIndexOf(\"*\");\n\n\t\t\t\t// only when there are '*' at all\n\t\t\t\tif (nIndexOf > -1) {\n\t\t\t\t\tif (nIndexOf === 0 && nLastIndex !== oValue.length - 1) {\n\t\t\t\t\t\tsInternalOperation = \"EndsWith\";\n\t\t\t\t\t\toValue = oValue.substring(1, oValue.length);\n\t\t\t\t\t} else if (nIndexOf !== 0 && nLastIndex === oValue.length - 1) {\n\t\t\t\t\t\tsInternalOperation = \"StartsWith\";\n\t\t\t\t\t\toValue = oValue.substring(0, oValue.length - 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\toValue = oValue.substring(1, oValue.length - 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tLog.warning(\"Contains Option cannot be used without '*'.\");\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"EQ\":\n\t\t\tsInternalOperation = sOption;\n\t\t\tif (oV1 === \"\" && (validOperators.length === 0 || validOperators.includes(\"Empty\"))) {\n\t\t\t\tsInternalOperation = \"Empty\";\n\t\t\t} else if (isDateOrDateTimeOffset && semanticDateOperators.includes(\"DATE\") && oV1.match(/^(\\d{4})-(\\d{1,2})-(\\d{1,2})$/)) {\n\t\t\t\tsInternalOperation = \"DATE\";\n\t\t\t} else if (edmType === \"Edm.DateTimeOffset\" && semanticDateOperators.includes(\"DATETIME\")) {\n\t\t\t\tsInternalOperation = \"DATETIME\";\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"NE\":\n\t\t\tsInternalOperation = oV1 === \"\" ? \"NotEmpty\" : sOption;\n\t\t\tbreak;\n\t\tcase \"BT\":\n\t\t\tif (oV2 === undefined || oV2 === null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\toValue2 = oV2;\n\t\t\tsInternalOperation = isDateOrDateTimeOffset && semanticDateOperators.includes(\"DATERANGE\") ? \"DATERANGE\" : sOption;\n\t\t\tbreak;\n\t\tcase \"LE\":\n\t\t\tsInternalOperation = isDateOrDateTimeOffset && semanticDateOperators.includes(\"TO\") ? \"TO\" : sOption;\n\t\t\tbreak;\n\t\tcase \"GE\":\n\t\t\tsInternalOperation = isDateOrDateTimeOffset && semanticDateOperators.includes(\"FROM\") ? \"FROM\" : sOption;\n\t\t\tbreak;\n\t\tcase \"GT\":\n\t\tcase \"LT\":\n\t\t\tsInternalOperation = sOption;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tLog.warning(`Selection Option is not supported : '${sOption}'`);\n\t\t\treturn undefined;\n\t}\n\tif (sSign === \"E\") {\n\t\tsInternalOperation = oExcludeMap[sInternalOperation];\n\t}\n\tconst condition: FilterConditions = {\n\t\tvalues: [],\n\t\tisEmpty: null,\n\t\toperator: sInternalOperation\n\t};\n\tif (sInternalOperation !== \"Empty\") {\n\t\tcondition.values.push(oValue);\n\t\tif (oValue2) {\n\t\t\tcondition.values.push(oValue2);\n\t\t}\n\t}\n\treturn condition;\n}\n\n/* Method to get the Range property from the Selection Option */\nexport function getRangeProperty(sProperty: string): string {\n\treturn sProperty.indexOf(\"/\") > 0 ? sProperty.split(\"/\")[1] : sProperty;\n}\n\nfunction _buildConditionsFromSelectionRanges(\n\tRanges: MetaModelType<SelectionRangeTypeTypes>[],\n\tproperty: Property,\n\tpropertyName: string,\n\tgetCustomConditions?: Function\n): ConditionObject[] {\n\tconst conditions: ConditionObject[] = [];\n\tconst hasValueHelpAnnotation = hasValueHelp(property);\n\tRanges?.forEach((Range: MetaModelType<SelectionRangeTypeTypes>) => {\n\t\tconst oCondition = getCustomConditions\n\t\t\t? getCustomConditions(Range, property, propertyName)\n\t\t\t: getConditions(Range, property.type, hasValueHelpAnnotation);\n\t\tif (oCondition) {\n\t\t\tconditions.push(oCondition);\n\t\t}\n\t});\n\treturn conditions;\n}\n\n/**\n * Method to get the concerned property for the property path.\n * @param  propertyPath Relative property path from annotations\n * @param  metaModel Metamodel\n * @param  entitySetPath Filter bar entitySet path\n * @returns Property if found.\n */\nfunction _getProperty(propertyPath: string, metaModel: ODataMetaModel, entitySetPath: string): Property | undefined {\n\tconst propertyContext = metaModel.getMetaContext(`${entitySetPath}/${propertyPath}`),\n\t\tdataModelObjectPath = getInvolvedDataModelObjects<Property>(propertyContext);\n\n\treturn dataModelObjectPath.targetObject;\n}\n\nfunction _buildFiltersConditionsFromSelectOption(\n\tselectOption: MetaModelType<SelectOptionType> | SelectOptionType,\n\tmetaModel: ODataMetaModel,\n\tentitySetPath: string,\n\tgetCustomConditions?: Function\n): Record<string, FilterConditions[]> {\n\tconst propertyName = selectOption.PropertyName as { value?: string; $PropertyPath: string },\n\t\tfilterConditions: Record<string, FilterConditions[]> = {},\n\t\tpropertyPath: string = propertyName.value || propertyName?.$PropertyPath,\n\t\tRanges: MetaModelType<SelectionRangeTypeTypes>[] = selectOption.Ranges ?? [];\n\tconst targetProperty = _getProperty(propertyPath, metaModel, entitySetPath);\n\tif (targetProperty) {\n\t\tconst conditions: ConditionObject[] = _buildConditionsFromSelectionRanges(\n\t\t\tRanges,\n\t\t\ttargetProperty,\n\t\t\tpropertyPath,\n\t\t\tgetCustomConditions\n\t\t);\n\t\tif (conditions.length) {\n\t\t\tfilterConditions[propertyPath] = (filterConditions[propertyPath] || []).concat(conditions);\n\t\t}\n\t}\n\treturn filterConditions;\n}\n\nexport function getFiltersConditionsFromSelectionVariant(\n\tsEntitySetPath: string,\n\toMetaModel: ODataMetaModel,\n\tselectionVariant: MetaModelType<SelectionVariantType> | SelectionVariantType,\n\tgetCustomConditions?: Function\n): Record<string, FilterConditions[]> {\n\tlet oFilterConditions: Record<string, FilterConditions[]> = {};\n\tif (!selectionVariant) {\n\t\treturn oFilterConditions;\n\t}\n\tconst aSelectOptions = selectionVariant.SelectOptions,\n\t\taParameters = selectionVariant.Parameters as MetaModelType<ParameterTypes>[];\n\taSelectOptions?.forEach((selectOption) => {\n\t\tconst propertyName = selectOption.PropertyName as { value?: string; $PropertyPath: string };\n\t\tconst sPropertyName = propertyName.value || propertyName.$PropertyPath;\n\t\tif (Object.keys(oFilterConditions).includes(sPropertyName)) {\n\t\t\toFilterConditions[sPropertyName] = oFilterConditions[sPropertyName].concat(\n\t\t\t\t_buildFiltersConditionsFromSelectOption(selectOption, oMetaModel, sEntitySetPath, getCustomConditions)[sPropertyName]\n\t\t\t);\n\t\t} else {\n\t\t\toFilterConditions = {\n\t\t\t\t...oFilterConditions,\n\t\t\t\t..._buildFiltersConditionsFromSelectOption(selectOption, oMetaModel, sEntitySetPath, getCustomConditions)\n\t\t\t};\n\t\t}\n\t});\n\taParameters?.forEach((parameter) => {\n\t\tconst sPropertyPath = (parameter.PropertyName as { value?: string }).value || parameter.PropertyName!.$PropertyPath;\n\t\tconst oCondition: FilterConditions = getCustomConditions\n\t\t\t? ({\n\t\t\t\t\toperator: \"EQ\",\n\t\t\t\t\tvalue1: parameter.PropertyValue,\n\t\t\t\t\tvalue2: null,\n\t\t\t\t\tpath: sPropertyPath,\n\t\t\t\t\tisParameter: true\n\t\t\t  } as unknown as FilterConditions) // FIXME path here is unexpected\n\t\t\t: {\n\t\t\t\t\toperator: \"EQ\",\n\t\t\t\t\tvalues: [parameter.PropertyValue],\n\t\t\t\t\tisEmpty: null,\n\t\t\t\t\tvalidated: ConditionValidated.Validated,\n\t\t\t\t\tisParameter: true\n\t\t\t  };\n\t\toFilterConditions[sPropertyPath] = [oCondition];\n\t});\n\n\treturn oFilterConditions;\n}\n\nexport function getConditions(\n\tselectOption: MetaModelType<SelectOption>,\n\tedmType: string,\n\thasValueHelpAnnotation: boolean,\n\tvalidOperators: string[] = [],\n\tsemanticDateOperators: string[] = []\n): ConditionObject | undefined {\n\tlet condition;\n\n\ttry {\n\t\tconst sign: string = getRangeProperty(selectOption.Sign!);\n\t\tconst option: string = getRangeProperty(selectOption.Option!);\n\t\tconst value1 = getTypeCompliantValue(selectOption.Low, edmType, option);\n\t\tconst value2 = selectOption.High ? getTypeCompliantValue(selectOption.High, edmType, option) : undefined;\n\t\tconst conditionValues = resolveConditionValues(\n\t\t\toption,\n\t\t\tvalue1 as string,\n\t\t\tvalue2 as string,\n\t\t\tsign,\n\t\t\tvalidOperators,\n\t\t\tsemanticDateOperators,\n\t\t\tedmType\n\t\t);\n\t\tif (conditionValues) {\n\t\t\t// 1. Conditions with EQ operator of properties with VH need to be set Validated, they are shown in VH Panel.\n\t\t\t// 2. Other conditions of properties without VH or non-EQ operators cannot be represented in VH panel, they will be in Define Conditions Panel. These are set NotValidated.\n\t\t\tconst validated =\n\t\t\t\thasValueHelpAnnotation && conditionValues.operator === \"EQ\"\n\t\t\t\t\t? ConditionValidated.Validated\n\t\t\t\t\t: ConditionValidated.NotValidated;\n\t\t\tcondition = Condition.createCondition(conditionValues.operator, conditionValues.values, null, null, validated);\n\t\t}\n\t} catch (err: unknown) {\n\t\tconst message = err instanceof Error ? err.message : String(err);\n\t\tLog.error(`FE : Core : FilterHelper : getConditions : ${message}`);\n\t}\n\n\treturn condition;\n}\n\nconst getDefaultValueFilters = function (oContext: IContext, properties: unknown): Record<string, FilterConditions[]> {\n\tconst filterConditions: Record<string, FilterConditions[]> = {};\n\tconst entitySetPath = oContext.getInterface(1).getPath(),\n\t\toMetaModel = oContext.getInterface(1).getModel() as ODataMetaModel;\n\tif (properties) {\n\t\tfor (const key in properties) {\n\t\t\tconst defaultFilterValue = oMetaModel.getObject(`${entitySetPath}/${key}@com.sap.vocabularies.Common.v1.FilterDefaultValue`);\n\t\t\tif (defaultFilterValue !== undefined) {\n\t\t\t\tconst PropertyName = key;\n\t\t\t\tfilterConditions[PropertyName] = [\n\t\t\t\t\tCondition.createCondition(\"EQ\", [defaultFilterValue], null, null, ConditionValidated.Validated) as FilterConditions\n\t\t\t\t];\n\t\t\t}\n\t\t}\n\t}\n\treturn filterConditions;\n};\n\nconst getDefaultSemanticDateFilters = function (\n\toContext: IContext,\n\tdefaultSemanticDates: Record<string, FilterConditions[]>\n): Record<string, FilterConditions[]> {\n\tconst filterConditions: Record<string, FilterConditions[]> = {};\n\tconst oInterface = oContext.getInterface(1);\n\tconst oMetaModel = oInterface.getModel() as ODataMetaModel;\n\tconst sEntityTypePath = oInterface.getPath();\n\tfor (const key in defaultSemanticDates) {\n\t\tif (defaultSemanticDates[key][0]) {\n\t\t\tconst aPropertyPathParts = key.split(\"::\");\n\t\t\tlet sPath = \"\";\n\t\t\tconst iPropertyPathLength = aPropertyPathParts.length;\n\t\t\tconst sNavigationPath = aPropertyPathParts.slice(0, aPropertyPathParts.length - 1).join(\"/\");\n\t\t\tconst sProperty = aPropertyPathParts[iPropertyPathLength - 1];\n\t\t\tif (sNavigationPath) {\n\t\t\t\t//Create Proper Condition Path e.g. _Item*/Property or _Item/Property\n\t\t\t\tconst vProperty = oMetaModel.getObject(sEntityTypePath + \"/\" + sNavigationPath);\n\t\t\t\tif (vProperty.$kind === \"NavigationProperty\" && vProperty.$isCollection) {\n\t\t\t\t\tsPath += `${sNavigationPath}*/`;\n\t\t\t\t} else if (vProperty.$kind === \"NavigationProperty\") {\n\t\t\t\t\tsPath += `${sNavigationPath}/`;\n\t\t\t\t}\n\t\t\t}\n\t\t\tsPath += sProperty;\n\t\t\tconst operatorParamsArr = \"values\" in defaultSemanticDates[key][0] ? defaultSemanticDates[key][0].values : [];\n\t\t\tfilterConditions[sPath] = [\n\t\t\t\tCondition.createCondition(defaultSemanticDates[key][0].operator, operatorParamsArr, null, null, null) as FilterConditions\n\t\t\t];\n\t\t}\n\t}\n\treturn filterConditions;\n};\n\nexport function getEditStatusFilter(): Record<string, ConditionObject[]> {\n\tconst ofilterConditions: Record<string, ConditionObject[]> = {};\n\tofilterConditions[\"$editState\"] = [Condition.createCondition(\"DRAFT_EDIT_STATE\", [\"ALL\"], null, null, ConditionValidated.Validated)];\n\treturn ofilterConditions;\n}\n\nexport function getFilterConditions(\n\toContext: IContext,\n\tfilterConditions: {\n\t\tselectionVariant?: MetaModelType<SelectionVariantType> | SelectionVariantType;\n\t\tdefaultSemanticDates?: Record<string, FilterConditions[]>;\n\t},\n\tentitySet: MetaModelType<EntitySet>,\n\tviewData?: ViewData,\n\tshowDraftEditState = true\n): string | undefined {\n\tlet editStateFilter;\n\tconst entitySetPath = oContext.getInterface(1).getPath(),\n\t\toMetaModel = oContext.getInterface(1).getModel(),\n\t\tentityTypeAnnotations = oMetaModel?.getObject(`${entitySetPath}@`),\n\t\tentityTypeProperties = oMetaModel?.getObject(`${entitySetPath}/`);\n\tif (\n\t\tentityTypeAnnotations &&\n\t\t(entityTypeAnnotations[\"@com.sap.vocabularies.Common.v1.DraftRoot\"] ||\n\t\t\tentityTypeAnnotations[\"@com.sap.vocabularies.Common.v1.DraftNode\"]) &&\n\t\tshowDraftEditState\n\t) {\n\t\teditStateFilter = getEditStatusFilter();\n\t}\n\tconst selectionVariant = filterConditions?.selectionVariant;\n\tconst defaultSemanticDates = filterConditions?.defaultSemanticDates || {};\n\tconst defaultFilters = getDefaultValueFilters(oContext, entityTypeProperties);\n\tconst defaultSemanticDateFilters = getDefaultSemanticDateFilters(oContext, defaultSemanticDates);\n\tlet retFilterConditions: Record<string, FilterConditions[]> = {};\n\n\tif (selectionVariant) {\n\t\tretFilterConditions = getFiltersConditionsFromSelectionVariant(\n\t\t\tentitySetPath as string,\n\t\t\toMetaModel as ODataMetaModel,\n\t\t\tselectionVariant\n\t\t);\n\t} else if (defaultFilters) {\n\t\tretFilterConditions = defaultFilters;\n\t}\n\tif (defaultSemanticDateFilters) {\n\t\t// only for semantic date:\n\t\t// 1. value from manifest get merged with SV\n\t\t// 2. manifest value is given preference when there is same semantic date property in SV and manifest\n\t\tretFilterConditions = { ...retFilterConditions, ...defaultSemanticDateFilters };\n\t}\n\tif (editStateFilter) {\n\t\tretFilterConditions = { ...retFilterConditions, ...editStateFilter };\n\t}\n\tconst filterConfigs = viewData?.controlConfiguration?.[\"@com.sap.vocabularies.UI.v1.SelectionFields\"] ?? {};\n\tretFilterConditions = getConditionsOfSupportedOperators(oContext.getInterface(1), retFilterConditions, filterConfigs);\n\treturn Object.keys(retFilterConditions).length > 0 ? JSON.stringify(retFilterConditions).replace(/([{}])/g, \"\\\\$1\") : undefined;\n}\ngetFilterConditions.requiresIContext = true;\n\n/**\n * Get only the conditions with supported operators.\n * @param  entitySetContext EntitySet interface\n * @param  filterConditions All filter conditions\n * @param  controlConfigs FilterBar configuration\n * @returns Filter conditions.\n */\nexport function getConditionsOfSupportedOperators(\n\tentitySetContext: IContext,\n\tfilterConditions: Record<string, FilterConditions[]>,\n\tcontrolConfigs: FilterManifestConfiguration\n): Record<string, FilterConditions[]> {\n\tconst metaModel = entitySetContext.getModel() as ODataMetaModel;\n\tconst { filterFields = {}, useSemanticDateRange = true } = controlConfigs;\n\n\tfor (const property in filterConditions) {\n\t\ttry {\n\t\t\tconst propertyContext = metaModel.createBindingContext(`${entitySetContext.getPath()}/${property}`);\n\t\t\tconst propertyMetaInfo = propertyContext?.getObject();\n\t\t\tconst propertyFilterFieldConfig = filterFields[property]?.settings;\n\t\t\tif (propertyContext) {\n\t\t\t\tconst operatorsString = FilterFieldHelper.operators(\n\t\t\t\t\tpropertyContext,\n\t\t\t\t\tpropertyMetaInfo,\n\t\t\t\t\tuseSemanticDateRange,\n\t\t\t\t\tCommonHelper.stringifyCustomData(propertyFilterFieldConfig),\n\t\t\t\t\tentitySetContext.getPath() || \"\"\n\t\t\t\t);\n\t\t\t\tconst supportedOperators = operatorsString ? operatorsString.split(\",\") : [];\n\t\t\t\tfilterConditions[property] = _updateConditionsForSupportedOperators(\n\t\t\t\t\tsupportedOperators,\n\t\t\t\t\tfilterConditions[property],\n\t\t\t\t\tproperty\n\t\t\t\t);\n\t\t\t}\n\t\t} catch (err: unknown) {\n\t\t\tconst message = err instanceof Error ? err.message : String(err);\n\t\t\tLog.error(`FE : FilterBar : Error determining conditions for supported operators of property ${property} : ${message}`);\n\t\t}\n\t}\n\treturn filterConditions;\n}\n\n/**\n * Filter conditions.\n * @param  supportedOperators Supported Operators for the filter field\n * @param  propertyConditions Conditions of the particular property\n * @param  propertyName Property name\n * @returns Filtered conditions.\n */\nfunction _updateConditionsForSupportedOperators(\n\tsupportedOperators: string[],\n\tpropertyConditions: FilterConditions[],\n\tpropertyName: string\n): FilterConditions[] {\n\tlet retConditions = propertyConditions;\n\tconst allSemanticDateOperators = SemanticDateOperators.getSemanticDateOperations();\n\tif (supportedOperators.length > 0) {\n\t\tretConditions = propertyConditions.filter((condition) => {\n\t\t\tconst operator = condition.operator;\n\t\t\tif (allSemanticDateOperators.includes(operator) && !supportedOperators.includes(operator)) {\n\t\t\t\t// If it is a semantic operator and is not supported.\n\t\t\t\tLog.warning(`FE : FilterBar : ${operator} not supported for property ${propertyName}. Hence, not applied to FilterBar.`);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}, [] as FilterConditions[]);\n\t}\n\treturn retConditions;\n}\n"],"mappings":";;;;maAwCA,MAAMA,EAAsC,CAC3CC,SAAU,cACVC,WAAY,gBACZC,SAAU,cACVC,MAAO,WACPC,SAAU,QACVC,GAAI,QACJC,GAAI,QACJC,GAAI,QACJC,GAAI,QACJC,GAAI,QACJC,GAAI,KACJC,GAAI,MAGE,SAASC,EAAiCC,GAChD,IAAIC,EACJ,GAAID,EAAOE,MAAM,mFAAoF,CACpGD,EAASD,EAAOE,MAAM,mFAAoF,EAC3G,MAAO,GAAIF,EAAOE,MAAM,+FAAgG,CACvHD,EAASD,CACV,MAAO,GAAIA,EAAOE,MAAM,8DAA+D,CACtFD,EAAS,GAAGD,EAAOE,MAAM,8DAA+D,SACzF,MAAO,GAAIF,EAAOE,MAAM,gCAAiC,CACxDD,EAAS,GAAGD,EAAOE,MAAM,gCAAiC,kBAC3D,MAAO,GAAIF,EAAOG,QAAQ,OAASH,EAAOI,OAAS,EAAG,CACrDH,EAAS,GAAGD,EAAOK,MAAM,KAAK,SAC/B,KAAO,CACNJ,EAASK,SACV,CACA,OAAOL,CACR,CAEAM,EAAAR,mCAMO,SAASS,EAAuBR,GAA8C,IAA9BS,EAAKC,UAAAN,OAAA,GAAAM,UAAA,KAAAJ,UAAAI,UAAA,GAAG,MAC9D,GAAID,EAAO,CACV,OAAOT,EAAOE,MAAM,iCAAmCF,EAAOE,MAAM,gCAAiC,GAAK,IAC3G,CACA,OAAOF,EAAOE,MAAM,gCACjBF,EAAOE,MAAM,gCAAiC,GAC9CF,EAAOE,MAAM,aAAeF,EAAOE,MAAM,YAAa,EAC1D,CAEAK,EAAAC,yBAQO,SAASG,EAAsBC,EAAuBC,EAAiBC,GAC7E,IAAKC,EAAiBF,KAAmDC,EAAQ,CAChF,OAAOR,SACR,CAEA,GAAIM,IAAUN,WAAaM,IAAU,KAAM,CAC1C,OAAOA,CACR,CACA,IAAII,EAA2BJ,EAC/B,OAAQC,GACP,IAAK,cACJ,UAAWD,IAAU,UAAW,CAC/BI,EAAWJ,CACZ,KAAO,CACNI,EAAWJ,IAAU,SAAWA,IAAU,QAAU,MAAQN,UAC7D,CACA,MACD,IAAK,aACL,IAAK,aACJ,GAAIM,IAAU,IAAME,IAAW,KAAM,CAEpC,KACD,CACA,MAAMG,EAAWC,OAAON,GACxBI,EAAWG,MAAMF,GAAYX,UAAYc,WAAWR,EAAMS,YAC1D,MACD,IAAK,WACL,IAAK,YACL,IAAK,YACL,IAAK,YACJ,GAAIL,IAAa,IAAMF,IAAW,KAAM,CAEvC,KACD,CACA,MAAMQ,EAASJ,OAAON,GACtBI,EAAWG,MAAMG,GAAUhB,UAAYiB,SAASX,EAAMS,WAAY,IAClE,MACD,IAAK,WACJL,EAAWR,EAAuBI,EAAMS,YACxC,MACD,IAAK,qBACJL,EAAWR,EAAuBI,EAAMS,WAAY,OAAStB,EAAiCa,EAAMS,YACpG,MACD,IAAK,gBACJL,EAAWJ,EAAMS,WAAWnB,MAAM,iCAC/BU,EAAMS,WAAWnB,MAAM,mCAAmC,GAC1DI,UACH,MACD,SAGD,OAAOU,IAAa,KAAOV,UAAYU,CACxC,CAEAT,EAAAI,wBASO,SAASa,EACfC,EACAC,EACAC,EACAC,GAI+B,IAH/BC,EAAwBnB,UAAAN,OAAA,GAAAM,UAAA,KAAAJ,UAAAI,UAAA,GAAG,GAAE,IAC7BoB,EAA+BpB,UAAAN,OAAA,GAAAM,UAAA,KAAAJ,UAAAI,UAAA,GAAG,GAAE,IACpCG,EAAgBH,UAAAN,OAAA,EAAAM,UAAA,GAAAJ,UAEhB,IAAIL,EAASyB,EACZK,EACAC,EACD,GAAIN,IAAQpB,WAAaoB,IAAQ,KAAM,CACtC,OAAOpB,SACR,CACA,MAAM2B,EAAyBpB,IAAY,YAAcA,IAAY,qBACrE,OAAQY,GACP,IAAK,KACJO,EAAqB,WACrB,GAAI/B,EAAQ,CACX,MAAMiC,EAAWjC,EAAOE,QAAQ,KAChC,MAAMgC,EAAalC,EAAOmC,YAAY,KAGtC,GAAIF,GAAY,EAAG,CAClB,GAAIA,IAAa,GAAKC,IAAelC,EAAOG,OAAS,EAAG,CACvD4B,EAAqB,WACrB/B,EAASA,EAAOoC,UAAU,EAAGpC,EAAOG,OACrC,MAAO,GAAI8B,IAAa,GAAKC,IAAelC,EAAOG,OAAS,EAAG,CAC9D4B,EAAqB,aACrB/B,EAASA,EAAOoC,UAAU,EAAGpC,EAAOG,OAAS,EAC9C,KAAO,CACNH,EAASA,EAAOoC,UAAU,EAAGpC,EAAOG,OAAS,EAC9C,CACD,KAAO,CACNkC,EAAIC,QAAQ,+CACZ,OAAOjC,SACR,CACD,CACA,MACD,IAAK,KACJ0B,EAAqBP,EACrB,GAAIC,IAAQ,KAAOG,EAAezB,SAAW,GAAKyB,EAAeW,SAAS,UAAW,CACpFR,EAAqB,OACtB,MAAO,GAAIC,GAA0BH,EAAsBU,SAAS,SAAWd,EAAIxB,MAAM,iCAAkC,CAC1H8B,EAAqB,MACtB,MAAO,GAAInB,IAAY,sBAAwBiB,EAAsBU,SAAS,YAAa,CAC1FR,EAAqB,UACtB,CACA,MACD,IAAK,KACJA,EAAqBN,IAAQ,GAAK,WAAaD,EAC/C,MACD,IAAK,KACJ,GAAIE,IAAQrB,WAAaqB,IAAQ,KAAM,CACtC,MACD,CACAI,EAAUJ,EACVK,EAAqBC,GAA0BH,EAAsBU,SAAS,aAAe,YAAcf,EAC3G,MACD,IAAK,KACJO,EAAqBC,GAA0BH,EAAsBU,SAAS,MAAQ,KAAOf,EAC7F,MACD,IAAK,KACJO,EAAqBC,GAA0BH,EAAsBU,SAAS,QAAU,OAASf,EACjG,MACD,IAAK,KACL,IAAK,KACJO,EAAqBP,EACrB,MACD,QACCa,EAAIC,QAAQ,wCAAwCd,MACpD,OAAOnB,UAET,GAAIsB,IAAU,IAAK,CAClBI,EAAqB9C,EAAY8C,EAClC,CACA,MAAMS,EAA8B,CACnCC,OAAQ,GACRC,QAAS,KACTC,SAAUZ,GAEX,GAAIA,IAAuB,QAAS,CACnCS,EAAUC,OAAOG,KAAK5C,GACtB,GAAI8B,EAAS,CACZU,EAAUC,OAAOG,KAAKd,EACvB,CACD,CACA,OAAOU,CACR,CAEAlC,EAAAiB,yBACO,SAASsB,EAAiBC,GAChC,OAAOA,EAAU5C,QAAQ,KAAO,EAAI4C,EAAU1C,MAAM,KAAK,GAAK0C,CAC/D,CAACxC,EAAAuC,mBAED,SAASE,EACRC,EACAC,EACAC,EACAC,GAEA,MAAMC,EAAgC,GACtC,MAAMC,EAAyBC,EAAaL,GAC5CD,GAAQO,QAASC,IAChB,MAAMC,EAAaN,EAChBA,EAAoBK,EAAOP,EAAUC,GACrCQ,EAAcF,EAAOP,EAASU,KAAMN,GACvC,GAAII,EAAY,CACfL,EAAWR,KAAKa,EACjB,IAED,OAAOL,CACR,CASA,SAASQ,EAAaC,EAAsBC,EAA2BC,GACtE,MAAMC,EAAkBF,EAAUG,eAAe,GAAGF,KAAiBF,KACpEK,EAAsBC,EAAsCH,GAE7D,OAAOE,EAAoBE,YAC5B,CAEA,SAASC,EACRC,EACAR,EACAC,EACAZ,GAEA,MAAMD,EAAeoB,EAAaC,aACjCC,EAAuD,CAAC,EACxDX,EAAuBX,EAAavC,OAASuC,GAAcuB,cAC3DzB,EAAmDsB,EAAatB,QAAU,GAC3E,MAAM0B,EAAiBd,EAAaC,EAAcC,EAAWC,GAC7D,GAAIW,EAAgB,CACnB,MAAMtB,EAAgCL,EACrCC,EACA0B,EACAb,EACAV,GAED,GAAIC,EAAWjD,OAAQ,CACtBqE,EAAiBX,IAAiBW,EAAiBX,IAAiB,IAAIc,OAAOvB,EAChF,CACD,CACA,OAAOoB,CACR,CAEO,SAASI,EACfC,EACAC,EACAC,EACA5B,GAEA,IAAI6B,EAAwD,CAAC,EAC7D,IAAKD,EAAkB,CACtB,OAAOC,CACR,CACA,MAAMC,EAAiBF,EAAiBG,cACvCC,EAAcJ,EAAiBK,WAChCH,GAAgB1B,QAASe,IACxB,MAAMpB,EAAeoB,EAAaC,aAClC,MAAMc,EAAgBnC,EAAavC,OAASuC,EAAauB,cACzD,GAAIa,OAAOC,KAAKP,GAAmBzC,SAAS8C,GAAgB,CAC3DL,EAAkBK,GAAiBL,EAAkBK,GAAeV,OACnEN,EAAwCC,EAAcQ,EAAYD,EAAgB1B,GAAqBkC,GAEzG,KAAO,CACNL,EAAoB,IAChBA,KACAX,EAAwCC,EAAcQ,EAAYD,EAAgB1B,GAEvF,IAEDgC,GAAa5B,QAASiC,IACrB,MAAMC,EAAiBD,EAAUjB,aAAoC5D,OAAS6E,EAAUjB,aAAcE,cACtG,MAAMhB,EAA+BN,EACjC,CACDR,SAAU,KACV+C,OAAQF,EAAUG,cAClBC,OAAQ,KACRC,KAAMJ,EACNK,YAAa,MAEb,CACAnD,SAAU,KACVF,OAAQ,CAAC+C,EAAUG,eACnBjD,QAAS,KACTqD,UAAWC,EAAmBC,UAC9BH,YAAa,MAEhBd,EAAkBS,GAAiB,CAAChC,KAGrC,OAAOuB,CACR,CAAC1E,EAAAsE,2CAEM,SAASlB,EACfY,EACA1D,EACAyC,GAG8B,IAF9BzB,EAAwBnB,UAAAN,OAAA,GAAAM,UAAA,KAAAJ,UAAAI,UAAA,GAAG,GAAE,IAC7BoB,EAA+BpB,UAAAN,OAAA,GAAAM,UAAA,KAAAJ,UAAAI,UAAA,GAAG,GAElC,IAAI+B,EAEJ,IACC,MAAM0D,EAAerD,EAAiByB,EAAa6B,MACnD,MAAMtF,EAAiBgC,EAAiByB,EAAa8B,QACrD,MAAMV,EAAShF,EAAsB4D,EAAa+B,IAAKzF,EAASC,GAChE,MAAM+E,EAAStB,EAAagC,KAAO5F,EAAsB4D,EAAagC,KAAM1F,EAASC,GAAUR,UAC/F,MAAMkG,EAAkBhF,EACvBV,EACA6E,EACAE,EACAM,EACAtE,EACAC,EACAjB,GAED,GAAI2F,EAAiB,CAGpB,MAAMR,EACL1C,GAA0BkD,EAAgB5D,WAAa,KACpDqD,EAAmBC,UACnBD,EAAmBQ,aACvBhE,EAAYiE,EAAUC,gBAAgBH,EAAgB5D,SAAU4D,EAAgB9D,OAAQ,KAAM,KAAMsD,EACrG,CACD,CAAE,MAAOY,GACR,MAAMC,EAAUD,aAAeE,MAAQF,EAAIC,QAAUE,OAAOH,GAC5DtE,EAAI0E,MAAM,8CAA8CH,IACzD,CAEA,OAAOpE,CACR,CAAClC,EAAAoD,gBAED,MAAMsD,EAAyB,SAAUC,EAAoBC,GAC5D,MAAM1C,EAAuD,CAAC,EAC9D,MAAMT,EAAgBkD,EAASE,aAAa,GAAGC,UAC9CtC,EAAamC,EAASE,aAAa,GAAGE,WACvC,GAAIH,EAAY,CACf,IAAK,MAAMI,KAAOJ,EAAY,CAC7B,MAAMK,EAAqBzC,EAAW0C,UAAU,GAAGzD,KAAiBuD,uDACpE,GAAIC,IAAuBlH,UAAW,CACrC,MAAMkE,EAAe+C,EACrB9C,EAAiBD,GAAgB,CAChCkC,EAAUC,gBAAgB,KAAM,CAACa,GAAqB,KAAM,KAAMvB,EAAmBC,WAEvF,CACD,CACD,CACA,OAAOzB,CACR,EAEA,MAAMiD,EAAgC,SACrCR,EACAS,GAEA,MAAMlD,EAAuD,CAAC,EAC9D,MAAMmD,EAAaV,EAASE,aAAa,GACzC,MAAMrC,EAAa6C,EAAWN,WAC9B,MAAMO,EAAkBD,EAAWP,UACnC,IAAK,MAAME,KAAOI,EAAsB,CACvC,GAAIA,EAAqBJ,GAAK,GAAI,CACjC,MAAMO,EAAqBP,EAAIlH,MAAM,MACrC,IAAI0H,EAAQ,GACZ,MAAMC,EAAsBF,EAAmB1H,OAC/C,MAAM6H,EAAkBH,EAAmBI,MAAM,EAAGJ,EAAmB1H,OAAS,GAAG+H,KAAK,KACxF,MAAMpF,EAAY+E,EAAmBE,EAAsB,GAC3D,GAAIC,EAAiB,CAEpB,MAAMG,EAAYrD,EAAW0C,UAAUI,EAAkB,IAAMI,GAC/D,GAAIG,EAAUC,QAAU,sBAAwBD,EAAUE,cAAe,CACxEP,GAAS,GAAGE,KACb,MAAO,GAAIG,EAAUC,QAAU,qBAAsB,CACpDN,GAAS,GAAGE,IACb,CACD,CACAF,GAAShF,EACT,MAAMwF,EAAoB,WAAYZ,EAAqBJ,GAAK,GAAKI,EAAqBJ,GAAK,GAAG7E,OAAS,GAC3G+B,EAAiBsD,GAAS,CACzBrB,EAAUC,gBAAgBgB,EAAqBJ,GAAK,GAAG3E,SAAU2F,EAAmB,KAAM,KAAM,MAElG,CACD,CACA,OAAO9D,CACR,EAEO,SAAS+D,IACf,MAAMC,EAAuD,CAAC,EAC9DA,EAAkB,cAAgB,CAAC/B,EAAUC,gBAAgB,mBAAoB,CAAC,OAAQ,KAAM,KAAMV,EAAmBC,YACzH,OAAOuC,CACR,CAAClI,EAAAiI,sBAEM,SAASE,EACfxB,EACAzC,EAIAkE,EACAC,GAEqB,IADrBC,EAAkBnI,UAAAN,OAAA,GAAAM,UAAA,KAAAJ,UAAAI,UAAA,GAAG,KAErB,IAAIoI,EACJ,MAAM9E,EAAgBkD,EAASE,aAAa,GAAGC,UAC9CtC,EAAamC,EAASE,aAAa,GAAGE,WACtCyB,EAAwBhE,GAAY0C,UAAU,GAAGzD,MACjDgF,EAAuBjE,GAAY0C,UAAU,GAAGzD,MACjD,GACC+E,IACCA,EAAsB,8CACtBA,EAAsB,+CACvBF,EACC,CACDC,EAAkBN,GACnB,CACA,MAAMxD,EAAmBP,GAAkBO,iBAC3C,MAAM2C,EAAuBlD,GAAkBkD,sBAAwB,CAAC,EACxE,MAAMsB,EAAiBhC,EAAuBC,EAAU8B,GACxD,MAAME,EAA6BxB,EAA8BR,EAAUS,GAC3E,IAAIwB,EAA0D,CAAC,EAE/D,GAAInE,EAAkB,CACrBmE,EAAsBtE,EACrBb,EACAe,EACAC,EAEF,MAAO,GAAIiE,EAAgB,CAC1BE,EAAsBF,CACvB,CACA,GAAIC,EAA4B,CAI/BC,EAAsB,IAAKA,KAAwBD,EACpD,CACA,GAAIJ,EAAiB,CACpBK,EAAsB,IAAKA,KAAwBL,EACpD,CACA,MAAMM,EAAgBR,GAAUS,uBAAuB,gDAAkD,CAAC,EAC1GF,EAAsBG,EAAkCpC,EAASE,aAAa,GAAI+B,EAAqBC,GACvG,OAAO7D,OAAOC,KAAK2D,GAAqB/I,OAAS,EAAImJ,KAAKC,UAAUL,GAAqBM,QAAQ,UAAW,QAAUnJ,SACvH,CAACC,EAAAmI,sBACDA,EAAoBgB,iBAAmB,KAShC,SAASJ,EACfK,EACAlF,EACAmF,GAEA,MAAM7F,EAAY4F,EAAiBrC,WACnC,MAAMuC,aAAEA,EAAe,CAAC,EAACC,qBAAEA,EAAuB,MAASF,EAE3D,IAAK,MAAM1G,KAAYuB,EAAkB,CACxC,IACC,MAAMR,EAAkBF,EAAUgG,qBAAqB,GAAGJ,EAAiBtC,aAAanE,KACxF,MAAM8G,EAAmB/F,GAAiBwD,YAC1C,MAAMwC,EAA4BJ,EAAa3G,IAAWgH,SAC1D,GAAIjG,EAAiB,CACpB,MAAMkG,EAAkBC,EAAkBC,UACzCpG,EACA+F,EACAF,EACAQ,EAAaC,oBAAoBN,GACjCN,EAAiBtC,WAAa,IAE/B,MAAMmD,EAAqBL,EAAkBA,EAAgB9J,MAAM,KAAO,GAC1EoE,EAAiBvB,GAAYuH,EAC5BD,EACA/F,EAAiBvB,GACjBA,EAEF,CACD,CAAE,MAAO0D,GACR,MAAMC,EAAUD,aAAeE,MAAQF,EAAIC,QAAUE,OAAOH,GAC5DtE,EAAI0E,MAAM,qFAAqF9D,OAAc2D,IAC9G,CACD,CACA,OAAOpC,CACR,CAEAlE,EAAA+I,oCAOA,SAASmB,EACRD,EACAE,EACAvH,GAEA,IAAIwH,EAAgBD,EACpB,MAAME,EAA2BC,EAAsBC,4BACvD,GAAIN,EAAmBpK,OAAS,EAAG,CAClCuK,EAAgBD,EAAmBK,OAAQtI,IAC1C,MAAMG,EAAWH,EAAUG,SAC3B,GAAIgI,EAAyBpI,SAASI,KAAc4H,EAAmBhI,SAASI,GAAW,CAE1FN,EAAIC,QAAQ,oBAAoBK,gCAAuCO,uCACvE,OAAO,KACR,CACA,OAAO,MACL,GACJ,CACA,OAAOwH,CACR,CAAC,OAAApK,CAAA","ignoreList":[]}