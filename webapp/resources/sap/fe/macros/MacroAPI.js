/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/util/deepClone","sap/base/util/merge","sap/base/util/uid","sap/fe/base/ClassSupport","sap/fe/core/buildingBlocks/BuildingBlock","sap/fe/core/converters/ConverterContext","sap/fe/core/converters/ManifestWrapper","sap/fe/core/templating/DataModelPathHelper","sap/ui/base/BindingInfo","sap/ui/core/Component"],function(e,t,n,r,o,i,a,s,l,c){"use strict";var u,p,f,d,g,b,m,y,h,v,C,P;var _=s.getTargetObjectPath;var x=r.property;var M=r.implementInterface;var O=r.defineUI5Class;var B=r.aggregation;function j(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function w(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,z(e,t)}function z(e,t){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},z(e,t)}function S(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer?(Object.defineProperty(e,t,i),null):i}function E(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let I=(u=O("sap.fe.macros.MacroAPI"),p=M("sap.ui.core.IFormContent"),f=B({type:"sap.ui.core.Control",multiple:false,isDefault:true}),d=x({type:"string"}),g=x({type:"string"}),u(b=(m=(P=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;j(r,"__implements__sap_ui_core_IFormContent",y,r);j(r,"content",h,r);j(r,"contextPath",v,r);j(r,"metaPath",C,r);r.parentContextToBind={};return r}w(t,e);var n=t.prototype;n.applySettings=function t(n,r){if(n){const e=Object.keys(this.getMetadata().getEvents());for(const t of e){if(n[t]===undefined){delete n[t]}}}return e.prototype.applySettings.call(this,n,r)};n.init=function t(){e.prototype.init.call(this);if(!this.getModel("_pageModel")){const e=c.getOwnerComponentFor(this)?.getModel("_pageModel");if(e){this.setModel(e,"_pageModel")}}};n.setOrBindProperty=function e(t,n){if(n!==undefined){let e;try{e=l.parse(n)}catch(e){}if(e||typeof n==="string"&&n.startsWith("{")){this.bindProperty(t,e??n)}else{if(this.getMetadata().getProperty(t)?.type==="boolean"&&typeof n==="string"){n=n==="true"}this.setProperty(t,n)}}};n.setParentBindingContext=function e(t,n){this.parentContextToBind[t]=n};n.setParent=function t(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++){r[o]=arguments[o]}e.prototype.setParent.call(this,...r);Object.keys(this.parentContextToBind).forEach(e=>{this.getParent().bindObject({path:this.parentContextToBind[e],model:e,events:{change:function(){const e=this.getBoundContext();if(e&&!e.getObject()){e.setProperty("",{})}}}})})};return t}(o),P.namespace="sap.fe.macros",P.macroName="Macro",P.fragment="sap.fe.macros.Macro",P.hasValidation=true,P.getConverterContext=function(n,r,o,s){const l=o.appComponent;const c=o.models.viewData?.getData();let u=Object.assign({},c);delete u.resourceModel;delete u.appComponent;u=e(u);let p={};const f=_(n.contextLocation??n);const d=n.contextLocation?.targetEntitySet?.name??n.targetEntitySet?.name;if(f===c?.contextPath||f===`/${c?.entitySet}`||d===c?.entitySet){p=u.controlConfiguration}u.controlConfiguration=t(p,s||{});return i.createConverterContextForMacro(n.startingEntitySet.name,o.models.metaModel,l?.getDiagnostics(),t,n.contextLocation,new a(u,l))},P.createBindingContext=function(e,t){const r=`/uid--${n()}`;t.models.converterContext.setProperty(r,e);return t.models.converterContext.createBindingContext(r)},P),y=S(m.prototype,"__implements__sap_ui_core_IFormContent",[p],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),h=S(m.prototype,"content",[f],{configurable:true,enumerable:true,writable:true,initializer:null}),v=S(m.prototype,"contextPath",[d],{configurable:true,enumerable:true,writable:true,initializer:null}),C=S(m.prototype,"metaPath",[g],{configurable:true,enumerable:true,writable:true,initializer:null}),m))||b);return I},false);
//# sourceMappingURL=MacroAPI.js.map