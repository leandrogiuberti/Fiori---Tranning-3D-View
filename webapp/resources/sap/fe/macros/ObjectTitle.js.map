{"version":3,"file":"ObjectTitle.js","names":["ObjectTitleDefinition","headerInfo","this","_proto","prototype","hasAvatar","ImageUrl","TypeImageUrl","Initials","getTitle","compileExpression","getExpressionFromAnnotation","Title","Value","isDescriptionVisible","Description","annotations","UI","Hidden","valueOf","getDescription","ObjectTitle","_dec","defineUI5Class","_dec2","property","type","_class","_class2","_BuildingBlock","idOrSettings","settings","_this","call","_initializerDefineProperty","_descriptor","_exports","_inheritsLoose","_proto2","onMetadataAvailable","content","createContent","_createAvatar","_jsx","Avatar","class","src","initials","fallbackIcon","displayShape","displaySize","imageFitType","children","detailBox","LightBox","LightBoxItem","imageSrc","title","subtitle","_createTitle","definition","text","wrapping","level","_createDescription","Label","_getTitlePart","FlexBox","direction","items","metaPathObject","getMetaPathObject","metaPath","getTarget","renderType","BuildingBlock","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./ObjectTitle.tsx"],"sourcesContent":["import type { DataField, HeaderInfo } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { UIAnnotationTerms } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport type { CompiledBindingToolkitExpression } from \"sap/fe/base/BindingToolkit\";\nimport { compileExpression, getExpressionFromAnnotation } from \"sap/fe/base/BindingToolkit\";\nimport type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { defineUI5Class, property } from \"sap/fe/base/ClassSupport\";\nimport BuildingBlock from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport Avatar from \"sap/m/Avatar\";\nimport FlexBox from \"sap/m/FlexBox\";\nimport Label from \"sap/m/Label\";\nimport LightBox from \"sap/m/LightBox\";\nimport LightBoxItem from \"sap/m/LightBoxItem\";\nimport Title from \"sap/m/Title\";\n\nclass ObjectTitleDefinition {\n\tconstructor(private readonly headerInfo: HeaderInfo) {}\n\n\thasAvatar(): boolean {\n\t\treturn !!(this.headerInfo.ImageUrl ?? this.headerInfo.TypeImageUrl ?? this.headerInfo.Initials);\n\t}\n\n\tgetTitle(): CompiledBindingToolkitExpression {\n\t\treturn compileExpression(getExpressionFromAnnotation((this.headerInfo.Title as DataField).Value));\n\t}\n\n\tisDescriptionVisible(): boolean {\n\t\t// Not statically hidden\n\t\treturn this.headerInfo.Description?.annotations?.UI?.Hidden?.valueOf() !== false;\n\t}\n\n\tgetDescription(): CompiledBindingToolkitExpression {\n\t\treturn compileExpression(getExpressionFromAnnotation((this.headerInfo.Description as DataField).Value));\n\t}\n}\n@defineUI5Class(\"sap.fe.macros.ObjectTitle\")\nexport default class ObjectTitle extends BuildingBlock {\n\t@property({ type: \"string\" })\n\tmetaPath: string = UIAnnotationTerms.HeaderInfo;\n\n\tconstructor(idOrSettings: string);\n\n\tconstructor(idOrSettings: PropertiesOf<ObjectTitle>);\n\n\tconstructor(idOrSettings: string | PropertiesOf<ObjectTitle>, settings?: PropertiesOf<ObjectTitle>) {\n\t\tsuper(idOrSettings, settings);\n\t}\n\n\tonMetadataAvailable(): void {\n\t\tif (!this.content) {\n\t\t\tthis.content = this.createContent();\n\t\t}\n\t}\n\n\t_createAvatar(): Avatar {\n\t\treturn (\n\t\t\t<Avatar\n\t\t\t\tclass=\"sapUiSmallMarginEnd\"\n\t\t\t\tsrc=\"{avatar>src}\"\n\t\t\t\tinitials=\"{avatar>initials}\"\n\t\t\t\tfallbackIcon=\"{avatar>fallbackIcon}\"\n\t\t\t\tdisplayShape=\"{avatar>displayShape}\"\n\t\t\t\tdisplaySize=\"S\"\n\t\t\t\timageFitType=\"Cover\"\n\t\t\t>\n\t\t\t\t{{\n\t\t\t\t\tdetailBox: (\n\t\t\t\t\t\t<LightBox>\n\t\t\t\t\t\t\t<LightBoxItem\n\t\t\t\t\t\t\t\timageSrc=\"{avatar>src}\"\n\t\t\t\t\t\t\t\ttitle=\"{= OP.getExpressionForTitle(${fullContextPath>@@UI.getDataModelObjectPath}, ${viewData>}, ${headerInfo>@@UI.getConverterContext})}\"\n\t\t\t\t\t\t\t\tsubtitle=\"{= OP.getExpressionForDescription(${fullContextPath>@@UI.getDataModelObjectPath}, ${headerInfo>@@UI.getConverterContext})}\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</LightBox>\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t</Avatar>\n\t\t);\n\t}\n\n\t_createTitle(definition: ObjectTitleDefinition): Title {\n\t\treturn <Title text={definition.getTitle()} wrapping=\"true\" level=\"H2\" />;\n\t}\n\n\t_createDescription(definition: ObjectTitleDefinition): Label {\n\t\treturn <Label text={definition.getDescription()} wrapping=\"true\" />;\n\t}\n\n\t_getTitlePart(definition: ObjectTitleDefinition): FlexBox | Title {\n\t\tif (definition.isDescriptionVisible()) {\n\t\t\treturn <FlexBox direction=\"Column\">{{ items: [this._createTitle(definition), this._createDescription(definition)] }}</FlexBox>;\n\t\t} else {\n\t\t\treturn this._createTitle(definition);\n\t\t}\n\t}\n\n\tcreateContent(): FlexBox | Title | undefined {\n\t\tconst metaPathObject = this.getMetaPathObject<HeaderInfo>(`@${this.metaPath}`);\n\t\tif (metaPathObject) {\n\t\t\tconst definition = new ObjectTitleDefinition(metaPathObject.getTarget());\n\t\t\tif (definition.hasAvatar()) {\n\t\t\t\treturn <FlexBox renderType=\"Bare\">{{ items: [this._createAvatar(), this._getTitlePart(definition)] }}</FlexBox>;\n\t\t\t} else {\n\t\t\t\treturn this._getTitlePart(definition);\n\t\t\t}\n\t\t}\n\t}\n}\n"],"mappings":";;;;k2CAcMA,EAAqB,WAC1B,SAAAA,EAA6BC,GAAwBC,KAAxBD,YAAyB,CAAC,IAAAE,EAAAH,EAAAI,UAAAD,EAEvDE,UAAA,SAAAA,IACC,SAAUH,KAAKD,WAAWK,UAAYJ,KAAKD,WAAWM,cAAgBL,KAAKD,WAAWO,SACvF,EAACL,EAEDM,SAAA,SAAAA,IACC,OAAOC,EAAkBC,EAA6BT,KAAKD,WAAWW,MAAoBC,OAC3F,EAACV,EAEDW,qBAAA,SAAAA,IAEC,OAAOZ,KAAKD,WAAWc,aAAaC,aAAaC,IAAIC,QAAQC,YAAc,KAC5E,EAAChB,EAEDiB,eAAA,SAAAA,IACC,OAAOV,EAAkBC,EAA6BT,KAAKD,WAAWc,YAA0BF,OACjG,EAAC,OAAAb,CAAA,CAlByB,GAkBzB,IAGmBqB,GAAWC,EAD/BC,EAAe,6BAA4BC,EAE1CC,EAAS,CAAEC,KAAM,WAAWJ,EAAAK,GAAAC,EAAA,SAAAC,GAO7B,SAAAR,EAAYS,EAAkDC,GAAsC,IAAAC,EACnGA,EAAAH,EAAAI,KAAA/B,KAAM4B,EAAcC,IAAS7B,KAACgC,EAAAF,EAAA,WAAAG,EAAAH,GAAA,OAAAA,CAC/B,CAACI,EAAAf,EAAAgB,EAAAhB,EAAAQ,GAAA,IAAAS,EAAAjB,EAAAjB,UAAAkC,EAEDC,oBAAA,SAAAA,IACC,IAAKrC,KAAKsC,QAAS,CAClBtC,KAAKsC,QAAUtC,KAAKuC,eACrB,CACD,EAACH,EAEDI,cAAA,SAAAA,IACC,OACCC,EAACC,EAAM,CACNC,MAAM,sBACNC,IAAI,eACJC,SAAS,oBACTC,aAAa,wBACbC,aAAa,wBACbC,YAAY,IACZC,aAAa,QAAOC,SAEnB,CACAC,UACCV,EAACW,EAAQ,CAAAF,SACRT,EAACY,EAAY,CACZC,SAAS,eACTC,MAAM,qIACNC,SAAS,mIAOhB,EAACpB,EAEDqB,aAAA,SAAAA,EAAaC,GACZ,OAAOjB,EAAC/B,EAAK,CAACiD,KAAMD,EAAWnD,WAAYqD,SAAS,OAAOC,MAAM,MAClE,EAACzB,EAED0B,mBAAA,SAAAA,EAAmBJ,GAClB,OAAOjB,EAACsB,EAAK,CAACJ,KAAMD,EAAWxC,iBAAkB0C,SAAS,QAC3D,EAACxB,EAED4B,cAAA,SAAAA,EAAcN,GACb,GAAIA,EAAW9C,uBAAwB,CACtC,OAAO6B,EAACwB,EAAO,CAACC,UAAU,SAAQhB,SAAE,CAAEiB,MAAO,CAACnE,KAAKyD,aAAaC,GAAa1D,KAAK8D,mBAAmBJ,MACtG,KAAO,CACN,OAAO1D,KAAKyD,aAAaC,EAC1B,CACD,EAACtB,EAEDG,cAAA,SAAAA,IACC,MAAM6B,EAAiBpE,KAAKqE,kBAA8B,IAAIrE,KAAKsE,YACnE,GAAIF,EAAgB,CACnB,MAAMV,EAAa,IAAI5D,EAAsBsE,EAAeG,aAC5D,GAAIb,EAAWvD,YAAa,CAC3B,OAAOsC,EAACwB,EAAO,CAACO,WAAW,OAAMtB,SAAE,CAAEiB,MAAO,CAACnE,KAAKwC,gBAAiBxC,KAAKgE,cAAcN,MACvF,KAAO,CACN,OAAO1D,KAAKgE,cAAcN,EAC3B,CACD,CACD,EAAC,OAAAvC,CAAA,CArE4B,CADWsD,GAAaxC,EAAAyC,EAAAhD,EAAAxB,UAAA,YAAAoB,GAAA,CAAAqD,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,4DAAApD,KAAAD,GAAAS,EAAAf,EAAA,OAAAe,CAAA","ignoreList":[]}