{"version":3,"names":["Delegate","createLayout","mPropertyBag","oModifier","modifier","oMetaModel","appComponent","getMetaModel","oForm","element","targets","fieldsInView","view","getElementsByTagNameNS","field","Array","from","getAttribute","fieldSelector","id","Promise","reject","Error","byId","metaPath","DelegateUtil","getCustomDataWithModifier","oFormContainer","parentSelector","bySelector","undefined","sNavigationPath","sBindingPath","substring","indexOf","oMetaModelContext","getMetaContext","length","oPropertyContext","createBindingContext","bindingPath","fnTemplateFormElement","sFragmentName","oView","navigationPath","sOnChangeCustomData","sDisplayModeCustomData","oThis","JSONModel","_flexId","onChange","Common","removeEscapeCharacters","displayMode","oPreprocessorSettings","bindingContexts","entitySet","dataField","this","models","metaModel","templateControlFragment","oField","control","getPropertyInfo","_isComplexType","mProperty","$Type","toLowerCase","_startsWithNavigationProperty","sPropertyPath","aNavigationProperties","some","sNavProp","startsWith","_enrichProperty","mElement","mPropertyAnnotations","sEntityType","oElement","sAggregationName","mProp","name","entityType","mDataFieldDefaultAnnotation","sLabel","Label","label","mHiddenAnnotation","hideFromReveal","$Path","getBindingContext","getProperty","mFieldControlAnnotation","$EnumMember","sFieldControlPath","bListBinding","getBinding","ListBinding","iFieldControlValue","unsupported","_convertMetadataToDelegateFormat","mODataEntityType","aProperties","sElementName","$kind","push","mPropAnnotations","getObject","_getBindingPath","mPayload","path","vBinding","data","getPath","_getODataPropertiesOfModel","oModel","getModel","modelName","isA","sBindingContextPath","oMetaModelContextObject","resolve","then","aggregationName","payload"],"sourceRoot":".","sources":["FormDelegate.ts"],"sourcesContent":["import type { DataFieldDefault } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport type AppComponent from \"sap/fe/core/AppComponent\";\nimport type { FEView } from \"sap/fe/core/BaseController\";\nimport type { BaseTreeModifier } from \"sap/fe/core/CommonUtils\";\nimport type { MetaModelPropertyAnnotations } from \"sap/fe/core/converters/MetaModelConverter\";\nimport Common from \"sap/fe/macros/CommonHelper\";\nimport DelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport type Control from \"sap/ui/core/Control\";\nimport type UI5Element from \"sap/ui/core/Element\";\nimport type XMLView from \"sap/ui/core/mvc/XMLView\";\nimport ListBinding from \"sap/ui/model/ListBinding\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type { MetaModelEntityType, MetaModelProperty, MetaModelType } from \"../../../../../../../types/metamodel_types\";\n\ntype DelegateProperty = {\n\tname: string;\n\tbindingPath: string;\n\tentityType: string;\n\tlabel?: string;\n\thideFromReveal?: boolean;\n\tunsupported?: boolean;\n};\n\nconst Delegate = {\n\t/**\n\t * @param mPropertyBag Object with parameters as properties\n\t * @param mPropertyBag.modifier Modifier to harmonize access, creation and manipulation to controls in XML Views and JS Controls\n\t * @param [mPropertyBag.appComponent] Needed to calculate the correct ID in case you provide a selector\n\t * @param [mPropertyBag.view] XML node of the view, required for XML case to create nodes and to find elements\n\t * @param [mPropertyBag.fieldSelector] Selector to calculate the ID for the control that is created\n\t * @param [mPropertyBag.fieldSelector.id]\n\t * @param [mPropertyBag.fieldSelector.isLocalId]\n\t * @param mPropertyBag.bindingPath Runtime binding path the control should be bound to\n\t * @param mPropertyBag.payload Payload parameter attached to the delegate, undefined if no payload was assigned\n\t * @param mPropertyBag.controlType Control type of the element the delegate is attached to\n\t * @param mPropertyBag.aggregationName Name of the aggregation the delegate should provide additional elements\n\t * @param mPropertyBag.element\n\t * @param mPropertyBag.parentSelector\n\t * @returns Map containing the controls to add\n\t */\n\tcreateLayout: async function (mPropertyBag: {\n\t\tmodifier: BaseTreeModifier;\n\t\tappComponent?: AppComponent;\n\t\tview?: Element;\n\t\tfieldSelector?: { id?: string; isLocalId?: boolean };\n\t\tbindingPath: string;\n\t\tpayload: object;\n\t\tcontrolType: string;\n\t\taggregationName: string;\n\t\telement: UI5Element | Element;\n\t\tparentSelector?: object;\n\t}): Promise<{\n\t\tcontrol: Element | UI5Element | Element[] | UI5Element[];\n\t}> {\n\t\tconst oModifier = mPropertyBag.modifier,\n\t\t\toMetaModel = mPropertyBag.appComponent?.getMetaModel(),\n\t\t\toForm = mPropertyBag.element;\n\n\t\t// Check for existing fields with the same _flexId\n\t\tif (oModifier.targets === \"xmlTree\") {\n\t\t\t// at preprocessing time\n\t\t\tconst fieldsInView = mPropertyBag.view?.getElementsByTagNameNS(\"sap.fe.macros\", \"Field\");\n\t\t\tif (fieldsInView) {\n\t\t\t\tfor (const field of Array.from(fieldsInView)) {\n\t\t\t\t\tif (field.getAttribute(\"_flexId\") === mPropertyBag.fieldSelector?.id) {\n\t\t\t\t\t\t// Field with same _flexId already exists, reject Promise to avoid duplicates\n\t\t\t\t\t\treturn Promise.reject(new Error(\"FormDelegate.createLayout: field already exists\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (oModifier.targets === \"jsControlTree\") {\n\t\t\t// at runtime\n\t\t\tif (\n\t\t\t\tmPropertyBag.fieldSelector?.id &&\n\t\t\t\tmPropertyBag.view &&\n\t\t\t\t(mPropertyBag.view as unknown as XMLView).byId(mPropertyBag.fieldSelector?.id)\n\t\t\t) {\n\t\t\t\treturn Promise.reject(new Error(\"FormDelegate.createLayout: field already exists\"));\n\t\t\t}\n\t\t}\n\n\t\tconst metaPath = (await DelegateUtil.getCustomDataWithModifier<string>(oForm, \"metaPath\", oModifier)) ?? \"\";\n\t\tconst oFormContainer = mPropertyBag.parentSelector\n\t\t\t? mPropertyBag.modifier.bySelector(mPropertyBag.parentSelector, mPropertyBag.appComponent, mPropertyBag.view)\n\t\t\t: undefined;\n\t\tconst sNavigationPath = oFormContainer\n\t\t\t? await DelegateUtil.getCustomDataWithModifier<string>(oFormContainer as UI5Element | Element, \"navigationPath\", oModifier)\n\t\t\t: \"\";\n\t\tlet sBindingPath = metaPath.substring(0, metaPath.indexOf(\"@\"));\n\t\tsBindingPath = sNavigationPath ? `${sBindingPath}${sNavigationPath}/` : sBindingPath;\n\t\tconst oMetaModelContext = oMetaModel?.getMetaContext(sBindingPath.substring(0, sBindingPath.length - 1));\n\t\tconst oPropertyContext = oMetaModel?.createBindingContext(`${sBindingPath}${mPropertyBag.bindingPath}`);\n\n\t\tasync function fnTemplateFormElement(\n\t\t\tsFragmentName: string,\n\t\t\toView: FEView | undefined,\n\t\t\tnavigationPath: string\n\t\t): Promise<Element | UI5Element | Element[] | UI5Element[]> {\n\t\t\tconst sOnChangeCustomData = await DelegateUtil.getCustomDataWithModifier<string>(oForm, \"onChange\", oModifier);\n\t\t\tconst sDisplayModeCustomData = await DelegateUtil.getCustomDataWithModifier<string>(oForm, \"displayMode\", oModifier);\n\t\t\tconst oThis = new JSONModel({\n\t\t\t\t// properties and events of Field macro\n\t\t\t\t_flexId: mPropertyBag.fieldSelector?.id,\n\t\t\t\tonChange: Common.removeEscapeCharacters(sOnChangeCustomData),\n\t\t\t\tdisplayMode: Common.removeEscapeCharacters(sDisplayModeCustomData),\n\t\t\t\tnavigationPath: navigationPath\n\t\t\t});\n\t\t\tconst oPreprocessorSettings = {\n\t\t\t\tbindingContexts: {\n\t\t\t\t\tentitySet: oMetaModelContext,\n\t\t\t\t\tdataField: oPropertyContext,\n\t\t\t\t\tthis: oThis.createBindingContext(\"/\")\n\t\t\t\t},\n\t\t\t\tmodels: {\n\t\t\t\t\tthis: oThis,\n\t\t\t\t\tentitySet: oMetaModel,\n\t\t\t\t\tmetaModel: oMetaModel,\n\t\t\t\t\tdataField: oMetaModel\n\t\t\t\t},\n\t\t\t\tappComponent: mPropertyBag.appComponent\n\t\t\t};\n\n\t\t\treturn DelegateUtil.templateControlFragment(sFragmentName, oPreprocessorSettings, { view: oView }, oModifier);\n\t\t}\n\n\t\tconst oField = await fnTemplateFormElement(\n\t\t\t\"sap.fe.macros.form.FormElementFlexibility\",\n\t\t\tmPropertyBag.view as unknown as FEView,\n\t\t\tsNavigationPath!\n\t\t);\n\t\treturn {\n\t\t\tcontrol: oField\n\t\t};\n\t},\n\t// getPropertyInfo is a patched version of ODataV4ReadDelegates to dela with navigationPath\n\tgetPropertyInfo: async function (mPropertyBag: {\n\t\telement: Control;\n\t\taggregationName: string;\n\t\tpayload: {\n\t\t\tmodelName?: string;\n\t\t\tpath?: string;\n\t\t};\n\t}): Promise<DelegateProperty[]> {\n\t\tfunction _isComplexType(mProperty: MetaModelProperty): boolean {\n\t\t\tif (mProperty && mProperty.$Type) {\n\t\t\t\tif (mProperty.$Type.toLowerCase().indexOf(\"edm\") !== 0) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\t//Check if a given property path starts with a navigation property.\n\t\tfunction _startsWithNavigationProperty(sPropertyPath: string, aNavigationProperties: string[]): boolean {\n\t\t\treturn aNavigationProperties.some(function (sNavProp) {\n\t\t\t\treturn sPropertyPath.startsWith(sNavProp);\n\t\t\t});\n\t\t}\n\n\t\tfunction _enrichProperty(\n\t\t\tsPropertyPath: string,\n\t\t\tmElement: MetaModelProperty,\n\t\t\tmPropertyAnnotations: MetaModelPropertyAnnotations,\n\t\t\tsEntityType: string,\n\t\t\toElement: Control,\n\t\t\tsAggregationName: string,\n\t\t\taNavigationProperties: string[]\n\t\t): DelegateProperty {\n\t\t\tconst mProp: DelegateProperty = {\n\t\t\t\tname: sPropertyPath,\n\t\t\t\tbindingPath: sPropertyPath,\n\t\t\t\tentityType: sEntityType\n\t\t\t};\n\t\t\t// get label information, either via DataFieldDefault annotation (if exists) or Label annotation\n\t\t\tconst mDataFieldDefaultAnnotation = mPropertyAnnotations[\n\t\t\t\t\"@com.sap.vocabularies.UI.v1.DataFieldDefault\"\n\t\t\t] as MetaModelType<DataFieldDefault>;\n\t\t\tconst sLabel =\n\t\t\t\t(mDataFieldDefaultAnnotation && mDataFieldDefaultAnnotation.Label) ||\n\t\t\t\tmPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.Label\"];\n\t\t\tmProp.label = (sLabel as string) || \"[LABEL_MISSING: \" + sPropertyPath + \"]\";\n\t\t\t// evaluate Hidden annotation\n\t\t\tconst mHiddenAnnotation = mPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.Hidden\"];\n\t\t\tmProp.hideFromReveal = mHiddenAnnotation as boolean;\n\t\t\tif (mHiddenAnnotation && (mHiddenAnnotation as { $Path?: string }).$Path) {\n\t\t\t\tmProp.hideFromReveal = oElement.getBindingContext()?.getProperty((mHiddenAnnotation as { $Path?: string }).$Path!);\n\t\t\t}\n\t\t\t// evaluate AdaptationHidden annotation\n\t\t\tif (!mProp.hideFromReveal) {\n\t\t\t\tmProp.hideFromReveal = mPropertyAnnotations[\"@com.sap.vocabularies.UI.v1.AdaptationHidden\"] as boolean;\n\t\t\t}\n\t\t\t// evaluate FieldControl annotation\n\t\t\tlet mFieldControlAnnotation;\n\t\t\tif (!mProp.hideFromReveal) {\n\t\t\t\tmFieldControlAnnotation = mPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.FieldControl\"];\n\t\t\t\tif (mFieldControlAnnotation) {\n\t\t\t\t\tmProp.hideFromReveal =\n\t\t\t\t\t\t(mFieldControlAnnotation as { $EnumMember?: string }).$EnumMember ===\n\t\t\t\t\t\t\"com.sap.vocabularies.Common.v1.FieldControlType/Hidden\";\n\t\t\t\t}\n\t\t\t}\n\t\t\t// @runtime hidden by field control value = 0\n\t\t\tmFieldControlAnnotation = mPropertyAnnotations[\"@com.sap.vocabularies.Common.v1.FieldControl\"];\n\t\t\tconst sFieldControlPath = mFieldControlAnnotation && (mFieldControlAnnotation as { $Path?: string }).$Path;\n\t\t\tif (sFieldControlPath && !mProp.hideFromReveal) {\n\t\t\t\t// if the binding is a list binding, skip the check for field control\n\t\t\t\tconst bListBinding = oElement.getBinding(sAggregationName) instanceof ListBinding;\n\t\t\t\tif (!bListBinding) {\n\t\t\t\t\tconst iFieldControlValue = oElement.getBindingContext()?.getProperty(sFieldControlPath);\n\t\t\t\t\tmProp.hideFromReveal = iFieldControlValue === 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// no support for DataFieldFor/WithAction and DataFieldFor/WithIntentBasedNavigation within DataFieldDefault annotation\n\t\t\tif (\n\t\t\t\tmDataFieldDefaultAnnotation &&\n\t\t\t\t(mDataFieldDefaultAnnotation.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForAction\" ||\n\t\t\t\t\tmDataFieldDefaultAnnotation.$Type === \"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\" ||\n\t\t\t\t\tmDataFieldDefaultAnnotation.$Type === \"com.sap.vocabularies.UI.v1.DataFieldWithAction\" ||\n\t\t\t\t\tmDataFieldDefaultAnnotation.$Type === \"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation\")\n\t\t\t) {\n\t\t\t\tmProp.unsupported = true;\n\t\t\t}\n\t\t\t// no support for navigation properties and complex properties\n\t\t\tif (_startsWithNavigationProperty(sPropertyPath, aNavigationProperties) || _isComplexType(mElement)) {\n\t\t\t\tmProp.unsupported = true;\n\t\t\t}\n\t\t\treturn mProp;\n\t\t}\n\n\t\t// Convert metadata format to delegate format.\n\t\tfunction _convertMetadataToDelegateFormat(\n\t\t\tmODataEntityType: MetaModelEntityType,\n\t\t\tsEntityType: string,\n\t\t\toMetaModel: ODataMetaModel,\n\t\t\toElement: Control,\n\t\t\tsAggregationName: string\n\t\t): DelegateProperty[] {\n\t\t\tconst aProperties = [];\n\t\t\tlet sElementName = \"\";\n\t\t\tconst aNavigationProperties = [];\n\t\t\tlet mElement;\n\t\t\tfor (sElementName in mODataEntityType) {\n\t\t\t\tmElement = mODataEntityType[sElementName];\n\t\t\t\tif (mElement.$kind === \"NavigationProperty\") {\n\t\t\t\t\taNavigationProperties.push(sElementName);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (sElementName in mODataEntityType) {\n\t\t\t\tmElement = mODataEntityType[sElementName];\n\t\t\t\tif (mElement.$kind === \"Property\") {\n\t\t\t\t\tconst mPropAnnotations = oMetaModel.getObject(\"/\" + sEntityType + \"/\" + sElementName + \"@\");\n\t\t\t\t\tconst mProp = _enrichProperty(\n\t\t\t\t\t\tsElementName,\n\t\t\t\t\t\tmElement as MetaModelProperty,\n\t\t\t\t\t\tmPropAnnotations,\n\t\t\t\t\t\tsEntityType,\n\t\t\t\t\t\toElement,\n\t\t\t\t\t\tsAggregationName,\n\t\t\t\t\t\taNavigationProperties\n\t\t\t\t\t);\n\t\t\t\t\taProperties.push(mProp);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn aProperties;\n\t\t}\n\n\t\t//Get binding path either from payload (if available) or the element's binding context.\n\t\tfunction _getBindingPath(\n\t\t\toElement: Control,\n\t\t\tmPayload: {\n\t\t\t\tpath?: string;\n\t\t\t}\n\t\t): string | undefined {\n\t\t\tif (mPayload.path) {\n\t\t\t\treturn mPayload.path;\n\t\t\t}\n\t\t\tconst vBinding = oElement.getBindingContext();\n\t\t\tif (vBinding) {\n\t\t\t\tif (oElement.data(\"navigationPath\")) {\n\t\t\t\t\treturn vBinding.getPath() + \"/\" + oElement.data(\"navigationPath\");\n\t\t\t\t}\n\t\t\t\treturn vBinding.getPath();\n\t\t\t}\n\t\t}\n\n\t\t//Get all properties of the element's model.\n\t\tasync function _getODataPropertiesOfModel(\n\t\t\toElement: Control,\n\t\t\tsAggregationName: string,\n\t\t\tmPayload: {\n\t\t\t\tmodelName?: string;\n\t\t\t\tpath?: string;\n\t\t\t}\n\t\t): Promise<DelegateProperty[]> {\n\t\t\tconst oModel = oElement.getModel(mPayload.modelName);\n\t\t\tif (oModel) {\n\t\t\t\tif (oModel.isA(\"sap.ui.model.odata.v4.ODataModel\")) {\n\t\t\t\t\tconst oMetaModel = oModel.getMetaModel() as ODataMetaModel;\n\t\t\t\t\tconst sBindingContextPath = _getBindingPath(oElement, mPayload);\n\t\t\t\t\tif (sBindingContextPath) {\n\t\t\t\t\t\tconst oMetaModelContext = oMetaModel.getMetaContext(sBindingContextPath);\n\t\t\t\t\t\tconst oMetaModelContextObject = oMetaModelContext.getObject();\n\t\t\t\t\t\tconst mODataEntityType = oMetaModelContext.getObject(oMetaModelContextObject.$Type);\n\t\t\t\t\t\treturn _convertMetadataToDelegateFormat(\n\t\t\t\t\t\t\tmODataEntityType,\n\t\t\t\t\t\t\toMetaModelContextObject.$Type,\n\t\t\t\t\t\t\toMetaModel,\n\t\t\t\t\t\t\toElement,\n\t\t\t\t\t\t\tsAggregationName\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn Promise.resolve([]);\n\t\t}\n\n\t\treturn Promise.resolve().then(async function () {\n\t\t\treturn _getODataPropertiesOfModel(mPropertyBag.element, mPropertyBag.aggregationName, mPropertyBag.payload);\n\t\t});\n\t}\n};\n\nexport default Delegate;\n"],"mappings":"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","ignoreList":[],"file":"FormDelegate-dbg.js"}