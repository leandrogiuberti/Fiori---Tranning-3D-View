{"version":3,"file":"Form.block.js","names":["FormBlock","_dec","defineBuildingBlock","name","namespace","publicNamespace","returnTypes","_dec2","blockAttribute","type","isPublic","required","_dec3","expectedTypes","_dec4","expectedAnnotationTypes","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","blockEvent","_dec14","blockAggregation","slot","isDefault","_dec15","_class","_class2","_BuildingBlockTemplat","props","configuration","mSettings","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","metaPath","contextPath","formContainers","undefined","oContextObjectPath","getInvolvedDataModelObjects","mExtraSettings","oFacetDefinition","targetObject","hasFieldGroup","$Type","Label","Target","$target","fullyQualifiedName","path","term","value","getContextRelativeTargetObjectPath","annotations","formElements","fields","oConverterContext","getConverterContext","oFormDefinition","createFormDefinition","isVisible","annotationPath","getPath","useFormContainerLabels","facetType","getObject","_apiId","createId","_contentId","id","displayMode","_editable","compileExpression","ifElse","equal","resolveBindingString","UI","IsEditable","_exports","_inheritsLoose","_proto","prototype","getDataFieldCollection","formContainer","facetContext","facet","navigationPath","idPart","AnnotationHelper","getNavigationPath","contextPathPath","facetPath","startsWith","substring","length","charAt","slice","titleLevel","FormHelper","getFormContainerTitleLevel","title","getExpressionFromAnnotation","getFormContainerID","xml","attr","entitySet","onChange","actions","useSingleTextAreaFieldAsNotes","annotationHidden","getFormContainers","includes","map","formContainerIdx","getModel","createBindingContext","isReferenceFacetPartOfPreview","partOfPreview","$AnnotationPath","checkIfTextAreaIsAlone","fieldGroup","identification","hasFieldGroupTarget","hasIdentificationTarget","Data","Value","MultiLineText","valueOf","getLayoutInformation","isTextAreaAlone","layout","adjustLabelSpan","breakpointL","breakpointM","breakpointXL","columnsL","columnsM","columnsXL","emptySpanL","emptySpanM","emptySpanS","emptySpanXL","labelSpanL","labelSpanM","labelSpanS","labelSpanXL","singleContainerFullSize","backgroundDesign","labelCellsLarge","emptyCellsLarge","getTemplate","onChangeStr","replace","metaPathPath","ariaLabelledBy","addConditionally","BuildingBlockTemplatingBase","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer","TitleLevel","Auto"],"sources":["./Form.block.ts"],"sourcesContent":["import { CommunicationAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/Communication\";\nimport type {\n\tCollectionFacet,\n\tDataField,\n\tFacetTypes,\n\tFieldGroupType,\n\tIdentification,\n\tReferenceFacet\n} from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { UIAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport type { CompiledBindingToolkitExpression } from \"sap/fe/base/BindingToolkit\";\nimport { compileExpression, equal, getExpressionFromAnnotation, ifElse, resolveBindingString } from \"sap/fe/base/BindingToolkit\";\nimport type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport {\n\tblockAggregation,\n\tblockAttribute,\n\tblockEvent,\n\tdefineBuildingBlock\n} from \"sap/fe/core/buildingBlocks/templating/BuildingBlockSupport\";\nimport type { TemplateProcessorSettings } from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplateProcessor\";\nimport { xml } from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplateProcessor\";\nimport BuildingBlockTemplatingBase from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplatingBase\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { hasFieldGroupTarget, hasIdentificationTarget } from \"sap/fe/core/converters/annotations/DataField\";\nimport type { FormContainer } from \"sap/fe/core/converters/controls/Common/Form\";\nimport { createFormDefinition } from \"sap/fe/core/converters/controls/Common/Form\";\nimport { getFormContainerID } from \"sap/fe/core/converters/helpers/ID\";\nimport { UI } from \"sap/fe/core/helpers/BindingHelper\";\nimport { getContextRelativeTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport FormHelper from \"sap/fe/macros/form/FormHelper\";\nimport { TitleLevel } from \"sap/ui/core/library\";\nimport type { $ColumnLayoutSettings } from \"sap/ui/layout/form/ColumnLayout\";\nimport type { $ResponsiveGridLayoutSettings } from \"sap/ui/layout/form/ResponsiveGridLayout\";\nimport type Context from \"sap/ui/model/Context\";\nimport AnnotationHelper from \"sap/ui/model/odata/v4/AnnotationHelper\";\n\ntype ColumnLayout = $ColumnLayoutSettings & {\n\ttype: \"ColumnLayout\";\n};\ntype ResponsiveGridLayout = $ResponsiveGridLayoutSettings & {\n\ttype: \"ResponsiveGridLayout\";\n};\ntype FormLayoutInformation = ColumnLayout | ResponsiveGridLayout;\n\n/**\n * Building block for creating a Form based on the metadata provided by OData V4.\n * <br>\n * It is designed to work based on a FieldGroup annotation but can also work if you provide a ReferenceFacet or a CollectionFacet\n *\n *\n * Usage example:\n * <pre>\n * &lt;macros:Form id=\"MyForm\" metaPath=\"@com.sap.vocabularies.UI.v1.FieldGroup#GeneralInformation\" /&gt;\n * </pre>\n * @alias sap.fe.macros.Form\n * @public\n */\n@defineBuildingBlock({\n\tname: \"Form\",\n\tnamespace: \"sap.fe.macros.internal\",\n\tpublicNamespace: \"sap.fe.macros\",\n\treturnTypes: [\"sap.fe.macros.form.FormAPI\"]\n})\nexport default class FormBlock extends BuildingBlockTemplatingBase {\n\t/**\n\t * The identifier of the form control.\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true, required: true })\n\tid!: string;\n\n\t/**\n\t * Defines the path of the context used in the current page or block.\n\t * This setting is defined by the framework.\n\t * @public\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\tisPublic: true,\n\t\texpectedTypes: [\"EntitySet\", \"NavigationProperty\", \"Singleton\", \"EntityType\"]\n\t})\n\tcontextPath!: Context;\n\n\t/**\n\t * Defines the relative path of the property in the metamodel, based on the current contextPath.\n\t * @public\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true,\n\t\trequired: true,\n\t\texpectedAnnotationTypes: [\n\t\t\t\"com.sap.vocabularies.UI.v1.FieldGroupType\",\n\t\t\t\"com.sap.vocabularies.UI.v1.CollectionFacet\",\n\t\t\t\"com.sap.vocabularies.UI.v1.ReferenceFacet\"\n\t\t],\n\t\texpectedTypes: [\"EntitySet\", \"EntityType\", \"Singleton\", \"NavigationProperty\"]\n\t})\n\tmetaPath!: Context;\n\n\t/**\n\t * The manifest defined form containers to be shown in the action area of the table\n\t */\n\t@blockAttribute({ type: \"array\" })\n\tformContainers?: FormContainer[];\n\n\t/**\n\t * Control the rendering of the form container labels\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tuseFormContainerLabels?: boolean;\n\n\t/**\n\t * Toggle Preview: Part of Preview / Preview via 'Show More' Button\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\tpartOfPreview = true;\n\n\t/**\n\t * The title of the form control.\n\t * @public\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\ttitle?: string;\n\n\t/**\n\t * Defines the \"aria-level\" of the form title, titles of internally used form containers are nested subsequently\n\t */\n\t@blockAttribute({ type: \"sap.ui.core.TitleLevel\", isPublic: true })\n\ttitleLevel: TitleLevel = TitleLevel.Auto;\n\n\t/**\n\t * Property added to associate the superordinate title\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tpublic ariaLabelledBy?: string[];\n\n\t@blockAttribute({ type: \"string\" })\n\tdisplayMode?: CompiledBindingToolkitExpression;\n\n\t/**\n\t * \tIf set to false, the Form is not rendered.\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tisVisible = \"true\";\n\t// Independent from the form title, can be a bit confusing in standalone usage at is not showing anything by default\n\n\t// Just proxied down to the Field may need to see if needed or not\n\t@blockEvent()\n\tonChange?: string;\n\n\t@blockAggregation({ type: \"sap.fe.macros.form.FormElement\", isPublic: true, slot: \"formElements\", isDefault: true })\n\tformElements?: object[];\n\n\t/**\n\t * Defines the layout to be used within the form.\n\t * It defaults to the ColumnLayout, but you can also use a ResponsiveGridLayout.\n\t * All the properties of the ResponsiveGridLayout can be added to the configuration.\n\t */\n\t@blockAttribute({ type: \"object\", isPublic: true })\n\tlayout: FormLayoutInformation = { type: \"ColumnLayout\", columnsM: 3, columnsXL: 6, columnsL: 4, labelCellsLarge: 12 };\n\n\t// Useful for our dynamic thing but also depends on the metadata -> make sure this is taken into account\n\t_editable: CompiledBindingToolkitExpression;\n\n\t_apiId: string;\n\n\t_contentId: string;\n\n\tfacetType?: string;\n\n\tconstructor(props: PropertiesOf<FormBlock>, configuration: unknown, mSettings: TemplateProcessorSettings) {\n\t\tsuper(props, configuration, mSettings);\n\t\tif (this.metaPath && this.contextPath && (this.formContainers === undefined || this.formContainers === null)) {\n\t\t\tconst oContextObjectPath = getInvolvedDataModelObjects<FieldGroupType | CollectionFacet | ReferenceFacet>(\n\t\t\t\tthis.metaPath,\n\t\t\t\tthis.contextPath\n\t\t\t);\n\t\t\tconst mExtraSettings: Record<string, unknown> = {};\n\t\t\tlet oFacetDefinition = oContextObjectPath.targetObject;\n\t\t\tlet hasFieldGroup = false;\n\t\t\tif (oFacetDefinition && oFacetDefinition.$Type === UIAnnotationTypes.FieldGroupType) {\n\t\t\t\t// Wrap the facet in a fake Facet annotation\n\t\t\t\thasFieldGroup = true;\n\t\t\t\toFacetDefinition = {\n\t\t\t\t\t$Type: UIAnnotationTypes.ReferenceFacet,\n\t\t\t\t\tLabel: oFacetDefinition.Label,\n\t\t\t\t\tTarget: {\n\t\t\t\t\t\t$target: oFacetDefinition,\n\t\t\t\t\t\tfullyQualifiedName: oFacetDefinition.fullyQualifiedName,\n\t\t\t\t\t\tpath: \"\",\n\t\t\t\t\t\tterm: \"\",\n\t\t\t\t\t\ttype: \"AnnotationPath\",\n\t\t\t\t\t\tvalue: getContextRelativeTargetObjectPath(oContextObjectPath)\n\t\t\t\t\t},\n\t\t\t\t\tannotations: {},\n\t\t\t\t\tfullyQualifiedName: oFacetDefinition.fullyQualifiedName\n\t\t\t\t} as unknown as ReferenceFacet;\n\t\t\t\tif (this.formElements) {\n\t\t\t\t\tmExtraSettings[oFacetDefinition.Target.value] = { fields: this.formElements };\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst oConverterContext = this.getConverterContext(\n\t\t\t\toContextObjectPath,\n\t\t\t\t/*this.contextPath*/ undefined,\n\t\t\t\tmSettings,\n\t\t\t\tmExtraSettings\n\t\t\t);\n\t\t\tconst oFormDefinition = createFormDefinition(oFacetDefinition, this.isVisible, oConverterContext);\n\t\t\tif (hasFieldGroup) {\n\t\t\t\toFormDefinition.formContainers[0].annotationPath = this.metaPath.getPath();\n\t\t\t}\n\t\t\tthis.formContainers = oFormDefinition.formContainers;\n\t\t\tthis.useFormContainerLabels = oFormDefinition.useFormContainerLabels;\n\t\t\tthis.facetType = oFacetDefinition && (oFacetDefinition.$Type as string);\n\t\t} else {\n\t\t\tthis.facetType = this.metaPath.getObject()?.$Type;\n\t\t}\n\n\t\tif (!this.isPublic) {\n\t\t\tthis._apiId = this.createId(\"Form\")!;\n\t\t\tthis._contentId = this.id;\n\t\t} else {\n\t\t\tthis._apiId = this.id;\n\t\t\tthis._contentId = `${this.id}-content`;\n\t\t}\n\t\t// if displayMode === true -> _editable = false\n\t\t// if displayMode === false -> _editable = true\n\t\t//  => if displayMode === {myBindingValue} -> _editable = {myBindingValue} === true ? true : false\n\t\t// if DisplayMode === undefined -> _editable = {ui>/isEditable}\n\t\tif (this.displayMode !== undefined) {\n\t\t\tthis._editable = compileExpression(ifElse(equal(resolveBindingString(this.displayMode, \"boolean\"), false), true, false));\n\t\t} else {\n\t\t\tthis._editable = compileExpression(UI.IsEditable);\n\t\t}\n\t}\n\n\tgetDataFieldCollection(formContainer: FormContainer, facetContext: Context): string {\n\t\tconst facet = getInvolvedDataModelObjects(facetContext).targetObject as FacetTypes;\n\t\tlet navigationPath;\n\t\tlet idPart;\n\t\tif (facet.$Type === UIAnnotationTypes.ReferenceFacet) {\n\t\t\tnavigationPath = AnnotationHelper.getNavigationPath(facet.Target.value);\n\t\t\tidPart = facet;\n\t\t} else {\n\t\t\tconst contextPathPath = this.contextPath.getPath();\n\t\t\tlet facetPath = facetContext.getPath();\n\t\t\tif (facetPath.startsWith(contextPathPath)) {\n\t\t\t\tfacetPath = facetPath.substring(contextPathPath.length);\n\t\t\t\tif (facetPath.charAt(0) === \"/\") {\n\t\t\t\t\tfacetPath = facetPath.slice(1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tnavigationPath = AnnotationHelper.getNavigationPath(facetPath);\n\t\t\tidPart = facetPath;\n\t\t}\n\t\tconst titleLevel = FormHelper.getFormContainerTitleLevel(this.title, this.titleLevel);\n\t\tconst title = this.useFormContainerLabels && facet.Label ? getExpressionFromAnnotation(facet.Label) : \"\";\n\n\t\tconst id = this.id ? getFormContainerID(idPart) : undefined;\n\n\t\treturn xml`\n\t\t\t\t\t<macro:FormContainer\n\t\t\t\t\txmlns:macro=\"sap.fe.macros\"\n\t\t\t\t\t${this.attr(\"id\", id)}\n\t\t\t\t\ttitle=\"${title}\"\n\t\t\t\t\ttitleLevel=\"${titleLevel}\"\n\t\t\t\t\tcontextPath=\"${navigationPath ? formContainer.entitySet : this.contextPath}\"\n\t\t\t\t\tmetaPath=\"${facetContext}\"\n\t\t\t\t\tdataFieldCollection=\"${formContainer.formElements}\"\n\t\t\t\t\tnavigationPath=\"${navigationPath}\"\n\t\t\t\t\tvisible=\"${formContainer.isVisible}\"\n\t\t\t\t\tdisplayMode=\"${this.displayMode}\"\n\t\t\t\t\tonChange=\"${this.onChange}\"\n\t\t\t\t\tactions=\"${formContainer.actions}\"\n\t\t\t\t\tuseSingleTextAreaFieldAsNotes=\"${formContainer.useSingleTextAreaFieldAsNotes}\"\n\t\t\t\t\thasUiHiddenAnnotation=\"${formContainer.annotationHidden}\"\n\t\t\t\t>\n\t\t\t\t<macro:formElements>\n\t\t\t\t\t<slot name=\"formElements\" />\n\t\t\t\t</macro:formElements>\n\t\t\t</macro:FormContainer>`;\n\t}\n\n\tgetFormContainers(): string | string[] {\n\t\tif (this.formContainers!.length === 0) {\n\t\t\treturn \"\";\n\t\t}\n\t\tif (this.facetType?.includes(\"com.sap.vocabularies.UI.v1.CollectionFacet\")) {\n\t\t\treturn this.formContainers!.map((formContainer, formContainerIdx) => {\n\t\t\t\tif (formContainer.isVisible) {\n\t\t\t\t\tconst facetContext = this.contextPath.getModel().createBindingContext(formContainer.annotationPath, this.contextPath);\n\t\t\t\t\tconst facet = facetContext.getObject();\n\t\t\t\t\tif (\n\t\t\t\t\t\tfacet.$Type === UIAnnotationTypes.ReferenceFacet &&\n\t\t\t\t\t\tFormHelper.isReferenceFacetPartOfPreview(facet, this.partOfPreview)\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (facet.Target.$AnnotationPath.$Type === CommunicationAnnotationTypes.AddressType) {\n\t\t\t\t\t\t\treturn xml`<template:with path=\"formContainers>${formContainerIdx}\" var=\"formContainer\">\n\t\t\t\t\t\t\t\t\t\t\t<template:with path=\"formContainers>${formContainerIdx}/annotationPath\" var=\"facet\">\n\t\t\t\t\t\t\t\t\t\t\t\t<core:Fragment fragmentName=\"sap.fe.macros.form.AddressSection\" type=\"XML\" />\n\t\t\t\t\t\t\t\t\t\t\t</template:with>\n\t\t\t\t\t\t\t\t\t\t</template:with>`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn this.getDataFieldCollection(formContainer, facetContext);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn \"\";\n\t\t\t});\n\t\t} else if (this.facetType === \"com.sap.vocabularies.UI.v1.ReferenceFacet\") {\n\t\t\treturn this.formContainers!.map((formContainer) => {\n\t\t\t\tif (formContainer.isVisible) {\n\t\t\t\t\tconst facetContext = this.contextPath.getModel().createBindingContext(formContainer.annotationPath, this.contextPath);\n\t\t\t\t\treturn this.getDataFieldCollection(formContainer, facetContext);\n\t\t\t\t} else {\n\t\t\t\t\treturn \"\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * @returns True if a textarea is alone in a form\n\t */\n\tcheckIfTextAreaIsAlone(): boolean {\n\t\tif (this.formContainers!.length === 1) {\n\t\t\tif (this.formContainers![0].formElements.length === 1) {\n\t\t\t\tconst facet = getInvolvedDataModelObjects(\n\t\t\t\t\tthis.contextPath.getModel().createBindingContext(this.formContainers![0].annotationPath, this.contextPath)\n\t\t\t\t).targetObject as FieldGroupType | ReferenceFacet;\n\t\t\t\tlet fieldGroup: FieldGroupType | undefined;\n\t\t\t\tlet identification: Identification | undefined;\n\t\t\t\t// This is only for macros:form with a FieldGroup that contains only a TextArea\n\t\t\t\tif (facet.$Type === \"com.sap.vocabularies.UI.v1.FieldGroupType\") {\n\t\t\t\t\tfieldGroup = facet;\n\t\t\t\t} else if (hasFieldGroupTarget(facet)) {\n\t\t\t\t\tfieldGroup = facet?.Target?.$target as FieldGroupType;\n\t\t\t\t} else if (hasIdentificationTarget(facet)) {\n\t\t\t\t\tidentification = facet?.Target?.$target as Identification;\n\t\t\t\t}\n\n\t\t\t\tif (fieldGroup?.Data.length === 1) {\n\t\t\t\t\treturn (fieldGroup.Data[0] as DataField)?.Value?.$target?.annotations?.UI?.MultiLineText?.valueOf() === true;\n\t\t\t\t}\n\n\t\t\t\tif (identification?.length === 1) {\n\t\t\t\t\treturn (identification[0] as DataField)?.Value?.$target?.annotations?.UI?.MultiLineText?.valueOf() === true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Create the proper layout information based on the `layout` property defined externally.\n\t * @param isTextAreaAlone Whether the section contains a lonely TextArea inside\n\t * @returns The layout information for the xml.\n\t */\n\tgetLayoutInformation(isTextAreaAlone: boolean): string {\n\t\tswitch (this.layout.type) {\n\t\t\tcase \"ResponsiveGridLayout\":\n\t\t\t\treturn xml`<f:ResponsiveGridLayout adjustLabelSpan=\"${this.layout.adjustLabelSpan}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreakpointL=\"${this.layout.breakpointL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreakpointM=\"${this.layout.breakpointM}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreakpointXL=\"${this.layout.breakpointXL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumnsL=\"${isTextAreaAlone ? 1 : this.layout.columnsL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumnsM=\"${isTextAreaAlone ? 1 : this.layout.columnsM}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumnsXL=\"${isTextAreaAlone ? 1 : this.layout.columnsXL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\temptySpanL=\"${this.layout.emptySpanL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\temptySpanM=\"${this.layout.emptySpanM}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\temptySpanS=\"${this.layout.emptySpanS}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\temptySpanXL=\"${this.layout.emptySpanXL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabelSpanL=\"${this.layout.labelSpanL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabelSpanM=\"${this.layout.labelSpanM}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabelSpanS=\"${this.layout.labelSpanS}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabelSpanXL=\"${this.layout.labelSpanXL}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsingleContainerFullSize=\"${this.layout.singleContainerFullSize}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundDesign=\"${this.layout.backgroundDesign}\" />`;\n\t\t\tcase \"ColumnLayout\":\n\t\t\tdefault:\n\t\t\t\treturn xml`<f:ColumnLayout\n\t\t\t\t\t\t\t\tcolumnsM=\"${isTextAreaAlone ? 1 : this.layout.columnsM}\"\n\t\t\t\t\t\t\t\tcolumnsL=\"${isTextAreaAlone ? 1 : this.layout.columnsL}\"\n\t\t\t\t\t\t\t\tcolumnsXL=\"${isTextAreaAlone ? 1 : this.layout.columnsXL}\"\n\t\t\t\t\t\t\t\tlabelCellsLarge=\"${this.layout.labelCellsLarge}\"\n\t\t\t\t\t\t\t\temptyCellsLarge=\"${this.layout.emptyCellsLarge}\"\n\t\t\t\t\t\t\t\tbackgroundDesign=\"${this.layout.backgroundDesign}\" />`;\n\t\t}\n\t}\n\n\tgetTemplate(): string {\n\t\tconst onChangeStr = (this.onChange && this.onChange.replace(\"{\", \"\\\\{\").replace(\"}\", \"\\\\}\")) || \"\";\n\t\tconst metaPathPath = this.metaPath.getPath();\n\t\tconst contextPathPath = this.contextPath.getPath();\n\t\tconst isTextAreaAlone = this.checkIfTextAreaIsAlone();\n\n\t\tif (!this.isVisible) {\n\t\t\treturn \"\";\n\t\t} else {\n\t\t\treturn xml`<macro:FormAPI xmlns:macro=\"sap.fe.macros.form\"\n\t\t\t\t\txmlns:macrodata=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n\t\t\t\t\txmlns:f=\"sap.ui.layout.form\"\n\t\t\t\t\txmlns:fl=\"sap.ui.fl\"\n\t\t\t\t\txmlns:dt=\"sap.ui.dt\"\n\t\t\t\t\txmlns:coreControls=\"sap.fe.core.controls\"\n\t\t\t\t\tid=\"${this._apiId}\"\n\t\t\t\t\tmetaPath=\"${metaPathPath}\"\n\t\t\t\t\tcontextPath=\"${contextPathPath}\">\n\t\t\t\t<f:Form\n\t\t\t\t\tfl:delegate='{\n\t\t\t\t\t\t\"name\": \"sap/fe/macros/form/FormDelegate\",\n\t\t\t\t\t\t\"delegateType\": \"complete\"\n\t\t\t\t\t}'\n\t\t\t\t\tdt:designtime=\"sap/fe/macros/form/Form.designtime\"\n\t\t\t\t\tid=\"${this._contentId}\"\n\t\t\t\t\teditable=\"${this._editable}\"\n\t\t\t\t\tvisible=\"${this.isVisible}\"\n\t\t\t\t\tmacrodata:navigationPath=\"${contextPathPath}\"\n\t\t\t\t\tmacrodata:metaPath=\"${metaPathPath}\"\n\t\t\t\t\tmacrodata:onChange=\"${onChangeStr}\"\n\t\t\t\t\tariaLabelledBy=\"${this.ariaLabelledBy}\"\n\t\t\t\t>\n\t\t\t\t\t${this.addConditionally(\n\t\t\t\t\t\tthis.title !== undefined,\n\t\t\t\t\t\txml`<f:title>\n\t\t\t\t\t\t\t<core:Title level=\"${this.titleLevel}\" text=\"${this.title}\" />\n\t\t\t\t\t\t</f:title>`\n\t\t\t\t\t)}\n\t\t\t\t\t<f:layout>\n\t\t\t\t\t${this.getLayoutInformation(isTextAreaAlone)}\n\n\t\t\t\t\t</f:layout>\n\t\t\t\t\t<f:formContainers>\n\t\t\t\t\t\t${this.getFormContainers()}\n\t\t\t\t\t</f:formContainers>\n\t\t\t\t\t<f:dependents>\n\t\t\t\t\t\t<coreControls:HideFormGroupAutomatically />\n\t\t\t\t\t</f:dependents>\n\t\t\t\t</f:Form>\n\t\t\t</macro:FormAPI>`;\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[]}