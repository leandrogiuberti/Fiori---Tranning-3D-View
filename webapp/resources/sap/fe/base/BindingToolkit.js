/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/base/AnnotationEnum"],function(e){"use strict";var t={};var n=e.resolveEnumValue;function r(e){return e?._type==="Property"}t.isProperty=r;const a={"Edm.Boolean":{type:"sap.ui.model.odata.type.Boolean"},"Edm.Byte":{type:"sap.ui.model.odata.type.Byte"},"Edm.Date":{type:"sap.ui.model.odata.type.Date"},"Edm.DateTimeOffset":{constraints:{$Precision:"precision",$V4:"V4"},type:"sap.ui.model.odata.type.DateTimeOffset"},"Edm.Decimal":{constraints:{"@Org.OData.Validation.V1.Minimum/$Decimal":"minimum","@Org.OData.Validation.V1.Minimum@Org.OData.Validation.V1.Exclusive":"minimumExclusive","@Org.OData.Validation.V1.Maximum/$Decimal":"maximum","@Org.OData.Validation.V1.Maximum@Org.OData.Validation.V1.Exclusive":"maximumExclusive",$Precision:"precision",$Scale:"scale"},type:"sap.ui.model.odata.type.Decimal"},"Edm.Double":{type:"sap.ui.model.odata.type.Double"},"Edm.Guid":{type:"sap.ui.model.odata.type.Guid"},"Edm.Int16":{type:"sap.ui.model.odata.type.Int16"},"Edm.Int32":{type:"sap.ui.model.odata.type.Int32"},"Edm.Int64":{type:"sap.ui.model.odata.type.Int64"},"Edm.SByte":{type:"sap.ui.model.odata.type.SByte"},"Edm.Single":{type:"sap.ui.model.odata.type.Single"},"Edm.Stream":{type:"sap.ui.model.odata.type.Stream"},"Edm.Binary":{type:"sap.ui.model.odata.type.Stream"},"Edm.String":{constraints:{"@com.sap.vocabularies.Common.v1.IsDigitSequence":"isDigitSequence",$MaxLength:"maxLength",$Nullable:"nullable"},type:"sap.ui.model.odata.type.String"},"Edm.TimeOfDay":{constraints:{$Precision:"precision"},type:"sap.ui.model.odata.type.TimeOfDay"}};t.EDM_TYPE_MAPPING=a;const o={_type:"Unresolvable"};t.unresolvableExpression=o;function i(e){return e.replace(/'/g,"\\'")}t.escapeXmlAttribute=i;function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}return t.find(e=>e._type==="Unresolvable")!==undefined}t.hasUnresolvableExpression=s;function u(e,t){if(e._type!==t._type){return false}switch(e._type){case"Unresolvable":return false;case"Constant":case"EmbeddedBinding":case"EmbeddedExpressionBinding":return e.value===t.value;case"Not":return u(e.operand,t.operand);case"Truthy":return u(e.operand,t.operand);case"Set":return e.operator===t.operator&&e.operands.length===t.operands.length&&e.operands.every(e=>t.operands.some(t=>u(e,t)));case"IfElse":return u(e.condition,t.condition)&&u(e.onTrue,t.onTrue)&&u(e.onFalse,t.onFalse);case"Comparison":return e.operator===t.operator&&u(e.operand1,t.operand1)&&u(e.operand2,t.operand2);case"Concat":const n=e.expressions;const r=t.expressions;if(n.length!==r.length){return false}return n.every((e,t)=>u(e,r[t]));case"Length":return u(e.pathInModel,t.pathInModel);case"PathInModel":return e.modelName===t.modelName&&e.path===t.path&&e.targetEntitySet===t.targetEntitySet;case"Formatter":return e.fn===t.fn&&e.parameters.length===t.parameters.length&&e.parameters.every((e,n)=>u(t.parameters[n],e));case"ComplexType":return e.type===t.type&&e.bindingParameters.length===t.bindingParameters.length&&e.bindingParameters.every((e,n)=>u(t.bindingParameters[n],e));case"Function":const a=t;if(e.obj===undefined||a.obj===undefined){return e.obj===a}return e.fn===a.fn&&u(e.obj,a.obj)&&e.parameters.length===a.parameters.length&&e.parameters.every((e,t)=>u(a.parameters[t],e));case"Ref":return e.ref===t.ref}return false}t._checkExpressionsAreEqual=u;function l(e){return e.operands.reduce((t,n)=>{const r=n._type==="Set"&&n.operator===e.operator?n.operands:[n];r.forEach(e=>{if(t.operands.every(t=>!u(t,e))){t.operands.push(e)}});return t},{_type:"Set",operator:e.operator,operands:[]})}function p(e){const t=e.map(c);return e.some((e,n)=>{for(let r=n+1;r<t.length;r++){if(u(e,t[r])){return true}}return false})}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}const r=l({_type:"Set",operator:"&&",operands:t.map(E)}).operands;if(s(...r)){return o}let a=false;const i=r.filter(e=>{if(P(e)){a=true}return!I(e)});if(a){return h(false)}else if(i.length===0){const e=r.reduce((e,t)=>e&&_(t),true);return h(e)}else if(i.length===1){return i[0]}else if(p(i)){return h(false)}else{return{_type:"Set",operator:"&&",operands:i}}}t.and=f;function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}const r=l({_type:"Set",operator:"||",operands:t.map(E)}).operands;if(s(...r)){return o}let a=false;const i=r.filter(e=>{if(_(e)){a=true}return!I(e)||e.value});if(a){return h(true)}else if(i.length===0){const e=r.reduce((e,t)=>e&&_(t),true);return h(e)}else if(i.length===1){return i[0]}else if(p(i)){return h(true)}else{return{_type:"Set",operator:"||",operands:i}}}t.or=d;function c(e){e=E(e);if(s(e)){return o}else if(I(e)){return h(!e.value)}else if(typeof e==="object"&&e._type==="Set"&&e.operator==="||"&&e.operands.every(e=>I(e)||T(e))){return f(...e.operands.map(e=>c(e)))}else if(typeof e==="object"&&e._type==="Set"&&e.operator==="&&"&&e.operands.every(e=>I(e)||T(e))){return d(...e.operands.map(e=>c(e)))}else if(T(e)){switch(e.operator){case"!==":return{...e,operator:"==="};case"<":return{...e,operator:">="};case"<=":return{...e,operator:">"};case"===":return{...e,operator:"!=="};case">":return{...e,operator:"<="};case">=":return{...e,operator:"<"}}}else if(e._type==="Not"){return e.operand}return{_type:"Not",operand:e}}t.not=c;function m(e){if(I(e)){return h(!!e.value)}else{return{_type:"Truthy",operand:e}}}t.isTruthy=m;function y(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];let r=arguments.length>3?arguments[3]:undefined;return g(e,t,n,r)}t.bindingExpression=y;function g(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];let r=arguments.length>3?arguments[3]:undefined;if(e===undefined){return o}let a;if(r){a=r(e);if(a===undefined){return o}}else{const t=n.concat();t.push(e);a=t.join("/")}return{_type:"PathInModel",modelName:t,path:a}}t.pathInModel=g;function h(e){let t;if(typeof e==="object"&&e!==null&&e!==undefined){if(Array.isArray(e)){t=e.map(E)}else if(N(e)){t=e.valueOf()}else{t=Object.entries(e).reduce((e,t)=>{let[n,r]=t;const a=E(r);if(a._type!=="Constant"||a.value!==undefined){e[n]=a}return e},{})}}else{t=e}return{_type:"Constant",value:t}}t.constant=h;function $(e,t){if(e!==undefined&&typeof e==="string"&&e.startsWith("{")){const t=/^{(.*)>(.+)}$/;const n=t.exec(e);if(e.startsWith("{=")){return{_type:"EmbeddedExpressionBinding",value:e}}else if(n){return g(n[2]||"",n[1]||undefined)}else{return{_type:"EmbeddedBinding",value:e}}}else if(t==="boolean"&&typeof e==="string"&&(e==="true"||e==="false")){return h(e==="true")}else if(t==="number"&&typeof e==="string"&&(!isNaN(Number(e))||e==="NaN")){return h(Number(e))}else{return h(e)}}t.resolveBindingString=$;function v(e){return{_type:"Ref",ref:e}}t.ref=v;function b(e,t){if(typeof e==="object"&&e.__bindingInfo){return g("/"+t.toString(),e.__bindingInfo.model)}else{return h(e)}}t.bindState=b;function E(e){if(O(e)){return e}return h(e)}t.wrapPrimitive=E;function O(e){return e?._type!==undefined}t.isBindingToolkitExpression=O;function I(e){return typeof e!=="object"||e._type==="Constant"}t.isConstant=I;function _(e){return I(e)&&e.value===true}function P(e){return I(e)&&e.value===false}function S(e){return e?._type==="PathInModel"}t.isPathInModelExpression=S;function C(e){return e?._type==="ComplexType"}t.isComplexTypeExpression=C;function x(e){return e?._type==="Concat"}function F(e){return e?._type==="IfElse"}function T(e){return e._type==="Comparison"}function D(e){const t=e;return t?._type==="Constant"&&t?.value===undefined}t.isUndefinedExpression=D;function N(e){switch(e.constructor.name){case"String":case"Number":case"Boolean":return true;default:return false}}function w(e){return typeof e==="object"&&!N(e)}function M(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];let n=arguments.length>2?arguments[2]:undefined;let r=arguments.length>3?arguments[3]:undefined;if(e===undefined){return E(n)}e=e?.valueOf();if(!w(e)){return h(e)}switch(e.type){case"Path":return g(e.path,undefined,t,r);case"If":return A(e.$If,t,r);case"Not":return c(j(e.$Not,t,r));case"Eq":return q(j(e.$Eq[0],t,r),j(e.$Eq[1],t,r));case"Ne":return G(j(e.$Ne[0],t,r),j(e.$Ne[1],t,r));case"Gt":return Y(j(e.$Gt[0],t,r),j(e.$Gt[1],t,r));case"Ge":return U(j(e.$Ge[0],t,r),j(e.$Ge[1],t,r));case"Lt":return R(j(e.$Lt[0],t,r),j(e.$Lt[1],t,r));case"Le":return W(j(e.$Le[0],t,r),j(e.$Le[1],t,r));case"Or":return d(...e.$Or.map(function(e){return j(e,t,r)}));case"And":return f(...e.$And.map(function(e){return j(e,t,r)}));case"Apply":return k(e,t,r);case"Constant":return h(e.value)}return o}t.getExpressionFromAnnotation=M;function j(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];let r=arguments.length>2?arguments[2]:undefined;if(e===null||typeof e!=="object"){return h(e)}else if(e.hasOwnProperty("$Or")){return d(...e.$Or.map(function(e){return j(e,t,r)}))}else if(e.hasOwnProperty("$And")){return f(...e.$And.map(function(e){return j(e,t,r)}))}else if(e.hasOwnProperty("$Not")){return c(j(e.$Not,t,r))}else if(e.hasOwnProperty("$Eq")){return q(j(e.$Eq[0],t,r),j(e.$Eq[1],t,r))}else if(e.hasOwnProperty("$Ne")){return G(j(e.$Ne[0],t,r),j(e.$Ne[1],t,r))}else if(e.hasOwnProperty("$Gt")){return Y(j(e.$Gt[0],t,r),j(e.$Gt[1],t,r))}else if(e.hasOwnProperty("$Ge")){return U(j(e.$Ge[0],t,r),j(e.$Ge[1],t,r))}else if(e.hasOwnProperty("$Lt")){return R(j(e.$Lt[0],t,r),j(e.$Lt[1],t,r))}else if(e.hasOwnProperty("$Le")){return W(j(e.$Le[0],t,r),j(e.$Le[1],t,r))}else if(e.hasOwnProperty("$Path")){return g(e.$Path,undefined,t,r)}else if(e.hasOwnProperty("$Apply")){return M({type:"Apply",$Function:e.$Function,$Apply:e.$Apply},t,undefined,r)}else if(e.hasOwnProperty("$If")){return M({type:"If",$If:e.$If},t,undefined,r)}else if(e.hasOwnProperty("$EnumMember")){return h(n(e.$EnumMember))}return h(false)}function A(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];let n=arguments.length>2?arguments[2]:undefined;return K(j(e[0],t,n),j(e[1],t,n),j(e[2],t,n))}t.annotationIfExpression=A;function V(e){let t=e;if(e.hasOwnProperty("$Path")){t={type:"Path",path:e.$Path}}else if(e.hasOwnProperty("$If")){t={type:"If",$If:e.$If}}else if(e.hasOwnProperty("$Apply")){t={type:"Apply",$Function:e.$Function,$Apply:e.$Apply}}return t}function k(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];let n=arguments.length>2?arguments[2]:undefined;switch(e.$Function){case"odata.concat":return re(...e.$Apply.map(e=>M(V(e),t,undefined,n)));case"odata.uriEncode":const r=M(V(e.$Apply[0]),t,undefined,n);return te("odata.uriEncode",[r,"Edm.String"],undefined,true);case"odata.fillUriTemplate":const a=e.$Apply[0];const o=e.$Apply.slice(1);const i={};o.forEach(e=>{i[e.$Name]=M(V(e.$LabeledElement),t,undefined,n)});return te("odata.fillUriTemplate",[a,i],undefined,true)}return o}t.annotationApplyExpression=k;function L(e,t,n){const r=E(t);const a=E(n);if(s(r,a)){return o}if(I(r)&&I(a)){switch(e){case"!==":return h(r.value!==a.value);case"===":return h(r.value===a.value);case"<":if(r.value===null||r.value===undefined||a.value===null||a.value===undefined){return h(false)}return h(r.value<a.value);case"<=":if(r.value===null||r.value===undefined||a.value===null||a.value===undefined){return h(false)}return h(r.value<=a.value);case">":if(r.value===null||r.value===undefined||a.value===null||a.value===undefined){return h(false)}return h(r.value>a.value);case">=":if(r.value===null||r.value===undefined||a.value===null||a.value===undefined){return h(false)}return h(r.value>=a.value)}}else{return{_type:"Comparison",operator:e,operand1:r,operand2:a}}}function B(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e._type==="Unresolvable"){return e}if(!t){return{_type:"Length",pathInModel:e}}return K(q(e,undefined),-1,B(e))}t.length=B;function q(e,t){const n=E(e);const r=E(t);if(s(n,r)){return o}if(u(n,r)){return h(true)}function a(e,t){if(e._type==="Comparison"&&_(t)){return e}else if(e._type==="Comparison"&&P(t)){return c(e)}else if(e._type==="IfElse"&&u(e.onTrue,t)){return d(e.condition,q(e.onFalse,t))}else if(e._type==="IfElse"&&u(e.onFalse,t)){return d(c(e.condition),q(e.onTrue,t))}else if(e._type==="IfElse"&&I(e.onTrue)&&I(e.onFalse)&&I(t)&&!u(e.onTrue,t)&&!u(e.onFalse,t)){return h(false)}return undefined}const i=a(n,r)??a(r,n);return i??L("===",n,r)}t.equal=q;function G(e,t){return c(q(e,t))}t.notEqual=G;function U(e,t){return L(">=",e,t)}t.greaterOrEqual=U;function Y(e,t){return L(">",e,t)}t.greaterThan=Y;function W(e,t){return L("<=",e,t)}t.lessOrEqual=W;function R(e,t){return L("<",e,t)}t.lessThan=R;function K(e,t,n){let r=E(e);let a=E(t);let i=E(n);if(r._type==="Not"){[a,i]=[i,a];r=c(r)}if(a._type==="IfElse"&&u(r,a.condition)){a=a.onTrue}if(i._type==="IfElse"&&u(r,i.condition)){i=i.onFalse}if(I(r)){return r.value?a:i}if(u(a,i)){return a}if(P(i)){return f(r,a)}if(_(i)){return d(c(r),a)}if(P(a)){return f(c(r),i)}if(_(a)){return d(r,i)}if(s(r,a,i)){return o}if(C(e)||C(t)||C(n)){let r=0;const a=J([e,t,n],"._formatters.StandardFormatter#ifElse");const o=[];ae(a,"PathInModel",e=>{o.push(e);return g(`$${r++}`,"$")},true);o.unshift(h(JSON.stringify(a)));return J(o,"._formatters.StandardFormatter.bind($control)#evaluateComplexExpression",undefined,true)}return{_type:"IfElse",condition:r,onTrue:a,onFalse:i}}t.ifElse=K;function Q(e){switch(e._type){case"Constant":case"Formatter":case"ComplexType":return false;case"Set":return e.operands.some(Q);case"PathInModel":return e.modelName===undefined;case"Comparison":return Q(e.operand1)||Q(e.operand2);case"IfElse":return Q(e.condition)||Q(e.onTrue)||Q(e.onFalse);case"Not":case"Truthy":return Q(e.operand);default:return false}}function J(e,t,n){let r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const a=e.map(E);if(s(...a)){return o}if(n){if(!a.some(Q)){n.keys.forEach(e=>a.push(g(e.name,"")))}}let i="";if(typeof t==="string"){i=t}else{i=t.__functionName}const[u,l]=i.split("#");if(!r&&(a.some(C)||a.some(x)||a.some(F))){let e=0;const t=J(a,i,undefined,true);const n=[];ae(t,"PathInModel",t=>{n.push(t);return g(`$${e++}`,"$")},true);n.unshift(h(JSON.stringify(t)));return J(n,"._formatters.StandardFormatter.bind($control)#evaluateComplexExpression",undefined,true)}else if(!!l&&l.length>0){a.unshift(h(l))}return{_type:"Formatter",fn:u,parameters:a}}t.formatResult=J;function X(e,t){const n={};if(e?.constraints?.$Scale&&t.scale!==undefined){n.scale=t.scale}if(e?.constraints?.$Precision&&t.precision!==undefined){n.precision=t.precision}if(e?.constraints?.$MaxLength&&t.maxLength!==undefined){n.maxLength=t.maxLength}if(t.nullable===false){n.nullable=false}if(e?.constraints?.["@Org.OData.Validation.V1.Minimum/$Decimal"]&&!isNaN(t.annotations?.Validation?.Minimum)){n.minimum=`${t.annotations?.Validation?.Minimum}`}if(e?.constraints?.["@Org.OData.Validation.V1.Maximum/$Decimal"]&&!isNaN(t.annotations?.Validation?.Maximum)){n.maximum=`${t.annotations?.Validation?.Maximum}`}if(t.annotations?.Common?.IsDigitSequence&&e.type==="sap.ui.model.odata.type.String"&&e?.constraints?.["@com.sap.vocabularies.Common.v1.IsDigitSequence"]){n.isDigitSequence=true}if(e?.constraints?.$V4){n.V4=true}return n}t.setUpConstraints=X;function Z(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;const o=t;if(e._type!=="Property"&&e._type!=="ActionParameter"){return o}const i=a[e.type];if(!i){return o}if(!o.formatOptions){o.formatOptions={}}o.constraints={};o.type=i.type;if(!n){o.constraints=X(i,e)}if(o?.type?.indexOf("sap.ui.model.odata.type.Int")===0&&o?.type!=="sap.ui.model.odata.type.Int64"||o?.type==="sap.ui.model.odata.type.Double"){o.formatOptions=Object.assign(o.formatOptions,{parseAsString:false})}if(o.type==="sap.ui.model.odata.type.String"&&r(e)){if(o.constraints?.isDigitSequence||o.constraints?.nullable!==false&&e.nullable===true){o.formatOptions.parseKeepsEmptyString=false}else{o.formatOptions.parseKeepsEmptyString=true}const t=z(e);if(t){o.formatOptions.fiscalType=t;o.type="sap.fe.core.type.FiscalDate"}}const s=["sap.ui.model.odata.type.Int16","sap.ui.model.odata.type.Int32","sap.ui.model.odata.type.Int64","sap.ui.model.odata.type.Single","sap.ui.model.odata.type.Double","sap.ui.model.odata.type.Decimal","sap.ui.model.odata.type.Byte","sap.ui.model.odata.type.SByte"];if(o.constraints?.nullable===false&&o.type&&s.includes(o.type)){o.formatOptions=Object.assign(o.formatOptions,{parseEmptyValueToZero:true})}if(o.constraints?.nullable!==false&&(o.type==="sap.ui.model.odata.type.Int64"||o.type==="sap.ui.model.odata.type.Decimal")){o.formatOptions=Object.assign(o.formatOptions,{emptyString:""})}return o}t.formatWithTypeInformation=Z;const z=function(e){if(e.annotations?.Common?.IsFiscalYear){return"com.sap.vocabularies.Common.v1.IsFiscalYear"}if(e.annotations?.Common?.IsFiscalPeriod){return"com.sap.vocabularies.Common.v1.IsFiscalPeriod"}if(e.annotations?.Common?.IsFiscalYearPeriod){return"com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"}if(e.annotations?.Common?.IsFiscalQuarter){return"com.sap.vocabularies.Common.v1.IsFiscalQuarter"}if(e.annotations?.Common?.IsFiscalYearQuarter){return"com.sap.vocabularies.Common.v1.IsFiscalYearQuarter"}if(e.annotations?.Common?.IsFiscalWeek){return"com.sap.vocabularies.Common.v1.IsFiscalWeek"}if(e.annotations?.Common?.IsFiscalYearWeek){return"com.sap.vocabularies.Common.v1.IsFiscalYearWeek"}if(e.annotations?.Common?.IsDayOfFiscalYear){return"com.sap.vocabularies.Common.v1.IsDayOfFiscalYear"}};t.getFiscalType=z;function H(e,t,n,r,a){const i=e.map(E);if(s(...i)){return o}if(i.length===1&&I(i[0])&&!n){return i[0]}else if(n){if(!i.some(Q)){n.keys.forEach(e=>i.push(g(e.name,"")))}}r=ee(e[0],r);if(t==="sap.ui.model.odata.type.Unit"){const e=g("/##@@requestUnitsOfMeasure");e.targetType="any";e.mode="OneTime";r??={};r.preserveDecimals=a?.skipDecimalsValidation??false;i.push(e)}else if(t==="sap.ui.model.odata.type.Currency"){const e=g("/##@@requestCurrencyCodes");e.targetType="any";e.mode="OneTime";r??={};if(a?.skipDecimalsValidation===true){r.decimals=99}r.preserveDecimals=a?.skipDecimalsValidation??false;i.push(e)}return{_type:"ComplexType",type:t,formatOptions:r||{},constraints:a||{},parameters:{},bindingParameters:i}}t.addTypeInformation=H;function ee(e,t){if(!(t&&t.showNumber===false)&&(e?.type?.indexOf("sap.ui.model.odata.type.Int")===0||e?.type==="sap.ui.model.odata.type.Decimal"||e?.type==="sap.ui.model.odata.type.Double")){if(e?.type==="sap.ui.model.odata.type.Int64"||e?.type==="sap.ui.model.odata.type.Decimal"){t=t?.showMeasure===false?{showMeasure:false,decimalPadding:t.decimalPadding,emptyString:t?.emptyString}:{decimalPadding:t?.decimalPadding,emptyString:t?.emptyString}}else{t=t?.showMeasure===false?{parseAsString:false,showMeasure:false,decimalPadding:t.decimalPadding,emptyString:t?.emptyString}:{parseAsString:false,decimalPadding:t?.decimalPadding,emptyString:t?.emptyString}}if(e?.constraints?.nullable!==false){t.emptyString=null}else{t.emptyString??=0}}return t}function te(e,t,n){let r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const a=typeof e==="string"?e:e.__functionName;return{_type:"Function",obj:n!==undefined?E(n):undefined,fn:a,isFormattingFn:r,parameters:t.map(E)}}t.fn=te;function ne(e){const t=[];ae(e,"PathInModel",e=>{const n={...e,alwaysKeepTargetType:true};t.push(d(q(n,""),q(e,undefined),q(e,null)));return e});return f(...t)}t.isEmpty=ne;function re(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}const r=t.map(E);if(s(...r)){return o}if(r.every(I)){return h(r.reduce((e,t)=>{if(t.value!==undefined&&t.value!==null){return e+t.value.toString()}return e},""))}else if(r.some(C)){let e=0;const t=J(r,"._formatters.StandardFormatter#concat",undefined,true);const n=[];ae(t,"PathInModel",t=>{n.push(t);return g(`$${e++}`,"$")});n.unshift(h(JSON.stringify(t)));return J(n,"._formatters.StandardFormatter.bind($control)#evaluateComplexExpression",undefined,true)}return{_type:"Concat",expressions:r}}t.concat=re;function ae(e,t,n){let r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;let a=e;switch(a._type){case"Function":case"Formatter":a.parameters=a.parameters.map(e=>ae(e,t,n,r));break;case"Concat":a.expressions=a.expressions.map(e=>ae(e,t,n,r));a=re(...a.expressions);break;case"ComplexType":a.bindingParameters=a.bindingParameters.map(e=>ae(e,t,n,r));break;case"IfElse":const e=ae(a.onTrue,t,n,r);const o=ae(a.onFalse,t,n,r);let i=a.condition;if(r){i=ae(a.condition,t,n,r)}a=K(i,e,o);break;case"Not":if(r){const e=ae(a.operand,t,n,r);a=c(e)}break;case"Truthy":break;case"Set":if(r){const e=a.operands.map(e=>ae(e,t,n,r));a=a.operator==="||"?d(...e):f(...e)}break;case"Comparison":if(r){const e=ae(a.operand1,t,n,r);const o=ae(a.operand2,t,n,r);a=L(a.operator,e,o)}break;case"Constant":const s=a.value;if(typeof s==="object"&&s){Object.keys(s).forEach(e=>{s[e]=ae(s[e],t,n,r)})}break;case"Ref":case"Length":case"PathInModel":case"EmbeddedBinding":case"EmbeddedExpressionBinding":case"Unresolvable":break}if(t===a._type){a=n(e)}return a}t.transformRecursively=ae;const oe=function(e){return!I(e)&&!S(e)&&O(e)&&e._type!=="IfElse"&&e._type!=="Function"};function ie(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(t&&Object.keys(e.value).length===0){return""}const n=e.value;const r=[];Object.keys(n).forEach(e=>{const a=n[e];const o=fe(a,true,false,t);if(o&&o.length>0){r.push(`${e}: ${o}`)}});return`{${r.join(", ")}}`}function se(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(e.value===null){return r?null:"null"}if(e.value===undefined){return r?undefined:"undefined"}if(typeof e.value==="object"){if(Array.isArray(e.value)){const t=e.value.map(e=>fe(e,true));return`[${t.join(", ")}]`}else{return ie(e,n)}}if(t){switch(typeof e.value){case"number":case"bigint":case"boolean":return e.value.toString();case"string":return`'${i(e.value.toString())}'`;default:return""}}else{return r?e.value:e.value.toString()}}t.compileConstant=se;function ue(e,t,n){if(e.type||e.parameters||e.targetType||e.formatOptions||e.constraints){const r={path:ge(e),type:e.type,targetType:e.targetType,parameters:e.parameters,formatOptions:e.formatOptions,constraints:e.constraints};const a=fe(r,false,false,true);if(t){const t=e.alwaysKeepTargetType?"$":n;return`${t}${a}`}return a}else if(t){return`${n}{${ge(e)}}`}else{return`{${ge(e)}}`}}function le(e){if(e.bindingParameters.length===1){return`{${me(e.bindingParameters[0],true)}, type: '${e.type}'}`}let t=`], type: '${e.type}'`;if(ye(e.formatOptions)){t+=`, formatOptions: ${fe(e.formatOptions)}`}if(ye(e.constraints)){t+=`, constraints: ${fe(e.constraints)}`}if(ye(e.parameters)){t+=`, parameters: ${fe(e.parameters)}`}t+="}";return`{mode:'TwoWay', parts:[${e.bindingParameters.map(e=>me(e)).join(",")}${t}`}function pe(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(t){if(n){return`(${e})`}else{return e}}else{return`{= ${e}}`}}t.wrapBindingExpression=pe;function fe(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const a=E(e);const o=n?"$":"%";switch(a._type){case"Unresolvable":return undefined;case"Constant":return se(a,t,r);case"Ref":return a.ref||"null";case"Function":let e=false;if(a.isFormattingFn){ae(a,"Function",t=>{if(t!==a&&t.obj===undefined){e=true}return t},true);ae(a,"Constant",t=>{if(t!==a&&typeof t.value==="object"){ae(t,"PathInModel",t=>{e=true;return t})}return t},true)}const i=`${a.parameters.map(e=>fe(e,true)).join(", ")}`;let s=a.obj===undefined?`${a.fn}(${i})`:`${fe(a.obj,true)}.${a.fn}(${i})`;if(!t&&e){s=`{= ${s}}`}return s;case"EmbeddedExpressionBinding":return t?`(${a.value.substring(2,a.value.length-1)})`:`${a.value}`;case"EmbeddedBinding":return t?`${o}${a.value}`:`${a.value}`;case"PathInModel":return ue(a,t,o);case"Comparison":const u=de(a);return pe(u,t);case"IfElse":const l=`${fe(a.condition,true)} ? ${fe(a.onTrue,true,n)} : ${fe(a.onFalse,true,n)}`;return pe(l,t,true);case"Set":const p=a.operands.map(e=>fe(e,true)).join(` ${a.operator} `);return pe(p,t,true);case"Concat":const f=a.expressions.map(e=>fe(e,true,true)).join(" + ");return pe(f,t);case"Length":const d=`${fe(a.pathInModel,true)}.length`;return pe(d,t);case"Not":const c=`!${fe(a.operand,true)}`;return pe(c,t);case"Truthy":const m=`!!${fe(a.operand,true)}`;return pe(m,t);case"Formatter":const y=ce(a);return t?`$${y}`:y;case"ComplexType":const g=le(a);return t?`$${g}`:g;default:return""}}t.compileExpression=fe;function de(e){function t(e){const t=fe(e,true)??"undefined";return pe(t,true,oe(e))}return`${t(e.operand1)} ${e.operator} ${t(e.operand2)}`}function ce(e){if(e.parameters.length===1){return`{${me(e.parameters[0],true)}, formatter: '${e.fn}'}`}else{const t=e.parameters.map(e=>{if(e._type==="ComplexType"){return le(e)}else{return me(e)}});return`{parts: [${t.join(", ")}], formatter: '${e.fn}'}`}}function me(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let n="";if(e._type==="Constant"){if(e.value===undefined){n=`value: 'undefined'`}else{n=`value: ${se(e,true)}`}}else if(e._type==="PathInModel"){n=`path: '${ge(e)}'`;n+=e.type?`, type: '${e.type}'`:`, targetType: 'any'`;if(e.mode){n+=`, mode: '${fe(e.mode)}'`}if(ye(e.constraints)){n+=`, constraints: ${fe(e.constraints)}`}if(ye(e.formatOptions)){n+=`, formatOptions: ${fe(e.formatOptions)}`}if(ye(e.parameters)){n+=`, parameters: ${fe(e.parameters)}`}}else{return""}return t?n:`{${n}}`}function ye(e){return!!e&&Object.keys(e).length>0}function ge(e){return`${e.modelName?e.modelName+">":""}${e.path}`}return t},false);
//# sourceMappingURL=BindingToolkit.js.map