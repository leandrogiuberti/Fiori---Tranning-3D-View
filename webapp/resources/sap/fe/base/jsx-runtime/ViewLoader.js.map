{"version":3,"file":"ViewLoader.js","names":["ViewLoader","_dec","defineUI5Class","_dec2","property","type","_class","_class2","_View","mSettings","_this","cache","call","this","_initializerDefineProperty","_descriptor","sViewName","viewName","_oContainingView","_exports","_inheritsLoose","_proto","prototype","loadDependency","async","name","Promise","resolve","sap","ui","require","MDXContent","initViewSettings","viewConfig","getViewData","viewContent","_jsxViewName","getMetadata","isA","controller","viewContentFn","getControllerName","viewData","controllerName","getAutoPrefixId","createContent","oController","preprocessorData","mPreprocessors","xml","_fnSettingsPreprocessor","owner","Component","getOwnerComponentFor","runAsOwner","fn","render","View","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./ViewLoader.tsx"],"sourcesContent":["import type { NonAbstractClass } from \"sap/fe/base/ClassSupport\";\nimport { defineUI5Class, property } from \"sap/fe/base/ClassSupport\";\nimport type { XMLPreprocessorContext } from \"sap/fe/core/TemplateComponent\";\nimport Component from \"sap/ui/core/Component\";\nimport type Control from \"sap/ui/core/Control\";\nimport type { $ControlSettings } from \"sap/ui/core/Control\";\nimport type Controller from \"sap/ui/core/mvc/Controller\";\nimport View from \"sap/ui/core/mvc/View\";\n\ntype JSXViewController = Controller & { render?: () => Control };\n@defineUI5Class(\"sap.fe.base.jsx-runtime.MDXViewLoader\")\nexport default class ViewLoader extends View {\n\tstatic preprocessorData?: XMLPreprocessorContext;\n\n\tstatic controller: Controller;\n\n\t@property({ type: \"string\" })\n\tviewName!: string;\n\n\tprivate viewContent?: Control;\n\n\tprivate viewContentFn?: Function;\n\n\tpublic sViewName: string;\n\n\tpublic _oContainingView: this;\n\n\tconstructor(mSettings: Record<string, unknown>) {\n\t\tdelete mSettings.cache;\n\t\tsuper(mSettings);\n\t\tthis.sViewName = this.viewName;\n\t\tthis._oContainingView = this;\n\t}\n\n\tasync loadDependency(name: string): Promise<unknown> {\n\t\treturn new Promise((resolve) => {\n\t\t\tsap.ui.require([name], (MDXContent: Function): void => {\n\t\t\t\tresolve(MDXContent);\n\t\t\t});\n\t\t});\n\t}\n\n\tasync initViewSettings(mSettings: Record<string, unknown>): Promise<void> {\n\t\tconst viewConfig = this.getViewData() as { viewContent?: Control; _jsxViewName: string } & Record<string, unknown>;\n\t\tconst viewContent = viewConfig.viewContent || ((await this.loadDependency(viewConfig._jsxViewName)) as Control | Function);\n\t\tdelete mSettings.cache;\n\t\tif ((viewContent as Control)?.getMetadata?.().isA(\"sap.ui.core.mvc.Controller\")) {\n\t\t\tmSettings.controller = new (viewContent as NonAbstractClass<Control>)(viewConfig as $ControlSettings);\n\t\t} else {\n\t\t\tthis.viewContentFn = viewContent as Function;\n\t\t}\n\t}\n\n\tgetControllerName(): string {\n\t\tconst viewData = this.getViewData() as { controllerName: string };\n\t\treturn viewData.controllerName;\n\t}\n\n\tgetAutoPrefixId(): boolean {\n\t\treturn true;\n\t}\n\n\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t// @ts-ignore\n\tcreateContent(oController: JSXViewController): Control {\n\t\tViewLoader.preprocessorData = (this as { mPreprocessors?: { xml?: XMLPreprocessorContext } })?.mPreprocessors?.xml;\n\t\tViewLoader.controller = oController;\n\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t// @ts-ignore\n\t\tthis._fnSettingsPreprocessor = function (this: { controller?: Controller }): void {\n\t\t\tthis.controller = oController;\n\t\t};\n\n\t\tconst owner = Component.getOwnerComponentFor(this)! ?? { runAsOwner: (fn: Function) => fn() };\n\t\treturn owner.runAsOwner(() => {\n\t\t\tif (oController && oController.render) {\n\t\t\t\treturn oController.render();\n\t\t\t}\n\t\t\treturn this.viewContentFn?.();\n\t\t});\n\t}\n}\n"],"mappings":";;;;8nCAWqBA,GAAUC,EAD9BC,EAAe,yCAAwCC,EAMtDC,EAAS,CAAEC,KAAM,WAAWJ,EAAAK,GAAAC,EAAA,SAAAC,GAW7B,SAAAR,EAAYS,GAAoC,IAAAC,SACxCD,EAAUE,MACjBD,EAAAF,EAAAI,KAAAC,KAAMJ,IAAUI,KAACC,EAAAJ,EAAA,WAAAK,EAAAL,GACjBA,EAAKM,UAAYN,EAAKO,SACtBP,EAAKQ,iBAAgBR,EAAQ,OAAAA,CAC9B,CAACS,EAAAnB,EAAAoB,EAAApB,EAAAQ,GAAA,IAAAa,EAAArB,EAAAsB,UAAAD,EAEKE,eAANC,eAAMD,EAAeE,GACpB,OAAO,IAAIC,QAASC,IACnBC,IAAIC,GAAGC,QAAQ,CAACL,GAAQM,IACvBJ,EAAQI,MAGX,EAACV,EAEKW,iBAANR,eAAMQ,EAAiBvB,GACtB,MAAMwB,EAAapB,KAAKqB,cACxB,MAAMC,EAAcF,EAAWE,mBAAuBtB,KAAKU,eAAeU,EAAWG,qBAC9E3B,EAAUE,MACjB,GAAKwB,GAAyBE,gBAAgBC,IAAI,8BAA+B,CAChF7B,EAAU8B,WAAa,IAAKJ,EAA0CF,EACvE,KAAO,CACNpB,KAAK2B,cAAgBL,CACtB,CACD,EAACd,EAEDoB,kBAAA,SAAAA,IACC,MAAMC,EAAW7B,KAAKqB,cACtB,OAAOQ,EAASC,cACjB,EAACtB,EAEDuB,gBAAA,SAAAA,IACC,OAAO,IACR,EAGAvB,EACAwB,cAAA,SAAAA,EAAcC,GACb9C,EAAW+C,iBAAoBlC,MAAgEmC,gBAAgBC,IAC/GjD,EAAWuC,WAAaO,EAIxBjC,KAAKqC,wBAA0B,WAC9BrC,KAAK0B,WAAaO,CACnB,EAEA,MAAMK,EAAQC,EAAUC,qBAAqBxC,OAAU,CAAEyC,WAAaC,GAAiBA,KACvF,OAAOJ,EAAMG,WAAW,KACvB,GAAIR,GAAeA,EAAYU,OAAQ,CACtC,OAAOV,EAAYU,QACpB,CACA,OAAO3C,KAAK2B,mBAEd,EAAC,OAAAxC,CAAA,CAjE4B,CALUyD,GAAI1C,EAAA2C,EAAAnD,EAAAe,UAAA,YAAAnB,GAAA,CAAAwD,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAvD,KAAAD,GAAAa,EAAAnB,EAAA,OAAAmB,CAAA","ignoreList":[]}