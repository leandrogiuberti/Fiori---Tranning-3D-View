{"version":3,"names":["ViewLoader","_dec","defineUI5Class","_dec2","property","type","_class","_class2","_View","mSettings","_this","cache","call","_initializerDefineProperty","_descriptor","sViewName","viewName","_oContainingView","_exports","_inheritsLoose","_proto","prototype","loadDependency","name","Promise","resolve","sap","ui","require","MDXContent","initViewSettings","viewConfig","getViewData","viewContent","_jsxViewName","getMetadata","isA","controller","viewContentFn","getControllerName","viewData","controllerName","getAutoPrefixId","createContent","oController","preprocessorData","mPreprocessors","xml","_fnSettingsPreprocessor","owner","Component","getOwnerComponentFor","runAsOwner","fn","render","View","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sourceRoot":".","sources":["ViewLoader.tsx"],"sourcesContent":["import type { NonAbstractClass } from \"sap/fe/base/ClassSupport\";\nimport { defineUI5Class, property } from \"sap/fe/base/ClassSupport\";\nimport type { XMLPreprocessorContext } from \"sap/fe/core/TemplateComponent\";\nimport Component from \"sap/ui/core/Component\";\nimport type Control from \"sap/ui/core/Control\";\nimport type { $ControlSettings } from \"sap/ui/core/Control\";\nimport type Controller from \"sap/ui/core/mvc/Controller\";\nimport View from \"sap/ui/core/mvc/View\";\n\ntype JSXViewController = Controller & { render?: () => Control };\n@defineUI5Class(\"sap.fe.base.jsx-runtime.MDXViewLoader\")\nexport default class ViewLoader extends View {\n\tstatic preprocessorData?: XMLPreprocessorContext;\n\n\tstatic controller: Controller;\n\n\t@property({ type: \"string\" })\n\tviewName!: string;\n\n\tprivate viewContent?: Control;\n\n\tprivate viewContentFn?: Function;\n\n\tpublic sViewName: string;\n\n\tpublic _oContainingView: this;\n\n\tconstructor(mSettings: Record<string, unknown>) {\n\t\tdelete mSettings.cache;\n\t\tsuper(mSettings);\n\t\tthis.sViewName = this.viewName;\n\t\tthis._oContainingView = this;\n\t}\n\n\tasync loadDependency(name: string): Promise<unknown> {\n\t\treturn new Promise((resolve) => {\n\t\t\tsap.ui.require([name], (MDXContent: Function): void => {\n\t\t\t\tresolve(MDXContent);\n\t\t\t});\n\t\t});\n\t}\n\n\tasync initViewSettings(mSettings: Record<string, unknown>): Promise<void> {\n\t\tconst viewConfig = this.getViewData() as { viewContent?: Control; _jsxViewName: string } & Record<string, unknown>;\n\t\tconst viewContent = viewConfig.viewContent || ((await this.loadDependency(viewConfig._jsxViewName)) as Control | Function);\n\t\tdelete mSettings.cache;\n\t\tif ((viewContent as Control)?.getMetadata?.().isA(\"sap.ui.core.mvc.Controller\")) {\n\t\t\tmSettings.controller = new (viewContent as NonAbstractClass<Control>)(viewConfig as $ControlSettings);\n\t\t} else {\n\t\t\tthis.viewContentFn = viewContent as Function;\n\t\t}\n\t}\n\n\tgetControllerName(): string {\n\t\tconst viewData = this.getViewData() as { controllerName: string };\n\t\treturn viewData.controllerName;\n\t}\n\n\tgetAutoPrefixId(): boolean {\n\t\treturn true;\n\t}\n\n\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t// @ts-ignore\n\tcreateContent(oController: JSXViewController): Control {\n\t\tViewLoader.preprocessorData = (this as { mPreprocessors?: { xml?: XMLPreprocessorContext } })?.mPreprocessors?.xml;\n\t\tViewLoader.controller = oController;\n\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t// @ts-ignore\n\t\tthis._fnSettingsPreprocessor = function (this: { controller?: Controller }): void {\n\t\t\tthis.controller = oController;\n\t\t};\n\n\t\tconst owner = Component.getOwnerComponentFor(this)! ?? { runAsOwner: (fn: Function) => fn() };\n\t\treturn owner.runAsOwner(() => {\n\t\t\tif (oController && oController.render) {\n\t\t\t\treturn oController.render();\n\t\t\t}\n\t\t\treturn this.viewContentFn?.();\n\t\t});\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"ViewLoader-dbg.js"}