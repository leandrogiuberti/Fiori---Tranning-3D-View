{"version":3,"names":["ensureMetadata","target","metadata","merge","controllerExtensions","properties","aggregations","references","associations","methods","events","interfaces","prepareGetAPIFunction","oEvent","apiFQN","arguments","length","undefined","getMetadata","getName","oSource","getSource","_getAPIExtension","isA","getParent","isDependentBound","oDependents","getDependents","hasCorrectDependent","find","oDependent","oSourceMap","instanceMap","get","targetControl","ensureGetAPI","__apiRegistered","WeakMap","registerInstance","_instance","constructor","set","push","getAPI","defineState","propertyKey","propertyDescriptor","stateProperty","Error","writable","statePropertyDefaultValue","initializer","_exports","methodOverride","extensionName","override","overrides","currentTarget","extension","toString","extensible","overrideExecution","descriptor","hookable","publicExtension","enumerable","public","privateExtension","finalExtension","final","usingExtension","extensionClass","event","eventKey","property","attributeDefinition","bindable","isBindingInfo","group","hasOwnProperty","defaultValue","aggregation","aggregationDefinition","multiple","isDefault","defaultAggregation","association","ui5AssociationMetadata","implementInterface","interfaceName","xmlEventHandler","propertykey","currentConstructor","_len","args","Array","_key","defineUI5Class","sTarget","metadataDefinition","prototype","key","isArray","concat","registerUI5Metadata","mixin","interfaceClass","baseCtor","extend","interfaceProtoTypeToMix","_addInterfaceProtoTypesToBaseClass","Object","getPrototypeOf","propagateHookFromMixin","setupMixin","createReference","current","setCurrent","oControlInstance","defineReference","BaseObject","isObjectA","baseClassMetadata","interfaceClassPrototype","getInterfaceName","getOwnPropertyNames","forEach","name","defineProperty","getOwnPropertyDescriptor","create","_getHandlerForStateProperty","jsonModel","prop","pathInModel","oObj","deepClone","getObject","oTarget","model","Proxy","p","receiver","ref","Reflect","bind","isNaN","Number","__bindingInfo","path","boundProperties","Symbol","createStateProxy","statePropertyName","boundToStateProps","initialData","setModel","JSONModel","stateModel","getModel","attachPropertyChange","evt","getParameter","substring","includes","setProperty","__stateCreated","proxy","setStateModel","value","knownBoundProperties","_ignoreStatePropertyUpdate","setResult","_updateStateDebounced","configurable","_createStateProperty","obj","updatingState","propertyName","propertyDef","bindToState","_updateState","_updateStateTimer","onStateChange","_changedProps","changedProp","setTimeout","__stateName","fnApplySettings","applySettings","mSettings","scope","models","$componentState","call","fnSetProperty","sPropertyName","oValue","bSuppressInvalidate","clazz","inObj","objName","baseType","getStereotype","rendererDefinition","renderer","render","apiVersion","keys","e","cExtName","output","fnInit","init","fnAfterInit","afterInit","_this","_len2","_key2","apply","aPropertyKeys","propertyDefault","_bindingProperties","v","mProperties","propertyValue","getProperty","bindingPropertyValue","propValue","_applyingSettings","aAggregationKeys","aggregationKey","aggregationDef","setAggregation","aggregationContent","getAggregation","aAssociationKeys","associationKey","setAssociation","getAssociation","referenceProperties","methodName","methodDefinition","methodHolder","methodArrays","reverse","result","_len3","methodArgs","_key3","arg","oExtension","pol","_len4","_key4","oClass","Metadata","createClass","uid","ControllerMetadata","_staticOverride","_override","ObjectPath"],"sourceRoot":".","sources":["ClassSupport.ts"],"sourcesContent":["import ObjectPath from \"sap/base/util/ObjectPath\";\nimport deepClone from \"sap/base/util/deepClone\";\nimport merge from \"sap/base/util/merge\";\nimport uid from \"sap/base/util/uid\";\nimport { hookable, propagateHookFromMixin } from \"sap/fe/base/HookSupport\";\nimport type { Ref } from \"sap/fe/base/jsx-runtime/jsx\";\nimport type UI5Event from \"sap/ui/base/Event\";\nimport type ManagedObject from \"sap/ui/base/ManagedObject\";\nimport Metadata from \"sap/ui/base/Metadata\";\nimport BaseObject from \"sap/ui/base/Object\";\nimport type Control from \"sap/ui/core/Control\";\nimport type { $ControlSettings } from \"sap/ui/core/Control\";\nimport type UI5Element from \"sap/ui/core/Element\";\nimport type ControllerExtension from \"sap/ui/core/mvc/ControllerExtension\";\nimport ControllerMetadata from \"sap/ui/core/mvc/ControllerMetadata\";\nimport type OverrideExecution from \"sap/ui/core/mvc/OverrideExecution\";\nimport type Context from \"sap/ui/model/Context\";\nimport type { Model$PropertyChangeEvent } from \"sap/ui/model/Model\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\n\ntype OverrideDefinition = Record<string, Function>;\ntype UI5ControllerMethodDefinition = {\n\toverrideExecution?: OverrideExecution;\n\tpublic?: boolean;\n\tfinal?: boolean;\n};\nexport type NonAbstractClass<T> = Pick<T, keyof T> & (new (...args: unknown[]) => T);\n\ntype UI5PropertyMetadata = {\n\ttype: string;\n\tbindable?: boolean;\n\trequired?: boolean;\n\tgroup?: string;\n\tdefaultValue?: unknown;\n\tbyValue?: boolean;\n\tisBindingInfo?: boolean;\n\tbindToState?: boolean;\n\texpectedAnnotations?: string[];\n\texpectedTypes?: string[];\n\tallowedValues?: string[];\n\tvisibility?: string;\n};\nexport type UI5AggregationMetadata = {\n\ttype: string;\n\taltTypes?: string[];\n\tmultiple?: boolean;\n\tisDefault?: boolean;\n\tdefaultValue?: unknown;\n\tdefaultClass?: unknown;\n\tsingularName?: string;\n\tvisibility?: string;\n\tforwarding?: object;\n};\nexport type UI5AssociationMetadata = {\n\ttype: string;\n\tmultiple?: boolean;\n\tsingularName?: string;\n};\nexport type UI5ControlMetadataDefinition = {\n\tdefaultAggregation?: string;\n\tcontrollerExtensions: Record<string, typeof ControllerExtension | Function>;\n\tproperties: Record<string, UI5PropertyMetadata>;\n\taggregations: Record<string, UI5AggregationMetadata>;\n\treferences: Record<string, boolean>;\n\tassociations: Record<string, UI5AssociationMetadata>;\n\tmethods: Record<string, UI5ControllerMethodDefinition>;\n\tevents: Record<string, {}>;\n\tinterfaces: string[];\n\tlibrary?: string;\n\tdesigntime?: string;\n\tconfig?: {\n\t\tfullWidth?: boolean;\n\t};\n\tstateProperty?: string;\n\tstatePropertyDefaultValue?: unknown;\n\tmanifest?: string | unknown;\n\treturnTypes?: string[];\n\tbuildingBlockMetadata?: unknown;\n};\nexport type AccessorDescriptor<T> = TypedPropertyDescriptor<T> & { initializer?: () => T };\ntype UI5ControllerDefinition = {\n\toverride?: { extension?: Record<string, OverrideDefinition> } & {\n\t\t[k: string]: Function;\n\t};\n\toverrides?: { extension?: Record<string, OverrideDefinition> } & {\n\t\t[k: string]: Function;\n\t};\n\tmetadata?: UI5ControlMetadataDefinition;\n\trenderer?: Function;\n};\n\ntype UI5ControlDefinition = {\n\tmetadata?: UI5ControlMetadataDefinition;\n\toverride?: unknown;\n\trenderer?: Function;\n};\n\ntype UI5APIControl = Control & {\n\tgetAPI(event: UI5Event, fqdn?: string): UI5APIControl | undefined;\n\tinstanceMap: WeakMap<object, object[]>;\n\t__apiRegistered: boolean;\n} & {\n\t[k: string]: Function;\n};\n\nexport type XMLEventHolder = {\n\tgetAPI(event: UI5Event, fqdn?: string): UI5APIControl | undefined;\n\tinstanceMap: WeakMap<object, object[]>;\n};\n\ntype ControlPropertyNames<T> = {\n\t// needed because of the TS compiler\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t[K in keyof T]: T[K] extends Function ? never : K;\n}[keyof T];\nexport type PropertiesOf<T, K extends keyof T | undefined = undefined> = Partial<Pick<T, ControlPropertyNames<T>>> &\n\t(K extends keyof T ? Partial<Pick<T, K>> : {}) &\n\t$ControlSettings;\nexport type ConvertContextToString<T> = {\n\t[K in keyof T]: K extends \"metaPath\" | \"contextPath\" ? string : T[K];\n};\ntype ContextToString<T> = {\n\t[K in keyof T]: T[K] extends Context | undefined ? string | undefined : T[K];\n};\n\nexport type PropertiesOfBuildingBlock<T> = ContextToString<PropertiesOf<T>>;\nexport type StrictPropertiesOf<T> = Pick<T, ControlPropertyNames<T>>;\nexport type UI5Accessors<T> = {\n\t// Add all the getXXX method, might add too much as I'm not filtering on actual properties...\n\t[P in keyof Required<T> as `get${Capitalize<string & P>}`]: () => T[P];\n};\nexport type UI5Setters<T> = {\n\t// Add all the setXXX method, might add too much as I'm not filtering on actual properties...\n\t[P in keyof Required<T> as `set${Capitalize<string & P>}`]: (value: T[P]) => T;\n};\nexport type EnhanceWithUI5<T> = {\n\tnew (props: PropertiesOf<T>): EnhanceWithUI5<T>;\n\tnew (sId: string, props: PropertiesOf<T>): EnhanceWithUI5<T>;\n} & T &\n\tUI5Accessors<T> &\n\tUI5Setters<T>;\n\nexport type ExtensionOverrideExecution = \"Instead\" | \"Before\" | \"After\" | \"AfterAsync\" | \"BeforeAsync\";\n\nconst ensureMetadata = function (target: UI5ControllerDefinition | UI5ControlDefinition): UI5ControlMetadataDefinition {\n\ttarget.metadata = merge(\n\t\t{\n\t\t\tcontrollerExtensions: {},\n\t\t\tproperties: {},\n\t\t\taggregations: {},\n\t\t\treferences: {},\n\t\t\tassociations: {},\n\t\t\tmethods: {},\n\t\t\tevents: {},\n\t\t\tinterfaces: []\n\t\t},\n\t\ttarget.metadata ?? {}\n\t) as UI5ControlMetadataDefinition;\n\treturn target.metadata;\n};\n\n/**\n * Method that will find the correct API object based on the current control hierarchy.\n * @param target\n * @returns The proper getAPI function for this constructor\n */\nfunction prepareGetAPIFunction(target: UI5APIControl) {\n\treturn function <T extends UI5APIControl>(\n\t\tthis: UI5APIControl,\n\t\toEvent: UI5Event,\n\t\tapiFQN: string = target.getMetadata().getName()\n\t): T | undefined {\n\t\tlet oSource = oEvent.getSource() as ManagedObject | null;\n\t\tif (target._getAPIExtension) {\n\t\t\toSource = target._getAPIExtension(oSource) ?? oSource;\n\t\t}\n\t\twhile (oSource && !oSource.isA<T>(apiFQN) && oSource.getParent) {\n\t\t\tif (this.isDependentBound) {\n\t\t\t\tconst oDependents = (oSource as Control).getDependents();\n\t\t\t\tconst hasCorrectDependent = oDependents.find((oDependent: UI5Element) => oDependent.isA(apiFQN));\n\t\t\t\tif (hasCorrectDependent) {\n\t\t\t\t\toSource = hasCorrectDependent as unknown as T;\n\t\t\t\t} else {\n\t\t\t\t\toSource = oSource.getParent() as unknown as T;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toSource = oSource.getParent();\n\t\t\t}\n\t\t}\n\n\t\tif (!oSource || !oSource.isA<T>(apiFQN)) {\n\t\t\tconst oSourceMap = this.instanceMap.get(this) as T[];\n\t\t\toSource = oSourceMap?.[oSourceMap.length - 1];\n\t\t}\n\t\tlet targetControl;\n\t\tif (oSource && oSource.isA<T>(apiFQN)) {\n\t\t\ttargetControl = oSource;\n\t\t}\n\t\treturn targetControl;\n\t};\n}\n\n/**\n * Ensures that when an xmlEventHandler is defined, the `getAPI` function is properly assigned.\n * @param target The class constructor that should hold the static functions\n */\nconst ensureGetAPI = function (target: UI5APIControl): void {\n\tif (!target.__apiRegistered) {\n\t\ttarget.__apiRegistered = true;\n\t\ttarget.instanceMap = new WeakMap<object, object[]>();\n\t\ttarget.registerInstance = function (_instance: Function): void {\n\t\t\tif (!this.instanceMap.get(_instance.constructor)) {\n\t\t\t\tthis.instanceMap.set(_instance.constructor, []);\n\t\t\t}\n\t\t\t(this.instanceMap.get(_instance.constructor) as object[]).push(_instance);\n\t\t};\n\t\ttarget.getAPI = prepareGetAPIFunction(target);\n\t}\n};\n\ntype ExtendWithObject<T, K> = T extends object ? K & { [TKey in keyof T]?: BindingInfoHolder<T[TKey]> } : K;\n\nexport type StateOf<T> = {\n\t[K in keyof T]: T[K] extends Array<infer U> | ReadonlyArray<infer U> ? ExtendWithObject<U, ReadonlyArray<U>> : T[K];\n};\nexport type BindingInfoHolder<T> = T & {\n\t__bindingInfo: {\n\t\tpath: string;\n\t\tmodel: string;\n\t\ttype: T;\n\t};\n};\n\n/**\n * Allows to define a property that will hold the control state.\n *\n * Properties defined with this decorator will be automatically bound to the control state when used in JSX.\n * Arrays need to be bound using the `bindState` function.\n * @returns A property decorator\n */\nexport function defineState(): PropertyDecorator {\n\treturn function (target: UI5ControlDefinition, propertyKey: string, propertyDescriptor: TypedPropertyDescriptor<unknown>) {\n\t\tconst metadata = ensureMetadata(target);\n\t\tif (metadata.stateProperty !== undefined) {\n\t\t\tthrow new Error(\"Only one state property per control is allowed\");\n\t\t}\n\t\tmetadata.stateProperty = propertyKey;\n\t\tdelete propertyDescriptor.writable;\n\t\tmetadata.statePropertyDefaultValue ??= (propertyDescriptor as { initializer?: Function }).initializer?.();\n\t\tdelete (propertyDescriptor as { initializer?: Function }).initializer;\n\n\t\treturn propertyDescriptor;\n\t} as unknown as PropertyDecorator; // This is technically an accessor decorator, but somehow the compiler doesn't like it if i declare it as such.;\n}\n\n/* #region CONTROLLER EXTENSIONS */\n\n/**\n * Defines that the following method is an override for the method name with the same name in the specific controller extension or base implementation.\n * @param extensionName The name of the extension that will be overridden\n * @returns The decorated method\n */\nexport function methodOverride(extensionName?: string): MethodDecorator {\n\treturn function (target: UI5ControllerDefinition, propertyKey) {\n\t\tif (!target.override) {\n\t\t\ttarget.override = {};\n\t\t}\n\t\tif (!target.overrides) {\n\t\t\ttarget.overrides = {};\n\t\t}\n\t\tlet currentTarget = target.overrides;\n\t\tif (extensionName) {\n\t\t\tif (!currentTarget.extension) {\n\t\t\t\tcurrentTarget.extension = {};\n\t\t\t}\n\t\t\tif (!currentTarget.extension[extensionName]) {\n\t\t\t\tcurrentTarget.extension[extensionName] = {};\n\t\t\t}\n\t\t\tcurrentTarget = currentTarget.extension[extensionName];\n\t\t}\n\t\tcurrentTarget[propertyKey.toString()] = (target as Record<string, Function>)[propertyKey.toString()];\n\t};\n}\n\n/**\n * Defines that the method can be extended by other controller extension based on the defined overrideExecutionType.\n * @param overrideExecution The OverrideExecution defining when the override should run (Before / After / Instead)\n * @returns The decorated method\n */\nexport function extensible(overrideExecution: ExtensionOverrideExecution): MethodDecorator {\n\treturn function (target: UI5ControllerDefinition, propertyKey, descriptor: PropertyDescriptor) {\n\t\tconst metadata = ensureMetadata(target);\n\t\tif (!metadata.methods[propertyKey.toString()]) {\n\t\t\tmetadata.methods[propertyKey.toString()] = {};\n\t\t}\n\t\tmetadata.methods[propertyKey.toString()].overrideExecution = overrideExecution as unknown as OverrideExecution;\n\n\t\t// by default, every extensible method is also hookable (except those defined as Instead)\n\t\tif (overrideExecution !== \"Instead\") {\n\t\t\thookable(overrideExecution)(target, propertyKey, descriptor);\n\t\t}\n\t};\n}\n\n/**\n * Defines that the method will be publicly available for controller extension usage.\n * @returns The decorated method\n */\nexport function publicExtension(): MethodDecorator {\n\treturn function (target: UI5ControllerDefinition, propertyKey, descriptor): void {\n\t\tconst metadata = ensureMetadata(target);\n\t\tdescriptor.enumerable = true;\n\t\tif (!metadata.methods[propertyKey.toString()]) {\n\t\t\tmetadata.methods[propertyKey.toString()] = {};\n\t\t}\n\t\tmetadata.methods[propertyKey.toString()].public = true;\n\t};\n}\n/**\n * Defines that the method will be only available for internal usage of the controller extension.\n * @returns The decorated method\n */\nexport function privateExtension(): MethodDecorator {\n\treturn function (target: UI5ControllerDefinition, propertyKey, descriptor) {\n\t\tconst metadata = ensureMetadata(target);\n\t\tdescriptor.enumerable = true;\n\t\tif (!metadata.methods[propertyKey.toString()]) {\n\t\t\tmetadata.methods[propertyKey.toString()] = {};\n\t\t}\n\t\tmetadata.methods[propertyKey.toString()].public = false;\n\t};\n}\n/**\n * Defines that the method cannot be further extended by other controller extension.\n * @returns The decorated method\n */\nexport function finalExtension(): MethodDecorator {\n\treturn function (target: UI5ControllerDefinition, propertyKey, descriptor) {\n\t\tconst metadata = ensureMetadata(target);\n\t\tdescriptor.enumerable = true;\n\t\tif (!metadata.methods[propertyKey.toString()]) {\n\t\t\tmetadata.methods[propertyKey.toString()] = {};\n\t\t}\n\t\tmetadata.methods[propertyKey.toString()].final = true;\n\t};\n}\n\n/**\n * Defines that we are going to use instantiate a controller extension under the following variable name.\n * @param extensionClass The controller extension that will be instantiated\n * @returns The decorated property\n */\nexport function usingExtension(extensionClass: typeof ControllerExtension | Function): PropertyDecorator {\n\treturn function (target: UI5ControllerDefinition, propertyKey: string, propertyDescriptor: TypedPropertyDescriptor<unknown>) {\n\t\tconst metadata = ensureMetadata(target);\n\t\tdelete (propertyDescriptor as { initializer?: unknown }).initializer;\n\t\tmetadata.controllerExtensions[propertyKey.toString()] = extensionClass;\n\t\treturn propertyDescriptor;\n\t} as unknown as PropertyDecorator; // This is technically an accessor decorator, but somehow the compiler doesn't like it if I declare it as such.\n}\n\n/* #endregion */\n\n/* #region CONTROL */\n/**\n * Indicates that the property shall be declared as an event on the control metadata.\n * @returns The decorated property\n */\nexport function event(): PropertyDecorator {\n\treturn function (target: UI5ControlDefinition, eventKey: string | Symbol) {\n\t\tconst metadata = ensureMetadata(target);\n\t\tif (!metadata.events[eventKey.toString()]) {\n\t\t\tmetadata.events[eventKey.toString()] = {};\n\t\t}\n\t};\n}\n\n/**\n * Defines the following property in the control metadata.\n * @param attributeDefinition The property definition\n * @returns The decorated property.\n */\nexport function property(attributeDefinition: UI5PropertyMetadata): PropertyDecorator {\n\treturn function (target: UI5ControlDefinition, propertyKey: string, propertyDescriptor: TypedPropertyDescriptor<unknown>) {\n\t\tconst metadata = ensureMetadata(target);\n\t\tif (attributeDefinition.bindable === undefined) {\n\t\t\tattributeDefinition.bindable = true;\n\t\t}\n\t\tif (attributeDefinition.isBindingInfo === true) {\n\t\t\tattributeDefinition.bindable = false;\n\t\t\tattributeDefinition.group = \"Data\";\n\t\t}\n\t\tif (!metadata.properties[propertyKey]) {\n\t\t\tmetadata.properties[propertyKey] = attributeDefinition;\n\t\t}\n\t\tdelete propertyDescriptor.writable;\n\t\tif (!attributeDefinition.hasOwnProperty(\"defaultValue\")) {\n\t\t\t// Not explicitely defined\n\t\t\tattributeDefinition.defaultValue ??= (propertyDescriptor as { initializer?: Function }).initializer?.();\n\t\t}\n\n\t\tdelete (propertyDescriptor as { initializer?: unknown }).initializer;\n\n\t\treturn propertyDescriptor;\n\t} as unknown as PropertyDecorator; // This is technically an accessor decorator, but somehow the compiler doesn't like it if i declare it as such.\n}\n\n/**\n * Defines and configures the following aggregation in the control metadata.\n * @param aggregationDefinition The aggregation definition\n * @returns The decorated property.\n */\nexport function aggregation(aggregationDefinition: UI5AggregationMetadata): PropertyDecorator {\n\treturn function (target: UI5ControlDefinition, propertyKey: string, propertyDescriptor: TypedPropertyDescriptor<unknown>) {\n\t\tconst metadata = ensureMetadata(target);\n\t\tif (aggregationDefinition.multiple === undefined) {\n\t\t\t// UI5 defaults this to true but this is just weird...\n\t\t\taggregationDefinition.multiple = false;\n\t\t}\n\t\tif (!metadata.aggregations[propertyKey]) {\n\t\t\tmetadata.aggregations[propertyKey] = aggregationDefinition;\n\t\t}\n\t\tif (aggregationDefinition.isDefault) {\n\t\t\tmetadata.defaultAggregation = propertyKey;\n\t\t}\n\t\tdelete propertyDescriptor.writable;\n\t\taggregationDefinition.defaultValue ??= (propertyDescriptor as { initializer?: Function }).initializer?.();\n\t\tdelete (propertyDescriptor as { initializer?: unknown }).initializer;\n\n\t\treturn propertyDescriptor;\n\t} as unknown as PropertyDecorator; // This is technically an accessor decorator, but somehow the compiler doesn't like it if I declare it as such.\n}\n\n/**\n * Defines and configures the following association in the control metadata.\n * @param ui5AssociationMetadata The definition of the association.\n * @returns The decorated property\n */\nexport function association(ui5AssociationMetadata: UI5AssociationMetadata): PropertyDecorator {\n\treturn function (target: UI5ControlDefinition, propertyKey: string, propertyDescriptor: TypedPropertyDescriptor<unknown>) {\n\t\tconst metadata = ensureMetadata(target);\n\t\tif (!metadata.associations[propertyKey]) {\n\t\t\tmetadata.associations[propertyKey] = ui5AssociationMetadata;\n\t\t}\n\t\tdelete propertyDescriptor.writable;\n\t\tdelete (propertyDescriptor as { initializer?: unknown }).initializer;\n\n\t\treturn propertyDescriptor;\n\t} as unknown as PropertyDecorator; // This is technically an accessor decorator, but somehow the compiler doesn't like it if i declare it as such.\n}\n\n/**\n * Defines in the metadata that this control implements a specific interface.\n * @param interfaceName The name of the implemented interface\n * @returns The decorated method\n */\nexport function implementInterface(interfaceName: string): PropertyDecorator {\n\treturn function (target: UI5ControlDefinition) {\n\t\tconst metadata = ensureMetadata(target);\n\n\t\tmetadata.interfaces.push(interfaceName);\n\t};\n}\n\n/**\n * Indicates that the following method should also be exposed statically so we can call it from XML.\n * @returns The decorated method\n */\nexport function xmlEventHandler(): MethodDecorator {\n\treturn function (target: UI5ControlDefinition, propertykey) {\n\t\tconst currentConstructor: UI5APIControl = target.constructor as unknown as UI5APIControl;\n\t\tensureGetAPI(currentConstructor);\n\t\tcurrentConstructor[propertykey.toString()] = function (...args: unknown[]): void {\n\t\t\tif (args?.length) {\n\t\t\t\tconst currentTarget = currentConstructor.getAPI(args[0] as UI5Event);\n\t\t\t\tcurrentTarget?.[propertykey.toString()](...args);\n\t\t\t}\n\t\t};\n\t};\n}\n\ntype UI5ControlAndMore = typeof Control &\n\tFunction & {\n\t\tregisterInstance?: Function;\n\t\toverride?: Function;\n\t\trenderer?: unknown;\n\t\trender: Function;\n\t\tmetadata?: UI5ControlMetadataDefinition;\n\t};\n\n/**\n * Indicates that the following class should define a UI5 control of the specified name.\n * @param sTarget The fully qualified name of the UI5 class\n * @param metadataDefinition Inline metadata definition\n * @returns A class decorator that will create a ui5 class\n */\nexport function defineUI5Class(sTarget: string, metadataDefinition?: Partial<UI5ControlMetadataDefinition>): ClassDecorator {\n\treturn function (constructor: UI5ControlAndMore) {\n\t\tif (!constructor.prototype.metadata) {\n\t\t\tconstructor.prototype.metadata = {};\n\t\t}\n\t\tif (metadataDefinition) {\n\t\t\tfor (const key in metadataDefinition) {\n\t\t\t\tif (constructor.prototype.metadata[key] !== undefined) {\n\t\t\t\t\tif (Array.isArray(constructor.prototype.metadata[key])) {\n\t\t\t\t\t\tconstructor.prototype.metadata[key] = constructor.prototype.metadata[key].concat(\n\t\t\t\t\t\t\tmetadataDefinition[key as keyof UI5ControlMetadataDefinition]\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconstructor.prototype.metadata[key] = {\n\t\t\t\t\t\t\t...constructor.prototype.metadata[key],\n\t\t\t\t\t\t\t...(metadataDefinition[key as keyof UI5ControlMetadataDefinition] as object)\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconstructor.prototype.metadata[key] = metadataDefinition[key as keyof UI5ControlMetadataDefinition];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn registerUI5Metadata(constructor, sTarget, constructor.prototype);\n\t} as ClassDecorator;\n}\ntype Constructor<T = {}> = new (...a: unknown[]) => T;\n/**\n * Mixin a specific interface including all its methods and properties into the control.\n * @param interfaceClass Implementation class of the control\n * @returns The decorated class\n */\nexport function mixin<T extends IInterfaceWithMixin>(interfaceClass: Constructor<T>): ClassDecorator {\n\treturn function (baseCtor: UI5ControlAndMore) {\n\t\tif (baseCtor.prototype.extend) {\n\t\t\tthrow new Error(\"The mixinInterface decorator must be placed after `defineUi5Class`\");\n\t\t}\n\t\tconst metadata = ensureMetadata(baseCtor.prototype);\n\n\t\tlet interfaceProtoTypeToMix = interfaceClass.prototype;\n\t\twhile (interfaceProtoTypeToMix) {\n\t\t\tbaseCtor = _addInterfaceProtoTypesToBaseClass(baseCtor, metadata, interfaceProtoTypeToMix);\n\t\t\tinterfaceProtoTypeToMix = Object.getPrototypeOf(interfaceProtoTypeToMix);\n\t\t}\n\t\tpropagateHookFromMixin(baseCtor, interfaceClass);\n\n\t\t// Hook to add potentially more logic to the mixin\n\t\tinterfaceClass.prototype.setupMixin?.(baseCtor);\n\t\treturn baseCtor;\n\t} as ClassDecorator;\n}\n\nexport interface IInterfaceWithMixin {\n\t/**\n\t * Returns the name of the interface that should be added to the receiving control.\n\t * If not defined, the interface will not be added.\n\t * @returns The name of the interface\n\t */\n\tgetInterfaceName?(): string;\n\n\t/**\n\t * Hook to add more logic to the mixin.\n\t * This is called before the controls are created and can be used to add some additional logic to the base class.\n\t * @param baseClass The base class that will be extended\n\t */\n\tsetupMixin?(baseClass: Function): void;\n}\n\nexport function createReference<T extends UI5Element>(): Ref<T> {\n\treturn {\n\t\tcurrent: undefined as unknown as T,\n\t\tsetCurrent: function (oControlInstance: T): void {\n\t\t\tthis.current = oControlInstance;\n\t\t}\n\t};\n}\n/**\n * Defines that the following object will hold a reference to a control through jsx templating.\n * @returns The decorated property.\n */\nexport function defineReference(): PropertyDecorator {\n\treturn function (target: UI5ControlDefinition, propertyKey: string, propertyDescriptor: TypedPropertyDescriptor<unknown>) {\n\t\tconst metadata = ensureMetadata(target);\n\t\tdelete propertyDescriptor.writable;\n\t\tdelete (propertyDescriptor as { initializer?: unknown }).initializer;\n\t\tif (BaseObject.isObjectA(target, \"sap.ui.core.Control\")) {\n\t\t\tif (!metadata.references[propertyKey]) {\n\t\t\t\tmetadata.references[propertyKey] = true;\n\t\t\t}\n\t\t} else {\n\t\t\t(propertyDescriptor as { initializer?: unknown }).initializer = createReference;\n\t\t}\n\n\t\treturn propertyDescriptor;\n\t} as unknown as PropertyDecorator; // This is technically an accessor decorator, but somehow the compiler doesn't like it if i declare it as such.;\n}\n\nfunction _addInterfaceProtoTypesToBaseClass(\n\tbaseCtor: UI5ControlAndMore,\n\tbaseClassMetadata: UI5ControlMetadataDefinition,\n\tinterfaceClassPrototype: Function[\"prototype\"]\n): UI5ControlAndMore {\n\tconst interfaceName = interfaceClassPrototype?.getInterfaceName?.();\n\tif (interfaceName) {\n\t\tbaseClassMetadata.interfaces.push(interfaceName);\n\t}\n\n\tObject.getOwnPropertyNames(interfaceClassPrototype).forEach((name) => {\n\t\tif (name !== \"constructor\" && name !== \"setupMixin\" && name !== \"metadata\") {\n\t\t\tif (!baseCtor.prototype[name]) {\n\t\t\t\t// The base class \"wins\" over the mixin\n\t\t\t\tObject.defineProperty(\n\t\t\t\t\tbaseCtor.prototype,\n\t\t\t\t\tname,\n\t\t\t\t\tObject.getOwnPropertyDescriptor(interfaceClassPrototype, name) || Object.create(null)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tif (name === \"metadata\") {\n\t\t\tbaseCtor.prototype.metadata = merge(baseCtor.prototype.metadata, interfaceClassPrototype.metadata);\n\t\t}\n\t});\n\treturn baseCtor;\n}\n\nfunction _getHandlerForStateProperty(jsonModel: JSONModel, prop: string): unknown {\n\tconst pathInModel = `/${prop.toString()}`;\n\tconst oObj = deepClone(jsonModel.getObject(pathInModel));\n\tlet oTarget;\n\tif (prop === \"__bindingInfo\") {\n\t\treturn { model: \"$componentState\" };\n\t}\n\tif (typeof oObj === \"string\") {\n\t\toTarget = oObj;\n\t} else if (typeof oObj === \"number\") {\n\t\toTarget = oObj;\n\t} else if (typeof oObj === \"boolean\") {\n\t\toTarget = oObj;\n\t} else if (Array.isArray(oObj)) {\n\t\toTarget = new Proxy(oObj, {\n\t\t\tget(target: unknown[], p: string | symbol, receiver: unknown[]): unknown {\n\t\t\t\tconst ref = Reflect.get(target, p, receiver);\n\t\t\t\tif (typeof ref === \"function\") {\n\t\t\t\t\treturn ref.bind(target);\n\t\t\t\t} else if (ref === undefined && isNaN(Number(p.toString()))) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t__bindingInfo: {\n\t\t\t\t\t\t\tmodel: \"$componentState\",\n\t\t\t\t\t\t\tpath: p\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn ref;\n\t\t\t}\n\t\t});\n\t} else {\n\t\toTarget = { ...oObj };\n\t}\n\tif (typeof oTarget === \"object\") {\n\t\toTarget.__bindingInfo = {\n\t\t\tmodel: \"$componentState\",\n\t\t\tpath: pathInModel\n\t\t};\n\t}\n\treturn oTarget;\n}\nconst boundProperties = Symbol(\"boundProperties\");\n\nfunction createStateProxy(\n\ttargetControl: Control & {\n\t\t[boundProperties]: string[];\n\t\t__stateCreated: boolean;\n\t\t_updateState: Function;\n\t\t_updateStateDebounced: Function;\n\t\t_ignoreStatePropertyUpdate: boolean;\n\t\t_updateStateTimer: unknown;\n\t\t_changedProps?: string[];\n\t},\n\tstatePropertyName: string,\n\tboundToStateProps: string[],\n\tinitialData?: object\n): JSONModel {\n\t// Lazy initialization of the state property\n\ttargetControl.setModel(new JSONModel(initialData), \"$componentState\");\n\tconst stateModel = targetControl.getModel(\"$componentState\") as JSONModel;\n\tstateModel.attachPropertyChange((evt: Model$PropertyChangeEvent) => {\n\t\tconst path = evt.getParameter(\"path\")?.substring(1); // to remove the first /\n\t\tif (path && boundToStateProps.includes(path)) {\n\t\t\ttargetControl.setProperty(path, evt.getParameter(\"value\"));\n\t\t}\n\t});\n\ttargetControl.__stateCreated = true;\n\tconst proxy = new Proxy(stateModel, {\n\t\tget: (target: JSONModel, prop: string): unknown => {\n\t\t\treturn _getHandlerForStateProperty(target, prop);\n\t\t},\n\t\tset: (setStateModel: JSONModel, prop, value): boolean => {\n\t\t\t// we need to check whether the property is a known bound property in any of the related classes\n\t\t\tconst knownBoundProperties = targetControl[boundProperties];\n\t\t\tif (knownBoundProperties.includes(prop.toString())) {\n\t\t\t\ttargetControl._ignoreStatePropertyUpdate = true;\n\t\t\t\ttargetControl.setProperty(prop.toString(), value);\n\t\t\t\ttargetControl._ignoreStatePropertyUpdate = false;\n\t\t\t}\n\t\t\tconst setResult = setStateModel.setProperty(`/${prop.toString()}`, value);\n\t\t\ttargetControl._updateStateDebounced(prop.toString());\n\t\t\treturn setResult;\n\t\t}\n\t});\n\tObject.defineProperty(targetControl, statePropertyName, {\n\t\tconfigurable: true,\n\t\tget: () => {\n\t\t\treturn proxy;\n\t\t},\n\t\tset(value) {\n\t\t\t// Replacing the complete state\n\t\t\tstateModel.setProperty(`/`, value);\n\t\t}\n\t});\n\treturn proxy;\n}\n\nfunction _createStateProperty(\n\tobj: UI5ControlDefinition,\n\ttargetControl: Control & {\n\t\t[boundProperties]: string[];\n\t\t__stateCreated: boolean;\n\t\t__stateName: string;\n\t\t_updateState: Function;\n\t\t_updateStateDebounced: Function;\n\t\t_ignoreStatePropertyUpdate: boolean;\n\t\t_updateStateTimer: unknown;\n\t\t_changedProps?: string[];\n\t}\n): void {\n\tif (obj.metadata?.stateProperty || targetControl[boundProperties]) {\n\t\tlet updatingState = false;\n\t\tconst boundToStateProps: string[] = [];\n\t\tfor (const propertyName in obj.metadata?.properties) {\n\t\t\tconst propertyDef = obj.metadata.properties[propertyName];\n\t\t\tif (propertyDef.bindToState) {\n\t\t\t\tboundToStateProps.push(propertyName);\n\t\t\t}\n\t\t}\n\t\t// as we may have bound properties in parent classes and subclasses, we keep track of those in the model itself\n\t\ttargetControl[boundProperties] ??= [];\n\t\ttargetControl[boundProperties] = [...targetControl[boundProperties], ...boundToStateProps];\n\n\t\tif (obj.metadata?.stateProperty) {\n\t\t\t// This method can be used to force the state to be applied and wait for it to be applied in tests\n\t\t\ttargetControl._updateState = async function (): Promise<void> {\n\t\t\t\tdelete this._updateStateTimer;\n\t\t\t\tif (!updatingState) {\n\t\t\t\t\tupdatingState = true;\n\t\t\t\t\tawait (this as { onStateChange?: Function }).onStateChange?.(this._changedProps);\n\t\t\t\t\tthis._changedProps = [];\n\t\t\t\t\tupdatingState = false;\n\t\t\t\t}\n\t\t\t};\n\t\t\ttargetControl._updateStateDebounced = function (changedProp: string): void {\n\t\t\t\tthis._changedProps ??= [];\n\t\t\t\tif (!this._changedProps.includes(changedProp)) {\n\t\t\t\t\tthis._changedProps.push(changedProp);\n\t\t\t\t}\n\t\t\t\tif (!this._updateStateTimer && !updatingState) {\n\t\t\t\t\tthis._updateStateTimer = setTimeout(() => {\n\t\t\t\t\t\tthis._updateState();\n\t\t\t\t\t}, 200);\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst statePropertyName = obj.metadata.stateProperty;\n\t\t\ttargetControl.__stateCreated = false;\n\t\t\ttargetControl.__stateName = statePropertyName;\n\t\t\tObject.defineProperty(targetControl, statePropertyName, {\n\t\t\t\tconfigurable: true,\n\t\t\t\tget: () => {\n\t\t\t\t\treturn createStateProxy(targetControl, statePropertyName, targetControl[boundProperties]);\n\t\t\t\t},\n\t\t\t\tset: (value) => {\n\t\t\t\t\tcreateStateProxy(targetControl, statePropertyName, targetControl[boundProperties], value);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (obj.metadata.statePropertyDefaultValue) {\n\t\t\t\ttargetControl[obj.metadata.stateProperty as keyof Control] = { ...obj.metadata.statePropertyDefaultValue } as never;\n\t\t\t}\n\t\t\tconst fnApplySettings = targetControl.applySettings;\n\t\t\ttargetControl.applySettings = function (\n\t\t\t\tmSettings: { models?: Record<string, never> },\n\t\t\t\tscope?: object | undefined\n\t\t\t): typeof targetControl {\n\t\t\t\tdelete mSettings?.models?.$componentState;\n\t\t\t\treturn fnApplySettings.call(this, mSettings, scope);\n\t\t\t};\n\t\t}\n\t\tconst fnSetProperty = targetControl.setProperty;\n\t\tif (targetControl[boundProperties].length > 0) {\n\t\t\ttargetControl.setProperty = function (sPropertyName: string, oValue: unknown, bSuppressInvalidate): typeof targetControl {\n\t\t\t\tif (targetControl[boundProperties].includes(sPropertyName) && !this._ignoreStatePropertyUpdate) {\n\t\t\t\t\tif (!this.__stateCreated) {\n\t\t\t\t\t\tcreateStateProxy(targetControl, targetControl.__stateName, targetControl[boundProperties]);\n\t\t\t\t\t}\n\t\t\t\t\t(this.getModel(\"$componentState\") as JSONModel).setProperty(`/${sPropertyName}`, oValue);\n\t\t\t\t\ttargetControl._updateStateDebounced(sPropertyName);\n\t\t\t\t}\n\t\t\t\treturn fnSetProperty.call(this, sPropertyName, oValue, bSuppressInvalidate);\n\t\t\t};\n\t\t}\n\t}\n}\n\n/**\n * Internal heavy lifting that will take care of creating the class property for ui5 to use.\n * @param clazz The class prototype\n * @param name The name of the class to create\n * @param inObj The metadata object\n * @returns The metadata class\n */\nfunction registerUI5Metadata(clazz: UI5ControlAndMore, name: string, inObj: UI5ControllerDefinition | UI5ControlDefinition): Function {\n\tif (clazz.getMetadata?.().isA(\"sap.ui.core.mvc.ControllerExtension\")) {\n\t\tObject.getOwnPropertyNames(inObj).forEach((objName) => {\n\t\t\tconst descriptor = Object.getOwnPropertyDescriptor(inObj, objName);\n\t\t\tif (descriptor && !descriptor.enumerable) {\n\t\t\t\tdescriptor.enumerable = true;\n\t\t\t}\n\t\t});\n\t}\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\tconst obj: any = {};\n\tobj.metadata = inObj.metadata || {};\n\tobj.override = inObj.override;\n\tobj.constructor = clazz;\n\tobj.metadata.baseType = Object.getPrototypeOf(clazz.prototype).getMetadata().getName();\n\n\tif ((clazz?.getMetadata() as unknown as { getStereotype: Function })?.getStereotype() === \"control\") {\n\t\tconst rendererDefinition = inObj.renderer || clazz.renderer || clazz.render;\n\t\tobj.renderer = { apiVersion: 2 };\n\t\tif (typeof rendererDefinition === \"function\") {\n\t\t\tobj.renderer.render = rendererDefinition;\n\t\t} else if (rendererDefinition != undefined) {\n\t\t\tobj.renderer = rendererDefinition;\n\t\t}\n\t}\n\tobj.metadata.interfaces = inObj.metadata?.interfaces || clazz.metadata?.interfaces;\n\tObject.keys(clazz.prototype).forEach((key) => {\n\t\tif (key !== \"metadata\") {\n\t\t\ttry {\n\t\t\t\tobj[key] = clazz.prototype[key];\n\t\t\t} catch (e) {\n\t\t\t\t// Do nothing\n\t\t\t}\n\t\t}\n\t});\n\n\tif (obj.metadata?.controllerExtensions && Object.keys(obj.metadata.controllerExtensions).length > 0) {\n\t\tfor (const cExtName in obj.metadata.controllerExtensions) {\n\t\t\tobj[cExtName] = obj.metadata.controllerExtensions[cExtName];\n\t\t}\n\t}\n\tconst output = clazz.extend(name, obj) as typeof Control & Function;\n\tconst fnInit = output.prototype.init;\n\tconst fnAfterInit = output.prototype.afterInit;\n\toutput.prototype.init = function (...args: unknown[]): void {\n\t\tif (fnInit) {\n\t\t\tfnInit.apply(this, args);\n\t\t}\n\t\tif (clazz.registerInstance) {\n\t\t\tclazz.registerInstance(this);\n\t\t}\n\t\tthis.metadata = obj.metadata;\n\n\t\tif (obj.metadata.properties) {\n\t\t\tconst aPropertyKeys = Object.keys(obj.metadata.properties);\n\t\t\taPropertyKeys.forEach((propertyKey) => {\n\t\t\t\tconst propertyDef = obj.metadata.properties[propertyKey];\n\t\t\t\t// If a value was set in `init` we need to make sure it is set in the value in the end\n\t\t\t\tconst propertyDefault = this[propertyKey] ?? propertyDef.defaultValue;\n\t\t\t\tif (propertyDef.isBindingInfo === true) {\n\t\t\t\t\tthis._bindingProperties ??= {};\n\n\t\t\t\t\tObject.defineProperty(this, propertyKey, {\n\t\t\t\t\t\tconfigurable: true,\n\t\t\t\t\t\tset: (v: unknown) => {\n\t\t\t\t\t\t\tthis._bindingProperties[propertyKey] = v;\n\t\t\t\t\t\t\tthis.mProperties[propertyKey] = v;\n\t\t\t\t\t\t\treturn this;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget(): unknown {\n\t\t\t\t\t\t\t// Special case we need to consider the property first and not just the _bindingProperties\n\t\t\t\t\t\t\t// During the initialization, if the property is set with a non binding value, setProperty is called and not bindProperty\n\t\t\t\t\t\t\tconst propertyValue = this.getProperty(propertyKey);\n\t\t\t\t\t\t\tconst bindingPropertyValue = this._bindingProperties[propertyKey];\n\t\t\t\t\t\t\t// If the property is set to a different value we update the _bindingProperties\n\t\t\t\t\t\t\tif (propertyValue !== undefined && propertyValue !== bindingPropertyValue) {\n\t\t\t\t\t\t\t\tthis._bindingProperties[propertyKey] = propertyValue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst propValue = this._bindingProperties[propertyKey];\n\t\t\t\t\t\t\tif (typeof propValue === \"object\") {\n\t\t\t\t\t\t\t\treturn { ...propValue }; // Create shallow copy\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn propValue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tObject.defineProperty(this, propertyKey, {\n\t\t\t\t\t\tconfigurable: true,\n\t\t\t\t\t\tset: (v: unknown) => {\n\t\t\t\t\t\t\treturn this.setProperty(propertyKey, v);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget: () => {\n\t\t\t\t\t\t\treturn this.getProperty(propertyKey);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (propertyDefault !== undefined && this[propertyKey] !== propertyDefault) {\n\t\t\t\t\t// don't overwrite the default value if it's already there\n\t\t\t\t\tthis._applyingSettings = true;\n\t\t\t\t\tthis[propertyKey] = propertyDefault;\n\t\t\t\t\tthis._applyingSettings = false;\n\t\t\t\t\tdelete this._applyingSettings;\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst aAggregationKeys = Object.keys(obj.metadata.aggregations);\n\t\t\taAggregationKeys.forEach((aggregationKey) => {\n\t\t\t\tconst aggregationDef = obj.metadata.aggregations[aggregationKey];\n\t\t\t\tconst defaultValue = this[aggregationKey] ?? aggregationDef.defaultValue;\n\t\t\t\tObject.defineProperty(this, aggregationKey, {\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\tset: (v: unknown) => {\n\t\t\t\t\t\treturn this.setAggregation(aggregationKey, v);\n\t\t\t\t\t},\n\t\t\t\t\tget: () => {\n\t\t\t\t\t\tconst aggregationContent = this.getAggregation(aggregationKey);\n\t\t\t\t\t\tif (obj.metadata.aggregations[aggregationKey].multiple) {\n\t\t\t\t\t\t\treturn aggregationContent || [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn aggregationContent;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (defaultValue && (defaultValue as UI5Element)?.isA) {\n\t\t\t\t\tthis._applyingSettings = true;\n\t\t\t\t\tthis[aggregationKey] = defaultValue;\n\t\t\t\t\tthis._applyingSettings = false;\n\t\t\t\t\tdelete this._applyingSettings;\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst aAssociationKeys = Object.keys(obj.metadata.associations);\n\t\t\taAssociationKeys.forEach((associationKey) => {\n\t\t\t\tObject.defineProperty(this, associationKey, {\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\tset: (v: unknown) => {\n\t\t\t\t\t\treturn this.setAssociation(associationKey, v);\n\t\t\t\t\t},\n\t\t\t\t\tget: () => {\n\t\t\t\t\t\tconst aggregationContent = this.getAssociation(associationKey);\n\t\t\t\t\t\tif (obj.metadata.associations[associationKey].multiple) {\n\t\t\t\t\t\t\treturn aggregationContent || [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn aggregationContent;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tif (obj.metadata.references) {\n\t\t\tconst referenceProperties = Object.keys(obj.metadata.references);\n\t\t\treferenceProperties.forEach((propertyKey) => {\n\t\t\t\tObject.defineProperty(this, propertyKey, {\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\tvalue: createReference()\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tif (obj.metadata.methods) {\n\t\t\tfor (const methodName in obj.metadata.methods) {\n\t\t\t\tconst methodDefinition = obj.metadata.methods[methodName];\n\t\t\t\tif (methodDefinition.overrideExecution === \"AfterAsync\" || methodDefinition.overrideExecution === \"BeforeAsync\") {\n\t\t\t\t\tif (!this.methodHolder) {\n\t\t\t\t\t\tthis.methodHolder = [];\n\t\t\t\t\t}\n\t\t\t\t\tthis.methodHolder[methodName] = [this[methodName]];\n\t\t\t\t\tObject.defineProperty(this, methodName, {\n\t\t\t\t\t\tconfigurable: true,\n\t\t\t\t\t\tset: (v: Function) => {\n\t\t\t\t\t\t\treturn this.methodHolder[methodName].push(v);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget: () => {\n\t\t\t\t\t\t\treturn async (...methodArgs: unknown[]) => {\n\t\t\t\t\t\t\t\tconst methodArrays = this.methodHolder[methodName];\n\t\t\t\t\t\t\t\tif (methodDefinition.overrideExecution === \"BeforeAsync\") {\n\t\t\t\t\t\t\t\t\tmethodArrays.reverse();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlet result;\n\t\t\t\t\t\t\t\tfor (const arg of methodArrays) {\n\t\t\t\t\t\t\t\t\tresult = await arg.apply(this, methodArgs);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_createStateProperty(obj, this);\n\t\tif (fnAfterInit) {\n\t\t\tfnAfterInit.apply(this, args);\n\t\t}\n\t};\n\n\tclazz.override = function (oExtension: unknown): Function {\n\t\tconst pol = {};\n\t\t(pol as Function).constructor = function (...args: unknown[]): Function {\n\t\t\treturn clazz.apply(this, args);\n\t\t};\n\t\tconst oClass = (Metadata as unknown as { createClass: Function }).createClass(\n\t\t\tclazz,\n\t\t\t`anonymousExtension~${uid()}`,\n\t\t\tpol,\n\t\t\tControllerMetadata\n\t\t);\n\t\toClass.getMetadata()._staticOverride = oExtension;\n\t\toClass.getMetadata()._override = (clazz.getMetadata() as { _override?: unknown })._override;\n\t\treturn oClass;\n\t};\n\n\tObjectPath.set(name, output);\n\n\treturn output;\n}\n"],"mappings":"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","ignoreList":[],"file":"ClassSupport-dbg.js"}