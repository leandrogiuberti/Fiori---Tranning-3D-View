{"version":3,"names":["getAdaptationProperties","designtimeSettings","control","propertyValues","forEach","setting","id","getAdaptationPropertyValue","_exports","returnValue","viewData","getParent","getViewData","stickyMultiTabHeader","variantManagement","initialLoad","hideFilterBar","useHiddenFilterBar","views","showCounts","getGlobalSettingsValue","designTime","actions","annotation","textArrangement","getTextArrangementChangeAction","rename","getRenameAction","settings","fe","name","getText","icon","isEnabled","isManifestChangesEnabled","handler","getDesigntimeSettings","globalSettings","getGlobalSettings","globalSettingsValues","getGlobalSettingsValues","propertyAndGlobalValues","unchangedData","configContext","getBindingContext","isConfigModelPrepared","items","itemsGlobal","getSettings","getSettingsGlobal","concat","getSettingsIfKeyUser","CommonUtils","getAppComponent","prepareConfigModel","resourceModel","getModel","openAdaptionDialog","then","propertyValuesEntered","extractChanges","noChanges","properties","backgroundDesign","ignore","blocked","busy","busyIndicatorDelay","busyIndicatorSize","headerExpanded","headerPinned","preserveHeaderStateOnScroll","showFooter","toggleHeaderOnTitleClick","visible","fitContent","aggregations","manifestSettings","getPropertyNamesAndDescriptions","manifestSettingsValues","returnValues","manifestPropertyPath","manifestPropertyChange","propertyChanges","propertyPath","separateChanges"],"sourceRoot":".","sources":["ListReport.designtime.ts"],"sourcesContent":["import type DynamicPage from \"sap/f/DynamicPage\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type ResourceModel from \"sap/fe/core/ResourceModel\";\nimport { getRenameAction, getText, getTextArrangementChangeAction } from \"sap/fe/core/designtime/AnnotationBasedChanges\";\nimport type { DesigntimeSetting, PropertyValue, SettingsData, adaptionChange } from \"sap/fe/macros/designtime/Designtime.helper\";\nimport {\n\textractChanges,\n\tgetPropertyNamesAndDescriptions,\n\tgetSettingsIfKeyUser,\n\tisConfigModelPrepared,\n\tisManifestChangesEnabled,\n\tnoChanges,\n\topenAdaptionDialog,\n\tprepareConfigModel,\n\tseparateChanges\n} from \"sap/fe/macros/designtime/Designtime.helper\";\nimport {\n\tgetDesigntimeSettings,\n\tgetGlobalSettings,\n\tgetGlobalSettingsValue,\n\tgetGlobalSettingsValues,\n\tgetSettings,\n\tgetSettingsGlobal\n} from \"sap/fe/templates/ListReport/designtime/ListReport.designtime.helper\";\nimport type View from \"sap/ui/core/mvc/View\";\nimport type Context from \"sap/ui/model/Context\";\n\ntype propertyValueInConfig = {\n\tstickyMultiTabHeader: false;\n\tvariantManagement: string;\n\tinitialLoad: string;\n\thideFilterBar: false;\n\tuseHiddenFilterBar: false;\n\tviews: {\n\t\tshowCounts: false;\n\t};\n};\n\nexport function getAdaptationProperties(designtimeSettings: DesigntimeSetting[], control: DynamicPage): PropertyValue {\n\tconst propertyValues: PropertyValue = {};\n\tdesigntimeSettings.forEach(function (setting) {\n\t\tpropertyValues[setting.id] = getAdaptationPropertyValue(setting, control);\n\t});\n\treturn propertyValues;\n}\n/**\n * Returns the value of one of the settings that have been defined for list report adaptation.\n * @param setting The definition of the setting required for adaptation\n * @param control Reference to list report\n * @returns Setting definition with a value for list report\n */\nexport function getAdaptationPropertyValue(setting: DesigntimeSetting, control: DynamicPage): boolean | string | number {\n\tlet returnValue: boolean | string | number = \"\";\n\n\tconst viewData = (control.getParent() as View)!.getViewData() as propertyValueInConfig;\n\n\tswitch (setting.id) {\n\t\tcase \"stickyMultiTabHeader\":\n\t\t\treturnValue = viewData.stickyMultiTabHeader;\n\t\t\tbreak;\n\t\tcase \"variantManagement\":\n\t\t\treturnValue = viewData.variantManagement;\n\t\t\tbreak;\n\t\tcase \"initialLoad\":\n\t\t\treturnValue = viewData.initialLoad;\n\t\t\tbreak;\n\t\tcase \"hideFilterBar\":\n\t\t\treturnValue = viewData.hideFilterBar;\n\t\t\tbreak;\n\t\tcase \"useHiddenFilterBar\":\n\t\t\treturnValue = viewData.useHiddenFilterBar;\n\t\t\tbreak;\n\t\tcase \"showCounts\":\n\t\t\treturnValue = viewData.views?.showCounts;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\treturnValue = getGlobalSettingsValue(setting, control);\n\t}\n\n\treturn returnValue;\n}\n\nconst designTime = {\n\tactions: {\n\t\tannotation: {\n\t\t\ttextArrangement: getTextArrangementChangeAction(),\n\t\t\trename: getRenameAction()\n\t\t},\n\t\tsettings: {\n\t\t\tfe: {\n\t\t\t\tname: getText(\"RTA_CONTEXT_ACTIONMENU_CONFIG\"),\n\t\t\t\ticon: \"sap-icon://developer-settings\",\n\t\t\t\tisEnabled: isManifestChangesEnabled,\n\t\t\t\thandler: async function (control: DynamicPage): Promise<unknown> {\n\t\t\t\t\tconst designtimeSettings = getDesigntimeSettings();\n\t\t\t\t\tconst globalSettings = getGlobalSettings();\n\t\t\t\t\tconst propertyValues = getAdaptationProperties(designtimeSettings, control);\n\t\t\t\t\tconst globalSettingsValues = getGlobalSettingsValues(globalSettings, control);\n\t\t\t\t\tconst propertyAndGlobalValues = { ...propertyValues, ...globalSettingsValues };\n\t\t\t\t\tconst unchangedData = { ...globalSettingsValues, ...propertyValues };\n\t\t\t\t\tconst configContext = control.getBindingContext(\"internal\") as Context;\n\t\t\t\t\tif (!isConfigModelPrepared(configContext)) {\n\t\t\t\t\t\t// first time this session\n\t\t\t\t\t\tlet items: SettingsData[] = [];\n\t\t\t\t\t\tlet itemsGlobal: SettingsData[] = [];\n\t\t\t\t\t\titems = getSettings(propertyValues);\n\t\t\t\t\t\titemsGlobal = getSettingsGlobal(globalSettingsValues);\n\t\t\t\t\t\titems = items.concat(itemsGlobal);\n\t\t\t\t\t\t// sap-fe-rta-mode=true and then Adapt UI\n\t\t\t\t\t\titems = getSettingsIfKeyUser(CommonUtils.getAppComponent(control), items);\n\t\t\t\t\t\t// use internal model to persist adaptation configuration values\n\t\t\t\t\t\tprepareConfigModel(items, configContext);\n\t\t\t\t\t}\n\t\t\t\t\tconst resourceModel = control.getModel(\"sap.fe.i18n\") as ResourceModel;\n\t\t\t\t\treturn openAdaptionDialog(\n\t\t\t\t\t\tconfigContext,\n\t\t\t\t\t\tpropertyAndGlobalValues,\n\t\t\t\t\t\t\"{sap.fe.i18n>RTA_CONFIGURATION_TITLE_LR}\",\n\t\t\t\t\t\tresourceModel\n\t\t\t\t\t).then(function (propertyValuesEntered: PropertyValue): adaptionChange[] | [] {\n\t\t\t\t\t\treturn extractChanges(designtimeSettings, unchangedData, propertyValuesEntered, \"\", control, globalSettings);\n\t\t\t\t\t}, noChanges);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t// We disable dynamic page properties in the property panel of Fiori Tools\n\tproperties: {\n\t\tbackgroundDesign: { ignore: true },\n\t\tblocked: { ignore: true },\n\t\tbusy: { ignore: true },\n\t\tbusyIndicatorDelay: { ignore: true },\n\t\tbusyIndicatorSize: { ignore: true },\n\t\theaderExpanded: { ignore: true },\n\t\theaderPinned: { ignore: true },\n\t\tpreserveHeaderStateOnScroll: { ignore: true },\n\t\tshowFooter: { ignore: true },\n\t\ttoggleHeaderOnTitleClick: { ignore: true },\n\t\tvisible: { ignore: true },\n\t\tfitContent: { ignore: true }\n\t},\n\n\taggregations: {},\n\n\t// These functions provide the properties used in table adaption to Fiori tools.\n\tmanifestSettings: function (control: DynamicPage): DesigntimeSetting[] {\n\t\tconst globalSettings = getPropertyNamesAndDescriptions(getGlobalSettings(), control.getModel(\"sap.fe.i18n\") as ResourceModel);\n\t\tconst settings = getPropertyNamesAndDescriptions(getDesigntimeSettings(), control.getModel(\"sap.fe.i18n\") as ResourceModel);\n\t\treturn globalSettings.concat(settings);\n\t},\n\t// getAdaptionPropertyValue\n\tmanifestSettingsValues: function (designtimeSettings: DesigntimeSetting[], control: DynamicPage): PropertyValue {\n\t\tconst returnValues: PropertyValue = {};\n\t\tdesigntimeSettings.forEach(function (setting) {\n\t\t\treturnValues[setting.id] = getAdaptationPropertyValue(setting, control);\n\t\t});\n\t\treturn returnValues;\n\t},\n\t// get path for control configuration. Pass reference to the control\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tmanifestPropertyPath: function (control: DynamicPage): string {\n\t\treturn \"\";\n\t},\n\t// create change structue. Pass array of manifest setting and new value, the property path and the control\n\tmanifestPropertyChange: function (propertyChanges: PropertyValue, propertyPath: string, control: DynamicPage): adaptionChange[] {\n\t\treturn separateChanges(propertyChanges, propertyPath, control);\n\t}\n};\n\nexport default designTime;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;EAsCO,SAASA,uBAAuBA,CAACC,kBAAuC,EAAEC,OAAoB,EAAiB;IACrH,MAAMC,cAA6B,GAAG,CAAC,CAAC;IACxCF,kBAAkB,CAACG,OAAO,CAAC,UAAUC,OAAO,EAAE;MAC7CF,cAAc,CAACE,OAAO,CAACC,EAAE,CAAC,GAAGC,0BAA0B,CAACF,OAAO,EAAEH,OAAO,CAAC;IAC1E,CAAC,CAAC;IACF,OAAOC,cAAc;EACtB;EACA;AACA;AACA;AACA;AACA;AACA;EALAK,QAAA,CAAAR,uBAAA,GAAAA,uBAAA;EAMO,SAASO,0BAA0BA,CAACF,OAA0B,EAAEH,OAAoB,EAA6B;IACvH,IAAIO,WAAsC,GAAG,EAAE;IAE/C,MAAMC,QAAQ,GAAIR,OAAO,CAACS,SAAS,CAAC,CAAC,CAAWC,WAAW,CAAC,CAA0B;IAEtF,QAAQP,OAAO,CAACC,EAAE;MACjB,KAAK,sBAAsB;QAC1BG,WAAW,GAAGC,QAAQ,CAACG,oBAAoB;QAC3C;MACD,KAAK,mBAAmB;QACvBJ,WAAW,GAAGC,QAAQ,CAACI,iBAAiB;QACxC;MACD,KAAK,aAAa;QACjBL,WAAW,GAAGC,QAAQ,CAACK,WAAW;QAClC;MACD,KAAK,eAAe;QACnBN,WAAW,GAAGC,QAAQ,CAACM,aAAa;QACpC;MACD,KAAK,oBAAoB;QACxBP,WAAW,GAAGC,QAAQ,CAACO,kBAAkB;QACzC;MACD,KAAK,YAAY;QAChBR,WAAW,GAAGC,QAAQ,CAACQ,KAAK,EAAEC,UAAU;QACxC;MACD;QACCV,WAAW,GAAGW,sBAAsB,CAACf,OAAO,EAAEH,OAAO,CAAC;IACxD;IAEA,OAAOO,WAAW;EACnB;EAACD,QAAA,CAAAD,0BAAA,GAAAA,0BAAA;EAED,MAAMc,UAAU,GAAG;IAClBC,OAAO,EAAE;MACRC,UAAU,EAAE;QACXC,eAAe,EAAEC,8BAA8B,CAAC,CAAC;QACjDC,MAAM,EAAEC,eAAe,CAAC;MACzB,CAAC;MACDC,QAAQ,EAAE;QACTC,EAAE,EAAE;UACHC,IAAI,EAAEC,OAAO,CAAC,+BAA+B,CAAC;UAC9CC,IAAI,EAAE,+BAA+B;UACrCC,SAAS,EAAEC,wBAAwB;UACnCC,OAAO,EAAE,eAAAA,CAAgBjC,OAAoB,EAAoB;YAChE,MAAMD,kBAAkB,GAAGmC,qBAAqB,CAAC,CAAC;YAClD,MAAMC,cAAc,GAAGC,iBAAiB,CAAC,CAAC;YAC1C,MAAMnC,cAAc,GAAGH,uBAAuB,CAACC,kBAAkB,EAAEC,OAAO,CAAC;YAC3E,MAAMqC,oBAAoB,GAAGC,uBAAuB,CAACH,cAAc,EAAEnC,OAAO,CAAC;YAC7E,MAAMuC,uBAAuB,GAAG;cAAE,GAAGtC,cAAc;cAAE,GAAGoC;YAAqB,CAAC;YAC9E,MAAMG,aAAa,GAAG;cAAE,GAAGH,oBAAoB;cAAE,GAAGpC;YAAe,CAAC;YACpE,MAAMwC,aAAa,GAAGzC,OAAO,CAAC0C,iBAAiB,CAAC,UAAU,CAAY;YACtE,IAAI,CAACC,qBAAqB,CAACF,aAAa,CAAC,EAAE;cAC1C;cACA,IAAIG,KAAqB,GAAG,EAAE;cAC9B,IAAIC,WAA2B,GAAG,EAAE;cACpCD,KAAK,GAAGE,WAAW,CAAC7C,cAAc,CAAC;cACnC4C,WAAW,GAAGE,iBAAiB,CAACV,oBAAoB,CAAC;cACrDO,KAAK,GAAGA,KAAK,CAACI,MAAM,CAACH,WAAW,CAAC;cACjC;cACAD,KAAK,GAAGK,oBAAoB,CAACC,WAAW,CAACC,eAAe,CAACnD,OAAO,CAAC,EAAE4C,KAAK,CAAC;cACzE;cACAQ,kBAAkB,CAACR,KAAK,EAAEH,aAAa,CAAC;YACzC;YACA,MAAMY,aAAa,GAAGrD,OAAO,CAACsD,QAAQ,CAAC,aAAa,CAAkB;YACtE,OAAOC,kBAAkB,CACxBd,aAAa,EACbF,uBAAuB,EACvB,0CAA0C,EAC1Cc,aACD,CAAC,CAACG,IAAI,CAAC,UAAUC,qBAAoC,EAAyB;cAC7E,OAAOC,cAAc,CAAC3D,kBAAkB,EAAEyC,aAAa,EAAEiB,qBAAqB,EAAE,EAAE,EAAEzD,OAAO,EAAEmC,cAAc,CAAC;YAC7G,CAAC,EAAEwB,SAAS,CAAC;UACd;QACD;MACD;IACD,CAAC;IACD;IACAC,UAAU,EAAE;MACXC,gBAAgB,EAAE;QAAEC,MAAM,EAAE;MAAK,CAAC;MAClCC,OAAO,EAAE;QAAED,MAAM,EAAE;MAAK,CAAC;MACzBE,IAAI,EAAE;QAAEF,MAAM,EAAE;MAAK,CAAC;MACtBG,kBAAkB,EAAE;QAAEH,MAAM,EAAE;MAAK,CAAC;MACpCI,iBAAiB,EAAE;QAAEJ,MAAM,EAAE;MAAK,CAAC;MACnCK,cAAc,EAAE;QAAEL,MAAM,EAAE;MAAK,CAAC;MAChCM,YAAY,EAAE;QAAEN,MAAM,EAAE;MAAK,CAAC;MAC9BO,2BAA2B,EAAE;QAAEP,MAAM,EAAE;MAAK,CAAC;MAC7CQ,UAAU,EAAE;QAAER,MAAM,EAAE;MAAK,CAAC;MAC5BS,wBAAwB,EAAE;QAAET,MAAM,EAAE;MAAK,CAAC;MAC1CU,OAAO,EAAE;QAAEV,MAAM,EAAE;MAAK,CAAC;MACzBW,UAAU,EAAE;QAAEX,MAAM,EAAE;MAAK;IAC5B,CAAC;IAEDY,YAAY,EAAE,CAAC,CAAC;IAEhB;IACAC,gBAAgB,EAAE,SAAAA,CAAU3E,OAAoB,EAAuB;MACtE,MAAMmC,cAAc,GAAGyC,+BAA+B,CAACxC,iBAAiB,CAAC,CAAC,EAAEpC,OAAO,CAACsD,QAAQ,CAAC,aAAa,CAAkB,CAAC;MAC7H,MAAM5B,QAAQ,GAAGkD,+BAA+B,CAAC1C,qBAAqB,CAAC,CAAC,EAAElC,OAAO,CAACsD,QAAQ,CAAC,aAAa,CAAkB,CAAC;MAC3H,OAAOnB,cAAc,CAACa,MAAM,CAACtB,QAAQ,CAAC;IACvC,CAAC;IACD;IACAmD,sBAAsB,EAAE,SAAAA,CAAU9E,kBAAuC,EAAEC,OAAoB,EAAiB;MAC/G,MAAM8E,YAA2B,GAAG,CAAC,CAAC;MACtC/E,kBAAkB,CAACG,OAAO,CAAC,UAAUC,OAAO,EAAE;QAC7C2E,YAAY,CAAC3E,OAAO,CAACC,EAAE,CAAC,GAAGC,0BAA0B,CAACF,OAAO,EAAEH,OAAO,CAAC;MACxE,CAAC,CAAC;MACF,OAAO8E,YAAY;IACpB,CAAC;IACD;IACA;IACAC,oBAAoB,EAAE,SAAAA,CAAU/E,OAAoB,EAAU;MAC7D,OAAO,EAAE;IACV,CAAC;IACD;IACAgF,sBAAsB,EAAE,SAAAA,CAAUC,eAA8B,EAAEC,YAAoB,EAAElF,OAAoB,EAAoB;MAC/H,OAAOmF,eAAe,CAACF,eAAe,EAAEC,YAAY,EAAElF,OAAO,CAAC;IAC/D;EACD,CAAC;EAAC,OAEamB,UAAU;AAAA","ignoreList":[],"file":"ListReport-dbg.designtime.js"}