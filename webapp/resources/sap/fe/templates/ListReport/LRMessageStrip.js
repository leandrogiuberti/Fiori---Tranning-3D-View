/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/ui/core/Messaging","sap/ui/core/message/Message"],function(e,s){"use strict";var t={};let a=function(){function a(){this.customMessageInfo={messageManagerDataBinding:e.getMessageModel().bindList("/"),multiModeControlMessagesMap:{}}}t.LRMessageStrip=a;var n=a.prototype;n.getCustomMessageInfo=function e(){return this.customMessageInfo};n.destroy=function e(){this.customMessageInfo.messageManagerDataBinding.detachChange(this._eventHandlerCustomMessage,this)};n._getMessagesWithSameTargetThanCustomMessage=function s(){return e.getMessageModel().getData().filter(e=>e.getTargets()[0]===this.customMessageInfo.currentMessage?.getTargets()[0]&&e!==this.customMessageInfo.currentMessage)};n._eventHandlerCustomMessage=function s(){if(this.customMessageInfo.currentMessage){const s=this._getMessagesWithSameTargetThanCustomMessage();const t=!!e.getMessageModel().getData().find(e=>e===this.customMessageInfo.currentMessage);if(s.length>0&&t){e.removeMessages([this.customMessageInfo?.currentMessage])}else if(s.length===0&&!t){e.addMessages([this.customMessageInfo.currentMessage])}}};n.createCustomMessage=function t(a,n){const o=n.message;const g=n.table;const i=n.skipMessageManagerUpdate;const c=g.getRowBinding()?.getPath();const r=this.customMessageInfo.multiModeControlMessagesMap;r[g.getId()]=o;if(!c){g.attachEventOnce("bindingUpdated",n,this.createCustomMessage,this);return}if(r[g.getId()]?.onClose){g.getDataStateIndicator().detachEvent("close",r[g.getId()]?.onClose,this)}const M=g.getModel();const u=o?new s({message:o.message,type:o.type,target:[c],persistent:false,processor:M}):null;this.customMessageInfo.messageManagerDataBinding.detachChange(this._eventHandlerCustomMessage,this);if(!i){if(this.customMessageInfo.currentMessage){e.removeMessages([this.customMessageInfo.currentMessage])}if(u){this.customMessageInfo.currentMessage=u}else{delete this.customMessageInfo.currentMessage}if(u&&this._getMessagesWithSameTargetThanCustomMessage().length===0){e.addMessages([u])}}this.customMessageInfo.messageManagerDataBinding.attachChange(this._eventHandlerCustomMessage,this);this.attachDataStateIndicatorCloseEvent(g,r,o?.onClose)};n.attachDataStateIndicatorCloseEvent=function e(s,t,a){if(a){s.getDataStateIndicator().attachEventOnce("close",a,this)}s.getDataStateIndicator().attachEventOnce("close",()=>{delete t[s.getId()]})};n.onSelectMultipleModeControl=function e(s,t){const a=t._getTable();const n=this.customMessageInfo.multiModeControlMessagesMap[a.getId()];this.createCustomMessage(null,{message:n,table:a})};n.showCustomMessage=function e(s,t,a,n){const o=Array.isArray(a)?a:[a];const g=t._isMultiMode();let i;if(s){s.onClose=n}if(g){const e=t._getMultiModeControl();e.detachEvent("select",this.onSelectMultipleModeControl,this);e.attachEvent("select",t,this.onSelectMultipleModeControl,this);e.getAllInnerControls(true).forEach((t,n)=>{if(t.isA("sap.fe.macros.table.TableAPI")){if(!a||o.includes(n.toString())){i=t.getContent();this.createCustomMessage(null,{message:s,table:i,skipMessageManagerUpdate:e.getSelectedInnerControl()!==t})}}});return}i=t._getTable();this.createCustomMessage(null,{message:s,table:i})};return a}();t.LRMessageStrip=a;return t},false);
//# sourceMappingURL=LRMessageStrip.js.map