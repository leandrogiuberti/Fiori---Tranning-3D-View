{"version":3,"file":"Component.js","names":["VariantManagement","CoreLibrary","CreationMode","SectionLayout","templateLib","ObjectPage","ObjectPageComponent","_dec","defineUI5Class","library","manifest","_dec2","property","type","defaultValue","None","_dec3","Page","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_class","_class2","_TemplateComponent","_this","_len","arguments","length","args","Array","_key","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","DeferredContextCreated","_inheritsLoose","_proto","prototype","init","breadcrumbsHierarchyMode","isContextExpected","extendPageDefinition","pageDefinition","converterContext","extendObjectPageDefinition","createDeferredContext","sPath","oListBinding","parentContext","data","bActionCreate","oParameters","$$groupId","$$updateGroupId","metaModel","getModel","getMetaModel","ModelHelper","isCollaborationDraftSupported","$select","bindList","replace","undefined","oStartUpParams","oAppComponent","getComponentData","startupParameters","oInboundParameters","getViewData","inboundParameters","createParams","preferredMode","includes","Object","assign","CommonUtils","getAdditionalParamsForCreate","getRootControl","getController","editFlow","createDocument","creationMode","Sync","createAction","bFromDeferred","selectedContexts","finally","catch","setVariantManagement","sVariantManagement","Log","error","setProperty","isOpenInEditMode","openInEditMode","_getControllerName","TemplateComponent","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./Component.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport { defineUI5Class, property } from \"sap/fe/base/ClassSupport\";\nimport type { InboundParameter } from \"sap/fe/core/CommonUtils\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport TemplateComponent from \"sap/fe/core/TemplateComponent\";\nimport type ConverterContext from \"sap/fe/core/converters/ConverterContext\";\nimport type { ObjectPageDefinition } from \"sap/fe/core/converters/templates/ObjectPageConverter\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport CoreLibrary from \"sap/fe/core/library\";\nimport type { FinalPageDefinition } from \"sap/fe/templates/ObjectPage/ExtendPageDefinition\";\nimport { extendObjectPageDefinition } from \"sap/fe/templates/ObjectPage/ExtendPageDefinition\";\nimport templateLib from \"sap/fe/templates/library\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\n\nconst VariantManagement = CoreLibrary.VariantManagement,\n\tCreationMode = CoreLibrary.CreationMode;\nconst SectionLayout = templateLib.ObjectPage.SectionLayout;\n@defineUI5Class(\"sap.fe.templates.ObjectPage.Component\", { library: \"sap.fe.templates\", manifest: \"json\" })\nclass ObjectPageComponent extends TemplateComponent {\n\t/**\n\t * Defines if and on which level variants can be configured:\n\t * \t\tNone: no variant configuration at all\n\t * \t\tPage: one variant configuration for the whole page\n\t * \t\tControl: variant configuration on control level\n\t */\n\t@property({\n\t\ttype: \"sap.fe.core.VariantManagement\",\n\t\tdefaultValue: VariantManagement.None\n\t})\n\tvariantManagement: typeof VariantManagement;\n\n\t/**\n\t * Defines how the sections are rendered\n\t * \t\tPage: all sections are shown on one page\n\t * \t\tTabs: each top-level section is shown in an own tab\n\t */\n\t@property({\n\t\ttype: \"sap.fe.templates.ObjectPage.SectionLayout\",\n\t\tdefaultValue: SectionLayout.Page\n\t})\n\tsectionLayout: typeof SectionLayout;\n\n\t/**\n\t * Enables the related apps features\n\t */\n\t@property({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: false\n\t})\n\tshowRelatedApps!: boolean;\n\n\t/**\n\t * Enables the 'Microsoft Teams > As Card' option in the 'Share' menu\n\t */\n\t@property({\n\t\ttype: \"object\"\n\t})\n\tshare!: Record<string, Record<string, boolean>>;\n\n\t@property({ type: \"object\" })\n\tadditionalSemanticObjects!: object;\n\n\t/**\n\t * Enables the editable object page header\n\t */\n\t@property({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: true\n\t})\n\teditableHeaderContent!: boolean;\n\n\t/**\n\t * Shows a text instead of an IllustratedMessage in the noData aggregation of Tables or Charts\n\t */\n\t@property({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: false\n\t})\n\tuseTextForNoDataMessages!: boolean;\n\n\t/**\n\t * Defines the properties which can be used for inbound Navigation\n\t */\n\t@property({\n\t\ttype: \"object\"\n\t})\n\tinboundParameters!: object;\n\n\t/**\n\t * Defines if an object page should be opened in edit mode\n\t */\n\t@property({\n\t\ttype: \"boolean\"\n\t})\n\topenInEditMode: boolean | undefined;\n\n\t@property({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: false\n\t})\n\tenableLazyLoading!: boolean;\n\n\tprivate DeferredContextCreated = false;\n\n\tinit(): void {\n\t\tthis.breadcrumbsHierarchyMode = this.breadcrumbsHierarchyMode ?? \"objectNavigation\";\n\t\tsuper.init();\n\t}\n\n\tisContextExpected(): boolean {\n\t\treturn true;\n\t}\n\n\textendPageDefinition(pageDefinition: ObjectPageDefinition, converterContext: ConverterContext): FinalPageDefinition {\n\t\treturn extendObjectPageDefinition(pageDefinition, converterContext);\n\t}\n\n\t// TODO: this should be ideally be handled by the editflow/routing without the need to have this method in the\n\t// object page - for now keep it here\n\tcreateDeferredContext(\n\t\tsPath: string,\n\t\toListBinding: ODataListBinding | undefined,\n\t\tparentContext: Context | undefined,\n\t\tdata: object | undefined,\n\t\tbActionCreate: boolean\n\t): void {\n\t\tif (!this.DeferredContextCreated) {\n\t\t\tthis.DeferredContextCreated = true;\n\t\t\tconst oParameters: { $$groupId: string; $$updateGroupId: string; $select?: string } = {\n\t\t\t\t$$groupId: \"$auto.Heroes\",\n\t\t\t\t$$updateGroupId: \"$auto\"\n\t\t\t};\n\t\t\tconst metaModel = this.getModel().getMetaModel();\n\t\t\tif (ModelHelper.isCollaborationDraftSupported(metaModel)) {\n\t\t\t\toParameters.$select = \"DraftAdministrativeData/DraftAdministrativeUser\";\n\t\t\t}\n\n\t\t\tif (!oListBinding) {\n\t\t\t\toListBinding = this.getModel().bindList(sPath.replace(\"(...)\", \"\"), undefined, undefined, undefined, oParameters);\n\t\t\t}\n\t\t\tconst oStartUpParams =\n\t\t\t\t\tthis.oAppComponent && this.oAppComponent.getComponentData() && this.oAppComponent.getComponentData().startupParameters,\n\t\t\t\toInboundParameters = this.getViewData().inboundParameters as Record<string, InboundParameter> | undefined;\n\t\t\tlet createParams;\n\t\t\tif (oStartUpParams && oStartUpParams.preferredMode && oStartUpParams.preferredMode[0].includes(\"create\")) {\n\t\t\t\tcreateParams = Object.assign({}, data, CommonUtils.getAdditionalParamsForCreate(oStartUpParams, oInboundParameters));\n\t\t\t} else {\n\t\t\t\tcreateParams = data;\n\t\t\t}\n\n\t\t\t// for now wait until the view and the controller is created\n\t\t\tthis.getRootControl()\n\t\t\t\t.getController()\n\t\t\t\t.editFlow.createDocument(oListBinding, {\n\t\t\t\t\tcreationMode: CreationMode.Sync,\n\t\t\t\t\tcreateAction: bActionCreate,\n\t\t\t\t\tdata: createParams,\n\t\t\t\t\tbFromDeferred: true,\n\t\t\t\t\tselectedContexts: parentContext ? [parentContext] : undefined\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tthis.DeferredContextCreated = false;\n\t\t\t\t})\n\t\t\t\t.catch(function () {\n\t\t\t\t\t// Do Nothing ?\n\t\t\t\t});\n\t\t}\n\t}\n\n\tsetVariantManagement(sVariantManagement: string): void {\n\t\tif (sVariantManagement === VariantManagement.Page) {\n\t\t\tLog.error(\"ObjectPage does not support Page-level variant management yet\");\n\t\t\tsVariantManagement = VariantManagement.None;\n\t\t}\n\n\t\tthis.setProperty(\"variantManagement\", sVariantManagement);\n\t}\n\n\t/**\n\t * Checks if openInEditMode is defined in the manifest settings\n\t * @returns a boolean indicating if edit mode is set for an object page\n\t */\n\n\tisOpenInEditMode(): boolean {\n\t\tconst openInEditMode = this.getViewData().openInEditMode;\n\t\treturn openInEditMode === true;\n\t}\n\n\t_getControllerName(): string {\n\t\treturn \"sap.fe.templates.ObjectPage.ObjectPageController\";\n\t}\n}\n\nexport default ObjectPageComponent;\n"],"mappings":"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","ignoreList":[]}