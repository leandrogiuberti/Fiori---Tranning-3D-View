{"version":3,"file":"StashableHBox.js","names":["StashableHBox","_dec","defineUI5Class","designtime","_dec2","property","type","_dec3","_dec4","_class","_class2","_HBox","_this","_len","arguments","length","args","Array","_key","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_inheritsLoose","_proto","prototype","setTitle","sTitle","oControl","getTitleControl","setText","title","getTitle","fallbackTitle","onAfterRendering","getText","getControlItems","items","aItems","i","getItems","getMicroChartTitle","getContent","content","item","isA","set_disconnected","disconnected","_disconnected","setBindingContext","undefined","getFormLabels","ret","formVBox","forEach","formElementHBox","labelCtrl","push","HBox","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer","StashedControlSupport","mixInto"],"sources":["./StashableHBox.ts"],"sourcesContent":["import type { EnhanceWithUI5 } from \"sap/fe/base/ClassSupport\";\nimport { defineUI5Class, property } from \"sap/fe/base/ClassSupport\";\nimport type MicroChart from \"sap/fe/macros/MicroChart\";\nimport type TitleLink from \"sap/fe/macros/internal/TitleLink\";\nimport type MicroChartContainer from \"sap/fe/macros/microchart/MicroChartContainer\";\nimport HBox from \"sap/m/HBox\";\nimport type Label from \"sap/m/Label\";\nimport type Link from \"sap/m/Link\";\nimport type Title from \"sap/m/Title\";\nimport type VBox from \"sap/m/VBox\";\nimport type Control from \"sap/ui/core/Control\";\nimport StashedControlSupport from \"sap/ui/core/StashedControlSupport\";\n@defineUI5Class(\"sap.fe.templates.ObjectPage.controls.StashableHBox\", {\n\tdesigntime: \"sap/fe/templates/ObjectPage/designtime/StashableHBox.designtime\"\n})\nclass StashableHBox extends HBox {\n\t/*\n\t * Title of the Header Facet. Not visible on the UI. Visible on the UI is the Title or Link control inside the items aggregation of the Header Facet.\n\t * Must always be in sync with the visible Title or Link control.\n\t */\n\t@property({ type: \"string\" })\n\ttitle!: string;\n\n\t/*\n\t * Fallback title to be displayed if no title is available (only needed for displaying stashed header facets in Flex dialog)\n\t */\n\t@property({ type: \"string\" })\n\tfallbackTitle!: string;\n\n\t@property({ type: \"boolean\" })\n\t_disconnected!: boolean;\n\n\t/*\n\t * Set title of visible Title/Link control and own title property.\n\t */\n\tsetTitle(sTitle: string): this {\n\t\tconst oControl = this.getTitleControl();\n\t\tif (oControl) {\n\t\t\toControl.setText(sTitle);\n\t\t}\n\t\tthis.title = sTitle;\n\n\t\treturn this;\n\t}\n\n\t/*\n\t * Return the title property.\n\t */\n\tgetTitle(): string {\n\t\treturn this.title || this.fallbackTitle;\n\t}\n\n\t/*\n\t * In case of UI changes, Title/Link text needs to be set to new value after Header Facet control and inner controls are rendered.\n\t * Else: title property needs to be initialized.\n\t */\n\tonAfterRendering(): void {\n\t\tif (this.title) {\n\t\t\tthis.setTitle(this.title);\n\t\t} else {\n\t\t\tconst oControl = this.getTitleControl();\n\t\t\tif (oControl) {\n\t\t\t\tthis.title = oControl.getText();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetControlItems(items: Control[]): Control[] {\n\t\tlet aItems: Control[] = [],\n\t\t\ti;\n\t\tif (items) {\n\t\t\tfor (i = 0; i < items.length; i++) {\n\t\t\t\tif ((items[i] as HBox).getItems) {\n\t\t\t\t\taItems = (items[i] as HBox).getItems();\n\t\t\t\t} else if ((items[i] as EnhanceWithUI5<MicroChartContainer>).getMicroChartTitle) {\n\t\t\t\t\taItems = (items[i] as EnhanceWithUI5<MicroChartContainer>).getMicroChartTitle();\n\t\t\t\t} else if (\n\t\t\t\t\t((items[i] as EnhanceWithUI5<MicroChart>).getContent() as EnhanceWithUI5<MicroChartContainer>).getMicroChartTitle\n\t\t\t\t) {\n\t\t\t\t\taItems = (\n\t\t\t\t\t\t(items[i] as EnhanceWithUI5<MicroChart>).getContent() as EnhanceWithUI5<MicroChartContainer>\n\t\t\t\t\t).getMicroChartTitle();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn aItems;\n\t}\n\n\t/*\n\t * Retrieves Title/Link control from items aggregation.\n\t */\n\tgetTitleControl(): Link | null {\n\t\tlet aItems: Control[] = [],\n\t\t\tcontent,\n\t\t\ti;\n\t\tconst items = this.getItems();\n\t\taItems = this.getControlItems(items);\n\t\tfor (i = 0; i < aItems.length; i++) {\n\t\t\tconst item = aItems[i].isA(\"sap.fe.macros.internal.TitleLink\") ? (aItems[i] as TitleLink).getContent() : aItems[i];\n\t\t\tif (item) {\n\t\t\t\tif (item.isA<Title>(\"sap.m.Title\") || item.isA<Link>(\"sap.m.Link\")) {\n\t\t\t\t\tif (item.isA<Title>(\"sap.m.Title\")) {\n\t\t\t\t\t\t// If a title was found, check if there is a link in the content aggregation\n\t\t\t\t\t\tcontent = item.getContent() as unknown as Control | undefined;\n\t\t\t\t\t\tif (content && content.isA<Link>(\"sap.m.Link\")) {\n\t\t\t\t\t\t\treturn content;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn item as Link;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tset_disconnected(disconnected: boolean): this {\n\t\tthis._disconnected = disconnected;\n\t\t// By setting the binding context to `null` we are preventing data loading\n\t\t// Setting it back to `undefined` ensures that the parent context is applied\n\t\tif (disconnected) {\n\t\t\tthis.setBindingContext(null);\n\t\t} else {\n\t\t\tthis.setBindingContext(undefined);\n\t\t}\n\t\treturn this;\n\t}\n\n\t/*\n\t * Retrieves label controls from items aggregation.\n\t */\n\tgetFormLabels(): Label[] {\n\t\t// NOTE: Present implementation only supports for direct ReferenceFacets(VBox) in UI.Facets as per the requirement for getting Labels from forms.\n\t\tconst ret: Label[] = [],\n\t\t\tformVBox = this.getItems && this.getItems()[0];\n\n\t\t// VBox is equivalent of form\n\t\tif (formVBox?.isA<VBox>(\"sap.m.VBox\")) {\n\t\t\tformVBox.getItems().forEach((formElementHBox) => {\n\t\t\t\t// HBox is equivalent of form element\n\t\t\t\tif (formElementHBox.isA<HBox>(\"sap.m.HBox\")) {\n\t\t\t\t\tconst labelCtrl = formElementHBox.getItems()[0];\n\t\t\t\t\tif (labelCtrl?.isA<Label>(\"sap.m.Label\")) {\n\t\t\t\t\t\t// First element is label\n\t\t\t\t\t\tret.push(labelCtrl);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn ret;\n\t}\n}\nStashedControlSupport.mixInto(StashableHBox);\n\nexport default StashableHBox;\n"],"mappings":"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","ignoreList":[]}