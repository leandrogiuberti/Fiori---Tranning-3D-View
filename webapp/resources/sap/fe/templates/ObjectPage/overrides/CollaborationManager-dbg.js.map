{"version":3,"names":["RetrieveCardTypes","INTEGRATION","_exports","CollaborationManagerOverride","collectAvailableCards","cards","view","base","getView","controller","getController","appComponent","getOwnerComponent","getAppComponent","isEditable","CommonUtils","getIsEditable","card","getCollaborationManagerService","getDesignTimeCard","undefined","onAddCardToCollaborationManagerCallback","publishCard","e","showGenericErrorMessage","Log","error","pageTitleInformation","_getPageTitleInformation","push","title","subtitle","callback"],"sourceRoot":".","sources":["CollaborationManager.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport { type RetrieveCardType } from \"sap/cards/ap/common/services/RetrieveCard\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type CollaborationManager from \"sap/fe/core/controllerextensions/cards/CollaborationManager\";\nimport { type WrappedCard } from \"sap/fe/core/services/CollaborationManagerServiceFactory\";\nimport { showGenericErrorMessage } from \"sap/fe/macros/insights/CommonInsightsHelper\";\nimport { type CardManifest } from \"sap/insights/CardHelper\";\nexport const RetrieveCardTypes: Record<string, RetrieveCardType> = {\n\tINTEGRATION: \"integration\"\n};\n\nconst CollaborationManagerOverride = {\n\tasync collectAvailableCards(this: CollaborationManager, cards: WrappedCard[]): Promise<void> {\n\t\tconst view = this.base.getView();\n\t\tconst controller = view.getController();\n\t\tconst appComponent = controller.getOwnerComponent().getAppComponent();\n\t\tconst isEditable = CommonUtils.getIsEditable(view);\n\t\tconst card = !isEditable\n\t\t\t? await appComponent.getCollaborationManagerService().getDesignTimeCard(RetrieveCardTypes.INTEGRATION)\n\t\t\t: undefined;\n\t\tif (card) {\n\t\t\tconst onAddCardToCollaborationManagerCallback = (): void => {\n\t\t\t\ttry {\n\t\t\t\t\tif (card) {\n\t\t\t\t\t\tappComponent.getCollaborationManagerService().publishCard(card as CardManifest);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tshowGenericErrorMessage(view);\n\t\t\t\t\tLog.error(e as string);\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst pageTitleInformation = await controller._getPageTitleInformation();\n\t\t\tcards.push({\n\t\t\t\tcard: card,\n\t\t\t\ttitle: pageTitleInformation.subtitle || \"\",\n\t\t\t\tcallback: onAddCardToCollaborationManagerCallback\n\t\t\t});\n\t\t}\n\t}\n};\nexport default CollaborationManagerOverride;\n"],"mappings":";;;;;;;;;EAOO,MAAMA,iBAAmD,GAAG;IAClEC,WAAW,EAAE;EACd,CAAC;EAACC,QAAA,CAAAF,iBAAA,GAAAA,iBAAA;EAEF,MAAMG,4BAA4B,GAAG;IACpC,MAAMC,qBAAqBA,CAA6BC,KAAoB,EAAiB;MAC5F,MAAMC,IAAI,GAAG,IAAI,CAACC,IAAI,CAACC,OAAO,CAAC,CAAC;MAChC,MAAMC,UAAU,GAAGH,IAAI,CAACI,aAAa,CAAC,CAAC;MACvC,MAAMC,YAAY,GAAGF,UAAU,CAACG,iBAAiB,CAAC,CAAC,CAACC,eAAe,CAAC,CAAC;MACrE,MAAMC,UAAU,GAAGC,WAAW,CAACC,aAAa,CAACV,IAAI,CAAC;MAClD,MAAMW,IAAI,GAAG,CAACH,UAAU,GACrB,MAAMH,YAAY,CAACO,8BAA8B,CAAC,CAAC,CAACC,iBAAiB,CAACnB,iBAAiB,CAACC,WAAW,CAAC,GACpGmB,SAAS;MACZ,IAAIH,IAAI,EAAE;QACT,MAAMI,uCAAuC,GAAGA,CAAA,KAAY;UAC3D,IAAI;YACH,IAAIJ,IAAI,EAAE;cACTN,YAAY,CAACO,8BAA8B,CAAC,CAAC,CAACI,WAAW,CAACL,IAAoB,CAAC;cAC/E;YACD;UACD,CAAC,CAAC,OAAOM,CAAC,EAAE;YACXC,uBAAuB,CAAClB,IAAI,CAAC;YAC7BmB,GAAG,CAACC,KAAK,CAACH,CAAW,CAAC;UACvB;QACD,CAAC;QACD,MAAMI,oBAAoB,GAAG,MAAMlB,UAAU,CAACmB,wBAAwB,CAAC,CAAC;QACxEvB,KAAK,CAACwB,IAAI,CAAC;UACVZ,IAAI,EAAEA,IAAI;UACVa,KAAK,EAAEH,oBAAoB,CAACI,QAAQ,IAAI,EAAE;UAC1CC,QAAQ,EAAEX;QACX,CAAC,CAAC;MACH;IACD;EACD,CAAC;EAAC,OACalB,4BAA4B;AAAA","ignoreList":[],"file":"CollaborationManager-dbg.js"}