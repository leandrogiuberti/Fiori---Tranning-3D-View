{"version":3,"file":"CollaborationManager.js","names":["RetrieveCardTypes","INTEGRATION","_exports","CollaborationManagerOverride","collectAvailableCards","cards","view","this","base","getView","controller","getController","appComponent","getOwnerComponent","getAppComponent","isEditable","CommonUtils","getIsEditable","card","getCollaborationManagerService","getDesignTimeCard","undefined","onAddCardToCollaborationManagerCallback","publishCard","e","showGenericErrorMessage","Log","error","pageTitleInformation","_getPageTitleInformation","push","title","subtitle","callback"],"sources":["./CollaborationManager.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport { type RetrieveCardType } from \"sap/cards/ap/common/services/RetrieveCard\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type CollaborationManager from \"sap/fe/core/controllerextensions/cards/CollaborationManager\";\nimport { type WrappedCard } from \"sap/fe/core/services/CollaborationManagerServiceFactory\";\nimport { showGenericErrorMessage } from \"sap/fe/macros/insights/CommonInsightsHelper\";\nimport { type CardManifest } from \"sap/insights/CardHelper\";\nexport const RetrieveCardTypes: Record<string, RetrieveCardType> = {\n\tINTEGRATION: \"integration\"\n};\n\nconst CollaborationManagerOverride = {\n\tasync collectAvailableCards(this: CollaborationManager, cards: WrappedCard[]): Promise<void> {\n\t\tconst view = this.base.getView();\n\t\tconst controller = view.getController();\n\t\tconst appComponent = controller.getOwnerComponent().getAppComponent();\n\t\tconst isEditable = CommonUtils.getIsEditable(view);\n\t\tconst card = !isEditable\n\t\t\t? await appComponent.getCollaborationManagerService().getDesignTimeCard(RetrieveCardTypes.INTEGRATION)\n\t\t\t: undefined;\n\t\tif (card) {\n\t\t\tconst onAddCardToCollaborationManagerCallback = (): void => {\n\t\t\t\ttry {\n\t\t\t\t\tif (card) {\n\t\t\t\t\t\tappComponent.getCollaborationManagerService().publishCard(card as CardManifest);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tshowGenericErrorMessage(view);\n\t\t\t\t\tLog.error(e as string);\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst pageTitleInformation = await controller._getPageTitleInformation();\n\t\t\tcards.push({\n\t\t\t\tcard: card,\n\t\t\t\ttitle: pageTitleInformation.subtitle || \"\",\n\t\t\t\tcallback: onAddCardToCollaborationManagerCallback\n\t\t\t});\n\t\t}\n\t}\n};\nexport default CollaborationManagerOverride;\n"],"mappings":";;;;6KAOO,MAAMA,EAAsD,CAClEC,YAAa,eACZC,EAAAF,oBAEF,MAAMG,EAA+B,CACpC,2BAAMC,CAAkDC,GACvD,MAAMC,EAAOC,KAAKC,KAAKC,UACvB,MAAMC,EAAaJ,EAAKK,gBACxB,MAAMC,EAAeF,EAAWG,oBAAoBC,kBACpD,MAAMC,EAAaC,EAAYC,cAAcX,GAC7C,MAAMY,GAAQH,QACLH,EAAaO,iCAAiCC,kBAAkBpB,EAAkBC,aACxFoB,UACH,GAAIH,EAAM,CACT,MAAMI,EAA0CA,KAC/C,IACC,GAAIJ,EAAM,CACTN,EAAaO,iCAAiCI,YAAYL,GAC1D,MACD,CACD,CAAE,MAAOM,GACRC,EAAwBnB,GACxBoB,EAAIC,MAAMH,EACX,GAED,MAAMI,QAA6BlB,EAAWmB,2BAC9CxB,EAAMyB,KAAK,CACVZ,KAAMA,EACNa,MAAOH,EAAqBI,UAAY,GACxCC,SAAUX,GAEZ,CACD,GACC,OACanB,CAA4B","ignoreList":[]}