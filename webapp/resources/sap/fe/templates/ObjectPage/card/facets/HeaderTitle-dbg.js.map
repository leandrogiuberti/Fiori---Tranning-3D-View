{"version":3,"names":["HeaderTitle","_BaseCardContentProvi","convertedTypes","config","_this","call","contextPath","getCardConfigurationByKey","headerInfo","headerInfoMetaPath","MetaPath","headerDetails","getHeaderTitleandDescription","headerTitle","description","appTitle","appUrl","cardColumnSet","createHeaderTitle","error","message","Error","String","Log","_assertThisInitialized","_exports","_inheritsLoose","_proto","prototype","getTitle","headerInfoTarget","getTarget","headerInfoTitle","Title","headerInfoDescription","Description","title","textProperty","textpropertyAnnotation","descriptiontextpropertyAnnotation","descriptiontextProperty","headerDescription","$Type","getMetaPathForObject","Value","annotations","Common","Text","TypeName","toString","titleValueBinding","getValueBinding","descriptionValueBinding","subTitle","items","columns","getTextBlock","size","weight","text","maxLines","wrap","push","spacing","getColumn","getColumnSet","undefined","BaseCardContentProvider"],"sourceRoot":".","sources":["HeaderTitle.ts"],"sourcesContent":["import type { ConvertedMetadata } from \"@sap-ux/vocabularies-types\";\nimport { type PropertyAnnotationsBase_Common } from \"@sap-ux/vocabularies-types/vocabularies/Common_Edm\";\nimport type { HeaderInfoType } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport {\n\tUIAnnotationTerms,\n\tUIAnnotationTypes,\n\ttype DataField,\n\ttype DataFieldAbstractTypes,\n\ttype DataFieldForAnnotation\n} from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport MetaPath from \"sap/fe/core/helpers/MetaPath\";\nimport { getColumn, getColumnSet, getTextBlock } from \"sap/fe/templates/ObjectPage/card/AdaptiveCardContent\";\nimport BaseCardContentProvider, { type CardConfig } from \"sap/fe/templates/ObjectPage/card/BaseCardContentProvider\";\nimport type { CardColumnSet, CardTextBlock } from \"types/adaptiveCard_types\";\n\ntype HeaderInfo = {\n\theaderTitle?: string;\n\tappUrl?: string;\n\tappTitle: string;\n\tdescription?: string;\n};\n\n/**\n * Get image and title for card.\n * @param convertedTypes Converted Metadata.\n * @param config Card Configuration.\n */\nexport default class HeaderTitle extends BaseCardContentProvider<CardConfig> {\n\tprivate cardColumnSet?: CardColumnSet;\n\n\t/**\n\t * Get image and title in column set.\n\t * @returns Column set.\n\t */\n\tpublic getTitle(): CardColumnSet | undefined {\n\t\treturn this.cardColumnSet;\n\t}\n\n\tconstructor(convertedTypes: ConvertedMetadata, config: CardConfig) {\n\t\tsuper(convertedTypes, config);\n\t\tconst { contextPath } = this.getCardConfigurationByKey(\"contextInfo\");\n\t\tlet headerInfo: HeaderInfo;\n\t\ttry {\n\t\t\tconst headerInfoMetaPath = new MetaPath<HeaderInfoType>(\n\t\t\t\tconvertedTypes,\n\t\t\t\t`${contextPath}@${UIAnnotationTerms.HeaderInfo}`,\n\t\t\t\tcontextPath\n\t\t\t);\n\t\t\tconst headerDetails = this.getHeaderTitleandDescription(headerInfoMetaPath);\n\t\t\theaderInfo = {\n\t\t\t\theaderTitle: headerDetails?.headerTitle,\n\t\t\t\tdescription: headerDetails?.description,\n\t\t\t\tappTitle: this.getCardConfigurationByKey(\"objectTitle\"),\n\t\t\t\tappUrl: this.getCardConfigurationByKey(\"appUrl\")\n\t\t\t};\n\t\t\tthis.cardColumnSet = this.createHeaderTitle(headerInfo);\n\t\t} catch (error: unknown) {\n\t\t\tconst message = error instanceof Error ? error.message : String(error);\n\t\t\tLog.error(\"Error while creating the card defintion\", message);\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Generates Header title for adaptive card.\n\t * @param headerInfoMetaPath HeaderInfo MetaPath\n\t * @returns Returns Header Title of the object page\n\t */\n\tprivate getHeaderTitleandDescription(headerInfoMetaPath?: MetaPath<HeaderInfoType>): Partial<HeaderInfo> {\n\t\tconst headerInfoTarget = headerInfoMetaPath?.getTarget();\n\t\tconst headerInfoTitle = headerInfoTarget?.Title as DataField | DataFieldForAnnotation;\n\t\tconst headerInfoDescription = headerInfoTarget?.Description as DataField | DataFieldForAnnotation;\n\t\tlet title,\n\t\t\theaderTitle,\n\t\t\ttextProperty,\n\t\t\ttextpropertyAnnotation,\n\t\t\tdescription,\n\t\t\tdescriptiontextpropertyAnnotation,\n\t\t\tdescriptiontextProperty,\n\t\t\theaderDescription;\n\t\tif (headerInfoTitle) {\n\t\t\tswitch (headerInfoTitle.$Type) {\n\t\t\t\tcase UIAnnotationTypes.DataField:\n\t\t\t\t\ttitle = headerInfoMetaPath?.getMetaPathForObject(headerInfoTitle?.Value);\n\t\t\t\t\ttextpropertyAnnotation = (\n\t\t\t\t\t\t(title?.getTarget() as DataFieldAbstractTypes)?.annotations?.Common as PropertyAnnotationsBase_Common\n\t\t\t\t\t)?.Text;\n\t\t\t\t\ttextProperty = textpropertyAnnotation && headerInfoMetaPath?.getMetaPathForObject(textpropertyAnnotation);\n\t\t\t\t\tbreak;\n\t\t\t\tcase UIAnnotationTypes.DataFieldForAnnotation:\n\t\t\t\t\ttitle = headerInfoTarget?.TypeName.toString();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (title) {\n\t\t\tconst titleValueBinding = this.getValueBinding(title, textProperty);\n\t\t\theaderTitle = titleValueBinding;\n\t\t}\n\t\tif (headerInfoDescription) {\n\t\t\tswitch (headerInfoDescription.$Type) {\n\t\t\t\tcase UIAnnotationTypes.DataField:\n\t\t\t\t\tdescription = headerInfoMetaPath?.getMetaPathForObject(headerInfoDescription?.Value);\n\t\t\t\t\tdescriptiontextpropertyAnnotation = (\n\t\t\t\t\t\t(description?.getTarget() as DataFieldAbstractTypes)?.annotations?.Common as PropertyAnnotationsBase_Common\n\t\t\t\t\t)?.Text;\n\t\t\t\t\tdescriptiontextProperty =\n\t\t\t\t\t\tdescriptiontextpropertyAnnotation && headerInfoMetaPath?.getMetaPathForObject(descriptiontextpropertyAnnotation);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (description) {\n\t\t\tconst descriptionValueBinding = this.getValueBinding(description, descriptiontextProperty);\n\t\t\theaderDescription = descriptionValueBinding;\n\t\t}\n\t\treturn { headerTitle: headerTitle, description: headerDescription };\n\t}\n\n\t/**\n\t * Generates Header Image and Title column sets.\n\t * @param headerInfo HeaderInfo with title and header description information.\n\t * @returns An Array of ColumnSets for Image and Title.\n\t */\n\tpublic createHeaderTitle(headerInfo: HeaderInfo | undefined): CardColumnSet | undefined {\n\t\tlet appTitle, headerTitle, subTitle: CardTextBlock;\n\t\tconst items = [];\n\t\tconst columns = [];\n\t\tif (headerInfo?.appTitle) {\n\t\t\tappTitle = getTextBlock({\n\t\t\t\tsize: \"Medium\",\n\t\t\t\tweight: \"Bolder\",\n\t\t\t\ttext: headerInfo?.appTitle,\n\t\t\t\tmaxLines: 3,\n\t\t\t\twrap: true\n\t\t\t});\n\t\t\titems.push(appTitle);\n\t\t}\n\t\tif (headerInfo?.headerTitle) {\n\t\t\theaderTitle = getTextBlock({\n\t\t\t\tsize: \"Default\",\n\t\t\t\tweight: \"Bolder\",\n\t\t\t\ttext: `[ ${headerInfo?.headerTitle} ](${headerInfo?.appUrl})`,\n\t\t\t\tmaxLines: 1,\n\t\t\t\tspacing: \"None\"\n\t\t\t});\n\t\t\titems.push(headerTitle);\n\t\t}\n\t\tif (headerInfo?.description) {\n\t\t\tsubTitle = getTextBlock({\n\t\t\t\tsize: \"Default\",\n\t\t\t\ttext: headerInfo?.description,\n\t\t\t\tmaxLines: 1,\n\t\t\t\tspacing: \"None\"\n\t\t\t});\n\t\t\titems.push(subTitle);\n\t\t}\n\t\tcolumns.push(getColumn({ items: [...items] }));\n\t\treturn getColumnSet(columns) ?? undefined;\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"HeaderTitle-dbg.js"}