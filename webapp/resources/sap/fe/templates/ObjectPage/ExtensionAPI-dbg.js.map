{"version":3,"names":["ObjectPageExtensionAPI","_dec","defineUI5Class","_class","_ExtensionAPI","apply","arguments","_inheritsLoose","_proto","prototype","refresh","vPath","oBindingContext","_view","getBindingContext","Promise","resolve","oAppComponent","CommonUtils","getAppComponent","oSideEffectsService","getSideEffectsService","oMetaModel","getModel","getMetaModel","oSideEffects","targetProperties","targetEntities","undefined","push","$NavigationPropertyPath","allPaths","Array","isArray","ownerComponent","_controller","getOwnerComponent","contextPath","getContextPath","getEntitySet","path","kind","getObject","reject","requestSideEffects","getSelectedContexts","sTableId","table","byId","isA","getParent","showSideContent","sSubSectionKey","bShow","sBlockID","getSideContentLayoutID","oBlock","bBlockState","getShowSideContent","setShowSideContent","_getMessageStripBindingContextPath","internalModelContextPath","getPath","viewContextPath","replace","showMessages","messages","_showMessages","origin","length","view","internalModel","messagestripInternalModelContext","bindContext","getBoundContext","resourceModel","ResourceModelHelper","getResourceModel","message","setProperty","messageStats","Error","id","count","Warning","Information","reduce","acc","currentValue","currentType","getType","setType","Message","type","MessageType","getIsEditable","setMessage","getText","getMessage","InvisibleMessage","getInstance","announce","InvisibleMessageMode","Assertive","err","Log","error","hideMessage","setRecommendations","data","recommendationHelper","transformRecommendationsForInternalStorage","setAsSectionTitleOwner","control","section","originalControl","reuseComponent","container","controlParent","getVisibleSubSections","adjustForSingleContent","multipleSubSectionsWithReuseComponent","ExtensionAPI"],"sourceRoot":".","sources":["ExtensionAPI.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport { defineUI5Class } from \"sap/fe/base/ClassSupport\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport ExtensionAPI from \"sap/fe/core/ExtensionAPI\";\nimport type ReuseComponent from \"sap/fe/core/ReuseComponent\";\nimport { getSideContentLayoutID } from \"sap/fe/core/converters/helpers/ID\";\nimport type { InCompletenessInfoType } from \"sap/fe/core/helpers/RecommendationHelper\";\nimport { recommendationHelper } from \"sap/fe/core/helpers/RecommendationHelper\";\nimport ResourceModelHelper from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport type { SideEffectsTargetType } from \"sap/fe/core/services/SideEffectsServiceFactory\";\nimport type Section from \"sap/fe/macros/controls/Section\";\nimport type TableAPI from \"sap/fe/macros/table/TableAPI\";\nimport type ManagedObject from \"sap/ui/base/ManagedObject\";\nimport InvisibleMessage from \"sap/ui/core/InvisibleMessage\";\nimport { InvisibleMessageMode } from \"sap/ui/core/library\";\nimport Message from \"sap/ui/core/message/Message\";\nimport MessageType from \"sap/ui/core/message/MessageType\";\nimport type DynamicSideContent from \"sap/ui/layout/DynamicSideContent\";\nimport type Control from \"sap/ui/mdc/Control\";\nimport type Table from \"sap/ui/mdc/Table\";\nimport type Context from \"sap/ui/model/Context\";\nimport type ODataV4Context from \"sap/ui/model/odata/v4/Context\";\n\n/**\n * Extension API for object pages on SAP Fiori elements for OData V4.\n *\n * To correctly integrate your app extension coding with SAP Fiori elements, use only the extensionAPI of SAP Fiori elements. Don't access or manipulate controls, properties, models, or other internal objects created by the SAP Fiori elements framework.\n * @public\n * @hideconstructor\n * @final\n * @since 1.79.0\n */\n@defineUI5Class(\"sap.fe.templates.ObjectPage.ExtensionAPI\")\nclass ObjectPageExtensionAPI extends ExtensionAPI {\n\t/**\n\t * Refreshes either the whole object page or only parts of it.\n\t * @param [vPath] Path or array of paths referring to entities or properties to be refreshed.\n\t * If omitted, the whole object page is refreshed. The path \"\" refreshes the entity assigned to the object page\n\t * without navigations\n\t * @returns Resolved once the data is refreshed or rejected if the request failed\n\t * @public\n\t */\n\tasync refresh(vPath?: string | string[]): Promise<void> {\n\t\tconst oBindingContext = this._view.getBindingContext();\n\t\tif (!oBindingContext) {\n\t\t\t// nothing to be refreshed - do not block the app!\n\t\t\treturn Promise.resolve();\n\t\t}\n\t\tconst oAppComponent = CommonUtils.getAppComponent(this._view),\n\t\t\toSideEffectsService = oAppComponent.getSideEffectsService(),\n\t\t\toMetaModel = oBindingContext.getModel().getMetaModel(),\n\t\t\toSideEffects: SideEffectsTargetType = {\n\t\t\t\ttargetProperties: [],\n\t\t\t\ttargetEntities: []\n\t\t\t};\n\n\t\tif (vPath === undefined || vPath === null) {\n\t\t\t// we just add an empty path which should refresh the page with all dependent bindings\n\t\t\toSideEffects.targetEntities.push({\n\t\t\t\t$NavigationPropertyPath: \"\"\n\t\t\t});\n\t\t} else {\n\t\t\tconst allPaths = Array.isArray(vPath) ? vPath : [vPath];\n\t\t\tconst ownerComponent = this._controller.getOwnerComponent() as unknown as {\n\t\t\t\tgetContextPath: () => string;\n\t\t\t\tgetEntitySet: () => string;\n\t\t\t};\n\t\t\tconst contextPath = ownerComponent.getContextPath() || `/${ownerComponent.getEntitySet()}`;\n\n\t\t\tfor (const path of allPaths) {\n\t\t\t\tif (path === \"\") {\n\t\t\t\t\t// an empty path shall refresh the entity without dependencies which means * for the model\n\t\t\t\t\toSideEffects.targetProperties.push(\"*\");\n\t\t\t\t} else {\n\t\t\t\t\tconst kind = oMetaModel.getObject(`${contextPath}/${path}/$kind`);\n\n\t\t\t\t\tif (kind === \"NavigationProperty\") {\n\t\t\t\t\t\toSideEffects.targetEntities.push({\n\t\t\t\t\t\t\t$NavigationPropertyPath: path\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (kind) {\n\t\t\t\t\t\toSideEffects.targetProperties.push(path);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn Promise.reject(`${path} is not a valid path to be refreshed`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn oSideEffectsService.requestSideEffects([...oSideEffects.targetEntities, ...oSideEffects.targetProperties], oBindingContext);\n\t}\n\n\t/**\n\t * Gets the list entries currently selected for the table.\n\t * @param sTableId The ID identifying the table the selected context is requested for\n\t * @returns Array containing the selected contexts\n\t * @public\n\t */\n\tgetSelectedContexts(sTableId: string): ODataV4Context[] {\n\t\tlet table = this._view.byId(sTableId);\n\t\tif (table?.isA<Table>(\"sap.ui.mdc.Table\")) {\n\t\t\ttable = table.getParent() as TableAPI;\n\t\t}\n\t\tif (table?.isA(\"sap.fe.macros.table.TableAPI\")) {\n\t\t\treturn (table as TableAPI).getSelectedContexts();\n\t\t}\n\t\treturn [];\n\t}\n\n\t/**\n\t * Displays or hides the side content of an object page.\n\t * @param sSubSectionKey Key of the side content fragment as defined in the manifest.json\n\t * @param [bShow] Optional Boolean flag to show or hide the side content\n\t * @public\n\t */\n\tshowSideContent(sSubSectionKey: string, bShow?: boolean): void {\n\t\tconst sBlockID = getSideContentLayoutID(sSubSectionKey),\n\t\t\toBlock = this._view.byId(sBlockID),\n\t\t\tbBlockState = bShow === undefined ? !(oBlock as DynamicSideContent).getShowSideContent() : bShow;\n\t\t(oBlock as DynamicSideContent).setShowSideContent(bBlockState, false);\n\t}\n\n\t/**\n\t * Gets the bound context of the current object page.\n\t * @returns Context bound to the object page\n\t * @public\n\t */\n\tgetBindingContext(): Context | null | undefined {\n\t\treturn this._view.getBindingContext();\n\t}\n\n\t/**\n\t * Build the internal context path of the MessageStrip control.\n\t * @returns The internal binding context path for the messageStrip\n\t */\n\t_getMessageStripBindingContextPath(): string {\n\t\tconst internalModelContextPath = this._view.getBindingContext(\"internal\")?.getPath();\n\t\tconst viewContextPath = this._view.getBindingContext()?.getPath();\n\t\treturn internalModelContextPath && viewContextPath\n\t\t\t? `${internalModelContextPath}/MessageStrip/${viewContextPath.replace(/\\//g, \"-\")}`\n\t\t\t: \"\";\n\t}\n\n\t/**\n\t * Displays the message strip between the title and the header of the ObjectPage.\n\t * @param  messages The message to be displayed\n\t * @public\n\t */\n\n\tshowMessages(messages: Message[]): void {\n\t\tthis._showMessages(messages);\n\t}\n\n\t/**\n\t * Displays the message strip between the title and the header of the ObjectPage.\n\t * @param messages The message to be displayed\n\t * @param origin The origin of the message . It may come from a backend message or a custom message\n\t */\n\n\t_showMessages(messages: Message[], origin: \"Backend\" | \"Custom\" = \"Custom\"): void {\n\t\ttry {\n\t\t\tconst view = this._view;\n\t\t\tconst internalModel = view.getModel(\"internal\");\n\t\t\tconst messagestripInternalModelContext = internalModel.bindContext(this._getMessageStripBindingContextPath()).getBoundContext();\n\t\t\tif (!messagestripInternalModelContext) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst resourceModel = ResourceModelHelper.getResourceModel(view);\n\t\t\tlet message: Message | null = null;\n\t\t\tmessagestripInternalModelContext.setProperty(`OP${origin}MessageVisible`, !!message);\n\t\t\tswitch (messages.length) {\n\t\t\t\tcase 0:\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\tmessage = messages[0];\n\t\t\t\t\tmessagestripInternalModelContext.setProperty(`OP${origin}MessageVisible`, !!message);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconst messageStats: { [key: string]: { id: number; count: number } } = {\n\t\t\t\t\t\tError: { id: 2, count: 0 },\n\t\t\t\t\t\tWarning: { id: 1, count: 0 },\n\t\t\t\t\t\tInformation: { id: 0, count: 0 }\n\t\t\t\t\t};\n\t\t\t\t\tmessage = messages.reduce(\n\t\t\t\t\t\t(acc, currentValue) => {\n\t\t\t\t\t\t\tconst currentType = currentValue.getType();\n\t\t\t\t\t\t\tacc.setType(messageStats[currentType].id > messageStats[acc.getType()].id ? currentType : acc.getType());\n\t\t\t\t\t\t\tmessageStats[currentType].count++;\n\t\t\t\t\t\t\treturn acc;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tnew Message({ type: MessageType.Information })\n\t\t\t\t\t);\n\t\t\t\t\tif (origin === \"Backend\" && !CommonUtils.getIsEditable(view)) {\n\t\t\t\t\t\tmessagestripInternalModelContext.setProperty(`OP${origin}MessageVisible`, false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmessagestripInternalModelContext.setProperty(`OP${origin}MessageVisible`, !!message);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (messageStats.Error.count > 0) {\n\t\t\t\t\t\tmessage.setMessage(resourceModel.getText(\"OBJECTPAGESTATE_ERROR\"));\n\t\t\t\t\t} else if (messageStats.Warning.count > 0) {\n\t\t\t\t\t\tmessage.setMessage(resourceModel.getText(\"OBJECTPAGESTATE_WARNING\"));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmessage.setMessage(resourceModel.getText(\"OBJECTPAGESTATE_INFORMATION\"));\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tmessagestripInternalModelContext.setProperty(`OP${origin}MessageText`, message ? message.getMessage() : null);\n\t\t\tmessagestripInternalModelContext.setProperty(`OP${origin}MessageType`, message ? message.getType() : null);\n\t\t\tif (message) {\n\t\t\t\tInvisibleMessage.getInstance().announce(message.getMessage(), InvisibleMessageMode.Assertive);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tLog.error(\"Cannot display ObjectPage message\");\n\t\t}\n\t}\n\n\t/**\n\t * Hides the message strip below the anchor bar.\n\t * @public\n\t */\n\thideMessage(): void {\n\t\tconst internalModel = this._view.getModel(\"internal\");\n\t\tconst messagestripInternalModelContext = internalModel.bindContext(this._getMessageStripBindingContextPath()).getBoundContext()!;\n\t\tmessagestripInternalModelContext.setProperty(`OPCustomMessageVisible`, false);\n\t}\n\n\t/**\n\t * This function will take the recommendation data details, transform it and update internal model with that.\n\t * @param data Recommendation data for the app\n\t */\n\tsetRecommendations(data: InCompletenessInfoType): void {\n\t\trecommendationHelper.transformRecommendationsForInternalStorage(data);\n\t\tthis._view.getModel(\"internal\").setProperty(\"/recommendationsData\", data);\n\t}\n\n\t/**\n\t * Defines a control to be the title owner of its section/subsection. As the title owners of standard subsections are determined automatically, it is recommended to use this function for custom section/subsection.\n\t * The title owner can be either one of the standard building blocks (Form, Chart, Table), or reuse components, or sap.m.Title.\n\t * The framework adapts the value of these properties to be aligned with the title that is shown in the anchor bar (or icon tab bar) for the section. Moreover, the title of the subsection (and if applicable also of the section) is hidden in order to prevent redundant titles, if the subsection possesses a title owner.\n\t * Hint: If you choose to set sap.m.Title as the title owner, styling adjustments may be required in the custom view. For example, if sap.m.Title is set as title owner which belongs to sap.m.OverflowToolbar or to sap.m.Toolbar, then the ‘design’ property of the toolbar control is to be set to ‘Transparent’.\n\t * @param control The single content control can be either one of the standard building blocks (Form, Chart, Table), or reuse components, or sap.m.Title.\n\t * @public\n\t */\n\tsetAsSectionTitleOwner(control: ManagedObject): void {\n\t\tlet section;\n\t\tconst originalControl = control;\n\t\tlet reuseComponent;\n\t\twhile (control) {\n\t\t\tif (control.isA<Section>(\"sap.fe.macros.controls.Section\")) {\n\t\t\t\tsection = control;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (control.isA<ReuseComponent>(\"sap.fe.core.ReuseComponent\")) {\n\t\t\t\tcontrol = control.container.getParent() as Control;\n\t\t\t\treuseComponent = true;\n\t\t\t}\n\t\t\tconst controlParent = control.getParent();\n\t\t\tif (controlParent) {\n\t\t\t\tcontrol = controlParent;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (section) {\n\t\t\tif (reuseComponent && section.getVisibleSubSections().length > 1) {\n\t\t\t\tsection.adjustForSingleContent(originalControl, { multipleSubSectionsWithReuseComponent : true });\n\t\t\t} else {\n\t\t\t\tsection.adjustForSingleContent(originalControl);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default ObjectPageExtensionAPI;\n"],"mappings":"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","ignoreList":[],"file":"ExtensionAPI-dbg.js"}