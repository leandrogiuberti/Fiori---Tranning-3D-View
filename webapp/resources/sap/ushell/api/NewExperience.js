// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/base/EventProvider","sap/ui/model/json/JSONModel","sap/ushell/api/NewExperience/CustomOverflowListItem","sap/ushell/Config"],(e,t,i,l)=>{"use strict";const r={Header:"Header",Overflow:"Overflow"};class s{#e=new e;#t=null;#i=null;#l=null;#r=null;constructor(){this.#s();this.#i=this.#o()}reset(){this.#l.destroy();this.#e.destroy();this.#i.destroy();this.#e=new e;this.#t=null;this.#s();this.#i=this.#o()}#s(){this.#l=new t({active:false,isVisible:false,currentState:r.Header,shellHeaderControlId:null,showInShellHeader:false})}#o(){return new i({visible:{parts:["/isVisible","/currentState"],formatter:(e,t)=>e&&t===r.Overflow},contentId:"{/shellHeaderControlId}"}).addStyleClass("newExperienceSwitchListItem").setModel(this.#l).data("help-id","ushell-new-experience-switch",true)}getModel(){return this.#l}getOverflowItemId(){return this.#i.getId()}isActive(){return this.#l.getProperty("/active")}getShellHeaderControl(){return this.#t}getOverflowItemControl(){return this.#i}showInOverflow(){this.#l.setProperty("/currentState",r.Overflow);this.#n()}showInShellHeader(){this.#l.setProperty("/currentState",r.Header);this.#n()}attachActiveChanged(...e){this.#e.attachEvent("activeChanged",...e)}detachActiveChanged(...e){this.#e.detachEvent("activeChanged",...e)}#n(){const e=this.isActive();const t=this.#l.getProperty("/currentState")===r.Header;if(e){this.#l.setProperty("/showInShellHeader",t)}else{this.#l.setProperty("/showInShellHeader",false)}}setSwitchControl(e){const t=this.isActive();if(e&&!e.hasStyleClass("sapUshellShellNewExperienceSwitch")){e.addStyleClass("sapUshellShellNewExperienceSwitch")}this.#t=e;this.#l.setProperty("/shellHeaderControlId",e?.getId?.());this.#l.setProperty("/active",!!e);this.#l.setProperty("/isVisible",!!e);if(t!==this.isActive()){this.#e.fireEvent("activeChanged",{active:this.isActive()})}if(l.last("/core/shellBar/enabled")){if(e){if(!e.data("help-id")){e.data("help-id","ushell-new-experience-switch",true)}const t=sap.ui.require("sap/ushell/Container");t.getServiceAsync("FrameBoundExtension").then(async t=>{this.#r=await t.createHeaderItem({id:e.getId()});this.#r.showForAllApps();this.#r.showOnHome()})}else{this.#r?.hideForAllApps();this.#r?.hideOnHome()}}this.#n()}setSwitchVisibility(e){this.#l.setProperty("/isVisible",e)}}const o=new s;return o});
//# sourceMappingURL=NewExperience.js.map