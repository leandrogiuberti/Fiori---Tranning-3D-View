// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/base/util/isPlainObject","sap/ushell/Config"],(e,n,a)=>{"use strict";const i={};function o(n){let a=true;if(n){if(typeof n!=="object"){a=false}else{Object.keys(n).forEach(e=>{if(["GUI","WDA","WCF"].indexOf(e)===-1){a=false}else if(typeof n[e]!=="boolean"){a=false}})}}if(!a){e.error("Invalid parameter: 'enableInPlaceForClassicUIs' must be an object; allowed properties: GUI|WDA, type boolean",`Actual parameter: ${JSON.stringify(n)}`,"sap.ushell.services.navigationMode")}}function t(e){switch(e){case"TR":return"GUI";case"WDA":return"WDA";case"WCF":return"WCF";default:return undefined}}i._isInplaceEnabledForApplicationType=function(e){const i=a.last("/core/navigation/enableInPlaceForClassicUIs");o(i);if(n(i)){return i[t(e)]}return false};i._getInternalNavigationMode=function(n,a){const i=a.applicationType;const o={SAPUI5:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindowThenEmbedded"},WDA:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"},TR:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"},URL:{inplace:"embedded",explace:"newWindow",frameless:"newWindow"},WCF:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"}};if(!o.hasOwnProperty(i)){e.error(`${i} is not a valid application type`,`expected one of ${Object.keys(o).join(", ")}`,"sap.ushell.navigationMode");return null}if(n!=="inplace"&&n!=="explace"&&n!=="frameless"){e.error(`${n} is not a valid external navigation mode`,"expected one of 'inplace', 'explace' or 'frameless'","sap.ushell.navigationMode");return null}if(i==="SAPUI5"&&n==="frameless"){e.error(`'${n}' is not a valid external navigation mode for application type '${i}'`,`falling back to internal navigation mode '${o.SAPUI5.frameless}'`,"sap.ushell.navigationMode")}if(i==="URL"){const i=a.appCapabilities?a.appCapabilities.templateNavigationMode:undefined;if(i){const a={embedded:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindowThenEmbedded"},standalone:{inplace:"newWindow",explace:"newWindow",frameless:"newWindow"}};if(i==="standalone"&&n==="inplace"){e.warning("Inplace navigation was requested for an app that supports only standalone mode! 'newWindow' used instead...","sap.ushell.navigationMode")}if(i==="embedded"&&n==="frameless"){e.warning("Frameless navigation was requested for an app that supports only embedded mode! 'newWindowThenEmbedded' used instead...","sap.ushell.navigationMode")}return a[i][n]}}return o[i][n]};i.getExternalNavigationMode=function(n){const a={embedded:"inplace",newWindowThenEmbedded:"explace",replace:"inplace",newWindow:"explace"};if(!a.hasOwnProperty(n)){e.error(`${n} is not a recognized internal navigation mode`,`expected one of ${Object.keys(a).join(",")}`,"sap.ushell.navigationMode");return null}return a[n]};const d=["NWBC","WDA","TR","WCF"];i.getNavigationMode=function(n,a,o){const t=n.additionalInformation;const l=n.applicationType;let s;let r;const p={navigationMode:undefined,explicitNavMode:false};if(["inplace","explace"].indexOf(o)>=0){p["sap-ushell-next-navmode"]=o}if(["inplace","explace","frameless"].indexOf(a)>=0){const o=i._getInternalNavigationMode(a,n);e.debug(`Navigation mode was forced to ${o} because sap-ushell-navmode parameter was set to ${a} for target`,"sap.ushell.navigationMode");p.navigationMode=o;p.explicitNavMode=true;return p}if(i._isInplaceEnabledForApplicationType(l)===true){p.navigationMode=i._getInternalNavigationMode("inplace",n)}if(n.appCapabilities&&n.appCapabilities.navigationMode){p.navigationMode=n.appCapabilities.navigationMode;return p}if((t===null||typeof t==="string"||typeof t==="undefined")&&(l==="URL"||l==="SAPUI5")){if(t&&t.indexOf("managed=")===0){if(t==="managed=FioriWave1"){p.navigationMode="embedded";return p}if(t==="managed="){p.navigationMode="newWindow";return p}return p}if(t&&t.indexOf("SAPUI5.Component=")===0){s="[a-zA-Z0-9_]+";r=["^SAPUI5.Component=",s,"([.]",s,")*$"].join("");if(!new RegExp(r).test(t)){e.warning(["The UI5 component name in",t,"is not valid.","Please use names satisfying",r].join(" "))}p.navigationMode="embedded";return p}p.navigationMode="newWindow";return p}if(p.navigationMode===undefined){if(d.indexOf(l)>-1){p.navigationMode="newWindowThenEmbedded"}else if(l==="SAPUI5"){p.navigationMode="embedded"}else{p.navigationMode="newWindow";e.error(`Invalid ApplicationType: ${l}`)}}return p};i.computeNavigationModeForHomepageTiles=function(e,n,a){const i={applicationType:e,additionalInformation:n};if(d.indexOf(e)>-1&&a){return"embedded"}return this.getNavigationMode(i).navigationMode};return i},false);
//# sourceMappingURL=navigationMode.js.map