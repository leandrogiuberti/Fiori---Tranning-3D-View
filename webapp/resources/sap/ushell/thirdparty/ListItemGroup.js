sap.ui.define(["require","exports","sap/ushell/thirdparty/webcomponents-base","sap/ushell/thirdparty/event-strict","sap/ushell/thirdparty/parameters-bundle.css2","sap/ushell/thirdparty/parameters-bundle.css","sap/ushell/thirdparty/toLowercaseEnumValue","sap/ushell/thirdparty/ListItemBase","sap/ushell/thirdparty/i18n-defaults2","sap/ushell/thirdparty/WrappingType","sap/ushell/thirdparty/Icons"],function(e,t,r,n,o,i,a,s,l,c,p){"use strict";function d(e,t,n,o,i={}){const a=r.D$1.getDraggedElement(),s={targetReference:null,placement:null};if(!a&&!i?.crossDnD)return s;const l=n.placements;return s.targetReference=e.target,l.some(r=>{const l=i.originalEvent?{originalEvent:e}:{};return t.fireDecoratorEvent("move-over",{...l,source:{element:a},destination:{element:o,placement:r}})?false:(e.preventDefault(),s.targetReference=n.element,s.placement=r,true)})||(s.targetReference=null),s}function h(e,t,n,o,i={}){e.preventDefault();const a=r.D$1.getDraggedElement();if(!a&&i?.crossDnD)return;const s=i.originalEvent?{originalEvent:e}:{};t.fireDecoratorEvent("move",{...s,source:{element:a},destination:{element:n,placement:o}}),a?.focus()}var u=(e=>(e.On="On",e.Before="Before",e.After="After",e))(u||{});var g=(e=>(e.Vertical="Vertical",e.Horizontal="Horizontal",e))(g||{});const f=(e,t,r,n)=>{const o=Math.abs(e-t),i=Math.abs(e-r),a=Math.abs(e-n),s=Math.min(o,i,a);let l=[];switch(s){case o:l=[u.Before];break;case i:l=[u.On,o<a?u.Before:u.After];break;case a:l=[u.After];break}return l},m=(e,t,r)=>{let n=Number.POSITIVE_INFINITY,o=null;for(let i=0;i<e.length;i++){const a=e[i],{left:s,width:l,top:c,height:p}=a.getBoundingClientRect();let d;r===g.Vertical?d=c+p/2:d=s+l/2;const h=Math.abs(t-d);h<n&&(n=h,o=a)}if(!o)return null;const{width:i,height:a,left:s,right:l,top:c,bottom:p}=o.getBoundingClientRect();let d;return r===g.Vertical?d=f(t,c,c+a/2,p):d=f(t,s,s+i/2,l),{element:o,placements:d}},b=(e,t)=>(t--,t<0?[]:[{element:e[t],placement:u.Before}]),v=(e,t)=>(t++,t>=e.length?[]:[{element:e[t],placement:u.After}]),y={ArrowLeft:b,ArrowUp:b,ArrowRight:v,ArrowDown:v,Home:(e,t)=>e.slice(0,t).map(e=>({element:e,placement:u.Before})),End:(e,t)=>e.slice(t+1,e.length).reverse().map(e=>({element:e,placement:u.After}))},x=(e,t,r)=>_(r.key)?y[r.key](e,e.indexOf(t)):[],_=e=>e in y;class T{constructor(e,t){this.component=e;this.config={orientation:g.Vertical,clientCoordinate:"clientY",...t}}ondragenter(e){e.preventDefault()}ondragleave(e){if(e.relatedTarget instanceof Node&&this.component.shadowRoot?.contains(e.relatedTarget)){return}const t=this.config.getDropIndicator();if(t){t.targetReference=null}}ondragover(e){if(!this._validateDragOver(e)){return}const t=r.D$1.getDraggedElement();const n=this.config.getDropIndicator();const o=this._findClosestPosition(e);if(!o){n.targetReference=null;return}const i=this._transformTargetElement(o.element);if(!this._isValidDragTarget(t,i)){n.targetReference=null;return}const a=this._filterPlacements(o.placements,t,i);const s=this.config.useOriginalEvent?{originalEvent:true}:{};const{targetReference:l,placement:c}=d(e,this.component,{element:i,placements:a},i,s);n.targetReference=l;n.placement=c}ondrop(e){const t=this.config.getDropIndicator();if(!t?.targetReference||!t?.placement){e.preventDefault();return}const r=this.config.useOriginalEvent?{originalEvent:true}:{};h(e,this.component,t.targetReference,t.placement,r);t.targetReference=null}_validateDragOver(e){if(!(e.target instanceof HTMLElement)){return false}const t=r.D$1.getDraggedElement();const n=this.config.getDropIndicator();return!!(t&&n)}_findClosestPosition(e){const t=this.config.getItems();const r=this.config.clientCoordinate==="clientX"?e.clientX:e.clientY;return m(t,r,this.config.orientation)}_transformTargetElement(e){if(this.config.transformElement){return this.config.transformElement(e)}return e}_isValidDragTarget(e,t){if(this.config.validateDraggedElement){return this.config.validateDraggedElement(e,t)}return true}_filterPlacements(e,t,r){if(this.config.filterPlacements){return this.config.filterPlacements(e,t,r)}return e}}function w(){return o.jsx("div",{class:{"ui5-di-rect":this.placement===u.On,"ui5-di-needle":this.placement!==u.On}})}p.p("@"+"ui5"+"/"+"webcomponents-theming","sap_horizon",async()=>o.defaultThemeBase);p.p("@"+"u"+"i"+"5"+"/"+"w"+"e"+"b"+"c"+"o"+"m"+"p"+"o"+"n"+"e"+"n"+"t"+"s","sap_horizon",async()=>i.defaultTheme);var D=`:host{position:absolute;pointer-events:none;z-index:99}:host([orientation="Vertical"]) .ui5-di-needle{width:.125rem;height:100%;inset-block:0;background:var(--sapContent_DragAndDropActiveColor)}:host([orientation="Vertical"]){margin-left:-.0625rem}:host([orientation="Horizontal"]) .ui5-di-needle{height:.125rem;width:100%;inset-inline:0;background:var(--sapContent_DragAndDropActiveColor)}:host([orientation="Horizontal"]){margin-top:-.0625rem}:host([orientation="Horizontal"][placement="Before"][first]){margin-top:.3125rem}:host([orientation="Horizontal"][placement="After"][last]){margin-top:-.3125rem}:host([orientation="Vertical"]) .ui5-di-needle:before{left:-.1875rem;content:"";position:absolute;width:.25rem;height:.25rem;border-radius:.25rem;border:.125rem solid var(--sapContent_DragAndDropActiveColor);background-color:#fff;pointer-events:none}:host([orientation="Horizontal"]) .ui5-di-needle:before{top:-.1875rem;content:"";position:absolute;width:.25rem;height:.25rem;border-radius:.25rem;border:.125rem solid var(--sapContent_DragAndDropActiveColor);background-color:#fff;pointer-events:none}:host .ui5-di-rect{border:.125rem solid var(--sapContent_DragAndDropActiveColor);position:absolute;inset:0}:host .ui5-di-rect:before{content:" ";position:absolute;inset:0;background:var(--sapContent_DragAndDropActiveColor);opacity:.05}\n`;var R=this&&this.__decorate||function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i;return o>3&&i&&Object.defineProperty(t,r,i),i};let I=class e extends r.b{get _positionProperty(){if(this.orientation===g.Vertical){return"left"}return"top"}constructor(){super();this.targetReference=null;this.ownerReference=null;this.placement="Before";this.orientation="Vertical"}onAfterRendering(){if(!this.targetReference||!this.ownerReference){Object.assign(this.style,{display:"none"});return}const{left:e,width:t,right:r,top:n,bottom:o,height:i}=this.targetReference.getBoundingClientRect();const{top:a,height:s}=this.ownerReference.getBoundingClientRect();const l={display:"",[this._positionProperty]:"",width:"",height:""};let c=0;let p=false;let d=false;if(this.orientation===g.Vertical){switch(this.placement){case u.Before:c=e;break;case u.On:l.width=`${t}px`;c=e;break;case u.After:c=r;break}l.height=`${i}px`}if(this.orientation===g.Horizontal){switch(this.placement){case u.Before:c=n;break;case u.On:l.height=`${i}px`;c=n;break;case u.After:c=o;break}l.width=`${t}px`;c-=a;if(c<=0){d=true}if(c>=s){p=true}}l[this._positionProperty]=`${c}px`;this.toggleAttribute("first",d);this.toggleAttribute("last",p);Object.assign(this.style,l)}};R([r.s({type:Object})],I.prototype,"targetReference",void 0);R([r.s({type:Object})],I.prototype,"ownerReference",void 0);R([r.s()],I.prototype,"placement",void 0);R([r.s()],I.prototype,"orientation",void 0);I=R([r.m({tag:"ui5-drop-indicator",renderer:o.y,styles:D,template:w})],I);I.define();var A=I;function H(){return o.jsxs("div",{part:"native-li",role:this.effectiveAccRole,tabindex:this.forcedTabIndex?parseInt(this.forcedTabIndex):undefined,class:{"ui5-ghli-root":true,...this.classes.main},"aria-label":this.ariaLabelText,"aria-roledescription":this.groupHeaderText,onFocusIn:this._onfocusin,onKeyDown:this._onkeydown,children:[o.jsx("div",{id:`${this._id}-content`,class:"ui5-li-content",children:O.call(this)}),this.hasSubItems&&o.jsx("slot",{name:"subItems"})]})}function O(){if(this.wrappingType===c.WrappingType.Normal){return this.expandableTextTemplate?.call(this,{className:"ui5-ghli-title",text:this._textContent,maxCharacters:this._maxCharacters,part:"title"})}return o.jsx("span",{part:"title",class:"ui5-ghli-title",children:o.jsx("slot",{})})}p.p("@"+"ui5"+"/"+"webcomponents-theming","sap_horizon",async()=>o.defaultThemeBase);p.p("@"+"u"+"i"+"5"+"/"+"w"+"e"+"b"+"c"+"o"+"m"+"p"+"o"+"n"+"e"+"n"+"t"+"s","sap_horizon",async()=>i.defaultTheme);var C=`.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host{height:var(--_ui5-v2-14-0-rc-7_group_header_list_item_height);background:var(--ui5-v2-14-0-rc-7-group-header-listitem-background-color);color:var(--sapList_TableGroupHeaderTextColor)}:host([wrapping-type="Normal"]){height:auto}:host([has-border]){border-bottom:var(--sapList_BorderWidth) solid var(--sapList_GroupHeaderBorderColor)}:host([actionable]:not([disabled])){cursor:default}.ui5-li-root.ui5-ghli-root{padding-top:.5rem;color:currentColor;font-size:var(--sapFontHeader6Size);font-weight:400;line-height:2rem;margin:0}.ui5-ghli-title{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:700;font-family:var(--sapFontHeaderFamily)}.ui5-li-content{width:100%}\n`;var E;(function(e){e["Group"]="Group";e["ListItem"]="ListItem";e["MenuItem"]="MenuItem";e["TreeItem"]="TreeItem";e["Option"]="Option";e["None"]="None"})(E||(E={}));var B=E;var j=this&&this.__decorate||function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i;return o>3&&i&&Object.defineProperty(t,r,i),i};var L;const k=100;const z=300;let P=L=class t extends s.ListItemBase{constructor(){super(...arguments);this.accessibleRole=B.ListItem;this.wrappingType="None";this.mediaRange="S"}get effectiveAccRole(){return a.n(this.accessibleRole)}get groupItem(){return true}get _pressable(){return false}get groupHeaderText(){return L.i18nBundle.getText(l.GROUP_HEADER_TEXT)}get defaultSlotText(){return this.textContent}get ariaLabelText(){return[this.textContent,this.accessibleName].filter(Boolean).join(" ")}get hasSubItems(){return this.subItems.length>0}onBeforeRendering(){super.onBeforeRendering();if(this.wrappingType==="Normal"){if(L.ExpandableTextTemplate){this.expandableTextTemplate=L.ExpandableTextTemplate}else{new Promise(function(t,r){e(["sap/ushell/thirdparty/_dynamics/ListItemStandardExpandableTextTemplate"],t,r)}).then(e=>{this.expandableTextTemplate=e.default})}}}get _maxCharacters(){return this.mediaRange==="S"?k:z}get _textContent(){return this.defaultSlotText||this.groupHeaderText||""}};j([r.s()],P.prototype,"accessibleName",void 0);j([r.s()],P.prototype,"accessibleRole",void 0);j([r.s()],P.prototype,"wrappingType",void 0);j([r.s()],P.prototype,"mediaRange",void 0);j([r.s({noAttribute:true})],P.prototype,"expandableTextTemplate",void 0);j([r.d()],P.prototype,"subItems",void 0);j([i.i("sap/ushell/gen/ui5/webcomponents")],P,"i18nBundle",void 0);P=L=j([r.m({tag:"ui5-li-group-header",languageAware:true,template:H,styles:[s.ListItemBase.styles,C]})],P);P.define();var N=P;function V(){return o.jsxs(o.Fragment,{children:[this.hasHeader&&o.jsxs(N,{wrappingType:this.wrappingType,focused:this.focused,part:"header",accessibleRole:B.ListItem,children:[this.hasFormattedHeader?o.jsx("slot",{name:"header"}):this.headerText,o.jsx("div",{role:"list",slot:"subItems","aria-owns":`${this._id}-content`,"aria-label":this.headerText})]}),o.jsxs("div",{class:"ui5-group-li-root",onDragEnter:this._ondragenter,onDragOver:this._ondragover,onDrop:this._ondrop,onDragLeave:this._ondragleave,id:`${this._id}-content`,children:[o.jsx("slot",{}),o.jsx(A,{orientation:"Horizontal",ownerReference:this})]})]})}p.p("@"+"ui5"+"/"+"webcomponents-theming","sap_horizon",async()=>o.defaultThemeBase);p.p("@"+"u"+"i"+"5"+"/"+"w"+"e"+"b"+"c"+"o"+"m"+"p"+"o"+"n"+"e"+"n"+"t"+"s","sap_horizon",async()=>i.defaultTheme);var M=`.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host{height:var(--_ui5-v2-14-0-rc-7_group_header_list_item_height);background:var(--ui5-v2-14-0-rc-7-group-header-listitem-background-color);color:var(--sapList_TableGroupHeaderTextColor)}.ui5-group-li-root{width:100%;height:100%;position:relative;box-sizing:border-box;padding:0;margin:0;list-style-type:none}\n`;var $=this&&this.__decorate||function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i;return o>3&&i&&Object.defineProperty(t,r,i),i};let G=class e extends r.b{constructor(){super();this.wrappingType="None";this.focused=false;this._dragAndDropHandler=new T(this,{getItems:()=>this.items,getDropIndicator:()=>this.dropIndicatorDOM,filterPlacements:this._filterPlacements.bind(this)})}get groupHeaderItem(){return this.shadowRoot.querySelector("[ui5-li-group-header]")}get hasHeader(){return!!this.headerText||this.hasFormattedHeader}get hasFormattedHeader(){return!!this.header.length}get isListItemGroup(){return true}get dropIndicatorDOM(){return this.shadowRoot.querySelector("[ui5-drop-indicator]")}_ondragenter(e){this._dragAndDropHandler.ondragenter(e)}_ondragleave(e){this._dragAndDropHandler.ondragleave(e)}_ondragover(e){this._dragAndDropHandler.ondragover(e)}_ondrop(e){this._dragAndDropHandler.ondrop(e)}_filterPlacements(e,t,r){if(r===t){return e.filter(e=>e!==u.On)}return e}getFocusDomRef(){return this.groupHeaderItem||this.items.at(0)}};$([r.s()],G.prototype,"headerText",void 0);$([r.s()],G.prototype,"headerAccessibleName",void 0);$([r.d({default:true,invalidateOnChildChange:true,type:HTMLElement})],G.prototype,"items",void 0);$([r.s()],G.prototype,"wrappingType",void 0);$([r.s({type:Boolean})],G.prototype,"focused",void 0);$([r.d({type:HTMLElement})],G.prototype,"header",void 0);G=$([r.m({tag:"ui5-li-group",renderer:o.y,languageAware:true,template:V,styles:[M]}),n.l("move-over",{bubbles:true,cancelable:true}),n.l("move",{bubbles:true})],G);G.define();const S=e=>"isListItemGroup"in e;var F=G;t.DragAndDropHandler=T;t.DropIndicator=A;t.ListItemAccessibleRole=B;t.ListItemGroup=F;t.ListItemGroupHeader=N;t.isInstanceOfListItemGroup=S;t.k=x});
//# sourceMappingURL=ListItemGroup.js.map