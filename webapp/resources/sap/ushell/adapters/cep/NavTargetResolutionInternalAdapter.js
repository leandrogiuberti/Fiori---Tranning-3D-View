// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/i18n/Localization","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/ushell/Container","sap/ushell/services/ClientSideTargetResolution/VirtualInbounds","sap/ushell/utils/HttpClient","sap/ushell/Config"],(t,e,jQuery,n,i,s,o)=>{"use strict";function r(t,e,n){this.oAdapterConfiguration=n;this._addVirtualInboundsToApplications();this._initializeHttpClient()}r.prototype._addVirtualInboundsToApplications=function(){const t=e.create("config.applications",this.oAdapterConfiguration);const n=i.getInbounds();n.forEach(e=>{const n=`${e.semanticObject}-${e.action}`;t[n]=e.resolutionResult})};r.prototype._getIntentForService=function(t){return n.getServiceAsync("URLParsing").then(e=>{const n=e.parseShellHash(t);return{semanticObject:n.semanticObject,semanticObjectAction:n.action,intentParameters:n.params,queryParameters:{siteId:o.last("/core/site/siteId")||""}}})};r.prototype._initializeHttpClient=function(){const e={"Content-Type":"application/json; charset=utf-8",Accept:"application/json","Accept-Language":t.getLanguageTag().toString()||""};const n=`${this.oAdapterConfiguration.config.navServiceUrl}/`;this.oHttpClient=new s(n,{headers:e})};r.prototype.toPromise=function(t){const e=this;return function(n){const i=new jQuery.Deferred;t.call(e,n).then(i.resolve).catch(i.reject).finally(i.always);return i.promise()}};r.prototype.resolveHashFragment=function(t){return this.toPromise(this._resolveHashFragment).call(this,t)};r.prototype._resolveHashFragment=function(t){return this._getIntentForService(t).then(t=>{const e=`${this.oAdapterConfiguration.config.navServiceUrl}/resolve`;return this.oHttpClient.post(e,{data:JSON.stringify(t)}).then(t=>{if(t.status<200||t.status>=300){throw new Error(`HTTP request to navigation service failed with status: ${t.status} - ${t.statusText}`)}return JSON.parse(t.responseText)}).then(t=>{const e=t.value||t;const n=Array.isArray(e)?e[0].url:e.url;return{additionalInformation:"",url:n,applicationType:"URL",navigationMode:"newWindow"}})})};r.prototype.isIntentSupported=function(t){const e={};const n=t.map(async t=>{const n=await this._resolveHashFragment(t).catch(()=>{});e[t]={supported:!!n}});const i=new jQuery.Deferred;Promise.all(n).then(()=>{i.resolve(e)});return i.promise()};return r},false);
//# sourceMappingURL=NavTargetResolutionInternalAdapter.js.map