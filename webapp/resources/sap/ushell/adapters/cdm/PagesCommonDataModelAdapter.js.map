{"version":3,"file":"PagesCommonDataModelAdapter.js","names":["sap","ui","define","Log","deepExtend","cdmSiteUtils","extend","Version","jQuery","Config","Container","PagesCommonDataModelAdapter","this","_oCDMPagesRequests","_oUnstableVisualizations","_sComponent","oSitePromise","Promise","resolve","reject","fnSiteResolve","fnSiteReject","prototype","getSite","oDeferred","Deferred","getServiceAsync","then","oNavigationDataProvider","getNavigationData","oNavigationData","oNavigationDataHashMap","aInbounds","inbounds","i","length","sInboundPermanentKey","permanentKey","id","oSite","_version","site","catalogs","groups","visualizations","applications","getApplications","vizTypes","systemAliases","pages","catch","oError","promise","getPage","async","sPageId","sErrorMessage","fatal","Error","all","aService","oPagePersistenceService","oNavigationDataProviderService","aResult","oPagePersistenceData","_addVisualizationsToSite","_addVizTypesToSite","_addPageToSite","page","_storeUnstableVisualizations","unstableVisualizations","oUnstableVisualizations","oData","oVizTypesToAdd","Object","keys","forEach","sVizTypeId","getVizTypes","oVisualizations","bCheckExistence","oVisualizationsToAdd","sVizId","getVisualizations","navigationData","oPage","identification","title","payload","layout","sectionOrder","sections","map","section","oSection","oPageSection","j","vizOrder","viz","oViz","bVisualizationMissing","k","vizId","aVizOrder","splice","indexOf","error","displayFormatHint","getPages","aPageIds","Array","isArray","aPageIdsToLoad","push","aServices","aPages","oAllLoadedPages","oRequestedPages","getPersonalization","CDMVersion","oPersonalizationService","oPersId","oCDMSiteVersion","container","item","inRange","oScope","validity","keyCategory","KeyCategory","GENERATED_KEY","writeFrequency","WriteFrequency","HIGH","clientStorageAllowed","oPersonalizer","getPersonalizer","getPersData","oPersonalizationContainer","setPersonalization","personalizationData","version","setPersData","oVisualizationDataProvider","getVisualizationData","aResults","oVisualizationData","getVizType","sVizType","oVizType","startsWith","loadVizType","oLoadedVizType","oVizTypes","getCachedVisualizations","getCachedVizTypes","migratePersonalizedPages","aPagesToSave","sSectionId","sVizRefId","oVizRef","oUnstableVisualization","includes"],"sources":["PagesCommonDataModelAdapter-dbg.js"],"mappings":"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","ignoreList":[]}