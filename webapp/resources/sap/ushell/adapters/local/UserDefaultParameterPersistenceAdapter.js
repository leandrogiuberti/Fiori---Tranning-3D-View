// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/Container"],(jQuery,e,r)=>{"use strict";function t(e,r,t){this._oConfig=t&&t.config;this._oContainerPromises={}}t.prototype._getPersonalizationService=function(){return r.getServiceAsync("PersonalizationV2")};t.prototype.saveParameterValue=function(r,t,n){const a=new jQuery.Deferred;if(!(typeof r==="string"&&r.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(r))){e.error(`Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :"${r}"`)}this._getUDContainer(n).done(e=>{e.setItemValue(r,t);e.save(50).then(a.resolve.bind(a)).catch(a.reject.bind(a))}).fail(r=>{e.error("Parameter save failed",r);a.reject(r)});return a.promise()};t.prototype.deleteParameter=function(r,t){const n=new jQuery.Deferred;if(!(typeof r==="string"&&r.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(r))){e.error(`Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :"${r}"`)}this._getUDContainer(t).done(e=>{e.deleteItem(r);e.save().then(n.resolve.bind(n)).catch(n.reject.bind(n))}).fail(r=>{e.error("Parameter delete failed",r);n.reject(r)});return n.promise()};t.prototype.loadParameterValue=function(r,t){const n=new jQuery.Deferred;this._getUDContainer(t).done(e=>{const t=e.getItemValue(r);if(t){n.resolve(t)}else{n.reject(new Error("no value "))}}).fail(r=>{e.error("Parameter load failed",r);n.reject(r)});return n.promise()};t.prototype.getStoredParameterNames=function(r){const t=new jQuery.Deferred;this._getUDContainer(r).done(e=>{const r=e.getItemKeys();t.resolve(r)}).fail(r=>{e.error("Parameter load failed",r);t.reject(r)});return t.promise()};t.prototype._getUDContainer=function(e){let r=e.id;if(r!==""){r=`.${r}`}if(!this._oContainerPromises[e.id]){const t=new jQuery.Deferred;this._oContainerPromises[e.id]=t.promise();this._getPersonalizationService().then(e=>{e.getContainer(`sap.ushell.UserDefaultParameter${r}`,{keyCategory:e.KeyCategory.FIXED_KEY,writeFrequency:e.WriteFrequency.LOW,clientStorageAllowed:true}).then(t.resolve).catch(t.reject)})}return this._oContainerPromises[e.id]};return t},false);
//# sourceMappingURL=UserDefaultParameterPersistenceAdapter.js.map