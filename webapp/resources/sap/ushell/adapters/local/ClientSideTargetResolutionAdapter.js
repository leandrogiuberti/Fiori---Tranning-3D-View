// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/Container"],(jQuery,e,t)=>{"use strict";function n(n,o,i){this._oConfig=i&&i.config;this._aInbounds=[];if(!this._oConfig){this._oSystemAliases={};e.warning("No configuration supplied!","","sap.ushell.adapters.local.ClientSideTargetResolutionAdapter")}else{if(this._oConfig.inbounds){this._aInbounds=this._transformInboundsObjectToInboundsArray(this._oConfig.inbounds)}if(this._oConfig.applications){Array.prototype.push.apply(this._aInbounds,this._transformApplicationsToInbounds(this._oConfig.applications))}if(this._aInbounds.length===0){e.warning("Adapter got no inbounds via configuration!","","sap.ushell.adapters.local.ClientSideTargetResolutionAdapter")}this._oSystemAliases=this._oConfig.systemAliases||{};e.debug("Adapter got no system aliases via configuration","","sap.ushell.adapters.local.ClientSideTargetResolutionAdapter")}const s=t.getLogonSystem().getProductName()||"";this._oLocalSystemAlias={http:{host:"",port:0,pathPrefix:"/sap/bc/"},https:{host:"",port:0,pathPrefix:"/sap/bc/"},rfc:{systemId:"",host:"",service:0,loginGroup:"",sncNameR3:"",sncQoPR3:""},id:"",label:"local",client:"",language:"",properties:{productName:s}}}n.prototype.getInbounds=function(){const e=new jQuery.Deferred;const t=this;setTimeout(()=>{e.resolve(t._aInbounds)},0);return e.promise()};n.prototype.resolveSystemAlias=function(e){const t=new jQuery.Deferred;setTimeout(()=>{if(this._oSystemAliases.hasOwnProperty(e)){t.resolve(this._oSystemAliases[e])}else if(e===""){t.resolve(this._oLocalSystemAlias)}else{t.reject(new Error("No system alias value available"))}},0);return t.promise()};n.prototype._transformApplicationsToInbounds=function(t){let n;const o=[];let i;let s;let a;function l(e,t){if(e==="NWBC"&&t){if(t.indexOf("/~canvas;window=app/wda")>=0){return"WDA"}return"TR"}return e}for(n in t){if(t.hasOwnProperty(n)&&n.indexOf("_")!==0){s={};if(n.indexOf("-")>-1){a=n.split("-",2);s.semanticObject=a[0];s.action=a[1]}else if(n===""){s.semanticObject="";s.action=""}else{e.warning(`Excluded syntactically incorrect intent '${n}' from inbounds array`,"","sap.ushell.adapters.local.ClientSideTargetResolutionAdapter");continue}i=t[n];s.title=i.description||"";s.signature={parameters:{}};s.signature.additionalParameters="allowed";s.resolutionResult={};s.resolutionResult.applicationType=l(i.applicationType,i.url);s.resolutionResult.additionalInformation=i.additionalInformation||"";if(s.resolutionResult.additionalInformation&&s.resolutionResult.additionalInformation.indexOf("SAPUI5.Component=")!==-1){s.resolutionResult.applicationType="SAPUI5";s.resolutionResult.ui5ComponentName=s.resolutionResult.additionalInformation.split("SAPUI5.Component=",2)[1];if(i.applicationDependencies){s.resolutionResult.applicationDependencies=i.applicationDependencies}else{s.resolutionResult.applicationDependencies={self:{name:s.resolutionResult.ui5ComponentName},asyncHints:{libs:[{name:"sap.ui.core"},{name:"sap.ui.unified"}]}}}}s.resolutionResult.url=i.url;o.push(s)}}return o};n.prototype._transformInboundsObjectToInboundsArray=function(e){let t;const n=[];let o;for(t in e){if(e.hasOwnProperty(t)){o=e[t];if(o.resolutionResult.additionalInformation&&o.resolutionResult.additionalInformation.indexOf("SAPUI5.Component=")!==-1){o.resolutionResult.ui5ComponentName=o.resolutionResult.additionalInformation.split("SAPUI5.Component=",2)[1];if(!o.resolutionResult.hasOwnProperty("applicationDependencies")){o.resolutionResult.applicationDependencies={self:{name:o.resolutionResult.ui5ComponentName},asyncHints:{libs:[{name:"sap.ui.core"},{name:"sap.ui.unified"}]}}}}n.push(e[t])}}return n};return n},false);
//# sourceMappingURL=ClientSideTargetResolutionAdapter.js.map