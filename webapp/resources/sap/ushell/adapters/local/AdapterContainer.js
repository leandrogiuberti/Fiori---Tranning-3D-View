// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/thirdparty/jquery","sap/ui/util/Storage","sap/ushell/utils"],(jQuery,e,t)=>{"use strict";let s;function n(){return new e(e.Type.local,"com.sap.ushell.adapters.sandbox.Personalization")}function o(e){try{return JSON.parse(e)}catch{return undefined}}function r(e){return JSON.stringify(e)}function i(e){if(e===undefined){return undefined}try{return JSON.parse(JSON.stringify(e))}catch{return undefined}}function a(e,n,o){s=o;this._sContainerKey=e;this._sStorageType=n;this._oItemMap=new t.Map}a.prototype.constants={storage:{MEMORY:"MEMORY",LOCAL_STORAGE:"LOCAL_STORAGE"}};a.prototype.load=function(){const e=new jQuery.Deferred;switch(this._sStorageType){case this.constants.storage.LOCAL_STORAGE:const t=n();setTimeout(()=>{const s=t.get(this._sContainerKey);this._oItemMap.entries=o(s)||{};e.resolve(this)},0);break;case this.constants.storage.MEMORY:setTimeout(()=>{this._oItemMap.entries=i(s[this._sContainerKey])||{};e.resolve(this)},0);break;default:setTimeout(()=>{e.reject(new Error("unknown storage type"))},0)}return e.promise()};a.prototype.save=function(){const e=new jQuery.Deferred;switch(this._sStorageType){case this.constants.storage.LOCAL_STORAGE:const t=n();setTimeout(()=>{const s=r(this._oItemMap.entries);t.put(this._sContainerKey,s);e.resolve()},0);break;case this.constants.storage.MEMORY:setTimeout(()=>{s[this._sContainerKey]=i(this._oItemMap.entries);e.resolve()},0);break;default:setTimeout(()=>{e.reject(new Error("unknown storage type"))},0)}return e.promise()};a.prototype.del=function(){const e=new jQuery.Deferred;switch(this._sStorageType){case this.constants.storage.LOCAL_STORAGE:const t=n();setTimeout(()=>{t.remove(this._sContainerKey);this._oItemMap.entries={};e.resolve()},0);break;case this.constants.storage.MEMORY:setTimeout(()=>{if(s&&s[this._sContainerKey]){delete s[this._sContainerKey]}this._oItemMap.entries={};e.resolve()},0);break;default:setTimeout(()=>{e.reject(new Error("unknown storage type"))},0)}return e.promise()};a.prototype.getItemKeys=function(){return this._oItemMap.keys()};a.prototype.containsItem=function(e){return this._oItemMap.containsKey(e)};a.prototype.getItemValue=function(e){return this._oItemMap.get(e)};a.prototype.setItemValue=function(e,t){this._oItemMap.put(e,t)};a.prototype.delItem=function(e){this._oItemMap.remove(e)};return a},false);
//# sourceMappingURL=AdapterContainer.js.map