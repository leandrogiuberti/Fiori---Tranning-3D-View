// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/m/GroupHeaderListItem","sap/ui/base/ManagedObject","sap/base/util/uid","sap/base/util/each"],(t,e,n,s)=>{"use strict";const i={};i.updateAggregation=function(t){if(this.isTreeBinding(t)){e.prototype.updateAggregation.apply(this,arguments)}else{const s=this.mBindingInfos[t];const o=s.binding;const r=o.getContexts();const a=s.factory;const g=this.getMetadata().getJSONKeys()[t];const d=`${g._sMutator}Group`;const l=o.isGrouped()&&this[d];let u=[];const p=function(t){const e=`${this.getId()}-${n()}`;const i=a(e,t);if(i.isA("sap.ui.integration.widgets.Card")){i.setBindingContext(t,"ushellCardModel")}else{i.setBindingContext(t,s.model)}this[g._sMutator](i)}.bind(this);if(l){e.prototype.updateAggregation.apply(this,arguments)}else{u=this[g._sGetter]();i._adaptCurrentGroup(r,u);i._updateCurrentGroup(r,u,s.model,p);u.length=r.length}}};i._adaptCurrentGroup=function(t,e){let n;let s;let i;for(n=0;n<t.length;n++){s=!!(e[n]&&e[n].isA("sap.ui.integration.widgets.Card"));i=!!t[n].getProperty(`${t[n].sPath}/isCard`);if(s||i){let t=n;for(;t<e.length;t++){e[t].destroy()}break}}};i._updateCurrentGroup=function(t,e,n,s){let i;for(i=0;i<t.length;i++){if(i<e.length&&!e[i].bIsDestroyed){e[i].setBindingContext(t[i],n)}else{s(t[i])}}for(;i<e.length;++i){e[i].destroy()}};i.updateAggregationGrouped=function(e){const n=this.mBindingInfos[e];const i=n.binding;const o=n.factory;let r;let a=null;let g=null;let d=null;const l=this;let u=l.getItems();let p=0;let c=0;let f;let h;const y=[];g=i.isGrouped()&&this.addItemGroup;s(i.getContexts(),(e,m)=>{if(g&&i.aSorters.length>0){a=i.aSorters[0].fnGroup(m);if(typeof a==="string"){a={key:a}}if(a.key!==d){let e;if(n.groupHeaderFactory){e=n.groupHeaderFactory(a)}const s=e||new t({title:a.text||a.key}).addStyleClass("sapMListHdr");l.insertAggregation("items",s,c,true);c=c+1;d=a.key}}u=l.getItems();for(f=c;f<u.length;f=f+1){if(u[f].constructor===t){y.push(l.removeItem(u[f]));u=l.getItems()}}if(c<u.length){u[c].setBindingContext(m,n.model);if(u[c].aDelegates){s(u[c].aDelegates,(t,e)=>{e.vThis=m})}}else{h=`${l.getId()}-${c}`;r=o(h,m);r.setBindingContext(m,n.model);l.addItem(r)}c=c+1;p=c});for(f=u.length-1;f>=p;f=f-1){y.push(l.removeItem(u[f]))}setTimeout(()=>{s(y,(t,e)=>{e.destroy()})},1)};i.updateAggregatesFactory=function(t){return function(){i.updateAggregation.bind(this)(t)}};return i},false);
//# sourceMappingURL=override.js.map