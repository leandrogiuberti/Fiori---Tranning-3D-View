// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/Component","sap/ushell/appRuntime/ui5/plugins/baseRta/AppLifeCycleUtils","sap/ushell/appRuntime/ui5/plugins/baseRta/CheckConditions","sap/ushell/appRuntime/ui5/plugins/baseRta/Trigger"],(t,i,e,n)=>{"use strict";const o=t.extend("sap.ushell.plugins.BaseRTAPlugin",{sType:null,init:function(t){this.mConfig=t;this.mConfig.i18n=this.getModel("i18n").getResourceBundle();this.mConfig.loadPlugins=this._loadPlugins.bind(this);this.mConfig.onStartHandler=this._onStartHandler.bind(this);this.mConfig.onErrorHandler=this._onErrorHandler.bind(this);this.mConfig.onStopHandler=this._onStopHandler.bind(this);this.oTrigger=new n(this.mConfig);this._oPluginPromise=(async()=>{await this.oTrigger.getInitPromise();if(this.mConfig.checkRestartRTA&&e.checkRestartRTA(this.mConfig.layer)){await this.oTrigger.triggerStartRta(this)}const t=await i.getAppLifeCycleService();await t.attachAppLoaded(this._onAppLoaded,this)})()},getPluginPromise:function(){return this._oPluginPromise},exit:function(){this._oPluginPromise=this._oPluginPromise.then(i.getAppLifeCycleService).then(t=>{t.detachAppLoaded(this._onAppLoaded,this);if(this._onRendererCreated){const t=i.getContainer();t.detachRendererCreatedEvent(this._onRendererCreated,this)}})},_onAppLoaded:async function(){if(await e.checkRtaPrerequisites()){if(e.checkRestartRTA(this.mConfig.layer)){this.oTrigger.triggerStartRta(this)}this._setButtonVisibility(true)}else{this._setButtonVisibility(false)}},_onAdapt:function(){return this.oTrigger.triggerStartRta(this)},_setButtonVisibility:function(t){if(!this.oActionButton){return}if(t){this.oActionButton.showForAllApps();this.oActionButton.showOnHome()}else{this.oActionButton.hideForAllApps();this.oActionButton.hideOnHome()}},_exitAdaptation:function(){if(this._switchToDefaultMode){this._switchToDefaultMode()}this.oTrigger.exitRta()},_onStartHandler:function(){},_onErrorHandler:function(){this._exitAdaptation()},_onStopHandler:function(){this._exitAdaptation()},_loadPlugins:function(){return Promise.resolve()}});return o},true);
//# sourceMappingURL=BaseRTAPlugin.js.map