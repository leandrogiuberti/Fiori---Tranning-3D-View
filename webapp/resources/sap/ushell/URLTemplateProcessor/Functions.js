// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/util/deepExtend","sap/ui/thirdparty/URI","sap/ushell/URLTemplateProcessor/utils","sap/ushell/utils/type"],(e,n,t,r)=>{"use strict";function i(e){if(typeof e==="undefined"){return true}if(typeof e==="string"){return e===""}if(typeof e==="object"){return Object.keys(e).length===0}if(typeof e==="number"){return e===0}if(typeof e==="boolean"){return e===false}throw new Error("Unexpected type for value")}function o(e){let n;if(r.isArray(e)){n=e}else if(r.isPlainObject(e)){n=[e]}else if(e===undefined){return[]}else{throw new Error("Unexpected type")}return n}const u={url:{args:["urlPart?"],minValues:0,maxValues:0,fn:function(e){let r;const i=t.getURIHashContext();if(typeof i==="string"){const e=location.hash?location.href.split(location.hash)[0]:location.href;r=new n(e+i)}else{r=new n}const o=["protocol","scheme","username","password","hostname","port","host","userinfo","authority","origin","subdomain","domain","tld","pathname","path","directory","filename","suffix","search","query","hash","fragment","resource"];let u="toString";if(e.urlPart){if(o.indexOf(e.urlPart)===-1){throw new Error(`The URL part '${e.urlPart}' is not valid. Please use one of ${o.join(", ")}`)}u=e.urlPart}return r[u]()}},if:{args:["trueCondition"],minValues:1,maxValues:2,fn:function(e,n){const t=o(n);if(i(e.trueCondition)){return t.length===1?undefined:t.pop()}return t[0]}},and:{args:["emptyCondition?"],minValues:1,fn:function(e,n){const r=o(n);if(typeof e.emptyCondition==="undefined"&&e.length>0){return undefined}if(typeof e.emptyCondition!=="undefined"&&i(e.emptyCondition)){return undefined}const u=r.pop();const s=r.every(t.hasValue);return s?u:undefined}},or:{args:["emptyCondition?"],minValues:1,fn:function(e,n){const r=o(n);if(typeof e.emptyCondition==="undefined"&&e.length>0){return undefined}if(typeof e.emptyCondition!=="undefined"&&i(e.emptyCondition)){return undefined}return r.reduce((e,n)=>{if(t.hasValue(e)){return e}return t.hasValue(n)?n:undefined})}},replace:{args:["strRegExp","strReplace","flags?"],minValues:1,maxValues:1,fn:function(e,n){const t=new RegExp(e.strRegExp,e.flags);const i=e.strReplace||"";if(typeof n===undefined||n===null){return n}if(r.isArray(n)){if(n.length===1){return u.replace.fn.call(this,e,n[0])}return n.map(function(n){return u.replace.fn.call(this,e,n)})}if(r.isPlainObject(n)){return Object.keys(n).reduce(function(t,r){const i=n[r];t[r]=u.replace.fn.call(this,e,i);return t},{})}if(typeof n==="string"){return n.replace(t,i)}return u.replace.fn.call(this,e,`${n}`)}},join:{args:["macroSeparator?","microSeparator?"],minValues:1,fnPipe:function(e,n){const t=[n];return u.join.fn.call(this,e,t)},fn:function(e,n){const i=e.macroSeparator||"";const o=e.microSeparator||"";n=n.map(e=>{if(!r.isPlainObject(e)&&!r.isArray(e)){return e}const n=Object.prototype.toString.apply(e);if(n==="[object Object]"){const n=t.removeArrayParameterNotation(e);return Object.keys(n).sort().map(n=>n+o+e[n]).join(i)}if(n==="[object Array]"){return e.join(i)}});return n.join(i)}},match:{args:["strRegex"],minValues:1,fnPipe:function(e,n){const t=e.strRegex;const r=new RegExp(t);return Object.keys(n).reduce((e,t)=>{if(r.exec(t)){e[t]=n[t]}return e},{})},fn:function(e,n){if(n===undefined){return undefined}const t=e.strRegex;const i=new RegExp(t);const o=n.filter(e=>{let n;if(r.isPlainObject(e)){n=Object.keys(e)}else if(r.isArray(e)){n=e}else{n=[`${e}`]}return n.some(i.exec.bind(i))});return o.length===n.length?true:undefined}},value:{args:["name"],minValues:1,fnPipe:function(e,n){if(r.isPlainObject(n)&&n.hasOwnProperty(e.name)){const t=n[e.name];return r.isArray(t)&&t.length>0&&t[0]}return undefined}},not:{args:[],minValues:1,fnPipe:function(e,n){return Object.keys(n).length>0?undefined:""},fn:function(e,n){const t=u.and.fn(e,n);return t===undefined?"":undefined}},stringify:{args:[],minValues:1,fn:function(e,n){if(r.isArray(n)){if(n.length===0){return""}if(n.length===1){n=n[0]}}if(typeof n==="string"){return n}return JSON.stringify(n)}},encodeURIComponent:{args:[],minValues:1,maxValues:1,fnPipe:function(e,n){return Object.keys(n).reduce((e,t)=>{e[t]=encodeURIComponent(n[t]);return e},{})},fn:function(e,n){const t=n[0];if(typeof t!=="string"){return t}return encodeURIComponent(t)}}};function s(e,n,t){if(t!==undefined&&!r.isPlainObject(t)){throw new Error(`Invalid value type passed to '${e}' in pipe context. An object is expected.`)}}function a(e,n,i){if(i!==undefined&&!r.isArray(i)){throw new Error(`Invalid value type passed to '${e}' in value context. An array is expected.`)}const o=r.isArray(i)?i.length:0;if(t.hasValue(n.maxValues)&&o>n.maxValues){throw new Error(`Too many values were passed to '${e}'. Please pass maximum ${n.maxValues} values.`)}if(t.hasValue(n.minValues)&&o<n.minValues){throw new Error(`Too few values were passed to '${e}'. Please pass minimum ${n.minValues} values.`)}}function f(e){return e.charAt(e.length-1)!=="?"}function l(e){let n=false;e.map(f).reduce((e,t)=>{if(!e&&t){n=true}return t},true);return n}function c(e){return e.substr(0,e.length-1)}function p(n,t){const r=e([],u[n].args);if(l(r)){throw new Error("Invalid argument signature. Make sure all optional arguments appear in the end.")}const i={length:t.length};const o=r.filter(f);const s=o>t.length;if(s){throw new Error(`${n} requires ${o} arguments but ${t.length} was specified`)}t.forEach(e=>{let n=r.shift();const o=!f(n);if(o){n=c(n)}if(t.length>0){i[n]=e}});return i}function d(e,n,t,r){if(!u.hasOwnProperty(n)){throw new Error(`Invalid function: ${n}`)}const i=p(n,t);if(e){s(n,u[n],r)}else{a(n,u[n],r)}if(e){if(!u[n].fnPipe){throw new Error(`The function '${n}' cannot be executed in pipe context`)}return u[n].fnPipe(i,r)}return u[n].fn(i,r)}function m(e){return e.split("").map(e=>{if(e==="["){return"[\\[]"}return`[${e}]`}).join("")}function h(){const e=Object.keys(u);return e.map(m).join("|")}return{getPossibleFunctionsRegExpString:h,applyFunctionInValueContext:d.bind(null,false),applyFunctionInPipeContext:d.bind(null,true),_setURIDependency:function(e){n=e}}});
//# sourceMappingURL=Functions.js.map