// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/services/CrossApplicationNavigation","sap/ushell/services/appstate/AppState","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/appRuntime/ui5/services/Container","sap/ushell/appRuntime/ui5/AppCommunicationMgr","sap/ushell/appRuntime/ui5/AppRuntimeContext","sap/base/util/deepClone","sap/ushell/utils/UrlParsing"],(e,s,jQuery,t,i,n,a,r,o)=>{"use strict";function p(p,l,c){e.call(this,p,l,c);this.backToPreviousApp=function(){if(a.checkDataLossAndContinue()){return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.backToPreviousApp")}};this.expandCompactHashLocal=this.expandCompactHash;this.expandCompactHash=function(e){if(a.getIsScube()){return this.expandCompactHashLocal(e)}return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.expandCompactHash",{sHashFragment:e})};this.getDistinctSemanticObjectsLocal=this.getDistinctSemanticObjects;this.getDistinctSemanticObjects=function(){if(a.getIsScube()){return this.getDistinctSemanticObjectsLocal()}return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getDistinctSemanticObjects")};this.getLinksLocal=this.getLinks;this._combineResults=function(e,s){const t=e.map(e=>e[0]);const i=s.map(e=>e[0]);const n=t.map((e,s)=>i[s].concat(t[s]));return n.map(e=>[e])};this.getLinks=function(e){const s=new jQuery.Deferred;function t(e){if(Array.isArray(e)){e.forEach(e=>{if(e[0]){delete e[0].ui5Component}})}else{delete(e||{}).ui5Component}}if(a.getIsScube()){this.getLinksLocal(e).then(i=>{t(e);n.postMessageToFLP("sap.ushell.services.CrossApplicationNavigation.getLinks",e).then(t=>{if(Array.isArray(e)){const e=this._combineResults(i,t);s.resolve(e)}else{s.resolve(t.concat(i))}})})}else{t(e);n.postMessageToFLP("sap.ushell.services.CrossApplicationNavigation.getLinks",e).then(s.resolve).catch(s.reject)}return s.promise()};this.getPrimaryIntent=function(e,s){return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getPrimaryIntent",{sSemanticObject:e,mParameters:s})};this.getSemanticObjectLinks=function(e,s,t,i,a,r){return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getSemanticObjectLinks",{sSemanticObject:e,mParameters:s,bIgnoreFormFactor:t,sAppStateKey:a,bCompactIntents:r})};this.historyBack=function(e){if(a.checkDataLossAndContinue()){n.postMessageToFLP("sap.ushell.services.CrossApplicationNavigation.historyBack",{iSteps:e})}};this.isIntentSupported=function(e,s){if(a.getIsScube()){const t=new jQuery.Deferred;i.getServiceAsync("NavTargetResolutionInternal").then(i=>{i.isIntentSupported(e,s).done(t.resolve,t.reject)});return t.promise()}return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.isIntentSupported",{aIntents:e})};this.isNavigationSupported=function(e,s,t){function o(e){return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.isNavigationSupported",{aIntents:e})}if(t===true){return o(e)}if(a.getIsScube()){const t=new jQuery.Deferred;const n=e.map(e=>{if(typeof e==="object"){let s=e;if(e.params&&e.params.hasOwnProperty("sap-app-origin")){s=r(e);delete s.params["sap-app-origin"]}return s}return e});i.getServiceAsync("NavTargetResolutionInternal").then(e=>{e.isNavigationSupported(n,s).done(t.resolve,t.reject)});return t.promise()}return o(e)};this.toExternal=function(e,s){if(a.getIsScube()){if(e.target&&e.target.shellHash){const s=o.parseShellHash(e.target.shellHash);if(s.params){delete s.params["sap-app-origin"];e.target.shellHash=o.constructShellHash(s)}}else if(e.params){delete e.params["sap-app-origin"]}i.getServiceAsync("ShellNavigationInternal").then(t=>{t.toExternal(e,s)})}else if(a.checkDataLossAndContinue()){n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.toExternal",{oArgs:e})}return(new jQuery.Deferred).resolve().promise()};this.getAppState=function(e,t){const a=new jQuery.Deferred;n.postMessageToFLP("sap.ushell.services.CrossApplicationNavigation.getAppState",{sAppStateKey:t}).then(e=>{i.getServiceAsync("AppState").then(t=>{const i=new s(t,e._sKey,e._bModifiable,e._sData,e._sAppName,e._sACHComponent,e._bTransient);a.resolve(i)})});return a.promise()};this.resolveIntentLocal=this.resolveIntent;this.resolveIntent=function(e){if(a.getIsScube()){return this.resolveIntentLocal(e)}return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.resolveIntent",{sHashFragment:e})};this.hrefForExternalAsync=function(e){return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.hrefForExternal",{oArgs:e})};this.hrefForAppSpecificHashAsync=function(e){return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.hrefForAppSpecificHash",{sAppHash:e})};this.isInitialNavigation=function(){t.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.isInitialNavigation'. Please use 'isInitialNavigationAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");return false};this.isInitialNavigationAsync=function(){return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.isInitialNavigation",{})}}p.prototype=e.prototype;p.hasNoAdapter=e.hasNoAdapter;return p},true);
//# sourceMappingURL=CrossApplicationNavigation.js.map