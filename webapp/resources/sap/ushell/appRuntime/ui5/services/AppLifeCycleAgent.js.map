{"version":3,"file":"AppLifeCycleAgent.js","names":["sap","ui","define","Log","extend","UriParameters","assert","EventBus","URI","Device","BusyIndicator","EventHub","hasher","ushellUtils","UrlParsing","resources","Container","AppRuntimeContext","AppCommunicationMgr","FesrEnhancer","AppLifeCycleAgent","that","this","sAppResolutionModule","oAppResolution","bEnableAppResolutionCache","oAppResolutionCache","fnCreateApplication","oCachedApplications","oRouterDisableRetriggerApplications","oAppDirtyStateProviders","oAppBackNavigationFunc","oRunningApp","fnRenderApp","oShellUIService","sDatalossMessage","init","sModule","ofnCreateApplication","ofnRenderApp","bEnableCache","sAppId","oAppInfo","resetCurrentApp","undefined","addAppInfoToCache","oRequestHandlers","handler","oMessageBody","oMessageEvent","create","destroy","store","restore","Object","keys","forEach","sServiceRequest","setRequestHandler","on","do","oData","componentId","disable","_sendAppRuntimeSetup","i18n","getText","window","onbeforeunload","getDirtyFlag","oAppRuntimeFullSetup","isStateful","isKeepAlive","isIframeValid","session","bLogoutSupport","oAppRuntimeMinSetup","postMessageToFLP","ui5appruntime","config","stateful","async","sAppIntent","oParsedShellIntent","sScubeAppIntent","startInteraction","sUrl","getIsScube","fromURL","get","sHash","indexOf","parseShellHash","params","disableCFLPUpdate","replaceHash","browser","chrome","show","_resetBackNavigationCallback","getInstance","publish","getAppInfo","sUi5ComponentName","oResolvedHashFragment","ui5ComponentName","name","sKeepAliveAppKey","find","sCachedKey","length","sCacheId","oURLParameters","expandSapIntentParams","query","oCreateApplicationResult","oParsedHash","deletedKeepAliveId","appDestroy","oApplication","sId","oError","error","document","URL","sStorageKey","oApp","bValue","cleanDirtyStateProviderArray","setAppShortId","oCachedEntry","cloneCurrentAppEntry","_getBackNavigationCallback","getComponentInstance","setVisible","getAsyncDirtyStateProviders","isKeepAliveSupported","deactivate","suspend","getRouter","stop","bRouterDisableRetrigger","setAsyncDirtyStateProviders","setBackNavigation","activate","initialize","setTimeout","info","oAppAttributes","oUrlParameters","hasOwnProperty","sAppStateKey","sParameters","oUrlParametersExpanded","addAppParamsToIntent","getApplicationParameters","oStartupParameters","sSapIntentParam","sStartupParametersWithoutSapIntentParam","buildFinalParamsString","sSimpleParams","sIntentParams","sParams","startsWith","toString","sMoreParams","fnGetAppInfo","removeSearch","NavTargetResolutionInternal","getServiceAsync","oDeferred","resolveHashFragmentLocal","promisify","JSON","parse","stringify","oModule","requireAsync","replace","setCurrentApp","setCurrentAppAttributes","oEntry","setShellUIService","oService","checkDataLossAndContinue","confirm","setDirtyFlag"],"sources":["AppLifeCycleAgent-dbg.js"],"mappings":"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","ignoreList":[]}