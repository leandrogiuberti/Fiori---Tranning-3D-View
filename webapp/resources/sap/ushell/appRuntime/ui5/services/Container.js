// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/Container","sap/ushell/appRuntime/ui5/AppCommunicationMgr","sap/ushell/utils","sap/base/assert"],function(t,e,n,r){"use strict";let i;let o;let u;let s=false;let a=[];let l=[];let c=[];let f=false;t.inAppRuntime=function(){return true};t.runningInIframe=this.inAppRuntime;t.getFLPUrl=function(t){return e.postMessageToFLP("sap.ushell.services.Container.getFLPUrl",{bIncludeHash:t})};t.getFLPUrlAsync=function(t){return n.toDeferred(this.getFLPUrl(t))};t.getRenderer=function(){return u};t.getRendererInternal=function(){return u};t.logout=function(){return i.logout()};t.getFLPPlatform=function(){return e.sendMessageToOuterShell("sap.ushell.services.Container.getFLPPlatform")};t.extendSession=function(){o?.userActivityHandler()};t.setDirtyFlag=function(t){s=t};t.getDirtyFlag=function(){return s||this.handleDirtyStateProvider()};t.registerDirtyStateProvider=function(t){if(typeof t!=="function"){throw new Error("fnDirty must be a function")}a.push(t)};t.handleDirtyStateProvider=function(t){let e=false;if(a.length>0){const n=t||this._oShellNavigationInternal.getNavigationContext();for(let t=0;t<a.length&&e===false;t++){e=e||(a[t](n)||false)}}return e};t.deregisterDirtyStateProvider=function(t){if(typeof t!=="function"){throw new Error("fnDirty must be a function")}let e=-1;for(let n=a.length-1;n>=0;n--){if(a[n]===t){e=n;break}}if(e>=0){a.splice(e,1)}};t.cleanDirtyStateProviderArray=function(){a=[];s=false};this.setAsyncDirtyStateProvider=function(){};t.getAsyncDirtyStateProviders=function(){return a};t.setAsyncDirtyStateProviders=function(t){a=t};function g(t,e){let n=false;for(let r=0;r<t.length;r++){if(t[r]===e){n=true;break}}if(!n){t.push(e)}}t.attachLogoutEvent=function(t,n){r(typeof t==="function","Container.attachLogoutEvent: fnFunction must be a function");if(n===true){g(l,t)}else{g(c,t)}if(!f){f=true;e.postMessageToFLP("sap.ushell.services.Container.attachLogoutEvent",{})}};t._getAsyncFunctionsArray=function(){return l};t._getSyncFunctionsArray=function(){return l};t.executeAsyncAndSyncLogoutFunctions=function(){return new Promise((t,e)=>{const n=[];if(c.length>0){for(let t=0;t<c.length;t++){c[t]()}}if(l.length>0){for(let t=0;t<l.length;t++){n.push(l[t]())}}Promise.all(n).then(t)})};function h(t,e){for(let n=0;n<t.length;n++){if(t[n]===e){t.splice(n,1);break}}}t.detachLogoutEvent=function(t){h(c,t);h(l,t)};t._getAsyncFunctionsArray=function(){return l};t._getSyncFunctionsArray=function(){return c};t._clearAsyncFunctionsArray=function(){l=[]};t._clearSyncFunctionsArray=function(){c=[]};const p=t.init.bind(t);t.init=function(e,n){return new Promise(r=>{sap.ui.require(["sap/ushell/appRuntime/ui5/SessionHandlerAgent","sap/ushell/appRuntime/ui5/renderers/fiori2/Renderer","sap/ushell/appRuntime/ui5/ui/UIProxy"],(s,a)=>{o=s;u=a;p(e,n).then(()=>{i=t._getAdapter();return t.getServiceAsync("ShellNavigationInternal")}).then(e=>{t._oShellNavigationInternal=e;r()})})})};return t},false);
//# sourceMappingURL=Container.js.map