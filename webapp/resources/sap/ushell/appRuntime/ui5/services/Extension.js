// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/base/util/isPlainObject","sap/ui/core/Element","sap/ushell/appRuntime/ui5/services/Extension/Item","sap/ushell/appRuntime/ui5/AppCommunicationMgr"],(e,t,o,s,i)=>{"use strict";function r(){this._oItemMap={};const e={"sap.ushell.services.Extension.handleControlEvent":{handler:async(e,t)=>{const{itemId:o,eventName:s}=e;const i=this._oItemMap[o];if(i){i.handleEvent(s)}}}};Object.keys(e).forEach(t=>{i.setRequestHandler(t,e[t].handler)})}r.prototype._extractControlProperties=function(e){const o={primitive:{},complex:{},events:{}};Object.keys(e).forEach(s=>{const i=e[s];if(typeof i==="function"){o.events[s]=i}else if(typeof i==="object"){if(t(i)){o.primitive[s]=i}else{o.complex[s]=i}}else{o.primitive[s]=i}});return o};r.prototype.createHeaderItem=async function(t,r={}){if(t.id){if(o.getElementById(t.id)){throw new Error("The control id is not allowed for header items! The id will be generated automatically and must not be set by the application.")}e.error("The control id is not allowed for header items! The id will be generated automatically.");delete t.id}const n=this._extractControlProperties(t);if(Object.keys(n.complex).length>0){throw new Error("Complex properties (aggregations, controls, non plain objects) are not allowed for header items!")}const{itemId:a}=await i.postMessageToFLP("sap.ushell.services.Extension.createHeaderItem",{controlProperties:n.primitive,events:Object.keys(n.events),parameters:r});const l=new s(a,n.events);this._oItemMap[a]=l;return l};r.prototype.createUserAction=async function(t,r={}){if(t.id){if(o.getElementById(t.id)){throw new Error("The control id is not allowed for header items! The id will be generated automatically and must not be set by the application.")}e.error("The control id is not allowed for header items! The id will be generated automatically.");delete t.id}const n=this._extractControlProperties(t);if(Object.keys(n.complex).length>0){throw new Error("Complex properties (aggregations, controls, non plain objects) are not allowed for user actions!")}const{itemId:a}=await i.postMessageToFLP("sap.ushell.services.Extension.createUserAction",{controlProperties:n.primitive,events:Object.keys(n.events),parameters:r});const l=new s(a,n.events);this._oItemMap[a]=l;return l};r.prototype.setSecondTitle=function(e){return i.postMessageToFLP("sap.ushell.services.Extension.setSecondTitle",{title:e})};r.hasNoAdapter=true;return r});
//# sourceMappingURL=Extension.js.map