// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/Device","sap/ushell/Container","sap/ushell/EventHub","sap/ushell/services/AppConfiguration","sap/ushell/state/StateManager"],(t,e,n,i,s)=>{"use strict";const a=s.Operation;class o{#t=()=>{throw new Error("ContentDensity is not initialized")};#e=false;#n=[];constructor(){this.#i()}async init(){if(this.#e){return}this.#e=true;this.#t=this.#s.bind(this);this.#n.push(n.on("toggleContentDensity").do(this.#t));const t=await e.getServiceAsync("AppLifeCycle");t?.attachAppLoaded(this.#t);await this.#s();s.refreshState("application.contentDensity")}#i(){const t=this.#a();const e=this.#o();if(t.length===1){s.updateAllBaseStates("application.contentDensity",a.Set,t[0]);s.updateCurrentState("application.contentDensity",a.Set,t[0]);return}s.updateAllBaseStates("application.contentDensity",a.Set,e);s.updateCurrentState("application.contentDensity",a.Set,e)}async resetContentDensity(){await this.#s()}async#s(){const t=await this.#c();const e=this.#p();const n=this.#a();const i=this.#o();if(n.length===1){s.updateAllBaseStates("application.contentDensity",a.Set,n[0]);s.updateCurrentState("application.contentDensity",a.Set,n[0]);return}const o=t||i;let c;if(e.length===1){c=e[0]}else{c=o}s.updateAllBaseStates("application.contentDensity",a.Set,o);s.updateCurrentState("application.contentDensity",a.Set,c)}#o(){if(t.support.touch){return"cozy"}return"compact"}#a(){if(!t.system.desktop&&!t.system.combi){return["cozy"]}return["cozy","compact"]}#p(){const t=i.getMetadata();const e=[];if(t.cozyContentDensity){e.push("cozy")}if(t.compactContentDensity){e.push("compact")}return e}async#c(){const t=await e.getServiceAsync("UserInfo");const n=t.getUser();return n?.getContentDensity()}async reset(){const t=await e.getServiceAsync("AppLifeCycle");t?.detachAppLoaded(this.#t);this.#n.forEach(t=>t.off());this.#t=()=>{throw new Error("Favicon is not initialized")};this.#e=false;this.#n=[]}}return new o});
//# sourceMappingURL=ContentDensity.js.map