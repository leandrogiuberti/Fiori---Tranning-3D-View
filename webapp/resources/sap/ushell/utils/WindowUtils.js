// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/ui/util/isCrossOriginURL","sap/ushell/utils","sap/ushell/utils/UrlParsing"],(n,e,o,t)=>{"use strict";const r={};r.hasInvalidProtocol=function(n){const e=document.createElement("a");e.setAttribute("href",n);if(e.protocol==="javascript:"){return true}return false};r.isCrossOriginUrl=function(n){return e(n)};r.openURL=function(e,o,t,r){const i=r===undefined?true:r;const s=this.isCrossOriginUrl(e);t=t||"";if(i&&this.hasInvalidProtocol(e)){n.fatal("Tried to open a URL with an invalid protocol",null,"sap/ushell/utils/WindowUtils");throw new Error("Tried to open a URL with an invalid protocol")}if(s){if(t.toLowerCase().indexOf("noopener")===-1){if(t!==""){t+=","}t+="noopener"}if(t.toLowerCase().indexOf("noreferrer")===-1){t+=",noreferrer"}window.open(e,o,t);return true}return window.open(e,o,t)};r.getLeanURL=function(e,o){const t=e||o;if(this.hasInvalidProtocol(t)){n.fatal("Tried to construct a lean URL for input containing an invalid protocol",null,"sap/ushell/utils/WindowUtils");return""}if((t||"").charAt(0)!=="#"){return t}let r=window.location.search;if(!r){r="?sap-ushell-config=lean"}else if(r.indexOf("sap-ushell-config=")>=-1){r+="&sap-ushell-config=lean"}return window.location.origin+window.location.pathname+r+t};r._adjustQueryString=function(n,e,o){if((!e||e.length===0)&&(!o||o.length===0)){return n}const r=new URLSearchParams(n);const i=Array.from(r.keys()).reduce((n,e)=>{n[e]=r.getAll(e);return n},{});if(e&&e.length>0){e.forEach(n=>{const e=Object.keys(n)[0];if(e){i[e]=n[e]}})}if(o&&o.length>0){o.forEach(n=>{delete i[n]})}const s=t.urlParametersToString(i);return s!==""?`?${s}`:""};r.refreshBrowser=function(n,e){const t=o.getLocationHref();const i=o.getLocationSearch();const s=r._adjustQueryString(i,n,e);if(i===s){o.windowLocationReload()}else{const n=t.replace(i,s);o.windowLocationAssign(n)}};r.clearSapUserContextCookie=function(){window.document.cookie="sap-usercontext=;Path=/;Max-Age=-1"};return r});
//# sourceMappingURL=WindowUtils.js.map