// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/services/VisualizationInstantiation","sap/base/util/ObjectPath","sap/base/Log","sap/base/util/deepExtend","sap/base/util/deepClone","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/services/CommonDataModel/vizTypeDefaults/VizTypeDefaults","sap/ushell/utils/tilecard/TileCard","sap/ushell/Config"],(t,e,a,i,s,r,n,o,d,p,l)=>{"use strict";class c{static#t;#e;#a;static async getInstance(){if(!c.#t){const e=new t;const a=await d.getAll();c.#t=new c(e,a)}return c.#t}constructor(t,e){this.#e=t;this.#a=e}_getVizInstantiationData(t){const a=this.#a[t.type];if(!a&&t.type?.startsWith("ssuite.smartbusiness.tiles.")){return this._getSMBVizInstantiationData(t)}const i=l.last("/core/contentProviders/providerInfo/enabled");const s=i&&l.last("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations");const r=l.last("/core/shell/intentNavigation");return{id:t.id,title:e.get(["descriptor","value","sap.app","title"],t),subtitle:e.get(["descriptor","value","sap.app","subTitle"],t),info:e.get(["descriptor","value","sap.app","info"],t),icon:e.get(["descriptor","value","sap.ui","icons","icon"],t),keywords:e.get(["descriptor","value","sap.app","tags","keywords"],t)||[],_instantiationData:{platform:"CDM",vizType:a},indicatorDataSource:e.get("indicatorDataSource",t),vizType:e.get("type",t),dataSource:e.get(["_siteData","dataSource"],t),contentProviderId:e.get(["_siteData","contentProviderId"],t),contentProviderLabel:e.get(["_siteData","contentProviderLabel"],t),displayProviderLabel:s,target:r?e.get("target",t):e.get(["_siteData","target"],t),targetURL:r?e.get("targetURL",t):e.get(["_siteData","targetURL"],t),vizConfig:e.get(["descriptor","value"],t),supportedDisplayFormats:e.get(["descriptor","value","sap.flp","vizOptions","displayFormats","supported"],t),displayFormatHint:e.get(["descriptor","value","sap.flp","vizOptions","displayFormats","default"],t)||"standard",numberUnit:e.get(["descriptor","value","sap.flp","numberUnit"],t),vizId:t.id,preview:t.preview}}_getSMBVizInstantiationData(t){const a=l.last("/core/contentProviders/providerInfo/enabled");const i=a&&l.last("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations");const s=l.last("/core/shell/intentNavigation");return{id:t.id,title:e.get(["_siteData","title"],t),subtitle:e.get(["_siteData","subtitle"],t),info:e.get(["_siteData","info"],t),icon:e.get(["_siteData","icon"],t),keywords:e.get(["_siteData","keywords"],t),_instantiationData:{platform:"CDM",vizType:t.vizType},indicatorDataSource:e.get("indicatorDataSource",t),vizType:t.type,dataSource:e.get(["_siteData","dataSource"],t),contentProviderId:e.get(["provider","id"],t),contentProviderLabel:e.get(["_siteData","contentProviderLabel"],t),displayProviderLabel:i,target:s?e.get("target",t):e.get(["_siteData","target"],t),targetURL:s?e.get("targetURL",t):e.get(["_siteData","targetURL"],t),vizConfig:e.get(["descriptor","value"],t),supportedDisplayFormats:e.get(["_siteData","supportedDisplayFormats"],t),displayFormatHint:e.get(["_siteData","displayFormatHint"],t)||"standard",numberUnit:e.get(["descriptor","value","sap.flp","numberUnit"],t),vizId:t.id,preview:t.preview}}createVizInstance(t){const e=this.#e.instantiateVisualization(this._getVizInstantiationData(t));if(e){e.setActive(true)}return e}createTileCardConfiguration(t){return p.createTileCardConfiguration(this._getVizInstantiationData(t))}}return c},true);
//# sourceMappingURL=WorkPageVizInstantiation.js.map