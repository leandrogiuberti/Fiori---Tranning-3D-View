// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/base/util/ObjectPath","sap/ushell/Container"],(t,e,i)=>{"use strict";const n="X-SAP-UI2-CHIP:/UI2/DYNAMIC_APPLAUNCHER";const r="X-SAP-UI2-CHIP:/UI2/STATIC_APPLAUNCHER";const o={};o.getCatalogTilePreviewTitle=function(t){const e=o.getBagText(t,"tileProperties","display_title_text");return e||!t.isStub()&&t.getContract("preview")&&t.getContract("preview").getPreviewTitle()||undefined};o.getCatalogTilePreviewSubtitle=function(t){const e=o.getBagText(t,"tileProperties","display_subtitle_text");return e||!t.isStub()&&t.getContract("preview")&&t.getContract("preview").getPreviewSubtitle()||undefined};o.getCatalogTilePreviewIcon=function(t){const e=o._getConfigurationProperty(t,"tileConfiguration","display_icon_url");return e||!t.isStub()&&t.getContract("preview")&&t.getContract("preview").getPreviewIcon()||undefined};o.getCatalogTileTargetURL=function(t){const e=o._getConfigurationProperty(t,"tileConfiguration","navigation_target_url");return e||!t.isStub()&&t.getContract("preview")&&t.getContract("preview").getTargetUrl()||undefined};o.getCatalogTileNumberUnit=function(t){return o._getConfigurationProperty(t,"tileConfiguration","display_number_unit")};o.getCatalogTilePreviewInfo=function(t){return o.getBagText(t.getChip(),"tileProperties","display_info_text")};o.getCatalogTileSize=function(t){return o.getTileSize(t)};o.getCatalogTilePreviewIndicatorDataSource=function(t){let e;const i=o._getAppLauncherTileConfiguration(t);if(o._isAppLauncher(t)&&i&&i.service_url){e={path:i.service_url,refresh:i.service_refresh_interval}}return e};o._getConfigurationProperty=function(t,e,i){let n;let r;try{n=t.getConfigurationParameter(e);r=JSON.parse(n)}catch{return}if(r[i]!==undefined){return r[i]}};o.getBagText=function(t,e,i){if(t.getBagIds().indexOf(e)>-1&&t.getBag(e).getTextNames().indexOf(i)>-1){return t.getBag(e).getText(i)}};o.getTileSize=function(t){const e=!t.isStub()&&t.getConfigurationParameter("row")||"1";const i=!t.isStub()&&t.getConfigurationParameter("col")||"1";return`${e}x${i}`};o._getAppLauncherTileConfiguration=function(e){let i;const n=e.getConfigurationParameter("tileConfiguration");try{i=JSON.parse(n||"{}")}catch(i){t.error(`Tile with ID '${e.getId()}' has a corrupt configuration containing a 'tileConfiguration' value '${n}' which could not be parsed. If present, a (stringified) JSON is expected as value.`,i,"sap.ushell_abap.adapters.abap.LaunchPageAdapter");return{}}return i};o._isAppLauncher=function(t){const e=t.getChip().getBaseChipId();return e===n||e===r};o.getTileConfigurationFromSimplifiedChip=function(t){let e;try{e=JSON.parse(t.configuration.tileConfiguration)}catch(t){e={}}return e};o.getTargetUrlFromSimplifiedChip=function(t,e){const i=this.getCustomTileTargetFromSimplified(t);if(i){return`#${e.constructShellHash(i)}`}const n=this.getTileConfigurationFromSimplifiedChip(t);return n.navigation_target_url};o.getIndicatorDataSourceFromSimplifiedChip=function(t){const e=this.getTileConfigurationFromSimplifiedChip(t);const i=e.service_url;if(!i){return undefined}return{path:i,refresh:e.service_refresh_interval}};o.getTileSizeFromSimplifiedChip=function(t){const e=t.configuration;const i=e.row||1;const n=e.col||1;return`${i}x${n}`};o.getNumberUnitFromSimplifiedChip=function(t){const e=this.getTileConfigurationFromSimplifiedChip(t);return e.display_number_unit};o.getInfoFromSimplifiedChip=function(t){const e=t.bags.tileProperties;return e&&e.texts.display_info_text};o.getKeywordsFromSimplifiedChip=function(t){const e=t.bags.tileProperties;const i=e&&e.texts.display_search_keywords;if(i){return i.trim().split(/\s*,\s*/g)}return[]};o.isCustomTileFromSimplifiedChip=function(t){const e=t.chipId;return e!==n&&e!==r};o.loadChipInstanceFromSimplifiedChip=function(t){const e=t.bags;const n={chipId:t.chipId,configuration:t.configuration?JSON.stringify(t.configuration):"{}"};return i.getServiceAsync("PageBuilding").then(t=>{const i=t.getFactory();const r=i.createChipInstance(n);this.addBagDataToChipInstance(r,e);return new Promise((t,e)=>{r.load(t,t=>{e(new Error(t))})}).then(()=>r)})};o.addBagDataToChipInstance=function(e,i){if(!i){return}let n;for(const r in i){const o=i[r];const a=e.getBag(r);try{for(n in o.properties){a.setProperty(n,o.properties[n])}for(n in o.texts){a.setText(n,o.texts[n])}}catch(e){t.error("chipsUtils.addBagDataToChipInstance:",e)}}};o.getCustomTileTargetFromSimplified=function(t){if(t.chipId==="X-SAP-UI2-CHIP:/UI2/AR_SRVC_NEWS"){return{target:{semanticObject:"NewsFeed",action:"displayNewsList"}}}const e=JSON.parse(t.configuration.tileConfiguration||"{}");const i=JSON.parse(e.TILE_PROPERTIES||"{}");if(i.semanticObject&&i.semanticAction){return{target:{semanticObject:i.semanticObject,action:i.semanticAction},params:{EvaluationId:[i.evaluationId]}}}return null};return o},true);
//# sourceMappingURL=chipsUtils.js.map