// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/ui/thirdparty/URI","sap/ui/thirdparty/URITemplate","sap/ushell/URLTemplateProcessor/DefinitionParameterSetBuilder","sap/ushell/URLTemplateProcessor/DependencyGraph","sap/ushell/URLTemplateProcessor/Resolvers","sap/ushell/URLTemplateProcessor/TemplateParameterParser","sap/ushell/URLTemplateProcessor/utils"],(e,t,r,n,s,a,o,i)=>{"use strict";function p(t){e.debug(t,"sap.ushell.URLTemplateProcessor")}function l(e){if(typeof e==="undefined"){return"<undefined>"}if(typeof e==="string"){if(e===""){return"<empty string>"}return`'${e}'`}if(typeof e==="number"){return`(number) ${e}`}if(typeof e==="boolean"){return`(bool) ${e}`}let t;if(typeof e==="object"){t=JSON.stringify(e);if(t.length>255){t=`${t.substr(0,255)}...`}}else{t="{other type}"}return t}function c(e){const t=Object.keys(e).filter(t=>typeof e[t]==="object"&&e[t].hasOwnProperty("renameTo"));const r=[];t.forEach(t=>{const n=e[t];if(n.hasOwnProperty("renameTo")){r.push((e,r)=>{let s=r;s=r.replace(new RegExp(`${t}=`,"g"),`${n.renameTo}=`);return s})}});return r}function u(e,t,r,c,u){p(`[TEMPLATE EXPANSION] ${e.urlTemplate}`);const f=n.buildDefinitionParameterSet(e.parameters,t,u)||{};const m=i.removeArrayParameterNotation(r[u]||{});const d=o.parseTemplateParameterSet(f,u);const h=o.parseTemplateParameterSetAsLiterals(m);const y=i.mergeObject(h,d);p(`- parsed template parameters: ${JSON.stringify(y,null,3)}`);const P=s.buildDependencyGraph(y);p(`- created dependency graph: ${JSON.stringify(P,null,3)}`);const R=s.getDependencyResolutionOrder(P);p(`- resolving in order: ${R.join(" > ")}`);const T=a.resolveAllParameters(y,R,t,r,c,u);Object.keys(T).forEach(e=>{const t=T[e];p(`${e} --\x3e ${l(t)}`)});return{oDefinitionParamsSet:f,oResolvedParameters:T}}function f(e,r){const n=c(r.oDefinitionParamsSet||{});const s=e.urlTemplate;let a=t.expand(s,r.oResolvedParameters).toString();p(`- created URL: ${a}`);n.forEach(e=>{a=e(s,a)});if(n.length>0){p(`- created URL (post expansion): ${a}`)}return a}function m(e,t,r,n,s,a){i.setURIHashContext(a);const o=u(e,t,r,n,s);const p=f(e,o);i.setURIHashContext(undefined);return p}return{prepareExpandData:u,expand:m}});
//# sourceMappingURL=URLTemplateProcessor.js.map