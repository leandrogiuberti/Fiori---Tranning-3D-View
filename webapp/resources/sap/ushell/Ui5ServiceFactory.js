// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","sap/base/Log","sap/base/util/ObjectPath","sap/base/util/isPlainObject"],(e,t,n,r,c)=>{"use strict";let o;function i(e){o=e}function s(){return o}function u(e){return!!/^[^_].+/.test(e)}function a(e){let t;const n=[];for(t in e){n.push(t)}return n}function f(e,t,r){const c=t[r];t[r]=function(){let o;const i=s();if(!e||e.scopeObject.getId()!==i){n.warning(`Call to ${r} is not allowed`,`This may be caused by an app component other than the active '${i}' that tries to call the method`,"sap.ushell.Ui5ServiceFactory");return undefined}const u=new Array(arguments.length);for(o=0;o<u.length;++o){u[o]=arguments[o]}return c.apply(t,u)}}function p(e,t,n,r){a(e).filter(u).filter(n=>{const r=e[n];t[n]=r;return typeof r==="function"}).forEach(c=>{t[c]=t[c].bind(e);if(r){f(n,t,c)}})}function l(e){if(typeof e==="undefined"){return true}if(!c(e)){return false}if(!e.scopeType){return false}const t=r.get("scopeObject.getId",e);if(typeof t!=="function"){return false}return true}function h(e,t,n){const r={};if(n){n=typeof e==="object"}p(t,r,e,n);if(n&&e.scopeType==="component"&&e.scopeObject&&e.scopeObject.getId){i(e.scopeObject.getId())}return r}function y(e){return new Promise((t,n)=>{sap.ui.require(["sap/ushell/Container"],n=>{n.getServiceAsync(e).then(e=>{t(e)})})})}function b(r,c){const o=e.extend(`sap.ushell.ui5service.${r}Factory`,{createInstance:function(e){return new Promise((o,i)=>{y(r).then(s=>{if(!l(e)){n.error(`Invalid context for ${r} service interface`,"The context must be empty or an object like { scopeType: ..., scopeObject: ... }","sap.ushell.Ui5ServiceFactory");i(new Error(`Invalid Context for ${r} service`));return}const u=h(e,s,c);const a=t.extend(`sap.ushell.ui5service.${r}`,{getInterface:function(){return u}});const f=new a(e);o(f)}).catch(e=>{i(e)})})}});return new o}return{createServiceFactory:b}});
//# sourceMappingURL=Ui5ServiceFactory.js.map