{"version":3,"file":"PostMessageManager.js","names":["sap","ui","define","Log","Deferred","isPlainObject","ObjectPath","uid","oDefaultRequestHandlerOptions","provideApplicationContext","allowInactive","oDefaultDistributionPolicy","preventBroadcast","onlyCurrentApplication","ignoreCapabilities","DoNotReply","Symbol","oLogger","getLogger","PostMessageManager","fnPostMessageEventHandler","Error","fnGetCurrentApplication","fnGetAllApplications","bInitialized","bDisabled","aEventPreprocessor","aResponseHandlers","oRequestHandlers","oDistributionPolicies","bKeepMessagesForLaterProcessing","aUnprocessedMessages","BuiltInResponses","init","oOptions","this","oConfig","get","enabled","warning","getCurrentApplication","getAllApplications","skipReplay","handlePostMessageEvent","bind","addEventListener","oMessageEvent","oMessage","parseMessage","debug","data","oPreprocessingResult","preprocessMessageEvent","event","message","service","includes","type","oSourceWindow","source","sSourceDomain","origin","request_id","JSON","stringify","bWasHandled","handleResponseHandlers","body","oResponseMessageBody","bSuccess","vResult","handleServiceRequests","result","oError","error","sStack","sMessage","toString","stack","sServiceRequest","originalMessage","sendResponse","parse","getRequestId","oProcessingResult","forEach","fnProcessor","fnResponseHandler","fnServiceRequestHandler","getServiceRequestHandler","push","code","oRequestHandlerOptions","getServiceRequestHandlerOptions","isValidRequest","bIsValidRequest","oApplicationContainer","getApplicationContainerContext","getActive","isTrustedPostMessageSource","getId","handler","options","oContainer","isA","oApplicationWindow","getPostMessageTarget","oCurrentApplicationContainer","addEventPreprocessor","fnPreprocessor","setRequestHandler","fnHandler","sendRequest","oMessageBody","oContentWindow","sTargetOrigin","bWaitForResponse","sRequestId","sendMessage","status","oResponsePromise","Promise","resolve","waitForClientResponse","postMessage","oExpectedContentWindow","oDeferred","handleClientResponse","promise","reject","sendRequestToApplication","oDistributionPolicy","getDistributionPolicy","bMatchesCapabilities","supportsCapabilities","isValidRequestTarget","bIsValidRequestTarget","getPostMessageTargetOrigin","sendRequestToAllApplications","aRelevantContainers","aFilteredContainers","filter","aPromises","map","allSettled","then","aResults","aErrors","oResult","reason","length","join","value","setDistributionPolicy","oPolicy","replayStoredMessages","reset","removeEventListener"],"sources":["PostMessageManager-dbg.js"],"mappings":"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","ignoreList":[]}