// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/ApplicationType/UrlPostProcessing","sap/ui/thirdparty/hasher","sap/ushell/utils","sap/ushell/Container"],(e,s,t,r)=>{"use strict";class a{async createApp(e,s,t){e.setReservedParameters(t.reservedParameters);e.setCurrentAppUrl(t.url);e.setCurrentAppId(s);e.setCurrentAppTargetResolution(t);const r=await this.#e(e,s,t);const a=await e.sendRequest("sap.ushell.services.appLifeCycle.create",r,true);return a?.result}async#e(a,p,i){const n=e.processUrl(i.url,i.applicationType,false,a);const l={sCacheId:p,sHash:s.getHash(),sUrl:n};if(n.indexOf("sap-iframe-hint=GUI")>0||n.indexOf("sap-iframe-hint=WDA")>0||n.indexOf("sap-iframe-hint=WCF")>0){const e=t.getParamKeys(n);const s={};if(e.aAppStateNamesArray.length>0){try{const t=await r.getServiceAsync("Navigation");const a=await t.getAppStateData(e.aAppStateKeysArray);e.aAppStateNamesArray.forEach((e,t)=>{if(a[t]){s[e]=a[t]}})}catch{}}l["sap-flp-params"]={...s,"sap-flp-url":r.getFLPUrl(true),"system-alias":a.getSystemAlias()}}return l}async destroyApp(e,s){const t=e.getCurrentAppId()===s;if(t){e.setCurrentAppUrl("");e.setCurrentAppId("");e.setCurrentAppTargetResolution(undefined);r.setAsyncDirtyStateProvider(undefined)}await e.sendRequest("sap.ushell.services.appLifeCycle.destroy",{sCacheId:s},true)}async storeAppWithinSameFrame(e,s){const t=e.getCurrentAppId()===s;if(!t){throw new Error("Cannot store an already stored/destroyed app")}e.setCurrentAppUrl("");e.setCurrentAppId("");e.setCurrentAppTargetResolution(undefined);r.setAsyncDirtyStateProvider(undefined);await e.sendRequest("sap.ushell.services.appLifeCycle.store",{sCacheId:s},true)}async restoreAppWithinSameFrame(e,t,r){e.setCurrentAppUrl(r.url);e.setCurrentAppId(t);e.setCurrentAppTargetResolution(r);await e.sendRequest("sap.ushell.services.appLifeCycle.restore",{sCacheId:t,sUrl:r.url,sHash:s.getHash()},true)}isStatefulContainerSupportingKeepAlive(e){return e.supportsCapabilities(["sap.ushell.services.AppLifeCycle.create","sap.ushell.services.appLifeCycle.destroy","sap.ushell.services.appLifeCycle.store","sap.ushell.services.appLifeCycle.restore"])}}return new a});
//# sourceMappingURL=StatefulContainerV2Handler.js.map