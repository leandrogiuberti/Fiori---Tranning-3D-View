{"version":3,"file":"IframeApplicationContainer.js","names":["sap","ui","define","Log","uid","Device","URI","ApplicationContainer","IframeApplicationContainerRenderer","PostMessageManager","UrlPostProcessing","systemAliasUtils","Config","Container","ushellLibrary","System","ushellUtils","UriParameters","iValidIframeTimeout","IframeApplicationContainer","extend","metadata","library","properties","visible","type","defaultValue","globalDirtyStorageKey","iframeUrl","visibility","iframePostAllParams","iframeWithPost","iframeIsValidSupport","lastIframeIsValidTime","interfaces","renderer","prototype","init","apply","this","arguments","_aPendingRequestsWaitingForResponse","setProperty","Date","now","sDirtyStateStorageKey","localStorage","removeItem","getGlobalDirtyStorageKey","_fnStorageEventListener","_handleStorageEvent","bind","addEventListener","_fnPagehideEventListener","exit","onBeforeRendering","getReadyForRendering","_attachLogoutEvent","_initNWBCStorage","_addRemoteSystemForUrl","_calculateIframeUrl","_calculateIframeWithPost","getProperty","sIframeUrl","sIframeUrlWithSystemAlias","addSystemAlias","onAfterRendering","async","MessageBroker","getServiceAsync","sTargetOrigin","getPostMessageTargetOrigin","addAcceptedOrigin","os","ios","$","prop","parent","css","setVisibility","bVisible","oDomRef","getDomRef","setAttribute","removeStyleClass","length","addStyleClass","setDataHelpId","sDataHelpId","getIframeWithPost","oIframe","_getIframe","sApplicationType","getApplicationType","isApplicationTypeEmbeddedInIframe","_fnLogout","_handleLogout","attachLogoutEvent","getFrameworkId","localStorageSetItem","DirtyState","INITIAL","_getDocumentUrl","document","URL","oUrlParams","fromURL","bPostEnabledByConfig","last","bPostDisabledByUrlParam","get","bPostEnforcedByUrlParam","bPostDisabledByResolution","getOpenWithPostByAppParam","bApplicableApplicationType","includes","bEnablePost","getUrl","processUrl","_injectParametersFromDocumentUrl","has","sIframeParams","aParams","split","sTmpURI","forEach","sParam","addQuery","toString","_oSystem","sUrl","oAnchor","createElement","sClient","href","sBase","protocol","host","alias","baseUrl","client","undefined","platform","addRemoteSystem","oEvent","key","newValue","PENDING","oTarget","getPostMessageTarget","debug","sMessage","JSON","stringify","action","postMessage","oContentWindow","sTargetDomain","preventDefault","oIFrame","tagName","getAttribute","getElementById","contentWindow","sFormId","replace","oForm","src","oUri","isTrustedPostMessageSource","oMessage","source","origin","sendRequest","sServiceRequest","oMessageBody","bWaitForResponse","sendRequestToApplication","oPromise","push","oResult","filter","oPendingRequest","sendBeforeAppCloseEvent","oEventData","getBeforeAppCloseEvent","enabled","params","isValid","getIframeIsValidSupport","iLastValidTimeDelta","getLastIframeIsValidTime","bIframeInvalid","sReason","Error","removeEventListener","detachLogoutEvent"],"sources":["IframeApplicationContainer-dbg.js"],"mappings":"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","ignoreList":[]}