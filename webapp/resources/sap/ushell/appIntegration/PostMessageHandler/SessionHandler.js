// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/appIntegration/PostMessageManager","sap/ushell/Container","sap/ushell/utils"],(e,t,s)=>{"use strict";const n={"sap.ushell.sessionHandler.extendSessionEvent":{ignoreCapabilities:true},"sap.ushell.sessionHandler.logout":{isValidRequestTarget(e){if(",WCF,TR,WDA,".includes(e.getApplicationType())){return false}return true}}};const a={"sap.ushell.sessionHandler.notifyUserActive":{async handler(e,s){const n=t.getRenderer().getShellController();const a=n._getSessionHandler();if(a?.isInitialized?.()){a.userActivityHandler()}}},"sap.ushell.sessionHandler.extendSessionEvent":{async handler(e,s){const n=t.getRenderer().getShellController();const a=n._getSessionHandler();if(a?.isInitialized?.()){a.userActivityHandler()}}},"sap.ushell.services.Container.attachLogoutEvent":{async handler(e,s,n){s.addCapabilities(["sap.ushell.appRuntime.executeLogoutFunctions"]);t.attachLogoutEvent(async()=>s.sendRequest("sap.ushell.appRuntime.executeLogoutFunctions",{},true),true)},options:{provideApplicationContext:true}},"sap.ushell.appRuntime.iframeIsValid":{async handler(e,t,s){t.setLastIframeIsValidTime(Date.now())},options:{provideApplicationContext:true,allowInactive:true}},"sap.ushell.appRuntime.iframeIsBusy":{async handler(e,t){}},"sap.ushell.appRuntime.isInvalidIframe":{async handler(e,n,a){if(!e.bValue){return}const[i]=await s.requireAsync(["sap/ushell/appIntegration/AppLifeCycle"]);const l=i.getCurrentApplication().container===n;await i.destroyApplication(null,n,true);if(l){const e=await t.getServiceAsync("Navigation");await e.navigate({target:{shellHash:"#"}})}},options:{provideApplicationContext:true,allowInactive:true}}};return{register(){Object.keys(n).forEach(t=>{const s=n[t];e.setDistributionPolicy(t,s)});Object.keys(a).forEach(t=>{const s=a[t];e.setRequestHandler(t,s.handler,s.options)})}}});
//# sourceMappingURL=SessionHandler.js.map