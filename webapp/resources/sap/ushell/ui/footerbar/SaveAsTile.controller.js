// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/mvc/Controller","sap/base/Log","sap/ushell/resources","sap/ui/core/library","sap/ui/thirdparty/hasher","sap/ushell/Container"],(e,t,r,o,i,s)=>{"use strict";const n=o.ValueState;return e.extend("sap.ushell.ui.footerbar.SaveAsTile",{onInit:function(){const e=this.getView();e.getTitleInput().attachLiveChange(function(){if(this.getValue()===""){this.setValueStateText(r.i18n.getText("bookmarkTitleInputError"));this.setValueState(n.Error)}else{this.setValueState(n.None)}})},loadPersonalizedGroups:function(){return s.getServiceAsync("LaunchPage").then(e=>new Promise((t,r)=>{e.getGroupsForBookmarks().done(t).fail(r)})).then(e=>{const t=this.getView().getModel();t.setProperty("/groups",e);t.setProperty("/groups/length",e.length)}).catch(()=>{t.error("SaveAsTile controller: Unable to determine targets for bookmark placement.")})},getLocalizedText:function(e,t){return t?r.i18n.getText(e,t):r.i18n.getText(e)},getBookmarkTileData:function(){const e=this.getView();const t=e.getModel();const r=e.getViewData();let o;if(e.oGroupsSelect&&e.oGroupsSelect.getSelectedItem()){o=e.oGroupsSelect.getSelectedItem().getBindingContext().getObject()}let s;if(r.customUrl){if(typeof r.customUrl==="function"){s=r.customUrl()}else{s=r.customUrl}}else{s=i.getHash()?`#${i.getHash()}`:window.location.href}const n={title:t.getProperty("/title")||"",subtitle:t.getProperty("/subtitle")||"",url:s,icon:t.getProperty("/icon")||"",info:t.getProperty("/info")||"",numberUnit:t.getProperty("/numberUnit")||"",serviceUrl:typeof r.serviceUrl==="function"?r.serviceUrl():r.serviceUrl,dataSource:t.getProperty("/dataSource"),serviceRefreshInterval:t.getProperty("/serviceRefreshInterval"),group:o,keywords:t.getProperty("/keywords")||""};n.title=n.title.substring(0,256).trim();n.subtitle=n.subtitle.substring(0,256).trim();n.info=n.info.substring(0,256).trim();if(n.serviceUrl===undefined){delete n.serviceUrl;delete n.serviceRefreshInterval}return n},onExit:function(){const e=this.getView();const t=e.getTileView();t.destroy()}})});
//# sourceMappingURL=SaveAsTile.controller.js.map