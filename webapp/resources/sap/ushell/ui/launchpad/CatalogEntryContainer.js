// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/ui/core/Control","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/TileContainerUtils","sap/ushell/Container"],(e,t,n,i,s,a)=>{"use strict";const l=t.extend("sap.ushell.ui.launchpad.CatalogEntryContainer",{metadata:{library:"sap.ushell",properties:{header:{type:"string",group:"Appearance",defaultValue:null},catalogSearchTerm:{type:"string",group:"Appearance",defaultValue:null},catalogTagSelector:{type:"object",group:"Appearance",defaultValue:null}},aggregations:{appBoxesContainer:{type:"sap.ushell.ui.appfinder.AppBoxInternal",multiple:true},customTilesContainer:{type:"sap.ushell.ui.launchpad.Tile",multiple:true}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t);e.attr("aria-labeledby",`${t.getId()}-title`);e.attr("role","group");e.class("sapUshellTileContainer");e.class("sapUshellCatalogTileContainer");e.openEnd();e.openStart("div");e.class("sapUshellTileContainerContent");e.attr("tabindex","-1");e.openEnd();let n=t.getHeader();if(n){if(i.i18n.hasText(n)){n=i.i18n.getText(n)}e.openStart("div");e.class("sapUshellTileContainerHeader");e.class("sapUshellCatalogTileContainerHeader");e.attr("id",`${t.getId()}-groupheader`);e.openEnd();e.openStart("div");e.class("sapUshellCatalogTileContainerHeaderInner");e.attr("id",`${t.getId()}-title`);e.openEnd();e.openStart("h2");e.class("sapUshellContainerTitle");e.class("sapUshellCatalogContainerTitle");e.attr("title",n);e.attr("aria-level","2");e.openEnd();e.text(n);e.close("h2");e.close("div");e.close("div")}const s=t.getAppBoxesContainer();let a;const l=t.getCustomTilesContainer();if(s.length>0||l.length>0){e.openStart("ul");e.class("sapUshellInner");e.openEnd();for(a=0;a<s.length;a++){e.renderControl(s[a])}if(s.length&&l.length){e.voidStart("br");e.voidEnd()}for(a=0;a<l.length;a++){e.renderControl(l[a])}e.close("ul")}e.close("div");e.close("div")}}});l.prototype.setAfterHandleElements=function(e){this.onAfterHandleElements=e};l.prototype.onAfterUpdate=function(e){this.fnCallback=e};l.prototype.updateAggregation=function(t){e.debug("Updating CatalogEntryContainer. Reason: ",t)};l.prototype.addNewItem=function(e,t){if(this.catalogState[t]!=="full"&&this.getAllocatedUnits&&!this.getAllocatedUnits()){this.catalogState[t]="partial";return false}if(t==="customTilesContainer"){const t=e.getObject&&e.getObject().src;if(t!==undefined){let e;if(t.Chip!==undefined&&t.Chip.getContract!==undefined){e=t.Chip.getContract("preview")}else if(t.getContract!==undefined){e=t.getContract("preview")}if(e!==undefined){e.setEnabled(true)}}a.getServiceAsync("FlpLaunchPage").then(t=>{t.getCatalogTileViewControl(e.getProperty("src")).done(t=>{e.getModel().setProperty(`${e.getPath()}/content`,[t])})})}const n=s.createNewItem.bind(this)(e,t);s.addNewItem.bind(this)(n,t);const i=t==="appBoxesContainer"?this.getAppBoxesContainer():this.getCustomTilesContainer();const l=e.getPath();this.indexingMaps[t].onScreenPathIndexMap[l]={aItemsRefrenceIndex:i.length-1,isVisible:true};return true};l.prototype.getNumberResults=function(){return{nAppboxes:this.nNumberOfVisibleElements.appBoxesContainer,nCustom:this.nNumberOfVisibleElements.customTilesContainer}};l.prototype.handleElements=function(e){const t=e;const n=this.mBindingInfos[t].binding;const i=n.getContexts();let a;if(!this.catalogState){this.catalogState={}}if(!this.catalogState[e]){this.catalogState[e]="start"}if(!this.indexingMaps){this.indexingMaps={}}if(!this.nNumberOfVisibleElements){this.nNumberOfVisibleElements=[]}if(!this.nNumberOfVisibleElements.customTilesContainer){this.nNumberOfVisibleElements.customTilesContainer=0}if(!this.nNumberOfVisibleElements.appBoxesContainer){this.nNumberOfVisibleElements.appBoxesContainer=0}if(!this.filters){this.filters={}}a=t==="appBoxesContainer"?this.getAppBoxesContainer():this.getCustomTilesContainer();this.indexingMaps[t]=s.indexOnScreenElements(a,false);const l=s.markVisibleOnScreenElementsSearchCatalog(i,this.indexingMaps[t],true);if(s.createMissingElementsInOnScreenElementsSearchCatalog(this.indexingMaps[t],i,l,this.addNewItem.bind(this),a,this.filters[t],t,this.processFiltering.bind(this))){if(this.getAllocatedUnits&&this.getAllocatedUnits()){this.catalogState[e]="full"}}a=t==="appBoxesContainer"?this.getAppBoxesContainer():this.getCustomTilesContainer();const o=s.showHideTilesAndHeaders(this.indexingMaps[t],a);this.nNumberOfVisibleElements[t]=o.nCountVisibleElements;if(this.fnCallback){this.fnCallback(this)}if(this.onAfterHandleElements){this.onAfterHandleElements(this)}};l.prototype.processFiltering=function(e,t){const n=e.getPath();if(t){const e=this.indexingMaps[t].onScreenPathIndexMap[n];if(e.isVisible&&this.currElementVisible){this.currElementVisible()}}};return l});
//# sourceMappingURL=CatalogEntryContainer.js.map