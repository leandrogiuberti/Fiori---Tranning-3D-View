// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/m/Text","sap/ui/base/ManagedObject","sap/ui/core/Control","sap/ui/core/EventBus","sap/ui/core/Icon","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","./TileRenderer"],(e,t,i,o,s,n,jQuery,l,a,r,c)=>{"use strict";const u=o.extend("sap.ushell.ui.launchpad.Tile",{metadata:{library:"sap.ushell",properties:{long:{type:"boolean",group:"Misc",defaultValue:false},uuid:{type:"string",group:"Misc",defaultValue:null},tileCatalogId:{type:"string",group:"Misc",defaultValue:null},tileCatalogIdStable:{type:"string",group:"Misc",defaultValue:null},isCustomTile:{type:"boolean",group:"Misc",defaultValue:false},target:{type:"string",group:"Misc",defaultValue:null},debugInfo:{type:"string",group:"Misc",defaultValue:null},rgba:{type:"string",group:"Misc",defaultValue:null},animationRendered:{type:"boolean",group:"Misc",defaultValue:false},isLocked:{type:"boolean",group:"Misc",defaultValue:false},showActionsIcon:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false},navigationMode:{type:"string",group:"Misc",defaultValue:null},isDraggedInTabBarToSourceGroup:{type:"boolean",group:"Misc",defaultValue:false},noContainerMode:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{tileViews:{type:"sap.ui.core.Control",multiple:true,singularName:"tileView"},pinButton:{type:"sap.ui.core.Control",multiple:true,singularName:"pinButton"}},events:{press:{},coverDivPress:{},afterRendering:{},showActions:{},deletePress:{}}},renderer:c});u.prototype.init=function(){this.addDelegate({onkeyup:function(e){const t=e.originalEvent;const i=t.code==="Space"||e.keyCode===32;const o=t.code==="Enter"||e.keyCode===13;const s=t.altKey||t.shiftKey||t.ctrlKey||t.metaKey;if((i||o)&&!s){this._launchTileViaKeyboard(e)}}},this)};u.prototype.exit=function(){if(this.actionSheetIcon){this.actionSheetIcon.destroy()}if(this.actionIcon){this.actionIcon.destroy()}if(this.failedToLoadViewText){this.failedToLoadViewText.destroy()}};u.prototype.getFailedtoLoadViewText=function(){if(!this.failedToLoadViewText){this.failedToLoadViewText=new t({text:a.i18n.getText("Tile.failedToLoadView")})}return this.failedToLoadViewText};u.prototype.getActionSheetIcon=function(){if(!this.getTileActionModeActive()){return undefined}if(!this.actionSheetIcon){this.actionSheetIcon=new n({src:"sap-icon://overflow",tooltip:a.i18n.getText("configuration.category.tile_actions")}).addStyleClass("sapUshellTileActionIconDivBottomInner")}return this.actionSheetIcon};u.prototype.ontap=function(){e.info("Tile clicked:",this.getDebugInfo(),"sap.ushell.ui.launchpad.Tile");this.firePress()};u.prototype.destroy=function(e){this.destroyTileViews();o.prototype.destroy.call(this,e)};u.prototype.addTileView=function(e,t){e.setParent(null);i.prototype.addAggregation.call(this,"tileViews",e,t)};u.prototype.destroyTileViews=function(){if(this.mAggregations.tileViews){this.mAggregations.tileViews.length=0}};u.prototype.onBeforeRendering=function(){const e=this.getDomRef();if(e){const t=e.querySelector("a.sapUshellTileInner");if(t){t.onclick=null}if(document.activeElement===e){this.bFocused=true}this.sTabIndex=e.getAttribute("tabindex");if(this.sTabIndex){e.removeAttribute("tabindex")}}};u.prototype.onAfterRendering=function(){if(this.getIsDraggedInTabBarToSourceGroup()){const e=this.getParent();e.removeAggregation("tiles",this,false)}const e=this.getDomRef();if(e){if(this.sTabIndex){e.setAttribute("tabindex",this.sTabIndex);delete this.sTabIndex}if(this.bFocused){e.focus();delete this.bFocused}}this._redrawRGBA();this._disableInnerLink();this.fireAfterRendering()};u.prototype._disableInnerLink=function(){const e=this.getDomRef();const t=e.querySelector("a.sapUshellTileInner");if(t){t.onclick=function(e){e.preventDefault()}}};u.prototype._launchTileViaKeyboard=function(e){if(this.getTileActionModeActive()){this.fireCoverDivPress({id:this.getId()})}else{this._announceLoadingApplication();if(e.target.tagName!=="BUTTON"){let e=this.getTileViews()[0];let t=false;let i;let o;if(e.firePress){e.firePress({id:this.getId()})}else if(e.getComponentInstance){i=e.getComponentInstance();if(i._oController&&i._oController.oView.getContent()){o=i._oController.oView.getContent()[0];if(o&&o.firePress){o.firePress({id:this.getId()})}}}else{while(e.getContent&&!t){e=e.getContent()[0];if(e.firePress){e.firePress({id:this.getId()});t=true}}}}}};u.prototype.onfocusin=function(){const t=this.getDomRef();if(!t.classList.contains("sapUshellPlusTile")){const i=this.$().prevUntil("h3");let o;if(i.length>0){o=i[i.length-1].previousSibling}else{o=t.previousSibling}const s=t.querySelector(".sapUshellTileInner");if(s&&s.children&&s.children[0]){const i=[];if(o){i.push("sapUshellCatalogAccessibilityTileText")}else{i.push("sapUshellDashboardAccessibilityTileText")}const n=this.getNavigationMode();if(n){const t=a.i18n.getText(`${n}NavigationMode`);if(t){const e=`${this.getId()}-navigationMode`;if(!document.getElementById(e)){const i=document.createElement("div");i.setAttribute("id",e);i.style.display="none";i.innerText=t;s.appendChild(i)}i.push(e)}else{e.warning("The navigation mode is of a unkown mode, it can not be read!")}}i.push(s.children[0].getAttribute("id"));const l=t.querySelector(".sapUshellTileDeleteClickArea .sapUiIcon");if(l){i.push(l.id)}if(o){i.push(o.getAttribute("id"))}if(this.getTileActionModeActive()){i.push("sapUshellDashboardAccessibilityTileEditModeText")}t.setAttribute("aria-labelledby",i.join(" "))}}};u.prototype.onclick=function(e){if(this.getTileActionModeActive()){const t=e.originalEvent.srcElement;if(jQuery(t).closest(".sapUshellTileDeleteClickArea").length>0){this.fireDeletePress()}else{this.fireCoverDivPress({id:this.getId()})}}else{this._announceLoadingApplication()}};u.prototype._announceLoadingApplication=function(){const e=document.getElementById("sapUshellLoadingAccessibilityHelper-appInfo");const t=a.i18n.getText("screenReaderNavigationLoading");if(e){e.setAttribute("role","alert");e.innerText=t;setTimeout(()=>{e.removeAttribute("role");e.innerText=""},0)}};u.prototype._initDeleteAction=function(){const e=this;if(!this.deleteIcon){this.deleteIcon=new n({src:"sap-icon://decline",tooltip:a.i18n.getText("removeButtonTitle")});this.deleteIcon.addEventDelegate({onclick:function(t){e.fireDeletePress();t.stopPropagation()}});this.deleteIcon.addStyleClass("sapUshellTileDeleteIconInnerClass");this.deleteIcon.addCustomData(new r({key:"aria-label",value:a.i18n.getText("removeButtonLabel"),writeToDom:true}))}return this.deleteIcon};u.prototype.setShowActionsIcon=function(e){if(e){if(!this.actionIcon){this.actionIcon=new n({size:"1rem",src:"sap-icon://overflow",press:function(){this.fireShowActions();this.addStyleClass("showTileActionsIcon");const e=s.getInstance();function t(i,o,s){s.removeStyleClass("showTileActionsIcon");e.unsubscribe("dashboard","actionSheetClose",t)}e.subscribe("dashboard","actionSheetClose",t)}.bind(this)}).addStyleClass("sapUshellTileActionsIconClass")}}this.setProperty("showActionsIcon",e)};u.prototype.setIsDraggedInTabBarToSourceGroup=function(e){this.setProperty("isDraggedInTabBarToSourceGroup",e);this.setVisible(!e)};u.prototype.setRgba=function(e){this.setProperty("rgba",e);this._redrawRGBA()};u.prototype._redrawRGBA=function(){const e=this.getRgba();const t=this.$();if(e&&t){const i=this.getModel();t.css("background-color",e);t.off("mouseenter mouseleave");let o;const s=t.css("border").split("px")[0];if(s>0){o=t.css("border-color")}else{o=e}t.hover(()=>{if(i&&!i.getProperty("/tileActionModeActive")){const e=t.css("box-shadow");const i=e?e.split(") ")[1]:null;if(i){t.css("box-shadow",`${i} ${o}`)}}},()=>{t.css("box-shadow","")})}};return u});
//# sourceMappingURL=Tile.js.map