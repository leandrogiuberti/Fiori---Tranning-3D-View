// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/util/Deferred","sap/ushell/ui/launchpad/VizInstance","sap/m/library","sap/base/Log","sap/ushell/library","sap/ushell/utils/chipsUtils","sap/ushell/ui/launchpad/VizInstanceRenderer","sap/ushell/Container"],(t,e,i,s,n,a,o,r)=>{"use strict";const p=i.LoadState;const h=n.DisplayFormat;const c=e.extend("sap.ushell.ui.launchpad.VizInstanceAbap",{metadata:{library:"sap.ushell"},renderer:o});c.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oLoadDeferred=new t;this._oChipInstancePromise=r.getServiceAsync("PageBuilding").then(t=>{const e=t.getFactory();const i=this.getInstantiationData();let s;let n;if(!i.simplifiedChipFormat){s={chipId:i.chip.id,chip:i.chip}}else{const t=i.chip||{};n=t.bags;s={chipId:t.chipId,configuration:t.configuration?JSON.stringify(t.configuration):"{}"}}const o=e.createChipInstance(s);a.addBagDataToChipInstance(o,n);return o})};c.prototype.load=function(t){this._oChipInstancePromise.then(t=>{this._oChipInstance=t;return new Promise(this._oChipInstance.load)}).then(()=>{if(this.getPreview()){const t=this._oChipInstance.getContract("preview");if(t){t.setEnabled(true)}}this._setVisible(this.getActive());return this._oChipInstance.getImplementationAsSapui5Async()}).then(t=>{this._setChipInstanceType();this.setContent(t);if(t.getComponentInstance&&t.getComponentInstance()){t.getComponentInstance().setParent(this)}this._oLoadDeferred.resolve()}).catch(t=>{this.setState(p.Failed);this._oLoadDeferred.reject(t)});return this._oLoadDeferred.promise};c.prototype.loaded=function(){return this._oLoadDeferred.promise};c.prototype._setChipInstanceType=function(){const t=this._oChipInstance.getContract("types");if(t){t.setType(this._mapDisplayFormatToChip(this.getDisplayFormat()))}};c.prototype._mapDisplayFormatToChip=function(t){const e={};e[h.Standard]="tile";e[h.StandardWide]="tile";e[h.Compact]="link";e[h.Flat]="flat";e[h.FlatWide]="flatwide";return e[t]};c.prototype._setVisible=function(t){const e=this._oChipInstance&&!this._oChipInstance.isStub()&&this._oChipInstance.getContract("visible");if(e){e.setVisible(t)}};c.prototype.refresh=function(){if(this._oChipInstance){this._oChipInstance.refresh()}};c.prototype.setActive=function(t,e){this._setVisible(t);if(e){this.refresh()}return this.setProperty("active",t,false)};return c});
//# sourceMappingURL=VizInstanceAbap.js.map