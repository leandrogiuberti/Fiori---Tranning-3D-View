// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/m/Input","sap/m/library","sap/m/Text","sap/ui/base/ManagedObject","sap/ui/core/Control","sap/ui/core/EventBus","sap/ui/core/Icon","sap/ushell/override","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/PlusTile","sap/ushell/utils","sap/ushell/ui/launchpad/TileContainerRenderer","sap/ushell/Container","sap/ui/dom/jquery/selectText"],(e,t,i,o,s,n,l,r,a,u,p,d,c,f,h)=>{"use strict";const g=i.HeaderLevel;const y=n.extend("sap.ushell.ui.launchpad.TileContainer",{metadata:{library:"sap.ushell",properties:{scrollType:{type:"string",group:"Misc",defaultValue:"item"},animationSpeed:{type:"int",group:"Misc",defaultValue:500},groupId:{type:"string",group:"Misc",defaultValue:null},showHeader:{type:"boolean",group:"Misc",defaultValue:true},showPlaceholder:{type:"boolean",group:"Misc",defaultValue:true},defaultGroup:{type:"boolean",group:"Misc",defaultValue:false},isLastGroup:{type:"boolean",group:"Misc",defaultValue:false},headerText:{type:"string",group:"Misc",defaultValue:null},headerLevel:{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:g.H2},groupHeaderLevel:{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:g.H4},showGroupHeader:{type:"boolean",group:"Misc",defaultValue:true},homePageGroupDisplay:{type:"string",defaultValue:null},visible:{type:"boolean",group:"Misc",defaultValue:true},sortable:{type:"boolean",group:"Misc",defaultValue:true},showNoData:{type:"boolean",group:"Misc",defaultValue:false},noDataText:{type:"string",group:"Misc",defaultValue:""},isGroupLocked:{type:"boolean",group:"Misc",defaultValue:null},isGroupSelected:{type:"boolean",group:"Misc",defaultValue:false},editMode:{type:"boolean",group:"Misc",defaultValue:false},showBackground:{type:"boolean",group:"Misc",defaultValue:false},icon:{type:"string",group:"Misc",defaultValue:"sap-icon://locked"},showIcon:{type:"boolean",group:"Misc",defaultValue:false},deluminate:{type:"boolean",group:"Misc",defaultValue:false},showMobileActions:{type:"boolean",group:"Misc",defaultValue:false},enableHelp:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false},showEmptyLinksArea:{type:"boolean",group:"Misc",defaultValue:false},showEmptyLinksAreaPlaceHolder:{type:"boolean",group:"Misc",defaultValue:false},hidden:{type:"boolean",group:"Misc",defaultValue:false},transformationError:{type:"boolean",group:"Misc",defaultValue:false},supportLinkPersonalization:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{tiles:{type:"sap.ui.core.Control",multiple:true,singularName:"tile"},links:{type:"sap.ui.core.Control",multiple:true,singularName:"link"},beforeContent:{type:"sap.ui.core.Control",multiple:true,singularName:"beforeContent"},afterContent:{type:"sap.ui.core.Control",multiple:true,singularName:"afterContent"},headerActions:{type:"sap.ui.core.Control",multiple:true,singularName:"headerAction"}},events:{afterRendering:{},add:{},titleChange:{}}},renderer:f});y.prototype.init=function(){this.bIsFirstTitleChange=true;this.setProperty("noDataText",p.i18n.getText("noFilteredItems"),true);this._sDefaultValue=p.i18n.getText("new_group_name");this.oNoLinksText=new o({text:p.i18n.getText("emptyLinkContainerInEditMode")}).addStyleClass("sapUshellNoLinksAreaPresentTextInner");this.oTransformationErrorText=new o({text:p.i18n.getText("transformationErrorText")}).addStyleClass("sapUshellTransformationErrorText");this.oTransformationErrorIcon=new r({src:"sap-icon://message-error"}).addStyleClass("sapUshellTransformationErrorIcon");this.oIcon=new r({src:this.getIcon()}).addStyleClass("sapUshellContainerIcon");this.oPlusTile=new d({groupId:this.getGroupId(),enableHelp:this.getEnableHelp(),press:[this.fireAdd,this]}).setParent(this);const e=function(){this.getDomRef("groupheader").focus();this._stopEdit();const t=this.oEditInputField.getDomRef();if(t){t.removeEventListener("focusout",e)}}.bind(this);this.oEditInputField=new t({placeholder:this._sDefaultValue,value:this.getHeaderText()}).addEventDelegate({onBeforeRendering:function(){const t=this.oEditInputField.getDomRef();if(t){t.removeEventListener("focusout",e)}}.bind(this),onAfterRendering:function(){setTimeout(()=>{const t=this.oEditInputField.$("inner");t.focus();t.selectText(0,t.val().length);const i=this.oEditInputField.getDomRef();if(i){i.addEventListener("focusout",e)}},0)}.bind(this)}).addStyleClass("sapUshellTileContainerTitleInput");h.getServiceAsync("FlpLaunchPage").then(e=>{if(e.isLinkPersonalizationSupported()){y.prototype.isLinkPersonalizationOveride()}});this.fnTitleTextClickHandler=this._titleTextClickHandler.bind(this)};y.prototype.onBeforeRendering=function(){const e=this.getDomRef("titleText");if(e){e.removeEventListener("click",this.fnTitleTextClickHandler)}const t=this.getTiles();const i=this.getLinks();const o=t.concat(i);o.forEach(e=>{const t=e.getDomRef();if(t){const e=t.getAttribute("data-oldTabindex");if(e){t.setAttribute("tabindex",e);t.removeAttribute("data-oldTabindex")}else{t.removeAttribute("tabindex")}}})};y.prototype.onAfterRendering=function(){const e=this.getDomRef("titleText");if(e){e.addEventListener("click",this.fnTitleTextClickHandler)}const t=this.getTiles();const i=this.getLinks();const o=t.concat(i);o.forEach(e=>{const t=e.getDomRef();if(t){const e=t.getAttribute("tabindex");if(e){t.setAttribute("data-oldTabindex",e)}t.setAttribute("tabindex","-1")}});const s=t.filter(e=>e.isA("sap.ui.integration.widgets.Card"));this._resizeCards(s);l.getInstance().publish("launchpad","GroupHeaderVisibility");this.fireAfterRendering()};y.prototype._titleTextClickHandler=function(){const e=this.getModel()&&this.getModel().getProperty("/enableRenameLockedGroup");const t=(e||!this.getIsGroupLocked())&&!this.getDefaultGroup()&&this.getTileActionModeActive();this.setEditMode(t)};y.prototype.updateAggregation=a.updateAggregation;y.prototype.setGroupId=function(e,t){this.setProperty("groupId",e,t);this.oPlusTile.setGroupId(e,t);return this};y.prototype.setShowIcon=function(e,t){this.setProperty("showIcon",e,t);this.oIcon.toggleStyleClass("sapUshellContainerIconHidden",!e);return this};y.prototype.groupHasTiles=function(){let e="";let t=this.getTiles();const i=[];if(this.getBindingContext()){e=this.getBindingContext().sPath;t=this.getModel().getProperty(e).tiles}return c.groupHasVisibleTiles(t,i)};y.prototype.getInnerContainersDomRefs=function(){const e=this.getDomRef();if(!e){return null}return[e.querySelector(".sapUshellTilesContainer-sortable"),e.querySelector(".sapUshellLineModeContainer")]};y.prototype.isLinkPersonalizationOveride=function(){y.prototype.updateLinks=function(e){const t=this.getParent();const i=t&&t.getDisplayMode&&t.getDisplayMode()==="tabs";if(i&&!this.getTileActionModeActive()){t.removeLinksFromUnselectedGroups()}if(this.getLinks().length>0){this.removeAllLinks()}s.prototype.updateAggregation.call(this,"links")};y.prototype.destroyLinks=function(t){e.debug(`link is destroyed because: ${t}`,null,"sap.ushell.ui.launchpad.TileContainer")}};y.prototype._resizeCards=function(e){let t;let i;const o=5.5;const s=.4375;let n;let l;let r;let a;for(let u=0;u<e.length;u++){t=e[u];i=t.getManifest();n=i["sap.flp"].rows;l=i["sap.flp"].columns;r=`${l*o+(l-3)*s}rem`;a=`${n*o+(n-1)*s}rem`;t.setHeight(a);t.setWidth(r)}};y.prototype.setEditMode=function(e,t){this.setProperty("editMode",e,t);if(e){this.oEditInputField.setValue(this.getHeaderText())}const i=this.getModel();if(i){i.setProperty("/editTitle",e)}};y.prototype._stopEdit=function(){const e=this.getHeaderText();let t=this.oEditInputField.getValue();let i;t=t.substring(0,256).trim()||this._sDefaultValue;i=t!==e;if(this.bIsFirstTitleChange&&t===this.oEditInputField.getPlaceholder()){i=true}this.bIsFirstTitleChange=false;if(this.getModel()&&this.getModel().getProperty("/editTitle")){this.getModel().setProperty("/editTitle",false,false)}if(i){this.fireTitleChange({newTitle:t});this.setHeaderText(t)}this.setEditMode(false)};y.prototype.exit=function(){if(this.oNoLinksText){this.oNoLinksText.destroy()}if(this.oTransformationErrorText){this.oTransformationErrorText.destroy()}if(this.oTransformationErrorIcon){this.oTransformationErrorIcon.destroy()}if(this.oIcon){this.oIcon.destroy()}if(this.oPlusTile){this.oPlusTile.destroy()}if(this.oEditInputField){this.oEditInputField.destroy()}const e=this.getDomRef("titleText");if(e){e.removeEventListener("click",this.fnTitleTextClickHandler)}if(n.prototype.exit){n.prototype.exit.apply(this,arguments)}};return y});
//# sourceMappingURL=TileContainer.js.map