// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/util/Deferred","sap/ushell/ui/launchpad/VizInstance","sap/m/library","sap/ui/core/Component","sap/base/util/ObjectPath","sap/base/util/deepExtend","sap/ui/core/ComponentContainer","sap/ushell/UI5ComponentType","sap/ushell/ui/launchpad/VizInstanceRenderer","sap/ushell/Container"],(t,e,o,n,i,s,r,a,p,l)=>{"use strict";const h=o.LoadState;const c=e.extend("sap.ushell.ui.launchpad.VizInstanceCdm",{metadata:{library:"sap.ushell"},renderer:p});c.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oLoadDeferred=new t};c.prototype.load=function(t){let e;if(t===true){e=this._loadCustomVizType()}else{e=this._loadStandardVizType()}e.then(t=>{this._oComponent=t;const e=new r({component:t});t.setParent(this);this.setContent(e);if(this.getSizeBehavior()){this.setTileSizeBehavior(this.getSizeBehavior())}this._setComponentTileVisible(this.getActive());this.setTileEditable(this.getEditable());this._oLoadDeferred.resolve(t)}).catch(t=>{this.setState(h.Failed);this._oLoadDeferred.reject(t)});return this._oLoadDeferred.promise};c.prototype.loaded=function(){return this._oLoadDeferred.promise};c.prototype._loadStandardVizType=function(){const t=this._getComponentConfiguration();return n.create(t)};c.prototype._loadCustomVizType=function(){const t=this._getCustomComponentConfiguration();const e={};const o=[];return l.getServiceAsync("Ui5ComponentLoader").then(n=>n.createComponent(t,e,o,a.Visualization)).then(t=>{if(t&&t.componentHandle&&t.componentHandle.getInstance){return t.componentHandle.getInstance()}throw new Error("Create component failed: no instance found in the component handle.")})};c.prototype._getComponentConfiguration=function(){const t=this.getInstantiationData().vizType;const e=this.getVizConfig();let o=i.get(["sap.platform.runtime","componentProperties"],t);o=s({},this._getComponentProperties(),o);const n={name:t["sap.ui5"].componentName,componentData:{properties:o},url:i.get(["sap.platform.runtime","componentProperties","url"],t),manifest:i.get(["sap.platform.runtime","componentProperties","manifest"],t),asyncHints:i.get(["sap.platform.runtime","componentProperties","asyncHints"],t)};const r=i.get(["sap.platform.runtime","includeManifest"],t);const a=i.get(["sap.platform.runtime","includeManifest"],e);if(r||a){n.manifest=s({},t,e)}if(typeof n.manifest==="object"){o.manifest=n.manifest}return n};c.prototype._getCustomComponentConfiguration=function(){const t=this._getComponentConfiguration();const e={loadCoreExt:true,loadDefaultDependencies:false,componentData:t.componentData,url:t.url,applicationConfiguration:{},reservedParameters:{},applicationDependencies:t,ui5ComponentName:t.name};return e};c.prototype._getComponentProperties=function(){return{title:this.getTitle(),subtitle:this.getSubtitle(),icon:this.getIcon(),info:this.getInfo(),indicatorDataSource:this.getIndicatorDataSource(),dataSource:this.getDataSource(),contentProviderId:this.getContentProviderId(),contentProviderLabel:this.getContentProviderLabel(),targetURL:this.getTargetURL(),displayFormat:this.getDisplayFormat(),numberUnit:this.getNumberUnit(),preview:this.getPreview()}};c.prototype._setComponentTileVisible=function(t){if(this._oComponent&&typeof this._oComponent.tileSetVisible==="function"){this._oComponent.tileSetVisible(t)}};c.prototype.setActive=function(t,e){this._setComponentTileVisible(t);if(e){this.refresh()}return this.setProperty("active",t,false)};c.prototype.setTileEditable=function(t){if(this._oComponent&&typeof this._oComponent.tileSetEditMode==="function"){this._oComponent.tileSetEditMode(t)}return this};c.prototype.setTileSizeBehavior=function(t){if(this._oComponent&&typeof this._oComponent.tileSetSizeBehavior==="function"){this._oComponent.tileSetSizeBehavior(t)}e.prototype.setTileSizeBehavior.apply(this,arguments);return this};c.prototype.setPreview=function(t){const o=!!this.getProperty("preview")&&!t;if(this._oComponent&&typeof this._oComponent.tileSetPreview==="function"){this._oComponent.tileSetPreview(t)}if(o){this.refresh()}e.prototype.setPreview.apply(this,arguments);return this};c.prototype.refresh=function(){if(this._oComponent&&typeof this._oComponent.tileRefresh==="function"){this._oComponent.tileRefresh()}};return c});
//# sourceMappingURL=VizInstanceCdm.js.map