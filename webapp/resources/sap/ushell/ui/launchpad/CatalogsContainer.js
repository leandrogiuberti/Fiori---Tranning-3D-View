// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/ui/core/Control","sap/ui/performance/Measurement","sap/ushell/library","sap/ushell/ui/launchpad/TileContainerUtils","sap/ushell/resources"],(t,e,i,n,s,a)=>{"use strict";const l=e.extend("sap.ushell.ui.launchpad.CatalogsContainer",{metadata:{library:"sap.ushell",properties:{categoryFilter:{type:"string",defaultValue:"ALL"},categoryAllocateTiles:{type:"int",defaultValue:"0"}},aggregations:{catalogs:{type:"sap.ushell.ui.launchpad.CatalogEntryContainer",multiple:true}}},renderer:{apiVersion:2,render:function(t,e){const i=e.getCatalogs();t.openStart("div",e);t.class("sapUshellCatalogsContainer");t.openEnd();for(let e=0,n=i.length;e<n;++e){t.renderControl(i[e])}t.close("div")}}});l.prototype.onBeforeRendering=function(){if(this.getCatalogs().length){this.setBusy(false)}};l.prototype.setPagingManager=function(t){i.start("FLP:DashboardManager.CatalogsRendering","CatalogsRendering","FLP");i.pause("FLP:DashboardManager.CatalogsRendering");this.oPagingManager=t};l.prototype.updateAllocatedUnits=function(t){this.nAllocatedUnits=t};l.prototype.applyPagingCategoryFilters=function(t,e){const i=this.getCatalogs();this.nAllocatedUnits=t;if(e&&e!==a.i18n.getText("all")){this.sCatalogTerm=e}else{this.sCatalogTerm=""}if(!this.filters){this.filters={}}if(!this.filters.catalogEntry){this.filters.catalogEntry=function(t){const e=t.getPath();const i=t.getProperty("title")===this.sCatalogTerm;if(!this.sCatalogTerm){return}const n=this.indexingMaps.onScreenPathIndexMap[e];if(n){n.isVisible=i}}.bind(this)}if(!this.filters.pagination){this.filters.pagination=function(t){const e=t.getPath();const i=this.indexingMaps.onScreenPathIndexMap[e];if(!this.nAllocatedUnits){i.isVisible=false}}.bind(this)}if(!this.indexingMaps){return}this.indexingMaps=s.indexOnScreenElements(i);s.applyFilterOnAllItems(this.mBindingInfos.catalogs,this.filters,this.processFiltering.bind(this));if(this.indexingMaps){s.showHideTilesAndHeaders(this.indexingMaps,this.getCatalogs())}};l.prototype.processFiltering=function(t){const e=this.getCatalogs();const i=t.getPath();const n=this.indexingMaps.onScreenPathIndexMap[i];const s=e[n.aItemsRefrenceIndex];let a;if(n.isVisible&&(!this.catalogPagination[i]||this.catalogPagination[i]==="start")){if(this.catalogPagination[i]===undefined){this.catalogPagination[i]="start";s.catalogState={}}else if(this.catalogPagination[i]==="start"){const t=s.nNumberOfVisibleElements;this.nAllocatedUnits+=t.appBoxesContainer+t.customTilesContainer}a=this.nAllocatedUnits;s.handleElements("appBoxesContainer");s.handleElements("customTilesContainer");if(s.catalogState.appBoxesContainer==="full"&&s.catalogState.customTilesContainer==="full"){this.catalogPagination[i]="full"}if(a-this.nAllocatedUnits>0){this.bSearchResults=true}else{n.isVisible=false}}else if(n.isVisible&&this.catalogPagination[i]==="full"){const t=s.nNumberOfVisibleElements;const e=t.appBoxesContainer+t.customTilesContainer;if(e===0){n.isVisible=false}}};l.prototype.resetCatalogPagination=function(){this.catalogPagination={}};l.prototype.updateAggregation=function(n){t.debug("Updating TileContainer. Reason: ",n);try{i.resume("FLP:DashboardManager.CatalogsRendering");this.filterElements();i.pause("FLP:DashboardManager.CatalogsRendering")}catch(t){e.prototype.updateAggregation.apply(this,arguments)}};l.prototype.addNewItem=function(t,e){let i;const n=t.getPath();const a=s.createNewItem.bind(this)(t,e);if(!a.filters){a.filters={};a.filters.appBoxesContainer={};a.filters.customTilesContainer={};a.filters.appBoxesContainer.pagination=function(t){const e=this.indexingMaps.appBoxesContainer.onScreenPathIndexMap[t.getPath()];if(this.getAllocatedUnits){e.isVisible=!!this.getAllocatedUnits()}}.bind(a);a.filters.customTilesContainer.pagination=function(t){const e=this.indexingMaps.customTilesContainer.onScreenPathIndexMap[t.getPath()];if(this.getAllocatedUnits){e.isVisible=!!this.getAllocatedUnits()}}.bind(a)}a.nAllocatedUnits=this.nAllocatedUnits;a.getAllocatedUnits=function(){return this.nAllocatedUnits}.bind(this);a.elementFiltered=function(t){i=this.oPagingManager.getSizeofSupportedElementInUnits("tile");this.nAllocatedUnits+=t*i;if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0}}.bind(this);a.elementsVisible=function(t){i=this.oPagingManager.getSizeofSupportedElementInUnits("tile");this.nAllocatedUnits-=t*i;if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0}}.bind(this);a.newElementCreated=function(t,e){this.nAllocatedUnits-=this.oPagingManager.getSizeofSupportedElementInUnits("tile");if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0}}.bind(this);a.currElementVisible=function(){this.nAllocatedUnits-=this.oPagingManager.getSizeofSupportedElementInUnits("tile");if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0}}.bind(this);s.addNewItem.bind(this)(a,e);const l=this.getCatalogs();this.indexingMaps.onScreenPathIndexMap[n]={aItemsRefrenceIndex:l.length-1,isVisible:true};return true};l.prototype.handleFilters=function(){if(!this.catalogPagination){this.catalogPagination={}}if(!this.catalogsElementsMap){this.catalogsElementsMap={}}if(!this.filters){this.filters={}}};l.prototype.setHandleSearchCallback=function(t){this.handleSearchCallback=t};l.prototype.filterElements=function(){const t="catalogs";const e=this.mBindingInfos[t].binding;const i=e.getContexts();let n=this.getCatalogs();if(!this.indexingMaps){this.indexingMaps=s.indexOnScreenElements(n)}this.handleFilters();const a=s.markVisibleOnScreenElements(i,this.indexingMaps,false);if(!s.validateOrder(i,n,a)){throw new Error("Invalid order")}s.createMissingElementsInOnScreenElements(this.indexingMaps,i,a,this.addNewItem.bind(this),n,this.filters,t);n=this.getCatalogs();s.showHideTilesAndHeaders(this.indexingMaps,n);if(this.handleSearchCallback){this.handleSearchCallback()}};return l});
//# sourceMappingURL=CatalogsContainer.js.map