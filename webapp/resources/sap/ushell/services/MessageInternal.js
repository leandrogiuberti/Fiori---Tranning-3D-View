// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/m/MessageBox","sap/ushell/Config","sap/ushell/resources","sap/m/Dialog","sap/m/Text","sap/m/Link","sap/m/Button","sap/m/VBox","sap/m/FormattedText","sap/m/library","sap/ui/core/library"],(e,t,n,s,o,i,a,r,l,c,u,d)=>{"use strict";const p=u.ButtonType;const f=u.DialogType;const h=d.ValueState;const y=u.FlexRendertype;function g(){let u;this.init=function(e){u=e;return this};this.show=function(t,n,s){if(!n){e.error("Message must not be empty.");return}if(u&&typeof u==="function"){u(t,n,s||{})}else{this.buildMessage(t,n,s||{})}};this.buildMessage=function(e,n,s){let o={title:s.title,actions:s.actions,details:s.details,onClose:s.callback,emphasizedAction:s.emphasizedAction};let i;switch(e){case g.Type.ERROR:this._createAndOpenErrorDialog(n,o);return;case g.Type.CONFIRM:if(!s.actions){i="confirm"}else if(s.actions.indexOf("DELETE")>-1){i="warning";o.emphasizedAction=t.Action.DELETE}else{o.icon=t.Icon.QUESTION;i="show"}break;case g.Type.INFO:i="info";this.buildAndSendMessageToast(n,s.duration||3e3);return;default:o={duration:s.duration||3e3};i="show";break}this.sendMessageBox(n,i,o)};this._copyToClipboard=function(e,t,n){let o=t.details;if(typeof t.details==="object"){o=JSON.stringify(t.details,null,"\t")}const i=[`Title: ${n||"-"}`,`Message: ${e||"-"}`,`Details: ${o||"-"}`];const a=document.activeElement;const r=document.createElement("textarea");let l;try{r.contentEditable=true;r.readonly=false;r.innerText=i.join("\n");document.documentElement.appendChild(r);if(navigator.userAgent.match(/ipad|iphone/i)){const e=document.createRange();e.selectNodeContents(r);window.getSelection().removeAllRanges();window.getSelection().addRange(e);r.setSelectionRange(0,999999)}else{r.select()}const e=document.execCommand("copy");l=e?"CopyWasSuccessful":"CopyWasNotSuccessful"}catch(e){l="CopyWasNotSuccessful"}finally{this.buildAndSendMessageToast(s.i18n.getText(l));document.documentElement.removeChild(r);window.getSelection().removeAllRanges();a.focus()}};this._createAndOpenErrorDialog=function(e,t){const o=t.details;let i;if(o){i=new c({htmlText:typeof o==="object"?o.info:o})}const a=this.errorWithDetails(e,i,t);if(n.last("/core/extension/SupportTicket")&&e!==s.i18n.getText("supportTicketCreationFailed")){a.addButton(new r({text:s.i18n.getText("contactSupportBtn"),press:()=>{sap.ui.require(["sap/ushell/ui/footerbar/ContactSupportButton"],e=>{const t=new e;if(t){t.showContactSupportDialog();t.destroy()}});a.close()}}))}if(document.queryCommandSupported("copy")){a.addButton(new r({text:s.i18n.getText("CopyToClipboardBtn"),press:this._copyToClipboard.bind(this,e,t,a.getTitle())}))}a.addButton(new r({text:s.i18n.getText("closeBtn"),type:p.Emphasized,press:a.close.bind(a)}))};this.buildAndSendMessageToast=function(e,t){sap.ui.require(["sap/m/MessageToast"],n=>{n.show(e,{duration:t})})};this.sendMessageBox=function(n,s,o){if(typeof t[s]==="function"){t[s](n,o)}else{e.error(`Unknown Message type: ${s}`,null,"MessageInternal Service")}};this.info=function(e,t){this.show(g.Type.INFO,e,{duration:t||3e3})};this.error=function(t,n){e.error(t);this.show(g.Type.ERROR,t,{title:n})};this.confirm=function(e,t,n,s){this.show(g.Type.CONFIRM,e,{title:n,callback:t,actions:s})};this.errorWithDetails=function(e,t,n,c){if(Array.isArray(t)){c=t;t=null}let u=typeof n==="string"?n:n?.title;if(typeof t==="string"){c=u;u=t;t=null}const d=new i({text:e,visible:!!e});if(t){d.addStyleClass("sapUiSmallMarginBottom")}const g=new o({state:h.Error,type:f.Message,contentWidth:"30rem",title:u||s.i18n.getText("error"),content:[new l({renderType:y.Bare,items:[d,new a({text:s.i18n.getText("ViewDetails"),visible:!!t,press:function(){g.getContent()[0].addItem(t);this.destroy()}})]})],buttons:c,endButton:new r({text:s.i18n.getText("closeBtn"),type:p.Emphasized,press:function(){g.close()}}),afterClose:function(){this.destroy()}}).addStyleClass("sapContrastPlus");if(typeof n?.onClose==="function"){g.attachAfterClose(n.onClose)}g.open();return g};this.Type=g.Type}g.Type={INFO:0,ERROR:1,CONFIRM:2};g.hasNoAdapter=true;return g});
//# sourceMappingURL=MessageInternal.js.map