{"version":3,"file":"MessageBrokerEngine.js","names":["sap","ui","define","Log","deepClone","ClientAlias","ClientConnectionMessage","MessageBrokerEngine","bEnabled","bSkipEmitInformAboutOtherClients","oLogger","getLogger","sAcceptedOrigins","Set","sConnectedClients","oSubscribedClients","oClientsPerChannel","aPendingTimeouts","constructor","this","addAcceptedOrigin","window","location","origin","setEnabled","bVal","connect","sClientId","fnClientConnectionCallback","Error","length","has","error","clientId","channels","clientConnectionCallback","push","setTimeout","emitInformAboutOtherClients","add","oClient","aOtherSubscribedClients","Object","values","filter","oOtherClient","forEach","ClientSubscribed","disconnect","sChannelId","emitConnectionEvent","ClientUnsubscribed","delete","subscribe","aSubscribedChannels","fnMessageCallback","oChannel","channelId","oClientChannelData","find","messageCallback","oClientSubscriptionData","bAlreadySubscribed","some","oSubChannel","keys","unsubscribe","aUnsubscribedChannels","Array","isArray","warning","bFound","oChannelToRemove","publish","sMessageId","sMessageName","vTargetClientIds","oData","AllClients","undefined","aTargetClientIds","aSubscribedClients","oPublishingClient","oSubClient","bUsesWildcard","includes","aTargetClients","sTargetClientId","sendMessage","sOrigin","oUrl","URL","protocol","port","endsWith","substring","removeAcceptedOrigin","getAcceptedOrigins","from","getSubscribedClients","aChannels","reset","clear","iTimeout","clearTimeout","skipEmitInformAboutOtherClients"],"sources":["MessageBrokerEngine-dbg.js"],"mappings":"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","ignoreList":[]}