// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/utils","sap/ushell/services/PersonalizationV2/constants.private","sap/ushell/services/PersonalizationV2/Variant"],(t,a,e)=>{"use strict";function n(e,n){let r;const i=new t.Map;this._oContextContainer=n;this._sVariantSetKey=e;this._oVariantSetData=this._oContextContainer._getItemValueInternal(a.S_VARIANT_PREFIX,this._sVariantSetKey);if(!Object.hasOwn(this._oVariantSetData,"currentVariant")){throw new Error("Corrupt variant set data: sap.ushell.services.Personalization")}if(Object.hasOwn(this._oVariantSetData,"variants")){for(r in this._oVariantSetData.variants){if(Object.hasOwn(this._oVariantSetData.variants,r)){const t=this._oVariantSetData.variants[r].name;const a=this._oVariantSetData.variants[r].variantData;if(i.containsKey(t)){throw new Error("Variant name already exists: sap.ushell.services.Personalization")}else{if(typeof r!=="string"){throw new Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization")}if(typeof t!=="string"){throw new Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization")}if(a&&typeof a!=="object"){throw Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization")}i.put(t,r)}}}}else{throw new Error("Corrupt variant set data: sap.ushell.services.Personalization")}return this}n.prototype._getVariantSet=function(){return this._oVariantSetData};n.prototype._serialize=function(){this._oContextContainer._setItemValueInternal(a.S_VARIANT_PREFIX,this._sVariantSetKey,this._oVariantSetData)};n.prototype.getCurrentVariantKey=function(){return this._getVariantSet().currentVariant};n.prototype.setCurrentVariantKey=function(t){this._getVariantSet().currentVariant=t;this._serialize()};n.prototype.getVariantKeys=function(){const a=new t.Map;const e=this._getVariantSet(this._sVariantSetKey);let n;if(Object.hasOwn(e,"variants")){for(n in e.variants){if(Object.hasOwn(e.variants,n)){a.put(n,"dummy")}}}else{throw new Error("Corrupt variant set data: sap.ushell.services.Personalization")}return a.keys()};n.prototype.getVariantNamesAndKeys=function(){const a=new t.Map;const e=new t.Map;const n=this._getVariantSet(this._sVariantSetKey);let r;if(Object.hasOwn(n,"variants")){for(r in n.variants){if(Object.hasOwn(n.variants,r)){const t=n.variants[r].name;if(a.containsKey(t)){throw new Error("Variant name already exists: sap.ushell.services.Personalization")}else{a.put(t,r)}e.put(r,"dummy")}}}else{throw new Error("Corrupt variant set data: sap.ushell.services.Personalization")}return a.entries};n.prototype.getVariant=function(t){if(typeof t!=="string"){return undefined}const a=this._getVariantSet(this._sVariantSetKey);if(Object.hasOwn(a,"variants")&&Object.hasOwn(a.variants,t)){const n=a.variants[t].name;const r=a.variants[t].variantData;const i=new e(this,t,n,r);return i}return undefined};n.prototype.getVariantKeyByName=function(t){if(typeof t!=="string"){return undefined}const a=this._getVariantSet(this._sVariantSetKey);let e;if(Object.hasOwn(a,"variants")){for(e in a.variants){if(Object.hasOwn(a.variants,e)){if(t===a.variants[e].name){return e}}}}else{throw new Error("Corrupt variant set data: sap.ushell.services.Personalization")}return undefined};n.prototype.containsVariant=function(t){const a=this._getVariantSet();if(typeof t!=="string"){return undefined}return Object.hasOwn(a,"variants")&&Object.hasOwn(a.variants,t)};n.prototype.addVariant=function(t){const a=this.getVariantKeys();const n=parseInt(a.sort((t,a)=>t-a).reverse()[0],10);const r=isNaN(n)?"0":(n+1).toString();if(a.indexOf(r)>=0){throw new Error(`Variant key '${r}' already exists in variant set '${this._sVariantSetKey}': sap.ushell.services.Personalization`)}if(typeof t!=="string"){throw new Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization")}if(this.getVariantKeyByName(t)!==undefined){const a=`(Old key: '${this.getVariantKeyByName(t)}' New key: '${r}')`;throw new Error(`Variant name '${t}' already exists in variant set '${this._sVariantSetKey}' ${a}: sap.ushell.services.Personalization`)}const i=new e(this,r,t);this._getVariantSet(this._sVariantSetKey).variants[r]={name:t,variantData:{}};this._serialize();return i};n.prototype.deleteVariant=function(t){if(typeof t!=="string"){return}const a=this._getVariantSet();if(a&&a.variants){delete this._oVariantSetData.variants[t]}this._serialize()};return n});
//# sourceMappingURL=VariantSet.js.map