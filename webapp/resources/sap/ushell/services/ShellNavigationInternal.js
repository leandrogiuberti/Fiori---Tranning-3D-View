// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/EventBus","sap/ushell/services/ShellNavigationHashChanger","sap/ui/core/routing/HashChanger"],(t,e,i)=>{"use strict";function n(n,a,s){function h(){sap.ui.require(["sap/m/MessageBox"],t=>{t.show("Due to a configuration change on the server,\nclient and server are out of sync.\n We strongly recommend to reload the page soon.\nReload page now?",{icon:t.Icon.ERROR,title:"Client out of sync with server.",actions:[t.Action.YES,t.Action.NO],onClose:function(e){if(e===t.Action.YES){window.setTimeout(()=>{window.location.reload()},0)}}})})}const r=s&&s.config;this.hashChanger=new e(r);this._navigationFilterForForwardingToRegisteredRouters=function(t,e){const i=this._aRouters.some(t=>t.match(e));if(i){const e=t.getCurrentApplication();const i=e&&e.componentInstance&&!e.homePage;if(i){const t=e.componentInstance.getRouter();if(t){t.stop()}}return this.NavigationFilterStatus.Keep}return this.NavigationFilterStatus.Continue};this.getNavigationContext=function(){const t=this.hashChanger.getCurrentNavigationState();const e=!this.hashChanger.isInnerAppNavigation(t.oldHash,t.newHash);return{isCrossAppNavigation:e,innerAppRoute:this.hashChanger.getHash()}};this.isInitialNavigation=function(){return this._bIsInitialNavigation};this.setIsInitialNavigation=function(t){this._bIsInitialNavigation=t};this.hrefForExternal=function(t,e,i){return this.hashChanger.hrefForExternal(t,e,i)};this.hrefForExternalSync=function(t,e,i){return this.hashChanger.hrefForExternalSync(t,e,i)};this.hrefForAppSpecificHash=function(t){return this.hashChanger.hrefForAppSpecificHash(t)};this.compactParams=function(t,e,i,n){return this.hashChanger.compactParams(t,e,i,n)};this.toExternal=function(t,e,i){return this.hashChanger.toExternal(t,e,i)};this.toAppHash=function(t,e){this.hashChanger.toAppHash(t,e)};this.init=function(e){this._bIsInitialNavigation=true;hasher.prependHash="";i.replaceHashChanger(this.hashChanger);const n=t.getInstance();n.subscribe("sap.ui.core.UnrecoverableClientStateCorruption","RequestReload",h);this.hashChanger.initShellNavigation(e);this._enableHistoryEntryReplacedDetection();return this};this._enableHistoryEntryReplacedDetection=function(){this._lastHashChangeMode=null;this._fnOriginalSetHash=hasher.setHash;this._fnOriginalReplaceHash=hasher.replaceHash;hasher.setHash=function(){this._hashChangedByApp=true;this._lastHashChangeMode="setHash";return this._fnOriginalSetHash.apply(hasher,arguments)}.bind(this);hasher.replaceHash=function(){this._hashChangedByApp=true;this._lastHashChangeMode="replaceHash";return this._fnOriginalReplaceHash.apply(hasher,arguments)}.bind(this)};this.wasHistoryEntryReplaced=function(){return this._lastHashChangeMode==="replaceHash"};this.resetHistoryEntryReplaced=function(){this._lastHashChangeMode=null};this.replaceHashWithoutNavigation=function(t){hasher.changed.active=false;this._fnOriginalSetHash(t);hasher.changed.active=true};this.NavigationFilterStatus=this.hashChanger.NavigationFilterStatus;this.registerNavigationFilter=function(t){this.hashChanger.registerNavigationFilter(t)};this._aRouters=[];this.registerExtraRouter=function(t){this._aRouters.push(t)};this.unregisterNavigationFilter=function(t){this.hashChanger.unregisterNavigationFilter(t)};this.registerNavigationFilter(()=>{if(!this._hashChangedByApp){this.resetHistoryEntryReplaced()}this._hashChangedByApp=undefined;return this.NavigationFilterStatus.Continue});this.registerPrivateFilters=function(t){this.registerNavigationFilter(this._navigationFilterForForwardingToRegisteredRouters.bind(this,t))}}n.hasNoAdapter=true;return n},true);
//# sourceMappingURL=ShellNavigationInternal.js.map