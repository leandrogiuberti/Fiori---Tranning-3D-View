// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define([],()=>{"use strict";function e(e){const n=e||{};const t=n.parameters||{};const r={optional:"[FORMAT]",required:"FORMAT"};const o={regexp:"/VALUE/",reference:"@VALUE@",value:"VALUE",plain:"VALUE",_unknown:"?VALUE?"};const a={allowed:"<+>",notallowed:"<->",ignored:"<o>",_unknown:"<?>"};const u=t&&Object.prototype.toString.apply(t)==="[object Object]"&&Object.keys(t).length>0;if(!u){return`<no params>${a[n.additionalParameters]||a._unknown}`}const s=[];Object.keys(t).forEach(e=>{const n=t[e];const a=n.required?"required":"optional";const u=n.filter&&n.filter.value;const c=n.defaultValue&&n.defaultValue.value;const i=n.filter&&n.filter.format||"plain";const l=n.defaultValue&&n.defaultValue.format||"plain";const f=[];const p=o[i]||o._unknown;const d=o[l]||o._unknown;if(u){f.push(r.required.replace("FORMAT",p.replace("VALUE",u)))}if(c){f.push(r.optional.replace("FORMAT",d.replace("VALUE",c)))}s.push(r[a].replace("FORMAT",`${e}:${f.join("")}`))});return s.join(",")+(a[n.additionalParameters]||a._unknown)}function n(n){return`#${n.semanticObject}-${n.action}{${e(n.signature)}}`}function t(e){function n(e){const n=[{re:new RegExp(/^[/](.+)[/]$/),format:"regexp"},{re:new RegExp(/^[@](.+)[@]$/),format:"reference"},{re:new RegExp(/^[?](.+)[?]$/),format:"???"}].reduce((n,t)=>{const r=e.match(t.re);if(n){return n}if(!r){return null}return{format:t.format,value:r[1]}},null);if(n){return n}return{value:e}}function t(e){let t;let r;let o;const a="<no params>";const u="[^\\]\\[]";const s=`(${u}+?):(${u}*)(.*)`;const c=`\\[${s}\\]`;const i=`${a}|${c}|${s}`;const l=new RegExp(`^${i}$`);const f={success:false,name:null,value:{}};const p=e.match(l);if(!p){return f}const d=p.shift();while(p.length>0){o=p.shift();r=p.shift();t=p.shift();if(o){f.name=o;if(r){f.value.filter=n(r)}if(t){f.value.defaultValue=n(t.replace(/\[(.+)\]/,"$1"))}f.value.required=d.charAt(0)!=="["}}f.success=true;return f}function r(e){return[{"<+>":"allowed"},{"<->":"notallowed"},{"<o>":"ignored"}].reduce((n,t,r,o)=>{if(n){return n}const a=Object.keys(t)[0];if(e===a){return t[a]}return null},null)}function o(e){const n=[];e.split(":").reduce((e,t,r,o)=>{let a;let u;let s;if(r===0){return t}if(r<o.length-1){s=t.split(",");if(s.length>1){u=s.pop();a=s.join(",")}else{return`${e}:${t}`}}else{a=t}n.push([e,a].join(":"));return u},"");return n}const a={parameters:{}};const u=e.substr(e.length-3,3);const s=!!u.match(/<[?o+-]>/);let c=e;if(s){c=e.substr(0,e.length-3)}const i=o(c);i.forEach(n=>{const r=t(n);if(!r.success){throw new Error(`Cannot parse parameters from ${e}`)}if(r.name){a.parameters[r.name]=r.value}});if(s){const e=r(u);if(e){a.additionalParameters=r(u)}}else{a.additionalParameters="ignored"}return a}function r(e){const n=e.match(/^#(.+?)-(.+?)({(.+)})?$/);if(!n){throw new Error("Cannot parse inbound")}const r={semanticObject:n[1],action:n[2],signature:{parameters:{}}};if(!n[3]){return r}r.signature=t(n[4]);return r}return{formatInboundSignature:e,parseInboundSignature:t,parseInbound:r,formatInbound:n}});
//# sourceMappingURL=Formatter.js.map