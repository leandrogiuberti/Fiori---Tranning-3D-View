// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/f/library"],t=>{"use strict";const o=t.NavigationDirection;function e(){this._oFocusHistory={oLastGrid:null,sLastDirection:null,iLastRow:null,iTargetRow:null};this._bInitialItemFocused=false}e.prototype._handleBorderReached=function(t,o){const e=this._getCurrentFocusElement();const i=t.getSource().getAggregation("_gridContainer");const s=t.getParameter("direction");const r=t.getParameter("row");const n=t.getParameter("column");if(this._isOppositeDirection(s)&&this._oFocusHistory.oLastGrid&&!this._oFocusHistory.oLastGrid.isDestroyed()&&r===this._oFocusHistory.iTargetRow){this._oFocusHistory.oLastGrid.focusItemByDirection(s,this._oFocusHistory.iLastRow,n);this._saveFocusHistory(i,s,r)}else{const t=this._findNextGrid(e,o,s);if(t){const o=this._findSuitableRowInGrid(t,e,s);t.focusItemByDirection(s,o,n);this._saveFocusHistory(i,s,r,o)}}};e.prototype._isOppositeDirection=function(t){switch(this._oFocusHistory.sLastDirection){case o.Right:return t===o.Left;case o.Left:return t===o.Right;case o.Up:return t===o.Down;case o.Down:return t===o.Up;default:return false}};e.prototype._findNextGrid=function(t,o,e){const i=this._getAllGrids(o);const s=[];i.forEach(o=>{if(o===t){return}const i=this._getDistanceToElementInDirection(t,o.getDomRef(),e);if(i){s.push({oGrid:o,iDistance:i})}});const r=s.sort((t,o)=>t.iDistance-o.iDistance);return r[0]?r[0].oGrid:null};e.prototype._getAllGrids=function(t){const o=t.getRows();const e=[];o.forEach(t=>{const o=t.getColumns();o.forEach(t=>{const o=t.getCells();o.forEach(t=>{const o=t.getAggregation("_gridContainer");if(o){e.push(o)}})})});return e};e.prototype._findSuitableRowInGrid=function(t,o,e){const i=t.getNavigationMatrix();let s;const r=i.findIndex(t=>t.find(t=>{if(t===false||t===s){return false}s=t;if(this._getDistanceToElementInDirection(o,t,e)!==null){return true}}));return r>=0?r:0};e.prototype._getDistanceToElementInDirection=function(t,e,i){const s=e.getBoundingClientRect();const r=t.getBoundingClientRect();switch(i){case o.Right:if(r.right<s.left&&r.bottom>s.top&&r.top<s.bottom){return s.left-r.right}break;case o.Left:if(r.left>s.right&&r.bottom>s.top&&r.top<s.bottom){return r.left-s.right}break;case o.Down:if(r.bottom<s.top&&r.left<s.right&&r.right>s.left){return s.top-r.bottom}break;case o.Up:if(r.top>s.bottom&&r.left<s.right&&r.right>s.left){return r.top-s.bottom}break;default:break}return null};e.prototype._saveFocusHistory=function(t,o,e,i){this._oFocusHistory.oLastGrid=t;this._oFocusHistory.sLastDirection=o;this._oFocusHistory.iLastRow=e;this._oFocusHistory.iTargetRow=i};e.prototype._getCurrentFocusElement=function(){return document.activeElement};e.prototype.focusFirstItem=function(t){const o=this._getAllGrids(t);const e=o.find(t=>t.getItems().length>0);if(e&&!this._bInitialItemFocused){this._bInitialItemFocused=true;const t=e.getItems()[0];const o=t.getDomRef();if(o){const t=o.closest(".sapFGridContainerItemWrapper");if(t){t.focus({preventScroll:true})}}}};return e});
//# sourceMappingURL=WorkPageBuilder.accessibility.js.map