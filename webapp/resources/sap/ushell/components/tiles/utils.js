// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/i18n/Localization","sap/ui/core/Element","sap/ui/core/Locale","sap/ushell/services/ClientSideTargetResolution/PrelaunchOperations","sap/ushell/resources","sap/ui/thirdparty/datajs","sap/ui/core/mvc/View","sap/ui/model/json/JSONModel","sap/ui/core/library","sap/m/library","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/IconPool","sap/ui/core/Icon","sap/m/SelectDialog","sap/m/StandardListItem","sap/m/Text","sap/m/TableSelectDialog","sap/m/Column","sap/m/ColumnListItem","sap/ui/core/CustomData","sap/ui/core/Item","sap/ui/core/message/MessageType","sap/m/Label","sap/ui/model/Sorter","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/format/NumberFormat"],(e,t,i,a,n,s,o,l,r,c,p,u,g,d,_,f,b,y,I,m,V,v,w,S,h,jQuery,x,T)=>{"use strict";const P=r.ValueState;const D=r.mvc.ViewType;const C=c.ButtonType;const A={};A.isInitial=function(e){return e==="App Launcher – Static"||e==="App Launcher – Dynamic"||e==="Target Mapping"};A.awaitResourceBundle=n.awaitResourceBundle;A.getResourceBundleModel=function(){return n.i18nModel};A.getResourceBundle=function(){return n.i18n};A.getEmptyRowObj=function(e){return{name:"",mandatory:false,value:"",isRegularExpression:false,defaultValue:"",valEnabled:false||!e,defValEnabled:true,editable:e}};A.getEmptyTileActionsRowObj=function(e){const t=A.getResourceBundle();return{menu_title:"",target_type:t.getText("configuration.tile_actions.table.target_type.url"),navigation_target:"",action:"",icon:"",isTargetTypeIntent:false,editable:e}};function R(e,t){const i={};const a=A.getResourceBundle();i.menu_title=e.text;i.icon=e.icon;if(e.targetURL.charAt(0)==="#"){i.target_type=a.getText("configuration.tile_actions.table.target_type.intent");const t=e.targetURL.split("-");i.navigation_target=t[0].substring(1,t[0].length);i.action=t[1];i.isTargetTypeIntent=true}else{i.target_type=a.getText("configuration.tile_actions.table.target_type.url");i.navigation_target=e.targetURL;i.action="";i.isTargetTypeIntent=false}i.editable=t;return i}A.getTileNavigationActionsRows=function(e,t){let i=[];let a=[];a=this.getTileNavigationActions(e);if(a.length){for(let e=0;e<a.length;e++){i.push(R(a[e],t))}}else{i=[this.getEmptyTileActionsRowObj(t)]}return i};A.getTileNavigationActions=function(e){let t=[];let i="";const a=e.bag.getBag("tileNavigationActions");if(a.getPropertyNames().indexOf("tile_navigation_actions")>=0){t=JSON.parse(a.getProperty("tile_navigation_actions"));for(let e=0;e<t.length;e++){if(t[e].text){if(a.getTextNames().indexOf(`action_tile_${e+1}`)>=0){i=a.getText(`action_tile_${e+1}`)}t[e].text=i}}}return t};function E(e){const t={};t.text=e.menu_title;t.icon=e.icon;if(e.action){t.targetURL=`#${e.navigation_target}-${e.action}`}else{t.targetURL=e.navigation_target}return t}A.tileActionsRows2TileActionsArray=function(e){const t=[];for(let i=0;i<e.length;i++){if(e[i].menu_title){t.push(E(e[i]))}}return t};A.populateTileNavigationActionsBag=function(e,t){e.setProperty("tile_navigation_actions",JSON.stringify(t));for(let i=0;i<t.length;i++){const a=t[i].text;e.setText(`action_tile_${i+1}`,a)}};A.getDefaultFormFactors=function(){return{appDefault:false,manual:{desktop:true,tablet:true,phone:true},defaultParam:true}};A.buildFormFactorsObject=function(e){return{appDefault:e.getProperty("/config/appFormFactor"),manual:{desktop:e.getProperty("/config/desktopChecked"),tablet:e.getProperty("/config/tabletChecked"),phone:e.getProperty("/config/phoneChecked")}}};A.tableHasDuplicateParameterNames=function(e){const t={};for(let i=0;i<e.length;i++){const a=e[i].name;if(a!==""){if(t[a]){return true}t[a]=true}}return false};A.tableHasInvalidSapPrelaunchOperationValue=function(e){for(let t=0;t<e.length;t++){if(e[t].name==="sap-prelaunch-operations"){if(a.parseAndValidateOperations(e[t].defaultValue)===null){return false}break}}return true};function k(e){let t="";if(e.mandatory){if(e.isRegularExpression){t=`{${e.name}=${encodeURIComponent(e.value)}}`}else{t=`${e.name}=${encodeURIComponent(e.value)}`}}else{t=`[${e.name}=${encodeURIComponent(e.defaultValue)}]`}return t}A.getMappingSignatureString=function(e,t){let i="";for(let t=0;t<e.length;t++){if(e[t].name){i+=`${k(e[t])}&`}}return t?`${i}*=*`:i.substring(0,i.length-1)};function L(e,t){const i={};if(e.charAt(0)==="["){i.mandatory=false;i.isRegularExpression=false;i.value="";e=e.substring(1,e.length-1);i.name=e.substring(0,e.indexOf("="));i.defaultValue=decodeURIComponent(e.substring(e.indexOf("=")+1))}else{i.mandatory=true;i.defaultValue="";if(e.charAt(0)==="{"){i.isRegularExpression=true;e=e.substring(1,e.length-1)}else{i.isRegularExpression=false}i.name=e.substring(0,e.indexOf("="));i.value=decodeURIComponent(e.substring(e.indexOf("=")+1))}i.editable=t;if(t){i.valEnabled=i.mandatory;i.defValEnabled=!i.mandatory}else{i.valEnabled=true;i.defValEnabled=true}return i}A.getMappingSignatureTableData=function(e,t){const i=[];const a=e.split("&");for(let e=0;e<a.length;e++){const n=a[e];if(n!=="*=*"){i.push(L(a[e],t))}}return i};A.getAllowUnknownParametersValue=function(e){if(e&&e.substring(e.length-3,e.length)==="*=*"){return true}return false};A.getMappingSignature=function(e,t){const i=t?"allowed":"ignored";const a=new RegExp("%%UserDefault[.].+%%");let n=[];const s={parameters:{},additional_parameters:i};e.forEach(e=>{s.parameters[e.name]={required:e.mandatory,rename_to:e.rename_to};if(e.defaultValue){n=a.exec(e.defaultValue);if(n){e.defaultValue=n[0]}s.parameters[e.name].defaultValue={value:e.defaultValue}}if(e.value){n=a.exec(e.value);if(n){e.value=n[0]}s.parameters[e.name].filter={value:e.value};if(e.isRegularExpression){s.parameters[e.name].filter.format="regexp"}}});return s};A.getSignatureTableData=function(e,t){const i=[];let a={};let n={};const s=e.parameters;for(const e in s){n=s[e];a={};a.editable=t;a.name=e;a.mandatory=n.required;if(n.rename_to){a.rename_to=n.rename_to}else{a.rename_to=n.renameTo}if(t){a.valEnabled=a.mandatory;a.defValEnabled=!a.mandatory}else{a.valEnabled=true;a.defValEnabled=true}if(n.filter){a.value=n.filter.value;if(n.filter.format&&n.filter.format==="regexp"){a.isRegularExpression=true}}if(n.defaultValue){a.defaultValue=n.defaultValue.value}i.push(a)}return i};A.getTranslatedTitle=function(e){if(e.bag){const t=e.bag.getBag("tileProperties");if(t.getTextNames().indexOf("display_title_text")>=0){return t.getText("display_title_text")}}if(e.title){return e.title.getTitle()}if(e.preview){return e.preview.getTitle()}return""};A.getTranslatedSubtitle=function(e,t){if(e.bag){const t=e.bag.getBag("tileProperties");if(t.getTextNames().indexOf("display_subtitle_text")>=0){return t.getText("display_subtitle_text")}}if(typeof t.display_subtitle_text==="string"){return t.display_subtitle_text}if(e.preview&&e.preview.getDescription&&e.preview.getDescription()){return e.preview.getDescription()}return""};A.getTranslatedProperty=function(e,t,i){if(e.bag){const t=e.bag.getBag("tileProperties");if(t.getTextNames().indexOf(i)>=0){return t.getText(i)}}return t[i]};A.getActionConfiguration=function(e,t){const i=e.configuration.getParameterValueAsString("tileConfiguration");const a=JSON.parse(i||"{}");let n;if(typeof t==="undefined"){t=e.configurationUi.isEnabled()}if(t){n=A.getResourceBundle()}a.semantic_object=a.semantic_object||(t?`[${n.getText("configuration.semantic_object")}]`:"");a.semantic_action=a.semantic_action||(t?`[${n.getText("configuration.semantic_action")}]`:"");a.navigation_provider=a.navigation_provider||"";a.navigation_provider_role=a.navigation_provider_role||"";a.navigation_provider_instance=a.navigation_provider_instance||"";a.target_application_id=a.target_application_id||"";a.target_application_alias=a.target_application_alias||"";a.display_info_text=a.display_info_text||"";a.editable=true;if(e.configurationUi&&e.configurationUi.isReadOnly){if(e.configurationUi.isReadOnly()){a.editable=false}}return a};A.getViewConfiguration=function(e){const t=e.getViewData();const i=t.chip;const a=A.getAppLauncherConfig(i,true,true);return a};A.getConfigurationUi=function(e,t){let i;let a;let n;let s;let r;const c=e.getViewData();const p=A.getViewConfiguration(e);const u=new l({config:p,tileModel:e.getModel()});return o.create({type:D.XML,viewData:c,viewName:t}).then(t=>{t.setModel(u);i=t.byId("navigation_semantic_objectInput")||t.byId("semantic_objectInput");if(i){i.getModel().setProperty("/enabled",p.navigation_use_semantic_object);i.getModel().setProperty("/value",p.semantic_object||p.navigation_semantic_object)}a=t.byId("navigation_provider_roleInput");if(a){a.getModel().setProperty("/value",p.navigation_provider_role)}n=t.byId("navigation_provider_instanceInput");if(n){n.getModel().setProperty("/value",p.navigation_provider_instance)}s=t.byId("target_application_aliasInput");if(s){s.getModel().setProperty("/value",p.target_application_alias)}r=t.byId("targetTypeInput");if(r){if(!t.getModel().getProperty("/config/transaction")){t.getModel().setProperty("/config/transaction",{})}if(!t.getModel().getProperty("/config/web_dynpro")){t.getModel().setProperty("/config/web_dynpro",{})}if(e.getModel().getProperty("/config/navigation_provider")==="LPD"){A.displayLpdCustApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="WCF"){r.setSelectedKey("WCF");A.displayWCFApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="SAPUI5"||e.getModel().getProperty("/config/navigation_provider")===""){r.setSelectedKey("SAPUI5");A.displaySapui5ApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="TR"){A.displayTransactionApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="WDA"){A.displayWebDynproApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="URL"){A.displayURLApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="URLT"){A.displayURLTApplicationTypeFields(t);u.setProperty("/config/editable",false);u.setProperty("/config/manualFormFactor",false)}}return t})};A._updateTilePropertiesTexts=function(e,t){const i=t.getTextNames();const a=e.getModel();i.forEach(e=>{a.setProperty(`/data/${e}`,t.getText(e));a.setProperty(`/config/${e}`,t.getText(e))})};A._updateTileConfiguration=function(e,t){const i=e.getModel();const a=JSON.parse(t);let n;Object.keys(a).forEach(e=>{n=a[e];i.setProperty(`/data/${e}`,n);i.setProperty(`/config/${e}`,n);if(e==="navigation_target_url"){i.setProperty(`/nav/${e}`,n)}})};A.aData=[];A.aActionData=[];A.aRoleData=[];A.aAliasData=[];A.objectSelectDoSearch=function(e){const t=e.getParameter("value");if(t!==undefined){e.getParameter("itemsBinding").filter(new p([new p("name",u.Contains,t),new p("obj",u.Contains,t)],false))}};A.actionSelectDoSearch=function(e){const t=e.getParameter("value");if(t!==undefined){e.getParameter("itemsBinding").filter(new p([new p("text",u.Contains,t)],false))}};A.roleSelectDoSearch=function(e){const t=e.getParameter("value");if(t!==undefined){e.getParameter("itemsBinding").filter(new p([new p("role",u.Contains,t),new p("instance",u.Contains,t)],false))}};A.instanceSelectDoSearch=function(e){const t=e.getParameter("value");if(t!==undefined){const i=[];if(t!==""){i.push(new p("instance",u.Contains,t))}const a=e.getSource().getCustomData();const n=a[0].getValue();if(n!==""){i.push(new p("role",u.EQ,n))}if(i.length>0){e.getParameter("itemsBinding").filter(new p(i,true))}}};A.instanceSuggest=function(e,t){const i=[];const a=t.getParameter("suggestValue");if(a!==""){i.push(new p("instance",u.Contains,a))}const n=e.getView();const s=n.byId("navigation_provider_roleInput");const o=s.getValue();if(o!==""){i.push(new p("role",u.EQ,o))}if(i.length>0){t.oSource.getBinding("suggestionItems").filter(new p(i,true))}};A.aliasSuggest=function(e,t){const i=[];const a=t.getParameter("suggestValue");if(a!==""){i.push(new p("alias",u.Contains,a))}const n=e.getView();const s=n.byId("navigation_provider_instanceInput");const o=s.getValue();if(o!==""){i.push(new p("instance",u.EQ,o))}if(i.length>0){t.oSource.getBinding("suggestionItems").filter(new p(i,true))}};A.aliasSelectDoSearch=function(e){const t=[];const i=e.getParameter("value");if(i!==undefined){if(i!==""){t.push(new p("alias",u.Contains,i))}const a=e.getSource().getCustomData();const n=a[0].getValue();t.push(new p("instance",u.EQ,n));e.getParameter("itemsBinding").filter(new p(t,true))}};A.objectSelectUpdateDialog=function(e,t){if(t!==undefined){e.getBinding("items").filter([new p("name",u.Contains,t)])}};A.actionSelectUpdateDialog=function(e,t){if(t!==undefined){e.getBinding("items").filter([new p("text",u.Contains,t)])}};A.roleSelectUpdateDialog=function(e,t){if(t!==undefined){e.getBinding("items").filter([new p("role",u.Contains,t)])}};A.instanceSelectUpdateDialog=function(e,t){const i=[];if(t!==undefined){i.push(new p("instance",u.Contains,t))}const a=e.getCustomData();const n=a[0].getValue();if(n!==""){i.push(new p("role",u.EQ,n))}if(i.length>0){e.getBinding("items").filter(i,true)}};A.aliasSelectUpdateDialog=function(e,t){const i=[];if(t!==undefined){i.push(new p("alias",u.Contains,t))}const a=e.getCustomData();const n=a[0].getValue();if(n!==""){i.push(new p("instance",u.EQ,n))}if(i.length>0){e.getBinding("items").filter(i,true)}};A.sSelectedColor=(jQuery(".sapMStdTileIconDiv").css("color")||"#007cc0").split(" ").join("");A.sDeselectedColor=(jQuery(".sapMLabel:not(.sapFioriDropZoneText )").css("color")||"#666666").split(" ").join("");A.iconSelect=function(e,t){e.setColor(t?A.sSelectedColor:A.sDeselectedColor);e.setActiveColor(t?A.sDeselectedColor:A.sSelectedColor)};A.onSelectIcon=function(e,t,i,a){const n=e.getView();const s=n.getModel();let o;if(t){o=s.getProperty("/config/tile_actions_selected_icon")}else{o=s.getProperty("/config/selected_icon")}if(o){A.iconSelect(o,false)}o=a.getSource();A.iconSelect(o,true);s.setProperty("/config/ok.enabled",true);if(t){s.setProperty("/config/tile_actions_selected_icon",o)}else{s.setProperty("/config/selected_icon",o)}n.byId("selectIconDialog").setTitle(o.getSrc())};A.onSelectIconClose=function(e){e.byId("selectIconDialog").close()};A.onSelectIconOk=function(e,t){let i=e.getModel().getProperty("/config/selected_icon");if(!t){e.getModel().setProperty("/config/display_icon_url",i.getSrc());e.byId("iconInput").setValueState(P.None)}else{i=e.getModel().getProperty("/config/tile_actions_selected_icon");if(i){t.setValue(i.getSrc());t.setValueState(P.None)}}A.onSelectIconClose(e)};A.iconSelectOnValueHelpRequest=function(e,i,a){const n=e.getView();const s=n.getModel();const o=n.byId("icons");let l=g.getIconCollectionNames();const r=n.byId("selectIconDialog");const c=n.byId("ok");let p;let u;let _;let f;let b=false;o.destroyContent();if(a){u=t.getElementById(i.getParameter("id"));p=u.getValue()}else{p=s.getProperty("/config/display_icon_url")}c.attachEventOnce("press",()=>{A.onSelectIconOk(n,u)});l.sort();l=l.filter(e=>{if(e==="BusinessSuiteInAppSymbols"){b=true;return false}return true});if(b){l.push("BusinessSuiteInAppSymbols")}for(let t=0;t<l.length;++t){_=g.getIconNames(l[t]);_.sort();for(let i=0;i<_.length;++i){f=g.getIconURI(_[i],l[t]);o.addContent(new d({height:"38px",press:A.onSelectIcon.bind(null,e,a,u),size:"2rem",src:f,tooltip:f,width:"38px"}))}}const y=o.getContent();s.setProperty("/config/ok.enabled",false);r.bindProperty("title",{model:"i18n",path:"configuration.select_icon"});for(let e=0;e<y.length;++e){if(y[e].getSrc()===p){if(a){s.setProperty("/config/tile_actions_selected_icon",y[e])}else{s.setProperty("/config/selected_icon",y[e])}A.iconSelect(y[e],true);s.setProperty("/config/ok.enabled",true);r.setTitle(p)}else{A.iconSelect(y[e],false)}}r.open()};A.objectSelectOnValueHelpRequest=function(e,i,a){const n=e.getView();const s=A.getResourceBundle().getText("configuration.semantic_object");let o;const r=new l;let c=new _("semantic_object_select_dialog",{title:s,search:A.objectSelectDoSearch,liveChange:A.objectSelectDoSearch});const p=new f({title:"{obj}"});if(a){o=t.getElementById(i.getParameter("id"))}else{o=n.byId("semantic_objectInput")||n.byId("navigation_semantic_objectInput")}const u=o.getValue();c.open(u);r.setData(e.aDefaultObjects.concat(A.aData));c.bindAggregation("items","/",p);c.setModel(r);A.objectSelectUpdateDialog(c,u);c.attachCancel(e=>{o.setValue(u);if(!a){o.fireChange()}c.destroy();c=null});c.attachConfirm(e=>{const t=e.getParameter("selectedItem");if(t){o.setValue(t.getTitle());if(!a){o.fireChange()}}c.destroy();c=null})};A.actionSelectOnValueHelpRequest=function(e,i,a){const n=e.getView();const s=A.getResourceBundle().getText("configuration.semantic_action");let o;const r=new l;let c=new _("semantic_action_select_dialog",{title:s,search:A.actionSelectDoSearch,liveChange:A.actionSelectDoSearch});const p=new f({title:"{text}"});if(a){o=t.getElementById(i.getParameter("id"))}else{o=n.byId("semantic_actionInput")||n.byId("navigation_semantic_actionInput")}const u=o.getValue();c.open(u);r.setData(A.aActionData);c.bindAggregation("items","/items",p);c.setModel(r);A.actionSelectUpdateDialog(c,u);c.attachCancel(e=>{o.setValue(u);if(!a){o.fireChange()}c.destroy();c=null});c.attachConfirm(e=>{const t=e.getParameter("selectedItem");if(t){o.setValue(t.getTitle());if(!a){o.fireChange();o.fireLiveChange({newValue:t.getTitle()})}}c.destroy();c=null})};A.roleSelectOnValueHelpRequest=function(e){const t=e.getView();const i=A.getResourceBundle().getText("configuration.navigation_provider_role");const a=new l;let n=new y("role_select_dialog",{title:i,search:A.roleSelectDoSearch,liveChange:A.roleSelectDoSearch,columns:[new I({header:[new b({text:A.getResourceBundle().getText("configuration.navigation_provider_role")})]}),new I({header:[new b({text:A.getResourceBundle().getText("configuration.navigation_provider_instance")})]})]});const s=new m({cells:[new b({text:"{role}"}),new b({text:"{instance}"})]});const o=t.byId("navigation_provider_roleInput");const r=t.byId("navigation_provider_instanceInput");const c=o.getValue();n.open(c);a.setData(e.aDefaultObjects.concat(A.aRoleData));n.bindAggregation("items","/",s);n.setModel(a);A.roleSelectUpdateDialog(n,c);n.attachCancel(e=>{o.setValue(c);o.fireChange();n.destroy();n=null});n.attachConfirm(e=>{const t=e.getParameter("selectedItem");if(t){o.setValue(t.getCells()[0].getText());r.setValue(t.getCells()[1].getText());o.fireChange();r.fireChange()}n.destroy();n=null})};A.instanceSelectOnValueHelpRequest=function(e){const t=e.getView();const i=A.getResourceBundle().getText("configuration.navigation_provider_instance");const a=new l;let n=new _("instance_select_dialog",{title:i,search:A.instanceSelectDoSearch,liveChange:A.instanceSelectDoSearch});const s=new f({title:"{instance}"});const o=t.byId("navigation_provider_instanceInput");const r=o.getValue();const c=t.byId("navigation_provider_roleInput").getValue();n.addCustomData(new V({key:"role",value:c}));n.open(r);a.setData(e.aDefaultObjects.concat(A.aRoleData));n.bindAggregation("items","/",s);n.setModel(a);A.instanceSelectUpdateDialog(n,r);n.attachCancel(e=>{o.setValue(r);o.fireChange();n.destroy();n=null});n.attachConfirm(e=>{const t=e.getParameter("selectedItem");if(t){o.setValue(t.getTitle());o.fireChange()}n.destroy();n=null})};A.applicationAliasSelectOnValueHelpRequest=function(e){const t=e.getView();const i=A.getResourceBundle().getText("configuration.target_application_alias");const a=new l;let n=new _("alias_select_dialog",{title:i,search:A.aliasSelectDoSearch,liveChange:A.aliasSelectDoSearch});const s=new f({title:"{alias}"});const o=t.byId("target_application_aliasInput");const r=o.getValue();const c=t.byId("navigation_provider_instanceInput").getValue();n.addCustomData(new V({key:"instance",value:c}));n.open(r);a.setData(e.aDefaultObjects.concat(A.aAliasData));n.bindAggregation("items","/",s);n.setModel(a);A.aliasSelectUpdateDialog(n,r);n.attachCancel(e=>{o.setValue(r);o.fireChange();n.destroy();n=null});n.attachConfirm(e=>{const t=e.getParameter("selectedItem");if(t){o.setValue(t.getTitle());o.fireChange()}n.destroy();n=null})};A.onTargetTypeChange=function(e){const i=e.getParameter("id");const a=t.getElementById(i).getParent().getCells();const n=e.getSource().getSelectedKey();if(n==="INT"){a[3].setEnabled(true);a[2].setShowValueHelp(true);a[2].setValue("")}else{a[2].setShowValueHelp(false);a[2].setValue("");a[3].setEnabled(false);a[3].setValue("")}};A.addTileActionsRow=function(e){const t=e.getModel();const i=t.getProperty("/config/tile_actions_rows");const a=this.getEmptyTileActionsRowObj();i.push(a);t.setProperty("/config/tile_actions_rows",i)};A.deleteTileActionsRow=function(e){const t=e.getModel();const i=t.getProperty("/config/tile_actions_rows");const a=e.byId("tileActions");const n=a.getSelectedIndices();const s=n.sort((e,t)=>t-e).slice();for(let e=0;e<s.length;e++){a.removeSelectionInterval(s[e],s[e]);i.splice(s[e],1)}t.setProperty("/config/tile_actions_rows",i)};A.checkInput=function(e,t){const i=A.getResourceBundle();const a=e.byId("iconInput");const n=e.byId("useLpdCheckbox");const s=e.byId("navigation_semantic_objectInput")||e.byId("semantic_objectInput");const o=e.byId("navigation_semantic_actionInput")||e.byId("semantic_actionInput");let l=P.None;let r=null;const c=String(t.getParameter("newValue")||"").trim();switch(t.getSource()){case a:if(c!==""&&c.substring(0,11)!=="sap-icon://"){l=P.Error;r=i.getText("configuration.display_icon_url.warning")}break;case n:if(!n.getSelected()){o.setValueState(P.None);s.setValueState(P.None)}break;case s:if(/[-#&? ]/.test(c)){l=P.Error;r=i.getText("configuration.semantic_object.error_invalid_chars")}else if(c===""){l=P.Error}break;case o:if(/[-#&? ]/.test(c)){l=P.Error;r=i.getText("configuration.semantic_action.error_invalid_chars")}else if(c===""){l=P.Error}break;default:break}if(l){t.getSource().setValueState(l);if(r!==null){t.getSource().setValueStateText(r||"")}}};A.checkInputOnSaveConfig=function(e){const t=e.byId("iconInput");const i=e.byId("navigation_semantic_objectInput");const a=e.byId("navigation_semantic_actionInput");const n=e.byId("useLpdCheckbox");const s=A.getResourceBundle();let o=false;if(t.getValue()!==""&&!A.isIconURIValid(t.getValue())){t.setValueState(P.Error);t.setValueStateText(s.getText("configuration.display_icon_url.warning"));o=true}if(n.getSelected()&&/[-#&? ]/.test(i.getValue())){i.setValueState(P.Error);i.setValueStateText(s.getText("configuration.semantic_object.error_invalid_chars"));o=true}else if(n.getSelected()&&i.getValue()===""){i.setValueState(P.Error);o=true}if(/[-#&? ]/.test(a.getValue())){a.setValueState(P.Error);a.setValueStateText(s.getText("configuration.semantic_action.error_invalid_chars"));o=true}else if(n.getSelected()&&a.getValue()===""){a.setValueState(P.Error);o=true}return o};A.checkTileActions=function(e){const t=e.getModel().getProperty("/config/tile_actions_rows");const i=A.getResourceBundle();let a=false;for(let e=0;e<t.length;e++){if(!t[e].menu_title&&(t[e].navigation_target||t.length>1)){t[e].valueState=P.Error;a=true}else{t[e].valueState=P.None}if(t[e].icon){if(!A.isIconURIValid(t[e].icon)){t[e].iconValueState=P.Error;t[e].iconValueStateText=i.getText("configuration.display_icon_url.warning");a=true}}}e.getModel().setProperty("/config/tile_actions_rows",t);return a};A.isIconURIValid=function(e){let t=[];let i="";let a="";let n="";t=/sap-icon:\/\/(.+)\//.exec(e);if(t){i=t[1];t=/\/\/.+\/(.+)/.exec(e);if(t){a=t[1]}else{a=""}n=g.getIconURI(a,i);if(n!==e){return false}}else{t=/sap-icon:\/\/(.+)/.exec(e);if(t){a=t[1];if(!g.getIconInfo(a)){return false}}else{return false}}return true};A.checkTMInput=function(e,t){const i=A.getResourceBundle();const a=e.byId("semantic_objectInput");const n=e.byId("semantic_actionInput");const s=e.byId("target_application_descriptionInput");const o=e.byId("target_application_urlInput");const l=e.byId("target_application_componentInput");const r=e.byId("navigation_provider_roleInput");const c=e.byId("navigation_provider_instanceInput");const p=e.byId("target_application_aliasInput");const u=e.byId("target_application_idInput");const g=String(t.getParameter("newValue")||"").trim();let d=P.None;let _=null;switch(t.getSource()){case a:if(/[-#&? ]/.test(g)){d=P.Error;_=i.getText("configuration.semantic_object.error_invalid_chars")}if(n.getValue()===""){n.setValueState(P.Error)}break;case n:if(/[-#&? ]/.test(g)){d=P.Error;_=i.getText("configuration.semantic_action.error_invalid_chars")}else if(g===""){d=P.Error}break;case s:if(g===""){d=P.Error}break;case o:if(g!==""&&!/^[-~+,;:?%&#=/.\w]+$/.test(g)){d=P.Error;_=i.getText("configuration.target_application.url.error_invalid_chars")}break;case l:if(g===""){d=P.Error}else if(g.substring(0,17)==="SAPUI5.Component="){d=P.Error;_=i.getText("configuration.target_application.component.error_invalid_input")}break;case r:if(g===""){d=P.Error}else if(!/^[\w/]+$/.test(g)){d=P.Error;_=i.getText("configuration.target_application.role.error_invalid_chars")}break;case c:if(g===""){d=P.Error}else if(!/^[\w/]+$/.test(g)){d=P.Error;_=i.getText("configuration.target_application.instance.error_invalid_chars")}break;case p:if(g===""&&u.getValue()===""){d=P.Error;_=i.getText("configuration.target_application.alias_id.warning")}else if(g!==""&&u.getValue()!==""){d=P.Error;_=i.getText("configuration.target_application.alias_id.warning");u.setValueState(d);u.setValueStateText(_)}else{u.setValueState(P.None)}break;case u:if(g===""&&p.getValue()===""){d=P.Error;_=i.getText("configuration.target_application.alias_id.warning")}else if(g!==""&&p.getValue()!==""){d=P.Error;_=i.getText("configuration.target_application.alias_id.warning");p.setValueState(d);p.setValueStateText(_)}else if(g!==""&&!/^[A-Fa-f0-9]+$/.test(g)){d=P.Error;_=i.getText("configuration.target_application.alias_id.error_invalid_chars")}else{p.setValueState(P.None)}break;default:break}if(d){t.getSource().setValueState(d);if(_!==null){t.getSource().setValueStateText(_||"")}}};A.checkTMInputOnSaveConfig=function(e){const t=A.getResourceBundle();const i=e.byId("semantic_objectInput");const a=e.byId("semantic_actionInput");const n=e.byId("target_application_descriptionInput");const s=e.byId("target_application_urlInput");const o=e.byId("target_application_componentInput");const l=e.byId("navigation_provider_roleInput");const r=e.byId("navigation_provider_instanceInput");const c=e.byId("target_application_aliasInput");const p=e.byId("target_application_idInput");const u=e.byId("targetTypeInput");const g=e.byId("target_transactionInput");const d=e.byId("target_web_dynpro_applicationInput");const _=e.byId("target_wcf_application_idInput");const f=e.byId("desktopCB");const b=e.byId("tabletCB");const y=e.byId("phoneCB");let I=false;i.setValue(i.getValue().trim());if(/[-#&? ]/.test(i.getValue())){i.setValueState(P.Error);i.setValueStateText(t.getText("configuration.semantic_object.error_invalid_chars"));I=true}a.setValue(a.getValue().trim());if(/[-#&? ]/.test(a.getValue())){a.setValueState(P.Error);a.setValueStateText(t.getText("configuration.semantic_action.error_invalid_chars"));I=true}else if(a.getValue()===""){a.setValueState(P.Error);I=true}const m=e.getModel().getProperty("/config/navigation_provider");let V;if(m==="SAPUI5"){if(n.getValue()===""){n.setValueState(P.Error);I=true}if(s.getValue()!==""&&!/^[-~+,;:?%&#=/.\w]+$/.test(s.getValue())){s.setValueState(P.Error);s.setValueStateText(t.getText("configuration.target_application.url.error_invalid_chars"));I=true}if(o.getValue()===""){o.setValueState(P.Error);I=true}else if(o.getValue().substring(0,17)==="SAPUI5.Component="){o.setValueState(P.Error);o.setValueStateText(t.getText("configuration.target_application.component.error_invalid_input"));I=true}}else if(m==="LPD"){if(l.getValue()===""){l.setValueState(P.Error);I=true}if(!/^[\w]+$/.test(l.getValue())){l.setValueState(P.Error);V=t.getText("configuration.target_application.role.error_invalid_chars");l.setValueStateText(V);I=true}if(r.getValue()===""){r.setValueState(P.Error);I=true}if(!/^[\w]+$/.test(r.getValue())){r.setValueState(P.Error);V=t.getText("configuration.target_application.instance.error_invalid_chars");r.setValueStateText(V);I=true}if(c.getValue()===""&&p.getValue()===""){V=t.getText("configuration.target_application.alias_id.warning");c.setValueState(P.Error);c.setValueStateText(V);p.setValueState(P.Error);p.setValueStateText(V);I=true}if(c.getValue()!==""&&p.getValue()!==""){V=t.getText("configuration.target_application.alias_id.warning");c.setValueState(P.Error);c.setValueStateText(V);p.setValueState(P.Error);p.setValueStateText(V);I=true}if(p.getValue()!==""&&!/^[A-Fa-f0-9]+$/.test(p.getValue())){p.setValueState(P.Error);p.setValueStateText(t.getText("configuration.target_application.alias_id.error_invalid_chars"));I=true}}else if(m==="TR"){if(g.getValue()===""){g.setValueState(P.Error);I=true}}else if(m==="WDA"){if(d.getValue()===""){d.setValueState(P.Error);I=true}}else if(m==="WCF"){if(_.getValue()===""){_.setValueState(P.Error);I=true}}else if(m==="URL"){if(s.getValue()===""){s.setValueState(P.Error);I=true}else if(!/^[-~+,;:?%&#=/.\w]+$/.test(s.getValue())){s.setValueState(P.Error);s.setValueStateText(t.getText("configuration.target_application.url.error_invalid_chars"));I=true}}else{u.setValueState(P.Error);u.setValueStateText(t.getText("configuration.navigation_provider.error_invalid_provider"));I=true}if(!f.getSelected()&&!b.getSelected()&&!y.getSelected()){V=t.getText("configuration.form_factor.warning");f.setValueState(P.Error);f.setValueStateText(V);b.setValueState(P.Error);b.setValueStateText(V);y.setValueState(P.Error);y.setValueStateText(V);I=true}return I};A.updateTooltipForDisabledProperties=function(e){const t=e.getModel();const i=t.getProperty("/config/isLocaleSuitable");if(!i){const i=A.getResourceBundle();const a=i.getText("edit_configuration.original_locale_not_fit_tooltip",[t.getProperty("/config/userLocale"),t.getProperty("/config/orgLocale")]);e.byId("titleInput").setTooltip(a);e.byId("subtitleInput").setTooltip(a);e.byId("keywordsInput").setTooltip(a);e.byId("infoInput").setTooltip(a)}};A.updateMessageStripForOriginalLanguage=function(e){const t=e.getModel();if(t.getProperty("/config/isLocaleSuitable")===false){const i=A.getResourceBundle().getText("edit_configuration.original_locale_not_fit_message",[t.getProperty("/config/orgLocale").toUpperCase(),t.getProperty("/config/userLocale").toUpperCase()]);const a=e.byId("messageStrip");a.setVisible(true);a.setText(i);a.setType(w.Warning)}};A.createSemanticObjectModel=function(e,t,i){const a=e.getView();const n="/sap/opu/odata/UI2/INTEROP/SemanticObjects";const o=[{obj:"",name:""},{obj:"*",name:"*"}];const r=(i||o).slice(0);const c=new l;c.setSizeLimit(999999);c.setProperty("/value","");c.setProperty("/enabled",true);t.bindAggregation("suggestionItems","suggest>/items",new v({text:"{suggest>obj}"}));t.setModel(c,"suggest");if(A.aData.length>0){setTimeout(()=>{c.setData({items:r.concat(A.aData)},true)},0);return}s.read({requestUri:n,headers:{Accept:"application/json"}},e=>{let t;let i;let a;for(a=0;a<e.results.length;a=a+1){t=e.results[a].id;i=e.results[a].text;A.aData.push({obj:t,name:i||t})}c.setData({items:r.concat(A.aData)},true)},e=>{let t=e&&e.message?e.message:e;if(e.response){t+=` - ${e.response.statusCode} ${e.response.statusText}`}x.error(`Could not fetch data: ${n}: ${t}`,null,a.getViewName()||"sap.ushell.components.tiles.utils")})};A.createRoleModel=function(e,t,i){const a=e.getView();const n="/sap/opu/odata/UI2/INTEROP/GetLPDInstances";const o=new l;const r=new l;o.setSizeLimit(999999);r.setSizeLimit(999999);o.setProperty("/value","");o.setProperty("/enabled",true);r.setProperty("/value","");r.setProperty("/enabled",true);const c=new m({cells:[new S({text:"{role}"}),new S({text:"{instance}"})]});t.bindAggregation("suggestionRows","/items",c);i.bindAggregation("suggestionItems","/items",new v({text:"{instance}"}));i.setModel(r);t.setModel(o);t.attachSuggestionItemSelected(e=>{i.setValue(e.getParameter("selectedRow").getCells()[1].getText());i.fireChange()});if(A.aRoleData.length>0){o.setData({items:A.aRoleData},false);r.setData({items:A.aRoleData},false);return}s.read({requestUri:n,headers:{Accept:"application/json"}},e=>{let t;let i;let a;for(a=0;a<e.results.length;a=a+1){t=e.results[a].lpdRole;i=e.results[a].instance;A.aRoleData.push({role:t,instance:i})}o.setData({items:A.aRoleData},true);r.setData({items:A.aRoleData},true)},e=>{let t=e&&e.message?e.message:e;if(e.response){t+=` - ${e.response.statusCode} ${e.response.statusText}`}x.error(`Could not fetch data: ${n}: ${t}`,null,a.getViewName()||"sap.ushell.components.tiles.utils")})};A.createAliasModel=function(e,t){const i=e.getView();let a="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias";const n=new l;n.setSizeLimit(999999);n.setProperty("/value","");n.setProperty("/enabled",true);t.bindAggregation("suggestionItems","/items",new v({text:"{alias}"}));t.setModel(n);const o=A.getAppLauncherConfig(i.oViewData.chip,true,true);if(o&&o.navigation_provider_role&&o.navigation_provider_instance){if(o.navigation_provider_role!==""&&o.navigation_provider_instance!==""){a=`${a}?role='${o.navigation_provider_role}'&instance='${o.navigation_provider_instance}'`}}s.read({requestUri:a,headers:{Accept:"application/json"}},e=>{let t;let i;let a;let s;let o;A.aAliasData=[];for(s=0;s<e.results.length;s=s+1){t=e.results[s].lpdApplicationAlias;i=e.results[s].lpdRole;a=e.results[s].lpdInstance;A.aAliasData.push({role:i,instance:a,alias:t})}o=n.getData();if(o){o.items=A.aAliasData}else{o={items:A.aAliasData}}n.setData(o,false)},e=>{let t=e&&e.message?e.message:e;if(e.response){t+=` - ${e.response.statusCode} ${e.response.statusText}`}x.error(`Could not fetch data: ${a}: ${t}`,null,i.getViewName()||"sap.ushell.components.tiles.utils")})};A.updateAliasModel=function(e,t){const i=t.getModel();const a=e.byId("navigation_provider_instanceInput").getValue();const n=e.byId("navigation_provider_roleInput").getValue();const o=`/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias?role='${n}'&instance='${a}'`;s.read({requestUri:o,headers:{Accept:"application/json"}},e=>{let t;let a;let n;let s;A.aAliasData=[];for(let i=0;i<e.results.length;i=i+1){t=e.results[i].lpdApplicationAlias;n=e.results[i].lpdRole;s=e.results[i].lpdInstance;A.aAliasData.push({role:n,instance:s,alias:t})}a=i.getData();if(a){a.items=A.aAliasData}else{a={items:A.aAliasData}}i.setData(a,false)},t=>{let i=t&&t.message?t.message:t;if(t.response){i+=` - ${t.response.statusCode} ${t.response.statusText}`}x.error(`Could not fetch data: ${o}: ${i}`,null,e.getViewName()||"sap.ushell.components.tiles.utils")})};A.createActionModel=function(e,t){const i=new l;const a=e.getView();i.setData({items:[{text:"display"},{text:"approve"},{text:"displayFactSheet"},{text:"manage"},{text:"create"},{text:"monitor"},{text:"track"},{text:"change"},{text:"register"},{text:"release"},{text:"analyzeKPIDetails"},{text:"lookup"},{text:"manageLineItems"}]});A.aActionData=i.getData();const n=A.getAppLauncherConfig(a.oViewData.chip,true,true);const s=n.navigation_semantic_action||n.semantic_action;if(s){if(!i.getData().items.some(e=>e.text===s)){i.getData().items.push({text:s})}}t.bindAggregation("suggestionItems","items>/items",new v({text:"{items>text}"}));t.setModel(i,"items");t.getBinding("suggestionItems").sort(new h("text",false))};A.createNavigationProviderModel=function(e,t){const i=new l;const a=A.getResourceBundle();const n=[{key:"SAPUI5",text:a.getText("configuration.target_application.sapui5")},{key:"LPD",text:a.getText("configuration.target_application.lpd_cust")},{key:"TR",text:a.getText("configuration.target_application.transaction")},{key:"WDA",text:a.getText("configuration.target_application.web_dynpro")},{key:"URL",text:a.getText("configuration.target_application.url")}];const s=A.getViewConfiguration(e.getView()).navigation_provider;if(s==="WCF"){n.push({key:"WCF",text:a.getText("configuration.target_application.wcf")})}else if(s==="URLT"){n.push({key:"URLT",text:a.getText("configuration.target_application.urlt")})}i.setData({items:n});t.bindItems("items>/items",new v({key:"{items>key}",text:"{items>text}"}));t.setModel(i,"items");t.getBinding("items").sort(new h("text",false))};A.displayApplicationTypeFields=function(e,t){switch(e){case"LPD":A.displayLpdCustApplicationTypeFields(t);break;case"SAPUI5":A.displaySapui5ApplicationTypeFields(t);break;case"TR":A.displayTransactionApplicationTypeFields(t);break;case"WDA":A.displayWebDynproApplicationTypeFields(t);break;case"URL":A.displayURLApplicationTypeFields(t);break;case"WCF":A.displayWCFApplicationTypeFields(t);break;case"URLT":A.displayURLTApplicationTypeFields(t);break}};A.displayWCFApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(true);e.byId("target_wcf_application_idInput").setVisible(true);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};A.displaySapui5ApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(true);e.byId("target_application_urlInput").setVisible(true);e.byId("application_component").setVisible(true);e.byId("target_application_componentInput").setVisible(true);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};A.displayLpdCustApplicationTypeFields=function(e){e.byId("application_description").setVisible(false);e.byId("target_application_descriptionInput").setVisible(false);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(true);e.byId("navigation_provider_roleInput").setVisible(true);e.byId("navigation_provider_instance").setVisible(true);e.byId("navigation_provider_instanceInput").setVisible(true);e.byId("target_application_alias").setVisible(true);e.byId("target_application_aliasInput").setVisible(true);e.byId("target_application_id").setVisible(true);e.byId("target_application_idInput").setVisible(true);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(true)};A.displayTransactionApplicationTypeFields=function(e){e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("target_transaction").setVisible(true);e.byId("target_transactionInput").setVisible(true);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};A.displayWebDynproApplicationTypeFields=function(e){e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(true);e.byId("target_web_dynpro_applicationInput").setVisible(true);e.byId("target_web_dynpro_configuration").setVisible(true);e.byId("target_web_dynpro_configurationInput").setVisible(true);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};A.displayURLApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(true);e.byId("target_application_urlInput").setVisible(true);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};A.displayURLTApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(true);e.byId("urlt_application_componentInput").setVisible(true);e.byId("target_urlt_system_alias").setVisible(true);e.byId("target_urlt_system_aliasInput").setVisible(true);e.byId("application_type_deprecated").setVisible(false)};A.getAppLauncherConfig=function(t,a,n){let s;const o=t.configuration.getParameterValueAsString("tileConfiguration");let l;try{l=JSON.parse(o||"{}")}catch(e){x.error("Error while trying to parse tile configuration",e,"sap.ushell.components.tiles.utils");return{}}l.editable=true;if(t.configurationUi&&t.configurationUi.isReadOnly){if(t.configurationUi.isReadOnly()){l.editable=false}}const r=A.getTranslatedTitle(t);const c=A.getTranslatedSubtitle(t,l);const p=A.getTranslatedProperty(t,l,"display_info_text");const u=A.getTranslatedProperty(t,l,"display_search_keywords");if(a){s=A.getResourceBundle();if(n&&t.bag){const a=t.bag.getOriginalLanguage();const n=new i(e.getLanguageTag()).getSAPLogonLanguage();const s=e.getLanguage();l.isLocaleSuitable=a===""||a.toLowerCase()===n.toLowerCase()||a.toLowerCase()===s.toLowerCase();l.orgLocale=a;l.userLocale=n}}l.display_icon_url=l.display_icon_url||"";if(p!==undefined){l.display_info_text=p}else if(l.display_info_text===undefined){if(a&&!n){l.display_info_text=`[${s.getText("configuration.display_info_text")}]`}else{l.display_info_text=""}}l.navigation_semantic_object=l.navigation_semantic_object||"";l.navigation_semantic_action=l.navigation_semantic_action||"";l.navigation_semantic_parameters=l.navigation_semantic_parameters||"";l.display_number_unit=l.display_number_unit||"";l.display_number_factor=l.display_number_factor||"";l.service_refresh_interval=l.service_refresh_interval?parseInt(l.service_refresh_interval,10):0;l.service_url=l.service_url||"";l.navigation_target_url=l.navigation_target_url||"";if(a&&A.isInitial(r)){l.display_title_text=n?"":`[${s.getText("configuration.display_title_text")}]`;l.display_subtitle_text=n?"":`[${s.getText("configuration.display_subtitle_text")}]`}else{l.display_title_text=r||l.display_title_text||"";if(c!==undefined){l.display_subtitle_text=c}else if(l.display_subtitle_text===undefined){l.display_subtitle_text=""}}l.navigation_use_semantic_object=l.navigation_use_semantic_object!==false;l.display_search_keywords=u||l.display_search_keywords||"";if(a){l.display_number_value=l.display_number_value||1234}l.form_factors=l.form_factors?l.form_factors:A.getDefaultFormFactors();l.desktopChecked=l.form_factors.manual.desktop;l.tabletChecked=l.form_factors.manual.tablet;l.phoneChecked=l.form_factors.manual.phone;l.manualFormFactor=!l.form_factors.appDefault&&l.editable;l.appFormFactor=l.form_factors.appDefault;l.formFactorConfigDefault=!!l.form_factors.defaultParam;if(l.signature){l.rows=A.getSignatureTableData(l.signature,n&&l.editable)}else{l.rows=l.mapping_signature&&l.mapping_signature!=="*=*"?A.getMappingSignatureTableData(l.mapping_signature,n&&l.editable):[A.getEmptyRowObj(l.editable)]}if(l.signature){l.isUnknownAllowed=l.signature.additional_parameters==="allowed"||l.signature.additionalParameters==="allowed"}else{l.isUnknownAllowed=l.mapping_signature!==undefined?A.getAllowUnknownParametersValue(l.mapping_signature):true}if(a){l.tile_actions_rows=A.getTileNavigationActionsRows(t,l.editable)}else if(!l.actions){l.actions=A.getTileNavigationActions(t)}if(a){const e=t.bag.getBag("deprecationProperties");const i=e.getProperty("deprecation");let a=null;if(i){a=s.getText(i==="D"?"configuration.app_deprecated":"configuration.app_archived",[e.getProperty("successor")])}l.deprecation_text=a}return l};A.getDataToDisplay=function(e,t){let i=0;let a;let n;let s;let o;const l={display_icon_url:t.icon||e.display_icon_url||"",display_title_text:t.title||e.display_title_text||"",display_number_value:!isNaN(t.number)?t.number:"...",display_number_unit:t.numberUnit||e.display_number_unit||"",display_info_text:t.info||e.display_info_text||"",display_info_state:t.infoState||"Neutral",display_subtitle_text:t.subtitle||e.display_subtitle_text||"",display_state_arrow:t.stateArrow||"None",display_number_state:t.numberState||"None",display_number_digits:t.numberDigits>=0?t.numberDigits:4,display_number_factor:t.numberFactor||"",display_search_keyword:t.keywords||e.display_search_keyword||"",targetParams:[]};if(t.infoStatus){l.display_info_state=t.infoStatus}if(t.targetParams){l.targetParams.push(t.targetParams)}if(t.results){for(a=0,n=t.results.length;a<n;a=a+1){s=t.results[a].number||0;if(typeof s==="string"){s=parseFloat(s)}i=i+s;o=t.results[a].targetParams;if(o){l.targetParams.push(o)}}l.display_number_value=i}if(!isNaN(t.number)){if(typeof t.number==="string"){t.number=t.number.trim()}if(t.number===""){l.display_number_value="..."}else{const e=this._shouldProcessDigits(t.number,t.numberDigits);const i=l.display_icon_url?4:5;if(t.number&&t.number.toString().length>=i||e){const e=this._normalizeNumber(t.number,i,t.numberFactor,t.numberDigits);l.display_number_factor=e.numberFactor;l.display_number_value=e.displayNumber}else{const e=T.getFloatInstance({maxFractionDigits:i});l.display_number_value=e.format(t.number)}}}if(l&&l.display_number_state){switch(l.display_number_state){case"Positive":l.display_number_state="Good";break;case"Negative":l.display_number_state="Error";break}}return l};A._normalizeNumber=function(e,t,i,a){let n;if(isNaN(e)){n=e}else{const t=T.getFloatInstance({maxFractionDigits:a});if(!i){const t=Math.abs(e);if(t>=1e9){i="B";e/=1e9}else if(t>=1e6){i="M";e/=1e6}else if(t>=1e3){i="K";e/=1e3}}n=t.format(e)}let s=n;const o=s[t-1];t-=o==="."||o===","?1:0;s=s.substring(0,t);return{displayNumber:s,numberFactor:i}};A._shouldProcessDigits=function(e,t){let i;e=typeof e!=="string"?e.toString():e;if(e.indexOf(".")!==-1){i=e.split(".")[1].length;if(i>t){return true}}return false};A.getTileSettingsAction=function(e,t,i){const a=A.getResourceBundle();const n=!i||i==="tile"?"tileSettingsBtn":"linkSettingsBtn";return{id:n,text:a.getText(n),press:function(){return new Promise(n=>{sap.ui.require(["sap/m/Button","sap/m/Dialog","sap/ui/core/mvc/View","sap/ui/layout/form/SimpleForm","sap/ui/layout/library"],(s,o,r,c,p)=>{const u=p.form.SimpleFormLayout;const g={showGroupSelection:false,title:e.getProperty("/config/display_title_text"),subtitle:e.getProperty("/config/display_subtitle_text")};if(!i||i==="tile"){g.info=e.getProperty("/config/display_info_text");g.icon=e.getProperty("/config/display_icon_url");g.keywords=e.getProperty("/config/display_search_keywords")}else if(i==="link"){g.showInfo=false;g.showIcon=false;g.showPreview=false}r.create({viewName:"module:sap/ushell/ui/footerbar/SaveAsTile.view"}).then(e=>{const r=new l(g);e.setModel(r);const p=new c({id:"tileSettings",layout:u.GridLayout,content:[e]}).addStyleClass("sapUshellAddBookmarkForm");const d=new s("bookmarkOkBtn",{text:a.getText("okBtn"),type:C.Emphasized,press:function(){t(e);f.close()},enabled:true});const _=new s("bookmarkCancelBtn",{text:a.getText("cancelBtn"),press:function(){f.close()}});var f=new o({id:"settingsDialog",title:!i||i==="tile"?a.getText("tileSettingsDialogTitle"):a.getText("linkSettingsDialogTitle"),contentWidth:"400px",content:p,beginButton:d,endButton:_,horizontalScrolling:false,afterClose:function(){f.destroy()}}).addStyleClass("sapContrastPlus");function b(e){d.setEnabled(!!e.trim())}e.getTitleInput().attachLiveChange(function(){b(this.getValue())});f.open();n(f)})})})}}};A.getSemanticNavigationUrl=function(e){let t=`#${String(e.navigation_semantic_object||"").trim()}`;t+=`-${String(e.navigation_semantic_action||"").trim()}`;if(e.navigation_semantic_parameters&&String(e.navigation_semantic_parameters||"").trim().length>0){t+=`?${String(e.navigation_semantic_parameters||"").trim()}`}return t};A.addParamsToUrl=function(e,t){let i="";const a=e.indexOf("?")!==-1;const n=t.targetParams;let s;if(n&&n.length>0){for(s=0;s<n.length;s=s+1){i+=n[s];if(s<n.length-1){i+="&"}}}if(i.length>0){if(!a){e+="?"}else{e+="&"}e+=i}return e};return A},true);
//# sourceMappingURL=utils.js.map