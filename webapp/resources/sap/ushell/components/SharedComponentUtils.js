// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/Device","sap/ushell/Config","sap/ushell/EventHub","sap/base/Log","sap/ui/core/Component","sap/ushell/Container","sap/ushell/utils"],(e,t,n,s,r,i,o)=>{"use strict";const a={PERS_KEY:"flp.settings.FlpSettings",bFlpSettingsAdded:false,toggleUserActivityLog:function(){n.join(n.once("CoreResourcesComplementLoaded"),t.on("/core/extension/SupportTicket")).do(async(e,t)=>{let n=sap.ui.require("sap/ushell/UserActivityLog");if(t&&!n){n=(await o.requireAsync(["sap/ushell/UserActivityLog"]))[0]}if(!n){return}if(t){n.activate()}else{n.deactivate()}})},initializeAccessKeys:function(){if(e.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler","sap/ushell/renderer/AccessKeysHandler"],(e,t)=>{e.getInstance().then(e=>{t.registerAppKeysHandler(e.handleFocusOnMe)})})}},getEffectiveHomepageSetting:function(e,n){if(t.last(n)===false){return Promise.resolve(t.last(e))}const s=e.split("/").pop();return this._getPersonalization(s).then(n=>{if(typeof n==="undefined"){return t.last(e)}t.emit(e,n);return n}).catch(()=>t.last(e))},_getPersonalization:function(e){return a.getPersonalizer(e,i.getRendererInternal("fiori2")).then(e=>e.getPersData()).catch(t=>{s.error(`Failed to load ${e} from the personalization`,t,"sap.ushell.components.flp.settings.FlpSettings");throw t})},getPersonalizer:function(e,t){return i.getServiceAsync("PersonalizationV2").then(n=>{const s=r.getOwnerComponentFor(t);const i={keyCategory:n.KeyCategory.FIXED_KEY,writeFrequency:n.WriteFrequency.LOW,clientStorageAllowed:true};const o={container:this.PERS_KEY,item:e};return n.getPersonalizer(o,i,s)})}};return a});
//# sourceMappingURL=SharedComponentUtils.js.map