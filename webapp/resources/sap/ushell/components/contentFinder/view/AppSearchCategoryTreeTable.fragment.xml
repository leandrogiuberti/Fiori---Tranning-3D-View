<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:table="sap.ui.table"
    core:require="{
        fLibrary: 'sap/f/library'
    }"
>
        <table:TreeTable

            id="CategoryTreeTable"
            selectionMode="Single"
            selectionBehavior="RowOnly"
            rowSelectionChange=".onCategoryTreeTableItemPressed"
            columnHeaderVisible="false"
            rows="{
                path: '/categoryTree',
                parameters: {
                    numberOfExpandedLevels: 1,
                    arrayNames: ['nodes']
                }
            }"
            visibleRowCountMode="Auto"
            visible="{= ${ui>/largeDataSet} }"
        >
            <table:extension>
                <Toolbar>
                    <SearchField
                        id="CategorySearch"
                        placeholder="{i18n>ContentFinder.CategoryTree.Search}"
                        width="100%"
                        liveChange=".onCatalogTreeTableSearch"
                    />
                    <ToolbarSpacer />
                    <Button
                        id="categoryTreeTableCloseButton"
                        text="{i18n>ContentFinder.CategoryTree.Close}"
                        press=".onCategoryTreeTogglePressed"
                        visible="{= ${ui>/layoutType} === fLibrary.LayoutType.OneColumn }"
                    />
                </Toolbar>
            </table:extension>

            <table:noData>
                <IllustratedMessage
                    id="illustratedMessageNoDataInCategoryTreeTable"
                    illustrationType="sapIllus-NoData"
                    title="{i18n>ContentFinder.CategoryTree.NoData.Title}"
                    description="{i18n>ContentFinder.CategoryTree.NoData.Description}" />
            </table:noData>

            <table:columns>
                <table:Column>
                    <Label text="{i18n>ContentFinder.CategoryTree.Column.Title}" />
                    <table:template>
                        <VBox class="sapUiTinyMarginTopBottom">
                         <Label text="{title}" tooltip="{title}" design="Bold"/>
                         <Label
                            text="{parts: [
                                    {path: 'contentProviderId'},
                                    {path: 'contentProviderLabel'}
                                ],
                                formatter: '.formatter.formatCategoryDescription'
                            }"
                            tooltip="{parts: [
                                {path: 'contentProviderId'},
                                {path: 'contentProviderLabel'}
                                ],
                                formatter: '.formatter.formatCategoryDescription'
                            }"
                            visible="{parts: [
                                    {path: 'contentProviderId'},
                                    {path: 'contentProviderLabel'}
                                ],
                                formatter: '.formatter.isCategoryVisible'
                            }"/>
                        </VBox>
                    </table:template>
                </table:Column>
            </table:columns>
        </table:TreeTable>
</core:FragmentDefinition>
