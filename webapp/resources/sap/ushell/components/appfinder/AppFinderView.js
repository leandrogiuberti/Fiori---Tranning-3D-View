// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/Element","sap/ui/core/mvc/View","sap/ui/core/InvisibleText","sap/ui/core/ListItem","sap/ui/model/Sorter","sap/m/MultiComboBox","sap/ui/model/BindingMode","sap/m/SearchField","sap/m/FlexBox","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/ToggleButton","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/Toolbar","sap/m/Page","sap/ushell/resources","sap/ui/Device"],(e,t,n,o,a,s,r,i,l,p,d,u,c,h,g,S,m)=>{"use strict";return t.extend("sap.ushell.components.appfinder.AppFinderView",{createContent:function(){const e=S.i18n;this.oPage=new g("appFinderPage",{showHeader:false,showSubHeader:false,showFooter:false,showNavButton:false,enableScrolling:false,title:{parts:["/groupContext/title"],formatter:function(t){return!t?e.getText("appFinderTitle"):e.getText("appFinder_group_context_title",[t])}}});return this.oPage},_showSearch:function(e){let t="enableCatalogSearch";if(e==="userMenu"){t="enableEasyAccessUserMenuSearch"}else if(e==="sapMenu"){t="enableEasyAccessSAPMenuSearch"}return this.getModel().getProperty(`/${t}`)},_showSearchTag:function(e){if(e==="userMenu"||e==="sapMenu"){return false}return this.getModel().getProperty("/enableCatalogTagFilter")},createSubHeader:function(){this.oToolbar=new h("appFinderSubHeader",{});if(m.system.desktop){this.oToolbar.addEventDelegate({onAfterRendering:function(){const e=document.getElementById("catalog-button");if(e){e.setAttribute("accesskey","a")}}})}this.oToolbar.addStyleClass("sapUshellAppFinderHeader");this.oPage.setSubHeader(this.oToolbar);this.oPage.setShowSubHeader(true);if(!this.openCloseSplitAppButton){this.openCloseSplitAppButton=new u("openCloseButtonAppFinderSubheader",{icon:"sap-icon://menu2",visible:"{/openCloseSplitAppButtonVisible}",pressed:"{/openCloseSplitAppButtonToggled}",press:function(e){this.getController().oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",e.getSource().getPressed());this.openCloseSplitAppButton.setTooltip(e.getParameter("pressed")?S.i18n.getText("ToggleButtonHide"):S.i18n.getText("ToggleButtonShow"))}.bind(this),tooltip:S.i18n.getText("ToggleButtonShow")});this.openCloseSplitAppButton.setModel(this.getController().oSubHeaderModel);this.oToolbar.addContent(this.openCloseSplitAppButton)}},updateSubHeader:function(e,t){let n;let o;this.oToolbar.removeAllContent();this.oToolbar.addContent(this.openCloseSplitAppButton);if(t){n=this.createSegmentedButtons(e);this.oPage.addStyleClass("sapUshellAppFinderWithEasyAccess");this.oToolbar.addContent(n)}if(this._showSearch(e)){o=this.createSearchControl(e);this.oToolbar.addContent(o)}this.getController()._updateCurrentMenuName(e)},createSegmentedButtons:function(e){if(this.segmentedButton){this.segmentedButton.setSelectedKey(e);return this.segmentedButton}const t=this.getController();const o=S.i18n;const a=new n({text:o.getText("AppFinder.SegmentedButton.Catalog.Describedby")}).toStatic();this.addDependent(a);this.segmentedButton=new p("appFinderSegmentedButtons",{items:[new d("catalog",{text:o.getText("appFinderCatalogTitle"),key:"catalog",press:function(e){t.onSegmentButtonClick(e)},customData:[new c({key:"aria-controls",value:"catalogView",writeToDom:true}),new c({key:"aria-describedby",value:a.getId(),writeToDom:true})]})]});if(t.bEnableEasyAccessUserMenu){const e=new n({text:o.getText("AppFinder.SegmentedButton.UserMenu.Describedby")}).toStatic();this.addDependent(e);this.segmentedButton.addItem(new d("userMenu",{text:o.getText("appFinderUserMenuTitle"),key:"userMenu",press:function(e){t.onSegmentButtonClick(e)},customData:[new c({key:"aria-controls",value:"userMenuView",writeToDom:true}),new c({key:"aria-describedby",value:e.getId(),writeToDom:true})]}))}if(t.bEnableEasyAccessSAPMenu){const e=new n({text:o.getText("AppFinder.SegmentedButton.SAPMenu.Describedby")}).toStatic();this.addDependent(e);this.segmentedButton.addItem(new d("sapMenu",{text:o.getText("appFinderSapMenuTitle"),key:"sapMenu",press:function(e){t.onSegmentButtonClick(e)},customData:[new c({key:"aria-controls",value:"sapMenuView",writeToDom:true}),new c({key:"aria-describedby",value:e.getId(),writeToDom:true})]}))}this.segmentedButton.setSelectedKey(e);return this.segmentedButton},_handleSearch:function(){this.getController().searchHandler.apply(this.getController(),arguments);const t=e.getElementById("appFinderSearch");if(t){t.focus()}},createSearchControl:function(t){if(!this.oAppFinderSearchContainer){this.oAppFinderSearchContainer=new l("appFinderSearchContainer")}this.oAppFinderSearchContainer.removeAllItems();if(t==="catalog"&&this._showSearchTag("catalog")){this.oAppFinderSearchContainer.addItem(this.createTagControl())}if(!this.oAppFinderSearchControl){this.oAppFinderSearchControl=new i("appFinderSearch",{search:this._handleSearch.bind(this),value:{path:"subHeaderModel>/search/searchTerm",mode:r.OneWay}}).addStyleClass("help-id-catalogSearch");this.oAppFinderSearchControl.addCustomData(new c({key:"aria-controls",value:"",writeToDom:true}));if(m.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler","sap/ushell/renderer/AccessKeysHandler"],(t,n)=>{t.getInstance().then(t=>{this.oAppFinderSearchControl.addEventDelegate({onsaptabnext:function(o){const a=e.getElementById("openCloseButtonAppFinderSubheader");if(a.getVisible()&&!a.getPressed()){o.preventDefault();n.setIsFocusHandledByAnotherHandler(true);t.setFocusOnCatalogTile()}}})})})}}this.oAppFinderSearchContainer.addItem(this.oAppFinderSearchControl);this._updateSearchWithPlaceHolder(t);return this.oAppFinderSearchContainer},_updateSearchWithPlaceHolder:function(e){let t="";if(e==="catalog"){t="EasyAccessMenu_SearchPlaceHolder_Catalog"}else if(e==="userMenu"){t="EasyAccessMenu_SearchPlaceHolder_UserMenu"}else if(e==="sapMenu"){t="EasyAccessMenu_SearchPlaceHolder_SAPMenu"}if(t&&this.oAppFinderSearchControl){this.oAppFinderSearchControl.setPlaceholder(S.i18n.getText(t));this.oAppFinderSearchControl.setTooltip(S.i18n.getText(t))}},createTagControl:function(){if(this.oAppFinderTagFilter){return this.oAppFinderTagFilter}const e=this.getController();this.oAppFinderTagFilter=new s("appFinderTagFilter",{selectedKeys:{path:"subHeaderModel>/tag/selectedTags"},tooltip:"{i18n>catalogTilesTagfilter_tooltip}",placeholder:"{i18n>catalogTilesTagfilter_HintText}",visible:{path:"/tagList",formatter:function(e){return e.length>0}},items:{path:"/tagList",sorter:new a("tag",false,false),template:new o({text:"{tag}",key:"{tag}"})},selectionChange:[e.onTagsFilter,e]}).addStyleClass("help-id-catalogTagFilter");return this.oAppFinderTagFilter},getControllerName:function(){return"sap.ushell.components.appfinder.AppFinder"}})});
//# sourceMappingURL=AppFinderView.js.map