//@ui5-bundle sap/ushell/components/appfinder/Component-preload.js
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/AppFinder.controller", ["sap/base/Log","sap/base/util/extend","sap/ui/core/EventBus","sap/ui/core/mvc/View","sap/ui/core/mvc/Controller","sap/ui/core/Component","sap/ushell/EventHub","sap/ushell/components/appfinder/VisualizationOrganizerHelper","sap/ui/core/routing/HashChanger","sap/ui/thirdparty/jquery","sap/ui/model/json/JSONModel","sap/ui/Device","sap/ui/thirdparty/hasher","sap/ushell/Container"],(e,t,s,o,n,a,r,i,l,jQuery,u,h,c,p)=>{"use strict";let d;return n.extend("sap.ushell.components.appfinder.AppFinder",{onInit:function(){const e=a.getOwnerComponentFor(this.getView());this.oRouter=e.getRouter();const t=this.getView();const s=e.getModel();t.setModel(s);d=e.oCatalogsManager;this.bEnableEasyAccessSAPMenu=s.getProperty("/enableEasyAccessSAPMenu");this.bEnableEasyAccessUserMenu=s.getProperty("/enableEasyAccessUserMenu");this.bEnableEasyAccessOnTablet=s.getProperty("/enableEasyAccessOnTablet");const n=this.bEnableEasyAccessSAPMenu||this.bEnableEasyAccessUserMenu;const r=!h.system.phone&&!h.system.tablet||h.system.tablet&&this.bEnableEasyAccessOnTablet||h.system.combi;this.bShowEasyAccessMenu=n&&r;this.getView().setModel(this._getSubHeaderModel(),"subHeaderModel");this.oConfig=e.getComponentData().config;this.pCatalogView=o.create({id:"catalogView",viewName:"module:sap/ushell/components/appfinder/CatalogView",height:"100%",viewData:{parentComponent:e,subHeaderModel:this._getSubHeaderModel(),CatalogsManager:d}});this.oVisualizationOrganizerHelper=i.getInstance();this.oInitPromise=this.pCatalogView.then(e=>{e.addStyleClass("sapUiGlobalBackgroundColor sapUiGlobalBackgroundColorForce");return this.oVisualizationOrganizerHelper.loadAndUpdate()});this.oRouter.attachRouteMatched(this._handleAppFinderNavigation.bind(this));t.createSubHeader();h.resize.attachHandler(this._resizeHandler.bind(this));this.oRouter.oHashChanger=l.getInstance()},onExit:function(){this.pCatalogView.then(e=>{e.destroy()})},_resizeHandler:function(){const e=this._showOpenCloseSplitAppButton();const t=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible");if(e!==t){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",e);if(e){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false)}}this._toggleViewWithToggleButtonClass(e)},_handleAppFinderNavigation:function(e){try{const e=p.getRendererInternal();e.getRootControl().getShellHeader()._oLastFocusedHeaderElement=null}catch{}const o=t({},e);if(this.firstView!==false){if(!this.bShowEasyAccessMenu){this.pCatalogView.then(e=>{this.getView().oPage.addContent(e);setTimeout(()=>{jQuery("#catalogSelect").focus()},0)})}this.firstView=false}this.pCatalogView.then(e=>{e.getController().customRouteMatched(o)});const n=this.getView();this._preloadAppHandler();this._getPathAndHandleGroupContext(e);this._toggleViewWithToggleButtonClass(this._showOpenCloseSplitAppButton());if(this.bShowEasyAccessMenu){this.onShow(e)}else if(n._showSearch("catalog")){n.updateSubHeader("catalog",false);this._toggleViewWithSearchAndTagsClasses("catalog")}s.getInstance().publish("showCatalog");r.emit("CenterViewPointContentRendered","appFinder");r.emit("showCatalog",{sId:"showCatalog",oData:Date.now()});s.getInstance().publish("launchpad","contentRendered");if(r.last("firstCatalogSegmentCompleteLoaded")){r.emit("CloseFesrRecord",Date.now())}},_showOpenCloseSplitAppButton:function(){return!h.orientation.landscape||h.system.phone||this.oView.getModel().getProperty("/isPhoneWidth")},_resetSubHeaderModel:function(){this.oSubHeaderModel.setProperty("/activeMenu",null);this.oSubHeaderModel.setProperty("/search",{searchMode:false,searchTerm:null});this.oSubHeaderModel.setProperty("/tag",{tagMode:false,selectedTags:[]});this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",this._showOpenCloseSplitAppButton());this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false)},_getSubHeaderModel:function(){if(this.oSubHeaderModel){return this.oSubHeaderModel}this.oSubHeaderModel=new u;this._resetSubHeaderModel();return this.oSubHeaderModel},onTagsFilter:function(e){const t=e.getSource();const s=t.getModel("subHeaderModel");const o=e.getSource().getSelectedItems();const n=o.length>0;const a={tagMode:n,selectedTags:[]};o.forEach(e=>{a.selectedTags.push(e.getText())});s.setProperty("/activeMenu",this.getCurrentMenuName());s.setProperty("/tag",a);this.pCatalogView.then(e=>{e.getController().onTag(a)})},searchHandler:function(e){let t=e.getSource().getValue();let s=false;if(t===null){return}const o=this.oSubHeaderModel.getProperty("/search");let n=this.oSubHeaderModel.getProperty("/activeMenu");if(this.getCurrentMenuName()!==n){n=this.getCurrentMenuName()}if(!o.searchMode&&!e.getParameter("clearButtonPressed")){o.searchMode=true}if(o.searchMode&&h.system.phone){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false)}if(t!==o.searchTerm){if(this.containsOnlyWhiteSpaces(t)){t="*"}o.searchTerm=t;s=true}this.oSubHeaderModel.setProperty("/search",o);this.oSubHeaderModel.setProperty("/activeMenu",n);this.oSubHeaderModel.refresh(true);if(s){this.pCatalogView.then(e=>{e.getController().onSearch(o)})}},_preloadAppHandler:function(){setTimeout(()=>{const e=c.getHash()||"";if(!e.startsWith("Shell-appfinder")){return}this._updateShellHeader(this.oView.oPage.getTitle())},0)},getCurrentMenuName:function(){return this.currentMenu},_navigateTo:function(e){const t=this.oVisualizationOrganizerHelper.getNavigationContextAsText.apply(this);if(t){this.oRouter.navTo(e,{filters:t},true)}else{this.oRouter.navTo(e,{},true)}},_filterSystemModelsOnTablet:function(e){const t=new jQuery.Deferred;if(this.bEnableEasyAccessOnTablet){p.getServiceAsync("NavTargetResolutionInternal").then(s=>{const o=e.reduce((e,t)=>{const o=s.isNavigationSupported([{target:{semanticObject:"Shell",action:"startWDA"},params:{"sap-system":t.systemId,"sap-ui2-wd-app-id":"."}},{target:{semanticObject:"Shell",action:"startGUI"},params:{"sap-system":t.systemId,"sap-ui2-tcode":"."}}]);e.push(new Promise((e,s)=>{o.then(s=>{const o={system:t,isSupported:false};if(s[0].supported||s[1].supported){o.isSupported=true}e(o)}).fail(()=>{e({system:t,isSupported:false})})}));return e},[]);Promise.all(o).then(e=>{const s=e.reduce((e,t)=>{if(t.isSupported){e.push(t.system)}return e},[]);t.resolve(s)})})}else{t.resolve(e)}return t.promise()},getGroupNavigationContext:function(){const e=this.oView.getModel().getProperty("/groupContext");const t=e?e.path:null;if(t){return JSON.stringify({targetGroup:encodeURIComponent(t)})}return null},getSystemsModels:function(){const e=this;if(this.getSystemsPromise){return this.getSystemsPromise}const t=new jQuery.Deferred;this.getSystemsPromise=t.promise();const s=["userMenu","sapMenu"].map(t=>{const s=new u;s.setProperty("/systemSelected",null);s.setProperty("/systemsList",[]);return e.getSystems(t).then(e._filterSystemModelsOnTablet.bind(e)).then(e=>{s.setProperty("/systemsList",e);return s})});jQuery.when.apply(jQuery,s).then((e,s)=>{t.resolve(e,s)});return this.getSystemsPromise},onSegmentButtonClick:function(e){this.oSubHeaderModel.setProperty("/search/searchMode",false);this.oSubHeaderModel.setProperty("/search/searchTerm","");const t=e.getParameter("id");this._navigateTo(t)},onShow:function(e){const t=e.getParameter("name");if(t===this.getCurrentMenuName()){return}const s=this.getView();s._updateSearchWithPlaceHolder(t);this._updateCurrentMenuName(t);this.getSystemsModels().then((e,t)=>{const n=t.getProperty("/systemsList");const r=e.getProperty("/systemsList");s.oPage.removeAllContent();const i=this.currentMenu==="sapMenu"?n:r;if(i&&i.length){s.updateSubHeader(this.currentMenu,true)}else if(s._showSearch(this.currentMenu)){s.updateSubHeader(this.currentMenu,false)}if(this.currentMenu==="catalog"){this.pCatalogView.then(e=>{s.oPage.addContent(e)})}else if(this.currentMenu==="userMenu"){if(!this.pUserMenuView){this.pUserMenuView=o.create({id:"userMenuView",viewName:"module:sap/ushell/components/appfinder/EasyAccessView",height:"100%",viewData:{menuName:"USER_MENU",easyAccessSystemsModel:e,parentComponent:a.getOwnerComponentFor(this.getView()),subHeaderModel:this._getSubHeaderModel(),enableSearch:this.getView()._showSearch("userMenu"),CatalogsManager:d}})}this.pUserMenuView.then(e=>{s.oPage.addContent(e)})}else if(this.currentMenu==="sapMenu"){if(!this.pSapMenuView){this.pSapMenuView=o.create({id:"sapMenuView",viewName:"module:sap/ushell/components/appfinder/EasyAccessView",height:"100%",viewData:{menuName:"SAP_MENU",easyAccessSystemsModel:t,parentComponent:a.getOwnerComponentFor(this.getView()),subHeaderModel:this._getSubHeaderModel(),enableSearch:this.getView()._showSearch("sapMenu"),CatalogsManager:d}})}this.pSapMenuView.then(e=>{s.oPage.addContent(e)})}this._setFocusToSegmentedButton(i);this.oSubHeaderModel.setProperty("/activeMenu",this.currentMenu);if(this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible")){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false)}this.oSubHeaderModel.refresh(true)})},_updateCurrentMenuName:function(e){if(!this.bShowEasyAccessMenu||e==="sapMenu"&&!this.bEnableEasyAccessSAPMenu||e==="userMenu"&&!this.bEnableEasyAccessUserMenu){this.currentMenu="catalog"}else{this.currentMenu=e}this._toggleViewWithSearchAndTagsClasses(e)},_toggleViewWithSearchAndTagsClasses:function(e){const t=this.getView();if(t._showSearch(e)){t.oPage.addStyleClass("sapUshellAppFinderSearch")}else{t.oPage.removeStyleClass("sapUshellAppFinderSearch")}if(t._showSearchTag(e)){t.oPage.addStyleClass("sapUshellAppFinderTags")}else{t.oPage.removeStyleClass("sapUshellAppFinderTags")}},_toggleViewWithToggleButtonClass:function(e){const t=this.getView();if(e){t.oPage.addStyleClass("sapUshellAppFinderToggleButton")}else{t.oPage.removeStyleClass("sapUshellAppFinderToggleButton")}},_setFocusToSegmentedButton:function(e){const t=this.getView();if(e&&e.length){const e=t.segmentedButton.getSelectedButton();setTimeout(()=>{jQuery(`#${e}`).focus()},0)}else{setTimeout(()=>{jQuery("#catalogSelect").focus()},0)}},_getPathAndHandleGroupContext:function(e){const t=e.getParameter("arguments");const s=t.filters;let o;try{o=JSON.parse(s)}catch{o=s}this.oVisualizationOrganizerHelper.updateModelWithContext.apply(this,[o])},_updateModelWithGroupContext:function(e){const t=this.oView.getModel();let s=e&&decodeURIComponent(e.targetGroup)||"";let o=t.getProperty(s);s=s==="undefined"?undefined:s;const n={path:s,id:"",title:o&&o.title};if(s&&s!==""){p.getServiceAsync("FlpLaunchPage").then(e=>{function a(){const r=t.getProperty("/groups");if(r.length&&o?.object){o=t.getProperty(s);n.id=e.getGroupId(o.object);n.title=o.title||e.getGroupTitle(o.object);return}setTimeout(a,100)}a()})}t.setProperty("/groupContext",n)},getSystems:function(t){const s=new jQuery.Deferred;p.getServiceAsync("ClientSideTargetResolution").then(e=>e.getEasyAccessSystems(t)).then(e=>{const t=[];const o=Object.keys(e);for(let s=0;s<o.length;s++){const n=o[s];t[s]={systemName:e[n].text,systemId:n}}s.resolve(t)}).catch(t=>{e.error("An error occurred while retrieving the systems:",t);s.reject(t)});return s.promise()},_updateShellHeader:async function(e){const t=await this.getOwnerComponent().getService("ShellUIService");t.setTitle(e);t.setHierarchy()},containsOnlyWhiteSpaces:function(e){if(!e||e===""){return false}return!e.replace(/\s/g,"").length}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/AppFinderView", ["sap/ui/core/Element","sap/ui/core/mvc/View","sap/ui/core/InvisibleText","sap/ui/core/ListItem","sap/ui/model/Sorter","sap/m/MultiComboBox","sap/ui/model/BindingMode","sap/m/SearchField","sap/m/FlexBox","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/ToggleButton","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/Toolbar","sap/m/Page","sap/ushell/resources","sap/ui/Device"],(e,t,n,o,a,s,r,i,l,p,d,u,c,h,g,S,m)=>{"use strict";return t.extend("sap.ushell.components.appfinder.AppFinderView",{createContent:function(){const e=S.i18n;this.oPage=new g("appFinderPage",{showHeader:false,showSubHeader:false,showFooter:false,showNavButton:false,enableScrolling:false,title:{parts:["/groupContext/title"],formatter:function(t){return!t?e.getText("appFinderTitle"):e.getText("appFinder_group_context_title",[t])}}});return this.oPage},_showSearch:function(e){let t="enableCatalogSearch";if(e==="userMenu"){t="enableEasyAccessUserMenuSearch"}else if(e==="sapMenu"){t="enableEasyAccessSAPMenuSearch"}return this.getModel().getProperty(`/${t}`)},_showSearchTag:function(e){if(e==="userMenu"||e==="sapMenu"){return false}return this.getModel().getProperty("/enableCatalogTagFilter")},createSubHeader:function(){this.oToolbar=new h("appFinderSubHeader",{});if(m.system.desktop){this.oToolbar.addEventDelegate({onAfterRendering:function(){const e=document.getElementById("catalog-button");if(e){e.setAttribute("accesskey","a")}}})}this.oToolbar.addStyleClass("sapUshellAppFinderHeader");this.oPage.setSubHeader(this.oToolbar);this.oPage.setShowSubHeader(true);if(!this.openCloseSplitAppButton){this.openCloseSplitAppButton=new u("openCloseButtonAppFinderSubheader",{icon:"sap-icon://menu2",visible:"{/openCloseSplitAppButtonVisible}",pressed:"{/openCloseSplitAppButtonToggled}",press:function(e){this.getController().oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",e.getSource().getPressed());this.openCloseSplitAppButton.setTooltip(e.getParameter("pressed")?S.i18n.getText("ToggleButtonHide"):S.i18n.getText("ToggleButtonShow"))}.bind(this),tooltip:S.i18n.getText("ToggleButtonShow")});this.openCloseSplitAppButton.setModel(this.getController().oSubHeaderModel);this.oToolbar.addContent(this.openCloseSplitAppButton)}},updateSubHeader:function(e,t){let n;let o;this.oToolbar.removeAllContent();this.oToolbar.addContent(this.openCloseSplitAppButton);if(t){n=this.createSegmentedButtons(e);this.oPage.addStyleClass("sapUshellAppFinderWithEasyAccess");this.oToolbar.addContent(n)}if(this._showSearch(e)){o=this.createSearchControl(e);this.oToolbar.addContent(o)}this.getController()._updateCurrentMenuName(e)},createSegmentedButtons:function(e){if(this.segmentedButton){this.segmentedButton.setSelectedKey(e);return this.segmentedButton}const t=this.getController();const o=S.i18n;const a=new n({text:o.getText("AppFinder.SegmentedButton.Catalog.Describedby")}).toStatic();this.addDependent(a);this.segmentedButton=new p("appFinderSegmentedButtons",{items:[new d("catalog",{text:o.getText("appFinderCatalogTitle"),key:"catalog",press:function(e){t.onSegmentButtonClick(e)},customData:[new c({key:"aria-controls",value:"catalogView",writeToDom:true}),new c({key:"aria-describedby",value:a.getId(),writeToDom:true})]})]});if(t.bEnableEasyAccessUserMenu){const e=new n({text:o.getText("AppFinder.SegmentedButton.UserMenu.Describedby")}).toStatic();this.addDependent(e);this.segmentedButton.addItem(new d("userMenu",{text:o.getText("appFinderUserMenuTitle"),key:"userMenu",press:function(e){t.onSegmentButtonClick(e)},customData:[new c({key:"aria-controls",value:"userMenuView",writeToDom:true}),new c({key:"aria-describedby",value:e.getId(),writeToDom:true})]}))}if(t.bEnableEasyAccessSAPMenu){const e=new n({text:o.getText("AppFinder.SegmentedButton.SAPMenu.Describedby")}).toStatic();this.addDependent(e);this.segmentedButton.addItem(new d("sapMenu",{text:o.getText("appFinderSapMenuTitle"),key:"sapMenu",press:function(e){t.onSegmentButtonClick(e)},customData:[new c({key:"aria-controls",value:"sapMenuView",writeToDom:true}),new c({key:"aria-describedby",value:e.getId(),writeToDom:true})]}))}this.segmentedButton.setSelectedKey(e);return this.segmentedButton},_handleSearch:function(){this.getController().searchHandler.apply(this.getController(),arguments);const t=e.getElementById("appFinderSearch");if(t){t.focus()}},createSearchControl:function(t){if(!this.oAppFinderSearchContainer){this.oAppFinderSearchContainer=new l("appFinderSearchContainer")}this.oAppFinderSearchContainer.removeAllItems();if(t==="catalog"&&this._showSearchTag("catalog")){this.oAppFinderSearchContainer.addItem(this.createTagControl())}if(!this.oAppFinderSearchControl){this.oAppFinderSearchControl=new i("appFinderSearch",{search:this._handleSearch.bind(this),value:{path:"subHeaderModel>/search/searchTerm",mode:r.OneWay}}).addStyleClass("help-id-catalogSearch");this.oAppFinderSearchControl.addCustomData(new c({key:"aria-controls",value:"",writeToDom:true}));if(m.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler","sap/ushell/renderer/AccessKeysHandler"],(t,n)=>{t.getInstance().then(t=>{this.oAppFinderSearchControl.addEventDelegate({onsaptabnext:function(o){const a=e.getElementById("openCloseButtonAppFinderSubheader");if(a.getVisible()&&!a.getPressed()){o.preventDefault();n.setIsFocusHandledByAnotherHandler(true);t.setFocusOnCatalogTile()}}})})})}}this.oAppFinderSearchContainer.addItem(this.oAppFinderSearchControl);this._updateSearchWithPlaceHolder(t);return this.oAppFinderSearchContainer},_updateSearchWithPlaceHolder:function(e){let t="";if(e==="catalog"){t="EasyAccessMenu_SearchPlaceHolder_Catalog"}else if(e==="userMenu"){t="EasyAccessMenu_SearchPlaceHolder_UserMenu"}else if(e==="sapMenu"){t="EasyAccessMenu_SearchPlaceHolder_SAPMenu"}if(t&&this.oAppFinderSearchControl){this.oAppFinderSearchControl.setPlaceholder(S.i18n.getText(t));this.oAppFinderSearchControl.setTooltip(S.i18n.getText(t))}},createTagControl:function(){if(this.oAppFinderTagFilter){return this.oAppFinderTagFilter}const e=this.getController();this.oAppFinderTagFilter=new s("appFinderTagFilter",{selectedKeys:{path:"subHeaderModel>/tag/selectedTags"},tooltip:"{i18n>catalogTilesTagfilter_tooltip}",placeholder:"{i18n>catalogTilesTagfilter_HintText}",visible:{path:"/tagList",formatter:function(e){return e.length>0}},items:{path:"/tagList",sorter:new a("tag",false,false),template:new o({text:"{tag}",key:"{tag}"})},selectionChange:[e.onTagsFilter,e]}).addStyleClass("help-id-catalogTagFilter");return this.oAppFinderTagFilter},getControllerName:function(){return"sap.ushell.components.appfinder.AppFinder"}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/Catalog.controller", ["sap/base/util/extend","sap/ui/core/Element","sap/ui/core/EventBus","sap/ushell/library","sap/ui/core/mvc/View","sap/ui/core/mvc/Controller","sap/ushell/components/_HomepageManager/PagingManager","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/library","sap/ui/Device","sap/ui/model/Context","sap/m/MessageToast","sap/ushell/Config","sap/ushell/components/appfinder/VisualizationOrganizerHelper","sap/ushell/utils/WindowUtils","sap/ushell/EventHub","sap/base/Log","sap/ushell/Container","sap/ushell/api/performance/Extension","sap/ushell/api/performance/NavigationSource"],(e,t,i,o,s,r,a,jQuery,n,l,g,c,h,p,d,u,f,y,C,m,F,P,w)=>{"use strict";const M=c.SplitAppMode;const S=o.AppType;let T;return r.extend("sap.ushell.components.appfinder.Catalog",{oPopover:null,onInit:function(){F.getServiceAsync("FlpLaunchPage").then(e=>{this.oLaunchPageService=e});this.categoryFilter="";this.preCategoryFilter="";const e=this.getView();this.oMainModel=e.getModel();this.oSubHeaderModel=e.getModel("subHeaderModel");this.resetPage=false;this.bIsInProcess=false;this.oVisualizationOrganizerHelper=e.oVisualizationOrganizerHelper;this.oCatalogsContainer=e.oCatalogsContainer;this.timeoutId=0;document.subHeaderModel=this.oSubHeaderModel;document.mainModel=this.oMainModel;const t=this.oSubHeaderModel.bindProperty("/openCloseSplitAppButtonToggled");t.attachChange(this.handleToggleButtonModelChanged,this);e.oCatalogsContainer.setHandleSearchCallback(this.handleSearchModelChanged.bind(this));T=this.getView().getViewData().CatalogsManager&&this.getView().getViewData().CatalogsManager.getInstance()},customRouteMatched:function(e){this.onShow(e)},onBeforeRendering:function(){i.getInstance().publish("renderCatalog")},onAfterRendering:function(){this.wasRendered=true;if(!this.PagingManager){this._setPagingManager()}if(this.PagingManager.currentPageIndex===0){this.allocateNextPage()}jQuery(window).resize(()=>{const e=jQuery(window).width();const t=jQuery(window).height();this.PagingManager.setContainerSize(e,t)});this._handleAppFinderWithDocking();i.getInstance().subscribe("launchpad","appFinderWithDocking",this._handleAppFinderWithDocking,this);i.getInstance().subscribe("sap.ushell","appFinderAfterNavigate",this._handleAppFinderAfterNavigate,this)},_setPagingManager:function(){this.lastCatalogId=0;this.PagingManager=new a("catalogPaging",{supportedElements:{tile:{className:"sapUshellTile"}},containerHeight:window.innerHeight,containerWidth:window.innerWidth});this.oCatalogsContainer.setPagingManager(this.PagingManager)},_decodeUrlFilteringParameters:function(e){let t;try{t=JSON.parse(e)}catch{t=e}const i=t&&t.tagFilter&&t.tagFilter||[];if(i){try{this.tagFilter=JSON.parse(i)}catch{this.tagFilter=[]}}else{this.tagFilter=[]}this.categoryFilter=t&&t.catalogSelector&&t.catalogSelector||this.categoryFilter;if(this.categoryFilter){this.categoryFilter=window.decodeURIComponent(this.categoryFilter)}this.searchFilter=t&&t.tileFilter&&t.tileFilter||null;if(this.searchFilter){this.searchFilter=window.decodeURIComponent(this.searchFilter)}},_applyFilters:function(e){let t=false;if(this.categoryFilter){this.categoryFilter=n.i18n.getText("all")===this.categoryFilter?"":this.categoryFilter;if(this.categoryFilter!==this.preCategoryFilter){t=true}this.oView.setCategoryFilterSelection(this.categoryFilter,t)}else{t=true;this.oView.setCategoryFilterSelection("",t)}this.preCategoryFilter=this.categoryFilter;if(this.searchFilter&&this.searchFilter.length){this.searchFilter=this.searchFilter.replace(/\*/g,"");this.searchFilter=this.searchFilter.trim();this.oSubHeaderModel.setProperty("/search",{searchMode:true,searchTerm:this.searchFilter})}else if(e){this.oSubHeaderModel.setProperty("/search",{searchMode:false,searchTerm:""});this.resetPage=true}if(this.tagFilter&&this.tagFilter.length){this.oSubHeaderModel.setProperty("/tag",{tagMode:true,selectedTags:this.tagFilter})}else if(e){this.oSubHeaderModel.setProperty("/tag",{tagMode:false,selectedTags:[]});this.resetPage=true}this.handleSearchModelChanged()},_handleAppFinderAfterNavigate:function(){this.clearFilters()},clearFilters:function(){let e=false;if(this.categoryFilter!==this.preCategoryFilter){e=true}const t=this.oSubHeaderModel.getProperty("/search/searchMode");const i=this.oSubHeaderModel.getProperty("/tag/tagMode");if(t){this.oSubHeaderModel.setProperty("/search",{searchMode:true,searchTerm:""})}if(i){this.oSubHeaderModel.setProperty("/tag",{tagMode:true,selectedTags:[]})}if(this.categoryFilter&&this.categoryFilter!==""){this.selectedCategoryId=undefined;this.categoryFilter=undefined;this.getView().getModel().setProperty("/categoryFilter","");this.oView.setCategoryFilterSelection("",e)}this.preCategoryFilter=this.categoryFilter;this.handleSearchModelChanged()},onShow:function(t){const i=t.getParameter("arguments").filters;e(this.getView().getViewData(),t);this._decodeUrlFilteringParameters(i);if(this.wasRendered&&!i){this.clearFilters()}else{this._applyFilters(this.wasRendered)}},allocateNextPage:function(){if(!this.oCatalogsContainer.nAllocatedUnits||this.oCatalogsContainer.nAllocatedUnits===0){this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();this.oCatalogsContainer.applyPagingCategoryFilters(this.allocateTiles,this.categoryFilter)}},setTagsFilter:function(e){const t={catalogSelector:this.categoryFilter?this.categoryFilter:n.i18n.getText("all"),tileFilter:this.searchFilter&&this.searchFilter.length?encodeURIComponent(this.searchFilter):"",tagFilter:e.length?JSON.stringify(e):[]};this._addNavigationContextToFilter(t);this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(t)})},setCategoryFilter:function(e){const t={catalogSelector:e,tileFilter:this.searchFilter?encodeURIComponent(this.searchFilter):"",tagFilter:this.tagFilter.length?JSON.stringify(this.tagFilter):[]};this._addNavigationContextToFilter(t);this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(t)})},setSearchFilter:function(e){const t={catalogSelector:this.categoryFilter?this.categoryFilter:n.i18n.getText("all"),tileFilter:e?encodeURIComponent(e):"",tagFilter:this.tagFilter.length?JSON.stringify(this.tagFilter):[]};this._addNavigationContextToFilter(t);this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(t)})},_addNavigationContextToFilter:function(e){const t=this.oVisualizationOrganizerHelper.getNavigationContext.apply(this);if(t){Object.keys(t).forEach(i=>{e[i]=t[i]})}return e},onSearch:function(e){const t=this.oSubHeaderModel.getProperty("/activeMenu");if(this.oView.getId().indexOf(t)!==-1){const t=e.searchTerm?e.searchTerm:"";this.setSearchFilter(t)}else{this._restoreSelectedMasterItem()}},onTag:function(e){const t=this.oSubHeaderModel.getProperty("/activeMenu");if(this.oView.getId().indexOf(t)!==-1){const t=e.selectedTags?e.selectedTags:[];this.setTagsFilter(t)}else{this._restoreSelectedMasterItem()}},getGroupContext:function(){const e=this.getView().getModel();const t=e.getProperty("/groupContext/path");return{targetGroup:encodeURIComponent(t||"")}},_isTagFilteringChanged:function(e){const t=e.length===this.tagFilter.length;let i=t;if(!i){return true}e.some(e=>{i=this.tagFilter&&Array.prototype.indexOf.call(this.tagFilter,e)!==-1;return!i});return i},_setUrlWithTagsAndSearchTerm:function(e,t){const i={tileFilter:e&&e.length?encodeURIComponent(e):"",tagFilter:t.length?JSON.stringify(t):[]};this._addNavigationContextToFilter(i);this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(i)})},handleSearchModelChanged:function(){const e=this.oSubHeaderModel.getProperty("/search/searchMode");const i=this.oSubHeaderModel.getProperty("/tag/tagMode");let o=this.oSubHeaderModel.getProperty("/search/searchTerm");const s=this.oSubHeaderModel.getProperty("/tag/selectedTags");const r=[];let a;let n;let c;if(!this.PagingManager){this._setPagingManager()}this.PagingManager.resetCurrentPageIndex();this.nAllocatedTiles=0;this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();this.oView.oCatalogsContainer.updateAllocatedUnits(this.allocateTiles);this.oView.oCatalogsContainer.resetCatalogPagination();const h=t.getElementById("catalogTilesDetailedPage");if(h){h.scrollTo(0,0)}if(e||i||this.resetPage){if(s&&s.length>0){const e=new l("tags","EQ","v");e.fnTest=function(e){if(s.length===0){return true}for(let t=0;t<s.length;t++){const i=s[t];if(e.indexOf(i)===-1){return false}}return true};a=new l([e],true)}o=o?o.replace(/\*/g,""):o;if(o){const e=o.split(/[\s,]+/);const t=new l(jQuery.map(e,e=>e&&new l("keywords",g.Contains,e)),true);const i=new l(jQuery.map(e,e=>e&&new l("title",g.Contains,e)),true);const s=new l(jQuery.map(e,e=>e&&new l("subtitle",g.Contains,e)),true);r.push(t);r.push(i);r.push(s);n=new l(r,false)}const e=this.oView.oCatalogsContainer.getCatalogs();this.oSearchResultsTotal=[];const t=this;if(a&&a.aFilters.length>0&&n){c=new l([n].concat([a]),true)}else if(a&&a.aFilters.length>0){c=new l([a],true)}else if(n&&n.aFilters.length>0){c=new l([n],true)}e.forEach(e=>{e.getBinding("customTilesContainer").filter(c);e.getBinding("appBoxesContainer").filter(c)});this.oView.oCatalogsContainer.bSearchResults=false;this.oView.oCatalogsContainer.applyPagingCategoryFilters(this.oView.oCatalogsContainer.nAllocatedUnits,this.categoryFilter);this.bSearchResults=this.oView.oCatalogsContainer.bSearchResults;this.oView.splitApp.toDetail(t.getView()._calculateDetailPageId());this.resetPage=false}else{this.oView.oCatalogsContainer.applyPagingCategoryFilters(this.oView.oCatalogsContainer.nAllocatedUnits,this.categoryFilter)}const p=this.getView()._calculateDetailPageId();this.oView.splitApp.toDetail(p)},_handleAppFinderWithDocking:function(){if(jQuery(".sapUshellContainerDocked").length>0){if(jQuery("#mainShell").width()<710){if(window.innerWidth<1024){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",false);this.oView.splitApp.setMode(M.ShowHideMode)}else{this.oView.splitApp.setMode(M.HideMode);this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",true)}}else{this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",false);this.oView.splitApp.setMode(M.ShowHideMode)}}},_restoreSelectedMasterItem:function(){const e=this.oView.splitApp.getMasterPage("catalogSelect");const i=t.getElementById(this.selectedCategoryId);if(i){this.categoryFilter=i.getTitle()}e.setSelectedItem(i)},handleToggleButtonModelChanged:function(){const e=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible");const i=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonToggled");if(i!==this.bCurrentButtonToggled&&e){if(!h.system.phone){if(i&&!this.oView.splitApp.isMasterShown()){this.oView.splitApp.showMaster()}else if(this.oView.splitApp.isMasterShown()){this.oView.splitApp.hideMaster()}}else if(this.oView.splitApp.isMasterShown()){const e=t.getElementById(this.getView()._calculateDetailPageId());this.oView.splitApp.toDetail(e)}else if(i){const e=t.getElementById("catalogSelect");this.oView.splitApp.toMaster(e,"show")}}this.bCurrentButtonToggled=i},_handleCatalogListItemPress:function(e){this.onCategoryFilter(e);if(this.oSubHeaderModel.getProperty("/search/searchTerm")!==""){this.oSubHeaderModel.setProperty("/search/searchMode",true)}if(h.system.phone||h.system.tablet){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",!this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled"))}},onCategoryFilter:function(e){const t=e.getSource();const i=t.getSelectedItem();const o=i.getBindingContext();const s=o.getModel();if(s.getProperty("static",o)){s.setProperty("/showCatalogHeaders",true);this.setCategoryFilter();this.selectedCategoryId=undefined;this.categoryFilter=undefined}else{s.setProperty("/showCatalogHeaders",false);this.setCategoryFilter(window.encodeURIComponent(i.getBindingContext().getObject().title));this.categoryFilter=i.getTitle();this.selectedCategoryId=i.getId()}},onTileAfterRendering:function(e){const t=e.oSource.getDomRef();if(t){const e=t.getElementsByClassName("sapMGT");for(let t=0;t<e.length;t++){e[t].setAttribute("tabindex","-1")}}},catalogTilePress:function(){i.getInstance().publish("launchpad","catalogTileClick")},onAppBoxPressed:function(e){const t=e.getSource();const i=t.getBindingContext().getObject();if(e.mParameters.srcControl.$().closest(".sapUshellPinButton").length){return}const o=this.oLaunchPageService.getAppBoxPressHandler(i);if(o){o(i)}else{const e=t.getProperty("url");if(!e){m.info("AppBox url property is not set.",null,"sap.ushell.components.Catalog.controller");return}const i=new P;i.addNavigationSource(w.AppFinder);C.emit("UITracer.trace",{reason:"LaunchApp",source:"Tile",data:{targetUrl:e}});if(e.indexOf("#")===0){hasher.setHash(e)}else{const i=u.last("/core/shell/enableRecentActivity")&&u.last("/core/shell/enableRecentActivityLogging");if(i){const i={title:t.getProperty("title"),appType:S.URL,url:e,appId:e};F.getRendererInternal("fiori2").logRecentActivity(i)}y.openURL(e,"_blank")}}},onTilePinButtonClick:function(e){const t=this.oLaunchPageService;const i=t.getDefaultGroup();i.done(i=>{const o=e.getSource();const r=o.getBindingContext();const a=this.getView().getModel();const n=a.getProperty("/groupContext/path");if(n){const e=()=>{if(a.getProperty(n).object){this._handleTileFooterClickInGroupContext(r,n);return}setTimeout(e,100)};e()}else{const e=a.getProperty("/groups");const n=this.getCatalogTileDataFromModel(r);const l=n.tileData.associatedGroups;const g=[];const c=e.map(e=>{const o=t.getGroupId(e.object);const s=!(l&&Array.prototype.indexOf.call(l,o)===-1);g.push({id:o,title:this._getGroupTitle(i,e.object),selected:s});return{selected:s,initiallySelected:s,oGroup:e}});let h;h=t.getCatalogTilePreviewTitle(a.getProperty(r.sPath).src);if(!h){h=t.getCatalogTileTitle(a.getProperty(r.sPath).src)}this.pPopoverView=s.create({id:"sapUshellGroupsPopover",viewName:"module:sap/ushell/components/appfinder/GroupListPopoverView",viewData:{title:h,enableHideGroups:a.getProperty("/enableHideGroups"),enableHelp:a.getProperty("/enableHelp"),sourceContext:r,catalogModel:this.getView().getModel(),catalogController:this}}).then(e=>{e.getController().initializeData({groupData:c});e.open(o).then(this._handlePopoverResponse.bind(this,r,n));this.getView().addDependent(e);return e})}})},_getGroupTitle:function(e,t){const i=this.oLaunchPageService;let o;if(e&&i.getGroupId(e)===i.getGroupId(t)){o=n.i18n.getText("my_group")}else{o=i.getGroupTitle(t)}return o},_handlePopoverResponse:function(e,t,i){if(!i.addToGroups.length&&!i.newGroups.length&&!i.removeFromGroups.length){return}const o=this.getView().getModel();const s=o.getProperty("/groups");const r=[];i.addToGroups.forEach(t=>{const i=s.indexOf(t);const a=new p(o,`/groups/${i}`);r.push(this._addTile(e,a))});i.removeFromGroups.forEach(t=>{const i=e.getModel().getProperty(e.getPath()).id;const o=s.indexOf(t);r.push(this._removeTile(i,o))});i.newGroups.forEach(t=>{const i=t.length>0?t:n.i18n.getText("new_group_name");r.push(this._createGroupAndSaveTile(e,i))});jQuery.when.apply(jQuery,r).then(function(){const e=Array.prototype.slice.call(arguments);this._handlePopoverGroupsActionPromises(t,i,e)}.bind(this))},_handlePopoverGroupsActionPromises:function(e,t,i){const o=i.filter(e=>!e.status);if(o.length){const t=this.prepareErrorMessage(o,e.tileData.title);T.resetAssociationOnFailure(t.messageId,t.parameters);return}const s=[];const r=this.oLaunchPageService;t.allGroups.forEach(e=>{if(e.selected){const t=r.getGroupId(e.oGroup.object);s.push(t)}});const a=this.getView().getModel();if(t.newGroups.length){const e=a.getProperty("/groups");const i=e.slice(e.length-t.newGroups.length);i.forEach(e=>{const t=r.getGroupId(e.object);s.push(t)})}a.setProperty(`${e.bindingContextPath}/associatedGroups`,s);let n=t.addToGroups[0]?t.addToGroups[0].title:"";if(n.length===0&&t.newGroups.length){n=t.newGroups[0]}const l=t.removeFromGroups[0]?t.removeFromGroups[0].title:"";const g=t.addToGroups.length+t.newGroups.length;const c=t.removeFromGroups.length;const h=this.prepareDetailedMessage(e.tileData.title,g,c,n,l);d.show(h)},_getCatalogTileIndexInModel:function(e){const t=e.sPath;const i=t.split("/");const o=i[i.length-1];return o},_handleTileFooterClickInGroupContext:function(e,t){const i=this.oLaunchPageService;const o=this.getView().getModel();const s=this.getCatalogTileDataFromModel(e);const r=s.tileData.associatedGroups;const a=o.getProperty(t);const n=i.getGroupId(a.object);const l=r?Array.prototype.indexOf.call(r,n):-1;const g=s.bindingContextPath;if(s.isBeingProcessed){return}o.setProperty(`${g}/isBeingProcessed`,true);let c;let h;if(l===-1){const i=new p(e.getModel(),t);c=this._addTile(e,i);h=true}else{const i=e.getModel().getProperty(e.getPath("id"));const o=parseInt(t.split("/")[2],10);c=this._removeTile(i,o);h=false}c.done(t=>{if(t.status){this._groupContextOperationSucceeded(e,s,a,h)}else{this._groupContextOperationFailed(s,a,h)}});c.always(()=>{o.setProperty(`${g}/isBeingProcessed`,false)})},_groupContextOperationSucceeded:function(e,t,i,o){const s=this.oLaunchPageService;const r=s.getGroupId(i.object);const a=t.tileData.associatedGroups;let n;if(o){a.push(r);e.getModel().setProperty(`${t.bindingContextPath}/associatedGroups`,a);n=this.prepareDetailedMessage(t.tileData.title,1,0,i.title,"")}else{for(let e=0;e<a.length;e++){if(a[e]===r){a.splice(e,1);break}}e.getModel().setProperty(`${t.bindingContextPath}/associatedGroups`,a);n=this.prepareDetailedMessage(t.tileData.title,0,1,"",i.title)}d.show(n)},_groupContextOperationFailed:function(e,t,i){let o;if(i){o={messageId:"fail_tile_operation_add_to_group",parameters:[e.tileData.title,t.title]}}else{o={messageId:"fail_tile_operation_remove_from_group",parameters:[e.tileData.title,t.title]}}T.notifyOnActionFailure(o.messageId,o.parameters)},prepareErrorMessage:function(e,t){let i;let o;let s;let r=0;let a=0;let n=false;for(const t in e){const s=e[t].group;const l=e[t].action;if(l==="add"){r++;if(r===1){i=s.title}}else if(l==="remove"){a++;if(a===1){o=s.title}}else if(l==="addTileToNewGroup"){r++;if(r===1){i=s.title}}else{n=true}}if(n){if(e.length===1){s={messageId:"fail_tile_operation_create_new_group"}}else{s={messageId:"fail_tile_operation_some_actions"}}}else if(e.length===1){if(r){s={messageId:"fail_tile_operation_add_to_group",parameters:[t,i]}}else{s={messageId:"fail_tile_operation_remove_from_group",parameters:[t,o]}}}else if(a===0){s={messageId:"fail_tile_operation_add_to_several_groups",parameters:[t]}}else if(r===0){s={messageId:"fail_tile_operation_remove_from_several_groups",parameters:[t]}}else{s={messageId:"fail_tile_operation_some_actions"}}return s},prepareDetailedMessage:function(e,t,i,o,s){let r;if(t===0){if(i===1){r=n.i18n.getText("tileRemovedFromSingleGroup",[e,s])}else if(i>1){r=n.i18n.getText("tileRemovedFromSeveralGroups",[e,i])}}else if(t===1){if(i===0){r=n.i18n.getText("tileAddedToSingleGroup",[e,o])}else if(i===1){r=n.i18n.getText("tileAddedToSingleGroupAndRemovedFromSingleGroup",[e,o,s])}else if(i>1){r=n.i18n.getText("tileAddedToSingleGroupAndRemovedFromSeveralGroups",[e,o,i])}}else if(t>1){if(i===0){r=n.i18n.getText("tileAddedToSeveralGroups",[e,t])}else if(i===1){r=n.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSingleGroup",[e,t,s])}else if(i>1){r=n.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSeveralGroups",[e,t,i])}}return r},getCatalogTileDataFromModel:function(e){const t=e.getPath();const i=e.getModel();const o=i.getProperty(t);return{tileData:o,bindingContextPath:t,isBeingProcessed:o.isBeingProcessed}},_addTile:function(e,t){const i=jQuery.Deferred();const o=T.createTile({catalogTileContext:e,groupContext:t});o.done(e=>{i.resolve(e)});return i},_removeTile:function(e,t){const i=jQuery.Deferred();const o=T.deleteCatalogTileFromGroup({tileId:e,groupIndex:t});o.done(e=>{i.resolve(e)});return i},_createGroupAndSaveTile:function(e,t){const i=jQuery.Deferred();const o=T.createGroupAndSaveTile({catalogTileContext:e,newGroupName:t});o.done(e=>{i.resolve(e)});return i},onExit:function(){f.destroy();i.getInstance().unsubscribe("launchpad","appFinderWithDocking",this._handleAppFinderWithDocking,this);i.getInstance().unsubscribe("launchpad","appFinderAfterNavigate",this._handleAppFinderAfterNavigate,this)}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/CatalogView", ["sap/m/BusyIndicator","sap/m/library","sap/m/List","sap/m/IllustratedMessage","sap/m/Page","sap/m/PageAccessibleLandmarkInfo","sap/m/SplitApp","sap/m/StandardListItem","sap/ui/core/Element","sap/ui/core/EventBus","sap/ui/core/mvc/View","sap/ui/core/library","sap/ui/Device","sap/ui/performance/Measurement","sap/ushell/components/appfinder/VisualizationOrganizerHelper","sap/ushell/ui/appfinder/AppBoxInternal","sap/ushell/ui/appfinder/PinButton","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/ui/launchpad/CatalogEntryContainer","sap/ushell/ui/launchpad/CatalogsContainer","sap/ushell/ui/launchpad/Tile","sap/ushell/resources"],(e,t,a,o,s,n,i,l,r,p,c,u,g,d,h,f,m,C,y,b,P,T)=>{"use strict";const S=t.ListSeparators;const B=t.ListMode;const I=u.AccessibleLandmarkRole;return c.extend("sap.ushell.components.appfinder.CatalogView",{oController:null,oVisualizationOrganizerHelper:h.getInstance(),formatPinButtonTooltip:function(e,t){let a;if(t.path){const o=e?Array.prototype.indexOf.call(e,t.id):-1;a=o!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup";return T.i18n.getText(a,[t.title])}a=e&&e.length?"EasyAccessMenu_PinButton_Toggled_Tooltip":"EasyAccessMenu_PinButton_UnToggled_Tooltip";return T.i18n.getText(a)},formatPinButtonSelectState:function(e,t,a,o){if(a){const t=e?Array.prototype.indexOf.call(e,o):-1;return t!==-1}return!!t},createContent:function(t){const c=this;this.oViewData=this.getViewData();this.parentComponent=this.oViewData.parentComponent;const u=this.parentComponent.getModel();this.setModel(u);this.setModel(this.oViewData.subHeaderModel,"subHeaderModel");this.oVisualizationOrganizerHelper.setModel(u);this.oController=t;function h(e){return e!==null&&(e==="1x2"||e==="2x2")||false}const A=new m({icon:{path:"id",formatter:this.oVisualizationOrganizerHelper.formatPinButtonIcon},type:{path:"id",formatter:this.oVisualizationOrganizerHelper.formatPinButtonType},selected:{parts:["associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id"],formatter:this.oVisualizationOrganizerHelper.formatPinButtonSelectState.bind(this)},tooltip:{parts:["associatedGroups","/groupContext","id"],formatter:this.oVisualizationOrganizerHelper.formatPinButtonTooltip.bind(this)},press:[this.oVisualizationOrganizerHelper.onTilePinButtonClick,this],visible:false});const w=new m({icon:{path:"id",formatter:this.oVisualizationOrganizerHelper.formatPinButtonIcon},type:{path:"id",formatter:this.oVisualizationOrganizerHelper.formatPinButtonType},selected:{parts:["associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id"],formatter:this.oVisualizationOrganizerHelper.formatPinButtonSelectState.bind(this)},tooltip:{parts:["associatedGroups","/groupContext","id"],formatter:this.oVisualizationOrganizerHelper.formatPinButtonTooltip.bind(this)},press:[this.oVisualizationOrganizerHelper.onTilePinButtonClick,this],visible:false});this.oAppBoxesTemplate=new f({title:"{title}",icon:"{icon}",subtitle:"{subtitle}",url:"{url}",navigationMode:"{navigationMode}",pinButton:w,contentProviderLabel:"{contentProviderLabel}",press:[t.onAppBoxPressed,t]});this.oVisualizationOrganizerHelper.shouldPinButtonBeVisible().then(e=>{w.setVisible(e);A.setVisible(e)});w.addCustomData(new C({key:"tabindex",value:"-1",writeToDom:true}));w.addStyleClass("sapUshellPinButton");A.addCustomData(new C({key:"tabindex",value:"-1",writeToDom:true}));A.addStyleClass("sapUshellPinButton");this.oTileTemplate=new P({tileViews:{path:"content",factory:function(e,t){return t.getObject()}},long:{path:"size",formatter:h},tileCatalogId:"{id}",tileCatalogIdStable:"{tileCatalogIdStable}",pinButton:A,press:[t.catalogTilePress,t],afterRendering:t.onTileAfterRendering});this.oCatalogSelect=new a("catalogSelect",{visible:"{/enableCatalogSelection}",rememberSelections:true,showSeparators:S.None,mode:B.SingleSelectMaster,items:{path:"/masterCatalogs",template:new l({type:"Active",title:"{title}"})},showNoData:false,itemPress:[t._handleCatalogListItemPress,t],selectionChange:[t._handleCatalogListItemPress,t]});this.getCatalogSelect=function(){return this.oCatalogSelect};const M=this.oCatalogSelect.onAfterRendering;if(g.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler","sap/ushell/renderer/AccessKeysHandler"],(e,t)=>{e.getInstance().then(e=>{this.oCatalogSelect.addEventDelegate({onsaptabnext:function(a){try{a.preventDefault();t.setIsFocusHandledByAnotherHandler(true);e.setFocusOnCatalogTile()}catch{}},onsapskipforward:function(a){try{a.preventDefault();t.setIsFocusHandledByAnotherHandler(true);e.setFocusOnCatalogTile()}catch{}},onsapskipback:function(a){try{a.preventDefault();t.setIsFocusHandledByAnotherHandler(true);const o=r.getElementById("openCloseButtonAppFinderSubheader");if(o.getVisible()){o.focus()}else{e.appFinderFocusMenuButtons(a)}}catch{}}})})})}if(u.getProperty("/enableHelp")){this.oCatalogSelect.addStyleClass("help-id-catalogCategorySelect")}this.setCategoryFilterSelection=function(e,t){const a=c.getCatalogSelect();const o=a.getItems();let s=e;let n=0;if(!s||s===""){s=T.i18n.getText("all")}o.forEach((e,t)=>{if(e.getTitle()===s){n=t;a.setSelectedItem(e)}});if(o.length!==0&&t){o[n].focus()}};this.oCatalogSelect.onAfterRendering=function(){const e=c.oController.categoryFilter||T.i18n.getText("all");c.setCategoryFilterSelection(e);if(M){M.apply(this,arguments)}if(!this.getSelectedItem()){this.setSelectedItem(this.getItems()[0])}setTimeout(()=>{const e=r.getElementById("appFinderSegmentedButtons");if(e){e.focus()}},0)};const D=this.oCatalogSelect._onAfterRenderingPopover;this.oCatalogSelect._onAfterRenderingPopover=function(){if(this._oPopover){this._oPopover.setFollowOf(false)}if(D){D.apply(this,arguments)}};const x=p.getInstance();let v;const H=function(){this.splitApp.toMaster("catalogSelect","show");if(!g.system.phone){v=this._calculateDetailPageId();if(v!==this.splitApp.getCurrentDetailPage().getId()){this.splitApp.toDetail(v)}}}.bind(this);x.subscribe("launchpad","catalogContentLoaded",()=>{setTimeout(H,500)},this);x.subscribe("launchpad","afterCatalogSegment",H,this);const z=new y({header:"{title}",customTilesContainer:{path:"customTiles",template:this.oTileTemplate,templateShareable:true},appBoxesContainer:{path:"appBoxes",template:this.oAppBoxesTemplate,templateShareable:true}});this.oIllustratedMessage=new o({visible:true,title:T.i18n.getText("EasyAccessMenu_NoAppsToDisplayMessagePage_Text"),description:" "}).addEventDelegate({onAfterRendering:function(){const e=this.oIllustratedMessage.getDomRef();if(e){const t=e.getElementsByClassName("sapMTitle");if(t.length){t[0].setAttribute("tabindex","0")}}}.bind(this),onBeforeRendering:function(){const e=this.oIllustratedMessage.getDomRef();if(e){const t=e.getElementsByClassName("sapMTitle");if(t.length){t[0].removeAttribute("tabindex")}}}.bind(this)});this.oCatalogsContainer=new b("catalogTiles",{categoryFilter:"{/categoryFilter}",catalogs:{path:"/catalogs",templateShareable:true,template:z},busy:true}).addStyleClass("sapUiTinyMarginTop");this.oCatalogsContainer.addStyleClass("sapUshellCatalogTileContainer");this.oCatalogsContainer.addEventDelegate({onsaptabprevious:function(e){const t=r.getElementById("openCloseButtonAppFinderSubheader");const a=e.srcControl.getDomRef();if(t.getVisible()&&!t.getPressed()&&!a.classList.contains("sapUshellPinButton")){e.preventDefault();const t=r.getElementById("appFinderSearch");t.focus()}},onsapskipback:function(e){const t=r.getElementById("openCloseButtonAppFinderSubheader");if(t.getVisible()&&!t.getPressed()){e.preventDefault();t.focus()}}});this.oCatalogsContainer.onAfterRendering=function(){const e=r.getElementById("catalogTilesDetailedPage");if(!this.getBusy()){e.setBusy(false);d.end("FLP:AppFinderLoadingStartToEnd")}else{e.setBusy(true)}document.getElementById("catalogTilesDetailedPage-cont").addEventListener("scroll",()=>{const e=r.getElementById("catalogTilesDetailedPage");const t=e.getScrollDelegate();const a=t.getScrollTop();const o=t.getMaxScrollTop();if(o-a<=30+3*c.oController.PagingManager.getTileHeight()&&c.oController.bIsInProcess===false){c.oController.bIsInProcess=true;c.oController.allocateNextPage();setTimeout(()=>{c.oController.bIsInProcess=false},0)}})};const V=new s("catalogTilesDetailedPage",{showHeader:false,showFooter:false,showNavButton:false,content:[this.oCatalogsContainer.addStyleClass("sapUshellCatalogPage")],landmarkInfo:new n({contentLabel:T.i18n.getText("appFinderCatalogTitle"),contentRole:I.None,rootRole:I.None})});const F=new s("catalogMessagePage",{showHeader:false,showFooter:false,showNavButton:false,content:[this.oIllustratedMessage]});const E=new e("catalogSelectBusyIndicator",{size:"1rem"});this.splitApp=new i("catalogViewMasterDetail",{masterPages:[E,this.oCatalogSelect],detailPages:[V,F],mode:"{= ${/isPhoneWidth} ? 'HideMode' : 'ShowHideMode'}"});return this.splitApp},_calculateDetailPageId:function(){const e=this.getModel("subHeaderModel");const t=e.getProperty("/search/searchMode");const a=e.getProperty("/tag/tagMode");const o=!!this.getModel().getProperty("/catalogsNoDataText");let s;if(t||a){s=this.getController().bSearchResults?"catalogTilesDetailedPage":"catalogMessagePage"}else if(o){s="catalogMessagePage"}else{s="catalogTilesDetailedPage"}return s},getControllerName:function(){return"sap.ushell.components.appfinder.Catalog"}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/Component", ["sap/ui/core/UIComponent","sap/ui/thirdparty/hasher","sap/ushell/components/CatalogsManager","sap/ushell/resources","sap/ushell/Config","sap/ushell/bootstrap/common/common.load.model","sap/ushell/components/SharedComponentUtils","sap/base/util/UriParameters","sap/ushell/Container"],(e,t,o,s,a,n,i,l,r)=>{"use strict";return e.extend("sap.ushell.components.appfinder.Component",{metadata:{interfaces:["sap.ui.core.IAsyncContentCreation"],manifest:"json",library:"sap.ushell"},init:function(){e.prototype.init.apply(this,arguments);this.oModel=n.getModel();this.setModel(this.oModel);const l=a.last("/core/shell/enablePersonalization");if(l){i.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings")}this.oCatalogsManager=new o("dashboardMgr",{model:this.oModel});this.setModel(s.i18nModel,"i18n");i.toggleUserActivityLog();const c=t.getHash();Promise.all([r.getServiceAsync("ShellNavigationInternal"),r.getServiceAsync("URLParsing")]).then(e=>{const t=e[0];const o=e[1];const s=o.parseShellHash(c);if(s&&s.semanticObject==="shell"&&s.action==="catalog"){const e=this.parseOldCatalogParams(c);const o=this.getManifestEntry("/sap.ui5/config");t.toExternal({target:{semanticObject:o.semanticObject,action:o.action}});this.getRouter().navTo("catalog",{filters:JSON.stringify(e)})}})},parseOldCatalogParams:function(e){const t=l.fromURL(e).mParams;const o=Object.create(null);for(const e in t){if(Object.prototype.hasOwnProperty.call(t,e)){const s=t[e][0];o[e]=s.includes("/")?encodeURIComponent(s):s}}return o},destroy:function(){return Promise.all([e.prototype.destroy.apply(this,arguments),this.oCatalogsManager&&this.oCatalogsManager.destroy()])}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/EasyAccess.controller", ["sap/base/i18n/Localization","sap/ui/core/Element","sap/ui/core/mvc/Controller","sap/ui/core/mvc/View","sap/base/Log","sap/ui/model/odata/ODataUtils","sap/ui/thirdparty/datajs","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ui/model/json/JSONModel","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/Config","sap/ushell/Container","sap/ushell/utils/LaunchpadError"],(e,t,s,r,i,a,o,jQuery,n,l,c,h,u,p)=>{"use strict";return s.extend("sap.ushell.components.appfinder.EasyAccess",{DEFAULT_URL:"/sap/opu/odata/UI2",DEFAULT_NUMBER_OF_LEVELS:3,SEARCH_RESULTS_PER_REQUEST:100,onInit:function(){const e=this;this.translationBundle=n.i18n;this.oView=this.getView();const t=this.oView.getModel("easyAccessSystemsModel");const s=t.bindProperty("/systemSelected");s.attachChange(e.adjustUiOnSystemChange.bind(this));this.menuName=this.oView.getViewData().menuName;this.systemId=null;this.easyAccessCache={};this.easyAccessModel=new l;this.easyAccessModel.setSizeLimit(1e3);Promise.all([this.oView.pHierarchyFolders,this.oView.pHierarchyApps]).then(e=>{e[0].setModel(this.easyAccessModel,"easyAccess");e[1].setModel(this.easyAccessModel,"easyAccess")});if(!h.last("/core/spaces/enabled")){sap.ui.require(["sap/ushell/components/HomepageManager"],e=>{const t=this.getView().getModel();if(!t.getProperty("/catalogs")){if(!t.getProperty("/groups")||t.getProperty("/groups").length===0){const t=e.prototype.getInstance();if(t){this.oHomepageManager=t;this.oHomepageManager.loadPersonalizedGroups()}else{i.error("The homepage manager was not initialized. Tiles in user and sap menu cannot be added to groups.")}}}})}const r=this.oView.getModel("subHeaderModel");const a=r.bindProperty("/openCloseSplitAppButtonToggled");a.attachChange(e.handleToggleButtonModelChanged.bind(this));if(this.oView.getViewData().enableSearch){const t=r.bindProperty("/search");t.attachChange(e.handleSearchModelChanged.bind(this))}this.checkIfSystemSelectedAndLoadData()},checkIfSystemSelectedAndLoadData:function(){const e=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(e){this.systemId=e.systemId;this.loadMenuItemsFirstTime(this.oView.getViewData().menuName,e)}},navigateHierarchy:function(e,t){Promise.all([this.oView.pHierarchyFolders,this.oView.pHierarchyApps]).then(s=>{const r=s[0];const i=s[1];r.setBusy(false);const a=this.easyAccessModel.getProperty(e||"/");if(typeof a.folders!=="undefined"){r.updatePageBindings(e,t);i.getController().updatePageBindings(e);return}r.setBusy(true);this.getMenuItems(this.menuName,this.systemId,a.id,a.level).then(function(e,s){this.easyAccessModel.setProperty(`${e}/folders`,s.folders);this.easyAccessModel.setProperty(`${e}/apps`,s.apps);r.updatePageBindings(e,t);i.getController().updatePageBindings(e);r.setBusy(false)}.bind(this,e)).catch(e=>{this.handleGetMenuItemsError(e)})})},handleSearch:function(e){const t=!this.pHierarchyAppsSearchResults;if(t){this.pHierarchyAppsSearchResults=r.create({id:`${this.getView().getId()}hierarchyAppsSearchResults`,viewName:"module:sap/ushell/components/appfinder/HierarchyAppsView",height:"100%",viewData:{easyAccessSystemsModel:this.oView.getModel("easyAccessSystemsModel"),getMoreSearchResults:this.getMoreSearchResults.bind(this),CatalogsManager:this.getView().getViewData().CatalogsManager}}).then(e=>{this.easyAccessSearchResultsModel=new l;this.easyAccessSearchResultsModel.setSizeLimit(1e4);e.setModel(this.easyAccessSearchResultsModel,"easyAccess");e.addStyleClass(" sapUshellAppsView sapMShellGlobalInnerBackground");e.addCustomData(new c({key:"role",value:"region",writeToDom:true}));e.addCustomData(new c({key:"aria-label",value:this.oView.oResourceBundle.getText("easyAccessTileContainer"),writeToDom:true}));return e})}this.pHierarchyAppsSearchResults.then(s=>{this.searchResultFrom=0;this.oView.splitApp.getCurrentDetailPage().setBusy(true);this.easyAccessSearchResultsModel.setProperty("/apps",[]);this.easyAccessSearchResultsModel.setProperty("/total",0);this._getSearchResults(e,this.searchResultFrom).then(e=>{u.getServiceAsync("BookmarkV2").then(r=>{e.results.forEach(e=>{r.countBookmarks(e.url).then(t=>{e.bookmarkCount=t})});this.easyAccessSearchResultsModel.setProperty("/apps",e.results);this.easyAccessSearchResultsModel.setProperty("/total",e.count);this.searchResultFrom=e.results.length;if(t){this.oView.splitApp.addDetailPage(s)}s.updateResultSetMessage(parseInt(e.count,10),true);this.oView.splitApp.getCurrentDetailPage().setBusy(false);if(this.oView.splitApp.getCurrentDetailPage()!==s){this.oView.splitApp.toDetail(`${this.getView().getId()}hierarchyAppsSearchResults`)}})}).catch(e=>{this.handleGetMenuItemsError(e);this.oView.splitApp.getCurrentDetailPage().setBusy(false)});return s})},getMoreSearchResults:function(){if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(true)}const e=this.oView.getModel("subHeaderModel");const t=e.getProperty("/search/searchTerm");this._getSearchResults(t,this.searchResultFrom).then(e=>{const t=this.easyAccessSearchResultsModel.getProperty("/apps");const s=t.slice();Array.prototype.push.apply(s,e.results);this.easyAccessSearchResultsModel.setProperty("/apps",s);if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(false)}this.searchResultFrom=s.length}).catch(e=>{this.handleGetMenuItemsError(e);if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(true)}})},_getSearchResults:function(e,t){const s=new jQuery.Deferred;const r=this._getODataRequestForSearchUrl(this.menuName,this.systemId,e,t);const i={requestUri:r};const a=this._callODataService(i,this.handleSuccessOnReadFilterResults);a.done(e=>{s.resolve(e)});a.fail(e=>{s.reject(e)});return s.promise()},getSystemNameOrId:function(){const e=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(e){return e.name||e.id}return undefined},adjustUiOnSystemChange:function(){const e=this.easyAccessModel.getData();if(this.systemId&&e&&e.id){this.easyAccessCache[this.systemId]=e}const t=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(t){this.systemId=t.systemId;const e=this.easyAccessCache[this.systemId];if(e){this.easyAccessModel.setData(e);this.navigateHierarchy("",false)}else{Promise.all([this.oView.pHierarchyFolders,this.oView.pHierarchyApps]).then(e=>{e[0].setBusy(true);e[1].setBusy(true)});this.loadMenuItemsFirstTime(this.menuName,t)}}},handleToggleButtonModelChanged:function(){const e=this.oView.getModel("subHeaderModel");const t=e.getProperty("/openCloseSplitAppButtonVisible");const s=e.getProperty("/openCloseSplitAppButtonToggled");const r=this.getView().splitApp;if(t){if(s&&!r.isMasterShown()){r.showMaster()}else if(r.isMasterShown()){r.hideMaster()}}},handleSearchModelChanged:function(){const e=this.oView.getModel("subHeaderModel");const s=e.getProperty("/activeMenu");if(this.getView().getId().indexOf(s)===-1){return}const r=e.getProperty("/search/searchTerm");const i=e.getProperty("/search/searchMode");if(i){t.getElementById("appFinderSearch").getCustomData()[0].setValue(`${this.getView().getId()}hierarchyAppsSearchResults`);if(r){this.handleSearch(r)}}else{t.getElementById("appFinderSearch").getCustomData()[0].setValue("");this.oView.splitApp.toDetail(`${this.getView().getId()}hierarchyApps`)}},loadMenuItemsFirstTime:function(e,t){return this.getMenuItems(e,t.systemId,"",0).then(e=>{e.text=t.systemName||t.systemId;this.easyAccessModel.setData(e);Promise.all([this.oView.pHierarchyFolders,this.oView.pHierarchyApps]).then(e=>{e[0].setBusy(false);e[1].setBusy(false)});this.navigateHierarchy("",false)}).catch(e=>{this.handleGetMenuItemsError(e);Promise.all([this.oView.pHierarchyFolders,this.oView.pHierarchyApps]).then(e=>{e[0].updatePageBindings("/",false);e[1].getController().updatePageBindings("/")})})},handleGetMenuItemsError:function(e){const t=this.getErrorMessage(e);sap.ui.require(["sap/m/MessageBox"],e=>{e.error(t)});this.easyAccessModel.setData("");this.oView.hierarchyFolders.setBusy(false);this.oView.hierarchyApps.setBusy(false)},_getErrorDetails:function(e){try{const t=JSON.parse(e.response.body);return t.error.message.value}catch(e){return null}},getErrorMessage:function(e){let t="";if(this.menuName==="SAP_MENU"){t=this.translationBundle.getText("easyAccessSapMenuNameParameter")}else if(this.menuName==="USER_MENU"){t=this.translationBundle.getText("easyAccessUserMenuNameParameter")}if(e){if(e.message){const s=this._getErrorDetails(e);if(s){return this.translationBundle.getText("easyAccessErrorGetDataErrorMsgWithDetails",[t,e.message,s])}return this.translationBundle.getText("easyAccessErrorGetDataErrorMsg",[t,e.message])}return this.translationBundle.getText("easyAccessErrorGetDataErrorMsg",[t,e])}return this.translationBundle.getText("easyAccessErrorGetDataErrorMsgNoReason",[t])},getMenuItems:function(e,t,s,r,i){const a=new jQuery.Deferred;if(e!=="SAP_MENU"&&e!=="USER_MENU"){a.reject(new Error("Invalid menuType parameter"));return a.promise()}if(typeof t!=="string"||t===""){a.reject(new Error("Invalid systemId parameter"));return a.promise()}if(typeof s!=="string"){a.reject(new Error("Invalid entityId parameter"));return a.promise()}if(typeof r!=="number"){a.reject(new Error("Invalid entityLevel parameter"));return a.promise()}if(i&&typeof i!=="number"){a.reject(new Error("Invalid numberOfNextLevels parameter"));return a.promise()}if(s===""){r=0}let o;const n=this.getView().getModel();const l=n.getProperty("/easyAccessNumbersOfLevels");if(l){o=l}else if(i){o=i}else{o=this.DEFAULT_NUMBER_OF_LEVELS}const c=r+o+1;const h=this._getODataRequestUrl(e,t,s,c);const u={requestUri:h};const p=this._callODataService(u,this.handleSuccessOnReadMenuItems,{systemId:t,entityId:s,iLevelFilter:c});p.done(e=>{a.resolve(e)});p.fail(e=>{a.reject(e)});return a.promise()},_callODataService:function(t,s,r){const i=new jQuery.Deferred;const a=u.getUser().getLanguage();if(a&&t.requestUri.indexOf("sap-language=")<0){t.requestUri+=`${t.requestUri.indexOf("?")>=0?"&":"?"}sap-language=${a}`}const n=u.getLogonSystem();const l=n&&n.getClient();o.read({requestUri:t.requestUri,headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","Accept-Language":e.getLanguage()||"","sap-client":l||"","sap-language":a||""}},(e,t)=>{if(e&&e.results&&t&&t.statusCode===200){const t=s.bind(this,e,r||{})();i.resolve(t)}},e=>{const t=new p(`Failed to fetch data: ${e.message}`,{dataJsError:e});i.reject(t)});return i.promise()},handleSuccessOnReadMenuItems:function(e,t){const s=this._oDataResultFormatter(e.results,t.systemId,t.entityId,t.iLevelFilter);return s},handleSuccessOnReadFilterResults:function(e){let t;e.results.forEach((e,s)=>{t=this._appendSystemToUrl(e,this.systemId);e.url=t});return{results:e.results,count:e.__count}},_appendSystemToUrl:function(e,t){if(e.url){return`${e.url+(e.url.indexOf("?")>0?"&":"?")}sap-system=${t}`}},_oDataResultFormatter:function(e,t,s,r){const i={};let a={};if(s===""){a={id:"root",text:"root",level:0,folders:[],apps:[]};i.root=a}else{a={id:s,folders:[],apps:[]};i[s]=a}let o;for(let s=0;s<e.length;s++){o=e[s];let a;if(o.level==="01"){a=i.root}else{a=i[o.parentId]}const n={id:o.Id,text:o.text,subtitle:o.subtitle,icon:o.icon,level:parseInt(o.level,10)};if(o.type==="FL"){n.folders=[];n.apps=[];if(o.level==r-1){n.folders=undefined;n.apps=undefined}if(a&&a.folders){a.folders.push(n)}i[o.Id]=n}else{n.url=this._appendSystemToUrl(o,t);if(a&&a.apps){a.apps.push(n)}}}return a},_getODataRequestUrl:function(e,t,s,r){let i=this._getServiceUrl(e);let a;if(r<10){a=`0${r}`}else{a=r.toString()}let o="";if(s){if(decodeURIComponent(s)===s){s=encodeURIComponent(s)}o=`('${s}')/AllChildren`}i=`${i};o=${t}/MenuItems${o}?$filter=level lt '${a}'&$orderby=level,text`;return i},_getODataRequestForSearchUrl:function(e,t,s,r){let i=this._getServiceUrl(e);const o=this.SEARCH_RESULTS_PER_REQUEST;s=this._removeWildCards(s);s=encodeURIComponent(s);r=!r?0:r;s=a.formatValue(s,"Edm.String");i=`${i};o=${t}/MenuItems?$filter=type ne 'FL' and (`+`substringof(${s}, text) or `+`substringof(${s}, subtitle) or `+`substringof(${s}, url)`+")"+`&$orderby=text,subtitle,url&$inlinecount=allpages&$skip=${r}&$top=${o}`;return i},_getServiceUrl:function(e){let t;const s=this.getView().getModel();if(e==="SAP_MENU"){const e=s.getProperty("/sapMenuServiceUrl");if(e){t=e}else{t=`${this.DEFAULT_URL}/EASY_ACCESS_MENU`}}else if(e==="USER_MENU"){const e=s.getProperty("/userMenuServiceUrl");if(e){t=e}else{t=`${this.DEFAULT_URL}/USER_MENU`}}return t},_removeWildCards:function(e){return e.replace(/\*/g,"")}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/EasyAccessView", ["sap/ui/core/mvc/View","sap/m/SplitApp","sap/ushell/resources"],(e,s,t)=>{"use strict";return e.extend("sap.ushell.components.appfinder.EasyAccessView",{createContent:function(a){this.oResourceBundle=t.i18n;this.setModel(this.getViewData().easyAccessSystemsModel,"easyAccessSystemsModel");this.setModel(this.getViewData().subHeaderModel,"subHeaderModel");this.setModel(this.getViewData().parentComponent.getModel());this.pHierarchyFolders=e.create({viewName:"module:sap/ushell/components/appfinder/HierarchyFoldersView",height:"100%",viewData:{navigateHierarchy:this.oController.navigateHierarchy.bind(a),easyAccessSystemsModel:this.getModel("easyAccessSystemsModel"),subHeaderModel:this.getModel("subHeaderModel")}}).then(e=>{this.hierarchyFolders=e;this.hierarchyFolders.addStyleClass("sapUshellHierarchyFolders");return e});const i=this.getViewData();this.pHierarchyApps=e.create({id:`${this.getId()}hierarchyApps`,viewName:"module:sap/ushell/components/appfinder/HierarchyAppsView",height:"100%",viewData:{navigateHierarchy:this.oController.navigateHierarchy.bind(a),menuName:i.menuName,CatalogsManager:this.getViewData().CatalogsManager}}).then(e=>{this.hierarchyApps=e;return e});this.splitApp=new s;Promise.all([this.pHierarchyFolders,this.pHierarchyApps]).then(e=>{this.splitApp.addMasterPage(e[0]);this.splitApp.addDetailPage(e[1]);this.splitApp.setInitialMaster(e[0]);this.splitApp.setInitialDetail(e[1])});return this.splitApp},getControllerName:function(){return"sap.ushell.components.appfinder.EasyAccess"}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/GroupListPopover.controller", ["sap/ui/core/Element","sap/ui/core/mvc/Controller","sap/m/library","sap/ushell/resources","sap/ui/Device","sap/ui/model/json/JSONModel"],(e,o,t,s,i,r)=>{"use strict";const n=t.ListMode;return o.extend("sap.ushell.components.appfinder.GroupListPopover",{onExit:function(){const e=this.getView();if(e._oListContainer){e._oListContainer.destroy()}if(e._oNewGroupItem){e._oNewGroupItem.destroy()}if(e._oNewGroupNameInput){e._oNewGroupNameInput.destroy()}if(e._oNewGroupHeader){e._oNewGroupHeader.destroy()}},initializeData:function(e){this.oPopoverModel=new r({userGroupList:e.groupData});this.oPopoverModel.setSizeLimit(9999);this.getView().oPopover.setModel(this.oPopoverModel)},_cancelButtonPress:function(){this.getView().oPopover.close()},_groupListItemClickHandler:function(e){const o=e.getParameter("listItem");if(o.data("newGroupItem")){this._navigateToCreateNewGroupPane();return}const t=e.getSource();if(t.getMode()===n.SingleSelectMaster){const e=this.getView();e.oPopover.close()}else{o.setSelected(!o.getSelected())}},_okayCancelButtonPress:function(){const e=this.getView();const o=e._getNewGroupInput();const t=o.getValue();if(t.length>0){this.sNewGroupId=t}e.oPopover.close()},_navigateToCreateNewGroupPane:function(){const e=this.getView();const o=e._getNewGroupHeader();const t=e._getNewGroupInput();e.oPopover.removeAllContent();e.oPopover.addContent(t);e.oPopover.setCustomHeader(o);e.oPopover.setContentHeight("");let i=e.oPopover.getEndButton();if(i){i.setVisible(true)}else{i=e._getCancelButton();e.oPopover.setEndButton(i)}e.oPopover.getBeginButton().setText(s.i18n.getText("okDialogBtn"));i.setText(s.i18n.getText("cancelBtn"));if(e.getViewData().singleGroupSelection){this._setFooterVisibility(true)}setTimeout(()=>{t.focus()},0)},_afterCloseHandler:function(){const e=this.oPopoverModel.getProperty("/userGroupList");const o={addToGroups:[],removeFromGroups:[],newGroups:this.sNewGroupId?[this.sNewGroupId]:[],allGroups:e};let t;for(let s=0,i=e.length;s<i;++s){t=e[s];if(t.selected===t.initiallySelected){continue}if(t.selected){o.addToGroups.push(t.oGroup)}else{o.removeFromGroups.push(t.oGroup)}}const s=this.getView();s.deferred.resolve(o);s.destroy()},_backButtonHandler:function(){const e=this.getView();e.oPopover.removeAllContent();if(e.getViewData().singleGroupSelection){this._setFooterVisibility(false)}if(!i.system.phone){e.oPopover.setContentHeight("192px")}else{e.oPopover.setContentHeight("100%")}e.oPopover.setVerticalScrolling(true);e.oPopover.setHorizontalScrolling(false);e.oPopover.addContent(e._getListContainer());e.oPopover.setTitle(s.i18n.getText("addTileToGroups_popoverTitle"));e.oPopover.setCustomHeader();e._getNewGroupInput().setValue("");e.oPopover.getEndButton().setVisible(false);e.oPopover.getBeginButton().setText(s.i18n.getText("close"))},_setFooterVisibility:function(o){const t=e.getElementById("groupsPopover-footer");if(t){t.setVisible(o)}}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/GroupListPopoverView", ["sap/ui/thirdparty/jquery","sap/ui/core/mvc/View","sap/m/ResponsivePopover","sap/ushell/resources","sap/m/ScrollContainer","sap/ui/Device","sap/m/StandardListItem","sap/m/List","sap/m/Input","sap/m/Button","sap/ui/core/IconPool","sap/m/Bar","sap/m/Label","sap/m/DisplayListItem","sap/m/library","sap/ui/model/Filter","sap/ui/model/FilterOperator"],(jQuery,t,e,o,n,i,s,r,u,p,a,l,c,h,d,_,g)=>{"use strict";const m=d.ListMode;const G=d.ListType;return t.extend("sap.ushell.components.appfinder.GroupListPopoverView",{getControllerName:function(){return"sap.ushell.components.appfinder.GroupListPopover"},createContent:function(t){this.oPopover=new e({id:"groupsPopover",placement:"Auto",title:o.i18n.getText("addTileToGroups_popoverTitle"),contentWidth:"20rem",beginButton:this._getCloseButton(),content:this._getListContainer(),afterClose:[t._afterCloseHandler,t]}).addStyleClass("sapContrastPlus");this.addDependent(this.oPopover);this.oPopover.setInitialFocus(this._getNewGroupListItem())},open:function(t){if(document.body.clientHeight-t.getDomRef().getBoundingClientRect().bottom>=310){this.oPopover.setPlacement("Bottom")}this.oPopover.openBy(t);if(this.getViewData().singleGroupSelection){this.getController()._setFooterVisibility(false)}this.deferred=jQuery.Deferred();return this.deferred.promise()},_getListContainer:function(){if(!this._oListContainer){const t=this._getGroupList();this._oListContainer=new n({id:"popoverContainer",horizontal:false,vertical:true,content:[t],height:i.system.phone?"100%":"190px"})}return this._oListContainer},_getNewGroupInput:function(){if(!this._oNewGroupNameInput){this._oNewGroupNameInput=new u("newGroupNameInput",{type:"Text",placeholder:o.i18n.getText("new_group_name")})}return this._oNewGroupNameInput},_getNewGroupHeader:function(){if(!this._oNewGroupHeader){const t=this.getController();const e=new p({icon:a.getIconURI("nav-back"),press:[t._backButtonHandler,t],tooltip:o.i18n.getText("newGroupGoBackBtn_tooltip")});e.addStyleClass("sapUshellCatalogNewGroupBackButton");this._oNewGroupHeader=new l("oHeadBar",{contentLeft:[e],contentMiddle:[new c({text:o.i18n.getText("newGroup_popoverTitle")})]})}return this._oNewGroupHeader},_getGroupList:function(){if(!this._oGroupList){const t=this.getController();const e=new h({label:"{oGroup/title}",selected:"{selected}",tooltip:"{oGroup/title}",type:G.Active});const o=[new _("oGroup/isGroupLocked",g.EQ,false)];const n=this.getViewData();if(n.enableHideGroups){o.push(new _("oGroup/isGroupVisible",g.EQ,true))}this._oGroupList=new r({mode:n.singleGroupSelection?m.SingleSelectMaster:m.MultiSelect,items:{path:"/userGroupList",template:e,filters:o,templateShareable:false},itemPress:[t._groupListItemClickHandler,t]});const i=this._getNewGroupListItem();this._oGroupList.addEventDelegate({onBeforeRendering:function(){this._oGroupList.insertAggregation("items",i,0,true)}.bind(this),onAfterRendering:function(){this._oGroupList.removeAggregation("items",i,true)}.bind(this)})}return this._oGroupList},_getNewGroupListItem:function(){if(!this._oNewGroupItem){this._oNewGroupItem=new s("newGroupItem",{title:o.i18n.getText("newGroup_listItemText"),type:G.Navigation});this._oNewGroupItem.data("newGroupItem",true);this._oNewGroupItem.getList=function(){return this._oGroupList}.bind(this);this._oNewGroupItem.getModeControl=function(){return null};this._oNewGroupItem.onsapspace=function(t){t.preventDefault();t.isMarked()};this._oNewGroupItem.addEventDelegate({onsaptabnext:function(t){t.preventDefault();t._bIsStopHandlers=true;this._getCloseButton().focus()}})}return this._oNewGroupItem},_getCancelButton:function(){if(!this._oCancelButton){const t=this.getController();this._oCancelButton=new p("cancelButton",{press:[t._cancelButtonPress,t],text:o.i18n.getText("cancelBtn")})}return this._oCancelButton},_getCloseButton:function(){if(!this._oCloseButton){const t=this.getController();this._oCloseButton=new p("closeButton",{press:[t._okayCancelButtonPress,t],text:o.i18n.getText("closeBtn")})}return this._oCloseButton}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/HierarchyApps.controller", ["sap/ui/core/mvc/View","sap/ui/core/mvc/Controller","sap/ui/thirdparty/jquery","sap/m/MessageToast","sap/ushell/resources","sap/ushell/Container"],(e,t,jQuery,o,s,r)=>{"use strict";let n;return t.extend("sap.ushell.components.appfinder.HierarchyApps",{onInit:function(){const e=this.getView().getViewData().easyAccessSystemsModel;if(e){this.getView().setModel(e,"easyAccessSystems")}n=this.getView().getViewData().CatalogsManager&&this.getView().getViewData().CatalogsManager.getInstance()},getCrumbsData:function(e,t){const o=e.split("/");o.splice(o.length-2,2);const s=[];while(o.length){const e=o.join("/");const r=t.getProperty(`${e}/text`);s.unshift({text:r,path:e});o.splice(o.length-2,2)}return s},_updateAppBoxedWithPinStatuses:function(e){const t=this.getView();if(!e){e=t.layout.getBinding("items").getPath()}const o=t.getModel("easyAccess");const s=o.getProperty(e)?o.getProperty(e):[];this.getView().oVisualizationOrganizerHelper.updateBookmarkCount.call(this,s).then(t=>{o.setProperty(e,t)})},updateBookmarkCount:function(e){return r.getServiceAsync("BookmarkV2").then(t=>{const o=e.map(e=>t.countBookmarks(e.url).then(t=>{e.bookmarkCount=t;return e}));return new Promise(e=>{jQuery.when.apply(jQuery,o).then(function(){const t=Array.prototype.slice.call(arguments);e(t)})})})},updatePageBindings:function(e){this.getView().layout.bindAggregation("items",`easyAccess>${e}/apps`,this.getView().oItemTemplate);this._updateAppBoxedWithPinStatuses(`${e}/apps`);this.getView().breadcrumbs.bindProperty("currentLocationText",`easyAccess>${e}/text`);const t=this.getCrumbsData(e,this.getView().getModel("easyAccess"));this.getView().crumbsModel.setProperty("/crumbs",t);const o=this.getView().getModel("easyAccess").getProperty(`${e}/apps`);this.getView().updateResultSetMessage(o.length,false)},onAppBoxPressed:function(e){if(e.mParameters.srcControl.$().closest(".sapUshellPinButton").length){return}const t=e.getSource().getProperty("url");if(t&&t.indexOf("#")===0){hasher.setHash(t)}},_handleSuccessMessage:function(e,t){let r;const n=t.addToGroups?t.addToGroups.length:0;const a=t.newGroups?t.newGroups.length:0;const i=n+a;if(i===1){let o;if(n===1){o=t.addToGroups[0].title}else{o=t.newGroups[0]}r=s.i18n.getText("appAddedToSingleGroup",[e.text,o])}else{r=s.i18n.getText("appAddedToSeveralGroups",[e.text,i])}if(i>0){o.show(r)}return r},_prepareErrorMessage:function(e,t){let o;let s;let r;let n=0;let a=false;let i;for(const t in e){o=e[t].group;s=e[t].action;if(s==="addBookmark_ToExistingGroup"){n++;if(n===1){r=o.title}}else if(s==="addBookmark_ToNewGroup"){n++;if(n===1){r=o}}else{a=true}}if(a){if(e.length===1){i={messageId:"fail_tile_operation_create_new_group"}}else{i={messageId:"fail_tile_operation_some_actions"}}}else if(e.length===1){i={messageId:"fail_app_operation_add_to_group",parameters:[t,r]}}else{i={messageId:"fail_app_operation_add_to_several_groups",parameters:[t]}}return i},_handleBookmarkAppPopoverResponse:function(e,t){const o=[];t.newGroups.forEach(t=>{o.push(this._createGroupAndAddBookmark(t,e))});t.addToGroups.forEach(t=>{o.push(this._addBookmark(t,e))});return jQuery.when.apply(jQuery,o).then(function(){const o=Array.prototype.slice.call(arguments);this._handlePopoverGroupsActionPromises(e,t,o)}.bind(this))},_handlePopoverGroupsActionPromises:function(e,t,o){const s=o.filter((e,t,o)=>!e.status);if(s.length){const t=this._prepareErrorMessage(s,e.text);n.notifyOnActionFailure(t.messageId,t.parameters);return}this._updateAppBoxedWithPinStatuses();this._handleSuccessMessage(e,t)},_createGroupAndAddBookmark:function(e,t){const o=jQuery.Deferred();let s={};const r=n.createGroup(e);r.done(r=>{const n=this._addBookmark(r.getObject(),t,true);n.done(e=>{o.resolve(e)}).fail(()=>{s={group:e,status:0,action:"addBookmark_ToNewGroup"};o.resolve(s)})}).fail(()=>{s={group:e,status:0,action:"addBookmark_NewGroupCreation"};o.resolve(s)});return o.promise()},_addBookmark:function(e,t,o){const s=jQuery.Deferred();let n={};r.getServiceAsync("BookmarkV2").then(r=>{const a=r.addBookmark({url:t.url,title:t.text,subtitle:t.subtitle,icon:t.icon},e.object);const i=o?"addBookmark_ToNewGroup":"addBookmark_ToExistingGroup";a.then(()=>{n={group:e,status:1,action:i};s.resolve(n)}).catch(()=>{n={group:e,status:0,action:i};s.resolve(n)})});return s.promise()},showSaveAppPopover:function(e){this.getView().oVisualizationOrganizerHelper.onHierarchyAppsPinButtonClick.call(this,e).then(e=>{if(e){this._updateAppBoxedWithPinStatuses()}})},showGroupListPopover:function(t){const o=this.getView().getModel();const s=t.oSource.getParent().getBinding("title").getContext().getObject();const r=t.oSource;if(o.getProperty("/groupContext").path){const e=o.getProperty("/groupContext").path;const t=o.getProperty(e);const r={newGroups:[],addToGroups:[t]};this._handleBookmarkAppPopoverResponse(s,r);return}const n=o.getProperty("/groups").map(e=>({selected:false,initiallySelected:false,oGroup:e}));e.create({viewName:"module:sap/ushell/components/appfinder/GroupListPopoverView",viewData:{enableHideGroups:o.getProperty("/enableHideGroups"),enableHelp:o.getProperty("/enableHelp"),singleGroupSelection:true}}).then(e=>{e.getController().initializeData({groupData:n});const t=e.open(r);t.then(this._handleBookmarkAppPopoverResponse.bind(this,s));this.getView().addDependent(e);return e})},resultTextFormatter:function(e,t){const o=s.i18n;if(e){const s=e.systemName?e.systemName:e.systemId;let r="";if(t){r=o.getText("search_easy_access_results",[t,s])}return r}return""},showMoreResultsVisibilityFormatter:function(e,t){if(e&&e.length<t){return true}return false},showMoreResultsTextFormatter:function(e,t){if(!e||!t){return""}const o=e.length;return s.i18n.getText("EasyAccessSearchResults_ShowMoreResults",[o,t])}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/HierarchyAppsView", ["sap/ui/core/library","sap/ui/core/mvc/View","sap/ushell/ui/appfinder/AppBoxInternal","sap/ushell/ui/appfinder/PinButton","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/FlexBox","sap/m/library","sap/m/Page","sap/m/PageAccessibleLandmarkInfo","sap/m/IllustratedMessage","sap/ui/model/json/JSONModel","sap/m/Link","sap/m/Breadcrumbs","sap/m/Text","sap/m/Title","sap/m/Button","sap/ushell/components/appfinder/VisualizationOrganizerHelper"],(e,t,s,a,o,i,n,r,l,p,u,c,h,m,d,g,y,f)=>{"use strict";const b=r.ButtonType;const T=r.FlexWrap;const x=e.TitleLevel;const A=e.AccessibleLandmarkRole;return t.extend("sap.ushell.components.appfinder.HierarchyAppsView",{oVisualizationOrganizerHelper:f.getInstance(),createContent:function(e){this.oController=e;const t=new a({icon:{path:"easyAccess>bookmarkCount",formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonIcon},type:{path:"easyAccess>bookmarkCount",formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonType},selected:{path:"easyAccess>bookmarkCount",formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonSelectState.bind(this)},tooltip:{parts:["associatedGroups","easyAccess>bookmarkCount","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonTooltip.bind(this)},press:e.showSaveAppPopover.bind(e)});t.addCustomData(new i({key:"tabindex",value:"-1",writeToDom:true}));t.addStyleClass("sapUshellPinButton");this.oItemTemplate=new s({title:"{easyAccess>text}",subtitle:"{easyAccess>subtitle}",url:"{easyAccess>url}",icon:"{easyAccess>icon}",pinButton:t,press:[e.onAppBoxPressed,e]});this.oItemTemplate.addCustomData(new i({key:"tabindex",value:"-1",writeToDom:true}));this.layout=new n(`${this.getId()}_hierarchyAppsLayout`,{items:{path:"easyAccess>/apps",template:this.oItemTemplate},wrap:T.Wrap});this.layout.addDelegate({onAfterRendering:function(){const e=this.getItems();function t(e){if(e.getKey()==="tabindex"){e.setValue("0")}}if(e.length){e[0].getCustomData().forEach(t);e[0].getPinButton().getCustomData().forEach(t)}}.bind(this.layout)});this.oMessagePage=new u({visible:false,title:o.i18n.getText("EasyAccessMenu_NoAppsToDisplayMessagePage_Text"),description:""});const r=this.getViewData();const d=r.menuName==="USER_MENU"?"appFinderUserMenuTitle":"appFinderSapMenuTitle";const f=new l({showHeader:false,landmarkInfo:new p({contentLabel:o.i18n.getText(d),contentRole:A.Region})}).addStyleClass("sapUshellAppsView sapUiContentPadding");if(r&&r.navigateHierarchy){this.crumbsModel=new c({crumbs:[]});this.linkTemplate=new h({text:"{crumbs>text}",press:function(e){const t=e.oSource.getBinding("text").getContext().getObject();r.navigateHierarchy(t.path,false)}});this.breadcrumbs=new m({links:{path:"crumbs>/crumbs",template:this.linkTemplate},currentLocationText:"{/text}"});this.breadcrumbs.setModel(this.crumbsModel,"crumbs");f.addContent(this.breadcrumbs)}else{this.resultText=new g({text:{parts:[{path:"easyAccessSystemsModel>/systemSelected"},{path:"easyAccess>/total"}],formatter:e.resultTextFormatter.bind(e)},level:x.H3}).addStyleClass("sapUiTinyMarginTop sapUiSmallMarginBottom sapUshellEasyAccessSearchResultText");f.addContent(this.resultText);this.showMoreResultsLink=new y({text:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:e.showMoreResultsTextFormatter.bind(e)},press:r.getMoreSearchResults,visible:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:e.showMoreResultsVisibilityFormatter.bind(e)},type:b.Transparent})}f.addContent(this.oMessagePage);f.addContent(this.layout);if(this.showMoreResultsLink){f.addContent(this.showMoreResultsLink)}return f},formatPinButtonTooltip:function(e,t,s,a,i){const n=o.i18n;let r;if(s){const t=e?Array.prototype.indexOf.call(e,a):-1;const s=t!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup";r=n.getText(s,[i])}else{r=t?n.getText("EasyAccessMenu_PinButton_Toggled_Tooltip"):n.getText("EasyAccessMenu_PinButton_UnToggled_Tooltip")}return r},updateResultSetMessage:function(e,t){let s;if(t){s="noFilteredItems"}else{s="EasyAccessMenu_NoAppsToDisplayMessagePage_Text"}if(e){if(t){this.resultText.updateProperty("text");this.resultText.setVisible(true)}this.layout.setVisible(true);this.oMessagePage.setVisible(false)}else{if(t){this.resultText.setVisible(false)}this.layout.setVisible(false);this.oMessagePage.setVisible(true);const e=o.i18n.getText(s);this.oMessagePage.setTitle(e)}},setShowMoreResultsBusy:function(e){if(this.showMoreResultsLink){this.showMoreResultsLink.setBusy(e)}},getControllerName:function(){return"sap.ushell.components.appfinder.HierarchyApps"}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/HierarchyFolders.controller", ["sap/ui/core/mvc/Controller","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/model/FilterOperator","sap/ui/model/Filter","sap/m/StandardListItem","sap/m/SelectDialog","sap/ui/core/Component","sap/ushell/Container"],(e,t,jQuery,s,i,r,n,o,a)=>{"use strict";return e.extend("sap.ushell.components.appfinder.HierarchyFolders",{onInit:function(){this.oDialog=null;this.getView().setModel(this.getView().getViewData().easyAccessSystemsModel,"easyAccessSystems");this.getView().setModel(this.getView().getViewData().subHeaderModel,"subHeaderModel");this.getSelectedSystem().then(e=>{if(e){this.setSystemSelected(e)}else{this.setSystemSelected(undefined);this.onSystemSelectionPress()}}).catch(()=>{this.setSystemSelected(undefined);this.onSystemSelectionPress()})},onExit:function(){if(this.oDialog){this.destroyDialog()}},onAfterRendering:function(){const e=jQuery(`#${this.getView().getId()}`);e.on("click",()=>{this.exitSearchMode()})},getPersonalizer:function(){if(!this.oPersonalizerPromise){this.oPersonalizerPromise=a.getServiceAsync("PersonalizationV2").then(e=>{const t=o.getOwnerComponentFor(this);const s={keyCategory:e.KeyCategory.FIXED_KEY,writeFrequency:e.WriteFrequency.LOW,clientStorageAllowed:true};const i={container:"appfinder.HierarchyFolders",item:"lastSelectedSystem"};return e.getPersonalizer(i,s,t)})}return this.oPersonalizerPromise},getSelectedSystem:function(){const e=new jQuery.Deferred;const t=this.getView().getModel("easyAccessSystems").getProperty("/systemsList");if(t&&t.length&&t.length===1){const s=t[0];this.setSystemSelectedInPersonalization(s);e.resolve(s)}else{this.getSelectedSystemInPersonalization().then(s=>{if(s){let i=false;for(let r=0;r<t.length;r++){if(t[r].systemName&&t[r].systemName===s.systemName||t[r].systemId===s.systemId){i=true;e.resolve(s)}}if(!i){e.resolve();this.setSystemSelectedInPersonalization()}}else{e.resolve()}})}return e.promise()},setSystemSelected:function(e){this.getView().getModel("easyAccessSystems").setProperty("/systemSelected",e);this.setSystemSelectedInPersonalization(e)},getSelectedSystemInPersonalization:function(){const e=new jQuery.Deferred;this.getPersonalizer().then(s=>{s.getPersData().then(t=>{if(t){e.resolve(t)}else{e.resolve()}}).catch(s=>{t.error("Failed to get selected system from the personalization",s,"sap.ushell.components.appfinder.HierarchyFolders");e.reject(s)})});return e.promise()},setSystemSelectedInPersonalization:function(e){this.getPersonalizer().then(s=>{s.setPersData(e).catch(e=>{t.error("Failed to save selected system in the personalization",e,"sap.ushell.components.appfinder.HierarchyFolders")})})},onSystemSelectionPress:function(){const e=this.getView().getModel("easyAccessSystems").getProperty("/systemsList");if(e&&e.length&&e.length<=1){return}const t=this.createDialog();t.open()},createDialog:function(){const e=this;if(!this.oDialog){this.oDialog=new n({id:"systemSelectionDialog",title:e.getView().translationBundle.getText("easyAccessSelectSystemDialogTitle"),multiSelect:false,contentHeight:"20rem",items:{path:"/systemsList",template:new r({adaptTitleSize:false,title:{parts:["systemName","systemId"],formatter:e.titleFormatter},description:{parts:["systemName","systemId"],formatter:e.descriptionFormatter},selected:{parts:["systemName","systemId"],formatter:e.selectedFormatter.bind(this)}})},confirm:e.systemConfirmHandler.bind(e),search:e.systemSearchHandler.bind(e),cancel:e.destroyDialog.bind(e)});this.oDialog.setModel(this.getView().getModel("easyAccessSystems"))}return this.oDialog},destroyDialog:function(){this.oDialog.destroyItems();this.oDialog.destroy();this.oDialog=null},systemConfirmHandler:function(e){const t=e.getParameters().selectedItem;const s=t.getBindingContext().getObject();this.setSystemSelected(s);this.destroyDialog()},systemSearchHandler:function(e){const t=e.getParameter("value");const r=new i("systemName",s.Contains,t);const n=new i("systemId",s.Contains,t);const o=new i({filters:[n,r],and:false});const a=e.getSource().getBinding("items");a.filter(o)},titleFormatter:function(e,t){return e||t},descriptionFormatter:function(e,t){if(e){return t}return null},selectedFormatter:function(e,t){const s=this.getView().getModel("easyAccessSystems").getProperty("/systemSelected");if(!s){return false}if(e){return s.systemName===e&&s.systemId===t}return s.systemId===t},systemSelectorTextFormatter:function(e){if(e){if(e.systemName){return e.systemName}return e.systemId}return this.getView().translationBundle.getText("easyAccessSelectSystemTextWithoutSystem")},exitSearchMode:function(){const e=this.getView().getModel("subHeaderModel");e.setProperty("/search/searchMode",false);e.refresh(true)}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/HierarchyFoldersView", ["sap/ui/core/Lib","sap/ui/core/mvc/View","sap/m/Button","sap/m/Label","sap/m/Bar","sap/m/Page","sap/m/library","sap/m/List","sap/m/StandardListItem","sap/m/Text","sap/ushell/resources"],(e,t,s,n,a,i,o,r,c,l,h)=>{"use strict";const d=o.ButtonType;const u=o.ListSeparators;return t.extend("sap.ushell.components.appfinder.HierarchyFoldersView",{createContent:function(t){const o=this;this.translationBundle=h.i18n;this.treePath="";this.lastFocusID=`${document.URL.substring(document.URL.lastIndexOf("&/")+2)}-button`;this.systemSelectorText=new l({text:{path:"easyAccessSystemsModel>/systemSelected",formatter:t.systemSelectorTextFormatter.bind(t)}});this.oItemTemplate=new c({title:"{easyAccess>text}",type:"Navigation",press:function(){const e=o.pageMenu.$().find(".sapMBarLeft button");if(!e.length){o.lastFocusID=document.activeElement.getAttribute("id")}const t=this.getBindingContextPath();o.getViewData().navigateHierarchy(t,true)}});this.oList=new r({showSeparators:u.None,items:{path:`easyAccess>${this.treePath}/folders`,template:this.oItemTemplate},updateFinished:function(){const e=this.getItems();o.finishEasyAccessAnimation(true);e.forEach(e=>{e.onsapspace=e.onsapenter})},noDataText:{path:"easyAccessSystemsModel>/systemSelected",formatter:function(e){if(e){return o.translationBundle.getText("easyAccessFolderWithNoItems")}}}});this._navBackButton=new s({tooltip:e.getResourceBundleFor("sap.m").getText("PAGE_NAVBUTTON_TEXT"),type:d.Back,visible:false,press:function(){const e=this.treePath.split("/");const t=e.slice(0,e.length-2);this.getViewData().navigateHierarchy(t.join("/"),false)}.bind(this)});this.pageMenu=new i({enableScrolling:true,headerContent:new a({contentLeft:[this._navBackButton,new n({text:{parts:["easyAccessSystemsModel>/systemSelected"],formatter:t.systemSelectorTextFormatter.bind(t)}})],contentRight:[new s({text:this.translationBundle.getText("easyAccessSelectSystemDialogTitle"),type:d.Transparent,visible:{path:"easyAccessSystemsModel>/systemsList",formatter:function(e){return e.length>1}},press:[t.onSystemSelectionPress,t]})]}).addStyleClass("sapUshellEasyAccessMasterPageHeader"),content:this.oList});return this.pageMenu},getControllerName:function(){return"sap.ushell.components.appfinder.HierarchyFolders"},finishEasyAccessAnimation:function(){if(!this.jqFolderClone){return}if(this.forwardAnimation){this.pageMenu.$().addClass("forwardToViewAnimation");this.jqFolderClone.addClass("forwardOutOfViewAnimation")}else{this.pageMenu.$().addClass("backToViewAnimation");this.jqFolderClone.addClass("backOutOfViewAnimation")}this.jqFolderClone.on("animationend",()=>{this.pageMenu.$().removeClass("forwardToViewAnimation backToViewAnimation");const e=this.pageMenu.$().find(".sapMBarLeft button");if(e.length){e.focus()}else{setTimeout(()=>{document.querySelector(`#${this.lastFocusID}`).focus()})}if(this.jqFolderClone){this.jqFolderClone.remove()}})},prepareEasyAccessAnimation:function(e){this.forwardAnimation=e;this.jqFolderClone=this.pageMenu.$().clone().removeAttr("data-sap-ui").css("z-index","1");this.jqFolderClone.find("*").removeAttr("id");this.pageMenu.$().parent().append(this.jqFolderClone)},updatePageBindings:function(e,t){const s=e.split("/").length>2;this.treePath=e;this._navBackButton.setVisible(s);this.pageMenu.setShowSubHeader(!s);this.prepareEasyAccessAnimation(t);this.oList.bindItems(`easyAccess>${e}/folders`,this.oItemTemplate)}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/VisualizationOrganizerHelper", ["sap/m/library","sap/ui/core/Element","sap/ushell/Config","sap/ushell/Container","sap/ushell/EventHub","sap/ushell/resources"],(t,e,n,i,o,r)=>{"use strict";const s=t.ButtonType;let u;function a(){return e.getElementById("catalogView")}function l(){return e.getElementById("appFinderView")}function f(){let t;let e;let u=null;function f(){return n.last("/core/spaces/enabled")}function c(){if(t){return Promise.resolve(t)}e=e||new Promise(e=>{sap.ui.require(["sap/ushell/components/visualizationOrganizer/Component"],n=>{t=new n;e(t)})});return e}function p(){const e=a();if(!e){return}e.setBusy(true);return c().then(t=>t.requestData()).then(()=>{if(this.oModel){this.oModel.updateBindings(true)}const e=l();if(e&&t.getPersonalizablePages().length===1){const n=r.i18n.getText("VisualizationOrganizer.PageContextTitle",[t.getPersonalizablePages()[0].title]);e.getController()._updateShellHeader(n)}}).finally(()=>{e.setBusy(false)})}if(f()){this.oDoable=o.on("trackHashChange").do(t=>{if(f()&&t==="Shell-appFinder"){p.call(this)}})}this.setModel=function(t){this.oModel=t};this.loadAndUpdate=function(){if(!f()){return Promise.resolve()}return p.call(this)};this.formatPinButtonTooltip=function(e,n,i){if(!f()){return this.formatPinButtonTooltip(e,n)}return t.formatPinButtonTooltip(i,u)};this.formatPinButtonSelectState=function(){if(!f()){return this.formatPinButtonSelectState.apply(this,arguments)}return false};this.formatPinButtonIcon=function(e){if(!f()){return"sap-icon://pushpin-off"}return t.formatPinButtonIcon(e,!!u)};this.formatPinButtonType=function(e){if(!f()){return s.Default}return t.formatPinButtonType(e,!!u)};this.onTilePinButtonClick=function(e){if(!f()){this.getController().onTilePinButtonClick(e);return}t.onTilePinButtonClick(e,u)};this.getNavigationContext=function(){if(!f()){return this.getGroupContext.apply(this,arguments)}if(u){return{pageID:encodeURIComponent(u.pageID),sectionID:encodeURIComponent(u.sectionID)}}return null};this.getNavigationContextAsText=function(){if(!f()){return this.getGroupNavigationContext.apply(this,arguments)}if(u){return JSON.stringify({pageID:encodeURIComponent(u.pageID),sectionID:encodeURIComponent(u.sectionID)})}return null};this.updateModelWithContext=function(e){if(!f()){this._updateModelWithGroupContext.apply(this,arguments);return Promise.resolve()}return c().then(()=>t.loadSectionContext(e)).then(t=>{u=t;this.oView.getModel().updateBindings(true);if(u){const t=u.sectionTitle?r.i18n.getText("VisualizationOrganizer.AppFinderSectionContextTitle",[u.sectionTitle]):r.i18n.getText("VisualizationOrganizer.AppFinderSectionContextTitle",[u.pageTitle]);this.oView.oPage.setTitle(t);if(this._updateShellHeader){return new Promise(e=>{setTimeout(()=>{this._updateShellHeader(t);e()},0)})}}return Promise.resolve()})};this._loadVisualizationOrganizer=c;this._setSectionContext=function(t){u=t};this.exit=function(){if(this.oDoable){this.oDoable.off();this.oDoable=null}};this.onHierarchyAppsPinButtonClick=function(e){if(!f()){this.showGroupListPopover(e);return Promise.resolve(false)}return t.onHierarchyAppsPinButtonClick(e,u)};this.formatBookmarkPinButtonTooltip=function(e,n,i,o,r){if(!f()){return this.formatPinButtonTooltip(e,n,i,o,r)}return t.formatBookmarkPinButtonTooltip(n,u)};this.formatBookmarkPinButtonSelectState=function(t){if(!f()){return!!t}return false};this.formatBookmarkPinButtonIcon=function(t){if(!f()){return"sap-icon://pushpin-off"}return t>0?"sap-icon://accept":"sap-icon://add"};this.formatBookmarkPinButtonType=function(t){if(!f()){return s.Default}return t>0?s.Emphasized:s.Default};this.updateBookmarkCount=function(e){if(!f()){return this.updateBookmarkCount(e)}return t.updateBookmarkCount(e,u)};this.shouldPinButtonBeVisible=function(){return new Promise(t=>{const e=n.last("/core/shell/enablePersonalization");if(!f()||e){t(e)}else if(!n.last("/core/spaces/myHome/enabled")){t(false)}else{i.getServiceAsync("UserInfo").then(e=>{t(e.getUser().getShowMyHome())})}})}}return{getInstance:function(){if(!u){u=new f}return u},_getConstructor:function(){return f},destroy:function(){if(u){u.exit()}u=null}}});
sap.ui.require.preload({
	"sap/ushell/components/appfinder/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ushell.components.appfinder","applicationVersion":{"version":"1.141.1"},"i18n":{"bundleUrl":"../../renderer/resources/resources.properties","fallbackLocale":"en"},"ach":"CA-FLP-FE-COR","type":"component","title":"{{Component.AppFinder.Title}}","resources":"resources.json"},"sap.ui":{"fullWidth":true,"hideLightBackground":true,"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"componentName":"sap.ushell.components.appfinder","rootView":{"viewName":"module:sap/ushell/components/appfinder/AppFinderView","async":true},"dependencies":{"minUI5Version":"1.30","libs":{"sap.ui.core":{},"sap.m":{}}},"routing":{"config":{"routerClass":"sap.m.routing.Router","controlId":"catalogViewMasterDetail","controlAggregation":"detailPages","clearAggregation":false,"async":true},"routes":[{"name":"userMenu","pattern":"userMenu/:filters:"},{"name":"sapMenu","pattern":"sapMenu/:filters:"},{"name":"catalog","pattern":["catalog/:filters:","",":filters:"]}]},"services":{"ShellUIService":{"factoryName":"sap.ushell.ui5service.ShellUIService"}},"contentDensities":{"compact":true,"cozy":true}}}'
});
//# sourceMappingURL=Component-preload.js.map
