// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/Element","sap/ui/core/mvc/Controller","sap/m/library","sap/ushell/resources","sap/ui/Device","sap/ui/model/json/JSONModel"],(e,o,t,s,i,r)=>{"use strict";const n=t.ListMode;return o.extend("sap.ushell.components.appfinder.GroupListPopover",{onExit:function(){const e=this.getView();if(e._oListContainer){e._oListContainer.destroy()}if(e._oNewGroupItem){e._oNewGroupItem.destroy()}if(e._oNewGroupNameInput){e._oNewGroupNameInput.destroy()}if(e._oNewGroupHeader){e._oNewGroupHeader.destroy()}},initializeData:function(e){this.oPopoverModel=new r({userGroupList:e.groupData});this.oPopoverModel.setSizeLimit(9999);this.getView().oPopover.setModel(this.oPopoverModel)},_cancelButtonPress:function(){this.getView().oPopover.close()},_groupListItemClickHandler:function(e){const o=e.getParameter("listItem");if(o.data("newGroupItem")){this._navigateToCreateNewGroupPane();return}const t=e.getSource();if(t.getMode()===n.SingleSelectMaster){const e=this.getView();e.oPopover.close()}else{o.setSelected(!o.getSelected())}},_okayCancelButtonPress:function(){const e=this.getView();const o=e._getNewGroupInput();const t=o.getValue();if(t.length>0){this.sNewGroupId=t}e.oPopover.close()},_navigateToCreateNewGroupPane:function(){const e=this.getView();const o=e._getNewGroupHeader();const t=e._getNewGroupInput();e.oPopover.removeAllContent();e.oPopover.addContent(t);e.oPopover.setCustomHeader(o);e.oPopover.setContentHeight("");let i=e.oPopover.getEndButton();if(i){i.setVisible(true)}else{i=e._getCancelButton();e.oPopover.setEndButton(i)}e.oPopover.getBeginButton().setText(s.i18n.getText("okDialogBtn"));i.setText(s.i18n.getText("cancelBtn"));if(e.getViewData().singleGroupSelection){this._setFooterVisibility(true)}setTimeout(()=>{t.focus()},0)},_afterCloseHandler:function(){const e=this.oPopoverModel.getProperty("/userGroupList");const o={addToGroups:[],removeFromGroups:[],newGroups:this.sNewGroupId?[this.sNewGroupId]:[],allGroups:e};let t;for(let s=0,i=e.length;s<i;++s){t=e[s];if(t.selected===t.initiallySelected){continue}if(t.selected){o.addToGroups.push(t.oGroup)}else{o.removeFromGroups.push(t.oGroup)}}const s=this.getView();s.deferred.resolve(o);s.destroy()},_backButtonHandler:function(){const e=this.getView();e.oPopover.removeAllContent();if(e.getViewData().singleGroupSelection){this._setFooterVisibility(false)}if(!i.system.phone){e.oPopover.setContentHeight("192px")}else{e.oPopover.setContentHeight("100%")}e.oPopover.setVerticalScrolling(true);e.oPopover.setHorizontalScrolling(false);e.oPopover.addContent(e._getListContainer());e.oPopover.setTitle(s.i18n.getText("addTileToGroups_popoverTitle"));e.oPopover.setCustomHeader();e._getNewGroupInput().setValue("");e.oPopover.getEndButton().setVisible(false);e.oPopover.getBeginButton().setText(s.i18n.getText("close"))},_setFooterVisibility:function(o){const t=e.getElementById("groupsPopover-footer");if(t){t.setVisible(o)}}})});
//# sourceMappingURL=GroupListPopover.controller.js.map