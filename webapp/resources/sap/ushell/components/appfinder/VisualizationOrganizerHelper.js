// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/m/library","sap/ui/core/Element","sap/ushell/Config","sap/ushell/Container","sap/ushell/EventHub","sap/ushell/resources"],(t,e,n,i,o,r)=>{"use strict";const s=t.ButtonType;let u;function a(){return e.getElementById("catalogView")}function l(){return e.getElementById("appFinderView")}function f(){let t;let e;let u=null;function f(){return n.last("/core/spaces/enabled")}function c(){if(t){return Promise.resolve(t)}e=e||new Promise(e=>{sap.ui.require(["sap/ushell/components/visualizationOrganizer/Component"],n=>{t=new n;e(t)})});return e}function p(){const e=a();if(!e){return}e.setBusy(true);return c().then(t=>t.requestData()).then(()=>{if(this.oModel){this.oModel.updateBindings(true)}const e=l();if(e&&t.getPersonalizablePages().length===1){const n=r.i18n.getText("VisualizationOrganizer.PageContextTitle",[t.getPersonalizablePages()[0].title]);e.getController()._updateShellHeader(n)}}).finally(()=>{e.setBusy(false)})}if(f()){this.oDoable=o.on("trackHashChange").do(t=>{if(f()&&t==="Shell-appFinder"){p.call(this)}})}this.setModel=function(t){this.oModel=t};this.loadAndUpdate=function(){if(!f()){return Promise.resolve()}return p.call(this)};this.formatPinButtonTooltip=function(e,n,i){if(!f()){return this.formatPinButtonTooltip(e,n)}return t.formatPinButtonTooltip(i,u)};this.formatPinButtonSelectState=function(){if(!f()){return this.formatPinButtonSelectState.apply(this,arguments)}return false};this.formatPinButtonIcon=function(e){if(!f()){return"sap-icon://pushpin-off"}return t.formatPinButtonIcon(e,!!u)};this.formatPinButtonType=function(e){if(!f()){return s.Default}return t.formatPinButtonType(e,!!u)};this.onTilePinButtonClick=function(e){if(!f()){this.getController().onTilePinButtonClick(e);return}t.onTilePinButtonClick(e,u)};this.getNavigationContext=function(){if(!f()){return this.getGroupContext.apply(this,arguments)}if(u){return{pageID:encodeURIComponent(u.pageID),sectionID:encodeURIComponent(u.sectionID)}}return null};this.getNavigationContextAsText=function(){if(!f()){return this.getGroupNavigationContext.apply(this,arguments)}if(u){return JSON.stringify({pageID:encodeURIComponent(u.pageID),sectionID:encodeURIComponent(u.sectionID)})}return null};this.updateModelWithContext=function(e){if(!f()){this._updateModelWithGroupContext.apply(this,arguments);return Promise.resolve()}return c().then(()=>t.loadSectionContext(e)).then(t=>{u=t;this.oView.getModel().updateBindings(true);if(u){const t=u.sectionTitle?r.i18n.getText("VisualizationOrganizer.AppFinderSectionContextTitle",[u.sectionTitle]):r.i18n.getText("VisualizationOrganizer.AppFinderSectionContextTitle",[u.pageTitle]);this.oView.oPage.setTitle(t);if(this._updateShellHeader){return new Promise(e=>{setTimeout(()=>{this._updateShellHeader(t);e()},0)})}}return Promise.resolve()})};this._loadVisualizationOrganizer=c;this._setSectionContext=function(t){u=t};this.exit=function(){if(this.oDoable){this.oDoable.off();this.oDoable=null}};this.onHierarchyAppsPinButtonClick=function(e){if(!f()){this.showGroupListPopover(e);return Promise.resolve(false)}return t.onHierarchyAppsPinButtonClick(e,u)};this.formatBookmarkPinButtonTooltip=function(e,n,i,o,r){if(!f()){return this.formatPinButtonTooltip(e,n,i,o,r)}return t.formatBookmarkPinButtonTooltip(n,u)};this.formatBookmarkPinButtonSelectState=function(t){if(!f()){return!!t}return false};this.formatBookmarkPinButtonIcon=function(t){if(!f()){return"sap-icon://pushpin-off"}return t>0?"sap-icon://accept":"sap-icon://add"};this.formatBookmarkPinButtonType=function(t){if(!f()){return s.Default}return t>0?s.Emphasized:s.Default};this.updateBookmarkCount=function(e){if(!f()){return this.updateBookmarkCount(e)}return t.updateBookmarkCount(e,u)};this.shouldPinButtonBeVisible=function(){return new Promise(t=>{const e=n.last("/core/shell/enablePersonalization");if(!f()||e){t(e)}else if(!n.last("/core/spaces/myHome/enabled")){t(false)}else{i.getServiceAsync("UserInfo").then(e=>{t(e.getUser().getShowMyHome())})}})}}return{getInstance:function(){if(!u){u=new f}return u},_getConstructor:function(){return f},destroy:function(){if(u){u.exit()}u=null}}});
//# sourceMappingURL=VisualizationOrganizerHelper.js.map