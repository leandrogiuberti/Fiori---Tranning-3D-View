// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/ui/core/Element","sap/ui/core/UIComponent","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/ushell/resources","sap/ushell/utils/WindowUtils","sap/ushell/ui/shell/ShellHeadItem","sap/ushell/Container","sap/ushell/EventHub"],(e,t,o,n,s,r,i,l,c,d,u)=>{"use strict";function a(){return t.getElementById("productSwitchBtn")}function h(){return t.getElementById("shell-header").getProductSwitchDomRef()}function p(){return t.getElementById("sapUshellProductSwitchPopover")}return o.extend("sap.ushell.components.shell.ProductSwitch.Component",{metadata:{version:"1.141.1",library:"sap.ushell.components.shell.ProductSwitch",dependencies:{libs:{"sap.m":{},"sap.f":{lazy:true}}}},createContent:function(){this.oModel=this._getModel()},_getModel:function(){const t=this;const o=new s;o.loadData(r.last("/core/productSwitch/url")).then(()=>{const n=o.getData();if(n.length===0){e.debug("There are no other profucts configured for your user. ProductSwitch button will be hidden.")}else{t._addProductSwitchButtonToHeader()}}).catch(t=>{e.debug("get ProductSwitch model failed: ",t)});return o},_openProductSwitch:function(){let e=p();let o=Promise.resolve();if(!e){o=new Promise((e,t)=>{sap.ui.require(["sap/ui/core/Fragment"],o=>{o.load({name:"sap.ushell.components.shell.ProductSwitch.ProductSwitch",type:"XML",controller:this}).then(e).catch(t)},t)}).then(t=>{e=t;e.setModel(this.oModel);e.setModel(i.i18nModel,"i18n");if(n.system.phone){e.setShowHeader(true)}})}o.then(()=>{let o;if(r.last("/core/shellBar/enabled")){o=h()}else{o=a();if(!o||!o.$().width()){o=t.getElementById("endItemsOverflowBtn")}}e.openBy(o)});return o},onProductItemPress:function(e){const t=e.getParameter("itemPressed").getTargetSrc();p().close();l.openURL(t,"_blank")},_addProductSwitchButtonToHeader:function(){const e=new c({id:"productSwitchBtn",icon:"sap-icon://grid",visible:true,text:i.i18n.getText("productSwitch"),ariaHaspopup:"dialog",press:function(){u.emit("showProducts",Date.now())}});d.getRendererInternal("fiori2").showHeaderEndItem([e.getId()],false);u.on("showProducts").do(this._openProductSwitch.bind(this))},exit:function(){const e=p();if(!e){e.destroy()}const t=a();if(t){t.destroy()}}})});
//# sourceMappingURL=Component.js.map