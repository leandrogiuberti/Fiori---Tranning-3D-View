// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/m/library","sap/m/VBox","sap/ui/core/ComponentContainer","sap/ui/core/Fragment","sap/ui/core/UIComponent","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/ushell/Container","sap/ushell/state/ShellModel","sap/ushell/EventHub"],(e,t,o,i,n,a,s,r,d,h,p)=>{"use strict";const g=e.FlexRendertype;const l=e.FlexAlignItems;return n.extend("sap.ushell.components.shell.SideNavigation.Component",{metadata:{manifest:"json",library:"sap.ushell",interfaces:["sap.ui.core.IAsyncContentCreation"]},init:function(){n.prototype.init.apply(this,arguments);this.sSideNavigationMode=r.last("/core/sideNavigation/mode");this._oSideNavigationComponentContainer=new o({id:this.createId("SideNavigationComponentContainer"),height:"100%",component:this});this._oDockedMainLayout=new t({id:this.createId("mainLayout"),renderType:g.Bare,alignItems:l.Start,height:"100%"});d.getRendererInternal().setSideNavigation(this._oDockedMainLayout);this._addHamburgerButton();const e=new s({selectedKey:"NONE",enableSideNavigation:true,expanded:true,renderMode:this.sSideNavigationMode});r.on("/core/sideNavigation/mode").do(this._handleRenderModeChange.bind(this));a.resize.attachHandler(this._handleRenderModeChange.bind(this));this.setModel(e,"viewConfiguration");this._handleRenderModeChange(true);this.setModel(h.getModel(),"shellModel")},_handleRenderModeChange:function(e){const t=this.getModel("viewConfiguration");let o=r.last("/core/sideNavigation/mode");if(a.media.getCurrentRange(a.media.RANGESETS.SAP_STANDARD).name!=="Desktop"){o="Popover";t.setProperty("/expanded",true)}e=e??this.sSideNavigationMode!==o;this.sSideNavigationMode=o;t.setProperty("/renderMode",o);if(e){this.rootControlLoaded().then(()=>{p.emit("sideNavigationModeChanged",o);if(o==="Docked"){this._oDockedMainLayout.addItem(this._oSideNavigationComponentContainer);this.popoverClose()}else{this._getPopover().then(e=>{e.addContent(this._oSideNavigationComponentContainer)})}})}},_addHamburgerButton:async function(){this.headerHamburgerButtonItemStart=await this._hamburgerButtonFactory();this.headerHamburgerButtonItemStart.showOnHome();this.headerHamburgerButtonItemStart.showForAllApps()},toggleSideNavigationExpansion:function(e){const t=this.getModel("viewConfiguration");if(e===undefined){e=!t.getProperty("/expanded")}t.setProperty("/expanded",!!e)},_getPopover:function(){if(!this._pPopover){this._pPopover=i.load({id:this.createId("sideNavigationPopover"),name:"sap.ushell.components.shell.SideNavigation.fragment.Popover"})}return this._pPopover},onSideNavigationTogglePress:async function(e){switch(this.sSideNavigationMode){case"Docked":this.toggleSideNavigationExpansion();this.rootControlLoaded().then(e=>{const t=e.byId("navContainer");if(t.getCurrentPage()!=="sideNavigation"){t.to(e.byId("sideNavigation"))}});break;case"Popover":const t=e.getSource();if(!this._pPopover){this._getPopover().then(e=>{e.addContent(this._oSideNavigationComponentContainer);this.getModel("viewConfiguration").setProperty("/popover",e);return e})}this._pPopover.then(e=>{if(e.isOpen()){e.close()}else{e.openBy(t)}});break;default:throw new Error(`Unhandled side navigation mode: ${this.sSideNavigationMode}`)}},popoverOpen:function(){this._pPopover?.then(async e=>{e.openBy(await this.headerHamburgerButtonItemStart.getControl())})},popoverClose:function(){this._pPopover?.then(e=>{e.close()})},_hamburgerButtonFactory:async function(){const e=await d.getServiceAsync("FrameBoundExtension");const t=await e.createHeaderItem({id:"sideMenuExpandCollapseBtn",ariaHaspopup:"dialog",icon:"sap-icon://menu2",press:this.onSideNavigationTogglePress.bind(this),tooltip:"{= ${viewConfiguration>/renderMode} === 'Popover' ? ${i18n>ShellBar.SideNavigation.Button.Open.Tooltip}"+" : (${viewConfiguration>/expanded} ? ${i18n>ShellBar.SideNavigation.Button.Collapse.Tooltip} : ${i18n>ShellBar.SideNavigation.Button.Expand.Tooltip})}"},{position:"begin"});const o=await t.getControl();o.setModel(this.getModel("i18n"),"i18n");o.setModel(this.getModel("viewConfiguration"),"viewConfiguration");return t},exit:function(){this._oSideNavigationComponentContainer?.setComponent(undefined);this._oSideNavigationComponentContainer?.destroy();this._oDockedMainLayout?.destroy()}})});
//# sourceMappingURL=Component.js.map