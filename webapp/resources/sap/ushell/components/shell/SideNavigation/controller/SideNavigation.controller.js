// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/ui/core/EventBus","sap/ui/core/mvc/Controller","sap/ushell/components/shell/SideNavigation/interface/ListProviderAPI","sap/ushell/Config","sap/ushell/Container","sap/ushell/EventHub","sap/ushell/utils"],(e,t,i,n,o,a,s,r)=>{"use strict";const h="NONE";return i.extend("sap.ushell.components.shell.SideNavigation.controller.SideNavigation",{_aDoables:[],onInit:function(){const e=o.on("/core/sideNavigation/navigationListProvider").do(e=>{this.pNavigationListProvider=this._initNavigationListProvider("/core/sideNavigation/navigationListProvider");this.selectIndexAfterRouteChange()});const i=o.on("/core/sideNavigation/fixedNavigationListProvider").do(e=>{this._initNavigationListProvider("/core/sideNavigation/fixedNavigationListProvider","fixedItem")});this._aDoables.push(e);this._aDoables.push(i);this.oContainerRouter=a.getRendererInternal().getRouter();this.oContainerRouter.getRoute("home").attachMatched(this.selectIndexAfterRouteChange,this);this.oContainerRouter.getRoute("openFLPPage").attachMatched(this.selectIndexAfterRouteChange,this);this.oContainerRouter.getRoute("openWorkPage").attachMatched(this.selectIndexAfterRouteChange,this);this.oEnableMenuBarNavigationListener=s.on("enableMenuBarNavigation").do(e=>this.onEnableSideNavigation(e));t.getInstance().subscribe("sap.ushell","appOpened",this.selectIndexAfterRouteChange,this)},_initNavigationListProvider:async function(e,t){const i=this.byId("sideNavigation");const a=this.byId("navContainer");const s=o.last(`${e}/modulePath`);const h=this.getOwnerComponent();if(s){let c;try{c=JSON.parse(o.last(`${e}/configuration`))}catch(e){c={}}const l=new n(c,a,i,h,this);const[d]=await r.requireAsync([s]);const g=new d(l);const u=await g.getRootItem();if(t==="fixedItem"){i.setFixedItem(u)}else{i.setItem(u)}return g}},onEnableSideNavigation:function(e){this.getView().getModel("viewConfiguration").setProperty("/enableSideNavigation",e)},selectIndexAfterRouteChange:async function(){const e=this.getOwnerComponent().getModel("viewConfiguration");const t=await this.pNavigationListProvider;const i=await t.findSelectedKey();setTimeout(()=>{if(i){e.setProperty("/selectedKey",i)}else{e.setProperty("/selectedKey",h);this.byId("sideNavigation").setSelectedItem(null)}},0)},onExit:function(){this.oEnableMenuBarNavigationListener.off();t.getInstance().unsubscribe("sap.ushell","appOpened",this.selectIndexAfterRouteChange,this);this._aDoables.forEach(e=>{e.off()});this._aDoables=[];const i=a.getRendererInternal().getRouter();if(!i){return}function n(e){const t=i.getRoute(e);if(t){t.detachMatched(this.selectIndexAfterRouteChange,this)}}try{n.call(this,"home");n.call(this,"openFLPPage");n.call(this,"openWorkPage")}catch(t){e.error("Error detaching route matched event listeners",t)}}})});
//# sourceMappingURL=SideNavigation.controller.js.map