// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ushell/components/SharedComponentUtils","sap/ushell/Config","sap/base/Log","sap/ushell/resources","sap/ushell/Container"],(e,t,s,i,n,o,r)=>{"use strict";return e.extend("sap.ushell.components.shell.Settings.userActivities.UserActivitiesSetting",{onInit:function(){const e=i.last("/core/shell/model/enableTrackingActivity")!==undefined?i.last("/core/shell/model/enableTrackingActivity"):true;this.oModel=new t({checkboxIsChecked:e});this.getView().setModel(this.oModel);this.getView().setModel(o.i18nModel,"i18n")},onCancel:function(){const e=i.last("/core/shell/model/enableTrackingActivity")!==undefined?i.last("/core/shell/model/enableTrackingActivity"):true;this.oModel.setProperty("/checkboxIsChecked",e)},onSave:function(){if(i.last("/core/shell/model/enableTrackingActivity")!==this.oModel.getProperty("/checkboxIsChecked")){return this._setTrackingToEnabled(this.oModel.getProperty("/checkboxIsChecked"))}return Promise.resolve()},_setTrackingToEnabled:function(e){return s.getPersonalizer("userActivitesTracking",r.getRendererInternal("fiori2")).then(t=>t.setPersData(e)).then(()=>{i.emit("/core/shell/model/enableTrackingActivity",e)}).catch(e=>{n.error("Failed to save the user activities tracking in personalization",e,"sap.ushell.components.ushell.settings.userActivities.UserActivitiesSetting");throw e})},onClearHistory:async function(){const e=await r.getServiceAsync("UserRecents");await e.clearRecentActivities();return new Promise((e,t)=>{sap.ui.require(["sap/m/MessageToast"],t=>{t.show(o.i18n.getText("historyCleared"));e()},t)})}})});
//# sourceMappingURL=UserActivitiesSetting.controller.js.map