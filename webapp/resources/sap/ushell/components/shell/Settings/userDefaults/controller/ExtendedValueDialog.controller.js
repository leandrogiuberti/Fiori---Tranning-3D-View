// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/m/Token","sap/ui/comp/library","sap/ui/model/json/JSONModel","sap/ui/core/Fragment"],(e,t,a,o)=>{"use strict";const n=t.valuehelpdialog.ValueHelpRangeOperation;function l(){}l.prototype.openDialog=function(e,t){o.load({id:"ExtendedValueDialogFragment",name:"sap.ushell.components.shell.Settings.userDefaults.view.ExtendedValueDialog",controller:this}).then(o=>{const n=`/${e.parameterName}/valueObject/extendedValue/Ranges`;const l=e.modelBind.extendedModel;const i=l.getProperty(n)||[];let r;let p;if(e.modelBind.isOdata){p=this._getMetadataNameSpace(e.editorMetadata.editorInfo.odataURL);const t=e.modelBind.model.getMetaModel().getODataEntityType(`${p}.${e.editorMetadata.editorInfo.entityName}`);if(t){r=e.modelBind.model.getMetaModel().getODataProperty(t,e.editorMetadata.editorInfo.propertyName)["sap:label"]}}const s={label:e.editorMetadata.displayText||r||e.parameterName,key:e.modelBind.sPropertyName,parameterName:e.parameterName};o.setModel(new a(s));o.setIncludeRangeOperations(this.getListOfSupportedRangeOperations());o.setTokens(this.getTokensToValueHelpDialog(i,e.parameterName));o.setRangeKeyFields([{label:s.label,key:e.parameterName}]);o.attachOk(e=>{t(e);e.getSource().close()});o.open()})};l.prototype.closeValueHelp=function(e){e.getSource().close(e)};l.prototype.afterCloseValueHelp=function(e){e.getSource().destroy()};l.prototype._getMetadataNameSpace=function(e){const t=e.split("/");return t[t.length-1]};l.prototype.getListOfSupportedRangeOperations=function(){const e=Object.keys(n);return e.filter(e=>e!=="StartsWith"&&e!=="EndsWith"&&e!=="Initial")};l.prototype.getTokensToValueHelpDialog=function(t,a){const o=[];let n;t.forEach(t=>{if(t){n={};n.exclude=t.Sign==="E";n.keyField=a;n.operation=t.Option!=="CP"?t.Option:"Contains";n.value1=t.Low;n.value2=t.High;o.push(new e({}).data("range",n))}});return o};return new l});
//# sourceMappingURL=ExtendedValueDialog.controller.js.map