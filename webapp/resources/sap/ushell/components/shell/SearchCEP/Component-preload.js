//@ui5-bundle sap/ushell/components/shell/SearchCEP/Component-preload.js
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/SearchCEP/Component", ["sap/base/Log","sap/m/SearchField","sap/ui/Device","sap/ui/core/Element","sap/ui/core/EventBus","sap/ui/core/IconPool","sap/ui/core/UIComponent","sap/ui/thirdparty/jquery","sap/ushell/Config","sap/ushell/Container","sap/ushell/components/shell/SearchCEP/SearchCEP.controller","sap/ushell/resources","sap/ushell/utils/UrlParsing"],(e,t,s,i,n,h,o,jQuery,r,a,l,c,S)=>{"use strict";return o.extend("sap.ushell.components.shell.SearchCEP.Component",{metadata:{version:"1.141.0",library:["sap.ushell","sap.ushell.components.shell"],dependencies:{libs:["sap.m"]}},createContent:function(){try{this.oRenderer=a.getRendererInternal("fiori2");this.oShellHeader=i.getElementById("shell-header");if(r.last("/core/shellBar/enabled")){this.oShellHeader.attachSearchButtonPress(this.onShellSearchButtonPressed.bind(this))}this.oRenderer.addHeaderEndItem({id:"sf",tooltip:"{i18n>openSearchBtn}",text:"{i18n>search}",ariaLabel:"{i18n>openSearchBtn}",icon:h.getIconURI("search"),visible:true,press:this.onShellSearchButtonPressed.bind(this)},true,false);this.oShellSearchBtn=i.getElementById("sf");this.oShellSearchBtn.data("help-id","shellHeader-search",true);this.oShellSearchBtn.addEventDelegate({onkeydown:this._keyDownSearchBtn.bind(this)});const e={width:"90%",placeholder:c.i18n.getText("search"),tooltip:c.i18n.getText("search"),enableSuggestions:true,suggest:this.onSuggest.bind(this),search:this.onSearch.bind(this)};this.oSF=new t("PlaceHolderSearchField",e);this.oSF.addStyleClass("sapUshellCEPSearchCenter");const s=this.getScreenSize();if(s==="S"){this.initSearchSSize()}else if(s==="M"||s==="L"){this.initSearchMLSizes()}else if(s==="XL"){this.initSearchXLSize()}this.oShellHeader.setSearch(this.oSF);this.oSearchCEPController=new l;this.oSF.addEventDelegate({onfocusin:this._onfocusin.bind(this),onAfterRendering:this._onAfterRendering.bind(this)});this.oSearchCEPController.getHomePageApps()}catch(t){e.info("Failed to create CEP search field content",t)}n.getInstance().publish("shell","searchCompLoaded",{delay:0})},initSearchSSize:function(){this.oSF.setWidth("60%");this.oShellHeader.setSearchState("COL",35,false)},initSearchMLSizes:function(){this.oShellHeader.setSearchState("COL",35,false)},initSearchXLSize:function(){this.oShellSearchBtn.setVisible(false);this.oShellHeader.setSearchState("EXP",35,false)},_onAfterRendering:function(e){const t=jQuery(this.oShellHeader.getDomRef()).find("#shell-header-hdr-search");t.addClass("CEPShellHeaderPadding");jQuery(this.oSF.getDomRef()).find("#PlaceHolderSearchField-search").attr("title",c.i18n.getText("search"));const s=a.getFLPUrl(true);const i=S.getHash(s);const n=i.split("&/")[0];if(this.oSF.getValue()){if(n==="Action-search"||n==="WorkZoneSearchResult-display"){jQuery(this.oSF.getDomRef()).blur()}}},_onfocusin:function(e){if(this.oSF.getEnableSuggestions()&&s.system.phone){jQuery(this.oSF.getDomRef()).find("input").attr("inputmode","search")}},onSuggest:function(e){if(this.oSF.getEnableSuggestions()&&s.system.phone){jQuery(this.oSF.getDomRef()).find("input").attr("inputmode","search")}if(i.getElementById("CEPSearchField")){this.oSearchCEPController.onSuggest(e)}else{this.oSearchCEPController.onInit()}},onSearch:function(e){if(i.getElementById("CEPSearchField")){this.oSearchCEPController.onSearch(e)}},exit:function(){this.oSearchCEPController.onExit()},expandSearch:function(){this.oShellHeader.setSearchState("EXP_S",35,false);this.oSF.focus()},onShellSearchButtonPressed:function(){this.oShellSearchBtn.setVisible(false);this.expandSearch()},collapseSearch:function(){this.oShellHeader.setSearchState("COL",35,false);this.oShellSearchBtn.setVisible(true)},getScreenSize:function(){const e=s.media.getCurrentRange(s.media.RANGESETS.SAP_STANDARD_EXTENDED);if(e.from>=1440){return"XL"}else if(e.from>=1024){return"L"}else if(e.from>=600){return"M"}else if(e.from>=0){return"S"}},_keyDownSearchBtn:function(e){if(e.code===13||e.code==="Enter"){setTimeout(()=>{this.oSF.focus()},500)}}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/SearchCEP/SearchCEP.controller", ["sap/base/i18n/Localization","sap/ui/core/Element","sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/core/Fragment","sap/m/List","sap/m/Text","sap/m/StandardListItem","sap/ushell/components/shell/SearchCEP/SearchProviders/SearchProvider","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ui/Device","sap/ushell/EventHub","sap/m/Avatar","sap/ushell/Container","sap/ushell/Config","sap/ui/thirdparty/hasher"],(e,t,s,i,o,n,r,a,l,jQuery,c,h,d,g,u,f,p)=>{"use strict";return s.extend("sap.ushell.components.shell.SearchCEP.SearchCEP",{onInit:function(){this._bIsMyHome=false;this._bEscPressed=false;this.bGrowingReset=false;this._bClosedOnItemPress=false;this._SearchCEPService=u.getServiceAsync("SearchCEP");this._SearchCEPService.then(e=>{this._registerDefaultProviders(e);this._listenToServiceEvents(e)});this._toggleSearchPopover(false);this._oPlaceHolderSF=t.getElementById("PlaceHolderSearchField");this._registerHandleHashChange();const e=u.getFLPPlatform(true);if(e==="MYHOME"){this._bIsMyHome=true}},onSuggest:function(e){if(this._bEscPressed||this._bClosedOnItemPress){return}this.oSF.focus();const t=e.getParameter("suggestValue");this._testProviders(t)},onfocusin:function(e){if(this.oSF.getEnableSuggestions()&&h.system.phone){jQuery(this.oSF.getDomRef()).find("input").attr("inputmode","search");jQuery(this._oPlaceHolderSF.getDomRef()).find("input").attr("inputmode","search")}},onSearch:function(e){let s=e.getParameter("query");const i=e.getParameter("escPressed");const o=e.getParameter("clearButtonPressed");const n=t.getElementById("SearchResultList");if(i){this._bEscPressed=i;if(this.oSF.getValue()||this._oPlaceHolderSF.getValue()){this.oSF.setValue("");this._oPlaceHolderSF.setValue("")}else{this._oPopover.close()}return}if(o){this.oSF.setValue("");this._oPlaceHolderSF.setValue("");this._testProviders();let e=true;const t=this._oPopover.getContent()[1].getItems();for(const s in t){if(t[s].getItems().length){e=false}}if(e){this._oPopover.close()}return}if(s){s=s.trim();this._oPlaceHolderSF.setValue(this.oSF.getValue());this._saveSearchTerm(s);if(this._bIsMyHome){if(n.getItems().length>0){const e=n.getItems()[0].getBindingContext("resultModel");const t=e.getObject();this._navigateToApp(t)}}else{this._navigateToResultPage(s)}this._oPopover.close()}},onBeforeOpen:function(){let e=false;const s=t.getElementById("shell-header");const i=s.getSearchState();if(i==="COL"){e=true}this._oPopover.addStyleClass("sapUshellCEPSearchFieldPopover");s.setSearchState("EXP",35,false);s.setSearchState("EXP_S",35,true);if(e===true){s.setSearchState("COL",35,false)}},onAfterOpen:function(){const e=document.getElementById("PlaceHolderSearchField").clientHeight;document.getElementById("CEPSearchField").style.height=`${e}px`;document.getElementById("CEPSearchField-search").title=c.i18n.getText("search")},onAfterClose:function(e){const s=t.getElementById("sf");const i=t.getElementById("shell-header");const o=this._getScreenSize();const n=this._oPopover.getContent()[1].getItems();this._oPlaceHolderSF.setValue(this.oSF.getValue());if(this._bClosedOnItemPress){this._bClosedOnItemPress=false}if(this._bEscPressed){this._bEscPressed=false;this._oPlaceHolderSF.focus()}if(o!=="XL"&&this.oSF.getValue()===""){i.setSearchState("COL",35,false);s.setVisible()}else{i.setSearchState("EXP",35,false);i.setSearchState("EXP_S",35,false)}n.forEach(t=>{const s=t._getProviderConfig();const i=this._getDefaultProviderGroupName(s.id);if(!i){if(typeof s.popoverClosed==="function"){const t=s.popoverClosed;t(e)}}})},getHomePageApps:function(){const e="homePageApplications";const t=l.getDefaultProviders()[e];t.execSearch("",e)},_registerHandleHashChange:function(){p.changed.add(e=>{if(e!==""&&!/WorkZoneSearchResult-display|Action-search/.test(e)){if(this._oPlaceHolderSF&&this._oPlaceHolderSF.getValue()!==""){this._oPlaceHolderSF.setValue("")}if(this.oSF&&this.oSF.getValue()!==""){this.oSF.setValue("")}}})},_listenToServiceEvents:function(e){d.on("updateExtProviderLists").do(this._updateExtProviderLists.bind(this,e))},_updateExtProviderLists:function(e){if(this._oPopover){const t=this._oPopover.getContent()[1];const s=t.getItems();const i=e.getExternalSearchProvidersPriorityArray();for(const e in s){const i=s[e];const o=i._getProviderConfig();const n=this._getDefaultProviderGroupName(o.id);if(!n){t.removeItem(i);i.destroy();this._oResultModel.setProperty(`/${o.name}`,[])}}if(!h.support.touch){this._sContentDensityClass="sapUiSizeCompact"}else{this._sContentDensityClass="sapUiSizeCozy"}i.then(e=>{for(const s in e){const i=this._createList(e[s],undefined);i.addStyleClass(this._sContentDensityClass);t.addItem(i)}if(this._oPopover.isOpen()){if(e.length){this._testProviders(this.oSF.getValue())}}})}},_registerDefaultProviders:function(e){for(const t in l.getDefaultProviders()){e.registerDefaultSearchProvider(l.getDefaultProviders()[t])}},_getScreenSize:function(){const e=h.media.getCurrentRange(h.media.RANGESETS.SAP_STANDARD_EXTENDED);if(e.from>=1440){return"XL"}else if(e.from>=1024){return"L"}else if(e.from>=600){return"M"}else if(e.from>=0){return"S"}},_focusNextList:function(e){const t=this._oPopover.getContent()[1].getItems();const s=t.map(e=>e.getId()).indexOf(e.getId());const i=t.slice(s+1);for(let e=0;e<i.length;e++){if(i[e].getVisible()&&i[e].getItems().length){const t=i[e].getItems()[0];const s=t.getParent();const o=s._getProviderConfig();t.focus();this._setListNameToAriaLabelledBy(t,o.title);break}}},_focusPreviousList:function(e){const s=this._oPopover.getContent()[1].getItems();const i=s.map(e=>e.getId()).indexOf(e.getId());const o=s.slice(0,i);if(!o.length){this.oSF.focus();return}for(let e=o.length-1;e>=0;e--){if(o[e].getVisible()&&o[e].getItems().length){const s=o[e].getItems();const i=document.getElementById(`${o[e].getId()}-triggerList`);const n=window.getComputedStyle(i);if(n.display==="none"){s[s.length-1].focus()}else{t.getElementById(`${o[e].getId()}-trigger`).focus()}break}if(e===0){this.oSF.focus()}}},_keyDownHandler:function(e){const t=e.srcControl;const s=t.getParent();const i=s.getItems();if(e.code===40||e.code==="ArrowDown"){if(i[i.length-1]===t){const e=document.getElementById(`${s.getId()}-triggerList`);const t=window.getComputedStyle(e);if(t.display==="none"){this._focusNextList(s)}}if(t.getId().endsWith("-trigger")){this._focusNextList(s)}}else if(e.code===38||e.code==="ArrowUp"){if(i[0]===t){this._focusPreviousList(s)}}},_setListNameToAriaLabelledBy:function(e,s){const i=e.getDomRef();const o=jQuery(i).attr("aria-labelledby");const n=t.getElementById(o).getProperty("text");jQuery(t.getElementById(o).getDomRef()).text(`${s}. ${n}`)},_getDefaultProviderGroupName:function(e){const t={SearchResultList:"applications",FrequentlyUsedAppsList:"frequentApplications",SearchHistoryList:"recentSearches",ProductsList:"homePageApplications",ExternalSearchAppsList:"externalSearchApplications"};return t[e]},_removeTopListDivider:function(){setTimeout(()=>{const e=jQuery(this._oPopover.getDomRef()).find(".searchCEPList.sapUshellCEPListDivider").not(":hidden");if(e.length){jQuery.each(e,t=>{if(jQuery(e[t]).hasClass("topCEPlist")){jQuery(e[t]).removeClass("topCEPlist")}});jQuery(e[0]).addClass("topCEPlist")}},300)},_createList:function(e,t){const s=new n({id:e.id,showSeparators:"None",headerText:e.titleVisible?e.title:"",headerLevel:"H1",growing:true,showNoData:e.showNoData||false,growingThreshold:e.defaultItemCount,growingScrollToLoad:false,items:{path:`resultModel>/${e.name}`,factory:this._createListItem.bind(this,e.name)},growingStarted:this._listUpdateStart.bind(this),updateStarted:this._listUpdateStart.bind(this),updateFinished:this._listUpdateFinished.bind(this),itemPress:this._itemPress.bind(this)}).addStyleClass("searchCEPList sapUshellCEPListDivider");s.setModel(t,"resultModel");s._providerConfig=e;s._getProviderConfig=function(){return this._providerConfig};s.addEventDelegate({onkeydown:this._keyDownHandler.bind(this),onsapdown:this._keyDownHandler.bind(this)});return s},_createListItem:function(e,t,s){const i={iconDensityAware:false,title:s.getProperty("text"),type:"Active"};const o=s.getProperty("icon");const n=this._getScreenSize();let r=s.getProperty("contentProviderLabel");const l=["SearchResultList","FrequentlyUsedAppsList"];const c=f.last("/core/contentProviders/providerInfo/enabled");const h=f.last("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations");if(c&&h&&l.includes(e)&&r!==undefined&&r!==""){r=r.toUpperCase();if(n==="S"){i.description=r}else{i.title+=` - ${r}`}}const d=new g("",{displaySize:"XS",backgroundColor:"Transparent",displayShape:"Square",src:o,imageFitType:"Contain",decorative:true});i.avatar=d;if(o.indexOf("sap-icon://")>-1){d.addStyleClass("searchCEPlistItemIcon")}const u=new a(i);if(n==="S"&&i.description!==undefined){u.addStyleClass("sapCEPSearchListItemMobileHeight")}u.addStyleClass("sapUiTinyMarginBeginEnd");return u},_itemPress:function(e){let t;const s=e.getParameter("srcControl");const i=s.getParent();const o=i._getProviderConfig();let n=this._getDefaultProviderGroupName(o.id);if(n){n=n.charAt(0).toUpperCase()+n.substring(1);t=`_on${n}Press`;this[t](e)}else{t=o.itemPress;t(e);const n=i.getItems().indexOf(s);const r=this._oResultModel.getProperty(`/${o.name}`);const a=r[n];if(a.hasOwnProperty("press")&&typeof a.press==="function"){t=a.press;t(e)}if(!a.hasOwnProperty("closePopover")&&o.closePopover===true||a.hasOwnProperty("closePopover")&&a.closePopover===true){this._bClosedOnItemPress=true;this._oPopover.close();jQuery(this.oSF.getDomRef()).find("input").blur();jQuery(this._oPlaceHolderSF.getDomRef()).find("input").blur()}}},_listUpdateStart:function(e){const t=e.getSource();const s=t._getProviderConfig();const i=e.getParameter("actual");const o=e.getParameter("reason");const n=this.bGrowingReset?s.maxItemCount:s.defaultItemCount;if(i&&i>0){if(o){switch(o.toLowerCase()){case"growing":this.bGrowingReset=true;const e=this._oResultModel.getProperty(`/${s.name}`);this._oResultModel.setProperty(`/${s.name}`,[]);this._oResultModel.setProperty(`/${s.name}`,e);t.setGrowingThreshold(s.maxItemCount);break;case"change":t.setGrowingThreshold(n);break;default:break}}else{t.setGrowingThreshold(n)}}},_listUpdateFinished:function(e){const t=e.getSource();const s=t._getProviderConfig();let i;if(this._getScreenSize()==="S"){i=t.$().find(".sapMSLITitle, .sapMSLIDescription")}else{i=t.$().find(".sapMSLITitleOnly")}jQuery.each(i,e=>{const o=i[e];if(o.scrollWidth>o.offsetWidth){o.parentNode.parentNode.title=o.innerText}if(s.id==="SearchResultList"){const e=t.getModel("resultModel").getProperty("/query");if(s.highlightResult&&s.highlightResult===true){const t=new RegExp(e,"gi");const i=o.innerHTML.replace(/<[^>]*>/g,"");const n=i.replace(t,e=>this._getBoldTitle(s,e));o.innerHTML=this._getHighlightedHtml(s,n)}}})},_getBoldTitle:function(e,t){if(e.highlightSearchStringPart&&e.highlightSearchStringPart===true){return`<b>${t}</b>`}return`</b>${t}<b>`},_getHighlightedHtml:function(e,t){if(!e.highlightSearchStringPart||e.highlightSearchStringPart!==true){return`<b>${t}</b>`}return t},_testProviders:function(e){if(!this._oResultModel){this._oResultModel=new i({});this._oPopover.setModel(this._oResultModel,"resultModel")}const t=this._oResultModel;const s=(e||"").trim().length;const o=this._oPopover.getContent()[1].getItems();t.setProperty("/query",e);if(!h.support.touch){this._sContentDensityClass="sapUiSizeCompact"}else{this._sContentDensityClass="sapUiSizeCozy"}for(const i in o){const n=o[i];const r=n._getProviderConfig();const a=this._getDefaultProviderGroupName(r.id);n.setVisible(false);if(s>=r.minQueryLength&&s<=r.maxQueryLength){r.execSearch(e,a).then(function(s,i,o){if(o&&Array.isArray(o)&&o.length>0){const e=this._oResultModel.getProperty("/query");if(e&&(e.length<i.minQueryLength||e.length>i.maxQueryLength)){return}if(!this._oPopover.isOpen()){this._toggleSearchPopover(true)}if(t.getProperty(`/${i.name}`)){this.bGrowingReset=false;t.setProperty(`/${i.name}`,[])}s.setVisible(true);const n=o.slice(0,i.maxItemCount);t.setProperty(`/${i.name}`,n);switch(s.getId()){case"SearchResultList":this._applyResultsAcc(n.length);break;default:break}this.oSF.focus()}else{t.setProperty(`/${i.name}`,[]);switch(s.getId()){case"SearchResultList":this._applyResultsAcc(0);const t=c.i18n.getText("no_apps_found",[e]);s.setNoDataText(t);s.setVisible(true);break;default:break}}}.bind(this,n,r))}}this._removeTopListDivider()},_applyResultsAcc:function(e){let t="";const s=this.oSF.$("SuggDescr");const i=s.text();if(e===1){t=c.i18n.getText("one_result_search_aria",[e])}else if(e>1){t=c.i18n.getText("multiple_results_search_aria",[e])}else{t=c.i18n.getText("no_results_search_aria")}if(i.indexOf(".")<0){t+="."}s.text(t)},_toggleSearchPopover:function(t){if(!this._oPopover){o.load({name:"sap.ushell.components.shell.SearchCEP.SearchField",type:"XML",controller:this}).then(t=>{this._oPopover=t;const s=this._getScreenSize();let i=document.getElementById("PlaceHolderSearchField").clientWidth;if(s==="S"){i=1.1*i}else{i=1.05*i}this._oPopover.setContentWidth(`${i}px`);if(e.getRTL()===true){const e=this._oPopover.getOffsetX();this._oPopover.setOffsetX(-1*e)}this._initializeSearchField();const o=new r({id:"popoverTitle",text:"List of search results and navigation suggestions"});o.addStyleClass("sapUiInvisibleText");this._oPopover.addContent(o);this._initLists().then(()=>{this._testProviders()})})}else if(t){this._oPopover.openBy(this._oPlaceHolderSF);if(this._oPlaceHolderSF.getValue()!==""){this.oSF.setValue(this._oPlaceHolderSF.getValue())}}},_initLists:function(){return this._SearchCEPService.then(e=>{const t=e.getSearchProvidersPriorityArray();const s=this._oPopover.getContent()[1];if(!h.support.touch){this._sContentDensityClass="sapUiSizeCompact"}else{this._sContentDensityClass="sapUiSizeCozy"}return t.then(e=>{for(let t=0;t<e.length;t++){const i=this._createList(e[t],this._oResultModel);i.addStyleClass(this._sContentDensityClass);s.addItem(i)}})})},_keyDownSearchField:function(e){if(e.code===40||e.code==="ArrowDown"){this.oSF.focus();const e=this._oPopover.getContent()[1].getItems();for(const t in e){if(e[t].getVisible()&&e[t].getItems().length>0){const s=e[t].getItems()[0];const i=s.getParent();const o=i._getProviderConfig();s.focus();this._setListNameToAriaLabelledBy(s,o.title);break}}}else if(e.code===116||e.code==="F5"){window.location.reload()}else if(e.code===9||e.code==="Tab"){let s;if(e.shiftKey){s=this._oPlaceHolderSF.oParent.getDomRef().firstChild.lastChild.firstChild}else{const e=this._oPlaceHolderSF.oParent.getDomRef().lastChild;const t=e.childNodes;for(const e in t){if(getComputedStyle(t[e]).display!=="none"){s=t[e];break}}}setTimeout(()=>{if(this._getScreenSize()==="S"||this._getScreenSize()==="M"){t.getElementById("shell-header").setSearchState("COL",35,false);t.getElementById("sf").setVisible(true)}if(s){s.focus()}},0)}else if(e.code===27||e.code==="Escape"){this.oSF.setValue("");this._oPlaceHolderSF.setValue("");this._bEscPressed=true}},_initializeSearchField:function(){this.oSF=t.getElementById("CEPSearchField");const e=document.getElementById("PlaceHolderSearchField").clientWidth;this.oSF.setWidth(`${e}px`);this.oSF.addEventDelegate({onkeydown:this._keyDownSearchField.bind(this),onfocusin:this.onfocusin.bind(this)})},_saveSearchTerm:function(e){if(e){u.getServiceAsync("UserRecents").then(t=>{t.addSearchActivity({sTerm:e})})}},_onRecentSearchesPress:function(e){const t=e.getParameter("listItem").getProperty("title");this.oSF.setValue(t);setTimeout(()=>{this._testProviders(t)})},_onApplicationsPress:function(e){const t=this.oSF.getValue();const s=e.getParameter("listItem").getBindingContext("resultModel");const i=s.getObject();this._saveSearchTerm(t);this._navigateToApp(i)},_onHomePageApplicationsPress:function(e){const t=this.oSF.getValue();const s=e.getParameter("listItem").getBindingContext("resultModel");const i=s.getObject();this._saveSearchTerm(t);this._navigateToApp(i)},_onExternalSearchApplicationsPress:function(e){const t=this.oSF.getValue();const s=e.getParameter("listItem").getBindingContext("resultModel");const i=s.getObject();this._saveSearchTerm(t);if(i&&i.isEnterpriseSearch===true){this._navigateToResultPage(t,true)}else{this._navigateToApp(i,t)}},_onFrequentApplicationsPress:function(e){const t=e.getParameter("listItem").getBindingContext("resultModel");const s=t.getObject();this._navigateToApp(s);if(this._oPopover.isOpen()){this._oPopover.close()}},_navigateToApp:function(e,t){this._SearchCEPService.then(s=>{s.navigate(e,t)});if(this.oSF.getValue()!==""){this.oSF.setValue("")}setTimeout(()=>{if(this._oPopover.isOpen()){this._oPopover.close()}},500)},_navigateToResultPage:function(e,t){if(e===""){return}let s=`#WorkZoneSearchResult-display?searchTerm=${e}&category=app`;if(t===true){s=`#Action-search&/top=20&filter={"dataSource":{"type":"Category","id":"All","label":"All","labelPlural":"All"},"searchTerm":"${e}","rootCondition":{"type":"Complex","operator":"And","conditions":[]}}`}const i=u.getServiceAsync("Navigation");i.then(e=>{e.navigate({target:{shellHash:s}})})}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/SearchCEP/SearchProviders/FrequentActivityProvider", ["sap/base/Log","sap/ushell/Container"],(e,t)=>{"use strict";function r(){}r.prototype.getName=function(){return"Frequent Activity Provider"};r.prototype.execSearch=function(r,n){return t.getServiceAsync("UserRecents").then(t=>t.getFrequentActivity().then(e=>{let t=[];const r={frequentApplications:{Application:{icon:"sap-icon://SAP-icons-TNT/application"},"External Link":{icon:"sap-icon://internet-browser"}},frequentProducts:{Product:{icon:"sap-icon://product"}}};if(e&&Array.isArray(e)&&e.length>0){t=e.filter(e=>r[n].hasOwnProperty(e.appType)).map(e=>{e.text=e.text||e.title;e.icon=e.icon||r[n][e.appType].icon;return e})}return t}).catch(t=>{e.error("Frequent Activity Provider failed",t,"sap.ushell.components.shell.SearchCEP.SearchProviders.FrequentActivityProvider::execSearch");return[]}))};return new r},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/SearchCEP/SearchProviders/RecentSearchProvider", ["sap/base/Log","sap/ushell/Container"],(e,r)=>{"use strict";function t(){}t.prototype.getName=function(){return"Recent Search Terms Provider"};t.prototype.execSearch=function(){return r.getServiceAsync("UserRecents").then(r=>r.getRecentSearches().then(e=>{let r=[];if(Array.isArray(e)&&e.length>0){r=e.map(e=>({text:e.sTerm,icon:e.icon||"sap-icon://history"}))}return r}).catch(r=>{e.error("Recent Search Terms Provider failed",r,"sap.ushell.components.shell.SearchCEP.SearchProviders.RecentSearchProvider::execSearch");return[]}))};return new t},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/SearchCEP/SearchProviders/SearchProvider", ["sap/ushell/resources","sap/ushell/components/shell/SearchCEP/SearchProviders/FrequentActivityProvider","sap/ushell/components/shell/SearchCEP/SearchProviders/RecentSearchProvider","sap/ushell/components/shell/SearchCEP/SearchProviders/SearchServiceProvider"],(e,t,r,i)=>{"use strict";const a={_defaultProviders:null};a.getDefaultProviders=function(){if(!this._defaultProviders){this._defaultProviders=this._createDefaultProviders()}return this._defaultProviders};a._createDefaultProviders=function(){return{applications:{id:"SearchResultList",entryType:"app",title:"Applications",showNoData:true,titleVisible:false,highlightResult:true,highlightSearchStringPart:true,minQueryLength:1,maxQueryLength:100,defaultItemCount:6,maxItemCount:12,priority:0,execSearch:i.execSearch},frequentApplications:{id:"FrequentlyUsedAppsList",entryType:"product",title:e.i18n.getText("frequentAppsCEPSearch"),titleVisible:true,minQueryLength:0,maxQueryLength:0,defaultItemCount:6,maxItemCount:12,priority:1,execSearch:t.execSearch},recentSearches:{id:"SearchHistoryList",entryType:"app",title:"Recent Searches",titleVisible:false,minQueryLength:0,maxQueryLength:0,defaultItemCount:2,maxItemCount:10,priority:0,execSearch:r.execSearch},homePageApplications:{id:"ProductsList",entryType:"app",title:e.i18n.getText("products"),titleVisible:true,minQueryLength:0,maxQueryLength:0,defaultItemCount:6,maxItemCount:12,priority:2,execSearch:i.execSearch},externalSearchApplications:{id:"ExternalSearchAppsList",entryType:"app",title:e.i18n.getText("searchWithin"),titleVisible:true,minQueryLength:1,maxQueryLength:100,defaultItemCount:6,maxItemCount:12,priority:2,execSearch:i.execSearch}}};return a},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/SearchCEP/SearchProviders/SearchServiceProvider", ["sap/base/Log","sap/ushell/resources","sap/base/util/ObjectPath","sap/ushell/Container"],(e,t,r,a)=>{"use strict";function i(){}i.prototype.getName=function(){return"Search Service Provider"};function c(e,r){const i=`#Action-search&/top=20&filter={"dataSource":{"type":"Category","id":"All","label":"All","labelPlural":"All"},"searchTerm":"${r}","rootCondition":{"type":"Complex","operator":"And","conditions":[]}}`;const c=a.getFLPUrl()+i;const n={text:t.i18n.getText("enterprise_search"),description:t.i18n.getText("enterprise_search"),icon:"sap-icon://search",inboundIdentifier:"38cd162a-e185-448c-9c37-a4fc02b3d39d___GenericDefaultSemantic-__GenericDefaultAction",url:c,target:"_blank",recent:false,semanticObject:"Action",semanticObjectAction:"search",_type:"app",isEnterpriseSearch:true};e.push(n)}i.prototype.execSearch=function(t,i){const n={top:12,skip:0,sort:{path:"title",descending:false}};switch(i){case"homePageApplications":n.searchTerm="";n.filter={path:"technicalAttributes",operator:"Contains",value1:"APPTYPE_HOMEPAGE"};n.includeAppsWithoutVisualizations=true;break;case"applications":n.searchTerm=t;n.filter={filters:[{path:"technicalAttributes",operator:"NotContains",value1:"APPTYPE_SEARCHAPP"},{path:"technicalAttributes",operator:"NotContains",value1:"APPTYPE_HOMEPAGE"}],and:true};break;case"externalSearchApplications":n.searchTerm="";n.filter={path:"technicalAttributes",operator:"Contains",value1:"APPTYPE_SEARCHAPP"};n.includeAppsWithoutVisualizations=true;break;default:break}return a.getServiceAsync("SearchCEP").then(e=>e.suggest(n).then(e=>{const n=r.get("sap-ushell-config.services.SearchCEP")!==undefined;const s=a.getFLPPlatform(true);const o=n===true&&s==="cFLP";let l=[];const p=r.get("sap-ushell-config.renderers.fiori2.componentData.config.searchBusinessObjects");const u={applications:"sap-icon://SAP-icons-TNT/application",homePageApplications:"sap-icon://SAP-icons-TNT/product",externalSearchApplications:"sap-icon://world"};if(e){l=e.data.map(e=>{e.text=e.text||e.label||e.title;e.icon=e.icon||u[i];return e})}if(p===true&&o===true&&i==="externalSearchApplications"){c(l,t)}return l})).catch(t=>{e.error("Search service Provider failed",t,"sap.ushell.components.shell.SearchCEP.SearchProviders.SearchServiceProvider::execSearch");return[]})};return new i},false);
sap.ui.require.preload({
	"sap/ushell/components/shell/SearchCEP/SearchField.fragment.xml":'<core:FragmentDefinition\n    height="100%"\n    xmlns:core="sap.ui.core"\n    xmlns="sap.m"><Popover\n        initialFocus="CEPSearchField"\n        id="searchFieldPopover"\n        class="searchFieldPopover"\n        placement="Bottom"\n        showArrow="false"\n        showHeader="false"\n        offsetX="-13"\n        beforeOpen=".onBeforeOpen"\n        afterOpen=".onAfterOpen"\n        afterClose=".onAfterClose"\n        horizontalScrolling="false"\n        ariaLabelledBy="popoverTitle"><content><SearchField\n                id="CEPSearchField"\n                width="99%"\n                placeholder="{i18n>search}"\n                tooltip="{i18n>search}"\n                enableSuggestions="true"\n                search=".onSearch"\n                suggest=".onSuggest"\n                class="sapUshellCEPListCenter"\n            /><VBox id="Lists"></VBox></content></Popover></core:FragmentDefinition>\n'
});
//# sourceMappingURL=Component-preload.js.map
