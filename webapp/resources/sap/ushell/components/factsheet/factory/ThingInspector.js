// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/thirdparty/jquery","sap/suite/ui/commons/UnifiedThingInspector","sap/ui/core/format/NumberFormat","sap/ui/core/Configuration","sap/ui/core/Core","sap/viz/ui5/data/FlattenedDataset","sap/ui/core/Locale","sap/ui/model/type/DateTime","sap/ui/model/type/Time","sap/ui/model/type/Date","sap/ui/model/type/Float","sap/ui/model/type/Integer","sap/ui/model/json/JSONModel","sap/ui/core/Control","sap/m/Image","sap/m/Link","sap/m/Text","sap/ui/core/library","sap/ui/layout/VerticalLayout","sap/m/Label","sap/ui/layout/form/SimpleForm","sap/suite/ui/commons/UnifiedThingGroup","sap/ui/ux3/ThingGroup","sap/ui/core/HTML","sap/m/Column","sap/m/ColumnListItem","sap/m/library","sap/m/Table","sap/m/Page","sap/m/VBox","sap/m/Input","sap/m/List","sap/m/StandardListItem","sap/ui/model/FilterOperator","sap/m/DateTimeInput","sap/ui/model/Filter","sap/m/ViewSettingsItem","sap/m/ViewSettingsCustomItem","sap/ui/core/CustomData","sap/m/ViewSettingsDialog","sap/ui/model/Sorter","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/Button","sap/viz/ui5/Area","sap/viz/ui5/Bar","sap/viz/ui5/Bubble","sap/viz/ui5/Column","sap/viz/ui5/StackedColumn","sap/viz/ui5/StackedColumn100","sap/viz/ui5/Donut","sap/viz/ui5/Heatmap","sap/viz/ui5/HorizontalArea","sap/viz/ui5/Line","sap/viz/ui5/Pie","sap/viz/ui5/Scatter","sap/viz/ui5/Treemap","sap/viz/ui5/types/Title","sap/suite/ui/commons/KpiTile","sap/ui/model/odata/ODataModel","sap/suite/ui/commons/FacetOverview","sap/suite/ui/commons/library","sap/ui/layout/Grid","sap/ui/vbm/VBI","sap/ui/layout/HorizontalLayout","sap/ui/core/Icon","sap/m/Carousel","sap/ui/core/IconPool","sap/ushell/resources","sap/ushell/ui/footerbar/AddBookmarkButton","sap/suite/ui/commons/LinkActionSheet","sap/ushell/services/AppConfiguration","sap/m/ActionSheet","sap/ushell/ui/footerbar/JamDiscussButton","sap/ushell/ui/footerbar/JamShareButton"],(jQuery,e,t,a,n,i,s,l,o,r,c,f,p,d,u,g,m,h,y,T,b,S,P,I,C,v,w,x,E,U,A,O,F,V,L,D,N,k,B,M,_,H,R,$,G,z,W,j,Q,K,J,X,q,Y,Z,ee,te,ae,ne,ie,se,le,oe,re,ce,fe,pe,de,ue,ge,me,he,ye,Te,be)=>{"use strict";const Se=w.URLHelper;const Pe=w.PlacementType;const Ie=le.FacetOverviewHeight;const Ce=w.DateTimeInputType;const ve=w.ListMode;const we=w.ListSeparators;const xe=w.BackgroundDesign;const Ee=w.ListType;const Ue=h.TextAlign;let Ae={};let Oe=[];const Fe={};const Ve={};const Le="displayFactSheet";let De;let Ne;De=a.getFormatSettings().getFormatLocale();if(a.getLanguage()==="ZH"){De=new s("zh_CN")}function ke(e){return e<0}function Be(e){let t=Number(e).toFixed(0);if(ke(e)){t=Number(t)*-1}return t}function Me(e,a){let n;if(!e){return""}const i=new RegExp(t.oDefaultFloatFormat.groupingSeparator,"g");if(a>=0){a=parseInt(a,10);n=t.getFloatInstance({minFractionDigits:a,maxFractionDigits:a},De)}else{n=t.getFloatInstance({minFractionDigits:0,maxFractionDigits:99},De)}const s=n.format(e);const l=s.replace(/[\D]/g,"");if(l&&l.length>6){e=e.replace(i,"");if(Be(e)<1e3){return t.getIntegerInstance().format(e)}n=t.getFloatInstance({minFractionDigits:1,maxFractionDigits:1,style:"short"},De);return n.format(e)}return s}function _e(e,t){let a;for(a in e){if(e.hasOwnProperty(a)){if(a==="__metadata"){continue}else if(a===t){return e[a]}else if(typeof e[a]==="object"){return _e(e[a],t)}}}}function He(e){let t={};let a;const n=e.lastIndexOf("/");const i=e.slice(0,n);const s=e.slice(n+1);if(!Ve[e]){t=new p;t.loadData(i,null,false);Ve[e]=t.getData()}else{t=Ve[e]}if(Ve[e]&&Ve[e].d){if(!Ve[e].d[s]){a=_e(Ve[e].d,s)}else{a=Ve[e].d[s]}}return a}function Re(){let e="";let t;let a;let n;let i;let s;const l=this.getElementBinding().sPath.split("/")[1];const o=this.getModel();const r=this.mBindingInfos.value.parameters;const c=this.mBindingInfos.value.parts;for(let t=0;t<r.length;++t){e=e+r[t].string}for(let n=0;n<c.length;++n){t=c[n].path;i=`{${t}}`;a=o.oData[l][t];e=e.replace(i,a)}n=He(e);if(typeof n==="number"&&!isNaN(n)){s=this.mBindingInfos.value.parts.filter(e=>e.path===t);n=Me(n,s[0].type.oFormatOptions.maxFractionDigits);this.setDoubleFontSize(true)}this.setValue(n);this.getElementBinding().detachChange(Re)}function $e(){let e="";if(Ne.getName()&&Ne.getDescription()){e=`${Ne.getName()}, ${Ne.getDescription()}`}else if(Ne.getName()&&!Ne.getDescription()){e=Ne.getName()}else if(!Ne.getName()&&Ne.getDescription()){e=Ne.getDescription()}return e}function Ge(e){const t=e.slice(1).split("/");let a="/";for(let e=0;e<t.length;++e){if(t[e].indexOf("(")>0&&t[e].indexOf("sid(")<0){break}else{a+=`${t[e]}/`}}return a}function ze(e,t){let a;const n=e.slice(t.sServiceUrl.length+1);if(n.indexOf("/")>=0){const e=n.split("/");const i=e[e.length];a=e[e.length-1];if(a.indexOf("(")>=0){a=a.slice(a.indexOf("("))}a=this.getNavEntitySet(a,i,t.getMetadata())}else if(n.indexOf("(")>=0){a=n.slice(0,n.indexOf("("))}else if(n.indexOf("?")>=0){a=n.slice(0,n.indexOf("?"))}else{a=n}return a}function We(e,t){let a;for(let n=t.dataServices.schema.length-1;n>=0;--n){a=t.dataServices.schema[n];if(a.namespace===e.slice(0,e.lastIndexOf("."))){for(let t=0;t<a.entityType.length;++t){if(a.entityType[t].name===e.slice(e.lastIndexOf(".")+1)){return a.entityType[t].key.propertyRef[0].name}}}}}function je(e,t,a){let n;let i;let s;for(let l=t.dataServices.schema.length-1;l>=0;--l){n=t.dataServices.schema[l];if(n.entityContainer){i=n.entityContainer[0].entitySet;for(let t=i.length-1;t>=0;--t){if(i[t].name===e){if(a){s=i[t].entityType.slice(n.namespace.length+1)}else{s=i[t].entityType}return s}}}}}function Qe(e,t){let a="";const n=e.slice(t.sServiceUrl.length+1);if(n.indexOf("(")>=0){a=n.slice(n.indexOf("(")+1,n.indexOf(")"));if(a.indexOf("=")<=0){const n=t.getServiceMetadata();const i=je(ze(e,t),n);a=`${We(i,n)}=${a}`}}return a}function Ke(e,t){let a;let n;for(let i=t.dataServices.schema.length-1;i>=0;--i){a=t.dataServices.schema[i];if(a.entityContainer){n=a.entityContainer[0].entitySet;for(let t=n.length-1;t>=0;--t){if(n[t].entityType===e){return n[t].name}}}}}function Je(e,t,a){let n;let i;let s;const l=e.split(".");for(let e=a.dataServices.schema.length-1;e>=0;--e){n=a.dataServices.schema[e];i=l[0];if(l.length>2){for(let e=1;e<l.length-1;++e){i+=`.${l[e]}`}}if(n.namespace===i){for(let e=0;e<n.entityType.length;++e){if(n.entityType[e].name===l[l.length-1]){if(n.entityType[e].navigationProperty){for(let a=0;a<n.entityType[e].navigationProperty.length;++a){if(n.entityType[e].navigationProperty[a].name===t){s=n.entityType[e].navigationProperty[a];return{name:s.relationship,toRole:s.toRole}}}}}}}}}function Xe(e,t,a){let n;let i;const s=je(e,a);if(t.charAt(0)==="@"){if(Ae.termDefinitions&&Ae.termDefinitions[t]){let e=Ae.termDefinitions[t];if(e.indexOf("Collection")>=0){e=e.slice(e.indexOf("(")+1,e.indexOf(")"))}return Ke(e,a)}}else{const e=Je(s,t,a);if(e){for(let t=a.dataServices.schema.length-1;t>=0;--t){n=a.dataServices.schema[t];if(n.entityContainer&&n.entityContainer[0].associationSet){for(let t=n.entityContainer[0].associationSet.length-1;t>=0;--t){i=n.entityContainer[0].associationSet[t];if(i.association===e.name){for(let t=0;t<i.end.length;++t){if(i.end[t].role===e.toRole){return i.end[t].entitySet}}}}}}}}}function qe(e,t,a){let n;let i;let s;const l=je(e,a);const o=l.split(".")[l.split(".").length-1];const r=Je(l,t,a);if(r){for(let e=a.dataServices.schema.length-1;e>=0;--e){n=a.dataServices.schema[e];for(let e=0;e<n.entityType.length&&!s;++e){if(n.entityType[e].name===o){for(let a=0;a<n.entityType[e].navigationProperty.length;++a){if(n.entityType[e].navigationProperty[a].name===t){s=n.entityType[e].navigationProperty[a].toRole;break}}}}for(let e=n.association.length-1;e>=0;--e){i=n.association[e];if(`${n.namespace}.${i.name}`===r.name){for(let e=0;e<i.end.length;++e){if(i.end[e].role===s){return i.end[e].multiplicity}}}}}}else{jQuery.sap.log.error(`"${t}" wasn't found in the metadata document. Check whether the corresponding search connector is active.`);return 0}}function Ye(e,t){let a;const n={};if(Ae.expand){if(Ae.expand[je(e,t)]){const i=Ae.expand[je(e,t)];const s=[];for(a in i){if(i.hasOwnProperty(a)){s.push(i[a])}}n.expand=s.join(", ")}}return n}function Ze(e,t,a){let n;for(let i=a.dataServices.schema.length-1;i>=0;--i){n=a.dataServices.schema[i];for(let a=0;a<n.entityType.length;++a){if(n.entityType[a].name===t.split(".")[t.split(".").length-1]){for(let t=0;t<n.entityType[a].navigationProperty.length;++t){if(n.entityType[a].navigationProperty[t].name===e){for(let e=0;e<n.association.length;++e){for(let i=n.association[e].end.length-1;i>=0;--i){if(n.association[e].end[i].role===n.entityType[a].navigationProperty[t].toRole){return n.association[e].end[i].type}}}}}}}}}function et(e,t){const a={};a.parts=[];a.parameters=[];for(let t=e.length-1;t>=0;--t){if(e[t].Type==="Path"){if(e[t].EdmType){switch(e[t].EdmType){case"Edm.DateTimeOffset":case"Edm.DateTime":a.parts.push({path:e[t].Value,type:new l({UTC:true})});break;case"Edm.Time":a.parts.push({path:`${e[t].Value}/ms`,type:new o({source:{pattern:"timestamp"},UTC:true})});break;case"Edm.Date":a.parts.push({path:e[t].Value,type:new r({UTC:true})});break;case"Edm.Decimal":case"Edm.Double":case"Edm.Single":a.parts.push({path:e[t].Value,type:new c});break;case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":a.parts.push({path:e[t].Value,type:new f});break;default:a.parts.push({path:e[t].Value});break}}else{a.parts.push({path:e[t].Value})}}else if(e[t].Type==="String"){a.parameters.unshift({string:e[t].Value})}}a.formatter=function(){let a="";let n="";let i=false;let s=0;let l=0;if(arguments&&arguments.length>=1){let o=arguments.length-1;let r="";let c=0;if(e&&e[0]&&e[0].Type==="String"&&e[0].Value.substr(0,1)==="#"){i=true}for(let t=0;t<e.length;++t){if(e[t].Type==="Path"){r=arguments[o];if(!r||r.length===0){if(a.length>c){if(a.indexOf("(")>c){a=a.substr(0,c)}else{a=a.substr(0,c);r=a}}}else{if(i){r=encodeURIComponent(r)}a+=r;s+=1}o-=1;c=a.length}else{c=a.length;n=e[t].Value;if(n.indexOf("(")!==-1){l+=1}if(r&&r.length>0||n.indexOf("(")!==-1||n&&n.substr(0,1)==="#"){a+=e[t].Value}else{n=""}}}if(t){a=t(a)}a=a.trim();if(s===1&&l>0&&a.substr(0,1)==="("&&a.substr(-1)===")"){a=a.substr(1,a.length-2)}return a.trim()}};return a}function tt(e){const t=[];let a;let n;let i;let s={};let l;let o;let r;if(e&&e.Apply){a=e.Apply.Parameters;switch(e.Apply.Name){case"odata.fillUriTemplate":a[0].Value=a[0].Value.trim();n=a[0].Value.split("{");for(let e=0;e<n.length;++e){if(n[e].indexOf("}")<0){t.push({Value:n[e],Type:"String"})}else{i=n[e].split("}");s={};s.Value=i[0];s.Type="Path";for(e=1;e<a.length;++e){if(a[e].Name===s.Value){l=a[e].Value;if(l.Path){s.Value=l.Path}else if(l.Apply&&l.Apply.Name&&l.Apply.Name.toLowerCase()==="odata.uriencode"){s.Value=l.Apply.Parameters[0].Value}break}}t.push(s);t.push({Value:i[1],Type:"String"})}}o=sap.ushell.Container.getService("NavTargetResolutionInternal").getCurrentResolution();if(o&&o.url){r=jQuery.sap.getUriParameters(o.url).get("sap-system");if(r){t.push({Type:"String",Value:`&sap-system=${r}`})}}break;default:break}}return et(t)}function at(e,t,a){const n={};const i=[];let s=[];const p=[];let d;let u;let g;let m;let h;let y;let T;let b;let S;let P;function I(e,t,a){const n={};const i=Ae.propertyAnnotations[e];if(i&&i[t]&&i[t][a]){if(i[t][a].Path){n.Type="Path";n.Value=i[t][a].Path}else{n.Type="String";n.Value=i[t][a].String}}return n}if(!e){return false}if(e.Apply){if(e.Apply.Name==="odata.concat"){if(a&&Ae.propertyAnnotations&&Ae.propertyAnnotations[a]){u=e.Apply.Parameters;for(let e=0;e<u.length;++e){i.push(u[e]);if(u[e].Type==="Path"){d=I(a,u[e].Value,"Org.OData.Measures.V1.ISOCurrency");if(!jQuery.isEmptyObject(d)){i.push({Type:"String",Value:" "});i.push({Type:d.Type,Value:d.Value})}d=I(a,u[e].Value,"Org.OData.Measures.V1.Unit");if(!jQuery.isEmptyObject(d)){i.push({Type:"String",Value:" "});i.push({Type:d.Type,Value:d.Value})}}}n.BindingInfo=et(i)}else{n.BindingInfo=et(e.Apply.Parameters)}}}else if(e.Path){if(e.Path.charAt(0)==="@"){g=Ae[a][e.Path.slice(1,e.Path.indexOf("/"))].UrlRef;m=e.Path.slice(e.Path.indexOf("/")+1);if(g&&g.Apply){h=g.Apply.Parameters;switch(g.Apply.Name){case"odata.concat":s=h;s.push({Type:"String",Value:`/${m}`});break;case"odata.fillUriTemplate":y=h[0].Value.split("{");for(const e in y){if(y.hasOwnProperty(e)){if(y[e].indexOf("}")<0){s.push({Type:"String",Value:y[e]})}else{T=y[e].split("}");for(let e=1;e<h.length;++e){if(h[e].Name===T[0]){b=h[e].Value;if(b.Path){s.push({Type:"Path",Value:b.Path})}else if(b.Apply&&b.Apply.Name&&b.Apply.Name.toLowerCase()==="odata.uriencode"){S=b.Apply.Parameters[0];s.push({Type:S.Type,Value:encodeURIComponent(S.Value)});s.push({Type:"String",Value:`{${encodeURIComponent(S.Value)}}`})}}}s.push({Type:"String",Value:T[1]})}}}s.push({Type:"String",Value:`/${m}`});n.fnChange=Re;break;default:break}n.BindingInfo=et(s,He)}else if(g&&g.Path){s.push({Type:"Path",Value:g.Path},{Type:"String",Value:`/${m}`});n.BindingInfo=et(s,He)}else if(g&&g.String){n.String=He(`${g.String}/${m}`)}}else{n.BindingInfo={};switch(t){case"Edm.DateTimeOffset":case"Edm.DateTime":n.BindingInfo={path:e.Path,type:new l({UTC:true})};break;case"Edm.Time":n.BindingInfo={path:`${e.Path}/ms`,type:new o({source:{pattern:"timestamp"},UTC:true})};break;case"Edm.Date":n.BindingInfo={path:e.Path,type:new r({UTC:true})};break;case"Edm.Decimal":case"Edm.Double":case"Edm.Single":case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":if(t==="Edm.Decimal"||t==="Edm.Double"||t==="Edm.Single"){P=new c}else if(t==="Edm.Int16"||t==="Edm.Int32"||t==="Edm.Int64"){P=new f}if(Ae.propertyAnnotations){p.push({Type:"Path",Value:e.Path,EdmType:t},{Type:"String",Value:" "});d=I(a,e.Path,"Org.OData.Measures.V1.ISOCurrency");if(!jQuery.isEmptyObject(d)){p.push({Type:d.Type,Value:d.Value})}d=I(a,e.Path,"Org.OData.Measures.V1.Unit");if(!jQuery.isEmptyObject(d)){p.push({Type:d.Type,Value:d.Value})}n.BindingInfo=et(p)}else{n.BindingInfo={path:e.Path,type:P}}break;default:n.BindingInfo={path:e.Path};break}}}else if(e.String){n.String=e.String}return n}function nt(e,t,a,n){let i;let s;let l;let o;let r;let c;let f;i=new d;const p=at(e.Value,e.EdmType,t);if(e.Value&&e.Value["com.sap.vocabularies.UI.v1.IsImageURL"]){i=new u({height:"50px"});if(p.BindingInfo){i.bindProperty("src",p.BindingInfo)}else{i.setProperty("src",p.String)}}else{if(e.UrlRef||e.Url||e.Target&&e.Target.Path){i=new g({wrapping:true})}else{i=new m;if(e.EdmType==="Edm.Decimal"||e.EdmType==="Edm.Double"||e.EdmType==="Edm.Single"||e.EdmType==="Edm.Int16"||e.EdmType==="Edm.Int32"||e.EdmType==="Edm.Int64"){i.setTextAlign(Ue.End)}}i.addStyleClass("sapFactsheetUtiDataField");if(p.BindingInfo){i.bindProperty("text",p.BindingInfo)}else{i.setProperty("text",p.String)}}if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithNavigation"&&a){s=e.Target.Path;if(Ae[t][s.slice(1)]){if(s.charAt(0)==="@"){if(s.indexOf("/")<0){l=Ae[t][s.slice(1)].UrlRef}else{l=Ae[t][s.slice(1,s.indexOf("/"))].UrlRef}i.bindProperty("href",tt(l))}}i.attachPress(e=>false)}if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(e.Url.String){i.setHref(e.Url.String)}else{i.bindProperty("href",tt(e.Url));o=new m({wrapping:true});if(p.BindingInfo){o.bindProperty("text",jQuery.extend({},p.BindingInfo))}else{o.setProperty("text",p.String)}i.setVisible(false);r=new y;r.addContent(i);r.addContent(o);if(!Oe[Oe.indexOf(n)].Links){Oe[Oe.indexOf(n)].Links=[]}if(e.Url.Apply){c=e.Url.Apply.Parameters[0].Value.slice(e.Url.Apply.Parameters[0].Value.indexOf("#")+1,e.Url.Apply.Parameters[0].Value.indexOf("-"));f=e.Url.Apply.Parameters[0].Value.slice(e.Url.Apply.Parameters[0].Value.indexOf("#")+1,e.Url.Apply.Parameters[0].Value.indexOf("?"))}Oe[Oe.indexOf(n)].Links.push({sSemanticObject:c,sIntend:f,oVL:r})}}if(r){return r}return i}function it(e,t,a,n){let i="";let s="";let l;let o;const r=new T(t);r.addStyleClass("sapFactsheetUtiLabel");if(n){i=":"}if(e.Label){if(e.Label.String){r.setText(e.Label.String.trim()+i);r.setTooltip(e.Label.String.trim())}else if(e.Label.Path){r.bindProperty("text",e.Label.Path);r.bindProperty("tooltip",e.Label.Path)}}else if(e.Value){if(e.Value.Path&&a){l=a[e.Value.Path];for(const e in l){if(l.hasOwnProperty(e)){if(e==="http://www.sap.com/Protocols/SAPData"){if(l[e].label){s=l[e].label;break}}}}}else if(e.Value.Apply&&e.Value.Apply.Name==="odata.concat"){for(const t in e.Value.Apply.Parameters){if(e.Value.Apply.Parameters.hasOwnProperty(t)){o=e.Value.Apply.Parameters[t];if(o.Type==="Path"){l=a[o.Value];for(const e in l){if(l.hasOwnProperty(e)){if(e==="http://www.sap.com/Protocols/SAPData"){if(l[e].label){s=l[e].label;break}}}}break}}}}r.setText(s+i);r.setTooltip(s)}return r}function st(e){let t=Ue.Begin;if(e.EdmType==="Edm.Decimal"||e.EdmType==="Edm.Double"||e.EdmType==="Edm.Single"||e.EdmType==="Edm.Int16"||e.EdmType==="Edm.Int32"||e.EdmType==="Edm.Int64"){t=Ue.End}return t}function lt(e){let t="";if(e.Importance){t=e.Importance.EnumMember}else if(e["com.sap.vocabularies.UI.v1.Importance"]){t=e["com.sap.vocabularies.UI.v1.Importance"].EnumMember}return t.substr(t.indexOf("/")+1)}function ot(e,t,a,n,i,s){let l=0;let o=0;let r=0;let c=0;let f;let p;let u;if(!i){i=e.getServiceMetadata()}if(!a){a=[]}const g=je(t,i);const m=new b({labelMinWidth:150,maxContainerCols:2});const h=Ae.propertyExtensions?Ae.propertyExtensions[g]:[];if(n&&n.High){o=n.High}if(n&&n.Medium){r=n.Medium}if(n&&n.Low){c=n.Low}for(let t=0;t<a.length;++t){f=lt(a[t]);if(n&&f==="High"){if(o){o-=1}else{continue}}else if(n&&f==="Medium"){if(r){--r}else{continue}}else if(n&&f==="Low"){if(c){c-=1}else{continue}}if(n&&n.Total&&l>=n.Total){break}++l;p=(new d).setModel(e);u=it(a[t],{textAlign:Ue.End},h,false);u.addStyleClass("sapFactsheetUtiFormPadding");p=nt(a[t],g,i,s);p.addStyleClass("sapFactsheetUtiFormPadding");if(p.setTextAlign){p.setTextAlign(Ue.Begin)}m.addContent(u);m.addContent(p)}m.addStyleClass("sapFactsheetUtiFormLayout");return m}function rt(e){let t;let a;let n;if(Fe.InteropCompleted===true){for(let e=0;e<Oe.length;++e){if(Oe[e].bLoaded&&!Oe[e].bProcessed&&Oe[e].Links){n=Oe[e].Links;for(let i=0;i<n.length;++i){if(Fe.hasOwnProperty(n[i].sIntend)===true){if(Oe[e].bIsTable===true){if(Oe[e].oTableItems){t=Oe[e].oTableItems;for(let e=0;e<t.length;++e){a=t[e].getCells();for(let e=0;e<a.length;++e){if(a[e]instanceof y&&a[e].getContent()[0].getBindingInfo("href").parts===n[i].oVL.getContent()[0].getBindingInfo("href").parts&&a[e].getContent()[1].getBindingInfo("text").parts===n[i].oVL.getContent()[1].getBindingInfo("text").parts){a[e].getContent()[0].setVisible(true);a[e].getContent()[1].setVisible(false)}}}}}else{n[i].oVL.getContent()[0].setVisible(true);n[i].oVL.getContent()[1].setVisible(false)}}else if(Oe[e].bIsTable===false){n[i].oVL.getContent()[1].setText(n[i].oVL.getContent()[0].getText())}Oe[e].bProcessed=true}}}}if(e>=0){if(Oe[e].bLoaded&&!Oe[e].bProcessed&&Oe[e].Links){n=Oe[e].Links;for(let t=0;t<n.length;++t){if(Oe[e].bIsTable===false){n[t].oVL.getContent()[1].setText(n[t].oVL.getContent()[0].getText())}}}}}function ct(e,t,a,i,s,o,r,c){const f=[];const p=[];const u=[];const g=[];const h=[];const y=[];let b=false;let P;let I;let w;let G;let z;let W;let j;let Q;let K;let J;let X;let q;let Y;let Z;const ee=n.getLibraryResourceBundle("sap.suite.ui.commons");if(!i){i=e.getServiceMetadata()}const te=Ae.propertyExtensions?Ae.propertyExtensions[a]:[];P=6;if(jQuery.device.is.tablet&&jQuery.device.is.landscape){P=5}else if(jQuery.device.is.tablet&&jQuery.device.is.portrait){P=4}else if(jQuery.device.is.phone&&jQuery.device.is.landscape){P=3}else if(jQuery.device.is.phone&&jQuery.device.is.portrait){P=2}I=0;w=0;for(let e=0;e<t.length;++e){G=lt(t[e]);if(G==="High"){I+=1}}if(P>I){w=P-I}else if(P<I){I=P}g.push(new C({visible:false}));u.push((new m).bindText("__metadata/uri"));for(let e=0;e<t.length;++e){Z="";j=new d;G=lt(t[e]);j=nt(t[e],a,i,c);z=it(t[e],null,te);if(t[e].Value.Path){J=t[e].Value.Path;if(r&&r[J]&&r[J]["http://www.sap.com/Protocols/SAPData"]&&r[J]["http://www.sap.com/Protocols/SAPData"].sortable){z.data("IsSortable",r[J]["http://www.sap.com/Protocols/SAPData"].sortable);if(r[J]["http://www.sap.com/Protocols/SAPData"].sortable==="true"){b=true}}else{z.data("IsSortable","true");b=true}if(r&&r[J]&&r[J]["http://www.sap.com/Protocols/SAPData"]&&r[J]["http://www.sap.com/Protocols/SAPData"].filterable){z.data("IsFilterable",r[J]["http://www.sap.com/Protocols/SAPData"].filterable);if(r[J]["http://www.sap.com/Protocols/SAPData"].filterable==="true"){b=true}}else{z.data("IsFilterable","true");b=true}}else{Y=true;for(let a=0;a<t[e].Value.Apply.Parameters.length;++a){if(t[e].Value.Apply.Parameters[a].Type==="Path"){J=t[e].Value.Apply.Parameters[a].Value;if(r[J]&&r[J]["http://www.sap.com/Protocols/SAPData"]&&r[J]["http://www.sap.com/Protocols/SAPData"].sortable){if(r[J]["http://www.sap.com/Protocols/SAPData"].sortable==="false"){Y=false;Z="";break}}if(Z){Z+=";"}Z+=J}}J=Z;if(Y===false){z.data("IsSortable","false")}else{z.data("IsSortable","true");b=true}z.data("IsFilterable","false")}if(t[e].EdmType){z.data("EdmType",t[e].EdmType)}z.data("ColumnName",J);f.push(z);p.push(j);if(G==="High"){if(I>0){W=true;I-=1}else{W=false}}else if(G==="Medium"){if(w>0){W=true;w-=1}else{W=false}}else{W=false}g.push(new C({header:z,hAlign:st(t[e]),visible:W}));u.push(j)}const ae=new v({type:Ee.Navigation,unread:false,cells:u});if(o){Q=o.Label.String}ae.attachPress({aColumns:t,aLabels:f,aControls:p,sTitle:Q},e=>{let a;let n;const i=e.getSource().getCells()[0].getText().substr(e.getSource().getCells()[0].getText().lastIndexOf("/"));const s=new x({backgroundDesign:xe.Transparent,showSeparators:we.None,columns:[new C({hAlign:Ue.End}),new C]});s.addStyleClass("sapFactsheetUtiPanel");s.addStyleClass("sapFactsheetUtiTilePadding");s.addStyleClass("sapFactsheetUtiTableNoTopBorder");s.bindElement(i);for(let e=0;e<t.length;++e){a=f[e].clone();a.setText(`${a.getText()}:`);n=p[e].clone();a.setLabelFor(n);s.addItem(new v({cells:[a,n]}))}const l=new S({content:s,title:Q,description:$e()});const o=new E({title:Ne.getTitle(),showNavButton:true,content:[l]});Ne.navigateToPage(o,true);Ne.attachAfterNavigate(s,e=>{if(e.getParameters().getParameters().toId.indexOf("__page")>=0){const e=s.getItems();if(e.length>0&&Oe.indexOf(c)>=0){Oe[Oe.indexOf(c)].bLoaded=true;Oe[Oe.indexOf(c)].bProcessed=false;Oe[Oe.indexOf(c)].bIsTable=true;Oe[Oe.indexOf(c)].oTableItems=e;rt(Oe.indexOf(c))}}})});const ne=new x({growing:true,columns:g});ne.setModel(e);ne.bindItems({path:s,template:ae});const ie=new U({items:[new A({placeholder:ee.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(e){let t;const a=e.getSource().getParent().getParent().getId();const i=n.byId(a.substr(0,a.indexOf("-")));const s=i.getFilterItems();for(let e=0;e<s.length;++e){if(s[e]instanceof k&&s[e].getKey()===this.oParent.data("ColumnName")){t=s[e];break}}if(t){if(e.getParameter("newValue")===undefined||e.getParameter("newValue")===""){t.setSelected(false);t.setFilterCount(0)}else{t.setSelected(true);t.setFilterCount(1)}}}}).addStyleClass("sapFactsheetUtiFilterInput")]});const se=new U({items:[new O({mode:ve.SingleSelectLeft,includeItemInSelection:true,items:[new F({title:ee.getText("USHELL_FACTSHEET_GREATER_THEN")}).data("FilterOperator",V.GT),new F({title:ee.getText("USHELL_FACTSHEET_EQUALS")}).data("FilterOperator",V.EQ),new F({title:ee.getText("USHELL_FACTSHEET_LESS_THEN")}).data("FilterOperator",V.LT)]}),new A({placeholder:ee.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(e){let t;const a=e.getSource().getParent().getParent().getId();const i=n.byId(a.substr(0,a.indexOf("-")));const s=i.getFilterItems();for(let e=0;e<s.length;++e){if(s[e]instanceof k&&s[e].getKey()===this.oParent.data("ColumnName")){t=s[e];break}}if(t){if(e.getParameter("newValue")===undefined||e.getParameter("newValue")===""){t.setSelected(false);t.setFilterCount(0)}else{t.setSelected(true);t.setFilterCount(1)}}}}).addStyleClass("sapFactsheetUtiFilterInput")]});new U({items:[new O({mode:ve.SingleSelectLeft,includeItemInSelection:true,items:[new F({title:ee.getText("USHELL_FACTSHEET_AFTER")}).data("FilterOperator",V.GT),new F({title:ee.getText("USHELL_FACTSHEET_AT")}).data("FilterOperator",V.EQ),new F({title:ee.getText("USHELL_FACTSHEET_BEFORE")}).data("FilterOperator",V.LT)]}),new L({type:Ce.Date,valueFormat:new l({pattern:"yyyy/MM/dd HH:mm:ss UTC+00:00"}).getOutputPattern(),placeholder:ee.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(e){let t;const a=e.getSource().getParent().getParent().getId();const i=n.byId(a.substr(0,a.indexOf("-")));const s=i.getFilterItems();for(let e=0;e<s.length;++e){if(s[e]instanceof k&&s[e].getKey()===this.oParent.data("ColumnName")){t=s[e];break}}if(e.getParameter("newValue")===undefined||e.getParameter("newValue")===""){t.setSelected(false);t.setFilterCount(0)}else{t.setSelected(true);t.setFilterCount(1)}}}).addStyleClass("sapFactsheetUtiFilterInput")]});function le(e){const t=[];const a=e.getItems();let n;let i;if(a[0].getParent().data("EdmType")==="Edm.String"&&a[0].getValue()){t.push(new D(a[0].getParent().data("ColumnName"),V.Contains,a[0].getValue()))}else if(a[0].getParent().data("EdmType")==="Edm.Decimal"&&a[1].getValue()){for(let e=0;e<a[0].getItems().length;++e){if(a[0].getItems()[e].getSelected()===true){n=a[0].getItems()[e].data("FilterOperator");break}}i=a[1].getValue();for(let e=i.length-1;e>0;--e){if(i[e]===","){i=i.replace(i[e],".");break}}t.push(new D(a[1].getParent().data("ColumnName"),n,i))}else if(a[0].getParent().data("EdmType")==="Edm.Date"&&a[1].getValue()){for(let e=0;e<a[0].getItems().length;++e){if(a[0].getItems()[e].getSelected()===true){n=a[0].getItems()[e].data("FilterOperator");break}}t.push(new D(a[1].getParent().data("ColumnName"),n,a[1].getValue()))}else{t.push(new D(a[0].getParent().data("ColumnName"),V.EQ,a[0].getValue()))}return t}function oe(e){const t=e.getSource();const a=t.getFilterItems();let n;for(let e=0;e<a.length;++e){if(a[e]&&a[e]instanceof k){a[e].setSelected(false);a[e].setFilterCount(0);n=a[e].getCustomControl().getItems();for(let e=0;e<n.length;++e){if(n[e]instanceof A||n[e]instanceof L){n[e].setValue("")}if(n[e]instanceof O&&n[e].getSelectedItem()!==null){n[e].removeSelections()}}}}}const re=oe;for(let e=0;e<g.length;++e){if(g[e+1]){z=f[e].clone();if(z.getText()&&z.data("IsSortable")==="true"&&g[e+1].getVisible()){K=new N({text:z.getText(),key:z.data("ColumnName")});if(e===0){K.setSelected(true)}K.Sort=z.Sort;h.push(K)}if(z.getText()&&z.data("IsFilterable")==="true"){if(z.data("EdmType")==="Edm.String"){q=ie.clone().data("ColumnName",z.data("ColumnName")).data("EdmType",z.data("EdmType"))}else if(z.data("EdmType")==="Edm.Decimal"){q=se.clone().data("ColumnName",z.data("ColumnName")).data("EdmType",z.data("EdmType"))}if(z.data("EdmType")==="Edm.String"||z.data("EdmType")==="Edm.Decimal"){X=new k({key:z.data("ColumnName"),text:z.getText(),customControl:q,customData:new B({key:"callback",value:le})});y.push(X)}}}}const ce=new M({sortItems:h,filterItems:y,cancel:re,resetFilters:oe,confirm:function(e){const t=[];let a=[];let n=[];let i=[];let s;let l;let o;const r=e.getParameters();const c=ne.getBinding("items");if(r.sortItem){s=r.sortItem.getKey();l=r.sortDescending;if(s.indexOf(";")>0){a=s.split(";");for(let e=0;e<a.length;++e){t.push(new _(a[e],l))}}else if(s){t.push(new _(s,l))}c.sort(t)}const f=r;for(let e=0;e<f.filterItems.length;++e){if(f.filterItems[e]instanceof k){o=f.filterItems[e].getCustomData()[0].getValue();n=o.apply(this,[f.filterItems[e].getCustomControl()]);if(n){if(!Array.isArray(n)){n=[n]}i=i.concat(n)}}else if(f.filterItems[e]instanceof N){n=f.filterItems[e].getCustomData()[0].getValue();if(n){if(!Array.isArray(n)){n=[n]}i=i.concat(n)}}}c.filter(i)}});if(b===true&&(h.length>0||y.length>0)){ne.setHeaderToolbar(new H({content:[new T,new R,new $({icon:"sap-icon://drop-down-list",press:function(){ce.open()},tooltip:n.getLibraryResourceBundle("sap.m").getText("P13NDIALOG_VIEW_SETTINGS")})]}))}ne.setNoDataText(n.getLibraryResourceBundle("sap.m").getText("PULL2REFRESH_LOADING_LONG"));const fe=function(e){return function(t){const a=this.getItems();if(a.length===0){this.setNoDataText(ee.getText("FACETOVERVIEW_NO_CONTENT_TEXT"))}else{this.setNoDataText(n.getLibraryResourceBundle("sap.m").getText("PULL2REFRESH_LOADING_LONG"))}if(a.length>0&&Oe.indexOf(e)>=0){Oe[Oe.indexOf(e)].bLoaded=true;Oe[Oe.indexOf(e)].bProcessed=false;Oe[Oe.indexOf(e)].bIsTable=true;Oe[Oe.indexOf(e)].oTableItems=a}rt(Oe.indexOf(e))}}(c);ne.attachUpdateFinished(fe);return ne}function ft(e){let t;let a;let n;switch(e.UrlContentType.String){case"image/png":case"image/jpeg":case"image/gif":t=new u({width:"100%"});if(e.Url.String){t.setSrc(e.Url.String)}return t;default:a=new I;if(e.Url.String){a.setContent(`<iframe src = '${e.Url.String}' width='100%' height='250px' frameborder='0'></iframe>`)}else if(e.Url.Path){a.bindProperty("content",{path:e.Url.Path,formatter:function(){n=`<iframe src = '${e.Url.Path}' width='100%' height='250px' frameborder='0'></iframe>`;return n}})}return a}}function pt(e,t,a,n,i){let s="";const l=[];let o;let r;let c;let f;let p;let d;let u;let g;let m;let h;let T;let b;let I;const C=e.getServiceMetadata();switch(a.RecordType){case"com.sap.vocabularies.UI.v1.ReferenceFacet":o=new S;if(a.Label&&a.Label.String){o.setTitle(a.Label.String)}r=a.Target.AnnotationPath;c=r.substring(r.lastIndexOf("@")+1);r=r.substring(0,r.lastIndexOf("@")-1);if(r){s=qe(t,r,C)}f=c.split("#");switch(f[0]){case"com.sap.vocabularies.UI.v1.LineItem":case"com.sap.vocabularies.UI.v1.Chart":case"com.sap.vocabularies.UI.v1.Badge":case"com.sap.vocabularies.UI.v1.Identification":if(r){p=Xe(t,r,C);T=je(p,C)}else{T=je(t,C)}if(f[0]==="com.sap.vocabularies.UI.v1.Chart"){c="com.sap.vocabularies.UI.v1.LineItem"}b=Ae[T][c];if(Ae.propertyExtensions){I=Ae.propertyExtensions[T]}if(s==="*"&&f[0]!=="com.sap.vocabularies.UI.v1.Identification"){d=ct(e,b,T,C,`${n}/${r}`,a,I,i);o.setContent(d)}if(f[0]==="com.sap.vocabularies.UI.v1.Identification"){u=Ae[T]["com.sap.vocabularies.UI.v1.Identification"];g=new y({width:"100%"}).setModel(e);if(r){g.addContent(ot(e,p,u,null,null,i)).addStyleClass("sapFactsheetUtiPanel");g.bindElement(`${n}/${r}`)}else{g.addContent(ot(e,t,u,null,null,i).addStyleClass("sapFactsheetUtiPanel"))}o.setContent(g)}break;case"com.sap.vocabularies.UI.v1.StatusInfo":if(r){p=Xe(t,r,C);m=Ae[je(p,C)]["com.sap.vocabularies.UI.v1.StatusInfo"];o.setContent(ot(e,p,m,null,null,i).addStyleClass("sapFactsheetUtiPanel").bindElement(`${n}/${r}`))}else{m=Ae[je(t,C)]["com.sap.vocabularies.UI.v1.StatusInfo"];o.setContent(ot(e,t,m,null,null,i).addStyleClass("sapFactsheetUtiPanel"))}break;case"com.sap.vocabularies.UI.v1.FieldGroup":h=Ae[je(t,C)][c];if(h){if(!o.getTitle()||o.getTitle()===""){if(h.Label){if(h.Label.String){o.setTitle(h.Label.String)}else if(h.Label.Path){o.bindProperty("title",h.Label.Path)}}}if(r){p=Xe(t,r,C);o.setContent(ot(e,p,h.Data,null,null,i).addStyleClass("sapFactsheetUtiPanel").bindElement(`${n}/${r}`))}else{o.setContent(ot(e,t,h.Data,null,null,i).addStyleClass("sapFactsheetUtiPanel"))}}break;default:break}return o;case"com.sap.vocabularies.UI.v1.ReferenceURLFacet":o=new P({title:a.Label.String});o.setContent(ft(a));return o;case"com.sap.vocabularies.UI.v1.CollectionFacet":for(let s=0;s<a.Facets.length;++s){l.push(pt(e,t,a.Facets[s],n,i))}return l;default:break}}function dt(e,t,a,n){let i;switch(e){case"com.sap.vocabularies.UI.v1.ChartType/Area":i=new G({});break;case"com.sap.vocabularies.UI.v1.ChartType/Bar":i=new z({});break;case"com.sap.vocabularies.UI.v1.ChartType/Bubble":i=new W({});break;case"com.sap.vocabularies.UI.v1.ChartType/Column":i=new j({});break;case"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked":i=new Q({});break;case"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked100":i=new K({});break;case"com.sap.vocabularies.UI.v1.ChartType/Donut":i=new J({});break;case"com.sap.vocabularies.UI.v1.ChartType/HeatMap":i=new X({});break;case"com.sap.vocabularies.UI.v1.ChartType/HorizontalArea":i=new q({});break;case"com.sap.vocabularies.UI.v1.ChartType/Line":i=new Y({});break;case"com.sap.vocabularies.UI.v1.ChartType/Pie":i=new Z({});break;case"com.sap.vocabularies.UI.v1.ChartType/Scatter":i=new ee({});break;case"com.sap.vocabularies.UI.v1.ChartType/TreeMap":i=new te({});break;case"com.sap.vocabularies.UI.v1.ChartType/AreaStacked":case"com.sap.vocabularies.UI.v1.ChartType/AreaStacked100":case"com.sap.vocabularies.UI.v1.ChartType/BarStacked":case"com.sap.vocabularies.UI.v1.ChartType/BarStacked100":case"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked":case"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked100":case"com.sap.vocabularies.UI.v1.ChartType/Radar":case"com.sap.vocabularies.UI.v1.ChartType/Waterfall":break}if(i){if(t&&t.String){i.setTitle(new ae({visible:true,text:t.String}))}if(a&&a.String){i.setTooltip(a.String)}i.setWidth("100%");i.setHeight("17rem");i.setDataset(n)}else{i=new m({})}return i}function ut(e){let t;e=e||1;if(jQuery.device.is.phone){t=`${7*e}rem`}else{t=`${11*e-1}rem`}return t}function gt(e){let t=0;let a=0;let n=0;let i;for(let s=0;s<e.length;++s){i=lt(e[s]);if(i){switch(i){case"High":t+=1;break;case"Medium":a+=1;break;case"Low":n+=1;break}}}return{High:t,Medium:a,Low:n}}function mt(e,t,a,n){let i=false;let s;let l;let o;const r=new ne({doubleFontSize:false});if(t.ValueFormat){s=t.ValueFormat.NumberOfFractionalDigits.Int}if(t.Title&&t.Title.String){r.setDescription(t.Title.String)}else if(t.Title&&t.Title.Path){r.bindProperty("description",{path:t.Title.Path})}if(t.Value&&t.Value.String){r.setValue(t.Value.String)}else if(t.Value&&t.Value.Path){l=at(t.Value,t.Value.EdmType,a);if(l.fnChange){r.setModel(e);r.bindElement(n);r.getElementBinding().attachChange(l.fnChange,r)}if(l.String){if(typeof l.String==="number"&&!isNaN(l.String)){i=true;r.setValue(Me(l.String,s))}else{r.setValue(l.String)}}else if(l.BindingInfo){o=l.BindingInfo;if(o.parts&&o.parts.length===2){r.bindProperty("valueUnit",o.parts[0]);o.parts[1].type=undefined;o.parts[1].formatter=function(){return function(e){return Me(e,s)}}(s);r.bindProperty("value",o.parts[1])}else if(o.parts&&o.parts.length===1){o.parts[0].type=undefined;o.parts[0].formatter=function(){return function(e){return Me(e,s)}}(s);r.bindProperty("value",o)}else{r.bindProperty("value",o)}}}if(t.Value.EdmType==="Edm.Decimal"||t.Value.EdmType==="Edm.Double"||t.Value.EdmType==="Edm.Single"||t.Value.EdmType==="Edm.Int16"||t.Value.EdmType==="Edm.Int32"||t.Value.EdmType==="Edm.Int64"||i===true){r.setDoubleFontSize(true)}return r}function ht(e){const t=[];const a=[];let n;let i;function s(e){if(e.RecordType&&e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(e.Url&&e.Url.Apply){n=e.Url.Apply.Parameters[0].Value.slice(e.Url.Apply.Parameters[0].Value.indexOf("#")+1,e.Url.Apply.Parameters[0].Value.indexOf("-"));if(t.indexOf(n)<0){t.push(n)}return true}}else{return false}}function l(e){if(s(e)===false){if(Array.isArray(e)){for(let t=0;t<e.length;++t){s(e[t])}}else if(typeof e==="object"){for(i in e){if(e.hasOwnProperty(i)){if(e[i].constructor!==String){l(e[i])}}}}}}for(i in Ae){if(Ae.hasOwnProperty(i)){if(i.indexOf(e.dataServices.schema[0].namespace)>=0){l(Ae[i])}}}for(let e=0;e<t.length;++e){if(!Fe.hasOwnProperty(t[e])){a.push(t[e])}}return a}function yt(e){let t;let a;let n;if(e.length>0){t=new p;a="/sap/opu/odata/UI2/INTEROP/SemanticObjects?$expand=Links&$format=json";n="&$filter=id%20eq%20%27";for(let t=0;t<e.length;++t){if(n.length>22){n+=`%20or%20id%20eq%20%27${e[t]}%27`}else{n+=`${e[t]}%27`}}a+=a+n;t.loadData(a);t.attachRequestCompleted(function(){let e=[];let t;if(this.getData().d&&this.getData().d.results){t=this.getData().d.results;for(let a=0;a<t.length;++a){Fe[t[a].id]="";e=t[a].Links.results;for(let t=0;t<e.length;++t){Fe[e[t].id.slice(0,e[t].id.indexOf("~"))]=""}}}Fe.InteropCompleted=true;rt()})}else{Fe.InteropCompleted=true}}function Tt(e,t,s){let l={};const o=[];let r=0;let c=0;let f=0;let d;let h;let b;let P;let E;let U;let A;let O;let F;let V;let L;let D;let k;let B;let G;let z;let W;let j;let Q;let K;let J;let X;let q;let Y;let Z;let ee;let te;let ae;let ne;let le;let Ce;let ve;let we;let xe;const Ee=Ge(e);const Ve=t.substring(0,t.substring(0,t.lastIndexOf("/")).lastIndexOf("/"));let De=t.substring(t.substring(0,t.lastIndexOf("/")).lastIndexOf("/"));if(window.location.search.indexOf("cbn_keep_anno_case%3Dtrue")===-1){De=De.toLowerCase()}const Ne=new ie(Ee,{annotationURI:Ve+De,loadAnnotationsJoined:true,loadMetadataAsync:false,json:true});Ne.setCountSupported(false);s.setModel(Ne);const ke=ze(e,Ne);const Be=`/${e.slice(Ee.length)}`;const Me=Ne.getServiceMetadata();Ae=Ne.getServiceAnnotations();const _e=je(ke,Me);const He=Ae[_e]["com.sap.vocabularies.UI.v1.HeaderInfo"];const Re=Ae[_e]["com.sap.vocabularies.UI.v1.Facets"];s.bindElement(Be,Ye(ke,Me));const We=n.getLibraryResourceBundle("sap.suite.ui.commons");Fe.InteropCompleted=false;yt(ht(Me));s.addStyleClass(`sapFactsheetUtiThingType${ke.replace(/\s/g,"")}`);if(He.TypeName.String){s.setTitle(He.TypeName.String)}else if(He.TypeName.Path){s.bindProperty("title",{path:He.TypeName.Path})}if(He.ImageUrl&&He.ImageUrl.String){s.setIcon(He.ImageUrl.String)}else if(He.ImageUrl&&He.ImageUrl.Path){s.bindProperty("icon",{path:He.ImageUrl.Path})}else if(He.TypeImageUrl&&He.TypeImageUrl.String){s.setIcon(He.TypeImageUrl.String)}else if(He.TypeImageUrl&&He.TypeImageUrl.Path){s.bindProperty("icon",{path:He.TypeImageUrl.Path})}if(He.Title.Value.String){s.setName(He.Title.Value.String)}else{s.bindProperty("name",at(He.Title.Value,He.Title.EdmType,_e).BindingInfo)}if(He.Description&&He.Description.Value){if(He.Description.Value.String){s.setDescription(He.Description.Value.String)}else{s.bindProperty("description",at(He.Description.Value,He.Description.EdmType,_e).BindingInfo)}}for(Ce in Ae[_e]){if(Ae[_e].hasOwnProperty(Ce)){if(Ce.search("com.sap.vocabularies.UI.v1.DataPoint")!==-1){ve=Ae[_e][Ce];if(ve){s.addKpi(mt(Ne,ve,_e,Be));f+=1}}if(f>=3){break}}}for(let e=0;e<Re.length;++e){if(Re[e]["com.sap.vocabularies.UI.v1.IsSummary"]){E=Re[e];break}}if(E){F=15;for(let e=0;e<E.Facets.length;++e){V=E.Facets[e].Target.AnnotationPath.substring(E.Facets[e].Target.AnnotationPath.lastIndexOf("@")+1);h=E.Facets[e].Target.AnnotationPath;h=h.substring(0,h.lastIndexOf("@")-1);E.Facets[e].NavPath=h;L=Xe(ke,h,Me);E.Facets[e].NavEntitySet=L;if(L){D=L}else{D=ke}E.Facets[e].EntitySet=D;k=je(L,Me);if(k){B=k}else{B=_e}E.Facets[e].EntityType=B;G=[];if(Ae[B][V].length){G=Ae[B][V]}else if(Ae[B][V].Data.length){G=Ae[B][V].Data}E.Facets[e].Content=G;for(let e=0;e<G.length;++e){z=lt(G[e]);if(z==="High"){r+=1}else if(z==="Medium"){c+=1}}}if(r>=F){r=F;c=0}else if(r+c>F){c=F-r;if(c<0){c=0}}if(jQuery.device.is.phone){c=0}j=F-r-c;Z=new se({title:We.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT")});Oe=[];Oe.push(Z);Oe[0].bLoaded=false;Oe[0].bProcessed=false;Oe[0].bIsTable=false;Q=[];J=c+r;for(let e=0;e<E.Facets.length;++e){X=ot(Ne,E.Facets[e].EntitySet,E.Facets[e].Content,{High:r,Medium:c,Low:0},null,Z).addStyleClass("sapFactsheetUtiTilePadding");if(e>0){X.addStyleClass("sapFactsheetUtiPaddingTop")}if(E.Facets[e].NavPath){X.bindElement(`${Be}/${E.Facets[e].NavPath}`)}K=gt(E.Facets[e].Content);r-=K.High;c-=K.Medium;if(K.High>0&&r+K.High>0||K.Medium>0&&c+K.Medium>0){Q.push(X);if(e>0){if(j>0){--j}else if(c>0){--c}else if(r>0){--r}}}if(r<1&&c<1){break}}if(r<0){r=0}if(c<0){c=0}l=new y({content:Q,width:"100%"});q=ut();Y=1;if(J>3&&J<=9){q=ut(2);Y=2}else if(J>9){q=ut(3);Y=3}Z.setContent(l);Z.setRowSpan(Y);if(jQuery.device.is.phone){Z.setHeightType(Ie.Auto)}else{Z.setHeight(q)}Z.addStyleClass("sapFactsheetUtiGeneralInformationOverviewFacet");Z.attachPress({facets:E},function(e,t){let a;let n;let i;s.removeAllFacetContent();const l=new S;l.setDescription($e());l.setTitle(We.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT"));l.addStyleClass("sapFactsheetUtiGeneralInformationUtg");if(t.facets.Facets.length>1){a="L6 M12 S12"}else{a="L12 M12 S12"}Oe[0].Links=[];const o=new y({width:"100%"});for(let e=0;e<t.facets.Facets.length;++e){if(e%2===0){n=new oe({hSpacing:1,vSpacing:1,defaultSpan:a})}i=pt(Ne,ke,t.facets.Facets[e],Be,this);i.addStyleClass("sapFactsheetUtiGeneralInformationUtgContent");if(e===0&&t.facets.Facets.length>1&&i.getTitle().trim()===""){i.setTitle(We.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT"))}n.addContent(i);if(e%2!==0){o.addContent(n)}}Oe[0].bLoaded=true;Oe[0].bProcessed=false;Oe[0].bIsTable=false;rt(0);if(d%2!==0){o.addContent(n)}l.setContent(o);s.addFacetContent(l);s.navigateToDetail()});s.addFacet(Z)}function Ke(e){return function(t){let a;let n;let i;let l;let o;let r;let c;let f;let d;let u;let g;let m;let h;let T;function b(e){let t;let a;let n;let i;const s=JSON.parse(e.getParameters().data);if(s.Action.name==="DETAIL_REQUEST"&&s.Action.instance){t=s.Action.instance;if(o.oData.results){r=`/results/${t.split(".")[1]}`}h=f.TypeName.String.substring(0,17);n=parseFloat(ut(.7))*16;i=parseFloat(ut(1.5))*16;a={SAPVB:{version:"2.0","xmlns:VB":"VB",Windows:{Remove:{name:"Detail1"},Set:{name:"Detail1",Window:{id:"Detail1",type:"callout",refParent:"Main",refScene:"",offsetX:"16",offsetY:"-27",modal:"false",width:i,height:n,caption:h,"pos.bind":`${t}.GeoPosition`}}},Scenes:{Set:{name:"Details",Scene:{id:"Details",navControlVisible:"false"}}}}};this.load(a)}}function P(t){let a;let i;let s;if(!u){u=nt(f.Title,e.navigationType,Me,e.facet);u.setModel(o);u.bindElement(r);g=nt(f.Description,e.navigationType,Me,e.facet);g.setModel(o);g.bindElement(r);for(a in n.Address){if(a==="label"){c=nt({Value:n.Address[a]},e.navigationType,Me,e.facet);c.setModel(o);c.bindElement(r);break}}s=7;if(jQuery.device.is.tablet&&jQuery.device.is.landscape){s=4}else if(jQuery.device.is.tablet&&jQuery.device.is.portrait){s=5}else if(jQuery.device.is.phone&&jQuery.device.is.landscape){s=2}else if(jQuery.device.is.phone&&jQuery.device.is.portrait){s=3}m=new y({width:"100%"}).setModel(Ne);if(e.navigationPath){i=Xe(e.entitySet,e.navigationPath,Me);m.addContent(ot(Ne,i,d,{High:s},null,e.facet));m.setModel(o).bindElement(r)}else{m.addContent(ot(Ne,e.entitySet,d,{High:s},null,e.facet)).setModel(o).bindElement(r)}}else{u.bindElement(r);if(g){g.bindElement(r)}if(c){c.bindElement(r)}if(m){m.bindElement(r)}}const l=`${parseFloat(ut(1.5))*16*.95}px`;if(u){u.placeAt(t.getParameter("contentarea").id);u.addStyleClass("sapFactsheetUtiGeoPopupHead");if(jQuery.device.is.phone){u.addStyleClass("sapFactsheetUtiGeoPopupHeadFontPhone")}u.setWidth(l)}if(g){g.placeAt(t.getParameter("contentarea").id);g.addStyleClass("sapFactsheetUtiGeoPopupDescr");if(jQuery.device.is.phone){g.addStyleClass("sapFactsheetUtiGeoPopupDescrFontPhone")}g.setWidth(l)}if(c){c.placeAt(t.getParameter("contentarea").id);c.addStyleClass("sapFactsheetUtiGeoPopupText");c.setWidth(l)}if(m&&m.getContent()[0]&&m.getContent()[0].getContent&&m.getContent()[0].getContent().length>0){m.placeAt(t.getParameter("contentarea").id);m.addStyleClass("sapFactsheetUtiGeoPopupText");m.setWidth(l)}if(Oe.indexOf(e.facet)>=0){Oe[Oe.indexOf(e.facet)].bLoaded=true;Oe[Oe.indexOf(e.facet)].bProcessed=false;Oe[Oe.indexOf(e.facet)].bIsTable=false}rt(Oe.indexOf(e.facet))}function I(e){if(u){u.destroy();u=undefined}if(g){g.destroy();g=undefined}if(c){c.destroy();c=undefined}if(m){m.destroy();m=undefined}jQuery(e.getParameter("contentarea").id).empty()}function C(e){return function(t){let a;let r;let c;c=t.ProjectJSON;c=c.indexOf("{")?c.substr(c.indexOf("{")):c;const f=JSON.parse(c);f.SAPVB.Scenes.Set.SceneGeo.initialStartPosition=i;f.SAPVB.Scenes.Set.SceneGeo.initialZoom=12;f.SAPVB.Actions.Set.Action.push({id:"200",name:"TAP_ON_MAP",refEvent:"Click",refScene:"MainScene",refVO:"Map"});if(l){f.SAPVB.Data=l.Data}for(let e=0;e<f.SAPVB.Scenes.Set.SceneGeo.VO.length;++e){if(f.SAPVB.Scenes.Set.SceneGeo.VO[e].datasource==="Spots"){if(f.SAPVB.Scenes.Set.SceneGeo.VO[e].scale&&f.SAPVB.Scenes.Set.SceneGeo.VO[e].scale.split(";").length!==3){f.SAPVB.Scenes.Set.SceneGeo.VO[e].scale="1.0;1.0;1.0";break}}}e.facet.getContent().attachSubmit(()=>{if(jQuery.device.is.tablet||jQuery.device.is.phone){e.facet.firePress()}});e.facet.getContent().load(f);e.facet.attachPress("",()=>{const t=[];const i=[];let l;if(!a){a=new re({width:"100%",height:"100%",plugin:false,config:null});a.addStyleClass("sapFactsheetUtiGeoPopup")}f.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.move="false";f.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.zoom="false";f.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.pitch="false";f.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.yaw="false";f.SAPVB.Scenes.Set.SceneGeo.SuppressedNavControlVisibility="false";a.load(f);if(e.cardinality==="*"){for(let e=0;e<o.oData.results.length;++e){t.push(o.oData.results[e][n.Longitude.Path]);i.push(o.oData.results[e][n.Latitude.Path])}}a.attachSubmit(b);a.attachOpenWindow(P);a.attachCloseWindow(I);r=new S({content:a,title:e.facetContent.Label.String,description:$e()});s.removeAllFacetContent();s.addFacetContent(r);s.navigateToDetail();s.attachAfterNavigate(t,e=>{if(e.getParameters().getParameters().toId.indexOf("-detail-page")!==-1){if(jQuery.device.is.phone){l="300px"}else{l=`${Math.floor(jQuery(`#${e.getParameters().getParameters().toId}-cont`).height()-128)}px`}a.setHeight(l);if(t.length>1){a.zoomToGeoPosition(t,i)}}})})}}function v(e){return function(){s.removeFacet(e)}}if(e.cardinality==="*"&&t.results&&t.results.length&&t.results.length!==0||e.cardinality==="1"&&t){o=new p;if(e.cardinality==="*"){if(t.results&&t.results.length){o.setData(t)}}else{o.setData({result:t});r="/result"}a=new ie("/sap/opu/odata/sap/VBI_APPL_DEF_SRV",false);n=Ae[e.navigationType]["com.sap.vocabularies.UI.v1.GeoLocation"];f=Ae[e.navigationType]["com.sap.vocabularies.UI.v1.HeaderInfo"];d=Ae[e.navigationType]["com.sap.vocabularies.UI.v1.Identification"];if(n.Longitude&&n.Latitude){l={Data:{Set:{N:[{name:"Spots",E:[]}]}}};if(e.cardinality==="1"){if(n.Longitude.Path&&n.Latitude.Path){i=`${t[n.Longitude.Path]};${t[n.Latitude.Path]};0`}l.Data.Set.N[0].E.push({A:i,I:"pin_blue.png"})}else{for(let e=0;e<t.results.length;++e){if(n.Longitude.Path&&n.Latitude.Path){i=`${t.results[e][n.Longitude.Path]};${t.results[e][n.Latitude.Path]};0`}l.Data.Set.N[0].E.push({A:i,I:"pin_blue.png"})}if(t.results.length!==0){i=`${t.results[0][n.Longitude.Path]};${t.results[0][n.Latitude.Path]};0`}}}T=parseInt(t.__count,10);if(Number(T)){e.facet.setQuantity(T)}a.read("VBIApplicationSet('ZFACTSHEETS')","","",false,C(e),v(e.facet))}else{e.facet.setQuantity(undefined);e.facet.addStyleClass("sapFactsheetUtiEmptyTile");e.facet.setHeightType(jQuery.device.is.phone?Ie.Auto:Ie.S);e.facet.setContent(undefined);e.facet.setTitle(undefined)}}}function Je(e){return function(t){let a="";let l;let o;let r;let c;let f;let d;let g;let h;let T;let b;let S;let P;let C;let v;let w;let x;let E;let U;let A;let O;let F;let V;let L;let D;let N;let k;let B;let M;let _;l=new p;if(e.facetContent.Target&&e.facetContent.Target.AnnotationPath&&e.facetContent.Target.AnnotationPath.split("#")[1]&&Ae[e.navigationType][`com.sap.vocabularies.UI.v1.Badge#${e.facetContent.Target.AnnotationPath.split("#")[1]}`]){o=Ae[e.navigationType][`com.sap.vocabularies.UI.v1.Badge#${e.facetContent.Target.AnnotationPath.split("#")[1]}`]}else{o=Ae[e.navigationType]["com.sap.vocabularies.UI.v1.Badge"]}if(e.cardinality==="*"){if(t.results&&t.results.length){D=e.facetContent.Target.AnnotationPath;we=D.substring(D.lastIndexOf("@")+1);if(we==="com.sap.vocabularies.UI.v1.Chart"){N=Ae[e.navigationType]["com.sap.vocabularies.UI.v1.Chart"];k=Ae.propertyExtensions[e.navigationType];B=[];for(let e=0;e<N.Dimensions.length;++e){B.push({axis:1,name:k[N.Dimensions[e].PropertyPath]["http://www.sap.com/Protocols/SAPData"].label,value:`{${N.Dimensions[e].PropertyPath}}`})}M=[];for(let e=0;e<N.Measures.length;++e){M.push({name:k[N.Measures[e].PropertyPath]["http://www.sap.com/Protocols/SAPData"].label,value:`{${N.Measures[e].PropertyPath}}`})}_=new i({dimensions:B,measures:M,data:{path:"/results"}});g=dt(N.ChartType.EnumMember,N.Title,N.Description,_);g.setModel(l);e.facet.setHeightType(jQuery.device.is.phone?Ie.Auto:Ie.XL)}else{g=new y({width:"100%"}).addStyleClass("sapFactsheetUtiVLayoutPadding");for(let i=0;i<t.results.length;++i){f=(new ce).addStyleClass("sapFactsheetUtiHLayoutPadding");r=nt(o.Title,e.navigationType,Me,e.facet);if(r.setWrapping){r.setWrapping(false)}n.byId(`${s.getId()}-master-page`).addDelegate({onAfterShow:function(e){return function(){let t;const a=e.getParent().getDomRef().clientWidth;t=a;if(e.getContent()[0]){t-=e.getContent()[0].getDomRef().clientWidth;if(a<e.getContent()[0].getDomRef().clientWidth){e.getContent()[0].getDomRef().setAttribute("style",`width:${a}px`);return}}if(e.getContent()[1]){t-=e.getContent()[1].getDomRef().clientWidth}if(t<10){t=0}if(e.getContent()[2]){e.getContent()[2].getDomRef().setAttribute("style",`width:${t}px`)}}}(f)});l=new p;l.setData({result:t.results[i]});r.setModel(l);r.bindElement("/result");d=false;if(t.results[i][o.Title.Value.Path]){d=true}if(o.Title.Value.Apply){for(let e=0;e<o.Title.Value.Apply.Parameters.length;++e){if(o.Title.Value.Apply.Parameters[e].Type==="Path"){if(t.results[i][o.Title.Value.Apply.Parameters[e].Value]){d=true;break}}}}a="";if(d){f.addContent(r);if(o.MainInfo&&(o.MainInfo.EdmType&&o.MainInfo.EdmType==="Edm.Decimal"||o.MainInfo.Value&&o.MainInfo.Value.Apply&&o.MainInfo.Value.Apply.Parameters[0]&&o.MainInfo.Value.Apply.Parameters[0].EdmType&&o.MainInfo.Value.Apply.Parameters[0].EdmType==="Edm.Decimal")){a="comma"}else if(o.MainInfo&&o.MainInfo.Value.Path&&t.results[i][o.MainInfo.Value.Path]){a="dash"}else if(o.MainInfo&&o.MainInfo.Value.Apply){for(let e=0;e<o.MainInfo.Value.Apply.Parameters.length;++e){if(o.MainInfo.Value.Apply.Parameters[e].Type==="Path"){if(t.results[i][o.MainInfo.Value.Apply.Parameters[e].Value]){a="dash";break}}}}if(a==="dash"){f.addContent(new I({content:'<span class="sapFactsheetUtiSeparatorPadding sapMText"> &ndash; </span>'}))}if(a==="comma"){f.addContent(new m({text:", "}).addStyleClass("sapFactsheetUtiSeparatorPaddingForDecimal"))}}if(o.MainInfo){c=nt(o.MainInfo,e.navigationType,Me,e.facet);if(c.setWrapping){c.setWrapping(false)}c.setModel(l);c.bindElement("/result");f.addContent(c)}g.addContent(f)}}h=parseInt(t.__count,10);if(Number(h)){e.facet.setQuantity(h)}e.facet.setContent(g);e.facet.attachPress({facet:e.facetContent},function(t,a){s.removeAllFacetContent();Oe[Oe.indexOf(e.facet)].Links=[];const n=pt(Ne,e.entitySet,a.facet,e.bindingPath,this);n.setDescription($e());s.addFacetContent(n);if(Oe.indexOf(e.facet)>=0){Oe[Oe.indexOf(e.facet)].bLoaded=false;Oe[Oe.indexOf(e.facet)].bProcessed=false;Oe[Oe.indexOf(e.facet)].bIsTable=true}rt(Oe.indexOf(e.facet));s.navigateToDetail()})}else{e.facet.setQuantity(0);e.facet.addStyleClass("sapFactsheetUtiEmptyTile");e.facet.setHeightType(jQuery.device.is.phone?Ie.Auto:Ie.S)}if(Oe.indexOf(e.facet)>=0){Oe[Oe.indexOf(e.facet)].bLoaded=true;Oe[Oe.indexOf(e.facet)].bProcessed=false;Oe[Oe.indexOf(e.facet)].bIsTable=false}rt(Oe.indexOf(e.facet))}else{l.setData({result:t});for(V in t){if(t.hasOwnProperty(V)){if(V!=="__metadata"){if(typeof t[V]==="string"&&t[V]){if(parseInt(t[V],10)!==0){L=true;break}}else if(typeof t[V]==="number"&&parseInt(t[V],10)!==0){L=true;break}}}}if(L){T=new y;b=Ae.propertyExtensions?Ae.propertyExtensions[e.navigationType]:[];S=(new ce).addStyleClass("sapFactsheetUtiHLayoutLabelValue");P=it(o.Title,{},b,true).addStyleClass("sapFactsheetUtiLabelMargin");r=nt(o.Title,e.navigationType,Me,e.facet);r.setModel(l);r.bindElement("/result");S.addContent(P);S.addContent(r);T.addContent(S);if(o.MainInfo){C=(new ce).addStyleClass("sapFactsheetUtiHLayoutLabelValue");v=it(o.MainInfo,{},b,true).addStyleClass("sapFactsheetUtiLabelMargin");c=nt(o.MainInfo,e.navigationType,Me,e.facet);c.setModel(l);c.bindElement("/result");C.addContent(v);C.addContent(c);T.addContent(C)}if(o.SecondaryInfo){w=(new ce).addStyleClass("sapFactsheetUtiHLayoutLabelValue");x=it(o.SecondaryInfo,{},b,true).addStyleClass("sapFactsheetUtiLabelMargin");E=nt(o.SecondaryInfo,e.navigationType,Me,e.facet);E.setModel(l);E.bindElement("/result");w.addContent(x);w.addContent(E);T.addContent(w)}if(o.TypeImageUrl||o.ImageUrl){if(o.ImageUrl){U=o.ImageUrl}else{U=o.TypeImageUrl}A=new ce;O="64px";if(jQuery.device.is.phone){O="48px"}if(U.String&&U.String.substr(0,11)==="sap-icon://"){F=new fe({size:O,width:O})}else{F=new u({width:O})}F.addStyleClass("sapFactsheetUtiRelIcon");if(U&&U.String){F.setSrc(U.String)}else if(U&&U.Path){F.bindProperty("src",U.Path)}A.addContent(F);A.addContent(T);e.facet.setContent(A)}else{e.facet.setContent(T)}e.facet.attachPress({facet:e.facetContent},function(t,a){s.removeAllFacetContent();Oe[Oe.indexOf(e.facet)].Links=[];const n=pt(Ne,e.entitySet,a.facet,e.bindingPath,this);n.setDescription($e());s.addFacetContent(n);if(Oe.indexOf(e.facet)>=0){Oe[Oe.indexOf(e.facet)].bLoaded=true;Oe[Oe.indexOf(e.facet)].bProcessed=false;Oe[Oe.indexOf(e.facet)].bIsTable=false}rt(Oe.indexOf(e.facet));s.navigateToDetail()})}else{e.facet.addStyleClass("sapFactsheetUtiEmptyTile");e.facet.setHeightType(jQuery.device.is.phone?Ie.Auto:Ie.S)}if(Oe.indexOf(e.facet)>=0){Oe[Oe.indexOf(e.facet)].bLoaded=true;Oe[Oe.indexOf(e.facet)].bProcessed=false;Oe[Oe.indexOf(e.facet)].bIsTable=false}rt(Oe.indexOf(e.facet))}}}function et(e){return function(){s.removeFacet(e.facet)}}function tt(e){return function(t){let a;let n;let i;const l=Ae[e.navigationType]["com.sap.vocabularies.UI.v1.MediaResource"];if(e.cardinality==="*"){if(t.results&&t.results.length){a=(new ce).addStyleClass("sapFactsheetUtiPictureViewerOverview");for(let e=0;e<t.results.length;++e){a.addContent(new u({src:t.results[e][l.Thumbnail.Url.Path],height:"85px"}));if(e===3){break}}n=parseInt(t.__count,10);if(Number(n)){e.facet.setQuantity(n)}e.facet.setContent(a);e.facet.attachPress({facet:e.facetContent,data:t},(e,t)=>{let a;let n;s.removeAllFacetContent();i=new S;if(t.facet.Label&&t.facet.Label.String){i.setTitle(t.facet.Label.String)}i.setDescription($e());if(jQuery.device.is.phone){a="350px"}else{a="550px"}const o=new pe({height:a});for(let e=0;e<t.data.results.length;++e){n=new u({src:t.data.results[e][l.Url.Path]});if(jQuery.device.is.phone){n.addStyleClass("sapFactsheetUtiCarouselMaxImageHeightPhone")}else{n.addStyleClass("sapFactsheetUtiCarouselMaxImageHeight")}o.addPage(n)}i.setContent(o);s.addFacetContent(i);s.navigateToDetail()})}else{e.facet.setQuantity(0);e.facet.addStyleClass("sapFactsheetUtiEmptyTile");e.facet.setHeightType(jQuery.device.is.phone?Ie.Auto:Ie.S)}}}}function st(e,t){let a=[];const n={};let i;let s;let l;let o;let r;let c;let f;function p(e,t){let a="";if(e){if(e.Path){return t[e.Path]}else if(e.String){return e.String}else if(e.Apply.Name==="odata.concat"){for(let n=0;n<e.Apply.Parameters.length;++n){if(e.Apply.Parameters[n].Type==="Path"){a=a+t[e.Apply.Parameters[n].Value]}else if(e.Apply.Parameters[n].Type==="String"){a=a+e.Apply.Parameters[n].Value}}return a}}}n.iCount=0;n.aContacts=[];for(let t=0;t<e.__batchResponses.length;++t){if(!e.__batchResponses[t].data){continue}a=e.__batchResponses[t].data.results;if(!a){a=[];a.push(e.__batchResponses[t].data)}if(a.length>0){i=Ae[a[0].__metadata.type]["com.sap.vocabularies.Communication.v1.Contact"];if(i){for(let e=0;e<a.length;++e){s=l=o="";if(i.tel){for(let t=0;t<i.tel.length;++t){if(i.tel[t].type&&i.tel[t].type.EnumMember){r=p(i.tel[t].uri,a[e]);switch(i.tel[t].type.EnumMember){case"com.sap.vocabularies.Communication.v1.PhoneType/voice":s=r?r.replace("tel:",""):"";s=s?s.replace(";ext=",""):"";break;case"com.sap.vocabularies.Communication.v1.PhoneType/cell":l=r?r.replace("tel:",""):"";l=l?l.replace(";ext=",""):"";break;case"com.sap.vocabularies.Communication.v1.PhoneType/fax":o=r?r.replace("tel:",""):"";o=o?o.replace(";ext=",""):"";break}}}}f=i.email&&i.email.address?i.email.address:"";c=p(i.photo,a[e]);n.iCount+=1;n.aContacts.push({fn:p(i.fn,a[e]),title:p(i.title,a[e]),org:p(i.org,a[e]),phone:s,mobile:l,fax:o,photo:c,email:p(f,a[e]),sEntity:a[0].__metadata.type,bExistsPhoto:!!c,bUseIcon:!c,sOrder:n.iCount})}}}}if(t){n.aContacts.sort((e,a)=>e[t]>a[t]?1:-1)}return n}function ct(){return function(e){let t;let i;let l;let o;let r;let c;const f=st(e,"sOrder");const d=new oe({defaultSpan:"L6 M6 S12",hSpacing:0,vSpacing:0}).addStyleClass("sapFactsheetUtiContactsGrid");for(let e=0;e<f.aContacts.length&&e<4;++e){o=new y;if(f.aContacts[e].photo){r=new u({height:"55px",src:f.aContacts[e].photo})}else{r=new fe({size:"50px",src:de.getIconURI("person-placeholder")}).addStyleClass("sapFactsheetUtiRelIcon")}o.addContent(r);o.addStyleClass("sapFactsheetUtiContactsImage");l=new y({content:[new m({text:f.aContacts[e].fn}).addStyleClass("sapFactsheetUtiTextName"),new m({text:f.aContacts[e].title}).addStyleClass("sapFactsheetUtiTextValue")]});i=new ce({content:[o,l]}).addStyleClass("sapFactsheetUtiContactsBox");d.addContent(i)}Z=n.byId(s.data("contactFacetId"));Z.setQuantity(f.iCount);if(t>0){Z.setContent(d);if(t<=2){c=Ie.M}else{c=Ie.L}Z.attachPress(()=>{const e=[];let t;Ne.clearBatch();for(let a=0;a<Ae[_e]["com.sap.vocabularies.UI.v1.Contacts"].length;++a){h=Ae[_e]["com.sap.vocabularies.UI.v1.Contacts"][a].AnnotationPath;h=h.substring(0,h.lastIndexOf("@")-1);if(h!==""){t=`${Be}/${h}`}else{t=Be}e.push(Ne.createBatchOperation(t,"GET"))}Ne.addBatchReadOperations(e);Ne.submitBatch(e=>{const t=jQuery.sap.resources({url:`${jQuery.sap.getModulePath("sap.ushell.components.container.")}/resources/resources.properties`,language:a.getLanguage()});const n=st(e,"sEntity");const i=new p;i.setData(n);const l=new v({type:w.Inactive,unread:false,cells:[new y({content:[new u({src:"{photo}",width:"74px",visible:"{bExistsPhoto}"}),new fe({size:"76px",src:de.getIconURI("person-placeholder"),visible:"{bUseIcon}"}).addStyleClass("sapFactsheetUtiRelIcon")]}),new y({content:[new m({text:"{fn}"}).addStyleClass("sapFactsheetUtiContactsName"),new T({text:"{title}"}),new T({text:"{org}"})]}),new g({text:"{phone}",href:"tel:{phone}"}),new g({text:"{mobile}",href:"tel:{mobile}"}),new g({text:"{fax}",href:"tel:{fax}"}),new g({text:"{email}",href:"mailto:{email}"})]});const o=new x({threshold:2,inset:false,showUnread:true,scrollToLoad:true,columns:[new C({hAlign:Ue.Center,width:"12%",header:new m({text:""})}),new C({hAlign:Ue.Begin,header:new m({text:t.getText("USHELL_FACTSHEET_NAME")})}),new C({hAlign:Ue.Begin,width:"12%",header:new m({text:t.getText("USHELL_FACTSHEET_PHONE")}),minScreenWidth:"Tablet",demandPopin:true}),new C({hAlign:Ue.Begin,width:"12%",header:new m({text:ue.i18n.getText("mobile")}),minScreenWidth:"Tablet",demandPopin:true}),new C({hAlign:Ue.Begin,width:"12%",header:new m({text:ue.i18n.getText("fax")}),minScreenWidth:"Tablet",demandPopin:true}),new C({hAlign:Ue.Begin,width:"26%",header:new m({text:t.getText("USHELL_FACTSHEET_EMAIL")}),minScreenWidth:"Tablet",demandPopin:true})],items:{path:"/aContacts",template:l}});const r=new M({sortItems:[new N({key:"fn",text:t.getText("USHELL_FACTSHEET_NAME")}),new N({key:"phone",text:t.getText("USHELL_FACTSHEET_PHONE")}),new N({key:"mobile",text:ue.i18n.getText("mobile")}),new N({key:"fax",text:ue.i18n.getText("fax")}),new N({key:"email",text:t.getText("USHELL_FACTSHEET_EMAIL")})],confirm:function(e){const t=[];const a=e.getParameters();const n=o.getBinding("items");if(a.sortItem){t.push(new _(a.sortItem.getKey(),a.sortDescending));n.sort(t)}}});o.setHeaderToolbar(new H({content:[new T,new R,new $({icon:"sap-icon://drop-down-list",press:function(){r.open()}})]}));o.setModel(i);const c=new S({title:Z.getTitle(),description:$e(),content:o});s.removeAllFacetContent();s.addFacetContent(c);s.navigateToDetail()})})}else{c=Ie.S;Z.addStyleClass("sapFactsheetUtiEmptyTile");Z.setQuantity(0)}Z.setHeightType(jQuery.device.is.phone?Ie.Auto:c)}}for(let e=0;e<Re.length;++e){if(Re[e]["com.sap.vocabularies.UI.v1.Map"]){h=Re[e].Target.AnnotationPath;h=h.substring(0,h.lastIndexOf("@")-1);ae="1";te=_e;if(h){te=Ze(h,_e,Me);ae=qe(ke,h,Me)}xe="100%";if(jQuery.device.is.phone){xe="150px"}ee=new re({width:"100%",height:xe,plugin:false,config:null});Z=new se({title:Re[e].Label.String.trim(),heightType:jQuery.device.is.phone?Ie.Auto:Ie.L,content:ee});Oe.push(Z);Oe[Oe.length-1].bLoaded=false;Oe[Oe.length-1].bProcessed=false;Oe[Oe.length-1].bIsTable=false;b={cardinality:ae,navigationPath:h,facet:Z,facetContent:Re[e],navigationType:te,metadata:Me,bindingPath:Be,entitySet:ke};if(ae==="*"){ne=["$inlinecount=allpages","$top=1000"]}else{ne=[]}Ne.read(`${Be}/${h}`,"",ne,true,Ke(b));s.addFacet(Z)}else if(Re[e].Target){h=Re[e].Target.AnnotationPath;h=h.substring(0,h.lastIndexOf("@")-1);we=Re[e].Target.AnnotationPath.substring(Re[e].Target.AnnotationPath.lastIndexOf("@")+1);if(h){te=Ze(h,_e,Me);Z=new se({title:Re[e].Label.String.trim(),heightType:jQuery.device.is.phone?Ie.Auto:Ie.M});ae=qe(ke,h,Me);if(ae!==0){b={cardinality:ae,navigationPath:h,facet:Z,facetContent:Re[e],navigationType:te,metadata:Me,bindingPath:Be,entitySet:ke};if(Re[e]["com.sap.vocabularies.UI.v1.Gallery"]){if(ae==="*"){ne=["$inlinecount=allpages"]}else{ne=[]}Ne.read(`${Be}/${h}`,"",ne,true,tt(b))}else{Oe.push(Z);Oe[Oe.length-1].bLoaded=false;Oe[Oe.length-1].bProcessed=false;Oe[Oe.length-1].bIsTable=false;if(ae==="*"){ne=["$inlinecount=allpages","$top=3"]}else{ne=[]}Ne.read(`${Be}/${h}`,"",ne,true,Je(b),et(b))}s.addFacet(Z)}}else if(we==="com.sap.vocabularies.UI.v1.Contacts"){Z=new se({title:Re[e].Label.String.trim(),heightType:jQuery.device.is.phone?Ie.Auto:Ie.M});s.data("contactFacetId",Z.sId);b={facet:Z};Ne.clearBatch();for(let e=0;e<Ae[_e][we].length;++e){h=Ae[_e][we][e].AnnotationPath;h=h.substring(0,h.lastIndexOf("@")-1);if(h!==""){ae=qe(ke,h,Me);if(ae==="*"){W=`${Be}/${h}?$top=4&$inlinecount=allpages`}else{W=`${Be}/${h}`}}else{W=Be}o.push(Ne.createBatchOperation(W,"GET"))}Ne.addBatchReadOperations(o);Ne.submitBatch(ct(b));s.addFacet(Z)}}}const ft=new ge;function Tt(){const t={};let a;let n;let i;let l;let o;let r;let c;ft.setAppData({title:s.getTitle(),subtitle:`${s.getName()} - ${s.getDescription()}`});ft.setEnabled(true);const f=sap.ushell.Container.getService("URLParsing");const p=f.getShellHash(window.location.href);const d=f.parseShellHash(p);const u=d.semanticObject;A=new me({showCancelButton:true,placement:Pe.Top});P=Qe(e,Ne);const h=P.split(",");for(let e=0;e<h.length;++e){h[e]=h[e].replace("='","=","g");if(h[e].lastIndexOf("'")===h[e].length-1){h[e]=h[e].slice(0,-1)}}for(i in Ae[_e]){if(Ae[_e].hasOwnProperty(i)){if(i.indexOf("com.sap.vocabularies.Common.v1.SecondaryKey")===0){l=Ae[_e][i];for(let e=0;e<l.length;++e){o=this.getBoundContext().getProperty(l[e].PropertyPath);if(o){h.push(`${l[e].PropertyPath}=${o}`)}}}}}for(let e=0;e<h.length;++e){a=h[e].substr(0,h[e].indexOf("="));n=h[e].substr(h[e].indexOf("=")+1,h[e].length);t[decodeURIComponent(a)]=decodeURIComponent(n)}U=sap.ushell.Container.getService("CrossApplicationNavigation").getSemanticObjectLinks(u,t);U.done(e=>{let t;let a;for(let n=0;n<e.length;++n){a=e[n].intent;if(a.indexOf(Le)<0&&a.indexOf("-analyzeKPIDetails~")<0&&a.indexOf("-analyzeSBKPIDetails~")<0&&a.indexOf("-NavigateToMaintainCusProj~")<0&&a.indexOf("CostCenter-manageCostCenter~")<0&&a.indexOf("AccountingDocument-analyzeDocumentJournal~")<0&&a.indexOf("AccountingDocument-analyzeGLLineItem~")<0&&a.indexOf("ControllingDocument-analyzeCostCenters~")<0&&a.indexOf("ControllingDocument-analyzeInternalOrders~")<0&&a.indexOf("ControllingDocument-analyzeMarketSegment~")<0&&a.indexOf("ControllingDocument-analyzeProfitCentersActuals~")<0&&a.indexOf("ControllingDocument-analyzeProfitLoss~")<0&&a.indexOf("ControllingDocument-analyzeProjectsActuals~")<0&&a.indexOf("PurchaseOrder-create~")<0){t=sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal({target:{shellHash:a}});A.addItem(new g({text:e[n].text,href:t}));s.setTransactionsVisible(true)}}});s.attachTransactionsButtonPress(e=>{A.openBy(e.getParameter("caller"))});this.detachChange(Tt);he.setWindowTitle(`${s.getTitle().trim()}: ${s.getName().trim()} (${s.getDescription().trim()})`);s.setActionsVisible(true);le=new $({text:We.getText("UNIFIEDTHINGINSPECTOR_FOOTER_BUTTON_EMAIL_LINK"),icon:"sap-icon://email",press:function(){Se.triggerEmail("",s.getName(),window.location.href)}});O=new ye({placement:Pe.Top});r=e.substr(0,e.lastIndexOf("/")+1);for(const e in Ne.oData){if(Ne.oData.hasOwnProperty(e)){r=r+e;c=e.substring(e.indexOf("(")+1,e.indexOf(")"));break}}O.addButton(new Te({jamData:{businessObject:{appContext:"CB",odataServicePath:e.substr(0,e.lastIndexOf("/")+1),collection:ke,key:c,name:s.getTitle(),ui_url:window.location.href}}}));O.addButton(new be({jamData:{object:{id:window.location.href,display:new m({text:s.getTitle()}),share:""},externalObject:{appContext:"CB",odataServicePath:e.substr(0,e.lastIndexOf("/")+1),collection:ke,key:c,name:s.getTitle()}}}));O.addButton(ft);O.addButton(le);s.attachActionsButtonPress(e=>{O.openBy(e.getParameter("caller"))});Oe[0].bLoaded=true;Oe[0].bProcessed=false;rt(0)}s.getElementBinding().attachChange(Tt);s.attachBackAction(()=>{history.back()});s.addDelegate({onAfterRendering:function(){s._adjustFacetLayout()}});return s}return function(t,a){try{Ne=Tt(t,a,new e({configurationVisible:false}))}catch(e){throw e}return Ne}},true);
//# sourceMappingURL=ThingInspector.js.map