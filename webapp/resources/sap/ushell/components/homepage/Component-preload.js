//@ui5-bundle sap/ushell/components/homepage/Component-preload.js
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/homepage/ActionMode", ["sap/base/Log","sap/m/Button","sap/m/library","sap/m/Popover","sap/m/Text","sap/ui/core/Element","sap/ui/core/EventBus","sap/ushell/components/HomepageManager","sap/ushell/resources","sap/ushell/utils/WindowUtils","sap/ushell/EventHub"],(e,t,o,n,i,s,a,l,r,c,d)=>{"use strict";const p=o.PlacementType;function g(){this.oEventBus=a.getInstance();this.init=function(e){this.oModel=e}}g.prototype._activate=function(){this.oModel.setProperty("/tileActionModeActive",true);this.aOrigHiddenGroupsIds=this.getHomepageManager().getCurrentHiddenGroupIds(this.oModel);const e=s.getElementById("dashboardGroups");e.addLinksToUnselectedGroups();const t=s.getElementById("ActionModeBtn");if(t){t.setText(r.i18n.getText("exitEditMode"));if(t.setSelected){t.setSelected(true)}}this.oEventBus.publish("launchpad","actionModeActive")};g.prototype._deactivate=function(){this.oModel.setProperty("/tileActionModeActive",false);this.oEventBus.publish("launchpad","actionModeInactive",this.aOrigHiddenGroupsIds);const e=s.getElementById("TileActions");if(e!==undefined){e.destroy()}const t=s.getElementById("ActionModeBtn");if(t){t.setText(r.i18n.getText("activateEditMode"));if(t.setSelected){t.setSelected(false)}}};g.prototype.toggleActionMode=function(e,t,o){o=o||[];const n=o.filter(e=>e.getVisible());const i={group:n[e.getProperty("/topGroupInViewPortIndex")]};if(e.getProperty("/tileActionModeActive")){this._deactivate();const e=document.querySelector(".sapUshellTileContainerHeader[tabindex='0']");if(e){const t=e.closest("sapUshellTileContainer");if(t){i.restoreLastFocusedTileContainerById=t.getAttribute("id")}}}else{this._activate()}setTimeout(()=>{this.oEventBus.publish("launchpad","scrollToGroup",i)},0)};g.prototype.activateGroupEditMode=function(e){const t=e.getDomRef().getElementsByClassName("sapUshellTileContainerContent");for(let e=0;e<t.length;e++){t[e].classList.add("sapUshellTileContainerEditMode")}};g.prototype.getHomepageManager=function(){if(!this.oHomepageManager){this.oHomepageManager=l.prototype.getInstance()}return this.oHomepageManager};g.prototype._filterActions=function(e,t){const o=t.getModel();const n=t.getParent().getBindingContext().getPath();if(o.getProperty(`${n}/isGroupLocked`)){["tileSettingsBtn","linkSettingsBtn","ConvertToTile","ConvertToLink","moveTile_action"].forEach(t=>{e=e.filter(e=>e.id!==t)})}if(this.getHomepageManager().getPersonalizableGroups().length<2){e=e.filter(e=>e.id!=="moveTile_action")}return e};g.prototype._openActionsMenu=function(o){const n=o.getSource();const i=n.getBindingContext().getObject().object;let l=this.getHomepageManager().getTileActions(i);l=this._filterActions(l,n);const r=document.getElementsByClassName("sapUshellTileActionLayerDivSelected");for(let e=0;e<r.length;e++){r[e].classList.remove("sapUshellTileActionLayerDivSelected")}const c=n.getDomRef().getElementsByClassName("sapUshellTileActionLayerDiv");for(let e=0;e<c.length;e++){c[e].classList.add("sapUshellTileActionLayerDivSelected")}const d=[];l.forEach(o=>{if(!o.press&&!o.targetURL){e.warning(`Invalid Tile action discarded: ${JSON.stringify(o)}`);return}d.push(new t({text:o.text,icon:o.icon,press:this._handleActionPress.bind(this,o,n)}))});if(d.length===0){this._openNoActionsPopover(o);return}let g=n.getActionSheetIcon?n.getActionSheetIcon():undefined;if(!g){const e=s.getElementById(`${n.getId()}-action-more`);g=e||n}let u=s.getElementById("TileActions");if(!u){sap.ui.require(["sap/m/ActionSheet"],e=>{u=new e("TileActions",{placement:p.VerticalPreferedBottom,afterClose:function(){const e=document.getElementsByClassName("sapUshellTileActionLayerDivSelected");for(let t=0;t<e.length;t++){e[t].classList.remove("sapUshellTileActionLayerDivSelected")}const t=a.getInstance();t.publish("dashboard","actionSheetClose",n)}});this._openActionSheet(u,d,g)})}else{this._openActionSheet(u,d,g)}};g.prototype._openActionSheet=function(e,t=[],o){e.destroyButtons();t.forEach(t=>{e.addButton(t)});e.openBy(o)};g.prototype._openNoActionsPopover=function(e){const t=e.getSource();const o=new i({text:r.i18n.getText("tileHasNoActions")});new n({placement:p.Bottom,showHeader:false,ariaLabelledBy:o.getId(),content:o}).addStyleClass("sapUiContentPadding").openBy(t)};g.prototype._handleActionPress=function(e,t){if(e.press){e.press(t)}else if(e.targetURL){d.emit("UITracer.trace",{reason:"LaunchApp",source:"Tile",data:{targetUrl:e.targetURL}});if(e.targetURL.indexOf("#")===0){hasher.setHash(e.targetURL)}else{c.openURL(e.targetURL,"_blank")}}};return new g},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/homepage/Component", ["sap/ui/core/EventBus","sap/ui/core/mvc/View","sap/ui/core/UIComponent","sap/ushell/bootstrap/common/common.load.model","sap/ushell/components/HomepageManager","sap/ushell/components/SharedComponentUtils","sap/ushell/Config","sap/ushell/resources"],(e,o,s,t,a,n,i,r)=>{"use strict";return s.extend("sap.ushell.components.homepage.Component",{metadata:{manifest:"json",library:"sap.ushell",interfaces:["sap.ui.core.IAsyncContentCreation"]},init:function(){this.oModel=t.getModel();this.setModel(this.oModel);s.prototype.init.apply(this,arguments);this.rootControlLoaded().then(o=>{this.oDashboardView=o;const s={model:this.oModel,view:this.oDashboardView};this.oHomepageManager=new a("dashboardMgr",s);this.setModel(r.i18nModel,"i18n");e.getInstance().subscribe("sap.ushell.services.UsageAnalytics","usageAnalyticsStarted",()=>{sap.ui.require(["sap/ushell/components/homepage/FLPAnalytics"])});n.toggleUserActivityLog();n.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings");i.on("/core/home/homePageGroupDisplay").do(e=>{this.oHomepageManager.handleDisplayModeChange(e)});n.getEffectiveHomepageSetting("/core/home/sizeBehavior","/core/home/sizeBehaviorConfigurable");i.on("/core/home/sizeBehavior").do(e=>{const o=this.oHomepageManager.getModel();o.setProperty("/sizeBehavior",e)})})},createContent:function(){return o.create({viewName:"module:sap/ushell/components/homepage/DashboardContent.view"})},exit:function(){this.oHomepageManager.destroy()}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/homepage/DashboardContent.controller", ["sap/base/Log","sap/ui/core/Core","sap/ui/core/mvc/Controller","sap/ui/Device","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/thirdparty/jquery","sap/ushell/components/homepage/DashboardUIActions","sap/ushell/components/HomepageManager","sap/ushell/EventHub","sap/ushell/Layout","sap/ushell/resources","sap/ushell/utils"],(e,t,o,s,i,r,jQuery,n,a,l,u,d,p)=>{"use strict";return o.extend("sap.ushell.components.homepage.DashboardContent",{onInit:function(){const e=t.getEventBus();this.handleDashboardScroll=function(){window.setTimeout(this._handleDashboardScroll.bind(this),0)}.bind(this);e.subscribe("sap.ushell","appOpened",this._appOpenedHandler,this);e.subscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);e.subscribe("launchpad","actionModeInactive",this._handleGroupVisibilityChanges,this);e.subscribe("launchpad","switchTabBarItem",this._handleTabBarItemPressEventHandler,this);window.document.addEventListener("visibilitychange",p.handleTilesVisibility,false)},onExit:function(){const e=t.getEventBus();e.unsubscribe("sap.ushell","appOpened",this._appOpenedHandler,this);e.unsubscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);e.unsubscribe("launchpad","actionModeInactive",this._handleGroupVisibilityChanges,this);e.unsubscribe("launchpad","switchTabBarItem",this._handleTabBarItemPressEventHandler,this);window.document.removeEventListener("visibilitychange",p.handleTilesVisibility,false);if(this.oDashboardUIActionsModule){this.oDashboardUIActionsModule.destroy();delete this.oDashboardUIActionsModule}window.removeEventListener("resize",this._resizeHandler.bind(this))},onAfterRendering:function(){p.setPerformanceMark("FLP - dashboard after rendering");const e=a.prototype.getInstance();if(!e.getPreparedGroupModel()){e.loadPersonalizedGroups()}else{l.once("firstSegmentCompleteLoaded").do(e.handleFirstSegmentLoaded.bind(e))}const o=t.getEventBus();let i;let r;let n;let u;o.unsubscribe("launchpad","scrollToGroup",this._scrollToGroup,this);o.unsubscribe("launchpad","scrollToGroupByName",this._scrollToGroupByName,this);o.subscribe("launchpad","scrollToGroup",this._scrollToGroup,this);o.subscribe("launchpad","scrollToGroupByName",this._scrollToGroupByName,this);s.orientation.attachHandler(function(){const e=jQuery("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible");if(e.length){i=this.getView().getModel();r=i.getProperty("/topGroupInViewPortIndex");if(e.get(r)){n=t.byId(e.get(r).id);u=i.getProperty("/editTitle");this._publishAsync("launchpad","scrollToGroup",{group:n,isInEditTitle:u})}}},this);window.addEventListener("resize",this._resizeHandler.bind(this));this._updateTopGroupInModel()},_resizeHandler:function(){clearTimeout(this._resizeTimer);this._resizeTimer=setTimeout(this.resizeHandler.bind(this),300)},_dashboardDeleteTileHandler:function(e){const o=e.getSource().getBindingContext().getObject();t.getEventBus().publish("launchpad","deleteTile",{tileId:o.uuid,items:"tiles"},this)},dashboardTilePress:function(e){const o=e.getSource();if(!o){return}t.getEventBus().publish("launchpad","dashboardTileClick",{uuid:o.getUuid()});if(s.system.desktop){const e=sap.ushell.Container.getRendererInternal();const t=e.getRouter().getRoute("home");if(this._fnSetFocusOnLastVisitedTile){t.detachBeforeMatched(this._fnSetFocusOnLastVisitedTile)}this._fnSetFocusOnLastVisitedTile=this._setFocusOnLastVisitedTile.bind(this,o,t);t.attachBeforeMatched(this._fnSetFocusOnLastVisitedTile)}},_setFocusOnLastVisitedTile:function(e,t){sap.ui.require(["sap/ushell/components/ComponentKeysHandler"],o=>{o.getInstance().then(o=>{o.moveScrollDashboard(e.$());t.detachBeforeMatched(this._fnSetFocusOnLastVisitedTile);delete this._fnSetFocusOnLastVisitedTile})})},_updateTopGroupInModel:function(){const e=this.getView().getModel();const t=this._getIndexOfTopGroupInViewPort();const o=this._getModelGroupFromVisibleIndex(t);e.setProperty("/iSelectedGroup",o);e.setProperty("/topGroupInViewPortIndex",t)},_getIndexOfTopGroupInViewPort:function(){const e=this.getView().getDomRef();if(!e){return 0}const t=e.getElementsByTagName("section")[0];const o=jQuery(t).find(".sapUshellTileContainer").not(".sapUshellHidden");if(!o){return 0}for(let e=0;e<o.length;e++){const s=o[e].parentElement;if(t.scrollTop<=s.offsetTop+s.offsetHeight){return e}}return o.length?o.length-1:0},_handleDashboardScroll:function(){const e=this.getView();const t=e.getModel();const o=100;const i=t.getProperty("/homePageGroupDisplay");const r=i!=="tabs";const n=t.getProperty("/tileActionModeActive");function a(){p.handleTilesVisibility()}clearTimeout(this.timeoutId);this.timeoutId=setTimeout(a,o);if(!s.system.phone){e.oAnchorNavigationBar.closeOverflowPopup()}if(r||n){this._updateTopGroupInModel()}e.oAnchorNavigationBar.reArrangeNavigationBarElements()},_handleGroupDeletion:function(e){sap.ui.require(["sap/m/MessageBox"],o=>{const s=t.getEventBus();const i=e.getObject();const r=i.removable;const n=i.title;const a=i.groupId;const l=d.i18n;const u=o.Action;const p=r?u.DELETE:l.getText("ResetGroupBtn");sap.ushell.Container.getServiceAsync("MessageInternal").then(e=>{e.confirm(l.getText(r?"delete_group_msg":"reset_group_msg",[n]),e=>{if(e===p){s.publish("launchpad",r?"deleteGroup":"resetGroup",{groupId:a})}},l.getText(r?"delete_group":"reset_group"),[p,u.CANCEL])})})},_modelLoaded:function(){this.bModelInitialized=true;u.getInitPromise().then(()=>{this._initializeUIActions()})},_initializeUIActions:function(){if(!this.oDashboardUIActionsModule){this.oDashboardUIActionsModule=new n}this.oDashboardUIActionsModule.initializeUIActions(this)},resizeHandler:function(){p.recalculateBottomSpace();p.handleTilesVisibility();if(u&&jQuery("#dashboardGroups").is(":visible")&&this.bModelInitialized){u.reRenderGroupsLayout(null);this._initializeUIActions()}},_appOpenedHandler:function(e,t,o){const s=this.getView().getModel();const i=o.additionalInformation||"";const r=this.getOwnerComponent();const n=r.getMetadata().getComponentName();if(i.indexOf(n)===-1){p.setTilesNoVisibility()}const a=sap.ui.require("sap/ushell/components/homepage/ActionMode");if(s.getProperty("/tileActionModeActive")&&a){a.toggleActionMode(s,"Menu Item");if(s.getProperty("/homePageGroupDisplay")==="tabs"){this._deactivateActionModeInTabsState();this.getView().oAnchorNavigationBar.reArrangeNavigationBarElements()}}if(this.oDashboardUIActionsModule){this.oDashboardUIActionsModule.disableAllDashboardUiAction()}},_scrollToGroupByName:function(e,t,o){const s=this.getView().getModel().getProperty("/groups");const i=o.groupName;sap.ushell.Container.getServiceAsync("FlpLaunchPage").then(o=>{s.forEach(s=>{if(o.getGroupTitle(s.object)===i){this._scrollToGroup(e,t,{groupId:s.groupId})}})})},_scrollToGroup:function(t,o,i){const r=i.group?i.group.getGroupId():i.groupId;let n;if(this.oView.oDashboardGroupsBox.getGroups()){n=this.oView.oDashboardGroupsBox.getGroups().reduce((e,t)=>t&&t.getGroupId()===r?t:e,null)}const a=n&&n.getDomRef();if(!a){return e.warning("Could not scroll to group: Group is not rendered!")}const l=a.querySelector(".sapUshellTileContainerContent");if(!l){return e.warning("Could not scroll to group: Group Content is not rendered!")}const u=document.getElementById("dashboardGroups");const d=l.getBoundingClientRect();const c=u.getBoundingClientRect();if(d.top===c.top){u.parentElement.scrollTop=0}else{l.scrollIntoView()}const g=new Promise(e=>{if(s.system.desktop&&(i.restoreLastFocusedTile||i.groupChanged)){sap.ui.require(["sap/ushell/components/ComponentKeysHandler"],t=>{t.getInstance().then(e=>{let t=n.$();if(i.restoreLastFocusedTile){let o=false;if(i.restoreLastFocusedTileContainerById){t=jQuery(`#${i.restoreLastFocusedTileContainerById}`);o=true}e.goToLastVisitedTile(t,o)}else if(i.groupChanged){const o=t.find(".sapUshellTile, .sapMGTLineMode, .sapFCard").filter(":visible").eq(0);if(o.length){e.moveScrollDashboard(o)}}}).then(e)})}else{e()}});g.then(()=>{if(i.isInEditTitle){n.setEditMode(true)}p.handleTilesVisibility()});return g},_handleDrop:function(e,o){const s=u.getLayoutEngine();const i=s.layoutEndCallback();const r=!i.dstArea;const n=t.getEventBus();let a;let l;let d=jQuery.Deferred();const p=this.getView();const c=p.getModel();const g=c.getProperty("/homePageGroupDisplay")&&c.getProperty("/homePageGroupDisplay")==="tabs";const h=c.getProperty("/tileActionModeActive");let f=true;if(!i.tile){n.publish("launchpad","sortableStop");return null}u.getLayoutEngine()._toggleAnchorItemHighlighting(false);if(i.dstGroup){const e=i.dstGroup.getBindingContext();const t=e.getProperty(e.sPath).isGroupLocked;f=r&&t}const b=i.tile.getBindingContext().getObject().isLinkPersonalizationSupported;if(!i.tileMovedFlag||f||!b&&i.dstArea==="links"){n.publish("launchpad","sortableStop");return null}if(!h&&!g&&i.dstArea==="links"&&!i.dstGroupData.getLinks().length){n.publish("launchpad","sortableStop");return null}a=true;l=true;if(i.srcGroup!==i.dstGroup){a=l=false}else if(i.tile!==i.dstGroup.getTiles()[i.dstTileIndex]){l=false}const G=this._getTileUuid(i.tile);if(i.srcGroup&&i.srcGroup.removeAggregation&&i.srcArea){i.srcGroup.removeAggregation("tiles",i.tile,a)}const m=i.dstGroupData&&i.dstGroupData.insertAggregation&&i.dstArea===i.srcArea;if(m){i.tile.sParentAggregationName=i.dstArea;i.dstGroupData.insertAggregation(i.dstArea,i.tile,i.dstTileIndex,l);d=this._handleSameTypeDrop(i,G,m)}else if(r){d=this._handleShortDrop(i,G,m)}else{d=this._handleConvertDrop(i,m,o)}if(this.getView().getModel()){this.getView().getModel().setProperty("/draggedTileLinkPersonalizationSupported",true)}n.publish("launchpad","sortableStop");return d.promise()},_handleSameTypeDrop:function(e,o,s){const i=t.getEventBus();const r=jQuery.Deferred();e.tile._getBindingContext().oModel.setProperty(`${e.tile._getBindingContext().sPath}/draggedInTabBarToSourceGroup`,false);i.publish("launchpad","movetile",{sTileId:o,sToItems:e.dstArea?e.dstArea:"tiles",sFromItems:e.srcArea?e.srcArea:"tiles",sTileType:e.dstArea?e.dstArea.substr(0,e.dstArea.length-1):undefined,toGroupId:e.dstGroupData.getGroupId?e.dstGroupData.getGroupId():e.dstGroupData.groupId,toIndex:e.dstTileIndex,longDrop:s,callBack:function(){r.resolve()}});return r.promise()},_handleShortDrop:function(e,o,s){const i=t.getEventBus();const r=jQuery.Deferred();i.publish("launchpad","movetile",{sTileId:o,sToItems:e.srcArea||"tiles",sFromItems:e.srcArea||"tiles",sTileType:e.srcArea?e.srcArea.substr(0,e.srcArea.length-1):undefined,toGroupId:e.dstGroupData.getGroupId?e.dstGroupData.getGroupId():e.dstGroupData.groupId,toIndex:e.dstTileIndex,longDrop:s,callBack:function(){r.resolve()}});return r.promise()},_handleConvertDrop:function(e,o,s){const i=t.getEventBus();const r=jQuery.Deferred();i.publish("launchpad","convertTile",{toGroupId:e.dstGroupData.getGroupId?e.dstGroupData.getGroupId():e.dstGroupData.groupId,toIndex:e.dstTileIndex,tile:t.byId(s.id),srcGroupId:e.srcGroup.getGroupId?e.srcGroup.getGroupId():e.srcGroup.groupId,longDrop:o,callBack:function(){r.resolve()}});return r.promise()},_getTileUuid:function(e){if(e.getUuid){return e.getUuid()}const t=e.getBindingContext().getObject();if(t.getParent){return t.getParent().getUuid()}return t.uuid},_handleDrag:function(e,t){const o=u.getLayoutEngine().layoutEndCallback();const s=o.tile.getBindingContext().getObject();const i=this.getView().getModel();if(i){i.setProperty("/draggedTileLinkPersonalizationSupported",s.isLinkPersonalizationSupported)}},_handleTabBarItemPressEventHandler:function(e,t,o){const s=this.getView();const i=s.getModel();const r=i.getProperty("/groups");const n=o.iGroupIndex;for(let e=0;e<r.length;e++){i.setProperty(`/groups/${e}/isGroupSelected`,false)}i.setProperty(`/groups/${n}/isGroupSelected`,true);this._handleTabBarItemPress(e,t,n)},_handleTabBarItemPress:function(e,o,s,i){const r=this.getView();let n;if(i){n=i.getParameter("group").getIndex()}else{n=s}t.getEventBus().publish("launchpad","tabSelected",{iSelectedGroup:n});const a=this._getVisibleGroupIndex(n);r.oDashboardGroupsBox.removeLinksFromUnselectedGroups();r.oDashboardGroupsBox.getBinding("groups").filter([r.oFilterSelectedGroup]);r.oAnchorNavigationBar.setSelectedItemIndex(a);r.oAnchorNavigationBar.reArrangeNavigationBarElements();setTimeout(()=>{p.handleTilesVisibility()},0)},_getVisibleGroupIndex:function(e){const t=this.getView().getModel().getProperty("/groups");let o=0;for(let s=0;s<e;s++){if(!t[s].isGroupVisible||!t[s].visibilityModes[0]){o++}}return e-o},_getModelGroupFromVisibleIndex:function(e){const t=this.getView().getModel().getProperty("/groups");let o=0;for(let s=0;s<t.length;s++){if(t[s].isGroupVisible&&t[s].visibilityModes[0]){o++;if(o>e){return s}}}return 0},_handleAnchorItemPress:function(e){const t=this.getView();const o=t.getModel();const n=o.getProperty("/groups");if(s.system.phone&&e.getParameter("manualPress")){e.oSource.openOverflowPopup()}for(let e=0;e<n.length;e++){if(o.getProperty(`/groups/${e}/isGroupSelected`)===true){o.setProperty(`/groups/${e}/isGroupSelected`,false)}}o.setProperty(`/groups/${e.getParameter("group").getIndex()}/isGroupSelected`,true);o.setProperty("/iSelectedGroup",e.getParameter("group").getIndex());if(o.getProperty("/homePageGroupDisplay")&&o.getProperty("/homePageGroupDisplay")==="tabs"&&!o.getProperty("/tileActionModeActive")){this._handleTabBarItemPress(undefined,undefined,undefined,e)}else{if(!o.getProperty("/tileActionModeActive")){t.oDashboardGroupsBox.getBinding("groups").filter([new i("isGroupVisible",r.EQ,true)])}else{t.oDashboardGroupsBox.getBinding("groups").filter([])}this._scrollToGroup("launchpad","scrollToGroup",{group:e.getParameter("group"),groupChanged:true,focus:e.getParameter("action")==="sapenter"})}},_addGroupHandler:function(e){const o=e.getSource().getBindingContext().getPath();const s=o.split("/");let i=window.parseInt(s[s.length-1],10);if(e.getSource().sParentAggregationName==="afterContent"){i++}t.getEventBus().publish("launchpad","createGroupAt",{title:"",location:i,isRendered:true})},_publishAsync:function(e,o,s){const i=t.getEventBus();window.setTimeout(i.publish.bind(i,e,o,s),1)},_changeGroupVisibility:function(e){const t=e.getPath();const o=e.getModel();const s=o.getProperty(`${t}/isGroupVisible`);if(o.getProperty(`${t}/isDefaultGroup`)||o.getProperty(`${t}/isGroupLocked`)){return}o.setProperty(`${t}/isGroupVisible`,!s)},_handleGroupVisibilityChanges:function(e,t,o){const s=this.getView().getModel();const i=a.prototype.getInstance();const r=i.getCurrentHiddenGroupIds(s);const n=r.length===o.length;let l=n;let u;r.some((e,t)=>{if(!l){return true}l=o&&Array.prototype.indexOf.call(o,e)!==-1;return!l});if(!l){sap.ushell.Container.getServiceAsync("FlpLaunchPage").then(e=>{u=e.hideGroups(r);u.done(()=>{s.updateBindings("groups")});u.fail(()=>{sap.ushell.Container.getServiceAsync("MessageInternal").then(e=>{e.error(d.i18n.getText("hideGroups_error"))})})})}window.setTimeout(()=>{p.recalculateBottomSpace()},0)},_deactivateActionModeInTabsState:function(){const e=this.getView();const t=e.getModel();let o;const s=t.getProperty("/groups");for(o=0;o<s.length;o++){t.setProperty(`/groups/${o}/isGroupSelected`,false)}let i=e.oAnchorNavigationBar.getSelectedItemIndex();let r=0;if(!this._isGroupVisible(i)){for(o=0;o<s.length;o++){if(!this._isGroupVisible(o)){r++}else{i=o;break}}}else{for(o=0;o<i;o++){if(!this._isGroupVisible(o)){r++}}}const n=i-r;e.oAnchorNavigationBar.setSelectedItemIndex(n);e.oAnchorNavigationBar.adjustItemSelection();t.setProperty(`/groups/${i}/isGroupSelected`,true);e.oDashboardGroupsBox.removeLinksFromAllGroups();const a=t.getProperty("/homePageGroupDisplay");if(a&&a==="tabs"){e.oDashboardGroupsBox.getBinding("groups").filter([e.oFilterSelectedGroup]);const t=e.oDashboardGroupsBox.getGroups&&e.oDashboardGroupsBox.getGroups();const o=Array.isArray(t)&&t[0];if(o&&o.updateLinks){o.updateLinks()}}},_isGroupVisible:function(e){const t=this.getView().getModel().getProperty("/groups");return t[e].isGroupVisible&&t[e].visibilityModes[0]}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/homepage/DashboardContent.view", ["sap/m/library","sap/ui/core/library","sap/m/Page","sap/m/PageAccessibleLandmarkInfo","sap/ui/core/Component","sap/ui/core/Core","sap/ui/core/mvc/View","sap/ui/Device","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/thirdparty/jquery","sap/ushell/components/homepage/DashboardGroupsBox","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/ui/launchpad/AnchorItem","sap/ushell/ui/launchpad/AnchorNavigationBar","sap/ushell/utils","sap/ushell/components/homepage/DashboardContent.controller","sap/ushell/components/homepage/ActionMode"],(e,t,o,i,n,s,a,r,l,h,jQuery,d,c,u,p,g,f,b,m,A)=>{"use strict";const B=t.AccessibleLandmarkRole;return a.extend("sap.ushell.components.homepage.DashboardContent",{createContent:function(e){this.oModel=this.getController().getOwnerComponent().getModel();const t=this.oModel.getProperty("/personalization");const a=this.oModel.getProperty("/enableTileActionsIcon");this.isCombi=r.system.combi;this.isTouch=this.isCombi?false:r.system.phone||r.system.tablet;this.parentComponent=n.getOwnerComponentFor(this);this.addStyleClass("sapUshellDashboardView");this.oRenderer=sap.ushell.Container.getRendererInternal("fiori2");this.bIsHomeIntentRootIntent=b.isFlpHomeIntent(this.oRenderer.getShellConfig().rootIntent);s.getEventBus().subscribe("launchpad","actionModeInactive",this._handleEditModeChange,this);s.getEventBus().subscribe("launchpad","actionModeActive",this._handleEditModeChange,this);s.getEventBus().subscribe("launchpad","contentRefresh",this._onDashboardShown,this);s.getEventBus().subscribe("launchpad","dashboardModelContentLoaded",this._onDashboardShown,this);this.oDoable=u.once("CoreResourcesComplementLoaded").do(()=>{this.oAnchorNavigationBar.setOverflowEnabled(true);if(t||a){A.init(this.oModel)}if(t){this._createFooter();this._createActionModeButton()}});this.oFilterSelectedGroup=new l("isGroupSelected",h.EQ,true);this.oRenderer.getRouter().getRoute("home").attachMatched(this._onHomeNavigation,this);this.oAnchorNavigationBar=this._getAnchorNavigationBar(e);this.oAnchorNavigationBar.setModel(this.oModel);this.oRenderer.setNavigationBar(this.oAnchorNavigationBar);const c=new d;this.oDashboardGroupsBox=c.createGroupsBox(e,this.oModel);this.oPage=new o("sapUshellDashboardPage",{showHeader:false,landmarkInfo:new i({contentRole:B.Region,contentLabel:p.i18n.getText("Dashboard.Page.Content.AriaLabel"),rootRole:B.None}),floatingFooter:true,content:[this.oDashboardGroupsBox]});this.oPage.addEventDelegate({onAfterRendering:function(){const t=this.getDomRef();const o=t.getElementsByTagName("section");jQuery(o[0]).off("scrollstop",e.handleDashboardScroll);jQuery(o[0]).on("scrollstop",e.handleDashboardScroll)}.bind(this)});return this.oPage},getAnchorItemTemplate:function(){const e=this;const t=new g({index:"{index}",title:"{title}",groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",helpId:"{helpId}",selected:false,isGroupRendered:"{isRendered}",visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(e,t,o){if(!o[e?1:0]){return false}return t||e}},locked:"{isGroupLocked}",isGroupDisabled:{parts:["isGroupLocked","/isInDrag","/homePageGroupDisplay"],formatter:function(e,t,o){return e&&t&&o==="tabs"}},press:function(t){e.oAnchorNavigationBar.handleAnchorItemPress(t)}});t.attachBrowserEvent("focus",function(){this.setNavigationBarItemsVisibility()}.bind(this.oAnchorNavigationBar));return t},_getAnchorNavigationBar:function(e){const t=new f("anchorNavigationBar",{selectedItemIndex:"{/topGroupInViewPortIndex}",itemPress:[function(e){this._handleAnchorItemPress(e)},e],overflowEnabled:false});this._oAnchorNavigationBarDelegatePromise=new Promise((e,o)=>{if(r.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler"],o=>{o.getInstance().then(o=>{t.addEventDelegate({onBeforeFastNavigationFocus:function(e){if(jQuery(".sapUshellAnchorItem").is(":visible")){e.preventDefault();o.goToSelectedAnchorNavigationItem()}},onsapenter:function(e){e.srcControl.getDomRef().click()},onsapspace:function(e){e.srcControl.getDomRef().click()},onsaptabnext:function(){if(!s.byId("sapUshellAnchorBarOverflowButton").getVisible()){o.goToLastVisitedTile()}}});e()})})}else{e()}});t.addStyleClass("sapContrastPlus");return t},_actionModeButtonPress:function(){this.oDashboardGroupsBox.getBinding("groups").filter([]);const e=this.oDashboardGroupsBox.getGroups();A.toggleActionMode(this.oModel,"Menu Item",e);this._updateAnchorNavigationBarVisibility();if(this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){if(this.oModel.getProperty("/tileActionModeActive")){const e=this.oModel.getProperty("/groups");let t;for(let o=0;o<e.length;o++){if(e[o].isGroupSelected){t=o;break}}this.getController()._scrollToGroup("launchpad","scrollToGroup",{group:{getGroupId:function(){return e[t].groupId}},groupChanged:false,focus:true})}else{this.getController()._deactivateActionModeInTabsState()}}},_createActionModeButton:function(){const e={id:"ActionModeBtn",text:p.i18n.getText("activateEditMode"),icon:"sap-icon://edit",press:this._actionModeButtonPress.bind(this)};const t=this.oRenderer.getShellConfig().moveEditHomePageActionToShellHeader;if(t){this._createActionModeButtonInHeader(e)}else{this._createActionModeButtonInUserMenu(e)}},_createActionModeButtonInHeader:function(e){let t="sap/ushell/ui/shell/ShellHeadItem";if(c.last("/core/shellBar/enabled")){t="sap/ushell/gen/ui5/webcomponents-fiori/dist/ShellBarItem";if(e.press){e.click=e.press;delete e.press}}sap.ui.require([t],t=>{this.oTileActionsButton=new t(e);if(c.last("/core/extension/enableHelp")){this.oTileActionsButton.addStyleClass("help-id-ActionModeBtn")}if(!this.bIsHomeIntentRootIntent){this.oRenderer.showHeaderEndItem(this.oTileActionsButton.getId(),true)}else{this.oRenderer.showHeaderEndItem(this.oTileActionsButton.getId(),false,["home"])}})},_createActionModeButtonInUserMenu:function(e){const t={controlType:"sap.ushell.ui.launchpad.ActionItem",oControlProperties:e,bIsVisible:true,aStates:["home"]};if(!this.bIsHomeIntentRootIntent){t.aStates=null;t.bCurrentState=true}this.oRenderer.addUserAction(t).done(e=>{this.oTileActionsButton=e;if(c.last("/core/extension/enableHelp")){this.oTileActionsButton.addStyleClass("help-id-ActionModeBtn")}})},_handleEditModeChange:function(){if(this.oTileActionsButton){this.oTileActionsButton.toggleStyleClass("sapUshellActionItemActive")}},_createFooter:function(){sap.ui.require(["sap/m/Bar","sap/m/Button","sap/m/ToolbarSpacer"],(t,o,i)=>{this.oPage.setFooter(new t("sapUshellDashboardFooter",{visible:"{/tileActionModeActive}",contentRight:[new i,new o("sapUshellDashboardFooterDoneBtn",{type:e.ButtonType.Emphasized,text:p.i18n.getText("closeEditMode"),tooltip:p.i18n.getText("exitEditMode"),press:this._actionModeButtonPress.bind(this)})]}))})},_onDashboardShown:function(){const e=this.oRenderer&&this.oRenderer.getCurrentCoreView()==="home";if(e){if(!r.system.phone){this.oRenderer.showRightFloatingContainer(false)}this._updateAnchorNavigationBarVisibility();this.getController().resizeHandler();b.refreshTiles();if(r.system.desktop){const e=document.activeElement?document.activeElement.tagName:"";if(e!=="INPUT"&&e!=="TEXTAREA"){sap.ui.require(["sap/ushell/components/ComponentKeysHandler"],e=>{e.getInstance().then(e=>{e.goToLastVisitedTile()})})}}}},_onHomeNavigation:function(){this._onDashboardShown();if(!this.bIsHomeIntentRootIntent){if(this.oRenderer.getShellConfig().moveEditHomePageActionToShellHeader){this.oRenderer.showHeaderEndItem(this.oTileActionsButton.getId(),true)}else{this.oRenderer.showActionButton(this.oTileActionsButton.getId(),true)}}if(u.last("firstSegmentCompleteLoaded")){u.emit("CloseFesrRecord",Date.now())}},_updateAnchorNavigationBarVisibility:function(){const e=this.oAnchorNavigationBar.getVisible();const t=this.getModel().getObject("/tileActionModeActive");const o=this.getModel().getProperty("/groups").filter(e=>{if(t){return e.isGroupVisible&&e.visibilityModes[1]}return e.isGroupVisible&&e.visibilityModes[0]});const i=o.length>1;this.oAnchorNavigationBar.setVisible(i);if(i&&!e){const e=this.getModel().getProperty("/groups");const t=this.getModel().getProperty("/iSelectedGroup");for(let i=0;i<o.length;i++){if(o[i].getGroupId&&o[i].getGroupId()===e[t].groupId){this.oAnchorNavigationBar.setSelectedItemIndex(i);break}}}},getControllerName:function(){return"sap.ushell.components.homepage.DashboardContent"},exit:function(){a.prototype.exit.apply(this,arguments);if(this.oAnchorNavigationBar){this.oAnchorNavigationBar.destroy()}if(this.oTileActionsButton){this.oTileActionsButton.destroy()}if(this.oDoable){this.oDoable.off()}if(this.oPage){this.oPage.destroy()}s.getEventBus().unsubscribe("launchpad","actionModeInactive",this._handleEditModeChange,this);s.getEventBus().unsubscribe("launchpad","actionModeActive",this._handleEditModeChange,this);s.getEventBus().unsubscribe("launchpad","contentRefresh",this._onDashboardShown,this);s.getEventBus().unsubscribe("launchpad","dashboardModelContentLoaded",this._onDashboardShown,this)}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/homepage/DashboardGroupsBox", ["sap/base/Log","sap/base/util/isEmptyObject","sap/base/util/restricted/_zipObject","sap/m/Button","sap/m/GenericTile","sap/ui/base/Object","sap/ui/core/Component","sap/ui/core/Core","sap/ui/core/InvisibleMessage","sap/ui/core/library","sap/ui/Device","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/performance/Measurement","sap/ushell/library","sap/ushell/components/homepage/ActionMode","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/Layout","sap/ushell/resources","sap/ushell/ui/launchpad/DashboardGroupsContainer","sap/ushell/ui/launchpad/GroupHeaderActions","sap/ushell/ui/launchpad/LinkTileWrapper","sap/ushell/ui/launchpad/PlusTile","sap/ushell/ui/launchpad/Tile","sap/ushell/ui/launchpad/TileContainer","sap/ushell/utils","sap/ushell/utils/UrlParsing"],(e,t,i,n,o,s,r,a,l,u,c,d,p,h,g,f,b,A,G,C,m,v,y,T,P,I,B,M)=>{"use strict";const _=u.InvisibleMessageMode;const w=s.extend("sap.ushell.components.homepage.DashboardGroupsBox",{metadata:{publicMethods:["createGroupsBox"]},constructor:function(){if(w.fnDashboardGroupsBoxGetter){return w.fnDashboardGroupsBoxGetter()}w.fnDashboardGroupsBoxGetter=function(e){return function(){return e}}(this.getInterface());this.oController=undefined;this.oGroupsContainer=undefined;this._oInvisibleMessageInstance=l.getInstance();a.getEventBus().subscribe("launchpad","actionModeActive",this._handleActionModeChange,this);a.getEventBus().subscribe("launchpad","actionModeInactive",this._handleActionModeChange,this);a.getEventBus().subscribe("launchpad","GroupHeaderVisibility",this._updateGroupHeaderVisibility,this);a.getEventBus().subscribe("launchpad","AddTileContainerContent",this._addTileContainersContent,this);return undefined},destroy:function(){a.getEventBus().unsubscribe("launchpad","actionModeActive",this._handleActionModeChange,this);a.getEventBus().unsubscribe("launchpad","actionModeInactive",this._handleActionModeChange,this);a.getEventBus().unsubscribe("launchpad","GroupHeaderVisibility",this._updateGroupHeaderVisibility,this);a.getEventBus().unsubscribe("launchpad","AddTileContainerContent",this._addTileContainersContent,this);if(this.oGroupsContainer){this.oGroupsContainer.destroy()}w.fnDashboardGroupsBoxGetter=undefined;if(this._oHost){this._oHost.destroy()}},calculateFilter:function(){const e=[];let t;const i=this.oModel.getProperty("/homePageGroupDisplay");const n=this.oModel.getProperty("/tileActionModeActive");if(!n){if(i&&i==="tabs"){t=new d("isGroupSelected",p.EQ,true)}else{t=new d("isGroupVisible",p.EQ,true)}e.push(t)}return e},zipPromiseAll:function(e,t){return Promise.all(t).then(t=>i(e,t))},loadCardModuleIfNeeded:function(){if(b.last("/core/home/featuredGroup/enable")){return a.loadLibrary("sap.ui.integration",{async:true}).then(()=>new Promise(e=>{sap.ui.require(["sap/ui/integration/Host","sap/ui/integration/widgets/Card"],(t,i)=>{this.Card=i;this.Host=t;this._oHost=new t({action:this._onCardAction.bind(this)});e()})}))}return Promise.resolve()},createGroupsBox:function(e,i){this.oController=e;const n=this;function o(e){let t;let i;if(e&&(t=e.getDomRef())){i=t.querySelector(".sapUshellPlusTile");if(i){return i}}return null}function s(e){const t=o(e.currentGroup);const i=o(e.endGroup);const s=e.tiles[e.tiles.length-2]===e.item||e.endGroup.getTiles().length===0;if(s){n._hidePlusTile(i)}else{n._showPlusTile(i)}if(e.currentGroup!==e.endGroup){n._showPlusTile(t)}}function r(){G.getLayoutEngine().setExcludedControl(T);G.getLayoutEngine().setReorderTilesCallback.call(G.layoutEngine,s)}function l(){setTimeout(()=>{if(!G.isInited){G.init({getGroups:this.getGroups.bind(this),getAllGroups:n.getAllGroupsFromModel.bind(n),isTabBarActive:n.isTabBarActive.bind(n)}).then(r);c.media.attachHandler(function(){if(!this.bIsDestroyed){G.reRenderGroupsLayout(null)}},this,c.media.RANGESETS.SAP_STANDARD);const i=this.getDomRef();e.getView().sDashboardGroupsWrapperId=!t(i)&&i.parentNode?i.parentNode.id:""}A.emit("CenterViewPointContentRendered");a.getEventBus().publish("launchpad","contentRendered");a.getEventBus().publish("launchpad","contentRefresh");if(this.getBinding("groups")){this.getBinding("groups").filter(n.calculateFilter())}},0)}this.isTabBarActive=function(){return this.oModel.getProperty("/homePageGroupDisplay")==="tabs"};this.oModel=i;const u=this.calculateFilter();this.oGroupsContainer=new m("dashboardGroups",{displayMode:"{/homePageGroupDisplay}",afterRendering:l});this.zipPromiseAll(["launchpadService",""],[sap.ushell.Container.getServiceAsync("FlpLaunchPage"),n.loadCardModuleIfNeeded()]).then(t=>{this.isLinkPersonalizationSupported=t.launchpadService.isLinkPersonalizationSupported();this.oGroupsContainer.bindAggregation("groups",{filters:u,path:"/groups",factory:function(){return n._createTileContainer(e,i)}})});if(c.system.desktop){this.oGroupsContainer.addEventDelegate({onBeforeFastNavigationFocus:function(e){e.preventDefault();sap.ui.require(["sap/ushell/components/ComponentKeysHandler"],e=>{e.getInstance().then(e=>{e.goToLastVisitedTile()})})},onsaptabnext:function(e){const t=document.getElementById("sapUshellFloatingContainerWrapper");const i=t&&!t.classList.contains("sapUshellShellHidden");if(i&&e.originalEvent.srcElement.id!==""){e.preventDefault();a.getEventBus().publish("launchpad","shellFloatingContainerIsAccessible")}}})}return this.oGroupsContainer},getAllGroupsFromModel:function(){return this.oModel.getProperty("/groups")},_createTileContainer:function(e){const t=this;const i=new d("isTileIntentSupported",p.EQ,true);const n=new I({headerText:"{title}",showEmptyLinksArea:{parts:["/tileActionModeActive","links/length","isGroupLocked","/isInDrag","/homePageGroupDisplay"],formatter:function(e,t,i,n,o){if(t){return true}else if(i){return false}return e||n&&o==="tabs"}},showMobileActions:{parts:["/tileActionModeActive"],formatter:function(e){return e&&!this.getDefaultGroup()}},showIcon:{parts:["/isInDrag","/tileActionModeActive"],formatter:function(e,t){return this.getIsGroupLocked()&&(e||t)}},deluminate:{parts:["/isInDrag"],formatter:function(e){return this.getIsGroupLocked()&&e}},transformationError:{parts:["/isInDrag","/draggedTileLinkPersonalizationSupported"],formatter:function(e,t){return e&&!t}},showBackground:"{/tileActionModeActive}",tooltip:"{title}",tileActionModeActive:"{/tileActionModeActive}",enableHelp:b.last("/core/extension/enableHelp"),groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",isLastGroup:"{isLastGroup}",isGroupLocked:"{isGroupLocked}",isGroupSelected:"{isGroupSelected}",showHeader:true,showGroupHeader:"{showGroupHeader}",homePageGroupDisplay:"{/homePageGroupDisplay}",editMode:"{editMode}",supportLinkPersonalization:this.isLinkPersonalizationSupported,titleChange:function(e){a.getEventBus().publish("launchpad","changeGroupTitle",{groupId:e.getSource().getGroupId(),newTitle:e.getParameter("newTitle")})},showEmptyLinksAreaPlaceHolder:{parts:["links/length","/isInDrag","/homePageGroupDisplay"],formatter:function(e,t,i){return t&&i==="tabs"&&!e}},showPlaceholder:{parts:["/tileActionModeActive","tiles/length"],formatter:function(e){return e&&!this.getIsGroupLocked()}},visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(e,t,i){if(!i[e?1:0]){return false}return t||e}},hidden:{parts:["/tileActionModeActive","isGroupVisible"],formatter:function(e,t){return e&&!t}},links:this._getLinkTemplate(),tiles:{path:"tiles",factory:this._itemFactory.bind(this),filters:[i]},add:function(e){t._handleAddTileToGroup(e)}});return n},_getLinkTemplate:function(){const e=new d("isTileIntentSupported",p.EQ,true);if(!this.isLinkPersonalizationSupported){return{path:"links",templateShareable:true,template:new y({uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",tileCatalogIdStable:"{tileCatalogIdStable}",target:"{target}",isLocked:"{isLocked}",tileActionModeActive:"{/tileActionModeActive}",debugInfo:"{debugInfo}",tileViews:{path:"content",factory:function(e,t){return t.getObject()}},afterRendering:function(e){const t=this.getDomRef().getElementsByTagName("a");for(let e=0;e<t.length;e++){t[e].setAttribute("tabindex",-1)}}}),filters:[e]}}return{path:"links",factory:function(e,t){let i=t.getObject().content[0];if(i&&i.bIsDestroyed){i=i.clone();t.getModel().setProperty(`${t.getPath()}/content/0`,i)}return i},filters:[e]}},_itemFactory:function(e,t){const i=t.getProperty(t.sPath);let n;let o;let s;let r;if(i){if(i.isCard){n=i&&i.content;o=n&&n.length&&n[0];if(o&&o["sap.card"]){r=o}else if(i.manifest){r={"sap.flp":i.manifest&&i.manifest["sap.flp"],"sap.card":{type:"List"}}}else{return this._createErrorTile()}s=new this.Card;s.setHost(this._oHost).setManifest(r)}else{s=this._createTile()}i.controlId=s&&s.getId&&s.getId()}return s},_onCardAction:async function(t){if(t.getParameter("type")!=="Navigation"){return}const i=t.getParameter("parameters");const n=M.parseShellHash(i.url);if(n){t.preventDefault();this._performIntentBasedNavigation(n)}else if(i.openUI){if(i.openUI==="RecentActivities"||i.openUI==="FrequentActivities"){const e=i.openUI==="RecentActivities"?"recentActivityFilter":"frequentlyUsedFilter";const[t]=await B.requireAsync(["sap/ushell/ui/QuickAccess"]);t.openQuickAccessDialog(e)}else{e.error(`Request to open unknown User Interface: '${i.openUI}'`)}t.preventDefault()}else if(i.url===""){t.preventDefault()}else if(b.last("/core/shell/enableRecentActivity")&&b.last("/core/shell/enableRecentActivityLogging")){const e={title:t.getParameter("parameters").title,url:i.url,appType:g.AppType.URL,appId:i.url};sap.ushell.Container.getRendererInternal("fiori2").logRecentActivity(e)}},_performIntentBasedNavigation:function(e){return sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(t=>{t.toExternal({target:{semanticObject:e.semanticObject,action:e.action},params:e.params,appSpecificRoute:e.appSpecificRoute})})},_createErrorTile:function(){return new P({tileViews:{path:"content",factory:function(){return new o({state:"Failed"})}}})},_createTile:function(){const e=new P({long:"{long}",isDraggedInTabBarToSourceGroup:"{draggedInTabBarToSourceGroup}",uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",tileCatalogIdStable:"{tileCatalogIdStable}",isCustomTile:"{isCustomTile}",target:"{target}",isLocked:"{isLocked}",navigationMode:"{navigationMode}",tileActionModeActive:"{/tileActionModeActive}",showActionsIcon:"{showActionsIcon}",rgba:"{rgba}",debugInfo:"{debugInfo}",tileViews:{path:"content",factory:function(e,t){return t.getObject()}},coverDivPress:function(e){if(!e.oSource.getBindingContext().getObject().tileIsBeingMoved&&f){f._openActionsMenu(e)}},showActions:function(e){if(f){f._openActionsMenu(e)}},deletePress:[this.oController._dashboardDeleteTileHandler,this.oController],press:[this.oController.dashboardTilePress,this.oController]});const t=a.byId("viewPortContainer");e.addEventDelegate({onclick:function(){h.start("FLP:DashboardGroupsBox.onclick","Click on tile","FLP");h.start("FLP:OpenApplicationonClick","Open Application","FLP");function e(){h.end("FLP:DashboardGroupsBox.onclick");t.detachAfterNavigate(e)}t.attachAfterNavigate(e)}});return e},_updateGroupHeaderVisibility:function(){const e=this.oGroupsContainer.getGroups();const t=this.oModel.getProperty("/tileActionModeActive");const i=this.oController.getView().oAnchorNavigationBar.getVisible();let n;let o=0;for(let t=0;t<e.length;t++){if(e[t].getProperty("visible")){o++;if(n===undefined){n=t}else{e[t].setShowGroupHeader(true)}}}if(n!==undefined){const s=t||o===1&&!i;e[n].setShowGroupHeader(s)}},_handleActionModeChange:function(){const e=this.oModel.getProperty("/tileActionModeActive");if(e){this._addTileContainersContent()}else{G.reRenderGroupsLayout(null)}},_addTileContainersContent:function(){const e=this.oGroupsContainer.getGroups();for(let t=0;t<e.length;t++){const i=e[t];if(!i.getBeforeContent().length){i.addBeforeContent(new n({icon:"sap-icon://add",text:C.i18n.getText("add_group_at"),visible:"{= !${isGroupLocked} && !${isDefaultGroup} && ${/tileActionModeActive}}",enabled:"{= !${/editTitle}}",press:[this._handleAddGroupButtonPress.bind(this)]}).addStyleClass("sapUshellAddGroupButton"))}if(!i.getAfterContent().length){i.addAfterContent(new n({icon:"sap-icon://add",text:C.i18n.getText("add_group_at"),visible:"{= ${isLastGroup} && ${/tileActionModeActive}}",enabled:"{= !${/editTitle}}",press:[this._handleAddGroupButtonPress.bind(this)]}).addStyleClass("sapUshellAddGroupButton"))}if(!i.getHeaderActions().length){i.addHeaderAction(new v({content:this._getHeaderActions(),tileActionModeActive:"{/tileActionModeActive}",isOverflow:"{/isPhoneWidth}"}).addStyleClass("sapUshellOverlayGroupActionPanel"))}}},_handleAddGroupButtonPress:function(e){this.oController._addGroupHandler(e);this._addTileContainersContent()},_getHeaderActions:function(){const e=[];e.push(new n({text:{path:"isGroupVisible",formatter:function(e){return C.i18n.getText(e?"HideGroupBtn":"ShowGroupBtn")}},icon:{path:"isGroupVisible",formatter:function(e){if(c.system.phone){return e?"sap-icon://hide":"sap-icon://show"}return""}},visible:"{= ${/enableHideGroups} && !${isGroupLocked} && !${isDefaultGroup}}",enabled:"{= !${/editTitle}}",press:function(e){const t=e.getSource();const i=t.getBindingContext();const n=i.getModel();const o=i.getPath();const s=n.getProperty(`${o}/isGroupVisible`);const r=a.getLibraryResourceBundle("sap.m");this._oInvisibleMessageInstance.announce([C.i18n.getText(s?"Group.nowBeingHidden":"Group.nowBeingShown"),C.i18n.getText("Section.ButtonLabelChanged"),C.i18n.getText(s?"ShowGroupBtn":"HideGroupBtn"),r.getText("ACC_CTR_TYPE_BUTTON")].join(" "),_.Polite);this.oController._changeGroupVisibility(i)}.bind(this)}).addStyleClass("sapUshellHeaderActionButton"));e.push(new n({text:{path:"removable",formatter:function(e){return C.i18n.getText(e?"DeleteGroupBtn":"ResetGroupBtn")}},icon:{path:"removable",formatter:function(e){if(c.system.phone){return e?"sap-icon://delete":"sap-icon://refresh"}return""}},visible:"{= !${isDefaultGroup}}",enabled:"{= !${/editTitle}}",press:function(e){const t=e.getSource();const i=t.getBindingContext();this.oController._handleGroupDeletion(i)}.bind(this)}).addStyleClass("sapUshellHeaderActionButton"));return e},_handleAddTileToGroup:function(e){if(document.toDetail){document.toDetail()}r.getOwnerComponentFor(this.oController.getView().parentComponent).getRouter().navTo("appfinder",{"innerHash*":`catalog/${JSON.stringify({targetGroup:encodeURIComponent(e.getSource().getBindingContext().sPath)})}`})},_hidePlusTile:function(e){if(e){e.classList.add("sapUshellHidePlusTile")}},_showPlusTile:function(e){if(e){e.classList.remove("sapUshellHidePlusTile")}}});return w});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/homepage/DashboardUIActions", ["sap/base/Log","sap/base/util/deepExtend","sap/ui/base/Object","sap/ui/core/Configuration","sap/ui/core/Core","sap/ui/Device","sap/ui/thirdparty/jquery","sap/ushell/Layout"],(e,t,o,s,n,i,jQuery,l)=>{"use strict";const a=o.extend("sap.ushell.components.homepage.DashboardUIActions",{metadata:{publicMethods:["initializeUIActions"]},constructor:function(){this.aTabBarItemsLocation=[];if(a.fnDashboardUIActionsGetter&&a.fnDashboardUIActionsGetter()){return a.fnDashboardUIActionsGetter()}a.fnDashboardUIActionsGetter=function(e){return function(){return e}}(this.getInterface());this.oTileUIActions=undefined;this.oLinkUIActions=undefined;this.oGroupUIActions=undefined;this.oController=undefined;this.UIActionsInitialized=false;n.getEventBus().subscribe("launchpad","actionModeActive",this._enableGroupUIActions,this);n.getEventBus().subscribe("launchpad","actionModeInactive",this._disableGroupUIActions,this)},destroy:function(){n.getEventBus().unsubscribe("launchpad","actionModeActive",this._enableGroupUIActions,this);n.getEventBus().unsubscribe("launchpad","actionModeInactive",this._disableGroupUIActions,this);a.fnDashboardUIActionsGetter=undefined;this.oGroupUIActions=null;this.oTileUIActions=null;this.oLinkUIActions=null},initializeUIActions:function(e){this.oController=e;if(e.getView().getModel().getProperty("/homePageGroupDisplay")==="tabs"){this._fillTabBarItemsArray()}const o=jQuery("#sapUshellDashboardPage").width();const n=e.getView().sDashboardGroupsWrapperId;let i;const l=s.getRTL();const a={containerSelector:"#dashboardGroups",wrapperSelector:n?`#${n}`:undefined,rootSelector:"#mainShell"};const r=t({},a,{switchModeDelay:1e3,isTouch:e.getView().isTouch,isCombi:e.getView().isCombi,debug:false});const c={draggableSelector:".sapUshellLinkTile",placeHolderClass:"sapUshellLinkTile-placeholder",cloneClass:"sapUshellLinkTile-clone",endCallback:this._handleLinkDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),onBeforeCreateClone:this._onBeforeCreateLinkClone.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),endDragAndScrollCallback:this._handleTileDragAndScrollContinuation.bind(this),moveTolerance:e.getView().isTouch||e.getView().isCombi?10:3,isLayoutEngine:true,disabledDraggableSelector:"sapUshellLockedTile",onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:l?o:-o,defaultMouseMoveHandler:function(){}};const d={draggableSelector:".sapUshellTile",draggableSelectorExclude:".sapUshellPlusTile",placeHolderClass:"sapUshellTile-placeholder",cloneClass:"sapUshellTile-clone",deltaTop:-44,scrollContainerSelector:undefined,endCallback:this._handleTileDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),endDragAndScrollCallback:this._handleTileDragAndScrollContinuation.bind(this),moveTolerance:e.getView().isTouch||e.getView().isCombi?10:3,isLayoutEngine:true,disabledDraggableSelector:"sapUshellLockedTile",onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:l?o:-o,defaultMouseMoveHandler:function(){}};const h={draggableSelector:".sapUshellDashboardGroupsContainerItem:not(.sapUshellDisableDragAndDrop)",draggableSelectorBlocker:".sapUshellTilesContainer-sortable, .sapUshellTileContainerBeforeContent, .sapUshellTileContainerAfterContent",draggableSelectorExclude:".sapUshellHeaderActionButton",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",cloneClass:"sapUshellDashboardGroupsContainerItem-clone",startCallback:this._handleGroupsUIStart.bind(this),endCallback:this._handleGroupDrop.bind(this),dragCallback:this._handleGroupStartDrag.bind(this),moveTolerance:e.getView().isTouch||e.getView().isCombi?10:.1,isLayoutEngine:false,isVerticalDragOnly:true,draggableElement:".sapUshellTileContainerHeader"};if(e.getView().oDashboardGroupsBox.getGroups().length){if(e.getView().getModel().getProperty("/personalization")){sap.ui.require(["sap/ushell/UIActions"],o=>{sap.ushell.Container.getServiceAsync("FlpLaunchPage").then(s=>{this._disableTileUIActions();this._disableGroupUIActions();this._disableLinkUIActions();this.oTileUIActions=new o(t({},r,d)).enable();this.oGroupUIActions=new o(t({},r,h));if(s.isLinkPersonalizationSupported()){this.oLinkUIActions=new o(t({},r,c)).enable()}i=e.getView().getModel().getProperty("/tileActionModeActive");if(i){this.oGroupUIActions.enable()}})})}}},_enableGroupUIActions:function(){if(this.oGroupUIActions){this.oGroupUIActions.enable()}},disableAllDashboardUiAction:function(){this._disableTileUIActions();this._disableLinkUIActions();this._disableGroupUIActions()},_disableTileUIActions:function(){if(this.oTileUIActions){this.oTileUIActions.disable()}},_disableLinkUIActions:function(){if(this.oLinkUIActions){this.oLinkUIActions.disable()}},_disableGroupUIActions:function(){if(this.oGroupUIActions){this.oGroupUIActions.disable()}},_handleTileDragMove:function(e){if(!e.isScrolling){l.getLayoutEngine().moveDraggable(e.moveX,e.moveY,this.aTabBarItemsLocation)}},_handleTileDragAndScrollContinuation:function(e){const t=jQuery("#anchorNavigationBar").offset();const o=t?t.top:0;if(e<o){l.getLayoutEngine()._cancelLongDropTimmer()}return l.getLayoutEngine()._isTabBarCollision(e)},_fillTabBarItemsArray:function(){const e=document.getElementsByClassName("sapUshellAnchorItem");let t;const o=10;let s=0;let n;const i=[];for(t=0;t<e.length;t++){const o=e[t];const s=o.getBoundingClientRect();i[t]=s.width}for(t=0;t<e.length;t++){const e=i[t];if(e===0){continue}const l=Math.round(e/o);for(n=s;n<s+l;n++){this.aTabBarItemsLocation[n]=t}s=n}},_preventTextSelection:function(){if(window.getSelection){const e=window.getSelection();try{e.removeAllRanges()}catch{}}},_handleStartDragTile:function(e,t){this._preventTextSelection();l.getLayoutEngine().layoutStartCallback(t);l.initDragMode();const o=t.querySelectorAll("a");for(let e=0;e<o.length;e++){o[e].removeAttribute("href")}this.oController._handleDrag(e,t);n.getEventBus().publish("launchpad","sortableStart")},_onBeforeCreateLinkClone:function(e,t){l.getLayoutEngine().saveLinkBoundingRects(t)},_handleLinkDrop:function(e,t,o){const s=jQuery.Deferred();if(l.isTabBarActive()){l.tabBarTileDropped()}if(o&&o.clone){jQuery(o.clone).css({opacity:0})}if(i.desktop){document.body.classList.remove("sapUshellDisableUserSelect")}if(l.getLayoutEngine().isLinkIntersected()||l.getLayoutEngine().isOriginalAreaChanged()){this.oController._handleDrop(e,t).then(()=>{const e=document.getElementById("dashboardGroups");const t=e&&e.getElementsByClassName("sapUshellHidePlusTile");for(let e=0;e<t.length;e++){t[e].classList.remove("sapUshellHidePlusTile")}setTimeout(()=>{s.resolve()},0)})}else{setTimeout(()=>{s.resolve()},0)}return s.promise()},_handleTileDrop:function(e,t,o){if(l.getLayoutEngine().isOriginalAreaChanged()){return this._handleTileToLinkDrop(e,t,o)}return this._handleTileToTileDrop(e,t,o)},_handleTileToLinkDrop:function(e,t,o){return this._handleLinkDrop(e,t,o)},_handleTileToTileDrop:function(e,t,o){let s;function n(e,t){l.endDragMode();const o=document.getElementById("dashboardGroups");const s=o&&o.getElementsByClassName("sapUshellHidePlusTile");for(let e=0;e<s.length;e++){s[e].classList.remove("sapUshellHidePlusTile")}this.oController._handleDrop(this.oController,e,t);if(i.desktop){document.body.classList.remove("sapUshellDisableUserSelect")}}const a=jQuery(".sapUshellTabBarHoverOn");a.removeClass("sapUshellTabBarHoverOn");const r=jQuery(".sapUshellTileDragOpacity");r.removeClass("sapUshellTileDragOpacity");if(l.isTabBarActive()){l.tabBarTileDropped()}let c;if(l.isTabBarActive()&&l.isOnTabBarElement()){if(o&&o.clone){c=jQuery.Deferred();s=jQuery(o.clone);s.css("display","none");setTimeout(()=>{c.resolve();n.call(this,e,t)},0);return c.promise()}n.apply(this,arguments)}if(o&&o.clone){c=jQuery.Deferred();s=jQuery(o.clone);setTimeout(()=>{c.resolve();n.call(this,e,t)},0);return c.promise()}setTimeout(()=>{n.call(this,e,t)},0)},_getTileTopOffset:function(e,t,o){const s=0;let n=s+o;n+=e.closest(".sapUshellDashboardGroupsContainerItem").position().top;n+=t.top;return n},_markDisableGroups:function(){if(this.oController.getView().getModel()){this.oController.getView().getModel().setProperty("/isInDrag",true)}},_endUIHandler:function(){l.endDragMode();if(this.oController.getView().getModel()){this.oController.getView().getModel().setProperty("/isInDrag",false)}},_handleGroupStartDrag:function(t,o){this.oTileUIActions.disable();if(this.oLinkUIActions){this.oLinkUIActions.disable()}const l=jQuery(".sapUshellDashboardGroupsContainerItem-clone");const a=l.find(".sapUshellContainerTitle");const r=a.height();const c=a.width();const d=s.getRTL();if(!i.system.phone){l.find(".sapUshellTileContainerEditMode").offset({top:this.oGroupUIActions.getMove().y-r,left:d?jQuery("#sapUshellDashboardPage").width()+this.oGroupUIActions.getMove().x+c:this.oGroupUIActions.getMove().x-c/2});jQuery(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerHidden")}else{jQuery(".sapUshellTilesContainer-sortable").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellLineModeContainer").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden")}jQuery(".sapUshellTileContainerAfterContent").addClass("sapUshellTileContainerRemoveContent");jQuery(o).find(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");this.oController.getView().getModel().setProperty("/isInDrag",true);jQuery(o).attr("startPos",jQuery(o).index());e.info(`startPos - ${jQuery(o).index()}`);setTimeout(()=>{n.getEventBus().publish("launchpad","sortableStart")},0);const h=jQuery("#dashboardGroups").offset().top;const p=jQuery(".sapUshellDashboardGroupsContainerItem-placeholder").offset().top;const u=jQuery(".sapUshellDashboardGroupsContainerItem-clone").offset().top;const g=p-h-u;jQuery(".sapUshellDashboardView section").css({scrollTop:g})},_handleGroupsUIStart:function(e,t){jQuery(t).find(".sapUshellTileContainerContent").css("outline-color","transparent")},_handleGroupDrop:function(e,t){const o=n.getEventBus();const s=jQuery(t);const i=jQuery(s.children()[0]).attr("id");const l=n.byId(i);const a=n.byId("dashboardGroups");const r={group:l,groupChanged:false,focus:false};const c=s.index();s.startPos=window.parseInt(s.attr("startPos"),10);a.removeAggregation("groups",l,true);a.insertAggregation("groups",l,c,true);this._handleGroupMoved(e,{item:s});s.removeAttr("startPos");n.getEventBus().publish("launchpad","sortableStop");setTimeout(()=>{jQuery(".sapUshellContainerHeaderActions").removeClass("sapUshellTileContainerHidden");jQuery(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerHidden");jQuery(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTileContainerAfterContent").removeClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTilesContainer-sortable").removeClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellLineModeContainer").removeClass("sapUshellTileContainerRemoveContent")},0);window.setTimeout(o.publish.bind(o,"launchpad","scrollToGroup",r),1);this.oTileUIActions.enable();if(this.oLinkUIActions){this.oLinkUIActions.enable()}},_handleGroupMoved:function(e,t){const o=t.item.startPos;const s=t.item.index();const n=this.oController.getView().getModel();if(s!==-1){this.oController._publishAsync("launchpad","moveGroup",{fromIndex:o,toIndex:s});setTimeout(()=>{n.setProperty("/isInDrag",false)},100)}},_setController:function(e){this.oController=e}});return a});
sap.ui.require.preload({
	"sap/ushell/components/homepage/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ushell.components.homepage","applicationVersion":{"version":"1.141.1"},"i18n":{"bundleUrl":"../../renderer/resources/resources.properties","supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"},"ach":"CA-FLP-FE-COR","type":"component","title":"{{Component.Homepage.Title}}","resources":"resources.json"},"sap.ui":{"fullWidth":true,"hideLightBackground":true,"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"componentName":"sap.ushell.components.homepage","dependencies":{"minUI5Version":"1.30","libs":{"sap.ui.core":{},"sap.m":{}}},"contentDensities":{"compact":true,"cozy":true}}}'
});
//# sourceMappingURL=Component-preload.js.map
