// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/components/cepsearchresult/app/util/controls/Category","sap/ushell/services/VisualizationInstantiation","sap/m/Text","sap/m/Link","sap/m/FlexBox","sap/m/library","sap/ui/base/Event","sap/ushell/Container"],(t,e,a,i,n,s,o,r)=>{"use strict";const l=s.LinkAccessibleRole;const d=t.extend("sap.ushell.components.cepsearchresult.app.util.controls.categories.Application",{renderer:t.getMetadata().getRenderer()});const p=new e;const c=500;d.prototype.getViewSettings=function(){return{views:[{key:"list",icon:"sap-icon://text-align-justified"},{key:"tile",icon:"sap-icon://grid"}],default:"tile"}};d.prototype.createListItemTemplate=function(){const e=t.prototype.createListItemTemplate.apply(this).addStyleClass("sapMLIBHoverable");e.getContent()[0].addItem(new a({visible:"{= !!${data>longDescription}}",text:"{= ${data>longDescription}}"}).addStyleClass("diminishedText").addStyleClass("sapUiSmallMarginBeginEnd").addStyleClass("sapUiTinyMarginTop").addStyleClass("resetHighlight"));e.getContent()[0].addItem(new n({items:{path:"data>visualization/keywords",templateShareable:true,template:new a({visible:"{= !!${data>}}",text:"{= ${data>}}"}).addStyleClass("diminishedText").addStyleClass("keywordText").addStyleClass("sapUiTinyMarginEnd")}}).addStyleClass("sapUiSmallMarginBeginEnd"));e.attachModelContextChange(this.addTile.bind(this));return e};d.prototype.createCardItemTemplate=function(){const e=t.prototype.createListItemTemplate.apply(this);e.attachModelContextChange(this.addTile.bind(this));return e};d.prototype.createTileItemTemplate=function(){const e=new t.CustomListItem({type:"Active",press:this.itemNavigate.bind(this)});e.attachModelContextChange(this.addTile.bind(this));return e};d.prototype.addTile=function(t){const e=t.getSource();if(e.getBindingContext("data")){const t=e.getBindingContext("data").getObject();const a=t.visualization;if(!a){return}if(e._oViz){e._oViz.destroy()}const i=p.instantiateVisualization(a);i.addStyleClass(a.displayFormatHint);e._oViz=i;if(this.getCurrentView()==="tile"){e.destroyContent();e.addContent(i);this.activateTile(i,true,c)}else{e.getContent()[0].getItems()[0].addItem(i.addStyleClass("hiddentile"));const t=e.getContent()[0].getItems()[0].getItems()[0];e.addDelegate({onAfterRendering:function(){setTimeout(()=>{t.setSrc(t.getSrc());t.invalidate()},5)}})}}};d.prototype.activateTile=function(t,e,a){setTimeout(()=>{r.getServiceAsync("ReferenceResolver").then(()=>{if(!t.isDestroyed()){t.setActive(e,false);this.activateTile(t,false,1e3)}})},a)};d.prototype.onsapenter=function(t){const e=new o("customEventOnEnter",t.srcControl,{});this.itemNavigate(e)};d.prototype.itemNavigate=function(t){if(this.bIgnoreNextItemNavigation){this.bIgnoreNextItemNavigation=false;return}if(this.isLoading()){return}let e=t.getSource();this.bIgnoreNextItemNavigation=e.isA("sap.m.CustomListItem");while(e&&!e.isA("sap.m.CustomListItem")){e=e.getParent()}if(!e&&!e._oViz){return}const a=e._oViz.mProperties.targetURL;r.getServiceAsync("Navigation").then(t=>{t.navigate({target:{shellHash:a}})})};d.prototype.getItemObjectIdentifier=function(){const t=new i({text:"{data>title}",press:this.itemNavigate.bind(this),accessibleRole:l.Button}).addStyleClass("appTitleText");t.setHref();return new n({direction:"Column",items:[new n({items:[t,new a({text:"–",visible:"{= !!${data>title} && !!${data>description}}"}).addStyleClass("appTitleSeparator"),new a({text:"{data>description}"}).addStyleClass("appDescriptionText")]}).addStyleClass("appTitle"),new n({items:[new a({text:"{data>contentProviderLabel}"}).addStyleClass("appProviderText").addStyleClass("diminishedText"),new a({text:" • ",visible:"{= !!${data>contentProviderLabel} && !!${data>visualization/info}}"}).addStyleClass("appProviderInfoSeparator diminishedText"),new a({text:"{data>visualization/info}",visible:"{= !!${data>visualization/info}}"}).addStyleClass("appInfoText").addStyleClass("diminishedText")]}).addStyleClass("appProvider")]}).addStyleClass("appObjectIdentifier")};d.prototype._getSearchParameters=function(t,e,a){return{includeAppsWithoutVisualizations:false,enableVisualizationPreview:false,searchTerm:t,skip:e,top:a,filter:{filters:[{path:"technicalAttributes",operator:"NotContains",value1:"APPTYPE_SEARCHAPP"},{path:"technicalAttributes",operator:"NotContains",value1:"APPTYPE_HOMEPAGE"}],and:true},sort:{path:"title",descending:false}}};d.prototype.fetchData=function(t,e,a){return this.getMaxRowItemsAsync().then(i=>{const n=Math.ceil(a/i)*i;return this.getData(this._getSearchParameters(t,e,n)).then(t=>{const e=t.data;e.forEach((t,i)=>{if(e.length>a&&t.visualization.displayFormatHint==="standardWide"){e.pop()}});t.pageGap=e.length-a;return t})})};d.prototype.fetchCount=function(t,e,a){return this.getData(this._getSearchParameters(t,e,a))};d.prototype.getPlaceholderData=function(){return{title:new Array(10).join(" "),description:new Array(35).join(" "),keywords:"",icon:"sap-icon://person-placeholder",label:new Array(17).join(" "),url:""}};d.prototype.getData=function(t){return r.getServiceAsync("SearchCEP").then(e=>e.search(t))};return d});
//# sourceMappingURL=Application.js.map