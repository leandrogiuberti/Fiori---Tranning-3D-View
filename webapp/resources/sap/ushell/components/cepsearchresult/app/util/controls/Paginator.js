// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/Control","sap/m/ToggleButton","sap/ui/core/delegate/ItemNavigation","sap/ushell/components/cepsearchresult/app/util/appendStyleVars","sap/ushell/components/cepsearchresult/app/util/resources","sap/ui/dom/includeStylesheet"],(t,e,i,n,o,s)=>{"use strict";n(["sapUiBaseText","sapUiLinkActiveColor"]);s(sap.ui.require.toUrl("sap/ushell/components/cepsearchresult/app/util/controls/Paginator.css"));const a=t.extend("sap.ushell.components.cepsearchresult.app.util.controls.Paginator",{metadata:{properties:{pageSize:{type:"int",defaultValue:5},count:{type:"int",defaultValue:0},currentPage:{type:"int",defaultValue:1},segmentSize:{type:"int",defaultValue:7}},aggregations:{_buttons:{type:"sap.m.Button",multiple:true,hidden:true}},events:{selectPage:{}}},renderer:function(t,e){t.openStart("nav",e);t.attr("tabIndex","0");t.class("sapUiCEPSearchPag");t.attr("role","navigation");t.attr("aria-label",o.bundle.getText("CATEGORY.Views.PaginationTooltip"));t.openEnd();const i=e.getAggregation("_buttons")||[];for(let e=0;e<i.length;e++){t.renderControl(i[e])}t.close("nav")}});a.prototype._setCurrentPageWithEvent=function(t){this.setCurrentPage(t);const e=t-1;const i=this.getPageSize();this.fireSelectPage({page:t,startIndex:e*i,pageSize:i,endIndex:(e+1)*i-1})};a.prototype.getPageCount=function(){const t=this.getPageSize();const e=this.getCount();return Math.ceil(e/t)};a.prototype._addButtons=function(){this.destroyAggregation("_buttons");const t=this.getPageCount();const i=Math.min(this.getCurrentPage(),t);const n=this.getSegmentSize();let s=Math.max(i-Math.floor(n/2),1);const a=Math.min(s+n-1,t);if(a===t){s=Math.max(t-n+1,1)}const r=new e({icon:"sap-icon://navigation-left-arrow",enabled:i>1,visible:t>1,tooltip:o.bundle.getText("CATEGORY.Views.PageTooltip",[Math.max(i-1,1),t]),press:function(){this._setCurrentPageWithEvent(i-1)}.bind(this)});this.addAggregation("_buttons",r);if(s>1){const a=new e({text:"1",enabled:i>1,visible:i>1,tooltip:o.bundle.getText("CATEGORY.Views.PageTooltip",[1,t]),press:function(){this._setCurrentPageWithEvent(1)}.bind(this)});this.addAggregation("_buttons",a);const r=new e({text:s===3?2:"...",tooltip:o.bundle.getText("CATEGORY.Views.PageTooltip",[s-1,t]),enabled:i>=s,visible:t>n&&s>2,press:function(){this._setCurrentPageWithEvent(s-1)}.bind(this)});this.addAggregation("_buttons",r)}for(let n=s;n<=a;n++){const s=new e({text:`${n}`,pressed:n===i,tooltip:o.bundle.getText("CATEGORY.Views.PageTooltip",[n,t]),enabled:true,visible:t>1,press:function(t,e){return function(i){if(e===t.getCurrentPage()){i.getSource().setPressed(true);return}t._setCurrentPageWithEvent(e)}}(this,n)});s.data("page",n.toString(),true);s.addStyleClass("sapUiCEPSearchPagNumber");this.addAggregation("_buttons",s)}if(a<t){const i=new e({text:a===t-2?t-1:"...",enabled:true,tooltip:o.bundle.getText("CATEGORY.Views.PageTooltip",[a+1,t]),visible:a<t-1,press:function(){this._setCurrentPageWithEvent(a+1)}.bind(this)});this.addAggregation("_buttons",i);const n=new e({text:`${t}`,enabled:true,tooltip:o.bundle.getText("CATEGORY.Views.PageTooltip",[t,t]),visible:t>1,press:function(){this._setCurrentPageWithEvent(t)}.bind(this)});this.addAggregation("_buttons",n)}const g=new e({icon:"sap-icon://navigation-right-arrow",enabled:i<t,tooltip:o.bundle.getText("CATEGORY.Views.PageTooltip",[Math.min(i+1,t),t]),visible:t>1,press:function(){this._setCurrentPageWithEvent(i+1)}.bind(this)});this.addAggregation("_buttons",g)};a.prototype._removeKeyboardNavigation=function(){if(this._oItemNavigation){this.removeDelegate(this._oItemNavigation);this._oItemNavigation.destroy();this._oItemNavigation=null}};a.prototype._initKeyboardNavigation=function(){this._removeKeyboardNavigation();this._oItemNavigation=new i;const t=Array.from(this.getDomRef().querySelectorAll(".sapMBtn"));this._oItemNavigation.setCycling(false).setTableMode(true,true).setColumns(this.getAggregation("_buttons").length).setRootDomRef(this.getDomRef()).setPageSize(this.getPageSize()).setItemDomRefs(t);this.addDelegate(this._oItemNavigation)};a.prototype.focusPage=function(t){const e=this.getDomRef().querySelector(`.sapMBtn[data-page='${t}']`);if(e){e.setAttribute("aria-current","page");e.focus()}};a.prototype.onBeforeRendering=function(){this._addButtons()};a.prototype.onAfterRendering=function(){this._initKeyboardNavigation()};a.prototype.destroy=function(){this._removeKeyboardNavigation();this.destroyAggregation("_buttons")};return a});
//# sourceMappingURL=Paginator.js.map