// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/UIComponent","sap/m/FlexBox","sap/f/cards/Header","sap/ushell/components/cepsearchresult/app/util/resources"],(e,t,r,a)=>{"use strict";const s=e.extend("sap.ushell.components.cepsearchresult.cards.searchresultwidget.Component",{metadata:{manifest:"json",interfaces:["sap.ui.core.IAsyncContentCreation"]},createContent:async function(){this._oResourceBundle=await this.getModel("i18n").getResourceBundle();await a.awaitResourceBundle();return this.runAsOwner(()=>{if(this.getAggregation("rootControl")){return this.getAggregation("rootControl")}const e=new t({width:"100%",direction:"Column"});this._bContent=true;if(this._oCard){this.addContent()}return e})},getResourceBundle:function(){return this._oResourceBundle},onCardReady:function(e){this._oCard=e;this._oCard.addStyleClass("sapCEPSearchResultCard");this._mCardParameters=e.getCombinedParameters();if(this._bContent){this.addContent()}},editionLoaded:function(){return new Promise(e=>{sap.ui.require(["sap/ushell/components/cepsearchresult/app/util/Edition"],t=>{this._oEdition=new t(t.getEditionName());e(this._oEdition.loaded())})})},search:function(e){this._oCategory.search(e)},addContent:function(){this.editionLoaded().then(()=>{this._oCategory=this.createCategory();this.addCategory(this.getRootControl());this.updateCardHeader();this._oCard.getModel("parameters").setProperty("/init/value",true)})},addCategory:function(e){e.addItem(this._oCategory);this.search(this._mCardParameters.searchTerm)},createCategory:function(){const e=this._mCardParameters;const t=this._oEdition.createCategoryInstance(e.category,{pageSize:e.pageSize,showFooter:e.footer!=="none",showHeader:false,initialPlaceholder:true,allowViewSwitch:e.allowViewSwitch,highlightResult:e.highlightResult,currentView:e.view||"categoryDefault",useIllustrations:true,beforeSearch:function(e){this.updateCardHeader(e.getParameters());this._oCard.fireEvent("beforeSearch",e.getParameters())}.bind(this),afterSearch:function(e){this.updateCardHeader(e.getParameters());this._oCard.fireEvent("afterSearch",e.getParameters())}.bind(this),afterRendering:function(e){this._oCard.fireEvent("afterRendering",e.getParameters());if(this._mCardParameters.header!=="none"){t.getDomRef().style.borderTop="1px solid var(--sapUiListBorderColor)"}}.bind(this)});t.setFooter(e.footer);return t},updateCardHeader:function(e){const t=this._oCard.getCardHeader();const r=this._oCategory;let a;let s;if(this._mCardParameters.header==="default"){t.setIconVisible(!!r.getDefaultIcon()).setIconDisplayShape(r._oCategoryConfig.icon.shape).setIconBackgroundColor(r._oCategoryConfig.icon.backgroundColor).setIconSrc(r.getDefaultIcon());a=r.translate("Card.Title");s=this.getResourceBundle().getText("CARD.List.Title.SearchResults",[`'${this._mCardParameters.searchTerm}'`])}else{t.setIconVisible(!!this._oCard.getManifestEntry("/sap.card/header/icon/src")).setIconDisplayShape(this._oCard.getManifestEntry("/sap.card/header/icon/shape")).setIconBackgroundColor(this._oCard.getManifestEntry("/sap.card/header/icon/backgroundColor")).setIconSrc(this._oCard.getManifestEntry("/sap.card/header/icon/src"));a=this._oCard.getManifestEntry("/sap.card/header/title");s=this._oCard.getManifestEntry("/sap.card/header/subtitle");a=a.replace("($searchText)",this._mCardParameters.searchTerm);s=s.replace("($searchText)",this._mCardParameters.searchTerm)}if(!e||!Number.isInteger(e.count)){if(this._mCardParameters.header==="custom"){a=a.replace("($count)","--");s=s.replace("($count)","--")}t.setStatusText("")}else if(Number.isInteger(e.count)){const r=this.getResourceBundle().getText("CARD.List.RowStatus",[Math.min(e.skip+1,e.count),Math.min(e.skip+e.top,e.count),e.count]);t.setStatusText(e.count>0?r:"");if(this._mCardParameters.header==="default"){a=`${a} (($count))`}a=a.replace("($count)",e.count);s=s.replace("($count)",e.count)}t.setTitle(a);t.setSubtitle(s)}});return s});
//# sourceMappingURL=Component.js.map