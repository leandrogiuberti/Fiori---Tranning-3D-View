//@ui5-bundle sap/fiori/indicator-tiles.js
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/base/util/UriParameters", ["sap/base/Log"],function(e){"use strict";function t(e){var t=e.indexOf("#");if(t>=0){e=e.slice(0,t)}var n=e.indexOf("?");if(n>=0){return e.slice(n+1)}return""}function n(e){return decodeURIComponent(e.replace(/\+/g," "))}function r(e,t){function r(t,n){if(t in e){e[t].push(n)}else{e[t]=[n]}}t.split("&").forEach(function(e){var t=e.indexOf("=");if(t>=0){r(n(e.slice(0,t)),n(e.slice(t+1)))}else if(e.length){r(n(e),"")}})}var i=function(n){var i=Object.create(null);if(n!=null){if(typeof n!=="string"){throw new TypeError("query parameter must be a string")}r(i,t(n))}this.has=function(e){return e in i};this._get=function(e){return e in i?i[e][0]:null};this.getAll=function(e){return e in i?i[e].slice():[]};this.keys=function(){return Object.keys(i).values()};var u=false;Object.defineProperty(this,"mParams",{get:function(){if(!u){e.warning("[Deprecated] UriParameters.mParams must not be accessed.");u=true}return Object.assign({},i)},configurable:false})};i.prototype.get=function(t,n){if(n){e.warning("[Deprecated] UriParameters.get(..., true) must not be used, use getAll() instead.");return this.getAll(t)}return this._get(t)};i.fromURL=function(e){return new i(e)};i.fromQuery=function(e){if(typeof e==="string"){if(e[0]!=="?"){e="?"+e}e=e.replace(/#/g,"%23")}return new i(e)};return i});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/Column", ["./library","sap/ui/core/Element","sap/ui/core/Renderer","sap/ui/core/library","sap/ui/Device","sap/ui/core/InvisibleText"],function(e,t,i,r,n,a){"use strict";var o=e.PopinDisplay;var s=r.VerticalAlign;var p=r.TextAlign;var u=r.SortOrder;var d=t.extend("sap.m.Column",{metadata:{library:"sap.m",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},hAlign:{type:"sap.ui.core.TextAlign",group:"Appearance",defaultValue:p.Begin},vAlign:{type:"sap.ui.core.VerticalAlign",group:"Appearance",defaultValue:s.Inherit},styleClass:{type:"string",group:"Appearance",defaultValue:null},visible:{type:"boolean",group:"Appearance",defaultValue:true},minScreenWidth:{type:"string",group:"Behavior",defaultValue:null},demandPopin:{type:"boolean",group:"Behavior",defaultValue:false},popinHAlign:{type:"sap.ui.core.TextAlign",group:"Appearance",defaultValue:p.Begin,deprecated:true},popinDisplay:{type:"sap.m.PopinDisplay",group:"Appearance",defaultValue:o.Block},mergeDuplicates:{type:"boolean",group:"Behavior",defaultValue:false},mergeFunctionName:{type:"string",group:"Misc",defaultValue:"getText"},sortIndicator:{type:"sap.ui.core.SortOrder",group:"Appearance",defaultValue:u.None},importance:{type:"sap.ui.core.Priority",group:"Behavior",defaultValue:"None"},autoPopinWidth:{type:"float",group:"Behavior",defaultValue:8}},defaultAggregation:"header",aggregations:{header:{type:"sap.ui.core.Control",multiple:false},footer:{type:"sap.ui.core.Control",multiple:false},_action:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}},associations:{headerMenu:{type:"sap.ui.core.IColumnHeaderMenu",multiple:false}},designtime:"sap/m/designtime/Column.designtime"}});d.prototype._index=-1;d.prototype._media=null;d.prototype._bForcedColumn=false;d.prototype.exit=function(){this._clearMedia()};d.prototype.setParent=function(e){t.prototype.setParent.apply(this,arguments);if(!e){delete this._initialOrder}return this};d.prototype.getTable=function(){var e=this.getParent();if(e&&e.isA("sap.m.Table")){return e}};d.prototype.informTable=function(e,t,i){var r=this.getTable();if(r){var n="onColumn"+e;if(r[n]){r[n](this,t,i)}}};d.prototype.ontouchstart=function(e){this._bTouchStartMarked=e.isMarked()};d.prototype.ontap=function(e){if(!this._bTouchStartMarked&&!e.isMarked()){this.informTable("Press")}};d.prototype.onsapspace=function(e){if(e.srcControl===this){this.informTable("Press");e.preventDefault()}};d.prototype.onsapenter=d.prototype.onsapspace;d.prototype.oncontextmenu=function(e){var t=this.getHeaderMenuInstance();if(t){t.openBy(this);e.preventDefault()}};d.prototype.invalidate=function(){var e=this.getParent();if(e&&e.bOutput){t.prototype.invalidate.apply(this,arguments)}};d.prototype._clearMedia=function(){if(this._media&&this._minWidth){this._detachMediaContainerWidthChange(this._notifyResize,this,this.getId());n.media.removeRangeSet(this.getId());this._media=null}};d.prototype._addMedia=function(){delete this._bShouldAddMedia;if(this._minWidth){n.media.initRangeSet(this.getId(),[parseFloat(this._minWidth)]);this._attachMediaContainerWidthChange(this._notifyResize,this,this.getId());this._media=this._getCurrentMediaContainerRange(this.getId());if(this._media){this._media.matches=!!this._media.from}}};d.prototype._notifyResize=function(e){if(this._media.from===e.from){return}this._media=e;this._media.matches=!!e.from;if(this.getVisible()){this.informTable("Resize")}};d.prototype._validateMinWidth=function(t){if(!t){return}if(Object.prototype.toString.call(t)!="[object String]"){throw new Error('expected string for property "minScreenWidth" of '+this)}if(Object.keys(e.ScreenSizes).indexOf(t.toLowerCase())!=-1){return}if(!/^\d+(\.\d+)?(px|em|rem)$/i.test(t)){throw new Error('invalid CSS size("px", "em", "rem" required) or sap.m.ScreenSize enumeration for property "minScreenWidth" of '+this)}};d.prototype.getCssAlign=function(e){e=e||this.getHAlign();if(e===p.Begin||e===p.End||e===p.Initial){e=i.getTextAlign(e)}return e.toLowerCase()};d.prototype.setIndex=function(e){this._index=+e};d.prototype.getIndex=function(){return this._index};d.prototype.setOrder=function(e){this._order=+e};d.prototype.getOrder=function(){return this.hasOwnProperty("_order")?this._order:this.getInitialOrder()};d.prototype.setInitialOrder=function(e){this._initialOrder=+e};d.prototype.getInitialOrder=function(){if(this.hasOwnProperty("_initialOrder")){return this._initialOrder}var e=this.getTable();if(!e){return-1}return e.indexOfColumn(this)};d.prototype._setMinScreenWidth=function(t){this._clearMedia();this._minWidth=0;if(t){t=t.toLowerCase();var i=e.ScreenSizes[t];if(i){this._minWidth=i+"px"}else if(t.endsWith("px")){this._minWidth=t}else{var r=parseFloat(e.BaseFontSize);this._minWidth=parseFloat(t)*r+"px"}var n=this.getTable();if(n&&n.isActive()){this._addMedia()}else{this._bShouldAddMedia=true}}};d.prototype.setMinScreenWidth=function(e){e=e||"";if(e==this.getMinScreenWidth()){return this}this._validateMinWidth(e);this._setMinScreenWidth(e);return this.setProperty("minScreenWidth",e)};d.prototype.setSortIndicator=function(e){this.setProperty("sortIndicator",e,true);this.$().attr("aria-sort",this.getSortIndicator().toLowerCase());return this};d.prototype.isPopin=function(){if(!this.getDemandPopin()){return false}var e=this.getTable();if(e){var t=e.getHiddenInPopin()||[];var i=t.includes(this.getImportance());if(i){return false}}return this.isHidden()};d.prototype.isHidden=function(){return this._media?!this._media.matches:false};d.prototype.setLastValue=function(e){this._lastValue=e;return this};d.prototype.clearLastValue=function(){return this.setLastValue(NaN)};d.prototype.getLastValue=function(){return this._lastValue};d.prototype.onItemsRemoved=function(){this.clearLastValue()};d.prototype.onTableRendering=function(){this.clearLastValue();if(this._bShouldAddMedia){this._addMedia()}};d.prototype.getCalculatedMinScreenWidth=function(){return parseInt(this._minWidth)||0};d.prototype.setForcedColumn=function(e){if(this._bForcedColumn==e){return}this._bForcedColumn=e;this._setMinScreenWidth(e?"":this.getMinScreenWidth())};d.prototype.getHeaderMenuInstance=function(){return t.getElementById(this.getHeaderMenu())};d.prototype.setHeader=function(e){var t=this.getHeader();if(t){if(t.isA("sap.m.Label")){t.detachEvent("_change",this._onLabelPropertyChange,this)}t.setIsInColumnHeaderContext?.(false)}this.setAggregation("header",e);var i=this.getHeader();if(i){if(i.isA("sap.m.Label")){i.attachEvent("_change",this._onLabelPropertyChange,this)}i.setIsInColumnHeaderContext?.(true)}return this};d.prototype._onLabelPropertyChange=function(e){var t=this.getTable();if(!t||e.getParameter("name")!="required"){return}if(t.bActiveHeaders||this.getHeaderMenuInstance()){this.$()[e.getSource().getRequired()?"addAriaDescribedBy":"removeAriaDescribedBy"](a.getStaticId("sap.m","CONTROL_IN_COLUMN_REQUIRED"))}};d.prototype.getFieldHelpInfo=function(){return{label:this.getHeader()?.getText?.()||""}};return d});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/Menu", ["sap/m/library","sap/ui/core/library","sap/ui/core/Control","sap/m/ResponsivePopover","sap/m/Button","sap/m/Bar","sap/m/Title","sap/m/MenuItem","sap/m/MenuWrapper","sap/ui/core/Lib","sap/ui/Device","sap/ui/core/InvisibleText","sap/ui/base/ManagedObjectMetadata","sap/ui/core/EnabledPropagator","sap/base/i18n/Localization","sap/base/Log"],function(e,t,o,n,s,i,r,a,u,p,l,c,d,h,g,m){"use strict";const f=e.PlacementType;const _=t.ItemSelectionMode;const y=o.extend("sap.m.Menu",{metadata:{interfaces:["sap.ui.core.IContextMenu"],library:"sap.m",properties:{title:{type:"string",group:"Misc",defaultValue:null}},defaultAggregation:"items",aggregations:{items:{type:"sap.m.IMenuItem",multiple:true,singularName:"item",bindable:"bindable",defaultClass:a,forwarding:{idSuffix:"-menuWrapper",aggregation:"items"}},_menuWrapper:{type:"sap.m.MenuWrapper",multiple:false,visibility:"hidden"},_popover:{type:"sap.m.ResponsivePopover",multiple:false,visibility:"hidden"}},events:{itemSelected:{parameters:{item:{type:"sap.m.IMenuItem"}}},closed:{},beforeClose:{allowPreventDefault:true,parameters:{item:{type:"sap.m.IMenuItem"}}}}},renderer:null});h.call(y.prototype);y.prototype.init=function(){const e=this._createMenuWrapper(),t=this._createPopover();e.attachClosePopover(this.close,this);e.attachCloseItemSubmenu(this._collectSubmenusToClose,this);e.attachItemSelected(this._handleItemSelected,this);t.attachAfterClose(this._menuClosed,this);this._aSubmenusToClose=[];this._openDuration=l.system.phone?null:0};y.prototype.updateItems=function(e,t){if(t&&t.detailedReason==="AddVirtualContext"){b(this);return}else if(t&&t.detailedReason==="RemoveVirtualContext"){C(this);return}if(this._bReceivingData){this._bReceivingData=false}else{this._updateStarted(e)}this.updateAggregation("items");this._updateFinished()};y.prototype._updateStarted=function(e){if(!this._bReceivingData&&!this._bUpdating){this._bUpdating=true}};y.prototype._updateFinished=function(){if(!this._bReceivingData&&this._bUpdating){setTimeout(function(){this._getMenuWrapper()?._setHoveredItem(this._getMenuWrapper()._getNextFocusableItem(-1,1),true)}.bind(this),0);this._bUpdating=false}};y.prototype.refreshItems=function(e){this._bRefreshItems=true;if(!this._bReceivingData){this._updateStarted(e);this._bReceivingData=true}this.refreshAggregation("items")};y.prototype.createItem=function(e,t,o){const n=t.factory(d.uid(o?o:"clone"),e);return n.setBindingContext(e,t.model)};y.prototype.exit=function(){const e=this._getMenuWrapper(),t=this._getPopover();e.detachClosePopover(this.close,this);e.detachCloseItemSubmenu(this._collectSubmenusToClose,this);e.detachItemSelected(this._handleItemSelected,this);t.detachAfterClose(this._menuClosed,this);e.destroy();t.destroy()};y.prototype.setTitle=function(e){const t=this._getPopover(),o=this._getMenuWrapper(),n=t.getCustomHeader();if(n){o.setTitle(e);n.getContentMiddle()[0].setText(e)}this.setProperty("title",e,true);return this};y.prototype.openBy=function(e){const t=this._getPopover();if(!e){e=document.body}this._openPopoverBy(t,e);this.bIgnoreOpenerFocus=true;return this};y.prototype.close=function(e){const t=e?e.getParameters():{},o={},n=this._getPopover();if(t["origin"]){o["item"]=t["origin"]}this._refreshSubmenusToClose();if(n&&this.fireBeforeClose(o)){this._closeSubmenuPopovers();n._getPopup().setDurations(this._openDuration,0);n.close()}return this};y.prototype._openPopoverBy=function(e,t){e._getPopup().setDurations(this._openDuration,0);e.openBy(t)};y.prototype._handleItemSelected=function(e){e.cancelBubble();this.fireItemSelected({item:e.getParameter("item")});this.bIgnoreOpenerFocus=false};y.prototype._refreshSubmenusToClose=function(){this._aSubmenusToClose=this._aSubmenusToClose.filter(e=>e._getPopover().isOpen())};y.prototype._closeSubmenuPopovers=function(){while(this._aSubmenusToClose.length){this._aSubmenusToClose.pop()._closeSubmenu()}};y.prototype.isOpen=function(){return this._getPopover().isOpen()};y.prototype.getDomRefId=function(){const e=this._getPopover().getDomRef();return e?e.id:""};y.prototype.openAsContextMenu=function(e,t){const o=this._getPopover(),n=e?e.originalEvent||e:null,s=n&&n.button!==undefined&&!!n.type,i=n&&!s&&n.type===undefined&&(n.offsetX!==undefined&&n.offsetY!==undefined),r=n.type?.substr(0,3)==="key"||s&&t&&(n.pageX===undefined&&n.clientX===undefined||n.pageY===undefined&&n.clientY===undefined);let a=t&&t.getDomRef?t.getDomRef():t,u=document.getElementById("sapMMenuContextMenuPointer"),p=document.body,c=null,d=0,h=0;o._getPopup().setDurations(this._openDuration,0);if(o.isOpen()){o.close()}if(l.system.phone){o.openBy();return}if(!t&&!i){a=e.srcControl?e.srcControl.getDomRef():null;if(!a){if(n?.currentTarget){a=n.currentTarget}else if(n?.target){a=n.target}else{a=document.body}}}if(u){u.remove()}u=document.createElement("div");u.id="sapMMenuContextMenuPointer";u.className="sapMMenuContextMenuPointer";const m=a?a.getBoundingClientRect():null;if((!n||r)&&m){d=m.left+m.width/2+(document.documentElement.scrollLeft||document.body.scrollLeft);h=m.top+m.height/2+(document.documentElement.scrollTop||document.body.scrollTop)}else if(n&&s){const e=(n.pageX||n.clientX)+(document.documentElement.scrollLeft||document.body.scrollLeft);const t=(n.pageY||n.clientY)+(document.documentElement.scrollTop||document.body.scrollTop);if(a.tagName&&a.tagName.toLowerCase()==="tr"){p=a.firstChild?a.firstChild:a;c=p.firstChild?p.firstChild:null}else{p=a;c=a.firstChild?a.firstChild:null}d=e-m.left-window.scrollX;h=t-m.top-window.scrollY;if(g.getRTL()){d=document.body.clientWidth-d}}else if(i){d=e.offsetX||0;h=e.offsetY||0}p.insertBefore(u,c);u.style.insetInlineStart=`${d}px`;u.style.insetBlockStart=`${h}px`;u.setAttribute("aria-hidden","true");o.openBy(u);o.attachAfterClose(this._onContextMenuClose,this)};y.prototype._onContextMenuClose=function(){const e=document.getElementById("sapMMenuContextMenuPointer"),t=this._getPopover();e&&e.remove();t.detachAfterClose(this._onContextMenuClose,this)};["addStyleClass","removeStyleClass","toggleStyleClass"].forEach(function(e){y.prototype[e]=function(t,n){const s=this._getPopover();this._getMenuWrapper()._processStyleClasses(t,e);o.prototype[e].apply(this,arguments);if(e!=="toggleStyleClass"&&s){s[e].apply(s,arguments)}return this}});y.prototype.getSelectedItems=function(){return this._getItems().filter(e=>e.getSelected&&e.getSelected()&&e._getItemSelectionMode()!==_.None)};y.prototype._collectSubmenusToClose=function(e){const t=e.getParameter("item");this._refreshSubmenusToClose();if(this._aSubmenusToClose.indexOf(t)===-1){this._aSubmenusToClose.push(t)}};y.prototype._setCustomEnhanceAccStateFunction=function(e){this._fnEnhanceUnifiedMenuAccState=e};y.prototype._menuClosed=function(e){const t=e&&e.getParameter("openBy");this.fireClosed();if(t&&!this.bIgnoreOpenerFocus){try{t.focus()}catch(e){m.warning("Menu.close cannot restore the focus on opener "+t+", "+e)}}};y.prototype._isMenuItemGroup=function(e){return!!e.getItemSelectionMode};y.prototype._getItems=function(){const e=[];const t=o=>{o.forEach(o=>{if(!this._isMenuItemGroup(o)){e.push(o)}else{t(o.getItems())}})};t(this.getItems());return e};y.prototype._createMenuWrapper=function(e){const t=new u(this.getId()+"-menuWrapper",{isSubmenu:e});this.setAggregation("_menuWrapper",t,true);return t};y.prototype._createPopover=function(){let e=this._getPopover();if(e){return e}const t=l.system.phone?`${this.getId()}-title`:c.getStaticId("sap.m","MENU_POPOVER_ACCESSIBLE_NAME");const o=this._getMenuWrapper(),s=g.getRTL(),i=o.getIsSubmenu(),r=s?4:-4;e=new n(this.getId()+"-rp",{placement:this._getPopoverPlacement(),showHeader:false,showArrow:false,showCloseButton:false,verticalScrolling:true,horizontalScrolling:false,offsetX:i?r:1,offsetY:i?4:1,content:o,ariaLabelledBy:[t]});e.addStyleClass("sapMMenu");this.setAggregation("_popover",e,true);if(l.system.phone){e.setShowHeader(true);e.setEndButton(this._createCloseButton());e.setCustomHeader(this._createHeaderBar())}else if(i){e.getAggregation("_popup")._adaptPositionParams=function(){this._marginTop=0;this._marginLeft=0;this._marginRight=0;this._marginBottom=0;this._arrowOffset=0;this._offsets=["0 0","0 0","0 0","0 0"];this._myPositions=["begin bottom","begin top","begin top","end top"];this._atPositions=["begin top","end top","begin bottom","begin top"]}}e._oControl._getDocHeight=()=>window.innerHeight+window.scrollY;return e};y.prototype._createBackButton=function(){return new s(this.getId()+"-backbutton",{icon:"sap-icon://nav-back",press:e=>{this._getMenuWrapper().fireClosePopover()}})};y.prototype._createHeaderBar=function(){const e=this._getMenuWrapper(),t=new i({contentMiddle:new r(this.getId()+"-title",{text:e.getTitle()})}),o=this._getMenuWrapper().getIsSubmenu();if(o){t.addContentLeft(this._createBackButton())}return t};y.prototype._createCloseButton=function(){const e=p.getResourceBundleFor("sap.m");return new s({text:e.getText("MENU_CLOSE"),press:()=>{this._getMenuWrapper().fireClosePopover({bubbleToRoot:true})}})};y.prototype._getMenuWrapper=function(){const e=this._getPopover();return e?e.getContent()[0]:this.getAggregation("_menuWrapper")};y.prototype._getPopover=function(){return this.getAggregation("_popover")};y.prototype._getPopoverPlacement=function(){const e=this._getMenuWrapper().getIsSubmenu();if(e){const e=g.getRTL(),t=e?f.HorizontalPreferredLeft:f.HorizontalPreferredRight;return t}return f.VerticalPreferredBottom};y.prototype._setExtraContent=function(e){this._getPopover()._getPopup().setExtraContent([e])};function b(e){const t=e.getBinding("items");const o=e.getBindingInfo("items");const n=o.length;const s=o.startIndex;const i=t.getContexts(s,n)[0];C(e);e._oVirtualItem=e.createItem(i,o,"virtual");e.addAggregation("dependents",e._oVirtualItem,true)}function C(e){if(e._oVirtualItem){e._oVirtualItem.destroy();delete e._oVirtualItem}}return y});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/MenuItem", ["sap/m/library","sap/ui/core/library","sap/ui/core/Element","sap/ui/core/Control","sap/m/ResponsivePopover","sap/m/Button","sap/m/Bar","sap/m/Title","sap/m/MenuWrapper","sap/ui/core/Lib","sap/m/MenuItemRenderer","sap/ui/Device","sap/ui/core/InvisibleText","sap/base/i18n/Localization","sap/ui/core/IconPool","sap/m/Image"],function(e,t,o,n,s,i,r,a,p,u,l,c,g,h,d,_){"use strict";const f=e.PlacementType;const m=t.ItemSelectionMode;var b=t.TextDirection;const y=n.extend("sap.m.MenuItem",{metadata:{interfaces:["sap.m.IMenuItem"],library:"sap.m",properties:{text:{type:"string",group:"Data",defaultValue:""},icon:{type:"string",group:"Appearance",defaultValue:null},enabled:{type:"boolean",group:"Misc",defaultValue:true},visible:{type:"boolean",group:"Appearance",defaultValue:true},selected:{type:"boolean",group:"Behavior",defaultValue:false},shortcutText:{type:"string",group:"Appearance",defaultValue:""},startsSection:{type:"boolean",group:"Behavior",defaultValue:false},textDirection:{type:"sap.ui.core.TextDirection",group:"Misc",defaultValue:b.Inherit},key:{type:"string",group:"Data",defaultValue:null},_expanded:{type:"boolean",group:"Misc",visibility:"hidden",defaultValue:undefined}},defaultAggregation:"items",aggregations:{items:{type:"sap.m.IMenuItem",multiple:true,singularName:"item",bindable:"bindable",forwarding:{idSuffix:"-menuWrapper",aggregation:"items"}},endContent:{type:"sap.ui.core.Control",multiple:true},_icon:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_menuWrapper:{type:"sap.m.MenuWrapper",multiple:false,visibility:"hidden"},_popover:{type:"sap.m.ResponsivePopover",multiple:false,visibility:"hidden"}},associations:{_group:{type:"sap.m.MenuItemGroup",group:"Behavior",visibility:"hidden"}},events:{press:{}},renderer:l}});y.prototype.init=function(){const e=this._createMenuWrapper(true);this._itemSelectionMode=m.None;e.attachClosePopover(this._handleCloseRequest,this);this._openDuration=c.system.phone?null:0};y.prototype.exit=function(){const e=this._getMenuWrapper(),t=this._getPopover(),o=this.getAggregation("_icon");e.detachClosePopover(this._handleCloseRequest,this);e.destroy();if(t){t.detachAfterClose(this._afterPopoverClose,this);t.destroy()}if(o){o.destroy()}};y.prototype.onBeforeRendering=function(){let e=this._getPopover();if(this._hasSubmenu()&&!e){e=this._createPopover();e.attachAfterClose(this._afterPopoverClose,this);this._hasSubmenu()&&this.setProperty("_expanded",false)}};y.prototype.onfocusin=function(e){if(!this.isFocusable||!this.isFocusable()){e.preventDefault()}};y.prototype.setSelected=function(e){const t=o.getElementById(this.getAssociation("_group"));if(e&&t&&t.getItemSelectionMode()===m.SingleSelect){t._clearSelectedItems()}this.setProperty("selected",e);return this};y.prototype.isInteractive=function(){return true};y.prototype.isFocusable=function(){return true};y.prototype.isCountable=function(){return this.isFocusable()};y.prototype._getAccessibilityAttributes=function(){const e=this._oAccInfo||{bAccessible:false};if(!e.bAccessible){return{}}const o=this._hasSubmenu(),n=this._getMenuWrapper(),s=this.getSelected()&&this._getItemSelectionMode()!==m.None,i=!o?this.getShortcutText():null;return{role:this._getRole(),disabled:!this.getEnabled(),posinset:e["posinset"]||null,setsize:e["setsize"]||null,selected:null,checked:s||null,keyshortcuts:i||null,labelledby:{value:`${this.getId()}-txt`,append:true},haspopup:o?t.aria.HasPopup.Menu.toLowerCase():null,owns:o?n.getId():null,expanded:this.getProperty("_expanded")}};y.prototype._getRole=function(){let e;switch(this._getItemSelectionMode()){case m.SingleSelect:e="menuitemradio";break;case m.MultiSelect:e="menuitemcheckbox";break;default:e="menuitem"}return e};y.prototype._handleCloseRequest=function(e){if(!e.getParameter("bubbleToRoot")){this._closeSubmenu();e.cancelBubble()}else{this._getMenuWrapper().fireCloseItemSubmenu({item:this})}};y.prototype._closeSubmenu=function(){const e=this._getVisibleItems(),t=this._getPopover();e.forEach(e=>{if(e._hasSubmenu&&e._hasSubmenu()){e._closeSubmenu()}});if(t){t.removeStyleClass(this._getMenuWrapper()._aStyleClasses.join(" "));t._getPopup().setDurations(this._openDuration,0);t.close()}this.setProperty("_expanded",false);this.removeStyleClass("sapMMenuItemSubMenuOpen");this._getMenuWrapper().oOpenedSubmenuParent=null};y.prototype._openSubmenu=function(){if(!this.getEnabled()||!this._hasSubmenu()){return}const e=this._getMenuWrapper(),t=this._getPopover();if(t.isOpen()){return}t.addStyleClass(e._aStyleClasses.join(" "));this.setProperty("_expanded",true);if(c.system.phone){e.setTitle(this.getText());t.getCustomHeader().getContentMiddle()[0].setText(this.getText())}else{this.addStyleClass("sapMMenuItemSubMenuOpen")}t._getPopup().setDurations(this._openDuration,0);t.openBy(this)};y.prototype._getBackButtonTooltipForPageWithParent=function(){return u.getResourceBundleFor("sap.m").getText("MENU_PAGE_BACK_BUTTON")+" "+this.getText()};y.prototype._afterPopoverClose=function(){this.removeStyleClass("sapMMenuItemSubMenuOpen")};y.prototype._getItems=function(){const e=[];const t=o=>{o.forEach(o=>{if(!o.getItemSelectionMode){e.push(o)}else{t(o.getItems())}})};t(this.getItems());return e};y.prototype._getVisibleItems=function(){return this._getItems().filter(e=>e.getVisible())};y.prototype._getIcon=function(){const e=this.getIcon();let t=this.getAggregation("_icon");if(t){t.destroy()}if(!e){return null}t=d.createControlByURI({src:e,useIconTooltip:false},_);this.setAggregation("_icon",t,true);return t};y.prototype._getItemSelectionMode=function(){return this._itemSelectionMode};y.prototype._hasSubmenu=function(){return this._getVisibleItems().length>0};y.prototype._createMenuWrapper=function(e){const t=new p(this.getId()+"-menuWrapper",{isSubmenu:e});this.setAggregation("_menuWrapper",t,true);return t};y.prototype._createPopover=function(){let e=this._getPopover();if(e){return e}const t=c.system.phone?`${this.getId()}-title`:g.getStaticId("sap.m","MENU_POPOVER_ACCESSIBLE_NAME");const o=this._getMenuWrapper(),n=h.getRTL(),i=o.getIsSubmenu(),r=n?4:-4;e=new s(this.getId()+"-rp",{placement:this._getPopoverPlacement(),showHeader:false,showArrow:false,showCloseButton:false,verticalScrolling:true,horizontalScrolling:false,offsetX:i?r:0,offsetY:i?4:0,content:o,ariaLabelledBy:[t]});e.addStyleClass("sapMMenu");this.setAggregation("_popover",e,true);if(c.system.phone){e.setShowHeader(true);e.setEndButton(this._createCloseButton());e.setCustomHeader(this._createHeaderBar())}else if(i){e.getAggregation("_popup")._adaptPositionParams=function(){this._marginTop=0;this._marginLeft=0;this._marginRight=0;this._marginBottom=0;this._arrowOffset=0;this._offsets=["0 0","0 0","0 0","0 0"];this._myPositions=["begin bottom","begin top","begin top","end top"];this._atPositions=["begin top","end top","begin bottom","begin top"]}}e._oControl._getDocHeight=()=>window.innerHeight+window.scrollY;return e};y.prototype._createBackButton=function(){return new i(this.getId()+"-backbutton",{icon:"sap-icon://nav-back",tooltip:this._getBackButtonTooltipForPageWithParent(),press:e=>{this._getMenuWrapper().fireClosePopover()}})};y.prototype._createHeaderBar=function(){const e=this._getMenuWrapper(),t=new r({contentMiddle:new a(this.getId()+"-title",{text:e.getTitle()})}),o=this._getMenuWrapper().getIsSubmenu();if(o){t.addContentLeft(this._createBackButton())}return t};y.prototype._createCloseButton=function(){const e=u.getResourceBundleFor("sap.m");return new i({text:e.getText("MENU_CLOSE"),press:()=>{this._getMenuWrapper().fireClosePopover({bubbleToRoot:true})}})};y.prototype._getMenuWrapper=function(){const e=this._getPopover();return e?e.getContent()[0]:this.getAggregation("_menuWrapper")};y.prototype._getPopover=function(){return this.getAggregation("_popover")};y.prototype._getPopoverPlacement=function(){const e=this._getMenuWrapper().getIsSubmenu();if(e){const e=h.getRTL(),t=e?f.HorizontalPreferredLeft:f.HorizontalPreferredRight;return t}return f.VerticalPreferredBottom};y.prototype._setExtraContent=function(e){this._getPopover()._getPopup().setExtraContent([e])};return y});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/MenuItemRenderer", ["sap/ui/core/library"],function(e){"use strict";const t=e.ItemSelectionMode;const n={apiVersion:2};n.render=function(e,t){const n=!!t._getVisibleItems().length;e.openStart("li",t);this.renderAttributes(e,t);this.renderStyleClasses(e,t);this.renderInlineStyles(e,t);this.setAccessibilityAttributes(e,t);e.openEnd();this.renderIcon(e,t);this.renderText(e,t);if(n){this.renderSubmenuArrow(e,t)}else{this.renderShortcut(e,t);this.renderEndContent(e,t);this.renderSelectionMark(e,t)}e.close("li")};n.renderAttributes=function(e,t){if(t.getTooltip_AsString()){e.attr("title",t.getTooltip_AsString())}if(t.getVisible()&&t.isFocusable&&t.isFocusable()){e.attr("tabindex","0")}};n.renderStyleClasses=function(e,t){const n=t.getEnabled();e.class("sapMMenuItem");if(!n){e.class("sapMMenuItemDisabled")}};n.renderInlineStyles=function(e,t){};n.setAccessibilityAttributes=function(e,t){e.accessibilityState(t._getAccessibilityAttributes())};n.renderIcon=function(e,t){e.openStart("div");e.class("sapMMenuItemIcon");e.openEnd();if(t.getIcon()){const n=t._getIcon();e.renderControl(n)}e.close("div")};n.renderText=function(e,t){e.openStart("div",`${t.getId()}-txt`);e.class("sapMMenuItemText");e.openEnd();e.text(t.getText());e.close("div")};n.renderShortcut=function(e,t){const n=t.getShortcutText();if(n){e.openStart("div",`${t.getId()}-scuttxt`);e.class("sapMMenuItemShortcut");e.openEnd();e.text(n);e.close("div")}};n.renderSubmenuArrow=function(e,t){e.openStart("div");e.class("sapMMenuItemSubMenu");e.openEnd();e.openStart("div");e.class("sapUiIconMirrorInRTL");e.openEnd();e.close("div");e.close("div")};n.renderEndContent=function(e,t){const n=t.getEndContent();if(n.length){e.openStart("div",`${t.getId()}-endContent`);e.class("sapMMenuEndContent");e.openEnd();n.forEach(t=>e.renderControl(t));e.close("div")}};n.renderSelectionMark=function(e,n){if(n.getSelected()&&n._getItemSelectionMode()!==t.None){e.openStart("div",`${n.getId()}-sel`);e.class("sapMMenuItemSelected");e.openEnd();e.close("div")}};return n},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/MenuWrapper", ["sap/ui/core/library","sap/ui/core/Control","sap/m/MenuWrapperRenderer","sap/ui/dom/containsOrEquals","sap/ui/events/KeyCodes","sap/ui/Device","sap/ui/core/Lib","sap/base/i18n/Localization","sap/ui/events/PseudoEvents"],function(e,t,s,o,n,i,r,u,l){"use strict";const a=e.ItemSelectionMode;const p=300;const c=t.extend("sap.m.MenuWrapper",{metadata:{library:"sap.m",properties:{title:{type:"string",defaultValue:""},isSubmenu:{type:"boolean",defaultValue:false}},aggregations:{items:{type:"sap.m.IMenuItem",multiple:true,singularName:"item",bindable:"bindable"}},events:{itemSelected:{enableEventBubbling:true,parameters:{item:{type:"sap.m.IMenuItem"}}},closePopover:{enableEventBubbling:true,parameters:{bubbleToRoot:{type:"boolean"},origin:{type:"sap.m.IMenuItem"}}},closeItemSubmenu:{enableEventBubbling:true,parameters:{item:{type:"sap.m.IMenuItem"}}}},renderer:s}});c.prototype.init=function(){this._aStyleClasses=[];this._oRb=r.getResourceBundleFor("sap.m")};c.prototype.onBeforeRendering=function(){const e=this.getItems().filter(function(e){return e.isA("sap.m.MenuItemGroup")});e.forEach(function(e){const t=e.getItems();t.forEach(function(t){t.setAssociation("_group",e);t._itemSelectionMode=e.getItemSelectionMode()});if(e.getItemSelectionMode()===a.SingleSelect){e._ensureSingleSelection()}})};c.prototype.onAfterRendering=function(){if(document.body.classList.contains("sapUiSizeCompact")||this.hasStyleClass("sapUiSizeCompact")||this.getDomRef()?.closest(".sapUiSizeCompact")){this.addStyleClass("sapUiSizeCompact")}};c.prototype.onmouseover=function(e){const t=this.getItemByDomRef(e.target);if(!t){return}if(t!==this.oHoveredItem){this._setHoveredItem(t)}this._handleSubmenusAppearance(t,false)};c.prototype.onclick=function(e){const t=this.getItemByDomRef(e.target);if(!t){return}if(e.target.closest(`#${CSS.escape(t.getId())}-endContent`)){this.fireClosePopover({bubbleToRoot:true});return}this._bPreventPopoverClose=this._isShiftKeyPressed(e);this._selectItem(t,true);e.preventDefault();e.stopPropagation()};c.prototype.onsapselect=function(e){this._sapSelectOnKeyDown=true;e.preventDefault();e.stopPropagation()};c.prototype.onsapselectmodifiers=function(e){this._sapSelectOnKeyDown=true;this._bPreventPopoverClose=this._isShiftKeyPressed(e);e.preventDefault();e.stopPropagation()};c.prototype.onkeydown=function(e){const t=this.oHoveredItem?this._getVisibleItems().indexOf(this.oHoveredItem):-1,s=u.getRTL(),o=s?n.ARROW_RIGHT:n.ARROW_LEFT,i=s?n.ARROW_LEFT:n.ARROW_RIGHT;let r=true;if(t===-1){return}if(e.keyCode===n.ARROW_DOWN){this._setHoveredItem(this._getNextFocusableItem(t,1),true)}else if(e.keyCode===n.ARROW_UP){this._setHoveredItem(this._getPrevFocusableItem(t,1),true)}else if(e.keyCode===o){const t=this.oHoveredItem?this.oHoveredItem.getEndContent():[];if(t.length){this._handleEndContentNavigation(e,t)}else if(this.getIsSubmenu()){this.fireClosePopover()}}else if(e.keyCode===i){const t=this.oHoveredItem?this.oHoveredItem.getEndContent():[];if(this.oHoveredItem&&this.oHoveredItem._hasSubmenu()){this._handleSubmenusAppearance(this.oHoveredItem,true)}else if(t.length){this._handleEndContentNavigation(e,t)}}else if(e.keyCode===n.ESCAPE){this.fireClosePopover()}else if(e.keyCode===n.HOME){this._setHoveredItem(this._getNextFocusableItem(-1,1),true)}else if(e.keyCode===n.END){this._setHoveredItem(this._getPrevFocusableItem(this._getItems().length,1),true)}else if(e.keyCode===n.PAGE_UP){this._setHoveredItem(this._getPrevFocusableItem(t,this._getPageSize()),true)}else if(e.keyCode===n.PAGE_DOWN){this._setHoveredItem(this._getNextFocusableItem(t,this._getPageSize()),true)}else if(e.keyCode===n.TAB){if(this.getIsSubmenu()){e.preventDefault()}this.fireClosePopover()}else if(e.keyCode===n.F6&&this.oFocusedEndContentItem){this.oHoveredItem.focus();this.oFocusedEndContentItem=null}else{r=false}if(r&&!e.metaKey&&!e.altKey){e.preventDefault();e.stopPropagation()}};c.prototype.onkeyup=function(e){if(!this._sapSelectOnKeyDown&&!this._bPreventPopoverClose){return}else{this._sapSelectOnKeyDown=false}if(!l.events.sapselect.fnCheck(e)&&e.keyCode!==n.ENTER&&!this._bPreventPopoverClose){return}this._selectItem(this.oHoveredItem,false,true);e.preventDefault();e.stopPropagation()};c.prototype.onsapbackspacemodifiers=c.prototype.onsapbackspace;c.prototype.onfocusin=function(e){const t=this.getItemByDomRef(e.target);if(t){this.oHoveredItem=t}};c.prototype.getItemByDomRef=function(e){const t=this._getItems();for(let s=0;s<t.length;s++){const n=t[s],i=n.getDomRef();if(o(i,e)){return n}}return null};c.prototype._isShiftKeyPressed=function(e){return e.shiftKey&&!e.metaKey&&!e.altKey&&!e.ctrlKey};c.prototype._processStyleClasses=function(e,t){if(t==="setStyleClass"){this._aStyleClasses=[];t="addStyleClass"}if(e===""){return}const s=e.split(/\s+/).filter(Boolean);const o=this._aStyleClasses.join(" ");s.forEach(e=>{const s=this._aStyleClasses.indexOf(e);const o=(t==="addStyleClass"||t==="toggleStyleClass")&&s===-1;const n=(t==="removeStyleClass"||t==="toggleStyleClass")&&s!==-1;if(o){this._aStyleClasses.push(e)}else if(n){this._aStyleClasses.splice(s,1)}});if(this.oOpenedSubmenuParent){const e=this._aStyleClasses.join(" ");const t=this.oOpenedSubmenuParent._getPopover();this.oOpenedSubmenuParent._getMenuWrapper()._processStyleClasses(o,"removeStyleClass");this.oOpenedSubmenuParent._getMenuWrapper()._processStyleClasses(this._aStyleClasses.join(" "),"addStyleClass");if(t){t.removeStyleClass(o);t.addStyleClass(e)}}};c.prototype._selectItem=function(e,t,s){if(this.oFocusedEndContentItem){this.fireClosePopover({bubbleToRoot:true});return}if(!e||!e.getEnabled()){return}if(e._hasSubmenu()){this._handleSubmenusAppearance(e,!t)}else if(e.isInteractive&&e.isInteractive()){if(e._getItemSelectionMode&&e._getItemSelectionMode()!==a.None){e.setSelected(!e.getSelected())}else{this._bPreventPopoverClose=false}this.fireItemSelected({item:e});e.firePress({item:e});if(!this._bPreventPopoverClose){this.fireClosePopover({bubbleToRoot:true,origin:e})}this._bPreventPopoverClose=false}};c.prototype._handleEndContentNavigation=function(e,t){const s=this.oFocusedEndContentItem?t.indexOf(this.oFocusedEndContentItem):-1,o=u.getRTL(),i=o?n.ARROW_LEFT:n.ARROW_RIGHT;let r;if(e.keyCode===i){r=s+1>=t.length?t.length-1:s+1}else{r=s-1<0?0:s-1}const l=t[r];if(!l){this.oFocusedEndContentItem=null;return}if(l&&l!==this.oFocusedEndContentItem&&l.isFocusable()){this.oFocusedEndContentItem=l;l.focus()}};c.prototype._handleSubmenusAppearance=function(e,t,s){if(this.oOpenedSubmenuParent&&this.oOpenedSubmenuParent._hasSubmenu()&&!this.oOpenedSubmenuParent._getPopover().isOpen()){this.oOpenedSubmenuParent.removeStyleClass("sapMMenuItemSubMenuOpen");this.oOpenedSubmenuParent=null}if(!t&&!i.system.phone&&e===this.oOpenedSubmenuParent){return}const o=e._hasSubmenu();this._closeOpenedSubmenu();this._discardOpenSubmenuDelayed();if(!o||!e.getEnabled()){return}if(s){this._openSubmenuDelayed(e,t)}else{this._openSubmenu(e,t)}};c.prototype._getItems=function(){const e=[];const t=s=>{s.forEach(s=>{if(!this._isMenuItemGroup(s)){e.push(s)}else{t(s.getItems())}})};t(this.getItems());return e};c.prototype._getVisibleItems=function(){return this._getItems().filter(e=>e.getVisible())};c.prototype._getPrevFocusableItem=function(e,t){const s=this._getVisibleItems();let o=e,n=e;if(!s.length){return undefined}while(n>0&&t>0){n--;if(s[n].isFocusable&&s[n].isFocusable()){t--;o=n}}return o!==e?s[o]:undefined};c.prototype._getNextFocusableItem=function(e,t){const s=this._getVisibleItems();let o=e,n=e;if(!s.length){return undefined}while(n<s.length-1&&t>0){n++;if(s[n].isFocusable&&s[n].isFocusable()){t--;o=n}}return o!==e?s[o]:undefined};c.prototype._setHoveredItem=function(e,t){if(!e||e===this.oHoveredItem){return}if(e){t&&this._closeOpenedSubmenu();this.oHoveredItem=e;e.focus();this.oFocusedEndContentItem=null}};c.prototype._isMenuItemGroup=function(e){return!!e.getItemSelectionMode};c.prototype._getPageSize=function(){return 5};c.prototype._closeOpenedSubmenu=function(e){if(this.oOpenedSubmenuParent){const t=this.oOpenedSubmenuParent._getPopover(),s=this.getItems().includes(this.oOpenedSubmenuParent)?this.oOpenedSubmenuParent._getMenuWrapper():null;if(t&&t._oControl){t._oControl._oPreviousFocus=undefined}this.oOpenedSubmenuParent=null;if(!s){return}if(e){setTimeout(()=>{s.fireClosePopover()},p)}else{s.fireClosePopover()}}};c.prototype._openSubmenu=function(e,t){if(!e){return}const s=e._getPopover();e._getMenuWrapper()._processStyleClasses(this._aStyleClasses.join(" "),"setStyleClass");s.setInitialFocus(t?null:e);e._openSubmenu();e._setExtraContent(this.getDomRef());this.oOpenedSubmenuParent=e;e.oParentWrapper=this};c.prototype._openSubmenuDelayed=function(e,t){this._delayedSubmenuTimer=setTimeout(()=>this._openSubmenu(e,t),p)};c.prototype._discardOpenSubmenuDelayed=function(){if(this._delayedSubmenuTimer){clearTimeout(this._delayedSubmenuTimer);this._delayedSubmenuTimer=null}};c.prototype._getItemsWithIconCount=function(){return this._getVisibleItems().filter(e=>e.getIcon&&e.getIcon()).length};c.prototype._getAccessibilityEnabled=function(){};c.prototype._prepareItemsAccessibilityInfo=function(){const e=this._getVisibleItems(),t=e.filter(e=>e.isCountable&&e.isCountable()).length;let s=1;e.forEach(e=>{const o={bAccessible:true};if(e.isCountable&&e.isCountable()){o["posinset"]=s;o["setsize"]=t;s++}e._oAccInfo=o})};return c});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/MenuWrapperRenderer", ["sap/ui/core/library","sap/ui/core/ControlBehavior"],function(e,t){"use strict";const r={apiVersion:2};const i=e.ItemSelectionMode;r.render=function(e,r){const i=r._getVisibleItems(),s=t.isAccessibilityEnabled();if(i.length){e.openStart("ul",r);if(s){e.attr("role","menu");r._prepareItemsAccessibilityInfo()}e.class("sapMMenuList");if(!r._getItemsWithIconCount()){e.class("sapMMenuNoIcons")}e.openEnd();this.renderItems(e,r);e.close("ul")}};r.renderItems=function(e,t){const r=t._getVisibleItems();let s=null,o=null,n=false,a=false,l;r.forEach((r,c)=>{o=r.getAssociation("_group");if(n&&s!==o){e.close("div");n=false;this.renderSeparator(e);a=true}if((s!==o||r.getStartsSection())&&!a&&c!==0){this.renderSeparator(e)}if(o&&!n){switch(r._itemSelectionMode){case i.None:l=t._oRb.getText("MENU_ITEM_GROUP_NONE_ACCESSIBLE_NAME");break;case i.SingleSelect:l=t._oRb.getText("MENU_ITEM_GROUP_SINGLE_ACCESSIBLE_NAME");break;case i.MultiSelect:l=t._oRb.getText("MENU_ITEM_GROUP_MULTI_ACCESSIBLE_NAME");break;default:l=""}e.openStart("div");e.attr("role","group");l&&e.attr("aria-label",l);e.openEnd();n=true}s=o;a=false;e.renderControl(r)});if(n){e.close("div")}};r.renderSeparator=function(e){const r=t.isAccessibilityEnabled();e.openStart("li");e.class("sapMMenuSeparator");if(r){e.attr("role","separator")}e.openEnd();e.voidStart("hr").voidEnd();e.close("li")};return r},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/TableSelectDialog", ["./Button","./Dialog","./SearchField","./Table","./library","sap/ui/core/Lib","sap/ui/core/library","./SelectDialogBase","sap/ui/core/InvisibleText","sap/ui/core/InvisibleMessage","sap/ui/core/StaticArea","sap/ui/Device","sap/m/Toolbar","sap/m/Text","sap/m/BusyIndicator","sap/m/Bar","sap/m/Title","sap/base/Log","sap/ui/core/Element"],function(e,t,i,o,s,a,n,l,r,h,u,d,c,g,p,_,f,y,b){"use strict";var S=s.ListMode;var m=s.ButtonType;var T=s.TitleAlignment;var C=n.InvisibleMessageMode;var I=n.TitleLevel;var B=l.extend("sap.m.TableSelectDialog",{metadata:{library:"sap.m",properties:{title:{type:"string",group:"Appearance",defaultValue:null},noDataText:{type:"string",group:"Appearance",defaultValue:null},multiSelect:{type:"boolean",group:"Dimension",defaultValue:false},growing:{type:"boolean",group:"Behavior",defaultValue:true},growingThreshold:{type:"int",group:"Misc",defaultValue:null},contentWidth:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},rememberSelections:{type:"boolean",group:"Behavior",defaultValue:false},contentHeight:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},showClearButton:{type:"boolean",group:"Behavior",defaultValue:false},confirmButtonText:{type:"string",group:"Appearance"},draggable:{type:"boolean",group:"Behavior",defaultValue:false},resizable:{type:"boolean",group:"Behavior",defaultValue:false},titleAlignment:{type:"sap.m.TitleAlignment",group:"Misc",defaultValue:T.Auto},searchPlaceholder:{type:"string",group:"Appearance"}},defaultAggregation:"items",aggregations:{items:{type:"sap.m.ColumnListItem",multiple:true,singularName:"item",bindable:"bindable",forwarding:{idSuffix:"-table",aggregation:"items",forwardBinding:true}},_dialog:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},columns:{type:"sap.m.Column",multiple:true,singularName:"column",bindable:"bindable",forwarding:{idSuffix:"-table",aggregation:"columns",forwardBinding:true}}},events:{confirm:{parameters:{selectedItem:{type:"sap.m.StandardListItem"},selectedItems:{type:"sap.m.StandardListItem[]"},selectedContexts:{type:"object[]"}}},search:{parameters:{value:{type:"string"},itemsBinding:{type:"any"},clearButtonPressed:{type:"boolean"}}},liveChange:{parameters:{value:{type:"string"},itemsBinding:{type:"any"}}},cancel:{}}},renderer:{apiVersion:2,render:function(){}}});B.prototype.init=function(){var e=this,n=0;this._bAppendedToUIArea=false;this._bInitBusy=false;this._bFirstRender=true;this._oRb=a.getResourceBundleFor("sap.m");this._bAfterCloseAttached=false;this._oItemDelegate={ontap:this._tableColumnsEventDelegates.bind(this),onsapselect:this._tableColumnsEventDelegates.bind(this)};this._oTable=new o(this.getId()+"-table",{growing:e.getGrowing(),growingScrollToLoad:e.getGrowing(),mode:S.SingleSelectMaster,modeAnimationOn:false,sticky:[s.Sticky.InfoToolbar,s.Sticky.ColumnHeaders],infoToolbar:new c({visible:false,active:false,content:[new g({text:this._oRb.getText("TABLESELECTDIALOG_SELECTEDITEMS",[0])})]}),ariaLabelledBy:l.getInvisibleText(),selectionChange:this._selectionChange.bind(this),updateStarted:this._updateStarted.bind(this),updateFinished:this._updateFinished.bind(this),popinChanged:function(e){if(e.getParameter("hasPopin")){this._oTable.getItems().forEach(function(e){e._oPopin?.addEventDelegate(this._oItemDelegate)},this)}}.bind(this)});this._table=this._oTable;this._oBusyIndicator=new p(this.getId()+"-busyIndicator").addStyleClass("sapMTableSelectDialogBusyIndicator",true);this._oSearchField=new i(this.getId()+"-searchField",{width:"100%",ariaLabelledBy:r.getStaticId("sap.m","SELECTDIALOG_SEARCH"),liveChange:function(t){var i=t.getSource().getValue(),o=i?300:0;clearTimeout(n);if(o){n=setTimeout(function(){e._executeSearch(i,false,"liveChange")},o)}else{e._executeSearch(i,false,"liveChange")}},search:function(t){var i=t.getSource().getValue(),o=t.getParameter("clearButtonPressed");e._executeSearch(i,o,"search")}});this._searchField=this._oSearchField;this._oSubHeader=new _(this.getId()+"-subHeader",{contentMiddle:[this._searchField]});var h=new _(this.getId()+"-dialog-header",{titleAlignment:this.getTitleAlignment(),contentMiddle:[new f(this.getId()+"-dialog-title",{level:I.H1})]});this._oDialog=new t(this.getId()+"-dialog",{customHeader:h,titleAlignment:this.getTitleAlignment(),stretch:d.system.phone,contentHeight:"2000px",subHeader:this._oSubHeader,content:[this._oBusyIndicator,this._oTable],endButton:this._getCancelButton(),draggable:this.getDraggable()&&d.system.desktop,resizable:this.getResizable()&&d.system.desktop,escapeHandler:function(t){e._onCancel();t.resolve()}}).addStyleClass("sapMTableSelectDialog");this._dialog=this._oDialog;this.setAggregation("_dialog",this._oDialog);this._sSearchFieldValue="";this._iTableUpdateRequested=0;this._oDialog.getProperty=function(e){if(e!=="title"){return l.prototype.getProperty.call(this,e)}return this.getCustomHeader().getAggregation("contentMiddle")[0].getText()}.bind(this._oDialog)};B.prototype.exit=function(){this._oTable=null;this._oSearchField=null;this._oSubHeader=null;this._oClearButton=null;this._oBusyIndicator=null;this._sSearchFieldValue=null;this._iTableUpdateRequested=null;this._bInitBusy=false;this._bFirstRender=false;if(this._bAppendedToUIArea){var e=u.getUIArea();e.removeContent(this,true)}if(this._oDialog){this._oDialog.destroy();this._oDialog=null}if(this._oOkButton){this._oOkButton.destroy();this._oOkButton=null}this._oSelectedItem=null;this._aSelectedItems=null;this._aInitiallySelectedItems=null;this._table=null;this._searchField=null;this._dialog=null};B.prototype.onAfterRendering=function(){if(this._bInitBusy&&this._bFirstRender){this._setBusy(true);this._bInitBusy=false;this._bFirstRender=false}};B.prototype.invalidate=function(){if(this._oDialog&&(!arguments[0]||arguments[0]&&arguments[0].getId()!==this.getId()+"-dialog")){this._oDialog.invalidate(arguments)}else{l.prototype.invalidate.apply(this,arguments)}return this};B.prototype.open=function(e){if(!this.getParent()&&!this._bAppendedToUIArea){var t=u.getUIArea();t.addContent(this,true);this._bAppendedToUIArea=true}this._oSearchField.setValue(e);this._sSearchFieldValue=e||"";this._oDialog.setInitialFocus(this._getInitialFocus());this._updateSelectionIndicator();this.updateDialogAriaDescribedBy();this._oDialog.open();if(this._bInitBusy){this._setBusy(true)}this._aInitiallySelectedItems=this._oTable.getSelectedItems();return this};B.prototype.setGrowing=function(e){this._oTable.setGrowing(e);this._oTable.setGrowingScrollToLoad(e);this.setProperty("growing",e,true);return this};B.prototype.setGrowingThreshold=function(e){this._oTable.setGrowingThreshold(e);this.setProperty("growingThreshold",e,true);return this};B.prototype.setDraggable=function(e){this._setInteractionProperty(e,"draggable",this._oDialog.setDraggable);return this};B.prototype.setResizable=function(e){this._setInteractionProperty(e,"resizable",this._oDialog.setResizable);return this};B.prototype._setInteractionProperty=function(e,t,i){this.setProperty(t,e,true);if(!d.system.desktop&&e){y.warning(t+" property works only on desktop devices!");return}if(d.system.desktop&&this._oDialog){i.call(this._oDialog,e)}};B.prototype.setBusy=function(e){this._oSearchField.setEnabled(!e);this._oDialog.setBusy.apply(this._oDialog,arguments);return this};B.prototype.getBusy=function(){return this._oDialog.getBusy.apply(this._oDialog,arguments)};B.prototype.setBusyIndicatorDelay=function(e){this._oTable.setBusyIndicatorDelay(e);this._oDialog.setBusyIndicatorDelay(e);this.setProperty("busyIndicatorDelay",e,true);return this};B.prototype.setMultiSelect=function(e){this.setProperty("multiSelect",e,true);if(e){this._oTable.setMode(S.MultiSelect);this._oTable.setIncludeItemInSelection(true);this._oDialog.setEndButton(this._getCancelButton());this._oDialog.setBeginButton(this._getOkButton())}else{this._oTable.setMode(S.SingleSelectMaster);this._oDialog.setEndButton(this._getCancelButton());this._oDialog.destroyBeginButton();delete this._oOkButton}return this};B.prototype.setTitle=function(e){this.setProperty("title",e,true);this._oDialog.getCustomHeader().getAggregation("contentMiddle")[0].setText(e);return this};B.prototype.setTitleAlignment=function(e){this.setProperty("titleAlignment",e);if(this._oDialog){this._oDialog.setTitleAlignment(e)}return this};B.prototype.setConfirmButtonText=function(e){this.setProperty("confirmButtonText",e,true);this._oOkButton&&this._oOkButton.setText(e||this._oRb.getText("SELECT_CONFIRM_BUTTON"));return this};B.prototype.setNoDataText=function(e){this._oTable.setNoDataText(e);return this};B.prototype.getNoDataText=function(){return this._oTable.getNoDataText()};B.prototype.setSearchPlaceholder=function(e){this.setProperty("searchPlaceholder",e);this._oSearchField.setPlaceholder(e);return this};B.prototype.getSearchPlaceholder=function(){return this._oSearchField.getPlaceholder()};B.prototype.getContentWidth=function(){return this._oDialog.getContentWidth()};B.prototype.setContentWidth=function(e){this._oDialog.setContentWidth(e);return this};B.prototype.getContentHeight=function(){return this._oDialog.getContentHeight()};B.prototype.setContentHeight=function(e){this._oDialog.setContentHeight(e);return this};B.prototype.addStyleClass=function(){this._oDialog.addStyleClass.apply(this._oDialog,arguments);return this};B.prototype.removeStyleClass=function(){this._oDialog.removeStyleClass.apply(this._oDialog,arguments);return this};B.prototype.toggleStyleClass=function(){this._oDialog.toggleStyleClass.apply(this._oDialog,arguments);return this};B.prototype.hasStyleClass=function(){return this._oDialog.hasStyleClass.apply(this._oDialog,arguments)};B.prototype.getDomRef=function(){if(this._oDialog){return this._oDialog.getDomRef.apply(this._oDialog,arguments)}else{return null}};B.prototype.setShowClearButton=function(e){this.setProperty("showClearButton",e,true);if(e){var t=this._oDialog.getCustomHeader();t.addContentRight(this._getClearButton());this._oClearButton.setVisible(e)}else if(this._oClearButton){this._oClearButton.setVisible(e)}return this};B.prototype.setModel=function(e,t){this._setBusy(false);this._bInitBusy=false;this._iTableUpdateRequested+=1;this._oTable.setModel(e,t);l.prototype.setModel.apply(this,arguments);this._updateSelectionIndicator();return this};B.prototype.setBindingContext=function(e,t){this._oTable.setBindingContext(e,t);l.prototype.setBindingContext.apply(this,arguments);return this};B.prototype._executeSearch=function(e,t,i){var o=this._oTable,s=o?o.getBinding("items"):undefined,a=this._sSearchFieldValue!==e;if(this._oDialog.isOpen()&&(a&&i==="liveChange"||i==="search")){this._sSearchFieldValue=e;if(s){this._iTableUpdateRequested+=1;if(i==="search"){this.fireSearch({value:e,itemsBinding:s,clearButtonPressed:t})}else if(i==="liveChange"){this.fireLiveChange({value:e,itemsBinding:s})}}else{if(i==="search"){this.fireSearch({value:e,clearButtonPressed:t})}else if(i==="liveChange"){this.fireLiveChange({value:e})}}}return this};B.prototype._resetAfterClose=function(){this._oSelectedItem=this._oTable.getSelectedItem();this._aSelectedItems=this._oTable.getSelectedItems();this._bAfterCloseAttached=false;this._fireConfirmAndUpdateSelection()};B.prototype._selectionChange=function(e){if(e.getParameters){this.fireSelectionChange(e.getParameters())}if(!this._oDialog){return}if(this.getMultiSelect()){this._updateSelectionIndicator();this._announceSelectionIndicator();return}if(!this._bAfterCloseAttached){this._oDialog.attachEventOnce("afterClose",this._resetAfterClose,this);this._bAfterCloseAttached=true}this._oDialog.close()};B.prototype._setBusy=function(e){if(this._iTableUpdateRequested){if(e){this._oSearchField.setEnabled(false);this._oTable.addStyleClass("sapMSelectDialogListHide");this._oBusyIndicator.$().css("display","inline-block")}else{this._oSearchField.setEnabled(true);this._oTable.removeStyleClass("sapMSelectDialogListHide");this._oBusyIndicator.$().css("display","none")}}};B.prototype._updateStarted=function(e){this.fireUpdateStarted(e.getParameters());if(this.getModel()&&this.getModel().isA("sap.ui.model.odata.ODataModel")){if(this._oDialog.isOpen()&&this._iTableUpdateRequested){this._setBusy(true)}else{this._bInitBusy=true}}};B.prototype._updateFinished=function(e){this.fireUpdateFinished(e.getParameters());this._updateSelectionIndicator();if(this.getModel()&&this.getModel().isA("sap.ui.model.odata.ODataModel")){this._setBusy(false);this._bInitBusy=false}this._iTableUpdateRequested=0;this._oTable.getItems().forEach(function(e){e.addEventDelegate(this._oItemDelegate);e._oPopin?.addEventDelegate(this._oItemDelegate)},this)};B.prototype._getOkButton=function(){var t=this,i=null;i=function(){t._sSearchFieldValue=null;t._oSelectedItem=t._oTable.getSelectedItem();t._aSelectedItems=t._oTable.getSelectedItems();t._oDialog.detachAfterClose(i);t._fireConfirmAndUpdateSelection()};if(!this._oOkButton){this._oOkButton=new e(this.getId()+"-ok",{type:m.Emphasized,text:this.getConfirmButtonText()||this._oRb.getText("SELECT_CONFIRM_BUTTON"),press:function(){t._oDialog.attachAfterClose(i);t._oDialog.close()}})}return this._oOkButton};B.prototype._getCancelButton=function(){var t=this;if(!this._oCancelButton){this._oCancelButton=new e(this.getId()+"-cancel",{text:this._oRb.getText("MSGBOX_CANCEL"),press:function(){t._onCancel()}})}return this._oCancelButton};B.prototype._getClearButton=function(){if(!this._oClearButton){this._oClearButton=new e(this.getId()+"-clear",{text:this._oRb.getText("TABLESELECTDIALOG_CLEARBUTTON"),press:function(){this._removeSelection();this._updateSelectionIndicator();this._getInitialFocus().focus()}.bind(this)})}return this._oClearButton};B.prototype._onCancel=function(e){var t=this,i=null;i=function(){t._oSelectedItem=null;t._aSelectedItems=[];t._sSearchFieldValue=null;t._oDialog.detachAfterClose(i);t.fireCancel()};t._resetSelection();this._oDialog.attachAfterClose(i);this._oDialog.close()};B.prototype._updateSelectionIndicator=function(){var e=this._oTable.getSelectedContextPaths(true).length,t=this._oTable.getInfoToolbar();if(this.getShowClearButton()&&this._oClearButton){this._oClearButton.setEnabled(e>0)}t.setVisible(!!e);t.getContent()[0].setText(this._oRb.getText("TABLESELECTDIALOG_SELECTEDITEMS",[e]));l.getSelectionIndicatorInvisibleText().setText(e>0?this._oRb.getText("TABLESELECTDIALOG_SELECTEDITEMS_SR",[e]):"")};B.prototype._announceSelectionIndicator=function(){const e=this._oTable.getSelectedContextPaths(true).length;if(e){h.getInstance().announce(this._oRb.getText("TABLESELECTDIALOG_SELECTEDITEMS_SR",[e]),C.Polite)}};B.prototype._fireConfirmAndUpdateSelection=function(){var e={selectedItem:this._oSelectedItem,selectedItems:this._aSelectedItems};Object.defineProperty(e,"selectedContexts",{get:this._oTable.getSelectedContexts.bind(this._oTable,true)});this.fireConfirm(e);this._updateSelection()};B.prototype._updateSelection=function(){if(!this.getRememberSelections()&&!this.bIsDestroyed){this._removeSelection()}};B.prototype._removeSelection=function(){this._oTable.removeSelections(true);delete this._oSelectedItem;delete this._aSelectedItems};B.prototype._resetSelection=function(){var e=0;if(!this.bIsDestroyed){var t=this._oTable.getBinding("items");if(t&&t.aFilters&&t.aFilters.length){t.filter([])}this._oTable.removeSelections();for(;e<this._aInitiallySelectedItems.length;e++){this._oTable.setSelectedItem(this._aInitiallySelectedItems[e])}}};B.prototype._tableColumnsEventDelegates=function(e){let t=e.target.closest(".sapMLIB"),i;if(!t){t=e.target.closest(".sapMListTblSubRow");const o=b.closestTo(t);i=o.getParent()}else{i=b.closestTo(t)}if(i._eventHandledByControl){return}if(e&&e.isDefaultPrevented&&e.isMarked&&(e.isDefaultPrevented()||e.isMarked("preventSelectionChange"))){return}if(e&&e.srcControl.isA("sap.m.GroupHeaderListItem")){return}this._selectionChange(e)};return B});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/GenericTile", ["sap/m/GenericTile","sap/m/GenericTileRenderer"],function(e,r){"use strict";var i=e.extend("sap.suite.ui.commons.GenericTile",{metadata:{deprecated:true,library:"sap.suite.ui.commons"},renderer:r});return i});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/HarveyBallMicroChart", ["sap/suite/ui/microchart/library","sap/suite/ui/microchart/HarveyBallMicroChart","sap/suite/ui/microchart/HarveyBallMicroChartRenderer"],function(r,a,e){"use strict";var i=a.extend("sap.suite.ui.commons.HarveyBallMicroChart",{metadata:{deprecated:true,library:"sap.suite.ui.commons"},renderer:e});return i});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/HarveyBallMicroChartItem", ["sap/suite/ui/microchart/HarveyBallMicroChartItem"],function(e){"use strict";var a=e.extend("sap.suite.ui.commons.HarveyBallMicroChartItem",{metadata:{deprecated:true,library:"sap.suite.ui.commons"}});return a});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/TileContent", ["sap/m/TileContent","sap/m/TileContentRenderer"],function(e,t){"use strict";var n=e.extend("sap.suite.ui.commons.TileContent",{metadata:{deprecated:true,library:"sap.suite.ui.commons"},renderer:t});return n});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/suite/ui/commons/library", ["sap/ui/core/Core","sap/ui/core/Lib","sap/ui/base/DataType","sap/ui/core/library","sap/m/library"],function(e,i,o){"use strict";var t=i.init({apiVersion:2,name:"sap.suite.ui.commons",dependencies:["sap.ui.core","sap.m"],types:["sap.suite.ui.commons.BulletChartMode","sap.suite.ui.commons.CalculationBuilderComparisonOperatorType","sap.suite.ui.commons.CalculationBuilderFunctionType","sap.suite.ui.commons.CalculationBuilderItemType","sap.suite.ui.commons.CalculationBuilderLayoutType","sap.suite.ui.commons.CalculationBuilderLogicalOperatorType","sap.suite.ui.commons.CalculationBuilderOperatorType","sap.suite.ui.commons.CalculationBuilderValidationMode","sap.suite.ui.commons.CommonBackground","sap.suite.ui.commons.ComparisonChartView","sap.suite.ui.commons.DeviationIndicator","sap.suite.ui.commons.FacetOverviewHeight","sap.suite.ui.commons.FrameType","sap.suite.ui.commons.HeaderContainerView","sap.suite.ui.commons.ImageEditorContainerMode","sap.suite.ui.commons.ImageEditorMode","sap.suite.ui.commons.ImageFormat","sap.suite.ui.commons.InfoTileSize","sap.suite.ui.commons.InfoTileTextColor","sap.suite.ui.commons.InfoTileValueColor","sap.suite.ui.commons.LoadState","sap.suite.ui.commons.MicroAreaChartView","sap.suite.ui.commons.MicroProcessFlowRenderType","sap.suite.ui.commons.networkgraph.ActionButtonPosition","sap.suite.ui.commons.networkgraph.BackgroundColor","sap.suite.ui.commons.networkgraph.ElementStatus","sap.suite.ui.commons.networkgraph.LayoutRenderType","sap.suite.ui.commons.networkgraph.LineArrowOrientation","sap.suite.ui.commons.networkgraph.LineArrowPosition","sap.suite.ui.commons.networkgraph.LineType","sap.suite.ui.commons.networkgraph.HeaderCheckboxState","sap.suite.ui.commons.networkgraph.NodePlacement","sap.suite.ui.commons.networkgraph.NodeShape","sap.suite.ui.commons.networkgraph.Orientation","sap.suite.ui.commons.networkgraph.RenderType","sap.suite.ui.commons.ProcessFlowConnectionLabelState","sap.suite.ui.commons.ProcessFlowConnectionState","sap.suite.ui.commons.ProcessFlowConnectionType","sap.suite.ui.commons.ProcessFlowDisplayState","sap.suite.ui.commons.ProcessFlowLaneState","sap.suite.ui.commons.ProcessFlowNodeState","sap.suite.ui.commons.ProcessFlowNodeType","sap.suite.ui.commons.ProcessFlowZoomLevel","sap.suite.ui.commons.SelectionState","sap.suite.ui.commons.statusindicator.FillingType","sap.suite.ui.commons.statusindicator.FillingDirectionType","sap.suite.ui.commons.statusindicator.HorizontalAlignmentType","sap.suite.ui.commons.statusindicator.VerticalAlignmentType","sap.suite.ui.commons.statusindicator.SizeType","sap.suite.ui.commons.statusindicator.LabelPositionType","sap.suite.ui.commons.taccount.TAccountPanelState","sap.suite.ui.commons.ThingGroupDesign","sap.suite.ui.commons.TimelineAlignment","sap.suite.ui.commons.TimelineAxisOrientation","sap.suite.ui.commons.TimelineFilterType","sap.suite.ui.commons.TimelineGroupType","sap.suite.ui.commons.TimelineScrollingFadeout","sap.suite.ui.commons.ValueStatus","sap.suite.ui.commons.SemanticColorType","sap.suite.ui.commons.ImageEditorContainerButton","sap.suite.ui.commons.FilePickerModes","sap.suite.ui.commons.FilePickerType","sap.suite.ui.commons.SelectionModes"],interfaces:[],controls:["sap.suite.ui.commons.BulletChart","sap.suite.ui.commons.BusinessCard","sap.suite.ui.commons.CalculationBuilder","sap.suite.ui.commons.CalculationBuilderExpression","sap.suite.ui.commons.CalculationBuilderFunction","sap.suite.ui.commons.CalculationBuilderInput","sap.suite.ui.commons.CalculationBuilderItem","sap.suite.ui.commons.CalculationBuilderVariable","sap.suite.ui.commons.ChartContainer","sap.suite.ui.commons.ChartContainerContent","sap.suite.ui.commons.ChartContainerToolbarPlaceholder","sap.suite.ui.commons.ChartTile","sap.suite.ui.commons.ColumnMicroChart","sap.suite.ui.commons.ComparisonChart","sap.suite.ui.commons.CloudFilePicker","sap.suite.ui.commons.DateRangeScroller","sap.suite.ui.commons.DateRangeSlider","sap.suite.ui.commons.DateRangeSliderInternal","sap.suite.ui.commons.DeltaMicroChart","sap.suite.ui.commons.DynamicContainer","sap.suite.ui.commons.FacetOverview","sap.suite.ui.commons.FeedItemHeader","sap.suite.ui.commons.FeedTile","sap.suite.ui.commons.GenericTile","sap.suite.ui.commons.GenericTile2X2","sap.suite.ui.commons.HarveyBallMicroChart","sap.suite.ui.commons.HeaderCell","sap.suite.ui.commons.HeaderContainer","sap.suite.ui.commons.imageeditor.ImageEditor","sap.suite.ui.commons.imageeditor.ImageEditorContainer","sap.suite.ui.commons.InfoTile","sap.suite.ui.commons.JamContent","sap.suite.ui.commons.KpiTile","sap.suite.ui.commons.LaunchTile","sap.suite.ui.commons.LinkActionSheet","sap.suite.ui.commons.MicroAreaChart","sap.suite.ui.commons.MonitoringContent","sap.suite.ui.commons.MonitoringTile","sap.suite.ui.commons.networkgraph.Graph","sap.suite.ui.commons.networkgraph.Node","sap.suite.ui.commons.NewsContent","sap.suite.ui.commons.NoteTaker","sap.suite.ui.commons.NoteTakerCard","sap.suite.ui.commons.NoteTakerFeeder","sap.suite.ui.commons.NumericContent","sap.suite.ui.commons.NumericTile","sap.suite.ui.commons.PictureZoomIn","sap.suite.ui.commons.ProcessFlow","sap.suite.ui.commons.ProcessFlowConnection","sap.suite.ui.commons.ProcessFlowConnectionLabel","sap.suite.ui.commons.ProcessFlowLaneHeader","sap.suite.ui.commons.ProcessFlowNode","sap.suite.ui.commons.RepeaterViewConfiguration","sap.suite.ui.commons.SplitButton","sap.suite.ui.commons.statusindicator.StatusIndicator","sap.suite.ui.commons.statusindicator.ShapeGroup","sap.suite.ui.commons.statusindicator.Shape","sap.suite.ui.commons.statusindicator.Rectangle","sap.suite.ui.commons.statusindicator.Circle","sap.suite.ui.commons.statusindicator.CustomShape","sap.suite.ui.commons.statusindicator.PropertyThreshold","sap.suite.ui.commons.statusindicator.DiscreteThreshold","sap.suite.ui.commons.statusindicator.LibraryShape","sap.suite.ui.commons.taccount.TAccount","sap.suite.ui.commons.TargetFilter","sap.suite.ui.commons.ThingCollection","sap.suite.ui.commons.ThreePanelThingInspector","sap.suite.ui.commons.ThreePanelThingViewer","sap.suite.ui.commons.TileContent","sap.suite.ui.commons.TileContent2X2","sap.suite.ui.commons.Timeline","sap.suite.ui.commons.TimelineFilterListItem","sap.suite.ui.commons.TimelineItem","sap.suite.ui.commons.UnifiedThingGroup","sap.suite.ui.commons.UnifiedThingInspector","sap.suite.ui.commons.VerticalNavigationBar","sap.suite.ui.commons.ViewRepeater"],elements:["sap.suite.ui.commons.BulletChartData","sap.suite.ui.commons.CalculationBuilderValidationResult","sap.suite.ui.commons.ColumnData","sap.suite.ui.commons.ColumnMicroChartLabel","sap.suite.ui.commons.ComparisonData","sap.suite.ui.commons.CountingNavigationItem","sap.suite.ui.commons.FeedItem","sap.suite.ui.commons.HarveyBallMicroChartItem","sap.suite.ui.commons.HeaderCellItem","sap.suite.ui.commons.imageeditor.CustomSizeItem","sap.suite.ui.commons.MicroAreaChartItem","sap.suite.ui.commons.MicroAreaChartLabel","sap.suite.ui.commons.MicroAreaChartPoint","sap.suite.ui.commons.TargetFilterColumn","sap.suite.ui.commons.TargetFilterMeasureColumn","sap.suite.ui.commons.AriaProperties"],version:"1.141.0",extensions:{flChangeHandlers:{"sap.suite.ui.commons.Timeline":"sap/suite/ui/commons/flexibility/Timeline"}}});t.BulletChartMode={Actual:"Actual",Delta:"Delta"};o.registerEnum("sap.suite.ui.commons.BulletChartMode",t.BulletChartMode);t.CommonBackground={Lightest:"Lightest",ExtraLight:"ExtraLight",Light:"Light",MediumLight:"MediumLight",Medium:"Medium",Dark:"Dark",ExtraDark:"ExtraDark",Darkest:"Darkest"};o.registerEnum("sap.suite.ui.commons.CommonBackground",t.CommonBackground);t.ComparisonChartView={Normal:"Normal",Wide:"Wide"};o.registerEnum("sap.suite.ui.commons.ComparisonChartView",t.ComparisonChartView);t.CalculationBuilderComparisonOperatorType={"<":"<",">":">","<=":"<=",">=":">=","=":"=","!=":"!="};o.registerEnum("sap.suite.ui.commons.CalculationBuilderComparisonOperatorType",t.CalculationBuilderComparisonOperatorType);t.CalculationBuilderFunctionType={ABS:"ABS",Round:"ROUND",RoundUp:"RoundUp",RoundDown:"RoundDown",Case:"CASE",SQRT:"SQRT",NDIV0:"NDIV0",NODIM:"NODIM",SUMCT:"SUMCT",SUMGT:"SUMGT",SUMRT:"SUMRT"};o.registerEnum("sap.suite.ui.commons.CalculationBuilderFunctionType",t.CalculationBuilderFunctionType);t.CalculationBuilderItemType={Operator:"Operator",CustomOperator:"CustomOperator",Variable:"Variable",Constant:"Constant",Literal:"Literal",Function:"Function",CustomFunction:"CustomFunction",Empty:"Empty",Error:"Error"};o.registerEnum("sap.suite.ui.commons.CalculationBuilderItemType",t.CalculationBuilderItemType);t.CalculationBuilderLogicalOperatorType={AND:"AND",OR:"OR",XOR:"XOR",NOT:"NOT"};o.registerEnum("sap.suite.ui.commons.CalculationBuilderLogicalOperatorType",t.CalculationBuilderLogicalOperatorType);t.CalculationBuilderLayoutType={Default:"Default",VisualTextualReadOnly:"VisualTextualReadOnly",VisualOnly:"VisualOnly",TextualOnly:"TextualOnly"};o.registerEnum("sap.suite.ui.commons.CalculationBuilderLayoutType",t.CalculationBuilderLayoutType);t.CalculationBuilderOperatorType={"+":"+","-":"-","/":"/","*":"*","(":"(",")":")",",":","};o.registerEnum("sap.suite.ui.commons.CalculationBuilderOperatorType",t.CalculationBuilderOperatorType);t.CalculationBuilderValidationMode={FocusOut:"FocusOut",LiveChange:"LiveChange"};o.registerEnum("sap.suite.ui.commons.CalculationBuilderValidationMode",t.CalculationBuilderValidationMode);t.DeviationIndicator={Up:"Up",Down:"Down",None:"None"};o.registerEnum("sap.suite.ui.commons.DeviationIndicator",t.DeviationIndicator);t.FacetOverviewHeight={XS:"XS",S:"S",M:"M",L:"L",XL:"XL",XXL:"XXL",Auto:"Auto",None:"None"};o.registerEnum("sap.suite.ui.commons.FacetOverviewHeight",t.FacetOverviewHeight);t.FrameType={OneByOne:"OneByOne",TwoByOne:"TwoByOne",TwoThirds:"TwoThirds",Auto:"Auto"};o.registerEnum("sap.suite.ui.commons.FrameType",t.FrameType);t.HeaderContainerView={Horizontal:"Horizontal",Vertical:"Vertical"};o.registerEnum("sap.suite.ui.commons.HeaderContainerView",t.HeaderContainerView);t.InfoTileSize={XS:"XS",S:"S",M:"M",L:"L",Auto:"Auto"};o.registerEnum("sap.suite.ui.commons.InfoTileSize",t.InfoTileSize);t.InfoTileTextColor={Positive:"Positive",Critical:"Critical",Negative:"Negative"};o.registerEnum("sap.suite.ui.commons.InfoTileTextColor",t.InfoTileTextColor);t.InfoTileValueColor={Neutral:"Neutral",Good:"Good",Critical:"Critical",Error:"Error"};o.registerEnum("sap.suite.ui.commons.InfoTileValueColor",t.InfoTileValueColor);t.LoadState={Loading:"Loading",Loaded:"Loaded",Failed:"Failed",Disabled:"Disabled"};o.registerEnum("sap.suite.ui.commons.LoadState",t.LoadState);t.MicroAreaChartView={Normal:"Normal",Wide:"Wide"};o.registerEnum("sap.suite.ui.commons.MicroAreaChartView",t.MicroAreaChartView);t.MicroProcessFlowRenderType={Wrap:"Wrap",NoWrap:"NoWrap",Scrolling:"Scrolling",ScrollingWithResizer:"ScrollingWithResizer"};o.registerEnum("sap.suite.ui.commons.MicroProcessFlowRenderType",t.MicroProcessFlowRenderType);t.networkgraph=t.networkgraph||{};t.networkgraph.BackgroundColor={Default:"Default",White:"White"};o.registerEnum("sap.suite.ui.commons.networkgraph.BackgroundColor",t.networkgraph.BackgroundColor);t.networkgraph.ActionButtonPosition={Left:"Left",Right:"Right"};o.registerEnum("sap.suite.ui.commons.networkgraph.ActionButtonPosition",t.networkgraph.ActionButtonPosition);t.networkgraph.NodeShape={Circle:"Circle",Box:"Box",Custom:"Custom"};o.registerEnum("sap.suite.ui.commons.networkgraph.NodeShape",t.networkgraph.NodeShape);t.networkgraph.LineType={Solid:"Solid",Dashed:"Dashed",Dotted:"Dotted"};o.registerEnum("sap.suite.ui.commons.networkgraph.LineType",t.networkgraph.LineType);t.networkgraph.NodePlacement={BrandesKoepf:"BrandesKoepf",LinearSegments:"LinearSegments",Simple:"Simple"};o.registerEnum("sap.suite.ui.commons.networkgraph.NodePlacement",t.networkgraph.NodePlacement);t.networkgraph.ElementStatus={Standard:"Standard",Success:"Success",Warning:"Warning",Error:"Error",Information:"Information"};o.registerEnum("sap.suite.ui.commons.networkgraph.ElementStatus",t.networkgraph.ElementStatus);t.networkgraph.Orientation={LeftRight:"LeftRight",RightLeft:"RightLeft",TopBottom:"TopBottom",BottomTop:"BottomTop"};o.registerEnum("sap.suite.ui.commons.networkgraph.Orientation",t.networkgraph.Orientation);t.networkgraph.RenderType={Html:"Html",Svg:"Svg"};o.registerEnum("sap.suite.ui.commons.networkgraph.RenderType",t.networkgraph.RenderType);t.networkgraph.LineArrowOrientation={ParentOf:"ParentOf",ChildOf:"ChildOf",None:"None",Both:"Both"};o.registerEnum("sap.suite.ui.commons.networkgraph.LineArrowOrientation",t.networkgraph.LineArrowOrientation);t.networkgraph.LineArrowPosition={Start:"Start",Middle:"Middle",End:"End"};o.registerEnum("sap.suite.ui.commons.networkgraph.LineArrowPosition",t.networkgraph.LineArrowPosition);t.networkgraph.LayoutRenderType={LayeredWithGroups:"LayeredWithGroups",SwimLanes:"SwimLanes",Forces:"Forces",TwoColumns:"TwoColumns"};o.registerEnum("sap.suite.ui.commons.networkgraph.LayoutRenderType",t.networkgraph.LayoutRenderType);t.networkgraph.HeaderCheckboxState={Hidden:"Hidden",Checked:"Checked",Unchecked:"Unchecked"};o.registerEnum("sap.suite.ui.commons.networkgraph.HeaderCheckboxState",t.networkgraph.HeaderCheckboxState);t.SemanticColorType={Neutral:"Neutral",None:"None",Good:"Good",Information:"Information",Critical:"Critical",Error:"Error",Sequence1:"Sequence1",Sequence2:"Sequence2",Sequence3:"Sequence3",Sequence4:"Sequence4",Sequence5:"Sequence5",Sequence6:"Sequence6",Sequence7:"Sequence7",Sequence8:"Sequence8",Sequence9:"Sequence9",Sequence10:"Sequence10",Sequence11:"Sequence11",Sequence12:"Sequence12"};o.registerEnum("sap.suite.ui.commons.SemanticColorType",t.SemanticColorType);t.ProcessFlowConnectionLabelState={Neutral:"Neutral",Positive:"Positive",Critical:"Critical",Negative:"Negative"};o.registerEnum("sap.suite.ui.commons.ProcessFlowConnectionLabelState",t.ProcessFlowConnectionLabelState);t.ProcessFlowConnectionState={Highlighted:"Highlighted",Dimmed:"Dimmed",Regular:"Regular",Selected:"Selected"};o.registerEnum("sap.suite.ui.commons.ProcessFlowConnectionState",t.ProcessFlowConnectionState);t.ProcessFlowConnectionType={Planned:"Planned",Normal:"Normal"};o.registerEnum("sap.suite.ui.commons.ProcessFlowConnectionType",t.ProcessFlowConnectionType);t.ProcessFlowDisplayState={Regular:"Regular",RegularFocused:"RegularFocused",Highlighted:"Highlighted",HighlightedFocused:"HighlightedFocused",Dimmed:"Dimmed",DimmedFocused:"DimmedFocused",Selected:"Selected",SelectedHighlighted:"SelectedHighlighted",SelectedHighlightedFocused:"SelectedHighlightedFocused",SelectedFocused:"SelectedFocused"};o.registerEnum("sap.suite.ui.commons.ProcessFlowDisplayState",t.ProcessFlowDisplayState);t.ProcessFlowLaneState={value:"value",state:"state"};o.registerEnum("sap.suite.ui.commons.ProcessFlowLaneState",t.ProcessFlowLaneState);t.ProcessFlowNodeState={Positive:"Positive",Negative:"Negative",Critical:"Critical",Planned:"Planned",Neutral:"Neutral",PlannedNegative:"PlannedNegative"};o.registerEnum("sap.suite.ui.commons.ProcessFlowNodeState",t.ProcessFlowNodeState);t.ProcessFlowNodeType={Single:"Single",Aggregated:"Aggregated"};o.registerEnum("sap.suite.ui.commons.ProcessFlowNodeType",t.ProcessFlowNodeType);t.ProcessFlowZoomLevel={One:"One",Two:"Two",Three:"Three",Four:"Four"};o.registerEnum("sap.suite.ui.commons.ProcessFlowZoomLevel",t.ProcessFlowZoomLevel);t.SelectionState={Selected:"Selected",NotSelected:"NotSelected",Semantic:"Semantic"};o.registerEnum("sap.suite.ui.commons.SelectionState",t.SelectionState);t.statusindicator=t.statusindicator||{};t.statusindicator.FillingDirectionType={Up:"Up",Down:"Down",Left:"Left",Right:"Right",Clockwise:"Clockwise",CounterClockwise:"CounterClockwise"};o.registerEnum("sap.suite.ui.commons.statusindicator.FillingDirectionType",t.statusindicator.FillingDirectionType);t.statusindicator.HorizontalAlignmentType={Left:"Left",Middle:"Middle",Right:"Right"};o.registerEnum("sap.suite.ui.commons.statusindicator.HorizontalAlignmentType",t.statusindicator.HorizontalAlignmentType);t.statusindicator.VerticalAlignmentType={Top:"Top",Middle:"Middle",Bottom:"Bottom"};o.registerEnum("sap.suite.ui.commons.statusindicator.VerticalAlignmentType",t.statusindicator.VerticalAlignmentType);t.statusindicator.SizeType={None:"None",Small:"Small",Medium:"Medium",Large:"Large",ExtraLarge:"ExtraLarge"};o.registerEnum("sap.suite.ui.commons.statusindicator.SizeType",t.statusindicator.SizeType);t.statusindicator.LabelPositionType={Top:"Top",Right:"Right",Bottom:"Bottom",Left:"Left"};o.registerEnum("sap.suite.ui.commons.statusindicator.LabelPositionType",t.statusindicator.LabelPositionType);t.statusindicator.FillingType={Linear:"Linear",Radial:"Radial",Circular:"Circular",None:"None"};o.registerEnum("sap.suite.ui.commons.statusindicator.FillingType",t.statusindicator.FillingType);t.taccount=t.taccount||{};t.taccount.TAccountPanelState={Default:"Default",Table:"Table"};o.registerEnum("sap.suite.ui.commons.taccount.TAccountPanelState",t.taccount.TAccountPanelState);t.ThingGroupDesign={ZeroIndent:"ZeroIndent",TopIndent:"TopIndent"};o.registerEnum("sap.suite.ui.commons.ThingGroupDesign",t.ThingGroupDesign);t.TimelineAlignment={Right:"Right",Left:"Left",Top:"Top",Bottom:"Bottom"};o.registerEnum("sap.suite.ui.commons.TimelineAlignment",t.TimelineAlignment);t.TimelineAxisOrientation={Vertical:"Vertical",Horizontal:"Horizontal"};o.registerEnum("sap.suite.ui.commons.TimelineAxisOrientation",t.TimelineAxisOrientation);t.TimelineFilterType={Data:"Data",Time:"Time",Search:"Search"};o.registerEnum("sap.suite.ui.commons.TimelineFilterType",t.TimelineFilterType);t.TimelineGroupType={None:"None",Year:"Year",Month:"Month",Quarter:"Quarter",Week:"Week",Day:"Day"};o.registerEnum("sap.suite.ui.commons.TimelineGroupType",t.TimelineGroupType);t.TimelineScrollingFadeout={None:"None",Area:"Area",AreaWithButtons:"AreaWithButtons"};o.registerEnum("sap.suite.ui.commons.TimelineScrollingFadeout",t.TimelineScrollingFadeout);t.ValueStatus={Good:"Good",Neutral:"Neutral",Critical:"Critical",Bad:"Bad"};o.registerEnum("sap.suite.ui.commons.ValueStatus",t.ValueStatus);t.ImageEditorMode={Resize:"Resize",CropRectangle:"CropRectangle",CropEllipse:"CropEllipse",CropCustomShape:"CropCustomShape",Default:"Default"};o.registerEnum("sap.suite.ui.commons.ImageEditorMode",t.ImageEditorMode);t.ImageEditorContainerMode={Transform:"Transform",Crop:"Crop",Filter:"Filter"};o.registerEnum("sap.suite.ui.commons.ImageEditorContainerMode",t.ImageEditorContainerMode);t.ImageFormat={Png:"Png",Jpeg:"Jpeg"};o.registerEnum("sap.suite.ui.commons.ImageFormat",t.ImageFormat);t.ImageEditorContainerButton={Transform:"Transform",Crop:"Crop",Filter:"Filter"};o.registerEnum("sap.suite.ui.commons.ImageEditorContainerButton",t.ImageEditorContainerButton);t.FilePickerModes={All:"All",FileOnly:"FileOnly",FolderOnly:"FolderOnly"};o.registerEnum("sap.suite.ui.commons.FilePickerModes",t.FilePickerModes);t.FilePickerType={Export:"Export",Upload:"Upload"};o.registerEnum("sap.suite.ui.commons.FilePickerType",t.FilePickerType);t.SelectionModes={SingleSelect:"SingleSelectMaster",MultiSelect:"MultiSelect"};o.registerEnum("sap.suite.ui.commons.SelectionModes",t.SelectionModes);return t});
/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/AreaMicroChart", ["./library","sap/ui/core/Control","sap/m/FlexBox","sap/suite/ui/microchart/MicroChartUtils","sap/base/Log","sap/ui/events/KeyCodes","sap/ui/core/theming/Parameters","sap/ui/core/ResizeHandler","./AreaMicroChartRenderer","sap/ui/core/Core","sap/ui/core/Theming","sap/base/i18n/Localization","./AreaMicroChartItem","./AreaMicroChartLabel","sap/ui/core/Lib"],function(e,t,i,r,s,a,o,n,l,h,u,d,p,g,f){"use strict";var c=e.MicroChartColorType;var _=e.AreaMicroChartViewType;var C=t.extend("sap.suite.ui.microchart.AreaMicroChart",{metadata:{library:"sap.suite.ui.microchart",properties:{size:{type:"sap.m.Size",group:"Misc",defaultValue:"Auto"},width:{type:"sap.ui.core.CSSSize",group:"Misc"},height:{type:"sap.ui.core.CSSSize",group:"Misc"},maxXValue:{type:"float",group:"Misc",defaultValue:null},minXValue:{type:"float",group:"Misc",defaultValue:null},maxYValue:{type:"float",group:"Misc",defaultValue:null},minYValue:{type:"float",group:"Misc",defaultValue:null},view:{type:"sap.suite.ui.microchart.AreaMicroChartViewType",group:"Appearance",defaultValue:"Normal"},colorPalette:{type:"string[]",group:"Appearance",defaultValue:[]},showLabel:{type:"boolean",group:"Misc",defaultValue:true},isResponsive:{type:"boolean",group:"Appearance",defaultValue:false},hideOnNoData:{type:"boolean",group:"Appearance",defaultValue:false}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{press:{}},defaultAggregation:"lines",aggregations:{chart:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartItem",defaultClass:p,bindable:"bindable"},maxThreshold:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartItem",defaultClass:p},innerMaxThreshold:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartItem",defaultClass:p},innerMinThreshold:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartItem",defaultClass:p},minThreshold:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartItem",defaultClass:p},target:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartItem",defaultClass:p,bindable:"bindable"},firstXLabel:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartLabel",defaultClass:g},firstYLabel:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartLabel",defaultClass:g},lastXLabel:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartLabel",defaultClass:g},lastYLabel:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartLabel",defaultClass:g},maxLabel:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartLabel",defaultClass:g},minLabel:{multiple:false,type:"sap.suite.ui.microchart.AreaMicroChartLabel",defaultClass:g},lines:{multiple:true,type:"sap.suite.ui.microchart.AreaMicroChartItem",defaultClass:p,bindable:"bindable"}}},renderer:l});C.THRESHOLD_LOOK_XS=1.125;C.THRESHOLD_LOOK_S=3.5;C.THRESHOLD_LOOK_M=4.5;C.THRESHOLD_LOOK_L=5.875;C.THRESHOLD_WIDTH_NO_LABEL=6;C.THRESHOLD_WIDE_HEIGHT_NO_LABEL=2.25;C.ITEM_NEUTRAL_COLOR="sapSuiteAMCSemanticColorNeutral";C.ITEM_NEUTRAL_NOTHRESHOLD_CSSCLASS="sapSuiteAMCNeutralNoThreshold";C._CHARTITEM_AGGREGATIONS=["chart","target","minThreshold","maxThreshold","innerMinThreshold","innerMaxThreshold"];C.prototype.init=function(){this._oRb=f.getResourceBundleFor("sap.suite.ui.microchart");this.setAggregation("tooltip","((AltText))",true);this._bThemeApplied=false;h.ready(this._handleCoreInitialized.bind(this))};C.prototype._handleCoreInitialized=function(){u.attachApplied(this._handleThemeApplied.bind(this));d.attachChange(this._handleThemeApplied.bind(this))};C.prototype._handleThemeApplied=function(){this._bThemeApplied=true;this.invalidate()};C.prototype._getCssValues=function(){this._$CssHelper.className=Array.prototype.slice.call(arguments).join(" ");var e=window.getComputedStyle(this._$CssHelper);if(!e.backgroundColor){e.backgroundColor=e["background-color"]}if(!e.outlineStyle){e.outlineStyle=e["outline-style"]}if(!e.outlineWidth){e.outlineWidth=e["outline-width"]}return e};C.prototype.__fillThresholdArea=function(e,t,i,r){e.beginPath();e.moveTo(t[0].x,t[0].y);for(var s=1,a=t.length;s<a;s++){e.lineTo(t[s].x,t[s].y)}for(var o=i.length-1;o>=0;o--){e.lineTo(i[o].x,i[o].y)}e.closePath();e.fillStyle="white";e.fill();e.fillStyle=r;e.fill();e.lineWidth=1;e.strokeStyle="white";e.stroke();e.strokeStyle=r;e.stroke()};C.prototype._renderDashedLine=function(e,t,i){if(e.setLineDash){e.setLineDash(i);this._renderLine(e,t);e.setLineDash([])}else{e.beginPath();for(var r=0,s=t.length-1;r<s;r++){e._dashedLine(t[r].x,t[r].y,t[r+1].x,t[r+1].y,i)}e.stroke()}};C.prototype._renderLine=function(e,t){e.beginPath();e.moveTo(t[0].x,t[0].y);for(var i=1,r=t.length;i<r;i++){e.lineTo(t[i].x,t[i].y)}e.stroke()};C.prototype._getItemColor=function(e,t){var i;if(t&&this.getTarget()){i="sapSuiteAMCSemanticColor"+this.getTarget().getColor()}else if(!t&&this.getChart()){i="sapSuiteAMCSemanticColor"+this.getChart().getColor()}if(i===C.ITEM_NEUTRAL_COLOR&&!this._isThresholdPresent(e)){return C.ITEM_NEUTRAL_NOTHRESHOLD_CSSCLASS}else{return i}};C.prototype._isThresholdPresent=function(e){var t=[e.minThreshold.length,e.maxThreshold.length,e.innerMinThreshold.length,e.innerMaxThreshold.length];for(var i=0;i<t.length;i++){if(t[i]>1){return true}}return false};C.prototype._renderTarget=function(e,t){if(t.target.length>1){var i=this._getItemColor(t,true);var r=this._getCssValues("sapSuiteAMCTarget",i);e.strokeStyle=r.color;e.lineWidth=parseFloat(r.width);if(r?.textShadow&&r.textShadow!=="none"){this._renderShadows(r,e)}if(r.outlineStyle=="dotted"){this._renderDashedLine(e,t.target,[parseFloat(r.outlineWidth),3])}else{this._renderLine(e,t.target,t)}}else if(t.target.length==1){s.warning("Target is not rendered because only 1 point was given")}};C.prototype._renderThresholdLine=function(e,t){if(t&&t.length){var i=this._getCssValues("sapSuiteAMCThreshold");e.strokeStyle=i.color;e.lineWidth=i.width;this._renderLine(e,t)}};C.prototype._fillMaxThreshold=function(e,t){if(t.maxThreshold.length>1){var i=this._getCssValues("sapSuiteAMCThreshold","sapSuiteAMCSemanticColor"+this.getMaxThreshold().getColor());this.__fillThresholdArea(e,t.maxThreshold,[{x:t.maxThreshold[0].x,y:t.minY},{x:t.maxThreshold[t.maxThreshold.length-1].x,y:t.minY}],i.backgroundColor);this._renderThresholdLine(e,t.maxThreshold,t)}else if(t.maxThreshold.length==1){s.warning("Max Threshold is not rendered because only 1 point was given")}};C.prototype._fillMinThreshold=function(e,t){if(t.minThreshold.length>1){var i=this._getCssValues("sapSuiteAMCThreshold","sapSuiteAMCSemanticColor"+this.getMinThreshold().getColor());this.__fillThresholdArea(e,t.minThreshold,[{x:t.minThreshold[0].x,y:t.maxY},{x:t.minThreshold[t.minThreshold.length-1].x,y:t.maxY}],i.backgroundColor)}else if(t.minThreshold.length==1){s.warning("Min Threshold is not rendered because only 1 point was given")}};C.prototype._fillThresholdArea=function(e,t){if(t.minThreshold.length>1&&t.maxThreshold.length>1){var i=this._getCssValues("sapSuiteAMCThreshold","sapSuiteAMCSemanticColorCritical");this.__fillThresholdArea(e,t.maxThreshold,t.minThreshold,i.backgroundColor)}};C.prototype._fillInnerThresholdArea=function(e,t){if(t.innerMinThreshold.length>1&&t.innerMaxThreshold.length>1){var i=this._getCssValues("sapSuiteAMCThreshold","sapSuiteAMCSemanticColor"+this.getInnerMaxThreshold().getColor());this.__fillThresholdArea(e,t.innerMaxThreshold,t.innerMinThreshold,i.backgroundColor)}else if(t.innerMinThreshold.length||t.innerMaxThreshold.length){s.warning("Inner threshold area is not rendered because inner min and max threshold were not correctly set")}};C.prototype._renderChart=function(e,t){if(t.chart.length>1){var i=this._getItemColor(t);var r=this._getCssValues("sapSuiteAMCChart",i);e.strokeStyle=r.color;e.lineWidth=parseFloat(r.width);if(r?.textShadow&&r.textShadow!=="none"){this._renderShadows(r,e)}this._renderLine(e,t.chart,t)}else if(t.chart.length==1){s.warning("Actual values are not rendered because only 1 point was given")}};C.prototype._renderLines=function(e,t){var i=this.getColorPalette().length,r=0,s=this._getCssValues("sapSuiteAMCLine"),a=t.lines.length;var n=function(e){if(i){if(r===i){r=0}e=this.getColorPalette()[r++].trim()}if(c.hasOwnProperty(e)){s=this._getCssValues("sapSuiteAMCLine","sapSuiteAMCSemanticColor"+e);return s.color}else{return o.get(e)||e}}.bind(this);e.lineWidth=parseFloat(s.width);for(var l=0;l<a;l++){if(t.lines[l].length>1){e.strokeStyle=n(this.getLines()[l].getColor());this._renderLine(e,t.lines[l],t)}}};C.prototype._renderCanvas=function(){var e=this.getDomRef("canvas");if(!this._hasData()||!e){return}this._$CssHelper=this.getDomRef("css-helper");var t=this.$();var i=window.getComputedStyle(e);var r=parseFloat(i.width);e.setAttribute("width",r||360);var s=parseFloat(i.height);e.setAttribute("height",s||242);var a=e.getContext("2d");a.lineJoin="round";a._dashedLine=this._drawDashedLine;var o=this._calculateDimensions(e.width,e.height);if(this._isThresholdPresent(o)){t.find(".sapSuiteAMCCanvasContainer").addClass("sapSuiteAMCWithThreshold")}this._fillMaxThreshold(a,o);this._fillMinThreshold(a,o);this._fillThresholdArea(a,o);this._renderThresholdLine(a,o.minThreshold,o);this._renderThresholdLine(a,o.maxThreshold,o);this._fillInnerThresholdArea(a,o);this._renderThresholdLine(a,o.innerMinThreshold,o);this._renderThresholdLine(a,o.innerMaxThreshold,o);this._renderTarget(a,o);this._renderChart(a,o);this._renderLines(a,o)};C.prototype._drawDashedLine=function(e,t,i,r,s){var a=s.length;this.moveTo(e,t);var o=i-e,n=r-t,l=o?n/o:1e15,h=Math.sqrt(o*o+n*n),u=0,d=true;while(h>=.1){var p=s[u++%a];if(p>h){p=h}var g=Math.sqrt(p*p/(1+l*l));if(o<0){g=-g}e+=g;t+=l*g;this[d?"lineTo":"moveTo"](e,t);h-=p;d=!d}};C.prototype._calculateDimensions=function(e,t){var i,r,a,o;function n(){if(!this._isMinXValue||!this._isMaxXValue||!this._isMinYValue||!this._isMaxYValue){var e=this.getLines();if(this.getMaxThreshold()){e.push(this.getMaxThreshold())}if(this.getMinThreshold()){e.push(this.getMinThreshold())}if(this.getChart()){e.push(this.getChart())}if(this.getTarget()){e.push(this.getTarget())}if(this.getInnerMaxThreshold()){e.push(this.getInnerMaxThreshold())}if(this.getInnerMinThreshold()){e.push(this.getInnerMinThreshold())}for(var t=0,s=e.length;t<s;t++){var n=e[t].getPoints();for(var l=0,h=n.length;l<h;l++){var u=n[l].getXValue();if(u>i||i===undefined){i=u}if(u<a||a===undefined){a=u}var d=n[l].getYValue();if(d>r||r===undefined){r=d}if(d<o||o===undefined){o=d}}}}if(this._isMinXValue){a=this.getMinXValue()}if(this._isMaxXValue){i=this.getMaxXValue()}if(this._isMinYValue){o=this.getMinYValue()}if(this._isMaxYValue){r=this.getMaxYValue()}}n.call(this);var l={minY:0,minX:0,maxY:t,maxX:e,lines:[]};var h;var u=i-a;if(u>0){h=e/u}else if(u==0){h=0;l.maxX/=2}else{s.warning("Min X is greater than max X.")}var p;var g=r-o;if(g>0){p=t/(r-o)}else if(g==0){p=0;l.maxY/=2}else{s.warning("Min Y is greater than max Y.")}function f(e){var t=d.getRTL();var i=function(e){var i=h*(e-a);if(t){i=l.maxX-i}return i};var r=function(e){return l.maxY-p*(e-o)};var n=[];if(e&&h!==undefined&&p!==undefined){var u=e.getPoints();var g=u.length;var f,c,_,C;if(g==1){_=u[0].getXValue();C=u[0].getYValue();if(_==undefined^C==undefined){var T,M;if(_==undefined){M=c=r(C);f=l.minX;T=l.maxX}else{T=f=i(_);c=l.minY;M=l.maxY}n.push({x:f,y:c},{x:T,y:M})}else{s.warning("Point with coordinates ["+_+" "+C+"] ignored")}}else{for(var m=0;m<g;m++){_=u[m].getXValue();C=u[m].getYValue();if(_!=undefined&&C!=undefined){f=i(_);c=r(C);n.push({x:f,y:c})}else{s.warning("Point with coordinates ["+_+" "+C+"] ignored")}}}}return n}l.maxThreshold=f(this.getMaxThreshold());l.minThreshold=f(this.getMinThreshold());l.chart=f(this.getChart());l.target=f(this.getTarget());l.innerMaxThreshold=f(this.getInnerMaxThreshold());l.innerMinThreshold=f(this.getInnerMinThreshold());var c=this.getLines().length;for(var _=0;_<c;_++){l.lines.push(f(this.getLines()[_]))}return l};C.prototype.setMinXValue=function(e,t){this._isMinXValue=this._isNumber(e);return this.setProperty("minXValue",this._isMinXValue?e:NaN,t)};C.prototype.setMaxXValue=function(e,t){this._isMaxXValue=this._isNumber(e);return this.setProperty("maxXValue",this._isMaxXValue?e:NaN,t)};C.prototype.setMinYValue=function(e,t){this._isMinYValue=this._isNumber(e);return this.setProperty("minYValue",this._isMinYValue?e:NaN,t)};C.prototype.setMaxYValue=function(e,t){this._isMaxYValue=this._isNumber(e);return this.setProperty("maxYValue",this._isMaxYValue?e:NaN,t)};C.prototype._isNumber=function(e){return typeof e==="number"&&!isNaN(e)&&isFinite(e)};C.prototype.onBeforeRendering=function(){if(this._bUseIndex){this._indexChartItems()}if(this._sChartResizeHandlerId){n.deregister(this._sChartResizeHandlerId)}this._unbindMouseEnterLeaveHandler()};C.prototype.onAfterRendering=function(){e._checkControlIsVisible(this,this._onControlIsVisible);this._bindMouseEnterLeaveHandler()};C.prototype.setSize=function(e){if(this.getSize()!==e){this.setProperty("size",e)}return this};C.prototype._onControlIsVisible=function(){this._onResize();this._sChartResizeHandlerId=n.register(this,this._onResize.bind(this))};C.prototype._indexChartItems=function(){var e,t=C._CHARTITEM_AGGREGATIONS.length;for(var i=0;i<t;i++){e=this.getAggregation(C._CHARTITEM_AGGREGATIONS[i]);if(e){this._indexChartItemPoints(e)}}};C.prototype._indexChartItemPoints=function(e){var t=e.getPoints();for(var i=0;i<t.length;i++){t[i].setProperty("x",i,true)}};C.prototype.enableXIndexing=function(e){this._bUseIndex=e};C.prototype._onResize=function(){var e=this.$(),t=parseInt(e.width()),i=parseInt(e.height()),r=e.find(".sapSuiteAMCPositionCenter"),s=e.find(".sapSuiteAMCPositionTop .sapSuiteAMCPositionLeft, .sapSuiteAMCPositionTop .sapSuiteAMCPositionRight,"+".sapSuiteAMCSideLabels .sapSuiteAMCLbl:first-child");e.removeClass("sapSuiteAMCNoLabels sapSuiteAMCLookM sapSuiteAMCLookS sapSuiteAMCLookXS sapSuiteAMCNoMinMaxLabels sapSuiteAMCNoTopLabels");if(t<=this.convertRemToPixels(C.THRESHOLD_WIDTH_NO_LABEL)){e.addClass("sapSuiteAMCNoLabels")}if(i<this.convertRemToPixels(C.THRESHOLD_WIDE_HEIGHT_NO_LABEL)){e.addClass("sapSuiteAMCLookXS")}else if(i<this.convertRemToPixels(C.THRESHOLD_LOOK_S)&&this.getView()===_.Normal){e.addClass("sapSuiteAMCLookXS")}else if(i<this.convertRemToPixels(C.THRESHOLD_LOOK_M)){e.addClass("sapSuiteAMCLookS")}else if(i<this.convertRemToPixels(C.THRESHOLD_LOOK_L)){e.addClass("sapSuiteAMCLookM")}if(this._isAnyLabelTruncated(s)||this._isAnyLabelVerticallyTruncated(s)){e.addClass("sapSuiteAMCNoMinMaxLabels");if(this._isAnyLabelTruncated(s)){e.removeClass("sapSuiteAMCNoMinMaxLabels");e.addClass("sapSuiteAMCNoTopLabels")}}if(this._isAnyLabelTruncated(r)){e.addClass("sapSuiteAMCNoMinMaxLabels")}this._renderCanvas()};C.prototype._isLabelTruncated=function(e){return e.offsetWidth<e.scrollWidth};C.prototype.ontap=function(e){this.firePress()};C.prototype.onkeydown=function(e){if(e.which==a.SPACE){e.preventDefault()}};C.prototype.onkeyup=function(e){if(e.which==a.ENTER||e.which==a.SPACE){this.firePress();e.preventDefault()}};C.prototype.attachEvent=function(){t.prototype.attachEvent.apply(this,arguments);if(this.hasListeners("press")){this.$().attr("tabindex",0).addClass("sapSuiteUiMicroChartPointer")}return this};C.prototype.detachEvent=function(){t.prototype.detachEvent.apply(this,arguments);if(!this.hasListeners("press")){this.$().removeAttr("tabindex").removeClass("sapSuiteUiMicroChartPointer")}return this};C.prototype._getLocalizedColorMeaning=function(e){return c.hasOwnProperty(e)?this._oRb.getText(("SEMANTIC_COLOR_"+e).toUpperCase()):""};C.prototype._getAltHeaderText=function(e){var t=this._oRb.getText("AREAMICROCHART");if(e){t+=" "+this._oRb.getText("IS_ACTIVE")}if(!this._hasData()){t+="\n"+this._oRb.getText("NO_DATA");return t}var i=this.getFirstXLabel();var r=this.getFirstYLabel();var s=this.getLastXLabel();var a=this.getLastYLabel();var o=this.getMinLabel();var n=this.getMaxLabel();var l=this.getChart();var h=this.getTarget();if(i&&i.getLabel()||r&&r.getLabel()){t+="\n"+this._oRb.getText("AREAMICROCHART_START")+": "+(i?i.getLabel():"")+" "+(r?r.getLabel()+" "+this._getLocalizedColorMeaning(r.getColor()):"")}if(s&&s.getLabel()||a&&a.getLabel()){t+="\n"+this._oRb.getText("AREAMICROCHART_END")+": "+(s?s.getLabel():"")+" "+(a?a.getLabel()+" "+this._getLocalizedColorMeaning(a.getColor()):"")}if(o&&o.getLabel()){t+="\n"+this._oRb.getText("AREAMICROCHART_MINIMAL_VALUE")+": "+o.getLabel()+" "+this._getLocalizedColorMeaning(o.getColor())}if(n&&n.getLabel()){t+="\n"+this._oRb.getText("AREAMICROCHART_MAXIMAL_VALUE")+": "+n.getLabel()+" "+this._getLocalizedColorMeaning(n.getColor())}if(l&&l.getPoints()&&l.getPoints().length>0){t+="\n"+this._oRb.getText("AREAMICROCHART_ACTUAL_VALUES")+":";var u=l.getPoints();for(var d=0;d<u.length;d++){t+=" "+u[d].getY()}}if(h&&h.getPoints()&&h.getPoints().length>0){t+="\n"+this._oRb.getText("AREAMICROCHART_TARGET_VALUES")+":";var p=h.getPoints();for(var g=0;g<p.length;g++){t+=" "+p[g].getY()}}return t};C.prototype._getAltSubText=function(e){var t="";for(var i=0;i<this.getLines().length;i++){var r=this.getLines()[i],s=r.getTooltip_AsString(),a="",o="";if(!s){continue}if(r.getPoints()&&r.getPoints().length>0){o+=(e?"":"\n")+(r.getTitle()?r.getTitle():this._oRb.getText("AREAMICROCHART_LINE",[i+1]))+":";var n=r.getPoints();for(var l=0;l<n.length;l++){a+=" "+n[l].getY()}if(this.getColorPalette().length===0){a+=" "+this._getLocalizedColorMeaning(r.getColor())}}a=s.split("((AltText))").join(a);if(a){t+=o+a;e=false}}return t};C.prototype.clone=function(){var e=t.prototype.clone.apply(this,arguments);e._isMinXValue=this._isMinXValue;e._isMaxXValue=this._isMaxXValue;e._isMinYValue=this._isMinYValue;e._isMaxYValue=this._isMaxYValue;return e};C.prototype.exit=function(){n.deregister(this._sChartResizeHandlerId);u.attachApplied(this._handleThemeApplied.bind(this));d.detachChange(this._handleThemeApplied.bind(this))};C.prototype._addTitleAttribute=function(){if(!this.$().attr("title")&&this._hasData()){this.$().attr("title",this.getTooltip_AsString())}};C.prototype._removeTitleAttribute=function(){if(this.$().attr("title")){this.$().removeAttr("title")}};C.prototype._bindMouseEnterLeaveHandler=function(){if(!this._oMouseEnterLeaveHandler){this._oMouseEnterLeaveHandler={mouseEnterChart:this._addTitleAttribute.bind(this),mouseLeaveChart:this._removeTitleAttribute.bind(this)}}this.$().on("mouseenter",this._oMouseEnterLeaveHandler.mouseEnterChart);this.$().on("mouseleave",this._oMouseEnterLeaveHandler.mouseLeaveChart)};C.prototype._unbindMouseEnterLeaveHandler=function(){if(this._oMouseEnterLeaveHandler){this.$().off("mouseenter",this._oMouseEnterLeaveHandler.mouseEnterChart);this.$().off("mouseleave",this._oMouseEnterLeaveHandler.mouseLeaveChart)}};C.prototype._hasData=function(){return this.getLines().length>0||!!this.getChart()};C.prototype.firePress=function(){if(this._hasData()){t.prototype.fireEvent.call(this,"press",arguments)}};C.prototype._renderShadows=function(e,t){var i=e.textShadow.split(/,(?![^(]*\))/);var r=i.map(e=>e.trim().replace(/;$/,""));r.forEach(e=>{var i=e.match(/(rgb\([^)]+\))\s+(-?\d+px)\s+(-?\d+px)\s+(-?\d+px)/);if(i){var r=i[1];var a=parseInt(i[2]);var o=parseInt(i[3]);s(t,a,o,r)}});function s(e,t,i,r){e.shadowOffsetX=t;e.shadowOffsetY=i;e.shadowBlur=0;e.shadowColor=r}};r.extendMicroChart(C);return C});
/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/AreaMicroChartItem", ["./library","sap/ui/core/Element","./AreaMicroChartPoint","sap/suite/ui/microchart/MicroChartUtils"],function(t,r,i,e){"use strict";const a=t.MicroChartColorType;var o=r.extend("sap.suite.ui.microchart.AreaMicroChartItem",{metadata:{library:"sap.suite.ui.microchart",properties:{color:{group:"Misc",type:"string",defaultValue:a.Neutral},title:{type:"string",group:"Misc",defaultValue:null}},defaultAggregation:"points",aggregations:{points:{multiple:true,type:"sap.suite.ui.microchart.AreaMicroChartPoint",defaultClass:i,bindable:"bindable"}}}});o.prototype.init=function(){this.setAggregation("tooltip","((AltText))",true)};e.extendMicroChartSetColor(o);return o});
/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/AreaMicroChartLabel", ["./library","sap/ui/core/Element","sap/suite/ui/microchart/MicroChartUtils"],function(r,t,e){"use strict";const a=r.MicroChartColorType;var i=t.extend("sap.suite.ui.microchart.AreaMicroChartLabel",{metadata:{library:"sap.suite.ui.microchart",properties:{color:{group:"Misc",type:"string",defaultValue:a.Neutral},label:{type:"string",group:"Misc",defaultValue:""}}}});e.extendMicroChartSetColor(i);return i});
/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/AreaMicroChartPoint", ["./library","sap/ui/core/Element"],function(t,e){"use strict";var i=e.extend("sap.suite.ui.microchart.AreaMicroChartPoint",{metadata:{library:"sap.suite.ui.microchart",properties:{x:{type:"float",group:"Misc",defaultValue:null},y:{type:"float",group:"Misc",defaultValue:null}}}});i.prototype.setX=function(t,e){this._isXValue=this._isNumber(t);return this.setProperty("x",this._isXValue?t:NaN,e)};i.prototype.setY=function(t,e){this._isYValue=this._isNumber(t);return this.setProperty("y",this._isYValue?t:NaN,e)};i.prototype.getXValue=function(){return this._isXValue?this.getX():undefined};i.prototype.getYValue=function(){return this._isYValue?this.getY():undefined};i.prototype._isNumber=function(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)};i.prototype.clone=function(t,i,r){var u=e.prototype.clone.apply(this,arguments);u._isXValue=this._isXValue;u._isYValue=this._isYValue;return u};return i});
/*!
* SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
*/
sap.ui.predefine("sap/suite/ui/microchart/AreaMicroChartRenderer", ["./library","sap/suite/ui/microchart/MicroChartRenderUtils"],function(e,t){"use strict";var i=e.AreaMicroChartViewType;var a={apiVersion:2};a.render=function(e,t){if(!t._bThemeApplied){return}if(t._hasData()){var a=t.getView()===i.Wide;var s=t.getShowLabel();var l=s&&(!a&&(t.getFirstYLabel()||t.getLastYLabel())||t.getMaxLabel());var r=s&&(!a&&(t.getFirstXLabel()||t.getLastXLabel())||t.getMinLabel());var o=s&&a&&(t.getFirstYLabel()||t.getFirstXLabel());var n=s&&a&&(t.getLastYLabel()||t.getLastXLabel());e.openStart("div",t);this._writeMainProperties(e,t);if(a){e.class("sapSuiteAMCWideMode")}e.openEnd();e.openStart("div");e.class("sapSuiteAMCVerticalAlignmentContainer");e.openEnd();if(l){e.openStart("div",t.getId()+"-top-labels");e.class("sapSuiteAMCLabels");e.class("sapSuiteAMCPositionTop");e.openEnd();if(!a){this._writeLabel(e,t,t.getFirstYLabel(),"-top-left-lbl","sapSuiteAMCPositionLeft")}this._writeLabel(e,t,t.getMaxLabel(),"-top-center-lbl","sapSuiteAMCPositionCenter");if(!a){this._writeLabel(e,t,t.getLastYLabel(),"-top-right-lbl","sapSuiteAMCPositionRight")}e.close("div")}if(a){e.openStart("div");e.class("sapSuiteAMCHorizontalContainer");e.openEnd()}if(o){e.openStart("div",t.getId()+"-left-labels");e.class("sapSuiteAMCSideLabels");e.class("sapSuiteAMCPositionLeft");e.openEnd();this._writeLabel(e,t,t.getFirstYLabel(),"-top-left-lbl","sapSuiteAMCPositionLeft");this._writeLabel(e,t,t.getFirstXLabel(),"-btm-left-lbl","sapSuiteAMCPositionLeft",true);e.close("div")}e.openStart("div",t.getId()+"-canvas-cont");e.class("sapSuiteAMCCanvasContainer");e.openEnd();e.openStart("canvas",t.getId()+"-canvas");e.class("sapSuiteAMCCanvas");e.openEnd();e.close("canvas");e.close("div");if(n){e.openStart("div",t.getId()+"-right-labels");e.class("sapSuiteAMCSideLabels");e.class("sapSuiteAMCPositionRight");e.openEnd();this._writeLabel(e,t,t.getLastYLabel(),"-top-right-lbl","sapSuiteAMCPositionRight");this._writeLabel(e,t,t.getLastXLabel(),"-btm-right-lbl","sapSuiteAMCPositionRight",true);e.close("div")}if(a){e.close("div")}if(r){e.openStart("div",t.getId()+"-bottom-labels");e.class("sapSuiteAMCLabels");e.class("sapSuiteAMCPositionBtm");e.openEnd();if(!a){this._writeLabel(e,t,t.getFirstXLabel(),"-btm-left-lbl","sapSuiteAMCPositionLeft",true)}this._writeLabel(e,t,t.getMinLabel(),"-btm-center-lbl","sapSuiteAMCPositionCenter",true);if(!a){this._writeLabel(e,t,t.getLastXLabel(),"-btm-right-lbl","sapSuiteAMCPositionRight",true)}e.close("div")}e.openStart("div",t.getId()+"-css-helper");e.style("display","none");e.openEnd();e.close("div");e.close("div");e.close("div")}else{this._renderNoData(e,t)}};a._writeMainProperties=function(e,t){var i=t.hasListeners("press");this._renderActiveProperties(e,t);var a=t.getTooltip_AsString(i);e.attr("role","figure");if(t.getAriaLabelledBy().length){e.accessibilityState(t)}else{e.attr("aria-label",a)}e.class("sapSuiteAMC");e.class("sapSuiteAMCSize"+t.getSize());e.style("width",t.getWidth());e.style("height",t.getHeight())};a._writeLabel=function(e,t,i,a,s,l){if(!i){return}var r=i?i.getLabel():"";e.openStart("div",t.getId()+a);if(l){e.class("sapSuiteAMCTextColor")}else{e.class("sapSuiteAMCSemanticColor"+i.getColor())}e.class("sapSuiteAMCLbl");e.class(s);e.openEnd();e.text(r);e.close("div")};t.extendMicroChartRenderer(a);return a},true);
/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/BulletMicroChart", ["./library","sap/base/i18n/Localization","sap/m/library","sap/ui/core/Control","sap/m/FlexBox","sap/ui/core/ResizeHandler","sap/ui/events/KeyCodes","sap/suite/ui/microchart/MicroChartUtils","./BulletMicroChartRenderer","sap/ui/core/Core","sap/ui/core/Theming","./BulletMicroChartData"],function(e,t,a,i,s,r,l,o,u,n,h,p){"use strict";var f=a.Size;var c=i.extend("sap.suite.ui.microchart.BulletMicroChart",{metadata:{library:"sap.suite.ui.microchart",properties:{size:{type:"sap.m.Size",group:"Misc",defaultValue:f.Auto},mode:{type:"sap.suite.ui.microchart.BulletMicroChartModeType",group:"Misc",defaultValue:"Actual"},scale:{type:"string",group:"Misc",defaultValue:""},forecastValue:{type:"float",group:"Misc",defaultValue:null},targetValue:{type:"float",group:"Misc",defaultValue:null},minValue:{type:"float",group:"Misc",defaultValue:null},maxValue:{type:"float",group:"Misc",defaultValue:null},showActualValue:{type:"boolean",group:"Misc",defaultValue:true},showDeltaValue:{type:"boolean",group:"Misc",defaultValue:true},showActualValueInDeltaMode:{type:"boolean",group:"Misc",defaultValue:false},showTargetValue:{type:"boolean",group:"Misc",defaultValue:true},showValueMarker:{type:"boolean",group:"Misc",defaultValue:false},showThresholds:{type:"boolean",group:"Misc",defaultValue:true},actualValueLabel:{type:"string",group:"Misc",defaultValue:""},deltaValueLabel:{type:"string",group:"Misc",defaultValue:""},targetValueLabel:{type:"string",group:"Misc",defaultValue:""},width:{type:"sap.ui.core.CSSSize",group:"Misc"},height:{type:"sap.ui.core.CSSSize",group:"Misc"},scaleColor:{type:"sap.suite.ui.microchart.CommonBackgroundType",group:"Misc",defaultValue:"MediumLight"},isResponsive:{type:"boolean",group:"Appearance",defaultValue:false},hideOnNoData:{type:"boolean",group:"Appearance",defaultValue:false},smallRangeAllowed:{type:"boolean",group:"Appearance",defaultValue:false}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},defaultAggregation:"actual",aggregations:{actual:{type:"sap.suite.ui.microchart.BulletMicroChartData",defaultClass:p,multiple:false,bindable:"bindable"},thresholds:{type:"sap.suite.ui.microchart.BulletMicroChartData",defaultClass:p,multiple:true,singularName:"threshold",bindable:"bindable"}},events:{press:{}}},renderer:u});c.THRESHOLD_SMALL_LABEL=3.5;c.THRESHOLD_BIG_LABEL=4.5;c.THRESHOLD_SMALL_LOOK=3.5;c.THRESHOLD_EXTRASMALL_LOOK=1.3125;c.THRESHOLD_THRESHOLDS=6;c.prototype.init=function(){this._oRb=n.getLibraryResourceBundle("sap.suite.ui.microchart");this.setAggregation("tooltip","((AltText))",true);this._bThemeApplied=false;n.ready(this._handleCoreInitialized.bind(this))};c.prototype._handleCoreInitialized=function(){h.attachApplied(this._handleThemeApplied.bind(this))};c.prototype._handleThemeApplied=function(){this._bThemeApplied=true;this.invalidate();h.detachApplied(this._handleThemeApplied.bind(this))};c.prototype._calculateChartData=function(){var t=100,a=this.getThresholds(),i=[],s=this.getTargetValue(),r=this.getForecastValue(),l=this.getActual()&&this.getActual().getValue()?this.getActual().getValue():0,o=[],u=0,n=0,h=0,p;if(this.getActual()&&this.getActual()._isValueSet){o.push(l)}if(this._isForecastValueSet){o.push(r)}if(this._isTargetValueSet){o.push(s)}if(this._isMinValueSet){o.push(this.getMinValue())}if(this._isMaxValueSet){o.push(this.getMaxValue())}for(p=0;p<a.length;p++){o.push(a[p].getValue())}if(o.length>0){u=n=o[0];for(p=0;p<o.length;p++){if(o[p]<u){u=o[p]}if(o[p]>n){n=o[p]}}if(this.getSmallRangeAllowed()==false){n=n<0&&n<3*(u-n)?0:n;u=u>0&&u>3*(n-u)?0:u}h=n-u;for(p=0;p<a.length;p++){i[p]={color:a[p].getColor(),valuePct:!a[p]._isValueSet||h===0?0:((a[p].getValue()-u)*t/h).toFixed(2)}}}var f,c;if(this.getMode()===e.BulletMicroChartModeType.Delta){f=!this.getActual()||!this.getActual()._isValueSet||h===0?50:(.05+(l-u)*t/h).toFixed(2);c=!this._isTargetValueSet||h===0?50:((s-u)*t/h).toFixed(2)}else{f=!this.getActual()||!this.getActual()._isValueSet||h===0||u===0&&this.getActual().getValue()===0?0:(.05+(l-u)*t/h).toFixed(2);c=!this._isTargetValueSet||h===0?0:((s-u)*t/h).toFixed(2)}return{actualValuePct:f,targetValuePct:c,forecastValuePct:!this._isForecastValueSet||h===0?0:((r-u)*t/h).toFixed(2),thresholdsPct:i,fScaleWidthPct:t}};c.prototype._calculateDeltaValue=function(){if(!this.getActual()._isValueSet||!this._isTargetValueSet){return 0}else{var e=this.getActual().getValue();var t=this.getTargetValue();return Math.abs(e-t).toFixed(Math.max(this._digitsAfterDecimalPoint(e),this._digitsAfterDecimalPoint(t)))}};c.prototype.setMinValue=function(e){this._isMinValueSet=this._fnIsNumber(e);return this.setProperty("minValue",this._isMinValueSet?e:NaN)};c.prototype.setMaxValue=function(e){this._isMaxValueSet=this._fnIsNumber(e);return this.setProperty("maxValue",this._isMaxValueSet?e:NaN)};c.prototype.setTargetValue=function(e){this._isTargetValueSet=this._fnIsNumber(e);return this.setProperty("targetValue",this._isTargetValueSet?e:NaN)};c.prototype.setForecastValue=function(e){this._isForecastValueSet=this._fnIsNumber(e);return this.setProperty("forecastValue",this._isForecastValueSet?e:NaN)};c.prototype.setSize=function(e){if(this.getSize()!==e){this.setProperty("size",e,false)}return this};c.prototype.ontap=function(e){this.firePress()};c.prototype.onkeydown=function(e){if(e.which===l.SPACE){e.preventDefault()}};c.prototype.onkeyup=function(e){if(e.which===l.ENTER||e.which===l.SPACE){this.firePress();e.preventDefault()}};c.prototype._fnIsNumber=function(e){return typeof e==="number"&&!isNaN(e)&&isFinite(e)};c.prototype.attachEvent=function(e,t,a,s){i.prototype.attachEvent.call(this,e,t,a,s);if(this.hasListeners("press")){this.$().attr("tabindex",0).addClass("sapSuiteUiMicroChartPointer")}return this};c.prototype.detachEvent=function(e,t,a){i.prototype.detachEvent.call(this,e,t,a);if(!this.hasListeners("press")){this.$().removeAttr("tabindex").removeClass("sapSuiteUiMicroChartPointer")}return this};c.prototype.onBeforeRendering=function(){if(this._sChartResizeHandlerId){r.deregister(this._sChartResizeHandlerId)}this._unbindMouseEnterLeaveHandler()};c.prototype.onAfterRendering=function(){e._checkControlIsVisible(this,this._onControlIsVisible);this._bindMouseEnterLeaveHandler()};c.prototype._onControlIsVisible=function(){this._onResize();this._sChartResizeHandlerId=r.register(this,this._onResize.bind(this))};c.prototype._onResize=function(){var e=this.$(),t=Math.round(parseFloat(this.$().css("height"))),a=parseInt(e.css("width"));if(this.getShowValueMarker()){this._adjustValueToMarker()}e.removeClass("sapSuiteBMCSmallFont sapSuiteBMCNoLabels sapSuiteBMCSmallLook sapSuiteBMCExtraSmallLook sapSuiteBMCThresholdHidden");if(t<=this.convertRemToPixels(c.THRESHOLD_EXTRASMALL_LOOK)){e.addClass("sapSuiteBMCExtraSmallLook")}else if(t<=this.convertRemToPixels(c.THRESHOLD_SMALL_LOOK)){e.addClass("sapSuiteBMCSmallLook")}if(t>=this.convertRemToPixels(c.THRESHOLD_SMALL_LABEL)&&t<=this.convertRemToPixels(c.THRESHOLD_BIG_LABEL)){e.addClass("sapSuiteBMCSmallFont")}if(t<this.convertRemToPixels(c.THRESHOLD_SMALL_LABEL)||this._isAnyChartLabelTruncated()){e.addClass("sapSuiteBMCNoLabels")}if(a<this.convertRemToPixels(c.THRESHOLD_THRESHOLDS)){e.addClass("sapSuiteBMCThresholdHidden")}this._adjustLabelsPos()};c.prototype._isAnyChartLabelTruncated=function(){var e=this.$().find(".sapSuiteBMCItemValue, .sapSuiteBMCTargetValue");return this._isAnyLabelTruncated(e)};c.prototype.exit=function(){r.deregister(this._sChartResizeHandlerId)};c.prototype._adjustLabelsPos=function(){var a=t.getRTL();var i=this.$("bc-target-bar-value");var s=this.$("chart-bar");var r=s.width();if(r){var l=0;if(i&&i.offset()){l=i.offset().left-s.offset().left;if(a){l=r-l}this._adjustLabelPos(this.$("bc-target-value"),r,l,a)}var o=this.$("bc-bar-value");if(o&&o.offset()){var u=o.offset().left+o.width()-s.offset().left;if(a){u=o.offset().left-s.offset().left}if(this.getMode()===e.BulletMicroChartModeType.Delta){u=o.width();if(!this.getShowActualValueInDeltaMode()){u=u/2}var n=this.getTargetValue()<this.getActual().getValue()?1:-1;if(a){u=i.offset().left-s.offset().left-u*n}else{u=i.offset().left-s.offset().left+u*n}}this._adjustLabelPos(this.$("bc-item-value"),r,u,a)}}};c.prototype._adjustLabelPos=function(e,t,a,i){var s="left";var r=e.width();if(r>t){e.css(s,"0")}else{var l=a-.5*r;if(l<0){l=0}if(l+r>t){l=t-r}e.css(s,l)}};c.prototype._adjustValueToMarker=function(){var e=this.$("bc-bar-value");var a=this.$("bc-bar-value-marker");var i=this.$().find(".sapSuiteBMCVerticalAlignmentContainer");if(e.offset()&&a.offset()){var s=e.width();var r=e.offset().left;var l=a.width();var o=a.offset().left;if(t.getRTL()){if(o<r){a.css("right","");a.offset({left:r})}if(o+l>r+s){a.css("right","");a.offset({left:r+s-l})}}else{if(o<r){a.offset({left:r})}if(o+l>r+s){e.width((o+l-r)/i.width()*100+"%")}}}};c.prototype._getLocalizedColorMeaning=function(e){return this._oRb.getText(("SEMANTIC_COLOR_"+e).toUpperCase())};c.prototype._getAltHeaderText=function(t){var a=this._oRb.getText("BULLETMICROCHART");if(t){a+=" "+this._oRb.getText("IS_ACTIVE")}if(!this._hasData()){a+="\n"+this._oRb.getText("NO_DATA");return a}var i=this.getActual()&&this.getActual()._isValueSet;var s=this.getScale();var r=this.getTargetValueLabel();var l=!this.getActual()||!this.getActual().getColor()?"":this._getLocalizedColorMeaning(this.getActual().getColor());if(i){var o=this.getActualValueLabel();var u=o?o:""+this.getActual().getValue();a+="\n"+this._oRb.getText("BULLETMICROCHART_ACTUAL_TOOLTIP",[u+s,l])}if(this.getMode()===e.BulletMicroChartModeType.Delta){if(this._isTargetValueSet&&i){var n=this.getDeltaValueLabel();var h=n?n:""+this._calculateDeltaValue();a+="\n"+this._oRb.getText("BULLETMICROCHART_DELTA_TOOLTIP",[h+s,l])}}else if(this._isForecastValueSet){a+=this._isForecastValueSet?"\n"+this._oRb.getText("BULLETMICROCHART_FORECAST_TOOLTIP",[this.getForecastValue()+s,l]):""}if(this._isTargetValueSet){var p=r?r:""+this.getTargetValue();a+="\n"+this._oRb.getText("BULLETMICROCHART_TARGET_TOOLTIP",[p+s])}return a};c.prototype._getAltSubText=function(e){var t="";var a=this.getThresholds().sort(function(e,t){return e.getValue()-t.getValue()});for(var i=0;i<a.length;i++){var s=a[i],r=s.getTooltip_AsString(),l="";if(!r){continue}l+=(e?"":"\n")+this._oRb.getText("BULLETMICROCHART_THRESHOLD_TOOLTIP",[s.getValue()+this.getScale(),this._getLocalizedColorMeaning(s.getColor())]);l=r.split("((AltText))").join(l);if(l){t+=l;e=false}}return t};c.prototype.clone=function(e,t,a){var s=i.prototype.clone.apply(this,arguments);s._isMinValueSet=this._isMinValueSet;s._isMaxValueSet=this._isMaxValueSet;s._isForecastValueSet=this._isForecastValueSet;s._isTargetValueSet=this._isTargetValueSet;return s};c.prototype._addTitleAttribute=function(){if(!this.$().attr("title")&&this._hasData()){this.$().attr("title",this.getTooltip_AsString())}};c.prototype._removeTitleAttribute=function(){if(this.$().attr("title")){this.$().removeAttr("title")}};c.prototype._bindMouseEnterLeaveHandler=function(){if(!this._oMouseEnterLeaveHandler){this._oMouseEnterLeaveHandler={mouseEnterChart:this._addTitleAttribute.bind(this),mouseLeaveChart:this._removeTitleAttribute.bind(this)}}this.$().on("mouseenter",this._oMouseEnterLeaveHandler.mouseEnterChart);this.$().on("mouseleave",this._oMouseEnterLeaveHandler.mouseLeaveChart)};c.prototype._unbindMouseEnterLeaveHandler=function(){if(this._oMouseEnterLeaveHandler){this.$().off("mouseenter",this._oMouseEnterLeaveHandler.mouseEnterChart);this.$().off("mouseleave",this._oMouseEnterLeaveHandler.mouseLeaveChart)}};c.prototype._hasData=function(){return this.getActual()};c.prototype.firePress=function(){if(this._hasData()){i.prototype.fireEvent.call(this,"press",arguments)}};o.extendMicroChart(c);return c});
/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/BulletMicroChartData", ["./library","sap/ui/core/Element"],function(t,e){"use strict";var r=e.extend("sap.suite.ui.microchart.BulletMicroChartData",{metadata:{library:"sap.suite.ui.microchart",properties:{value:{type:"float",group:"Misc",defaultValue:"0"},color:{type:"sap.m.ValueColor",group:"Misc",defaultValue:"Neutral"}}}});r.prototype.init=function(){this.setAggregation("tooltip","((AltText))",true)};r.prototype.setValue=function(t){this._isValueSet=this._fnIsNumber(t);return this.setProperty("value",this._isValueSet?t:NaN)};r.prototype._fnIsNumber=function(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)};r.prototype.clone=function(t,r,i){var u=e.prototype.clone.apply(this,arguments);u._isValueSet=this._isValueSet;return u};return r});
/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/BulletMicroChartRenderer", ["./library","sap/base/i18n/Localization","sap/m/library","sap/suite/ui/microchart/MicroChartRenderUtils"],function(e,a,t,l){"use strict";var s={apiVersion:2};s.render=function(l,s){if(!s._bThemeApplied){return}if(s._hasData()&&!isNaN(s.getAggregation("actual").getValue())){var i=s._calculateChartData();var r=+i.forecastValuePct;var o;if(s._isResponsive()){o="sapSuiteBMCResponsive"}else{o="sapSuiteBMCSize"+s.getSize()}var c=s.getScale();var u=a.getRTL()?"right":"left";var d="sapSuiteBMCModeType"+s.getMode();var n=s.getMode()===e.BulletMicroChartModeType.Delta?s._calculateDeltaValue():0;var p=s.getActual()&&s.getActual()._isValueSet;var S=s.getShowActualValue()&&s.getSize()!==t.Size.XS&&s.getMode()===e.BulletMicroChartModeType.Actual;var g=s.getShowActualValueInDeltaMode()&&s.getSize()!==t.Size.XS&&s.getMode()===e.BulletMicroChartModeType.Delta;var v=s.getShowDeltaValue()&&s.getSize()!==t.Size.XS&&s.getMode()===e.BulletMicroChartModeType.Delta;var M=s.getShowTargetValue()&&s.getSize()!==t.Size.XS;var h=s.getShowThresholds();var C=s.getActualValueLabel();var B=s.getDeltaValueLabel();var V=s.getTargetValueLabel();var f=s.getThresholds();var T;if(p){T="sapSuiteBMCSemanticColor"+s.getActual().getColor()}l.openStart("div",s);this._writeMainProperties(l,s);l.openEnd();l.openStart("div");l.class("sapSuiteBMCVerticalAlignmentContainer");l.openEnd();l.openStart("div",s.getId()+"-bc-chart");l.class("sapSuiteBMCChart");l.class(o);l.openEnd();if(p&&(S||g)||p&&s._isTargetValueSet&&v){var b="";l.openStart("div");l.class("sapSuiteBMCTopLabel");l.openEnd();if(p&&(S||g)){var y=C?C:""+s.getActual().getValue();b=y+c;l.openStart("div",s.getId()+"-bc-item-value");l.class("sapSuiteBMCItemValue");l.class(T);l.class(o);l.openEnd();l.text(b);l.close("div")}else if(p&&s._isTargetValueSet&&v){var E=B?B:""+n;b=E+c;l.openStart("div",s.getId()+"-bc-item-value");l.class("sapSuiteBMCItemValue");l.class(T);l.class(o);l.openEnd();l.text("Δ");l.text(b);l.close("div")}l.close("div")}l.openStart("div");l.class("sapSuiteBMCChartCanvas");l.openEnd();if(h){for(var _=0;_<i.thresholdsPct.length;_++){if(f[_]._isValueSet){this.renderThreshold(l,s,i.thresholdsPct[_],o)}}}l.openStart("div",s.getId()+"-chart-bar");l.class("sapSuiteBMCBar");l.class(o);l.class("sapSuiteBMCScaleColor"+s.getScaleColor());l.openEnd();l.close("div");if(p){if(s._isForecastValueSet&&s.getMode()===e.BulletMicroChartModeType.Actual){l.openStart("div",s.getId()+"-forecast-bar-value");l.class("sapSuiteBMCForecastBarValue");l.class(T);l.class(o);l.style("width",r+"%");l.openEnd();l.close("div")}l.openStart("div",s.getId()+"-bc-bar-value-marker");l.class("sapSuiteBMCBarValueMarker");l.class(d);if(!s.getShowValueMarker()){l.class("sapSuiteBMCBarValueMarkerHidden")}l.class(T);l.class(o);l.style(u,parseFloat(i.actualValuePct)+parseFloat(1)+"%");if(s.getMode()===e.BulletMicroChartModeType.Delta&&i.actualValuePct<=i.targetValuePct){l.style("margin","0")}l.openEnd();l.close("div");if(s.getMode()===e.BulletMicroChartModeType.Actual&&i.actualValuePct!==0){l.openStart("div",s.getId()+"-bc-bar-value");l.class("sapSuiteBMCBarValue");l.class(T);l.class(o);if(s._isForecastValueSet){l.class("sapSuiteBMCForecast")}l.style("width",i.actualValuePct+"%");l.openEnd();l.close("div")}else if(s._isTargetValueSet&&s.getMode()===e.BulletMicroChartModeType.Delta){l.openStart("div",s.getId()+"-bc-bar-value");l.class("sapSuiteBMCBarValue");l.class(T);l.class(o);l.style("width",Math.abs(i.actualValuePct-i.targetValuePct)+"%");l.style(u,1+Math.min(i.actualValuePct,i.targetValuePct)+"%");l.openEnd();l.close("div")}}if(s._isTargetValueSet){l.openStart("div",s.getId()+"-bc-target-bar-value");l.class("sapSuiteBMCTargetBarValue");l.class(o);l.style(u,parseFloat(i.targetValuePct).toFixed(2)+"%");l.openEnd();l.close("div");l.close("div");if(M){l.openStart("div");l.class("sapSuiteBMCBottomLabel");l.openEnd();var P=V?V:""+s.getTargetValue();var m=P+c;l.openStart("div",s.getId()+"-bc-target-value");l.class("sapSuiteBMCTargetValue");l.class(o);l.openEnd();l.text(m);l.close("div");l.close("div")}}else{l.close("div")}l.close("div");l.openStart("div",s.getId()+"-info");l.attr("aria-hidden","true");l.style("display","none");l.openEnd();l.close("div");l.close("div");l.close("div")}else{this._renderNoData(l,s)}};s._writeMainProperties=function(e,a){var t=a.hasListeners("press");this._renderActiveProperties(e,a);var l=a.getTooltip_AsString(t);e.attr("role","figure");if(a.getAriaLabelledBy().length){e.accessibilityState(a)}else{e.attr("aria-label",l)}e.class("sapSuiteBMC");e.class("sapSuiteBMCContent");e.class(a._isResponsive()?"sapSuiteBMCResponsive":"sapSuiteBMCSize"+a.getSize());e.style("width",a.getWidth());e.style("height",a.getHeight())};s.renderThreshold=function(e,l,s,i){var r=a.getRTL()?"right":"left",o=.98*s.valuePct+1,c="sapSuiteBMCSemanticColor"+s.color;if(c==="sapSuiteBMCSemanticColor"+t.ValueColor.Error){e.openStart("div");e.class("sapSuiteBMCDiamond");e.class(i);e.class(c);e.style(r,o+"%");e.openEnd();e.close("div")}e.openStart("div");e.class("sapSuiteBMCThreshold");e.class(i);e.class(c);e.style(r,o+"%");e.openEnd();e.close("div")};l.extendMicroChartRenderer(s);return s},true);
/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/ComparisonMicroChart", ["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","sap/ui/Device","sap/m/FlexBox","sap/suite/ui/microchart/MicroChartUtils","sap/m/library","sap/ui/core/ResizeHandler","./ComparisonMicroChartRenderer","sap/ui/core/Core","sap/ui/core/Theming","./ComparisonMicroChartData","sap/m/Menu","sap/m/MenuItem","sap/ui/core/Lib","sap/base/i18n/Localization"],function(jQuery,e,t,i,a,r,s,o,n,h,p,l,u,d,f,c){"use strict";const g=e.MicroChartColorType;var C=e.ComparisonMicroChartViewType;var v=s.Size;var _=["zh","zh-hk","zh-cn","zh-sg","zh-sw"];var m=t.extend("sap.suite.ui.microchart.ComparisonMicroChart",{metadata:{library:"sap.suite.ui.microchart",properties:{size:{type:"sap.m.Size",group:"Misc",defaultValue:"Auto"},scale:{type:"string",group:"Misc",defaultValue:""},minValue:{type:"float",group:"Appearance",defaultValue:null},maxValue:{type:"float",group:"Appearance",defaultValue:null},view:{type:"sap.suite.ui.microchart.ComparisonMicroChartViewType",group:"Appearance",defaultValue:"Normal"},colorPalette:{type:"string[]",group:"Appearance",defaultValue:[]},shrinkable:{type:"boolean",group:"Misc",defaultValue:false},width:{type:"sap.ui.core.CSSSize",group:"Appearance"},height:{type:"sap.ui.core.CSSSize",group:"Appearance"},isResponsive:{type:"boolean",group:"Appearance",defaultValue:false},hideOnNoData:{type:"boolean",group:"Appearance",defaultValue:false}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},defaultAggregation:"data",aggregations:{data:{type:"sap.suite.ui.microchart.ComparisonMicroChartData",multiple:true,bindable:"bindable",defaultClass:l}},events:{press:{}}},renderer:n});m.THRESHOLD_LOOK_XS=6;m.THRESHOLD_LOOK_S=8.25;m.THRESHOLD_LOOK_M=10.5;m.THRESHOLD_LOOK_L=12;m.prototype.attachEvent=function(e,i,a,r){t.prototype.attachEvent.call(this,e,i,a,r);if(this.hasListeners("press")){this.$().attr("tabindex",0).addClass("sapSuiteUiMicroChartPointer")}return this};m.prototype.detachEvent=function(e,i,a){t.prototype.detachEvent.call(this,e,i,a);if(!this.hasListeners("press")){this.$().removeAttr("tabindex").removeClass("sapSuiteUiMicroChartPointer")}return this};m.prototype.onclick=function(e){if(!this.fireBarPress(e)){setTimeout(()=>{var e=this._oMenu;if(!e.isOpen()){this.firePress()}},0)}};m.prototype.oncontextmenu=function(e){this._openMenu();e.preventDefault();return false};m.prototype.fireBarPress=function(e){var t=e.target;var i=this._getBarIndex(t);var a=this._getSize()===v.L||this._getSize()===v.M;var r=!!t.getAttribute("data-bar-index");var s=false;if(a){s=i>=0?true:false}if(s||!a&&r){var o=this.getData()[i];if(o&&o.hasListeners("press")){var n=this.$().find(".sapSuiteUiMicroChartBarPointer");var h=n.index(this.$().find(".sapSuiteUiMicroChartBarPointer[tabindex='0']"));this._switchTabindex(h,i,n);return true}}return false};m.prototype.onsaptabprevious=function(){this.$().css("outline-color","")};m.prototype.onsaptabnext=function(){var e=this.$().next();if(e.hasClass("sapSuiteCpMC")&&e.attr("tabindex")){e.css("outline-color","")}};m.prototype.onsapenter=function(e){if(!this.fireBarPress(e)){this.firePress();e.preventDefault();e.stopImmediatePropagation()}};m.prototype.onsapspace=m.prototype.onsapenter;m.prototype.onsapup=function(e){var t=this.$().find(".sapSuiteUiMicroChartBarPointer");if(t.length>0){var i=t.index(e.target);this._switchTabindex(i,i-1,t)}e.preventDefault();e.stopImmediatePropagation()};m.prototype.onsapdown=function(e){var t=this.$().find(".sapSuiteUiMicroChartBarPointer");if(t.length>0){var i=t.index(e.target);this._switchTabindex(i,i+1,t)}e.preventDefault();e.stopImmediatePropagation()};m.prototype.onsaphome=function(e){var t=this.$().find(".sapSuiteUiMicroChartBarPointer");var i=t.index(e.target);if(i!==0&&t.length>0){this._switchTabindex(i,0,t)}e.preventDefault();e.stopImmediatePropagation()};m.prototype.onsapend=function(e){var t=this.$().find(".sapSuiteUiMicroChartBarPointer");var i=t.index(e.target),a=t.length;if(i!==a-1&&a>0){this._switchTabindex(i,a-1,t)}e.preventDefault();e.stopImmediatePropagation()};m.prototype.onsapleft=m.prototype.onsapup;m.prototype.onsapright=m.prototype.onsapdown;m.prototype.setMinValue=function(e){this._isMinValueSet=Number.isFinite(Number(e));return this.setProperty("minValue",this._isMinValueSet?e:NaN)};m.prototype.setMaxValue=function(e){this._isMaxValueSet=Number.isFinite(Number(e));return this.setProperty("maxValue",this._isMaxValueSet?e:NaN)};m.prototype.setSize=function(e){if(this.getSize()!==e){this.setProperty("size",e,false)}return this};m.prototype.init=function(){this._oRb=f.getResourceBundleFor("sap.suite.ui.microchart");this.setAggregation("tooltip","((AltText))",true);this._isMinValueSet=false;this._isMaxValueSet=false;this._bThemeApplied=false;this._oMenu=new u(this.getId()+"-detailView");this.addDependent(this._oMenu);h.ready(this._handleCoreInitialized.bind(this))};m.prototype._handleCoreInitialized=function(){p.attachApplied(this._handleThemeApplied.bind(this))};m.prototype._handleThemeApplied=function(){this._bThemeApplied=true;this.invalidate();p.detachApplied(this._handleThemeApplied.bind(this))};m.prototype._getBarIndex=function(e){var t=this.getData();for(var i=0;i<t.length;i++){if(t[i].getDomRef().contains(e)){return i}}return-1};m.prototype.onBeforeRendering=function(){if(this._sChartResizeHandlerId){o.deregister(this._sChartResizeHandlerId)}this._unbindMouseEnterLeaveHandler()};m.prototype.onAfterRendering=function(){e._checkControlIsVisible(this,this._onControlIsVisible);this._bindMouseEnterLeaveHandler();var t=c.getLanguageTag().language;var i=_.includes(t.toLowerCase());this.toggleStyleClass("sapCMCEastCharsPresent",i)};m.prototype._onControlIsVisible=function(){this._onResize();this._sChartResizeHandlerId=o.register(this,this._onResize.bind(this))};m.prototype.setBarPressable=function(e,t){if(t){var i=this._getBarAltText(e);this.$("chart-item-bar-"+e).addClass("sapSuiteUiMicroChartPointer").attr("tabindex",0).attr("title",i).attr("role","presentation").attr("aria-label",i)}else{this.$("chart-item-bar-"+e).removeAttr("tabindex").removeClass("sapSuiteUiMicroChartPointer").removeAttr("title").removeAttr("role").removeAttr("aria-label")}};m.prototype._getAltHeaderText=function(e){var t=this._oRb.getText("COMPARISONMICROCHART");if(e){t+=" "+this._oRb.getText("IS_ACTIVE")}if(!this._hasData()){t+="\n"+this._oRb.getText("NO_DATA");return t}return t};m.prototype._getAltSubText=function(e){var t="";for(var i=0;i<this.getData().length;i++){var a=this.getData()[i],r=this._getBarAltText(i),s=a.getTooltip_AsString(),o="";if(!s){continue}o=s.split("((AltText))").join(r);if(o){t+=(e?"":"\n")+o;e=false}}return t};m.prototype.exit=function(){o.deregister(this._sChartResizeHandlerId)};m.prototype._calculateChartData=function(){var e=[];var t=this.getData();var i=t.length;var a=0;var r=0;var s;var o;var n;var h;for(h=0;h<i;h++){var p=isNaN(t[h].getValue())?0:t[h].getValue();a=Math.max(a,p);r=Math.min(r,p)}if(this._isMinValueSet){r=Math.min(r,this.getMinValue())}if(this._isMaxValueSet){a=Math.max(a,this.getMaxValue())}s=a-r;o=s==0?0:Math.round(a*100/s);if(o==0&&a!=0){o=1}else if(o==100&&r!=0){o=99}n=100-o;for(h=0;h<i;h++){var l={};var u=isNaN(t[h].getValue())?0:t[h].getValue();l.value=s==0?0:Math.round(u*100/s);if(l.value==0&&u!=0){l.value=u>0?1:-1}else if(l.value==100){l.value=o}else if(l.value==-100){l.value=-n}if(l.value>=0){l.negativeNoValue=n;l.positiveNoValue=o-l.value}else{l.value=-l.value;l.negativeNoValue=n-l.value;l.positiveNoValue=o}e.push(l)}return e};m.prototype._getLocalizedColorMeaning=function(e){return g.hasOwnProperty(e)&&e!="None"?this._oRb.getText(("SEMANTIC_COLOR_"+e).toUpperCase()):""};m.prototype._getBarAltText=function(e){var i=this.getData()[e],a=t.prototype.getTooltip_AsString.apply(i,arguments),r=this.getColorPalette().length?"":this._getLocalizedColorMeaning(i.getColor()),s=i.getTitle()+" "+(i.getDisplayValue()?i.getDisplayValue():i.getValue())+this.getScale()+" "+r;if(!a){return""}return a.split("((AltText))").join(s)};m.prototype._onResize=function(){this.$().find(".sapSuiteCpMCChartItem").show();this._resizeHorizontally();this._resizeVertically()};m.prototype._resizeVertically=function(){var e,t,i,a,r,s,o,n,h,p=this.getData(),l=this.$(),u,d=l.find(".sapSuiteCpMCChartItem"),f=l.find(".sapSuiteCpMCChartBar");d.css("margin-bottom","");d.css("height","");f.css("height","");if(p.length>0&&p[0].getDomRef()){e=p[0].getDomRef().getBoundingClientRect().height;t=parseFloat(p[0].$().css("margin-bottom"));i=f.height();s=l.width();o=this._getCurrentBaseWidth();if(o>0){n=o/e;e=s/n;d.css("height",e);n=o/t;t=s/n;d.css("margin-bottom",t);n=o/i;f.css("height",s/n)}a=l.find(".sapSuiteCpMCVerticalAlignmentContainer")[0].getBoundingClientRect().height;r=0;for(var c=0;c<p.length;c++){r+=e;if(Math.floor(r)>Math.floor(a)){p[c].$().hide()}r+=t}u=this.$().find(".sapSuiteCpMCVerticalAlignmentContainer .sapSuiteCpMCChartItem:visible:last");if(u.length===1&&!this.getShrinkable()){u.css("margin-bottom","");h=this.getDomRef().getBoundingClientRect().bottom-u[0].getBoundingClientRect().bottom;if(h<t){u.css("margin-bottom",h<0?0:h)}}}};m.prototype._resizeHorizontally=function(){var e=this.$();var t=0;var i=0;var a=this.$().find(".sapSuiteCpMCChartItemTitle");var r=this.$().find(".sapSuiteCpMCChartItemValue");var s;var o;e.removeClass("sapSuiteCpMCLookL sapSuiteCpMCLookM sapSuiteCpMCLookS sapSuiteCpMCLookXS sapSuiteCpMCLookWide");o=this._getCurrentLookClass();e.addClass(o);if(!e.hasClass("sapSuiteCpMCLookXS")){this._hideTruncatedLabels(".sapSuiteCpMCChartItemValue")}a.width("auto");r.width("auto");if(e.hasClass("sapSuiteCpMCLookWide")){a.each(function(){s=this.getBoundingClientRect();if(s.width>t){t=Math.ceil(s.width)}});a.width(t);r.each(function(){s=this.getBoundingClientRect();if(s.width>i){i=Math.ceil(s.width)}});r.width(i)}};m.prototype._getCurrentBaseWidth=function(){var e=this.$();var t=parseInt(e.width());var i;if(this.getView()===C.Wide||t>this.convertRemToPixels(m.THRESHOLD_LOOK_L)||this.getSize()!==v.Responsive){i=0}else if(t>this.convertRemToPixels(m.THRESHOLD_LOOK_M)){i=this.convertRemToPixels(m.THRESHOLD_LOOK_L)}else if(t>this.convertRemToPixels(m.THRESHOLD_LOOK_S)){i=this.convertRemToPixels(m.THRESHOLD_LOOK_M)}else if(t>this.convertRemToPixels(m.THRESHOLD_LOOK_XS)){i=this.convertRemToPixels(m.THRESHOLD_LOOK_S)}else{i=0}return i};m.prototype._getCurrentLookClass=function(){var e=this.$();var t=parseInt(e.width());var i;if(this._shouldUseWideView()){i="sapSuiteCpMCLookWide"}else if(this.getSize()!==v.Responsive){i="sapSuiteCpMCLook"+this._getSize()}else if(t>this.convertRemToPixels(m.THRESHOLD_LOOK_M)){i="sapSuiteCpMCLookL"}else if(t>this.convertRemToPixels(m.THRESHOLD_LOOK_S)){i="sapSuiteCpMCLookM"}else if(t>this.convertRemToPixels(m.THRESHOLD_LOOK_XS)){i="sapSuiteCpMCLookS"}else{i="sapSuiteCpMCLookXS"}return i};m.prototype._getSize=function(){var e=this.getSize();if(e===v.Auto){if(i.system.phone){e=v.S}else{e=v.M}}return e};m.prototype._shouldUseWideView=function(){var e=parseInt(this.$().width());return this.getView()===C.Wide||this.getView()===C.Responsive&&e>this.convertRemToPixels(m.THRESHOLD_LOOK_L)};m.prototype._hideTruncatedLabels=function(e){var t=this.$();var i=t.find(e);for(var a=0;a<i.length;a++){jQuery(i[a]).removeClass("sapSuiteCpMCChartItemHiddenLabel");if(this._isLabelTruncated(i[a])){jQuery(i[a]).addClass("sapSuiteCpMCChartItemHiddenLabel")}}};m.prototype._addTitleAttribute=function(){var t=this.getTooltip_AsString();if(!e._isTooltipSuppressed(t)&&this._hasData()){if(this._isResponsive()){this.$().find(".sapSuiteCpMCVerticalAlignmentContainer").attr("title",t)}else{this.$().attr("title",t)}}};m.prototype._removeTitleAttribute=function(){if(this._isResponsive()){this.$().find(".sapSuiteCpMCVerticalAlignmentContainer").removeAttr("title")}else{this.$().removeAttr("title")}};m.prototype._resolveFocus=function(e){var t=jQuery(e.target);if(t&&t.attr("data-bar-index")){var i=parseInt(t.attr("data-bar-index"));var a=this.getData()[i];if(a&&a.hasListeners("press")){this.$().css("outline-color","transparent")}else{this.$().css("outline-color","")}}else{this.$().css("outline-color","")}};m.prototype._switchTabindex=function(e,t,i){if(e>=0&&e<i.length&&t>=0&&t<i.length){i.eq(e).removeAttr("tabindex");i.eq(t).attr("tabindex","0").trigger("focus")}};m.prototype._bindMouseEnterLeaveHandler=function(){if(!this._oMouseEnterLeaveHandler){this._oMouseEnterLeaveHandler={mouseEnterChart:this._addTitleAttribute.bind(this),mouseLeaveChart:this._removeTitleAttribute.bind(this),mouseDownChart:this._resolveFocus.bind(this)}}this.$().on("mouseenter",this._oMouseEnterLeaveHandler.mouseEnterChart);this.$().on("mouseleave",this._oMouseEnterLeaveHandler.mouseLeaveChart);this.$().on("mousedown",this._oMouseEnterLeaveHandler.mouseDownChart)};m.prototype._unbindMouseEnterLeaveHandler=function(){if(this._oMouseEnterLeaveHandler){this.$().off("mouseenter",this._oMouseEnterLeaveHandler.mouseEnterChart);this.$().off("mouseleave",this._oMouseEnterLeaveHandler.mouseLeaveChart);this.$().off("mousedown",this._oMouseEnterLeaveHandler.mouseDownChart)}};m.prototype._hasData=function(){return this.getData().length>0};m.prototype._openMenu=function(){if(this._isDataChanged()){this._oMenu.removeAllItems();this._oMenu.addItem(new d({text:this._oRb.getText("DELTAMICROCHART_ENTIRE_CHART"),press:this._fireChart.bind(this)}));this.getData().forEach(e=>{this._oMenu.addItem(new d({text:this._oRb.getText("DELTAMICROCHART_MENU_ITEM",[e.getTitle()]),press:this._onMenuItemClick.bind(this)}))})}if(this._hasData()){this._oMenu.openBy(this,true,"right")}};m.prototype._fireChart=function(){this.firePress()};m.prototype._isDataChanged=function(){var e=[];var t=[];this.getData().forEach(t=>{e.push(t.getTitle())});this._oMenu.getItems().forEach(e=>{t.push(e.getText())});if(e.length!==t.length){return true}for(var i=0;i<e.length;i++){if(e[i]!=t[i]){return true}}return false};m.prototype._onMenuItemClick=function(e){var t=e.getSource();var i=this._getIndex(t,t.getParent());var a=this.getData()[i-1];if(a&&a.hasListeners("press")){a.firePress()}};m.prototype._getIndex=function(e,t){var i=t.getItems();for(var a=0;a<i.length;a++){if(i[a]===e){return a}}return 0};m.prototype.firePress=function(){if(this._hasData()){t.prototype.fireEvent.call(this,"press",arguments)}};r.extendMicroChart(m);return m});
/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/ComparisonMicroChartData", ["./library","sap/ui/core/Element","sap/ui/core/Control","sap/m/library","sap/suite/ui/microchart/MicroChartUtils"],function(t,e,r,i,a){"use strict";const o=t.MicroChartColorType;var s=i.Size;var n=e.extend("sap.suite.ui.microchart.ComparisonMicroChartData",{metadata:{library:"sap.suite.ui.microchart",properties:{value:{type:"float",group:"Misc",defaultValue:"0"},color:{group:"Misc",type:"string",defaultValue:o.Neutral},title:{type:"string",group:"Misc",defaultValue:""},displayValue:{type:"string",group:"Misc",defaultValue:""}},events:{press:{}}}});n.prototype.init=function(){this.setAggregation("tooltip","((AltText))",true)};n.prototype.setValue=function(t,e){this._isValueSet=this._fnIsNumber(t);return this.setProperty("value",this._isValueSet?t:NaN,e)};n.prototype._fnIsNumber=function(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)};n.prototype.clone=function(t,e,i){var a=r.prototype.clone.apply(this,arguments);a._isValueSet=this._isValueSet;return a};n.prototype.attachEvent=function(t,e,i,a){r.prototype.attachEvent.call(this,t,e,i,a);if(this.getParent()){this.getParent().setBarPressable(this.getParent().getData().indexOf(this),true)}return this};n.prototype.detachEvent=function(t,e,i){r.prototype.detachEvent.call(this,t,e,i);if(this.getParent()){this.getParent().setBarPressable(this.getParent().getData().indexOf(this),false)}return this};n.prototype.onsapenter=function(t){this.firePress()};n.prototype.onsapspace=n.prototype.onsapenter;n.prototype.onclick=function(t){var e=this.getParent()?._getSize();if(e===s.XS||e===s.S){var r=t.target;if(r&&!r.getAttribute("data-bar-index")){return}}setTimeout(()=>{var t=this.getParent()?._oMenu;if(!t.isOpen()){this.firePress()}},0);t.preventDefault()};n.prototype.oncontextmenu=function(t){if(this.getParent()){this.getParent().oncontextmenu(t)}};a.extendMicroChartSetColor(n);return n});
/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/ComparisonMicroChartRenderer", ["./library","sap/suite/ui/microchart/MicroChartRenderUtils","sap/ui/core/theming/Parameters","sap/m/library"],function(e,t,a,i){"use strict";const r=e.MicroChartColorType;var s=i.Size;var n={apiVersion:2};n.render=function(e,t){if(!t._bThemeApplied){return}if(t._hasData()){var a=t.getTooltip_AsString(t.hasListeners("press"));e.openStart("div",t);this._writeMainProperties(e,t);if(t.getShrinkable()){e.class("sapSuiteCpMCShrinkable");e.style("height","auto")}e.openEnd();this._renderInnerContent(e,t,a);e.openStart("div",t.getId()+"-info");e.attr("aria-hidden","true");e.style("display","none");e.openEnd();e.text(a);e.close("div");e.openStart("div",t.getId()+"-hidden");e.attr("aria-hidden","true");e.attr("focusable","false");e.openEnd();e.close("div");e.close("div")}else{this._renderNoData(e,t)}};n._writeMainProperties=function(e,t){var a=t.hasListeners("press");this._renderActiveProperties(e,t);var i=t.getTooltip_AsString(a);e.attr("role","figure");if(t.getAriaLabelledBy().length){e.accessibilityState(t)}else{e.attr("aria-label",i)}e.class("sapSuiteCpMC");e.class("sapSuiteCpMCChartContent");e.class(t._isResponsive()?"sapSuiteCpMCResponsive":"sapSuiteCpMCSize"+t.getSize());e.class("sapSuiteCpMCViewType"+t.getView());e.style("width",t.getWidth());e.style("height",t.getHeight())};n._renderInnerContent=function(e,t){var i=t.getColorPalette().length,r=0,s=t.getData(),n=t._calculateChartData(),l;var o=function(e){if(i){if(r===i){r=0}e=t.getColorPalette()[r++].trim()}l=a.get(e);return l||e};e.openStart("div");e.class("sapSuiteCpMCVerticalAlignmentContainer");e.openEnd();for(var p=0;p<n.length;p++){this._renderChartItem(e,t,n[p],p,o(s[p].getColor()))}e.close("div")};n._renderChartItem=function(e,t,a,i,r){var n=t.getData();var l=t._getSize();var o=l===s.L||l===s.M;e.openStart("div",n[i]);e.class("sapSuiteCpMCChartItem");if(o){this._applyAriaAttributes(e,t,i)}e.openEnd();this._renderChartTitle(e,t,i);this._renderChartBar(e,t,a,i,r);this._renderChartValue(e,t,i,r);e.close("div")};n._applyAriaAttributes=function(t,a,i){if(a.getData()[i].hasListeners("press")){if(i===0){t.attr("tabindex","0")}t.attr("role","presentation");t.attr("aria-label",a._getBarAltText(i));if(!e._isTooltipSuppressed(a._getBarAltText(i))){t.attr("title",a._getBarAltText(i))}else{t.attr("title","")}t.attr("data-bar-index",i);t.class("sapSuiteUiMicroChartBarPointer")}};n._renderChartBar=function(e,t,a,i,r){var n=t.getData()[i];var l=t._getSize();var o=l===s.L||l===s.M;e.openStart("div",t.getId()+"-chart-item-bar-"+i);e.class("sapSuiteCpMCChartBar");if(!o){this._applyAriaAttributes(e,t,i)}e.openEnd();if(a.negativeNoValue>0){e.openStart("div");e.attr("data-bar-index",i);e.class("sapSuiteCpMCChartBarNegNoValue");if(a.value>0||a.positiveNoValue>0){e.class("sapSuiteCpMCNotLastBarPart")}e.style("width",a.negativeNoValue+"%");e.openEnd();e.close("div")}if(a.value>0){e.openStart("div");e.attr("data-bar-index",i);e.class("sapSuiteCpMCChartBarValue");e.class("sapSuiteCpMCSemanticColor"+n.getColor());e.style("background-color",r?r:"");e.style("width",a.value+"%");e.openEnd();e.close("div")}if(a.positiveNoValue>0){e.openStart("div");e.attr("data-bar-index",i);e.class("sapSuiteCpMCChartBarNoValue");if(a.negativeNoValue&&!a.value){e.class("sapSuiteCpMCNegPosNoValue")}else if(a.negativeNoValue||a.value){e.class("sapSuiteCpMCNotFirstBarPart")}e.style("width",a.positiveNoValue+"%");e.openEnd();e.close("div")}e.close("div")};n._renderChartTitle=function(e,t,a){var i=t.getData()[a];e.openStart("div",t.getId()+"-chart-item-"+a+"-title");e.class("sapSuiteCpMCChartItemTitle");e.openEnd();e.text(i.getTitle());e.close("div")};n._renderChartValue=function(e,t,a,i){var s=t.getData()[a];var n=t.getScale();var l=s.getDisplayValue();var o=l?l:""+s.getValue();var p=o+n;e.openStart("div",t.getId()+"-chart-item-"+a+"-value");e.class("sapSuiteCpMCChartItemValue");if(r.hasOwnProperty(i)){e.class("sapSuiteCpMCSemanticColor"+s.getColor())}if(s.getTitle()){e.class("sapSuiteCpMCTitle")}e.openEnd();if(!isNaN(s.getValue())){e.text(p)}e.close("div")};t.extendMicroChartRenderer(n);return n},true);
/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/HarveyBallMicroChart", ["./library","sap/ui/core/Control","sap/ui/Device","sap/ui/events/KeyCodes","sap/suite/ui/microchart/MicroChartUtils","sap/ui/core/ResizeHandler","./HarveyBallMicroChartRenderer","sap/ui/core/Core","sap/ui/core/Theming","./HarveyBallMicroChartItem"],function(t,e,i,a,r,s,o,n,l,p){"use strict";const h=t.MicroChartColorType;var u=e.extend("sap.suite.ui.microchart.HarveyBallMicroChart",{metadata:{library:"sap.suite.ui.microchart",properties:{total:{group:"Misc",type:"float",defaultValue:null},totalLabel:{group:"Misc",type:"string"},totalScale:{group:"Misc",type:"string"},formattedLabel:{group:"Misc",type:"boolean",defaultValue:false},showTotal:{group:"Misc",type:"boolean",defaultValue:true},showFractions:{group:"Misc",type:"boolean",defaultValue:true},size:{group:"Misc",type:"sap.m.Size",defaultValue:"Auto"},colorPalette:{type:"string[]",group:"Appearance",defaultValue:[]},width:{type:"sap.ui.core.CSSSize",group:"Misc"},height:{type:"sap.ui.core.CSSSize",group:"Misc"},alignContent:{group:"Misc",type:"sap.suite.ui.microchart.HorizontalAlignmentType",defaultValue:"Left"},isResponsive:{type:"boolean",group:"Appearance",defaultValue:false},hideOnNoData:{type:"boolean",group:"Appearance",defaultValue:false}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},defaultAggregation:"items",aggregations:{items:{multiple:true,type:"sap.suite.ui.microchart.HarveyBallMicroChartItem",bindable:"bindable",defaultClass:p}},events:{press:{}}},renderer:o});u.VALUE_TRUNCATION_DIGITS=5;u.THRESHOLD_LOOK_XS=1.125;u.THRESHOLD_LOOK_S=3.5;u.THRESHOLD_LOOK_M=4.5;u.THRESHOLD_LOOK_L=5.875;u.prototype._getAltHeaderText=function(t){var e=this._oRb.getText("HARVEYBALLMICROCHART");if(t){e+=" "+this._oRb.getText("IS_ACTIVE")}if(!this._hasData()){e+="\n"+this._oRb.getText("NO_DATA");return e}return e};u.prototype._getAltSubText=function(t){var e="";var i=this.getItems();i.forEach(function(i){var a=i.getColor(),r=i.getTooltip_AsString(),s="";if(!r){return}var o=this.getColorPalette().length===0&&h.hasOwnProperty(a)?this._oRb.getText(("SEMANTIC_COLOR_"+a).toUpperCase()):"";var n=i.getFractionLabel();var l=i.getFractionScale();if(!n&&l){n=i.getFormattedLabel()?i.getFraction():i.getFraction()+i.getFractionScale().substring(0,3)}else if(!i.getFormattedLabel()&&i.getFractionLabel()&&l){n+=i.getFractionScale().substring(0,3)}s+=n+" "+o;s=r.split("((AltText))").join(s);if(s){e+="\n"+s;t=false}}.bind(this));if(this.getTotal()){var a=this.getTotalLabel();if(!a){if(this.getFormattedLabel()&&this.getTotal()){a=this.getTotal()}else if(this.getTotalScale()&&this.getTotal()){a=this.getTotal()+this.getTotalScale().substring(0,3)}}else if(!this.getFormattedLabel()&&this.getTotalScale()){a+=this.getTotalScale().substring(0,3)}e+=(t?"":"\n")+this._oRb.getText("HARVEYBALLMICROCHART_TOTAL_TOOLTIP")+" "+a}return e};u.prototype.getTooltip_AsString=function(t){var i=e.prototype.getTooltip_AsString.apply(this,arguments),a=this._getAltHeaderText(t),r=false;if(i){a=i.split("((AltText))").join(a)}if(!i||!a){a="";r=true}a+=this._getAltSubText(r);return a};u.prototype.init=function(){this._oRb=n.getLibraryResourceBundle("sap.suite.ui.microchart");this.setAggregation("tooltip","((AltText))",true);i.media.attachHandler(this.invalidate,this,i.media.RANGESETS.SAP_STANDARD);this._sChartResizeHandlerId=null;this._bThemeApplied=false;n.ready(this._handleCoreInitialized.bind(this))};u.prototype.setSize=function(t){if(this.getSize()!==t){this.setProperty("size",t,false)}return this};u.prototype._handleCoreInitialized=function(){l.attachApplied(this._handleThemeApplied.bind(this))};u.prototype._handleThemeApplied=function(){this._bThemeApplied=true;this.invalidate();l.detachApplied(this._handleThemeApplied.bind(this))};u.prototype.onBeforeRendering=function(){if(this._sChartResizeHandlerId){s.deregister(this._sChartResizeHandlerId)}this._unbindMouseEnterLeaveHandler()};u.prototype.onAfterRendering=function(){t._checkControlIsVisible(this,this._onControlIsVisible);this._bindMouseEnterLeaveHandler()};u.prototype._onControlIsVisible=function(){this._onResize();this._sChartResizeHandlerId=s.register(this,this._onResize.bind(this))};u.prototype._onResize=function(){var t=this.$(),e=t.height(),i=t.find(".sapSuiteHBMCChart").first(),a=t.find(".sapSuiteHBMCTextContainer").first(),r,s;t.removeClass("sapSuiteHBMCLookL sapSuiteHBMCLookM sapSuiteHBMCLookS sapSuiteHBMCLookXS");a.removeClass("sapSuiteHBMCTextContainerHide");i.css("width",i.css("height"));var o=t.find(".sapSuiteHBMCChartSvg")[0];if(o){o.setAttribute("viewBox","0 0 72 72")}if(e<this.convertRemToPixels(u.THRESHOLD_LOOK_S)){t.addClass("sapSuiteHBMCLookXS");if(o){o.setAttribute("viewBox","5 5 62 62")}}else if(e<this.convertRemToPixels(u.THRESHOLD_LOOK_M)){t.addClass("sapSuiteHBMCLookS")}else if(e<this.convertRemToPixels(u.THRESHOLD_LOOK_L)){t.addClass("sapSuiteHBMCLookM")}else{t.addClass("sapSuiteHBMCLookL")}r=t.width();s=i.width()+a.outerWidth();if(r<s){a.addClass("sapSuiteHBMCTextContainerHide")}};u.prototype._parseFormattedValue=function(t){return{scale:t.replace(/.*?([^+-.,\d]*)$/g,"$1").trim(),value:t.replace(/(.*?)[^+-.,\d]*$/g,"$1").trim()}};u.prototype.ontap=function(t){if(this.hasListeners("press")===true){t.setMarked();t.stopPropagation()}this.firePress()};u.prototype.onkeydown=function(t){if(t.which==a.SPACE){t.preventDefault()}};u.prototype.onkeyup=function(t){if(t.which===a.ENTER||t.which===a.SPACE){this.firePress();t.preventDefault()}};u.prototype.attachEvent=function(t,i,a,r){e.prototype.attachEvent.call(this,t,i,a,r);if(this.hasListeners("press")){this.$().attr("tabindex",0).addClass("sapSuiteUiMicroChartPointer")}return this};u.prototype.detachEvent=function(t,i,a){e.prototype.detachEvent.call(this,t,i,a);if(!this.hasListeners("press")){this.$().removeAttr("tabindex").removeClass("sapSuiteUiMicroChartPointer")}return this};u.prototype.exit=function(t){i.media.detachHandler(this.invalidate,this,i.media.RANGESETS.SAP_STANDARD);s.deregister(this._sChartResizeHandlerId)};u.prototype._addTitleAttribute=function(){if(!this.$().attr("title")&&this._hasData()){this.$().attr("title",this.getTooltip_AsString())}};u.prototype._removeTitleAttribute=function(){if(this.$().attr("title")){this.$().removeAttr("title")}};u.prototype._bindMouseEnterLeaveHandler=function(){this.$().on("mouseenter.tooltip",this._addTitleAttribute.bind(this));this.$().on("mouseleave.tooltip",this._removeTitleAttribute.bind(this))};u.prototype._unbindMouseEnterLeaveHandler=function(){this.$().off("mouseenter.tooltip");this.$().off("mouseleave.tooltip")};u._truncateValue=function(t,e){var i=t.replace(String.fromCharCode(8206),"").replace(String.fromCharCode(8207),"");var a=i.replace(/[+-., \d]*(.*)$/g,"$1").trim().replace(/\.$/,"");t=i.replace(/([+-., \d]*).*$/g,"$1").trim();var r=t[e-1]==="."||t[e-1]===",";if(t.length>=e&&r){return t.substring(0,e-1)+a}else{return t.substring(0,e)+a}};u.prototype._hasData=function(){return this.getItems().length>0};u.prototype.firePress=function(){if(this._hasData()){e.prototype.fireEvent.call(this,"press",arguments)}};r.extendMicroChart(u);return u});
/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/HarveyBallMicroChartItem", ["./library","sap/ui/core/Element","sap/suite/ui/microchart/MicroChartUtils"],function(t,r,e){"use strict";const i=t.MicroChartColorType;var a=r.extend("sap.suite.ui.microchart.HarveyBallMicroChartItem",{metadata:{library:"sap.suite.ui.microchart",properties:{color:{group:"Misc",type:"string",defaultValue:i.Neutral},fraction:{group:"Misc",type:"float",defaultValue:0},fractionLabel:{group:"Misc",type:"string"},fractionScale:{group:"Misc",type:"string"},formattedLabel:{group:"Misc",type:"boolean",defaultValue:false}}}});a.prototype.init=function(){this.setAggregation("tooltip","((AltText))",true)};e.extendMicroChartSetColor(a);return a});
/*!
* SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
*/
sap.ui.predefine("sap/suite/ui/microchart/HarveyBallMicroChartRenderer", ["sap/m/library","./library","sap/base/security/encodeXML","sap/suite/ui/microchart/MicroChartRenderUtils","sap/ui/core/theming/Parameters"],function(e,t,a,r,i){"use strict";var s=e.ValueCSSColor;const n=t.MicroChartColorType;var l;var o={apiVersion:2};o._iReferenceControlSize=72;o._iReferenceControlCenter=o._iReferenceControlSize/2;o.render=function(e,t){l=l||sap.ui.require("sap/suite/ui/microchart/HarveyBallMicroChart");if(!t._hasData()){this._renderNoData(e,t);return}if(!t._bThemeApplied){return}this._calculatePath(t);var r=t.getColorPalette();var o="";var c="";var h="";var p=false;var u=0;var g="";var d=function(e){if(n.hasOwnProperty(e)){g="sapSuiteHBMCSemanticColor"+a(e)}else{return s.isValid(e)&&i.get(e)||e}return null};var S=r.length>0?d(r[0]):null;var v=this._oPath.center-1;if(t.getItems().length){var C=t.getItems()[0];u=C.getFraction();c=C.getFractionLabel()?C.getFractionLabel():c+C.getFraction();h=C.getFractionScale()?C.getFractionScale().substring(0,3):h;p=C.getFormattedLabel();if(!S&&!g){S=d(C.getColor())}}if(p){var f=t._parseFormattedValue(c);h=f.scale.substring(0,3);c=f.value}var _=t.getTotal();var M=t.getTotalLabel()?t.getTotalLabel():""+t.getTotal();if(t.getTotalScale()){o=t.getTotalScale().substring(0,3)}if(t.getFormattedLabel()){var b=t._parseFormattedValue(M);o=b.scale.substring(0,3);M=b.value}if(c){c=l._truncateValue(c,l.VALUE_TRUNCATION_DIGITS)}if(M){M=l._truncateValue(M,l.VALUE_TRUNCATION_DIGITS)}e.openStart("div",t);this._writeMainProperties(e,t);e.openEnd();e.openStart("div");e.class("sapSuiteHBMCAlign"+t.getAlignContent());e.class("sapSuiteHBMCVerticalAlignmentContainer");e.openEnd();e.openStart("div");e.class("sapSuiteHBMCChart");e.openEnd();e.openStart("svg",t.getId()+"-harvey-ball");e.class("sapSuiteHBMCChartSvg");e.attr("viewBox","0 0 72 72");e.attr("focusable",false);e.openEnd();e.openStart("g").openEnd();e.openStart("circle");e.attr("cx",this._oPath.center);e.attr("cy",this._oPath.center);e.attr("r",v);e.class("sapSuiteHBMCBackgroundCircle");e.openEnd();e.close("circle");if(u&&u>=_){e.openStart("circle");e.attr("cx",this._oPath.center);e.attr("cy",this._oPath.center);e.attr("r",v-this._oPath.border);e.class("sapSuiteHBMCSegment");if(S){e.style("fill",S)}else{e.class(g)}e.openEnd();e.close("circle")}else if(u>0){e.openStart("path",t.getId()+"-segment");e.class("sapSuiteHBMCSegment");if(S){e.style("fill",S)}else{e.class(g)}e.attr("d",this._serializePieChart());e.openEnd();e.close("path")}e.close("g");e.close("svg");e.close("div");e.openStart("div");e.class("sapSuiteHBMCTextContainer");e.openEnd();if(t.getShowFractions()){e.openStart("div");e.class("sapSuiteHBMCValueContainer");e.openEnd();this.renderLabel(e,t,[g,"sapSuiteHBMCValue"],c,S,"-fraction");this.renderLabel(e,t,[g,"sapSuiteHBMCValueScale"],h,S,"-fraction-scale");e.close("div")}if(t.getShowTotal()){e.openStart("div");e.class("sapSuiteHBMCTotalContainer");e.openEnd();this.renderLabel(e,t,[g,"sapSuiteHBMCTotal"],M,S,"-total");this.renderLabel(e,t,[g,"sapSuiteHBMCTotalScale"],o,S,"-total-scale");e.close("div")}e.close("div");e.close("div");e.close("div")};o._writeMainProperties=function(e,t){var a=t.hasListeners("press");this._renderActiveProperties(e,t);var r=t.getTooltip_AsString(a);e.attr("role","figure");if(t.getAriaLabelledBy().length){e.accessibilityState(t)}else{e.attr("aria-label",r)}e.class("sapSuiteHBMC");e.class("sapSuiteHBMCSize"+t.getSize());e.style("width",t.getWidth());e.style("height",t.getHeight())};o.renderLabel=function(e,t,a,r,i,s){var n=!(a.indexOf("sapSuiteHBMCTotal")>-1||a.indexOf("sapSuiteHBMCTotalScale")>-1);e.openStart("span",t.getId()+s);for(var l=0;l<a.length;l++){if(!(l===0&&i&&n)){e.class(a[l])}}e.openEnd();if(r){e.text(r)}e.close("span")};o._calculatePath=function(e){var t=e.getTotal();var a=0;if(e.getItems().length){a=e.getItems()[0].getFraction()}var r=o._iReferenceControlCenter;var i=5;this._oPath={initial:{x:r,y:r},lineTo:{x:r,y:i},arc:{x1:r-i,y1:r-i,largeArc:0,x2:"",y2:""},size:o._iReferenceControlSize,border:i,center:r};var s=a/t*360;var n=Math.PI/180;var l=this._oPath.center-this._oPath.border;var c=l*Math.cos((s-90)*n)+this._oPath.center;var h=this._oPath.size-(l*Math.sin((s+90)*n)+this._oPath.center);this._oPath.arc.x2=c.toFixed(2);this._oPath.arc.y2=h.toFixed(2);var p=t/a<2?1:0;this._oPath.arc.largeArc=p};o._serializePieChart=function(){var e=this._oPath;return["M",e.initial.x,",",e.initial.y," L",e.initial.x,",",e.lineTo.y," A",e.arc.x1,",",e.arc.y1," 0 ",e.arc.largeArc,",1 ",e.arc.x2,",",e.arc.y2," L",e.initial.x,",",e.initial.y," z"].join("")};r.extendMicroChartRenderer(o);return o},true);
/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/MicroChartRenderUtils", ["sap/ui/core/Lib"],function(e){"use strict";var t={apiVersion:2,extendMicroChartRenderer:function(t){t._renderNoData=function(t,i){if(!i.getHideOnNoData()){t.openStart("div",i);this._writeMainProperties(t,i);t.openEnd();t.openStart("div");t.class("sapSuiteUiMicroChartNoData");t.openEnd();t.openStart("div");t.class("sapSuiteUiMicroChartNoDataTextWrapper");t.openEnd();var r=e.getResourceBundleFor("sap.suite.ui.microchart");var a=r.getText("NO_DATA");t.openStart("span").openEnd();t.text(a);t.close("span");t.close("div");t.close("div");t.close("div")}};t._renderActiveProperties=function(e,t){var i=t.hasListeners("press");if(i){if(t._hasData()){e.class("sapSuiteUiMicroChartPointer")}e.attr("tabindex","0")}}}};return t},true);
/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/MicroChartUtils", ["sap/ui/core/Control","sap/m/library","sap/ui/core/Theming","sap/ui/thirdparty/jquery","sap/ui/core/Lib","./library"],function(t,e,r,jQuery,o,i){"use strict";var n=o.getResourceBundleFor("sap.suite.ui.microchart");var u=e.Size;const s=i.MicroChartColorType;const a=e.ValueCSSColor;var l={extendMicroChart:function(o){o.prototype._isResponsive=function(){return this.getSize()===u.Responsive};o.prototype._digitsAfterDecimalPoint=function(t){var e=(""+t).match(/[.,](\d+)/g);return e?(""+e).length-1:0};o.prototype.getAccessibilityInfo=function(){return{type:n.getText("ACC_CTR_TYPE_MICROCHART"),description:this.getTooltip_AsString()}};o.prototype._isThemeHighContrast=function(){return/(hcw|hcb)/g.test(r.getTheme())};o.prototype.convertRemToPixels=function(t){return t*parseFloat(window.getComputedStyle(document.documentElement).fontSize)};o.prototype._isAnyLabelTruncated=function(t){return t.toArray().some(this._isLabelTruncated)};o.prototype._isAnyLabelVerticallyTruncated=function(t){return t.toArray().some(this._isLabelVerticallyTruncated)};o.prototype._isLabelTruncated=function(t){return t.scrollWidth>t.offsetWidth};o.prototype._isLabelVerticallyTruncated=function(t){return Math.abs(t.scrollHeight-t.offsetHeight)>1};o.prototype._isAnyLabelNumericAndTruncated=function(t){return t.toArray().some(this._isLabelNumericAndTruncated.bind(this))};o.prototype._isLabelNumericAndTruncated=function(t){return!Number.isFinite(Number(t.textContent))?false:this._isLabelTruncated(t)};o.prototype.isColorCorrect=function(t){if(s.hasOwnProperty(t)&&t!==""){return true}if(e.ValueCSSColor.isValid(t)&&t!==""){return true}if(e.ValueCSSColor.isValid(t.below)&&t.below!==""&&e.ValueCSSColor.isValid(t.above)&&t.above!==""){return true}if(s.hasOwnProperty(t.below)&&t.below!==""&&s.hasOwnProperty(t.above)&&t.above!==""){return true}else{return false}};o.prototype.getTooltip_AsString=function(e){var r=t.prototype.getTooltip_AsString.apply(this,arguments),o=this._getAltHeaderText(e),i=false;if(r){r=r.split("((AltText))").join(o)}if(!r){r="";i=true}if(this._getAltSubText){r+=this._getAltSubText(i)}return r}},extendMicroChartSetColor:function(t){t.prototype.setColor=function(t,e){var r=false;if(s.hasOwnProperty(t)){r=true}else{r=a.isValid(t)}if(t!=null&&!r){throw new Error(`Value ${t} is not valid for property "color"`)}return this.setProperty("color",r?t:null,e)}}};return l},true);
/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/suite/ui/microchart/library", ["sap/ui/base/DataType","sap/ui/core/IntervalTrigger","sap/ui/core/Lib","sap/ui/core/library","sap/m/library"],function(i,e,a){"use strict";var r=a.init({name:"sap.suite.ui.microchart",apiVersion:2,version:"1.141.1",dependencies:["sap.ui.core","sap.m"],types:["sap.suite.ui.microchart.AreaMicroChartViewType","sap.suite.ui.microchart.BulletMicroChartModeType","sap.suite.ui.microchart.CommonBackgroundType","sap.suite.ui.microchart.ComparisonMicroChartViewType","sap.suite.ui.microchart.DeltaMicroChartViewType","sap.suite.ui.microchart.HorizontalAlignmentType","sap.suite.ui.microchart.LoadStateType","sap.suite.ui.microchart.LineType","sap.suite.ui.microchart.MicroChartColorType"],interfaces:[],controls:["sap.suite.ui.microchart.AreaMicroChart","sap.suite.ui.microchart.BulletMicroChart","sap.suite.ui.microchart.ColumnMicroChart","sap.suite.ui.microchart.ComparisonMicroChart","sap.suite.ui.microchart.DeltaMicroChart","sap.suite.ui.microchart.HarveyBallMicroChart","sap.suite.ui.microchart.LineMicroChart","sap.suite.ui.microchart.InteractiveBarChart","sap.suite.ui.microchart.InteractiveDonutChart","sap.suite.ui.microchart.InteractiveLineChart","sap.suite.ui.microchart.RadialMicroChart","sap.suite.ui.microchart.StackedBarMicroChart"],elements:["sap.suite.ui.microchart.AreaMicroChartPoint","sap.suite.ui.microchart.AreaMicroChartItem","sap.suite.ui.microchart.AreaMicroChartLabel","sap.suite.ui.microchart.BulletMicroChartData","sap.suite.ui.microchart.ColumnMicroChartData","sap.suite.ui.microchart.ColumnMicroChartLabel","sap.suite.ui.microchart.ComparisonMicroChartData","sap.suite.ui.microchart.HarveyBallMicroChartItem","sap.suite.ui.microchart.LineMicroChartPoint","sap.suite.ui.microchart.LineMicroChartEmphasizedPoint","sap.suite.ui.microchart.LineMicroChartLine","sap.suite.ui.microchart.InteractiveBarChartBar","sap.suite.ui.microchart.InteractiveDonutChartSegment","sap.suite.ui.microchart.InteractiveLineChartPoint","sap.suite.ui.microchart.StackedBarMicroChartBar"]});r.AreaMicroChartViewType={Normal:"Normal",Wide:"Wide"};i.registerEnum("sap.suite.ui.microchart.AreaMicroChartViewType",r.AreaMicroChartViewType);r.BulletMicroChartModeType={Actual:"Actual",Delta:"Delta"};i.registerEnum("sap.suite.ui.microchart.BulletMicroChartModeType",r.BulletMicroChartModeType);r.CommonBackgroundType={Lightest:"Lightest",ExtraLight:"ExtraLight",Light:"Light",MediumLight:"MediumLight",Medium:"Medium",Dark:"Dark",ExtraDark:"ExtraDark",Darkest:"Darkest",Transparent:"Transparent"};i.registerEnum("sap.suite.ui.microchart.CommonBackgroundType",r.CommonBackgroundType);r.LineType={Solid:"Solid",Dashed:"Dashed",Dotted:"Dotted"};i.registerEnum("sap.suite.ui.microchart.LineType",r.LineType);r.HorizontalAlignmentType={Left:"Left",Center:"Center",Right:"Right"};i.registerEnum("sap.suite.ui.microchart.HorizontalAlignmentType",r.HorizontalAlignmentType);r.ComparisonMicroChartViewType={Normal:"Normal",Wide:"Wide",Responsive:"Responsive"};i.registerEnum("sap.suite.ui.microchart.ComparisonMicroChartViewType",r.ComparisonMicroChartViewType);r.DeltaMicroChartViewType={Normal:"Normal",Wide:"Wide",Responsive:"Responsive"};i.registerEnum("sap.suite.ui.microchart.DeltaMicroChartViewType",r.DeltaMicroChartViewType);r.LoadStateType={Loading:"Loading",Loaded:"Loaded",Failed:"Failed",Disabled:"Disabled"};r.MicroChartColorType={Neutral:"Neutral",None:"None",Good:"Good",Critical:"Critical",Error:"Error",Sequence1:"Sequence1",Sequence2:"Sequence2",Sequence3:"Sequence3",Sequence4:"Sequence4",Sequence5:"Sequence5",Sequence6:"Sequence6",Sequence7:"Sequence7",Sequence8:"Sequence8",Sequence9:"Sequence9",Sequence10:"Sequence10",Sequence11:"Sequence11",Sequence12:"Sequence12"};i.registerEnum("sap.suite.ui.microchart.MicroChartColorType",r.MicroChartColorType);r._aStandardMarginClassNames=["sapUiTinyMargin","sapUiSmallMargin","sapUiMediumMargin","sapUiLargeMargin","sapUiTinyMarginBeginEnd","sapUiTinyMarginTopBottom","sapUiSmallMarginBeginEnd","sapUiSmallMarginTopBottom","sapUiMediumMarginBeginEnd","sapUiMediumMarginTopBottom","sapUiLargeMarginBeginEnd","sapUiLargeMarginTopBottom","sapUiTinyMarginTop","sapUiTinyMarginBottom","sapUiTinyMarginBegin","sapUiTinyMarginEnd","sapUiSmallMarginTop","sapUiSmallMarginBottom","sapUiSmallMarginBegin","sapUiSmallMarginEnd","sapUiMediumMarginTop","sapUiMediumMarginBottom","sapUiMediumMarginBegin","sapUiMediumMarginEnd","sapUiLargeMarginTop","sapUiLargeMarginBottom","sapUiLargeMarginBegin","sapUiLargeMarginEnd","sapUiResponsiveMargin","sapUiNoMargin","sapUiNoMarginTop","sapUiNoMarginBottom","sapUiNoMarginBegin","sapUiNoMarginEnd"];r._removeStandardMargins=function(i){for(var e=0;e<r._aStandardMarginClassNames.length;e++){if(i.hasStyleClass(r._aStandardMarginClassNames[e])){i.removeStyleClass(r._aStandardMarginClassNames[e])}}};r._passParentContextToChild=function(i,e){if(i.data("_parentRenderingContext")){e.data("_parentRenderingContext",i.data("_parentRenderingContext"))}else if(typeof i.getParent==="function"){e.data("_parentRenderingContext",i.getParent())}};r._isTooltipSuppressed=function(i){return i!==null&&i!==undefined&&!i.trim()};r._checkControlIsVisible=function(i,a){function r(){return i.getVisible()&&i.getDomRef()&&i.$().is(":visible")&&i.getDomRef().getBoundingClientRect().width!==0}function t(){if(r()){e.removeListener(t);a.call(i)}}var o=i.exit;i.exit=function(){e.removeListener(t);if(o){o.call(i)}};if(r()){a.call(i)}else{e.addListener(t)}};return r});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/analytics/odata4analytics", ["sap/base/security/encodeURL","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/Sorter","sap/ui/model/odata/ODataUtils"],function(e,t,r,i,n){"use strict";var o=o||{},a=/^\d+$/;o.constants={};o.constants["SAP_NAMESPACE"]="http://www.sap.com/Protocols/SAPData";o.constants["VERSION"]="0.7";o.helper={deepEqual:function(e,t,r){var i,n,o=0,a,s;if(!e||e.length!==t.length){return 2}if(e!==t){for(a=0,s=e.length;a<s;a+=1){n=e[a];i=t[a];if(n.grouped!==i.grouped||n.inResult!==i.inResult||n.level!==i.level||n.name!==i.name||n.total!==i.total||n.visible!==i.visible){return 2}if(n.formatter!==i.formatter){o=1;if(r){r(i)}}}}return o},tokenizeNametoLabelText:function(e){var t="";t=e.replace(/^P_(.*)/,"$1");t=t.replace(/([^A-Z0-9_]+)([A-Z0-9_])/g,"$1 $2");t=t.replace(/([A-Z0-9_]{2,})([A-Z0-9_])([^A-Z0-9_]+)/g,"$1 $2$3");t=t.replace(/(.*) _E$/,"$1");t=t.replace(/(.*) _(.*)/g,"$1 $2");return t}};o.Model=function(e,t){this._init(e,t)};o.Model.ReferenceByURI=function(e){return{sServiceURI:e}};o.Model.ReferenceByModel=function(e){return{oModel:e}};o.Model.ReferenceWithWorkaround=function(e,t){return{oModelReference:e,aWorkaroundID:t}};o.Model.prototype={_init:function(e,t){var r,i=this;if(typeof t=="string"){throw"Deprecated second argument: Adjust your invocation by passing an object with a property sAnnotationJSONDoc as a second argument instead"}this._mParameter=t;this._oActivatedWorkarounds={};if(e&&e.aWorkaroundID){for(var n=-1,o;(o=e.aWorkaroundID[++n])!==undefined;){this._oActivatedWorkarounds[o]=true}e=e.oModelReference}if(!e||!e.sServiceURI&&!e.oModel){throw"Usage with oModelReference being an instance of Model.ReferenceByURI or Model.ReferenceByModel"}if(e.oModel){this._oModel=e.oModel;a()}if(e.sServiceURI){if(t&&t.modelVersion===2){r=sap.ui.require("sap/ui/model/odata/v2/ODataModel")||sap.ui.requireSync("sap/ui/model/odata/v2/ODataModel");this._oModel=new r(e.sServiceURI);a()}else{r=sap.ui.require("sap/ui/model/odata/ODataModel")||sap.ui.requireSync("sap/ui/model/odata/ODataModel");this._oModel=new r(e.sServiceURI);a()}}if(this._oModel.getServiceMetadata()&&this._oModel.getServiceMetadata().dataServices==undefined){throw"Model could not be loaded"}function a(){if(!i._oModel.getServiceMetadata()){i._oModel.attachMetadataLoaded(s)}else{s()}}function s(){if(i.bIsInitialized){return}i.bIsInitialized=true;if(t&&t.sAnnotationJSONDoc){i.mergeV2Annotations(t.sAnnotationJSONDoc)}i._interpreteMetadata(i._oModel.getServiceMetadata().dataServices)}},_interpreteMetadata:function(e){this._oQueryResultSet={};this._oParameterizationSet={};this._oEntityTypeSet={};this._oEntitySetSet={};this._oEntityTypeNameToEntitySetMap={};var t=this._oModel.getServiceMetadata().dataServices.schema[0];for(var r=-1,i;(i=t.entityContainer[++r])!==undefined;){if(i.isDefaultEntityContainer=="true"){this._oDefaultEntityContainer=i;break}}var n=t.entityType;var a=[],s=[],u=[];for(var l=-1,h;(h=n[++l])!==undefined;){var f=false;if(h.extensions!=undefined){for(var y=-1,p;(p=h.extensions[++y])!==undefined;){if(p.namespace==o.constants.SAP_NAMESPACE&&p.name=="semantics"){f=true;switch(p.value){case"aggregate":a.push(h);break;case"parameters":s.push(h);break;default:u.push(h)}}if(f){continue}}if(!f){u.push(h)}}else{u.push(h)}}for(var d=-1,_;(_=u[++d])!==undefined;){var m=new o.EntityType(this._oModel.getServiceMetadata(),t,_);this._oEntityTypeSet[m.getQName()]=m;var c=this._getEntitySetsOfType(t,m.getQName());if(c.length==0){throw"Invalid consumption model: No entity set for entity type "+m.getQName()+" found"}if(c.length>1){throw"Unsupported consumption model: More than one entity set for entity type "+m.getQName()+" found"}var g=new o.EntitySet(this._oModel.getServiceMetadata(),t,c[0][0],c[0][1],m);this._oEntitySetSet[g.getQName()]=g;this._oEntityTypeNameToEntitySetMap[m.getQName()]=g}var v={};for(var P=-1,S;(S=s[++P])!==undefined;){var E=new o.EntityType(this._oModel.getServiceMetadata(),t,S);this._oEntityTypeSet[E.getQName()]=E;var N=this._getEntitySetsOfType(t,E.getQName());if(N.length==0){throw"Invalid consumption model: No entity set for parameter entity type "+E.getQName()+" found"}if(N.length>1){throw"Unsupported consumption model: More than one entity set for parameter entity type "+E.getQName()+" found"}var b=new o.EntitySet(this._oModel.getServiceMetadata(),t,N[0][0],N[0][1],E);this._oEntitySetSet[b.getQName()]=b;this._oEntityTypeNameToEntitySetMap[E.getQName()]=b;var R=new o.Parameterization(E,b);this._oParameterizationSet[R.getName()]=R;v[E.getQName()]=R;var x=E.getQName();if(t.association!=undefined){for(var T=-1,A;(A=t.association[++T])!==undefined;){if(A.referentialConstraint==undefined){continue}var M=null;if(A.end[0].type==x&&A.end[0].multiplicity=="*"&&A.end[1].multiplicity=="1"){M=A.end[1].type}else if(A.end[1].type==x&&A.end[1].multiplicity=="*"&&A.end[0].multiplicity=="1"){M=A.end[0].type}if(!M){continue}if(A.referentialConstraint.dependent.propertyRef.length!=1){continue}var I=R.findParameterByName(A.referentialConstraint.dependent.propertyRef[0].name);if(I==null){continue}var Q=this._oEntityTypeSet[M];var F=this._oEntityTypeNameToEntitySetMap[M];I.setValueSetEntity(Q,F)}}}for(var D=-1,U;(U=a[++D])!==undefined;){var k=new o.EntityType(this._oModel.getServiceMetadata(),t,U);this._oEntityTypeSet[k.getQName()]=k;var w=k.getQName();var O=null;var V=null;if(t.association!=undefined){for(var L=-1,C;(C=t.association[++L])!==undefined;){var q=null;if(C.end[0].type==w){q=C.end[1].type}else if(C.end[1].type==w){q=C.end[0].type}else{continue}var B=null;B=v[q];if(B!=null){if(O!=null){throw"Unable to handle multiple parameter entity types of query entity "+k.name}else{O=B;V=C}}}}var z=this._getEntitySetsOfType(t,k.getQName());if(z.length!=1){throw"Invalid consumption model: There must be exactly one entity set for an entity type annotated with aggregating semantics"}var $=new o.EntitySet(this._oModel.getServiceMetadata(),t,z[0][0],z[0][1],k);this._oEntitySetSet[$.getQName()]=$;this._oEntityTypeNameToEntitySetMap[k.getQName()]=$;var H=new o.QueryResult(this,k,$,O);this._oQueryResultSet[H.getName()]=H;if(O){O.setTargetQueryResult(H,V)}if(t.association!=undefined){for(var j=-1,K;(K=t.association[++j])!==undefined;){if(K.referentialConstraint==undefined){continue}var W=null;if(K.end[0].type==w&&K.end[0].multiplicity=="*"&&K.end[1].multiplicity=="1"){W=K.end[1].type}else if(K.end[1].type==w&&K.end[1].multiplicity=="*"&&K.end[0].multiplicity=="1"){W=K.end[0].type}if(!W){continue}if(K.referentialConstraint.dependent.propertyRef.length!=1){continue}var Z=H.findDimensionByName(K.referentialConstraint.dependent.propertyRef[0].name);if(Z==null){continue}var J=this._oEntityTypeNameToEntitySetMap[W];Z.setMembersEntitySet(J)}}}},oUI5ODataModelAnnotatableObject:{objectName:"schema",keyPropName:"namespace",extensions:true,aSubObject:[{objectName:"entityType",keyPropName:"name",extensions:true,aSubObject:[{objectName:"property",keyPropName:"name",aSubObject:[],extensions:true}]},{objectName:"entityContainer",keyPropName:"name",extensions:false,aSubObject:[{objectName:"entitySet",keyPropName:"name",extensions:true,aSubObject:[]}]}]},mergeV2Annotations:function(e){var t=null;try{t=JSON.parse(e)}catch(e){return}var r;try{r=this._oModel.getServiceMetadata().dataServices}catch(e){return}for(var i in t){if(!(this.oUI5ODataModelAnnotatableObject.objectName==i)){continue}if(!(t[i]instanceof Array)){continue}this.mergeV2AnnotationLevel(r[this.oUI5ODataModelAnnotatableObject.objectName],t[this.oUI5ODataModelAnnotatableObject.objectName],this.oUI5ODataModelAnnotatableObject);break}return},mergeV2AnnotationLevel:function(e,t,r){for(var i=-1,n;(n=t[++i])!==undefined;){for(var o=-1,a;(a=e[++o])!==undefined;){if(!(n[r.keyPropName]==a[r.keyPropName])){continue}if(n["extensions"]!=undefined){if(a["extensions"]==undefined){a["extensions"]=[]}for(var s=-1,u;(u=n["extensions"][++s])!==undefined;){var l=false;for(var h=-1,f;(f=a["extensions"][++h])!==undefined;){if(u.name==f.name&&u.namespace==f.namespace){f.value=u.value;l=true;break}}if(!l){a["extensions"].push(u)}}}for(var y=-1,p;(p=r.aSubObject[++y])!==undefined;){for(var d in n){if(!(p.objectName==d)){continue}if(!(n[p.objectName]instanceof Array)){continue}if(a[p.objectName]==undefined||!(a[p.objectName]instanceof Array)){continue}this.mergeV2AnnotationLevel(a[p.objectName],n[p.objectName],p);break}}}}return},findQueryResultByName:function(e){var t=this._oQueryResultSet[e];if(!t&&this._oDefaultEntityContainer){var r=this._oDefaultEntityContainer.name+"."+e;t=this._oQueryResultSet[r]}return t},getAllQueryResultNames:function(){if(this._aQueryResultNames){return this._aQueryResultNames}this._aQueryResultNames=new Array(0);for(var e in this._oQueryResultSet){this._aQueryResultNames.push(this._oQueryResultSet[e].getName())}return this._aQueryResultNames},getAllQueryResults:function(){return this._oQueryResultSet},getODataModel:function(){return this._oModel},_getEntitySetsOfType:function(e,t){var r=[];for(var i=-1,n;(n=e.entityContainer[++i])!==undefined;){for(var o=-1,a;(a=n.entitySet[++o])!==undefined;){if(a.entityType==t){r.push([n,a])}}}return r},_mParameter:null,_oModel:null,_oDefaultEntityContainer:null,_aQueryResultNames:null,_oQueryResultSet:null,_oParameterizationSet:null,_oEntityTypeSet:null,_oEntitySetSet:null,_oEntityTypeNameToEntitySetMap:null,_oActivatedWorkarounds:null};o.QueryResult=function(e,t,r,i){this._init(e,t,r,i)};o.QueryResult.prototype={_init:function(e,t,r,i,n){this._oModel=e;this._oEntityType=t;this._oEntitySet=r;this._oParameterization=i;this._oDimensionSet={};this._oMeasureSet={};var a=t.getTypeDescription().property;var s={};for(var u=-1,l;(l=a[++u])!==undefined;){if(l.extensions==undefined){continue}for(var h=-1,f;(f=l.extensions[++h])!==undefined;){if(!f.namespace==o.constants.SAP_NAMESPACE){continue}switch(f.name){case"aggregation-role":switch(f.value){case"dimension":{var y=new o.Dimension(this,l);this._oDimensionSet[y.getName()]=y;break}case"measure":{var p=new o.Measure(this,l);this._oMeasureSet[p.getName()]=p;break}case"totaled-properties-list":this._oTotaledPropertyListProperty=l;break;default:}break;case"attribute-for":{var d=new o.DimensionAttribute(this,l);var _=d.getKeyProperty();s[_.name]=d;break}default:}}}for(var m in s){var c=s[m];c.getDimension().addAttribute(c)}if(e._oActivatedWorkarounds.IdentifyTextPropertiesByName){var g=[];for(var v in this._oDimensionSet){var P=this._oDimensionSet[v];if(!P.getTextProperty()){var S=null;S=t.findPropertyByName(v+"Name");if(!S){S=t.findPropertyByName(v+"Text")}if(!S){S=t.findPropertyByName(v+"Desc")}if(!S){S=t.findPropertyByName(v+"Description")}if(S){P.setTextProperty(S);g.push(S.name)}}}for(var E=-1,N;(N=g[++E])!==undefined;){delete this._oDimensionSet[N]}}},getName:function(){return this.getEntitySet().getQName()},getParameterization:function(){return this._oParameterization},getAllDimensionNames:function(){if(this._aDimensionNames){return this._aDimensionNames}this._aDimensionNames=[];for(var e in this._oDimensionSet){this._aDimensionNames.push(this._oDimensionSet[e].getName())}return this._aDimensionNames},getAllDimensions:function(){return this._oDimensionSet},getAllMeasureNames:function(){if(this._aMeasureNames){return this._aMeasureNames}this._aMeasureNames=[];for(var e in this._oMeasureSet){this._aMeasureNames.push(this._oMeasureSet[e].getName())}return this._aMeasureNames},getAllMeasures:function(){return this._oMeasureSet},findDimensionByName:function(e){return this._oDimensionSet[e]},findDimensionByPropertyName:function(e){if(this._oDimensionSet[e]){return this._oDimensionSet[e]}for(var t in this._oDimensionSet){var r=this._oDimensionSet[t];var i=r.getTextProperty();if(i&&i.name==e){return r}if(r.findAttributeByName(e)){return r}}return null},getTotaledPropertiesListProperty:function(){return this._oTotaledPropertyListProperty},findMeasureByName:function(e){return this._oMeasureSet[e]},findMeasureByPropertyName:function(e){if(this._oMeasureSet[e]){return this._oMeasureSet[e]}for(var t in this._oMeasureSet){var r=this._oMeasureSet[t];var i=r.getFormattedValueProperty();if(i&&i.name==e){return r}}return null},getModel:function(){return this._oModel},getEntityType:function(){return this._oEntityType},getEntitySet:function(){return this._oEntitySet},_oModel:null,_oEntityType:null,_oEntitySet:null,_oParameterization:null,_aDimensionNames:null,_oDimensionSet:null,_aMeasureNames:null,_oMeasureSet:null,_oTotaledPropertyListProperty:null};o.Parameterization=function(e,t){this._init(e,t)};o.Parameterization.prototype={_init:function(e,t){this._oEntityType=e;this._oEntitySet=t;this._oParameterSet={};var r=e.getTypeDescription().property;for(var i=-1,n;(n=r[++i])!==undefined;){if(n.extensions==undefined){continue}for(var a=-1,s;(s=n.extensions[++a])!==undefined;){if(!s.namespace==o.constants.SAP_NAMESPACE){continue}switch(s.name){case"parameter":{var u=new o.Parameter(this,n);this._oParameterSet[u.getName()]=u;break}default:}}}},setTargetQueryResult:function(e,t){this._oQueryResult=e;var r=this._oEntityType.getSchema().namespace+"."+t.name;var i=this._oEntityType.getTypeDescription().navigationProperty;if(!i){throw"Invalid consumption model: Parameters entity type lacks navigation property for association to query result entity type"}for(var n=-1,o;(o=i[++n])!==undefined;){if(o.relationship==r){this._oNavPropToQueryResult=o.name}}if(!this._oNavPropToQueryResult){throw"Invalid consumption model: Parameters entity type lacks navigation property for association to query result entity type"}},getTargetQueryResult:function(){if(!this._oQueryResult){throw"No target query result set"}return this._oQueryResult},getName:function(){return this.getEntitySet().getQName()},getAllParameterNames:function(){if(this._aParameterNames){return this._aParameterNames}this._aParameterNames=[];for(var e in this._oParameterSet){this._aParameterNames.push(this._oParameterSet[e].getName())}return this._aParameterNames},getAllParameters:function(){return this._oParameterSet},findParameterByName:function(e){return this._oParameterSet[e]},getNavigationPropertyToQueryResult:function(){return this._oNavPropToQueryResult},getEntityType:function(){return this._oEntityType},getEntitySet:function(){return this._oEntitySet},_oEntityType:null,_oEntitySet:null,_oQueryResult:null,_oNavPropToQueryResult:null,_aParameterNames:null,_oParameterSet:null};o.Parameter=function(e,t){this._init(e,t)};o.Parameter.prototype={_init:function(e,t){this._oParameterization=e;this._oProperty=t;var r=e.getEntityType();if(t.extensions!=undefined){for(var i=-1,n;(n=t.extensions[++i])!==undefined;){if(!n.namespace==o.constants.SAP_NAMESPACE){continue}switch(n.name){case"parameter":switch(n.value){case"mandatory":this._bRequired=true;break;case"optional":this._bRequired=false;break;default:throw"Invalid annotation value for parameter property"}break;case"label":this._sLabelText=n.value;break;case"text":this._oTextProperty=r.findPropertyByName(n.value);break;case"upper-boundary":this._bIntervalBoundaryParameter=true;this._oUpperIntervalBoundaryParameterProperty=r.findPropertyByName(n.value);break;case"lower-boundary":this._bIntervalBoundaryParameter=true;this._oLowerIntervalBoundaryParameterProperty=r.findPropertyByName(n.value);break;default:}}}if(!this._sLabelText){this._sLabelText=""}},setValueSetEntity:function(e,t){this._oValueSetEntityType=e;this._oValueSetEntitySet=t},getTextProperty:function(){return this._oTextProperty},getLabelText:function(){if(!this._sLabelText&&this._oParameterization._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=o.helper.tokenizeNametoLabelText(this.getName())}return this._sLabelText},isOptional:function(){return!this._bRequired},isIntervalBoundary:function(){return this._bIntervalBoundaryParameter},isLowerIntervalBoundary:function(){return this._oUpperIntervalBoundaryParameterProperty?true:false},getPeerIntervalBoundaryParameter:function(){var e=null;if(this._oLowerIntervalBoundaryParameterProperty){e=this._oLowerIntervalBoundaryParameterProperty.name}else{e=this._oUpperIntervalBoundaryParameterProperty.name}if(!e){throw"Parameter is not an interval boundary"}return this._oParameterization.findParameterByName(e)},isValueSetAvailable:function(){return this._oValueSetEntityType?true:false},getName:function(){return this._oProperty.name},getProperty:function(){return this._oProperty},getContainingParameterization:function(){return this._oParameterization},getURIToValueEntitySet:function(e){var t=null;t=(e?e:"")+"/"+this._oValueSetEntitySet.getQName();return t},_oParameterization:null,_oProperty:null,_sLabelText:null,_oTextProperty:null,_bRequired:false,_bIntervalBoundaryParameter:false,_oLowerIntervalBoundaryParameterProperty:null,_oUpperIntervalBoundaryParameterProperty:null,_oValueSetEntityType:null,_oValueSetEntitySet:null};o.Dimension=function(e,t){this._init(e,t)};o.Dimension.prototype={_init:function(e,t){this._oQueryResult=e;this._oProperty=t;this._oAttributeSet={}},setMembersEntitySet:function(e){this._oMembersEntitySet=e},getName:function(){return this._oProperty.name},getKeyProperty:function(){return this._oProperty},getTextProperty:function(){if(!this._oTextProperty){this._oTextProperty=this._oQueryResult.getEntityType().getTextPropertyOfProperty(this.getName())}return this._oTextProperty},setTextProperty:function(e){this._oTextProperty=e},getLabelText:function(){if(!this._sLabelText){this._sLabelText=this._oQueryResult.getEntityType().getLabelOfProperty(this.getName())}if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=o.helper.tokenizeNametoLabelText(this.getName())}return this._sLabelText==null?"":this._sLabelText},getSuperOrdinateDimension:function(){if(!this._sSuperOrdinateDimension){var e=this._oQueryResult.getEntityType().getSuperOrdinatePropertyOfProperty(this.getName());if(e){this._sSuperOrdinateDimension=this._oQueryResult.findDimensionByName(e.name)}}return this._sSuperOrdinateDimension},getHierarchy:function(){if(!this._oHierarchy){this._oHierarchy=this._oQueryResult.getEntityType().getHierarchy(this._oProperty.name)}return this._oHierarchy},getAllAttributeNames:function(){if(this._aAttributeNames){return this._aAttributeNames}this._aAttributeNames=[];for(var e in this._oAttributeSet){this._aAttributeNames.push(this._oAttributeSet[e].getName())}return this._aAttributeNames},getAllAttributes:function(){return this._oAttributeSet},findAttributeByName:function(e){return this._oAttributeSet[e]},addAttribute:function(e){this._oAttributeSet[e.getName()]=e},getContainingQueryResult:function(){return this._oQueryResult},hasMasterData:function(){return this._oMembersEntitySet!=null?true:false},getMasterDataEntitySet:function(){return this._oMembersEntitySet},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_sSuperOrdinateDimension:null,_aAttributeNames:null,_oAttributeSet:null,_oMembersEntitySet:null,_oHierarchy:null};o.DimensionAttribute=function(e,t){this._init(e,t)};o.DimensionAttribute.prototype={_init:function(e,t){this._oQueryResult=e;this._oProperty=t;if(t.extensions!=undefined){for(var r=-1,i;(i=t.extensions[++r])!==undefined;){if(!i.namespace==o.constants.SAP_NAMESPACE){continue}switch(i.name){case"attribute-for":this._sDimensionName=i.value;break;case"label":this._sLabelText=i.value;break;case"text":this._oTextProperty=e.getEntityType().findPropertyByName(i.value);break;default:}}}},getName:function(){return this._oProperty.name},getKeyProperty:function(){return this._oProperty},getTextProperty:function(){return this._oTextProperty},getLabelText:function(){if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=o.helper.tokenizeNametoLabelText(this.getName())}return this._sLabelText},getDimension:function(){return this._oQueryResult.findDimensionByName(this._sDimensionName)},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_sDimensionName:null};o.Measure=function(e,t){this._init(e,t)};o.Measure.prototype={_init:function(e,t){this._oQueryResult=e;this._oProperty=t;if(t.extensions!=undefined){for(var r=-1,i;(i=t.extensions[++r])!==undefined;){if(!i.namespace==o.constants.SAP_NAMESPACE){continue}switch(i.name){case"label":this._sLabelText=i.value;break;case"text":this._oTextProperty=e.getEntityType().findPropertyByName(i.value);break;case"unit":this._oUnitProperty=e.getEntityType().findPropertyByName(i.value);break;default:}}}if(!this._sLabelText){this._sLabelText=""}},getName:function(){return this._oProperty.name},getRawValueProperty:function(){return this._oProperty},getFormattedValueProperty:function(){return this._oTextProperty},getUnitProperty:function(){return this._oUnitProperty},getLabelText:function(){if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=o.helper.tokenizeNametoLabelText(this.getName())}return this._sLabelText},isUpdatable:function(){if(this._bIsUpdatable!=null){return this._bIsUpdatable}var e=this._oQueryResult.getEntitySet().getUpdatablePropertyNameSet();return e[this.getName()]!=undefined},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_oUnitProperty:null,_bIsUpdatable:null};o.EntitySet=function(e,t,r,i,n){this._init(e,t,r,i,n)};o.EntitySet.prototype={_init:function(e,t,r,i,n){this._oEntityType=n;this._oEntitySet=i;this._oContainer=r;this._oSchema=t;this._oModel=e;if(t.entityContainer.length>1){this._sQName=r.name+"."+i.name}else{this._sQName=i.name}},getQName:function(){return this._sQName},getSetDescription:function(){return this._oEntitySet},getEntityType:function(){return this._oEntityType},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},getUpdatablePropertyNameSet:function(){if(this._oUpdatablePropertyNames){return this._oUpdatablePropertyNames}this._oUpdatablePropertyNames={};var e=true;if(this._oEntitySet.extensions!=undefined){for(var t=-1,r;(r=this._oEntitySet.extensions[++t])!==undefined;){if(r.namespace==o.constants.SAP_NAMESPACE&&r.name=="updatable"){if(r.value=="false"){e=false;break}}}}if(!e){return this._oUpdatablePropertyNames}var i=this._oEntityType.getTypeDescription().property;for(var n=-1,a;(a=i[++n])!==undefined;){var s=true;if(a.extensions==undefined){continue}for(var u=-1,l;(l=a.extensions[++u])!==undefined;){if(l.namespace!=o.constants.SAP_NAMESPACE){continue}if(l.name=="updatable"){if(l.value=="false"){s=false;break}}}if(s){this._oUpdatablePropertyNames[a.name]=true}}return this._oUpdatablePropertyNames},_oEntityType:null,_oEntitySet:null,_oContainer:null,_oSchema:null,_oModel:null,_sQName:null,_oUpdatablePropertyNames:null};o.EntityType=function(e,t,r){this._init(e,t,r)};o.EntityType.propertyFilterRestriction={SINGLE_VALUE:"single-value",MULTI_VALUE:"multi-value",INTERVAL:"interval"};o.EntityType.prototype={_init:function(e,t,r){this._oEntityType=r;this._oSchema=t;this._oModel=e;this._aKeyProperties=[];this._oPropertySet={};this._aFilterablePropertyNames=[];this._aSortablePropertyNames=[];this._aRequiredFilterPropertyNames=[];this._oPropertyFilterRestrictionSet={};this._oPropertyHeadingsSet={};this._oPropertyQuickInfosSet={};this._sQName=t.namespace+"."+r.name;var i={};function n(e){var t=i[e];if(!t){t=i[e]={}}return t}for(var a=-1,s;(s=r.key.propertyRef[++a])!==undefined;){this._aKeyProperties.push(s.name)}for(var u=-1,l;(l=r.property[++u])!==undefined;){this._oPropertySet[l.name]=l;this._aFilterablePropertyNames.push(l.name);this._aSortablePropertyNames.push(l.name);if(l.extensions==undefined){continue}for(var h=-1,f;(f=l.extensions[++h])!==undefined;){if(f.namespace!==o.constants.SAP_NAMESPACE){continue}switch(f.name){case"filterable":if(f.value=="false"){this._aFilterablePropertyNames.pop(l.name)}break;case"sortable":if(f.value=="false"){this._aSortablePropertyNames.pop(l.name)}break;case"required-in-filter":if(f.value=="true"){this._aRequiredFilterPropertyNames.push(l.name)}break;case"filter-restriction":if(f.value==o.EntityType.propertyFilterRestriction.SINGLE_VALUE||f.value==o.EntityType.propertyFilterRestriction.MULTI_VALUE||f.value==o.EntityType.propertyFilterRestriction.INTERVAL){this._oPropertyFilterRestrictionSet[l.name]=f.value}break;case"hierarchy-node-external-key-for":n(f.value).externalKeyProperty=l;break;case"hierarchy-node-for":n(l.name).dimensionName=f.value;break;case"hierarchy-parent-node-for":case"hierarchy-parent-nod":n(f.value).parentNodeIDProperty=l;break;case"hierarchy-level-for":n(f.value).levelProperty=l;break;case"hierarchy-drill-state-for":case"hierarchy-drill-stat":n(f.value).drillStateProperty=l;break;default:}}}this._oRecursiveHierarchySet={};for(var y in i){var p=i[y];var d=this._oPropertySet[y];var _=this._oPropertySet[p.dimensionName];if(_==null){_=d}this._oRecursiveHierarchySet[_.name]=new o.RecursiveHierarchy(r,d,p.parentNodeIDProperty,p.levelProperty,_,p.externalKeyProperty)}},getProperties:function(){return this._oPropertySet},findPropertyByName:function(e){return this._oPropertySet[e]},getKeyProperties:function(){return this._aKeyProperties},getLabelOfProperty:function(e){var t=this._oPropertySet[e];if(t==null){throw"no such property with name "+e}if(t.extensions!=undefined){for(var r=-1,i;(i=t.extensions[++r])!==undefined;){if(!i.namespace==o.constants.SAP_NAMESPACE){continue}if(i.name=="label"){return i.value}}}return null},getHeadingOfProperty:function(e){var t=this._oPropertySet[e];if(t==null){throw"no such property with name "+e}var r=null;if(t.extensions!=undefined){for(var i=-1,n;(n=t.extensions[++i])!==undefined;){if(!n.namespace==o.constants.SAP_NAMESPACE){continue}if(n.name=="heading"){return n.value}if(n.name=="label"){r=n.value}}}return r},getQuickInfoOfProperty:function(e){var t=this._oPropertySet[e];if(t==null){throw"no such property with name "+e}var r=null;if(t.extensions!=undefined){for(var i=-1,n;(n=t.extensions[++i])!==undefined;){if(!n.namespace==o.constants.SAP_NAMESPACE){continue}if(n.name=="quickinfo"){return n.value}if(n.name=="label"){r=n.value}}}return r},getTextPropertyOfProperty:function(e){var t=this._oPropertySet[e];if(t==null){throw"no such property with name "+e}if(t.extensions!=undefined){for(var r=-1,i;(i=t.extensions[++r])!==undefined;){if(i.name=="text"){return this.findPropertyByName(i.value)}}}return null},getSuperOrdinatePropertyOfProperty:function(e){var t=this._oPropertySet[e];if(t==null){throw"no such property with name "+e}if(t.extensions!=undefined){for(var r=-1,i;(i=t.extensions[++r])!==undefined;){if(i.name=="super-ordinate"){return this.findPropertyByName(i.value)}}}return null},getFilterablePropertyNames:function(){return this._aFilterablePropertyNames},getSortablePropertyNames:function(){return this._aSortablePropertyNames},getRequiredFilterPropertyNames:function(){return this._aRequiredFilterPropertyNames},getPropertiesWithFilterRestrictions:function(){return this._oPropertyFilterRestrictionSet},getAllHierarchyPropertyNames:function(){if(this._aHierarchyPropertyNames){return this._aHierarchyPropertyNames}this._aHierarchyPropertyNames=[];for(var e in this._oRecursiveHierarchySet){this._aHierarchyPropertyNames.push(this._oRecursiveHierarchySet[e].getNodeValueProperty().name)}return this._aHierarchyPropertyNames},getHierarchy:function(e){if(this._oRecursiveHierarchySet[e]==undefined){return null}return this._oRecursiveHierarchySet[e]},getQName:function(){return this._sQName},getTypeDescription:function(){return this._oEntityType},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntityType:null,_oSchema:null,_oModel:null,_sQName:null,_aKeyProperties:null,_oPropertySet:null,_aFilterablePropertyNames:null,_aRequiredFilterPropertyNames:null,_oPropertyFilterRestrictionSet:null,_aHierarchyPropertyNames:null,_oRecursiveHierarchySet:null};o.RecursiveHierarchy=function(e,t,r,i,n,o){this._init(e,t,r,i,n,o)};o.RecursiveHierarchy.prototype={_init:function(e,t,r,i,n,o){this._oEntityType=e;this._oNodeIDProperty=t;this._oParentNodeIDProperty=r;this._oNodeLevelProperty=i;this._oNodeValueProperty=n;this._oNodeExternalKeyProperty=o},isRecursiveHierarchy:function(){return true},isLeveledHierarchy:function(){return false},getNodeExternalKeyProperty:function(){return this._oNodeExternalKeyProperty},getNodeIDProperty:function(){return this._oNodeIDProperty},getParentNodeIDProperty:function(){return this._oParentNodeIDProperty},getNodeLevelProperty:function(){return this._oNodeLevelProperty},getNodeValueProperty:function(){return this._oNodeValueProperty},_oEntityType:null,_oNodeIDProperty:null,_oParentNodeIDProperty:null,_oNodeLevelProperty:null,_oNodeValueProperty:null,_oNodeExternalKeyProperty:null};o.FilterExpression=function(e,t,r){this._init(e,t,r)};o.FilterExpression.prototype={_init:function(e,t,r){this._oEntityType=r;this._oSchema=t;this._oModel=e;this._aConditionUI5Filter=[];this._aUI5FilterArray=[]},_renderPropertyFilterValue:function(t,r,i){if(r==="Edm.Time"&&a.test(t)){t={ms:parseInt(t),__edmType:"Edm.Time"}}return e(n._formatValue(t,r,true,i))},clear:function(){this._aConditionUI5Filter=[];this._aUI5FilterArray=[]},_addCondition:function(e){const{sPath:t,sOperator:r,oValue1:i,oValue2:n,sFractionalSeconds1:o,sFractionalSeconds2:a}=e;const s=this._aConditionUI5Filter.some(e=>e.sPath===t&&e.sOperator===r&&e.oValue1==i&&e.oValue2==n&&e.sFractionalSeconds1===o&&e.sFractionalSeconds2===a);if(!s){this._aConditionUI5Filter.push(e)}},_addUI5FilterArray:function(e){this._aUI5FilterArray.push(e)},addCondition:function(e,r,i,n){let o=e;let a;if(typeof e==="object"){o=e.sPath;a=e}var s=this._oEntityType.findPropertyByName(o);if(s==null){throw"Cannot add filter condition for unknown property name "+o}var u=this._oEntityType.getFilterablePropertyNames();if((u?Array.prototype.indexOf.call(u,o):-1)===-1){throw"Cannot add filter condition for not filterable property name "+o}this._addCondition(a||new t(o,r,i,n));return this},removeConditions:function(e){var t=this._oEntityType.findPropertyByName(e);if(t==null){throw"Cannot remove filter conditions for unknown property name "+e}for(var r=0;r<this._aConditionUI5Filter.length;r++){var i=this._aConditionUI5Filter[r];if(i.sPath==e){this._aConditionUI5Filter.splice(r--,1)}}return this},addSetCondition:function(e,i){var n=this._oEntityType.findPropertyByName(e);if(n==null){throw"Cannot add filter condition for unknown property name "+e}var o=this._oEntityType.getFilterablePropertyNames();if((o?Array.prototype.indexOf.call(o,e):-1)===-1){throw"Cannot add filter condition for not filterable property name "+e}for(var a=-1,s;(s=i[++a])!==undefined;){this._addCondition(new t(e,r.EQ,s))}return this},addUI5FilterConditions:function(e){if(!Array.isArray(e)){throw"Argument is not an array"}if(e.length==0){return this}var t=false;for(var r=0;r<e.length;r++){if(e[r].aFilters!=undefined){t=true;break}}if(t){this._addUI5FilterArray(e)}else{for(var i=0;i<e.length;i++){this.addCondition(e[i])}}return this},getExpressionAsUI5FilterArray:function(){var e=this._aConditionUI5Filter.concat([]);for(var t=-1,r;(r=this._aUI5FilterArray[++t])!==undefined;){for(var i=-1,n;(n=r[++i])!==undefined;){e.push(n)}}return e},getPropertiesReferencedByUI5FilterArray:function(e,t){for(var r=-1,i;(i=e[++r])!==undefined;){if(i.aFilters!=undefined){this.getPropertiesReferencedByUI5FilterArray(i.aFilters,t)}else{if(t[i.sPath]==undefined){t[i.sPath]=[]}t[i.sPath].push(i)}}},getReferencedProperties:function(){var e={};for(var t=-1,r;(r=this._aConditionUI5Filter[++t])!==undefined;){if(e[r.sPath]==undefined){e[r.sPath]=[]}e[r.sPath].push(r)}for(var i=-1,n;(n=this._aUI5FilterArray[++i])!==undefined;){this.getPropertiesReferencedByUI5FilterArray(n,e)}return e},renderUI5Filter:function(e){const{sPath:t,sOperator:i,oValue1:n,oValue2:o,sFractionalSeconds1:a,sFractionalSeconds2:s}=e;let u=null;const l=this._oEntityType.findPropertyByName(t);if(l==null){throw"Cannot add filter condition for unknown property name "+t}switch(i){case r.BT:u="("+t+" ge "+this._renderPropertyFilterValue(n,l.type,a)+" and "+t+" le "+this._renderPropertyFilterValue(o,l.type,s)+")";break;case r.NB:u="("+t+" lt "+this._renderPropertyFilterValue(n,l.type,a)+" or "+t+" gt "+this._renderPropertyFilterValue(o,l.type,s)+")";break;case r.Contains:case r.NotContains:u=(i[0]==="N"?"not ":"")+"substringof("+this._renderPropertyFilterValue(n,"Edm.String")+","+t+")";break;case r.StartsWith:case r.EndsWith:case r.NotStartsWith:case r.NotEndsWith:u=i.toLowerCase().replace("not","not ")+"("+t+","+this._renderPropertyFilterValue(n,"Edm.String")+")";break;default:u=t+" "+i.toLowerCase()+" "+this._renderPropertyFilterValue(n,l.type,a)}return u},renderUI5MultiFilter:function(e){var t=[];var r="";var i=e.bAnd==true?" and ":" or ";for(var n=-1,o;(o=e.aFilters[++n])!==undefined;){if(o.aFilters!=undefined){t.push(o);continue}r+=(r==""?"":i)+"("+this.renderUI5Filter(o)+")"}if(t.length>0){for(var a=-1,s;(s=t[++a])!==undefined;){r+=(r==""?"":i)+"("+this.renderUI5MultiFilter(s)+")"}}return r},renderUI5FilterArray:function(e){if(e.length==0){return""}var t="";e.sort(function(e,t){const r=e.sPath||"";const i=t.sPath||"";if(r===i){return 0}return r>i?1:-1});var i=e[0].sPath;var n="";var o=[],a=[];for(var s=-1,u;(u=e[++s])!==undefined;){if(u.aFilters!=undefined){a.push(u);continue}if(i!=u.sPath){if(n!=""){t+=(t==""?"":" and ")+"("+n+")"}n="";if(o.length>0){for(var l=-1,h;(h=o[++l])!==undefined;){n+=(n==""?"":" and ")+this.renderUI5Filter(h)}t+=(t==""?"":" and ")+"("+n+")";n=""}i=u.sPath;o=[]}if(u.sOperator==r.NE){o.push(u);continue}n+=(n==""?"":" or ")+this.renderUI5Filter(u)}if(n!=""){t+=(t==""?"":" and ")+"("+n+")"}if(o.length>0){n="";for(var f=-1,y;(y=o[++f])!==undefined;){n+=(n==""?"":" and ")+this.renderUI5Filter(y)}t+=(t==""?"":" and ")+"("+n+")"}if(a.length>0){for(var p=-1,d;(d=a[++p])!==undefined;){t+=(t==""?"":" and ")+"("+this.renderUI5MultiFilter(d)+")"}}return t},getURIFilterOptionValue:function(){var e=this.renderUI5FilterArray(this._aConditionUI5Filter);for(var t=-1,r;(r=this._aUI5FilterArray[++t])!==undefined;){e+=(e==""?"":" and ")+"("+this.renderUI5FilterArray(r)+")"}return e},checkValidity:function(){var e=this._oEntityType.getRequiredFilterPropertyNames();var t=this.getReferencedProperties();for(var i=-1,n;(n=e[++i])!==undefined;){if(t[n]==undefined){throw"filter expression does not contain required property "+n}}var a=this._oEntityType.getPropertiesWithFilterRestrictions();for(var s in a){var u=a[s];if(u==o.EntityType.propertyFilterRestriction.SINGLE_VALUE){if(t[s]!=undefined){if(t[s].length>1){var l=t[s][0].oValue1;for(var h=0;h<t[s].length;h++){if(t[s][h].oValue1!=l||t[s][h].sOperator!=r.EQ){throw"filter expression may use "+s+" only with a single EQ condition"}}}}}}return true},getEntityType:function(){return this._oEntityType},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntityType:null,_oSchema:null,_oModel:null,_aFilterCondition:null};o.SortOrder={Ascending:"asc",Descending:"desc"};o.SortExpression=function(e,t,r){this._init(e,t,r)};o.SortExpression.prototype={_init:function(e,t,r){this._oEntityType=r;this._oSchema=t;this._oModel=e;this._aSortCondition=[]},_containsSorter:function(e){var t=null;for(var r=-1,i;(i=this._aSortCondition[++r])!==undefined;){if(i.property.name===e){t={sorter:i,index:r};break}}return t},_removeFromArray:function(e,t,r){var i=e.slice((r||t)+1||e.length);e.length=t<0?e.length+t:t;return e.push.apply(e,i)},clear:function(){this._aSortCondition=[]},addSorter:function(e,t,r){var i=this._oEntityType.findPropertyByName(e);if(i==null){throw"Cannot add sort condition for unknown property name "+e}var n=this._containsSorter(e);if(n!=null){if(!r){n.sorter.order=t}return this}var o=this._oEntityType.getSortablePropertyNames();if((o?Array.prototype.indexOf.call(o,e):-1)===-1){throw"Cannot add sort condition for not sortable property name "+e}this._aSortCondition.push({property:i,order:t});return this},removeSorter:function(e){if(!e){return}var t=this._containsSorter(e);if(t){this._removeFromArray(this._aSortCondition,t.index)}},getExpressionsAsUI5SorterArray:function(){var e=[];for(var t=-1,r;(r=this._aSortCondition[++t])!==undefined;){e.push(new i(r.property.name,r.order==o.SortOrder.Descending))}return e},getExpressionAsUI5Sorter:function(){var e=this.getExpressionsAsUI5SorterArray();if(e.length==0){return null}else{return e[0]}},getURIOrderByOptionValue:function(e){if(this._aSortCondition.length==0){return""}var t="";for(var r=-1,i;(i=this._aSortCondition[++r])!==undefined;){if(!e[i.property.name]){continue}t+=(t==""?"":",")+i.property.name+" "+i.order}return t},getEntityType:function(){return this._oEntityType},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntityType:null,_oSchema:null,_oModel:null,_aSortCondition:null};o.ParameterizationRequest=function(e){this._init(e)};o.ParameterizationRequest.prototype={_init:function(e){if(!e){throw"No parameterization given"}this._oParameterization=e;this._oParameterValueAssignment=[]},_renderParameterKeyValue:function(t,r){return e(this._oParameterization.getTargetQueryResult().getModel().getODataModel().formatValue(t,r))},getParameterization:function(){return this._oParameterization},setParameterValue:function(e,t,r){var i=this._oParameterization.findParameterByName(e);if(!i){throw"Invalid parameter name "+e}if(r!=null){if(!i.isIntervalBoundary()){throw"Range value cannot be applied to parameter "+e+" accepting only single values"}if(!i.isLowerIntervalBoundary()){throw"Range value given, but parameter "+e+" does not hold the lower boundary"}}if(!i.isIntervalBoundary()){if(t==null){delete this._oParameterValueAssignment[e]}else{this._oParameterValueAssignment[e]=t}}else{if(t==null&&r!=null){throw"Parameter "+e+": An upper boundary cannot be given without the lower boundary"}if(t==null){delete this._oParameterValueAssignment[e];r=null}else{this._oParameterValueAssignment[e]=t}var n=i.getPeerIntervalBoundaryParameter();if(r==null){r=t}if(t==null){delete this._oParameterValueAssignment[n.getName()]}else{this._oParameterValueAssignment[n.getName()]=r}}return},getURIToParameterizationEntitySet:function(e){return(e?e:"")+"/"+this._oParameterization.getEntitySet().getQName()},getURIToParameterizationEntry:function(e){var t=this._oParameterization.getAllParameters();for(var r in t){if(this._oParameterValueAssignment[r]==undefined){throw"Parameter "+r+" has no value assigned"}}var i="",n=true;for(var o in this._oParameterValueAssignment){i+=(n?"":",")+o+"="+this._renderParameterKeyValue(this._oParameterValueAssignment[o],t[o].getProperty().type);n=false}return(e?e:"")+"/"+this._oParameterization.getEntitySet().getQName()+"("+i+")"},_oParameterization:null,_oParameterValueAssignment:null};o.QueryResultRequest=function(e,t){this._init(e,t)};o.QueryResultRequest.prototype={_init:function(e,t){this._oQueryResult=e;this._oParameterizationRequest=t;this._oAggregationLevel={};this._oDimensionHierarchies={};this._oMeasures={};this._bIncludeEntityKey=false;this._oFilterExpression=null;this._oSortExpression=null;this._oSelectedPropertyNames=null},addRecursiveHierarchy:function(e,t,r){var i;if(!e){return}i=this._oQueryResult.findDimensionByName(e);if(!i){throw new Error("'"+e+"' is not a dimension property")}if(!i.getHierarchy()){throw new Error("Dimension '"+e+"' does not have a hierarchy")}this._oSelectedPropertyNames=null;this._oDimensionHierarchies[e]={externalKey:t,id:true,text:r}},setParameterizationRequest:function(e){this._oParameterizationRequest=e},setResourcePath:function(e){this._sResourcePath=e;if(this._sResourcePath.indexOf("/")!=0){throw"Missing leading / (slash) for resource path"}if(this._oQueryResult.getParameterization()){var t=e.lastIndexOf("/");if(t==-1){throw"Missing navigation from parameter entity set to query result in resource path"}var r=e.substring(t+1);if(r!=this._oQueryResult.getParameterization().getNavigationPropertyToQueryResult()){throw"Invalid navigation property from parameter entity set to query result in resource path"}}},getParameterizationRequest:function(){return this._oParameterizationRequest},getQueryResult:function(){return this._oQueryResult},setAggregationLevel:function(e){this._oAggregationLevel={};if(!e){e=this._oQueryResult.getAllDimensionNames()}this.addToAggregationLevel(e);this._oSelectedPropertyNames=null},addToAggregationLevel:function(e){if(!e){return}this._oSelectedPropertyNames=null;for(var t=-1,r;(r=e[++t])!==undefined;){if(!this._oQueryResult.findDimensionByName(r)){throw r+" is not a valid dimension name"}this._oAggregationLevel[r]={key:true,text:false,attributes:null}}},removeFromAggregationLevel:function(e){if(!e){return}this._oSelectedPropertyNames=null;for(var t=-1,r;(r=e[++t])!==undefined;){if(!this._oQueryResult.findDimensionByName(r)){throw r+" is not a valid dimension name"}if(this._oAggregationLevel[r]!=undefined){delete this._oAggregationLevel[r];this.getSortExpression().removeSorter(r)}}},getAggregationLevel:function(){var e=[];for(var t in this._oAggregationLevel){e.push(t)}return e},getAggregationLevelDetails:function(e){if(this._oAggregationLevel[e]==undefined){throw"Aggregation level does not include dimension "+e}return this._oAggregationLevel[e]},setMeasures:function(e){if(!e){e=this._oQueryResult.getAllMeasureNames()}this._oSelectedPropertyNames=null;this._oMeasures={};for(var t=-1,r;(r=e[++t])!==undefined;){if(!this._oQueryResult.findMeasureByName(r)){throw r+" is not a valid measure name"}this._oMeasures[r]={value:true,text:false,unit:false}}},getMeasureNames:function(){var e=[];for(var t in this._oMeasures){e.push(t)}return e},includeDimensionKeyTextAttributes:function(e,t,r,i){this._oSelectedPropertyNames=null;var n=[];if(e){if(this._oAggregationLevel[e]==undefined){throw e+" is not included in the aggregation level"}n.push(e)}else{for(var o in this._oAggregationLevel){n.push(o)}i=null}for(var a=-1,s;(s=n[++a])!==undefined;){if(t!=null){this._oAggregationLevel[s].key=t}if(r!=null){this._oAggregationLevel[s].text=r}if(i!=null){this._oAggregationLevel[s].attributes=i}}},includeMeasureRawFormattedValueUnit:function(e,t,r,i){this._oSelectedPropertyNames=null;var n=[];if(e){if(this._oMeasures[e]==undefined){throw e+" is not part of the query result"}n.push(e)}else{for(var o in this._oMeasures){n.push(o)}}for(var a=-1,s;(s=n[++a])!==undefined;){if(t!=null){this._oMeasures[s].value=t}if(r!=null){this._oMeasures[s].text=r}if(i!=null){this._oMeasures[s].unit=i}}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oQueryResult.getEntityType();this._oFilterExpression=new o.FilterExpression(this._oQueryResult.getModel(),e.getSchema(),e)}return this._oFilterExpression},setFilterExpression:function(e){this._oFilterExpression=e},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new o.SortExpression(e.getModel(),e.getSchema(),e)}return this._oSortExpression},setSortExpression:function(e){this._oSortExpression=e},setRequestOptions:function(e,t,r){if(e!=null){this._bIncludeEntityKey=e}if(t!=null){this._bIncludeCount=t}if(r!=null){this._bReturnNoEntities=r}},setResultPageBoundaries:function(e,t){if(e!=null&&typeof e!=="number"){throw"Start value must be null or numeric"}if(t!==null&&typeof t!=="number"){throw"End value must be null or numeric"}if(e==null){e=1}if(e<1||e>(t==null?e:t)){throw"Invalid values for requested page boundaries"}this._iSkipRequestOption=e>1?e-1:null;this._iTopRequestOption=t!=null?t-e+1:null},getResultPageBoundaries:function(){var e=null;if(this._iTopRequestOption!=null){if(this._iSkipRequestOption==null){e=1}else{e=this._iSkipRequestOption+this._iTopRequestOption}}return{start:this._iSkipRequestOption==null?1:this._iSkipRequestOption,end:e}},getURIToQueryResultEntitySet:function(e){var t=null;if(this._sResourcePath!=null){t=(e?e:"")+this._sResourcePath}else if(this._oQueryResult.getParameterization()){if(!this._oParameterizationRequest){throw"Missing parameterization request"}else{t=this._oParameterizationRequest.getURIToParameterizationEntry(e)+"/"+this._oQueryResult.getParameterization().getNavigationPropertyToQueryResult()}}else{t=(e?e:"")+"/"+this._oQueryResult.getEntitySet().getQName()}return t},getURIOrderByOptionValue:function(){var e,t,r=null,i=this._oSortExpression?this._oSortExpression._aSortCondition:[],n,o=i.length;if(o){e=this._oQueryResult.getAllMeasureNames();for(n=0;n<o;n+=1){t=i[n];if(!this._oSelectedPropertyNames[t.property.name]&&e.indexOf(t.property.name)<0){continue}r=(r?r+",":"")+t.property.name+" "+t.order}}return r},getURIQueryOptionValue:function(e){var t,r=null,i,n=this;function o(e){var t;if(!e){return}t=typeof e==="string"?e:e.name;if(!n._oSelectedPropertyNames[t]){i+=(i==""?"":",")+t;n._oSelectedPropertyNames[t]=true}}switch(e){case"$select":{i="";this._oSelectedPropertyNames={};for(t in this._oAggregationLevel){var a=this._oQueryResult.findDimensionByName(t);var s=this._oAggregationLevel[t];if(s.key==true){o(a.getKeyProperty())}if(s.text==true){o(a.getTextProperty())}if(s.attributes){for(var u=-1,l;(l=s.attributes[++u])!==undefined;){o(a.findAttributeByName(l).getName())}}}for(t in this._oMeasures){var h=this._oQueryResult.findMeasureByName(t);var f=this._oMeasures[t];if(f.value==true){o(h.getRawValueProperty())}if(f.text==true){o(h.getFormattedValueProperty())}if(f.unit==true){o(h.getUnitProperty())}}for(t in this._oDimensionHierarchies){var y=this._oQueryResult.findDimensionByName(t).getHierarchy();var p=this._oDimensionHierarchies[t];if(p.id){o(y.getNodeIDProperty())}if(p.externalKey){o(y.getNodeExternalKeyProperty())}if(p.text){o(this._oQueryResult.getEntityType().getTextPropertyOfProperty(y.getNodeIDProperty().name))}}if(this._bIncludeEntityKey){var d=this._oQueryResult.getEntityType().getTypeDescription().key.propertyRef;for(var _=-1,m;(m=d[++_])!==undefined;){i+=(i==""?"":",")+m.name}}r=i?i:null;break}case"$filter":{var c=null;if(this._oFilterExpression){c=this._oFilterExpression.getURIFilterOptionValue()}r=c?c:null;break}case"$orderby":{r=this.getURIOrderByOptionValue();break}case"$top":{r=null;if(this._bReturnNoEntities){r=0}else if(this._iTopRequestOption!==null){r=this._iTopRequestOption}break}case"$skip":{r=null;if(!this._bReturnNoEntities){r=this._iSkipRequestOption}break}case"$inlinecount":{r=this._bIncludeCount==true?"allpages":null;break}default:break}return r},getURIToQueryResultEntries:function(e,t){if(!t){t=this.getURIToQueryResultEntitySet(e)}this.getFilterExpression().checkValidity();var r=this.getURIQueryOptionValue("$select");var i=this.getURIQueryOptionValue("$filter");var n=this.getURIQueryOptionValue("$orderby");var o=this.getURIQueryOptionValue("$top");var a=this.getURIQueryOptionValue("$skip");var s=this.getURIQueryOptionValue("$inlinecount");var u=t;var l=false;if(r!==null){u+="?$select="+r;l=true}if(this._oFilterExpression&&i!==null){if(!l){u+="?";l=true}else{u+="&"}u+="$filter="+i}if(this._oSortExpression&&n!==null){if(!l){u+="?";l=true}else{u+="&"}u+="$orderby="+n}if((this._iTopRequestOption||this._bReturnNoEntities)&&o!==null){if(!l){u+="?";l=true}else{u+="&"}u+="$top="+o}if(this._iSkipRequestOption&&a!==null){if(!l){u+="?";l=true}else{u+="&"}u+="$skip="+a}if(this._bIncludeCount&&s!==null){if(!l){u+="?";l=true}else{u+="&"}u+="$inlinecount="+s}return u},_oQueryResult:null,_oParameterizationRequest:null,_sResourcePath:null,_oAggregationLevel:null,_oDimensionHierarchies:null,_oMeasures:null,_bIncludeEntityKey:null,_bIncludeCount:null,_bReturnNoEntities:null,_oFilterExpression:null,_oSortExpression:null,_iSkipRequestOption:null,_iTopRequestOption:null};o.ParameterValueSetRequest=function(e){this._init(e)};o.ParameterValueSetRequest.prototype={_init:function(e){this._oParameter=e;this._oValueSetResult={};this._oFilterExpression=null;this._oSortExpression=null},includeParameterText:function(e){if(e!=null){this._oValueSetResult.text=e}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oParameter.getContainingParameterization().getEntityType();var t=this._oParameter.getContainingParameterization().getTargetQueryResult().getModel();this._oFilterExpression=new o.FilterExpression(t,e.getSchema(),e)}return this._oFilterExpression},setFilterExpression:function(e){this._oFilterExpression=e},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oParameter.getContainingParameterization().getEntityType();this._oSortExpression=new o.SortExpression(e.getModel(),e.getSchema(),e)}return this._oSortExpression},setSortExpression:function(e){this._oSortExpression=e},getURIQueryOptionValue:function(e){var t=null;switch(e){case"$select":{var r="";r+=(r==""?"":",")+this._oParameter.getProperty().name;if(this._oValueSetResult.text==true&&this._oParameter.getTextProperty()){r+=(r==""?"":",")+this._oParameter.getTextProperty().name}t=r?r:null;break}case"$filter":{var i=null;if(this._oFilterExpression){i=this._oFilterExpression.getURIFilterOptionValue()}t=i?i:null;break}case"$orderby":{var n=null;if(this._oSortExpression){n=this._oSortExpression.getURIOrderByOptionValue()}t=n?n:null;break}default:break}return t},getURIToParameterValueSetEntries:function(e){var t=null;t=(e?e:"")+"/"+this._oParameter.getContainingParameterization().getEntitySet().getQName();this.getFilterExpression().checkValidity();var r=this.getURIQueryOptionValue("$select");var i=this.getURIQueryOptionValue("$filter");var n=this.getURIQueryOptionValue("$orderby");var o=t;var a=false;if(r){o+="?$select="+r;a=true}if(this._oFilterExpression&&i){if(!a){o+="?";a=true}else{o+="&"}o+="$filter="+i}if(this._oSortExpression&&n){if(!a){o+="?";a=true}else{o+="&"}o+="$orderby="+n}return o},_oParameter:null,_oFilterExpression:null,_oSortExpression:null,_oValueSetResult:null};o.DimensionMemberSetRequest=function(e,t,r){this._init(e,t,r)};o.DimensionMemberSetRequest.prototype={_init:function(e,t,r){this._oDimension=e;this._oParameterizationRequest=t;this._bUseMasterData=r;this._oValueSetResult={};this._oFilterExpression=null;this._oSortExpression=null;if(this._oParameterizationRequest!=null&&this._bUseMasterData==true){throw"Parameterized master data entity sets are not yet implemented"}if(this._bUseMasterData){this._oEntitySet=this._oDimension.getMasterDataEntitySet()}else{this._oEntitySet=this._oDimension.getContainingQueryResult().getEntitySet();if(this._oDimension.getContainingQueryResult().getParameterization()&&!this._oParameterizationRequest){throw"Missing parameterization request"}}},setParameterizationRequest:function(e){this._oParameterizationRequest=e},includeDimensionTextAttributes:function(e,t){this._oValueSetResult.text={text:false,attributes:false};if(e==true){this._oValueSetResult.text=true}if(t==true){this._oValueSetResult.attributes=true}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oEntitySet.getEntityType();var t=this._oDimension.getContainingQueryResult().getModel();this._oFilterExpression=new o.FilterExpression(t,e.getSchema(),e)}return this._oFilterExpression},setFilterExpression:function(e){this._oFilterExpression=e},getSortExpression:function(){if(this._oSortExpression==null){this._oSortExpression=new o.SortExpression(this._oEntityType.getModel(),this._oEntityType.getSchema(),this._oEntityType)}return this._oSortExpression},setSortExpression:function(e){this._oSortExpression=e},setRequestOptions:function(e){if(e!=null){this._bIncludeCount=e}},setResultPageBoundaries:function(e,t){if(e!=null&&typeof e!=="number"){throw"Start value must be null or numeric"}if(t!==null&&typeof t!=="number"){throw"End value must be null or numeric"}if(e==null){e=1}if(e<1||e>(t==null?e:t)){throw"Invalid values for requested page boundaries"}this._iSkipRequestOption=e>1?e-1:null;this._iTopRequestOption=t!=null?t-e+1:null},getResultPageBoundaries:function(){var e=null;if(this._iTopRequestOption!=null){if(this._iSkipRequestOption==null){e=1}else{e=this._iSkipRequestOption+this._iTopRequestOption}}return{start:this._iSkipRequestOption==null?1:this._iSkipRequestOption,end:e}},getURIQueryOptionValue:function(e){var t=null;switch(e){case"$select":{var r="";var i=this._oEntitySet.getEntityType();var n=i.getKeyProperties();var o=[];if(this._bUseMasterData){for(var a=-1,s;(s=n[++a])!==undefined;){r+=(r==""?"":",")+s;var u=i.getTextPropertyOfProperty(s);if(u){if(this._oValueSetResult.text==true){r+=","+u.name}o.push(u.name)}}}else{r+=(r==""?"":",")+this._oDimension.getKeyProperty().name;if(this._oValueSetResult.text==true&&this._oDimension.getTextProperty()){r+=(r==""?"":",")+this._oDimension.getTextProperty().name}}if(this._oValueSetResult.attributes){if(this._bUseMasterData){var l=i.getProperties();for(var h in l){var f=false;for(var y=-1,p;(p=n[++y])!==undefined;){if(h==p){f=true;break}}if(f){continue}for(var d=-1,_;(_=o[++d])!==undefined;){if(h==_){f=true;break}}if(!f){r+=","+h}}}else{var m=this._oDimension.getAllAttributeNames();for(var c=-1,g;(g=m[++c])!==undefined;){r+=(r==""?"":",")+this._oDimension.findAttributeByName(g).getName()}}}t=r?r:null;break}case"$filter":{var v=null;if(this._oFilterExpression){v=this._oFilterExpression.getURIFilterOptionValue()}t=v?v:null;break}case"$orderby":{var P=null;if(this._oSortExpression){P=this._oSortExpression.getURIOrderByOptionValue()}t=P?P:null;break}case"$top":{if(this._iTopRequestOption!==null){t=this._iTopRequestOption}break}case"$skip":{t=this._iSkipRequestOption;break}case"$inlinecount":{t=this._bIncludeCount==true?"allpages":null;break}default:break}return t},getURIToDimensionMemberEntitySet:function(e){var t=null;if(!this._bUseMasterData&&this._oParameterizationRequest){t=this._oParameterizationRequest.getURIToParameterizationEntry(e)+"/"+this._oDimension.getContainingQueryResult().getParameterization().getNavigationPropertyToQueryResult()}else{t=(e?e:"")+"/"+this._oEntitySet.getQName()}return t},getURIToDimensionMemberEntries:function(e){var t=this.getURIToDimensionMemberEntitySet(e);this.getFilterExpression().checkValidity();var r=this.getURIQueryOptionValue("$select");var i=this.getURIQueryOptionValue("$filter");var n=this.getURIQueryOptionValue("$orderby");var o=this.getURIQueryOptionValue("$top");var a=this.getURIQueryOptionValue("$skip");var s=this.getURIQueryOptionValue("$inlinecount");var u=t;var l=false;if(r){u+="?$select="+r;l=true}if(this._oFilterExpression&&i){if(!l){u+="?";l=true}else{u+="&"}u+="$filter="+i}if(this._oSortExpression&&n){if(!l){u+="?";l=true}else{u+="&"}u+="$orderby="+n}if(this._iTopRequestOption&&o){if(!l){u+="?";l=true}else{u+="&"}u+="$top="+o}if(this._iSkipRequestOption&&a){if(!l){u+="?";l=true}else{u+="&"}u+="$skip="+a}if(this._bIncludeCount&&s){if(!l){u+="?";l=true}else{u+="&"}u+="$inlinecount="+s}return u},_oDimension:null,_oParameterizationRequest:null,_oEntitySet:null,_bUseMasterData:false,_oFilterExpression:null,_oSortExpression:null,_oValueSetResult:null,_bIncludeCount:null,_iSkipRequestOption:0,_iTopRequestOption:null};return o},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/ODataAnnotations", ["./AnnotationParser","sap/base/assert","sap/base/Log","sap/base/i18n/Localization","sap/base/util/extend","sap/base/util/isEmptyObject","sap/ui/base/EventProvider","sap/ui/thirdparty/jquery"],function(t,e,a,o,s,n,r,jQuery){"use strict";var i=r.extend("sap.ui.model.odata.ODataAnnotations",{constructor:function(t){r.apply(this,arguments);if(arguments.length!==1){if(typeof arguments[2]==="object"){t=arguments[2]}t.urls=arguments[0];t.metadata=arguments[1]}this.oMetadata=t.metadata;this.oAnnotations=t.annotationData?t.annotationData:{};this.bLoaded=false;this.bAsync=t&&t.async;this.xPath=null;this.oError=null;this.bValidXML=true;this.oRequestHandles=[];this.oLoadEvent=null;this.oFailedEvent=null;this.mCustomHeaders=t.headers?s({},t.headers):{};if(t.urls){this.addUrl(t.urls);if(!this.bAsync){e(!n(this.oMetadata),"Metadata must be available for synchronous annotation loading");if(this.oError){a.error("OData annotations could not be loaded: "+this.oError.message)}}}},metadata:{publicMethods:["parse","getAnnotationsData","attachFailed","detachFailed","attachLoaded","detachLoaded"]}});i.prototype.getData=function(){return this.oAnnotations};i.prototype.getAnnotationsData=i.prototype.getData;i.prototype.isLoaded=function(){return this.bLoaded};i.prototype.isFailed=function(){return this.oError!==null};i.prototype.fireLoaded=function(t){this.fireEvent("loaded",t);return this};i.prototype.attachLoaded=function(t,e,a){this.attachEvent("loaded",t,e,a);return this};i.prototype.detachLoaded=function(t,e){this.detachEvent("loaded",t,e);return this};i.prototype.fireFailed=function(t){this.fireEvent("failed",t);return this};i.prototype.attachFailed=function(t,e,a){this.attachEvent("failed",t,e,a);return this};i.prototype.detachFailed=function(t,e){this.detachEvent("failed",t,e);return this};i.prototype.setHeaders=function(t){this.mCustomHeaders=s({},t)};i.prototype._createXMLDocument=function(t,e){var a=null;if(typeof t==="string"){e=t;t=null}if(t){a=t}else{a=(new DOMParser).parseFromString(e,"application/xml")}return a};i.prototype._documentHasErrors=function(t){return t.getElementsByTagName("parsererror").length>0};i.prototype._mergeAnnotationData=function(e,a){if(!this.oAnnotations){this.oAnnotations={}}t.merge(this.oAnnotations,e);this.bLoaded=true;if(!a){this.fireLoaded({annotations:e})}};i.prototype.setXML=function(e,a,o){var r={success:function(){},error:function(){},fireEvents:false};o=s({},r,o);var i=this._createXMLDocument(e,a);var u=function(e){var a={xmlDoc:e};var s=t.parse(this.oMetadata,e);if(s){a.annotations=s;o.success(a);this._mergeAnnotationData(s,!o.fireEvents)}else{o.error(a);if(o.fireEvents){this.fireFailed(a)}}}.bind(this,i);if(this._documentHasErrors(i)){o.error({xmlDoc:i});return false}else{var l=this.oMetadata.getServiceMetadata();if(!l||n(l)){this.oMetadata.attachLoaded(u)}else{u()}return true}};i.prototype.addUrl=function(t){var e=this;var a=t;if(Array.isArray(t)&&t.length==0){return Promise.resolve({annotations:this.oAnnotations})}if(!Array.isArray(t)){a=[t]}return new Promise(function(t,o){var s=0;var n={annotations:null,success:[],fail:[]};var r=function(r){s++;if(r.type==="success"){n.success.push(r)}else{n.fail.push(r)}if(s===a.length){n.annotations=e.oAnnotations;if(n.success.length>0){var i={annotations:e.oAnnotations,results:n};e.fireLoaded(i)}if(n.success.length<a.length){var u=new Error("At least one annotation failed to load/parse/merge");u.annotations=n.annotations;u.success=n.success;u.fail=n.fail;o(u)}else{t(n)}}};var i=0;if(e.bAsync){var u=Promise.resolve();for(i=0;i<a.length;++i){var l=e._loadFromUrl.bind(e,a[i]);u=u.then(l,l).then(r,r)}}else{for(i=0;i<a.length;++i){e._loadFromUrl(a[i]).then(r,r)}}})};i.prototype._loadFromUrl=function(t){var e=this;return new Promise(function(a,n){var r={url:t,async:e.bAsync,headers:s({},e.mCustomHeaders,{"Accept-Language":o.getLanguageTag().toString()})};var i;var u=function(a,o){if(i&&i.bSuppressErrorHandlerCall){return}e.oError={type:"fail",url:t,message:o,statusCode:a.status,statusText:a.statusText,responseText:a.responseText};if(e.bAsync){e.oFailedEvent=setTimeout(e.fireFailed.bind(e,e.oError),0)}else{e.fireFailed(e.oError)}n(e.oError)};var l=function(o,s,n){e.setXML(n.responseXML,n.responseText,{success:function(e){a({type:"success",url:t,message:s,statusCode:n.status,statusText:n.statusText,responseText:n.responseText})},error:function(t){u(n,"Malformed XML document")},url:t})};jQuery.ajax(r).done(l).fail(u)})};i.prototype.destroy=function(){for(var t=0;t<this.oRequestHandles.length;++t){if(this.oRequestHandles[t]){this.oRequestHandles[t].bSuppressErrorHandlerCall=true;this.oRequestHandles[t].abort();this.oRequestHandles[t]=null}}r.prototype.destroy.apply(this,arguments);if(this.oLoadEvent){clearTimeout(this.oLoadEvent)}if(this.oFailedEvent){clearTimeout(this.oFailedEvent)}};return i});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/ODataContextBinding", ["sap/ui/model/ContextBinding","sap/ui/model/ChangeReason"],function(t,e){"use strict";var i=t.extend("sap.ui.model.odata.ODataContextBinding",{constructor:function(e,i,o,s,n){t.call(this,e,i,o,s,n)}});i.prototype.initialize=function(){var t=this,i=this.oModel.resolve(this.sPath,this.oContext),o=this.oModel._getObject(this.sPath,this.oContext),s=this.oModel._isReloadNeeded(i,o,this.mParameters);if(this.oModel.oMetadata.isLoaded()){if(i&&s){this.fireDataRequested()}this.oModel.createBindingContext(this.sPath,this.oContext,this.mParameters,function(o){t.oElementContext=o;t._fireChange({reason:e.Context});if(i&&s){t.fireDataReceived()}},s)}};i.prototype.refresh=function(t,i){var o=this,s,n,a=false,h=this.oModel.resolve(this.sPath,this.oContext);if(i){n=this.oModel._getObject(this.sPath,this.oContext);if(n){s=this.oModel._getKey(n);if(s in i){a=true}}}else{a=true}if(t||a){if(h){this.fireDataRequested()}this.oModel.createBindingContext(this.sPath,this.oContext,this.mParameters,function(i){if(o.oElementContext===i){if(t){o._fireChange({reason:e.Context})}}else{o.oElementContext=i;o._fireChange({reason:e.Context})}if(h){o.fireDataReceived()}},true)}};i.prototype.setContext=function(t){var i=this,o,s,n;if(this.oContext!==t&&this.isRelative()){this.oContext=t;o=this.oModel.resolve(this.sPath,this.oContext);s=this.oModel._getObject(this.sPath,this.oContext);n=this.oModel._isReloadNeeded(o,s,this.mParameters);if(o&&n){this.fireDataRequested()}this.oModel.createBindingContext(this.sPath,this.oContext,this.mParameters,function(t){i.oElementContext=t;i._fireChange({reason:e.Context});if(o&&n){i.fireDataReceived()}},n)}};return i});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/ODataListBinding", ["./CountMode","./ODataUtils","sap/base/assert","sap/base/Log","sap/base/util/deepEqual","sap/base/util/each","sap/base/util/merge","sap/base/util/array/diff","sap/ui/model/ChangeReason","sap/ui/model/Filter","sap/ui/model/FilterProcessor","sap/ui/model/FilterType","sap/ui/model/ListBinding","sap/ui/model/Sorter","sap/ui/model/odata/Filter"],function(t,e,i,s,a,n,r,h,o,l,u,f,d,p,g){"use strict";var c=d.extend("sap.ui.model.odata.ODataListBinding",{constructor:function(t,e,i,s,a,n){d.apply(this,arguments);this.sFilterParams=null;this.sSortParams=null;this.sRangeParams=null;this.sCustomParams=this.oModel.createCustomParams(this.mParameters);this.iStartIndex=0;this.bPendingChange=false;this.aKeys=[];this.bInitial=true;this.sCountMode=n&&n.countMode||this.oModel.sDefaultCountMode;this.bRefresh=false;this.bNeedsUpdate=false;this.bDataAvailable=false;this.bIgnoreSuspend=false;this.oCombinedFilter=null;this.oModel.checkFilter(this.aApplicationFilters);if(!this.oModel.getServiceMetadata()){var r=this,h=function(t){r.bInitial=false;r._initSortersFilters();r.oModel.detachMetadataLoaded(h)};this.oModel.attachMetadataLoaded(this,h)}else{this.bInitial=false;this._initSortersFilters()}var o=this.oModel._getObject(this.sPath,this.oContext);this.aExpandRefs=o;if(Array.isArray(o)&&!s&&!a){this.aKeys=o;this.iLength=o.length;this.bLengthFinal=true;this.bDataAvailable=true}else if(o===null&&this.oModel.resolve(this.sPath,this.oContext)){this.aKeys=[];this.iLength=0;this.bLengthFinal=true;this.bDataAvailable=true}else if(this.oModel.getServiceMetadata()){this.resetData()}}});c.prototype.getAllCurrentContexts=function(){var t=[],e=this;this.aKeys.forEach(function(i){t.push(e.oModel.getContext("/"+i))});return t};c.prototype.getContexts=function(t,e,i){if(this.bInitial){return[]}this.iLastLength=e;this.iLastStartIndex=t;this.iLastThreshold=i;if(!t){t=0}if(!e){e=this.oModel.iSizeLimit;if(this.bLengthFinal&&this.iLength<e){e=this.iLength}}if(!i){i=0}var s=true,n=this._getContexts(t,e),o={},l;l=this.calculateSection(t,e,i,n);s=n.length!=e&&!(this.bLengthFinal&&n.length>=this.iLength-t);if(this.oModel.getServiceMetadata()){if(!this.bPendingRequest&&l.length>0&&(s||e<l.length)){this.loadData(l.startIndex,l.length);n.dataRequested=true}}if(this.bRefresh){if(this.bLengthFinal&&this.iLength==0){this.loadData(l.startIndex,l.length,true);n.dataRequested=true}this.bRefresh=false}else{for(var u=0;u<n.length;u++){o[n[u].getPath()]=n[u].getObject()}if(this.bUseExtendedChangeDetection){if(this.aLastContexts&&t<this.iLastEndIndex){var f=this;var d=h(this.aLastContexts,n,function(t,e){return a(t&&f.oLastContextData&&f.oLastContextData[t.getPath()],e&&o&&o[e.getPath()])});n.diff=d}}this.iLastEndIndex=t+e;this.aLastContexts=n.slice(0);this.oLastContextData=r({},o)}return n};c.prototype.getCurrentContexts=function(){return this.aLastContexts||[]};c.prototype._getContexts=function(t,e){var i=[],s,a;if(!t){t=0}if(!e){e=this.oModel.iSizeLimit;if(this.bLengthFinal&&this.iLength<e){e=this.iLength}}for(var n=t;n<t+e;n++){a=this.aKeys[n];if(!a){break}s=this.oModel.getContext("/"+a);i.push(s)}return i};c.prototype.calculateSection=function(t,e,i,s){var a,n,r,h,o,l={},u;n=t;a=0;for(var f=t;f>=Math.max(t-i,0);f--){u=this.aKeys[f];if(!u){h=f+1;break}}for(var d=t+e;d<t+e+i;d++){u=this.aKeys[d];if(!u){r=d;break}}o=t-h;if(h&&t>i&&o<i){if(s.length!=e){n=t-i}else{n=h-i}a=i}n=Math.max(n,0);if(n==t){n+=s.length}if(s.length!=e){a+=e-s.length}o=r-t-e;if(o==0){a+=i}if(r&&o<i&&o>0){if(n>t){n=r;a+=i}}if(this.bLengthFinal&&this.iLength<a+n){a=this.iLength-n}l.startIndex=n;l.length=a;return l};c.prototype.setContext=function(t){if(this.oContext!=t){this.oContext=t;if(this.isRelative()){this._initSortersFilters();if(!this.bInitial){var e=this.oModel._getObject(this.sPath,this.oContext);this.aExpandRefs=e;if(Array.isArray(e)&&!this.aSorters.length>0&&!this.aFilters.length>0){this.aKeys=e;this.iLength=e.length;this.bLengthFinal=true;this._fireChange({reason:o.Context})}else if(!this.oModel.resolve(this.sPath,this.oContext)||e===null){this.aKeys=[];this.iLength=0;this.bLengthFinal=true;this._fireChange({reason:o.Context})}else{this.refresh()}}}}};c.prototype.getDownloadUrl=function(t){var e=[],i;if(t){e.push("$format="+encodeURIComponent(t))}if(this.sSortParams){e.push(this.sSortParams)}if(this.sFilterParams){e.push(this.sFilterParams)}if(this.sCustomParams){e.push(this.sCustomParams)}i=this.oModel.resolve(this.sPath,this.oContext);return i&&this.oModel._createRequestUrl(i,null,e)};c.prototype.loadData=function(e,i,s){var a=this,r=false;if(e||i){this.sRangeParams="$skip="+e+"&$top="+i;this.iStartIndex=e}else{e=this.iStartIndex}var h=[];if(this.sRangeParams){h.push(this.sRangeParams)}if(this.sSortParams){h.push(this.sSortParams)}if(this.sFilterParams){h.push(this.sFilterParams)}if(this.sCustomParams){h.push(this.sCustomParams)}if(!this.bLengthFinal&&(this.sCountMode==t.Inline||this.sCountMode==t.Both)){h.push("$inlinecount=allpages");r=true}function l(t){n(t.results,function(t,i){a.aKeys[e+t]=a.oModel._getKey(i)});if(r&&t.__count){a.iLength=parseInt(t.__count);a.bLengthFinal=true}if(a.iLength<e+t.results.length){a.iLength=e+t.results.length;a.bLengthFinal=false}if(t.results.length<i||i===undefined){a.iLength=e+t.results.length;a.bLengthFinal=true}if(e==0&&t.results.length==0){a.iLength=0;a.bLengthFinal=true}a.oRequestHandle=null;a.bPendingRequest=false;a.bNeedsUpdate=true;a.bIgnoreSuspend=true}function u(t){a.fireDataReceived({data:t})}function f(t,e){a.oRequestHandle=null;a.bPendingRequest=false;if(!e){a.aKeys=[];a.iLength=0;a.bLengthFinal=true;a.bDataAvailable=true;a._fireChange({reason:o.Change})}a.fireDataReceived()}function d(t){a.oRequestHandle=t}var p=this.sPath,g=this.oContext;if(this.isRelative()){p=this.oModel.resolve(p,g)}if(p){if(s){var c=this.oModel._createRequestUrl(p,null,h);this.fireDataRequested();this.oModel.fireRequestSent({url:c,method:"GET",async:true});setTimeout(function(){a.bNeedsUpdate=true;a.checkUpdate();a.oModel.fireRequestCompleted({url:c,method:"GET",async:true,success:true});a.fireDataReceived({data:{}})},0)}else{this.bPendingRequest=true;this.fireDataRequested();this.oModel._loadData(p,h,l,f,false,d,u)}}};c.prototype.getLength=function(){if(this.bLengthFinal||this.iLength==0){return this.iLength}else{var t=this.iLastThreshold||this.iLastLength||10;return this.iLength+t}};c.prototype.isLengthFinal=function(){return this.bLengthFinal};c.prototype._getLength=function(){var t=this;var e=[];if(this.sFilterParams){e.push(this.sFilterParams)}if(this.mParameters&&this.mParameters.custom){var i={custom:{}};n(this.mParameters.custom,function(t,e){i.custom[t]=e});e.push(this.oModel.createCustomParams(i))}function a(e){t.iLength=parseInt(e);t.bLengthFinal=true}function r(t){var e="Request for $count failed: "+t.message;if(t.response){e+=", "+t.response.statusCode+", "+t.response.statusText+", "+t.response.body}s.warning(e)}var h=this.oModel.resolve(this.sPath,this.oContext);if(h){var o=this.oModel._createRequestUrl(h+"/$count",null,e);var l=this.oModel._createRequest(o,"GET",false);l.headers["Accept"]="text/plain, */*;q=0.5";this.oModel._request(l,a,r,undefined,undefined,this.oModel.getServiceMetadata())}};c.prototype.refresh=function(t,e,i){var s=false;if(!t){if(i){var a=this.oModel.resolve(this.sPath,this.oContext);var r=this.oModel.oMetadata._getEntityTypeByPath(a);if(r&&r.entityType in i){s=true}}if(e&&!s){n(this.aKeys,function(t,i){if(i in e){s=true;return false}return true})}if(!e&&!i){s=true}}if(t||s){this.abortPendingRequest();this.resetData();this._fireRefresh({reason:o.Refresh})}};c.prototype._fireRefresh=function(t){if(this.oModel.resolve(this.sPath,this.oContext)){this.bRefresh=true;this.fireEvent("refresh",t)}};c.prototype.initialize=function(){if(this.oModel.oMetadata.isLoaded()){if(this.bDataAvailable){this._fireChange({reason:o.Change})}else{this._fireRefresh({reason:o.Refresh})}}};c.prototype.checkUpdate=function(t,e){var i=this.sChangeReason?this.sChangeReason:o.Change,s=false,r,h,l=this,u,f;if(this.bSuspended&&!this.bIgnoreSuspend){return}if(!t&&!this.bNeedsUpdate){u=this.oModel._getObject(this.sPath,this.oContext);f=Array.isArray(u)&&!a(u,this.aExpandRefs);this.aExpandRefs=u;if(f){if(this.aSorters.length>0||this.aFilters.length>0){this.refresh();return}else{this.aKeys=u;this.iLength=u.length;this.bLengthFinal=true;s=true}}else if(e){n(this.aKeys,function(t,i){if(i in e){s=true;return false}return true})}else{s=true}if(s&&this.aLastContexts){s=false;var d=this._getContexts(this.iLastStartIndex,this.iLastLength,this.iLastThreshold);if(this.aLastContexts.length!=d.length){s=true}else{n(this.aLastContexts,function(t,e){r=l.oLastContextData[e.getPath()];h=d[t].getObject();if(!a(r,h,true)){s=true;return false}return true})}}}if(t||s||this.bNeedsUpdate){this.bNeedsUpdate=false;this._fireChange({reason:i})}this.sChangeReason=undefined;this.bIgnoreSuspend=false};c.prototype.resetData=function(){this.aKeys=[];this.iLength=0;this.bLengthFinal=false;this.sChangeReason=undefined;this.bDataAvailable=false;if(this.oModel.isCountSupported()&&(this.sCountMode==t.Request||this.sCountMode==t.Both)){this._getLength()}};c.prototype.abortPendingRequest=function(){if(this.oRequestHandle){this.oRequestHandle.abort();this.oRequestHandle=null;this.bPendingRequest=false}};c.prototype.sort=function(t,e){var i=false;if(!t){t=[]}if(t instanceof p){t=[t]}this.aSorters=t;this.createSortParams(t);if(!this.bInitial){this.aKeys=[];this.abortPendingRequest();this.sChangeReason=o.Sort;this._fireRefresh({reason:this.sChangeReason});this._fireSort({sorter:t});i=true}if(e){return i}else{return this}};c.prototype.createSortParams=function(t){this.sSortParams=e.createSortParams(t)};c.prototype.filter=function(t,e,i){var s=false;if(!t){t=[]}if(t instanceof l){t=[t]}this.oModel.checkFilter(t);if(e==f.Application){this.aApplicationFilters=t}else{this.aFilters=t}if(!t||!Array.isArray(t)||t.length==0){this.aFilters=[]}if(!this.aApplicationFilters||!Array.isArray(this.aApplicationFilters)||this.aApplicationFilters.length===0){this.aApplicationFilters=[]}this.convertFilters();this.oCombinedFilter=u.combineFilters(this.aFilters,this.aApplicationFilters);this.createFilterParams(this.oCombinedFilter);if(!this.bInitial){this.resetData();this.abortPendingRequest();this.sChangeReason=o.Filter;this._fireRefresh({reason:this.sChangeReason});if(e==f.Application){this._fireFilter({filters:this.aApplicationFilters})}else{this._fireFilter({filters:this.aFilters})}s=true}if(i){return s}else{return this}};c.prototype.convertFilters=function(){this.aFilters=this.aFilters.map(function(t){return t instanceof g?t.convert():t});this.aApplicationFilters=this.aApplicationFilters.map(function(t){return t instanceof g?t.convert():t})};c.prototype.createFilterParams=function(t){this.sFilterParams=e.createFilterParams(t,this.oModel.oMetadata,this.oEntityType)};c.prototype._initSortersFilters=function(){var t=this.oModel.resolve(this.sPath,this.oContext);if(!t){return}this.oEntityType=this._getEntityType();this.convertFilters();this.oCombinedFilter=u.combineFilters(this.aFilters,this.aApplicationFilters);this.createSortParams(this.aSorters);this.createFilterParams(this.oCombinedFilter)};c.prototype._getEntityType=function(){var t=this.oModel.resolve(this.sPath,this.oContext);if(t){var e=this.oModel.oMetadata._getEntityTypeByPath(t);i(e,"EntityType for path "+t+" could not be found!");return e}return undefined};c.prototype.resume=function(){this.bIgnoreSuspend=false;d.prototype.resume.apply(this,arguments)};return c});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/ODataModel", ["./CountMode","./ODataContextBinding","./ODataListBinding","./ODataMetadata","./ODataPropertyBinding","./ODataTreeBinding","./ODataUtils","sap/base/assert","sap/base/Log","sap/base/i18n/Localization","sap/base/security/encodeURL","sap/base/util/each","sap/base/util/extend","sap/base/util/isEmptyObject","sap/base/util/isPlainObject","sap/base/util/merge","sap/base/util/uid","sap/ui/core/Supportability","sap/ui/model/BindingMode","sap/ui/model/Context","sap/ui/model/FilterProcessor","sap/ui/model/Model","sap/ui/model/odata/ODataAnnotations","sap/ui/model/odata/ODataMetaModel","sap/ui/thirdparty/datajs","sap/ui/thirdparty/URI"],function(e,t,a,s,i,r,n,o,d,u,h,f,c,l,p,y,_,g,b,m,v,M,R,T,C,U){"use strict";var A=M.extend("sap.ui.model.odata.ODataModel",{constructor:function(t,a,i,r,o,d,h,f){M.apply(this,arguments);var c,l,p,y=null,_,m,v,R,T,U,q=this;if(typeof t==="object"){a=t;t=a.serviceUrl}if(typeof a==="object"){i=a.user;r=a.password;o=a.headers;d=a.tokenHandling;f=a.loadMetadataAsync;h=a.withCredentials;p=a.maxDataServiceVersion;c=a.useBatch;l=a.refreshAfterChange;y=a.annotationURI;_=a.loadAnnotationsJoined;v=a.defaultCountMode;m=a.metadataNamespaces;R=a.serviceUrlParams;T=a.metadataUrlParams;U=a.skipMetadataAnnotationParsing;a=a.json}this.oServiceData={};this.sDefaultBindingMode=b.OneWay;this.mSupportedBindingModes={OneWay:true,OneTime:true,TwoWay:true};this.mUnsupportedFilterOperators={All:true,Any:true,NotAll:true,NotAny:true};this.bCountSupported=true;this.bJSON=a;this.bCache=true;this.aPendingRequestHandles=[];this.oRequestQueue={};this.aBatchOperations=[];this.oHandler=undefined;this.bTokenHandling=d!==false;this.bWithCredentials=h===true;this.bUseBatch=c===true;this.bRefreshAfterChange=l!==false;this.sMaxDataServiceVersion=p;this.bLoadMetadataAsync=!!f;this.bLoadAnnotationsJoined=_===undefined?true:_;this.sAnnotationURI=y;this.sDefaultCountMode=v||e.Both;this.oMetadataLoadEvent=null;this.oMetadataFailedEvent=null;this.bSkipMetadataAnnotationParsing=U;this.oHeaders={};this.setHeaders(o);this.oData={};this.oMetadata=null;this.oAnnotations=null;this.aUrlParams=[];if(t.indexOf("?")==-1){this.sServiceUrl=t}else{var E=t.split("?");this.sServiceUrl=E[0];if(E[1]){this.aUrlParams.push(E[1])}}if(g.isStatisticsEnabled()){this.aUrlParams.push("sap-statistics=true")}this.sServiceUrl=this.sServiceUrl.replace(/\/$/,"");var P=this._createRequestUrl("$metadata",undefined,T);if(!A.mServiceData[P]){A.mServiceData[P]={}}this.oServiceData=A.mServiceData[P];if(this.bTokenHandling&&this.oServiceData.securityToken){this.oHeaders["x-csrf-token"]=this.oServiceData.securityToken}this.sUser=i;this.sPassword=r;this.oHeaders["Accept-Language"]=u.getLanguageTag().toString();if(!this.oServiceData.oMetadata){this.oServiceData.oMetadata=new s(P,{async:this.bLoadMetadataAsync,user:this.sUser,password:this.sPassword,headers:this.mCustomHeaders,namespaces:m,withCredentials:this.bWithCredentials})}this.oMetadata=this.oServiceData.oMetadata;this.pAnnotationsLoaded=this.oMetadata.loaded();if(this.sAnnotationURI||!this.bSkipMetadataAnnotationParsing){var S=this._getAnnotationParser();if(!this.bSkipMetadataAnnotationParsing){if(!this.bLoadMetadataAsync){this.addAnnotationXML(this.oMetadata.sMetadataBody,!!this.sAnnotationURI)}else{this.pAnnotationsLoaded=this.oMetadata.loaded().then(function(e,t){if(this.bDestroyed){return Promise.reject()}return this.addAnnotationXML(t["metadataString"],e)}.bind(this,!!this.sAnnotationURI))}}if(this.sAnnotationURI){if(this.bLoadMetadataAsync){this.pAnnotationsLoaded=this.pAnnotationsLoaded.then(S.addUrl.bind(S,this.sAnnotationURI))}else{this.pAnnotationsLoaded=Promise.all([this.pAnnotationsLoaded,S.addUrl(this.sAnnotationURI)])}}}if(R){this.aUrlParams=this.aUrlParams.concat(n._createUrlParamsArray(R))}this.onMetadataLoaded=function(e){q._initializeMetadata();q.initialize()};this.onMetadataFailed=function(e){q.fireMetadataFailed(e.getParameters())};if(!this.oMetadata.isLoaded()){this.oMetadata.attachLoaded(this.onMetadataLoaded);this.oMetadata.attachFailed(this.onMetadataFailed)}if(this.oMetadata.isFailed()){this.refreshMetadata()}if(this.oMetadata.isLoaded()){this._initializeMetadata(true)}if(this.bJSON){if(this.sMaxDataServiceVersion==="3.0"){this.oHeaders["Accept"]="application/json;odata=fullmetadata"}else{this.oHeaders["Accept"]="application/json"}this.oHandler=C.jsonHandler}else{this.oHeaders["Accept"]="application/atom+xml,application/atomsvc+xml,application/xml";this.oHandler=C.atomHandler}this.oHeaders["MaxDataServiceVersion"]="2.0";if(this.sMaxDataServiceVersion){this.oHeaders["MaxDataServiceVersion"]=this.sMaxDataServiceVersion}this.oHeaders["DataServiceVersion"]="2.0"},metadata:{publicMethods:["create","remove","update","submitChanges","getServiceMetadata","read","hasPendingChanges","refresh","refreshMetadata","resetChanges","isCountSupported","setCountSupported","setDefaultCountMode","getDefaultCountMode","forceNoCache","setProperty","getSecurityToken","refreshSecurityToken","setHeaders","getHeaders","setUseBatch"]}});A.M_EVENTS={RejectChange:"rejectChange",MetadataLoaded:"metadataLoaded",MetadataFailed:"metadataFailed",AnnotationsLoaded:"annotationsLoaded",AnnotationsFailed:"annotationsFailed"};A.mServiceData={};A.prototype.fireRejectChange=function(e){this.fireEvent("rejectChange",e);return this};A.prototype.attachRejectChange=function(e,t,a){this.attachEvent("rejectChange",e,t,a);return this};A.prototype.detachRejectChange=function(e,t){this.detachEvent("rejectChange",e,t);return this};A.prototype._initializeMetadata=function(e){var t=this;this.bUseBatch=this.bUseBatch||this.oMetadata.getUseBatch();var a=function(e){if(e){t.metadataLoadEvent=setTimeout(a.bind(t),0)}else if(t.oMetadata){t.fireMetadataLoaded({metadata:t.oMetadata});d.debug("ODataModel fired metadataloaded")}};if(this.sAnnotationURI&&this.bLoadAnnotationsJoined){if(this.oAnnotations&&(this.oAnnotations.bInitialized||this.oAnnotations.isFailed())){a(!this.bLoadMetadataAsync)}else{this.oAnnotations.attachEventOnce("loaded",function(){a(true)})}}else{a(e)}};A.prototype.fireAnnotationsLoaded=function(e){if(!this.bLoadMetadataAsync){setTimeout(this.fireEvent.bind(this,"annotationsLoaded",e),0)}else{this.fireEvent("annotationsLoaded",e)}return this};A.prototype.attachAnnotationsLoaded=function(e,t,a){this.attachEvent("annotationsLoaded",e,t,a);return this};A.prototype.detachAnnotationsLoaded=function(e,t){this.detachEvent("annotationsLoaded",e,t);return this};A.prototype.fireAnnotationsFailed=function(e){if(!this.bLoadMetadataAsync){setTimeout(this.fireEvent.bind(this,"annotationsFailed",e),0)}else{this.fireEvent("annotationsFailed",e)}d.debug("ODataModel fired annotationsFailed");return this};A.prototype.attachAnnotationsFailed=function(e,t,a){this.attachEvent("annotationsFailed",e,t,a);return this};A.prototype.detachAnnotationsFailed=function(e,t){this.detachEvent("annotationsFailed",e,t);return this};A.prototype.fireMetadataLoaded=function(e){this.fireEvent("metadataLoaded",e);return this};A.prototype.attachMetadataLoaded=function(e,t,a){this.attachEvent("metadataLoaded",e,t,a);return this};A.prototype.detachMetadataLoaded=function(e,t){this.detachEvent("metadataLoaded",e,t);return this};A.prototype.fireMetadataFailed=function(e){this.fireEvent("metadataFailed",e);return this};A.prototype.attachMetadataFailed=function(e,t,a){this.attachEvent("metadataFailed",e,t,a);return this};A.prototype.detachMetadataFailed=function(e,t){this.detachEvent("metadataFailed",e,t);return this};A.prototype.refreshMetadata=function(){if(this.oMetadata&&this.oMetadata.refresh){this.oMetadata.refresh().catch(e=>{d.fatal(e)})}};A.prototype._createRequestUrl=function(e,t,a,s,i){var r,o,d,u="";if(e&&e.indexOf("?")!=-1){d=e.substr(e.indexOf("?")+1);e=e.substr(0,e.indexOf("?"))}o=this._normalizePath(e,t);if(!s){u=this.sServiceUrl+o}else{u=o.substr(o.indexOf("/")+1)}r=n._createUrlParamsArray(a);if(this.aUrlParams){r=r.concat(this.aUrlParams)}if(d){r.push(d)}if(r.length>0){u+="?"+r.join("&")}if(i===undefined){i=true}if(i===false){var h=Date.now();var f=u.replace(/([?&])_=[^&]*/,"$1_="+h);u=f+(f===u?(/\?/.test(u)?"&":"?")+"_="+h:"")}return u};A.prototype._loadData=function(e,t,a,s,i,r,n){var o,u=[],h=this._createRequestUrl(e,null,t,null,i||this.bCache),f=this._createRequest(h,"GET",true),c=this;function l(e,t){var s=e,i={};if(t.statusCode==204){if(a){a(null)}if(n){n(null)}c.fireRequestCompleted({url:f.requestUri,type:"GET",async:f.async,info:"Accept headers:"+c.oHeaders["Accept"],infoObject:{acceptHeaders:c.oHeaders["Accept"]},success:true});return undefined}if(!s){d.fatal("The following problem occurred: No data was retrieved by service: "+t.requestUri);c.fireRequestCompleted({url:f.requestUri,type:"GET",async:f.async,info:"Accept headers:"+c.oHeaders["Accept"],infoObject:{acceptHeaders:c.oHeaders["Accept"]},success:false});return false}if(c.bUseBatch){var r=c._getBatchErrors(e);if(r.length>0){p(r[0]);return false}if(s.__batchResponses&&s.__batchResponses.length>0){s=s.__batchResponses[0].data}else{d.fatal("The following problem occurred: No data was retrieved by service: "+t.requestUri)}}u=u.concat(s.results);if(s.__next){var o=new U(s.__next);f.requestUri=o.absoluteTo(t.requestUri).toString();y(f)}else{if(s.results){var h,l;for(l in u){h=u[l];if(u===h){continue}s.results[l]=h}}if(s.results&&!Array.isArray(s.results)){s=s.results}c._importData(s,i);if(c.sChangeKey&&i){var _=c.sChangeKey.substr(c.sChangeKey.lastIndexOf("/")+1);if(i[_]){delete c.oRequestQueue[c.sChangeKey];c.sChangeKey=null}}if(a){a(s)}c.checkUpdate(false,false,i);if(n){n(s)}c.fireRequestCompleted({url:f.requestUri,type:"GET",async:f.async,info:"Accept headers:"+c.oHeaders["Accept"],infoObject:{acceptHeaders:c.oHeaders["Accept"]},success:true})}return undefined}function p(e){if(c.bTokenHandling&&e.response){var t=c._getHeader("x-csrf-token",e.response.headers);if(!f.bTokenReset&&e.response.statusCode=="403"&&t&&t.toLowerCase()=="required"){c.resetSecurityToken();f.bTokenReset=true;y();return}}var a=c._handleError(e);if(s){s(e,o&&o.bAborted)}c.fireRequestCompleted({url:f.requestUri,type:"GET",async:f.async,info:"Accept headers:"+c.oHeaders["Accept"],infoObject:{acceptHeaders:c.oHeaders["Accept"]},success:false,errorobject:a});if(!o||!o.bAborted){a.url=f.requestUri;c.fireRequestFailed(a)}}function y(){if(c.bUseBatch){c.updateSecurityToken();var t=U.parse(f.requestUri).query;var a=c._createRequestUrl(e,null,t,c.bUseBatch);f=c._createRequest(a,"GET",true);if(c.bTokenHandling){delete f.headers["x-csrf-token"]}var s=c._createBatchRequest([f],true);o=c._request(s,l,p,C.batchHandler,undefined,c.getServiceMetadata())}else{o=c._request(f,l,p,c.oHandler,undefined,c.getServiceMetadata())}if(r){var i={abort:function(){o.bAborted=true;o.abort()}};r(i)}}if(c.bTokenHandling){delete f.headers["x-csrf-token"]}this.fireRequestSent({url:f.requestUri,type:"GET",async:f.async,info:"Accept headers:"+this.oHeaders["Accept"],infoObject:{acceptHeaders:this.oHeaders["Accept"]}});y()};A.prototype._importData=function(e,t){var a=this,s,i,r,n;if(e.results){s=[];f(e.results,function(e,i){s.push(a._importData(i,t))});return s}else{i=this._getKey(e);n=this.oData[i];if(!n){n=e;this.oData[i]=n}f(e,function(e,s){if(s&&(s.__metadata&&s.__metadata.uri||s.results)&&!s.__deferred){r=a._importData(s,t);if(Array.isArray(r)){n[e]={__list:r}}else{n[e]={__ref:r}}}else if(!s||!s.__deferred){n[e]=s}});t[i]=true;return i}};A.prototype._removeReferences=function(e){var t=this,a;if(e.results){a=[];f(e.results,function(e,s){a.push(t._removeReferences(s))});return a}else{f(e,function(t,a){if(a){if(a["__ref"]||a["__list"]){delete e[t]}}});return e}};A.prototype._restoreReferences=function(e){var t=this,a,s=[];if(e.results){a=[];f(e.results,function(e,s){a.push(t._restoreReferences(s))});return a}else{f(e,function(a,i){if(i&&i["__ref"]){var r=t._getObject("/"+i["__ref"]);o(r,"ODataModel inconsistent: "+i["__ref"]+" not found!");if(r){delete i["__ref"];e[a]=r;t._restoreReferences(r)}}else if(i&&i["__list"]){f(i["__list"],function(e,a){var r=t._getObject("/"+i["__list"][e]);o(r,"ODataModel inconsistent: "+i["__list"][e]+" not found!");if(r){s.push(r);t._restoreReferences(r)}});delete i["__list"];i.results=s;s=[]}});return e}};A.prototype.removeData=function(){this.oData={}};A.prototype.initialize=function(){var e=this.getBindings();f(e,function(e,t){t.initialize()})};A.prototype.refresh=function(e,t){if(t){this.removeData()}this._refresh(e)};A.prototype._refresh=function(e,t,a){var s=this.getBindings();f(s,function(s,i){i.refresh(e,t,a)})};A.prototype.checkUpdate=function(e,t,a,s){if(t){if(!this.sUpdateTimer){this.sUpdateTimer=setTimeout(function(){this.checkUpdate(e,false,a)}.bind(this),0)}return}if(this.sUpdateTimer){clearTimeout(this.sUpdateTimer);this.sUpdateTimer=null}var i=this.getBindings();f(i,function(t,i){if(!s||this.isMetaModelPath(i.getPath())){i.checkUpdate(e,a)}}.bind(this))};A.prototype.bindProperty=function(e,t,a){var s=new i(this,e,t,a);return s};A.prototype.bindList=function(e,t,s,i,r){var n=new a(this,e,t,s,i,r);return n};A.prototype.bindTree=function(e,t,a,s){var i=new r(this,e,t,a,s);return i};A.prototype.createBindingContext=function(e,t,a,s,i){var r=this.resolve(e,t);i=!!i;if(typeof t=="function"){s=t;t=null}if(typeof a=="function"){s=a;a=null}if(!r){if(s){s(null)}return null}var n=this._getObject(e,t),o,d,u=this;if(!i){i=this._isReloadNeeded(r,n,a)}if(!i){o=this._getKey(n);d=this.getContext("/"+o);if(s){s(d)}return d}if(s){var h=!e.startsWith("/");if(r){var f=[],c=this.createCustomParams(a);if(c){f.push(c)}this._loadData(r,f,function(a){o=a?u._getKey(a):undefined;if(o&&t&&h){var i=t.getPath();i=i.substr(1);if(u.oData[i]){u.oData[i][e]={__ref:o}}}d=u.getContext("/"+o);s(d)},function(){s(null)})}else{s(null)}}return undefined};A.prototype._isReloadNeeded=function(e,t,a){var s,i,r,n,o,d,u=[],h=[];if(!e){return false}if(!t){return true}if(a&&a["expand"]){r=a["expand"].replace(/\s/g,"");u=r.split(",")}if(u){for(i=0;i<u.length;i++){var f=u[i].indexOf("/");if(f!==-1){var c=u[i].slice(0,f);var l=u[i].slice(f+1);u[i]=[c,l]}}}for(i=0;i<u.length;i++){var p=u[i];if(Array.isArray(p)){var y=t[p[0]];var _=p[1];if(!y||y&&y.__deferred){return true}else if(y){if(y.__list&&y.__list.length>0){for(var g=0;g<y.__list.length;g++){n="/"+y.__list[g];s=this.getObject(n);o=this._isReloadNeeded(n,s,{expand:_});if(o){return true}}}else if(y.__ref){n="/"+y.__ref;s=this.getObject(n);o=this._isReloadNeeded(n,s,{expand:_});if(o){return true}}}}else if(t[p]===undefined||t[p]&&t[p].__deferred){return true}}if(a&&a["select"]){d=a["select"].replace(/\s/g,"");h=d.split(",")}for(i=0;i<h.length;i++){if(t[h[i]]===undefined){return true}}if(h.length==0){var b=this.oMetadata._getEntityTypeByPath(e);if(!b){return false}else{for(i=0;i<b.property.length;i++){if(t[b.property[i].name]===undefined){return true}}}}return false};A.prototype.destroyBindingContext=function(e){};A.prototype.createCustomParams=function(e){var t,a,s=[],i,r={expand:true,select:true};for(a in e){if(a in r){s.push("$"+a+"="+h(e[a]))}if(a=="custom"){i=e[a];for(t in i){if(t.indexOf("$")==0){d.warning("Trying to set OData parameter "+t+" as custom query option!")}else{s.push(t+"="+h(i[t]))}}}}return s.join("&")};A.prototype.bindContext=function(e,a,s){var i=new t(this,e,a,s);return i};A.prototype.setCountSupported=function(e){this.bCountSupported=e};A.prototype.isCountSupported=function(){return this.bCountSupported};A.prototype.setDefaultCountMode=function(e){this.sDefaultCountMode=e};A.prototype.getDefaultCountMode=function(){return this.sDefaultCountMode};A.prototype._getKey=function(e,t){var a,s;if(e instanceof m){a=e.getPath().substr(1)}else if(e&&e.__metadata&&e.__metadata.uri){s=e.__metadata.uri;a=s.substr(s.lastIndexOf("/")+1)}if(t){a=decodeURIComponent(a)}return a};A.prototype.getKey=function(e,t){return this._getKey(e,t)};A.prototype.createKey=function(e,t,a){var s=this.oMetadata._getEntityTypeByPath(e),i=e,r=this,d,u,h;o(s,'Could not find entity type of collection "'+e+'" in service metadata!');i+="(";if(s.key.propertyRef.length==1){d=s.key.propertyRef[0].name;o(d in t,'Key property "'+d+'" is missing in object!');h=this.oMetadata._getPropertyMetadata(s,d);u=n.formatValue(t[d],h.type);i+=a?u:encodeURIComponent(u)}else{f(s.key.propertyRef,function(e,f){if(e>0){i+=","}d=f.name;o(d in t,'Key property "'+d+'" is missing in object!');h=r.oMetadata._getPropertyMetadata(s,d);u=n.formatValue(t[d],h.type);i+=d;i+="=";i+=a?u:encodeURIComponent(u)})}i+=")";return i};A.prototype.getProperty=function(e,t,a){var s=this._getObject(e,t);if(a==null||a==undefined){return s}if(!p(s)){return s}s=y({},s);if(a==true){return this._restoreReferences(s)}else{return this._removeReferences(s)}};A.prototype._getObject=function(e,t){var a=this.isLegacySyntax()?this.oData:null,s=this.resolve(e,t),i,r,n,o,d,u;if(this.oMetadata&&s&&s.indexOf("/#")>-1){if(this.isMetaModelPath(s)){i=s.indexOf("/##");u=this.getMetaModel();if(!this.bMetaModelLoaded){return null}r=s.substr(0,i);n=s.substr(i+3);o=u.getMetaContext(r);a=u.getProperty(n,o)}else{a=this.oMetadata._getAnnotation(s)}}else{if(t){d=t.getPath();d=d.substr(1);a=this.oData[d]}if(!e){return a}var h=e.split("/"),f=0;if(!h[0]){a=this.oData;f++}while(a&&h[f]){a=a[h[f]];if(a){if(a.__ref){a=this.oData[a.__ref]}else if(a.__list){a=a.__list}else if(a.__deferred){a=undefined}}f++}}return a};A.prototype.updateSecurityToken=function(){if(this.bTokenHandling){if(!this.oServiceData.securityToken){this.refreshSecurityToken()}if(this.bTokenHandling){this.oHeaders["x-csrf-token"]=this.oServiceData.securityToken}}};A.prototype.resetSecurityToken=function(){delete this.oServiceData.securityToken;delete this.oHeaders["x-csrf-token"]};A.prototype.getSecurityToken=function(){var e=this.oServiceData.securityToken;if(!e){this.refreshSecurityToken();e=this.oServiceData.securityToken}return e};A.prototype.refreshSecurityToken=function(e,t,a){var s=this,i,r;a=a===true;i=this._createRequestUrl("/");var n=this._createRequest(i,"GET",a);n.headers["x-csrf-token"]="Fetch";function o(t,a){if(a){r=s._getHeader("x-csrf-token",a.headers);if(r){s.oServiceData.securityToken=r;s.oHeaders["x-csrf-token"]=r}else{s.resetSecurityToken();s.bTokenHandling=false}}if(e){e(t,a)}}function d(e){s.resetSecurityToken();s.bTokenHandling=false;s._handleError(e);if(t){t(e)}}return this._request(n,o,d,undefined,undefined,this.getServiceMetadata())};A.prototype._submitRequest=function(e,t,a,s,i,r){var n=this,o,d={};function u(s,u){if(t&&i){var c=n._getBatchErrors(s);if(c.length>0){h(c[0]);return false}if(s.__batchResponses&&s.__batchResponses.length>0){o=s.__batchResponses[0].data;if(!o&&s.__batchResponses[0].__changeResponses){o=s.__batchResponses[0].__changeResponses[0].data}}s=o}if(r){if(s&&s.__batchResponses){f(s.__batchResponses,function(e,t){if(t&&t.data){n._importData(t.data,d)}})}}n._handleETag(e,u,t);n._updateRequestQueue(e,t);if(n._isRefreshNeeded(e,u)){n._refresh(false,e.keys,e.entityTypes)}if(a){a(s,u)}return undefined}function h(t){if(n.bTokenHandling&&t.response){var a=n._getHeader("x-csrf-token",t.response.headers);if(!e.bTokenReset&&t.response.statusCode=="403"&&a&&a.toLowerCase()=="required"){n.resetSecurityToken();e.bTokenReset=true;c();return}}n._handleError(t);if(s){s(t)}}function c(){if(n.bTokenHandling){delete e.headers["x-csrf-token"]}if(n.bTokenHandling&&e.method!=="GET"){n.updateSecurityToken();if(n.bTokenHandling){e.headers["x-csrf-token"]=n.oServiceData.securityToken}}if(t){return n._request(e,u,h,C.batchHandler,undefined,n.getServiceMetadata())}else{return n._request(e,u,h,n.oHandler,undefined,n.getServiceMetadata())}}return c()};A.prototype._createBatchRequest=function(e,t){var a,s,i={},r={},n={},o={};r.__batchRequests=e;a=this.sServiceUrl+"/$batch";if(this.aUrlParams.length>0){a+="?"+this.aUrlParams.join("&")}c(i,this.mCustomHeaders,this.oHeaders);delete i["Content-Type"];s={headers:i,requestUri:a,method:"POST",data:r,user:this.sUser,password:this.sPassword,async:t};if(t){s.withCredentials=this.bWithCredentials}f(e,function(e,t){if(t["__changeRequests"]){f(t["__changeRequests"],function(e,t){if(t.keys&&t.method!="POST"){f(t.keys,function(e,t){n[e]=t})}else if(t.entityTypes&&t.method=="POST"){f(t.entityTypes,function(e,t){o[e]=t})}})}});s.keys=n;s.entityTypes=o;return s};A.prototype._handleETag=function(e,t,a){var s,i,r,n,o,u;if(a){o=e.data.__batchRequests;u=t.data.__batchResponses;if(u&&o){for(var h=0;h<o.length;h++){r=o[h].__changeRequests;if(u[h]){n=u[h].__changeResponses;if(r&&n){for(var f=0;f<r.length;f++){if(r[f].method=="MERGE"||r[f].method=="PUT"){s=r[f].requestUri.replace(this.sServiceUrl+"/","");if(!s.startsWith("/")){s="/"+s}i=this._getObject(s);if(i&&i.__metadata&&n[f].headers&&n[f].headers.ETag){i.__metadata.etag=n[f].headers.ETag}}}}}else{d.warning("could not update ETags for batch request: corresponding response for request missing")}}}else{d.warning("could not update ETags for batch request: no batch responses/requests available")}}else{s=e.requestUri.replace(this.sServiceUrl+"/","");if(!s.startsWith("/")){s="/"+s}i=this._getObject(s);if(i&&i.__metadata&&t.headers.ETag){i.__metadata.etag=t.headers.ETag}}};A.prototype._handleBatchErrors=function(e,t){this._getBatchErrors(t);this._handleETag()};A.prototype._getBatchErrors=function(e){var t=[],a;f(e.__batchResponses,function(e,s){if(s.message){a="The following problem occurred: "+s.message;if(s.response){a+=s.response.statusCode+","+s.response.statusText+","+s.response.body}t.push(s);d.fatal(a)}if(s.__changeResponses){f(s.__changeResponses,function(e,s){if(s.message){a="The following problem occurred: "+s.message;if(s.response){a+=s.response.statusCode+","+s.response.statusText+","+s.response.body}t.push(s);d.fatal(a)}})}});return t};A.prototype._handleError=function(e){var t={},a;var s="The following problem occurred: "+e.message;t.message=e.message;if(e.response){if(this.bTokenHandling){a=this._getHeader("x-csrf-token",e.response.headers);if(e.response.statusCode=="403"&&a&&a.toLowerCase()=="required"){this.resetSecurityToken()}}s+=e.response.statusCode+","+e.response.statusText+","+e.response.body;t.statusCode=e.response.statusCode;t.statusText=e.response.statusText;t.responseText=e.response.body}d.fatal(s);return t};A.prototype.getData=function(e,t,a){return this.getProperty(e,t,a)};A.prototype._getETag=function(e,t,a){var s,i,r;if(a){s=a}else if(t&&t.__metadata){s=t.__metadata.etag}else if(e){i=e.replace(this.sServiceUrl+"/","");r=i.indexOf("?");if(r>-1){i=i.substr(0,r)}if(this.oData.hasOwnProperty(i)){s=this.getProperty("/"+i+"/__metadata/etag")}}return s};A.prototype._createRequest=function(e,t,a,s,i){var r={},n;c(r,this.mCustomHeaders,this.oHeaders);n=this._getETag(e,s,i);if(n&&t!="GET"){r["If-Match"]=n}if(this.bJSON&&t!="DELETE"&&this.sMaxDataServiceVersion==="2.0"){r["Content-Type"]="application/json"}if(t=="MERGE"&&!this.bUseBatch){r["x-http-method"]="MERGE";t="POST"}var o={headers:r,requestUri:e,method:t,user:this.sUser,password:this.sPassword,async:a};if(s){o.data=s}if(a){o.withCredentials=this.bWithCredentials}return o};A.prototype._isRefreshNeeded=function(e,t){var a=false,s,i=[],r=this;if(!this.bRefreshAfterChange){return a}if(e.data&&Array.isArray(e.data.__batchRequests)){if(t){i=r._getBatchErrors(t.data);f(i,function(e,t){if(t.response&&t.response.statusCode=="412"){s=t.response.statusCode;return false}return true});if(s){return false}}f(e.data.__batchRequests,function(e,t){if(Array.isArray(t.__changeRequests)){f(t.__changeRequests,function(e,t){a=a||r._isRefreshNeeded(t);return!a})}return!a})}else if(e.method==="GET"){return false}else if(t&&t.statusCode=="412"){a=false}else{a=true}return a};A.prototype.update=function(e,t,a){var s,i,r,n,o,d,u,h,f,c,l,p,y=false;if(a instanceof m||arguments.length>3){d=a;s=arguments[3];i=arguments[4];r=arguments[5]}else{d=a.context||a.oContext;s=a.success||a.fnSuccess;i=a.error||a.fnError;u=a.eTag||a.sETag;r=typeof a.merge=="undefined"?a.bMerge===true:a.merge===true;y=typeof a.async=="undefined"?a.bAsync===true:a.async===true;p=a.urlParameters}o=this._createRequestUrl(e,d,p,this.bUseBatch);if(r){n=this._createRequest(o,"MERGE",y,t,u)}else{n=this._createRequest(o,"PUT",y,t,u)}e=this._normalizePath(e,d);c=this._getObject(e);n.keys={};if(c){l=this._getKey(c);n.keys[l]=true}if(this.bUseBatch){f=this._createBatchRequest([{__changeRequests:[n]}],y);h=this._submitRequest(f,this.bUseBatch,s,i,true)}else{h=this._submitRequest(n,this.bUseBatch,s,i)}return h};A.prototype.create=function(e,t,a){var s,i,r,n,o,d,u,h,f=false,c;if(a&&typeof a=="object"&&!(a instanceof m)){d=a.context;u=a.success;c=a.urlParameters;h=a.error;f=a.async===true}else{d=a;u=arguments[3];h=arguments[4]}r=this._createRequestUrl(e,d,c,this.bUseBatch);s=this._createRequest(r,"POST",f,t);e=this._normalizePath(e,d);o=this.oMetadata._getEntityTypeByPath(e);s.entityTypes={};if(o){s.entityTypes[o.entityType]=true}if(this.bUseBatch){i=this._createBatchRequest([{__changeRequests:[s]}],f);n=this._submitRequest(i,this.bUseBatch,u,h,true)}else{n=this._submitRequest(s,this.bUseBatch,u,h)}return n};A.prototype.remove=function(e,t){var a,s,i,r,n,o,d,u,h,f,c,l,p,y,_=false,g=this;if(t instanceof m||arguments[2]){a=t;r=arguments[2];n=arguments[3]}else if(t){a=t.context||t.oContext;r=t.success||t.fnSuccess;n=t.error||t.fnError;u=t.eTag||t.sETag;f=t.payload||t.oPayload;_=typeof t.async=="undefined"?t.bAsync===true:t.async===true;y=t.urlParameters}c=function(e,t){s=d.substr(d.lastIndexOf("/")+1);if(s.indexOf("?")!=-1){s=s.substr(0,s.indexOf("?"))}delete g.oData[s];delete g.mContexts["/"+s];if(r){r(e,t)}};d=this._createRequestUrl(e,a,y,this.bUseBatch);o=this._createRequest(d,"DELETE",_,f,u);e=this._normalizePath(e,a);i=this._getObject(e);o.keys={};if(i){h=this._getKey(i);o.keys[h]=true}if(this.bUseBatch){l=this._createBatchRequest([{__changeRequests:[o]}],_);p=this._submitRequest(l,this.bUseBatch,c,n,true)}else{p=this._submitRequest(o,this.bUseBatch,c,n)}return p};A.prototype.callFunction=function(e,t){var a,s,i,r,u,h,c,l,p,y,_="GET",g={},b=this;if(t&&typeof t=="object"){_=t.method?t.method:_;h=t.urlParameters;c=t.context;l=t.success;p=t.error;y=t.async===true}else{_=t;h=arguments[2];c=arguments[3];l=arguments[4];p=arguments[5];y=arguments[6]===true}u=this.oMetadata._getFunctionImportMetadata(e,_);o(u,"Function "+e+" not found in the metadata !");if(u){i=this._createRequestUrl(e,c,null,this.bUseBatch);var m=new U(i);if(u.parameter!=null){f(h,function(t,a){var s=u.parameter.filter(function(e){return e.name==t&&e.mode=="In"});if(s.length>0){var i=s[0];g[t]=n.formatValue(a,i.type)}else{d.warning("Parameter "+t+" is not defined for function call "+e+"!")}})}if(_==="GET"){return b.read(e,c,g,true,l,p)}else{f(g,function(e,t){m.addQuery(e,t)});a=this._createRequest(m.toString(),_,y);if(this.bUseBatch){s=this._createBatchRequest([{__changeRequests:[a]}],y);r=this._submitRequest(s,this.bUseBatch,l,p,true)}else{r=this._submitRequest(a,this.bUseBatch,l,p)}return r}}return undefined};A.prototype.read=function(e,t){var a,s,i,r,o,u,h,f,c,l,p,y,_,g,b,M,R;if(t&&typeof t=="object"&&!(t instanceof m)){o=t.context;u=t.urlParameters;h=t.async!==false;f=t.success;c=t.error;l=t.filters;p=t.sorters}else{o=t;u=arguments[2];h=arguments[3]!==false;f=arguments[4];c=arguments[5]}h=h!==false;R=n._createUrlParamsArray(u);_=n.createSortParams(p);if(_){R.push(_)}if(l&&!this.oMetadata){d.fatal("Tried to use filters in read method before metadata is available.")}else{M=this._normalizePath(e,o);b=this.oMetadata&&this.oMetadata._getEntityTypeByPath(M);g=v.groupFilters(l);y=n.createFilterParams(g,this.oMetadata,b);if(y){R.push(y)}}s=this._createRequestUrl(e,o,R,this.bUseBatch);a=this._createRequest(s,"GET",h);if(this.bUseBatch){r=this._createBatchRequest([a],h);i=this._submitRequest(r,this.bUseBatch,f,c,true)}else{i=this._submitRequest(a,this.bUseBatch,f,c)}return i};A.prototype.createBatchOperation=function(e,t,a,s){var i={},r,n,o,d;c(i,this.mCustomHeaders,this.oHeaders);if(e.startsWith("/")){e=e.substr(1)}if(s){r=s.sETag}if(t!="GET"){r=this._getETag(e,a,r);if(r){i["If-Match"]=r}}if(this.bJSON){if(t!="DELETE"&&t!="GET"&&this.sMaxDataServiceVersion==="2.0"){i["Content-Type"]="application/json"}}else{i["Content-Type"]="application/atom+xml"}var u={requestUri:e,method:t.toUpperCase(),headers:i};if(a){u.data=a}if(t!="GET"&&t!="POST"){if(e&&e.indexOf("/")!=0){e="/"+e}n=this._getObject(e);if(n){o=this._getKey(n);u.keys={};u.keys[o]=true}}else if(t=="POST"){var h=e;if(e.indexOf("?")!=-1){h=e.substr(0,e.indexOf("?"))}d=this.oMetadata._getEntityTypeByPath(h);if(d){u.entityTypes={};u.entityTypes[d.entityType]=true}}return u};A.prototype.addBatchReadOperations=function(e){if(!Array.isArray(e)||e.length<=0){d.warning("No array with batch operations provided!");return false}var t=this;f(e,function(e,a){if(a.method!="GET"){d.warning("Batch operation should be a GET operation!");return false}t.aBatchOperations.push(a);return true});return undefined};A.prototype.addBatchChangeOperations=function(e){if(!Array.isArray(e)||e.length<=0){return false}f(e,function(e,t){if(t.method!="POST"&&t.method!="PUT"&&t.method!="MERGE"&&t.method!="DELETE"){d.warning("Batch operation should be a POST/PUT/MERGE/DELETE operation!");return false}return true});this.aBatchOperations.push({__changeRequests:e});return undefined};A.prototype.clearBatch=function(){this.aBatchOperations=[]};A.prototype.submitBatch=function(e,t,a,s){var i,r,n=this;function o(t,a){if(e){e(t,a,n._getBatchErrors(t))}}if(!(typeof e=="function")){var u=a;var h=t;a=e;e=h;t=u}a=a!==false;if(this.aBatchOperations.length<=0){d.warning("No batch operations in batch. No request will be triggered!");return false}i=this._createBatchRequest(this.aBatchOperations,a);r=this._submitRequest(i,true,o,t,false,s);this.clearBatch();return r};A.prototype.getServiceMetadata=function(){if(this.oMetadata&&this.oMetadata.isLoaded()){return this.oMetadata.getServiceMetadata()}return undefined};A.prototype.getServiceAnnotations=function(){if(this.oAnnotations&&this.oAnnotations.getAnnotationsData){return this.oAnnotations.getAnnotationsData()}return undefined};A.prototype.submitChanges=function(e,t,a){var s,i,r=this,n,o,d,u,h,c;if(this.sChangeKey){n=this.sChangeKey.replace(this.sServiceUrl,"");h=this._getObject(n);i=h;if(p(h)){i=y({},h);if(i.__metadata){d=i.__metadata.type;u=i.__metadata.etag;delete i.__metadata;if(d||u){i.__metadata={}}if(d){i.__metadata.type=d}if(u){i.__metadata.etag=u}}f(i,function(e,t){if(t&&t.__deferred){delete i[e]}});var _=this.oMetadata._getEntityTypeByPath(n);if(_){var g=this.oMetadata._getNavigationPropertyNames(_);f(g,function(e,t){delete i[t]})}i=this._removeReferences(i)}if(a&&a.sETag){o=a.sETag}s=this._createRequest(this.sChangeKey,"MERGE",true,i,o);if(this.sUrlParams){s.requestUri+="?"+this.sUrlParams}s.keys={};if(h){c=this._getKey(h);s.keys[c]=true}this.oRequestQueue[this.sChangeKey]=s}if(l(this.oRequestQueue)){return undefined}if(this.bUseBatch){var b=[];f(this.oRequestQueue,function(e,t){delete t._oRef;var a=y({},t);t._oRef=a;a.requestUri=a.requestUri.replace(r.sServiceUrl+"/","");if(a.data._bCreate){delete a.data._bCreate}b.push(a)});s=this._createBatchRequest([{__changeRequests:b}],true);this._submitRequest(s,this.bUseBatch,e,t,true)}else{f(this.oRequestQueue,function(a,s){delete s._oRef;var i=y({},s);s._oRef=i;if(i.data&&i.data._bCreate){delete i.data._bCreate}r._submitRequest(i,this.bUseBatch,e,t,true)})}return undefined};A.prototype._updateRequestQueue=function(e,t){var a,s,i,r=this;if(t){a=e.data.__batchRequests;if(a){for(var n=0;n<a.length;n++){s=a[n].__changeRequests;if(s){for(var o=0;o<s.length;o++){i=s[o];f(this.oRequestQueue,function(e,t){if(t._oRef===i&&e!==r.sChangeKey){delete r.oRequestQueue[e];delete r.oData[e];delete r.mContexts["/"+e]}else if(r.sChangeKey&&e===r.sChangeKey){delete r.oRequestQueue[e];r.sChangeKey=null}})}}}}}else{f(this.oRequestQueue,function(t,a){if(a._oRef===e&&t!==r.sChangeKey){delete r.oRequestQueue[t];delete r.oData[t];delete r.mContexts["/"+t]}else if(r.sChangeKey&&t===r.sChangeKey){delete r.oRequestQueue[t];r.sChangeKey=null}})}};A.prototype.resetChanges=function(e,t){var a;if(this.sChangeKey){a=this.sChangeKey.replace(this.sServiceUrl,"");this._loadData(a,null,e,t)}};A.prototype.setProperty=function(e,t,a,s){var i,r={},n={},o=this._createRequestUrl(e,a),d=e.substring(0,e.lastIndexOf("/")),u,h,f={},c=false;if(!this.resolve(e,a)){return false}o=o.replace(this.sServiceUrl+"/","");o=o.substring(0,o.indexOf("/"));o=this.sServiceUrl+"/"+o;i=e.substr(e.lastIndexOf("/")+1);n=this._getObject(d,a);if(!n){return false}h=d.split("/");for(var l=h.length-1;l>=0;l--){r=this._getObject(h.join("/"),a);if(r){u=this._getKey(r);if(u){break}}h.splice(l-1,1)}if(!u){u=this._getKey(a)}if(u){f[u]=true}if(n._bCreate){n[i]=t;c=true;this.checkUpdate(false,s,f)}else{if(!this.sChangeKey){this.sChangeKey=o}if(this.sChangeKey==o){n[i]=t;c=true;this.checkUpdate(false,s,f)}else{this.fireRejectChange({rejectedValue:t,oldValue:n[i]})}}return c};A.prototype._isHeaderPrivate=function(e){switch(e.toLowerCase()){case"accept":case"accept-language":case"maxdataserviceversion":case"dataserviceversion":return true;case"x-csrf-token":return this.bTokenHandling;default:return false}};A.prototype.setHeaders=function(e){var t={},a=this;if(e){f(e,function(e,s){if(a._isHeaderPrivate(e)){d.warning("Not allowed to modify private header: "+e)}else{t[e]=s}});this.mCustomHeaders=t}else{this.mCustomHeaders={}}if(this.oAnnotations){this.oAnnotations.setHeaders(this.mCustomHeaders)}};A.prototype.getHeaders=function(){return c({},this.mCustomHeaders,this.oHeaders)};A.prototype._getHeader=function(e,t){var a;for(a in t){if(a.toLowerCase()===e.toLowerCase()){return t[a]}}return null};A.prototype.hasPendingChanges=function(){return this.sChangeKey!=null};A.prototype.updateBindings=function(e){this.checkUpdate(e)};A.prototype.forceNoCache=function(e){this.bCache=!e};A.prototype.setTokenHandlingEnabled=function(e){this.bTokenHandling=e};A.prototype.setUseBatch=function(e){this.bUseBatch=e};A.prototype.formatValue=function(e,t){return n.formatValue(e,t)};A.prototype.deleteCreatedEntry=function(e){if(e){var t=e.getPath();delete this.mContexts[t];if(t.startsWith("/")){t=t.substr(1)}delete this.oRequestQueue[t];delete this.oData[t]}};A.prototype.createEntry=function(e,t){var a={},s,i,r;if(!e.startsWith("/")){e="/"+e}var n=this.oMetadata._getEntityTypeByPath(e);if(!n){o(n,"No Metadata for collection "+e+" found");return undefined}if(typeof t==="object"&&!Array.isArray(t)){a=t}else{for(var d=0;d<n.property.length;d++){var u=n.property[d];var h=t&&t.indexOf(u.name)>-1;if(!t||h){a[u.name]=this._createPropertyValue(u.type);if(h){t.splice(t.indexOf(u.name),1)}}}if(t){o(t.length===0,"No metadata for the following properties found: "+t.join(","))}}a._bCreate=true;s=e.substring(1)+"('"+_()+"')";this.oData[s]=a;a.__metadata={type:""+n.entityType};i=this._createRequestUrl(e);r=this._createRequest(i,"POST",true,a);r.entityTypes={};r.entityTypes[n.entityType]=true;this.oRequestQueue[s]=r;return this.getContext("/"+s)};A.prototype._createPropertyValue=function(e){var t=this.oMetadata._splitName(e);var a=t.namespace;var s=t.name;if(a.toUpperCase()!=="EDM"){var i={};var r=this.oMetadata._getObjectMetadata("complexType",s,a);o(r,"Complex type "+e+" not found in the metadata !");for(var n=0;n<r.property.length;n++){var d=r.property[n];i[d.name]=this._createPropertyValue(d.type)}return i}else{return this._getDefaultPropertyValue(s,a)}};A.prototype._getDefaultPropertyValue=function(e,t){return undefined};A.prototype._normalizePath=function(e,t){if(e&&e.indexOf("?")!=-1){e=e.substr(0,e.indexOf("?"))}if(!t&&!e.startsWith("/")){e="/"+e;d.warning(this+" path "+e+" should be absolute if no Context is set")}return this.resolve(e,t)};A.prototype.setRefreshAfterChange=function(e){this.bRefreshAfterChange=e};A.prototype.isList=function(e,t){e=this.resolve(e,t);return e&&e.substr(e.lastIndexOf("/")).indexOf("(")===-1};A.prototype.isMetaModelPath=function(e){return e.indexOf("##")==0||e.indexOf("/##")>-1};A.prototype._request=function(e,t,a,s,i,r){var n;if(this.bDestroyed){return{abort:function(){}}}var o=this;function d(e){return function(){if(o.aPendingRequestHandles){var t=o.aPendingRequestHandles.indexOf(n);if(t>-1){o.aPendingRequestHandles.splice(t,1)}}if(!(n&&n.bSuppressErrorHandlerCall)){e.apply(this,arguments)}}}n=C.request(e,d(t||C.defaultSuccess),d(a||C.defaultError),s,i,r);if(e.async!==false){this.aPendingRequestHandles.push(n)}return n};A.prototype.destroy=function(){this.bDestroyed=true;if(this.aPendingRequestHandles){for(var e=this.aPendingRequestHandles.length-1;e>=0;e--){var t=this.aPendingRequestHandles[e];if(t&&t.abort){t.bSuppressErrorHandlerCall=true;t.abort()}}delete this.aPendingRequestHandles}if(this.oMetadataLoadEvent){clearTimeout(this.oMetadataLoadEvent)}if(this.oMetadataFailedEvent){clearTimeout(this.oMetadataFailedEvent)}if(this.oMetadata){this.oMetadata.detachLoaded(this.onMetadataLoaded);this.oMetadata.detachFailed(this.onMetadataFailed);if(!this.oMetadata.isLoaded()&&!this.oMetadata.hasListeners("loaded")){this.oMetadata.destroy();delete this.oServiceData.oMetadata}delete this.oMetadata}if(this.oAnnotations){this.oAnnotations.detachFailed(this.onAnnotationsFailed);this.oAnnotations.detachLoaded(this.onAnnotationsLoaded);this.oAnnotations.destroy();delete this.oAnnotations;delete this.pAnnotationsLoaded}M.prototype.destroy.apply(this,arguments)};A.prototype._getAnnotationParser=function(e){if(!this.oAnnotations){this.oAnnotations=new R({annotationData:e,url:null,metadata:this.oMetadata,async:this.bLoadMetadataAsync,headers:this.mCustomHeaders});this.oAnnotations.attachFailed(this.onAnnotationsFailed,this);this.oAnnotations.attachLoaded(this.onAnnotationsLoaded,this)}return this.oAnnotations};A.prototype.onAnnotationsFailed=function(e){this.fireAnnotationsFailed(e.getParameters())};A.prototype.onAnnotationsLoaded=function(e){this.fireAnnotationsLoaded(e.getParameters())};A.prototype.addAnnotationUrl=function(e){var t=[].concat(e),a=[],s=[],i=[],r=this;f(t,function(e,t){var i=t.indexOf("$metadata");if(i>=0){if(i==0){t=r.sServiceUrl+"/"+t}a.push(t)}else{s.push(t)}});return this.oMetadata._addUrl(a).then(function(e){return Promise.all(e.map(function(e){i=i.concat(e.entitySets);return r.addAnnotationXML(e["metadataString"])}))}).then(function(){return r._getAnnotationParser().addUrl(s)}).then(function(e){return{annotations:e.annotations,entitySets:i}})};A.prototype.addAnnotationXML=function(e,t){return new Promise(function(a,s){this._getAnnotationParser().setXML(null,e,{success:a,error:s,fireEvents:!t})}.bind(this))};A.prototype.getMetaModel=function(){var e=this;if(!this.oMetaModel){this.oMetaModel=new T(this.oMetadata,this.oAnnotations,this);this.oMetaModel.loaded().then(function(){e.bMetaModelLoaded=true;e.checkUpdate(false,false,null,true)}).catch(()=>{})}return this.oMetaModel};A.prototype.annotationsLoaded=function(){return this.oMetadata.isLoaded()&&(!this.oAnnotations||this.oAnnotations.isLoaded())?null:this.pAnnotationsLoaded};return A});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/ODataTreeBinding", ["./CountMode","sap/base/Log","sap/base/util/each","sap/ui/model/TreeBinding"],function(e,t,s,o){"use strict";var i=o.extend("sap.ui.model.odata.ODataTreeBinding",{constructor:function(e,s,i,r,n){o.apply(this,arguments);this.bPendingRequest=false;this.oFinalLengths={};this.oLengths={};this.oKeys={};this.bNeedsUpdate=false;this.bHasTreeAnnotations=this._hasTreeAnnotations();this.oRootContext=null;this.iNumberOfExpandedLevels=n&&n.numberOfExpandedLevels;this.sCountMode=n&&n.countMode||this.oModel.sDefaultCountMode;if(!this.bHasTreeAnnotations){if(!n||!n.navigation){t.error("A navigation paths parameter object has to be defined");this.oNavigationPaths={}}else{this.oNavigationPaths=n.navigation}}else{t.warning("Tree hierarchy annotations are deprecated and may not work correctly with the sap.ui.model.odata.ODataModel."+" Please use the sap.ui.model.odata.v2.ODataModel (since version 1.28) instead which fully supports hierarchy annotations.")}}});i.prototype.getRootContexts=function(e,t,s){var o=null,i={numberOfExpandedLevels:this.iNumberOfExpandedLevels},r=[],n=true,a=this;if(this.bHasTreeAnnotations){i.level=0;if(!this.bDisplayRootNode){i.level=1}}else{o=this.oModel.resolve(this.getPath(),this.getContext());i.navPath=this._getNavPath(this.getPath());if(i.numberOfExpandedLevels>0){var h=o;for(var l=0;l<i.numberOfExpandedLevels;l++){var f=this._getNavPath(h);i.navPath+="/"+f;h+="/"+f}}var u=this.oModel.isList(this.sPath,this.getContext());if(u){this.bDisplayRootNode=true}else{n=false;this.oModel.createBindingContext(o,null,{expand:i.navPath},function(e){r=[e];if(a.oRootContext!==e){a.oRootContext=e;a._processODataObject(e.getObject(),o,i.navPath);a.bNeedsUpdate=true}},this.bRefresh);this.bRefresh=false}}if(n){if(!this.bDisplayRootNode){r=this._getContextsForNodeId(o,0,1,0,i)}else{r=this._getContextsForNodeId(o,e,t,s,i)}}if(!this.bDisplayRootNode&&r.length>0){this.oRootContext=r[0];r=this.getNodeContexts(r[0],e,t,s)}return r};i.prototype.getNodeContexts=function(e,t,s,o){var i,r={};if(this.bHasTreeAnnotations){var n=e.getProperty(this.oTreeProperties["hierarchy-drill-state-for"]);if(n=="leaf"){return[]}i=e.getProperty(this.oTreeProperties["hierarchy-node-for"]);r.level=parseInt(e.getProperty(this.oTreeProperties["hierarchy-level-for"]))+1}else{var a=this._getNavPath(e.getPath());if(!a){return[]}i=this.oModel.resolve(a,e);r.navPath=this.oNavigationPaths[a]}return this._getContextsForNodeId(i,t,s,o,r)};i.prototype.hasChildren=function(e){if(!e){return false}if(this.bHasTreeAnnotations){var t=e.getProperty(this.oTreeProperties["hierarchy-drill-state-for"]);return t==="expanded"||t==="collapsed"}else{var s=this._getNavPath(e.getPath());var o=e.getPath()+"/"+s;return s&&this.oLengths[o]>0}};i.prototype.getChildCount=function(e){if(this.bHasTreeAnnotations){var t;if(!e){if(this.oRootContext){t=this.oRootContext.getProperty(this.oTreeProperties["hierarchy-node-for"])}else{t="000000"}}else{t=e.getProperty(this.oTreeProperties["hierarchy-node-for"])}return this.oLengths[t]}else{if(!e){return this.oLengths[this.getPath()]}return this.oLengths[e.getPath()+"/"+this._getNavPath(e.getPath())]}};i.prototype._getContextsForNodeId=function(e,t,s,o,i){var r=[],n,a;if(!t){t=0}if(!s){s=this.oModel.iSizeLimit}if(!o){o=0}if(this.bHasTreeAnnotations){if(e==null){e="000000"}if(i.level==0){i.level++}}if(this.oFinalLengths[e]&&this.oLengths[e]<s){s=this.oLengths[e]}if(this.oKeys[e]){for(var h=t;h<t+s;h++){a=this.oKeys[e][h];if(!a){break}r.push(this.oModel.getContext("/"+a))}}n=r.length!=s&&!(this.oFinalLengths[e]&&r.length>=this.oLengths[e]);if(this.oModel.getServiceMetadata()){if(!this.bPendingRequest&&n){var l=[];if(this.bHasTreeAnnotations){if(i.numberOfExpandedLevels>0){var f=i.level+i.numberOfExpandedLevels;l.push("$filter="+this.oTreeProperties["hierarchy-level-for"]+" le '0"+f+"'")}else{l.push("$filter="+this.oTreeProperties["hierarchy-level-for"]+" eq '0"+i.level+"' and "+this.oTreeProperties["hierarchy-parent-node-for"]+" eq '"+e+"'")}}else if(i.navPath){l.push("$expand="+i.navPath)}this._loadSubNodes(e,t,s,o,l,i)}}return r};i.prototype._getCountForNodeId=function(e,s,o,i,r){var n=this;var a=[];function h(t){n.oFinalLengths[e]=true;n.oLengths[e]=parseInt(t)}function l(e){var s="Request for $count failed: "+e.message;if(e.response){s+=", "+e.response.statusCode+", "+e.response.statusText+", "+e.response.body}t.warning(s)}var f;if(this.bHasTreeAnnotations){f=this.oModel.resolve(this.getPath(),this.getContext());a.push("$filter="+this.oTreeProperties["hierarchy-parent-node-for"]+" eq '"+e+"'")}else{f=e}if(f){var u=this.oModel._createRequestUrl(f+"/$count",null,a);var d=this.oModel._createRequest(u,"GET",false);d.headers["Accept"]="text/plain, */*;q=0.5";this.oModel._request(d,h,l,undefined,undefined,this.oModel.getServiceMetadata())}};i.prototype._loadSubNodes=function(t,s,o,i,r,n){var a=this,h=false;if(s||o){r.push("$skip="+s+"&$top="+o)}if(!a.bHasTreeAnnotations&&!this.oFinalLengths[t]&&(this.sCountMode==e.Inline||this.sCountMode==e.Both)){r.push("$inlinecount=allpages");h=true}function l(e){var o,i;if(e.results){if(!a.bHasTreeAnnotations){if(h&&e.__count){a.oLengths[t]=parseInt(e.__count);a.oFinalLengths[t]=true}else if(a.oModel.isCountSupported()){a._getCountForNodeId(t)}a.oKeys[t]=[];for(i=0;i<e.results.length;i++){o=e.results[i];var r=a.oModel._getKey(o);a._processODataObject(o,"/"+r,n.navPath);a.oKeys[t][i+s]=r}}else{var l={};for(i=0;i<e.results.length;i++){o=e.results[i];t=o[a.oTreeProperties["hierarchy-parent-node-for"]];if(i==0){l[t]=s}else if(l[t]==undefined){l[t]=0}if(!(t in a.oKeys)){a.oKeys[t]=[];a._getCountForNodeId(t)}a.oKeys[t][l[t]]=a.oModel._getKey(o);l[t]++}}}else{a.oKeys[null]=a.oModel._getKey(e);if(!a.bHasTreeAnnotations){a._processODataObject(e,t,n.navPath)}}a.oRequestHandle=null;a.bPendingRequest=false;a.bNeedsUpdate=true}function f(){a.fireDataReceived()}function u(e){a.oRequestHandle=null;a.bPendingRequest=false;a.fireDataReceived()}function d(e){a.oRequestHandle=e}if(t){if(!this.oFinalLengths[t]){this.bPendingRequest=true;this.fireDataRequested();var p;if(this.bHasTreeAnnotations){p=this.oModel.resolve(this.getPath(),this.getContext())}else{p=t}this.oModel._loadData(p,r,l,u,false,d,f)}}};i.prototype.resetData=function(e){if(e){var t=e.getPath();delete this.oKeys[t];delete this.oLengths[t];delete this.oFinalLengths[t]}else{this.oKeys={};this.oLengths={};this.oFinalLengths={};this.oRootContext=null}};i.prototype.refresh=function(e,t,o){var i=false;if(!e){if(o){var r=this.oModel.resolve(this.sPath,this.oContext);var n=this.oModel.oMetadata._getEntityTypeByPath(r);if(n&&n.entityType in o){i=true}}if(t&&!i){s(this.oKeys,function(e,o){s(o,function(e,s){if(s in t){i=true;return false}return true});if(i){return false}return true})}if(!t&&!o){i=true}}if(e||i){this.resetData();this.bNeedsUpdate=false;this.bRefresh=true;this._fireChange()}};i.prototype.filter=function(e){t.warning("Filtering is currently not possible in the ODataTreeBinding");return this};i.prototype.checkUpdate=function(e,t){var o=false;if(!e){if(this.bNeedsUpdate||!t){o=true}else{s(this.oKeys,function(e,i){s(i,function(e,s){if(s in t){o=true;return false}return true});if(o){return false}return true})}}if(e||o){this.bNeedsUpdate=false;this._fireChange()}};i.prototype._getNavPath=function(e){var t=this.oModel.resolve(e,this.getContext());if(!t){return undefined}var s=t.split("/"),o=s[s.length-1],i;var r=o.split("(")[0];if(r&&this.oNavigationPaths[r]){i=this.oNavigationPaths[r]}return i};i.prototype._processODataObject=function(e,t,s){var o=[],i=this;if(s&&s.indexOf("/")>-1){o=s.split("/");s=o[0];o.splice(0,1)}var r=this.oModel._getObject(t);if(Array.isArray(r)){this.oKeys[t]=r;this.oLengths[t]=r.length;this.oFinalLengths[t]=true}if(s&&e[s]){if(Array.isArray(r)){r.forEach(function(e){var t=i.getModel().getData("/"+e);i._processODataObject(t,"/"+e+"/"+s,o.join("/"))})}else if(typeof r==="object"){i._processODataObject(e,t+"/"+s,o.join("/"))}}};i.prototype._hasTreeAnnotations=function(){var e=this.oModel,o=e.oMetadata,i=e.resolve(this.getPath(),this.getContext()),r=o._getEntityTypeByPath(i),n=o.mNamespaces["sap"],a=this;this.oTreeProperties={"hierarchy-level-for":false,"hierarchy-parent-node-for":false,"hierarchy-node-for":false,"hierarchy-drill-state-for":false};if(!r){t.fatal("EntityType for path "+i+" could not be found.");return false}s(r.property,function(e,t){if(!t.extensions){return true}s(t.extensions,function(e,s){var o=s.name;if(s.namespace===n&&o in a.oTreeProperties&&!a.oTreeProperties[o]){a.oTreeProperties[o]=t.name}});return true});var h=false;s(this.oTreeProperties,function(e,t){if(!t){h=true;return false}return true});return!h};return i});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/api/common/ComponentInstantiation", ["sap/base/Log","sap/base/util/deepExtend","sap/ushell/ApplicationType","sap/ushell/Container","sap/ushell/UI5ComponentType","sap/ushell/utils","sap/ushell/utils/UrlParsing"],(e,t,a,n,o,i,s)=>{"use strict";class r{async createComponentInstance(e,t,a){const i=await n.getServiceAsync("Ui5ComponentLoader");let s=await this.createComponentInstantiationData(e,t);s=await i.modifyComponentProperties(s,o.Application);s.loadDefaultDependencies=false;if(a){return new Promise((e,t)=>{a.runAsOwner(()=>{this.#e(s,i).then(e).catch(t)})})}return this.#e(s,i)}async#e(t,a){try{const e=await a.instantiateComponent(t);return e.componentHandle.getInstance()}catch(t){e.error(`Cannot create UI5 component: ${t.toString()}`,t.stack,"sap.ushell.api.common.ComponentInstantiation");throw t}}async createComponentInstantiationData(e,t){const o={componentData:t};if(o.componentData){delete o.componentData.startupParameters;delete o.componentData.config;delete o.componentData["sap-xapp-state"]}const r=s.constructShellHash(s.parseShellHash(e));if(!r){throw new Error("Navigation intent invalid!")}const p=await n.getServiceAsync("NavTargetResolutionInternal");const c=await p.resolveHashFragment(`#${r}`);if(c.applicationType===a.URL.type&&c.appCapabilities&&c.appCapabilities.appFrameworkId==="UI5"&&n.inAppRuntime()){const[t]=await i.requireAsync(["sap/ushell/appRuntime/ui5/services/AppLifeCycleAgent"]);let a;try{const e=new URL(c.url);const t=new URLSearchParams(e.search);a=t.get("sap-ui-app-id")}catch(e){a=c.url.match(/[?&]sap-ui-app-id=([^&]+)/)[1]}let n=await t.getAppInfo(a);if(n.hasOwnProperty("oResolvedHashFragment")){n=n.oResolvedHashFragment}n=this.#t(n,o);if(n.url&&e.indexOf("?")>0){n.url+=`?${e.split("?")[1]}`}return this.#a({ui5ComponentName:a,applicationDependencies:n,url:n.url},o)}else if(c.applicationType!==a.URL.type&&!/^SAPUI5\.Component=/.test(c.additionalInformation)){throw new Error("The resolved target mapping is not of type UI5 component.")}return this.#a(c,o)}async#a(t,a){try{t=this.#t(t,a);t.loadDefaultDependencies=false;const e=await n.getServiceAsync("Ui5ComponentLoader");return e.createComponentData(t)}catch(t){e.error("Cannot get UI5 component data:",t,"sap.ushell.api.common.ComponentInstantiation");throw t}}#t(e,a){e=t({},e,a);if(!e.ui5ComponentName){if(e.additionalInformation){e.ui5ComponentName=e.additionalInformation.replace(/^SAPUI5\.Component=/,"")}else if(e.name){e.ui5ComponentName=e.name}}return e}}return new r});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncher/Component", ["sap/ui/core/mvc/XMLView","sap/ui/core/UIComponent"],(e,t)=>{"use strict";return t.extend("sap.ushell.components.tiles.cdm.applauncher.Component",{metadata:{interfaces:["sap.ui.core.IAsyncContentCreation"]},createContent:function(){const t=this.getComponentData();const o=t.properties.tilePersonalization||{};const n=t.startupParameters;if(n&&n["sap-system"]){o["sap-system"]=n["sap-system"][0]}return e.create({viewName:"sap.ushell.components.tiles.cdm.applauncher.StaticTile",viewData:{properties:t.properties,configuration:o}}).then(e=>{this._oController=e.getController();e.getContent()[0].bindTileContent({path:"/properties",factory:this._oController._getTileContent.bind(this._oController)});return e})},tileSetVisualProperties:function(e){if(this._oController){this._oController.updatePropertiesHandler(e)}},tileRefresh:function(){},tileSetVisible:function(e){},tileSetEditMode:function(e){if(this._oController){this._oController.editModeHandler(e)}},tileSetSizeBehavior:function(e){if(this._oController){this._oController.sizeBehaviorHandler(e)}},exit:function(){this._oController=null}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncher/StaticTile.controller", ["sap/ushell/library","sap/ui/core/mvc/Controller","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/ui/model/json/JSONModel","sap/m/library","sap/base/Log","sap/ushell/utils/UrlParsing","sap/ushell/EventHub","sap/ushell/Container","sap/ushell/navigation/NavigationState"],(e,t,o,i,n,r,s,a,p,l,c)=>{"use strict";const g=r.GenericTileScope;const d=r.GenericTileMode;const h=e.DisplayFormat;const f=e.AppType;return t.extend("sap.ushell.components.tiles.cdm.applauncher.StaticTile",{_aDoables:[],_getConfiguration:function(){const e=this.getView().getViewData();e.properties.configSizeBehavior=o.last("/core/home/sizeBehavior");e.properties.wrappingType=o.last("/core/home/wrappingType");return e},onInit:function(){const e=this.getView();const t=new n;t.setData(this._getConfiguration());e.setModel(t);this._aDoables.push(o.on("/core/home/sizeBehavior").do(e=>{t.setProperty("/properties/configSizeBehavior",e)}));const i=this.getView().getViewData();const r=i.properties;r.mode=r.mode||(r.icon?"ContentMode":"HeaderMode");if(r.displayFormat===h.Compact&&r.title&&r.targetURL){t.setProperty("/properties/mode",d.LineMode)}switch(r.displayFormat){case h.Flat:t.setProperty("/properties/frameType","OneByHalf");break;case h.FlatWide:t.setProperty("/properties/frameType","TwoByHalf");break;case h.StandardWide:t.setProperty("/properties/frameType","TwoByOne");break;default:{t.setProperty("/properties/frameType","OneByOne")}}const s=o.last("/core/contentProviders/providerInfo/enabled");const a=o.last("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations");t.setProperty("/properties/showContentProviderInfoInTooltip",s);t.setProperty("/properties/showContentProviderInfoOnVisualizations",s&&a);if(s){this._aDoables.push(o.on("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations").do(e=>{t.setProperty("/properties/showContentProviderInfoOnVisualizations",e)}))}},onExit:function(){this._aDoables.forEach(e=>{e.off()});this._aDoables=[]},editModeHandler:function(e){const t=e?g.ActionMore:g.Display;this.getView().getModel().setProperty("/properties/scope",t)},sizeBehaviorHandler:function(e){this.getView().getModel().setProperty("/properties/customSizeBehavior",e)},onPress:function(e){if(c.isNavigationRunning()){return}const t=this.getView().getViewData().properties;if(e.getSource().getScope&&e.getSource().getScope()===g.Display){const e=this._createTargetUrl();if(!e){return}p.emit("UITracer.trace",{reason:"LaunchApp",source:"Tile",data:{targetUrl:e}});if(e[0]==="#"){hasher.setHash(e)}else{const n=o.last("/core/shell/enableRecentActivity")&&o.last("/core/shell/enableRecentActivityLogging");if(n){const e={title:t.title,appType:f.URL,url:t.targetURL,appId:t.targetURL};l.getRendererInternal("fiori2").logRecentActivity(e)}i.openURL(e,"_blank")}}},updatePropertiesHandler:function(e){const t=this.getView().getContent()[0];const o=t.getTileContent()[0];if(typeof e.title!=="undefined"){t.setHeader(e.title)}if(typeof e.subtitle!=="undefined"){t.setSubheader(e.subtitle)}if(typeof e.icon!=="undefined"){o.getContent().setSrc(e.icon)}if(typeof e.info!=="undefined"){o.setFooter(e.info)}},_createTargetUrl:function(){let e=this.getView().getViewData().properties.targetURL;const t=this.getView().getViewData().configuration["sap-system"];let o;if(e&&t){if(a.isIntentUrl(e)){o=a.parseShellHash(e);if(!o.params){o.params={}}o.params["sap-system"]=t;e=`#${a.constructShellHash(o)}`}else{e+=`${e.indexOf("?")<0?"?":"&"}sap-system=${t}`}}return e},_getLeanUrl:function(){return i.getLeanURL(this._createTargetUrl())},_getTileContent:function(e,t){const o=t.getPath().split("/");o.pop();const i=t.getProperty(o.join("/"));if(i!==this.oLastBindingObject||this.oTileContent&&this.oTileContent.bIsDestroyed){this.oLastBindingObject=i;this.oTileContent=this.getView().byId(i.icon?"imageTileContent":"standardTileContent").clone()}return this.oTileContent},_getCurrentProperties:function(){const e=this.getView().getContent()[0];const t=e.getTileContent()[0];const i=o.last("/core/home/sizeBehavior");return{title:e.getHeader(),subtitle:e.getSubheader(),info:t.getFooter(),icon:t.getContent().getSrc(),mode:e.getMode(),configSizeBehavior:i}}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncher/StaticTile.view", ["sap/ui/core/mvc/View","sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent"],(e,t,r,i)=>{"use strict";return e.extend("sap.ushell.components.tiles.cdm.applauncher.StaticTile",{getControllerName:function(){return"sap.ushell.components.tiles.cdm.applauncher.StaticTile"},createContent:function(e){this.setHeight("100%");this.setWidth("100%");if(this.getContent().length===1){return this.getContent()[0]}return new t({mode:"{/properties/mode}",header:"{/properties/title}",scope:"{/properties/scope}",subheader:"{/properties/subtitle}",sizeBehavior:"{= ${/properties/customSizeBehavior} || ${/properties/configSizeBehavior}}",frameType:"{/properties/frameType}",wrappingType:"{/properties/wrappingType}",url:{path:"/properties/targetURL",formatter:e._getLeanUrl.bind(e)},tileContent:new i({footer:"{/properties/info}",content:new r({src:"{/properties/icon}"})}),press:[e.onPress,e],additionalTooltip:"{/properties/contentProviderLabel}"})}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncherdynamic/Component", ["sap/ui/core/mvc/XMLView","sap/ui/core/UIComponent"],(e,t)=>{"use strict";return t.extend("sap.ushell.components.tiles.cdm.applauncherdynamic.Component",{metadata:{interfaces:["sap.ui.core.IAsyncContentCreation"]},createContent:function(){const t=this.getComponentData();const r=t.properties||{};const i=r.tilePersonalization||{};const o=r.indicatorDataSource;if(o&&o.path){i.serviceUrl=o.path;i.serviceRefreshInterval=o.refresh}else if(o&&o.url){i.serviceUrl=o.url;i.serviceRefreshInterval=o.refreshInterval}const s=t.startupParameters;if(s&&s["sap-system"]&&s["sap-system"][0]){i["sap-system"]=s["sap-system"][0]}if(i.serviceUrl&&i.serviceUrl.charAt(0)!=="/"&&r.dataSource&&r.dataSource.uri){let e=r.dataSource.uri;if(i["sap-system"]){if(e.charAt(e.length-1)==="/"){e=e.slice(0,e.length-1)}e+=`;o=${i["sap-system"]}`}if(e.charAt(e.length-1)!=="/"){e+="/"}e+=i.serviceUrl;i.serviceUrl=e}return e.create({viewName:"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile",viewData:{properties:r,configuration:i}}).then(e=>{this._oController=e.getController();this._oController.visibleHandler(this.bIsVisible);return e})},tileSetVisualProperties:function(e){if(this._oController){this._oController.updateVisualPropertiesHandler(e)}},tileRefresh:function(){if(this._oController){this._oController.refreshHandler()}},tileSetVisible:function(e){if(this._oController){this._oController.visibleHandler(e)}else{this.bIsVisible=e}},tileSetEditMode:function(e){if(this._oController){this._oController.editModeHandler(e)}},tileSetSizeBehavior:function(e){if(this._oController){this._oController.sizeBehaviorHandler(e)}},tileSetPreview:function(e){if(this._oController){this._oController.previewHandler(e)}},exit:function(){this._oController=null}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncherdynamic/DynamicTile.controller", ["sap/ui/core/mvc/Controller","sap/ushell/components/tiles/utils","sap/ui/core/format/NumberFormat","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/ui/model/json/JSONModel","sap/m/library","sap/ushell/library","sap/base/Log","sap/base/util/merge","sap/ushell/utils/DynamicTileRequest","sap/ushell/utils","sap/ushell/utils/UrlParsing","sap/ushell/EventHub","sap/ushell/Container","sap/ushell/navigation/NavigationState"],(e,t,i,r,o,s,n,a,l,u,p,c,f,d,h,m)=>{"use strict";const g=n.GenericTileScope;const b=n.DeviationIndicator;const v=n.ValueColor;const y=n.FrameType;const _=a.DisplayFormat;const D=a.AppType;const R="sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile";const w="<RESET>";const P={title:"",subtitle:"",icon:"",info:"",infoState:v.Neutral,targetURL:"",number_value:"...",number_unit:"",number_factor:"",number_state_arrow:b.None,number_value_state:v.Neutral};return e.extend(R,{_aDoables:[],timer:null,iLastTimeoutStart:0,oDataRequest:null,bShouldNotRefreshDataAfterInit:false,_getConfiguration:function(e){const t={};let i;t.configuration=e.configuration;t.properties=e.properties;t.properties.info=t.properties.info||P.info;t.properties.number_value=t.properties.preview?1234:P.number_value;t.properties.number_value_state=P.number_value_state;t.properties.number_state_arrow=P.number_state_arrow;t.properties.number_factor=P.number_factor;t.properties.number_unit=t.properties.numberUnit||P.number_unit;const o=t.configuration["sap-system"];let s=t.properties.targetURL;if(s&&o){if(f.isIntentUrl(s)){i=f.parseShellHash(s);if(!i.params){i.params={}}i.params["sap-system"]=o;s=`#${f.constructShellHash(i)}`}else{s+=`${s.indexOf("?")<0?"?":"&"}sap-system=${o}`}t.properties.targetURL=s}t.properties.configSizeBehavior=r.last("/core/home/sizeBehavior");t.properties.wrappingType=r.last("/core/home/wrappingType");switch(t.properties.displayFormat){case _.Flat:t.properties.frameType=y.OneByHalf;break;case _.FlatWide:t.properties.frameType=y.TwoByHalf;break;case _.StandardWide:t.properties.frameType=y.TwoByOne;break;default:{t.properties.frameType=y.OneByOne}}t.originalProperties=u({},e.properties);return t},onInit:function(){const e=this.getView();const t=new s;const i=e.getViewData();const o=i.properties;t.setData(this._getConfiguration(i));const n=r.last("/core/contentProviders/providerInfo/enabled");const a=r.last("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations");t.setProperty("/properties/showContentProviderInfoInTooltip",n);t.setProperty("/properties/showContentProviderInfoOnVisualizations",n&&a);if(n){this._aDoables.push(r.on("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations").do(e=>{t.setProperty("/properties/showContentProviderInfoOnVisualizations",e)}))}e.setModel(t);this._aDoables.push(r.on("/core/home/sizeBehavior").do(e=>{t.setProperty("/properties/configSizeBehavior",e)}));if(o.preview){this.previewHandler(true)}},refreshHandler:function(){this.loadData(0,true)},visibleHandler:function(e){if(e){if(!this.oDataRequest||this.timer===null){this.initRequestInterval()}}else{this.stopRequests()}},editModeHandler:function(e){const t=e?g.ActionMore:g.Display;this.getView().getModel().setProperty("/properties/scope",t)},sizeBehaviorHandler:function(e){this.getView().getModel().setProperty("/properties/customSizeBehavior",e)},previewHandler:function(e){const t=this.getView();const i=t.getModel();if(e){const e=t.getViewData();const r=u({},e,{properties:{preview:true}});const o=this._getConfiguration(r);const s=u({},o.properties,{customSizeBehavior:i.getProperty("/properties/customSizeBehavior"),configSizeBehavior:i.getProperty("/properties/configSizeBehavior")});i.setProperty("/properties",s);return}i.setProperty("/properties/preview",false)},updateVisualPropertiesHandler:function(e){const t=this.getView().getModel().getProperty("/properties");const i=this.getView().getModel().getProperty("/originalProperties");if(c.isDefined(e.title)){t.title=e.title;i.title=e.title}if(c.isDefined(e.subtitle)){t.subtitle=e.subtitle;i.subtitle=e.subtitle}if(c.isDefined(e.icon)){t.icon=e.icon;i.icon=e.icon}if(c.isDefined(e.targetURL)){t.targetURL=e.targetURL;i.targetURL=e.targetURL}if(c.isDefined(e.info)){t.info=e.info;i.info=e.info}this.getView().getModel().refresh()},stopRequests:function(){if(this.timer){clearTimeout(this.timer);this.timer=null}if(this.oDataRequest){this.oDataRequest.abort()}},onPress:function(e){if(m.isNavigationRunning()){return}if(e.getSource().getScope&&e.getSource().getScope()===g.Display){const e=this.getView().getModel().getProperty("/properties/targetURL");const t=this.getView().getModel().getProperty("/properties/title");if(!e){return}d.emit("UITracer.trace",{reason:"LaunchApp",source:"Tile",data:{targetUrl:e}});if(e[0]==="#"){hasher.setHash(e)}else{const i=r.last("/core/shell/enableRecentActivity")&&r.last("/core/shell/enableRecentActivityLogging");if(i){const i={title:t,appType:D.URL,url:e,appId:e};h.getRendererInternal("fiori2").logRecentActivity(i)}o.openURL(e,"_blank")}}},initRequestInterval:function(){const e=this.getView().getModel();let t=e.getProperty("/configuration/serviceRefreshInterval");if(!t||t==="0"){t=0;if(this.oDataRequest){this.bShouldNotRefreshDataAfterInit=true}}else if(t<10){const i=e.getProperty("/configuration/serviceUrl");l.warning(`Refresh Interval ${t} seconds for service URL ${i} is less than 10 seconds, which is not supported. Increased to 10 seconds automatically.`,null,R);t=10}this.loadData(t,false)},loadData:function(e,t){if(!t&&this.bShouldNotRefreshDataAfterInit){return}const i=this.getView().getModel();const r=i.getProperty("/properties/preview");const o=i.getProperty("/configuration/serviceUrl");if(r){l.info("Tile in preview mode",R);return}if(!o){l.error("No service URL given!",R);this._setTileIntoErrorState();return}const s=e*1e3-(Date.now()-this.iLastTimeoutStart);if(!t&&!this.timer&&s>0){l.info(`Started timeout to call ${o} again in ${Math.ceil(s/1e3)} seconds`,null,R);this.timer=setTimeout(this.loadData.bind(this,e,false),c.sanitizeTimeoutDelay(s));return}if(!this.oDataRequest||this.oDataRequest.sUrl!==o){if(this.oDataRequest){this.oDataRequest.destroy()}const e=i.getProperty("/properties/contentProviderId");const t={dataSource:i.getProperty("/properties/dataSource")};this.oDataRequest=new p(o,this.successHandlerFn.bind(this),this.errorHandlerFn.bind(this),e,t)}else if(this.oDataRequest){this.oDataRequest.refresh()}if(e>0){l.info(`Started timeout to call ${o} again in ${e} seconds`,null,R);this.iLastTimeoutStart=Date.now();this.timer=setTimeout(this.loadData.bind(this,e,false),c.sanitizeTimeoutDelay(e*1e3))}},successHandlerFn:function(e){this.updatePropertiesHandler(e)},errorHandlerFn:function(e){let t=e&&e.message?e.message:e;const i=this.getView().getModel().getProperty("/configuration/serviceUrl");if(e.statusText==="Abort"||e.aborted===true){l.info(`Data request from service ${i} was aborted`,null,R);this.bShouldNotRefreshDataAfterInit=false}else{if(e.response){t+=` - ${e.response.statusCode} ${e.response.statusText}`}l.error(`Failed to update data via service ${i}: ${t}`,null,R);this._setTileIntoErrorState()}},_setTileIntoErrorState:function(){const e=t.getResourceBundle();this.updatePropertiesHandler({number:"???",info:e.getText("dynamic_data.error")})},_normalizeNumber:function(e,t,r,o){let s;if(isNaN(e)){s=e}else{const t=i.getFloatInstance({maxFractionDigits:o});if(!r){const t=Math.abs(e);if(t>=1e9){r="B";e/=1e9}else if(t>=1e6){r="M";e/=1e6}else if(t>=1e3){r="K";e/=1e3}}s=t.format(e)}let n=s;const a=n[t-1];t-=a==="."||a===","?1:0;n=n.substring(0,t);return{displayNumber:n,numberFactor:r}},updatePropertiesHandler:function(e){const t=this.getView().getModel().getProperty("/originalProperties");const o=this.getView().getModel().getProperty("/properties");const s=[{dataField:"title",modelField:"title"},{dataField:"subtitle",modelField:"subtitle"},{dataField:"icon",modelField:"icon"},{dataField:"info",modelField:"info"},{dataField:"infoState",modelField:"infoState"},{dataField:"targetURL",modelField:"targetURL"},{dataField:"stateArrow",modelField:"number_state_arrow"},{dataField:"numberState",modelField:"number_value_state"},{dataField:"numberUnit",modelField:"number_unit"},{dataField:"numberFactor",modelField:"number_factor"}];s.forEach(i=>{const r=e[i.dataField];const s=!r;const n=P[i.modelField];if(s){o[i.modelField]=t[i.modelField]||n}else if(this._isResetValue(r)){o[i.modelField]=n}else{o[i.modelField]=r}});o.number_value=!isNaN(e.number)?e.number:P.number_value;o.number_digits=e.numberDigits>=0?e.numberDigits:4;const n=[];if(e.targetParams){n.push(e.targetParams)}if(e.results){let t;let i;let r=0;e.results.forEach(e=>{i=e.number||0;if(typeof i==="string"){i=parseFloat(i)}r+=i;t=e.targetParams;if(t){n.push(t)}});o.number_value=r}if(n.length>0){const e=o.targetURL.indexOf("?")!==-1?"&":"?";o.targetURL+=e+n.join("&")}if(!isNaN(e.number)){if(typeof e.number==="string"){e.number=e.number.trim()}const t=this._shouldProcessDigits(e.number,e.numberDigits);const r=o.icon?4:5;if(e.number&&e.number.toString().length>=r||t){const t=this._normalizeNumber(e.number,r,e.numberFactor,e.numberDigits);o.number_factor=t.numberFactor;o.number_value=t.displayNumber}else{const t=i.getFloatInstance({maxFractionDigits:r});o.number_value=t.format(e.number)}}o.configSizeBehavior=r.last("/core/home/sizeBehavior");this.getView().getModel().refresh()},_shouldProcessDigits:function(e,t){let i;e=typeof e!=="string"?e.toString():e;if(e.indexOf(".")!==-1){i=e.split(".")[1].length;if(i>t){return true}}return false},_getLeanUrl:function(e){return o.getLeanURL(e)},_formatValueColor:function(e){if(e==="Positive"){return v.Good}if(e==="Negative"){return v.Error}return v[e]||v.Neutral},_getValueColor:function(e){const t=this._formatValueColor(e);if(t===v.Neutral){return v.None}return t},_isResetValue:function(e){if(typeof e!=="string"){return false}return e===w},onExit:function(){if(this.oDataRequest){this.stopRequests();this.oDataRequest.destroy()}this._aDoables.forEach(e=>{e.off()});this._aDoables=[]}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncherdynamic/DynamicTile.view", ["sap/ui/core/mvc/View","sap/m/GenericTile","sap/m/TileContent","sap/m/NumericContent","sap/m/library"],(e,t,r,i,o)=>{"use strict";const n=o.ValueColor;return e.extend("sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile",{getControllerName:function(){return"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile"},createContent:function(e){this.setHeight("100%");this.setWidth("100%");if(this.getContent().length===1){return this.getContent()[0]}return new t({header:"{/properties/title}",scope:"{/properties/scope}",subheader:"{/properties/subtitle}",sizeBehavior:"{= ${/properties/customSizeBehavior} || ${/properties/configSizeBehavior}}",frameType:"{/properties/frameType}",wrappingType:"{/properties/wrappingType}",url:{parts:["/properties/targetURL"],formatter:e.formatters&&e.formatters.leanURL},tileContent:new r({footer:"{/properties/info}",footerColor:{path:"/properties/infoState",formatter:function(e){if(e==="Positive"){e=n.Good}if(e==="Negative"){e=n.Error}if(!n[e]){e=n.Neutral}return e}},unit:"{/properties/number_unit}",content:new i({truncateValueTo:5,scale:"{/properties/number_factor}",value:"{/properties/number_value}",indicator:"{/properties/number_state_arrow}",valueColor:{path:"/properties/number_value_state",formatter:function(e){if(!e||e==="Neutral"||!n[e]){return n.None}return e}},icon:"{/properties/icon}",withMargin:false,width:"100%"})}),additionalTooltip:"{/properties/contentProviderLabel}",press:[e.onPress,e]})}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/generic", ["sap/ui/core/mvc/Controller","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/ushell/components/tiles/sbtilecontent","sap/m/library","sap/ui/core/format/DateFormat","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/Log"],(e,i,t,l,a,s,o,n,jQuery,r)=>{"use strict";const u=a.DeviationIndicator;const c=a.ValueColor;const T=a.FrameType;const h=a.LoadState;const g=e.extend("sap.ushell.components.tiles.generic",{getTile:function(){return this.oKpiTileView.oGenericTile},_updateTileModel:function(e){const i=this.getTile().getModel().getData();jQuery.extend(i,e);this.getTile().getModel().setData(i)},logError:function(e){this._updateTileModel({value:"",scale:"",unit:""});r.error(e);if(this.getView().getViewData().deferredObj){this.getView().getViewData().deferredObj.reject()}else{this.oKpiTileView.oGenericTile.setState(h.Failed)}},getKeyForCallCheck:function(){if(this.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){return`${this.oConfig.TILE_PROPERTIES.id}left`}return`${this.oConfig.TILE_PROPERTIES.id}right`},getRelativeTime:function(){let e=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();let i;if(this.cacheTime instanceof Date){i=this.cacheTime}else{i=new Date(parseInt(this.cacheTime.substr(6),10))}const t=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeDifference(e-i);let l;let a;switch(t.unit){case"minutes":a=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(t.time,"minutes");e=e-a;l=new Date(e);break;case"hours":a=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(t.time,"hours");e=e-a;l=new Date(e);break;case"days":a=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(t.time,"days");e=e-a;l=new Date(e);break}return l},setTimeStamp:function(){this.updateTimeStampjobScheduled=false;const e=s.getDateTimeInstance({relative:true,relativeSource:"auto",style:"short"});const i=e.format(this.getRelativeTime());this.oKpiTileView.oNVConfS.setRefreshOption(true);this.oKpiTileView.oNVConfS.setTimestamp(i);this.updateTimeStampjobScheduled=false;const t=`${this.oConfig.TILE_PROPERTIES.id}time`;let l=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(t);if(l){clearTimeout(l);l=undefined}sap.ushell.components.tiles.indicatorTileUtils.util.scheduleTimeStampJob.call(this,this.oTileApi.visible.isVisible())},isACurrencyMeasure:function(e){const i=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;return sap.ushell.components.tiles.indicatorTileUtils.util.getFormattingMetadata(this.oRunTimeODataModel,i,e)._hasCurrency},isCurrencyMeasure:function(e){const i=this;const t=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(i.oConfig.TILE_PROPERTIES.id);if(t&&t.Data){let l=t.Data&&JSON.parse(t.Data);if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(i.oConfig)){if(i.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){l=l.leftData}else{l=l.rightData}}if(i.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatorcomparison.ComparisonTile"||i.oConfig.TILE_PROPERTIES.tileType==="CM"){if(l&&l.data&&l.data.length){for(let t=0;t<l.data.length;t++){if(l.data[t]&&l.data[t].measure==e){if(typeof l.data[t].isCurM==="boolean"){return l.data[t].isCurM}return i.isACurrencyMeasure(e)}return i.isACurrencyMeasure(e)}}else{return i.isACurrencyMeasure(e)}}if(l&&typeof l.isCurM==="boolean"){return l.isCurM}return i.isACurrencyMeasure(e)}return i.isACurrencyMeasure(e)},formSelectStatement:function(e){const i=Object.keys(e);let t="";for(let l=0;l<i.length;l++){if(e[i[l]]!==undefined&&e.fullyFormedMeasure){t=`${t},${e[i[l]]}`}}return t},setThresholdValues:function(){const e=this;try{const i={};i.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){const t=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(e.oConfig.TILE_PROPERTIES.id);switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);if(t&&t.Data&&t.Data.length){t.Data=JSON.parse(t.Data);i.trendValue=Number(t.Data.trend);i.targetValue=Number(t.Data.target);i.criticalHighValue=Number(t.Data.ch);i.warningHighValue=Number(t.Data.wh);t.Data=JSON.stringify(t.Data)}break;case"MA":i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);if(t&&t.Data&&t.Data.length){t.Data=JSON.parse(t.Data);i.criticalLowValue=Number(t.Data.cl);i.warningLowValue=Number(t.Data.wl);i.trendValue=Number(t.Data.trend);i.targetValue=Number(t.Data.target);t.Data=JSON.stringify(t.Data)}break;case"RA":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);if(t&&t.Data&&t.Data.length){t.Data=JSON.parse(t.Data);i.criticalLowValue=Number(t.Data.cl);i.warningLowValue=Number(t.Data.wl);i.trendValue=Number(t.Data.trend);i.targetValue=Number(t.Data.target);i.criticalHighValue=Number(t.Data.ch);i.warningHighValue=Number(t.Data.wh);t.Data=JSON.stringify(t.Data)}break}}else if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);i.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","FIXED");i.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","FIXED");i.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","FIXED");i.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","FIXED")}else{i.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","FIXED");i.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","FIXED");i.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","FIXED");i.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","FIXED");i.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","FIXED");i.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","FIXED")}return i}catch(i){e.logError(i)}},setNoData:function(){const e=this.getView().getViewData();if(e.parentController){e.parentController.setNoData();if(e.deferredObj){e.deferredObj.resolve()}}else{try{this._updateTileModel({value:"",scale:"",unit:"",footerNum:this.oResourceBundle.getText("sb.noDataAvailable"),footerComp:this.oResourceBundle.getText("sb.noDataAvailable")});this.oKpiTileView.oGenericTile.setState(h.Loaded)}catch(e){}}},getLocalCache:function(e){const i={};i.ChipId=e.ChipId;i.Data=e.Data;i.CacheMaxAge=e.CacheMaxAgeUnit;i.CacheMaxAgeUnit=e.CacheMaxAgeUnit;i.CacheType=e.CacheType;i.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();return i},fetchKpiValue:function(e,i,t,l){const a=this;let s=0;try{const o=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;const n=this.setThresholdValues();const u=n.fullyFormedMeasure;const c=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(a.oConfig.TILE_PROPERTIES.id);const h=a.oTileApi.configuration.getParameterValueAsString("timeStamp");const g=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(a.oConfig.TILE_PROPERTIES.id,h,a.chipCacheTime,a.chipCacheTimeUnit,a.tilePressed);const p=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(t);const d=this.getKeyForCallCheck();let m=true;if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)){m=sap.ushell.components.tiles.indicatorTileUtils.util.isCallInProgress(d);if(m==undefined){m=true}}if(m){let t;if(!c||!g&&a.oTileApi.visible.isVisible()||p||l&&a.oTileApi.visible.isVisible()||a.getView().getViewData().refresh){sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(d,false);if(a.kpiValueFetchDeferred){a.kpiValueFetchDeferred=false;const t=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);const l=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(a.oRunTimeODataModel,o,u,null,t);if(l){this.QUERY_SERVICE_MODEL=l.model;this.queryUriForKpiValue=l.uri;this.queryServiceUriODataReadRef=this.QUERY_SERVICE_MODEL.read(l.uri,null,null,true,i=>{a.backEndCallMade=true;a.kpiValueFetchDeferred=true;sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(d,true);if(i&&i.results&&i.results.length&&i.results[0][a.DEFINITION_DATA.EVALUATION.COLUMN_NAME]!=null){s=i.results[0][a.DEFINITION_DATA.EVALUATION.COLUMN_NAME];const t={};if(l.unit[0]){a._updateTileModel({unit:i.results[0][l.unit[0].name]});t.uom=i.results[0][l.unit[0].name]}if(a.oConfig.TILE_PROPERTIES.frameType=="TwoByOne"){t.numericValue=s}else{t.value=s}if(a.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){n.criticalHighValue=i.results[0][n.sCriticalHigh];n.criticalLowValue=i.results[0][n.sCriticalLow];n.warningHighValue=i.results[0][n.sWarningHigh];n.warningLowValue=i.results[0][n.sWarningLow];n.targetValue=i.results[0][n.sTarget];n.trendValue=i.results[0][n.sTrend]}else if(a.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){n.targetValue=Number(i.results[0][n.sTarget]);n.criticalHighValue=n.targetValue*n.criticalHighValue/100;n.criticalLowValue=n.targetValue*n.criticalLowValue/100;n.warningHighValue=n.targetValue*n.warningHighValue/100;n.warningLowValue=n.targetValue*n.warningLowValue/100;n.trendValue=Number(i.results[0][n.sTrend])}t.cl=n.criticalLowValue;t.ch=n.criticalHighValue;t.wl=n.warningLowValue;t.wh=n.warningHighValue;t.trend=n.trendValue;t.target=n.targetValue;t.isCurM=a.isCurrencyMeasure(a.oConfig.EVALUATION.COLUMN_NAME);const o={};o.ChipId=a.oConfig.TILE_PROPERTIES.id;o.Data=JSON.stringify(t);o.CacheMaxAge=Number(a.chipCacheTime);o.CacheMaxAgeUnit=a.chipCacheTimeUnit;o.CacheType=1;const r=a.getLocalCache(o);if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(a.oConfig.TILE_PROPERTIES.id,r);let e=false;if(c){e=true}if(a.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(a.oTileApi,a.oConfig.TILE_PROPERTIES.id,o,e,e=>{if(e){a.cacheTime=e&&e.CachedTime;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(a.oConfig.TILE_PROPERTIES.id,e);a.setTimeStamp(a.cacheTime)}if(a.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)){a.setTimeStamp(a.cacheTime)}})}}else{const e=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(a.oConfig.TILE_PROPERTIES.id);let i;if(e){if(!e.CachedTime){e.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()}i=e.Data;if(i){i=JSON.parse(i);if(a.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){i.leftData=t}else{i.rightData=t}}e.Data=JSON.stringify(i);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(a.oConfig.TILE_PROPERTIES.id,e)}else{i={};if(a.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){i.leftData=t}else{i.rightData=t}r.Data=JSON.stringify(i);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(a.oConfig.TILE_PROPERTIES.id,r)}a.cacheWriteData=t}a.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();a.updateDatajobScheduled=false;const u=`${a.oConfig.TILE_PROPERTIES.id}data`;let T=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(u);if(T){clearTimeout(T);T=undefined}e.call(a,s,n)}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(a.oConfig.TILE_PROPERTIES.id,{empty:"empty"});a.setNoData()}},e=>{a.kpiValueFetchDeferred=true;sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(d,true);if(e&&e.response){r.error(`${e.message} : ${e.request.requestUri}`);i.call(a,e)}})}else{a.kpiValueFetchDeferred=true;sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(d,true);a.logError("Error Preparing Query Service URI")}}}else if(a.DEFINITION_DATA.TILE_PROPERTIES.frameType==T.OneByOne){if(c&&c.Data){t=c.Data&&JSON.parse(c.Data);s=t.value;if(t.uom){a._updateTileModel({unit:t.uom})}if(a.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){n.criticalHighValue=t.ch;n.criticalLowValue=t.cl;n.warningHighValue=t.wh;n.warningLowValue=t.wl;n.targetValue=t.target;n.trendValue=t.trend}else if(a.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){n.targetValue=Number(t.target);n.criticalHighValue=n.targetValue*n.ch/100;n.criticalLowValue=n.targetValue*n.cl/100;n.warningHighValue=n.targetValue*n.wh/100;n.warningLowValue=n.targetValue*n.wl/100;n.trendValue=Number(t.trend)}a.cacheTime=c.CachedTime;if(a.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)){a.setTimeStamp(c.CachedTime)}e.call(a,s,n)}else{a.setNoData()}}else if(c&&c.Data){t=c.Data&&JSON.parse(c.Data);if(a.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){t=t.leftData}else{t=t.rightData}s=t.numericValue;if(t.unit){a._updateTileModel({unit:t.unit})}if(a.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){n.criticalHighValue=t.ch;n.criticalLowValue=t.cl;n.warningHighValue=t.wh;n.warningLowValue=t.wl;n.targetValue=t.target;n.trendValue=t.trend}else if(a.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){n.targetValue=Number(t.target);n.criticalHighValue=n.targetValue*n.criticalHighValue/100;n.criticalLowValue=n.targetValue*n.criticalLowValue/100;n.warningHighValue=n.targetValue*n.warningHighValue/100;n.warningLowValue=n.targetValue*n.warningLowValue/100;n.trendValue=Number(t.trend)}a.cacheTime=c.CachedTime;if(a.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)){a.setTimeStamp(c.CachedTime)}e.call(a,s,n)}else{a.setNoData()}}}catch(e){a.logError(e)}},getRunTimeODataModel:function(e,i){if(window["sap-ushell-config"].cacheBusting){e=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(e)}if(!this.oRunTimeODataModel){this.oRunTimeODataModel=sap.ushell.components.tiles.indicatorTileUtils.util.getODataModelByServiceUri(e)}if(this.oRunTimeODataModel.getServiceMetadata()){i()}else{this.oRunTimeODataModel.attachMetadataLoaded(i)}},parse_sapclient:function(){const e=this.oConfig.EVALUATION_FILTERS;if(e.constructor!==Array){return}if(e.length<1){return}let i;const t="P_SAPClient";const l="$$$";for(const a in e){i=e[a];if(i.NAME===t&&i.VALUE_1===l){break}i=null}if(i){jQuery.when(sap.ushell.components.tiles.indicatorTileUtils.util.getHanaClient()).done(e=>{i.VALUE_1=e})}},fetchEvaluation:function(e,i,t,l){const a=this;const s=this.oConfig.TILE_PROPERTIES.sb_metadata||"HANA";a.DEFINITION_DATA=e;a._updateTileModel(this.DEFINITION_DATA);const o=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(t);if(a.oTileApi.visible.isVisible()&&!a.firstTimeVisible||o||l){jQuery.when(sap.ushell.components.tiles.indicatorTileUtils.util.getFrontendCache(e,a.oTileApi)).done(e=>{a.firstTimeVisible=true;e=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(a.oConfig.TILE_PROPERTIES.id);if(e||Number(a.oTileApi.configuration.getParameterValueAsString("isSufficient"))){i.call()}else{try{if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)||!a.dataCallInProgress){a.dataCallInProgress=true;const e=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(a.oConfig.TILE_PROPERTIES.id);if(e){a.oConfig.EVALUATION_FILTERS=e.EVALUATION_FILTERS;i.call()}else if(a.evaluationFetchDeferred){a.evaluationFetchDeferred=false;sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(a.oConfig,a.oTileApi,e=>{a.evaluationFetchDeferred=true;a.oConfig.EVALUATION_FILTERS=e;if(s.toUpperCase()==="HANA"){a.parse_sapclient()}sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(a.oConfig.TILE_PROPERTIES.id,a.oConfig);i.call()})}}}catch(e){a.evaluationFetchDeferred=true;a.logError("no evaluation data")}}}).fail(()=>{a.firstTimeVisible=true;if(Number(a.oTileApi.configuration.getParameterValueAsString("isSufficient"))){i.call()}else{try{const e=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(a.oConfig.TILE_PROPERTIES.id);if(e){a.oConfig.EVALUATION_FILTERS=e.EVALUATION_FILTERS;i.call()}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(a.oConfig,a.oTileApi,e=>{a.oConfig.EVALUATION_FILTERS=e;if(s.toUpperCase()==="HANA"){a.parse_sapclient()}sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(a.oConfig.TILE_PROPERTIES.id,a.oConfig);i.call()})}}catch(e){a.logError("no evaluation data")}}})}},refreshHandler:function(e,i){const t=this;const l=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(e);const a=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(i);if(!t.firstTimeVisible||l||a){t.fetchEvaluation(t.oConfig,()=>{let i;if(t.oConfig.TILE_PROPERTIES.tileType=="NT"||t.oConfig.TILE_PROPERTIES.tileType=="AT"||t.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"||t.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatordeviation.DeviationTile"){i=t.oTileApi.url.addSystemToServiceUrl(t.oConfig.EVALUATION.ODATA_URL);t.getRunTimeODataModel(i,()=>{if(t.KPI_VALUE_REQUIRED){t.fetchKpiValue(function(e,i){this.KPIVALUE=e;t.doProcess(e,i)},t.logError,e,a)}else{t.doProcess()}})}else{i=t.oTileApi.url.addSystemToServiceUrl(t.oConfig.EVALUATION.ODATA_URL);t.getRunTimeODataModel(i,()=>{if(t.KPI_VALUE_REQUIRED){t.doProcess(t.KPIVALUE,t.setThresholdValues())}else{t.doProcess(l,a)}})}},e,a)}},visibleHandler:function(e){if(!e){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}if(e){this.refreshHandler(this)}},getChipConfiguration:function(e){const i=this;try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(i.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),i.oTileApi.preview.isEnabled(),t=>{i.oConfig=t;const l=sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(i.oConfig);const a=sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(i.oConfig);if(i.oTileApi.search){i.oTileApi.search.setKeywords([l,a])}if(i.oTileApi.preview){i.oTileApi.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(i.oConfig,i.system))}e.call()})}catch(e){i.logError(e.message)}},onAfterTileRendering:function(){const e=this;this.firstTimeVisible=false;this.oKpiTileView=this.getView();this.updateDatajobScheduled=false;this.updateTimeStampjobScheduled=false;this.oViewData=this.oKpiTileView.getViewData();this.tilePressed=false;this.kpiValueFetchDeferred=true;this.evaluationFetchDeferred=true;this.backEndCallMade=false;if(!sap.ushell.components.tiles.utils){sap.ui.require("sap.ushell.components.tiles.utils")}this.oResourceBundle=sap.ushell.components.tiles.utils.getResourceBundle();this.oTileApi=this.oViewData.chip;this.system=this.oTileApi.url.getApplicationSystem();this.oKpiTileView.oGenericTile.setState(h.Loading);this.getChipConfiguration(()=>{let i;e.chipCacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTime(e.oConfig);e.chipCacheTimeUnit=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTimeUnit(e.oConfig);if(e.oTileApi.preview.isEnabled()){e.doDummyProcess();e.oKpiTileView.oGenericTile.attachPress(()=>{o.show(e.oResourceBundle.getText("sb.NavigationHelp"))})}else if(e.oConfig.BLANKTILE||e.oConfig.TILE_PROPERTIES.blankTile){e.doDummyProcess();i=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system);e.oKpiTileView.oGenericTile.$().wrap(`<a href ='${i}'></a>`);e.oKpiTileView.oGenericTile.attachPress(()=>{e.tilePressed=true;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(e.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(e.oConfig.TILE_PROPERTIES.id,null);window.location.hash=i})}else{if(e.oTileApi.visible&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(e.oConfig)){e.oTileApi.visible.attachVisible(e.visibleHandler.bind(e))}i=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system);e.oKpiTileView.oGenericTile.$().wrap(`<a href ='${i}></a>`).style="display:block;";e.oKpiTileView.oGenericTile.attachPress(()=>{e.tilePressed=true;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(e.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(e.oConfig.TILE_PROPERTIES.id,null);window.location.hash=i});if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(e.oConfig)){e.oKpiTileView.oNVConfS.attachRefresh(()=>{e.oKpiTileView.oGenericTile.setState(h.Loading);e.refreshHandler(true)})}e.fetchEvaluation(e.oConfig,()=>{e.DEFINITION_DATA=e.oConfig;const i=e.oTileApi.url.addSystemToServiceUrl(e.oConfig.EVALUATION.ODATA_URL);const t=e.oTileApi.configuration.getParameterValueAsString("timeStamp");const l=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(e.oConfig.TILE_PROPERTIES.id,t,e.chipCacheTime,e.chipCacheTimeUnit,e.tilePressed);if(!l||e.getView().getViewData().refresh){e.getRunTimeODataModel(i,()=>{if(e.KPI_VALUE_REQUIRED){e.fetchKpiValue(function(i,t){this.KPIVALUE=i;e.doProcess(i,t)},e.logError)}else{e.doProcess()}})}else if(e.KPI_VALUE_REQUIRED){e.fetchKpiValue(function(i,t){this.KPIVALUE=i;e.doProcess(i,t)},e.logError)}else{e.doProcess()}})}})},onAfterRendering:function(){this.onAfterTileRendering()},_setLocalModelToTile:function(){if(!this.getTile().getModel()){this.getTile().setModel(new n({}))}},autoFormatter:function(e,i){i=i||false;if(!e){return""}return sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(e),this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,i)},setToolTip:function(e,i,t){const l=this;let a;const s=this.setThresholdValues();const o=this.oConfig.EVALUATION.COLUMN_NAME;const n=this.isCurrencyMeasure(o);let r;if(t=="CONT"||t=="COMP"){if(this.oKpiTileView.getContent()[0].getTileContent().length){a=l.oKpiTileView.getContent()[0].getTileContent()[0].getContent();let e;let s;let o;let u;let c;let T;let h;let g;let p;if(i&&i[0]){e=i[0].title;u=this.autoFormatter(i[0].value,n);h=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(i[0].color)}if(i&&i[1]){s=i[1].title;c=this.autoFormatter(i[1].value,n);g=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(i[1].color)}if(i&&i[2]){o=i[2].title;T=this.autoFormatter(i[2].value,n);p=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(i[2].color)}const d={};d["0"]=`${this.oConfig.EVALUATION.COLUMN_NAME},asc`;d["1"]=`${this.oConfig.EVALUATION.COLUMN_NAME},desc`;d["2"]=`${this.oConfig.TILE_PROPERTIES.dimension},asc`;d["3"]=`${this.oConfig.TILE_PROPERTIES.dimension},desc`;const m=d[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");r={measure:this.oConfig.EVALUATION.COLUMN_NAME,contributionTile:m,m1:e,v1:u,c1:h,m2:s,v2:c,c2:g,m3:o,v3:T,c3:p};sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(a,t,r)}}else{let o="";if(e=="Error"){o="sb.error"}if(e=="Neutral"){o="sb.neutral"}if(e=="Critical"){o="sb.critical"}if(e=="Good"){o="sb.good"}r={status:o,actual:this.autoFormatter(i,n),target:this.autoFormatter(s.targetValue,n),cH:this.autoFormatter(s.criticalHighValue,n),wH:this.autoFormatter(s.warningHighValue,n),wL:this.autoFormatter(s.warningLowValue,n),cL:this.autoFormatter(s.criticalLowValue,n)};a=l.oKpiTileView.getContent()[0].getTileContent()[0]&&l.oKpiTileView.getContent()[0].getTileContent()[0].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(a,t,r)}},getTrendColor:function(e){const i=this;let t;let l;let a;let s;try{const i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;let o=c.Neutral;if(i==="MI"){if(e.criticalHighValue&&e.warningHighValue){s=Number(e.criticalHighValue);a=Number(e.warningHighValue);if(this.CALCULATED_KPI_VALUE<a){o=c.Good}else if(this.CALCULATED_KPI_VALUE<=s){o=c.Critical}else{o=c.Error}}}else if(i==="MA"){if(e.criticalLowValue&&e.warningLowValue){l=Number(e.criticalLowValue);t=Number(e.warningLowValue);if(this.CALCULATED_KPI_VALUE<l){o=c.Error}else if(this.CALCULATED_KPI_VALUE<=t){o=c.Critical}else{o=c.Good}}}else if(e.warningLowValue&&e.warningHighValue&&e.criticalLowValue&&e.criticalHighValue){s=Number(e.criticalHighValue);a=Number(e.warningHighValue);t=Number(e.warningLowValue);l=Number(e.criticalLowValue);if(this.CALCULATED_KPI_VALUE<l||this.CALCULATED_KPI_VALUE>s){o=c.Error}else if(this.CALCULATED_KPI_VALUE>=l&&this.CALCULATED_KPI_VALUE<=t||this.CALCULATED_KPI_VALUE>=a&&this.CALCULATED_KPI_VALUE<=s){o=c.Critical}else{o=c.Good}}return o}catch(e){i.logError(e)}},getTrendIndicator:function(e){const i=this;e=Number(e);try{let i=u.None;if(e>this.CALCULATED_KPI_VALUE){i=u.Down}else if(e<this.CALCULATED_KPI_VALUE){i=u.Up}return i}catch(e){i.logError(e)}},setTextInTile:function(){const e=this;const i=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oTileApi);this._updateTileModel({header:i.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(e.oConfig),subheader:i.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(e.oConfig)})},_getEvaluationThresholdMeasures:function(){const e=[];e.push(this.oConfig.EVALUATION.COLUMN_NAME);if(this.oConfig.EVALUATION.VALUES_SOURCE==="MEASURE"){const i=this.oConfig.EVALUATION_VALUES;if(i&&i.length){for(let t=0;t<i.length;t++){if(i[t].COLUMN_NAME&&!i[t].FIXED){e.push(i[t].COLUMN_NAME)}}}}return e},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}});return g});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorArea/AreaChartTile.controller", ["sap/ushell/components/tiles/generic","sap/m/library","sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartPoint"],(e,i,t,l)=>{"use strict";const a=i.FrameType;const s=i.LoadState;const r=e.extend("sap.ushell.components.tiles.indicatorArea.AreaChartTile",{onInit:function(){this.KPI_VALUE_REQUIRED=false},doProcess:function(e,i){this.onAfterFinalEvaluation(e,i)},doDummyProcess:function(){const e=this;this.setTextInTile();e._updateTileModel({footer:"",description:"",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70}]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});this.oKpiTileView.oGenericTile.setState(s.Loaded)},scheduleJob:function(e){if(this.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible())}},onAfterFinalEvaluation:function(e,i){const r=this;const o=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;const n=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;const c=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);let u=this.DEFINITION_DATA.TILE_PROPERTIES.dimension;if(u==undefined){this.logError();return}const h=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;const E=this.DEFINITION_DATA.EVALUATION_VALUES;const T=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(r.oConfig.TILE_PROPERTIES.id);let d;if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(r.oConfig)){if(T){d=T.Data&&JSON.parse(T.Data)}}const f=r.oTileApi.configuration.getParameterValueAsString("timeStamp");const g=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(r.oConfig.TILE_PROPERTIES.id,f,r.chipCacheTime,r.chipCacheTimeUnit,r.tilePressed);let m=n;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(h){case"MI":r.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(r.oConfig,"WH","MEASURE");r.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(r.oConfig,"CH","MEASURE");r.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(r.oConfig,"TA","MEASURE");r.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(r.oConfig,"TC","MEASURE");if(r.sWarningHigh&&r.sCriticalHigh&&r.sTarget){m+=`,${r.sWarningHigh},${r.sCriticalHigh},${r.sTarget}`}break;case"MA":r.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(r.oConfig,"WL","MEASURE");r.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(r.oConfig,"CL","MEASURE");r.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(r.oConfig,"TA","MEASURE");r.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(r.oConfig,"TC","MEASURE");if(r.sWarningLow&&r.sCriticalLow&&r.sTarget){m+=`,${r.sWarningLow},${r.sCriticalLow},${r.sTarget}`}break;case"RA":r.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(r.oConfig,"WH","MEASURE");r.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(r.oConfig,"CH","MEASURE");r.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(r.oConfig,"TA","MEASURE");r.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(r.oConfig,"TC","MEASURE");r.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(r.oConfig,"WL","MEASURE");r.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(r.oConfig,"CL","MEASURE");if(r.sWarningLow&&r.sCriticalLow&&r.sTarget&&r.sWarningHigh&&r.sCriticalHigh){m+=`,${r.sWarningLow},${r.sCriticalLow},${r.sTarget},${r.sWarningHigh},${r.sCriticalHigh}`}break}}function p(e,i){const a=[];const s=[];const o=[];const c=[];const T=[];const d=[];let f=e.firstXlabel;let g;let m;let p;let C;let A;let L=e.lastXlabel;const N=Number(e.results[0][n]);const I=Number(e.results[e.results.length-1][n]);let U;for(U in e.results){e.results[U][u]=Number(U);e.results[U][n]=Number(e.results[U][n]);if(r.sWarningHigh){e.results[U][r.sWarningHigh]=Number(e.results[U][r.sWarningHigh])}if(r.sCriticalHigh){e.results[U][r.sCriticalHigh]=Number(e.results[U][r.sCriticalHigh])}if(r.sCriticalLow){e.results[U][r.sCriticalLow]=Number(e.results[U][r.sCriticalLow])}if(r.sWarningLow){e.results[U][r.sWarningLow]=Number(e.results[U][r.sWarningLow])}if(r.sTarget){e.results[U][r.sTarget]=Number(e.results[U][r.sTarget])}if(r.sWarningHigh){o.push(e.results[U][r.sWarningHigh])}if(r.sCriticalHigh){c.push(e.results[U][r.sCriticalHigh])}if(r.sCriticalLow){T.push(e.results[U][r.sCriticalLow])}if(r.sWarningLow){d.push(e.results[U][r.sWarningLow])}a.push(e.results[U][u]);s.push(e.results[U][n])}try{f=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(f);L=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(L)}catch(e){r.logError(e)}let b=Number(N);if(r.oConfig.EVALUATION.SCALING==-2){b*=100}const M=Math.min.apply(Math,s);let S=r.isCurrencyMeasure(r.oConfig.EVALUATION.COLUMN_NAME);let D=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(b,r.oConfig.EVALUATION.SCALING,r.oConfig.EVALUATION.DECIMAL_PRECISION,S,r.CURRENCY_CODE);if(r.oConfig.EVALUATION.SCALING==-2){D+=" %"}const w=D.toString();let R=Number(I);if(r.oConfig.EVALUATION.SCALING==-2){R*=100}const O=Math.max.apply(Math,s);S=r.isCurrencyMeasure(r.oConfig.EVALUATION.COLUMN_NAME);let V=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(R,r.oConfig.EVALUATION.SCALING,r.oConfig.EVALUATION.DECIMAL_PRECISION,S,r.CURRENCY_CODE);if(r.oConfig.EVALUATION.SCALING==-2){V+=" %"}const H=V.toString();let F;let y;try{F=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.min.apply(Math,a));y=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.max.apply(Math,a))}catch(e){r.logError(e)}if(i=="MEASURE"){if(o.length!=0){r.firstwH=o[F];r.lastwH=o[y]}if(c.length!=0){r.firstcH=c[F];r.lastcH=c[y]}if(T.length!=0){r.firstcL=T[F];r.lastcL=T[y]}if(d.length!=0){r.firstwL=d[F];r.lastwL=d[y]}}const P={width:"100%",height:"100%",unit:r.unit||"",chart:{color:"Neutral",data:e.results},size:"Auto",minXValue:F,maxXValue:y,minYValue:M,maxYValue:O,firstXLabel:{label:`${f}`,color:"Neutral"},lastXLabel:{label:`${L}`,color:"Neutral"},firstYLabel:{label:`${w}`,color:"Neutral"},lastYLabel:{label:`${H}`,color:"Neutral"},minLabel:{},maxLabel:{}};let _;switch(h){case"MA":for(U in E){if(E[U].TYPE=="CL"){P.minThreshold={color:"Error"};_={};_[u]="";_[n]=Number(E[U].FIXED);r.cl=Number(E[U].FIXED);P.minThreshold.data=i=="MEASURE"?e.results:[_];g=i=="MEASURE"?r.sCriticalLow:n}else if(E[U].TYPE=="WL"){P.maxThreshold={color:"Good"};_={};_[u]="";_[n]=Number(E[U].FIXED);P.maxThreshold.data=i=="MEASURE"?e.results:[_];m=i=="MEASURE"?r.sWarningLow:n;r.wl=Number(E[U].FIXED)}else if(E[U].TYPE=="TA"){_={};_[u]="";_[n]=Number(E[U].FIXED);P.target={color:"Neutral"};P.target.data=i=="MEASURE"?e.results:[_];A=i=="MEASURE"?r.sTarget:n}}P.innerMinThreshold={data:[]};P.innerMaxThreshold={data:[]};if(i=="FIXED"){P.firstYLabel.color=N<r.cl?"Error":r.cl<=N&&N<=r.wl?"Critical":N>r.wl?"Good":"Neutral";P.lastYLabel.color=I<r.cl?"Error":r.cl<=I&&I<=r.wl?"Critical":I>r.wl?"Good":"Neutral"}else if(i=="MEASURE"&&r.firstwL&&r.lastwL&&r.firstcL&&r.lastcL){P.firstYLabel.color=N<r.firstcL?"Error":r.firstcL<=N&&N<=r.firstwL?"Critical":N>r.firstwL?"Good":"Neutral";P.lastYLabel.color=I<r.lastcL?"Error":r.lastcL<=I&&I<=r.lastwL?"Critical":I>r.lastwL?"Good":"Neutral"}break;case"MI":for(U in E){if(E[U].TYPE=="CH"){_={};_[u]="";_[n]=Number(E[U].FIXED);r.ch=Number(E[U].FIXED);P.maxThreshold={color:"Error"};P.maxThreshold.data=i=="MEASURE"?e.results:[_];m=i=="MEASURE"?r.sCriticalHigh:n}else if(E[U].TYPE=="WH"){_={};_[u]="";_[n]=Number(E[U].FIXED);r.wh=Number(E[U].FIXED);P.minThreshold={color:"Good"};P.minThreshold.data=i=="MEASURE"?e.results:[_];g=i=="MEASURE"?r.sWarningHigh:n}else if(E[U].TYPE=="TA"){_={};_[u]="";_[n]=Number(E[U].FIXED);P.target={color:"Neutral"};P.target.data=i=="MEASURE"?e.results:[_];A=i=="MEASURE"?r.sTarget:n}}if(i=="FIXED"){P.firstYLabel.color=N>r.ch?"Error":r.wh<=N&&N<=r.ch?"Critical":N<r.wh?"Good":"Neutral";P.lastYLabel.color=I>r.ch?"Error":r.wh<=I&&I<=r.ch?"Critical":I<r.wh?"Good":"Neutral"}else if(i=="MEASURE"&&r.firstwH&&r.lastwH&&r.firstcH&&r.lastcH){P.firstYLabel.color=N>r.firstcH?"Error":r.firstwH<=N&&N<=r.firstcH?"Critical":N<r.firstwH?"Good":"Neutral";P.lastYLabel.color=I>r.lastcH?"Error":r.lastwH<=I&&I<=r.lastcH?"Critical":I<r.lastwH?"Good":"Neutral"}P.innerMaxThreshold={data:[]};P.innerMinThreshold={data:[]};break;case"RA":for(U in E){if(E[U].TYPE=="CH"){_={};_[u]="";_[n]=Number(E[U].FIXED);r.ch=Number(E[U].FIXED);P.maxThreshold={color:"Error"};P.maxThreshold.data=i=="MEASURE"?e.results:[_];m=i=="MEASURE"?r.sCriticalHigh:n}else if(E[U].TYPE=="WH"){_={};_[u]="";_[n]=Number(E[U].FIXED);r.wh=Number(E[U].FIXED);P.innerMaxThreshold={color:"Good"};P.innerMaxThreshold.data=i=="MEASURE"?e.results:[_];C=i=="MEASURE"?r.sWarningHigh:n}else if(E[U].TYPE=="WL"){_={};_[u]="";_[n]=Number(E[U].FIXED);r.wl=Number(E[U].FIXED);P.innerMinThreshold={color:"Good"};P.innerMinThreshold.data=i=="MEASURE"?e.results:[_];p=i=="MEASURE"?r.sWarningLow:n}else if(E[U].TYPE=="CL"){_={};_[u]="";_[n]=Number(E[U].FIXED);r.cl=Number(E[U].FIXED);P.minThreshold={color:"Error"};P.minThreshold.data=i=="MEASURE"?e.results:[_];g=i=="MEASURE"?r.sCriticalLow:n}else if(E[U].TYPE=="TA"){_={};_[u]="";_[n]=Number(E[U].FIXED);P.target={color:"Neutral"};P.target.data=i=="MEASURE"?e.results:[_];A=i=="MEASURE"?r.sTarget:n}}if(i=="FIXED"){P.firstYLabel.color=N>r.ch||N<r.cl?"Error":r.wh<=N&&N<=r.ch||r.cl<=N&&N<=r.wl?"Critical":N>=r.wl&&N<=r.wh?"Good":"Neutral";P.lastYLabel.color=I>r.ch||I<r.cl?"Error":r.wh<=I&&I<=r.ch||r.cl<=I&&I<=r.wl?"Critical":I>=r.wl&&I<=r.wh?"Good":"Neutral"}else if(i=="MEASURE"&&r.firstwL&&r.lastwL&&r.firstcL&&r.lastcL&&r.firstwH&&r.lastwH&&r.firstcH&&r.lastcH){P.firstYLabel.color=N>r.firstcH||N<r.firstcL?"Error":r.firstwH<=N&&N<=r.firstcH||r.firstcL<=N&&N<=r.firstwL?"Critical":N>=r.firstwL&&N<=r.firstwH?"Good":"Neutral";P.lastYLabel.color=I>r.lastcH||I<r.lastcL?"Error":r.lastwH<=I&&I<=r.lastcH||r.lastcL<=I&&I<=r.lastwL?"Critical":I>=r.lastwL&&I<=r.lastwH?"Good":"Neutral"}break}function Y(e,i,a,s){return new t({color:`{/${e}/color}`,points:{path:`/${e}/data`,template:new l({x:`{${i}}`,y:`{${a}}`})}})}const W=r.getView().oNVConfContS;W.setTarget(Y("target",u,A));W.setInnerMinThreshold(Y("innerMinThreshold",u,p));W.setInnerMaxThreshold(Y("innerMaxThreshold",u,C));W.setMinThreshold(Y("minThreshold",u,g));W.setMaxThreshold(Y("maxThreshold",u,m));W.setChart(Y("chart",u,n));r.setTextInTile();if(r.getView().getViewData().parentController){r.getView().getViewData().parentController._updateTileModel(P)}else{r._updateTileModel(P)}}const C=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(e);if(d&&!d.rightData||!T||!g&&r.oTileApi.visible.isVisible()||C||i&&r.oTileApi.visible.isVisible()||r.getView().getViewData().refresh){if(r.kpiValueFetchDeferred){r.kpiValueFetchDeferred=false;const e=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(r.oRunTimeODataModel,o,m,u,c);if(e){this.queryUriForTrendChart=e.uri;const i={};try{this.trendChartODataReadRef=e.model.read(e.uri,null,null,true,t=>{r.kpiValueFetchDeferred=true;if(t&&t.results&&t.results.length){if(e.unit[0]){r.unit=t.results[0][e.unit[0].name];r.CURRENCY_CODE=r.unit;i.unit=e.unit[0];i.unit.name=e.unit[0].name}r.queryUriResponseForTrendChart=t;u=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(r.oRunTimeODataModel,o,u);t.results.splice(10);t.firstXlabel=t.results[0][u];t.lastXlabel=t.results[t.results.length-1][u];i.data=t;if(i&&i.data&&i.data.results&&i.data.results.length){for(let e=0;e<i.data.results.length;e++){delete i.data.results[e].__metadata}}i.isCurM=r.isCurrencyMeasure(r.oConfig.EVALUATION.COLUMN_NAME);i.dimensionName=u;p(t,r.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);const l={};r.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();l.ChipId=r.oConfig.TILE_PROPERTIES.id;l.Data=JSON.stringify(i);l.CacheMaxAge=Number(r.chipCacheTime);l.CacheMaxAgeUnit=r.chipCacheTimeUnit;l.CacheType=1;const n=r.getLocalCache(l);if(r.DEFINITION_DATA.TILE_PROPERTIES.frameType==a.TwoByOne){const e=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(r.oConfig.TILE_PROPERTIES.id);let t;if(e){if(!e.CachedTime){e.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()}t=e.Data;if(t){t=JSON.parse(t);t.rightData=i}e.Data=JSON.stringify(t);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(r.oConfig.TILE_PROPERTIES.id,e)}else{t={};t.rightData=i;n.Data=JSON.stringify(t);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(r.oConfig.TILE_PROPERTIES.id,n)}r.cacheWriteData=i;r.getView().getViewData().deferredObj.resolve()}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(r.oConfig.TILE_PROPERTIES.id,n);let e=false;if(T){e=true}if(r.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(r.oTileApi,r.oConfig.TILE_PROPERTIES.id,l,e,e=>{if(e){r.cacheTime=e&&e.CachedTime;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(r.oConfig.TILE_PROPERTIES.id,e);r.setTimeStamp()}if(r.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(r.oConfig)){r.setTimeStamp(r.cacheTime)}})}r.oKpiTileView.oGenericTile.setState(s.Loaded);r.updateDatajobScheduled=false;const i=`${r.oConfig.TILE_PROPERTIES.id}data`;let t=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(i);if(t){clearTimeout(t);t=undefined}r.scheduleJob(r.cacheTime)}}else{r.setNoData()}},e=>{r.kpiValueFetchDeferred=true;if(e&&e.response){r.logError("Data call failed")}})}catch(e){r.kpiValueFetchDeferred=true;r.logError(e)}}else{r.kpiValueFetchDeferred=true;r.logError()}}}else if(T&&T.Data){try{let e;const i=r.oConfig&&r.oConfig.TILE_PROPERTIES&&r.oConfig.TILE_PROPERTIES.tileType;if(i.indexOf("DT-")==-1){e=T.Data&&JSON.parse(T.Data)}else{e=T.Data&&JSON.parse(T.Data);e=e.rightData}if(e.unit){r.unit=e.data.results[0][e.unit.name];r.CURRENCY_CODE=r.unit}r.cacheTime=T.CachedTime;if(r.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(r.oConfig)){r.setTimeStamp(r.cacheTime)}r.queryUriResponseForTrendChart=e.data;u=e.dimensionName;p(e.data,r.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);if(r.oConfig.TILE_PROPERTIES.frameType==a.OneByOne){r.oKpiTileView.oGenericTile.setState(s.Loaded)}else{r.getView().getViewData().deferredObj.resolve()}r.scheduleJob(r.cacheTime)}catch(e){r.logError(e)}}else{r.setNoData()}}});return r});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorArea/AreaChartTile.view", ["sap/ui/core/mvc/JSView","sap/ushell/components/tiles/indicatorTileUtils/oData4Analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartLabel","sap/m/library","sap/suite/ui/microchart/AreaMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],(e,t,i,a,s,l,o,r,n,h)=>{"use strict";const u=o.LoadState;sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorArea.AreaChartTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorArea.AreaChartTile"},createContent:function(){this.setHeight("100%");this.setWidth("100%");let e="Lorem ipsum";let t="Lorem ipsum";const i=o.Size;const c=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(c.title&&c.subTitle){e=c.title;t=c.subTitle}function m(e){return new a({color:"Good",points:{path:`/${e}/data`,template:new s({x:"{day}",y:"{balance}"})}})}function p(e){return new l({label:`{/${e}/label}`,color:`{/${e}/color}`})}const d={subheader:t,header:e,footerNum:"",footerComp:"",scale:"",unit:"",value:8888,size:"Auto",frameType:"OneByOne",state:u.Loading};this.oNVConfContS=new r({width:"{/width}",height:"{/height}",size:i.Responsive,target:m("target"),innerMinThreshold:m("innerMinThreshold"),innerMaxThreshold:m("innerMaxThreshold"),minThreshold:m("minThreshold"),maxThreshold:m("maxThreshold"),chart:m("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:p("firstXLabel"),lastXLabel:p("lastXLabel"),firstYLabel:p("firstYLabel"),lastYLabel:p("lastYLabel"),minLabel:p("minLabel"),maxLabel:p("maxLabel")});this.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oNVConfContS});this.oGenericTile=new n({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[this.oNVConfS]});const b=new h;b.setData(d);this.oGenericTile.setModel(b);return this.oGenericTile}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDual/DualTile.controller", ["sap/m/MessageToast","sap/m/library","sap/ui/core/library","sap/ui/core/format/DateFormat","sap/ui/thirdparty/jquery"],(e,i,t,l,jQuery)=>{"use strict";const a=i.DeviationIndicator;const o=i.ValueColor;const s=i.FrameType;const r=i.Size;const n=i.LoadState;const c=t.mvc.ViewType;sap.ui.controller("sap.ushell.components.tiles.indicatorDual.DualTile",{getRelativeTime:function(){let e=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();this.cacheTime=this.cacheTime instanceof Date?this.cacheTime:new Date(parseInt(this.cacheTime.substr(6),10));const i=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeDifference(e-this.cacheTime);let t;let l;switch(i.unit){case"minutes":l=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(i.time,"minutes");e=e-l;t=new Date(e);break;case"hours":l=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(i.time,"hours");e=e-l;t=new Date(e);break;case"days":l=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(i.time,"days");e=e-l;t=new Date(e);break}return t},getTile:function(){return this.oKpiTileView.oGenericTile},setTimeStamp:function(){this.updateTimeStampjobScheduled=false;const e=l.getDateTimeInstance({relative:true,relativeSource:"auto"});const i=e.format(this.getRelativeTime());const t=this.getView().oGenericTile.getTileContent()[0];if(t){if(t.setRefreshOption){t.setRefreshOption(true)}if(t.setTimestamp){t.setTimestamp(i)}}this.updateTimeStampjobScheduled=false;const a=`${this.oConfig.TILE_PROPERTIES.id}time`;let o=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(a);if(o){clearTimeout(o);o=undefined}sap.ushell.components.tiles.indicatorTileUtils.util.scheduleTimeStampJob.call(this,this.oTileApi.visible.isVisible())},getLocalCache:function(e){const i={};i.ChipId=e.ChipId;i.Data=e.Data;i.CacheMaxAge=e.CacheMaxAgeUnit;i.CacheMaxAgeUnit=e.CacheMaxAgeUnit;i.CacheType=e.CacheType;i.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();return i},refreshPress:function(){this.initProcess(true)},_getView:function(e,i,t){const l=this.oKpiTileView.getViewData();const a=sap.ui.view({type:c.JS,viewName:e,viewData:jQuery.extend(true,{},l,{parentController:this},{deferredObj:i},{refresh:t})});return a},logError:function(){this._updateTileModel({value:"",scale:"",unit:""});if(this.getView().getViewData().deferredObj){this.getView().getViewData().deferredObj.reject()}},doProcess:function(e){sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(`${this.oKpiTileView.oConfig.TILE_PROPERTIES.id}defferedLeft`,this.deferred_left);sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(`${this.oKpiTileView.oConfig.TILE_PROPERTIES.id}defferedRight`,this.deferred_right);const i=this;this.getView().oGenericTile.removeAllTileContent();const t=this.getView().oGenericTile;this.system=this.oTileApi.url.getApplicationSystem();this.oKpiTileView.oGenericTile.setState(n.Loading);const l=i.tileType.split("-")[1];try{let a;a="sap.ushell.components.tiles.indicatornumeric.NumericTile";this.leftView=i._getView(a,this.deferred_left,e);this.leftView.getController().dataCallInProgress=false;t.addTileContent(this.leftView.oGenericTile.getTileContent()[0]);switch(l){case"CM":a="sap.ushell.components.tiles.indicatorcomparison.ComparisonTile";this.rightView=i._getView(a,this.deferred_right,e);this.rightView.getController().dataCallInProgress=false;t.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break;case"CT":a="sap.ushell.components.tiles.indicatorcontribution.ContributionTile";this.rightView=i._getView(a,this.deferred_right,e);this.rightView.getController().dataCallInProgress=false;t.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break;case"AT":a="sap.ushell.components.tiles.indicatordeviation.DeviationTile";this.rightView=i._getView(a,this.deferred_right,e);this.rightView.getController().dataCallInProgress=false;t.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break;case"TT":a="sap.ushell.components.tiles.indicatorArea.AreaChartTile";this.rightView=i._getView(a,this.deferred_right,e);this.rightView.getController().dataCallInProgress=false;t.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break}this.leftView.getController().onAfterTileRendering();this.rightView.getController().onAfterTileRendering();const o=this.getView().oGenericTile.getTileContent()[0];if(o&&o.attachRefresh){o.attachRefresh(this.refreshPress.bind(i))}}catch(e){this.logError(e)}},_updateTileModel:function(e){const i=this.getTile().getModel().getData();jQuery.extend(i,e);this.getTile().getModel().setData(i)},setTextInTile:function(){const e=this;const i=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oTileApi);this._updateTileModel({header:i.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(e.oConfig),subheader:i.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(e.oConfig)})},doDummyProcess:function(){const e=this;try{e.setTextInTile();switch(e.tileType){case"DT-CM":e._updateTileModel({value:1,size:r.Auto,frameType:s.TwoByOne,state:n.Loading,valueColor:o.Good,indicator:a.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1,color:"Good"},{title:"Measure 2",value:2,color:"Good"},{title:"Measure 3",value:3,color:"Good"}]});break;case"DT-AT":e._updateTileModel({valueColor:"Good",value:100,frameType:s.TwoByOne,unit:"USD",actual:{value:120,color:o.Good},targetValue:100,thresholds:[{value:0,color:o.Error},{value:50,color:o.Critical},{value:150,color:o.Critical},{value:200,color:o.Error}],showActualValue:true,showTargetValue:true});break;case"DT-CT":e._updateTileModel({value:8888,size:r.Auto,frameType:s.TwoByOne,state:n.Loading,valueColor:o.Error,indicator:a.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral",displayValue:""},{title:"EMEA",value:50,color:"Neutral",displayValue:""},{title:"APAC",value:-20,color:"Neutral",displayValue:""}]});break;case"DT-TT":this._updateTileModel({value:8888,size:r.Auto,frameType:s.TwoByOne,state:n.Loading,valueColor:o.Error,indicator:a.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70}]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});break}}catch(e){}},visibleHandler:function(e){if(!e){if(this.leftView){this.leftView.getController().firstTimeVisible=false}if(this.rightView){this.rightView.getController().firstTimeVisible=false}sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}if(e){if(this.leftView){this.leftView.getController().refreshHandler()}if(this.rightView){this.rightView.getController().refreshHandler()}}},initProcess:function(i){const t=this;this.oKpiTileView=this.getView();this.oResourceBundle=sap.ushell.components.tiles.utils.getResourceBundle();this.viewData={};t.viewData=this.oKpiTileView.getViewData();this.oTileApi=this.viewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this))}this.deferred_left=new jQuery.Deferred;this.deferred_right=new jQuery.Deferred;jQuery.when(this.deferred_left,this.deferred_right).done(()=>{t.setTextInTile();t.oConfig=t.oKpiTileView.oConfig;t.chipCacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTime(t.oConfig);t.chipCacheTimeUnit=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTimeUnit(t.oConfig);const e=t.leftView.getController().cacheWriteData;const i=t.rightView.getController().cacheWriteData;t.oKpiTileView.oGenericTile.setState(n.Loaded);const l=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oKpiTileView.oConfig,t.system);t.oKpiTileView.oGenericTile.$().wrap(`<a href ='${l}'></a>`);t.oKpiTileView.oGenericTile.attachPress(()=>{t.tilePressed=true;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oKpiTileView.oConfig.TILE_PROPERTIES.id,null);window.location.hash=l});const a={};const o={};o.leftData=e;o.rightData=i;a.ChipId=t.oConfig.TILE_PROPERTIES.id;a.Data=JSON.stringify(o);a.CacheMaxAge=Number(t.chipCacheTime);a.CacheMaxAgeUnit=t.chipCacheTimeUnit;a.CacheType=1;const s=t.getLocalCache(a);if(o.leftData&&o.rightData){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,s)}const r=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(t.chipCacheTime&&o.leftData&&o.rightData){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(t.oTileApi,t.oConfig.TILE_PROPERTIES.id,a,false,e=>{if(e){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,e);t.cacheTime=e.CachedTime;t.setTimeStamp()}})}if(t.chipCacheTime){if(!t.cacheTime){t.cacheTime=r.CachedTime}t.setTimeStamp();sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(t,t.oTileApi.visible.isVisible())}}).fail(()=>{t.oKpiTileView.oGenericTile.setState(n.Failed)});t.tileType=t.oKpiTileView.oConfig.TILE_PROPERTIES.tileType;this.oTileApi=t.viewData.chip;if(this.oTileApi.preview.isEnabled()){this.doDummyProcess();t.oKpiTileView.oGenericTile.attachPress(()=>{e.show(t.oResourceBundle.getText("sb.NavigationHelp"))})}else{this.doProcess(i)}},onAfterRendering:function(){this.initProcess()},setNoData:function(){try{this._updateTileModel({value:"",scale:"",unit:"",footerNum:this.oResourceBundle.getText("sb.noDataAvailable"),footerComp:this.oResourceBundle.getText("sb.noDataAvailable")});this.oKpiTileView.oGenericTile.setState(n.Loaded)}catch(e){}},getChipConfiguration:function(e){const i=this;try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(i.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),i.oTileApi.preview.isEnabled(),t=>{i.oConfig=t;e.call()})}catch(e){i.logError(e.message)}}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDual/DualTile.view", ["sap/ui/core/mvc/JSView","sap/ushell/components/tiles/indicatorTileUtils/oData4Analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/ushell/components/tiles/sbtilecontent","sap/m/NumericContent","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartLabel","sap/suite/ui/microchart/AreaMicroChart","sap/suite/ui/microchart/BulletMicroChartData","sap/suite/ui/microchart/BulletMicroChart","sap/m/library","sap/m/GenericTile","sap/ui/model/json/JSONModel"],(e,t,a,i,l,o,n,s,r,u,c,h,p,m,d,T)=>{"use strict";const C=m.Size;sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorDual.DualTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorDual.DualTile"},createContent:function(){function e(e){return new s({color:"Good",points:{path:`/${e}/data`,template:new r({x:"{day}",y:"{balance}"})}})}function t(e){return new u({label:`{/${e}/label}`,color:`{/${e}/color}`})}this.setHeight("100%");this.setWidth("100%");const a=this;a.oGenericTileData={};sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(a.getViewData().chip.configuration.getParameterValueAsString("tileConfiguration"),a.getViewData().chip.preview.isEnabled(),e=>{a.oConfig=e});a.tileType=a.oConfig.TILE_PROPERTIES.tileType;a.oNumericContent=new l({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:"{/isFormatterValue}",truncateValueTo:5,valueColor:"{/valueColor}",nullifyValue:false});a.oLeftTileContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:a.oNumericContent});let i;switch(a.tileType){case"DT-CM":i=new o({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});a.oComparisionContent=new n({size:"{/size}",scale:"{/scale}",data:{template:i,path:"/data"}});a.oRightContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:a.oComparisionContent});break;case"DT-CT":i=new o({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});a.oContributionContent=new n({size:"{/size}",scale:"{/scale}",data:{template:i,path:"/data"}});a.oRightContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:a.oContributionContent});break;case"DT-TT":const l=new c({width:"{/width}",height:"{/height}",size:"{/size}",target:e("target"),innerMinThreshold:e("innerMinThreshold"),innerMaxThreshold:e("innerMaxThreshold"),minThreshold:e("minThreshold"),maxThreshold:e("maxThreshold"),chart:e("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:t("firstXLabel"),lastXLabel:t("lastXLabel"),firstYLabel:t("firstYLabel"),lastYLabel:t("lastYLabel"),minLabel:t("minLabel"),maxLabel:t("maxLabel")});a.oRightContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",content:l});break;case"DT-AT":const s=new h({value:"{value}",color:"{color}"});const r=new p({size:C.Auto,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:s,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});a.oRightContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:r});break}a.oGenericTile=new d({subheader:"{/subheader}",frameType:"TwoByOne",size:"{/size}",header:"{/header}",tileContent:[a.oLeftTileContent,a.oRightContent]});a.oGenericTileModel=new T;a.oGenericTileModel.setData(a.oGenericTileData);a.oGenericTile.setModel(a.oGenericTileModel);return a.oGenericTile}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualComparison/DualComparison.controller", ["sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/library","sap/ui/thirdparty/jquery","sap/base/Log"],(e,i,jQuery,t)=>{"use strict";const l=i.Size;const o=i.DeviationIndicator;const s=i.ValueColor;const a=i.LoadState;sap.ui.controller("tiles.indicatorDualComparison.DualComparison",{getTile:function(){return this.oDualComparisonView.oGenericTile},_updateTileModel:function(e){const i=this.getTile().getModel().getData();jQuery.extend(i,e);this.getTile().getModel().setData(i)},setTitle:function(){const e=this;const i=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oChip);this._updateTileModel({header:i.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(e.oConfig),subheader:i.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(e.oConfig)})},logError:function(e){this.oDualComparisonView.oGenericTile.setState(a.Failed);this.oDualComparisonView.oGenericTile.setState(a.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e)},formSelectStatement:function(e){const i=Object.keys(e);let t="";for(let l=0;l<i.length;l++){if(e[i[l]]!==undefined&&e.fullyFormedMeasure){t+=`,${e[i[l]]}`}}return t},setThresholdValues:function(){const e=this;try{const i={};i.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break;case"MA":i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break;case"RA":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break}}else{i.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","FIXED");i.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","FIXED");i.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","FIXED");i.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","FIXED");i.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","FIXED");i.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","FIXED")}return i}catch(i){e.logError(i)}},getTrendColor:function(e){const i=this;let t;let l;let o;let a;try{const i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;let n=s.Neutral;if(i==="MI"){if(e.criticalHighValue&&e.warningHighValue){t=Number(e.criticalHighValue);l=Number(e.warningHighValue);if(this.CALCULATED_KPI_VALUE<l){n=s.Good}else if(this.CALCULATED_KPI_VALUE<=t){n=s.Critical}else{n=s.Error}}}else if(i==="MA"){if(e.criticalLowValue&&e.warningLowValue){o=Number(e.criticalLowValue);a=Number(e.warningLowValue);if(this.CALCULATED_KPI_VALUE<o){n=s.Error}else if(this.CALCULATED_KPI_VALUE<=a){n=s.Critical}else{n=s.Good}}}else if(e.warningLowValue&&e.warningHighValue&&e.criticalLowValue&&e.criticalHighValue){t=Number(e.criticalHighValue);l=Number(e.warningHighValue);a=Number(e.warningLowValue);o=Number(e.criticalLowValue);if(this.CALCULATED_KPI_VALUE<o||this.CALCULATED_KPI_VALUE>t){n=s.Error}else if(this.CALCULATED_KPI_VALUE>=o&&this.CALCULATED_KPI_VALUE<=a||this.CALCULATED_KPI_VALUE>=l&&this.CALCULATED_KPI_VALUE<=t){n=s.Critical}else{n=s.Good}}return n}catch(e){i.logError(e)}},_processDataForComparisonChart:function(e,i,t){const l=[];const o={};let s;let a;let n;let r;let u=[];const c=this;let E;for(s=0;s<e.results.length;s++){E=e.results[s]}u=sap.ushell.components.tiles.indicatorTileUtils.util.getAllMeasuresWithLabelText(this.oConfig.EVALUATION.ODATA_URL,this.oConfig.EVALUATION.ODATA_ENTITYSET);for(s=0,n=u.length;s<n;s++){a=u[s];o[a.key]=a.value}const T=c.oConfig.TILE_PROPERTIES.COLUMN_NAMES||c.oConfig.EVALUATION.COLUMN_NAMES;for(s=0;s<T.length;s++){const e={};const i=T[s];e.value=Number(E[i.COLUMN_NAME]);let a=Number(E[i.COLUMN_NAME]);if(c.oConfig.EVALUATION.SCALING==-2){a*=100}r=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(a,c.oConfig.EVALUATION.SCALING,c.oConfig.EVALUATION.DECIMAL_PRECISION);if(c.oConfig.EVALUATION.SCALING==-2){r+=" %"}e.displayValue=r.toString();if(t[s]&&E[t[s].name]){e.displayValue+=` ${E[t[s].name]}`}e.color=i.semanticColor;e.title=o[i.COLUMN_NAME]||i.COLUMN_NAME;l.push(e)}return l},getTrendIndicator:function(e,i){const t=this;e=Number(e);try{let t=o.None;if(e>i){t=o.Down}else if(e<i){t=o.Up}return t}catch(e){t.logError(e)}},fetchKpiValue:function(e,i){const l=this;try{const o=this.oConfig.EVALUATION.ODATA_URL;const s=this.oConfig.EVALUATION.ODATA_ENTITYSET;let a;let n;if(this.oConfig.TILE_PROPERTIES.semanticMeasure){a=`${this.oConfig.EVALUATION.COLUMN_NAME},${this.oConfig.TILE_PROPERTIES.semanticMeasure}`}else{a=this.oConfig.EVALUATION.COLUMN_NAME;n=a;if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES){for(let e=0;e<this.oConfig.TILE_PROPERTIES.COLUMN_NAMES.length;e++){if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[e].COLUMN_NAME!=this.oConfig.EVALUATION.COLUMN_NAME){n=`${n},${this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[e].COLUMN_NAME}`}}}}const r=this.oConfig.EVALUATION_VALUES;const u=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(l.oConfig.TILE_PROPERTIES.id);if(!u){const r=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);const u={};u["0"]=`${a},asc`;u["1"]=`${a},desc`;const c=u[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");const E=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(l.oChip.url.addSystemToServiceUrl(o),s,n,null,r,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure){E.uri+=`&$orderby=${c[0]} ${c[2]}`}else{E.uri+=`&$orderby=${c[0]} ${c[1]}`}this.writeData={};this.comparisionChartODataRef=E.model.read(E.uri,null,null,true,t=>{if(t&&t.results&&t.results.length){if(E.unit){l.writeData.unit=E.unit}l.oConfig.TILE_PROPERTIES.FINALVALUE=t;l.oConfig.TILE_PROPERTIES.FINALVALUE=l._processDataForComparisonChart(l.oConfig.TILE_PROPERTIES.FINALVALUE,n.split(",")[0],E.unit);l.writeData.data=t;let i;for(let e=0;e<l.oConfig.TILE_PROPERTIES.FINALVALUE.length;e++){if(l.oConfig.TILE_PROPERTIES.FINALVALUE[e].title==l.DEFINITION_DATA.EVALUATION.COLUMN_NAME){l.writeData.numericData=l.oConfig.TILE_PROPERTIES.FINALVALUE[e];calculatedValueforScaling=l.oConfig.TILE_PROPERTIES.FINALVALUE[e].value;l.getTrendIndicator(l.setThresholdValues().trendValue,calculatedValueforScaling);l._updateTileModel({valueColor:l.oConfig.TILE_PROPERTIES.FINALVALUE[e].color,value:sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(i),l.oConfig.EVALUATION.SCALING,l.oConfig.EVALUATION.DECIMAL_PRECISION).toString()});break}}sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(l.oConfig.TILE_PROPERTIES.id,l.writeData);e.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(t.results.length==0){l.oConfig.TILE_PROPERTIES.FINALVALUE=t;l.writeData.data=t;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(l.oConfig.TILE_PROPERTIES.id,l.writeData);e.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE)}else{i.call(l,"no Response from QueryServiceUri")}},e=>{if(e&&e.response){t.error(`${e.message} : ${e.request.requestUri}`);i.call(l,e)}});if(!l.writeData.numericData){const e=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(l.DEFINITION_DATA.EVALUATION_FILTERS,l.DEFINITION_DATA.ADDITIONAL_FILTERS);const t=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(l.oChip.url.addSystemToServiceUrl(o),s,a,null,e);if(t){l.QUERY_SERVICE_MODEL=t.model;l.queryUriForKpiValue=t.uri;l.numericODataReadRef=l.QUERY_SERVICE_MODEL.read(t.uri,null,null,true,e=>{if(e&&e.results&&e.results.length){if(t.unit){l._updateTileModel({unitNumeric:e.results[0][t.unit.name]});l.writeData.unitNumeric=t.unit;l.writeData.unitNumeric.name=t.unit.name}l.writeData.numericData=e.results[0];l.DEFINITION_DATA.value=l.writeData.numericData[l.DEFINITION_DATA.EVALUATION.COLUMN_NAME];l.writeData.numericData.color=l.getTrendColor(l.setThresholdValues());l.DEFINITION_DATA.valueColor=l.writeData.numericData.color;let i="";let o=e.results[0][l.DEFINITION_DATA.EVALUATION.COLUMN_NAME];const s=l.getTrendIndicator(l.setThresholdValues().trendValue,o);if(l.oConfig.EVALUATION.SCALING==-2){o*=100;l.getView().oNumericContent.setFormatterValue(false)}i=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(o),l.oConfig.EVALUATION.SCALING,l.oConfig.EVALUATION.DECIMAL_PRECISION);if(l.oConfig.EVALUATION.SCALING==-2){l._updateTileModel({scale:"%"})}l._updateTileModel({value:i.toString(),valueColor:l.writeData.numericData.color,indicator:s})}else{i.call(l,"no Response from QueryServiceUri")}})}}}else{if(u.unit){l._updateTileModel({unit:u.data.results[0][u.unit.name]})}if(u.data&&u.data.results&&u.data.results.length){l.oConfig.TILE_PROPERTIES.FINALVALUE=u.data;l._updateTileModel({value:u.data.results[0][l.DEFINITION_DATA.EVALUATION.COLUMN_NAME]});l.oConfig.TILE_PROPERTIES.FINALVALUE=l._processDataForComparisonChart(l.oConfig.TILE_PROPERTIES.FINALVALUE,n,l.writeData.unit);e.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(r.results.length==0){l.oConfig.TILE_PROPERTIES.FINALVALUE=u.data;e.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE)}else{i.call(l,"no Response from QueryServiceUri")}}}catch(e){i.call(l,e)}},flowWithoutDesignTimeCall:function(){const e=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oChip.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(i){this.CALCULATED_KPI_VALUE=i;e.oDualComparisonView.oGenericTile.setFrameType("TwoByOne");e.oDualComparisonView.oGenericTile.removeAllTileContent();e.oDualComparisonView.oGenericTile.addTileContent(e.oDualComparisonView.oNumericTile);e.oDualComparisonView.oGenericTile.addTileContent(e.oDualComparisonView.oComparisonTile);const t=this.CALCULATED_KPI_VALUE;let l;let o;for(let i=0;i<t.length;i++){if(t[i].title==e.DEFINITION_DATA.EVALUATION.COLUMN_NAME){o=t[i].value;l=t[i].color||"Neutral";e._updateTileModel({value:sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(o),e.oConfig.EVALUATION.SCALING,e.oConfig.EVALUATION.DECIMAL_PRECISION).toString(),valueColor:l});break}}if(!l&&!o){l=e.DEFINITION_DATA.valueColor;o=e.DEFINITION_DATA.value}this._updateTileModel({value:sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(o),e.oConfig.EVALUATION.SCALING,e.oConfig.EVALUATION.DECIMAL_PRECISION).toString(),data:this.CALCULATED_KPI_VALUE});const s=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system);e.oDualComparisonView.oGenericTile.$().wrap(`<a href ='${s}'></a>`);this.oDualComparisonView.oGenericTile.setState(a.Loaded);let n="";if(l=="Error"){n="sb.error"}if(l=="Neutral"){n="sb.neutral"}if(l=="Critical"){n="sb.critical"}if(l=="Good"){n="sb.good"}const r=e.setThresholdValues();let u;let c;let E;let T;let A;let C;let L;let I;let h;if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[0]){u=this.CALCULATED_KPI_VALUE[0].title;T=this.CALCULATED_KPI_VALUE[0].value;L=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[0].color)}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[1]){c=this.CALCULATED_KPI_VALUE[1].title;A=this.CALCULATED_KPI_VALUE[1].value;I=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[1].color)}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[2]){E=this.CALCULATED_KPI_VALUE[2].title;C=this.CALCULATED_KPI_VALUE[2].value;h=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[2].color)}const g={status:n,actual:o,target:r.targetValue,cH:r.criticalHighValue,wH:r.warningHighValue,wL:r.warningLowValue,cL:r.criticalLowValue};const f={m1:u,v1:T,c1:L,m2:c,v2:A,c2:I,m3:E,v3:C,c3:h};const U=e.oDualComparisonView.oGenericTile.getTileContent()[0].getContent();const p=e.oDualComparisonView.oGenericTile.getTileContent()[1].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(U,"NT",g);sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(p,"COMP",f)},this.logError)}},flowWithDesignTimeCall:function(){const e=this;try{const i=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(i){e.oConfig.EVALUATION_FILTERS=i.EVALUATION_FILTERS;e.flowWithoutDesignTimeCall()}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,i=>{e.oConfig.EVALUATION_FILTERS=i;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(e.oConfig.TILE_PROPERTIES.id,e.oConfig);e.flowWithoutDesignTimeCall()})}}catch(e){this.logError(e)}},refreshHandler:function(e){if(!e.firstTimeVisible){if(Number(this.oChip.configuration.getParameterValueAsString("isSufficient"))){e.flowWithoutDesignTimeCall()}else{e.flowWithDesignTimeCall()}}},visibleHandler:function(e){if(!e){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}if(e){this.refreshHandler(this)}},onInit:function(){const e=this;this.firstTimeVisible=false;this.oDualComparisonView=this.getView();this.oChip=this.oDualComparisonView.getViewData().chip;if(this.oChip.visible){this.oChip.visible.attachVisible(this.visibleHandler.bind(this))}this.system=this.oChip.url.getApplicationSystem();this.oDualComparisonView.oGenericTile.setState(a.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oChip.configuration.getParameterValueAsString("tileConfiguration"),this.oChip.preview.isEnabled(),i=>{e.oConfig=i;if(e.oChip.preview){e.oChip.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system))}if(e.oChip.preview.isEnabled()){e.setTitle();e._updateTileModel({value:1,size:l.Auto,frameType:"TwoByOne",state:a.Loading,valueColor:s.Good,indicator:o.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1,color:"Good"},{title:"Measure 2",value:2,color:"Good"},{title:"Measure 3",value:3,color:"Good"}]});e.oDualComparisonView.oGenericTile.setState(a.Loaded)}else{e.setTitle();e.oDualComparisonView.oGenericTile.attachPress(()=>{sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(e.comparisionChartODataRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(e.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system)});if(Number(e.oChip.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(e.oConfig.TILE_PROPERTIES.id,e.oConfig);e.flowWithoutDesignTimeCall()}else{e.flowWithDesignTimeCall()}}})}catch(e){this.logError(e)}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualComparison/DualComparison.view", ["sap/ui/core/mvc/JSView","sap/ca/ui/model/format/NumberFormat","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/NumericContent","sap/m/TileContent","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],(e,i,t,o,a,r,s,l,n,u)=>{"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualComparison.DualComparison",{getControllerName:function(){return"tiles.indicatorDualComparison.DualComparison"},createContent:function(){this.setHeight("100%");this.setWidth("100%");const e=this;e.oGenericTileData={};e.oNumericContent=new a({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});e.oNumericTile=new r({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:e.oNumericContent});e.oCmprsDataTmpl=new s({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});e.oCmprsChrtTmpl=new l({size:"{/size}",scale:"{/scale}",data:{template:e.oCmprsDataTmpl,path:"/data"}});e.oComparisonTile=new r({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:e.oCmprsChrtTmpl});e.oGenericTile=new n({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[e.oNumericTile,e.oComparisonTile]});e.oGenericTileModel=new u;e.oGenericTileModel.setData(e.oGenericTileData);e.oGenericTile.setModel(e.oGenericTileModel);return e.oGenericTile}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualContribution/DualContribution.controller", ["sap/m/library","sap/ui/thirdparty/jquery","sap/base/Log"],(e,jQuery,i)=>{"use strict";const t=e.ValueColor;const l=e.Size;const o=e.DeviationIndicator;const s=e.LoadState;sap.ui.controller("tiles.indicatorDualContribution.DualContribution",{getTile:function(){return this.oDualContributionView.oGenericTile},_updateTileModel:function(e){const i=this.getTile().getModel().getData();jQuery.extend(i,e);this.getTile().getModel().setData(i);this.getTile().getModel().updateBindings()},setTitle:function(){const e=this;const i=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oChip);this._updateTileModel({header:i.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(e.oConfig),subheader:i.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(e.oConfig)})},formSelectStatement:function(e){const i=Object.keys(e);let t="";for(let l=0;l<i.length;l++){if(e[i[l]]!==undefined&&e.fullyFormedMeasure){t+=`,${e[i[l]]}`}}return t},logError:function(e){this.oDualContributionView.oGenericTile.setState(s.Failed);this.oDualContributionView.oGenericTile.setState(s.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e)},setThresholdValues:function(){const e=this;try{const i={};i.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break;case"MA":i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break;case"RA":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break}}else{i.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","FIXED");i.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","FIXED");i.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","FIXED");i.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","FIXED");i.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","FIXED");i.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","FIXED")}return i}catch(i){e.logError(i)}},getTrendIndicator:function(e,i){const t=this;e=Number(e);try{let t=o.None;if(e>i){t=o.Down}else if(e<i){t=o.Up}return t}catch(e){t.logError(e)}},_processDataForComparisonChart:function(e,i,t){const l=this.oConfig.TILE_PROPERTIES.semanticMeasure;const o=[];let s;for(let n=0;n<e.results.length;n++){const a=e.results[n];const r={};try{r.title=a[t].toString()}catch(e){r.title=""}r.value=Number(a[i]);let u=Number(a[i]);if(this.oConfig.EVALUATION.SCALING==-2){u*=100}s=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(u,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION);r.displayValue=s.toString();if(typeof l==="undefined"){r.color="Neutral"}else if(this.oConfig.EVALUATION.GOAL_TYPE==="MA"){if(r.value>a[l]){r.color="Good"}else{r.color="Error"}}else if(this.oConfig.EVALUATION.GOAL_TYPE==="MI"){if(r.value<a[l]){r.color="Good"}else{r.color="Error"}}else{r.color="Neutral"}o.push(r)}return o},fetchKpiValue:function(e,t){const l=this;try{const o=this.oConfig.EVALUATION.ODATA_URL;const s=this.oConfig.EVALUATION.ODATA_ENTITYSET;let n;if(this.oConfig.TILE_PROPERTIES.semanticMeasure){n=`${this.oConfig.EVALUATION.COLUMN_NAME},${this.oConfig.TILE_PROPERTIES.semanticMeasure}`}else{n=this.oConfig.EVALUATION.COLUMN_NAME}let a=this.oConfig.TILE_PROPERTIES.dimension;const r=this.oConfig.EVALUATION_VALUES;const u=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(l.oConfig.TILE_PROPERTIES.id);if(!u){const r=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);const u={};u["0"]=`${n},asc`;u["1"]=`${n},desc`;u["2"]=`${a},asc`;u["3"]=`${a},desc`;const c=u[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");const T=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(l.oChip.url.addSystemToServiceUrl(o),s,n,a,r,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure){T.uri+=`&$top=3&$orderby=${c[0]} ${c[2]}`}else{T.uri+=`&$top=3&$orderby=${c[0]} ${c[1]}`}this.comparisionChartODataRef=T.model.read(T.uri,null,null,true,i=>{if(T.unit[0]){l._updateTileModel({unitContribution:i.results[0][T.unit[0].name]});l.writeData.unitContribution=T.unit[0];l.writeData.unitContribution.name=T.unit[0].name}if(i&&i.results&&i.results.length){a=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(l.oChip.url.addSystemToServiceUrl(o),s,a);l.writeData.dimension=a;l.oConfig.TILE_PROPERTIES.FINALVALUE=i;l.oConfig.TILE_PROPERTIES.FINALVALUE=l._processDataForComparisonChart(l.oConfig.TILE_PROPERTIES.FINALVALUE,n.split(",")[0],a);l.writeData.data=i;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(l.oConfig.TILE_PROPERTIES.id,l.writeData);e.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(i.results.length==0){l.oConfig.TILE_PROPERTIES.FINALVALUE=i;l.writeData.data=i;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(l.oConfig.TILE_PROPERTIES.id,l.writeData)}else{t.call(l,"no Response from QueryServiceUri")}},e=>{if(e&&e.response){i.error(`${e.message} : ${e.request.requestUri}`);t.call(l,e)}});const E=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(l.DEFINITION_DATA.EVALUATION_FILTERS,l.DEFINITION_DATA.ADDITIONAL_FILTERS);const C=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(l.oChip.url.addSystemToServiceUrl(o),s,n,null,E);if(C){l.QUERY_SERVICE_MODEL=C.model;l.queryUriForKpiValue=C.uri;l.numericODataReadRef=l.QUERY_SERVICE_MODEL.read(C.uri,null,null,true,i=>{if(i&&i.results&&i.results.length){if(C.unit){l._updateTileModel({unitNumeric:i.results[0][C.unit.name]});l.writeData.unitNumeric=C.unit;l.writeData.unitNumeric.name=C.unit.name}l.writeData.numericData=i;let t="";let o=i.results[0][l.DEFINITION_DATA.EVALUATION.COLUMN_NAME];const s=l.getTrendIndicator(l.setThresholdValues().trendValue,o);if(l.oConfig.EVALUATION.SCALING==-2){o*=100;l.getView().oNumericContent.setFormatterValue(false)}l.DEFINITION_DATA.value=o;t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(o),l.oConfig.EVALUATION.SCALING,l.oConfig.EVALUATION.DECIMAL_PRECISION);if(l.oConfig.EVALUATION.SCALING==-2){l._updateTileModel({scale:"%"})}l._updateTileModel({value:t.toString(),valueColor:l.DEFINITION_DATA.TILE_PROPERTIES.semanticColorContribution,indicator:s});e.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE,o)}else{t.call(l,"no Response from QueryServiceUri")}})}}else{const i=l.setThresholdValues();let o;if(u.unitContribution){l._updateTileModel({unitContribution:u.data.results[0][u.unitContribution.name]})}if(u.unitNumeric){l._updateTileModel({unitNumeric:u.numericData.results[0][u.unitNumeric.name]})}if(u.data&&u.data.results&&u.data.results.length){a=u.dimension;l.oConfig.TILE_PROPERTIES.FINALVALUE=u.data;l.oConfig.TILE_PROPERTIES.FINALVALUE=l._processDataForComparisonChart(l.oConfig.TILE_PROPERTIES.FINALVALUE,n.split(",")[0],a);e.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(r.results.length==0){l.oConfig.TILE_PROPERTIES.FINALVALUE=u.data}else{t.call(l,"no Response from QueryServiceUri")}if(u.numericData&&u.numericData.results&&u.numericData.results.length){o=u.numericData.results[0][l.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(l.oConfig.EVALUATION.SCALING==-2){o*=100;l.getView().oNumericContent.setFormatterValue(false)}const t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(o),l.oConfig.EVALUATION.SCALING,l.oConfig.EVALUATION.DECIMAL_PRECISION);if(l.oConfig.EVALUATION.SCALING==-2){l._updateTileModel({scale:"%"})}const s=l.getTrendIndicator(i.trendValue,o);l._updateTileModel({value:t.toString(),indicator:s,valueColor:l.DEFINITION_DATA.TILE_PROPERTIES.semanticColorContribution});e.call(l,l.oConfig.TILE_PROPERTIES.FINALVALUE,o)}else{t.call(l,"no Response from QueryServiceUri")}}}catch(e){t.call(l,e)}},flowWithoutDesignTimeCall:function(){const e=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oChip.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(i,t){this.CALCULATED_KPI_VALUE=i;if(e.oConfig.TILE_PROPERTIES.frameType=="TwoByOne"){e.oDualContributionView.oGenericTile.setFrameType("TwoByOne");e.oDualContributionView.oGenericTile.removeAllTileContent();e.oDualContributionView.oGenericTile.addTileContent(e.oDualContributionView.oNumericTile);e.oDualContributionView.oGenericTile.addTileContent(e.oDualContributionView.oComparisonTile)}else{e.oDualContributionView.oGenericTile.setFrameType("OneByOne");e.oDualContributionView.oGenericTile.removeAllTileContent();e.oDualContributionView.oGenericTile.addTileContent(e.oDualContributionView.oComparisonTile)}const l=this.CALCULATED_KPI_VALUE;const o=this.DEFINITION_DATA.TILE_PROPERTIES.semanticColorContribution;for(let e=0;e<this.CALCULATED_KPI_VALUE.length;e++){l[e].color=o}this._updateTileModel({data:l});let n=e.setThresholdValues();const a=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system);e.oDualContributionView.oGenericTile.$().wrap(`<a href ='${a}'></a>`);this.oDualContributionView.oGenericTile.setState(s.Loaded);let r="";if(o=="Error"){r="sb.error"}if(o=="Neutral"){r="sb.neutral"}if(o=="Critical"){r="sb.critical"}if(o=="Good"){r="sb.good"}n=e.setThresholdValues();let u;let c;let T;let E;let C;let h;let A;let g;let I;if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[0]){u=this.CALCULATED_KPI_VALUE[0].title;E=this.CALCULATED_KPI_VALUE[0].value;A=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[0].color)}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[1]){c=this.CALCULATED_KPI_VALUE[1].title;C=this.CALCULATED_KPI_VALUE[1].value;g=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[1].color)}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[2]){T=this.CALCULATED_KPI_VALUE[2].title;h=this.CALCULATED_KPI_VALUE[2].value;I=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[2].color)}const p={status:r,actual:t,target:n.targetValue,cH:n.criticalHighValue,wH:n.warningHighValue,wL:n.warningLowValue,cL:n.criticalLowValue};const d={m1:u,v1:E,c1:A,m2:c,v2:C,c2:g,m3:T,v3:h,c3:I};const f=e.oDualContributionView.oGenericTile.getTileContent()[0].getContent();const m=e.oDualContributionView.oGenericTile.getTileContent()[1].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(f,"NT",p);sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(m,"CONT",d)},this.logError)}},flowWithDesignTimeCall:function(){const e=this;try{const i=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(i){e.oConfig.EVALUATION_FILTERS=i.EVALUATION_FILTERS;e.flowWithoutDesignTimeCall()}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,i=>{e.oConfig.EVALUATION_FILTERS=i;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(e.oConfig.TILE_PROPERTIES.id,e.oConfig);e.flowWithoutDesignTimeCall()})}}catch(e){this.logError(e)}},refreshHandler:function(e){if(!e.firstTimeVisible){if(Number(this.oChip.configuration.getParameterValueAsString("isSufficient"))){e.flowWithoutDesignTimeCall()}else{e.flowWithDesignTimeCall()}}},visibleHandler:function(e){if(!e){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}if(e){this.refreshHandler(this)}},onInit:function(){const e=this;e.writeData={};this.firstTimeVisible=false;this.oDualContributionView=this.getView();this.oChip=this.oDualContributionView.getViewData().chip;if(this.oChip.visible){this.oChip.visible.attachVisible(this.visibleHandler.bind(this))}this.system=this.oChip.url.getApplicationSystem();this.oDualContributionView.oGenericTile.setState(s.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oChip.configuration.getParameterValueAsString("tileConfiguration"),this.oChip.preview.isEnabled(),i=>{e.oConfig=i;if(e.oChip.preview){e.oChip.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system))}if(e.oChip.preview.isEnabled()){e.setTitle();e._updateTileModel({value:8888,size:l.Auto,frameType:"TwoByOne",state:s.Loading,valueColor:t.Error,indicator:o.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral",displayValue:""},{title:"EMEA",value:50,color:"Neutral",displayValue:""},{title:"APAC",value:-20,color:"Neutral",displayValue:""}]});e.oDualContributionView.oGenericTile.setState(s.Loaded)}else{e.setTitle();e.oDualContributionView.oGenericTile.attachPress(()=>{sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(e.comparisionChartODataRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(e.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system)});if(Number(e.oChip.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(e.oConfig.TILE_PROPERTIES.id,e.oConfig);e.flowWithoutDesignTimeCall()}else{e.flowWithDesignTimeCall()}}})}catch(e){this.logError(e)}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualContribution/DualContribution.view", ["sap/ui/core/mvc/JSView","sap/ca/ui/model/format/NumberFormat","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/NumericContent","sap/m/TileContent","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],(e,i,t,o,a,r,n,l,s,u)=>{"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualContribution.DualContribution",{getControllerName:function(){return"tiles.indicatorDualContribution.DualContribution"},createContent:function(){this.setHeight("100%");this.setWidth("100%");const e=this;e.oGenericTileData={};e.oNumericContent=new a({value:"{/value}",scale:"{/scale}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});e.oNumericTile=new r({unit:"{/unitNumeric}",size:"{/size}",footer:"{/footerNum}",content:e.oNumericContent});e.oCmprsDataTmpl=new n({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});e.oCmprsChrtTmpl=new l({size:"{/size}",scale:"{/scale}",data:{template:e.oCmprsDataTmpl,path:"/data"}});e.oComparisonTile=new r({unit:"{/unitContribution}",size:"{/size}",footer:"{/footerComp}",content:e.oCmprsChrtTmpl});e.oGenericTile=new s({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[e.oNumericTile,e.oComparisonTile]});e.oGenericTileModel=new u;e.oGenericTileModel.setData(e.oGenericTileData);e.oGenericTile.setModel(e.oGenericTileModel);return e.oGenericTile}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualDeviation/DualDeviation.controller", ["sap/ui/model/json/JSONModel","sap/m/library","sap/ui/thirdparty/jquery"],(e,i,jQuery)=>{"use strict";const t=i.DeviationIndicator;const l=i.ValueColor;const o=i.LoadState;sap.ui.controller("tiles.indicatorDualDeviation.DualDeviation",{logError:function(e){this.oDualDeviationView.oGenericTile.setState(o.Failed);this.oDualDeviationView.oGenericTile.setState(o.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e)},getThresholdsObjAndColor:function(e){try{const i={};i.arrObj=[];i.returnColor=l.Neutral;const t=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;let o;let a;let s;let r;if(t==="MI"){s=Number(e.criticalHighValue)||0;r=Number(e.warningHighValue)||0;if(s&&r){s=window.parseFloat(s);r=window.parseFloat(r);i.arrObj.push({value:s,color:l.Error});i.arrObj.push({value:r,color:l.Critical});if(this.CALCULATED_KPI_VALUE<r){i.returnColor=l.Good}else if(this.CALCULATED_KPI_VALUE<=s){i.returnColor=l.Critical}else{i.returnColor=l.Error}}}else if(t==="MA"){a=Number(e.criticalLowValue)||0;o=Number(e.warningLowValue)||0;if(a&&o){a=window.parseFloat(a);o=window.parseFloat(o);i.arrObj.push({value:a,color:l.Error});i.arrObj.push({value:o,color:l.Critical});if(this.CALCULATED_KPI_VALUE<a){i.returnColor=l.Error}else if(this.CALCULATED_KPI_VALUE<=o){i.returnColor=l.Critical}else{i.returnColor=l.Good}}}else{s=Number(e.criticalHighValue)||0;r=Number(e.warningHighValue)||0;a=Number(e.criticalLowValue)||0;o=Number(e.warningLowValue)||0;if(o&&r&&a&&a){s=window.parseFloat(s);r=window.parseFloat(r);o=window.parseFloat(o);a=window.parseFloat(a);i.arrObj.push({value:s,color:l.Error});i.arrObj.push({value:r,color:l.Critical});i.arrObj.push({value:o,color:l.Critical});i.arrObj.push({value:a,color:l.Error});if(this.CALCULATED_KPI_VALUE<a||this.CALCULATED_KPI_VALUE>s){i.returnColor=l.Error}else if(this.CALCULATED_KPI_VALUE>=a&&this.CALCULATED_KPI_VALUE<=o||this.CALCULATED_KPI_VALUE>=r&&this.CALCULATED_KPI_VALUE<=s){i.returnColor=l.Critical}else{i.returnColor=l.Good}}}return i}catch(e){this.logError(e)}},getTrendIndicator:function(e,i){const l=this;e=Number(e);try{let l=t.None;if(e>i){l=t.Down}else if(e<i){l=t.Up}return l}catch(e){l.logError(e)}},getTile:function(){return this.oDualDeviationView.oGenericTile},_updateTileModel:function(e){const i=this.getTile().getModel().getData();jQuery.extend(i,e);this.getTile().getModel().setData(i)},formSelectStatement:function(e){const i=Object.keys(e);let t="";for(let l=0;l<i.length;l++){if(e[i[l]]!==undefined&&e.fullyFormedMeasure){t+=`,${e[i[l]]}`}}return t},setThresholdValues:function(){const e=this;const i={};i.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break;case"MA":i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break;case"RA":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break}}else{i.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","FIXED");i.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","FIXED");i.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","FIXED");i.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","FIXED");i.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","FIXED");i.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","FIXED")}return i},fetchKpiValue:function(e,i){const t=this;let l=0;try{const o=this.DEFINITION_DATA.EVALUATION.ODATA_URL;const a=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;let s=this.setThresholdValues();const r=s.fullyFormedMeasure;const n=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!n){const n=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);const u=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(o),a,r,null,n);if(u){this.QUERY_SERVICE_MODEL=u.model;this.queryUriForKpiValue=u.uri;try{this.queryServiceUriODataReadRef=this.QUERY_SERVICE_MODEL.read(u.uri,null,null,true,o=>{t.writeData={};if(o&&o.results&&o.results.length){l=o.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(u.unit[0]){t._updateTileModel({unit:o.results[0][u.unit[0].name]});t.writeData.unit=u.unit[0];t.writeData.unit.name=u.unit[0].name}t.writeData.numericData=o;let i="";let a=l;if(t.oConfig.EVALUATION.SCALING==-2){a*=100;t.getView().oNumericContent.setFormatterValue(false)}i=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(a),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);const r=t.getTrendIndicator(s.trendValue,a);if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"})}t._updateTileModel({value:i.toString(),indicator:r,valueColor:t.getThresholdsObjAndColor(s).returnColor});t.writeData.data=o;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){s.criticalHighValue=o.results[0][s.sCriticalHigh];s.criticalLowValue=o.results[0][s.sCriticalLow];s.warningHighValue=o.results[0][s.sWarningHigh];s.warningLowValue=o.results[0][s.sWarningLow];s.targetValue=o.results[0][s.sTarget];s.trendValue=o.results[0][s.sTrend]}e.call(t,l,s)}else{i.call(t,"no Response from QueryServiceUri")}},e=>{if(e&&e.response){i.call(t,e.message)}})}catch(e){t.logError("Error in Query Service URI")}}}else if(n.data&&n.data.results&&n.data.results.length){let i;s=t.setThresholdValues();i=n.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(t.oConfig.EVALUATION.SCALING==-2){i*=100;t.getView().oNumericContent.setFormatterValue(true)}if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"})}const l=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(i),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);const o=t.getTrendIndicator(s.trendValue,i);if(n.unit){t._updateTileModel({unit:n.data.results[0][n.unit.name]})}t._updateTileModel({indicator:o,value:l.toString()});if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){s.criticalHighValue=n.data.results[0][s.sCriticalHigh];s.criticalLowValue=n.data.results[0][s.sCriticalLow];s.warningHighValue=n.data.results[0][s.sWarningHigh];s.warningLowValue=n.data.results[0][s.sWarningLow];s.targetValue=n.data.results[0][s.sTarget];s.trendValue=n.data.results[0][s.sTrend]}e.call(t,n.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME],s)}else{i.call(t,"no Response from QueryServiceUri")}}catch(e){i.call(t,e)}},flowWithoutDesignTimeCall:function(){const e=this;let i;let t;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oTileApi.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(l,a){let s=Number(l);if(this.oConfig.EVALUATION.SCALING==-2){s*=100}i=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(s),this.oConfig.EVALUATION.SCALING,e.oConfig.EVALUATION.DECIMAL_PRECISION);this.CALCULATED_KPI_VALUE=Number(l);const r={};const n=this.getThresholdsObjAndColor(a);const u={value:Number(l),color:n.returnColor};r.valueColor=u.color;r.actualValueLabel=i.toString();r.actual=u;const c=this.DEFINITION_DATA.EVALUATION_VALUES;let T;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T=Number(a.targetValue);if(this.oConfig.EVALUATION.SCALING==-2){T*=100}t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(T,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION);r.targetValue=Number(a.targetValue);r.targetValueLabel=t.toString()}else{for(let e=0;e<c.length;e++){if(c[e].TYPE==="TA"){T=Number(c[e].FIXED);if(this.oConfig.EVALUATION.SCALING==-2){T*=100}t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(T);r.targetValue=Number(c[e].FIXED);r.targetValueLabel=t.toString()}}}this._updateTileModel(r);const g=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system);e.oDualDeviationView.oGenericTile.$().wrap(`<a href ='${g}'></a>`);this.oDualDeviationView.oGenericTile.setState(o.Loaded);let h="";if(r.valueColor=="Error"){h="sb.error"}if(r.valueColor=="Neutral"){h="sb.neutral"}if(r.valueColor=="Critical"){h="sb.critical"}if(r.valueColor=="Good"){h="sb.good"}const E={status:h,actual:s,target:a.targetValue,cH:a.criticalHighValue,wH:a.warningHighValue,wL:a.warningLowValue,cL:a.criticalLowValue};const A=E;const d=e.oDualDeviationView.oGenericTile.getTileContent()[0].getContent();const C=e.oDualDeviationView.oGenericTile.getTileContent()[1].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(d,"NT",E);sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(C,"DT",A)},this.logError)}},flowWithDesignTimeCall:function(){const e=this;try{const i=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(i){e.oConfig.EVALUATION_FILTERS=i.EVALUATION_FILTERS;e.flowWithoutDesignTimeCall()}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,i=>{e.oConfig.EVALUATION_FILTERS=i;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(e.oConfig.TILE_PROPERTIES.id,e.oConfig);e.flowWithoutDesignTimeCall()})}}catch(e){this.logError(e)}},refreshHandler:function(e){if(!e.firstTimeVisible){if(Number(this.oTileApi.configuration.getParameterValueAsString("isSufficient"))){e.flowWithoutDesignTimeCall()}else{e.flowWithDesignTimeCall()}}},visibleHandler:function(e){if(!e){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef)}if(e){this.refreshHandler(this)}},setTextInTile:function(){const e=this;const i=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oTileApi);this._updateTileModel({header:i.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(e.oConfig),subheader:i.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(e.oConfig)})},onInit:function(){const e=this;this.firstTimeVisible=false;this.oDualDeviationView=this.getView();this.oViewData=this.oDualDeviationView.getViewData();this.oTileApi=this.oViewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this))}this.system=this.oTileApi.url.getApplicationSystem();this.oDualDeviationView.oGenericTile.setState(o.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(e.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),e.oTileApi.preview.isEnabled(),i=>{e.oConfig=i;e.setTextInTile();if(e.oTileApi.preview){e.oTileApi.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system))}if(e.oTileApi.preview.isEnabled()){e._updateTileModel({valueColor:"Good",value:100,frameType:"TwoByOne",unit:"USD",actual:{value:120,color:l.Good},targetValue:100,thresholds:[{value:0,color:l.Error},{value:50,color:l.Critical},{value:150,color:l.Critical},{value:200,color:l.Error}],showActualValue:true,showTargetValue:true});e.oDualDeviationView.oGenericTile.setState(o.Loaded)}else{e.oDualDeviationView.oGenericTile.attachPress(()=>{sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(e.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(e.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system)});if(Number(e.oTileApi.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(e.oConfig.TILE_PROPERTIES.id,e.oConfig);e.flowWithoutDesignTimeCall()}else{e.flowWithDesignTimeCall()}}})}catch(e){this.logError(e)}},_setLocalModelToTile:function(){if(!this.getTile().getModel()){this.getTile().setModel(new e({}))}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef)}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualDeviation/DualDeviation.view", ["sap/ui/core/mvc/JSView","sap/ca/ui/model/format/NumberFormat","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/library","sap/m/NumericContent","sap/m/TileContent","sap/suite/ui/microchart/BulletMicroChartData","sap/suite/ui/microchart/BulletMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],(e,t,a,i,o,l,s,u,r,n,c)=>{"use strict";const m=o.Size;const h=o.LoadState;sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualDeviation.DualDeviation",{getControllerName:function(){return"tiles.indicatorDualDeviation.DualDeviation"},createContent:function(){const e=this;this.setHeight("100%");this.setWidth("100%");let t="Lorem ipsum";let a="Lorem ipsum";const i=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(i.title&&i.subTitle){t=i.title;a=i.subTitle}const o={subheader:a,header:t,footerNum:"",footerComp:"",frameType:"TwoByOne",state:h.Loading,scale:""};e.oNumericContent=new l({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});e.oNumericTile=new s({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:e.oNumericContent});const p=new u({value:"{value}",color:"{color}"});e.oBCTmpl=new r({size:m.Auto,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:p,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});const d=new s({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:e.oBCTmpl});e.oGenericTile=new n({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[e.oNumericTile,d]});const T=new c;T.setData(o);e.oGenericTile.setModel(T);return e.oGenericTile}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualTrend/DualTrend.controller", ["sap/ui/model/json/JSONModel","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartItem","sap/m/library","sap/ui/thirdparty/jquery"],(e,i,t,l,jQuery)=>{"use strict";const a=l.Size;const s=l.ValueColor;const r=l.DeviationIndicator;const o=l.LoadState;sap.ui.controller("tiles.indicatorDualTrend.DualTrend",{logError:function(e){this.oDualTrendView.oGenericTile.setState(o.Failed);this.oDualTrendView.oGenericTile.setState(o.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e)},formSelectStatement:function(e){const i=Object.keys(e);let t="";for(let l=0;l<i.length;l++){if(e[i[l]]!==undefined&&e.fullyFormedMeasure){t+=`,${e[i[l]]}`}}return t},setThresholdValues:function(){const e=this;try{const i={};i.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break;case"MA":i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break;case"RA":i.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");i.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");i.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");i.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");i.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");i.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");i.fullyFormedMeasure+=e.formSelectStatement(i);break}}else{i.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","FIXED");i.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","FIXED");i.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","FIXED");i.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","FIXED");i.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","FIXED");i.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","FIXED")}return i}catch(i){e.logError(i)}},getTrendIndicator:function(e,i){const t=this;e=Number(e);try{let t=r.None;if(e>i){t=r.Down}else if(e<i){t=r.Up}return t}catch(e){t.logError(e)}},getTile:function(){return this.oDualTrendView.oGenericTile},getTrendColor:function(e){const i=this;try{const i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;let t=s.Neutral;if(i==="MI"){if(e.criticalHighValue&&e.warningHighValue){e.criticalHighValue=Number(e.criticalHighValue);e.warningHighValue=Number(e.warningHighValue);if(this.CALCULATED_KPI_VALUE<e.warningHighValue){t=s.Good}else if(this.CALCULATED_KPI_VALUE<=e.criticalHighValue){t=s.Critical}else{t=s.Error}}}else if(i==="MA"){if(e.criticalLowValue&&e.warningLowValue){e.criticalLowValue=Number(e.criticalLowValue);e.warningLowValue=Number(e.warningLowValue);if(this.CALCULATED_KPI_VALUE<e.criticalLowValue){t=s.Error}else if(this.CALCULATED_KPI_VALUE<=e.warningLowValue){t=s.Critical}else{t=s.Good}}}else if(e.warningLowValue&&e.warningHighValue&&e.criticalLowValue&&e.criticalHighValue){e.criticalHighValue=Number(e.criticalHighValue);e.warningHighValue=Number(e.warningHighValue);e.warningLowValue=Number(e.warningLowValue);e.criticalLowValue=Number(e.criticalLowValue);if(this.CALCULATED_KPI_VALUE<e.criticalLowValue||this.CALCULATED_KPI_VALUE>e.criticalHighValue){t=s.Error}else if(this.CALCULATED_KPI_VALUE>=e.criticalLowValue&&this.CALCULATED_KPI_VALUE<=e.warningLowValue||this.CALCULATED_KPI_VALUE>=e.warningHighValue&&this.CALCULATED_KPI_VALUE<=e.criticalHighValue){t=s.Critical}else{t=s.Good}}return t}catch(e){i.logError(e)}},_updateTileModel:function(e){const i=this.getTile().getModel().getData();jQuery.extend(i,e);this.getTile().getModel().setData(i)},onAfterFinalEvaluation:function(){const e=this;const l=this.DEFINITION_DATA.EVALUATION.ODATA_URL;const a=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;const s=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;let r=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);let n=this.DEFINITION_DATA.TILE_PROPERTIES.dimension;if(n==undefined){this.logError();return}const u=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;const c=this.DEFINITION_DATA.EVALUATION_VALUES;let T;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){let i=s;switch(u){case"MI":e.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");e.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");e.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");e.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");if(e.sWarningHigh&&e.sCriticalHigh&&e.sTarget){i+=`,${e.sWarningHigh},${e.sCriticalHigh},${e.sTarget}`}break;case"MA":e.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");e.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");e.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");e.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");if(e.sWarningLow&&e.sCriticalLow&&e.sTarget){i+=`,${e.sWarningLow},${e.sCriticalLow},${e.sTarget}`}break;case"RA":e.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WH","MEASURE");e.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CH","MEASURE");e.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TA","MEASURE");e.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"TC","MEASURE");e.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"WL","MEASURE");e.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(e.oConfig,"CL","MEASURE");if(e.sWarningLow&&e.sCriticalLow&&e.sTarget&&e.sWarningHigh&&e.sCriticalHigh){i+=`,${e.sWarningLow},${e.sCriticalLow},${e.sTarget},${e.sWarningHigh},${e.sCriticalHigh}`}break}T=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(e.oTileApi.url.addSystemToServiceUrl(l),a,i,n,r)}else{T=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(e.oTileApi.url.addSystemToServiceUrl(l),a,s,n,r)}const h=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(e.oConfig.TILE_PROPERTIES.id);function E(l,a){const r=[];const o=[];const T=[];const h=[];const E=[];const g=[];let d=l.firstXlabel;let A;let f;let m;let L;let C;let N=l.lastXlabel;const p=Number(l.results[0][s]);const I=Number(l.results[l.results.length-1][s]);let U;for(U in l.results){l.results[U][n]=Number(U);l.results[U][s]=Number(l.results[U][s]);if(e.sWarningHigh){l.results[U][e.sWarningHigh]=Number(l.results[U][e.sWarningHigh])}if(e.sCriticalHigh){l.results[U][e.sCriticalHigh]=Number(l.results[U][e.sCriticalHigh])}if(e.sCriticalLow){l.results[U][e.sCriticalLow]=Number(l.results[U][e.sCriticalLow])}if(e.sWarningLow){l.results[U][e.sWarningLow]=Number(l.results[U][e.sWarningLow])}if(e.sTarget){l.results[U][e.sTarget]=Number(l.results[U][e.sTarget])}if(e.sWarningHigh){T.push(l.results[U][e.sWarningHigh])}if(e.sCriticalHigh){h.push(l.results[U][e.sCriticalHigh])}if(e.sCriticalLow){E.push(l.results[U][e.sCriticalLow])}if(e.sWarningLow){g.push(l.results[U][e.sWarningLow])}r.push(l.results[U][n]);o.push(l.results[U][s])}try{d=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(d);N=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(N)}catch(i){e.logError(i)}let V=Number(p);if(e.oConfig.EVALUATION.SCALING==-2){V*=100}const w=Math.min.apply(Math,o);let M=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(V,e.oConfig.EVALUATION.SCALING,e.oConfig.EVALUATION.DECIMAL_PRECISION);if(e.oConfig.EVALUATION.SCALING==-2){M+=" %"}const S=M.toString();let D=Number(I);if(e.oConfig.EVALUATION.SCALING==-2){D*=100}const b=Math.max.apply(Math,o);let R=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(D,e.oConfig.EVALUATION.SCALING,e.oConfig.EVALUATION.DECIMAL_PRECISION);if(e.oConfig.EVALUATION.SCALING==-2){R+=" %"}const O=R.toString();let H;let _;try{H=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.min.apply(Math,r));_=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.max.apply(Math,r))}catch(i){e.logError(i)}if(a=="MEASURE"){if(T.length!=0){e.firstwH=T[H];e.lastwH=T[_]}if(h.length!=0){e.firstcH=h[H];e.lastcH=h[_]}if(E.length!=0){e.firstcL=E[H];e.lastcL=E[_]}if(g.length!=0){e.firstwL=g[H];e.lastwL=g[_]}}const F={width:"100%",height:"100%",unit:e.unit||"",chart:{color:"Neutral",data:l.results},size:"Auto",minXValue:H,maxXValue:_,minYValue:w,maxYValue:b,firstXLabel:{label:`${d}`,color:"Neutral"},lastXLabel:{label:`${N}`,color:"Neutral"},firstYLabel:{label:`${S}`,color:"Neutral"},lastYLabel:{label:`${O}`,color:"Neutral"},minLabel:{},maxLabel:{}};let v;switch(u){case"MA":for(U in c){if(c[U].TYPE=="CL"){F.minThreshold={color:"Error"};v={};v[n]="";v[s]=Number(c[U].FIXED);e.cl=Number(c[U].FIXED);F.minThreshold.data=a=="MEASURE"?l.results:[v];A=a=="MEASURE"?e.sCriticalLow:s}else if(c[U].TYPE=="WL"){F.maxThreshold={color:"Good"};v={};v[n]="";v[s]=Number(c[U].FIXED);F.maxThreshold.data=a=="MEASURE"?l.results:[v];f=a=="MEASURE"?e.sWarningLow:s;e.wl=Number(c[U].FIXED)}else if(c[U].TYPE=="TA"){v={};v[n]="";v[s]=Number(c[U].FIXED);F.target={color:"Neutral"};F.target.data=a=="MEASURE"?l.results:[v];C=a=="MEASURE"?e.sTarget:s}}F.innerMinThreshold={data:[]};F.innerMaxThreshold={data:[]};if(a=="FIXED"){F.firstYLabel.color=p<e.cl?"Error":e.cl<=p&&p<=e.wl?"Critical":p>e.wl?"Good":"Neutral";F.lastYLabel.color=I<e.cl?"Error":e.cl<=I&&I<=e.wl?"Critical":I>e.wl?"Good":"Neutral"}else if(a=="MEASURE"&&e.firstwL&&e.lastwL&&e.firstcL&&e.lastcL){F.firstYLabel.color=p<e.firstcL?"Error":e.firstcL<=p&&p<=e.firstwL?"Critical":p>e.firstwL?"Good":"Neutral";F.lastYLabel.color=I<e.lastcL?"Error":e.lastcL<=I&&I<=e.lastwL?"Critical":I>e.lastwL?"Good":"Neutral"}break;case"MI":for(U in c){if(c[U].TYPE=="CH"){v={};v[n]="";v[s]=Number(c[U].FIXED);e.ch=Number(c[U].FIXED);F.maxThreshold={color:"Error"};F.maxThreshold.data=a=="MEASURE"?l.results:[v];f=a=="MEASURE"?e.sCriticalHigh:s}else if(c[U].TYPE=="WH"){v={};v[n]="";v[s]=Number(c[U].FIXED);e.wh=Number(c[U].FIXED);F.minThreshold={color:"Good"};F.minThreshold.data=a=="MEASURE"?l.results:[v];A=a=="MEASURE"?e.sWarningHigh:s}else if(c[U].TYPE=="TA"){v={};v[n]="";v[s]=Number(c[U].FIXED);F.target={color:"Neutral"};F.target.data=a=="MEASURE"?l.results:[v];C=a=="MEASURE"?e.sTarget:s}}if(a=="FIXED"){F.firstYLabel.color=p>e.ch?"Error":e.wh<=p&&p<=e.ch?"Critical":p<e.wh?"Good":"Neutral";F.lastYLabel.color=I>e.ch?"Error":e.wh<=I&&I<=e.ch?"Critical":I<e.wh?"Good":"Neutral"}else if(a=="MEASURE"&&e.firstwH&&e.lastwH&&e.firstcH&&e.lastcH){F.firstYLabel.color=p>e.firstcH?"Error":e.firstwH<=p&&p<=e.firstcH?"Critical":p<e.firstwH?"Good":"Neutral";F.lastYLabel.color=I>e.lastcH?"Error":e.lastwH<=I&&I<=e.lastcH?"Critical":I<e.lastwH?"Good":"Neutral"}F.innerMaxThreshold={data:[]};F.innerMinThreshold={data:[]};break;case"RA":for(U in c){if(c[U].TYPE=="CH"){v={};v[n]="";v[s]=Number(c[U].FIXED);e.ch=Number(c[U].FIXED);F.maxThreshold={color:"Error"};F.maxThreshold.data=a=="MEASURE"?l.results:[v];f=a=="MEASURE"?e.sCriticalHigh:s}else if(c[U].TYPE=="WH"){v={};v[n]="";v[s]=Number(c[U].FIXED);e.wh=Number(c[U].FIXED);F.innerMaxThreshold={color:"Good"};F.innerMaxThreshold.data=a=="MEASURE"?l.results:[v];L=a=="MEASURE"?e.sWarningHigh:s}else if(c[U].TYPE=="WL"){v={};v[n]="";v[s]=Number(c[U].FIXED);e.wl=Number(c[U].FIXED);F.innerMinThreshold={color:"Good"};F.innerMinThreshold.data=a=="MEASURE"?l.results:[v];m=a=="MEASURE"?e.sWarningLow:s}else if(c[U].TYPE=="CL"){v={};v[n]="";v[s]=Number(c[U].FIXED);e.cl=Number(c[U].FIXED);F.minThreshold={color:"Error"};F.minThreshold.data=a=="MEASURE"?l.results:[v];A=a=="MEASURE"?e.sCriticalLow:s}else if(c[U].TYPE=="TA"){v={};v[n]="";v[s]=Number(c[U].FIXED);F.target={color:"Neutral"};F.target.data=a=="MEASURE"?l.results:[v];C=a=="MEASURE"?e.sTarget:s}}if(a=="FIXED"){F.firstYLabel.color=p>e.ch||p<e.cl?"Error":e.wh<=p&&p<=e.ch||e.cl<=p&&p<=e.wl?"Critical":p>=e.wl&&p<=e.wh?"Good":"Neutral";F.lastYLabel.color=I>e.ch||I<e.cl?"Error":e.wh<=I&&I<=e.ch||e.cl<=I&&I<=e.wl?"Critical":I>=e.wl&&I<=e.wh?"Good":"Neutral"}else if(a=="MEASURE"&&e.firstwL&&e.lastwL&&e.firstcL&&e.lastcL&&e.firstwH&&e.lastwH&&e.firstcH&&e.lastcH){F.firstYLabel.color=p>e.firstcH||p<e.firstcL?"Error":e.firstwH<=p&&p<=e.firstcH||e.firstcL<=p&&p<=e.firstwL?"Critical":p>=e.firstwL&&p<=e.firstwH?"Good":"Neutral";F.lastYLabel.color=I>e.lastcH||I<e.lastcL?"Error":e.lastwH<=I&&I<=e.lastcH||e.lastcL<=I&&I<=e.lastwL?"Critical":I>=e.lastwL&&I<=e.lastwH?"Good":"Neutral"}break}function y(e,l,a){return new t({color:`{/${e}/color}`,points:{path:`/${e}/data`,template:new i({x:`{${l}}`,y:`{${a}}`})}})}e.getTile().getTileContent()[1].getContent().setTarget(y("target",n,C));e.getTile().getTileContent()[1].getContent().setInnerMinThreshold(y("innerMinThreshold",n,m));e.getTile().getTileContent()[1].getContent().setInnerMaxThreshold(y("innerMaxThreshold",n,L));e.getTile().getTileContent()[1].getContent().setMinThreshold(y("minThreshold",n,A));e.getTile().getTileContent()[1].getContent().setMaxThreshold(y("maxThreshold",n,f));e.getTile().getTileContent()[1].getContent().setChart(y("chart",n,s));e._updateTileModel(F)}if(!h){if(T){this.queryUriForTrendChart=T.uri;e.writeData={};try{this.trendChartODataReadRef=T.model.read(T.uri,null,null,true,i=>{if(i&&i.results&&i.results.length){if(T.unit[0]){e.unit=i.results[0][T.unit[0].name];e.writeData.unit=T.unit[0];e.writeData.unit.name=T.unit[0].name}e.queryUriResponseForTrendChart=i;n=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(e.oTileApi.url.addSystemToServiceUrl(l),a,n);i.firstXlabel=i.results[0][n];i.lastXlabel=i.results[i.results.length-1][n];e.writeData.data=i;e.writeData.dimensionName=n;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(e.oConfig.TILE_PROPERTIES.id,e.writeData);const t=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system);e.oDualTrendView.oGenericTile.$().wrap(`<a href ='${t}'></a>`);e.oDualTrendView.oGenericTile.setState(o.Loaded);E(i,e.DEFINITION_DATA.EVALUATION.VALUES_SOURCE)}else{e.logError("no Response from QueryServiceUri")}},i=>{if(i&&i.response){e.logError("Data call failed")}})}catch(i){e.logError(i)}}else{e.logError()}r=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(e.DEFINITION_DATA.EVALUATION_FILTERS,e.DEFINITION_DATA.ADDITIONAL_FILTERS);T=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(e.oTileApi.url.addSystemToServiceUrl(l),a,s,null,r);if(T){e.QUERY_SERVICE_MODEL=T.model;e.queryUriForKpiValue=T.uri;e.numericODataReadRef=e.QUERY_SERVICE_MODEL.read(T.uri,null,null,true,i=>{if(i&&i.results&&i.results.length){let t="";let l=i.results[0][e.DEFINITION_DATA.EVALUATION.COLUMN_NAME];e.writeData.numericData=i;if(e.oConfig.EVALUATION.SCALING==-2){l*=100}t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(l),e.oConfig.EVALUATION.SCALING,e.oConfig.EVALUATION.DECIMAL_PRECISION);if(e.oConfig.EVALUATION.SCALING==-2){e._updateTileModel({scale:"%"})}const a=e.getTrendIndicator(e.setThresholdValues().trendValue,l);e._updateTileModel({value:t.toString(),valueColor:e.getTrendColor(e.setThresholdValues()),indicator:a})}else{fnError.call(e,"no Response from QueryServiceUri")}})}}else{try{if(h.unit!==undefined){e.unit=h.data.results[0][h.unit.name]}e.queryUriResponseForTrendChart=h.data;n=h.dimensionName;const i=h.numericData.results[0][e.DEFINITION_DATA.EVALUATION.COLUMN_NAME];const t=e.getTrendIndicator(e.setThresholdValues().trendValue,h.data.results[0][e.DEFINITION_DATA.EVALUATION.COLUMN_NAME]);const l=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(i),e.oConfig.EVALUATION.SCALING,e.oConfig.EVALUATION.DECIMAL_PRECISION);e.oDualTrendView.oGenericTile.setState(o.Loaded);E(h.data,e.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);e._updateTileModel({value:l.toString(),valueColor:e.getTrendColor(e.setThresholdValues()),indicator:t})}catch(i){e.logError(i)}}},flowWithoutDesignTimeCall:function(){this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oTileApi.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true}this.onAfterFinalEvaluation()},flowWithDesignTimeCall:function(){const e=this;try{const i=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(i){e.oConfig.EVALUATION_FILTERS=i.EVALUATION_FILTERS;e.flowWithoutDesignTimeCall()}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,i=>{e.oConfig.EVALUATION_FILTERS=i;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(e.oConfig.TILE_PROPERTIES.id,e.oConfig);e.flowWithoutDesignTimeCall()})}}catch(e){this.logError(e)}},refreshHandler:function(e){if(!e.firstTimeVisible){if(Number(this.oTileApi.configuration.getParameterValueAsString("isSufficient"))){e.flowWithoutDesignTimeCall()}else{e.flowWithDesignTimeCall()}}},visibleHandler:function(e){if(!e){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef)}if(e){this.refreshHandler(this)}},setTextInTile:function(){const e=this;this._updateTileModel({header:e.oTileApi.preview.getTitle()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(e.oConfig),subheader:e.oTileApi.preview.getDescription()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(e.oConfig)})},onInit:function(){const e=this;this.firstTimeVisible=false;this.oDualTrendView=this.getView();this.oViewData=this.oDualTrendView.getViewData();this.oTileApi=this.oViewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this))}this.system=this.oTileApi.url.getApplicationSystem();this.oDualTrendView.oGenericTile.setState(o.Loading);if(this.oTileApi.preview.isEnabled()){this.setTextInTile();this._updateTileModel({value:8888,size:a.Auto,frameType:"TwoByOne",state:o.Loading,valueColor:s.Error,indicator:r.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70}]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});this.oDualTrendView.oGenericTile.setState(o.Loaded)}else{try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),i=>{e.oConfig=i;e.setTextInTile();e.oDualTrendView.oGenericTile.attachPress(()=>{sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(e.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(e.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(e.oConfig,e.system)});if(Number(e.oTileApi.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(e.oConfig.TILE_PROPERTIES.id,e.oConfig);e.flowWithoutDesignTimeCall()}else{e.flowWithDesignTimeCall()}})}catch(e){this.logError(e)}}},_setLocalModelToTile:function(){if(!this.getTile().getModel()){this.getTile().setModel(new e({}))}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef)}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorDualTrend/DualTrend.view", ["sap/ui/core/mvc/JSView","sap/ca/ui/model/format/NumberFormat","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartLabel","sap/suite/ui/microchart/AreaMicroChart","sap/m/TileContent","sap/m/NumericContent","sap/m/GenericTile","sap/ui/model/json/JSONModel"],(e,a,t,i,r,n,s,l,o,u,c,h)=>{"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualTrend.DualTrend",{getControllerName:function(){return"tiles.indicatorDualTrend.DualTrend"},createContent:function(){this.setHeight("100%");this.setWidth("100%");function e(e){return new r({color:"Good",points:{path:`/${e}/data`,template:new n({x:"{day}",y:"{balance}"})}})}function a(e){return new s({label:`{/${e}/label}`,color:`{/${e}/color}`})}const t={footer:"",header:"",subheader:""};const i=new l({width:"{/width}",height:"{/height}",size:"{/size}",target:e("target"),innerMinThreshold:e("innerMinThreshold"),innerMaxThreshold:e("innerMaxThreshold"),minThreshold:e("minThreshold"),maxThreshold:e("maxThreshold"),chart:e("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:a("firstXLabel"),lastXLabel:a("lastXLabel"),firstYLabel:a("firstYLabel"),lastYLabel:a("lastYLabel"),minLabel:a("minLabel"),maxLabel:a("maxLabel")});const m=new o({unit:"{/unit}",size:"{/size}",content:i});const d=new u({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});const b=new o({unit:"{/unit}",size:"{/size}",content:d});this.oGenericTile=new c({subheader:"{/subheader}",frameType:"TwoByOne",size:"{/size}",header:"{/header}",tileContent:[b,m]});const p=new h;p.setData(t);this.oGenericTile.setModel(p);return this.oGenericTile}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorHarveyBall/HarveyBallTile.controller", ["sap/ui/model/json/JSONModel","sap/suite/ui/commons/library"],(e,t)=>{"use strict";const i=t.InfoTileValueColor;const a=t.InfoTileSize;const s=t.LoadState;sap.ui.controller("tiles.indicatorHarveyBall.HarveyBallTile",{onInit:function(){this.getView().setModel(new e);this.initializeVariables();this.attachHandlers();this.getVariable("tile").setState(s.Loading);this.readChipConfiguration()},attachHandlers:function(){const e=this;const t=this.getVariable("chip");if(t.visible){t.visible.attachVisible(t=>{if(t){e.onVisible()}else{e.abortAllOpenODataRequests()}})}this.getVariable("tile").attachPress(()=>{e.abortAllOpenODataRequests();const t=e.getVariable("indicatorUtils");e.getVariable("cache").setKpivalueById(e.getVariable("chipId"),null);window.location.hash=t.getNavigationTarget(e.getVariable("evalData"),e.getVariable("system"))})},initializeVariables:function(){this._variables={};this._oDataRequests={};const e=this.getView();const t=e.getViewData();const i=e.oTile;const a=t.chip;this.setVariable("indicatorUtils",sap.ushell.components.tiles.indicatorTileUtils.util);this.setVariable("cache",sap.ushell.components.tiles.indicatorTileUtils.cache);this.setVariable("hasAppeared",false);this.setVariable("chip",a);this.setVariable("tile",i);this.setVariable("tileControl",i.getTileContent()[0].getContent());this.setVariable("configurationString",a.configuration.getParameterValueAsString("tileConfiguration"));this.setVariable("system",a.url.getApplicationSystem())},getVariable:function(e){return this._variables[e]},setVariable:function(e,t){this._variables[e]=t},readChipConfiguration:function(){const e=this;const t=this.getVariable("chip");const i=this.getVariable("indicatorUtils");i.getParsedChip(this.getVariable("configurationString"),a=>{e.setVariable("evalData",a);e.setVariable("chipId",a.TILE_PROPERTIES.id);e.setVariable("tileProperties",a.TILE_PROPERTIES);if(t.preview){t.preview.setTargetUrl(i.getNavigationTarget(a,e.getVariable("system")));e.loadPreviewData();if(t.preview.isEnabled()){e.getVariable("tile").setState(s.Loaded)}else{e.loadActualData()}}})},loadPreviewData:function(){const e=this.getVariable("indicatorUtils").getTileTitleSubtitle(this.getVariable("chip"));this.getView().getModel().setData({fractionValue:34,value:100,size:a.Auto,frameType:"OneByOne",color:"Good",state:s.Loading,header:e.title||this.getVariable("indicatorUtils").getChipTitle(this.getVariable("evalData")),subheader:e.subTitle||this.getVariable("indicatorUtils").getChipSubTitle(this.getVariable("evalData"))})},loadActualData:function(){if(Number(this.getVariable("chip").configuration.getParameterValueAsString("isSufficient"))){this.getVariable("cache").setEvaluationById(this.getVariable("chipId"),this.getVariable("evalData"));this.onEvalFiltersFetched()}else{this.fetchEvalFilters(this.onEvalFiltersFetched)}},registerOpenODataRequest:function(e,t){this._oDataRequests[e]=t},deregisterOpenODataRequest:function(e){delete this._oDataRequests[e]},abortAllOpenODataRequests:function(){for(const e in this._oDataRequests){try{this.getVariable("indicatorUtils").abortPendingODataCalls(this._oDataRequests[e]);delete this._oDataRequests[e]}catch(e){}}},fetchKpiValue:function(e){const t=this;let i;let a;function s(e,s,l,r,o){const n=e.read(s,null,null,true,e=>{t.deregisterOpenODataRequest(l.type);if(e&&e.results&&e.results.length){try{if(l.thresholds&&l.thresholds.length){t._setThresholdValues(e.results[0])}i[l.type]=e.results[0][l.measure];i.unit=i.unit||e.results[0][l.unit]||"";if(--a==0){t.getVariable("cache").setKpivalueById(t.getVariable("chipId"),i);r.call(t,i)}}catch(e){t.logError(e)}}else{o.call(t,"no data")}},e=>{t.deregisterOpenODataRequest(l.type);if(e&&e.response){o.call(t,e.message)}});t.registerOpenODataRequest(l.type,n)}const l=this.getVariable("indicatorUtils");const r=this.getVariable("cache").getKpivalueById(this.getVariable("chipId"));if(r){e.fnS.call(t,r)}else{const r=e.measure1;const o=e.measure2;const n=e.url;const h=e.entitySet;const c=e.filters;const u=e.fractionFilters.concat(c);let V;a=2;u.forEach(e=>{e.value=`${e.value}`;e.valueTo=`${e.valueTo}`});if(e.thresholds&&e.thresholds.length){V=l.prepareQueryServiceUri(this.getVariable("chip").url.addSystemToServiceUrl(n),h,`${r},${e.thresholds}`,null,c)}else{V=l.prepareQueryServiceUri(this.getVariable("chip").url.addSystemToServiceUrl(n),h,r,null,c)}const g=l.prepareQueryServiceUri(this.getVariable("chip").url.addSystemToServiceUrl(n),h,o,null,u);const f=V.unit[0];const b=g.unit[0];i={kpiValue:null,fractionValue:null,unit:""};if(V){s(V.model,V.uri,{measure:r,type:"kpiValue",unit:f,thresholds:e.thresholds},e.fnS,e.fnE)}if(g){s(g.model,g.uri,{measure:o,type:"fractionValue",unit:b},e.fnS,e.fnE)}if(!(V&&g)){e.fnE.call(t,"Error Preparing Query Service URI")}}},_setThresholdValues:function(e){const t=this.getVariable("oThreshold");let i;if(t){if(this.getVariable("evalData").EVALUATION.VALUES_SOURCE=="RELATIVE"){if(t.TA.COLUMN_NAME){t.TA.VALUE=parseFloat(e[t.TA.COLUMN_NAME]);for(i in t){if(!t[i].COLUMN_NAME){t[i].VALUE=t.TA.VALUE*t[i].VALUE/100}}}}else{for(i in t){if(t[i].COLUMN_NAME){t[i].VALUE=parseFloat(e[t[i].COLUMN_NAME])}}}}this.setVariable("oThreshold",t)},getThresholdObject:function(){let e=this.getVariable("oThreshold");if(!e){const t=this.getVariable("evalData").EVALUATION_VALUES;e={};for(let i=0,a=t.length;i<a;i++){e[t[i].TYPE]={VALUE:parseFloat(t[i].FIXED),COLUMN_NAME:t[i].COLUMN_NAME}}this.setVariable("oThreshold",e)}return e},hasSomeValue:function(){let e=true;if(arguments.length){for(let t=0,i=arguments.length;t<i;t++){if(!(arguments[t]||arguments[t]=="0")){e=false;break}}}else{e=false}return e},getTrendColor:function(e){let t="Neutral";let a;let s;let l;let r;let o;let n;if(this.getVariable("tileProperties").isFractionMeasure){a=this.getThresholdObject();s=this.getVariable("evalData").EVALUATION.GOAL_TYPE;if(s=="MA"){l=a.WL;o=a.CL;if(this.hasSomeValue(l,o)){t="Good";if(e<o.VALUE){t="Error"}else if(e<=l.VALUE){t="Critical"}}}else if(s=="MI"){r=a.WH;n=a.CH;if(this.hasSomeValue(r,n)){t="Error";if(e<r.VALUE){t="Good"}else if(e<=n.VALUE){t="Critical"}}}else{l=a.WL;o=a.CL;r=a.WH;n=a.CH;if(this.hasSomeValue(r,n,o,l)){if(e<=o.VALUE||e>=r.VALUE){t="Error"}else if(l.VALUE>=e&&e>=o.VALUE||n.VALUE>=e&&e>=r.VALUE){t="Critical"}else{t="Good"}}}}return i[t]},_getThresholdMeasures:function(){const e=[];const t=this.getThresholdObject();for(const i in t){if(t[i].COLUMN_NAME){e.push(t[i].COLUMN_NAME)}}return e},onEvalFiltersFetched:function(){const e=this;if(this.getVariable("chip").visible.isVisible()&&!this.getVariable("hasAppeared")){try{const t=this.getVariable("evalData");const i=t.EVALUATION.ODATA_URL;const a=t.EVALUATION.ODATA_ENTITYSET;const s=this.getVariable("tileProperties");let l=[];const r=this.getVariable("indicatorUtils").prepareFilterStructure(t.EVALUATION_FILTERS,t.ADDITIONAL_FILTERS);const o=t.EVALUATION.COLUMN_NAME;let n=o;let h=[];if(s.isFractionMeasure){n=s.harveyTotalMeasure;h=this._getThresholdMeasures()}else{l=this.getVariable("indicatorUtils").prepareFilterStructure(s.harveyFilters||l)}this.setVariable("totalMeasure",n);this.setVariable("fractionMeasure",o);this.fetchKpiValue({measure1:n,measure2:o,entitySet:a,thresholds:h,url:i,filters:r,fractionFilters:l,fnS:function(t){t.kpiValue=Number(t.kpiValue);t.fractionValue=Number(t.fractionValue);e.setVariable("kpiValue",t.kpiValue);e.setVariable("fractionValue",t.fractionValue);e.onKpiValueFetched(t.kpiValue,t.unit,t.fractionValue)},fnE:this.logError});e.setVariable("hasAppeared",true)}catch(e){this.logError(e)}}},fetchEvalFilters:function(e){const t=this;try{const i=this.getVariable("cache").getEvaluationById(this.getVariable("chipId"));if(i){this.getVariable("evalData").EVALUATION_FILTERS=i.EVALUATION_FILTERS;e()}else{const i=this.getVariable("indicatorUtils").getFilterFromRunTimeService(this.getVariable("evalData"),i=>{t.deregisterOpenODataRequest("kpiFilterRequest");t.getVariable("evalData").EVALUATION_FILTERS=i;t.getVariable("cache").setEvaluationById(t.getVariable("chipId"),t.getVariable("evalData"));e.call(t)},function(e){this.logError(e);t.deregisterOpenODataRequest("kpiFilterRequest")});this.registerOpenODataRequest("kpiFilterRequest",i)}}catch(e){this.logError(e)}},onKpiValueFetched:function(e,t,i,a){const l=this.getVariable("indicatorUtils");let r=e;let o=i;const n=this.getVariable("evalData");const h=n.EVALUATION.SCALING;if(h==-2){r*=100;o*=100}let c=this.isACurrencyMeasure(this.getVariable("totalMeasure"));r=l.getLocaleFormattedValue(Number(r),h,null,c,t);c=this.isACurrencyMeasure(this.getVariable("fractionMeasure"));o=l.getLocaleFormattedValue(Number(o),h,null,c,t);this.getView().getModel().setProperty("/totalLabel",`${r} ${t}`);this.getView().getModel().setProperty("/fractionLabel",`${o} ${a}`);this.getView().getModel().setProperty("/color",this.getTrendColor(i));this.getView().getModel().setProperty("/value",e);this.getView().getModel().setProperty("/fractionValue",i);const u=l.getNavigationTarget(this.getVariable("evalData"),this.getVariable("system"));this.getVariable("tile").$().wrap(`<a href ='${u}'></a>`);this.getVariable("tile").setState(s.Loaded)},logError:function(e){this.getVariable("tile").setState(s.Failed);this.getVariable("indicatorUtils").logError(e,this.getVariable("tile"))},onVisible:function(){if(!this.getVariable("hasAppeared")){if(Number(this.getVariable("chip").configuration.getParameterValueAsString("isSufficient"))){this.onEvalFiltersFetched()}else{this.fetchEvalFilters(this.onEvalFiltersFetched)}}},onExit:function(){this.abortAllOpenODataRequests()}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorTileUtils/cache", [],()=>{"use strict";const n={};const t={};const e="HANA_CLIENT";return{getCacheHanaClient:function(){return n[e]},setCacheHanaClient:function(t){n[e]=t},getEvaluationByChipId:function(t){if(n[t]){return n[t]}return null},getEvaluationById:function(n){return this.getEvaluationByChipId(n)},setEvaluationById:function(t,e){n[t]=e},getFrontEndCacheDeferredObject:function(t){if(n[t]){return n[t]}return null},setFrontEndCacheDefferedObject:function(t,e){n[t]=e},getKpivalueById:function(n){if(t[n]){return t[n]}return null},setKpivalueById:function(n,e){t[n]=e}}},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorTileUtils/indicatorTileHelper", [],()=>{"use strict";function t(t){this.tile=t}t.prototype.setErrorState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Failed)};t.prototype.setLoadingState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Loading)};t.prototype.setLoadedState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Loaded)};t.prototype.setTrendDown=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.Down)};t.prototype.setTrendUp=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.Up)};t.prototype.setTrendNeutral=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.None)};t.prototype.setThresholdGood=function(){};t.prototype.setThresholdBad=function(){};t.prototype.setThresholdCritical=function(){};t.prototype.setThresholdNeutral=function(){};t.prototype.calculateThreshold=function(){};t.prototype.setTile=function(t){this.tile=t};t.prototype.getTile=function(){return this.tile};return t});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorTileUtils/oData4Analytics", ["sap/ui/model/odata/ODataModel","sap/ui/model/FilterOperator","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/core/Core"],(e,t,i,n)=>{"use strict";sap=sap||{};sap.ushell=sap.ushell||{};sap.ushell.components=sap.ushell.components||{};sap.ushell.components.tiles.indicatorTileUtils=sap.ushell.components.tiles.indicatorTileUtils||{};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics||{};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants={};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE="http://www.sap.com/Protocols/SAPData";sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.VERSION="0.7";sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper={renderPropertyKeyValue:function(e,t){if(e.charAt(0)=="'"){throw"Illegal property value starting with a quote"}switch(t){case"Edm.String":return`'${e}'`;case"Edm.DateTime":return`datetime'${e}'`;case"Edm.Guid":return`guid'${e}'`;case"Edm.Time":return`time'${e}'`;case"Edm.DateTimeOffset":return`datetimeoffset'${e}'`;default:return e}},renderPropertyFilterValue:function(e,t){if(e.charAt(0)=="'"){throw"Illegal property value starting with a quote"}switch(t){case"Edm.String":return`'${e}'`;case"Edm.DateTime":return`datetime'${e}'`;case"Edm.Guid":return`guid'${e}'`;case"Edm.Time":return`time'${e}'`;case"Edm.DateTimeOffset":return`datetimeoffset'${e}'`;default:return e}},tokenizeNametoLabelText:function(e){let t="";t=e.replace(/([^A-Z0-9_]+)([A-Z0-9_])/g,"$1 $2");t=t.replace(/([A-Z0-9_]{2,})([A-Z0-9_])([^A-Z0-9_]+)/g,"$1 $2$3");t=t.replace(/(.*) _E$/,"$1");t=t.replace(/(.*) _(.*)/g,"$1 $2");return t}};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model=function(e,t){this._init(e,t)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceByURI=function(e){return{sServiceURI:e}};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceByModel=function(e){return{oModel:e}};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceWithWorkaround=function(e,t){return{oModelReference:e,aWorkaroundID:t}};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.prototype={_init:function(t,i){this._oActivatedWorkarounds={};if(t&&t.aWorkaroundID){const e=t.aWorkaroundID;for(let t=0;t<e.length;t++){this._oActivatedWorkarounds[e[t]]=true}t=t.oModelReference}if(!t||!t.sServiceURI&&!t.oModel){throw"Usage with oModelReference being an instance of Model.ReferenceByURI or Model.ReferenceByModel"}if(t.oModel){this._oModel=t.oModel}else{this._oModel=new e(t.sServiceURI)}if(this._oModel.getServiceMetadata().dataServices==undefined){throw"Model could not be loaded"}this.mergeV2Annotations(i);this._oQueryResultSet={};this._oParameterizationSet={};this._oEntityTypeSet={};this._oEntitySetSet={};this._oEntityTypeNameToEntitySetMap={};const n=this._oModel.getServiceMetadata().dataServices.schema[0];for(let e=-1,t;t=n.entityContainer[++e];){if(t.isDefaultEntityContainer=="true"){this._oDefaultEntityContainer=t;break}}const o=n.entityType;const r=[];const s=[];const a=[];let l;for(let e=-1,t;t=o[++e];){let e=false;if(t.extensions!=undefined){let i;for(l=-1;i=t.extensions[++l];){if(i.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE&&i.name=="semantics"){e=true;switch(i.value){case"aggregate":r.push(t);break;case"parameters":s.push(t);break;default:a.push(t)}}if(e){continue}}if(!e){a.push(t)}}else{a.push(t)}}let u;let c;let p;for(let e=-1,t;t=a[++e];){p=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),n,t);this._oEntityTypeSet[p.getQName()]=p;c=this._getEntitySetsOfType(n,p.getQName());if(c.length==0){throw"Invalid consumption model: No entity set for entity type annotated with parameters semantics"}if(c.length>1){throw"Unsupported consumption model: More than one entity set for entity type annotated with parameters semantics"}u=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),n,c[0][0],c[0][1]);this._oEntitySetSet[u.getQName()]=u;this._oEntityTypeNameToEntitySetMap[p.getQName()]=u}const y={};let h;let m;for(let e=-1,t;t=s[++e];){p=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),n,t);this._oEntityTypeSet[p.getQName()]=p;c=this._getEntitySetsOfType(n,p.getQName());if(c.length==0){throw"Invalid consumption model: No entity set for entity type annotated with parameters semantics"}if(c.length>1){throw"Unsupported consumption model: More than one entity set for entity type annotated with parameters semantics"}u=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),n,c[0][0],c[0][1]);this._oEntitySetSet[u.getQName()]=u;this._oEntityTypeNameToEntitySetMap[p.getQName()]=u;h=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization(p,u);this._oParameterizationSet[h.getName()]=h;y[p.getQName()]=h;const e=p.getQName();if(n.association!=undefined){for(l=-1;m=n.association[++l];){if(m.referentialConstraint==undefined){continue}let t=null;if(m.end[0].type==e&&m.end[0].multiplicity=="*"&&m.end[1].multiplicity=="1"){t=m.end[1].type}else if(m.end[1].type==e&&m.end[1].multiplicity=="*"&&m.end[0].multiplicity=="1"){t=m.end[0].type}if(!t){continue}if(m.referentialConstraint.dependent.propertyRef.length!=1){continue}const i=h.findParameterByName(m.referentialConstraint.dependent.propertyRef[0].name);if(i==null){continue}const n=this._oEntityTypeSet[t];const o=this._oEntityTypeNameToEntitySetMap[t];i.setValueSetEntity(n,o)}}}for(let e=-1,t;t=r[++e];){p=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),n,t);this._oEntityTypeSet[p.getQName()]=p;const e=p.getQName();h=null;let i=null;if(n.association!=undefined){for(l=-1,m;m=n.association[++l];){let t=null;if(m.end[0].type==e){t=m.end[1].type}else if(m.end[1].type==e){t=m.end[0].type}else{continue}let n=null;n=y[t];if(n!=null){if(h!=null){throw`RESTRICTION: Unable to handle multiple parameter entity types of query entity ${p.name}`}else{h=n;i=m}}}}c=this._getEntitySetsOfType(n,p.getQName());if(c.length!=1){throw"Invalid consumption model: There must be exactly one entity set for an entity type annotated with aggregating semantics"}u=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),n,c[0][0],c[0][1]);this._oEntitySetSet[u.getQName()]=u;this._oEntityTypeNameToEntitySetMap[p.getQName()]=u;const o=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult(this,p,u,h);this._oQueryResultSet[o.getName()]=o;if(h){h.setTargetQueryResult(o,i)}}},oUI5ODataModelAnnotatableObject:{objectName:"schema",keyPropName:"namespace",extensions:true,aSubObject:[{objectName:"entityType",keyPropName:"name",extensions:true,aSubObject:[{objectName:"property",keyPropName:"name",aSubObject:[],extensions:true}]},{objectName:"entityContainer",keyPropName:"name",extensions:false,aSubObject:[{objectName:"entitySet",keyPropName:"name",extensions:true,aSubObject:[]}]}]},mergeV2Annotations:function(e){let t;try{t=JSON.parse(e)}catch(e){return}let i;try{i=this._oModel.getServiceMetadata().dataServices}catch(e){return}for(const e in t){if(!(this.oUI5ODataModelAnnotatableObject.objectName===e)){continue}if(!(t[e]instanceof Array)){continue}this.mergeV2AnnotationLevel(i[this.oUI5ODataModelAnnotatableObject.objectName],t[this.oUI5ODataModelAnnotatableObject.objectName],this.oUI5ODataModelAnnotatableObject);break}return},mergeV2AnnotationLevel:function(e,t,i){for(let n=-1,o;o=t[++n];){for(let t=-1,n;n=e[++t];){if(!(o[i.keyPropName]==n[i.keyPropName])){continue}if(o.extensions!=undefined){if(n.extensions==undefined){n.extensions=[]}for(let e=-1,t;t=o.extensions[++e];){let e=false;for(let i=-1,o;o=n.extensions[++i];){if(t.name==o.name&&t.namespace==o.namespace){o.value=t.value;e=true;break}}if(!e){n.extensions.push(t)}}}for(let e=-1,t;t=i.aSubObject[++e];){for(const e in o){if(!(t.objectName==e)){continue}if(!(o[t.objectName]instanceof Array)){continue}if(n[t.objectName]==undefined||!(n[t.objectName]instanceof Array)){continue}this.mergeV2AnnotationLevel(n[t.objectName],o[t.objectName],t);break}}}}return},findQueryResultByName:function(e){let t=this._oQueryResultSet[e];if(!t&&this._oDefaultEntityContainer){const i=`${this._oDefaultEntityContainer.name}.${e}`;t=this._oQueryResultSet[i]}return t},getAllQueryResultNames:function(){if(this._aQueryResultNames){return this._aQueryResultNames}this._aQueryResultNames=new Array(0);for(const e in this._oQueryResultSet){this._aQueryResultNames.push(this._oQueryResultSet[e].getName())}return this._aQueryResultNames},getAllQueryResults:function(){return this._oQueryResultSet},getODataModel:function(){return this._oModel},_getEntitySetsOfType:function(e,t){const i=[];for(let n=-1,o;o=e.entityContainer[++n];){for(let e=-1,n;n=o.entitySet[++e];){if(n.entityType==t){i.push([o,n])}}}return i},_oModel:null,_oDefaultEntityContainer:null,_aQueryResultNames:null,_oQueryResultSet:null,_oParameterizationSet:null,_oEntityTypeSet:null,_oEntitySetSet:null,_oEntityTypeNameToEntitySetMap:null,_oActivatedWorkarounds:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult=function(e,t,i,n){this._init(e,t,i,n)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult.prototype={_init:function(e,t,i,n,o){this._oModel=e;this._oEntityType=t;this._oEntitySet=i;this._oParameterization=n;this._oDimensionSet={};this._oMeasureSet={};const r=t.getTypeDescription().property;const s={};let a;let l;for(let e=-1,t;t=r[++e];){if(t.extensions==undefined){continue}for(let e=-1,i;i=t.extensions[++e];){if(!i.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue}switch(i.name){case"aggregation-role":switch(i.value){case"dimension":l=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension(this,t);this._oDimensionSet[l.getName()]=l;break;case"measure":const e=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure(this,t);this._oMeasureSet[e.getName()]=e;break;case"totaled-properties-list":this._oTotaledPropertyListProperty=t;break}break;case"attribute-for":a=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute(this,t);s[a.getKeyProperty()]=a;break}}}for(const e in s){a=s[e];a.getDimension().addAttribute(a)}if(e._oActivatedWorkarounds.IdentifyTextPropertiesByName){const e=[];for(const i in this._oDimensionSet){l=this._oDimensionSet[i];if(!l.getTextProperty()){let n=null;n=t.findPropertyByName(`${i}Name`);if(!n){n=t.findPropertyByName(`${i}Text`)}if(!n){n=t.findPropertyByName(`${i}Desc`)}if(!n){n=t.findPropertyByName(`${i}Description`)}if(n){l.setTextProperty(n);e.push(n.name)}}}for(let t=-1,i;i=e[++t];){delete this._oDimensionSet[i]}}},getName:function(){return this.getEntitySet().getQName()},getParameterization:function(){return this._oParameterization},getAllDimensionNames:function(){if(this._aDimensionNames){return this._aDimensionNames}this._aDimensionNames=[];for(const e in this._oDimensionSet){this._aDimensionNames.push(this._oDimensionSet[e].getName())}return this._aDimensionNames},getAllDimensions:function(){return this._oDimensionSet},getAllMeasureNames:function(){if(this._aMeasureNames){return this._aMeasureNames}this._aMeasureNames=[];for(const e in this._oMeasureSet){this._aMeasureNames.push(this._oMeasureSet[e].getName())}return this._aMeasureNames},getAllMeasures:function(){return this._oMeasureSet},findDimensionByName:function(e){return this._oDimensionSet[e]},getTotaledPropertiesListProperty:function(){return this._oTotaledPropertyListProperty},findMeasureByName:function(e){return this._oMeasureSet[e]},getModel:function(){return this._oModel},getEntityType:function(){return this._oEntityType},getEntitySet:function(){return this._oEntitySet},_oModel:null,_oEntityType:null,_oEntitySet:null,_oParameterization:null,_aDimensionNames:null,_oDimensionSet:null,_aMeasureNames:null,_oMeasureSet:null,_oTotaledPropertyListProperty:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization=function(e,t){this._init(e,t)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization.prototype={_init:function(e,t){this._oEntityType=e;this._oEntitySet=t;this._oParameterSet={};const i=e.getTypeDescription().property;for(let e=-1,t;t=i[++e];){if(t.extensions==undefined){continue}for(let e=-1,i;i=t.extensions[++e];){if(!i.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue}switch(i.name){case"parameter":const e=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter(this,t);this._oParameterSet[e.getName()]=e;break}}}},setTargetQueryResult:function(e,t){this._oQueryResult=e;const i=`${this._oEntityType.getSchema().namespace}.${t.name}`;const n=this._oEntityType.getTypeDescription().navigationProperty;if(!n){throw"Invalid consumption model: Parameters entity type lacks navigation property for association to query result entity type"}for(let e=-1,t;t=n[++e];){if(t.relationship==i){this._oNavPropToQueryResult=t.name}}if(!this._oNavPropToQueryResult){throw"Invalid consumption model: Parameters entity type lacks navigation property for association to query result entity type"}},getName:function(){return this.getEntitySet().getQName()},getAllParameterNames:function(){if(this._aParameterNames){return this._aParameterNames}this._aParameterNames=[];for(const e in this._oParameterSet){this._aParameterNames.push(this._oParameterSet[e].getName())}return this._aParameterNames},getAllParameters:function(){return this._oParameterSet},findParameterByName:function(e){return this._oParameterSet[e]},getNavigationPropertyToQueryResult:function(){return this._oNavPropToQueryResult},getEntityType:function(){return this._oEntityType},getEntitySet:function(){return this._oEntitySet},_oEntityType:null,_oEntitySet:null,_oQueryResult:null,_oNavPropToQueryResult:null,_aParameterNames:null,_oParameterSet:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter=function(e,t){this._init(e,t)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter.prototype={_init:function(e,t){this._oParameterization=e;this._oProperty=t;const i=e.getEntityType();if(t.extensions!=undefined){for(let e=-1,n;n=t.extensions[++e];){if(!n.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue}switch(n.name){case"parameter":switch(n.value){case"mandatory":this._bRequired=true;break;case"optional":this._bRequired=false;break;default:throw"Invalid annotation value for parameter property"}break;case"label":this._sLabelText=n.value;break;case"text":this._oTextProperty=i.findPropertyByName(n.value);break;case"upper-boundary":this._bIntervalBoundaryParameter=true;this._oUpperIntervalBoundaryParameterProperty=i.findPropertyByName(n.value);break;case"lower-boundary":this._bIntervalBoundaryParameter=true;this._oLowerIntervalBoundaryParameterProperty=i.findPropertyByName(n.value);break}}}if(!this._sLabelText){this._sLabelText=""}},setValueSetEntity:function(e,t){this._oValueSetEntityType=e;this._oValueSetEntitySet=t},getTextProperty:function(){return this._oTextProperty},getLabelText:function(){if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.tokenizeNametoLabelText(this.getName())}return this._sLabelText},isOptional:function(){return!this._bRequired},isIntervalBoundary:function(){return this._bIntervalBoundaryParameter},isLowerIntervalBoundary:function(){return!!this._oUpperIntervalBoundaryParameterProperty},getPeerIntervalBoundaryParameter:function(){let e=null;if(this._oLowerIntervalBoundaryParameterProperty){e=this._oLowerIntervalBoundaryParameterProperty.name}else{e=this._oUpperIntervalBoundaryParameterProperty.name}if(!e){throw"Parameter is not an interval boundary"}return this._oParameterization.findParameterByName(e)},isValueSetAvailable:function(){return!!this._oValueSetEntityType},getName:function(){return this._oProperty.name},getProperty:function(){return this._oProperty},getContainingParameterization:function(){return this._oParameterization},getURIToValueEntitySet:function(e){let t=null;t=`${e||""}/${this._oValueSetEntitySet.getQName()}`;return t},_oParameterization:null,_oProperty:null,_sLabelText:null,_oTextProperty:null,_bRequired:false,_bIntervalBoundaryParameter:false,_oLowerIntervalBoundaryParameterProperty:null,_oUpperIntervalBoundaryParameterProperty:null,_oValueSetEntityType:null,_oValueSetEntitySet:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension=function(e,t){this._init(e,t)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension.prototype={_init:function(e,t){this._oQueryResult=e;this._oProperty=t;this._oAttributeSet={};if(t.extensions!=undefined){for(let i=-1,n;n=t.extensions[++i];){if(!n.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue}switch(n.name){case"label":this._sLabelText=n.value;break;case"text":this._oTextProperty=e.getEntityType().findPropertyByName(n.value);break;case"super-ordinate":this._sSuperOrdinatePropertyName=n.value;break}}}if(!this._sLabelText){this._sLabelText=""}},getName:function(){return this._oProperty.name},getKeyProperty:function(){return this._oProperty},getTextProperty:function(){return this._oTextProperty},setTextProperty:function(e){this._oTextProperty=e},getLabelText:function(){if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.tokenizeNametoLabelText(this.getName())}return this._sLabelText},getSuperOrdinateDimension:function(){if(!this._sSuperOrdinatePropertyName){return null}return this._oQueryResult.findDimensionByName(this._sSuperOrdinatePropertyName)},getHierarchy:function(){if(!this._oHierarchy){this._oHierarchy=this._oQueryResult.getEntityType().getHierarchy(this._oProperty.name)}return this._oHierarchy},getAllAttributeNames:function(){if(this._aAttributeNames){return this._aAttributeNames}this._aAttributeNames=[];for(const e in this._oAttributeSet){this._aAttributeNames.push(this._oAttributeSet[e].getName())}return this._aAttributeNames},getAllAttributes:function(){return this._oAttributeSet},findAttributeByName:function(e){return this._oAttributeSet[e]},addAttribute:function(e){this._oAttributeSet[e.getName()]=e},getContainingQueryResult:function(){return this._oQueryResult},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_sSuperOrdinatePropertyName:null,_aAttributeNames:null,_oAttributeSet:null,_oHierarchy:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute=function(e,t){this._init(e,t)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute.prototype={_init:function(e,t){this._oQueryResult=e;this._oProperty=t;if(t.extensions!=undefined){for(let i=-1,n;n=t.extensions[++i];){if(!n.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue}switch(n.name){case"attribute-for":this._sDimensionName=n.value;break;case"label":this._sLabelText=n.value;break;case"text":this._oTextProperty=e.getEntityType().findPropertyByName(n.value);break}}}},getName:function(){return this._oProperty.name},getKeyProperty:function(){return this._oProperty},getTextProperty:function(){return this._oTextProperty},getLabelText:function(){return this._sLabelText},getDimension:function(){return this._oQueryResult.findDimensionByName(this._sDimensionName)},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_sDimensionName:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure=function(e,t){this._init(e,t)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure.prototype={_init:function(e,t){this._oQueryResult=e;this._oProperty=t;if(t.extensions!=undefined){for(let i=-1,n;n=t.extensions[++i];){if(!n.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue}switch(n.name){case"label":this._sLabelText=n.value;break;case"text":this._oTextProperty=e.getEntityType().findPropertyByName(n.value);break;case"unit":this._oUnitProperty=e.getEntityType().findPropertyByName(n.value);break}}}if(!this._sLabelText){this._sLabelText=""}},getName:function(){return this._oProperty.name},getRawValueProperty:function(){return this._oProperty},getFormattedValueProperty:function(){return this._oTextProperty},getUnitProperty:function(){return this._oUnitProperty},getLabelText:function(){return this._sLabelText},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_oUnitProperty:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet=function(e,t,i,n){this._init(e,t,i,n)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet.prototype={_init:function(e,t,i,n){this._oEntitySet=n;this._oContainer=i;this._oSchema=t;this._oModel=e;if(t.entityContainer.length>1){this._sQName=`${i.name}.${n.name}`}else{this._sQName=n.name}},getQName:function(){return this._sQName},getSetDescription:function(){return this._oEntitySet},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntitySet:null,_oContainer:null,_oSchema:null,_oModel:null,_sQName:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType=function(e,t,i){this._init(e,t,i)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType.prototype={_init:function(e,t,i){this._oEntityType=i;this._oSchema=t;this._oModel=e;this._oPropertySet={};this._aFilterablePropertyNames=[];this._aSortablePropertyNames=[];this._aRequiredFilterPropertyNames=[];this._sQName=`${t.namespace}.${i.name}`;const n={};let o=null;for(let e=-1,t;t=i.property[++e];){this._aFilterablePropertyNames.push(t.name);this._aSortablePropertyNames.push(t.name);if(t.extensions==undefined){continue}for(let e=-1,i;i=t.extensions[++e];){if(!i.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue}switch(i.name){case"filterable":if(i.value=="false"){this._aFilterablePropertyNames.pop(t.name)}break;case"sortable":if(i.value=="false"){this._aSortablePropertyNames.pop(t.name)}break;case"required-filter":if(i.value=="true"){this._aRequiredFilterPropertyNames.push(t.name)}break;case"hierarchy-node-for":if(!(o=n[t.name])){o=n[t.name]={}}o.dimensionName=i.value;break;case"hierarchy-parent-node-for":case"hierarchy-parent-nod":if(!(o=n[i.value])){o=n[i.value]={}}o.parentNodeIDProperty=t;break;case"hierarchy-level-for":if(!(o=n[i.value])){o=n[i.value]={}}o.levelProperty=t;break;case"hierarchy-drill-state-for":case"hierarchy-drill-stat":if(!(o=n[i.value])){o=n[i.value]={}}o.drillStateProperty=t;break}}this._oPropertySet[t.name]=t}this._oRecursiveHierarchySet={};for(const e in n){const t=n[e];const o=this._oPropertySet[e];let r=this._oPropertySet[t.dimensionName];if(r==null){r=o}this._oRecursiveHierarchySet[r.name]=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy(i,o,t.parentNodeIDProperty,t.levelProperty,r)}},findPropertyByName:function(e){return this._oPropertySet[e]},getFilterablePropertyNames:function(){return this._aFilterablePropertyNames},getSortablePropertyNames:function(){return this._aSortablePropertyNames},getRequiredFilterPropertyNames:function(){return this._aRequiredFilterPropertyNames},getAllHierarchyPropertyNames:function(){if(this._aHierarchyPropertyNames){return this._aHierarchyPropertyNames}this._aHierarchyPropertyNames=[];for(const e in this._oRecursiveHierarchySet){this._aHierarchyPropertyNames.push(this._oRecursiveHierarchySet[e].getNodeValueProperty().name)}return this._aHierarchyPropertyNames},getHierarchy:function(e){if(this._oRecursiveHierarchySet[e]==undefined){return null}return this._oRecursiveHierarchySet[e]},getQName:function(){return this._sQName},getTypeDescription:function(){return this._oEntityType},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntityType:null,_oSchema:null,_oModel:null,_sQName:null,_oPropertySet:null,_aFilterablePropertyNames:null,_aRequiredFilterPropertyNames:null,_aHierarchyPropertyNames:null,_oRecursiveHierarchySet:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy=function(e,t,i,n,o){this._init(e,t,i,n,o)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy.prototype={_init:function(e,t,i,n,o){this._oEntityType=e;this._oNodeIDProperty=t;this._oParentNodeIDProperty=i;this._oNodeLevelProperty=n;this._oNodeValueProperty=o},isRecursiveHierarchy:function(){return true},isLeveledHierarchy:function(){return false},getNodeIDProperty:function(){return this._oNodeIDProperty},getParentNodeIDProperty:function(){return this._oParentNodeIDProperty},getNodeLevelProperty:function(){return this._oNodeLevelProperty},getNodeValueProperty:function(){return this._oNodeValueProperty},_oNodeIDProperty:null,_oParentNodeIDProperty:null,_oNodeLevelProperty:null,_oNodeValueProperty:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression=function(e,t,i){this._init(e,t,i)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression.prototype={_init:function(e,t,i){this._oEntityType=i;this._oSchema=t;this._oModel=e;this._aFilterCondition=[]},clear:function(){this._aFilterCondition=[]},addCondition:function(e,t,i,n){const o=this._oEntityType.findPropertyByName(e);if(o==null){throw`Cannot add filter condition for unknown property name ${e}`}const r=this._oEntityType.getFilterablePropertyNames();if(r.indexOf(e)===-1){throw`Cannot add filter condition for not filterable property name ${e}`}this._aFilterCondition.push({property:o,op:t,val1:i,val2:n});return this._aFilterablePropertyNames},addSetCondition:function(e,i){const n=this._oEntityType.findPropertyByName(e);if(n==null){throw`Cannot add filter condition for unknown property name ${e}`}const o=this._oEntityType.getFilterablePropertyNames();if(o.indexOf(e)===-1){throw`Cannot add filter condition for not filterable property name ${e}`}for(let e=-1,o;o=i[++e];){this._aFilterCondition.push({property:n,op:t.EQ,val1:o})}return this._aFilterablePropertyNames},getExpressionAsUI5FilterArray:function(){const e=[];for(let t=-1,n;n=this._aFilterCondition[++t];){e.push(new i(n.property.name,n.op,n.val1,n.val2))}return e},getURIFilterOptionValue:function(){if(this._aFilterCondition.length==0){return""}this._aFilterCondition.sort((e,t)=>{if(e.property.name==t.property.name){return 0}if(e.property.name>t.property.name){return 1}return-1});let e=this._aFilterCondition[0].property.name;let i="";let n="";for(let o=-1,r;r=this._aFilterCondition[++o];){if(e!=r.property.name){i+=`${i==""?"":" and "}(${n})`;n="";e=r.property.name}switch(r.op){case t.BT:n+=`${n==""?"":" or "}(${r.property.name} ${t.GE.toLowerCase()} ${sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(r.val1,r.property.type)} and ${r.property.name} ${t.LE.toLowerCase()} ${sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(r.val2,r.property.type)})`;break;default:n+=`${n==""?"":" or "}(${r.property.name} ${r.op.toLowerCase()} ${sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(r.val1,r.property.type)})`}}i+=`${i==""?"":" and "}(${n})`;return i},getEntityType:function(){return this._oEntityType},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntityType:null,_oSchema:null,_oModel:null,_aFilterCondition:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortOrder={Ascending:"asc",Descending:"desc"};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression=function(e,t,i){this._init(e,t,i)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression.prototype={_init:function(e,t,i){this._oEntityType=i;this._oSchema=t;this._oModel=e;this._aSortCondition=[]},_containsSorter:function(e){let t=null;for(let i=-1,n;n=this._aSortCondition[++i];){if(n.property.name===e){t={sorter:n,index:i};break}}return t},_removeFromArray:function(e,t,i){const n=e.slice((i||t)+1||e.length);e.length=t<0?e.length+t:t;return e.push.apply(e,n)},clear:function(){this._aSortCondition=[]},addSorter:function(e,t){const i=this._oEntityType.findPropertyByName(e);if(i==null){throw`Cannot add sort condition for unknown property name ${e}`}if(this._containsSorter(e)!=null){throw`Sort condition for this property name is already defined ${e}`}const n=this._oEntityType.getSortablePropertyNames();if(n.indexOf(e)===-1){throw`Cannot add sort condition for not sortable property name ${e}`}this._aSortCondition.push({property:i,order:t});return this},removeSorter:function(e){if(!e){return}const t=this._containsSorter(e);if(t){this._removeFromArray(this._aSortCondition,t.index)}},getExpressionsAsUI5SorterArray:function(){const e=[];for(let t=-1,i;i=this._aSortCondition[++t];){e.push(new n(i.property.name,i.order==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortOrder.Descending))}return e},getExpressionAsUI5Sorter:function(){const e=this.getExpressionsAsUI5SorterArray();if(e.length==0){return null}return e[0]},getURIOrderByOptionValue:function(){if(this._aSortCondition.length==0){return""}let e="";for(let t=-1,i;i=this._aSortCondition[++t];){e+=`${i.property.name} ${i.order}`;if(t<this._aSortCondition.length-1){e+=", "}}return e},getEntityType:function(){return this._oEntityType},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntityType:null,_oSchema:null,_oModel:null,_aSortCondition:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterizationRequest=function(e){this._init(e)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterizationRequest.prototype={_init:function(e){if(!e){throw"No parameterization given"}this._oParameterization=e;this._oParameterValueAssignment=[]},getParameterization:function(){return this._oParameterization},setParameterValue:function(e,t,i){const n=this._oParameterization.findParameterByName(e);if(!n){throw`Invalid parameter name ${e}`}if(i!=null){if(!n.isIntervalBoundary()){throw`Range value cannot be applied to parameter ${e} accepting only single values`}if(!n.isLowerIntervalBoundary()){throw`Range value given, but parameter ${e} does not hold the lower boundary`}}if(!n.isIntervalBoundary()){if(t==null){delete this._oParameterValueAssignment[e]}else{this._oParameterValueAssignment[e]=t}}else{if(t==null&&i!=null){throw`Parameter ${e}: An upper boundary cannot be given without the lower boundary`}if(t==null){delete this._oParameterValueAssignment[e];i=null}else{this._oParameterValueAssignment[e]=t}const o=n.getPeerIntervalBoundaryParameter();if(i==null){i=t}if(t==null){delete this._oParameterValueAssignment[o.getName()]}else{this._oParameterValueAssignment[o.getName()]=i}}return},getURIToParameterizationEntitySet:function(e){return`${e||""}/${this._oParameterization.getEntitySet().getQName()}`},getURIToParameterizationEntry:function(e){const t=this._oParameterization.getAllParameters();for(const e in t){if(this._oParameterValueAssignment[e]==undefined){throw`Parameter ${e} has no value assigned`}}let i="";let n=true;for(const e in this._oParameterValueAssignment){i+=`${(n?"":",")+e}=${sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyKeyValue(this._oParameterValueAssignment[e],t[e].getProperty().type)}`;n=false}return`${e||""}/${this._oParameterization.getEntitySet().getQName()}(${i})`},_oParameterization:null,_oParameterValueAssignment:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResultRequest=function(e){this._init(e)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResultRequest.prototype={_init:function(e,t){this._oQueryResult=e;this._oParameterizationRequest=t;this._oAggregationLevel={};this._oMeasures={};this._bIncludeEntityKey=false;this._oFilterExpression=null},setParameterizationRequest:function(e){this._oParameterizationRequest=e},getQueryResult:function(){return this._oQueryResult},setAggregationLevel:function(e){this._oAggregationLevel={};if(!e){e=this._oQueryResult.getAllDimensionNames()}this.addToAggregationLevel(e)},addToAggregationLevel:function(e){if(!e){return}for(let t=-1,i;i=e[++t];){if(!this._oQueryResult.findDimensionByName(i)){throw`${i} is not a valid dimension name`}this._oAggregationLevel[i]={key:true,text:false,attributes:null}}},removeFromAggregationLevel:function(e){if(!e){return}for(let t=-1,i;i=e[++t];){if(!this._oQueryResult.findDimensionByName(i)){throw`${i} is not a valid dimension name`}if(this._oAggregationLevel[i]!=undefined){delete this._oAggregationLevel[i];this.getSortExpression().removeSorter(i)}}},getAggregationLevel:function(){const e=[];for(const t in this._oAggregationLevel){e.push(t)}return e},getAggregationLevelDetails:function(e){if(this._oAggregationLevel[e]==undefined){throw`Aggregation level does not include dimension ${e}`}return this._oAggregationLevel[e]},setMeasures:function(e){if(!e){e=this._oQueryResult.getAllMeasureNames()}this._oMeasures={};for(let t=-1,i;i=e[++t];){if(!this._oQueryResult.findMeasureByName(i)){throw`${i} is not a valid measure name`}this._oMeasures[i]={value:true,text:false,unit:false}}},getMeasureNames:function(){const e=[];for(const t in this._oMeasures){e.push(t)}return e},includeDimensionKeyTextAttributes:function(e,t,i,n){const o=[];if(e){if(this._oAggregationLevel[e]==undefined){throw`${e} is not included in the aggregation level`}o.push(e)}else{for(const e in this._oAggregationLevel){o.push(e)}n=null}for(let e=-1,r;r=o[++e];){if(t!=null){this._oAggregationLevel[r].key=t}if(i!=null){this._oAggregationLevel[r].text=i}if(n!=null){this._oAggregationLevel[r].attributes=n}}},includeMeasureRawFormattedValueUnit:function(e,t,i,n){const o=[];if(e){if(this._oMeasures[e]==undefined){throw`${e} is not part of the query result`}o.push(e)}else{for(const e in this._oMeasures){o.push(e)}}for(let e=-1,r;r=o[++e];){if(t!=null){this._oMeasures[r].value=t}if(i!=null){this._oMeasures[r].text=i}if(n!=null){this._oMeasures[r].unit=n}}},getFilterExpression:function(){if(this._oFilterExpression==null){const e=this._oQueryResult.getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e)}return this._oFilterExpression},setFilterExpression:function(e){this._oFilterExpression=e},getSortExpression:function(){if(this._oSortExpression==null){const e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e)}return this._oSortExpression},setSortExpression:function(e){this._oSortExpression=e},setRequestOptions:function(e,t){if(e){this._bIncludeEntityKey=e}if(t){this._bIncludeCount=t}},setResultPageBoundaries:function(e,t){if(e!=null&&typeof e!=="number"){throw"Start value must be null or numeric"}if(t!==null&&typeof t!=="number"){throw"End value must be null or numeric"}if(e==null){e=1}if(e<1||e>(t==null?e:t)){throw"Invalid values for requested page boundaries"}this._iSkipRequestOption=e>1?e:null;this._iTopRequestOption=t!=null?t-e+1:null},getResultPageBoundaries:function(){let e;let t;if(this._iSkipRequestOption==null){e=1;t=1}else{e=this._iSkipRequestOption;t=this._iSkipRequestOption+this._iTopRequestOption}return{start:e,end:this._iTopRequestOption!=null?t:null}},getURIToQueryResultEntitySet:function(e){let t=null;if(this._oQueryResult.getParameterization()){if(!this._oParameterizationRequest){throw"Missing parameterization request"}else{t=`${this._oParameterizationRequest.getURIToParameterizationEntry(e)}/${this._oQueryResult.getParameterization().getNavigationPropertyToQueryResult()}`}}else{t=`${e||""}/${this._oQueryResult.getEntitySet().getQName()}`}return t},getURIQueryOptionValue:function(e){let t=null;switch(e){case"$select":{let e="";let i;for(const t in this._oAggregationLevel){const n=this._oQueryResult.findDimensionByName(t);const o=this._oAggregationLevel[t];if(o.key==true){e+=(e==""?"":",")+n.getKeyProperty().name}if(o.text==true&&n.getTextProperty()){e+=(e==""?"":",")+n.getTextProperty().name}if(o.attributes){let t;for(i=-1;t=o.attributes[++i];){e+=(e==""?"":",")+n.findAttributeByName(t).getName()}}}for(const t in this._oMeasures){const i=this._oQueryResult.findMeasureByName(t);const n=this._oMeasures[t];if(n.value==true){e+=(e==""?"":",")+i.getRawValueProperty().name}if(n.text==true&&i.getFormattedValueProperty()){e+=(e==""?"":",")+i.getFormattedValueProperty().name}if(n.unit==true&&i.getUnitProperty()){e+=(e==""?"":",")+i.getUnitProperty().name}}if(this._bIncludeEntityKey){const t=this._oQueryResult.getEntityType().getTypeDescription().key.propertyRef;let n;for(i=-1;n=t[++i];){e+=(e==""?"":",")+n.name}}t=e||null;break}case"$filter":{let e=null;if(this._oFilterExpression){e=this._oFilterExpression.getURIFilterOptionValue()}t=e||null;break}case"$orderby":{let e=null;if(this._oSortExpression){e=this._oSortExpression.getURIOrderByOptionValue()}t=e||null;break}case"$top":{if(this._iTopRequestOption!==null){t=this._iTopRequestOption}break}case"$skip":{t=this._iSkipRequestOption;break}default:break}return t},getURIToQueryResultEntries:function(e){const t=this.getURIToQueryResultEntitySet(e);const i=this.getURIQueryOptionValue("$select");const n=this.getURIQueryOptionValue("$filter");const o=this.getURIQueryOptionValue("$orderby");const r=this.getURIQueryOptionValue("$top");const s=this.getURIQueryOptionValue("$skip");let a=t;let l=false;if(i){a+=`?$select=${i}`;l=true}if(this._oFilterExpression&&n){if(!l){a+="?";l=true}else{a+="&"}a+=`$filter=${n}`}if(this._oSortExpression&&o){if(!l){a+="?";l=true}else{a+="&"}a+=`$orderby=${o}`}if(this._iTopRequestOption&&r){if(!l){a+="?";l=true}else{a+="&"}a+=`$top=${r}`}if(this._iSkipRequestOption&&s){if(!l){a+="?";l=true}else{a+="&"}a+=`$skip=${s}`}if(this._bIncludeCount){if(!l){a+="?";l=true}else{a+="&"}a+="$inlinecount=allpages"}return a},_oQueryResult:null,_oParameterizationRequest:null,_oAggregationLevel:null,_oMeasures:null,_bIncludeEntityKey:null,_bIncludeCount:null,_oFilterExpression:null,_oSortExpression:null,_iSkipRequestOption:0,_iTopRequestOption:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterValueSetRequest=function(e){this._init(e)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterValueSetRequest.prototype={_init:function(e){this._oParameter=e;this._oValueSetResult={};this._oFilterExpression=null;this._oSortExpression=null},includeParameterText:function(e){if(e!=null){this._oValueSetResult.text=e}},getFilterExpression:function(){if(this._oFilterExpression==null){const e=this._oParameter.getContainingParameterization().getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e)}return this._oFilterExpression},setFilterExpression:function(e){this._oFilterExpression=e},getSortExpression:function(){if(this._oSortExpression==null){const e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e)}return this._oSortExpression},setSortExpression:function(e){this._oSortExpression=e},getURIQueryOptionValue:function(e){let t=null;switch(e){case"$select":{let e="";e+=(e==""?"":",")+this._oParameter.getProperty().name;if(this._oValueSetResult.text==true&&this._oParameter.getTextProperty()){e+=(e==""?"":",")+this._oParameter.getTextProperty().name}t=e||null;break}case"$filter":{let e=null;if(this._oFilterExpression){e=this._oFilterExpression.getURIFilterOptionValue()}t=e||null;break}case"$orderby":{let e=null;if(this._oSortExpression){e=this._oSortExpression.getURIOrderByOptionValue()}t=e||null;break}default:break}return t},getURIToParameterValueSetEntries:function(e){let t=null;t=`${e||""}/${this._oParameter.getContainingParameterization().getEntitySet().getQName()}`;const i=this.getURIQueryOptionValue("$select");const n=this.getURIQueryOptionValue("$filter");const o=this.getURIQueryOptionValue("$orderby");let r=t;let s=false;if(i){r+=`?$select=${i}`;s=true}if(this._oFilterExpression&&n){if(!s){r+="?";s=true}else{r+="&"}r+=`$filter=${n}`}if(this._oSortExpression&&o){if(!s){r+="?";s=true}else{r+="&"}r+=`$orderby=${o}`}return r},_oParameter:null,_oFilterExpression:null,_oSortExpression:null,_oValueSetResult:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionMemberSetRequest=function(e,t){this._init(e,t)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionMemberSetRequest.prototype={_init:function(e,t){this._oDimension=e;this._oParameterizationRequest=t;this._oValueSetResult={};this._oFilterExpression=null;this._oSortExpression=null},setParameterizationRequest:function(e){this._oParameterizationRequest=e},includeDimensionTextAttributes:function(e,t){if(e!=null){this._oValueSetResult.text=e}if(t!=null){this._oValueSetResult.attributes=t}},getFilterExpression:function(){if(this._oFilterExpression==null){const e=this._oDimension.getContainingQueryResult().getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e)}return this._oFilterExpression},setFilterExpression:function(e){this._oFilterExpression=e},getSortExpression:function(){if(this._oSortExpression==null){const e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e)}return this._oSortExpression},setSortExpression:function(e){this._oSortExpression=e},hasMasterDataAvailable:function(){return false},getURIQueryOptionValue:function(e){let t=null;switch(e){case"$select":{let e="";e+=(e==""?"":",")+this._oDimension.getKeyProperty().name;if(this._oValueSetResult.text==true&&this._oDimension.getTextProperty()){e+=(e==""?"":",")+this._oDimension.getTextProperty().name}if(this._oValueSetResult.attributes){for(let t=-1,i;i=this._oValueSetResult.attributes[++t];){e+=(e==""?"":",")+this._oDimension.findAttributeByName(i).getName()}}t=e||null;break}case"$filter":{let e=null;if(this._oFilterExpression){e=this._oFilterExpression.getURIFilterOptionValue()}t=e||null;break}case"$orderby":{let e=null;if(this._oSortExpression){e=this._oSortExpression.getURIOrderByOptionValue()}t=e||null;break}default:break}return t},getURIToDimensionMemberEntries:function(e){let t=null;if(this._oDimension.getContainingQueryResult().getParameterization()){if(!this._oParameterizationRequest){throw"Missing parameterization request"}else{t=`${this._oParameterizationRequest.getURIToParameterizationEntry(e)}/${this._oDimension.getContainingQueryResult().getParameterization().getNavigationPropertyToQueryResult()}`}}else{t=`${e||""}/${this._oDimension.getContainingQueryResult().getEntitySet().getQName()}`}const i=this.getURIQueryOptionValue("$select");const n=this.getURIQueryOptionValue("$filter");const o=this.getURIQueryOptionValue("$orderby");let r=t;let s=false;if(i){r+=`?$select=${i}`;s=true}if(this._oFilterExpression&&n){if(!s){r+="?";s=true}else{r+="&"}r+=`$filter=${n}`}if(this._oSortExpression&&o){if(!s){r+="?";s=true}else{r+="&"}r+=`$orderby=${o}`}return r},_oDimension:null,_oParameterizationRequest:null,_oFilterExpression:null,_oSortExpression:null,_oValueSetResult:null};return{}},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil", ["sap/ui/model/FilterOperator","sap/ui/model/analytics/odata4analytics","sap/ui/core/format/NumberFormat","sap/ui/model/odata/ODataModel","sap/base/Log","sap/ui/thirdparty/jquery","sap/base/util/UriParameters","sap/ushell/utils/UrlParsing","sap/ushell/services/CrossApplicationNavigation"],(e,t,i,n,s,jQuery,r,a,l)=>{"use strict";const o=t.ParameterizationRequest;const c=t.QueryResultRequest;const u=t.Model.ReferenceByModel;const f=t.Model;sap=sap||{};sap.ushell=sap.ushell||{};sap.ushell.components=sap.ushell.components||{};sap.ushell.components.tiles.indicatorTileUtils=sap.ushell.components.tiles.indicatorTileUtils||{};sap.ushell.components.tiles.indicatorTileUtils.util=sap.ushell.components.tiles.indicatorTileUtils.util||{};sap.ushell.components.tiles.indicatorTileUtils.util=function(t,a){const g={};const T={ANN:"years",WEE:"weeks",DAY:"days",HUR:"hours",MIN:"minutes"};const h={};const m={};return{getScheduledJob:function(e){return h[e]},setScheduledJob:function(e,t){h[e]=t},isCallInProgress:function(e){return m[e]},setUnsetCallInProgress:function(e,t){m[e]=t},getTimeUnitMap:function(){return T},getHanaUser:function(){return authObject.userName},addSystemToServiceUrl:function(e,t){s.info("Hana Adapter --\x3e Add System to Service Url");if(sap.ushell&&sap.ushell.Container){if(t){sap.ushell.Container.getServiceAsync("URLParsing").then(i=>{sap.ui.model.odata.ODataUtils.setOrigin(e,{alias:t})})}else{sap.ushell.Container.getServiceAsync("URLParsing").then(t=>{sap.ui.model.odata.ODataUtils.setOrigin(e)})}}return e},getODataModelByServiceUri:function(e){e=this.addSystemToServiceUrl(e);if(!g[e]){const t=new n(e,{loadMetadataAsync:true,json:true});g[e]=t}return g[e]},getEdmType:function(e,t){let i=null;if(e instanceof n){i=e}else{i=this.getODataModelByServiceUri(e)}if(i&&i.getServiceMetadata()){const e=i.getServiceMetadata();const n=e.dataServices.schema[0].entityType;if(n){for(let e=0;e<n.length;e++){const i=n[e];const s=i.property;for(let e=0;e<s.length;e++){const i=s[e];if(i.name==t){return i.type}}}}}return null},getMillisecond:function(e,t){let i;switch(t){case"seconds":i=e*1e3;break;case"minutes":i=e*60*1e3;break;case"hours":i=e*60*60*1e3;break;case"days":i=e*24*60*60*1e3;break;case"weeks":i=e*7*24*60*60*1e3;break;case"months":i=e*4*7*24*60*60*1e3;break;case"years":i=e*12*4*7*24*60*60*1e3;break}return i},getUTCDate:function(){const e=new Date;return e},isCacheValid:function(e,t,i,n,s){const r=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(e);if(!r){return false}else if(!(i&&Number(i))){return true}const a=this.getMillisecond(i,T[n]);let l;if(r.CachedTime instanceof Date){l=r.CachedTime&&r.CachedTime.getTime()}else{l=r.CachedTime&&parseInt(r.CachedTime.substr(6),10)}const o=this.getUTCDate();return l>=t&&a>=o-l&&!s},getMantissaLength:function(e){const t=e.toString();let i=0;if(e<0){i=1}if(t.indexOf(".")===-1){return e<0?t.length-1:t.length}return t.substring(i,t.indexOf(".")).length},getLocaleFormattedValue:function(e,t,n,s,r){sap.ui.require("sap.ui.core.format.NumberFormat");s=s||false;r=r||null;if(s){return i.getCurrencyInstance({style:"short",showMeasure:false}).format(e,r)}let a=2;const l={style:"short"};let o;if(!(n==-1||n==null)){l.shortDecimals=Number(n);l.minFractionDigits=Number(n);l.maxFractionDigits=Number(n)}let c=i.getInstance(l);if(t==-2){if(e>9999){o="????"}else if(e>-.001&&e<0||e<.001&&e>0){o="0"}else{if(e.toString().indexOf(".")!=-1){o=Number(e).toFixed(4-e.toString().indexOf("."))}else{o=Number(e)}o=c.format(o)}}else if(n==-1||n==null){const t=this.getMantissaLength(e);if(!(t%3)){a=1}if(t%3===1){a=3}if(t%3===2){a=2}if(Math.abs(e)%Math.pow(10,t-1)==0){a=0}else if(Math.abs(e)%Math.pow(10,t-1)<6*Math.pow(10,t-4)){a=0}c=i.getInstance({style:"short",shortDecimals:a});o=c.format(e)}else{o=c.format(e)}return o},getPlatform:function(e){return(new r(window.location.href).get("sb_metadata")||e||"HANA").toUpperCase()},getTileTitleSubtitle:function(e){const t={};if(e.bag&&e.bag.getBagIds()&&e.bag.getBagIds().length){t.title=e.bag.getBag("sb_tileProperties").getText("title")||e.bag.getBag("sb_tileProperties").getProperty("title")||e.preview.getTitle();t.subTitle=e.bag.getBag("sb_tileProperties").getText("description")||e.bag.getBag("sb_tileProperties").getProperty("description")||e.preview.getDescription()}else{t.title=e.preview.getTitle();t.subTitle=e.preview.getDescription()}return t},scheduleFetchDataJob:function(e){let t;if(this.getView().getViewName().indexOf("DualTile")!==-1){t=this.oKpiTileView.oConfig}else{t=this.oConfig}const i=`${t.TILE_PROPERTIES.id}data`;let n=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(i);if(n){clearTimeout(n);n=undefined}const s=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeUnitMap();const r=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTime(t);const a=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTimeUnit(t);const l=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(r,s[a]);let o;if(this.cacheTime instanceof Date){o=this.cacheTime}else{o=new Date(parseInt(this.cacheTime.substr(6),10))}let c=l-(sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()-o);if(c<=0){c=0}else if(c>2147483646){c=2147483646}if(!e){c=3e5}if(this.getView().getViewName().indexOf("DualTile")!==-1){n=setTimeout(this.refreshPress.bind(this),c)}else{n=setTimeout(this.refreshHandler.bind(this,false,true),c);sap.ushell.components.tiles.indicatorTileUtils.util.setScheduledJob(i,n)}this.updateDatajobScheduled=true},scheduleTimeStampJob:function(){const e=`${this.oConfig.TILE_PROPERTIES.id}time`;let t=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(e);let i;if(t){clearTimeout(t);t=undefined}if(this.cacheTime instanceof Date){i=this.cacheTime}else{i=new Date(parseInt(this.cacheTime.substr(6),10),13)}const n=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeDifference(sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()-i);t=setTimeout(this.setTimeStamp.bind(this,this.cacheTime),n.timer);sap.ushell.components.tiles.indicatorTileUtils.util.setScheduledJob(e,t);this.updateTimeStampjobScheduled=true},getBoolValue:function(e){let t=false;if(typeof e==="boolean"&&e){t=true}return t},getSeconds:function(e){return e/1e3},getMinutes:function(e){return this.getSeconds(e)/60},getHours:function(e){return this.getMinutes(e)/60},getDays:function(e){return this.getHours(e)/24},getWeeks:function(e){return this.getDays(e)/7},getMonths:function(e){return this.getWeeks(e)/4},getYears:function(e){return this.getMonths(e)/12},getTimeDifference:function(e){const t={};if(e){const i=this.getMinutes(e);const n=this.getHours(e);const s=this.getDays(e);if(i<5){t.time=0;t.unit="minutes";t.timer=Math.round(this.getMillisecond(5-i,"minutes"))}else if(i>=5&&i<60){if(i<10){t.time=5}else{t.time=i-i%10}t.unit="minutes";t.timer=Math.round(this.getMillisecond(10-i%10,"minutes"))}else if(n>=1&&n<24){t.unit="hours";t.time=n-n%1;t.timer=Math.round(this.getMillisecond(1-n%1,"hours"))}else if(s>=1&&s<2){t.unit="days";t.time=s-s%1;t.timer=Math.round(this.getMillisecond(1-s%1,"days"))}else{t.unit="days";t.time=s-s%1;t.timer=this.getMillisecond(2,"days")}}else{t.timer=6e3;t.unit="days";t.timer=2e3}return t},getCachingTime:function(e){return e.CACHINGTIME&&Number(e.CACHINGTIME)||e.TILE_PROPERTIES.cachingTime&&Number(e.TILE_PROPERTIES.cachingTime)},getCachingTimeUnit:function(e){return e.CACHINGUNIT||e.TILE_PROPERTIES.cachingTimeUnit},getFrontendCacheQuery:function(e,t,i,n){let r;try{let e=n.url.addSystemToServiceUrl("/sap/opu/odata/SSB/SMART_BUSINESS_RUNTIME_SRV");e=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(e);r=this.getODataModelByServiceUri(e);e="/CacheParameters(P_CacheType=1)/Results";return{oModel:r,uri:e}}catch(e){s.error("FrontEnd cache Metadata failed");return null}},isDualTile:function(e){const t=e&&e.TILE_PROPERTIES&&e.TILE_PROPERTIES.tileType;if(t.indexOf("DT-")==-1){return false}return true},writeFrontendCacheByChipAndUserId:function(e,t,i,n,r){function a(e){s.info("cache write successFully");r(e)}function l(){s.error("cache update failed");r(null)}try{let t=e.url.addSystemToServiceUrl("/sap/opu/odata/SSB/SMART_BUSINESS_RUNTIME_SRV/");t=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(t);const n=this.getODataModelByServiceUri(t);const s="/CacheData";n.create(s,i,{async:true,success:a,error:l})}catch(e){s.error(e)}},getKpiChipsOnPage:function(e,t){const i=[];sap.ushell.Container.getServiceAsync("FlpLaunchPage").then(n=>{n.getGroups().done(n=>{if(n&&n instanceof Array&&n.length){s.info("Group Chip fetch")}t(e,i)})})},getFrontendCache:function(e,t){const i=this;let n=sap.ushell.components.tiles.indicatorTileUtils.cache.getFrontEndCacheDeferredObject(t.url.getApplicationSystem());let r;if(n){r=n}else{r=jQuery.Deferred()}const a=e&&e.TILE_PROPERTIES&&e.TILE_PROPERTIES.id;const l=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(a);if(l){n.resolve(true)}else if(n){return n.promise()}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setFrontEndCacheDefferedObject(t.url.getApplicationSystem(),r);n=r;this.getKpiChipsOnPage(a,(e,r)=>{if(r){const a=i.getFrontendCacheQuery(r,sap.ushell.Container.getUser().getId(),r,t);if(a){const t=a.oModel;const i=a.uri;let r=false;t.read(i,null,null,true,t=>{if(t&&t.results&&t.results instanceof Array&&t.results.length){jQuery.each(t.results,(e,t)=>{sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.ChipId,t)})}if(sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(e)){r=true}n.resolve(r)},e=>{if(e&&e.response){s.error(`${e.message} : ${e.request.requestUri}`)}n.reject()})}else{n.reject()}}else{n.resolve(false)}})}return n.promise()},getModelerRuntimeServiceModel:function(){let e="/sap/hba/r/sb/core/odata/runtime/SMART_BUSINESS.xsodata";e=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(e);return this.getODataModelByServiceUri(e)},getSapFontErrorCode:function(){return String.fromCharCode(57521)},getSapFontBusyCode:function(){return String.fromCharCode(57842)},prepareFilterStructure:function(e,t){const i=[];if(t){e=e.concat(t)}for(let t=0;t<e.length;t++){const n={};n.comparator=e[t].OPERATOR;n.filterPropertyName=e[t].NAME;if(e[t].ID){n.id=e[t].ID}n.type=e[t].TYPE;n.value=e[t].VALUE_1;n.valueTo=e[t].VALUE_2;i.push(n)}return i},getODataModelByServiceUriFromChipAPI:function(e,t){e=t.url.addSystemToServiceUrl(e);if(!g[e]){const t=new n(e,true);g[e]=t}return g[e]},cacheBustingMechanism:function(e){if(window["sap-ushell-config"].cacheBusting.cacheBusterToken){const t=window["sap-ushell-config"].cacheBusting&&window["sap-ushell-config"].cacheBusting.cacheBusterToken;e=`${e}?_=${t}`}return e},getRunTimeUri:function(e){let t="/sap/hba/r/sb/core/odata/runtime/SMART_BUSINESS.xsodata";let i="/sap/opu/odata/SSB/SMART_BUSINESS_RUNTIME_SRV";if(e.toUpperCase()=="HANA"){if(window["sap-ushell-config"].cacheBusting){t=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(t)}return t}if(window["sap-ushell-config"].cacheBusting){i=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(i)}return i},getFilterFromRunTimeService:function(e,t,i,n){const s=e.TILE_PROPERTIES.sb_metadata;const r=this.getODataModelByServiceUriFromChipAPI(this.getRunTimeUri(s),t);const a="ID eq '#EVALUATIONID'".replace("#EVALUATIONID",e.EVALUATION.ID);const l=r.read("/EVALUATION_FILTERS",null,{$filter:a},true,function(e){let t=[];if(e.results.length){t=e.results}i.call(this,t)},n);return l},_getOData4AnalyticsObject:function(e){let t=null;if(e instanceof n){t=e}else if(typeof e==="string"){t=this.getODataModelByServiceUri(e)}else{throw new Error(`Invalid Input to Create ODataModel Object : ${e}`)}const i=new f(u(t));return i},findTextPropertyForDimension:function(e,t,i){try{const n=this._getOData4AnalyticsObject(e);const s=n.findQueryResultByName(t);const r=s.findDimensionByName(i);if(r.getTextProperty()){return r.getTextProperty().name}return i}catch(e){s.error(`Error Fetching Text Property for ${i} : ${e.toString()}`)}},getEvalValueMeasureName:function(e,t,i){const n=e.EVALUATION_VALUES;for(let e=0;e<n.length;e++){if(n[e].TYPE==t){if(i==="FIXED"){return n[e].FIXED}return n[e].COLUMN_NAME}}},getSemanticColorName:function(e){let t="";if(e=="Error"){t="sb.error"}if(e=="Neutral"){t="sb.neutral"}if(e=="Critical"){t="sb.critical"}if(e=="Good"){t="sb.good"}return t},setTooltipInTile:function(e,t,i){let n="";const s=sap.ushell.components.tiles.utils.getResourceBundle();if(t=="NT"||t=="DT"){if(i.status){n+=`${s.getText("sb.status")}: ${s.getText(i.status)}\n`}if(i.actual){n+=`${s.getText("sb.actual")}: ${i.actual}\n`}if(i.target){n+=`${s.getText("sb.target")}: ${i.target}\n`}if(i.cH){n+=`${s.getText("sb.ch")}: ${i.cH}\n`}if(i.wH){n+=`${s.getText("sb.wh")}: ${i.wH}\n`}if(i.wL){n+=`${s.getText("sb.wl")}: ${i.wL}\n`}if(i.cL){n+=`${s.getText("sb.cl")}: ${i.cL}\n`}}if(t=="CONT"||t=="COMP"){if(i.measure&&t=="CONT"){if(i&&i.contributionTile.contributionTile&&i.contributionTile.contributionTile[1]==="asc"){n+=`${s.getText("sb.bottomn")}: ${i.contributionTile[0]}\n`}else if(i&&i.contributionTile.contributionTile&&i.contributionTile.contributionTile.length){n+=`${s.getText("sb.topn")}: ${i.contributionTile[0]}\n`}}if(i.m1&&(i.v1==undefined||i.v1==null?false:i.v1.toString())&&i.c1){n+=`${i.m1}: ${i.v1} ${s.getText(i.c1)}\n`}if(i.m2&&(i.v2==undefined||i.v2==null?false:i.v2.toString())&&i.c2){n+=`${i.m2}: ${i.v2} ${s.getText(i.c2)}\n`}if(i.m3&&(i.v3==undefined||i.v3==null?false:i.v3.toString())&&i.c3){n+=`${i.m3}: ${i.v3} ${s.getText(i.c3)}\n`}}if(e&&e.setTooltip){e.setTooltip(n)}},_getFormattedTileProperties:function(e){e=e||{};const t=["sb_metadata","sb_navigation","sb_catalog"];let i=false;for(let n=0;!i&&n<t.length;n++){i=i||new r(window.location.href).get(t[n])||e[t[n]]}e.sb_metadata=(new r(window.location.href).get("sb_metadata")||e.sb_metadata||"HANA").toLowerCase();e.sb_navigation=(new r(window.location.href).get("sb_navigation")||e.sb_navigation||"abap").toLowerCase();e.sb_catalog=(new r(window.location.href).get("sb_catalog")||e.sb_catalog||"HANA").toLowerCase();e.isPlatformInfoPresent=i;return e},getEvaluationDetailsFromRunTimeService:function(e,t,i,n){const s=this.getODataModelByServiceUri(this.getRunTimeUri(t));const r="ID eq '#EVALUATIONID'".replace("#EVALUATIONID",i);s.read(e,null,{$filter:r},true,function(e){let t=[];if(e.results.length){t=e.results}n.call(this,t)})},getParsedChip:function(e,t,i){try{const n={};const s=JSON.parse(e);const r=JSON.parse(s.TILE_PROPERTIES).evaluationId||"";if(s.TILE_PROPERTIES){const e=JSON.parse(s.TILE_PROPERTIES);if(e&&(e.instanceId||e.catalogId)){return false}}const a=this;if(s.blankTile){n.BLANKTILE=s.blankTile}if(s.cachingTime){n.CACHINGTIME=s.cachingTime}if(s.cachingTimeUnit){n.CACHINGUNIT=s.cachingTimeUnit}if(s.TAGS){n.TAGS=JSON.parse(s.TAGS)}if(s.ADDITIONAL_FILTERS){n.ADDITIONAL_FILTERS=JSON.parse(s.ADDITIONAL_FILTERS)}if(s.ADDITIONAL_APP_PARAMETERS){n.ADDITIONAL_APP_PARAMETERS=JSON.parse(s.ADDITIONAL_APP_PARAMETERS)}n.TILE_PROPERTIES=this._getFormattedTileProperties(JSON.parse(s.TILE_PROPERTIES));const l=n.TILE_PROPERTIES.sb_metadata;if(s.EVALUATION_FILTERS){n.EVALUATION_FILTERS=JSON.parse(s.EVALUATION_FILTERS);if(s.EVALUATION_VALUES){n.EVALUATION_VALUES=JSON.parse(s.EVALUATION_VALUES);if(s.EVALUATION){n.EVALUATION=JSON.parse(s.EVALUATION);if(i){i(n)}else{return n}}else if(!t){a.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",l,r,e=>{n.EVALUATION=e;if(i){i(n)}else{return n}})}else if(i){i(n)}else{return n}}else if(!t){a.getEvaluationDetailsFromRunTimeService("/EVALUATION_VALUES",l,r,e=>{n.EVALUATION_VALUES=e;if(s.EVALUATION){n.EVALUATION=JSON.parse(s.EVALUATION);if(i){i(n)}else{return n}}else{a.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",l,r,e=>{n.EVALUATION=e;if(i){i(n)}else{return n}})}})}else if(i){i(n)}else{return n}}else if(t){if(i){i(n)}else{return n}}else{a.getEvaluationDetailsFromRunTimeService("/EVALUATION_FILTERS",l,r,e=>{n.EVALUATION_FILTERS=e;if(s.EVALUATION_VALUES){n.EVALUATION_VALUES=JSON.parse(s.EVALUATION_VALUES);if(s.EVALUATION){n.EVALUATION=JSON.parse(s.EVALUATION);if(i){i(n)}else{return n}}else{a.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",l,r,e=>{n.EVALUATION=e;if(i){i(n)}else{return n}})}}else{a.getEvaluationDetailsFromRunTimeService("/EVALUATION_VALUES",l,r,e=>{n.EVALUATION_VALUES=e;if(s.EVALUATION){n.EVALUATION=JSON.parse(s.EVALUATION);if(i){i(n)}else{return n}}else{a.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",l,r,e=>{n.EVALUATION=e;if(i){i(n)}else{return n}})}})}})}}catch(e){return false}},getNavigationTarget:function(e,t){let i;const n={};n.evaluationId=e.EVALUATION.ID;n.chipId=e.TILE_PROPERTIES.id;if(t){n["sap-system"]=t}n.tileType=e.TILE_PROPERTIES.tileType;if(e.TILE_PROPERTIES.dimension){n.dimension=e.TILE_PROPERTIES.dimension}if(e.TILE_PROPERTIES.storyId){n.storyId=e.TILE_PROPERTIES.storyId}if(e.TILE_PROPERTIES.apfConfId){n["sap-apf-configuration-id"]=e.TILE_PROPERTIES.apfConfId}if(e.TILE_PROPERTIES.isPlatformInfoPresent){n.sb_metadata=e.TILE_PROPERTIES.sb_metadata;n.sb_navigation=e.TILE_PROPERTIES.sb_navigation;n.sb_catalog=e.TILE_PROPERTIES.sb_catalog}if(e.ADDITIONAL_APP_PARAMETERS){for(i in e.ADDITIONAL_APP_PARAMETERS){if(e.ADDITIONAL_APP_PARAMETERS.hasOwnProperty(i)){if(e.ADDITIONAL_APP_PARAMETERS[i].constructor==Array){const t=e.ADDITIONAL_APP_PARAMETERS[i];for(let e=0;e<t.length;e++){n[i]=t[e]}}else{n[i]=e.ADDITIONAL_APP_PARAMETERS[i]}}}}let s=l&&l.hrefForExternal({target:{semanticObject:e.TILE_PROPERTIES.semanticObject,action:e.TILE_PROPERTIES.semanticAction},params:n})||"";if(e.ADDITIONAL_FILTERS){const t=e.ADDITIONAL_FILTERS;let i="&";for(let e=0;e<t.length;e++){if(t[e].OPERATOR==="EQ"){i=`${i}/${t[e].NAME}=${t[e].VALUE_1}`}}s+=i}return s},getChipTitle:function(e){let t="";if(e){const i=e.EVALUATION||{};t=i.INDICATOR_TITLE||""}return t},getstringifyTileConfig:function(e){const t={};t.EVALUATION=JSON.stringify(e.EVALUATION);t.EVALUATION_FILTERS=JSON.stringify(e.EVALUATION_FILTERS);t.EVALUATION_VALUES=JSON.stringify(e.EVALUATION_VALUES);t.TILE_PROPERTIES=JSON.stringify(e.TILE_PROPERTIES);return JSON.stringify(t)},getChipSubTitle:function(e){let t="";if(e){const i=e.EVALUATION||{};t=i.TITLE||""}return t},getAllMeasures:function(e,t){let i=[];try{const n=this._getOData4AnalyticsObject(e);const s=n.findQueryResultByName(t);i=s.getAllMeasureNames()}catch(e){s.error(`Error Fetching All Measures : ${e.toString()}`)}return i},getFormattingMetadata:function(e,t,i){const s={};s._hasCurrency=false;s._hasSapText=false;let r=null;if(e instanceof n){r=u(e)}else{const t=this.getODataModelByServiceUri(e);r=u(t)}const a=new f(r);const l=a.findQueryResultByName(t);const o=l.getAllMeasures();if(o[i]){const e=o[i]._oTextProperty&&o[i]._oTextProperty.name?o[i]._oTextProperty.name:"";if(e!=""){s._hasSapText=true;s._sapTextColumn=e}else if(o[i].hasOwnProperty("_oUnitProperty")){const e=o[i]._oUnitProperty.extensions;for(let t=0;t<o[i]._oUnitProperty.extensions.length;t++){if(e[t].name==="semantics"&&e[t].value==="currency-code"){s._hasCurrency=true;s._currencyColumn=o[i]._oUnitProperty.name}}}}return s},getAllDimensions:function(e,t){function i(e,t){let i=0;let n=0;const s=[];while(i<e.length&&n<t.length){if(e[i]<t[n]){i++}else if(e[i]>t[n]){n++}else{s.push(e[i]);i++;n++}}return s}let n=[];let r=[];try{const s=this._getOData4AnalyticsObject(e);const a=s.findQueryResultByName(t);const l=a.getEntityType();r=l.getFilterablePropertyNames();n=a.getAllDimensionNames();if(r&&r.length){n=i(r.sort(),n.sort())}}catch(e){s.error(`Error Fetching All Dimesions : ${e.toString()}`)}return n},prepareQueryServiceUri:function(t,i,r,a,l,g,T){function h(e){return e.replace(/'/g,"''")}let m=null;function p(e){let t=e.toJSON();const i=t.charAt(t.length-1).toUpperCase();if(i.charCodeAt(0)>=65&&i.charCodeAt(0)<=90){t=t.slice(0,-1)}return t}function d(e){if(e){try{if(e==+e){e=window.parseInt(e)}const t=new Date(e);const i=t.getTime();if(isNaN(i)){return e}return p(t)}catch(e){}}return e}try{let p=null;if(t instanceof n){p=u(t)}else{const e=this.getODataModelByServiceUri(t);p=u(e)}const E=new f(p);const A=E.findQueryResultByName(i);const I=new c(A);if(r){I.setMeasures(r.split(","));I.includeMeasureRawFormattedValueUnit(null,true,true,true)}if(a){if(typeof a==="string"){m=a;m=m.split(",")}for(let e=0;e<m.length;e++){I.addToAggregationLevel([m[e]]);const t=A.getAllDimensions();if(t[m[e]].getTextProperty()!=null){I.includeDimensionKeyTextAttributes([m[e]],true,true,null)}}}if(l&&l.length){const i=[];const n=[];let r;for(let e=0,t=l.length;e<t;e++){r=l[e];if(r.type==="PA"){n.push(r)}else if(r.type==="FI"){i.push(r)}}if(i.length){const n=I.getFilterExpression();for(let s=0,a=i.length;s<a;s++){r=i[s];if(this.getEdmType(t,r.filterPropertyName)=="Edm.DateTime"){r.value=d(r.value);r.valueTo=d(r.valueTo)}if(r.comparator==e.BT){n.addCondition(r.filterPropertyName,r.comparator,h(r.value),r.valueTo)}else{const e=r.value.split(",");for(let t=0,i=e.length;t<i;t++){n.addCondition(r.filterPropertyName,r.comparator,h(e[t].replace(/\^\|/g,",")),null)}}}}if(n.length){if(A.getParameterization()){const e=new o(A.getParameterization());const t=A.getParameterization();let i;let r;let a;let l;let c;for(let o=0,u=n.length;o<u;o++){i=n[o];r=t.findParameterByName(i.filterPropertyName);if(r.isIntervalBoundary()===true&&r.isLowerIntervalBoundary()===true){c=r.getPeerIntervalBoundaryParameter();for(let e=0,t=n.length;e<t;e++){if(n[e].filterPropertyName===c.getName()){l=h(n[e].value);break}}a=h(i.value);if(l){e.setParameterValue(i.filterPropertyName,a,l)}}else if(r.isIntervalBoundary()===true&&r.isLowerIntervalBoundary()===false){s.info("Future development")}else{e.setParameterValue(i.filterPropertyName,h(i.value))}}I.setParameterizationRequest(e)}}}let S=I.getURIToQueryResultEntries();if(g&&g.length){S=`${S}&$orderby=`;for(let e=0,t=g.length;e<t;e++){const t=g[e].sortOrder||"asc";if(t){S+=`${g[e].element} ${t},`}}S=S.slice(0,S.length-1)}if(T){S=`${S}&$top=${T}`}const O=A.getAllMeasures();const N=[];for(let e=0;e<r.split(",").length;e++){N.push(O[r.split(",")[e]].getUnitProperty())}return{uri:S,model:E.getODataModel(),unit:N}}catch(e){s.error(`Error Preparing Query Service Uri using OData4Analytics Library : ${e.toString()}`);if(arguments.length){s.error("Arguments Passed to this function");s.error(`${arguments[0]},${arguments[1]},${arguments[2]},${arguments[3]}`)}else{s.error("NO Arguments passed to this function")}return null}},getAllEntitySet:function(e){let t=[];try{const i=this._getOData4AnalyticsObject(e);t=i.getAllQueryResultNames()}catch(e){s.error(`Error fetching Enity Set : ${e.toString()}`)}return t},getAllMeasuresWithLabelText:function(e,i){const n=[];try{const s=this._getOData4AnalyticsObject(e);const r=s.findQueryResultByName(i);const a=r.getAllMeasureNames();for(let e=0;e<a.length;e++){const i=a[e];t.oMeasure=r.findMeasureByName(i);n.push({key:i,value:oMeasure.getLabelText()})}}catch(e){s.error(`Error Fetching All Measures : ${e.toString()}`)}return n},getAllDimensionsWithLabelText:function(e,t){const i=[];try{const n=this._getOData4AnalyticsObject(e);const s=n.findQueryResultByName(t);const r=s.getAllDimensionNames();for(let e=0;e<r.length;e++){const t=r[e];const n=s.findDimensionByName(t);let a=null;if(n.getTextProperty()!=null){a=n.getTextProperty().name}i.push({key:t,value:n.getLabelText(),textProperty:a})}}catch(e){s.error(`Error Fetching All Dimesions : ${e.toString()}`)}return i},getAllInputParams:function(e,t){let i=[];try{const n=this._getOData4AnalyticsObject(e);const s=n.findQueryResultByName(t);if(s.getParameterization()){const e=s.getParameterization();i=e.getAllParameterNames()}}catch(e){s.error(`Error Fetching Input Params : ${e.toString()}`)}return i},getAllInputParamsWithFlag:function(e,t){const i=[];try{const n=this._getOData4AnalyticsObject(e);const s=n.findQueryResultByName(t);if(s.getParameterization()){const e=s.getParameterization();const t=e.getAllParameterNames();for(let n=0;n<t.length;n++){const s=t[n];const r=e.findParameterByName(s);i.push({name:s,optional:r.isOptional()})}}}catch(e){s.error(`Error Fetching Input Params : ${e.toString()}`)}return i},formatOdataObjectToString:function(e){if(e&&e.constructor==Object){if(e.__edmType=="Edm.Time"){const t=e.ms;const i=Math.floor(t/1e3%60);const n=Math.floor(t/6e4%60);const s=Math.floor(t/36e5%24);return`${s}H${n}M${i}S`}}return e},generateCombinations:function(e){function t(e,t){while(t.length<e){t=`0${t}`}return t}let i=Math.pow(2,e.length);const n=[];let s=0;while(i>1){let r=(i-1).toString(2);r=t(e.length,r);n[s]=[];for(let t=0;t<r.length;t++){if(Number(r[t])){n[s].push(e[t])}}i--;s++}return n},logError:function(e,t){if(e=="no data"&&t){const e=sap.ushell.components.tiles.utils.getResourceBundle();t.setFailedText(e.getText("sb.noData"))}s.error(e.toString())},numberOfLeadingZeros:function(e){e=String(e);let t=0;const i=e.indexOf(".");if(i==-1){return 0}if(Number(e.split(".")[0])!=0){return 0}let n=i+1;while(e[n++]=="0"){++t}return t},formatValue:function(e,t,i){i=i||3;const n={3:"K",6:"M",9:"B",12:"T",0:""};n["-3"]="m";n["-6"]="u";n["-9"]="n";n["-12"]="t";n["-2"]="%";let s;let r;const a=Number(e).toPrecision(i);const l=this.numberOfLeadingZeros(a);if(l>0&&t<0){s=a*Math.pow(10,l+i);r=-(l+i)}else{s=Number(a.split("e")[0]);r=Number(a.split("e")[1])||0}if(!e&&e!=0){return{value:"",unitPrefix:""}}let o;if(t>=0){if(r%3!=0){if(r%3==2){if(r+1==t){r=r+1;s=s/10}else{r=r-2;s=s*100}}else if(r+2==t){r=r+2;s=s/100}else{r--;s=s*10}}else if(r==15){s=s*1e3;r=12}}else if(t=="-2"){o=this.formatValue(e*100,0)}else if(r>=0&&e<10&&t=="-3"){s=e*Math.pow(10,3);r=-3}else if(r>=0){return this.formatValue(e,0)}else{r=Math.abs(r);t=Math.abs(t);if(t>r){s=s/Math.pow(10,r%3);r=r-r%3}else{const e=r-t;s=s/Math.pow(10,e);r=r-e}r=0-r}s+="";if(t=="-2"){const e=o.unitPrefix==""?Number(`${o.value}`).toFixed(4-`${o.value}`.indexOf(".")):Number(`${o.value}`).toFixed(3-`${o.value}`.indexOf("."));return{value:Number(e),unitPrefix:o.unitPrefix+n[-2]}}s=Number(s).toFixed(4-s.indexOf("."));return{value:Number(s),unitPrefix:n[r]}},isSmartbusinessChipAndCachable:function(e){const t=this.getParsedChip(e&&e.getConfigurationParameter("tileConfiguration"));return t&&t.TILE_PROPERTIES&&t.TILE_PROPERTIES.tileType&&this.getCachingTime(t)},getHanaClient:function(){let e;function t(t,i,n){e=t.sessionClient;sap.ushell.components.tiles.indicatorTileUtils.cache.setCacheHanaClient(e);sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.resolve(e)}function i(e,t,i){s.error(e.responseText);s.error("session client call failed");sap.ushell.components.tiles.indicatorTileUtils.cache.setCacheHanaClient(null);sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.reject()}const n=sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED||jQuery.Deferred();const r=sap.ushell.components.tiles.indicatorTileUtils.cache.getCacheHanaClient();if(r!=undefined){e=r;sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.resolve(e)}else if(sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED){return sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.promise()}else{sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED=n;jQuery.ajax({type:"GET",async:false,dataType:"json",url:"/sap/hba/r/sb/core/logic/GetSessionClient.xsjs",success:t,error:i})}return sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.promise()},abortPendingODataCalls:function(e){try{if(e){e.abort()}}catch(e){this.logError(e)}}}}(window,jQuery);sap.ushell.components.tiles.indicatorTileUtils.cache=function(){const e={};const t={};const i="HANA_CLIENT";return{getCacheHanaClient:function(){return e[i]},setCacheHanaClient:function(t){e[i]=t},getEvaluationByChipId:function(t){if(e[t]){return e[t]}return null},getEvaluationById:function(e){return this.getEvaluationByChipId(e)},setEvaluationById:function(t,i){e[t]=i},getFrontEndCacheDeferredObject:function(t){if(e[t]){return e[t]}return null},setFrontEndCacheDefferedObject:function(t,i){e[t]=i},getKpivalueById:function(e){if(t[e]){return t[e]}return null},setKpivalueById:function(e,i){t[e]=i}}}();return{}},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorcomparison/ComparisonTile.controller", ["sap/ushell/components/tiles/generic","sap/m/library","sap/base/Log"],(e,i,t)=>{"use strict";const o=i.DeviationIndicator;const l=i.ValueColor;const s=i.Size;const a=i.LoadState;const n=i.FrameType;const c=e.extend("sap.ushell.components.tiles.indicatorcomparison.ComparisonTile",{onInit:function(){this.KPI_VALUE_REQUIRED=false},_processDataForComparisonChart:function(e,i,t){const o=[];const l={};let s;let a;let n;let c;let T=[];const r=this;let E=null;let u;for(s=0;s<e.results.length;s++){u=e.results[s]}T=sap.ushell.components.tiles.indicatorTileUtils.util.getAllMeasuresWithLabelText(this.oTileApi.url.addSystemToServiceUrl(this.oConfig.EVALUATION.ODATA_URL),this.oConfig.EVALUATION.ODATA_ENTITYSET);for(s=0,n=T.length;s<n;s++){a=T[s];l[a.key]=a.value}const h=r.oConfig.TILE_PROPERTIES.COLUMN_NAMES||r.oConfig.EVALUATION.COLUMN_NAMES;for(s=0;s<h.length;s++){const e={};const i=h[s];e.value=Number(u[i.COLUMN_NAME]);let a=Number(u[i.COLUMN_NAME]);let n=false;const T=r._getEvaluationThresholdMeasures();const p=T?Array.prototype.indexOf.call(T,i.COLUMN_NAME):-1;if(p>-1){n=true}if(r.oConfig.EVALUATION.SCALING==-2&&n){a*=100}const C=r.isCurrencyMeasure(i.COLUMN_NAME);if(t&&t[s]&&u[t[s].name]){E=u[t[s].name]}c=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(a,r.oConfig.EVALUATION.SCALING,r.oConfig.EVALUATION.DECIMAL_PRECISION,C,E);if(r.oConfig.EVALUATION.SCALING==-2&&n){c+=" %"}e.displayValue=c.toString();if(t){if(t[s]&&u[t[s].name]){e.displayValue+=` ${u[t[s].name]}`}}e.color=i.semanticColor;e.title=l[i.COLUMN_NAME]||i.COLUMN_NAME;e.measure=i.COLUMN_NAME;e.isCurM=C;o.push(e)}return o},fetchChartData:function(e,i,o,l){function s(e,i){let t=false;if(e&&e.results&&e.results.length){for(let o=0,l=i.length;o<l&&!t;o++){t=e.results[0][i[o].COLUMN_NAME]!==null}}return t}const a=this;try{const n=this.oConfig.EVALUATION.ODATA_ENTITYSET;const c=this.oConfig.EVALUATION.COLUMN_NAME;let T=c;let r;if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES){for(r=0;r<this.oConfig.TILE_PROPERTIES.COLUMN_NAMES.length;r++){if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[r].COLUMN_NAME!=this.oConfig.EVALUATION.COLUMN_NAME){T=`${T},${this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[r].COLUMN_NAME}`}}}else{for(r=0;r<this.oConfig.EVALUATION.COLUMN_NAMES.length;r++){if(this.oConfig.EVALUATION.COLUMN_NAMES[r].COLUMN_NAME!=this.oConfig.EVALUATION.COLUMN_NAME){T=`${T},${this.oConfig.EVALUATION.COLUMN_NAMES[r].COLUMN_NAME}`}}}const E=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(e);const u=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(a.oConfig.TILE_PROPERTIES.id);let h;if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)){if(u){h=u.Data&&JSON.parse(u.Data)}}const p=a.oTileApi.configuration.getParameterValueAsString("timeStamp");const C=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(a.oConfig.TILE_PROPERTIES.id,p,a.chipCacheTime,a.chipCacheTimeUnit,a.tilePressed);if(h&&!h.rightData||!u||!C&&a.oTileApi.visible.isVisible()||E||i&&a.oTileApi.visible.isVisible()||a.getView().getViewData().refresh){if(a.kpiValueFetchDeferred){a.kpiValueFetchDeferred=false;const e=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);const i=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(a.oRunTimeODataModel,n,T,null,e,3);this.comparisionChartODataRef=i.model.read(i.uri,null,null,true,e=>{a.kpiValueFetchDeferred=true;let t={};if(i.unit){t.unit=i.unit}if(s(e,a.oConfig.TILE_PROPERTIES.COLUMN_NAMES||a.oConfig.EVALUATION.COLUMN_NAMES)){a.oConfig.TILE_PROPERTIES.FINALVALUE=e;a.oConfig.TILE_PROPERTIES.FINALVALUE=a._processDataForComparisonChart(a.oConfig.TILE_PROPERTIES.FINALVALUE,T.split(",")[0],i.unit);t.data=a.oConfig.TILE_PROPERTIES.FINALVALUE;const l={};a.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();l.ChipId=a.oConfig.TILE_PROPERTIES.id;l.Data=JSON.stringify(t);l.CacheMaxAge=Number(a.chipCacheTime);l.CacheMaxAgeUnit=a.chipCacheTimeUnit;l.CacheType=1;const s=a.getLocalCache(l);a.updateDatajobScheduled=false;const n=`${a.oConfig.TILE_PROPERTIES.id}data`;let c=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(n);if(c){clearTimeout(c);c=undefined}if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(a.oConfig.TILE_PROPERTIES.id,s);let e=false;if(u){e=true}if(a.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(a.oTileApi,a.oConfig.TILE_PROPERTIES.id,l,e,e=>{if(e){a.cacheTime=e&&e.CachedTime;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(a.oConfig.TILE_PROPERTIES.id,e);a.setTimeStamp()}if(a.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)){a.setTimeStamp(a.cacheTime)}})}}else{const e=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(a.oConfig.TILE_PROPERTIES.id);let i;if(e){if(!e.CachedTime){e.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()}i=e.Data;if(i){i=JSON.parse(i);i.rightData=t}e.Data=JSON.stringify(i);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(a.oConfig.TILE_PROPERTIES.id,e)}else{i={};i.rightData=t;s.Data=JSON.stringify(i);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(a.oConfig.TILE_PROPERTIES.id,s)}a.cacheWriteData=t}o.call(a,a.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(e.results.length==0){a.oConfig.TILE_PROPERTIES.FINALVALUE=e;if(sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(a.oConfig.TILE_PROPERTIES.id)){t=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(a.oConfig.TILE_PROPERTIES.id);t.data=e}else{t.data=e}sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(a.oConfig.TILE_PROPERTIES.id,t);o.call(a,a.oConfig.TILE_PROPERTIES.FINALVALUE);a.setNoData()}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(a.oConfig.TILE_PROPERTIES.id,{empty:"empty"});a.setNoData()}},e=>{a.kpiValueFetchDeferred=true;if(e&&e.response){t.error(`${e.message} : ${e.request.requestUri}`);l.call(a,e)}})}}else if(u&&u.Data){let e;const i=a.oConfig&&a.oConfig.TILE_PROPERTIES&&a.oConfig.TILE_PROPERTIES.tileType;if(i.indexOf("DT-")==-1){e=u.Data&&JSON.parse(u.Data)}else{e=u.Data&&JSON.parse(u.Data);e=e.rightData}a.cacheTime=u.CachedTime;if(a.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(a.oConfig)){a.setTimeStamp(a.cacheTime)}if(e.data&&e.data.length){a.oConfig.TILE_PROPERTIES.FINALVALUE=e.data;o.call(a,a.oConfig.TILE_PROPERTIES.FINALVALUE)}else{a.oConfig.TILE_PROPERTIES.FINALVALUE=e.data;o.call(a,a.oConfig.TILE_PROPERTIES.FINALVALUE);a.setNoData()}}else{a.setNoData()}}catch(e){a.kpiValueFetchDeferred=true;l.call(a,e)}},doProcess:function(e,i){const t=this;this.setTextInTile();this.fetchChartData(e,i,function(e){this.CALCULATED_KPI_VALUE=e;this._updateTileModel({data:this.CALCULATED_KPI_VALUE});if(t.oConfig.TILE_PROPERTIES.frameType==n.TwoByOne){t.oKpiTileView.oGenericTile.setFrameType(n.TwoByOne);t.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());const e={};e.data=this.CALCULATED_KPI_VALUE;t.getView().getViewData().deferredObj.resolve()}else{t.oKpiTileView.oGenericTile.setFrameType(n.OneByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.oKpiTileView.oGenericTile.addTileContent(t.oKpiTileView.oNVConfS);this.oKpiTileView.oGenericTile.setState(a.Loaded)}this.setToolTip(null,this.CALCULATED_KPI_VALUE,"COMP");if(this.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible())}},this.logError)},doDummyProcess:function(){const e=this;this.setTextInTile();e._updateTileModel({value:8888,size:s.Auto,frameType:n.OneByOne,state:a.Loading,valueColor:l.Error,indicator:o.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1.2,color:"Good"},{title:"Measure 2",value:.78,color:"Good"},{title:"Measure 3",value:1.4,color:"Error"}]});this.oKpiTileView.oGenericTile.setState(a.Loaded)}});return c});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorcomparison/ComparisonTile.view", ["sap/ui/core/mvc/JSView","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel","sap/m/library"],(e,i,t,o,s,a,r,l)=>{"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorcomparison.ComparisonTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorcomparison.ComparisonTile"},createContent:function(){this.setHeight("100%");this.setWidth("100%");const e=l.Size;const i=this;i.oGenericTileData={};i.oCmprsDataTmpl=new o({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});i.oCmprsChrtTmpl=new s({size:e.Responsive,scale:"{/scale}",data:{template:i.oCmprsDataTmpl,path:"/data"}});i.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:i.oCmprsChrtTmpl});i.oGenericTile=new a({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[i.oNVConfS]});i.oGenericTileModel=new r;i.oGenericTileModel.setData(i.oGenericTileData);i.oGenericTile.setModel(i.oGenericTileModel);return i.oGenericTile}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorcontribution/ContributionTile.controller", ["sap/ushell/components/tiles/generic","sap/m/library","sap/base/Log"],(e,i,t)=>{"use strict";const o=i.DeviationIndicator;const l=i.ValueColor;const s=i.Size;const a=i.LoadState;const n=i.FrameType;const c=e.extend("sap.ushell.components.tiles.indicatorcontribution.ContributionTile",{onInit:function(){this.KPI_VALUE_REQUIRED=false},_processDataForComparisonChart:function(e,i,t,o){const l=this.oConfig.TILE_PROPERTIES.semanticColorContribution;const s=[];let a;let n;for(let c=0;c<e.results.length;c++){const r=e.results[c];const T={};try{T.title=r[t].toString()}catch(e){T.title=""}T.value=Number(r[i]);let u=Number(r[i]);if(this.oConfig.EVALUATION.SCALING==-2){u*=100}const E=this.isCurrencyMeasure(i);n=r[o];a=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(u,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,E,n);T.displayValue=a.toString();if(typeof l==="undefined"){T.color="Neutral"}else{T.color=l}if(T&&o){T[o]=n}s.push(T)}return s},fetchChartData:function(e,i,o,l){const s=this;try{const a=this.oConfig.EVALUATION.ODATA_ENTITYSET;let n;s.setThresholdValues();if(this.oConfig.TILE_PROPERTIES.semanticMeasure){n=`${this.oConfig.EVALUATION.COLUMN_NAME},${this.oConfig.TILE_PROPERTIES.semanticMeasure}`}else{n=this.oConfig.EVALUATION.COLUMN_NAME}let c=null;let r=this.oConfig.TILE_PROPERTIES.dimension;const T=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(e);const u=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(s.oConfig.TILE_PROPERTIES.id);let E;if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(s.oConfig)){if(u){E=u.Data&&JSON.parse(u.Data)}}const h=s.oTileApi.configuration.getParameterValueAsString("timeStamp");const p=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(s.oConfig.TILE_PROPERTIES.id,h,s.chipCacheTime,s.chipCacheTimeUnit,s.tilePressed);if(E&&!E.rightData||!u||!p&&s.oTileApi.visible.isVisible()||T||i&&s.oTileApi.visible.isVisible()||s.getView().getViewData().refresh){if(s.kpiValueFetchDeferred){s.kpiValueFetchDeferred=false;const e=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);const i={};i["0"]=`${n},asc`;i["1"]=`${n},desc`;i["2"]=`${r},asc`;i["3"]=`${r},desc`;const T=i[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");const E=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(s.oRunTimeODataModel,a,n,r,e,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure){E.uri+=`&$top=3&$orderby=${T[0]} ${T[2]}`}else{E.uri+=`&$top=3&$orderby=${T[0]} ${T[1]}`}this.comparisionChartODataRef=E.model.read(E.uri,null,null,true,e=>{s.kpiValueFetchDeferred=true;let i={};if(e&&e.results&&e.results.length){if(E.unit[0]){s._updateTileModel({unit:e.results[0][E.unit[0].name]});c=E.unit[0].name;i.unit=E.unit[0];i.unit.name=E.unit[0].name}r=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(s.oRunTimeODataModel,a,r);i.dimension=r;s.oConfig.TILE_PROPERTIES.FINALVALUE=e;s.oConfig.TILE_PROPERTIES.FINALVALUE=s._processDataForComparisonChart(s.oConfig.TILE_PROPERTIES.FINALVALUE,n.split(",")[0],r,c);i.data=s.oConfig.TILE_PROPERTIES.FINALVALUE;i.isCurM=s.isACurrencyMeasure(s.oConfig.EVALUATION.COLUMN_NAME);const t={};s.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();t.ChipId=s.oConfig.TILE_PROPERTIES.id;t.Data=JSON.stringify(i);t.CacheMaxAge=Number(s.chipCacheTime);t.CacheMaxAgeUnit=s.chipCacheTimeUnit;t.CacheType=1;const l=s.getLocalCache(t);s.updateDatajobScheduled=false;const T=`${s.oConfig.TILE_PROPERTIES.id}data`;let h=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(T);if(h){clearTimeout(h);h=undefined}if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(s.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,l);let e=false;if(u){e=true}if(s.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(s.oTileApi,s.oConfig.TILE_PROPERTIES.id,t,e,e=>{if(e){s.cacheTime=e&&e.CachedTime;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,e)}if(s.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(s.oConfig)){s.setTimeStamp(s.cacheTime)}})}}else{const e=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(s.oConfig.TILE_PROPERTIES.id);let t;if(e){if(!e.CachedTime){e.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()}t=e.Data;if(t){t=JSON.parse(t);if(s.oKpiTileView.getViewName()=="tiles.indicatornumeric.NumericTile"){t.leftData=i}else{t.rightData=i}}e.Data=JSON.stringify(t);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,e)}else{t={};t.rightData=i;l.Data=JSON.stringify(t);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,l)}s.cacheWriteData=i}o.call(s,s.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(e.results.length==0){s.oConfig.TILE_PROPERTIES.FINALVALUE=e;if(sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(s.oConfig.TILE_PROPERTIES.id)){i=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(s.oConfig.TILE_PROPERTIES.id);i.data=e}else{i.data=e}sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,i);o.call(s,s.oConfig.TILE_PROPERTIES.FINALVALUE);s.setNoData()}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(s.oConfig.TILE_PROPERTIES.id,{empty:"empty"});s.setNoData()}},e=>{s.kpiValueFetchDeferred=true;if(e&&e.response){t.error(`${e.message} : ${e.request.requestUri}`);l.call(s,e)}})}}else if(u&&u.Data){let e;const i=s.oConfig&&s.oConfig.TILE_PROPERTIES&&s.oConfig.TILE_PROPERTIES.tileType;if(i.indexOf("DT-")==-1){e=u.Data&&JSON.parse(u.Data)}else{e=u.Data&&JSON.parse(u.Data);e=e.rightData}s.cacheTime=u.CachedTime;if(s.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(s.oConfig)){s.setTimeStamp(s.cacheTime)}if(e.data&&e.data.length){if(e.unit){s._updateTileModel({unit:e.data[0][e.unit.name]})}r=e.dimension;s.oConfig.TILE_PROPERTIES.FINALVALUE=e.data;o.call(s,s.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(e&&e.data&&e.data instanceof Array&&e.data.length==0){s.oConfig.TILE_PROPERTIES.FINALVALUE=e.data;o.call(s,s.oConfig.TILE_PROPERTIES.FINALVALUE);s.setNoData()}else{s.setNoData()}}else{s.setNoData()}}catch(e){s.kpiValueFetchDeferred=true;l.call(s,e)}},doProcess:function(e,i){const t=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);this.setTextInTile();this.fetchChartData(e,i,function(e){this.CALCULATED_KPI_VALUE=e;this._updateTileModel({data:this.CALCULATED_KPI_VALUE});if(t.oConfig.TILE_PROPERTIES.frameType==n.TwoByOne){t.oKpiTileView.oGenericTile.setFrameType(n.TwoByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());t.getView().getViewData().deferredObj.resolve()}else{t.oKpiTileView.oGenericTile.setFrameType(n.OneByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.oKpiTileView.oGenericTile.addTileContent(t.oKpiTileView.oNVConfS);this.oKpiTileView.oGenericTile.setState(a.Loaded)}this.setToolTip(null,this.CALCULATED_KPI_VALUE,"CONT");if(this.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible())}},this.logError)},doDummyProcess:function(){const e=this;e.setTextInTile();e._updateTileModel({value:8888,size:s.Auto,frameType:n.OneByOne,state:a.Loading,valueColor:l.Error,indicator:o.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral"},{title:"EMEA",value:50,color:"Neutral"},{title:"APAC",value:-20,color:"Neutral"}]});this.oKpiTileView.oGenericTile.setState(a.Loaded)}});return c});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatorcontribution/ContributionTile.view", ["sap/ui/core/mvc/JSView","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel","sap/m/library"],(e,i,t,o,s,a,n,r)=>{"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorcontribution.ContributionTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorcontribution.ContributionTile"},createContent:function(){this.setHeight("100%");this.setWidth("100%");const e=r.Size;const i=this;i.oGenericTileData={};i.oCmprsDataTmpl=new o({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});i.oCmprsChrtTmpl=new s({size:e.Responsive,scale:"{/scale}",data:{template:i.oCmprsDataTmpl,path:"/data"}});i.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:i.oCmprsChrtTmpl});i.oGenericTile=new a({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[i.oNVConfS]});i.oGenericTileModel=new n;i.oGenericTileModel.setData(i.oGenericTileData);i.oGenericTile.setModel(i.oGenericTileModel);return i.oGenericTile}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatordeviation/DeviationTile.controller", ["sap/ushell/components/tiles/generic","sap/m/library"],(e,t)=>{"use strict";const i=t.ValueColor;const o=t.LoadState;const r=t.FrameType;const l=e.extend("sap.ushell.components.tiles.indicatordeviation.DeviationTile",{onInit:function(){this.KPI_VALUE_REQUIRED=true},doProcess:function(e,t){const i=this;let l;l=t.targetValue;let s=Number(e);this.setThresholdValues();if(this.oConfig.EVALUATION.SCALING==-2){s*=100}let a=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);const n=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(s),this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,a,this.CURRENCY_CODE);this.CALCULATED_KPI_VALUE=Number(e);const u={};const A=this.getThresholdsObjAndColor(t).returnColor;const h={value:Number(e),color:A};u.actualValueLabel=n.toString();u.actual=h;u.thresholds=[];u.thresholds=this.getThresholdsObjAndColor(t).arrObj;const C=this.DEFINITION_DATA.EVALUATION_VALUES;let c;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){c=Number(l);if(this.oConfig.EVALUATION.SCALING==-2){c*=100}a=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);l=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(c,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,a,this.CURRENCY_CODE);u.targetValue=Number(c);u.targetValueLabel=l.toString()}else{for(let e=0;e<C.length;e++){if(C[e].TYPE==="TA"){c=Number(l);if(this.oConfig.EVALUATION.SCALING==-2){c*=100}a=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);l=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(c,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,a,this.CURRENCY_CODE);u.targetValue=Number(c);u.targetValueLabel=l.toString()}}}if(this.oConfig.EVALUATION.SCALING==-2){u.scale="%"}this._updateTileModel(u);if(this.DEFINITION_DATA.TILE_PROPERTIES.frameType==r.TwoByOne){i.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());i.getView().getViewData().deferredObj.resolve();sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(`${i.oConfig.TILE_PROPERTIES.id}defferedRight`,false)}else{this.oKpiTileView.oGenericTile.setState(o.Loaded)}this.setToolTip(A,s,"DT");if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){if(i.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible())}}},getThresholdsObjAndColor:function(e){try{const t={};t.arrObj=[];t.returnColor=i.Neutral;const o=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;let r;let l;let s;let a;if(o==="MI"){s=Number(e.criticalHighValue)||0;a=Number(e.warningHighValue)||0;if(s&&a){s=window.parseFloat(s);a=window.parseFloat(a);t.arrObj.push({value:s,color:i.Error});t.arrObj.push({value:a,color:i.Critical});if(this.CALCULATED_KPI_VALUE<a){t.returnColor=i.Good}else if(this.CALCULATED_KPI_VALUE<=s){t.returnColor=i.Critical}else{t.returnColor=i.Error}}}else if(o==="MA"){l=Number(e.criticalLowValue)||0;r=Number(e.warningLowValue)||0;if(l&&r){l=window.parseFloat(l);r=window.parseFloat(r);t.arrObj.push({value:l,color:i.Error});t.arrObj.push({value:r,color:i.Critical});if(this.CALCULATED_KPI_VALUE<l){t.returnColor=i.Error}else if(this.CALCULATED_KPI_VALUE<=r){t.returnColor=i.Critical}else{t.returnColor=i.Good}}}else{s=Number(e.criticalHighValue)||0;a=Number(e.warningHighValue)||0;l=Number(e.criticalLowValue)||0;r=Number(e.warningLowValue)||0;if(r&&a&&l&&l){s=window.parseFloat(s);a=window.parseFloat(a);r=window.parseFloat(r);l=window.parseFloat(l);t.arrObj.push({value:s,color:i.Error});t.arrObj.push({value:a,color:i.Critical});t.arrObj.push({value:r,color:i.Critical});t.arrObj.push({value:l,color:i.Error});if(this.CALCULATED_KPI_VALUE<l||this.CALCULATED_KPI_VALUE>s){t.returnColor=i.Error}else if(this.CALCULATED_KPI_VALUE>=l&&this.CALCULATED_KPI_VALUE<=r||this.CALCULATED_KPI_VALUE>=a&&this.CALCULATED_KPI_VALUE<=s){t.returnColor=i.Critical}else{t.returnColor=i.Good}}}return t}catch(e){this.logError(e)}},doDummyProcess:function(){const e=this;this.setTextInTile();e._updateTileModel({actual:{value:120,color:i.Good},targetValue:100,thresholds:[{value:0,color:i.Error},{value:50,color:i.Critical},{value:150,color:i.Critical},{value:200,color:i.Error}],showActualValue:true,showTargetValue:true});this.oKpiTileView.oGenericTile.setState(o.Loaded)}});return l});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatordeviation/DeviationTile.view", ["sap/ui/core/mvc/JSView","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/library","sap/suite/ui/microchart/BulletMicroChartData","sap/suite/ui/microchart/BulletMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],(e,t,a,i,s,l,o,n)=>{"use strict";const r=i.Size;const u=i.LoadState;sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatordeviation.DeviationTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatordeviation.DeviationTile"},createContent:function(){this.setHeight("100%");this.setWidth("100%");let e="Lorem ipsum";let t="Lorem ipsum";const a=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(a.title&&a.subTitle){e=a.title;t=a.subTitle}const i={subheader:t,header:e,footerNum:"",footerComp:"",frameType:"OneByOne",state:u.Loading,scale:""};const c=new s({value:"{value}",color:"{color}"});this.oBCTmpl=new l({size:r.Responsive,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:c,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});this.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oBCTmpl});this.oGenericTile=new o({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[this.oNVConfS]});const h=new n;h.setData(i);this.oGenericTile.setModel(h);return this.oGenericTile}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatornumeric/NumericTile.controller", ["sap/ushell/components/tiles/generic","sap/m/library"],(e,i)=>{"use strict";const t=i.DeviationIndicator;const o=i.ValueColor;const s=i.LoadState;const l=i.FrameType;const n=e.extend("sap.ushell.components.tiles.indicatornumeric.NumericTile",{onInit:function(){this.KPI_VALUE_REQUIRED=true},doProcess:function(e,i){const t=this;this.CALCULATED_KPI_VALUE=e;const o=this.getTrendColor(i);const n=this.getTrendIndicator(i.trendValue);let a="";let r=this.CALCULATED_KPI_VALUE;if(this.oConfig.EVALUATION.SCALING==-2){r*=100;this.getView().oNVConfContS.setFormatterValue(false)}const c=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);a=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(r),this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,c,this.CURRENCY_CODE);if(this.oConfig.EVALUATION.SCALING==-2){this._updateTileModel({scale:"%"})}this._updateTileModel({value:a.toString(),valueColor:o,indicator:n});if(t.oConfig.TILE_PROPERTIES.frameType==l.OneByOne){this.oKpiTileView.oGenericTile.setState(s.Loaded);this.setToolTip(o,r,"NT")}else{t.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());t.getView().getViewData().deferredObj.resolve();sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(`${t.oConfig.TILE_PROPERTIES.id}defferedLeft`,false)}this.setToolTip(o,r,"NT");if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){if(t.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,t.oTileApi.visible.isVisible())}}},doDummyProcess:function(){const e=this;this.setTextInTile();if(!(e.oConfig.BLANKTILE||e.oConfig.TILE_PROPERTIES.blankTile)){e._updateTileModel({value:"10.34",scale:"M",valueColor:o.Neutral,indicator:t.None})}else{this.oKpiTileView.oNVConfContS.setIcon("sap-icon://BusinessSuiteInAppSymbols/icon-multiple-charts")}this.oKpiTileView.oGenericTile.setState(s.Loaded)}});return n});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/indicatornumeric/NumericTile.view", ["sap/ui/core/mvc/JSView","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/library","sap/m/NumericContent","sap/m/GenericTile","sap/ui/model/json/JSONModel"],(e,t,i,o,s,n,a)=>{"use strict";const l=o.DeviationIndicator;const r=o.ValueColor;const u=o.LoadState;sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("sap.ushell.components.tiles.indicatornumeric.NumericTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatornumeric.NumericTile"},createContent:function(){let e="Lorem ipsum";let t="Lorem ipsum";const i=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(i.title&&i.subTitle){e=i.title;t=i.subTitle}const o={subheader:t,header:e,footerNum:"",footerComp:"",scale:"",unit:"",value:"",size:"Auto",frameType:"OneByOne",state:u.Loading,valueColor:r.Neutral,indicator:l.None,title:"",footer:"",description:""};this.oNVConfContS=new s({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",valueColor:"{/valueColor}",size:"{/size}",formatterValue:true,truncateValueTo:5,nullifyValue:false});this.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oNVConfContS});this.oGenericTile=new n({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[this.oNVConfS]});const c=new a;c.setData(o);this.oGenericTile.setModel(c);return this.oGenericTile}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/sbtilecontent", ["sap/m/TileContent","sap/m/TileContentRenderer","sap/ui/core/Control"],(e,t,n)=>{"use strict";const i=n.extend("numeric.TileContent_Timestamp",{ontap:function(e){if(this.getParent().getRefreshOption()){e.preventDefault();e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation()}this.getParent().fireRefresh()}},renderer:function(e,t){e.write("<div");e.writeElementData(t);e.addClass("sapMTileCntFtrTxt");if(t.getParent().getRefreshOption()){e.addClass("sapMLnk")}e.writeClasses();e.addStyle("position","absolute");e.addStyle("z-index","2");e.addStyle(e.getConfiguration().getRTL()?"left":"right","auto");e.writeStyles();e.write(">");const n=t.getParent().getTimestamp();if(n){if(!t.getParent().getRefreshOption()){e.writeEscaped(n)}else if(e.getConfiguration().getRTL()){e.writeEscaped(`${n} `);e.writeIcon("sap-icon://refresh","sapMCmpTileUnitInner")}else{e.writeIcon("sap-icon://refresh","sapMCmpTileUnitInner");e.writeEscaped(` ${n}`)}}e.write("</div>")}});return e.extend("sap.ushell.components.tiles.sbtilecontent",{metadata:{properties:{timestamp:{type:"string"},refreshOption:{type:"boolean"}},events:{refresh:{}}},init:function(){this.addDependent(this._oTimestamp=new i)},getAltText:function(){let t=e.prototype.getAltText.apply(this,arguments);if(this.getTimestamp()){t+=(t===""?"":"\n")+this.getTimestamp()}return t},renderer:{_renderFooter:function(e,n){t._renderFooter.apply(this,arguments);e.renderControl(n._oTimestamp)}}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/utils", ["sap/base/i18n/Localization","sap/ui/core/Element","sap/ui/core/Locale","sap/ushell/services/ClientSideTargetResolution/PrelaunchOperations","sap/ushell/resources","sap/ui/thirdparty/datajs","sap/ui/core/mvc/View","sap/ui/model/json/JSONModel","sap/ui/core/library","sap/m/library","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/IconPool","sap/ui/core/Icon","sap/m/SelectDialog","sap/m/StandardListItem","sap/m/Text","sap/m/TableSelectDialog","sap/m/Column","sap/m/ColumnListItem","sap/ui/core/CustomData","sap/ui/core/Item","sap/ui/core/message/MessageType","sap/m/Label","sap/ui/model/Sorter","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/format/NumberFormat"],(e,t,i,a,n,s,o,l,r,c,p,u,g,d,_,f,b,y,I,m,V,v,w,S,h,jQuery,x,T)=>{"use strict";const P=r.ValueState;const D=r.mvc.ViewType;const C=c.ButtonType;const A={};A.isInitial=function(e){return e==="App Launcher – Static"||e==="App Launcher – Dynamic"||e==="Target Mapping"};A.awaitResourceBundle=n.awaitResourceBundle;A.getResourceBundleModel=function(){return n.i18nModel};A.getResourceBundle=function(){return n.i18n};A.getEmptyRowObj=function(e){return{name:"",mandatory:false,value:"",isRegularExpression:false,defaultValue:"",valEnabled:false||!e,defValEnabled:true,editable:e}};A.getEmptyTileActionsRowObj=function(e){const t=A.getResourceBundle();return{menu_title:"",target_type:t.getText("configuration.tile_actions.table.target_type.url"),navigation_target:"",action:"",icon:"",isTargetTypeIntent:false,editable:e}};function R(e,t){const i={};const a=A.getResourceBundle();i.menu_title=e.text;i.icon=e.icon;if(e.targetURL.charAt(0)==="#"){i.target_type=a.getText("configuration.tile_actions.table.target_type.intent");const t=e.targetURL.split("-");i.navigation_target=t[0].substring(1,t[0].length);i.action=t[1];i.isTargetTypeIntent=true}else{i.target_type=a.getText("configuration.tile_actions.table.target_type.url");i.navigation_target=e.targetURL;i.action="";i.isTargetTypeIntent=false}i.editable=t;return i}A.getTileNavigationActionsRows=function(e,t){let i=[];let a=[];a=this.getTileNavigationActions(e);if(a.length){for(let e=0;e<a.length;e++){i.push(R(a[e],t))}}else{i=[this.getEmptyTileActionsRowObj(t)]}return i};A.getTileNavigationActions=function(e){let t=[];let i="";const a=e.bag.getBag("tileNavigationActions");if(a.getPropertyNames().indexOf("tile_navigation_actions")>=0){t=JSON.parse(a.getProperty("tile_navigation_actions"));for(let e=0;e<t.length;e++){if(t[e].text){if(a.getTextNames().indexOf(`action_tile_${e+1}`)>=0){i=a.getText(`action_tile_${e+1}`)}t[e].text=i}}}return t};function E(e){const t={};t.text=e.menu_title;t.icon=e.icon;if(e.action){t.targetURL=`#${e.navigation_target}-${e.action}`}else{t.targetURL=e.navigation_target}return t}A.tileActionsRows2TileActionsArray=function(e){const t=[];for(let i=0;i<e.length;i++){if(e[i].menu_title){t.push(E(e[i]))}}return t};A.populateTileNavigationActionsBag=function(e,t){e.setProperty("tile_navigation_actions",JSON.stringify(t));for(let i=0;i<t.length;i++){const a=t[i].text;e.setText(`action_tile_${i+1}`,a)}};A.getDefaultFormFactors=function(){return{appDefault:false,manual:{desktop:true,tablet:true,phone:true},defaultParam:true}};A.buildFormFactorsObject=function(e){return{appDefault:e.getProperty("/config/appFormFactor"),manual:{desktop:e.getProperty("/config/desktopChecked"),tablet:e.getProperty("/config/tabletChecked"),phone:e.getProperty("/config/phoneChecked")}}};A.tableHasDuplicateParameterNames=function(e){const t={};for(let i=0;i<e.length;i++){const a=e[i].name;if(a!==""){if(t[a]){return true}t[a]=true}}return false};A.tableHasInvalidSapPrelaunchOperationValue=function(e){for(let t=0;t<e.length;t++){if(e[t].name==="sap-prelaunch-operations"){if(a.parseAndValidateOperations(e[t].defaultValue)===null){return false}break}}return true};function k(e){let t="";if(e.mandatory){if(e.isRegularExpression){t=`{${e.name}=${encodeURIComponent(e.value)}}`}else{t=`${e.name}=${encodeURIComponent(e.value)}`}}else{t=`[${e.name}=${encodeURIComponent(e.defaultValue)}]`}return t}A.getMappingSignatureString=function(e,t){let i="";for(let t=0;t<e.length;t++){if(e[t].name){i+=`${k(e[t])}&`}}return t?`${i}*=*`:i.substring(0,i.length-1)};function L(e,t){const i={};if(e.charAt(0)==="["){i.mandatory=false;i.isRegularExpression=false;i.value="";e=e.substring(1,e.length-1);i.name=e.substring(0,e.indexOf("="));i.defaultValue=decodeURIComponent(e.substring(e.indexOf("=")+1))}else{i.mandatory=true;i.defaultValue="";if(e.charAt(0)==="{"){i.isRegularExpression=true;e=e.substring(1,e.length-1)}else{i.isRegularExpression=false}i.name=e.substring(0,e.indexOf("="));i.value=decodeURIComponent(e.substring(e.indexOf("=")+1))}i.editable=t;if(t){i.valEnabled=i.mandatory;i.defValEnabled=!i.mandatory}else{i.valEnabled=true;i.defValEnabled=true}return i}A.getMappingSignatureTableData=function(e,t){const i=[];const a=e.split("&");for(let e=0;e<a.length;e++){const n=a[e];if(n!=="*=*"){i.push(L(a[e],t))}}return i};A.getAllowUnknownParametersValue=function(e){if(e&&e.substring(e.length-3,e.length)==="*=*"){return true}return false};A.getMappingSignature=function(e,t){const i=t?"allowed":"ignored";const a=new RegExp("%%UserDefault[.].+%%");let n=[];const s={parameters:{},additional_parameters:i};e.forEach(e=>{s.parameters[e.name]={required:e.mandatory,rename_to:e.rename_to};if(e.defaultValue){n=a.exec(e.defaultValue);if(n){e.defaultValue=n[0]}s.parameters[e.name].defaultValue={value:e.defaultValue}}if(e.value){n=a.exec(e.value);if(n){e.value=n[0]}s.parameters[e.name].filter={value:e.value};if(e.isRegularExpression){s.parameters[e.name].filter.format="regexp"}}});return s};A.getSignatureTableData=function(e,t){const i=[];let a={};let n={};const s=e.parameters;for(const e in s){n=s[e];a={};a.editable=t;a.name=e;a.mandatory=n.required;if(n.rename_to){a.rename_to=n.rename_to}else{a.rename_to=n.renameTo}if(t){a.valEnabled=a.mandatory;a.defValEnabled=!a.mandatory}else{a.valEnabled=true;a.defValEnabled=true}if(n.filter){a.value=n.filter.value;if(n.filter.format&&n.filter.format==="regexp"){a.isRegularExpression=true}}if(n.defaultValue){a.defaultValue=n.defaultValue.value}i.push(a)}return i};A.getTranslatedTitle=function(e){if(e.bag){const t=e.bag.getBag("tileProperties");if(t.getTextNames().indexOf("display_title_text")>=0){return t.getText("display_title_text")}}if(e.title){return e.title.getTitle()}if(e.preview){return e.preview.getTitle()}return""};A.getTranslatedSubtitle=function(e,t){if(e.bag){const t=e.bag.getBag("tileProperties");if(t.getTextNames().indexOf("display_subtitle_text")>=0){return t.getText("display_subtitle_text")}}if(typeof t.display_subtitle_text==="string"){return t.display_subtitle_text}if(e.preview&&e.preview.getDescription&&e.preview.getDescription()){return e.preview.getDescription()}return""};A.getTranslatedProperty=function(e,t,i){if(e.bag){const t=e.bag.getBag("tileProperties");if(t.getTextNames().indexOf(i)>=0){return t.getText(i)}}return t[i]};A.getActionConfiguration=function(e,t){const i=e.configuration.getParameterValueAsString("tileConfiguration");const a=JSON.parse(i||"{}");let n;if(typeof t==="undefined"){t=e.configurationUi.isEnabled()}if(t){n=A.getResourceBundle()}a.semantic_object=a.semantic_object||(t?`[${n.getText("configuration.semantic_object")}]`:"");a.semantic_action=a.semantic_action||(t?`[${n.getText("configuration.semantic_action")}]`:"");a.navigation_provider=a.navigation_provider||"";a.navigation_provider_role=a.navigation_provider_role||"";a.navigation_provider_instance=a.navigation_provider_instance||"";a.target_application_id=a.target_application_id||"";a.target_application_alias=a.target_application_alias||"";a.display_info_text=a.display_info_text||"";a.editable=true;if(e.configurationUi&&e.configurationUi.isReadOnly){if(e.configurationUi.isReadOnly()){a.editable=false}}return a};A.getViewConfiguration=function(e){const t=e.getViewData();const i=t.chip;const a=A.getAppLauncherConfig(i,true,true);return a};A.getConfigurationUi=function(e,t){let i;let a;let n;let s;let r;const c=e.getViewData();const p=A.getViewConfiguration(e);const u=new l({config:p,tileModel:e.getModel()});return o.create({type:D.XML,viewData:c,viewName:t}).then(t=>{t.setModel(u);i=t.byId("navigation_semantic_objectInput")||t.byId("semantic_objectInput");if(i){i.getModel().setProperty("/enabled",p.navigation_use_semantic_object);i.getModel().setProperty("/value",p.semantic_object||p.navigation_semantic_object)}a=t.byId("navigation_provider_roleInput");if(a){a.getModel().setProperty("/value",p.navigation_provider_role)}n=t.byId("navigation_provider_instanceInput");if(n){n.getModel().setProperty("/value",p.navigation_provider_instance)}s=t.byId("target_application_aliasInput");if(s){s.getModel().setProperty("/value",p.target_application_alias)}r=t.byId("targetTypeInput");if(r){if(!t.getModel().getProperty("/config/transaction")){t.getModel().setProperty("/config/transaction",{})}if(!t.getModel().getProperty("/config/web_dynpro")){t.getModel().setProperty("/config/web_dynpro",{})}if(e.getModel().getProperty("/config/navigation_provider")==="LPD"){A.displayLpdCustApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="WCF"){r.setSelectedKey("WCF");A.displayWCFApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="SAPUI5"||e.getModel().getProperty("/config/navigation_provider")===""){r.setSelectedKey("SAPUI5");A.displaySapui5ApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="TR"){A.displayTransactionApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="WDA"){A.displayWebDynproApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="URL"){A.displayURLApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="URLT"){A.displayURLTApplicationTypeFields(t);u.setProperty("/config/editable",false);u.setProperty("/config/manualFormFactor",false)}}return t})};A._updateTilePropertiesTexts=function(e,t){const i=t.getTextNames();const a=e.getModel();i.forEach(e=>{a.setProperty(`/data/${e}`,t.getText(e));a.setProperty(`/config/${e}`,t.getText(e))})};A._updateTileConfiguration=function(e,t){const i=e.getModel();const a=JSON.parse(t);let n;Object.keys(a).forEach(e=>{n=a[e];i.setProperty(`/data/${e}`,n);i.setProperty(`/config/${e}`,n);if(e==="navigation_target_url"){i.setProperty(`/nav/${e}`,n)}})};A.aData=[];A.aActionData=[];A.aRoleData=[];A.aAliasData=[];A.objectSelectDoSearch=function(e){const t=e.getParameter("value");if(t!==undefined){e.getParameter("itemsBinding").filter(new p([new p("name",u.Contains,t),new p("obj",u.Contains,t)],false))}};A.actionSelectDoSearch=function(e){const t=e.getParameter("value");if(t!==undefined){e.getParameter("itemsBinding").filter(new p([new p("text",u.Contains,t)],false))}};A.roleSelectDoSearch=function(e){const t=e.getParameter("value");if(t!==undefined){e.getParameter("itemsBinding").filter(new p([new p("role",u.Contains,t),new p("instance",u.Contains,t)],false))}};A.instanceSelectDoSearch=function(e){const t=e.getParameter("value");if(t!==undefined){const i=[];if(t!==""){i.push(new p("instance",u.Contains,t))}const a=e.getSource().getCustomData();const n=a[0].getValue();if(n!==""){i.push(new p("role",u.EQ,n))}if(i.length>0){e.getParameter("itemsBinding").filter(new p(i,true))}}};A.instanceSuggest=function(e,t){const i=[];const a=t.getParameter("suggestValue");if(a!==""){i.push(new p("instance",u.Contains,a))}const n=e.getView();const s=n.byId("navigation_provider_roleInput");const o=s.getValue();if(o!==""){i.push(new p("role",u.EQ,o))}if(i.length>0){t.oSource.getBinding("suggestionItems").filter(new p(i,true))}};A.aliasSuggest=function(e,t){const i=[];const a=t.getParameter("suggestValue");if(a!==""){i.push(new p("alias",u.Contains,a))}const n=e.getView();const s=n.byId("navigation_provider_instanceInput");const o=s.getValue();if(o!==""){i.push(new p("instance",u.EQ,o))}if(i.length>0){t.oSource.getBinding("suggestionItems").filter(new p(i,true))}};A.aliasSelectDoSearch=function(e){const t=[];const i=e.getParameter("value");if(i!==undefined){if(i!==""){t.push(new p("alias",u.Contains,i))}const a=e.getSource().getCustomData();const n=a[0].getValue();t.push(new p("instance",u.EQ,n));e.getParameter("itemsBinding").filter(new p(t,true))}};A.objectSelectUpdateDialog=function(e,t){if(t!==undefined){e.getBinding("items").filter([new p("name",u.Contains,t)])}};A.actionSelectUpdateDialog=function(e,t){if(t!==undefined){e.getBinding("items").filter([new p("text",u.Contains,t)])}};A.roleSelectUpdateDialog=function(e,t){if(t!==undefined){e.getBinding("items").filter([new p("role",u.Contains,t)])}};A.instanceSelectUpdateDialog=function(e,t){const i=[];if(t!==undefined){i.push(new p("instance",u.Contains,t))}const a=e.getCustomData();const n=a[0].getValue();if(n!==""){i.push(new p("role",u.EQ,n))}if(i.length>0){e.getBinding("items").filter(i,true)}};A.aliasSelectUpdateDialog=function(e,t){const i=[];if(t!==undefined){i.push(new p("alias",u.Contains,t))}const a=e.getCustomData();const n=a[0].getValue();if(n!==""){i.push(new p("instance",u.EQ,n))}if(i.length>0){e.getBinding("items").filter(i,true)}};A.sSelectedColor=(jQuery(".sapMStdTileIconDiv").css("color")||"#007cc0").split(" ").join("");A.sDeselectedColor=(jQuery(".sapMLabel:not(.sapFioriDropZoneText )").css("color")||"#666666").split(" ").join("");A.iconSelect=function(e,t){e.setColor(t?A.sSelectedColor:A.sDeselectedColor);e.setActiveColor(t?A.sDeselectedColor:A.sSelectedColor)};A.onSelectIcon=function(e,t,i,a){const n=e.getView();const s=n.getModel();let o;if(t){o=s.getProperty("/config/tile_actions_selected_icon")}else{o=s.getProperty("/config/selected_icon")}if(o){A.iconSelect(o,false)}o=a.getSource();A.iconSelect(o,true);s.setProperty("/config/ok.enabled",true);if(t){s.setProperty("/config/tile_actions_selected_icon",o)}else{s.setProperty("/config/selected_icon",o)}n.byId("selectIconDialog").setTitle(o.getSrc())};A.onSelectIconClose=function(e){e.byId("selectIconDialog").close()};A.onSelectIconOk=function(e,t){let i=e.getModel().getProperty("/config/selected_icon");if(!t){e.getModel().setProperty("/config/display_icon_url",i.getSrc());e.byId("iconInput").setValueState(P.None)}else{i=e.getModel().getProperty("/config/tile_actions_selected_icon");if(i){t.setValue(i.getSrc());t.setValueState(P.None)}}A.onSelectIconClose(e)};A.iconSelectOnValueHelpRequest=function(e,i,a){const n=e.getView();const s=n.getModel();const o=n.byId("icons");let l=g.getIconCollectionNames();const r=n.byId("selectIconDialog");const c=n.byId("ok");let p;let u;let _;let f;let b=false;o.destroyContent();if(a){u=t.getElementById(i.getParameter("id"));p=u.getValue()}else{p=s.getProperty("/config/display_icon_url")}c.attachEventOnce("press",()=>{A.onSelectIconOk(n,u)});l.sort();l=l.filter(e=>{if(e==="BusinessSuiteInAppSymbols"){b=true;return false}return true});if(b){l.push("BusinessSuiteInAppSymbols")}for(let t=0;t<l.length;++t){_=g.getIconNames(l[t]);_.sort();for(let i=0;i<_.length;++i){f=g.getIconURI(_[i],l[t]);o.addContent(new d({height:"38px",press:A.onSelectIcon.bind(null,e,a,u),size:"2rem",src:f,tooltip:f,width:"38px"}))}}const y=o.getContent();s.setProperty("/config/ok.enabled",false);r.bindProperty("title",{model:"i18n",path:"configuration.select_icon"});for(let e=0;e<y.length;++e){if(y[e].getSrc()===p){if(a){s.setProperty("/config/tile_actions_selected_icon",y[e])}else{s.setProperty("/config/selected_icon",y[e])}A.iconSelect(y[e],true);s.setProperty("/config/ok.enabled",true);r.setTitle(p)}else{A.iconSelect(y[e],false)}}r.open()};A.objectSelectOnValueHelpRequest=function(e,i,a){const n=e.getView();const s=A.getResourceBundle().getText("configuration.semantic_object");let o;const r=new l;let c=new _("semantic_object_select_dialog",{title:s,search:A.objectSelectDoSearch,liveChange:A.objectSelectDoSearch});const p=new f({title:"{obj}"});if(a){o=t.getElementById(i.getParameter("id"))}else{o=n.byId("semantic_objectInput")||n.byId("navigation_semantic_objectInput")}const u=o.getValue();c.open(u);r.setData(e.aDefaultObjects.concat(A.aData));c.bindAggregation("items","/",p);c.setModel(r);A.objectSelectUpdateDialog(c,u);c.attachCancel(e=>{o.setValue(u);if(!a){o.fireChange()}c.destroy();c=null});c.attachConfirm(e=>{const t=e.getParameter("selectedItem");if(t){o.setValue(t.getTitle());if(!a){o.fireChange()}}c.destroy();c=null})};A.actionSelectOnValueHelpRequest=function(e,i,a){const n=e.getView();const s=A.getResourceBundle().getText("configuration.semantic_action");let o;const r=new l;let c=new _("semantic_action_select_dialog",{title:s,search:A.actionSelectDoSearch,liveChange:A.actionSelectDoSearch});const p=new f({title:"{text}"});if(a){o=t.getElementById(i.getParameter("id"))}else{o=n.byId("semantic_actionInput")||n.byId("navigation_semantic_actionInput")}const u=o.getValue();c.open(u);r.setData(A.aActionData);c.bindAggregation("items","/items",p);c.setModel(r);A.actionSelectUpdateDialog(c,u);c.attachCancel(e=>{o.setValue(u);if(!a){o.fireChange()}c.destroy();c=null});c.attachConfirm(e=>{const t=e.getParameter("selectedItem");if(t){o.setValue(t.getTitle());if(!a){o.fireChange();o.fireLiveChange({newValue:t.getTitle()})}}c.destroy();c=null})};A.roleSelectOnValueHelpRequest=function(e){const t=e.getView();const i=A.getResourceBundle().getText("configuration.navigation_provider_role");const a=new l;let n=new y("role_select_dialog",{title:i,search:A.roleSelectDoSearch,liveChange:A.roleSelectDoSearch,columns:[new I({header:[new b({text:A.getResourceBundle().getText("configuration.navigation_provider_role")})]}),new I({header:[new b({text:A.getResourceBundle().getText("configuration.navigation_provider_instance")})]})]});const s=new m({cells:[new b({text:"{role}"}),new b({text:"{instance}"})]});const o=t.byId("navigation_provider_roleInput");const r=t.byId("navigation_provider_instanceInput");const c=o.getValue();n.open(c);a.setData(e.aDefaultObjects.concat(A.aRoleData));n.bindAggregation("items","/",s);n.setModel(a);A.roleSelectUpdateDialog(n,c);n.attachCancel(e=>{o.setValue(c);o.fireChange();n.destroy();n=null});n.attachConfirm(e=>{const t=e.getParameter("selectedItem");if(t){o.setValue(t.getCells()[0].getText());r.setValue(t.getCells()[1].getText());o.fireChange();r.fireChange()}n.destroy();n=null})};A.instanceSelectOnValueHelpRequest=function(e){const t=e.getView();const i=A.getResourceBundle().getText("configuration.navigation_provider_instance");const a=new l;let n=new _("instance_select_dialog",{title:i,search:A.instanceSelectDoSearch,liveChange:A.instanceSelectDoSearch});const s=new f({title:"{instance}"});const o=t.byId("navigation_provider_instanceInput");const r=o.getValue();const c=t.byId("navigation_provider_roleInput").getValue();n.addCustomData(new V({key:"role",value:c}));n.open(r);a.setData(e.aDefaultObjects.concat(A.aRoleData));n.bindAggregation("items","/",s);n.setModel(a);A.instanceSelectUpdateDialog(n,r);n.attachCancel(e=>{o.setValue(r);o.fireChange();n.destroy();n=null});n.attachConfirm(e=>{const t=e.getParameter("selectedItem");if(t){o.setValue(t.getTitle());o.fireChange()}n.destroy();n=null})};A.applicationAliasSelectOnValueHelpRequest=function(e){const t=e.getView();const i=A.getResourceBundle().getText("configuration.target_application_alias");const a=new l;let n=new _("alias_select_dialog",{title:i,search:A.aliasSelectDoSearch,liveChange:A.aliasSelectDoSearch});const s=new f({title:"{alias}"});const o=t.byId("target_application_aliasInput");const r=o.getValue();const c=t.byId("navigation_provider_instanceInput").getValue();n.addCustomData(new V({key:"instance",value:c}));n.open(r);a.setData(e.aDefaultObjects.concat(A.aAliasData));n.bindAggregation("items","/",s);n.setModel(a);A.aliasSelectUpdateDialog(n,r);n.attachCancel(e=>{o.setValue(r);o.fireChange();n.destroy();n=null});n.attachConfirm(e=>{const t=e.getParameter("selectedItem");if(t){o.setValue(t.getTitle());o.fireChange()}n.destroy();n=null})};A.onTargetTypeChange=function(e){const i=e.getParameter("id");const a=t.getElementById(i).getParent().getCells();const n=e.getSource().getSelectedKey();if(n==="INT"){a[3].setEnabled(true);a[2].setShowValueHelp(true);a[2].setValue("")}else{a[2].setShowValueHelp(false);a[2].setValue("");a[3].setEnabled(false);a[3].setValue("")}};A.addTileActionsRow=function(e){const t=e.getModel();const i=t.getProperty("/config/tile_actions_rows");const a=this.getEmptyTileActionsRowObj();i.push(a);t.setProperty("/config/tile_actions_rows",i)};A.deleteTileActionsRow=function(e){const t=e.getModel();const i=t.getProperty("/config/tile_actions_rows");const a=e.byId("tileActions");const n=a.getSelectedIndices();const s=n.sort((e,t)=>t-e).slice();for(let e=0;e<s.length;e++){a.removeSelectionInterval(s[e],s[e]);i.splice(s[e],1)}t.setProperty("/config/tile_actions_rows",i)};A.checkInput=function(e,t){const i=A.getResourceBundle();const a=e.byId("iconInput");const n=e.byId("useLpdCheckbox");const s=e.byId("navigation_semantic_objectInput")||e.byId("semantic_objectInput");const o=e.byId("navigation_semantic_actionInput")||e.byId("semantic_actionInput");let l=P.None;let r=null;const c=String(t.getParameter("newValue")||"").trim();switch(t.getSource()){case a:if(c!==""&&c.substring(0,11)!=="sap-icon://"){l=P.Error;r=i.getText("configuration.display_icon_url.warning")}break;case n:if(!n.getSelected()){o.setValueState(P.None);s.setValueState(P.None)}break;case s:if(/[-#&? ]/.test(c)){l=P.Error;r=i.getText("configuration.semantic_object.error_invalid_chars")}else if(c===""){l=P.Error}break;case o:if(/[-#&? ]/.test(c)){l=P.Error;r=i.getText("configuration.semantic_action.error_invalid_chars")}else if(c===""){l=P.Error}break;default:break}if(l){t.getSource().setValueState(l);if(r!==null){t.getSource().setValueStateText(r||"")}}};A.checkInputOnSaveConfig=function(e){const t=e.byId("iconInput");const i=e.byId("navigation_semantic_objectInput");const a=e.byId("navigation_semantic_actionInput");const n=e.byId("useLpdCheckbox");const s=A.getResourceBundle();let o=false;if(t.getValue()!==""&&!A.isIconURIValid(t.getValue())){t.setValueState(P.Error);t.setValueStateText(s.getText("configuration.display_icon_url.warning"));o=true}if(n.getSelected()&&/[-#&? ]/.test(i.getValue())){i.setValueState(P.Error);i.setValueStateText(s.getText("configuration.semantic_object.error_invalid_chars"));o=true}else if(n.getSelected()&&i.getValue()===""){i.setValueState(P.Error);o=true}if(/[-#&? ]/.test(a.getValue())){a.setValueState(P.Error);a.setValueStateText(s.getText("configuration.semantic_action.error_invalid_chars"));o=true}else if(n.getSelected()&&a.getValue()===""){a.setValueState(P.Error);o=true}return o};A.checkTileActions=function(e){const t=e.getModel().getProperty("/config/tile_actions_rows");const i=A.getResourceBundle();let a=false;for(let e=0;e<t.length;e++){if(!t[e].menu_title&&(t[e].navigation_target||t.length>1)){t[e].valueState=P.Error;a=true}else{t[e].valueState=P.None}if(t[e].icon){if(!A.isIconURIValid(t[e].icon)){t[e].iconValueState=P.Error;t[e].iconValueStateText=i.getText("configuration.display_icon_url.warning");a=true}}}e.getModel().setProperty("/config/tile_actions_rows",t);return a};A.isIconURIValid=function(e){let t=[];let i="";let a="";let n="";t=/sap-icon:\/\/(.+)\//.exec(e);if(t){i=t[1];t=/\/\/.+\/(.+)/.exec(e);if(t){a=t[1]}else{a=""}n=g.getIconURI(a,i);if(n!==e){return false}}else{t=/sap-icon:\/\/(.+)/.exec(e);if(t){a=t[1];if(!g.getIconInfo(a)){return false}}else{return false}}return true};A.checkTMInput=function(e,t){const i=A.getResourceBundle();const a=e.byId("semantic_objectInput");const n=e.byId("semantic_actionInput");const s=e.byId("target_application_descriptionInput");const o=e.byId("target_application_urlInput");const l=e.byId("target_application_componentInput");const r=e.byId("navigation_provider_roleInput");const c=e.byId("navigation_provider_instanceInput");const p=e.byId("target_application_aliasInput");const u=e.byId("target_application_idInput");const g=String(t.getParameter("newValue")||"").trim();let d=P.None;let _=null;switch(t.getSource()){case a:if(/[-#&? ]/.test(g)){d=P.Error;_=i.getText("configuration.semantic_object.error_invalid_chars")}if(n.getValue()===""){n.setValueState(P.Error)}break;case n:if(/[-#&? ]/.test(g)){d=P.Error;_=i.getText("configuration.semantic_action.error_invalid_chars")}else if(g===""){d=P.Error}break;case s:if(g===""){d=P.Error}break;case o:if(g!==""&&!/^[-~+,;:?%&#=/.\w]+$/.test(g)){d=P.Error;_=i.getText("configuration.target_application.url.error_invalid_chars")}break;case l:if(g===""){d=P.Error}else if(g.substring(0,17)==="SAPUI5.Component="){d=P.Error;_=i.getText("configuration.target_application.component.error_invalid_input")}break;case r:if(g===""){d=P.Error}else if(!/^[\w/]+$/.test(g)){d=P.Error;_=i.getText("configuration.target_application.role.error_invalid_chars")}break;case c:if(g===""){d=P.Error}else if(!/^[\w/]+$/.test(g)){d=P.Error;_=i.getText("configuration.target_application.instance.error_invalid_chars")}break;case p:if(g===""&&u.getValue()===""){d=P.Error;_=i.getText("configuration.target_application.alias_id.warning")}else if(g!==""&&u.getValue()!==""){d=P.Error;_=i.getText("configuration.target_application.alias_id.warning");u.setValueState(d);u.setValueStateText(_)}else{u.setValueState(P.None)}break;case u:if(g===""&&p.getValue()===""){d=P.Error;_=i.getText("configuration.target_application.alias_id.warning")}else if(g!==""&&p.getValue()!==""){d=P.Error;_=i.getText("configuration.target_application.alias_id.warning");p.setValueState(d);p.setValueStateText(_)}else if(g!==""&&!/^[A-Fa-f0-9]+$/.test(g)){d=P.Error;_=i.getText("configuration.target_application.alias_id.error_invalid_chars")}else{p.setValueState(P.None)}break;default:break}if(d){t.getSource().setValueState(d);if(_!==null){t.getSource().setValueStateText(_||"")}}};A.checkTMInputOnSaveConfig=function(e){const t=A.getResourceBundle();const i=e.byId("semantic_objectInput");const a=e.byId("semantic_actionInput");const n=e.byId("target_application_descriptionInput");const s=e.byId("target_application_urlInput");const o=e.byId("target_application_componentInput");const l=e.byId("navigation_provider_roleInput");const r=e.byId("navigation_provider_instanceInput");const c=e.byId("target_application_aliasInput");const p=e.byId("target_application_idInput");const u=e.byId("targetTypeInput");const g=e.byId("target_transactionInput");const d=e.byId("target_web_dynpro_applicationInput");const _=e.byId("target_wcf_application_idInput");const f=e.byId("desktopCB");const b=e.byId("tabletCB");const y=e.byId("phoneCB");let I=false;i.setValue(i.getValue().trim());if(/[-#&? ]/.test(i.getValue())){i.setValueState(P.Error);i.setValueStateText(t.getText("configuration.semantic_object.error_invalid_chars"));I=true}a.setValue(a.getValue().trim());if(/[-#&? ]/.test(a.getValue())){a.setValueState(P.Error);a.setValueStateText(t.getText("configuration.semantic_action.error_invalid_chars"));I=true}else if(a.getValue()===""){a.setValueState(P.Error);I=true}const m=e.getModel().getProperty("/config/navigation_provider");let V;if(m==="SAPUI5"){if(n.getValue()===""){n.setValueState(P.Error);I=true}if(s.getValue()!==""&&!/^[-~+,;:?%&#=/.\w]+$/.test(s.getValue())){s.setValueState(P.Error);s.setValueStateText(t.getText("configuration.target_application.url.error_invalid_chars"));I=true}if(o.getValue()===""){o.setValueState(P.Error);I=true}else if(o.getValue().substring(0,17)==="SAPUI5.Component="){o.setValueState(P.Error);o.setValueStateText(t.getText("configuration.target_application.component.error_invalid_input"));I=true}}else if(m==="LPD"){if(l.getValue()===""){l.setValueState(P.Error);I=true}if(!/^[\w]+$/.test(l.getValue())){l.setValueState(P.Error);V=t.getText("configuration.target_application.role.error_invalid_chars");l.setValueStateText(V);I=true}if(r.getValue()===""){r.setValueState(P.Error);I=true}if(!/^[\w]+$/.test(r.getValue())){r.setValueState(P.Error);V=t.getText("configuration.target_application.instance.error_invalid_chars");r.setValueStateText(V);I=true}if(c.getValue()===""&&p.getValue()===""){V=t.getText("configuration.target_application.alias_id.warning");c.setValueState(P.Error);c.setValueStateText(V);p.setValueState(P.Error);p.setValueStateText(V);I=true}if(c.getValue()!==""&&p.getValue()!==""){V=t.getText("configuration.target_application.alias_id.warning");c.setValueState(P.Error);c.setValueStateText(V);p.setValueState(P.Error);p.setValueStateText(V);I=true}if(p.getValue()!==""&&!/^[A-Fa-f0-9]+$/.test(p.getValue())){p.setValueState(P.Error);p.setValueStateText(t.getText("configuration.target_application.alias_id.error_invalid_chars"));I=true}}else if(m==="TR"){if(g.getValue()===""){g.setValueState(P.Error);I=true}}else if(m==="WDA"){if(d.getValue()===""){d.setValueState(P.Error);I=true}}else if(m==="WCF"){if(_.getValue()===""){_.setValueState(P.Error);I=true}}else if(m==="URL"){if(s.getValue()===""){s.setValueState(P.Error);I=true}else if(!/^[-~+,;:?%&#=/.\w]+$/.test(s.getValue())){s.setValueState(P.Error);s.setValueStateText(t.getText("configuration.target_application.url.error_invalid_chars"));I=true}}else{u.setValueState(P.Error);u.setValueStateText(t.getText("configuration.navigation_provider.error_invalid_provider"));I=true}if(!f.getSelected()&&!b.getSelected()&&!y.getSelected()){V=t.getText("configuration.form_factor.warning");f.setValueState(P.Error);f.setValueStateText(V);b.setValueState(P.Error);b.setValueStateText(V);y.setValueState(P.Error);y.setValueStateText(V);I=true}return I};A.updateTooltipForDisabledProperties=function(e){const t=e.getModel();const i=t.getProperty("/config/isLocaleSuitable");if(!i){const i=A.getResourceBundle();const a=i.getText("edit_configuration.original_locale_not_fit_tooltip",[t.getProperty("/config/userLocale"),t.getProperty("/config/orgLocale")]);e.byId("titleInput").setTooltip(a);e.byId("subtitleInput").setTooltip(a);e.byId("keywordsInput").setTooltip(a);e.byId("infoInput").setTooltip(a)}};A.updateMessageStripForOriginalLanguage=function(e){const t=e.getModel();if(t.getProperty("/config/isLocaleSuitable")===false){const i=A.getResourceBundle().getText("edit_configuration.original_locale_not_fit_message",[t.getProperty("/config/orgLocale").toUpperCase(),t.getProperty("/config/userLocale").toUpperCase()]);const a=e.byId("messageStrip");a.setVisible(true);a.setText(i);a.setType(w.Warning)}};A.createSemanticObjectModel=function(e,t,i){const a=e.getView();const n="/sap/opu/odata/UI2/INTEROP/SemanticObjects";const o=[{obj:"",name:""},{obj:"*",name:"*"}];const r=(i||o).slice(0);const c=new l;c.setSizeLimit(999999);c.setProperty("/value","");c.setProperty("/enabled",true);t.bindAggregation("suggestionItems","suggest>/items",new v({text:"{suggest>obj}"}));t.setModel(c,"suggest");if(A.aData.length>0){setTimeout(()=>{c.setData({items:r.concat(A.aData)},true)},0);return}s.read({requestUri:n,headers:{Accept:"application/json"}},e=>{let t;let i;let a;for(a=0;a<e.results.length;a=a+1){t=e.results[a].id;i=e.results[a].text;A.aData.push({obj:t,name:i||t})}c.setData({items:r.concat(A.aData)},true)},e=>{let t=e&&e.message?e.message:e;if(e.response){t+=` - ${e.response.statusCode} ${e.response.statusText}`}x.error(`Could not fetch data: ${n}: ${t}`,null,a.getViewName()||"sap.ushell.components.tiles.utils")})};A.createRoleModel=function(e,t,i){const a=e.getView();const n="/sap/opu/odata/UI2/INTEROP/GetLPDInstances";const o=new l;const r=new l;o.setSizeLimit(999999);r.setSizeLimit(999999);o.setProperty("/value","");o.setProperty("/enabled",true);r.setProperty("/value","");r.setProperty("/enabled",true);const c=new m({cells:[new S({text:"{role}"}),new S({text:"{instance}"})]});t.bindAggregation("suggestionRows","/items",c);i.bindAggregation("suggestionItems","/items",new v({text:"{instance}"}));i.setModel(r);t.setModel(o);t.attachSuggestionItemSelected(e=>{i.setValue(e.getParameter("selectedRow").getCells()[1].getText());i.fireChange()});if(A.aRoleData.length>0){o.setData({items:A.aRoleData},false);r.setData({items:A.aRoleData},false);return}s.read({requestUri:n,headers:{Accept:"application/json"}},e=>{let t;let i;let a;for(a=0;a<e.results.length;a=a+1){t=e.results[a].lpdRole;i=e.results[a].instance;A.aRoleData.push({role:t,instance:i})}o.setData({items:A.aRoleData},true);r.setData({items:A.aRoleData},true)},e=>{let t=e&&e.message?e.message:e;if(e.response){t+=` - ${e.response.statusCode} ${e.response.statusText}`}x.error(`Could not fetch data: ${n}: ${t}`,null,a.getViewName()||"sap.ushell.components.tiles.utils")})};A.createAliasModel=function(e,t){const i=e.getView();let a="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias";const n=new l;n.setSizeLimit(999999);n.setProperty("/value","");n.setProperty("/enabled",true);t.bindAggregation("suggestionItems","/items",new v({text:"{alias}"}));t.setModel(n);const o=A.getAppLauncherConfig(i.oViewData.chip,true,true);if(o&&o.navigation_provider_role&&o.navigation_provider_instance){if(o.navigation_provider_role!==""&&o.navigation_provider_instance!==""){a=`${a}?role='${o.navigation_provider_role}'&instance='${o.navigation_provider_instance}'`}}s.read({requestUri:a,headers:{Accept:"application/json"}},e=>{let t;let i;let a;let s;let o;A.aAliasData=[];for(s=0;s<e.results.length;s=s+1){t=e.results[s].lpdApplicationAlias;i=e.results[s].lpdRole;a=e.results[s].lpdInstance;A.aAliasData.push({role:i,instance:a,alias:t})}o=n.getData();if(o){o.items=A.aAliasData}else{o={items:A.aAliasData}}n.setData(o,false)},e=>{let t=e&&e.message?e.message:e;if(e.response){t+=` - ${e.response.statusCode} ${e.response.statusText}`}x.error(`Could not fetch data: ${a}: ${t}`,null,i.getViewName()||"sap.ushell.components.tiles.utils")})};A.updateAliasModel=function(e,t){const i=t.getModel();const a=e.byId("navigation_provider_instanceInput").getValue();const n=e.byId("navigation_provider_roleInput").getValue();const o=`/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias?role='${n}'&instance='${a}'`;s.read({requestUri:o,headers:{Accept:"application/json"}},e=>{let t;let a;let n;let s;A.aAliasData=[];for(let i=0;i<e.results.length;i=i+1){t=e.results[i].lpdApplicationAlias;n=e.results[i].lpdRole;s=e.results[i].lpdInstance;A.aAliasData.push({role:n,instance:s,alias:t})}a=i.getData();if(a){a.items=A.aAliasData}else{a={items:A.aAliasData}}i.setData(a,false)},t=>{let i=t&&t.message?t.message:t;if(t.response){i+=` - ${t.response.statusCode} ${t.response.statusText}`}x.error(`Could not fetch data: ${o}: ${i}`,null,e.getViewName()||"sap.ushell.components.tiles.utils")})};A.createActionModel=function(e,t){const i=new l;const a=e.getView();i.setData({items:[{text:"display"},{text:"approve"},{text:"displayFactSheet"},{text:"manage"},{text:"create"},{text:"monitor"},{text:"track"},{text:"change"},{text:"register"},{text:"release"},{text:"analyzeKPIDetails"},{text:"lookup"},{text:"manageLineItems"}]});A.aActionData=i.getData();const n=A.getAppLauncherConfig(a.oViewData.chip,true,true);const s=n.navigation_semantic_action||n.semantic_action;if(s){if(!i.getData().items.some(e=>e.text===s)){i.getData().items.push({text:s})}}t.bindAggregation("suggestionItems","items>/items",new v({text:"{items>text}"}));t.setModel(i,"items");t.getBinding("suggestionItems").sort(new h("text",false))};A.createNavigationProviderModel=function(e,t){const i=new l;const a=A.getResourceBundle();const n=[{key:"SAPUI5",text:a.getText("configuration.target_application.sapui5")},{key:"LPD",text:a.getText("configuration.target_application.lpd_cust")},{key:"TR",text:a.getText("configuration.target_application.transaction")},{key:"WDA",text:a.getText("configuration.target_application.web_dynpro")},{key:"URL",text:a.getText("configuration.target_application.url")}];const s=A.getViewConfiguration(e.getView()).navigation_provider;if(s==="WCF"){n.push({key:"WCF",text:a.getText("configuration.target_application.wcf")})}else if(s==="URLT"){n.push({key:"URLT",text:a.getText("configuration.target_application.urlt")})}i.setData({items:n});t.bindItems("items>/items",new v({key:"{items>key}",text:"{items>text}"}));t.setModel(i,"items");t.getBinding("items").sort(new h("text",false))};A.displayApplicationTypeFields=function(e,t){switch(e){case"LPD":A.displayLpdCustApplicationTypeFields(t);break;case"SAPUI5":A.displaySapui5ApplicationTypeFields(t);break;case"TR":A.displayTransactionApplicationTypeFields(t);break;case"WDA":A.displayWebDynproApplicationTypeFields(t);break;case"URL":A.displayURLApplicationTypeFields(t);break;case"WCF":A.displayWCFApplicationTypeFields(t);break;case"URLT":A.displayURLTApplicationTypeFields(t);break}};A.displayWCFApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(true);e.byId("target_wcf_application_idInput").setVisible(true);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};A.displaySapui5ApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(true);e.byId("target_application_urlInput").setVisible(true);e.byId("application_component").setVisible(true);e.byId("target_application_componentInput").setVisible(true);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};A.displayLpdCustApplicationTypeFields=function(e){e.byId("application_description").setVisible(false);e.byId("target_application_descriptionInput").setVisible(false);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(true);e.byId("navigation_provider_roleInput").setVisible(true);e.byId("navigation_provider_instance").setVisible(true);e.byId("navigation_provider_instanceInput").setVisible(true);e.byId("target_application_alias").setVisible(true);e.byId("target_application_aliasInput").setVisible(true);e.byId("target_application_id").setVisible(true);e.byId("target_application_idInput").setVisible(true);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(true)};A.displayTransactionApplicationTypeFields=function(e){e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("target_transaction").setVisible(true);e.byId("target_transactionInput").setVisible(true);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};A.displayWebDynproApplicationTypeFields=function(e){e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(true);e.byId("target_web_dynpro_applicationInput").setVisible(true);e.byId("target_web_dynpro_configuration").setVisible(true);e.byId("target_web_dynpro_configurationInput").setVisible(true);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};A.displayURLApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(true);e.byId("target_application_urlInput").setVisible(true);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};A.displayURLTApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(true);e.byId("urlt_application_componentInput").setVisible(true);e.byId("target_urlt_system_alias").setVisible(true);e.byId("target_urlt_system_aliasInput").setVisible(true);e.byId("application_type_deprecated").setVisible(false)};A.getAppLauncherConfig=function(t,a,n){let s;const o=t.configuration.getParameterValueAsString("tileConfiguration");let l;try{l=JSON.parse(o||"{}")}catch(e){x.error("Error while trying to parse tile configuration",e,"sap.ushell.components.tiles.utils");return{}}l.editable=true;if(t.configurationUi&&t.configurationUi.isReadOnly){if(t.configurationUi.isReadOnly()){l.editable=false}}const r=A.getTranslatedTitle(t);const c=A.getTranslatedSubtitle(t,l);const p=A.getTranslatedProperty(t,l,"display_info_text");const u=A.getTranslatedProperty(t,l,"display_search_keywords");if(a){s=A.getResourceBundle();if(n&&t.bag){const a=t.bag.getOriginalLanguage();const n=new i(e.getLanguageTag()).getSAPLogonLanguage();const s=e.getLanguage();l.isLocaleSuitable=a===""||a.toLowerCase()===n.toLowerCase()||a.toLowerCase()===s.toLowerCase();l.orgLocale=a;l.userLocale=n}}l.display_icon_url=l.display_icon_url||"";if(p!==undefined){l.display_info_text=p}else if(l.display_info_text===undefined){if(a&&!n){l.display_info_text=`[${s.getText("configuration.display_info_text")}]`}else{l.display_info_text=""}}l.navigation_semantic_object=l.navigation_semantic_object||"";l.navigation_semantic_action=l.navigation_semantic_action||"";l.navigation_semantic_parameters=l.navigation_semantic_parameters||"";l.display_number_unit=l.display_number_unit||"";l.display_number_factor=l.display_number_factor||"";l.service_refresh_interval=l.service_refresh_interval?parseInt(l.service_refresh_interval,10):0;l.service_url=l.service_url||"";l.navigation_target_url=l.navigation_target_url||"";if(a&&A.isInitial(r)){l.display_title_text=n?"":`[${s.getText("configuration.display_title_text")}]`;l.display_subtitle_text=n?"":`[${s.getText("configuration.display_subtitle_text")}]`}else{l.display_title_text=r||l.display_title_text||"";if(c!==undefined){l.display_subtitle_text=c}else if(l.display_subtitle_text===undefined){l.display_subtitle_text=""}}l.navigation_use_semantic_object=l.navigation_use_semantic_object!==false;l.display_search_keywords=u||l.display_search_keywords||"";if(a){l.display_number_value=l.display_number_value||1234}l.form_factors=l.form_factors?l.form_factors:A.getDefaultFormFactors();l.desktopChecked=l.form_factors.manual.desktop;l.tabletChecked=l.form_factors.manual.tablet;l.phoneChecked=l.form_factors.manual.phone;l.manualFormFactor=!l.form_factors.appDefault&&l.editable;l.appFormFactor=l.form_factors.appDefault;l.formFactorConfigDefault=!!l.form_factors.defaultParam;if(l.signature){l.rows=A.getSignatureTableData(l.signature,n&&l.editable)}else{l.rows=l.mapping_signature&&l.mapping_signature!=="*=*"?A.getMappingSignatureTableData(l.mapping_signature,n&&l.editable):[A.getEmptyRowObj(l.editable)]}if(l.signature){l.isUnknownAllowed=l.signature.additional_parameters==="allowed"||l.signature.additionalParameters==="allowed"}else{l.isUnknownAllowed=l.mapping_signature!==undefined?A.getAllowUnknownParametersValue(l.mapping_signature):true}if(a){l.tile_actions_rows=A.getTileNavigationActionsRows(t,l.editable)}else if(!l.actions){l.actions=A.getTileNavigationActions(t)}if(a){const e=t.bag.getBag("deprecationProperties");const i=e.getProperty("deprecation");let a=null;if(i){a=s.getText(i==="D"?"configuration.app_deprecated":"configuration.app_archived",[e.getProperty("successor")])}l.deprecation_text=a}return l};A.getDataToDisplay=function(e,t){let i=0;let a;let n;let s;let o;const l={display_icon_url:t.icon||e.display_icon_url||"",display_title_text:t.title||e.display_title_text||"",display_number_value:!isNaN(t.number)?t.number:"...",display_number_unit:t.numberUnit||e.display_number_unit||"",display_info_text:t.info||e.display_info_text||"",display_info_state:t.infoState||"Neutral",display_subtitle_text:t.subtitle||e.display_subtitle_text||"",display_state_arrow:t.stateArrow||"None",display_number_state:t.numberState||"None",display_number_digits:t.numberDigits>=0?t.numberDigits:4,display_number_factor:t.numberFactor||"",display_search_keyword:t.keywords||e.display_search_keyword||"",targetParams:[]};if(t.infoStatus){l.display_info_state=t.infoStatus}if(t.targetParams){l.targetParams.push(t.targetParams)}if(t.results){for(a=0,n=t.results.length;a<n;a=a+1){s=t.results[a].number||0;if(typeof s==="string"){s=parseFloat(s)}i=i+s;o=t.results[a].targetParams;if(o){l.targetParams.push(o)}}l.display_number_value=i}if(!isNaN(t.number)){if(typeof t.number==="string"){t.number=t.number.trim()}if(t.number===""){l.display_number_value="..."}else{const e=this._shouldProcessDigits(t.number,t.numberDigits);const i=l.display_icon_url?4:5;if(t.number&&t.number.toString().length>=i||e){const e=this._normalizeNumber(t.number,i,t.numberFactor,t.numberDigits);l.display_number_factor=e.numberFactor;l.display_number_value=e.displayNumber}else{const e=T.getFloatInstance({maxFractionDigits:i});l.display_number_value=e.format(t.number)}}}if(l&&l.display_number_state){switch(l.display_number_state){case"Positive":l.display_number_state="Good";break;case"Negative":l.display_number_state="Error";break}}return l};A._normalizeNumber=function(e,t,i,a){let n;if(isNaN(e)){n=e}else{const t=T.getFloatInstance({maxFractionDigits:a});if(!i){const t=Math.abs(e);if(t>=1e9){i="B";e/=1e9}else if(t>=1e6){i="M";e/=1e6}else if(t>=1e3){i="K";e/=1e3}}n=t.format(e)}let s=n;const o=s[t-1];t-=o==="."||o===","?1:0;s=s.substring(0,t);return{displayNumber:s,numberFactor:i}};A._shouldProcessDigits=function(e,t){let i;e=typeof e!=="string"?e.toString():e;if(e.indexOf(".")!==-1){i=e.split(".")[1].length;if(i>t){return true}}return false};A.getTileSettingsAction=function(e,t,i){const a=A.getResourceBundle();const n=!i||i==="tile"?"tileSettingsBtn":"linkSettingsBtn";return{id:n,text:a.getText(n),press:function(){return new Promise(n=>{sap.ui.require(["sap/m/Button","sap/m/Dialog","sap/ui/core/mvc/View","sap/ui/layout/form/SimpleForm","sap/ui/layout/library"],(s,o,r,c,p)=>{const u=p.form.SimpleFormLayout;const g={showGroupSelection:false,title:e.getProperty("/config/display_title_text"),subtitle:e.getProperty("/config/display_subtitle_text")};if(!i||i==="tile"){g.info=e.getProperty("/config/display_info_text");g.icon=e.getProperty("/config/display_icon_url");g.keywords=e.getProperty("/config/display_search_keywords")}else if(i==="link"){g.showInfo=false;g.showIcon=false;g.showPreview=false}r.create({viewName:"module:sap/ushell/ui/footerbar/SaveAsTile.view"}).then(e=>{const r=new l(g);e.setModel(r);const p=new c({id:"tileSettings",layout:u.GridLayout,content:[e]}).addStyleClass("sapUshellAddBookmarkForm");const d=new s("bookmarkOkBtn",{text:a.getText("okBtn"),type:C.Emphasized,press:function(){t(e);f.close()},enabled:true});const _=new s("bookmarkCancelBtn",{text:a.getText("cancelBtn"),press:function(){f.close()}});var f=new o({id:"settingsDialog",title:!i||i==="tile"?a.getText("tileSettingsDialogTitle"):a.getText("linkSettingsDialogTitle"),contentWidth:"400px",content:p,beginButton:d,endButton:_,horizontalScrolling:false,afterClose:function(){f.destroy()}}).addStyleClass("sapContrastPlus");function b(e){d.setEnabled(!!e.trim())}e.getTitleInput().attachLiveChange(function(){b(this.getValue())});f.open();n(f)})})})}}};A.getSemanticNavigationUrl=function(e){let t=`#${String(e.navigation_semantic_object||"").trim()}`;t+=`-${String(e.navigation_semantic_action||"").trim()}`;if(e.navigation_semantic_parameters&&String(e.navigation_semantic_parameters||"").trim().length>0){t+=`?${String(e.navigation_semantic_parameters||"").trim()}`}return t};A.addParamsToUrl=function(e,t){let i="";const a=e.indexOf("?")!==-1;const n=t.targetParams;let s;if(n&&n.length>0){for(s=0;s<n.length;s=s+1){i+=n[s];if(s<n.length-1){i+="&"}}}if(i.length>0){if(!a){e+="?"}else{e+="&"}e+=i}return e};return A},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/CrossApplicationNavigation", ["sap/ushell/services/AppConfiguration","sap/ushell/services/_CrossApplicationNavigation/utils","sap/ushell/utils/type","sap/ushell/TechnicalParameters","sap/ushell/appIntegration/AppLifeCycle","sap/base/util/deepExtend","sap/base/util/isPlainObject","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/util/merge","sap/ushell/utils","sap/ushell/ApplicationType","sap/ushell/UI5ComponentType","sap/base/Log","sap/ushell/utils/UrlParsing","sap/base/util/deepClone","sap/ui/base/Object","sap/ushell/api/common/ComponentInstantiation","sap/ushell/Container"],(t,e,n,a,s,i,r,jQuery,o,p,c,l,u,h,f,g,m,y,d)=>{"use strict";function A(l,u,A){let v;if(A&&A.config){v=A.config}function S(a,s){let i;let o;let p;if(typeof a!=="string"&&!r(a)&&a!==undefined){h.error("Unexpected input type",null,"sap.ushell.services.CrossApplicationNavigation");return undefined}if(a===undefined){return undefined}const c=t.getCurrentApplication();if(s){if(typeof s.getComponentData!=="function"||!r(s.getComponentData())||!s.getComponentData().startupParameters||!r(s.getComponentData().startupParameters)){h.error("Cannot call getComponentData on component","the component should be an application root component","sap.ushell.services.CrossApplicationNavigation")}else{const t=s.getComponentData().startupParameters;if(t.hasOwnProperty("sap-system")){i=t["sap-system"][0]}if(t.hasOwnProperty("sap-ushell-next-navmode")){o=t["sap-ushell-next-navmode"][0]}}}else{if(c&&c["sap-system"]){i=c["sap-system"]}else if(c&&c.url){i=new URL(c.url,window.location.href).searchParams.get("sap-system")}if(c&&c["sap-ushell-next-navmode"]){o=c["sap-ushell-next-navmode"]}else if(c&&c.url){o=new URL(c.url,window.location.href).searchParams.get("sap-ushell-next-navmode")}}if(c){p=c.contentProviderId}const l=e._injectParameters({type:n,inject:{"sap-system":i,"sap-ushell-navmode":o,"sap-app-origin-hint":p},injectEmptyString:{"sap-app-origin-hint":true},args:a});return l}function C(t){if(localStorage&&localStorage["sap-ushell-enc-test"]==="false"){return t}if(!v||!v["sap-ushell-enc-test"]){if(localStorage&&localStorage["sap-ushell-enc-test"]!=="true"){return t}}if(typeof t!=="string"&&!r(t)&&t!==undefined){h.error("Unexpected input type",null,"sap.ushell.services.CrossApplicationNavigation");return undefined}if(t===undefined){return undefined}if(r(t)){const e=i({},t);if(e.target&&e.target.shellHash){if(typeof e.target.shellHash==="string"){if(e.target.shellHash!=="#"&&e.target.shellHash!==""){e.target.shellHash=C(e.target.shellHash)}}return e}e.params=e.params||{};e.params["sap-ushell-enc-test"]=["A B%20C"];return e}let e=t;if(!/[?&]sap-system=/.test(e)){const t=e.indexOf("?")>-1?"&":"?";e+=`${t}sap-ushell-enc-test=${encodeURIComponent("A B%20C")}`}return e}this._extractInnerAppRoute=function(t){if(typeof t==="string"){const e=t.split("&/");const n=e.shift();return{intent:n,innerAppRoute:e.length>0?`&/${e.join("&/")}`:""}}if(Object.prototype.toString.apply(t)==="[object Object]"){const e=o.get("target.shellHash",t);if(typeof e==="string"){const n=this._extractInnerAppRoute(e);t.target.shellHash=n.intent;return{intent:t,innerAppRoute:n.innerAppRoute}}if(t.hasOwnProperty("appSpecificRoute")){const e=t.appSpecificRoute;delete t.appSpecificRoute;const n=typeof e==="string"&&e.indexOf("&/")!==0&&e.length>0;return{innerAppRoute:n?`&/${e}`:e,intent:t}}return{intent:t,innerAppRoute:""}}h.error("Invalid input parameter","expected string or object","sap.ushell.services.CrossApplicationNavigation");return{intent:t}};this._injectInnerAppRoute=function(t,e){if(!e){return t}if(typeof t==="string"){return t+e}if(Object.prototype.toString.apply(t)==="[object Object]"){const n=o.get("target.shellHash",t);if(typeof n==="string"){t.target.shellHash=this._injectInnerAppRoute(n,e);return t}t.appSpecificRoute=e}return t};this.hrefForExternal=function(t,i,r){if(typeof i!=="object"&&i!==undefined&&i!==null){r=i;i=undefined}if(r){const e=this.hrefForExternalAsync(t,i);return c.toDeferred(e)}h.error("Deprecated option 'bAsync=false'. Please use 'bAsync=true' instead",null,"sap.ushell.services.CrossApplicationNavigation");let o=p({},t);const l=this._extractInnerAppRoute(o);const u=l.intent;e.addXAppStateFromParameter(u,"sap-xapp-state-data");o=S(u,i);o=e.injectStickyParameters({args:o,appLifeCycle:s,technicalParameters:a,type:n});o=C(o);o=this._injectInnerAppRoute(o,l.innerAppRoute);const f=d.getService("ShellNavigationInternal");if(!f){h.debug("Shell not available, no Cross App Navigation");return""}return f.hrefForExternalSync(o,undefined,i)};this.hrefForExternalAsync=async function(t,i){let r=p({},t);const o=this._extractInnerAppRoute(r);const l=o.intent;try{await e.addXAppStateFromParameterAsync(l,"sap-xapp-state-data");r=S(l,i);const t=await e.injectStickyParametersAsync({args:r,appLifeCycle:s,technicalParameters:a,type:n});r=t;r=C(r);r=this._injectInnerAppRoute(r,o.innerAppRoute);const p=await d.getServiceAsync("ShellNavigationInternal");const u=p.hrefForExternal(r,undefined,i);return c.promisify(u)}catch(t){h.debug("Shell not available, no Cross App Navigation");return""}};this.expandCompactHash=function(t){const e=Promise.resolve().then(async()=>{const e=await d.getServiceAsync("NavTargetResolutionInternal");const n=e.expandCompactHash(t);return c.promisify(n)});return c.toDeferred(e)};this.backToPreviousApp=async function(){const t=await this.isInitialNavigationAsync();if(t){return this.toExternal({target:{shellHash:"#"},writeHistory:false})}this.historyBack()};this.historyBack=function(t){let e=-1;if(t&&typeof t==="number"){if(t<=0){h.warning("historyBack called with an argument <= 0 and will result in a forward navigation or refresh","expected was an argument > 0","sap.ushell.services.CrossApplicationNavigation#historyBack")}e=t*-1}window.history.go(e)};this.isInitialNavigation=function(){h.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.isInitialNavigation'. Please use 'isInitialNavigationAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");const t=d.getService("ShellNavigationInternal");if(!t){h.debug("ShellNavigationInternal service not available","This will be treated as the initial navigation","sap.ushell.services.CrossApplicationNavigation");return true}const e=t.isInitialNavigation();if(typeof e==="undefined"){return true}return e};this.isInitialNavigationAsync=async function(){try{const t=await d.getServiceAsync("ShellNavigationInternal");const e=t.isInitialNavigation();if(typeof e==="undefined"){return true}return e}catch(t){h.debug("ShellNavigationInternal service not available","This will be treated as the initial navigation","sap.ushell.services.CrossApplicationNavigation");return true}};this.toExternal=async function(t,i){const r=t.writeHistory;let o=p({},t);const c=p({},o);this._processShellHashWithParams(o);const l=this._extractInnerAppRoute(o);const u=l.intent;try{const t=await d.getServiceAsync("AppLifeCycle");const p=await d.getServiceAsync("ShellNavigationInternal");const h=t.getCurrentApplication();const f=h&&await h.getIntent();this._checkIfAppNeedsToBeReloaded(c,h,f,p.hashChanger);await e.addXAppStateFromParameterAsync(u,"sap-xapp-state-data");o=S(u,i);const g=await e.injectStickyParametersAsync({args:o,appLifeCycle:s,technicalParameters:a,type:n});o=g;o=C(o);delete o.writeHistory;o=this._injectInnerAppRoute(o,l.innerAppRoute);return await p.toExternal(o,i,r)}catch(t){h.error("CrossAppNavigation.toExternal failed",t,"sap.ushell.services.CrossApplicationNavigation")}};this._checkIfAppNeedsToBeReloaded=function(t,e,n,a){if(!e||!n||!t||!t.target){return}if(t.target.shellHash){const e=f.parseShellHash(t.target.shellHash)||{};t.target={semanticObject:e.semanticObject,action:e.action,contextRaw:e.contextRaw};t.appSpecificRoute=e.appSpecificRoute;t.params=Object.assign({},t.params,e.params)}if(t.appSpecificRoute){return}if(e.applicationType!=="UI5"){return}if(t.target.semanticObject!==n.semanticObject){return}if(t.target.action!==n.action){return}const s={params:{}};if(t.params){Object.keys(t.params).forEach(e=>{const n=t.params[e];const a=Array.isArray(n)?n:[n];s.params[e]=a.map(t=>t.toString())})}if(!f.haveSameIntentParameters(s,n)){return}a.setReloadApplication(true)};this.hrefForAppSpecificHash=function(t){h.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.hrefForAppSpecificHash'. Please use 'hrefForAppSpecificHashAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");const e=d.getService("ShellNavigationInternal");if(e){return e.hrefForAppSpecificHash(t)}h.debug("Shell not available, no Cross App Navigation; fallback to app-specific part only");return`#${encodeURI(t)}`};this.hrefForAppSpecificHashAsync=async function(t){try{const e=await d.getServiceAsync("ShellNavigationInternal");return e.hrefForAppSpecificHash(t)}catch(e){h.debug("Shell not available, no Cross App Navigation; fallback to app-specific part only");return`#${encodeURI(t)}`}};this.getPrimaryIntent=function(t,e){const n={};let a;const s=/^#\w+-displayFactSheet(?:$|\?.)/;n.tags=["primaryAction"];n.semanticObject=t;if(e){n.params=e}return this.getLinks(n).then(t=>{if(t.length===0){delete n.tags;n.action="displayFactSheet";a=function(t,e){if(t.intent===e.intent){return 0}const n=s.test(t.intent)^s.test(e.intent);if(n){return s.test(t.intent)?-1:1}return t.intent<e.intent?-1:1};return this.getLinks(n)}a=function(t,e){if(t.intent===e.intent){return 0}return t.intent<e.intent?-1:1};return t}).then(t=>t.length===0?null:t.sort(a)[0])};this.getSemanticObjectLinks=function(t,i,r,o,p,l){const u=Promise.resolve().then(()=>e.injectStickyParametersAsync({args:{params:i},appLifeCycle:s,technicalParameters:a,type:n})).then(e=>{e=S(e,o).params;e=C({params:e}).params;let n;if(Array.isArray(t)){n=[];t.forEach(t=>{n.push([{semanticObject:t[0],params:t[1],ignoreFormFactor:!!t[2],ui5Component:t[3],appStateKey:t[4],compactIntents:!!t[5]}])})}else{n={semanticObject:t,params:e,ignoreFormFactor:r,ui5Component:o,appStateKey:p,compactIntents:!!l}}return Promise.all([d.getServiceAsync("NavTargetResolutionInternal"),n])}).then(t=>{const e=t[0];const n=t[1];return c.invokeUnfoldingArrayArguments(e.getLinks.bind(e),[n])});return c.toDeferred(u)};this.getLinks=function(t){const e=c.invokeUnfoldingArrayArguments(this._getLinks.bind(this),[t]);return c.toDeferred(e)};this._getLinks=async function(t){if(typeof t==="undefined"){t={}}let r=i({},t);r.compactIntents=!!r.compactIntents;r.action=r.action||undefined;r.paramsOptions=e.extractGetLinksParameterOptions(r.params);const o=await e.injectStickyParametersAsync({args:r,appLifeCycle:s,technicalParameters:a,type:n});r=o;let p;if(r.params){p=e.extractGetLinksParameterDefinition(r.params)}else{p=r.params}let l=S({params:p},r.ui5Component).params;l=C({params:l}).params;if(r.appStateKey){l["sap-xapp-state"]=[r.appStateKey];delete r.appStateKey}r.params=l;const u=await d.getServiceAsync("NavTargetResolutionInternal");const h=u.getLinks(r);return c.promisify(h)};this.getDistinctSemanticObjects=function(){const t=Promise.resolve().then(async()=>{const t=await d.getServiceAsync("NavTargetResolutionInternal");const e=t.getDistinctSemanticObjects();return c.promisify(e)});return c.toDeferred(t)};this.isIntentSupported=function(t,e){const n=Promise.resolve().then(async()=>{const n={};const a=t.map(t=>{const a=S(t,e);n[a]=t;return a});const s=await d.getServiceAsync("NavTargetResolutionInternal");const i=s.isIntentSupported(a);const r=await c.promisify(i);const o={};Object.keys(r).forEach(t=>{o[n[t]]=r[t]});return o});return c.toDeferred(n)};this.isNavigationSupported=function(t,e){const n=Promise.resolve().then(async()=>{const n=g(t).map(t=>{const n=this._extractInnerAppRoute(t);return S(n.intent,e)});const a=await d.getServiceAsync("NavTargetResolutionInternal");const s=a.isNavigationSupported(n);return c.promisify(s)});return c.toDeferred(n)};this.isUrlSupported=async function(t){if(typeof t!=="string"){throw new Error("Input is not a string")}if(!f.isIntentUrl(t)){return}const e=f.getHash(t);const n={target:{shellHash:e}};const a=this.isNavigationSupported([n]);const s=await c.promisify(a);if(s[0].supported){return}throw new Error("Navigation not supported")};this.createComponentInstance=function(t,e,n){const a=Promise.resolve().then(async()=>{const a=this._checkComponentConfig(e);if(a){throw new Error(a)}const s=e?.componentData;return y.createComponentInstance(t,s,n)});return c.toDeferred(a)};this.createComponentData=async function(t,e){const n=this._checkComponentConfig(e);if(n){throw new Error(n)}const a=e?.componentData;return y.createComponentInstantiationData(t,a)};this._checkComponentConfig=function(t){if(t){const e=Object.keys(t).length;if(e>1||e===1&&!t.componentData){return"`oConfig` argument should either be an empty object or contain only the `componentData` property."}}return null};this.createEmptyAppState=function(t,e,n,a){h.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.createEmptyAppState'. Please use 'createEmptyAppStateAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");const s=d.getService("AppState");if(!m.isA(t,"sap.ui.core.UIComponent")){throw new Error("The passed oAppComponent must be a UI5 Component.")}return s.createEmptyAppState(t,e,n,a)};this.createEmptyAppStateAsync=async function(t,e,n,a){if(!m.isA(t,"sap.ui.core.UIComponent")){throw new Error("The passed oAppComponent must be a UI5 Component.")}const s=await d.getServiceAsync("AppState");return s.createEmptyAppState(t,e,n,a)};this.getStartupAppState=function(t){this._checkComponent(t);const e=t.getComponentData();const n=e&&e["sap-xapp-state"];const a=n&&n[0];return this.getAppState(t,a)};this._checkComponent=function(t){if(!m.isA(t,"sap.ui.core.UIComponent")){throw new Error("oComponent passed must be a UI5 Component")}};this.getAppState=function(t,e){const n=Promise.resolve().then(async()=>{this._checkComponent(t);const n=await d.getServiceAsync("AppState");if(typeof e!=="string"){if(e!==undefined){h.error("Illegal Argument sAppStateKey ")}await c.awaitTimeout(0);const a=n.createEmptyUnmodifiableAppState(t);return a}const a=n.getAppState(e);return c.promisify(a)});return c.toDeferred(n)};this.getAppStateData=function(t){const e=c.invokeUnfoldingArrayArguments(this._getAppStateData.bind(this),[t]);return c.toDeferred(e)};this._getAppStateData=function(t){const e=Promise.resolve().then(async()=>{const e=await d.getServiceAsync("AppState");if(typeof t!=="string"){if(t!==undefined){h.error("Illegal Argument sAppStateKey ")}await c.awaitTimeout(0);return}const n=e.getAppState(t);const a=await c.promisify(n);return a.getData()}).catch(()=>{});return c.toDeferred(e)};this.saveMultipleAppStates=function(t){const e=Promise.resolve().then(async()=>{const e=t.map(t=>t.save());return Promise.all(e)});return c.toDeferred(e)};this._processShellHashWithParams=function(t){if(t?.processParams===true&&t?.target?.shellHash&&t?.params){const e=f.parseShellHash(t.target.shellHash);t.target={semanticObject:e.semanticObject,action:e.action,contextRaw:e.contextRaw};t.appSpecificRoute=e.appSpecificRoute;t.params=Object.assign({},t.params,e.params)}};this.getSupportedAppStatePersistencyMethods=function(){h.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.getSupportedAppStatePersistencyMethods'. Please use 'getSupportedAppStatePersistencyMethodsAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");const t=d.getService("AppState");return t.getSupportedPersistencyMethods()};this.getSupportedAppStatePersistencyMethodsAsync=async function(){const t=await d.getServiceAsync("AppState");return t.getSupportedPersistencyMethods()};this.makeStatePersistent=function(t,e,n){const a=Promise.resolve().then(async()=>{const a=await d.getServiceAsync("AppState");const s=a.makeStatePersistent(t,e,n);return c.promisify(s)});return c.toDeferred(a)};this.resolveIntent=function(t){const e=Promise.resolve().then(async()=>{const e=await d.getServiceAsync("NavTargetResolutionInternal");const n=e.resolveHashFragment(t);const a=await c.promisify(n);return{url:a.url}});return c.toDeferred(e)}}A.hasNoAdapter=true;return A},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_CrossApplicationNavigation/utils", ["sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/Log","sap/ushell/utils/UrlParsing"],(t,e,r,a)=>{"use strict";const n={};n.extractGetLinksParameterOptions=function(t){return n.parseGetLinksParameters(t).filter(t=>Object.keys(t.options).length>0).map(t=>({name:t.name,options:t.options}))};n.extractGetLinksParameterDefinition=function(t){return n.parseGetLinksParameters(t).reduce((t,e)=>{t[e.name]=e.value;return t},{})};n.parseGetLinksParameters=function(t){if(Object.prototype.toString.apply(t)!=="[object Object]"){return[]}const e=JSON.parse(JSON.stringify(t));return Object.keys(e).map(t=>{let r=e[t];let a={};if(Object.prototype.toString.apply(r)==="[object Object]"){r=r.value;delete e[t].value;a=e[t]}return{name:t,value:r,options:a}})};n.safeParseToObject=function(t){try{return JSON.parse(t)}catch(t){r.error("Cannot parse the given string to object",t)}return null};n.createAppStateFromData=function(t){r.error("Deprecated API call of '_CrossApplicationNavigation.utils.createAppStateFromData'. Please use 'createAppStateFromDataAsync' instead",null,"sap.ushell.services._CrossApplicationNavigation.utils");const e=sap.ushell.Container.getService("AppState");const a=e.createEmptyAppState(null);a.setData(t);a.save();return a.getKey()};n.createAppStateFromDataAsync=function(t){return sap.ushell.Container.getServiceAsync("AppState").then(e=>{const r=e.createEmptyAppState(null);r.setData(t);r.save();return r.getKey()})};n.extractParameter=function(s,c){let i;let o=null;if(typeof s==="string"){if(s.indexOf(`${c}=`)===-1){return{intent:s,data:null}}const t=a.parseShellHash(s);if(!t){return{intent:s,data:null}}o=t.params[c];delete t.params[c];i=a.constructShellHash(t);return{intent:i,data:o}}if(t(s)){const t=e.get("target.shellHash",s);if(typeof t==="string"){const e=n.extractParameter(t,c);s.target.shellHash=e.intent;return{intent:s,data:e.data}}const r=s.params;if(r&&r[c]){const t=r[c];o=typeof t==="string"?[t]:t;delete r[c]}return{intent:s,data:o}}r.error("Invalid input parameter","expected string or object");return{intent:s}};n.addXAppStateFromParameter=function(t,e){const r=n.extractParameter(t,e);const a=r.intent;const s=r.data&&r.data[0];if(!s){return}const c=n.safeParseToObject(s);if(!c){return}const i=n.createAppStateFromData(c);n.injectParameter(a,"sap-xapp-state",i)};n.addXAppStateFromParameterAsync=function(t,e){const r=n.extractParameter(t,e);const a=r.intent;const s=r.data&&r.data[0];if(!s){return Promise.resolve()}const c=n.safeParseToObject(s);if(!c){return Promise.resolve()}return n.createAppStateFromDataAsync(c).then(t=>{n.injectParameter(a,"sap-xapp-state",t)})};n.injectParameter=function(t,r,s){if(typeof t==="string"){const e=a.parseShellHash(t);e.params[r]=s;return a.constructShellHash(e)}if(Object.prototype.toString.apply(t)==="[object Object]"){const a=e.get("target.shellHash",t);if(typeof a==="string"){t.target.shellHash=n.injectParameter(a,r,s);return t}if(!t.params){t.params={}}t.params[r]=s}return t};n._injectParameters=function(t){const e=t.inject;const r=t.injectEmptyString||{};const a=t.type;const s=t.args;function c(t,e){return t||t===""&&e}if(a.isPlainObject(s)){if(s.target&&s.target.shellHash){if(typeof s.target.shellHash==="string"){s.target.shellHash=n._injectParameters({inject:e,injectEmptyString:r,type:t.type,args:s.target.shellHash})}return s}const a=Object.keys(e).reduce((t,a)=>{const n=e[a];const s=r[a]===true;if(c(n,s)&&typeof t==="string"){const e=new RegExp(`[&]${a}`);const r=!e.test(t);if(r){const e=t?"&":"";t+=`${e+a}=${n}`}}else if(c(n,s)&&!t.hasOwnProperty(a)){t[a]=n}return t},s.params||{});if(a&&Object.keys(a).length>0){s.params=a}return s}let i=s;if(i){Object.keys(e).forEach(t=>{const a=e[t];const n=r[t]===true;const s=new RegExp(`[?&]${t}`);const o=!s.test(i);if(c(a,n)&&o){const e=i.indexOf("?")>-1?"&":"?";i+=`${e+t}=${a}`}})}return i};n.injectStickyParameters=function(t){r.error("Deprecated API call of '_CrossApplicationNavigation.utils.injectStickyParameters'. Please use 'injectStickyParametersAsync' instead",null,"sap.ushell.services._CrossApplicationNavigation.utils");const e=sap.ushell.Container.getService("AppLifeCycle");return n._injectStickyParameters(t,e)};n.injectStickyParametersAsync=function(t){return sap.ushell.Container.getServiceAsync("AppLifeCycle").then(e=>n._injectStickyParameters(t,e))};n._injectStickyParameters=function(t,e){if(!e||Object.keys(e).length<=0){return t.args}const r=e.getCurrentApplication();if(!r||Object.keys(r).length<=0){return t.args}const a=t.appLifeCycle;const s=t.technicalParameters;const c=s.getParameters({sticky:true}).reduce((t,e)=>{const n=e.name;const c=r.componentInstance;const i=r.applicationType;let o;if(i==="UI5"){o={}}else{o=a.getCurrentApplication().container}const p=s.getParameterValueSync(n,c,o,i);const l=e.stickyName||n;t[l]=p;return t},{});const i={type:t.type,inject:c,args:t.args};return n._injectParameters(i)};return n});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/DynamicTileRequest", ["sap/base/i18n/Localization","sap/ushell/utils/HttpClient","sap/ui/thirdparty/URI","sap/base/util/isEmptyObject","sap/ushell/utils/UriParameters","sap/base/Log","sap/ui/core/Configuration","sap/base/util/ObjectPath","sap/ushell/EventHub","sap/ushell/Container"],(e,t,s,r,n,i,a,o,l,u)=>{"use strict";const c="sap.ushell.utils.DynamicTileRequest";class h{#e=()=>{};#t=()=>{};#s=null;#r=null;#n=null;#i=null;#a=null;#o=null;#l=null;#u=null;#c=null;#h=Promise.resolve();constructor(e,t,s,r,n){this.#e=t;this.#t=s;this.#s=e;this.#r=o.get(["dataSource","settings","odataVersion"],n);this.#n=true;this.#i=r;this.#h=this.#f(e,r).then(e=>{if(e){this.#a=e}}).catch(e=>{i.error("Was not able to create a DynamicTileRequest:",e,c)});this._oInitialRefreshPromise=this.#h.then(()=>{if(this.#a){return this.refresh()}})}set originalUrl(e){throw new Error("originalUrl is read-only!")}get originalUrl(){return this.#s}set oDataVersion(e){throw new Error("oDataVersion is read-only!")}get oDataVersion(){return this.#r}refresh(){if(!this.#o){this.#o=this.#h.then(this.#g.bind(this)).then(e=>{if(e){return this.#d(e)}})}return this.#o}async#g(){if(!this.#n){return this.#a}try{const e=await u.getServiceAsync("ReferenceResolver");const t=await e.resolveSemanticDateRanges(this.#a,this.#r);if(t.ignoredReferences&&t.ignoredReferences.length>0||t.invalidSemanticDates&&t.invalidSemanticDates.length>0){const e=[].concat(t.invalidSemanticDates||[],t.ignoredReferences||[]);i.error(`The service URL contains invalid Reference(s): ${e.join(", ")}`,"",c);return}this.#n=t.hasSemanticDateRanges;return t.url}catch(e){i.error("Could not resolve semantic date ranges:",e,c);throw e}}#d(r){let n=new s(r).escapeQuerySpace(false);const i=e.getSAPLogonLanguage();if(i&&!n.hasQuery("sap-language")){n.addQuery("sap-language",i)}let a=false;if(n.is("relative")){a=true;n=n.absoluteTo(location.href)}const o=this.#R(a);const l={headers:o};this.#c=n.origin();this.#u=n.href();this.#l=new t(this.#c,l);return this.#l.get(n.relativeTo(this.#c).href()).then(this.#U.bind(this)).catch(this.#m.bind(this))}abort(){if(this.#o&&this.#l){this.#l.abortAll();this.#l=null;this.#o=null;return true}return false}#U(e){l.emit("UITracer.trace",{source:"Tile",reason:"FetchData",data:{providerId:this.#i,targetUrl:this.#u,status:200}});let t;try{t=JSON.parse(e.responseText)}catch{throw new Error("Was not able to parse response of dynamic tile request")}this.#l=null;this.#o=null;let s;if(typeof t==="object"){t=t.d?t.d:t;const e=n.fromURL(this.#u);if(e.get("$inlinecount")==="allpages"){s={number:t.__count}}else if(e.get("$count")==="true"){s={number:t["@odata.count"]}}else{s=this.#v(t)}}else if(typeof t==="string"||typeof t==="number"){s={number:t}}this.#e(s)}#m(e){l.emit("UITracer.trace",{source:"Tile",reason:"FetchData",data:{providerId:this.#i,targetUrl:this.#u,status:e.status}});this.#l=null;this.#o=null;this.#t(e)}#v(e){const t=["results","icon","title","number","numberUnit","info","infoState","infoStatus","targetParams","subtitle","stateArrow","numberState","numberDigits","numberFactor"];const s=Object.keys(e).reduce((s,r)=>{if(t.indexOf(r)>-1){s[r]=e[r]}return s},{});if(!r(s)){return s}const n=Object.keys(e)[0];if(n!==undefined&&Object.keys(e).length===1){return Object.keys(e[n]).reduce((s,r)=>{if(t.indexOf(r)>-1){s[r]=e[n][r]}return s},{})}return{}}#R(t){const s={"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","Accept-Language":e.getLanguage()||"",Accept:"application/json, text/plain"};const r=e.getSAPLogonLanguage();if(r){s["sap-language"]=r}if(t){const e=u.getLogonSystem();const t=e&&e.getClient();if(t){s["sap-client"]=t}}return s}async#f(e,t){const s=await u.getServiceAsync("ClientSideTargetResolution");const r=await u.getServiceAsync("ReferenceResolver");const n=await s.getSystemContext(t);const a=await r.resolveUserDefaultParameters(e,n);if(a.defaultsWithoutValue&&a.defaultsWithoutValue.length>0){i.error(`The service URL contains User Default(s) with no set value: ${a.defaultsWithoutValue.join(", ")}`,"",c);return}if(a.ignoredReferences&&a.ignoredReferences.length>0){const e=a.ignoredReferences.filter(e=>!e.startsWith("DynamicDate"));if(e.length>0){i.error(`The service URL contains invalid Reference(s): ${e.join(", ")}`,"",c);return}}return a.url}destroy(){this.abort();this.#t=null;this.#e=null}}return h});
sap.ui.require.preload({
	"sap/ca/ui/model/format/FormatHelper.js":function(){
/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("sap.ca.ui.model.format.FormatHelper");jQuery.sap.require("sap.ui.core.format.NumberFormat");jQuery.sap.require("sap.ui.core.LocaleData");sap.ui.base.Object.extend("sap.ca.ui.model.format.FormatHelper",{});sap.ca.ui.model.format.FormatHelper.stringToNumeric=function(e){var a=/^\s*[\+-]?0[xX]/;if(a.test(e)){return parseInt(e,16)}else{return parseFloat(e)}};sap.ca.ui.model.format.FormatHelper.toNumeric=function(e){if(e===null||e===undefined){return NaN}var a=typeof e;var r;switch(a){case"number":r=e;break;case"string":r=sap.ca.ui.model.format.FormatHelper.stringToNumeric(e);break;case"object":var t=e.valueOf();if(typeof t==="number"){r=t}else if(Array.isArray(e)){r=NaN}else{r=sap.ca.ui.model.format.FormatHelper.stringToNumeric(e.toString())}break;default:r=NaN;break}return r};sap.ca.ui.model.format.FormatHelper.isNumeric=function(e){return isFinite(sap.ca.ui.model.format.FormatHelper.toNumeric(e))};sap.ca.ui.model.format.FormatHelper.getFormatOptions=function(e,a){var r={};r.locale=a;var t=typeof e;switch(t){case"number":r.decimals=e;break;case"object":if(typeof e.locale==="string"){r.locale=new sap.ui.core.Locale(e.locale)}else if(e.locale){r.locale=e.locale}r.decimals=e.decimals;r.rounding=e.rounding;r.formatStyle=e.formatStyle;r.shortDecimals=e.shortDecimals;r.shortRounding=e.shortRounding;break}if(!r.locale){if(sap.ui.getCore().getConfiguration().getLanguage()=="ZH"){r.locale=new sap.ui.core.Locale("zh_CN")}else{r.locale=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale()}}return r};sap.ca.ui.model.format.FormatHelper.hasRounding=function(e){var a;if(e!==undefined){if(typeof e==="number"){a=true}else{if(e.formatStyle==="short"){a=e.shortDecimals!==undefined||e.shortRounding!==undefined}else{a=e.decimals!==undefined||e.rounding!==undefined}}}else{a=false}return a};sap.ca.ui.model.format.FormatHelper.roundNumber=function(e,a){a=a||{};var r;var t,o;if(a.formatStyle==="short"){t=a.shortRounding;o=a.shortDecimals}else{t=a.rounding;o=a.decimals}if(t){r=t(e)}else if(o!==undefined){var i=sap.ca.ui.model.format.FormatHelper._getDecimals(o,e);r=e.toFixed(i)}else{r=e}return r};sap.ca.ui.model.format.FormatHelper._getDecimals=function(e,a){var r;if(typeof e==="function"){r=e(a)}else{r=e}return r};sap.ca.ui.model.format.FormatHelper._getUi5DecimalsFormatOptions=function(e,a,r){var t={};var o=null;if(e.formatStyle==="short"){o=e.shortDecimals}else if(e.decimals||e.decimals===0){o=e.decimals}if(o!==null){var i=sap.ca.ui.model.format.FormatHelper._getDecimals(o,a);t.minFractionDigits=i;t.maxFractionDigits=i}else if(typeof r==="string"){var l=r.indexOf(".");var u=l>-1?Math.max(r.length-l-1,0):0;t.minFractionDigits=u;t.maxFractionDigits=u}return t};sap.ca.ui.model.format.FormatHelper.formatNumber=function(e,a){var r=sap.ca.ui.model.format.FormatHelper.toNumeric(e);if(!isFinite(r)){return""}var t=sap.ca.ui.model.format.FormatHelper.getFormatOptions(a);var o=sap.ca.ui.model.format.FormatHelper._getUi5DecimalsFormatOptions(t,r,e);var i=sap.ui.core.format.NumberFormat.getFloatInstance(o,t.locale);if(sap.ca.ui.model.format.FormatHelper.hasRounding(a)){r=sap.ca.ui.model.format.FormatHelper.roundNumber(r,t);return i.format(r)}else{return i.format(e)}};sap.ca.ui.model.format.FormatHelper.getMagnitude=function(e){var a=[{value:1e3,suffix:"Kilo"},{value:1e6,suffix:"Mega"},{value:1e9,suffix:"Giga"},{value:1e12,suffix:"Tera"},{value:1e15,suffix:"Peta"},{value:1e18,suffix:"Exa"},{value:1e21,suffix:"Zetta"},{value:1e24,suffix:"Yotta"}];var r=e>=0?e:-e;for(var t=a.length-1;t>=0;--t){var o=a[t];if(r>=o.value){return o}}return{value:1,suffix:""}};
},
	"sap/ca/ui/model/format/NumberFormat.js":function(){
/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("sap.ca.ui.model.format.NumberFormat");jQuery.sap.require("sap.ui.core.LocaleData");jQuery.sap.require("sap.ca.ui.model.format.FormatHelper");jQuery.sap.require("sap.ca.ui.utils.resourcebundle");sap.ca.ui.model.format.NumberFormat=function(){throw new Error};sap.ca.ui.model.format.NumberFormat.oValueInfo={oDefaultFormatOptions:{style:"standard"}};sap.ca.ui.model.format.NumberFormat.getInstance=function(a,e){return this.createInstance(a,e,this.oValueInfo)};sap.ca.ui.model.format.NumberFormat.createInstance=function(a,e,t){var r=jQuery.sap.newObject(this.prototype);if(a instanceof sap.ui.core.Locale){e=a;a=undefined}if(!e){e=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale()}r.oLocale=e;r.oLocaleData=sap.ui.core.LocaleData.getInstance(e);r.oFormatOptions=jQuery.extend(false,{},t.oDefaultFormatOptions,a);r.oFormatOptions.formatStyle="standard";r.init();return r};sap.ca.ui.model.format.NumberFormat.prototype.init=function(){};sap.ca.ui.model.format.NumberFormat.prototype.format=function(a){var e="";var t="format_"+this.oFormatOptions.style;if(this[t]){e=this[t](a)}else{e=this.format_standard(a)}return e};sap.ca.ui.model.format.NumberFormat.prototype.format_standard=function(a){var e=sap.ca.ui.model.format.FormatHelper.getFormatOptions(this.oFormatOptions,this.oLocale);return sap.ca.ui.model.format.FormatHelper.formatNumber(a,e)};sap.ca.ui.model.format.NumberFormat.prototype.format_short=function(a){var e;var t;var r;function o(a){var r;if(!t){t=sap.ui.core.LocaleData.getInstance(e.locale)._get("decimalFormat-short");if(!t){var o=new sap.ui.core.Locale("en");t=sap.ui.core.LocaleData.getInstance(o)._get("decimalFormat-short")}}if(t){var i=1;while(Math.abs(a)>=i*10&&i<1e14){i=i*10}var m=t[i.toString()+"-other"];r={};if(!m||m=="0"){r.magnitude=1}else{r.formatString=m;var s=m.match(/0+\.*0*/);if(s){r.valueSubString=s[0];var n=r.valueSubString.indexOf(".");if(n==-1){r.decimals=0;r.magnitude=i*Math.pow(10,1-r.valueSubString.length)}else{r.decimals=r.valueSubString.length-n-1;r.magnitude=i*Math.pow(10,1-n)}}else{r.magnitude=1}}}return r}var i=sap.ca.ui.model.format.FormatHelper.toNumeric(a);if(!isFinite(i)){return""}var m="";e=sap.ca.ui.model.format.FormatHelper.getFormatOptions(this.oFormatOptions,this.oLocale);r=o(i);if(!r){return this.format_standard(a)}var s=i/r.magnitude;var n={};n.shortRounding=e.shortRounding;n.rounding=e.rounding;if(r.magnitude==1){n.formatStyle="standard";n.decimals=e.decimals}else if(e.shortDecimals){n.formatStyle="short";n.shortDecimals=e.shortDecimals}else{n.formatStyle="short";n.shortDecimals=r.decimals}s=sap.ca.ui.model.format.FormatHelper.roundNumber(s,n);r=o(s*r.magnitude);if(!r||r.magnitude==1){m=this.format_standard(a)}else{s=sap.ca.ui.model.format.FormatHelper.roundNumber(i/r.magnitude,n);if(!e.shortDecimals){e.shortDecimals=r.decimals}e.formatStyle="short";m=sap.ca.ui.model.format.FormatHelper.formatNumber(s,e);m=r.formatString.replace(r.valueSubString,m);m=m.replace(/'.'/g,".")}return m};sap.ca.ui.model.format.NumberFormat.prototype.parse=function(a){var e=sap.ui.core.format.NumberFormat.getInstance(this.oFormatOptions,this.oLocale);if(e.oFormatOptions.groupingSeparator==" "){a=a.replace(/ /g,e.oFormatOptions.groupingSeparator)}return e.parse(a)};sap.ca.ui.model.format.NumberFormat.prototype.format_percentage=function(a){var e,t;if(this.oFormatOptions.decimals===undefined){this.oFormatOptions.decimals=0}var r=sap.ca.ui.model.format.FormatHelper.toNumeric(a);r=r*100;var o=this.format_standard(r);var i=sap.ui.core.LocaleData.getInstance(this.oLocale)._get("percentFormat");if(!i){t=new sap.ui.core.Locale("en");i=sap.ui.core.LocaleData.getInstance(t)._get("percentFormat")}var m=i["standard"];if(m===undefined||m==""){e=o;jQuery.sap.log.error("no percent format available for the current locale")}else{var s=/[\.0,#]+/;var n=m.replace(s,o);var u=sap.ui.core.LocaleData.getInstance(this.oLocale)._get("symbols-latn-percentSign");if(!u){t=new sap.ui.core.Locale("en");u=sap.ui.core.LocaleData.getInstance(t)._get("symbols-latn-percentSign")}e=n.replace(/\u0025/,u)}return e};
},
	"sap/ca/ui/utils/resourcebundle.js":function(){
/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("sap.ca.ui.utils.resourcebundle");jQuery.sap.require("sap.ui.model.resource.ResourceModel");sap.ca.ui.utils.resourcebundle=function(){var e=new sap.ui.model.resource.ResourceModel({bundleUrl:jQuery.sap.getModulePath("sap.ca.ui.i18n.i18n",".properties")});sap.ui.getCore().setModel(e,"sap.ca.ui.i18n");return e.getResourceBundle()}();
},
	"sap/suite/ui/commons/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.suite.ui.commons","type":"library","embeds":["collaboration/flpplugins/msplugin"],"applicationVersion":{"version":"1.141.0"},"title":"SAP UI library: sap.suite.ui.commons","description":"SAP UI library: sap.suite.ui.commons","ach":"CA-UI5-SC","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_base","sap_belize_hcb","sap_belize_hcw","sap_belize_plus","sap_bluecrystal","sap_bluecrystal_base","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_hcb","sap_horizon","sap_horizon_dark","sap_horizon_hcb","sap_horizon_hcw"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.141","libs":{"sap.ui.core":{"minVersion":"1.141.0"},"sap.m":{"minVersion":"1.141.0"},"sap.suite.ui.microchart":{"minVersion":"1.141.0","lazy":true},"sap.ui.ux3":{"minVersion":"1.141.0","lazy":true},"sap.ui.comp":{"minVersion":"1.141.0","lazy":true},"sap.viz":{"minVersion":"1.141.0","lazy":true},"sap.ui.commons":{"minVersion":"1.141.0","lazy":true}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cnr","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","mk","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"content":{"controls":["sap.suite.ui.commons.BulletChart","sap.suite.ui.commons.BusinessCard","sap.suite.ui.commons.CalculationBuilder","sap.suite.ui.commons.CalculationBuilderExpression","sap.suite.ui.commons.CalculationBuilderFunction","sap.suite.ui.commons.CalculationBuilderInput","sap.suite.ui.commons.CalculationBuilderItem","sap.suite.ui.commons.CalculationBuilderVariable","sap.suite.ui.commons.ChartContainer","sap.suite.ui.commons.ChartContainerContent","sap.suite.ui.commons.ChartContainerToolbarPlaceholder","sap.suite.ui.commons.ChartTile","sap.suite.ui.commons.ColumnMicroChart","sap.suite.ui.commons.ComparisonChart","sap.suite.ui.commons.CloudFilePicker","sap.suite.ui.commons.DateRangeScroller","sap.suite.ui.commons.DateRangeSlider","sap.suite.ui.commons.DateRangeSliderInternal","sap.suite.ui.commons.DeltaMicroChart","sap.suite.ui.commons.DynamicContainer","sap.suite.ui.commons.FacetOverview","sap.suite.ui.commons.FeedItemHeader","sap.suite.ui.commons.FeedTile","sap.suite.ui.commons.GenericTile","sap.suite.ui.commons.GenericTile2X2","sap.suite.ui.commons.HarveyBallMicroChart","sap.suite.ui.commons.HeaderCell","sap.suite.ui.commons.HeaderContainer","sap.suite.ui.commons.imageeditor.ImageEditor","sap.suite.ui.commons.imageeditor.ImageEditorContainer","sap.suite.ui.commons.InfoTile","sap.suite.ui.commons.JamContent","sap.suite.ui.commons.KpiTile","sap.suite.ui.commons.LaunchTile","sap.suite.ui.commons.LinkActionSheet","sap.suite.ui.commons.MicroAreaChart","sap.suite.ui.commons.MonitoringContent","sap.suite.ui.commons.MonitoringTile","sap.suite.ui.commons.networkgraph.Graph","sap.suite.ui.commons.networkgraph.Node","sap.suite.ui.commons.NewsContent","sap.suite.ui.commons.NoteTaker","sap.suite.ui.commons.NoteTakerCard","sap.suite.ui.commons.NoteTakerFeeder","sap.suite.ui.commons.NumericContent","sap.suite.ui.commons.NumericTile","sap.suite.ui.commons.PictureZoomIn","sap.suite.ui.commons.ProcessFlow","sap.suite.ui.commons.ProcessFlowConnection","sap.suite.ui.commons.ProcessFlowConnectionLabel","sap.suite.ui.commons.ProcessFlowLaneHeader","sap.suite.ui.commons.ProcessFlowNode","sap.suite.ui.commons.RepeaterViewConfiguration","sap.suite.ui.commons.SplitButton","sap.suite.ui.commons.statusindicator.StatusIndicator","sap.suite.ui.commons.statusindicator.ShapeGroup","sap.suite.ui.commons.statusindicator.Shape","sap.suite.ui.commons.statusindicator.Rectangle","sap.suite.ui.commons.statusindicator.Circle","sap.suite.ui.commons.statusindicator.CustomShape","sap.suite.ui.commons.statusindicator.PropertyThreshold","sap.suite.ui.commons.statusindicator.DiscreteThreshold","sap.suite.ui.commons.statusindicator.LibraryShape","sap.suite.ui.commons.taccount.TAccount","sap.suite.ui.commons.TargetFilter","sap.suite.ui.commons.ThingCollection","sap.suite.ui.commons.ThreePanelThingInspector","sap.suite.ui.commons.ThreePanelThingViewer","sap.suite.ui.commons.TileContent","sap.suite.ui.commons.TileContent2X2","sap.suite.ui.commons.Timeline","sap.suite.ui.commons.TimelineFilterListItem","sap.suite.ui.commons.TimelineItem","sap.suite.ui.commons.UnifiedThingGroup","sap.suite.ui.commons.UnifiedThingInspector","sap.suite.ui.commons.VerticalNavigationBar","sap.suite.ui.commons.ViewRepeater"],"elements":["sap.suite.ui.commons.BulletChartData","sap.suite.ui.commons.CalculationBuilderValidationResult","sap.suite.ui.commons.ColumnData","sap.suite.ui.commons.ColumnMicroChartLabel","sap.suite.ui.commons.ComparisonData","sap.suite.ui.commons.CountingNavigationItem","sap.suite.ui.commons.FeedItem","sap.suite.ui.commons.HarveyBallMicroChartItem","sap.suite.ui.commons.HeaderCellItem","sap.suite.ui.commons.imageeditor.CustomSizeItem","sap.suite.ui.commons.MicroAreaChartItem","sap.suite.ui.commons.MicroAreaChartLabel","sap.suite.ui.commons.MicroAreaChartPoint","sap.suite.ui.commons.TargetFilterColumn","sap.suite.ui.commons.TargetFilterMeasureColumn","sap.suite.ui.commons.AriaProperties"],"types":["sap.suite.ui.commons.BulletChartMode","sap.suite.ui.commons.CalculationBuilderComparisonOperatorType","sap.suite.ui.commons.CalculationBuilderFunctionType","sap.suite.ui.commons.CalculationBuilderItemType","sap.suite.ui.commons.CalculationBuilderLayoutType","sap.suite.ui.commons.CalculationBuilderLogicalOperatorType","sap.suite.ui.commons.CalculationBuilderOperatorType","sap.suite.ui.commons.CalculationBuilderValidationMode","sap.suite.ui.commons.CommonBackground","sap.suite.ui.commons.ComparisonChartView","sap.suite.ui.commons.DeviationIndicator","sap.suite.ui.commons.FacetOverviewHeight","sap.suite.ui.commons.FrameType","sap.suite.ui.commons.HeaderContainerView","sap.suite.ui.commons.ImageEditorContainerMode","sap.suite.ui.commons.ImageEditorMode","sap.suite.ui.commons.ImageFormat","sap.suite.ui.commons.InfoTileSize","sap.suite.ui.commons.InfoTileTextColor","sap.suite.ui.commons.InfoTileValueColor","sap.suite.ui.commons.LoadState","sap.suite.ui.commons.MicroAreaChartView","sap.suite.ui.commons.MicroProcessFlowRenderType","sap.suite.ui.commons.networkgraph.ActionButtonPosition","sap.suite.ui.commons.networkgraph.BackgroundColor","sap.suite.ui.commons.networkgraph.ElementStatus","sap.suite.ui.commons.networkgraph.LayoutRenderType","sap.suite.ui.commons.networkgraph.LineArrowOrientation","sap.suite.ui.commons.networkgraph.LineArrowPosition","sap.suite.ui.commons.networkgraph.LineType","sap.suite.ui.commons.networkgraph.HeaderCheckboxState","sap.suite.ui.commons.networkgraph.NodePlacement","sap.suite.ui.commons.networkgraph.NodeShape","sap.suite.ui.commons.networkgraph.Orientation","sap.suite.ui.commons.networkgraph.RenderType","sap.suite.ui.commons.ProcessFlowConnectionLabelState","sap.suite.ui.commons.ProcessFlowConnectionState","sap.suite.ui.commons.ProcessFlowConnectionType","sap.suite.ui.commons.ProcessFlowDisplayState","sap.suite.ui.commons.ProcessFlowLaneState","sap.suite.ui.commons.ProcessFlowNodeState","sap.suite.ui.commons.ProcessFlowNodeType","sap.suite.ui.commons.ProcessFlowZoomLevel","sap.suite.ui.commons.SelectionState","sap.suite.ui.commons.statusindicator.FillingType","sap.suite.ui.commons.statusindicator.FillingDirectionType","sap.suite.ui.commons.statusindicator.HorizontalAlignmentType","sap.suite.ui.commons.statusindicator.VerticalAlignmentType","sap.suite.ui.commons.statusindicator.SizeType","sap.suite.ui.commons.statusindicator.LabelPositionType","sap.suite.ui.commons.taccount.TAccountPanelState","sap.suite.ui.commons.ThingGroupDesign","sap.suite.ui.commons.TimelineAlignment","sap.suite.ui.commons.TimelineAxisOrientation","sap.suite.ui.commons.TimelineFilterType","sap.suite.ui.commons.TimelineGroupType","sap.suite.ui.commons.TimelineScrollingFadeout","sap.suite.ui.commons.ValueStatus","sap.suite.ui.commons.SemanticColorType","sap.suite.ui.commons.ImageEditorContainerButton","sap.suite.ui.commons.FilePickerModes","sap.suite.ui.commons.FilePickerType","sap.suite.ui.commons.SelectionModes"],"interfaces":[]}}}}',
	"sap/suite/ui/microchart/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.suite.ui.microchart","type":"library","embeds":[],"applicationVersion":{"version":"1.141.1"},"title":"UI5 library: sap.suite.ui.microchart","description":"UI5 library: sap.suite.ui.microchart","ach":"CA-UI5-SC","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_base","sap_belize_hcb","sap_belize_hcw","sap_belize_plus","sap_bluecrystal","sap_bluecrystal_base","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_hcb","sap_horizon","sap_horizon_dark","sap_horizon_hcb","sap_horizon_hcw"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.141","libs":{"sap.ui.core":{"minVersion":"1.141.1"},"sap.m":{"minVersion":"1.141.1"}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cnr","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","mk","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"content":{"controls":["sap.suite.ui.microchart.AreaMicroChart","sap.suite.ui.microchart.BulletMicroChart","sap.suite.ui.microchart.ColumnMicroChart","sap.suite.ui.microchart.ComparisonMicroChart","sap.suite.ui.microchart.DeltaMicroChart","sap.suite.ui.microchart.HarveyBallMicroChart","sap.suite.ui.microchart.LineMicroChart","sap.suite.ui.microchart.InteractiveBarChart","sap.suite.ui.microchart.InteractiveDonutChart","sap.suite.ui.microchart.InteractiveLineChart","sap.suite.ui.microchart.RadialMicroChart","sap.suite.ui.microchart.StackedBarMicroChart"],"elements":["sap.suite.ui.microchart.AreaMicroChartPoint","sap.suite.ui.microchart.AreaMicroChartItem","sap.suite.ui.microchart.AreaMicroChartLabel","sap.suite.ui.microchart.BulletMicroChartData","sap.suite.ui.microchart.ColumnMicroChartData","sap.suite.ui.microchart.ColumnMicroChartLabel","sap.suite.ui.microchart.ComparisonMicroChartData","sap.suite.ui.microchart.HarveyBallMicroChartItem","sap.suite.ui.microchart.LineMicroChartPoint","sap.suite.ui.microchart.LineMicroChartEmphasizedPoint","sap.suite.ui.microchart.LineMicroChartLine","sap.suite.ui.microchart.InteractiveBarChartBar","sap.suite.ui.microchart.InteractiveDonutChartSegment","sap.suite.ui.microchart.InteractiveLineChartPoint","sap.suite.ui.microchart.StackedBarMicroChartBar"],"types":["sap.suite.ui.microchart.AreaMicroChartViewType","sap.suite.ui.microchart.BulletMicroChartModeType","sap.suite.ui.microchart.CommonBackgroundType","sap.suite.ui.microchart.ComparisonMicroChartViewType","sap.suite.ui.microchart.DeltaMicroChartViewType","sap.suite.ui.microchart.HorizontalAlignmentType","sap.suite.ui.microchart.LoadStateType","sap.suite.ui.microchart.LineType","sap.suite.ui.microchart.MicroChartColorType"],"interfaces":[]}}}}',
	"sap/ushell/components/tiles/cdm/applauncher/StaticTile.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    controllerName="sap.ushell.components.tiles.cdm.applauncher.StaticTile"\n    height="100%"\n    width="100%"><GenericTile\n        additionalTooltip="{= ${/properties/showContentProviderInfoInTooltip} ? ${/properties/contentProviderLabel} : \'\'}"\n        systemInfo="{= ${/properties/showContentProviderInfoOnVisualizations} ? ${/properties/contentProviderLabel} : \'\'}"\n        frameType="{/properties/frameType}"\n        header="{/properties/title}"\n        mode="{/properties/mode}"\n        scope="{/properties/scope}"\n        sizeBehavior="{= ${/properties/customSizeBehavior} || ${/properties/configSizeBehavior}}"\n        subheader="{/properties/subtitle}"\n        url="{\n            path: \'/properties/targetURL\',\n            formatter: \'._getLeanUrl\'\n        }"\n        wrappingType="{/properties/wrappingType}"\n        press=".onPress"><dependents><TileContent id="standardTileContent" footer="{/properties/info}" /><TileContent id="imageTileContent" footer="{/properties/info}"><ImageContent src="{/properties/icon}" /></TileContent></dependents></GenericTile></mvc:View>\n',
	"sap/ushell/components/tiles/cdm/applauncher/manifest.json":'{"_version":"1.21.0","sap.flp":{"type":"tile","tileSize":"1x1","vizOptions":{"displayFormats":{"supported":["standard","standardWide","compact","flat","flatWide"],"default":"standard"}}},"sap.app":{"id":"sap.ushell.components.tiles.cdm.applauncher","type":"component","applicationVersion":{"version":"1.0.0"},"title":"","tags":{"keywords":[]},"ach":"CA-FE-FLP-COR"},"sap.ui":{"_version":"1.1.0","technology":"UI5","icons":{"icon":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"_version":"1.1.0","componentName":"sap.ushell.components.tiles.cdm.applauncher","dependencies":{"minUI5Version":"1.42","libs":{"sap.m":{}}},"rootView":{"viewName":"sap.ushell.components.tiles.cdm.applauncher.StaticTile","type":"XML"},"handleValidation":false,"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/tiles/cdm/applauncherdynamic/DynamicTile.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    controllerName="sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile"\n    height="100%"\n    width="100%"><GenericTile\n        additionalTooltip="{= ${/properties/showContentProviderInfoInTooltip} ? ${/properties/contentProviderLabel} : \'\'}"\n        systemInfo="{= ${/properties/showContentProviderInfoOnVisualizations} ? ${/properties/contentProviderLabel} : \'\'}"\n        frameType="{/properties/frameType}"\n        header="{/properties/title}"\n        scope="{/properties/scope}"\n        sizeBehavior="{= ${/properties/customSizeBehavior} || ${/properties/configSizeBehavior}}"\n        subheader="{/properties/subtitle}"\n        url="{\n            path: \'/properties/targetURL\',\n            formatter: \'._getLeanUrl\'\n        }"\n        wrappingType="{/properties/wrappingType}"\n        press=".onPress"><TileContent\n            id="numericTileContent"\n            footer="{/properties/info}"\n            footerColor="{\n                path: \'/properties/infoState\',\n                formatter: \'._formatValueColor\'\n            }"\n            unit="{/properties/number_unit}"><NumericContent\n                icon="{/properties/icon}"\n                indicator="{/properties/number_state_arrow}"\n                scale="{/properties/number_factor}"\n                truncateValueTo="5"\n                value="{/properties/number_value}"\n                valueColor="{\n                    path: \'/properties/number_value_state\',\n                    formatter: \'._getValueColor\'\n                }"\n                withMargin="false"\n                width="100%" /></TileContent></GenericTile></mvc:View>\n',
	"sap/ushell/components/tiles/cdm/applauncherdynamic/manifest.json":'{"_version":"1.21.0","sap.flp":{"type":"tile","tileSize":"1x1","vizOptions":{"displayFormats":{"supported":["standard","standardWide","compact","flat","flatWide"],"default":"standard"}}},"sap.app":{"id":"sap.ushell.components.tiles.cdm.applauncherdynamic","_version":"1.0.0","type":"component","applicationVersion":{"version":"1.0.0"},"title":"","description":"","tags":{"keywords":[]},"ach":"CA-FLP-FE-COR"},"sap.ui":{"_version":"1.1.0","icons":{"icon":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"_version":"1.1.0","componentName":"sap.ushell.components.tiles.cdm.applauncherdynamic","dependencies":{"minUI5Version":"1.42","libs":{"sap.m":{}}},"rootView":{"viewName":"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile","type":"JS"},"handleValidation":false}}',
	"sap/ushell/components/tiles/indicatorArea/AreaChartTileChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../../../../</basePath><viewName>sap.ushell.components.tiles.indicatorArea.AreaChartTile.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /><consume id="bag" /></contracts></chip>\n',
	"sap/ushell/components/tiles/indicatorDual/DualTileChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../../../../</basePath><viewName>sap.ushell.components.tiles.indicatorDual.DualTile.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /><parameter name="row">1</parameter><parameter name="col">2</parameter></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /><consume id="bag" /></contracts></chip>\n',
	"sap/ushell/components/tiles/indicatorDualComparison/DualComparisonChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../</basePath><viewName>tiles/indicatorDualComparison.DualComparison.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /><parameter name="row">1</parameter><parameter name="col">2</parameter></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /><consume id="bag" /></contracts></chip>\n',
	"sap/ushell/components/tiles/indicatorDualContribution/DualContributionChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../</basePath><viewName>tiles/indicatorDualComparison.DualComparison.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /><parameter name="row">1</parameter><parameter name="col">2</parameter></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /><consume id="bag" /></contracts></chip>\n',
	"sap/ushell/components/tiles/indicatorDualDeviation/DualDeviationChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../</basePath><viewName>tiles/indicatorDualDeviation.DualDeviation.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /><parameter name="row">1</parameter><parameter name="col">2</parameter></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /><consume id="bag" /></contracts></chip>\n',
	"sap/ushell/components/tiles/indicatorDualTrend/DualTrendChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../</basePath><viewName>tiles/indicatorDualTrend.DualTrend.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /><parameter name="row">1</parameter><parameter name="col">2</parameter></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /></contracts></chip>\n',
	"sap/ushell/components/tiles/indicatorHarveyBall/HarveyBallTile.view.js":function(){
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.require(["sap/ca/ui/model/format/NumberFormat","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/suite/ui/commons/HarveyBallMicroChart","sap/suite/ui/commons/HarveyBallMicroChartItem","sap/suite/ui/commons/TileContent","sap/suite/ui/commons/GenericTile"],(e,a,i,t,s,o,l)=>{"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("tiles.indicatorHarveyBall.HarveyBallTile",{getControllerName:function(){},createContent:function(){const e=new t({total:"{/value}",size:"{/size}",totalLabel:"{/totalLabel}",items:[new s({fraction:"{/fractionValue}",fractionLabel:"{/fractionLabel}",color:"{/color}"})]});const a=new o({size:"{/size}",content:e});this.oTile=new l({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[a]})}})});
},
	"sap/ushell/components/tiles/indicatorHarveyBall/HarveyBallTileChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../</basePath><viewName>tiles/indicatorHarveyBall.HarveyBallTile.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /><consume id="bag" /></contracts></chip>\n',
	"sap/ushell/components/tiles/indicatorcomparison/ComparisonTileChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../../../../</basePath><viewName>sap.ushell.components.tiles.indicatorcomparison.ComparisonTile.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /><consume id="bag" /></contracts></chip>\n',
	"sap/ushell/components/tiles/indicatorcontribution/ContributionTileChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../../../../</basePath><viewName>sap.ushell.components.tiles.indicatorcontribution.ContributionTile.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /><consume id="bag" /></contracts></chip>\n',
	"sap/ushell/components/tiles/indicatordeviation/DeviationTileChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../../../../</basePath><viewName>sap.ushell.components.tiles.indicatordeviation.DeviationTile.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /><parameter name="row">1</parameter><parameter name="col">1</parameter></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /><consume id="bag" /></contracts></chip>\n',
	"sap/ushell/components/tiles/indicatornumeric/NumericTileChip.xml":'<?xml version="1.0" encoding="UTF-8"?><chip xmlns="http://schemas.sap.com/sapui2/services/Chip/1"><implementation><sapui5><basePath>../../../../../</basePath><viewName>sap.ushell.components.tiles.indicatornumeric.NumericTile.view.js</viewName></sapui5></implementation><appearance><title /><description /></appearance><contracts><consume id="configuration"><parameters><parameter name="tileConfiguration" /><parameter name="isSufficient" /><parameter name="timeStamp" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="writeConfiguration"><parameters><parameter name="tileConfiguation" /><parameter name="cacheTimeStamp" /></parameters></consume><consume id="visible" /><consume id="url" /><consume id="preview" /><consume id="search" /><consume id="bag" /></contracts></chip>\n'
},"sap/fiori/indicator-tiles");
//# sourceMappingURL=indicator-tiles.js.map
