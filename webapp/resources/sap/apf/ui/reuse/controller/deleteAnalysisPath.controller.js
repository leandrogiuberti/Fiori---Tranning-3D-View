/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
sap.ui.define(["sap/m/Button","sap/m/Dialog","sap/m/library","sap/m/Text","sap/ui/Device","sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel"],function(e,t,i,o,a,s,n){"use strict";const r=i.DialogType;return s.extend("sap.apf.ui.reuse.controller.deleteAnalysisPath",{onInit:function(){this.oCoreApi=this.getView().getViewData().oInject.oCoreApi;this.oUiApi=this.getView().getViewData().oInject.uiApi;this.oSerializationMediator=this.getView().getViewData().oInject.oSerializationMediator},openPathGallery:function(){var e=new n;e.setData(this.getView().getViewData().jsonData);this.oDialog=this.getView().getContent()[0];this.oDialog.getContent()[0].setModel(e);this.oDialog.setInitialFocus(this.oDialog);this.oDialog.open()},handleDeleteOfDialog:function(e){var t=e.getParameter("listItem").getProperty("title");var i={item:e.getParameter("listItem"),list:this.getView().getContent()[0].getContent()[0],guid:this.getGuidForPath(t,this.getView().getViewData().jsonData.GalleryElements),sPathName:t};this.openConfirmDelDialog(i)},getGuidForPath:function(e,t){var i;for(i=0;i<t.length;i++){var o=t[i];if(o.AnalysisPathName===e){return o.guid}}},deleteSavedPath:function(e,t){var i=this;var o=t.guid;var a=e;var s;var n=i.oUiApi.getLayoutView().getController().oSavedPathName.getText();i.oSerializationMediator.deletePath(o,function(e,o,n){if(n===undefined&&typeof e==="object"){t.list.removeItem(t.item);t.list.rerender();i.oCoreApi.readPaths(function(e,t,o){if(o===undefined&&typeof e==="object"){var n=e.paths.length;if(n===0){jQuery(".pathText").removeClass("pathTextDontShow");jQuery(".pathText").addClass("pathTextShow")}}else{s=i.oCoreApi.createMessageObject({code:"6005",aParameters:[a]});s.setPrevious(o);i.oCoreApi.putMessage(s)}})}else{s=i.oCoreApi.createMessageObject({code:"6009",aParameters:[a]});s.setPrevious(n);i.oCoreApi.putMessage(s)}});if(i.oCoreApi.isDirty()){n=n.substring(1)}if(n===a){i.oUiApi.getAnalysisPath().getToolbar().getController().resetAnalysisPath()}},openConfirmDelDialog:function(i){var s=this;var n=i.sPathName;var l=(new o).addStyleClass("textStyle");l.setText(s.oCoreApi.getTextNotHtmlEncoded("do-you-want-to-delete-analysis-path",["'"+n+"'"]));s.delConfirmDialog=new t({type:r.Standard,title:s.oCoreApi.getTextNotHtmlEncoded("delPath"),content:l,beginButton:new e({text:s.oCoreApi.getTextNotHtmlEncoded("yes"),type:"Emphasized",press:function(){s.deleteSavedPath(n,i);s.delConfirmDialog.close()}}),endButton:new e({text:s.oCoreApi.getTextNotHtmlEncoded("no"),press:function(){s.delConfirmDialog.close()}}),afterClose:function(){s.oUiApi.getLayoutView().setBusy(false);s.delConfirmDialog.destroy()}});if(a.system.desktop){s.delConfirmDialog.addStyleClass("sapUiSizeCompact")}s.delConfirmDialog.open()}})});
//# sourceMappingURL=deleteAnalysisPath.controller.js.map