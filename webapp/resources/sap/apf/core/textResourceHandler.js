/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
sap.ui.define(["sap/apf/core/constants","sap/apf/utils/exportToGlobal","sap/apf/utils/hashtable","sap/ui/thirdparty/jquery","sap/base/security/encodeXML","sap/base/strings/formatMessage","sap/ui/model/resource/ResourceModel"],function(e,t,n,jQuery,r,s,i){"use strict";function u(t){var u=t.instances.messageHandler;var a;var o=new n(u);var c=new n(u);var l=new n(u);var f={};var d=t.constructors&&t.constructors.ResourceModel||i;var h;this.getTextNotHtmlEncoded=function(e,t){var n;var r;var s;if(typeof e==="string"){r=e}else{u.check(e!==undefined&&e.kind!==undefined&&e.kind==="text"&&e.key!==undefined,"Error - oLabel is not compatible");r=e.key}s=JSON.stringify({textKey:r,parameters:t});if(o.hasItem(s)){return o.getItem(s)}n=m(r,t);o.setItem(s,n);return n};this.getTextHtmlEncoded=function(e,t){return r(this.getTextNotHtmlEncoded(e,t))};this.getMessageText=function(e,t){return g(e,t,false)};this.loadTextElements=function(e){var t,n;n=e.length;for(t=0;t<n;t++){c.setItem(e[t].TextElement,e[t].TextElementDescription)}};this.registerTextWithKey=function(e,t){f[e]=t};this.loadResourceModelAsPromise=function(e,t,n){var r=jQuery.Deferred();h=new d({bundleUrl:e,async:true});if(t!==undefined&&t!==""){h.enhance({bundleUrl:t,async:true}).then(function(){if(n!==undefined&&n!==""){h.enhance({bundleUrl:n,async:true}).then(function(){h.getResourceBundle().then(function(e){a=e;r.resolve()})})}else{h.getResourceBundle().then(function(e){a=e;r.resolve()})}})}else if(n!==undefined&&n!==""){h.enhance({bundleUrl:n,async:true}).then(function(){h.getResourceBundle().then(function(e){a=e;r.resolve()})})}else{h.getResourceBundle().then(function(e){a=e;r.resolve()})}return r.promise()};function g(e,t,n){if(t&&t.length===0){return a.getText(e,undefined,n)}return a.getText(e,t,n)}function m(t,n){var r;if(t===e.textKeyForInitialText){return""}else if(f[t]){if(n&&n.length>0){return s(f[t],n)}return f[t]}else if(c.hasItem(t)){r=g(t,n,true);if(typeof r!=="string"||r===t){return c.getItem(t)}return r}else if(l.hasItem(t)){return l.getItem(t)}r=g(t,n,true);if(typeof r==="string"){return r}u.putMessage(u.createMessageObject({code:"3001",aParameters:[t],oCallingObject:this}));var i="# text not available: "+t;l.setItem(t,i);return i}}t("sap.apf.core.TextResourceHandler",u);return u});
//# sourceMappingURL=textResourceHandler.js.map