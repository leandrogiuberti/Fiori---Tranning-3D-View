/*!
 * SAP APF Analysis Path Framework
 *
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
sap.ui.define(["sap/apf/utils/exportToGlobal","sap/ui/thirdparty/jquery"],function(t,jQuery){"use strict";function e(t){this.type="metadataFactory";var e=t.instances.messageHandler;var a=t.constructors.Hashtable;var n=t.constructors.Metadata;var r=t.constructors.EntityTypeMetadata;var s=t.constructors.MetadataFacade;delete t.constructors.Metadata;delete t.constructors.EntityTypeMetadata;delete t.constructors.MetadataFacade;delete t.instances.configurationFactory;var i=new a(e);this.getMetadata=function(e){if(i.hasItem(e)===false){i.setItem(e,{metadataPromise:new n(t,e).isInitialized()})}return i.getItem(e).metadataPromise};this.getEntityTypeMetadata=function(t,n){var s;var o;var c=this.getMetadata(t);s=i.getItem(t).entityTypes;if(!s){s=new a(e);i.getItem(t).entityTypes=s}if(!s.getItem(n)){o=jQuery.Deferred();s.setItem(n,o.promise());c.then(function(t){o.resolve(new r(e,n,t))},function(){o.resolve(undefined)})}return s.getItem(n)};this.getMetadataFacade=function(a){return new s({constructors:{MetadataProperty:t.constructors.MetadataProperty},instances:{messageHandler:e,metadataFactory:this}},a)};this.getServiceDocuments=function(){return t.functions.getServiceDocuments()};this.getEntitySets=function(t){var e=jQuery.Deferred();this.getMetadata(t).done(function(t){e.resolve(t.getEntitySets())}).fail(function(){e.resolve([])});return e.promise()};this.getAllEntitySetsExceptParameterEntitySets=function(t){var e=jQuery.Deferred();this.getMetadata(t).done(function(t){e.resolve(t.getAllEntitySetsExceptParameterEntitySets())}).fail(function(){e.resolve([])});return e.promise()};this.getEntityTypes=function(t){var e=jQuery.Deferred();this.getMetadata(t).done(function(t){e.resolve(t.getEntityTypes())}).fail(function(){e.resolve([])});return e.promise()}}t("sap.apf.core.MetadataFactory",e);return e});
//# sourceMappingURL=metadataFactory.js.map