/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
sap.ui.define(["sap/apf/utils/exportToGlobal","sap/apf/utils/utils","sap/apf/core/metadataProperty","sap/ui/thirdparty/jquery"],function(e,t,r,jQuery){"use strict";function a(e,a){this.type="metadataFacade";var i=e.instances.messageHandler;var n=e.instances.metadataFactory;var o;var s;var f={};this.getAllProperties=function(e){var r;var a;var s=0;var f;var u=[];if(o){e(o)}else{r=c();a=r.length;for(f=0;f<a;f++){n.getMetadata(r[f]).done(p)}}function p(r){s++;u=u.concat(r.getAllProperties());if(a==s){o=t.eliminateDuplicatesInArray(i,u);e(o)}}};this.getAllParameterEntitySetKeyProperties=function(e){var r;var a;var o=0;var f;var u=[];if(s){e(s)}else{r=c();a=r.length;for(f=0;f<a;f++){n.getMetadata(r[f]).done(p)}}function p(r){o++;u=u.concat(r.getParameterEntitySetKeyPropertiesForService());if(a==o){s=t.eliminateDuplicatesInArray(i,u);e(s)}}};this.getPropertyMetadataByEntitySet=function(e,t,a){var i=jQuery.Deferred();n.getMetadata(e).done(function(e){var n=e.getPropertyMetadata(t,a);i.resolve(new r.constructor(n))});return i.promise()};this.getProperty=function(e){var t;var a;var i;var o=jQuery.Deferred();if(f[e]){o.resolve(f[e])}else{t=c();i=t.length;for(var s=0;s<i;s++){n.getMetadata(t[s]).done(function(t){a=t.getAttributes(e);if(a.name){if(t.getParameterEntitySetKeyPropertiesForService().indexOf(e)>-1){a.isParameterEntitySetKeyProperty=true}if(t.getAllKeys().indexOf(e)>-1){a.isKey=true}for(var i in a){if(i==="dataType"){for(var n in a.dataType){a[n]=a.dataType[n]}}}f[e]=new r.constructor(a);o.resolve(f[e])}})}}return o.promise()};function c(){if(typeof a==="string"){return[a]}return n.getServiceDocuments()}}e("sap.apf.core.MetadataFacade",a);return a},true);
//# sourceMappingURL=metadataFacade.js.map