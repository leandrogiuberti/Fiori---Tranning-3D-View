/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2015 SAP SE. All rights reserved
 */
sap.ui.define(["sap/apf/core/constants","sap/apf/utils/exportToGlobal","sap/apf/utils/utils","sap/ui/model/Filter","sap/base/security/encodeURL"],function(e,t,r,a,i){"use strict";var s=function(t,r,a,i,s){this.type="filterTerm";this.propertyName=r;this.operator=a;this.value=i;this.highValue=s;this.messageHandler=t;if(this.operator.length==2){this.operator=this.operator.toUpperCase()}t.check(this.operator!==undefined,"sap.apf.utils.FilterTerm.constructor operator undefined");t.check(e.aSelectOpt.includes(this.operator),"sap.apf.core.utils.FilterTerm operator "+this.operator+" not supported");t.check(this.propertyName!==undefined,"sap.apf.utils.core.FilterTerm propertyName undefined");t.check(this.value!==undefined,"sap.apf.utils.FilterTerm value undefined")};s.prototype.isConsistentWithFilter=function(t,r){var a;var i;if(t!==this.propertyName){return true}if(this.operator===e.FilterOperators.EQ){if(this.value instanceof Date&&r instanceof Date){return this.value.valueOf()===r.valueOf()}return this.value===r}else if(this.operator===e.FilterOperators.LT){if(this.value instanceof Date&&r instanceof Date){return this.value.valueOf()>r.valueOf()}return this.value>r}else if(this.operator===e.FilterOperators.LE){if(this.value instanceof Date&&r instanceof Date){return this.value.valueOf()>=r.valueOf()}return this.value>=r}else if(this.operator===e.FilterOperators.GT){if(this.value instanceof Date&&r instanceof Date){return this.value.valueOf()<r.valueOf()}return this.value<r}else if(this.operator===e.FilterOperators.BT){if(this.value instanceof Date&&r instanceof Date){return this.value.valueOf()<=r.valueOf()&&r.valueOf()<=this.highValue.valueOf()}return this.value<=r&&r<=this.highValue}else if(this.operator===e.FilterOperators.GE){if(this.value instanceof Date&&r instanceof Date){return this.value.valueOf()<=r.valueOf()}return this.value<=r}else if(this.operator===e.FilterOperators.NE){if(this.value instanceof Date&&r instanceof Date){return!(this.value.valueOf()===r.valueOf())}return!(this.value===r)}else if(this.operator===e.FilterOperators.StartsWith){if(this.value.length>r.length){return false}a=r.slice(0,this.value.length);return a===this.value}else if(this.operator===e.FilterOperators.EndsWith){if(this.value.length>r.length){return false}a=r.slice(-this.value.length);return a===this.value}else if(this.operator===e.FilterOperators.Contains){i=r.indexOf(this.value);return i>-1}};s.prototype.toUrlParam=function(t){var a="'";var s=" ";var o="";var p,h;if(t&&t.formatValue){p=t.formatValue(this.propertyName,this.value);if(this.highValue){h=t.formatValue(this.propertyName,this.highValue)}}else{if(typeof this.value==="number"){p=this.value}else{p=a+r.escapeOdata(this.value)+a}if(this.highValue){if(typeof this.value==="number"){h=this.highValue}else{h=a+r.escapeOdata(this.highValue)+a}}}if(this.operator===e.FilterOperators.StartsWith){o="startswith("+r.escapeOdata(this.propertyName)+","+p+")";o=i(o)}else if(this.operator===e.FilterOperators.EndsWith){o="endswith("+r.escapeOdata(this.propertyName)+","+p+")";o=i(o)}else if(this.operator===e.FilterOperators.Contains){o="substringof("+p+","+r.escapeOdata(this.propertyName)+")";o=i(o)}else if(this.operator===e.FilterOperators.BT){o="(("+i(r.escapeOdata(this.propertyName)+s+"ge"+s+p)+")"+i(s+"and"+s)+"("+i(r.escapeOdata(this.propertyName)+s+"le"+s+h)+"))"}else{o="("+i(r.escapeOdata(this.propertyName)+s+this.operator.toLowerCase()+s+p)+")"}return o};s.prototype.getProperty=function(){return this.propertyName};s.prototype.getOp=function(){return this.operator};s.prototype.getValue=function(){return this.value};s.prototype.getHighValue=function(){return this.highValue};s.prototype.getHash=function(){var e=this.propertyName+this.operator+this.value;if(this.highValue){e+=this.highValue}return r.hashCode(e)};s.prototype.copy=function(){return new s(this.messageHandler,this.propertyName,this.operator,this.value,this.highValue)};s.prototype.removeTermsByProperty=function(e){return this.internalRemoveTermsByProperty(e)};s.prototype.internalRemoveTermsByProperty=function(e){var t=0;var r=0;if(e instanceof Array){r=e.length;for(t=0;t<r;t++){if(this.propertyName===e[t]){return undefined}}return this.copy()}if(this.propertyName===e){return undefined}return this.copy()};s.prototype.removeTerms=function(e,t,r){var a=0;var i=0;if(e instanceof Array){i=e.length;for(a=0;a<i;a++){if(this.propertyName===e[a]&&this.operator===t&&this.value===r){return undefined}}return this.copy()}if(this.propertyName===e&&this.operator===t&&this.value===r){return undefined}return this.copy()};s.prototype.mapToSapUI5FilterExpression=function(){if(this.operator===e.FilterOperators.BT){return new a({path:this.propertyName,operator:this.operator,value1:this.value,value2:this.highValue})}return new a({path:this.propertyName,operator:this.operator,value1:this.value})};s.prototype.traverse=function(e){return e.processTerm(this)};t("sap.apf.core.utils.FilterTerm",s);return s},true);
//# sourceMappingURL=filterTerm.js.map