/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
sap.ui.define(["sap/apf/core/messageObject","sap/apf/core/utils/filter","sap/apf/core/utils/filterTerm","sap/apf/utils/utils","sap/base/security/encodeURL","sap/base/util/isPlainObject"],function(e,t,r,a,n,i){"use strict";var s={};s.getAbsolutePath=function(e){if(e.slice(-1)==="/"){return e}return e+"/"};s.getODataPath=function(e){var t=e.split("/");var r;var a=[];for(r=0;r<t.length;r++){if(t[r]!==""){a.push(t[r])}}var n="";var i=a.length-1;for(r=0;r<i;r++){n=n+"/"+a[r]}return n+"/"};s.addRelativeToAbsoluteURL=function(e,t){var r=e.split("/");var a=t.split("/");a.forEach(function(e){if(e===".."){r.pop()}else if(e!="."){r.push(e)}});return r.join("/")};s.getBaseURLOfComponent=function(e){var t=e.split(".");t.pop();var r=t.join("/");return sap.ui.require.toUrl(r)};s.getApfLocation=function(){return sap.ui.require.toUrl("sap/apf/")};s.generateOdataPath=function(e,i,s,f,u){var o=g(i,f);var l=s;var p=false;var c;for(c in o){if(!p){l+="(";p=true}else{l+=","}l+=c.toString()+"="+o[c]}if(p){l+=")/"}l+=u||"";return l;function g(){var u={};var o;var l;var p;var c;var g;o=i.getParameterEntitySetKeyProperties(s);if(o!==undefined){l=o.length}else{l=0}if(l>0){for(c=0;c<l;c++){if(f&&f instanceof t){p=f.getFilterTermsForProperty(o[c].name);g=p[p.length-1]}if(g instanceof r){v(c,g.getValue())}else if(o[c].defaultValue){v(c,o[c].defaultValue)}else if(o[c].parameter!=="optional"){e.putMessage(e.createMessageObject({code:"5016",aParameters:[o[c].name]}))}}}return u;function v(e,t){var r;if(o[e].dataType.type==="Edm.String"){r=a.formatValue(t,o[e]);u[o[e].name]=n(r)}else if(o[e].dataType.type){r=a.formatValue(t,o[e]);if(typeof r==="string"){u[o[e].name]=n(r)}else{u[o[e].name]=r}}else if(typeof t==="string"){u[o[e].name]=n(a.escapeOdata(t))}else{u[o[e].name]=t}}}};s.getSelectString=function(e){var t="";e.forEach(function(r,i){t+=n(a.escapeOdata(r));if(i<e.length-1){t+=","}});return t};s.buildUri=function(e,r,a,f,u,o,l,p,c,g,v){var d="";d+=s.generateOdataPath(e,v,r,u,g);d=d+"?";d+=m(a);d+=y(f,c);d+=h(o,a);d+=b(l);d+=O(p);return d;function m(e){if(!e[0]){return""}var t="$select=";t+=s.getSelectString(e);return t}function y(e,r){if(!(e&&e instanceof t)||e.isEmpty()){return""}var a=e.toUrlParam({formatValue:r});if(a===""||a==="()"){return""}return"&$filter="+a}function h(t,a){var s="";var f="";var u;if(!t){return""}switch(true){case Array.isArray(t):for(u=0;u<t.length;u++){f=o(t[u],a);if(s.length>0&&f.length>0){s+=","}s+=f}break;case i(t):s+=o(t,a);break;case typeof t==="string":s+=o({property:t},a);break;default:s="";break}if(s.length>0){return"&$orderby="+s}return"";function o(t,a){var i="";if(a?.includes(t.property)){i+=t.property;if(t.ascending===false){i+=" desc"}else{i+=" asc"}}else{e.putMessage(e.createMessageObject({code:"5019",aParameters:[r,t.property]}))}return n(i)}}function b(t){function a(t){var a,n;a=Object.getOwnPropertyNames(t);for(n=0;n<a.length;n++){if(a[n]!=="top"&&a[n]!=="skip"&&a[n]!=="inlineCount"){e.putMessage(e.createMessageObject({code:"5032",aParameters:[r,a[n]]}))}}}var n="";if(!t){return n}a(t);if(t.top){n+="&$top="+t.top}if(t.skip){n+="&$skip="+t.skip}if(t.inlineCount===true){n+="&$inlinecount=allpages"}return n}function O(e){if(!e){e="json"}return"&$format="+e}};return s},true);
//# sourceMappingURL=uriGenerator.js.map