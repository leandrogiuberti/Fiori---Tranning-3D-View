/*!
 * SAP APF Analysis Path Framework
 *
 * (c) Copyright 2012-2014 SAP SE. All rights reserved
 */
sap.ui.define(["sap/apf/modeler/ui/utils/textPoolHelper","sap/apf/modeler/ui/utils/nullObjectChecker","sap/apf/modeler/ui/utils/viewValidator","sap/ui/core/mvc/Controller"],function(e,t,a,i){"use strict";var n,o,r,l,g,d,s;function u(e){e.byId("idCategoryBasicData").setText(o("categoryData"));e.byId("idCategoryTitleLabel").setText(o("categoryTitle"));e.byId("idCategoryTitle").setPlaceholder(o("newCategory"));e.byId("idTotalStepsLabel").setText(o("totalSteps"))}function c(e){var a;if(n&&n.arguments&&n.arguments.categoryId){d=l.getCategory(n.arguments.categoryId)}if(!t.checkIsNotUndefined(d)){a=l.setCategory();d=l.getCategory(a);f(e)}}function f(e,t){var a={id:d.getId(),icon:"sap-icon://open-folder"};if(t){delete a.icon;a.name=t}e.getView().getViewData().updateSelectedNode(a)}function y(e,t){var a=o("category")+": "+t;e.getView().getViewData().updateTitleAndBreadCrumb(a)}function I(e){if(!t.checkIsNotNullOrUndefinedOrBlank(l.getCategory(n.arguments.categoryId))){return}if(t.checkIsNotNullOrUndefinedOrBlank(d.labelKey)&&g.get(d.labelKey)){e.byId("idCategoryTitle").setValue(g.get(d.labelKey).TextElementDescription)}else{e.byId("idCategoryTitle").setValue(d.getId())}}function T(e){var t=l.getCategoryStepAssignments(d.getId()).length;e.byId("idTotalSteps").setValue(t)}var C=i.extend("sap.apf.modeler.ui.controller.category",{onInit:function(){var e=this;var t=e.getView().getViewData();o=t.getText;n=t.oParams;r=t.oConfigurationHandler;g=r.getTextPool();l=t.oConfigurationEditor;if(!l){r.loadConfiguration(n.arguments.configId,function(e){l=e})}s=new a(e.getView());u(e);c(e);e.setDetailData();s.addField("idCategoryTitle")},onAfterRendering:function(){if(this.getView().byId("idCategoryTitle").getValue().length===0){this.getView().byId("idCategoryTitle").focus()}},setDetailData:function(){var e=this;I(e);T(e)},handleChangeDetailValue:function(a){var i=this,n;var o=i.byId("idCategoryTitle").getValue().trim();var r=e.TranslationFormatMap.CATEGORY_TITLE;if(t.checkIsNotNullOrUndefinedOrBlank(o)){g.setTextAsPromise(o,r).done(function(e){n={labelKey:e};l.setCategory(n,d.getId());f(i,o);y(i,o);l.setIsUnsaved()})}else{l.setIsUnsaved()}},handleSuggestions:function(t){var a=e.TranslationFormatMap.CATEGORY_TITLE;var i=new e.SuggestionTextHandler(g);i.manageSuggestionTexts(t,a)},updateSubViewInstancesOnReset:function(e){l=e;d=l.getCategory(d.getId())},getValidationState:function(){return s.getValidationState()},onExit:function(){s=null}});return C},true);
//# sourceMappingURL=category.controller.js.map