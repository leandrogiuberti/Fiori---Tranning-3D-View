sap.ui.define(["sap/apf/core/constants","sap/apf/modeler/ui/controller/propertyType","sap/apf/modeler/ui/utils/textManipulator","sap/apf/modeler/ui/utils/treeTableDisplayOptionsValueBuilder","sap/ui/thirdparty/jquery"],function(e,t,r,a,jQuery){"use strict";function o(e,t){var r;var a=t.oStepPropertyMetadataHandler.oStep.getService();var o=t.oStepPropertyMetadataHandler.oStep.getEntitySet();var i=t.oStepPropertyMetadataHandler.oStep.getHierarchyProperty();t.oConfigurationEditor.getHierarchyNodeIdAsPromise(a,o,i).done(function(a){r=t.oStepPropertyMetadataHandler.hasTextPropertyOfDimension(e,a)});return r}return t.extend("sap.apf.modeler.ui.controller.representationHierarchyProperty",{onBeforeRendering:function(){var e=this;e.byId("idPropertyType").setEnabled(false)},setLabelDisplayOptionTypeAsPromise:function(t){var i=jQuery.Deferred();var n,p,s,l,d=this,y=[];n=new a(d.oTextReader,t);p=e.representationMetadata.labelDisplayOptions;l=d.oRepresentation.getHierarchyPropertyLabelDisplayOption();s=n.getLabelDisplayOptions();d.oStepPropertyMetadataHandler.getEntityTypeMetadataAsPromise().done(function(e){if(l===p.TEXT&&!o(e,d)){s=n.getValidatedLabelDisplayOptions();y=r.addPrefixText([l],d.oTextReader);l=y[0]}d.byId("idLabelDisplayOptionType").setModel(s);d.byId("idLabelDisplayOptionType").setSelectedKey(l);i.resolve()});return i.promise()},changeLabelDisplayOption:function(e){var t=this;t.oRepresentation.setHierarchyPropertyLabelDisplayOption(e)},getAllPropertiesAsPromise:function(){var e=this,t,a,o=[];var i=e.oStepPropertyMetadataHandler.oStep;var n=jQuery.Deferred();i.getConsumablePropertiesForRepresentation(e.oRepresentation.getId()).done(function(i){i.available.forEach(function(t){if(t===e.oStepPropertyMetadataHandler.getHierarchicalProperty()){o.push(t)}});t=e.getSelectedProperty();if(t!==undefined){a=o.indexOf(t)!==-1?o:o.concat(t);if(i.available.indexOf(t)!==-1){o=a}else{o=o.concat(r.addPrefixText([t],e.oTextReader));t=r.addPrefixText([t],e.oTextReader)[0]}}n.resolve({aAllProperties:o,sSelectedKey:t})});return n.promise()},enableDisableLabelDisplayOptionTypeAsPromise:function(){var e,t=this;var r=jQuery.Deferred();var a=t.byId("idLabelDisplayOptionType");t.oStepPropertyMetadataHandler.getEntityTypeMetadataAsPromise().done(function(i){var n=o(i,t);for(e=0;e<a.getItems().length;e++){a.getItems()[e].setEnabled(true);if(e>0&&!n){a.getItems()[e].setEnabled(false)}}r.resolve()});return r.promise()},getPropertyTextLabelKey:function(){var e=this;return e.oRepresentation.getHierarchyPropertyTextLabelKey()},setPropertyTextLabelKey:function(e,t){var r=this;r.oRepresentation.setHierarchyPropertyTextLabelKey(t)},setNextPropertyInParentObject:function(){return},removePropertyFromParentObject:function(){return},setFocusOnAddRemoveIcons:function(){return}})});
//# sourceMappingURL=representationHierarchyProperty.controller.js.map