sap.ui.define(["sap/ui/core/Fragment","sap/ui/core/library","sap/ui/core/mvc/Controller","sap/apf/modeler/ui/utils/nullObjectChecker","sap/apf/modeler/ui/utils/viewValidator","sap/apf/modeler/ui/utils/constants","sap/apf/modeler/ui/utils/textPoolHelper"],function(t,e,i,a,n,o,r){"use strict";var d=e.ValueState;function g(t){t.byId("idConfigurationBasicData").setText(t.textReader("configurationData"));t.byId("idConfigTitleLabel").setText(t.textReader("configTitle"));t.byId("idConfigTitle").setPlaceholder(t.textReader("newConfiguration"));t.byId("idConfigurationIdLabel").setText(t.textReader("configurationId"));if(t.coreApi.showSemanticObject()){t.byId("idSemanticObjectLabel").setText(t.textReader("semanticObject"))}t.byId("idNoOfCategoriesLabel").setText(t.textReader("noOfCategories"));t.byId("idNoOfStepsLabel").setText(t.textReader("noOfSteps"));t.byId("idFilterTypeData").setText(t.textReader("filterType"));t.byId("idFilterTypeLabel").setText(t.textReader("type"));t.byId("smartFilterBar").setText(t.textReader("smartFilterBar"));t.byId("facetFilter").setText(t.textReader("configuredFilters"));t.byId("none").setText(t.textReader("noFilters"));t.byId("idAriaPropertyForFilterRadioGp").setText(t.textReader("type"))}function l(t){if(!t.configuration){return}t.byId("idNoOfCategories").setValue(t.configurationEditor.getCategories().length)}function u(t){if(!t.configuration){return}t.byId("idNoOfSteps").setValue(t.configurationEditor.getSteps().length)}function s(t){if(!t.configuration){return}t.byId("idConfigTitle").setValue(t.configuration.AnalyticalConfigurationName)}function f(t){if(!t.configuration){return}if(t.configuration.AnalyticalConfiguration.indexOf(o.configurationObjectTypes.ISNEWCONFIG)===-1){t.byId("idConfigurationId").setValue(t.configuration.AnalyticalConfiguration)}}function c(t){var e=t.applicationHandler.getApplication(t.params.arguments.appId);if(e){t.byId("idSemanticObject").setValue(e.SemanticObject)}}function p(t){var e;if(t.configuration){e=Object.keys(t.configurationEditor.getFilterOption())[0];t.byId("idFilterTypeRadioGroup").setEnabled(true);t.byId("idFilterTypeRadioGroup").setSelectedButton(t.byId(e))}}function b(t){if(t.params&&t.params.arguments&&t.params.arguments.configId){t.configuration=t.configurationHandler.getConfiguration(t.params.arguments.configId)}if(t.configuration){t.configurationEditor=t.getView().getViewData().oConfigurationEditor}}function m(t,e){var i=t.textReader("configuration")+": "+e;t.getView().getViewData().updateTitleAndBreadCrumb(i)}function I(t,e){var i=t.configurationHandler.getTextPool();var a=r.TranslationFormatMap.APPLICATION_TITLE;i.setTextAsPromise(e,a).done(function(e){t.configurationEditor.setApplicationTitle(e)})}function y(t,e,i){var a={appId:t.params.arguments.appId};var n={name:e};if(i){n.id=i;a.configId=i;t.getView().getViewData().updateSelectedNode(n,a)}else{t.getView().getViewData().updateSelectedNode(n)}}function C(t){var e={};var i=t.byId("idFilterTypeRadioGroup").getSelectedButton().getCustomData()[0].getValue();e[i]=true;t.configurationEditor.setFilterOption(e);t.configurationEditor.setIsUnsaved()}return i.extend("sap.apf.modeler.ui.controller.configuration",{onInit:function(){var t=this;var e=t.getView().getViewData();t.applicationHandler=e.oApplicationHandler;t.configurationHandler=e.oConfigurationHandler;t.textReader=e.getText;t.params=e.oParams;this.coreApi=e.oCoreApi;this.viewValidatorForConfig=new n(t.getView());g(t);if(!this.coreApi.showSemanticObject()){t.byId("idSemanticObjectLabel").setVisible(false);t.byId("idSemanticObject").setVisible(false)}b(t);t.setDetailData();this.viewValidatorForConfig.addField("idConfigTitle")},onAfterRendering:function(){var t=this;if(t.getView().byId("idConfigTitle").getValue().length===0){t.getView().byId("idConfigTitle").focus()}},setDetailData:function(){var t=this;c(t);f(t);s(t);l(t);u(t);p(t)},updateSubViewInstancesOnReset:function(t){this.configurationEditor=t},handleChangeDetailValue:function(){var t=this;var e=t.byId("idConfigTitle").getValue().trim();var i;if(a.checkIsNotNullOrUndefinedOrBlank(e)){i={AnalyticalConfigurationName:e};if(t.params&&t.params.arguments&&t.params.arguments.configId&&t.params.arguments.configId.indexOf("newConfig")===-1){t.configurationHandler.setConfiguration(i,t.params.arguments.configId);y(t,e)}else{var n=t.configurationHandler.setConfiguration(i);t.configuration=t.configurationHandler.getConfiguration(n);if(!t.configurationEditor){t.configurationHandler.loadConfiguration(n,function(e){t.configurationEditor=e})}y(t,e,n)}I(t,e);m(t,e);t.configuration=i}t.configurationEditor.setIsUnsaved()},handleChangeForFilterType:function(){var e=this,i;if(!e.configurationEditor.isDataLostByFilterOptionChange()){C(e);e.getView().getViewData().updateTree()}else{t.load({id:"idFilterOptionChangeFragment",type:"XML",name:"sap.apf.modeler.ui.fragment.dialogWithTwoButtons",controller:e}).then(a=>{i=a;i.setState(d.Warning);i.setTitle(e.textReader("warning"));t.byId("idFilterOptionChangeFragment","idLabelForDialog").setText(e.textReader("filterOptionChangeMessage"));t.byId("idFilterOptionChangeFragment","idBeginButtonForDialog").setText(e.textReader("continue"));t.byId("idFilterOptionChangeFragment","idEndButtonForDialog").setText(e.textReader("cancel"));i.open()})}},handleBeginButtonDialogWithTwoButtons:function(){var e=this;C(e);e.getView().getViewData().updateTree();t.byId("idFilterOptionChangeFragment","idDialogWithTwoButtons").destroy()},handleCancel:function(){var e=this;p(e);t.byId("idFilterOptionChangeFragment","idDialogWithTwoButtons").destroy()},getValidationState:function(){return this.viewValidatorForConfig.getValidationState()}})},true);
//# sourceMappingURL=configuration.controller.js.map