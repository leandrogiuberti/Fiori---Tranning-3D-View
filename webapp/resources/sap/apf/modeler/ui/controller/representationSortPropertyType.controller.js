/*!
 * SAP APF Analysis Path Framework
 *
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
sap.ui.define(["sap/apf/modeler/ui/controller/sortPropertyType","sap/apf/modeler/ui/utils/constants","sap/apf/modeler/ui/utils/textManipulator","sap/ui/thirdparty/jquery"],function(e,t,r,jQuery){"use strict";var o=e.extend("sap.apf.modeler.ui.controller.representationSortPropertyType",{onBeforeRendering:function(){var e=this;e.byId("idGridSortLabel").setSpan("L2 M2 S2");e.byId("idGridSortProperty").setSpan("L4 M4 S4");e.byId("idGridSortDirectionLabel").setSpan("L2 M2 S2");e.byId("idGridSortDirection").setSpan("L3 M3 S2");e.byId("idGridIconLayout").setSpan("L1 M1 S1")},disableView:function(){var e=this;if(e.oStepPropertyMetadataHandler.oStep.getTopN()){e.byId("idSortProperty").setEnabled(false);e.byId("idSortDirection").setEnabled(false);e.byId("idAddPropertyIcon").setVisible(false);e.byId("idRemovePropertyIcon").setVisible(false)}},getAllPropertiesAsPromise:function(){var e=this,t,o,i;var n=jQuery.Deferred();e.oStepPropertyMetadataHandler.oStep.getConsumableSortPropertiesForRepresentation(e.oParentObject.getId()).done(function(a){t=a.consumable;o=e.getSelectedSortProperty();if(o!==e.oTextReader("none")&&o!==undefined){i=t.indexOf(o)!==-1?t:t.concat(o);t=a.available.indexOf(o)!==-1?i:t.concat(r.addPrefixText([o],e.oTextReader));o=a.available.indexOf(o)!==-1?o:r.addPrefixText([o],e.oTextReader)[0]}t.splice(0,0,e.oTextReader("none"));n.resolve({aAllProperties:t,sSelectedKey:o})});return n.promise()},updateOfConfigurationObjectOfSubclass:function(e){var t=this;t.oParentObject.removeAllOrderbySpecs();e.forEach(function(e){t.oParentObject.addOrderbySpec(e.property,e.ascending)})},getOrderBy:function(){var e=this;return e.oParentObject.getOrderbySpecifications()},setNextPropertyInParentObject:function(){var e=this;e.updateOfConfigurationObject();e.byId("idSortDirection").setSelectedKey("true")},removePropertyFromParentObject:function(){var e=this;e.oParentObject.removeOrderbySpec(r.removePrefixText(e.byId("idSortProperty").getSelectedKey(),e.oTextReader(t.texts.NOTAVAILABLE)))},addPropertyAsPromise:function(){var e=this;var r=jQuery.Deferred();var o=t.events;e.oStepPropertyMetadataHandler.oStep.getConsumableSortPropertiesForRepresentation(e.oParentObject.getId()).done(function(t){e.getView().fireEvent(o.ADDPROPERTY,{oSourceView:e.getView(),sProperty:t.consumable[0],sContext:e.getView().getViewData().oPropertyTypeData.sContext});e.oConfigurationEditor.setIsUnsaved();r.resolve()});return r.promise()}});return o},true);
//# sourceMappingURL=representationSortPropertyType.controller.js.map