sap.ui.define(["sap/apf/modeler/ui/controller/propertyType","sap/apf/modeler/ui/utils/constants","sap/apf/modeler/ui/utils/textManipulator","sap/apf/utils/utils","sap/ui/thirdparty/jquery"],function(e,t,r,o,jQuery){"use strict";return e.extend("sap.apf.modeler.ui.controller.representationProperty",{onBeforeRendering:function(){var e=this;if(e.byId("idLabelDisplayOptionType")){e.byId("idLabelDisplayOptionType").destroy()}e.byId("idPropertyTypeLayout").setSpan("L4 M4 S4")},getAllPropertiesAsPromise:function(){var e=this,t,o,n=[];var a=e.oStepPropertyMetadataHandler.oStep;var i=jQuery.Deferred();a.getConsumablePropertiesForRepresentation(e.oRepresentation.getId()).done(function(a){a.consumable.forEach(function(t){e.oStepPropertyMetadataHandler.getProperties().forEach(function(e){if(t===e){n.push(t)}})});t=e.getSelectedProperty();if(t!==e.oTextReader("none")&&t!==undefined){o=n.indexOf(t)!==-1?n:n.concat(t);if(a.available.indexOf(t)!==-1||t===e.oTextReader("none")){n=o}else{n=n.concat(r.addPrefixText([t],e.oTextReader));t=r.addPrefixText([t],e.oTextReader)[0]}}if(e.oStepPropertyMetadataHandler.getStepType()==="hierarchicalStep"){n.splice(0,0,e.oTextReader("none"))}i.resolve({aAllProperties:n,sSelectedKey:t})});return i.promise()},getPropertyTextLabelKey:function(e){var t=this;return t.oRepresentation.getPropertyTextLabelKey(e)},updatePropertiesInConfiguration:function(e){var t=this;t.oRepresentation.getProperties().forEach(function(e){t.oRepresentation.removeProperty(e)});e.forEach(function(e){t.oRepresentation.addProperty(e.sProperty);t.oRepresentation.setPropertyKind(e.sProperty,e.sKind);t.oRepresentation.setPropertyTextLabelKey(e.sProperty,e.sTextLabelKey)})},createNewPropertyInfoAsPromise:function(e){var t=this,r={};r.sProperty=e;r.sKind=t.getView().getViewData().oPropertyTypeData.sContext;r.sTextLabelKey=undefined;return o.createPromise(r)},setPropertyTextLabelKey:function(e,t){var r=this;r.oRepresentation.setPropertyTextLabelKey(e,t)},setNextPropertyInParentObject:function(){var e=this;e.updateOfConfigurationObjectAsPromise().then(function(){e.setDetailData()})},removePropertyFromParentObject:function(){var e=this;e.oRepresentation.removeProperty(r.removePrefixText(e.byId("idPropertyType").getSelectedKey(),e.oTextReader(t.texts.NOTAVAILABLE)))},addPropertyAsPromise:function(){var e=this,r=[];var o=e.oStepPropertyMetadataHandler.oStep;var n=t;o.getConsumablePropertiesForRepresentation(e.oRepresentation.getId()).done(function(t){t.consumable.forEach(function(t){e.oStepPropertyMetadataHandler.getProperties().forEach(function(e){if(t===e){r.push(t)}})});e.getView().fireEvent(n.events.ADDPROPERTY,{sProperty:r[0],sContext:e.getView().getViewData().oPropertyTypeData.sContext});e.oConfigurationEditor.setIsUnsaved()})}})});
//# sourceMappingURL=representationProperty.controller.js.map