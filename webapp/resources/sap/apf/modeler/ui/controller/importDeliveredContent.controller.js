sap.ui.define(["sap/apf/modeler/ui/controller/overwriteExistingConfiguration","sap/apf/modeler/ui/utils/nullObjectChecker","sap/apf/modeler/ui/utils/optionsValueModelBuilder","sap/ui/core/CustomData","sap/ui/core/Fragment","sap/ui/core/library","sap/ui/thirdparty/jquery"],function(e,t,i,o,n,a,jQuery){"use strict";var r=a.ValueState;var l,d,p;function f(e){var t=l.getText;e.byId("idImportDeliveredContentDialog").setTitle(t("importDeliveredContent"));e.byId("idConfigLabel").setText(t("configuration"));e.byId("idAppConfigCombobox").setPlaceholder(t("configFileInputPlaceHolder"));e.byId("idImportOfConfig").setText(t("import"));e.byId("idCancelImportOfConfig").setText(t("cancel"))}function s(e){var t,o,n;o=l.readAllConfigurationsFromVendorLayer();o.then(function(o){n={applicationText:l.getText("application"),configurationText:l.getText("configuration")};o=[n].concat(o);t=i.prepareModel(o);var a=e.byId("idAppConfigCombobox");a.setModel(t);a.getItems()[0].setEnabled(false);e.byId("idImportDeliveredContentDialog").open()})}async function c(e,t,i,a){var r=new o({value:{callbackOverwrite:t,callbackCreateNew:i}});p=await n.load({type:"XML",id:"idOverwriteConfirmationFragment",name:"sap.apf.modeler.ui.fragment.overwriteConfirmation",controller:e});e.getView().addDependent(p);e.setOverwriteConfirmationDialogText(l.getText);p.removeAllCustomData();p.addCustomData(r);n.byId("idOverwriteConfirmationFragment","idNewConfigTitleInput").setValue(a);p.open()}function u(e){var t=e.byId("idImportDeliveredContentDialog");if(p&&p.isOpen()){e.handleCancelOfOverwriteDialog()}if(t&&t.isOpen()){e.handleCancelOfImportDialog()}}function g(e,i,o){var n=this;if(!t.checkIsNotUndefined(o)){d.fireEvent("updateAppListEvent");var a=l.createMessageObject({code:"11515"});l.putMessage(a)}else{var a=l.createMessageObject({code:"11502"});a.setPrevious(o);l.putMessage(a)}u(n)}return e.extend("sap.apf.modeler.ui.controller.importDeliveredContent",{onInit:function(){var e=this;l=e.getView().getViewData().oCoreApi;d=e.getView().getViewData().oParentControl;f(e);s(e)},handleChangeOfAppConfigTextField:function(){var e=this,t,i;i=e.byId("idAppConfigCombobox");t=i.getItems().filter(function(e){return e.getText()===i.getValue()});if(!t.length){jQuery(i).focus();jQuery(".appCofigCombo").find("input").focus();i.setValueState(r.Error)}},handleSelectionChangeOfAppConfigTextField:function(){var e=this;e.byId("idAppConfigCombobox").setValueState(r.None)},handleImportPress:function(){var e=this;var i=e.byId("idAppConfigCombobox");e.handleChangeOfAppConfigTextField();if(t.checkIsNotNullOrUndefinedOrBlank(i.getSelectedItem())){var o=i.getSelectedItem().data("value").split(".");var n=o[0];var a=o[1];l.importConfigurationFromVendorLayer(n,a,function(t,i,o){c(e,t,i,o)},g.bind(e))}},handleCancelOfImportDialog:function(){var e=this;e.getView().destroy()}})});
//# sourceMappingURL=importDeliveredContent.controller.js.map