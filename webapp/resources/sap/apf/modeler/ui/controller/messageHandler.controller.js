/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
sap.ui.define(["sap/apf/core/constants","sap/m/Button","sap/m/Dialog","sap/m/library","sap/m/Link","sap/m/Text","sap/m/VBox","sap/m/MessageBox","sap/m/MessageToast","sap/ui/core/HTML","sap/ui/core/library","sap/ui/core/mvc/Controller","sap/ui/thirdparty/jquery","sap/base/security/encodeXML","sap/base/Log","sap/ui/Device"],function(e,t,s,a,i,n,o,r,c,g,l,p,jQuery,u,d,f){"use strict";var w=a.DialogType,m=a.FlexAlignItems,v=l.ValueState;var y;function x(e){var t=e.getMessage();while(e.getPrevious()){e=e.getPrevious();t=t+"\n"+e.getMessage()}return t}function h(e,t){var s=e.getView().getViewData();var a=s.getGenericExit("closeFatalErrorDialog");if(a){a(s,e,t)}else{window.history.go(-1)}}function M(e){r.error(e.getMessage(),{styleClass:f.system.desktop?"sapUiSizeCompact":""})}function b(e){r.information(e.getMessage(),{styleClass:f.system.desktop?"sapUiSizeCompact":""})}function C(e){c.show(e.getMessage(),{width:"20em"})}function D(e,a){var i=new s(e.createId("idShowDetailsDialog"),{contentWidth:jQuery(window).height()*.6+"px",contentHeight:jQuery(window).height()*.6+"px",title:y.getText("error"),type:w.Message,state:v.Error,content:new g({content:["<div><p> "+u(x(a))+"</p></div>"].join(""),sanitizeContent:true}),beginButton:new t({text:y.getText("close"),press:function(){i.close()}}),afterClose:function(){i.destroy()}}).addStyleClass("dialogContentPadding");i.setInitialFocus(i);i.open()}function T(e,a){var r=new s(e.createId("idFatalDialog"),{title:y.getText("error"),type:w.Message,state:v.Error,content:[new n({text:y.getText("fatalErrorMessage")}),new o({alignItems:m.End,items:[new i({text:y.getText("showDetailsLink"),press:function(){D(e,a)}})]})],beginButton:new t({text:y.getText("close"),press:function(){h(e,r)}}),afterClose:function(){r.destroy()}});r.setInitialFocus(r);r.open()}var k=p.extend("sap.apf.modeler.ui.controller.messageHandler",{onInit:function(){y=this.getView().getViewData()},showMessage:function(t){var s=this;var a=t.getSeverity();var i=e.message.severity;switch(a){case i.fatal:T(s,t);break;case i.error:M(t);break;case i.success:C(t);break;case i.information:b(t);break;default:d.error("Error type not defined");break}}});return k},true);
//# sourceMappingURL=messageHandler.controller.js.map