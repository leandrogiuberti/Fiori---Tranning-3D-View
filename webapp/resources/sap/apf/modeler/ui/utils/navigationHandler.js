/*!
 * SAP APF Analysis Path Framework
 *
 * (c) Copyright 2012-2014 SAP SE. All rights reserved
 */
sap.ui.define(["sap/apf/utils/exportToGlobal","sap/m/Text","sap/ui/core/Fragment"],function(a,i,o){"use strict";var n,t={};var e=function(a){a.close()};var r=function(){var a=this.configListInstance;var i=this.callback;var o=function(i){a.configEditor.save(function(o,n,t){a.configId=o;a.configurationHandler.memorizeConfiguration(o);if(t===undefined){if(typeof i==="function"){i()}var e=a.oCoreApi.createMessageObject({code:"11513"});a.oCoreApi.putMessage(e)}else{var e=a.oCoreApi.createMessageObject({code:"11514"});a.oCoreApi.putMessage(e)}})};e(t.oConfirmNavigationDialog);if(typeof i.yes==="function"){i.yes(o)}};var l=function(){var a=this.configListInstance;var i=this.callback;e(t.oConfirmNavigationDialog);a.configurationHandler.resetConfiguration(a.configId);if(typeof i.no==="function"){i.no()}};var g=function(){var a=this.isValidationCheck;var i=this.callback;if(!a){e(t.oConfirmNavigationDialog)}else{e(t.oConfirmValidationDialog)}if(typeof i.cancel==="function"){i.cancel()}else if(typeof i.no==="function"&&a){i.no()}};var d=function(a,i){if(i==="naviagtionDialog"){o.byId("idMessageDialogFragment","idMessageDialog").setTitle(a.getText("warning"));o.byId("idMessageDialogFragment","idYesButton").setText(a.getText("yes"));o.byId("idMessageDialogFragment","idNoButton").setText(a.getText("no"));o.byId("idMessageDialogFragment","idCancelButton").setText(a.getText("cancel"))}else if(i==="validationDialog"){o.byId("idMandatoryValidationDialogFragement","idMandatoryValidationDialog").setTitle(a.getText("warning"));o.byId("idMandatoryValidationDialogFragement","idYesButton").setText(a.getText("yes"));o.byId("idMandatoryValidationDialogFragement","idNoButton").setText(a.getText("no"))}};var s=async function(a,n,e){var s=a.oCoreApi;var f=s.getText("unsavedConfiguration");var c=Object.keys(n)[0];var v={handleNavigationWithSave:r,handleNavigationWithoutSave:l,handlePreventNavigation:g,configListInstance:a,callback:e};v[c]=n[c];t.oConfirmNavigationDialog=await o.load({type:"XML",id:"idMessageDialogFragment",name:"sap.apf.modeler.ui.fragment.unsavedDataConfirmationDialog",controller:v});a.getView().addDependent(t.oConfirmNavigationDialog);d(s,"naviagtionDialog");var u=new i;u.setText(f);t.oConfirmNavigationDialog.removeAllContent();t.oConfirmNavigationDialog.addContent(u);t.oConfirmNavigationDialog.attachAfterClose(function(){t.oConfirmNavigationDialog.destroy()});t.oConfirmNavigationDialog.open()};var f=function(a,i){s(a,{isSwitchConfiguration:true},i)};var c=function(){var a=this.callback;e(t.oConfirmValidationDialog);if(typeof a.yes==="function"){a.yes()}};var v=async function(a,n,e){var r=a.oCoreApi;var l=r.getText("mandatoryField");var s=Object.keys(n)[0];var f={handleValidationNavigation:c,handlePreventNavigation:g,configListInstance:a,callback:e};f[s]=n[s];t.oConfirmValidationDialog=await o.load({type:"XML",id:"idMandatoryValidationDialogFragement",name:"sap.apf.modeler.ui.fragment.mandatoryDialog",controller:f});a.getView().addDependent(t.oConfirmValidationDialog);d(r,"validationDialog");var v=new i;v.setText(l);t.oConfirmValidationDialog.removeAllContent();t.oConfirmValidationDialog.addContent(v);t.oConfirmValidationDialog.attachAfterClose(function(){t.oConfirmValidationDialog.destroy()});t.oConfirmValidationDialog.open()};var u=function(a,i){v(a,{isValidationCheck:true},i)};var m=function(){return{throwLossOfDataPopup:f,throwMandatoryPopup:u}};var D={getInstance:function(){return n||(n=m())}};a("sap.apf.modeler.ui.utils.navigationHandler",D);return D});
//# sourceMappingURL=navigationHandler.js.map