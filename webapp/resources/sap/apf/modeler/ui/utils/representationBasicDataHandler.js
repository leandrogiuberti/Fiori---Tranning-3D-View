/*!
 * SAP APF Analysis Path Framework
 *
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
sap.ui.define(["sap/apf/modeler/ui/utils/constants","sap/apf/modeler/ui/utils/propertyTypeOrchestration","sap/ui/core/mvc/View","sap/ui/core/mvc/ViewType"],function(e,t,r,o){"use strict";function n(e,t,r,o){this.oRepresentationView=e;this.oRepresentation=r.oRepresentation;this.oStepPropertyMetadataHandler=t;this.oRepresentationTypeHandler=r.oRepresentationTypeHandler;this.oRepresentationHandler=r;this.nCounter=0;this.oViewValidator=o;this.propertyTypeHandlerPromises=[]}n.prototype._prepareCommonView=function(t,n,a,i){var p={},s={};if(a.length===0){return}s.oConfigurationEditor=t.oRepresentationView.getViewData().oConfigurationEditor;s.oParentObject=t.oRepresentation;s.oCoreApi=t.oRepresentationView.getViewData().oCoreApi;s.oConfigurationHandler=t.oRepresentationView.getViewData().oConfigurationHandler;s.oRepresentationTypeHandler=t.oRepresentationTypeHandler;s.oRepresentationHandler=t.oRepresentationHandler;s.oStepPropertyMetadataHandler=t.oStepPropertyMetadataHandler;s.sPropertyType=n;s.oBasicDataLayout=t.oRepresentationView.getController().byId("idBasicDataLayout");s.oTextPool=t.oRepresentationView.getViewData().oConfigurationHandler.getTextPool();s.oViewValidator=t.oViewValidator;p.oViewDataForPropertyType=s;p.aPropertiesToBeCreated=a;p.oPropertyOrchestration=i;const l=r.create({viewName:"sap.apf.modeler.ui.view.propertyTypeHandler",type:o.XML,id:t.oRepresentationView.getController().createId("id"+n),viewData:p}).then(r=>{t.oRepresentationView.getController().byId("idBasicDataLayout").insertItem(r,t.nCounter);t.oRepresentationView.attachEvent(e.events.REMOVEALLPROPERTIESFROMPARENTOBJECT,r.getController().handleRemoveOfProperty.bind(r.getController()));return r.getController().initPromise});t.propertyTypeHandlerPromises.push(l);t.nCounter++};function a(t,r){t._prepareCommonView(t,e.propertyTypes.DIMENSION,t.oRepresentationHandler.getActualDimensions(),r)}function i(t,r){t._prepareCommonView(t,e.propertyTypes.LEGEND,t.oRepresentationHandler.getActualLegends(),r)}function p(t,r){t._prepareCommonView(t,e.propertyTypes.MEASURE,t.oRepresentationHandler.getActualMeasures(),r)}function s(t,r){t._prepareCommonView(t,e.propertyTypes.PROPERTY,t.oRepresentationHandler.getActualProperties(),r)}function l(t,r){t._prepareCommonView(t,e.propertyTypes.HIERARCHIALCOLUMN,t.oRepresentationHandler.getHierarchicalProperty(),r)}n.prototype.instantiateBasicDataAsPromise=function(){var r=this;var o=r.oRepresentation.getId();var n=jQuery.Deferred();this.propertyTypeHandlerPromises.push(n);return t.getConsumableAndAvailablePropertiesAsPromise(o,e.aggregationRoles.DIMENSION,r.oStepPropertyMetadataHandler).then(function(y){t.getConsumableAndAvailablePropertiesAsPromise(o,e.aggregationRoles.MEASURE,r.oStepPropertyMetadataHandler).then(function(e){var o;var y;var d;r.destroyBasicData();if(r.oRepresentation.getRepresentationType()==="TreeTableRepresentation"){d=new t.PropertyTypeOrchestration;l(r,d);s(r,d)}else if(r.oRepresentation.getRepresentationType()==="TableRepresentation"){d=new t.PropertyTypeOrchestration;s(r,d)}else{y=new t.PropertyTypeOrchestration;a(r,y);i(r,y);o=new t.PropertyTypeOrchestration;p(r,o)}n.resolve()})}).then(()=>jQuery.when(...this.propertyTypeHandlerPromises))};n.prototype.destroyBasicData=function(){this.oViewValidator.clearFields();this.nCounter=0;this.oRepresentationView.getController().byId("idBasicDataLayout").destroyItems()};return n});
//# sourceMappingURL=representationBasicDataHandler.js.map