/*!
 * SAP APF Analysis Path Framework
 *
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
sap.ui.define(["sap/apf/modeler/ui/utils/constants","sap/apf/utils/exportToGlobal"],function(e,t){"use strict";var r=function(e,t){this.oCoreApi=e;this.oStep=t};function o(e,t,r){var o=[],i;var a=t.oStep.getSelectProperties();a.forEach(function(a){if(t.getPropertyMetadata(e,a)){i=t.getPropertyMetadata(e,a)["aggregation-role"];if(i===r){o.push(a)}}});return o}r.prototype.getEntityTypeMetadataAsPromise=function(){var e=this.oStep.getService();var t=this.oStep.getEntitySet();return this.oCoreApi.getEntityTypeMetadataAsPromise(e,t)};r.prototype.getFilterMappingEntityTypeMetadataAsPromise=function(e,t){return this.oCoreApi.getEntityTypeMetadataAsPromise(e,t)};r.prototype.getDimensionsProperties=function(t){return o(t,this,e.aggregationRoles.DIMENSION)};r.prototype.getMeasures=function(t){return o(t,this,e.aggregationRoles.MEASURE)};r.prototype.getProperties=function(){return this.oStep.getSelectProperties()};r.prototype.getHierarchicalProperty=function(){return this.oStep.getHierarchyProperty()};r.prototype.getPropertyMetadata=function(e,t){if(!e){return undefined}return e.getPropertyMetadata(t)};r.prototype.getDefaultLabel=function(e,t){var r=this;var o=r.getPropertyMetadata(e,t);if(!o){return""}return o.label||o.name};r.prototype.hasTextPropertyOfDimension=function(e,t){var r=false,o,i=this;var a=i.getPropertyMetadata(e,t);if(!a){return r}if(a.text){o=this.oStep.getSelectProperties();r=o.indexOf(a.text)===-1?false:true}return r};r.prototype.getRepresentationTypesArray=function(){var e=[],t=this;if(t.oStep.getType()==="hierarchicalStep"){e.push({key:"TreeTableRepresentation",name:t.oCoreApi.getText("TreeTableRepresentation")})}else{t.oCoreApi.getRepresentationTypes().forEach(function(r){if(r.metadata){if(r.id!=="TreeTableRepresentation"){e.push({key:r.id,name:t.oCoreApi.getText(r.label.key)})}}})}return e};r.prototype.getStepType=function(){return this.oStep.getType()};t("sap.apf.modeler.ui.utils.StepPropertyMetadataHandler",r);return r},true);
//# sourceMappingURL=stepPropertyMetadataHandler.js.map