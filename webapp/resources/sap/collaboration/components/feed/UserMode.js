/*
* ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
*/
sap.ui.define(["./Mode"],function(e){"use strict";var t=e.extend("sap.collaboration.components.feed.UserMode",{constructor:function(t){e.apply(this,[t]);this.groupSelectorLoaded.then(e=>{this._oList.setModel(this._oJamModel)})}});t.prototype.start=function(){this.groupSelectorLoaded.then(e=>{this._oList.attachUpdateFinished(this.onGroupSelectorUpdateFinished,this);this._oList.attachUpdateFinished(this.onUpdateFinished,this);this._oListItemTemplate.then(e=>{this._oList.bindItems({path:"/Groups",template:e})});this._oFeedController.enableGroupFeed()})};t.prototype.stop=function(){this.groupSelectorLoaded.then(e=>{this._oList.detachUpdateFinished(this.onUpdateFinished,this)})};t.prototype._updateSelectedGroupInViewDataModel=function(e){this._oViewDataModel.setProperty("/groupSelected",{Id:e.Id,Name:e.Name,WebURL:e.WebURL});this._oViewDataModel.setProperty("/feedEndpoint","/Groups('"+e.Id+"')/FeedEntries")};t.prototype.getAddPostPath=function(){return"/Groups('"+this._oViewDataModel.getProperty("/groupSelected/Id")+"')/FeedEntries"};t.prototype.displayFeedSourceSelectorPopover=function(e){this.groupSelectorLoaded.then(t=>{this._oList.setBusy(true);this._oJamModel.refresh(true);this._oGroupSelectPopover.openBy(e)})};t.prototype.onGroupSelected=function(e){this.groupSelectorLoaded.then(t=>{var o=e.getSource().getSelectedItem().getBindingContext().getObject();this._updateSelectedGroupInViewDataModel(o);this._oGroupSelectPopover.close()})};t.prototype.onBatchCompleted=function(){};t.prototype.onGroupSelectorUpdateFinished=function(){this.groupSelectorLoaded.then(e=>{var t=this._oList.getItems();var o;var i;if(t.length>0){o=t[0];this._oList.setSelectedItem(o);i=o.getBindingContext().getObject();this._updateSelectedGroupInViewDataModel(i)}this._oList.detachUpdateFinished(this.onGroupSelectorUpdateFinished,this)})};t.prototype.onUpdateFinished=function(){this.groupSelectorLoaded.then(e=>{this._oList.setBusy(false)})};return t});
//# sourceMappingURL=UserMode.js.map