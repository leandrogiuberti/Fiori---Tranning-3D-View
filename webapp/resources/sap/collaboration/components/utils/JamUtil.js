/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/ui/base/Object","sap/ui/dom/includeScript","sap/collaboration/library"],function(e,t,a,o){"use strict";var r=o.FeedType;var i=t.extend("sap.collaboration.components.utils.JamUtil",{FeedRenderedControllerConstants:{jamWidgetCSS:{avatar:false,skin:"gr",post_mode:"inline",reply_mode:"inline",mobile_mode:true,live_update:true}},JamFeedType:{Follows:"follows",Company:"company",Group:"group",ObjectGroup:"context",Object:"external"},JamCallback:{autocomplete:"autocomplete",post_status:"post_status",link:"link"},JamEventType:{mouseover:"mouseover",mouseout:"mouseout",click:"click"},loadFeedWidgetScript:function(t,o,r){var i=t+"/assets/feed_widget_v1.js";a(i,"sap.collaboration.feed.JamFeedWidget",o,r);e.info("Jam Feed Widget Script Loading Asynchronously","sap.collaboration.components.utils.JamUtil.loadFeedWidgetScript()")},initializeJamWidget:function(t){try{this.sapjam="sapjam";this.sapjam.feedWidget.init(t+"/widget/v1/feed","single_use_token");e.info("Jam Feed Widget Initialized","sap.collaboration.components.utils.JamUtil.initializeJamWidget()")}catch(t){e.error(t,"","sap.collaboration.components.utils.JamUtil.initializeJamWidget()");throw t}},createJamWidget:function(t,a){try{e.debug("Jam Feed Widget Properties:","","sap.collaboration.components.utils.JamUtil.createJamWidget()");e.debug("type: "+JSON.stringify(a.type));e.debug("group_id: "+JSON.stringify(a.group_id));e.debug("external_id: "+JSON.stringify(a.external_id));e.debug("external_type: "+JSON.stringify(a.external_type));e.debug("external_object: "+JSON.stringify(a.external_object));this.sapjam="sapjam";this.sapjam.feedWidget.create(t,a)}catch(t){e.error(t,"","sap.collaboration.components.utils.JamUtil.createJamWidget()");throw t}},prepareWidgetData:function(t,a,o,i){var n;n={type:a,avatar:this.FeedRenderedControllerConstants.jamWidgetCSS.avatar,live_update:this.FeedRenderedControllerConstants.jamWidgetCSS.live_update,post_mode:this.FeedRenderedControllerConstants.jamWidgetCSS.post_mode,reply_mode:this.FeedRenderedControllerConstants.jamWidgetCSS.reply_mode,mobile_mode:this.FeedRenderedControllerConstants.jamWidgetCSS.mobile_mode,hide_bookmark:true,single_use_token:t};switch(a){case r.follows:case r.company:n.type=a;break;case r.group:case r.objectGroup:n.type=this.JamFeedType.Group;n.group_id=o;break;case r.object:n.type=this.JamFeedType.Object;if(!i){var s=new Error("Object is undefined");e.error(s,"","sap.collaboration.components.utils.JamUtil.prepareWidgetData()");throw s}if(!i.id){var d=new Error("Property 'id' is undefined");e.error(d,"","sap.collaboration.components.utils.JamUtil.prepareWidgetData()");throw d}if(!i.type){var l=new Error("Property 'type' is undefined");e.error(l,"","sap.collaboration.components.utils.JamUtil.prepareWidgetData()");throw l}try{n.external_id=i.id;n.external_type=i.type;n.external_object=i}catch(t){e.error(t,"","sap.collaboration.components.utils.JamUtil.prepareWidgetData()");throw t}break;default:var p="Feed Type not supported";e.error(p,"","sap.collaboration.components.utils.JamUtil.prepareWidgetData()");throw new Error(p)}return n},getJamSinglelUseTokens:function(e,t,a,o){var r=new window.XMLHttpRequest;var i=e+"/single_use_tokens";r.open("POST",i,a);r.onreadystatechange=t;r.setRequestHeader("x-csrf-token",o);r.send()},getCSRFToken:function(e,t,a){var o=new window.XMLHttpRequest;o.open("GET",e,a);o.onreadystatechange=t;o.setRequestHeader("x-csrf-token","fetch");o.send()}});return i});
//# sourceMappingURL=JamUtil.js.map