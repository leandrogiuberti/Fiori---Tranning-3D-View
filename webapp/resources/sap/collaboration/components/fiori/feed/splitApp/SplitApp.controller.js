/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/ui/core/mvc/Controller","sap/collaboration/components/utils/OdataUtil","sap/ui/core/mvc/View","sap/ui/core/library"],function(e,t,i,a,s){"use strict";var o=s.mvc.ViewType;return t.extend("sap.collaboration.components.fiori.feed.splitApp.SplitApp",{onInit:function(){this.oSplitApp=this.getView().oSplitApp;this.sAppType=this.getView().getViewData().appType;this.oOdataModel=this.getView().getViewData().odataModel;this.oBusinessObject=this.getView().getViewData().object;this.oLangBundle=this.getView().getViewData().langBundle;this.sPrefixId=this.getView().getViewData().controlId;this.oEventBus=sap.ui.getCore().getEventBus();this.oEventBus.subscribe("nav","to",this.navToHandler,this);this.oEventBus.subscribe("nav","back",this.navBackHandler,this)},onBeforeRendering:function(){},createMasterDetail:function(){var e=new i;var t=e.getJamUrl(this.oOdataModel);this.sJamToken=e.getJamToken(this.oOdataModel);a.create({id:this.sPrefixId+"masterView",viewData:{controlId:this.sPrefixId,jamToken:this.sJamToken,langBundle:this.oLangBundle,object:this.oBusinessObject},viewName:"module:sap/collaboration/components/fiori/feed/splitApp/FeedTypeMasterView"}).then(e=>{this.oSplitApp.addMasterPage(e);this.oSplitApp.setInitialMaster(e)});a.create({id:this.sPrefixId+"detailView",viewData:{controlId:this.sPrefixId,appType:this.sAppType,jamURL:t,jamToken:this.sJamToken,langBundle:this.oLangBundle,object:this.oBusinessObject},viewName:"module:sap/collaboration/components/fiori/feed/commons/DetailView"}).then(e=>{this.oSplitApp.addMasterPage(e);this.oSplitApp.setInitialMaster(e)})},navToHandler:function(t,i,s){if(s&&s.viewId===this.sPrefixId+"groupMasterView"){if(!sap.ui.getCore().byId(s.viewId)){a.create({id:s.viewId,viewData:{controlId:this.sPrefixId,odataModel:this.oOdataModel,object:this.oBusinessObject,feedType:s.data.feedType,pageTitle:s.data.groupMasterPageTitle,jamToken:this.sJamToken,langBundle:this.oLangBundle},viewName:s.viewName}).then(e=>{this.oSplitApp.addMasterPage(e)})}else{sap.ui.getCore().byId(s.viewId).getController().sFeedType=s.data.feedType;sap.ui.getCore().byId(s.viewId).getController().sPageTitle=s.data.groupMasterPageTitle;sap.ui.getCore().byId(s.viewId).rerender()}this.oSplitApp.to(s.viewId)}else{e.error("nav-to event cannot be processed. Invalid data: "+s)}},navBackHandler:function(){this.oSplitApp.backMaster()}})});
//# sourceMappingURL=SplitApp.controller.js.map