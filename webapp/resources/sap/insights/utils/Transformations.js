/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/base/BindingParser"],function(e){var t=function(t){var r=e.complexParser(t);return r.path||r.parts&&r.parts[0].path};var r={bar_series:["bar","column","line","bullet","stacked_bar","stacked_column","vertical_bullet","100_stacked_bar","100_stacked_column","waterfall","horizontal_waterfall","area","radar"],pie_series:["pie","donut"]};var a={bar_series:r["bar_series"].concat("combination","stacked_combination","horizontal_stacked_combination"),pie_series:r["pie_series"],dual_series:["dual_bar","dual_column","dual_line","dual_stacked_bar","dual_stacked_column","dual_combination","dual_horizontal_combination","dual_stacked_combination","dual_horizontal_stacked_combination","100_dual_stacked_bar","100_dual_stacked_column"],scatter_series:["scatter"],heatmap_series:["heatmap"],bubble_series:["bubble"]};var n=function(e){var t=e.content.measures.length;return t>1?a:r};var i=function(e,t){var r=null;var a=Object.keys(t);a.forEach(function(a){if(t[a].includes(e)){r=a}});return r};var s=function(e,t){var r=[];t.forEach(function(t){var a=JSON.parse(e);var n=a["sap.card"];var i=n.content;i.chartType=t;r.push(a)});return r};var u=function(e,t){var r=JSON.parse(e);var a=r["sap.card"];var n=a.content;if(n.chartProperties&&n.chartProperties.legend){n.chartProperties.legend["visible"]=false}n.feeds=[{uid:"categoryAxis",type:"Dimension",values:n.dimensions.map(function(e){return e.label||e.name})},{uid:"valueAxis",type:"Measure",values:n.measures.map(function(e){return e.label||e.name})}];return s(JSON.stringify(r),t)};var l=function(e,t){var r=JSON.parse(e);var a=r["sap.card"];var n=a.content;if(n.chartProperties&&n.chartProperties.legend){n.chartProperties.legend["visible"]=true}n.feeds=[{uid:"size",type:"Measure",values:n.measures.map(function(e){return e.label||e.name})},{uid:"color",type:"Dimension",values:n.dimensions.map(function(e){return e.label||e.name})}];return s(JSON.stringify(r),t)};var c=function(e,t){var r=JSON.parse(e);var a=r["sap.card"];var n=a.content;if(n.chartProperties&&n.chartProperties.legend){n.chartProperties.legend["visible"]=false}n.feeds=[{uid:"categoryAxis",type:"Dimension",values:n.dimensions.map(function(e){return e.label||e.name})}].concat(n.measures.map(function(e,t){return{uid:"valueAxis"+(t===0?"":t+1),type:"Measure",values:[e.label||e.name]}}));return s(JSON.stringify(r),t)};var o=function(e,t){var r=JSON.parse(e);var a=r["sap.card"];var n=a.content;if(n.chartProperties&&n.chartProperties.legend){n.chartProperties.legend["visible"]=false}n.feeds=[{uid:"color",type:"Dimension",values:n.dimensions.map(function(e){return e.label||e.name})}].concat(n.measures.map(function(e,t){var r="valueAxis";if(t!==0){if(t===1){r="valueAxis2"}else{if(t!==n.measures.length-1){r=r+(t+1)}if(t===n.measures.length-1){r="bubbleWidth"}}}return{uid:r,type:"Measure",values:[e.label||e.name]}}));return s(JSON.stringify(r),t)};var f=function(e,t){var r=JSON.parse(e);var a=r["sap.card"];var n=a.content;if(n.chartProperties&&n.chartProperties.legend){n.chartProperties.legend["visible"]=true}n.feeds=[{uid:"color",type:"Measure",values:[n.measures[0].name||n.measures[0].label]},{uid:"categoryAxis",type:"Dimension",values:n.dimensions.map(function(e){return e.name||e.label})}];return s(JSON.stringify(r),t)};var d=function(e,t){var r=JSON.parse(e);var a=r["sap.card"];var n=a.content;if(n.measures.length<3){return null}if(n.chartProperties&&n.chartProperties.legend){n.chartProperties.legend["visible"]=true}n.feeds=[{uid:"color",type:"Dimension",values:[n.dimensions[0].name||n.dimensions[0].label]},{uid:"valueAxis",type:"Measure",values:[n.measures[0].name||n.measures[0].label]},{uid:"valueAxis2",type:"Measure",values:[n.measures[1].name||n.measures[1].label]},{uid:"bubbleWidth",type:"Measure",values:[n.measures[2].name||n.measures[2].label]}];return s(JSON.stringify(r),t)};var p=function(e,t,r){switch(t){case"bar_series":return u(e,r);case"pie_series":return l(e,r);case"dual_series":return c(e,r);case"scatter_series":return o(e,r);case"heatmap_series":return f(e,r);case"bubble_series":return d(e,r);default:return null}};function v(e,t){var r=n(e["sap.card"]);var a=e["sap.card"].content.chartType;var u=JSON.stringify(e);var l=[];var c=Object.keys(r);if(t&&Array.isArray(t)&&t.length){t.forEach(function(e){var t=i(e,r);if(t){l=l.concat(p(u,t,[e]))}else{l.push(null)}})}else{if(e["sap.card"].data){e["sap.card"].data.request["timeout"]=1e5}c.forEach(function(e){var t=r[e];if(t.includes(a)){l=l.concat(s(u,t))}else{l=l.concat(p(u,e,t))}})}return l}var h=[function e(t){return t},function e(t){var r=t["sap.card"].content.item;if(r.chart){if(!r.info&&r.chart.displayValue){r.info={value:r.chart.displayValue};if(r.chart.color){r.info.state=r.chart.color}}delete r.chart;return t}return null},function e(t){var r=t["sap.card"].content.item;if(r.info){delete r.info;return t}return null},function e(t){var r=t["sap.card"].content.item;if(r.attributes&&r.attributes.length>0){delete r.attributes;delete r.attributesLayoutType;return t}return null},function e(r){var a=r["sap.card"].content.item;if(a.info){r["sap.card"].content.group={title:a.info.value,order:{path:t(a.info.value),dir:"DESC"}};delete a.info;return r}return null},function e(r){var a=r["sap.card"].content.item;if(a.attributes&&a.attributes.length>0){r["sap.card"].content.group={title:a.attributes[0].value,order:{path:t(a.attributes[0].value),dir:"DESC"}};delete a.attributes;delete a.attributesLayoutType;return r}return null},function e(t){var r=t["sap.card"].content;var a=r.item;var n=[];var i=[];if(a.title){n.push(a.title.value?a.title:{value:a.title})}if(a.actions&&a.actions.length){i=i.concat(a.actions)}if(a.chart&&a.chart.displayValue){n.push({value:a.chart.displayValue});if(a.chart.color){n[n.length-1].state=a.chart.color}}if(a.attributes&&a.attributes.length>0){n=n.concat(a.attributes)}if(a.info){n.push(a.info)}if(n.length>0){r.row={columns:n};if(i.length>0){r.row["actions"]=i}if(a.highlight){r.row["highlight"]=a.highlight;if(a.highlightText){r.row["highlightText"]=a.highlightText}}delete r.item;t["sap.card"].type="Table";return t}return null}];function m(e,t){var r=JSON.stringify(e);return t.map(function(e){var t=JSON.parse(r);return e(t)})}function b(e){return m(e,h)}var g=[function e(t){return t},function e(t){var r=t["sap.card"].content;var a={attributesLayoutType:"OneColumn"};var n=r.row.columns||[];if(n.length>0){if(r.row.highlight){a.highlight=r.row.highlight;if(r.row.highlightText){a.highlightText=r.row.highlightText}}n.forEach(function(e,t){a.attributes=a.attributes||[];a.attributes.push(e)});if(r.row.actions&&r.row.actions.length){a["actions"]=r.row.actions}t["sap.card"].type="List";r.item=a;delete r.row;return t}return null}];function _(e){return m(e,g)}var y=[function e(t){var r=t["sap.card"].content;var a=r.data;var n=r.dimensions||[];var i=r.measures||[];var s=n.map(function(e){return{title:e.label,value:e.displayValue||e.value}});s=s.concat(i.map(function(e){return{title:e.label,value:e.value}}));if(s.length>0){t["sap.card"].type="Table";t["sap.card"].content={data:a,row:{columns:s}};return t}return null}];function O(e){return m(e,y)}function P(e,t){if(e["sap.card"].type==="List"){const r=e["sap.card"].content.item.attributes;r.forEach(e=>{if(t.includes(e.title)){e.visible=true}});const a=r.findIndex(e=>e.identifier);const n=r[a];if(n?.visible===true){e["sap.card"].content.item.title=n}}return e}function S(e){if(!e){return[]}const t=e["sap.card"].content?.item?.attributes?.some(e=>e.visible);if(t){return[]}return e["sap.card"].content?.item?.attributes?.map(e=>e.title).slice(0,3)||[]}return{transformAnalyticalManifest:v,createListOptions:b,createTableOptions:_,createChartToListOrTableOptions:O,selectColumnsForListCard:P,getDefaultColumns:S}});
//# sourceMappingURL=Transformations.js.map