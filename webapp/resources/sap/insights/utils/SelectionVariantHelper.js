/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/base/security/encodeURL","sap/m/Token","sap/ui/core/CustomData","sap/fe/navigation/SelectionVariant"],function(e,a,t,r){"use strict";var n=function(e){return"("+e+")"};var o=function(e,a,t){var r="or";var o=a;if(t==="E"){o=["not",n(a)].join(" ");r="and"}if(e===""){return o}return[e,r,o].join(" ")};var i=function(e,a){if(a==="number"){return e+"m"}if(!(a==="integer"||a==="boolean"||a==="datetime")){return"'"+e+"'"}return e};var u=function(e,a,t,r){var u="";a.forEach(function(a){var s;switch(a.Option){case"BT":s=n([e,"ge",i(a.Low,r),"and",e,"le",i(a.High,r)].join(" "));break;case"CP":if(a.Low.match(/^[*]\\*(.*)\\*[*]$/)){a.Low=a.Low.slice(1,-1)}s="substringof("+i(a.Low,r)+","+e+")";break;default:s=[e,a.Option.toLowerCase(),i(a.Low,r)].join(" ");break}u=o(u,s,t)});return u};var s=function(e,a,t){var r=[],o=[];a.forEach(function(e){if(e.Sign==="I"){if(e.Option==="NE"){o.push(e)}else{r.push(e)}}else{if(e.Option==="NE"){r.push(e)}else{o.push(e)}}});var i=u(e,r,"I",t);var s=[];if(i){s.push(n(i))}var c=u(e,o,"E",t);if(c){s.push(n(c))}return s.join(" and ")};var c=function(a,t){var r=[];a.getSelectOptionsPropertyNames().forEach(function(e){r.push(s(e,a.getSelectOption(e),t[e]))});return r.length?"$filter="+e(r.join(" and ")):null};var f=function(a,t){var r="";a.getParameterNames().forEach(function(e){if(r!==""){r+=","}r+=e+"=";var n=a.getParameter(e);r+=i(n,t[e])});return r===""?null:n(e(r))};var v=function(e){var a=e.Option;switch(e.Option){case"CP":var t=e.Low;var r=t.indexOf("*")===0;var n=t.indexOf("*",1)===t.length-1;if(r&&!n){a="StartsWith"}else if(!r&&n){a="EndsWith"}else if(r&&n){a="Contains"}break;case"EQ":if(e.Low===""){a="Empty"}break}return a};var w=function(e,a){return new t({key:"range",value:{exclude:e.Sign==="E",keyField:a,operation:v(e),value1:e.Option==="CP"?e.Low.replace(/\*/g,""):e.Low,value2:e.High}})};var l=function(e,r){var o=[];var i=0;e.forEach(function(e){var u="";var s="";switch(e.Option){case"BT":u+=e.Low+" .. "+e.High;s="range_"+i++;break;case"CP":u+=e.Low;s="range_"+i++;break;case"EQ":if(e.Low===""){u+="<EMPTY>";s="<EMPTY>"}else{u+=e.Text?e.Text:e.Low;s=e.Low}break;case"NE":u+="!"+e.Low;s="range_"+i++;break;case"GT":u+=">"+e.Low;s="range_"+i++;break;case"GE":u+=">="+e.Low;s="range_"+i++;break;case"LT":u+="<"+e.Low;s="range_"+i++;break;case"LE":u+="<="+e.Low;s="range_"+i++;break}if(e.Sign==="E"){u="!"+n(u)}var c=new a({key:s,text:e.Text?e.Text:u});if(s!==e.Low){c.addCustomData(w(e,r))}c.addCustomData(new t({key:"selectOption",value:e}));o.push(c)});return o};var p=function(){var e=new r;return e.toJSONString()};var L=function(e){switch(e.Option){case"BT":e.Text+=e.Low+" .. "+e.High;break;case"EQ":if(e.Low===""){e.Text+="<EMPTY>"}else{e.Text+=e.Low}break;case"NE":e.Text+="!"+e.Low;break;case"GT":e.Text+=">"+e.Low;break;case"GE":e.Text+=">="+e.Low;break;case"LT":e.Text+="<"+e.Low;break;case"LE":e.Text+="<="+e.Low;break;default:e.Text+=e.Low;break}return e.Text};var g=function(e,a){var t={Sign:e.exclude?"E":"I",Option:e.operation,Low:e.value1.toString(),High:e.value2?e.value2.toString():"",Text:a?a:""};switch(e.operation){case"Contains":t.Option="CP";if(e.value1){t.Low="*"+e.value1+"*"}break;case"StartsWith":t.Option="CP";if(e.value1){t.Low=e.value1+"*"}break;case"EndsWith":t.Option="CP";if(e.value1){t.Low="*"+e.value1}break;case"Empty":t.Option="EQ";t.Low="";break}if(!t.Text){t.Text=L(t)}return t};return{getFilterQueryFromSV:c,getParameterQueryFromSV:f,getTokenFromSelectOptions:l,getEmptySVStringforProperty:p,getSelectOptionFromRange:g}});
//# sourceMappingURL=SelectionVariantHelper.js.map