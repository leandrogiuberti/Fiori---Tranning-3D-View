/*
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define("sap/sac/df/DataAnalyzer",["sap/sac/df/controls/MultiDimControlBase","sap/sac/df/types/DataAnalyzerPanelName","sap/sac/df/utils/ListHelper","sap/sac/df/firefly/library"],function(t,e,i,a){var n=t.extend("sap.sac.df.DataAnalyzer",{metadata:{library:"sap.sac.df",properties:{metaPath:{type:"string"},selectedPanel:{type:"sap.sac.df.types.DataAnalyzerPanelName"},showVisualizationType:{type:"boolean",default:false},showTitle:{type:"boolean",defaultValue:false},title:{type:"string"}}},init:function(){if(t.prototype.init){t.prototype.init.apply(this,arguments)}},renderer:t.getMetadata().getRenderer().render,getPluginConfigName:function(){return"DataAnalyzer"},_runProgram:function(){let e=t.prototype._runProgram.apply(this);return e.then(()=>{let t=new a.XPair;t.setFirstObject(a.PrString.createWithValue("UI5ContextMenuProvider"));t.setSecondObject(this._getDefaultContextMenuProvider());this.oHorizonProgram.executeAction(a.AuMenuEngineCommandPlugin.PLUGIN_NAME,a.AuMenuEngineCommandPlugin.REGISTER_DYNAMIC_MENU_ACTIONS_PROVIDER,t)})},_getDefaultContextMenuProvider:function(){return this._getMultiDimModel().getContextMenuProviderRegistry().getDefaultProvider()},_applyPropertiesToPlugin:function(){t.prototype._applyPropertiesToPlugin.apply(this);if(this.oHorizonProgram){if(this._getMultiDimModel().getProperty("/Configuration/Charts")){this.setShowVisualizationType(true)}const t=a.XNotificationData.create();t.putBoolean(a.AuOlapAxesBuilderViewPlugin.CONFIG_SHOW_DISPLAY_TYPE,this.getShowVisualizationType());this.oHorizonProgram.postNotificationWithName(a.AuOlapAxesBuilderViewPlugin.NOTIFICATION_DISPLAY_TYPE_VISIBILITY_CHANGE,t);const e=a.XNotificationData.create();e.putXObject(a.HpSideNavigationDocumentPlugin.NOTIFICATION_DATA_CONSUMER,a.XConsumerHolder.create(this._onPanelChange.bind(this)));this.oHorizonProgram.postNotificationWithName(a.HpSideNavigationDocumentPlugin.NOTIFICATION_SET_PANEL_STATE_CHANGE_CONSUMER,e);const i=a.XNotificationData.create();i.putBoolean(a.AuAnalyticalTableViewPlugin.NOTIFICATION_DATA_KEY_SHOW_QUERY_DETAILS,this.getShowTitle());this.oHorizonProgram.postNotificationWithName(a.AuAnalyticalTableViewPlugin.NOTIFICATION_SHOW_QUERY_DETAILS,i);if(this.getTitle()){const t=a.XNotificationData.create();t.putString(a.AuVizRendererDocumentPlugin.NOTIFICATION_DATA_KEY_TITLE,this.getTitle());this.oHorizonProgram.postNotificationWithName(a.AuVizRendererDocumentPlugin.NOTIFICATION_SET_TITLE,t)}}},_onPanelChange:function(t){const n=i.arrayFromList(t.getByKey(a.HpSideNavigationDocumentPlugin.PANEL_STATE_OPEN_PANELS_KEY).getKeysAsReadOnlyList());if(n&&n.length>0){const i=n[0];const o=t.getByKey(a.HpSideNavigationDocumentPlugin.PANEL_STATE_OPEN_PANELS_KEY).getBooleanByKey(i);if(o){const t=Object.keys(e).find(t=>e[t]===i);if(i){this.setProperty("selectedPanel",t)}}else{this.setProperty("selectedPanel",null)}}}});return n});
//# sourceMappingURL=DataAnalyzer.js.map