/*!
* SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
*/
sap.ui.define("sap/sac/df/model/VariableGroup",["sap/ui/base/Object","sap/sac/df/model/DataProvider","sap/sac/df/model/MemberFilter","sap/sac/df/thirdparty/lodash"],function(e,r,a,t){"use strict";const i=e.extend("sap.sac.df.model.VariableGroup",{constructor:function(e,r,a,t){Object.assign(this,Object.getPrototypeOf(this));Object.assign(this,{Name:r,Rule:a,MergedVariable:null},t);this._Model=e;this._getVariableGroupMapping=()=>this._Model.VariableGroupMapping;this.updateVariableGroup()},updateVariableGroup:function(){var e=this;e._getVariableGroupMapping()[this.Name]=[];t.forEach(e._Model.getDataProviders(),r=>{e.updateVariablesForDataProvider(r)})},updateVariablesForDataProvider:function(e){if(e){t.forEach(e.getVariables(),r=>{this._updateVariableInGroup(this,r,e.Name)});e.variableChanged=true;e._triggerDataProviderPropertyUpdate();this.MergedVariable._createFilterDisplayType();this.MergedVariable._createMemberFilter();e.attachEventOnce("dataUpdated",null,()=>{this.MergedVariable._createMemberFilter()});e.attachEventOnce("dataProviderUpdated",null,()=>{this.MergedVariable._createMemberFilter()})}},_updateVariableInGroup:function(e,r,a){if(e.Rule(r,a)){if(e.MergedVariable&&e.MergedVariable.DataProviderName!==a){if(e.MergedVariable.VariableType!==r.VariableType){throw new Error("Could not add variable '"+r.Name+"' for DataProvider='"+a+"'."+" The type="+r.VariableType+" doesn't match type="+e.MergedVariable.VariableType+" of previously added variables ")}}else{e.MergedVariable=r}this._getVariableGroupMapping()[e.Name].push(r)}}});i.prototype.setMemberFilter=function(e){return this.MergedVariable.setMemberFilter(e).then(()=>{this.updateVariableGroup()})};i.prototype.searchMember=function(e,r,a,t,i,l){return this.MergedVariable.searchMember(e,r,a,t,i,l)};i.prototype.addMemberFilterByKey=function(e){return this.MergedVariable.addMemberFilterByKey(e).then(()=>{this.updateVariableGroup()})};i.prototype.setMemberFilterByKey=function(e){return this.MergedVariable.setMemberFilterByKey(e).then(()=>{this.updateVariableGroup()})};i.prototype.removeMemberFilterByKey=function(e){return this.MergedVariable.removeMemberFilterByKey(e).then(()=>{this.updateVariableGroup()})};i.prototype.addMemberFilter=function(e){return this.MergedVariable.addMemberFilter(e).then(()=>{this.updateVariableGroup()})};i.prototype.removeMemberFilter=function(e){return this.MergedVariable.removeMemberFilter(e).then(()=>{this.updateVariableGroup()})};i.prototype.clearMemberFilter=function(){return this.MergedVariable.clearMemberFilter().then(()=>{this.updateVariableGroup()})};i.prototype.getMemberFilter=function(){return this.MergedVariable.getMemberFilter()};i.prototype.openValueHelpDialog=function(e){this.updateVariablesForDataProvider(this.MergedVariable._DataProvider,true);return this.MergedVariable.openValueHelpDialog(e).then(e=>{if(e){this.updateVariableGroup()}return!!e})};i.M_PROPERTIES={Name:"Name",MergedVariable:"MergedVariable"};return i});
//# sourceMappingURL=VariableGroup.js.map