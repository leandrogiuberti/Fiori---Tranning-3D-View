/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff0060.commons.ext"],function(t){"use strict";t.JsonFilteringSerializerFactory=function(){};t.JsonFilteringSerializerFactory.prototype=new t.XObject;t.JsonFilteringSerializerFactory.prototype._ff_c="JsonFilteringSerializerFactory";t.JsonFilteringSerializerFactory.s_activeFactory=null;t.JsonFilteringSerializerFactory.newFilteringSerializer=function(){return t.JsonFilteringSerializerFactory.s_activeFactory.newInstance()};t.JsonFilteringSerializerFactory.setActiveFactory=function(e){t.JsonFilteringSerializerFactory.s_activeFactory=e};t.JsonFilteringSerializerFactory.staticSetup=function(){t.JsonFilteringSerializerFactory.setActiveFactory(new t.JsonFilteringSerializerFactory)};t.JsonFilteringSerializerFactory.prototype.newInstance=function(){return t.PrUniversalFilteringSerializer.create()};t.JsonParserErrorCode={JSON_PARSER_ILLEGAL_STATE:2001,JSON_PARSER_ROOT_ERROR:2e3};t.JsonParserGenericStackElement=function(){};t.JsonParserGenericStackElement.prototype=new t.XObject;t.JsonParserGenericStackElement.prototype._ff_c="JsonParserGenericStackElement";t.JsonParserGenericStackElement.create=function(){let e=new t.JsonParserGenericStackElement;e.reset();return e};t.JsonParserGenericStackElement.prototype.m_element=null;t.JsonParserGenericStackElement.prototype.m_hasElements=false;t.JsonParserGenericStackElement.prototype.m_isPreparedForNextElement=false;t.JsonParserGenericStackElement.prototype.m_name=null;t.JsonParserGenericStackElement.prototype.m_valueSet=false;t.JsonParserGenericStackElement.prototype.addElement=function(){if(this.m_hasElements===false){if(this.m_isPreparedForNextElement){return false}this.m_hasElements=true;return true}if(this.m_isPreparedForNextElement===false){return false}this.m_isPreparedForNextElement=false;return true};t.JsonParserGenericStackElement.prototype.finishElements=function(){if(this.m_isPreparedForNextElement){return false}return true};t.JsonParserGenericStackElement.prototype.getElement=function(){return this.m_element};t.JsonParserGenericStackElement.prototype.getName=function(){return this.m_name};t.JsonParserGenericStackElement.prototype.isNameSet=function(){return t.notNull(this.m_name)};t.JsonParserGenericStackElement.prototype.isValueSet=function(){return this.m_valueSet};t.JsonParserGenericStackElement.prototype.nextElement=function(){if(this.m_isPreparedForNextElement){return false}if(this.m_hasElements===false){return false}this.m_isPreparedForNextElement=true;return true};t.JsonParserGenericStackElement.prototype.reset=function(){this.m_element=null;this.m_name=null;this.m_valueSet=false;this.m_hasElements=false;this.m_isPreparedForNextElement=false};t.JsonParserGenericStackElement.prototype.setElement=function(t){this.m_element=t};t.JsonParserGenericStackElement.prototype.setName=function(t){this.m_name=t};t.JsonParserGenericStackElement.prototype.setValueSet=function(t){this.m_valueSet=t};t.XJson=function(){};t.XJson.prototype=new t.XObject;t.XJson.prototype._ff_c="XJson";t.XJson.s_extractor=null;t.XJson.extractJsonContent=function(e){let r=null;if(t.notNull(e)){if(t.notNull(t.XJson.s_extractor)){r=t.XJson.s_extractor.extractJsonContent(e)}else{let t=e;r=t.getElement()}}return r};t.XJson.setJsonExtractor=function(e){t.XJson.s_extractor=e};t.XJson.prototype.toString=function(){return this.getElement().toString()};t.PrSerializerFactory=function(){};t.PrSerializerFactory.prototype=new t.XObject;t.PrSerializerFactory.prototype._ff_c="PrSerializerFactory";t.PrSerializerFactory.s_activeFactory=null;t.PrSerializerFactory.newSerializer=function(e,r,n,i){return t.PrSerializerFactory.s_activeFactory.newInstance(e,r,n,i)};t.PrSerializerFactory.setActiveFactory=function(e){t.PrSerializerFactory.s_activeFactory=e};t.PrSerializerFactory.staticSetup=function(){t.PrSerializerFactory.setActiveFactory(new t.PrSerializerFactory)};t.PrSerializerFactory.prototype.newInstance=function(e,r,n,i){return t.PrUniversalSerializer.create(e,r,n,i)};t.PrFilter=function(){};t.PrFilter.prototype=new t.XObject;t.PrFilter.prototype._ff_c="PrFilter";t.PrFilter.addJsonPathElementToMap=function(e,r,n){if(t.isNull(e)){return n}if(t.isNull(r)){return n}let i=n;if(t.isNull(i)){i=t.XHashMapByString.create()}i.put(e,r);return i};t.PrFilter.create=function(){return new t.PrFilter};t.PrFilter.prototype.m_withBooleans=false;t.PrFilter.prototype.m_withDoubles=false;t.PrFilter.prototype.m_withIntegers=false;t.PrFilter.prototype.m_withLists=false;t.PrFilter.prototype.m_withLongs=false;t.PrFilter.prototype.m_withNulls=false;t.PrFilter.prototype.m_withNumbers=false;t.PrFilter.prototype.m_withStrings=false;t.PrFilter.prototype.m_withStructures=false;t.PrFilter.prototype.filterJsonPathElements=function(e){if(t.isNull(e)||e.size()<1){return null}let r=null;let n=e.getKeysAsReadOnlyList();for(let i=0;i<n.size();i++){let l=n.get(i);let s=e.getByKey(l);let o=this.getElementFiltered(s);r=t.PrFilter.addJsonPathElementToMap(l,o,r)}return r};t.PrFilter.prototype.getElementFiltered=function(e){if(t.isNull(e)){return null}let r=e.getType();if(t.isNull(r)){return null}if(r===t.PrElementType.STRUCTURE&&this.m_withStructures){return e}if(r===t.PrElementType.LIST&&this.m_withLists){return e}if(r===t.PrElementType.STRING&&this.m_withStrings){return e}if(r===t.PrElementType.BOOLEAN&&this.m_withBooleans){return e}if(r===t.PrElementType.DOUBLE&&(this.m_withDoubles||this.m_withNumbers)){return e}if(r===t.PrElementType.LONG&&(this.m_withLongs||this.m_withNumbers)){return e}if(r===t.PrElementType.INTEGER&&(this.m_withIntegers||this.m_withNumbers)){return e}if(r===t.PrElementType.THE_NULL&&this.m_withNulls){return e}return null};t.PrFilter.prototype.withBooleans=function(){this.m_withBooleans=true;return this};t.PrFilter.prototype.withDoubles=function(){this.m_withDoubles=true;return this};t.PrFilter.prototype.withIntegers=function(){this.m_withIntegers=true;return this};t.PrFilter.prototype.withLists=function(){this.m_withLists=true;return this};t.PrFilter.prototype.withLongs=function(){this.m_withLongs=true;return this};t.PrFilter.prototype.withNulls=function(){this.m_withNulls=true;return this};t.PrFilter.prototype.withNumbers=function(){this.m_withNumbers=true;return this};t.PrFilter.prototype.withStrings=function(){this.m_withStrings=true;return this};t.PrFilter.prototype.withStructures=function(){this.m_withStructures=true;return this};t.PrUniversalFilteringSerializer=function(){};t.PrUniversalFilteringSerializer.prototype=new t.XObject;t.PrUniversalFilteringSerializer.prototype._ff_c="PrUniversalFilteringSerializer";t.PrUniversalFilteringSerializer.create=function(){let e=new t.PrUniversalFilteringSerializer;return e};t.PrUniversalFilteringSerializer.prototype.m_buffer=null;t.PrUniversalFilteringSerializer.prototype.appendElementBl=function(e,r){if(t.isNull(e)){this.m_buffer.append("null")}else{let n=e.getType();if(n===t.PrElementType.STRUCTURE){this.appendStructureBl(e,r)}else if(n===t.PrElementType.LIST){this.appendListBl(e,r)}else if(n===t.PrElementType.STRING){let r=e.asString().getString();if(t.isNull(r)){this.m_buffer.append("null")}else{this.m_buffer.append('"');this.m_buffer.append(t.XStringUtils.escapeControlChars(t.XHttpUtils.escapeToJsonString(r)));this.m_buffer.append('"')}}else if(n===t.PrElementType.DOUBLE){this.m_buffer.appendDouble(e.asNumber().getDouble())}else if(n.isNumber()){this.m_buffer.appendLong(e.asNumber().getLong())}else if(n===t.PrElementType.BOOLEAN){this.m_buffer.appendBoolean(e.asBoolean().getBoolean())}else if(n===t.PrElementType.THE_NULL){this.m_buffer.append("null")}}};t.PrUniversalFilteringSerializer.prototype.appendListBl=function(e,r){this.m_buffer.append("[");let n=false;let i=e;let l=i.size();let s=t.isNull(r)?null:r.getListSubFilter();for(let e=0;e<l;e++){if(n){this.m_buffer.append(",")}n=true;let r=i.get(e);if(t.notNull(s)){s.submitIndex(e,r)}this.appendElementBl(r,s)}this.m_buffer.append("]")};t.PrUniversalFilteringSerializer.prototype.appendStructureBl=function(e,r){this.m_buffer.append("{");let n=false;let i=e;let l=i.getKeysAsReadOnlyList();if(t.notNull(l)){let e=l.size();l.sortByDirection(t.XSortDirection.ASCENDING);for(let s=0;s<e;s++){let e=l.get(s);let o=i.getByKey(e);let u=t.isNull(r)?null:r.getSubFilter(e);if(t.notNull(u)&&u.isIgnore(e,o)){continue}if(n){this.m_buffer.append(",")}n=true;this.m_buffer.append('"');this.m_buffer.append(this.escapeQuote(e));this.m_buffer.append('":');this.appendElementBl(o,u)}}this.m_buffer.append("}")};t.PrUniversalFilteringSerializer.prototype.escapeQuote=function(e){return t.XString.containsString(e,'"')?t.XString.replace(e,'"','\\"'):e};t.PrUniversalFilteringSerializer.prototype.serializeWithFilter=function(e,r){this.m_buffer=t.XStringBuffer.create();this.appendElementBl(e,r);let n=this.m_buffer.toString();this.m_buffer=t.XObjectExt.release(this.m_buffer);return n};t.PrUniversalSerializer=function(){};t.PrUniversalSerializer.prototype=new t.XObject;t.PrUniversalSerializer.prototype._ff_c="PrUniversalSerializer";t.PrUniversalSerializer.create=function(e,r,n,i){let l=new t.PrUniversalSerializer;l.m_indentation=n;l.m_pretty=r;l.m_sort=e;l.m_escapeResult=i;return l};t.PrUniversalSerializer.prototype.m_buffer=null;t.PrUniversalSerializer.prototype.m_escapeResult=true;t.PrUniversalSerializer.prototype.m_indentation=0;t.PrUniversalSerializer.prototype.m_indentationLevel=0;t.PrUniversalSerializer.prototype.m_pretty=false;t.PrUniversalSerializer.prototype.m_sort=false;t.PrUniversalSerializer.prototype.appendElement=function(e,r){if(this.m_pretty){this.appendIndentationString()}if(t.notNull(r)){this.m_buffer.append('"');if(this.m_escapeResult){this.m_buffer.append(this.escape(r))}else{this.m_buffer.append(r)}this.m_buffer.append('":');if(this.m_pretty){this.m_buffer.append(" ")}}if(t.isNull(e)){this.m_buffer.append("null")}else{let r=e.getType();if(r===t.PrElementType.STRUCTURE){this.appendStructure(e)}else if(r===t.PrElementType.LIST){this.appendList(e)}else if(r===t.PrElementType.STRING){let r=e.asString().getString();if(t.isNull(r)){this.m_buffer.append("null")}else{this.m_buffer.append('"');if(this.m_escapeResult){this.m_buffer.append(t.XStringUtils.escapeControlChars(t.XHttpUtils.escapeToJsonString(r)))}else{this.m_buffer.append(r)}this.m_buffer.append('"')}}else if(r===t.PrElementType.DOUBLE){this.m_buffer.appendDouble(e.asNumber().getDouble())}else if(r.isNumber()){this.m_buffer.appendLong(e.asNumber().getLong())}else if(r===t.PrElementType.BOOLEAN){if(e.getBoolean()){this.m_buffer.append("true")}else{this.m_buffer.append("false")}}else if(r===t.PrElementType.THE_NULL){this.m_buffer.append("null")}}};t.PrUniversalSerializer.prototype.appendIndentationString=function(){if(this.m_indentation>=1&&this.m_indentationLevel>=1){let t=this.m_indentation*this.m_indentationLevel;for(let e=0;e<t;e++){this.m_buffer.append(" ")}}};t.PrUniversalSerializer.prototype.appendList=function(t){this.m_buffer.append("[");let e=false;let r=t;let n=r.size();for(let t=0;t<n;t++){if(e){this.m_buffer.append(",")}e=true;let n=r.get(t);if(this.m_pretty){this.m_buffer.appendNewLine();this.m_indentationLevel++;this.appendElement(n,null);this.m_indentationLevel--}else{this.appendElement(n,null)}}if(this.m_pretty&&e){this.m_buffer.appendNewLine();this.appendIndentationString()}this.m_buffer.append("]")};t.PrUniversalSerializer.prototype.appendStructure=function(e){this.m_buffer.append("{");let r=false;let n=e;let i=n.getKeysAsReadOnlyList();if(t.notNull(i)){let e=i.size();if(this.m_sort&&e>1){i.sortByDirection(t.XSortDirection.ASCENDING)}for(let t=0;t<e;t++){if(r){this.m_buffer.append(",")}r=true;let e=i.get(t);let l=n.getByKey(e);if(this.m_pretty){this.m_buffer.appendNewLine();this.m_indentationLevel++;this.appendElement(l,e);this.m_indentationLevel--}else{this.appendElement(l,e)}}}if(this.m_pretty&&r){this.m_buffer.appendNewLine();this.appendIndentationString()}this.m_buffer.append("}")};t.PrUniversalSerializer.prototype.escape=function(e){let r=e;r=t.XString.replace(r,"\\","\\\\");r=t.XString.replace(r,'"','\\"');r=t.XString.replace(r,"\b","\\b");r=t.XString.replace(r,"\f","\\f");r=t.XString.replace(r,"\n","\\n");r=t.XString.replace(r,"\r","\\r");r=t.XString.replace(r,"\t","\\t");return r};t.PrUniversalSerializer.prototype.serialize=function(e){let r=null;if(t.notNull(e)){this.m_buffer=t.XStringBuffer.create();this.appendElement(e,null);r=this.m_buffer.toString();this.m_buffer=t.XObjectExt.release(this.m_buffer)}return r};t.PrUtils={asBoolean:function(e){return t.PrUtils.isElementValid(e,t.PrElementType.BOOLEAN)?e:null},asDouble:function(e){return t.PrUtils.isElementValid(e,t.PrElementType.DOUBLE)?e:null},asInteger:function(e){return t.PrUtils.isElementValid(e,t.PrElementType.INTEGER)?e:null},asList:function(e){return t.PrUtils.isElementValid(e,t.PrElementType.LIST)?e:null},asListOfString:function(e){let r=t.XList.create();if(t.PrUtils.isElementValid(e,t.PrElementType.LIST)){let n=e.size();for(let i=0;i<n;i++){r.add(t.PrUtils.getStringValueElement(e,i,null))}}return r},asLong:function(e){return t.PrUtils.isElementValid(e,t.PrElementType.LONG)?e:null},asNumber:function(e){let r=null;if(t.PrUtils.isElementValid(e,t.PrElementType.DOUBLE)||t.PrUtils.isElementValid(e,t.PrElementType.INTEGER)||t.PrUtils.isElementValid(e,t.PrElementType.LONG)){r=e.asNumber()}return r},asString:function(e){return t.PrUtils.isElementValid(e,t.PrElementType.STRING)?e:null},asStructure:function(e){return t.PrUtils.isElementValid(e,t.PrElementType.STRUCTURE)?e:null},contains:function(e,r){return t.PrUtils.indexOf(e,r)>-1},convertBoolToString:function(e){let r=e;return t.XBoolean.convertToString(r.getBoolean())},convertDoubleToString:function(e){let r=e;return t.XDouble.convertToString(r.getDouble())},convertElementToBoolean:function(e){let r=null;let n=t.PrUtils.getTypeFromElement(e);if(t.notNull(n)){if(n===t.PrElementType.BOOLEAN){r=e}if(n===t.PrElementType.STRING){try{let n=t.XBoolean.convertFromString(e.getString());r=t.PrFactory.createBoolean(n)}catch(t){r=null}}}return r},convertElementToBooleanValue:function(e,r){let n=t.PrUtils.convertElementToBoolean(e);return t.isNull(n)?r:n.getBoolean()},convertElementToDouble:function(e){let r=null;let n=t.PrUtils.getTypeFromElement(e);if(t.notNull(n)){if(n===t.PrElementType.DOUBLE){r=e}else if(n.isNumber()){r=t.PrFactory.createDouble(e.asNumber().getDouble())}else if(n===t.PrElementType.STRING){try{let n=t.XDouble.convertFromString(e.getString());r=t.PrFactory.createDouble(n)}catch(t){r=null}}}return r},convertElementToDoubleValue:function(e,r){let n=t.PrUtils.convertElementToDouble(e);return t.isNull(n)?r:n.getDouble()},convertElementToInteger:function(e){let r=null;let n=t.PrUtils.getTypeFromElement(e);if(t.notNull(n)){if(n===t.PrElementType.INTEGER){r=e}if(n.isNumber()){r=t.PrFactory.createInteger(e.asNumber().getInteger())}if(n===t.PrElementType.STRING){try{let n=t.XInteger.convertFromStringWithRadix(e.getString(),10);r=t.PrFactory.createInteger(n)}catch(t){r=null}}}return r},convertElementToIntegerValue:function(e,r){let n=t.PrUtils.convertElementToInteger(e);return t.isNull(n)?r:n.getInteger()},convertElementToLong:function(e){let r=null;let n=t.PrUtils.getTypeFromElement(e);if(t.notNull(n)){if(n===t.PrElementType.LONG){r=e}if(n.isNumber()){r=t.PrFactory.createLong(e.asNumber().getLong())}if(n===t.PrElementType.STRING){try{let n=t.XLong.convertFromString(e.getString());r=t.PrFactory.createLong(n)}catch(t){r=null}}}return r},convertElementToLongValue:function(e,r){let n=t.PrUtils.convertElementToLong(e);return t.isNull(n)?r:n.getLong()},convertElementToNumber:function(e){let r=null;let n=t.PrUtils.getTypeFromElement(e);if(t.notNull(n)){if(n===t.PrElementType.STRING){try{let n=t.XDouble.convertFromString(e.getString());r=t.PrFactory.createDouble(n)}catch(t){r=null}}else if(n.isNumber()){r=e.asNumber()}}return r},convertElementToString:function(e){let r=null;let n=t.PrUtils.getTypeFromElement(e);if(t.notNull(n)){if(n===t.PrElementType.STRING){r=e}else{let i=null;if(n===t.PrElementType.BOOLEAN){i=t.PrUtils.convertBoolToString(e)}else if(n===t.PrElementType.INTEGER){i=t.PrUtils.convertIntegerToString(e)}else if(n===t.PrElementType.DOUBLE){i=t.PrUtils.convertDoubleToString(e)}else if(n===t.PrElementType.LONG){i=t.PrUtils.convertLongToString(e)}r=t.PrFactory.createString(i)}}return r},convertElementToStringValue:function(e,r){let n=r;if(t.notNull(e)){let i=t.PrUtils.convertElementToString(e);n=t.isNull(i)?r:i.getString()}return n},convertIntegerToString:function(e){let r=e;return t.XInteger.convertToString(r.getInteger())},convertLongToString:function(e){let r=e;return t.XLong.convertToString(r.getLong())},convertToList:function(e){let r=null;if(t.notNull(e)){if(e.isList()){r=e}else{r=t.PrFactory.createList();r.add(e)}}return r},copyElement:function(e){let r=null;if(t.notNull(e)){let n=e.getType();if(t.PrElementType.BOOLEAN===n){r=t.PrFactory.createBoolean(e.getBoolean())}else if(t.PrElementType.INTEGER===n){r=t.PrFactory.createInteger(e.asNumber().getInteger())}else if(t.PrElementType.LONG===n){r=t.PrFactory.createLong(e.asNumber().getLong())}else if(t.PrElementType.DOUBLE===n){r=t.PrFactory.createDouble(e.asNumber().getDouble())}else if(t.PrElementType.STRING===n){r=t.PrFactory.createString(e.getString())}else if(t.PrElementType.STRUCTURE===n){r=t.PrUtils.copyStructure(e)}else if(t.PrElementType.LIST===n){r=t.PrUtils.copyList(e)}else if(t.PrElementType.THE_NULL!==n){throw t.XException.createIllegalStateException("unknown type")}}return r},copyIntegerValues:function(e,r){let n=e.size();let i;if(t.isNull(r)||r.size()!==n){i=t.XArrayOfInt.create(n)}else{i=r}for(let t=0;t<n;t++){i.set(t,e.getIntegerAt(t))}return i},copyList:function(e){let r=t.PrFactory.createList();let n=e.size();for(let i=0;i<n;i++){let n=e.get(i);let l=t.PrUtils.copyElement(n);r.add(l)}return r},copyStructure:function(e){let r=t.PrFactory.createStructure();let n=e.getKeysAsReadOnlyList();let i=n.size();for(let l=0;l<i;l++){let i=n.get(l);let s=e.getByKey(i);let o=t.PrUtils.copyElement(s);r.put(i,o)}return r},createByValue:function(e){let r=null;if(t.notNull(e)){let n=e.getValueType();if(n===t.XValueType.STRING){let n=e;r=t.PrString.createWithValue(n.getString())}else if(n===t.XValueType.BOOLEAN){let n=e;r=t.PrBoolean.createWithValue(n.getBoolean())}else if(n===t.XValueType.INTEGER){let n=e;r=t.PrInteger.createWithValue(n.getInteger())}else if(n===t.XValueType.DOUBLE||n===t.XValueType.NUMBER){let n=e;r=t.PrDouble.createWithValue(n.getDouble())}else if(n===t.XValueType.LIST){let n=e;r=t.PrUtils.deepCopyElement(n)}else if(n===t.XValueType.STRUCTURE){let n=e;r=t.PrUtils.deepCopyElement(n)}}return r},createDeepCopy:function(e){return t.PrUtils.createDeepCopyExt(e,null)},createDeepCopyExt:function(e,r){let n=null;let i=t.PrUtils.getTypeFromElement(e);if(t.notNull(i)){let l=t.PrElementType.STRUCTURE;let s=t.PrElementType.LIST;let o=t.PrElementType.BOOLEAN;let u=t.PrElementType.STRING;let a=t.PrElementType.INTEGER;let p=t.PrElementType.LONG;let c=t.PrElementType.DOUBLE;let m;let y;if(i===l){let i=e;let l=r;if(t.isNull(l)){l=t.PrFactory.createStructure()}else{l.clear()}let s=i.getKeysAsReadOnlyList();let o=s.size();for(let e=0;e<o;e++){let r=s.get(e);y=i.getByKey(r);m=t.PrUtils.createDeepCopyExt(y,null);l.put(r,m)}n=l}else if(i===s){let i=e;let l=r;if(t.isNull(l)){l=t.PrFactory.createList()}else{l.clear()}let s=i.getReadOnlyList();let o=s.size();for(let e=0;e<o;e++){y=s.get(e);m=t.PrUtils.createDeepCopyExt(y,null);l.add(m)}n=l}else if(i===o){let r=e;n=t.PrFactory.createBoolean(r.getBoolean())}else if(i===u){let r=e;n=t.PrFactory.createString(r.getString())}else if(i===a){let r=e;n=t.PrFactory.createInteger(r.getInteger())}else if(i===p){let r=e;n=t.PrFactory.createLong(r.getLong())}else if(i===c){let r=e;n=t.PrFactory.createDouble(r.getDouble())}}return n},createElementDeepCopy:function(e){return t.isNull(e)?null:t.PrUtils.copyElement(e)},deepCopyElement:function(e){let r=null;if(t.notNull(e)){let n=e.getType();if(n===t.PrElementType.STRUCTURE){r=t.PrStructure.createDeepCopy(e)}else if(n===t.PrElementType.LIST){r=t.PrList.createDeepCopy(e)}else{r=e.getPermaCopy()}}return r},deserialize:function(e){let r=t.JsonParserFactory.newInstance();let n=r.parse(e);r=t.XObjectExt.release(r);return n},deserializeExt:function(e){let r=t.JsonParserFactory.newInstance();let n=r.parse(e);if(r.hasErrors()){throw t.XException.createRuntimeException(r.getFirstError().getText())}r=t.XObjectExt.release(r);return n},fromListOfString:function(e){let r=t.PrFactory.createList();r.addAllStrings(e);return r},getBooleanElement:function(e,r){let n=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToBoolean(n)},getBooleanProperty:function(e,r){let n=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToBoolean(n)},getBooleanValueElement:function(e,r,n){let i=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToBooleanValue(i,n)},getBooleanValueProperty:function(e,r,n){let i=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToBooleanValue(i,n)},getDateElement:function(e,r,n,i){let l=i;let s=t.PrUtils.getStringElement(e,r);if(t.notNull(s)){let e=t.XDate.createDateFromStringWithFlag(s.getString(),n);l=t.isNull(e)?i:e}return l},getDateProperty:function(e,r,n,i){let l=i;let s=t.PrUtils.getStringProperty(e,r);if(t.notNull(s)){let e=t.XDate.createDateFromStringWithFlag(s.getString(),n);l=t.isNull(e)?i:e}return l},getDateTimeElement:function(e,r,n,i){let l=i;let s=t.PrUtils.getStringElement(e,r);if(t.notNull(s)){let e=t.XDateTime.createDateTimeFromStringWithFlag(s.getString(),n);l=t.isNull(e)?i:e}return l},getDateTimeProperty:function(e,r,n,i){let l=i;let s=t.PrUtils.getStringProperty(e,r);if(t.notNull(s)){let e=t.XDateTime.createDateTimeFromStringWithFlag(s.getString(),n);l=t.isNull(e)?i:e}return l},getDoubleElement:function(e,r){let n=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToDouble(n)},getDoubleProperty:function(e,r){let n=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToDouble(n)},getDoubleValueElement:function(e,r,n){let i=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToDoubleValue(i,n)},getDoubleValueProperty:function(e,r,n){let i=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToDoubleValue(i,n)},getElement:function(e,r){let n=null;if(t.notNull(e)&&r>=0&&r<e.size()){n=e.get(r)}return n},getIntegerElement:function(e,r){let n=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToInteger(n)},getIntegerProperty:function(e,r){let n=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToInteger(n)},getIntegerValueElement:function(e,r,n){let i=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToIntegerValue(i,n)},getIntegerValueProperty:function(e,r,n){let i=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToIntegerValue(i,n)},getKeysAsReadOnlyList:function(e,r){return t.PrUtils.isElementValid(e,t.PrElementType.STRUCTURE)?e.getKeysAsReadOnlyList():r},getListElement:function(e,r){let n=t.PrUtils.getElement(e,r);return t.PrUtils.asList(n)},getListProperty:function(e,r){let n=t.PrUtils.getProperty(e,r);return t.PrUtils.asList(n)},getListSize:function(e,r){return t.PrUtils.isElementValid(e,t.PrElementType.LIST)?e.size():r},getLongElement:function(e,r){let n=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToLong(n)},getLongProperty:function(e,r){let n=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToLong(n)},getLongValueElement:function(e,r,n){let i=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToLongValue(i,n)},getLongValueProperty:function(e,r,n){let i=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToLongValue(i,n)},getNumberElement:function(e,r){let n=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToNumber(n)},getNumberProperty:function(e,r){let n=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToNumber(n)},getProperty:function(e,r){let n=null;if(t.notNull(e)&&t.notNull(r)){n=e.getByKey(r)}return n},getPropertyAsList:function(e,r){return t.PrUtils.convertToList(t.PrUtils.getProperty(e,r))},getStringElement:function(e,r){let n=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToString(n)},getStringProperty:function(e,r){let n=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToString(n)},getStringValueElement:function(e,r,n){let i=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToStringValue(i,n)},getStringValueProperty:function(e,r,n){let i=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToStringValue(i,n)},getStructureElement:function(e,r){let n=t.PrUtils.getElement(e,r);return t.PrUtils.asStructure(n)},getStructureProperty:function(e,r){let n=t.PrUtils.getProperty(e,r);return t.PrUtils.asStructure(n)},getStructureSize:function(e,r){let n=t.PrUtils.getKeysAsReadOnlyList(e,null);return t.isNull(n)?r:n.size()},getStructureWithKeyValuePair:function(e,r,n){let i=null;if(t.XCollectionUtils.hasElements(e)&&t.XStringUtils.isNotNullAndNotEmpty(r)&&t.XStringUtils.isNotNullAndNotEmpty(n)){let l=e.size();for(let s=0;s<l;s++){let l=e.getStructureAt(s);if(t.XString.isEqual(t.PrUtils.getStringValueProperty(l,r,null),n)){i=l;break}}}return i},getTimeElement:function(e,r,n,i){let l=i;let s=t.PrUtils.getStringElement(e,r);if(t.notNull(s)){let e=t.XTime.createTimeFromStringWithFlag(s.getString(),n);l=t.isNull(e)?i:e}return l},getTimeProperty:function(e,r,n,i){let l=i;let s=t.PrUtils.getStringProperty(e,r);if(t.notNull(s)){let e=t.XTime.createTimeFromStringWithFlag(s.getString(),n);l=t.isNull(e)?i:e}return l},getTypeFromElement:function(e){return t.isNull(e)?null:e.getType()},indexOf:function(e,r){let n=-1;if(!t.PrUtils.isListEmpty(e)){let i=e.size();for(let l=0;l<i;l++){if(t.XObjectExt.areEqual(e.get(l),r)){n=l;break}}}return n},isElementValid:function(e,r){return t.notNull(e)&&e.getType()===r},isListEmpty:function(e){return t.isNull(e)||e.isEmpty()},mergeStructures:function(e,r){t.PrUtils.mergeStructuresExt(e,r,false)},mergeStructuresExt:function(e,r,n){if(t.notNull(e)&&t.notNull(r)){let i=r.getKeysAsReadOnlyList();let l=i.size();for(let s=0;s<l;s++){let l=i.get(s);let o=r.getElementTypeByKey(l);if(o===t.PrElementType.BOOLEAN){e.putBoolean(l,r.getBooleanByKey(l))}else if(o===t.PrElementType.INTEGER){e.putInteger(l,r.getIntegerByKey(l))}else if(o===t.PrElementType.LONG){e.putLong(l,r.getLongByKey(l))}else if(o===t.PrElementType.DOUBLE){e.putDouble(l,r.getDoubleByKey(l))}else if(o===t.PrElementType.STRING){e.putString(l,r.getStringByKey(l))}else if(o===t.PrElementType.STRUCTURE||o===t.PrElementType.LIST){if(n&&o===t.PrElementType.STRUCTURE&&e.getStructureByKey(l)!==null){let i=e.getStructureByKey(l);let s=r.getByKey(l);t.PrUtils.mergeStructuresExt(i,s.asStructure(),n);e.put(l,i)}else{let n=r.getByKey(l);let i=t.PrUtils.createDeepCopy(n);e.put(l,i)}}}}},removeProperty:function(e,r){let n=null;if(t.notNull(e)&&t.PrUtils.getProperty(e,r)!==null){n=e.remove(r)}return n},serialize:function(e,r,n,i){let l=t.PrSerializerFactory.newSerializer(r,n,i,true);let s=l.serialize(e);t.XObjectExt.release(l);return s},serializeUnescaped:function(e,r,n,i){let l=t.PrSerializerFactory.newSerializer(r,n,i,false);let s=l.serialize(e);t.XObjectExt.release(l);return s}};t.PrUtilsJsonPath={addJsonPathElementToMap:function(e,r,n){if(t.isNull(e)){return n}if(t.isNull(r)){return n}let i=n;if(t.isNull(i)){i=t.XHashMapByString.create()}i.put(e,r);return i},addJsonPathElementsRecursive:function(e,r,n,i){let l=n;let s=t.PrUtils.asStructure(r);if(t.notNull(s)){let r=s.getKeysAsReadOnlyList();if(t.notNull(r)){for(let n=0;n<r.size();n++){let o=r.get(n);let u=s.getByKey(o);if(t.isNull(u)){continue}let a=t.PrUtilsJsonPath.increaseJsonPath(e,o,-1);l=t.PrUtilsJsonPath.addJsonPathElementToMap(a,u,l);if(i){l=t.PrUtilsJsonPath.addJsonPathElementsRecursive(a,u,l,i)}}}}let o=t.PrUtils.asList(r);if(t.notNull(o)){for(let r=0;r<t.PrUtils.getListSize(o,0);r++){let n=t.PrUtils.getElement(o,r);if(t.isNull(n)){continue}let s=t.PrUtilsJsonPath.increaseJsonPath(e,null,r);l=t.PrUtilsJsonPath.addJsonPathElementToMap(s,n,l);if(i){l=t.PrUtilsJsonPath.addJsonPathElementsRecursive(s,n,l,i)}}}return l},checkJsonPathConstraints:function(e){let r=t.PrUtilsJsonPath.getJsonPathTokens(e);if(t.isNull(r)){return t.XMessage.createError(t.OriginLayer.UTILITY,"json path null",null,false,null)}if(r.isEmpty()){return t.XMessage.createError(t.OriginLayer.UTILITY,"json path must start with $",null,false,null)}let n=false;for(let e=0;e<r.size();e++){let i=r.get(e);if(t.isNull(i)){return t.XMessage.createError(t.OriginLayer.UTILITY,"json path token must not be null",null,false,null)}if(!t.XString.isEqual(i,t.XString.trim(i))){return t.XMessage.createError(t.OriginLayer.UTILITY,"json path token must not contain whitespaces",null,false,null)}let l;let s=t.PrUtilsJsonPath.getJsonPathIndexOperators(i);if(t.isNull(s)){l=i}else{l=t.PrUtilsJsonPath.getJsonPathNode(i)}if(!t.XString.isEqual(l,t.XString.trim(l))){return t.XMessage.createError(t.OriginLayer.UTILITY,"json path token must not contain whitespaces",null,false,null)}if(e===0){if(!t.XString.isEqual(l,"$")){return t.XMessage.createError(t.OriginLayer.UTILITY,"json path must start with $",null,false,null)}}else{if(t.XString.isEqual(l,"$")){return t.XMessage.createError(t.OriginLayer.UTILITY,"$ must only be used at first position",null,false,null)}else if(t.XString.isEqual(i,"")){if(n){return t.XMessage.createError(t.OriginLayer.UTILITY,"... is not valid, instead use .. for recursive search",null,false,null)}n=true}else{n=false}}if(t.notNull(s)){for(let e=0;e<s.size();e++){let r=s.get(e);let n=t.PrUtilsJsonPath.getJsonPathIndexOperatorTokens(r);if(t.isNull(n)){return t.XMessage.createError(t.OriginLayer.UTILITY,"[] empty operator is not valid",null,false,null)}for(let e=0;e<n.size();e++){let r=n.get(e);if(t.isNull(r)){return t.XMessage.createError(t.OriginLayer.UTILITY,"[] empty operator is not valid",null,false,null)}if(!t.XString.isEqual(r,t.XString.trim(r))){return t.XMessage.createError(t.OriginLayer.UTILITY,"operator must not contain whitespaces",null,false,null)}if(t.XString.isEqual(r,"")){return t.XMessage.createError(t.OriginLayer.UTILITY,"[] empty operator is not valid",null,false,null)}if(t.XString.isEqual(r,"*")){if(e>0){return t.XMessage.createError(t.OriginLayer.UTILITY,"[*] operator is not valid in combination with other operators",null,false,null)}continue}let i=t.PrUtilsJsonPath.getJsonPathIndexOperatorFirst(r);if(i<-1){return t.XMessage.createError(t.OriginLayer.UTILITY,t.XStringUtils.concatenate3("[",r,"] invalid first operator, valid is 1 to n"),null,false,null)}if(i>0){continue}let l=t.PrUtilsJsonPath.getJsonPathIndexOperatorLast(r);if(l<-1){return t.XMessage.createError(t.OriginLayer.UTILITY,t.XStringUtils.concatenate3("[",r,"] invalid last operator, valid is -1 to -n"),null,false,null)}if(l>0){continue}let s=t.PrUtilsJsonPath.getJsonPathIndexOperatorNumber(r);if(s<0){return t.XMessage.createError(t.OriginLayer.UTILITY,t.XStringUtils.concatenate3("[",r,"] invalid number, valid is 0 to n"),null,false,null)}}}}}return null},getFirstElementFromPath:function(e,r){return t.PrUtilsJsonPath.getJsonPathSingleElement(t.PrUtilsJsonPath.getJsonPathElements(e,r))},getJsonPathElements:function(e,r){let n=t.PrUtilsJsonPath.getJsonPathTokens(r);let i=t.PrUtilsJsonPath.getJsonPathElementsInternal(e,n,0,null,null);return i},getJsonPathElementsInternal:function(e,r,n,i,l){let s=r.size();if(s<=n){return null}let o=r.get(n);let u;let a=t.PrUtilsJsonPath.getJsonPathIndexOperators(o);if(t.isNull(a)){u=o}else{u=t.PrUtilsJsonPath.getJsonPathNode(o)}let p=null;if(t.XString.isEqual(u,"$")){p=t.PrUtilsJsonPath.addJsonPathElementToMap(t.PrUtilsJsonPath.increaseJsonPath(l,"$",-1),e,p)}else if(t.XString.isEqual(u,"*")){p=t.PrUtilsJsonPath.addJsonPathElementsRecursive(l,e,p,false)}else if(t.XString.isEqual(u,"")){p=t.PrUtilsJsonPath.addJsonPathElementToMap(l,e,p);p=t.PrUtilsJsonPath.addJsonPathElementsRecursive(l,e,p,true)}else{let r=t.PrUtils.getProperty(t.PrUtils.asStructure(e),u);if(t.notNull(r)){p=t.PrUtilsJsonPath.addJsonPathElementToMap(t.PrUtilsJsonPath.increaseJsonPath(l,u,-1),r,p)}}if(t.notNull(a)){p=t.PrFilter.create().withLists().filterJsonPathElements(p);if(t.notNull(p)){let e=null;let r=p.getKeysAsReadOnlyList();for(let n=0;n<r.size();n++){let i=r.get(n);let l=p.getByKey(i);e=t.PrUtilsJsonPath.resolveJsonPathIndexOperators(i,l,e,a,0)}p=e}}let c=i;if(t.notNull(p)&&p.size()>0){let e=n+1===s;let i=p.getKeysAsReadOnlyList();for(let l=0;l<i.size();l++){let s=i.get(l);let o=p.getByKey(s);if(e){c=t.PrUtilsJsonPath.addJsonPathElementToMap(s,o,c)}else{c=t.PrUtilsJsonPath.getJsonPathElementsInternal(o,r,n+1,c,s)}}}return c},getJsonPathIndexOperatorFirst:function(e){if(t.isNull(e)){return-1}if(!t.XString.startsWith(e,":")){return-1}let r=t.XString.substring(e,1,t.XString.size(e));let n=t.XInteger.convertFromStringWithDefault(r,0);if(n<1){return-2}return n},getJsonPathIndexOperatorLast:function(e){if(t.isNull(e)){return-1}if(!t.XString.endsWith(e,":")){return-1}let r=t.XStringUtils.stripRight(e,1);let n=t.XInteger.convertFromStringWithDefault(r,0);if(n>-1){return-2}return n*-1},getJsonPathIndexOperatorNumber:function(e){return t.XInteger.convertFromStringWithDefault(e,-1)},getJsonPathIndexOperatorTokens:function(e){if(t.XStringUtils.isNullOrEmpty(e)){return null}let r=t.XStringTokenizer.splitString(e,",");if(t.isNull(r)||r.size()<1){return null}return r},getJsonPathIndexOperators:function(e){if(t.isNull(e)){return null}if(!t.XString.endsWith(e,"]")){return null}let r=t.XString.indexOf(e,"[");if(r<0){return null}let n=t.XString.substring(e,r+1,t.XString.size(e)-1);return t.XStringTokenizer.splitString(n,"][")},getJsonPathNode:function(e){if(t.isNull(e)){return null}if(!t.XString.endsWith(e,"]")){return e}let r=t.XString.indexOf(e,"[");if(r<0){return e}return t.XString.substring(e,0,r)},getJsonPathSingleElement:function(e){if(t.isNull(e)||e.size()!==1){return null}return e.getByKey(e.getKeysAsReadOnlyList().get(0))},getJsonPathSinglePath:function(e){if(t.isNull(e)||e.size()!==1){return null}return e.getKeysAsReadOnlyList().get(0)},getJsonPathTokens:function(e){if(t.XStringUtils.isNullOrEmpty(e)){return null}let r=t.XString.startsWith(e,".");let n=t.XString.endsWith(e,".");let i=e;if(r||n){let l=t.XStringBuffer.create();if(r){l.append("startsWithDot")}l.append(e);if(n){l.append("endsWithDot")}i=l.toString()}let l=t.XStringTokenizer.splitString(i,".");if(t.isNull(l)||l.size()<1){return null}if(r||n){let e=t.XList.create();for(let t=0;t<l.size();t++){if(t===0&&r){continue}if(t+1===l.size()&&n){continue}e.add(l.get(t))}l=e}return l},increaseJsonPath:function(e,r,n){let i=t.XStringBuffer.create();if(t.notNull(e)){i.append(e)}if(t.notNull(r)){if(i.length()>0){i.append(".")}i.append(r)}if(n>-1){i.append("[");i.appendInt(n);i.append("]")}if(i.length()===0){return null}return i.toString()},resolveJsonPathIndexOperators:function(e,r,n,i,l){if(t.isNull(r)){return n}if(t.isNull(i)){return n}if(l<0){return n}let s=i.size();if(l>=s){return n}let o=i.get(l);let u=t.PrUtilsJsonPath.getJsonPathIndexOperatorTokens(o);if(t.isNull(u)){return n}let a=null;for(let n=0;n<u.size();n++){let i=u.get(n);if(t.XString.isEqual(i,"*")){a=t.PrUtilsJsonPath.addJsonPathElementsRecursive(e,r,a,false)}else{let n=t.PrUtils.getListSize(r,0);let l=t.PrUtilsJsonPath.getJsonPathIndexOperatorFirst(i);if(l>0){if(l>n){l=n}for(let n=0;n<l;n++){a=t.PrUtilsJsonPath.addJsonPathElementToMap(t.PrUtilsJsonPath.increaseJsonPath(e,null,n),t.PrUtils.getElement(r,n),a)}}else{let l=t.PrUtilsJsonPath.getJsonPathIndexOperatorLast(i);if(l>0){if(l>n){l=n}let i=n-l;for(let n=i;n<l+i;n++){a=t.PrUtilsJsonPath.addJsonPathElementToMap(t.PrUtilsJsonPath.increaseJsonPath(e,null,n),t.PrUtils.getElement(r,n),a)}}else{let n=t.PrUtilsJsonPath.getJsonPathIndexOperatorNumber(i);if(n>-1){a=t.PrUtilsJsonPath.addJsonPathElementToMap(t.PrUtilsJsonPath.increaseJsonPath(e,null,n),t.PrUtils.getElement(r,n),a)}}}}}let p=n;let c=l+1===s;if(!c){a=t.PrFilter.create().withLists().filterJsonPathElements(a)}if(t.notNull(a)){let e=a.getKeysAsReadOnlyList();for(let r=0;r<e.size();r++){let n=e.get(r);let s=a.getByKey(n);if(c){p=t.PrUtilsJsonPath.addJsonPathElementToMap(n,s,p)}else{p=t.PrUtilsJsonPath.resolveJsonPathIndexOperators(n,t.PrUtils.asList(s),p,i,l+1)}}}return p},sortJsonPathElements:function(e){if(t.isNull(e)||e.size()<1){return null}let r=t.PrUtilsJsonPath.sortJsonPaths(e.getKeysAsReadOnlyList());let n=t.XList.create();for(let t=0;t<r.size();t++){let i=e.getByKey(r.get(t));n.add(i)}return n},sortJsonPaths:function(e){if(t.isNull(e)||e.size()<1){return null}let r=t.XHashMapByString.create();let n=0;for(let i=0;i<e.size();i++){let l=e.get(i);let s=t.PrUtilsJsonPath.getJsonPathTokens(l);r.put(l,s);let o=s.size();if(o>n){n=o}}let i=t.XArrayOfInt.create(n);for(let n=0;n<e.size();n++){let l=e.get(n);let s=r.getByKey(l);for(let e=0;e<s.size();e++){let r=t.XString.size(s.get(e));if(r>i.get(e)){i.set(e,r)}}}let l=t.XHashMapByString.create();for(let n=0;n<e.size();n++){let s=e.get(n);let o=r.getByKey(s);let u=t.XStringBuffer.create();for(let e=0;e<o.size();e++){if(e>0){u.append(".")}let r=o.get(e);u.append(r);let n=t.XString.size(r);let l=i.get(e);for(let t=0;t<l-n;t++){u.append(" ")}}l.put(u.toString(),s)}let s=t.XList.createWithList(l.getKeysAsReadOnlyList());s.sortByDirection(t.XSortDirection.ASCENDING);let o=t.XList.create();for(let t=0;t<s.size();t++){let e=s.get(t);let r=l.getByKey(e);o.add(r)}return o}};t.ReplaceTagHandler={charDot:46,findTagValue:function(e,r){let n=0;let i=t.XString.size(r);while(n<i&&t.XString.getCharAt(r,n)===t.ReplaceTagHandler.charDot){n++}let l=e;for(let t=0;t<n-1;t++){l=l.getParent();if(l.isList()){l=l.getParent()}}let s=t.XString.substring(r,n,-1);return t.PrUtils.convertElementToStringValue(l.asStructure().getByKey(s),null)},handle:function(e,r){let n=r;while(t.XString.containsString(n,"<<")||t.XString.containsString(n,">>")){n=t.ReplaceTagHandler.handleReplaceTags(e,n)}return n},handleReplaceTags:function(e,r){let n=t.XStringBuffer.create();let i=t.XStringTokenizer.splitString(r,"<<");let l=i.size();for(let r=0;r<l;r++){let l=i.get(r);if(t.XStringUtils.isNullOrEmpty(l)){continue}let s=t.XString.indexOf(l,">>");if(s===-1){n.append(l);continue}let o=t.XString.substring(l,0,s);let u=t.ReplaceTagHandler.findTagValue(e,o);if(t.isNull(u)){return null}n.append(u);n.append(t.XString.substring(l,s+2,-1))}return n.toString()}};t.TemplateWalker={TEMPLATES:"templates",root:null,walk:function(e){if(!e.containsKey(t.TemplateWalker.TEMPLATES)){return e}let r=t.PrUtils.deepCopyElement(e).asStructure();t.TemplateWalker.root=r;t.TemplateWalker.walkStructure(r);return r},walkList:function(e){let r=e.size();for(let n=0;n<r;n++){let r=e.get(n);if(t.isNull(r)){continue}let i=r.getType();if(i===t.PrElementType.STRUCTURE){let i=r.asStructure();if(i.containsKey("$ref")){let r=t.PrTemplateStructure.createStructureWrapper(t.TemplateWalker.root,e,i);e.set(n,r)}else{t.TemplateWalker.walkStructure(i)}}else if(i===t.PrElementType.LIST){t.TemplateWalker.walkList(r.asList())}}},walkStructure:function(e){let r=e.getKeysAsReadOnlyList();let n=r.size();for(let i=0;i<n;i++){let n=r.get(i);let l=e.getByKey(n);if(t.isNull(l)||t.XString.isEqual(n,t.TemplateWalker.TEMPLATES)){continue}let s=l.getType();if(s===t.PrElementType.STRUCTURE){let r=l.asStructure();if(r.containsKey("$ref")){let i=t.PrTemplateStructure.createStructureWrapper(t.TemplateWalker.root,e,r);e.put(n,i)}else{t.TemplateWalker.walkStructure(r)}}else if(s===t.PrElementType.LIST){t.TemplateWalker.walkList(l.asList())}}}};t.XmlDocumentSerializer=function(){};t.XmlDocumentSerializer.prototype=new t.XObject;t.XmlDocumentSerializer.prototype._ff_c="XmlDocumentSerializer";t.XmlDocumentSerializer.create=function(){let e=new t.XmlDocumentSerializer;e.initialize(false,false,0);return e};t.XmlDocumentSerializer.createPretty=function(e){let r=new t.XmlDocumentSerializer;r.initialize(false,true,e);return r};t.XmlDocumentSerializer.createSort=function(){let e=new t.XmlDocumentSerializer;e.initialize(true,false,0);return e};t.XmlDocumentSerializer.createSortPretty=function(e){let r=new t.XmlDocumentSerializer;r.initialize(true,true,e);return r};t.XmlDocumentSerializer.prototype.m_buffer=null;t.XmlDocumentSerializer.prototype.m_indentation=0;t.XmlDocumentSerializer.prototype.m_prettyPrint=false;t.XmlDocumentSerializer.prototype.m_sortStructureElements=false;t.XmlDocumentSerializer.prototype.appendAttribute=function(e,r){this.getBuffer().append(" ");if(t.isNull(r)){this.getBuffer().append("null")}else{this.getBuffer().append(r)}this.getBuffer().append('="');this.appendTextContent(e,t.XmlUtils.ATTRIBUTE_ESCAPE);this.getBuffer().append('"')};t.XmlDocumentSerializer.prototype.appendElement=function(e,r,n){if(this.isPrettyPrint()){this.appendIndentationString(n)}if(t.isNull(e)){this.getBuffer().append("null")}else{if(e.isStructure()){this.appendStructure(e,r,n)}else if(e.isList()){this.appendList(e,r,n)}else{if(this.isPrettyPrint()){this.getBuffer().appendNewLine();this.appendIndentationString(n)}this.appendTextContent(e,t.XmlUtils.TEXT_NODE_ESCAPE)}}};t.XmlDocumentSerializer.prototype.appendIndentationString=function(t){if(this.getIndentation()>=1&&t>=1){let e=this.getIndentation()*t;for(let t=0;t<e;t++){this.getBuffer().append(" ")}}};t.XmlDocumentSerializer.prototype.appendList=function(t,e,r){let n=t.asList();let i=n.size();for(let t=0;t<i;t++){this.appendStructure(n.get(t),e,r)}};t.XmlDocumentSerializer.prototype.appendPrologElement=function(e,r){if(t.notNull(e)){this.getBuffer().append("<").append(r);let n=e.getKeysAsReadOnlyList();for(let r=0;r<n.size();r++){let i=n.get(r);let l=e.getByKey(i);if(t.XString.startsWith(i,"-")&&(l.isString()||l.isDouble()||l.isBoolean()||l.isNumeric()||l.getType()===t.PrElementType.THE_NULL)){this.appendAttribute(l,t.XString.substring(i,1,t.XString.size(i)))}else{throw t.XException.createIllegalArgumentException("INVALID PROLOG RULE")}}this.getBuffer().append("?>")}else{throw t.XException.createIllegalArgumentException("INVALID PROLOG RULE")}};t.XmlDocumentSerializer.prototype.appendStructure=function(e,r,n){let i;let l;let s;if(this.isPrettyPrint()){this.getBuffer().appendNewLine();this.appendIndentationString(n)}this.getBuffer().append("<");this.getBuffer().append(r);if(e.isString()||e.isDouble()||e.isBoolean()||e.isNumeric()||e.getType()===t.PrElementType.THE_NULL){this.getBuffer().append(">");if(this.isPrettyPrint()){this.getBuffer().appendNewLine();this.appendIndentationString(n+1)}this.appendTextContent(e,t.XmlUtils.TEXT_NODE_ESCAPE);if(this.isPrettyPrint()){this.getBuffer().appendNewLine();this.appendIndentationString(n)}this.getBuffer().append("</");this.getBuffer().append(r);this.getBuffer().append(">");return}let o=e.asStructure();let u=t.XList.createWithList(o.getKeysAsReadOnlyList());let a=true;if(t.notNull(u)){let e=u.size();if(this.isSortStructureElements()&&e>1){u.sortByDirection(t.XSortDirection.ASCENDING)}for(i=0;i<e;i++){l=u.get(i);s=o.getByKey(l);if(t.XString.startsWith(l,"-")&&(s.isString()||s.isDouble()||s.isBoolean()||s.isNumeric()||s.getType()===t.PrElementType.THE_NULL)){this.appendAttribute(s,t.XString.substring(l,1,t.XString.size(l)))}else{a=false}}if(a){this.getBuffer().append("/")}this.getBuffer().append(">");for(i=0;i<e;i++){l=u.get(i);s=o.getByKey(l);if(t.XString.startsWith(l,"-")&&(s.isString()||s.isDouble()||s.isBoolean()||s.isNumeric()||s.getType()===t.PrElementType.THE_NULL)){continue}this.appendElement(s,l,n+1)}}else{this.getBuffer().append("/");this.getBuffer().append(">")}if(!a){if(this.isPrettyPrint()){this.getBuffer().appendNewLine();this.appendIndentationString(n)}this.getBuffer().append("</");this.getBuffer().append(r);this.getBuffer().append(">")}};t.XmlDocumentSerializer.prototype.appendTextContent=function(e,r){if(e.isString()){let n=e.asString().getString();if(t.isNull(n)){this.getBuffer().append("null")}else{this.getBuffer().append(t.XmlUtils.escapeXml(t.XmlUtils.unescapeJson(n),r))}}else if(e.isDouble()){this.getBuffer().appendDouble(e.asNumber().getDouble())}else if(e.isNumeric()){this.getBuffer().appendLong(e.asNumber().getLong())}else if(e.isBoolean()){if(e.asBoolean().getBoolean()){this.getBuffer().append("true")}else{this.getBuffer().append("false")}}else if(e.getType()===t.PrElementType.THE_NULL){this.getBuffer().append("null")}};t.XmlDocumentSerializer.prototype.getBuffer=function(){return this.m_buffer};t.XmlDocumentSerializer.prototype.getIndentation=function(){return this.m_indentation};t.XmlDocumentSerializer.prototype.initialize=function(e,r,n){this.setBuffer(t.XStringBuffer.create());this.setSortStructureElements(e);this.setPrettyPrint(r);this.setIndentation(n)};t.XmlDocumentSerializer.prototype.isPrettyPrint=function(){return this.m_prettyPrint};t.XmlDocumentSerializer.prototype.isSortStructureElements=function(){return this.m_sortStructureElements};t.XmlDocumentSerializer.prototype.serialize=function(e){this.getBuffer().clear();if(!e.isStructure()){throw t.XException.createIllegalArgumentException("INVALID ROOT ELEMENT: Must be Structure")}let r=e.asStructure();let n=r.getKeysAsReadOnlyList();if(t.isNull(n)){throw t.XException.createIllegalArgumentException("INVALID ROOT ELEMENT: Must be Structure")}let i=t.XStream.ofString(n).filter(e=>t.XString.startsWith(e.getString(),"?")).collect(t.XStreamCollector.toListOfString(t=>t.getString()));let l=t.XStream.ofString(n).filter(e=>!t.XString.startsWith(e.getString(),"?")).collect(t.XStreamCollector.toListOfString(t=>t.getString()));let s=l.size();if(s!==1){throw t.XException.createIllegalArgumentException("INVALID ROOT ELEMENT: Must be at most one root element")}for(let t=0;t<i.size();t++){let e=i.get(t);this.appendPrologElement(r.getStructureByKey(e),e)}let o=l.get(0);let u=r.getByKey(o);if(u.isStructure()){this.appendStructure(u,o,0)}else{throw t.XException.createIllegalArgumentException("INVALID ROOT ELEMENT: Must be Structure")}return this.getBuffer().toString()};t.XmlDocumentSerializer.prototype.setBuffer=function(t){this.m_buffer=t};t.XmlDocumentSerializer.prototype.setIndentation=function(t){this.m_indentation=t};t.XmlDocumentSerializer.prototype.setPrettyPrint=function(t){this.m_prettyPrint=t};t.XmlDocumentSerializer.prototype.setSortStructureElements=function(t){this.m_sortStructureElements=t};t.XmlDomPrUtil={appendChildElement:function(e,r){return t.XmlDomPrUtil.appendChildElementWithTextContent(e,r,null)},appendChildElementWithTextContent:function(e,r,n){let i=e.getElementTypeByKey(r);let l=null;if(i===t.PrElementType.THE_NULL){l=e.putNewStructure(r)}else if(i===t.PrElementType.LIST){l=e.getListByKey(r).addNewStructure()}else if(i===t.PrElementType.STRUCTURE){let t=e.getStructureByKey(r);let n=e.putNewList(r);n.add(t);l=n.addNewStructure()}if(t.isNull(l)){throw t.XException.createIllegalStateException("Cannot mix element children types")}else if(t.notNull(n)){l.putString(r,n)}return l},appendPrologElement:function(e,r){return e.putNewStructure(t.XStringUtils.concatenate2("?",r))},createDocument:function(){return t.PrFactory.createStructure()},getAttribute:function(e,r){return e.getStringByKey(t.XStringUtils.concatenate2("-",r))},setAttribute:function(e,r,n){e.putString(t.XStringUtils.concatenate2("-",r),n);return e}};t.XmlUtils={AMP_CHAR:"&",AMP_ENTITY:"&amp;",APOS_CHAR:"'",APOS_ENTITY:"&apos;",ATTRIBUTE_ESCAPE:2,FULL_ESCAPE:3,GT_CHAR:">",GT_ENTITY:"&gt;",LT_CHAR:"<",LT_ENTITY:"&lt;",MUST_NOT_ESCAPE:0,QUOT_CHAR:'"',QUOT_ENTITY:"&quot;",TEXT_NODE_ESCAPE:1,entityMappings:null,extendedEntityMappings:null,escapeXml:function(e,r){if(t.isNull(e)){return null}switch(r){case t.XmlUtils.MUST_NOT_ESCAPE:return e;case t.XmlUtils.TEXT_NODE_ESCAPE:return t.XmlUtils.escapeXmlTextNodeLazy(e);case t.XmlUtils.ATTRIBUTE_ESCAPE:return t.XmlUtils.escapeXmlAttributeLazy(e);default:return t.XmlUtils.escapeXmlString(e)}},escapeXmlAttributeLazy:function(e){if(t.isNull(e)){return null}let r=t.XString.containsString(e,t.XmlUtils.AMP_CHAR)?t.XString.replace(e,t.XmlUtils.AMP_CHAR,t.XmlUtils.AMP_ENTITY):e;r=t.XString.containsString(r,t.XmlUtils.QUOT_CHAR)?t.XString.replace(r,t.XmlUtils.QUOT_CHAR,t.XmlUtils.QUOT_ENTITY):r;return t.XString.containsString(r,t.XmlUtils.LT_CHAR)?t.XString.replace(r,t.XmlUtils.LT_CHAR,t.XmlUtils.LT_ENTITY):r},escapeXmlString:function(e){if(t.isNull(e)){return null}let r=t.XString.containsString(e,t.XmlUtils.AMP_CHAR)?t.XString.replace(e,t.XmlUtils.AMP_CHAR,t.XmlUtils.AMP_ENTITY):e;r=t.XString.containsString(r,t.XmlUtils.QUOT_CHAR)?t.XString.replace(r,t.XmlUtils.QUOT_CHAR,t.XmlUtils.QUOT_ENTITY):r;r=t.XString.containsString(r,t.XmlUtils.APOS_CHAR)?t.XString.replace(r,t.XmlUtils.APOS_CHAR,t.XmlUtils.APOS_ENTITY):r;r=t.XString.containsString(r,t.XmlUtils.LT_CHAR)?t.XString.replace(r,t.XmlUtils.LT_CHAR,t.XmlUtils.LT_ENTITY):r;return t.XString.containsString(r,t.XmlUtils.GT_CHAR)?t.XString.replace(r,t.XmlUtils.GT_CHAR,t.XmlUtils.GT_ENTITY):r},escapeXmlTextNodeLazy:function(e){if(t.isNull(e)){return null}let r=t.XString.containsString(e,t.XmlUtils.AMP_CHAR)?t.XString.replace(e,t.XmlUtils.AMP_CHAR,t.XmlUtils.AMP_ENTITY):e;return t.XString.containsString(r,t.XmlUtils.LT_CHAR)?t.XString.replace(r,t.XmlUtils.LT_CHAR,t.XmlUtils.LT_ENTITY):r},staticSetup:function(){t.XmlUtils.entityMappings=t.XHashMapByString.create();t.XmlUtils.extendedEntityMappings=t.XHashMapByString.create();t.XmlUtils.entityMappings.put("&quot;",'"');t.XmlUtils.entityMappings.put("&apos;","'");t.XmlUtils.entityMappings.put("&amp;","&");t.XmlUtils.entityMappings.put("&lt;","<");t.XmlUtils.entityMappings.put("&gt;",">");t.XmlUtils.extendedEntityMappings.put("&Acirc;","Â");t.XmlUtils.extendedEntityMappings.put("&acirc;","â");t.XmlUtils.extendedEntityMappings.put("&acute;","´");t.XmlUtils.extendedEntityMappings.put("&AElig;","Æ");t.XmlUtils.extendedEntityMappings.put("&aelig;","æ");t.XmlUtils.extendedEntityMappings.put("&Agrave;","À");t.XmlUtils.extendedEntityMappings.put("&agrave;","à");t.XmlUtils.extendedEntityMappings.put("&alefsym;","ℵ");t.XmlUtils.extendedEntityMappings.put("&Alpha;","Α");t.XmlUtils.extendedEntityMappings.put("&alpha;","α");t.XmlUtils.extendedEntityMappings.put("&amp;","&");t.XmlUtils.extendedEntityMappings.put("&and;","∧");t.XmlUtils.extendedEntityMappings.put("&ang;","∠");t.XmlUtils.extendedEntityMappings.put("&apos;","'");t.XmlUtils.extendedEntityMappings.put("&Aring;","Å");t.XmlUtils.extendedEntityMappings.put("&aring;","å");t.XmlUtils.extendedEntityMappings.put("&asymp;","≈");t.XmlUtils.extendedEntityMappings.put("&Atilde;","Ã");t.XmlUtils.extendedEntityMappings.put("&atilde;","ã");t.XmlUtils.extendedEntityMappings.put("&Auml;","Ä");t.XmlUtils.extendedEntityMappings.put("&auml;","ä");t.XmlUtils.extendedEntityMappings.put("&bdquo;","„");t.XmlUtils.extendedEntityMappings.put("&Beta;","Β");t.XmlUtils.extendedEntityMappings.put("&beta;","β");t.XmlUtils.extendedEntityMappings.put("&brvbar;","¦");t.XmlUtils.extendedEntityMappings.put("&bull;","•");t.XmlUtils.extendedEntityMappings.put("&cap;","∩");t.XmlUtils.extendedEntityMappings.put("&Ccedil;","Ç");t.XmlUtils.extendedEntityMappings.put("&ccedil;","ç");t.XmlUtils.extendedEntityMappings.put("&cedil;","¸");t.XmlUtils.extendedEntityMappings.put("&cent;","¢");t.XmlUtils.extendedEntityMappings.put("&Chi;","Χ");t.XmlUtils.extendedEntityMappings.put("&chi;","χ");t.XmlUtils.extendedEntityMappings.put("&circ;","ˆ");t.XmlUtils.extendedEntityMappings.put("&clubs;","♣");t.XmlUtils.extendedEntityMappings.put("&cong;","≅");t.XmlUtils.extendedEntityMappings.put("&copy;","©");t.XmlUtils.extendedEntityMappings.put("&crarr;","↵");t.XmlUtils.extendedEntityMappings.put("&cup;","∪");t.XmlUtils.extendedEntityMappings.put("&curren;","¤");t.XmlUtils.extendedEntityMappings.put("&Dagger;","‡");t.XmlUtils.extendedEntityMappings.put("&dagger;","†");t.XmlUtils.extendedEntityMappings.put("&dArr;","⇓");t.XmlUtils.extendedEntityMappings.put("&darr;","↓");t.XmlUtils.extendedEntityMappings.put("&deg;","°");t.XmlUtils.extendedEntityMappings.put("&Delta;","Δ");t.XmlUtils.extendedEntityMappings.put("&delta;","δ");t.XmlUtils.extendedEntityMappings.put("&diams;","♦");t.XmlUtils.extendedEntityMappings.put("&divide;","÷");t.XmlUtils.extendedEntityMappings.put("&Eacute;","É");t.XmlUtils.extendedEntityMappings.put("&eacute;","é");t.XmlUtils.extendedEntityMappings.put("&Ecirc;","Ê");t.XmlUtils.extendedEntityMappings.put("&ecirc;","ê");t.XmlUtils.extendedEntityMappings.put("&Egrave;","È");t.XmlUtils.extendedEntityMappings.put("&egrave;","è");t.XmlUtils.extendedEntityMappings.put("&empty;","∅");t.XmlUtils.extendedEntityMappings.put("&emsp;"," ");t.XmlUtils.extendedEntityMappings.put("&ensp;"," ");t.XmlUtils.extendedEntityMappings.put("&Epsilon;","Ε");t.XmlUtils.extendedEntityMappings.put("&epsilon;","ε");t.XmlUtils.extendedEntityMappings.put("&equiv;","≡");t.XmlUtils.extendedEntityMappings.put("&Eta;","Η");t.XmlUtils.extendedEntityMappings.put("&eta;","η");t.XmlUtils.extendedEntityMappings.put("&ETH;","Ð");t.XmlUtils.extendedEntityMappings.put("&eth;","ð");t.XmlUtils.extendedEntityMappings.put("&Euml;","Ë");t.XmlUtils.extendedEntityMappings.put("&euml;","ë");t.XmlUtils.extendedEntityMappings.put("&euro;","€");t.XmlUtils.extendedEntityMappings.put("&exist;","∃");t.XmlUtils.extendedEntityMappings.put("&fnof;","ƒ");t.XmlUtils.extendedEntityMappings.put("&forall;","∀");t.XmlUtils.extendedEntityMappings.put("&frac12;","½");t.XmlUtils.extendedEntityMappings.put("&frac14;","¼");t.XmlUtils.extendedEntityMappings.put("&frac34;","¾");t.XmlUtils.extendedEntityMappings.put("&frasl;","⁄");t.XmlUtils.extendedEntityMappings.put("&Gamma;","Γ");t.XmlUtils.extendedEntityMappings.put("&gamma;","γ");t.XmlUtils.extendedEntityMappings.put("&ge;","≥");t.XmlUtils.extendedEntityMappings.put("&gt;",">");t.XmlUtils.extendedEntityMappings.put("&hArr;","⇔");t.XmlUtils.extendedEntityMappings.put("&harr;","↔");t.XmlUtils.extendedEntityMappings.put("&hearts;","♥");t.XmlUtils.extendedEntityMappings.put("&hellip;","…");t.XmlUtils.extendedEntityMappings.put("&Iacute;","Í");t.XmlUtils.extendedEntityMappings.put("&iacute;","í");t.XmlUtils.extendedEntityMappings.put("&Icirc;","Î");t.XmlUtils.extendedEntityMappings.put("&icirc;","î");t.XmlUtils.extendedEntityMappings.put("&iexcl;","¡");t.XmlUtils.extendedEntityMappings.put("&Igrave;","Ì");t.XmlUtils.extendedEntityMappings.put("&igrave;","ì");t.XmlUtils.extendedEntityMappings.put("&image;","ℑ");t.XmlUtils.extendedEntityMappings.put("&infin;","∞");t.XmlUtils.extendedEntityMappings.put("&int;","∫");t.XmlUtils.extendedEntityMappings.put("&Iota;","Ι");t.XmlUtils.extendedEntityMappings.put("&iota;","ι");t.XmlUtils.extendedEntityMappings.put("&iquest;","¿");t.XmlUtils.extendedEntityMappings.put("&isin;","∈");t.XmlUtils.extendedEntityMappings.put("&Iuml;","Ï");t.XmlUtils.extendedEntityMappings.put("&iuml;","ï");t.XmlUtils.extendedEntityMappings.put("&Kappa;","Κ");t.XmlUtils.extendedEntityMappings.put("&kappa;","κ");t.XmlUtils.extendedEntityMappings.put("&Lambda;","Λ");t.XmlUtils.extendedEntityMappings.put("&lambda;","λ");t.XmlUtils.extendedEntityMappings.put("&lang;","⟨");t.XmlUtils.extendedEntityMappings.put("&laquo;","«");t.XmlUtils.extendedEntityMappings.put("&lArr;","⇐");t.XmlUtils.extendedEntityMappings.put("&larr;","←");t.XmlUtils.extendedEntityMappings.put("&lceil;","⌈");t.XmlUtils.extendedEntityMappings.put("&ldquo;","“");t.XmlUtils.extendedEntityMappings.put("&le;","≤");t.XmlUtils.extendedEntityMappings.put("&lfloor;","⌊");t.XmlUtils.extendedEntityMappings.put("&lowast;","∗");t.XmlUtils.extendedEntityMappings.put("&loz;","◊");t.XmlUtils.extendedEntityMappings.put("&lsaquo;","‹");t.XmlUtils.extendedEntityMappings.put("&lsquo;","‘");t.XmlUtils.extendedEntityMappings.put("&lt;","<");t.XmlUtils.extendedEntityMappings.put("&macr;","¯");t.XmlUtils.extendedEntityMappings.put("&mdash;","—");t.XmlUtils.extendedEntityMappings.put("&micro;","µ");t.XmlUtils.extendedEntityMappings.put("&middot;","·");t.XmlUtils.extendedEntityMappings.put("&minus;","−");t.XmlUtils.extendedEntityMappings.put("&Mu;","Μ");t.XmlUtils.extendedEntityMappings.put("&mu;","μ");t.XmlUtils.extendedEntityMappings.put("&nabla;","∇");t.XmlUtils.extendedEntityMappings.put("&nbsp;"," ");t.XmlUtils.extendedEntityMappings.put("&ndash;","–");t.XmlUtils.extendedEntityMappings.put("&ne;","≠");t.XmlUtils.extendedEntityMappings.put("&ni;","∋");t.XmlUtils.extendedEntityMappings.put("&not;","¬");t.XmlUtils.extendedEntityMappings.put("&notin;","∉");t.XmlUtils.extendedEntityMappings.put("&nsub;","⊄");t.XmlUtils.extendedEntityMappings.put("&Ntilde;","Ñ");t.XmlUtils.extendedEntityMappings.put("&ntilde;","ñ");t.XmlUtils.extendedEntityMappings.put("&Nu;","Ν");t.XmlUtils.extendedEntityMappings.put("&nu;","ν");t.XmlUtils.extendedEntityMappings.put("&Oacute;","Ó");t.XmlUtils.extendedEntityMappings.put("&oacute;","ó");t.XmlUtils.extendedEntityMappings.put("&Ocirc;","Ô");t.XmlUtils.extendedEntityMappings.put("&ocirc;","ô");t.XmlUtils.extendedEntityMappings.put("&OElig;","Œ");t.XmlUtils.extendedEntityMappings.put("&oelig;","œ");t.XmlUtils.extendedEntityMappings.put("&Ograve;","Ò");t.XmlUtils.extendedEntityMappings.put("&ograve;","ò");t.XmlUtils.extendedEntityMappings.put("&oline;","‾");t.XmlUtils.extendedEntityMappings.put("&Omega;","Ω");t.XmlUtils.extendedEntityMappings.put("&omega;","ω");t.XmlUtils.extendedEntityMappings.put("&Omicron;","Ο");t.XmlUtils.extendedEntityMappings.put("&omicron;","ο");t.XmlUtils.extendedEntityMappings.put("&oplus;","⊕");t.XmlUtils.extendedEntityMappings.put("&or;","∨");t.XmlUtils.extendedEntityMappings.put("&ordf;","ª");t.XmlUtils.extendedEntityMappings.put("&ordm;","º");t.XmlUtils.extendedEntityMappings.put("&Oslash;","Ø");t.XmlUtils.extendedEntityMappings.put("&oslash;","ø");t.XmlUtils.extendedEntityMappings.put("&Otilde;","Õ");t.XmlUtils.extendedEntityMappings.put("&otilde;","õ");t.XmlUtils.extendedEntityMappings.put("&otimes;","⊗");t.XmlUtils.extendedEntityMappings.put("&Ouml;","Ö");t.XmlUtils.extendedEntityMappings.put("&ouml;","ö");t.XmlUtils.extendedEntityMappings.put("&para;","¶");t.XmlUtils.extendedEntityMappings.put("&part;","∂");t.XmlUtils.extendedEntityMappings.put("&permil;","‰");t.XmlUtils.extendedEntityMappings.put("&perp;","⊥");t.XmlUtils.extendedEntityMappings.put("&Phi;","Φ");t.XmlUtils.extendedEntityMappings.put("&phi;","φ");t.XmlUtils.extendedEntityMappings.put("&Pi;","Π");t.XmlUtils.extendedEntityMappings.put("&pi;","π");t.XmlUtils.extendedEntityMappings.put("&piv;","ϖ");t.XmlUtils.extendedEntityMappings.put("&plusmn;","±");t.XmlUtils.extendedEntityMappings.put("&pound;","£");t.XmlUtils.extendedEntityMappings.put("&Prime;","″");t.XmlUtils.extendedEntityMappings.put("&prime;","′");t.XmlUtils.extendedEntityMappings.put("&prod;","∏");t.XmlUtils.extendedEntityMappings.put("&prop;","∝");t.XmlUtils.extendedEntityMappings.put("&Psi;","Ψ");t.XmlUtils.extendedEntityMappings.put("&psi;","ψ");t.XmlUtils.extendedEntityMappings.put("&quot;",'"');t.XmlUtils.extendedEntityMappings.put("&radic;","√");t.XmlUtils.extendedEntityMappings.put("&rang;","⟩");t.XmlUtils.extendedEntityMappings.put("&raquo;","»");t.XmlUtils.extendedEntityMappings.put("&rArr;","⇒");t.XmlUtils.extendedEntityMappings.put("&rarr;","→");t.XmlUtils.extendedEntityMappings.put("&rceil;","⌉");t.XmlUtils.extendedEntityMappings.put("&rdquo;","”");t.XmlUtils.extendedEntityMappings.put("&real;","ℜ");t.XmlUtils.extendedEntityMappings.put("&reg;","®");t.XmlUtils.extendedEntityMappings.put("&rfloor;","⌋");t.XmlUtils.extendedEntityMappings.put("&Rho;","Ρ");t.XmlUtils.extendedEntityMappings.put("&rho;","ρ");t.XmlUtils.extendedEntityMappings.put("&rsaquo;","›");t.XmlUtils.extendedEntityMappings.put("&rsquo;","’");t.XmlUtils.extendedEntityMappings.put("&sbquo;","‚");t.XmlUtils.extendedEntityMappings.put("&Scaron;","Š");t.XmlUtils.extendedEntityMappings.put("&scaron;","š");t.XmlUtils.extendedEntityMappings.put("&sdot;","⋅");t.XmlUtils.extendedEntityMappings.put("&sect;","§");t.XmlUtils.extendedEntityMappings.put("&Sigma;","Σ");t.XmlUtils.extendedEntityMappings.put("&sigma;","σ");t.XmlUtils.extendedEntityMappings.put("&sigmaf;","ς");t.XmlUtils.extendedEntityMappings.put("&sim;","∼");t.XmlUtils.extendedEntityMappings.put("&spades;","♠");t.XmlUtils.extendedEntityMappings.put("&sub;","⊂");t.XmlUtils.extendedEntityMappings.put("&sube;","⊆");t.XmlUtils.extendedEntityMappings.put("&sum;","∑");t.XmlUtils.extendedEntityMappings.put("&sup;","⊃");t.XmlUtils.extendedEntityMappings.put("&sup1;","¹");t.XmlUtils.extendedEntityMappings.put("&sup2;","²");t.XmlUtils.extendedEntityMappings.put("&sup3;","³");t.XmlUtils.extendedEntityMappings.put("&supe;","⊇");t.XmlUtils.extendedEntityMappings.put("&szlig;","ß");t.XmlUtils.extendedEntityMappings.put("&Tau;","Τ");t.XmlUtils.extendedEntityMappings.put("&tau;","τ");t.XmlUtils.extendedEntityMappings.put("&there4;","∴");t.XmlUtils.extendedEntityMappings.put("&Theta;","Θ");t.XmlUtils.extendedEntityMappings.put("&theta;","θ");t.XmlUtils.extendedEntityMappings.put("&thetasym;","ϑ");t.XmlUtils.extendedEntityMappings.put("&thinsp;"," ");t.XmlUtils.extendedEntityMappings.put("&THORN;","Þ");t.XmlUtils.extendedEntityMappings.put("&thorn;","þ");t.XmlUtils.extendedEntityMappings.put("&tilde;","˜");t.XmlUtils.extendedEntityMappings.put("&times;","×");t.XmlUtils.extendedEntityMappings.put("&trade;","™");t.XmlUtils.extendedEntityMappings.put("&Uacute;","Ú");t.XmlUtils.extendedEntityMappings.put("&uacute;","ú");t.XmlUtils.extendedEntityMappings.put("&uArr;","⇑");t.XmlUtils.extendedEntityMappings.put("&uarr;","↑");t.XmlUtils.extendedEntityMappings.put("&Ucirc;","Û");t.XmlUtils.extendedEntityMappings.put("&ucirc;","û");t.XmlUtils.extendedEntityMappings.put("&Ugrave;","Ù");t.XmlUtils.extendedEntityMappings.put("&ugrave;","ù");t.XmlUtils.extendedEntityMappings.put("&uml;","¨");t.XmlUtils.extendedEntityMappings.put("&upsih;","ϒ");t.XmlUtils.extendedEntityMappings.put("&Upsilon;","Υ");t.XmlUtils.extendedEntityMappings.put("&upsilon;","υ");t.XmlUtils.extendedEntityMappings.put("&Uuml;","Ü");t.XmlUtils.extendedEntityMappings.put("&uuml;","ü");t.XmlUtils.extendedEntityMappings.put("&weierp;","℘");t.XmlUtils.extendedEntityMappings.put("&Xi;","Ξ");t.XmlUtils.extendedEntityMappings.put("&xi;","ξ");t.XmlUtils.extendedEntityMappings.put("&Yacute;","Ý");t.XmlUtils.extendedEntityMappings.put("&yacute;","ý");t.XmlUtils.extendedEntityMappings.put("&yen;","¥");t.XmlUtils.extendedEntityMappings.put("&Yuml;","Ÿ");t.XmlUtils.extendedEntityMappings.put("&yuml;","ÿ");t.XmlUtils.extendedEntityMappings.put("&Zeta;","Ζ");t.XmlUtils.extendedEntityMappings.put("&zeta;","ζ")},unescapeJson:function(e){if(t.isNull(e)){return null}let r=t.XStringBuffer.create();t.XmlUtils.unescapeJsonToBuffer(e,r);return r.toString()},unescapeJsonToBuffer:function(e,r){if(t.isNull(e)){return}let n=0;let i=t.XString.indexOf(e,"\\");while(i>-1){r.append(t.XString.substring(e,n,i));if(i>=t.XString.size(e)-1){r.append("\\");return}n=i+2;switch(t.XString.getCharAt(e,i+1)){case 110:r.append("\n");break;case 114:r.append("\r");break;case 116:r.append("\t");break;case 98:r.append("\b");break;case 102:r.append("\f");break;case 47:r.append("/");break;case 92:r.append("\\");break;case 34:r.append('"');break;default:r.append(t.XString.substring(e,i,i+2))}if(n>=t.XString.size(e)){return}i=t.XString.indexOfFrom(e,"\\",n)}if(i===-1){r.append(t.XString.substring(e,n,t.XString.size(e)))}else{r.append(t.XString.substring(e,n,i))}},unescapeRawXmlString:function(e,r){if(t.isNull(e)){return null}let n=t.XStringBuffer.create();t.XmlUtils.unescapeRawXmlStringToBuffer(e,n,r);return n.toString()},unescapeRawXmlStringToBuffer:function(e,r,n){if(t.isNull(e)){return}let i=t.XString.indexOf(e,"&");if(i>-1){r.append(t.XString.substring(e,0,i))}else{r.append(e);return}while(i>-1){let l=t.XString.indexOfFrom(e,";",i+1);let s=false;if(l>i+1){let o=t.XString.substring(e,i,l+1);s=true;if(n&&t.XmlUtils.extendedEntityMappings.containsKey(o)){r.append(t.XmlUtils.extendedEntityMappings.getByKey(o))}else if(!n&&t.XmlUtils.entityMappings.containsKey(o)){r.append(t.XmlUtils.entityMappings.getByKey(o))}else if(t.XString.startsWith(o,"&#x")){try{r.appendChar(t.XInteger.convertFromStringWithRadix(t.XString.substring(o,3,t.XString.size(o)-1),16));s=true}catch(t){s=false}}else if(t.XString.startsWith(o,"&#")){try{r.appendChar(t.XInteger.convertFromStringWithRadix(t.XString.substring(o,2,t.XString.size(o)-1),10));s=true}catch(t){s=false}}else{s=false}}else{r.append(t.XString.substring(e,i,t.XString.size(e)));break}if(!s){r.append("&");l=i}if(l>=t.XString.size(e)){break}i=t.XString.indexOfFrom(e,"&",l+1);if(i===-1){r.append(t.XString.substring(e,l+1,t.XString.size(e)));break}r.append(t.XString.substring(e,l+1,i))}}};t.JsonParserFactory=function(){};t.JsonParserFactory.prototype=new t.XObject;t.JsonParserFactory.prototype._ff_c="JsonParserFactory";t.JsonParserFactory.s_jsonParserFactoryGeneric=null;t.JsonParserFactory.s_jsonParserFactoryNative=null;t.JsonParserFactory.createComplexJsonDocument=function(e){if(t.isNull(e)||!e.hasElements()){return null}let r=t.PrFactory.createStructure();let n=e.getKeysAsReadOnlyList();let i=n.size();for(let l=0;l<i;l++){let i=n.get(l);r.put(i,t.JsonParserFactory.createFromString(e.getByKey(i)))}return r};t.JsonParserFactory.createFromSafeString=function(e){let r=t.JsonParserFactory.newInstance();let n=r.parseUnsafe(e);if(r.hasErrors()&&t.isNull(n)){throw t.XException.createIllegalArgumentException(r.getSummary())}t.XObjectExt.release(r);return n};t.JsonParserFactory.createFromString=function(e){return t.JsonParserFactory.createFromSafeString(e)};t.JsonParserFactory.newInstance=function(){if(t.notNull(t.JsonParserFactory.s_jsonParserFactoryNative)){return t.JsonParserFactory.s_jsonParserFactoryNative.newParserInstance()}else if(t.notNull(t.JsonParserFactory.s_jsonParserFactoryGeneric)){return t.JsonParserFactory.s_jsonParserFactoryGeneric.newParserInstance()}throw t.XException.createRuntimeException("No json parser factory implementation is configured")};t.JsonParserFactory.setJsonParserFactory=function(e){t.JsonParserFactory.s_jsonParserFactoryNative=e};t.JsonParserFactory.setJsonParserFactoryGeneric=function(e){t.JsonParserFactory.s_jsonParserFactoryGeneric=e};t.JsonParserFactory.staticSetupJsonParserFactory=function(){};t.PrFactory=function(){};t.PrFactory.prototype=new t.XObject;t.PrFactory.prototype._ff_c="PrFactory";t.PrFactory.s_activeFactory=null;t.PrFactory.s_nativeFactory=null;t.PrFactory.s_universalFactory=null;t.PrFactory.createBoolean=function(e){return t.PrFactory.s_activeFactory.newBoolean(e)};t.PrFactory.createDouble=function(e){return t.PrFactory.s_activeFactory.newDouble(e)};t.PrFactory.createFromValue=function(e){let r=null;if(t.notNull(e)){if(e.getValueType()===t.XValueType.STRUCTURE||e.getValueType()===t.XValueType.LIST){r=t.JsonParserFactory.createFromString(t.XValueUtil.getString(e))}else if(e.getValueType()===t.XValueType.BOOLEAN){r=t.PrFactory.createBoolean(t.XValueUtil.getBoolean(e,false,false))}else if(e.getValueType()===t.XValueType.INTEGER){r=t.PrFactory.createInteger(t.XValueUtil.getInteger(e,false,false))}else if(e.getValueType()===t.XValueType.LONG){r=t.PrFactory.createLong(t.XValueUtil.getLong(e,false,false))}else if(e.getValueType()===t.XValueType.DOUBLE){r=t.PrFactory.createDouble(t.XValueUtil.getDouble(e,false,false))}else{r=t.PrFactory.createString(t.XValueUtil.getString(e))}}return r};t.PrFactory.createInteger=function(e){return t.PrFactory.s_activeFactory.newInteger(e)};t.PrFactory.createList=function(){return t.PrFactory.s_activeFactory.newList()};t.PrFactory.createListDeepCopy=function(e){return t.PrFactory.s_activeFactory.newListDeepCopy(e)};t.PrFactory.createLong=function(e){return t.PrFactory.s_activeFactory.newLong(e)};t.PrFactory.createObject=function(){return t.PrFactory.s_activeFactory.newObject()};t.PrFactory.createString=function(e){return t.PrFactory.s_activeFactory.newString(e)};t.PrFactory.createStructure=function(){return t.PrFactory.s_activeFactory.newStructure()};t.PrFactory.createStructureDeepCopy=function(e){return t.PrFactory.s_activeFactory.newStructureDeepCopy(e)};t.PrFactory.getActiveParameterFactory=function(){return t.PrFactory.s_activeFactory};t.PrFactory.getNativeParameterFactory=function(){return t.PrFactory.s_nativeFactory};t.PrFactory.getUniversalParameterFactory=function(){return t.PrFactory.s_universalFactory};t.PrFactory.setActiveFactory=function(e){t.PrFactory.s_activeFactory=e};t.PrFactory.setNativeFactory=function(e){t.PrFactory.s_nativeFactory=e};t.PrFactory.setUniversalFactory=function(e){t.PrFactory.s_universalFactory=e};t.PrFactory.prototype.newListDeepCopy=function(e){return t.PrList.createDeepCopy(e)};t.PrFactory.prototype.newObject=function(){return t.PrObject.create()};t.PrFactory.prototype.newStructureDeepCopy=function(e){return t.PrStructure.createDeepCopy(e)};t.PrPathFilter=function(){};t.PrPathFilter.prototype=new t.XObject;t.PrPathFilter.prototype._ff_c="PrPathFilter";t.PrPathFilter.create=function(e){return t.PrPathFilter.createReplacerInternal(e,null,null,false,false)};t.PrPathFilter.createReplacerInternal=function(e,r,n,i,l){let s=new t.PrPathFilter;s.m_transientPathCollector=e;s.m_children=t.XHashMapByString.create();s.m_name=r;if(t.notNull(n)){n.m_children.put(r,s);s.m_parent=t.XWeakReferenceUtil.getWeakRef(n)}s.m_ignored=i;s.m_transient=l;return s};t.PrPathFilter.prototype.m_children=null;t.PrPathFilter.prototype.m_escapeIgnore=false;t.PrPathFilter.prototype.m_ignored=false;t.PrPathFilter.prototype.m_index=-1;t.PrPathFilter.prototype.m_name=null;t.PrPathFilter.prototype.m_parent=null;t.PrPathFilter.prototype.m_path=null;t.PrPathFilter.prototype.m_transient=false;t.PrPathFilter.prototype.m_transientPathCollector=null;t.PrPathFilter.prototype.addChild=function(e,r,n){return t.PrPathFilter.createReplacerInternal(this.m_transientPathCollector,e,this,r,n)};t.PrPathFilter.prototype.addListChild=function(){return this.addChild("*",false,false)};t.PrPathFilter.prototype.addListFirstElementChild=function(){return this.addChild(".",false,false)};t.PrPathFilter.prototype.addNoSerializeChild=function(t){return this.addChild(t,true,false)};t.PrPathFilter.prototype.addPlainChild=function(t){return this.addChild(t,false,false)};t.PrPathFilter.prototype.addTransientChild=function(t){return this.addChild(t,true,true)};t.PrPathFilter.prototype.getListSubFilter=function(){return this.hasSubFilter("*")?this.getSubFilter("*"):this.getSubFilter(".")};t.PrPathFilter.prototype.getLocalPath=function(){if(t.isNull(this.m_name)){return"$"}if(t.XString.isEqual(this.m_name,"*")||t.XString.isEqual(this.m_name,".")){return t.XStringUtils.concatenate3("[",t.XInteger.convertToString(this.m_index),"]")}return t.XStringUtils.concatenate2(".",this.m_name)};t.PrPathFilter.prototype.getOrCreateChild=function(t){return this.m_children.containsKey(t)?this.m_children.getByKey(t):this.addPlainChild(t)};t.PrPathFilter.prototype.getOrCreateListChild=function(){return this.m_children.containsKey("*")?this.m_children.getByKey("*"):this.addListChild()};t.PrPathFilter.prototype.getOrCreateListFirstElementChild=function(){return this.m_children.containsKey(".")?this.m_children.getByKey("."):this.addListFirstElementChild()};t.PrPathFilter.prototype.getPath=function(){if(t.isNull(this.m_path)){if(t.isNull(this.m_parent)){this.m_path=this.getLocalPath()}else{this.m_path=t.XStringUtils.concatenate2(t.XWeakReferenceUtil.getHardRef(this.m_parent).getPath(),this.getLocalPath())}}return this.m_path};t.PrPathFilter.prototype.getSubFilter=function(t){return this.m_children.getByKey(t)};t.PrPathFilter.prototype.hasSubFilter=function(t){return this.m_children.containsKey(t)};t.PrPathFilter.prototype.isEscapeIgnore=function(){return this.m_escapeIgnore};t.PrPathFilter.prototype.isIgnore=function(t,e){let r=this.isEscapeIgnore();if(this.m_transient&&!r){this.m_transientPathCollector.addTransientPropertyPath(this.getPath(),e.asString().getString())}return this.m_ignored&&!r};t.PrPathFilter.prototype.resetPath=function(){this.m_path=null;let t=this.m_children.getValuesAsReadOnlyList();for(let e=0;e<t.size();e++){t.get(e).resetPath()}};t.PrPathFilter.prototype.setEscapeIgnore=function(t){this.m_escapeIgnore=t};t.PrPathFilter.prototype.setEscapeIgnoreForChildren=function(e){t.XCollectionUtils.forEach(this.m_children,t=>{t.setEscapeIgnore(e)})};t.PrPathFilter.prototype.submitIndex=function(e,r){if(t.XString.isEqual(".",this.m_name)&&e!==0){this.setEscapeIgnoreForChildren(true)}else if(t.XString.isEqual("*",this.m_name)||t.XString.isEqual(".",this.m_name)){this.setEscapeIgnoreForChildren(false);this.m_index=e;this.resetPath()}};t.XmlParserFactory=function(){};t.XmlParserFactory.prototype=new t.XObject;t.XmlParserFactory.prototype._ff_c="XmlParserFactory";t.XmlParserFactory.s_xmlParserFactory=null;t.XmlParserFactory.createFromString=function(e){let r=t.XmlParserFactory.newInstance();let n=r.parse(e);if(r.isValid()){return n}throw t.XException.createIllegalArgumentException(r.getSummary())};t.XmlParserFactory.newInstance=function(){return t.XmlParserFactory.s_xmlParserFactory.newParserInstance()};t.XmlParserFactory.staticSetupXmlParserFactory=function(){t.XmlParserFactory.s_xmlParserFactory=new t.XmlParserFactory};t.XmlParserFactory.prototype.newParserInstance=function(){return t.XmlParser.create()};t.JsonParserGenericFactory=function(){};t.JsonParserGenericFactory.prototype=new t.JsonParserFactory;t.JsonParserGenericFactory.prototype._ff_c="JsonParserGenericFactory";t.JsonParserGenericFactory.staticSetup=function(){let e=new t.JsonParserGenericFactory;t.JsonParserFactory.setJsonParserFactoryGeneric(e)};t.JsonParserGenericFactory.prototype.newParserInstance=function(){return t.JsonParserGeneric.create()};t.PrCleanup=function(){};t.PrCleanup.prototype=new t.XObjectExt;t.PrCleanup.prototype._ff_c="PrCleanup";t.PrCleanup.CDATA_CONTENT="content";t.PrCleanup.CDATA_CREATE_DATE="createDate";t.PrCleanup.CDATA_ENTITIES="entities";t.PrCleanup.CDATA_INA_REPO="inaRepo";t.PrCleanup.CDATA_MODIFY_DATE="modifiedDate";t.PrCleanup.INA_REPO_FILTER="FilterRepo";t.PrCleanup.INA_REPO_ID="Id";t.PrCleanup.create=function(){let e=new t.PrCleanup;e.m_toRemove=t.XHashSetOfString.create();return e};t.PrCleanup.prototype.m_cdata=null;t.PrCleanup.prototype.m_ignored=null;t.PrCleanup.prototype.m_toRemove=null;t.PrCleanup.prototype.addCdataTags=function(e){if(t.isNull(this.m_cdata)){this.m_cdata=t.XHashSetOfString.create()}this.m_cdata.addAll(e);return this};t.PrCleanup.prototype.addIgnoredTagsValue=function(e,r){if(t.isNull(this.m_ignored)){this.m_ignored=t.XProperties.create()}this.m_ignored.put(e,r);return this};t.PrCleanup.prototype.cleanupCData=function(e,r){let n=e.getStructureByKey(r);if(!t.XCollectionUtils.hasElements(n)){return}let i=n.getStructureByKey(t.PrCleanup.CDATA_CONTENT);if(!t.XCollectionUtils.hasElements(i)){return}let l=i.getListByKey(t.PrCleanup.CDATA_ENTITIES);if(!t.XCollectionUtils.hasElements(l)){return}for(let e=0;e<l.size();e++){let r=l.getStructureAt(e);if(t.isNull(r)){continue}r.remove(t.PrCleanup.CDATA_CREATE_DATE);r.remove(t.PrCleanup.CDATA_MODIFY_DATE);let n=r.getStructureByKey(t.PrCleanup.CDATA_INA_REPO);this.cleanupInaRepoFilter(n)}};t.PrCleanup.prototype.cleanupInAJson=function(e){let r=t.PrUtils.deepCopyElement(e);this.cleanupInAJsonInternal(r);return r};t.PrCleanup.prototype.cleanupInAJsonInternal=function(e){if(t.isNull(e)){return null}let r=e.getType();if(r===t.PrElementType.STRUCTURE){this.cleanupStructure(e)}else if(r===t.PrElementType.LIST){this.cleanupList(e)}else if(r===t.PrElementType.DOUBLE){let r=e.asDouble();let n=r.getDouble();let i=t.XDouble.convertToLong(n);let l=i;if(l===n){return t.PrFactory.createLong(i)}}return null};t.PrCleanup.prototype.cleanupInaRepoFilter=function(e){if(!t.XCollectionUtils.hasElements(e)){return}let r=e.getStructureByKey(t.PrCleanup.INA_REPO_FILTER);this.recursiveIdCleanup(r)};t.PrCleanup.prototype.cleanupList=function(e){let r=e.asList();let n=r.size();for(let e=0;e<n;e++){let n=r.get(e);let i=this.cleanupInAJsonInternal(n);if(t.notNull(i)){r.set(e,i)}}};t.PrCleanup.prototype.cleanupStructure=function(e){let r=e.asStructure();let n=r.getKeysAsReadOnlyList();let i=n.size();for(let e=0;e<i;e++){let i=n.get(e);if(t.notNull(this.m_ignored)&&this.m_ignored.containsKey(i)){if(!t.XString.containsString(r.getStringByKey(i),this.m_ignored.getByKey(i))){r.remove(i);continue}}else if(t.notNull(this.m_cdata)&&this.m_cdata.contains(i)){this.parseAndReplaceCData(r,i);this.cleanupCData(r,i)}else if(this.m_toRemove.contains(i)){r.remove(i);continue}let l=r.getByKey(i);let s=this.cleanupInAJsonInternal(l);if(t.notNull(s)){r.put(i,s)}}};t.PrCleanup.prototype.parseAndReplaceCData=function(e,r){let n=e.getElementTypeByKey(r);if(n===t.PrElementType.STRING){let n=e.getStringByKey(r);if(t.XStringUtils.isNotNullAndNotEmpty(n)){let i=t.JsonParserFactory.newInstance();let l=i.parse(n);if(i.isValid()&&t.notNull(l)){e.put(r,l)}else{e.putString(r,"PARSER ERROR")}t.XObjectExt.release(i)}}};t.PrCleanup.prototype.recursiveIdCleanup=function(e){if(t.isNull(e)){return}if(e.getType()===t.PrElementType.LIST){let t=e.asList();for(let e=0;e<t.size();e++){this.recursiveIdCleanup(t.get(e))}}else if(e.getType()===t.PrElementType.STRUCTURE){let r=e.asStructure();r.remove(t.PrCleanup.INA_REPO_ID);let n=r.getKeysAsReadOnlyList();for(let t=0;t<n.size();t++){this.recursiveIdCleanup(r.getByKey(n.get(t)))}}};t.PrCleanup.prototype.releaseObject=function(){t.XObjectExt.prototype.releaseObject.call(this);this.m_cdata=t.XObjectExt.release(this.m_cdata);this.m_ignored=t.XObjectExt.release(this.m_ignored);this.m_toRemove=t.XObjectExt.release(this.m_toRemove)};t.PrCleanup.prototype.tagsToRemove=function(t){this.m_toRemove.addAll(t);return this};t.PrFactoryUniversal=function(){};t.PrFactoryUniversal.prototype=new t.PrFactory;t.PrFactoryUniversal.prototype._ff_c="PrFactoryUniversal";t.PrFactoryUniversal.staticSetup=function(){t.PrInteger.staticSetup();t.PrBoolean.staticSetup();t.PrString.staticSetup();t.PrDouble.staticSetup();let e=new t.PrFactoryUniversal;t.PrFactory.setUniversalFactory(e);t.PrFactory.setActiveFactory(e)};t.PrFactoryUniversal.prototype.newBoolean=function(e){return t.PrBoolean.createWithValue(e)};t.PrFactoryUniversal.prototype.newDouble=function(e){return t.PrDouble.createWithValue(e)};t.PrFactoryUniversal.prototype.newInteger=function(e){return t.PrInteger.createWithValue(e)};t.PrFactoryUniversal.prototype.newList=function(){return t.PrList.create()};t.PrFactoryUniversal.prototype.newListDeepCopy=function(e){return t.PrList.createDeepCopy(e)};t.PrFactoryUniversal.prototype.newLong=function(e){return t.PrLong.createWithValue(e)};t.PrFactoryUniversal.prototype.newNull=function(){return null};t.PrFactoryUniversal.prototype.newObject=function(){return t.PrObject.create()};t.PrFactoryUniversal.prototype.newString=function(e){return t.PrString.createWithValue(e)};t.PrFactoryUniversal.prototype.newStructure=function(){return t.PrStructure.create()};t.PrFactoryUniversal.prototype.newStructureDeepCopy=function(e){return t.PrStructure.createDeepCopy(e)};t.DfDocumentParser=function(){};t.DfDocumentParser.prototype=new t.MessageManagerSimple;t.DfDocumentParser.prototype._ff_c="DfDocumentParser";t.DfDocumentParser.prototype.convertFromNative=function(e){return t.XObject.castFromNative(e)};t.DfDocumentParser.prototype.convertToNative=function(t){return t};t.DfDocumentParser.prototype.parseByteArray=function(e){let r=t.XByteArray.convertToString(e);return this.parse(r)};t.DfDocumentParser.prototype.parseUnsafe=function(t){return this.parse(t)};t.DocumentFormatType=function(){};t.DocumentFormatType.prototype=new t.XConstant;t.DocumentFormatType.prototype._ff_c="DocumentFormatType";t.DocumentFormatType.JSON=null;t.DocumentFormatType.XML=null;t.DocumentFormatType.staticSetup=function(){t.DocumentFormatType.JSON=t.XConstant.setupName(new t.DocumentFormatType,"Json");t.DocumentFormatType.XML=t.XConstant.setupName(new t.DocumentFormatType,"Xml")};t.JsonParserGeneric=function(){};t.JsonParserGeneric.prototype=new t.DfDocumentParser;t.JsonParserGeneric.prototype._ff_c="JsonParserGeneric";t.JsonParserGeneric.create=function(){let e=new t.JsonParserGeneric;e.setupParser(null,false);return e};t.JsonParserGeneric.createEmbedded=function(e){let r=new t.JsonParserGeneric;r.setupParser(e,true);return r};t.JsonParserGeneric.prototype.m_currentStackIndex=0;t.JsonParserGeneric.prototype.m_elementStack=null;t.JsonParserGeneric.prototype.m_escapedString=null;t.JsonParserGeneric.prototype.m_isEmbedded=false;t.JsonParserGeneric.prototype.m_isInsideDoubleNumber=false;t.JsonParserGeneric.prototype.m_isInsideEscape=false;t.JsonParserGeneric.prototype.m_isInsideNumber=false;t.JsonParserGeneric.prototype.m_isInsideString=false;t.JsonParserGeneric.prototype.m_isInsideUnicode=false;t.JsonParserGeneric.prototype.m_isInsideVariable=false;t.JsonParserGeneric.prototype.m_numberStartPos=0;t.JsonParserGeneric.prototype.m_pos=0;t.JsonParserGeneric.prototype.m_rootElement=null;t.JsonParserGeneric.prototype.m_source=null;t.JsonParserGeneric.prototype.m_stringDelimiter=0;t.JsonParserGeneric.prototype.m_stringStartPos=0;t.JsonParserGeneric.prototype.m_structureDepth=0;t.JsonParserGeneric.prototype.m_unicodePos=0;t.JsonParserGeneric.prototype.addParserError=function(e,r){let n=this.m_pos-10;if(n<0){n=0}let i=this.m_pos+10;if(i>t.XString.size(this.m_source)){i=t.XString.size(this.m_source)}let l=t.XString.substring(this.m_source,n,i);let s=t.XStringBuffer.create();s.append("Json Parser Error at position ");s.appendInt(this.m_pos).append(": ").appendLine(r);s.append("...").append(l).append("...");let o=s.toString();return t.DfDocumentParser.prototype.addErrorExt.call(this,t.OriginLayer.IOLAYER,e,o,null)};t.JsonParserGeneric.prototype.checkList=function(t){if(t.isNameSet()){this.raiseError("Name cannot be set in list");return false}if(t.isValueSet()){this.raiseError("Value in list is already set");return false}t.setValueSet(true);return true};t.JsonParserGeneric.prototype.checkStructure=function(t){if(!t.isNameSet()){this.raiseError("Name in structure is not set");return false}if(t.isValueSet()){this.raiseError("Value in structure is already set");return false}t.setValueSet(true);return true};t.JsonParserGeneric.prototype.endParsing=function(){this.m_escapedString=t.XObjectExt.release(this.m_escapedString);if(this.m_currentStackIndex===-1){return true}this.addParserError(t.JsonParserErrorCode.JSON_PARSER_ILLEGAL_STATE,"Json does not close correctly");return false};t.JsonParserGeneric.prototype.enter=function(e){if(this.m_currentStackIndex===-1){this.m_rootElement=e}else{let r=this.getTopStackElement();if(!r.addElement()){this.raiseWrongCommaError();return false}let n=r.getElement();let i=n.getType();if(i===t.PrElementType.STRUCTURE){if(!this.checkStructure(r)){return false}let t=r.getName();let i=n;i.put(t,e)}else if(i===t.PrElementType.LIST){if(!this.checkList(r)){return false}let t=n;t.add(e)}else{this.raiseError("Illegal type");return false}}let r;if(this.m_currentStackIndex===this.m_elementStack.size()-1){r=t.JsonParserGenericStackElement.create();this.m_elementStack.add(r)}else{r=this.m_elementStack.get(this.m_currentStackIndex+1);r.reset()}r.setElement(e);this.m_currentStackIndex++;return true};t.JsonParserGeneric.prototype.enterArray=function(){return this.enter(t.PrFactory.createList())};t.JsonParserGeneric.prototype.enterEscapedString=function(e){this.m_isInsideEscape=true;if(t.isNull(this.m_escapedString)){this.m_escapedString=t.XStringBuffer.create()}let r=t.XString.substring(this.m_source,this.m_stringStartPos,e);this.m_escapedString.append(r)};t.JsonParserGeneric.prototype.enterNumber=function(){return true};t.JsonParserGeneric.prototype.enterStructure=function(){return this.enter(t.PrFactory.createStructure())};t.JsonParserGeneric.prototype.enterValueZone=function(){return true};t.JsonParserGeneric.prototype.escapedString=function(e,r){if(e===114){this.m_escapedString.append("\r")}else if(e===110){this.m_escapedString.append("\n")}else if(e===116){this.m_escapedString.append("\t")}else if(e===102){this.m_escapedString.append("\f")}else if(e===98){this.m_escapedString.append("\b")}else if(e===34){this.m_escapedString.append('"')}else if(e===92){this.m_escapedString.append("\\")}else if(e===47){this.m_escapedString.append("/")}else{this.addParserError(t.JsonParserErrorCode.JSON_PARSER_ILLEGAL_STATE,"Parser Error");return false}this.m_isInsideEscape=false;this.m_stringStartPos=r+1;return true};t.JsonParserGeneric.prototype.getRootElement=function(){return this.m_rootElement};t.JsonParserGeneric.prototype.getTopStackElement=function(){return this.m_elementStack.get(this.m_currentStackIndex)};t.JsonParserGeneric.prototype.insideDouble=function(e){try{let r=t.XDouble.convertFromString(e);if(!this.setDouble(r)){return false}}catch(e){this.addParserError(t.JsonParserErrorCode.JSON_PARSER_ILLEGAL_STATE,t.XException.getStackTrace(e,0));return false}return true};t.JsonParserGeneric.prototype.insideInt=function(e){try{let r=true;let n=t.XString.size(e);let i=t.XString.getCharAt(e,0);if(i===45){r=n<=10}else{r=n<=9}if(r){let r=t.XInteger.convertFromString(e);if(this.setInteger(r)===false){return false}}else{let r=t.XLong.convertFromString(e);if(this.setLong(r)===false){return false}}}catch(e){this.addParserError(t.JsonParserErrorCode.JSON_PARSER_ILLEGAL_STATE,t.XException.getStackTrace(e,0));return false}return true};t.JsonParserGeneric.prototype.insideString=function(e){let r=t.XString.substring(this.m_source,this.m_stringStartPos,e);if(t.notNull(this.m_escapedString)){this.m_escapedString.append(r);r=this.m_escapedString.toString();this.m_escapedString=t.XObjectExt.release(this.m_escapedString)}if(!this.setString(r)){return false}if(!this.leaveString()){return false}this.m_isInsideString=false;return true};t.JsonParserGeneric.prototype.isEmbeddedParsingFinished=function(){return this.m_structureDepth===0};t.JsonParserGeneric.prototype.leaveArray=function(){let t=this.getTopStackElement();if(!t.finishElements()){this.raiseWrongCommaError();return false}this.m_currentStackIndex--;return true};t.JsonParserGeneric.prototype.leaveNumber=function(){return true};t.JsonParserGeneric.prototype.leaveString=function(){return true};t.JsonParserGeneric.prototype.leaveStructure=function(){let t=this.getTopStackElement();if(!t.finishElements()){this.raiseWrongCommaError();return false}this.m_currentStackIndex--;return true};t.JsonParserGeneric.prototype.nextItem=function(){let t=this.getTopStackElement();t.setName(null);t.setValueSet(false);if(t.nextElement()===false){this.raiseWrongCommaError();return false}return true};t.JsonParserGeneric.prototype.parse=function(e){this.resetParsing(e);if(t.notNull(e)){if(this.runWalker()){return this.m_rootElement}}return null};t.JsonParserGeneric.prototype.parseSingleCharacter=function(e,r){let n;let i=true;this.m_pos=r;let l=true;while(l){if(this.m_isInsideString){if(this.m_isInsideEscape){if(this.m_isInsideUnicode){this.m_unicodePos++;if(this.m_unicodePos===4){if(this.unicode4(r)===false){return false}}}else{if(e===117){this.m_isInsideUnicode=true;this.m_unicodePos=0}else{if(this.escapedString(e,r)===false){return false}}}}else{if(e===this.m_stringDelimiter){if(this.insideString(r)===false){return false}}else if(e===92){this.enterEscapedString(r)}}}else if(this.m_isInsideNumber){if(e>=48&&e<=57||e===43||e===45){i=true}else if(e===46||e===101||e===69){this.m_isInsideDoubleNumber=true}else{n=t.XString.substring(this.m_source,this.m_numberStartPos,r);if(this.m_isInsideDoubleNumber){if(this.insideDouble(n)===false){return false}}else{if(this.insideInt(n)===false){return false}}this.m_isInsideNumber=false;this.m_isInsideDoubleNumber=false;if(this.leaveNumber()===false){return false}continue}}else if(this.m_isInsideVariable){if(e===58||e===123||e===125||e===91||e===93||e===44||e===9||e===13||e===10||e===32){n=t.XString.substring(this.m_source,this.m_stringStartPos,r);if(this.setVariable(n)===false){return false}this.m_isInsideVariable=false;continue}}else{if(e>=48&&e<=57||e===45){if(this.enterNumber()===false){return false}this.m_isInsideNumber=true;this.m_numberStartPos=r}else if(e===46){if(this.enterNumber()===false){return false}this.m_isInsideNumber=true;this.m_isInsideDoubleNumber=true;this.m_numberStartPos=r}else if(e===123){if(this.enterStructure()===false){return false}this.m_structureDepth++}else if(e===125){if(this.leaveStructure()===false){return false}this.m_structureDepth--}else if(e===91){if(this.enterArray()===false){return false}}else if(e===93){if(this.leaveArray()===false){return false}}else if(e===58){if(this.enterValueZone()===false){return false}}else if(e===44){if(this.nextItem()===false){return false}}else if(e===32||e===9||e===10||e===13){i=true}else if(e===this.m_stringDelimiter){this.m_isInsideString=true;this.m_stringStartPos=r+1}else{this.m_isInsideVariable=true;this.m_stringStartPos=r}}break}return i};t.JsonParserGeneric.prototype.raiseError=function(e){this.addParserError(t.JsonParserErrorCode.JSON_PARSER_ILLEGAL_STATE,e)};t.JsonParserGeneric.prototype.raiseWrongCommaError=function(){this.raiseError("Object properties and array items must be separated by single comma.")};t.JsonParserGeneric.prototype.releaseObject=function(){t.DfDocumentParser.prototype.releaseObject.call(this);this.resetParsing(null)};t.JsonParserGeneric.prototype.resetParsing=function(e){this.m_rootElement=null;this.m_elementStack=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_elementStack);if(t.notNull(e)){this.m_elementStack=t.XList.create()}this.m_currentStackIndex=-1;this.m_pos=0;this.m_isInsideString=false;this.m_isInsideVariable=false;this.m_isInsideEscape=false;this.m_isInsideNumber=false;this.m_isInsideDoubleNumber=false;this.m_isInsideUnicode=false;this.m_unicodePos=0;this.m_stringStartPos=0;this.m_escapedString=t.XObjectExt.release(this.m_escapedString);this.m_numberStartPos=0;this.m_structureDepth=0;this.m_source=e};t.JsonParserGeneric.prototype.runWalker=function(){let e=t.XString.size(this.m_source);let r;let n=true;for(let i=0;i<e&&n;){r=t.XString.getCharAt(this.m_source,i);if(i===0&&r===65279){i++}else{n=this.parseSingleCharacter(r,i);i++}}if(n){this.endParsing()}return n};t.JsonParserGeneric.prototype.setDouble=function(e){let r=this.getTopStackElement();if(r.addElement()===false){this.raiseWrongCommaError();return false}let n=r.getElement();let i=n.getType();if(i===t.PrElementType.STRUCTURE){if(this.checkStructure(r)===false){return false}let t=r.getName();let i=n;i.putDouble(t,e)}else if(i===t.PrElementType.LIST){if(this.checkList(r)===false){return false}let i=n;i.add(t.PrFactory.createDouble(e))}else{this.raiseError("Illegal type");return false}return true};t.JsonParserGeneric.prototype.setInteger=function(e){let r=this.getTopStackElement();if(r.addElement()===false){this.raiseWrongCommaError();return false}let n=r.getElement();let i=n.getType();if(i===t.PrElementType.STRUCTURE){if(this.checkStructure(r)===false){return false}let t=r.getName();let i=n;i.putInteger(t,e)}else if(i===t.PrElementType.LIST){if(this.checkList(r)===false){return false}let i=n;i.add(t.PrFactory.createInteger(e))}else{this.raiseError("Illegal type");return false}return true};t.JsonParserGeneric.prototype.setLong=function(e){let r=this.getTopStackElement();if(r.addElement()===false){this.raiseWrongCommaError();return false}let n=r.getElement();let i=n.getType();if(i===t.PrElementType.STRUCTURE){if(this.checkStructure(r)===false){return false}let t=r.getName();let i=n;i.putLong(t,e)}else if(i===t.PrElementType.LIST){if(this.checkList(r)===false){return false}let i=n;i.add(t.PrFactory.createLong(e))}else{this.raiseError("Illegal type");return false}return true};t.JsonParserGeneric.prototype.setString=function(e){let r=this.getTopStackElement();let n=r.getElement();let i=n.getType();if(i===t.PrElementType.STRUCTURE){if(!r.isNameSet()){if(r.isValueSet()){this.raiseError("Name in structure is not set");return false}r.setName(e)}else{if(r.addElement()===false){this.raiseWrongCommaError();return false}if(this.checkStructure(r)===false){return false}let t=r.getName();let i=n;i.putString(t,e)}}else if(i===t.PrElementType.LIST){if(r.addElement()===false){return false}if(this.checkList(r)===false){return false}let i=n;i.add(t.PrFactory.createString(e))}else{this.raiseError("Illegal type");return false}return true};t.JsonParserGeneric.prototype.setVariable=function(e){let r=null;let n=false;if(t.XString.isEqual("true",e)){r=t.PrFactory.createBoolean(true);n=true}else if(t.XString.isEqual("false",e)){r=t.PrFactory.createBoolean(false);n=true}else if(t.XString.isEqual("null",e)){n=true}if(!n){if(this.m_isEmbedded){return this.setString(e)}this.raiseError(t.XStringUtils.concatenate2("Unknown value: ",e));return false}let i=this.getTopStackElement();if(!i.addElement()){this.raiseWrongCommaError();return false}let l=i.getElement();let s=l.getType();if(s===t.PrElementType.STRUCTURE){if(!this.checkStructure(i)){return false}let t=i.getName();let e=l;e.put(t,r)}else if(s===t.PrElementType.LIST){if(!this.checkList(i)){return false}let t=l;t.add(r)}else{this.raiseError("Illegal type");return false}return true};t.JsonParserGeneric.prototype.setupParser=function(e,r){this.setup();this.m_isEmbedded=r;if(this.m_isEmbedded){this.m_stringDelimiter=39}else{this.m_stringDelimiter=34}if(t.notNull(e)){this.resetParsing(e)}};t.JsonParserGeneric.prototype.unicode4=function(e){let r=t.XString.substring(this.m_source,e-3,e+1);try{let e=t.XInteger.convertFromStringWithRadix(r,16);this.m_escapedString.appendChar(e)}catch(e){this.addParserError(t.JsonParserErrorCode.JSON_PARSER_ILLEGAL_STATE,t.XException.getStackTrace(e,0));return false}this.m_isInsideUnicode=false;this.m_isInsideEscape=false;this.m_stringStartPos=e+1;return true};t.PrElementType=function(){};t.PrElementType.prototype=new t.XConstant;t.PrElementType.prototype._ff_c="PrElementType";t.PrElementType.ANY=null;t.PrElementType.BOOLEAN=null;t.PrElementType.DOUBLE=null;t.PrElementType.INTEGER=null;t.PrElementType.LIST=null;t.PrElementType.LONG=null;t.PrElementType.OBJECT=null;t.PrElementType.STRING=null;t.PrElementType.STRUCTURE=null;t.PrElementType.THE_NULL=null;t.PrElementType.create=function(e,r){let n=new t.PrElementType;n._setupInternal(e);n.m_isNumber=r;return n};t.PrElementType.staticSetup=function(){t.PrElementType.STRUCTURE=t.PrElementType.create("Structure",false);t.PrElementType.LIST=t.PrElementType.create("List",false);t.PrElementType.STRING=t.PrElementType.create("String",false);t.PrElementType.INTEGER=t.PrElementType.create("Integer",true);t.PrElementType.LONG=t.PrElementType.create("Long",true);t.PrElementType.DOUBLE=t.PrElementType.create("Double",true);t.PrElementType.BOOLEAN=t.PrElementType.create("Boolean",false);t.PrElementType.OBJECT=t.PrElementType.create("Object",false);t.PrElementType.THE_NULL=t.PrElementType.create("Null",false);t.PrElementType.ANY=t.PrElementType.create("Any",false)};t.PrElementType.prototype.m_isNumber=false;t.PrElementType.prototype.isNumber=function(){return this.m_isNumber};t.PrElement=function(){};t.PrElement.prototype=new t.XJson;t.PrElement.prototype._ff_c="PrElement";t.PrElement.prototype.asBoolean=function(){return null};t.PrElement.prototype.asBooleanReadOnly=function(){return this.asBoolean()};t.PrElement.prototype.asDouble=function(){return null};t.PrElement.prototype.asDoubleReadOnly=function(){return this.asDouble()};t.PrElement.prototype.asInteger=function(){return null};t.PrElement.prototype.asIntegerReadOnly=function(){return this.asInteger()};t.PrElement.prototype.asList=function(){return null};t.PrElement.prototype.asListReadOnly=function(){return null};t.PrElement.prototype.asLong=function(){return null};t.PrElement.prototype.asLongReadOnly=function(){return this.asLong()};t.PrElement.prototype.asNumber=function(){return null};t.PrElement.prototype.asNumberReadOnly=function(){return this.asNumber()};t.PrElement.prototype.asObject=function(){return null};t.PrElement.prototype.asObjectReadOnly=function(){return this.asObject()};t.PrElement.prototype.asString=function(){return null};t.PrElement.prototype.asStringReadOnly=function(){return this.asString()};t.PrElement.prototype.asStructure=function(){return null};t.PrElement.prototype.asStructureReadOnly=function(){return null};t.PrElement.prototype.cloneExt=function(e){return t.PrUtils.createDeepCopyExt(this,null)};t.PrElement.prototype.convertToNative=function(){let e=t.JsonParserFactory.newInstance();let r=e.convertToNative(this);t.XObjectExt.release(e);return r};t.PrElement.prototype.copyAsPrimitiveXValue=function(){let e=this.getType();let r=null;if(e===t.PrElementType.STRING){r=t.XStringValue.create(this.asString().getString())}else if(e===t.PrElementType.BOOLEAN){r=t.XBooleanValue.create(this.asBoolean().getBoolean())}else if(e===t.PrElementType.DOUBLE){r=t.XDoubleValue.create(this.asDouble().getDouble())}else if(e===t.PrElementType.LONG){r=t.XLongValue.create(this.asLong().getLong())}else if(e===t.PrElementType.INTEGER){r=t.XIntegerValue.create(this.asInteger().getInteger())}return r};t.PrElement.prototype.copyFrom=function(e,r){t.PrUtils.createDeepCopyExt(e,this)};t.PrElement.prototype.getComponentType=function(){return this.getValueType()};t.PrElement.prototype.getElement=function(){return this};t.PrElement.prototype.getPermaCopy=function(){return t.PrUtils.deepCopyElement(this)};t.PrElement.prototype.getStringRepresentation=function(){return t.PrUtils.serialize(this,true,false,0)};t.PrElement.prototype.getType=function(){return null};t.PrElement.prototype.getValueType=function(){let e=this.getType();if(e===t.PrElementType.STRUCTURE){return t.XValueType.STRUCTURE}else if(e===t.PrElementType.LIST){return t.XValueType.LIST}else if(e===t.PrElementType.STRING){return t.XValueType.STRING}else if(e===t.PrElementType.BOOLEAN){return t.XValueType.BOOLEAN}else if(e===t.PrElementType.DOUBLE){return t.XValueType.DOUBLE}else if(e===t.PrElementType.LONG){return t.XValueType.LONG}else if(e===t.PrElementType.INTEGER){return t.XValueType.INTEGER}return null};t.PrElement.prototype.isBoolean=function(){return this.getType()===t.PrElementType.BOOLEAN};t.PrElement.prototype.isDouble=function(){return this.getType()===t.PrElementType.DOUBLE};t.PrElement.prototype.isEqualTo=function(e){let r=false;if(t.notNull(e)){let n=e;let i=this.getType();let l=n.getType();if(i.isNumber()&&l.isNumber()){r=this.asNumber().getDouble()===n.asNumber().getDouble()}else{if(i===l){if(i===t.PrElementType.BOOLEAN){r=this.getBoolean()===n.getBoolean()}else if(i===t.PrElementType.INTEGER){r=this.getInteger()===n.getInteger()}else if(i===t.PrElementType.LONG){r=this.getLong()===n.getLong()}else if(i===t.PrElementType.DOUBLE){r=this.getDouble()===n.getDouble()}else if(i===t.PrElementType.STRING){r=t.XString.isEqual(this.getString(),n.getString())}else if(i===t.PrElementType.OBJECT){r=this.asObject().getObject()===n.asObject().getObject()}else if(i===t.PrElementType.THE_NULL){r=true}else{if(i===t.PrElementType.LIST){let e=this;let i=n;let l=e.size();if(l===i.size()){r=true;let n;let s;for(let o=0;o<l&&r===true;o++){n=e.get(o);s=i.get(o);if(t.isNull(n)||t.isNull(s)){r=n===s}else if(!n.isEqualTo(s)){r=false}}}}else if(i===t.PrElementType.STRUCTURE){let e=this;let i=n;let l=e.getKeysAsReadOnlyList();let s=i.getKeysAsReadOnlyList();let o=l.size();if(o===s.size()){r=true;let n;let s;for(let u=0;u<o&&r===true;u++){let o=l.get(u);if(!i.containsKey(o)){r=false}else{n=e.getByKey(o);s=i.getByKey(o);if(t.isNull(n)&&t.notNull(s)||t.notNull(n)&&t.isNull(s)){r=false}else if(t.notNull(n)){if(!n.isEqualTo(s)){r=false}}}}}}else{throw t.XException.createIllegalStateException("Unknown type")}}}}}return r};t.PrElement.prototype.isInteger=function(){return this.getType()===t.PrElementType.INTEGER};t.PrElement.prototype.isList=function(){return this.getType()===t.PrElementType.LIST};t.PrElement.prototype.isLong=function(){return this.getType()===t.PrElementType.LONG};t.PrElement.prototype.isNumeric=function(){return this.isLong()||this.isDouble()||this.isInteger()};t.PrElement.prototype.isObject=function(){return this.getType()===t.PrElementType.OBJECT};t.PrElement.prototype.isProxy=function(){return false};t.PrElement.prototype.isString=function(){return this.getType()===t.PrElementType.STRING};t.PrElement.prototype.isStructure=function(){return this.getType()===t.PrElementType.STRUCTURE};t.PrElement.prototype.toString=function(){return t.PrUtils.serialize(this,true,false,0)};t.XmlParser=function(){};t.XmlParser.prototype=new t.DfDocumentParser;t.XmlParser.prototype._ff_c="XmlParser";t.XmlParser.SLASH=47;t.XmlParser.create=function(){let e=new t.XmlParser;e.setup();return e};t.XmlParser.prototype.getAttributes=function(e){let r=t.XString.indexOf(e," ");if(r===-1){return""}let n=t.XString.substring(e,r,-1);if(t.XString.endsWith(n,"/")){return t.XStringUtils.stripRight(n,1)}return n};t.XmlParser.prototype.getClosingTag=function(e){return t.XStringUtils.concatenate3("</",e,">")};t.XmlParser.prototype.getContent=function(e,r,n){if(n===-1){return t.XString.trim(t.XString.substring(e,r+1,-1))}return t.XString.trim(t.XString.substring(e,r+1,n))};t.XmlParser.prototype.getListForElement=function(e,r){if(t.notNull(e)&&e.isStructure()&&e.asStructure().containsKey(r)){let n=e.asStructure();let i=n.getByKey(r);let l=t.PrUtils.convertToList(i);n.put(r,l);return l}return null};t.XmlParser.prototype.getTagName=function(e){let r=t.XString.indexOf(e," ");return t.XString.substring(e,0,r)};t.XmlParser.prototype.handleAttributes=function(e,r){if(e.isList()){return}let n=e;let i=t.XString.size(r);let l=0;while(l<i){let e=t.XString.indexOfFrom(r,"=",l);if(e===-1){break}let s;let o=t.XString.getCharAt(r,e+1);if(o===34){s=t.XString.indexOfFrom(r,'"',e+2)}else{s=t.XString.indexOfFrom(r,"'",e+2)}let u=t.XString.indexOfFrom(r," ",e)===-1;let a;if(u){a=t.XString.substring(r,e+1,i)}else{a=t.XString.substring(r,e+1,s+1)}let p=t.XStringUtils.concatenate2("-",t.XString.trim(t.XString.substring(r,l,e)));n.putString(p,t.XStringUtils.stripChars(a,1));if(u){break}l=s+1}};t.XmlParser.prototype.handleContent=function(e,r,n){if(e.isList()){let t=e;t.addString(r);return}let i=e;let l=this.getClosingTag(n);if(t.XString.endsWith(r,l)){i.putString(n,t.XStringUtils.stripRight(r,t.XString.size(l)))}else{i.putString(n,r)}};t.XmlParser.prototype.navigateToParent=function(t,e){let r=t;for(let t=0;t<e.size();t++){if(r.isStructure()){r=r.getByKey(e.get(t));if(r.isList()){let t=r.asList();r=t.getStructureAt(t.size()-1)}}}return r};t.XmlParser.prototype.parse=function(e){this.clearMessages();let r=t.XString.trim(e);if(t.XString.size(r)===0){this.addErrorExt(t.OriginLayer.PROTOCOL,t.ErrorCodes.PARSER_ERROR,"The XML content is empty.",t.XStringValue.create(r));return t.PrFactory.createStructure()}return this.parseInternal(r)};t.XmlParser.prototype.parseInternal=function(e){this.addProfileStep("Parse XML");let r=t.PrFactory.createStructure();let n=r;let i;let l=t.XList.create();let s=0;let o=t.XString.size(e);while(s<o){let o=t.XString.indexOfFrom(e,"<",s);if(o===-1){break}let u=t.XString.indexOfFrom(e,">",o);if(this.skipTag(e,o)){s=u+1;continue}let a=t.XString.substring(e,o+1,u);let p=this.getTagName(a);let c=t.XString.getCharAt(p,0)===t.XmlParser.SLASH;if(c){if(!t.XString.endsWith(p,this.peek(l))){this.addErrorExt(t.OriginLayer.IOLAYER,t.ErrorCodes.PARSER_ERROR,t.XStringUtils.concatenate3("The tag '",p,"' is not opened properly."),t.XStringValue.create(e));break}this.pop(l);n=this.navigateToParent(r,l);s=u+1;continue}let m=this.getAttributes(a);let y=t.XStringUtils.isNotNullAndNotEmpty(m);let g=this.getClosingTag(p);let f=t.XString.getCharAt(a,t.XString.size(a)-1)===t.XmlParser.SLASH;let P=t.XString.indexOfFrom(e,g,u);if(f&&t.notNull(n)){if(!y){if(r.isEmpty()&&n.isStructure()){n.asStructure().putNull(t.XStringUtils.stripRight(p,1))}if(n.isList()){n.addNewStructure()}s=u+1;continue}}else if(t.XString.indexOf(e,g)===-1){this.addErrorExt(t.OriginLayer.IOLAYER,t.ErrorCodes.PARSER_ERROR,t.XStringUtils.concatenate3("The tag '",p,"' is not closed properly."),t.XStringValue.create(e));break}let h="";if(!f){h=this.getContent(e,u,P)}let d=t.XString.isEqual(h,"");let E=!d&&t.XString.getCharAt(h,0)===60;i=this.getListForElement(n,p);if(t.notNull(i)){n=i;if(y||d||E){n=i.addNewStructure()}}else if(t.notNull(n)){if(y||E){n=n.putNewStructure(p)}}if(!d&&!E&&!f&&t.notNull(n)){this.handleContent(n,h,p)}if(y&&t.notNull(n)){this.handleAttributes(n,m)}if(f){n=this.navigateToParent(r,l)}else{l.add(p)}s=u}t.XObjectExt.release(l);this.endProfileStep();if(this.hasErrors()){return t.PrFactory.createStructure()}if(!r.hasElements()){this.addErrorExt(t.OriginLayer.IOLAYER,t.ErrorCodes.PARSER_ERROR,"The XML contains no tags.",t.XStringValue.create(e))}return r};t.XmlParser.prototype.peek=function(t){if(t.isEmpty()){return null}return t.get(t.size()-1)};t.XmlParser.prototype.pop=function(t){return t.removeAt(t.size()-1)};t.XmlParser.prototype.skipTag=function(e,r){let n=t.XString.getCharAt(e,r+1);return n===33||n===63};t.PrBoolean=function(){};t.PrBoolean.prototype=new t.PrElement;t.PrBoolean.prototype._ff_c="PrBoolean";t.PrBoolean.FALSE=null;t.PrBoolean.TRUE=null;t.PrBoolean.createWithValue=function(e){return e?t.PrBoolean.TRUE:t.PrBoolean.FALSE};t.PrBoolean.staticSetup=function(){t.PrBoolean.TRUE=new t.PrBoolean;t.PrBoolean.TRUE.m_value=true;t.PrBoolean.FALSE=new t.PrBoolean;t.PrBoolean.FALSE.m_value=false};t.PrBoolean.prototype.m_value=false;t.PrBoolean.prototype.asBoolean=function(){return this};t.PrBoolean.prototype.asString=function(){return t.PrFactory.createString(t.XBoolean.convertToString(this.m_value))};t.PrBoolean.prototype.getBoolean=function(){return this.m_value};t.PrBoolean.prototype.getPermaCopy=function(){return t.PrBoolean.createWithValue(this.m_value)};t.PrBoolean.prototype.getType=function(){return t.PrElementType.BOOLEAN};t.PrObject=function(){};t.PrObject.prototype=new t.PrElement;t.PrObject.prototype._ff_c="PrObject";t.PrObject.create=function(){return new t.PrObject};t.PrObject.prototype.m_value=null;t.PrObject.prototype.asObject=function(){return this};t.PrObject.prototype.getObject=function(){return this.m_value};t.PrObject.prototype.getObjectValue=function(){return this.getObject()};t.PrObject.prototype.getType=function(){return t.PrElementType.OBJECT};t.PrObject.prototype.releaseObject=function(){this.m_value=null;t.PrElement.prototype.releaseObject.call(this)};t.PrObject.prototype.setObject=function(t){this.m_value=t};t.PrString=function(){};t.PrString.prototype=new t.PrElement;t.PrString.prototype._ff_c="PrString";t.PrString.EMPTY=null;t.PrString.createWithValue=function(e){if(t.isNull(e)){return null}if(t.XString.size(e)===0){return t.PrString.EMPTY}let r=new t.PrString;r.m_value=e;return r};t.PrString.staticSetup=function(){t.PrString.EMPTY=new t.PrString;t.PrString.EMPTY.m_value=""};t.PrString.prototype.m_value=null;t.PrString.prototype.asString=function(){return this};t.PrString.prototype.getPermaCopy=function(){return t.PrString.createWithValue(this.m_value)};t.PrString.prototype.getString=function(){return this.m_value};t.PrString.prototype.getType=function(){return t.PrElementType.STRING};t.PrString.prototype.releaseObject=function(){this.m_value=null;t.PrElement.prototype.releaseObject.call(this)};t.DfPrProxyElement=function(){};t.DfPrProxyElement.prototype=new t.PrElement;t.DfPrProxyElement.prototype._ff_c="DfPrProxyElement";t.DfPrProxyElement.prototype.addAll=function(e){t.XListUtils.addAllObjects(e,this)};t.DfPrProxyElement.prototype.createArrayCopy=function(){let e=this.size();let r=t.XArray.create(e);t.XArrayUtils.copyFromObjectArray(this,r,0,0,e);return r};t.DfPrProxyElement.prototype.createListCopy=function(){let e=t.XList.create();e.addAll(this);return e};t.DfPrProxyElement.prototype.createMapByStringCopy=function(){let e=t.XHashMapByString.create();e.putAll(this);return e};t.DfPrProxyElement.prototype.getIterator=function(){return this.getValuesAsReadOnlyList().getIterator()};t.DfPrProxyElement.prototype.getKeysAsIterator=function(){return this.getKeysAsReadOnlyList().getIterator()};t.DfPrProxyElement.prototype.getKeysAsReadOnlyListSorted=function(){let e=this.getKeysAsReadOnlyList();if(!t.XCollectionUtils.hasElements(e)){return e}let r=t.XList.createWithList(e);r.sortByDirection(t.XSortDirection.ASCENDING);return r};t.DfPrProxyElement.prototype.getListReadOnlyByKey=function(t){return this.getListByKey(t)};t.DfPrProxyElement.prototype.getReadOnlyList=function(){let e=t.XReadOnlyListWrapper.create(this);return e};t.DfPrProxyElement.prototype.getReadOnlyListAt=function(t){return this.getListAt(t)};t.DfPrProxyElement.prototype.getReadOnlyStructureAt=function(t){return this.getStructureAt(t)};t.DfPrProxyElement.prototype.getStructureReadOnlyByKey=function(t){return this.getStructureByKey(t)};t.DfPrProxyElement.prototype.hasElements=function(){return this.getKeysAsReadOnlyList().size()>0};t.DfPrProxyElement.prototype.hasNullByKey=function(t){return this.containsKey(t)&&this.getByKey(t)===null};t.DfPrProxyElement.prototype.isEmpty=function(){return this.getKeysAsReadOnlyList().size()===0};t.DfPrProxyElement.prototype.isProxy=function(){return true};t.DfPrProxyElement.prototype.putAll=function(e){t.XMapUtils.putAllObjectsByString(e,this)};t.DfPrProxyElement.prototype.putIfAbsent=function(e,r){let n=this.getByKey(e);if(t.isNull(n)){this.put(e,r)}};t.DfPrProxyElement.prototype.putIfNotNull=function(e,r){if(t.notNull(r)){this.put(e,r)}};t.DfPrProxyElement.prototype.size=function(){return this.getKeysAsReadOnlyList().size()};t.PrDouble=function(){};t.PrDouble.prototype=new t.PrElement;t.PrDouble.prototype._ff_c="PrDouble";t.PrDouble.ZERO=null;t.PrDouble.createWithValue=function(e){if(e===0){return t.PrDouble.ZERO}let r=new t.PrDouble;r.m_value=e;return r};t.PrDouble.staticSetup=function(){t.PrDouble.ZERO=new t.PrDouble;t.PrDouble.ZERO.m_value=0};t.PrDouble.prototype.m_value=0;t.PrDouble.prototype.asDouble=function(){return this};t.PrDouble.prototype.asNumber=function(){return this};t.PrDouble.prototype.asString=function(){return t.PrString.createWithValue(t.XDouble.convertToString(this.m_value))};t.PrDouble.prototype.getDouble=function(){return this.m_value};t.PrDouble.prototype.getInteger=function(){return t.XDouble.convertToInt(this.m_value)};t.PrDouble.prototype.getLong=function(){return t.XDouble.convertToLong(this.m_value)};t.PrDouble.prototype.getPermaCopy=function(){return t.PrDouble.createWithValue(this.m_value)};t.PrDouble.prototype.getType=function(){return t.PrElementType.DOUBLE};t.PrInteger=function(){};t.PrInteger.prototype=new t.PrElement;t.PrInteger.prototype._ff_c="PrInteger";t.PrInteger.ints=null;t.PrInteger.createWithValue=function(e){if(e>=-63&&e<64){return t.PrInteger.ints.get(e+63)}let r=new t.PrInteger;r.m_value=e;return r};t.PrInteger.staticSetup=function(){t.PrInteger.ints=t.XArray.create(128);for(let e=-63;e<64;e++){let r=new t.PrInteger;r.m_value=e;t.PrInteger.ints.set(e+63,r)}};t.PrInteger.prototype.m_value=0;t.PrInteger.prototype.asInteger=function(){return this};t.PrInteger.prototype.asNumber=function(){return this};t.PrInteger.prototype.asString=function(){return t.PrString.createWithValue(t.XInteger.convertToString(this.m_value))};t.PrInteger.prototype.getDouble=function(){return this.m_value};t.PrInteger.prototype.getInteger=function(){return this.m_value};t.PrInteger.prototype.getLong=function(){return this.m_value};t.PrInteger.prototype.getPermaCopy=function(){return t.PrInteger.createWithValue(this.m_value)};t.PrInteger.prototype.getType=function(){return t.PrElementType.INTEGER};t.PrList=function(){};t.PrList.prototype=new t.PrElement;t.PrList.prototype._ff_c="PrList";t.PrList.create=function(){let e=new t.PrList;e.setup();return e};t.PrList.createDeepCopy=function(e){return t.PrUtils.createDeepCopyExt(e,null)};t.PrList.prototype.m_list=null;t.PrList.prototype.add=function(t){this.m_list.add(t)};t.PrList.prototype.addAll=function(t){this.m_list.addAll(t)};t.PrList.prototype.addAllStrings=function(e){if(t.notNull(e)){let t=e.size();for(let r=0;r<t;r++){this.addString(e.get(r))}}return this};t.PrList.prototype.addBoolean=function(e){this.m_list.add(t.PrBoolean.createWithValue(e))};t.PrList.prototype.addDouble=function(e){this.m_list.add(t.PrDouble.createWithValue(e))};t.PrList.prototype.addInteger=function(e){this.m_list.add(t.PrInteger.createWithValue(e))};t.PrList.prototype.addLong=function(e){this.m_list.add(t.PrLong.createWithValue(e))};t.PrList.prototype.addNewList=function(){let e=t.PrList.create();this.add(e);return e};t.PrList.prototype.addNewStructure=function(){let e=t.PrFactory.createStructure();this.add(e);return e};t.PrList.prototype.addNull=function(){this.m_list.add(null)};t.PrList.prototype.addString=function(e){this.m_list.add(t.PrString.createWithValue(e))};t.PrList.prototype.asList=function(){return this};t.PrList.prototype.asListReadOnly=function(){return this};t.PrList.prototype.clear=function(){this.m_list.clear()};t.PrList.prototype.contains=function(t){return this.m_list.contains(t)};t.PrList.prototype.createArrayCopy=function(){return this.m_list.createArrayCopy()};t.PrList.prototype.createListCopy=function(){return this.m_list.createListCopy()};t.PrList.prototype.get=function(e){let r=this.m_list.get(e);if(t.notNull(r)&&r.getType()===t.PrElementType.THE_NULL){return null}return r};t.PrList.prototype.getBooleanAt=function(t){return this.m_list.get(t).getBoolean()};t.PrList.prototype.getBooleanAtExt=function(e,r){if(this.isIndexValid(e)&&this.getElementTypeAt(e)===t.PrElementType.BOOLEAN){return this.getBooleanAt(e)}return r};t.PrList.prototype.getDoubleAt=function(e){let r=this.m_list.get(e);if(t.isNull(r)||!r.isNumeric()){return 0}return r.getDouble()};t.PrList.prototype.getDoubleAtExt=function(t,e){if(this.isIndexValid(t)&&this.getElementTypeAt(t).isNumber()){return this.getDoubleAt(t)}return e};t.PrList.prototype.getElementTypeAt=function(e){let r=this.m_list.get(e);return t.isNull(r)?t.PrElementType.THE_NULL:r.getType()};t.PrList.prototype.getIndex=function(t){return this.m_list.getIndex(t)};t.PrList.prototype.getIntegerAt=function(e){let r=this.m_list.get(e);if(t.isNull(r)||!r.isNumeric()){return 0}return r.getInteger()};t.PrList.prototype.getIntegerAtExt=function(t,e){if(this.isIndexValid(t)&&this.getElementTypeAt(t).isNumber()){return this.getIntegerAt(t)}return e};t.PrList.prototype.getIterator=function(){return this.m_list.getIterator()};t.PrList.prototype.getListAt=function(e){let r=this.m_list.get(e);if(t.isNull(r)||!r.isList()){return null}return r};t.PrList.prototype.getLongAt=function(e){let r=this.m_list.get(e);if(t.isNull(r)||!r.isNumeric()){return 0}return r.getLong()};t.PrList.prototype.getLongAtExt=function(t,e){if(this.isIndexValid(t)&&this.getElementTypeAt(t).isNumber()){return this.getLongAt(t)}return e};t.PrList.prototype.getReadOnlyList=function(){let e=t.XReadOnlyListWrapper.create(this);return e};t.PrList.prototype.getReadOnlyListAt=function(t){return this.getListAt(t)};t.PrList.prototype.getReadOnlyStructureAt=function(t){return this.getStructureAt(t)};t.PrList.prototype.getStringAt=function(e){let r=this.m_list.get(e);if(t.isNull(r)||!r.isString()){return null}return r.getString()};t.PrList.prototype.getStringAtExt=function(e,r){if(this.isIndexValid(e)&&this.getElementTypeAt(e)===t.PrElementType.STRING){return this.getStringAt(e)}return r};t.PrList.prototype.getStructureAt=function(e){let r=this.m_list.get(e);if(t.isNull(r)||!r.isStructure()){return null}return r};t.PrList.prototype.getType=function(){return t.PrElementType.LIST};t.PrList.prototype.getValuesAsReadOnlyList=function(){return this.m_list.getValuesAsReadOnlyList()};t.PrList.prototype.hasElements=function(){return this.m_list.hasElements()};t.PrList.prototype.hasNullAt=function(t){return this.m_list.get(t)===null};t.PrList.prototype.insert=function(t,e){this.m_list.insert(t,e)};t.PrList.prototype.isEmpty=function(){return this.m_list.isEmpty()};t.PrList.prototype.isIndexValid=function(t){return this.size()>t&&t>=0};t.PrList.prototype.releaseObject=function(){this.m_list=t.XObjectExt.release(this.m_list);t.PrElement.prototype.releaseObject.call(this)};t.PrList.prototype.removeAt=function(t){return this.m_list.removeAt(t)};t.PrList.prototype.removeElement=function(t){return this.m_list.removeElement(t)};t.PrList.prototype.set=function(t,e){this.m_list.set(t,e)};t.PrList.prototype.setBooleanAt=function(e,r){this.m_list.set(e,t.PrBoolean.createWithValue(r))};t.PrList.prototype.setDoubleAt=function(e,r){this.m_list.set(e,t.PrDouble.createWithValue(r))};t.PrList.prototype.setIntegerAt=function(e,r){this.m_list.set(e,t.PrInteger.createWithValue(r))};t.PrList.prototype.setLongAt=function(e,r){this.m_list.set(e,t.PrLong.createWithValue(r))};t.PrList.prototype.setNullAt=function(t){this.m_list.set(t,null)};t.PrList.prototype.setStringAt=function(e,r){this.m_list.set(e,t.PrString.createWithValue(r))};t.PrList.prototype.setup=function(){this.m_list=t.XList.create()};t.PrList.prototype.size=function(){return this.m_list.size()};t.PrLong=function(){};t.PrLong.prototype=new t.PrElement;t.PrLong.prototype._ff_c="PrLong";t.PrLong.create=function(){return new t.PrLong};t.PrLong.createWithValue=function(e){let r=new t.PrLong;r.m_value=e;return r};t.PrLong.prototype.m_value=0;t.PrLong.prototype.asLong=function(){return this};t.PrLong.prototype.asNumber=function(){return this};t.PrLong.prototype.getDouble=function(){return this.m_value};t.PrLong.prototype.getInteger=function(){return t.XInteger.convertFromStringWithDefault(t.XLong.convertToString(this.m_value),0)};t.PrLong.prototype.getLong=function(){return this.m_value};t.PrLong.prototype.getPermaCopy=function(){return t.PrLong.createWithValue(this.m_value)};t.PrLong.prototype.getType=function(){return t.PrElementType.LONG};t.PrLong.prototype.setLong=function(t){this.m_value=t};t.PrStructure=function(){};t.PrStructure.prototype=new t.PrElement;t.PrStructure.prototype._ff_c="PrStructure";t.PrStructure.create=function(){let e=new t.PrStructure;e.setup();return e};t.PrStructure.createDeepCopy=function(e){return t.PrUtils.createDeepCopyExt(e,null)};t.PrStructure.prototype.m_elementValueMap=null;t.PrStructure.prototype.asStructure=function(){return this};t.PrStructure.prototype.asStructureReadOnly=function(){return this};t.PrStructure.prototype.clear=function(){this.m_elementValueMap.clear()};t.PrStructure.prototype.contains=function(t){return this.m_elementValueMap.contains(t)};t.PrStructure.prototype.containsKey=function(t){return this.m_elementValueMap.containsKey(t)};t.PrStructure.prototype.createMapByStringCopy=function(){return this.m_elementValueMap.createMapByStringCopy()};t.PrStructure.prototype.getBooleanByKey=function(t){return this.getBooleanByKeyExt(t,false)};t.PrStructure.prototype.getBooleanByKeyExt=function(e,r){let n=this.m_elementValueMap.getByKey(e);let i=r;if(t.notNull(n)){if(n.isBoolean()){i=n.getBoolean()}else if(n.isString()){let e=n.asString().getString();i=t.XBoolean.convertFromStringWithDefault(e,r)}}return i};t.PrStructure.prototype.getByKey=function(t){return this.m_elementValueMap.getByKey(t)};t.PrStructure.prototype.getDoubleByKey=function(t){return this.getDoubleByKeyExt(t,0)};t.PrStructure.prototype.getDoubleByKeyExt=function(e,r){let n=this.m_elementValueMap.getByKey(e);if(t.notNull(n)){if(n.isDouble()){return n.getDouble()}else if(n.isInteger()){return n.getInteger()}else if(n.isLong()){return n.getLong()}}return r};t.PrStructure.prototype.getElementTypeByKey=function(e){let r=this.m_elementValueMap.getByKey(e);return t.isNull(r)?t.PrElementType.THE_NULL:r.getType()};t.PrStructure.prototype.getIntegerByKey=function(t){return this.getIntegerByKeyExt(t,0)};t.PrStructure.prototype.getIntegerByKeyExt=function(e,r){let n=this.m_elementValueMap.getByKey(e);if(t.notNull(n)){if(n.isInteger()){return n.getInteger()}else if(n.isLong()){return t.XLong.convertToInt(n.getLong())}else if(n.isDouble()){return t.XDouble.convertToInt(n.getDouble())}}return r};t.PrStructure.prototype.getIterator=function(){return this.getValuesAsReadOnlyList().getIterator()};t.PrStructure.prototype.getKeysAsIterator=function(){return this.m_elementValueMap.getKeysAsIterator()};t.PrStructure.prototype.getKeysAsReadOnlyList=function(){return this.m_elementValueMap.getKeysAsReadOnlyList()};t.PrStructure.prototype.getKeysAsReadOnlyListSorted=function(){let e=this.getKeysAsReadOnlyList();if(!t.XCollectionUtils.hasElements(e)){return e}let r=t.XList.createWithList(e);r.sortByDirection(t.XSortDirection.ASCENDING);return r};t.PrStructure.prototype.getListByKey=function(t){return this.m_elementValueMap.getByKey(t)};t.PrStructure.prototype.getListReadOnlyByKey=function(t){return this.getListByKey(t)};t.PrStructure.prototype.getLongByKey=function(t){return this.getLongByKeyExt(t,0)};t.PrStructure.prototype.getLongByKeyExt=function(e,r){let n=this.m_elementValueMap.getByKey(e);if(t.notNull(n)){if(n.isLong()){return n.getLong()}else if(n.isInteger()){return n.getInteger()}else if(n.isDouble()){return t.XDouble.convertToLong(n.getDouble())}}return r};t.PrStructure.prototype.getStringByKey=function(t){return this.getStringByKeyExt(t,null)};t.PrStructure.prototype.getStringByKeyExt=function(e,r){if(this.containsKey(e)){let r=this.m_elementValueMap.getByKey(e);if(t.notNull(r)&&r.isString()){return r.getString()}return null}return r};t.PrStructure.prototype.getStructureByKey=function(t){return this.m_elementValueMap.getByKey(t)};t.PrStructure.prototype.getStructureReadOnlyByKey=function(t){return this.getStructureByKey(t)};t.PrStructure.prototype.getType=function(){return t.PrElementType.STRUCTURE};t.PrStructure.prototype.getValuesAsReadOnlyList=function(){let e=t.XList.create();let r=this.m_elementValueMap.getIterator();while(r.hasNext()){let n=r.next();if(t.isNull(n)){continue}let i=n.getType();if(i.isNumber()||i===t.PrElementType.BOOLEAN||i===t.PrElementType.STRING){e.add(n)}}return e};t.PrStructure.prototype.hasElements=function(){return this.m_elementValueMap.hasElements()};t.PrStructure.prototype.hasNullByKey=function(t){return this.m_elementValueMap.containsKey(t)&&this.m_elementValueMap.getByKey(t)===null};t.PrStructure.prototype.hasStringByKey=function(e){return this.containsKey(e)&&this.getElementTypeByKey(e)===t.PrElementType.STRING};t.PrStructure.prototype.isEmpty=function(){return this.m_elementValueMap.isEmpty()};t.PrStructure.prototype.put=function(t,e){this.m_elementValueMap.put(t,e)};t.PrStructure.prototype.putAll=function(e){if(t.notNull(e)){let t=e.getKeysAsReadOnlyList();let r=t.size();for(let n=0;n<r;n++){let r=t.get(n);let i=e.getByKey(r);this.put(r,i)}}};t.PrStructure.prototype.putBoolean=function(e,r){this.m_elementValueMap.put(e,t.PrBoolean.createWithValue(r))};t.PrStructure.prototype.putDouble=function(e,r){if(t.XMath.isNaN(r)){this.putNull(e)}else{this.m_elementValueMap.put(e,t.PrDouble.createWithValue(r))}};t.PrStructure.prototype.putIfAbsent=function(t,e){this.m_elementValueMap.putIfAbsent(t,e)};t.PrStructure.prototype.putIfNotNull=function(e,r){if(t.notNull(r)){this.m_elementValueMap.put(e,r)}};t.PrStructure.prototype.putInteger=function(e,r){if(t.XMath.isNaN(r)){this.putNull(e)}else{this.m_elementValueMap.put(e,t.PrInteger.createWithValue(r))}};t.PrStructure.prototype.putLong=function(e,r){if(t.XMath.isNaN(r)){this.putNull(e)}else{this.m_elementValueMap.put(e,t.PrLong.createWithValue(r))}};t.PrStructure.prototype.putNewList=function(e){let r=t.PrFactory.createList();this.put(e,r);return r};t.PrStructure.prototype.putNewStructure=function(e){let r=t.PrStructure.create();this.put(e,r);return r};t.PrStructure.prototype.putNotNullAndNotEmpty=function(e,r){if(t.notNull(r)&&(!r.isList()||!r.asList().isEmpty())&&(!r.isStructure()||!r.asStructure().isEmpty())&&(!r.isString()||!t.XStringUtils.isNullOrEmpty(r.asString().getString()))){this.put(e,r)}};t.PrStructure.prototype.putNull=function(t){this.m_elementValueMap.put(t,null)};t.PrStructure.prototype.putString=function(e,r){if(t.isNull(e)){throw t.XException.createRuntimeException("Missing key")}this.m_elementValueMap.put(e,t.PrString.createWithValue(r))};t.PrStructure.prototype.putStringNotNull=function(e,r){if(t.notNull(r)){this.putString(e,r)}};t.PrStructure.prototype.putStringNotNullAndNotEmpty=function(e,r){if(t.XStringUtils.isNotNullAndNotEmpty(r)){this.putString(e,r)}};t.PrStructure.prototype.releaseObject=function(){this.m_elementValueMap=t.XObjectExt.release(this.m_elementValueMap);t.PrElement.prototype.releaseObject.call(this)};t.PrStructure.prototype.remove=function(t){return this.m_elementValueMap.remove(t)};t.PrStructure.prototype.setup=function(){this.m_elementValueMap=t.XLinkedHashMapByString.create()};t.PrStructure.prototype.size=function(){return this.m_elementValueMap.size()};t.PrTemplateList=function(){};t.PrTemplateList.prototype=new t.PrElement;t.PrTemplateList.prototype._ff_c="PrTemplateList";t.PrTemplateList.TEMPLATE_DELETE_NAME="$delete";t.PrTemplateList.createListWrapper=function(e,r,n){let i=new t.PrTemplateList;i.setupListWrapper(e,r,n,null);return i};t.PrTemplateList.createListWrapperWithTemplate=function(e,r,n,i){let l=new t.PrTemplateList;l.setupListWrapper(e,r,n,i);return l};t.PrTemplateList.prototype.m_list=null;t.PrTemplateList.prototype.m_parent=null;t.PrTemplateList.prototype.m_root=null;t.PrTemplateList.prototype.m_size=0;t.PrTemplateList.prototype.m_template=null;t.PrTemplateList.prototype.add=t.noSupport;t.PrTemplateList.prototype.addAll=t.noSupport;t.PrTemplateList.prototype.addAllStrings=t.noSupport;t.PrTemplateList.prototype.addBoolean=t.noSupport;t.PrTemplateList.prototype.addDouble=t.noSupport;t.PrTemplateList.prototype.addInteger=t.noSupport;t.PrTemplateList.prototype.addLong=t.noSupport;t.PrTemplateList.prototype.addNewList=t.noSupport;t.PrTemplateList.prototype.addNewStructure=t.noSupport;t.PrTemplateList.prototype.addNull=t.noSupport;t.PrTemplateList.prototype.addString=t.noSupport;t.PrTemplateList.prototype.asList=function(){return this};t.PrTemplateList.prototype.asListReadOnly=function(){return this};t.PrTemplateList.prototype.clear=t.noSupport;t.PrTemplateList.prototype.contains=function(t){return this.m_list.contains(t)};t.PrTemplateList.prototype.createArrayCopy=function(){return this.m_list.createArrayCopy()};t.PrTemplateList.prototype.createListCopy=function(){return this.m_list.createListCopy()};t.PrTemplateList.prototype.get=function(t){return this.m_list.get(t)};t.PrTemplateList.prototype.getBooleanAt=function(t){return this.m_list.getBooleanAt(t)};t.PrTemplateList.prototype.getBooleanAtExt=function(t,e){return this.m_list.getBooleanAtExt(t,e)};t.PrTemplateList.prototype.getComponentType=function(){return this.m_list.getComponentType()};t.PrTemplateList.prototype.getDoubleAt=function(t){return this.m_list.getDoubleAt(t)};t.PrTemplateList.prototype.getDoubleAtExt=function(t,e){return this.m_list.getDoubleAtExt(t,e)};t.PrTemplateList.prototype.getElementTypeAt=function(t){return this.m_list.getElementTypeAt(t)};t.PrTemplateList.prototype.getIndex=function(t){return this.m_list.getIndex(t)};t.PrTemplateList.prototype.getIntegerAt=function(t){return this.m_list.getIntegerAt(t)};t.PrTemplateList.prototype.getIntegerAtExt=function(t,e){return this.m_list.getIntegerAtExt(t,e)};t.PrTemplateList.prototype.getIterator=function(){return this.m_list.getIterator()};t.PrTemplateList.prototype.getListAt=function(t){return this.m_list.getListAt(t)};t.PrTemplateList.prototype.getLongAt=function(t){return this.m_list.getLongAt(t)};t.PrTemplateList.prototype.getLongAtExt=function(t,e){return this.m_list.getLongAtExt(t,e)};t.PrTemplateList.prototype.getParent=function(){return this.m_parent};t.PrTemplateList.prototype.getPermaCopy=function(){return this.m_list.getPermaCopy()};t.PrTemplateList.prototype.getReadOnlyList=function(){let e=t.XReadOnlyListWrapper.create(this);return e};t.PrTemplateList.prototype.getReadOnlyListAt=function(t){return this.getListAt(t)};t.PrTemplateList.prototype.getReadOnlyStructureAt=function(t){return this.getStructureAt(t)};t.PrTemplateList.prototype.getStringAt=function(e){let r=this.m_list.getStringAt(e);return t.ReplaceTagHandler.handle(this,r)};t.PrTemplateList.prototype.getStringAtExt=function(e,r){let n=this.getStringAt(e);if(t.notNull(n)){return n}return r};t.PrTemplateList.prototype.getStringRepresentation=function(){return this.m_list.getStringRepresentation()};t.PrTemplateList.prototype.getStructureAt=function(e){if(e>=this.m_size){throw t.XException.createIllegalArgumentException("Index out of range")}let r=e<this.m_list.size();let n=t.notNull(this.m_template)&&e<this.m_template.size();if(r&&n){let r=this.m_list.getStructureAt(e);let n=t.PrTemplateStructure.createStructureWrapper(this.m_root,this,this.m_template.get(e).asStructure());return t.PrTemplateStructure.createStructureWrapperWithTemplate(this.m_root,this,r,n)}if(n){return t.PrTemplateStructure.createStructureWrapper(this.m_root,this,this.m_template.get(e).asStructure())}if(r){return t.PrTemplateStructure.createStructureWrapper(this.m_root,this,this.m_list.getStructureAt(e))}return null};t.PrTemplateList.prototype.getType=function(){return this.m_list.getType()};t.PrTemplateList.prototype.getValueType=function(){return this.m_list.getValueType()};t.PrTemplateList.prototype.getValuesAsReadOnlyList=function(){return this.m_list.getValuesAsReadOnlyList()};t.PrTemplateList.prototype.hasElements=function(){return this.m_list.hasElements()};t.PrTemplateList.prototype.hasNullAt=function(t){return this.m_list.hasNullAt(t)};t.PrTemplateList.prototype.insert=t.noSupport;t.PrTemplateList.prototype.isEmpty=function(){return this.m_list.isEmpty()};t.PrTemplateList.prototype.isList=function(){return true};t.PrTemplateList.prototype.releaseObject=function(){this.m_list=t.XObjectExt.release(this.m_list);this.m_template=t.XObjectExt.release(this.m_template);this.m_parent=null;this.m_root=null;t.PrElement.prototype.releaseObject.call(this)};t.PrTemplateList.prototype.removeAt=t.noSupport;t.PrTemplateList.prototype.removeElement=t.noSupport;t.PrTemplateList.prototype.set=function(t,e){this.m_list.set(t,e)};t.PrTemplateList.prototype.setBooleanAt=t.noSupport;t.PrTemplateList.prototype.setDoubleAt=t.noSupport;t.PrTemplateList.prototype.setIntegerAt=t.noSupport;t.PrTemplateList.prototype.setLongAt=t.noSupport;t.PrTemplateList.prototype.setNullAt=t.noSupport;t.PrTemplateList.prototype.setParent=function(t){this.m_parent=t};t.PrTemplateList.prototype.setStringAt=t.noSupport;t.PrTemplateList.prototype.setupListWrapper=function(e,r,n,i){this.m_parent=r;this.m_list=n;this.m_root=e;this.m_template=i;if(t.isNull(this.m_template)){this.m_size=this.m_list.size()}else{this.m_size=t.XMath.max(this.m_size,this.m_template.size());let e=this.m_list.size();for(let r=0;r<e;r++){let e=this.m_list.getStructureAt(r);if(t.isNull(e)){break}if(e.getBooleanByKeyExt(t.PrTemplateList.TEMPLATE_DELETE_NAME,false)){this.m_size=r}}}};t.PrTemplateList.prototype.size=function(){return this.m_size};t.PrTemplateList.prototype.toString=function(){return this.m_list.toString()};t.PrTemplateStructure=function(){};t.PrTemplateStructure.prototype=new t.PrElement;t.PrTemplateStructure.prototype._ff_c="PrTemplateStructure";t.PrTemplateStructure.TEMPLATE_PATH_NAME="$ref";t.PrTemplateStructure.TEMPLATE_REPLACE_NAME="$replace";t.PrTemplateStructure.createStructureWrapper=function(e,r,n){let i=new t.PrTemplateStructure;i.setupStructureWrapper(e,r,n,null);return i};t.PrTemplateStructure.createStructureWrapperWithTemplate=function(e,r,n,i){let l=new t.PrTemplateStructure;l.setupStructureWrapper(e,r,n,i);return l};t.PrTemplateStructure.prototype.m_parent=null;t.PrTemplateStructure.prototype.m_replaceTemplateFields=null;t.PrTemplateStructure.prototype.m_root=null;t.PrTemplateStructure.prototype.m_structure=null;t.PrTemplateStructure.prototype.m_template=null;t.PrTemplateStructure.prototype.asStructure=function(){return this};t.PrTemplateStructure.prototype.asStructureReadOnly=function(){return this};t.PrTemplateStructure.prototype.clear=t.noSupport;t.PrTemplateStructure.prototype.contains=function(e){let r=this.m_structure.contains(e);if(!r&&t.notNull(this.m_template)){r=this.m_template.contains(e)}return r};t.PrTemplateStructure.prototype.containsKey=function(t){let e=this.m_structure.containsKey(t);if(!e&&this.isTemplateAvailable(t)){e=this.m_template.containsKey(t)}return e};t.PrTemplateStructure.prototype.createMapByStringCopy=t.noSupport;t.PrTemplateStructure.prototype.getBooleanByKey=function(t){return this.getByKey(t).asBoolean().getBoolean()};t.PrTemplateStructure.prototype.getBooleanByKeyExt=function(e,r){let n=this.getByKey(e);return t.isNull(n)?r:n.asBoolean().getBoolean()};t.PrTemplateStructure.prototype.getByKey=function(e){let r=this.m_structure.getByKey(e);if(t.isNull(r)&&this.isTemplateAvailable(e)){r=this.m_template.getByKey(e)}return r};t.PrTemplateStructure.prototype.getComponentType=function(){return this.m_structure.getComponentType()};t.PrTemplateStructure.prototype.getCoreStructureElementNames=function(){return this.m_structure.getKeysAsReadOnlyList()};t.PrTemplateStructure.prototype.getDoubleByKey=function(t){return this.getByKey(t).asNumber().getDouble()};t.PrTemplateStructure.prototype.getDoubleByKeyExt=function(e,r){let n=this.getByKey(e);return t.isNull(n)?r:n.asNumber().getDouble()};t.PrTemplateStructure.prototype.getElementTypeByKey=function(e){let r=this.m_structure.getElementTypeByKey(e);if((t.isNull(r)||r===t.PrElementType.THE_NULL)&&t.notNull(this.m_template)){return this.m_template.getElementTypeByKey(e)}return r};t.PrTemplateStructure.prototype.getIntegerByKey=function(t){return this.getByKey(t).asNumber().getInteger()};t.PrTemplateStructure.prototype.getIntegerByKeyExt=function(e,r){let n=this.getByKey(e);return t.isNull(n)?r:n.asNumber().getInteger()};t.PrTemplateStructure.prototype.getIterator=function(){return this.getValuesAsReadOnlyList().getIterator()};t.PrTemplateStructure.prototype.getKeysAsIterator=function(){return this.getKeysAsReadOnlyList().getIterator()};t.PrTemplateStructure.prototype.getKeysAsReadOnlyList=function(){let e=t.XList.create();e.addAll(this.m_structure.getKeysAsReadOnlyList());if(t.notNull(this.m_template)){e.addAll(this.m_template.getKeysAsReadOnlyList())}return e};t.PrTemplateStructure.prototype.getKeysAsReadOnlyListSorted=function(){let e=t.XList.createWithList(this.getKeysAsReadOnlyList());e.sortByDirection(t.XSortDirection.ASCENDING);return e};t.PrTemplateStructure.prototype.getListByKey=function(e){let r=this.m_structure.containsKey(e);let n=this.isTemplateAvailable(e);if(r&&n){let r=this.m_structure.getListByKey(e);let n=t.PrTemplateList.createListWrapper(this.m_root,this,this.m_template.getByKey(e).asList());return t.PrTemplateList.createListWrapperWithTemplate(this.m_root,this,r,n)}if(n){return t.PrTemplateList.createListWrapper(this.m_root,this,this.m_template.getByKey(e).asList())}if(r){return t.PrTemplateList.createListWrapper(this.m_root,this,this.m_structure.getListByKey(e))}return null};t.PrTemplateStructure.prototype.getListReadOnlyByKey=function(t){return this.getListByKey(t)};t.PrTemplateStructure.prototype.getLongByKey=function(t){return this.getByKey(t).asNumber().getLong()};t.PrTemplateStructure.prototype.getLongByKeyExt=function(e,r){let n=this.getByKey(e);return t.isNull(n)?r:n.asNumber().getLong()};t.PrTemplateStructure.prototype.getParent=function(){return this.m_parent};t.PrTemplateStructure.prototype.getPermaCopy=t.noSupport;t.PrTemplateStructure.prototype.getStringByKey=function(e){let r=this.getByKey(e);if(t.isNull(r)||r.getType()!==t.PrElementType.STRING){return null}return t.ReplaceTagHandler.handle(this,r.asString().getString())};t.PrTemplateStructure.prototype.getStringByKeyExt=function(e,r){let n=this.getStringByKey(e);return t.isNull(n)?r:n};t.PrTemplateStructure.prototype.getStringRepresentation=function(){return this.m_structure.getStringRepresentation()};t.PrTemplateStructure.prototype.getStructureByKey=function(e){let r=this.m_structure.containsKey(e);let n=this.isTemplateAvailable(e);if(r&&n){let r=this.m_structure.getStructureByKey(e);let n=t.PrTemplateStructure.createStructureWrapper(this.m_root,this,this.m_template.getByKey(e).asStructure());return t.PrTemplateStructure.createStructureWrapperWithTemplate(this.m_root,this,r,n)}if(n){return t.PrTemplateStructure.createStructureWrapper(this.m_root,this,this.m_template.getByKey(e).asStructure())}if(r){return t.PrTemplateStructure.createStructureWrapper(this.m_root,this,this.m_structure.getStructureByKey(e))}return null};t.PrTemplateStructure.prototype.getStructureReadOnlyByKey=function(t){return this.getStructureByKey(t)};t.PrTemplateStructure.prototype.getType=function(){return this.m_structure.getType()};t.PrTemplateStructure.prototype.getValueType=function(){return this.m_structure.getValueType()};t.PrTemplateStructure.prototype.getValuesAsReadOnlyList=function(){let e=t.XList.create();e.addAll(this.m_structure.getValuesAsReadOnlyList());if(t.notNull(this.m_template)){e.addAll(this.m_template.getValuesAsReadOnlyList())}return e};t.PrTemplateStructure.prototype.hasElements=function(){let e=this.m_structure.hasElements();if(!e&&t.notNull(this.m_template)){e=this.m_template.hasElements()}return e};t.PrTemplateStructure.prototype.hasNullByKey=function(t){let e=this.m_structure.hasNullByKey(t);if(!e&&this.isTemplateAvailable(t)){e=this.m_template.hasNullByKey(t)}return e};t.PrTemplateStructure.prototype.hasStringByKey=function(t){let e=this.m_structure.hasStringByKey(t);if(!e&&this.isTemplateAvailable(t)){return this.m_template.hasStringByKey(t)}return e};t.PrTemplateStructure.prototype.isEmpty=function(){let e=this.m_structure.isEmpty();if(!e&&t.notNull(this.m_template)){e=this.m_template.isEmpty()}return e};t.PrTemplateStructure.prototype.isStructure=function(){return true};t.PrTemplateStructure.prototype.isTemplateAvailable=function(e){return t.notNull(this.m_template)&&this.m_template.containsKey(e)&&(t.isNull(this.m_replaceTemplateFields)||!this.m_replaceTemplateFields.contains(e))};t.PrTemplateStructure.prototype.put=t.noSupport;t.PrTemplateStructure.prototype.putAll=function(t){let e=t.getKeysAsReadOnlyList();let r=e.size();for(let n=0;n<r;n++){let r=e.get(n);let i=t.getByKey(r);this.put(r,i)}};t.PrTemplateStructure.prototype.putBoolean=t.noSupport;t.PrTemplateStructure.prototype.putDouble=t.noSupport;t.PrTemplateStructure.prototype.putIfAbsent=t.noSupport;t.PrTemplateStructure.prototype.putIfNotNull=t.noSupport;t.PrTemplateStructure.prototype.putInteger=t.noSupport;t.PrTemplateStructure.prototype.putLong=t.noSupport;t.PrTemplateStructure.prototype.putNewList=t.noSupport;t.PrTemplateStructure.prototype.putNewStructure=t.noSupport;t.PrTemplateStructure.prototype.putNotNullAndNotEmpty=function(t,e){this.m_structure.putNotNullAndNotEmpty(t,e)};t.PrTemplateStructure.prototype.putNull=t.noSupport;t.PrTemplateStructure.prototype.putString=t.noSupport;t.PrTemplateStructure.prototype.putStringNotNull=t.noSupport;t.PrTemplateStructure.prototype.putStringNotNullAndNotEmpty=t.noSupport;t.PrTemplateStructure.prototype.releaseObject=function(){this.m_structure=t.XObjectExt.release(this.m_structure);this.m_template=t.XObjectExt.release(this.m_template);this.m_replaceTemplateFields=t.XObjectExt.release(this.m_replaceTemplateFields);this.m_parent=null;this.m_root=null;t.PrElement.prototype.releaseObject.call(this)};t.PrTemplateStructure.prototype.remove=t.noSupport;t.PrTemplateStructure.prototype.setParent=function(t){this.m_parent=t};t.PrTemplateStructure.prototype.setupStructureWrapper=function(e,r,n,i){this.m_parent=r;this.m_structure=n;let l=this.m_structure.getListByKey(t.PrTemplateStructure.TEMPLATE_REPLACE_NAME);if(t.notNull(l)){this.m_replaceTemplateFields=t.XHashSetOfString.create();let e=l.size();for(let t=0;t<e;t++){this.m_replaceTemplateFields.add(l.getStringAt(t))}}this.m_root=e;this.m_template=i;if(t.isNull(this.m_template)){t.XObjectExt.assertNotNullExt(this.m_root,"root shall never be null");this.m_template=this.tryGetTemplateFromRoot()}};t.PrTemplateStructure.prototype.size=function(){let e=this.m_structure.size();if(t.notNull(this.m_template)){e=e+this.m_template.size()}return e};t.PrTemplateStructure.prototype.tryGetTemplateFromRoot=function(){let e=this.m_structure.getStringByKey(t.PrTemplateStructure.TEMPLATE_PATH_NAME);if(t.XStringUtils.isNullOrEmpty(e)||!t.XString.startsWith(e,"#")){return null}let r=this.m_root;let n=t.XStringTokenizer.splitString(e,"/");let i=n.size();for(let t=1;t<i;t++){r=r.getStructureByKey(n.get(t))}return t.PrTemplateStructure.createStructureWrapper(this.m_root,this.getParent(),r)};t.XProperties=function(){};t.XProperties.prototype=new t.DfAbstractMapByString;t.XProperties.prototype._ff_c="XProperties";t.XProperties.create=function(){let e=new t.XProperties;e.setupExt(null,null);return e};t.XProperties.createByMapCopy=function(e){let r=new t.XProperties;r.setupExt(e,null);return r};t.XProperties.createWithParent=function(e){let r=new t.XProperties;r.setupExt(null,e);return r};t.XProperties.prototype.m_isParentEnabled=false;t.XProperties.prototype.m_parent=null;t.XProperties.prototype.m_storage=null;t.XProperties.prototype.assertNameAndGet=function(e){let r=this.getByKey(e);t.XStringUtils.checkStringNotEmpty(r,t.XStringUtils.concatenate2("Property cannot be found: ",e));return r};t.XProperties.prototype.clear=function(){this.m_storage.clear()};t.XProperties.prototype.cloneExt=function(e){let r=t.XProperties.createByMapCopy(this);if(t.notNull(this.m_parent)){this.setParent(this.m_parent);this.setEnableParentProperties(this.m_isParentEnabled)}return r};t.XProperties.prototype.contains=function(t){let e=this.m_storage.contains(t);if(e===false&&this.m_isParentEnabled===true){e=this.m_parent.contains(t)}return e};t.XProperties.prototype.containsKey=function(t){let e=this.m_storage.containsKey(t);if(e===false&&this.m_isParentEnabled===true){e=this.m_parent.containsKey(t)}return e};t.XProperties.prototype.createMapByStringCopy=function(){let e;if(this.m_isParentEnabled===true){let r=this.getKeysAsReadOnlyList();e=t.XHashMapByString.create();for(let t=0;t<r.size();t++){let n=r.get(t);let i=this.getByKey(n);e.put(n,i)}}else{e=this.m_storage.createMapByStringCopy()}return e};t.XProperties.prototype.deserialize=function(e){let r=t.XStringTokenizer.splitString(e,"\n");if(t.notNull(r)){for(let e=0;e<r.size();e++){let n=r.get(e);let i=t.XStringUtils.unescapeLineEndings(n);if(t.XStringUtils.isNotNullAndNotEmpty(i)){if(!t.XString.startsWith(i,"#")){let e=t.XString.indexOf(i,"=");if(e!==-1){let r=t.XString.substring(i,e+1,-1);let n=t.XString.trim(t.XString.substring(i,0,e));this.put(n,r)}}}}}};t.XProperties.prototype.getBooleanByKey=function(e){return t.XBoolean.convertFromString(this.assertNameAndGet(e))};t.XProperties.prototype.getBooleanByKeyExt=function(e,r){let n=this.getByKey(e);return t.isNull(n)?r:t.XBoolean.convertFromStringWithDefault(n,r)};t.XProperties.prototype.getByKey=function(e){let r=this.m_storage.getByKey(e);if(t.isNull(r)&&this.m_isParentEnabled===true){r=this.m_parent.getByKey(e)}return r};t.XProperties.prototype.getComponentType=function(){return this.getValueType()};t.XProperties.prototype.getDoubleByKey=function(e){return t.XDouble.convertFromString(this.assertNameAndGet(e))};t.XProperties.prototype.getDoubleByKeyExt=function(e,r){let n=this.getByKey(e);return t.isNull(n)?r:t.XDouble.convertFromStringWithDefault(n,r)};t.XProperties.prototype.getIntegerByKey=function(e){return t.XInteger.convertFromStringWithRadix(this.assertNameAndGet(e),10)};t.XProperties.prototype.getIntegerByKeyExt=function(e,r){let n=this.getByKey(e);return t.isNull(n)?r:t.XInteger.convertFromStringWithDefault(n,r)};t.XProperties.prototype.getKeysAsReadOnlyList=function(){let e;e=this.m_storage.getKeysAsReadOnlyList();if(this.m_isParentEnabled===true){let r=t.XHashSetOfString.create();r.addAll(e);let n=this.m_parent.getKeysAsReadOnlyList();r.addAll(n);e=r.getValuesAsReadOnlyList()}return e};t.XProperties.prototype.getLongByKey=function(e){return t.XLong.convertFromString(this.assertNameAndGet(e))};t.XProperties.prototype.getLongByKeyExt=function(e,r){let n=this.getByKey(e);return t.isNull(n)?r:t.XLong.convertFromStringWithDefault(n,r)};t.XProperties.prototype.getParent=function(){return this.m_parent};t.XProperties.prototype.getStringByKey=function(t){return this.getByKey(t)};t.XProperties.prototype.getStringByKeyExt=function(e,r){let n=this.getByKey(e);if(t.isNull(n)){n=r}return n};t.XProperties.prototype.getStringRepresentation=function(){return this.toString()};t.XProperties.prototype.getValueType=function(){return t.XValueType.PROPERTIES};t.XProperties.prototype.getValuesAsReadOnlyList=function(){let e;if(this.m_isParentEnabled===true){let r=this.getKeysAsReadOnlyList();let n=t.XList.create();for(let t=0;t<r.size();t++){let e=r.get(t);let i=this.getByKey(e);n.add(i)}n.sortByDirection(t.XSortDirection.ASCENDING);e=n}else{e=this.m_storage.getValuesAsReadOnlyList()}return e};t.XProperties.prototype.hasElements=function(){let t=this.m_storage.hasElements();if(t===false&&this.m_isParentEnabled===true){t=this.m_parent.hasElements()}return t};t.XProperties.prototype.hasNullByKey=function(t){return this.containsKey(t)&&this.getByKey(t)===null};t.XProperties.prototype.isParentPropertiesEnabled=function(){return this.m_isParentEnabled};t.XProperties.prototype.isValueDefault=function(t){return!this.isValueDefined(t)};t.XProperties.prototype.isValueDefined=function(t){return this.m_storage.containsKey(t)};t.XProperties.prototype.put=function(e,r){if(t.isNull(r)){this.m_storage.remove(e)}else{this.m_storage.put(e,r)}};t.XProperties.prototype.putBoolean=function(e,r){this.put(e,t.XBoolean.convertToString(r))};t.XProperties.prototype.putDouble=function(e,r){this.put(e,t.XDouble.convertToString(r))};t.XProperties.prototype.putInteger=function(e,r){this.put(e,t.XInteger.convertToString(r))};t.XProperties.prototype.putLong=function(e,r){this.put(e,t.XLong.convertToString(r))};t.XProperties.prototype.putNull=function(t){this.m_storage.put(t,null)};t.XProperties.prototype.putString=function(e,r){if(t.isNull(r)){this.m_storage.remove(e)}else{this.m_storage.put(e,r)}};t.XProperties.prototype.putStringNotNull=function(e,r){if(t.notNull(r)){this.m_storage.put(e,r)}};t.XProperties.prototype.putStringNotNullAndNotEmpty=function(e,r){if(t.XStringUtils.isNotNullAndNotEmpty(r)){this.putString(e,r)}};t.XProperties.prototype.releaseObject=function(){this.m_storage=t.XObjectExt.release(this.m_storage);this.m_parent=null;t.DfAbstractMapByString.prototype.releaseObject.call(this)};t.XProperties.prototype.remove=function(t){return this.m_storage.remove(t)};t.XProperties.prototype.serialize=function(){let e=t.XList.create();e.addAll(this.getKeysAsReadOnlyList());e.sortByDirection(t.XSortDirection.ASCENDING);let r=t.XStringBuffer.create();for(let n=0;n<e.size();n++){let i=e.get(n);let l=this.m_storage.getByKey(i);let s=t.XStringUtils.concatenate3(i,"=",l);r.append(t.XStringUtils.escapeLineEndings(s)).append("\n")}return r.toString()};t.XProperties.prototype.setEnableParentProperties=function(e){this.m_isParentEnabled=e&&t.notNull(this.m_parent)};t.XProperties.prototype.setParent=function(e){this.m_parent=e;this.m_isParentEnabled=t.notNull(e)};t.XProperties.prototype.setupExt=function(e,r){if(t.isNull(e)){this.m_storage=t.XHashMapByString.create()}else{this.m_storage=t.XHashMapByString.createWithMap(e)}this.setParent(r)};t.XProperties.prototype.size=function(){let t;if(this.m_isParentEnabled===true){t=this.getKeysAsReadOnlyList().size()}else{t=this.m_storage.size()}return t};t.XProperties.prototype.toString=function(){return this.m_storage.toString()};t.XPropertiesWithCaseInsensitiveKeys=function(){};t.XPropertiesWithCaseInsensitiveKeys.prototype=new t.XProperties;t.XPropertiesWithCaseInsensitiveKeys.prototype._ff_c="XPropertiesWithCaseInsensitiveKeys";t.XPropertiesWithCaseInsensitiveKeys.createExt=function(){let e=new t.XPropertiesWithCaseInsensitiveKeys;e.setupExt(null,null);return e};t.XPropertiesWithCaseInsensitiveKeys.prototype.containsKey=function(e){return t.XProperties.prototype.containsKey.call(this,t.XString.toLowerCase(e))};t.XPropertiesWithCaseInsensitiveKeys.prototype.getByKey=function(e){return t.XProperties.prototype.getByKey.call(this,t.XString.toLowerCase(e))};t.XPropertiesWithCaseInsensitiveKeys.prototype.isValueDefined=function(e){return t.XProperties.prototype.isValueDefined.call(this,t.XString.toLowerCase(e))};t.XPropertiesWithCaseInsensitiveKeys.prototype.put=function(e,r){t.XProperties.prototype.put.call(this,t.XString.toLowerCase(e),r)};t.XPropertiesWithCaseInsensitiveKeys.prototype.putNull=function(e){t.XProperties.prototype.putNull.call(this,t.XString.toLowerCase(e))};t.XPropertiesWithCaseInsensitiveKeys.prototype.putString=function(e,r){t.XProperties.prototype.putString.call(this,t.XString.toLowerCase(e),r)};t.XPropertiesWithCaseInsensitiveKeys.prototype.putStringNotNull=function(e,r){t.XProperties.prototype.putStringNotNull.call(this,t.XString.toLowerCase(e),r)};t.XPropertiesWithCaseInsensitiveKeys.prototype.putStringNotNullAndNotEmpty=function(e,r){t.XProperties.prototype.putStringNotNullAndNotEmpty.call(this,t.XString.toLowerCase(e),r)};t.XPropertiesWithCaseInsensitiveKeys.prototype.remove=function(e){return t.XProperties.prototype.remove.call(this,t.XString.toLowerCase(e))};t.StructuresModule=function(){};t.StructuresModule.prototype=new t.DfModule;t.StructuresModule.prototype._ff_c="StructuresModule";t.StructuresModule.s_module=null;t.StructuresModule.getInstance=function(){if(t.isNull(t.StructuresModule.s_module)){t.DfModule.checkInitialized(t.CommonsExtModule.getInstance());t.StructuresModule.s_module=t.DfModule.startExt(new t.StructuresModule);t.XmlParserFactory.staticSetupXmlParserFactory();t.JsonParserGenericFactory.staticSetup();t.DocumentFormatType.staticSetup();t.XmlUtils.staticSetup();t.PrElementType.staticSetup();t.PrFactoryUniversal.staticSetup();t.PrSerializerFactory.staticSetup();t.JsonParserFactory.staticSetupJsonParserFactory();t.JsonFilteringSerializerFactory.staticSetup();t.DfModule.stopExt(t.StructuresModule.s_module)}return t.StructuresModule.s_module};t.StructuresModule.prototype.getName=function(){return"ff0070.structures"};t.StructuresModule.getInstance();return t});
//# sourceMappingURL=ff0070.structures.js.map