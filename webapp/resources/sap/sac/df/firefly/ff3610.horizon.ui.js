/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff3600.horizon.ui.api"],function(t){"use strict";t.HuHorizonConstants={ALT_PLUGIN_DIRECTORY:"/home/main/horizon/pluginmanifests",CUSTOM_PLUGIN_MANIFESTS_TO_PROCESS_ENV_VARIABLE:"ff_horizon_custom_plugin_manifests_to_process",DEBUG_ENVIRONMENT_ENABLED:false,DEBUG_ENVIRONMENT_ENV_VARIABLE:"ff_horizon_debug",DEFAULT_CONFIG_EXTENSION:".cfg",DEFAULT_HOME_DIRECTORY:"/home/main/",DEFAULT_PLUGIN_DIRECTORY:"/etc/horizon/pluginmanifests",DEFAULT_PLUGIN_MANIFEST_EXTENSION:".json",DEFAULT_SPLASH_SCREEN_IMAGE_PATH:"${ff_mimes}/images/horizon/splashScreen.png",FRAMEWORK_VERSION:"0.9.0",PLUGIN_MANIFEST_PROCESSING_MODE_ENV_VARIABLE:"ff_horizon_plugin_manifest_processing_mode",SELECTED_WORKSPACE_PATH_KEY:"selectedWorkSpacePath"};t.HuHorizonInternalNotifications={ALL_PLUGIN_RENDERING_FINISHED:"com.sap.ff.Horizon.Notification.AllPluginRenderingFinished",FRAMEWORK_MODE_CHANGED:"com.sap.ff.Horizon.Notification.FrameworkModeChanged",HIDE_SHELL_MENU:"com.sap.ff.Horizon.Notification.HideShellMenu",HORIZON_CONFIGURATION_CHANGED:"com.sap.ff.Horizon.Notification.HorizonConfigurationChanged",MESSAGE_MANAGER_CLEAR_ALL_MESSAGES:"com.sap.ff.Horizon.Notification.MessageManager.ClearAllMessages",MESSAGE_MANAGER_CLEAR_MESSAGES:"com.sap.ff.Horizon.Notification.MessageManager.ClearMessages",MESSAGE_MANAGER_CLEAR_MESSAGES_MESSAGE_TYPE_NOTIFI_DATA:"com.sap.ff.Horizon.NotificationData.MessageManager.ClearMessagesMessageType",MESSAGE_MANAGER_NEW_MESSAGE:"com.sap.ff.Horizon.Notification.MessageManager.NewMessage",MESSAGE_MANAGER_NEW_MESSAGE_MESSAGE_NOTIFI_DATA:"com.sap.ff.Horizon.NotificationData.MessageManager.NewMessageMessage",MESSAGE_MANAGER_STATUS_MESSAGE_CHANGED:"com.sap.ff.Horizon.Notification.MessageManager.StatusMessageChanged",MESSAGE_MANAGER_STATUS_MESSAGE_CHANGED_NEW_MESSAGE_NOTIFI_DATA:"com.sap.ff.Horizon.NotificationData.MessageManager.StatusMessageChangedNewMessage",NEW_WORKSPACE_TITLE_NOTIFI_DATA:"com.sap.ff.Horizon.NotificationData.NewWorkspaceTitle",PLUGIN_STARTED:"com.sap.ff.Horizon.Notification.Plugin.Started",PLUGIN_STARTED_PLUGIN_NAME_NOTIFI_DATA:"com.sap.ff.Horizon.NotificationData.Plugin.StartedPluginName",PLUGIN_STARTED_PLUGIN_TYPE_NOTIFI_DATA:"com.sap.ff.Horizon.NotificationData.Plugin.StartedPluginType",SET_WORKSPACE_TITLE:"com.sap.ff.Horizon.Notification.SetWorkspaceTitle",SHOW_SHELL_MENU:"com.sap.ff.Horizon.Notification.ShowShellMenu",STATUS_BAR_MANAGER_CLEAR_MESSAGES_PRESSED:"com.sap.ff.Horizon.Notification.StatusBarManager.ClearMessagesPressed",STATUS_BAR_MANAGER_CLEAR_MESSAGES_PRESSED_MESSAGE_TYPE_NOTIFY_DATA:"com.sap.ff.Horizon.NotificationData.StatusBarManager.ClearMessagesPressedMessageType",STATUS_BAR_MANAGER_HIDE_NETWORK_ACTIVITY_INDICATOR:"com.sap.ff.Horizon.Notification.StatusBarManager.HideNetworkActivityIndicator",STATUS_BAR_MANAGER_SHOW_NETWORK_ACTIVITY_INDICATOR:"com.sap.ff.Horizon.Notification.StatusBarManager.ShowNetworkActivityIndicator",TEST_ACTION_NOTIFICATION_DATA_KEY_CONTEXT:"com.sap.ff.Horizon.NotificationData.Test.Action.context",TEST_ACTION_NOTIFICATION_DATA_KEY_CUSTOM_DATA:"com.sap.ff.Horizon.NotificationData.Test.Action.customData",TEST_ACTION_NOTIFICATION_PREFIX:"com.sap.ff.Horizon.Notification.Test.Action."};t.HuHorizonDebugUtility=function(){};t.HuHorizonDebugUtility.prototype=new t.XObject;t.HuHorizonDebugUtility.prototype._ff_c="HuHorizonDebugUtility";t.HuHorizonDebugUtility.create=function(e){let o=new t.HuHorizonDebugUtility;o._setupInternal(e);return o};t.HuHorizonDebugUtility.prototype.m_process=null;t.HuHorizonDebugUtility.prototype.m_startupStartTimeMs=0;t.HuHorizonDebugUtility.prototype.m_startupTimeMs=0;t.HuHorizonDebugUtility.prototype._getProcess=function(){return this.m_process};t.HuHorizonDebugUtility.prototype._setupInternal=function(t){this.m_process=t};t.HuHorizonDebugUtility.prototype.getLastStartupTime=function(){return this.m_startupTimeMs};t.HuHorizonDebugUtility.prototype.isDebugEnvironment=function(){return this._getProcess().getEnvironment().getBooleanByKeyExt(t.HuHorizonConstants.DEBUG_ENVIRONMENT_ENV_VARIABLE,t.HuHorizonConstants.DEBUG_ENVIRONMENT_ENABLED)};t.HuHorizonDebugUtility.prototype.presentPluginProcessTaskManger=function(){let e=t.SuTaskManager.createDialogRunnerForProcessId(this._getProcess(),this._getProcess().getProcessId());e.runProgram()};t.HuHorizonDebugUtility.prototype.releaseObject=function(){this.m_process=null;t.XObject.prototype.releaseObject.call(this)};t.HuHorizonDebugUtility.prototype.startupFinished=function(){let e=t.XSystemUtils.getCurrentTimeInMilliseconds();this.m_startupTimeMs=e-this.m_startupStartTimeMs;return this.m_startupTimeMs};t.HuHorizonDebugUtility.prototype.startupStarted=function(){this.m_startupStartTimeMs=t.XSystemUtils.getCurrentTimeInMilliseconds()};t.HuLayoutFactory={s_classMap:null,_registerLayout:function(e,o){if(t.notNull(e)&&t.notNull(o)){t.HuLayoutFactory.s_classMap.put(e.getName(),o)}else{t.XLogger.println("Cannot register layout class! Missing layout type or object class!")}},createLayout:function(e,o){let n=null;if(t.isNull(o)){throw t.XException.createRuntimeException("Missing layout type! A layout type is required to create a new layout object!")}if(t.isNull(e)){throw t.XException.createRuntimeException("Missing layout manager! A layout manager is required to create a new layout object!")}let i=t.HuLayoutFactory.s_classMap.getByKey(o.getName());if(t.notNull(i)){try{n=i.newInstance(null);n.initLayout(e);if(n.getLayoutType()!==o){throw t.XException.createException("Layout type does not match the layout type from the new object instance!")}}catch(e){t.XLogger.println(t.XStringUtils.concatenate2("[HuLayoutFactory] Error during layout initialization. Reason: ",t.XException.getMessage(e)))}}return n},staticSetup:function(){t.HuLayoutFactory.s_classMap=t.XHashMapByString.create();t.HuLayoutFactory._registerLayout(t.HuLayoutType.SINGLE_PLUGIN,t.XClass.create(t.HuSinglePluginLayout));t.HuLayoutFactory._registerLayout(t.HuLayoutType.INTERACTIVE_SPLITTER,t.XClass.create(t.HuInteractiveSplitterLayout));t.HuLayoutFactory._registerLayout(t.HuLayoutType.CAROUSEL,t.XClass.create(t.HuCarouselLayout));t.HuLayoutFactory._registerLayout(t.HuLayoutType.TAB_BAR,t.XClass.create(t.HuTabBarLayout));t.HuLayoutFactory._registerLayout(t.HuLayoutType.FLEX,t.XClass.create(t.HuFlexLayout));t.HuLayoutFactory._registerLayout(t.HuLayoutType.GRID,t.XClass.create(t.HuGridLayout));t.HuLayoutFactory._registerLayout(t.HuLayoutType.WORKSPACE,t.XClass.create(t.HuWorkspaceLayout))}};t.HuPluginManifestLoader={MANIFESTS_RESOURCE_LOCATION:"/manifests/horizon/plugins/",s_processedResourceManifests:null,loadPluginManifestsFromResources:function(){if(t.isNull(t.HuPluginManifestLoader.s_processedResourceManifests)){t.HuPluginManifestLoader.s_processedResourceManifests=t.XList.create()}let e=t.XResourcesExt.list(t.HuPluginManifestLoader.MANIFESTS_RESOURCE_LOCATION);t.XCollectionUtils.forEach(e,e=>{if(!t.HuPluginManifestLoader.s_processedResourceManifests.contains(e)){let o=t.XStringUtils.concatenate2(t.HuPluginManifestLoader.MANIFESTS_RESOURCE_LOCATION,e);t.HuPluginRegistryBase.registerPluginByResource(o);t.HuPluginManifestLoader.s_processedResourceManifests.add(e)}});return t.XPromise.resolve(t.XBooleanValue.create(true))}};t.HuPluginRegistryBase={MANIFEST_RESOURCE_TEMPLATE:"/manifests/horizon/plugins/{{PLUGIN_NAME}}.json",MANIFEST_RESOURCE_TEMPLATE_PLUGIN_KEY:"{{PLUGIN_NAME}}",s_pluginsFactories:null,_attemptLoadManifestFromResources:function(e){let o=t.XString.replace(t.HuPluginRegistryBase.MANIFEST_RESOURCE_TEMPLATE,t.HuPluginRegistryBase.MANIFEST_RESOURCE_TEMPLATE_PLUGIN_KEY,e);if(t.XResources.exists(o)){t.HuPluginRegistryBase._registerManifestByResource(o)}},_registerManifestByResource:function(e){try{let o=t.XResourcesExt.loadJson(e);let n=t.HuPluginManifest.createByStructure(o);t.HuPluginRegistryBase.registerPluginByManifest(n,e)}catch(e){t.XLogger.printError(t.XStringUtils.concatenate2("[Horizon Plugin Registry] Failed to register plugin manifest by resource! Error: ",t.XException.getMessage(e)))}},canPluginBeInitialized:function(e){if(t.XStringUtils.isNotNullAndNotEmpty(e)){let o=t.HuPluginRegistryBase.s_pluginsFactories.getByKey(e);if(t.notNull(o)){return o.canBeInitialized()}}return false},clearAllPluginManifests:function(){t.XCollectionUtils.forEach(t.HuPluginRegistryBase.s_pluginsFactories,t=>{t.setManifest(null);t.setManifestOriginPath(null)})},didRegisterManifestFromOrigin:function(e){let o=t.XCollectionUtils.contains(t.HuPluginRegistryBase.s_pluginsFactories.getValuesAsReadOnlyList(),o=>o.getManifest()!==null&&t.XString.isEqual(e,o.getManifestOriginPath()));return o},getAllLoadedPluginNames:function(){return t.HuPluginRegistryBase.getAllLoadedPluginNamesByType(null)},getAllLoadedPluginNamesByType:function(e){let o=t.XList.create();t.XCollectionUtils.forEach(t.HuPluginRegistryBase.s_pluginsFactories.getValuesAsReadOnlyList(),n=>{if(n.isPluginLoaded()&&(t.isNull(e)||n.getPluginType()===e)){o.add(n.getName())}});o.sortByDirection(t.XSortDirection.ASCENDING);return o},getAllRegisteredPluginNames:function(){let e=t.HuPluginRegistryBase.s_pluginsFactories.getKeysAsReadOnlyList().createListCopy();e.sortByDirection(t.XSortDirection.ASCENDING);return e},getPluginFactory:function(e){if(t.XStringUtils.isNotNullAndNotEmpty(e)){return t.HuPluginRegistryBase.s_pluginsFactories.getByKey(e)}return null},getPluginFactoryByStartupInfo:function(e){if(t.notNull(e)&&t.XStringUtils.isNotNullAndNotEmpty(e.getPluginName())){return t.HuPluginRegistryBase.s_pluginsFactories.getByKey(e.getPluginName())}return null},hasManifest:function(e){if(t.XStringUtils.isNotNullAndNotEmpty(e)){let o=t.HuPluginRegistryBase.s_pluginsFactories.getByKey(e);if(t.notNull(o)){return o.getManifest()!==null}}return false},isPluginLoaded:function(e){if(t.XStringUtils.isNotNullAndNotEmpty(e)){let o=t.HuPluginRegistryBase.s_pluginsFactories.getByKey(e);if(t.notNull(o)){return o.isPluginLoaded()}}return false},loadApiPlugin:function(e){if(!t.HuPluginRegistryBase.isPluginLoaded(e)){t.HuPluginRegistryBase.registerPluginByClass(t.HuPluginRegistry.getPluginClass(e))}},loadApiPlugins:function(){let e=t.HuPluginRegistry.getAllApiPluginsNamesSorted();if(t.XCollectionUtils.hasElements(e)){t.XCollectionUtils.forEach(e,e=>{t.HuPluginRegistryBase.loadApiPlugin(e)})}},registerPluginByClass:function(e){if(t.notNull(e)){try{let o=e.newInstance(null);let n=o.getName();if(!t.HuPluginRegistryBase.s_pluginsFactories.containsKey(n)){let o=t.HuPluginFactory.create(n);o.setFactoryClass(e);t.HuPluginRegistryBase.s_pluginsFactories.put(n,o)}else{let o=t.HuPluginRegistryBase.s_pluginsFactories.getByKey(n);if(o.getFactoryClass()===null){o.setFactoryClass(e)}}t.HuPluginRegistryBase._attemptLoadManifestFromResources(o.getName())}catch(e){throw t.XException.createRuntimeException("Failed to register plugin class! Class might be invalid!")}}},registerPluginByManifest:function(e,o){if(t.notNull(e)){let n=e.getName();let i=t.HuPluginRegistryBase.s_pluginsFactories.getByKey(n);if(t.isNull(i)){i=t.HuPluginFactory.create(n);i.setManifest(e);i.setManifestOriginPath(o);t.HuPluginRegistryBase.s_pluginsFactories.put(n,i)}else{if(i.getManifest()===null){i.setManifest(e);i.setManifestOriginPath(o)}}t.CoConfigurationRegistry.registerConfigurationByProviderIfNeeded(i)}},registerPluginByResource:function(e){if(t.XStringUtils.isNotNullAndNotEmpty(e)&&t.XResources.exists(e)){t.HuPluginRegistryBase._registerManifestByResource(e)}},staticSetup:function(){t.HuPluginRegistryBase.s_pluginsFactories=t.XLinkedHashMapByString.create()}};t.HuPluginControllerFactory={s_classMap:null,_registerPluginController:function(e,o){if(t.notNull(e)&&t.notNull(o)){t.HuPluginControllerFactory.s_classMap.put(e.getName(),o)}else{throw t.XException.createRuntimeException("Cannot register plugin controller class! Missing plugin type or object class!")}},createNewController:function(e,o){if(t.isNull(o)){return t.XPromise.reject(t.XError.create("Cannot initialize plugin! Missign plugin startup info!").setErrorType(t.HuErrorType.MISSING_PLUGIN_STARTUP_INFO))}let n=t.HuPluginRegistryBase.getPluginFactoryByStartupInfo(o);if(t.isNull(n)||!n.canBeInitialized()){return t.XPromise.reject(t.XError.create("Cannot initialize plugin! Invalid factory!").setErrorType(t.HuErrorType.PLUGIN_INITIALIZATION_ERROR))}if(t.isNull(e)){return t.XPromise.reject(t.XError.create("Cannot initialize plugin! Missing parent controller!").setErrorType(t.HuErrorType.PLUGIN_INITIALIZATION_ERROR))}let i=n.getPluginType();let r=t.HuPluginControllerFactory.s_classMap.getByKey(i.getName());if(t.isNull(r)){return t.XPromise.reject(t.XError.create("Could not find plugin controller class for the specified plugin type!").setErrorType(t.HuErrorType.PLUGIN_INITIALIZATION_ERROR))}try{let s=r.newInstance(null);if(s.getPluginType()!==i){throw t.XException.createException("Plugin type does not match the plugin type from the new object instance!")}s.configure(n,e,o);return s.initializePlugin().onThenExt(t=>s)}catch(e){return t.XPromise.reject(t.XError.create(t.XStringUtils.concatenate2("[HuPluginControllerFactory] Error during plugin controller initialization. Reason: ",t.XException.getMessage(e))).setErrorType(t.HuErrorType.PLUGIN_INITIALIZATION_ERROR))}},staticSetup:function(){t.HuPluginControllerFactory.s_classMap=t.XHashMapByString.create();t.HuPluginControllerFactory._registerPluginController(t.HuPluginType.COMPONENT,t.XClass.create(t.HuComponentPluginController));t.HuPluginControllerFactory._registerPluginController(t.HuPluginType.DOCUMENT,t.XClass.create(t.HuDocumentPluginController));t.HuPluginControllerFactory._registerPluginController(t.HuPluginType.COMMAND,t.XClass.create(t.HuCommandPluginController))}};t.HuPluginManifestConstants={AUTHOR_KEY:"Author",CONFIGURATION_KEY:"Configuration",DEPENDENCIES_KEY:"Dependencies",DESCRIPTION_KEY:"Description",DISPLAY_NAME_KEY:"DisplayName",INITIAL_PROCESS_ENTITIES:"InitialProcessEntities",MODULES_KEY:"Modules",NAME_KEY:"Name",PLUGIN_CATEGORY_KEY:"Category",PLUGIN_TYPE_KEY:"Type",SUB_SYSTEMS_KEY:"SubSystems",TAGS_KEY:"Tags",URL_KEY:"Url",VERSION_KEY:"Version"};t.HuBaseUtils={deregisterNotificationObservers:function(e,o){if(t.XCollectionUtils.hasElements(e)&&t.notNull(o)){t.XCollectionUtils.forEach(e,t=>{o.removeObserverByUuid(t)});e.clear()}},formatLogWithContextName:function(e,o){if(t.XStringUtils.isNotNullAndNotEmpty(e)){return t.XStringUtils.concatenate4("(",e,") ",o)}return o},loadPluginDependencies:function(e,o,n){if(t.isNull(e)||e.getManifest()===null){return t.XPromise.resolve(t.XBooleanValue.create(false))}if(t.isNull(o)){return t.XPromise.reject(t.XError.create("A process is required for loading plugin dependencies!"))}if(t.isNull(n)){return t.XPromise.reject(t.XError.create("Missing log context!"))}if(e.areDependenciesLoaded()){n.logDebug(t.XStringUtils.concatenate3("Dependencies for plugin ",e.getName()," already loaded!"));return t.XPromise.resolve(t.XBooleanValue.create(false))}let i=e.getManifest().getModules();if(!t.XCollectionUtils.hasElements(i)){n.logDebug(t.XStringUtils.concatenate3("Plugin ",e.getName()," has no module dependencies!"))}else{n.logDebug(t.XStringUtils.concatenate4("Loading ",e.getName()," module dependencies: ",t.XCollectionUtils.join(i,", ")))}let r=e.getManifest().getSubSystems();if(!t.XCollectionUtils.hasElements(r)){n.logDebug(t.XStringUtils.concatenate3("Plugin ",e.getName()," has no sub system dependencies!"))}else{n.logDebug(t.XStringUtils.concatenate4("Starting ",e.getName()," sub system dependencies: ",t.XCollectionUtils.join(r,", ")))}let s=e.getManifest().getProcessEntities();if(!t.XCollectionUtils.hasElements(s)){n.logDebug(t.XStringUtils.concatenate3("Plugin ",e.getName()," has no process entity dependencies!"))}else{n.logDebug(t.XStringUtils.concatenate4("Starting ",e.getName()," process entity dependencies: ",t.XCollectionUtils.join(s,", ")))}return e.loadDependencies(o).onThen(o=>{n.logDebug(t.XStringUtils.concatenate3("Dependencies for plugin ",e.getName()," successfully loaded!"));t.HuPluginRegistryBase.loadApiPlugin(e.getName())}).onCatch(o=>{n.logDebug(t.XStringUtils.concatenate4("Could not load dependencies for plugin ",e.getName()," | Reason: ",o.getText()));throw t.XException.createException(o.getText())})}};t.HuSplitterManager=function(){};t.HuSplitterManager.prototype=new t.XObject;t.HuSplitterManager.prototype._ff_c="HuSplitterManager";t.HuSplitterManager.DEFAULT_PANEL_MIN_WIDTH_IN_PX=130;t.HuSplitterManager.DEFAULT_PANEL_WIDTH_IN_PX=350;t.HuSplitterManager.DESIGNER_DOCUMENT_PLUGIN_NAME="OlapDesignerDocument";t.HuSplitterManager.MAIN_CONTENT_STATE_NAME="MAIN_CONTENT_STATE";t.HuSplitterManager.SIDE_CONTENT_STATE_NAME="SIDE_CONTENT_STATE";t.HuSplitterManager.SIDE_NAV_WIDTH_IN_PX=58;t.HuSplitterManager.create=function(e){let o=new t.HuSplitterManager;o._setupInternal(e);return o};t.HuSplitterManager.prototype.m_isInventoryPanelVisible=false;t.HuSplitterManager.prototype.m_onSplitterStateChangedConsumer=null;t.HuSplitterManager.prototype.m_sideContentOffsetWidth=0;t.HuSplitterManager.prototype.m_sideContentSplitterItem=null;t.HuSplitterManager.prototype.m_splitter=null;t.HuSplitterManager.prototype.m_viewContentSplitterItem=null;t.HuSplitterManager.prototype._getComputedSideContentMinWidthInPx=function(e){let o=t.HuSplitterManager.SIDE_NAV_WIDTH_IN_PX;if(t.XString.isEqual(e,t.HuSplitterManager.DESIGNER_DOCUMENT_PLUGIN_NAME)&&this.m_isInventoryPanelVisible){o=o+t.HuSplitterManager.DEFAULT_PANEL_MIN_WIDTH_IN_PX*2}else{o=o+t.HuSplitterManager.DEFAULT_PANEL_MIN_WIDTH_IN_PX}return o};t.HuSplitterManager.prototype._getComputedSideContentWidthInPx=function(e){let o=t.HuSplitterManager.SIDE_NAV_WIDTH_IN_PX;if(t.XString.isEqual(e,t.HuSplitterManager.DESIGNER_DOCUMENT_PLUGIN_NAME)&&this.m_isInventoryPanelVisible){o=o+t.HuSplitterManager.DEFAULT_PANEL_WIDTH_IN_PX*2}else{o=o+t.HuSplitterManager.DEFAULT_PANEL_WIDTH_IN_PX}return o};t.HuSplitterManager.prototype._getContainerState=function(e){let o=this.m_splitter.getStateJson();if(t.notNull(o)&&o.isStructure()){let n=o.asStructure();let i=n.getListByKey("state");if(t.notNull(i)){let o=t.XCollectionUtils.findFirst(i,o=>t.XString.isEqual(o.asStructure().getStringByKey("tag"),e));if(t.notNull(o)&&o.isStructure()){return o.asStructure()}}}return null};t.HuSplitterManager.prototype._getContainerWidth=function(e){let o=this._getContainerState(e);return t.notNull(o)?o.getStringByKey("width"):null};t.HuSplitterManager.prototype._getOpenPanelKey=function(e){if(t.notNull(e)){let o=e.getStructureByKey("OpenPanels");let n=o.getKeysAsReadOnlyList();return t.XCollectionUtils.findFirst(n,o.getBooleanByKey.bind(o))}return null};t.HuSplitterManager.prototype._onSplitterChange=function(e){let o=e.getParameters().getByKey(t.UiEventParams.PARAM_NEW_CONTENT_STATE);let n=t.JsonParserFactory.createFromString(o);let i=this.m_splitter.getStateJson();if(!t.XObjectExt.areEqual(i,n)){this.setSplitterState(n);if(t.notNull(this.m_onSplitterStateChangedConsumer)){this.m_onSplitterStateChangedConsumer(n)}}};t.HuSplitterManager.prototype._setupInternal=function(e){this.setup();this.m_isInventoryPanelVisible=true;this.m_splitter=e;this.m_splitter.setEnableReordering(false).registerOnChange(t.UiLambdaChangeListener.create(this._onSplitterChange.bind(this))).useMaxSpace();this.m_viewContentSplitterItem=this.m_splitter.addNewItem().setStateName(t.HuSplitterManager.MAIN_CONTENT_STATE_NAME);this.m_sideContentSplitterItem=this.m_splitter.addNewItem().setStateName(t.HuSplitterManager.SIDE_CONTENT_STATE_NAME).setFlex("0 0 auto").setMaxWidth(t.UiCssLength.create("80%")).registerOnResize(t.UiLambdaResizeListener.create(t=>{this.m_sideContentOffsetWidth=t.getOffsetWidth()}))};t.HuSplitterManager.prototype._updateContainerWidths=function(e){let o=this._getComputedSideContentMinWidthInPx(e);let n;let i;let r=this._getContainerWidth(t.HuSplitterManager.SIDE_CONTENT_STATE_NAME);let s=t.XString.endsWith(r,"%");if(s&&this.m_sideContentOffsetWidth>=o){n=r;i=this._getContainerWidth(t.HuSplitterManager.MAIN_CONTENT_STATE_NAME)}else{let o=this._getComputedSideContentWidthInPx(e);this.m_sideContentOffsetWidth=o;n=t.XStringUtils.concatenate2(t.XInteger.convertToString(o),"px");i=null}this.m_viewContentSplitterItem.setWidth(t.UiCssLength.create(i));this.m_sideContentSplitterItem.setWidth(t.UiCssLength.create(n));this.m_sideContentSplitterItem.setMinWidth(t.UiCssLength.create(t.XStringUtils.concatenate2(t.XInteger.convertToString(o),"px")))};t.HuSplitterManager.prototype.onPanelStateChanged=function(e){let o=this._getOpenPanelKey(e);if(t.notNull(o)){this.m_splitter.showResizerAtIndex(0);this._updateContainerWidths(o)}else{this.m_splitter.hideResizerAtIndex(0);this.m_sideContentOffsetWidth=t.HuSplitterManager.SIDE_NAV_WIDTH_IN_PX}};t.HuSplitterManager.prototype.releaseObject=function(){this.m_viewContentSplitterItem=t.XObjectExt.release(this.m_viewContentSplitterItem);this.m_sideContentSplitterItem=t.XObjectExt.release(this.m_sideContentSplitterItem);this.m_splitter=t.XObjectExt.release(this.m_splitter);this.m_onSplitterStateChangedConsumer=null;t.XObject.prototype.releaseObject.call(this)};t.HuSplitterManager.prototype.setInventoryPanelVisibility=function(e){this.m_isInventoryPanelVisible=e;this._updateContainerWidths(t.HuSplitterManager.DESIGNER_DOCUMENT_PLUGIN_NAME)};t.HuSplitterManager.prototype.setOnSplitterStateChangedConsumer=function(t){this.m_onSplitterStateChangedConsumer=t};t.HuSplitterManager.prototype.setResizerVisibilityAtIndex=function(t,e){if(e){this.m_splitter.showResizerAtIndex(t)}else{this.m_splitter.hideResizerAtIndex(t)}};t.HuSplitterManager.prototype.setSideContent=function(t){this.m_sideContentSplitterItem.setContent(t)};t.HuSplitterManager.prototype.setSplitterState=function(e){this.m_splitter.setStateJson(e);let o=this._getContainerWidth(t.HuSplitterManager.SIDE_CONTENT_STATE_NAME);let n=t.XString.endsWith(o,"%");if(n){this._updateContainerWidths(null)}};t.HuSplitterManager.prototype.setViewContent=function(t){this.m_viewContentSplitterItem.setContent(t)};t.HuHorizonConfigUtils={ITEMS:"items",PLUGINS_SECTION:"plugins",_isPluginDefinitionFound:function(e,o){if(t.isNull(e)||!e.isStructure()){return false}let n=e.asStructure();let i=n.getStringByKey(t.HuPluginStartupInfo.PLUGIN);return t.XString.isEqual(i,o)},addPluginItemDefinition:function(e,o,n){if(t.isNull(e)||t.XStringUtils.isNullOrEmpty(o)){t.XLogger.println("Invalid input: pluginDef, pluginName, or propertyName is null or empty.");return}let i=!e.containsKey(t.HuPluginStartupInfo.CONFIG)?e.putNewStructure(t.HuPluginStartupInfo.CONFIG):e.getStructureByKey(t.HuPluginStartupInfo.CONFIG);let r=!i.containsKey(t.HuHorizonConfigUtils.ITEMS)?i.putNewList(t.HuHorizonConfigUtils.ITEMS):i.getListByKey(t.HuHorizonConfigUtils.ITEMS);let s=t.HuHorizonConfigUtils.searchPluginInItems(e,o);if(t.notNull(s)){t.XLogger.println(t.XStringUtils.concatenate3("Plugin item definition already found for plugin: ",o," it will be override!"));r.removeElement(s)}r.add(n)},getPluginDefinition:function(e,o){if(t.isNull(e)||t.XStringUtils.isNullOrEmpty(o)){return null}let n=t.HuHorizonConfigUtils.getPluginDefinitionIterator(e);if(t.isNull(n)){return null}while(n.hasNext()){let e=n.next();if(t.HuHorizonConfigUtils._isPluginDefinitionFound(e,o)){return e.asStructure()}let i=t.HuHorizonConfigUtils.searchPluginInItems(e,o);if(t.notNull(i)){return i}}return null},getPluginDefinitionIterator:function(e){if(t.isNull(e)){return null}let o=e.getListByKey(t.HuHorizonConfigUtils.PLUGINS_SECTION);if(t.isNull(o)){return null}return o.getIterator()},searchPluginInItems:function(e,o){if(t.isNull(e)||!e.isStructure()){return null}let n=e.asStructure();let i=n.getStructureByKey(t.HuPluginStartupInfo.CONFIG);if(!t.XCollectionUtils.hasElements(i)||!i.containsKey(t.HuHorizonConfigUtils.ITEMS)){return null}let r=i.getListByKey(t.HuHorizonConfigUtils.ITEMS);if(!t.XCollectionUtils.hasElements(r)){return null}let s=r.getIterator();while(s.hasNext()){let e=s.next();if(t.HuHorizonConfigUtils._isPluginDefinitionFound(e,o)){return e.asStructure()}}return null},setConfigProperty:function(e,o,n,i){if(t.isNull(e)||t.XStringUtils.isNullOrEmpty(o)||t.XStringUtils.isNullOrEmpty(n)){t.XLogger.println("Invalid input: horizonConfig, pluginName, or propertyName is null or empty.");return}let r=t.HuHorizonConfigUtils.getPluginDefinition(e,o);if(t.isNull(r)){t.XLogger.println(t.XStringUtils.concatenate2("Plugin definition not found for plugin: ",o));return}let s=r.getStructureByKey(t.HuPluginStartupInfo.CONFIG);if(t.isNull(s)){s=r.putNewStructure(t.HuPluginStartupInfo.CONFIG)}s.put(n,i)}};t.HuHorizonWorkspaceConstants={GIT_IGNORE_FILE_NAME:".gitignore",HORIZON_DIR_NAME:".horizon",HORIZON_WORKSPACE_CONFIG_FILE_NAME:"horizon.cfg",PLUGINS_DIR_NAME:"plugins",PLUGIN_SETTINGS_DIR_NAME:"settings",PLUGIN_STORAGE_DIR_NAME:"storage",SETTINGS_FILE_NAME:"settings.cfg",STATE_FILE_NAME:"state.json",STORAGE_FILE_EXTENSION:".json"};t.HuMessage=function(){};t.HuMessage.prototype=new t.XObject;t.HuMessage.prototype._ff_c="HuMessage";t.HuMessage.createError=function(e,o,n,i){let r=new t.HuMessage;r._setupMessageObject(e,o,n,t.HuMessageType.ERROR,i);return r};t.HuMessage.createInformation=function(e,o,n,i){let r=new t.HuMessage;r._setupMessageObject(e,o,n,t.HuMessageType.INFORMATION,i);return r};t.HuMessage.createSuccess=function(e,o,n,i){let r=new t.HuMessage;r._setupMessageObject(e,o,n,t.HuMessageType.SUCCESS,i);return r};t.HuMessage.createWarning=function(e,o,n,i){let r=new t.HuMessage;r._setupMessageObject(e,o,n,t.HuMessageType.WARNING,i);return r};t.HuMessage.prototype.m_description=null;t.HuMessage.prototype.m_messageGroup=null;t.HuMessage.prototype.m_messageType=null;t.HuMessage.prototype.m_subtitle=null;t.HuMessage.prototype.m_title=null;t.HuMessage.prototype._setupMessageObject=function(e,o,n,i,r){this.m_title=e;this.m_subtitle=o;this.m_description=n;this.m_messageType=i;this.m_messageGroup=r;if(t.isNull(this.m_messageType)){this.m_messageType=t.HuMessageType.INFORMATION}if(t.isNull(this.m_messageGroup)){this.m_messageGroup=t.HuMessageGroup.SYSTEM}};t.HuMessage.prototype.getDescription=function(){return this.m_description};t.HuMessage.prototype.getMessageGroup=function(){return this.m_messageGroup};t.HuMessage.prototype.getMessageType=function(){return this.m_messageType};t.HuMessage.prototype.getSubtitle=function(){return this.m_subtitle};t.HuMessage.prototype.getTitle=function(){return this.m_title};t.HuMessage.prototype.releaseObject=function(){this.m_messageType=null;this.m_messageGroup=null;t.XObject.prototype.releaseObject.call(this)};t.HuDeveloperAction=function(){};t.HuDeveloperAction.prototype=new t.XObject;t.HuDeveloperAction.prototype._ff_c="HuDeveloperAction";t.HuDeveloperAction.create=function(e,o,n,i,r){let s=new t.HuDeveloperAction;s._setupAction(e,o,n,i,r);return s};t.HuDeveloperAction.prototype.m_actionProcedure=null;t.HuDeveloperAction.prototype.m_actionUuid=null;t.HuDeveloperAction.prototype.m_description=null;t.HuDeveloperAction.prototype.m_displayName=null;t.HuDeveloperAction.prototype.m_icon=null;t.HuDeveloperAction.prototype.m_isSectionStart=false;t.HuDeveloperAction.prototype._setupAction=function(e,o,n,i,r){this.m_displayName=e;this.m_description=o;this.m_icon=n;this.m_isSectionStart=i;this.m_actionProcedure=r;if(t.XStringUtils.isNullOrEmpty(this.m_displayName)){throw t.XException.createRuntimeException("[HuDeveloperAction] Cannot create a new action object without a display name!")}if(t.isNull(this.m_actionProcedure)){throw t.XException.createRuntimeException("[HuDeveloperAction] Cannot create a new action object without an action procedure!")}this.m_actionUuid=t.XStringUtils.concatenate2("devAction_",t.XGuid.getGuid())};t.HuDeveloperAction.prototype.getActionProcedure=function(){return this.m_actionProcedure};t.HuDeveloperAction.prototype.getDescription=function(){return this.m_description};t.HuDeveloperAction.prototype.getDisplayName=function(){return this.m_displayName};t.HuDeveloperAction.prototype.getIcon=function(){return this.m_icon};t.HuDeveloperAction.prototype.getId=function(){return this.m_actionUuid};t.HuDeveloperAction.prototype.isSectionStart=function(){return this.m_isSectionStart};t.HuDeveloperAction.prototype.releaseObject=function(){this.m_actionProcedure=null;t.XObject.prototype.releaseObject.call(this)};t.HuPluginStartupInfo=function(){};t.HuPluginStartupInfo.prototype=new t.XObject;t.HuPluginStartupInfo.prototype._ff_c="HuPluginStartupInfo";t.HuPluginStartupInfo.CONFIG="config";t.HuPluginStartupInfo.EXTRA_DATA_CONTAINER="container";t.HuPluginStartupInfo.EXTRA_DATA_LAYOUT="layout";t.HuPluginStartupInfo.NAME="name";t.HuPluginStartupInfo.PLUGIN="plugin";t.HuPluginStartupInfo.create=function(e){return t.HuPluginStartupInfo.createExt(e,null,null,null,null)};t.HuPluginStartupInfo.createExt=function(e,o,n,i,r){let s=new t.HuPluginStartupInfo;s._setupInternal(e,o,n,i,r);if(s._isValid()){return s}return null};t.HuPluginStartupInfo.createWithStructure=function(e){return t.HuPluginStartupInfo.createWithStructureExt(null,e)};t.HuPluginStartupInfo.createWithStructureExt=function(e,o){let n=new t.HuPluginStartupInfo;n._setupWithPluginNameAndStructure(e,o);if(n._isValid()){return n}return null};t.HuPluginStartupInfo.prototype.m_configJson=null;t.HuPluginStartupInfo.prototype.m_containerJson=null;t.HuPluginStartupInfo.prototype.m_layoutJson=null;t.HuPluginStartupInfo.prototype.m_name=null;t.HuPluginStartupInfo.prototype.m_pluginName=null;t.HuPluginStartupInfo.prototype._isValid=function(){return t.XStringUtils.isNotNullAndNotEmpty(this.m_pluginName)};t.HuPluginStartupInfo.prototype._processExtraData=function(e){if(t.notNull(e)){this.m_layoutJson=e.getStructureByKey(t.HuPluginStartupInfo.EXTRA_DATA_LAYOUT);this.m_containerJson=e.getStructureByKey(t.HuPluginStartupInfo.EXTRA_DATA_CONTAINER)}};t.HuPluginStartupInfo.prototype._processStructure=function(e){if(t.notNull(e)){this.m_pluginName=e.getStringByKeyExt(t.HuPluginStartupInfo.PLUGIN,this.m_pluginName);if(t.XStringUtils.isNotNullAndNotEmpty(this.m_pluginName)){this.m_name=e.getStringByKey(t.HuPluginStartupInfo.NAME);this.m_configJson=e.getStructureByKey(t.HuPluginStartupInfo.CONFIG);this._processExtraData(e)}}};t.HuPluginStartupInfo.prototype._setupInternal=function(t,e,o,n,i){this.m_pluginName=t;this.m_configJson=e;this.m_name=o;this.m_layoutJson=n;this.m_containerJson=i};t.HuPluginStartupInfo.prototype._setupWithPluginNameAndStructure=function(t,e){this.m_pluginName=t;this._processStructure(e)};t.HuPluginStartupInfo.prototype.getConfigStructure=function(){if(t.isNull(this.m_configJson)){this.m_configJson=t.PrFactory.createStructure()}return this.m_configJson};t.HuPluginStartupInfo.prototype.getContainerStructure=function(){if(t.isNull(this.m_containerJson)){this.m_containerJson=t.PrFactory.createStructure()}return this.m_containerJson};t.HuPluginStartupInfo.prototype.getLayoutStructure=function(){if(t.isNull(this.m_layoutJson)){this.m_layoutJson=t.PrFactory.createStructure()}return this.m_layoutJson};t.HuPluginStartupInfo.prototype.getName=function(){return this.m_name};t.HuPluginStartupInfo.prototype.getPluginName=function(){return this.m_pluginName};t.HuPluginStartupInfo.prototype.releaseObject=function(){this.m_pluginName=null;this.m_configJson=null;this.m_name=null;this.m_layoutJson=null;this.m_containerJson=null};t.HuToolbarItem=function(){};t.HuToolbarItem.prototype=new t.XObject;t.HuToolbarItem.prototype._ff_c="HuToolbarItem";t.HuToolbarItem.create=function(e,o,n,i,r,s){let a=new t.HuToolbarItem;a._setupToolbarItem(e,o,n,i,r,s);return a};t.HuToolbarItem.prototype.m_actionId=null;t.HuToolbarItem.prototype.m_group=null;t.HuToolbarItem.prototype.m_icon=null;t.HuToolbarItem.prototype.m_name=null;t.HuToolbarItem.prototype.m_text=null;t.HuToolbarItem.prototype.m_tooltip=null;t.HuToolbarItem.prototype._setupToolbarItem=function(e,o,n,i,r,s){this.m_actionId=e;this.m_name=o;this.m_text=n;this.m_icon=i;this.m_tooltip=r;this.m_group=s;if(t.XStringUtils.isNullOrEmpty(this.m_icon)){this.m_icon="question-mark"}if(t.isNull(this.m_group)){this.m_group=t.HuToolbarGroup.UNGROUPED}};t.HuToolbarItem.prototype.getActionId=function(){return this.m_actionId};t.HuToolbarItem.prototype.getGroup=function(){return this.m_group};t.HuToolbarItem.prototype.getIcon=function(){return this.m_icon};t.HuToolbarItem.prototype.getName=function(){return this.m_name};t.HuToolbarItem.prototype.getText=function(){return this.m_text};t.HuToolbarItem.prototype.getTooltip=function(){return this.m_tooltip};t.HuToolbarItem.prototype.isValid=function(){return t.XStringUtils.isNotNullAndNotEmpty(this.m_actionId)};t.HuToolbarItem.prototype.releaseObject=function(){this.m_group=null;t.XObject.prototype.releaseObject.call(this)};t.HuBootConfig=function(){};t.HuBootConfig.prototype=new t.XObjectExt;t.HuBootConfig.prototype._ff_c="HuBootConfig";t.HuBootConfig.create=function(){let e=new t.HuBootConfig;e._setupBootConfig();return e};t.HuBootConfig.prototype.m_configFilePath=null;t.HuBootConfig.prototype.m_configStr=null;t.HuBootConfig.prototype.m_horizonConfiguration=null;t.HuBootConfig.prototype.m_isShowSplashScreen=false;t.HuBootConfig.prototype.m_pluginName=null;t.HuBootConfig.prototype.m_workspaceDirectoryPath=null;t.HuBootConfig.prototype._setupBootConfig=function(){this.m_isShowSplashScreen=true};t.HuBootConfig.prototype.getConfigFilePath=function(){return this.m_configFilePath};t.HuBootConfig.prototype.getConfigString=function(){return this.m_configStr};t.HuBootConfig.prototype.getHorizonConfiguration=function(){return this.m_horizonConfiguration};t.HuBootConfig.prototype.getPluginName=function(){return this.m_pluginName};t.HuBootConfig.prototype.getWorkspaceDirectoryPath=function(){return this.m_workspaceDirectoryPath};t.HuBootConfig.prototype.isShowSplashScreen=function(){return this.m_isShowSplashScreen};t.HuBootConfig.prototype.releaseObject=function(){this.m_horizonConfiguration=null;t.XObjectExt.prototype.releaseObject.call(this)};t.HuBootConfig.prototype.setConfigFilePath=function(t){this.m_configFilePath=t};t.HuBootConfig.prototype.setConfigString=function(t){this.m_configStr=t};t.HuBootConfig.prototype.setHorizonConfiguration=function(t){this.m_horizonConfiguration=t};t.HuBootConfig.prototype.setPluginName=function(t){this.m_pluginName=t};t.HuBootConfig.prototype.setShowSplashScreen=function(t){this.m_isShowSplashScreen=t};t.HuBootConfig.prototype.setWorkspaceDirectoryPath=function(t){this.m_workspaceDirectoryPath=t};t.HuBootConfig.prototype.shouldBootIntoVirtualWorkspace=function(){return t.XStringUtils.isNotNullAndNotEmpty(this.getConfigString())||t.XStringUtils.isNotNullAndNotEmpty(this.getConfigFilePath())||t.XStringUtils.isNotNullAndNotEmpty(this.getPluginName())};t.HuLogger=function(){};t.HuLogger.prototype=new t.XObject;t.HuLogger.prototype._ff_c="HuLogger";t.HuLogger.DEBUG_PREFIX="[Debug] ";t.HuLogger.INFO_PREFIX="[Info] ";t.HuLogger.createNewLogger=function(){let e=new t.HuLogger;return e};t.HuLogger.prototype.m_isDebugLogEnabled=false;t.HuLogger.prototype.logDebug=function(e){if(this.m_isDebugLogEnabled){t.XLogger.println(t.XStringUtils.concatenate2(t.HuLogger.DEBUG_PREFIX,e))}};t.HuLogger.prototype.logInfo=function(e){t.XLogger.println(t.XStringUtils.concatenate2(t.HuLogger.INFO_PREFIX,e))};t.HuLogger.prototype.releaseObject=function(){t.XObject.prototype.releaseObject.call(this)};t.HuLogger.prototype.setDebugEnabled=function(t){this.m_isDebugLogEnabled=t};t.HuPluginManifest=function(){};t.HuPluginManifest.prototype=new t.XObject;t.HuPluginManifest.prototype._ff_c="HuPluginManifest";t.HuPluginManifest.createByStructure=function(e){let o=new t.HuPluginManifest;o._setupByStructure(e);return o};t.HuPluginManifest.prototype.m_author=null;t.HuPluginManifest.prototype.m_configurationMetadata=null;t.HuPluginManifest.prototype.m_dependenciesList=null;t.HuPluginManifest.prototype.m_description=null;t.HuPluginManifest.prototype.m_displayName=null;t.HuPluginManifest.prototype.m_modulesList=null;t.HuPluginManifest.prototype.m_name=null;t.HuPluginManifest.prototype.m_pluginCategory=null;t.HuPluginManifest.prototype.m_pluginType=null;t.HuPluginManifest.prototype.m_processEntitiesList=null;t.HuPluginManifest.prototype.m_subSystemsList=null;t.HuPluginManifest.prototype.m_tags=null;t.HuPluginManifest.prototype.m_url=null;t.HuPluginManifest.prototype.m_validationErrors=null;t.HuPluginManifest.prototype.m_version=null;t.HuPluginManifest.prototype._addModuleDependency=function(t){if(!this.m_modulesList.contains(t)){this.m_modulesList.add(t)}};t.HuPluginManifest.prototype._addPluginDependency=function(t){if(!this.m_dependenciesList.contains(t)){this.m_dependenciesList.add(t)}};t.HuPluginManifest.prototype._addProcessEntity=function(t){if(!this.m_processEntitiesList.contains(t)){this.m_processEntitiesList.add(t)}};t.HuPluginManifest.prototype._addSubSystem=function(t){if(!this.m_subSystemsList.contains(t)){this.m_subSystemsList.add(t)}};t.HuPluginManifest.prototype._addTagByString=function(e){let o=t.XString.trim(e);o=t.XString.toLowerCase(o);let n=t.HuPluginTag.createCustomTagIfNecessary(o);if(!this.m_tags.contains(n)){this.m_tags.add(n)}};t.HuPluginManifest.prototype._parseStructure=function(e){if(t.notNull(e)&&e.isStructure()){this._setName(e.getStringByKey(t.HuPluginManifestConstants.NAME_KEY));this._setPluginType(t.HuPluginType.lookup(e.getStringByKey(t.HuPluginManifestConstants.PLUGIN_TYPE_KEY)));this._setDescription(e.getStringByKey(t.HuPluginManifestConstants.DESCRIPTION_KEY));this._setDisplayName(e.getStringByKey(t.HuPluginManifestConstants.DISPLAY_NAME_KEY));this._setPluginCategory(t.HuPluginCategory.createCategoryIfNecessary(e.getStringByKey(t.HuPluginManifestConstants.PLUGIN_CATEGORY_KEY)));this._setAuthor(e.getStringByKey(t.HuPluginManifestConstants.AUTHOR_KEY));this._setVersion(e.getStringByKey(t.HuPluginManifestConstants.VERSION_KEY));this._processTagsElement(e.getByKey(t.HuPluginManifestConstants.TAGS_KEY));this._processPluginDependencies(e.getByKey(t.HuPluginManifestConstants.DEPENDENCIES_KEY));this._processModuleDependencies(e.getByKey(t.HuPluginManifestConstants.MODULES_KEY));this._processSubSystems(e.getByKey(t.HuPluginManifestConstants.SUB_SYSTEMS_KEY));this._processProcessEntities(e.getByKey(t.HuPluginManifestConstants.INITIAL_PROCESS_ENTITIES));this._setUrl(e.getStringByKey(t.HuPluginManifestConstants.URL_KEY));this._setConfigurationMetadata(t.CoConfigurationMetadataUtils.processConfigurationMetadataSafe(this.getName(),t.CoConfigurationType.PLUGIN,e.getByKey(t.HuPluginManifestConstants.CONFIGURATION_KEY)))}else{throw t.XException.createRuntimeException("Missing or invalid plugin manifest json!")}};t.HuPluginManifest.prototype._processListOrStrElement=function(e,o){if(t.notNull(e)&&t.notNull(o)){if(e.isString()){let n=e.asString().getString();let i=t.XStringTokenizer.splitString(n,",");t.XCollectionUtils.forEach(i,o)}else if(e.isList()){let n=e.asList();t.XCollectionUtils.forEach(n,t=>{if(t.isString()){o(t.asString().getString())}})}}};t.HuPluginManifest.prototype._processModuleDependencies=function(t){this._processListOrStrElement(t,t=>{this._addModuleDependency(t)})};t.HuPluginManifest.prototype._processPluginDependencies=function(t){this._processListOrStrElement(t,t=>{this._addPluginDependency(t)})};t.HuPluginManifest.prototype._processProcessEntities=function(t){this._processListOrStrElement(t,t=>{this._addProcessEntity(t)})};t.HuPluginManifest.prototype._processSubSystems=function(t){this._processListOrStrElement(t,t=>{this._addSubSystem(t)})};t.HuPluginManifest.prototype._processTagsElement=function(t){this._processListOrStrElement(t,t=>{this._addTagByString(t)})};t.HuPluginManifest.prototype._setAuthor=function(t){this.m_author=t};t.HuPluginManifest.prototype._setConfigurationMetadata=function(t){this.m_configurationMetadata=t};t.HuPluginManifest.prototype._setDescription=function(t){this.m_description=t};t.HuPluginManifest.prototype._setDisplayName=function(t){this.m_displayName=t};t.HuPluginManifest.prototype._setName=function(t){this.m_name=t};t.HuPluginManifest.prototype._setPluginCategory=function(t){this.m_pluginCategory=t};t.HuPluginManifest.prototype._setPluginType=function(t){this.m_pluginType=t};t.HuPluginManifest.prototype._setUrl=function(t){this.m_url=t};t.HuPluginManifest.prototype._setVersion=function(t){this.m_version=t};t.HuPluginManifest.prototype._setupByStructure=function(t){this._setupInternal();this._parseStructure(t);this._validate()};t.HuPluginManifest.prototype._setupInternal=function(){this.m_tags=t.XList.create();this.m_dependenciesList=t.XList.create();this.m_modulesList=t.XList.create();this.m_subSystemsList=t.XList.create();this.m_processEntitiesList=t.XList.create();this.m_validationErrors=t.XList.create()};t.HuPluginManifest.prototype._validate=function(){this.m_validationErrors.clear();if(t.XStringUtils.isNullOrEmpty(this.m_name)){this.m_validationErrors.add(t.XError.create("Missing plugin name!").setErrorType(t.HuErrorType.MANIFEST_MISSING_NAME))}if(t.XStringUtils.containsString(this.m_name," ",true)){this.m_validationErrors.add(t.XError.create("Name cannot contain spaces!").setErrorType(t.HuErrorType.MANIFEST_INVALID_NAME))}};t.HuPluginManifest.prototype.getAuthor=function(){return this.m_author};t.HuPluginManifest.prototype.getConfigurationMetadata=function(){return this.m_configurationMetadata};t.HuPluginManifest.prototype.getDependencies=function(){return this.m_dependenciesList};t.HuPluginManifest.prototype.getDescription=function(){return this.m_description};t.HuPluginManifest.prototype.getDisplayName=function(){return this.m_displayName};t.HuPluginManifest.prototype.getModules=function(){return this.m_modulesList};t.HuPluginManifest.prototype.getName=function(){return this.m_name};t.HuPluginManifest.prototype.getPluginCategory=function(){return this.m_pluginCategory};t.HuPluginManifest.prototype.getPluginType=function(){return this.m_pluginType};t.HuPluginManifest.prototype.getProcessEntities=function(){return this.m_processEntitiesList};t.HuPluginManifest.prototype.getSubSystems=function(){return this.m_subSystemsList};t.HuPluginManifest.prototype.getTags=function(){return this.m_tags};t.HuPluginManifest.prototype.getUrl=function(){return this.m_url};t.HuPluginManifest.prototype.getValidationErrors=function(){return this.m_validationErrors};t.HuPluginManifest.prototype.getVersion=function(){return this.m_version};t.HuPluginManifest.prototype.hasConfigurationMetadata=function(){return t.notNull(this.m_configurationMetadata)&&this.m_configurationMetadata.hasProperties()};t.HuPluginManifest.prototype.isValid=function(){return!this.m_validationErrors.hasElements()};t.HuPluginManifest.prototype.releaseObject=function(){this.m_validationErrors=t.XObjectExt.release(this.m_validationErrors);this.m_configurationMetadata=null;this.m_pluginType=null;this.m_tags.clear();this.m_tags=t.XObjectExt.release(this.m_tags);this.m_dependenciesList=t.XObjectExt.release(this.m_dependenciesList);this.m_modulesList=t.XObjectExt.release(this.m_modulesList);this.m_subSystemsList=t.XObjectExt.release(this.m_subSystemsList);this.m_processEntitiesList=t.XObjectExt.release(this.m_processEntitiesList);t.XObject.prototype.releaseObject.call(this)};t.HuHorizonDfPopup=function(){};t.HuHorizonDfPopup.prototype=new t.DfUiPopup;t.HuHorizonDfPopup.prototype._ff_c="HuHorizonDfPopup";t.HuHorizonDfPopup.prototype.m_controller=null;t.HuHorizonDfPopup.prototype.getGenericController=function(){return this.m_controller};t.HuHorizonDfPopup.prototype.releaseObject=function(){this.m_controller=null;t.DfUiPopup.prototype.releaseObject.call(this)};t.HuHorizonDfPopup.prototype.setupPopup=function(e){t.DfUiPopup.prototype.setupPopup.call(this,e)};t.HuHorizonDfPopup.prototype.setupWithController=function(t){this.m_controller=t;this.setupPopup(t.getGenesis())};t.HuDfHorizonLogContext=function(){};t.HuDfHorizonLogContext.prototype=new t.XObject;t.HuDfHorizonLogContext.prototype._ff_c="HuDfHorizonLogContext";t.HuDfHorizonLogContext.prototype.m_logger=null;t.HuDfHorizonLogContext.prototype._setupLogger=function(t){this.m_logger=t};t.HuDfHorizonLogContext.prototype.getLogger=function(){return this.m_logger};t.HuDfHorizonLogContext.prototype.logDebug=function(e){if(this.getLogger()!==null){this.getLogger().logDebug(t.HuBaseUtils.formatLogWithContextName(this.getLogContextName(),e))}};t.HuDfHorizonLogContext.prototype.logInfo=function(e){if(this.getLogger()!==null){this.getLogger().logInfo(t.HuBaseUtils.formatLogWithContextName(this.getLogContextName(),e))}};t.HuDfHorizonLogContext.prototype.releaseObject=function(){this.m_logger=null;t.XObject.prototype.releaseObject.call(this)};t.HuPluginFactory=function(){};t.HuPluginFactory.prototype=new t.XObject;t.HuPluginFactory.prototype._ff_c="HuPluginFactory";t.HuPluginFactory.create=function(e){let o=new t.HuPluginFactory;o._setupWithName(e);return o};t.HuPluginFactory.prototype.m_areModuleDependenciesLoaded=false;t.HuPluginFactory.prototype.m_areSubSystemDependenciesStarted=false;t.HuPluginFactory.prototype.m_factoryClass=null;t.HuPluginFactory.prototype.m_manifest=null;t.HuPluginFactory.prototype.m_manifestOriginPath=null;t.HuPluginFactory.prototype.m_metadataInstance=null;t.HuPluginFactory.prototype.m_name=null;t.HuPluginFactory.prototype._createPluginInstance=function(){if(this.getFactoryClass()!==null){let e=this.getFactoryClass().newInstance(null);if(t.isNull(e)){throw t.XException.createRuntimeException("Failed to create plugin instance! Class might be invalid!")}return e}else{throw t.XException.createRuntimeException("Missing factory class! Cannot create plugin instance!")}};t.HuPluginFactory.prototype._loadModuleDependencies=function(e){if(this.getManifest()===null||this.m_areModuleDependenciesLoaded){this.m_areModuleDependenciesLoaded=true;return t.XPromise.resolve(t.XBooleanValue.create(false))}let o=this.getManifest().getModules();if(!t.XCollectionUtils.hasElements(o)){return t.XPromise.resolve(t.XBooleanValue.create(false))}let n=t.XPromise.create((n,i)=>{e.processMultiModulesLoad(t.SyncType.NON_BLOCKING,t.LambdaModuleLoadedMultiListener.create((e,o)=>{if(e.isValid()){this.m_areModuleDependenciesLoaded=true;n(t.XBooleanValue.create(true))}else{this.m_areModuleDependenciesLoaded=false;i(t.XError.createWithMessage(e.getFirstError()))}}),null,o)});return n};t.HuPluginFactory.prototype._prepareMetadataInstance=function(){this.m_metadataInstance=this._createPluginInstance()};t.HuPluginFactory.prototype._setupWithName=function(t){this.m_name=t;this.m_areModuleDependenciesLoaded=false;this.m_areSubSystemDependenciesStarted=false};t.HuPluginFactory.prototype._startProcessEntities=function(e,o){if(this.getManifest()===null){return t.XPromise.resolve(t.XBooleanValue.create(false))}let n=this.getManifest().getProcessEntities();if(!t.XCollectionUtils.hasElements(n)){return t.XPromise.resolve(t.XBooleanValue.create(false))}let i=o.startProcessEntities(e,n);return i.onThenExt(e=>t.XBooleanValue.create(true)).onCatchExt(e=>{t.XLogger.printError(t.XStringUtils.concatenate2("[Horizon Plugin Factory] Plugin failed to start process entities: ",e.getText()));return t.XBooleanValue.create(true)})};t.HuPluginFactory.prototype._startSubSystemDependencies=function(e){if(this.getManifest()===null||this.m_areSubSystemDependenciesStarted){this.m_areSubSystemDependenciesStarted=true;return t.XPromise.resolve(t.XBooleanValue.create(false))}let o=this.getManifest().getSubSystems();if(!t.XCollectionUtils.hasElements(o)){return t.XPromise.resolve(t.XBooleanValue.create(false))}let n=t.XList.create();t.XCollectionUtils.forEach(o,e=>{let o=t.SubSystemType.lookup(e);if(t.isNull(o)){t.XLogger.printError(t.XStringUtils.concatenate2("[Horizon Plugin Factory] Plugin has a dependency to an unknown sub system: ",e))}else{n.add(o)}});let i=t.XPromiseList.create();t.XCollectionUtils.forEach(n,t=>{let o=e;i.add(o.startSubSystemIfNecessary(t))});let r=t.XPromise.all(i);return r.onThenExt(e=>{this.m_areSubSystemDependenciesStarted=true;return t.XBooleanValue.create(true)})};t.HuPluginFactory.prototype.areDependenciesLoaded=function(){return this.m_areModuleDependenciesLoaded&&this.m_areSubSystemDependenciesStarted};t.HuPluginFactory.prototype.canBeInitialized=function(){return this.isPluginLoaded()&&this.getPluginType()!==null};t.HuPluginFactory.prototype.canLoadLibraryByUrl=function(){return this.getManifest()!==null&&t.XStringUtils.isNotNullAndNotEmpty(this.getManifest().getUrl())&&t.XLanguage.getLanguage()===t.XLanguage.JAVASCRIPT||t.XLanguage.getLanguage()===t.XLanguage.TYPESCRIPT};t.HuPluginFactory.prototype.getAuthor=function(){if(this.getManifest()!==null){return this.getManifest().getAuthor()}return null};t.HuPluginFactory.prototype.getConfigurationMetadata=function(){if(this.getManifest()!==null){return this.getManifest().getConfigurationMetadata()}return null};t.HuPluginFactory.prototype.getDependencies=function(){if(this.getManifest()!==null){return this.getManifest().getDependencies()}return null};t.HuPluginFactory.prototype.getDescription=function(){if(this.getManifest()!==null){return this.getManifest().getDescription()}return null};t.HuPluginFactory.prototype.getDisplayName=function(){if(this.getManifest()!==null){return this.getManifest().getDisplayName()}return null};t.HuPluginFactory.prototype.getFactoryClass=function(){return this.m_factoryClass};t.HuPluginFactory.prototype.getManifest=function(){return this.m_manifest};t.HuPluginFactory.prototype.getManifestOriginPath=function(){return this.m_manifestOriginPath};t.HuPluginFactory.prototype.getMetadata=function(){return this.m_metadataInstance};t.HuPluginFactory.prototype.getModules=function(){if(this.getManifest()!==null){return this.getManifest().getModules()}return null};t.HuPluginFactory.prototype.getName=function(){if(t.XStringUtils.isNullOrEmpty(this.m_name)){try{this.m_name=this.getMetadata().getName()}catch(e){if(this.getManifest()!==null&&t.XStringUtils.isNotNullAndNotEmpty(this.getManifest().getName())){this.m_name=this.getManifest().getName()}}}return this.m_name};t.HuPluginFactory.prototype.getPluginCategory=function(){let e=null;try{e=this.getMetadata().getPluginCategory()}catch(t){e=null}if(t.isNull(e)&&this.getManifest()!==null&&this.getManifest().getPluginCategory()!==null){e=this.getManifest().getPluginCategory()}if(t.isNull(e)){e=t.HuPluginCategory.UNCATEGORIZED}return e};t.HuPluginFactory.prototype.getPluginType=function(){let e=null;try{e=this.getMetadata().getPluginType()}catch(t){e=null}if(t.isNull(e)&&this.getManifest().getPluginType()!==null){e=this.getManifest().getPluginType()}return e};t.HuPluginFactory.prototype.getProcessEntities=function(){if(this.getManifest()!==null){return this.getManifest().getProcessEntities()}return null};t.HuPluginFactory.prototype.getSubSystems=function(){if(this.getManifest()!==null){return this.getManifest().getSubSystems()}return null};t.HuPluginFactory.prototype.getTags=function(){if(this.getManifest()!==null){return this.getManifest().getTags()}return null};t.HuPluginFactory.prototype.getUrl=function(){if(this.getManifest()!==null){return this.getManifest().getUrl()}return null};t.HuPluginFactory.prototype.getValidationErrors=function(){if(this.getManifest()!==null){return this.getManifest().getValidationErrors()}return t.XList.create()};t.HuPluginFactory.prototype.getVersion=function(){if(this.getManifest()!==null){return this.getManifest().getVersion()}return null};t.HuPluginFactory.prototype.hasConfigurationMetadata=function(){if(this.getManifest()!==null){return this.getManifest().hasConfigurationMetadata()}return false};t.HuPluginFactory.prototype.isDebugPlugin=function(){return this.getPluginCategory()!==null&&this.getPluginCategory().isDebug()};t.HuPluginFactory.prototype.isInconsistent=function(){if(this.getManifest()!==null&&this.getMetadata()!==null){let e=this.getManifest().getPluginType();let o=this.getMetadata().getPluginType();if(t.notNull(e)&&t.notNull(o)&&e!==o){return true}}return false};t.HuPluginFactory.prototype.isPluginFullyValid=function(){return this.canBeInitialized()&&this.getManifest()!==null};t.HuPluginFactory.prototype.isPluginLoaded=function(){return this.getFactoryClass()!==null};t.HuPluginFactory.prototype.isValid=function(){if(this.getManifest()!==null){return this.getManifest().isValid()}return true};t.HuPluginFactory.prototype.loadDependencies=function(e){if(t.isNull(e)){return t.XPromise.reject(t.XError.create("Missing kernel! Cannot load module dependencies and start sub systems!"))}let o=e.getKernel();if(this.getManifest()===null||this.areDependenciesLoaded()){this.m_areModuleDependenciesLoaded=true;this.m_areSubSystemDependenciesStarted=true;return this._startProcessEntities(e,o)}return this._loadModuleDependencies(o).onThenPromise(t=>this._startSubSystemDependencies(o).onThenPromise(t=>this._startProcessEntities(e,o)))};t.HuPluginFactory.prototype.newPluginInstance=function(){return this._createPluginInstance()};t.HuPluginFactory.prototype.releaseObject=function(){this.m_factoryClass=null;this.m_metadataInstance=null;this.m_manifest=null;this.m_manifestOriginPath=null;t.XObject.prototype.releaseObject.call(this)};t.HuPluginFactory.prototype.setFactoryClass=function(e){if(t.isNull(this.m_factoryClass)){this.m_factoryClass=e;this._prepareMetadataInstance()}};t.HuPluginFactory.prototype.setManifest=function(t){this.m_manifest=t};t.HuPluginFactory.prototype.setManifestOriginPath=function(t){this.m_manifestOriginPath=t};t.HuPluginFactory.prototype.setMetadata=function(e){if(t.isNull(this.m_metadataInstance)){this.m_metadataInstance=e}};t.HuDfHorizonToolsContext=function(){};t.HuDfHorizonToolsContext.prototype=new t.HuDfHorizonLogContext;t.HuDfHorizonToolsContext.prototype._ff_c="HuDfHorizonToolsContext";t.HuDfHorizonToolsContext.prototype.m_toolsContext=null;t.HuDfHorizonToolsContext.prototype._getToolsContext=function(){return this.m_toolsContext};t.HuDfHorizonToolsContext.prototype._setupWithToolsContext=function(e){this.m_toolsContext=e;if(t.isNull(this.m_toolsContext)){throw t.XException.createRuntimeException("Missing tools context! A tools context is required for this object!")}this._setupLogger(e.getLogger());this.logDebug("-> Init");this._setupToolsContext()};t.HuDfHorizonToolsContext.prototype.getLocalNotificationCenter=function(){return this._getToolsContext().getLocalNotificationCenter()};t.HuDfHorizonToolsContext.prototype.getLocalStorage=function(){return this._getToolsContext().getLocalStorage()};t.HuDfHorizonToolsContext.prototype.getProcess=function(){return this._getToolsContext().getProcess()};t.HuDfHorizonToolsContext.prototype.getSession=function(){return this._getToolsContext().getSession()};t.HuDfHorizonToolsContext.prototype.releaseObject=function(){this.m_toolsContext=null;t.HuDfHorizonLogContext.prototype.releaseObject.call(this)};t.HuNotificationPosterPopup=function(){};t.HuNotificationPosterPopup.prototype=new t.HuHorizonDfPopup;t.HuNotificationPosterPopup.prototype._ff_c="HuNotificationPosterPopup";t.HuNotificationPosterPopup.create=function(e){let o=new t.HuNotificationPosterPopup;o.setupWithController(e);return o};t.HuNotificationPosterPopup.prototype.m_input=null;t.HuNotificationPosterPopup.prototype._cancelPopup=function(){this.close()};t.HuNotificationPosterPopup.prototype._postNotification=function(){this.getGenericController().getLocalNotificationCenter().postNotificationWithName(this.m_input.getValue(),null)};t.HuNotificationPosterPopup.prototype.buildPopupContent=function(e){let o=e.newControl(t.UiType.FLEX_LAYOUT);o.useMaxSpace();o.setDirection(t.UiFlexDirection.COLUMN);let n=o.addNewItemOfType(t.UiType.LABEL);n.setText("Specify the notificaion id to post");this.m_input=o.addNewItemOfType(t.UiType.INPUT);this.m_input.registerOnEnter(t.UiLambdaEnterListener.create(t=>{this._postNotification()}));this.setInitialFocus(this.m_input);e.setRoot(o)};t.HuNotificationPosterPopup.prototype.configurePopup=function(e){e.setTitle("Horizon Notification Poster");e.setWidth(t.UiCssLength.create("600px"));this.addButton(t.UiButtonType.DEFAULT,"Close","decline",t=>{this._cancelPopup()});this.addButton(t.UiButtonType.PRIMARY,"Post","paper-plane",t=>{this._postNotification()})};t.HuNotificationPosterPopup.prototype.onPopupClosed=function(t){};t.HuNotificationPosterPopup.prototype.onPopupOpened=function(t){};t.HuNotificationPosterPopup.prototype.releaseObject=function(){this.m_input=t.XObjectExt.release(this.m_input);t.HuHorizonDfPopup.prototype.releaseObject.call(this)};t.HuWorkspaceSelectionPopup=function(){};t.HuWorkspaceSelectionPopup.prototype=new t.HuHorizonDfPopup;t.HuWorkspaceSelectionPopup.prototype._ff_c="HuWorkspaceSelectionPopup";t.HuWorkspaceSelectionPopup.create=function(e){let o=new t.HuWorkspaceSelectionPopup;o.setupWithController(e);return o};t.HuWorkspaceSelectionPopup.prototype.m_cancelProcedure=null;t.HuWorkspaceSelectionPopup.prototype.m_input=null;t.HuWorkspaceSelectionPopup.prototype.m_inputConsumer=null;t.HuWorkspaceSelectionPopup.prototype._cancelPopup=function(){if(t.notNull(this.m_cancelProcedure)){this.m_cancelProcedure()}this.close()};t.HuWorkspaceSelectionPopup.prototype._confirmPopup=function(){if(t.notNull(this.m_inputConsumer)&&t.notNull(this.m_input)){this.m_inputConsumer(this.m_input.getValue())}this.close()};t.HuWorkspaceSelectionPopup.prototype._presentDirectorySelection=function(){let e=t.SuResourceExplorerConfigWrapper.create();e.setTitle("Select a directory as a workspace");e.setInitialPath(t.HuHorizonConstants.DEFAULT_HOME_DIRECTORY);t.SuResourceExplorerPromise.selectDirectory(this.getGenericController().getProcess(),e).onThen(e=>{if(t.notNull(e)){this.m_input.setValue(e.getUri().getPath())}}).onCatch(t=>{this.getGenesis().showErrorToast(t.getText())})};t.HuWorkspaceSelectionPopup.prototype.buildPopupContent=function(e){let o=e.newControl(t.UiType.FLEX_LAYOUT);o.useMaxSpace();o.setDirection(t.UiFlexDirection.COLUMN);let n=o.addNewItemOfType(t.UiType.TITLE);n.setText("Select a directory as a workspace");n.setTitleStyle(t.UiTitleLevel.H_6);n.setTitleLevel(t.UiTitleLevel.H_6);let i=o.addNewItemOfType(t.UiType.LABEL);i.setText("Horizon uses the workspace directory to store settings and state artifacts.");i.setMargin(t.UiCssBoxEdges.create("0 0 0.5rem 0"));this.m_input=o.addNewItemOfType(t.UiType.INPUT);this.m_input.setShowValueHelp(true);this.m_input.registerOnEnter(t.UiLambdaEnterListener.create(t=>{this._confirmPopup()}));this.m_input.registerOnValueHelpRequest(t.UiLambdaValueHelpRequestListener.create(t=>{this._presentDirectorySelection()}));this.setInitialFocus(this.m_input);e.setRoot(o)};t.HuWorkspaceSelectionPopup.prototype.configurePopup=function(e){e.setTitle("Horizon workspace");e.setWidth(t.UiCssLength.create("600px"));this.addButton(t.UiButtonType.DEFAULT,"Cancel","sys-cancel-2",t=>{this._cancelPopup()});this.addButton(t.UiButtonType.PRIMARY,"Launch","begin",t=>{this._confirmPopup()})};t.HuWorkspaceSelectionPopup.prototype.onPopupClosed=function(t){};t.HuWorkspaceSelectionPopup.prototype.onPopupOpened=function(t){};t.HuWorkspaceSelectionPopup.prototype.releaseObject=function(){this.m_inputConsumer=null;this.m_cancelProcedure=null;this.m_input=t.XObjectExt.release(this.m_input);t.HuHorizonDfPopup.prototype.releaseObject.call(this)};t.HuWorkspaceSelectionPopup.prototype.setCancelProcedure=function(t){this.m_cancelProcedure=t};t.HuWorkspaceSelectionPopup.prototype.setInputConsumer=function(t){this.m_inputConsumer=t};t.HuWorkspaceSelectionPopup.prototype.setInputValue=function(e){if(t.notNull(this.m_input)){this.m_input.setValue(e)}};t.HuDfBootScreenView=function(){};t.HuDfBootScreenView.prototype=new t.DfUiView;t.HuDfBootScreenView.prototype._ff_c="HuDfBootScreenView";t.HuDfBootScreenView.prototype.getViewControl=function(e){return e.newControl(t.UiType.FLEX_LAYOUT)};t.HuDfBootScreenView.prototype.setupView=function(){};t.HuEmptyWorkspaceView=function(){};t.HuEmptyWorkspaceView.prototype=new t.DfUiView;t.HuEmptyWorkspaceView.prototype._ff_c="HuEmptyWorkspaceView";t.HuEmptyWorkspaceView.create=function(e){let o=new t.HuEmptyWorkspaceView;o.initView(e);return o};t.HuEmptyWorkspaceView.prototype.m_messageLbl=null;t.HuEmptyWorkspaceView.prototype.m_reloadConfigProcedure=null;t.HuEmptyWorkspaceView.prototype._notifyReloadConfigButtonPressed=function(){if(t.notNull(this.m_reloadConfigProcedure)){this.m_reloadConfigProcedure()}};t.HuEmptyWorkspaceView.prototype.destroyView=function(){this.m_messageLbl=t.XObjectExt.release(this.m_messageLbl);this.m_reloadConfigProcedure=null};t.HuEmptyWorkspaceView.prototype.getViewControl=function(e){return e.newControl(t.UiType.FLEX_LAYOUT)};t.HuEmptyWorkspaceView.prototype.layoutView=function(e){e.setDirection(t.UiFlexDirection.COLUMN);e.useMaxSpace();e.setAlignItems(t.UiFlexAlignItems.CENTER);e.setJustifyContent(t.UiFlexJustifyContent.CENTER);this.m_messageLbl=e.addNewItemOfType(t.UiType.LABEL);this.m_messageLbl.setWrapping(true);this.m_messageLbl.setMaxWidth(t.UiCssLength.create("75%"));let o=e.addNewItemOfType(t.UiType.FLEX_LAYOUT);o.setDirection(t.UiFlexDirection.ROW);o.setJustifyContent(t.UiFlexJustifyContent.CENTER);o.setMargin(t.UiCssBoxEdges.create("1rem 0 0 0"));let n=o.addNewItemOfType(t.UiType.BUTTON);n.setText("Reload Configuration");n.setIcon("refresh");n.registerOnPress(t.UiLambdaPressListener.create(t=>{this._notifyReloadConfigButtonPressed()}))};t.HuEmptyWorkspaceView.prototype.setMessageText=function(e){if(t.notNull(this.m_messageLbl)){this.m_messageLbl.setText(e)}};t.HuEmptyWorkspaceView.prototype.setReloadConfigButtonPressedProcdeure=function(t){this.m_reloadConfigProcedure=t};t.HuEmptyWorkspaceView.prototype.setupView=function(){};t.HuDfHorizonBootAction=function(){};t.HuDfHorizonBootAction.prototype=new t.HuDfHorizonLogContext;t.HuDfHorizonBootAction.prototype._ff_c="HuDfHorizonBootAction";t.HuDfHorizonBootAction.prototype.m_bootController=null;t.HuDfHorizonBootAction.prototype._getBootController=function(){return this.m_bootController};t.HuDfHorizonBootAction.prototype._setupWithBootController=function(e){this.m_bootController=e;if(t.isNull(this.m_bootController)){throw t.XException.createRuntimeException("Missing boot controller! Cannot create a boot action without a boot controller!")}this._setupLogger(e);this._setupAction()};t.HuDfHorizonBootAction.prototype.getLocalNotificationCenter=function(){return this._getBootController().getLocalNotificationCenter()};t.HuDfHorizonBootAction.prototype.getLocalStorage=function(){return this._getBootController().getLocalStorage()};t.HuDfHorizonBootAction.prototype.getLogContextName=function(){return t.XStringUtils.isNotNullAndNotEmpty(this.getActionName())?t.XStringUtils.concatenate2(this.getActionName()," Boot Action"):"Unnamed Boot Action"};t.HuDfHorizonBootAction.prototype.getProcess=function(){return this._getBootController().getProcess()};t.HuDfHorizonBootAction.prototype.getSession=function(){return this._getBootController().getSession()};t.HuDfHorizonBootAction.prototype.releaseObject=function(){this.m_bootController=null;t.HuDfHorizonLogContext.prototype.releaseObject.call(this)};t.HuBootControllerStatus=function(){};t.HuBootControllerStatus.prototype=new t.XConstant;t.HuBootControllerStatus.prototype._ff_c="HuBootControllerStatus";t.HuBootControllerStatus.BOOT_ERROR=null;t.HuBootControllerStatus.BOOT_FINISHED=null;t.HuBootControllerStatus.BOOT_IN_PROGRESS=null;t.HuBootControllerStatus.CONFIGURATION_RELOAD_FINISHED=null;t.HuBootControllerStatus.CONFIGURATION_RELOAD_IN_PROGRESS=null;t.HuBootControllerStatus.INITIAL=null;t.HuBootControllerStatus.WORKSPACE_SWITCH_FINISHED=null;t.HuBootControllerStatus.WORKSPACE_SWITCH_IN_PROGRESS=null;t.HuBootControllerStatus._createWithName=function(e){return t.XConstant.setupName(new t.HuBootControllerStatus,e)};t.HuBootControllerStatus.staticSetup=function(){t.HuBootControllerStatus.INITIAL=t.HuBootControllerStatus._createWithName("Initial");t.HuBootControllerStatus.BOOT_IN_PROGRESS=t.HuBootControllerStatus._createWithName("BootInProgress");t.HuBootControllerStatus.BOOT_ERROR=t.HuBootControllerStatus._createWithName("BootError");t.HuBootControllerStatus.BOOT_FINISHED=t.HuBootControllerStatus._createWithName("BootFinished");t.HuBootControllerStatus.WORKSPACE_SWITCH_IN_PROGRESS=t.HuBootControllerStatus._createWithName("WorkspaceSwitchInProgress");t.HuBootControllerStatus.WORKSPACE_SWITCH_FINISHED=t.HuBootControllerStatus._createWithName("WorkspaceSwitchFinished");t.HuBootControllerStatus.CONFIGURATION_RELOAD_IN_PROGRESS=t.HuBootControllerStatus._createWithName("ConfigurationReloadInProgress");t.HuBootControllerStatus.CONFIGURATION_RELOAD_FINISHED=t.HuBootControllerStatus._createWithName("ConfigurationReloadFinished")};t.HuFrameworkMode=function(){};t.HuFrameworkMode.prototype=new t.XConstant;t.HuFrameworkMode.prototype._ff_c="HuFrameworkMode";t.HuFrameworkMode.DEBUG=null;t.HuFrameworkMode.DEVELOPER=null;t.HuFrameworkMode.PRODUCTION=null;t.HuFrameworkMode.TEST=null;t.HuFrameworkMode.s_lookup=null;t.HuFrameworkMode._createWithName=function(e){let o=t.XConstant.setupName(new t.HuFrameworkMode,e);t.HuFrameworkMode.s_lookup.put(t.XString.toLowerCase(e),o);return o};t.HuFrameworkMode.lookup=function(e){return t.HuFrameworkMode.s_lookup.getByKey(t.XString.toLowerCase(e))};t.HuFrameworkMode.staticSetup=function(){t.HuFrameworkMode.s_lookup=t.XHashMapByString.create();t.HuFrameworkMode.PRODUCTION=t.HuFrameworkMode._createWithName("Production");t.HuFrameworkMode.DEVELOPER=t.HuFrameworkMode._createWithName("Developer");t.HuFrameworkMode.DEBUG=t.HuFrameworkMode._createWithName("Debug");t.HuFrameworkMode.TEST=t.HuFrameworkMode._createWithName("Test")};t.HuFrameworkMode.prototype.isProduction=function(){return this===t.HuFrameworkMode.PRODUCTION};t.HuMainControllerStatus=function(){};t.HuMainControllerStatus.prototype=new t.XConstant;t.HuMainControllerStatus.prototype._ff_c="HuMainControllerStatus";t.HuMainControllerStatus.BOOTING=null;t.HuMainControllerStatus.INITIAL=null;t.HuMainControllerStatus.READY=null;t.HuMainControllerStatus.RELOADING_CONFIGURATION=null;t.HuMainControllerStatus.RUNNING=null;t.HuMainControllerStatus._createWithName=function(e){return t.XConstant.setupName(new t.HuMainControllerStatus,e)};t.HuMainControllerStatus.staticSetup=function(){t.HuMainControllerStatus.INITIAL=t.HuMainControllerStatus._createWithName("Initial");t.HuMainControllerStatus.BOOTING=t.HuMainControllerStatus._createWithName("Booting");t.HuMainControllerStatus.RELOADING_CONFIGURATION=t.HuMainControllerStatus._createWithName("ReloadingConfiguration");t.HuMainControllerStatus.READY=t.HuMainControllerStatus._createWithName("Ready");t.HuMainControllerStatus.RUNNING=t.HuMainControllerStatus._createWithName("Running")};t.HuMainControllerStatus.prototype.isSetupPhase=function(){return this!==t.HuMainControllerStatus.READY&&this!==t.HuMainControllerStatus.RUNNING};t.HuDfHorizonLayout=function(){};t.HuDfHorizonLayout.prototype=new t.HuDfHorizonToolsContext;t.HuDfHorizonLayout.prototype._ff_c="HuDfHorizonLayout";t.HuDfHorizonLayout.prototype.m_layoutConfigJson=null;t.HuDfHorizonLayout.prototype.m_layoutManager=null;t.HuDfHorizonLayout.prototype._setupToolsContext=function(){this._setupLayout(this.getGenesis());this.getView().addCssClass(t.XStringUtils.concatenate3("ffHorizon",this.getLayoutType().getName(),"Layout"))};t.HuDfHorizonLayout.prototype._setupWithLayoutManager=function(e){this.m_layoutManager=e;this.m_layoutConfigJson=t.PrStructure.createDeepCopy(e.getLayoutConfigJson());if(t.isNull(this.m_layoutConfigJson)){this.m_layoutConfigJson=t.PrFactory.createStructure()}this._setupWithToolsContext(e)};t.HuDfHorizonLayout.prototype.getGenesis=function(){return this.m_layoutManager.getGenesis()};t.HuDfHorizonLayout.prototype.getLayoutConfigJson=function(){return this.m_layoutConfigJson};t.HuDfHorizonLayout.prototype.getLogContextName=function(){return t.XStringUtils.concatenate2(this.getLayoutType().getName()," Layout")};t.HuDfHorizonLayout.prototype.initLayout=function(e){if(t.notNull(this.m_layoutManager)){throw t.XException.createRuntimeException("Layout already initialized!")}if(t.isNull(e)){throw t.XException.createRuntimeException("Missing layout manager! A layout manager is required for layout initialization!")}this._setupWithLayoutManager(e)};t.HuDfHorizonLayout.prototype.notifyPluginBecameHidden=function(e){if(t.notNull(e)){e.onPluginContainerDidBecameHidden()}else{this.logDebug("Could not find plugin controller! Cannot notify didBecameHidden")}};t.HuDfHorizonLayout.prototype.notifyPluginBecameVisible=function(e){if(t.notNull(e)){e.onPluginContainerDidBecameVisible()}else{this.logDebug("Could not find plugin controller! Cannot notify didBecameVisible")}};t.HuDfHorizonLayout.prototype.releaseObject=function(){this.m_layoutManager=null;this.m_layoutConfigJson=null;t.HuDfHorizonToolsContext.prototype.releaseObject.call(this)};t.HuDfHorizonManager=function(){};t.HuDfHorizonManager.prototype=new t.HuDfHorizonToolsContext;t.HuDfHorizonManager.prototype._ff_c="HuDfHorizonManager";t.HuDfHorizonManager.prototype.m_genericController=null;t.HuDfHorizonManager.prototype._getController=function(){return this.m_genericController};t.HuDfHorizonManager.prototype._setupToolsContext=function(){this._setupManager()};t.HuDfHorizonManager.prototype._setupWithGenericController=function(e){this.m_genericController=e;if(t.isNull(this.m_genericController)){throw t.XException.createRuntimeException("Missing controller! A controller is required for this manager!")}this._setupWithToolsContext(e)};t.HuDfHorizonManager.prototype.getGenesis=function(){return this._getController().getGenesis()};t.HuDfHorizonManager.prototype.getLogContextName=function(){return this._getManagerName()};t.HuDfHorizonManager.prototype.releaseObject=function(){this.m_genericController=null;t.HuDfHorizonToolsContext.prototype.releaseObject.call(this)};t.HuDfHorizonPluginController=function(){};t.HuDfHorizonPluginController.prototype=new t.HuDfHorizonLogContext;t.HuDfHorizonPluginController.prototype._ff_c="HuDfHorizonPluginController";t.HuDfHorizonPluginController.prototype.m_configuration=null;t.HuDfHorizonPluginController.prototype.m_dataSpaceChangedUuidList=null;t.HuDfHorizonPluginController.prototype.m_developerActionList=null;t.HuDfHorizonPluginController.prototype.m_frameworkModeChangedCallback=null;t.HuDfHorizonPluginController.prototype.m_globalNotificationObserverIds=null;t.HuDfHorizonPluginController.prototype.m_internalNotificationObserverIds=null;t.HuDfHorizonPluginController.prototype.m_isInitialized=false;t.HuDfHorizonPluginController.prototype.m_isRunning=false;t.HuDfHorizonPluginController.prototype.m_parentController=null;t.HuDfHorizonPluginController.prototype.m_pluginDataStorage=null;t.HuDfHorizonPluginController.prototype.m_pluginFactory=null;t.HuDfHorizonPluginController.prototype.m_pluginInstance=null;t.HuDfHorizonPluginController.prototype.m_pluginProcess=null;t.HuDfHorizonPluginController.prototype.m_pluginStartupInfo=null;t.HuDfHorizonPluginController.prototype.m_pluginSubApplication=null;t.HuDfHorizonPluginController.prototype.m_uuid=null;t.HuDfHorizonPluginController.prototype._cleanUpDataSpaceListeners=function(){if(t.notNull(this.m_dataSpaceChangedUuidList)&&this.m_dataSpaceChangedUuidList.size()>0){if(this._getDataSpaceBase()!==null){t.XCollectionUtils.forEach(this.m_dataSpaceChangedUuidList,t=>{this._getDataSpaceBase().removeChangeConsumerByUuid(t)})}this.m_dataSpaceChangedUuidList.clear()}this.m_dataSpaceChangedUuidList=t.XObjectExt.release(this.m_dataSpaceChangedUuidList)};t.HuDfHorizonPluginController.prototype._cleanupNotificationObservers=function(){t.HuBaseUtils.deregisterNotificationObservers(this.m_globalNotificationObserverIds,this.getProcess().getNotificationCenter());this.m_globalNotificationObserverIds=t.XObjectExt.release(this.m_globalNotificationObserverIds);t.HuBaseUtils.deregisterNotificationObservers(this.m_internalNotificationObserverIds,this.getLocalNotificationCenter());this.m_internalNotificationObserverIds=t.XObjectExt.release(this.m_internalNotificationObserverIds)};t.HuDfHorizonPluginController.prototype._createSubProcess=function(){let e=this._getParentController().getProcess().getApplication();let o=this._getParentController().getProcess().newChildProcess(t.ProcessType.PLUGIN);o.setDescription(this.getName());this.m_pluginProcess=o;this.m_pluginSubApplication=e.newSubApplication(this.m_pluginProcess);o.registerOnEvent(t.ProcessEventLambdaListener.create((e,o)=>{if(o===t.ProcessEventType.TERMINATED){this.kill()}}))};t.HuDfHorizonPluginController.prototype._ensureModuleDependencies=function(){return this.getMainController().getPluginToolsService().ensureModuleDependencies(this._getPluginFactory().getName())};t.HuDfHorizonPluginController.prototype._getAndCreateConfigurationIfNecessary=function(){if(t.isNull(this.m_configuration)){this.m_configuration=t.CoConfiguration.create(this._getPluginFactory().getConfigurationMetadata(),null,this.getProcess())}return this.m_configuration};t.HuDfHorizonPluginController.prototype._getCurrentMode=function(){return this.getMainController().getCurrentFrameworkMode()};t.HuDfHorizonPluginController.prototype._getDataSpaceBase=function(){return this.getDataSpace()};t.HuDfHorizonPluginController.prototype._getParentController=function(){return this.m_parentController};t.HuDfHorizonPluginController.prototype._getPluginFactory=function(){return this.m_pluginFactory};t.HuDfHorizonPluginController.prototype._getPluginInstance=function(){return this.m_pluginInstance};t.HuDfHorizonPluginController.prototype._getPluginMessageGroup=function(){return t.HuMessageGroup.createForPluginNameIfNecessary(this.getName(),this.getPluginDisplayNameOrName())};t.HuDfHorizonPluginController.prototype._handlePluginStartupException=function(e){this.addErrorMessage("Startup failed","Error during plugin startup!",e.getText());let o=e.getThrowable();if(t.notNull(o)){t.XLogger.printError(t.XException.getStackTrace(o,0))}};t.HuDfHorizonPluginController.prototype._isConfigured=function(){if(this._getParentController()===null||this._getPluginFactory()===null||!this._getPluginFactory().canBeInitialized()||this.getPluginStartupInfo()===null){return false}return true};t.HuDfHorizonPluginController.prototype._isInitialized=function(){return this.m_isInitialized};t.HuDfHorizonPluginController.prototype._isRootLevelPlugin=function(){return this._getParentController()===this.getMainController()};t.HuDfHorizonPluginController.prototype._isRunning=function(){return this.m_isRunning};t.HuDfHorizonPluginController.prototype._notifyConfigurationChanged=function(t){try{this._getPluginInstance().onConfigurationChanged(t)}catch(t){this.logDebug("Missing onConfigurationChanged method on the plugin instance!")}};t.HuDfHorizonPluginController.prototype._postPluginStartedNotification=function(){let e=t.XNotificationData.create();e.putString(t.HuHorizonInternalNotifications.PLUGIN_STARTED_PLUGIN_NAME_NOTIFI_DATA,this.getName());e.putXObject(t.HuHorizonInternalNotifications.PLUGIN_STARTED_PLUGIN_TYPE_NOTIFI_DATA,this.getPluginType());this.getLocalNotificationCenter().postNotificationWithName(t.HuHorizonInternalNotifications.PLUGIN_STARTED,e)};t.HuDfHorizonPluginController.prototype._preparePluginConfiguration=function(t){return this.getMainController().getPluginToolsService().createConfigurationForPlugin(this._getPluginFactory(),t).onThen(t=>{this.m_configuration=t})};t.HuDfHorizonPluginController.prototype._preparePluginStorage=function(){this.m_pluginDataStorage=t.HuPluginDataStorage.create(this.getLogger());let e=this.getMainController().getWorkspaceManager().getStorageFileForPlugin(this._getPluginFactory());return this.m_pluginDataStorage.initializeStorage(e).then(t=>this.m_pluginDataStorage,null)};t.HuDfHorizonPluginController.prototype._reloadPluginConfigurationAndNotify=function(){this._preparePluginConfiguration(null).onFinally(()=>{this._notifyConfigurationChanged(this.getConfiguration())})};t.HuDfHorizonPluginController.prototype._setupNotificationObservers=function(){this.m_globalNotificationObserverIds=t.XList.create();this.m_globalNotificationObserverIds.add(this.getProcess().getNotificationCenter().addObserverForName(t.CoConfigurationConstants.NOTIFICATION_CONFIGURATION_CHANGED,e=>{let o=e.getStringByKey(t.CoConfigurationConstants.NOTIFICATION_DATA_CONFIGURATION_NAME);if(t.XString.isEqual(o,this.getName())){this._reloadPluginConfigurationAndNotify()}}));this.m_internalNotificationObserverIds=t.XList.create();this.m_internalNotificationObserverIds.add(this.getLocalNotificationCenter().addObserverForName(t.HuHorizonInternalNotifications.FRAMEWORK_MODE_CHANGED,e=>{if(t.notNull(this.m_frameworkModeChangedCallback)){this.m_frameworkModeChangedCallback()}}))};t.HuDfHorizonPluginController.prototype._throwInvalidPluginTypeException=function(){throw t.XException.createRuntimeException(t.XStringUtils.concatenate2("Invalid plugin type -> ",this.getPluginType().getName()))};t.HuDfHorizonPluginController.prototype.actionByIdExists=function(t){if(this.getMainController()!==null){return this.getMainController().getCommandPluginManager().actionByIdExists(t)}return false};t.HuDfHorizonPluginController.prototype.actionExists=function(e,o){return this.actionByIdExists(t.HuUtils.generateActionId(e,o))};t.HuDfHorizonPluginController.prototype.addDataSpaceChangedListener=function(e){if(t.isNull(this.m_dataSpaceChangedUuidList)){this.m_dataSpaceChangedUuidList=t.XList.create()}let o=this._getDataSpaceBase().addChangeConsumer(e);if(t.XStringUtils.isNotNullAndNotEmpty(o)){this.m_dataSpaceChangedUuidList.add(o)}return o};t.HuDfHorizonPluginController.prototype.addDeveloperActionMenuEntry=function(e,o,n,i,r){let s=t.HuDeveloperAction.create(e,o,n,i,r);this.m_developerActionList.add(s);return s.getId()};t.HuDfHorizonPluginController.prototype.addErrorMessage=function(t,e,o){this.getMainController().getMessageManager().addErrorMessage(t,e,o,this._getPluginMessageGroup())};t.HuDfHorizonPluginController.prototype.addInfoMessage=function(t,e,o){this.getMainController().getMessageManager().addInfoMessage(t,e,o,this._getPluginMessageGroup())};t.HuDfHorizonPluginController.prototype.addSuccessMessage=function(t,e,o){this.getMainController().getMessageManager().addSuccessMessage(t,e,o,this._getPluginMessageGroup())};t.HuDfHorizonPluginController.prototype.addWarningMessage=function(t,e,o){this.getMainController().getMessageManager().addWarningMessage(t,e,o,this._getPluginMessageGroup())};t.HuDfHorizonPluginController.prototype.configure=function(t,e,o){this.m_pluginFactory=t;this.m_parentController=e;this.m_pluginStartupInfo=o;this._setupLogger(e)};t.HuDfHorizonPluginController.prototype.executeAction=function(e,o,n){return this.executeActionById(t.HuUtils.generateActionId(e,o),n)};t.HuDfHorizonPluginController.prototype.executeActionById=function(e,o){if(this.getMainController()!==null){return this.getMainController().getCommandPluginManager().executeAction(e,this,o)}return t.XPromise.reject(t.XError.create("Critical error during action execution!"))};t.HuDfHorizonPluginController.prototype.getAllActionIds=function(){if(this.getMainController()!==null){return this.getMainController().getCommandPluginManager().getAllActionIds()}return t.XList.create()};t.HuDfHorizonPluginController.prototype.getApplication=function(){return this.m_pluginSubApplication};t.HuDfHorizonPluginController.prototype.getConfiguration=function(){return this._getAndCreateConfigurationIfNecessary()};t.HuDfHorizonPluginController.prototype.getDataSpace=function(){return this.getMainController().getDataSpace()};t.HuDfHorizonPluginController.prototype.getDataStorage=function(){return this.m_pluginDataStorage};t.HuDfHorizonPluginController.prototype.getHorizonArguments=function(){return this.getMainController().getProgramStartArgStructure()};t.HuDfHorizonPluginController.prototype.getLocalNotificationCenter=function(){return this._getParentController().getLocalNotificationCenter()};t.HuDfHorizonPluginController.prototype.getLocalStorage=function(){return this._getParentController().getLocalStorage()};t.HuDfHorizonPluginController.prototype.getLogContextName=function(){return"Plugin"};t.HuDfHorizonPluginController.prototype.getMainController=function(){if(this._getParentController()!==null){return this._getParentController().getMainController()}return null};t.HuDfHorizonPluginController.prototype.getMenuDeveloperActionList=function(){return this.m_developerActionList};t.HuDfHorizonPluginController.prototype.getName=function(){return this._getPluginFactory().getName()};t.HuDfHorizonPluginController.prototype.getPluginCategory=function(){return this._getPluginFactory().getPluginCategory()};t.HuDfHorizonPluginController.prototype.getPluginDisplayNameOrName=function(){let e=this._getPluginFactory().getDisplayName();if(t.XStringUtils.isNullOrEmpty(e)){e=this.getName()}return e};t.HuDfHorizonPluginController.prototype.getPluginStartupInfo=function(){return this.m_pluginStartupInfo};t.HuDfHorizonPluginController.prototype.getProcess=function(){return this.m_pluginProcess};t.HuDfHorizonPluginController.prototype.getSession=function(){return this.getProcess()};t.HuDfHorizonPluginController.prototype.getUuid=function(){return this.m_uuid};t.HuDfHorizonPluginController.prototype.hideNetworkActivityIndicator=function(){this.getLocalNotificationCenter().postNotificationWithName(t.HuHorizonInternalNotifications.STATUS_BAR_MANAGER_HIDE_NETWORK_ACTIVITY_INDICATOR,null)};t.HuDfHorizonPluginController.prototype.initializePlugin=function(){let e=t.XPromise.create((e,o)=>{if(this._isInitialized()){o(t.XError.create("Plugin controller is already initialized!").setErrorType(t.HuErrorType.PLUGIN_INITIALIZATION_ERROR))}if(!this._isConfigured()){o(t.XError.create("Failed to initialize plugin controller! Missing parent controller, plugin factory or plugin startup info!").setErrorType(t.HuErrorType.PLUGIN_INITIALIZATION_ERROR))}else{this.m_pluginInstance=this._getPluginFactory().newPluginInstance();this.m_uuid=t.XGuid.getGuid();this._createSubProcess();this._setupNotificationObservers();this.m_developerActionList=t.XList.create();this._ensureModuleDependencies().onFinally(()=>{this._preparePluginStorage().onFinally(()=>{this._preparePluginConfiguration(this.getPluginStartupInfo().getConfigStructure()).onFinally(()=>{this._initSpecificPlugin(this.getConfiguration());this.m_isInitialized=true;e(t.XBooleanValue.create(true))})})})}});return e};t.HuDfHorizonPluginController.prototype.isDeveloperModeActive=function(){return this._getCurrentMode()===t.HuFrameworkMode.DEBUG||this._getCurrentMode()===t.HuFrameworkMode.DEVELOPER||this._getCurrentMode()===t.HuFrameworkMode.TEST};t.HuDfHorizonPluginController.prototype.isProductionModeActive=function(){return this._getCurrentMode()===t.HuFrameworkMode.PRODUCTION};t.HuDfHorizonPluginController.prototype.isTestModeActive=function(){return this._getCurrentMode()===t.HuFrameworkMode.TEST};t.HuDfHorizonPluginController.prototype.kill=function(){this.releaseObject()};t.HuDfHorizonPluginController.prototype.loadWorkspaceFileContent=function(e){if(this.getMainController().getWorkspaceManager().isVirtualWorkspace()){return t.XPromise.reject(t.XError.create("No workspace found!"))}let o=this.getMainController().getWorkspaceManager().getWorkspaceDirectory().newChild(e);return t.XFilePromise.loadContent(o)};t.HuDfHorizonPluginController.prototype.presentSettingsDialogIfPossible=function(){if(this._getPluginFactory().hasConfigurationMetadata()){let e=t.SuSettingsDialog.createRunnerForConfiguration(this.getProcess(),this._getPluginFactory().getConfigurationMetadata().getName(),()=>{this._reloadPluginConfigurationAndNotify()});e.runProgram()}};t.HuDfHorizonPluginController.prototype.releaseObject=function(){this._cleanupNotificationObservers();this.m_frameworkModeChangedCallback=null;this._getPluginInstance().destroyPlugin();this._cleanUpDataSpaceListeners();this._destroySpecificPlugin();this.m_developerActionList=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_developerActionList);this.m_pluginFactory=null;this.m_parentController=null;this.m_pluginStartupInfo=null;this.m_configuration=t.XObjectExt.release(this.m_configuration);this.m_pluginDataStorage=t.XObjectExt.release(this.m_pluginDataStorage);this.m_pluginSubApplication=t.XObjectExt.release(this.m_pluginSubApplication);this.m_pluginProcess=t.XObjectExt.release(this.m_pluginProcess);this.m_pluginInstance=null;this.m_isRunning=false;t.HuDfHorizonLogContext.prototype.releaseObject.call(this)};t.HuDfHorizonPluginController.prototype.removeDataSpaceChangedListener=function(e){this._getDataSpaceBase().removeChangeConsumerByUuid(e);if(t.notNull(this.m_dataSpaceChangedUuidList)){this.m_dataSpaceChangedUuidList.removeElement(e)}};t.HuDfHorizonPluginController.prototype.removeDeveloperActionMenuEntry=function(e){t.XCollectionUtils.removeIf(this.m_developerActionList,o=>t.XString.isEqual(o.getId(),e))};t.HuDfHorizonPluginController.prototype.run=function(){let e=t.XPromise.create((e,o)=>{if(!this._isInitialized()){o(t.XError.create("Plugin controller not initialized! Cannot start!").setErrorType(t.HuErrorType.PLUGIN_STARTUP_ERROR))}if(!this._isRunning()){this.m_isRunning=true;try{this._getPluginInstance().processConfiguration(this.getConfiguration());let n=this._setupSpecificPlugin();if(t.isNull(n)){this._runSpecificPlugin();this._postPluginStartedNotification();e(t.XBooleanValue.create(true))}else{this._setPluginUiBusy(true);n.onThen(o=>{this._setPluginUiBusy(false);this._runSpecificPlugin();this._postPluginStartedNotification();e(t.XBooleanValue.create(true))}).onCatch(t=>{this.m_isRunning=false;this._handlePluginStartupException(t);o(t)})}}catch(e){this.m_isRunning=false;this._handlePluginStartupException(t.XError.createWithThrowable(e));o(t.XError.createWithThrowable(e).setErrorType(t.HuErrorType.PLUGIN_STARTUP_ERROR))}}else{o(t.XError.create("Illegal state! The plugin controller is already running.").setErrorType(t.HuErrorType.PLUGIN_STARTUP_ERROR))}});return e};t.HuDfHorizonPluginController.prototype.setFrameworkModeChangedCallback=function(t){this.m_frameworkModeChangedCallback=t};t.HuDfHorizonPluginController.prototype.setStatusMessage=function(t){this.getMainController().getMessageManager().setStatusMessage(t)};t.HuDfHorizonPluginController.prototype.showNetworkActivityIndicator=function(){this.getLocalNotificationCenter().postNotificationWithName(t.HuHorizonInternalNotifications.STATUS_BAR_MANAGER_SHOW_NETWORK_ACTIVITY_INDICATOR,null)};t.HuDfHorizonPluginController.prototype.toString=function(){let e=t.XStringBuffer.create();e.append("[");e.append(this.getPluginType().getName());e.append("] ");e.append(this.getName());return e.toString()};t.HuPluginLoader=function(){};t.HuPluginLoader.prototype=new t.HuDfHorizonToolsContext;t.HuPluginLoader.prototype._ff_c="HuPluginLoader";t.HuPluginLoader.create=function(e){let o=new t.HuPluginLoader;o._setupWithToolsContext(e);return o};t.HuPluginLoader.prototype.m_modulesInProgressList=null;t.HuPluginLoader.prototype._getKernel=function(){return this.getProcess().getKernel()};t.HuPluginLoader.prototype._loadPluginLibrary=function(e){let o=t.XPromise.create((o,n)=>{let i=t.ModuleManager.getModuleDef(e.getName());if(t.isNull(i)){i=t.ModuleManager.registerLibrary(e.getName(),e.getName(),e.getManifest().getUrl())}if(t.notNull(i)){this.getLogger().logDebug(t.XStringUtils.concatenate2("Loading plugin library: ",e.getName()));let n=t.XList.create();n.add(i.getName());this._getKernel().processMultiModulesLoad(t.SyncType.NON_BLOCKING,t.LambdaModuleLoadedMultiListener.create((n,i)=>{this.getLogger().logDebug(t.XStringUtils.concatenate4("Plugin library ",e.getManifest().getName()," successfully loaded from: ",e.getManifest().getUrl()));o(t.XBooleanValue.create(true))}),null,n)}else{this.logDebug(t.XStringUtils.concatenate2("Library not found: ",e.getName()));o(t.XBooleanValue.create(true))}});return o};t.HuPluginLoader.prototype._setupToolsContext=function(){this.m_modulesInProgressList=t.XList.create()};t.HuPluginLoader.prototype.getLogContextName=function(){return"Plugin Loader"};t.HuPluginLoader.prototype.loadPlugin=function(e,o){if(o.isPluginLoaded()){this.logDebug(t.XStringUtils.concatenate2("Plugin already loaded: ",o.getName()));return t.XPromise.resolve(t.XBooleanValue.create(true))}if(o.canLoadLibraryByUrl()){return this._loadPluginLibrary(o)}else{return t.HuBaseUtils.loadPluginDependencies(o,e,this)}};t.HuPluginLoader.prototype.releaseObject=function(){this.m_modulesInProgressList.clear();this.m_modulesInProgressList=t.XObjectExt.release(this.m_modulesInProgressList);t.HuDfHorizonToolsContext.prototype.releaseObject.call(this)};t.HuDfHorizonProcessor=function(){};t.HuDfHorizonProcessor.prototype=new t.HuDfHorizonToolsContext;t.HuDfHorizonProcessor.prototype._ff_c="HuDfHorizonProcessor";t.HuDfHorizonProcessor.prototype._setupToolsContext=function(){this._setupProcessor()};t.HuDfHorizonProcessor.prototype.getLogContextName=function(){return this._getProcessorName()};t.HuDfHorizonProcessor.prototype.releaseObject=function(){t.HuDfHorizonToolsContext.prototype.releaseObject.call(this)};t.HuDfMainControllerContext=function(){};t.HuDfMainControllerContext.prototype=new t.HuDfHorizonToolsContext;t.HuDfMainControllerContext.prototype._ff_c="HuDfMainControllerContext";t.HuDfMainControllerContext.prototype.m_mainController=null;t.HuDfMainControllerContext.prototype._setupToolsContext=function(){this._setupMainControllerContext()};t.HuDfMainControllerContext.prototype._setupWithMainController=function(e){this.m_mainController=e;if(t.isNull(this.m_mainController)){throw t.XException.createRuntimeException("Missing main controller! A main controller is required for this object!")}this._setupWithToolsContext(e)};t.HuDfMainControllerContext.prototype.getMainController=function(){return this.m_mainController};t.HuDfMainControllerContext.prototype.releaseObject=function(){this.m_mainController=null;t.HuDfHorizonToolsContext.prototype.releaseObject.call(this)};t.HuWorkspaceItemPosition=function(){};t.HuWorkspaceItemPosition.prototype=new t.XConstant;t.HuWorkspaceItemPosition.prototype._ff_c="HuWorkspaceItemPosition";t.HuWorkspaceItemPosition.HEADER=null;t.HuWorkspaceItemPosition.MAIN=null;t.HuWorkspaceItemPosition.SIDE=null;t.HuWorkspaceItemPosition.WIDGETS=null;t.HuWorkspaceItemPosition.s_lookup=null;t.HuWorkspaceItemPosition._createExt=function(e){let o=t.XConstant.setupName(new t.HuWorkspaceItemPosition,e);t.HuWorkspaceItemPosition.s_lookup.put(e,o);return o};t.HuWorkspaceItemPosition.getAllPositions=function(){return t.HuWorkspaceItemPosition.s_lookup.getValuesAsReadOnlyList()};t.HuWorkspaceItemPosition.lookup=function(e){return t.HuWorkspaceItemPosition.s_lookup.getByKey(e)};t.HuWorkspaceItemPosition.staticSetup=function(){if(t.isNull(t.HuWorkspaceItemPosition.s_lookup)){t.HuWorkspaceItemPosition.s_lookup=t.XHashMapByString.create();t.HuWorkspaceItemPosition.HEADER=t.HuWorkspaceItemPosition._createExt("header");t.HuWorkspaceItemPosition.WIDGETS=t.HuWorkspaceItemPosition._createExt("widgets");t.HuWorkspaceItemPosition.MAIN=t.HuWorkspaceItemPosition._createExt("main");t.HuWorkspaceItemPosition.SIDE=t.HuWorkspaceItemPosition._createExt("side")}};t.HuActivityIndicatorBootScreenView=function(){};t.HuActivityIndicatorBootScreenView.prototype=new t.HuDfBootScreenView;t.HuActivityIndicatorBootScreenView.prototype._ff_c="HuActivityIndicatorBootScreenView";t.HuActivityIndicatorBootScreenView.create=function(e){let o=new t.HuActivityIndicatorBootScreenView;o.initView(e);return o};t.HuActivityIndicatorBootScreenView.prototype.destroyView=function(){};t.HuActivityIndicatorBootScreenView.prototype.layoutView=function(e){e.setDirection(t.UiFlexDirection.COLUMN);e.useMaxSpace();e.setAlignItems(t.UiFlexAlignItems.CENTER);e.setJustifyContent(t.UiFlexJustifyContent.CENTER);e.addNewItemOfType(t.UiType.ACTIVITY_INDICATOR)};t.HuActivityIndicatorBootScreenView.prototype.setCurrentPercentValue=function(t){};t.HuActivityIndicatorBootScreenView.prototype.setCurrentStatusText=function(t){};t.HuActivityIndicatorBootScreenView.prototype.setErrorMessage=function(e){this.getView().clearItems();let o=this.getView().addNewItemOfType(t.UiType.MESSAGE_STRIP);o.setMessageType(t.UiMessageType.ERROR);o.setText(e)};t.HuSplashBootScreenView=function(){};t.HuSplashBootScreenView.prototype=new t.HuDfBootScreenView;t.HuSplashBootScreenView.prototype._ff_c="HuSplashBootScreenView";t.HuSplashBootScreenView.create=function(e,o){let n=new t.HuSplashBootScreenView;n._setSplashScreenImagePath(o);n.initView(e);return n};t.HuSplashBootScreenView.prototype.m_currentBootActionLbl=null;t.HuSplashBootScreenView.prototype.m_splashImage=null;t.HuSplashBootScreenView.prototype.m_splashImagePath=null;t.HuSplashBootScreenView.prototype.m_splashMessageStrip=null;t.HuSplashBootScreenView.prototype.m_splashProgressIndicator=null;t.HuSplashBootScreenView.prototype._setSplashScreenImagePath=function(e){this.m_splashImagePath=e;if(t.notNull(this.m_splashImage)){this.m_splashImage.setSrc(e)}};t.HuSplashBootScreenView.prototype.destroyView=function(){this.m_splashImage=t.XObjectExt.release(this.m_splashImage);this.m_currentBootActionLbl=t.XObjectExt.release(this.m_currentBootActionLbl);this.m_splashProgressIndicator=t.XObjectExt.release(this.m_splashProgressIndicator);this.m_splashMessageStrip=t.XObjectExt.release(this.m_splashMessageStrip)};t.HuSplashBootScreenView.prototype.layoutView=function(e){e.setDirection(t.UiFlexDirection.COLUMN);e.useMaxSpace();e.setAlignItems(t.UiFlexAlignItems.CENTER);e.setJustifyContent(t.UiFlexJustifyContent.CENTER);this.m_splashImage=e.addNewItemOfType(t.UiType.IMAGE);this.m_splashImage.setSrc(this.m_splashImagePath);this.m_splashImage.useMaxSpace();this.m_splashImage.setImageMode(t.UiImageMode.BACKGROUND);this.m_splashImage.setBackgroundSize("contain");this.m_splashImage.setBackgroundPosition("center");this.m_splashImage.setMargin(t.UiCssBoxEdges.create("1rem 0 0 0"));this.m_splashImage.setMaxWidth(t.UiCssLength.create("512px"));this.m_splashImage.setMaxHeight(t.UiCssLength.create("512px"));this.m_currentBootActionLbl=e.addNewItemOfType(t.UiType.LABEL);this.m_currentBootActionLbl.setTextAlign(t.UiTextAlign.CENTER);this.m_currentBootActionLbl.setFlex("0 0 auto");this.m_currentBootActionLbl.setMargin(t.UiCssBoxEdges.create("1rem 0 0 0"));this.m_currentBootActionLbl.setVisible(false);this.m_currentBootActionLbl.setText("");this.m_splashProgressIndicator=e.addNewItemOfType(t.UiType.PROGRESS_INDICATOR);this.m_splashProgressIndicator.setWidth(t.UiCssLength.create("50%"));this.m_splashProgressIndicator.setMargin(t.UiCssBoxEdges.create("0 0 0.5rem 0"));this.m_splashMessageStrip=e.addNewItemOfType(t.UiType.MESSAGE_STRIP);this.m_splashMessageStrip.setMessageType(t.UiMessageType.ERROR);this.m_splashMessageStrip.setMargin(t.UiCssBoxEdges.create("0 0 1rem 0"));this.m_splashMessageStrip.setShowCloseButton(false);this.m_splashMessageStrip.setVisible(false)};t.HuSplashBootScreenView.prototype.setCurrentPercentValue=function(e){if(t.notNull(this.m_splashProgressIndicator)){this.m_splashProgressIndicator.setPercentValue(e)}};t.HuSplashBootScreenView.prototype.setCurrentStatusText=function(e){if(t.notNull(this.m_currentBootActionLbl)){if(t.XStringUtils.isNotNullAndNotEmpty(e)){this.m_currentBootActionLbl.setVisible(true)}else{this.m_currentBootActionLbl.setVisible(false)}this.m_currentBootActionLbl.setText(e)}};t.HuSplashBootScreenView.prototype.setErrorMessage=function(e){if(t.notNull(this.m_splashMessageStrip)){if(t.XStringUtils.isNotNullAndNotEmpty(e)){this.m_splashMessageStrip.setVisible(true)}else{this.m_splashMessageStrip.setVisible(false)}this.m_splashMessageStrip.setText(e)}};t.HuMessageGroup=function(){};t.HuMessageGroup.prototype=new t.XConstant;t.HuMessageGroup.prototype._ff_c="HuMessageGroup";t.HuMessageGroup.PLUGIN=null;t.HuMessageGroup.SYSTEM=null;t.HuMessageGroup.s_pluginGroups=null;t.HuMessageGroup._createWithName=function(e){let o=t.XConstant.setupName(new t.HuMessageGroup,e);o._setDisplayName(e);return o};t.HuMessageGroup.createForPluginNameIfNecessary=function(e,o){let n=t.HuMessageGroup.s_pluginGroups.getByKey(e);if(t.isNull(n)){n=t.HuMessageGroup._createWithName(e);n._setDisplayName(t.XStringUtils.isNotNullAndNotEmpty(o)?o:e);t.HuMessageGroup.s_pluginGroups.put(e,n)}return t.HuMessageGroup.s_pluginGroups.getByKey(e)};t.HuMessageGroup.staticSetup=function(){t.HuMessageGroup.s_pluginGroups=t.XHashMapByString.create();t.HuMessageGroup.SYSTEM=t.HuMessageGroup._createWithName("System");t.HuMessageGroup.PLUGIN=t.HuMessageGroup._createWithName("Plugin")};t.HuMessageGroup.prototype.m_displayName=null;t.HuMessageGroup.prototype._setDisplayName=function(t){this.m_displayName=t};t.HuMessageGroup.prototype.getDisplayName=function(){return this.m_displayName};t.HuMessageType=function(){};t.HuMessageType.prototype=new t.XConstant;t.HuMessageType.prototype._ff_c="HuMessageType";t.HuMessageType.ERROR=null;t.HuMessageType.INFORMATION=null;t.HuMessageType.SUCCESS=null;t.HuMessageType.WARNING=null;t.HuMessageType._createWithName=function(e){return t.XConstant.setupName(new t.HuMessageType,e)};t.HuMessageType.staticSetup=function(){t.HuMessageType.INFORMATION=t.HuMessageType._createWithName("Information");t.HuMessageType.SUCCESS=t.HuMessageType._createWithName("Success");t.HuMessageType.WARNING=t.HuMessageType._createWithName("Warning");t.HuMessageType.ERROR=t.HuMessageType._createWithName("Error")};t.HuToolbarGroup=function(){};t.HuToolbarGroup.prototype=new t.XConstant;t.HuToolbarGroup.prototype._ff_c="HuToolbarGroup";t.HuToolbarGroup.DEBUG=null;t.HuToolbarGroup.UNGROUPED=null;t.HuToolbarGroup.s_customGroups=null;t.HuToolbarGroup._createWithName=function(e){let o=t.XConstant.setupName(new t.HuToolbarGroup,e);return o};t.HuToolbarGroup.createCustomGroupIfNecessary=function(e){let o=t.HuToolbarGroup.s_customGroups.getByKey(e);if(t.isNull(o)){o=t.HuToolbarGroup._createWithName(e);t.HuToolbarGroup.s_customGroups.put(e,o)}return t.HuToolbarGroup.s_customGroups.getByKey(e)};t.HuToolbarGroup.staticSetup=function(){t.HuToolbarGroup.s_customGroups=t.XHashMapByString.create();t.HuToolbarGroup.DEBUG=t.HuToolbarGroup._createWithName("Debug");t.HuToolbarGroup.UNGROUPED=t.HuToolbarGroup._createWithName("Ungrouped")};t.HuConfigBootAction=function(){};t.HuConfigBootAction.prototype=new t.HuDfHorizonBootAction;t.HuConfigBootAction.prototype._ff_c="HuConfigBootAction";t.HuConfigBootAction.create=function(e){let o=new t.HuConfigBootAction;o._setupWithBootController(e);return o};t.HuConfigBootAction.prototype.m_configFile=null;t.HuConfigBootAction.prototype.m_configFilePath=null;t.HuConfigBootAction.prototype.m_configStr=null;t.HuConfigBootAction.prototype.m_pluginName=null;t.HuConfigBootAction.prototype._applyBootConfig=function(e){if(t.notNull(e)){this.m_configStr=e.getConfigString();this.m_configFilePath=e.getConfigFilePath();this.m_pluginName=e.getPluginName()}};t.HuConfigBootAction.prototype._createConfigFile=function(){return t.XFilePromise.saveContent(this.m_configFile,this._getBootController().getConfigManager().getSaveContent())};t.HuConfigBootAction.prototype._loadConfigJson=function(e){let o=t.XPromise.create((o,n)=>{t.XFilePromise.isExisting(e).onThen(e=>{if(e.getBoolean()){t.XFilePromise.loadJsonStructure(this.m_configFile).onThen(t=>{o(t)}).onCatch(e=>{n(t.XError.create("Cannot read file!").setErrorType(t.HuErrorType.CONFIG_SYNTAX_ERROR))})}else{n(t.XError.create("File does not exist!").setErrorType(t.HuErrorType.CONFIG_FILE_NOT_FOUND))}}).onCatch(e=>{n(t.XError.create(e.getText()).attachCause(e).setErrorType(t.HuErrorType.CONFIG_FILE_NOT_FOUND))})});return o};t.HuConfigBootAction.prototype._parseStringifiedJson=function(e){let o=null;if(t.XStringUtils.isNotNullAndNotEmpty(e)){let n=t.PrUtils.deserialize(e);if(t.notNull(n)&&n.isStructure()){o=n}}return o};t.HuConfigBootAction.prototype._setupAction=function(){this._applyBootConfig(this._getBootController().getBootConfig())};t.HuConfigBootAction.prototype._shouldCreateConfigFileIfNeeded=function(){return this._getBootController().getWorkspaceManager()!==null&&!this._getBootController().getWorkspaceManager().isVirtualWorkspace()&&this._getBootController().getWorkspaceManager().getWorkspaceDirectory()!==null};t.HuConfigBootAction.prototype.executeBootAction=function(){if(this._getBootController().getWorkspaceManager()!==null&&!this._getBootController().getWorkspaceManager().isVirtualWorkspace()&&this._getBootController().getWorkspaceManager().getWorkspaceDirectory()!==null){this.m_configFile=this._getBootController().getWorkspaceManager().getHorizonWorkspaceConfigFile()}if(this._getBootController().getWorkspaceManager()!==null&&this._getBootController().getWorkspaceManager().isVirtualWorkspace()){if(t.XStringUtils.isNotNullAndNotEmpty(this.m_pluginName)){let e=t.HuUtils.generateSinglePluginStartupConfig(this.m_pluginName,null,null);if(t.notNull(e)){this._getBootController().initConfigManager(e);return t.XPromise.resolve(t.XBooleanValue.create(true))}}else if(t.XStringUtils.isNotNullAndNotEmpty(this.m_configStr)){let e=this._parseStringifiedJson(this.m_configStr);if(t.notNull(e)){this._getBootController().initConfigManager(e);return t.XPromise.resolve(t.XBooleanValue.create(true))}}}if(t.isNull(this.m_configFile)&&this._getBootController().getWorkspaceManager()!==null&&t.XStringUtils.isNotNullAndNotEmpty(this.m_configFilePath)){this.m_configFile=t.XFile.createWithVars(this._getBootController().getProcess(),this.m_configFilePath)}let e=t.XPromise.create((e,o)=>{this._loadConfigJson(this.m_configFile).onThen(o=>{this._getBootController().initConfigManager(o);e(t.XBooleanValue.create(true))}).onCatch(n=>{if(n.getErrorType()===t.HuErrorType.CONFIG_SYNTAX_ERROR){o(t.XError.create("Syntax error! Could not read configuration file!"))}else{this._getBootController().initConfigManager(null);if(n.getErrorType()===t.HuErrorType.CONFIG_FILE_NOT_FOUND&&this._shouldCreateConfigFileIfNeeded()){this._createConfigFile().onFinally(()=>{e(t.XBooleanValue.create(true))})}else{e(t.XBooleanValue.create(true))}}})});return e};t.HuConfigBootAction.prototype.getActionName=function(){return"Config"};t.HuConfigBootAction.prototype.releaseObject=function(){this.m_configFile=t.XObjectExt.release(this.m_configFile);t.HuDfHorizonBootAction.prototype.releaseObject.call(this)};t.HuFinalizeSetupBootAction=function(){};t.HuFinalizeSetupBootAction.prototype=new t.HuDfHorizonBootAction;t.HuFinalizeSetupBootAction.prototype._ff_c="HuFinalizeSetupBootAction";t.HuFinalizeSetupBootAction.create=function(e){let o=new t.HuFinalizeSetupBootAction;o._setupWithBootController(e);return o};t.HuFinalizeSetupBootAction.prototype._setupAction=function(){};t.HuFinalizeSetupBootAction.prototype.executeBootAction=function(){return this._getBootController().finalizeMainControllerSetup()};t.HuFinalizeSetupBootAction.prototype.getActionName=function(){return"FinalizeSetup"};t.HuPluginsManifestLoadBootAction=function(){};t.HuPluginsManifestLoadBootAction.prototype=new t.HuDfHorizonBootAction;t.HuPluginsManifestLoadBootAction.prototype._ff_c="HuPluginsManifestLoadBootAction";t.HuPluginsManifestLoadBootAction.create=function(e){let o=new t.HuPluginsManifestLoadBootAction;o._setupWithBootController(e);return o};t.HuPluginsManifestLoadBootAction.prototype.m_pluginManifestProcessingMode=null;t.HuPluginsManifestLoadBootAction.prototype._getPluginManifestDirectoryList=function(){let e=t.XList.create();e.add(t.XFile.createWithVars(this._getBootController().getProcess(),t.HuHorizonConstants.DEFAULT_PLUGIN_DIRECTORY));e.add(t.XFile.createWithVars(this._getBootController().getProcess(),t.HuHorizonConstants.ALT_PLUGIN_DIRECTORY));t.XCollectionUtils.forEach(this._getBootController().getConfigManager().getHorizonConfiguration().getPluginDirectories(),o=>{e.add(t.XFile.createWithVars(this._getBootController().getProcess(),o))});return e};t.HuPluginsManifestLoadBootAction.prototype._loadPluginManifests=function(){this.logDebug(t.XStringUtils.concatenate2("Plugin manifest processing mode: ",this.m_pluginManifestProcessingMode.getName()));let e=t.XPromise.create((e,o)=>{t.HuPluginRegistryBase.loadApiPlugins();if(this.m_pluginManifestProcessingMode===t.HuPluginManifestProcessingMode.DISABLED){e(t.XBooleanValue.create(true))}else{let o=t.HuPluginManifestProcessor.create(this);let n=t.XPromiseList.create();if(this.m_pluginManifestProcessingMode===t.HuPluginManifestProcessingMode.CUSTOM||this.m_pluginManifestProcessingMode===t.HuPluginManifestProcessingMode.FULL){n.add(o.processPluginManifestFiles(this._parseCustomPluginManifestFilesToProcess()))}if(t.isNull(this.m_pluginManifestProcessingMode)||this.m_pluginManifestProcessingMode===t.HuPluginManifestProcessingMode.DEFAULT||this.m_pluginManifestProcessingMode===t.HuPluginManifestProcessingMode.FULL){n.add(o.processPluginManifestDirectories(this._getPluginManifestDirectoryList()))}let i=t.XPromise.allSettled(n);i.onFinally(()=>{e(t.XBooleanValue.create(true))})}});return e};t.HuPluginsManifestLoadBootAction.prototype._parseCustomPluginManifestFilesToProcess=function(){let e=t.XList.create();let o=this.getProcess().getEnvironment().getStringByKey(t.HuHorizonConstants.CUSTOM_PLUGIN_MANIFESTS_TO_PROCESS_ENV_VARIABLE);let n=t.XStringTokenizer.splitString(o,",");if(t.XCollectionUtils.hasElements(n)){t.XCollectionUtils.forEach(n,o=>{let n=t.XString.trim(o);let i=t.XFileUtils.hasFileExtension(n);let r=t.XString.lastIndexOf(n,t.XUri.PATH_SEPARATOR)!==-1;if(!i&&!r&&t.HuPluginRegistryBase.hasManifest(n)){return}if(!i){n=t.XStringUtils.concatenate2(n,t.HuHorizonConstants.DEFAULT_PLUGIN_MANIFEST_EXTENSION)}if(!r){n=t.XStringUtils.concatenate3(t.HuHorizonConstants.DEFAULT_PLUGIN_DIRECTORY,t.XUri.PATH_SEPARATOR,n)}e.add(t.XFile.create(this.getProcess(),n))})}return e};t.HuPluginsManifestLoadBootAction.prototype._setupAction=function(){this.m_pluginManifestProcessingMode=t.HuPluginManifestProcessingMode.lookup(this.getProcess().getEnvironment().getStringByKey(t.HuHorizonConstants.PLUGIN_MANIFEST_PROCESSING_MODE_ENV_VARIABLE));if(t.isNull(this.m_pluginManifestProcessingMode)){this.m_pluginManifestProcessingMode=t.HuPluginManifestProcessingMode.DEFAULT}this.logDebug(t.XStringUtils.concatenate2("Number of registered plugins: ",t.XInteger.convertToString(t.HuPluginRegistryBase.getAllLoadedPluginNames().size())))};t.HuPluginsManifestLoadBootAction.prototype.executeBootAction=function(){return this._loadPluginManifests()};t.HuPluginsManifestLoadBootAction.prototype.getActionName=function(){return"Plugins Manifest Load"};t.HuPluginsManifestLoadBootAction.prototype.releaseObject=function(){this.m_pluginManifestProcessingMode=null;t.HuDfHorizonBootAction.prototype.releaseObject.call(this)};t.HuPluginsModuleLoadBootAction=function(){};t.HuPluginsModuleLoadBootAction.prototype=new t.HuDfHorizonBootAction;t.HuPluginsModuleLoadBootAction.prototype._ff_c="HuPluginsModuleLoadBootAction";t.HuPluginsModuleLoadBootAction.create=function(e){let o=new t.HuPluginsModuleLoadBootAction;o._setupWithBootController(e);return o};t.HuPluginsModuleLoadBootAction.prototype.m_pluginLoader=null;t.HuPluginsModuleLoadBootAction.prototype._getPluginLoader=function(){return this.m_pluginLoader};t.HuPluginsModuleLoadBootAction.prototype._loadPlugins=function(){let e=this._getBootController().getConfigManager().getPluginsConfiguration().getAllStartupPlugins();if(!t.XCollectionUtils.hasElements(e)){this.logDebug("No plugins in configuration specified!");return t.XPromise.resolve(t.XBooleanValue.create(true))}this.logDebug(t.XStringUtils.concatenate2("Configuration plugins: ",t.XCollectionUtils.join(e,",")));let o=t.XPromiseList.create();t.XCollectionUtils.forEach(e,t=>{o.add(this._processPluginLoad(t))});let n=t.XPromise.allSettled(o);return n.onThenExt(e=>t.XBooleanValue.create(true))};t.HuPluginsModuleLoadBootAction.prototype._processPluginLoad=function(e){let o=t.XPromise.create((o,n)=>{if(!t.HuPluginRegistryBase.isPluginLoaded(e)){if(t.HuPluginRegistryBase.hasManifest(e)){this.logDebug(t.XStringUtils.concatenate2(e," plugin not loaded, attempting to load..."));let n=t.HuPluginRegistryBase.getPluginFactory(e);this._getPluginLoader().loadPlugin(this.getProcess(),n).onFinally(()=>{o(t.XBooleanValue.create(true))})}else{this.logDebug(t.XStringUtils.concatenate3("!!!! ",e,", Plugin manifest not found,cannot load!"));n(t.XError.create("Plugin manifest not found!"))}}else{this.logDebug(t.XStringUtils.concatenate2("Plugin already loaded -> ",e));o(t.XBooleanValue.create(true))}});return o};t.HuPluginsModuleLoadBootAction.prototype._setupAction=function(){this.m_pluginLoader=t.HuPluginLoader.create(this)};t.HuPluginsModuleLoadBootAction.prototype.executeBootAction=function(){return this._loadPlugins().onThen(e=>{t.HuPluginRegistryBase.loadApiPlugins()})};t.HuPluginsModuleLoadBootAction.prototype.getActionName=function(){return"Plugins Module Load"};t.HuPluginsModuleLoadBootAction.prototype.releaseObject=function(){this.m_pluginLoader=t.XObjectExt.release(this.m_pluginLoader);t.HuDfHorizonBootAction.prototype.releaseObject.call(this)};t.HuWorkspaceBootAction=function(){};t.HuWorkspaceBootAction.prototype=new t.HuDfHorizonBootAction;t.HuWorkspaceBootAction.prototype._ff_c="HuWorkspaceBootAction";t.HuWorkspaceBootAction.create=function(e){let o=new t.HuWorkspaceBootAction;o._setupWithBootController(e);return o};t.HuWorkspaceBootAction.prototype._executeBootConfigSpecifiedWorkspaceLoad=function(e){let o=t.XPromise.create((o,n)=>{let i=t.XFile.createWithVars(this._getBootController().getProcess(),e);t.XFilePromise.isExisting(i).onThen(e=>{if(e.getBoolean()){this._handleDirectorySelected(i,false).onThen(e=>{o(t.XBooleanValue.create(true))}).onCatch(n)}else{n(t.XError.create("The specified workspace directory does not exist!"))}}).onCatch(n)});return o};t.HuWorkspaceBootAction.prototype._executeDefaultWorkspaceLoad=function(){return this._selectWorkspace().onThenPromise(e=>{if(t.isNull(e)){throw t.XException.createException("No workspace selected! Cannot continue!")}return this._handleDirectorySelected(e,true)})};t.HuWorkspaceBootAction.prototype._executeVirtualWorkspaceLoad=function(){return this._handleDirectorySelected(null,false)};t.HuWorkspaceBootAction.prototype._handleDirectorySelected=function(t,e){if(e){this._saveSelectedWorspaceDirPath(t)}return this._getBootController().initWorkspaceManager(t)};t.HuWorkspaceBootAction.prototype._saveSelectedWorspaceDirPath=function(e){if(t.notNull(e)){let o=e.getUri().getPath();this._getBootController().getLocalStorage().putString(t.HuHorizonConstants.SELECTED_WORKSPACE_PATH_KEY,o)}};t.HuWorkspaceBootAction.prototype._selectWorkspace=function(){let e=this._getBootController().getLocalStorage().getStringByKey(t.HuHorizonConstants.SELECTED_WORKSPACE_PATH_KEY);if(t.XStringUtils.isNotNullAndNotEmpty(e)){let o=t.XPromise.create((o,n)=>{let i=t.XFile.createWithVars(this._getBootController().getProcess(),e);t.XFilePromise.isExisting(i).onThen(t=>{if(t.getBoolean()){o(i)}else{this.logDebug("Saved workspace does not exist!");this._showWorkspaceSelectionDialog().onThen(t=>{o(t)}).onCatch(n)}}).onCatch(n)});return o}return this._showWorkspaceSelectionDialog()};t.HuWorkspaceBootAction.prototype._setupAction=function(){};t.HuWorkspaceBootAction.prototype._showWorkspaceSelectionDialog=function(){let e=t.XPromise.create((e,o)=>{let n=t.HuWorkspaceSelectionPopup.create(this._getBootController());if(this._getBootController().getWorkspaceManager()!==null&&this._getBootController().getWorkspaceManager().getWorkspaceDirectory()!==null){n.setInputValue(this._getBootController().getWorkspaceManager().getWorkspaceDirectory().getUri().getPath())}else{n.setInputValue(t.HuHorizonConstants.DEFAULT_HOME_DIRECTORY)}n.setInputConsumer(n=>{if(t.XStringUtils.isNotNullAndNotEmpty(n)){let o=t.XFile.createWithVars(this._getBootController().getProcess(),n);e(o)}else{o(t.XError.create("Invalid directory path!"))}});n.setCancelProcedure(()=>{o(t.XError.create("Please specify a workspace to proceed!"))});n.open()});return e};t.HuWorkspaceBootAction.prototype.executeBootAction=function(){if(this._getBootController().getBootConfig().shouldBootIntoVirtualWorkspace()){return this._executeVirtualWorkspaceLoad()}else if(t.XStringUtils.isNotNullAndNotEmpty(this._getBootController().getBootConfig().getWorkspaceDirectoryPath())){return this._executeBootConfigSpecifiedWorkspaceLoad(this._getBootController().getBootConfig().getWorkspaceDirectoryPath())}return this._executeDefaultWorkspaceLoad()};t.HuWorkspaceBootAction.prototype.getActionName=function(){return"Workspace"};t.HuWorkspaceBootAction.prototype.presentWorkspaceDirectorySelection=function(){return this._showWorkspaceSelectionDialog()};t.HuWorkspaceBootAction.prototype.releaseObject=function(){t.HuDfHorizonBootAction.prototype.releaseObject.call(this)};t.HuWorkspaceBootAction.prototype.switchWorkspace=function(t){return this._handleDirectorySelected(t,true)};t.HuPluginManifestProcessingMode=function(){};t.HuPluginManifestProcessingMode.prototype=new t.UiBaseConstant;t.HuPluginManifestProcessingMode.prototype._ff_c="HuPluginManifestProcessingMode";t.HuPluginManifestProcessingMode.CUSTOM=null;t.HuPluginManifestProcessingMode.DEFAULT=null;t.HuPluginManifestProcessingMode.DISABLED=null;t.HuPluginManifestProcessingMode.FULL=null;t.HuPluginManifestProcessingMode.s_lookup=null;t.HuPluginManifestProcessingMode._createWithName=function(e){return t.UiBaseConstant.createUiConstant(new t.HuPluginManifestProcessingMode,e,t.HuPluginManifestProcessingMode.s_lookup)};t.HuPluginManifestProcessingMode.lookup=function(e){return t.UiBaseConstant.lookupConstant(e,t.HuPluginManifestProcessingMode.s_lookup)};t.HuPluginManifestProcessingMode.staticSetup=function(){t.HuPluginManifestProcessingMode.s_lookup=t.XHashMapByString.create();t.HuPluginManifestProcessingMode.FULL=t.HuPluginManifestProcessingMode._createWithName("Full");t.HuPluginManifestProcessingMode.DEFAULT=t.HuPluginManifestProcessingMode._createWithName("Default");t.HuPluginManifestProcessingMode.CUSTOM=t.HuPluginManifestProcessingMode._createWithName("Custom");t.HuPluginManifestProcessingMode.DISABLED=t.HuPluginManifestProcessingMode._createWithName("Disabled")};t.HuDataSpace=function(){};t.HuDataSpace.prototype=new t.DfDataSpace;t.HuDataSpace.prototype._ff_c="HuDataSpace";t.HuDataSpace.create=function(){let e=new t.HuDataSpace;e._setupDataSpace();return e};t.HuDataSpace.prototype.m_keyObserverMap=null;t.HuDataSpace.prototype._setupDataSpace=function(){this.m_keyObserverMap=t.XHashMapByString.create();this.setup()};t.HuDataSpace.prototype.addKeyObserver=function(e,o){if(t.XStringUtils.isNotNullAndNotEmpty(e)&&t.notNull(o)){if(!this.m_keyObserverMap.containsKey(e)){this.m_keyObserverMap.put(e,t.XHashMapByString.create())}let n=t.XGuid.getGuid();n=t.XStringUtils.concatenate4("dsObserver_",e,"_",n);this.m_keyObserverMap.getByKey(e).put(n,t.XProcedureHolder.create(o));return n}return null};t.HuDataSpace.prototype.dataForKeyChanged=function(e){let o=this.m_keyObserverMap.getByKey(e);if(t.notNull(o)&&o.size()>0){t.XCollectionUtils.forEach(o.getValuesAsReadOnlyList(),t=>{t.execute()})}};t.HuDataSpace.prototype.releaseObject=function(){this.m_keyObserverMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_keyObserverMap);t.DfDataSpace.prototype.releaseObject.call(this)};t.HuDataSpace.prototype.removeKeyObserver=function(e){t.XCollectionUtils.forEach(this.m_keyObserverMap.getValuesAsReadOnlyList(),o=>{t.XCollectionUtils.removeFromMapIf(o,(t,o)=>o.getProcedure()===e)})};t.HuDataSpace.prototype.removeKeyObserverByUuid=function(e){t.XCollectionUtils.forEach(this.m_keyObserverMap,t=>{if(t.containsKey(e)){t.remove(e)}})};t.HuDfHorizonPluginManager=function(){};t.HuDfHorizonPluginManager.prototype=new t.HuDfHorizonManager;t.HuDfHorizonPluginManager.prototype._ff_c="HuDfHorizonPluginManager";t.HuDfHorizonPluginManager.prototype.m_pluginParentController=null;t.HuDfHorizonPluginManager.prototype.m_runningPlugins=null;t.HuDfHorizonPluginManager.prototype._getPluginParentController=function(){return this.m_pluginParentController};t.HuDfHorizonPluginManager.prototype._onBeforePluginInit=function(e){if(t.notNull(e)){this.logDebug(t.XStringUtils.concatenate3("Initializing plugin --\x3e ",e.getPluginName()," ---------------------------------"))}};t.HuDfHorizonPluginManager.prototype._runPlugin=function(e){if(t.notNull(e)){this.logDebug(t.XStringUtils.concatenate3("Running plugin --\x3e ",e.getName()," ---------------------------------"));return e.run().onThenExt(t=>{this.m_runningPlugins.put(e.getUuid(),e);return e}).onCatch(t=>{this.m_runningPlugins.remove(e.getUuid())})}return t.XPromise.reject(t.XError.create("Missing plugin controller! Cannot run!"))};t.HuDfHorizonPluginManager.prototype._setupManager=function(){this.m_runningPlugins=t.XHashMapByString.create();this._setupPluginManager()};t.HuDfHorizonPluginManager.prototype._setupWithParentController=function(e){this.m_pluginParentController=e;if(t.isNull(this.m_pluginParentController)){throw t.XException.createRuntimeException("Missing parent controller! A parent controller is required for a plugin manager!")}this._setupWithGenericController(e)};t.HuDfHorizonPluginManager.prototype.getAllRunningPlugins=function(){return this.m_runningPlugins.getValuesAsReadOnlyList()};t.HuDfHorizonPluginManager.prototype.getPluginByUuid=function(t){return this.m_runningPlugins.getByKey(t)};t.HuDfHorizonPluginManager.prototype.killPluginByUuid=function(t){if(this.m_runningPlugins.containsKey(t)){let e=this.m_runningPlugins.getByKey(t);this.m_runningPlugins.remove(t);e.kill();return true}return false};t.HuDfHorizonPluginManager.prototype.releaseObject=function(){this.m_runningPlugins=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_runningPlugins);t.HuDfHorizonManager.prototype.releaseObject.call(this)};t.HuDfViewPluginController=function(){};t.HuDfViewPluginController.prototype=new t.HuDfHorizonPluginController;t.HuDfViewPluginController.prototype._ff_c="HuDfViewPluginController";t.HuDfViewPluginController.prototype.m_pluginGenesis=null;t.HuDfViewPluginController.prototype.m_pluginTitle=null;t.HuDfViewPluginController.prototype.m_viewPluginWrapper=null;t.HuDfViewPluginController.prototype._destroySpecificPlugin=function(){this._destroySpecificViewPlugin();this.m_viewPluginWrapper=t.XObjectExt.release(this.m_viewPluginWrapper);this.m_pluginGenesis=t.XObjectExt.release(this.m_pluginGenesis)};t.HuDfViewPluginController.prototype._getPluginGenesis=function(){return this.m_pluginGenesis};t.HuDfViewPluginController.prototype._getViewPluginInstance=function(){try{return this._getPluginInstance()}catch(t){this._throwInvalidPluginTypeException()}return null};t.HuDfViewPluginController.prototype._initSpecificPlugin=function(e){let o=this._getParentController().getMainController().getGenesis();if(t.isNull(o)){throw t.XException.createRuntimeException("Missing genesis! Cannot create view plugin!")}this.m_viewPluginWrapper=o.newControl(t.UiType.CONTENT_WRAPPER);this.m_viewPluginWrapper.useMaxSpace();let n=t.UiGenesis.create(this.m_viewPluginWrapper);this.m_pluginGenesis=n;this._initSpecificViewPlugin()};t.HuDfViewPluginController.prototype._setPluginUiBusy=function(t){if(this.getPluginWrapperView()!==null){this.getPluginWrapperView().setBusy(t)}};t.HuDfViewPluginController.prototype.getPluginTitle=function(){return this.m_pluginTitle};t.HuDfViewPluginController.prototype.getPluginWrapperView=function(){return this.m_viewPluginWrapper};t.HuDfViewPluginController.prototype.getView=function(){return this.getPluginWrapperView()};t.HuDfViewPluginController.prototype.onPluginContainerDidBecameHidden=function(){try{this._getViewPluginInstance().didBecameHidden()}catch(t){this.logDebug("Missing didBecameHidden method on the plugin instance!")}};t.HuDfViewPluginController.prototype.onPluginContainerDidBecameVisible=function(){try{this._getViewPluginInstance().didBecameVisible()}catch(t){this.logDebug("Missing didBecameVisible method on the plugin instance!")}};t.HuDfViewPluginController.prototype.onPluginContainerResize=function(t,e){try{this._getViewPluginInstance().onResize(t,e)}catch(t){this.logDebug("Missing onResize method on the plugin instance!")}};t.HuDfViewPluginController.prototype.setBusy=function(t){this._setPluginUiBusy(t)};t.HuDfViewPluginController.prototype.setPluginTitle=function(t){this.m_pluginTitle=t};t.HuCommandPluginController=function(){};t.HuCommandPluginController.prototype=new t.HuDfHorizonPluginController;t.HuCommandPluginController.prototype._ff_c="HuCommandPluginController";t.HuCommandPluginController.prototype.m_actionMap=null;t.HuCommandPluginController.prototype._destroySpecificPlugin=function(){this.m_actionMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_actionMap)};t.HuCommandPluginController.prototype._getCommandPluginInstance=function(){try{return this._getPluginInstance()}catch(t){this._throwInvalidPluginTypeException()}return null};t.HuCommandPluginController.prototype._initSpecificPlugin=function(e){this.m_actionMap=t.XHashMapByString.create()};t.HuCommandPluginController.prototype._postTestNotificationIfNecessary=function(e,o,n){if(this.isTestModeActive()){let i=t.XNotificationData.create();i.putXObject(t.HuHorizonInternalNotifications.TEST_ACTION_NOTIFICATION_DATA_KEY_CONTEXT,o);i.putXObject(t.HuHorizonInternalNotifications.TEST_ACTION_NOTIFICATION_DATA_KEY_CUSTOM_DATA,n);let r=t.XStringUtils.concatenate4(t.HuHorizonInternalNotifications.TEST_ACTION_NOTIFICATION_PREFIX,this.getCommandSpaceName(),".",e);this.getLocalNotificationCenter().postNotificationWithName(r,i)}};t.HuCommandPluginController.prototype._runSpecificPlugin=function(){this._getCommandPluginInstance().registerActions(this)};t.HuCommandPluginController.prototype._setPluginUiBusy=function(t){};t.HuCommandPluginController.prototype._setupSpecificPlugin=function(){return this._getCommandPluginInstance().setupPlugin(this)};t.HuCommandPluginController.prototype.executeCommandSpaceAction=function(e,o,n){let i=this.m_actionMap.getByKey(e);if(t.notNull(i)){this._postTestNotificationIfNecessary(e,o,n);return i.apply(o,n)}return null};t.HuCommandPluginController.prototype.getAllActionNames=function(){return this.m_actionMap.getKeysAsReadOnlyList()};t.HuCommandPluginController.prototype.getCommandSpaceName=function(){return this.getName()};t.HuCommandPluginController.prototype.getFreeGenesis=function(){return this.getMainController().getUiController().getFreeGenesis()};t.HuCommandPluginController.prototype.getPluginType=function(){return t.HuPluginType.COMMAND};t.HuCommandPluginController.prototype.hasAction=function(t){return this.m_actionMap.containsKey(t)};t.HuCommandPluginController.prototype.registerAction=function(e,o){this.m_actionMap.put(e,t.XBiFunctionHolder.create(o))};t.HuDfHorizonService=function(){};t.HuDfHorizonService.prototype=new t.HuDfMainControllerContext;t.HuDfHorizonService.prototype._ff_c="HuDfHorizonService";t.HuDfHorizonService.prototype._setupMainControllerContext=function(){this._setupService()};t.HuDfHorizonService.prototype.getLogContextName=function(){return this._getServiceName()};t.HuDfHorizonService.prototype.releaseObject=function(){t.HuDfMainControllerContext.prototype.releaseObject.call(this)};t.HuPluginDataStorage=function(){};t.HuPluginDataStorage.prototype=new t.HuDfHorizonLogContext;t.HuPluginDataStorage.prototype._ff_c="HuPluginDataStorage";t.HuPluginDataStorage.AUTO_FLUSH_TIMEOUT=300;t.HuPluginDataStorage.DATA_STORAGE_KEY="V2hlbiBpdCBjb21waWxlcywgc2hpcCBpdCE=";t.HuPluginDataStorage.create=function(e){let o=new t.HuPluginDataStorage;o._setupLogger(e);return o};t.HuPluginDataStorage.prototype.m_activeTimeoutId=null;t.HuPluginDataStorage.prototype.m_storageFile=null;t.HuPluginDataStorage.prototype.m_structure=null;t.HuPluginDataStorage.prototype._flushDataToDisk=function(){if(t.notNull(this.m_storageFile)){if(t.notNull(this.m_activeTimeoutId)){t.XTimeout.clear(this.m_activeTimeoutId)}this.m_activeTimeoutId=t.XTimeout.timeout(t.HuPluginDataStorage.AUTO_FLUSH_TIMEOUT,()=>{this.logDebug("Auto flushing data to disk!");this.save()})}};t.HuPluginDataStorage.prototype.clear=function(){this.m_structure.clear();this._flushDataToDisk()};t.HuPluginDataStorage.prototype.containsKey=function(t){return this.m_structure.containsKey(t)};t.HuPluginDataStorage.prototype.getBooleanByKey=function(t){return this.m_structure.getBooleanByKey(t)};t.HuPluginDataStorage.prototype.getBooleanByKeyExt=function(t,e){return this.m_structure.getBooleanByKeyExt(t,e)};t.HuPluginDataStorage.prototype.getByKey=function(t){return this.m_structure.getByKey(t)};t.HuPluginDataStorage.prototype.getDoubleByKey=function(t){return this.m_structure.getDoubleByKey(t)};t.HuPluginDataStorage.prototype.getDoubleByKeyExt=function(t,e){return this.m_structure.getDoubleByKeyExt(t,e)};t.HuPluginDataStorage.prototype.getIntegerByKey=function(t){return this.m_structure.getIntegerByKey(t)};t.HuPluginDataStorage.prototype.getIntegerByKeyExt=function(t,e){return this.m_structure.getIntegerByKeyExt(t,e)};t.HuPluginDataStorage.prototype.getKeysAsIterator=function(){return this.m_structure.getKeysAsIterator()};t.HuPluginDataStorage.prototype.getKeysAsReadOnlyList=function(){return this.m_structure.getKeysAsReadOnlyList()};t.HuPluginDataStorage.prototype.getListByKey=function(t){return this.m_structure.getListByKey(t)};t.HuPluginDataStorage.prototype.getListReadOnlyByKey=function(t){return this.getListByKey(t)};t.HuPluginDataStorage.prototype.getLogContextName=function(){return"Plugin Data Storage"};t.HuPluginDataStorage.prototype.getLongByKey=function(t){return this.m_structure.getLongByKey(t)};t.HuPluginDataStorage.prototype.getLongByKeyExt=function(t,e){return this.m_structure.getLongByKeyExt(t,e)};t.HuPluginDataStorage.prototype.getStringByKey=function(t){return this.m_structure.getStringByKey(t)};t.HuPluginDataStorage.prototype.getStringByKeyExt=function(t,e){return this.m_structure.getStringByKeyExt(t,e)};t.HuPluginDataStorage.prototype.getStructureByKey=function(t){return this.m_structure.getStructureByKey(t)};t.HuPluginDataStorage.prototype.getStructureReadOnlyByKey=function(t){return this.getStructureByKey(t)};t.HuPluginDataStorage.prototype.hasElements=function(){return this.m_structure.hasElements()};t.HuPluginDataStorage.prototype.hasNullByKey=function(t){return this.m_structure.hasNullByKey(t)};t.HuPluginDataStorage.prototype.initializeStorage=function(e){this.logDebug("Preparing plugin data storage!");this.m_storageFile=e;if(t.notNull(this.m_storageFile)){return t.XFilePromise.loadJsonStructure(this.m_storageFile).onThenExt(e=>{this.logDebug(t.XStringUtils.concatenate2("Found  plugin data storage file -> ",this.m_storageFile.getUrl()));this.m_structure=e.clone();return t.XBooleanValue.create(true)}).onCatch(e=>{this.logDebug("Plugin data storage file not found!");this.m_structure=t.PrFactory.createStructure()})}this.logDebug("No plugin data storage file found! Data will not be persisted in workspace!");this.m_structure=t.PrFactory.createStructure();return t.XPromise.resolve(t.XBooleanValue.create(false))};t.HuPluginDataStorage.prototype.isEmpty=function(){return this.m_structure.isEmpty()};t.HuPluginDataStorage.prototype.putBoolean=function(t,e){this.m_structure.putBoolean(t,e);this._flushDataToDisk()};t.HuPluginDataStorage.prototype.putDouble=function(t,e){this.m_structure.putDouble(t,e);this._flushDataToDisk()};t.HuPluginDataStorage.prototype.putInteger=function(t,e){this.m_structure.putInteger(t,e);this._flushDataToDisk()};t.HuPluginDataStorage.prototype.putList=function(t,e){this.m_structure.put(t,e);this._flushDataToDisk()};t.HuPluginDataStorage.prototype.putLong=function(t,e){this.m_structure.putLong(t,e);this._flushDataToDisk()};t.HuPluginDataStorage.prototype.putNewList=function(t){let e=this.m_structure.putNewList(t);this._flushDataToDisk();return e};t.HuPluginDataStorage.prototype.putNewStructure=function(t){let e=this.m_structure.putNewStructure(t);this._flushDataToDisk();return e};t.HuPluginDataStorage.prototype.putNull=function(t){this.m_structure.putNull(t);this._flushDataToDisk()};t.HuPluginDataStorage.prototype.putString=function(t,e){this.m_structure.putString(t,e);this._flushDataToDisk()};t.HuPluginDataStorage.prototype.putStringNotNull=function(t,e){this.m_structure.putStringNotNull(t,e);this._flushDataToDisk()};t.HuPluginDataStorage.prototype.putStringNotNullAndNotEmpty=function(t,e){this.m_structure.putStringNotNullAndNotEmpty(t,e);this._flushDataToDisk()};t.HuPluginDataStorage.prototype.putStructure=function(t,e){this.m_structure.put(t,e);this._flushDataToDisk()};t.HuPluginDataStorage.prototype.releaseObject=function(){this.m_structure=t.XObjectExt.release(this.m_structure);this.m_storageFile=null;t.HuDfHorizonLogContext.prototype.releaseObject.call(this)};t.HuPluginDataStorage.prototype.remove=function(t){let e=this.m_structure.remove(t);this._flushDataToDisk();return e};t.HuPluginDataStorage.prototype.save=function(){if(t.notNull(this.m_activeTimeoutId)){t.XTimeout.clear(this.m_activeTimeoutId)}if(t.notNull(this.m_storageFile)){return t.XFilePromise.saveJson(this.m_storageFile,this.m_structure).onThenExt(e=>{this.logDebug("Successfully saved plugin data into storage!");return t.XBooleanValue.create(true)}).onCatch(e=>{this.logDebug(t.XStringUtils.concatenate2("Failed to save plugin data into storage! Error: ",e.getText()))})}return t.XPromise.reject(t.XError.create("Cannot persist data! Virtual workspace active!"))};t.HuPluginDataStorage.prototype.size=function(){return this.m_structure.size()};t.HuDfSubController=function(){};t.HuDfSubController.prototype=new t.HuDfMainControllerContext;t.HuDfSubController.prototype._ff_c="HuDfSubController";t.HuDfSubController.prototype._setupMainControllerContext=function(){this._setupController()};t.HuDfSubController.prototype.getCurrentMode=function(){return this.getMainController().getCurrentFrameworkMode()};t.HuDfSubController.prototype.getDebugUtility=function(){return this.getMainController().getDebugUtility()};t.HuDfSubController.prototype.getGenesis=function(){return this.getMainController().getGenesis()};t.HuDfSubController.prototype.getHorizonConfiguration=function(){return this.getMainController().getConfigurationManager().getHorizonConfiguration()};t.HuDfSubController.prototype.getLogContextName=function(){return this._getControllerName()};t.HuDfSubController.prototype.getMainGenesis=function(){return this.getMainController().getMainGenesis()};t.HuDfSubController.prototype.isRunningInDebugEnvironment=function(){return this.getMainController().isRunningInDebugEnvironment()};t.HuDfSubController.prototype.releaseObject=function(){t.HuDfMainControllerContext.prototype.releaseObject.call(this)};t.HuCarouselLayout=function(){};t.HuCarouselLayout.prototype=new t.HuDfHorizonLayout;t.HuCarouselLayout.prototype._ff_c="HuCarouselLayout";t.HuCarouselLayout.LAYOUT_ARROWS_PLACEMENT="arrowsPlacement";t.HuCarouselLayout.prototype.m_carousel=null;t.HuCarouselLayout.prototype.m_pluginList=null;t.HuCarouselLayout.prototype._handleBeforePageChanged=function(t){this.logDebug("OnBeforePageChanged")};t.HuCarouselLayout.prototype._handlePageChanged=function(e){this.logDebug("OnPageChanged");if(t.notNull(e)){let o=t.XCollectionUtils.findFirst(this.m_pluginList,t=>t.getView()===e.getOldControl());let n=t.XCollectionUtils.findFirst(this.m_pluginList,t=>t.getView()===e.getNewControl());this.notifyPluginBecameHidden(o);this.notifyPluginBecameVisible(n)}};t.HuCarouselLayout.prototype._setupLayout=function(e){this.m_pluginList=t.XList.create();let o=t.UiCarouselArrowsPlacement.lookup(this.getLayoutConfigJson().getStringByKey(t.HuCarouselLayout.LAYOUT_ARROWS_PLACEMENT));if(t.isNull(o)){o=t.UiCarouselArrowsPlacement.PAGE_INDICATOR}this.m_carousel=this.getGenesis().newControl(t.UiType.CAROUSEL);this.m_carousel.useMaxSpace();this.m_carousel.setCarouselArrowsPlacement(o);this.m_carousel.registerOnBeforePageChanged(t.UiLambdaBeforePageChangedListener.create(this._handleBeforePageChanged.bind(this)));this.m_carousel.registerOnPageChanged(t.UiLambdaPageChangedListener.create(this._handlePageChanged.bind(this)))};t.HuCarouselLayout.prototype.addPluginView=function(e){if(t.notNull(e)&&!this.m_pluginList.contains(e)){this.m_carousel.addItem(e.getView());this.m_pluginList.add(e)}};t.HuCarouselLayout.prototype.getLayoutType=function(){return t.HuLayoutType.CAROUSEL};t.HuCarouselLayout.prototype.getView=function(){return this.m_carousel};t.HuCarouselLayout.prototype.isPluginVisible=function(e){if(t.notNull(e)){return e.getView()===this.m_carousel.getActivePage()}return false};t.HuCarouselLayout.prototype.releaseObject=function(){this.m_pluginList.clear();this.m_pluginList=t.XObjectExt.release(this.m_pluginList);this.m_carousel=t.XObjectExt.release(this.m_carousel);t.HuDfHorizonLayout.prototype.releaseObject.call(this)};t.HuCarouselLayout.prototype.removePluginView=function(e){if(t.notNull(e)&&this.m_pluginList.contains(e)){this.m_carousel.removeItem(e.getView());this.m_pluginList.removeElement(e)}};t.HuFlexLayout=function(){};t.HuFlexLayout.prototype=new t.HuDfHorizonLayout;t.HuFlexLayout.prototype._ff_c="HuFlexLayout";t.HuFlexLayout.ITEM_HEIGHT="height";t.HuFlexLayout.ITEM_SIZE="size";t.HuFlexLayout.ITEM_WIDTH="width";t.HuFlexLayout.LAYOUT_DIRECTION="direction";t.HuFlexLayout.MIN_ITEM_SIZE="50px";t.HuFlexLayout.prototype.m_flexLayout=null;t.HuFlexLayout.prototype.m_pluginList=null;t.HuFlexLayout.prototype._configurePluginView=function(e,o){if(t.notNull(e)&&t.notNull(o)&&o.hasElements()){e.setMinWidth(t.UiCssLength.create(t.HuFlexLayout.MIN_ITEM_SIZE));e.setMinHeight(t.UiCssLength.create(t.HuFlexLayout.MIN_ITEM_SIZE));let n=this._getItemSizeFromItemStruct(o);if(t.notNull(n)){if((this.m_flexLayout.getDirection()===t.UiFlexDirection.ROW||this.m_flexLayout.getDirection()===t.UiFlexDirection.ROW_REVERSE)&&n.getWidth()!==null){e.setWidth(n.getWidth())}else if((this.m_flexLayout.getDirection()===t.UiFlexDirection.COLUMN||this.m_flexLayout.getDirection()===t.UiFlexDirection.COLUMN_REVERSE)&&n.getHeight()!==null){e.setHeight(n.getHeight())}}}};t.HuFlexLayout.prototype._getItemSizeFromItemStruct=function(e){let o=t.UiSize.createEmpty();if(e.containsKey(t.HuFlexLayout.ITEM_SIZE)){let n=e.getStringByKey(t.HuFlexLayout.ITEM_SIZE);o.setByCss(n,n)}else{let n=e.getStringByKey(t.HuFlexLayout.ITEM_WIDTH);let i=e.getStringByKey(t.HuFlexLayout.ITEM_HEIGHT);o.setByCss(n,i)}return o};t.HuFlexLayout.prototype._setupLayout=function(e){this.m_pluginList=t.XList.create();let o=t.UiFlexDirection.lookup(this.getLayoutConfigJson().getStringByKey(t.HuFlexLayout.LAYOUT_DIRECTION));this.m_flexLayout=this.getGenesis().newControl(t.UiType.FLEX_LAYOUT);this.m_flexLayout.useMaxSpace();this.m_flexLayout.setWrap(t.UiFlexWrap.NO_WRAP);if(t.notNull(o)){this.m_flexLayout.setDirection(o)}};t.HuFlexLayout.prototype.addPluginView=function(e){if(t.notNull(e)&&!this.m_pluginList.contains(e)){let t=e.getView();this._configurePluginView(t,e.getPluginStartupInfo().getContainerStructure());this.m_flexLayout.addItem(t);this.m_pluginList.add(e)}};t.HuFlexLayout.prototype.getLayoutType=function(){return t.HuLayoutType.FLEX};t.HuFlexLayout.prototype.getView=function(){return this.m_flexLayout};t.HuFlexLayout.prototype.isPluginVisible=function(e){if(t.notNull(e)){return this.m_pluginList.contains(e)}return false};t.HuFlexLayout.prototype.releaseObject=function(){this.m_flexLayout=t.XObjectExt.release(this.m_flexLayout);this.m_pluginList=t.XObjectExt.release(this.m_pluginList);t.HuDfHorizonLayout.prototype.releaseObject.call(this)};t.HuFlexLayout.prototype.removePluginView=function(e){if(t.notNull(e)&&this.m_pluginList.contains(e)){this.m_flexLayout.removeItem(e.getView());this.m_pluginList.removeElement(e)}};t.HuGridLayout=function(){};t.HuGridLayout.prototype=new t.HuDfHorizonLayout;t.HuGridLayout.prototype._ff_c="HuGridLayout";t.HuGridLayout.ITEM_COLUMNS="columns";t.HuGridLayout.ITEM_DEFAULT_COLUMNS=5;t.HuGridLayout.ITEM_DEFAULT_MIN_ROWS=4;t.HuGridLayout.ITEM_MIN_ROWS="minRows";t.HuGridLayout.ITEM_ROWS="rows";t.HuGridLayout.LAYOUT_ALLOW_PLUGIN_DRAG_AND_DROP="allowPluginDragAndDrop";t.HuGridLayout.LAYOUT_COLUMN_SIZE="columnSize";t.HuGridLayout.LAYOUT_DEFAULT_GAP="0.5rem";t.HuGridLayout.LAYOUT_DEFAULT_MAX_COLUMN_SIZE="80px";t.HuGridLayout.LAYOUT_DEFAULT_MIN_COLUMN_SIZE="40px";t.HuGridLayout.LAYOUT_DEFAULT_ROW_SIZE="80px";t.HuGridLayout.LAYOUT_GAP="gap";t.HuGridLayout.LAYOUT_MAX_COLUMN_SIZE="maxColumnSize";t.HuGridLayout.LAYOUT_MIN_COLUMN_SIZE="minColumnSize";t.HuGridLayout.LAYOUT_ROW_SIZE="rowSize";t.HuGridLayout.prototype.m_gridContainer=null;t.HuGridLayout.prototype.m_pluginList=null;t.HuGridLayout.prototype._configurePluginView=function(e,o){if(t.notNull(e)&&t.notNull(o)&&o.hasElements()){if(this._isDragAndDropEnabled()){e.setDraggable(true)}let n=t.UiLayoutData.createGridContainerItem();n.setGridContainerItemColumns(o.getIntegerByKeyExt(t.HuGridLayout.ITEM_COLUMNS,t.HuGridLayout.ITEM_DEFAULT_COLUMNS));n.setGridContainerItemMinRows(o.getIntegerByKeyExt(t.HuGridLayout.ITEM_MIN_ROWS,t.HuGridLayout.ITEM_DEFAULT_MIN_ROWS));if(o.containsKey(t.HuGridLayout.ITEM_ROWS)){n.setGridContainerItemRows(o.getIntegerByKey(t.HuGridLayout.ITEM_ROWS))}e.setLayoutData(n)}};t.HuGridLayout.prototype._handleDrop=function(e){let o=this.m_gridContainer.getIndexOfItem(e.getDraggedControl());let n=this.m_gridContainer.getIndexOfItem(e.getDroppedControl());this.m_gridContainer.removeItem(e.getDraggedControl());if(o<n){o--}if(e.getRelativeDropPosition()===t.UiRelativeDropPosition.AFTER){n++}this.m_gridContainer.insertItem(e.getDraggedControl(),n);this.m_gridContainer.focusIndex(n)};t.HuGridLayout.prototype._isDragAndDropEnabled=function(){return this.getLayoutConfigJson().getBooleanByKeyExt(t.HuGridLayout.LAYOUT_ALLOW_PLUGIN_DRAG_AND_DROP,false)};t.HuGridLayout.prototype._setupLayout=function(e){this.m_pluginList=t.XList.create();let o=t.UiGridContainerSettings.create();if(this.getLayoutConfigJson().containsKey(t.HuGridLayout.LAYOUT_COLUMN_SIZE)){o.setColumnSize(t.UiCssLength.create(this.getLayoutConfigJson().getStringByKey(t.HuGridLayout.LAYOUT_COLUMN_SIZE)))}o.setRowSize(t.UiCssLength.create(this.getLayoutConfigJson().getStringByKeyExt(t.HuGridLayout.LAYOUT_ROW_SIZE,t.HuGridLayout.LAYOUT_DEFAULT_ROW_SIZE)));o.setMinColumnSize(t.UiCssLength.create(this.getLayoutConfigJson().getStringByKeyExt(t.HuGridLayout.LAYOUT_MIN_COLUMN_SIZE,t.HuGridLayout.LAYOUT_DEFAULT_MIN_COLUMN_SIZE)));o.setMaxColumnSize(t.UiCssLength.create(this.getLayoutConfigJson().getStringByKeyExt(t.HuGridLayout.LAYOUT_MAX_COLUMN_SIZE,t.HuGridLayout.LAYOUT_DEFAULT_MAX_COLUMN_SIZE)));o.setGap(t.UiCssLength.create(this.getLayoutConfigJson().getStringByKeyExt(t.HuGridLayout.LAYOUT_GAP,t.HuGridLayout.LAYOUT_DEFAULT_GAP)));this.m_gridContainer=this.getGenesis().newControl(t.UiType.GRID_CONTAINER);this.m_gridContainer.useMaxSpace();this.m_gridContainer.setOverflow(t.UiOverflow.AUTO);this.m_gridContainer.setGridContainerSettings(o);if(this._isDragAndDropEnabled()){this.m_gridContainer.setDropInfo(t.UiDropInfo.create(t.UiDropPosition.BETWEEN,null,t.UiDropLayout.HORIZONTAL,t.UiAggregation.ITEMS));this.m_gridContainer.registerOnDrop(t.UiLambdaDropListener.create(this._handleDrop.bind(this)))}};t.HuGridLayout.prototype.addPluginView=function(e){if(t.notNull(e)&&!this.m_pluginList.contains(e)){let t=e.getView();this._configurePluginView(t,e.getPluginStartupInfo().getContainerStructure());this.m_gridContainer.addItem(t);this.m_pluginList.add(e)}};t.HuGridLayout.prototype.getLayoutType=function(){return t.HuLayoutType.GRID};t.HuGridLayout.prototype.getView=function(){return this.m_gridContainer};t.HuGridLayout.prototype.isPluginVisible=function(e){if(t.notNull(e)){return this.m_pluginList.contains(e)}return false};t.HuGridLayout.prototype.releaseObject=function(){this.m_gridContainer=t.XObjectExt.release(this.m_gridContainer);this.m_pluginList=t.XObjectExt.release(this.m_pluginList);t.HuDfHorizonLayout.prototype.releaseObject.call(this)};t.HuGridLayout.prototype.removePluginView=function(e){if(t.notNull(e)&&this.m_pluginList.contains(e)){this.m_gridContainer.removeItem(e.getView());this.m_pluginList.removeElement(e)}};t.HuInteractiveSplitterLayout=function(){};t.HuInteractiveSplitterLayout.prototype=new t.HuDfHorizonLayout;t.HuInteractiveSplitterLayout.prototype._ff_c="HuInteractiveSplitterLayout";t.HuInteractiveSplitterLayout.ITEM_HEIGHT="height";t.HuInteractiveSplitterLayout.ITEM_SIZE="size";t.HuInteractiveSplitterLayout.ITEM_WIDTH="width";t.HuInteractiveSplitterLayout.LAYOUT_ALLOW_PLUGIN_REORDERING="allowPluginReordering";t.HuInteractiveSplitterLayout.LAYOUT_ORIENTATION="orientation";t.HuInteractiveSplitterLayout.MIN_ITEM_WIDTH="50px";t.HuInteractiveSplitterLayout.prototype.m_mainInteractiveSplitter=null;t.HuInteractiveSplitterLayout.prototype.m_splitterItemMap=null;t.HuInteractiveSplitterLayout.prototype._configurePluginWrapper=function(e,o){if(t.notNull(e)&&t.notNull(o)&&o.hasElements()){let n=this._getItemSizeFromItemStruct(o);if(t.notNull(n)){if(this.m_mainInteractiveSplitter.getOrientation()===t.UiOrientation.HORIZONTAL&&n.getWidth()!==null){e.setWidth(n.getWidth())}else if(this.m_mainInteractiveSplitter.getOrientation()===t.UiOrientation.VERTICAL&&n.getHeight()!==null){e.setHeight(n.getHeight())}}}};t.HuInteractiveSplitterLayout.prototype._createAndAddViewPluginWrapper=function(e){if(t.notNull(e)){let o=this.m_mainInteractiveSplitter.newItem();o.setContent(e.getPluginWrapperView());o.setMinWidth(t.UiCssLength.create(t.HuInteractiveSplitterLayout.MIN_ITEM_WIDTH));o.registerOnResize(t.UiLambdaResizeListener.create(t=>{e.onPluginContainerResize(t.getOffsetWidth(),t.getOffsetHeight())}));this._configurePluginWrapper(o,e.getPluginStartupInfo().getContainerStructure());this.m_mainInteractiveSplitter.addItem(o);return o}return null};t.HuInteractiveSplitterLayout.prototype._getItemSizeFromItemStruct=function(e){let o=t.UiSize.createEmpty();if(e.containsKey(t.HuInteractiveSplitterLayout.ITEM_SIZE)){let n=e.getStringByKey(t.HuInteractiveSplitterLayout.ITEM_SIZE);o.setByCss(n,n)}else{let n=e.getStringByKey(t.HuInteractiveSplitterLayout.ITEM_WIDTH);let i=e.getStringByKey(t.HuInteractiveSplitterLayout.ITEM_HEIGHT);o.setByCss(n,i)}return o};t.HuInteractiveSplitterLayout.prototype._setupLayout=function(e){this.m_splitterItemMap=t.XHashMapByString.create();let o=t.UiOrientation.lookup(this.getLayoutConfigJson().getStringByKey(t.HuInteractiveSplitterLayout.LAYOUT_ORIENTATION));let n=this.getLayoutConfigJson().getBooleanByKeyExt(t.HuInteractiveSplitterLayout.LAYOUT_ALLOW_PLUGIN_REORDERING,false);this.m_mainInteractiveSplitter=this.getGenesis().newControl(t.UiType.INTERACTIVE_SPLITTER);this.m_mainInteractiveSplitter.setOrientation(t.UiOrientation.HORIZONTAL);this.m_mainInteractiveSplitter.setEnableReordering(n);this.m_mainInteractiveSplitter.useMaxSpace();if(t.notNull(o)){this.m_mainInteractiveSplitter.setOrientation(o)}};t.HuInteractiveSplitterLayout.prototype.addPluginView=function(e){if(t.notNull(e)&&!this.m_splitterItemMap.containsKey(e.getUuid())){let t=this._createAndAddViewPluginWrapper(e);this.m_splitterItemMap.put(e.getUuid(),t)}};t.HuInteractiveSplitterLayout.prototype.getLayoutType=function(){return t.HuLayoutType.INTERACTIVE_SPLITTER};t.HuInteractiveSplitterLayout.prototype.getView=function(){return this.m_mainInteractiveSplitter};t.HuInteractiveSplitterLayout.prototype.isPluginVisible=function(e){if(t.notNull(e)){return this.m_splitterItemMap.containsKey(e.getUuid())}return false};t.HuInteractiveSplitterLayout.prototype.releaseObject=function(){this.m_mainInteractiveSplitter=t.XObjectExt.release(this.m_mainInteractiveSplitter);this.m_splitterItemMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_splitterItemMap);t.HuDfHorizonLayout.prototype.releaseObject.call(this)};t.HuInteractiveSplitterLayout.prototype.removePluginView=function(e){if(t.notNull(e)){let o=this.m_splitterItemMap.remove(e.getUuid());if(t.notNull(o)){this.m_mainInteractiveSplitter.removeItem(o);o.setContent(null);t.XObjectExt.release(o)}}};t.HuSinglePluginLayout=function(){};t.HuSinglePluginLayout.prototype=new t.HuDfHorizonLayout;t.HuSinglePluginLayout.prototype._ff_c="HuSinglePluginLayout";t.HuSinglePluginLayout.prototype.m_activePluginUuid=null;t.HuSinglePluginLayout.prototype.m_mainContentWrapper=null;t.HuSinglePluginLayout.prototype._setupLayout=function(e){this.m_mainContentWrapper=this.getGenesis().newControl(t.UiType.CONTENT_WRAPPER);this.m_mainContentWrapper.useMaxSpace()};t.HuSinglePluginLayout.prototype.addPluginView=function(e){if(t.notNull(e)&&t.isNull(this.m_activePluginUuid)){this.m_mainContentWrapper.setContent(e.getPluginWrapperView());this.m_activePluginUuid=e.getUuid()}};t.HuSinglePluginLayout.prototype.getLayoutType=function(){return t.HuLayoutType.SINGLE_PLUGIN};t.HuSinglePluginLayout.prototype.getView=function(){return this.m_mainContentWrapper};t.HuSinglePluginLayout.prototype.isPluginVisible=function(e){if(t.notNull(e)){return t.XString.isEqual(this.m_activePluginUuid,e.getUuid())}return false};t.HuSinglePluginLayout.prototype.releaseObject=function(){this.m_mainContentWrapper=t.XObjectExt.release(this.m_mainContentWrapper);this.m_activePluginUuid=null;t.HuDfHorizonLayout.prototype.releaseObject.call(this)};t.HuSinglePluginLayout.prototype.removePluginView=function(e){if(t.notNull(e)&&this.isPluginVisible(e)){this.m_mainContentWrapper.setContent(null);this.m_activePluginUuid=null}};t.HuTabBarLayout=function(){};t.HuTabBarLayout.prototype=new t.HuDfHorizonLayout;t.HuTabBarLayout.prototype._ff_c="HuTabBarLayout";t.HuTabBarLayout.ITEM_TITLE="title";t.HuTabBarLayout.LAYOUT_ALLOW_TAB_CLOSING="allowTabClosing";t.HuTabBarLayout.prototype.m_pluginList=null;t.HuTabBarLayout.prototype.m_selectedTabBarItem=null;t.HuTabBarLayout.prototype.m_tabBar=null;t.HuTabBarLayout.prototype.m_tabBarItemMap=null;t.HuTabBarLayout.prototype._createAndAddViewPluginWrapper=function(e){if(t.notNull(e)){let o=this.m_tabBar.newItem();o.setText(this._getTabBarItemText(e));o.setContent(e.getPluginWrapperView());o.setShowCloseButton(this.getLayoutConfigJson().getBooleanByKeyExt(t.HuTabBarLayout.LAYOUT_ALLOW_TAB_CLOSING,false));this.m_tabBar.addItem(o);return o}return null};t.HuTabBarLayout.prototype._getTabBarItemText=function(e){let o=null;if(t.notNull(e)){o=e.getPluginTitle();if(t.XStringUtils.isNullOrEmpty(o)){let n=e.getPluginStartupInfo().getContainerStructure();if(t.notNull(n)){o=n.getStringByKey(t.HuTabBarLayout.ITEM_TITLE)}if(t.XStringUtils.isNullOrEmpty(o)){o=e.getName()}}}return o};t.HuTabBarLayout.prototype._handleItemClose=function(e){this.logDebug("OnItemClose");if(t.notNull(e)){let o=t.XCollectionUtils.findFirst(this.m_pluginList,t=>this.m_tabBarItemMap.getByKey(t.getUuid())===e.getAffectedItem());if(t.notNull(o)){if(this.m_selectedTabBarItem===e.getAffectedItem()){this.m_selectedTabBarItem=null}this.logDebug(t.XStringUtils.concatenate2("Tab Item closed! Killing plugin with id: ",o.getUuid()));this.removePluginView(o);o.kill()}}};t.HuTabBarLayout.prototype._handleItemSelect=function(e){this.logDebug("OnItemSelect");if(t.notNull(e)){if(this.m_selectedTabBarItem===e.getAffectedItem()){this.logDebug("Item already selected! Skipping!");return}let o=t.XCollectionUtils.findFirst(this.m_pluginList,t=>this.m_tabBarItemMap.getByKey(t.getUuid())===this.m_selectedTabBarItem);let n=t.XCollectionUtils.findFirst(this.m_pluginList,t=>this.m_tabBarItemMap.getByKey(t.getUuid())===e.getAffectedItem());this.notifyPluginBecameHidden(o);this.notifyPluginBecameVisible(n);this.m_selectedTabBarItem=e.getAffectedItem()}};t.HuTabBarLayout.prototype._setupLayout=function(e){this.m_pluginList=t.XList.create();this.m_tabBarItemMap=t.XHashMapByString.create();this.m_tabBar=this.getGenesis().newControl(t.UiType.TAB_BAR);this.m_tabBar.useMaxSpace();this.m_tabBar.registerOnItemSelect(t.UiLambdaItemSelectListener.create(this._handleItemSelect.bind(this)));this.m_tabBar.registerOnItemClose(t.UiLambdaItemCloseListener.create(this._handleItemClose.bind(this)))};t.HuTabBarLayout.prototype.addPluginView=function(e){if(t.notNull(e)&&!this.m_tabBarItemMap.containsKey(e.getUuid())){let o=this._createAndAddViewPluginWrapper(e);this.m_tabBarItemMap.put(e.getUuid(),o);this.m_pluginList.add(e);if(t.isNull(this.m_selectedTabBarItem)){this.m_selectedTabBarItem=o}}};t.HuTabBarLayout.prototype.getLayoutType=function(){return t.HuLayoutType.TAB_BAR};t.HuTabBarLayout.prototype.getView=function(){return this.m_tabBar};t.HuTabBarLayout.prototype.isPluginVisible=function(e){if(t.notNull(e)){return e.getView()===this.m_tabBar.getSelectedItem()}return false};t.HuTabBarLayout.prototype.releaseObject=function(){this.m_pluginList.clear();this.m_pluginList=t.XObjectExt.release(this.m_pluginList);this.m_tabBar=t.XObjectExt.release(this.m_tabBar);this.m_tabBarItemMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_tabBarItemMap);t.HuDfHorizonLayout.prototype.releaseObject.call(this)};t.HuTabBarLayout.prototype.removePluginView=function(e){if(t.notNull(e)){let o=this.m_tabBarItemMap.remove(e.getUuid());if(t.notNull(o)){this.m_tabBar.removeItem(o);o.setContent(null);t.XObjectExt.release(o);this.m_pluginList.removeElement(e)}}};t.HuWorkspaceLayout=function(){};t.HuWorkspaceLayout.prototype=new t.HuDfHorizonLayout;t.HuWorkspaceLayout.prototype._ff_c="HuWorkspaceLayout";t.HuWorkspaceLayout.prototype.m_pluginContainerMap=null;t.HuWorkspaceLayout.prototype.m_pluginList=null;t.HuWorkspaceLayout.prototype.m_pluginPositionMap=null;t.HuWorkspaceLayout.prototype.m_splitter=null;t.HuWorkspaceLayout.prototype.m_splitterManager=null;t.HuWorkspaceLayout.prototype.m_viewContainer=null;t.HuWorkspaceLayout.prototype.m_workspaceLayout=null;t.HuWorkspaceLayout.prototype._getContainerForPlugin=function(e){let o=null;let n=t.HuWorkspaceItemPosition.getAllPositions().getIterator();while(n.hasNext()){let i=n.next();let r=this.m_pluginPositionMap.getByKey(i);if(t.XCollectionUtils.containsElement(r,e)){o=this.m_pluginContainerMap.getByKey(i);break}}if(t.isNull(o)){t.XLogger.println(t.XStringUtils.concatenate3("HuWorkspaceLayout._getContainerForPlugin: No container found for plugin '",e,"'."))}return o};t.HuWorkspaceLayout.prototype._mapToXList=function(e){return t.XCollectionUtils.map(e,t=>t.asString().getString())};t.HuWorkspaceLayout.prototype._populatePluginPositionMap=function(){this.m_pluginPositionMap=t.XSimpleMap.create();let e=this.getLayoutConfigJson();let o=e.getListByKey(t.HuWorkspaceItemPosition.HEADER.getName());this.m_pluginPositionMap.put(t.HuWorkspaceItemPosition.HEADER,this._mapToXList(o));let n=e.getListByKey(t.HuWorkspaceItemPosition.WIDGETS.getName());this.m_pluginPositionMap.put(t.HuWorkspaceItemPosition.WIDGETS,this._mapToXList(n));let i=e.getListByKey(t.HuWorkspaceItemPosition.MAIN.getName());this.m_pluginPositionMap.put(t.HuWorkspaceItemPosition.MAIN,this._mapToXList(i));let r=e.getListByKey(t.HuWorkspaceItemPosition.SIDE.getName());this.m_pluginPositionMap.put(t.HuWorkspaceItemPosition.SIDE,this._mapToXList(r))};t.HuWorkspaceLayout.prototype._setupLayout=function(e){this.m_pluginList=t.XList.create();this.m_pluginContainerMap=t.XSimpleMap.create();this._populatePluginPositionMap();this.m_workspaceLayout=e.newControl(t.UiType.FLEX_LAYOUT).setDirection(t.UiFlexDirection.COLUMN).useMaxSpace();let o=this.m_workspaceLayout.addNewItemOfType(t.UiType.FLEX_LAYOUT).setDirection(t.UiFlexDirection.COLUMN).useMaxWidth().addCssClass("ffHeaderContainer");this.m_pluginContainerMap.put(t.HuWorkspaceItemPosition.HEADER,o);this.m_splitter=this.m_workspaceLayout.addNewItemOfType(t.UiType.INTERACTIVE_SPLITTER).setEnableReordering(false).useMaxSpace();this.m_splitterManager=t.HuSplitterManager.create(this.m_splitter);this.m_viewContainer=e.newControl(t.UiType.FLEX_LAYOUT).setDirection(t.UiFlexDirection.COLUMN).useMaxSpace().addCssClass("ffViewContainer");let n=this.m_viewContainer.addNewItemOfType(t.UiType.FLEX_LAYOUT).setDirection(t.UiFlexDirection.COLUMN).useMaxWidth().addCssClass("ffWidgetsContainer");this.m_pluginContainerMap.put(t.HuWorkspaceItemPosition.WIDGETS,n);let i=this.m_viewContainer.addNewItemOfType(t.UiType.FLEX_LAYOUT).setDirection(t.UiFlexDirection.COLUMN).useMaxSpace().setMinHeight(t.UiCssLength.create("0")).addCssClass("ffMainContainer");this.m_pluginContainerMap.put(t.HuWorkspaceItemPosition.MAIN,i);this.m_splitterManager.setViewContent(this.m_viewContainer);let r=e.newControl(t.UiType.FLEX_LAYOUT).setDirection(t.UiFlexDirection.COLUMN).useMaxSpace().addCssClass("ffSideContainer");this.m_pluginContainerMap.put(t.HuWorkspaceItemPosition.SIDE,r);this.m_splitterManager.setSideContent(r)};t.HuWorkspaceLayout.prototype.addPluginView=function(e){if(t.notNull(e)&&!this.m_pluginList.contains(e)){this.m_pluginList.add(e);let o=e.getName();let n=this._getContainerForPlugin(o);if(t.notNull(n)){n.addItem(e.getView())}}};t.HuWorkspaceLayout.prototype.getLayoutType=function(){return t.HuLayoutType.WORKSPACE};t.HuWorkspaceLayout.prototype.getSplitterManager=function(){return this.m_splitterManager};t.HuWorkspaceLayout.prototype.getView=function(){return this.m_workspaceLayout};t.HuWorkspaceLayout.prototype.isPluginVisible=function(t){return this.m_pluginList.contains(t)};t.HuWorkspaceLayout.prototype.releaseObject=function(){this.m_pluginList=t.XCollectionUtils.clearAndReleaseCollection(this.m_pluginList);this.m_splitterManager=t.XObjectExt.release(this.m_splitterManager);this.m_viewContainer=t.XObjectExt.release(this.m_viewContainer);this.m_pluginContainerMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_pluginContainerMap);this.m_splitter=t.XObjectExt.release(this.m_splitter);this.m_workspaceLayout=t.XObjectExt.release(this.m_workspaceLayout);this.m_pluginPositionMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_pluginPositionMap);t.HuDfHorizonLayout.prototype.releaseObject.call(this)};t.HuWorkspaceLayout.prototype.removePluginView=function(e){if(t.notNull(e)&&this.m_pluginList.contains(e)){this.m_pluginList.removeElement(e);let o=e.getName();let n=this._getContainerForPlugin(o);if(t.notNull(n)){n.removeItem(e.getView())}}};t.HuWorkspaceLayout.prototype.setPluginVisibility=function(e,o){let n=this._getContainerForPlugin(e);if(t.notNull(n)){let i=t.XCollectionUtils.findFirst(this.m_pluginList,o=>t.XString.isEqual(e,o.getName()));if(t.notNull(i)){let t=i.getView();if(o){n.addItem(t)}else{n.removeItem(t)}}else{t.XLogger.println(t.XStringUtils.concatenate3("HuWorkspaceLayout.setPluginVisible: Plugin '",e,"' is not configured in the layout. Cannot change its visibility."))}}};t.HuWorkspaceLayout.prototype.setViewContainerSyncStatus=function(t){let e="ffViewContainerNotInSync";if(t){this.m_viewContainer.removeCssClass(e)}else{this.m_viewContainer.addCssClass(e)}};t.HuHorizonConfigurationManager=function(){};t.HuHorizonConfigurationManager.prototype=new t.HuDfHorizonManager;t.HuHorizonConfigurationManager.prototype._ff_c="HuHorizonConfigurationManager";t.HuHorizonConfigurationManager.COMMANDS_SECTION="commands";t.HuHorizonConfigurationManager.CONFIGIGURATION_SECTION="configuration";t.HuHorizonConfigurationManager.LAYOUT_SECTION="layout";t.HuHorizonConfigurationManager.PLUGINS_SECTION="plugins";t.HuHorizonConfigurationManager.TOOLBAR_SECTION="toolbar";t.HuHorizonConfigurationManager.create=function(e,o){let n=new t.HuHorizonConfigurationManager;n._setupWithGenericController(e);n._processConfigurationJson(o);return n};t.HuHorizonConfigurationManager.prototype.m_configurationJson=null;t.HuHorizonConfigurationManager.prototype.m_horizonConfiguration=null;t.HuHorizonConfigurationManager.prototype.m_isConfigValid=false;t.HuHorizonConfigurationManager.prototype.m_layoutConfiguration=null;t.HuHorizonConfigurationManager.prototype.m_pluginConfiguration=null;t.HuHorizonConfigurationManager.prototype.m_toolbarConfiguration=null;t.HuHorizonConfigurationManager.prototype._createConfigSectionsIfNeeded=function(){if(!this.m_configurationJson.containsKey(t.HuHorizonConfigurationManager.CONFIGIGURATION_SECTION)){this.m_configurationJson.putNewStructure(t.HuHorizonConfigurationManager.CONFIGIGURATION_SECTION)}if(!this.m_configurationJson.containsKey(t.HuHorizonConfigurationManager.PLUGINS_SECTION)){this.m_configurationJson.putNewList(t.HuHorizonConfigurationManager.PLUGINS_SECTION)}if(!this.m_configurationJson.containsKey(t.HuHorizonConfigurationManager.COMMANDS_SECTION)){this.m_configurationJson.putNewList(t.HuHorizonConfigurationManager.COMMANDS_SECTION)}if(!this.m_configurationJson.containsKey(t.HuHorizonConfigurationManager.TOOLBAR_SECTION)){this.m_configurationJson.putNewList(t.HuHorizonConfigurationManager.TOOLBAR_SECTION)}if(!this.m_configurationJson.containsKey(t.HuHorizonConfigurationManager.LAYOUT_SECTION)){this.m_configurationJson.putNewStructure(t.HuHorizonConfigurationManager.LAYOUT_SECTION)}};t.HuHorizonConfigurationManager.prototype._getCommandsSection=function(){return this.getConfigurationJson().getByKey(t.HuHorizonConfigurationManager.COMMANDS_SECTION)};t.HuHorizonConfigurationManager.prototype._getConfigurationSection=function(){return this.getConfigurationJson().getStructureByKey(t.HuHorizonConfigurationManager.CONFIGIGURATION_SECTION)};t.HuHorizonConfigurationManager.prototype._getLayoutSection=function(){return this.getConfigurationJson().getByKey(t.HuHorizonConfigurationManager.LAYOUT_SECTION)};t.HuHorizonConfigurationManager.prototype._getManagerName=function(){return"Config Manager"};t.HuHorizonConfigurationManager.prototype._getPluginsSection=function(){return this.getConfigurationJson().getByKey(t.HuHorizonConfigurationManager.PLUGINS_SECTION)};t.HuHorizonConfigurationManager.prototype._getToolbarSection=function(){return this.getConfigurationJson().getByKey(t.HuHorizonConfigurationManager.TOOLBAR_SECTION)};t.HuHorizonConfigurationManager.prototype._processConfigurationJson=function(e){if(t.isNull(e)){this.m_configurationJson=t.PrFactory.createStructure();this.m_isConfigValid=true;this._setupEmptyConfig()}else{this.m_configurationJson=e.clone();this.m_isConfigValid=this._validateExistingConfig();this._createConfigSectionsIfNeeded()}let o=t.HuHorizonConfigurationProcessor.create(this);o.processJsonElement(this._getConfigurationSection());this.m_horizonConfiguration=o;let n=t.HuPluginsConfigurationProcessor.create(this);n.processJsonElement(this._getPluginsSection());n.processJsonElement(this._getCommandsSection());this.m_pluginConfiguration=n;let i=t.HuToolbarConfigurationProcessor.create(this);i.processJsonElement(this._getToolbarSection());this.m_toolbarConfiguration=i;let r=t.HuLayoutConfigurationProcessor.create(this);r.processJsonElement(this._getLayoutSection());this.m_layoutConfiguration=r};t.HuHorizonConfigurationManager.prototype._setupEmptyConfig=function(){this._createConfigSectionsIfNeeded()};t.HuHorizonConfigurationManager.prototype._setupManager=function(){};t.HuHorizonConfigurationManager.prototype._validateExistingConfig=function(){if(!this.m_configurationJson.containsKey(t.HuHorizonConfigurationManager.CONFIGIGURATION_SECTION)){return false}if(!this.m_configurationJson.containsKey(t.HuHorizonConfigurationManager.PLUGINS_SECTION)){return false}return true};t.HuHorizonConfigurationManager.prototype.getConfigurationJson=function(){return this.m_configurationJson};t.HuHorizonConfigurationManager.prototype.getHorizonConfiguration=function(){return this.m_horizonConfiguration};t.HuHorizonConfigurationManager.prototype.getLayoutConfiguration=function(){return this.m_layoutConfiguration};t.HuHorizonConfigurationManager.prototype.getPluginsConfiguration=function(){return this.m_pluginConfiguration};t.HuHorizonConfigurationManager.prototype.getSaveContent=function(){let e=t.PrUtils.serialize(this.getConfigurationJson(),false,true,2);return t.XContent.createStringContent(t.ContentType.JSON,e)};t.HuHorizonConfigurationManager.prototype.getToolbarConfiguration=function(){return this.m_toolbarConfiguration};t.HuHorizonConfigurationManager.prototype.isConfigurationValid=function(){return this.m_isConfigValid};t.HuHorizonConfigurationManager.prototype.releaseObject=function(){this.m_pluginConfiguration=t.XObjectExt.release(this.m_pluginConfiguration);this.m_horizonConfiguration=t.XObjectExt.release(this.m_horizonConfiguration);this.m_toolbarConfiguration=t.XObjectExt.release(this.m_toolbarConfiguration);this.m_layoutConfiguration=t.XObjectExt.release(this.m_layoutConfiguration);this.m_configurationJson=t.XObjectExt.release(this.m_configurationJson);t.HuDfHorizonManager.prototype.releaseObject.call(this)};t.HuHorizonMenuManager=function(){};t.HuHorizonMenuManager.prototype=new t.HuDfHorizonManager;t.HuHorizonMenuManager.prototype._ff_c="HuHorizonMenuManager";t.HuHorizonMenuManager.create=function(e,o){let n=new t.HuHorizonMenuManager;n._setupWithGenericController(e);n._setProgramInstance(o);return n};t.HuHorizonMenuManager.prototype.m_menuButtons=null;t.HuHorizonMenuManager.prototype.m_programInstance=null;t.HuHorizonMenuManager.prototype._getManagerName=function(){return"Menu Manager"};t.HuHorizonMenuManager.prototype._getMenuControl=function(){return this._getProgramInstance().getProgramMenu()};t.HuHorizonMenuManager.prototype._getProgramInstance=function(){return this.m_programInstance};t.HuHorizonMenuManager.prototype._setProgramInstance=function(t){this.m_programInstance=t};t.HuHorizonMenuManager.prototype._setupManager=function(){this.m_menuButtons=t.XList.create()};t.HuHorizonMenuManager.prototype.addMenuButton=function(t,e,o){let n=this._getProgramInstance().addProgramMenuButton(t,e,o);this.m_menuButtons.add(n);return n};t.HuHorizonMenuManager.prototype.clearMenuButtons=function(){this._getMenuControl().clearItems()};t.HuHorizonMenuManager.prototype.getAllMenuButtons=function(){return this.m_menuButtons};t.HuHorizonMenuManager.prototype.isMenuVisible=function(){return this._getProgramInstance().isProgramMenuVisible()};t.HuHorizonMenuManager.prototype.releaseObject=function(){this.clearMenuButtons();this.m_menuButtons=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_menuButtons);this.m_programInstance=null;t.HuDfHorizonManager.prototype.releaseObject.call(this)};t.HuHorizonMenuManager.prototype.removeMenuButton=function(e){if(t.notNull(e)&&this.m_menuButtons.contains(e)){this._getProgramInstance().removeProgramMenuButton(e)}};t.HuHorizonMenuManager.prototype.setMenuVisible=function(t){this._getProgramInstance().setProgramMenuVisible(t)};t.HuHorizonMessageManager=function(){};t.HuHorizonMessageManager.prototype=new t.HuDfHorizonManager;t.HuHorizonMessageManager.prototype._ff_c="HuHorizonMessageManager";t.HuHorizonMessageManager.create=function(e){let o=new t.HuHorizonMessageManager;o._setupWithGenericController(e);return o};t.HuHorizonMessageManager.prototype.m_errorMessages=null;t.HuHorizonMessageManager.prototype.m_infoMessages=null;t.HuHorizonMessageManager.prototype.m_statusBarClearMessagesPressedObserverId=null;t.HuHorizonMessageManager.prototype.m_statusMessage=null;t.HuHorizonMessageManager.prototype.m_successMessages=null;t.HuHorizonMessageManager.prototype.m_warningMessages=null;t.HuHorizonMessageManager.prototype._clearMessagesByType=function(e){if(e===t.HuMessageType.INFORMATION){t.XCollectionUtils.releaseEntriesFromCollection(this.m_infoMessages);this.m_infoMessages.clear()}else if(e===t.HuMessageType.SUCCESS){t.XCollectionUtils.releaseEntriesFromCollection(this.m_successMessages);this.m_successMessages.clear()}else if(e===t.HuMessageType.WARNING){t.XCollectionUtils.releaseEntriesFromCollection(this.m_warningMessages);this.m_warningMessages.clear()}else if(e===t.HuMessageType.ERROR){t.XCollectionUtils.releaseEntriesFromCollection(this.m_errorMessages);this.m_errorMessages.clear()}};t.HuHorizonMessageManager.prototype._getManagerName=function(){return"Message Manager"};t.HuHorizonMessageManager.prototype._handleStatusBarClearMessagesPressedNotification=function(e){if(t.notNull(e)){let o=e.getXObjectByKey(t.HuHorizonInternalNotifications.STATUS_BAR_MANAGER_CLEAR_MESSAGES_PRESSED_MESSAGE_TYPE_NOTIFY_DATA);this._clearMessagesByType(o)}};t.HuHorizonMessageManager.prototype._postAllMessagesClearNotification=function(){this.getLocalNotificationCenter().postNotificationWithName(t.HuHorizonInternalNotifications.MESSAGE_MANAGER_CLEAR_ALL_MESSAGES,null)};t.HuHorizonMessageManager.prototype._postMessagesClearNotification=function(e){let o=t.XNotificationData.create();o.putXObject(t.HuHorizonInternalNotifications.MESSAGE_MANAGER_CLEAR_MESSAGES_MESSAGE_TYPE_NOTIFI_DATA,e);this.getLocalNotificationCenter().postNotificationWithName(t.HuHorizonInternalNotifications.MESSAGE_MANAGER_CLEAR_MESSAGES,o)};t.HuHorizonMessageManager.prototype._postNewMessageNotification=function(e){let o=t.XNotificationData.create();o.putXObject(t.HuHorizonInternalNotifications.MESSAGE_MANAGER_NEW_MESSAGE_MESSAGE_NOTIFI_DATA,e);this.getLocalNotificationCenter().postNotificationWithName(t.HuHorizonInternalNotifications.MESSAGE_MANAGER_NEW_MESSAGE,o)};t.HuHorizonMessageManager.prototype._postStatusChangedNotification=function(){let e=t.XNotificationData.create();e.putString(t.HuHorizonInternalNotifications.MESSAGE_MANAGER_STATUS_MESSAGE_CHANGED_NEW_MESSAGE_NOTIFI_DATA,this.m_statusMessage);this.getLocalNotificationCenter().postNotificationWithName(t.HuHorizonInternalNotifications.MESSAGE_MANAGER_STATUS_MESSAGE_CHANGED,e)};t.HuHorizonMessageManager.prototype._setupManager=function(){this.m_infoMessages=t.XList.create();this.m_successMessages=t.XList.create();this.m_warningMessages=t.XList.create();this.m_errorMessages=t.XList.create();this.m_statusBarClearMessagesPressedObserverId=this.getLocalNotificationCenter().addObserverForName(t.HuHorizonInternalNotifications.STATUS_BAR_MANAGER_CLEAR_MESSAGES_PRESSED,this._handleStatusBarClearMessagesPressedNotification.bind(this))};t.HuHorizonMessageManager.prototype.addErrorMessage=function(e,o,n,i){if(t.XStringUtils.isNotNullAndNotEmpty(e)){let r=t.HuMessage.createError(e,o,n,i);this.m_errorMessages.add(r);this._postNewMessageNotification(r)}};t.HuHorizonMessageManager.prototype.addInfoMessage=function(e,o,n,i){if(t.XStringUtils.isNotNullAndNotEmpty(e)){let r=t.HuMessage.createInformation(e,o,n,i);this.m_infoMessages.add(r);this._postNewMessageNotification(r)}};t.HuHorizonMessageManager.prototype.addSuccessMessage=function(e,o,n,i){if(t.XStringUtils.isNotNullAndNotEmpty(e)){let r=t.HuMessage.createSuccess(e,o,n,i);this.m_successMessages.add(r);this._postNewMessageNotification(r)}};t.HuHorizonMessageManager.prototype.addSystemErrorMessage=function(e,o,n){this.addErrorMessage(e,o,n,t.HuMessageGroup.SYSTEM)};t.HuHorizonMessageManager.prototype.addSystemInfoMessage=function(e,o,n){this.addInfoMessage(e,o,n,t.HuMessageGroup.SYSTEM)};t.HuHorizonMessageManager.prototype.addSystemSuccessMessage=function(e,o,n){this.addSuccessMessage(e,o,n,t.HuMessageGroup.SYSTEM)};t.HuHorizonMessageManager.prototype.addSystemWarningMessage=function(e,o,n){this.addWarningMessage(e,o,n,t.HuMessageGroup.SYSTEM)};t.HuHorizonMessageManager.prototype.addWarningMessage=function(e,o,n,i){if(t.XStringUtils.isNotNullAndNotEmpty(e)){let r=t.HuMessage.createWarning(e,o,n,i);this.m_warningMessages.add(r);this._postNewMessageNotification(r)}};t.HuHorizonMessageManager.prototype.clearAllMessages=function(){this.clearInfoMessages();this.clearSuccessMessages();this.clearWarningMessages();this.clearErrorMessages();this._postAllMessagesClearNotification()};t.HuHorizonMessageManager.prototype.clearErrorMessages=function(){this._clearMessagesByType(t.HuMessageType.ERROR);this._postMessagesClearNotification(t.HuMessageType.ERROR)};t.HuHorizonMessageManager.prototype.clearInfoMessages=function(){this._clearMessagesByType(t.HuMessageType.INFORMATION);this._postMessagesClearNotification(t.HuMessageType.INFORMATION)};t.HuHorizonMessageManager.prototype.clearSuccessMessages=function(){this._clearMessagesByType(t.HuMessageType.SUCCESS);this._postMessagesClearNotification(t.HuMessageType.SUCCESS)};t.HuHorizonMessageManager.prototype.clearWarningMessages=function(){this._clearMessagesByType(t.HuMessageType.WARNING);this._postMessagesClearNotification(t.HuMessageType.WARNING)};t.HuHorizonMessageManager.prototype.getAllErrorMessages=function(){return this.m_errorMessages};t.HuHorizonMessageManager.prototype.getAllInfoMessages=function(){return this.m_infoMessages};t.HuHorizonMessageManager.prototype.getAllMessages=function(){let e=t.XList.create();e.addAll(this.getAllInfoMessages());e.addAll(this.getAllSuccessMessages());e.addAll(this.getAllWarningMessages());e.addAll(this.getAllErrorMessages());return e};t.HuHorizonMessageManager.prototype.getAllSuccessMessages=function(){return this.m_successMessages};t.HuHorizonMessageManager.prototype.getAllWarningMessages=function(){return this.m_warningMessages};t.HuHorizonMessageManager.prototype.getStatus=function(){return this.m_statusMessage};t.HuHorizonMessageManager.prototype.hasErrorMessages=function(){return this.m_errorMessages.size()>0};t.HuHorizonMessageManager.prototype.hasInfoMessages=function(){return this.m_infoMessages.size()>0};t.HuHorizonMessageManager.prototype.hasMessages=function(){return this.hasInfoMessages()||this.hasSuccessMessages()||this.hasWarningMessages()||this.hasErrorMessages()};t.HuHorizonMessageManager.prototype.hasSuccessMessages=function(){return this.m_successMessages.size()>0};t.HuHorizonMessageManager.prototype.hasWarningMessages=function(){return this.m_warningMessages.size()>0};t.HuHorizonMessageManager.prototype.releaseObject=function(){this.m_infoMessages=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_infoMessages);this.m_successMessages=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_successMessages);this.m_warningMessages=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_warningMessages);this.m_errorMessages=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_errorMessages);this.getLocalNotificationCenter().removeObserverByUuid(this.m_statusBarClearMessagesPressedObserverId);t.HuDfHorizonManager.prototype.releaseObject.call(this)};t.HuHorizonMessageManager.prototype.setStatusMessage=function(t){this.m_statusMessage=t;this._postStatusChangedNotification()};t.HuHorizonStateManager=function(){};t.HuHorizonStateManager.prototype=new t.HuDfHorizonManager;t.HuHorizonStateManager.prototype._ff_c="HuHorizonStateManager";t.HuHorizonStateManager.create=function(e){let o=new t.HuHorizonStateManager;o._setupWithGenericController(e);return o};t.HuHorizonStateManager.prototype._getManagerName=function(){return"State Manager"};t.HuHorizonStateManager.prototype._setupManager=function(){};t.HuHorizonStateManager.prototype.releaseObject=function(){t.HuDfHorizonManager.prototype.releaseObject.call(this)};t.HuHorizonWorkspaceManager=function(){};t.HuHorizonWorkspaceManager.prototype=new t.HuDfHorizonManager;t.HuHorizonWorkspaceManager.prototype._ff_c="HuHorizonWorkspaceManager";t.HuHorizonWorkspaceManager.create=function(e,o){let n=new t.HuHorizonWorkspaceManager;n._setupWithGenericController(e);n._processWorkspaceDir(o);return n};t.HuHorizonWorkspaceManager.prototype.m_horizonDir=null;t.HuHorizonWorkspaceManager.prototype.m_isVirtualWorkspace=false;t.HuHorizonWorkspaceManager.prototype.m_pluginSettingsDir=null;t.HuHorizonWorkspaceManager.prototype.m_pluginStorageDir=null;t.HuHorizonWorkspaceManager.prototype.m_pluginsDir=null;t.HuHorizonWorkspaceManager.prototype.m_settingsFile=null;t.HuHorizonWorkspaceManager.prototype.m_stateFile=null;t.HuHorizonWorkspaceManager.prototype.m_workspaceDir=null;t.HuHorizonWorkspaceManager.prototype.m_workspaceHorizonConfigFile=null;t.HuHorizonWorkspaceManager.prototype._getManagerName=function(){return"Workspace Manager"};t.HuHorizonWorkspaceManager.prototype._prepareDirIfNecessary=function(e){return t.XFilePromise.isExisting(e).onThenPromise(o=>{if(o.getBoolean()){return t.XPromise.resolve(e)}else{return t.XFilePromise.mkdir(e,false)}})};t.HuHorizonWorkspaceManager.prototype._prepareFileIfNecessary=function(e){return t.XFilePromise.isExisting(e).onThenPromise(o=>{if(o.getBoolean()){return t.XPromise.resolve(e)}else{return t.XFilePromise.saveText(e,"")}})};t.HuHorizonWorkspaceManager.prototype._prepareHorizonDirIfNecessary=function(){if(this.getPluginSettingsDirectory()===null){let e=t.XPromise.create((e,o)=>{let n=this.m_workspaceDir.newChild(t.HuHorizonWorkspaceConstants.HORIZON_DIR_NAME);this._prepareDirIfNecessary(n).onThen(i=>{this.m_horizonDir=n;let r=t.XPromiseList.create();r.add(this._prepareStateFileIfNecessary());r.add(this._prepareSettingsFileIfNecessary());let s=t.XPromise.all(r);s.onThen(o=>{e(t.XBooleanValue.create(true))}).onCatch(o)}).onCatch(o)});return e}return t.XPromise.resolve(t.XBooleanValue.create(true))};t.HuHorizonWorkspaceManager.prototype._preparePluginSettingsDirIfNecessary=function(){if(this.getPluginSettingsDirectory()===null){let e=t.XPromise.create((e,o)=>{let n=this.getPluginsDirectory().newChild(t.HuHorizonWorkspaceConstants.PLUGIN_SETTINGS_DIR_NAME);this._prepareDirIfNecessary(n).onThen(o=>{this.m_pluginSettingsDir=n;e(t.XBooleanValue.create(true))}).onCatch(o)});return e}return t.XPromise.resolve(t.XBooleanValue.create(true))};t.HuHorizonWorkspaceManager.prototype._preparePluginStorageDirIfNecessary=function(){if(this.getPluginStorageDirectory()===null){let e=t.XPromise.create((e,o)=>{let n=this.getPluginsDirectory().newChild(t.HuHorizonWorkspaceConstants.PLUGIN_STORAGE_DIR_NAME);this._prepareDirIfNecessary(n).onThen(o=>{this.m_pluginStorageDir=n;e(t.XBooleanValue.create(true))}).onCatch(o)});return e}return t.XPromise.resolve(t.XBooleanValue.create(true))};t.HuHorizonWorkspaceManager.prototype._preparePluginsDirIfNecessary=function(){if(this.getPluginsDirectory()===null){let e=t.XPromise.create((e,o)=>{let n=this.getHorizonDirectory().newChild(t.HuHorizonWorkspaceConstants.PLUGINS_DIR_NAME);this._prepareDirIfNecessary(n).onThen(i=>{this.m_pluginsDir=n;this._preparePluginSettingsDirIfNecessary().onThen(n=>{this._preparePluginStorageDirIfNecessary().onThen(o=>{e(t.XBooleanValue.create(true))}).onCatch(o)}).onCatch(o)}).onCatch(o)});return e}return t.XPromise.resolve(t.XBooleanValue.create(true))};t.HuHorizonWorkspaceManager.prototype._prepareSettingsFileIfNecessary=function(){if(this.getSettingsFile()===null){let e=t.XPromise.create((e,o)=>{let n=this.getHorizonDirectory().newChild(t.HuHorizonWorkspaceConstants.SETTINGS_FILE_NAME);this._prepareFileIfNecessary(n).onThen(o=>{this.m_settingsFile=n;e(t.XBooleanValue.create(true))}).onCatch(o)});return e}return t.XPromise.resolve(t.XBooleanValue.create(true))};t.HuHorizonWorkspaceManager.prototype._prepareStateFileIfNecessary=function(){if(this.getStateFile()===null){let e=t.XPromise.create((e,o)=>{let n=this.getHorizonDirectory().newChild(t.HuHorizonWorkspaceConstants.STATE_FILE_NAME);this._prepareFileIfNecessary(n).onThen(o=>{this.m_stateFile=n;e(t.XBooleanValue.create(true))}).onCatch(o)});return e}return t.XPromise.resolve(t.XBooleanValue.create(true))};t.HuHorizonWorkspaceManager.prototype._processWorkspaceDir=function(e){this.m_workspaceDir=e;if(t.isNull(this.m_workspaceDir)){this.m_isVirtualWorkspace=true;this.logDebug("No workspace directory specified! Settings cannot be preserved!")}};t.HuHorizonWorkspaceManager.prototype._setupManager=function(){};t.HuHorizonWorkspaceManager.prototype.getHorizonDirectory=function(){return this.m_horizonDir};t.HuHorizonWorkspaceManager.prototype.getHorizonWorkspaceConfigFile=function(){return this.m_workspaceHorizonConfigFile};t.HuHorizonWorkspaceManager.prototype.getPluginSettingsDirectory=function(){return this.m_pluginSettingsDir};t.HuHorizonWorkspaceManager.prototype.getPluginStorageDirectory=function(){return this.m_pluginStorageDir};t.HuHorizonWorkspaceManager.prototype.getPluginsDirectory=function(){return this.m_pluginsDir};t.HuHorizonWorkspaceManager.prototype.getSettingsFile=function(){return this.m_settingsFile};t.HuHorizonWorkspaceManager.prototype.getSettingsFileForPlugin=function(e){if(t.notNull(e)&&!this.isVirtualWorkspace()){let o=t.CoConfigurationUtils.createConfigurationFileNameForName(e.getName());let n=this.getPluginSettingsDirectory().newChild(o);return n}return null};t.HuHorizonWorkspaceManager.prototype.getStateFile=function(){return this.m_stateFile};t.HuHorizonWorkspaceManager.prototype.getStorageFileForPlugin=function(e){if(t.notNull(e)&&!this.isVirtualWorkspace()){let o=t.XStringUtils.concatenate2(e.getName(),t.HuHorizonWorkspaceConstants.STORAGE_FILE_EXTENSION);let n=this.getPluginStorageDirectory().newChild(o);return n}return null};t.HuHorizonWorkspaceManager.prototype.getWorkspaceDirectory=function(){return this.m_workspaceDir};t.HuHorizonWorkspaceManager.prototype.isVirtualWorkspace=function(){return this.m_isVirtualWorkspace};t.HuHorizonWorkspaceManager.prototype.prepareSubDirectoriesIfNecessary=function(){if(this.isVirtualWorkspace()){return t.XPromise.resolve(t.XBooleanValue.create(true))}if(t.notNull(this.m_workspaceDir)){this.m_workspaceHorizonConfigFile=this.m_workspaceDir.newChild(t.HuHorizonWorkspaceConstants.HORIZON_WORKSPACE_CONFIG_FILE_NAME);let e=t.XPromise.create((e,o)=>{this._prepareHorizonDirIfNecessary().onThen(n=>{this._preparePluginsDirIfNecessary().onThen(o=>{e(t.XBooleanValue.create(true))}).onCatch(o)}).onCatch(o)});return e}return t.XPromise.reject(t.XError.create("No workspace directory specified"))};t.HuHorizonWorkspaceManager.prototype.releaseObject=function(){this.m_pluginStorageDir=t.XObjectExt.release(this.m_pluginStorageDir);this.m_pluginsDir=t.XObjectExt.release(this.m_pluginsDir);this.m_pluginSettingsDir=t.XObjectExt.release(this.m_pluginSettingsDir);this.m_settingsFile=t.XObjectExt.release(this.m_settingsFile);this.m_stateFile=t.XObjectExt.release(this.m_stateFile);this.m_horizonDir=t.XObjectExt.release(this.m_horizonDir);this.m_workspaceHorizonConfigFile=t.XObjectExt.release(this.m_workspaceHorizonConfigFile);this.m_workspaceDir=t.XObjectExt.release(this.m_workspaceDir);t.HuDfHorizonManager.prototype.releaseObject.call(this)};t.HuHorizonWorkspaceManager.prototype.setIsVirtualWorkspace=function(t){this.m_isVirtualWorkspace=t};t.HuDfConfigurationProcessor=function(){};t.HuDfConfigurationProcessor.prototype=new t.HuDfHorizonProcessor;t.HuDfConfigurationProcessor.prototype._ff_c="HuDfConfigurationProcessor";t.HuDfConfigurationProcessor.prototype._getProcessorName=function(){return t.XStringUtils.concatenate2(this._getConfigurationProcessorName()," Configuration")};t.HuDfConfigurationProcessor.prototype._setupProcessor=function(){this._setupConfigurationProcessor()};t.HuDfConfigurationProcessor.prototype.processJsonElement=function(e){if(t.notNull(e)){this._processConfigurationElement(e)}};t.HuDfConfigurationProcessor.prototype.releaseObject=function(){t.HuDfHorizonProcessor.prototype.releaseObject.call(this)};t.HuPluginManifestProcessor=function(){};t.HuPluginManifestProcessor.prototype=new t.HuDfHorizonProcessor;t.HuPluginManifestProcessor.prototype._ff_c="HuPluginManifestProcessor";t.HuPluginManifestProcessor.create=function(e){let o=new t.HuPluginManifestProcessor;o._setupWithToolsContext(e);return o};t.HuPluginManifestProcessor.prototype.m_pluginLoader=null;t.HuPluginManifestProcessor.prototype._filterDirectoryChildren=function(e){if(t.isNull(e)||!e.hasElements()){return e}let o=t.XList.create();t.XCollectionUtils.forEach(e,e=>{if(t.HuPluginRegistryBase.didRegisterManifestFromOrigin(this._getFileOriginPath(e))){return}if(e.isHidden()){return}t.XLogger.println(this._getFileOriginPath(e));o.add(e)});return o};t.HuPluginManifestProcessor.prototype._getFileOriginPath=function(e){if(t.notNull(e)&&e.getUrl()!==null){return e.getUri().getPath()}return t.XGuid.getGuid()};t.HuPluginManifestProcessor.prototype._getProcessorName=function(){return"Plugin Manifest Processor"};t.HuPluginManifestProcessor.prototype._processDirectoryChildren=function(e){let o=t.XPromise.create((o,n)=>{let i=this._filterDirectoryChildren(e);this.logDebug(t.XStringUtils.concatenate2("Filtered directory children! Remaining number of files to process: ",t.XInteger.convertToString(i.size())));let r=t.XPromiseList.create();t.XCollectionUtils.forEach(i,t=>{r.add(this._processPluginManifestFile(t))});let s=t.XPromise.allSettled(r);s.onFinally(()=>{o(t.XBooleanValue.create(true))})});return o};t.HuPluginManifestProcessor.prototype._processPluginManifestDirectory=function(e){if(t.notNull(e)){let o=t.XPromise.create((o,n)=>{this.getLogger().logDebug(t.XStringUtils.concatenate2("Processing plugin dir: ",e.getUri().getPath()));t.XFilePromise.isExisting(e).onThen(i=>{if(i.getBoolean()){this.logDebug("Plugins dir existing!");t.XFilePromise.fetchChildren(e).onThen(e=>{this.logDebug(t.XStringUtils.concatenate3("Plugin directory has ",t.XInteger.convertToString(e.size())," files!"));this._processDirectoryChildren(e).onFinally(()=>{o(t.XBooleanValue.create(true))})}).onCatch(n)}else{this.logDebug("Plugins dir NOT existing!");o(t.XBooleanValue.create(true))}}).onCatch(n)});return o}return t.XPromise.resolve(t.XBooleanValue.create(true))};t.HuPluginManifestProcessor.prototype._processPluginManifestFile=function(e){let o=t.XPromise.create((o,n)=>{t.XFilePromise.loadJsonStructure(e).onThen(n=>{this.logDebug(t.XStringUtils.concatenate2("---- Processing plugin manifest file ->  ",e.getName()));let i=null;try{i=t.HuPluginManifest.createByStructure(n)}catch(e){this.logDebug(t.XStringUtils.concatenate2("!!!! Failed to process plugin manifest! Error; ",t.XException.getMessage(e)))}if(t.isNull(i)){this.logDebug("!!!! Failed to process plugin file!")}else if(!i.isValid()){this.logDebug(t.XStringUtils.concatenate2("!!!! Invalid plugin manifest! Error: ",i.getValidationErrors().get(0).getText()))}else{this.logDebug(t.XStringUtils.concatenate2("Plugin manifest loaded successfully: ",i.getName()));if(t.HuPluginRegistryBase.getPluginFactory(i.getName())===null){t.HuPluginRegistryBase.registerPluginByManifest(i,this._getFileOriginPath(e))}else{if(!t.HuPluginRegistryBase.hasManifest(i.getName())){this.logDebug("Plugin registered but has no manifest! Adding manifest!");t.HuPluginRegistryBase.registerPluginByManifest(i,this._getFileOriginPath(e))}else{this.logDebug("Plugin already registered!")}}}o(t.XBooleanValue.create(true))}).onCatch(n)});return o};t.HuPluginManifestProcessor.prototype._setupProcessor=function(){this.m_pluginLoader=t.HuPluginLoader.create(this)};t.HuPluginManifestProcessor.prototype.processPluginManifestDirectories=function(e){let o=t.XPromise.create((o,n)=>{if(t.isNull(e)||!e.hasElements()){o(t.XBooleanValue.create(true));return}let i=t.XPromiseList.create();t.XCollectionUtils.forEach(e,t=>{i.add(this._processPluginManifestDirectory(t))});let r=t.XPromise.allSettled(i);r.onFinally(()=>{o(t.XBooleanValue.create(true))})});return o};t.HuPluginManifestProcessor.prototype.processPluginManifestFiles=function(e){let o=t.XPromise.create((o,n)=>{if(t.isNull(e)||!e.hasElements()){o(t.XBooleanValue.create(true));return}let i=t.XPromiseList.create();t.XCollectionUtils.forEach(e,t=>{i.add(this._processPluginManifestFile(t))});let r=t.XPromise.allSettled(i);r.onFinally(()=>{o(t.XBooleanValue.create(true))})});return o};t.HuPluginManifestProcessor.prototype.releaseObject=function(){this.m_pluginLoader=t.XObjectExt.release(this.m_pluginLoader);t.HuDfHorizonProcessor.prototype.releaseObject.call(this)};t.HuHorizonBootController=function(){};t.HuHorizonBootController.prototype=new t.HuDfSubController;t.HuHorizonBootController.prototype._ff_c="HuHorizonBootController";t.HuHorizonBootController.create=function(e,o){let n=new t.HuHorizonBootController;n.setBootConfig(o);n._setupWithMainController(e);return n};t.HuHorizonBootController.prototype.m_bootActionsSequenceList=null;t.HuHorizonBootController.prototype.m_bootConfig=null;t.HuHorizonBootController.prototype.m_bootError=false;t.HuHorizonBootController.prototype.m_bootScreen=null;t.HuHorizonBootController.prototype.m_currentAction=null;t.HuHorizonBootController.prototype.m_currentStatus=null;t.HuHorizonBootController.prototype.m_numberOfBootActions=0;t.HuHorizonBootController.prototype.m_statusChangedListeners=null;t.HuHorizonBootController.prototype._ensureBootConfigExists=function(){if(t.isNull(this.m_bootConfig)){this.logDebug("Missing boot configuration! Using default configuration!");this.m_bootConfig=t.HuBootConfig.create()}};t.HuHorizonBootController.prototype._getControllerName=function(){return"Boot Controller"};t.HuHorizonBootController.prototype._logBootActionFinish=function(e){this.logDebug(t.XStringUtils.concatenate2("### Finished action: -> ",e.getActionName()))};t.HuHorizonBootController.prototype._logBootActionStart=function(e){this.logDebug(t.XStringUtils.concatenate2("### Starting action: -> ",e.getActionName()))};t.HuHorizonBootController.prototype._notifyStatusChanged=function(e){t.XCollectionUtils.forEach(this.m_statusChangedListeners,t=>{t.accept(e)})};t.HuHorizonBootController.prototype._prepareBoot=function(t){this._setStatus(t);this._presentBootScreen()};t.HuHorizonBootController.prototype._prepareConfigurationReload=function(){this.m_bootActionsSequenceList.clear();this.m_bootError=false;this.m_bootActionsSequenceList.add(t.HuConfigBootAction.create(this));this.m_bootActionsSequenceList.add(t.HuPluginsModuleLoadBootAction.create(this));this.m_bootActionsSequenceList.add(t.HuFinalizeSetupBootAction.create(this));this.m_numberOfBootActions=this.m_bootActionsSequenceList.size()};t.HuHorizonBootController.prototype._prepareRegularBoot=function(){this.m_bootActionsSequenceList.clear();this.m_bootError=false;this.m_bootActionsSequenceList.add(t.HuWorkspaceBootAction.create(this));this.m_bootActionsSequenceList.add(t.HuConfigBootAction.create(this));this.m_bootActionsSequenceList.add(t.HuPluginsManifestLoadBootAction.create(this));this.m_bootActionsSequenceList.add(t.HuPluginsModuleLoadBootAction.create(this));this.m_bootActionsSequenceList.add(t.HuFinalizeSetupBootAction.create(this));this.m_numberOfBootActions=this.m_bootActionsSequenceList.size()};t.HuHorizonBootController.prototype._prepareWorkspaceSwitch=function(){this.m_bootActionsSequenceList.clear();this.m_bootError=false;this.m_bootActionsSequenceList.add(t.HuConfigBootAction.create(this));this.m_bootActionsSequenceList.add(t.HuPluginsModuleLoadBootAction.create(this));this.m_bootActionsSequenceList.add(t.HuFinalizeSetupBootAction.create(this));this.m_numberOfBootActions=this.m_bootActionsSequenceList.size()};t.HuHorizonBootController.prototype._presentBootScreen=function(){if(this.getBootConfig().isShowSplashScreen()){let e=this.getMainController().getProcess().resolvePath(t.HuHorizonConstants.DEFAULT_SPLASH_SCREEN_IMAGE_PATH);this.m_bootScreen=t.HuSplashBootScreenView.create(this.getGenesis(),e)}else{this.m_bootScreen=t.HuActivityIndicatorBootScreenView.create(this.getGenesis())}this.getMainGenesis().setRoot(this.m_bootScreen.getView())};t.HuHorizonBootController.prototype._processBootActionsInOrder=function(){let e=t.XPromise.create((t,e)=>{this._processCurrentBootAction(t,e)});return e};t.HuHorizonBootController.prototype._processCurrentBootAction=function(e,o){if(t.notNull(this.m_bootActionsSequenceList)&&this.m_bootActionsSequenceList.size()>0){this.m_currentAction=this.m_bootActionsSequenceList.removeAt(0);this._setCurrentActionLbl();this._logBootActionStart(this.m_currentAction);this.m_currentAction.executeBootAction().onThen(t=>{this._logBootActionFinish(this.m_currentAction);this._setProgressIndicatorValue();this._processCurrentBootAction(e,o)}).onCatch(e=>{let n=t.XStringUtils.concatenate2("Error during startup! Reason: ",e.getText());this._showBootError(n);o(e)})}else{this.m_currentAction=null;this._setCurrentActionLbl();e(t.XBooleanValue.create(true))}};t.HuHorizonBootController.prototype._setCurrentActionLbl=function(){if(t.notNull(this.m_bootScreen)){let e=null;if(t.notNull(this.m_currentAction)){if(this.m_bootError){e=t.XStringUtils.concatenate2("Boot interrupted during: ",this.m_currentAction.getActionName())}else{e=t.XStringUtils.concatenate2("Processing: ",this.m_currentAction.getActionName())}}else if(this.m_bootError){e="Boot error..."}else{e="Boot finished..."}this.m_bootScreen.setCurrentStatusText(e)}};t.HuHorizonBootController.prototype._setProgressIndicatorValue=function(){if(t.notNull(this.m_bootScreen)){let t=this.m_bootActionsSequenceList.size();let e=t/this.m_numberOfBootActions;e=e*100;e=100-e;this.m_bootScreen.setCurrentPercentValue(e)}};t.HuHorizonBootController.prototype._setStatus=function(e){if(t.notNull(e)&&this.m_currentStatus!==e){this.m_currentStatus=e;this.logDebug(t.XStringUtils.concatenate2("Controller status changed to: ",e.getName()));this._notifyStatusChanged(e)}};t.HuHorizonBootController.prototype._setupController=function(){this.m_statusChangedListeners=t.XList.create();this.m_currentStatus=t.HuBootControllerStatus.INITIAL;this.m_bootActionsSequenceList=t.XList.create();this._ensureBootConfigExists()};t.HuHorizonBootController.prototype._showBootError=function(e){if(t.notNull(this.m_bootScreen)){if(t.XStringUtils.isNotNullAndNotEmpty(e)){this.m_bootScreen.setErrorMessage(e);this.m_bootError=true;this._setCurrentActionLbl()}else{this.m_bootScreen.setErrorMessage(null)}}};t.HuHorizonBootController.prototype._startConfigurationReload=function(){this._prepareBoot(t.HuBootControllerStatus.CONFIGURATION_RELOAD_IN_PROGRESS);return this._processBootActionsInOrder().onThen(e=>{this._setStatus(t.HuBootControllerStatus.CONFIGURATION_RELOAD_FINISHED)})};t.HuHorizonBootController.prototype._startRegularBoot=function(){this._prepareBoot(t.HuBootControllerStatus.BOOT_IN_PROGRESS);return this._processBootActionsInOrder().then(e=>{this._setStatus(t.HuBootControllerStatus.BOOT_FINISHED);return e},null)};t.HuHorizonBootController.prototype._startWorkspaceSwitch=function(){return this._switchWorkspaceInternal().then(e=>{this._setStatus(t.HuBootControllerStatus.WORKSPACE_SWITCH_FINISHED);return e},null)};t.HuHorizonBootController.prototype._switchWorkspaceInternal=function(){let e=t.XPromise.create((e,o)=>{let n=t.HuWorkspaceBootAction.create(this);n.presentWorkspaceDirectorySelection().onThen(i=>{if(t.notNull(i)){this._prepareBoot(t.HuBootControllerStatus.WORKSPACE_SWITCH_IN_PROGRESS);this._logBootActionStart(n);n.switchWorkspace(i).onThen(o=>{this._logBootActionFinish(n);this._processBootActionsInOrder().onThen(o=>{e(t.XBooleanValue.create(true))})}).onCatch(o)}else{o(t.XError.create("Missing workspace directory!"))}}).onCatch(t=>{this.logDebug("Workspace switch cancelled!")})});return e};t.HuHorizonBootController.prototype.addStatusChangedListener=function(e){this.m_statusChangedListeners.add(t.XConsumerHolder.create(e))};t.HuHorizonBootController.prototype.executeConfigurationReload=function(){this._prepareConfigurationReload();return this._startConfigurationReload()};t.HuHorizonBootController.prototype.executeRegularBoot=function(){this._prepareRegularBoot();return this._startRegularBoot()};t.HuHorizonBootController.prototype.executeWorkspaceSwitch=function(){this._prepareWorkspaceSwitch();return this._startWorkspaceSwitch()};t.HuHorizonBootController.prototype.finalizeMainControllerSetup=function(){let e=t.XPromise.create((e,o)=>{try{this.getMainController().finalizeControllerSetup();e(t.XBooleanValue.create(true))}catch(e){let n=t.XError.create("Error during boot finalization!").attachCause(t.XError.createWithThrowable(e));o(n)}});return e};t.HuHorizonBootController.prototype.getBootConfig=function(){return this.m_bootConfig};t.HuHorizonBootController.prototype.getConfigManager=function(){return this.getMainController().getConfigurationManager()};t.HuHorizonBootController.prototype.getCurrentStatus=function(){return this.m_currentStatus};t.HuHorizonBootController.prototype.getWorkspaceManager=function(){return this.getMainController().getWorkspaceManager()};t.HuHorizonBootController.prototype.initConfigManager=function(e){this.getMainController().initConfigManager(e);return t.XPromise.resolve(t.XBooleanValue.create(true))};t.HuHorizonBootController.prototype.initWorkspaceManager=function(t){this.getMainController().initWorkspaceManager(t);return this.getMainController().getWorkspaceManager().prepareSubDirectoriesIfNecessary()};t.HuHorizonBootController.prototype.releaseObject=function(){this.m_bootConfig=null;this.m_bootActionsSequenceList=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_bootActionsSequenceList);this.m_currentAction=null;this.m_currentStatus=null;this.m_statusChangedListeners=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_statusChangedListeners);this.m_bootScreen=t.XObjectExt.release(this.m_bootScreen);t.HuDfSubController.prototype.releaseObject.call(this)};t.HuHorizonBootController.prototype.removeStatusChangedListener=function(e){t.XCollectionUtils.removeIf(this.m_statusChangedListeners,t=>t.getConsumer()===e)};t.HuHorizonBootController.prototype.setBootConfig=function(t){this.m_bootConfig=t;this._ensureBootConfigExists()};t.HuErrorType=function(){};t.HuErrorType.prototype=new t.XErrorType;t.HuErrorType.prototype._ff_c="HuErrorType";t.HuErrorType.COMMAND_PLUGIN_ALREADY_RUNNING=null;t.HuErrorType.CONFIG_ERROR=null;t.HuErrorType.CONFIG_FILE_NOT_FOUND=null;t.HuErrorType.CONFIG_SYNTAX_ERROR=null;t.HuErrorType.MANIFEST_INVALID_NAME=null;t.HuErrorType.MANIFEST_MISSING_NAME=null;t.HuErrorType.MANIFEST_VALIDATION_ERROR=null;t.HuErrorType.MISSING_PLUGIN_STARTUP_INFO=null;t.HuErrorType.PLUGIN_CANNOT_BE_INITIALIZED_ERROR=null;t.HuErrorType.PLUGIN_ERROR=null;t.HuErrorType.PLUGIN_INITIALIZATION_ERROR=null;t.HuErrorType.PLUGIN_STARTUP_ERROR=null;t.HuErrorType.createHorizonError=function(e,o){return t.XErrorType.createError(new t.HuErrorType,e,o)};t.HuErrorType.staticSetupHorizon=function(){t.HuErrorType.CONFIG_ERROR=t.HuErrorType.createHorizonError("ConfigError",null);t.HuErrorType.CONFIG_FILE_NOT_FOUND=t.HuErrorType.createHorizonError("ConfigFileNotFound",t.HuErrorType.CONFIG_ERROR);t.HuErrorType.CONFIG_SYNTAX_ERROR=t.HuErrorType.createHorizonError("ConfigSyntaxError",t.HuErrorType.CONFIG_ERROR);t.HuErrorType.MANIFEST_VALIDATION_ERROR=t.HuErrorType.createHorizonError("HorizonManifestValidationError",null);t.HuErrorType.MANIFEST_MISSING_NAME=t.HuErrorType.createHorizonError("HorizonManifestMissingName",t.HuErrorType.MANIFEST_VALIDATION_ERROR);t.HuErrorType.MANIFEST_INVALID_NAME=t.HuErrorType.createHorizonError("HorizonManifestInvalidName",t.HuErrorType.MANIFEST_VALIDATION_ERROR);t.HuErrorType.PLUGIN_ERROR=t.HuErrorType.createHorizonError("PluginError",null);t.HuErrorType.PLUGIN_INITIALIZATION_ERROR=t.HuErrorType.createHorizonError("PluginInitializationError",t.HuErrorType.PLUGIN_ERROR);t.HuErrorType.PLUGIN_STARTUP_ERROR=t.HuErrorType.createHorizonError("PluginStartupError",t.HuErrorType.PLUGIN_INITIALIZATION_ERROR);t.HuErrorType.MISSING_PLUGIN_STARTUP_INFO=t.HuErrorType.createHorizonError("MissingPluginStartupInfo",t.HuErrorType.PLUGIN_STARTUP_ERROR);t.HuErrorType.PLUGIN_CANNOT_BE_INITIALIZED_ERROR=t.HuErrorType.createHorizonError("PluginCannotBeInitializedError",t.HuErrorType.PLUGIN_STARTUP_ERROR);t.HuErrorType.COMMAND_PLUGIN_ALREADY_RUNNING=t.HuErrorType.createHorizonError("CommandPluginAlreadyRunningError",t.HuErrorType.PLUGIN_STARTUP_ERROR)};t.HuHorizonMainController=function(){};t.HuHorizonMainController.prototype=new t.HuDfHorizonLogContext;t.HuHorizonMainController.prototype._ff_c="HuHorizonMainController";t.HuHorizonMainController.create=function(e){let o=new t.HuHorizonMainController;o._setupWithProgramInstance(e);return o};t.HuHorizonMainController.prototype.m_activeBootController=null;t.HuHorizonMainController.prototype.m_bootConfig=null;t.HuHorizonMainController.prototype.m_commandPluginManager=null;t.HuHorizonMainController.prototype.m_configurationManager=null;t.HuHorizonMainController.prototype.m_currentStatus=null;t.HuHorizonMainController.prototype.m_debugUtility=null;t.HuHorizonMainController.prototype.m_globalDataSpace=null;t.HuHorizonMainController.prototype.m_localNotificationCenter=null;t.HuHorizonMainController.prototype.m_loggerInstance=null;t.HuHorizonMainController.prototype.m_messageManager=null;t.HuHorizonMainController.prototype.m_pluginToolsService=null;t.HuHorizonMainController.prototype.m_prgStartArgStructure=null;t.HuHorizonMainController.prototype.m_programInstance=null;t.HuHorizonMainController.prototype.m_shellController=null;t.HuHorizonMainController.prototype.m_stateManager=null;t.HuHorizonMainController.prototype.m_statusChangedListeners=null;t.HuHorizonMainController.prototype.m_uiController=null;t.HuHorizonMainController.prototype.m_viewPluginManager=null;t.HuHorizonMainController.prototype.m_workspaceManager=null;t.HuHorizonMainController.prototype._createInvalidPluginMessagesIfNeeded=function(){let e=this.getConfigurationManager().getPluginsConfiguration().getInvalidPluginNames();if(t.notNull(e)&&e.size()>0){t.XCollectionUtils.forEach(e,e=>{let o=t.XStringUtils.concatenate3("The plugin with name ",e," was not found!");this.getMessageManager().addSystemWarningMessage("Invalid plugin!",null,o)})}};t.HuHorizonMainController.prototype._handleControllerReady=function(){this.logDebug("Init -> Controller ready...");this.m_activeBootController=t.XObjectExt.release(this.m_activeBootController);this._startHorizonFramework()};t.HuHorizonMainController.prototype._handleHorizonRunning=function(){this._setInitialStatus();this.logDebug("Init -> Startup complete! Horizon framework is running.");this.getDebugUtility().startupFinished();if(this.isRunningInDebugEnvironment()){this.logDebug("###### Running in debug environment ######");this.logDebug(t.XStringUtils.concatenate3("Startup time -> ",t.XLong.convertToString(this.getDebugUtility().getLastStartupTime()),"ms"))}};t.HuHorizonMainController.prototype._handleStatusChangedInternal=function(e){if(e===t.HuMainControllerStatus.BOOTING){this._prepareBoot()}else if(e===t.HuMainControllerStatus.RELOADING_CONFIGURATION){this._prepareConfigurationReload()}else if(e===t.HuMainControllerStatus.READY){this._handleControllerReady()}else if(e===t.HuMainControllerStatus.RUNNING){this._handleHorizonRunning()}};t.HuHorizonMainController.prototype._initializeAllConfigCommandPlugins=function(){this.logDebug("Init -> Initialize config command plugins");let e=this.getConfigurationManager().getPluginsConfiguration().getAllStartupCommandPlugins();return this.getCommandPluginManager().runAllCommandPlugins(e).onThenExt(e=>{this._processCommandPluginStartupResult(e);return t.XBooleanValue.create(true)})};t.HuHorizonMainController.prototype._notifyListenersStatusChanged=function(e){t.XCollectionUtils.forEach(this.m_statusChangedListeners,t=>{t.accept(e)})};t.HuHorizonMainController.prototype._prepareBoot=function(){this.logDebug("Init -> Prepare boot...");this._prepareControllerForStartup(true)};t.HuHorizonMainController.prototype._prepareConfigurationReload=function(){this.logDebug("Init -> Prepare configuration reload...");this._prepareControllerForStartup(false)};t.HuHorizonMainController.prototype._prepareControllerForStartup=function(e){this.getDebugUtility().startupStarted();this.getShellController().getMenuManager().setMenuVisible(false);if(e){this.m_messageManager=t.XObjectExt.release(this.m_messageManager);this.m_messageManager=t.HuHorizonMessageManager.create(this);this.m_workspaceManager=t.XObjectExt.release(this.m_workspaceManager)}else{this.m_messageManager.setStatusMessage(null);this.m_messageManager.clearAllMessages()}this.m_globalDataSpace=t.XObjectExt.release(this.m_globalDataSpace);this.m_pluginToolsService=t.XObjectExt.release(this.m_pluginToolsService);this.m_viewPluginManager=t.XObjectExt.release(this.m_viewPluginManager);this.m_commandPluginManager=t.XObjectExt.release(this.m_commandPluginManager);this.m_stateManager=t.XObjectExt.release(this.m_stateManager);this.m_uiController=t.XObjectExt.release(this.m_uiController);this.m_configurationManager=t.XObjectExt.release(this.m_configurationManager)};t.HuHorizonMainController.prototype._processCommandPluginStartupResult=function(e){try{t.XCollectionUtils.forEach(e,e=>{if(e.getStatus()===t.XPromiseState.REJECTED){let o=e.getReason();if(t.notNull(o)&&o.getErrorType().isTypeOf(t.HuErrorType.COMMAND_PLUGIN_ALREADY_RUNNING)){this.getMessageManager().addSystemWarningMessage("Command plugin already running!",null,o.getText())}}})}catch(t){this.logDebug("Error during command plugin startup processing!")}};t.HuHorizonMainController.prototype._registerAllNotificationsObserverIfNeeded=function(){if(this.isRunningInDebugEnvironment()){this.m_localNotificationCenter.addAllObserver((e,o)=>{this.logDebug(t.XStringUtils.concatenate2("Local notification posted -> ",e))})}};t.HuHorizonMainController.prototype._setInitialStatus=function(){if(!this.getConfigurationManager().getPluginsConfiguration().hasStartupViewPlugins()){this.getMessageManager().setStatusMessage("No startup document or component plugins specified in the configuration...")}else if(this.isRunningInDebugEnvironment()&&t.XStringUtils.isNullOrEmpty(this.getMessageManager().getStatus())){this.getMessageManager().setStatusMessage("Ready...")}};t.HuHorizonMainController.prototype._setupWithProgramInstance=function(e){this.m_programInstance=e;this.m_debugUtility=t.HuHorizonDebugUtility.create(this.getProcess());this.m_localNotificationCenter=t.XNotificationCenter.create();this._registerAllNotificationsObserverIfNeeded();this.m_loggerInstance=t.HuLogger.createNewLogger();this.m_loggerInstance.setDebugEnabled(this.m_debugUtility.isDebugEnvironment());this._setupLogger(this.m_loggerInstance);this.m_statusChangedListeners=t.XList.create();this.m_currentStatus=t.HuMainControllerStatus.INITIAL;this.m_shellController=t.HuHorizonShellController.create(this)};t.HuHorizonMainController.prototype._startHorizonFramework=function(){this.logDebug("Init -> Starting horizon framework...");let e=t.XPromise.create((e,o)=>{this.getShellController().setBusy(true);this._initializeAllConfigCommandPlugins().onFinally(()=>{this.getShellController().reInitShell();this.getShellController().setBusy(false);this.getUiController().reInitUi().onFinally(()=>{this.setControllerStatus(t.HuMainControllerStatus.RUNNING);e(t.XBooleanValue.create(true))})})});return e};t.HuHorizonMainController.prototype._throwInvalidStateException=function(){throw t.XException.createRuntimeException("Cannot replace manger instance as controller is not in boot state!")};t.HuHorizonMainController.prototype.addStatusChangedListener=function(e){this.m_statusChangedListeners.add(t.XConsumerHolder.create(e))};t.HuHorizonMainController.prototype.applyNewConfiguration=function(e){if(this.getCurrentBootConfig()!==null&&t.notNull(e)&&!this.getCurrentControllerStatus().isSetupPhase()){this.getCurrentBootConfig().setConfigString(t.PrUtils.serialize(e,false,false,0));this.getCurrentBootConfig().setConfigFilePath(null);this.getCurrentBootConfig().setShowSplashScreen(false);this.getCurrentBootConfig().setWorkspaceDirectoryPath(null);this.getWorkspaceManager().setIsVirtualWorkspace(true);this.reloadConfiguration()}};t.HuHorizonMainController.prototype.finalizeControllerSetup=function(){if(this.getCurrentControllerStatus().isSetupPhase()){this.logDebug("Init -> Finalize setup");let e=this.getConfigurationManager().getHorizonConfiguration().getFrameworkMode();this.logDebug(t.XStringUtils.concatenate3("Init -> Starting in framework mode [",e.getName(),"]"));this.logDebug("Init -> Initialize global data space");this.m_globalDataSpace=t.HuDataSpace.create();this.logDebug("Init -> Validating and grouping plugins from configuration");this.getConfigurationManager().getPluginsConfiguration().validateAndGroupPlugins();this._createInvalidPluginMessagesIfNeeded();this.logDebug("Init -> Create command plugin manager");this.m_commandPluginManager=t.HuHorizonCommandPluginManager.create(this);this.logDebug("Init -> Create view plugin manager");this.m_viewPluginManager=t.HuHorizonViewPluginManager.create(this);this.logDebug("Init -> Create state manager");this.m_stateManager=t.HuHorizonStateManager.create(this);this.logDebug("Init -> Create plugin tools service");this.m_pluginToolsService=t.HuPluginToolsService.create(this);this.logDebug("Init -> Create Ui controller");this.m_uiController=t.HuHorizonUiController.create(this)}else{this._throwInvalidStateException()}};t.HuHorizonMainController.prototype.getCommandPluginManager=function(){return this.m_commandPluginManager};t.HuHorizonMainController.prototype.getConfigurationManager=function(){return this.m_configurationManager};t.HuHorizonMainController.prototype.getCurrentBootConfig=function(){return this.m_bootConfig};t.HuHorizonMainController.prototype.getCurrentControllerStatus=function(){return this.m_currentStatus};t.HuHorizonMainController.prototype.getCurrentFrameworkMode=function(){return this.getConfigurationManager().getHorizonConfiguration().getFrameworkMode()};t.HuHorizonMainController.prototype.getDataSpace=function(){return this.m_globalDataSpace};t.HuHorizonMainController.prototype.getDebugUtility=function(){return this.m_debugUtility};t.HuHorizonMainController.prototype.getGenesis=function(){return this.getMainGenesis()};t.HuHorizonMainController.prototype.getLocalNotificationCenter=function(){return this.m_localNotificationCenter};t.HuHorizonMainController.prototype.getLocalStorage=function(){return this.getProcess().getLocalStorage()};t.HuHorizonMainController.prototype.getLogContextName=function(){return"Controller"};t.HuHorizonMainController.prototype.getMainController=function(){return this};t.HuHorizonMainController.prototype.getMainGenesis=function(){return this.getProgramInstance().getGenesis()};t.HuHorizonMainController.prototype.getMessageManager=function(){return this.m_messageManager};t.HuHorizonMainController.prototype.getPluginToolsService=function(){return this.m_pluginToolsService};t.HuHorizonMainController.prototype.getProcess=function(){return this.getProgramInstance().getProcess()};t.HuHorizonMainController.prototype.getProgramInstance=function(){return this.m_programInstance};t.HuHorizonMainController.prototype.getProgramStartArgStructure=function(){if(t.isNull(this.m_prgStartArgStructure)&&t.notNull(this.m_programInstance)){this.m_prgStartArgStructure=t.ProgramUtils.parseArgListToStructure(this.m_programInstance.getArgumentList())}return this.m_prgStartArgStructure};t.HuHorizonMainController.prototype.getSession=function(){return this.getProgramInstance().getSession()};t.HuHorizonMainController.prototype.getShellController=function(){return this.m_shellController};t.HuHorizonMainController.prototype.getStateManager=function(){return this.m_stateManager};t.HuHorizonMainController.prototype.getUiController=function(){return this.m_uiController};t.HuHorizonMainController.prototype.getViewPluginManager=function(){return this.m_viewPluginManager};t.HuHorizonMainController.prototype.getWorkspaceManager=function(){return this.m_workspaceManager};t.HuHorizonMainController.prototype.initConfigManager=function(e){if(this.getCurrentControllerStatus().isSetupPhase()){this.logDebug("Init -> Config manager");this.m_configurationManager=t.HuHorizonConfigurationManager.create(this,e)}else{this._throwInvalidStateException()}};t.HuHorizonMainController.prototype.initWorkspaceManager=function(e){if(this.getCurrentControllerStatus().isSetupPhase()){this.logDebug("Init -> Workspace manager");this.m_workspaceManager=t.HuHorizonWorkspaceManager.create(this,e)}else{this._throwInvalidStateException()}};t.HuHorizonMainController.prototype.initiateBoot=function(e){this.m_bootConfig=e;this.setControllerStatus(t.HuMainControllerStatus.BOOTING);this.m_activeBootController=t.HuHorizonBootController.create(this,this.m_bootConfig);let o=this.m_activeBootController.executeRegularBoot();o=o.onThen(e=>{this.setControllerStatus(t.HuMainControllerStatus.READY)});if(this.getShellController().isEmbedded()){o=o.onCatchExt(e=>{this.logDebug(t.XStringUtils.concatenate2("Error during boot: ",e.getText()));return t.XBooleanValue.create(true)})}return o};t.HuHorizonMainController.prototype.isRunningInDebugEnvironment=function(){return this.getDebugUtility().isDebugEnvironment()};t.HuHorizonMainController.prototype.releaseObject=function(){this.m_pluginToolsService=t.XObjectExt.release(this.m_pluginToolsService);this.m_viewPluginManager=t.XObjectExt.release(this.m_viewPluginManager);this.m_commandPluginManager=t.XObjectExt.release(this.m_commandPluginManager);this.m_stateManager=t.XObjectExt.release(this.m_stateManager);this.m_messageManager=t.XObjectExt.release(this.m_messageManager);this.m_activeBootController=t.XObjectExt.release(this.m_activeBootController);this.m_bootConfig=t.XObjectExt.release(this.m_bootConfig);this.m_uiController=t.XObjectExt.release(this.m_uiController);this.m_shellController=t.XObjectExt.release(this.m_shellController);this.m_workspaceManager=t.XObjectExt.release(this.m_workspaceManager);this.m_configurationManager=t.XObjectExt.release(this.m_configurationManager);this.m_globalDataSpace=t.XObjectExt.release(this.m_globalDataSpace);this.m_currentStatus=null;this.m_statusChangedListeners=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_statusChangedListeners);this.m_debugUtility=t.XObjectExt.release(this.m_debugUtility);this.m_loggerInstance=t.XObjectExt.release(this.m_loggerInstance);this.m_localNotificationCenter=t.XObjectExt.release(this.m_localNotificationCenter);this.m_prgStartArgStructure=t.XObjectExt.release(this.m_prgStartArgStructure);this.m_programInstance=null;t.HuDfHorizonLogContext.prototype.releaseObject.call(this)};t.HuHorizonMainController.prototype.reloadConfiguration=function(){this.m_activeBootController=t.HuHorizonBootController.create(this,this.m_bootConfig);this.m_activeBootController.addStatusChangedListener(e=>{if(e===t.HuBootControllerStatus.CONFIGURATION_RELOAD_IN_PROGRESS){this.setControllerStatus(t.HuMainControllerStatus.RELOADING_CONFIGURATION)}});this.m_activeBootController.executeConfigurationReload().onThen(e=>{this.setControllerStatus(t.HuMainControllerStatus.READY)})};t.HuHorizonMainController.prototype.removeStatusChangedListener=function(e){t.XCollectionUtils.removeIf(this.m_statusChangedListeners,t=>t.getConsumer()===e)};t.HuHorizonMainController.prototype.requestWorkspaceSwitch=function(){this.m_activeBootController=t.HuHorizonBootController.create(this,this.m_bootConfig);this.m_activeBootController.addStatusChangedListener(e=>{if(e===t.HuBootControllerStatus.WORKSPACE_SWITCH_IN_PROGRESS){this.setControllerStatus(t.HuMainControllerStatus.BOOTING)}});this.m_activeBootController.executeWorkspaceSwitch().onThen(e=>{this.setControllerStatus(t.HuMainControllerStatus.READY)})};t.HuHorizonMainController.prototype.setControllerStatus=function(e){if(t.notNull(e)&&this.m_currentStatus!==e){this.m_currentStatus=e;this.logDebug(t.XStringUtils.concatenate2("Status changed to: ",e.getName()));this._handleStatusChangedInternal(e);this._notifyListenersStatusChanged(e)}};t.HuHorizonMainController.prototype.setLoggerInstance=function(e){if(t.notNull(e)){this.m_loggerInstance=e}};t.HuComponentPluginController=function(){};t.HuComponentPluginController.prototype=new t.HuDfViewPluginController;t.HuComponentPluginController.prototype._ff_c="HuComponentPluginController";t.HuComponentPluginController.prototype._destroySpecificViewPlugin=function(){};t.HuComponentPluginController.prototype._getComponentPluginInstance=function(){try{return this._getPluginInstance()}catch(t){this._throwInvalidPluginTypeException()}return null};t.HuComponentPluginController.prototype._initSpecificViewPlugin=function(){this.getPluginWrapperView().addCssClass("ffHorizonComponentPlugin")};t.HuComponentPluginController.prototype._runSpecificPlugin=function(){this._getComponentPluginInstance().buildPluginUi(this.getGenesis())};t.HuComponentPluginController.prototype._setupSpecificPlugin=function(){return this._getComponentPluginInstance().setupPlugin(this)};t.HuComponentPluginController.prototype.getGenesis=function(){return this._getPluginGenesis()};t.HuComponentPluginController.prototype.getPluginType=function(){return t.HuPluginType.COMPONENT};t.HuDocumentPluginController=function(){};t.HuDocumentPluginController.prototype=new t.HuDfViewPluginController;t.HuDocumentPluginController.prototype._ff_c="HuDocumentPluginController";t.HuDocumentPluginController.prototype.m_adhocObjectsList=null;t.HuDocumentPluginController.prototype.m_documentDataSpace=null;t.HuDocumentPluginController.prototype.m_documentLayoutManager=null;t.HuDocumentPluginController.prototype.m_documentViewPluginManager=null;t.HuDocumentPluginController.prototype.m_globalDataSpaceChangedUuidList=null;t.HuDocumentPluginController.prototype.m_layoutConfiguration=null;t.HuDocumentPluginController.prototype.m_messageCenter=null;t.HuDocumentPluginController.prototype._cleanUpGlobalDataSpaceListeners=function(){if(t.notNull(this.m_globalDataSpaceChangedUuidList)&&this.m_globalDataSpaceChangedUuidList.size()>0){if(this._getGlobalDataSpaceBase()!==null){t.XCollectionUtils.forEach(this.m_globalDataSpaceChangedUuidList,t=>{this._getGlobalDataSpaceBase().removeChangeConsumerByUuid(t)})}this.m_globalDataSpaceChangedUuidList.clear()}this.m_globalDataSpaceChangedUuidList=t.XObjectExt.release(this.m_globalDataSpaceChangedUuidList)};t.HuDocumentPluginController.prototype._destroySpecificViewPlugin=function(){this._cleanUpGlobalDataSpaceListeners();this.m_documentViewPluginManager=t.XObjectExt.release(this.m_documentViewPluginManager);this.m_documentLayoutManager=t.XObjectExt.release(this.m_documentLayoutManager);this.m_adhocObjectsList=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_adhocObjectsList);this.m_layoutConfiguration=t.XObjectExt.release(this.m_layoutConfiguration);this.m_messageCenter=t.XObjectExt.release(this.m_messageCenter);this.m_documentDataSpace=t.XObjectExt.release(this.m_documentDataSpace)};t.HuDocumentPluginController.prototype._ensurePluginModuleDependencies=function(t){return this.getMainController().getPluginToolsService().ensureModuleDependencies(t)};t.HuDocumentPluginController.prototype._extractLayoutConfiguration=function(e,o){let n=e;if(!t.XCollectionUtils.hasElements(n)){n=this._getDocumentAutoLayoutConfiguration()}if(t.XCollectionUtils.hasElements(n)){o.processJsonElement(n)}else{o.setLayoutType(t.HuLayoutType.FLEX)}};t.HuDocumentPluginController.prototype._getDocumentAutoLayoutConfiguration=function(){try{return this._getDocumentPluginInstance().getAutoLayoutConfiguration()}catch(t){this.logDebug("Missing getAutoLayoutConfiguration method on the document plugin instance!")}return null};t.HuDocumentPluginController.prototype._getDocumentLayoutManager=function(){return this.m_documentLayoutManager};t.HuDocumentPluginController.prototype._getDocumentPluginInstance=function(){try{return this._getPluginInstance()}catch(t){this._throwInvalidPluginTypeException()}return null};t.HuDocumentPluginController.prototype._getDocumentViewPluginManager=function(){return this.m_documentViewPluginManager};t.HuDocumentPluginController.prototype._getGlobalDataSpaceBase=function(){return this.getGlobalDataSpace()};t.HuDocumentPluginController.prototype._initLayoutConfiguration=function(){let e=t.HuLayoutConfigurationProcessor.create(this);let o=this.getPluginStartupInfo().getLayoutStructure();this._extractLayoutConfiguration(o,e);return e};t.HuDocumentPluginController.prototype._initSpecificViewPlugin=function(){this.getPluginWrapperView().addCssClass("ffHorizonDocumentPlugin");this.getPluginWrapperView().setMinHeight(t.UiCssLength.create("0"));this.getPluginWrapperView().setFlex("1");this.m_documentDataSpace=t.HuDataSpace.create();this.m_layoutConfiguration=this._initLayoutConfiguration();this.m_documentLayoutManager=t.HuHorizonLayoutManager.create(this,this.m_layoutConfiguration);this.m_adhocObjectsList=t.XList.create();this.m_documentViewPluginManager=t.HuHorizonViewPluginManager.create(this);this.m_documentViewPluginManager.setPluginInitializedConsumer(this.m_documentLayoutManager.addPluginView.bind(this.m_documentLayoutManager));this.m_documentViewPluginManager.setPluginRunErrorConsumer(this.m_documentLayoutManager.removePluginView.bind(this.m_documentLayoutManager));this.setRoot(this.m_documentLayoutManager.getView())};t.HuDocumentPluginController.prototype._postSetWorkspaceTitleNotification=function(e){let o=t.XNotificationData.create();o.putString(t.HuHorizonInternalNotifications.NEW_WORKSPACE_TITLE_NOTIFI_DATA,e);this.getLocalNotificationCenter().postNotificationWithName(t.HuHorizonInternalNotifications.SET_WORKSPACE_TITLE,o)};t.HuDocumentPluginController.prototype._runSpecificPlugin=function(){this._getDocumentPluginInstance().layoutDocument(this)};t.HuDocumentPluginController.prototype._setupSpecificPlugin=function(){return this._getDocumentPluginInstance().setupPlugin(this)};t.HuDocumentPluginController.prototype.addGlobalDataSpaceChangedListener=function(e){if(t.isNull(this.m_globalDataSpaceChangedUuidList)){this.m_globalDataSpaceChangedUuidList=t.XList.create()}let o=this._getGlobalDataSpaceBase().addChangeConsumer(e);if(t.XStringUtils.isNotNullAndNotEmpty(o)){this.m_globalDataSpaceChangedUuidList.add(o)}return o};t.HuDocumentPluginController.prototype.addNewComponentPlugin=function(e,o,n){let i=t.HuPluginStartupInfo.createExt(e,o,null,null,n);return this._ensurePluginModuleDependencies(e).onThenPromise(t=>this._getDocumentViewPluginManager().runViewPlugin(i).onThenExt(t=>t.getUuid()))};t.HuDocumentPluginController.prototype.createNewLayoutManager=function(e){if(!t.XCollectionUtils.hasElements(e)){throw t.XException.createIllegalArgumentException("Cannot create new descendent layout without a valid configuration!")}let o=this.getMainController();let n=t.HuHorizonConfigurationManager.create(o,e);this.m_adhocObjectsList.add(n);let i=n.getPluginsConfiguration();i.validateAndGroupPlugins();let r=i.getAllStartupViewPlugins();let s=t.HuLayoutConfigurationProcessor.create(n);this.m_adhocObjectsList.add(s);let a=n.getLayoutConfiguration().getLayoutStructure();this._extractLayoutConfiguration(a,s);let u=t.HuHorizonLayoutManager.create(this,s);this.m_adhocObjectsList.add(u);let l=t.HuHorizonViewPluginManager.create(o);this.m_adhocObjectsList.add(l);l.setPluginInitializedConsumer(u.addPluginView.bind(u));l.setPluginRunErrorConsumer(u.removePluginView.bind(u));return l.runAllViewPluginsInOrder(r).onThenExt(t=>u)};t.HuDocumentPluginController.prototype.destroyComponentPlugin=function(e){let o=this._getDocumentViewPluginManager().getPluginByUuid(e);if(t.notNull(o)){this._getDocumentLayoutManager().removePluginView(o);this._getDocumentViewPluginManager().killPluginByUuid(e)}};t.HuDocumentPluginController.prototype.getAllAvailableComponentPlugins=function(){return t.HuPluginRegistryBase.getAllLoadedPluginNamesByType(t.HuPluginType.COMPONENT)};t.HuDocumentPluginController.prototype.getAutoLayoutView=function(){return this._getDocumentLayoutManager().getView()};t.HuDocumentPluginController.prototype.getDataSpace=function(){return this.m_documentDataSpace};t.HuDocumentPluginController.prototype.getGenesis=function(){return this._getPluginGenesis()};t.HuDocumentPluginController.prototype.getGlobalDataSpace=function(){return this.getMainController().getDataSpace()};t.HuDocumentPluginController.prototype.getMainController=function(){return this._getParentController().getMainController()};t.HuDocumentPluginController.prototype.getMessageCenter=function(){if(t.isNull(this.m_messageCenter)){this.m_messageCenter=t.UiMessageCenter.createMessageCenter(this.getGenesis())}return this.m_messageCenter};t.HuDocumentPluginController.prototype.getPluginType=function(){return t.HuPluginType.DOCUMENT};t.HuDocumentPluginController.prototype.getPluginView=function(e){let o=this._getDocumentViewPluginManager().getPluginByUuid(e);if(t.notNull(o)){return o.getPluginWrapperView()}return null};t.HuDocumentPluginController.prototype.hideComponentPlugin=function(e){let o=this._getDocumentViewPluginManager().getPluginByUuid(e);if(t.notNull(o)){this._getDocumentLayoutManager().removePluginView(o)}};t.HuDocumentPluginController.prototype.newComponentPlugin=function(e,o,n){let i=t.HuPluginStartupInfo.createExt(e,o,null,null,n);return this._ensurePluginModuleDependencies(e).onThenPromise(t=>this._getDocumentViewPluginManager().initializeViewPlugin(i).onThenPromise(t=>t.run().onThenExt(e=>t.getUuid())))};t.HuDocumentPluginController.prototype.removeGlobalDataSpaceChangedListener=function(e){this._getGlobalDataSpaceBase().removeChangeConsumerByUuid(e);if(t.notNull(this.m_globalDataSpaceChangedUuidList)){this.m_globalDataSpaceChangedUuidList.removeElement(e)}};t.HuDocumentPluginController.prototype.setRoot=function(t){if(this.getPluginWrapperView().getContent()===this._getDocumentLayoutManager().getView()){this.getPluginWrapperView().setContent(null)}this._getPluginGenesis().setRoot(t)};t.HuDocumentPluginController.prototype.setWorkspaceTitle=function(e){if(t.XStringUtils.isNotNullAndNotEmpty(e)){if(this._isRootLevelPlugin()){this._postSetWorkspaceTitleNotification(e)}else{this.logDebug("Only plugins which are direct main controller children can change the workspace title!")}}};t.HuDocumentPluginController.prototype.showComponentPlugin=function(e){let o=this._getDocumentViewPluginManager().getPluginByUuid(e);if(t.notNull(o)){this._getDocumentLayoutManager().addPluginView(o)}};t.HuHorizonLayoutManager=function(){};t.HuHorizonLayoutManager.prototype=new t.HuDfHorizonManager;t.HuHorizonLayoutManager.prototype._ff_c="HuHorizonLayoutManager";t.HuHorizonLayoutManager.create=function(e,o){let n=new t.HuHorizonLayoutManager;n.m_layoutConfiguration=o;n._setupWithGenericController(e);return n};t.HuHorizonLayoutManager.prototype.m_activePluginLayout=null;t.HuHorizonLayoutManager.prototype.m_layoutConfiguration=null;t.HuHorizonLayoutManager.prototype._getManagerName=function(){return"Layout Manager"};t.HuHorizonLayoutManager.prototype._setupManager=function(){if(t.isNull(this.m_layoutConfiguration)){this.logDebug("No layout configuration specified! Using default layout settings!")}this.m_activePluginLayout=t.HuLayoutFactory.createLayout(this,this.getLayoutType());if(t.isNull(this.m_activePluginLayout)){this.logDebug("Critical error during layout initialization!")}this.logDebug(t.XStringUtils.concatenate2("Using layout: ",this.getLayoutType().getName()))};t.HuHorizonLayoutManager.prototype.addPluginView=function(t){this.m_activePluginLayout.addPluginView(t)};t.HuHorizonLayoutManager.prototype.getActivePluginLayout=function(){return this.m_activePluginLayout};t.HuHorizonLayoutManager.prototype.getLayoutConfigJson=function(){let e=null;if(t.notNull(this.m_layoutConfiguration)){e=this.m_layoutConfiguration.getLayoutConfigJson()}return e};t.HuHorizonLayoutManager.prototype.getLayoutStructure=function(){let e=null;if(t.notNull(this.m_layoutConfiguration)){e=this.m_layoutConfiguration.getLayoutStructure()}return e};t.HuHorizonLayoutManager.prototype.getLayoutType=function(){let e=null;if(t.notNull(this.m_layoutConfiguration)){e=this.m_layoutConfiguration.getLayoutType()}if(t.isNull(e)){e=t.HuLayoutType.INTERACTIVE_SPLITTER}return e};t.HuHorizonLayoutManager.prototype.getView=function(){return this.m_activePluginLayout.getView()};t.HuHorizonLayoutManager.prototype.isPluginVisible=function(t){return this.m_activePluginLayout.isPluginVisible(t)};t.HuHorizonLayoutManager.prototype.releaseObject=function(){this.m_activePluginLayout=t.XObjectExt.release(this.m_activePluginLayout);this.m_layoutConfiguration=null;t.HuDfHorizonManager.prototype.releaseObject.call(this)};t.HuHorizonLayoutManager.prototype.removePluginView=function(t){this.m_activePluginLayout.removePluginView(t)};t.HuHorizonCommandPluginManager=function(){};t.HuHorizonCommandPluginManager.prototype=new t.HuDfHorizonPluginManager;t.HuHorizonCommandPluginManager.prototype._ff_c="HuHorizonCommandPluginManager";t.HuHorizonCommandPluginManager.create=function(e){let o=new t.HuHorizonCommandPluginManager;o._setupWithParentController(e);return o};t.HuHorizonCommandPluginManager.prototype.m_commandPluginsStartingInProgess=null;t.HuHorizonCommandPluginManager.prototype._getActionName=function(e){let o=t.XStringTokenizer.splitString(e,".");if(t.notNull(o)&&o.size()===2){return o.get(1)}return null};t.HuHorizonCommandPluginManager.prototype._getCommandSpace=function(e){let o=this.getAllRunningPlugins();return t.XCollectionUtils.findFirst(o,o=>t.XString.isEqual(o.getCommandSpaceName(),e))};t.HuHorizonCommandPluginManager.prototype._getCommandSpaceName=function(e){let o=t.XStringTokenizer.splitString(e,".");if(t.notNull(o)&&o.size()===2){return o.get(0)}return null};t.HuHorizonCommandPluginManager.prototype._getManagerName=function(){return"Command Plugin Manager"};t.HuHorizonCommandPluginManager.prototype._initializeNewCommandPlugin=function(e){this._onBeforePluginInit(e);return t.HuPluginControllerFactory.createNewController(this._getPluginParentController(),e)};t.HuHorizonCommandPluginManager.prototype._setupPluginManager=function(){this.m_commandPluginsStartingInProgess=t.XHashSetOfString.create()};t.HuHorizonCommandPluginManager.prototype._validateActionId=function(e){let o=t.XStringTokenizer.splitString(e,".");return t.notNull(o)&&o.size()===2};t.HuHorizonCommandPluginManager.prototype.actionByIdExists=function(e){let o=this._validateActionId(e);if(o){let o=this._getCommandSpaceName(e);let n=this._getCommandSpace(o);if(t.notNull(n)){let t=this._getActionName(e);if(n.hasAction(t)){return true}}}return false};t.HuHorizonCommandPluginManager.prototype.actionExists=function(e,o){return this.actionByIdExists(t.HuUtils.generateActionId(e,o))};t.HuHorizonCommandPluginManager.prototype.executeAction=function(e,o,n){let i="Unknown error during action execution!";let r=this._validateActionId(e);if(r){let r=this._getCommandSpaceName(e);let s=this._getCommandSpace(r);if(t.notNull(s)){let a=this._getActionName(e);if(s.hasAction(a)){let e=s.executeCommandSpaceAction(a,o,n);if(t.isNull(e)){e=t.XPromise.resolve(t.XBooleanValue.create(true))}return e}else{i=t.XStringUtils.concatenate4("Action ",a," not found on command space ",r)}}else{i=t.XStringUtils.concatenate2("Command space not found: ",r)}}else{i=t.XStringUtils.concatenate2("Invalid action id: ",e)}this.logInfo(i);return t.XPromise.reject(t.XError.create(i))};t.HuHorizonCommandPluginManager.prototype.getAllActionIds=function(){let e=t.XList.create();t.XCollectionUtils.forEach(this.getAllRunningPlugins(),t=>{e.addAll(t.getAllActionNames())});return e};t.HuHorizonCommandPluginManager.prototype.getAllRunningCommandSpaceNames=function(){let e=this.getAllRunningPlugins();return t.XCollectionUtils.map(e,t=>t.getCommandSpaceName())};t.HuHorizonCommandPluginManager.prototype.isCommandSpaceRunning=function(e){let o=this.getAllRunningPlugins();return t.XCollectionUtils.contains(o,o=>t.XString.isEqual(o.getCommandSpaceName(),e))};t.HuHorizonCommandPluginManager.prototype.releaseObject=function(){this.m_commandPluginsStartingInProgess.clear();this.m_commandPluginsStartingInProgess=t.XObjectExt.release(this.m_commandPluginsStartingInProgess);t.HuDfHorizonPluginManager.prototype.releaseObject.call(this)};t.HuHorizonCommandPluginManager.prototype.runAllCommandPlugins=function(e){if(t.notNull(e)&&e.hasElements()){let o=t.XPromiseList.create();t.XCollectionUtils.forEach(e,e=>{let n=this.runCommandPlugin(e);n.onCatch(e=>{this.logDebug(t.XStringUtils.concatenate2("Error starting plugin: ",e.getText()))});o.add(n)});let n=t.XPromise.allSettled(o);return n}return t.XPromise.resolve(t.XList.create())};t.HuHorizonCommandPluginManager.prototype.runCommandPlugin=function(e){if(t.isNull(e)){return t.XPromise.reject(t.XError.create("Cannot create plugin instance! Missing plugin start info!").setErrorType(t.HuErrorType.MISSING_PLUGIN_STARTUP_INFO))}let o=e.getPluginName();if(!t.HuPluginRegistryBase.canPluginBeInitialized(o)){this.logDebug(t.XStringUtils.concatenate2("Plugin not available, cannot create instance -> ",o));return t.XPromise.reject(t.XError.create(t.XStringUtils.concatenate3("The command plugin with name ",o," cannot be found!")).setErrorType(t.HuErrorType.PLUGIN_CANNOT_BE_INITIALIZED_ERROR))}if(this.isCommandSpaceRunning(o)||this.m_commandPluginsStartingInProgess.contains(o)){this.logDebug(t.XStringUtils.concatenate2("Command plugin already running --\x3e ",o));return t.XPromise.reject(t.XError.create(t.XStringUtils.concatenate3("The command plugin with name ",o," is already running!")).setErrorType(t.HuErrorType.COMMAND_PLUGIN_ALREADY_RUNNING))}this.m_commandPluginsStartingInProgess.add(o);return this._initializeNewCommandPlugin(e).onThenPromise(t=>this._runPlugin(t).onFinally(()=>{this.m_commandPluginsStartingInProgess.removeElement(o)}))};t.HuHorizonViewPluginManager=function(){};t.HuHorizonViewPluginManager.prototype=new t.HuDfHorizonPluginManager;t.HuHorizonViewPluginManager.prototype._ff_c="HuHorizonViewPluginManager";t.HuHorizonViewPluginManager.create=function(e){let o=new t.HuHorizonViewPluginManager;o._setupWithParentController(e);return o};t.HuHorizonViewPluginManager.prototype.m_pluginInitialitedConsumer=null;t.HuHorizonViewPluginManager.prototype.m_pluginRunErrorConsumer=null;t.HuHorizonViewPluginManager.prototype._getManagerName=function(){return"View Plugin Manager"};t.HuHorizonViewPluginManager.prototype._initializeNewGenericViewPlugin=function(e){this._onBeforePluginInit(e);return t.HuPluginControllerFactory.createNewController(this._getPluginParentController(),e)};t.HuHorizonViewPluginManager.prototype._notifyPluginInitialized=function(e){if(t.notNull(this.m_pluginInitialitedConsumer)){this.m_pluginInitialitedConsumer(e)}};t.HuHorizonViewPluginManager.prototype._notifyPluginRunError=function(e){if(t.notNull(this.m_pluginRunErrorConsumer)){this.m_pluginRunErrorConsumer(e)}};t.HuHorizonViewPluginManager.prototype._setupPluginManager=function(){};t.HuHorizonViewPluginManager.prototype.initializeViewPlugin=function(e){if(t.isNull(e)){return t.XPromise.reject(t.XError.create("Cannot create plugin instance! Missing plugin start info!").setErrorType(t.HuErrorType.MISSING_PLUGIN_STARTUP_INFO))}let o=e.getPluginName();if(!t.HuPluginRegistryBase.canPluginBeInitialized(o)){this.logDebug(t.XStringUtils.concatenate2("Plugin not available, cannot create instance -> ",o));return t.XPromise.reject(t.XError.create(t.XStringUtils.concatenate3("The view plugin with name ",o," cannot be found!")).setErrorType(t.HuErrorType.PLUGIN_CANNOT_BE_INITIALIZED_ERROR))}return this._initializeNewGenericViewPlugin(e)};t.HuHorizonViewPluginManager.prototype.releaseObject=function(){this.m_pluginInitialitedConsumer=null;this.m_pluginRunErrorConsumer=null;t.HuDfHorizonPluginManager.prototype.releaseObject.call(this)};t.HuHorizonViewPluginManager.prototype.runAllViewPlugins=function(e){if(t.notNull(e)&&e.hasElements()){let o=t.XPromiseList.create();t.XCollectionUtils.forEach(e,e=>{let n=this.runViewPlugin(e);n.onCatch(e=>{this.logDebug(t.XStringUtils.concatenate2("Error starting plugin: ",e.getText()))});o.add(n)});let n=t.XPromise.allSettled(o);return n.onThenExt(e=>{let o=t.XList.create();t.XCollectionUtils.forEach(e,e=>{if(e.getStatus()===t.XPromiseState.FULFILLED){o.add(e.getValue())}});return o})}return t.XPromise.resolve(t.XList.create())};t.HuHorizonViewPluginManager.prototype.runAllViewPluginsInOrder=function(e){if(t.notNull(e)&&e.hasElements()){let o=t.XPromiseList.create();t.XCollectionUtils.forEach(e,e=>{let n=this.initializeViewPlugin(e);n.onCatch(e=>{this.logDebug(t.XStringUtils.concatenate2("Error during plugin initialization: ",e.getText()))});o.add(n)});let n=t.XPromise.allSettled(o);return n.onThenPromise(o=>{let n=t.XList.create();t.XCollectionUtils.forEach(o,o=>{if(o.getStatus()===t.XPromiseState.FULFILLED){let t=o.getValue();let i=e.getIndex(t.getPluginStartupInfo());if(i>=n.size()){i=n.size()}n.insert(i,t)}});let i=t.XPromiseList.create();let r=t.XList.create();t.XCollectionUtils.forEach(n,t=>{r.add(t);this._notifyPluginInitialized(t);let e=this._runPlugin(t).onCatch(e=>{r.removeElement(t);this._notifyPluginRunError(t)});i.add(e)});let s=t.XPromise.allSettled(i);return s.onThenExt(t=>r)})}return t.XPromise.resolve(t.XList.create())};t.HuHorizonViewPluginManager.prototype.runViewPlugin=function(t){return this.initializeViewPlugin(t).onThenPromise(t=>{this._notifyPluginInitialized(t);return this._runPlugin(t).onCatch(e=>{this._notifyPluginRunError(t)})})};t.HuHorizonViewPluginManager.prototype.setPluginInitializedConsumer=function(t){this.m_pluginInitialitedConsumer=t};t.HuHorizonViewPluginManager.prototype.setPluginRunErrorConsumer=function(t){this.m_pluginRunErrorConsumer=t};t.HuHorizonStatusBarManager=function(){};t.HuHorizonStatusBarManager.prototype=new t.HuDfHorizonManager;t.HuHorizonStatusBarManager.prototype._ff_c="HuHorizonStatusBarManager";t.HuHorizonStatusBarManager.ACTIVITY_INDICATOR_ICON_BASE64="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAsQAAALEBxi1JjQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAMUSURBVEiJrZZLbFVVFIa/f5/Ti7UWq4bYFNHgQEwkyqAiieiAxGBMjGmJqEQiAx048ZmYaNL2WkwLEZSXGlNmTUysASJOQElQGBGMKWEAxoF1QlQMYNPXvfec/TvoU0ofof2Ha6/z/Wutfc7ZW8ykom9RyH8XnIjmMLXJMd7R8Iz5M0gzruzzEl3L+4D6scigxNG4Ktl6+jGaJb7AvLT+Pv0wm0G4YfTDrEnX8l+nwAFqiFxhs3IFlgJ3ElgG8O0FNx885zfn7sBWaM92W3p7vGqgBkDmy9iavI5kgJ8v+dbGBg0dP+eagSXu7+tH764N0wr+XyC055+NwS37Y8ekEUCiayocoLFBQwAbH9HgPyUdWlpQ1+wdtGevCrqAaLONtrR7bFzP4+QQRcUbAaaq86zvHyn5yL9l/bRng94ASAEoul7knwIYvU9b0j3xVFv6zVzgcWUl1lwZ0cPG6cRUAILyD4DbgDPEsGu+wOvVsl6HC4FNaaLHx2Maex3/BOosb6Sl6vubNRjX1uNeeXmIF9edY2fK1exJpDrgEnl6YqFwgBD5/HLFT59crZGUEBqxEZzyPDZyPvpjhGOJWHF7HV+lIXq5Bdi/LQYc4Mcm7QX2AqSIaoAYQmmxDB7o8fKBgXx/JefrFPsvJIJdvyjzASplmoczNUVzbxoV+oQxrFokPlcrdAexuhDDLlH0gwr5BaDimNRT1JXFMgIIFHURdB6oIomvLBSYHqg8lezOhsKOyp5RA8BwAEB2Kx1etqCKS7rbw65GapiM9jhRe96r9sxqz06yz0tuiv6eR/ex03eMhyb/psXyGoVwCqgFvnNMXqao/nmBP3F1GMgPesRbHDnKjqrnJjqaNCj0Wt4MlIFnFbKzbM+emRO+vbJBA/GMM7ZQGj2Lpi5PP5M/Kq9TDD3AitEM/WJzBOJplP4NZMTsHhQelb0JWEvZUCK64LfoKOyf3QCgw3eFctbqoNdg9EufJgNlw4hMlc9b6Qt06uL1aTPfKgBa/BAx2ybpCeyVNrXKVUAexBp2iCdR1U461DsT4j8tvEUHScegaAAAAABJRU5ErkJggg==";t.HuHorizonStatusBarManager.ICON_MARGIN="0 0.375rem";t.HuHorizonStatusBarManager.create=function(e){let o=new t.HuHorizonStatusBarManager;o._setupWithGenericController(e);return o};t.HuHorizonStatusBarManager.prototype.m_clearAllMessagesObserverId=null;t.HuHorizonStatusBarManager.prototype.m_clearMessagesObserverId=null;t.HuHorizonStatusBarManager.prototype.m_didRender=false;t.HuHorizonStatusBarManager.prototype.m_errorsIcon=null;t.HuHorizonStatusBarManager.prototype.m_hideNetworkActivityIndicatorObserverId=null;t.HuHorizonStatusBarManager.prototype.m_infoIcon=null;t.HuHorizonStatusBarManager.prototype.m_networkActivityIndicator=null;t.HuHorizonStatusBarManager.prototype.m_newMessagesObserverId=null;t.HuHorizonStatusBarManager.prototype.m_showNetworkActivityIndicatorObserverId=null;t.HuHorizonStatusBarManager.prototype.m_statusLabel=null;t.HuHorizonStatusBarManager.prototype.m_statusMessageChangedObserverId=null;t.HuHorizonStatusBarManager.prototype.m_successIcon=null;t.HuHorizonStatusBarManager.prototype.m_warningsIcon=null;t.HuHorizonStatusBarManager.prototype.m_wrapperLayout=null;t.HuHorizonStatusBarManager.prototype._addMessage=function(e){if(t.notNull(e)){if(e.getMessageType()===t.HuMessageType.INFORMATION){this._addMessageToIconWidget(e,this._getInfoMessageIcon())}else if(e.getMessageType()===t.HuMessageType.SUCCESS){this._addMessageToIconWidget(e,this._getSuccessMessageIcon())}else if(e.getMessageType()===t.HuMessageType.WARNING){this._addMessageToIconWidget(e,this._getWarningMessageIcon())}else if(e.getMessageType()===t.HuMessageType.ERROR){this._addMessageToIconWidget(e,this._getErrorMessageIcon());this._presentErrorMessagePopoverIfNecessary()}}};t.HuHorizonStatusBarManager.prototype._addMessageToIconWidget=function(e,o){if(t.notNull(e)&&t.notNull(o)){o.addMessage(e.getTitle(),e.getSubtitle(),e.getDescription(),e.getMessageGroup().getDisplayName());if(!o.isVisible()&&o.getNumberOfMessages()>0){o.setVisible(true)}}};t.HuHorizonStatusBarManager.prototype._clearAllMessages=function(){this._clearMessagesByType(t.HuMessageType.INFORMATION);this._clearMessagesByType(t.HuMessageType.SUCCESS);this._clearMessagesByType(t.HuMessageType.WARNING);this._clearMessagesByType(t.HuMessageType.ERROR)};t.HuHorizonStatusBarManager.prototype._clearMessagesByType=function(e){if(e===t.HuMessageType.INFORMATION){this._clearMessagesForIconWidget(this._getInfoMessageIcon())}else if(e===t.HuMessageType.SUCCESS){this._clearMessagesForIconWidget(this._getSuccessMessageIcon())}else if(e===t.HuMessageType.WARNING){this._clearMessagesForIconWidget(this._getWarningMessageIcon())}else if(e===t.HuMessageType.ERROR){this._clearMessagesForIconWidget(this._getErrorMessageIcon())}};t.HuHorizonStatusBarManager.prototype._clearMessagesForIconWidget=function(e){if(t.notNull(e)){e.clearAllMessages();if(e.isVisible()&&e.getNumberOfMessages()===0){e.setVisible(false)}}};t.HuHorizonStatusBarManager.prototype._createStatusBarIfNeeded=function(){if(t.isNull(this.m_wrapperLayout)){this.m_wrapperLayout=this.getGenesis().newControl(t.UiType.FLEX_LAYOUT);this.m_wrapperLayout.addCssClass("ffHorizonStatusBar");this.m_wrapperLayout.setAlignItems(t.UiFlexAlignItems.CENTER);this.m_wrapperLayout.setFlex("0 0 auto");this.m_wrapperLayout.setBackgroundDesign(t.UiBackgroundDesign.SOLID);this.m_wrapperLayout.setPadding(t.UiCssBoxEdges.create("0.375rem"));this.m_wrapperLayout.setHeight(t.UiCssLength.create("2rem"));this.m_wrapperLayout.registerOnAfterRender(t.UiLambdaAfterRenderListener.create(this._handleStatusBarRendered.bind(this)));this.m_wrapperLayout.addItem(this._getStatusLabel());this.m_wrapperLayout.addItem(this._getInfoMessageIcon().getView());this.m_wrapperLayout.addItem(this._getSuccessMessageIcon().getView());this.m_wrapperLayout.addItem(this._getWarningMessageIcon().getView());this.m_wrapperLayout.addItem(this._getErrorMessageIcon().getView());this.m_wrapperLayout.addItem(this._getNetworkActivityIndicator())}return this.m_wrapperLayout};t.HuHorizonStatusBarManager.prototype._getErrorMessageIcon=function(){if(t.isNull(this.m_errorsIcon)){this.m_errorsIcon=t.UtMessageIconWidget.create(this.getGenesis(),t.UiMessageType.ERROR);this.m_errorsIcon.setMargin(t.UiCssBoxEdges.create(t.HuHorizonStatusBarManager.ICON_MARGIN));this.m_errorsIcon.setVisible(false);this.m_errorsIcon.setShowClearButton(true);this.m_errorsIcon.setClearPressProcedure(()=>{this._clearMessagesByType(t.HuMessageType.ERROR);this._postClearMessagesPressedNotification(t.HuMessageType.ERROR)})}return this.m_errorsIcon};t.HuHorizonStatusBarManager.prototype._getInfoMessageIcon=function(){if(t.isNull(this.m_infoIcon)){this.m_infoIcon=t.UtMessageIconWidget.create(this.getGenesis(),t.UiMessageType.INFORMATION);this.m_infoIcon.setMargin(t.UiCssBoxEdges.create(t.HuHorizonStatusBarManager.ICON_MARGIN));this.m_infoIcon.setVisible(false);this.m_infoIcon.setShowClearButton(true);this.m_infoIcon.setClearPressProcedure(()=>{this._clearMessagesByType(t.HuMessageType.INFORMATION);this._postClearMessagesPressedNotification(t.HuMessageType.INFORMATION)})}return this.m_infoIcon};t.HuHorizonStatusBarManager.prototype._getManagerName=function(){return"StatusBar Manager"};t.HuHorizonStatusBarManager.prototype._getNetworkActivityIndicator=function(){if(t.isNull(this.m_networkActivityIndicator)){this.m_networkActivityIndicator=this.getGenesis().newControl(t.UiType.ACTIVITY_INDICATOR);this.m_networkActivityIndicator.setIconSize(t.UiCssLength.create("1rem"));this.m_networkActivityIndicator.setSrc(t.HuHorizonStatusBarManager.ACTIVITY_INDICATOR_ICON_BASE64);this.m_networkActivityIndicator.setTooltip("Requesting backend data...");this.m_networkActivityIndicator.setMargin(t.UiCssBoxEdges.create(t.HuHorizonStatusBarManager.ICON_MARGIN));this.m_networkActivityIndicator.setFlex("0 0 auto");this.m_networkActivityIndicator.setVisible(false)}return this.m_networkActivityIndicator};t.HuHorizonStatusBarManager.prototype._getStatusLabel=function(){if(t.isNull(this.m_statusLabel)){this.m_statusLabel=this.getGenesis().newControl(t.UiType.LABEL);this.m_statusLabel.setFlex("auto")}return this.m_statusLabel};t.HuHorizonStatusBarManager.prototype._getSuccessMessageIcon=function(){if(t.isNull(this.m_successIcon)){this.m_successIcon=t.UtMessageIconWidget.create(this.getGenesis(),t.UiMessageType.SUCCESS);this.m_successIcon.setMargin(t.UiCssBoxEdges.create(t.HuHorizonStatusBarManager.ICON_MARGIN));this.m_successIcon.setVisible(false);this.m_successIcon.setShowClearButton(true);this.m_successIcon.setClearPressProcedure(()=>{this._clearMessagesByType(t.HuMessageType.SUCCESS);this._postClearMessagesPressedNotification(t.HuMessageType.SUCCESS)})}return this.m_successIcon};t.HuHorizonStatusBarManager.prototype._getWarningMessageIcon=function(){if(t.isNull(this.m_warningsIcon)){this.m_warningsIcon=t.UtMessageIconWidget.create(this.getGenesis(),t.UiMessageType.WARNING);this.m_warningsIcon.setMargin(t.UiCssBoxEdges.create(t.HuHorizonStatusBarManager.ICON_MARGIN));this.m_warningsIcon.setVisible(false);this.m_warningsIcon.setShowClearButton(true);this.m_warningsIcon.setClearPressProcedure(()=>{this._clearMessagesByType(t.HuMessageType.WARNING);this._postClearMessagesPressedNotification(t.HuMessageType.WARNING)})}return this.m_warningsIcon};t.HuHorizonStatusBarManager.prototype._handleClearMessagesNotification=function(e){if(t.notNull(e)){let o=e.getXObjectByKey(t.HuHorizonInternalNotifications.MESSAGE_MANAGER_CLEAR_MESSAGES_MESSAGE_TYPE_NOTIFI_DATA);this._clearMessagesByType(o)}};t.HuHorizonStatusBarManager.prototype._handleNewMessageNotification=function(e){if(t.notNull(e)){let o=e.getXObjectByKey(t.HuHorizonInternalNotifications.MESSAGE_MANAGER_NEW_MESSAGE_MESSAGE_NOTIFI_DATA);this._addMessage(o)}};t.HuHorizonStatusBarManager.prototype._handleStatusBarRendered=function(e){if(t.notNull(this.m_wrapperLayout)){this.m_wrapperLayout.registerOnAfterRender(null)}this.m_didRender=true;this._presentErrorMessagePopoverIfNecessary()};t.HuHorizonStatusBarManager.prototype._handleStatusMessageChangedNotification=function(e){if(t.notNull(e)){let o=e.getStringByKey(t.HuHorizonInternalNotifications.MESSAGE_MANAGER_STATUS_MESSAGE_CHANGED_NEW_MESSAGE_NOTIFI_DATA);this.setStatusMessage(o)}};t.HuHorizonStatusBarManager.prototype._postClearMessagesPressedNotification=function(e){let o=t.XNotificationData.create();o.putXObject(t.HuHorizonInternalNotifications.STATUS_BAR_MANAGER_CLEAR_MESSAGES_PRESSED_MESSAGE_TYPE_NOTIFY_DATA,e);this.getLocalNotificationCenter().postNotificationWithName(t.HuHorizonInternalNotifications.STATUS_BAR_MANAGER_CLEAR_MESSAGES_PRESSED,o)};t.HuHorizonStatusBarManager.prototype._presentErrorMessagePopoverIfNecessary=function(){if(this.m_didRender&&this.isStatusBarVisible()&&this._getErrorMessageIcon().hasMessages()){this._getErrorMessageIcon().open()}};t.HuHorizonStatusBarManager.prototype._setNetworkActivityIndicatorVisible=function(t){this._getNetworkActivityIndicator().setVisible(t)};t.HuHorizonStatusBarManager.prototype._setupManager=function(){this.m_didRender=false;this.m_showNetworkActivityIndicatorObserverId=this.getLocalNotificationCenter().addObserverForName(t.HuHorizonInternalNotifications.STATUS_BAR_MANAGER_SHOW_NETWORK_ACTIVITY_INDICATOR,t=>{this.showNetworkActivityIndicator()});this.m_hideNetworkActivityIndicatorObserverId=this.getLocalNotificationCenter().addObserverForName(t.HuHorizonInternalNotifications.STATUS_BAR_MANAGER_HIDE_NETWORK_ACTIVITY_INDICATOR,t=>{this.hideNetworkActivityIndicator()});this.m_statusMessageChangedObserverId=this.getLocalNotificationCenter().addObserverForName(t.HuHorizonInternalNotifications.MESSAGE_MANAGER_STATUS_MESSAGE_CHANGED,this._handleStatusMessageChangedNotification.bind(this));this.m_newMessagesObserverId=this.getLocalNotificationCenter().addObserverForName(t.HuHorizonInternalNotifications.MESSAGE_MANAGER_NEW_MESSAGE,this._handleNewMessageNotification.bind(this));this.m_clearMessagesObserverId=this.getLocalNotificationCenter().addObserverForName(t.HuHorizonInternalNotifications.MESSAGE_MANAGER_CLEAR_MESSAGES,this._handleClearMessagesNotification.bind(this));this.m_clearAllMessagesObserverId=this.getLocalNotificationCenter().addObserverForName(t.HuHorizonInternalNotifications.MESSAGE_MANAGER_CLEAR_ALL_MESSAGES,t=>{this._clearAllMessages()})};t.HuHorizonStatusBarManager.prototype._updateStatusLabel=function(t,e){this._getStatusLabel().setText(t);this._getStatusLabel().setFontColor(e)};t.HuHorizonStatusBarManager.prototype.addAllMessages=function(e){t.XCollectionUtils.forEach(e,t=>{this._addMessage(t)})};t.HuHorizonStatusBarManager.prototype.getView=function(){return this._createStatusBarIfNeeded()};t.HuHorizonStatusBarManager.prototype.hideNetworkActivityIndicator=function(){this._setNetworkActivityIndicatorVisible(false)};t.HuHorizonStatusBarManager.prototype.isStatusBarVisible=function(){return this.getView().isVisible()};t.HuHorizonStatusBarManager.prototype.releaseObject=function(){this.getLocalNotificationCenter().removeObserverByUuid(this.m_showNetworkActivityIndicatorObserverId);this.getLocalNotificationCenter().removeObserverByUuid(this.m_hideNetworkActivityIndicatorObserverId);this.getLocalNotificationCenter().removeObserverByUuid(this.m_statusMessageChangedObserverId);this.getLocalNotificationCenter().removeObserverByUuid(this.m_newMessagesObserverId);this.getLocalNotificationCenter().removeObserverByUuid(this.m_clearMessagesObserverId);this.getLocalNotificationCenter().removeObserverByUuid(this.m_clearAllMessagesObserverId);this.m_networkActivityIndicator=t.XObjectExt.release(this.m_networkActivityIndicator);this.m_infoIcon=t.XObjectExt.release(this.m_infoIcon);this.m_successIcon=t.XObjectExt.release(this.m_successIcon);this.m_errorsIcon=t.XObjectExt.release(this.m_errorsIcon);this.m_warningsIcon=t.XObjectExt.release(this.m_warningsIcon);this.m_statusLabel=t.XObjectExt.release(this.m_statusLabel);this.m_wrapperLayout=t.XObjectExt.release(this.m_wrapperLayout);t.HuDfHorizonManager.prototype.releaseObject.call(this)};t.HuHorizonStatusBarManager.prototype.setStatusBarVisible=function(t){this.getView().setVisible(t)};t.HuHorizonStatusBarManager.prototype.setStatusMessage=function(t){this._updateStatusLabel(t,null)};t.HuHorizonStatusBarManager.prototype.showNetworkActivityIndicator=function(){this._setNetworkActivityIndicatorVisible(true)};t.HuHorizonStatusBarManager.prototype.toggleStatusBar=function(){this.setStatusBarVisible(!this.isStatusBarVisible())};t.HuHorizonToolbarManager=function(){};t.HuHorizonToolbarManager.prototype=new t.HuDfHorizonManager;t.HuHorizonToolbarManager.prototype._ff_c="HuHorizonToolbarManager";t.HuHorizonToolbarManager.create=function(e){let o=new t.HuHorizonToolbarManager;o._setupWithGenericController(e);return o};t.HuHorizonToolbarManager.prototype.m_groupMap=null;t.HuHorizonToolbarManager.prototype.m_toolbarWidget=null;t.HuHorizonToolbarManager.prototype._createToolbarIfNeeded=function(){if(t.isNull(this.m_toolbarWidget)){this.m_toolbarWidget=t.UtToolbarWidget.create(this.getGenesis());this.m_toolbarWidget.addCssClass("ffHorizonToolbar")}return this.m_toolbarWidget};t.HuHorizonToolbarManager.prototype._getManagerName=function(){return"Toolbar Manager"};t.HuHorizonToolbarManager.prototype._setupManager=function(){this.m_groupMap=t.XLinkedHashMapByString.create()};t.HuHorizonToolbarManager.prototype.clearToolbarGroups=function(){this.m_groupMap.clear();this._createToolbarIfNeeded().clearItems()};t.HuHorizonToolbarManager.prototype.createNewGroup=function(e){let o=this.getGroupByName(e);if(t.isNull(o)){o=this._createToolbarIfNeeded().getToolbarSection().newGroup();this.m_groupMap.put(e,o)}return o};t.HuHorizonToolbarManager.prototype.getGroupByName=function(t){return this.m_groupMap.getByKey(t)};t.HuHorizonToolbarManager.prototype.getGroupByNameCreateIfNeeded=function(e){let o=this.getGroupByName(e);if(t.isNull(o)){o=this.createNewGroup(e)}return o};t.HuHorizonToolbarManager.prototype.getView=function(){return this._createToolbarIfNeeded().getView()};t.HuHorizonToolbarManager.prototype.hasItems=function(){if(t.notNull(this.m_groupMap)&&this.m_groupMap.hasElements()){let e=t.XCollectionUtils.findFirst(this.m_groupMap,t=>t.getItems()!==null&&t.getItems().hasElements());return t.notNull(e)}return false};t.HuHorizonToolbarManager.prototype.isToolbarVisible=function(){return this._createToolbarIfNeeded().getView().isVisible()};t.HuHorizonToolbarManager.prototype.releaseObject=function(){this.m_groupMap.clear();this.m_groupMap=t.XObjectExt.release(this.m_groupMap);this.m_toolbarWidget=t.XObjectExt.release(this.m_toolbarWidget);t.HuDfHorizonManager.prototype.releaseObject.call(this)};t.HuHorizonToolbarManager.prototype.renderToolbar=function(){if(t.notNull(this.m_groupMap)&&this.m_groupMap.hasElements()){t.XCollectionUtils.forEach(this.m_groupMap,t=>{this._createToolbarIfNeeded().getToolbarSection().addGroup(t)})}};t.HuHorizonToolbarManager.prototype.setToolbarVisible=function(t){this._createToolbarIfNeeded().getView().setVisible(t)};t.HuHorizonConfigurationProcessor=function(){};t.HuHorizonConfigurationProcessor.prototype=new t.HuDfConfigurationProcessor;t.HuHorizonConfigurationProcessor.prototype._ff_c="HuHorizonConfigurationProcessor";t.HuHorizonConfigurationProcessor.MENU_VISIBLE="menuVisible";t.HuHorizonConfigurationProcessor.MODE="mode";t.HuHorizonConfigurationProcessor.PLUGIN_DIRECTORIES="pluginDirectories";t.HuHorizonConfigurationProcessor.STATUS_BAR_VISIBLE="statusBarVisible";t.HuHorizonConfigurationProcessor.TITLE="title";t.HuHorizonConfigurationProcessor.TOOLBAR_VISIBLE="toolbarVisible";t.HuHorizonConfigurationProcessor.create=function(e){let o=new t.HuHorizonConfigurationProcessor;o._setupWithToolsContext(e);return o};t.HuHorizonConfigurationProcessor.prototype.m_configurationJson=null;t.HuHorizonConfigurationProcessor.prototype._getConfigurationJson=function(){return this.m_configurationJson};t.HuHorizonConfigurationProcessor.prototype._getConfigurationProcessorName=function(){return"Horizon"};t.HuHorizonConfigurationProcessor.prototype._isProductionMode=function(){return this.getFrameworkMode()===t.HuFrameworkMode.PRODUCTION};t.HuHorizonConfigurationProcessor.prototype._postFrameworkModeChangedNotification=function(){this.getLocalNotificationCenter().postNotificationWithName(t.HuHorizonInternalNotifications.FRAMEWORK_MODE_CHANGED,null)};t.HuHorizonConfigurationProcessor.prototype._postHorizonConfigurationChangedNotification=function(){this.getLocalNotificationCenter().postNotificationWithName(t.HuHorizonInternalNotifications.HORIZON_CONFIGURATION_CHANGED,null)};t.HuHorizonConfigurationProcessor.prototype._processConfigurationElement=function(e){if(t.notNull(e)){if(e.isStructure()){this.m_configurationJson=e.asStructure()}}else{this.logDebug("Missing configuration structure!")}};t.HuHorizonConfigurationProcessor.prototype._setupConfigurationProcessor=function(){};t.HuHorizonConfigurationProcessor.prototype.addPluginDirectory=function(e){let o=this._getConfigurationJson().getListByKey(t.HuHorizonConfigurationProcessor.PLUGIN_DIRECTORIES);if(t.isNull(o)){o=this._getConfigurationJson().putNewList(t.HuHorizonConfigurationProcessor.PLUGIN_DIRECTORIES)}if(t.XStringUtils.isNotNullAndNotEmpty(e)){o.addString(e);this._postHorizonConfigurationChangedNotification()}return this};t.HuHorizonConfigurationProcessor.prototype.getFrameworkMode=function(){let e=t.HuFrameworkMode.lookup(this._getConfigurationJson().getStringByKey(t.HuHorizonConfigurationProcessor.MODE));if(t.isNull(e)){e=t.HuFrameworkMode.PRODUCTION}return e};t.HuHorizonConfigurationProcessor.prototype.getPluginDirectories=function(){let e=this._getConfigurationJson().getListByKey(t.HuHorizonConfigurationProcessor.PLUGIN_DIRECTORIES);let o=t.XList.create();if(t.notNull(e)){for(let n=0;n<e.size();n++){if(e.getElementTypeAt(n)===t.PrElementType.STRING){let t=e.getStringAt(n);o.add(t)}}}return o};t.HuHorizonConfigurationProcessor.prototype.getWorkspaceTitle=function(){return this._getConfigurationJson().getStringByKeyExt(t.HuHorizonConfigurationProcessor.TITLE,"Horizon")};t.HuHorizonConfigurationProcessor.prototype.isMenuVisible=function(){return this._getConfigurationJson().getBooleanByKeyExt(t.HuHorizonConfigurationProcessor.MENU_VISIBLE,!this._isProductionMode())};t.HuHorizonConfigurationProcessor.prototype.isStatusBarVisible=function(){return this._getConfigurationJson().getBooleanByKeyExt(t.HuHorizonConfigurationProcessor.STATUS_BAR_VISIBLE,!this._isProductionMode())};t.HuHorizonConfigurationProcessor.prototype.isToolbarPropertySet=function(){return this._getConfigurationJson().containsKey(t.HuHorizonConfigurationProcessor.TOOLBAR_VISIBLE)};t.HuHorizonConfigurationProcessor.prototype.isToolbarVisible=function(){return this._getConfigurationJson().getBooleanByKeyExt(t.HuHorizonConfigurationProcessor.TOOLBAR_VISIBLE,!this._isProductionMode())};t.HuHorizonConfigurationProcessor.prototype.releaseObject=function(){this.m_configurationJson=null;t.HuDfConfigurationProcessor.prototype.releaseObject.call(this)};t.HuHorizonConfigurationProcessor.prototype.removePluginDirectory=function(e){let o=this._getConfigurationJson().getListByKey(t.HuHorizonConfigurationProcessor.PLUGIN_DIRECTORIES);if(t.isNull(o)){o=this._getConfigurationJson().putNewList(t.HuHorizonConfigurationProcessor.PLUGIN_DIRECTORIES)}if(t.XStringUtils.isNotNullAndNotEmpty(e)){o.removeElement(t.PrFactory.createString(e));this._postHorizonConfigurationChangedNotification()}return this};t.HuHorizonConfigurationProcessor.prototype.setFrameworkMode=function(e){if(t.notNull(e)){let o=this.getFrameworkMode()!==e;this._getConfigurationJson().putString(t.HuHorizonConfigurationProcessor.MODE,e.getName());this._postHorizonConfigurationChangedNotification();if(o){this._postFrameworkModeChangedNotification()}}return this};t.HuHorizonConfigurationProcessor.prototype.setMenuVisible=function(e){this._getConfigurationJson().putBoolean(t.HuHorizonConfigurationProcessor.MENU_VISIBLE,e);this._postHorizonConfigurationChangedNotification();return this};t.HuHorizonConfigurationProcessor.prototype.setStatusBarVisible=function(e){this._getConfigurationJson().putBoolean(t.HuHorizonConfigurationProcessor.STATUS_BAR_VISIBLE,e);this._postHorizonConfigurationChangedNotification();return this};t.HuHorizonConfigurationProcessor.prototype.setToolbarVisible=function(e){this._getConfigurationJson().putBoolean(t.HuHorizonConfigurationProcessor.TOOLBAR_VISIBLE,e);this._postHorizonConfigurationChangedNotification();return this};t.HuHorizonConfigurationProcessor.prototype.setWorkspaceTitle=function(e){this._getConfigurationJson().putString(t.HuHorizonConfigurationProcessor.TITLE,e);this._postHorizonConfigurationChangedNotification();return this};t.HuLayoutConfigurationProcessor=function(){};t.HuLayoutConfigurationProcessor.prototype=new t.HuDfConfigurationProcessor;t.HuLayoutConfigurationProcessor.prototype._ff_c="HuLayoutConfigurationProcessor";t.HuLayoutConfigurationProcessor.CONFIG="config";t.HuLayoutConfigurationProcessor.TYPE="type";t.HuLayoutConfigurationProcessor.create=function(e){let o=new t.HuLayoutConfigurationProcessor;o._setupWithToolsContext(e);return o};t.HuLayoutConfigurationProcessor.prototype.m_layoutConfigJson=null;t.HuLayoutConfigurationProcessor.prototype.m_layoutStructure=null;t.HuLayoutConfigurationProcessor.prototype.m_layoutType=null;t.HuLayoutConfigurationProcessor.prototype._getConfigurationProcessorName=function(){return"Layout"};t.HuLayoutConfigurationProcessor.prototype._processConfigurationElement=function(e){if(t.notNull(e)){if(e.isStructure()){this._processLayoutStructure(e.asStructure())}}else{this.logDebug("Missing configuration structure!")}};t.HuLayoutConfigurationProcessor.prototype._processLayoutStructure=function(e){this.m_layoutStructure=e;let o=e.getStringByKey(t.HuLayoutConfigurationProcessor.TYPE);this.m_layoutType=t.HuLayoutType.lookup(o);this.m_layoutConfigJson=e.getStructureByKey(t.HuLayoutConfigurationProcessor.CONFIG)};t.HuLayoutConfigurationProcessor.prototype._setupConfigurationProcessor=function(){this.m_layoutType=null;this.m_layoutConfigJson=null;this.m_layoutStructure=null};t.HuLayoutConfigurationProcessor.prototype.getLayoutConfigJson=function(){return this.m_layoutConfigJson};t.HuLayoutConfigurationProcessor.prototype.getLayoutStructure=function(){return this.m_layoutStructure};t.HuLayoutConfigurationProcessor.prototype.getLayoutType=function(){return this.m_layoutType};t.HuLayoutConfigurationProcessor.prototype.releaseObject=function(){this.m_layoutType=null;this.m_layoutConfigJson=null;this.m_layoutStructure=null;t.HuDfConfigurationProcessor.prototype.releaseObject.call(this)};t.HuLayoutConfigurationProcessor.prototype.setLayoutType=function(t){this.m_layoutType=t;return this};t.HuPluginsConfigurationProcessor=function(){};t.HuPluginsConfigurationProcessor.prototype=new t.HuDfConfigurationProcessor;t.HuPluginsConfigurationProcessor.prototype._ff_c="HuPluginsConfigurationProcessor";t.HuPluginsConfigurationProcessor.create=function(e){let o=new t.HuPluginsConfigurationProcessor;o._setupWithToolsContext(e);return o};t.HuPluginsConfigurationProcessor.prototype.m_allConfigPlugins=null;t.HuPluginsConfigurationProcessor.prototype.m_invalidPluginNames=null;t.HuPluginsConfigurationProcessor.prototype.m_startupCommandPlugins=null;t.HuPluginsConfigurationProcessor.prototype.m_startupViewPlugins=null;t.HuPluginsConfigurationProcessor.prototype._getConfigurationProcessorName=function(){return"Plugins"};t.HuPluginsConfigurationProcessor.prototype._groupPlugins=function(){if(t.notNull(this.m_allConfigPlugins)&&this.m_allConfigPlugins.size()>0){this.m_startupViewPlugins.clear();this.m_startupCommandPlugins.clear();t.XCollectionUtils.forEach(this.m_allConfigPlugins,e=>{let o=t.HuPluginRegistryBase.getPluginFactory(e.getPluginName());if(o.getPluginType()===t.HuPluginType.COMPONENT){this.m_startupViewPlugins.add(e)}else if(o.getPluginType()===t.HuPluginType.DOCUMENT){this.m_startupViewPlugins.add(e)}else if(o.getPluginType()===t.HuPluginType.COMMAND){this.m_startupCommandPlugins.add(e)}})}};t.HuPluginsConfigurationProcessor.prototype._processConfigurationElement=function(e){if(t.notNull(e)){if(e.isStructure()){this._processPluginStructure(e.asStructure())}else if(e.isList()){this._processPluginList(e.asList())}else if(e.isString()){this._processPluginString(e.asString())}}};t.HuPluginsConfigurationProcessor.prototype._processPluginList=function(e){t.XCollectionUtils.forEach(e,e=>{if(e.isStructure()){let o=e.asStructure();let n=t.HuPluginStartupInfo.createWithStructure(o);if(t.notNull(n)){this.m_allConfigPlugins.add(n)}}else if(e.isString()){let o=e.asString().getString();let n=t.HuPluginStartupInfo.create(o);this.m_allConfigPlugins.add(n)}})};t.HuPluginsConfigurationProcessor.prototype._processPluginString=function(e){let o=e.getString();let n=t.HuPluginStartupInfo.create(o);this.m_allConfigPlugins.add(n)};t.HuPluginsConfigurationProcessor.prototype._processPluginStructure=function(e){let o=e.getKeysAsReadOnlyList();t.XCollectionUtils.forEach(o,o=>{let n=e.getStructureByKey(o);let i=t.HuPluginStartupInfo.createWithStructureExt(o,n);if(t.notNull(i)){this.m_allConfigPlugins.add(i)}})};t.HuPluginsConfigurationProcessor.prototype._setupConfigurationProcessor=function(){this.m_allConfigPlugins=t.XList.create();this.m_startupViewPlugins=t.XList.create();this.m_startupCommandPlugins=t.XList.create();this.m_invalidPluginNames=t.XList.create()};t.HuPluginsConfigurationProcessor.prototype._validatePlugins=function(){if(t.notNull(this.m_allConfigPlugins)&&this.m_allConfigPlugins.size()>0){let e=t.XList.create();t.XCollectionUtils.forEach(this.m_allConfigPlugins,o=>{let n=o.getPluginName();let i=t.HuPluginRegistryBase.canPluginBeInitialized(n);if(i){e.add(o)}else{this.m_invalidPluginNames.add(n)}});this.m_allConfigPlugins.clear();this.m_allConfigPlugins.addAll(e)}};t.HuPluginsConfigurationProcessor.prototype.getAllStartupCommandPlugins=function(){return this.m_startupCommandPlugins};t.HuPluginsConfigurationProcessor.prototype.getAllStartupPlugins=function(){let e=t.XList.create();t.XCollectionUtils.forEach(this.m_allConfigPlugins,t=>{e.add(t.getPluginName())});return e};t.HuPluginsConfigurationProcessor.prototype.getAllStartupViewPlugins=function(){return this.m_startupViewPlugins};t.HuPluginsConfigurationProcessor.prototype.getInvalidPluginNames=function(){return this.m_invalidPluginNames};t.HuPluginsConfigurationProcessor.prototype.hasStartupCommandPlugins=function(){return this.m_startupCommandPlugins.hasElements()};t.HuPluginsConfigurationProcessor.prototype.hasStartupViewPlugins=function(){return this.m_startupViewPlugins.hasElements()};t.HuPluginsConfigurationProcessor.prototype.releaseObject=function(){t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_startupCommandPlugins);t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_startupViewPlugins);t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_allConfigPlugins);this.m_invalidPluginNames=t.XObjectExt.release(this.m_invalidPluginNames);t.HuDfConfigurationProcessor.prototype.releaseObject.call(this)};t.HuPluginsConfigurationProcessor.prototype.validateAndGroupPlugins=function(){this._validatePlugins();this._groupPlugins()};t.HuToolbarConfigurationProcessor=function(){};t.HuToolbarConfigurationProcessor.prototype=new t.HuDfConfigurationProcessor;t.HuToolbarConfigurationProcessor.prototype._ff_c="HuToolbarConfigurationProcessor";t.HuToolbarConfigurationProcessor.ACTION="action";t.HuToolbarConfigurationProcessor.GROUP="group";t.HuToolbarConfigurationProcessor.ICON="icon";t.HuToolbarConfigurationProcessor.NAME="name";t.HuToolbarConfigurationProcessor.TEXT="text";t.HuToolbarConfigurationProcessor.TOOLTIP="tooltip";t.HuToolbarConfigurationProcessor.create=function(e){let o=new t.HuToolbarConfigurationProcessor;o._setupWithToolsContext(e);return o};t.HuToolbarConfigurationProcessor.prototype.m_allGroupsInOrder=null;t.HuToolbarConfigurationProcessor.prototype.m_allToolbarItems=null;t.HuToolbarConfigurationProcessor.prototype.m_groupedToolbarItems=null;t.HuToolbarConfigurationProcessor.prototype._createGroupsAndGroupItems=function(){if(t.notNull(this.m_allToolbarItems)&&this.m_allToolbarItems.size()>0){t.XCollectionUtils.forEach(this.m_allToolbarItems,e=>{let o=e.getGroup();if(o!==t.HuToolbarGroup.UNGROUPED&&!this.m_allGroupsInOrder.contains(o)){this.m_allGroupsInOrder.add(o)}let n=this.m_groupedToolbarItems.getByKey(o.getName());if(t.isNull(n)){n=t.XList.create();this.m_groupedToolbarItems.put(o.getName(),n)}n.add(e)});if(this.m_groupedToolbarItems.containsKey(t.HuToolbarGroup.UNGROUPED.getName())){this.m_allGroupsInOrder.add(t.HuToolbarGroup.UNGROUPED)}}};t.HuToolbarConfigurationProcessor.prototype._getConfigurationProcessorName=function(){return"Toolbar"};t.HuToolbarConfigurationProcessor.prototype._processConfigurationElement=function(e){if(t.notNull(e)){if(e.isList()){this._processToolbarList(e.asList());this._createGroupsAndGroupItems()}}else{this.logDebug("Missing configuration list!")}};t.HuToolbarConfigurationProcessor.prototype._processToolbarList=function(e){t.XCollectionUtils.forEach(e,e=>{if(e.isStructure()){let o=e.asStructure();let n=o.getStringByKey(t.HuToolbarConfigurationProcessor.ACTION);if(t.XStringUtils.isNotNullAndNotEmpty(n)){let e=o.getStringByKey(t.HuToolbarConfigurationProcessor.NAME);let i=o.getStringByKey(t.HuToolbarConfigurationProcessor.TEXT);let r=o.getStringByKey(t.HuToolbarConfigurationProcessor.ICON);let s=o.getStringByKey(t.HuToolbarConfigurationProcessor.TOOLTIP);let a=o.getStringByKey(t.HuToolbarConfigurationProcessor.GROUP);let u=t.HuToolbarGroup.UNGROUPED;if(t.XStringUtils.isNotNullAndNotEmpty(a)){u=t.HuToolbarGroup.createCustomGroupIfNecessary(a)}let l=t.HuToolbarItem.create(n,e,i,r,s,u);this.m_allToolbarItems.add(l)}}else if(e.isString()){let o=e.asString().getString();let n=t.HuToolbarItem.create(o,null,null,null,null,null);this.m_allToolbarItems.add(n)}})};t.HuToolbarConfigurationProcessor.prototype._setupConfigurationProcessor=function(){this.m_allToolbarItems=t.XList.create();this.m_allGroupsInOrder=t.XList.create();this.m_groupedToolbarItems=t.XLinkedHashMapByString.create()};t.HuToolbarConfigurationProcessor.prototype.getAllGroupsInOrder=function(){return this.m_allGroupsInOrder};t.HuToolbarConfigurationProcessor.prototype.getAllToolbarItems=function(){return this.m_allToolbarItems};t.HuToolbarConfigurationProcessor.prototype.getAllToolbarItemsGrouped=function(){return this.m_groupedToolbarItems};t.HuToolbarConfigurationProcessor.prototype.hasToolbarItems=function(){return this.getAllToolbarItems().hasElements()};t.HuToolbarConfigurationProcessor.prototype.releaseObject=function(){this.m_groupedToolbarItems.clear();this.m_groupedToolbarItems=t.XObjectExt.release(this.m_groupedToolbarItems);this.m_allGroupsInOrder.clear();this.m_allGroupsInOrder=t.XObjectExt.release(this.m_allGroupsInOrder);this.m_allToolbarItems=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_allToolbarItems);t.HuDfConfigurationProcessor.prototype.releaseObject.call(this)};t.HuPluginToolsService=function(){};t.HuPluginToolsService.prototype=new t.HuDfHorizonService;t.HuPluginToolsService.prototype._ff_c="HuPluginToolsService";t.HuPluginToolsService.create=function(e){let o=new t.HuPluginToolsService;o._setupWithMainController(e);return o};t.HuPluginToolsService.prototype.m_configCache=null;t.HuPluginToolsService.prototype._addConfigCacheEntryIfNeeded=function(e,o){if(t.notNull(this.m_configCache)&&!this.m_configCache.containsKey(e)){this.m_configCache.put(e,o)}};t.HuPluginToolsService.prototype._appendWorkspaceConfigurationIfPossible=function(e,o){if(t.isNull(o)){return t.XPromise.reject(t.XError.create("Missing configuration! Cannot append workspace configuration!"))}let n=this._getWorkspaceCacheKey(e);if(this._hasCacheEntry(n)){let e=this._getCachedConfigStructure(n);this._logCacheState("workspace settings",e);o.mergeWithStructure(e);return t.XPromise.resolve(o)}let i=this.getMainController().getWorkspaceManager().getSettingsFileForPlugin(e);if(t.notNull(i)){return t.XFilePromise.loadJsonStructure(i).then(e=>{this.logDebug(t.XStringUtils.concatenate2("Found plugin settings file in workspace -> ",i.getUrl()));this._addConfigCacheEntryIfNeeded(n,e);o.mergeWithStructure(e);return o},t=>{this._addConfigCacheEntryIfNeeded(n,null);return null})}return t.XPromise.resolve(o)};t.HuPluginToolsService.prototype._getCachedConfigStructure=function(e){if(t.notNull(this.m_configCache)){return this.m_configCache.getByKey(e)}return null};t.HuPluginToolsService.prototype._getServiceName=function(){return"Plugin Configuration Service"};t.HuPluginToolsService.prototype._getWorkspaceCacheKey=function(e){if(t.notNull(e)){return t.XStringUtils.concatenate2("workspace_",e.getName())}return null};t.HuPluginToolsService.prototype._hasCacheEntry=function(e){if(t.notNull(this.m_configCache)&&this.m_configCache.containsKey(e)){return true}return false};t.HuPluginToolsService.prototype._logCacheState=function(e,o){this.logDebug(t.XStringUtils.concatenate4("Found cached ",e,"! Cache state: ",t.notNull(o)?"Has data":"Empty"))};t.HuPluginToolsService.prototype._setupService=function(){this.m_configCache=t.XHashMapByString.create()};t.HuPluginToolsService.prototype._validatePluginDependencies=function(e,o){if(!t.XCollectionUtils.hasElements(e)){return true}let n=t.XCollectionUtils.ensureAll(e,e=>{let o=t.HuPluginRegistryBase.getPluginFactory(e);if(t.isNull(o)){return false}return o.canBeInitialized()});if(!n){return false}let i=t.XList.create();if(!o){i.addAll(e)}else{t.XCollectionUtils.forEach(e,e=>{let o=t.HuPluginRegistryBase.getPluginFactory(e);if(!o.getPluginType().hasUi()){i.add(e)}})}return t.XCollectionUtils.ensureAll(i,t=>this.getMainController().getConfigurationManager().getPluginsConfiguration().getAllStartupPlugins().contains(t))};t.HuPluginToolsService.prototype.checkPluginDependencies=function(e){let o=t.HuPluginRegistryBase.getPluginFactory(e);if(t.notNull(o)){let e=o.getDependencies();if(!t.XCollectionUtils.hasElements(e)){return true}return this._validatePluginDependencies(e,o.getPluginType()===t.HuPluginType.DOCUMENT)}return false};t.HuPluginToolsService.prototype.createConfigurationForPlugin=function(e,o){let n=t.XPromise.create((n,i)=>{this.logDebug("Preparing plugin configuration!");if(t.isNull(e)){n(t.CoConfiguration.create(null,o,this.getProcess()));return}t.CoConfigurationUtils.getResolvedConfigurationForProvider(this.getProcess(),e).onThen(t=>{if(e.hasConfigurationMetadata()){this.logDebug("Plugin has configuration metadata!")}else{this.logDebug("Plugin has no configuration metadata!")}this._appendWorkspaceConfigurationIfPossible(e,t).onFinally(()=>{t.mergeWithStructure(o);n(t)})}).onCatch(i)});return n};t.HuPluginToolsService.prototype.ensureModuleDependencies=function(e){let o=t.HuPluginRegistryBase.getPluginFactory(e);if(t.isNull(o)){return t.XPromise.reject(t.XError.create("Could not find the specified plugin! Cannot load dependencies!"))}return t.HuBaseUtils.loadPluginDependencies(o,this.getProcess(),this)};t.HuPluginToolsService.prototype.releaseObject=function(){this.m_configCache.clear();this.m_configCache=t.XObjectExt.release(this.m_configCache);t.HuDfHorizonService.prototype.releaseObject.call(this)};t.HuHorizonShellController=function(){};t.HuHorizonShellController.prototype=new t.HuDfSubController;t.HuHorizonShellController.prototype._ff_c="HuHorizonShellController";t.HuHorizonShellController.create=function(e){let o=new t.HuHorizonShellController;o._setupWithMainController(e);return o};t.HuHorizonShellController.prototype.m_menuManager=null;t.HuHorizonShellController.prototype.m_notificationObserverIds=null;t.HuHorizonShellController.prototype._getControllerName=function(){return"Shell Controller"};t.HuHorizonShellController.prototype._handleFrameworkModeChangedNotification=function(e){this.logDebug(t.XStringUtils.concatenate3("Mode changed to ",this.getCurrentMode().getName(),", re-rendering shell menu!"));this._initShellMenu()};t.HuHorizonShellController.prototype._handleHideShellMenuNotification=function(t){this.getMenuManager().setMenuVisible(false)};t.HuHorizonShellController.prototype._handleSetWorkspaceTitleNotification=function(e){if(t.notNull(e)){let o=e.getStringByKey(t.HuHorizonInternalNotifications.NEW_WORKSPACE_TITLE_NOTIFI_DATA);this.logDebug(t.XStringUtils.concatenate2("Workspace title changed -> ",o));if(t.XStringUtils.isNotNullAndNotEmpty(o)){this.setTitle(o)}}};t.HuHorizonShellController.prototype._handleShowShellMenuNotification=function(t){this.getMenuManager().setMenuVisible(true)};t.HuHorizonShellController.prototype._initShellMenu=function(){this.getMenuManager().clearMenuButtons();this.getMenuManager().addMenuButton("File",null,t=>{this._presentFileMenu(t)});if(this.getCurrentMode()===t.HuFrameworkMode.DEVELOPER||this.getCurrentMode()===t.HuFrameworkMode.DEBUG){this.getMenuManager().addMenuButton("Developer Tools",null,t=>{this._presentDeveloperToolsMenu(t)})}if(this.getCurrentMode()===t.HuFrameworkMode.DEBUG){this.getMenuManager().addMenuButton("Debug",null,t=>{this._presentDebugMenu(t)})}this.getMenuManager().setMenuVisible(this.getMainController().getConfigurationManager().getHorizonConfiguration().isMenuVisible())};t.HuHorizonShellController.prototype._presentDebugMenu=function(e){if(t.notNull(e)&&e.getControl()!==null){let o=this.getGenesis().newControl(t.UiType.MENU);let n=o.addNewItem();n.setText("Manifests");let i=n.addNewItem();i.setText("Clear all plugin manifests");i.setIcon("eraser");i.setEnabled(true);i.registerOnPress(t.UiLambdaPressListener.create(e=>{t.HuPluginRegistryBase.clearAllPluginManifests();this.getGenesis().showSuccessToast("Plugin manifests successfully cleared!")}));let r=o.addNewItem();r.setText("Tools");let s=r.addNewItem();s.setText("Post Notification...");s.setIcon("paper-plane");s.setEnabled(true);s.registerOnPress(t.UiLambdaPressListener.create(e=>{t.HuNotificationPosterPopup.create(this).open()}));let a=r.addNewItem();a.setText("Plugin processes...");a.setIcon("instance");a.setEnabled(true);a.registerOnPress(t.UiLambdaPressListener.create(t=>{this.getDebugUtility().presentPluginProcessTaskManger()}));o.openAt(e.getControl())}};t.HuHorizonShellController.prototype._presentDeveloperToolsMenu=function(e){if(t.notNull(e)&&e.getControl()!==null){let o=this.getGenesis().newControl(t.UiType.MENU);let n=o.addNewItem();n.setText("Configuration");let i=n.addNewItem();i.setText("Reload current configuration");i.setIcon("refresh");i.setEnabled(true);i.registerOnPress(t.UiLambdaPressListener.create(t=>{this.getMainController().reloadConfiguration()}));let r=n.addNewItem();r.setText("Copy current configuration to the firefly clipboard");r.setIcon("copy");r.setEnabled(true);r.setSectionStart(true);r.registerOnPress(t.UiLambdaPressListener.create(e=>{this.getProcess().getClipboard().write(t.XContent.createJsonObjectContent(t.ContentType.JSON,this.getMainController().getConfigurationManager().getConfigurationJson())).onThen(t=>{this.getGenesis().showSuccessToast("Current configuration copied to the firefly clipbord")}).onCatch(t=>{this.getGenesis().showErrorToast("Error copying the current configuration to the firefly clipboard")})}));let s=n.addNewItem();s.setText("Configuration Editor");s.setIcon("edit");s.setEnabled(true);s.registerOnPress(t.UiLambdaPressListener.create(e=>{let o=t.UtTextAreaPopup.create(this.getGenesis(),"Configuration Editor","json",t.PrUtils.serialize(this.getMainController().getConfigurationManager().getConfigurationJson(),false,true,2));o.setConfirmConsumer(e=>{let o=t.PrUtils.deserialize(e);if(t.notNull(o)&&o.isStructure()){this.getMainController().applyNewConfiguration(o.asStructure())}else{this.getGenesis().showErrorToast("Configuration not in json format!")}});o.open()}));let a=this.getMainController().getCommandPluginManager().getAllRunningPlugins();t.XCollectionUtils.listEntries(a,(t,e)=>{this._renderDevActionsIfNeeded(e,o,t.getInteger()===0)});let u=this.getMainController().getViewPluginManager().getAllRunningPlugins();t.XCollectionUtils.listEntries(u,(t,e)=>{this._renderDevActionsIfNeeded(e,o,t.getInteger()===0)});o.openAt(e.getControl())}};t.HuHorizonShellController.prototype._presentFileMenu=function(e){if(t.notNull(e)&&e.getControl()!==null){let o=this.getGenesis().newControl(t.UiType.MENU);let n=o.addNewItem();n.setText("Preferences...");n.setIcon("settings");n.setEnabled(true);n.registerOnPress(t.UiLambdaPressListener.create(e=>{let o=t.SuSettingsDialog.createRunnerForConfigurationType(this.getProcess(),t.CoConfigurationType.PLUGIN);o.runProgram()}));let i=o.addNewItem();i.setText("Available plugins...");i.setIcon("switch-views");i.setEnabled(true);i.setSectionStart(true);i.registerOnPress(t.UiLambdaPressListener.create(t=>{this._presentPluginListDialog()}));if(!this.getMainController().getWorkspaceManager().isVirtualWorkspace()){let e=o.addNewItem();e.setText("Switch workspace...");e.setIcon("list");e.setEnabled(true);e.setSectionStart(true);e.registerOnPress(t.UiLambdaPressListener.create(t=>{this.getMainController().requestWorkspaceSwitch()}))}if(!this.isEmbedded()){let e=o.addNewItem();e.setText("Exit");e.setIcon("decline");e.setEnabled(true);e.setSectionStart(true);e.registerOnPress(t.UiLambdaPressListener.create(t=>{this.getMainController().getProgramInstance().terminate()}))}o.openAt(e.getControl())}};t.HuHorizonShellController.prototype._presentPluginListDialog=function(){let e=t.HuPluginListDialog.createRunnerForDebug(this.getProcess(),this.isRunningInDebugEnvironment()||this.getCurrentMode()===t.HuFrameworkMode.DEBUG);e.runProgram()};t.HuHorizonShellController.prototype._renderDevActionsIfNeeded=function(e,o,n){if(t.notNull(e)){let i=e.getMenuDeveloperActionList();if(t.XCollectionUtils.hasElements(i)){let r=o.addNewItem();r.setText(e.getPluginDisplayNameOrName());r.setSectionStart(n);t.XCollectionUtils.forEach(i,e=>{let o=r.addNewItem();o.setText(e.getDisplayName());o.setIcon(e.getIcon());o.setTooltip(e.getDescription());o.setSectionStart(e.isSectionStart());o.registerOnPress(t.UiLambdaPressListener.create(t=>{e.getActionProcedure()()}))})}}};t.HuHorizonShellController.prototype._setWorkspaceTitle=function(){this.setTitle(this.getMainController().getConfigurationManager().getHorizonConfiguration().getWorkspaceTitle())};t.HuHorizonShellController.prototype._setupController=function(){this.m_menuManager=t.HuHorizonMenuManager.create(this,this.getMainController().getProgramInstance());this.m_notificationObserverIds=t.XList.create();this.m_notificationObserverIds.add(this.getLocalNotificationCenter().addObserverForName(t.HuHorizonInternalNotifications.SET_WORKSPACE_TITLE,this._handleSetWorkspaceTitleNotification.bind(this)));this.m_notificationObserverIds.add(this.getLocalNotificationCenter().addObserverForName(t.HuHorizonInternalNotifications.SHOW_SHELL_MENU,this._handleShowShellMenuNotification.bind(this)));this.m_notificationObserverIds.add(this.getLocalNotificationCenter().addObserverForName(t.HuHorizonInternalNotifications.HIDE_SHELL_MENU,this._handleHideShellMenuNotification.bind(this)));this.m_notificationObserverIds.add(this.getLocalNotificationCenter().addObserverForName(t.HuHorizonInternalNotifications.FRAMEWORK_MODE_CHANGED,this._handleFrameworkModeChangedNotification.bind(this)))};t.HuHorizonShellController.prototype.getMenuManager=function(){return this.m_menuManager};t.HuHorizonShellController.prototype.isEmbedded=function(){return this.getMainController().getProgramInstance().isContainerEmbedded()};t.HuHorizonShellController.prototype.reInitShell=function(){this._setWorkspaceTitle();this._initShellMenu()};t.HuHorizonShellController.prototype.releaseObject=function(){t.HuBaseUtils.deregisterNotificationObservers(this.m_notificationObserverIds,this.getLocalNotificationCenter());this.m_notificationObserverIds=t.XObjectExt.release(this.m_notificationObserverIds);this.m_menuManager=t.XObjectExt.release(this.m_menuManager);t.HuDfSubController.prototype.releaseObject.call(this)};t.HuHorizonShellController.prototype.setBusy=function(t){this.getMainController().getProgramInstance().setProgramBusy(t)};t.HuHorizonShellController.prototype.setTitle=function(t){this.getMainController().getProgramInstance().setContainerTitle(t)};t.HuHorizonUiController=function(){};t.HuHorizonUiController.prototype=new t.HuDfSubController;t.HuHorizonUiController.prototype._ff_c="HuHorizonUiController";t.HuHorizonUiController.create=function(e){let o=new t.HuHorizonUiController;o._setupWithMainController(e);return o};t.HuHorizonUiController.prototype.m_contentContainer=null;t.HuHorizonUiController.prototype.m_freeGenesis=null;t.HuHorizonUiController.prototype.m_layoutManager=null;t.HuHorizonUiController.prototype.m_mainLayout=null;t.HuHorizonUiController.prototype.m_statusBarManager=null;t.HuHorizonUiController.prototype.m_toolbarManager=null;t.HuHorizonUiController.prototype._applyInitialConfig=function(){this.logDebug("Applying initial ui config");this.getToolbarManager().setToolbarVisible(this._shouldShowToolbar());this.getStatusBarManager().setStatusBarVisible(this.getMainController().getConfigurationManager().getHorizonConfiguration().isStatusBarVisible())};t.HuHorizonUiController.prototype._applyInitialStatusBarState=function(){this.logDebug("Applying initial status bar state");let e=this.getMainController().getMessageManager().getStatus();if(t.XStringUtils.isNotNullAndNotEmpty(e)){this.getStatusBarManager().setStatusMessage(e)}if(this.getMainController().getMessageManager().hasMessages()){this.getStatusBarManager().addAllMessages(this.getMainController().getMessageManager().getAllMessages())}};t.HuHorizonUiController.prototype._createDebugToolbarGroupIfNeeded=function(){if(this.isRunningInDebugEnvironment()){let e=this.getToolbarManager().createNewGroup(t.HuToolbarGroup.DEBUG.getName());e.addButton("showToastTest","Show Toast","Shows an error toast","accept").setPressConsumer(t=>{this.getGenesis().showErrorToast("Works!")});e.addButton("commandTest","Command Test","A toolbar entry which execute command plugin actions","action").setPressConsumer(t=>{this.getMainController().getCommandPluginManager().executeAction("SimpleToastCommand.show",this.getMainController(),null)})}};t.HuHorizonUiController.prototype._generateToolbarItemsIfNeeded=function(){if(this.getMainController().getConfigurationManager().getToolbarConfiguration().hasToolbarItems()){let e=this.getMainController().getConfigurationManager().getToolbarConfiguration().getAllGroupsInOrder();t.XCollectionUtils.forEach(e,t=>{this.getToolbarManager().createNewGroup(t.getName())});let o=this.getMainController().getConfigurationManager().getToolbarConfiguration().getAllToolbarItems();t.XCollectionUtils.forEach(o,e=>{let o=this.getToolbarManager().getGroupByNameCreateIfNeeded(e.getGroup().getName());if(t.notNull(o)){let t=o.addButton(e.getName(),e.getText(),e.getTooltip(),e.getIcon());t.setPressConsumer(t=>{this.getMainController().getCommandPluginManager().executeAction(e.getActionId(),this.getMainController(),null)});t.setEnabled(this.getMainController().getCommandPluginManager().actionByIdExists(e.getActionId()))}})}};t.HuHorizonUiController.prototype._getControllerName=function(){return"Ui Controller"};t.HuHorizonUiController.prototype._getFinalStartupViewPlugins=function(){let e=this.getMainController().getConfigurationManager().getPluginsConfiguration().getAllStartupViewPlugins();let o=t.XList.create();t.XCollectionUtils.forEach(this._validateLayoutPluginCountCompatibility(e),e=>{let n=this.getMainController().getPluginToolsService().checkPluginDependencies(e.getPluginName());if(n){o.add(e)}else{this.getMainController().getMessageManager().addSystemWarningMessage("Dependency missing!",null,t.XStringUtils.concatenate3("The dependencies for plugin ",e.getPluginName()," are missing!"))}});return o};t.HuHorizonUiController.prototype._onPluginInitialized=function(e){this.logDebug(t.XStringUtils.concatenate2("Rendering plugin ui --\x3e ",e.getName()));if(this.getLayoutManager()!==null){this.getLayoutManager().addPluginView(e)}};t.HuHorizonUiController.prototype._onPluginRunError=function(e){this.logDebug(t.XStringUtils.concatenate3("Error during plugin startup --\x3e ",e.getName()," Removing plugin view!"));if(this.getLayoutManager()!==null){this.getLayoutManager().removePluginView(e)}};t.HuHorizonUiController.prototype._presentEmptyWorkspaceView=function(e){let o=t.HuEmptyWorkspaceView.create(this.getGenesis());o.setMessageText(e);o.setReloadConfigButtonPressedProcdeure(()=>{this.getMainController().reloadConfiguration()});this.m_contentContainer.setContent(o.getView())};t.HuHorizonUiController.prototype._registerForInternalKeybordEvents=function(){if(t.notNull(this.m_mainLayout)){let e=t.UiKeyboardState.create(true,true,false,true,false,"KeyP",null);let o=t.UiKeyboardState.create(true,true,false,true,false,"KeyD",null);let n=t.UiKeyboardState.create(true,true,false,true,false,"KeyE",null);let i=t.UiKeyboardConfiguration.create();i.addPreventDefaultState(e);i.addStopPropagationState(e);i.addPreventDefaultState(o);i.addPreventDefaultState(n);this.m_mainLayout.setKeyboardConfiguration(i);this.m_mainLayout.registerOnKeyDown(t.UiLambdaKeyDownListener.create(i=>{if(e.isEqualToAction(i)){this.getHorizonConfiguration().setFrameworkMode(t.HuFrameworkMode.PRODUCTION)}else if(o.isEqualToAction(i)){this.getHorizonConfiguration().setFrameworkMode(t.HuFrameworkMode.DEVELOPER);this.getLocalNotificationCenter().postNotificationWithName(t.HuHorizonInternalNotifications.SHOW_SHELL_MENU,null)}else if(n.isEqualToAction(i)){this.getHorizonConfiguration().setFrameworkMode(t.HuFrameworkMode.DEBUG);this.getLocalNotificationCenter().postNotificationWithName(t.HuHorizonInternalNotifications.SHOW_SHELL_MENU,null)}}))}};t.HuHorizonUiController.prototype._renderPlugins=function(){this.logDebug("Starting ---== Plugins ==---");if(this.getMainController().getConfigurationManager().isConfigurationValid()){if(this.getMainController().getConfigurationManager().getPluginsConfiguration().hasStartupViewPlugins()){let e=this._getFinalStartupViewPlugins();if(t.notNull(e)&&e.hasElements()){return this.getMainController().getViewPluginManager().runAllViewPluginsInOrder(e).onThenExt(e=>{this.logDebug("Finished rendering all startup view plugins!");return t.XBooleanValue.create(true)})}else{this._presentEmptyWorkspaceView("Some plugins specified in the configuration have missing dependencies...");this.logDebug("Plugin dependencies are missing! Nothing to render...");return t.XPromise.resolve(t.XBooleanValue.create(true))}}else{this._presentEmptyWorkspaceView("No document or component plugins specified in the configuration...");this.logDebug("No view plugins specified in the configuration! Nothing to render...");return t.XPromise.resolve(t.XBooleanValue.create(true))}}else{this._presentEmptyWorkspaceView("The specified configuration file is invalid...");this.logDebug("The specified configuration file is invalid! Nothing to render...");return t.XPromise.resolve(t.XBooleanValue.create(true))}};t.HuHorizonUiController.prototype._renderToolbar=function(){this.logDebug("Rendering ---== Toolbar ==---");this._createDebugToolbarGroupIfNeeded();this._generateToolbarItemsIfNeeded();this.getToolbarManager().renderToolbar()};t.HuHorizonUiController.prototype._setupController=function(){this.m_freeGenesis=t.UiFreeGenesis.create(this.getGenesis().getUiManager());this.m_statusBarManager=t.HuHorizonStatusBarManager.create(this);this.m_toolbarManager=t.HuHorizonToolbarManager.create(this);this.m_layoutManager=t.HuHorizonLayoutManager.create(this,this.getMainController().getConfigurationManager().getLayoutConfiguration());this.getMainController().getViewPluginManager().setPluginInitializedConsumer(this._onPluginInitialized.bind(this));this.getMainController().getViewPluginManager().setPluginRunErrorConsumer(this._onPluginRunError.bind(this));this._applyInitialStatusBarState()};t.HuHorizonUiController.prototype._shouldShowToolbar=function(){if(this.getMainController().getConfigurationManager().getHorizonConfiguration().isToolbarPropertySet()){return this.getMainController().getConfigurationManager().getHorizonConfiguration().isToolbarVisible()}return this.isRunningInDebugEnvironment()||this.getMainController().getConfigurationManager().getToolbarConfiguration().hasToolbarItems()};t.HuHorizonUiController.prototype._validateLayoutPluginCountCompatibility=function(e){if(t.notNull(e)){if(this.getLayoutManager().getLayoutType().isSingleViewLayout()&&e.size()>1){this.getMainController().getMessageManager().addSystemWarningMessage("Could not render all plugins","Incompatible layout","The selected layout only supports rendering of one plugin!");this.logDebug(t.XStringUtils.concatenate3("A single plugin layout was selected but the configuration plugin count is ",t.XInteger.convertToString(e.size()),"! Rendering only the first plugin!"));return t.XCollectionUtils.singletonList(e.get(0))}}return e};t.HuHorizonUiController.prototype.getFreeGenesis=function(){return this.m_freeGenesis};t.HuHorizonUiController.prototype.getLayoutManager=function(){return this.m_layoutManager};t.HuHorizonUiController.prototype.getStatusBarManager=function(){return this.m_statusBarManager};t.HuHorizonUiController.prototype.getToolbarManager=function(){return this.m_toolbarManager};t.HuHorizonUiController.prototype.reInitUi=function(){this.logDebug("Initialize Ui");this.m_mainLayout=this.getGenesis().newControl(t.UiType.FLEX_LAYOUT);this.m_mainLayout.useMaxSpace();this.m_mainLayout.setDirection(t.UiFlexDirection.COLUMN);this.m_mainLayout.setBackgroundDesign(t.UiBackgroundDesign.SOLID);this.m_mainLayout.addItem(this.getToolbarManager().getView());this.m_contentContainer=this.m_mainLayout.addNewItemOfType(t.UiType.CONTENT_WRAPPER);this.m_contentContainer.addCssClass("ffHorizonMainContent");this.m_contentContainer.setMinHeight(t.UiCssLength.create("0"));this.m_contentContainer.useMaxSpace();this.m_contentContainer.setFlex("1 1 auto");this.m_contentContainer.setContent(this.getLayoutManager().getView());this.m_mainLayout.addItem(this.getStatusBarManager().getView());this._applyInitialConfig();this.getMainGenesis().setRoot(this.m_mainLayout);this._renderToolbar();this._registerForInternalKeybordEvents();return this._renderPlugins().onFinally(()=>{this.logDebug("Ui initialized!");this.getLocalNotificationCenter().postNotificationWithName(t.HuHorizonInternalNotifications.ALL_PLUGIN_RENDERING_FINISHED,null)})};t.HuHorizonUiController.prototype.releaseObject=function(){this.m_statusBarManager=t.XObjectExt.release(this.m_statusBarManager);this.m_toolbarManager=t.XObjectExt.release(this.m_toolbarManager);this.m_layoutManager=t.XObjectExt.release(this.m_layoutManager);this.m_contentContainer=t.XObjectExt.release(this.m_contentContainer);this.m_mainLayout=t.XObjectExt.release(this.m_mainLayout);this.m_freeGenesis=t.XObjectExt.release(this.m_freeGenesis);this.getMainGenesis().clearUi();t.HuDfSubController.prototype.releaseObject.call(this)};t.HuPluginListDialog=function(){};t.HuPluginListDialog.prototype=new t.DfUiDialogProgram;t.HuPluginListDialog.prototype._ff_c="HuPluginListDialog";t.HuPluginListDialog.DEFAULT_PROGRAM_NAME="HorizonPluginListDialog";t.HuPluginListDialog.ENTRY_LABEL_FLEX="0 0 120px";t.HuPluginListDialog.ENTRY_WRAPPER_MARGIN="0.375rem";t.HuPluginListDialog.PARAM_SHOW_ALL="showAll";t.HuPluginListDialog.createRunnerForDebug=function(e,o){let n=t.ProgramRunner.createRunner(e,t.HuPluginListDialog.DEFAULT_PROGRAM_NAME);n.setBooleanArgument(t.HuPluginListDialog.PARAM_SHOW_ALL,o);return n};t.HuPluginListDialog.prototype.m_currentPluginFactory=null;t.HuPluginListDialog.prototype.m_isShowAll=false;t.HuPluginListDialog.prototype.m_pluginDetailsContainer=null;t.HuPluginListDialog.prototype.m_searchableListView=null;t.HuPluginListDialog.prototype._createChipContainer=function(e,o){let n=this.getGenesis().newControl(t.UiType.FLEX_LAYOUT);n.setDirection(t.UiFlexDirection.ROW);n.setAlignItems(t.UiFlexAlignItems.CENTER);n.setMinHeight(t.UiCssLength.create("1.5rem"));n.setMargin(t.UiCssBoxEdges.create(t.HuPluginListDialog.ENTRY_WRAPPER_MARGIN));let i=n.addNewItemOfType(t.UiType.LABEL);i.setText(t.XStringUtils.concatenate2(e,": "));i.setFlex(t.HuPluginListDialog.ENTRY_LABEL_FLEX);if(t.notNull(o)&&o.hasElements()){let e=n.addNewItemOfType(t.UiType.CHIP_CONTAINER);e.setEditable(false);t.XCollectionUtils.forEach(o,t=>{let o=e.addNewChip();o.setText(t);o.setEditable(false)})}else{let e=n.addNewItemOfType(t.UiType.LABEL);e.setText("-");e.setFontWeight(t.UiFontWeight.BOLD)}return n};t.HuPluginListDialog.prototype._createNewLabel=function(e,o,n){let i=this.getGenesis().newControl(t.UiType.FLEX_LAYOUT);i.setDirection(t.UiFlexDirection.ROW);i.setAlignItems(t.UiFlexAlignItems.CENTER);i.setMargin(t.UiCssBoxEdges.create(t.HuPluginListDialog.ENTRY_WRAPPER_MARGIN));let r=i.addNewItemOfType(t.UiType.LABEL);r.setText(t.XStringUtils.concatenate2(e,": "));r.setFlex(t.HuPluginListDialog.ENTRY_LABEL_FLEX);let s=i.addNewItemOfType(t.UiType.LABEL);s.setText(t.XStringUtils.isNotNullAndNotEmpty(o)?o:"-");s.setFontWeight(t.UiFontWeight.BOLD);s.setWrapping(n);return i};t.HuPluginListDialog.prototype._fillPluginList=function(e){if(t.notNull(this.m_searchableListView)){let o=t.HuPluginRegistryBase.getAllRegisteredPluginNames();let n=t.XList.create();t.XCollectionUtils.forEach(o,o=>{let i=t.HuPluginRegistryBase.getPluginFactory(o);if(t.notNull(i)&&(t.isNull(e)||e===i.getPluginType())&&(!i.isDebugPlugin()||this.m_isShowAll)){let e=this.getGenesis().newControl(t.UiType.LIST_ITEM);e.setName(i.getName());e.setText(this._getListItemText(i));e.setCustomObject(i);e.setIcon(this._getIconForPlugin(i));e.setTooltip(i.getName());e.setHighlight(this._getHighlightForPlugin(i));e.setInfoStateInverted(true);e.setInfo(this._getInfoTextForPlugin(i));e.setInfoState(this._getInfoStateForPlugin(i));n.add(e)}});if(t.notNull(n)&&n.hasElements()){this.m_searchableListView.setListItems(n)}}};t.HuPluginListDialog.prototype._getHighlightForPlugin=function(e){if(t.notNull(e)){if(e.isInconsistent()){return t.UiMessageType.WARNING}else if(e.isPluginFullyValid()){return t.UiMessageType.SUCCESS}else if(e.canBeInitialized()){return t.UiMessageType.INFORMATION}}return t.UiMessageType.ERROR};t.HuPluginListDialog.prototype._getIconForPlugin=function(e){if(t.notNull(e)){if(e.getPluginType()===t.HuPluginType.COMPONENT){return"screen-split-two"}else if(e.getPluginType()===t.HuPluginType.DOCUMENT){return"document"}else if(e.getPluginType()===t.HuPluginType.COMMAND){return"command-line-interfaces"}}return"question-mark"};t.HuPluginListDialog.prototype._getInfoStateForPlugin=function(e){if(t.notNull(e)){if(e.isPluginFullyValid()){if(e.isInconsistent()){return t.UiValueState.WARNING}return null}if(!e.canBeInitialized()){return t.UiValueState.ERROR}else{return t.UiValueState.INFORMATION}}return t.UiValueState.NONE};t.HuPluginListDialog.prototype._getInfoTextForPlugin=function(e){if(t.notNull(e)){if(e.isPluginFullyValid()){if(e.isInconsistent()){return"Inconsistent"}return null}if(!e.canBeInitialized()){return"Error"}else{return"No Manifest"}}return null};t.HuPluginListDialog.prototype._getListItemText=function(e){let o="Unknown";if(t.notNull(e)){o=e.getDisplayName();if(t.XStringUtils.isNullOrEmpty(o)){o=e.getName()}}return o};t.HuPluginListDialog.prototype._getTagList=function(e){if(t.notNull(e)&&e.getTags()!==null&&e.getTags().hasElements()){let o=t.XList.create();t.XCollectionUtils.forEach(e.getTags(),t=>{o.add(t.getName())});return o}return null};t.HuPluginListDialog.prototype._prepareUi=function(){this._fillPluginList(null);if(t.notNull(this.m_searchableListView)&&this.m_searchableListView.getListItems().hasElements()){let t=this.m_searchableListView.getListItems().get(0);this.m_searchableListView.selectItem(t);let e=t.getCustomObject();this._updateDetails(e)}};t.HuPluginListDialog.prototype._setupTypeDropdown=function(){if(t.notNull(this.m_searchableListView)){let e=t.XList.create();let o=this.getGenesis().newControl(t.UiType.DROPDOWN_ITEM);o.setTag(null);o.setText("All");e.add(o);t.XCollectionUtils.forEach(t.HuPluginType.getAllTypeNames(),o=>{let n=this.getGenesis().newControl(t.UiType.DROPDOWN_ITEM);n.setTag(o);n.setText(o);e.add(n)});this.m_searchableListView.addFilterDropdown(e,o,e=>{let o=this.m_searchableListView.getSearchText();this._fillPluginList(t.HuPluginType.lookup(e.getTag()));this.m_searchableListView.search(o)})}};t.HuPluginListDialog.prototype._showPluginDetails=function(e){if(t.notNull(this.m_pluginDetailsContainer)&&t.notNull(e)){let o=this.m_pluginDetailsContainer.addNewItemOfType(t.UiType.FLEX_LAYOUT);o.setDirection(t.UiFlexDirection.COLUMN);o.useMaxWidth();o.useMaxHeight();o.setPadding(t.UiCssBoxEdges.create("0.5rem"));let n=o.addNewItemOfType(t.UiType.TITLE);n.setText(this._getListItemText(e));n.setTitleLevel(t.UiTitleLevel.H_4);n.setTitleStyle(t.UiTitleLevel.H_4);n.setMargin(t.UiCssBoxEdges.create("0.5rem"));n.setWrapping(false);n.setFlex("0 0 auto");n.setBorderColor(t.UiColor.GREY);n.setBorderWidth(t.UiCssBoxEdges.create("0px 0px 1px 0px"));n.setBorderStyle(t.UiBorderStyle.SOLID);let i=this._createNewLabel("Plugin name",e.getName(),true);o.addItem(i);let r=this._createNewLabel("Plugin type",e.getPluginType()!==null?e.getPluginType().getName():"Unknown",true);o.addItem(r);let s=this._createNewLabel("Description",e.getDescription(),true);o.addItem(s);let a=this._createNewLabel("Author",e.getAuthor(),true);o.addItem(a);let u=this._createNewLabel("Version",e.getVersion(),true);o.addItem(u);let l=this._createNewLabel("Category",e.getPluginCategory().getName(),true);o.addItem(l);let g=this._createChipContainer("Tags",this._getTagList(e));o.addItem(g);let c=this._createNewLabel("Dependencies",t.XCollectionUtils.join(e.getDependencies(),", "),true);o.addItem(c);let p=this._createNewLabel("Modules",t.XCollectionUtils.join(e.getModules(),", "),true);o.addItem(p);let f=this._createNewLabel("SubSystems",t.XCollectionUtils.join(e.getSubSystems(),", "),true);o.addItem(f);let _=this._createNewLabel("ProcessEntities",t.XCollectionUtils.join(e.getProcessEntities(),", "),true);o.addItem(_);let h=this._createNewLabel("Is loaded",e.isPluginLoaded()?"Yes":"No",true);o.addItem(h);let H=this._createNewLabel("Has manifest",e.getManifest()!==null?"Yes":"No",true);o.addItem(H);if(e.getManifest()!==null){let t=this._createNewLabel("Manifest origin",e.getManifestOriginPath(),true);o.addItem(t)}if(t.XStringUtils.isNotNullAndNotEmpty(e.getUrl())){let t=this._createNewLabel("Source url",e.getUrl(),true);o.addItem(t)}let m=this._createNewLabel("Has configuration",e.getConfigurationMetadata()!==null?"Yes":"No",true);o.addItem(m)}};t.HuPluginListDialog.prototype._updateDetails=function(e){if(t.notNull(this.m_pluginDetailsContainer)&&t.notNull(e)){this.m_pluginDetailsContainer.clearItems();this.m_currentPluginFactory=e;this._showPluginDetails(e)}};t.HuPluginListDialog.prototype.buildUi=function(e){let o=e.newControl(t.UiType.FLEX_LAYOUT);o.useMaxSpace();o.setDirection(t.UiFlexDirection.ROW);o.setAlignItems(t.UiFlexAlignItems.CENTER);o.setJustifyContent(t.UiFlexJustifyContent.CENTER);o.setWrap(t.UiFlexWrap.NO_WRAP);o.setBackgroundDesign(t.UiBackgroundDesign.SOLID);this.m_searchableListView=t.UtSearchableListView.create(this.getGenesis(),null);this.m_searchableListView.setSearchFieldPlaceholder("Search plugin...");this.m_searchableListView.setListItemSelectedConsumer(t=>{let e=t.getCustomObject();this._updateDetails(e)});this.m_searchableListView.setListChangdConsumer(e=>{if(t.notNull(this.m_currentPluginFactory)){let o=t.XCollectionUtils.findFirst(e,t=>t.getCustomObject()===this.m_currentPluginFactory);if(t.notNull(o)){this.m_searchableListView.selectItem(o)}}});this._setupTypeDropdown();let n=this.m_searchableListView.getView();n.setWidth(t.UiCssLength.create("300px"));n.setFlex("0 0 300px ");n.setBorderWidth(t.UiCssBoxEdges.create("0px 1px 0px 0px"));n.setBorderColor(t.UiColor.GREY);n.setBorderStyle(t.UiBorderStyle.SOLID);o.addItem(n);this.m_pluginDetailsContainer=o.addNewItemOfType(t.UiType.FLEX_LAYOUT);this.m_pluginDetailsContainer.useMaxHeight();this.m_pluginDetailsContainer.setDirection(t.UiFlexDirection.COLUMN);this.m_pluginDetailsContainer.setJustifyContent(t.UiFlexJustifyContent.START);this.m_pluginDetailsContainer.setAlignItems(t.UiFlexAlignItems.START);this.m_pluginDetailsContainer.setMinWidth(t.UiCssLength.create("0"));this.m_pluginDetailsContainer.setFlex("auto");this.m_pluginDetailsContainer.setBackgroundColor(t.UiColor.WHITE);e.setRoot(o);this._prepareUi()};t.HuPluginListDialog.prototype.getDefaultContainerSize=function(){return t.UiSize.createByCss("900px","60vh")};t.HuPluginListDialog.prototype.getDialogButtons=function(e){let o=e.newControl(t.UiType.DIALOG_BUTTON);o.setText("Close");o.setIcon("sys-cancel-2");o.registerOnPress(t.UiLambdaPressListener.create(t=>{this.terminate()}));let n=t.XList.create();n.add(o);return n};t.HuPluginListDialog.prototype.getLogSeverity=function(){return t.DfUiDialogProgram.prototype.getLogSeverity.call(this)};t.HuPluginListDialog.prototype.getProgramName=function(){return t.HuPluginListDialog.DEFAULT_PROGRAM_NAME};t.HuPluginListDialog.prototype.newProgram=function(){let e=new t.HuPluginListDialog;e.setup();return e};t.HuPluginListDialog.prototype.prepareProgramMetadata=function(e){e.addParameter(t.HuPluginListDialog.PARAM_SHOW_ALL,"Whether to show all the plugins, including debug ones!")};t.HuPluginListDialog.prototype.processArguments=function(e){this.m_isShowAll=e.getBooleanByKeyExt(t.HuPluginListDialog.PARAM_SHOW_ALL,false)};t.HuPluginListDialog.prototype.processConfiguration=function(t){};t.HuPluginListDialog.prototype.releaseObject=function(){this.m_currentPluginFactory=null;this.m_searchableListView=t.XObjectExt.release(this.m_searchableListView);this.m_pluginDetailsContainer=t.XObjectExt.release(this.m_pluginDetailsContainer);t.DfUiDialogProgram.prototype.releaseObject.call(this)};t.HuPluginListDialog.prototype.setupProgram=function(){this.setTitle("Horizon Plugin List");return null};t.HuHorizon=function(){};t.HuHorizon.prototype=new t.DfUiProgram;t.HuHorizon.prototype._ff_c="HuHorizon";t.HuHorizon.prototype.m_controller=null;t.HuHorizon.prototype.m_startupCompleteProcedure=null;t.HuHorizon.prototype._fireStartupCompleteProcedureIfNeeded=function(){if(t.notNull(this.m_startupCompleteProcedure)){this.m_startupCompleteProcedure()}};t.HuHorizon.prototype._getController=function(){return this.m_controller};t.HuHorizon.prototype._handleControllerStatusChanged=function(e){if(e===t.HuMainControllerStatus.RUNNING){this._fireStartupCompleteProcedureIfNeeded()}};t.HuHorizon.prototype._registerPluginStartedObserver=function(){this._getController().getLocalNotificationCenter().addObserverForName(t.HuHorizonInternalNotifications.PLUGIN_STARTED,e=>{this.logDebug(t.HuHorizonInternalNotifications.PLUGIN_STARTED);this.logDebug(e.getStringByKey(t.HuHorizonInternalNotifications.PLUGIN_STARTED_PLUGIN_NAME_NOTIFI_DATA));let o=e.getXObjectByKey(t.HuHorizonInternalNotifications.PLUGIN_STARTED_PLUGIN_TYPE_NOTIFI_DATA);if(t.notNull(o)){this.logDebug(o.getName())}})};t.HuHorizon.prototype.actionByIdExists=function(e){let o=this._getController();if(t.notNull(o)){let n=o.getCommandPluginManager();if(t.notNull(n)){return n.actionByIdExists(e)}}return false};t.HuHorizon.prototype.actionExists=function(e,o){return this.actionByIdExists(t.HuUtils.generateActionId(e,o))};t.HuHorizon.prototype.addObserverForName=function(t,e){if(this._getController()!==null){return this._getController().getLocalNotificationCenter().addObserverForName(t,e)}return null};t.HuHorizon.prototype.addProgramMenuButton=function(t,e,o){return this.addMenuBarButton(t,e,o)};t.HuHorizon.prototype.buildUi=function(e){if(this.m_controller.getCurrentControllerStatus()===t.HuMainControllerStatus.RUNNING){this._fireStartupCompleteProcedureIfNeeded()}else{this.m_controller.addStatusChangedListener(this._handleControllerStatusChanged.bind(this))}};t.HuHorizon.prototype.canTerminate=function(){return t.DfUiProgram.prototype.canTerminate.call(this)};t.HuHorizon.prototype.executeAction=function(e,o,n){return this.executeActionById(t.HuUtils.generateActionId(e,o),n)};t.HuHorizon.prototype.executeActionById=function(e,o){if(this._getController()!==null&&this._getController().getCommandPluginManager()!==null){return this._getController().getCommandPluginManager().executeAction(e,this._getController(),o)}return t.XPromise.reject(t.XError.create("Failed to execute action! Unknown error!"))};t.HuHorizon.prototype.getAllActionIds=function(){let e=this._getController();if(t.notNull(e)){let o=e.getCommandPluginManager();if(t.notNull(o)){return o.getAllActionIds()}}return t.XList.create()};t.HuHorizon.prototype.getContainerCssClass=function(){return"ffHorizonProgram"};t.HuHorizon.prototype.getDataSpace=function(){if(this._getController()!==null){return this._getController().getDataSpace()}return null};t.HuHorizon.prototype.getDefaultContainerSize=function(){return t.UiSize.createByCss("70vw","70vh")};t.HuHorizon.prototype.getLogContextName=function(){return"Program"};t.HuHorizon.prototype.getLogSeverity=function(){return t.DfUiProgram.prototype.getLogSeverity.call(this)};t.HuHorizon.prototype.getLogger=function(){return this._getController().getLogger()};t.HuHorizon.prototype.getMenuBarDisplayName=function(){return null};t.HuHorizon.prototype.getMessageManager=function(){if(this._getController()!==null){return this._getController().getMessageManager()}return null};t.HuHorizon.prototype.getObserverCountForName=function(t){if(this._getController()!==null){return this._getController().getLocalNotificationCenter().getObserverCountForName(t)}return 0};t.HuHorizon.prototype.getProgramMenu=function(){return this.getMenuBar()};t.HuHorizon.prototype.getProgramName=function(){return t.HuHorizonApi.HORIZON_PROGRAM_NAME};t.HuHorizon.prototype.isContainerEmbedded=function(){return this.isEmbedded()};t.HuHorizon.prototype.isProgramBusy=function(){return this.isBusy()};t.HuHorizon.prototype.isProgramMenuVisible=function(){return this.isMenuBarVisible()};t.HuHorizon.prototype.isShowMenuBar=function(){return true};t.HuHorizon.prototype.logDebug=function(e){this.getLogger().logDebug(t.HuBaseUtils.formatLogWithContextName(this.getLogContextName(),e))};t.HuHorizon.prototype.logInfo=function(e){this.getLogger().logInfo(t.HuBaseUtils.formatLogWithContextName(this.getLogContextName(),e))};t.HuHorizon.prototype.newProgram=function(){let e=new t.HuHorizon;e.setup();return e};t.HuHorizon.prototype.postNotificationWithName=function(t,e){if(this._getController()!==null){this._getController().getLocalNotificationCenter().postNotificationWithName(t,e)}};t.HuHorizon.prototype.prepareProgramMetadata=function(e){e.addParameter(t.HuHorizonApi.PARAM_CONFIG,"A stringified json containing the horizon configuration.");e.addParameter(t.HuHorizonApi.PARAM_CONFIG_FILE,"A path pointing to a file containing the configuration.");e.addParameter(t.HuHorizonApi.PARAM_WORKSPACE_DIR,"A path to the workspace directory which should be used.");e.addParameter(t.HuHorizonApi.PARAM_SHOW_SPLASH_SCREEN,"Whether to show the splash screen during startup.");e.addParameter(t.HuHorizonApi.PARAM_PLUGIN_NAME,"Start the specified plugin immediately. When set, ignores config, configFile and workspaceDir arguments!");e.addParameter(t.DfProgram.PARAM_FILE,"Same as configFile")};t.HuHorizon.prototype.processArguments=function(t){};t.HuHorizon.prototype.processConfiguration=function(t){};t.HuHorizon.prototype.releaseObject=function(){this.m_startupCompleteProcedure=null;this.m_controller=t.XObjectExt.release(this.m_controller);t.DfUiProgram.prototype.releaseObject.call(this)};t.HuHorizon.prototype.reloadWithConfiguration=function(t){if(this._getController()!==null){this._getController().applyNewConfiguration(t)}};t.HuHorizon.prototype.removeObserverByUuid=function(t){if(this._getController()!==null){this._getController().getLocalNotificationCenter().removeObserverByUuid(t)}};t.HuHorizon.prototype.removeProgramMenuButton=function(t){this.removeMenuBarButton(t)};t.HuHorizon.prototype.setContainerTitle=function(t){this.setTitle(t)};t.HuHorizon.prototype.setProgramBusy=function(t){this.setBusy(t)};t.HuHorizon.prototype.setProgramMenuVisible=function(t){this.showMenuBar(t)};t.HuHorizon.prototype.setStartupCompleteProcedure=function(e){this.m_startupCompleteProcedure=e;if(t.notNull(this.m_controller)&&this.m_controller.getCurrentControllerStatus()===t.HuMainControllerStatus.RUNNING){this._fireStartupCompleteProcedureIfNeeded()}};t.HuHorizon.prototype.setStatusBarVisible=function(t){if(this._getController()!==null&&this._getController().getUiController()!==null){this._getController().getUiController().getStatusBarManager().setStatusBarVisible(t)}};t.HuHorizon.prototype.setupProgram=function(){let e=this.getArguments();let o=t.HuBootConfig.create();o.setConfigString(e.getStringByKey(t.HuHorizonApi.PARAM_CONFIG));o.setConfigFilePath(e.getStringByKeyExt(t.HuHorizonApi.PARAM_CONFIG_FILE,e.getStringByKey(t.DfProgram.PARAM_FILE)));o.setWorkspaceDirectoryPath(e.getStringByKey(t.HuHorizonApi.PARAM_WORKSPACE_DIR));o.setShowSplashScreen(e.getBooleanByKeyExt(t.HuHorizonApi.PARAM_SHOW_SPLASH_SCREEN,o.isShowSplashScreen()));o.setPluginName(e.getStringByKey(t.HuHorizonApi.PARAM_PLUGIN_NAME));o.setHorizonConfiguration(this.getConfiguration());this.m_controller=t.HuHorizonMainController.create(this);this._registerPluginStartedObserver();return this.m_controller.initiateBoot(o)};t.HuHorizon.prototype.showActivityIndicatorOnSetupPromise=function(){return false};t.HorizonUiModule=function(){};t.HorizonUiModule.prototype=new t.DfModule;t.HorizonUiModule.prototype._ff_c="HorizonUiModule";t.HorizonUiModule.s_module=null;t.HorizonUiModule.getInstance=function(){if(t.isNull(t.HorizonUiModule.s_module)){t.DfModule.checkInitialized(t.HorizonUiApiModule.getInstance());t.HorizonUiModule.s_module=t.DfModule.startExt(new t.HorizonUiModule);t.HuBootControllerStatus.staticSetup();t.HuMainControllerStatus.staticSetup();t.HuPluginManifestProcessingMode.staticSetup();t.HuFrameworkMode.staticSetup();t.HuMessageType.staticSetup();t.HuMessageGroup.staticSetup();t.HuToolbarGroup.staticSetup();t.HuWorkspaceItemPosition.staticSetup();t.HuErrorType.staticSetupHorizon();t.HuPluginControllerFactory.staticSetup();t.HuLayoutFactory.staticSetup();t.HuPluginRegistryBase.staticSetup();t.ProgramRegistry.setProgramFactory(new t.HuHorizon);t.ProgramRegistry.setProgramFactory(new t.HuPluginListDialog);t.HuPluginManifestLoader.loadPluginManifestsFromResources();t.DfModule.stopExt(t.HorizonUiModule.s_module)}return t.HorizonUiModule.s_module};t.HorizonUiModule.prototype.getName=function(){return"ff3610.horizon.ui"};t.HorizonUiModule.getInstance();return t});
//# sourceMappingURL=ff3610.horizon.ui.js.map