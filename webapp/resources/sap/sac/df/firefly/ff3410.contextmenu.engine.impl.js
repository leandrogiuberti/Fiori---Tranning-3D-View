/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff3400.contextmenu.engine"],function(e){"use strict";e.CMEMenuActionUtil={getContextExecutor:function(t,o){return n=>{e.CMEMenuActionUtil.resolveStringConsumer(n,t).ifPresent(e=>{e.accept(n,o)})}},getContextPredicate:function(t,o){return n=>e.CMEMenuActionUtil.resolveBooleanFunctionByString(n,t).map(e=>e.apply(n,o)).orElse(e.XBooleanValue.create(false)).getBoolean()},getNameProvider:function(e){return t=>e},getSimpleContextConsumer:function(t,o){return(n,r)=>{e.CMEMenuActionUtil.resolveStringConsumer(n,t).ifPresent(e=>{e.accept(n,o)})}},resolveBooleanFunctionByString:function(t,o){let n=t.getSingleSubContext(o);return e.isNull(n)?e.XOptional.empty():e.XOptional.of(n.getCustomObject())},resolveStringConsumer:function(t,o){let n=t.getSingleSubContext(o);return e.isNull(n)?e.XOptional.empty():e.XOptional.of(n.getCustomObject())}};e.CMEAbstractAction=function(){};e.CMEAbstractAction.prototype=new e.XObject;e.CMEAbstractAction.prototype._ff_c="CMEAbstractAction";e.CMEAbstractAction.prototype.m_aliasNames=null;e.CMEAbstractAction.prototype.m_availableProvider=null;e.CMEAbstractAction.prototype.m_dataHelpIdProvider=null;e.CMEAbstractAction.prototype.m_enabledProvider=null;e.CMEAbstractAction.prototype.m_explanationProvider=null;e.CMEAbstractAction.prototype.m_highlightProcedure=null;e.CMEAbstractAction.prototype.m_iconProvider=null;e.CMEAbstractAction.prototype.m_localizableExplanationCreator=null;e.CMEAbstractAction.prototype.m_localizableTextCreator=null;e.CMEAbstractAction.prototype.m_longDescription=null;e.CMEAbstractAction.prototype.m_mediumDescription=null;e.CMEAbstractAction.prototype.m_nameProvider=null;e.CMEAbstractAction.prototype.m_shortDescription=null;e.CMEAbstractAction.prototype.m_textProvider=null;e.CMEAbstractAction.prototype.m_unHighlightProcedure=null;e.CMEAbstractAction.prototype.addAliasName=function(e){this.m_aliasNames.add(e)};e.CMEAbstractAction.prototype.asMultiSelectAction=function(){return null};e.CMEAbstractAction.prototype.asSelectOption=function(){return null};e.CMEAbstractAction.prototype.asSingleSelectAction=function(){return null};e.CMEAbstractAction.prototype.asToggleAction=function(){return null};e.CMEAbstractAction.prototype.asTriggerAction=function(){return null};e.CMEAbstractAction.prototype.ensureNameProvider=function(t){if(e.isNull(this.m_nameProvider)){this.m_nameProvider=e=>t}};e.CMEAbstractAction.prototype.getActionType=function(){return e.CmeActionType.ABSTRACT};e.CMEAbstractAction.prototype.getAliasNames=function(){return this.m_aliasNames};e.CMEAbstractAction.prototype.getDataHelpId=function(t){return e.isNull(this.m_dataHelpIdProvider)?null:this.m_dataHelpIdProvider(t)};e.CMEAbstractAction.prototype.getIcon=function(t){return e.isNull(this.m_iconProvider)?null:this.m_iconProvider(t)};e.CMEAbstractAction.prototype.getLocalizedExplanation=function(t){return e.isNull(this.m_explanationProvider)?null:this.m_explanationProvider(t)};e.CMEAbstractAction.prototype.getLocalizedText=function(t){return e.isNull(this.m_textProvider)?null:this.m_textProvider(t)};e.CMEAbstractAction.prototype.getLongDescription=function(){return this.m_longDescription};e.CMEAbstractAction.prototype.getMediumDescription=function(){return this.m_mediumDescription};e.CMEAbstractAction.prototype.getName=function(t){return e.isNull(this.m_nameProvider)?null:this.m_nameProvider(t)};e.CMEAbstractAction.prototype.getShortDescription=function(){return this.m_shortDescription};e.CMEAbstractAction.prototype.highlight=function(t){if(e.notNull(this.m_highlightProcedure)){this.m_highlightProcedure(t)}};e.CMEAbstractAction.prototype.isAvailable=function(t){return e.isNull(this.m_availableProvider)?true:this.m_availableProvider(t)};e.CMEAbstractAction.prototype.isEnabled=function(t){return e.isNull(this.m_enabledProvider)?true:this.m_enabledProvider(t)};e.CMEAbstractAction.prototype.isSelectOption=function(){return this.getActionType().isTypeOf(e.CmeActionType.OPTION)};e.CMEAbstractAction.prototype.isSimpleAction=function(){return this.getActionType().isTypeOf(e.CmeActionType.SIMPLE)};e.CMEAbstractAction.prototype.mapGenericPropertiesToMenuCreator=function(t,o){if(e.notNull(t)){let n=e.CMEValueStringFunctionalResolver.create();n.setFunction(e=>t.retrieveName(this,e));o.setName(n);n=e.CMEValueStringFunctionalResolver.create();n.setFunction(e=>t.retrieveText(this,e));o.setText(n);n=e.CMEValueStringFunctionalResolver.create();n.setFunction(e=>t.retrieveIcon(this,e));o.setIcon(n);n=e.CMEValueStringFunctionalResolver.create();n.setFunction(e=>t.retrieveExplanation(this,e));o.setExplanation(n);let r=e.CMEValueFunctionalResolver.create();r.setFunction(o=>e.XBooleanValue.create(t.checkEnabled(this,o)));o.addEnabledConstraint(r);r=e.CMEValueFunctionalResolver.create();r.setFunction(o=>e.XBooleanValue.create(t.checkAvailable(this,o)));o.addVisibleConstraint(r);o.setHighlightProcedure(e=>{t.onHighlight(this,e)});o.setUnHighlightProcedure(e=>{t.onUnHighlight(this,e)})}else{if(e.notNull(this.m_nameProvider)){let t=e.CMEValueStringFunctionalResolver.create();t.setFunction(this.m_nameProvider);o.setName(t)}if(e.notNull(this.m_iconProvider)){let t=e.CMEValueStringFunctionalResolver.create();t.setFunction(this.m_iconProvider);o.setIcon(t)}if(e.notNull(this.m_dataHelpIdProvider)){let t=e.CMEValueStringFunctionalResolver.create();t.setFunction(this.m_dataHelpIdProvider);o.setDataHelpId(t)}if(e.notNull(this.m_textProvider)){let t=e.CMEValueStringFunctionalResolver.create();t.setFunction(this.m_textProvider);o.setText(t)}else if(e.notNull(this.m_localizableTextCreator)){o.setLocalizableText(this.m_localizableTextCreator)}if(e.notNull(this.m_explanationProvider)){let t=e.CMEValueStringFunctionalResolver.create();t.setFunction(this.m_explanationProvider);o.setExplanation(t)}else if(e.notNull(this.m_localizableExplanationCreator)){o.setLocalizableExplanation(this.m_localizableExplanationCreator)}let t=e.CMEValueFunctionalResolver.create();t.setFunction(t=>e.XBooleanValue.create(e.isNull(this.m_enabledProvider)||this.m_enabledProvider(t)));o.addEnabledConstraint(t);let n=e.CMEValueFunctionalResolver.create();n.setFunction(t=>e.XBooleanValue.create(e.isNull(this.m_availableProvider)||this.m_availableProvider(t)));o.addVisibleConstraint(n);o.setHighlightProcedure(this.m_highlightProcedure);o.setUnHighlightProcedure(this.m_unHighlightProcedure)}};e.CMEAbstractAction.prototype.resolveHighlightProcedure=function(t){let o=null;if(e.notNull(this.m_highlightProcedure)){o=()=>{this.m_highlightProcedure(t)}}return o};e.CMEAbstractAction.prototype.resolveUnHighlightProcedure=function(t){let o=null;if(e.notNull(this.m_unHighlightProcedure)){o=()=>{this.m_unHighlightProcedure(t)}}return o};e.CMEAbstractAction.prototype.setAvailableProvider=function(e){this.m_availableProvider=e};e.CMEAbstractAction.prototype.setDataHelpIdProvider=function(e){this.m_dataHelpIdProvider=e};e.CMEAbstractAction.prototype.setEnabledProvider=function(e){this.m_enabledProvider=e};e.CMEAbstractAction.prototype.setExplanationProvider=function(e){this.m_explanationProvider=e};e.CMEAbstractAction.prototype.setHighlightProcedure=function(e){this.m_highlightProcedure=e};e.CMEAbstractAction.prototype.setIconProvider=function(e){this.m_iconProvider=e};e.CMEAbstractAction.prototype.setLocalizableExplanationCreator=function(e){this.m_localizableExplanationCreator=e};e.CMEAbstractAction.prototype.setLocalizableTextCreator=function(e){this.m_localizableTextCreator=e};e.CMEAbstractAction.prototype.setLongDescription=function(e){this.m_longDescription=e};e.CMEAbstractAction.prototype.setMediumDescription=function(e){this.m_mediumDescription=e};e.CMEAbstractAction.prototype.setNameProvider=function(e){this.m_nameProvider=e};e.CMEAbstractAction.prototype.setShortDescription=function(e){this.m_shortDescription=e};e.CMEAbstractAction.prototype.setTextProvider=function(e){this.m_textProvider=e};e.CMEAbstractAction.prototype.setUnHighlightProcedure=function(e){this.m_unHighlightProcedure=e};e.CMEAbstractAction.prototype.setup=function(){e.XObject.prototype.setup.call(this);this.m_aliasNames=e.XHashSetOfString.create()};e.CMEAbstractAction.prototype.unHighlight=function(t){if(e.notNull(this.m_unHighlightProcedure)){this.m_unHighlightProcedure(t)}};e.CMEActionProviderMapper=function(){};e.CMEActionProviderMapper.prototype=new e.XObject;e.CMEActionProviderMapper.prototype._ff_c="CMEActionProviderMapper";e.CMEActionProviderMapper.create=function(t){let o=new e.CMEActionProviderMapper;o.m_provider=t;return o};e.CMEActionProviderMapper.prototype.m_provider=null;e.CMEActionProviderMapper.prototype.checkAvailable=function(e,t){return this.m_provider.isActionVisible(e.getName(t),t)};e.CMEActionProviderMapper.prototype.checkEnabled=function(e,t){return this.m_provider.isActionEnabled(e.getName(t),t)};e.CMEActionProviderMapper.prototype.checkToggled=function(e,t){return null};e.CMEActionProviderMapper.prototype.onActionMultiSelect=function(e,t,o,n){};e.CMEActionProviderMapper.prototype.onActionSingleSelect=function(e,t,o){};e.CMEActionProviderMapper.prototype.onActionToggled=function(e,t){};e.CMEActionProviderMapper.prototype.onActionTriggered=function(e,t){this.m_provider.onActionTriggered(e.getName(t),t)};e.CMEActionProviderMapper.prototype.onHighlight=function(e,t){};e.CMEActionProviderMapper.prototype.onUnHighlight=function(e,t){};e.CMEActionProviderMapper.prototype.releaseObject=function(){this.m_provider=e.XObjectExt.release(this.m_provider)};e.CMEActionProviderMapper.prototype.retrieveExplanation=function(e,t){return null};e.CMEActionProviderMapper.prototype.retrieveIcon=function(e,t){return null};e.CMEActionProviderMapper.prototype.retrieveName=function(e,t){return null};e.CMEActionProviderMapper.prototype.retrieveText=function(e,t){return null};e.CMEDataProviderMenuActionCommand=function(){};e.CMEDataProviderMenuActionCommand.prototype=new e.XObject;e.CMEDataProviderMenuActionCommand.prototype._ff_c="CMEDataProviderMenuActionCommand";e.CMEDataProviderMenuActionCommand.create=function(t){let o=new e.CMEDataProviderMenuActionCommand;o.m_commandName=t;o.m_parameters=e.XList.create();return o};e.CMEDataProviderMenuActionCommand.prototype.m_commandName=null;e.CMEDataProviderMenuActionCommand.prototype.m_parameters=null;e.CMEDataProviderMenuActionCommand.prototype.addCollectParameter=function(t,o){let n=e.CMEDataProviderParameterMulti.create(t,o,e.CmeCardinalityType.COLLECT);this.m_parameters.add(n);return n};e.CMEDataProviderMenuActionCommand.prototype.addListParameter=function(t,o){let n=e.CMEDataProviderParameterMulti.create(t,o,e.CmeCardinalityType.LIST);this.m_parameters.add(n);return n};e.CMEDataProviderMenuActionCommand.prototype.addSingleValueParameter=function(t,o,n){let r=e.CMEDataProviderParameterSingle.create(t,o,n);this.m_parameters.add(r);return r};e.CMEDataProviderMenuActionCommand.prototype.addSplitParameter=function(t,o){let n=e.CMEDataProviderParameterMulti.create(t,o,e.CmeCardinalityType.SPLIT);this.m_parameters.add(n);return n};e.CMEDataProviderMenuActionCommand.prototype.executeWithContext=function(e,t){let o=this.expandProperties(e);for(let e=0;e<o.size();e++){let n=o.get(e);t.accept(this.m_commandName,n)}};e.CMEDataProviderMenuActionCommand.prototype.expandProperties=function(t){let o=e.XList.create();let n=e.XList.create();n.add(o);for(let o=0;o<this.m_parameters.size();o++){let r=this.m_parameters.get(o);if(r.getCardinalityType()===e.CmeCardinalityType.SINGLE){let o=r.resolveParameter(t);let i;if(o.isPresent()){i=o.get().getName()}else{i=null}e.XCollectionUtils.forEach(n,t=>{t.add(e.XPairOfString.create(r.getName(),i))})}else if(r.getCardinalityType()===e.CmeCardinalityType.COLLECT){n=this.expandPropertiesMultiply(n,r,t)}}return n};e.CMEDataProviderMenuActionCommand.prototype.expandPropertiesMultiply=function(t,o,n){let r=e.XList.create();let i=o.resolveParameters(n);for(let n=0;n<i.size();n++){let s=i.get(n);for(let n=0;n<t.size();n++){let i=e.XList.createWithList(t.get(n));i.add(e.XPairOfString.create(o.getName(),s.getName()));r.add(i)}}return r};e.CMEDataProviderMenuActionCommand.prototype.getCommandName=function(){return this.m_commandName};e.CMEDataProviderMenuActionCommand.prototype.getParameters=function(){return this.m_parameters};e.CMEDataProviderMenuActionCommand.prototype.isEnabledInContext=function(t){return e.XStream.of(this.m_parameters).allMatch(e=>e.isAvailable(t))};e.CMEKeyboardShortcut=function(){};e.CMEKeyboardShortcut.prototype=new e.XObject;e.CMEKeyboardShortcut.prototype._ff_c="CMEKeyboardShortcut";e.CMEKeyboardShortcut.create=function(){return new e.CMEKeyboardShortcut};e.CMEKeyboardShortcut.prototype.m_altPressed=false;e.CMEKeyboardShortcut.prototype.m_code=null;e.CMEKeyboardShortcut.prototype.m_commandOrControlPressedSystemSpecific=false;e.CMEKeyboardShortcut.prototype.m_ctrlPressed=false;e.CMEKeyboardShortcut.prototype.m_key=null;e.CMEKeyboardShortcut.prototype.m_metaPressed=false;e.CMEKeyboardShortcut.prototype.m_shiftPressed=false;e.CMEKeyboardShortcut.prototype.copyFrom=function(e,t){let o=e;this.m_code=o.m_code;this.m_key=o.m_key;this.m_altPressed=o.m_altPressed;this.m_ctrlPressed=o.m_ctrlPressed;this.m_shiftPressed=o.m_shiftPressed;this.m_metaPressed=o.m_metaPressed;this.m_commandOrControlPressedSystemSpecific=o.m_commandOrControlPressedSystemSpecific};e.CMEKeyboardShortcut.prototype.getCode=function(){return this.m_code};e.CMEKeyboardShortcut.prototype.getKey=function(){return this.m_key};e.CMEKeyboardShortcut.prototype.isAltPressed=function(){return this.m_altPressed};e.CMEKeyboardShortcut.prototype.isCommandOrControlPressedSystemSpecific=function(){return this.m_commandOrControlPressedSystemSpecific};e.CMEKeyboardShortcut.prototype.isCtrlPressed=function(){return this.m_ctrlPressed};e.CMEKeyboardShortcut.prototype.isMetaPressed=function(){return this.m_metaPressed};e.CMEKeyboardShortcut.prototype.isShiftPressed=function(){return this.m_shiftPressed};e.CMEKeyboardShortcut.prototype.setAltPressed=function(e){this.m_altPressed=e;return this};e.CMEKeyboardShortcut.prototype.setCode=function(e){this.m_code=e;return this};e.CMEKeyboardShortcut.prototype.setCommandOrControlPressedSystemSpecific=function(e){this.m_commandOrControlPressedSystemSpecific=e;return this};e.CMEKeyboardShortcut.prototype.setCtrlPressed=function(e){this.m_ctrlPressed=e;return this};e.CMEKeyboardShortcut.prototype.setKey=function(e){this.m_key=e;return this};e.CMEKeyboardShortcut.prototype.setMetaPressed=function(e){this.m_metaPressed=e;return this};e.CMEKeyboardShortcut.prototype.setShiftPressed=function(e){this.m_shiftPressed=e;return this};e.CMEConstants={DOUBLE_QUOTE:'"',ENV_PREFIX:"$env.",ENV_PREFIX_SIZE:5,FALSE:"false",NULL:"null",SINGLE_QUOTE:"'",TRUE:"true",VAR_PREFIX:"$",VAR_PREFIX_SIZE:1};e.CMELocalizableTextContextCompound=function(){};e.CMELocalizableTextContextCompound.prototype=new e.XObject;e.CMELocalizableTextContextCompound.prototype._ff_c="CMELocalizableTextContextCompound";e.CMELocalizableTextContextCompound.create=function(t,o){let n=new e.CMELocalizableTextContextCompound;n.setupExt(t,o);return n};e.CMELocalizableTextContextCompound.prototype.m_contextMatchConstant=null;e.CMELocalizableTextContextCompound.prototype.m_localizableTextCreator=null;e.CMELocalizableTextContextCompound.prototype.getMatch=function(t){if(t.resolveValue(this.m_contextMatchConstant)!==null||e.XCollectionUtils.hasElements(t.getSubContexts(this.m_contextMatchConstant))){return this.m_localizableTextCreator}return null};e.CMELocalizableTextContextCompound.prototype.releaseObject=function(){this.m_localizableTextCreator=e.XObjectExt.release(this.m_localizableTextCreator);this.m_contextMatchConstant=null};e.CMELocalizableTextContextCompound.prototype.setupExt=function(e,t){this.m_contextMatchConstant=e;this.m_localizableTextCreator=t};e.CMELocalizableTextCreatorAbstract=function(){};e.CMELocalizableTextCreatorAbstract.prototype=new e.XObject;e.CMELocalizableTextCreatorAbstract.prototype._ff_c="CMELocalizableTextCreatorAbstract";e.CMEMenuCreator=function(){};e.CMEMenuCreator.prototype=new e.XObject;e.CMEMenuCreator.prototype._ff_c="CMEMenuCreator";e.CMEMenuCreator.prototype.isGroupCreator=function(){return false};e.CMEMenuCreator.prototype.resolveElement=function(t,o){if(e.XString.startsWith(t,e.CMEConstants.VAR_PREFIX)){return o.getByKey(e.XString.substring(t,e.CMEConstants.VAR_PREFIX_SIZE,e.XString.size(t)))}else if(e.XString.isEqual(t,e.CMEConstants.NULL)){return null}else if(e.XString.isEqual(t,e.CMEConstants.TRUE)){return e.PrFactory.createBoolean(true)}else if(e.XString.isEqual(t,e.CMEConstants.FALSE)){return e.PrFactory.createBoolean(false)}else if(e.XString.match(t,"([0-9]*\\.[0-9]+)|[0-9]+")){return e.PrFactory.createDouble(e.XDouble.convertFromString(t))}else if(e.XString.startsWith(t,e.CMEConstants.DOUBLE_QUOTE)&&e.XString.endsWith(t,e.CMEConstants.DOUBLE_QUOTE)||e.XString.startsWith(t,e.CMEConstants.SINGLE_QUOTE)&&e.XString.endsWith(t,e.CMEConstants.SINGLE_QUOTE)){return e.PrFactory.createString(e.XString.substring(t,1,e.XString.size(t)-1))}else{return e.JsonParserFactory.createFromString(t)}};e.CMEMenuCreator.prototype.resolveString=function(t,o){let n=this.resolveElement(t,o);if(e.notNull(n)){return n.asString().getString()}else{return t}};e.CMEValueContextCompound=function(){};e.CMEValueContextCompound.prototype=new e.XObject;e.CMEValueContextCompound.prototype._ff_c="CMEValueContextCompound";e.CMEValueContextCompound.create=function(t,o){let n=new e.CMEValueContextCompound;n.setupExpression(t,o);return n};e.CMEValueContextCompound.prototype.m_contextExpression=null;e.CMEValueContextCompound.prototype.m_resolver=null;e.CMEValueContextCompound.prototype.getExpression=function(t){if(t.resolveValue(this.m_contextExpression)!==null||e.XCollectionUtils.hasElements(t.getSubContexts(this.m_contextExpression))){return this.m_resolver}return null};e.CMEValueContextCompound.prototype.releaseObject=function(){this.m_resolver=e.XObjectExt.release(this.m_resolver);this.m_contextExpression=null};e.CMEValueContextCompound.prototype.setupExpression=function(e,t){this.m_resolver=t;this.m_contextExpression=e};e.CMEValueResolver=function(){};e.CMEValueResolver.prototype=new e.XObject;e.CMEValueResolver.prototype._ff_c="CMEValueResolver";e.CMEValueResolver.prototype.resolveBoolean=function(t){return e.XValueUtil.getBoolean(this.resolve(t),false,true)};e.CMEValueResolver.prototype.resolveInteger=function(t){return e.XValueUtil.getInteger(this.resolve(t),false,true)};e.CMEValueResolver.prototype.resolveNumber=function(t){return e.XValueUtil.getDouble(this.resolve(t),false,true)};e.CMEValueResolver.prototype.resolveString=function(t){return e.XValueUtil.getString(this.resolve(t))};e.CMECreatorJsonConstants={CME_ACQUIRE_TEXT_FROM_CONTEXT:"AcquireTextFromContext",CME_ACTION:"Action",CME_ACTIONS_FILTER:"ActionFilter",CME_ACTION_COMMANDS:"Commands",CME_ACTION_COMMAND_EXECUTOR_CONTEXT:"CommandExecutorContext",CME_ACTION_GROUP:"ActionGroup",CME_ACTION_PARAMETERS:"Parameters",CME_ACTION_SPLIT_PARAMETER_CONTEXT:"SplitParameterContext",CME_AND:"And",CME_CONTEXT_ITERATION:"ContextIteration",CME_CONTEXT_PATH_SEPARATOR:"/",CME_CONTEXT_REFOCUS:"RefocusContext",CME_CONTEXT_TEXT_SUFFIX:".TEXT",CME_DATA_CONTEXT:"DataContext",CME_ENGINE_VERSION:"EngineVersion",CME_EQUAL:"Equal",CME_EXCLUDE:"Exclude",CME_EXTENSION:"Extension",CME_GLOBAL_SHORTCUT_ACTIONS:"GlobalShortcutActions",CME_INCLUDE:"Include",CME_ITEM:"Item",CME_ITEMS:"Items",CME_LOGGING_ENABLED:"LoggingEnabled",CME_MATCH:"Match",CME_MATCH_CONTEXT:"MatchContext",CME_MAX_SIZE:"MaxSize",CME_MENUS:"Menus",CME_MENU_ACTIONS:"MenuActions",CME_MENU_EXTENSIONS:"MenuExtensions",CME_MENU_FILTERS:"MenuFilters",CME_MENU_NAMES:"MenuNames",CME_MIN_SIZE:"MinSize",CME_NAME:"Name",CME_NONE:"None",CME_NOT:"Not",CME_NOT_EQUAL:"NotEqual",CME_NOT_EXISTS:"NotExists",CME_OPERATION:"Operation",CME_OPERATION_REDEFINE:"Redefine",CME_OPTION:"Option",CME_OR:"Or",CME_OVERFLOW_PRIORITY:"OverflowPriority",CME_OVERFLOW_PRIORITY_ALWAYS:"Always",CME_OVERFLOW_PRIORITY_ALWAYS_VALUE:4,CME_OVERFLOW_PRIORITY_DISAPPEAR:"Disappear",CME_OVERFLOW_PRIORITY_DISAPPEAR_VALUE:3,CME_OVERFLOW_PRIORITY_HIGH:"High",CME_OVERFLOW_PRIORITY_HIGH_VALUE:2,CME_OVERFLOW_PRIORITY_LOW:"Low",CME_OVERFLOW_PRIORITY_LOW_VALUE:1,CME_OVERFLOW_PRIORITY_NEVER:"Never",CME_OVERFLOW_PRIORITY_NEVER_VALUE:0,CME_PARAMETER_DATA_HELP_ID:"DataHelpId",CME_PARAMETER_DISABLE_IF_LESS_THAN_N_ENABLED_ITEMS:"DisableIfLessThanNEnabledItems",CME_PARAMETER_DISABLE_IF_LESS_THAN_N_ITEMS:"DisableIfLessThanNItems",CME_PARAMETER_EAGER:"Eager",CME_PARAMETER_ENABLED:"Enabled",CME_PARAMETER_EXPLANATION:"Explanation",CME_PARAMETER_EXPLANATION_LOCALIZATION_KEY:"ExplanationKey",CME_PARAMETER_FIRST_SUBOPTION_IS_DEFAULT:"FirstSubOptionIsDefault",CME_PARAMETER_FLAT:"Flat",CME_PARAMETER_FLAT_IF_LESS_THAN_N_ITEMS:"FlatIfLessThanNItems",CME_PARAMETER_HIDE_IF_LESS_THAN_N_ITEMS:"HideIfLessThanNItems",CME_PARAMETER_ICON:"Icon",CME_PARAMETER_KEEP_TITLE_FOR_FLAT:"KeepTitleForFlat",CME_PARAMETER_KEY:"Key",CME_PARAMETER_LOCALIZATION_KEY:"LocalizationKey",CME_PARAMETER_NAME:"Name",CME_PARAMETER_OVERFLOW_IF_MORE_THAN_N_ITEMS:"OverflowIfMoreThanNItems",CME_PARAMETER_OVERFLOW_LOCALIZATION_KEY:"OverflowLocalizationKey",CME_PARAMETER_OVERFLOW_TEXT:"OverflowText",CME_PARAMETER_RESOLVE:"Resolve",CME_PARAMETER_TEXT:"Text",CME_PARAMETER_TYPE:"Type",CME_PARAMETER_TYPE_COLLECT:"Collect",CME_PARAMETER_TYPE_LIST:"List",CME_PARAMETER_TYPE_SINGLE:"Single",CME_PARAMETER_TYPE_SPLIT:"Split",CME_PARAMETER_VALUE:"Value",CME_PARAMETER_VALUES:"Values",CME_PARAMETER_VALUE_CONTEXT:"ValueContext",CME_PARAMETER_VISIBLE:"Visible",CME_REFERENCE:"Reference",CME_REFERENCE_ROOT:"$Root",CME_REPLACEMENTS:"Replacements",CME_SEPARATOR:"Separator",CME_SHORTCUT_ALT:"Alt",CME_SHORTCUT_CODE:"Code",CME_SHORTCUT_COMMAND_OR_CTRL:"CommandOrCtrl",CME_SHORTCUT_CTRL:"Ctrl",CME_SHORTCUT_KEY:"Key",CME_SHORTCUT_META:"Meta",CME_SHORTCUT_SHIFT:"Shift",CME_SORTED:"Sorted",CME_SUBMENU:"Submenu",CME_SUBMENUS:"Submenus",CME_TYPE:"Type",CME_UI_CONTEXT:"UiContext"};e.CMECreatorJsonHelper={addChildCreators:function(t,o,n,r,i,s){let l=o.getListByKey(e.CMECreatorJsonConstants.CME_ITEMS);let a=e.XCollectionUtils.size(l);for(let o=0;o<a;o++){let a=l.getStructureAt(o);let u=e.CMECreatorJsonHelper.getCondition(a);if(e.notNull(u)){let o=e.CMEConditionalMenuCreator.create();o.setContextCondition(u);e.CMECreatorJsonHelper.createMenuCreator(o,a,n,r,i,s);t.addMenuCreator(o)}else{e.CMECreatorJsonHelper.createMenuCreator(t,a,n,r,i,s)}}},addParameterValues:function(t,o){let n=o.getListByKey(e.CMECreatorJsonConstants.CME_PARAMETER_VALUES);if(e.XCollectionUtils.hasElements(n)){e.XCollectionUtils.forEach(n,o=>{t.addValue(o.asStructure().getStringByKey(e.CMECreatorJsonConstants.CME_PARAMETER_NAME),o.asStructure().getStringByKey(e.CMECreatorJsonConstants.CME_PARAMETER_TEXT))})}},checkCreateLoopCreator:function(t,o){let n=t;if(o.hasStringByKey(e.CMECreatorJsonConstants.CME_CONTEXT_ITERATION)){let r=e.CMELoopedMenuCreator.createLoop();r.setLoopParameter(o.getStringByKey(e.CMECreatorJsonConstants.CME_CONTEXT_ITERATION));r.setSortLooping(o.getBooleanByKeyExt(e.CMECreatorJsonConstants.CME_SORTED,true));t.addMenuCreator(r);n=r}return n},checkCreateRefocusCreator:function(t,o){let n=t;if(o.hasStringByKey(e.CMECreatorJsonConstants.CME_CONTEXT_REFOCUS)){let r=e.CMERefocusedMenuCreator.createRefocus();r.setRefocusParameter(o.getStringByKey(e.CMECreatorJsonConstants.CME_CONTEXT_REFOCUS));t.addMenuCreator(r);n=r}return n},createConditionLeaf:function(t,o,n){let r=e.CMEContextConditionLeaf.create();r.setConditionalType(n);r.setComparison(o);r.setMatchString(t);return r},createConditionalMenuCreator:function(t,o,n,r,i){let s=e.CMEConditionalMenuCreator.create();let l=e.CMEContextCondition.create();e.CMECreatorJsonHelper.setupConditionFromStructure(l,t);s.setContextCondition(l);let a=t.getStringByKey(e.CMECreatorJsonConstants.CME_NAME);if(e.isNull(a)){a=e.XGuid.getGuid()}s.setName(e.CMEValueLiteralResolver.create(e.XStringValue.create(a)));e.CMECreatorJsonHelper.addChildCreators(s,t,o,n,r,i);return s},createConditionalMenuCreatorGroup:function(t,o,n,r,i){let s=e.CMEConditionalMenuCreatorGroup.create();for(let l=0;l<t.size();l++){let a=t.getStructureAt(l);let u=e.CMECreatorJsonHelper.createConditionalMenuCreator(a,o,n,r,i);s.addConditionalMenuCreator(u)}return s},createContextPathText:function(t){let o=e.XString.substring(t,e.XString.lastIndexOf(t,e.CMECreatorJsonConstants.CME_CONTEXT_PATH_SEPARATOR)+1,-1);return e.CMEValuePathResolver.create(e.XStringUtils.concatenate2(o,e.CMECreatorJsonConstants.CME_CONTEXT_TEXT_SUFFIX))},createLocalizableText:function(t){let o=null;let n;if(e.notNull(t)&&t.isStructure()){n=e.CMELocalizableTextCreatorSimple.create();o=n;let r=t.asStructure();n.setKey(r.getStringByKey(e.CMECreatorJsonConstants.CME_PARAMETER_KEY));let i=r.getListByKey(e.CMECreatorJsonConstants.CME_REPLACEMENTS);if(e.XCollectionUtils.hasElements(i)){for(let t=0;t<i.size();t++){n.addReplacement(e.CMECreatorJsonHelper.createResolver(i.get(t)))}}}else if(e.notNull(t)&&t.isList()){let n=e.CMELocalizableTextCreatorContextCompound.create();o=n;let r=t.asList();for(let t=0;t<r.size();t++){let o=r.getStructureAt(t);n.addReplacer(o.getStringByKey(e.CMECreatorJsonConstants.CME_MATCH_CONTEXT),e.CMECreatorJsonHelper.createLocalizableText(o))}}else if(e.notNull(t)&&t.isString()){n=e.CMELocalizableTextCreatorSimple.create();o=n;n.setKey(t.asString().getString())}return o},createMatchCondition:function(t){let o=null;if(t.isString()){o=e.CMECreatorJsonHelper.createConditionLeaf(t.asString().getString(),e.CMEValueLiteralResolver.getNullResolver(),e.CMEConditionalType.EXISTS)}else if(t.isStructure()){let n=t.asStructure();if(n.containsKey(e.CMECreatorJsonConstants.CME_AND)){o=e.CMECreatorJsonHelper.decorateAlgebraParameters(e.CMEContextConditionAlgebra.createAnd(),n.getListByKey(e.CMECreatorJsonConstants.CME_AND))}else if(n.containsKey(e.CMECreatorJsonConstants.CME_OR)){o=e.CMECreatorJsonHelper.decorateAlgebraParameters(e.CMEContextConditionAlgebra.createOr(),n.getListByKey(e.CMECreatorJsonConstants.CME_OR))}else if(n.containsKey(e.CMECreatorJsonConstants.CME_NONE)){o=e.CMECreatorJsonHelper.decorateAlgebraParameters(e.CMEContextConditionAlgebra.createNone(),n.getListByKey(e.CMECreatorJsonConstants.CME_NONE))}else if(n.containsKey(e.CMECreatorJsonConstants.CME_NOT)){let t=e.CMEContextConditionNot.create();t.setBaseCondition(e.CMECreatorJsonHelper.createMatchCondition(n.getByKey(e.CMECreatorJsonConstants.CME_NOT)));o=t}else{let t=e.CMEConditionalType.EXISTS;let r=e.CMEValueLiteralResolver.getNullResolver();let i=n.getStringByKey(e.CMECreatorJsonConstants.CME_MATCH);if(n.containsKey(e.CMECreatorJsonConstants.CME_MIN_SIZE)){t=e.CMEConditionalType.MIN_SIZE;r=e.CMECreatorJsonHelper.createResolver(n.getByKey(e.CMECreatorJsonConstants.CME_MIN_SIZE))}else if(n.containsKey(e.CMECreatorJsonConstants.CME_MAX_SIZE)){t=e.CMEConditionalType.MAX_SIZE;r=e.CMECreatorJsonHelper.createResolver(n.getByKey(e.CMECreatorJsonConstants.CME_MAX_SIZE))}else if(n.containsKey(e.CMECreatorJsonConstants.CME_EQUAL)){t=e.CMEConditionalType.EQUAL;r=e.CMECreatorJsonHelper.createResolver(n.getByKey(e.CMECreatorJsonConstants.CME_EQUAL))}else if(n.containsKey(e.CMECreatorJsonConstants.CME_NOT_EQUAL)){t=e.CMEConditionalType.NOT_EQUAL;r=e.CMECreatorJsonHelper.createResolver(n.getByKey(e.CMECreatorJsonConstants.CME_NOT_EQUAL))}else if(n.containsKey(e.CMECreatorJsonConstants.CME_NOT_EXISTS)){t=e.CMEConditionalType.NOT_EXISTS}o=e.CMECreatorJsonHelper.createConditionLeaf(i,r,t)}}return o},createMenuCreator:function(t,o,n,r,i,s){let l;let a;if(o.hasStringByKey(e.CMECreatorJsonConstants.CME_ACTION)){a=e.CMECreatorJsonHelper.checkCreateRefocusCreator(t,o);a=e.CMECreatorJsonHelper.checkCreateLoopCreator(a,o);e.CMECreatorJsonHelper.mapAction(a,o,r,i,s)}else if(o.hasStringByKey(e.CMECreatorJsonConstants.CME_SUBMENU)){let u=o.getStringByKey(e.CMECreatorJsonConstants.CME_SUBMENU);let C=n.getByKey(u);if(e.isNull(C)&&s.isLoggingEnabled()){e.XLogger.println(e.XStringUtils.concatenate2("Missing submenu config for: ",u))}else{a=e.CMECreatorJsonHelper.checkCreateRefocusCreator(t,o);a=e.CMECreatorJsonHelper.checkCreateLoopCreator(a,o);a=e.CMECreatorJsonHelper.checkCreateRefocusCreator(a,C);a=e.CMECreatorJsonHelper.checkCreateLoopCreator(a,C);l=e.CMEGroupCreator.create();a.addMenuCreator(l);e.CMECreatorJsonHelper.setOverrideProperties(l,C);e.CMECreatorJsonHelper.setOverrideProperties(l,o);e.CMECreatorJsonHelper.addChildCreators(l,C,n,r,i,s)}}else if(o.hasStringByKey(e.CMECreatorJsonConstants.CME_TYPE)){let u=o.getStringByKey(e.CMECreatorJsonConstants.CME_TYPE);if(e.XString.isEqual(u,e.CMECreatorJsonConstants.CME_SEPARATOR)){let n=e.CMESeparatorCreator.create();t.addMenuCreator(n);e.CMECreatorJsonHelper.setOverrideProperties(n,o)}else if(e.XString.isEqual(u,e.CMECreatorJsonConstants.CME_SUBMENU)){a=e.CMECreatorJsonHelper.checkCreateRefocusCreator(t,o);a=e.CMECreatorJsonHelper.checkCreateLoopCreator(a,o);l=e.CMEGroupCreator.create();a.addMenuCreator(l);e.CMECreatorJsonHelper.setOverrideProperties(l,o);e.CMECreatorJsonHelper.addChildCreators(l,o,n,r,i,s)}}},createMenuExtender:function(t,o,n,r,i){let s=e.CMEMenuExtensionGroup.create();for(let l=0;l<t.size();l++){let a=t.getStructureAt(l);let u=s.addNewExtension();let C=e.CMEContextCondition.create();e.CMECreatorJsonHelper.setupConditionFromStructure(C,a);u.setCondition(C);let c=a.getListByKey(e.CMECreatorJsonConstants.CME_EXTENSION);if(e.XCollectionUtils.hasElements(c)){for(let t=0;t<c.size();t++){let s=u.addNewOperation();let l=c.getStructureAt(t);let a=e.CMEMenuExtensionOperationType.lookup(l.getStringByKeyExt(e.CMECreatorJsonConstants.CME_OPERATION,e.CMECreatorJsonConstants.CME_OPERATION_REDEFINE));s.setOperationType(a);s.setReference(l.getStringByKeyExt(e.CMECreatorJsonConstants.CME_REFERENCE,e.CMECreatorJsonConstants.CME_REFERENCE_ROOT));C=e.CMEContextCondition.create();e.CMECreatorJsonHelper.setupConditionFromStructure(C,l);s.setCondition(C);let p=e.CMEGroupCreator.create();e.CMECreatorJsonHelper.addChildCreators(p,l,o,n,r,i);s.setGroupCreator(p)}}}return s},createMenuFilter:function(t){let o=e.CMEMenuFilterList.create();for(let n=0;n<t.size();n++){let r;let i=t.getStructureAt(n);let s=o.addNewMenuFilter();let l=e.CMEContextCondition.create();e.CMECreatorJsonHelper.setupConditionFromStructure(l,i);s.setCondition(l);let a;if(i.containsKey(e.CMECreatorJsonConstants.CME_EXCLUDE)){a=i.getListByKey(e.CMECreatorJsonConstants.CME_EXCLUDE);for(r=0;r<a.size();r++){e.CMECreatorJsonHelper.setupFilterOperation(s.addNewExcludeOperation(),a.getStructureAt(r))}}if(i.containsKey(e.CMECreatorJsonConstants.CME_INCLUDE)){a=i.getListByKey(e.CMECreatorJsonConstants.CME_INCLUDE);for(r=0;r<a.size();r++){e.CMECreatorJsonHelper.setupFilterOperation(s.addNewIncludeOperation(),a.getStructureAt(r))}}}return o},createMenuGenerator:function(t,o,n,r,i){return e.CMECreatorJsonHelper.createConditionalMenuCreatorGroup(t,o,n,r,i)},createResolver:function(t){return e.CMECreatorJsonHelper.createResolverExt(t,e.CMEValueLiteralResolver.getNullResolver())},createResolverExt:function(t,o){if(e.isNull(t)){return o}else if(t.isStructure()&&t.asStructure().containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_RESOLVE)){return e.CMEValuePathResolver.create(t.asStructure().getStringByKey(e.CMECreatorJsonConstants.CME_PARAMETER_RESOLVE))}else if(t.isList()){let n=t.asList();let r=e.CMEValueContextSwitchResolver.create();for(let t=0;t<n.size();t++){let i=n.getStructureAt(t);r.addConditionalValue(i.getStringByKey(e.CMECreatorJsonConstants.CME_PARAMETER_RESOLVE),e.CMECreatorJsonHelper.createResolverExt(i,o))}return r}else{return e.CMEValueLiteralResolver.create(t.copyAsPrimitiveXValue())}},decorateAlgebraParameters:function(t,o){for(let n=0;n<o.size();n++){t.addSubCondition(e.CMECreatorJsonHelper.createMatchCondition(o.get(n)))}return t},defineActionParameter:function(t,o){let n=o.getStringByKey(e.CMECreatorJsonConstants.CME_PARAMETER_TYPE);let r=o.getStringByKey(e.CMECreatorJsonConstants.CME_PARAMETER_NAME);let i=o.getStringByKey(e.CMECreatorJsonConstants.CME_PARAMETER_VALUE_CONTEXT);if(e.XString.isEqual(n,e.CMECreatorJsonConstants.CME_PARAMETER_TYPE_SINGLE)){t.addSingleValueParameter(r,o.getStringByKey(e.CMECreatorJsonConstants.CME_PARAMETER_VALUE),i)}else if(e.XString.isEqual(n,e.CMECreatorJsonConstants.CME_PARAMETER_TYPE_SPLIT)){e.CMECreatorJsonHelper.addParameterValues(t.addSplitParameter(r,i),o)}else if(e.XString.isEqual(n,e.CMECreatorJsonConstants.CME_PARAMETER_TYPE_LIST)){e.CMECreatorJsonHelper.addParameterValues(t.addListParameter(r,i),o)}else if(e.XString.isEqual(n,e.CMECreatorJsonConstants.CME_PARAMETER_TYPE_COLLECT)){e.CMECreatorJsonHelper.addParameterValues(t.addCollectParameter(r,i),o)}},defineActionParameters:function(t,o){let n=e.XCollectionUtils.size(o);for(let r=0;r<n;r++){e.CMECreatorJsonHelper.defineActionParameter(t,o.getStructureAt(r))}},defineCommand:function(t,o){let n=t.addNewCommand(o.getStringByKey(e.CMECreatorJsonConstants.CME_NAME));if(o.containsKey(e.CMECreatorJsonConstants.CME_ACTION_PARAMETERS)){e.CMECreatorJsonHelper.defineActionParameters(n,o.getListByKey(e.CMECreatorJsonConstants.CME_ACTION_PARAMETERS))}},defineCommands:function(t,o){let n=e.XCollectionUtils.size(o);for(let r=0;r<n;r++){e.CMECreatorJsonHelper.defineCommand(t,o.getStructureAt(r))}},defineCustomAction:function(t,o){let n=t.getStringByKey(e.CMECreatorJsonConstants.CME_NAME);let r=t.getStringByKey(e.CMECreatorJsonConstants.CME_ACTION_COMMAND_EXECUTOR_CONTEXT);let i=e.CMEDataProviderMenuAction.create(n,r);i.setSplitParameter(t.getStringByKey(e.CMECreatorJsonConstants.CME_ACTION_SPLIT_PARAMETER_CONTEXT));if(t.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_LOCALIZATION_KEY)){i.setLocalizableTextCreator(e.CMECreatorJsonHelper.createLocalizableText(t.getByKey(e.CMECreatorJsonConstants.CME_PARAMETER_LOCALIZATION_KEY)))}if(t.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_TEXT)){i.setTextProvider(o=>t.getStringByKey(e.CMECreatorJsonConstants.CME_PARAMETER_TEXT))}if(t.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_EXPLANATION)){i.setExplanationProvider(o=>t.getStringByKey(e.CMECreatorJsonConstants.CME_PARAMETER_EXPLANATION))}if(t.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_EXPLANATION_LOCALIZATION_KEY)){i.setLocalizableExplanationCreator(e.CMECreatorJsonHelper.createLocalizableText(t.getByKey(e.CMECreatorJsonConstants.CME_PARAMETER_EXPLANATION_LOCALIZATION_KEY)))}if(t.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_ICON)){i.setIconProvider(o=>t.getStringByKey(e.CMECreatorJsonConstants.CME_PARAMETER_ICON))}if(t.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_DATA_HELP_ID)){i.setDataHelpIdProvider(o=>t.getStringByKey(e.CMECreatorJsonConstants.CME_PARAMETER_DATA_HELP_ID))}if(t.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_VISIBLE)){let o=e.CMEContextCondition.create();e.CMECreatorJsonHelper.setupConditionFromStructure(o,t.getStructureByKey(e.CMECreatorJsonConstants.CME_PARAMETER_VISIBLE));i.setVisibleCondition(o)}if(t.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_ENABLED)){let o=e.CMEContextCondition.create();e.CMECreatorJsonHelper.setupConditionFromStructure(o,t.getStructureByKey(e.CMECreatorJsonConstants.CME_PARAMETER_ENABLED));i.setEnabledCondition(o)}if(t.containsKey(e.CMECreatorJsonConstants.CME_ACTION_COMMANDS)){e.CMECreatorJsonHelper.defineCommands(i,t.getListByKey(e.CMECreatorJsonConstants.CME_ACTION_COMMANDS))}o.registerAction(n,i);return i},defineCustomActionGroup:function(t,o){let n=t.getStringByKey(e.CMECreatorJsonConstants.CME_NAME);let r=e.CMEActionGroup.create();r.setNameProvider(e=>n);if(t.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_LOCALIZATION_KEY)){r.setLocalizableTextCreator(e.CMECreatorJsonHelper.createLocalizableText(t.getByKey(e.CMECreatorJsonConstants.CME_PARAMETER_LOCALIZATION_KEY)))}if(t.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_TEXT)){r.setTextProvider(o=>t.getStringByKey(e.CMECreatorJsonConstants.CME_PARAMETER_TEXT))}if(t.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_EXPLANATION)){r.setExplanationProvider(o=>t.getStringByKey(e.CMECreatorJsonConstants.CME_PARAMETER_EXPLANATION))}if(t.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_EXPLANATION_LOCALIZATION_KEY)){r.setLocalizableExplanationCreator(e.CMECreatorJsonHelper.createLocalizableText(t.getByKey(e.CMECreatorJsonConstants.CME_PARAMETER_EXPLANATION_LOCALIZATION_KEY)))}if(t.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_ICON)){r.setIconProvider(o=>t.getStringByKey(e.CMECreatorJsonConstants.CME_PARAMETER_ICON))}if(t.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_DATA_HELP_ID)){r.setDataHelpIdProvider(o=>t.getStringByKey(e.CMECreatorJsonConstants.CME_PARAMETER_DATA_HELP_ID))}let i=t.getListByKey(e.CMECreatorJsonConstants.CME_ITEMS);let s=e.XCollectionUtils.size(i);for(let t=0;t<s;t++){let n=i.getStructureAt(t);if(e.XString.isEqual(n.getStringByKey(e.CMECreatorJsonConstants.CME_TYPE),e.CMECreatorJsonConstants.CME_ACTION_GROUP)){r.addAction(e.CMECreatorJsonHelper.defineCustomActionGroup(n,o))}else if(n.containsKey(e.CMECreatorJsonConstants.CME_ACTION)){r.addAction(o.getAction(n.getStringByKey(e.CMECreatorJsonConstants.CME_ACTION)))}else{r.addAction(e.CMECreatorJsonHelper.defineCustomAction(n,o))}}o.registerAction(n,r);return r},defineCustomActions:function(t,o){let n=e.XCollectionUtils.size(t);for(let r=0;r<n;r++){let n=t.getStructureAt(r);if(e.XString.isEqual(n.getStringByKey(e.CMECreatorJsonConstants.CME_TYPE),e.CMECreatorJsonConstants.CME_ACTION_GROUP)){e.CMECreatorJsonHelper.defineCustomActionGroup(n,o)}else{e.CMECreatorJsonHelper.defineCustomAction(n,o)}}},getCondition:function(t){let o=null;if(t.containsKey(e.CMECreatorJsonConstants.CME_MENU_NAMES)||t.containsKey(e.CMECreatorJsonConstants.CME_UI_CONTEXT)||t.containsKey(e.CMECreatorJsonConstants.CME_DATA_CONTEXT)){o=e.CMEContextCondition.create();e.CMECreatorJsonHelper.setupConditionFromStructure(o,t)}return o},lookupShortcutAction:function(t,o,n){let r=t.getStringByKey(e.CMECreatorJsonConstants.CME_ACTION);let i=o.getAction(r);if(e.isNull(i)){if(n.isLoggingEnabled()){e.XLogger.println(e.XStringUtils.concatenate3("Adding dummy action ",r," to registry"))}i=e.CMETriggerAction.create();i.setNameProvider(e=>r);o.registerAction(r,i)}if(t.containsKey(e.CMECreatorJsonConstants.CME_SHORTCUT_KEY)&&t.containsKey(e.CMECreatorJsonConstants.CME_SHORTCUT_CODE)){let o=i.setupKeyboardShortcut();o.setKey(t.getStringByKey(e.CMECreatorJsonConstants.CME_SHORTCUT_KEY));o.setCode(t.getStringByKey(e.CMECreatorJsonConstants.CME_SHORTCUT_CODE));o.setAltPressed(t.getBooleanByKeyExt(e.CMECreatorJsonConstants.CME_SHORTCUT_ALT,false));o.setMetaPressed(t.getBooleanByKeyExt(e.CMECreatorJsonConstants.CME_SHORTCUT_META,false));o.setShiftPressed(t.getBooleanByKeyExt(e.CMECreatorJsonConstants.CME_SHORTCUT_SHIFT,false));o.setCtrlPressed(t.getBooleanByKeyExt(e.CMECreatorJsonConstants.CME_SHORTCUT_CTRL,false));o.setCommandOrControlPressedSystemSpecific(t.getBooleanByKeyExt(e.CMECreatorJsonConstants.CME_SHORTCUT_COMMAND_OR_CTRL,false))}return i},mapAction:function(t,o,n,r,i){let s=o.getStringByKey(e.CMECreatorJsonConstants.CME_ACTION);let l=r.getAction(s);let a;if(e.isNull(l)){if(i.isLoggingEnabled()){e.XLogger.println(e.XStringUtils.concatenate3("Adding dummy action ",s," to registry"))}l=e.CMETriggerAction.create();l.setNameProvider(e=>s);r.registerAction(s,l);a=l.mapToMenuCreator(i)}else{a=l.mapToMenuCreator(i);if(l.isSimpleAction()&&n.contains(l)){a.transferShortcut(l.getKeyboardShortcut())}if(o.containsKey(e.CMECreatorJsonConstants.CME_ITEMS)&&a.isGroupCreator()){let t=o.getListByKey(e.CMECreatorJsonConstants.CME_ITEMS);for(let o=0;o<t.size();o++){let n=t.getStructureAt(o);if(n.hasStringByKey(e.CMECreatorJsonConstants.CME_OPTION)){let t=r.getOption(n.getStringByKey(e.CMECreatorJsonConstants.CME_OPTION));if(e.notNull(t)){let o=t.mapToMenuCreator(i);e.CMECreatorJsonHelper.setOverrideProperties(o,n);a.addMenuCreator(o)}}}}}t.addMenuCreator(a);e.CMECreatorJsonHelper.setOverrideProperties(a,o)},remapShortcutActions:function(t,o,n){let r=e.XList.create();if(e.XCollectionUtils.hasElements(t)){for(let i=0;i<t.size();i++){r.add(e.CMECreatorJsonHelper.lookupShortcutAction(t.getStructureAt(i),o,n))}}return r},remapSubMenuDefinitions:function(t){let o=e.XHashMapByString.create();if(e.XCollectionUtils.hasElements(t)){for(let n=0;n<t.size();n++){let r=t.getStructureAt(n);o.put(r.getStringByKey(e.CMECreatorJsonConstants.CME_NAME),r)}}return o},setOverrideProperties:function(t,o){if(o.containsKey(e.CMECreatorJsonConstants.CME_CONTEXT_REFOCUS)&&(t.getText()===null||t.getText()===e.CMEValueLiteralResolver.getNullResolver()||o.getBooleanByKey(e.CMECreatorJsonConstants.CME_ACQUIRE_TEXT_FROM_CONTEXT))){t.setLocalizableText(null);t.setText(e.CMECreatorJsonHelper.createContextPathText(o.getStringByKey(e.CMECreatorJsonConstants.CME_CONTEXT_REFOCUS)))}if(o.containsKey(e.CMECreatorJsonConstants.CME_CONTEXT_ITERATION)&&(t.getText()===null||t.getText()===e.CMEValueLiteralResolver.getNullResolver()||o.getBooleanByKey(e.CMECreatorJsonConstants.CME_ACQUIRE_TEXT_FROM_CONTEXT))){t.setLocalizableText(null);t.setText(e.CMECreatorJsonHelper.createContextPathText(o.getStringByKey(e.CMECreatorJsonConstants.CME_CONTEXT_ITERATION)))}if(o.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_NAME)){t.setName(e.CMECreatorJsonHelper.createResolver(o.getByKey(e.CMECreatorJsonConstants.CME_PARAMETER_NAME)))}if(o.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_LOCALIZATION_KEY)){t.setText(null);t.setLocalizableText(e.CMECreatorJsonHelper.createLocalizableText(o.getByKey(e.CMECreatorJsonConstants.CME_PARAMETER_LOCALIZATION_KEY)))}if(o.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_TEXT)){t.setLocalizableText(null);t.setText(e.CMECreatorJsonHelper.createResolver(o.getByKey(e.CMECreatorJsonConstants.CME_PARAMETER_TEXT)))}if(o.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_EXPLANATION)){t.setLocalizableExplanation(null);t.setExplanation(e.CMECreatorJsonHelper.createResolver(o.getByKey(e.CMECreatorJsonConstants.CME_PARAMETER_EXPLANATION)))}if(o.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_ICON)){t.setIcon(e.CMECreatorJsonHelper.createResolver(o.getByKey(e.CMECreatorJsonConstants.CME_PARAMETER_ICON)))}if(o.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_DATA_HELP_ID)){t.setDataHelpId(e.CMECreatorJsonHelper.createResolver(o.getByKey(e.CMECreatorJsonConstants.CME_PARAMETER_DATA_HELP_ID)))}if(o.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_ENABLED)){t.addEnabledConstraint(e.CMECreatorJsonHelper.createResolverExt(o.getByKey(e.CMECreatorJsonConstants.CME_PARAMETER_ENABLED),e.CMEValueLiteralResolver.getTrueResolver()))}if(o.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_VISIBLE)){t.addVisibleConstraint(e.CMECreatorJsonHelper.createResolverExt(o.getByKey(e.CMECreatorJsonConstants.CME_PARAMETER_VISIBLE),e.CMEValueLiteralResolver.getTrueResolver()))}if(o.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_FLAT)){t.setFlatIfLessThanNItems(o.getBooleanByKey(e.CMECreatorJsonConstants.CME_PARAMETER_FLAT)?e.CMEValueLiteralResolver.getMinus1Resolver():e.CMEValueLiteralResolver.getPlus1Resolver())}if(o.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_EAGER)){t.setEager(o.getBooleanByKeyExt(e.CMECreatorJsonConstants.CME_PARAMETER_EAGER,false))}if(o.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_FLAT_IF_LESS_THAN_N_ITEMS)){t.setFlatIfLessThanNItems(e.CMECreatorJsonHelper.createResolverExt(o.getByKey(e.CMECreatorJsonConstants.CME_PARAMETER_FLAT_IF_LESS_THAN_N_ITEMS),e.CMEValueLiteralResolver.getPlus1Resolver()))}if(o.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_KEEP_TITLE_FOR_FLAT)){t.setKeepTitleForFlat(o.getBooleanByKey(e.CMECreatorJsonConstants.CME_PARAMETER_KEEP_TITLE_FOR_FLAT))}if(o.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_FIRST_SUBOPTION_IS_DEFAULT)){t.setFirstSubOptionIsDefault(o.getBooleanByKey(e.CMECreatorJsonConstants.CME_PARAMETER_FIRST_SUBOPTION_IS_DEFAULT))}if(o.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_HIDE_IF_LESS_THAN_N_ITEMS)){t.setHideIfLessThanNItems(e.CMECreatorJsonHelper.createResolverExt(o.getByKey(e.CMECreatorJsonConstants.CME_PARAMETER_HIDE_IF_LESS_THAN_N_ITEMS),e.CMEValueLiteralResolver.getPlus1Resolver()))}if(o.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_DISABLE_IF_LESS_THAN_N_ITEMS)){t.setDisableIfLessThanNItems(e.CMECreatorJsonHelper.createResolverExt(o.getByKey(e.CMECreatorJsonConstants.CME_PARAMETER_DISABLE_IF_LESS_THAN_N_ITEMS),e.CMEValueLiteralResolver.getPlus1Resolver()))}if(o.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_DISABLE_IF_LESS_THAN_N_ENABLED_ITEMS)){t.setDisableIfLessThanNEnabledItems(e.CMECreatorJsonHelper.createResolverExt(o.getByKey(e.CMECreatorJsonConstants.CME_PARAMETER_DISABLE_IF_LESS_THAN_N_ENABLED_ITEMS),e.CMEValueLiteralResolver.getPlus1Resolver()))}if(o.containsKey(e.CMECreatorJsonConstants.CME_OVERFLOW_PRIORITY)){switch(o.getStringByKey(e.CMECreatorJsonConstants.CME_OVERFLOW_PRIORITY)){case e.CMECreatorJsonConstants.CME_OVERFLOW_PRIORITY_ALWAYS:t.setOverflowPriority(e.CMECreatorJsonConstants.CME_OVERFLOW_PRIORITY_ALWAYS_VALUE);break;case e.CMECreatorJsonConstants.CME_OVERFLOW_PRIORITY_DISAPPEAR:t.setOverflowPriority(e.CMECreatorJsonConstants.CME_OVERFLOW_PRIORITY_DISAPPEAR_VALUE);break;case e.CMECreatorJsonConstants.CME_OVERFLOW_PRIORITY_HIGH:t.setOverflowPriority(e.CMECreatorJsonConstants.CME_OVERFLOW_PRIORITY_HIGH_VALUE);break;case e.CMECreatorJsonConstants.CME_OVERFLOW_PRIORITY_LOW:t.setOverflowPriority(e.CMECreatorJsonConstants.CME_OVERFLOW_PRIORITY_LOW_VALUE);break;case e.CMECreatorJsonConstants.CME_OVERFLOW_PRIORITY_NEVER:t.setOverflowPriority(e.CMECreatorJsonConstants.CME_OVERFLOW_PRIORITY_NEVER_VALUE);break}}if(o.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_OVERFLOW_IF_MORE_THAN_N_ITEMS)){t.setOverflowIfMoreThanNItems(e.CMECreatorJsonHelper.createResolverExt(o.getByKey(e.CMECreatorJsonConstants.CME_PARAMETER_OVERFLOW_IF_MORE_THAN_N_ITEMS),e.CMEValueLiteralResolver.getMinus1Resolver()))}if(o.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_OVERFLOW_TEXT)){t.setOverflowText(e.CMECreatorJsonHelper.createResolver(o.getByKey(e.CMECreatorJsonConstants.CME_PARAMETER_OVERFLOW_TEXT)))}if(o.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_OVERFLOW_LOCALIZATION_KEY)){t.setOverflowLocalizableText(e.CMECreatorJsonHelper.createLocalizableText(o.getByKey(e.CMECreatorJsonConstants.CME_PARAMETER_OVERFLOW_LOCALIZATION_KEY)))}if(o.containsKey(e.CMECreatorJsonConstants.CME_PARAMETER_EXPLANATION_LOCALIZATION_KEY)){t.setLocalizableExplanation(e.CMECreatorJsonHelper.createLocalizableText(o.getByKey(e.CMECreatorJsonConstants.CME_PARAMETER_EXPLANATION_LOCALIZATION_KEY)))}},setupConditionFromStructure:function(t,o){let n;if(o.containsKey(e.CMECreatorJsonConstants.CME_MENU_NAMES)){let r=o.getListByKey(e.CMECreatorJsonConstants.CME_MENU_NAMES);for(n=0;n<r.size();n++){t.addMatchingMenuName(r.getStringAt(n))}}if(o.containsKey(e.CMECreatorJsonConstants.CME_UI_CONTEXT)){let r=o.getListByKey(e.CMECreatorJsonConstants.CME_UI_CONTEXT);for(n=0;n<r.size();n++){t.addMatchingUiContext(r.getStringAt(n))}}if(o.containsKey(e.CMECreatorJsonConstants.CME_DATA_CONTEXT)){let r=o.getListByKey(e.CMECreatorJsonConstants.CME_DATA_CONTEXT);for(n=0;n<r.size();n++){t.addMatchingDataContext(r.getStringAt(n))}}},setupFilterOperation:function(t,o){let n=e.CMEContextCondition.create();e.CMECreatorJsonHelper.setupConditionFromStructure(n,o);t.setCondition(n);t.setPath(o.getStringByKey(e.CMECreatorJsonConstants.CME_ITEM))}};e.CMEContextAccess=function(){};e.CMEContextAccess.prototype=new e.XObject;e.CMEContextAccess.prototype._ff_c="CMEContextAccess";e.CMEContextAccess.NAME="NAME";e.CMEContextAccess.TEXT="TEXT";e.CMEContextAccess.TYPE="TYPE";e.CMEContextAccess.createFromPrototype=function(t){let o=new e.CMEContextAccess;o.m_globalContext=t.m_globalContext;o.m_localContext=t.m_localContext;o.m_uiContext=t.m_uiContext;return o};e.CMEContextAccess.createWithContext=function(t){let o=new e.CMEContextAccess;o.setup();o.setGlobalContext(t);o.setLocalContext(t);return o};e.CMEContextAccess.createWithDataAndUiContext=function(t,o){let n=new e.CMEContextAccess;n.setup();n.setGlobalContext(t);n.setLocalContext(t);n.setUiContext(o);return n};e.CMEContextAccess.prototype.m_globalContext=null;e.CMEContextAccess.prototype.m_localContext=null;e.CMEContextAccess.prototype.m_uiContext=null;e.CMEContextAccess.prototype.getCopy=function(){return e.CMEContextAccess.createFromPrototype(this)};e.CMEContextAccess.prototype.getGlobalContext=function(){return this.m_globalContext};e.CMEContextAccess.prototype.getGlobalSubContexts=function(e){return this.m_globalContext.filterSubContextsRecursive(e)};e.CMEContextAccess.prototype.getLocalContext=function(){return this.m_localContext};e.CMEContextAccess.prototype.getLocalSubContexts=function(e){return this.m_localContext.filterSubContextsRecursive(e)};e.CMEContextAccess.prototype.getSingleGlobalSubContext=function(t){let o=this.getGlobalSubContexts(t);let n=null;if(e.XCollectionUtils.hasElements(o)&&o.size()===1){n=o.get(0)}return n};e.CMEContextAccess.prototype.getSingleLocalSubContext=function(t){let o=this.getLocalSubContexts(t);let n=null;if(e.XCollectionUtils.hasElements(o)&&o.size()===1){n=o.get(0)}return n};e.CMEContextAccess.prototype.getSingleSubContext=function(t){let o=this.getSubContexts(t);let n=null;if(e.XCollectionUtils.hasElements(o)&&o.size()===1){n=o.get(0)}return n};e.CMEContextAccess.prototype.getSubContext=function(t){let o=this;if(e.XCollectionUtils.hasElements(t)){o=this.getCopy();for(let n=0;n<t.size();n++){let r=t.get(n);let i=this.getSubContexts(r);if(e.XCollectionUtils.hasElements(i)&&i.size()===1){o.setLocalContext(i.get(0))}else{o=null;break}}}return o};e.CMEContextAccess.prototype.getSubContexts=function(t){let o=this.m_localContext.filterSubContextsRecursive(t);if(!e.XCollectionUtils.hasElements(o)){o=this.m_globalContext.filterSubContextsRecursive(t)}return o};e.CMEContextAccess.prototype.getUiContext=function(){return this.m_uiContext};e.CMEContextAccess.prototype.resolveValue=function(t){let o=null;let n=e.XString.endsWith(t,e.CMEContextAccess.TYPE);let r=!n&&e.XString.endsWith(t,e.CMEContextAccess.NAME);let i=!n&&!r&&e.XString.endsWith(t,e.CMEContextAccess.TEXT);let s=e.XString.size(t);let l=null;if(n){l=this.getSubContexts(e.XString.substring(t,0,s-e.XString.size(e.CMEContextAccess.TYPE)-1))}else if(r){l=this.getSubContexts(e.XString.substring(t,0,s-e.XString.size(e.CMEContextAccess.NAME)-1))}else if(i){l=this.getSubContexts(e.XString.substring(t,0,s-e.XString.size(e.CMEContextAccess.TEXT)-1))}if(e.XCollectionUtils.hasElements(l)&&l.size()===1){let t=l.get(0);if(n){o=e.XStringValue.create(t.getType())}else if(r){o=e.XStringValue.create(t.getName())}else if(i){o=e.XStringValue.create(t.getText())}}return o};e.CMEContextAccess.prototype.setGlobalContext=function(e){this.m_globalContext=e};e.CMEContextAccess.prototype.setLocalContext=function(e){this.m_localContext=e};e.CMEContextAccess.prototype.setUiContext=function(e){this.m_uiContext=e};e.CMEContextCondition=function(){};e.CMEContextCondition.prototype=new e.XObject;e.CMEContextCondition.prototype._ff_c="CMEContextCondition";e.CMEContextCondition.AND_OPERATOR_STRING="&&";e.CMEContextCondition.NOT_OPERATOR_STRING="!";e.CMEContextCondition.create=function(){let t=new e.CMEContextCondition;t.setup();return t};e.CMEContextCondition.prototype.m_dataContextCondition=null;e.CMEContextCondition.prototype.m_menuNames=null;e.CMEContextCondition.prototype.m_uiContexts=null;e.CMEContextCondition.prototype.addMatchingDataContext=function(t){let o=e.XStringTokenizer.splitString(t,e.CMEContextCondition.AND_OPERATOR_STRING);if(e.XCollectionUtils.hasElements(o)){if(o.size()===1){this.m_dataContextCondition.addSubCondition(this.parseLeafCondition(o.get(0)))}else{let t=e.CMEContextConditionAlgebra.createAnd();for(let e=0;e<o.size();e++){t.addSubCondition(this.parseLeafCondition(o.get(e)))}this.m_dataContextCondition.addSubCondition(t)}}};e.CMEContextCondition.prototype.addMatchingMenuName=function(e){this.m_menuNames.add(e)};e.CMEContextCondition.prototype.addMatchingUiContext=function(e){this.m_uiContexts.add(e)};e.CMEContextCondition.prototype.checkStringWithWildCardListMatch=function(t,o){let n=true;if(e.XCollectionUtils.hasElements(t)){n=false;if(e.XStringUtils.isNotNullAndNotEmpty(o)){for(let r=0;r<t.size();r++){if(e.XStringUtils.isWildcardPatternMatching(o,t.get(r))){n=true;break}}}}return n};e.CMEContextCondition.prototype.matches=function(t,o){let n=e.notNull(t);n=n&&this.m_dataContextCondition.checkCondition(t);n=n&&this.checkStringWithWildCardListMatch(this.m_uiContexts,t.getUiContext());n=n&&this.checkStringWithWildCardListMatch(this.m_menuNames,o);return n};e.CMEContextCondition.prototype.parseLeafCondition=function(t){let o=e.XString.trim(t);let n;let r;if(e.XString.startsWith(o,e.CMEContextCondition.NOT_OPERATOR_STRING)){let t=e.CMEContextConditionNot.create();r=e.CMEContextConditionLeaf.create();r.setMatchString(e.XString.trim(e.XString.substring(o,e.XString.size(e.CMEContextCondition.NOT_OPERATOR_STRING),e.XString.size(o))));r.setConditionalType(e.CMEConditionalType.EXISTS);t.setBaseCondition(r);n=t}else{r=e.CMEContextConditionLeaf.create();r.setMatchString(e.XString.trim(o));r.setConditionalType(e.CMEConditionalType.EXISTS);n=r}return n};e.CMEContextCondition.prototype.releaseObject=function(){this.m_uiContexts=e.XObjectExt.release(this.m_uiContexts);this.m_menuNames=e.XObjectExt.release(this.m_menuNames);this.m_dataContextCondition=e.XObjectExt.release(this.m_dataContextCondition);e.XObject.prototype.releaseObject.call(this)};e.CMEContextCondition.prototype.setup=function(){e.XObject.prototype.setup.call(this);this.m_uiContexts=e.XList.create();this.m_menuNames=e.XList.create();this.m_dataContextCondition=e.CMEContextConditionAlgebra.createOr()};e.CMEContextConditionAbstract=function(){};e.CMEContextConditionAbstract.prototype=new e.XObject;e.CMEContextConditionAbstract.prototype._ff_c="CMEContextConditionAbstract";e.CMEMenuDefinition=function(){};e.CMEMenuDefinition.prototype=new e.XObject;e.CMEMenuDefinition.prototype._ff_c="CMEMenuDefinition";e.CMEMenuDefinition.create=function(){let t=new e.CMEMenuDefinition;t.setup();return t};e.CMEMenuDefinition.prototype.m_condition=null;e.CMEMenuDefinition.prototype.m_groupCreator=null;e.CMEMenuDefinition.prototype.m_menuName=null;e.CMEMenuDefinition.prototype.createMenu=function(t){let o=e.CMEGroupingMenuItem.create();o.setName(this.m_menuName);this.m_groupCreator.transform(t,o);return o};e.CMEMenuDefinition.prototype.getCondition=function(){return this.m_condition};e.CMEMenuDefinition.prototype.getMenuName=function(){return this.m_menuName};e.CMEMenuDefinition.prototype.isApplicableTo=function(e){return this.m_condition.matches(e,null)};e.CMEMenuDefinition.prototype.releaseObject=function(){this.m_groupCreator=e.XObjectExt.release(this.m_groupCreator);this.m_menuName=null;this.m_condition=null;e.XObject.prototype.releaseObject.call(this)};e.CMEMenuDefinition.prototype.setCondition=function(e){this.m_condition=e};e.CMEMenuDefinition.prototype.setMenuName=function(e){this.m_menuName=e};e.CMEMenuDefinition.prototype.setup=function(){e.XObject.prototype.setup.call(this)};e.CMEMenuDefinitionGroup=function(){};e.CMEMenuDefinitionGroup.prototype=new e.XObject;e.CMEMenuDefinitionGroup.prototype._ff_c="CMEMenuDefinitionGroup";e.CMEMenuDefinitionGroup.create=function(){let t=new e.CMEMenuDefinitionGroup;t.setup();return t};e.CMEMenuDefinitionGroup.prototype.m_definitions=null;e.CMEMenuDefinitionGroup.prototype.addNewDefinition=function(){let t=e.CMEMenuDefinition.create();this.m_definitions.add(t);return t};e.CMEMenuDefinitionGroup.prototype.createMenu=function(t){let o=e.CMEGroupingMenuItem.create();for(let e=0;e<this.m_definitions.size();e++){let n=this.m_definitions.get(e);if(n.isApplicableTo(t)){o=n.createMenu(t);break}}return o};e.CMEMenuDefinitionGroup.prototype.releaseObject=function(){this.m_definitions=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_definitions);e.XObject.prototype.releaseObject.call(this)};e.CMEMenuDefinitionGroup.prototype.setup=function(){e.XObject.prototype.setup.call(this);this.m_definitions=e.XList.create()};e.CMEMenuExtension=function(){};e.CMEMenuExtension.prototype=new e.XObject;e.CMEMenuExtension.prototype._ff_c="CMEMenuExtension";e.CMEMenuExtension.create=function(){let t=new e.CMEMenuExtension;t.setup();return t};e.CMEMenuExtension.prototype.m_condition=null;e.CMEMenuExtension.prototype.m_operations=null;e.CMEMenuExtension.prototype.addNewOperation=function(){let t=e.CMEMenuExtensionOperation.create();this.m_operations.add(t);return t};e.CMEMenuExtension.prototype.extend=function(e){for(let t=0;t<this.m_operations.size();t++){let o=this.m_operations.get(t);if(o.isApplicableTo(e)){o.extend(e)}}};e.CMEMenuExtension.prototype.getCondition=function(){return this.m_condition};e.CMEMenuExtension.prototype.isApplicableTo=function(e){return this.m_condition.matches(e.getContext(),e.getName())};e.CMEMenuExtension.prototype.releaseObject=function(){this.m_operations=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_operations);this.m_condition=null;e.XObject.prototype.releaseObject.call(this)};e.CMEMenuExtension.prototype.setCondition=function(e){this.m_condition=e};e.CMEMenuExtension.prototype.setup=function(){e.XObject.prototype.setup.call(this);this.m_operations=e.XList.create()};e.CMEMenuExtensionGroup=function(){};e.CMEMenuExtensionGroup.prototype=new e.XObject;e.CMEMenuExtensionGroup.prototype._ff_c="CMEMenuExtensionGroup";e.CMEMenuExtensionGroup.create=function(){let t=new e.CMEMenuExtensionGroup;t.setup();return t};e.CMEMenuExtensionGroup.prototype.m_extensions=null;e.CMEMenuExtensionGroup.prototype.addNewExtension=function(){let t=e.CMEMenuExtension.create();this.m_extensions.add(t);return t};e.CMEMenuExtensionGroup.prototype.extendMenu=function(e){for(let t=0;t<this.m_extensions.size();t++){let o=this.m_extensions.get(t);if(o.isApplicableTo(e)){o.extend(e);break}}};e.CMEMenuExtensionGroup.prototype.releaseObject=function(){this.m_extensions=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_extensions);e.XObject.prototype.releaseObject.call(this)};e.CMEMenuExtensionGroup.prototype.setup=function(){e.XObject.prototype.setup.call(this);this.m_extensions=e.XList.create()};e.CMEMenuExtensionOperation=function(){};e.CMEMenuExtensionOperation.prototype=new e.XObject;e.CMEMenuExtensionOperation.prototype._ff_c="CMEMenuExtensionOperation";e.CMEMenuExtensionOperation.create=function(){let t=new e.CMEMenuExtensionOperation;t.setup();return t};e.CMEMenuExtensionOperation.prototype.m_condition=null;e.CMEMenuExtensionOperation.prototype.m_groupCreator=null;e.CMEMenuExtensionOperation.prototype.m_operationType=null;e.CMEMenuExtensionOperation.prototype.m_reference=null;e.CMEMenuExtensionOperation.prototype.applyOperation=function(t,o){if(this.m_operationType===e.CMEMenuExtensionOperationType.INSERT_BEFORE){t.addSubItemsBefore(o)}else if(this.m_operationType===e.CMEMenuExtensionOperationType.INSERT_AFTER){t.addSubItemsAfter(o)}else if(this.m_operationType===e.CMEMenuExtensionOperationType.PREPEND_INTO){t.addSubItemsAtStart(o)}else if(this.m_operationType===e.CMEMenuExtensionOperationType.APPEND_INTO){t.addSubItemsAtEnd(o)}else if(this.m_operationType===e.CMEMenuExtensionOperationType.REDEFINE){t.clearSubItems();t.addSubItemsAtEnd(o)}};e.CMEMenuExtensionOperation.prototype.extend=function(t){let o=t.findItemsByNameOrAlias(this.m_reference,true);if(e.XCollectionUtils.hasElements(o)){for(let n=0;n<o.size();n++){let r=e.CMEGroupingMenuItem.create();this.m_groupCreator.transform(t.getContext(),r);let i=r.getSubItems();if(e.XCollectionUtils.hasElements(i)){this.applyOperation(o.get(n),i.get(0).getActionGroup().getSubItems())}}}};e.CMEMenuExtensionOperation.prototype.getCondition=function(){return this.m_condition};e.CMEMenuExtensionOperation.prototype.getGroupCreator=function(){return this.m_groupCreator};e.CMEMenuExtensionOperation.prototype.getOperationType=function(){return this.m_operationType};e.CMEMenuExtensionOperation.prototype.getReference=function(){return this.m_reference};e.CMEMenuExtensionOperation.prototype.isApplicableTo=function(e){return this.m_condition.matches(e.getContext(),e.getName())};e.CMEMenuExtensionOperation.prototype.releaseObject=function(){this.m_operationType=null;this.m_reference=null;this.m_condition=e.XObjectExt.release(this.m_condition);this.m_groupCreator=e.XObjectExt.release(this.m_groupCreator);e.XObject.prototype.releaseObject.call(this)};e.CMEMenuExtensionOperation.prototype.setCondition=function(e){this.m_condition=e};e.CMEMenuExtensionOperation.prototype.setGroupCreator=function(e){this.m_groupCreator=e};e.CMEMenuExtensionOperation.prototype.setOperationType=function(e){this.m_operationType=e};e.CMEMenuExtensionOperation.prototype.setReference=function(e){this.m_reference=e};e.CMEFactoryImpl=function(){};e.CMEFactoryImpl.prototype=new e.XObject;e.CMEFactoryImpl.prototype._ff_c="CMEFactoryImpl";e.CMEFactoryImpl.create=function(){return new e.CMEFactoryImpl};e.CMEFactoryImpl.prototype.m_showNamesInMenu=false;e.CMEFactoryImpl.prototype.newContext=function(){return e.CMEContext.create()};e.CMEFactoryImpl.prototype.newContextAccess=function(t,o){return e.CMEContextAccess.createWithDataAndUiContext(t,o)};e.CMEFactoryImpl.prototype.newGroupingMenuItem=function(){return e.CMEGroupingMenuItem.create()};e.CMEFactoryImpl.prototype.newGroupingMenuItemFromPrStructure=function(t){return e.CMEMenuJsonHelper.deserialiseGroupingMenuItem(t)};e.CMEFactoryImpl.prototype.newMenuTreeGenerator=function(){return e.CMEMenuTreeGenerator.create()};e.CMEFactoryImpl.prototype.newMenuTreePopulator=function(t,o){let n=e.CMEMenuTreePopulatorSelfRef.create(t,o);n.setShowNames(()=>this.m_showNamesInMenu);return n};e.CMEFactoryImpl.prototype.newMenuTreePopulatorWithSubMapper=function(t,o,n){let r=e.CMEMenuTreePopulatorBranching.createWithSubMapper(t,o,n);r.setShowNames(()=>this.m_showNamesInMenu);return r};e.CMEFactoryImpl.prototype.newMultiSelectAction=function(){return e.CMEMultiSelectAction.create()};e.CMEFactoryImpl.prototype.newSelectionOption=function(){return e.CMESelectionOption.create()};e.CMEFactoryImpl.prototype.newSimpleToggleAction=function(t,o,n,r,i,s){let l=e.CMEToggleAction.create();l.setNameProvider(e.CMEMenuActionUtil.getNameProvider(t));l.setAvailableProvider(e.CMEMenuActionUtil.getContextPredicate(n,o));l.setEnabledProvider(e.CMEMenuActionUtil.getContextPredicate(r,o));l.setProvider(e.CMEMenuActionUtil.getContextPredicate(i,o));l.setConsumer(e.CMEMenuActionUtil.getSimpleContextConsumer(s,o));return l};e.CMEFactoryImpl.prototype.newSimpleTriggerAction=function(t,o,n,r,i){let s=e.CMETriggerAction.create();s.setNameProvider(e.CMEMenuActionUtil.getNameProvider(t));s.setAvailableProvider(e.CMEMenuActionUtil.getContextPredicate(n,o));s.setEnabledProvider(e.CMEMenuActionUtil.getContextPredicate(r,o));s.setTrigger(e.CMEMenuActionUtil.getContextExecutor(i,o));return s};e.CMEFactoryImpl.prototype.newSingleSelectAction=function(){return e.CMESingleSelectAction.create()};e.CMEFactoryImpl.prototype.newToggleAction=function(){return e.CMEToggleAction.create()};e.CMEFactoryImpl.prototype.newTriggerAction=function(){return e.CMETriggerAction.create()};e.CMEFactoryImpl.prototype.newUiCache=function(){return e.CMEUiCache.create()};e.CMEFactoryImpl.prototype.serializeGroupingMenuItemToPaths=function(t){return e.CMEMenuJsonHelper.serializeGroupingMenuItemToPaths(t)};e.CMEFactoryImpl.prototype.serializeGroupingMenuItemToPrStructure=function(t){return e.CMEMenuJsonHelper.serializeGroupingMenuItem(t,true)};e.CMEFactoryImpl.prototype.setShowNamesInMenu=function(e){this.m_showNamesInMenu=e};e.CMEMenuFilter=function(){};e.CMEMenuFilter.prototype=new e.XObject;e.CMEMenuFilter.prototype._ff_c="CMEMenuFilter";e.CMEMenuFilter.create=function(){let t=new e.CMEMenuFilter;t.setup();return t};e.CMEMenuFilter.prototype.m_condition=null;e.CMEMenuFilter.prototype.m_excludeOperations=null;e.CMEMenuFilter.prototype.m_includeOperations=null;e.CMEMenuFilter.prototype.addNewExcludeOperation=function(){let t=e.CMEMenuFilterOperation.create();this.m_excludeOperations.add(t);return t};e.CMEMenuFilter.prototype.addNewIncludeOperation=function(){let t=e.CMEMenuFilterOperation.create();this.m_includeOperations.add(t);return t};e.CMEMenuFilter.prototype.filter=function(t){if(e.XCollectionUtils.hasElements(this.m_includeOperations)){t.hideIncludingChildren();e.CMEMenuFilterUtil.setVisibleMatchingPathResults(t,this.m_includeOperations,true)}if(e.XCollectionUtils.hasElements(this.m_excludeOperations)){e.CMEMenuFilterUtil.setVisibleMatchingPathResults(t,this.m_excludeOperations,false)}return t};e.CMEMenuFilter.prototype.getCondition=function(){return this.m_condition};e.CMEMenuFilter.prototype.isApplicableTo=function(e){return this.m_condition.matches(e.getContext(),e.getName())};e.CMEMenuFilter.prototype.releaseObject=function(){this.m_excludeOperations=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_excludeOperations);this.m_includeOperations=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_includeOperations);this.m_condition=e.XObjectExt.release(this.m_condition);e.XObject.prototype.releaseObject.call(this)};e.CMEMenuFilter.prototype.setCondition=function(e){this.m_condition=e};e.CMEMenuFilter.prototype.setup=function(){e.XObject.prototype.setup.call(this);this.m_excludeOperations=e.XList.create();this.m_includeOperations=e.XList.create()};e.CMEMenuFilterList=function(){};e.CMEMenuFilterList.prototype=new e.XObject;e.CMEMenuFilterList.prototype._ff_c="CMEMenuFilterList";e.CMEMenuFilterList.create=function(){let t=new e.CMEMenuFilterList;t.setup();return t};e.CMEMenuFilterList.prototype.m_filters=null;e.CMEMenuFilterList.prototype.addNewMenuFilter=function(){let t=e.CMEMenuFilter.create();this.m_filters.add(t);return t};e.CMEMenuFilterList.prototype.filterMenu=function(e){let t=e;for(let o=0;o<this.m_filters.size();o++){let n=this.m_filters.get(o);if(n.isApplicableTo(e)){t=n.filter(e);break}}return t};e.CMEMenuFilterList.prototype.releaseObject=function(){this.m_filters=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_filters);e.XObject.prototype.releaseObject.call(this)};e.CMEMenuFilterList.prototype.setup=function(){e.XObject.prototype.setup.call(this);this.m_filters=e.XList.create()};e.CMEMenuFilterOperation=function(){};e.CMEMenuFilterOperation.prototype=new e.XObject;e.CMEMenuFilterOperation.prototype._ff_c="CMEMenuFilterOperation";e.CMEMenuFilterOperation.create=function(){let t=new e.CMEMenuFilterOperation;t.setup();return t};e.CMEMenuFilterOperation.prototype.m_condition=null;e.CMEMenuFilterOperation.prototype.m_path=null;e.CMEMenuFilterOperation.prototype.getCondition=function(){return this.m_condition};e.CMEMenuFilterOperation.prototype.getPath=function(){return this.m_path};e.CMEMenuFilterOperation.prototype.isApplicableTo=function(e){return this.m_condition.matches(e.getContext(),e.getName())};e.CMEMenuFilterOperation.prototype.releaseObject=function(){this.m_path=null;this.m_condition=e.XObjectExt.release(this.m_condition);e.XObject.prototype.releaseObject.call(this)};e.CMEMenuFilterOperation.prototype.setCondition=function(e){this.m_condition=e};e.CMEMenuFilterOperation.prototype.setPath=function(e){this.m_path=e};e.CMEMenuFilterUtil={PATH_SEPARATOR:"/",WILDCARD:"*",itemMatchesPath:function(t,o,n,r){let i=t.getMenuItem();let s=t.getMenuSeparator();return e.notNull(s)||e.notNull(i)&&e.CMEMenuFilterUtil.menuItemMatchesPath(i,o,n,r)},menuItemMatchesPath:function(t,o,n,r){let i=false;let s=e.XString.indexOf(o,e.CMEMenuFilterUtil.PATH_SEPARATOR);let l;let a;if(s>-1){l=e.XString.substring(o,0,s);a=e.XString.substring(o,s+1,e.XString.size(o))}else{l=o;a=null}let u=t.getName();let C=t.getAlias();let c=t.getActionGroup();if(e.XStringUtils.isNotNullAndNotEmpty(u)&&e.XStringUtils.isWildcardPatternMatching(u,l)||e.XStringUtils.isNotNullAndNotEmpty(C)&&e.XStringUtils.isWildcardPatternMatching(C,l)||e.XString.isEqual(l,e.CMEMenuFilterUtil.WILDCARD)){if(e.XStringUtils.isNullOrEmpty(a)){if(r){t.showIncludingParents()}else{t.hideIncludingChildren()}}else if(e.XStringUtils.isNotNullAndNotEmpty(a)&&e.notNull(c)){i=e.CMEMenuFilterUtil.oneOfSubItemsMatchesPath(c,a,false,r)}}else if(n&&e.notNull(c)){i=e.CMEMenuFilterUtil.oneOfSubItemsMatchesPath(c,o,true,r)}return i},oneOfSubItemsMatchesPath:function(t,o,n,r){let i=false;let s=t.getSubItems();for(let t=0;t<s.size();t++){let l=s.get(t);if(e.CMEMenuFilterUtil.itemMatchesPath(l,o,n,r)){i=true}}return i},setVisibleMatchingPathResults:function(t,o,n){let r=false;let i=o.getIterator();while(i.hasNext()){let o=i.next();if(o.isApplicableTo(t)){r=e.CMEMenuFilterUtil.subItemsMatchPathExt(t,o.getPath(),n)}}return r},subItemsMatchPathExt:function(t,o,n){let r;if(e.XString.startsWith(o,e.CMEMenuFilterUtil.PATH_SEPARATOR)){r=e.CMEMenuFilterUtil.oneOfSubItemsMatchesPath(t,e.XString.substring(o,e.XString.size(e.CMEMenuFilterUtil.PATH_SEPARATOR),e.XString.size(o)),false,n)}else{r=e.CMEMenuFilterUtil.oneOfSubItemsMatchesPath(t,o,true,n)}return r}};e.CMEMenuCarrier=function(){};e.CMEMenuCarrier.prototype=new e.XObject;e.CMEMenuCarrier.prototype._ff_c="CMEMenuCarrier";e.CMEMenuCarrier.create=function(t,o){let n=new e.CMEMenuCarrier;n.m_menuTreeConsumer=t;n.m_menuTree=o;n.m_pluginMenuConfigs=e.XHashMapByString.create();return n};e.CMEMenuCarrier.prototype.m_menuTree=null;e.CMEMenuCarrier.prototype.m_menuTreeConsumer=null;e.CMEMenuCarrier.prototype.m_pluginMenuConfigs=null;e.CMEMenuCarrier.prototype.getMenuTree=function(){return this.m_menuTree};e.CMEMenuCarrier.prototype.getMenuTreeConsumer=function(){return this.m_menuTreeConsumer};e.CMEMenuCarrier.prototype.getPluginMenuConfigs=function(){return this.m_pluginMenuConfigs};e.CMEMenuCarrier.prototype.releaseObject=function(){e.XObject.prototype.releaseObject.call(this);this.m_menuTreeConsumer=null;this.m_menuTree=null;this.m_pluginMenuConfigs=e.XObjectExt.release(this.m_pluginMenuConfigs)};e.CMEMenuFiller=function(){};e.CMEMenuFiller.prototype=new e.XObject;e.CMEMenuFiller.prototype._ff_c="CMEMenuFiller";e.CMEMenuFiller.create=function(t,o,n){let r=new e.CMEMenuFiller;r.setupWithTreePopulatorAndMapper(t,o,n);return r};e.CMEMenuFiller.prototype.m_menuPolulator=null;e.CMEMenuFiller.prototype.m_textMapper=null;e.CMEMenuFiller.prototype.m_treeGenerator=null;e.CMEMenuFiller.prototype.localize=function(t,o){if(e.notNull(this.m_textMapper)&&e.notNull(o)&&e.notNull(t)){this.mapTexts(t,o)}};e.CMEMenuFiller.prototype.lookupMenuName=function(e,t){return this.m_treeGenerator.getTopMenuName(e,t)};e.CMEMenuFiller.prototype.mapTexts=function(t,o){let n=t.getLocalizableText();let r=t.getLocalizableExplanation();let i=t.getActionGroup();let s=t.getActionLeaf();if(e.notNull(s)){s.setShortcutText(this.m_textMapper.getShortcutText(s.getMainKeyboardShortcut(),o))}if(e.notNull(n)){t.setText(this.m_textMapper.getMappedValue(n.getKey(),n.getReplacements(),o))}if(e.notNull(r)){t.setExplanation(this.m_textMapper.getMappedValue(n.getKey(),r.getReplacements(),o))}if(e.notNull(i)){n=i.getOverflowLocalizableText();if(e.notNull(n)){i.setOverflowText(this.m_textMapper.getMappedValue(n.getKey(),n.getReplacements(),o))}let t=i.getSubItems();for(let n=0;n<t.size();n++){let r=t.get(n).getMenuItem();if(e.notNull(r)){this.mapTexts(r,o)}}}};e.CMEMenuFiller.prototype.populateMenu=function(t,o,n,r,i,s){this.m_treeGenerator.generate(o,n,o=>{this.localize(o,r);if(e.notNull(i)){i()}let n=this.remapMenuTreeSave(t,o,false,r);if(e.notNull(s)&&n&&e.XCollectionUtils.hasElements(o.getSubItems())){s(o,t)}})};e.CMEMenuFiller.prototype.releaseObject=function(){this.m_treeGenerator=null;this.m_menuPolulator=null;this.m_textMapper=null;e.XObject.prototype.releaseObject.call(this)};e.CMEMenuFiller.prototype.remapMenuTreeSave=function(t,o,n,r){let i=e.notNull(o);if(i){this.m_menuPolulator.remapMenuTree(t,o,-1,e=>{this.localize(e,r)})}return i};e.CMEMenuFiller.prototype.setupWithTreePopulatorAndMapper=function(e,t,o){this.m_treeGenerator=e;this.m_menuPolulator=t;this.m_textMapper=o};e.CMEMenuTreePopulatorAbstract=function(){};e.CMEMenuTreePopulatorAbstract.prototype=new e.XObject;e.CMEMenuTreePopulatorAbstract.prototype._ff_c="CMEMenuTreePopulatorAbstract";e.CMEMenuTreePopulatorAbstract.prototype.m_factory=null;e.CMEMenuTreePopulatorAbstract.prototype.m_showNames=null;e.CMEMenuTreePopulatorAbstract.prototype.m_uiCache=null;e.CMEMenuTreePopulatorAbstract.prototype.clearAndRenderSubItems=function(t,o,n,r,i){this.m_factory.clearGroup(r);let s=o;for(let o=0;o<t.size();o++){let l=t.get(o);if(e.isNull(l)||l.isReleased()){continue}let a=l.getMenuItem();if(l.getMenuSeparator()!==null){s=true}else if(e.notNull(a)&&a.isVisible()){let t=a.getOverflowPriority();if(t===-1){t=n}let o=a.getActionGroup();if(e.notNull(o)){let l=null;let u=o.isFirstSubOptionIsDefault();if(u){let t=e.XStream.of(o.getSubItems()).filter(e=>e.getActionLeaf()!==null&&e.getActionLeaf().isVisible()&&e.getActionLeaf().isEnabled()).map(e=>e.getActionLeaf()).collect(e.XStreamCollector.toList());l=t.size()===0?null:t.get(0).getCommand()}let C=this.getEffectiveHoverProcedure(o,n,i);let c=this.m_factory.createGroupItem(r,o,s,t,this.getTextForItem(a),C,u,l);if(this.getSubMapper()!==null){this.getSubMapper().remapMenuTree(c,o,t,i)}else{e.XLogger.println("No menu submapper defined. Cannot render sub tree")}}let l=a.getActionLeaf();if(e.notNull(l)){if(l.isToggle()){this.m_factory.createToggleItem(r,l,s,t,this.getTextForItem(a))}else{this.m_factory.createTriggerItem(r,l,s,t,this.getTextForItem(a))}}s=false}}};e.CMEMenuTreePopulatorAbstract.prototype.eagerlyRetrieve=function(t,o,n,r){if(t.hasDeferredSubItemsEffective()){if(t.isEagerlyRetrieveDeferredOptions()){t.executeDeferredLoading(()=>{if(e.notNull(n)&&!n.isReleased()){r(t);this.getSubMapper().clearAndRenderSubItems(t.getEffectiveSubItems(),false,o,n,r);this.m_factory.synchronizeGroupMenuItem(n,this.getTextForItem(t),t.getIcon(),t.getDataHelpId(),t.isEnabled(),t.getExplanation(),t.getHighlightProcedure(),t.getUnHighlightProcedure(),false,null)}})}}};e.CMEMenuTreePopulatorAbstract.prototype.getEffectiveHoverProcedure=function(t,o,n){return r=>{let i=t.getHighlightProcedure();let s;if(!t.isReleased()&&t.hasDeferredSubItemsEffective()&&!t.isEagerlyRetrieveDeferredOptions()){s=()=>{t.executeDeferredLoading(()=>{if(e.notNull(r)&&!r.isReleased()){n(t);this.getSubMapper().clearAndRenderSubItems(t.getEffectiveSubItems(),false,o,r,n);this.m_factory.synchronizeGroupMenuItem(r,this.getTextForItem(t),t.getIcon(),t.getDataHelpId(),t.isEnabled(),t.getExplanation(),t.getHighlightProcedure(),t.getUnHighlightProcedure(),false,null)}})}}else{s=null}let l=null;if(e.notNull(i)&&e.notNull(s)){l=()=>{s();i()}}else if(e.notNull(i)){l=i}else if(e.notNull(s)){l=s}return l}};e.CMEMenuTreePopulatorAbstract.prototype.getTextForItem=function(t){return this.m_showNames()?e.XStringUtils.concatenate3(t.getName()," <=> ",t.getText()):t.getText()};e.CMEMenuTreePopulatorAbstract.prototype.releaseObject=function(){this.m_factory=null;this.m_uiCache=null;this.m_showNames=null;e.XObject.prototype.releaseObject.call(this)};e.CMEMenuTreePopulatorAbstract.prototype.remapMenuTree=function(t,o,n,r){let i=false;let s=this.m_factory.hasItemElements(t);let l=this.m_uiCache.getMenuItem(t,o.getNameOrFallback());let a=o.getEffectiveSubItems();let u;let C;let c;let p=!o.hasDeferredSubItems()&&!o.isFlat()&&this.m_factory.supportsSynchronization()&&e.notNull(l)&&l.getActionGroup()!==null&&l.getActionGroup().areAllEffectiveSubItemsCompatibleTo(a);if(p){let e=0;for(c=0;c<a.size();c++){e=this.synchronizeMenuItem(t,e,a.get(c),n,r)}}else{if(a.size()>0&&!o.isFlat()||o.isRoot()){this.m_uiCache.prepareSubUiItemRegistry(t,o.getRootName());this.m_factory.clearGroup(t)}this.m_uiCache.registerUiItem(t,o.getNameOrFallback(),o,()=>{if(!t.isReleased()){this.m_factory.clearGroup(t)}});if(o.isFlat()&&o.isKeepTitleForFlat()&&e.XStringUtils.isNotNullAndNotEmpty(o.getText())){this.m_factory.createTitleItem(t,s,o.getOverflowPriority(),o.getName(),o.getText(),o.getIcon(),o.getDataHelpId(),o.getExplanation());s=false}for(c=0;c<a.size();c++){u=a.get(c);C=u.getMenuItem();if(u.getMenuSeparator()!==null){s=true}else if(e.notNull(C)&&C.isVisible()){let l=C.getOverflowPriority();if(l===-1){l=n}let a=C.getActionGroup();if(e.notNull(a)&&a.isFlat()){let e=this.m_factory.getItemCount(t);i=this.remapMenuTree(t,a,l,r)||i;if(this.m_factory.getItemCount(t)-e>1){s=true}}else{i=true;if(e.notNull(a)){let i=null;let u=a.isFirstSubOptionIsDefault();if(u){let t=e.XStream.of(a.getSubItems()).filter(e=>e.getActionLeaf()!==null&&e.getActionLeaf().isVisible()&&e.getActionLeaf().isEnabled()).map(e=>e.getActionLeaf()).collect(e.XStreamCollector.toList());i=t.size()===0?null:t.get(0).getCommand()}let c=this.getEffectiveHoverProcedure(a,n,r);let p=this.m_factory.createGroupItem(t,a,s,l,this.getTextForItem(C),c,u,i);this.eagerlyRetrieve(a,n,p,r);this.m_uiCache.registerSubUiItem(t,o.getRootName(),p);this.m_uiCache.prepareSubUiItemRegistry(p,o.getRootName());if(this.getSubMapper()!==null){this.getSubMapper().remapMenuTree(p,a,l,r)}else{e.XLogger.println("No menu submapper defined. Cannot render sub tree")}}let u=C.getActionLeaf();if(e.notNull(u)){if(u.isToggle()){let e=this.m_factory.createToggleItem(t,u,s,l,this.getTextForItem(C));this.m_uiCache.registerSubUiItem(t,o.getRootName(),e)}else{let e=this.m_factory.createTriggerItem(t,u,s,l,this.getTextForItem(C));this.m_uiCache.registerSubUiItem(t,o.getRootName(),e)}}s=false}}}}return i};e.CMEMenuTreePopulatorAbstract.prototype.setFactory=function(e){this.m_factory=e};e.CMEMenuTreePopulatorAbstract.prototype.setShowNames=function(e){this.m_showNames=e};e.CMEMenuTreePopulatorAbstract.prototype.setUiCache=function(e){this.m_uiCache=e};e.CMEMenuTreePopulatorAbstract.prototype.synchronizeMenuItem=function(t,o,n,r,i){let s=o;let l=n.getMenuItem();if(e.notNull(l)){let a=this.m_uiCache.getSubUiItem(t,n.getRootName(),o);let u=l.getActionLeaf();let C=l.getActionGroup();if(e.notNull(u)){if(u.isToggle()){this.m_factory.synchronizeToggleMenuItem(a,this.getTextForItem(l),l.getIcon(),l.getDataHelpId(),l.isEnabled(),l.getExplanation(),l.getHighlightProcedure(),l.getUnHighlightProcedure(),u.getCommand(),u.getActiveExtended(),u.getStateIcon())}else{this.m_factory.synchronizeTriggerMenuItem(a,this.getTextForItem(l),l.getIcon(),l.getDataHelpId(),l.isEnabled(),l.getExplanation(),l.getHighlightProcedure(),l.getUnHighlightProcedure(),u.getCommand())}s++}if(e.notNull(C)){if(e.notNull(a)&&!C.isFlat()){let t=C.isFirstSubOptionIsDefault();let o=null;if(t){let t=e.XStream.of(C.getSubItems()).filter(e=>e.getActionLeaf()!==null&&e.getActionLeaf().isVisible()&&e.getActionLeaf().isEnabled()).map(e=>e.getActionLeaf()).collect(e.XStreamCollector.toList());o=t.size()===0?null:t.get(0).getCommand()}this.m_factory.synchronizeGroupMenuItem(a,this.getTextForItem(l),l.getIcon(),l.getDataHelpId(),l.isEnabled(),l.getExplanation(),l.getHighlightProcedure(),l.getUnHighlightProcedure(),t,o)}if(C.isFlat()){let e=C.getEffectiveSubItems();for(let o=0;o<e.size();o++){s=this.synchronizeMenuItem(t,s,e.get(o),r,i)}}else if(e.notNull(a)){this.getSubMapper().remapMenuTree(a,C,r,i);s++}}}return s};e.CMEAbstractItem=function(){};e.CMEAbstractItem.prototype=new e.XObject;e.CMEAbstractItem.prototype._ff_c="CMEAbstractItem";e.CMEAbstractItem.prototype.m_alias=null;e.CMEAbstractItem.prototype.m_name=null;e.CMEAbstractItem.prototype.m_parent=null;e.CMEAbstractItem.prototype.m_removed=false;e.CMEAbstractItem.prototype.addSubItemsAfter=function(e){this.insertSubItemsAsSiblingsAtSelfOffset(1,e)};e.CMEAbstractItem.prototype.addSubItemsAtEnd=function(e){};e.CMEAbstractItem.prototype.addSubItemsAtStart=function(e){};e.CMEAbstractItem.prototype.addSubItemsBefore=function(e){this.insertSubItemsAsSiblingsAtSelfOffset(0,e)};e.CMEAbstractItem.prototype.clearSubItems=function(){};e.CMEAbstractItem.prototype.getActionGroup=function(){return null};e.CMEAbstractItem.prototype.getActionLeaf=function(){return null};e.CMEAbstractItem.prototype.getAlias=function(){return this.m_alias};e.CMEAbstractItem.prototype.getMenuItem=function(){return null};e.CMEAbstractItem.prototype.getMenuSeparator=function(){return null};e.CMEAbstractItem.prototype.getName=function(){return this.m_name};e.CMEAbstractItem.prototype.getParent=function(){return e.XWeakReferenceUtil.getHardRef(this.m_parent)};e.CMEAbstractItem.prototype.getRootName=function(){let t=this.getParent();if(e.isNull(t)){return this.getName()}return t.getRootName()};e.CMEAbstractItem.prototype.hideIncludingChildren=function(){this.setRemoved(true)};e.CMEAbstractItem.prototype.insertSubItems=function(e,t){};e.CMEAbstractItem.prototype.insertSubItemsAsSiblingsAtSelfOffset=function(t,o){let n=this.getParent();if(e.notNull(n)){let e=n.getSubItems().getIndex(this);n.insertSubItems(e+t,o)}};e.CMEAbstractItem.prototype.isRemoved=function(){return this.m_removed};e.CMEAbstractItem.prototype.isRoot=function(){return this.getParent()===null};e.CMEAbstractItem.prototype.releaseObject=function(){this.m_name=null;this.m_alias=null;this.m_parent=null;this.m_removed=false;e.XObject.prototype.releaseObject.call(this)};e.CMEAbstractItem.prototype.setAlias=function(e){this.m_alias=e};e.CMEAbstractItem.prototype.setName=function(e){this.m_name=e};e.CMEAbstractItem.prototype.setParent=function(t){this.m_parent=e.XWeakReferenceUtil.getWeakRef(t)};e.CMEAbstractItem.prototype.setRemoved=function(e){this.m_removed=e};e.CMEAbstractItem.prototype.showIncludingParents=function(){this.setRemoved(false);let t=this.getParent();if(e.notNull(t)){t.showIncludingParents()}};e.CMEMenuJsonConstants={CME_ACTIVE:"Active",CME_ENABLED:"Enabled",CME_FLAT:"Flat",CME_GLOBAL_CONTEXT:"GlobalContext",CME_ICON:"Icon",CME_KEY:"Key",CME_LOCALIZABLE_TEXT:"LocalizableText",CME_LOCAL_CONTEXT:"LocalContext",CME_NAME:"Name",CME_OPERATIONS:"Operations",CME_PARAMETERS:"Parameters",CME_REPLACEMENTS:"Replacements",CME_SUB_ITEMS:"SubItems",CME_TAGS:"Tags",CME_TEXT:"Text",CME_TOGGLE:"Toggle",CME_TYPE:"Type",CME_TYPE_GROUP:"Group",CME_TYPE_LEAF:"Leaf",CME_TYPE_OPERATION:"Operation",CME_TYPE_SEPARATOR:"Separator",CME_UI_CONTEXT:"UiContext",CME_VISIBLE:"Visible"};e.CMEMenuJsonHelper={configureGenericProperties:function(t,o){t.setName(o.getStringByKey(e.CMEMenuJsonConstants.CME_NAME));t.setText(o.getStringByKey(e.CMEMenuJsonConstants.CME_TEXT));t.setEnabled(o.getBooleanByKeyExt(e.CMEMenuJsonConstants.CME_ENABLED,true));t.setIcon(o.getStringByKey(e.CMEMenuJsonConstants.CME_ICON));t.setVisible(o.getBooleanByKeyExt(e.CMEMenuJsonConstants.CME_VISIBLE,true));if(o.containsKey(e.CMEMenuJsonConstants.CME_TAGS)){t.addAllTags(e.XStream.of(o.getListByKey(e.CMEMenuJsonConstants.CME_TAGS)).collect(e.XStreamCollector.toListOfString(e=>e.asString().getString())))}let n=o.getStructureByKey(e.CMEMenuJsonConstants.CME_LOCALIZABLE_TEXT);if(e.notNull(n)){let o=e.CMELocalizableText.create();o.setKey(n.getStringByKey(e.CMEMenuJsonConstants.CME_KEY));let r=n.getListByKey(e.CMEMenuJsonConstants.CME_REPLACEMENTS);if(e.XCollectionUtils.hasElements(r)){for(let e=0;e<r.size();e++){o.addReplacement(r.getStringAt(e))}}t.setLocalizableText(o)}},configureGroupingMenuItem:function(t,o){e.CMEMenuJsonHelper.configureGenericProperties(t,o);let n=o.getListByKey(e.CMEMenuJsonConstants.CME_SUB_ITEMS);t.setFlat(o.getBooleanByKey(e.CMEMenuJsonConstants.CME_FLAT));for(let o=0;o<n.size();o++){let r=n.getStructureAt(o);let i=r.getStringByKey(e.CMEMenuJsonConstants.CME_TYPE);if(e.XString.isEqual(i,e.CMEMenuJsonConstants.CME_TYPE_GROUP)){e.CMEMenuJsonHelper.configureGroupingMenuItem(t.addNewGroup(),r)}else if(e.XString.isEqual(i,e.CMEMenuJsonConstants.CME_TYPE_LEAF)){e.CMEMenuJsonHelper.configureLeafMenuItem(t.addNewLeaf(),r)}else if(e.XString.isEqual(i,e.CMEMenuJsonConstants.CME_TYPE_SEPARATOR)){e.CMEMenuJsonHelper.configureSeparator(t.addNewSeparator(),r)}}},configureLeafMenuItem:function(t,o){e.CMEMenuJsonHelper.configureGenericProperties(t,o);t.setActive(o.getBooleanByKey(e.CMEMenuJsonConstants.CME_ACTIVE));t.setToggle(o.getBooleanByKey(e.CMEMenuJsonConstants.CME_TOGGLE))},configureSeparator:function(e,t){},deserialiseGroupingMenuItem:function(t){let o=e.CMEGroupingMenuItem.create();e.CMEMenuJsonHelper.configureGroupingMenuItem(o,t);return o},serializeContextAccess:function(t){let o=e.PrFactory.createStructure();e.CMEMenuJsonHelper.serializeContextInternal(o.putNewStructure(e.CMEMenuJsonConstants.CME_LOCAL_CONTEXT),t.getLocalContext());e.CMEMenuJsonHelper.serializeContextInternal(o.putNewStructure(e.CMEMenuJsonConstants.CME_GLOBAL_CONTEXT),t.getGlobalContext());o.putString(e.CMEMenuJsonConstants.CME_UI_CONTEXT,t.getUiContext());return o},serializeContextInternal:function(t,o){t.putStringNotNullAndNotEmpty(e.CMEMenuJsonConstants.CME_NAME,o.getName());t.putStringNotNullAndNotEmpty(e.CMEMenuJsonConstants.CME_TYPE,o.getType());t.putStringNotNullAndNotEmpty(e.CMEMenuJsonConstants.CME_TEXT,o.getText());let n=o.getSubContexts();if(e.XCollectionUtils.hasElements(n)){let o=t.putNewList(e.CMEMenuJsonConstants.CME_SUB_ITEMS);e.XCollectionUtils.forEach(n,t=>{e.CMEMenuJsonHelper.serializeContextInternal(o.addNewStructure(),t)})}},serializeGenericItemProperties:function(t,o){let n=t.getLocalizableText();if(e.notNull(n)){let t=o.putNewStructure(e.CMEMenuJsonConstants.CME_LOCALIZABLE_TEXT);t.putString(e.CMEMenuJsonConstants.CME_KEY,n.getKey());let r=n.getReplacements();if(e.XCollectionUtils.hasElements(r)){let o=t.putNewList(e.CMEMenuJsonConstants.CME_REPLACEMENTS);for(let e=0;e<r.size();e++){o.addString(r.get(e))}}}o.putString(e.CMEMenuJsonConstants.CME_NAME,t.getName());o.putString(e.CMEMenuJsonConstants.CME_TEXT,t.getText());o.putString(e.CMEMenuJsonConstants.CME_ICON,t.getIcon());o.putBoolean(e.CMEMenuJsonConstants.CME_ENABLED,t.isEnabled());o.putBoolean(e.CMEMenuJsonConstants.CME_VISIBLE,t.isVisible());if(e.XCollectionUtils.hasElements(t.getTags())){o.putNewList(e.CMEMenuJsonConstants.CME_TAGS).addAllStrings(t.getTags().getValuesAsReadOnlyList())}},serializeGroupingMenuItem:function(t,o){let n=e.PrFactory.createStructure();if(e.notNull(t)){e.CMEMenuJsonHelper.serializeGroupingMenuItemInternal(t,n,o)}return n},serializeGroupingMenuItemInternal:function(t,o,n){if(n||t.isVisible()){e.CMEMenuJsonHelper.serializeGenericItemProperties(t,o);o.putString(e.CMEMenuJsonConstants.CME_TYPE,e.CMEMenuJsonConstants.CME_TYPE_GROUP);o.putBoolean(e.CMEMenuJsonConstants.CME_FLAT,t.isFlat());let r=t.getSubItems();let i=o.putNewList(e.CMEMenuJsonConstants.CME_SUB_ITEMS);for(let t=0;t<r.size();t++){let o=r.get(t);let s=i.addNewStructure();if(o.getActionGroup()!==null){e.CMEMenuJsonHelper.serializeGroupingMenuItemInternal(o.getActionGroup(),s,n)}else if(o.getActionLeaf()!==null){e.CMEMenuJsonHelper.serializeLeafMenuItemInternal(o.getActionLeaf(),s,n)}else if(o.getMenuSeparator()!==null){e.CMEMenuJsonHelper.serializeMenuSeparatorInternal(o.getMenuSeparator(),s)}}}},serializeGroupingMenuItemToPaths:function(t){let o=e.XStringBuffer.create();e.CMEMenuJsonHelper.serializeGroupingMenuItemToPathsBuf(o,"",t);return o.toString()},serializeGroupingMenuItemToPathsBuf:function(t,o,n){let r=n.getMenuItem();if(e.notNull(r)){let n=r.getActionGroup();let i=r.getActionLeaf();let s="";if(e.notNull(n)&&n.isFlat()){s="{flat}"}if(e.notNull(i)&&i.isToggle()){s="{toggle}"}let l=e.XStringUtils.concatenate5(r.getName(),"(",r.getText(),")",s);let a=r.getTags().getIterator();while(a.hasNext()){l=e.XStringUtils.concatenate3(l,"/",a.next())}let u=e.XStringUtils.concatenate3(o,".",l);t.appendNewLine();t.append(u);let C=e.XStringUtils.concatenate3(o,".",r.getName());if(e.notNull(n)){let o=n.getSubItems();for(let n=0;n<o.size();n++){e.CMEMenuJsonHelper.serializeGroupingMenuItemToPathsBuf(t,C,o.get(n))}}}},serializeLeafMenuItemInternal:function(t,o,n){if(n||t.isVisible()){e.CMEMenuJsonHelper.serializeGenericItemProperties(t,o);o.putString(e.CMEMenuJsonConstants.CME_TYPE,e.CMEMenuJsonConstants.CME_TYPE_LEAF);o.putBoolean(e.CMEMenuJsonConstants.CME_ACTIVE,t.isActive());o.putBoolean(e.CMEMenuJsonConstants.CME_TOGGLE,t.isToggle())}},serializeMenuSeparatorInternal:function(t,o){o.putString(e.CMEMenuJsonConstants.CME_TYPE,e.CMEMenuJsonConstants.CME_TYPE_SEPARATOR)}};e.CMERegistry=function(){};e.CMERegistry.prototype=new e.XObject;e.CMERegistry.prototype._ff_c="CMERegistry";e.CMERegistry.create=function(){let t=new e.CMERegistry;t.setup();return t};e.CMERegistry.prototype.m_actionRegistry=null;e.CMERegistry.prototype.m_facadeRegistry=null;e.CMERegistry.prototype.m_optionRegistry=null;e.CMERegistry.prototype.getAction=function(e){return this.m_actionRegistry.getByKey(e)};e.CMERegistry.prototype.getFacade=function(e){return this.m_facadeRegistry.getByKey(e)};e.CMERegistry.prototype.getOption=function(e){return this.m_optionRegistry.getByKey(e)};e.CMERegistry.prototype.getRegisteredActions=function(){return this.m_actionRegistry.getValuesAsReadOnlyList()};e.CMERegistry.prototype.getRegisteredOptions=function(){return this.m_optionRegistry.getValuesAsReadOnlyList()};e.CMERegistry.prototype.registerAction=function(e,t){this.m_actionRegistry.put(e,t);t.ensureNameProvider(e);t.addAliasName(e)};e.CMERegistry.prototype.registerFacade=function(e,t){this.m_facadeRegistry.put(e,t)};e.CMERegistry.prototype.registerOption=function(e,t){this.m_optionRegistry.put(e,t);t.addAliasName(e)};e.CMERegistry.prototype.setup=function(){e.XObject.prototype.setup.call(this);this.m_facadeRegistry=e.XHashMapByString.create();this.m_optionRegistry=e.XHashMapByString.create();this.m_actionRegistry=e.XHashMapByString.create()};e.CMEUiCache=function(){};e.CMEUiCache.prototype=new e.XObject;e.CMEUiCache.prototype._ff_c="CMEUiCache";e.CMEUiCache.create=function(){let t=new e.CMEUiCache;t.setup();return t};e.CMEUiCache.prototype.m_cleaningFactory=null;e.CMEUiCache.prototype.m_contextMenuRegistry=null;e.CMEUiCache.prototype.m_subItemsRegistry=null;e.CMEUiCache.prototype.m_uiItemRegistry=null;e.CMEUiCache.prototype.cleanupAll=function(t){e.XCollectionUtils.forEach(t,e=>{e.execute()})};e.CMEUiCache.prototype.clearUiItemByKey=function(t,o){let n=this.m_uiItemRegistry.getByKey(t);let r=this.m_cleaningFactory.getByKey(t);let i=this.m_subItemsRegistry.getByKey(t);e.XCollectionUtils.getOptionalByString(i,o).ifPresent(t=>{e.XCollectionUtils.forEach(t,e=>{this.releaseUiItem(e)});i.remove(o)});e.XCollectionUtils.getOptionalByString(r,o).ifPresent(e=>{r.remove(o)});e.XCollectionUtils.getOptionalByString(n,o).ifPresent(e=>{n.remove(o)})};e.CMEUiCache.prototype.getMenuItem=function(t,o){let n=this.m_uiItemRegistry.getByKey(t);return e.isNull(n)?null:n.getByKey(o)};e.CMEUiCache.prototype.getOrCreateCachedMenu=function(e,t){if(!this.m_contextMenuRegistry.containsKey(e)){this.m_contextMenuRegistry.put(e,t())}return this.m_contextMenuRegistry.getByKey(e)};e.CMEUiCache.prototype.getSubUiItem=function(t,o,n){let r=this.m_subItemsRegistry.getByKey(t);let i=e.isNull(r)?null:r.getByKey(o);return e.isNull(i)||i.size()<=n?null:i.get(n)};e.CMEUiCache.prototype.prepareSubUiItemRegistry=function(e,t){if(this.m_subItemsRegistry.containsKey(e)){let o=this.m_subItemsRegistry.getByKey(e);if(o.containsKey(t)){o.getByKey(t).clear()}}};e.CMEUiCache.prototype.registerSubUiItem=function(t,o,n){if(!this.m_subItemsRegistry.containsKey(t)){this.m_subItemsRegistry.put(t,e.XHashMapByString.create())}let r=this.m_subItemsRegistry.getByKey(t);if(!r.containsKey(o)){r.put(o,e.XList.create())}r.getByKey(o).add(n)};e.CMEUiCache.prototype.registerUiItem=function(t,o,n,r){this.clearUiItemByKey(t,o);if(!this.m_uiItemRegistry.containsKey(t)){this.m_uiItemRegistry.put(t,e.XWeakMap.create());this.m_cleaningFactory.put(t,e.XWeakMap.create())}this.m_uiItemRegistry.getByKey(t).put(o,n);this.m_cleaningFactory.getByKey(t).put(o,e.XProcedureHolder.create(r))};e.CMEUiCache.prototype.releaseObject=function(){e.XCollectionUtils.forEach(this.m_cleaningFactory.getValuesAsReadOnlyList(),t=>{try{this.cleanupAll(t)}catch(t){e.XLogger.println(e.XException.getMessage(t))}});e.XCollectionUtils.forEach(this.m_cleaningFactory.getValuesAsReadOnlyList(),t=>{e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(t)});e.XCollectionUtils.forEach(this.m_cleaningFactory.getKeysAsReadOnlyList(),t=>{e.XObjectExt.release(t)});this.m_cleaningFactory=e.XObjectExt.release(this.m_cleaningFactory);e.XCollectionUtils.forEach(this.m_subItemsRegistry.getValuesAsReadOnlyList(),t=>{e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(t)});e.XCollectionUtils.forEach(this.m_subItemsRegistry.getKeysAsReadOnlyList(),t=>{e.XObjectExt.release(t)});this.m_subItemsRegistry=e.XObjectExt.release(this.m_subItemsRegistry);e.XCollectionUtils.forEach(this.m_uiItemRegistry.getValuesAsReadOnlyList(),t=>{e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(t)});e.XCollectionUtils.forEach(this.m_uiItemRegistry.getKeysAsReadOnlyList(),t=>{e.XObjectExt.release(t)});this.m_subItemsRegistry=e.XObjectExt.release(this.m_subItemsRegistry);e.XCollectionUtils.releaseEntriesFromCollection(this.m_contextMenuRegistry);e.XObject.prototype.releaseObject.call(this)};e.CMEUiCache.prototype.releaseUiItem=function(t){let o=this.m_uiItemRegistry.getByKey(t);let n=this.m_cleaningFactory.getByKey(t);let r=this.m_subItemsRegistry.getByKey(t);if(e.XCollectionUtils.hasElements(r)){e.XCollectionUtils.forEach(r.getValuesAsReadOnlyList(),t=>{e.XCollectionUtils.forEach(t,e=>{this.releaseUiItem(e)})})}if(e.XObjectExt.isValidObject(t)&&e.XObjectExt.isValidObject(n)){e.XCollectionUtils.forEach(n.getValuesAsReadOnlyList(),e=>{e.execute()})}e.XObjectExt.release(n);e.XObjectExt.release(o);this.m_cleaningFactory.remove(t);this.m_uiItemRegistry.remove(t);this.m_subItemsRegistry.remove(t)};e.CMEUiCache.prototype.setup=function(){e.XObject.prototype.setup.call(this);this.m_uiItemRegistry=e.XSimpleMap.create();this.m_subItemsRegistry=e.XSimpleMap.create();this.m_cleaningFactory=e.XSimpleMap.create();this.m_contextMenuRegistry=e.XWeakMap.create()};e.CMEActionController=function(){};e.CMEActionController.prototype=new e.XObject;e.CMEActionController.prototype._ff_c="CMEActionController";e.CMEActionController.create=function(){let t=new e.CMEActionController;t.setup();return t};e.CMEActionController.getLogString=function(t,o,n){return e.XStringUtils.concatenate5(e.isNull(t)?"":t.getName(n),"::",e.isNull(o)?"":o.getName(n),"::",n.getUiContext())};e.CMEActionController.prototype.m_listeners=null;e.CMEActionController.prototype.m_loggingEnabled=false;e.CMEActionController.prototype.attachActionListener=function(e){this.m_listeners.add(e)};e.CMEActionController.prototype.checkAvailable=function(t,o){if(!t.isAvailable(o)){return false}if(!e.XCollectionUtils.hasElements(this.m_listeners)){return true}let n=e.XStream.of(this.m_listeners).anyMatch(e=>!e.checkAvailable(t,o));return!n};e.CMEActionController.prototype.checkEnabled=function(t,o){if(!t.isEnabled(o)){return false}if(!e.XCollectionUtils.hasElements(this.m_listeners)){return true}let n=e.XStream.of(this.m_listeners).anyMatch(e=>!e.checkEnabled(t,o));return!n};e.CMEActionController.prototype.checkToggled=function(t,o){let n=e.XStream.of(this.m_listeners).map(e=>e.checkToggled(t,o)).reduce(t.isToggledExt(o),(t,o)=>t===e.TriStateBool._TRUE||o===e.TriStateBool._TRUE?e.TriStateBool._TRUE:t===e.TriStateBool._DEFAULT||o===e.TriStateBool._DEFAULT?e.TriStateBool._DEFAULT:e.TriStateBool._FALSE);return n};e.CMEActionController.prototype.detachActionListener=function(e){this.m_listeners.removeElement(e)};e.CMEActionController.prototype.isLoggingEnabled=function(){return this.m_loggingEnabled};e.CMEActionController.prototype.onActionMultiSelect=function(t,o,n,r){if(this.m_loggingEnabled){e.XLogger.println(e.XStringUtils.concatenate2("Executing Multi Select Action: ",e.CMEActionController.getLogString(t,o,r)))}for(let e=0;e<this.m_listeners.size();e++){this.m_listeners.get(e).onActionMultiSelect(t,o,n,r)}t.selectOption(r,o,n)};e.CMEActionController.prototype.onActionSingleSelect=function(t,o,n){if(this.m_loggingEnabled){e.XLogger.println(e.XStringUtils.concatenate2("Executing Single Select Action: ",e.CMEActionController.getLogString(t,o,n)))}for(let e=0;e<this.m_listeners.size();e++){this.m_listeners.get(e).onActionSingleSelect(t,o,n)}t.selectOption(n,o)};e.CMEActionController.prototype.onActionToggled=function(t,o){if(this.m_loggingEnabled){e.XLogger.println(e.XStringUtils.concatenate2("Executing Toggle Action: ",e.CMEActionController.getLogString(t,null,o)))}for(let e=0;e<this.m_listeners.size();e++){this.m_listeners.get(e).onActionToggled(t,o)}t.toggle(o)};e.CMEActionController.prototype.onActionTriggered=function(t,o){if(this.m_loggingEnabled){e.XLogger.println(e.XStringUtils.concatenate2("Executing Trigger Action: ",e.CMEActionController.getLogString(t,null,o)))}for(let e=0;e<this.m_listeners.size();e++){this.m_listeners.get(e).onActionTriggered(t,o)}t.trigger(o)};e.CMEActionController.prototype.onHighlight=function(t,o){if(this.m_loggingEnabled){e.XLogger.println(e.XStringUtils.concatenate2("Highlighting Action: ",e.CMEActionController.getLogString(t,null,o)))}for(let e=0;e<this.m_listeners.size();e++){this.m_listeners.get(e).onHighlight(t,o)}t.highlight(o)};e.CMEActionController.prototype.onUnHighlight=function(t,o){if(this.m_loggingEnabled){e.XLogger.println(e.XStringUtils.concatenate2("UnHighlighting Action: ",e.CMEActionController.getLogString(t,null,o)))}for(let e=0;e<this.m_listeners.size();e++){this.m_listeners.get(e).onUnHighlight(t,o)}t.unHighlight(o)};e.CMEActionController.prototype.releaseObject=function(){this.m_listeners=e.XObjectExt.release(this.m_listeners)};e.CMEActionController.prototype.retrieveExplanation=function(t,o){let n=t.getLocalizedExplanation(o);for(let r=0;e.isNull(n)&&r<this.m_listeners.size();r++){n=this.m_listeners.get(r).retrieveExplanation(t,o)}return n};e.CMEActionController.prototype.retrieveIcon=function(t,o){let n=t.getIcon(o);for(let r=0;e.isNull(n)&&r<this.m_listeners.size();r++){n=this.m_listeners.get(r).retrieveIcon(t,o)}return n};e.CMEActionController.prototype.retrieveName=function(t,o){let n=t.getName(o);for(let r=0;e.isNull(n)&&r<this.m_listeners.size();r++){n=this.m_listeners.get(r).retrieveName(t,o)}return n};e.CMEActionController.prototype.retrieveText=function(t,o){let n=t.getLocalizedText(o);for(let r=0;e.isNull(n)&&r<this.m_listeners.size();r++){n=this.m_listeners.get(r).retrieveText(t,o)}return n};e.CMEActionController.prototype.setLoggingEnabled=function(e){this.m_loggingEnabled=e};e.CMEActionController.prototype.setup=function(){e.XObject.prototype.setup.call(this);this.m_listeners=e.XList.create()};e.CMEActionGroup=function(){};e.CMEActionGroup.prototype=new e.CMEAbstractAction;e.CMEActionGroup.prototype._ff_c="CMEActionGroup";e.CMEActionGroup.create=function(){let t=new e.CMEActionGroup;t.setup();return t};e.CMEActionGroup.prototype.m_actions=null;e.CMEActionGroup.prototype.addAction=function(e){this.m_actions.add(e)};e.CMEActionGroup.prototype.addNewDataProviderAction=function(t,o){let n=e.CMEDataProviderMenuAction.create(t,o);this.m_actions.add(n);return n};e.CMEActionGroup.prototype.addNewMultiSelectAction=function(){let t=e.CMEMultiSelectAction.create();this.m_actions.add(t);return t};e.CMEActionGroup.prototype.addNewSingleSelectAction=function(){let t=e.CMESingleSelectAction.create();this.m_actions.add(t);return t};e.CMEActionGroup.prototype.addNewToggleAction=function(){let t=e.CMEToggleAction.create();this.m_actions.add(t);return t};e.CMEActionGroup.prototype.addNewTriggerAction=function(){let t=e.CMETriggerAction.create();this.m_actions.add(t);return t};e.CMEActionGroup.prototype.mapToMenuCreator=function(t){let o=e.CMEGroupCreator.create();this.mapGenericPropertiesToMenuCreator(t,o);e.XCollectionUtils.forEach(this.m_actions,e=>{let n=e.mapToMenuCreator(t);o.addMenuCreator(n)});return o};e.CMEActionGroup.prototype.setup=function(){e.CMEAbstractAction.prototype.setup.call(this);this.m_actions=e.XList.create()};e.CMEDataProviderParameter=function(){};e.CMEDataProviderParameter.prototype=new e.XObject;e.CMEDataProviderParameter.prototype._ff_c="CMEDataProviderParameter";e.CMEDataProviderParameter.prototype.m_contextString=null;e.CMEDataProviderParameter.prototype.m_name=null;e.CMEDataProviderParameter.prototype.getName=function(){return this.m_name};e.CMEDataProviderParameter.prototype.releaseObject=function(){this.m_contextString=null;this.m_name=null;e.XObject.prototype.releaseObject.call(this)};e.CMEDataProviderParameter.prototype.setName=function(e){this.m_name=e};e.CMEMultiSelectAction=function(){};e.CMEMultiSelectAction.prototype=new e.CMEAbstractAction;e.CMEMultiSelectAction.prototype._ff_c="CMEMultiSelectAction";e.CMEMultiSelectAction.create=function(){let t=new e.CMEMultiSelectAction;t.setup();return t};e.CMEMultiSelectAction.prototype.m_deferredOptionsRetriever=null;e.CMEMultiSelectAction.prototype.m_doubtfulSelectionsRetriever=null;e.CMEMultiSelectAction.prototype.m_eagerlyRetrieveDeferredOptions=false;e.CMEMultiSelectAction.prototype.m_optionsRetriever=null;e.CMEMultiSelectAction.prototype.m_selectionConsumer=null;e.CMEMultiSelectAction.prototype.m_selectionRetriever=null;e.CMEMultiSelectAction.prototype.asMultiSelectAction=function(){return this};e.CMEMultiSelectAction.prototype.getActionType=function(){return e.CmeActionType.MULTI_SELECT};e.CMEMultiSelectAction.prototype.getAvailableOptions=function(t){return e.isNull(this.m_optionsRetriever)?null:this.m_optionsRetriever(t)};e.CMEMultiSelectAction.prototype.getSelectedOptions=function(t){return e.isNull(this.m_selectionRetriever)?null:this.m_selectionRetriever(t)};e.CMEMultiSelectAction.prototype.mapToMenuCreator=function(t){let o=e.CMEGroupCreator.create();this.mapGenericPropertiesToMenuCreator(t,o);o.setOptionsRetriever(this.m_optionsRetriever);o.setDeferredOptionsRetriever(this.m_eagerlyRetrieveDeferredOptions,this.m_deferredOptionsRetriever);o.setSelectionsRetriever(this.m_selectionRetriever);o.setDoubtfulSelectionsRetriever(this.m_doubtfulSelectionsRetriever);if(e.isNull(t)){o.setSelectionConsumer(this.m_selectionConsumer)}else{o.setSelectionConsumer((e,o,n)=>{t.onActionMultiSelect(this,o,n.getBoolean(),e)})}return o};e.CMEMultiSelectAction.prototype.selectOption=function(t,o,n){if(e.notNull(this.m_selectionConsumer)){this.m_selectionConsumer(t,o,e.XBooleanValue.create(n))}};e.CMEMultiSelectAction.prototype.setDeferredOptionsRetriever=function(e,t){this.m_eagerlyRetrieveDeferredOptions=e;this.m_deferredOptionsRetriever=t};e.CMEMultiSelectAction.prototype.setDoubtfulSelectionsRetriever=function(e){this.m_doubtfulSelectionsRetriever=e};e.CMEMultiSelectAction.prototype.setOptionsRetriever=function(e){this.m_optionsRetriever=e};e.CMEMultiSelectAction.prototype.setSelectionConsumer=function(e){this.m_selectionConsumer=e};e.CMEMultiSelectAction.prototype.setSelectionRetriever=function(e){this.m_selectionRetriever=e};e.CMESelectionOption=function(){};e.CMESelectionOption.prototype=new e.CMEAbstractAction;e.CMESelectionOption.prototype._ff_c="CMESelectionOption";e.CMESelectionOption.create=function(){let t=new e.CMESelectionOption;t.setup();return t};e.CMESelectionOption.prototype.m_customObject=null;e.CMESelectionOption.prototype.asSelectOption=function(){return this};e.CMESelectionOption.prototype.getActionType=function(){return e.CmeActionType.OPTION};e.CMESelectionOption.prototype.getCustomObject=function(){return this.m_customObject};e.CMESelectionOption.prototype.mapToMenuCreator=function(t){let o=e.CMELeafCreator.create();this.mapGenericPropertiesToMenuCreator(t,o);return o};e.CMESelectionOption.prototype.releaseObject=function(){this.m_customObject=null;e.CMEAbstractAction.prototype.releaseObject.call(this)};e.CMESelectionOption.prototype.setCustomObject=function(e){this.m_customObject=e};e.CMEConditionalMenuCreatorGroup=function(){};e.CMEConditionalMenuCreatorGroup.prototype=new e.CMEMenuCreator;e.CMEConditionalMenuCreatorGroup.prototype._ff_c="CMEConditionalMenuCreatorGroup";e.CMEConditionalMenuCreatorGroup.create=function(){let t=new e.CMEConditionalMenuCreatorGroup;t.setup();return t};e.CMEConditionalMenuCreatorGroup.prototype.m_menuCreators=null;e.CMEConditionalMenuCreatorGroup.prototype.addConditionalMenuCreator=function(e){this.m_menuCreators.add(e)};e.CMEConditionalMenuCreatorGroup.prototype.getMatchingTopMenuName=function(t){let o=null;for(let n=0;n<this.m_menuCreators.size();n++){o=this.m_menuCreators.get(n).getMatchingTopMenuName(t);if(e.XStringUtils.isNotNullAndNotEmpty(o)){break}}return o};e.CMEConditionalMenuCreatorGroup.prototype.setup=function(){e.CMEMenuCreator.prototype.setup.call(this);this.m_menuCreators=e.XList.create()};e.CMEConditionalMenuCreatorGroup.prototype.transform=function(e,t){for(let o=0;o<this.m_menuCreators.size();o++){if(this.m_menuCreators.get(o).conditionalTransform(e,t)){break}}};e.CMELocalizableTextCreatorContextCompound=function(){};e.CMELocalizableTextCreatorContextCompound.prototype=new e.CMELocalizableTextCreatorAbstract;e.CMELocalizableTextCreatorContextCompound.prototype._ff_c="CMELocalizableTextCreatorContextCompound";e.CMELocalizableTextCreatorContextCompound.create=function(){let t=new e.CMELocalizableTextCreatorContextCompound;t.setup();return t};e.CMELocalizableTextCreatorContextCompound.prototype.m_conditionalReplacers=null;e.CMELocalizableTextCreatorContextCompound.prototype.addReplacer=function(t,o){this.m_conditionalReplacers.add(e.CMELocalizableTextContextCompound.create(t,o))};e.CMELocalizableTextCreatorContextCompound.prototype.getKey=function(t){let o=null;for(let n=0;n<this.m_conditionalReplacers.size();n++){let r=this.m_conditionalReplacers.get(n).getMatch(t);if(e.notNull(r)){o=r.getKey(t);break}}return o};e.CMELocalizableTextCreatorContextCompound.prototype.getReplacements=function(t){let o=null;for(let n=0;n<this.m_conditionalReplacers.size();n++){let r=this.m_conditionalReplacers.get(n).getMatch(t);if(e.notNull(r)){o=r.getReplacements(t);break}}return o};e.CMELocalizableTextCreatorContextCompound.prototype.setup=function(){e.CMELocalizableTextCreatorAbstract.prototype.setup.call(this);this.m_conditionalReplacers=e.XList.create()};e.CMELocalizableTextCreatorSimple=function(){};e.CMELocalizableTextCreatorSimple.prototype=new e.CMELocalizableTextCreatorAbstract;e.CMELocalizableTextCreatorSimple.prototype._ff_c="CMELocalizableTextCreatorSimple";e.CMELocalizableTextCreatorSimple.create=function(){let t=new e.CMELocalizableTextCreatorSimple;t.setup();return t};e.CMELocalizableTextCreatorSimple.prototype.m_key=null;e.CMELocalizableTextCreatorSimple.prototype.m_replacements=null;e.CMELocalizableTextCreatorSimple.prototype.addReplacement=function(e){this.m_replacements.add(e)};e.CMELocalizableTextCreatorSimple.prototype.getKey=function(e){return this.m_key};e.CMELocalizableTextCreatorSimple.prototype.getReplacements=function(e){return this.m_replacements};e.CMELocalizableTextCreatorSimple.prototype.setKey=function(e){this.m_key=e};e.CMELocalizableTextCreatorSimple.prototype.setup=function(){e.CMELocalizableTextCreatorAbstract.prototype.setup.call(this);this.m_replacements=e.XList.create()};e.CMEMenuItemCreator=function(){};e.CMEMenuItemCreator.prototype=new e.CMEMenuCreator;e.CMEMenuItemCreator.prototype._ff_c="CMEMenuItemCreator";e.CMEMenuItemCreator.prototype.m_dataHelpId=null;e.CMEMenuItemCreator.prototype.m_enabled=null;e.CMEMenuItemCreator.prototype.m_explanation=null;e.CMEMenuItemCreator.prototype.m_highlightProcedure=null;e.CMEMenuItemCreator.prototype.m_icon=null;e.CMEMenuItemCreator.prototype.m_localizableExplanation=null;e.CMEMenuItemCreator.prototype.m_localizableText=null;e.CMEMenuItemCreator.prototype.m_name=null;e.CMEMenuItemCreator.prototype.m_overflowPriority=0;e.CMEMenuItemCreator.prototype.m_text=null;e.CMEMenuItemCreator.prototype.m_unHighlightProcedure=null;e.CMEMenuItemCreator.prototype.m_visible=null;e.CMEMenuItemCreator.prototype.addEnabledConstraint=function(e){this.m_enabled.add(e)};e.CMEMenuItemCreator.prototype.addVisibleConstraint=function(e){this.m_visible.add(e)};e.CMEMenuItemCreator.prototype.getDataHelpId=function(){return e.notNull(this.m_dataHelpId)?this.m_dataHelpId:e.CMEValueLiteralResolver.getNullResolver()};e.CMEMenuItemCreator.prototype.getExplanation=function(){return e.notNull(this.m_explanation)?this.m_explanation:e.CMEValueLiteralResolver.getNullResolver()};e.CMEMenuItemCreator.prototype.getIcon=function(){return e.notNull(this.m_icon)?this.m_icon:e.CMEValueLiteralResolver.getNullResolver()};e.CMEMenuItemCreator.prototype.getLocalizableExplanation=function(){return this.m_localizableExplanation};e.CMEMenuItemCreator.prototype.getLocalizableText=function(){return this.m_localizableText};e.CMEMenuItemCreator.prototype.getMatchingTopMenuName=function(e){return this.getName().resolveString(e)};e.CMEMenuItemCreator.prototype.getName=function(){return e.notNull(this.m_name)?this.m_name:e.CMEValueLiteralResolver.getNullResolver()};e.CMEMenuItemCreator.prototype.getOverflowPriority=function(){return this.m_overflowPriority};e.CMEMenuItemCreator.prototype.getText=function(){return e.notNull(this.m_text)?this.m_text:e.CMEValueLiteralResolver.getNullResolver()};e.CMEMenuItemCreator.prototype.resolveEnabled=function(e){let t=true;for(let o=0;t&&o<this.m_enabled.size();o++){t=t&&this.m_enabled.get(o).resolveBoolean(e)}return t};e.CMEMenuItemCreator.prototype.resolveHighlightProcedure=function(t){let o=null;if(e.notNull(this.m_highlightProcedure)){o=()=>{this.m_highlightProcedure(t)}}return o};e.CMEMenuItemCreator.prototype.resolveLocalizableExplanation=function(t){let o=null;if(e.notNull(this.m_localizableExplanation)){o=e.CMELocalizableText.create();o.setKey(this.m_localizableExplanation.getKey(t));let n=this.m_localizableExplanation.getReplacements(t);for(let e=0;e<n.size();e++){o.addReplacement(n.get(e).resolveString(t))}}return o};e.CMEMenuItemCreator.prototype.resolveLocalizableText=function(t){let o=null;if(e.notNull(this.m_localizableText)){o=e.CMELocalizableText.create();o.setKey(this.m_localizableText.getKey(t));let n=this.m_localizableText.getReplacements(t);for(let e=0;e<n.size();e++){o.addReplacement(n.get(e).resolveString(t))}}return o};e.CMEMenuItemCreator.prototype.resolveUnHighlightProcedure=function(t){let o=null;if(e.notNull(this.m_unHighlightProcedure)){o=()=>{this.m_unHighlightProcedure(t)}}return o};e.CMEMenuItemCreator.prototype.resolveVisible=function(e){let t=true;for(let o=0;t&&o<this.m_visible.size();o++){t=t&&this.m_visible.get(o).resolveBoolean(e)}return t};e.CMEMenuItemCreator.prototype.setDataHelpId=function(e){this.m_dataHelpId=e};e.CMEMenuItemCreator.prototype.setDisableIfLessThanNEnabledItems=function(e){};e.CMEMenuItemCreator.prototype.setDisableIfLessThanNItems=function(e){};e.CMEMenuItemCreator.prototype.setEager=function(e){};e.CMEMenuItemCreator.prototype.setExplanation=function(e){this.m_explanation=e};e.CMEMenuItemCreator.prototype.setFirstSubOptionIsDefault=function(e){};e.CMEMenuItemCreator.prototype.setFlatIfLessThanNItems=function(e){};e.CMEMenuItemCreator.prototype.setHideIfLessThanNItems=function(e){};e.CMEMenuItemCreator.prototype.setHighlightProcedure=function(e){this.m_highlightProcedure=e};e.CMEMenuItemCreator.prototype.setIcon=function(e){this.m_icon=e};e.CMEMenuItemCreator.prototype.setKeepTitleForFlat=function(e){};e.CMEMenuItemCreator.prototype.setLocalizableExplanation=function(e){this.m_localizableExplanation=e};e.CMEMenuItemCreator.prototype.setLocalizableText=function(e){this.m_localizableText=e};e.CMEMenuItemCreator.prototype.setName=function(e){this.m_name=e};e.CMEMenuItemCreator.prototype.setOverflowIfMoreThanNItems=function(e){};e.CMEMenuItemCreator.prototype.setOverflowLocalizableText=function(e){};e.CMEMenuItemCreator.prototype.setOverflowPriority=function(e){this.m_overflowPriority=e};e.CMEMenuItemCreator.prototype.setOverflowText=function(e){};e.CMEMenuItemCreator.prototype.setText=function(e){this.m_text=e};e.CMEMenuItemCreator.prototype.setUnHighlightProcedure=function(e){this.m_unHighlightProcedure=e};e.CMEMenuItemCreator.prototype.setup=function(){e.CMEMenuCreator.prototype.setup.call(this);this.m_enabled=e.XList.create();this.m_visible=e.XList.create()};e.CMEValueContextSwitchResolver=function(){};e.CMEValueContextSwitchResolver.prototype=new e.CMEValueResolver;e.CMEValueContextSwitchResolver.prototype._ff_c="CMEValueContextSwitchResolver";e.CMEValueContextSwitchResolver.create=function(){let t=new e.CMEValueContextSwitchResolver;t.setup();return t};e.CMEValueContextSwitchResolver.prototype.m_conditionalValues=null;e.CMEValueContextSwitchResolver.prototype.addConditionalValue=function(t,o){this.m_conditionalValues.add(e.CMEValueContextCompound.create(t,o))};e.CMEValueContextSwitchResolver.prototype.releaseObject=function(){this.m_conditionalValues=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_conditionalValues)};e.CMEValueContextSwitchResolver.prototype.resolve=function(t){let o=null;for(let n=0;n<this.m_conditionalValues.size();n++){let r=this.m_conditionalValues.get(n).getExpression(t);if(e.notNull(r)){o=r.resolve(t)}}return o};e.CMEValueContextSwitchResolver.prototype.setup=function(){e.CMEValueResolver.prototype.setup.call(this);this.m_conditionalValues=e.XList.create()};e.CMEValueFunctionalResolver=function(){};e.CMEValueFunctionalResolver.prototype=new e.CMEValueResolver;e.CMEValueFunctionalResolver.prototype._ff_c="CMEValueFunctionalResolver";e.CMEValueFunctionalResolver.create=function(){let t=new e.CMEValueFunctionalResolver;t.setup();return t};e.CMEValueFunctionalResolver.prototype.m_function=null;e.CMEValueFunctionalResolver.prototype.getFunction=function(){return this.m_function};e.CMEValueFunctionalResolver.prototype.resolve=function(e){let t=this.m_function(e);return t};e.CMEValueFunctionalResolver.prototype.setFunction=function(e){this.m_function=e};e.CMEValueFunctionalResolver.prototype.setup=function(){e.CMEValueResolver.prototype.setup.call(this)};e.CMEValueLiteralResolver=function(){};e.CMEValueLiteralResolver.prototype=new e.CMEValueResolver;e.CMEValueLiteralResolver.prototype._ff_c="CMEValueLiteralResolver";e.CMEValueLiteralResolver.FALSE_RESOLVER=null;e.CMEValueLiteralResolver.MINUS_1_RESOLVER=null;e.CMEValueLiteralResolver.NULL_RESOLVER=null;e.CMEValueLiteralResolver.PLUS_1_RESOLVER=null;e.CMEValueLiteralResolver.TRUE_RESOLVER=null;e.CMEValueLiteralResolver.ZERO_RESOLVER=null;e.CMEValueLiteralResolver.create=function(t){let o=new e.CMEValueLiteralResolver;o.setupValue(t);return o};e.CMEValueLiteralResolver.getFalseResolver=function(){if(e.isNull(e.CMEValueLiteralResolver.FALSE_RESOLVER)){e.CMEValueLiteralResolver.FALSE_RESOLVER=e.CMEValueLiteralResolver.create(e.XBooleanValue.create(false))}return e.CMEValueLiteralResolver.FALSE_RESOLVER};e.CMEValueLiteralResolver.getMinus1Resolver=function(){if(e.isNull(e.CMEValueLiteralResolver.MINUS_1_RESOLVER)){e.CMEValueLiteralResolver.MINUS_1_RESOLVER=e.CMEValueLiteralResolver.create(e.XDoubleValue.create(-1))}return e.CMEValueLiteralResolver.MINUS_1_RESOLVER};e.CMEValueLiteralResolver.getNullResolver=function(){if(e.isNull(e.CMEValueLiteralResolver.NULL_RESOLVER)){e.CMEValueLiteralResolver.NULL_RESOLVER=e.CMEValueLiteralResolver.create(null)}return e.CMEValueLiteralResolver.NULL_RESOLVER};e.CMEValueLiteralResolver.getPlus1Resolver=function(){if(e.isNull(e.CMEValueLiteralResolver.PLUS_1_RESOLVER)){e.CMEValueLiteralResolver.PLUS_1_RESOLVER=e.CMEValueLiteralResolver.create(e.XDoubleValue.create(1))}return e.CMEValueLiteralResolver.PLUS_1_RESOLVER};e.CMEValueLiteralResolver.getTrueResolver=function(){if(e.isNull(e.CMEValueLiteralResolver.TRUE_RESOLVER)){e.CMEValueLiteralResolver.TRUE_RESOLVER=e.CMEValueLiteralResolver.create(e.XBooleanValue.create(true))}return e.CMEValueLiteralResolver.TRUE_RESOLVER};e.CMEValueLiteralResolver.getZeroResolver=function(){if(e.isNull(e.CMEValueLiteralResolver.ZERO_RESOLVER)){e.CMEValueLiteralResolver.ZERO_RESOLVER=e.CMEValueLiteralResolver.create(e.XDoubleValue.create(0))}return e.CMEValueLiteralResolver.ZERO_RESOLVER};e.CMEValueLiteralResolver.prototype.m_value=null;e.CMEValueLiteralResolver.prototype.resolve=function(e){return this.m_value};e.CMEValueLiteralResolver.prototype.setupValue=function(e){this.m_value=e};e.CMEValuePathResolver=function(){};e.CMEValuePathResolver.prototype=new e.CMEValueResolver;e.CMEValuePathResolver.prototype._ff_c="CMEValuePathResolver";e.CMEValuePathResolver.create=function(t){let o=new e.CMEValuePathResolver;o.setupExpression(t);return o};e.CMEValuePathResolver.prototype.m_expression=null;e.CMEValuePathResolver.prototype.resolve=function(t){return e.isNull(t)?null:t.resolveValue(this.m_expression)};e.CMEValuePathResolver.prototype.setupExpression=function(e){this.m_expression=e};e.CMEValueStringFunctionalResolver=function(){};e.CMEValueStringFunctionalResolver.prototype=new e.CMEValueResolver;e.CMEValueStringFunctionalResolver.prototype._ff_c="CMEValueStringFunctionalResolver";e.CMEValueStringFunctionalResolver.create=function(){let t=new e.CMEValueStringFunctionalResolver;t.setup();return t};e.CMEValueStringFunctionalResolver.prototype.m_function=null;e.CMEValueStringFunctionalResolver.prototype.getFunction=function(){return this.m_function};e.CMEValueStringFunctionalResolver.prototype.resolve=function(t){if(e.notNull(this.m_function)){return e.XStringValue.create(this.m_function(t))}else{return null}};e.CMEValueStringFunctionalResolver.prototype.setFunction=function(e){this.m_function=e};e.CMEValueStringFunctionalResolver.prototype.setup=function(){e.CMEValueResolver.prototype.setup.call(this)};e.CMEContextConditionAlgebra=function(){};e.CMEContextConditionAlgebra.prototype=new e.CMEContextConditionAbstract;e.CMEContextConditionAlgebra.prototype._ff_c="CMEContextConditionAlgebra";e.CMEContextConditionAlgebra.createAnd=function(){let t=new e.CMEContextConditionAlgebra;t.setup();t.m_allMatch=true;return t};e.CMEContextConditionAlgebra.createNone=function(){let t=new e.CMEContextConditionAlgebra;t.setup();t.m_noneMatch=true;return t};e.CMEContextConditionAlgebra.createOr=function(){let t=new e.CMEContextConditionAlgebra;t.setup();t.m_someMatch=true;return t};e.CMEContextConditionAlgebra.prototype.m_allMatch=false;e.CMEContextConditionAlgebra.prototype.m_baseConditions=null;e.CMEContextConditionAlgebra.prototype.m_noneMatch=false;e.CMEContextConditionAlgebra.prototype.m_someMatch=false;e.CMEContextConditionAlgebra.prototype.addSubCondition=function(e){this.m_baseConditions.add(e)};e.CMEContextConditionAlgebra.prototype.canBreak=function(e){return this.m_someMatch&&e||!this.m_someMatch&&!e};e.CMEContextConditionAlgebra.prototype.checkCondition=function(e){let t=this.getInitialValue();for(let o=0;o<this.m_baseConditions.size();o++){t=this.getNewValue(t,this.m_baseConditions.get(o),e);if(this.canBreak(t)){break}}return t};e.CMEContextConditionAlgebra.prototype.getInitialValue=function(){return!e.XCollectionUtils.hasElements(this.m_baseConditions)||!this.m_someMatch};e.CMEContextConditionAlgebra.prototype.getNewValue=function(e,t,o){if(this.m_allMatch){return e&&t.checkCondition(o)}else if(this.m_someMatch){return e||t.checkCondition(o)}else if(this.m_noneMatch){return e&&!t.checkCondition(o)}return false};e.CMEContextConditionAlgebra.prototype.setup=function(){e.CMEContextConditionAbstract.prototype.setup.call(this);this.m_baseConditions=e.XList.create()};e.CMEContextConditionLeaf=function(){};e.CMEContextConditionLeaf.prototype=new e.CMEContextConditionAbstract;e.CMEContextConditionLeaf.prototype._ff_c="CMEContextConditionLeaf";e.CMEContextConditionLeaf.create=function(){let t=new e.CMEContextConditionLeaf;t.setup();return t};e.CMEContextConditionLeaf.prototype.m_comparison=null;e.CMEContextConditionLeaf.prototype.m_conditionalType=null;e.CMEContextConditionLeaf.prototype.m_matchString=null;e.CMEContextConditionLeaf.prototype.checkCondition=function(t){if(e.isNull(t)){return false}let o=t.resolveValue(this.m_matchString);let n=t.getSubContexts(this.m_matchString);let r=e.isNull(this.m_comparison)?null:this.m_comparison.resolve(t);if(this.m_conditionalType===e.CMEConditionalType.MIN_SIZE){return e.XCollectionUtils.hasElements(n)&&n.size()>=this.m_comparison.resolveNumber(t)}else if(this.m_conditionalType===e.CMEConditionalType.MAX_SIZE){return e.XCollectionUtils.hasElements(n)&&n.size()<=this.m_comparison.resolveNumber(t)}else if(this.m_conditionalType===e.CMEConditionalType.EQUAL){return e.notNull(o)&&o.isEqualTo(r)}else if(this.m_conditionalType===e.CMEConditionalType.NOT_EQUAL){return e.notNull(o)&&o.isEqualTo(r)}else if(this.m_conditionalType===e.CMEConditionalType.EXISTS){return e.XCollectionUtils.hasElements(n)||e.notNull(o)}else if(this.m_conditionalType===e.CMEConditionalType.NOT_EXISTS){return!e.XCollectionUtils.hasElements(n)&&e.isNull(o)}return false};e.CMEContextConditionLeaf.prototype.getComparison=function(){return this.m_comparison};e.CMEContextConditionLeaf.prototype.getConditionalType=function(){return this.m_conditionalType};e.CMEContextConditionLeaf.prototype.getMatchString=function(){return this.m_matchString};e.CMEContextConditionLeaf.prototype.setComparison=function(e){this.m_comparison=e};e.CMEContextConditionLeaf.prototype.setConditionalType=function(e){this.m_conditionalType=e};e.CMEContextConditionLeaf.prototype.setMatchString=function(e){this.m_matchString=e};e.CMEContextConditionNot=function(){};e.CMEContextConditionNot.prototype=new e.CMEContextConditionAbstract;e.CMEContextConditionNot.prototype._ff_c="CMEContextConditionNot";e.CMEContextConditionNot.create=function(){let t=new e.CMEContextConditionNot;t.setup();return t};e.CMEContextConditionNot.prototype.m_baseCondition=null;e.CMEContextConditionNot.prototype.checkCondition=function(t){return e.isNull(this.m_baseCondition)?true:!this.m_baseCondition.checkCondition(t)};e.CMEContextConditionNot.prototype.getBaseCondition=function(){return this.m_baseCondition};e.CMEContextConditionNot.prototype.setBaseCondition=function(e){this.m_baseCondition=e};e.CMEDefaultPluginActionProvider=function(){};e.CMEDefaultPluginActionProvider.prototype=new e.CMEDynamicActionsProviderDefault;e.CMEDefaultPluginActionProvider.prototype._ff_c="CMEDefaultPluginActionProvider";e.CMEDefaultPluginActionProvider.create=function(t,o){let n=new e.CMEDefaultPluginActionProvider;n.m_name=t;n.m_config=o;return n};e.CMEDefaultPluginActionProvider.prototype.m_config=null;e.CMEDefaultPluginActionProvider.prototype.m_name=null;e.CMEDefaultPluginActionProvider.prototype.provideMenuConfig=function(e,t,o){t.onDynamicMenuConfigProvided(e,this.m_name,this.m_config,o)};e.CMEDefaultPluginActionProvider.prototype.releaseObject=function(){e.CMEDynamicActionsProviderDefault.prototype.releaseObject.call(this);this.m_name=null;this.m_config=null};e.CMEMenuTreeGenerator=function(){};e.CMEMenuTreeGenerator.prototype=new e.XObject;e.CMEMenuTreeGenerator.prototype._ff_c="CMEMenuTreeGenerator";e.CMEMenuTreeGenerator.create=function(){let t=new e.CMEMenuTreeGenerator;t.setup();return t};e.CMEMenuTreeGenerator.prototype.m_actionController=null;e.CMEMenuTreeGenerator.prototype.m_actionFilter=null;e.CMEMenuTreeGenerator.prototype.m_actionProviderListeners=null;e.CMEMenuTreeGenerator.prototype.m_actionProviders=null;e.CMEMenuTreeGenerator.prototype.m_configuration=null;e.CMEMenuTreeGenerator.prototype.m_menuGenerator=null;e.CMEMenuTreeGenerator.prototype.m_pristine=false;e.CMEMenuTreeGenerator.prototype.m_registry=null;e.CMEMenuTreeGenerator.prototype.m_shortcutActions=null;e.CMEMenuTreeGenerator.prototype.checkMenu=function(t,o,n){this.generate(t,o,t=>{if(e.notNull(t)){this.mapTextsForChecking(t);n(t)}})};e.CMEMenuTreeGenerator.prototype.clearDynamicActionsProviders=function(){let e=this.m_actionProviders.getKeysAsIterator();while(e.hasNext()){this.unRegisterDynamicActionsProvider(e.next())}};e.CMEMenuTreeGenerator.prototype.continueMenuCreation=function(t,o,n){if(e.notNull(n)&&e.notNull(o)){if(e.notNull(t)){e.XStream.of(t.getValuesAsReadOnlyList()).forEach(e=>{this.dynamicallyFilterMenu(o,e)});e.XStream.of(t.getValuesAsReadOnlyList()).forEach(e=>{this.dynamicallyExtendMenu(o,e)})}n(o)}};e.CMEMenuTreeGenerator.prototype.createMenuFiller=function(t,o){return e.CMEMenuFiller.create(this,t,o)};e.CMEMenuTreeGenerator.prototype.dynamicallyExtendMenu=function(t,o){let n=e.isNull(o)?null:o.getListByKey(e.CMECreatorJsonConstants.CME_GLOBAL_SHORTCUT_ACTIONS);let r=e.isNull(o)?null:o.getListByKey(e.CMECreatorJsonConstants.CME_SUBMENUS);let i=e.CMECreatorJsonHelper.remapShortcutActions(n,this.getRegistry(),this.m_actionController);e.XCollectionUtils.forEach(i,e=>{if(!this.m_shortcutActions.contains(e)){this.m_shortcutActions.add(e)}});let s=e.CMECreatorJsonHelper.remapSubMenuDefinitions(r);let l=e.isNull(o)?null:o.getListByKey(e.CMECreatorJsonConstants.CME_MENU_EXTENSIONS);if(e.XCollectionUtils.hasElements(l)){let o=e.CMECreatorJsonHelper.createMenuExtender(l,s,i,this.getRegistry(),this.m_actionController);if(e.notNull(o)){o.extendMenu(t)}}};e.CMEMenuTreeGenerator.prototype.dynamicallyFilterMenu=function(t,o){let n=e.isNull(o)?null:o.getListByKey(e.CMECreatorJsonConstants.CME_MENU_FILTERS);if(e.XCollectionUtils.hasElements(n)){let o=e.CMECreatorJsonHelper.createMenuFilter(n);if(e.notNull(o)){o.filterMenu(t)}}};e.CMEMenuTreeGenerator.prototype.ensureMenu=function(){if(!this.m_pristine&&e.notNull(this.m_configuration)){this.loadConfiguration(this.m_configuration)}this.m_pristine=true};e.CMEMenuTreeGenerator.prototype.generate=function(t,o,n){this.ensureMenu();if(e.notNull(this.m_menuGenerator)){let r=e.CMEGroupingMenuItem.create();let i=e.CMEContextAccess.createWithContext(t);i.setUiContext(o);this.m_menuGenerator.transform(i,r);r.setContext(i);let s=r.getTags();if(e.XCollectionUtils.hasElements(s)){r.setName(s.getValuesAsReadOnlyList().get(0))}if(e.XCollectionUtils.hasElements(this.m_actionProviders)){let t=this.m_actionProviders.getKeysAsIterator();let o;let s=e.CMEMenuCarrier.create(n,r);while(t.hasNext()){o=this.m_actionProviders.getByKey(t.next());o.provideMenuConfig(i,this,s)}}else{this.continueMenuCreation(null,r,n)}}else{n(null)}};e.CMEMenuTreeGenerator.prototype.getActionFilter=function(){return this.m_actionFilter};e.CMEMenuTreeGenerator.prototype.getConfiguration=function(){return this.m_configuration};e.CMEMenuTreeGenerator.prototype.getRegisteredActions=function(){return this.getRegistry().getRegisteredActions()};e.CMEMenuTreeGenerator.prototype.getRegistry=function(){return this.m_registry};e.CMEMenuTreeGenerator.prototype.getShortcutActions=function(){this.ensureMenu();return this.m_shortcutActions};e.CMEMenuTreeGenerator.prototype.getTopMenuName=function(t,o){this.ensureMenu();let n=e.CMEContextAccess.createWithContext(t);n.setUiContext(o);return e.isNull(this.m_menuGenerator)?null:this.m_menuGenerator.getMatchingTopMenuName(n)};e.CMEMenuTreeGenerator.prototype.loadConfiguration=function(t){let o=t.getStructureByKey(e.CMECreatorJsonConstants.CME_ACTIONS_FILTER);this.setActionFilter(o);let n=t.getBooleanByKey(e.CMECreatorJsonConstants.CME_LOGGING_ENABLED);this.m_actionController.setLoggingEnabled(n);let r=t.getListByKey(e.CMECreatorJsonConstants.CME_MENU_ACTIONS);if(e.notNull(r)){e.CMECreatorJsonHelper.defineCustomActions(r,this.getRegistry())}let i=t.getListByKey(e.CMECreatorJsonConstants.CME_GLOBAL_SHORTCUT_ACTIONS);let s=e.CMECreatorJsonHelper.remapShortcutActions(i,this.getRegistry(),this.m_actionController);this.m_shortcutActions.addAll(s);let l=t.getListByKey(e.CMECreatorJsonConstants.CME_MENUS);let a=t.getListByKey(e.CMECreatorJsonConstants.CME_SUBMENUS);let u=e.CMECreatorJsonHelper.remapSubMenuDefinitions(a);if(e.XCollectionUtils.hasElements(l)){let t=e.CMECreatorJsonHelper.createMenuGenerator(l,u,s,this.getRegistry(),this.m_actionController);this.setMenuGenerator(t)}};e.CMEMenuTreeGenerator.prototype.loadPluginConfiguration=function(t,o){this.ensureMenu();let n=o.getListByKey(e.CMECreatorJsonConstants.CME_MENU_ACTIONS);if(e.notNull(n)){e.CMECreatorJsonHelper.defineCustomActions(n,this.getRegistry())}this.registerDynamicActionsProvider(t,e.CMEDefaultPluginActionProvider.create(t,o))};e.CMEMenuTreeGenerator.prototype.mapTextsForChecking=function(t){let o=t.getLocalizableText();let n=t.getActionGroup();if(e.notNull(o)){t.setText(o.getKey())}if(e.notNull(n)){o=n.getOverflowLocalizableText();if(e.notNull(o)){n.setOverflowText(o.getKey())}let t=n.getSubItems();for(let o=0;o<t.size();o++){let n=t.get(o).getMenuItem();if(e.notNull(n)){this.mapTextsForChecking(n)}}}};e.CMEMenuTreeGenerator.prototype.markDirty=function(){this.m_pristine=false};e.CMEMenuTreeGenerator.prototype.onDynamicMenuConfigProvided=function(t,o,n,r){let i=r;let s=i.getPluginMenuConfigs();s.put(o,n);if(s.size()===this.m_actionProviders.size()){let t=i.getMenuTreeConsumer();if(e.notNull(t)){this.continueMenuCreation(s,i.getMenuTree(),t)}e.XObjectExt.release(r)}};e.CMEMenuTreeGenerator.prototype.registerAction=function(e,t){this.getRegistry().registerAction(e,t)};e.CMEMenuTreeGenerator.prototype.registerActions=function(t){e.XCollectionUtils.forEach(t.getRegistrationKeys(),e=>{let o=t.getActionByKey(e);if(o.isSelectOption()){this.getRegistry().registerOption(e,o.asSelectOption())}else{this.getRegistry().registerAction(e,o)}});this.m_pristine=false};e.CMEMenuTreeGenerator.prototype.registerDynamicActionsProvider=function(t,o){this.unRegisterDynamicActionsProvider(t);let n=e.CMEActionProviderMapper.create(o);this.m_actionProviders.put(t,o);this.m_actionProviderListeners.put(t,n);this.m_actionController.attachActionListener(n)};e.CMEMenuTreeGenerator.prototype.releaseObject=function(){this.m_actionFilter=e.XObjectExt.release(this.m_actionFilter);this.m_menuGenerator=e.XObjectExt.release(this.m_menuGenerator);this.m_actionProviders=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_actionProviders);this.m_configuration=null;this.m_pristine=false};e.CMEMenuTreeGenerator.prototype.setActionFilter=function(e){this.m_actionFilter=e};e.CMEMenuTreeGenerator.prototype.setConfiguration=function(e){this.m_configuration=e;this.m_pristine=false};e.CMEMenuTreeGenerator.prototype.setMenuGenerator=function(e){this.m_menuGenerator=e};e.CMEMenuTreeGenerator.prototype.setup=function(){e.XObject.prototype.setup.call(this);this.m_actionProviders=e.XHashMapByString.create();this.m_actionProviderListeners=e.XHashMapByString.create();this.m_actionController=e.CMEActionController.create();this.m_shortcutActions=e.XList.create();this.m_registry=e.CMERegistry.create()};e.CMEMenuTreeGenerator.prototype.unRegisterDynamicActionsProvider=function(t){let o=this.m_actionProviderListeners.getByKey(t);this.m_actionController.detachActionListener(o);e.XObjectExt.release(o);this.m_actionProviders.remove(t)};e.CMEMenuTreeGenerator.prototype.unloadPluginConfiguration=function(e){this.unRegisterDynamicActionsProvider(e)};e.CMEMenuTreePopulatorBranching=function(){};e.CMEMenuTreePopulatorBranching.prototype=new e.CMEMenuTreePopulatorAbstract;e.CMEMenuTreePopulatorBranching.prototype._ff_c="CMEMenuTreePopulatorBranching";e.CMEMenuTreePopulatorBranching.createWithSubMapper=function(t,o,n){let r=new e.CMEMenuTreePopulatorBranching;r.setFactory(t);r.setUiCache(n);r.m_subMapper=o;return r};e.CMEMenuTreePopulatorBranching.prototype.m_subMapper=null;e.CMEMenuTreePopulatorBranching.prototype.getSubMapper=function(){return this.m_subMapper};e.CMEMenuTreePopulatorBranching.prototype.releaseObject=function(){this.m_subMapper=null;e.CMEMenuTreePopulatorAbstract.prototype.releaseObject.call(this)};e.CMEMenuTreePopulatorSelfRef=function(){};e.CMEMenuTreePopulatorSelfRef.prototype=new e.CMEMenuTreePopulatorAbstract;e.CMEMenuTreePopulatorSelfRef.prototype._ff_c="CMEMenuTreePopulatorSelfRef";e.CMEMenuTreePopulatorSelfRef.create=function(t,o){let n=new e.CMEMenuTreePopulatorSelfRef;n.setFactory(t);n.setUiCache(o);return n};e.CMEMenuTreePopulatorSelfRef.prototype.getSubMapper=function(){return this};e.CMEAbstractMenuItem=function(){};e.CMEAbstractMenuItem.prototype=new e.CMEAbstractItem;e.CMEAbstractMenuItem.prototype._ff_c="CMEAbstractMenuItem";e.CMEAbstractMenuItem.prototype.m_context=null;e.CMEAbstractMenuItem.prototype.m_dataHelpId=null;e.CMEAbstractMenuItem.prototype.m_enabled=false;e.CMEAbstractMenuItem.prototype.m_explanation=null;e.CMEAbstractMenuItem.prototype.m_highlightProcedure=null;e.CMEAbstractMenuItem.prototype.m_icon=null;e.CMEAbstractMenuItem.prototype.m_localizableExplanation=null;e.CMEAbstractMenuItem.prototype.m_localizableText=null;e.CMEAbstractMenuItem.prototype.m_overflowPriority=0;e.CMEAbstractMenuItem.prototype.m_tags=null;e.CMEAbstractMenuItem.prototype.m_text=null;e.CMEAbstractMenuItem.prototype.m_unHighlightProcedure=null;e.CMEAbstractMenuItem.prototype.m_visible=false;e.CMEAbstractMenuItem.prototype.addAllTags=function(e){this.m_tags.addAll(e)};e.CMEAbstractMenuItem.prototype.addTag=function(e){this.m_tags.add(e)};e.CMEAbstractMenuItem.prototype.getContext=function(){return this.m_context};e.CMEAbstractMenuItem.prototype.getDataHelpId=function(){return this.m_dataHelpId};e.CMEAbstractMenuItem.prototype.getExplanation=function(){return this.m_explanation};e.CMEAbstractMenuItem.prototype.getHighlightProcedure=function(){return this.m_highlightProcedure};e.CMEAbstractMenuItem.prototype.getIcon=function(){return this.m_icon};e.CMEAbstractMenuItem.prototype.getLocalizableExplanation=function(){return this.m_localizableExplanation};e.CMEAbstractMenuItem.prototype.getLocalizableText=function(){return this.m_localizableText};e.CMEAbstractMenuItem.prototype.getMenuItem=function(){return this};e.CMEAbstractMenuItem.prototype.getNameOrFallback=function(){return this.getName()===null?e.XCollectionUtils.join(this.getTags().getValuesAsReadOnlyList(),":"):this.getName()};e.CMEAbstractMenuItem.prototype.getOverflowPriority=function(){return this.m_overflowPriority};e.CMEAbstractMenuItem.prototype.getTags=function(){return this.m_tags};e.CMEAbstractMenuItem.prototype.getText=function(){return this.m_text};e.CMEAbstractMenuItem.prototype.getUnHighlightProcedure=function(){return this.m_unHighlightProcedure};e.CMEAbstractMenuItem.prototype.hasTag=function(e){return this.m_tags.contains(e)};e.CMEAbstractMenuItem.prototype.isEnabled=function(){return this.m_enabled};e.CMEAbstractMenuItem.prototype.isVisible=function(){return this.m_visible&&!this.isRemoved()};e.CMEAbstractMenuItem.prototype.releaseObject=function(){this.m_tags=e.XObjectExt.release(this.m_tags);this.m_text=null;this.m_icon=null;this.m_dataHelpId=null;this.m_enabled=false;this.m_visible=false;this.m_overflowPriority=-1;this.m_localizableText=e.XObjectExt.release(this.m_localizableText);this.m_context=null;this.m_explanation=null;this.m_localizableExplanation=e.XObjectExt.release(this.m_localizableExplanation);this.m_highlightProcedure=null;this.m_unHighlightProcedure=null;e.CMEAbstractItem.prototype.releaseObject.call(this)};e.CMEAbstractMenuItem.prototype.removeTag=function(e){this.m_tags.removeElement(e)};e.CMEAbstractMenuItem.prototype.setContext=function(e){this.m_context=e};e.CMEAbstractMenuItem.prototype.setDataHelpId=function(e){this.m_dataHelpId=e};e.CMEAbstractMenuItem.prototype.setEnabled=function(e){this.m_enabled=e};e.CMEAbstractMenuItem.prototype.setExplanation=function(e){this.m_explanation=e};e.CMEAbstractMenuItem.prototype.setHighlightProcedure=function(e){this.m_highlightProcedure=e};e.CMEAbstractMenuItem.prototype.setIcon=function(e){this.m_icon=e};e.CMEAbstractMenuItem.prototype.setLocalizableExplanation=function(e){this.m_localizableExplanation=e};e.CMEAbstractMenuItem.prototype.setLocalizableText=function(e){this.m_localizableText=e};e.CMEAbstractMenuItem.prototype.setOverflowPriority=function(e){this.m_overflowPriority=e};e.CMEAbstractMenuItem.prototype.setText=function(e){this.m_text=e};e.CMEAbstractMenuItem.prototype.setUnHighlightProcedure=function(e){this.m_unHighlightProcedure=e};e.CMEAbstractMenuItem.prototype.setVisible=function(e){this.m_visible=e};e.CMEAbstractMenuItem.prototype.setup=function(){e.CMEAbstractItem.prototype.setup.call(this);this.m_enabled=true;this.m_visible=true;this.m_overflowPriority=-1;this.m_tags=e.XHashSetOfString.create()};e.CMEMenuSeparator=function(){};e.CMEMenuSeparator.prototype=new e.CMEAbstractItem;e.CMEMenuSeparator.prototype._ff_c="CMEMenuSeparator";e.CMEMenuSeparator.create=function(){let t=new e.CMEMenuSeparator;t.setup();return t};e.CMEMenuSeparator.prototype.getMenuSeparator=function(){return this};e.CMEMenuSeparator.prototype.isCompatibleTo=function(t){let o=t.getMenuSeparator();return e.notNull(o)};e.CMEDataProviderMenuAction=function(){};e.CMEDataProviderMenuAction.prototype=new e.CMEAbstractAction;e.CMEDataProviderMenuAction.prototype._ff_c="CMEDataProviderMenuAction";e.CMEDataProviderMenuAction.create=function(t,o){let n=new e.CMEDataProviderMenuAction;n.setup();n.setNameProvider(e=>t);n.m_commandProcessorContext=o;n.m_commands=e.XList.create();n.setAvailableProvider(e=>n.checkVisibleCondition(e));n.setEnabledProvider(e=>n.checkEnabledCondition(e));return n};e.CMEDataProviderMenuAction.prototype.m_commandProcessorContext=null;e.CMEDataProviderMenuAction.prototype.m_commands=null;e.CMEDataProviderMenuAction.prototype.m_enabledCondition=null;e.CMEDataProviderMenuAction.prototype.m_splitParameter=null;e.CMEDataProviderMenuAction.prototype.m_visibleCondition=null;e.CMEDataProviderMenuAction.prototype.addNewCommand=function(t){let o=e.CMEDataProviderMenuActionCommand.create(t);this.m_commands.add(o);return o};e.CMEDataProviderMenuAction.prototype.checkEnabledCondition=function(t){return(e.isNull(this.m_enabledCondition)||this.m_enabledCondition.matches(t,null))&&this.commandsEnabled(t)};e.CMEDataProviderMenuAction.prototype.checkVisibleCondition=function(t){return e.isNull(this.m_visibleCondition)||this.m_visibleCondition.matches(t,null)};e.CMEDataProviderMenuAction.prototype.commandsEnabled=function(t){return e.XStream.of(this.m_commands).allMatch(e=>e.isEnabledInContext(t))};e.CMEDataProviderMenuAction.prototype.getCommands=function(){return this.m_commands};e.CMEDataProviderMenuAction.prototype.getKeyboardShortcut=function(){return null};e.CMEDataProviderMenuAction.prototype.getLeafCreator=function(t){let o=e.CMELeafCreator.create();if(e.isNull(t)){o.setContextConsumer(e=>{this.trigger(e)})}else{o.setContextConsumer(e=>{t.onActionTriggered(this,e)})}return o};e.CMEDataProviderMenuAction.prototype.mapToMenuCreator=function(t){let o;if(e.XStringUtils.isNotNullAndNotEmpty(this.m_splitParameter)){let n=e.CMELoopedMenuCreator.createLoop();n.setLoopParameter(this.m_splitParameter);n.addMenuCreator(this.getLeafCreator(t));let r=this.getLeafCreator(t);this.mapGenericPropertiesToMenuCreator(t,r);let i=e.XString.substring(this.m_splitParameter,e.XString.lastIndexOf(this.m_splitParameter,e.CMECreatorJsonConstants.CME_CONTEXT_PATH_SEPARATOR)+1,-1);let s=e.CMEValuePathResolver.create(e.XStringUtils.concatenate2(i,e.CMECreatorJsonConstants.CME_CONTEXT_TEXT_SUFFIX));r.setText(s);o=n}else{o=this.getLeafCreator(t)}this.mapGenericPropertiesToMenuCreator(t,o);return o};e.CMEDataProviderMenuAction.prototype.setEnabledCondition=function(e){this.m_enabledCondition=e};e.CMEDataProviderMenuAction.prototype.setSplitParameter=function(e){this.m_splitParameter=e};e.CMEDataProviderMenuAction.prototype.setVisibleCondition=function(e){this.m_visibleCondition=e};e.CMEDataProviderMenuAction.prototype.trigger=function(t){let o=t.getSingleSubContext(this.m_commandProcessorContext);if(e.notNull(o)){let n=o.getCustomObject();e.XCollectionUtils.forEach(this.m_commands,e=>{e.executeWithContext(t,n)})}};e.CMEDataProviderParameterMulti=function(){};e.CMEDataProviderParameterMulti.prototype=new e.CMEDataProviderParameter;e.CMEDataProviderParameterMulti.prototype._ff_c="CMEDataProviderParameterMulti";e.CMEDataProviderParameterMulti.create=function(t,o,n){let r=new e.CMEDataProviderParameterMulti;r.m_valueList=e.XListOfNameObject.create();r.setName(t);if(e.XStringUtils.isNotNullAndNotEmpty(o)){r.m_contextString=o}r.m_cardinalityType=n;return r};e.CMEDataProviderParameterMulti.prototype.m_cardinalityType=null;e.CMEDataProviderParameterMulti.prototype.m_valueList=null;e.CMEDataProviderParameterMulti.prototype.addValue=function(t,o){this.m_valueList.add(e.XNameTextObject.create(t,o))};e.CMEDataProviderParameterMulti.prototype.getCardinalityType=function(){return this.m_cardinalityType};e.CMEDataProviderParameterMulti.prototype.isAvailable=function(t){return e.XCollectionUtils.hasElements(this.m_valueList)||e.XCollectionUtils.hasElements(t.getSubContexts(this.m_contextString))};e.CMEDataProviderParameterMulti.prototype.releaseObject=function(){this.m_valueList=e.XObjectExt.release(this.m_valueList);e.CMEDataProviderParameter.prototype.releaseObject.call(this)};e.CMEDataProviderParameterMulti.prototype.resolveParameters=function(t){let o;if(e.XCollectionUtils.hasElements(this.m_valueList)){o=this.m_valueList}else if(e.XStringUtils.isNotNullAndNotEmpty(this.m_contextString)){let n=t.getSubContexts(this.m_contextString);if(e.XCollectionUtils.hasElements(n)){o=e.XStream.of(n).filterNullValues().map(e=>e.getCustomObject()).filterNullValues().map(e=>e).collect(e.XStreamCollector.toListOfNameObject())}else{o=e.XListOfNameObject.create()}}else{o=e.XListOfNameObject.create()}return o};e.CMEDataProviderParameterSingle=function(){};e.CMEDataProviderParameterSingle.prototype=new e.CMEDataProviderParameter;e.CMEDataProviderParameterSingle.prototype._ff_c="CMEDataProviderParameterSingle";e.CMEDataProviderParameterSingle.create=function(t,o,n){let r=new e.CMEDataProviderParameterSingle;r.setName(t);if(e.XStringUtils.isNotNullAndNotEmpty(o)){r.m_value=e.XNameTextObject.create(o,o)}if(e.XStringUtils.isNotNullAndNotEmpty(n)){r.m_contextString=n}return r};e.CMEDataProviderParameterSingle.prototype.m_value=null;e.CMEDataProviderParameterSingle.prototype.getCardinalityType=function(){return e.CmeCardinalityType.SINGLE};e.CMEDataProviderParameterSingle.prototype.isAvailable=function(t){return e.notNull(this.m_value)||e.XStringUtils.isNotNullAndNotEmpty(this.m_contextString)&&t.getSingleSubContext(this.m_contextString)!==null};e.CMEDataProviderParameterSingle.prototype.releaseObject=function(){this.m_value=null;e.CMEDataProviderParameter.prototype.releaseObject.call(this)};e.CMEDataProviderParameterSingle.prototype.resolveParameter=function(t){let o;if(e.notNull(this.m_value)){o=e.XOptional.of(this.m_value)}else if(e.XStringUtils.isNotNullAndNotEmpty(this.m_contextString)){let n=t.getSingleSubContext(this.m_contextString);if(e.notNull(n)&&n.getCustomObject()!==null){o=e.XOptional.of(n.getCustomObject())}else{o=e.XOptional.empty()}}else{o=e.XOptional.empty()}return o};e.CMESimpleAction=function(){};e.CMESimpleAction.prototype=new e.CMEAbstractAction;e.CMESimpleAction.prototype._ff_c="CMESimpleAction";e.CMESimpleAction.prototype.m_shortcut=null;e.CMESimpleAction.prototype.clearKeyboardShortcut=function(){this.m_shortcut=e.XObjectExt.release(this.m_shortcut)};e.CMESimpleAction.prototype.getActionType=function(){return e.CmeActionType.SIMPLE};e.CMESimpleAction.prototype.getKeyboardShortcut=function(){return this.m_shortcut};e.CMESimpleAction.prototype.releaseObject=function(){this.clearKeyboardShortcut();e.CMEAbstractAction.prototype.releaseObject.call(this)};e.CMESimpleAction.prototype.setup=function(){e.CMEAbstractAction.prototype.setup.call(this)};e.CMESimpleAction.prototype.setupKeyboardShortcut=function(){this.clearKeyboardShortcut();this.m_shortcut=e.CMEKeyboardShortcut.create();return this.m_shortcut};e.CMESingleSelectAction=function(){};e.CMESingleSelectAction.prototype=new e.CMEAbstractAction;e.CMESingleSelectAction.prototype._ff_c="CMESingleSelectAction";e.CMESingleSelectAction.create=function(){let t=new e.CMESingleSelectAction;t.setup();return t};e.CMESingleSelectAction.prototype.m_deferredOptionsRetriever=null;e.CMESingleSelectAction.prototype.m_doubtfulSelectionsRetriever=null;e.CMESingleSelectAction.prototype.m_eagerlyRetrieveDeferredOptions=false;e.CMESingleSelectAction.prototype.m_optionsRetriever=null;e.CMESingleSelectAction.prototype.m_selectionConsumer=null;e.CMESingleSelectAction.prototype.m_selectionRetriever=null;e.CMESingleSelectAction.prototype.asSingleSelectAction=function(){return this};e.CMESingleSelectAction.prototype.getActionType=function(){return e.CmeActionType.SINGLE_SELECT};e.CMESingleSelectAction.prototype.getAvailableOptions=function(t){return e.isNull(this.m_optionsRetriever)?null:this.m_optionsRetriever(t)};e.CMESingleSelectAction.prototype.getSelectedOption=function(t){return e.isNull(this.m_selectionRetriever)?null:this.m_selectionRetriever(t)};e.CMESingleSelectAction.prototype.mapToMenuCreator=function(t){let o=e.CMEGroupCreator.create();this.mapGenericPropertiesToMenuCreator(t,o);o.setOptionsRetriever(this.m_optionsRetriever);o.setDeferredOptionsRetriever(this.m_eagerlyRetrieveDeferredOptions,this.m_deferredOptionsRetriever);o.setSelectionRetriever(this.m_selectionRetriever);o.setDoubtfulSelectionsRetriever(this.m_doubtfulSelectionsRetriever);if(e.isNull(t)){o.setSelectionConsumer((e,t,o)=>{this.m_selectionConsumer(e,t)})}else{o.setSelectionConsumer((e,o,n)=>{t.onActionSingleSelect(this,o,e)})}return o};e.CMESingleSelectAction.prototype.selectOption=function(t,o){if(e.notNull(this.m_selectionConsumer)){this.m_selectionConsumer(t,o)}};e.CMESingleSelectAction.prototype.setDeferredOptionsRetriever=function(e,t){this.m_eagerlyRetrieveDeferredOptions=e;this.m_deferredOptionsRetriever=t};e.CMESingleSelectAction.prototype.setDoubtfulSelectionsRetriever=function(e){this.m_doubtfulSelectionsRetriever=e};e.CMESingleSelectAction.prototype.setOptionsRetriever=function(e){this.m_optionsRetriever=e};e.CMESingleSelectAction.prototype.setSelectionConsumer=function(e){this.m_selectionConsumer=e};e.CMESingleSelectAction.prototype.setSelectionRetriever=function(e){this.m_selectionRetriever=e};e.CMEAggregatedCreator=function(){};e.CMEAggregatedCreator.prototype=new e.CMEMenuItemCreator;e.CMEAggregatedCreator.prototype._ff_c="CMEAggregatedCreator";e.CMEAggregatedCreator.prototype.m_menuCreators=null;e.CMEAggregatedCreator.prototype.addMenuCreator=function(e){this.m_menuCreators.add(e)};e.CMEAggregatedCreator.prototype.applyTransformation=function(t,o){if(e.notNull(o)){for(let e=0;e<this.m_menuCreators.size();e++){let n=this.m_menuCreators.get(e);n.transform(o,t)}}};e.CMEAggregatedCreator.prototype.getMenuCreators=function(){return this.m_menuCreators};e.CMEAggregatedCreator.prototype.setup=function(){e.CMEMenuItemCreator.prototype.setup.call(this);this.m_menuCreators=e.XList.create()};e.CMELeafCreator=function(){};e.CMELeafCreator.prototype=new e.CMEMenuItemCreator;e.CMELeafCreator.prototype._ff_c="CMELeafCreator";e.CMELeafCreator.create=function(){let t=new e.CMELeafCreator;t.setup();return t};e.CMELeafCreator.prototype.m_active=null;e.CMELeafCreator.prototype.m_contextConsumer=null;e.CMELeafCreator.prototype.m_partiallyActive=null;e.CMELeafCreator.prototype.m_shortcut=null;e.CMELeafCreator.prototype.m_toggle=false;e.CMELeafCreator.prototype.getActive=function(){return e.notNull(this.m_active)?this.m_active:e.CMEValueLiteralResolver.getFalseResolver()};e.CMELeafCreator.prototype.getPartiallyActive=function(){return e.notNull(this.m_partiallyActive)?this.m_partiallyActive:e.CMEValueLiteralResolver.getFalseResolver()};e.CMELeafCreator.prototype.isToggle=function(){return this.m_toggle};e.CMELeafCreator.prototype.setActive=function(e){this.m_active=e};e.CMELeafCreator.prototype.setContextConsumer=function(e){this.m_contextConsumer=e};e.CMELeafCreator.prototype.setPartiallyActive=function(e){this.m_partiallyActive=e};e.CMELeafCreator.prototype.setToggle=function(e){this.m_toggle=e};e.CMELeafCreator.prototype.transferShortcut=function(t){this.m_shortcut=null;if(e.notNull(t)){this.m_shortcut=e.CMEKeyboardShortcut.create();this.m_shortcut.copyFrom(t,null)}};e.CMELeafCreator.prototype.transform=function(t,o){let n=o.addNewLeaf();n.setOverflowPriority(this.getOverflowPriority());n.setName(this.getName().resolveString(t));n.setText(this.getText().resolveString(t));n.setExplanation(this.getExplanation().resolveString(t));n.setLocalizableText(this.resolveLocalizableText(t));n.setLocalizableExplanation(this.resolveLocalizableExplanation(t));n.setMainKeyboardShortcut(this.m_shortcut);n.setIcon(this.getIcon().resolveString(t));n.setDataHelpId(this.getDataHelpId().resolveString(t));n.setEnabled(this.resolveEnabled(t));n.setVisible(this.resolveVisible(t));if(this.getActive().resolveBoolean(t)){n.setActive(true)}else if(this.getPartiallyActive().resolveBoolean(t)){n.setActiveExtended(e.TriStateBool._DEFAULT)}n.setToggle(this.isToggle());n.setHighlightProcedure(this.resolveHighlightProcedure(t));n.setUnHighlightProcedure(this.resolveUnHighlightProcedure(t));if(e.notNull(this.m_contextConsumer)){n.setCommand(()=>{this.m_contextConsumer(t)})}};e.CMESeparatorCreator=function(){};e.CMESeparatorCreator.prototype=new e.CMEMenuItemCreator;e.CMESeparatorCreator.prototype._ff_c="CMESeparatorCreator";e.CMESeparatorCreator.create=function(){let t=new e.CMESeparatorCreator;t.setup();return t};e.CMESeparatorCreator.prototype.transform=function(e,t){let o=t.addNewSeparator();o.setName(this.getName().resolveString(e))};e.CMEContext=function(){};e.CMEContext.prototype=new e.XObject;e.CMEContext.prototype._ff_c="CMEContext";e.CMEContext.S_CONTEXT_PATH_DELIMITER="/";e.CMEContext.create=function(){let t=new e.CMEContext;t.setup();return t};e.CMEContext.filterSubContextsLists=function(t,o){let n=e.XList.create();for(let e=0;e<t.size();e++){n.addAll(t.get(e).filterSubContextsSimple(o))}return n};e.CMEContext.prototype.m_customObject=null;e.CMEContext.prototype.m_name=null;e.CMEContext.prototype.m_subContextSupplier=null;e.CMEContext.prototype.m_subContexts=null;e.CMEContext.prototype.m_text=null;e.CMEContext.prototype.m_type=null;e.CMEContext.prototype.addSubContext=function(){this.m_subContextSupplier=null;let t=e.CMEContext.create();this.m_subContexts.add(t);return t};e.CMEContext.prototype.clearSubContexts=function(){e.XCollectionUtils.releaseEntriesFromCollection(this.m_subContexts);this.m_subContexts.clear()};e.CMEContext.prototype.clearSubcontextsByType=function(t){e.XCollectionUtils.forEach(this.getSubContextsByType(t),e=>{this.m_subContexts.removeElement(e)})};e.CMEContext.prototype.copyFrom=function(e,t){let o=e;this.m_name=o.getName();this.m_type=o.getType();this.m_text=o.getText();this.m_customObject=o.m_customObject;let n=o.getSubContexts().getIterator();while(n.hasNext()){this.addSubContext().copyFrom(n.next(),t)}};e.CMEContext.prototype.filterSubContextsRecursive=function(t){return this.filterSubContextsRecursiveByList(e.XStringTokenizer.splitString(t,e.CMEContext.S_CONTEXT_PATH_DELIMITER))};e.CMEContext.prototype.filterSubContextsRecursiveByList=function(t){let o=e.XList.create();o.add(this);let n=o;for(let o=0;o<t.size();o++){n=e.CMEContext.filterSubContextsLists(n,t.get(o))}return n};e.CMEContext.prototype.filterSubContextsSimple=function(t){let o=e.XString.size(t);let n=e.XString.indexOf(t,"[");let r=e.XString.indexOf(t,"]");let i=null;let s=null;if(n===-1&&r===-1){i=t}else if(n>0&&r===o-1){i=e.XString.substring(t,0,n);s=e.XString.substring(t,n+1,r)}return this.getSubContextsByTypeAndName(i,s)};e.CMEContext.prototype.getCustomObject=function(){return this.m_customObject};e.CMEContext.prototype.getName=function(){return this.m_name};e.CMEContext.prototype.getSelector=function(t){let o="";if(e.XStringUtils.isNotNullAndNotEmpty(t)&&e.XString.containsString(t,"/")){o=e.XString.substring(t,0,e.XString.lastIndexOf(t,"/")+1)}return e.XStringUtils.concatenate5(o,this.m_type,"[",this.m_name,"]")};e.CMEContext.prototype.getSubContexts=function(){if(!e.XCollectionUtils.hasElements(this.m_subContexts)&&e.notNull(this.m_subContextSupplier)){this.m_subContexts.addAll(this.m_subContextSupplier())}return this.m_subContexts};e.CMEContext.prototype.getSubContextsByName=function(t){return e.XStream.of(this.getSubContexts()).filter(o=>e.XString.isEqual(t,o.getName())).collect(e.XStreamCollector.toList())};e.CMEContext.prototype.getSubContextsByType=function(t){return e.XStream.of(this.getSubContexts()).filter(o=>e.XString.isEqual(t,o.getType())).collect(e.XStreamCollector.toList())};e.CMEContext.prototype.getSubContextsByTypeAndName=function(t,o){return e.XStream.of(this.getSubContexts()).filter(n=>(e.isNull(t)||e.XStringUtils.isWildcardPatternMatching(n.getType(),t))&&(e.isNull(o)||e.XStringUtils.isWildcardPatternMatching(n.getName(),o))).collect(e.XStreamCollector.toList())};e.CMEContext.prototype.getText=function(){return this.m_text};e.CMEContext.prototype.getType=function(){return this.m_type};e.CMEContext.prototype.releaseObject=function(){this.m_subContexts=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_subContexts);this.m_name=null;this.m_type=null;this.m_text=null;this.m_subContextSupplier=null;this.m_customObject=null;e.XObject.prototype.releaseObject.call(this)};e.CMEContext.prototype.setCustomObject=function(e){this.m_customObject=e};e.CMEContext.prototype.setName=function(e){this.m_name=e};e.CMEContext.prototype.setSubContextsSupplier=function(e){this.clearSubContexts();this.m_subContextSupplier=e};e.CMEContext.prototype.setText=function(e){this.m_text=e};e.CMEContext.prototype.setType=function(e){this.m_type=e};e.CMEContext.prototype.setup=function(){e.XObject.prototype.setup.call(this);this.m_subContexts=e.XList.create()};e.CMEGroupingMenuItem=function(){};e.CMEGroupingMenuItem.prototype=new e.CMEAbstractMenuItem;e.CMEGroupingMenuItem.prototype._ff_c="CMEGroupingMenuItem";e.CMEGroupingMenuItem.create=function(){let t=new e.CMEGroupingMenuItem;t.setup();return t};e.CMEGroupingMenuItem.prototype.m_cachedEnabledSubItemCount=0;e.CMEGroupingMenuItem.prototype.m_cachedSubItemCount=0;e.CMEGroupingMenuItem.prototype.m_deferredOptionsProcedure=null;e.CMEGroupingMenuItem.prototype.m_disableIfLessThanNEnabledItems=0;e.CMEGroupingMenuItem.prototype.m_disableIfLessThanNItems=0;e.CMEGroupingMenuItem.prototype.m_eagerlyRetrieveDeferredOptions=false;e.CMEGroupingMenuItem.prototype.m_firstSubOptionIsDefault=false;e.CMEGroupingMenuItem.prototype.m_flatIfLessThanNItems=0;e.CMEGroupingMenuItem.prototype.m_hideIfLessThanNItems=0;e.CMEGroupingMenuItem.prototype.m_keepTitleForFlat=false;e.CMEGroupingMenuItem.prototype.m_loadingFinished=false;e.CMEGroupingMenuItem.prototype.m_overflowIfMoreThanNItems=0;e.CMEGroupingMenuItem.prototype.m_overflowLocalizableText=null;e.CMEGroupingMenuItem.prototype.m_overflowText=null;e.CMEGroupingMenuItem.prototype.m_subItems=null;e.CMEGroupingMenuItem.prototype._executeDeferredProcedure=function(e,t){if(e.size()>1){e.get(0)(()=>{this._executeDeferredProcedure(e.sublist(1,-1),t)})}else if(e.size()===1){e.get(0)(t)}};e.CMEGroupingMenuItem.prototype.addNewGroup=function(){let t=e.CMEGroupingMenuItem.create();this.addSubItem(t);return t};e.CMEGroupingMenuItem.prototype.addNewLeaf=function(){let t=e.CMELeafMenuItem.create();this.addSubItem(t);return t};e.CMEGroupingMenuItem.prototype.addNewSeparator=function(){let t=e.CMEMenuSeparator.create();this.addSubItem(t);return t};e.CMEGroupingMenuItem.prototype.addSubItem=function(e){e.setParent(this);this.m_cachedSubItemCount=-1;this.m_cachedEnabledSubItemCount=-1;this.m_subItems.add(e)};e.CMEGroupingMenuItem.prototype.addSubItemsAtEnd=function(e){for(let t=0;t<e.size();t++){let o=e.get(t);o.setParent(this);this.m_subItems.add(o)}};e.CMEGroupingMenuItem.prototype.addSubItemsAtStart=function(e){this.insertSubItems(0,e)};e.CMEGroupingMenuItem.prototype.areAllEffectiveSubItemsCompatibleTo=function(e){let t=false;let o=this.getEffectiveSubItems();if(o.size()===e.size()){t=true;for(let n=0;n<o.size();n++){let r=o.get(n);let i=e.get(n);if(!r.isCompatibleTo(i)){t=false;break}}}return t};e.CMEGroupingMenuItem.prototype.clearSubItems=function(){if(e.notNull(this.m_subItems)){this.m_subItems.clear()}};e.CMEGroupingMenuItem.prototype.executeDeferredLoading=function(t){let o=e.XList.create();if(e.notNull(this.m_deferredOptionsProcedure)){o.add(this.m_deferredOptionsProcedure)}e.XStream.of(this.m_subItems).filterNullValues().map(e=>e.getActionGroup()).filterNullValues().filter(e=>e.isFlatForced()&&e.hasDeferredSubItemsEffective()).forEach(e=>{o.add(e.getDeferredLoadingProcedure())});this._executeDeferredProcedure(o,t)};e.CMEGroupingMenuItem.prototype.findItemsByNameOrAlias=function(t,o){let n=e.XList.create();if(e.XString.isEqual(t,e.CMECreatorJsonConstants.CME_REFERENCE_ROOT)){n.add(this)}else{this.findItemsByNameOrAliasInternal(t,o,n)}return n};e.CMEGroupingMenuItem.prototype.findItemsByNameOrAliasInternal=function(t,o,n){for(let r=0;r<this.m_subItems.size();r++){let i=this.m_subItems.get(r);if(e.XString.isEqual(i.getName(),t)||e.XString.isEqual(i.getAlias(),t)){n.add(i)}if(o){let r=i.getActionGroup();if(e.notNull(r)){r.findItemsByNameOrAliasInternal(t,o,n)}}}};e.CMEGroupingMenuItem.prototype.getActionGroup=function(){return this};e.CMEGroupingMenuItem.prototype.getDeferredLoadingProcedure=function(){return this.m_deferredOptionsProcedure};e.CMEGroupingMenuItem.prototype.getEffectiveEnabledSubItemCount=function(){if(this.m_cachedEnabledSubItemCount<0){this.m_cachedEnabledSubItemCount=this.getEffectiveSubItemCountInternal(true)}return this.m_cachedEnabledSubItemCount};e.CMEGroupingMenuItem.prototype.getEffectiveSubItemCount=function(){if(this.m_cachedSubItemCount<0){this.m_cachedSubItemCount=this.getEffectiveSubItemCountInternal(false)}return this.m_cachedSubItemCount};e.CMEGroupingMenuItem.prototype.getEffectiveSubItemCountInternal=function(t){return e.XStream.of(this.m_subItems).filter(o=>{let n=o.getMenuItem();return e.notNull(n)&&n.isVisible()&&(!t||n.isEnabled())}).map(o=>{let n=o.getActionGroup();return e.notNull(n)&&n.isFlat()?e.XIntegerValue.create(n.getEffectiveSubItemCountInternal(t)):e.XIntegerValue.create(1)}).reduce(e.XIntegerValue.create(0),(t,o)=>e.XIntegerValue.create(t.getInteger()+o.getInteger())).getInteger()};e.CMEGroupingMenuItem.prototype.getEffectiveSubItems=function(){let t=e.XList.create();let o=0;let n=0;let r;if(this.isLoadingFinishedEffective()){for(;n<this.m_subItems.size();n++){if(this.m_overflowIfMoreThanNItems>0&&o>=this.m_overflowIfMoreThanNItems){break}r=this.m_subItems.get(n);let i=r.getMenuItem();let s=r.getActionGroup();if(r.getMenuSeparator()!==null){t.add(r)}else if(e.notNull(s)&&s.isVisible()&&s.isFlat()){if(s.isKeepTitleForFlat()){t.add(e.CMEMenuSeparator.create());let o=e.CMEGroupingMenuItem.create();o.setParent(this);o.setKeepTitleForFlat(true);o.setFlat(true);o.setVisible(true);o.setName(s.getName());o.setText(s.getText());o.setLocalizableText(s.getLocalizableText());t.add(o);t.add(e.CMEMenuSeparator.create())}t.addAll(s.getEffectiveSubItems())}else if(e.notNull(i)&&i.isVisible()){t.add(r);o++}}if(n<this.m_subItems.size()){let o=e.CMEGroupingMenuItem.create();o.setParent(this);o.setOverflowIfMoreThanNItems(this.m_overflowIfMoreThanNItems);o.setLocalizableText(this.m_overflowLocalizableText);o.setOverflowLocalizableText(this.m_overflowLocalizableText);o.setText(this.m_overflowText);o.setOverflowText(this.m_overflowText);o.setFlatIfLessThanNItems(2);t.add(o);for(;n<this.m_subItems.size();n++){o.addSubItem(this.m_subItems.get(n))}}}return t};e.CMEGroupingMenuItem.prototype.getFlatIfLessThanNItems=function(){return this.m_flatIfLessThanNItems};e.CMEGroupingMenuItem.prototype.getOverflowLocalizableText=function(){return this.m_overflowLocalizableText};e.CMEGroupingMenuItem.prototype.getSubItems=function(){return this.m_subItems};e.CMEGroupingMenuItem.prototype.hasDeferredSubItems=function(){return e.notNull(this.m_deferredOptionsProcedure)};e.CMEGroupingMenuItem.prototype.hasDeferredSubItemsEffective=function(){return this.hasDeferredSubItems()||e.XStream.of(this.m_subItems).filterNullValues().map(e=>e.getActionGroup()).filterNullValues().anyMatch(e=>e.isFlatForced()&&e.hasDeferredSubItemsEffective())};e.CMEGroupingMenuItem.prototype.hasEffectiveSubItems=function(){return this.getEffectiveSubItemCount()>0};e.CMEGroupingMenuItem.prototype.hideIncludingChildren=function(){this.setRemoved(true);for(let e=0;e<this.m_subItems.size();e++){this.m_subItems.get(e).hideIncludingChildren()}};e.CMEGroupingMenuItem.prototype.insertSubItems=function(e,t){for(let o=0;o<t.size();o++){let n=t.get(o);n.setParent(this);this.m_subItems.insert(o+e,n)}};e.CMEGroupingMenuItem.prototype.isCompatibleTo=function(t){let o;let n=t.getActionGroup();if(e.isNull(n)||!e.XString.isEqual(this.getName(),t.getName())||this.hasDeferredSubItemsEffective()||n.hasDeferredSubItems()){o=false}else if(this.isFlat()&&n.isFlat()){if(this.isKeepTitleForFlat()!==n.isKeepTitleForFlat()){o=false}else if(this.isKeepTitleForFlat()&&(!e.XString.isEqual(this.getText(),n.getText())||!e.XString.isEqual(this.getIcon(),n.getIcon()))){o=false}else{o=n.areAllEffectiveSubItemsCompatibleTo(this.getEffectiveSubItems())}}else{o=this.isFlat()===n.isFlat()}return o};e.CMEGroupingMenuItem.prototype.isEagerlyRetrieveDeferredOptions=function(){return this.m_eagerlyRetrieveDeferredOptions||e.XStream.of(this.m_subItems).filterNullValues().map(e=>e.getActionGroup()).filterNullValues().anyMatch(e=>e.isFlatForced()&&e.isEagerlyRetrieveDeferredOptions())};e.CMEGroupingMenuItem.prototype.isEnabled=function(){let t=!this.isLoadingFinishedEffective();return e.CMEAbstractMenuItem.prototype.isEnabled.call(this)&&(this.m_disableIfLessThanNItems<1||t||this.getEffectiveSubItemCount()>=this.m_disableIfLessThanNItems)&&(this.m_disableIfLessThanNEnabledItems<1||t||this.getEffectiveEnabledSubItemCount()>=this.m_disableIfLessThanNEnabledItems)};e.CMEGroupingMenuItem.prototype.isFirstSubOptionIsDefault=function(){return this.m_firstSubOptionIsDefault};e.CMEGroupingMenuItem.prototype.isFlat=function(){return this.m_flatIfLessThanNItems===-1||this.m_flatIfLessThanNItems>0&&!this.hasDeferredSubItemsEffective()&&this.getEffectiveSubItemCount()<this.m_flatIfLessThanNItems};e.CMEGroupingMenuItem.prototype.isFlatForced=function(){return this.m_flatIfLessThanNItems===-1};e.CMEGroupingMenuItem.prototype.isKeepTitleForFlat=function(){return this.m_keepTitleForFlat};e.CMEGroupingMenuItem.prototype.isLoadingFinished=function(){return this.m_loadingFinished};e.CMEGroupingMenuItem.prototype.isLoadingFinishedEffective=function(){return!this.hasDeferredSubItems()||this.isLoadingFinished()||e.XStream.of(this.m_subItems).filterNullValues().map(e=>e.getActionGroup()).filterNullValues().anyMatch(e=>e.isFlatForced()&&e.isLoadingFinishedEffective())};e.CMEGroupingMenuItem.prototype.isVisible=function(){return e.CMEAbstractMenuItem.prototype.isVisible.call(this)&&(this.m_hideIfLessThanNItems<1||this.hasDeferredSubItemsEffective()||this.getEffectiveSubItemCount()>=this.m_hideIfLessThanNItems)};e.CMEGroupingMenuItem.prototype.releaseObject=function(){this.m_flatIfLessThanNItems=1;this.m_hideIfLessThanNItems=0;this.m_disableIfLessThanNItems=1;this.m_disableIfLessThanNEnabledItems=0;this.m_cachedSubItemCount=-1;this.m_cachedEnabledSubItemCount=-1;this.m_overflowIfMoreThanNItems=-1;this.m_subItems=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_subItems);e.CMEAbstractMenuItem.prototype.releaseObject.call(this)};e.CMEGroupingMenuItem.prototype.removeItem=function(e){this.m_subItems.removeElement(e)};e.CMEGroupingMenuItem.prototype.setDeferredOptionsRetriever=function(e,t){this.m_eagerlyRetrieveDeferredOptions=e;this.m_deferredOptionsProcedure=t};e.CMEGroupingMenuItem.prototype.setDisableIfLessThanNEnabledItems=function(e){this.m_disableIfLessThanNEnabledItems=e};e.CMEGroupingMenuItem.prototype.setDisableIfLessThanNItems=function(e){this.m_disableIfLessThanNItems=e};e.CMEGroupingMenuItem.prototype.setFirstSubOptionIsDefault=function(e){this.m_firstSubOptionIsDefault=e};e.CMEGroupingMenuItem.prototype.setFlat=function(e){this.m_flatIfLessThanNItems=e?-1:0};e.CMEGroupingMenuItem.prototype.setFlatIfLessThanNItems=function(e){this.m_flatIfLessThanNItems=e};e.CMEGroupingMenuItem.prototype.setHideIfLessThanNItems=function(e){this.m_hideIfLessThanNItems=e};e.CMEGroupingMenuItem.prototype.setKeepTitleForFlat=function(e){this.m_keepTitleForFlat=e};e.CMEGroupingMenuItem.prototype.setLoadingFinished=function(){this.m_loadingFinished=true};e.CMEGroupingMenuItem.prototype.setOverflowIfMoreThanNItems=function(e){this.m_overflowIfMoreThanNItems=e};e.CMEGroupingMenuItem.prototype.setOverflowLocalizableText=function(e){this.m_overflowLocalizableText=e};e.CMEGroupingMenuItem.prototype.setOverflowText=function(e){this.m_overflowText=e};e.CMEGroupingMenuItem.prototype.setup=function(){e.CMEAbstractMenuItem.prototype.setup.call(this);this.m_flatIfLessThanNItems=1;this.m_hideIfLessThanNItems=0;this.m_disableIfLessThanNItems=1;this.m_disableIfLessThanNEnabledItems=0;this.m_cachedSubItemCount=-1;this.m_cachedEnabledSubItemCount=-1;this.m_overflowIfMoreThanNItems=-1;this.m_subItems=e.XList.create()};e.CMELeafMenuItem=function(){};e.CMELeafMenuItem.prototype=new e.CMEAbstractMenuItem;e.CMELeafMenuItem.prototype._ff_c="CMELeafMenuItem";e.CMELeafMenuItem.create=function(){let t=new e.CMELeafMenuItem;t.setup();return t};e.CMELeafMenuItem.prototype.m_activeExtended=null;e.CMELeafMenuItem.prototype.m_activeIcon=null;e.CMELeafMenuItem.prototype.m_command=null;e.CMELeafMenuItem.prototype.m_inactiveIcon=null;e.CMELeafMenuItem.prototype.m_mainKeyboardShortcut=null;e.CMELeafMenuItem.prototype.m_partialIcon=null;e.CMELeafMenuItem.prototype.m_shortcutText=null;e.CMELeafMenuItem.prototype.m_toggle=false;e.CMELeafMenuItem.prototype.execute=function(){if(e.notNull(this.m_command)){this.m_command()}};e.CMELeafMenuItem.prototype.getActionLeaf=function(){return this};e.CMELeafMenuItem.prototype.getActiveExtended=function(){return this.m_activeExtended};e.CMELeafMenuItem.prototype.getActiveIcon=function(){return this.m_activeIcon};e.CMELeafMenuItem.prototype.getCommand=function(){return this.m_command};e.CMELeafMenuItem.prototype.getInactiveIcon=function(){return this.m_inactiveIcon};e.CMELeafMenuItem.prototype.getMainKeyboardShortcut=function(){return this.m_mainKeyboardShortcut};e.CMELeafMenuItem.prototype.getPartialIcon=function(){return this.m_partialIcon};e.CMELeafMenuItem.prototype.getShortcutText=function(){return this.m_shortcutText};e.CMELeafMenuItem.prototype.getStateIcon=function(){let t=null;if(this.isToggle()){if(this.m_activeExtended===e.TriStateBool._TRUE){t=this.m_activeIcon}else if(this.m_activeExtended===e.TriStateBool._DEFAULT){t=this.m_partialIcon}else{t=this.m_inactiveIcon}}return t};e.CMELeafMenuItem.prototype.isActive=function(){return this.m_activeExtended===e.TriStateBool._TRUE};e.CMELeafMenuItem.prototype.isCompatibleTo=function(t){let o=t.getActionLeaf();return e.XString.isEqual(this.getName(),t.getName())&&e.notNull(o)&&o.isToggle()===this.isToggle()};e.CMELeafMenuItem.prototype.isToggle=function(){return this.m_toggle};e.CMELeafMenuItem.prototype.isVisible=function(){return e.CMEAbstractMenuItem.prototype.isVisible.call(this)&&(e.XStringUtils.isNotNullAndNotEmpty(this.getText())||e.XStringUtils.isNotNullAndNotEmpty(this.getIcon()))};e.CMELeafMenuItem.prototype.releaseObject=function(){this.m_activeExtended=e.TriStateBool._FALSE;this.m_toggle=false;this.m_command=null;this.m_inactiveIcon=null;this.m_partialIcon="less";this.m_activeIcon="accept";this.m_mainKeyboardShortcut=e.XObjectExt.release(this.m_mainKeyboardShortcut);this.m_shortcutText=null;e.CMEAbstractMenuItem.prototype.releaseObject.call(this)};e.CMELeafMenuItem.prototype.setActive=function(t){this.m_activeExtended=t?e.TriStateBool._TRUE:e.TriStateBool._FALSE};e.CMELeafMenuItem.prototype.setActiveExtended=function(e){this.m_activeExtended=e};e.CMELeafMenuItem.prototype.setActiveIcon=function(e){this.m_activeIcon=e};e.CMELeafMenuItem.prototype.setCommand=function(e){this.m_command=e};e.CMELeafMenuItem.prototype.setInactiveIcon=function(e){this.m_inactiveIcon=e};e.CMELeafMenuItem.prototype.setMainKeyboardShortcut=function(t){if(e.notNull(t)){this.m_mainKeyboardShortcut=e.CMEKeyboardShortcut.create();this.m_mainKeyboardShortcut.copyFrom(t,null)}};e.CMELeafMenuItem.prototype.setPartialIcon=function(e){this.m_partialIcon=e};e.CMELeafMenuItem.prototype.setShortcutText=function(e){this.m_shortcutText=e};e.CMELeafMenuItem.prototype.setToggle=function(e){this.m_toggle=e};e.CMELeafMenuItem.prototype.setup=function(){e.CMEAbstractMenuItem.prototype.setup.call(this);this.m_activeExtended=e.TriStateBool._FALSE;this.m_inactiveIcon=null;this.m_partialIcon="less";this.m_activeIcon="accept"};e.CMELocalizableText=function(){};e.CMELocalizableText.prototype=new e.XObjectExt;e.CMELocalizableText.prototype._ff_c="CMELocalizableText";e.CMELocalizableText.create=function(){let t=new e.CMELocalizableText;t.setup();return t};e.CMELocalizableText.prototype.m_key=null;e.CMELocalizableText.prototype.m_replacements=null;e.CMELocalizableText.prototype.addReplacement=function(e){this.m_replacements.add(e)};e.CMELocalizableText.prototype.getKey=function(){return this.m_key};e.CMELocalizableText.prototype.getReplacements=function(){return this.m_replacements};e.CMELocalizableText.prototype.releaseObject=function(){this.m_key=null;this.m_replacements=e.XObjectExt.release(this.m_replacements);e.XObjectExt.prototype.releaseObject.call(this)};e.CMELocalizableText.prototype.setKey=function(e){this.m_key=e};e.CMELocalizableText.prototype.setup=function(){e.XObjectExt.prototype.setup.call(this);this.m_replacements=e.XList.create()};e.CMEToggleAction=function(){};e.CMEToggleAction.prototype=new e.CMESimpleAction;e.CMEToggleAction.prototype._ff_c="CMEToggleAction";e.CMEToggleAction.create=function(){let t=new e.CMEToggleAction;t.setup();return t};e.CMEToggleAction.prototype.m_consumer=null;e.CMEToggleAction.prototype.m_provider=null;e.CMEToggleAction.prototype.asToggleAction=function(){return this};e.CMEToggleAction.prototype.getActionType=function(){return e.CmeActionType.TOGGLE};e.CMEToggleAction.prototype.isToggled=function(t){return e.isNull(this.m_provider)?false:this.m_provider(t)===e.TriStateBool._TRUE};e.CMEToggleAction.prototype.isToggledExt=function(t){return e.isNull(this.m_provider)?e.TriStateBool._FALSE:this.m_provider(t)};e.CMEToggleAction.prototype.mapToMenuCreator=function(t){let o=e.CMELeafCreator.create();this.mapGenericPropertiesToMenuCreator(t,o);o.setToggle(true);if(e.notNull(this.m_provider)){let n=e.CMEValueFunctionalResolver.create();let r=e.CMEValueFunctionalResolver.create();if(e.notNull(t)){n.setFunction(o=>e.XBooleanValue.create(t.checkToggled(this,o)===e.TriStateBool._TRUE));r.setFunction(o=>e.XBooleanValue.create(t.checkToggled(this,o)===e.TriStateBool._DEFAULT))}else{n.setFunction(t=>e.XBooleanValue.create(this.m_provider(t)===e.TriStateBool._TRUE));r.setFunction(t=>e.XBooleanValue.create(this.m_provider(t)===e.TriStateBool._DEFAULT))}o.setActive(n);o.setPartiallyActive(r)}if(e.notNull(t)){o.setContextConsumer(e=>{t.onActionToggled(this,e)})}else{o.setContextConsumer(t=>{this.m_consumer(t,e.XBooleanValue.create(this.m_provider(t)!==e.TriStateBool._TRUE))})}return o};e.CMEToggleAction.prototype.setConsumer=function(e){this.m_consumer=e};e.CMEToggleAction.prototype.setProvider=function(t){this.m_provider=o=>t(o)?e.TriStateBool._TRUE:e.TriStateBool._FALSE};e.CMEToggleAction.prototype.setProviderExt=function(e){this.m_provider=e};e.CMEToggleAction.prototype.toggle=function(t){if(e.notNull(this.m_consumer)){this.m_consumer(t,e.XBooleanValue.create(!this.isToggled(t)))}};e.CMEToggleAction.prototype.trigger=function(e){this.toggle(e)};e.CMETriggerAction=function(){};e.CMETriggerAction.prototype=new e.CMESimpleAction;e.CMETriggerAction.prototype._ff_c="CMETriggerAction";e.CMETriggerAction.create=function(){let t=new e.CMETriggerAction;t.setup();return t};e.CMETriggerAction.prototype.m_trigger=null;e.CMETriggerAction.prototype.asTriggerAction=function(){return this};e.CMETriggerAction.prototype.getActionType=function(){return e.CmeActionType.TRIGGER};e.CMETriggerAction.prototype.mapToMenuCreator=function(t){let o=e.CMELeafCreator.create();this.mapGenericPropertiesToMenuCreator(t,o);if(e.isNull(t)){o.setContextConsumer(this.m_trigger)}else{o.setContextConsumer(e=>{t.onActionTriggered(this,e)})}return o};e.CMETriggerAction.prototype.setTrigger=function(e){this.m_trigger=e};e.CMETriggerAction.prototype.trigger=function(t){if(e.notNull(this.m_trigger)){this.m_trigger(t)}};e.CMEConditionalMenuCreator=function(){};e.CMEConditionalMenuCreator.prototype=new e.CMEAggregatedCreator;e.CMEConditionalMenuCreator.prototype._ff_c="CMEConditionalMenuCreator";e.CMEConditionalMenuCreator.create=function(){let t=new e.CMEConditionalMenuCreator;t.setup();return t};e.CMEConditionalMenuCreator.prototype.m_contextCondition=null;e.CMEConditionalMenuCreator.prototype.checkCondition=function(t,o){return e.isNull(this.m_contextCondition)?true:this.m_contextCondition.matches(t,o)};e.CMEConditionalMenuCreator.prototype.conditionalTransform=function(t,o){let n=this.checkCondition(t,o.getRootName());if(n){this.applyTransformation(o,t);let n=this.getName().resolveString(t);if(e.notNull(n)){o.addTag(n)}}return n};e.CMEConditionalMenuCreator.prototype.getMatchingTopMenuName=function(e){let t=null;let o=this.checkCondition(e,null);if(o){t=this.getName().resolveString(e)}return t};e.CMEConditionalMenuCreator.prototype.setContextCondition=function(e){this.m_contextCondition=e};e.CMEConditionalMenuCreator.prototype.transform=function(e,t){this.conditionalTransform(e,t)};e.CMEGroupCreator=function(){};e.CMEGroupCreator.prototype=new e.CMEAggregatedCreator;e.CMEGroupCreator.prototype._ff_c="CMEGroupCreator";e.CMEGroupCreator.create=function(){let t=new e.CMEGroupCreator;t.setup();return t};e.CMEGroupCreator.prototype.m_deferredOptionsRetriever=null;e.CMEGroupCreator.prototype.m_disableIfLessThanNEnabledItems=null;e.CMEGroupCreator.prototype.m_disableIfLessThanNItems=null;e.CMEGroupCreator.prototype.m_doubtfulSelectionsRetriever=null;e.CMEGroupCreator.prototype.m_eagerlyRetrieveDeferredOptions=false;e.CMEGroupCreator.prototype.m_firstSubOptionIsDefault=false;e.CMEGroupCreator.prototype.m_flatIfLessThanNItems=null;e.CMEGroupCreator.prototype.m_hideIfLessThanNItems=null;e.CMEGroupCreator.prototype.m_keepTitleForFlat=false;e.CMEGroupCreator.prototype.m_optionsRetriever=null;e.CMEGroupCreator.prototype.m_overflowIfMoreThanNItems=null;e.CMEGroupCreator.prototype.m_overflowLocalizableText=null;e.CMEGroupCreator.prototype.m_overflowText=null;e.CMEGroupCreator.prototype.m_selectionConsumer=null;e.CMEGroupCreator.prototype.m_selectionRetriever=null;e.CMEGroupCreator.prototype.m_selectionsRetriever=null;e.CMEGroupCreator.prototype.consumeOptions=function(t,o,n,r,i,s){let l;let a=this.getMenuCreators();let u=e.isNull(this.m_selectionsRetriever)?null:this.m_selectionsRetriever(t);let C=e.isNull(this.m_doubtfulSelectionsRetriever)?null:this.m_doubtfulSelectionsRetriever(t);let c=e.isNull(this.m_selectionRetriever)?null:this.m_selectionRetriever(t);let p;let E=this.resolveHighlightProcedure(o);let M=this.resolveUnHighlightProcedure(o);if(e.XCollectionUtils.hasElements(a)){let m=e.XHashMapByString.create();let f;for(p=0;p<s.size();p++){f=s.get(p);if(e.notNull(f)){m.put(f.getName(t),f)}}for(p=0;p<a.size();p++){let s=a.get(p);let f=s.getName().resolveString(o);if(m.containsKey(f)){let a=m.getByKey(f);l=n.addNewLeaf();let p=s.resolveLocalizableText(o);l.setLocalizableText(p);if(e.isNull(p)){let t=s.getText().resolveString(o);if(e.isNull(t)){t=a.getLocalizedText(o)}l.setText(t)}let _=s.resolveLocalizableExplanation(o);l.setLocalizableExplanation(_);if(e.isNull(_)){let t=s.getExplanation().resolveString(o);if(e.isNull(t)){t=a.getLocalizedExplanation(o)}l.setExplanation(t)}l.setName(f);l.setVisible(r&&a.isAvailable(o)&&s.resolveVisible(o));l.setEnabled(i&&a.isEnabled(o)&&s.resolveEnabled(o));if(c===a||e.notNull(u)&&u.contains(a)){l.setActive(true)}else if(e.notNull(C)&&C.contains(a)){l.setActiveExtended(e.TriStateBool._DEFAULT)}l.setCommand(this.getSelectionAcceptor(t,a));l.setToggle(true);let g=a.resolveHighlightProcedure(o);l.setHighlightProcedure(e.isNull(g)?E:g);let h=a.resolveUnHighlightProcedure(o);l.setUnHighlightProcedure(e.isNull(h)?M:h)}}}else{let a=e.XCollectionUtils.size(s);for(p=0;p<a;p++){let a=e.XCollectionUtils.getOptionalAtIndex(s,p).orElse(null);if(e.isNull(a)){continue}l=n.addNewLeaf();l.setName(a.getName(t));l.setText(a.getLocalizedText(t));l.setVisible(r&&a.isAvailable(t));l.setEnabled(i&&a.isEnabled(t));if(c===a||e.notNull(u)&&u.contains(a)){l.setActive(true)}else if(e.notNull(C)&&C.contains(a)){l.setActiveExtended(e.TriStateBool._DEFAULT)}l.setCommand(this.getSelectionAcceptor(t,a));l.setToggle(true);let m=a.resolveHighlightProcedure(o);l.setHighlightProcedure(e.isNull(m)?E:m);let f=a.resolveUnHighlightProcedure(o);l.setUnHighlightProcedure(e.isNull(f)?M:f)}}};e.CMEGroupCreator.prototype.getDisableIfLessThanNEnabledItems=function(){return e.notNull(this.m_disableIfLessThanNEnabledItems)?this.m_disableIfLessThanNEnabledItems:e.CMEValueLiteralResolver.getPlus1Resolver()};e.CMEGroupCreator.prototype.getDisableIfLessThanNItems=function(){return e.notNull(this.m_disableIfLessThanNItems)?this.m_disableIfLessThanNItems:e.CMEValueLiteralResolver.getPlus1Resolver()};e.CMEGroupCreator.prototype.getFlatIfLessThanNItems=function(){return e.notNull(this.m_flatIfLessThanNItems)?this.m_flatIfLessThanNItems:e.CMEValueLiteralResolver.getPlus1Resolver()};e.CMEGroupCreator.prototype.getHideIfLessThanNItems=function(){return e.notNull(this.m_hideIfLessThanNItems)?this.m_hideIfLessThanNItems:e.CMEValueLiteralResolver.getPlus1Resolver()};e.CMEGroupCreator.prototype.getOverflowIfMoreThanNItems=function(){return e.isNull(this.m_overflowIfMoreThanNItems)?e.CMEValueLiteralResolver.getMinus1Resolver():this.m_overflowIfMoreThanNItems};e.CMEGroupCreator.prototype.getOverflowText=function(){return e.isNull(this.m_overflowText)?e.CMEValueLiteralResolver.getNullResolver():this.m_overflowText};e.CMEGroupCreator.prototype.getSelectionAcceptor=function(t,o){return()=>{this.m_selectionConsumer(t,o,e.XBooleanValue.create(true))}};e.CMEGroupCreator.prototype.isGroupCreator=function(){return true};e.CMEGroupCreator.prototype.resolveOverflowLocalizableText=function(t){let o=null;if(e.notNull(this.m_overflowLocalizableText)){o=e.CMELocalizableText.create();o.setKey(this.m_overflowLocalizableText.getKey(t));let n=this.m_overflowLocalizableText.getReplacements(t);for(let e=0;e<n.size();e++){o.addReplacement(n.get(e).resolveString(t))}}return o};e.CMEGroupCreator.prototype.setDeferredOptionsRetriever=function(e,t){this.m_eagerlyRetrieveDeferredOptions=e;this.m_deferredOptionsRetriever=t};e.CMEGroupCreator.prototype.setDisableIfLessThanNEnabledItems=function(e){this.m_disableIfLessThanNEnabledItems=e};e.CMEGroupCreator.prototype.setDisableIfLessThanNItems=function(e){this.m_disableIfLessThanNItems=e};e.CMEGroupCreator.prototype.setDoubtfulSelectionsRetriever=function(e){this.m_doubtfulSelectionsRetriever=e};e.CMEGroupCreator.prototype.setEager=function(e){this.m_eagerlyRetrieveDeferredOptions=e};e.CMEGroupCreator.prototype.setFirstSubOptionIsDefault=function(e){this.m_firstSubOptionIsDefault=e};e.CMEGroupCreator.prototype.setFlatIfLessThanNItems=function(e){this.m_flatIfLessThanNItems=e};e.CMEGroupCreator.prototype.setHideIfLessThanNItems=function(e){this.m_hideIfLessThanNItems=e};e.CMEGroupCreator.prototype.setKeepTitleForFlat=function(e){this.m_keepTitleForFlat=e};e.CMEGroupCreator.prototype.setOptionsRetriever=function(e){this.m_optionsRetriever=e};e.CMEGroupCreator.prototype.setOverflowIfMoreThanNItems=function(e){this.m_overflowIfMoreThanNItems=e};e.CMEGroupCreator.prototype.setOverflowLocalizableText=function(e){this.m_overflowLocalizableText=e};e.CMEGroupCreator.prototype.setOverflowText=function(e){this.m_overflowText=e};e.CMEGroupCreator.prototype.setSelectionConsumer=function(e){this.m_selectionConsumer=e};e.CMEGroupCreator.prototype.setSelectionRetriever=function(e){this.m_selectionRetriever=e};e.CMEGroupCreator.prototype.setSelectionsRetriever=function(e){this.m_selectionsRetriever=e};e.CMEGroupCreator.prototype.transform=function(t,o){if(e.notNull(t)){let n=o.addNewGroup();let r=this.resolveEnabled(t);let i=this.resolveVisible(t);n.setOverflowPriority(this.getOverflowPriority());n.setName(this.getName().resolveString(t));n.setText(this.getText().resolveString(t));n.setExplanation(this.getExplanation().resolveString(t));n.setLocalizableExplanation(this.resolveLocalizableExplanation(t));n.setLocalizableText(this.resolveLocalizableText(t));n.setIcon(this.getIcon().resolveString(t));n.setDataHelpId(this.getDataHelpId().resolveString(t));n.setEnabled(r);n.setVisible(i);n.setKeepTitleForFlat(this.m_keepTitleForFlat);n.setFirstSubOptionIsDefault(this.m_firstSubOptionIsDefault);n.setFlatIfLessThanNItems(this.getFlatIfLessThanNItems().resolveInteger(t));n.setHideIfLessThanNItems(this.getHideIfLessThanNItems().resolveInteger(t));n.setDisableIfLessThanNItems(this.getDisableIfLessThanNItems().resolveInteger(t));n.setDisableIfLessThanNEnabledItems(this.getDisableIfLessThanNEnabledItems().resolveInteger(t));n.setOverflowIfMoreThanNItems(this.getOverflowIfMoreThanNItems().resolveInteger(t));n.setOverflowText(this.getOverflowText().resolveString(t));n.setOverflowLocalizableText(this.resolveOverflowLocalizableText(t));n.setHighlightProcedure(this.resolveHighlightProcedure(t));n.setUnHighlightProcedure(this.resolveUnHighlightProcedure(t));if(e.notNull(this.m_optionsRetriever)&&e.notNull(this.m_selectionConsumer)){let e=this.m_optionsRetriever(t);this.consumeOptions(t,t,n,i,r,e)}else if(e.notNull(this.m_deferredOptionsRetriever)&&e.notNull(this.m_selectionConsumer)){if(e.isNull(this.m_hideIfLessThanNItems)){n.setHideIfLessThanNItems(0)}if(e.isNull(this.m_flatIfLessThanNItems)){n.setFlatIfLessThanNItems(0)}if(e.isNull(this.m_disableIfLessThanNItems)){n.setDisableIfLessThanNItems(1)}if(e.isNull(this.m_disableIfLessThanNEnabledItems)){n.setDisableIfLessThanNEnabledItems(0)}let o=o=>{if(n.isLoadingFinished()){o()}else{try{this.m_deferredOptionsRetriever(t,e=>{if(!n.isReleased()){n.clearSubItems();this.consumeOptions(t,t,n,i,r,e);n.setLoadingFinished()}o()})}catch(t){n.clearSubItems();n.addNewLeaf().setText(e.XException.getMessage(t));n.setLoadingFinished();o()}}};n.setDeferredOptionsRetriever(this.m_eagerlyRetrieveDeferredOptions,o)}else{this.applyTransformation(n,t)}}};e.CMELoopedMenuCreator=function(){};e.CMELoopedMenuCreator.prototype=new e.CMEAggregatedCreator;e.CMELoopedMenuCreator.prototype._ff_c="CMELoopedMenuCreator";e.CMELoopedMenuCreator.createLoop=function(){let t=new e.CMELoopedMenuCreator;t.setup();return t};e.CMELoopedMenuCreator.prototype.m_loopParameter=null;e.CMELoopedMenuCreator.prototype.m_sorting=false;e.CMELoopedMenuCreator.prototype.getLoopParameter=function(){return this.m_loopParameter};e.CMELoopedMenuCreator.prototype.setLoopParameter=function(e){this.m_loopParameter=e};e.CMELoopedMenuCreator.prototype.setSortLooping=function(e){this.m_sorting=e};e.CMELoopedMenuCreator.prototype.transform=function(t,o){let n=t.getSubContexts(this.m_loopParameter);if(e.XCollectionUtils.hasElements(n)){let r=e.XStream.of(n);if(this.m_sorting){r=r.sorted(e.XComparatorLambda.create((t,o)=>e.XIntegerValue.create(e.DfNameTextObject.compareByTextsAndFallbackToNames(t,o))))}r.forEach(n=>{let r=t.getCopy();let i=e.CMEContext.create();r.setLocalContext(i);let s=i.addSubContext();s.copyFrom(n,null);this.applyTransformation(o,r)})}};e.CMERefocusedMenuCreator=function(){};e.CMERefocusedMenuCreator.prototype=new e.CMEAggregatedCreator;e.CMERefocusedMenuCreator.prototype._ff_c="CMERefocusedMenuCreator";e.CMERefocusedMenuCreator.createRefocus=function(){let t=new e.CMERefocusedMenuCreator;t.setup();return t};e.CMERefocusedMenuCreator.prototype.m_refocusParameter=null;e.CMERefocusedMenuCreator.prototype.getRefocusParameter=function(){return this.m_refocusParameter};e.CMERefocusedMenuCreator.prototype.setRefocusParameter=function(e){this.m_refocusParameter=e};e.CMERefocusedMenuCreator.prototype.transform=function(t,o){let n=t.getSubContexts(this.m_refocusParameter);if(e.XCollectionUtils.hasElements(n)){let r=t.getCopy();let i=e.CMEContext.create();r.setLocalContext(i);for(let e=0;e<n.size();e++){let t=n.get(e);let o=i.addSubContext();o.copyFrom(t,null)}this.applyTransformation(o,r)}};e.CMEConditionalType=function(){};e.CMEConditionalType.prototype=new e.XConstant;e.CMEConditionalType.prototype._ff_c="CMEConditionalType";e.CMEConditionalType.EQUAL=null;e.CMEConditionalType.EXISTS=null;e.CMEConditionalType.MAX_SIZE=null;e.CMEConditionalType.MIN_SIZE=null;e.CMEConditionalType.NOT_EQUAL=null;e.CMEConditionalType.NOT_EXISTS=null;e.CMEConditionalType.s_instances=null;e.CMEConditionalType.create=function(t){let o=new e.CMEConditionalType;o._setupInternal(t);e.CMEConditionalType.s_instances.put(t,o);return o};e.CMEConditionalType.staticSetup=function(){e.CMEConditionalType.s_instances=e.XHashMapByString.create();e.CMEConditionalType.EXISTS=e.CMEConditionalType.create("Exists");e.CMEConditionalType.NOT_EXISTS=e.CMEConditionalType.create("NotExists");e.CMEConditionalType.EQUAL=e.CMEConditionalType.create("Equal");e.CMEConditionalType.NOT_EQUAL=e.CMEConditionalType.create("NotEqual");e.CMEConditionalType.MIN_SIZE=e.CMEConditionalType.create("MinSize");e.CMEConditionalType.MAX_SIZE=e.CMEConditionalType.create("MaxSize")};e.CMEMenuExtensionOperationType=function(){};e.CMEMenuExtensionOperationType.prototype=new e.XConstant;e.CMEMenuExtensionOperationType.prototype._ff_c="CMEMenuExtensionOperationType";e.CMEMenuExtensionOperationType.APPEND_INTO=null;e.CMEMenuExtensionOperationType.INSERT_AFTER=null;e.CMEMenuExtensionOperationType.INSERT_BEFORE=null;e.CMEMenuExtensionOperationType.PREPEND_INTO=null;e.CMEMenuExtensionOperationType.REDEFINE=null;e.CMEMenuExtensionOperationType.s_instances=null;e.CMEMenuExtensionOperationType.create=function(t){let o=new e.CMEMenuExtensionOperationType;o._setupInternal(t);e.CMEMenuExtensionOperationType.s_instances.put(t,o);return o};e.CMEMenuExtensionOperationType.lookup=function(t){return e.CMEMenuExtensionOperationType.s_instances.getByKey(t)};e.CMEMenuExtensionOperationType.staticSetup=function(){e.CMEMenuExtensionOperationType.s_instances=e.XHashMapByString.create();e.CMEMenuExtensionOperationType.PREPEND_INTO=e.CMEMenuExtensionOperationType.create("PrependInto");e.CMEMenuExtensionOperationType.APPEND_INTO=e.CMEMenuExtensionOperationType.create("AppendInto");e.CMEMenuExtensionOperationType.REDEFINE=e.CMEMenuExtensionOperationType.create("Redefine");e.CMEMenuExtensionOperationType.INSERT_AFTER=e.CMEMenuExtensionOperationType.create("InsertAfter");e.CMEMenuExtensionOperationType.INSERT_BEFORE=e.CMEMenuExtensionOperationType.create("InsertBefore")};e.ContextMenuEngineImplModule=function(){};e.ContextMenuEngineImplModule.prototype=new e.DfModule;e.ContextMenuEngineImplModule.prototype._ff_c="ContextMenuEngineImplModule";e.ContextMenuEngineImplModule.s_module=null;e.ContextMenuEngineImplModule.getInstance=function(){if(e.isNull(e.ContextMenuEngineImplModule.s_module)){e.DfModule.checkInitialized(e.ContextMenuEngineModule.getInstance());e.ContextMenuEngineImplModule.s_module=e.DfModule.startExt(new e.ContextMenuEngineImplModule);e.CMEConditionalType.staticSetup();e.CMEMenuExtensionOperationType.staticSetup();e.CMEFactory.setFactory(e.CMEFactoryImpl.create());e.DfModule.stopExt(e.ContextMenuEngineImplModule.s_module)}return e.ContextMenuEngineImplModule.s_module};e.ContextMenuEngineImplModule.prototype.getName=function(){return"ff3410.contextmenu.engine.impl"};e.ContextMenuEngineImplModule.getInstance();return e});
//# sourceMappingURL=ff3410.contextmenu.engine.impl.js.map