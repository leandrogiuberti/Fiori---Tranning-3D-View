/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff4000.protocol.ina"],function(t){"use strict";t.InAProcessorResult=function(){};t.InAProcessorResult.prototype=new t.XObject;t.InAProcessorResult.prototype._ff_c="InAProcessorResult";t.InAProcessorResult.create=function(e){return t.InAProcessorResult.createWithContentType(e,null)};t.InAProcessorResult.createWithContentType=function(e,r){let s=new t.InAProcessorResult;s.m_structure=e;s.m_supportedContentType=r;return s};t.InAProcessorResult.prototype.m_structure=null;t.InAProcessorResult.prototype.m_supportedContentType=null;t.InAProcessorResult.prototype.getStructure=function(){return this.m_structure};t.InAProcessorResult.prototype.getSupportedContentType=function(){return this.m_supportedContentType};t.InAProcessorResult.prototype.releaseObject=function(){t.XObject.prototype.releaseObject.call(this);this.m_structure=null;this.m_supportedContentType=null};t.ProcessorConstants={CUSTOM_DIM:"CustomDimension1",CUSTOM_DIM_DESCRIPTION:"Measures",CUSTOM_DIM_KEY:"Measures",CUSTOM_DIM_KEY_DESCRIPTION:"CustomDimension1 key",CUSTOM_DIM_TEXT:"Measures.Description",CUSTOM_DIM_TEXT_DESCRIPTION:"CustomDimension1 text",MD_PROPERTY_SAP_DISPLAY_FORMAT_UPPERCASE:"UpperCase",SD_AGGREGATION:"aggregation",SD_ATTRIBUTES:"attributes",SD_AXIS_POSITION:"axis_position",SD_BEGIN_POS_IN_TUPLE:"begin_position_in_tuple",SD_COLUMNS:"Columns",SD_COLUMN_NAME_IN_INPUT:"column_name_in_input",SD_COMPLEX_UNITS:"complex_units",SD_CUBE_AXES:"cube_axes",SD_CUBE_UNIT:"cube_unit",SD_CUBE_UNIT_HANDLER_KEY:"cube_unit_handler_key",SD_CUBE_UNIT_HANDLER_VALUE:"cube_unit_handler_value",SD_CURRENT_TYPE:"current_type",SD_DATA_SOURCE_KEY:"data_source_key",SD_DESCRIPTION:"description",SD_DIGITS_SHIFT:"digits_shift",SD_DIMENSIONS:"dimensions",SD_DIMENSION_MAP:"dimension_map",SD_DIMENSION_MEMBERS:"view_dimension_members",SD_DIMENSION_TUPLES:"dimension_tuples",SD_DIMENSION_TYPE:"dimension_type",SD_ENTITIES:"entities",SD_EXISTS_RESTRICTION:"exists_restriction",SD_EXISTS_UNIT_CONVERSION:"exists_unit_conversion",SD_EXPONENT:"exp",SD_FRACT_DIGITS:"fract_digits",SD_HAS_EXCEPTION_SETTINGS:"EPM_has_exception_settings",SD_HIERARCHY_DISPLAYED:"hierarchy_displayed",SD_ID:"id",SD_IS_AGGREGATABLE:"is_aggregatable",SD_IS_DESCRIPTION_COLUMN:"is_description_column",SD_IS_DESCRIPTION_FROM_KEY_COLUMN:"is_description_from_key_column",SD_IS_DIMENSION_GROUP:"is_dimension_group",SD_IS_HIDDEN:"is_hidden",SD_IS_KEY_ATTRIBUTE:"is_key_attribute",SD_IS_MEASURE:"is_measure",SD_IS_MODELED:"is_modeled",SD_IS_TEMPORARY:"is_temporary",SD_IS_VIRTUAL_DESCRIPTION:"is_virtual_description",SD_KEY:"key",SD_KEY_COLUMN_NAME:"key_column_name",SD_LAST_CHANGED_AT:"last_changed_at",SD_MEMBERS:"members",SD_MEMBER_COLS:"columns",SD_MEMBER_COLS_COLUMN_NAME:"column_name",SD_MEMBER_COLS_COLUMN_TYPE:"column_type",SD_MEMBER_REF_COLS:"reference_columns",SD_MEMBER_REF_COLS_COL_NAME:"column_name",SD_MEMBER_REF_COLS_NAME:"reference_name",SD_MESSAGE_VERSION:"message_version",SD_NAME:"name",SD_NAME_IN_VIEW:"name_in_view",SD_PART_OF_RESULT_GRID:"is_part_of_result_grid",SD_RESULT_STRUCTURE:"result_structure",SD_RESULT_STRUCTURE_SEMANTIC_MEMBERS:"RESULT_STRUCTURE_SEMANTIC_MEMBERS",SD_ROWS:"Rows",SD_SQL_TYPE:"sql_type",SD_SQL_TYPE_STRG:"STRING",SD_STRING_VALUE:"string_value",SD_TUPLE:"tuple",SD_TYPE:"type",SD_TYPE_INT_DIGITS:"int_digits",SD_TYPE_VALUE_CLASS:"value_class",SD_UNIQUE_NAME:"unique_name",SD_UNIT_INDEX:"unit_index",SD_UNIT_TYPE:"unit_type",SD_USE_UNIQUE_ATTRIBUTE_NAME:"use_unique_attribute_name",SD_VALUE:"value",SD_VALUES:"values",SD_VALUE_CLASS:"value_class",SD_VALUE_CLASS_STRING:"VALUE_CLASS_STRING",SD_VALUE_EXCEPTION_NORMAL:"VALUE_EXCEPTION_NORMAL",SD_VALUE_EXCEPTION_TYPE:"value_exception_type",SD_VIEW_COLUMN:"view_column",SD_VIEW_COLUMNS:"view_columns",SERVICE_MD_DIM_OBJECT_NAME:"ObjectName",SERVICE_MD_DIM_OBJECT_NAME_TEXT:"ObjectName.TEXT",SERVICE_MD_TEXT_ATTRIBUTE_SUFFIX:".TEXT"};t.VirtualRpcIdentifier=function(){};t.VirtualRpcIdentifier.prototype=new t.XObject;t.VirtualRpcIdentifier.prototype._ff_c="VirtualRpcIdentifier";t.VirtualRpcIdentifier.create=function(e,r,s,n){let o=new t.VirtualRpcIdentifier;o.m_processName=e;o.m_requestStructure=r;o.m_request=s;o.m_allRequests=n;return o};t.VirtualRpcIdentifier.prototype.m_allRequests=null;t.VirtualRpcIdentifier.prototype.m_processName=null;t.VirtualRpcIdentifier.prototype.m_request=null;t.VirtualRpcIdentifier.prototype.m_requestStructure=null;t.VirtualRpcIdentifier.prototype.getAllRequests=function(){return this.m_allRequests};t.VirtualRpcIdentifier.prototype.getProcessName=function(){return this.m_processName};t.VirtualRpcIdentifier.prototype.getRequest=function(){return this.m_request};t.VirtualRpcIdentifier.prototype.getRequestStructure=function(){return this.m_requestStructure};t.VirtualRpcIdentifier.prototype.releaseObject=function(){this.m_processName=null;this.m_requestStructure=null;this.m_request=null;this.m_allRequests=null;t.XObject.prototype.releaseObject.call(this)};t.ProcessorGSAConstants={ATTRIBUTES:"Attributes",DEFAULT_VALUE:"DefaultValue",DESCRIPTION:"Description",DIMENSIONS:"Dimensions",IS_DEFAULT_TEXT:"IsDefaultText",IS_KEY:"IsKey",IS_MANDATORY:"IsMandatory",IS_VARIABLE:"IsVariable",LENGTH:"Length",MEASURES:"Measures",NAME:"Name",NUMERIC_PRECISION:"NumericPrecision",NUMERIC_SCALE:"NumericScale",PARAMETERS:"Parameters",RESPONSE_PROPERTY:"ResponseProperty",TYPE:"Type",TYPE_BODY:"Body",TYPE_HEADER:"Header",TYPE_PATH:"Path",TYPE_QUERY:"Query",VALUE_TYPE:"ValueType"};t.GSAMdProperty=function(){};t.GSAMdProperty.prototype=new t.XObject;t.GSAMdProperty.prototype._ff_c="GSAMdProperty";t.GSAMdProperty.create=function(e,r,s,n){let o=new t.GSAMdProperty;o.m_name=e;o.m_description=r;o.m_dataType=s;o.m_maxLength=n;return o};t.GSAMdProperty.createMeasure=function(e,r,s,n,o){let i=new t.GSAMdProperty;i.m_name=e;i.m_description=r;i.m_dataType=s;i.m_precision=n>0?t.XIntegerValue.create(n):null;i.m_scale=o>0?t.XIntegerValue.create(o):null;return i};t.GSAMdProperty.prototype.m_dataType=null;t.GSAMdProperty.prototype.m_description=null;t.GSAMdProperty.prototype.m_maxLength=0;t.GSAMdProperty.prototype.m_name=null;t.GSAMdProperty.prototype.m_precision=null;t.GSAMdProperty.prototype.m_scale=null;t.GSAMdProperty.prototype.getDataType=function(){return this.m_dataType};t.GSAMdProperty.prototype.getDescription=function(){return this.m_description};t.GSAMdProperty.prototype.getDisplayFormat=function(){return null};t.GSAMdProperty.prototype.getMaxLength=function(){return this.m_maxLength};t.GSAMdProperty.prototype.getName=function(){return this.m_name};t.GSAMdProperty.prototype.getNumericPrecision=function(){return this.m_precision};t.GSAMdProperty.prototype.getNumericScale=function(){return this.m_scale};t.GSAMdProperty.prototype.getUnitPropertyName=function(){return null};t.GSAMdProperty.prototype.getUnitTextPropertyName=function(){return null};t.GSAMdProperty.prototype.getUnitType=function(){return null};t.GSAMdProperty.prototype.isFilterable=function(){return false};t.GSAMdProperty.prototype.isSortable=function(){return false};t.GSAMdProperty.prototype.releaseObject=function(){t.XObject.prototype.releaseObject.call(this);this.m_name=null;this.m_description=null;this.m_dataType=null;this.m_precision=t.XObjectExt.release(this.m_precision);this.m_scale=t.XObjectExt.release(this.m_scale)};t.ProcessorODataConstants={MD_ASSOCIATION:"Association",MD_COMPLEX_TYPE:"ComplexType",MD_DATA_SERVICES:"edmx:DataServices",MD_DEPENDENT:"Dependent",MD_END:"End",MD_ENTITY_CONTAINER:"EntityContainer",MD_ENTITY_DATA_MODEL:"edmx:Edmx",MD_ENTITY_SET:"EntitySet",MD_ENTITY_TYPE:"EntityType",MD_LINK:"link",MD_NAVIGATION_PROPERTY:"NavigationProperty",MD_PRINCIPAL:"Principal",MD_PROPERTY:"Property",MD_PROPERTY_DATA_SERVICE_VERSION:"-m:DataServiceVersion",MD_PROPERTY_ENTITY_TYPE:"-EntityType",MD_PROPERTY_FROM_ROLE:"-FromRole",MD_PROPERTY_HREF:"-href",MD_PROPERTY_MAX_LENGTH:"-MaxLength",MD_PROPERTY_MULTIPLICITY:"-Multiplicity",MD_PROPERTY_NAME:"-Name",MD_PROPERTY_NAMESPACE:"-Namespace",MD_PROPERTY_PRECISION:"-Precision",MD_PROPERTY_REF:"PropertyRef",MD_PROPERTY_RELATIONSHIP:"-Relationship",MD_PROPERTY_ROLE:"-Role",MD_PROPERTY_SAP_AGGREGATION_ROLE:"-sap:aggregation-role",MD_PROPERTY_SAP_AGGREGATION_ROLE_MEASURE:"measure",MD_PROPERTY_SAP_DISPLAY_FORMAT:"-sap:display-format",MD_PROPERTY_SAP_FILTERABLE:"-sap:filterable",MD_PROPERTY_SAP_LABEL:"-sap:label",MD_PROPERTY_SAP_MEMBER_TITLE:"sap:member-title",MD_PROPERTY_SAP_QUICKINFO:"-sap:quickinfo",MD_PROPERTY_SAP_SEMANTICS:"-sap:semantics",MD_PROPERTY_SAP_SORTABLE:"-sap:sortable",MD_PROPERTY_SAP_SUPPORTED_FORMATS:"-sap:supported-formats",MD_PROPERTY_SAP_TEXT:"-sap:text",MD_PROPERTY_SAP_UNIT:"-sap:unit",MD_PROPERTY_SCALE:"-Scale",MD_PROPERTY_TITLE:"-title",MD_PROPERTY_TO_ROLE:"-ToRole",MD_PROPERTY_TYPE:"-Type",MD_PROPERTY_VERSION:"-Version",MD_REFERENTIAL_CONSTRAINT:"ReferentialConstraint",MD_SCHEMA:"Schema",MD_SEMANTICS_CURRENCY:"currency-code",MD_SEMANTICS_UNIT_OF_MEASURE:"unit-of-measure",MD_VALUETYPE_BOOLEAN:"Edm.Boolean",MD_VALUETYPE_DATETIME:"Edm.DateTime",MD_VALUETYPE_DECIMAL:"Edm.Decimal",MD_VALUETYPE_DOUBLE:"Edm.Double",MD_VALUETYPE_GUID:"Edm.Guid",MD_VALUETYPE_INTEGER:"Edm.Int",MD_VALUETYPE_SINGLE:"Edm.Single",MD_VALUETYPE_STRING:"Edm.String",MD_VALUETYPE_TIME:"Edm.Time",PARAM_METADATA:"$metadata",RS_APP_COLLECTION:"app:collection",RS_APP_SERVICE:"app:service",RS_APP_WORKSPACE:"app:workspace",RS_COLLECTION:"collection",RS_CONTENT:"content",RS_D:"d",RS_ENTITY_SETS:"EntitySets",RS_ENTRY:"entry",RS_FEED:"feed",RS_INLINE:"m:inline",RS_METADATA:"__metadata",RS_NAME:"name",RS_PROPERTIES:"m:properties",RS_PROPERTY_PREFIX:"d:",RS_RESULTS:"results",RS_SERVICE:"service",RS_TITLE:"atom:title",RS_VALUE:"value",RS_WORKSPACE:"workspace",URI_FILTER_AND:"and",URI_FILTER_BRACKET_CLOSE:")",URI_FILTER_BRACKET_OPEN:"(",URI_FILTER_EQUAL:"eq",URI_FILTER_GREATER:"gt",URI_FILTER_GREATER_EQUAL:"ge",URI_FILTER_INV_COMMA:"'",URI_FILTER_LESS:"lt",URI_FILTER_LESS_EQUAL:"le",URI_FILTER_NOT:"not",URI_FILTER_NOT_EQUAL:"ne",URI_FILTER_OR:"or",URI_FILTER_SPACE:" ",URI_FILTER_SUBSTRING:"substringof({0},{1}) eq true",URI_PARAM_EXPAND:"$expand",URI_PARAM_FILTER:"$filter",URI_PARAM_ORDERBY:"$orderby",URI_PARAM_SELECT:"$select",URI_PARAM_SKIP:"$skip",URI_PARAM_TOP:"$top"};t.ODataProperty=function(){};t.ODataProperty.prototype=new t.XObject;t.ODataProperty.prototype._ff_c="ODataProperty";t.ODataProperty.create=function(e,r){return t.ODataProperty.createWithPrefix(e,r,null)};t.ODataProperty.createWithPrefix=function(e,r,s){let n=new t.ODataProperty;n.setupProperty(e,r,t.notNull(s)?t.XStringUtils.concatenate2(s,"/"):null);return n};t.ODataProperty.prototype.m_isMeasure=false;t.ODataProperty.prototype.m_namePrefix=null;t.ODataProperty.prototype.m_precision=null;t.ODataProperty.prototype.m_property=null;t.ODataProperty.prototype.m_scale=null;t.ODataProperty.prototype.m_unitPropertyName=null;t.ODataProperty.prototype.m_unitTextPropertyName=null;t.ODataProperty.prototype.m_unitType=null;t.ODataProperty.prototype.getDataType=function(){return this.getDataTypeWithDefault("String")};t.ODataProperty.prototype.getDataTypeWithDefault=function(e){let r=this.getOriginDataType();if(t.XString.isEqual(r,t.ProcessorODataConstants.MD_VALUETYPE_STRING)||t.XString.isEqual(r,t.ProcessorODataConstants.MD_VALUETYPE_GUID)){return"String"}if(t.XString.isEqual(r,t.ProcessorODataConstants.MD_VALUETYPE_BOOLEAN)){return"Bool"}if(t.XString.containsString(r,t.ProcessorODataConstants.MD_VALUETYPE_INTEGER)){return"Int"}if(t.XString.isEqual(r,t.ProcessorODataConstants.MD_VALUETYPE_DOUBLE)){return"Double"}if(t.XString.isEqual(r,t.ProcessorODataConstants.MD_VALUETYPE_DECIMAL)||t.XString.isEqual(r,t.ProcessorODataConstants.MD_VALUETYPE_SINGLE)){return"DecimalFloat"}if(t.XString.isEqual(r,t.ProcessorODataConstants.MD_VALUETYPE_TIME)){return"Time"}if(t.XString.isEqual(r,t.ProcessorODataConstants.MD_VALUETYPE_DATETIME)){return"Timestamp"}return e};t.ODataProperty.prototype.getDescription=function(){if(this.m_property.hasStringByKey(t.ProcessorODataConstants.MD_PROPERTY_SAP_QUICKINFO)){return this.m_property.getStringByKey(t.ProcessorODataConstants.MD_PROPERTY_SAP_QUICKINFO)}else if(this.m_property.hasStringByKey(t.ProcessorODataConstants.MD_PROPERTY_SAP_LABEL)){return this.m_property.getStringByKey(t.ProcessorODataConstants.MD_PROPERTY_SAP_LABEL)}return this.getNameWithoutPrefix()};t.ODataProperty.prototype.getDisplayFormat=function(){return t.PrUtils.getStringValueProperty(this.m_property,t.ProcessorODataConstants.MD_PROPERTY_SAP_DISPLAY_FORMAT,null)};t.ODataProperty.prototype.getMaxLength=function(){return t.XInteger.convertFromStringWithDefault(this.m_property.getStringByKeyExt(t.ProcessorODataConstants.MD_PROPERTY_MAX_LENGTH,"-1"),-1)};t.ODataProperty.prototype.getName=function(){return this.getNameWithPrefix(this.m_property)};t.ODataProperty.prototype.getNameWithPrefix=function(e){let r=t.PrUtils.getStringValueProperty(e,t.ProcessorODataConstants.MD_PROPERTY_NAME,null);return t.XStringUtils.concatenate2(this.m_namePrefix,r)};t.ODataProperty.prototype.getNameWithoutPrefix=function(){return t.PrUtils.getStringValueProperty(this.m_property,t.ProcessorODataConstants.MD_PROPERTY_NAME,null)};t.ODataProperty.prototype.getNumericPrecision=function(){return this.m_precision};t.ODataProperty.prototype.getNumericScale=function(){return this.m_scale};t.ODataProperty.prototype.getOriginDataType=function(){return this.m_property.getStringByKey(t.ProcessorODataConstants.MD_PROPERTY_TYPE)};t.ODataProperty.prototype.getUnitPropertyName=function(){return this.m_unitPropertyName};t.ODataProperty.prototype.getUnitTextPropertyName=function(){return this.m_unitTextPropertyName};t.ODataProperty.prototype.getUnitType=function(){return this.m_unitType};t.ODataProperty.prototype.getUnitTypeFromProperty=function(e){if(t.notNull(e)){let r=e.getStringByKey(t.ProcessorODataConstants.MD_PROPERTY_SAP_SEMANTICS);if(t.XString.isEqual(r,t.ProcessorODataConstants.MD_SEMANTICS_CURRENCY)){return"CUR"}if(t.XString.isEqual(r,t.ProcessorODataConstants.MD_SEMANTICS_UNIT_OF_MEASURE)){return"UNI"}}return"UDF"};t.ODataProperty.prototype.isComplexDataType=function(){return this.getDataTypeWithDefault(null)===null};t.ODataProperty.prototype.isFilterable=function(){return t.PrUtils.getBooleanValueProperty(this.m_property,t.ProcessorODataConstants.MD_PROPERTY_SAP_FILTERABLE,true)};t.ODataProperty.prototype.isMeasure=function(){return this.m_isMeasure};t.ODataProperty.prototype.isSortable=function(){return t.PrUtils.getBooleanValueProperty(this.m_property,t.ProcessorODataConstants.MD_PROPERTY_SAP_SORTABLE,true)};t.ODataProperty.prototype.releaseObject=function(){t.XObject.prototype.releaseObject.call(this);this.m_property=null;this.m_namePrefix=null;this.m_unitType=null;this.m_unitPropertyName=null;this.m_unitTextPropertyName=null;this.m_precision=t.XObjectExt.release(this.m_precision);this.m_scale=t.XObjectExt.release(this.m_scale)};t.ODataProperty.prototype.setupProperty=function(e,r,s){this.m_property=e;this.m_namePrefix=t.XStringUtils.isNotNullAndNotEmpty(s)?s:"";let n=e.getStringByKey(t.ProcessorODataConstants.MD_PROPERTY_SAP_UNIT);let o=e.getStringByKey(t.ProcessorODataConstants.MD_PROPERTY_SAP_AGGREGATION_ROLE);if(t.XString.isEqual(o,t.ProcessorODataConstants.MD_PROPERTY_SAP_AGGREGATION_ROLE_MEASURE)){this.m_isMeasure=true}else{let e=this.getUnitTypeFromProperty(t.PrUtils.getStructureWithKeyValuePair(r,t.ProcessorODataConstants.MD_PROPERTY_NAME,n));this.m_isMeasure=!t.XString.isEqual(e,"UDF")}if(this.m_isMeasure){let s=t.PrUtils.getStructureWithKeyValuePair(r,t.ProcessorODataConstants.MD_PROPERTY_NAME,n);this.m_unitType=this.getUnitTypeFromProperty(s);if(t.notNull(s)&&!t.XString.isEqual(this.m_unitType,"UDF")){this.m_unitPropertyName=this.getNameWithPrefix(s);let e=s.getStringByKey(t.ProcessorODataConstants.MD_PROPERTY_SAP_TEXT);if(t.PrUtils.getStructureWithKeyValuePair(r,t.ProcessorODataConstants.MD_PROPERTY_NAME,e)!==null){this.m_unitTextPropertyName=t.XStringUtils.concatenate2(this.m_namePrefix,e)}}if(e.containsKey(t.ProcessorODataConstants.MD_PROPERTY_PRECISION)){let r=e.getStringByKey(t.ProcessorODataConstants.MD_PROPERTY_PRECISION);this.m_precision=t.XIntegerValue.create(t.XInteger.convertFromString(r))}if(e.containsKey(t.ProcessorODataConstants.MD_PROPERTY_SCALE)){let r=e.getStringByKey(t.ProcessorODataConstants.MD_PROPERTY_SCALE);this.m_scale=t.XIntegerValue.create(t.XInteger.convertFromString(r))}}};t.ODataResultEntry=function(){};t.ODataResultEntry.prototype=new t.XObject;t.ODataResultEntry.prototype._ff_c="ODataResultEntry";t.ODataResultEntry.create=function(e){let r=new t.ODataResultEntry;r.setupResultEntry(e);return r};t.ODataResultEntry.prototype.m_properties=null;t.ODataResultEntry.prototype.getElement=function(e,r){let s=t.PrUtils.getProperty(this.m_properties,r);if(t.isNull(s)){s=t.PrUtils.getProperty(this.m_properties,t.XStringUtils.concatenate2(t.ProcessorODataConstants.RS_PROPERTY_PREFIX,r))}return t.isNull(s)||s.isStructure()?null:s};t.ODataResultEntry.prototype.isEqualTo=function(e){if(t.isNull(e)){return false}if(e===this){return true}return t.XObjectExt.areEqual(this.m_properties,e.m_properties)};t.ODataResultEntry.prototype.releaseObject=function(){t.XObject.prototype.releaseObject.call(this);this.m_properties=null};t.ODataResultEntry.prototype.setupResultEntry=function(e){let r=t.PrUtils.getStructureProperty(e,t.ProcessorODataConstants.RS_CONTENT);this.m_properties=t.PrUtils.getStructureProperty(r,t.ProcessorODataConstants.RS_PROPERTIES);if(t.isNull(this.m_properties)){this.m_properties=e}if(t.notNull(this.m_properties)){this.m_properties.remove(t.ProcessorODataConstants.RS_METADATA)}};t.ODataResultEntry.prototype.toString=function(){return this.m_properties.toString()};t.ODataServiceResultEntry=function(){};t.ODataServiceResultEntry.prototype=new t.XObject;t.ODataServiceResultEntry.prototype._ff_c="ODataServiceResultEntry";t.ODataServiceResultEntry.create=function(e){let r=new t.ODataServiceResultEntry;r.m_entitySet=e;return r};t.ODataServiceResultEntry.prototype.m_entitySet=null;t.ODataServiceResultEntry.prototype.getElement=function(e,r){if(this.m_entitySet.isString()){return this.m_entitySet}let s=this.m_entitySet.asStructure();if(t.XString.endsWith(r,t.ProcessorConstants.SERVICE_MD_TEXT_ATTRIBUTE_SUFFIX)){if(s.containsKey(t.ProcessorODataConstants.MD_PROPERTY_SAP_MEMBER_TITLE)){return this.getProperty(s,t.ProcessorODataConstants.MD_PROPERTY_SAP_MEMBER_TITLE)}if(s.containsKey(t.ProcessorODataConstants.RS_TITLE)){return this.getProperty(s,t.ProcessorODataConstants.RS_TITLE)}if(s.containsKey(t.ProcessorODataConstants.MD_PROPERTY_SAP_LABEL)){return this.getProperty(s,t.ProcessorODataConstants.MD_PROPERTY_SAP_LABEL)}}if(s.containsKey(t.ProcessorODataConstants.MD_PROPERTY_HREF)){return t.PrUtils.getProperty(s,t.ProcessorODataConstants.MD_PROPERTY_HREF)}if(s.containsKey(t.ProcessorODataConstants.RS_NAME)){return t.PrUtils.getProperty(s,t.ProcessorODataConstants.RS_NAME)}if(s.containsKey(t.ProcessorODataConstants.RS_TITLE)){return this.getProperty(s,t.ProcessorODataConstants.RS_TITLE)}return null};t.ODataServiceResultEntry.prototype.getProperty=function(e,r){let s=t.PrUtils.getProperty(e,r);if(t.notNull(s)&&s.isStructure()&&s.asStructure().containsKey(r)){return t.PrUtils.getProperty(s.asStructure(),r)}return s};t.ODataServiceResultEntry.prototype.releaseObject=function(){t.XObject.prototype.releaseObject.call(this);this.m_entitySet=null};t.ODataServiceResultEntry.prototype.toString=function(){return this.m_entitySet.toString()};t.ProcessorSCPConstants={FIELDS:"fields",FIELD_DISPLAY_NAME:"vendorDisplayName",FIELD_NATIVE_TYPE:"vendorNativeType",FIELD_PATH:"path",FIELD_TYPE:"type",FIELD_TYPE_BOOLEAN:"boolean",FIELD_TYPE_DATE:"date",FIELD_TYPE_DATE_TIME:"datetime",FIELD_TYPE_NUMBER:"number",FIELD_TYPE_STRING:"string",FIELD_VENDOR_PATH:"vendorPath",GET:"get",OPERATION_ID:"operationId",PARAMETERS:"parameters",PARAMETER_DESCRIPTION:"description",PARAMETER_IN:"in",PARAMETER_IN_PATH:"path",PARAMETER_IN_QUERY:"query",PARAMETER_NAME:"name",PARAMETER_REQUIRED:"required",PARAMETER_TYPE:"type",PARAMETER_TYPE_BOOLEAN:"boolean",PARAMETER_TYPE_INTEGER:"integer",PATHS:"paths",SUMMARY:"summary",URI_DOCS:"/docs",URI_DOCS_PARAM_BASIC:"basic",URI_DOCS_PARAM_DISCOVERY:"discovery",URI_DOCS_PARAM_REFERENCES:"resolveReferences",URI_METADATA:"/metadata",URI_OBJECTS:"/objects"};t.SCPMdProperty=function(){};t.SCPMdProperty.prototype=new t.XObject;t.SCPMdProperty.prototype._ff_c="SCPMdProperty";t.SCPMdProperty.create=function(e,r,s){return t.SCPMdProperty.createWithFilterFlag(e,r,s,false)};t.SCPMdProperty.createWithFilterFlag=function(e,r,s,n){let o=new t.SCPMdProperty;o.m_name=e;o.m_description=r;o.m_dataType=s;o.m_filterable=n;return o};t.SCPMdProperty.prototype.m_dataType=null;t.SCPMdProperty.prototype.m_description=null;t.SCPMdProperty.prototype.m_filterable=false;t.SCPMdProperty.prototype.m_name=null;t.SCPMdProperty.prototype.getDataType=function(){return this.m_dataType};t.SCPMdProperty.prototype.getDescription=function(){return this.m_description};t.SCPMdProperty.prototype.getDisplayFormat=function(){return null};t.SCPMdProperty.prototype.getMaxLength=function(){return-1};t.SCPMdProperty.prototype.getName=function(){return this.m_name};t.SCPMdProperty.prototype.getNumericPrecision=function(){return null};t.SCPMdProperty.prototype.getNumericScale=function(){return null};t.SCPMdProperty.prototype.getUnitPropertyName=function(){return null};t.SCPMdProperty.prototype.getUnitTextPropertyName=function(){return null};t.SCPMdProperty.prototype.getUnitType=function(){return"UDF"};t.SCPMdProperty.prototype.isFilterable=function(){return this.m_filterable};t.SCPMdProperty.prototype.isSortable=function(){return false};t.SCPMdProperty.prototype.releaseObject=function(){t.XObject.prototype.releaseObject.call(this);this.m_name=null;this.m_description=null;this.m_dataType=null};t.InAServerInfoBuilder={addCapabilityToList:function(e,r){if(t.XStringUtils.isNullOrEmpty(e)){return}let s=r.addNewStructure();s.putString("Capability",e);s.putInteger("MinVersion",100);s.putInteger("MaxVersion",104)},addServiceToResponse:function(e,r,s){let n=e.addNewStructure();n.putString("Service",r);let o=n.putNewList("Capabilities");if(t.notNull(s)){let e=s.size();for(let r=0;r<e;r++){t.InAServerInfoBuilder.addCapabilityToList(s.get(r),o)}}n.putNewList("CapabilitiesDev")},buildServerInfoResponse:function(e,r,s){let n=t.PrFactory.createStructure();let o=n.putNewStructure("ServerInfo");o.putString("Client","000000000000000000");o.putStringNotNull("UserLanguageCode",r);o.putString("ServerType","Virtual InA");o.putStringNotNull("SystemId",s);let i=n.putNewList("Services");if(t.XCollectionUtils.hasElements(e)){let r=e.getKeysAsIterator();while(r.hasNext()){let s=r.next();t.InAServerInfoBuilder.addServiceToResponse(i,s,e.getByKey(s))}}return n}};t.InAParser=function(){};t.InAParser.prototype=new t.XObject;t.InAParser.prototype._ff_c="InAParser";t.InAParser.getName=function(e){return t.PrUtils.getStringValueProperty(e,"Name",null)};t.InAParser.hasObtainabilityAlways=function(e){return t.XString.isEqual(e.getStringByKey("Obtainability"),"Always")};t.InAParser.isKeyAttribute=function(e){return t.PrUtils.getBooleanValueProperty(e,"IsKey",false)};t.InAParser.isStructure=function(e){return t.XString.isEqual(t.InAParser.getName(e),t.ProcessorConstants.CUSTOM_DIM)};t.InAParser.prototype.containsMeasureDimension=function(t){return this.getMeasureDimension(t)!==null};t.InAParser.prototype.getMeasureDimension=function(e){if(t.notNull(e)){let r=e.size();for(let s=0;s<r;s++){let r=e.getStructureAt(s);if(t.InAParser.isStructure(r)){return r}}}return null};t.CatalogResultFilter=function(){};t.CatalogResultFilter.prototype=new t.XObject;t.CatalogResultFilter.prototype._ff_c="CatalogResultFilter";t.CatalogResultFilter.create=function(e,r){let s=new t.CatalogResultFilter;s.setupResultFilter(e,r);return s};t.CatalogResultFilter.prototype.m_result=null;t.CatalogResultFilter.prototype.getFilterValues=function(e){let r;if(e.containsKey("SetOperand")){r=t.PrFactory.createList();r.add(e)}else{let s=t.PrUtils.getStructureProperty(e,"Operator");let n=t.PrUtils.getStructureElement(t.PrUtils.getListProperty(s,"SubSelections"),0);let o=t.PrUtils.getStructureProperty(n,"Operator");r=t.PrUtils.getListProperty(o,"SubSelections")}let s=t.PrUtils.getListSize(r,0);let n=t.XList.create();for(let e=0;e<s;e++){let s=t.PrUtils.getStructureElement(r,e);let o=t.PrUtils.getStructureProperty(s,"SetOperand");let i=t.PrUtils.getStructureElement(t.PrUtils.getListProperty(o,"Elements"),0);let a=t.PrUtils.getStringValueProperty(o,"FieldName",null);let l=t.PrUtils.getStringValueProperty(i,"Low",null);if(t.XStringUtils.isNotNullAndNotEmpty(a)&&t.XStringUtils.isNotNullAndNotEmpty(l)){n.add(t.XNameValuePair.create(a,l))}}return n};t.CatalogResultFilter.prototype.getResultEntries=function(){return this.m_result};t.CatalogResultFilter.prototype.getResultEntryAt=function(t){return this.m_result.get(t)};t.CatalogResultFilter.prototype.matchesFilter=function(e,r){let s=r.size();for(let n=0;n<s;n++){let s=r.get(n);let o=e.getElement(s.getName(),s.getName());if(t.notNull(o)&&o.isString()){if(t.XPattern.matches(o.asString().getString(),s.getValue())){return true}}}return false};t.CatalogResultFilter.prototype.releaseObject=function(){t.XObject.prototype.releaseObject.call(this);this.m_result=null};t.CatalogResultFilter.prototype.setupResultFilter=function(e,r){this.m_result=t.XList.create();let s=this.getFilterValues(r);let n=t.XCollectionUtils.hasElements(s);let o=e.size();for(let t=0;t<o;t++){let r=e.getResultEntryAt(t);if(!n||this.matchesFilter(r,s)){this.m_result.add(r)}}};t.CatalogResultFilter.prototype.size=function(){return this.m_result.size()};t.FlatProcessorResult=function(){};t.FlatProcessorResult.prototype=new t.XObject;t.FlatProcessorResult.prototype._ff_c="FlatProcessorResult";t.FlatProcessorResult.prototype.flattenResult=function(e,r){let s=t.PrFactory.createList();s.add(t.PrUtils.deepCopyElement(e));let n=t.XHashSetOfString.create();let o=r.getIterator();while(o.hasNext()){let t=o.next();let e=this.getNextPropertyLevel(t,null);s=this.mergeItemsWithNestedProperties(s,e,t,n)}let i=t.XList.create();let a=s.size();for(let t=0;t<a;t++){i.add(this.createResultEntry(s.getStructureAt(t)))}return i};t.FlatProcessorResult.prototype.getNextPropertyLevel=function(e,r){return t.XString.isEqual(e,r)?null:e};t.FlatProcessorResult.prototype.mergeItemsWithNestedProperties=function(e,r,s,n){let o=e;if(!n.contains(r)){n.add(r);o=t.PrFactory.createList();let s=e.size();for(let n=0;n<s;n++){let s=e.getStructureAt(n);let i=this.getAndRemoveNestedItems(s,r);if(!t.XCollectionUtils.hasElements(i)){o.add(s);continue}let a=i.size();for(let t=0;t<a;t++){let e=o.addNewStructure();e.copyFrom(s,null);this.copyFromStructure(i.get(t),e,r)}}}let i=this.getNextPropertyLevel(s,r);if(t.notNull(i)){o=this.mergeItemsWithNestedProperties(o,i,s,n)}return o};t.GenericResultEntry=function(){};t.GenericResultEntry.prototype=new t.XObject;t.GenericResultEntry.prototype._ff_c="GenericResultEntry";t.GenericResultEntry.create=function(e){let r=new t.GenericResultEntry;r.setupGenericResultEntry(e);return r};t.GenericResultEntry.prototype.m_element=null;t.GenericResultEntry.prototype.addToResult=function(e,r){if(t.isNull(e)){return r}else if(e.isList()){e.asList().add(r);return e}let s=t.PrUtils.convertToList(e);s.add(r);return s};t.GenericResultEntry.prototype.getElement=function(e,r){if(!this.m_element.isStructure()){return this.m_element}let s=this.getPropertyPath(e,r);if(t.XString.containsString(s,".")){let e=t.XStringTokenizer.splitString(s,".");return this.getNestedItemValue(this.m_element.asStructure(),e,0,null)}return t.PrUtils.getProperty(this.m_element.asStructure(),s)};t.GenericResultEntry.prototype.getNestedItemValue=function(e,r,s,n){let o=e;let i=n;let a=r.size();for(let e=s;e<a;e++){let s=t.PrUtils.getProperty(o,r.get(e));if(t.isNull(s)){return i}if(s.isStructure()){o=s.asStructure()}else if(s.isList()){return this.getValuesFromList(s.asList(),r,e+1,i)}else{i=this.addToResult(i,s)}}return i};t.GenericResultEntry.prototype.getPropertyPath=function(t,e){return e};t.GenericResultEntry.prototype.getValuesFromList=function(t,e,r,s){let n=s;let o=t.size();for(let s=0;s<o;s++){let o=t.get(s);if(o.isStructure()){n=this.getNestedItemValue(t.getStructureAt(s),e,r,n)}else{n=this.addToResult(n,o)}}return n};t.GenericResultEntry.prototype.releaseObject=function(){t.XObject.prototype.releaseObject.call(this);this.m_element=null};t.GenericResultEntry.prototype.setupGenericResultEntry=function(t){this.m_element=t};t.GenericResultEntry.prototype.toString=function(){return this.m_element.toString()};t.OrderedProcessorResult=function(){};t.OrderedProcessorResult.prototype=new t.XObject;t.OrderedProcessorResult.prototype._ff_c="OrderedProcessorResult";t.OrderedProcessorResult.create=function(e,r){let s=new t.OrderedProcessorResult;s.setupOrderedResult(e,r);return s};t.OrderedProcessorResult.prototype.m_dimensions=null;t.OrderedProcessorResult.prototype.m_orderedResult=null;t.OrderedProcessorResult.prototype.m_result=null;t.OrderedProcessorResult.prototype.getAllWithSameKeyValuePair=function(e,r,s,n){let o=t.XList.create();let i=e.size();for(let a=0;a<i;a++){let i=e.get(a);let l=i.getElement(r,s);if(t.XObjectExt.areEqual(l,n)){o.add(i)}}return o};t.OrderedProcessorResult.prototype.getKeyAttributeName=function(e){let r=e.getListByKey("Attributes");let s=t.PrUtils.getStructureWithKeyValuePair(r,"IsKey","true");if(t.isNull(s)){s=r.getStructureAt(0)}return s.getStringByKey("Name")};t.OrderedProcessorResult.prototype.getResultEntries=function(){return this.m_orderedResult};t.OrderedProcessorResult.prototype.getResultEntryAt=function(t){return this.m_orderedResult.get(t)};t.OrderedProcessorResult.prototype.orderByDimensionMembers=function(e,r,s){let n=this.m_dimensions.getStructureAt(s);let o=n.getStringByKey("Name");let i=this.getKeyAttributeName(n);let a=t.PrFactory.createList();let l=e.size();for(let n=0;n<l;n++){let l=e.get(n).getElement(o,i);if(t.PrUtils.contains(a,l)){continue}a.add(l);let u=this.getAllWithSameKeyValuePair(e,o,i,l);let c=s+1;if(this.m_dimensions.size()>c){this.orderByDimensionMembers(u,r,c)}else{r.addAll(u)}}};t.OrderedProcessorResult.prototype.releaseObject=function(){t.XObject.prototype.releaseObject.call(this);this.m_result=t.XObjectExt.release(this.m_result);this.m_dimensions=null;this.m_orderedResult=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_orderedResult)};t.OrderedProcessorResult.prototype.setupOrderedResult=function(e,r){this.m_result=e;this.m_dimensions=r;this.m_orderedResult=t.XList.create();if(this.m_dimensions.hasElements()){this.orderByDimensionMembers(e.getResultEntries(),this.m_orderedResult,0)}else{this.m_orderedResult.addAll(e.getResultEntries())}};t.OrderedProcessorResult.prototype.size=function(){return this.m_orderedResult.size()};t.OrderedProcessorResult.prototype.toString=function(){return this.m_orderedResult.toString()};t.ProcessorDateConverter={convert:function(e,r){if(t.notNull(e)&&e.isString()&&t.notNull(r)){if(t.XString.isEqual(r,"Date")){return t.ProcessorDateConverter.convertToIsoDate(e.asString())}if(t.XString.isEqual(r,"Time")){return t.ProcessorDateConverter.convertToIsoTime(e.asString())}if(t.XString.isEqual(r,"DateTime")){return t.ProcessorDateConverter.convertToIsoDateTime(e.asString())}}return null},convertToEdmDateTime:function(e){return t.XStringUtils.concatenate3("datetime'",e,"'")},convertToIsoDate:function(e){let r=e.getString();let s=t.ProcessorDateConverter.getDateTimeFromEdmDateTime(r);if(t.notNull(s)){r=s}let n=t.ProcessorDateConverter.getDateFromDateTime(r);if(t.notNull(n)){r=n}else{let e=t.ProcessorDateConverter.getDateTimeFromTimestamp(r);if(t.notNull(e)){r=e.getDate().toIsoFormat()}}return t.PrFactory.createString(r)},convertToIsoDateTime:function(e){let r=e.getString();let s=t.ProcessorDateConverter.getDateTimeFromEdmDateTime(r);if(t.notNull(s)){r=s}else{let e=t.ProcessorDateConverter.getDateTimeFromTimestamp(r);if(t.notNull(e)){r=e.toIsoFormat()}}return t.PrFactory.createString(r)},convertToIsoTime:function(e){let r=e.getString();if(t.XString.startsWith(r,"PT")){let e=t.XString.indexOf(r,"H");let s=t.XString.indexOf(r,"M");let n=t.XString.indexOf(r,"S");let o=t.XStringBuffer.create();o.append(t.ProcessorDateConverter.getNumberAsString(r,e-2));o.append(t.ProcessorDateConverter.getNumberAsString(r,e-1));o.append(":");o.append(t.ProcessorDateConverter.getNumberAsString(r,s-2));o.append(t.ProcessorDateConverter.getNumberAsString(r,s-1));o.append(":");o.append(t.ProcessorDateConverter.getNumberAsString(r,n-2));o.append(t.ProcessorDateConverter.getNumberAsString(r,n-1));r=o.toString()}return t.PrFactory.createString(r)},getDateFromDateTime:function(e){if(t.XString.containsString(e,"T")){return t.XString.substring(e,0,t.XString.indexOf(e,"T"))}return null},getDateTimeFromEdmDateTime:function(e){if(t.XString.containsString(e,"datetime")){let r=t.XString.indexOf(e,"'")+1;let s=t.XString.lastIndexOf(e,"'");if(r<s){return t.XString.substring(e,r,s)}}return null},getDateTimeFromTimestamp:function(e){let r=e;if(t.XString.containsString(e,"Date")){let s=t.XString.indexOf(e,"(")+1;let n=t.XString.lastIndexOf(e,")");if(s<n){r=t.XString.substring(e,s,n)}}let s=t.XLong.convertFromStringWithDefault(r,-1);if(s!==-1||t.XString.isEqual(r,"-1")){return t.XDateTime.createWithMilliseconds(s)}return null},getNumberAsString:function(e,r){if(r>=0){let s=t.XString.substring(e,r,r+1);let n=t.XInteger.convertFromStringWithDefault(s,-1);if(n>0){return s}}return"0"}};t.InAProcessorFunctionFactory=function(){};t.InAProcessorFunctionFactory.prototype=new t.RpcFunctionFactory;t.InAProcessorFunctionFactory.prototype._ff_c="InAProcessorFunctionFactory";t.InAProcessorFunctionFactory.registerGenericServiceAdapterAsInA=function(){let e=new t.InAProcessorFunctionFactory;e.m_activeProcessor=t.ProcessorGSA.create();t.RpcFunctionFactory.registerFactory(null,t.SystemType.VIRTUAL_INA_GSA,e)};t.InAProcessorFunctionFactory.registerODataAsInA=function(){let e=new t.InAProcessorFunctionFactory;e.m_activeProcessor=t.ProcessorODataV2.create();t.RpcFunctionFactory.registerFactory(null,t.SystemType.VIRTUAL_INA_ODATA,e)};t.InAProcessorFunctionFactory.registerSCPAsInA=function(){let e=new t.InAProcessorFunctionFactory;e.m_activeProcessor=t.ProcessorSCP.create();t.RpcFunctionFactory.registerFactory(null,t.SystemType.VIRTUAL_INA_SCP,e)};t.InAProcessorFunctionFactory.prototype.m_activeProcessor=null;t.InAProcessorFunctionFactory.prototype.newRpcFunction=function(e,r,s,n){let o=t.XUri.createFromUrl(r);let i=e.getProcess().getApplication();this.m_activeProcessor.setApplication(i);return t.RpcVirtualFunction.create(e,o,this.m_activeProcessor,n)};t.InAProcessorFunctionFactory.prototype.releaseObject=function(){this.m_activeProcessor=t.XObjectExt.release(this.m_activeProcessor);t.RpcFunctionFactory.prototype.releaseObject.call(this)};t.InAProcessorRequest=function(){};t.InAProcessorRequest.prototype=new t.XObject;t.InAProcessorRequest.prototype._ff_c="InAProcessorRequest";t.InAProcessorRequest.create=function(e,r,s){let n=new t.InAProcessorRequest;n.m_uri=e;n.m_acceptContentType=r;n.m_customIdentifier=s;return n};t.InAProcessorRequest.prototype.m_acceptContentType=null;t.InAProcessorRequest.prototype.m_customIdentifier=null;t.InAProcessorRequest.prototype.m_hasResponse=false;t.InAProcessorRequest.prototype.m_response=null;t.InAProcessorRequest.prototype.m_responseAsString=null;t.InAProcessorRequest.prototype.m_uri=null;t.InAProcessorRequest.prototype.getAcceptContentType=function(){return this.m_acceptContentType};t.InAProcessorRequest.prototype.getCustomIdentifier=function(){return this.m_customIdentifier};t.InAProcessorRequest.prototype.getResponse=function(){return this.m_response};t.InAProcessorRequest.prototype.getResponseAsString=function(){return this.m_responseAsString};t.InAProcessorRequest.prototype.getUri=function(){return this.m_uri};t.InAProcessorRequest.prototype.hasResponse=function(){return this.m_hasResponse};t.InAProcessorRequest.prototype.releaseObject=function(){t.XObject.prototype.releaseObject.call(this);this.m_uri=t.XObjectExt.release(this.m_uri);this.m_acceptContentType=null;this.m_customIdentifier=null;this.m_response=null;this.m_responseAsString=null};t.InAProcessorRequest.prototype.setResponse=function(t,e){this.m_response=t;this.m_responseAsString=e;this.m_hasResponse=true};t.GSAResultEntry=function(){};t.GSAResultEntry.prototype=new t.GenericResultEntry;t.GSAResultEntry.prototype._ff_c="GSAResultEntry";t.GSAResultEntry.createGenericServiceResultEntry=function(e,r){let s=new t.GSAResultEntry;s.setupGenericResultEntry(e);s.m_responseProperties=r;return s};t.GSAResultEntry.prototype.m_responseProperties=null;t.GSAResultEntry.prototype.getPropertyPath=function(t,e){return this.m_responseProperties.getByKey(t).getByKey(e)};t.GSAResultEntry.prototype.releaseObject=function(){t.GenericResultEntry.prototype.releaseObject.call(this);this.m_responseProperties=null};t.ODataResult=function(){};t.ODataResult.prototype=new t.FlatProcessorResult;t.ODataResult.prototype._ff_c="ODataResult";t.ODataResult.create=function(e,r,s){let n=new t.ODataResult;n.setupResult(e,r,s);return n};t.ODataResult.prototype.isServiceResult=false;t.ODataResult.prototype.m_requestParser=null;t.ODataResult.prototype.m_resultEntries=null;t.ODataResult.prototype.copyFromStructure=function(e,r,s){let n=this.getPropertiesStructure(r);let o=e.asStructure();let i=o.getKeysAsReadOnlyList();let a=i.size();for(let e=0;e<a;e++){let r=i.get(e);if(!t.XString.isEqual(r,t.ProcessorODataConstants.RS_METADATA)){let e=t.XString.replace(r,t.ProcessorODataConstants.RS_PROPERTY_PREFIX,"");n.put(t.XStringUtils.concatenate3(s,"/",e),o.getByKey(r))}}};t.ODataResult.prototype.createResultEntries=function(e){let r=t.XList.create();if(t.notNull(e)){let s=e.size();let n=this.getNavigationProperties();for(let o=0;o<s;o++){let s=e.getStructureAt(o);if(this.isServiceResult){r.add(t.ODataServiceResultEntry.create(s))}else{t.XCollectionUtils.addAllIfNotPresent(r,this.flattenResult(s,n))}}}return r};t.ODataResult.prototype.createResultEntry=function(e){return t.ODataResultEntry.create(e.asStructure())};t.ODataResult.prototype.getAndRemoveNestedItems=function(e,r){let s=e.getElementTypeByKey(r)===t.PrElementType.STRUCTURE?e.getStructureByKey(r):null;if(t.notNull(s)){let n=s.getListByKey(t.ProcessorODataConstants.RS_RESULTS);if(t.isNull(n)){n=t.PrFactory.createList();n.add(s)}e.remove(r);return n}let n=t.PrUtils.getPropertyAsList(e,t.ProcessorODataConstants.MD_LINK);if(t.notNull(n)){let e=n.size();for(let s=0;s<e;s++){let e=n.getStructureAt(s);let o=e.getStringByKey(t.ProcessorODataConstants.MD_PROPERTY_TITLE);if(t.XString.isEqual(o,r)){n.removeAt(s);let r=t.PrFactory.createList();let o=t.PrUtils.getStructureProperty(e,t.ProcessorODataConstants.RS_INLINE);let i=t.PrUtils.getStructureProperty(o,t.ProcessorODataConstants.RS_FEED);let a=t.PrUtils.getPropertyAsList(t.notNull(i)?i:o,t.ProcessorODataConstants.RS_ENTRY);let l=a.size();for(let e=0;e<l;e++){let s=this.getPropertiesStructure(a.getStructureAt(e));if(t.notNull(s)){r.add(s)}}return r}}}return null};t.ODataResult.prototype.getNavigationProperties=function(){let e=t.XHashSetOfString.create();let r=this.m_requestParser.getAllDimensions();let s=t.notNull(r)?r.size():0;for(let n=0;n<s;n++){let s=r.getStructureAt(n).getListByKey("Attributes");let o=s.size();for(let r=0;r<o;r++){let n=s.getStructureAt(r).getStringByKey("Name");if(t.XString.containsString(n,"/")){e.add(n)}}}return e};t.ODataResult.prototype.getNextPropertyLevel=function(e,r){if(t.XString.isEqual(e,r)){return null}let s=t.notNull(r)?t.XString.size(r)+1:0;let n=t.XString.indexOfFrom(e,"/",s);if(n>-1){return t.XString.substring(e,0,n)}return e};t.ODataResult.prototype.getPropertiesStructure=function(e){let r=t.PrUtils.getStructureProperty(e,t.ProcessorODataConstants.RS_CONTENT);let s=t.PrUtils.getStructureProperty(r,t.ProcessorODataConstants.RS_PROPERTIES);return t.notNull(s)?s:e};t.ODataResult.prototype.getResultEntries=function(){return this.m_resultEntries};t.ODataResult.prototype.getResultEntryAt=function(t){return this.m_resultEntries.get(t)};t.ODataResult.prototype.parseCatalogResultObjects=function(e){if(e.containsKey(t.ProcessorODataConstants.RS_VALUE)){return t.PrUtils.getPropertyAsList(e,t.ProcessorODataConstants.RS_VALUE)}if(e.containsKey(t.ProcessorODataConstants.RS_D)){let r=t.PrUtils.getStructureProperty(e,t.ProcessorODataConstants.RS_D);return t.PrUtils.getPropertyAsList(r,t.ProcessorODataConstants.RS_ENTITY_SETS)}let r=t.PrUtils.getStructureProperty(e,t.ProcessorODataConstants.RS_SERVICE);let s=t.PrUtils.getPropertyAsList(r,t.ProcessorODataConstants.RS_WORKSPACE);if(t.isNull(s)){r=t.PrUtils.getStructureProperty(e,t.ProcessorODataConstants.RS_APP_SERVICE);s=t.PrUtils.getPropertyAsList(r,t.ProcessorODataConstants.RS_APP_WORKSPACE)}let n=t.PrFactory.createList();if(t.notNull(s)){let e=s.size();for(let r=0;r<e;r++){let e=s.getStructureAt(r);n.addAll(t.PrUtils.getPropertyAsList(e,t.ProcessorODataConstants.RS_COLLECTION));n.addAll(t.PrUtils.getPropertyAsList(e,t.ProcessorODataConstants.RS_APP_COLLECTION))}}return n};t.ODataResult.prototype.parseResult=function(e){if(this.isServiceResult){return this.parseCatalogResultObjects(e)}if(e.containsKey(t.ProcessorODataConstants.RS_D)){let r=t.PrUtils.getProperty(e,t.ProcessorODataConstants.RS_D);if(r.isList()){return r.asList()}else if(r.isStructure()){return t.PrUtils.getPropertyAsList(r.asStructure(),t.ProcessorODataConstants.RS_RESULTS)}}else if(e.containsKey(t.ProcessorODataConstants.RS_FEED)){let r=t.PrUtils.getStructureProperty(e,t.ProcessorODataConstants.RS_FEED);return t.PrUtils.getPropertyAsList(r,t.ProcessorODataConstants.RS_ENTRY)}else{return t.PrUtils.getPropertyAsList(e,t.ProcessorODataConstants.RS_VALUE)}return null};t.ODataResult.prototype.releaseObject=function(){t.FlatProcessorResult.prototype.releaseObject.call(this);this.m_resultEntries=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_resultEntries);this.m_requestParser=null};t.ODataResult.prototype.setupResult=function(t,e,r){this.isServiceResult=e;this.m_requestParser=r;this.m_resultEntries=this.createResultEntries(this.parseResult(t))};t.ODataResult.prototype.size=function(){return this.m_resultEntries.size()};t.ODataResult.prototype.toString=function(){return this.m_resultEntries.toString()};t.InARequestParser=function(){};t.InARequestParser.prototype=new t.InAParser;t.InARequestParser.prototype._ff_c="InARequestParser";t.InARequestParser.CATALOG_VIEW="CatalogView";t.InARequestParser.create=function(e){let r=new t.InARequestParser;r.setupParser(e);return r};t.InARequestParser.isCatalogServiceRequested=function(e){let r=t.InARequestParser.create(e);let s=r.isCatalogServiceRequest();r.releaseObject();return s};t.InARequestParser.prototype.m_dimensions=null;t.InARequestParser.prototype.m_measureDimension=null;t.InARequestParser.prototype.m_measureMembers=null;t.InARequestParser.prototype.m_request=null;t.InARequestParser.prototype.m_requestDefinition=null;t.InARequestParser.prototype.getAllDimensions=function(){return this.m_dimensions};t.InARequestParser.prototype.getCapabilities=function(){return t.PrUtils.getStructureProperty(this.m_request,"Capabilities")};t.InARequestParser.prototype.getColumnDimensions=function(){return this.getDimensions("Columns")};t.InARequestParser.prototype.getDataSource=function(){return t.PrUtils.getStructureProperty(this.m_request,"DataSource")};t.InARequestParser.prototype.getDimensions=function(e){let r=t.PrFactory.createList();let s=this.getAllDimensions();if(t.notNull(s)){let n=s.size();for(let o=0;o<n;o++){let n=s.getStructureAt(o);if(t.XString.isEqual(e,n.getStringByKey("Axis"))){r.add(n)}}}return r};t.InARequestParser.prototype.getDisplayFormat=function(e,r){let s=this.m_dimensions.size();for(let n=0;n<s;n++){let s=this.m_dimensions.getStructureAt(n);if(t.isNull(e)||t.XString.isEqual(s.getStringByKeyExt("Name",null),e)){let e=s.getListByKey("Attributes");let n=t.PrUtils.getStructureWithKeyValuePair(e,"Name",r);if(t.notNull(n)){return t.PrUtils.getStringValueProperty(n,"DisplayFormat",null)}}}return null};t.InARequestParser.prototype.getFilterSelection=function(){let e=t.PrUtils.getStructureProperty(this.m_requestDefinition,"DynamicFilter");if(t.isNull(e)){e=t.PrUtils.getStructureProperty(this.m_requestDefinition,"Filter")}return t.PrUtils.getStructureProperty(e,"Selection")};t.InARequestParser.prototype.getFilteredStructureMembers=function(e,r,s){let n=t.PrUtils.getStructureProperty(s,"Operator");if(t.notNull(n)){let s=t.PrUtils.getListProperty(n,"SubSelections");if(t.notNull(s)){for(let t=0;t<s.size();t++){this.getFilteredStructureMembers(e,r,s.getStructureAt(t))}}}else{let n=t.PrUtils.getStructureProperty(s,"SetOperand");let o=t.PrUtils.getStringValueProperty(n,"FieldName",null);let i=t.PrUtils.getListProperty(n,"Elements");if(t.XString.isEqual(o,t.ProcessorConstants.CUSTOM_DIM_KEY)&&!t.PrUtils.isListEmpty(i)){for(let s=0;s<i.size();s++){let n=i.getStructureAt(s);let o=t.PrUtils.getStringValueProperty(n,"Low","");if(t.XString.isEqual(n.getStringByKey("Comparison"),"=")){if(n.getBooleanByKeyExt("IsExcluding",false)){r.add(o)}else{e.add(o)}}else if(t.XString.isEqual(n.getStringByKey("Comparison"),"<>")){if(n.getBooleanByKeyExt("IsExcluding",false)){e.add(o)}else{r.add(o)}}}}}};t.InARequestParser.prototype.getKeyAttribute=function(e){let r=e.getListByKey("Attributes");let s=r.size();for(let e=0;e<s;e++){let s=r.getStructureAt(e);if(t.InAParser.isKeyAttribute(s)){return s}}return null};t.InARequestParser.prototype.getNonMeasureAxis=function(){let t=this.getRowDimensions();let e=this.getColumnDimensions();if(this.containsMeasureDimension(t)){return e}if(this.containsMeasureDimension(e)){return t}if(t.isEmpty()&&e.hasElements()){return e}return t};t.InARequestParser.prototype.getRowDimensions=function(){return this.getDimensions("Rows")};t.InARequestParser.prototype.getServiceDescription=function(){return t.PrUtils.getStructureProperty(this.getDataSource(),"GenericServiceDescription")};t.InARequestParser.prototype.getSort=function(){return t.PrUtils.getListProperty(this.m_requestDefinition,"Sort")};t.InARequestParser.prototype.getStructureMemberDescription=function(e){let r=t.PrUtils.getStructureProperty(e,"MemberOperand");let s=t.PrUtils.getStringValueProperty(r,"Description",null);return t.notNull(s)?s:t.PrUtils.getStringValueProperty(r,"Value",null)};t.InARequestParser.prototype.getStructureMemberName=function(e){let r=t.PrUtils.getStructureProperty(e,"MemberOperand");return t.PrUtils.getStringValueProperty(r,"Value",null)};t.InARequestParser.prototype.getStructureMembers=function(){return this.m_measureMembers};t.InARequestParser.prototype.getSubsetDescription=function(){let e=t.PrUtils.getStructureProperty(this.m_requestDefinition,"ResultSetFeatureRequest");return t.PrUtils.getStructureProperty(e,"SubSetDescription")};t.InARequestParser.prototype.getVariableValues=function(){let e=t.XHashMapByString.create();let r=t.PrUtils.getListProperty(this.m_requestDefinition,"Variables");if(t.notNull(r)){let s=r.size();for(let n=0;n<s;n++){let s=r.getStructureAt(n);let o=s.getStringByKey("Name");let i=t.PrUtils.getElement(s.getListByKey("SimpleStringValues"),0);if(t.isNull(i)){i=t.PrUtils.getElement(s.getListByKey("SimpleNumericValues"),0)}let a=null;if(t.notNull(i)){a=i.isString()?i.asString().getString():i.getStringRepresentation()}if(t.XStringUtils.isNotNullAndNotEmpty(o)&&t.XStringUtils.isNotNullAndNotEmpty(a)){e.put(o,a)}}}return e};t.InARequestParser.prototype.isCatalogServiceRequest=function(){let e=t.PrUtils.getStringValueProperty(this.getDataSource(),"Type",null);return t.XString.isEqual(e,t.InARequestParser.CATALOG_VIEW)};t.InARequestParser.prototype.isSerializedDataRequested=function(){let e=t.PrUtils.getStructureProperty(this.m_requestDefinition,"ResultSetFeatureRequest");let r=t.PrUtils.getStringValueProperty(e,"ResultFormat",null);return t.XString.isEqual(r,"SerializedData")};t.InARequestParser.prototype.isValid=function(){return t.notNull(this.m_requestDefinition)};t.InARequestParser.prototype.parseStructureMembers=function(e){let r=t.PrUtils.getStringValueProperty(e,"Axis",null);let s=t.PrUtils.getListProperty(e,"Members");if((t.XString.isEqual(r,"Rows")||t.XString.isEqual(r,"Columns"))&&t.notNull(s)){let e=t.XList.create();let r=t.XList.create();this.getFilteredStructureMembers(e,r,this.getFilterSelection());return t.XStream.of(s).map(t=>t.asStructure()).filter(t=>this.selectStructureMember(t.asStructure(),e,r)).collect(t.XStreamCollector.toList())}return t.XList.create()};t.InARequestParser.prototype.releaseObject=function(){t.InAParser.prototype.releaseObject.call(this);this.m_request=null;this.m_requestDefinition=null;this.m_dimensions=null;this.m_measureDimension=null;this.m_measureMembers=t.XObjectExt.release(this.m_measureMembers)};t.InARequestParser.prototype.selectStructureMember=function(e,r,s){let n=e.getStringByKeyExt("Visibility","Visible");if(!t.XString.isEqual(n,"Visible")){return false}let o=this.getStructureMemberName(e);if(t.XStringUtils.isNullOrEmpty(o)){return false}if(s.contains(o)){return false}return!s.isEmpty()||r.isEmpty()||r.contains(o)};t.InARequestParser.prototype.setupParser=function(e){this.m_request=t.PrUtils.getStructureProperty(e,"Metadata");if(t.isNull(this.m_request)){this.m_request=t.PrUtils.getStructureProperty(e,"Analytics")}this.m_requestDefinition=t.PrUtils.getStructureProperty(this.m_request,"Definition");this.m_dimensions=t.PrUtils.getListProperty(this.m_requestDefinition,"Dimensions");this.m_measureDimension=this.getMeasureDimension(this.m_dimensions);this.m_measureMembers=this.parseStructureMembers(this.m_measureDimension)};t.InAResponseParser=function(){};t.InAResponseParser.prototype=new t.InAParser;t.InAResponseParser.prototype._ff_c="InAResponseParser";t.InAResponseParser.create=function(e){let r=new t.InAResponseParser;r.setupParser(e);return r};t.InAResponseParser.prototype.m_axes=null;t.InAResponseParser.prototype.m_dimensionsCols=null;t.InAResponseParser.prototype.m_dimensionsRows=null;t.InAResponseParser.prototype.m_grid=null;t.InAResponseParser.prototype.getColumnDimensions=function(){return this.m_dimensionsCols};t.InAResponseParser.prototype.getMemberIndexesAt=function(e,r){let s=t.PrUtils.getStructureWithKeyValuePair(this.m_axes,"Name",t.XString.toUpperCase(e));if(t.notNull(s)){let e=s.getListByKey("Tuples");let n=t.PrUtils.getStructureElement(e,r);let o=t.PrUtils.getStructureProperty(n,"MemberIndexes");return t.PrUtils.getListProperty(o,"Values")}return null};t.InAResponseParser.prototype.getRowDimensions=function(){return this.m_dimensionsRows};t.InAResponseParser.prototype.getTupleCountNonMeasureAxis=function(){let e=this.m_grid.getListByKey("CellArraySizes");if(t.PrUtils.getListSize(e,0)>=2){if(this.containsMeasureDimension(this.m_dimensionsCols)){return e.getIntegerAt(0)}if(this.containsMeasureDimension(this.m_dimensionsRows)){return e.getIntegerAt(1)}}return-1};t.InAResponseParser.prototype.getValues=function(e){let r=t.PrUtils.getStructureProperty(this.m_grid,"Cells");let s=t.PrUtils.getStructureProperty(r,e);return t.PrUtils.getListProperty(s,"Values")};t.InAResponseParser.prototype.isValid=function(){return t.notNull(this.m_grid)&&t.notNull(this.m_axes)};t.InAResponseParser.prototype.releaseObject=function(){t.InAParser.prototype.releaseObject.call(this);this.m_grid=null;this.m_axes=null;this.m_dimensionsRows=null;this.m_dimensionsCols=null};t.InAResponseParser.prototype.setupDimensions=function(){let e=t.PrUtils.getListSize(this.m_axes,0);for(let r=0;r<e;r++){let e=this.m_axes.getStructureAt(r);if(t.XString.isEqual(t.InAParser.getName(e),t.XString.toUpperCase("Rows"))){this.m_dimensionsRows=t.PrUtils.getListProperty(e,"Dimensions")}else if(t.XString.isEqual(t.InAParser.getName(e),t.XString.toUpperCase("Columns"))){this.m_dimensionsCols=t.PrUtils.getListProperty(e,"Dimensions")}}};t.InAResponseParser.prototype.setupParser=function(e){let r=t.PrUtils.getListProperty(e,"Grids");this.m_grid=t.PrUtils.getStructureElement(r,0);this.m_axes=t.PrUtils.getListProperty(this.m_grid,"Axes");this.setupDimensions()};t.GenericResult=function(){};t.GenericResult.prototype=new t.FlatProcessorResult;t.GenericResult.prototype._ff_c="GenericResult";t.GenericResult.create=function(e,r){let s=new t.GenericResult;s.setupResult(e,r);return s};t.GenericResult.prototype.m_requestParser=null;t.GenericResult.prototype.m_resultEntries=null;t.GenericResult.prototype.copyFromStructure=function(e,r,s){let n=r;let o=s;if(t.XString.containsString(s,".")){let r=t.XStringTokenizer.splitString(s,".");let i=r.size();if(!e.isStructure()){i--;o=r.get(i)}for(let t=0;t<i;t++){n=this.putStructure(n,r.get(t))}}else if(e.isStructure()){n=this.putStructure(n,s)}if(e.isStructure()){n.copyFrom(e,null)}else{n.put(o,e)}};t.GenericResult.prototype.createResultEntry=function(e){return t.GenericResultEntry.create(e)};t.GenericResult.prototype.getAndRemoveNestedItems=function(e,r){let s=e;let n=t.XStringTokenizer.splitString(r,".");let o=n.size();for(let e=0;e<o-1;e++){s=t.PrUtils.getStructureProperty(s,n.get(e))}let i=o>1?n.get(o-1):r;let a=t.PrUtils.getListProperty(s,i);if(t.notNull(a)){s.remove(i)}return a};t.GenericResult.prototype.getNestedPropertyNames=function(){let e=t.XHashSetOfString.create();let r=this.m_requestParser.getAllDimensions();let s=this.m_requestParser.getStructureMembers();let n=t.PrUtils.getListSize(r,0);for(let s=0;s<n;s++){let n=r.getStructureAt(s);let o=this.m_requestParser.getKeyAttribute(n);if(t.notNull(o)&&!t.InAParser.isStructure(n)){let r=this.getPropertyPath(t.InAParser.getName(n),t.InAParser.getName(o));t.XCollectionUtils.addIfNotPresent(e,r)}}let o=s.size();for(let r=0;r<o;r++){let n=this.m_requestParser.getStructureMemberName(s.get(r));let o=this.getPropertyPath(t.ProcessorConstants.CUSTOM_DIM,n);t.XCollectionUtils.addIfNotPresent(e,o)}return e};t.GenericResult.prototype.getNextPropertyLevel=function(e,r){if(t.XString.isEqual(e,r)){return null}let s=t.notNull(r)?t.XString.size(r)+1:0;let n=t.XString.indexOfFrom(e,".",s);if(n>-1){return t.XString.substring(e,0,n)}return e};t.GenericResult.prototype.getPropertyPath=function(t,e){return e};t.GenericResult.prototype.getResultEntries=function(){return this.m_resultEntries};t.GenericResult.prototype.getResultEntryAt=function(t){return this.m_resultEntries.get(t)};t.GenericResult.prototype.putStructure=function(e,r){let s=t.PrUtils.getStructureProperty(e,r);return t.notNull(s)?s:e.putNewStructure(r)};t.GenericResult.prototype.releaseObject=function(){t.FlatProcessorResult.prototype.releaseObject.call(this);this.m_resultEntries=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_resultEntries);this.m_requestParser=null};t.GenericResult.prototype.setupResult=function(e,r){this.m_resultEntries=t.XList.create();this.m_requestParser=r;let s=this.getNestedPropertyNames();if(e.isList()){let t=e.asList();let r=t.size();for(let e=0;e<r;e++){let r=t.get(e);if(r.isStructure()){this.m_resultEntries.addAll(this.flattenResult(t.getStructureAt(e),s))}else{this.m_resultEntries.add(this.createResultEntry(r))}}}else if(e.isStructure()){this.m_resultEntries.addAll(this.flattenResult(e.asStructure(),s))}else{this.m_resultEntries.add(this.createResultEntry(e))}};t.GenericResult.prototype.size=function(){return this.m_resultEntries.size()};t.GenericResult.prototype.toString=function(){return this.m_resultEntries.toString()};t.GSAResult=function(){};t.GSAResult.prototype=new t.GenericResult;t.GSAResult.prototype._ff_c="GSAResult";t.GSAResult.createGenericServiceResult=function(e,r){let s=new t.GSAResult;s.setupPropertyMappings(r);s.setupResult(e,r);return s};t.GSAResult.prototype.m_responseProperties=null;t.GSAResult.prototype.createResultEntry=function(e){return t.GSAResultEntry.createGenericServiceResultEntry(e,this.m_responseProperties)};t.GSAResult.prototype.getPropertyPath=function(t,e){return this.m_responseProperties.getByKey(t).getByKey(e)};t.GSAResult.prototype.releaseObject=function(){t.GenericResult.prototype.releaseObject.call(this);this.m_responseProperties=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_responseProperties)};t.GSAResult.prototype.setupPropertyMappings=function(e){this.m_responseProperties=t.XHashMapByString.create();let r=e.getServiceDescription();let s=r.getListByKey(t.ProcessorGSAConstants.DIMENSIONS);let n=r.getListByKey(t.ProcessorGSAConstants.MEASURES);let o=t.PrUtils.getListSize(s,0);for(let e=0;e<o;e++){let r=t.XHashMapByString.create();let n=s.getStructureAt(e);this.m_responseProperties.put(n.getStringByKey(t.ProcessorGSAConstants.NAME),r);let o=n.getListByKey(t.ProcessorGSAConstants.ATTRIBUTES);let i=o.size();for(let e=0;e<i;e++){let s=o.getStructureAt(e);r.put(s.getStringByKey(t.ProcessorGSAConstants.NAME),s.getStringByKey(t.ProcessorGSAConstants.RESPONSE_PROPERTY))}}let i=t.XHashMapByString.create();this.m_responseProperties.put(t.ProcessorConstants.CUSTOM_DIM,i);let a=t.PrUtils.getListSize(n,0);for(let e=0;e<a;e++){let r=n.getStructureAt(e);i.put(r.getStringByKey(t.ProcessorGSAConstants.NAME),r.getStringByKey(t.ProcessorGSAConstants.RESPONSE_PROPERTY))}};t.DfProcessor=function(){};t.DfProcessor.prototype=new t.MessageManager;t.DfProcessor.prototype._ff_c="DfProcessor";t.DfProcessor.prototype.m_application=null;t.DfProcessor.prototype.addServiceWithCapabilities=function(e,r,s,n,o){if(t.notNull(this.m_application)){let i=this.getSystemDescription(r);if(t.notNull(i)){let r=i.getIncludedCapabilitiesForService(s);let a=i.getExcludedCapabilitiesForService(s);let l=t.XList.create();l.addAll(this.getCapabilitiesIntersectWithDefault(n,r));l.addAll(this.getCapabilitiesIntersect(o,r));this.removeBlacklistedCapabilities(l,a);e.put(s,l);return}}e.put(s,n)};t.DfProcessor.prototype.getApplication=function(){return this.m_application};t.DfProcessor.prototype.getCapabilitiesIntersect=function(e,r){let s=t.XList.create();if(t.notNull(r)){for(let t=0;t<r.size();t++){let n=r.get(t);if(e.contains(n)){s.add(n)}}}return s};t.DfProcessor.prototype.getCapabilitiesIntersectWithDefault=function(t,e){let r=this.getCapabilitiesIntersect(t,e);if(r.isEmpty()){return t}return r};t.DfProcessor.prototype.getObjectNameFromRequest=function(e){let r=this.getRequestBody(e);let s=r.getStructureByKey("DataSource");t.XObjectExt.assertNotNullExt(s,"Couldn't extract data source from the request");return s.getStringByKey("ObjectName")};t.DfProcessor.prototype.getPackageNameFromRequest=function(e){let r=this.getRequestBody(e);let s=r.getStructureByKey("DataSource");t.XObjectExt.assertNotNullExt(s,"Couldn't extract data source from the request");return s.getStringByKey("PackageName")};t.DfProcessor.prototype.getProcess=function(){return this.m_application.getProcess()};t.DfProcessor.prototype.getRequestBody=function(e){t.XObjectExt.assertNotNullExt(e,"Request is empty");let r=e.getStructureByKey("Analytics");if(t.isNull(r)){r=e.getStructureByKey("Metadata");t.XObjectExt.assertNotNullExt(r,"Couldn't extract request body from the request")}return r};t.DfProcessor.prototype.getSystemDescription=function(e){if(t.notNull(this.m_application)){let t=this.m_application.getSystemLandscape();return t.getSystemDescription(e)}return null};t.DfProcessor.prototype.getUrl=function(e){let r=this.getSystemDescription(e);t.XObjectExt.assertNotNullExt(r,t.XStringUtils.concatenate3("System with name '",e,"' not found"));return r.getUrl()};t.DfProcessor.prototype.releaseObject=function(){this.m_application=null;t.MessageManager.prototype.releaseObject.call(this)};t.DfProcessor.prototype.removeBlacklistedCapabilities=function(e,r){if(t.notNull(r)){for(let t=0;t<r.size();t++){e.removeElement(r.get(t))}}};t.DfProcessor.prototype.setApplication=function(t){this.m_application=t};t.DfProcessor.prototype.setupProcessor=function(){t.MessageManager.prototype.setupSessionContext.call(this,null)};t.InAMetadataBuilder=function(){};t.InAMetadataBuilder.prototype=new t.MessageManager;t.InAMetadataBuilder.prototype._ff_c="InAMetadataBuilder";t.InAMetadataBuilder.prototype.m_measureDimension=null;t.InAMetadataBuilder.prototype.addDimensionTextField=function(t,e,r){let s=t.getName();let n=this.createField(s,t.getDescription(),e.getStringByKey("Name"),t.getDataType(),t.getMaxLength(),t,false);n.putString("PresentationType","Text");e.getListByKey("Attributes").add(n);let o=e.getStructureByKey("AttributeHierarchy");o.getListByKey("AttributeNames").addString(s);if(r){o.putString("DefaultTextAttribute",s);o.getListByKey("DefaultResultSetAttributes").addString(s)}};t.InAMetadataBuilder.prototype.createAttributesHierarchy=function(e,r,s,n){let o=t.PrFactory.createStructure();o.putString("Name",e);o.putString("Description",r);o.putString("DefaultKeyAttribute",s);o.putString("DefaultTextAttribute",t.notNull(n)?n:s);let i=o.putNewList("AttributeNames");i.addString(s);let a=o.putNewList("DefaultResultSetAttributes");a.addString(s);if(t.notNull(n)){i.addString(n);a.addString(n)}return o};t.InAMetadataBuilder.prototype.createAxisConstraints=function(){let e=t.PrFactory.createList();e.addString("Free");e.addString("Rows");e.addString("Columns");return e};t.InAMetadataBuilder.prototype.createCatalogServiceDimensions=function(){let e=this.createCatalogServiceDimensionProperty(t.ProcessorConstants.SERVICE_MD_DIM_OBJECT_NAME);let r=this.createCatalogServiceDimensionProperty(t.ProcessorConstants.SERVICE_MD_DIM_OBJECT_NAME_TEXT);let s=this.createDimension(e,r);let n=s.getListByKey("Attributes");for(let t=0;t<n.size();t++){n.getStructureAt(t).remove("FilterCapability")}s.putString("AxisDefault","Rows");let o=s.putNewList("AxisConstraints");o.addString("Rows");let i=t.PrFactory.createList();i.add(s);return i};t.InAMetadataBuilder.prototype.createCatalogServiceMetadata=function(){let e=t.PrFactory.createStructure();let r=e.putNewStructure("Cube");r.put("Dimensions",this.createCatalogServiceDimensions());r.put("Grids",t.PrFactory.createList());r.put("Description",t.PrFactory.createString("Query Catalog"));r.put("ResultSetFeatureCapabilities",this.createResultSetFeatureCapabilities());return e};t.InAMetadataBuilder.prototype.createComparisonOperators=function(){return null};t.InAMetadataBuilder.prototype.createDimension=function(t,e){return this.createDimensionExt(t.getName(),t.getDescription(),t,e,null)};t.InAMetadataBuilder.prototype.createDimensionExt=function(e,r,s,n,o){let i=s.getName();let a=t.PrFactory.createStructure();a.putString("Name",e);a.putString("Description",r);a.putInteger("DimensionType",3);a.putString("KeyAttribute",i);a.putString("AxisDefault","Free");a.put("AxisConstraints",this.createAxisConstraints());a.putBoolean("HierarchiesPossible",false);a.put("AttributeHierarchy",this.createAttributesHierarchy(e,e,i,null));a.getStructureByKey("AttributeHierarchy").putNewList("Children");a.putNewList("DefaultResultSetAttributes");a.putNewList("DefaultResultSetAttributeNodesMd").addString(e);a.putString("ResultSetMemberReadMode","Booked");a.putString("SelectorReadMode","Booked");a.putNewList("SupportedResultSetReadModes").addString("Booked");a.putNewList("SupportedSelectorReadModes").addString("Booked");a.putNewList("Attributes").add(this.createDimensionKeyField(s,e));let l=false;if(t.notNull(n)){l=n.isSortable();this.addDimensionTextField(n,a,true)}a.putIfNotNull("ExtendedSortTypes",this.createExtendedSortTypes(false,s.isSortable(),l));let u=t.notNull(o)?o.size():0;for(let t=0;t<u;t++){this.addDimensionTextField(o.get(t),a,false)}return a};t.InAMetadataBuilder.prototype.createDimensionKeyField=function(t,e){let r=this.createField(t.getName(),t.getDescription(),e,t.getDataType(),t.getMaxLength(),t,false);r.putBoolean("IsKey",true);r.putString("PresentationType","Key");return r};t.InAMetadataBuilder.prototype.createExtendedSortTypes=function(t,e,r){return null};t.InAMetadataBuilder.prototype.createField=function(e,r,s,n,o,i,a){let l=i.isFilterable();let u=this.getDisplayFormat(i,n);let c=t.PrFactory.createStructure();c.putString("Name",e);c.putString("Description",r);c.putString("AliasName",e);c.putString("DataType",n);c.putString("DimensionName",s);c.putBoolean("IsFilterable",l);c.putBoolean("IsKey",false);if(o>-1){c.putInteger("Length",o)}c.putStringNotNull("DisplayFormat",u);if(t.XString.isEqual(t.XString.toLowerCase(u),t.XString.toLowerCase(t.ProcessorConstants.MD_PROPERTY_SAP_DISPLAY_FORMAT_UPPERCASE))){c.putString("TextTransformation","Uppercase")}if(l){if(a){let t=c.putNewStructure("FilterCapability").putNewStructure("Comparison");t.putNewList("Including").addString("=");t.putNewList("Excluding")}else{let e=this.createComparisonOperators();if(t.notNull(e)){let t=c.putNewStructure("FilterCapability").putNewStructure("Comparison");t.put("Including",e);t.put("Excluding",e)}}}return c};t.InAMetadataBuilder.prototype.createMeasure=function(e){if(t.notNull(this.m_measureDimension)){this.m_measureDimension.getListByKey("Members").add(this.createStructureMember(e));if(!e.isSortable()&&this.m_measureDimension.containsKey("ExtendedSortTypes")){this.m_measureDimension.getListByKey("ExtendedSortTypes").clear()}return this.m_measureDimension}this.m_measureDimension=t.PrFactory.createStructure();this.m_measureDimension.putString("Name",t.ProcessorConstants.CUSTOM_DIM);this.m_measureDimension.putString("Description",t.ProcessorConstants.CUSTOM_DIM_DESCRIPTION);this.m_measureDimension.putInteger("DimensionType",2);this.m_measureDimension.putString("KeyAttribute",t.ProcessorConstants.CUSTOM_DIM_KEY);this.m_measureDimension.putString("TextAttribute",t.ProcessorConstants.CUSTOM_DIM_TEXT);this.m_measureDimension.put("AttributeHierarchy",this.createAttributesHierarchy(t.ProcessorConstants.CUSTOM_DIM,t.ProcessorConstants.CUSTOM_DIM,t.ProcessorConstants.CUSTOM_DIM_KEY,t.ProcessorConstants.CUSTOM_DIM_TEXT));this.m_measureDimension.putString("AxisDefault","Columns");this.m_measureDimension.putBoolean("IsDimensionGroup",true);this.m_measureDimension.put("AxisConstraints",this.createAxisConstraints());this.m_measureDimension.putBoolean("HierarchiesPossible",false);this.m_measureDimension.putNewList("DefaultResultSetAttributeNodesMd").addString(t.ProcessorConstants.CUSTOM_DIM);this.m_measureDimension.putNewList("Members").add(this.createStructureMember(e));this.m_measureDimension.putIfNotNull("ExtendedSortTypes",this.createExtendedSortTypes(e.isSortable(),e.isSortable(),false));let r=this.m_measureDimension.putNewList("Attributes");r.add(this.createMeasureKeyField(e));r.add(this.createMeasureTextField(e));return this.m_measureDimension};t.InAMetadataBuilder.prototype.createMeasureKeyField=function(e){let r=this.createField(t.ProcessorConstants.CUSTOM_DIM_KEY,t.ProcessorConstants.CUSTOM_DIM_KEY_DESCRIPTION,t.ProcessorConstants.CUSTOM_DIM,"String",-1,e,true);r.putBoolean("IsKey",true);r.putString("PresentationType","Key");return r};t.InAMetadataBuilder.prototype.createMeasureTextField=function(e){let r=this.createField(t.ProcessorConstants.CUSTOM_DIM_TEXT,t.ProcessorConstants.CUSTOM_DIM_TEXT_DESCRIPTION,t.ProcessorConstants.CUSTOM_DIM,"String",-1,e,true);r.putString("PresentationType","Text");return r};t.InAMetadataBuilder.prototype.createResultSetFeatureCapabilities=function(){let e=t.PrFactory.createStructure();let r=e.putNewList("ResultFormat");r.addString("Version2");return e};t.InAMetadataBuilder.prototype.createStructureMember=function(e){let r=t.PrFactory.createStructure();r.putString(t.ProcessorConstants.CUSTOM_DIM_KEY,e.getName());r.putString(t.ProcessorConstants.CUSTOM_DIM_TEXT,e.getDescription());r.putString("DataType",e.getDataType());let s=e.getNumericPrecision();let n=e.getNumericScale();if(t.notNull(s)){r.putInteger("NumericPrecision",s.getInteger())}if(t.notNull(n)){r.putInteger("NumericScale",n.getInteger())}let o=e.getUnitType();let i=e.getUnitPropertyName();let a=e.getUnitTextPropertyName();r.putStringNotNullAndNotEmpty("UnitType",o);if(t.notNull(i)&&!t.XString.isEqual(o,"UDF")){r.putString("UnitName",i);if(t.notNull(a)){r.putString("UnitTextName",a)}}return r};t.InAMetadataBuilder.prototype.createVariable=function(e,r,s,n,o){let i=t.PrFactory.createStructure();i.putString("Name",e);i.putString("Description",r);i.putString("InputType",s?"Mandatory":"Optional");i.putString("VariableType","SimpleTypeVariable");i.putString("ValueType",n);i.putBoolean("InputEnabled",true);i.putBoolean("MultipleValues",false);let a=t.XString.isEqual(n,"Int")||t.XString.isEqual(n,"Double")||t.XString.isEqual(n,"Long")||t.XString.isEqual(n,"DecimalFloat");let l=i.putNewList(a?"SimpleNumericValues":"SimpleStringValues");if(t.notNull(o)){l.add(o)}return i};t.InAMetadataBuilder.prototype.getDisplayFormat=function(e,r){if(t.XString.isEqual(e.getName(),t.ProcessorConstants.CUSTOM_DIM_TEXT)){return r}let s=e.getDisplayFormat();if(t.isNull(s)){if(t.XString.isEqual(r,"Date")){return"Date"}if(t.XString.isEqual(r,"Time")){return"Time"}if(t.XString.isEqual(r,"Timestamp")){return"DateTime"}return r}return s};t.InAMetadataBuilder.prototype.releaseObject=function(){t.MessageManager.prototype.releaseObject.call(this);this.m_measureDimension=null};t.InAResponseBuilder=function(){};t.InAResponseBuilder.prototype=new t.MessageManager;t.InAResponseBuilder.prototype._ff_c="InAResponseBuilder";t.InAResponseBuilder.create=function(e){let r=new t.InAResponseBuilder;r.m_inARequestParser=e;r.setupSessionContext(null);return r};t.InAResponseBuilder.prototype.m_inARequestParser=null;t.InAResponseBuilder.prototype.addAxesAndCells=function(t,e){let r=this.m_inARequestParser.getRowDimensions();let s=this.m_inARequestParser.getColumnDimensions();let n=t.putNewList("Axes");let o=r.size()+s.size();if(r.hasElements()){n.add(this.createAxisStructure(r,"Rows",e,o))}if(s.hasElements()){n.add(this.createAxisStructure(s,"Columns",e,o))}if(e.size()>0){let s=this.createCells(e);t.put("Cells",s);let n=this.m_inARequestParser.getStructureMembers();let o=this.m_inARequestParser.containsMeasureDimension(r);t.put("CellArraySizes",this.createCellArraySizes(s,n,o))}};t.InAResponseBuilder.prototype.addValuesToAllAttributes=function(e,r,s){let n=r.size();for(let o=0;o<n;o++){let n=r.getStructureAt(o);let i=t.InAParser.getName(n);let a=n.getListByKey("Values");let l=this.m_inARequestParser.getDisplayFormat(e,i);let u=this.convertDimensionMember(s.getElement(e,i),l);a.add(u)}};t.InAResponseBuilder.prototype.asString=function(t){if(t.isString()){return t.asString().getString()}return t.getStringRepresentation()};t.InAResponseBuilder.prototype.convert=function(e){let r=t.PrFactory.createStructure();if(this.m_inARequestParser.isValid()&&t.notNull(e)){let t=r.putNewList("Grids");let s=t.addNewStructure();this.copyDataSource(r);this.copySubsetDescription(s);s.putString("ResultFormat","Version2");s.putString("ResultEncoding","None");s.putBoolean("InputEnabled",false);this.addAxesAndCells(s,e);s.putInteger("ResultSetState",0)}else{this.addError(t.ErrorCodes.PARSER_ERROR,"No valid response/request")}if(this.isValid()&&this.m_inARequestParser.isSerializedDataRequested()){let e=t.InAResponseParser.create(r);let s=t.InAResponseSerializer.create(e,this.m_inARequestParser);let n=s.createSerializedData();this.copyAllMessages(s);t.XObjectExt.release(s);t.XObjectExt.release(e);r.remove("Grids");r.put("SerializedData",n)}t.XObjectExt.release(e);if(this.hasErrors()){return this.createErrorResponse(this.getErrors())}return r};t.InAResponseBuilder.prototype.convertDimensionMember=function(e,r){if(t.isNull(e)){return this.createEmptyValue(r)}let s=t.ProcessorDateConverter.convert(e,r);if(t.notNull(s)){return s}if(e.isList()){let r=t.PrUtils.asListOfString(e.asList());return t.PrFactory.createString(t.XCollectionUtils.join(r,","))}return this.convertToDataType(e,r)};t.InAResponseBuilder.prototype.convertToDataType=function(e,r){if(t.XString.isEqual(r,"String")&&!e.isString()||t.XString.isEqual(r,"Double")&&!e.isDouble()||t.XString.isEqual(r,"DecimalFloat")&&!e.isDouble()||t.XString.isEqual(r,"Int")&&!e.isInteger()||t.XString.isEqual(r,"Long")&&!e.isLong()||t.XString.isEqual(r,"Bool")&&!e.isBoolean()){return this.convertValueToDataType(e,r)}return e};t.InAResponseBuilder.prototype.convertValueToDataType=function(e,r){let s=this.asString(e);if(t.XStringUtils.isNullOrEmpty(s)){return this.createEmptyValue(r)}switch(r){case"String":return t.PrFactory.createString(s);case"Double":return t.PrFactory.createDouble(t.XDouble.convertFromString(s));case"DecimalFloat":return t.PrFactory.createDouble(t.XDouble.convertFromString(s));case"Int":return t.PrFactory.createInteger(t.XInteger.convertFromString(s));case"Long":return t.PrFactory.createLong(t.XLong.convertFromString(s));case"Bool":return t.PrFactory.createBoolean(t.XBoolean.convertFromString(s));default:return e}};t.InAResponseBuilder.prototype.copyDataSource=function(e){let r=this.m_inARequestParser.getDataSource();if(t.notNull(r)){let t=e.putNewStructure("DataSource");t.copyFrom(r,null)}};t.InAResponseBuilder.prototype.copySubsetDescription=function(e){let r=this.m_inARequestParser.getSubsetDescription();if(t.notNull(r)){let t=e.putNewStructure("SubSetDescription");t.copyFrom(r,null)}};t.InAResponseBuilder.prototype.createAttribute=function(e,r){let s=t.PrFactory.createStructure();s.putString("Name",t.InAParser.getName(r));s.putStringNotNull("Description",r.getStringByKey("Description"));s.putStringNotNull("Obtainability",r.getStringByKey("Obtainability"));s.putBoolean("IsKey",e);s.putNewList("Values");return s};t.InAResponseBuilder.prototype.createAttributes=function(e,r){let s=r.getListByKey("Attributes");let n=e.size();for(let r=0;r<n;r++){let n=e.getStructureAt(r);let o=t.InAParser.isKeyAttribute(n);if(o||t.InAParser.hasObtainabilityAlways(n)){s.add(this.createAttribute(o,n))}}return s};t.InAResponseBuilder.prototype.createAxis=function(e){let r=t.PrFactory.createStructure();r.putString("Name",t.XString.toUpperCase(e));r.putString("Type",e);r.putNewList("Dimensions");r.putNewList("Tuples");return r};t.InAResponseBuilder.prototype.createAxisStructure=function(e,r,s,n){let o=this.createAxis(r);let i=e.size();for(let r=0;r<i;r++){let i=e.getStructureAt(r);let a=o.getListByKey("Tuples").addNewStructure();let l=this.createValueList(a,"MemberIndexes");let u=this.createValueList(a,"ParentIndexes");let c=this.createValueList(a,"DisplayLevel");let p=this.createValueList(a,"DrillState");let S=this.createDimension(i,o);let P=this.createValueList(S,"MemberTypes");let y=this.createAttributes(i.getListByKey("Attributes"),S);let _=this.getFirstAttribute(y,true);let g;if(t.InAParser.isStructure(S)){let e=this.getFirstAttribute(y,false);let r=this.m_inARequestParser.getStructureMembers();if(t.XCollectionUtils.hasElements(r)&&t.notNull(_)){g=_.getListByKey("Values");let s=t.notNull(e)?e.getListByKey("Values"):null;let n=r.size();for(let e=0;e<n;e++){let n=r.get(e);g.addString(this.m_inARequestParser.getStructureMemberName(n));if(t.notNull(s)){s.addString(this.m_inARequestParser.getStructureMemberDescription(n))}P.addInteger(0);l.addInteger(e);u.addInteger(-1);c.addInteger(0);p.addInteger(0)}}}else{if(t.isNull(_)){this.addError(t.ErrorCodes.PARSER_ERROR,t.XStringUtils.concatenate2("No key attribute found for dimension ",t.InAParser.getName(i)));return null}let e=t.InAParser.getName(i);let r=t.InAParser.getName(_);let o=this.m_inARequestParser.getDisplayFormat(e,r);g=_.getListByKey("Values");let a=s.size();for(let i=0;i<a;i++){let a=s.getResultEntryAt(i);let S=this.convertDimensionMember(a.getElement(e,r),o);if(t.isNull(S)){this.addError(t.ErrorCodes.PARSER_ERROR,t.XStringUtils.concatenate2("Property not found in resultset entry: ",r));return null}if(t.PrUtils.contains(g,S)){if(n===1){continue}}else{this.addValuesToAllAttributes(e,y,a);P.addInteger(0)}l.addInteger(t.PrUtils.indexOf(g,S));u.addInteger(-1);c.addInteger(0);p.addInteger(0)}}}o.putInteger("TupleCount",this.getTupleCount(o));return o};t.InAResponseBuilder.prototype.createCellArraySizes=function(e,r,s){let n=0;let o=r.size();let i=t.PrUtils.getListProperty(t.PrUtils.getStructureProperty(e,"Values"),"Values");if(!t.PrUtils.isListEmpty(i)){n=i.size()/o}let a=t.PrFactory.createList();if(s){a.addInteger(o);a.addInteger(n)}else{a.addInteger(n);a.addInteger(o)}return a};t.InAResponseBuilder.prototype.createCells=function(e){let r=t.PrFactory.createStructure();let s=this.createValueList(r,"Values");let n=this.createValueList(r,"ValuesFormatted");let o=this.createValueList(r,"CellDataType");let i=this.createValueList(r,"Exceptions");let a=this.createValueList(r,"CellFormat");let l=null;let u=null;let c=null;let p=null;let S=this.m_inARequestParser.getStructureMembers();if(t.XCollectionUtils.hasElements(S)){let P=e.size();let y=S.size();for(let e=0;e<y;e++){if(t.XStringUtils.isNotNullAndNotEmpty(S.get(e).getStringByKey("UnitName"))){l=this.createValueList(r,"Units");u=this.createValueList(r,"UnitDescriptions");c=this.createValueList(r,"UnitTypes");p=this.createValueList(r,"UnitPositions");break}}for(let r=0;r<P;r++){let P=e.getResultEntryAt(r);for(let e=0;e<y;e++){let r=S.get(e);let y=this.m_inARequestParser.getStructureMemberName(r);let _=this.ensureMeasureNotNull(P.getElement(t.ProcessorConstants.CUSTOM_DIM,y));let g=t.PrUtils.getStringValueProperty(r,"DataType","DecimalFloat");s.add(this.convertToDataType(_,g));n.addString(this.asString(_));o.addString(g);i.addInteger(0);a.addString("");if(t.notNull(l)){let e=P.getElement(t.ProcessorConstants.CUSTOM_DIM,r.getStringByKey("UnitName"));let s=P.getElement(t.ProcessorConstants.CUSTOM_DIM,r.getStringByKey("UnitTextName"));let n=r.getStringByKey("UnitType");if(t.notNull(e)&&!t.XString.isEqual(n,"UDF")){l.addString(this.asString(e));u.addString(this.getUnitDescription(s,e));c.addInteger(this.getUnitTypeAsInt(n));p.addInteger(1)}else{l.addString("");u.addString("");c.addInteger(0);p.addInteger(0)}}}}}return r};t.InAResponseBuilder.prototype.createDimension=function(e,r){let s=t.PrFactory.createStructure();r.getListByKey("Dimensions").add(s);s.putString("Name",t.InAParser.getName(e));s.putStringNotNull("Description",e.getStringByKey("Description"));s.putNewList("Attributes");return s};t.InAResponseBuilder.prototype.createEmptyValue=function(e){switch(e){case"Int":return t.PrFactory.createInteger(0);case"Double":return t.PrFactory.createDouble(0);case"DecimalFloat":return t.PrFactory.createDouble(0);case"Long":return t.PrFactory.createLong(0);case"Bool":return t.PrFactory.createBoolean(false);default:return t.PrFactory.createString("")}};t.InAResponseBuilder.prototype.createErrorResponse=function(e){let r=t.PrFactory.createStructure();let s=r.putNewList("Messages");let n=e.size();for(let t=0;t<n;t++){let r=e.get(t);let n=s.addNewStructure();n.putString("Text",r.getText());n.putInteger("Type",2);n.putInteger("Number",r.getCode());n.putString("MessageClass","InAResponseBuilder")}return r};t.InAResponseBuilder.prototype.createValueList=function(t,e){let r=t.putNewStructure(e);r.putString("Encoding","None");return r.putNewList("Values")};t.InAResponseBuilder.prototype.ensureMeasureNotNull=function(e){if(t.isNull(e)){return t.PrFactory.createInteger(0)}return e};t.InAResponseBuilder.prototype.getFirstAttribute=function(t,e){let r=t.size();for(let s=0;s<r;s++){let r=t.getStructureAt(s);if(r.getBooleanByKey("IsKey")===e){return r}}return null};t.InAResponseBuilder.prototype.getTupleCount=function(e){let r=t.PrUtils.getListProperty(e,"Tuples");let s=t.PrUtils.getStructureElement(r,0);let n=t.PrUtils.getStructureProperty(s,"MemberIndexes");let o=t.PrUtils.getListProperty(n,"Values");if(t.notNull(o)){return o.size()}return 0};t.InAResponseBuilder.prototype.getUnitDescription=function(e,r){if(t.notNull(e)){return this.asString(e)}return this.asString(r)};t.InAResponseBuilder.prototype.getUnitTypeAsInt=function(e){if(t.XString.isEqual(e,"CUR")){return 1}else if(t.XString.isEqual(e,"UNI")){return 2}return-1};t.InAResponseBuilder.prototype.releaseObject=function(){t.MessageManager.prototype.releaseObject.call(this);this.m_inARequestParser=t.XObjectExt.release(this.m_inARequestParser)};t.InAResponseSerializer=function(){};t.InAResponseSerializer.prototype=new t.MessageManager;t.InAResponseSerializer.prototype._ff_c="InAResponseSerializer";t.InAResponseSerializer.create=function(e,r){let s=new t.InAResponseSerializer;s.m_inaResponse=e;s.m_inARequest=r;s.setupSessionContext(null);return s};t.InAResponseSerializer.prototype.m_currentCurrencyId=0;t.InAResponseSerializer.prototype.m_currentUnitId=0;t.InAResponseSerializer.prototype.m_inARequest=null;t.InAResponseSerializer.prototype.m_inaResponse=null;t.InAResponseSerializer.prototype.addCubeUnit=function(t,e,r,s,n,o){let i;if(r.containsKey(o)){i=r.getByKey(o).getInteger()}else{if(n===3){i=this.m_currentCurrencyId;this.m_currentCurrencyId++}else{i=this.m_currentUnitId;this.m_currentUnitId++}this.addGlobalCubeUnit(t,r,o,i)}this.addEntityCubeUnit(s,e,o,i)};t.InAResponseSerializer.prototype.addEntitiesForDimensions=function(e,r,s){let n=t.PrUtils.getListSize(r,0);for(let o=0;o<n;o++){let n=r.getStructureAt(o);let i=this.m_inaResponse.getMemberIndexesAt(s,o);if(t.isNull(i)){this.addError(t.ErrorCodes.PARSER_ERROR,t.XStringUtils.concatenate2("No member indexes found for dimension ",t.InAParser.getName(n)));return}if(t.InAParser.isStructure(n)){let r=e.getStructureByKey("0").getListByKey(t.ProcessorConstants.SD_DIMENSION_TUPLES);let s=i.size();for(let t=1;t<s;t++){let s=this.setupEntity(e,t);s.copyFrom(r,null);this.addMeasureTuple(s,i.getIntegerAt(t))}this.addMeasureTuple(r,i.getIntegerAt(0))}else{this.addTupleToAllEntities(e,i)}}};t.InAResponseSerializer.prototype.addEntityCubeUnit=function(e,r,s,n){let o=e.getListByKey(t.ProcessorConstants.SD_COMPLEX_UNITS);if(t.isNull(o)){o=e.putNewList(t.ProcessorConstants.SD_COMPLEX_UNITS)}let i=o.addNewStructure();let a=i.putNewList(t.ProcessorConstants.SD_CUBE_UNIT);let l=a.addNewStructure();l.putInteger(t.ProcessorConstants.SD_ID,n);l.putInteger(t.ProcessorConstants.SD_EXPONENT,1);r.put(s,t.XIntegerValue.create(o.size()))};t.InAResponseSerializer.prototype.addGlobalCubeUnit=function(e,r,s,n){let o=e.getListByKey(t.ProcessorConstants.SD_CUBE_UNIT_HANDLER_KEY);if(t.isNull(o)){o=e.putNewList(t.ProcessorConstants.SD_CUBE_UNIT_HANDLER_KEY)}let i=e.getListByKey(t.ProcessorConstants.SD_CUBE_UNIT_HANDLER_VALUE);if(t.isNull(i)){i=e.putNewList(t.ProcessorConstants.SD_CUBE_UNIT_HANDLER_VALUE)}o.addString(s);let a=i.addNewStructure();a.putInteger(t.ProcessorConstants.SD_ID,n);a.putInteger(t.ProcessorConstants.SD_EXPONENT,1);r.put(s,t.XIntegerValue.create(o.size()))};t.InAResponseSerializer.prototype.addMeasureTuple=function(e,r){let s=e.addNewStructure();let n=s.putNewList(t.ProcessorConstants.SD_TUPLE);let o=this.m_inaResponse.getTupleCountNonMeasureAxis();for(let t=0;t<o;t++){n.addInteger(r)}};t.InAResponseSerializer.prototype.addMeasureValuesToEntities=function(e,r){let s=e.size();if(s>0){let n=this.m_inaResponse.getValues("ValuesFormatted");let o=this.m_inaResponse.getValues("UnitTypes");let i=this.m_inaResponse.getValues("Units");let a=!t.PrUtils.isListEmpty(o)&&!t.PrUtils.isListEmpty(i);this.resetIdCounter();let l=t.XHashMapByString.create();let u=n.size();for(let c=0;c<s;c++){let p=e.getStructureByKey(t.XInteger.convertToString(c));let S=t.XHashMapByString.create();for(let e=c;e<u;e=e+s){p.getListByKey(t.ProcessorConstants.SD_STRING_VALUE).addString(n.getStringAt(e));let s=0;let u=0;if(a&&t.XStringUtils.isNotNullAndNotEmpty(i.getStringAt(e))){s=o.getIntegerAt(e);let t=i.getStringAt(e);if(!S.containsKey(t)){this.addCubeUnit(r,S,l,p,s,t)}u=S.getByKey(t).getInteger()}p.getListByKey(t.ProcessorConstants.SD_UNIT_TYPE).addInteger(s);p.getListByKey(t.ProcessorConstants.SD_UNIT_INDEX).addInteger(u)}}}};t.InAResponseSerializer.prototype.addTupleToAllEntities=function(e,r){let s=e.size();for(let n=0;n<s;n++){let s=e.getStructureByKey(t.XInteger.convertToString(n));let o=s.getListByKey(t.ProcessorConstants.SD_DIMENSION_TUPLES);let i=o.addNewStructure();i.put(t.ProcessorConstants.SD_TUPLE,r)}};t.InAResponseSerializer.prototype.createAxisStructure=function(e,r,s){let n=t.PrFactory.createStructure();n.putString(t.ProcessorConstants.SD_NAME,e);n.putInteger(t.ProcessorConstants.SD_AXIS_POSITION,r);n.putInteger(t.ProcessorConstants.SD_BEGIN_POS_IN_TUPLE,0);n.putBoolean(t.ProcessorConstants.SD_PART_OF_RESULT_GRID,true);let o=n.putNewList(t.ProcessorConstants.SD_DIMENSIONS);let i=t.PrUtils.getListSize(s,0);for(let e=0;e<i;e++){let r=s.getStructureAt(e);let n=t.InAParser.getName(r);let i=o.addNewStructure();let a=i.putNewStructure(t.ProcessorConstants.SD_MEMBERS);let l=a.putNewList(t.ProcessorConstants.SD_MEMBER_COLS);let u=a.putNewList(t.ProcessorConstants.SD_MEMBER_REF_COLS);let c=i.putNewList(t.ProcessorConstants.SD_ATTRIBUTES);let p=r.getListByKey("Attributes");let S=null;let P=p.size();for(let e=0;e<P;e++){let s=p.getStructureAt(e);let o=t.InAParser.getName(s);let i=l.addNewStructure();i.putString(t.ProcessorConstants.SD_MEMBER_COLS_COLUMN_NAME,o);i.putInteger(t.ProcessorConstants.SD_MEMBER_COLS_COLUMN_TYPE,83);let a=i.putNewList(t.ProcessorConstants.SD_VALUES);a.copyFrom(s.getListByKey("Values"),null);let P=this.createCubeAttribute(r,s);c.add(P);if(P.getBooleanByKey(t.ProcessorConstants.SD_IS_KEY_ATTRIBUTE)){S=s;let e=u.addNewStructure();e.putString(t.ProcessorConstants.SD_MEMBER_REF_COLS_COL_NAME,n);e.putString(t.ProcessorConstants.SD_MEMBER_REF_COLS_NAME,o)}}if(t.isNull(S)){this.addError(t.ErrorCodes.PARSER_ERROR,t.XStringUtils.concatenate2("No key attribute found for dimension ",n));return null}i.putString(t.ProcessorConstants.SD_NAME,n);i.putString(t.ProcessorConstants.SD_UNIQUE_NAME,t.XStringUtils.concatenate3("[",n,"]"));i.put(t.ProcessorConstants.SD_CURRENT_TYPE,this.createTypeDefinition());i.put(t.ProcessorConstants.SD_VIEW_COLUMN,this.createViewColumn(r,S));i.putBoolean(t.ProcessorConstants.SD_IS_AGGREGATABLE,!t.InAParser.isStructure(r));i.putBoolean(t.ProcessorConstants.SD_HIERARCHY_DISPLAYED,false);i.putString(t.ProcessorConstants.SD_COLUMN_NAME_IN_INPUT,n)}return n};t.InAResponseSerializer.prototype.createCube=function(){let e=t.PrFactory.createStructure();e.putInteger(t.ProcessorConstants.SD_MESSAGE_VERSION,1);let r=e.putNewList(t.ProcessorConstants.SD_CUBE_AXES);r.add(this.createAxisStructure(t.ProcessorConstants.SD_ROWS,0,this.m_inaResponse.getRowDimensions()));r.add(this.createAxisStructure(t.ProcessorConstants.SD_COLUMNS,1,this.m_inaResponse.getColumnDimensions()));e.put(t.ProcessorConstants.SD_ENTITIES,this.createEntities(e));return e.toString()};t.InAResponseSerializer.prototype.createCubeAttribute=function(e,r){let s=t.PrFactory.createStructure();let n=t.InAParser.getName(r);s.putString(t.ProcessorConstants.SD_NAME,n);s.putString(t.ProcessorConstants.SD_COLUMN_NAME_IN_INPUT,n);s.putBoolean(t.ProcessorConstants.SD_IS_KEY_ATTRIBUTE,t.PrUtils.getBooleanValueProperty(r,"IsKey",false));s.put(t.ProcessorConstants.SD_CURRENT_TYPE,this.createTypeDefinition());s.put(t.ProcessorConstants.SD_VIEW_COLUMN,this.createViewColumn(e,r));return s};t.InAResponseSerializer.prototype.createEntities=function(e){let r=t.PrFactory.createStructure();this.setupEntity(r,0);this.addEntitiesForDimensions(r,this.m_inaResponse.getRowDimensions(),"Rows");this.addEntitiesForDimensions(r,this.m_inaResponse.getColumnDimensions(),"Columns");this.addMeasureValuesToEntities(r,e);return r};t.InAResponseSerializer.prototype.createSerializedData=function(){if(!this.m_inARequest.isValid()||!this.m_inaResponse.isValid()){this.addError(t.ErrorCodes.PARSER_ERROR,"Request or response structure is not valid");return null}let e=this.createView();let r=this.createCube();let s=t.XByteArray.create(null,8);s.setByteAt(5,1);let n=t.XCollectionUtils.concatenateByteArrays(s,t.XByteArray.convertFromString(e));let o=t.XCollectionUtils.concatenateByteArrays(s,t.XByteArray.convertFromString(r));let i=t.PrFactory.createStructure();i.putString("View",t.XHttpUtils.encodeByteArrayToBase64(n));i.putString("Cube",t.XHttpUtils.encodeByteArrayToBase64(o));return i};t.InAResponseSerializer.prototype.createTypeDefinition=function(){let e=t.PrFactory.createStructure();e.putInteger(t.ProcessorConstants.SD_TYPE_VALUE_CLASS,83);return e};t.InAResponseSerializer.prototype.createView=function(){let e=this.m_inARequest.getDataSource();let r=t.PrFactory.createStructure();r.putString(t.ProcessorConstants.SD_DESCRIPTION,e.getStringByKeyExt("ObjectName",""));r.putInteger(t.ProcessorConstants.SD_MESSAGE_VERSION,1);r.putInteger(t.ProcessorConstants.SD_LAST_CHANGED_AT,0);let s=r.putNewList(t.ProcessorConstants.SD_DIMENSION_MAP);let n=r.putNewList(t.ProcessorConstants.SD_VIEW_COLUMNS);let o=this.m_inARequest.getAllDimensions();let i=o.size();for(let e=0;e<i;e++){let r=o.getStructureAt(e);let i=null;let a=r.getListByKey("Attributes");let l=a.size();for(let e=0;e<l;e++){let s=a.getStructureAt(e);n.add(this.createViewColumn(r,s));if(t.isNull(i)||s.getBooleanByKeyExt("IsKey",false)){i=t.InAParser.getName(s)}}s.add(this.createViewDimension(r,i))}let a=r.putNewStructure(t.ProcessorConstants.SD_DATA_SOURCE_KEY);a.copyFrom(e,null);a.remove("GenericServiceDescription");a.putBoolean(t.ProcessorConstants.SD_IS_TEMPORARY,false);return r.toString()};t.InAResponseSerializer.prototype.createViewColumn=function(e,r){let s=t.InAParser.getName(r);let n=t.InAParser.isStructure(e);let o=t.InAParser.isKeyAttribute(r);let i=t.PrFactory.createStructure();let a=i.putNewList(t.ProcessorConstants.SD_DIMENSIONS);a.addString(t.InAParser.getName(e));i.putString(t.ProcessorConstants.SD_SQL_TYPE,t.ProcessorConstants.SD_SQL_TYPE_STRG);i.putBoolean(t.ProcessorConstants.SD_IS_MEASURE,n);i.put(t.ProcessorConstants.SD_TYPE,this.createTypeDefinition());i.putString(t.ProcessorConstants.SD_DESCRIPTION,s);i.putString(t.ProcessorConstants.SD_NAME_IN_VIEW,s);i.putInteger(t.ProcessorConstants.SD_UNIT_TYPE,0);i.putInteger(t.ProcessorConstants.SD_AGGREGATION,0);i.putBoolean(t.ProcessorConstants.SD_IS_VIRTUAL_DESCRIPTION,false);i.putBoolean(t.ProcessorConstants.SD_EXISTS_UNIT_CONVERSION,false);i.putBoolean(t.ProcessorConstants.SD_EXISTS_RESTRICTION,false);i.putBoolean(t.ProcessorConstants.SD_IS_DESCRIPTION_COLUMN,!o);i.putBoolean(t.ProcessorConstants.SD_IS_DESCRIPTION_FROM_KEY_COLUMN,false);return i};t.InAResponseSerializer.prototype.createViewDimension=function(e,r){let s=t.InAParser.getName(e);let n=t.PrFactory.createStructure();n.putString(t.ProcessorConstants.SD_KEY,s);let o=n.putNewStructure(t.ProcessorConstants.SD_VALUE);o.putString(t.ProcessorConstants.SD_NAME,s);o.putString(t.ProcessorConstants.SD_UNIQUE_NAME,t.XStringUtils.concatenate3("[",s,"]"));o.putString(t.ProcessorConstants.SD_DESCRIPTION,s);o.putBoolean(t.ProcessorConstants.SD_IS_MODELED,true);o.putBoolean(t.ProcessorConstants.SD_USE_UNIQUE_ATTRIBUTE_NAME,false);o.putString(t.ProcessorConstants.SD_KEY_COLUMN_NAME,r);if(t.InAParser.isStructure(e)){o.putInteger(t.ProcessorConstants.SD_DIMENSION_TYPE,2);o.putBoolean(t.ProcessorConstants.SD_IS_DIMENSION_GROUP,true);let r=e.getListByKey("Members");let s=o.putNewList(t.ProcessorConstants.SD_DIMENSION_MEMBERS);let n=r.size();for(let e=0;e<n;e++){let n=r.getStructureAt(e);let o=this.m_inARequest.getStructureMemberName(n);let i=this.m_inARequest.getStructureMemberDescription(n);if(t.XStringUtils.isNotNullAndNotEmpty(o)){let e=s.addNewStructure();e.putString(t.ProcessorConstants.SD_NAME,o);e.putString(t.ProcessorConstants.SD_DESCRIPTION,i)}}}else{o.putInteger(t.ProcessorConstants.SD_DIMENSION_TYPE,3);o.putBoolean(t.ProcessorConstants.SD_IS_DIMENSION_GROUP,false)}return n};t.InAResponseSerializer.prototype.releaseObject=function(){t.MessageManager.prototype.releaseObject.call(this);this.m_inaResponse=null;this.m_inARequest=null};t.InAResponseSerializer.prototype.resetIdCounter=function(){this.m_currentCurrencyId=16;this.m_currentUnitId=256};t.InAResponseSerializer.prototype.setupEntity=function(e,r){let s=e.putNewStructure(t.XInteger.convertToString(r));s.putNewList(t.ProcessorConstants.SD_HAS_EXCEPTION_SETTINGS).addBoolean(false);s.putNewList(t.ProcessorConstants.SD_IS_HIDDEN).addBoolean(false);s.putNewList(t.ProcessorConstants.SD_AGGREGATION).addInteger(0);s.putNewList(t.ProcessorConstants.SD_DIGITS_SHIFT).addInteger(0);s.putNewList(t.ProcessorConstants.SD_FRACT_DIGITS).addInteger(0);s.putNewList(t.ProcessorConstants.SD_TYPE_INT_DIGITS).addInteger(32);s.putNewList(t.ProcessorConstants.SD_RESULT_STRUCTURE).addString(t.ProcessorConstants.SD_RESULT_STRUCTURE_SEMANTIC_MEMBERS);s.putNewList(t.ProcessorConstants.SD_VALUE_CLASS).addString(t.ProcessorConstants.SD_VALUE_CLASS_STRING);s.putNewList(t.ProcessorConstants.SD_VALUE_EXCEPTION_TYPE).addString(t.ProcessorConstants.SD_VALUE_EXCEPTION_NORMAL);s.putNewList(t.ProcessorConstants.SD_STRING_VALUE);s.putNewList(t.ProcessorConstants.SD_UNIT_INDEX);s.putNewList(t.ProcessorConstants.SD_UNIT_TYPE);return s.putNewList(t.ProcessorConstants.SD_DIMENSION_TUPLES)};t.GSAMetadataBuilder=function(){};t.GSAMetadataBuilder.prototype=new t.InAMetadataBuilder;t.GSAMetadataBuilder.prototype._ff_c="GSAMetadataBuilder";t.GSAMetadataBuilder.create=function(){let e=new t.GSAMetadataBuilder;e.setupSessionContext(null);return e};t.GSAMetadataBuilder.prototype.createCatalogServiceDimensionProperty=function(t){return null};t.GSAMetadataBuilder.prototype.createDimensions=function(e){let r=t.PrFactory.createList();let s=e.getListByKey(t.ProcessorGSAConstants.DIMENSIONS);let n=t.PrUtils.getListSize(s,0);for(let e=0;e<n;e++){let n=s.getStructureAt(e);let o=n.getStringByKey(t.ProcessorGSAConstants.NAME);let i=n.getStringByKeyExt(t.ProcessorGSAConstants.DESCRIPTION,o);let a=null;let l=null;let u=t.XList.create();let c=n.getListByKey(t.ProcessorGSAConstants.ATTRIBUTES);let p=c.size();for(let e=0;e<p;e++){let r=c.getStructureAt(e);let s=r.getStringByKey(t.ProcessorGSAConstants.NAME);let n=r.getStringByKey(t.ProcessorGSAConstants.DESCRIPTION);let o=r.getStringByKey(t.ProcessorGSAConstants.TYPE);let i=r.getIntegerByKeyExt(t.ProcessorGSAConstants.LENGTH,0);let p=t.GSAMdProperty.create(s,n,o,i);if(t.isNull(a)&&r.getBooleanByKeyExt(t.ProcessorGSAConstants.IS_KEY,false)){a=p}else if(t.isNull(l)&&r.getBooleanByKeyExt(t.ProcessorGSAConstants.IS_DEFAULT_TEXT,false)){l=p}else{u.add(p)}}r.add(this.createDimensionExt(o,i,a,l,u))}let o=this.createMeasureDimension(e);if(t.notNull(o)){r.add(o)}return r};t.GSAMetadataBuilder.prototype.createMeasureDimension=function(e){let r=null;let s=e.getListByKey(t.ProcessorGSAConstants.MEASURES);let n=t.PrUtils.getListSize(s,0);for(let e=0;e<n;e++){let n=s.getStructureAt(e);let o=n.getStringByKey(t.ProcessorGSAConstants.NAME);let i=n.getStringByKey(t.ProcessorGSAConstants.DESCRIPTION);let a=n.getStringByKey(t.ProcessorGSAConstants.TYPE);let l=n.getIntegerByKeyExt(t.ProcessorGSAConstants.NUMERIC_PRECISION,-1);let u=n.getIntegerByKeyExt(t.ProcessorGSAConstants.NUMERIC_SCALE,-1);r=this.createMeasure(t.GSAMdProperty.createMeasure(o,i,a,l,u))}return r};t.GSAMetadataBuilder.prototype.createMetadata=function(e){let r=e.asStructure();let s=t.InARequestParser.create(r);let n=s.getServiceDescription();if(t.isNull(n)){this.addErrorWithMessage("Service description is missing");return null}let o=t.PrFactory.createStructure();let i=o.putNewStructure("Cube");i.put("Capabilities",t.PrUtils.createDeepCopy(s.getCapabilities()));i.put("DataSource",t.PrUtils.createDeepCopy(s.getDataSource()));i.put("Dimensions",this.createDimensions(n));i.putIfNotNull("Variables",this.createVariables(n));t.XObjectExt.release(s);return o};t.GSAMetadataBuilder.prototype.createVariables=function(e){let r=t.PrFactory.createList();let s=e.getListByKey(t.ProcessorGSAConstants.PARAMETERS);let n=t.PrUtils.getListSize(s,0);for(let e=0;e<n;e++){let n=s.getStructureAt(e);if(n.getBooleanByKeyExt(t.ProcessorGSAConstants.IS_VARIABLE,true)){let e=n.getStringByKey(t.ProcessorGSAConstants.NAME);let s=n.getStringByKey(t.ProcessorGSAConstants.DESCRIPTION);let o=n.getStringByKey(t.ProcessorGSAConstants.VALUE_TYPE);let i=n.getByKey(t.ProcessorGSAConstants.DEFAULT_VALUE);let a=n.getBooleanByKeyExt(t.ProcessorGSAConstants.IS_MANDATORY,false);r.add(this.createVariable(e,s,a,o,i))}}return r.hasElements()?r:null};t.ProcessorGSA=function(){};t.ProcessorGSA.prototype=new t.DfProcessor;t.ProcessorGSA.prototype._ff_c="ProcessorGSA";t.ProcessorGSA.create=function(){let e=new t.ProcessorGSA;e.setupProcessor();return e};t.ProcessorGSA.prototype.getMetadataUrl=function(t,e){return null};t.ProcessorGSA.prototype.getResultsetUrl=function(e,r){let s=this.getUrl(e);let n=t.GSAResultSetUrl.createUrl(s,this.getObjectNameFromRequest(r),r);return t.XCollectionUtils.singletonList(t.InAProcessorRequest.create(n,t.ContentType.APPLICATION_JSON,null))};t.ProcessorGSA.prototype.parseResonse=function(e){let r=e.get(0);let s=r.getResponse();if(t.notNull(s)){return s}return t.PrFactory.createString(r.getResponseAsString())};t.ProcessorGSA.prototype.processCapabilities=function(e){let r=t.XList.create();r.add(t.InACapabilities.C012_ENCODED_RESULTSET);r.add(t.InACapabilities.C048_MEMBER_VISIBILITY);r.add(t.InACapabilities.C005_OBTAINABILITY);r.add(t.InACapabilities.C003_CLIENT_CAPABILITIES);r.add(t.InACapabilities.C004_METADATA_SERVICE);r.add(t.InACapabilities.C007_RESPONSE_FIXED_ATTRIBUTE_SEQUENCE);r.add(t.InACapabilities.C001_DATASOURCE_AT_SERVICE);r.add(t.InACapabilities.C091_CUBE_BLENDING);r.add(t.InACapabilities.C093_REMOTE_BLENDING);let s=t.XHashMapByString.create();this.addServiceWithCapabilities(s,e,"Analytics",r,t.XList.create());return t.InAServerInfoBuilder.buildServerInfoResponse(s,this.getSystemDescription(e).getLanguage(),e)};t.ProcessorGSA.prototype.processMetadata=function(e,r){let s=t.GSAMetadataBuilder.create();let n=s.createMetadata(r);this.copyAllMessages(s);t.XObjectExt.release(s);return t.InAProcessorResult.create(n)};t.ProcessorGSA.prototype.processResultset=function(e,r){let s=t.InARequestParser.create(r);let n=t.InAResponseBuilder.create(s);let o=null;let i=this.parseResonse(e);if(t.notNull(i)){let e=t.GSAResult.createGenericServiceResult(i,s);let r=t.OrderedProcessorResult.create(e,s.getNonMeasureAxis());o=n.convert(r);this.copyAllMessages(n)}else{this.addError(t.ErrorCodes.PARSER_ERROR,"Response from service could not be read")}if(t.isNull(o)){o=n.createErrorResponse(this.getErrors())}t.XObjectExt.release(n);return t.InAProcessorResult.create(o)};t.ODataMetadataConverter=function(){};t.ODataMetadataConverter.prototype=new t.InAMetadataBuilder;t.ODataMetadataConverter.prototype._ff_c="ODataMetadataConverter";t.ODataMetadataConverter.create=function(){let e=new t.ODataMetadataConverter;e.setupSessionContext(null);return e};t.ODataMetadataConverter.prototype.addDimensionAttribute=function(e,r,s,n){let o=e.getStringByKey("Name");let i=t.XStringUtils.concatenate2(r,n.getNameWithoutPrefix());let a=t.XStringUtils.concatenate2(r,n.getName());if(s){a=t.XStringUtils.concatenate3(e.getStringByKey("Name"),"/",a)}e.getStructureByKey("AttributeHierarchy").getListByKey("Children").add(this.createAttributesHierarchy(a,i,a,null));e.getListByKey("Attributes").add(this.createField(a,n.getDescription(),o,n.getDataType(),n.getMaxLength(),n,false))};t.ODataMetadataConverter.prototype.addPropertyToDimension=function(e,r,s,n,o){if(o.isComplexDataType()){this.extendInADimensionByComplexProperty(e,o.getOriginDataType(),r,t.XStringUtils.concatenate3(s,o.getName(),"/"))}else{this.addDimensionAttribute(e,s,n,o)}};t.ODataMetadataConverter.prototype.checkODataVersion=function(e,r){let s=t.PrUtils.getStructureProperty(e,t.ProcessorODataConstants.MD_ENTITY_DATA_MODEL);let n=t.PrUtils.getStructureProperty(s,t.ProcessorODataConstants.MD_DATA_SERVICES);let o=t.PrUtils.getStringValueProperty(n,t.ProcessorODataConstants.MD_PROPERTY_DATA_SERVICE_VERSION,null);if(t.isNull(o)){o=t.PrUtils.getStringValueProperty(s,t.ProcessorODataConstants.MD_PROPERTY_VERSION,null)}let i=this.parseVersion(o);if(i<0){this.addWarning(t.ErrorCodes.PARSER_ERROR,"OData service version could not be parsed")}if(i>r){this.addError(t.ErrorCodes.PARSER_ERROR,t.XStringUtils.concatenate4("OData Version ",o," is not supported, max supported: ",t.XInteger.convertToString(r)))}};t.ODataMetadataConverter.prototype.createCatalogServiceDimensionProperty=function(e){let r=t.PrFactory.createStructure();r.putString(t.ProcessorODataConstants.MD_PROPERTY_NAME,e);r.putBoolean(t.ProcessorODataConstants.MD_PROPERTY_SAP_SORTABLE,false);r.putString(t.ProcessorODataConstants.MD_PROPERTY_TYPE,t.ProcessorODataConstants.MD_VALUETYPE_STRING);return t.ODataProperty.create(r,t.PrFactory.createList())};t.ODataMetadataConverter.prototype.createComparisonOperators=function(){let e=t.PrFactory.createList();e.addString("=");e.addString(">");e.addString(">=");e.addString("<");e.addString("<=");e.addString("<>");e.addString("BETWEEN");e.addString("BETWEEN_EXCLUDING");e.addString("NOTBETWEEN");e.addString("NOT_BETWEEN_EXCLUDING");e.addString("MATCH");return e};t.ODataMetadataConverter.prototype.createExtendedSortTypes=function(e,r,s){let n=t.PrFactory.createList();if(e){n.addString("Measure")}if(r){n.addString("MemberKey")}if(s){n.addString("MemberText")}return n};t.ODataMetadataConverter.prototype.createInADimensions=function(e,r){let s=t.PrUtils.getPropertyAsList(e,t.ProcessorODataConstants.MD_PROPERTY);if(t.PrUtils.isListEmpty(s)){this.addError(t.ErrorCodes.PARSER_ERROR,t.XStringUtils.concatenate3("No properties found for entity type '",e.toString(),"'"));return null}let n=t.PrFactory.createList();let o=s.size();let i=t.XList.create();let a=t.XList.create();for(let e=0;e<o;e++){let r=s.getStructureAt(e);let n=this.getName(r);if(t.XStringUtils.isNullOrEmpty(n)){this.addError(t.ErrorCodes.PARSER_ERROR,"Property name not found");return null}i.add(n);a.add(r.getStringByKey(t.ProcessorODataConstants.MD_PROPERTY_SAP_TEXT))}for(let e=0;e<o;e++){let o=s.getStructureAt(e);if(a.contains(this.getName(o))){continue}let l=null;let u=i.getIndex(o.getStringByKey(t.ProcessorODataConstants.MD_PROPERTY_SAP_TEXT));if(u>-1){l=t.ODataProperty.create(s.getStructureAt(u),s)}let c=t.ODataProperty.create(o,s);let p;if(c.isMeasure()){p=this.createMeasure(c)}else{if(c.isComplexDataType()){o.putBoolean(t.ProcessorODataConstants.MD_PROPERTY_SAP_FILTERABLE,false);p=this.createDimension(c,l);this.extendInADimensionByComplexProperty(p,c.getOriginDataType(),r,"")}else{p=this.createDimension(c,l)}}if(!n.contains(p)){n.add(p)}t.XObjectExt.release(c);t.XObjectExt.release(l)}return n};t.ODataMetadataConverter.prototype.createInADimensionsFromEntity=function(e,r){for(let s=0;s<e.size();s++){let n=e.getStructureAt(s);let o=t.PrUtils.getStructureProperty(n,t.ProcessorODataConstants.MD_ENTITY_CONTAINER);let i=this.getEntitySetByName(o,r);if(t.notNull(i)){let r=i.getStringByKey(t.ProcessorODataConstants.MD_PROPERTY_ENTITY_TYPE);let s=this.getEntityType(e,r);if(t.isNull(s)){this.addError(t.ErrorCodes.PARSER_ERROR,t.XStringUtils.concatenate3("EntityType '",r,"' not found"));return null}let n=this.createInADimensions(s,e);this.extendInADimensionsByNavigationProperties(n,e,s);return n}}this.addError(t.ErrorCodes.PARSER_ERROR,t.XStringUtils.concatenate3("EntitySet with name '",r,"' not found"));return null};t.ODataMetadataConverter.prototype.createSortTypes=function(e){if(t.isNull(e)){return null}let r=t.XHashSetOfString.create();let s=e.size();for(let t=0;t<s;t++){let s=e.getStructureAt(t).getListByKey("ExtendedSortTypes");for(let t=0;t<s.size();t++){r.add(s.getStringAt(t))}}return t.PrFactory.createList().addAllStrings(r.getValuesAsReadOnlyList())};t.ODataMetadataConverter.prototype.extendDimensionByEntity=function(e,r,s,n,o){if(t.isNull(e)||t.isNull(r)||t.isNull(n)){return}let i=t.PrUtils.getPropertyAsList(r,t.ProcessorODataConstants.MD_PROPERTY);let a=t.PrUtils.getStructureWithKeyValuePair(i,t.ProcessorODataConstants.MD_PROPERTY_NAME,n);let l=t.PrUtils.getStringValueProperty(a,t.ProcessorODataConstants.MD_PROPERTY_SAP_TEXT,null);let u=t.PrUtils.getStructureWithKeyValuePair(i,t.ProcessorODataConstants.MD_PROPERTY_NAME,l);let c=e.getStructureByKey("AttributeHierarchy");if(t.notNull(u)&&t.XString.isEqual(c.getStringByKey("DefaultKeyAttribute"),c.getStringByKey("DefaultTextAttribute"))){this.addDimensionTextField(t.ODataProperty.createWithPrefix(u,i,s),e,true)}else{u=null}let p=i.size();for(let r=0;r<p;r++){let n=i.getStructureAt(r);if(n!==a&&n!==u){this.addPropertyToDimension(e,o,"",false,t.ODataProperty.createWithPrefix(n,i,s))}}};t.ODataMetadataConverter.prototype.extendInADimensionByComplexProperty=function(e,r,s,n){let o=this.getComplexType(s,r);let i=t.PrUtils.getListProperty(o,t.ProcessorODataConstants.MD_PROPERTY);if(t.notNull(i)){t.XStream.of(i).filter(t=>t.isStructure()).map(e=>{let r=e.asStructure();r.putBoolean(t.ProcessorODataConstants.MD_PROPERTY_SAP_FILTERABLE,false);return t.ODataProperty.create(r,i)}).forEach(t=>{this.addPropertyToDimension(e,s,n,true,t)})}};t.ODataMetadataConverter.prototype.extendInADimensionsByNavigationProperties=function(e,r,s){let n=t.PrUtils.getPropertyAsList(s,t.ProcessorODataConstants.MD_NAVIGATION_PROPERTY);if(t.isNull(n)||t.PrUtils.isListEmpty(e)){return}let o=n.size();for(let s=0;s<o;s++){let o=n.getStructureAt(s);let i=t.PrUtils.getStringValueProperty(o,t.ProcessorODataConstants.MD_PROPERTY_NAME,null);let a=t.PrUtils.getStringValueProperty(o,t.ProcessorODataConstants.MD_PROPERTY_RELATIONSHIP,null);let l=t.PrUtils.getStringValueProperty(o,t.ProcessorODataConstants.MD_PROPERTY_FROM_ROLE,null);let u=t.PrUtils.getStringValueProperty(o,t.ProcessorODataConstants.MD_PROPERTY_TO_ROLE,null);let c=this.getNavigationPropertySchema(r,a);if(t.isNull(i)||t.isNull(a)||t.isNull(u)||t.isNull(l)||t.isNull(c)){continue}let p=this.removeNamespace(c,a);let S=t.PrUtils.getPropertyAsList(c,t.ProcessorODataConstants.MD_ASSOCIATION);let P=t.PrUtils.getStructureWithKeyValuePair(S,t.ProcessorODataConstants.MD_PROPERTY_NAME,p);let y=t.PrUtils.getPropertyAsList(P,t.ProcessorODataConstants.MD_END);let _=t.PrUtils.getStructureWithKeyValuePair(y,t.ProcessorODataConstants.MD_PROPERTY_ROLE,u);let g=t.PrUtils.getStringValueProperty(_,t.ProcessorODataConstants.MD_PROPERTY_MULTIPLICITY,null);if(!t.XString.containsString(g,"*")&&t.notNull(P)&&P.containsKey(t.ProcessorODataConstants.MD_REFERENTIAL_CONSTRAINT)){let s=this.getPropertyRefByRole(P,l);let n=this.getPropertyRefByRole(P,u);let o=t.PrUtils.getStructureWithKeyValuePair(e,"Name",s);let a=t.PrUtils.getStringValueProperty(_,t.ProcessorODataConstants.MD_PROPERTY_TYPE,null);let c=this.getEntityType(r,a);this.extendDimensionByEntity(o,c,i,n,r)}}};t.ODataMetadataConverter.prototype.getComplexType=function(e,r){return this.getTypeStructure(e,r,t.ProcessorODataConstants.MD_COMPLEX_TYPE)};t.ODataMetadataConverter.prototype.getEntitySetByName=function(e,r){let s=t.PrUtils.getPropertyAsList(e,t.ProcessorODataConstants.MD_ENTITY_SET);return t.PrUtils.getStructureWithKeyValuePair(s,t.ProcessorODataConstants.MD_PROPERTY_NAME,r)};t.ODataMetadataConverter.prototype.getEntityType=function(e,r){return this.getTypeStructure(e,r,t.ProcessorODataConstants.MD_ENTITY_TYPE)};t.ODataMetadataConverter.prototype.getName=function(e){return t.PrUtils.getStringValueProperty(e,t.ProcessorODataConstants.MD_PROPERTY_NAME,null)};t.ODataMetadataConverter.prototype.getNavigationPropertySchema=function(e,r){if(t.notNull(r)){let s=e.size();for(let n=0;n<s;n++){let s=e.getStructureAt(n);let o=s.getStringByKey(t.ProcessorODataConstants.MD_PROPERTY_NAMESPACE);if(t.notNull(o)&&t.XString.startsWith(r,o)){return s}}}return null};t.ODataMetadataConverter.prototype.getPropertyRefByRole=function(e,r){let s=null;let n=e.getStructureByKey(t.ProcessorODataConstants.MD_REFERENTIAL_CONSTRAINT);let o=n.getStructureByKey(t.ProcessorODataConstants.MD_PRINCIPAL);let i=n.getStructureByKey(t.ProcessorODataConstants.MD_DEPENDENT);if(t.XString.isEqual(r,t.PrUtils.getStringValueProperty(o,t.ProcessorODataConstants.MD_PROPERTY_ROLE,null))){s=o}else if(t.XString.isEqual(r,t.PrUtils.getStringValueProperty(i,t.ProcessorODataConstants.MD_PROPERTY_ROLE,null))){s=i}let a=t.PrUtils.getStructureProperty(s,t.ProcessorODataConstants.MD_PROPERTY_REF);return t.PrUtils.getStringValueProperty(a,t.ProcessorODataConstants.MD_PROPERTY_NAME,null)};t.ODataMetadataConverter.prototype.getSchemas=function(e){let r=t.PrUtils.getStructureProperty(e,t.ProcessorODataConstants.MD_ENTITY_DATA_MODEL);let s=t.PrUtils.getStructureProperty(r,t.ProcessorODataConstants.MD_DATA_SERVICES);let n=t.PrUtils.getPropertyAsList(s,t.ProcessorODataConstants.MD_SCHEMA);if(t.isNull(n)){this.addError(t.ErrorCodes.PARSER_ERROR,"No schemas found in metadata response")}return n};t.ODataMetadataConverter.prototype.getSupportedContentType=function(e,r){for(let s=0;s<e.size();s++){let n=t.PrUtils.getStructureProperty(e.getStructureAt(s),t.ProcessorODataConstants.MD_ENTITY_CONTAINER);if(this.getEntitySetByName(n,r)!==null){let e=t.XStringTokenizer.splitString(t.PrUtils.getStringValueProperty(n,t.ProcessorODataConstants.MD_PROPERTY_SAP_SUPPORTED_FORMATS,null)," ");if(t.notNull(e)){if(e.contains(t.ContentType.JSON.getName())){return t.ContentType.APPLICATION_JSON}if(e.contains(t.ContentType.ATOM.getName())){return t.ContentType.APPLICATION_XML}}}}return t.ContentType.APPLICATION_JSON};t.ODataMetadataConverter.prototype.getTypeStructure=function(e,r,s){if(t.isNull(e)||t.isNull(r)){return null}let n=e.size();for(let o=0;o<n;o++){let n=e.getStructureAt(o);let i=this.removeNamespace(n,r);let a=t.PrUtils.getPropertyAsList(n,s);let l=t.PrUtils.getStructureWithKeyValuePair(a,t.ProcessorODataConstants.MD_PROPERTY_NAME,i);if(t.notNull(l)){return l}}return null};t.ODataMetadataConverter.prototype.parseVersion=function(e){if(t.XStringUtils.isNullOrEmpty(e)){return-1}let r=t.XMath.max(t.XString.indexOf(e,"."),1);return t.XInteger.convertFromStringWithDefault(t.XString.substring(e,0,r),-1)};t.ODataMetadataConverter.prototype.removeNamespace=function(e,r){if(t.notNull(e)&&e.containsKey(t.ProcessorODataConstants.MD_PROPERTY_NAMESPACE)){let s=e.getStringByKey(t.ProcessorODataConstants.MD_PROPERTY_NAMESPACE);if(t.XString.startsWith(r,s)){return t.XString.substring(r,t.XString.size(s)+1,t.XString.size(r))}}return null};t.ProcessorODataBase=function(){};t.ProcessorODataBase.prototype=new t.DfProcessor;t.ProcessorODataBase.prototype._ff_c="ProcessorODataBase";t.ProcessorODataBase.prototype.convertResponseToInA=function(e,r,s){if(r.isCatalogServiceRequest()){let n=t.ODataResult.create(e.asStructure(),true,r);let o=r.getFilterSelection();if(t.notNull(o)){n=t.CatalogResultFilter.create(n,o)}return s.convert(n)}let n=t.ODataResult.create(e.asStructure(),false,r);let o=t.OrderedProcessorResult.create(n,r.getNonMeasureAxis());return s.convert(o)};t.ProcessorODataBase.prototype.getMetadataUrl=function(e,r){if(t.InARequestParser.isCatalogServiceRequested(r)){return null}let s=t.XUri.createFromUrl(t.XStringUtils.concatenate3(this.getUrl(e),t.XUri.PATH_SEPARATOR,t.ProcessorODataConstants.PARAM_METADATA));return t.XCollectionUtils.singletonList(t.InAProcessorRequest.create(s,t.ContentType.APPLICATION_XML,null))};t.ProcessorODataBase.prototype.getResultsetUrl=function(e,r){if(t.InARequestParser.isCatalogServiceRequested(r)){let r=t.XUri.createFromUrl(t.XStringUtils.concatenate2(this.getUrl(e),t.XUri.PATH_SEPARATOR));return t.XCollectionUtils.singletonList(t.InAProcessorRequest.create(r,t.ContentType.APPLICATION_XML,null))}let s=this.getObjectNameFromRequest(r);let n=t.ODataResultSetUrl.createUrl(this.getUrl(e),s,r);return t.XCollectionUtils.singletonList(t.InAProcessorRequest.create(n,null,null))};t.ProcessorODataBase.prototype.processCapabilities=function(e){return t.InAServerInfoBuilder.buildServerInfoResponse(this.getCapabilities(e),this.getSystemDescription(e).getLanguage(),e)};t.ProcessorODataBase.prototype.processMetadata=function(e,r){let s=t.ODataMetadataConverter.create();if(t.InARequestParser.isCatalogServiceRequested(r)){let e=s.createCatalogServiceMetadata();t.XObjectExt.release(s);return t.InAProcessorResult.create(e)}let n=null;let o=e.get(0).getResponse();if(t.notNull(o)){let e=s.getSchemas(o.asStructure());s.checkODataVersion(o.asStructure(),this.getMaxSupportedODataVersion());if(s.isValid()){let o=this.getObjectNameFromRequest(r);let i=s.createInADimensionsFromEntity(e,o);let a=r.getStructureByKey("Metadata");if(s.isValid()){let r=t.PrFactory.createStructure();let l=r.putNewStructure("Cube");this.put(l,"Dimensions",i);this.put(l,"ExtendedSortTypes",s.createSortTypes(i));this.put(l,"DataSource",t.PrUtils.createDeepCopy(t.PrUtils.getStructureProperty(a,"DataSource")));this.put(l,"Capabilities",t.PrUtils.createDeepCopy(t.PrUtils.getListProperty(a,"Capabilities")));n=t.InAProcessorResult.createWithContentType(r,s.getSupportedContentType(e,o))}}this.copyAllMessages(s);t.XObjectExt.release(s)}if(this.hasErrors()){return null}return n};t.ProcessorODataBase.prototype.processResultset=function(e,r){let s=null;let n=e.get(0).getResponse();if(t.notNull(n)){let e=t.InARequestParser.create(r);let o=t.InAResponseBuilder.create(e);s=this.convertResponseToInA(n,e,o);this.copyAllMessages(o);if(t.isNull(s)){s=o.createErrorResponse(this.getErrors())}t.XObjectExt.release(o)}else{this.addError(t.ErrorCodes.PARSER_ERROR,"OData response could not be read")}return t.InAProcessorResult.create(s)};t.ProcessorODataBase.prototype.put=function(e,r,s){if(t.notNull(s)){e.put(r,s)}};t.ProcessorSCP=function(){};t.ProcessorSCP.prototype=new t.DfProcessor;t.ProcessorSCP.prototype._ff_c="ProcessorSCP";t.ProcessorSCP.create=function(){let e=new t.ProcessorSCP;e.setupProcessor();return e};t.ProcessorSCP.prototype.addQueryParametersToUrl=function(t,e){let r=e.getKeysAsReadOnlyList();let s=r.size();for(let n=0;n<s;n++){let s=r.get(n);t.addQueryElement(s,e.getByKey(s))}};t.ProcessorSCP.prototype.convertToInA=function(e,r,s){if(e.isCatalogServiceRequest()){let n=t.GenericResult.create(s,e);let o=e.getFilterSelection();if(t.notNull(o)){n=t.CatalogResultFilter.create(n,o)}return r.convert(n)}let n=t.GenericResult.create(s,e);let o=t.OrderedProcessorResult.create(n,e.getNonMeasureAxis());return r.convert(o)};t.ProcessorSCP.prototype.getMetadataUrl=function(e,r){if(t.InARequestParser.isCatalogServiceRequested(r)){return null}let s=this.getObjectNameFromRequest(r);let n=t.XStringUtils.concatenate4(this.getUrl(e),t.ProcessorSCPConstants.URI_OBJECTS,"/",s);let o=t.XUri.createFromUrl(t.XStringUtils.concatenate2(n,t.ProcessorSCPConstants.URI_DOCS));o.addQueryElement(t.ProcessorSCPConstants.URI_DOCS_PARAM_DISCOVERY,"false");o.addQueryElement(t.ProcessorSCPConstants.URI_DOCS_PARAM_REFERENCES,"false");o.addQueryElement(t.ProcessorSCPConstants.URI_DOCS_PARAM_BASIC,"true");let i=t.XUri.createFromUrl(t.XStringUtils.concatenate2(n,t.ProcessorSCPConstants.URI_METADATA));let a=t.XList.create();a.add(t.InAProcessorRequest.create(o,t.ContentType.APPLICATION_JSON,t.ProcessorSCPConstants.URI_DOCS));a.add(t.InAProcessorRequest.create(i,t.ContentType.APPLICATION_JSON,t.ProcessorSCPConstants.URI_METADATA));return a};t.ProcessorSCP.prototype.getResultsetUrl=function(e,r){let s=this.getUrl(e);let n;let o=t.InARequestParser.create(r);if(o.isCatalogServiceRequest()){n=t.XUri.createFromUrl(t.XStringUtils.concatenate2(s,t.ProcessorSCPConstants.URI_OBJECTS))}else{let e=o.getVariableValues();let i=this.getPackageNameFromRequest(r);let a=this.replacePathVariables(i,e);n=t.XUri.createFromUrl(t.XStringUtils.concatenate2(s,a));this.addQueryParametersToUrl(n,e)}t.XObjectExt.release(o);return t.XCollectionUtils.singletonList(t.InAProcessorRequest.create(n,null,null))};t.ProcessorSCP.prototype.processCapabilities=function(e){let r=t.XList.create();r.add(t.InACapabilities.C012_ENCODED_RESULTSET);r.add(t.InACapabilities.C048_MEMBER_VISIBILITY);r.add(t.InACapabilities.C005_OBTAINABILITY);r.add(t.InACapabilities.C003_CLIENT_CAPABILITIES);r.add(t.InACapabilities.C004_METADATA_SERVICE);r.add(t.InACapabilities.C007_RESPONSE_FIXED_ATTRIBUTE_SEQUENCE);r.add(t.InACapabilities.C011_SET_OPERAND);r.add(t.InACapabilities.C001_DATASOURCE_AT_SERVICE);r.add(t.InACapabilities.C030_UNIQUE_ATTRIBUTE_NAMES);r.add(t.InACapabilities.PAGING);r.add(t.InACapabilities.C028_METADATA_DIMENSION_GROUP);r.add(t.InACapabilities.C091_CUBE_BLENDING);r.add(t.InACapabilities.C093_REMOTE_BLENDING);let s=t.XHashMapByString.create();this.addServiceWithCapabilities(s,e,"Analytics",r,t.XList.create());return t.InAServerInfoBuilder.buildServerInfoResponse(s,this.getSystemDescription(e).getLanguage(),e)};t.ProcessorSCP.prototype.processMetadata=function(e,r){let s=t.SCPMetadataBuilder.create();if(t.InARequestParser.isCatalogServiceRequested(r)){let e=s.createCatalogServiceMetadata();t.XObjectExt.release(s);return t.InAProcessorResult.create(e)}let n=null;let o=null;let i=e.size();for(let r=0;r<i;r++){let s=e.get(r);if(t.XString.isEqual(s.getCustomIdentifier(),t.ProcessorSCPConstants.URI_DOCS)){n=s.getResponse()}else if(t.XString.isEqual(s.getCustomIdentifier(),t.ProcessorSCPConstants.URI_METADATA)){o=s.getResponse()}}let a=s.createMetadata(n,o,r);this.copyAllMessages(s);t.XObjectExt.release(s);if(t.isNull(a)){this.addErrorWithMessage(t.XStringUtils.concatenate3("Metadata for element '",this.getObjectNameFromRequest(r),"' could not be read"));return null}return t.InAProcessorResult.createWithContentType(a,t.ContentType.APPLICATION_JSON)};t.ProcessorSCP.prototype.processResultset=function(e,r){let s=null;let n=t.InARequestParser.create(r);let o=t.InAResponseBuilder.create(n);let i=e.get(0).getResponse();if(t.notNull(i)){s=this.convertToInA(n,o,i);this.copyAllMessages(o)}else{this.addError(t.ErrorCodes.PARSER_ERROR,"Response from SAP Cloud Platform Open Connetors could not be read")}if(t.isNull(s)){s=o.createErrorResponse(this.getErrors())}t.XObjectExt.release(o);return t.InAProcessorResult.create(s)};t.ProcessorSCP.prototype.replacePathVariables=function(e,r){let s=e;while(t.XString.containsString(s,"{")&&t.XString.containsString(s,"}")){let e=t.XString.indexOf(s,"{");let n=t.XString.indexOf(s,"}")+1;let o=t.XString.substring(s,e,n);let i=t.XStringUtils.stripChars(o,1);if(!r.containsKey(i)){return t.XString.substring(s,0,e-1)}s=t.XString.replace(s,o,r.getByKey(i));r.remove(i)}return s};t.SCPMetadataBuilder=function(){};t.SCPMetadataBuilder.prototype=new t.InAMetadataBuilder;t.SCPMetadataBuilder.prototype._ff_c="SCPMetadataBuilder";t.SCPMetadataBuilder.create=function(){let e=new t.SCPMetadataBuilder;e.setupSessionContext(null);return e};t.SCPMetadataBuilder.prototype.addVariables=function(e,r,s){if(!t.PrUtils.isListEmpty(r)){let n=e.getListByKey("Variables");if(t.isNull(n)){n=e.putNewList("Variables")}let o=r.size();for(let e=0;e<o;e++){let o=r.getStructureAt(e);let i=o.getStringByKey(t.ProcessorSCPConstants.PARAMETER_IN);if(t.XString.isEqual(i,t.ProcessorSCPConstants.PARAMETER_IN_QUERY)||t.XString.isEqual(i,t.ProcessorSCPConstants.PARAMETER_IN_PATH)){let e=o.getStringByKey(t.ProcessorSCPConstants.PARAMETER_NAME);let r=o.getStringByKey(t.ProcessorSCPConstants.PARAMETER_DESCRIPTION);let i=!s&&o.getBooleanByKey(t.ProcessorSCPConstants.PARAMETER_REQUIRED);let a=this.mapParameterType(o.getStringByKey(t.ProcessorSCPConstants.PARAMETER_TYPE));n.add(this.createVariable(e,r,i,a,null))}}}};t.SCPMetadataBuilder.prototype.createCatalogServiceDimensionProperty=function(e){return t.SCPMdProperty.createWithFilterFlag(e,e,"String",true)};t.SCPMetadataBuilder.prototype.createMetadata=function(e,r,s){if(t.isNull(e)||t.isNull(r)||!e.isStructure()||!r.isStructure()){this.addError(t.ErrorCodes.PARSER_ERROR,"Docs/Metadata response could not be read");return null}let n=s.getStructureByKey("Metadata");let o=t.PrFactory.createStructure();let i=o.putNewStructure("Cube");i.put("Capabilities",t.PrUtils.createDeepCopy(t.PrUtils.getListProperty(n,"Capabilities")));i.put("DataSource",t.PrUtils.createDeepCopy(t.PrUtils.getStructureProperty(n,"DataSource")));this.extendByDocumentation(i,e);this.extendByMetadata(i,r);return o};t.SCPMetadataBuilder.prototype.extendByDocumentation=function(e,r){let s=r.asStructure().getStructureByKey(t.ProcessorSCPConstants.PATHS);let n=this.getSortedAPIs(s);let o=null;let i=null;let a=null;let l=n.getKeysAsReadOnlyList();let u=l.size();for(let e=0;e<u;e++){let r=l.get(e);let s=n.getByKey(r);if(t.isNull(o)){o=s;i=r;a=t.PrFactory.createList()}else if(this.extendsPathWithParameter(i,r)){i=r;a.addAll(s.getListByKey(t.ProcessorSCPConstants.PARAMETERS))}}if(t.isNull(o)){this.addError(t.ErrorCodes.PARSER_ERROR,"No valid path value found in documentation response");return}e.getStructureByKey("DataSource").putString("PackageName",i);e.putStringNotNullAndNotEmpty("Name",o.getStringByKey(t.ProcessorSCPConstants.OPERATION_ID));e.putStringNotNullAndNotEmpty("Description",o.getStringByKey(t.ProcessorSCPConstants.SUMMARY));this.addVariables(e,o.getListByKey(t.ProcessorSCPConstants.PARAMETERS),false);this.addVariables(e,a,true)};t.SCPMetadataBuilder.prototype.extendByMetadata=function(e,r){let s=e.putNewList("Dimensions");let n=r.asStructure().getListByKey(t.ProcessorSCPConstants.FIELDS);if(t.PrUtils.isListEmpty(n)){return}let o=n.size();for(let e=0;e<o;e++){let r=n.getStructureAt(e);let o=this.getValue(r,t.ProcessorSCPConstants.FIELD_PATH,t.ProcessorSCPConstants.FIELD_VENDOR_PATH);if(t.XStringUtils.isNotNullAndNotEmpty(o)){let e=t.PrUtils.getStringValueProperty(r,t.ProcessorSCPConstants.FIELD_DISPLAY_NAME,o);let n=this.getValue(r,t.ProcessorSCPConstants.FIELD_TYPE,t.ProcessorSCPConstants.FIELD_NATIVE_TYPE);let i=this.mapDimensionDataType(n);let a=t.XString.isEqual(n,t.ProcessorSCPConstants.FIELD_TYPE_NUMBER)&&!t.XString.endsWith(o,"[*]");let l=t.SCPMdProperty.create(this.removeListIndicator(o),this.removeListIndicator(e),i);let u=a?this.createMeasure(l):this.createDimension(l,null);if(!s.contains(u)){s.add(u)}}}};t.SCPMetadataBuilder.prototype.extendsPathWithParameter=function(e,r){if(t.XString.startsWith(r,e)){let s=t.XString.substring(r,t.XString.size(e),t.XString.size(r));return t.XString.containsString(s,"{")}return false};t.SCPMetadataBuilder.prototype.getSortedAPIs=function(e){let r=t.XList.createWithList(t.PrUtils.getKeysAsReadOnlyList(e,null));r.sortByDirection(t.XSortDirection.ASCENDING);let s=t.XLinkedHashMapByString.create();let n=r.size();for(let o=0;o<n;o++){let n=r.get(o);let i=e.getStructureByKey(n);s.putIfNotNull(n,t.PrUtils.getStructureProperty(i,t.ProcessorSCPConstants.GET))}return s};t.SCPMetadataBuilder.prototype.getValue=function(e,r,s){let n=e.getStringByKey(r);return t.XStringUtils.isNotNullAndNotEmpty(n)?n:e.getStringByKey(s)};t.SCPMetadataBuilder.prototype.mapDimensionDataType=function(e){if(t.XString.isEqual(e,t.ProcessorSCPConstants.FIELD_TYPE_STRING)){return"String"}if(t.XString.isEqual(e,t.ProcessorSCPConstants.FIELD_TYPE_NUMBER)){return"DecimalFloat"}if(t.XString.isEqual(e,t.ProcessorSCPConstants.FIELD_TYPE_DATE)){return"Date"}if(t.XString.isEqual(e,t.ProcessorSCPConstants.FIELD_TYPE_DATE_TIME)){return"Timestamp"}if(t.XString.isEqual(e,t.ProcessorSCPConstants.FIELD_TYPE_BOOLEAN)){return"Bool"}return"String"};t.SCPMetadataBuilder.prototype.mapParameterType=function(e){if(t.XString.isEqual(e,t.ProcessorSCPConstants.PARAMETER_TYPE_INTEGER)){return"Int"}else if(t.XString.isEqual(e,t.ProcessorSCPConstants.PARAMETER_TYPE_BOOLEAN)){return"Bool"}return"String"};t.SCPMetadataBuilder.prototype.removeListIndicator=function(e){return t.XString.replace(e,"[*]","")};t.RpcVirtualFunction=function(){};t.RpcVirtualFunction.prototype=new t.DfRpcFunction;t.RpcVirtualFunction.prototype._ff_c="RpcVirtualFunction";t.RpcVirtualFunction.create=function(e,r,s,n){let o=new t.RpcVirtualFunction;o.setupFunction(e,r);o.m_processor=t.XWeakReferenceUtil.getWeakRef(s);o.m_connectionContainer=t.XWeakReferenceUtil.getWeakRef(e);return o};t.RpcVirtualFunction.prototype.m_connectionContainer=null;t.RpcVirtualFunction.prototype.m_processor=null;t.RpcVirtualFunction.prototype.allRequestsFinished=function(t){let e=t.size();for(let r=0;r<e;r++){if(!t.get(r).hasResponse()){return false}}return true};t.RpcVirtualFunction.prototype.executeFunctions=function(e,r,s,n){if(t.notNull(n)){let o=n.size();for(let i=0;i<o;i++){let o=n.get(i);let a=t.VirtualRpcIdentifier.create(r,s,o,n);let l=this.newRpcFunction(o.getUri());l.getRpcRequest().setAcceptContentType(this.getAcceptContentType(o.getAcceptContentType()));l.processFunctionExecution(e,this,a)}}else{let e=t.RpcResponse.create(null);this.onFunctionExecuted(t.ExtResult.create(e,null),e,t.VirtualRpcIdentifier.create(r,s,null,null))}};t.RpcVirtualFunction.prototype.getAcceptContentType=function(e){if(t.notNull(e)){return e}let r=t.ContentType.lookupByMimeType(this.getSystemDescription().getProperties().getByKey(t.ConnectionParameters.CONTENT_TYPE));if(t.notNull(r)){return r}return t.ContentType.APPLICATION_JSON};t.RpcVirtualFunction.prototype.getApplication=function(){return this.getProcess().getApplication()};t.RpcVirtualFunction.prototype.getConnectionContainer=function(){return t.XWeakReferenceUtil.getHardRef(this.m_connectionContainer)};t.RpcVirtualFunction.prototype.getProcess=function(){return this.getSession()};t.RpcVirtualFunction.prototype.getProcessor=function(){return t.XWeakReferenceUtil.getHardRef(this.m_processor)};t.RpcVirtualFunction.prototype.getSystemDescription=function(){return this.getConnectionContainer().getSystemDescription()};t.RpcVirtualFunction.prototype.getSystemName=function(){return this.m_rpcRequest.getConnectionInfo().getSystemName()};t.RpcVirtualFunction.prototype.ignoreRequest=function(e,r){if(this.isLogonOrLogoffPath(e)){return true}let s=t.PrUtils.getStructureProperty(r,"Analytics");if(t.notNull(s)){let e=t.PrUtils.getListProperty(s,"Actions");return t.PrUtils.getStructureWithKeyValuePair(e,"Type","Close")!==null}return false};t.RpcVirtualFunction.prototype.isGetServerInfoPath=function(e){return t.XString.isEqual(e,t.SystemType.VIRTUAL_INA_ODATA.getServerInfoPath())||t.XString.isEqual(e,t.SystemType.VIRTUAL_INA_SCP.getServerInfoPath())||t.XString.isEqual(e,t.SystemType.VIRTUAL_INA_GSA.getServerInfoPath())};t.RpcVirtualFunction.prototype.isInaPath=function(e){return t.XString.isEqual(e,t.SystemType.VIRTUAL_INA_ODATA.getInAPath())||t.XString.isEqual(e,t.SystemType.VIRTUAL_INA_SCP.getInAPath())||t.XString.isEqual(e,t.SystemType.VIRTUAL_INA_GSA.getInAPath())};t.RpcVirtualFunction.prototype.isLogonOrLogoffPath=function(e){return t.XString.isEqual(e,t.SystemType.VIRTUAL_INA_ODATA.getLogonPath())||t.XString.isEqual(e,t.SystemType.VIRTUAL_INA_ODATA.getLogoffPath())||t.XString.isEqual(e,t.SystemType.VIRTUAL_INA_SCP.getLogonPath())||t.XString.isEqual(e,t.SystemType.VIRTUAL_INA_SCP.getLogoffPath())||t.XString.isEqual(e,t.SystemType.VIRTUAL_INA_GSA.getLogonPath())||t.XString.isEqual(e,t.SystemType.VIRTUAL_INA_GSA.getLogoffPath())};t.RpcVirtualFunction.prototype.newRpcFunction=function(e){let r=e;let s=e.getPath();let n=this.getConnectionContainer();let o=n.getSystemDescription();let i=o.getPath();if(t.notNull(i)&&t.XString.startsWith(s,i)){let n=t.XString.size(i);let o=t.XString.substring(s,n,-1);let a=t.XUri.createFromOther(e);a.setPath(o);r=a}let a=t.RpcHttpFunction.create(n,r);let l=a.getRpcRequest();l.setMethod(t.HttpRequestMethod.HTTP_GET);return a};t.RpcVirtualFunction.prototype.onFunctionExecuted=function(e,r,s){this.addAllMessages(e);let n=s;if(t.isNull(n)||this.hasErrors()){t.XObjectExt.release(n);this.endSync();return}let o=n.getRequest();let i=n.getAllRequests();if(t.notNull(o)){o.setResponse(r.getRootElementGeneric(),r.getRootElementAsString());if(!this.allRequestsFinished(i)){t.XObjectExt.release(n);return}}let a=null;let l=this.getProcessor();if(t.XString.isEqual(n.getProcessName(),"Metadata")){let e=l.processMetadata(i,n.getRequestStructure());if(t.notNull(e)){a=e.getStructure();let r=e.getSupportedContentType();if(t.notNull(r)){this.getSystemDescription().setProperty(t.ConnectionParameters.CONTENT_TYPE,r.getName())}}}else if(t.XString.isEqual(n.getProcessName(),"Analytics")){a=l.processResultset(i,n.getRequestStructure()).getStructure()}this.m_rpcResponse.setRootElement(a,null);this.setData(this.m_rpcResponse);this.copyAllMessages(l);t.XObjectExt.release(n);t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(i);l.clearMessages();this.endSync()};t.RpcVirtualFunction.prototype.processAnalytics=function(e,r){let s=this.getProcessor();if(t.isNull(s)){this.addError(t.ErrorCodes.INVALID_STATE,"No processor provided!");this.endSync();return}let n=s.getResultsetUrl(this.getSystemName(),e);this.executeFunctions(r,"Analytics",e,n)};t.RpcVirtualFunction.prototype.processGetServerInfo=function(){let e=this.getProcessor();if(t.isNull(e)){this.addError(t.ErrorCodes.INVALID_STATE,"No processor provided!")}else{let t=e.processCapabilities(this.getSystemName());this.m_rpcResponse.setRootElement(t,null);this.setData(this.m_rpcResponse);this.addAllMessages(this.getProcessor())}this.endSync()};t.RpcVirtualFunction.prototype.processMetadata=function(e,r){let s=this.getProcessor();if(t.isNull(s)){this.addError(t.ErrorCodes.INVALID_STATE,"No processor provided!");this.endSync();return}let n=s.getMetadataUrl(this.getSystemName(),e);this.executeFunctions(r,"Metadata",e,n)};t.RpcVirtualFunction.prototype.processSynchronization=function(e){let r=this.m_rpcRequest.getUri().getPath();if(this.isGetServerInfoPath(r)){this.processGetServerInfo();return true}let s=this.m_rpcRequest.getRequestStructure();if(this.ignoreRequest(r,s)){this.endSync();return true}if(this.isInaPath(r)){if(s.containsKey("Analytics")){this.processAnalytics(s,e);return true}if(s.containsKey("Metadata")){this.processMetadata(s,e);return true}this.addErrorExt(t.OriginLayer.APPLICATION,t.ErrorCodes.INVALID_URL,"Unexpected root element !",this.m_rpcRequest);this.endSync();return true}this.addErrorExt(t.OriginLayer.APPLICATION,t.ErrorCodes.INVALID_URL,t.XStringUtils.concatenate3("Unexpected path '",r,"'!"),this.m_rpcRequest);this.endSync();return true};t.RpcVirtualFunction.prototype.releaseObjectInternal=function(){this.m_processor=t.XObjectExt.release(this.m_processor);this.m_connectionContainer=t.XObjectExt.release(this.m_connectionContainer);t.DfRpcFunction.prototype.releaseObjectInternal.call(this)};t.GSAResultSetUrl=function(){};t.GSAResultSetUrl.prototype=new t.XUri;t.GSAResultSetUrl.prototype._ff_c="GSAResultSetUrl";t.GSAResultSetUrl.createUrl=function(e,r,s){let n=new t.GSAResultSetUrl;n.setupGenericServiceUrl(e,r,s);return n};t.GSAResultSetUrl.prototype.getEntityPath=function(e){let r=this.getPath();let s=t.XString.endsWith(r,"/");let n=t.XString.startsWith(e,"/");if(s&&n){return t.XStringUtils.concatenate2(t.XStringUtils.stripRight(r,1),e)}if(!s&&!n){return t.XStringUtils.concatenate3(r,"/",e)}return t.XStringUtils.concatenate2(r,e)};t.GSAResultSetUrl.prototype.getVariableValue=function(e,r,s){if(e.getBooleanByKeyExt(t.ProcessorGSAConstants.IS_VARIABLE,true)){return r.getByKey(s)}let n=e.getByKey(t.ProcessorGSAConstants.DEFAULT_VALUE);if(t.isNull(n)){return null}return n.isString()?n.asString().getString():n.getStringRepresentation()};t.GSAResultSetUrl.prototype.setupGenericServiceUrl=function(e,r,s){this.setup();this.setUrl(e);this.setPath(this.getEntityPath(r));let n=t.InARequestParser.create(s);let o=n.getVariableValues();let i=n.getServiceDescription();let a=i.getListByKey(t.ProcessorGSAConstants.PARAMETERS);let l=t.PrUtils.getListSize(a,0);for(let e=0;e<l;e++){let r=a.getStructureAt(e);let s=r.getStringByKey(t.ProcessorGSAConstants.NAME);let n=this.getVariableValue(r,o,s);let i=r.getStringByKey(t.ProcessorGSAConstants.TYPE);if(t.XStringUtils.isNullOrEmpty(s)||t.XStringUtils.isNullOrEmpty(n)||t.XStringUtils.isNullOrEmpty(i)){continue}if(t.XString.isEqual(i,t.ProcessorGSAConstants.TYPE_QUERY)){this.addQueryElement(s,n)}else if(t.XString.isEqual(i,t.ProcessorGSAConstants.TYPE_PATH)){this.setPath(t.XString.replace(this.getPath(),t.XStringUtils.concatenate3("{",s,"}"),n))}}t.XObjectExt.release(n)};t.ODataResultSetUrl=function(){};t.ODataResultSetUrl.prototype=new t.XUri;t.ODataResultSetUrl.prototype._ff_c="ODataResultSetUrl";t.ODataResultSetUrl.addConcatFilterElement=function(e,r){if(e.length()>0){e.append(t.ProcessorODataConstants.URI_FILTER_SPACE).append(r?t.ProcessorODataConstants.URI_FILTER_AND:t.ProcessorODataConstants.URI_FILTER_OR).append(t.ProcessorODataConstants.URI_FILTER_SPACE)}};t.ODataResultSetUrl.createUrl=function(e,r,s){let n=new t.ODataResultSetUrl;n.setup();n.setUrl(e);n.setupPath(r);let o=t.InARequestParser.create(s);n.addParameters(o);t.XObjectExt.release(o);return n};t.ODataResultSetUrl.prototype.addDimensionAttributesToSelection=function(e,r){let s=t.PrUtils.getListProperty(r,"Attributes");if(!t.PrUtils.isListEmpty(s)){let n=r.getStringByKey("Name");for(let r=0;r<s.size();r++){let o=s.getStructureAt(r);let i=o.getStringByKey("Name");let a=t.XString.isEqual(n,i);let l=o.getStringByKeyExt("Obtainability","Always");if(a||t.XString.isEqual(l,"Always")&&!t.XString.startsWith(i,t.XStringUtils.concatenate2(n,"/"))){t.XCollectionUtils.addIfNotPresent(e,i)}}}};t.ODataResultSetUrl.prototype.addExpand=function(e){let r=t.XList.create();let s=e.size();for(let n=0;n<s;n++){let s=e.get(n);let o=t.XString.lastIndexOf(s,"/");if(o>-1){t.XCollectionUtils.addIfNotPresent(r,t.XString.substring(s,0,o))}}if(!r.isEmpty()){this.addQueryElement(t.ProcessorODataConstants.URI_PARAM_EXPAND,t.XCollectionUtils.join(r,","))}};t.ODataResultSetUrl.prototype.addFilter=function(e){let r=e.getFilterSelection();let s=this.getFilterForSelection(r,e);if(t.XStringUtils.isNotNullAndNotEmpty(s)){this.addQueryElement(t.ProcessorODataConstants.URI_PARAM_FILTER,s)}};t.ODataResultSetUrl.prototype.addMembersToSelection=function(e,r){let s=r.getStructureMembers();let n=s.size();for(let o=0;o<n;o++){let n=s.get(o);t.XCollectionUtils.addIfNotPresent(e,r.getStructureMemberName(n));t.XCollectionUtils.addIfNotPresent(e,n.getStringByKey("UnitName"));t.XCollectionUtils.addIfNotPresent(e,n.getStringByKey("UnitTextName"))}};t.ODataResultSetUrl.prototype.addOrder=function(e){let r=e.getSort();if(!t.PrUtils.isListEmpty(r)){let s=t.XList.create();for(let n=0;n<r.size();n++){let o=r.getStructureAt(n);let i=o.getStringByKey("Direction");let a=this.getSortValues(o,e.getAllDimensions());if(a.hasElements()){for(let e=0;e<a.size();e++){if(t.XString.isEqual(i,"Asc")||t.XString.isEqual(i,"Desc")){s.add(t.XStringUtils.concatenate3(a.get(e)," ",t.XString.toLowerCase(i)))}else{s.add(a.get(e))}}}}if(s.hasElements()){this.addQueryElement(t.ProcessorODataConstants.URI_PARAM_ORDERBY,t.XCollectionUtils.join(s,","))}}};t.ODataResultSetUrl.prototype.addPaging=function(e){let r=e.getSubsetDescription();if(t.notNull(r)){if(!this.addPagingQueryElements(r,"RowFrom","RowTo")){this.addPagingQueryElements(r,"ColumnFrom","ColumnTo")}}};t.ODataResultSetUrl.prototype.addPagingQueryElements=function(e,r,s){let n=e.getIntegerByKeyExt(r,0);let o=e.getIntegerByKeyExt(s,-1);if(n>0||o>0){if(n>0){this.addQueryElement(t.ProcessorODataConstants.URI_PARAM_SKIP,t.XInteger.convertToString(n))}if(o>0){this.addQueryElement(t.ProcessorODataConstants.URI_PARAM_TOP,t.XInteger.convertToString(o-n))}return true}return false};t.ODataResultSetUrl.prototype.addParameters=function(e){if(!e.isValid()||t.PrUtils.isListEmpty(e.getAllDimensions())||!this.addSelection(e)){this.addQueryElement(t.ProcessorODataConstants.URI_PARAM_TOP,"0");return}this.addPaging(e);this.addFilter(e);this.addOrder(e)};t.ODataResultSetUrl.prototype.addSelection=function(e){let r=e.getAllDimensions();let s=t.XList.create();let n=r.size();for(let o=0;o<n;o++){let n=r.getStructureAt(o);let i=t.PrUtils.getStringValueProperty(n,"Axis","None");if(!t.XString.isEqual(i,"Rows")&&!t.XString.isEqual(i,"Columns")){continue}let a=t.PrUtils.getListProperty(n,"Members");if(!t.PrUtils.isListEmpty(a)){this.addMembersToSelection(s,e)}else{this.addDimensionAttributesToSelection(s,n)}}if(s.isEmpty()){return false}this.addQueryElement(t.ProcessorODataConstants.URI_PARAM_SELECT,t.XCollectionUtils.join(s,","));this.addExpand(s);return true};t.ODataResultSetUrl.prototype.getFilterForOperator=function(e,r){let s=t.XStringBuffer.create();let n=t.XString.toLowerCase(e.getStringByKey("Code"));let o=t.PrUtils.getListProperty(e,"SubSelections");if(t.XStringUtils.isNotNullAndNotEmpty(n)&&!t.PrUtils.isListEmpty(o)){for(let e=0;e<o.size();e++){let i=this.getFilterForSelection(o.getStructureAt(e),r);if(t.XStringUtils.isNotNullAndNotEmpty(i)){if(s.length()>0){s.append(t.ProcessorODataConstants.URI_FILTER_SPACE).append(n).append(t.ProcessorODataConstants.URI_FILTER_SPACE)}s.append(t.ProcessorODataConstants.URI_FILTER_BRACKET_OPEN).append(i).append(t.ProcessorODataConstants.URI_FILTER_BRACKET_CLOSE)}}}return s.toString()};t.ODataResultSetUrl.prototype.getFilterForSelection=function(e,r){let s=t.PrUtils.getStructureProperty(e,"Operator");if(t.notNull(s)){return this.getFilterForOperator(s,r)}let n=t.XStringBuffer.create();let o=t.PrUtils.getStructureProperty(e,"SetOperand");let i=t.PrUtils.getStringValueProperty(o,"FieldName",null);let a=t.PrUtils.getListProperty(o,"Elements");let l=t.XString.isEqual(i,t.ProcessorConstants.CUSTOM_DIM_KEY);if(t.XStringUtils.isNotNullAndNotEmpty(i)&&!l&&!t.PrUtils.isListEmpty(a)){let e=r.getDisplayFormat(null,i);for(let r=0;r<a.size();r++){let s=a.getStructureAt(r);let o=this.mapValue(s.getByKey("Low"),e);let l=this.mapValue(s.getByKey("High"),e);let u=s.getStringByKey("Comparison");let c=this.mapComparisonOperatorForLowValue(u);let p=this.mapComparisonOperatorForHighValue(u);if(t.notNull(c)&&t.notNull(o)){let e=this.isExcludingFilter(s,u);t.ODataResultSetUrl.addConcatFilterElement(n,e);if(e){n.append(t.ProcessorODataConstants.URI_FILTER_NOT);n.append(t.ProcessorODataConstants.URI_FILTER_BRACKET_OPEN)}n.append(i).append(t.ProcessorODataConstants.URI_FILTER_SPACE);n.append(c).append(t.ProcessorODataConstants.URI_FILTER_SPACE);n.append(o);if(t.notNull(p)&&t.notNull(l)){n.append(t.ProcessorODataConstants.URI_FILTER_SPACE).append(t.ProcessorODataConstants.URI_FILTER_AND).append(t.ProcessorODataConstants.URI_FILTER_SPACE);n.append(i).append(t.ProcessorODataConstants.URI_FILTER_SPACE);n.append(p).append(t.ProcessorODataConstants.URI_FILTER_SPACE);n.append(l)}if(e){n.append(t.ProcessorODataConstants.URI_FILTER_BRACKET_CLOSE)}}else if(t.XString.isEqual(u,"MATCH")&&t.notNull(o)){t.ODataResultSetUrl.addConcatFilterElement(n,false);let e=t.ProcessorODataConstants.URI_FILTER_SUBSTRING;e=t.XString.replace(e,"{0}",t.XString.replace(o,"*",""));e=t.XString.replace(e,"{1}",i);n.append(e)}}}return n.toString()};t.ODataResultSetUrl.prototype.getSortAttributeName=function(e,r){let s=e.getStringByKey("Dimension");let n=t.XString.isEqual(e.getStringByKey("SortType"),"MemberKey");for(let e=0;e<r.size();e++){let o=r.getStructureAt(e);if(t.XString.isEqual(o.getStringByKey("Name"),s)){let e=t.PrUtils.getListProperty(o,"Attributes");if(t.notNull(e)){for(let r=0;r<e.size();r++){let o=e.getStructureAt(r).getStringByKey("Name");let i=t.XString.isEqual(o,s);if(n===i){return o}}}}}return null};t.ODataResultSetUrl.prototype.getSortValues=function(e,r){let s=t.XList.create();let n=e.getListByKey("CustomSort");if(!t.PrUtils.isListEmpty(n)){for(let t=0;t<n.size();t++){s.add(n.getStringAt(t))}}else if(e.hasStringByKey("MeasureName")){s.add(e.getStringByKey("MeasureName"))}else{let n=this.getSortAttributeName(e,r);if(t.notNull(n)){s.add(n)}}return s};t.ODataResultSetUrl.prototype.isBetweenExcludingFilter=function(e){return t.XString.isEqual(e,"BETWEEN_EXCLUDING")||t.XString.isEqual(e,"NOT_BETWEEN_EXCLUDING")};t.ODataResultSetUrl.prototype.isBetweenFilter=function(e){return t.XString.isEqual(e,"BETWEEN")||t.XString.isEqual(e,"NOTBETWEEN")};t.ODataResultSetUrl.prototype.isExcludingFilter=function(e,r){let s=e.getBooleanByKeyExt("IsExcluding",false);return s||t.XString.isEqual(r,"NOTBETWEEN")||t.XString.isEqual(r,"NOT_BETWEEN_EXCLUDING")};t.ODataResultSetUrl.prototype.mapComparisonOperatorForHighValue=function(e){if(this.isBetweenExcludingFilter(e)){return t.ProcessorODataConstants.URI_FILTER_LESS}if(this.isBetweenFilter(e)){return t.ProcessorODataConstants.URI_FILTER_LESS_EQUAL}return null};t.ODataResultSetUrl.prototype.mapComparisonOperatorForLowValue=function(e){if(t.XString.isEqual(e,"=")){return t.ProcessorODataConstants.URI_FILTER_EQUAL}if(t.XString.isEqual(e,"<>")){return t.ProcessorODataConstants.URI_FILTER_NOT_EQUAL}if(t.XString.isEqual(e,">")||this.isBetweenExcludingFilter(e)){return t.ProcessorODataConstants.URI_FILTER_GREATER}if(t.XString.isEqual(e,">=")||this.isBetweenFilter(e)){return t.ProcessorODataConstants.URI_FILTER_GREATER_EQUAL}if(t.XString.isEqual(e,"<")){return t.ProcessorODataConstants.URI_FILTER_LESS}if(t.XString.isEqual(e,"<=")){return t.ProcessorODataConstants.URI_FILTER_LESS_EQUAL}return null};t.ODataResultSetUrl.prototype.mapValue=function(e,r){if(t.notNull(e)){if(e.isString()){if(t.XString.isEqual(r,"Date")||t.XString.isEqual(r,"DateTime")){return t.ProcessorDateConverter.convertToEdmDateTime(e.asString().getString())}return t.XStringUtils.concatenate3(t.ProcessorODataConstants.URI_FILTER_INV_COMMA,e.asString().getString(),t.ProcessorODataConstants.URI_FILTER_INV_COMMA)}if(e.isNumeric()||e.isBoolean()){return e.getStringRepresentation()}}return null};t.ODataResultSetUrl.prototype.setupPath=function(e){let r=t.XStringBuffer.create();r.append(this.getPath());if(!t.XString.endsWith(r.toString(),t.XUri.PATH_SEPARATOR)){r.append(t.XUri.PATH_SEPARATOR)}r.append(e);this.setPath(r.toString())};t.ProcessorODataV2=function(){};t.ProcessorODataV2.prototype=new t.ProcessorODataBase;t.ProcessorODataV2.prototype._ff_c="ProcessorODataV2";t.ProcessorODataV2.create=function(){let e=new t.ProcessorODataV2;e.setupProcessor();e.setupODataV2();return e};t.ProcessorODataV2.prototype.m_supportedCapabilities=null;t.ProcessorODataV2.prototype.getCapabilities=function(e){let r=t.XHashMapByString.create();this.addServiceWithCapabilities(r,e,"Analytics",this.m_supportedCapabilities,t.XList.create());return r};t.ProcessorODataV2.prototype.getMaxSupportedODataVersion=function(){return 2};t.ProcessorODataV2.prototype.releaseObject=function(){this.m_supportedCapabilities=t.XObjectExt.release(this.m_supportedCapabilities);t.ProcessorODataBase.prototype.releaseObject.call(this)};t.ProcessorODataV2.prototype.setupODataV2=function(){this.m_supportedCapabilities=t.XList.create();this.m_supportedCapabilities.add(t.InACapabilities.C012_ENCODED_RESULTSET);this.m_supportedCapabilities.add(t.InACapabilities.C048_MEMBER_VISIBILITY);this.m_supportedCapabilities.add(t.InACapabilities.C005_OBTAINABILITY);this.m_supportedCapabilities.add(t.InACapabilities.C003_CLIENT_CAPABILITIES);this.m_supportedCapabilities.add(t.InACapabilities.C004_METADATA_SERVICE);this.m_supportedCapabilities.add(t.InACapabilities.C007_RESPONSE_FIXED_ATTRIBUTE_SEQUENCE);this.m_supportedCapabilities.add(t.InACapabilities.C011_SET_OPERAND);this.m_supportedCapabilities.add(t.InACapabilities.C001_DATASOURCE_AT_SERVICE);this.m_supportedCapabilities.add(t.InACapabilities.C030_UNIQUE_ATTRIBUTE_NAMES);this.m_supportedCapabilities.add(t.InACapabilities.PAGING);this.m_supportedCapabilities.add(t.InACapabilities.C028_METADATA_DIMENSION_GROUP);this.m_supportedCapabilities.add(t.InACapabilities.C044_PAGING_TUPLE_COUNT_TOTAL);this.m_supportedCapabilities.add(t.InACapabilities.SORT_TYPE);this.m_supportedCapabilities.add(t.InACapabilities.C054_EXTENDED_SORT);this.m_supportedCapabilities.add(t.InACapabilities.C148_CUSTOM_MEASURE_SORTORDER);this.m_supportedCapabilities.add(t.InACapabilities.C013_COMPLEX_FILTERS);this.m_supportedCapabilities.add(t.InACapabilities.C083_ORDER_BY);this.m_supportedCapabilities.add(t.InACapabilities.C089_DIMENSION_FILTER);this.m_supportedCapabilities.add(t.InACapabilities.C091_CUBE_BLENDING);this.m_supportedCapabilities.add(t.InACapabilities.C093_REMOTE_BLENDING)};t.ProcessorModule=function(){};t.ProcessorModule.prototype=new t.DfModule;t.ProcessorModule.prototype._ff_c="ProcessorModule";t.ProcessorModule.s_module=null;t.ProcessorModule.getInstance=function(){if(t.isNull(t.ProcessorModule.s_module)){t.DfModule.checkInitialized(t.ProtocolModule.getInstance());t.ProcessorModule.s_module=t.DfModule.startExt(new t.ProcessorModule);t.InAProcessorFunctionFactory.registerODataAsInA();t.InAProcessorFunctionFactory.registerSCPAsInA();t.InAProcessorFunctionFactory.registerGenericServiceAdapterAsInA();t.DfModule.stopExt(t.ProcessorModule.s_module)}return t.ProcessorModule.s_module};t.ProcessorModule.prototype.getName=function(){return"ff4050.processor"};t.ProcessorModule.getInstance();return t});
//# sourceMappingURL=ff4050.processor.js.map