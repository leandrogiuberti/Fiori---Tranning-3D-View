/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff4400.olap.providers","sap/sac/df/firefly/ff4315.olap.ip.impl"],function(e){"use strict";e.PlanningStateHandlerImpl=function(){};e.PlanningStateHandlerImpl.prototype=new e.XObject;e.PlanningStateHandlerImpl.prototype._ff_c="PlanningStateHandlerImpl";e.PlanningStateHandlerImpl.prototype.getDataAreaStateByName=function(t,n,r){return e.DataAreaState.getDataAreaStateByName(t,n,r)};e.PlanningStateHandlerImpl.prototype.update=function(t,n,r,i){e.PlanningState.update(t,n,r,i)};e.PlanningStateHandlerImpl.prototype.updateFromResponse=function(t,n,r,i,o){e.PlanningState.updateFromResponse(t,n,r,i,o)};e.PlanningVariableProcessorProviderFactory=function(){};e.PlanningVariableProcessorProviderFactory.prototype=new e.XObject;e.PlanningVariableProcessorProviderFactory.prototype._ff_c="PlanningVariableProcessorProviderFactory";e.PlanningVariableProcessorProviderFactory.staticSetup=function(){e.PlanningCommandWithId.s_variableHelpProviderFactory=new e.PlanningVariableProcessorProviderFactory};e.PlanningVariableProcessorProviderFactory.prototype.createProcessorProvider=function(t,n,r){return e.InAPlanningVarProcessorProvider.createInAVariableProcessorProvider(t,n,r)};e.PlanningVariableProcessorProviderFactory.prototype.createVariableHelpProvider=function(t){return e.InAPlanningValueHelpProvider.create(t)};e.InADataAreaRequestHelper={createGetMetadataRequestStructure:function(t){let n=e.PrFactory.createStructure();let r=e.DataAreaState.getDataAreaState(t.getDataArea());if(!r.isSubmitted()){n.putNewList("DataAreas").add(r.serializeToJson())}let i=n.putNewStructure("Metadata");t.getPlanningService().getInaCapabilities().exportActiveCapabilities(i);i.putString("Context","Planning");let o=i.putNewList("Expand");o.addString("Command");let a=i.putNewStructure("DataSource");let l=t.getDataArea().getDataArea();if(e.isNull(l)){l="DEFAULT"}a.putString("DataArea",l);a.putString("InstanceId",t.getInstanceId());return n},extractBaseDataSource:function(t){let n=e.PrUtils.getStructureProperty(t,"BaseDataSource");if(e.isNull(n)){return null}let r=e.PrUtils.getStringValueProperty(n,"ObjectName",null);if(e.isNull(r)){return null}let i=e.MetaObjectType.lookup(e.PrUtils.getStringValueProperty(n,"Type",null));if(e.isNull(i)){return null}return e.QFactory.createDataSourceWithType(i,r)}};e.InAPlanningHelper={DEFAULT_RETURN_CODE:9999,createCommandsList:function(e){let t=e.putNewStructure("Planning");return t.putNewList("commands")},createModelCommand:function(t,n){let r=e.PrFactory.createStructure();let i=n;if(e.XString.isEqual("get_action_parameters",n)){i="get_parameters"}r.putString("command",i);r.putString("schema",t.getPlanningModelSchema());r.putString("model",t.getPlanningModelName());if(e.XString.isEqual("get_parameters",n)){r.putString("mode","LIST_PERSISTENT")}else if(e.XString.isEqual("get_versions",n)){let e=r.putNewList("mode");e.addString("LIST_PERSISTENT_PARAMETERS");if(t.isWithSharedVersions()){e.addString("LIST_SHARED_VERSIONS")}e.addString("LIST_QUERY_SOURCES");e.addString("LIST_SHARED_PRIVILEGES");e.addString("LIST_BACKUP_TIMESTAMP");e.addString("LIST_ACTION_STATE")}else if(e.XString.isEqual("get_actions",n)){let e=r.putNewList("mode");e.addString("LIST_ACTION_PARAMETERS")}else if(e.XString.isEqual("get_action_parameters",n)){let e=r.putNewList("mode");e.addString("LIST_ACTIONS")}return r},createVersionCommand:function(t,n){let r=t.getPlanningModel();let i=e.PrFactory.createStructure();i.putString("command",n);i.putString("schema",r.getPlanningModelSchema());i.putString("model",r.getPlanningModelName());i.putInteger("version_id",t.getVersionId());if(t.isSharedVersion()){i.putString("owner",t.getVersionOwner())}if(e.XString.isEqual("get_version_state",n)){let e=i.putNewList("mode");e.addString("LIST_BACKUP_TIMESTAMP");e.addString("LIST_ACTION_STATE")}else if(e.XString.isEqual("get_parameters",n)){i.putString("mode","LIST_PERSISTENT")}else if(e.XString.isEqual("init",n)){let n=t.getPlanningModel().getPersistenceType();if(e.notNull(n)&&n!==e.PlanningPersistenceType.DEFAULT){i.putString("persistent_pdcs",n.getName())}}else if(e.XString.isEqual("close",n)){i.putString("mode",e.CloseModeType.BACKUP.getName())}return i},getCommandIndex:function(t,n){if(e.isNull(t)){return-1}let r=n;let i=false;let o=null;if(e.XString.isEqual("get_action_parameters",n)){r="get_parameters";i=true;o="LIST_ACTIONS"}for(let n=0;n<t.size();n++){let a=e.PrUtils.getStructureElement(t,n);let l=e.PrUtils.getStringProperty(a,"command");if(e.isNull(l)){continue}if(e.XString.isEqual(l.getString(),r)){if(!i){return n}let t=e.PrUtils.getStringProperty(a,"mode");if(e.notNull(t)){if(e.XString.isEqual(t.getString(),o)){return n}}let r=e.PrUtils.getListProperty(a,"mode");let l=e.PrUtils.getListSize(r,0);for(let t=0;t<l;t++){let i=e.PrUtils.getStringElement(r,t);if(e.notNull(i)){if(e.XString.isEqual(i.getString(),o)){return n}}}}}return-1},getCommandResponse:function(t,n,r){let i=e.InAPlanningHelper.getCommandIndex(t,r);return e.PrUtils.getStructureElement(n,i)},getCommandsList:function(t){let n=e.PrUtils.getStructureProperty(t,"Planning");return e.PrUtils.getListProperty(n,"commands")},getResponsesList:function(t){return e.PrUtils.getListProperty(t,"Planning")},getResponsesReturnCodeStrict:function(t,n){if(e.isNull(t)||e.isNull(n)){return-1}let r=0;let i=false;let o=e.PrUtils.getStructureProperty(t,"Planning");if(e.isNull(o)){let a=e.PrUtils.getListProperty(t,"Planning");if(e.notNull(a)){i=true;for(let t=0;t<a.size();t++){o=e.PrUtils.getStructureElement(a,t);if(e.notNull(o)){let t=e.InAPlanningHelper.isValidPlanningStructure(o,n);if(t!==0){r=t;break}}}}}else{i=true;r=e.InAPlanningHelper.isValidPlanningStructure(o,n)}if(!i){n.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.PARSER_ERROR,"Planning structure is missing",t);return e.InAPlanningHelper.DEFAULT_RETURN_CODE}return r},hasErrors:function(t,n,r){let i=n.getResult();let o=e.InAPlanningHelper.getResponsesList(r);if(e.isNull(o)){t.addError(e.ErrorCodes.PARSER_ERROR,"Couldn't find command responses.");return true}e.InAHelper.importMessages(r,t);let a=e.InAPlanningHelper.getResponsesReturnCodeStrict(r,t);i.setReturnCode(a);if(t.hasErrors()||a!==0){if(a===3042){n.getPlanningModel().resetPlanningModel()}return true}return false},isValidPlanningStructure:function(t,n){let r=e.PrUtils.getIntegerValueProperty(t,"return_code",e.InAPlanningHelper.DEFAULT_RETURN_CODE);if(e.isNull(t)){n.addError(e.ErrorCodes.PARSER_ERROR,"Planning structure is missing");return r}let i=e.PrUtils.getStringValueProperty(t,"exception_text",null);if(e.notNull(i)){n.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.OTHER_ERROR,i,t);return r}let o=e.PrUtils.getStringValueProperty(t,"message",null);if(e.notNull(o)){n.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.OTHER_ERROR,o,t);return r}return r},processResponseGetActionParameters:function(t,n,r){let i=e.InAPlanningHelper.getCommandResponse(t,n,"get_action_parameters");if(e.isNull(i)){return false}let o=e.XHashMapByString.create();let a=e.PrUtils.getListProperty(i,"parameters");let l=e.PrUtils.getListSize(a,0);for(let t=0;t<l;t++){let n=e.PrUtils.getStructureElement(a,t);let r=e.PrUtils.getStringProperty(n,"name");if(e.isNull(r)){return false}let i=r.getString();if(o.containsKey(i)){return false}o.put(i,n)}let s=r.getActionMetadataListInternal();if(e.notNull(s)){for(let t=0;t<s.size();t++){let n=s.get(t);let r=n.getActionParameterNames();let i=new e.PlanningActionParameterMetadata;i.setActionMetadata(n);let a=e.PrFactory.createList();if(e.notNull(r)){for(let t=0;t<r.size();t++){let n=r.get(t);if(!o.containsKey(n)){return false}let i=o.getByKey(n);a.add(e.PrUtils.deepCopyElement(i))}}i.setParameters(a);n.setActionParameterMetadata(i)}}return true},processResponseGetActions:function(t,n,r){let i=e.InAPlanningHelper.getCommandResponse(t,n,"get_actions");if(e.isNull(i)){return false}let o=r.getActionMetadataListInternal();o.clear();let a=e.PrUtils.getListProperty(i,"actions");if(e.isNull(a)){return false}for(let t=0;t<a.size();t++){let n=e.PrUtils.getStructureElement(a,t);let r=e.PrUtils.getStringValueProperty(n,"id",null);if(e.isNull(r)){return false}let i=e.PrUtils.getStringValueProperty(n,"name",null);if(e.isNull(i)){return false}let l=e.PlanningActionType.lookup(e.PrUtils.getIntegerValueProperty(n,"type",-1));if(e.PrUtils.getBooleanValueProperty(n,"publish",false)){l=e.PlanningActionType.PUBLISH}let s=new e.PlanningActionMetadata;s.setActionId(r);s.setActionName(i);let u=e.PrUtils.getStringValueProperty(n,"description",null);s.setActionDescription(u);s.setActionType(l);let p=e.PrUtils.getBooleanValueProperty(n,"default",false);s.setDefault(p);let g=null;let c=e.PrUtils.getListProperty(n,"parameters");let P=e.PrUtils.getListSize(c,0);for(let t=0;t<P;t++){let n=e.PrUtils.getStringElement(c,t);if(e.notNull(n)){if(e.isNull(g)){g=e.XList.create()}g.add(n.getString())}}s.setActionParameterNames(g);o.add(s)}return true},processResponseGetParametersForModelTemplate:function(t,n,r){if(!r.supportsVersionParameters()){return true}let i=e.InAPlanningHelper.getCommandResponse(t,n,"get_parameters");if(e.isNull(i)){return false}let o=r.getVersionParametersMetadataInternal();o.clear();let a=e.PrUtils.getListProperty(i,"parameters");if(e.isNull(a)){return true}for(let t=0;t<a.size();t++){let n=e.PrUtils.getStructureElement(a,t);if(e.isNull(n)){continue}let r=e.PrUtils.getStringProperty(n,"name");if(e.isNull(r)){continue}let i=r.getString();if(e.XStringUtils.isNullOrEmpty(i)){continue}let l=new e.PlanningVersionParameterMetadata;l.setName(i);let s=e.PrUtils.getStringProperty(n,"description");if(e.notNull(s)){l.setDescription(s.getString())}let u=e.PrUtils.getStringProperty(n,"type");if(e.notNull(u)){l.setType(u.getString())}let p=e.PrUtils.getBooleanValueProperty(n,"valueAllowed",false);l.setValueAllowed(p);let g=e.PrUtils.getBooleanValueProperty(n,"hasValue",false);l.setHasValue(g);l.setValue(e.PrUtils.getProperty(n,"value"));o.put(l.getName(),l)}return true},processResponseGetQuerySources:function(t,n,r){let i=e.InAPlanningHelper.getCommandResponse(t,n,"get_query_sources");if(e.isNull(i)){return false}let o=r.getDataSourcesInternal();o.clear();let a=e.PrUtils.getListProperty(i,"query_sources");if(e.isNull(a)){return false}for(let t=0;t<a.size();t++){let n=e.PrUtils.getStructureElement(a,t);let r=e.PrUtils.getStringValueProperty(n,"schema",null);if(e.isNull(r)){return false}let i=e.PrUtils.getStringValueProperty(n,"name",null);if(e.isNull(i)){return false}let l=e.QFactory.createDataSourceWithType(e.MetaObjectType.PLANNING,i);l.setSchemaName(r);let s=new e.PlanningModelQueryDataSource;let u=e.PrUtils.getStringValueProperty(n,"description",null);s.setDescription(u);s.setDataSource(l);s.setPrimary(n.getBooleanByKeyExt("primary",true));o.add(s)}return true},processResponseGetVersionState:function(t,n,r){let i=e.InAPlanningHelper.getCommandResponse(t,n,"get_version_state");if(e.isNull(i)){return false}let o=e.PrUtils.getStructureProperty(i,"version_state");if(e.isNull(o)){return false}return e.InAPlanningHelper.setVersionState(o,r)},processResponseGetVersions:function(t,n,r){let i=e.InAPlanningHelper.getCommandResponse(t,n,"get_versions");if(e.isNull(i)){return false}let o=e.PrUtils.getListProperty(i,"versions");if(e.isNull(o)){return false}r.resetAllVersionStates();r.setVersionPrivilegesInitialized();e.PlanningModelResponseUpdateVersionPrivileges.resetVersionPrivilegesServerState(r);let a=true;for(let t=0;t<o.size();t++){let n=e.PrUtils.getStructureElement(o,t);if(!e.InAPlanningHelper.processVersionStructure(n,r)){a=false}}e.PlanningModelResponseUpdateVersionPrivileges.resetVersionPrivilegesClientState(r);r.updateAllInvalidPrivileges();return a},processVersionStructure:function(t,n){if(e.isNull(t)){return false}let r=e.PrUtils.getStringValueProperty(t,"schema",null);if(e.isNull(r)){return false}if(!e.XString.isEqual(e.PrUtils.getStringValueProperty(t,"model",null),n.getPlanningModelName())){return false}let i=e.PrUtils.getIntegerProperty(t,"version_id");if(e.isNull(i)){return false}let o=e.PrUtils.getBooleanProperty(t,"active");if(e.isNull(o)){return false}let a=e.PlanningVersionState.lookup(e.PrUtils.getStringValueProperty(t,"state",null));if(e.isNull(a)){return false}let l=o.getBoolean();if(l!==a.isActive()){return false}let s=e.PrUtils.getIntegerValueProperty(t,"changes",0);let u=e.PrUtils.getIntegerValueProperty(t,"undo_changes",0);let p=false;let g=e.PrUtils.getStringValueProperty(t,"owner",null);let c=e.PlanningPrivilege.lookupWithDefault(e.PrUtils.getStringValueProperty(t,"privilege",null),null);if(e.isNull(c)){if(n.isWithSharedVersions()){return false}g=null;c=e.PlanningPrivilege.OWNER}else{if(c===e.PlanningPrivilege.OWNER){g=null}else{p=true}}if(p===(c===e.PlanningPrivilege.OWNER)){return false}let P=i.getInteger();let d=e.PrUtils.getStringValueProperty(t,"description",null);let A=n.getVersionIdentifier(P,p,g);let m=n.getVersionById(A,d);m.setPrivilege(c);m.setVersionState(a);m.setTotalChangesSize(s);m.setUndoChangesSize(u);let I=e.PrUtils.getStringProperty(t,"create_time");if(e.notNull(I)){let t=e.XDateTime.createDateTimeFromIsoFormat(I.getString());m.setCreationTime(t)}let S=e.PrUtils.getStringProperty(t,"backup_time");if(e.notNull(S)){let t=e.XDateTime.createDateTimeFromIsoFormat(S.getString());m.setBackupTime(t)}e.InAPlanningHelper.resetVersionParameters(t,m);if(!A.isSharedVersion()){let r=e.PrUtils.getListProperty(t,"query_sources");let i=e.PrUtils.getListSize(r,0);for(let t=0;t<i;t++){let i=e.PrUtils.getStructureElement(r,t);let o=e.PlanningModelResponseUpdateVersionPrivileges.getVersionDataSource(i);let a=e.PrUtils.getListProperty(i,"version_privileges");e.PlanningModelResponseUpdateVersionPrivileges.updateVersionPrivileges(n,o,A,a)}}e.InAPlanningHelper.resetActionState(t,m);return true},resetActionState:function(t,n){let r=false;let i=null;let o=null;let a=false;let l=null;let s=null;let u=null;let p=e.PrUtils.getStructureProperty(t,"action_state");if(e.notNull(p)){r=e.PrUtils.getBooleanValueProperty(p,"sequence_active",false);if(r){i=e.PrUtils.getStringValueProperty(p,"sequence_description",null);if(e.isNull(i)){i=e.PrUtils.getStringValueProperty(p,"description",null)}o=e.PrUtils.getDateTimeProperty(p,"sequence_create_time",false,null);s=e.PrUtils.getDateTimeProperty(p,"action_end_time",false,null);u=e.PrUtils.getStringValueProperty(p,"user_name",null)}a=e.PrUtils.getBooleanValueProperty(p,"action_active",false);if(a){l=e.PrUtils.getDateTimeProperty(p,"action_start_time",false,null)}}n.setActionSequenceActive(r);n.setActionSequenceDescription(i);n.setActionSequenceCreateTime(o);n.setActionActive(a);n.setActionStartTime(l);n.setActionEndTime(s);n.setUserName(u)},resetVersionParameters:function(t,n){let r=e.PrFactory.createStructure();let i=e.PrUtils.getListProperty(t,"parameters");if(e.notNull(i)){for(let t=0;t<i.size();t++){let n=e.PrUtils.getStructureElement(i,t);if(e.isNull(n)){continue}if(!e.PrUtils.getBooleanValueProperty(n,"hasValue",false)){continue}let o=e.PrUtils.getStringProperty(n,"name");if(e.isNull(o)){continue}let a=e.PrUtils.getProperty(n,"value");r.put(o.getString(),a)}}n.setParametersStructureInternal(r)},setVersionState:function(t,n){let r=e.PrUtils.getStringValueProperty(t,"state",null);let i=e.PlanningVersionState.lookup(r);if(e.isNull(i)){return false}let o=e.PrUtils.getIntegerValueProperty(t,"changes",0);let a=e.PrUtils.getIntegerValueProperty(t,"undo_changes",0);n.setVersionState(i);n.setTotalChangesSize(o);n.setUndoChangesSize(a);let l=e.PrUtils.getStringProperty(t,"create_time");if(e.notNull(l)){let t=e.XDateTime.createDateTimeFromIsoFormat(l.getString());n.setCreationTime(t)}let s=e.PrUtils.getStringProperty(t,"backup_time");if(e.notNull(s)){let t=e.XDateTime.createDateTimeFromIsoFormat(s.getString());n.setBackupTime(t)}e.InAPlanningHelper.resetActionState(t,n);return true}};e.InAPlanningHelperTmp=function(){};e.InAPlanningHelperTmp.prototype=new e.XObject;e.InAPlanningHelperTmp.prototype._ff_c="InAPlanningHelperTmp";e.InAPlanningHelperTmp.staticSetup=function(){e.PlanningModelCommandHelper.SetHelper(new e.InAPlanningHelperTmp)};e.InAPlanningHelperTmp.prototype.convertRequestToBatch=function(t){let n=e.PrStructure.create();let r=n.putNewList(e.ConnectionConstants.INA_BATCH);let i=t.getStructureByKey("Planning");let o=i.getListByKey("commands");for(let e=0;e<o.size();e++){let t=r.addNewStructure();t.put("Planning",o.getStructureAt(e))}return n};e.InAPlanningHelperTmp.prototype.convertResponseFromBatch=function(t){let n=e.PrStructure.create();let r=n.putNewList("Planning");let i=t.getListByKey(e.ConnectionConstants.INA_BATCH);for(let e=0;e<i.size();e++){r.add(i.getStructureAt(e).getStructureByKey("Planning"))}return n};e.InAPlanningHelperTmp.prototype.getCommandResponse=function(t,n,r){return e.InAPlanningHelper.getCommandResponse(t,n,r)};e.InAPlanningHelperTmp.prototype.getResponsesReturnCodeStrict=function(t,n){return e.InAPlanningHelper.getResponsesReturnCodeStrict(t,n)};e.InAPlanningHelperTmp.prototype.processResponseGetVersions=function(t,n,r){return e.InAPlanningHelper.processResponseGetVersions(t,n,r)};e.InAPlanningHelperTmp.prototype.resetVersionParameters=function(t,n){e.InAPlanningHelper.resetVersionParameters(t,n)};e.InAPlanningCapabilitiesProviderFactory=function(){};e.InAPlanningCapabilitiesProviderFactory.prototype=new e.XObject;e.InAPlanningCapabilitiesProviderFactory.prototype._ff_c="InAPlanningCapabilitiesProviderFactory";e.InAPlanningCapabilitiesProviderFactory.staticSetup=function(){e.PlanningService.s_capabilitiesProviderFactory=new e.InAPlanningCapabilitiesProviderFactory};e.InAPlanningCapabilitiesProviderFactory.prototype.create=function(t,n,r){return e.InACapabilitiesProvider.create(t,n,r,null)};e.InADataAreaRequestGetPlanningFunctionMetadata=function(){};e.InADataAreaRequestGetPlanningFunctionMetadata.prototype=new e.QInAComponentWithStructure;e.InADataAreaRequestGetPlanningFunctionMetadata.prototype._ff_c="InADataAreaRequestGetPlanningFunctionMetadata";e.InADataAreaRequestGetPlanningFunctionMetadata.prototype.exportComponentWithStructure=function(t,n,r,i){let o=n;let a=e.InADataAreaRequestHelper.createGetMetadataRequestStructure(o);let l=a.getStructureByKey("Metadata");let s=l.getStructureByKey("DataSource");s.putString("ObjectName",o.getPlanningFunctionIdentifier().getPlanningFunctionName());s.putString("Type","PlanningFunction");return a};e.InADataAreaRequestGetPlanningFunctionMetadata.prototype.getComponentType=function(){return e.OlapComponentType.DATA_AREA_GET_FUNCTION_METADATA};e.InADataAreaRequestGetPlanningFunctionMetadata.prototype.importComponentWithStructure=function(t,n,r,i,o){e.InAHelper.importMessages(n,t);let a=r;let l=a.getResult();let s=e.PrUtils.getStructureProperty(n,"Command");if(e.isNull(s)){return null}let u=e.PrUtils.getStructureProperty(s,"DataSource");let p=e.PrUtils.getStringValueProperty(u,"DataArea","DEFAULT");let g=a.getDataArea();if(!e.XString.isEqual(g.getDataArea(),p)){return null}let c=a.getInstanceId();if(e.isNull(c)){return null}let P=e.PrUtils.getStringValueProperty(u,"ObjectName",null);let d=a.getPlanningFunctionIdentifier();if(!e.XString.isEqual(P,d.getPlanningFunctionName())){return null}let A=e.PrUtils.getStringValueProperty(u,"Type",null);if(!e.XString.isEqual(A,"PlanningFunction")){return null}let m=e.PrUtils.getListProperty(s,"Dimensions");let I=e.PrUtils.getListProperty(s,"Variables");let S=e.InADataAreaRequestHelper.extractBaseDataSource(s);let f=new e.PlanningFunctionMetadata;f.setPlanningOperationIdentifier(d);f.setDataArea(g);f.setInstanceId(c);f.setDimenstions(m);f.setVariables(I);f.setBaseDataSource(S);l.setPlanningOperationMetadata(f);return r};e.InADataAreaRequestGetPlanningSequenceMetadata=function(){};e.InADataAreaRequestGetPlanningSequenceMetadata.prototype=new e.QInAComponentWithStructure;e.InADataAreaRequestGetPlanningSequenceMetadata.prototype._ff_c="InADataAreaRequestGetPlanningSequenceMetadata";e.InADataAreaRequestGetPlanningSequenceMetadata.extractStepMetadataList=function(t){let n=e.PrUtils.getListProperty(t,"Steps");if(e.isNull(n)){return null}let r=e.XList.create();for(let t=0;t<n.size();t++){let i=e.PrUtils.getStructureElement(n,t);if(e.isNull(i)){continue}let o=e.PrUtils.getIntegerValueProperty(i,"StepNumber",0);let a=e.PlanningSequenceStepType.lookup(e.PrUtils.getStringValueProperty(i,"StepType",null));let l=e.InADataAreaRequestHelper.extractBaseDataSource(i);let s=e.PrUtils.getStringValueProperty(i,"FilterName",null);let u=e.PrUtils.getStringValueProperty(i,"PlanningFunctionName",null);let p=e.PrUtils.getStringValueProperty(i,"QueryName",null);let g=e.PrUtils.getStringValueProperty(i,"Description",null);let c=e.PrUtils.getStringValueProperty(i,"CommandType",null);let P=new e.PlanningSequenceStepMetadata;P.setNumber(o);P.setType(a);P.setBaseDataSource(l);P.setFilterName(s);P.setPlanningFunctionName(u);P.setQueryName(p);P.setPlanningFunctionDescription(g);P.setCommendType(c);r.add(P)}return r};e.InADataAreaRequestGetPlanningSequenceMetadata.prototype.exportComponentWithStructure=function(t,n,r,i){let o=n;let a=e.InADataAreaRequestHelper.createGetMetadataRequestStructure(o);let l=a.getStructureByKey("Metadata");let s=l.getStructureByKey("DataSource");s.putString("ObjectName",o.getPlanningSequenceIdentifier().getPlanningSequenceName());s.putString("Type","PlanningSequence");return a};e.InADataAreaRequestGetPlanningSequenceMetadata.prototype.getComponentType=function(){return e.OlapComponentType.DATA_AREA_GET_SEQUENCE_METADATA};e.InADataAreaRequestGetPlanningSequenceMetadata.prototype.importComponentWithStructure=function(t,n,r,i,o){e.InAHelper.importMessages(n,t);let a=r;let l=a.getResult();let s=e.PrUtils.getStructureProperty(n,"Command");if(e.isNull(s)){return null}let u=e.PrUtils.getStructureProperty(s,"DataSource");let p=e.PrUtils.getStringValueProperty(u,"DataArea","DEFAULT");let g=a.getDataArea();if(!e.XString.isEqual(g.getDataArea(),p)){return null}let c=a.getInstanceId();if(e.isNull(c)){return null}let P=e.PrUtils.getStringValueProperty(u,"InstanceId",null);if(e.isNull(P)){P=c}else{if(!e.XString.isEqual(P,c)){return null}}let d=e.PrUtils.getStringValueProperty(u,"ObjectName",null);let A=a.getPlanningSequenceIdentifier();if(!e.XString.isEqual(d,A.getPlanningSequenceName())){return null}let m=e.PrUtils.getStringValueProperty(u,"Type",null);if(!e.XString.isEqual(m,"PlanningSequence")){return null}let I=e.PrUtils.getListProperty(s,"Dimensions");let S=e.PrUtils.getListProperty(s,"Variables");let f=e.InADataAreaRequestGetPlanningSequenceMetadata.extractStepMetadataList(s);let V=new e.PlanningSequenceMetadata;V.setPlanningOperationIdentifier(A);V.setDataArea(g);V.setInstanceId(P);V.setDimenstions(I);V.setVariables(S);V.setStepMetadataList(f);l.setPlanningOperationMetadata(V);return r};e.InADataAreaCommand=function(){};e.InADataAreaCommand.prototype=new e.QInAComponentWithStructure;e.InADataAreaCommand.prototype._ff_c="InADataAreaCommand";e.InADataAreaCommand.prototype.exportComponentWithStructure=function(t,n,r,i){let o=n;let a=e.PrFactory.createStructure();let l=e.DataAreaState.getDataAreaState(o.getDataArea());if(!l.isSubmitted()){let e=l.serializeToJson();a.putNewList("DataAreas").add(e)}let s=a.putNewStructure("Planning");o.getPlanningService().getInaCapabilities().exportActiveCapabilities(s);let u=s.putNewList("Commands");let p=o.getPlanningContextCommandType();let g=p.toString();if(p===e.PlanningContextCommandType.PUBLISH){g="SAVE"}let c=o.getDataArea();let P=c.getDataArea();if(e.isNull(P)){P="DEFAULT"}let d=u.addNewStructure();let A=d.putNewStructure("DataSource");A.putString("ObjectName",g);A.putString("Type","DataAreaCommand");A.putString("DataArea",P);return a};e.InADataAreaCommand.prototype.getComponentType=function(){return e.OlapComponentType.DATA_AREA_COMMAND};e.InADataAreaCommand.prototype.importComponentWithStructure=function(t,n,r,i,o){e.InAHelper.importMessages(n,t);if(t.hasErrors()){return null}let a=r;let l=a.getResult();let s=e.PrUtils.getListProperty(n,"CommandResults");if(e.isNull(s)||s.size()!==1){return null}let u=e.PrUtils.getStructureElement(s,0);l.setExecuted(e.PrUtils.getBooleanProperty(u,"Executed").getBoolean());return a};e.InADataAreaCommandClose=function(){};e.InADataAreaCommandClose.prototype=new e.QInAComponentWithStructure;e.InADataAreaCommandClose.prototype._ff_c="InADataAreaCommandClose";e.InADataAreaCommandClose.prototype.exportComponentWithStructure=function(t,n,r,i){let o=n;let a=o.getDataArea().getDataArea();let l=e.PrFactory.createStructure();let s=l.putNewStructure("Analytics");let u=s.putNewList("Actions");let p=u.addNewStructure();p.putString("Type","Close");let g=p.putNewList("DataAreas");g.addString(a);return l};e.InADataAreaCommandClose.prototype.getComponentType=function(){return e.OlapComponentType.DATA_AREA_COMMAND_CLOSE};e.InADataAreaCommandClose.prototype.importComponentWithStructure=function(t,n,r,i,o){e.InAHelper.importMessages(n,t);if(t.hasErrors()){return null}let a=r;let l=a.getResult();let s=a.getDataArea();let u=e.DataAreaUtil.getQueryConsumerServices(s);if(e.notNull(u)){for(let t=0;t<u.size();t++){let n=u.get(t);e.XObjectExt.release(n)}}e.DataAreaState.removeDataAreaState(s);let p=s.getPlanningService();e.XObjectExt.release(p);l.setExecuted(true);return r};e.InALightweightDataAreaCommand=function(){};e.InALightweightDataAreaCommand.prototype=new e.QInAComponentWithStructure;e.InALightweightDataAreaCommand.prototype._ff_c="InALightweightDataAreaCommand";e.InALightweightDataAreaCommand.prototype.exportComponentWithStructure=function(t,n,r,i){let o=n;let a=e.PrFactory.createStructure();let l=a.putNewStructure("Planning");n.getQueryManager().getInaCapabilities().exportActiveCapabilities(l);let s=l.putNewList("Commands");let u=o.getPlanningContextCommandType();let p=u.toString();let g=o.getQueryModel().getDataArea();if(e.isNull(g)){g="DEFAULT"}let c=s.addNewStructure();let P=c.putNewStructure("DataSource");P.putString("ObjectName",p);P.putString("Type","DataAreaCommand");P.putString("DataArea",g);P.putString("InstanceId",o.getQueryManager().getInstanceId());return a};e.InALightweightDataAreaCommand.prototype.getComponentType=function(){return e.OlapComponentType.LIGHTWEIGHT_DATA_AREA_COMMAND};e.InALightweightDataAreaCommand.prototype.importComponentWithStructure=function(t,n,r,i,o){e.InAHelper.importMessages(n,t);if(t.hasErrors()){return null}let a=r;let l=a.getResult();let s=e.PrUtils.getListProperty(n,"CommandResults");if(e.isNull(s)||s.size()!==1){return null}let u=e.PrUtils.getStructureElement(s,0);l.setExecuted(e.PrUtils.getBooleanProperty(u,"Executed").getBoolean());return l};e.InaPlanningModel=function(){};e.InaPlanningModel.prototype=new e.QInAComponentWithStructure;e.InaPlanningModel.prototype._ff_c="InaPlanningModel";e.InaPlanningModel.prototype.exportComponentWithStructure=function(e,t,n,r){return null};e.InaPlanningModel.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_MODEL};e.InaPlanningModel.prototype.importComponentWithStructure=function(e,t,n,r,i){return null};e.InAPlanningModelRequestCleanup=function(){};e.InAPlanningModelRequestCleanup.prototype=new e.QInAComponentWithStructure;e.InAPlanningModelRequestCleanup.prototype._ff_c="InAPlanningModelRequestCleanup";e.InAPlanningModelRequestCleanup.createCleanupCommand=function(){let t=e.PrFactory.createStructure();t.putString("command","cleanup");return t};e.InAPlanningModelRequestCleanup.prototype.exportComponentWithStructure=function(t,n,r,i){let o=n;let a=e.PrFactory.createStructure();let l=e.InAPlanningHelper.createCommandsList(a);l.add(e.InAPlanningModelRequestCleanup.createCleanupCommand());l.add(e.InAPlanningHelper.createModelCommand(o.getPlanningModel(),"get_versions"));return a};e.InAPlanningModelRequestCleanup.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_MODEL_CLEANUP_COMMAND};e.InAPlanningModelRequestCleanup.prototype.importComponentWithStructure=function(t,n,r,i,o){let a=r;if(e.InAPlanningHelper.hasErrors(t,a,n)){return null}let l=e.InAPlanningHelper.getCommandsList(a.serializeToElement(e.QModelFormat.INA_DATA).asStructure());let s=e.InAPlanningHelper.getResponsesList(n);if(!e.InAPlanningHelper.processResponseGetVersions(l,s,a.getPlanningModel())){t.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.PARSER_ERROR,"error in processing response structure",n);return null}return r};e.InAPlanningModelRequestRefreshActions=function(){};e.InAPlanningModelRequestRefreshActions.prototype=new e.QInAComponentWithStructure;e.InAPlanningModelRequestRefreshActions.prototype._ff_c="InAPlanningModelRequestRefreshActions";e.InAPlanningModelRequestRefreshActions.prototype.exportComponentWithStructure=function(t,n,r,i){let o=n;let a=e.PrFactory.createStructure();let l=e.InAPlanningHelper.createCommandsList(a);let s=o.getPlanningModel();l.add(e.InAPlanningHelper.createModelCommand(s,"get_actions"));l.add(e.InAPlanningHelper.createModelCommand(s,"get_action_parameters"));return a};e.InAPlanningModelRequestRefreshActions.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_MODEL_REFRESH_ACTIONS_COMMAND};e.InAPlanningModelRequestRefreshActions.prototype.importComponentWithStructure=function(t,n,r,i,o){let a=r;if(e.InAPlanningHelper.hasErrors(t,a,n)){return null}let l=e.InAPlanningHelper.getCommandsList(a.serializeToElement(e.QModelFormat.INA_DATA).asStructure());let s=e.InAPlanningHelper.getResponsesList(n);if(!e.InAPlanningHelper.processResponseGetActions(l,s,a.getPlanningModel())){t.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.PARSER_ERROR,"error in processing response structure",n);return null}return r};e.InAPlanningModelRequestRefreshVersions=function(){};e.InAPlanningModelRequestRefreshVersions.prototype=new e.QInAComponentWithStructure;e.InAPlanningModelRequestRefreshVersions.prototype._ff_c="InAPlanningModelRequestRefreshVersions";e.InAPlanningModelRequestRefreshVersions.prototype.exportComponentWithStructure=function(t,n,r,i){let o=n;let a=e.PrFactory.createStructure();let l=e.InAPlanningHelper.createCommandsList(a);l.add(e.InAPlanningHelper.createModelCommand(o.getPlanningModel(),"get_versions"));return a};e.InAPlanningModelRequestRefreshVersions.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_MODEL_REFRESH_VERSIONS_COMMAND};e.InAPlanningModelRequestRefreshVersions.prototype.importComponentWithStructure=function(t,n,r,i,o){let a=r;if(e.InAPlanningHelper.hasErrors(t,a,n)){return null}let l=e.InAPlanningHelper.getCommandsList(a.serializeToElement(e.QModelFormat.INA_DATA).asStructure());let s=e.InAPlanningHelper.getResponsesList(n);if(!e.InAPlanningHelper.processResponseGetVersions(l,s,a.getPlanningModel())){t.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.PARSER_ERROR,"error in processing response structure",n);return null}return r};e.InAPlanningModelRequestUpdateVersionPrivileges=function(){};e.InAPlanningModelRequestUpdateVersionPrivileges.prototype=new e.QInAComponentWithStructure;e.InAPlanningModelRequestUpdateVersionPrivileges.prototype._ff_c="InAPlanningModelRequestUpdateVersionPrivileges";e.InAPlanningModelRequestUpdateVersionPrivileges.addPrivilegeCommand=function(t,n){let r=n.getPrivilegeState();if(r!==e.PlanningPrivilegeState.TO_BE_GRANTED&&r!==e.PlanningPrivilegeState.TO_BE_REVOKED){return}let i;if(r===e.PlanningPrivilegeState.TO_BE_GRANTED){i="grant_version_privilege"}else if(r===e.PlanningPrivilegeState.TO_BE_REVOKED){i="revoke_version_privilege"}else{throw e.XException.createIllegalStateException("illegal privilege command")}let o=t.addNewStructure();o.putString("command",i);let a=n.getPlanningModel();o.putString("schema",a.getPlanningModelSchema());o.putString("model",a.getPlanningModelName());let l=n.getQueryDataSource();o.putString("query_source_schema",l.getSchemaName());o.putString("query_source",l.getObjectName());o.putInteger("version_id",n.getVersionId());if(n.isSharedVersion()){o.putString("owner",n.getVersionOwner())}o.putString("privilege",n.getPrivilege().getName());o.putString("grantee",n.getGrantee())};e.InAPlanningModelRequestUpdateVersionPrivileges.addShowVersionPrivilegesCommand=function(e,t,n,r){let i=e.addNewStructure();i.putString("command","show_version_privileges");i.putString("schema",t.getPlanningModelSchema());i.putString("model",t.getPlanningModelName());i.putString("query_source_schema",n.getSchemaName());i.putString("query_source",n.getObjectName());i.putInteger("version_id",r.getVersionId());if(r.isSharedVersion()){i.putString("owner",r.getVersionOwner())}};e.InAPlanningModelRequestUpdateVersionPrivileges.addShowVersionPrivilegesCommands=function(t,n){let r=n.getQueryDataSources();let i=n.getVersions();for(let o=0;o<r.size();o++){let a=r.get(o).getDataSource();for(let r=0;r<i.size();r++){let o=i.get(r);e.InAPlanningModelRequestUpdateVersionPrivileges.addShowVersionPrivilegesCommand(t,n,a,o)}}};e.InAPlanningModelRequestUpdateVersionPrivileges.prototype.exportComponentWithStructure=function(t,n,r,i){let o=n;let a=e.PrFactory.createStructure();let l=a.putNewStructure("Planning");let s=l.putNewList("commands");let u=o.getPlanningModel();if(u.isVersionPrivilegesInitialized()){let t=u.getVersionPrivileges();if(e.notNull(t)){for(let n=0;n<t.size();n++){e.InAPlanningModelRequestUpdateVersionPrivileges.addPrivilegeCommand(s,t.get(n))}}}e.InAPlanningModelRequestUpdateVersionPrivileges.addShowVersionPrivilegesCommands(s,u);return a};e.InAPlanningModelRequestUpdateVersionPrivileges.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_MODEL_UPDATE_VERSION_PRIVILEGES_COMMAND};e.InAPlanningModelRequestUpdateVersionPrivileges.prototype.importComponentWithStructure=function(t,n,r,i,o){let a=r;if(e.InAPlanningHelper.hasErrors(t,a,n)){return null}let l=a.getPlanningModel();l.setVersionPrivilegesInitialized();let s=e.InAPlanningHelper.getCommandsList(a.serializeToElement(e.QModelFormat.INA_DATA).asStructure());let u=e.InAPlanningHelper.getResponsesList(n);if(e.isNull(s)&&e.isNull(u)){return r}if(e.isNull(s)||e.isNull(u)||s.size()!==u.size()){t.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.PARSER_ERROR,"unexpected command response",n);return null}e.PlanningModelResponseUpdateVersionPrivileges.resetVersionPrivilegesServerState(l);for(let t=0;t<s.size();t++){let n=e.PrUtils.getStructureElement(s,t);let r=e.PrUtils.getStringValueProperty(n,"command",null);if(!e.XString.isEqual(r,"show_version_privileges")){continue}let i=e.PrUtils.getStructureElement(u,t);let o=e.PrUtils.getListProperty(i,"version_privileges");if(e.isNull(o)){continue}let a=e.PlanningModelResponseUpdateVersionPrivileges.getVersionDataSource(n);let p=e.PrUtils.getIntegerValueProperty(n,"version_id",-1);let g=false;let c=null;let P=e.PrUtils.getStringProperty(n,"owner");if(e.notNull(P)){g=true;c=P.getString()}let d=l.getVersionIdentifier(p,g,c);e.PlanningModelResponseUpdateVersionPrivileges.updateVersionPrivileges(l,a,d,o)}e.PlanningModelResponseUpdateVersionPrivileges.resetVersionPrivilegesClientState(l);return r};e.InAPlanningModelRequestVersion=function(){};e.InAPlanningModelRequestVersion.prototype=new e.QInAComponentWithStructure;e.InAPlanningModelRequestVersion.prototype._ff_c="InAPlanningModelRequestVersion";e.InAPlanningModelRequestVersion.createCommandsList=function(e){let t=e.putNewStructure("Planning");return t.putNewList("commands")};e.InAPlanningModelRequestVersion.createGetParametersCommand=function(t){let n=t.getRequestType();if(n!==e.PlanningModelRequestType.INIT_VERSION&&n!==e.PlanningModelRequestType.RESET_VERSION&&n!==e.PlanningModelRequestType.UPDATE_PARAMETERS){return null}if(!t.getPlanningModel().supportsVersionParameters()){return null}let r=t.getPlanningVersion();if(r.isSharedVersion()){return null}return e.InAPlanningModelRequestVersion.createVersionCommand(r,"get_parameters")};e.InAPlanningModelRequestVersion.createVersionCommand=function(t,n){let r=t.getPlanningModel();let i=e.PrFactory.createStructure();i.putString("command",n);i.putString("schema",r.getPlanningModelSchema());i.putString("model",r.getPlanningModelName());i.putInteger("version_id",t.getVersionId());if(t.isSharedVersion()){i.putString("owner",t.getVersionOwner())}if(e.XString.isEqual("get_version_state",n)){let e=i.putNewList("mode");e.addString("LIST_BACKUP_TIMESTAMP");e.addString("LIST_ACTION_STATE")}else if(e.XString.isEqual("get_parameters",n)){i.putString("mode","LIST_PERSISTENT")}else if(e.XString.isEqual("init",n)){let n=t.getPlanningModel().getPersistenceType();if(e.notNull(n)&&n!==e.PlanningPersistenceType.DEFAULT){i.putString("persistent_pdcs",n.getName())}}else if(e.XString.isEqual("close",n)){i.putString("mode",e.CloseModeType.BACKUP.getName())}return i};e.InAPlanningModelRequestVersion.processResponseEndActionSequence=function(t,n,r){let i=e.InAPlanningHelper.getCommandResponse(t,n,e.PlanningModelRequestType.END_ACTION_SEQUENCE.getName());if(e.notNull(i)){r.setActionSequenceId(null)}};e.InAPlanningModelRequestVersion.processResponseGetParameters=function(t,n,r){let i=e.InAPlanningHelper.getCommandResponse(t,n,"get_parameters");if(e.notNull(i)){e.InAPlanningHelper.resetVersionParameters(i,r)}};e.InAPlanningModelRequestVersion.processResponseKillActionSequence=function(t,n,r){let i=e.InAPlanningHelper.getCommandResponse(t,n,e.PlanningModelRequestType.KILL_ACTION_SEQUENCE.getName());if(e.notNull(i)){r.setActionSequenceId(null)}};e.InAPlanningModelRequestVersion.prototype.addParametersToJson=function(e,t){};e.InAPlanningModelRequestVersion.prototype.exportComponentWithStructure=function(t,n,r,i){let o=n;let a=e.PrStructure.create();let l=e.InAPlanningModelRequestVersion.createCommandsList(a);let s=o.getRequestType();let u=o.getPlanningVersion();if(s===e.PlanningModelRequestType.RESET_VERSION){l.add(e.InAPlanningModelRequestVersion.createVersionCommand(u,e.PlanningModelRequestType.CLOSE_VERSION.getName()));l.add(e.InAPlanningModelRequestVersion.createVersionCommand(u,e.PlanningModelRequestType.INIT_VERSION.getName()))}else if(s!==e.PlanningModelRequestType.UPDATE_PARAMETERS){if(s===e.PlanningModelRequestType.CLOSE_VERSION){let t=o;if(t.getCloseMode().isWithKillActionSequence()){l.add(e.InAPlanningModelRequestVersion.createVersionCommand(u,e.PlanningModelRequestType.KILL_ACTION_SEQUENCE.getName()))}}let t=e.InAPlanningModelRequestVersion.createVersionCommand(u,s.getName());this.addParametersToJson(o,t);l.add(t)}e.XCollectionUtils.addIfNotNull(l,e.InAPlanningModelRequestVersion.createGetParametersCommand(o));if(o.useStateUpdate()&&s!==e.PlanningModelRequestType.DROP_VERSION){l.add(e.InAPlanningModelRequestVersion.createVersionCommand(u,"get_version_state"))}return a};e.InAPlanningModelRequestVersion.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_VERSION_COMMAND};e.InAPlanningModelRequestVersion.prototype.importComponentWithStructure=function(t,n,r,i,o){let a=r;if(e.InAPlanningHelper.hasErrors(t,a,n)){return null}if(a.isInvalidatingResultSet()){a.getPlanningContext().invalidate()}let l=a.getPlanningVersion();let s=e.InAPlanningHelper.getCommandsList(a.serializeToElement(e.QModelFormat.INA_DATA).asStructure());let u=e.InAPlanningHelper.getResponsesList(n);e.InAPlanningModelRequestVersion.processResponseEndActionSequence(s,u,l);e.InAPlanningModelRequestVersion.processResponseKillActionSequence(s,u,l);e.InAPlanningModelRequestVersion.processResponseGetParameters(s,u,l);if(!e.InAPlanningHelper.processResponseGetVersionState(s,u,l)){if(a.getRequestType()===e.PlanningModelRequestType.DROP_VERSION){l.invalidateVersion();l.updateInvalidPrivileges()}}if(!this.importInternal(a,s,u)){t.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.PARSER_ERROR,"error in processing response structure",n)}return r};e.InAPlanningModelRequestVersion.prototype.importInternal=function(e,t,n){return true};e.InAPlanningModelCommand=function(){};e.InAPlanningModelCommand.prototype=new e.QInAComponentWithStructure;e.InAPlanningModelCommand.prototype._ff_c="InAPlanningModelCommand";e.InAPlanningModelCommand.prototype.addCommandPerActiveVersionToList=function(t,n,r){let i=t.getPlanningModel().getActiveVersions();for(let o=0;o<i.size();o++){let a=i.get(o);let l=e.InAPlanningHelper.createVersionCommand(a,r);this.addParametersToJson(t,l);n.add(l)}};e.InAPlanningModelCommand.prototype.addParametersToJson=function(e,t){};e.InAPlanningModelCommand.prototype.addRefreshCommandsToList=function(t,n){let r=t.getPlanningModel();if(!r.isModelInitialized()){n.add(e.InAPlanningHelper.createModelCommand(r,"get_query_sources"));n.add(e.InAPlanningHelper.createModelCommand(r,"get_actions"));if(r.supportsVersionParameters()){n.add(e.InAPlanningHelper.createModelCommand(r,"get_parameters"))}n.add(e.InAPlanningHelper.createModelCommand(r,"get_action_parameters"))}};e.InAPlanningModelCommand.prototype.exportComponentWithStructure=function(t,n,r,i){let o=n;let a=o.getPlanningModel();let l=e.PrFactory.createStructure();let s=e.InAPlanningHelper.createCommandsList(l);this.fillCommandList(o,s,o.getPlanningContextCommandType());s.add(e.InAPlanningHelper.createModelCommand(a,"get_versions"));return l};e.InAPlanningModelCommand.prototype.fillCommandList=function(t,n,r){if(r===e.PlanningContextCommandType.RESET){this.addCommandPerActiveVersionToList(t,n,"close");this.addCommandPerActiveVersionToList(t,n,"init");return}if(r===e.PlanningContextCommandType.SAVE){this.addCommandPerActiveVersionToList(t,n,"save");return}if(r===e.PlanningContextCommandType.BACKUP){this.addCommandPerActiveVersionToList(t,n,"backup");return}if(r===e.PlanningContextCommandType.CLOSE){this.addCommandPerActiveVersionToList(t,n,"close");return}if(r===e.PlanningContextCommandType.REFRESH||r===e.PlanningContextCommandType.HARD_DELETE){if(r===e.PlanningContextCommandType.HARD_DELETE){n.add(e.InAPlanningHelper.createModelCommand(t.getPlanningModel(),"delete_all_versions"))}this.addRefreshCommandsToList(t,n);return}throw e.XException.createIllegalStateException("illegal command type")};e.InAPlanningModelCommand.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_MODEL_COMMAND};e.InAPlanningModelCommand.prototype.importComponentWithStructure=function(t,n,r,i,o){let a=r;let l=a.getResult();e.InAHelper.importMessages(n,t);let s=e.InAPlanningHelper.getResponsesReturnCodeStrict(n,t);l.setReturnCode(s);if(t.hasErrors()||s!==0){return null}if(!this.processResponseStructureInternal(a,n)){t.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.PARSER_ERROR,"error in processing response structure",n);return null}return a};e.InAPlanningModelCommand.prototype.processResponseStructureInternal=function(t,n){let r=e.InAPlanningHelper.getCommandsList(t.serializeToElement(e.QModelFormat.INA_DATA).asStructure());if(e.isNull(r)){return false}let i=e.InAPlanningHelper.getResponsesList(n);if(e.isNull(i)){return false}let o=t.getPlanningContextCommandType();if(o!==e.PlanningContextCommandType.REFRESH&&o!==e.PlanningContextCommandType.RESET&&o!==e.PlanningContextCommandType.SAVE&&o!==e.PlanningContextCommandType.BACKUP&&o!==e.PlanningContextCommandType.CLOSE&&o!==e.PlanningContextCommandType.HARD_DELETE){throw e.XException.createIllegalStateException("illegal command type")}let a=t.getPlanningModel();if(o===e.PlanningContextCommandType.REFRESH||o===e.PlanningContextCommandType.HARD_DELETE){if(!this.refreshResponseStructrue(r,i,a)){if(!a.isModelInitialized()){return false}}else{a.setModelInitialized()}}if(!e.PlanningModelCommandHelper.processResponseGetVersions(r,i,a)){return false}if(o===e.PlanningContextCommandType.HARD_DELETE){let e=a.getVersions();return e.size()<=0}return true};e.InAPlanningModelCommand.prototype.refreshResponseStructrue=function(t,n,r){if(!e.InAPlanningHelper.processResponseGetQuerySources(t,n,r)){return false}if(!e.InAPlanningHelper.processResponseGetActions(t,n,r)){return false}if(!e.InAPlanningHelper.processResponseGetParametersForModelTemplate(t,n,r)){return false}return e.InAPlanningHelper.processResponseGetActionParameters(t,n,r)};e.InAPlanningAction=function(){};e.InAPlanningAction.prototype=new e.QInAComponentWithStructure;e.InAPlanningAction.prototype._ff_c="InAPlanningAction";e.InAPlanningAction.prototype.addCommand=function(t,n,r){let i=t.getVersion();let o=e.InAPlanningHelper.createVersionCommand(i,r);n.add(o);return o};e.InAPlanningAction.prototype.exportComponentWithStructure=function(t,n,r,i){let o=n;let a=e.PrFactory.createStructure();let l=e.InAPlanningHelper.createCommandsList(a);let s=this.addCommand(o,l,"action");let u=o.getActionIdentifier();let p=u.getActionId();s.putString("action_id",p);let g=o.getSequenceIdEffective();if(e.XStringUtils.isNotNullAndNotEmpty(g)){s.putString("sequence_id",g)}if(!o.getVersion().isActionSequenceActive()){let t=o.getDescription();if(e.XStringUtils.isNotNullAndNotEmpty(t)){s.putString("description",t)}}let c=o.getActionParameters();if(e.notNull(c)){s.put("parameters",c)}else{if(o.hasVariables()){let t=o.getVariableProcessor().getVariables();let n=s.putNewStructure("parameters");for(let r=0;r<t.size();r++){let i=t.get(r);if(i.getVariableType().isTypeOf(e.VariableType.OPTION_LIST_VARIABLE)){let t=i;let r=t.getCurrentOption();n.putInteger(i.getName(),e.XInteger.convertFromStringWithDefault(r.getName(),-1))}}}}this.addCommand(o,l,"get_version_state");return a};e.InAPlanningAction.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_ACTION};e.InAPlanningAction.prototype.importComponentWithStructure=function(t,n,r,i,o){let a=r;let l=a.getResult();e.InAHelper.importMessages(n,t);let s=e.InAPlanningHelper.getResponsesReturnCodeStrict(n,t);let u=e.InAPlanningHelper.getResponsesList(n);if(e.isNull(u)){if(s===0){s=-1}}let p=e.InAPlanningHelper.getCommandsList(a.serializeToElement(e.QModelFormat.INA_DATA).asStructure());if(e.isNull(p)){if(s===0){s=-1}}let g=a.getVersion();if(!e.InAPlanningHelper.processResponseGetVersionState(p,u,g)){if(s===0){s=-1}}l.setReturnCode(s);return a};e.InAPlanningModelRequestVersionClose=function(){};e.InAPlanningModelRequestVersionClose.prototype=new e.InAPlanningModelRequestVersion;e.InAPlanningModelRequestVersionClose.prototype._ff_c="InAPlanningModelRequestVersionClose";e.InAPlanningModelRequestVersionClose.prototype.addParametersToJson=function(t,n){let r=t;let i=r.getCloseMode();if(e.notNull(i)&&!i.isOnlyClient()){n.putString("mode",i.getName())}};e.InAPlanningModelRequestVersionClose.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_VERSION_CLOSE_COMMAND};e.InAPlanningModelRequestVersionEndActionSequence=function(){};e.InAPlanningModelRequestVersionEndActionSequence.prototype=new e.InAPlanningModelRequestVersion;e.InAPlanningModelRequestVersionEndActionSequence.prototype._ff_c="InAPlanningModelRequestVersionEndActionSequence";e.InAPlanningModelRequestVersionEndActionSequence.prototype.addParametersToJson=function(t,n){let r=t;let i=r.getSequenceId();if(e.XStringUtils.isNullOrEmpty(i)){i=r.getPlanningVersion().getActionSequenceId()}if(e.XStringUtils.isNotNullAndNotEmpty(i)){n.putString("sequence_id",i)}let o=r.getDescription();if(e.XStringUtils.isNotNullAndNotEmpty(o)){n.putString("description",o)}};e.InAPlanningModelRequestVersionEndActionSequence.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_VERSION_END_ACTION_SEQUENCE_COMMAND};e.InAPlanningModelRequestVersionSetParameters=function(){};e.InAPlanningModelRequestVersionSetParameters.prototype=new e.InAPlanningModelRequestVersion;e.InAPlanningModelRequestVersionSetParameters.prototype._ff_c="InAPlanningModelRequestVersionSetParameters";e.InAPlanningModelRequestVersionSetParameters.prototype.addParametersToJson=function(t,n){let r=t;let i=r.getVersionParametersStructure();if(e.PrUtils.getStructureSize(i,0)>0){n.put("parameters",i)}};e.InAPlanningModelRequestVersionSetParameters.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_VERSION_SET_PARAMETERS_COMMAND};e.InAPlanningModelRequestVersionSetTimeout=function(){};e.InAPlanningModelRequestVersionSetTimeout.prototype=new e.InAPlanningModelRequestVersion;e.InAPlanningModelRequestVersionSetTimeout.prototype._ff_c="InAPlanningModelRequestVersionSetTimeout";e.InAPlanningModelRequestVersionSetTimeout.prototype.addParametersToJson=function(e,t){let n=e;t.putInteger("timeout_value",n.getTimeout())};e.InAPlanningModelRequestVersionSetTimeout.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_VERSION_SET_TIMEOUT_COMMAND};e.InAPlanningModelRequestVersionStartActionSequence=function(){};e.InAPlanningModelRequestVersionStartActionSequence.prototype=new e.InAPlanningModelRequestVersion;e.InAPlanningModelRequestVersionStartActionSequence.prototype._ff_c="InAPlanningModelRequestVersionStartActionSequence";e.InAPlanningModelRequestVersionStartActionSequence.processResponseStartActionSequence=function(t,n,r){let i=r.getPlanningModelRequestVersion();let o=i.getRequestType().getName();let a=e.InAPlanningHelper.getCommandResponse(t,n,o);if(e.isNull(a)){return false}let l=e.PrUtils.getStringProperty(a,"sequence_id");if(e.isNull(l)){return false}let s=l.getString();r.setSequenceId(s);let u=i.getPlanningVersion();u.setActionSequenceId(s);return true};e.InAPlanningModelRequestVersionStartActionSequence.prototype.addParametersToJson=function(t,n){let r=t;let i=r.getSequenceId();if(e.XStringUtils.isNotNullAndNotEmpty(i)){n.putString("sequence_id",i)}let o=r.getDescription();if(e.XStringUtils.isNotNullAndNotEmpty(o)){n.putString("description",o)}};e.InAPlanningModelRequestVersionStartActionSequence.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_VERSION_START_ACTION_SEQUENCE_COMMAND};e.InAPlanningModelRequestVersionStartActionSequence.prototype.importInternal=function(t,n,r){let i=t;let o=i.getResult();return e.InAPlanningModelRequestVersionStartActionSequence.processResponseStartActionSequence(n,r,o)};e.InAPlanningModelRequestVersionStateDescriptions=function(){};e.InAPlanningModelRequestVersionStateDescriptions.prototype=new e.InAPlanningModelRequestVersion;e.InAPlanningModelRequestVersionStateDescriptions.prototype._ff_c="InAPlanningModelRequestVersionStateDescriptions";e.InAPlanningModelRequestVersionStateDescriptions.getVersionStateDescription=function(t){let n=t.getStringByKey("id");if(e.XStringUtils.isNullOrEmpty(n)){return null}let r=e.PrUtils.getIntegerProperty(t,"changes");if(e.isNull(r)){return null}let i=e.PrUtils.getDateTimeProperty(t,"start_time",false,null);if(e.isNull(i)){return null}let o=e.PrUtils.getDateTimeProperty(t,"end_time",false,null);if(e.isNull(o)){return null}let a=t.getStringByKey("description");let l=t.getStringByKey("user_name");return e.PlanningVersionStateDescription.create(n,a,l,i,o,r.getInteger())};e.InAPlanningModelRequestVersionStateDescriptions.getVersionStateDescriptionList=function(t){let n=e.PrUtils.getListProperty(t,"states");if(e.isNull(n)){return null}let r=e.XList.create();for(let t=0;t<n.size();t++){let i=e.InAPlanningModelRequestVersionStateDescriptions.getVersionStateDescription(n.getStructureAt(t));if(e.isNull(i)){continue}r.add(i)}return r};e.InAPlanningModelRequestVersionStateDescriptions.processResponseStateDescriptions=function(t,n,r){let i=r.getPlanningModelRequestVersion();let o=i.getRequestType().getName();let a=e.InAPlanningHelper.getCommandResponse(t,n,o);if(e.isNull(a)){return false}let l=e.PrUtils.getStructureProperty(a,"version_state_descriptions");if(e.isNull(l)){return false}let s=i.getPlanningVersion();let u=r;u.setVersionDescription(s.getVersionDescription());let p=e.PlanningVersionIdentifier.create(s.getVersionId(),s.isSharedVersion(),s.getVersionOwner());u.setVersionIdentifier(p);let g=l.getIntegerByKey("available_undo");u.setAvailableUndos(g);let c=l.getIntegerByKey("available_redo");u.setAvailableRedos(c);let P=e.InAPlanningModelRequestVersionStateDescriptions.getVersionStateDescriptionList(l);u.setVersionStateDescriptions(P);return true};e.InAPlanningModelRequestVersionStateDescriptions.prototype.addParametersToJson=function(e,t){let n=e;let r=n.getStartIndex();if(r!==0){t.putInteger("start",r);let e=n.getCount();if(e!==0){t.putInteger("count",e)}}};e.InAPlanningModelRequestVersionStateDescriptions.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_VERSION_STATE_DESCRIPTIONS_COMMAND};e.InAPlanningModelRequestVersionStateDescriptions.prototype.importInternal=function(t,n,r){let i=t;let o=i.getResult();return e.InAPlanningModelRequestVersionStateDescriptions.processResponseStateDescriptions(n,r,o)};e.InAPlanningModelRequestVersionUndoRedo=function(){};e.InAPlanningModelRequestVersionUndoRedo.prototype=new e.InAPlanningModelRequestVersion;e.InAPlanningModelRequestVersionUndoRedo.prototype._ff_c="InAPlanningModelRequestVersionUndoRedo";e.InAPlanningModelRequestVersionUndoRedo.prototype.addParametersToJson=function(e,t){let n=e;let r=n.getSteps();if(r>0){t.putInteger("num_undo_redo_steps",r)}};e.InAPlanningModelRequestVersionUndoRedo.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_VERSION_UNDO_REDO_COMMAND};e.InAPlanningModelCloseCommand=function(){};e.InAPlanningModelCloseCommand.prototype=new e.InAPlanningModelCommand;e.InAPlanningModelCloseCommand.prototype._ff_c="InAPlanningModelCloseCommand";e.InAPlanningModelCloseCommand.prototype.addParametersToJson=function(t,n){let r=t;let i=r.getCloseMode();if(e.isNull(i)){i=e.CloseModeType.BACKUP}n.putString("mode",i.getName())};e.InAPlanningModelCloseCommand.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_MODEL_CLOSE_COMMAND};e.InAPlanningVarProvider=function(){};e.InAPlanningVarProvider.prototype=new e.DfOlapEnvContext;e.InAPlanningVarProvider.prototype._ff_c="InAPlanningVarProvider";e.InAPlanningVarProvider.prototype.m_activeMainCapabilities=null;e.InAPlanningVarProvider.prototype.m_connection=null;e.InAPlanningVarProvider.prototype.m_directVariableTransfer=false;e.InAPlanningVarProvider.prototype.m_export=null;e.InAPlanningVarProvider.prototype.m_importVariables=null;e.InAPlanningVarProvider.prototype.m_isVariableSubmitNeeded=false;e.InAPlanningVarProvider.prototype.m_supportsCheckVariables=false;e.InAPlanningVarProvider.prototype.m_supportsReInitVariables=false;e.InAPlanningVarProvider.prototype.m_supportsVariableMasking=false;e.InAPlanningVarProvider.prototype.createFunction=function(){return this.createFunctionExt(true)};e.InAPlanningVarProvider.prototype.createFunctionExt=function(t){let n=this.getRequestPath();let r=t?this.m_connection.newRpcFunction(n):this.m_connection.newRpcFunctionForNonBatchableQuery(n);r.setServiceName(e.SystemServices.INA_SERVICE);let i=r.getRpcRequest();i.setMethod(e.HttpRequestMethod.HTTP_POST);return r};e.InAPlanningVarProvider.prototype.exportVariables=e.noSupport;e.InAPlanningVarProvider.prototype.getConnection=function(){return this.m_connection};e.InAPlanningVarProvider.prototype.getRequestPath=function(){let t=this.m_activeMainCapabilities.getByKey(e.InACapabilities.C032_FAST_PATH);if(e.notNull(t)&&t.getValue()!==null){return t.getValue()}let n=this.m_connection.getSystemDescription();return n.getSystemType().getInAPath()};e.InAPlanningVarProvider.prototype.getSystemDescription=function(){return this.m_connection.getSystemDescription()};e.InAPlanningVarProvider.prototype.getSystemName=function(){let t=this.getSystemDescription();if(e.isNull(t)){return null}return t.getSystemName()};e.InAPlanningVarProvider.prototype.getSystemType=function(){return this.getSystemDescription().getSystemType()};e.InAPlanningVarProvider.prototype.getVariablesExporter=function(){return this.m_export};e.InAPlanningVarProvider.prototype.getVariablesImporter=function(){return this.m_importVariables};e.InAPlanningVarProvider.prototype.importVariables=e.noSupport;e.InAPlanningVarProvider.prototype.isDirectVariableTransfer=function(){return this.m_directVariableTransfer};e.InAPlanningVarProvider.prototype.isVariableSubmitNeeded=function(){return this.m_isVariableSubmitNeeded};e.InAPlanningVarProvider.prototype.isVariableValuesRuntimeNeeded=function(){return false};e.InAPlanningVarProvider.prototype.processActivateVariableVariant=e.noSupport;e.InAPlanningVarProvider.prototype.processCheckVariables=e.noSupport;e.InAPlanningVarProvider.prototype.processDeleteVariableVariant=e.noSupport;e.InAPlanningVarProvider.prototype.processEmptyVariableDefinition=e.noSupport;e.InAPlanningVarProvider.prototype.processReInitVariableAfterSubmit=e.noSupport;e.InAPlanningVarProvider.prototype.processResetExitOrDynamicVariable=e.noSupport;e.InAPlanningVarProvider.prototype.processRetrieveVariableRuntimeInformation=e.noSupport;e.InAPlanningVarProvider.prototype.processSaveVariableVariant=e.noSupport;e.InAPlanningVarProvider.prototype.processSetGetVariableValues=e.noSupport;e.InAPlanningVarProvider.prototype.processUpdateDynamicVariables=e.noSupport;e.InAPlanningVarProvider.prototype.processUpdateVariableVariantValues=e.noSupport;e.InAPlanningVarProvider.prototype.processVariableCancel=e.noSupport;e.InAPlanningVarProvider.prototype.processVariableSubmit=e.noSupport;e.InAPlanningVarProvider.prototype.releaseObject=function(){this.m_connection=null;this.m_activeMainCapabilities=null;this.m_export=e.XObjectExt.release(this.m_export);this.m_importVariables=e.XObjectExt.release(this.m_importVariables);e.DfOlapEnvContext.prototype.releaseObject.call(this)};e.InAPlanningVarProvider.prototype.setDirectVariableTransfer=function(e){this.m_directVariableTransfer=e};e.InAPlanningVarProvider.prototype.setIsVariableSubmitNeeded=function(e){this.m_isVariableSubmitNeeded=e};e.InAPlanningVarProvider.prototype.setupVariablesProvider=function(t,n,r){this.setupOlapApplicationContext(t.getOlapEnvironment());this.m_connection=n;this.m_activeMainCapabilities=r;let i=e.QCapabilities.create();e.InACapabilitiesProvider.importCapabilities(r,i);this.m_export=e.QInAExportFactory.createForData(t,i);this.m_importVariables=e.QInAImportFactory.createForMetadata(t,i);this.m_isVariableSubmitNeeded=true;this.m_supportsCheckVariables=true;this.m_supportsReInitVariables=i.supportsReInitVariables();this.m_supportsVariableMasking=i.supportsVariableMasking()};e.InAPlanningVarProvider.prototype.supportsCheckVariables=function(){return this.m_supportsCheckVariables&&this.isDirectVariableTransfer()};e.InAPlanningVarProvider.prototype.supportsDirectVariableTransfer=e.noSupport;e.InAPlanningVarProvider.prototype.supportsReInitVariables=function(){return this.m_supportsReInitVariables};e.InAPlanningVarProvider.prototype.supportsVariableMasking=function(){return this.m_supportsVariableMasking};e.InAPlanningModelRequestVersionInit=function(){};e.InAPlanningModelRequestVersionInit.prototype=new e.InAPlanningModelRequestVersionSetParameters;e.InAPlanningModelRequestVersionInit.prototype._ff_c="InAPlanningModelRequestVersionInit";e.InAPlanningModelRequestVersionInit.prototype.addParametersToJson=function(t,n){e.InAPlanningModelRequestVersionSetParameters.prototype.addParametersToJson.call(this,t,n);let r=t;let i=r.getPlanningVersion().getVersionDescription();if(e.XStringUtils.isNotNullAndNotEmpty(i)){n.putString("description",i)}let o=r.getRestoreBackupType();if(e.notNull(o)){if(e.RestoreBackupType.RESTORE_TRUE===o){n.putBoolean("restore_backup",true)}else if(e.RestoreBackupType.RESTORE_FALSE===o){n.putBoolean("restore_backup",false)}}};e.InAPlanningModelRequestVersionInit.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_VERSION_INIT_COMMAND};e.InAPlanningVarProcessorProvider=function(){};e.InAPlanningVarProcessorProvider.prototype=new e.InAPlanningVarProvider;e.InAPlanningVarProcessorProvider.prototype._ff_c="InAPlanningVarProcessorProvider";e.InAPlanningVarProcessorProvider.createInAVariableProcessorProvider=function(t,n,r){let i=new e.InAPlanningVarProcessorProvider;i.setupInAVariableProcessorProvider(t,n,r);return i};e.InAPlanningVarProcessorProvider.prototype.m_processor=null;e.InAPlanningVarProcessorProvider.prototype.m_requestorProvider=null;e.InAPlanningVarProcessorProvider.prototype.m_variableRequestorBase=null;e.InAPlanningVarProcessorProvider.prototype.exportVariables=function(e,t){let n=this.m_export.exportVariableList(e);t.putNotNullAndNotEmpty("Variables",n)};e.InAPlanningVarProcessorProvider.prototype.getContext=function(){return null};e.InAPlanningVarProcessorProvider.prototype.getRequestorProvider=function(){return this.m_requestorProvider};e.InAPlanningVarProcessorProvider.prototype.getVariableProcessor=function(){return this.m_processor};e.InAPlanningVarProcessorProvider.prototype.importVariables=function(t,n){let r=e.PrFactory.createStructure();r.put("Variables",t);this.m_importVariables.importVariables(r,n)};e.InAPlanningVarProcessorProvider.prototype.processCheckVariables=function(t,n,r){return e.InAPlanningVarCheckVariablesAction.createAndRun(this,t,n,r)};e.InAPlanningVarProcessorProvider.prototype.processReInitVariableAfterSubmit=function(t,n,r){return e.InAPlanningVarReInitAfterSubmitAction.createAndRun(this,t,n,r)};e.InAPlanningVarProcessorProvider.prototype.processRetrieveVariableRuntimeInformation=function(t,n,r){return e.InAPlanningVarGetRuntimeInfoAction.createAndRun(this,t,n,r)};e.InAPlanningVarProcessorProvider.prototype.processSetGetVariableValues=function(t,n,r){return e.InAPlanningVarSetGetValuesAction.createAndRun(this,t,n,r)};e.InAPlanningVarProcessorProvider.prototype.processVariableCancel=function(t,n,r){return e.InAPlanningVarCancelAction.createAndRun(this,t,n,r)};e.InAPlanningVarProcessorProvider.prototype.processVariableSubmit=function(t,n,r){return e.InAPlanningVarSubmitAction.createAndRun(this,t,n,r)};e.InAPlanningVarProcessorProvider.prototype.releaseObject=function(){this.m_processor=e.XObjectExt.release(this.m_processor);this.m_requestorProvider=null;this.m_variableRequestorBase=null;e.InAPlanningVarProvider.prototype.releaseObject.call(this)};e.InAPlanningVarProcessorProvider.prototype.setupInAVariableProcessorProvider=function(t,n,r){let i=n.getApplication();let o=n.getSystemName();let a=i.getConnectionPool().getConnection(o);let l=i.getConnectionPool().getSystemConnect(o).getServerMetadata();let s=l.getMetadataForService(e.ServerService.ANALYTIC);this.setupVariablesProvider(i,a,s);this.m_requestorProvider=r;this.m_variableRequestorBase=n;let u=this.getOlapEnv().getContext();this.m_processor=e.QVariableProcessor.createVariableProcessor(u,t,this,this.m_variableRequestorBase);this.m_variableRequestorBase.setVariableProcessorBase(this.m_processor)};e.InAPlanningVarProcessorProvider.prototype.supportsMaintainsVariableVariants=function(){return this.m_processor.supportsMaintainsVariableVariants()};e.InAPlanningVarAction=function(){};e.InAPlanningVarAction.prototype=new e.QOlapSyncAction;e.InAPlanningVarAction.prototype._ff_c="InAPlanningVarAction";e.InAPlanningVarAction.prototype.callListener=function(e,t,n,r){t.onVariableProcessorExecuted(e,n,r)};e.InAPlanningVarAction.prototype.checkDirectValueTransfer=function(){if(!this.doStrictVariableProcessing()){return}let t=this.getActionContext().getVariableProcessor();if(e.isNull(t)){return}if(t.isDirectVariableTransferEnabled()){throw e.XException.createIllegalStateException("stateful variable handling cannot be mixed with direct variable transfer")}};e.InAPlanningVarAction.prototype.createFunction=function(){return this.getActionContext().createFunction()};e.InAPlanningVarAction.prototype.doStrictVariableProcessing=function(){let t=this.getActionContext();if(e.isNull(t)){return false}let n=t.getApplication();return e.notNull(n)};e.InAPlanningVarAction.prototype.getExporter=function(){return this.getActionContext().getVariablesExporter()};e.InAPlanningVarAction.prototype.getImporter=function(){return this.getActionContext().getVariablesImporter()};e.InAPlanningVarAction.prototype.getProcessor=function(){return this.getActionContext().getVariableProcessor()};e.InAPlanningVarAction.prototype.getRequestorProvider=function(){return this.getActionContext().getRequestorProvider()};e.InAPlanningVarAction.prototype.isSuccessfullyProcessed=function(){return this.isValid()};e.InAPlanningVarAction.prototype.setStructure=function(t){if(e.notNull(t)){let n=e.PrFactory.createStructureDeepCopy(t);let r=this.getActionContext();e.PlanningState.update(r.getApplication(),r.getSystemName(),n,this);return!e.InAHelper.importMessages(n,this)}return false};e.InAPlanningVarAction.prototype.setVariablesStructure=function(t){if(e.notNull(t)){let n=e.PrFactory.createStructureDeepCopy(t);let r=this.getActionContext();e.PlanningState.update(r.getApplication(),r.getSystemName(),n,this);if(!e.InAHelper.importMessages(n,this)){let t=n.getStructureByKey("Cube");if(e.isNull(t)){let t=n.toString();this.addError(e.ErrorCodes.PARSER_ERROR,t);return false}let r=this.getImporter();let i=this.getProcessor();r.importVariables(t,i.getVariableContainerBase());return true}}return false};e.InAPlanningVarCancelAction=function(){};e.InAPlanningVarCancelAction.prototype=new e.InAPlanningVarAction;e.InAPlanningVarCancelAction.prototype._ff_c="InAPlanningVarCancelAction";e.InAPlanningVarCancelAction.createAndRun=function(t,n,r,i){let o=new e.InAPlanningVarCancelAction;o.setupActionAndRun(n,r,i,t);return o};e.InAPlanningVarCancelAction.prototype.onFunctionExecuted=function(t,n,r){this.addAllMessages(t);if(t.isValid()&&e.notNull(n)){this.getQueryManagerBase().setVariableProcessorState(e.VariableProcessorState.SUBMITTED)}this.setData(this);this.endSync()};e.InAPlanningVarCancelAction.prototype.processSynchronization=function(e){return false};e.InAPlanningVarCheckVariablesAction=function(){};e.InAPlanningVarCheckVariablesAction.prototype=new e.InAPlanningVarAction;e.InAPlanningVarCheckVariablesAction.prototype._ff_c="InAPlanningVarCheckVariablesAction";e.InAPlanningVarCheckVariablesAction.createAndRun=function(t,n,r,i){let o=new e.InAPlanningVarCheckVariablesAction;o.setupActionAndRun(n,r,i,t);return o};e.InAPlanningVarCheckVariablesAction.prototype.onFunctionExecuted=function(t,n,r){this.addAllMessages(t);if(t.isValid()&&e.notNull(n)){let e=n.getRootElement();this.setStructure(e)}this.setData(this);this.endSync()};e.InAPlanningVarCheckVariablesAction.prototype.processSynchronization=function(e){return false};e.InAPlanningVarGetRuntimeInfoAction=function(){};e.InAPlanningVarGetRuntimeInfoAction.prototype=new e.InAPlanningVarAction;e.InAPlanningVarGetRuntimeInfoAction.prototype._ff_c="InAPlanningVarGetRuntimeInfoAction";e.InAPlanningVarGetRuntimeInfoAction.createAndRun=function(t,n,r,i){let o=new e.InAPlanningVarGetRuntimeInfoAction;o.setupActionAndRun(n,r,i,t);return o};e.InAPlanningVarGetRuntimeInfoAction.prototype.onFunctionExecuted=function(t,n,r){this.addAllMessages(t);if(t.isValid()&&e.notNull(n)){let t=n.getRootElement();let r=this.setVariablesStructure(t);if(r){this.getProcessor().setVariableProcessorState(e.VariableProcessorState.CHANGEABLE_REINIT)}else{this.addError(e.ErrorCodes.OTHER_ERROR,"Error when setting variable structure")}}this.setData(this);this.endSync()};e.InAPlanningVarGetRuntimeInfoAction.prototype.processSynchronization=function(t){this.checkDirectValueTransfer();let n=this.createFunction();let r=e.PrFactory.createStructure();let i=this.getRequestorProvider();i.fillVariableRequestorDataRequestContext(r,false,"VariableDefinition");this.getProcessor().setVariableProcessorState(e.VariableProcessorState.PROCESSING_UPDATE_VALUES);n.getRpcRequest().setRequestStructure(r);n.processFunctionExecution(t,this,null);return true};e.InAPlanningVarReInitAfterSubmitAction=function(){};e.InAPlanningVarReInitAfterSubmitAction.prototype=new e.InAPlanningVarAction;e.InAPlanningVarReInitAfterSubmitAction.prototype._ff_c="InAPlanningVarReInitAfterSubmitAction";e.InAPlanningVarReInitAfterSubmitAction.createAndRun=function(t,n,r,i){let o=new e.InAPlanningVarReInitAfterSubmitAction;o.setupActionAndRun(n,r,i,t);return o};e.InAPlanningVarReInitAfterSubmitAction.prototype.onVariableProcessorExecuted=function(e,t,n){this.addAllMessages(e);this.setData(this);this.endSync()};e.InAPlanningVarReInitAfterSubmitAction.prototype.processSynchronization=function(e){return false};e.InAPlanningVarSetGetValuesAction=function(){};e.InAPlanningVarSetGetValuesAction.prototype=new e.InAPlanningVarAction;e.InAPlanningVarSetGetValuesAction.prototype._ff_c="InAPlanningVarSetGetValuesAction";e.InAPlanningVarSetGetValuesAction.createAndRun=function(t,n,r,i){let o=new e.InAPlanningVarSetGetValuesAction;o.setupActionAndRun(n,r,i,t);return o};e.InAPlanningVarSetGetValuesAction.prototype.onFunctionExecuted=function(t,n,r){this.addAllMessages(t);if(t.isValid()&&e.notNull(n)){let t=n.getRootElement();if(!this.setVariablesStructure(t)){this.addError(e.ErrorCodes.OTHER_ERROR,"Error when setting variable structure")}}this.setData(this);this.endSync()};e.InAPlanningVarSetGetValuesAction.prototype.processSynchronization=function(t){let n=this.getRequestorProvider().getPlanningContext().getPlanningService();if(n.supportsPlanningValueHelp()){this.checkDirectValueTransfer();let n=this.createFunction();let r=e.PrFactory.createStructure();let i=this.getRequestorProvider();i.fillVariableRequestorDataRequestContext(r,true,"VariableDefinition");n.getRpcRequest().setRequestStructure(r);n.processFunctionExecution(t,this,null);return true}return false};e.InAPlanningVarSubmitAction=function(){};e.InAPlanningVarSubmitAction.prototype=new e.InAPlanningVarAction;e.InAPlanningVarSubmitAction.prototype._ff_c="InAPlanningVarSubmitAction";e.InAPlanningVarSubmitAction.createAndRun=function(t,n,r,i){let o=new e.InAPlanningVarSubmitAction;o.setupActionAndRun(n,r,i,t);return o};e.InAPlanningVarSubmitAction.prototype.onFunctionExecuted=function(t,n,r){this.addAllMessages(t);if(t.isValid()&&e.notNull(n)){let t=n.getRootElement();let r=this.setStructure(t);this.getProcessor().setVariableProcessorState(e.VariableProcessorState.SUBMITTED);if(!r){this.addError(e.ErrorCodes.OTHER_ERROR,"Error when setting variable structure")}}this.setData(this);this.endSync()};e.InAPlanningVarSubmitAction.prototype.processSynchronization=function(t){this.checkDirectValueTransfer();if(!this.getActionContext().isVariableSubmitNeeded()){this.setData(this);return false}let n=this.createFunction();let r=e.PrFactory.createStructure();let i=this.getRequestorProvider();let o=i.fillVariableRequestorDataRequestContext(r,false,"VariableSubmit");this.getExporter().exportVariables(this.getProcessor().getVariableContainer(),o);n.getRpcRequest().setRequestStructure(r);n.processFunctionExecution(t,this,null);return true};e.IpProviderModule=function(){};e.IpProviderModule.prototype=new e.DfModule;e.IpProviderModule.prototype._ff_c="IpProviderModule";e.IpProviderModule.s_module=null;e.IpProviderModule.addAllComponents=function(){e.QInA.addInAComponent(new e.InAPlanningAction);e.QInA.addInAComponent(new e.InAPlanningModelCommand);e.QInA.addInAComponent(new e.InAPlanningModelCloseCommand);e.QInA.addInAComponent(new e.InAPlanningModelRequestCleanup);e.QInA.addInAComponent(new e.InAPlanningModelRequestRefreshActions);e.QInA.addInAComponent(new e.InAPlanningModelRequestRefreshVersions);e.QInA.addInAComponent(new e.InAPlanningModelRequestUpdateVersionPrivileges);e.QInA.addInAComponent(new e.InAPlanningModelRequestVersion);e.QInA.addInAComponent(new e.InAPlanningModelRequestVersionClose);e.QInA.addInAComponent(new e.InAPlanningModelRequestVersionEndActionSequence);e.QInA.addInAComponent(new e.InAPlanningModelRequestVersionInit);e.QInA.addInAComponent(new e.InAPlanningModelRequestVersionSetParameters);e.QInA.addInAComponent(new e.InAPlanningModelRequestVersionSetTimeout);e.QInA.addInAComponent(new e.InAPlanningModelRequestVersionStartActionSequence);e.QInA.addInAComponent(new e.InAPlanningModelRequestVersionStateDescriptions);e.QInA.addInAComponent(new e.InAPlanningModelRequestVersionUndoRedo);e.QInA.addInAComponent(new e.InADataAreaCommand);e.QInA.addInAComponent(new e.InADataAreaCommandClose);e.QInA.addInAComponent(new e.InADataAreaRequestGetPlanningFunctionMetadata);e.QInA.addInAComponent(new e.InADataAreaRequestGetPlanningSequenceMetadata);e.QInA.addInAComponent(new e.InALightweightDataAreaCommand)};e.IpProviderModule.getInstance=function(){if(e.isNull(e.IpProviderModule.s_module)){e.DfModule.checkInitialized(e.IpImplModule.getInstance());e.DfModule.checkInitialized(e.ProviderModule.getInstance());e.IpProviderModule.s_module=e.DfModule.startExt(new e.IpProviderModule);e.QInA.staticSetupForPlanning();e.InAPlanningCapabilitiesProviderFactory.staticSetup();e.PlanningVariableProcessorProviderFactory.staticSetup();e.PlanningStateHandler.setInstance(new e.PlanningStateHandlerImpl);e.InAPlanningHelperTmp.staticSetup();e.IpProviderModule.addAllComponents();e.QInA.removeEmptyContainers();e.DfModule.stopExt(e.IpProviderModule.s_module)}return e.IpProviderModule.s_module};e.IpProviderModule.prototype.getName=function(){return"ff4410.olap.ip.providers"};e.IpProviderModule.getInstance();return e});
//# sourceMappingURL=ff4410.olap.ip.providers.js.map