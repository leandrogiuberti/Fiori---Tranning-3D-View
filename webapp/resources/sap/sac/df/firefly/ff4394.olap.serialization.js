/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff4310.olap.impl"],function(e){"use strict";e.QInAComponent=function(){};e.QInAComponent.prototype=new e.XObject;e.QInAComponent.prototype._ff_c="QInAComponent";e.QInAComponent.prototype.getModelFormat=function(){return null};e.QInAComponent.prototype.getName=function(){return this.getComponentType().getName()};e.QInAComponent.prototype.getTagName=function(){return null};e.QInAComponent.prototype.isMatching=function(e){return true};e.QInAComponent.prototype.processImportComponent=function(t,i,n,r,o,l,a,p){if(n.isValid()){n.importComponent(r,o,l,a,p)}if(e.notNull(i)){i(l)}return l};e.QInAComponent.prototype.toString=function(){return this.getName()};e.QInAExportUtil={dateTimeToString:function(e,t){return e.m_capabilities.supportsSapDate()?t.toSAPFormat():t.toIsoFormat()},exportComponentExtensions:function(t,i,n){if(t.getOriginalMode()!==e.QModelFormat.INA_CLONE||e.isNull(i)||!i.isStructure()||e.isNull(n)||!n.canHaveExtensions()){return}let r=i;let o=n;let l=o.getExtensions();if(!l.hasElements()){return}let a=r.putNewStructure("Extensions");let p=l.getKeysAsIterator();while(p.hasNext()){let e=p.next();let t=l.getByKey(e);a.put(e,t)}},extendList:function(e,t){return t},extendStructure:function(t,i,n){if(t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){let t=i.getTagging();if(e.XCollectionUtils.hasElements(t)){let i=t.getKeysAsReadOnlyList();let r=n.putNewList("ComponentTags");for(let n=0;n<i.size();n++){let o=i.get(n);let l=t.getByKey(o);let a=e.PrFactory.createStructure();r.add(a);a.putString("KEY",o);if(e.isNull(l)){a.putNull("VALUE")}else{a.putString("VALUE",l)}}}}return n},getAccountDimensionMemberNameByAlias:function(t,i,n){if((n.getMode().isTypeOf(e.QModelFormat.INA_DATA)||n.m_mode.isTypeOf(e.QModelFormat.INA_VALUE_HELP))&&e.notNull(t)){let n=t.getConvenienceCommands().getAccountDimensionMemberNameByAlias(t,i);if(e.notNull(n)){return n}}return i},getMeasureMemberNameByAlias:function(t,i,n){let r=i;if((n.getMode().isTypeOf(e.QModelFormat.INA_DATA)||n.m_mode.isTypeOf(e.QModelFormat.INA_VALUE_HELP))&&e.notNull(t)){let o=t.getQueryManager();if(o.getMode()===e.QueryManagerMode.BLENDING){let t=o.getQueryModel().getBlendingSources();for(let r=0;r<t.size();r++){let o=t.get(r);let l=e.XStringUtils.concatenate2(o.getQueryAliasName(),".");if(e.XString.startsWith(i,l)){let t=e.XString.replace(i,l,"");let r=o.getQueryModel();let a=e.QInAExportUtil.getMeasureMemberNameByAlias(r,t,n);if(e.notNull(a)){if(e.XString.containsString(i,l)){a=e.XStringUtils.concatenate2(l,a)}return a}}}}else{let o=t.getConvenienceCommands().getMeasureMemberNameByAlias(t,i);if(e.notNull(o)){r=o}if(n.getSession().hasFeature(e.FeatureToggleOlap.MULTIPLE_ACCOUNT_HIERARCHIES)&&t.getDimensionByType(e.DimensionType.ACCOUNT)!==null&&e.notNull(r)){let i=t.getAccountDimension();let n;let o;let l;if(e.XString.startsWith(r,e.QModelConstants.CALCULATION_PLACEHOLDER_ID_PREFIX)){n=e.XStringUtils.concatenate3("[",i.getName(),"].[");o=i.getHierarchyName()!==null?i.getHierarchyName():i.getDefaultHierarchyName();l=e.XStringUtils.concatenate3(n,o,"].&[");r=e.XStringUtils.concatenate3(l,r,"]")}}}}return r},isFormulaCalculatedDimensionHidden:function(t){if(e.notNull(t)&&t.getDimensionType().isTypeOf(e.DimensionType.FORMULA_CALCULATED_DIMENSION)){let e=t;return e.isHidden()}return false},isNumberSafe:function(t){return e.XMath.abs(t)<9007199254740992},setDate:function(t,i,n,r){if(e.notNull(r)){i.putString(n,e.QInAExportUtil.dateTimeToString(t,r))}},setIntegerIfNotNull:function(t,i,n){if(e.notNull(n)){t.putInteger(i,n.getInteger())}},setNameIfNotNull:function(t,i,n){if(e.notNull(n)){t.putString(i,n.getName())}},setNonEmptyString:function(t,i,n){if(e.XStringUtils.isNotNullAndNotEmpty(n)){t.putString(i,n)}}};e.QInAImportUtil={importComponentExtensions:function(t,i,n){if(e.isNull(i)||!i.isStructure()||e.isNull(n)||!n.canHaveExtensions()||!t.getMode().isTypeOf(e.QModelFormat.INA_METADATA_CORE)){return}let r=i;let o=r.getStructureByKey("Extensions");if(!e.XCollectionUtils.hasElements(o)){return}let l=e.XHashMapByString.create();let a=o.getKeysAsReadOnlyList();for(let t=0;t<a.size();t++){let i=a.get(t);let n=o.getByKey(i);if(e.isNull(n)){continue}l.put(i,n)}n.setExtensions(l)},importComponentTagging:function(t,i,n){if(e.notNull(i)){if(t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)&&i.isStructure()&&e.notNull(n)){let t=i;let r=t.getListByKey("ComponentTags");if(!e.PrUtils.isListEmpty(r)){let t=n.getTagging();for(let i=0;i<r.size();i++){let n=r.getStructureAt(i);if(e.notNull(n)){let i=n.getStringByKey("KEY");if(e.XStringUtils.isNotNullAndNotEmpty(i)){t.put(i,n.getStringByKey("VALUE"))}}}}}}}};e.QInAValueUtils={_importValueInternal:function(t,i,n,r,o,l,a){let p=t.m_capabilities.supportsSapDate();let s=e.PrUtils.getBooleanValueProperty(n,"FieldLiteralValue",false);let u=r;if(e.isNull(u)){u="Value"}let g=!a&&e.notNull(l)&&s;let y=g?l.getValueType():o;if(e.isNull(y)){let t=n.getStringByKey(e.XStringUtils.concatenate2(u,"Type"));y=e.QInAConverter.lookupValueType(t)}if((y===e.XValueType.DOUBLE||y===e.XValueType.DECIMAL_FLOAT)&&n.hasStringByKey(u)){y=e.XValueType.STRING}if(e.isNull(o)){p=false}let m;let c;if(y===e.XValueType.STRING){c=n.getStringByKey(u);if(a){return e.XStringValue.create(c)}if(e.isNull(l)||!s){i.setString(c)}else{let t=l.getDimension();let n=t.isStructure()?t.getDimensionMember(c):null;if(e.notNull(n)){i.setDimensionMember(n)}else{m=l.createFieldLiteralValue();m.setString(c);i.setFieldValue(m)}}}else if(y===e.XValueType.DECIMAL_FLOAT){let t=e.QInAValueUtils.getDecimalFLoat(n,u);if(a){return t}if(!g){i.setDecFloat(t)}else{m=l.createFieldLiteralValue();m.setValue(t);i.setFieldValue(m)}}else if(y===e.XValueType.DOUBLE){let t=e.QInAValueUtils.getDouble(n,u);if(a){return e.XDoubleValue.create(t)}if(!g){i.setDouble(t)}else{m=l.createFieldLiteralValue();m.setDouble(t);i.setFieldValue(m)}}else if(y===e.XValueType.INTEGER){let t=n.getIntegerByKey(u);if(a){return e.XIntegerValue.create(t)}if(!g){i.setInteger(t)}else{m=l.createFieldLiteralValue();m.setInteger(t);i.setFieldValue(m)}}else if(y===e.XValueType.BOOLEAN){let t=n.getBooleanByKey(u);if(a){return e.XBooleanValue.create(t)}i.setBoolean(t)}else if(y===e.XValueType.LONG){let t=e.PrUtils.getLongValueProperty(n,u,0);if(a){return e.XLongValue.create(t)}if(!g){i.setLong(t)}else{m=l.createFieldLiteralValue();m.setLong(t);i.setFieldValue(m)}}else if(y===e.XValueType.DATE){c=n.getStringByKey(u);let t=e.XDate.createDateFromStringWithFlag(c,p);if(a){return t}if(!g){i.setDate(t)}else{m=l.createFieldLiteralValue();m.setDate(t);i.setFieldValue(m)}}else if(y===e.XValueType.TIME){c=n.getStringByKey(u);let t=e.XTime.createTimeFromStringWithFlag(c,p);if(a){return t}i.setTime(t)}else if(y===e.XValueType.DATE_TIME){c=n.getStringByKey(u);let t=e.XDateTime.createDateTimeFromStringWithFlag(c,p);if(a){return t}if(!g){i.setDateTime(t)}else{m=l.createFieldLiteralValue();m.setDate(t);i.setFieldValue(m)}}else if(y.isSpatial()){c=n.getStringByKey(u);let r=e.XGeometryValue.createGeometryValueWithWkt(c);if(a){return r}i.setValue(r);if(t.m_capabilities.supportsSpatialFilterSrid()&&n.containsKey("SRID")){i.getGeometry().setSrid(e.XIntegerValue.create(n.getIntegerByKey("SRID")))}}else if(y===e.XValueType.UNSUPPORTED){return null}else if(y===e.XValueType.VARIABLE||y===e.XValueType.CURRENT_MEMBER){if(!a){i.setFilterValueType(y)}return null}else{t.addError(e.ErrorCodes.INVALID_TOKEN,e.XStringUtils.concatenate3("Unsupported value type '",y.getName(),"'"));return null}return null},containsEscapedQuote:function(t){return e.XStringUtils.isNotNullAndNotEmpty(t)&&(e.XString.getCharAt(t,0)===92||e.XString.getCharAt(t,0)===34)&&(e.XString.getCharAt(t,e.XString.size(t)-1)===92||e.XString.getCharAt(t,e.XString.size(t)-1)===34)},correctRemovingUnwantedBackslashAndQuotes:function(t){let i=t;while(e.QInAValueUtils.containsEscapedQuote(i)){i=e.XStringUtils.stripChars(i,1)}return i},exportFieldValue:function(t,i,n,r,o,l){let a=i;if(e.isNull(a)){a="Value"}let p=l;if(e.isNull(p)){p=o.getValueType();let i=e.QInAConverter.lookupValueTypeInA(p);n.putString(e.XStringUtils.concatenate2(a,"Type"),i);t.m_capabilities.setSupportsSapDate(false)}let s=o.getValueType();if(s===e.XValueType.DATE||s===e.XValueType.TIME||s===e.XValueType.DATE_TIME){p=s}if(p===e.XValueType.STRING){n.putString(a,o.getString())}else if(p===e.XValueType.INTEGER){n.putInteger(a,o.getInteger())}else if(p===e.XValueType.LONG){n.putLong(a,o.getLong())}else if(p===e.XValueType.DOUBLE||p===e.XValueType.DECIMAL_FLOAT){if(o.getValueType()===e.XValueType.STRING||t.m_capabilities.supportsStringsForNumericValues()){n.putString(a,o.getString())}else{n.putDouble(a,o.getDouble())}}else if(p===e.XValueType.BOOLEAN){n.putBoolean(a,o.getBoolean())}else if(p===e.XValueType.DATE){let i=e.XValueUtil.convertValue(o.getValue(),e.XValueType.DATE);if(e.notNull(i)){e.QInAExportUtil.setDate(t,n,a,i)}else{n.putStringNotNull(a,o.getString())}}else if(p===e.XValueType.TIME){let i=e.XValueUtil.convertValue(o.getValue(),e.XValueType.TIME);if(e.notNull(i)){e.QInAExportUtil.setDate(t,n,a,i)}else{n.putStringNotNull(a,o.getString())}}else if(p===e.XValueType.DATE_TIME){let i=e.XValueUtil.convertValue(o.getValue(),e.XValueType.DATE_TIME);if(e.notNull(i)){e.QInAExportUtil.setDate(t,n,a,i)}else{n.putStringNotNull(a,o.getString())}}if(e.notNull(p)&&p.isSpatial()){let i=o.getGeometry();n.putString(a,i.toWKT());let r=i.getSrid();if(t.m_capabilities.supportsSpatialFilterSrid()&&e.notNull(r)){n.putInteger("SRID",r.getInteger())}}if(e.notNull(r)){n.putBoolean("FieldLiteralValue",true)}},exportFilterValue:function(t,i,n,r,o){if(o===e.XValueType.VARIABLE){let t=r.getVariableValue();if(e.notNull(t)){n.putString(i,t.getName());if(e.XString.isEqual(i,"Low")){n.putString("LowIs","Variable")}else if(e.XString.isEqual(i,"High")){n.putString("HighIs","Variable")}}}else{e.QInAValueUtils.exportPlaceholderValue(t,i,n,r,o,r.getQueryModel())}},exportPlaceholderValue:function(t,i,n,r,o,l){let a=r;if(o===e.XValueType.STRING||r.getValueType()===e.XValueType.STRING){let i=e.QInAExportUtil.getMeasureMemberNameByAlias(l,r.getString(),t);if(!e.XString.isEqual(i,r.getString())){let t=e.XValueAccess.createWithType(e.XValueType.STRING);t.setString(i);a=t}}e.QInAValueUtils.exportFieldValue(t,i,n,null,a,o)},exportSupplementsAndValue:function(t,i,n,r,o,l){e.QInAValueUtils.exportFieldValue(t,i,n,r,o,l);let a=o.getSupplementValues();if(e.XCollectionUtils.hasElements(a)){let e=n.putNewList("Supplements");let t=a.size();for(let i=0;i<t;i++){let t=e.addNewStructure();let n=a.get(i);t.putString("Key",n.getKey().toString());t.putString("Value",n.getValue().toString())}}},exportValue:function(t,i,n,r,o,l){e.QInAValueUtils.exportFieldValue(t,i,n,null,r,o)},getDecimalFLoat:function(t,i){let n;let r=t.getByKey(i);if(r.isString()){let t=r.getString();n=e.XDecFloatByString.create(t)}else if(r.isNumeric()){n=e.XDecFloatByDouble.create(r.getDouble())}else{n=e.XDecFloatByString.createZeroValue()}return n},getDouble:function(t,i){let n;let r=t.getByKey(i);if(r.isString()){let t=r.getString();n=e.XDouble.convertFromString(t)}else if(r.isDouble()){n=r.getDouble()}else if(r.isInteger()){n=r.getInteger()}else{n=0}return n},importBooleanValues:function(t){let i=e.XList.create();for(let n=0;n<t.size();n++){i.add(e.XBooleanValue.create(t.getBooleanAt(n)))}return i},importDateTimeValues:function(t,i){let n=e.XList.create();for(let r=0;r<i.size();r++){let o=i.getStringAt(r);if(e.XStringUtils.isNotNullAndNotEmpty(o)){e.XCollectionUtils.addIfNotNull(n,e.XDateTime.createDateTimeFromStringWithFlag(o,t.m_capabilities.supportsSapDate()))}}return n},importDateValues:function(t,i){let n=e.XList.create();for(let r=0;r<i.size();r++){let o=i.getStringAt(r);if(e.XStringUtils.isNotNullAndNotEmpty(o)){e.XCollectionUtils.addIfNotNull(n,e.XDate.createDateFromStringWithFlag(o,t.m_capabilities.supportsSapDate()))}}return n},importNumericValues:function(t,i,n){let r=e.XList.create();for(let t=0;t<i.size();t++){let o=i.getElementTypeAt(t);if(o===e.PrElementType.STRING){r.add(e.XDecFloatByString.create(i.getStringAt(t)))}else if(n===e.XValueType.INTEGER){let n=i.getIntegerAt(t);r.add(e.XIntegerValue.create(n))}else if(n===e.XValueType.DECIMAL_FLOAT){let n=e.XDecFloatByDouble.create(i.getDoubleAt(t));r.add(n)}else if(n===e.XValueType.DOUBLE){let n=i.getDoubleAt(t);r.add(e.XDoubleValue.create(n))}else if(n===e.XValueType.LONG){let n=i.getLongAt(t);r.add(e.XLongValue.create(n))}}return r},importStringValues:function(t){let i=e.XList.create();for(let n=0;n<t.size();n++){i.add(e.XStringValue.create(t.getStringAt(n)))}return i},importSupplements:function(t,i,n,r,o){if(t.m_capabilities.supportsSupplements()&&e.notNull(r)&&e.XCollectionUtils.hasElements(o)){let l=n.getListByKey(r);if(e.notNull(l)){let n=l.size();let r=o.size();if(n===r){for(let e=0;e<n;e++){i.addSupplementValue(o.get(e),l.getStringAt(e))}}else{t.addWarning(e.ErrorCodes.INVALID_STATE,"InA protocol error: Supplement sizes of values and field names do not match.")}}}},importSupplementsAndValue:function(t,i,n,r,o,l){e.QInAValueUtils.importValue(t,i,n,r,o,l);let a=n.getListByKey("Supplements");if(e.notNull(a)&&a.hasElements()){let t=a.size();for(let n=0;n<t;n++){let t=a.getStructureAt(n);let r=t.getByKey("Key");let o=t.getByKey("Value");let l=e.QInAValueUtils.correctRemovingUnwantedBackslashAndQuotes(r.getString());let p=e.QInAValueUtils.correctRemovingUnwantedBackslashAndQuotes(o.getString());i.addSupplementValue(l,p)}}},importTimeValues:function(t,i){let n=e.XList.create();for(let r=0;r<i.size();r++){let o=i.getStringAt(r);if(e.XStringUtils.isNotNullAndNotEmpty(o)){e.XCollectionUtils.addIfNotNull(n,e.XTime.createTimeFromStringWithFlag(o,t.m_capabilities.supportsSapDate()))}}return n},importValue:function(t,i,n,r,o,l){e.QInAValueUtils._importValueInternal(t,i,n,r,o,l,false)},importValueByType:function(t,i,n,r){return e.QInAValueUtils._importValueInternal(t,null,i,n,r,null,true)},importValueCompounds:function(t,i,n,r){if(e.notNull(r)){let t=n.getListByKey(r);if(e.notNull(t)){for(let n=0;n<t.size();n++){let r=t.getStructureAt(n);let o=i.addNewFilterValueCompound(r.getBooleanByKey("Internal"));let l=r.getListByKey("Members");if(e.notNull(l)){for(let e=0;e<l.size();e++){let t=l.getStructureAt(e);o.addMember(t.getStringByKey("Component"),t.getStringByKey("Key"))}}}}}},importValueList:function(t,i,n){if(e.notNull(i)){if(n.isNumber()){return e.QInAValueUtils.importNumericValues(t,i,n)}if(n.isString()){return e.QInAValueUtils.importStringValues(i)}if(n===e.XValueType.DATE){return e.QInAValueUtils.importDateValues(t,i)}if(n===e.XValueType.TIME){return e.QInAValueUtils.importTimeValues(t,i)}if(n===e.XValueType.DATE_TIME){return e.QInAValueUtils.importDateTimeValues(t,i)}if(n===e.XValueType.BOOLEAN){return e.QInAValueUtils.importBooleanValues(i)}}return e.XList.create()}};e.QInARepoDataSourceBlending={exportAttributeMapping:function(t){let i=e.PrFactory.createStructure();i.putString("AttributeName",t.getAttributeName());i.putBoolean("IsLinkKey",t.isLinkKey());let n=t.getAttributeMappingDefinitions().getIterator();let r=e.QInARepoDataSourceBlending.exportMappingDefinitions(n);e.XObjectExt.release(n);i.put("Mapping",r);e.QInARepoDataSourceBlending.exportConstantMapping(r,t.getConstantMappings().getIterator());return i},exportBlendingMappings:function(t){let i=e.PrFactory.createList();let n=t.getIterator();while(n.hasNext()){let t=n.next();let r=e.QInARepoDataSourceBlending.exportDimensionMapping(t);i.add(r)}return i},exportBlendingSources:function(t,i,n){let r=t;let o=e.PrFactory.createList();let l=i.getSources().getIterator();while(l.hasNext()){let t=l.next();let i=t.getQueryModel();if(e.isNull(i)){return null}let a=o.addNewStructure();a.putString("Type","Query");a.putString("AliasName",t.getQueryAliasName());a.putString("ObjectName",t.getQueryAliasName());let p=a.putNewStructure("DefiningContext");let s=i.serializeToElement(r).asStructure();e.QInARepoDataSourceBlending.exportOptimizerHints(s,i.getOptimizerHintsByExecutionEngine(e.ExecutionEngine.MDS));let u=i.getQueryManager();let g=u.getResultSetPersistenceIdentifier();if(!t.isRemoteSource()&&e.XStringUtils.isNotNullAndNotEmpty(g)&&n){s.getStructureByKey("DataSource").putString("InstanceId",g)}let y=e.QInARepoDataSourceBlending.exportResultSetFeatures(i,true);s.put("ResultSetFeatureRequest",y);p.put("Definition",s)}e.XObjectExt.release(l);return o},exportConstantMapping:function(t,i){while(i.hasNext()){let n=i.next();let r=e.PrFactory.createStructure();r.putString("AliasName",n.getQueryAliasName());let o=r.putNewStructure("MappingDefinition");let l=o.putNewStructure("Constant");l.putString("Value",n.getMemberName());l.putString("ValueType",e.QInAConverter.lookupValueTypeInA(n.getValueType()));t.add(r)}},exportDataSourceBlending:function(t,i,n){let r=e.PrFactory.createStructure();let o=r.putNewStructure("Metadata");let l=o.putNewStructure("DataSource");l.putString("Type",e.QueryManagerMode.BLENDING.getName());let a=e.XStringBuffer.create();for(let e=0;e<i.getSources().size();e++){a.append(i.getSources().get(e).getQueryAliasName())}let p=a.toString();if(a.length()>=256){p=e.XSha1.createSHA1(p)}l.putString("ObjectName",p);let s=e.QInARepoDataSourceBlending.exportBlendingSources(t,i,n);l.put("Sources",s);let u=e.QInARepoDataSourceBlending.exportBlendingMappings(i.getMappings());l.put("Mappings",u);return l},exportDimensionMapping:function(t){let i=e.PrFactory.createStructure();i.putString("DimensionName",t.getMemberName());i.putString("LinkType",t.getLinkType().getName());if(t.isPreservingMembers()){i.putBoolean("PreserveMembers",true)}if(!t.isReturningOriginKeys()){i.putBoolean("ReturnOriginKeys",false)}let n=t.getMappingDefinitions().getIterator();let r=e.QInARepoDataSourceBlending.exportMappingDefinitions(n);e.XObjectExt.release(n);i.put("Mapping",r);if((t.getLinkType()===e.BlendingLinkType.ALL_DATA||t.getLinkType()===e.BlendingLinkType.NONE)&&t.getConstantMappings().hasElements()){e.QInARepoDataSourceBlending.exportConstantMapping(r,t.getConstantMappings().getIterator())}let o=e.PrFactory.createList();let l=t.getAttributeMappings().getIterator();while(l.hasNext()){let t=l.next();let i=e.QInARepoDataSourceBlending.exportAttributeMapping(t);o.add(i)}e.XObjectExt.release(l);if(!o.isEmpty()){i.put("AttributeMappings",o)}return i},exportMappingDefinitions:function(t){let i=e.PrFactory.createList();while(t.hasNext()){let e=t.next();let n=i.addNewStructure();n.putString("AliasName",e.getQueryAliasName());let r=n.putNewStructure("MappingDefinition");let o=r.putNewStructure("Member");o.putString("Name",e.getMemberName())}return i},exportOptimizerHints:function(t,i){if(e.XCollectionUtils.hasElements(i)){let n=e.XList.createWithList(i.getKeysAsReadOnlyList());n.sortByDirection(e.XSortDirection.ASCENDING);let r=t.putNewStructure("Hints");let o=r.putNewList(e.ExecutionEngine.MDS.getName());let l=n.size();for(let e=0;e<l;e++){let t=n.get(e);let r=o.addNewStructure();r.putString("Key",t);r.putString("Value",i.getByKey(t))}}},exportResultSetFeatures:function(t,i){let n=e.PrFactory.createStructure();n.putBoolean("UseDefaultAttributeKey",false);let r=t.getQueryManager();if(r.getMaxResultRecords()!==-1){n.putLong("MaxResultRecords",r.getMaxResultRecords())}e.QInARepoOptions.exportPaging(n,r);e.QInARepoOptions.exportSuppressKeyfigureCalculation(n,r);n.putString("ResultFormat","Version2");n.putString("ResultEncoding","None");if(i){n.putBoolean("IsCubeBlendingSubquery",true)}if(!r.isResultSetTransportEnabled()){n.putBoolean("ReturnEmptyJsonResultSet",true)}return n},getExtendedStructureMemberNames:function(t){let i=t.getMeasureDimension().getExtendedStructureMembers();return e.XCollectionUtils.createListOfNames(i)},updateBWRemoteSource:function(t,i,n){if(i.isTypeOf(e.SystemType.BW)||i.isTypeOf(e.SystemType.VIRTUAL_INA)){t.remove("FixedFilter");t.remove("DynamicFilter");t.remove("Filter");t.remove("Conditions");t.remove("Query");t.remove("QueryDataCells");t.remove("Sort");t.remove("ExtendedSortTypes");t.remove("Variables");t.remove("UniversalDisplayHierarchies");let i=e.QInARepoDataSourceBlending.getExtendedStructureMemberNames(n);let r=t.getListByKey("Dimensions");let o=e.PrUtils.getListSize(r,0);for(let t=0;t<o;t++){let n=r.getStructureAt(t).getListByKey("Members");let o=e.PrUtils.getListSize(n,0);for(let e=0;e<o;e++){let t=n.getStructureAt(e);if(i.contains(t.getStringByKey("Name"))){t.remove("Selection")}}}}},updateRemoteDataSource:function(t,i,n,r){let o=t.putNewStructure("DataSource");o.putString("Type","SerializedData");o.putString("InstanceId",i.getResultSetPersistenceIdentifier());let l=i.getActiveResultSetContainer();let a=i.getSystemDescription();let p=e.XStringUtils.isNotNullAndNotEmpty(l.getSerializedView())&&(!n||e.XStringUtils.isNotNullAndNotEmpty(l.getSerializedCube()));if(!p&&r.isSystemMappingValid(a)){let e=a.getSystemMapping(r.getSystemName());o.putString("ObjectName",e.getDeserializeTable());o.putString("SchemaName",e.getDeserializeSchema())}else{let e=o.putNewStructure("SerializedData");e.putString("View",l.getSerializedView());if(n){e.putStringNotNullAndNotEmpty("Cube",l.getSerializedCube())}}e.QInARepoDataSourceBlending.updateBWRemoteSource(t,i.getSystemType(),i.getQueryModel())}};e.QInARepoDataSourceExtDims={checkIsValid:function(t,i){let n=i.getJoinType();if(e.isNull(n)){t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate3("Extended dimension '",i.getName(),"' is missing a JoinType"));return false}let r=i.getDimensionType();if(r.isTypeOf(e.DimensionType.GIS_DIMENSION)&&n.isTypeOf(e.JoinType._TIME)){t.addError(e.ErrorCodes.INVALID_PARAMETER,"Spatial extended dimensions must not have join type INNER");return false}else if((r.isTypeOf(e.DimensionType.TIME)||r.isTypeOf(e.DimensionType.DATE))&&n.isTypeOf(e.JoinType._SPATIAL)){t.addError(e.ErrorCodes.INVALID_PARAMETER,"Time extended dimensions must not have spatial join type");return false}let o=i.getDataSource();if(e.isNull(o)){t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate3("Extended dimension '",i.getName(),"' is missing its DataSource"));return false}let l=i.getJoinParameters();if(n===e.JoinType.WITHIN_DISTANCE&&l.isEmpty()){t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate3("Extended dimension '",i.getName(),"' of joinType 'WITHIN_DISTANCE' is expected to have the 2 parameters 'distance' and 'unit of measure' (in that order)"));return false}return true},exportQd:function(t,i,n){let r=i.getExtendedDimensions();if(e.XCollectionUtils.hasElements(r)){let o=n.putNewList("ExtendedDimensions");for(let n=0;n<r.size();n++){let l=r.get(n);if(!e.QInARepoDataSourceExtDims.checkIsValid(t,l)){return}let a=o.addNewStructure();a.putString("Name",l.getName());a.putString("Description",l.getText());a.putInteger("DimensionType",e.QInAConverter.lookupDimensionTypeInA(l.getDimensionType()));a.putString("JoinFieldName",l.getJoinField());a.putString("JoinFieldNameInExtendedDimension",l.getJoinFieldNameExternal());a.putString("JoinType",l.getJoinType().getName());let p=l.getJoinCardinality();if(e.notNull(p)){a.putString("JoinCardinality",p.getName())}let s=i.getQueryManager();let u=null;if(e.notNull(s)){u=s.getModelCapabilities()}if(e.isNull(u)){u=t.m_capabilities}if(u.supportsDimensionVisibility()&&u.supportsExtendedDimensionVisibility()){let t=l.getVisibility();if(e.notNull(t)){a.putString("Visibility",t.getName())}}let g=l.getJoinParameters();if(g.hasElements()){let e=a.putNewList("JoinParameters");e.addAllStrings(g)}let y=l.getDataSource();let m=a.putNewStructure("DataSource");e.QInARepoDataSourceProperties.exportQd(t,y,m,false);let c=y.getType();if(e.isNull(c)){m.putString("Type",e.MetaObjectType.DBVIEW.getCamelCaseName())}else{m.putString("Type",c.getCamelCaseName())}if(u.supportsExtendedDimensionsChangeDefaultRenamingAndDescription()){a.putStringNotNull("FieldRenamingMode",l.getRenamingMode())}}}},importExtendedDataSource:function(t,i){let n=t.getStructureByKey("DataSource");if(e.notNull(n)){let t=e.QFactory.createDataSource();e.QInARepoDataSourceProperties.importQd(t,n);let r;let o=n.getStringByKey("Type");if(e.isNull(o)){r=e.MetaObjectType.DBVIEW}else{r=e.MetaObjectType.lookup(e.XString.toLowerCase(o))}t.setType(r);i.setDataSource(t)}},importJoinParameter:function(t,i){let n=t.getListByKey("JoinParameters");if(e.notNull(n)){let e=i.getJoinParameters();e.clear();let t=n.size();for(let i=0;i<t;i++){e.add(n.getStringAt(i))}}},importQd:function(t,i,n){if(t.m_capabilities.supportsExtendedDimensions()){let t=i.getExtendedDimensionsBase();t.clear();let r=n.getListByKey("ExtendedDimensions");if(e.notNull(r)){let t=r.size();for(let n=0;n<t;n++){let t=r.getStructureAt(n);let o=t.getStringByKey("Name");let l=t.getStringByKey("JoinFieldName");let a=t.getStringByKey("JoinFieldNameInExtendedDimension");let p=i.addNewExtendedDimension(o,l,a);p.setText(t.getStringByKey("Description"));let s=t.getStringByKey("JoinType");let u=e.JoinType.lookup(s);p.setJoinType(u);e.QInARepoDataSourceExtDims.importJoinParameter(t,p);e.QInARepoDataSourceExtDims.importExtendedDataSource(t,p);let g=t.getStringByKey("FieldRenamingMode");if(e.notNull(g)){p.setRenamingMode(g)}let y=t.getStringByKey("JoinCardinality");if(e.XStringUtils.isNotNullAndNotEmpty(y)){let t=e.JoinCardinality.lookup(y);p.setJoinCardinality(t)}let m=t.getStringByKey("Visibility");if(e.XStringUtils.isNotNullAndNotEmpty(m)){let t=e.DimensionVisibility.lookup(m);if(e.notNull(t)){p.setVisibility(t)}}}}}}};e.QInARepoDataSourceProperties={exportQd:function(t,i,n,r){e.QInAExportUtil.setNonEmptyString(n,"ObjectName",i.getObjectName());e.QInAExportUtil.setNonEmptyString(n,"Environment",i.getEnvironmentName());e.QInAExportUtil.setNonEmptyString(n,"PackageName",i.getPackageName());e.QInAExportUtil.setNonEmptyString(n,"SchemaName",i.getSchemaName());e.QInAExportUtil.setNonEmptyString(n,"AliasName",i.getAlias());if(t.getSession().hasFeature(e.FeatureToggleOlap.UNIVERSE_SOURCE_QUERY)&&e.QInARepoDataSourceProperties.exportSourceQuery(i)){e.QInAExportUtil.setNonEmptyString(n,"SourceQuery",i.getSourceQuery())}let o=i.getCustomProperties();let l=o.getKeysAsIterator();if(l.hasNext()){let t=n.putNewStructure("CustomProperties");while(l.hasNext()){let n=l.next();if(!e.XString.isEqual(n,e.QDataSource.SOURCE_QUERY_INA)||e.QInARepoDataSourceProperties.exportSourceQuery(i)){e.QInAExportUtil.setNonEmptyString(t,n,o.getByKey(n))}}}let a=i.getDataArea();if(!e.XString.isEqual(a,"DEFAULT")){e.QInAExportUtil.setNonEmptyString(n,"DataArea",a)}if(r){e.QInAExportUtil.setNonEmptyString(n,"RunAsUser",i.getRunAsUser())}e.QInAExportUtil.setNonEmptyString(n,"Description",i.getText())},exportSourceQuery:function(t){let i=false;let n=t.getContext();if(e.notNull(n)){let t=n.getQueryManager();if(e.notNull(t)){let e=t.getQueryServiceConfig();i=e.isSkipSourceQueryForNonMetadataRequests()}}return!i},importQd:function(t,i){let n=i.getStringByKey("ObjectName");t.setName(n);let r=i.getStringByKey("Environment");t.setEnvironmentName(r);let o=i.getStringByKey("PackageName");t.setPackageName(o);let l=i.getStringByKey("SchemaName");t.setSchemaName(l);let a=i.getStringByKey("SourceQuery");t.setSourceQuery(a);let p=i.getStringByKey("AliasName");t.setAlias(p);let s=i.getStringByKey("DataArea");t.setDataArea(s);let u=i.getStringByKey("RunAsUser");t.setRunAsUser(u);let g=i.getStringByKey("Description");t.setText(g);let y=i.getStructureByKey("CustomProperties");if(e.notNull(y)){let e=y.getKeysAsReadOnlyList();let i=e.size();for(let n=0;n<i;n++){let i=e.get(n);t.addCustomProperty(i,y.getStringByKey(i))}}}};e.QInARepoInputEnablementRules={exportInputEnablementRules:function(t,i){let n=i.getInputEnablementRules();if(!i.getModelCapabilities().supportsInputEnablementFilterSettings()){return}let r=i.getInputReadinessMainQuery();let o=i.getInputReadinessCacheMode();if(e.XStringUtils.isNotNullAndNotEmpty(r)||e.notNull(o)){let i=t.putNewStructure("AsyncInputReadiness");i.putStringNotNull("MainQuery",r);i.putStringNotNull("CacheMode",e.QInAConverter.lookupInputEnablementCacheModeInA(o))}if(e.XCollectionUtils.hasElements(n)){let i=t.putNewStructure("InputEnablementFilter");let r=i.putNewList("Rules");for(let t=0;t<n.size();t++){let i=n.get(t);let o=r.addNewStructure();o.putString("Mode",e.QInAConverter.lookupInputEnablementModeInA(i.getMode()));o.putString("Reason",i.getReason())}}},importInputEnablementRules:function(t,i){i.clearInputEnablementRules();let n=t.getStructureByKey("AsyncInputReadiness");if(e.notNull(n)){let t=n.getStringByKey("MainQuery");i.setInputReadinessMainQuery(t);let r=e.QInAConverter.lookupInputCacheMode(n.getStringByKey("CacheMode"));i.setInputReadinessCacheMode(r)}let r=t.getStructureByKey("InputEnablementFilter");if(e.notNull(r)){let t=r.getListByKey("Rules");if(e.XCollectionUtils.hasElements(t)){for(let n=0;n<t.size();n++){let r=t.getStructureAt(n);let o=r.getStringByKey("Mode");let l=e.QInAConverter.lookupInputEnablementMode(o);let a=r.getStringByKey("Reason");i.addNewInputEnablementRule(l,a)}}}}};e.QInARepoInputReadinessFilter={exportInputReadinessFilter:function(t,i){let n=i.getInputReadinessFilter();if(e.isNull(n)||!i.getModelCapabilities().supportsInputReadinessFilter()){return}let r=t.putNewStructure("InputReadinessFilter");r.putString("Mode",e.QInAConverter.lookupInputReadinessFilterModeInA(n.getMode()));let o=n.getStates();if(!o.isEmpty()){let e=r.putNewList("InputReadinessStates");for(let t=0;t<o.size();++t){let i=o.get(t);let n=e.addNewStructure();n.putString("Flag",i.getFlag());n.putString("Parameter",i.getParameter())}}},importInputReadinessFilter:function(t,i){let n=t.getStructureByKey("InputReadinessFilter");if(e.isNull(n)){i.clearInputReadinessFilter()}else{let t=n.getStringByKey("Mode");i.setInputReadinessFilter(e.QInAConverter.lookupInputReadinessFilterMode(t));let r=n.getListByKey("InputReadinessStates");for(let e=0;e<r.size();e++){let t=r.getStructureAt(e);let n=t.getStringByKey("Flag");let o=t.getStringByKey("Parameter");i.addInputReadinessFilterState(n,o)}}}};e.QInARepoOptions={exportLOVAbstractionLayerSettings:function(e,t){if(t.hasLovManager()){let i=t.getLovManager();let n=e.putNewStructure("LovAbstractionRepo");n.putBoolean("Enabled",i.isLovAbstractionEnabled());n.putBoolean("Measures",i.isIncludeMeasures());n.putBoolean("AutoVhReadModeConfig",i.isAutomaticValueHelpReadModeConfigurationEnabled());n.putBoolean("AutoVhDrillLevelConfig",i.isAutomaticValueHelpDrillLevelConfigurationEnabled());n.putBoolean("IgnoreMultipleDrillsInVh",i.isIgnoreMultipleDrillsInValueHelp());n.putBoolean("RestoreSettingsAfterImplicitSubmit",i.isRestoreSettingsAfterImplicitSubmit());n.putBoolean("Sort",i.hasUserDefinedSort())}},exportOptimizerHints:function(t,i){if(i.getModelCapabilities().supportsCeScenarioParams()){let n=e.PrFactory.createStructure();e.QInARepoOptions.exportOptimizerHintsByEngine(n,i,e.ExecutionEngine.CALC_ENGINE);e.QInARepoOptions.exportOptimizerHintsByEngine(n,i,e.ExecutionEngine.MDS);e.QInARepoOptions.exportOptimizerHintsByEngine(n,i,e.ExecutionEngine.SQL);if(n.hasElements()){t.put("Hints",n)}}},exportOptimizerHintsByEngine:function(t,i,n){let r=i.getOptimizerHintsByExecutionEngine(n);if(e.notNull(r)&&r.hasElements()){let i=r.getKeysAsReadOnlyList();i.sortByDirection(e.XSortDirection.ASCENDING);let o=t.putNewList(n.getName());let l=i.size();for(let e=0;e<l;e++){let t=i.get(e);let n=o.addNewStructure();n.putString("Key",t);n.putString("Value",r.getByKey(t))}}},exportOptions:function(t){let i=e.PrFactory.createStructure();i.putBoolean("UseDefaultAttributeKey",false);let n=t.getActiveResultSetContainer();if(n.getMaxResultRecords()!==-1){i.putLong("MaxResultRecords",n.getMaxResultRecords())}let r=n.getDataRefreshEnabled();if(r===e.ActionChoice.ON||r===e.ActionChoice.ONCE){i.putBoolean("Refresh",true)}let o=false;if(e.XStringUtils.isNotNullAndNotEmpty(n.getResultSetPersistenceTable())){i.putString("ResultSetPersistanceTable",n.getResultSetPersistenceTable());if(e.XStringUtils.isNotNullAndNotEmpty(n.getResultSetPersistenceSchema())){i.putString("ResultSetPersistanceSchema",n.getResultSetPersistenceSchema());o=true}}if(!n.isResultSetTransportEnabled()){i.putBoolean("ReturnEmptyJsonResultSet",true)}e.QInARepoOptions.exportPaging(i,t);e.QInARepoOptions.exportSuppressKeyfigureCalculation(i,t);if(t.getExecuteRequestOnOldResultSet()){i.putBoolean("ExecuteRequestOnOldResultSet",true)}if(t.isIncludePerformanceNotDefault()){i.putBoolean("IncludePerformanceData",t.isRequestingPerformanceData())}let l=t.getCapabilitiesBase();if(l.supportsAutoVariableSubmit()){i.putBoolean("IgnoreAutoSubmit",!t.isProcessingAutoSubmit())}let a=t.getQueryModel();if(l.supportsEncodedResultset()){i.putString("ResultFormat","Version2");i.putString("ResultEncoding","None");if(n.getResultSetPersistenceIdentifier()!==null){let r=!n.isRemotePreQuery();if(r){i.putBoolean("IsCubeBlendingSubquery",true)}if(e.QInARepoOptions.isCubeCacheQuery(a)){i.putString("ResultSetPersistanceIdentifier",n.getResultSetPersistenceIdentifier())}else{i.putString("ResultFormat","SerializedData");if(o){i.putString("ResultSetPersistanceIdentifier",n.getResultSetPersistenceIdentifier())}if(t.getSystemType().isTypeOf(e.SystemType.BW)){if(r&&t.getResultSetPersistenceType()===e.BlendingPersistenceType.VIEW){i.putString("ResultSetPersistanceType","View")}else if(r&&t.getResultSetPersistenceType()===e.BlendingPersistenceType.CUBE){i.putString("ResultSetPersistanceType","Cube")}}}}}if(e.notNull(a)&&l.supportsKeepOriginalTexts()){i.putBoolean("ResultKeepOriginalTexts",a.isKeepingOriginalTexts())}if(n.getSuppressCalculatedMembersWithoutBookedData()!==-1){i.putInteger("SuppressCalculatedMembersWithoutBookedData",n.getSuppressCalculatedMembersWithoutBookedData())}return i},exportPaging:function(e,t){let i=t.getActiveResultSetContainer();let n=e.putNewStructure("SubSetDescription");let r=i.getMaxRows();let o=i.getOffsetRows();n.putInteger("RowFrom",o);if(r===-1){n.putInteger("RowTo",-1)}else{n.putInteger("RowTo",o+r)}let l=i.getMaxColumns();let a=i.getOffsetColumns();n.putInteger("ColumnFrom",a);if(l===-1){n.putInteger("ColumnTo",-1)}else{n.putInteger("ColumnTo",a+l)}},exportReturnedDataSelections:function(t,i){if(i.supportsReturnedDataSelection()){let n=t.putNewStructure("ReturnedDataSelection");if(i.supportsReturnedDataSelection()){let t=i.getQueryModel().getAllReturnedDataSelections();let r=t.getKeysAsIterator();while(r.hasNext()){let i=r.next();n.putBoolean(e.QInAConverter.lookupReturnedDataSelectionInA(i),t.getByKey(i).getBoolean())}}}},exportSuppressKeyfigureCalculation:function(t,i){if(e.notNull(t)&&e.notNull(i)&&i.isKeyfigureCalculationSuppressed()){t.putBoolean("SuppressKeyfigureCalculation",true)}},exportUniqueAxisProperties:function(t,i){let n=i.getQueryModel();let r=e.notNull(n)&&n.getModelCapabilities().supportsUniqueAxisProperties()?n.getReturnedUniqueAxisProperties():null;let o=e.isNull(r)?null:r.getRowProperties();let l=e.isNull(r)?null:r.getColumnProperties();let a=e.isNull(r)?null:r.getDefaultAxisProperties();let p=e.XCollectionUtils.hasElements(o);let s=e.XCollectionUtils.hasElements(l);let u=e.XCollectionUtils.hasElements(a);if(p||s||u){let i=t.putNewStructure("UniqueAxisProperties");if(p){let t=i.putNewStructure("Rows");e.XCollectionUtils.forEach(o.getKeysAsReadOnlyList(),i=>{t.putBoolean(e.QInAConverter.lookupUniqueAxisPropertyInA(i),o.getByKey(i).getBoolean())})}if(s){let t=i.putNewStructure("Columns");e.XCollectionUtils.forEach(l.getKeysAsReadOnlyList(),i=>{t.putBoolean(e.QInAConverter.lookupUniqueAxisPropertyInA(i),l.getByKey(i).getBoolean())})}if(u){let t=i.putNewStructure("Default");e.XCollectionUtils.forEach(a.getKeysAsReadOnlyList(),i=>{t.putBoolean(e.QInAConverter.lookupUniqueAxisPropertyInA(i),a.getByKey(i).getBoolean())})}}},fillOptions:function(t,i,n,r){let o=e.PrFactory.createList();if(i.supportsServerState()){o.addString("StatefulServer")}let l=r.getServerCustomizations();o.addAllStrings(l.getValuesAsReadOnlyList());if(n.hasFeature(e.FeatureToggleOlap.NO_EMPTY_OPTIONS)===false||o.hasElements()){t.put("Options",o)}},importLOVAbstractionLayerSettings:function(t,i){let n=t.getStructureByKey("LovAbstractionRepo");if(e.notNull(n)){let e=i.getLovManager();e.setLovAbstractionEnabled(n.getBooleanByKeyExt("Enabled",false),true);e.setIncludeMeasures(n.getBooleanByKeyExt("Measures",false));e.setAutomaticValueHelpReadModeConfigurationEnabled(n.getBooleanByKeyExt("AutoVhReadModeConfig",true));e.setAutomaticValueHelpDrillLevelConfigurationEnabled(n.getBooleanByKeyExt("AutoVhReadModeConfig",true));e.setIgnoreMultipleDrillsInValueHelp(n.getBooleanByKeyExt("IgnoreMultipleDrillsInVh",false));e.setRestoreSettingsAfterImplicitSubmit(n.getBooleanByKeyExt("RestoreSettingsAfterImplicitSubmit",false));e.setHasUserDefinedSort(n.getBooleanByKeyExt("Sort",false))}else if(i.hasLovManager()){i.getLovManager().setLovAbstractionEnabled(false,true)}},importOptimizerHints:function(t,i){if(i.getModelCapabilities().supportsCeScenarioParams()){i.getQueryModel().clearAllOptimizerHints();let n=t.getStructureByKey("Hints");if(e.notNull(n)){e.QInARepoOptions.importOptimizerHintsByEngine(n,e.ExecutionEngine.CALC_ENGINE,i);e.QInARepoOptions.importOptimizerHintsByEngine(n,e.ExecutionEngine.MDS,i);e.QInARepoOptions.importOptimizerHintsByEngine(n,e.ExecutionEngine.SQL,i)}}},importOptimizerHintsByEngine:function(t,i,n){let r=n.getQueryModel();let o=t.getListByKey(i.getName());if(e.notNull(o)){let e=o.size();for(let t=0;t<e;t++){let e=o.getStructureAt(t);let n=e.getStringByKey("Key");let l=e.getStringByKey("Value");r.addOptimizerHint(i,n,l)}}},importPaging:function(t,i){if(e.notNull(t)){let n=i.getQueryModel();let r=t.getStructureByKey("SubSetDescription");if(e.isNull(r)||!n.getSession().hasFeature(e.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)&&!i.isApplyingRepoState()){return}let o=r.getIntegerByKey("RowFrom");if(o>-1){i.setOffsetRows(o);i.setMaxRows(r.getIntegerByKey("RowTo")-o)}else{i.setMaxRows(r.getIntegerByKey("RowTo"))}let l=r.getIntegerByKey("ColumnFrom");if(l>-1){i.setOffsetColumns(l);i.setMaxColumns(r.getIntegerByKey("ColumnTo")-l)}else{i.setMaxColumns(r.getIntegerByKey("ColumnTo"))}}},importReturnedDataSelections:function(t,i){if(e.notNull(t)){let n=t.getStructureByKey("ReturnedDataSelection");if(e.notNull(n)&&n.hasElements()){let t=i.supportsReturnedDataSelection();let r=n.getKeysAsReadOnlyList();let o=r.size();for(let l=0;l<o;l++){let o=r.get(l);if(n.getByKey(o).isBoolean()){if(t){let t=e.QInAConverter.lookupReturnedDataSelection(o);if(e.notNull(t)){let r=i.getQueryModel();if(t===e.ReturnedDataSelection.TUPLE_ELEMENT_IDS){r.toggleReturnedDataSelection(t,true);continue}r.toggleReturnedDataSelection(t,n.getBooleanByKeyExt(t.getName(),false))}}}}}}},importSuppressKeyfigureCalculation:function(t,i){if(e.notNull(t)&&e.notNull(i)){i.setSuppressKeyfigureCalculation(t.getBooleanByKeyExt("SuppressKeyfigureCalculation",false))}},importUniqueAxisDataSelection:function(t,i,n){e.XCollectionUtils.forEach(i.getKeysAsReadOnlyList(),r=>{let o=e.QInAConverter.lookupUniqueAxisProperty(r);if(e.notNull(o)){t.toggleActivation(n,o,i.getBooleanByKeyExt(o.getName(),false))}})},importUniqueAxisProperties:function(t,i){let n=i.getQueryModel();if(e.notNull(t)&&e.notNull(n)&&n.getModelCapabilities().supportsUniqueAxisProperties()){let n=t.getStructureByKey("UniqueAxisProperties");if(e.notNull(n)&&n.hasElements()){i.getConvenienceCommands().clearAllUniqueAxisProperties();let t=i.getQueryModel().getReturnedUniqueAxisProperties();let r=n.getKeysAsReadOnlyList();let o=r.size();for(let i=0;i<o;i++){let o=r.get(i);if(n.getByKey(o).isStructure()&&e.notNull(t)){if(e.XString.isEqual(o,"Rows")){e.QInARepoOptions.importUniqueAxisDataSelection(t,n.getStructureByKey(o),e.AxisType.ROWS)}else if(e.XString.isEqual(o,"Columns")){e.QInARepoOptions.importUniqueAxisDataSelection(t,n.getStructureByKey(o),e.AxisType.COLUMNS)}else{e.QInARepoOptions.importUniqueAxisDataSelection(t,n.getStructureByKey(o),null)}}}}}},isCubeCacheQuery:function(t){let i=t.getOptimizerHintsByExecutionEngine(e.ExecutionEngine.MDS);return e.notNull(i)&&i.containsKey(e.OptimizerHint.CUBE_CACHE_WITH_ID.getName())},setLanguage:function(t,i){let n=i.getConnection().getSystemDescription().getLanguage();if(e.XStringUtils.isNotNullAndNotEmpty(n)){t.putString("Language",n)}},setRequestTimeZone:function(t,i){if(e.notNull(t)&&i.getModelCapabilities().supportsRequestTimezone()){t.putStringNotNullAndNotEmpty("Timezone",i.getQueryServiceConfig().getRequestTimeZone())}}};e.QInARepoUtils={_importValueInternal:function(t,i,n,r,o,l,a){let p=t.m_capabilities.supportsSapDate()||e.notNull(l)&&l.getModelCapabilities()!==null&&l.getModelCapabilities().supportsSapDate();let s=e.PrUtils.getBooleanValueProperty(n,"FieldLiteralValue",false);let u=r;if(e.isNull(u)){u="Value"}let g=!a&&e.notNull(l)&&s;let y=g?l.getValueType():o;let m=n.getStringByKey(u);let c=n.getStringByKey(e.XStringUtils.concatenate2(u,"Type"));if(e.isNull(y)){y=e.QInAConverter.lookupValueType(c)}else if(y===e.XValueType.STRING&&p){let t=e.QInAConverter.lookupValueType(c);if(t===e.XValueType.DATE){m=e.XDate.createDateSafe(m).toSAPFormat()}else if(t===e.XValueType.TIME){m=e.XTime.createTimeSafe(m).toSAPFormat()}else if(t===e.XValueType.DATE_TIME){m=e.XDateTime.createDateTimeSafe(m).toSAPFormat()}}if(e.isNull(o)){p=false}if((y===e.XValueType.DOUBLE||y===e.XValueType.DECIMAL_FLOAT)&&n.hasStringByKey(u)){y=e.XValueType.STRING}let A;if(y===e.XValueType.STRING){if(a){return e.XStringValue.create(m)}if(!g){i.setString(m)}else{let t=l.getDimension();let n=t.isStructure()?t.getDimensionMember(m):null;if(e.notNull(n)){i.setDimensionMember(n)}else{A=l.createFieldLiteralValue();A.setString(m);i.setFieldValue(A)}}}else if(y===e.XValueType.DECIMAL_FLOAT){let t=e.QInARepoUtils.getDecimalFLoat(n,u);if(a){return t}if(!g){i.setDecFloat(t)}else{A=l.createFieldLiteralValue();A.setValue(t);i.setFieldValue(A)}}else if(y===e.XValueType.DOUBLE){let t=e.QInARepoUtils.getDouble(n,u);if(a){return e.XDoubleValue.create(t)}if(!g){i.setDouble(t)}else{A=l.createFieldLiteralValue();A.setDouble(t);i.setFieldValue(A)}}else if(y===e.XValueType.INTEGER){let t=n.getIntegerByKey(u);if(a){return e.XIntegerValue.create(t)}if(!g){i.setInteger(t)}else{A=l.createFieldLiteralValue();A.setInteger(t);i.setFieldValue(A)}}else if(y===e.XValueType.BOOLEAN){let t=n.getBooleanByKey(u);if(a){return e.XBooleanValue.create(t)}i.setBoolean(t)}else if(y===e.XValueType.LONG){let t=e.PrUtils.getLongValueProperty(n,u,0);if(a){return e.XLongValue.create(t)}if(!g){i.setLong(t)}else{A=l.createFieldLiteralValue();A.setLong(t);i.setFieldValue(A)}}else if(y===e.XValueType.DATE){m=n.getStringByKey(u);let t=e.QInARepoUtils.createDate(m);if(a){return t}if(!g){i.setDate(t)}else{A=l.createFieldLiteralValue();A.setDate(t);i.setFieldValue(A)}}else if(y===e.XValueType.TIME){m=n.getStringByKey(u);let t=e.XTime.createTimeFromStringWithFlag(m,p);if(a){return t}i.setTime(t)}else if(y===e.XValueType.DATE_TIME){m=n.getStringByKey(u);let t=e.XDateTime.createDateTimeFromStringWithFlag(m,p);if(a){return t}if(!g){i.setDateTime(t)}else{A=l.createFieldLiteralValue();A.setDate(t);i.setFieldValue(A)}}else if(y.isSpatial()){m=n.getStringByKey(u);let r=e.XGeometryValue.createGeometryValueWithWkt(m);if(a){return r}i.setValue(r);if(t.m_capabilities.supportsSpatialFilterSrid()&&n.containsKey("SRID")){i.getGeometry().setSrid(e.XIntegerValue.create(n.getIntegerByKey("SRID")))}}else if(y===e.XValueType.UNSUPPORTED){return null}else if(y===e.XValueType.VARIABLE||y===e.XValueType.CURRENT_MEMBER){if(!a){i.setFilterValueType(y)}return null}else{t.addError(e.ErrorCodes.INVALID_TOKEN,e.XStringUtils.concatenate3("Unsupported value type '",y.getName(),"'"));return null}return null},addKeyRefStructure:function(t,i,n,r){let o=n.putNewStructure("KeyRef");if(!t.getOriginalMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)||e.isNull(r)||r.getClientQueryObjectStorageName()===null||!e.XString.isEqual(i.getStorageName(),r.getClientQueryObjectStorageName())){o.putString("StorageName",i.getStorageName())}o.putString("GroupName",i.getStorageGroupName());o.putString("ObjectName",i.getStorageObjectName());let l=i.getComponentType();let a=e.QInAConverter.lookupComponentTypeInA(l);if(e.notNull(a)){n.putString("CType",a)}},containsEscapedQuote:function(t){return e.XStringUtils.isNotNullAndNotEmpty(t)&&(e.XString.getCharAt(t,0)===92||e.XString.getCharAt(t,0)===34)&&(e.XString.getCharAt(t,e.XString.size(t)-1)===92||e.XString.getCharAt(t,e.XString.size(t)-1)===34)},correctRemovingUnwantedBackslashAndQuotes:function(t){let i=t;while(e.QInARepoUtils.containsEscapedQuote(i)){i=e.XStringUtils.stripChars(i,1)}return i},createDate:function(t){return e.XDate.createDateSafe(t)},exportCacheKey:function(t,i){let n=e.PrFactory.createStructure();n.putString("System",t.getSystemName());n.putString("Providers",t.getProviderType().getName());n.putString("Cube",t.getDataSourceHashKey());n.putString("FieldName",t.getKey1());n.putString("DimensionName",t.getKey2());n.putString("ValidationHash",t.getValidationHash());n.putString("DimensionGroupNames",t.getDimensionGroupNames());if(e.notNull(i)&&i.getClientQueryObjectStorageName()!==null){n.putString("StorageName",i.getClientQueryObjectStorageName())}return n},exportFieldValue:function(t,i,n,r,o,l){let a=i;if(e.isNull(a)){a="Value"}let p=l;if(e.isNull(p)){p=o.getValueType();let t=e.QInAConverter.lookupValueTypeInA(p);n.putString(e.XStringUtils.concatenate2(a,"Type"),t)}if(p===e.XValueType.STRING){let e=o.getString();n.putString(a,e)}else if(p===e.XValueType.INTEGER){n.putInteger(a,o.getInteger())}else if(p===e.XValueType.LONG){n.putLong(a,o.getLong())}else if(p===e.XValueType.DOUBLE||p===e.XValueType.DECIMAL_FLOAT){n.putDouble(a,o.getDouble())}else if(p===e.XValueType.BOOLEAN){n.putBoolean(a,o.getBoolean())}else if(p===e.XValueType.DATE){e.QInARepoUtils.setDateIfNotNull(t,n,a,o.getDate())}else if(p===e.XValueType.TIME){e.QInARepoUtils.setDateIfNotNull(t,n,a,o.getTime())}else if(p===e.XValueType.DATE_TIME){e.QInARepoUtils.setDateIfNotNull(t,n,a,o.getDateTime())}if(e.notNull(p)&&p.isSpatial()){let i=o.getGeometry();n.putString(a,i.toWKT());let r=i.getSrid();if(t.m_capabilities.supportsSpatialFilterSrid()&&e.notNull(r)){n.putInteger("SRID",r.getInteger())}}if(e.notNull(r)){n.putBoolean("FieldLiteralValue",true)}},exportFilterUiSettings:function(t,i,n){if(t.hasUiSettings(i)){let r=e.PrFactory.createStructure();let o=t.getUiSettings(i);r.putStringNotNull("FilterDisplayInfo",e.QInAConverter.lookupFilterDisplayInfoInA(o.getDisplayInfo()));r.putStringNotNull("ReadMode",e.QInAConverter.lookupReadModeInA(o.getReadMode()));if(r.hasElements()){n.put(e.QInARepoUtils.getUiSettingsKey(i),r)}}},exportFilterValue:function(t,i,n,r,o){if(o===e.XValueType.VARIABLE){let t=r.getVariableValue();if(e.notNull(t)){n.putString(i,t.getName());if(e.XString.isEqual(i,"Low")){n.putString("LowIs","Variable")}else if(e.XString.isEqual(i,"High")){n.putString("HighIs","Variable")}}}else{e.QInARepoUtils.exportValue(t,i,n,r,o)}},exportLayeredFilters:function(t,i){return e.QInARepoUtils.exportLayeredFiltersExt(t,i,null)},exportLayeredFiltersExt:function(t,i,n){let r=e.PrFactory.createList();let o=i.getLinkedFilters();let l=o.getKeysAsIterator();while(l.hasNext()){let o=l.next();let a=i.getLinkedFilter(o);if(e.QInARepoUtils.isValidFilterExpressionForRepository(a)&&(e.isNull(n)||n(a).getBoolean())){let e=t.exportFilterExpression(a);e.putString("Name",o);r.add(e)}}return r},exportLinkPart:function(t,i,n){i.putString("System",n.getSystemName());i.putString("DataSource",n.getCubeName());i.putString("DimensionName",n.getDimensionName());i.putString("FieldName",n.getFieldName());i.putStringNotNullAndNotEmpty("QueryManagerKey",n.getQueryManagerKey());if(n.getHierarchyName()!==null){i.putString("HierarchyName",n.getHierarchyName())}if(n.getHierId()!==null){i.putString("HierarchyId",n.getHierId())}if(n.getFieldKey().getValidationHash()!==null){i.putString("ValidationHash",n.getFieldKey().getValidationHash())}if(t.getSession().hasFeature(e.FeatureToggleOlap.LOV_BASED_FILTER_ACROSS_MODELS)){i.putBoolean("IsIncludeHierarchyNodeChildren",n.isIncludeHierarchyNodeChildren())}if(n.getPropagateOnDefaultHierarchyKey()){i.putBoolean("PropagateOnDefaultHierarchyKey",true)}if(t.getSession().hasFeature(e.FeatureToggleOlap.FLEXIBLE_TIME_DYNAMIC_TIME)){i.putBoolean("PropagateFlexibleTimeRangeFiltersDirect",n.getPropagateFlexibleTimeRangeFiltersDirect())}if(t.getSession().hasFeature(e.FeatureToggleOlap.FLEXIBLE_TIME_DYNAMIC_TIME)){i.putBoolean("PropagateDirectFlexibleMemberFiltersHierarchy",n.getPropagateDirectFlexibleTimeMemberFiltersUsingHierarchy())}},exportShiftableTimeRangeFilter:function(t,i){t.putInteger("LookBack",i.getLookBack());let n=i.getOffsetFunction();if(e.notNull(n)){t.putString("OffsetFunction",n.getName())}t.putString("OffsetLevelName",i.getOffsetLevelName());t.putInteger("OffsetAmount",i.getOffsetAmount());if(i.getPivotMemberLevelName()!==null){t.putString("PivotLevelName",i.getPivotMemberLevelName())}if(i.getFiscalGranularity()!==-1){t.putInteger("FiscalGranularity",i.getFiscalGranularity())}if(i.getOffsetFiscalGranularity()!==-1){t.putInteger("OffsetFiscalGranularity",i.getOffsetFiscalGranularity())}},exportSupplementsAndValue:function(t,i,n,r,o,l){e.QInARepoUtils.exportFieldValue(t,i,n,r,o,l);let a=o.getSupplementValues();if(e.XCollectionUtils.hasElements(a)){let e=n.putNewList("Supplements");let t=a.size();for(let i=0;i<t;i++){let t=e.addNewStructure();let n=a.get(i);t.putString("Key",n.getKey().toString());t.putString("Value",n.getValue().toString())}}},exportTimeOperation:function(t,i){t.putString("Name",i.getDimensionName());t.putString("TimeOperationFunction",i.getFunction().getName());if(i.getGranularity()!==null){t.putString("TimeOperationGranularity",i.getGranularity().getName())}t.putInteger("TimeOperationPeriod",i.getPeriod());t.putBoolean("TimeOperationForceMemberNavGeneration",i.getForceMemberNavigationGeneration());t.putBoolean("TimeOperationUseToDateFlatRangeSelection",i.getUseToDateFlatRangeSelection());t.putString("LevelName",i.getHierarchyLevelName());if(i.getFunction()===e.QTimeOperationFunction.PREVIOUS&&i.getGranularity()===e.QTimeOperationGranularity.PERIOD){t.putString("TimePeriodOperationLevel",i.getTimePeriodOperationLevel().getName())}},exportTimeRangeFilter:function(t,i,n){i.putString("DimensionName",n.getTimeDimensionName());i.putString("HierarchyName",n.getHierarchyName());i.putString("LevelName",n.getLevelName());i.putBoolean("ConvertToFlatSelection",n.isConvertToFlatFilter());if(n.getLowValueType()!==null){i.putString("LowValueType",n.getLowValueType().getName())}i.putBoolean("IsExcluding",n.getSetSign()===e.SetSign.EXCLUDING);let r=n.getFallbackFilter().getFilterRootElement();if(e.notNull(r)){let e=t.exportComponent(null,r,null,0);i.put("Selection",e)}},exportValue:function(t,i,n,r,o){e.QInARepoUtils.exportFieldValue(t,i,n,null,r,o)},extendStructureWithTagging:function(t,i,n){let r=i.getTagging();if(e.XCollectionUtils.hasElements(r)){let t=r.getKeysAsReadOnlyList();let i=n.putNewList("ComponentTags");for(let n=0;n<t.size();n++){let o=t.get(n);let l=r.getByKey(o);let a=e.PrFactory.createStructure();i.add(a);a.putString("KEY",o);if(e.isNull(l)){a.putNull("VALUE")}else{a.putString("VALUE",l)}}}return n},getDecimalFLoat:function(t,i){let n;let r=t.getByKey(i);if(r.isString()){let t=r.getString();n=e.XDecFloatByString.create(t)}else if(r.isNumeric()){n=e.XDecFloatByDouble.create(r.getDouble())}else{n=e.XDecFloatByString.createZeroValue()}return n},getDouble:function(t,i){let n;let r=t.getByKey(i);if(r.isString()){let t=r.getString();n=e.XDouble.convertFromString(t)}else if(r.isDouble()){n=r.getDouble()}else if(r.isInteger()){n=r.getInteger()}else{n=0}return n},getFilterAcrossModelSourceContext:function(t,i){let n=null;let r=t.getLinks().getIterator();if(r.hasNext()){let o=r.next();let l=t.getOlapEnv().getSharedQueryManager(o.getFirstPart().getQueryManagerKey());let a=t.getOlapEnv().getSharedQueryManager(o.getSecondPart().getQueryManagerKey());if(e.notNull(l)&&e.notNull(a)){if(i.isSameDataSourceAsContext(l)){n=l}else if(i.isSameDataSourceAsContext(a)){n=a}}}return n},getFormulaCalcDimField:function(t,i,n){let r=t.getOlapEnv().getClientQueryObjectManager();let o=r.getFormulaCalcDimPropertiesByFieldName(i,n);if(e.notNull(o)){return o.getFormulaCalcFields().getFieldByName(i)}return null},getUiSettingsKey:function(t){return t===e.QContextType.SELECTOR?"SelectorUiSettings":t===e.QContextType.VARIABLE?"VariableUiSettings":"UiSettings"},importCacheKey:function(t){let i=t.getStringByKey("System");let n=t.getStringByKey("Providers");let r=t.getStringByKey("Cube");let o=t.getStringByKey("FieldName");let l=t.getStringByKey("DimensionName");let a=t.getStringByKey("ValidationHash");let p=t.getStringByKey("DimensionGroupNames");return e.QFactory.createCacheKey(null,i,r,e.ProviderType.getAll().getByKey(n),o,l,a,p)},importFilterShiftableTimeRange:function(t,i){i.setLookBack(t.getIntegerByKey("LookBack"));let n=t.getStringByKey("OffsetFunction");if(e.XStringUtils.isNotNullAndNotEmpty(n)){i.setOffsetFunction(e.TimeOffsetFunction.lookup(n))}i.setOffsetLevelName(t.getStringByKey("OffsetLevelName"));i.setOffsetAmount(t.getIntegerByKey("OffsetAmount"));i.setPivotMemberLevelName(t.getStringByKey("PivotLevelName"));i.setFiscalGranularity(t.getIntegerByKeyExt("FiscalGranularity",-1));i.setOffsetFiscalGranularity(t.getIntegerByKeyExt("OffsetFiscalGranularity",-1))},importFilterTimeRange:function(t,i,n){n.setTimeDimensionName(i.getStringByKey("DimensionName"));n.setHierarchyName(i.getStringByKey("HierarchyName"));n.setLevelName(i.getStringByKey("LevelName"));n.setConvertToFlatFilter(i.getBooleanByKey("ConvertToFlatSelection"));let r=i.getBooleanByKeyExt("IsExcluding",false);if(r){n.setSetSign(e.SetSign.EXCLUDING)}else{n.setSetSign(e.SetSign.INCLUDING)}let o=i.getStructureByKey("Selection");if(e.notNull(o)){let e=n.getFallbackFilter();let i=t.importComponent(null,o,null,e,n);e.setComplexRoot(i)}},importFilterUiSettings:function(t,i,n){let r=n.getStructureByKey(e.QInARepoUtils.getUiSettingsKey(i));if(e.notNull(r)){let n=t.getUiSettings(i);n.setDisplayInfo(e.QInAConverter.lookupFilterDisplayInfo(r.getStringByKey("FilterDisplayInfo")));n.setReadMode(e.QInAConverter.lookupReadMode(r.getStringByKey("ReadMode")))}},importLayeredFilters:function(t,i,n,r){let o=e.XList.create();let l=n.size();for(let a=0;a<l;a++){let l=n.getStructureAt(a);let p=l.getStringByKey("Name");let s=e.QFilterExpression.create(i,i);t.importFilterExpression(s,l,i,i);let u=null;if(e.notNull(r)){if(r.getComponentType()===e.OlapComponentType.OLAP_FILTER_MANAGER){u=r}else if(r.getOlapEnv()!==null&&r.getOlapEnv().getFilterManager()!==null){u=r.getOlapEnv().getFilterManager()}}if(e.notNull(u)){let t=u.getFilterById(s.getUniqueId());if(e.notNull(t)){s=t}}i.linkFilter(p,s);o.add(s)}return o},importLinkPart:function(t,i){let n=i.getStringByKey("System");let r=i.getStringByKey("DataSource");let o=i.getStringByKey("FieldName");let l=i.getStringByKey("DimensionName");let a=i.getStringByKey("HierarchyName");let p=i.getStringByKey("HierarchyId");let s=i.getStringByKey("ValidationHash");let u=i.getStringByKey("QueryManagerKey");let g=i.getBooleanByKeyExt("IsIncludeHierarchyNodeChildren",false);let y=e.QFactory.createCacheKeyWithDataSource(t,n,r,null,o,l,s,null);let m=e.QFactory.createDimensionLinkPart(t,y,a,u);m.setHierId(p);m.setIncludeHierarchyNodeChildren(g);m.setPropagateOnDefaultHierarchyKey(i.getBooleanByKeyExt("PropagateOnDefaultHierarchyKey",false));m.setPropagateFlexibleTimeRangeFiltersDirect(i.getBooleanByKeyExt("PropagateFlexibleTimeRangeFiltersDirect",true));m.setPropagateDirectFlexibleTimeMemberFiltersUsingHierarchy(i.getBooleanByKeyExt("PropagateDirectFlexibleMemberFiltersHierarchy",false));return m},importSupplements:function(t,i,n,r,o){if(t.m_capabilities.supportsSupplements()&&e.notNull(r)&&e.XCollectionUtils.hasElements(o)){let l=n.getListByKey(r);if(e.notNull(l)){let n=l.size();let r=o.size();if(n===r){for(let e=0;e<n;e++){i.addSupplementValue(o.get(e).getName(),l.getStringAt(e))}}else{t.addWarning(e.ErrorCodes.INVALID_STATE,"InA protocol error: Supplement sizes of values and field names do not match.")}}}},importSupplementsAndValue:function(t,i,n,r,o,l){e.QInARepoUtils.importValue(t,i,n,r,o,l);let a=n.getListByKey("Supplements");if(e.notNull(a)&&a.hasElements()){let t=a.size();for(let n=0;n<t;n++){let t=a.getStructureAt(n);let r=t.getByKey("Key");let o=t.getByKey("Value");let l=e.QInARepoUtils.correctRemovingUnwantedBackslashAndQuotes(r.getString());let p=e.QInARepoUtils.correctRemovingUnwantedBackslashAndQuotes(o.getString());i.addSupplementValue(l,p)}}},importValue:function(t,i,n,r,o,l){e.QInARepoUtils._importValueInternal(t,i,n,r,o,l,false)},importValueByType:function(t,i,n,r){return e.QInARepoUtils._importValueInternal(t,null,i,n,r,null,true)},isValidFilterExpressionForRepository:function(t){return e.notNull(t)&&!t.isReleased()&&t.getFilterRootElement()!==null&&!t.getFilterRootElement().isReleased()},setDate:function(t,i,n,r){if(e.notNull(r)){i.putString(n,r.toIsoFormat())}},setDateIfNotNull:function(t,i,n,r){if(e.notNull(r)){i.putString(n,r.toIsoFormat())}},setIntegerIfNotNull:function(t,i,n){if(e.notNull(n)){t.putInteger(i,n.getInteger())}},setNameIfNotNull:function(t,i,n){if(e.notNull(n)){t.putString(i,n.getName())}}};e.InARepoMapper=function(){};e.InARepoMapper.prototype=new e.XObject;e.InARepoMapper.prototype._ff_c="InARepoMapper";e.InARepoMapper.create=function(){let t=new e.InARepoMapper;t.m_mappings=e.XList.create();t.m_structuresUsingMembersAsKey=e.XList.create();t.m_structuresUsingMembersAsKey.add("NumericPrecisionOverride");t.m_structuresUsingMembersAsKey.add("NumericScaleOverride");t.m_structuresUsingMembersAsKey.add("NumericShiftOverride");t.m_structuresUsingMembersAsKey.add("VisibilityOverride");return t};e.InARepoMapper.prototype.m_mappings=null;e.InARepoMapper.prototype.m_sourceModelId=null;e.InARepoMapper.prototype.m_structuresUsingMembersAsKey=null;e.InARepoMapper.prototype.addDimensionMapping=function(t,i){return this.addMappingInternal(e.ModelMappingType.DIMENSION,t,i,null,null)};e.InARepoMapper.prototype.addFieldMapping=function(t,i,n){return this.addMappingInternal(e.ModelMappingType.FIELD,t,i,n,null)};e.InARepoMapper.prototype.addHierarchyLevelMapping=function(t,i,n,r){return this.addMappingInternal(e.ModelMappingType.HIERARCHY_LEVEL,t,i,n,r)};e.InARepoMapper.prototype.addHierarchyMapping=function(t,i,n){return this.addMappingInternal(e.ModelMappingType.HIERARCHY,t,i,n,null)};e.InARepoMapper.prototype.addMapping=function(e,t,i){return this.addMappingInternal(e,t,i,null,null)};e.InARepoMapper.prototype.addMappingInternal=function(t,i,n,r,o){if(e.isNull(t)||e.XStringUtils.isNullOrEmpty(i)||e.XStringUtils.isNullOrEmpty(n)){return null}let l;if(t===e.ModelMappingType.DIMENSION){l=e.InARepoMappingDimension.createDimensionMapping(t,i,n)}else if(t===e.ModelMappingType.FIELD){l=e.InARepoMappingField.createFieldMapping(t,i,n,r)}else if(t===e.ModelMappingType.HIERARCHY){l=e.InARepoMappingHierarchy.createHierarchyMapping(t,i,n,r)}else if(t===e.ModelMappingType.HIERARCHY_LEVEL){l=e.InARepoMappingHierarchyLevel.createHierarchyLevelMapping(t,i,n,r,o)}else if(t===e.ModelMappingType.MEASURE){l=e.InARepoMappingMeasure.createMeasureMapping(t,i,n,r)}else{l=e.InARepoMappingElement.create(t,i,n)}this.m_mappings.add(l);return l};e.InARepoMapper.prototype.addMeasureMapping=function(t,i,n){return this.addMappingInternal(e.ModelMappingType.MEASURE,t,i,n,null)};e.InARepoMapper.prototype.map=function(t){let i=t;if(e.XStringUtils.isNotNullAndNotEmpty(t)&&e.XCollectionUtils.hasElements(this.m_mappings)){try{let n=e.JsonParserFactory.createFromSafeString(t);if(e.isNull(n)){return e.ExtResult.createWithErrorMessage("Json is not valid")}this.m_mappings.sortByDirection(e.XSortDirection.ASCENDING);this.mapModel(n,null,e.InARepoMapperContext.getContext(n,null,e.InARepoMapperContext.getUndefinedContext()));i=e.PrUtils.serialize(n,false,false,0)}catch(t){return e.ExtResult.createWithErrorMessage(e.XException.getMessage(t))}}return e.ExtResult.create(e.XStringValue.create(i),null)};e.InARepoMapper.prototype.mapModel=function(t,i,n){if(e.isNull(t)){return null}if(t.isString()){return this.mapString(t.asString().getString(),i,n)}if(t.isList()){let r=t.asList();for(let t=0;t<r.size();t++){let o=this.mapModel(r.get(t),i,n);if(e.notNull(o)){r.set(t,o)}}}else if(t.isStructure()){let r=t.asStructure();let o=e.InARepoMapperContext.getContext(r,i,n);let l=r.getKeysAsIterator();while(l.hasNext()){let t=l.next();let n=r.getByKey(t);if(e.notNull(n)&&n.isString()){o=e.InARepoMapperContext.getContext(n,t,o)}if(this.m_structuresUsingMembersAsKey.contains(i)){let l=this.mapString(t,i,o);if(e.notNull(l)){r.remove(t);r.put(l.getString(),n)}}else{let i=this.mapModel(n,t,o);if(e.notNull(i)){r.put(t,i)}}}}return null};e.InARepoMapper.prototype.mapString=function(t,i,n){let r=t;let o=null;if(e.notNull(r)){let l=e.XList.create();for(let a=0;a<this.m_mappings.size();a++){let p=this.m_mappings.get(a);if(!l.contains(p.getType())&&(e.isNull(this.m_sourceModelId)||n.getDatasetId()===null||e.XString.isEqual(this.m_sourceModelId,n.getDatasetId()))&&p.isApplicable(i,n)){let a=p.apply(i,r,n);if(e.notNull(a)&&!e.XString.isEqual(a,t)){o=e.PrFactory.createString(a);r=o.getString();l.add(p.getType())}}}}return o};e.InARepoMapper.prototype.releaseObject=function(){e.XObject.prototype.releaseObject.call(this);this.m_mappings=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_mappings);this.m_sourceModelId=null;this.m_structuresUsingMembersAsKey=e.XObjectExt.release(this.m_structuresUsingMembersAsKey)};e.InARepoMapper.prototype.setModelIds=function(t,i){this.m_sourceModelId=t;this.addMapping(e.ModelMappingType.DATASETID,t,i)};e.InARepoMapperContext=function(){};e.InARepoMapperContext.prototype=new e.XObject;e.InARepoMapperContext.prototype._ff_c="InARepoMapperContext";e.InARepoMapperContext.s_undefinedContext=null;e.InARepoMapperContext.create=function(t,i,n,r){let o=new e.InARepoMapperContext;o.m_contextType=t;o.m_contextValue=i;o.m_structure=n;o.m_datasetId=r;return o};e.InARepoMapperContext.getContext=function(t,i,n){if(e.notNull(t)){if(t.isStructure()){let i=t.asStructure();let r=e.InARepoMapperContextType.getByType(i.getStringByKey("CType"));let o=i.getStringByKey("DatasetId");if(e.isNull(o)){o=n.getDatasetId()}if(e.notNull(r)){if(r.getValueParam()===null){let t=e.notNull(n)&&r.isTypeOf(n.getType())?n.getValue():null;return e.InARepoMapperContext.create(r,t,i,o)}let t=i.getStringByKey(r.getValueParam());if(e.notNull(t)){return e.InARepoMapperContext.create(r,t,i,o)}}if(e.notNull(n)&&!e.XString.isEqual(o,n.getDatasetId())){return e.InARepoMapperContext.create(n.getType(),n.getValue(),i,o)}}else if(t.isString()&&(e.XString.isEqual(i,"MeasureMemberDatasetId")||e.XString.isEqual(i,"SecondaryDatasetId"))){return e.InARepoMapperContext.create(n.getType(),n.getValue(),n.getStructure(),t.asString().getString())}}return n};e.InARepoMapperContext.getUndefinedContext=function(){if(e.isNull(e.InARepoMapperContext.s_undefinedContext)){e.InARepoMapperContext.s_undefinedContext=e.InARepoMapperContext.create(e.InARepoMapperContextType.UNDEFINED,null,null,null)}return e.InARepoMapperContext.s_undefinedContext};e.InARepoMapperContext.prototype.m_contextType=null;e.InARepoMapperContext.prototype.m_contextValue=null;e.InARepoMapperContext.prototype.m_datasetId=null;e.InARepoMapperContext.prototype.m_structure=null;e.InARepoMapperContext.prototype.getDatasetId=function(){return this.m_datasetId};e.InARepoMapperContext.prototype.getStructure=function(){return this.m_structure};e.InARepoMapperContext.prototype.getType=function(){return this.m_contextType};e.InARepoMapperContext.prototype.getValue=function(){return this.m_contextValue};e.InARepoMapperContext.prototype.releaseObject=function(){e.XObject.prototype.releaseObject.call(this);this.m_contextType=null;this.m_contextValue=null;this.m_structure=null;this.m_datasetId=null};e.QInAComponentWithList=function(){};e.QInAComponentWithList.prototype=new e.QInAComponent;e.QInAComponentWithList.prototype._ff_c="QInAComponentWithList";e.QInAComponentWithList.prototype.exportComponent=function(t,i,n,r){let o=null;if(e.notNull(i)){o=this.exportComponentWithList(t,i,r);let l=this.getTagName();if(e.notNull(l)&&e.notNull(o)){let t=n;if(e.isNull(t)){t=e.PrFactory.createStructure()}t.put(l,o);return t}}return o};e.QInAComponentWithList.prototype.importComponent=function(t,i,n,r,o){let l=this.getTagName();let a=null;if(e.isNull(l)){a=i}else{if(e.notNull(i)){let e=i;a=e.getListByKey(l)}}return this.importComponentWithList(t,a,n,r,o)};e.QInAComponentWithStructure=function(){};e.QInAComponentWithStructure.prototype=new e.QInAComponent;e.QInAComponentWithStructure.prototype._ff_c="QInAComponentWithStructure";e.QInAComponentWithStructure.prototype.exportComponent=function(t,i,n,r){let o=null;if(e.notNull(i)){let l=this.getTagName();if(e.isNull(l)){o=n}if(e.isNull(o)){o=e.PrFactory.createStructure()}let a=this.exportKeyReference(t,i,o);if(!a){o=this.exportComponentWithStructure(t,i,o,r);if(e.notNull(o)){o=e.QInAExportUtil.extendStructure(t,i,o);o=this.extendCustom(t,i,o);e.QInAExportUtil.exportComponentExtensions(t,o,i)}if(e.notNull(l)){if(e.notNull(o)){let t=n;if(e.isNull(t)){t=e.PrFactory.createStructure()}t.put(l,o);o=t}}}}return o};e.QInAComponentWithStructure.prototype.exportKeyReference=function(e,t,i){return false};e.QInAComponentWithStructure.prototype.extendCustom=function(e,t,i){return i};e.QInAComponentWithStructure.prototype.getClientQueryObjectStorageName=function(t){let i=null;if(e.notNull(t)&&t.getQueryManager()!==null&&t.getQueryManager().getClientQueryObjectStorageName()!==null){i=t.getQueryManager().getClientQueryObjectStorageName()}return i};e.QInAComponentWithStructure.prototype.getSharedObjectFromKeyRef=function(t,i,n){let r;let o=n.getStringByKey("StorageName");let l=this.getClientQueryObjectStorageName(t);if(e.isNull(l)){l=this.getClientQueryObjectStorageName(i)}if(e.isNull(l)){l=o}r=e.QFactory.createKeyRef(l,n.getStringByKey("GroupName"),n.getStringByKey("ObjectName"));let a=null;if(e.XString.isEqual(o,e.KeyRefConstants.MAIN_STORAGE)&&t.getKeyRefStorage()!==null){a=t.getKeyRefStorage().get(o,n.getStringByKey("GroupName"),n.getStringByKey("ObjectName"))}else{a=i.getOlapEnv().getClientQueryObjectManager().getClientQueryObjectIncludeReleasedByKeyRef(r,null)}return a};e.QInAComponentWithStructure.prototype.importChangedProperties=function(t,i){if(e.notNull(i)&&e.notNull(t)){let n=i.getListByKey("ChangedProperties");let r=i.getStructureByKey("ChangedPropertiesInDetail");let o=i.getListByKey("ChangedPropertiesFromModellerMetadata");if(e.notNull(n)&&n.size()>0){let i=e.XHashSetOfString.create();for(let e=0;e<n.size();e++){i.add(n.getStringAt(e))}t.setChangedProperties(i)}if(e.notNull(r)&&r.hasElements()){let i=t.getChangedPropertiesInDetail();let n=r.getKeysAsReadOnlyList();for(let t=0;t<n.size();t++){let o=n.get(t);let l=e.XHashMapByString.create();i.put(o,l);let a=r.getStructureByKey(o);let p=a.getKeysAsReadOnlyList();for(let t=0;t<p.size();t++){let i=p.get(t);l.put(i,e.XStringValue.create(a.getStringByKey(i)))}}}if(e.notNull(o)&&o.size()>0){let e=t.getChangedPropertiesFromModellerMetadata();for(let t=0;t<o.size();t++){e.add(o.getStringAt(t))}}}};e.QInAComponentWithStructure.prototype.importComponent=function(t,i,n,r,o){let l=i;let a=this.getTagName();if(e.notNull(a)&&e.notNull(l)){let t=l.getByKey(a);l=e.notNull(t)&&t.isStructure()?t:null}let p=n;if(e.isNull(n)){let i=null;let n=null;if(e.notNull(o)){i=o.getOlapEnv();n=o.getApplication()}if(e.isNull(n)){n=t.getApplication()}if(e.notNull(l)){let t=l.getStructureByKey("KeyRef");if(e.notNull(t)&&e.notNull(o)){return this.getSharedObjectFromKeyRef(r,o,t)}}p=this.newModelComponent(n,i,r,o);if(e.notNull(p)&&!t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){p.stopEventing()}}let s=this.importComponentWithStructure(t,l,p,r,o);e.QInAImportUtil.importComponentTagging(t,l,s);e.QInAImportUtil.importComponentExtensions(t,l,s);if(e.notNull(s)&&t.getOriginalMode().isTypeOf(e.QModelFormat.INA_CLONE)){this.importChangedProperties(s,l)}if(e.isNull(n)&&e.notNull(p)&&!t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){p.resumeEventing()}return s};e.QInAComponentWithStructure.prototype.newModelComponent=function(e,t,i,n){return null};e.QInARepoFilterCartesianListLegacy=function(){};e.QInARepoFilterCartesianListLegacy.prototype=new e.QInAComponent;e.QInARepoFilterCartesianListLegacy.prototype._ff_c="QInARepoFilterCartesianListLegacy";e.QInARepoFilterCartesianListLegacy.prototype.exportComponent=e.noSupport;e.QInARepoFilterCartesianListLegacy.prototype.getComponentType=function(){return e.FilterComponentType.CARTESIAN_LIST};e.QInARepoFilterCartesianListLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterCartesianListLegacy.prototype.importComponent=function(t,i,n,r,o){let l=i;let a=n;let p=r;let s=o.getFieldAccessorSingle();let u=l.getStringByKey("FieldName");let g=a;if(e.notNull(u)){let i=s.getFieldByName(u);if(e.isNull(i)){let t=p.getQueryModel();if(e.notNull(t)){let n=t.getDimensionByNameFromExistingMetadata(u);if(e.notNull(n)){let t=l.getStructureByKey("Hierarchy");if(e.isNull(t)){i=n.getFlatKeyField()}else{i=n.getHierarchyKeyField()}}}}if(e.notNull(i)){let n=l.getStructureByKey("Hierarchy");let r=null;let a=null;let u=null;if(e.notNull(n)){r=n.getStringByKey("Name");if(t.getSession().hasFeature(e.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER)&&t.isAbap(i)){let t=n.getStringByKey("DueDate");if(e.notNull(t)){a=e.XDate.createDateFromSAPFormat(t)}u=n.getStringByKey("Version")}}if(e.isNull(g)){g=e.QFilterCartesianList._createMd(o,p,i.getMetadata(),r);g.setHierarchyInfo(r,a,u)}else{g.clear()}let y=l.getBooleanByKeyExt("ConvertToFlatSelection",false);g.setConvertToFlatFilter(y);let m=l.getListByKey("SupplementsFieldNames");if(e.notNull(m)){let e=m.size();for(let t=0;t<e;t++){let e=m.getStringAt(t);let i=s.getFieldByName(e);g.addSupplementField(i)}}let c=l.getListByKey("Elements");if(e.notNull(c)){let e=c.size();for(let i=0;i<e;i++){let e=c.getStructureAt(i);let n=t.importFilterOperation(e,g,o);g.add(n)}}}}return g};e.InARepoMappingElement=function(){};e.InARepoMappingElement.prototype=new e.XObject;e.InARepoMappingElement.prototype._ff_c="InARepoMappingElement";e.InARepoMappingElement.create=function(t,i,n){let r=new e.InARepoMappingElement;r.setupElement(t,i,n,null);return r};e.InARepoMappingElement.prototype.m_context=null;e.InARepoMappingElement.prototype.m_dimensionRef=null;e.InARepoMappingElement.prototype.m_ignoredKeys=null;e.InARepoMappingElement.prototype.m_sourceValue=null;e.InARepoMappingElement.prototype.m_targetValue=null;e.InARepoMappingElement.prototype.m_type=null;e.InARepoMappingElement.prototype.addIgnoredKey=function(e){this.m_ignoredKeys.add(e)};e.InARepoMappingElement.prototype.apply=function(t,i,n){return e.XString.isEqual(i,this.m_sourceValue)?this.m_targetValue:null};e.InARepoMappingElement.prototype.compareTo=function(e){return this.m_type.getLevel()-e.getType().getLevel()};e.InARepoMappingElement.prototype.getContext=function(){return this.m_context};e.InARepoMappingElement.prototype.getSourceValue=function(){return this.m_sourceValue};e.InARepoMappingElement.prototype.getTargetValue=function(){return this.m_targetValue};e.InARepoMappingElement.prototype.getType=function(){return this.m_type};e.InARepoMappingElement.prototype.isApplicable=function(t,i){return!this.isIgnored(t)&&!this.isDimensionRef(t)&&!i.getType().isTypeOf(e.InARepoMapperContextType.RESULT_STRUCTURE)};e.InARepoMappingElement.prototype.isDimensionRef=function(e){return this.m_dimensionRef.contains(e)};e.InARepoMappingElement.prototype.isIgnored=function(e){return this.m_ignoredKeys.contains(e)};e.InARepoMappingElement.prototype.releaseObject=function(){e.XObject.prototype.releaseObject.call(this);this.m_type=null;this.m_sourceValue=null;this.m_targetValue=null;this.m_context=null;this.m_ignoredKeys=e.XObjectExt.release(this.m_ignoredKeys);this.m_dimensionRef=e.XObjectExt.release(this.m_dimensionRef)};e.InARepoMappingElement.prototype.setupElement=function(t,i,n,r){this.m_type=t;this.m_sourceValue=i;this.m_targetValue=n;this.m_context=r;this.m_ignoredKeys=e.XList.create();this.addIgnoredKey("CType");this.m_dimensionRef=e.XList.create();this.m_dimensionRef.add("OrderedDimensionNames");this.m_dimensionRef.add("AggregationDimension");this.m_dimensionRef.add("AggregationDimensions");this.m_dimensionRef.add("PostAggregationDimensions");this.m_dimensionRef.add("ExceptionAggregationDimensions");this.m_dimensionRef.add("DimensionName")};e.InARepoStructureMemberLazyLoader=function(){};e.InARepoStructureMemberLazyLoader.prototype=new e.XObjectExt;e.InARepoStructureMemberLazyLoader.prototype._ff_c="InARepoStructureMemberLazyLoader";e.InARepoStructureMemberLazyLoader.create=function(t,i,n){if(e.isNull(i)){throw e.XException.createIllegalArgumentException("InARepoStrucutreMemberLazyLoader - QModelFormat mode is null")}if(!i.isTypeOf(e.QModelFormat.INA_REPOSITORY)){throw e.XException.createIllegalArgumentException(e.XStringUtils.concatenate2("InARepoStrucutreMemberLazyLoader - Does not support QModelFormat:",i.getName()))}let r=new e.InARepoStructureMemberLazyLoader;r.m_dimension=t;r.m_importer=e.QInAImportFactory.createWithQueryManagerCapabilities(t.getApplication(),i,t.getQueryManager());r.m_modelFormat=i;r.m_inaStructure=n.cloneExt(null);r.m_repoMetadataMap=e.XHashMapByString.create();r.m_memberNameList=e.XList.create();let o=r.m_inaStructure.getListByKey("MembersRepo");if(e.notNull(o)){for(let e=0;e<o.size();e++){let t=o.get(e).asStructure();r.m_repoMetadataMap.put(t.getStringByKey("Name"),t);r.m_memberNameList.add(t.getStringByKey("Name"))}}return r};e.InARepoStructureMemberLazyLoader.prototype.m_dimension=null;e.InARepoStructureMemberLazyLoader.prototype.m_importer=null;e.InARepoStructureMemberLazyLoader.prototype.m_inaStructure=null;e.InARepoStructureMemberLazyLoader.prototype.m_memberNameList=null;e.InARepoStructureMemberLazyLoader.prototype.m_modelFormat=null;e.InARepoStructureMemberLazyLoader.prototype.m_repoMetadataMap=null;e.InARepoStructureMemberLazyLoader.prototype.copyStructureMemberLazyLoader=function(t){return e.InARepoStructureMemberLazyLoader.create(t,this.m_modelFormat,this.m_inaStructure)};e.InARepoStructureMemberLazyLoader.prototype.getInaMembersStructureCopy=function(){let t=e.PrFactory.createStructure();let i=this.m_inaStructure.getKeysAsIterator();while(i.hasNext()){let e=i.next();t.put(e,this.m_inaStructure.getByKey(e))}return t};e.InARepoStructureMemberLazyLoader.prototype.hasUnloadedStructureMembers=function(){return this.m_repoMetadataMap.size()>0};e.InARepoStructureMemberLazyLoader.prototype.loadAllStructureMembers=function(){let t=this.m_inaStructure.getListByKey("MembersRepo");if(e.notNull(t)&&t.size()>0){let e=this.getInaMembersStructureCopy();let i=e.putNewList("MembersRepo");i.addAll(t);this.m_repoMetadataMap.clear();this.m_memberNameList.clear();t.clear();this.loadStructureMemberStructure(e)}};e.InARepoStructureMemberLazyLoader.prototype.loadStructureMember=function(e){if(this.m_repoMetadataMap.getByKey(e)!==null){let t=this.m_memberNameList.getIndex(e);if(t>=0){let i=this.getInaMembersStructureCopy();let n=i.putNewList("MembersRepo");n.add(this.m_repoMetadataMap.getByKey(e));this.m_repoMetadataMap.remove(e);let r=this.m_inaStructure.getListByKey("MembersRepo");r.removeAt(t);this.m_memberNameList.removeAt(t);this.loadStructureMemberStructure(i)}}};e.InARepoStructureMemberLazyLoader.prototype.loadStructureMemberStructure=function(t){this.m_dimension.getQueryManager().stopEventing();let i=this.m_dimension.getQueryModel().isBasicMeasureAggregationExportedInRepo();if(!i){this.m_dimension.getQueryModel().setBasicMeasureAggregationExportForRepo(true)}let n=this.m_dimension.getQueryModel().isBasicMeasureSettingsExportedInRepo();if(!n){this.m_dimension.getQueryModel().setBasicMeasureSettingsExportedInRepo(true)}this.m_importer.importComponent(e.OlapComponentType.MEMBERS,t,this.m_dimension,null,this.m_dimension.getContext());if(!i){this.m_dimension.getQueryModel().setBasicMeasureAggregationExportForRepo(false)}if(!n){this.m_dimension.getQueryModel().setBasicMeasureSettingsExportedInRepo(false)}this.m_dimension.getQueryManager().resumeEventing()};e.InARepoStructureMemberLazyLoader.prototype.loadStructureMembers=function(t){if(t.size()>0){let i=false;let n=this.getInaMembersStructureCopy();let r=n.putNewList("MembersRepo");for(let n=0;n<t.size();n++){let o=t.get(n);let l=this.m_repoMetadataMap.getByKey(o);if(e.notNull(l)){let e=this.m_memberNameList.getIndex(o);if(e>=0){r.add(l);this.m_repoMetadataMap.remove(o);let t=this.m_inaStructure.getListByKey("MembersRepo");t.removeAt(e);this.m_memberNameList.removeAt(e);i=true}}}if(i){this.loadStructureMemberStructure(n)}}};e.QInARepoVariableManager=function(){};e.QInARepoVariableManager.prototype=new e.QInAComponentWithList;e.QInARepoVariableManager.prototype._ff_c="QInARepoVariableManager";e.QInARepoVariableManager.prototype.addUsedFunctionalVariables=function(t,i){if(e.notNull(t)){if(t.getOlapComponentType().isTypeOf(e.FilterComponentType.OPERATION)){let e=t;if(e.getLow().isFunctionalVariableValue()){i.add(e.getLow().getVariableValue().getName())}if(e.getComparisonOperator()!==null&&e.getComparisonOperator().getNumberOfParameters()>1&&e.getHigh().isFunctionalVariableValue()){i.add(e.getHigh().getVariableValue().getName())}}else{let n=t.getChildren();while(n.hasNext()){this.addUsedFunctionalVariables(n.next(),i)}e.XObjectExt.release(n)}}};e.QInARepoVariableManager.prototype.exportComponentWithList=function(t,i,n){let r;let o=i;let l=o.getQueryModel();if(e.notNull(l)&&!l.isExportingVariables()&&!l.hasProcessingStep()){r=null}else{r=null;let i=o.getVariables();if(e.XCollectionUtils.hasElements(i)){let n=this.getFunctionalVariablesUsedInQuery(l);let o=e.PrFactory.createList();let a=i.size();for(let r=0;r<a;r++){let l=i.get(r);let a=l.getModCounter()>0||l.isRRIAffectedComponent();let p=t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||a;if(p&&l.getVariableType()!==e.VariableType.FUNCTIONAL_VARIABLE||n.contains(l.getName())){let i=t.exportVariable(l,null);e.XCollectionUtils.addIfNotNull(o,i)}}r=o}}return r};e.QInARepoVariableManager.prototype.getComponentType=function(){return e.OlapComponentType.VARIABLE_MANAGER};e.QInARepoVariableManager.prototype.getFunctionalVariablesUsedInQuery=function(t){let i=e.XHashSetOfString.create();if(e.notNull(t)&&t.getModelCapabilities().supportsFunctionalVariables()){let n=t.getFilter();this.addUsedFunctionalVariables(n.isDynamicFilterInitialized()?n.getDynamicFilter().getFilterRootElement():null,i);this.addUsedFunctionalVariables(n.isVisibilityFilterInitialized()?n.getVisibilityFilter().getFilterRootElement():null,i);e.XStream.of(t.getVariables()).filter(t=>t.getVariableType().isTypeOf(e.VariableType.DIMENSION_MEMBER_VARIABLE)).forEach(e=>{this.addUsedFunctionalVariables(e.getMemberFilter(),i)})}return i};e.QInARepoVariableManager.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoVariableManager.prototype.getTagName=function(){return"Variables"};e.QInARepoVariableManager.prototype.importComponentWithList=function(t,i,n,r,o){let l=n;if(e.notNull(i)){let n=i.size();for(let r=0;r<n;r++){let n=i.getStructureAt(r);let a=n.getStringByKey("Name");let p=l.getVariableBaseByName(a);if(e.notNull(p)){let i=p.getVariableType();if(i.isTypeOf(e.VariableType.SIMPLE_TYPE_VARIABLE)){t.importSimpleTypeVariable(n,p,o)}else if(i.isTypeOf(e.VariableType.DIMENSION_MEMBER_VARIABLE)){t.importDimensionMemberVariable(n,p,o)}else if(i.isTypeOf(e.VariableType.OPTION_LIST_VARIABLE)){t.importOptionListVariable(n,p,o)}else if(i.isTypeOf(e.VariableType.FUNCTIONAL_VARIABLE)){t.importFunctionalVariable(n,p,o)}else{t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate5("The variable '",a,"' of variable type '",i.getName(),"' was not imported correctly"))}}else{t.addWarning(e.ErrorCodes.ET_ELEMENT_NOT_FOUND,e.XStringUtils.concatenate3("The variable '",a,"' was not found"))}}}return l};e.QInARepository=function(){};e.QInARepository.prototype=new e.QInAComponentWithStructure;e.QInARepository.prototype._ff_c="QInARepository";e.QInARepository.prototype.exportComponentWithStructure=function(e,t,i,n){return i};e.QInARepository.prototype.exportKeyReference=function(t,i,n){let r=false;let o=i;let l=o.getContext();let a=null;let p=null;if(e.notNull(l)){a=l.getQueryManager();p=l.getOlapEnv()}if(e.isNull(a)||a.isKeyRefSerializationEnabled()){if(e.notNull(p)&&p.getClientQueryObjectManager().getClientQueryObjectIncludeReleasedByKeyRef(i,null)!==null){e.QInARepoUtils.addKeyRefStructure(t,i,n,a);r=true}else if(e.isNull(p)&&i.getStorageName()!==null&&!e.XString.isEqual(i.getStorageName(),e.KeyRefConstants.MAIN_STORAGE)||i.isReleased()){e.QInARepoUtils.addKeyRefStructure(t,i,n,a);r=true}}return r};e.QInARepository.prototype.extendCustom=function(t,i,n){let r=this.getComponentType();let o=e.QInAConverter.lookupComponentTypeInA(r);if(e.isNull(o)){throw e.XException.createRuntimeException("ctype not found")}if(n.hasElements()){n.putString("CType",o);if(t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY_DELTA)&&i.canMaterializeCompleteObject()){n.putBoolean("UserDefinedComponent",true)}if(t.getOriginalMode()===e.QModelFormat.INA_CLONE){let t=i.getChangedProperties();let r=i.getChangedPropertiesInDetail();let o=i.getChangedPropertiesFromModellerMetadata();if(e.XCollectionUtils.hasElements(t)){let i=e.PrFactory.createList();let r=t.getValuesAsReadOnlyList();i.addAllStrings(r);n.put("ChangedProperties",i)}if(e.XCollectionUtils.hasElements(r)){let t=e.PrFactory.createStructure();let i=r.getKeysAsReadOnlyList();for(let n=0;n<i.size();n++){let o=i.get(n);let l=t.putNewStructure(o);let a=r.getByKey(o);if(e.notNull(a)){let t=a.getKeysAsReadOnlyList();for(let i=0;i<t.size();i++){let n=t.get(i);let r=a.getByKey(n);l.putString(n,e.isNull(r)?null:r.toString())}}}n.put("ChangedPropertiesInDetail",t)}if(e.XCollectionUtils.hasElements(o)){let t=e.PrFactory.createList();t.addAllStrings(o.getValuesAsReadOnlyList());n.put("ChangedPropertiesFromModellerMetadata",t)}if(i.canMaterializeCompleteObject()){n.putBoolean("UserDefinedComponent",true)}}}return n};e.QInARepository.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepository.prototype.getNamesOfElementsInList=function(t){let i=t.size();let n=e.XList.create();for(let e=0;e<i;e++){let i=t.getStructureAt(e);n.add(i.getStringByKey("Name"))}return n};e.QInARepository.prototype.isMatching=function(t){let i=e.QInAComponentWithStructure.prototype.isMatching.call(this,t);if(i&&e.notNull(t)){let n=t;let r=this.getTagName();if(e.isNull(r)){if(n.getStringByKey("CType")===null){i=false}}else{i=n.containsKey(r)}}return i};e.QInARepository.prototype.newComponentCreationAllowed=function(t,i){return t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||t.getMode()===e.QModelFormat.INA_REPOSITORY_DELTA&&i.getBooleanByKeyExt("UserDefinedComponent",false)&&!i.getBooleanByKeyExt("isModelDefinedMember",false)};e.QInARepository.prototype.removeModelElementsNotInInA=function(t,i,n,r){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA){let e=this.getNamesOfElementsInList(i);for(let t=r.size()-1;t>=0;t--){let i=r.get(t);if(!e.contains(i.getName())){n.removeElement(i)}}}};e.QInARepoAttributeLegacy=function(){};e.QInARepoAttributeLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoAttributeLegacy.prototype._ff_c="QInARepoAttributeLegacy";e.QInARepoAttributeLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoAttributeLegacy.prototype.getComponentType=function(){return e.OlapComponentType.ATTRIBUTE};e.QInARepoAttributeLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoAttributeLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=r;let a=i.getStringByKey("Name");let p=l.getAttributeByName(a);if(e.notNull(p)){let t=i.getListByKey("ResultSetFields");if(e.notNull(t)){let i=p.getResultSetFields();i.clear();let n=t.size();for(let r=0;r<n;r++){let n=p.getFieldByName(t.getStringAt(r));if(e.notNull(n)){i.add(n)}}}}return p};e.QInARepoAxesSettingsLegacy=function(){};e.QInARepoAxesSettingsLegacy.prototype=new e.QInAComponentWithList;e.QInARepoAxesSettingsLegacy.prototype._ff_c="QInARepoAxesSettingsLegacy";e.QInARepoAxesSettingsLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoAxesSettingsLegacy.prototype.getComponentType=function(){return e.OlapComponentType.AXES_SETTINGS};e.QInARepoAxesSettingsLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoAxesSettingsLegacy.prototype.getTagName=function(){return"Axes"};e.QInARepoAxesSettingsLegacy.prototype.importComponentWithList=function(t,i,n,r,o){if(e.notNull(i)){let n=o.getQueryModel();if(t.m_capabilities.supportsZeroSuppression()||t.m_capabilities.supportsNullZeroSuppression()){let t=e.AxisType.getAll();let i=t.size();for(let r=0;r<i;r++){let i=n.getAxisBase(t.get(r));if(e.notNull(i)){i.setSupportsZeroSuppression(true)}}}let r=i.size();for(let e=0;e<r;e++){t.importAxis(i.getStructureAt(e),null,o)}}return null};e.QInARepoAxisLegacy=function(){};e.QInARepoAxisLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoAxisLegacy.prototype._ff_c="QInARepoAxisLegacy";e.QInARepoAxisLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoAxisLegacy.prototype.getComponentType=function(){return e.OlapComponentType.AXIS};e.QInARepoAxisLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoAxisLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=t.m_capabilities.supportsZeroSuppression();let a;let p=i.getStringByKey("Axis");if(e.isNull(p)){a=e.QInAConverter.lookupAxisTypeInt(i.getIntegerByKey("Type"))}else{a=e.QInAConverter.lookupAxisType(p)}let s=o.getQueryModel();let u=s.getAxisBase(a);if(e.notNull(u)){if(l){let t=i.getIntegerByKey("ZeroSuppressionType");let n=e.QInAConverter.lookupSuppressionType(t);u.setZeroSuppressionType(n);u.setDefaultZeroSuppression(n)}t.importTotals(i,u.getResultStructureControllerBase(),o)}return u};e.QInARepoConditionManagerLegacy=function(){};e.QInARepoConditionManagerLegacy.prototype=new e.QInAComponentWithList;e.QInARepoConditionManagerLegacy.prototype._ff_c="QInARepoConditionManagerLegacy";e.QInARepoConditionManagerLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoConditionManagerLegacy.prototype.getComponentType=function(){return e.OlapComponentType.CONDITIONS_MANAGER};e.QInARepoConditionManagerLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoConditionManagerLegacy.prototype.getTagName=function(){return"Conditions"};e.QInARepoConditionManagerLegacy.prototype.importComponentWithList=function(t,i,n,r,o){let l=n;if(e.notNull(l)){l.clear();if(e.notNull(i)){let e=o.getQueryModel();let n=i.size();for(let r=0;r<n;r++){let n=i.getStructureAt(r);let o=t.importCondition(e,n,null);l.add(o)}}}return l};e.QInARepoConditionsConditionLegacy=function(){};e.QInARepoConditionsConditionLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoConditionsConditionLegacy.prototype._ff_c="QInARepoConditionsConditionLegacy";e.QInARepoConditionsConditionLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoConditionsConditionLegacy.prototype.getComponentType=function(){return e.OlapComponentType.CONDITION};e.QInARepoConditionsConditionLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoConditionsConditionLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){if(e.isNull(i)){return n}let l;let a=i.getStringByKey("Name");if(e.isNull(n)){if(t.getMode()===e.QModelFormat.INA_REPOSITORY){let t=i.getBooleanByKeyExt("IsBackendCondition",true);l=e.QCondition.create(o,r,a,t)}else{l=e.QCondition.create(o,r,a,true)}}else{l=n;l.setConditionName(a)}l.setActive(i.getBooleanByKey("Active"));l.setUsedState(i.getStringByKey("IsUsed"));l.setDescription(i.getStringByKey("Description"));let p=i.getStringByKey("OnDisabled");l.setApplyConditionAfterVisibilityFilter(i.getBooleanByKeyExt("AfterVisibilityFilter",false));if(e.notNull(p)){if(e.XString.isEqual(p,"Error")){l.setOnDisabledToWarning(false)}}let s=i.getStringByKey("EvaluateOnDimensions");let u=e.ConditionDimensionEvaluationType.lookupName(s);if(e.notNull(u)){l.setDimensionEvaluationType(u)}let g=o.getQueryModel();let y=i.getListByKey("EvaluateOnDimensionsList");let m;let c;if(!e.PrUtils.isListEmpty(y)&&e.notNull(g)){m=y.size();for(c=0;c<m;c++){let t=y.getStringAt(c);if(e.notNull(t)){let i=g.getDimensionByNameFromExistingMetadata(t);if(e.notNull(i)){l.addEvaluationDimension(i)}}}}let A=i.getListByKey("Threshold");if(!e.PrUtils.isListEmpty(A)){let i=A.size();for(let n=0;n<i;n++){let i=A.getStructureAt(n);if(e.notNull(i)){l.addThreshold(t.importConditionThreshold(g,i,null,l))}}}l.setBreakGroup(i.getBooleanByKeyExt("BreakGroup",false));let S=i.getListByKey("BreakGroupList");if(!e.PrUtils.isListEmpty(S)&&e.notNull(g)){m=S.size();for(c=0;c<m;c++){let t=S.getStringAt(c);if(e.notNull(t)){let i=g.getDimensionByNameFromExistingMetadata(t);if(e.notNull(i)){l.addBreakGroupDimension(i)}}}}return l};e.QInARepoCurrencyTranslationManagerLegacy=function(){};e.QInARepoCurrencyTranslationManagerLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoCurrencyTranslationManagerLegacy.prototype._ff_c="QInARepoCurrencyTranslationManagerLegacy";e.QInARepoCurrencyTranslationManagerLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoCurrencyTranslationManagerLegacy.prototype.getComponentType=function(){return e.OlapComponentType.CURRENCY_TRANSLATION_MANAGER};e.QInARepoCurrencyTranslationManagerLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoCurrencyTranslationManagerLegacy.prototype.getTagName=function(){return"CurrencyTranslation"};e.QInARepoCurrencyTranslationManagerLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(e.notNull(l)&&e.notNull(i)){let t=l.getCurrencyTranslationDetails();if(e.notNull(t)){t.setCurrencyTranslationName(i.getStringByKey("Name"));t.setCurrencyTranslationOperation(e.CurrencyTranslationOperation.lookup(i.getStringByKey("Operation")));t.setCurrencyTranslationTarget(i.getStringByKey("Target"))}}return l};e.QInARepoCustomHierarchyDefinitionLegacy=function(){};e.QInARepoCustomHierarchyDefinitionLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoCustomHierarchyDefinitionLegacy.prototype._ff_c="QInARepoCustomHierarchyDefinitionLegacy";e.QInARepoCustomHierarchyDefinitionLegacy.prototype.addHierarchyNodesFromStructure=function(t,i){let n=e.PrUtils.getListProperty(i,"NodeId");let r=e.PrUtils.getListProperty(i,"ParentId");let o=e.PrUtils.getListProperty(i,"NodeName");let l=e.PrUtils.getListProperty(i,"NodeType");let a=e.PrUtils.getListSize(n,0);if(e.PrUtils.isListEmpty(n)||e.PrUtils.isListEmpty(r)||e.PrUtils.isListEmpty(o)||e.PrUtils.isListEmpty(l)||r.size()!==a||o.size()!==a||l.size()!==a){return}let p=e.XSimpleMap.create();for(let i=0;i<a;i++){let a=n.getIntegerAt(i);let s=o.getStringAt(i);let u=l.getStringAt(i);let g=r.getIntegerAt(i);let y=g===-1?t:p.getByKey(e.XIntegerValue.create(g));if(e.notNull(y)){if(e.XString.isEqual(u,"1HIER_NODE_SIMPLE")){p.put(e.XIntegerValue.create(a),y.addTextNode(s))}else{y.addMemberNode(s)}}}e.XObjectExt.release(p)};e.QInARepoCustomHierarchyDefinitionLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoCustomHierarchyDefinitionLegacy.prototype.getComponentType=function(){return e.OlapComponentType.CUSTOM_HIERARCHY_DEFINITION};e.QInARepoCustomHierarchyDefinitionLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoCustomHierarchyDefinitionLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){if(!t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){return null}let l=e.PrUtils.getListProperty(i,"Dimensions");let a=e.PrUtils.getStructureElement(l,0);if(e.notNull(a)){let i=a.getStringByKey("System");let n=a.getStringByKey("DataSource");let r=a.getStringByKey("Name");let o=a.getStructureByKey("Hierarchy");if(e.notNull(o)&&e.XStringUtils.isNotNullAndNotEmpty(i)&&e.XStringUtils.isNotNullAndNotEmpty(r)){let l=true;let a=t.getApplication();if(e.notNull(a)){let t=a.getSystemLandscape().getSystemDescription(i);l=e.isNull(t)?true:t.getSystemType().isTypeOf(e.SystemType.ABAP)}let p=e.QCustomHierarchyDefinition.createByData(i,n,r,o.getStringByKey("Description"),l);p.setName(o.getStringByKey("Name"));this.addHierarchyNodesFromStructure(p,o.getStructureByKey("Nodes"));return p}}return null};e.QInARepoDataCellsAllLegacy=function(){};e.QInARepoDataCellsAllLegacy.prototype=new e.QInAComponentWithList;e.QInARepoDataCellsAllLegacy.prototype._ff_c="QInARepoDataCellsAllLegacy";e.QInARepoDataCellsAllLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoDataCellsAllLegacy.prototype.getComponentType=function(){return e.OlapComponentType.DATA_CELLS};e.QInARepoDataCellsAllLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoDataCellsAllLegacy.prototype.getTagName=function(){return"QueryDataCells"};e.QInARepoDataCellsAllLegacy.prototype.importComponentWithList=function(t,i,n,r,o){let l=o.getModelCapabilities();let a=o.getQueryModel();if(l.supportsDataCells()&&t.m_mode!==e.QModelFormat.INA_DATA_REINIT&&a.getQueryManager().getInitSettings().isRequestingDataCells()){let n=a.getQueryDataCellsBase();n.clear();if(e.notNull(i)){for(let e=0;e<i.size();e++){t.importDataCell(i.getStructureAt(e),a)}}}return null};e.QInARepoDimensionsAllLegacy=function(){};e.QInARepoDimensionsAllLegacy.prototype=new e.QInAComponentWithList;e.QInARepoDimensionsAllLegacy.prototype._ff_c="QInARepoDimensionsAllLegacy";e.QInARepoDimensionsAllLegacy.exportAxisDimensions=function(t,i,n,r){let o=i.getDimensionCount();for(let l=0;l<o;l++){let o=i.get(l);e.QInARepoDimensionsAllLegacy.exportDimension(t,o,n,r)}};e.QInARepoDimensionsAllLegacy.exportAxisDimensionsWithHeuristic=function(t,i,n,r,o){let l=i.getQueryModel();let a=t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY_DATA);let p=l.isOptimizedExportModeActive();let s=i.getDimensionCount();for(let l=0;l<s;l++){let s=i.get(l);if(p&&s.isIgnoredOnOptimizedExport()){continue}if(a&&!r.contains(s.getName())){continue}e.QInARepoDimensionsAllLegacy.exportDimension(t,s,n,o)}};e.QInARepoDimensionsAllLegacy.exportDimension=function(e,t,i,n){if(!n.contains(t.getName())){n.add(t.getName());i.add(e.exportDimension(t,null))}};e.QInARepoDimensionsAllLegacy.exportTechnicalDimension=function(t,i,n,r){if(!t.m_capabilities.supportsUniversalModel()){return}let o=i.getQueryCellManager();if(o.isEmpty()){return}let l=i.getDimensionByName("$$Cells$$");e.QInARepoDimensionsAllLegacy.exportDimension(t,l,n,r)};e.QInARepoDimensionsAllLegacy.prototype.exportComponentWithList=function(t,i,n){let r=e.PrFactory.createList();if(t.m_mode!==e.QModelFormat.INA_VALUE_HELP){let n=i;let o=n.getModelCapabilities();let l=e.XHashSetOfString.create();e.QInARepoDimensionsAllLegacy.exportAxisDimensions(t,n.getAxis(e.AxisType.ROWS),r,l);e.QInARepoDimensionsAllLegacy.exportAxisDimensions(t,n.getAxis(e.AxisType.COLUMNS),r,l);if(t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){let i=e.XHashSetOfString.create();if(t.m_mode===e.QModelFormat.INA_REPOSITORY_DATA||t.m_mode===e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){e.DimensionUsageAnalyzer2.setupHeuristic(n,i)}e.QInARepoDimensionsAllLegacy.exportAxisDimensionsWithHeuristic(t,n.getAxis(e.AxisType.FREE),r,i,l)}else if(t.m_mode.isTypeOf(e.QModelFormat.INA_DATA)){let i=o.supportsCubeBlendingOutOfContext()&&n.isBlendingModel();let a=n.getDataSource().getType()===e.MetaObjectType.PLANNING&&t.getSession().hasFeature(e.FeatureToggleOlap.EXPORT_FREE_AXIS_FOR_PLANNING);let p=n.getAxis(e.AxisType.FREE);let s=p.size();let u=t.isAbap(n);for(let n=0;n<s;n++){let o=p.get(n);let s=o.getDimensionType();if(s===e.DimensionType.MEASURE_STRUCTURE||s===e.DimensionType.SECONDARY_STRUCTURE){let i=this.exportDimensionIfOnFreeAxis(o);if(i){e.QInARepoDimensionsAllLegacy.exportDimension(t,o,r,l)}}else if(s===e.DimensionType.ACCOUNT){let i=this.exportDimensionIfOnFreeAxis(o);if(i){e.QInARepoDimensionsAllLegacy.exportDimension(t,o,r,l)}}else if(s.isTypeOf(e.DimensionType.CALCULATED_DIMENSION)||i||(u||a)&&o.isHierarchyActive()){e.QInARepoDimensionsAllLegacy.exportDimension(t,o,r,l)}}e.QInARepoDimensionsAllLegacy.exportTechnicalDimension(t,n,r,l)}}return r};e.QInARepoDimensionsAllLegacy.prototype.exportDimensionIfOnFreeAxis=function(t){let i=t.getQueryModel();let n=e.XHashSetOfString.create();let r=i.getFilter();if(r.isDynamicFilterInitialized()){e.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(r.getDynamicFilter(),n);e.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(r.getLinkedFilter(e.CalculatedDimensionPrequeryBuilder.FAM_MEASURE_FILTER),n);e.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(r.getLinkedFilter(e.CalculatedDimensionPrequeryBuilder.FAM_SECONDARY_MEASURE_FILTER),n)}let o=n.contains(t.getName());if(t.isMeasureStructure()){let t=i.getExceptionManager();let n=e.XCollectionUtils.hasElements(t);return o||n}return o};e.QInARepoDimensionsAllLegacy.prototype.getComponentType=function(){return e.OlapComponentType.DIMENSIONS};e.QInARepoDimensionsAllLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoDimensionsAllLegacy.prototype.getTagName=function(){return"Dimensions"};e.QInARepoDimensionsAllLegacy.prototype.importComponentWithList=function(t,i,n,r,o){if(e.notNull(i)){let r=n;let o=r.getDimensionManagerBase();if(t.m_mode!==e.QModelFormat.INA_DATA_REINIT){let e=r.getFreeAxis();e.addAll(o)}let l=i.size();let a=o.getDimensionReferences();for(let n=0;n<l;n++){let l=i.getStructureAt(n);let p=l.getStringByKey("Name");let s=l.getStringByKey("Axis");let u=null;if(l.containsKey("FieldMappings")){let e=t.importCalculatedDimension(l,r);o.addDimension(e);o.finalizeDimensionMetadataSetup(e)}else if(l.containsKey("CType")&&e.XComponentType.lookupComponentType(l.getStringByKey("CType"))===e.DimensionType.FORMULA_CALCULATED_DIMENSION){let e=t.importFormulaCalculatedDimension(l,r,null);o.addDimension(e);o.finalizeDimensionMetadataSetup(e)}else{if(a.containsKey(p)){let i=e.AxisType.lookup(s);if(t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)||i===e.AxisType.COLUMNS||i===e.AxisType.ROWS){u=o.getDimensionByNameFromExistingMetadata(p)}}t.importDimension(l,r)}if(t.m_mode!==e.QModelFormat.INA_DATA_REINIT){if(e.isNull(u)){u=o.getDimensionByNameInternal(p);if(e.isNull(u)){continue}}if(e.isNull(s)){s=l.getStringByKeyExt("AxisDefault","Free")}r.getAxis(e.QInAConverter.lookupAxisType(s)).add(u)}}}return n};e.QInARepoDimensionsLegacy=function(){};e.QInARepoDimensionsLegacy.prototype=new e.QInAComponentWithList;e.QInARepoDimensionsLegacy.prototype._ff_c="QInARepoDimensionsLegacy";e.QInARepoDimensionsLegacy._isForRendering=function(t,i){let n=i.getAxisType();return t===e.QModelFormat.INA_REPOSITORY_DATA_RENDERING&&n!==e.AxisType.ROWS&&n!==e.AxisType.COLUMNS};e.QInARepoDimensionsLegacy.exportAxisDimensions=function(t,i,n,r){let o=i.getDimensionCount();for(let l=0;l<o;l++){let o=i.get(l);if(e.QInARepoDimensionsLegacy._isForRendering(t.getMode(),o)){continue}e.QInARepoDimensionsLegacy.exportDimension(t,o,n,r)}};e.QInARepoDimensionsLegacy.exportAxisDimensionsWithHeuristic=function(t,i,n,r,o){let l=i.getQueryModel();let a=t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY_DATA);let p=l.isOptimizedExportModeActive();let s=i.getDimensionCount();for(let l=0;l<s;l++){let s=i.get(l);if(p&&s.isIgnoredOnOptimizedExport()){continue}if(a&&!r.contains(s.getName())){continue}e.QInARepoDimensionsLegacy.exportDimension(t,s,n,o)}};e.QInARepoDimensionsLegacy.exportDimension=function(e,t,i,n){if(!n.contains(t.getName())){n.add(t.getName());i.add(e.exportDimension(t,null))}};e.QInARepoDimensionsLegacy.exportTechnicalDimension=function(t,i,n,r){if(!t.m_capabilities.supportsUniversalModel()){return}let o=i.getQueryCellManager();if(o.isEmpty()){return}let l=i.getDimensionByName("$$Cells$$");e.QInARepoDimensionsLegacy.exportDimension(t,l,n,r)};e.QInARepoDimensionsLegacy.prototype.exportComponentWithList=function(t,i,n){let r=e.PrFactory.createList();if(t.m_mode!==e.QModelFormat.INA_VALUE_HELP){let n=i;let o=n.getModelCapabilities();let l=e.XHashSetOfString.create();e.QInARepoDimensionsLegacy.exportAxisDimensions(t,n.getAxis(e.AxisType.ROWS),r,l);e.QInARepoDimensionsLegacy.exportAxisDimensions(t,n.getAxis(e.AxisType.COLUMNS),r,l);if(t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){let i=e.XHashSetOfString.create();if(t.m_mode===e.QModelFormat.INA_REPOSITORY_DATA||t.m_mode===e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){e.DimensionUsageAnalyzer2.setupHeuristic(n,i)}e.QInARepoDimensionsLegacy.exportAxisDimensionsWithHeuristic(t,n.getAxis(e.AxisType.FREE),r,i,l)}else if(t.m_mode.isTypeOf(e.QModelFormat.INA_DATA)){let i=o.supportsCubeBlendingOutOfContext()&&n.isBlendingModel();let a=n.getDataSource().getType()===e.MetaObjectType.PLANNING&&t.getSession().hasFeature(e.FeatureToggleOlap.EXPORT_FREE_AXIS_FOR_PLANNING);let p=n.getAxis(e.AxisType.FREE);let s=p.size();let u=t.isAbap(n);for(let n=0;n<s;n++){let o=p.get(n);let s=o.getDimensionType();if(s===e.DimensionType.MEASURE_STRUCTURE||s===e.DimensionType.SECONDARY_STRUCTURE){let i=this.exportDimensionIfOnFreeAxis(o);if(i){e.QInARepoDimensionsLegacy.exportDimension(t,o,r,l)}}else if(s===e.DimensionType.ACCOUNT){let i=this.exportDimensionIfOnFreeAxis(o);if(i){e.QInARepoDimensionsLegacy.exportDimension(t,o,r,l)}}else if(s.isTypeOf(e.DimensionType.CALCULATED_DIMENSION)||i||(u||a)&&o.isHierarchyActive()){e.QInARepoDimensionsLegacy.exportDimension(t,o,r,l)}}e.QInARepoDimensionsLegacy.exportTechnicalDimension(t,n,r,l)}}return r};e.QInARepoDimensionsLegacy.prototype.exportDimensionIfOnFreeAxis=function(t){let i=t.getQueryModel();let n=e.XHashSetOfString.create();if(i.getFilter().isDynamicFilterInitialized()){e.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(i.getFilter().getDynamicFilter(),n)}let r=n.contains(t.getName());if(t.isMeasureStructure()){let t=i.getExceptionManager();let n=e.XCollectionUtils.hasElements(t);return r||n}return r};e.QInARepoDimensionsLegacy.prototype.getComponentType=function(){return e.OlapComponentType.DIMENSIONS};e.QInARepoDimensionsLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoDimensionsLegacy.prototype.getTagName=function(){return"Dimensions"};e.QInARepoDimensionsLegacy.prototype.importComponentWithList=function(t,i,n,r,o){if(e.isNull(i)){return n}let l=n;let a=l.getDimensionManagerBase();if(t.m_mode!==e.QModelFormat.INA_DATA_REINIT){let e=l.getFreeAxis();e.addAll(a)}let p=i.size();let s=a.getDimensionReferences();for(let n=0;n<p;n++){let r=i.getStructureAt(n);let o=r.getStringByKey("Name");let p=r.getStringByKey("Axis");let u=null;if(r.containsKey("FieldMappings")){let e=t.importCalculatedDimension(r,l);a.addDimension(e);a.finalizeDimensionMetadataSetup(e)}else if(r.containsKey("CType")&&e.XComponentType.lookupComponentType(r.getStringByKey("CType"))===e.DimensionType.FORMULA_CALCULATED_DIMENSION){let e=t.importFormulaCalculatedDimension(r,l,null);a.addDimension(e);a.finalizeDimensionMetadataSetup(e)}else{if(s.containsKey(o)){let i=e.AxisType.lookup(p);if(t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)||i===e.AxisType.COLUMNS||i===e.AxisType.ROWS){u=a.getDimensionByNameFromExistingMetadata(o)}}t.importDimension(r,l)}if(t.m_mode!==e.QModelFormat.INA_DATA_REINIT){if(e.isNull(u)){u=a.getDimensionByNameInternal(o);if(e.isNull(u)){continue}}if(e.isNull(p)){p=r.getStringByKeyExt("AxisDefault","Free")}l.getAxis(e.QInAConverter.lookupAxisType(p)).add(u)}}return l};e.QInARepoDrillManagerLegacy=function(){};e.QInARepoDrillManagerLegacy.prototype=new e.QInAComponentWithList;e.QInARepoDrillManagerLegacy.prototype._ff_c="QInARepoDrillManagerLegacy";e.QInARepoDrillManagerLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoDrillManagerLegacy.prototype.getComponentType=function(){return e.OlapComponentType.DRILL_MANAGER};e.QInARepoDrillManagerLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoDrillManagerLegacy.prototype.getTagName=function(){return"HierarchyNavigations"};e.QInARepoDrillManagerLegacy.prototype.getZoomDrillPath=function(t,i,n,r){let o=e.XList.create();let l=n.getListByKey("DrillContextMembers");if(e.notNull(l)){let e=l.size();for(let n=0;n<e;n++){let e=l.getStructureAt(n);let a=t.importDrillPathElement(e,i,r);o.add(a)}}let a=n.getStringByKey("DrillState");let p=n.getStructureByKey("DrillMember");if(e.isNull(p)||e.isNull(a)){return null}let s=t.importDrillPathElement(p,i,r);o.add(s);return o};e.QInARepoDrillManagerLegacy.prototype.importComponentWithList=function(t,i,n,r,o){let l=n;let a;l.removeAllContextDrillOperations();l.removeZoomDrillOperationsByDimension(null);if(e.notNull(i)){let n=-1;a=i.size();for(let r=0;r<a;r++){let a=i.getStructureAt(r);let p=a.getIntegerByKeyExt("ZoomDrillStackPosition",-1);if(p===-1){t.importDrillOperation(a,l,o)}else if(p>-1){let i=this.getZoomDrillPath(t,l,a,o);if(e.XCollectionUtils.hasElements(i)){if(p!==n){l.pushEmptyZoomDrillForDimension(i.get(i.size()-1).getDimension());n=p}let e=a.getIntegerByKeyExt("DrillOffset",0)>0;l.addZoomDrillPath(i,e)}}}}return n};e.QInARepoDrillPathElementLegacy=function(){};e.QInARepoDrillPathElementLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoDrillPathElementLegacy.prototype._ff_c="QInARepoDrillPathElementLegacy";e.QInARepoDrillPathElementLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoDrillPathElementLegacy.prototype.getComponentType=function(){return e.MemberType.DRILL_PATH_ELEMENT};e.QInARepoDrillPathElementLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoDrillPathElementLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=r;let a=l.getContext().getQueryModel();let p=i.getStringByKey("FieldName");let s=i.getStringByKey("DimensionName");let u;if(e.XStringUtils.isNotNullAndNotEmpty(s)){u=a.getDimensionByNameFromExistingMetadata(s)}else{let t=a.getFieldByNameOrAlias(p);if(e.isNull(t)){u=a.getDimensionByNameFromExistingMetadata(p);if(e.notNull(u)){t=u.getKeyField();p=t.getName()}}else{u=t.getDimension()}}let g=e.QDrillPathElement._create(o);g.setDimension(u);let y=i.getStringByKey("Member");g.setName(y);g.setFieldName(p);return g};e.QInARepoExceptionsLegacy=function(){};e.QInARepoExceptionsLegacy.prototype=new e.QInAComponentWithList;e.QInARepoExceptionsLegacy.prototype._ff_c="QInARepoExceptionsLegacy";e.QInARepoExceptionsLegacy.importEvaluates=function(t,i,n,r){let o=t.getListByKey("EvaluateOn");if(e.isNull(o)){return}let l=o.size();let a=i.getQueryModel();for(let t=0;t<l;t++){let l=o.getStructureAt(t);let p=l.getStringByKey("Name");let s=a.getFieldByName(p);if(e.isNull(s)){let t=a.getDimensionByNameFromExistingMetadata(p);if(e.notNull(t)){s=t.getKeyField()}}if(e.isNull(s)){s=i.getKeyFieldValue().getField()}if(e.isNull(s)){r.addError(e.ErrorCodes.INVALID_TOKEN,e.XStringUtils.concatenate3("Could not find field '",p,"'!"));return}if(!l.containsKey("Low")){r.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate2("No low value for field: ",p));return}let u=s.getValueType();let g=e.QInAValueUtils.importValueByType(r,l,"Low",u);if(r.hasErrors()){r.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected low valuetype for field: ",u.getName()));return}let y=n._addNewEvaluateWithFieldInternal(s,g);if(l.containsKey("High")){let t=e.QInAValueUtils.importValueByType(r,l,"High",u);if(r.hasErrors()){r.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected high valuetype for field: ",u.getName()));return}y.setHighValue(t)}y.setEvaluate(e.QExceptionEvalType.lookupExceptionEvalType(l.getStringByKey("Evaluate")));let m=l.getStringByKey("Comparison");let c=e.QInAConverter.lookupComparison(m);if(e.isNull(c)){r.addError(e.ErrorCodes.INVALID_OPERATOR,e.XStringUtils.concatenate3("Unexpected comparison operator for evaluate: Operator: '",m,"'"));return}y.setOperator(c)}};e.QInARepoExceptionsLegacy.importSettings=function(t,i){if(e.isNull(t)){return}let n=t.size();for(let r=0;r<n;r++){let n=t.getStructureAt(r);let o=n.getStringByKey("Name");let l=n.getIntegerByKey("Priority");let a=n.getStringByKey("Value");if(e.notNull(a)&&!e.XString.isEqual(a,"")){let e=i.addNewSetting(o,l);e.setValue(a)}}};e.QInARepoExceptionsLegacy.importThresholds=function(t,i){let n=t.getListByKey("Threshold");if(e.notNull(n)){let t=n.size();for(let r=0;r<t;r++){let t=n.getStructureAt(r);let o=t.getIntegerByKeyExt("AlertLevel",-9999);let l;let a=!t.hasStringByKey("Low");if(a){l=i._addNewThresholdInternal(t.getDoubleByKey("Low"),e.QInAConverter.lookupAlertLevel(o))}else{l=i._addNewThresholdWithStringInternal(t.getStringByKey("Low"),e.QInAConverter.lookupAlertLevel(o))}let p=t.getStringByKey("Name");if(e.notNull(p)){l.setName(p)}let s=e.QInAConverter.lookupComparison(t.getStringByKey("Comparison"));l.setOperator(s);if(s.getNumberOfParameters()===2){if(a){let e=t.getDoubleByKey("High");l.setHighValue(e)}else{let e=t.getStringByKey("High");l.setHigh(e)}}e.QInARepoExceptionsLegacy.importSettings(t.getListByKey("Settings"),l)}}};e.QInARepoExceptionsLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoExceptionsLegacy.prototype.getComponentType=function(){return e.OlapComponentType.EXCEPTION_MANAGER};e.QInARepoExceptionsLegacy.prototype.getMemberFromContextItem=function(t,i){let n=i.getStructureMember(t.getStringByKey("MemberName"));if(e.isNull(n)){let e=t.getBooleanByKeyExt("EvaluateAllMembers",false);let n=i.getAllStructureMembers();if(e&&!n.isEmpty()){return n.get(0)}}return n};e.QInARepoExceptionsLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoExceptionsLegacy.prototype.getTagName=function(){return"Exceptions"};e.QInARepoExceptionsLegacy.prototype.importComponentWithList=function(e,t,i,n,r){let o=i.getQueryModel().getExceptionManager();o.queueEventing();if(this.isVersion1(e,i)){o.removeAllExceptionsOfMeasure(i);this.importFormatV1(e,t,i,o)}else if(this.isVersion2(e,i)){o.clear();this.importFormatV2(e,t,i,o)}o.resumeEventing();return o};e.QInARepoExceptionsLegacy.prototype.importContextItem=function(t,i,n,r,o,l){let a=r;let p=i.getDimensionByNameFromExistingMetadata(t.getStringByKey("DimensionName"));if(e.notNull(p)){let i=this.getMemberFromContextItem(t,p);if(e.notNull(i)){if(e.isNull(a)){a=this.importException(o,i,n,l)}if(p.isMeasureStructure()){a.setMeasure(i)}else{a.setStructure(i)}a.displayOnOtherMember(i,p.getStructureMember(t.getStringByKey("DisplayOnOtherMember")));a.setEvaluateAllMembers(p,t.getBooleanByKeyExt("EvaluateAllMembers",false))}}return a};e.QInARepoExceptionsLegacy.prototype.importException=function(t,i,n,r){let o=r.getStringByKey("Name");let l=r.getStringByKey("Text");let a=e.QExceptionEvalType.lookupExceptionEvalType(r.getStringByKey("EvaluateDefault"));let p=e.QExceptionHeaderSettings.lookupExceptionHeaderSetting(r.getStringByKey("ApplySettingsToHeader"));let s=r.getBooleanByKeyExt("Active",true);let u=r.getBooleanByKeyExt("EvaluateBeforePostAggregation",true);let g=n._addNewExceptionInternal(o,l,a,p,s,!u);g.queueEventing();e.QInARepoExceptionsLegacy.importEvaluates(r,i,g,t);e.QInARepoExceptionsLegacy.importThresholds(r,g);g.resumeEventing();return g};e.QInARepoExceptionsLegacy.prototype.importFormatV1=function(t,i,n,r){if(e.notNull(i)){let e=i.size();for(let o=0;o<e;o++){let e=i.getStructureAt(o);let l=this.importException(t,n,r,e);l.setMeasure(n);l.setIsChangeable(e.getBooleanByKeyExt("Changegable",true))}}};e.QInARepoExceptionsLegacy.prototype.importFormatV2=function(t,i,n,r){if(e.isNull(i)){return}let o=i.size();for(let l=0;l<o;l++){let o=i.getStructureAt(l);let a=o.getListByKey("StructureContext");if(!e.PrUtils.isListEmpty(a)){let i=this.importContextItem(a.getStructureAt(0),n,r,null,t,o);if(e.notNull(i)){if(a.size()>1){this.importContextItem(a.getStructureAt(1),n,r,i,t,o)}i.setIsChangeable(o.getBooleanByKeyExt("Changegable",true))}}}};e.QInARepoExceptionsLegacy.prototype.isVersion1=function(t,i){let n=i.getOlapComponentType();return!t.m_capabilities.supportsExceptionsV2()&&n.isTypeOf(e.MemberType.ABSTRACT_MEMBER)};e.QInARepoExceptionsLegacy.prototype.isVersion2=function(t,i){let n=i.getOlapComponentType();return t.m_capabilities.supportsExceptionsV2()&&n.isTypeOf(e.OlapComponentType.QUERY_MODEL)};e.QInARepoFilterAlgebraLegacy=function(){};e.QInARepoFilterAlgebraLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterAlgebraLegacy.prototype._ff_c="QInARepoFilterAlgebraLegacy";e.QInARepoFilterAlgebraLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterAlgebraLegacy.prototype.getComponentType=function(){return e.FilterComponentType.BOOLEAN_ALGEBRA};e.QInARepoFilterAlgebraLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterAlgebraLegacy.prototype.getTagName=function(){return"Operator"};e.QInARepoFilterAlgebraLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=r;let a=i.getListByKey("SubSelections");if(e.notNull(a)){let n=i.getStringByKey("Code");let r;if(e.XString.isEqual(n,"And")){r=e.QFilterAnd._create(o,l)}else if(e.XString.isEqual(n,"Not")){r=e.QFilterNot._create(o,l)}else{r=e.QFilterOr._create(o,l)}let p=a.size();for(let i=0;i<p;i++){let n=a.getStructureAt(i);let p=t.importFilterElement(n,null,l,o);if(e.notNull(p)){r.add(p)}}if(r.hasElements()){return r}}return null};e.QInARepoFilterAllLegacy=function(){};e.QInARepoFilterAllLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterAllLegacy.prototype._ff_c="QInARepoFilterAllLegacy";e.QInARepoFilterAllLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterAllLegacy.prototype.getComponentType=function(){return e.OlapComponentType.SELECTOR};e.QInARepoFilterAllLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterAllLegacy.prototype.importComponentWithStructure=function(e,t,i,n,r){let o=i;e.importFixedFilter(t,o,r);e.importDynamicFilter(t,o,r);e.importVisibilityFilter(t,o,r);return o};e.QInARepoFilterCellValueOperandLegacy=function(){};e.QInARepoFilterCellValueOperandLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterCellValueOperandLegacy.prototype._ff_c="QInARepoFilterCellValueOperandLegacy";e.QInARepoFilterCellValueOperandLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterCellValueOperandLegacy.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_CELL_VALUE_OPERAND};e.QInARepoFilterCellValueOperandLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterCellValueOperandLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=i.getStringByKey("Low");if(e.XString.isEqual(l,"")){l=null}let a=i.getStringByKey("High");if(e.XString.isEqual(a,"")){a=null}let p=e.QInAConverter.lookupComparison(i.getStringByKey("Comparison"));let s=e.QFilterCellValueOperand._create(o,null,l,a,p);s.setIsExcluding(i.getBooleanByKey("IsExcluding"));return s};e.QInARepoFilterElementLegacy=function(){};e.QInARepoFilterElementLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterElementLegacy.prototype._ff_c="QInARepoFilterElementLegacy";e.QInARepoFilterElementLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterElementLegacy.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_ELEMENT};e.QInARepoFilterElementLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterElementLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=r;let a=n;if(i.containsKey("Operator")){a=t.importFilterAlgebra(l,i,o)}else{let n=i.getStructureByKey("SetOperand");if(e.isNull(n)){if(i.containsKey("GeometryOperand")){a=t.importFilterGeo(l,i,o)}}else{a=t.importCartesianList(n,a,l,o)}}return a};e.QInARepoFilterExpressionLegacy=function(){};e.QInARepoFilterExpressionLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterExpressionLegacy.prototype._ff_c="QInARepoFilterExpressionLegacy";e.QInARepoFilterExpressionLegacy.prototype.exportComponent=e.noSupport;e.QInARepoFilterExpressionLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterExpressionLegacy.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_EXPRESSION};e.QInARepoFilterExpressionLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterExpressionLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(e.isNull(l)){l=e.QFactory.createFilterExpression(o,r)}let a=0;let p=null;if(e.notNull(i)){p=i.getStructureByKey("Selection");if(e.isNull(p)){p=i.getStructureByKey("SelectionRepo");a=1}}l.setCartesianProduct(null);l.setComplexRoot(null);if(e.notNull(p)){let i=t.importFilterElement(p,null,l,o);if(e.notNull(i)){if(a>=1){l.setComplexRoot(i)}else{let t=e.QFilterUtil.convertComplexFilterToCartesian(i);if(e.notNull(t)){l.setCartesianProduct(t)}else{l.setComplexRoot(i)}}}}if(l.getModelCapabilities().supportsCellValueOperand()){l.setIsSuppressingNulls(false);l.clearCellValueFilter();if(e.notNull(i)){if(t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){l.setIsSuppressingNulls(i.getBooleanByKeyExt("IsSuppressingNulls",false))}if(e.notNull(p)){let i=p.getStructureByKey("CellValueOperand");if(e.isNull(i)){let t=p.getStructureByKey("Operator");if(e.notNull(t)){let e=t.getListByKey("SubSelections");if(e.size()===2){let t=e.getStructureAt(1);i=t.getStructureByKey("CellValueOperand")}}}if(e.notNull(i)){let n=i.getListByKey("Elements");if(e.notNull(n)){let i=e.QFilterCellValueOperand.createForNullSuppression(o,null);let r=n.size();if(r>0){let e=n.getStructureAt(0);let a=t.importFilterCellValueOperand(e,o);let p=0;if(a.isEqualTo(i)){l.setIsSuppressingNulls(true);p=1}l.clearCellValueFilter();for(let e=p;e<r;e++){let i=n.getStructureAt(e);let r=t.importFilterCellValueOperand(i,o);l.addCellValueFilter(r)}}}}}}}return l};e.QInARepoFilterFixedLegacy=function(){};e.QInARepoFilterFixedLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterFixedLegacy.prototype._ff_c="QInARepoFilterFixedLegacy";e.QInARepoFilterFixedLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterFixedLegacy.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_FIXED};e.QInARepoFilterFixedLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterFixedLegacy.prototype.getTagName=function(){return"FixedFilter"};e.QInARepoFilterFixedLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){if(e.isNull(i)){return null}let l=r;let a=t.importFilterExpression(null,i,l,o);if(e.notNull(l)&&e.notNull(a)){l.setFixedFilter(a)}return a};e.QInARepoFilterGeoLegacy=function(){};e.QInARepoFilterGeoLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterGeoLegacy.prototype._ff_c="QInARepoFilterGeoLegacy";e.QInARepoFilterGeoLegacy.tryCreateGeometry=function(t){let i=e.XGeometryValue.createGeometryValueWithWkt(t);if(e.isNull(i)){i=e.XStringValue.create(t)}return i};e.QInARepoFilterGeoLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterGeoLegacy.prototype.getComponentType=function(){return e.FilterComponentType.SPATIAL_FILTER};e.QInARepoFilterGeoLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterGeoLegacy.prototype.getTagName=function(){return"GeometryOperand"};e.QInARepoFilterGeoLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=r;let a=o.getFieldAccessorSingle();let p=i.getStringByKey("Comparison");let s=i.getStringByKey("FieldName");let u=i.getStringByKey("Value1");if(e.XStringUtils.isNotNullAndNotEmpty(p)&&e.XStringUtils.isNotNullAndNotEmpty(s)&&e.XStringUtils.isNotNullAndNotEmpty(u)){let t=e.QInAConverter.lookupComparison(p);if(e.isNull(t)){return null}if(!t.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){return null}let n=a.getFieldByName(s);if(e.isNull(n)){return null}let r=e.QFactory.createFilterOperationWithOperator(l,n,t);let o=e.QInARepoFilterGeoLegacy.tryCreateGeometry(u);r.getLow().setValue(o);let g=i.getStringByKey("Value2");if(e.XStringUtils.isNotNullAndNotEmpty(g)){let t=e.QInARepoFilterGeoLegacy.tryCreateGeometry(g);r.getHigh().setValue(t)}let y=i.getStringByKey("Value3");if(e.XStringUtils.isNotNullAndNotEmpty(y)){let t=e.QInARepoFilterGeoLegacy.tryCreateGeometry(y);r.getThird().setValue(t)}return r}return null};e.QInARepoFilterManagerLegacy=function(){};e.QInARepoFilterManagerLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterManagerLegacy.prototype._ff_c="QInARepoFilterManagerLegacy";e.QInARepoFilterManagerLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterManagerLegacy.prototype.getComponentType=function(){return e.OlapComponentType.OLAP_FILTER_MANAGER};e.QInARepoFilterManagerLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterManagerLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(e.isNull(l)){l=o.getOlapEnv().getFilterManager()}let a=i.getStructureByKey("OlapFilterManager");let p=a.getStructureByKey("OlapFilters");let s=p.getKeysAsIterator();while(s.hasNext()){let e=s.next();let i=l.getFilterByName(e);t.importFilterExpression(i,p.getStructureByKey(e),l,l.getContext())}return l};e.QInARepoFilterOperationLegacy=function(){};e.QInARepoFilterOperationLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterOperationLegacy.prototype._ff_c="QInARepoFilterOperationLegacy";e.QInARepoFilterOperationLegacy.importMemberNavigation=function(t){let i=e.QFactory.createMemberNavigation(e.CurrentMemberFunction.lookup(t.getStringByKey("Function")));if(t.containsKey("Parameters")){let n=t.getListByKey("Parameters");let r=n.size();for(let t=0;t<r;t++){let r=n.getStructureAt(t);if(r.containsKey("Navigations")){let t=r.getListByKey("Navigations");let n=t.size();for(let r=0;r<n;r++){i.addNavigation(e.QInARepoFilterOperationLegacy.importMemberNavigation(t.getStructureAt(r)))}}else{if(r.containsKey("Level")){let t=r.getByKey("Level");if(t.isNumeric()){i.addParameter(e.QFactory.createNavigationParameterWithLevelNumber(t.getInteger()))}else{i.addParameter(e.QFactory.createNavigationParameterWithLevelLiteral(t.getString()))}}else if(r.containsKey("Member")){i.addParameter(e.QFactory.createNavigationParameterWithMemberName(r.getStringByKey("Member")))}else if(r.containsKey("NoValuesAboveLevel")){i.addParameter(e.QFactory.createNavigationParameterWithNoValuesAboveLevel(r.getStringByKey("NoValuesAboveLevel")))}else if(r.containsKey("ErrorAboveLevel")){i.addParameter(e.QFactory.createNavigationParameterWithErrorAboveLevel(r.getStringByKey("ErrorAboveLevel")))}else if(r.containsKey("Shift")){let t=r.getStructureByKey("Shift");i.addParameter(e.QFactory.createNavigationParameterWithShift(t.getStringByKey("Level"),t.getIntegerByKey("Constant")))}else if(r.containsKey("Range")){let t=r.getStructureByKey("Range");i.addParameter(e.QFactory.createNavigationParameterWithRange(t.getStringByKey("Level"),t.getIntegerByKey("OffsetLow"),t.getIntegerByKey("OffsetHigh")))}else{let t=r.getByKey("Constant");if(t.isNumeric()){i.addParameter(e.QFactory.createNavigationParameterWithIntegerConstant(t.getInteger()))}else{i.addParameter(e.QFactory.createNavigationParameterWithStringConstant(t.getString()))}}}}}return i};e.QInARepoFilterOperationLegacy.importValue=function(t,i,n,r,o,l,a,p,s){let u=l.getStringByKey(p);if(e.XString.isEqual("Variable",u)){r.setFilterValueType(e.XValueType.VARIABLE);let t=l.getStringByKey(a);let n=i.getVariables().getByKey(t);if(e.notNull(n)){r.setVariableValue(n)}}else{let i=e.QInAConverter.lookupValueType(l.getStringByKeyExt("LowIs",null));if(i===e.XValueType.CURRENT_MEMBER||i===e.XValueType.VARIABLE){r.setFilterValueType(i)}if(e.notNull(s)){let t=l.getListByKey(s);if(e.notNull(t)){let i=r.getMemberNavigations();let n=t.size();for(let r=0;r<n;r++){i.add(e.QInARepoFilterOperationLegacy.importMemberNavigation(t.getStructureAt(r)))}}}e.QInAValueUtils.importValue(t,r,l,a,o,n)}};e.QInARepoFilterOperationLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterOperationLegacy.prototype.getComponentType=function(){return e.FilterComponentType.OPERATION};e.QInARepoFilterOperationLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterOperationLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=i.getStringByKeyExt("Comparison","=");let a=e.QInAConverter.lookupComparison(l);if(e.isNull(a)){t.addError(e.ErrorCodes.INVALID_OPERATOR,e.XStringUtils.concatenate2("Unsupported comparison operator: ",l));return null}let p=r;let s=p.getFilterExpression();let u=p.getField();let g=e.QFactory.createFilterOperationWithOperator(s,u,a);let y=u.getValueType();let m=a.isTypeOf(e.ComparisonOperator.LIKE)||a.isTypeOf(e.ComparisonOperator.MATCH)||a.isTypeOf(e.ComparisonOperator.NOT_MATCH);if(m){y=e.XValueType.STRING}if(i.getBooleanByKeyExt("IsExcluding",false)){g.setSetSign(e.SetSign.EXCLUDING)}else{g.setSetSign(e.SetSign.INCLUDING)}g.resetDepth();let c=i.getIntegerByKeyExt("Depth",-1);if(c!==-1){g.setDepth(c)}g.resetLevelOffset();let A=i.getIntegerByKeyExt("LevelOffset",-1);if(A!==-1){g.setLevelOffset(A)}let S=i.getStructureByKey("Hierarchy");if(e.notNull(S)){let i=S.getStringByKey("Name");let n=null;let r=null;let o=g.getQueryModel();if(t.getSession().hasFeature(e.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER)&&e.notNull(o)&&o.getSystemType().isTypeOf(e.SystemType.ABAP)){let t=S.getStringByKey("DueDate");if(e.notNull(t)){n=e.XDate.createDateFromSAPFormat(t)}r=S.getStringByKey("Version")}g.setHierarchyInfo(i,n,r)}if(t.m_capabilities.supportsConvertToFlatFilter()){g.setConvertToFlatFilter(i.getBooleanByKeyExt("ConvertToFlatSelection",false))}let d=p.getSupplementFieldNames();let I=o.getVariableContainer();let f=a.getNumberOfParameters();if(f>=1){let n=g.getLow();e.QInARepoFilterOperationLegacy.importValue(t,I,u,n,y,i,"Low","LowIs","LowNavigations");e.QInAValueUtils.importSupplements(t,n,i,"LowSupplements",d)}if(f>=2){let n=g.getHigh();e.QInARepoFilterOperationLegacy.importValue(t,I,u,n,y,i,"High","HighIs",null);e.QInAValueUtils.importSupplements(t,n,i,"HighSupplements",d)}if(f>=3){let n=g.getThird();e.QInARepoFilterOperationLegacy.importValue(t,I,u,n,y,i,"Value3","Value3Is",null);e.QInAValueUtils.importSupplements(t,n,i,null,d)}return g};e.QInARepoHierarchyLegacy=function(){};e.QInARepoHierarchyLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoHierarchyLegacy.prototype._ff_c="QInARepoHierarchyLegacy";e.QInARepoHierarchyLegacy.appendItemsToCatalogResult=function(t,i,n){let r=e.PrUtils.getListSize(i,0);for(let o=0;o<r;o++){let r=e.PrUtils.getStructureElement(i,o);let l=e.HierarchyCatalogItem.createCatalogItem();l.setDimensionName(n);let a;if(r.hasStringByKey("Name")){a=r.getStringByKey("Name")}else{a=r.getStringByKey("HierarchyName")}if(e.XStringUtils.isNullOrEmpty(a)||t.containsHierarchy(a)){continue}l.setHierarchyName(a);l.setHierarchyUniqueName(r.getStringByKey("UniqueName"));let p=e.PrUtils.getStringProperty(r,"Description");if(e.notNull(p)){l.setHierarchyLongText(p.getString())}let s=e.PrUtils.getStringProperty(r,"Version");if(e.notNull(s)){l.setVersionName(s.getString())}let u=e.PrUtils.getStringProperty(r,"Structure");if(e.notNull(u)){l.setHierarchyType(e.HierarchyType.lookup(u.getString()))}let g=e.PrUtils.getBooleanValueProperty(r,"IsModeled",false);l.setIsModeled(g);let y=e.PrUtils.getStringProperty(r,"DateTo");if(e.notNull(y)){let t=y.getString();if(e.XStringUtils.isNotNullAndNotEmpty(t)){l.setDateTo(e.XDate.createDateFromIsoFormat(t))}}let m=e.PrUtils.getListProperty(r,"Levels");if(e.notNull(m)){l.setSupportsHierarchyLevels(true);let t=e.XList.create();let i=e.PrUtils.getListSize(m,0);for(let n=0;n<i;n++){let i=e.PrUtils.getStructureElement(m,n);if(e.isNull(i)){continue}let r=e.HierarchyCatalogLevel.createCatalogLevel();let o=e.PrUtils.getIntegerValueProperty(i,"Level",-1);if(o>-1){r.setLevel(o)}let l=e.PrUtils.getStringProperty(i,"LevelName");if(e.notNull(l)){r.setLevelName(l.getString())}let a=e.PrUtils.getStringProperty(i,"LevelCaption");if(e.notNull(a)){r.setLevelDescription(a.getString())}let p=e.PrUtils.getStringProperty(i,"LevelUniqueName");if(e.notNull(p)){r.setLevelUniqueName(p.getString())}let s=e.PrUtils.getStringProperty(i,"DimensionName");if(e.notNull(s)){r.setLevelDimensionName(s.getString())}let u=e.PrUtils.getIntegerProperty(i,"LevelType");if(e.notNull(u)){r.setLevelType(e.QInAConverter.lookupHierarchyLevelType(u.getInteger()))}t.add(r)}l.setHierarchyLevels(t)}let c=r.getStringByKey("RestNode");if(e.notNull(c)){l.setRestNode(c)}let A=r.getStringByKey("VirtualRootNode");if(e.notNull(A)){l.setVirtualRootNode(A)}t.addItem(l)}return t};e.QInARepoHierarchyLegacy.importLeveledHierarchy=function(t,i,n,r){let o=e.QLeveledHierarchy.create(i,n,r.getStringByKey(r.containsKey("Name")?"Name":"HierarchyName"));o.setHierarchyUniqueName(r.getStringByKey("UniqueName"));if(r.getStringByKey("DimensionName")===null){o.setDimensionName(n.getName())}else{o.setDimensionName(r.getStringByKey("DimensionName"))}o.setHierarchyType(e.HierarchyType.lookup(r.getStringByKey("Structure")));o.setIsModeled(r.getBooleanByKeyExt("IsModeled",false));let l=r.getStringByKey("DueDate");if(e.XStringUtils.isNotNullAndNotEmpty(l)){o.setDateTo(e.QInARepoUtils.createDate(l))}o.setHierarchyDescription(r.getStringByKey("Description"));let a=r.getListByKey("Levels");if(!e.PrUtils.isListEmpty(a)){e.QInARepoHierarchyLegacy.importLevels(o,a)}return o};e.QInARepoHierarchyLegacy.importLevels=function(t,i){let n=i.size();for(let r=0;r<n;r++){let n=i.getStructureAt(r);let o=e.QHierarchyLevel.create(t,n.getStringByKey("LevelUniqueName"),n.getIntegerByKey("Level"));o.setLevelName(n.getStringByKey("LevelName"));o.setLevelText(n.getStringByKey("LevelCaption"));o.setLevelDimensionName(n.getStringByKey("DimensionName"));o.setLevelType(e.QInAConverter.lookupHierarchyLevelType(n.getIntegerByKey("LevelType")));o.setNavigationAttribute(n.getStringByKey("NavAttr"));t.getAllLevelBase().add(o)}};e.QInARepoHierarchyLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoHierarchyLegacy.prototype.getComponentType=function(){return e.OlapComponentType.HIERARCHY};e.QInARepoHierarchyLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoHierarchyLegacy.prototype.getTagName=function(){return"Hierarchy"};e.QInARepoHierarchyLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(l.supportsHierarchy()){let n=l.isDisplayHierarchyFixInFilter();l.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(false);if(e.isNull(i)){l.setHierarchy(null)}else{let r;if(i.hasStringByKey("Name")){r=i.getStringByKey("Name")}else{r=i.getStringByKey("HierarchyName")}let a=null;if(e.XStringUtils.isNotNullAndNotEmpty(r)){if(l.getModelCapabilities().supportsDimensionHierarchyLevels()){this.importHierarchyAsCatalogItem(i,l);this.importLeveledHierarchyToMetadata(t,i,o,l)}if(i.getBooleanByKey("IsTransient")){a=e.QHierarchy.createCustomHierarchy(l.getContext(),l,r,i.getStringByKey("Description"))}else{a=e.QHierarchy.create(l.getContext(),l,r)}a.setHierarchyVersion(i.getStringByKey("Version"));let n=i.getStringByKey("DueDate");let p=i.getStringByKey("DueDateIs");let s=e.notNull(p)&&e.XString.isEqual("Variable",p);l.setUseHierarchyDueDateVariable(s);if(s){if(e.XStringUtils.isNullOrEmpty(n)){l.setHierarchyDueDateVariableName(null)}else{l.setHierarchyDueDateVariableName(n)}}else{a.setHierarchyDueDate(e.QInARepoUtils.createDate(n))}let u=i.getStringByKey("DateTo");a.setDateTo(e.QInARepoUtils.createDate(u));let g=i.getStringByKey("0DATEFROM");a.setDateFrom(e.QInARepoUtils.createDate(g));let y=i.getStructureByKey("Metadata");if(e.notNull(y)){u=y.getStringByKey("DateTo");if(e.XStringUtils.isNotNullAndNotEmpty(u)){a.setDateTo(e.QInARepoUtils.createDate(u))}g=y.getStringByKey("0DATEFROM");if(e.XStringUtils.isNotNullAndNotEmpty(g)){a.setDateFrom(e.QInARepoUtils.createDate(g))}}l.setHierarchy(a);let m=i.getBooleanByKeyExt("HierarchyActive",true);l.setHierarchyActive(m);l.setSelectorHierarchyActive(m)}let p=i.getListByKey("StickyDimensionMembers");l.clearStickyMembers();if(e.XCollectionUtils.hasElements(p)){for(let e=0;e<p.size();e++){l.addStickyMember(p.getStringAt(e))}}let s=i.getIntegerByKeyExt("InitialDrillOffset",0);let u=i.getIntegerByKeyExt("InitialDrillLevel",0);let g=l.getModelCapabilities();if(g.supportsVisibilityFilter()||!t.m_mode.isTypeOf(e.QModelFormat.INA_DATA)){l.setInitialDrillLevel(u);l.setSelectorInitialDrillLevel(u)}else{if(u===-1){l.setInitialDrillLevel(u);l.setSelectorInitialDrillLevel(u)}else if(s===-1){l.setInitialDrillLevel(0);l.setSelectorInitialDrillLevel(0)}else{l.setInitialDrillLevel(u+s);l.setSelectorInitialDrillLevel(u+s)}}l.setInitialDrillOffset(s);l.setExplicitDrillOnFilteredNodes(i.getBooleanByKeyExt("ExplicitDrillOnFilteredNodes",false));let y=e.Alignment.DEFAULT_VALUE;if(o.getModelCapabilities().supportsExpandBottomUp()){let t=i.getStringByKeyExt("LowerLevelNodeAlignment","Default");y=e.QInAConverter.lookupLowerLevelNodeAlignment(t);if(i.containsKey("ExpandBottomUp")){let t=i.getBooleanByKeyExt("ExpandBottomUp",false);if(t){y=e.Alignment.CHILDREN_ABOVE_PARENT}}}l.setLowerLevelNodeAlignment(y);let m=i.getBooleanByKeyExt("NodeCondensation",false);l.setHasNodeCondensation(m);let c=i.getStringByKeyExt("MemberOfPostedNodeVisibility","Visible");let A=e.QInAConverter.lookupResultSetVisibility(c);l.setMemberOfPostedNodeVisibility(A);l.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(n);return a}l.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(n)}return null};e.QInARepoHierarchyLegacy.prototype.importHierarchyAsCatalogItem=function(t,i){let n=e.PrFactory.createList();n.add(t);let r=i.getHierarchies();if(e.isNull(r)){r=e.QFactory.createHierarchyCatalogResult();e.QInARepoHierarchyLegacy.appendItemsToCatalogResult(r,n,i.getName());i.getHierarchyManagerBase().setHierarchies(r)}else{e.QInARepoHierarchyLegacy.appendItemsToCatalogResult(r,n,i.getName())}};e.QInARepoHierarchyLegacy.prototype.importLeveledHierarchyToMetadata=function(t,i,n,r){let o=r.getQueryModelBase().getQueryManagerBase();if(e.notNull(o)&&!e.PrUtils.isListEmpty(i.getListByKey("Levels"))){let l=o.getMetadataModelBase();let a=l.getLeveledHierarchiesBase();let p=e.QInARepoHierarchyLegacy.importLeveledHierarchy(t,n,r,i);if(!a.contains(p)){a.add(p)}}};e.QInARepoMemberRestrictedLegacy=function(){};e.QInARepoMemberRestrictedLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoMemberRestrictedLegacy.prototype._ff_c="QInARepoMemberRestrictedLegacy";e.QInARepoMemberRestrictedLegacy.getFirstMemberForSignFlip=function(t,i){let n=i.getChildren();while(n.hasNext()){let i=n.next();if(i.getOlapComponentType()===e.FilterComponentType.OPERATION){let n=i;let r=n.getDimensionName();if(e.XString.isEqual(t,r)){return n.getLow().getValue().toString()}}let r=e.QInARepoMemberRestrictedLegacy.getFirstMemberForSignFlip(t,i);if(e.notNull(r)){return r}}return null};e.QInARepoMemberRestrictedLegacy.getMemberForSignFlip=function(t,i){if(i.getAccountType()!==null){return i.getName()}let n=i.getDimensionContext(t.getQueryManager());let r=i.getFilter();let o=n.getName();if(e.notNull(o)){if(r.isAll()){o=e.QInARepoMemberRestrictedLegacy.getFirstMemberForSignFlip(o,r.getFilterRootElement())}let l=n.getStructureMemberByAliasOrMember(o);if(e.notNull(l)&&l.getComponentType()===e.MemberType.RESTRICTED_MEASURE&&l!==i){return e.QInARepoMemberRestrictedLegacy.getMemberForSignFlip(t,l)}}return o};e.QInARepoMemberRestrictedLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoMemberRestrictedLegacy.prototype.getComponentType=function(){return e.MemberType.RESTRICTED_MEASURE};e.QInARepoMemberRestrictedLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoMemberRestrictedLegacy.prototype.getNameForImport=function(t,i){let n=t.getStringByKey("Name");if(e.isNull(n)&&e.notNull(i)){let e=i.getKeyField();let n=e.getName();return t.getStringByKey(n)}return n};e.QInARepoMemberRestrictedLegacy.prototype.getText=function(t,i){let n=t.getStringByKey("Description");if(e.isNull(n)&&e.notNull(i)){let n=i.getTextField();if(e.notNull(n)){let e=n.getName();return t.getStringByKey(e)}}return n};e.QInARepoMemberRestrictedLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){let l;if(e.isNull(n)){let e=r;let t=this.getNameForImport(i,e);let n=this.getText(i,e);if(e.getModelCapabilities().supportsCustomMeasuresInMetadata()&&e.getLoadedStructureMember(t)!==null){l=e.getLoadedStructureMember(t)}else{l=e.addNewRestrictedMeasure(t,n)}}else{l=n}let a=i.getStringByKey("AggregationDimension");if(e.XStringUtils.isNotNullAndNotEmpty(a)){l.setAggregationDimensionName(a)}let p=i;if(l.getModelCapabilities().supportsCustomMeasuresInMetadata()&&t.getMode()===e.QModelFormat.INA_DATA){let e=l.getDimension().isMeasureStructure()?"[Measures].[MemberDetails]":"[CustomDimension2].[MemberDetails]";p=i.getStructureByKey(e)}if(l.getMemberType()===e.MemberType.RESTRICTED_MEASURE){t.importFilterExpression(l.getFilter(),p,l,o)}t.importExceptions(p,l);return l};e.QInARepoMembersAllLegacy=function(){};e.QInARepoMembersAllLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoMembersAllLegacy.prototype._ff_c="QInARepoMembersAllLegacy";e.QInARepoMembersAllLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoMembersAllLegacy.prototype.getComponentType=function(){return e.OlapComponentType.MEMBERS};e.QInARepoMembersAllLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoMembersAllLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(l.supportsCustomMembers()){l.removeCustomMembers()}let a=i.getListByKey("MembersRepo");if(e.isNull(a)){a=i.getListByKey("Members");if(e.isNull(a)){return null}}let p=l.getStructureLayout();if(e.notNull(p)){p.clear();let i=a.size();for(let n=0;n<i;n++){let i=a.getStructureAt(n);let r=t.importStructureMember(l,i,o);if(e.notNull(r)){let t=l.getLoadedStructureMember(r.getName());if(e.isNull(t)){l.addMeasure(r)}else{if(t!==r){throw e.XException.createIllegalStateException("Internal error: New member with same name not allowed")}p.removeElement(t);p.add(t)}}}}return l};e.QInARepoQueryLegacy=function(){};e.QInARepoQueryLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoQueryLegacy.prototype._ff_c="QInARepoQueryLegacy";e.QInARepoQueryLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoQueryLegacy.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_MODEL};e.QInARepoQueryLegacy.prototype.getInactiveCapabilities=function(t){let i=e.XHashMapByString.create();let n=e.FeatureToggle.getAllFeatureToggles();let r=n.getKeysAsIterator();while(r.hasNext()){i.put(r.next(),e.XBooleanValue.create(false))}let o=t.getSession().getFeatureToggles();if(e.notNull(o)){let t=o.getKeysAsIterator();while(t.hasNext()){i.put(t.next(),e.XBooleanValue.create(true))}}return i};e.QInARepoQueryLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoQueryLegacy.prototype.importBlendingSources=function(t,i,n){let r=n.getBlendingSources();if(!e.XCollectionUtils.hasElements(r)){return}let o=e.PrUtils.getStructureProperty(i,"DataSource");let l=e.PrUtils.getListProperty(o,"Sources");if(e.PrUtils.isListEmpty(l)){return}for(let i=0;i<r.size();i++){let n=e.PrUtils.getStructureElement(l,i);let o=e.PrUtils.getStructureProperty(n,"DefiningContext");if(e.notNull(o)){let e=r.get(i).getQueryModel();e.deserializeFromElementExt(t.m_mode,o)}}};e.QInARepoQueryLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;let a=i;let p=a.getListByKey("Queries");if(e.notNull(p)){a=p.getStructureAt(p.size()-1)}let s=a.getListByKey(e.ConnectionConstants.INA_BATCH);if(e.notNull(s)){a=s.getStructureAt(s.size()-1)}if(e.notNull(a)&&a.containsKey("Analytics")){a=a.getStructureByKey("Analytics");if(e.notNull(a)&&a.containsKey("Definition")){a=a.getStructureByKey("Definition")}}if(e.notNull(a)&&a.containsKey("Definition")){a=a.getStructureByKey("Definition")}if(e.notNull(a)){let n=t.getOriginalMode()===e.QModelFormat.INA_CLONE_RENDERING&&t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY);let r=t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY);if(r&&a.containsKey("ModellerDefinition")){a=a.getStructureByKey("ModellerDefinition");let i=l.isEventingStopped();if(!i){l.stopEventing()}l.setDeltaPhase(e.QDeltaOperationPhase.NOTE_MODELER_CHANGES);t.importModellerMetadataProperties(a,l,l);t.importModellerDimensions(a,l,l);t.importModellerDefinedVariables(a,l.getVariableManagerBase(),l);t.importModellerCurrencyTranslation(a,l.getCurrencyTranslationManagerBase(),l);t.importFormulaExceptionManager(a,l.getFormulaExceptionManagerBase(),l);l.finishModelerEventing();if(!i){l.resumeEventing()}return l}t.importDimensions(a,l,l);if(!n){t.importFilter(a,l.getFilterBase(),l);t.importExceptions(a,l);t.importQueryCells(a,l.getQueryCellManager(),l);t.importUniversalDisplayHierarchies(a,l.getUniversalDisplayHierarchiesBase(),l)}t.importCurrencyTranslationManager(a,l.getCurrencyTranslationManager(),l);t.importSortingManager(a,l.getSortingManagerBase(),l);t.importDrillManager(a,l.getDrillManager(),l);t.importVariableManager(a,l.getVariableManagerBase(),l);t.importQuerySettings(a,l);t.importDataCells(a,l);t.importConditionManager(a,l.getConditionManagerBase(),l);if(r){t.importFormulaExceptionManager(a,l.getFormulaExceptionManagerBase(),l);this.importPaging(t,a,l);e.QInARepoOptions.importSuppressKeyfigureCalculation(a,l.getQueryManager());let n=l.getResultStructureController();t.importComponent(null,a,n,l,l);let r=l.getQueryManager();if(e.notNull(r)){r.setResultSetPersistanceTargetTable(a.getStringByKey("ResultSetPersistanceTable"));r.setResultSetPersistanceTargetSchema(a.getStringByKey("ResultSetPersistanceSchema"));r.setResultSetPersistenceIdentifier(a.getStringByKey("ResultSetPersistanceIdentifier"))}let o=a.getListByKey("PreQueries");if(e.notNull(o)){let i=null;let n=a.getStructureByKey("DataSource");if(e.notNull(n)){i=n.getStringByKey("System")}this.importPreQueries(t,l,o,i)}if(l.isBlendingModel()){this.importBlendingSources(t,i,l)}}}return l};e.QInARepoQueryLegacy.prototype.importPaging=function(t,i,n){let r=i.getStructureByKey("SubSetDescription");let o=n.getQueryManager();let l=t.m_mode===e.QModelFormat.INA_REPOSITORY_DATA_RENDERING;if(e.isNull(r)||!n.getSession().hasFeature(e.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)||o.applyingStateOnQueryManager()&&!l){return}e.QInARepoOptions.importPaging(i,o)};e.QInARepoQueryLegacy.prototype.importPreQueries=function(t,i,n,r){let o=t.getMode();if(t.getOriginalMode()!==e.QModelFormat.INA_CLONE_RENDERING){t.m_mode=t.getOriginalMode()}let l=this.getInactiveCapabilities(i);for(let o=0;o<n.size();o++){let a=n.getStructureAt(o);let p=a.getStringByKey("ObjectName");if(i.getPreQueryByName(p)!==null){continue}let s=a.containsKey("Runtime")?a.getStructureByKey("Runtime"):a;let u=s.getStructureByKey("DataSource");let g=e.XStringBuffer.create();g.append(u.getStringByKey("Type")).append(":[");g.append(u.getStringByKey("SchemaName"));g.append("][");g.append(u.getStringByKey("PackageName"));g.append("][");g.append(u.getStringByKey("ObjectName")).append("]");let y=u.getStringByKey("System");if(t.m_mode===e.QModelFormat.INA_REPOSITORY&&e.XString.isEqual(y,r)){y=i.getDataSource().getSystemName()}let m=e.XCommandFactory.create(i.getApplication());let c=m.createCommand(e.CmdCreateQueryManager.CMD_NAME);c.addParameter(e.CmdCreateQueryManager.PARAM_I_APPLICATION,i.getApplication());c.addParameter(e.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,l);c.addParameterString(e.CmdCreateQueryManager.PARAM_I_SYSTEM,y);c.addParameterString(e.CmdCreateQueryManager.PARAM_I_DATA_SOURCE,g.toString());let A=c.processCommand(e.SyncType.BLOCKING,null,null);t.addAllMessages(A);e.XObjectExt.release(c);if(A.isValid()){let n=A.getData().getResultParameter(e.CmdCreateQueryManager.PARAM_E_QUERY_MANAGER).getQueryModel();t.importPreQuery(a,n);i.addPreQueryWithName(n,p)}}t.m_mode=o};e.QInARepoQuerySettingsLegacy=function(){};e.QInARepoQuerySettingsLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoQuerySettingsLegacy.prototype._ff_c="QInARepoQuerySettingsLegacy";e.QInARepoQuerySettingsLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoQuerySettingsLegacy.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_SETTINGS};e.QInARepoQuerySettingsLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoQuerySettingsLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=e.PrUtils.getStringProperty(i,"Name");let a=o.getQueryModel();if(e.notNull(l)){a.setDefinitionName(l.getString())}let p=i.getStructureByKey("Query");t.importAxesSettings(p,a);if(t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){let t=i.getStructureByKey("CurrencyTranslation");if(e.notNull(t)){let i=a.getCurrencyTranslationManager().getCurrencyTranslationDetails();i.setCurrencyTranslationName(t.getStringByKey("Name"));i.setCurrencyTranslationOperation(e.CurrencyTranslationOperation.lookup(t.getStringByKey("Operation")));i.setCurrencyTranslationTarget(t.getStringByKey("Target"))}let n=e.PrUtils.getListProperty(p,"AxesLayout");let r=e.PrUtils.getListSize(n,0);for(let t=0;t<r;t++){let i=e.PrUtils.getStructureElement(n,t);let r=e.AxisType.lookup(e.PrUtils.getStringValueProperty(i,"Axis",null));let o=a.getAxis(r);if(e.isNull(o)){continue}let l=e.PrUtils.getListProperty(i,"OrderedDimensionNames");if(e.isNull(l)){continue}let p=e.XList.create();for(let t=0;t<e.PrUtils.getListSize(l,0);t++){let i=e.PrUtils.getStringElement(l,t);if(e.isNull(i)){continue}p.add(i.getString())}o.reOrderDimensions(p)}}return a};e.QInARepoSortLegacy=function(){};e.QInARepoSortLegacy.prototype=new e.QInAComponentWithList;e.QInARepoSortLegacy.prototype._ff_c="QInARepoSortLegacy";e.QInARepoSortLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoSortLegacy.prototype.getComponentType=function(){return e.OlapComponentType.SORT_MANAGER};e.QInARepoSortLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoSortLegacy.prototype.getTagName=function(){return"Sort"};e.QInARepoSortLegacy.prototype.importComponentWithList=function(t,i,n,r,o){let l=n;if(t.m_mode!==e.QModelFormat.INA_DATA_REINIT&&t.m_capabilities.supportsExtendedSort()){l.getSortingOperations().clear();if(e.notNull(i)){let t=l.getQueryModel();for(let n=0;n<i.size();n++){let r=i.getStructureAt(n);let a=r.getStringByKey("SortType");let p=e.QInAConverter.lookupSortType(a);let s;if(p===e.SortType.FIELD){s=this.importFieldSorting(l,t,r)}else if(p===e.SortType.MEASURE){s=this.importMeasureSorting(l,t,r)}else if(p===e.SortType.DATA_CELL_VALUE||p===e.SortType.COMPLEX){s=this.importPathSorting(o,l,t,r,p)}else{s=this.importDimensionSorting(l,t,r,p)}if(e.notNull(s)){this.importGenericSorting(t,r,s)}}}}return l};e.QInARepoSortLegacy.prototype.importCustomSortDetails=function(t,i){let n=i.getListByKey("CustomSort");if(!e.PrUtils.isListEmpty(n)){let r=e.PrUtils.asListOfString(n);t.setCustomSort(r);let o=e.CustomSortPosition.lookup(i.getStringByKey("CustomSortPosition"));t.setCustomSortPosition(o)}};e.QInARepoSortLegacy.prototype.importDimensionSorting=function(t,i,n,r){let o=i.getDimensionByNameFromExistingMetadata(n.getStringByKey("Dimension"));if(e.isNull(o)||o.isUniversalDisplayHierarchyDimension()){return null}let l=t.getDimensionSorting(o,true);if(r===e.SortType.FILTER){l.setSortByFilter()}else if(r===e.SortType.MEMBER_KEY){l.setSortByKey();this.importCustomSortDetails(l,n)}else if(r===e.SortType.MEMBER_TEXT){l.setSortByText()}else if(r===e.SortType.HIERARCHY){l.setSortByHierarchy()}return l};e.QInARepoSortLegacy.prototype.importFieldSorting=function(t,i,n){let r=n.getStringByKey("FieldName");let o=null;if(e.notNull(r)){let n=i.getFieldByName(r);if(e.notNull(n)){o=t.getFieldSorting(n,true)}}return o};e.QInARepoSortLegacy.prototype.importGenericSorting=function(t,i,n){let r=i.getStringByKey("Direction");if(e.notNull(r)){let t=e.QInAConverter.lookupSortDirection2(r);if(e.notNull(t)){n.setDirection(t)}}if(n.supportsPreserveGrouping()&&n.supportsBreakGrouping()){n.setPreserveGrouping(i.getBooleanByKeyExt("PreserveGrouping",false))}if(t.getModelCapabilities().supportsLocaleSorting()){let t=i.getStructureByKey("Collator");if(e.notNull(t)){n.setIsCaseSensitive(t.getBooleanByKeyExt("CaseSensitive",false));n.setLocale(t.getStringByKeyExt("Locale",null))}}};e.QInARepoSortLegacy.prototype.importMeasureSorting=function(t,i,n){let r=n.getStringByKey("MeasureName");let o=null;if(e.notNull(r)){let l=i.getMeasureDimension();let a=l.getStructureMember(r);if(e.notNull(a)){o=t.getMeasureSorting(a,true)}let p=n.getStringByKey("StructureName");let s=i.getNonMeasureDimension();if(e.notNull(p)&&e.notNull(s)&&e.notNull(o)){o.setSecondaryMeasure(s.getStructureMember(p))}}return o};e.QInARepoSortLegacy.prototype.importPathSorting=function(t,i,n,r,o){let l=r.getListByKey("SortTuple");if(l.isEmpty()){return null}let a=e.XList.create();for(let i=0;i<l.size();i++){let r=l.getStructureAt(i);let o=r.getStringByKey("FieldName");let p=r.getStringByKey("Value");if(e.notNull(o)&&e.notNull(p)){let i=n.getFieldByName(o);if(e.isNull(i)){return null}let l=r.getStringByKey("Hierarchy");a.add(e.QSelectValue._createDimensionElement2(t,i,l,p))}else{return null}}if(o===e.SortType.DATA_CELL_VALUE){return i.getDataCellSorting(a,true)}return i.getComplexSorting(a,true)};e.QInARepoVarDimMemberLegacy=function(){};e.QInARepoVarDimMemberLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoVarDimMemberLegacy.prototype._ff_c="QInARepoVarDimMemberLegacy";e.QInARepoVarDimMemberLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoVarDimMemberLegacy.prototype.getComponentType=function(){return e.VariableType.DIMENSION_MEMBER_VARIABLE};e.QInARepoVarDimMemberLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoVarDimMemberLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;let a=i.getStructureByKey("Values");if(e.notNull(a)){let i=e.QFactory.createFilterExpression(l,l);let n=t.importFilterExpression(i,a,l,o);l.setFilter(n)}else if(l.getVariableType()===e.VariableType.HIERARCHY_NODE_VARIABLE&&l.hasMemberFilter()&&l.getDimension().getKeyField()!==l.getMemberFilter().getField()){l.setDimension(l.getDimension())}return l};e.QInARepoVarOptionListLegacy=function(){};e.QInARepoVarOptionListLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoVarOptionListLegacy.prototype._ff_c="QInARepoVarOptionListLegacy";e.QInARepoVarOptionListLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoVarOptionListLegacy.prototype.getComponentType=function(){return e.VariableType.OPTION_LIST_VARIABLE};e.QInARepoVarOptionListLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoVarOptionListLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;let a=i.getListByKey("OptionValues");if(e.notNull(a)){let e;if(l.supportsMultipleValues()){l.clear();let t=a.size();for(let i=0;i<t;i++){e=a.getStringAt(i);l.addString(e)}}else if(a.size()===1){e=a.getStringAt(0);l.setString(e)}}return l};e.QInARepoVarSimpleTypeLegacy=function(){};e.QInARepoVarSimpleTypeLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoVarSimpleTypeLegacy.prototype._ff_c="QInARepoVarSimpleTypeLegacy";e.QInARepoVarSimpleTypeLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoVarSimpleTypeLegacy.prototype.getComponentType=function(){return e.VariableType.SIMPLE_TYPE_VARIABLE};e.QInARepoVarSimpleTypeLegacy.prototype.getFirstValueAsString=function(t){let i=t.get(0);if(e.notNull(i)&&i.isString()){return i.getString()}return null};e.QInARepoVarSimpleTypeLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoVarSimpleTypeLegacy.prototype.importBooleanValues=function(t,i){let n=t.getListByKey("SimpleStringValues");if(e.notNull(n)){let t=n.size();if(i.supportsMultipleValues()){for(let e=0;e<t;e++){i.addBoolean(n.getBooleanAt(e))}}else if(t===1){let t=n.get(0);if(e.notNull(t)&&t.isBoolean()){i.setBoolean(t.asBoolean().getBoolean())}}}};e.QInARepoVarSimpleTypeLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;l.clear();let a=l.getValueType();if(a.isNumber()){this.importNumericValues(t,i,l,a)}else if(a.isString()){this.importStringValues(i,l)}else if(a===e.XValueType.DATE){this.importDateValues(t,i,l)}else if(a===e.XValueType.TIME){this.importTimeValues(t,i,l)}else if(a===e.XValueType.DATE_TIME){this.importDateTimeValues(t,i,l)}else if(a===e.XValueType.BOOLEAN){this.importBooleanValues(i,l)}return null};e.QInARepoVarSimpleTypeLegacy.prototype.importDateTimeValues=function(t,i,n){let r=i.getListByKey("SimpleStringValues");if(e.notNull(r)){let i=r.size();if(n.supportsMultipleValues()){for(let o=0;o<i;o++){let i=r.getStringAt(o);if(e.XStringUtils.isNotNullAndNotEmpty(i)){n.addDateTime(e.XDateTime.createDateTimeFromStringWithFlag(i,t.m_capabilities.supportsSapDate()))}}}else if(i===1){let i=this.getFirstValueAsString(r);if(e.XStringUtils.isNotNullAndNotEmpty(i)){n.setDateTime(e.XDateTime.createDateTimeFromStringWithFlag(i,t.m_capabilities.supportsSapDate()))}}}};e.QInARepoVarSimpleTypeLegacy.prototype.importDateValues=function(t,i,n){let r=i.getListByKey("SimpleStringValues");if(e.notNull(r)){let t=r.size();if(n.supportsMultipleValues()){for(let i=0;i<t;i++){let t=r.getStringAt(i);if(e.XStringUtils.isNotNullAndNotEmpty(t)){n.addDate(e.QInARepoUtils.createDate(t))}}}else if(t===1){let t=this.getFirstValueAsString(r);if(e.XStringUtils.isNotNullAndNotEmpty(t)){n.setDate(e.QInARepoUtils.createDate(t))}}}};e.QInARepoVarSimpleTypeLegacy.prototype.importNumericString=function(t,i,n){if(i===e.XValueType.INTEGER){t.addInteger(e.XInteger.convertFromString(n))}else if(i===e.XValueType.DOUBLE||i===e.XValueType.DECIMAL_FLOAT){t.addDouble(e.XDouble.convertFromString(n))}else if(i===e.XValueType.LONG){t.addLong(e.XLong.convertFromString(n))}};e.QInARepoVarSimpleTypeLegacy.prototype.importNumericValues=function(t,i,n,r){let o=i.getListByKey("SimpleNumericValues");if(e.notNull(o)){let i=o.size();if(n.supportsMultipleValues()){for(let l=0;l<i;l++){let i=o.get(l);if(t.m_capabilities.supportsNumberAsString()&&e.notNull(i)&&i.getType()===e.PrElementType.STRING){this.importNumericString(n,r,o.getStringAt(l));continue}if(r===e.XValueType.INTEGER){let e=o.getIntegerAt(l);n.addInteger(e)}else if(r===e.XValueType.DOUBLE||r===e.XValueType.DECIMAL_FLOAT){let e=o.getDoubleAt(l);n.addDouble(e)}else if(r===e.XValueType.LONG){let e=o.getLongAt(l);n.addLong(e)}}}else if(i===1){let t=o.get(0);if(e.notNull(t)&&t.isNumeric()){if(r===e.XValueType.INTEGER){n.setInteger(o.getIntegerAt(0))}else if(r===e.XValueType.DOUBLE){n.setDouble(o.getDoubleAt(0))}else if(r===e.XValueType.DECIMAL_FLOAT){n.setDecFloat(e.XDecFloatByDouble.create(o.getDoubleAt(0)))}else if(r===e.XValueType.LONG){n.setLong(o.getLongAt(0))}}}}};e.QInARepoVarSimpleTypeLegacy.prototype.importStringValues=function(t,i){let n=t.getListByKey("SimpleStringValues");if(e.notNull(n)){let t=n.size();if(i.supportsMultipleValues()){for(let e=0;e<t;e++){i.addString(n.getStringAt(e))}}else if(t===1){let t=n.get(0);if(e.notNull(t)&&t.isString()){i.setString(t.getString())}}}};e.QInARepoVarSimpleTypeLegacy.prototype.importTimeValues=function(t,i,n){let r=i.getListByKey("SimpleStringValues");if(e.notNull(r)){let i=r.size();if(n.supportsMultipleValues()){for(let o=0;o<i;o++){let i=r.getStringAt(o);if(e.XStringUtils.isNotNullAndNotEmpty(i)){n.addTime(e.XTime.createTimeFromStringWithFlag(i,t.m_capabilities.supportsSapDate()))}}}else if(i===1){let i=this.getFirstValueAsString(r);if(e.XStringUtils.isNotNullAndNotEmpty(i)){n.setTime(e.XTime.createTimeFromStringWithFlag(i,t.m_capabilities.supportsSapDate()))}}}};e.QInARepoVariableContainerLegacy=function(){};e.QInARepoVariableContainerLegacy.prototype=new e.QInAComponentWithList;e.QInARepoVariableContainerLegacy.prototype._ff_c="QInARepoVariableContainerLegacy";e.QInARepoVariableContainerLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoVariableContainerLegacy.prototype.getComponentType=function(){return e.OlapComponentType.VARIABLE_CONTAINER};e.QInARepoVariableContainerLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoVariableContainerLegacy.prototype.getTagName=function(){return"Variables"};e.QInARepoVariableContainerLegacy.prototype.importComponentWithList=function(e,t,i,n,r){let o=i;e.importVariableList(t,o);return i};e.QInARepoVariablesListLegacy=function(){};e.QInARepoVariablesListLegacy.prototype=new e.QInAComponentWithList;e.QInARepoVariablesListLegacy.prototype._ff_c="QInARepoVariablesListLegacy";e.QInARepoVariablesListLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoVariablesListLegacy.prototype.getComponentType=function(){return e.OlapComponentType.VARIABLE_LIST};e.QInARepoVariablesListLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoVariablesListLegacy.prototype.importComponentWithList=function(t,i,n,r,o){let l=n;if(e.notNull(i)){let n=i.size();for(let r=0;r<n;r++){let n=i.getStructureAt(r);let a=n.getStringByKey("Name");let p=l.getVariableBaseByName(a);if(e.notNull(p)){let i=p.getVariableType();if(i.isTypeOf(e.VariableType.SIMPLE_TYPE_VARIABLE)){t.importSimpleTypeVariable(n,p,o)}else if(i.isTypeOf(e.VariableType.DIMENSION_MEMBER_VARIABLE)){t.importDimensionMemberVariable(n,p,o)}else if(i.isTypeOf(e.VariableType.OPTION_LIST_VARIABLE)){t.importOptionListVariable(n,p,o)}else{t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate5("The variable '",a,"' of variable type '",i.getName(),"' was not imported correctly"))}}else{t.addWarning(e.ErrorCodes.ET_ELEMENT_NOT_FOUND,e.XStringUtils.concatenate3("The variable '",a,"' was not found"))}}}return n};e.InARepoMappingDimension=function(){};e.InARepoMappingDimension.prototype=new e.InARepoMappingElement;e.InARepoMappingDimension.prototype._ff_c="InARepoMappingDimension";e.InARepoMappingDimension.createDimensionMapping=function(t,i,n){let r=new e.InARepoMappingDimension;r.setupElement(t,i,n,null);r.addIgnoredKey("HierarchyName");r.addIgnoredKey("OrderedStructureMemberNames");return r};e.InARepoMappingDimension.prototype.apply=function(t,i,n){let r=e.InARepoMappingElement.prototype.apply.call(this,t,i,n);if(e.isNull(r)&&!n.getType().isTypeOf(e.InARepoMapperContextType.AXES_SETTINGS)&&!this.isDimensionRef(t)){let t=this.getSourceValue();if(e.XString.startsWith(i,e.XStringUtils.concatenate2(t,"."))){r=e.XString.replace(i,e.XStringUtils.concatenate2(t,"."),e.XStringUtils.concatenate2(this.getTargetValue(),"."))}else if(e.XString.isEqual(i,e.XStringUtils.concatenate5("[",t,"].[",t,"]"))){r=e.XStringUtils.concatenate5("[",this.getTargetValue(),"].[",this.getTargetValue(),"]")}else if(e.XString.startsWith(i,e.XStringUtils.concatenate3("[",t,"]."))){r=e.XString.replace(i,e.XStringUtils.concatenate3("[",t,"]."),e.XStringUtils.concatenate3("[",this.getTargetValue(),"]."))}if(e.notNull(r)&&e.XPattern.matches(r,e.XStringUtils.concatenate5("[",this.getTargetValue(),"].[*].[",t,".*].*"))){r=e.XString.replace(r,e.XStringUtils.concatenate3("[",t,"."),e.XStringUtils.concatenate3("[",this.getTargetValue(),"."))}}return r};e.InARepoMappingDimension.prototype.isApplicable=function(t,i){let n=i.getType();if(this.isIgnored(t)||n.isTypeOf(e.InARepoMapperContextType.DIMENSION_HIERARCHY)||n.isTypeOf(e.InARepoMapperContextType.RESULT_STRUCTURE)){return false}return!n.isTypeOf(e.InARepoMapperContextType.DIMENSION)||e.XString.isEqual(i.getValue(),this.getSourceValue())||n.isTypeOf(e.InARepoMapperContextType.VARIANCE_MEMBER)||this.isDimensionRef(t)};e.InARepoMappingField=function(){};e.InARepoMappingField.prototype=new e.InARepoMappingElement;e.InARepoMappingField.prototype._ff_c="InARepoMappingField";e.InARepoMappingField.createFieldMapping=function(t,i,n,r){let o=new e.InARepoMappingField;o.setupElement(t,i,n,r);o.addIgnoredKey("HierarchyName");o.addIgnoredKey("OrderedStructureMemberNames");return o};e.InARepoMappingField.prototype.isApplicable=function(t,i){if(!e.InARepoMappingElement.prototype.isApplicable.call(this,t,i)||i.getType().isTypeOf(e.InARepoMapperContextType.CONDITION)||i.getType().isTypeOf(e.InARepoMapperContextType.AXES_SETTINGS)){return false}return!i.getType().isTypeOf(e.InARepoMapperContextType.DIMENSION)||this.getContext()===null||e.XString.isEqual(i.getValue(),this.getContext())};e.InARepoMappingHierarchy=function(){};e.InARepoMappingHierarchy.prototype=new e.InARepoMappingElement;e.InARepoMappingHierarchy.prototype._ff_c="InARepoMappingHierarchy";e.InARepoMappingHierarchy.createHierarchyMapping=function(t,i,n,r){let o=new e.InARepoMappingHierarchy;o.setupElement(t,i,n,r);o.addIgnoredKey("OrderedStructureMemberNames");o.addIgnoredKey("DimensionNames");return o};e.InARepoMappingHierarchy.prototype.apply=function(t,i,n){let r=e.InARepoMappingElement.prototype.apply.call(this,t,i,n);if(e.isNull(r)){if(e.XPattern.matches(i,e.XStringUtils.concatenate3("[*].[",this.getSourceValue(),"].*"))){r=e.XString.replace(i,e.XStringUtils.concatenate3(".[",this.getSourceValue(),"]."),e.XStringUtils.concatenate3(".[",this.getTargetValue(),"]."))}else if(this.getContext()!==null&&e.XPattern.matches(i,e.XStringUtils.concatenate4(this.getContext(),".",this.getSourceValue(),".*"))){r=e.XString.replace(i,e.XStringUtils.concatenate3(".",this.getSourceValue(),"."),e.XStringUtils.concatenate3(".",this.getTargetValue(),"."))}}return r};e.InARepoMappingHierarchy.prototype.isApplicable=function(t,i){if(!e.InARepoMappingElement.prototype.isApplicable.call(this,t,i)||i.getType().isTypeOf(e.InARepoMapperContextType.AXES_SETTINGS)){return false}let n=this.getContext();if(e.notNull(n)){if(i.getType().isTypeOf(e.InARepoMapperContextType.DIMENSION_HIERARCHY)&&e.XString.isEqual(i.getValue(),n)){return true}if(i.getType().isTypeOf(e.InARepoMapperContextType.DIMENSION)){return false}if(i.getType().isTypeOf(e.InARepoMapperContextType.FILTER)&&!e.XString.startsWith(i.getValue(),e.XStringUtils.concatenate3("[",n,"]."))&&!e.XString.startsWith(i.getValue(),e.XStringUtils.concatenate2(n,"."))){return false}}return true};e.InARepoMappingHierarchyLevel=function(){};e.InARepoMappingHierarchyLevel.prototype=new e.InARepoMappingElement;e.InARepoMappingHierarchyLevel.prototype._ff_c="InARepoMappingHierarchyLevel";e.InARepoMappingHierarchyLevel.createHierarchyLevelMapping=function(t,i,n,r,o){let l=new e.InARepoMappingHierarchyLevel;l.setupElement(t,i,n,r);l.m_hierarchyContext=o;l.addIgnoredKey("HierarchyName");l.addIgnoredKey("OrderedStructureMemberNames");return l};e.InARepoMappingHierarchyLevel.prototype.m_hierarchyContext=null;e.InARepoMappingHierarchyLevel.prototype.apply=function(t,i,n){let r=e.XStringUtils.concatenate5("[",this.getContext(),"].[",this.m_hierarchyContext,"]");if(e.XPattern.matches(i,e.XStringUtils.concatenate4(r,".[",this.getSourceValue(),"].*"))){return e.XString.replace(i,e.XStringUtils.concatenate3("[",this.getSourceValue(),"]"),e.XStringUtils.concatenate3("[",this.getTargetValue(),"]"))}return null};e.InARepoMappingHierarchyLevel.prototype.isApplicable=function(t,i){return e.InARepoMappingElement.prototype.isApplicable.call(this,t,i)&&this.getContext()!==null&&e.notNull(this.m_hierarchyContext)};e.InARepoMappingHierarchyLevel.prototype.releaseObject=function(){e.InARepoMappingElement.prototype.releaseObject.call(this);this.m_hierarchyContext=null};e.InARepoMappingMeasure=function(){};e.InARepoMappingMeasure.prototype=new e.InARepoMappingElement;e.InARepoMappingMeasure.prototype._ff_c="InARepoMappingMeasure";e.InARepoMappingMeasure.createMeasureMapping=function(t,i,n,r){let o=new e.InARepoMappingMeasure;o.setupElement(t,i,n,r);o.addIgnoredKey("FieldName");o.addIgnoredKey("HierarchyName");return o};e.InARepoMappingMeasure.prototype.isApplicable=function(t,i){if(i.getType().isTypeOf(e.InARepoMapperContextType.DIMENSION)){if(!i.getStructure().containsKey("MembersRepo")&&!i.getType().isTypeOf(e.InARepoMapperContextType.VARIANCE_MEMBER)){return false}if(this.getContext()!==null&&!e.XString.isEqual(i.getValue(),this.getContext())){return false}}return e.InARepoMappingElement.prototype.isApplicable.call(this,t,i)};e.QInAComponentContainer=function(){};e.QInAComponentContainer.prototype=new e.DfNameObject;e.QInAComponentContainer.prototype._ff_c="QInAComponentContainer";e.QInAComponentContainer.create=function(t){let i=new e.QInAComponentContainer;i._setupInternal(t.getName());i.m_type=t;i.m_components=e.XList.create();return i};e.QInAComponentContainer.prototype.m_components=null;e.QInAComponentContainer.prototype.m_type=null;e.QInAComponentContainer.prototype.add=function(t){e.XBooleanUtils.checkFalse(this.m_components.contains(t),"Container already exists");this.m_components.add(t)};e.QInAComponentContainer.prototype.get=function(t){let i=this.m_components.size();let n=null;if(i>1){for(let e=0;e<i;e++){let i=this.m_components.get(e);if(i.isMatching(t)){n=i;break}}}if(e.isNull(n)&&i>0){n=this.m_components.get(0)}return n};e.QInAComponentContainer.prototype.getComponentType=function(){return this.m_type};e.QInAComponentContainer.prototype.hasElements=function(){return this.m_components.hasElements()};e.QInAComponentContainer.prototype.isEmpty=function(){return this.m_components.isEmpty()};e.QInAComponentContainer.prototype.size=function(){return this.m_components.size()};e.QInARepoAttribute=function(){};e.QInARepoAttribute.prototype=new e.QInARepository;e.QInARepoAttribute.prototype._ff_c="QInARepoAttribute";e.QInARepoAttribute.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());let l=n.putNewList("ResultSetFields");let a=o.getResultSetFields();let p=a.size();for(let e=0;e<p;e++){l.addString(a.get(e).getName())}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoAttribute.prototype.getComponentType=function(){return e.OlapComponentType.ATTRIBUTE};e.QInARepoAttribute.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=r;let a=i.getStringByKey("Name");let p=l.getAttributeByName(a);if(e.notNull(p)){let t=i.getListByKey("ResultSetFields");if(e.notNull(t)){let i=p.getResultSetFields();i.clear();let n=t.size();for(let r=0;r<n;r++){let n=p.getFieldByName(t.getStringAt(r));if(e.notNull(n)){i.add(n)}}}}return p};e.QInARepoAxesSettings=function(){};e.QInARepoAxesSettings.prototype=new e.QInARepository;e.QInARepoAxesSettings.prototype._ff_c="QInARepoAxesSettings";e.QInARepoAxesSettings.prototype.exportComponentWithList=function(t,i,n){let r=i;let o=e.PrFactory.createList();let l=t.exportAxis(r.getColumnsAxis(),null);o.add(l);let a=t.exportAxis(r.getRowsAxis(),null);o.add(a);return o};e.QInARepoAxesSettings.prototype.exportComponentWithStructure=function(t,i,n,r){let o=this.exportComponentWithList(t,i,r);n.put("Elements",o);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoAxesSettings.prototype.getComponentType=function(){return e.OlapComponentType.AXES_SETTINGS};e.QInARepoAxesSettings.prototype.getTagName=function(){return"AxesRepo"};e.QInARepoAxesSettings.prototype.importComponentWithList=function(t,i,n,r,o){if(e.notNull(i)){let n=o.getQueryModel();if(t.m_capabilities.supportsZeroSuppression()||t.m_capabilities.supportsNullZeroSuppression()){let t=e.AxisType.getAll();let i=t.size();for(let r=0;r<i;r++){let i=n.getAxisBase(t.get(r));if(e.notNull(i)){i.setSupportsZeroSuppression(true)}}}let r=i.size();for(let e=0;e<r;e++){t.importAxis(i.getStructureAt(e),null,o)}}return null};e.QInARepoAxesSettings.prototype.importComponentWithStructure=function(t,i,n,r,o){if(e.notNull(i)){let e=i.getListByKey("Elements");this.importComponentWithList(t,e,n,r,o)}return n};e.QInARepoAxis=function(){};e.QInARepoAxis.prototype=new e.QInARepository;e.QInARepoAxis.prototype._ff_c="QInARepoAxis";e.QInARepoAxis.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Axis",e.QInAConverter.lookupAxisTypeInA(o.getType()));n.putInteger("Type",e.QInAConverter.lookupAxisTypeInAInt(o.getType()));let l=o.getZeroSuppressionType();n.putInteger("ZeroSuppressionType",e.QInAConverter.lookupSuppressionTypeInA(l));let a=n.putNewList("Layout");for(let t=0;t<o.size();t++){let i=o.getDimensionAt(t);if(!i.getTagging().contains(e.QTransientConstants.TAG_TRANSIENT_ROWS_AXIS)&&!i.getTagging().contains(e.QTransientConstants.SECONDARY_MEASURE_DIMENSION_ON_COLUMN)){a.addString(i.getName())}}t.exportTotals(o.getResultStructureController(),n);let p=o.getLowerLevelNodeAlignment();if(e.notNull(p)){n.putString("LowerLevelNodeAlignment",e.QInAConverter.lookupLowerLevelNodeAlignmentInA(p))}if(o.isReadModeAndSuppressionSynchronized()){n.putBoolean("ReadmodeAndSuppressionSynchronized",true)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoAxis.prototype.getComponentType=function(){return e.OlapComponentType.AXIS};e.QInARepoAxis.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=o.getQueryModel();let a;let p=i.getStringByKey("Axis");if(e.notNull(p)){a=e.QInAConverter.lookupAxisType(p)}else{let t=i.getIntegerByKey("Type");a=e.QInAConverter.lookupAxisTypeInt(t)}let s=l.getAxisBase(a);if(e.notNull(s)){if(s.supportsZeroSuppression()){let t=i.getIntegerByKeyExt("ZeroSuppressionType",0);let n=e.QInAConverter.lookupSuppressionType(t);s.setZeroSuppressionType(n)}let n=i.getListByKey("Layout");if(e.notNull(n)){s.clear();let e=l.getDimensionManagerBase();for(let t=0;t<n.size();t++){let i=n.getStringAt(t);let r=e.getDimensionByNameInternal(i);s.addForRepoImport(r)}}t.importTotals(i,s.getResultStructureControllerBase(),o);if(i.containsKey("LowerLevelNodeAlignment")){s.setLowerLevelNodeAlignment(e.QInAConverter.lookupLowerLevelNodeAlignment(i.getStringByKey("LowerLevelNodeAlignment")))}s.setReadModeAndSuppressionSynchronized(i.getBooleanByKeyExt("ReadmodeAndSuppressionSynchronized",false))}return s};e.QInARepoBlendableQueryManager=function(){};e.QInARepoBlendableQueryManager.prototype=new e.QInARepository;e.QInARepoBlendableQueryManager.prototype._ff_c="QInARepoBlendableQueryManager";e.QInARepoBlendableQueryManager.exportBlendedDimensionAxis=function(e,t,i){let n=t.putNewList(i.getName());let r=e.getBlendedDimensionsByAxis(i).getIterator();while(r.hasNext()){let e=r.next();let t=n.addNewStructure();t.putString("DatasetId",e.getDatasetId());t.putString("DimensionName",e.getDimensionName());if(e.getInitialDrillLevel()!==null){t.putInteger("InitialDrillLevel",e.getInitialDrillLevel().getInteger())}}};e.QInARepoBlendableQueryManager.exportDimensionSorts=function(t,i){let n=t.putNewList("BlendableDimensionSorts");let r=i.getIterator();while(r.hasNext()){let t=r.next();let i=e.PrStructure.create();i.putString("FieldName",t.getFieldName());i.putString("DatasetId",t.getDatasetId());i.putInteger("SortDirection",e.QInAConverter.lookupSortDirectionInA(t.getSortDirection()));i.putBoolean("PreserveGrouping",t.getPreserveGrouping());i.putString("Locale",t.getContextLanguage());let o=t.getCustomSortDefinition();if(e.notNull(o)){let t=i.putNewStructure("CustomSort");t.putString("Name",o.getName());t.putString("DatasetId",o.getDatasetId());t.putString("ID",o.getDimensionId());t.putString("HierarchyId",o.getHierarchyId());t.putString("Id",o.getId());let n=t.putNewList("SortFromStart");e.XCollectionUtils.forEach(o.getBlendedSortFromStart(),e=>{let t=n.addNewStructure();t.putString("Name",e.getName());t.putString("DatasetId",e.getDatasetId())});let r=t.putNewList("SortFromEnd");e.XCollectionUtils.forEach(o.getBlendedSortFromEnd(),e=>{let t=r.addNewStructure();t.putString("Name",e.getName());t.putString("DatasetId",e.getDatasetId())});let l=t.putNewList("SortMovedNodes");e.XCollectionUtils.forEach(o.getBlendedMovedNodes(),e=>{let t=l.addNewStructure();t.putString("Name",e.getName());t.putString("DatasetId",e.getDatasetId())})}i.putString("AutoLimiterSort",t.getAutoLimiterSort());i.putBoolean("IsDisplayedAsId",t.isDisplayedAsId());i.putString("ID",t.getDimensionId());n.add(i)}};e.QInARepoBlendableQueryManager.exportDrillOperation=function(t,i){i.putString("DimensionName",t.getDimensionName());i.putString("DatasetId",t.getDatasetId());let n=e.QInAConverter.lookupDrillStateInA(t.getDrillState());i.putString("DrillState",n);let r=i.putNewList("DrillPathElements");let o=t.getBlendedDrillPathElementInfos().getIterator();while(o.hasNext()){let e=o.next();let t=r.addNewStructure();t.putString("DatasetId",e.getDatasetId());t.putString("DimensionName",e.getDimensionName());t.putString("Member",e.getDrillMember())}};e.QInARepoBlendableQueryManager.exportDrillOperations=function(t,i){let n=i.getBlendedDrillOperations().getIterator();let r=t.putNewList("DrillOperations");while(n.hasNext()){let t=n.next();let i=r.addNewStructure();e.QInARepoBlendableQueryManager.exportDrillOperation(t,i)}let o=i.getBlendedZoomDrills().getIterator();let l=t.putNewList("ZoomDrills");while(o.hasNext()){let t=o.next();let i=l.addNewStructure();i.putBoolean("IsHideRoots",t.isHideRoots());e.QInARepoBlendableQueryManager.exportDrillOperation(t,i)}};e.QInARepoBlendableQueryManager.exportMeasureMemberSort=function(t,i,n){let r=t.putNewStructure("BlendableMeasureMemberSort");r.putString("MeasureMemberName",i.getMeasureMemberName());r.putString("DatasetId",i.getDatasetId());r.putBoolean("PrimaryBlendableBlended",i.isPrimaryMeasureBlended());r.putInteger("SortDirection",e.QInAConverter.lookupSortDirectionInA(i.getSortDirection()));r.putString("SecondaryMeasureName",i.getSecondaryMeasureName());r.putString("SecondaryDatasetId",i.getSecondaryDatasetId());r.putBoolean("SecondaryMeasureBlended",i.isSecondaryMeasureBlended());r.putString("VersionElementId",i.getVersionElementId());let o=i.getVersionDimension();if(e.notNull(o)){let e=r.putNewStructure("VersionDimension");e.putString("DatasetId",o.getQueryModel().getDatasetId());e.putString("Name",o.getName())}r.putBoolean("PreserveGrouping",i.isPreserveGrouping());let l=i.getSecondaryVersionDimensionMembers();if(l.size()>0){let e=r.putNewList("SecondaryVersionDimension");for(let t=0;t<n.size();t++){let i=n.get(t).getQueryModel().getDatasetId();let r=l.getByKey(i);let o=e.addNewStructure();o.putString("DatasetId",i);o.putString("VersionElementId",r)}}let a=i.getRelatedElementsList();if(a.size()>0){let e=r.putNewList("RelatedElementsSortList");for(let t=0;t<a.size();t++){let i=a.get(t).getDatasetId();let n=a.get(t).getDimensionId();let r=a.get(t).getMemberId();let o=e.addNewStructure();o.putString("RelatedElementDataset",i);o.putString("RelatedElementDimension",n);o.putString("RelatedElementDimensionMember",r)}}};e.QInARepoBlendableQueryManager.exportQueryModelLinkSettingStructureList=function(t,i,n,r){let o=t.addNewStructure();e.QInARepoBlendableQueryManager.exportQueryModelLinkSettings(i,n,r,o)};e.QInARepoBlendableQueryManager.exportQueryModelLinkSettings=function(e,t,i,n){n.putString("FirstModelName",t);n.putString("SecondModelName",i);n.putString("LinkType",e.getLinkType(i).getName());n.putString("UnlinkedDimensionJoinType",e.getUnlinkedDimensionJoinType(i).getName());n.putBoolean("SkipFilterValidation",e.skipFilterValidationByDatasetId(i));let r=n.putNewList("ActiveDimensionLinks");let o=e.getActivePrimaryLinkDimensionNamesSettings(i).getIterator();while(o.hasNext()){let e=o.next();r.addString(e)}};e.QInARepoBlendableQueryManager.exportRankSettings=function(t,i){t.putString("MeasureMemberName",i.getMeasure());t.putString("MeasureMemberDatasetId",i.getPrimaryMeasureDatasetId());t.putBoolean("PrimaryBlendableBlended",i.isBlendedPrimaryMeasure());t.putString("SecondaryMeasureName",i.getSecondaryMeasure());t.putString("SecondaryDatasetId",i.getSecondaryMeasureDatasetId());t.putBoolean("SecondaryMeasureBlended",i.isBlendedSecondaryMeasure());t.putInteger("MaxRows",i.getMaxRows());t.putBoolean("ClientSideRanking",i.isUseClientSideRanking());t.putBoolean("RankOnAllDimensions",i.isRankOnAllDimensions());t.putBoolean("IsApplyRankingsWithoutReset",i.isApplyRankingsWithoutReset());t.putBoolean("PreserveSort",i.isPreserveSort());t.putBoolean("BreakGroup",i.isBreakGrouping());let n=t.putNewList("Dimensions");let r=i.getAppliedDimensions();for(let e=0;e<r.size();e++){let t=r.get(e);let i=n.addNewStructure();i.putString("DatasetId",t.getQueryModel().getDatasetId());i.putString("Name",t.getName())}if(i.getComparisonOperator()!==null){t.putString("Comparison",i.getComparisonOperator().getName())}t.putString("VersionElementId",i.getVersionElementId());let o=i.getVersionDimension();if(e.notNull(o)){let e=t.putNewStructure("VersionDimension");e.putString("DatasetId",o.getQueryModel().getDatasetId());e.putString("Name",o.getName())}t.putBoolean("UseDefaultSort",i.useDefaultSort())};e.QInARepoBlendableQueryManager.exportRankSettingsList=function(t,i){let n=i.getRankSettings();let r=t.putNewList("RankSettings");for(let t=0;t<n.size();t++){e.QInARepoBlendableQueryManager.exportRankSettings(r.addNewStructure(),n.get(t))}};e.QInARepoBlendableQueryManager.exportSorts=function(t,i){let n=i.getBlendableDimensionSorts();let r=i.getPrimaryBlendableMeasureMemberSort();let o=i.getSecondaryQueryManagers();if(n.size()>0){e.QInARepoBlendableQueryManager.exportDimensionSorts(t,n)}if(e.notNull(r)){e.QInARepoBlendableQueryManager.exportMeasureMemberSort(t,r,o)}};e.QInARepoBlendableQueryManager.exportZeroSuppressionTypes=function(t,i){let n=i.getBlendingZeroSuppressionType(e.AxisType.ROWS);if(e.notNull(n)){t.putString("ZeroSuppressionTypeRows",n.getName())}let r=i.getBlendingZeroSuppressionType(e.AxisType.COLUMNS);if(e.notNull(r)){t.putString("ZeroSuppressionTypeColumns",r.getName())}};e.QInARepoBlendableQueryManager.importBlendedDimensionInfoAxis=function(t,i,n){let r=i.getListByKey(n.getName());if(e.notNull(r)){let e=r.getIterator();t.clearBlendedDimensionInfosByAxis(n);while(e.hasNext()){let i=e.next().asStructure();let r=t.addBlendedDimensionInfoToAxis(n,i.getStringByKey("DatasetId"),i.getStringByKey("DimensionName"));if(i.containsKey("InitialDrillLevel")){r.setInitialDrillLevel(i.getIntegerByKey("InitialDrillLevel"))}}}};e.QInARepoBlendableQueryManager.importCustomMemberList=function(t,i,n,r){let o=i.getListByKey(n);let l=o.getIterator();while(l.hasNext()){let i=l.next();let o=null;let a=null;if(i.isStructure()){let e=i.asStructure();o=e.getStringByKey("Name");a=e.getStringByKey("DatasetId")}else if(i.isString()){o=i.asString().getString();a=r}if(e.notNull(o)){switch(n){case"SortFromStart":t.addMemberToFromStartList(o,a);break;case"SortFromEnd":t.addMemberToFromEndList(o,a);break;case"SortMovedNodes":t.addMemberToMovedNodesList(o,a);break;default:}}}};e.QInARepoBlendableQueryManager.importCustomSort=function(t,i){if(e.isNull(i)){return}let n=i.getStringByKey("Name");let r=i.getStringByKey("DatasetId");let o=i.getStringByKey("ID");let l=i.getStringByKey("HierarchyId");let a=i.getStringByKey("Id");let p=t.createCustomSortDefinition(n,r,o,l,a);if(i.containsKey("SortFromStart")){e.QInARepoBlendableQueryManager.importCustomMemberList(p,i,"SortFromStart",r)}if(i.containsKey("SortFromEnd")){e.QInARepoBlendableQueryManager.importCustomMemberList(p,i,"SortFromEnd",r)}if(i.containsKey("SortMovedNodes")){e.QInARepoBlendableQueryManager.importCustomMemberList(p,i,"SortMovedNodes",r)}};e.QInARepoBlendableQueryManager.importDimensionSorts=function(t,i){let n=i.getIterator();while(n.hasNext()){let i=n.next().asStructure();let r=i.getStringByKey("FieldName");let o=i.getStringByKey("DatasetId");let l=e.QInAConverter.lookupSortDirection(i.getIntegerByKey("SortDirection"));let a=i.getBooleanByKey("PreserveGrouping");let p=i.getStringByKey("Locale");let s=i.getStructureByKey("CustomSort");let u=i.getStringByKey("AutoLimiterSort");let g=i.getBooleanByKey("IsDisplayedAsId");let y=i.getStringByKey("ID");let m=t.addBlendableDimensionSort(r,o,l,a,p);e.QInARepoBlendableQueryManager.importCustomSort(m,s);m.setAutoLimiterSort(u);m.setIsDisplayedAsId(g);m.setDimensionId(y)}};e.QInARepoBlendableQueryManager.importDrillOperation=function(t,i){i.setDrillState(e.QInAConverter.lookupDrillStateOp(t.getStringByKey("DrillState")));let n=t.getListByKey("DrillPathElements");if(e.notNull(n)){let e=n.getIterator();while(e.hasNext()){let t=e.next().asStructure();i.addBlendedDrillPathElementInfo(t.getStringByKey("DatasetId"),t.getStringByKey("DimensionName"),t.getStringByKey("Member"))}}};e.QInARepoBlendableQueryManager.importDrillOperations=function(t,i){let n=i.getListByKey("DrillOperations");t.clearBlendedDrillOperations();if(e.notNull(n)){let i=n.getIterator();while(i.hasNext()){let n=i.next().asStructure();let r=t.addNewBlendedDrillOperation(n.getStringByKey("DatasetId"),n.getStringByKey("DimensionName"));e.QInARepoBlendableQueryManager.importDrillOperation(n,r)}}let r=i.getListByKey("ZoomDrills");t.clearBlendedZoomDrills();if(e.notNull(r)){let i=r.getIterator();while(i.hasNext()){let n=i.next().asStructure();let r=t.addNewBlendedZoomDrill(n.getStringByKey("DatasetId"),n.getStringByKey("DimensionName"),n.getBooleanByKeyExt("IsHideRoots",false));e.QInARepoBlendableQueryManager.importDrillOperation(n,r)}}};e.QInARepoBlendableQueryManager.importMeasureMemberSort=function(t,i){let n=e.QFactory.createBlendableMeasureSort(t);n.setPrimaryMeasure(i.getStringByKey("MeasureMemberName"),i.getStringByKey("DatasetId"),i.getBooleanByKey("PrimaryBlendableBlended"));n.setSecondaryMeasure(i.getStringByKey("SecondaryMeasureName"),i.getStringByKey("SecondaryDatasetId"),i.getBooleanByKey("SecondaryMeasureBlended"));let r=e.QInAConverter.lookupSortDirection(i.getIntegerByKey("SortDirection"));n.setSortDirection(r);n.setPreserveGrouping(i.getBooleanByKey("PreserveGrouping"));n.setVersionElementId(i.getStringByKey("VersionElementId"));let o=i.getStructureByKey("VersionDimension");if(e.notNull(o)){let i=o.getStringByKey("DatasetId");let r=t.getQueryManagerByDatasetId(i);if(e.notNull(r)){let t=o.getStringByKey("Name");let i=r.getQueryModel().getDimensionByName(t);if(e.notNull(i)){n.setVersionDimension(i)}}}let l=i.getListByKey("SecondaryVersionDimension");if(e.notNull(l)){for(let e=0;e<l.size();e++){let t=l.get(e).asStructure();let i=t.getStringByKey("DatasetId");let r=t.getStringByKey("VersionElementId");n.addSecondaryVersionDimensionMember(i,r)}}let a=i.getListByKey("RelatedElementsSortList");if(e.notNull(a)){for(let e=0;e<a.size();e++){let t=a.getStructureAt(e).asStructure();let i=t.getStringByKey("RelatedElementDataset");let r=t.getStringByKey("RelatedElementDimension");let o=t.getStringByKey("RelatedElementDimensionMember");n.addRelatedElement(i,r,o)}}t.setBlendableMeasureMemberSort(n)};e.QInARepoBlendableQueryManager.importQueryModelLinkSettingStructure=function(t,i,n){i.setLinkType(n,e.BlendingLinkType.lookup(t.getStringByKey("LinkType")));i.setUnlinkedDimensionJoinType(n,e.UnlinkedDimensionJoinType.lookup(t.getStringByKey("UnlinkedDimensionJoinType")));i.setSkipFilterValidationByDatasetId(t.getBooleanByKey("SkipFilterValidation"),n);let r=t.getListByKey("ActiveDimensionLinks");if(e.notNull(r)){let e=r.getIterator();while(e.hasNext()){let t=e.next().asString().getString();if(i.getPrimaryQueryManager().getQueryModel().getDimensionByName(t)!==null){i.addActivePrimaryLinkDimensionName(n,t)}}}};e.QInARepoBlendableQueryManager.importRankSettings=function(t,i){let n=e.QFactory.createRankSettings();n.setMeasure(t.getStringByKey("MeasureMemberName"));n.setPrimaryDatasetId(t.getStringByKey("MeasureMemberDatasetId"));n.setIsBlendedPrimaryMeasure(t.getBooleanByKey("PrimaryBlendableBlended"));n.setSecondaryMeasure(t.getStringByKey("SecondaryMeasureName"));n.setSecondaryDatasetId(t.getStringByKey("SecondaryDatasetId"));n.setIsBlendedSecondaryMeasure(t.getBooleanByKey("SecondaryMeasureBlended"));n.setMaxRows(t.getIntegerByKey("MaxRows"));n.setUseClientSideRanking(t.getBooleanByKey("ClientSideRanking"));n.setIsRankOnAllDimensions(t.getBooleanByKey("RankOnAllDimensions"));n.setIsApplyRankingsWithoutReset(t.getBooleanByKey("IsApplyRankingsWithoutReset"));n.setPreserveSort(t.getBooleanByKey("PreserveSort"));n.setBreakGrouping(t.getBooleanByKeyExt("BreakGroup",true));let r=t.getListByKey("Dimensions");let o;let l;let a;let p;for(let t=0;t<r.size();t++){let s=r.get(t).asStructure();l=s.getStringByKey("DatasetId");a=i.getQueryManagerByDatasetId(l);if(e.notNull(a)){o=s.getStringByKey("Name");p=a.getQueryModel().getDimensionByName(o);if(e.notNull(p)){n.addAppliedDimension(p)}}}let s=t.getStringByKey("Comparison");n.setComparisonOperator(e.ConditionComparisonOperator.lookupName(s));n.setVersionElementId(t.getStringByKey("VersionElementId"));let u=t.getStructureByKey("VersionDimension");if(e.notNull(u)){l=u.getStringByKey("DatasetId");a=i.getQueryManagerByDatasetId(l);if(e.notNull(a)){o=u.getStringByKey("Name");p=a.getQueryModel().getDimensionByName(o);if(e.notNull(p)){n.setVersionDimension(p)}}}n.setUseDefaultSort(t.getBooleanByKey("UseDefaultSort"));i.addRankSettings(n)};e.QInARepoBlendableQueryManager.importRankSettingsList=function(t,i){let n=t.getListByKey("RankSettings");i.clearRankSettings();if(e.notNull(n)){for(let t=0;t<n.size();t++){e.QInARepoBlendableQueryManager.importRankSettings(n.getStructureAt(t),i)}}};e.QInARepoBlendableQueryManager.importSorts=function(t,i){let n=t.getListByKey("BlendableDimensionSorts");let r=t.getStructureByKey("BlendableMeasureMemberSort");i.clearBlendableDimensionSorts();i.clearPrimaryBlendableMemberMeasureSort();if(e.notNull(n)){e.QInARepoBlendableQueryManager.importDimensionSorts(i,n)}if(e.notNull(r)){e.QInARepoBlendableQueryManager.importMeasureMemberSort(i,r)}};e.QInARepoBlendableQueryManager.importZeroSuppressionTypes=function(t,i){let n=t.getStringByKey("ZeroSuppressionTypeRows");if(e.notNull(n)){i.setBlendingZeroSuppressionType(e.AxisType.ROWS,e.ZeroSuppressionType.lookup(n))}let r=t.getStringByKey("ZeroSuppressionTypeColumns");if(e.notNull(r)){i.setBlendingZeroSuppressionType(e.AxisType.COLUMNS,e.ZeroSuppressionType.lookup(r))}};e.QInARepoBlendableQueryManager.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;let l=o.getPrimaryQueryManager();let a=l.getQueryModel().getDatasetId();n.putString("Name",o.getName());let p=n.putNewStructure("PrimaryQueryManager");p.putString("Name",l.getName());p.putString("DatasetId",a);p.put("Query",l.getQueryModel().serializeToElement(t.getOriginalMode()));p.putBoolean("isAllMemberOrFsicEnabled",o.getAllMembersOrFsicEnabled(l.getQueryModel().getDatasetId()));n.putString("StorageName",o.getClientQueryObjectStorageName());let s=n.putNewList("QueryManagers");let u=n.putNewList("QueryModelLinkSettingsList");let g=o.getAllQueryModelLinkSettings().getIterator();while(g.hasNext()){let i=g.next();let n=i.getSecondDatasetId();let r=o.getQueryManagerByDatasetId(n);let l=s.addNewStructure();l.putString("DatasetId",n);l.putString("Name",r.getName());l.put("Query",r.getQueryModel().serializeToElement(t.getOriginalMode()));l.putBoolean("isAllMemberOrFsicEnabled",o.getAllMembersOrFsicEnabled(r.getQueryModel().getDatasetId()));e.QInARepoBlendableQueryManager.exportQueryModelLinkSettingStructureList(u,o,a,n)}let y=n.putNewList("PrimaryBlendedMeasures");let m=o.getPrimaryBlendedMeasures().getIterator();while(m.hasNext()){let e=m.next();t.exportComponent(e.getMemberType(),e,y.addNewStructure(),r)}let c=n.putNewStructure("DimensionOrder");e.QInARepoBlendableQueryManager.exportBlendedDimensionAxis(o,c,e.AxisType.ROWS);e.QInARepoBlendableQueryManager.exportBlendedDimensionAxis(o,c,e.AxisType.COLUMNS);e.QInARepoBlendableQueryManager.exportDrillOperations(n,o);e.QInARepoBlendableQueryManager.exportSorts(n,o);e.QInARepoBlendableQueryManager.exportRankSettingsList(n,o);let A=e.PrFactory.createList();let S=o.getFormulaExceptions().getIterator();while(S.hasNext()){let i=S.next();let n=e.PrFactory.createStructure();t.exportFormulaException(i,n);n.putString("DatasetId",i.getQueryModel().getDatasetId());A.add(n)}n.put("FormulaExceptions",A);n.putBoolean("BlendingRestrictionsEnabled",o.isBlendingRestrictionsEnabled());n.putBoolean("SupportsDrillOnBlendNodeOnly",o.supportsDrillOnBlendNodeOnly());n.putBoolean("FormulaExceptionResultHidden",o.isFormulaExceptionResultHidden());n.putBoolean("PreserveAttributeLayout",o.isPreserveAttributeLayout());n.putBoolean("SupportsConcurrentDimensionAndMeasureSorting",o.supportsConcurrentDimensionAndMeasureSorting());n.putBoolean("IncludesDisplayKeyInMeasureDimension",o.includesDisplayKeyInMeasureDimension());n.putBoolean("SupportsAccountSecondaryMeasureDimensionOnNoneAxis",o.supportsAccountSecondaryMeasureDimensionOnNoneAxis());n.putBoolean("IsDefaultOrder",o.isDefaultOrder());e.QInARepoBlendableQueryManager.exportZeroSuppressionTypes(n,o);return n};e.QInARepoBlendableQueryManager.prototype.getComponentType=function(){return e.OlapComponentType.BLENDABLE_QUERY_MANAGER};e.QInARepoBlendableQueryManager.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;let a=i.getStructureByKey("PrimaryQueryManager");let p=a.getStringByKey("DatasetId");let s=l.getPrimaryQueryManager();if(e.isNull(s)||!e.XString.isEqual(s.getQueryModel().getDatasetId(),p)){s=null;let t=l.getOlapEnv().getSharedQueryManager(p);if(e.notNull(t)){s=t.cloneQueryManagerExt(e.QueryCloneMode.CURRENT_STATE);l.setPrimaryQueryManager(s);s.setClientQueryObjectStorageName(l.getClientQueryObjectStorageName())}}if(e.notNull(s)){l.setAllMembersOrFsicEnabled(s.getQueryModel().getDatasetId(),a.getBooleanByKey("isAllMemberOrFsicEnabled"));s.getQueryModel().deserializeFromElementExt(t.getOriginalMode(),a.getStructureByKey("Query"))}let u=e.XHashSetOfString.create();let g=l.getSecondaryQueryManagers().getIterator();while(g.hasNext()){u.add(g.next().getQueryModel().getDatasetId())}l.clearQueryModelLinkSettings();let y=i.getListByKey("QueryManagers");let m=i.getListByKey("QueryModelLinkSettingsList");let c;let A;let S;let d;if(e.notNull(m)){let i=m.getIterator();while(i.hasNext()){A=i.next().asStructure();d=A.getStringByKey("SecondModelName");S=y.getIterator();while(S.hasNext()){c=S.next().asStructure();if(e.XString.isEqual(d,c.getStringByKey("DatasetId"))){this.importSecondaryModel(t,l,A,c,A.getStringByKey("SecondModelName"),c.getBooleanByKey("isAllMemberOrFsicEnabled"));u.removeElement(d);break}}}}else{let n=i.getStructureByKey("QueryModelLinkSettings");if(e.notNull(y)){S=y.getIterator();while(S.hasNext()){c=S.next().asStructure();d=c.getStringByKey("DatasetId");A=n.getStructureByKey(d);this.importSecondaryModel(t,l,A,c,d,false);u.removeElement(d)}}}let I=u.getIterator();while(I.hasNext()){l.removeSecondaryQueryManager(I.next())}let f=l.getPrimaryQueryManager().getQueryModel();let N=e.QFilterUtil.getLinkedFilterOrDynamicFilterForDimension(f.getPrimaryCalculationDimension());l.clearPrimaryBlendedMeasures();let R=i.getListByKey("PrimaryBlendedMeasures");if(e.notNull(R)){let i=R.getIterator();while(i.hasNext()){let n=i.next();let r=e.QInAConverter.lookupMeasureStructureMemberType(n.getStringByKey("MemberType"));let o=t.importComponent(r,n,null,l.getQueryModel().getPrimaryCalculationDimension(),l.getQueryModel());if(l.getSession().hasFeature(e.FeatureToggleOlap.MERGABLE_MEASURE_FILTER)&&e.notNull(N)){let e=N.addNewCartesianElement();e.setLowString(o.getAliasOrMemberName())}else{l.addPrimaryBlendedMeasure(o)}}}e.QInARepoBlendableQueryManager.importBlendedDimensionInfoAxis(l,i.getStructureByKey("DimensionOrder"),e.AxisType.ROWS);e.QInARepoBlendableQueryManager.importBlendedDimensionInfoAxis(l,i.getStructureByKey("DimensionOrder"),e.AxisType.COLUMNS);e.QInARepoBlendableQueryManager.importDrillOperations(l,i);e.QInARepoBlendableQueryManager.importSorts(i,l);e.QInARepoBlendableQueryManager.importRankSettingsList(i,l);l.clearFormulaExceptions();let T=i.getListByKey("FormulaExceptions");if(e.notNull(T)){for(let e=0;e<T.size();e++){let i=T.getStructureAt(e);let n=l.getQueryManagerByDatasetId(i.getStringByKey("DatasetId"));let r=t.importFormulaException(i,null,null,n.getQueryModel());l.addFormulaException(r)}}l.setBlendingRestrictionsEnabled(i.getBooleanByKeyExt("BlendingRestrictionsEnabled",false));l.setSupportsDrillOnBlendNodeOnly(i.getBooleanByKeyExt("SupportsDrillOnBlendNodeOnly",false));l.setFormulaExceptionResultHidden(i.getBooleanByKeyExt("FormulaExceptionResultHidden",false));l.setPreserveAttributeLayout(i.getBooleanByKeyExt("PreserveAttributeLayout",false));l.setSupportsConcurrentDimensionAndMeasureSorting(i.getBooleanByKeyExt("SupportsConcurrentDimensionAndMeasureSorting",false));l.setIncludesDisplayKeyInMeasureDimension(i.getBooleanByKeyExt("IncludesDisplayKeyInMeasureDimension",false));l.setIsDefaultOrder(i.getBooleanByKeyExt("IsDefaultOrder",false));l.setSupportsAccountSecondaryMeasureDimensionOnNoneAxis(i.getBooleanByKeyExt("SupportsAccountSecondaryMeasureDimensionOnNoneAxis",false));e.QInARepoBlendableQueryManager.importZeroSuppressionTypes(i,l);return null};e.QInARepoBlendableQueryManager.prototype.importSecondaryModel=function(t,i,n,r,o,l){let a=i.getQueryManagerByDatasetId(o);if(e.isNull(a)){let t=i.getOlapEnv().getSharedQueryManager(o);if(e.notNull(t)){a=t.cloneQueryManagerExt(e.QueryCloneMode.CURRENT_STATE);i.addSecondaryQueryManager(a);a.setClientQueryObjectStorageName(i.getClientQueryObjectStorageName())}}if(e.notNull(a)){i.setAllMembersOrFsicEnabled(a.getQueryModel().getDatasetId(),l);a.getQueryModel().deserializeFromElementExt(t.getOriginalMode(),r.getStructureByKey("Query"));e.QInARepoBlendableQueryManager.importQueryModelLinkSettingStructure(n,i,o)}};e.QInARepoCellContext=function(){};e.QInARepoCellContext.prototype=new e.QInARepository;e.QInARepoCellContext.prototype._ff_c="QInARepoCellContext";e.QInARepoCellContext.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;let l=n;if(e.isNull(l)){l=e.PrFactory.createStructure()}l.putString("Name",o.getName());if(o.getRowIndex()>-1){l.putInteger("Row",o.getRowIndex())}if(o.getColumnIndex()>-1){l.putInteger("Column",o.getColumnIndex())}l.putBoolean("ExternalKeys",o.isExternalKeys());l.putBoolean("ComponentsExternal",o.isComponentsExternal());l.putBoolean("ComponentsInternal",o.isComponentsInternal());let a=o.getAxisContexts();if(e.XCollectionUtils.hasElements(a)){let i=l.putNewList("CellContextPaths");let n=a.getKeysAsIterator();while(n.hasNext()){let r=n.next();let o=a.getByKey(r);if(e.XCollectionUtils.hasElements(o)){let n=i.addNewStructure();n.putString("Axis",e.QInAConverter.lookupAxisTypeInA(r));let l=n.putNewList("CellContextMembers");let a=o.size();for(let e=0;e<a;e++){l.add(t.exportDrillPathElement(o.get(e),true))}}}}return n};e.QInARepoCellContext.prototype.getComponentType=function(){return e.OlapComponentType.CELL_CONTEXT};e.QInARepoCellContext.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=null;let a=i.getStringByKey("Name");if(e.isNull(n)){l=e.QCellContext._create(o,a,r)}else if(n.getOlapComponentType()===e.OlapComponentType.CELL_CONTEXT){l=n}l.setRowIndex(i.getIntegerByKeyExt("Row",-1));l.setColumnIndex(i.getIntegerByKeyExt("Column",-1));l.setExternalKeys(i.getBooleanByKeyExt("ExternalKeys",false));l.setComponentsExternal(i.getBooleanByKeyExt("ComponentsExternal",false));l.setComponentsInternal(i.getBooleanByKeyExt("ComponentsInternal",false));let p=i.getListByKey("CellContextPaths");if(!e.PrUtils.isListEmpty(p)){let i=p.size();for(let n=0;n<i;n++){let i=p.getStructureAt(n);let r=e.QInAConverter.lookupAxisType(i.getStringByKey("Axis"));let a=i.getListByKey("CellContextMembers");let s=a.size();let u=e.XList.create();for(let e=0;e<s;e++){let i=a.getStructureAt(e);u.add(t.importDrillPathElement(i,l,o))}l.setTupleContextForAxis(u,r)}}return l};e.QInARepoCellContextManager=function(){};e.QInARepoCellContextManager.prototype=new e.QInARepository;e.QInARepoCellContextManager.prototype._ff_c="QInARepoCellContextManager";e.QInARepoCellContextManager.prototype.exportComponentWithList=function(t,i,n){let r=i;let o=e.PrFactory.createList();for(let e=0;e<r.size();e++){o.add(t.exportCellContext(r.get(e)))}return o};e.QInARepoCellContextManager.prototype.exportComponentWithStructure=function(t,i,n,r){let o=this.exportComponentWithList(t,i,r);if(e.notNull(o)){n.put("Elements",o)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoCellContextManager.prototype.getComponentType=function(){return e.OlapComponentType.CELL_CONTEXT_MANAGER};e.QInARepoCellContextManager.prototype.getTagName=function(){return"CellContextRequests"};e.QInARepoCellContextManager.prototype.importComponentWithList=function(t,i,n,r,o){if(n.getOlapComponentType()===e.OlapComponentType.CELL_CONTEXT_MANAGER){let e=n;let r=i.size();e.clear();for(let n=0;n<r;n++){e.addCellContext(t.importCellContext(i.getStructureAt(n),e,o))}}return n};e.QInARepoCellContextManager.prototype.importComponentWithStructure=function(t,i,n,r,o){if(e.notNull(i)&&i.containsKey("Elements")){let e=i.getListByKey("Elements");this.importComponentWithList(t,e,n,r,o)}return n};e.QInARepoConditionManager=function(){};e.QInARepoConditionManager.prototype=new e.QInARepository;e.QInARepoConditionManager.prototype._ff_c="QInARepoConditionManager";e.QInARepoConditionManager.prototype.exportComponentWithList=function(t,i,n){let r=null;let o=i;if(e.notNull(o)){let i=o.size();if(i>0){r=e.PrFactory.createList();for(let n=0;n<i;n++){let i=o.get(n);if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.isUserCondition()||i.getModCounter()>0){let n=t.exportCondition(i);if(e.notNull(n)&&!n.isEmpty()){r.add(n)}}}if(r.isEmpty()){r=null}}}return r};e.QInARepoConditionManager.prototype.exportComponentWithStructure=function(t,i,n,r){let o=this.exportComponentWithList(t,i,r);if(e.notNull(o)){n.put("Elements",o)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoConditionManager.prototype.getComponentType=function(){return e.OlapComponentType.CONDITIONS_MANAGER};e.QInARepoConditionManager.prototype.getTagName=function(){return"ConditionsRepo"};e.QInARepoConditionManager.prototype.importComponentWithList=function(t,i,n,r,o){let l=n;if(e.notNull(l)){l.clearFrontendConditions();if(!e.PrUtils.isListEmpty(i)){let n=o.getQueryModel();let r=i.size();for(let o=0;o<r;o++){let r=i.getStructureAt(o);let a=t.importCondition(n,r,null);if(e.notNull(a)&&!l.containsKey(a.getName())){l.add(a)}}}}return l};e.QInARepoConditionManager.prototype.importComponentWithStructure=function(t,i,n,r,o){if(e.notNull(i)){let e=i.getListByKey("Elements");this.importComponentWithList(t,e,n,r,o)}return n};e.QInARepoConditionsCondition=function(){};e.QInARepoConditionsCondition.prototype=new e.QInARepository;e.QInARepoConditionsCondition.prototype._ff_c="QInARepoConditionsCondition";e.QInARepoConditionsCondition.exportBreakGroupDimensionList=function(t){if(e.isNull(t)){return null}let i=e.PrFactory.createList();let n=t.getBreakGroupDimensions();let r=n.size();for(let e=0;e<r;e++){i.addString(n.get(e).getName())}return i};e.QInARepoConditionsCondition.exportEvaluateOnDimensionsList=function(t,i){if(e.isNull(i)){return null}let n=e.PrFactory.createList();let r=i.getEvaluationDimensions();let o=t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.getModCounter()>0;if(o){let e=r.size();for(let t=0;t<e;t++){n.addString(r.get(t).getName())}}return n};e.QInARepoConditionsCondition.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;if(t.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA&&o.isBackendCondition()&&o.hasPropertyChanged(e.QConditionProperties.QY_CONDITIONS_ACTIVE)){n.putString("Name",o.getName());n.putBoolean("Active",o.isActive());n.putBoolean("IsBackendCondition",o.isBackendCondition())}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.isUserCondition()){let i=o.getQueryModel();let r=i.getSystemType().isTypeOf(e.SystemType.HANA);n.putBoolean("IsBackendCondition",o.isBackendCondition());if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QConditionProperties.QY_CONDITIONS_ACTIVE)){n.putBoolean("Active",o.isActive())}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QConditionProperties.QY_CONDITIONS_AFTER_VISIBILITY_FILTER)){if(o.isApplyingConditionAfterVisibilityFilter()){n.putBoolean("AfterVisibilityFilter",true)}}if(r){n.putStringNotNullAndNotEmpty("Description",o.getDescription())}else{n.putString("Description",o.getDescription())}n.putString("Name",o.getName());let l=o.getDimensionEvaluationType();if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QConditionProperties.QY_CONDITIONS_EVALUATE_ON_DIMENSIONS)){n.putString("EvaluateOnDimensions",l.getName())}if(l===e.ConditionDimensionEvaluationType.GIVEN_LIST){let i=e.QInARepoConditionsCondition.exportEvaluateOnDimensionsList(t,o);n.put("EvaluateOnDimensionsList",i)}let a=o.getThresholds();let p=t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||a.getModCounter()>0;if(p){let i=a.size();if(i>0){let r=e.PrFactory.createList();for(let n=0;n<i;n++){let i=t.exportConditionThreshold(a.get(n));if(e.notNull(i)){r.add(i)}}if(!r.isEmpty()){n.put("Threshold",r)}else{return null}}}if(r){if(e.XCollectionUtils.hasElements(i.getPreQueries())&&!o.getOnDisabledToWarning()){n.putString("OnDisabled","Error")}let r=o.isBreakGroup();if(r){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QConditionProperties.QY_BREAK_GROUP)){n.putBoolean("BreakGroup",true)}let i=e.QInARepoConditionsCondition.exportBreakGroupDimensionList(o);n.put("BreakGroupList",i)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QConditionProperties.QY_CONDITIONS_BREAK_HIERARCHY)){if(o.isBreakHierarchy()){n.putBoolean("BreakHierarchy",true)}}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoConditionsCondition.prototype.getComponentType=function(){return e.OlapComponentType.CONDITION};e.QInARepoConditionsCondition.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=null;if(e.notNull(i)){let a=i.getStringByKey("Name");if(e.isNull(n)){let n=i.getBooleanByKeyExt("IsBackendCondition",true);let p=r;if(p.getByKey(a)!==null){l=p.getConditionByName(a)}else if(!n||t.getOriginalMode()===e.QModelFormat.INA_CLONE){l=e.QCondition.create(o,p,a,n)}}else{l=n;l.setConditionName(a)}if(e.notNull(l)){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("Active")){l.setActive(i.getBooleanByKey("Active"))}if(!l.isBackendCondition()||t.getOriginalMode()===e.QModelFormat.INA_CLONE){l.setUsedState(i.getStringByKey("IsUsed"));if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("Description")){l.setDescription(i.getStringByKey("Description"))}let n=i.getStringByKey("OnDisabled");if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("AfterVisibilityFilter")){l.setApplyConditionAfterVisibilityFilter(i.getBooleanByKeyExt("AfterVisibilityFilter",false))}if(e.notNull(n)){if(e.XString.isEqual(n,"Error")){l.setOnDisabledToWarning(false)}}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("EvaluateOnDimensions")){let t=i.getStringByKey("EvaluateOnDimensions");let n=e.ConditionDimensionEvaluationType.lookupName(t);if(e.notNull(n)){l.setDimensionEvaluationType(n)}}let r=o.getQueryModel();let a=i.getListByKey("EvaluateOnDimensionsList");let p;let s;if(!e.PrUtils.isListEmpty(a)&&e.notNull(r)){p=a.size();l.clearEvaluationDimensions();for(s=0;s<p;s++){let t=a.getStringAt(s);if(e.notNull(t)){let i=r.getDimensionByNameFromExistingMetadata(t);if(e.notNull(i)){l.addEvaluationDimension(i)}}}}let u=i.getListByKey("Threshold");if(!e.PrUtils.isListEmpty(u)){let i=u.size();l.clearThresholds();for(let n=0;n<i;n++){let i=u.getStructureAt(n);if(e.notNull(i)){l.addThreshold(t.importConditionThreshold(r,i,null,l))}}}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("BreakGroup")){l.setBreakGroup(i.getBooleanByKeyExt("BreakGroup",false))}let g=i.getListByKey("BreakGroupList");if(!e.PrUtils.isListEmpty(g)&&e.notNull(r)){p=g.size();for(s=0;s<p;s++){let t=g.getStringAt(s);if(e.notNull(t)){let i=r.getDimensionByNameFromExistingMetadata(t);if(e.notNull(i)){l.addBreakGroupDimension(i)}}}}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("BreakHierarchy")){l.setBreakHierarchy(i.getBooleanByKeyExt("BreakHierarchy",false))}}}}return l};e.QInARepoConditionsThreshold=function(){};e.QInARepoConditionsThreshold.prototype=new e.QInARepository;e.QInARepoConditionsThreshold.prototype._ff_c="QInARepoConditionsThreshold";e.QInARepoConditionsThreshold.importSingleMeasureCoordinate=function(t,i,n){if(e.isNull(i)||e.isNull(n)){return}let r=n.getStringByKey("DimensionName");let o=n.getStringByKey("MemberName");if(e.XStringUtils.isNullOrEmpty(r)||e.XStringUtils.isNullOrEmpty(o)){return}let l=t;if(e.isNull(l)){l=i.getContext().getQueryModel()}if(e.notNull(l)){let t=l.getDimensionByNameFromExistingMetadata(r);if(e.notNull(t)){let n=t.getDimensionMember(o);if(e.isNull(n)){let e=l.getOlapEnv().getClientQueryObjectManager();let i=l.getQueryManager().getClientQueryObjectStorageName();let r=t===l.getPrimaryCalculationDimension();n=e.getStructuredMemberIncludeReleased(o,i,r)}if(e.notNull(n)){i.addMeasureCoordinate(n)}}}};e.QInARepoConditionsThreshold.importThresholdValue=function(t,i){if(e.isNull(t)||e.isNull(i)){return}if(i.isBoolean()){t.setBoolean(i.getBoolean())}else if(i.isString()){t.setString(i.getString())}else if(i.isDouble()){t.setDouble(i.getDouble())}else if(i.isInteger()){t.setInteger(i.getInteger())}else if(i.isLong()){t.setLong(i.getLong())}};e.QInARepoConditionsThreshold.setValue=function(t,i,n,r,o){if(o===e.XValueType.VARIABLE){let t=r.getVariableValue();if(e.notNull(t)){n.putString(i,t.getName());if(e.XString.isEqual(i,"Low")){n.putString("LowIs","Variable")}else if(e.XString.isEqual(i,"High")){n.putString("HighIs","Variable")}}}else{e.QInAValueUtils.exportPlaceholderValue(t,i,n,r,o,r.getQueryModel())}};e.QInARepoConditionsThreshold.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;let l=o.getMeasureCoordinates();let a=e.PrFactory.createList();let p=l.size();if(p===0){return null}for(let t=0;t<p;t++){let i=l.get(t);let n=e.PrFactory.createStructure();let r;if(!i.isReleased()){r=i.getDimension().getName()}else{if(e.XString.isEqual(i.getStorageGroupName(),e.QClientQueryObjectType.SECONDARY_STRUCTURE_MEMBER.getName())){r=o.getQueryModel().getSecondaryCalculationDimension().getName()}else{r=o.getQueryModel().getPrimaryCalculationDimension().getName()}}n.putString("DimensionName",r);n.putString("MemberName",i.getName());a.add(n)}if(!a.isEmpty()){n.put("MeasureCoordinate",a)}let s=o.getQueryModel();let u=s.getSystemType().isTypeOf(e.SystemType.HANA);let g=o.getLow();let y=o.getHigh();if(u){if(g.getValue()!==null){e.QInARepoConditionsThreshold.setValue(t,"Low",n,g,e.XValueType.INTEGER)}if(y.getValue()!==null){e.QInARepoConditionsThreshold.setValue(t,"High",n,y,e.XValueType.INTEGER)}let i=o.getLevel();if(e.notNull(i)){n.putInteger("Level",i.getInteger())}}else{if(g.getValue()!==null){e.QInARepoConditionsThreshold.setValue(t,"Low",n,g,g.getValueType())}if(y.getValue()!==null){e.QInARepoConditionsThreshold.setValue(t,"High",n,y,y.getValueType())}let i=o.getLowIs();if(i.getValue()!==null){e.QInARepoConditionsThreshold.setValue(t,"LowIs",n,i,i.getValueType())}let r=o.getHighIs();if(r.getValue()!==null){e.QInARepoConditionsThreshold.setValue(t,"HighIs",n,r,r.getValueType())}}let m=o.getComparisonOperator();n.putString("Comparison",m.getName());return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoConditionsThreshold.prototype.getComponentType=function(){return e.OlapComponentType.CONDITIONS_THRESHOLD};e.QInARepoConditionsThreshold.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=null;if(e.notNull(i)){if(e.isNull(n)){l=e.QConditionThreshold.create(o,r)}else{l=n}let t=i.getStringByKey("Comparison");let a=e.ConditionComparisonOperator.lookupName(t);if(e.notNull(a)){l.setComparisonOperator(a)}let p=i.getByKey("Low");e.QInARepoConditionsThreshold.importThresholdValue(l.getLow(),p);let s=i.getByKey("LowIs");e.QInARepoConditionsThreshold.importThresholdValue(l.getLowIs(),s);let u=i.getByKey("High");e.QInARepoConditionsThreshold.importThresholdValue(l.getHigh(),u);let g=i.getByKey("HighIs");e.QInARepoConditionsThreshold.importThresholdValue(l.getHighIs(),g);let y=i.getListByKey("MeasureCoordinate");if(e.notNull(y)){let t=o.getQueryModel();let i=y.size();for(let n=0;n<i;n++){e.QInARepoConditionsThreshold.importSingleMeasureCoordinate(t,l,y.getStructureAt(n))}}l.setLeavesOnly(i.getBooleanByKeyExt("LeavesOnly",false));let m=i.getByKey("Level");if(e.notNull(m)){l.setLevel(e.XIntegerValue.create(m.getInteger()))}}return l};e.QInARepoCurrencyTranslationItem=function(){};e.QInARepoCurrencyTranslationItem.prototype=new e.QInARepository;e.QInARepoCurrencyTranslationItem.prototype._ff_c="QInARepoCurrencyTranslationItem";e.QInARepoCurrencyTranslationItem.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;if(e.notNull(o)){n.putStringNotNullAndNotEmpty("ErrorHandling",e.QInAConverter.lookupCtErrorHandlingModeInA(o.getErrorHandling()));n.putString("Name",o.getName());n.putString("Description",o.getText());n.putBoolean("MetadataDefined",o.isMetadataDefined());if(o.isDefaultCurrency()){n.putBoolean("DefaultCurrency",true)}let i=o.getQueryModel();this.exportSpecificCurrencyTranslationProperty(t,n,"SourceCurrency",o.getSourceCurrency(),i);this.exportSpecificCurrencyTranslationProperty(t,n,"TargetCurrency",o.getTargetCurrency(),i);this.exportSpecificCurrencyTranslationProperty(t,n,"ReferenceDate",o.getReferenceDate(),i);this.exportReferenceDateOffsets(n,o,t);this.exportSpecificCurrencyTranslationProperty(t,n,"RateName",o.getRateName(),i);this.exportPlanningRateNameSettings(n,o,t)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoCurrencyTranslationItem.prototype.exportPlanningRateNameSettings=function(t,i,n){if(e.CtCategory.isDefined(i.getFixedCategory())||e.XStringUtils.isNotNullAndNotEmpty(i.getFixedRateVersion())||e.CtRateType.isDefined(i.getFixedRateType())){let r;if(t.containsKey("RateName")){r=t.getStructureByKey("RateName")}else{r=t.putNewStructure("RateName")}if(n.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QCurrencyTranslationProperties.QY_RATE_TYPE)){r.putStringNotNullAndNotEmpty("RateType",e.QInAConverter.lookupRateTypeInA(i.getFixedRateType()))}r.putStringNotNullAndNotEmpty("RateVersion",i.getFixedRateVersion());if(n.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QCurrencyTranslationProperties.QY_CATEGORY)){r.putStringNotNullAndNotEmpty("Category",e.QInAConverter.lookupCategoryInA(i.getFixedCategory()))}}};e.QInARepoCurrencyTranslationItem.prototype.exportReferenceDateOffsets=function(t,i,n){if(i.getDateOffsetGranularity()!==null){let r;if(t.containsKey("ReferenceDate")){r=t.getStructureByKey("ReferenceDate")}else{r=t.putNewStructure("ReferenceDate")}if(n.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QCurrencyTranslationProperties.QY_DATE_OFFSET_GRANULARITY)){r.putString("DateOffsetGranularity",i.getDateOffsetGranularity().getName())}if(n.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QCurrencyTranslationProperties.QY_DATE_OFFSET)){r.putInteger("DateOffset",i.getDateOffset())}}};e.QInARepoCurrencyTranslationItem.prototype.exportSpecificCurrencyTranslationProperty=function(t,i,n,r,o){if(e.notNull(r)){if(r.isFixed()){i.putNewStructure(n).putString("Fixed",r.getFixedValue().getStringRepresentation())}else if(r.isFieldBased()){i.putNewStructure(n).putString("DimensionAttribute",r.getFieldName())}else if(r.isFormulaBased()){let l=i.putNewStructure(n).putNewStructure("Formula");e.QInARepoMemberAbstract.exportFormulaItem(t,r.getFormulaItem(),l,o)}else if(r.isVariableBased()){i.putNewStructure(n).putString("Variable",r.getVariableName())}}};e.QInARepoCurrencyTranslationItem.prototype.getComponentType=function(){return e.OlapComponentType.CURRENCY_TRANSLATION_ITEM};e.QInARepoCurrencyTranslationItem.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(e.notNull(l)&&(!l.isMetadataDefined()&&!l.isModelDefinedCurrencyTranslation())&&e.XCollectionUtils.hasElements(i)){l.setMetadataDefined(i.getBooleanByKeyExt("MetadataDefined",false));l.setSourceCurrency(this.importSpecificCurrencyTranslationElement(t,l,e.XValueType.STRING,i.getStructureByKey("SourceCurrency")));l.setTargetCurrency(this.importSpecificCurrencyTranslationElement(t,l,e.XValueType.STRING,i.getStructureByKey("TargetCurrency")));l.setErrorHandling(e.QInAConverter.lookupCtErrorHandlingMode(i.getStringByKey("ErrorHandling")));if(i.getBooleanByKeyExt("DefaultCurrency",false)){l.setDefaultCurrency()}l.setReferenceDate(this.importSpecificCurrencyTranslationElement(t,l,e.XValueType.DATE,i.getStructureByKey("ReferenceDate")));if(i.containsKey("ReferenceDate")){let n=i.getStructureByKey("ReferenceDate");if(n.containsKey("DateOffset")||n.containsKey("DateOffsetGranularity")){let i=l.getDateOffset();if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.containsKey("DateOffset")){i=n.getIntegerByKey("DateOffset")}let r=l.getDateOffsetGranularity();if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.containsKey("DateOffsetGranularity")){r=e.DateOffsetGranularity.lookup(n.getStringByKey("DateOffsetGranularity"))}if(e.notNull(r)){if(l.getReferenceDateFieldName()!==null){l.setReferenceDateByFieldNameOffsetAndGranularity(l.getReferenceDateFieldName(),i,r)}else{l.setDynamicReferenceDateWithOffsetAndGranularity(i,r)}}}}l.setRateName(this.importSpecificCurrencyTranslationElement(t,l,e.XValueType.STRING,i.getStructureByKey("RateName")));if(i.containsKey("RateName")){let t=i.getStructureByKey("RateName");if(t.hasStringByKey("RateType")){l.setFixedRateType(e.QInAConverter.lookupRateType(t.getStringByKey("RateType")))}if(t.hasStringByKey("RateVersion")){l.setFixedRateVersion(t.getStringByKey("RateVersion"))}if(t.hasStringByKey("Category")){l.setFixedCategory(e.QInAConverter.lookupCategory(t.getStringByKey("Category")))}}}return n};e.QInARepoCurrencyTranslationItem.prototype.importSpecificCurrencyTranslationElement=function(t,i,n,r){let o=null;if(e.notNull(r)){if(r.containsKey("Fixed")){let t=r.getStringByKey("Fixed");if(n===e.XValueType.STRING){o=e.QCurrencyLookupValue.createFixedByValue(i,e.XStringValue.create(t))}else if(n===e.XValueType.DATE){o=e.QCurrencyLookupValue.createFixedByValue(i,e.XDate.createDateSafe(t))}}else if(r.containsKey("DimensionAttribute")){o=e.QCurrencyLookupValue.createByFieldName(i,r.getStringByKey("DimensionAttribute"))}else if(r.containsKey("Formula")){let n=e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,i.getQueryModel().getMeasureDimension(),r.getStructureByKey("Formula"),null,null);o=e.QCurrencyLookupValue.createByFormulaItem(i,n)}else if(r.containsKey("Variable")){o=e.QCurrencyLookupValue.createByVariableName(i,r.getStringByKey("Variable"))}}return o};e.QInARepoCurrencyTranslationList=function(){};e.QInARepoCurrencyTranslationList.prototype=new e.QInARepository;e.QInARepoCurrencyTranslationList.prototype._ff_c="QInARepoCurrencyTranslationList";e.QInARepoCurrencyTranslationList.prototype.exportComponentWithList=function(t,i,n){let r=null;let o=i;let l=o.getMeasureCurrencyTranslationsForInaData();if(e.XCollectionUtils.hasElements(l)){r=e.PrFactory.createList();let i=l.size();for(let e=0;e<i;e++){let i=l.get(e);t.exportCurrencyTranslationElement(i,r.addNewStructure())}}return r};e.QInARepoCurrencyTranslationList.prototype.exportComponentWithStructure=function(t,i,n,r){let o=this.exportComponentWithList(t,i,r);n.put("Elements",o);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoCurrencyTranslationList.prototype.getComponentType=function(){return e.OlapComponentType.CURRENCY_TRANSLATION_LIST};e.QInARepoCurrencyTranslationList.prototype.getTagName=function(){return"CurrencyTranslationsRepo"};e.QInARepoCurrencyTranslationList.prototype.importComponentWithList=function(t,i,n,r,o){let l=o.getQueryModel().getCurrencyTranslationManager();if(e.notNull(l)&&e.XCollectionUtils.hasElements(i)){let n=i.size();for(let r=0;r<n;r++){let n=i.getStructureAt(r);let a=n.getStringByKey("Name");let p=n.getStringByKey("Description");let s=l.getMeasureCurrencyTranslation(a);if(e.isNull(s)){s=l.addNewMeasureCurrencyTranslationBase(a,p)}t.importCurrencyTranslationElement(n,s,o)}}return l};e.QInARepoCurrencyTranslationList.prototype.importComponentWithStructure=function(t,i,n,r,o){if(e.notNull(i)){let e=i.getListByKey("Elements");this.importComponentWithList(t,e,n,r,o)}return n};e.QInARepoCurrencyTranslationManager=function(){};e.QInARepoCurrencyTranslationManager.prototype=new e.QInARepository;e.QInARepoCurrencyTranslationManager.prototype._ff_c="QInARepoCurrencyTranslationManager";e.QInARepoCurrencyTranslationManager.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;this.exportCurrencyTranslationDetails(n,o);this.exportSpecificCurrencyTranslations(t,n,o);this.exportDefaultCurrencyTranslations(t,n,o);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoCurrencyTranslationManager.prototype.exportCurrencyTranslationDetails=function(t,i){if(e.isNull(i)||!i.getModelCapabilities().supportsQueryCurrencyTranslation()){return}let n=i.getCurrencyTranslationDetails();if(e.notNull(n)){if(e.XStringUtils.isNotNullAndNotEmpty(n.getCurrencyTranslationName())){if(n.getCurrencyTranslationOperation()===null){throw e.XException.createIllegalArgumentException("CurrencyTranslation Operation required.")}t.putString("Operation",n.getCurrencyTranslationOperation().getName());t.putString("Name",n.getCurrencyTranslationName());if(n.getCurrencyTranslationOperation()===e.CurrencyTranslationOperation.BOTH||n.getCurrencyTranslationOperation()===e.CurrencyTranslationOperation.TARGET){if(n.getCurrencyTranslationTarget()===null){throw e.XException.createIllegalArgumentException("CurrencyTranslation Target Currency required.")}}t.putString("Target",n.getCurrencyTranslationTarget())}else{t.putString("Operation","");t.putString("Name","");t.putString("Target","")}}};e.QInARepoCurrencyTranslationManager.prototype.exportDefaultCurrencyTranslations=function(t,i,n){let r=n.getQuery2MeasureCurrencyTranslationBridge();if(e.notNull(r)){let e=i.putNewStructure("Query");let n=r.getMeasureCurrencyTranslation();t.exportCurrencyTranslationElement(n,e);i.putStringNotNullAndNotEmpty("CurrencyTranslationName",r.getCurrencyTranslationName());i.putBoolean("Active",r.isApplyDefinedCurrencyTranslation());if(r.isApplyToDefaultCurrencyTranslation()){i.putBoolean("CurrencyTranslationApplyToDefault",r.isApplyToDefaultCurrencyTranslation())}}};e.QInARepoCurrencyTranslationManager.prototype.exportSpecificCurrencyTranslations=function(t,i,n){if(e.isNull(n)||!n.getModelCapabilities().supportsCurrencyTranslation()){return}let r=n.getMeasureCurrencyTranslations();if(e.XCollectionUtils.hasElements(r)){let e=i.putNewList("CurrencyTranslations");let n=r.size();for(let i=0;i<n;i++){let n=r.get(i);t.exportCurrencyTranslationElement(n,e.addNewStructure())}}};e.QInARepoCurrencyTranslationManager.prototype.getComponentType=function(){return e.OlapComponentType.CURRENCY_TRANSLATION_MANAGER};e.QInARepoCurrencyTranslationManager.prototype.getTagName=function(){return"CurrencyTranslationRepo"};e.QInARepoCurrencyTranslationManager.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(e.notNull(i)&&e.notNull(l)){this.importQueryCurrencyTranslation(t,i,l);this.importSpecificCurrencyTranslations(t,i,l,o);this.importDefaultCurrencyTranslation(t,i,l,o)}return n};e.QInARepoCurrencyTranslationManager.prototype.importDefaultCurrencyTranslation=function(t,i,n,r){let o=i.getStructureByKey("Query");if(e.notNull(o)&&e.notNull(n)){let l=n.getQuery2MeasureCurrencyTranslationBridge();if(e.notNull(l)){l.setCurrencyTranslationName(i.getStringByKey("CurrencyTranslationName"));l.setApplyDefinedCurrencyTranslation(i.getBooleanByKeyExt("Active",false));l.setApplyToDefaultCurrencyTranslation(i.getBooleanByKeyExt("CurrencyTranslationApplyToDefault",false));t.importCurrencyTranslationElement(o,l.getMeasureCurrencyTranslation(),r)}}};e.QInARepoCurrencyTranslationManager.prototype.importQueryCurrencyTranslation=function(t,i,n){let r=n.getCurrencyTranslationDetails();if(e.notNull(r)&&i.hasStringByKey("Name")&&i.hasStringByKey("Operation")){let t=i.getStringByKey("Name");let o=i.getStringByKey("Operation");let l=i.getStringByKey("Target");if(!e.XStringUtils.isNullOrEmpty(r.getCurrencyTranslationName())&&r.getCurrencyTranslationOperation()!==null&&!e.XStringUtils.isNullOrEmpty(r.getCurrencyTranslationOperation().getName())&&(e.XStringUtils.isNullOrEmpty(t)||e.XStringUtils.isNullOrEmpty(o)||e.XStringUtils.isNullOrEmpty(l))){n.resetCurrencyTranslationDetails()}else{r.setCurrencyTranslationName(t);r.setCurrencyTranslationOperation(e.CurrencyTranslationOperation.lookup(o));r.setCurrencyTranslationTarget(l)}}};e.QInARepoCurrencyTranslationManager.prototype.importSpecificCurrencyTranslations=function(t,i,n,r){let o=i.getListByKey("CurrencyTranslations");if(e.XCollectionUtils.hasElements(o)){let i=o.size();for(let l=0;l<i;l++){let i=o.getStructureAt(l);let a=i.getStringByKey("Name");let p=i.getStringByKey("Description");let s=n.getMeasureCurrencyTranslation(a);if(e.isNull(s)){s=n.addNewMeasureCurrencyTranslationBase(a,p)}t.importCurrencyTranslationElement(i,s,r)}}};e.QInARepoDataCell=function(){};e.QInARepoDataCell.prototype=new e.QInARepository;e.QInARepoDataCell.prototype._ff_c="QInARepoDataCell";e.QInARepoDataCell.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_DISAGGREGATION_MODE)){let t=o.getDisaggregationMode();e.QInAExportUtil.setNameIfNotNull(n,"DisaggregationMode",e.isNull(t)?e.DisaggregationMode.NONE:t)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_DISAGGREGATION_REF_CELL_NAME)){let t=o.getDisaggregationRefCell();n.putString("DisaggregationReferenceCellName",e.isNull(t)?"0":t.getName())}if(e.XStringUtils.isNullOrEmpty(o.getName())||t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_SCALING_FACTOR)){n.putInteger("ScalingFactor",o.getScalingFactor())}if(e.XStringUtils.isNullOrEmpty(o.getName())||t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_DECIMAL_PLACES)){n.putInteger("Decimals",o.getDecimalPlaces())}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_SIGN_REVERSAL)){n.putBoolean("SignReversal",o.hasSignReversal())}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_EMPHASIZED)){n.putBoolean("Emphasized",o.isEmphasized())}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_CUMULATION)){n.putBoolean("Cumulation",o.isCumulated())}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_CURRENCY_PRESENTATION)){n.putStringNotNullAndNotEmpty("CurrencyPresentation",e.QInAConverter.lookupCurrencyPresentationInA(o.getCurrencyPresentation()))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_SCALE_AND_UNIT_PLACEMENT)){n.putStringNotNullAndNotEmpty("ScaleAndUnitPlacement",e.QInAConverter.lookupScaleAndUnitPlacementInA(o.getScaleAndUnitPlacement()))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_SCALE_FORMAT)){n.putStringNotNullAndNotEmpty("ScaleFormat",e.QInAConverter.lookupScaleFormatInA(o.getScaleFormat()))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_SIGN_PRESENTATION)){n.putStringNotNullAndNotEmpty("SignPresentation",e.QInAConverter.lookupSignPresentationInA(o.getSignPresentation()))}let l=o.getBaseValueType();let a=e.QInAConverter.lookupIntByValueType(l);n.putInteger("CellValueType",a);let p=n.putNewList("DimensionMemberReferences");let s=o.getReferenceStructureElement1();if(e.notNull(s)){p.addString(s.getName());s=o.getReferenceStructureElement2();if(e.notNull(s)){p.addString(s.getName())}}if(t.getOriginalMode()===e.QModelFormat.INA_CLONE){n.putStringNotNullAndNotEmpty("SemanticObject",o.getSemanticObject())}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoDataCell.prototype.getComponentType=function(){return e.OlapComponentType.DATA_CELL};e.QInARepoDataCell.prototype.getDataCellFromExistingList=function(t,i){let n=i.getStringByKey("Name");let r=i.getListByKey("DimensionMemberReferences");let o=t.getQueryDataCellsBase();if(e.XCollectionUtils.hasElements(r)){let t=r.getStringAt(0);let i=r.size()>1?r.getStringAt(1):null;let n=e.XStringUtils.isNotNullAndNotEmpty(i);return e.XCollectionUtils.findFirst(o,e=>e.hasMeasureReference(t)&&(n&&e.hasMeasureReference(i)||!n&&e.getReferenceStructureElement2()===null))}else if(e.XStringUtils.isNotNullAndNotEmpty(n)){let t=o.getByKey(n);if(e.notNull(t)&&t.getReferenceStructureElement1()===null&&t.getReferenceStructureElement2()===null){return t}}return null};e.QInARepoDataCell.prototype.getDataCellName=function(t,i){let n=t.getStringByKey("Name");let r=i.getQueryDataCells();if(r.containsKey(n)){let t=r.size();while(r.containsKey(e.XInteger.convertToString(t))){t++}n=e.XInteger.convertToString(t)}return n};e.QInARepoDataCell.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=o.getQueryModel();let a=l.getQueryDataCellsBase();let p=this.getDataCellFromExistingList(l,i);let s=false;if(e.isNull(p)){p=a.newQueryDataCell(this.getDataCellName(i,l));s=true}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("SignReversal")){p.setSignReversal(i.getBooleanByKeyExt("SignReversal",false))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("Emphasized")){p.setEmphasized(i.getBooleanByKeyExt("Emphasized",false))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("Cumulation")){p.setCumulation(i.getBooleanByKeyExt("Cumulation",false))}p.setInputEnabled(i.getBooleanByKeyExt("InputEnabled",false));if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("DisaggregationMode")){p.setDisaggregationMode(e.DisaggregationMode.lookupWithDefault(i.getStringByKeyExt("DisaggregationMode",null),e.DisaggregationMode.NONE))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("DisaggregationReferenceCellName")){p.setDisaggregationRefCellName(i.getStringByKeyExt("DisaggregationReferenceCellName",null))}if((s||l.isBasicMeasureSettingsExportedInRepo())&&(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("ScalingFactor"))){p.setScalingFactor(i.getIntegerByKeyExt("ScalingFactor",1))}if((s||l.isBasicMeasureSettingsExportedInRepo())&&(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("Decimals"))){p.setDecimalPlaces(i.getIntegerByKeyExt("Decimals",0))}let u=i.getIntegerByKeyExt("CellValueType",0);let g=e.QInAConverter.lookupValueTypeByInt(u);p.setBaseCellValueType(g);if(g===e.XValueType.DIMENSION_MEMBER){let e=i.getStringByKey("CellDimensionReference");p.setDimensionReference(l.getDimensions().getByKey(e))}let y=i.getListByKey("DimensionMemberReferences");if(e.notNull(y)){for(let e=0;e<y.size();e++){let t=y.getStringAt(e);if(!p.hasMeasureReference(t)){p.addDimensionMemberReference(t)}}}if(t.getOriginalMode()!==e.QModelFormat.INA_CLONE&&!p.hasAnyMemberReferencesSet()){a.removeElement(p)}if(t.getOriginalMode()===e.QModelFormat.INA_CLONE&&i.hasStringByKey("SemanticObject")){p.setSemanticObject(i.getStringByKey("SemanticObject"))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasStringByKey("CurrencyPresentation")){p.setCurrencyPresentation(e.QInAConverter.lookupCurrencyPresentation(i.getStringByKey("CurrencyPresentation")))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasStringByKey("ScaleAndUnitPlacement")){p.setScaleAndUnitPlacement(e.QInAConverter.lookupScaleAndUnitPlacement(i.getStringByKey("ScaleAndUnitPlacement")))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasStringByKey("ScaleFormat")){p.setScaleFormat(e.QInAConverter.lookupScaleFormat(i.getStringByKey("ScaleFormat")))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasStringByKey("SignPresentation")){p.setSignPresentation(e.QInAConverter.lookupSignPresentation(i.getStringByKey("SignPresentation")))}return p};e.QInARepoDataCellsAll=function(){};e.QInARepoDataCellsAll.prototype=new e.QInARepository;e.QInARepoDataCellsAll.prototype._ff_c="QInARepoDataCellsAll";e.QInARepoDataCellsAll.prototype.exportComponentWithList=function(t,i,n){let r=i;let o=null;let l=r.getModelCapabilities();if(l.supportsDataCells()&&r.getQueryManager().getInitSettings().isRequestingDataCells()){let i=r.getQueryDataCells();o=e.PrFactory.createList();let n=i.size();for(let r=0;r<n;r++){let n=i.get(r);let l=t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.isUserAddedDataCell()||n.getModCounter()>0;if(l){let e=t.exportDataCell(n,null);o.add(e)}}}return o};e.QInARepoDataCellsAll.prototype.exportComponentWithStructure=function(t,i,n,r){let o=this.exportComponentWithList(t,i,r);if(e.notNull(o)){n.put("Elements",o)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoDataCellsAll.prototype.getComponentType=function(){return e.OlapComponentType.DATA_CELLS};e.QInARepoDataCellsAll.prototype.getTagName=function(){return"QueryDataCellsRepo"};e.QInARepoDataCellsAll.prototype.importComponentWithList=function(t,i,n,r,o){let l=o.getModelCapabilities();let a=o.getQueryModel();if(l.supportsDataCells()&&a.getQueryManager().getInitSettings().isRequestingDataCells()){if(e.notNull(i)){for(let e=0;e<i.size();e++){t.importDataCell(i.getStructureAt(e),a)}}}return null};e.QInARepoDataCellsAll.prototype.importComponentWithStructure=function(t,i,n,r,o){if(e.notNull(i)){let e=i.getListByKey("Elements");this.importComponentWithList(t,e,n,r,o)}return n};e.QInARepoDataSource=function(){};e.QInARepoDataSource.prototype=new e.QInARepository;e.QInARepoDataSource.prototype._ff_c="QInARepoDataSource";e.QInARepoDataSource.exportDataSource=function(t,i,n,r){let o=e.PrFactory.createStructure();let l=i.getType();if(e.notNull(l)){o.putString("Type",l.getCamelCaseName());let r=i.getSystemName();if(e.notNull(r)){o.putString("System",r)}let a;if(l===e.MetaObjectType.MULTI_SOURCE){a=o.putNewList("Sources");let r=i.getMultiSources();let l=r.size();for(let i=0;i<l;i++){let o=r.get(i);let l=e.QInARepoDataSource.exportDataSource(t,o,n,null);a.add(l)}o.put("Mappings",i.getMappings())}else if(l===e.MetaObjectType.BLENDING){let n=i.getBlendingDefinition();if(e.notNull(n)){a=e.QInARepoDataSourceBlending.exportBlendingSources(t.getMode(),n,true);o.put("Sources",a);let i=e.QInARepoDataSourceBlending.exportBlendingMappings(n.getMappings());o.put("Mappings",i)}}let p=i.getGenericServiceDescription();if(e.notNull(p)){o.put("GenericServiceDescription",p)}}e.QInARepoDataSourceProperties.exportQd(t,i,o,n);e.QInARepoDataSourceExtDims.exportQd(t,i,o);if(e.notNull(r)){r.put("DataSource",o)}return o};e.QInARepoDataSource.importDs2=function(t,i,n,r){let o=i.getStringByKey("System");if(e.notNull(o)){r.setSystemName(o)}let l=i.getStringByKey("Type");let a=null;if(e.notNull(l)){l=e.XString.toLowerCase(l);a=e.MetaObjectType.lookup(l)}if(e.isNull(a)){a=e.MetaObjectType.DBVIEW}r.setType(a);e.QInARepoDataSourceProperties.importQd(r,i);if(a===e.MetaObjectType.MULTI_SOURCE||a===e.MetaObjectType.BLENDING){let o=e.PrUtils.getListProperty(i,"Sources");if(e.notNull(o)){let i=r.getMultiSourcesBase();let l=o.size();for(let r=0;r<l;r++){let l=e.PrUtils.getStructureElement(o,r);let a=e.QFactory.createDataSource();e.QInARepoDataSource.importDs2(t,l,n,a);i.add(a)}}let l=e.PrUtils.getListProperty(i,"Mappings");r.setMappings(l)}e.QInARepoDataSourceExtDims.importQd(t,r,i);let p=i.getStringByKey("ValidationHash");r.setValidationHash(p);let s=i.getStructureByKey("GenericServiceDescription");if(e.notNull(s)){r.setGenericServiceDescription(s)}return r};e.QInARepoDataSource.importQd=function(t,i,n,r){let o=null;let l=i;if(e.notNull(n)){if(e.notNull(l)&&!l.containsKey(n)){l=l.getStructureByKey("Analytics");if(e.notNull(l)&&!l.containsKey(n)){l=l.getStructureByKey("Definition")}}if(e.notNull(l)&&l.containsKey(n)){let t=l.getElementTypeByKey(n);if(t===e.PrElementType.STRING){o=e.QFactory.createDataSourceWithType(e.MetaObjectType.INFOPROVIDER,l.getStringByKey(n))}else if(t===e.PrElementType.STRUCTURE){l=l.getStructureByKey(n)}}else if(e.notNull(l)&&!l.containsKey(n)){l=null}}if(e.isNull(o)&&e.notNull(l)){o=e.QFactory.createDataSource();e.QInARepoDataSource.importDs2(t,l,r,o);let n=i.getStringByKey("ValidationHash");if(e.isNull(n)){n=l.getStringByKey("ValidationHash")}o.setValidationHash(n);let a=i.getStructureByKey("GenericServiceDescription");if(e.notNull(a)){o.setGenericServiceDescription(a)}}return o};e.QInARepoDataSource.prototype.exportComponentWithStructure=function(t,i,n,r){let o=e.XMath.binaryAnd(r,e.QImExFlag.RUN_AS_USER)>0;return e.QInARepoDataSource.exportDataSource(t,i,o,null)};e.QInARepoDataSource.prototype.getComponentType=function(){return e.OlapComponentType.DATA_SOURCE};e.QInARepoDataSource.prototype.getTagName=function(){return"DataSource"};e.QInARepoDataSource.prototype.importComponentWithStructure=function(t,i,n,r,o){return e.QInARepoDataSource.importDs2(t,i,o,n)};e.QInARepoDataSource.prototype.newModelComponent=function(t,i,n,r){return e.QFactory.createDataSource()};e.QInARepoDimension=function(){};e.QInARepoDimension.prototype=new e.QInARepository;e.QInARepoDimension.prototype._ff_c="QInARepoDimension";e.QInARepoDimension.checkAddFallbackResultSetFields=function(t,i,n,r){if(t&&!e.XStream.of(i).anyMatch(t=>t.getObtainability()===null||t.getObtainability()===e.ObtainabilityType.ALWAYS)){if(e.XCollectionUtils.hasElements(r)){i.addAll(r)}else if(n.getDisplayKeyField()!==null){i.add(n.getDisplayKeyField())}}};e.QInARepoDimension.exportListOfFields=function(t,i,n){let r=t.size();for(let o=0;o<r;o++){let r=t.get(o);if(r.getTextTransformation()===null&&r.getDimension().getDimensionType()!==e.DimensionType.FORMULA_CALCULATED_DIMENSION){continue}i.add(n.exportComponent(e.OlapComponentType.FIELD,r,null,e.QImExFlag.DEFAULT_ALL))}};e.QInARepoDimension.exportResultSetAttributeDetails=function(e){let t=false;let i=e.getResultSetAttributes();if(i.getModCounter()>0){t=true}else{let e=i.size();for(let n=0;n<e;n++){let e=i.get(n);let r=e.getResultSetFields();if(r.getModCounter()>0){t=true;break}}}return t};e.QInARepoDimension.exportResultSetAttributes=function(t,i,n){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||e.QInARepoDimension.exportResultSetAttributeDetails(n)){let t=i.putNewList("ResultSetAttributeNodes");let r=i.putNewList("ResultSetAttributeFields");let o=n.getResultSetAttributes();let l=o.size();for(let i=0;i<l;i++){let n=o.get(i);t.addString(n.getName());let l=r.addNewList();let a=n.getResultSetFields();let p=a.size();for(let t=0;t<p;t++){let i=l.addNewStructure();let n=a.get(t);i.putString("Name",n.getName());let r=n.getObtainability();if(e.notNull(r)){i.putString("Obtainability",r.getName())}}}}};e.QInARepoDimension.exportResultSetFields=function(t,i,n){let r=n.getResultSetFields();if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.getModCounter()>0){let t=i.putNewList("ResultSetFields");let n=r.size();for(let i=0;i<n;i++){let n=t.addNewStructure();let o=r.get(i);n.putString("Name",o.getName());let l=o.getObtainability();if(e.notNull(l)){n.putString("Obtainability",l.getName())}}}};e.QInARepoDimension.importRsAttributeNodes=function(t,i,n){let r=i.getListByKey("ResultSetAttributeNodes");let o=i.getListByKey("ResultSetAttributeFields");let l=n.getQueryModelBase();let a=l.getQueryManagerBase().getInitSettings().isRequestingMinimizedAttributes();if(e.notNull(r)){let i=n.getResultSetAttributes();i.clear();let l=r.size();for(let p=0;p<l;p++){let l=r.getStringAt(p);let s=n.getAttributeByName(l);if(e.notNull(s)){i.add(s);e.QInARepoDimension.importRsFieldsForAttribute(t,s,o,p)}else if(a&&t.getMessage(e.Severity.WARNING,e.ErrorCodes.ATTRIBUTE_NOT_FOUND)===null){t.addWarning(e.ErrorCodes.ATTRIBUTE_NOT_FOUND,"Some attributes saved in the Story no more exist in the Query")}}}};e.QInARepoDimension.importRsFields=function(t,i,n){let r=i.getListByKey("ResultSetFields");if(e.notNull(r)){let i=n.getQueryModelBase();let o=i.getQueryManagerBase().getInitSettings().isRequestingMinimizedAttributes();let l=n.getResultSetFields();let a=l.createListCopy();l.clear();let p=r.size();let s=false;for(let i=0;i<p;i++){let a;let p=null;if(r.getElementTypeAt(i)===e.PrElementType.STRING){a=r.getStringAt(i)}else{a=r.getStructureAt(i).getStringByKey("Name");let t=r.getStructureAt(i).getStringByKey("Obtainability");if(e.XStringUtils.isNotNullAndNotEmpty(t)){p=e.ObtainabilityType.lookup(t)}}let u=n.getFieldByName(a);if(e.notNull(u)){l.add(u);if(e.notNull(p)){u.setObtainability(p)}}else if(o&&t.getMessage(e.Severity.WARNING,e.ErrorCodes.ATTRIBUTE_NOT_FOUND)===null){t.addWarning(e.ErrorCodes.ATTRIBUTE_NOT_FOUND,"Some attributes saved in the Story no more exist in the Query");s=true}else{s=true}}e.QInARepoDimension.checkAddFallbackResultSetFields(s,l,n,a)}};e.QInARepoDimension.importRsFieldsForAttribute=function(t,i,n,r){if(e.isNull(n)||n.size()<=r){return}let o=n.getListAt(r);let l=i.getResultSetFields();let a=l.createListCopy();l.clear();let p=o.size();let s=i.getDimension().getQueryModelBase();let u=s.getQueryManagerBase().getInitSettings().isRequestingMinimizedAttributes();let g=false;for(let n=0;n<p;n++){let r;let a=null;if(o.getElementTypeAt(n)===e.PrElementType.STRING){r=o.getStringAt(n)}else{r=o.getStructureAt(n).getStringByKey("Name");let t=o.getStructureAt(n).getStringByKey("Obtainability");if(e.XStringUtils.isNotNullAndNotEmpty(t)){a=e.ObtainabilityType.lookup(t)}}let p=i.getFieldByName(r);if(e.isNull(p)){p=i.getDimension().getFieldByName(r)}if(e.notNull(p)){l.add(p);if(e.notNull(a)){p.setObtainability(a)}}else if(u&&t.getMessage(e.Severity.WARNING,e.ErrorCodes.ATTRIBUTE_NOT_FOUND)===null){t.addWarning(e.ErrorCodes.ATTRIBUTE_NOT_FOUND,"Some attributes saved in the Story no more exist in the Query");g=true}else{g=true}}e.QInARepoDimension.checkAddFallbackResultSetFields(g,l,i,a)};e.QInARepoDimension.prototype.addNewDimensionWithDummyMetadata=function(t,i,n,r){let o=e.QCacheKey.createByContextForDimension(i,r,null);let l=e.QDimensionMetadata.create(o);l.addSupportedFieldLayoutType(e.FieldLayoutType.ATTRIBUTE_BASED);l.addSupportedAxis(e.AxisType.FREE);l.addSupportedAxis(e.AxisType.ROWS);l.addSupportedAxis(e.AxisType.COLUMNS);if(t.getSession().hasFeature(e.FeatureToggleOlap.ALLOW_FREE_DIMENSIONS_ON_REPOSITORY_AXIS)){l.addSupportedAxis(e.AxisType.REPOSITORY)}l.setDimensionType(e.DimensionType.DIMENSION);let a=t.getApplication().getOlapEnvironment();a.setDimensionMetadata(l);let p=e.QDimension._create(i,n.getDimensionManagerBase());p.setName(r);p.setText(r);p.setMetadata(l);p.setSkipMetadataValidationOnRepoImport(true);n.addDimension(p);return p};e.QInARepoDimension.prototype.exportAlternativeFieldValues=function(e,t,i){this.exportAlternativeFieldValuesForKeyType(e,t,t.getAlternativeFieldValueMemberKeys(false),false,i);this.exportAlternativeFieldValuesForKeyType(e,t,t.getAlternativeFieldValueMemberKeys(true),true,i)};e.QInARepoDimension.prototype.exportAlternativeFieldValuesForKeyType=function(t,i,n,r,o){if(e.notNull(n)){let l=e.PrFactory.createList();let a=n.size();for(let t=0;t<a;t++){let a=n.get(t);let p=i.getAlternativeFieldValueFields(r,a);if(e.notNull(p)){let t=p.size();for(let n=0;n<t;n++){let t=p.get(n);let s=i.getAlternativeFieldValueLanguages(r,a,t);if(e.notNull(s)){let n=s.size();for(let p=0;p<n;p++){let n=s.get(p);let u=i.getAlternativeFieldValue(r,a,t,n);let g=i.getStructureMember(a);let y=e.XString.isEqual(e.AlternativeFieldValue.DISPLAY_DESCRIPTION.getName(),t)||e.XString.isEqual(e.AlternativeFieldValue.DISPLAY_NAME.getName(),t);let m=e.notNull(g)&&y;if(e.notNull(u)){if(m||i.getDimensionType()!==e.DimensionType.ACCOUNT||!o.getOriginalMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){if(m||e.notNull(g)&&!g.isModelDefinedMember()||!o.getOriginalMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){let i=l.addNewStructure();i.putBoolean("HierarchyKey",r);i.putString("MemberKey",a);i.putString("FieldName",t);i.putString("Language",n);i.putString("ValueType",e.QInAConverter.lookupValueTypeInA(u.getValueType()));i.putString("Value",u.getStringRepresentation())}}}}}}}}if(l.size()>0){t.put("AlternativeFieldValues",l)}}};e.QInARepoDimension.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDimensionProperties.QY_READ_MODE)){e.QInARepoUtils.setNameIfNotNull(n,"ReadMode",o.getReadMode(e.QContextType.RESULT_SET))}if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDimensionProperties.QY_SELECTOR_READ_MODE)){e.QInARepoUtils.setNameIfNotNull(n,"SelectorReadMode",o.getReadMode(e.QContextType.SELECTOR))}let l=o.getAxisType();if(o.getTagging().containsKey(e.QTransientConstants.SECONDARY_MEASURE_DIMENSION_ON_COLUMN)){l=e.AxisType.FREE}n.putString("Axis",e.QInAConverter.lookupAxisTypeInA(l));if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDimensionProperties.QY_SKIP)){let i=o.getSkipEntries();if(i>0||t.getMode()===e.QModelFormat.INA_REPOSITORY_DELTA&&o.hasPropertyChanged(e.QDimensionProperties.QY_SKIP)){n.putInteger("Skip",i)}}if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDimensionProperties.QY_TOP)){let i=o.getTopEntries();if(i>0||t.getMode()===e.QModelFormat.INA_REPOSITORY_DELTA&&o.hasPropertyChanged(e.QDimensionProperties.QY_TOP)){n.putInteger("Top",i)}}if(o.supportsCumulative()&&(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDimensionProperties.IS_CUMULATIVE))){n.putBoolean("IsCummulative",o.isCumulative())}t.exportHierarchy(o,n);if(o.supportsTotals()){if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||o.getResultStructureController().getModCounter()>0){t.exportTotals(o,n)}}if(o.getStructureLayout()!==null){t.exportMembers(o,n)}this.exportFieldLayout(t,n,o);this.exportAlternativeFieldValues(n,o,t);if(o.getSkipMetadataValidationOnRepoImport()){n.putBoolean("SkipMetadataValidationOnRepoImport",true)}if(o.getPlaceholderIds()!==null&&o.getPlaceholderIds().size()>0&&t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA){let e=n.putNewList("PlaceholderIds");e.addAllStrings(o.getPlaceholderIds())}let a=o.getPlaceholderIdMemberMap().getKeysAsReadOnlyList();if(o.getPlaceholderIds()!==null&&o.getPlaceholderIds().size()>0){let e=n.putNewStructure("PlacholderIdMapping");for(let t=0;t<a.size();t++){let i=a.get(t);let n=o.getPlaceholderIdMemberMap().getByKey(i);e.putString(i,n.getAliasName())}}let p=o.getOverdefinedMemberManager().getVisibilityOverrideMap();let s=p.getKeysAsReadOnlyList();if(s.size()>0){let t=n.putNewStructure("VisibilityOverride");for(let i=0;i<s.size();i++){let n=p.getByKey(s.get(i));if(e.isNull(n)){n=e.ResultVisibility.VISIBLE}t.putString(s.get(i),e.QInAConverter.lookupResultSetVisibilityInA(n))}}let u=o.getOverdefinedMemberManager().getNumericScaleOverrideMap();s=u.getKeysAsReadOnlyList();if(s.size()>0){let e=n.putNewStructure("NumericScaleOverride");for(let t=0;t<s.size();t++){let i=u.getByKey(s.get(t));e.putInteger(s.get(t),i.getInteger())}}let g=o.getOverdefinedMemberManager().getNumericShiftOverrideMap();s=g.getKeysAsReadOnlyList();if(s.size()>0){let e=n.putNewStructure("NumericShiftOverride");for(let t=0;t<s.size();t++){let i=g.getByKey(s.get(t));e.putInteger(s.get(t),i.getInteger())}}let y=o.getOverdefinedMemberManager().getNumericPrecisionOverrideMap();s=y.getKeysAsReadOnlyList();if(s.size()>0){let e=n.putNewStructure("NumericPrecisionOverride");for(let t=0;t<s.size();t++){let i=y.getByKey(s.get(t));e.putInteger(s.get(t),i.getInteger())}}if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA){n.putStringNotNull("AccountTypeAttributeName",o.getMetadata().getAccountTypeAttributeName());let e=o.getMetadata().hasDayTimeYYYYMMDDFormat();if(e){n.putBoolean("HasDayTimeYYYYMMDDFormat",e)}}let m=o.getOverrideText();if(e.XStringUtils.isNotNullAndNotEmpty(m)){n.putString("OverrideText",m)}if(t.getOriginalMode()===e.QModelFormat.INA_CLONE){let t=o.getRuntimeDisplayGroupName();if(e.XStringUtils.isNotNullAndNotEmpty(t)){n.putString("DisplayGroupName",t);n.putStringNotNullAndNotEmpty("DisplayGroupDescription",o.getRuntimeDisplayGroupText())}}if(o.isTotalsModified()){n.putBoolean("TotalsModified",true)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoDimension.prototype.exportFieldLayout=function(t,i,n){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.hasPropertyChanged(e.QDimensionProperties.QY_FIELD_LAYOUT_TYPE)){let t=n.getFieldLayoutType();i.putString("FieldLayoutType",e.QInAConverter.lookupFieldLayoutTypeInA(t))}let r=i.putNewList("FieldSettings");e.QInARepoDimension.exportListOfFields(n.getFields(),r,t);if(!n.isUseServerDefaultTextField()){i.putString("ClientDefaultTextAttribute",n.getClientDefaultTextField().getName())}if(!n.isUseServerDefaultKeyField()){i.putString("ClientDefaultKeyAttribute",n.getClientDefaultKeyField().getName())}e.QInARepoDimension.exportResultSetFields(t,i,n);let o=n.getDefaultResultSetTextField();if(e.notNull(o)&&o.haveAnyInAPropertiesChanged()||n.getShouldUseActualTextField()){i.putBoolean("TextFieldModified",true)}e.QInARepoDimension.exportResultSetAttributes(t,i,n)};e.QInARepoDimension.prototype.getComponentType=function(){return e.OlapComponentType.ABSTRACT_DIMENSION};e.QInARepoDimension.prototype.importAlternativeFieldValues=function(t,i,n){let r=t.getListByKey("AlternativeFieldValues");if(e.notNull(r)){let t=r.size();for(let o=0;o<t;o++){let t=r.get(o);if(t.isStructure()){let r=t;let o=r.getStringByKey("ValueType");let l=e.QInAConverter.lookupValueType(o);let a=r.getStringByKey("Value");let p=null;if(l===e.XValueType.INTEGER){p=e.XIntegerValue.create(e.XInteger.convertFromStringWithRadix(a,10))}else if(l===e.XValueType.LONG){p=e.XLongValue.create(e.XLong.convertFromString(a))}else if(l===e.XValueType.DOUBLE){p=e.XDoubleValue.create(e.XDouble.convertFromString(a))}else if(l===e.XValueType.STRING){p=e.XStringValue.create(a)}else if(l===e.XValueType.DATE){p=e.XDate.createDateFromIsoFormat(a)}else if(l===e.XValueType.DATE_TIME){p=e.XDateTime.createDateTimeFromIsoFormat(a)}if(e.notNull(p)){let t=r.getBooleanByKey("HierarchyKey");let o=r.getStringByKey("MemberKey");let l=r.getStringByKey("FieldName");let a=r.getStringByKey("Language");let s=e.XString.isEqual(e.AlternativeFieldValue.DISPLAY_DESCRIPTION.getName(),l)||e.XString.isEqual(e.AlternativeFieldValue.DISPLAY_NAME.getName(),l);if(s||i.getDimensionType()!==e.DimensionType.ACCOUNT||!n.getOriginalMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){let r=i.getStructureMember(o);if(e.notNull(r)&&!r.isModelDefinedMember()||!n.getOriginalMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){i.setAlternativeFieldValue(t,o,l,p,a)}}}}}}};e.QInARepoDimension.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=o.getQueryModel();let a=n;let p=i.getStringByKey("Name");if(e.isNull(a)){if(e.notNull(l)){if(e.isNull(p)){if(i.getBooleanByKeyExt("MeasureStructure",false)){let t=l.getMeasureDimension();if(e.notNull(t)){p=t.getName()}}else if(i.getBooleanByKeyExt("SecondaryStructure",false)){let t=l.getDimensionByType(e.DimensionType.SECONDARY_STRUCTURE);if(e.notNull(t)){p=t.getName()}}}a=l.getDimensionManagerBase().getDimensionByNameInternal(p);let n=i.getBooleanByKeyExt("SkipMetadataValidationOnRepoImport",false);if(e.isNull(a)&&n){a=this.addNewDimensionWithDummyMetadata(t,o,l,p)}if(e.isNull(a)){t.addWarning(e.ErrorCodes.INVALID_DIMENSION,e.XStringUtils.concatenate3("Dimension '",p,"' not found in QueryModel! Can't deserialize dimension."));let n=i.getStringByKey("Axis");if(e.XString.isEqual(n,e.AxisType.ROWS.getName())||e.XString.isEqual(n,e.AxisType.COLUMNS.getName())){t.addWarning(e.ErrorCodes.MISSING_DIMENSION_ON_ROWS_OR_COLUMNS,e.XStringUtils.concatenate3("Dimension '",p,"' used in Rows Axis or Columns Axis is not found in QueryModel."))}}}}if(e.notNull(a)){let n=i.getBooleanByKeyExt("IsDelta",false);let r=false;if(e.notNull(l)&&l.getMeasureDimension()!==null){r=e.XString.isEqual(p,l.getMeasureDimension().getName())}if(n&&a.getDimensionType()===e.DimensionType.ACCOUNT&&t.getSession().hasFeature(e.FeatureToggleOlap.SFX_STORE_HIERARCHY_MEMBER_NAMES_AS_FLAT)&&t.getSession().hasFeature(e.FeatureToggleOlap.MULTIPLE_ACCOUNT_HIERARCHIES)){a.setHierarchicalDimensionMemberNamesStoredAsFlat(true)}let s=a.getPlaceholderIdMemberMap().getValuesAsReadOnlyList();let u=i.getListByKey("PlaceholderIds");if(e.notNull(u)&&(n||!r)){a.clearPlaceholderIds()}if(a.getPlaceholderIds().size()===0&&e.notNull(u)){for(let e=0;e<u.size();e++){let i=u.getStringAt(e);i=this.migratePlaceholderId(t,l,i);a.addPlaceholderId(i)}}if(s.size()>a.getPlaceholderIdMemberMap().getValuesAsReadOnlyList().size()){let e=s.getIterator();while(e.hasNext()){let t=e.next();if(a.getPlaceholderIdByAlias(t.getAliasOrMemberName())===null){a.assignFreePlaceholderToMember(t)}}}if(!n){if(t.getOriginalMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){a.clearNonModelDefinedMemberAlternativeFieldValues()}else{a.clearAlternativeFieldValues()}}if(!n){t.importHierarchy(a,i)}if(n&&t.getSession().hasFeature(e.FeatureToggleOlap.LAZY_LOADING_SFX_ACCOUNT_MEMBERS)&&a.getDimensionType()===e.DimensionType.ACCOUNT){a.setStructureMemberLazyLoader(e.InARepoStructureMemberLazyLoader.create(a,t.getMode(),i))}else{t.importMembers(i,a,o)}if(!n){this.importFieldsLayout(t,i,a,o);let n=l.getModelCapabilities();if(!n.supportsExtendedSort()){if(n.supportsDimensionSorting(a,e.SortType.MEMBER_KEY)){let t=i.getIntegerByKeyExt("SortOrder",e.QInAConverter.lookupSortDirectionInA(e.XSortDirection.DEFAULT_VALUE));let n=e.QInAConverter.lookupSortDirection(t);a.getResultSetSorting().setDirection(n)}}if(t.m_capabilities.supportsCummulative()&&a.supportsCumulative()){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("IsCummulative")){a.setIsCumulative(i.getBooleanByKeyExt("IsCummulative",false))}}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("Skip")){let e=i.getIntegerByKeyExt("Skip",0);a.setSkipEntries(e)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("Top")){let e=i.getIntegerByKeyExt("Top",0);a.setTopEntries(e)}let r=i.getStringByKey("ReadMode");if(e.notNull(r)){let t=e.QInAConverter.lookupReadMode(r);a.setReadModeGraceful(e.QContextType.RESULT_SET,t)}let p=i.getStringByKey("SelectorReadMode");if(e.notNull(p)){let t=e.QInAConverter.lookupReadMode(p);a.setReadModeGraceful(e.QContextType.SELECTOR,t)}t.importTotals(i,a.getResultStructureControllerBase(),o);this.importAlternativeFieldValues(i,a,t);let s=i.getStructureByKey("PlacholderIdMapping");if(e.notNull(s)){let e=s.getKeysAsReadOnlyList();for(let i=0;i<e.size();i++){let n=e.get(i);let r=s.getStringByKey(n);n=this.migratePlaceholderId(t,l,n);a.assignPlaceholderIdByAlias(n,r)}}let u;let g;if(a.getModelCapabilities().supportsMemberVisibility()&&i.containsKey("VisibilityOverride")){let t=i.getStructureByKey("VisibilityOverride");g=t.getKeysAsReadOnlyList();for(let i=0;i<g.size();i++){u=g.get(i);let n=e.QInAConverter.lookupResultSetVisibility(t.getStringByKey(u));a.getOverdefinedMemberManager().setVisibilityOverride(u,n)}}if(i.containsKey("NumericScaleOverride")){let e=i.getStructureByKey("NumericScaleOverride");g=e.getKeysAsReadOnlyList();for(let t=0;t<g.size();t++){u=g.get(t);a.getOverdefinedMemberManager().setNumericScaleOverride(u,e.getIntegerByKey(u))}}if(a.getModelCapabilities().supportsMemberVisibility()&&i.containsKey("NumericShiftOverride")){let e=i.getStructureByKey("NumericShiftOverride");g=e.getKeysAsReadOnlyList();for(let t=0;t<g.size();t++){u=g.get(t);a.getOverdefinedMemberManager().setNumericShiftOverride(u,e.getIntegerByKey(u))}}if(i.containsKey("NumericPrecisionOverride")){let e=i.getStructureByKey("NumericPrecisionOverride");g=e.getKeysAsReadOnlyList();for(let t=0;t<g.size();t++){u=g.get(t);a.getOverdefinedMemberManager().setNumericPrecisionOverride(u,e.getIntegerByKey(u))}}let y=i.getStringByKey("OverrideText");if(e.XStringUtils.isNotNullAndNotEmpty(y)){a.setOverrideText(y)}}let g=i.getStringByKey("AccountTypeAttributeName");let y=a.getMetadataBase();if(e.notNull(g)){y.setAccountTypeAttributeName(g)}let m=i.getBooleanByKeyExt("HasDayTimeYYYYMMDDFormat",false);if(m){y.setHasDayTimeYYYYMMDDFormat(m)}a.setTotalsModified(i.getBooleanByKeyExt("TotalsModified",a.isTotalsModified()))}return a};e.QInARepoDimension.prototype.importFieldsLayout=function(t,i,n,r){let o=i.getListByKey("FieldSettings");if(e.notNull(o)){let i=o.size();for(let l=0;l<i;l++){t.importComponent(e.OlapComponentType.FIELD,o.getStructureAt(l),null,n,r)}}let l=i.getListByKey("AttributeSettings");if(e.notNull(l)){let e=l.size();for(let i=0;i<e;i++){t.importAttribute(l.getStructureAt(i),n,r)}}let a=n.getFieldByName(i.getStringByKey("ClientDefaultTextAttribute"));n.setClientDefaultTextField(a);a=n.getFieldByName(i.getStringByKey("ClientDefaultKeyAttribute"));n.setClientDefaultKeyField(a);e.QInARepoDimension.importRsFields(t,i,n);e.QInARepoDimension.importRsAttributeNodes(t,i,n);if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("FieldLayoutType")){let t=e.QInAConverter.lookupFieldLayoutType(i.getStringByKey("FieldLayoutType"));n.setFieldLayoutType(t)}if(i.containsKey("TextFieldModified")){n.getFieldContainerBase().setShouldUseActualTextField(i.getBooleanByKey("TextFieldModified"))}};e.QInARepoDimension.prototype.migratePlaceholderId=function(t,i,n){let r=n;let o=e.XStringUtils.concatenate2("].&[",e.QModelConstants.CALCULATION_PLACEHOLDER_ID_PREFIX);if(t.getSession().hasFeature(e.FeatureToggleOlap.MULTIPLE_ACCOUNT_HIERARCHIES)&&e.notNull(i)&&i.getDimensionByType(e.DimensionType.ACCOUNT)!==null&&e.XString.startsWith(n,"[")&&e.XString.indexOf(n,o)!==-1){let t=e.XString.indexOf(n,e.QModelConstants.CALCULATION_PLACEHOLDER_ID_PREFIX);let i=e.XString.indexOfFrom(n,"]",t);r=e.XString.substring(n,t,i)}return r};e.QInARepoDimensions=function(){};e.QInARepoDimensions.prototype=new e.QInARepository;e.QInARepoDimensions.prototype._ff_c="QInARepoDimensions";e.QInARepoDimensions._isForRendering=function(t,i){let n=i.getAxisType();return t===e.QModelFormat.INA_REPOSITORY_DATA_RENDERING&&n!==e.AxisType.ROWS&&n!==e.AxisType.COLUMNS};e.QInARepoDimensions.exportAxisDimensions=function(t,i,n,r){let o=i.getDimensionCount();for(let l=0;l<o;l++){let o=i.get(l);if(e.QInARepoDimensions._isForRendering(t.getMode(),o)){continue}e.QInARepoDimensions.exportDimension(t,o,n,r)}};e.QInARepoDimensions.exportAxisDimensionsWithHeuristic=function(t,i,n,r,o){let l=i.getQueryModel();let a=t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY_DATA);let p=l.isOptimizedExportModeActive();let s=l.skipSerializationOfUnusedDimensionAndSort()&&(t.m_mode===e.QModelFormat.INA_REPOSITORY_DATA||t.m_mode===e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS);let u=i.getDimensionCount();for(let l=0;l<u;l++){let u=i.get(l);if(p&&u.isIgnoredOnOptimizedExport()||s&&!u.isHierarchyActive()){continue}if(a&&!r.contains(u.getName())){continue}e.QInARepoDimensions.exportDimension(t,u,n,o)}};e.QInARepoDimensions.exportDimension=function(t,i,n,r){if(!r.contains(i.getName())){r.add(i.getName());let o=i.getDimensionType().isTypeOf(e.DimensionType.FORMULA_CALCULATED_DIMENSION)&&i.getTagging().containsKey(e.QTransientConstants.TAG_IS_TRANSIENT)&&i.getAxis()!==null&&i.getAxisType()===e.AxisType.FREE;let l=!o&&(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.getDimensionType().isTypeOf(e.DimensionType.CALCULATED_DIMENSION)||i.getModCounter()>0);if(l){n.add(t.exportDimension(i,null))}}};e.QInARepoDimensions.prototype.containsFormulaCalculatedDimensionInInaList=function(t,i){let n=t.size();for(let r=0;r<n;r++){let n=t.getStructureAt(r);let o=n.getStringByKey("Name");if(e.XString.isEqual(i,o)){return n.containsKey("CType")&&e.XComponentType.lookupComponentType(n.getStringByKey("CType"))===e.DimensionType.FORMULA_CALCULATED_DIMENSION}}return false};e.QInARepoDimensions.prototype.exportComponentWithList=function(t,i,n){let r=e.PrFactory.createList();let o=i;let l=e.XHashSetOfString.create();e.QInARepoDimensions.exportAxisDimensions(t,o.getAxis(e.AxisType.ROWS),r,l);e.QInARepoDimensions.exportAxisDimensions(t,o.getAxis(e.AxisType.COLUMNS),r,l);let a=e.XHashSetOfString.create();if(t.m_mode===e.QModelFormat.INA_REPOSITORY_DATA||t.m_mode===e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){e.DimensionUsageAnalyzer2.setupHeuristic(o,a)}e.QInARepoDimensions.exportAxisDimensionsWithHeuristic(t,o.getAxis(e.AxisType.FREE),r,a,l);return r};e.QInARepoDimensions.prototype.exportComponentWithStructure=function(t,i,n,r){let o=this.exportComponentWithList(t,i,r);n.put("Elements",o);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoDimensions.prototype.getComponentType=function(){return e.OlapComponentType.DIMENSIONS};e.QInARepoDimensions.prototype.getTagName=function(){return"DimensionsRepo"};e.QInARepoDimensions.prototype.importComponentWithList=function(t,i,n,r,o){let l=n;if(e.notNull(i)){let n=t.getOriginalMode();if(n.isTypeOf(e.QModelFormat.INA_REPOSITORY)&&!n.isTypeOf(e.QModelFormat.INA_REPOSITORY_DELTA)){let t=l.getLoadedDimensions();let n=t.size();for(let r=n-1;r>=0;r--){let n=t.get(r);let o=n.getName();if(n.getDimensionType().isTypeOf(e.DimensionType.FORMULA_CALCULATED_DIMENSION)&&e.notNull(o)){if(!this.containsFormulaCalculatedDimensionInInaList(i,o)){l.removeCalculatedDimensionByName(o)}}}}let r=l.getDimensionManagerBase();let o=l.getFreeAxis();o.addAll(r);let a=i.size();let p=r.getDimensionReferences();for(let n=0;n<a;n++){let o=i.getStructureAt(n);let a=o.getStringByKey("Name");if(o.containsKey("CType")&&e.XComponentType.lookupComponentType(o.getStringByKey("CType"))===e.DimensionType.FORMULA_CALCULATED_DIMENSION){let e=l.getDimensionByName(a);let i=t.importFormulaCalculatedDimension(o,l,e);r.finalizeDimensionMetadataSetup(i)}}let s=l.skipSerializationOfUnusedDimensionAndSort()&&(t.m_mode===e.QModelFormat.INA_REPOSITORY_DATA||t.m_mode===e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS);for(let n=0;n<a;n++){let o=i.getStructureAt(n);let a=o.getStringByKey("Name");let u=o.getStringByKey("Axis");let g=e.QInAConverter.lookupAxisType(u);if(s&&g!==e.AxisType.ROWS&&g!==e.AxisType.COLUMNS){let t=o.getStructureByKey("HierarchyRepo");if(e.isNull(t)||!t.getBooleanByKeyExt("HierarchyActive",false)){continue}}let y=null;if(o.containsKey("FieldMappings")){let e=t.importCalculatedDimension(o,l);r.addDimension(e);r.finalizeDimensionMetadataSetup(e)}else if(!o.containsKey("CType")||e.XComponentType.lookupComponentType(o.getStringByKey("CType"))!==e.DimensionType.FORMULA_CALCULATED_DIMENSION){if(p.containsKey(a)){y=r.getDimensionByNameFromExistingMetadata(a)}t.importDimension(o,l)}if(e.isNull(y)){y=r.getDimensionByNameInternal(a);if(e.isNull(y)){continue}}if(e.isNull(u)){u=o.getStringByKeyExt("AxisDefault","Free")}l.getAxis(e.QInAConverter.lookupAxisType(u)).addForRepoImport(y)}}return l};e.QInARepoDimensions.prototype.importComponentWithStructure=function(t,i,n,r,o){if(e.notNull(i)){let e=i.getListByKey("Elements");this.importComponentWithList(t,e,n,r,o)}return n};e.QInARepoDrillManager=function(){};e.QInARepoDrillManager.prototype=new e.QInARepository;e.QInARepoDrillManager.prototype._ff_c="QInARepoDrillManager";e.QInARepoDrillManager.prototype.exportComponentWithList=function(t,i,n){let r=i;let o=r.getModelCapabilities();let l=null;let a=r.getDrillOperationsForInARepo();let p=a.size();if(p>0){let i=r.getQueryModel();let n=null;let s=null;l=e.PrFactory.createList();let u=null;if(o.supportsHierarchyNavigationDeltaMode()){u=a.get(p-1);let i=u.getTargetDimension();if(e.notNull(i)&&i.isHierarchyNavigationDeltaMode()){s=i;n=t.exportDrillOperation(u)}}let g=t.isAbap(i);let y;for(y=0;y<p;y++){let i=a.get(y);if(i.getType()===e.DrillOperationType.CONTEXT){let n=i.getTargetDimension();if(e.isNull(s)||s!==n){if(!g&&n.getInitialDrillLevel()<0&&i.getDrillState()===e.DrillState.EXPANDED){continue}l.add(t.exportDrillOperation(i))}}}if(e.notNull(n)){l.add(n)}if(l.isEmpty()){l=null}}return l};e.QInARepoDrillManager.prototype.exportComponentWithStructure=function(t,i,n,r){let o=this.exportComponentWithList(t,i,r);if(e.notNull(o)){n.put("Elements",o)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoDrillManager.prototype.getComponentType=function(){return e.OlapComponentType.DRILL_MANAGER};e.QInARepoDrillManager.prototype.getTagName=function(){return"HierarchyNavigationsRepo"};e.QInARepoDrillManager.prototype.getZoomDrillPath=function(t,i,n,r){let o=e.XList.create();let l=n.getListByKey("DrillContextMembers");if(e.notNull(l)){let e=l.size();for(let n=0;n<e;n++){let e=l.getStructureAt(n);let a=t.importDrillPathElement(e,i,r);o.add(a)}}let a=n.getStringByKey("DrillState");let p=n.getStructureByKey("DrillMember");if(e.isNull(p)||e.isNull(a)){return null}let s=t.importDrillPathElement(p,i,r);o.add(s);return o};e.QInARepoDrillManager.prototype.importComponentWithList=function(t,i,n,r,o){let l=n;let a;l.removeAllContextDrillOperations();l.removeZoomDrillOperationsByDimension(null);if(e.notNull(i)){let n=-1;a=i.size();for(let r=0;r<a;r++){let a=i.getStructureAt(r);let p=a.getIntegerByKeyExt("ZoomDrillStackPosition",-1);if(p===-1){t.importDrillOperation(a,l,o)}else if(p>-1){let i=this.getZoomDrillPath(t,l,a,o);if(e.XCollectionUtils.hasElements(i)){if(p!==n){let t=i.get(i.size()-1).getDimension();if(e.notNull(t)){l.pushEmptyZoomDrillForDimension(t);n=p}}let t=a.getIntegerByKeyExt("DrillOffset",0)>0;let r=l.addZoomDrillPath(i,t);if(a.containsKey("HierarchyNavigationCounter")){r.setDrillCounter(a.getIntegerByKey("HierarchyNavigationCounter"))}}}}}return n};e.QInARepoDrillManager.prototype.importComponentWithStructure=function(t,i,n,r,o){if(e.notNull(i)){let e=i.getListByKey("Elements");this.importComponentWithList(t,e,n,r,o)}return n};e.QInARepoDrillPathElement=function(){};e.QInARepoDrillPathElement.prototype=new e.QInARepository;e.QInARepoDrillPathElement.prototype._ff_c="QInARepoDrillPathElement";e.QInARepoDrillPathElement.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;let l=o.getName();let a=o.getFieldName();let p=o.getShadowKeyFieldValue();if(e.XStringUtils.isNotNullAndNotEmpty(p)){l=p;a=o.getShadowKeyFieldName()}if(e.isNull(l)){n.putNull("Member")}else{let i=e.QInAExportUtil.getMeasureMemberNameByAlias(o.getQueryModel(),l,t);n.putString("Member",i)}n.putString("FieldName",a);n.putStringNotNullAndNotEmpty("FieldNameZoom",o.getZoomKeyFieldName());n.putStringNotNullAndNotEmpty("FieldValueZoom",o.getZoomKeyFieldValue());let s=o.getDimension();e.QInAExportUtil.setNameIfNotNull(n,"DimensionName",s);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoDrillPathElement.prototype.getComponentType=function(){return e.MemberType.DRILL_PATH_ELEMENT};e.QInARepoDrillPathElement.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=r;let a=l.getContext().getQueryModel();let p=i.getStringByKey("FieldName");let s=i.getStringByKey("DimensionName");let u;if(e.XStringUtils.isNotNullAndNotEmpty(s)){u=a.getDimensionByNameFromExistingMetadata(s)}else{let t=a.getFieldByNameOrAlias(p);if(e.isNull(t)){u=a.getDimensionByNameFromExistingMetadata(p);if(e.notNull(u)){t=u.getKeyField();p=t.getName()}}else{u=t.getDimension()}}let g=e.QDrillPathElement._create(o);g.setDimension(u);let y=i.getStringByKey("Member");g.setName(y);g.setFieldName(p);g.setZoomKeyFieldName(i.getStringByKey("FieldNameZoom"));g.setZoomKeyFieldValue(i.getStringByKey("FieldValueZoom"));return g};e.QInARepoDrillPathOperation=function(){};e.QInARepoDrillPathOperation.prototype=new e.QInARepository;e.QInARepoDrillPathOperation.prototype._ff_c="QInARepoDrillPathOperation";e.QInARepoDrillPathOperation.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;if(o.getType()===e.DrillOperationType.CONTEXT){let i=e.QInAConverter.lookupDrillStateInA(o.getDrillState());n.putString("DrillState",i);if(t.getOriginalMode().isTypeOf(e.QModelFormat.INA_CLONE)){n.putInteger("HierarchyNavigationCounter",o.getDrillCounter())}let r=o.getRelativeLevelCount();if(r!==1){n.putInteger("DrillLevel",r)}if(o.getZoomStackPosition()!==-1){n.putInteger("ZoomDrillStackPosition",o.getZoomStackPosition())}if(o.getRelativeLevelOffset()!==0){n.putInteger("DrillOffset",o.getRelativeLevelOffset())}let l=o.getDrillPath();let a=l.size();if(a>0){let i=l.get(a-1);let r;if(!i.getTagging().containsKey(e.QTransientConstants.TAG_IS_TRANSIENT)){r=t.exportDrillPathElement(i,false);n.put("DrillMember",r)}if(a>1){let o=e.PrFactory.createList();n.put("DrillContextMembers",o);for(let n=0;n<a-1;n++){i=l.get(n);if(!i.getTagging().containsKey(e.QTransientConstants.TAG_IS_TRANSIENT)){r=t.exportDrillPathElement(i,true);o.add(r)}}}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoDrillPathOperation.prototype.getComponentType=function(){return e.OlapComponentType.DRILL_OPERATION};e.QInARepoDrillPathOperation.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=null;let a=r;let p=i.getStringByKey("DrillState");let s=i.getStructureByKey("DrillMember");if(e.notNull(s)&&e.notNull(p)){let n=e.XList.create();let r=i.getListByKey("DrillContextMembers");if(e.notNull(r)){let e=r.size();for(let i=0;i<e;i++){let e=r.getStructureAt(i);let l=t.importDrillPathElement(e,a,o);n.add(l)}}let u=t.importDrillPathElement(s,a,o);n.add(u);l=a.setDrillState(n,e.QInAConverter.lookupDrillStateOp(p));let g=i.getIntegerByKeyExt("DrillLevel",1);l.setRelativeLevelCount(g);if(i.containsKey("HierarchyNavigationCounter")){let e=i.getIntegerByKey("HierarchyNavigationCounter");l.setDrillCounter(e)}}return l};e.QInARepoExceptions=function(){};e.QInARepoExceptions.prototype=new e.QInARepository;e.QInARepoExceptions.prototype._ff_c="QInARepoExceptions";e.QInARepoExceptions.prototype.exportComponentWithList=function(e,t,i){let n=null;if(this.isVersion1(e,t)){n=this.exportFormatV1(e,t)}else if(this.isVersion2(e,t)){n=this.exportFormatV2(e,t)}return n};e.QInARepoExceptions.prototype.exportComponentWithStructure=function(t,i,n,r){let o=this.exportComponentWithList(t,i,r);if(e.notNull(o)){n.put("Elements",o)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoExceptions.prototype.exportEvaluates=function(t,i,n,r){let o=i.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||t.getModCounter()>0;if(o){if(t.hasElements()){let o=n.putNewList("EvaluateOn");let l=t.size();for(let n=0;n<l;n++){let l=o.addNewStructure();let a=t.get(n);l.putString("Name",a.getField().getName());l.putString("Evaluate",a.getEvaluate().toString());let p=a.getOperator();let s;if(p===e.ComparisonOperator.NOT_BETWEEN&&r){s="NOTBETWEEN"}else{s=e.QInAConverter.lookupComparisonInA(p)}l.putString("Comparison",s);e.QInAValueUtils.exportPlaceholderValue(i,"Low",l,a.getLowValue(),a.getValueType(),a.getQueryModel());if(!l.containsKey("Low")){l.putString("Low","")}if(p.getNumberOfParameters()>1){e.QInAValueUtils.exportPlaceholderValue(i,"High",l,a.getHighValue(),a.getValueType(),a.getQueryModel())}}}}};e.QInARepoExceptions.prototype.exportException=function(t,i,n){let r=e.PrFactory.createStructure();if(t.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA&&!i.isChangeable()&&i.hasPropertyChanged(e.QExceptionProperties.QY_ACTIVE)){r.putString("Name",i.getName());r.putBoolean("Active",i.isActive());r.putBoolean("Changegable",i.isChangeable())}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.isChangeable()){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QExceptionProperties.QY_ACTIVE)){r.putBoolean("Active",i.isActive())}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QExceptionProperties.QY_EVALUATE_BEFORE_POST_AGGREGATION)){r.putBoolean("EvaluateBeforePostAggregation",!i.isEvaluatedAfterCalculations())}r.putBoolean("Changegable",i.isChangeable());let o=i.getThresholds();this.exportThresholds(o,t,r,n);this.exportEvaluates(i.getEvaluates(),t,r,n);r.putString("Name",i.getName());r.putString("Text",i.getText());let l=i.getHeaderSetting();if(l!==e.QExceptionHeaderSettings.NONE){r.putString("ApplySettingsToHeader",l.getName())}r.putString("EvaluateDefault",i.getEvaluateDefault().toString())}let o=i.getSession().hasFeature(e.FeatureToggleOlap.INA_REPOSITORY_DELTA);if(o&&i.canMaterializeCompleteObject()){r.putBoolean("UserDefinedComponent",true)}return r};e.QInARepoExceptions.prototype.exportFormatV1=function(t,i){let n=null;let r=i.getExceptions();if(e.notNull(r)){let o=r.size();if(o>0){n=e.PrFactory.createList();let l=t.isAbap(i);for(let i=0;i<o;i++){let o=r.get(i);let a=t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.isChangeable()||o.getModCounter()>0;if(a){let i=this.exportException(t,o,l);if(e.isNull(i)){break}n.add(i)}}}}return n};e.QInARepoExceptions.prototype.exportFormatV2=function(t,i){let n=null;let r=i.getExceptionManager();let o=r.size();if(o>0){n=e.PrFactory.createList();let l=t.isAbap(i);for(let i=0;i<o;i++){let o=r.get(i);let a=t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.isChangeable()||o.getModCounter()>0;if(a){let i=this.getExportedExceptionStructureByName(n,o.getName());if(e.isNull(i)){i=this.exportException(t,o,l);if(e.notNull(i)){i.putNewList("StructureContext");n.add(i)}}if(e.notNull(i)){let e=i.getListByKey("StructureContext");this.exportStructureContextItem(t,e,o.getMeasure(),o);this.exportStructureContextItem(t,e,o.getStructure(),o)}}}}return n};e.QInARepoExceptions.prototype.exportSettings=function(t,i,n){let r=n.putNewList("Settings");let o=t.size();for(let n=0;n<o;n++){let o=t.get(n);let l=r.addNewStructure();l.putString("Name",o.getName());l.putInteger("Priority",o.getPriority());let a=o.getValue();if(e.isNull(a)||e.XString.isEqual(a,"")){i.addError(e.ErrorCodes.INVALID_PARAMETER,"Exception Threshold Setting is missing it's value")}else{l.putString("Value",a)}}};e.QInARepoExceptions.prototype.exportStructureContextItem=function(t,i,n,r){if(e.notNull(n)){let o=i.addNewStructure();let l=n.getDimension();o.putString("DimensionName",l.getName());o.putString("MemberName",n.getName());let a=r.isEvaluateAllMembers(l);let p=t.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA;let s=l.getDimensionType()===e.DimensionType.MEASURE_STRUCTURE;let u=s&&r.hasPropertyChanged(e.QExceptionProperties.QY_EVALUATE_ALL_MEMBERS_MEASURE_DIMENSION)||!s&&r.hasPropertyChanged(e.QExceptionProperties.QY_EVALUATE_ALL_MEMBERS_SECONDARY_STRUCTURE);if(!p&&a||p&&u){o.putBoolean("EvaluateAllMembers",a)}let g=r.getDisplayOnOtherMember(n);e.QInAExportUtil.setNameIfNotNull(o,"DisplayOnOtherMember",g)}};e.QInARepoExceptions.prototype.exportThresholds=function(t,i,n,r){let o=i.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||t.getModCounter()>0;if(o){let o=n.putNewList("Threshold");let l=t.size();for(let n=0;n<l;n++){let l=t.get(n);let a=o.addNewStructure();let p=l.getName();if(!e.XString.isEqual(p,"Settings")){a.putStringNotNull("Name",p)}let s=l.getOperator();let u;if(s===e.ComparisonOperator.NOT_BETWEEN&&r){u="NOTBETWEEN"}else{u=e.QInAConverter.lookupComparisonInA(s)}a.putString("Comparison",u);let g=l.getValueType()===e.XValueType.DOUBLE;if(l.getLowXValue()!==null){if(g){a.putDouble("Low",l.getLowValue())}else{a.putString("Low",l.getLow())}}if(l.getHighXValue()!==null&&s.getNumberOfParameters()>1){if(g){a.putDouble("High",l.getHighValue())}else{a.putString("High",l.getHigh())}}if(!l.isEmpty()){this.exportSettings(l,i,a)}else{a.putInteger("AlertLevel",l.getAlertLevel().getLevel())}}}};e.QInARepoExceptions.prototype.getComponentType=function(){return e.OlapComponentType.EXCEPTION_MANAGER};e.QInARepoExceptions.prototype.getExportedExceptionStructureByName=function(t,i){let n=null;let r=t.size();for(let o=0;o<r;o++){let r=t.getStructureAt(o);if(e.XString.isEqual(r.getStringByKey("Name"),i)){n=r;break}}return n};e.QInARepoExceptions.prototype.getMemberFromContextItem=function(t,i,n){let r=i.getStructureMember(t.getStringByKey("MemberName"));if(e.isNull(r)){let e=i.getAllStructureMembers();if(n&&!e.isEmpty()){r=e.get(0)}}return r};e.QInARepoExceptions.prototype.getTagName=function(){return"ExceptionsRepo"};e.QInARepoExceptions.prototype.importComponentWithList=function(e,t,i,n,r){let o=i;let l=o.getQueryModel().getExceptionManager();l.queueEventing();if(this.isVersion1(e,o)){l.removeAllExceptionsOfMeasure(o);this.importFormatV1(e,t,o,l)}else if(this.isVersion2(e,o)){l.removeClientExceptions();this.importFormatV2(e,t,o,l)}l.resumeEventing();return l};e.QInARepoExceptions.prototype.importComponentWithStructure=function(t,i,n,r,o){if(e.notNull(i)){let e=i.getListByKey("Elements");this.importComponentWithList(t,e,n,r,o)}return n};e.QInARepoExceptions.prototype.importContextItem=function(t,i,n,r,o,l){let a=r;let p=i.getDimensionByNameFromExistingMetadata(t.getStringByKey("DimensionName"));if(e.notNull(p)){if(e.isNull(a)){a=this.importExceptionWithoutEvaluates(o,n,l)}if(e.notNull(a)&&a.isChangeable()){let i=a.isEvaluateAllMembers(p);if(t.containsKey("EvaluateAllMembers")){i=t.getBooleanByKeyExt("EvaluateAllMembers",false)}let n=this.getMemberFromContextItem(t,p,i);if(e.notNull(n)){if(e.isNull(r)){this.importEvaluates(l,n,a,o)}if(p.isMeasureStructure()){a.setMeasure(n)}else{a.setStructure(n)}a.displayOnOtherMember(n,p.getStructureMember(t.getStringByKey("DisplayOnOtherMember")));a.setEvaluateAllMembers(p,i)}}}return a};e.QInARepoExceptions.prototype.importEvaluates=function(t,i,n,r){n.queueEventing();let o=t.getListByKey("EvaluateOn");if(!e.PrUtils.isListEmpty(o)){n.removeAllEvaluates();let t=o.size();let l=i.getQueryModel();for(let a=0;a<t;a++){let t=o.getStructureAt(a);let p=t.getStringByKey("Name");let s=l.getFieldByName(p);if(e.isNull(s)){let t=l.getDimensionByNameFromExistingMetadata(p);if(e.notNull(t)){s=t.getKeyField()}}if(e.isNull(s)){s=i.getKeyFieldValue().getField()}if(e.isNull(s)){r.addError(e.ErrorCodes.INVALID_TOKEN,e.XStringUtils.concatenate3("Could not find field '",p,"'!"));return}if(!t.containsKey("Low")){r.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate2("No low value for field: ",p));return}let u=s.getValueType();let g=e.QInAValueUtils.importValueByType(r,t,"Low",u);if(r.hasErrors()){r.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected low valuetype for field: ",u.getName()));return}let y=n._addNewEvaluateWithFieldInternal(s,g);if(t.containsKey("High")){let i=e.QInAValueUtils.importValueByType(r,t,"High",u);if(r.hasErrors()){r.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected high valuetype for field: ",u.getName()));return}y.setHighValue(i)}y.setEvaluate(e.QExceptionEvalType.lookupExceptionEvalType(t.getStringByKey("Evaluate")));let m=t.getStringByKey("Comparison");let c=e.QInAConverter.lookupComparison(m);if(e.isNull(c)){r.addError(e.ErrorCodes.INVALID_OPERATOR,e.XStringUtils.concatenate3("Unexpected comparison operator for evaluate: Operator: '",m,"'"));return}y.setOperator(c)}}n.resumeEventing()};e.QInARepoExceptions.prototype.importExceptionWithoutEvaluates=function(t,i,n){let r=n.getStringByKey("Name");let o=n.getStringByKey("Text");let l=n.getBooleanByKeyExt("Changegable",true);let a=l||t.getOriginalMode()===e.QModelFormat.INA_CLONE;let p=i.getByKey(r);if(e.isNull(p)&&a){p=i.addNewException(r,o);p.setIsChangeable(l)}if(e.notNull(p)){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.containsKey("Active")){let e=n.getBooleanByKeyExt("Active",true);p.setActive(e)}if(a){p.stopEventing();p.setIsChangeable(true);p.resumeEventing();if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.containsKey("EvaluateDefault")){let t=e.QExceptionEvalType.lookupExceptionEvalType(n.getStringByKey("EvaluateDefault"));p.setEvaluateDefault(t)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.containsKey("ApplySettingsToHeader")){let t=e.QExceptionHeaderSettings.lookupExceptionHeaderSetting(n.getStringByKey("ApplySettingsToHeader"));p.setHeaderSettingBase(t)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.containsKey("EvaluateBeforePostAggregation")){let e=n.getBooleanByKeyExt("EvaluateBeforePostAggregation",true);p.setEvaluationAfterCalculations(!e)}p.queueEventing();this.importThresholds(n,p);p.resumeEventing()}}return p};e.QInARepoExceptions.prototype.importFormatV1=function(t,i,n,r){if(!e.PrUtils.isListEmpty(i)){let o=i.size();for(let l=0;l<o;l++){let o=i.getStructureAt(l);let a=this.importExceptionWithoutEvaluates(t,r,o);if(e.notNull(a)&&a.isChangeable()){this.importEvaluates(o,n,a,t);a.setMeasure(n);a.setIsChangeable(o.getBooleanByKeyExt("Changegable",true))}}}};e.QInARepoExceptions.prototype.importFormatV2=function(t,i,n,r){if(!e.PrUtils.isListEmpty(i)){let o=i.size();for(let l=0;l<o;l++){let o=i.getStructureAt(l);let a=o.getListByKey("StructureContext");if(!e.PrUtils.isListEmpty(a)){let i=this.importContextItem(a.getStructureAt(0),n,r,null,t,o);if(e.notNull(i)&&i.isChangeable()){if(a.size()>1){this.importContextItem(a.getStructureAt(1),n,r,i,t,o)}i.setIsChangeable(o.getBooleanByKeyExt("Changegable",true))}}}}};e.QInARepoExceptions.prototype.importSettings=function(t,i){if(e.notNull(t)){let n=t.size();for(let r=0;r<n;r++){let n=t.getStructureAt(r);let o=n.getStringByKey("Name");let l=n.getIntegerByKey("Priority");let a=n.getStringByKey("Value");if(e.notNull(a)&&!e.XString.isEqual(a,"")){let e=i.addNewSetting(o,l);e.setValue(a)}}}};e.QInARepoExceptions.prototype.importThresholds=function(t,i){let n=t.getListByKey("Threshold");if(!e.PrUtils.isListEmpty(n)){i.removeAllThresholds();let t=n.size();for(let r=0;r<t;r++){let t=n.getStructureAt(r);let o=t.getIntegerByKeyExt("AlertLevel",-9999);let l;let a=!t.hasStringByKey("Low");if(a){l=i._addNewThresholdInternal(t.getDoubleByKey("Low"),e.QInAConverter.lookupAlertLevel(o))}else{l=i._addNewThresholdWithStringInternal(t.getStringByKey("Low"),e.QInAConverter.lookupAlertLevel(o))}let p=t.getStringByKey("Name");if(e.notNull(p)){l.setName(p)}let s=e.QInAConverter.lookupComparison(t.getStringByKey("Comparison"));l.setOperator(s);if(s.getNumberOfParameters()===2){if(a){let e=t.getDoubleByKey("High");l.setHighValue(e)}else{let e=t.getStringByKey("High");l.setHigh(e)}}this.importSettings(t.getListByKey("Settings"),l)}}};e.QInARepoExceptions.prototype.isVersion1=function(t,i){let n=i.getOlapComponentType();let r=i.getModelCapabilities().supportsExceptionsV2();return!r&&n.isTypeOf(e.MemberType.ABSTRACT_MEMBER)};e.QInARepoExceptions.prototype.isVersion2=function(t,i){let n=i.getOlapComponentType();let r=i.getModelCapabilities().supportsExceptionsV2();return r&&n.isTypeOf(e.OlapComponentType.QUERY_MODEL)};e.QInARepoField=function(){};e.QInARepoField.prototype=new e.QInARepository;e.QInARepoField.prototype._ff_c="QInARepoField";e.QInARepoField.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());n.putStringNotNull("DisplayFormat",o.getDisplayFormat());let l=o.getTextTransformation();if(e.notNull(l)){let t=e.QInAConverter.lookupTextTransformationInA(l);n.putString("TextTransformation",t)}if(o.getDimension().getDimensionType()===e.DimensionType.FORMULA_CALCULATED_DIMENSION){n.putString("ValueType",e.QInAConverter.lookupValueTypeInA(o.getValueType()));n.putString("PresentationType",o.getPresentationType().getName());let i=o;if(i.getFormulaItem()!==null){e.QInARepoMemberAbstract.exportFormulaItem(t,i.getFormulaItem(),n.putNewStructure("Formula"),o)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QFieldProperties.QY_AUTO_SIGN_FLIP)){if(i.isAutoSignFlip()||t.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA&&i.hasPropertyChanged(e.QFieldProperties.QY_AUTO_SIGN_FLIP)){n.putBoolean("AutoSignFlip",i.isAutoSignFlip())}}n.putStringNotNull("CrossCalculationMeasure",i.getCrossCalculationMeasure())}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoField.prototype.getComponentType=function(){return e.OlapComponentType.FIELD};e.QInARepoField.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(e.isNull(l)){let t=i.getStringByKey("Name");let n=r;if(n.getDimensionType()===e.DimensionType.FORMULA_CALCULATED_DIMENSION){l=n.addNewFormulaCalcField(e.PresentationType.lookup(i.getStringByKey("PresentationType")),t);l.setValueType(e.QInAConverter.lookupValueType(i.getStringByKey("ValueType")))}else{l=n.getFieldByName(t)}}if(e.notNull(l)){let n=i.getStringByKey("TextTransformation");if(e.notNull(n)){let t=e.QInAConverter.lookupTextTransformation(n);l.setTextTransformation(t)}l.setDisplayFormat(i.getStringByKey("DisplayFormat"));if(l.getDimension().getDimensionType()===e.DimensionType.FORMULA_CALCULATED_DIMENSION){let n=i.getStructureByKey("Formula");if(e.notNull(n)){let n=e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,l.getDimension(),i.getStructureByKey("Formula"),null,o);l.setFormulaItem(n)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("AutoSignFlip")){let e=i.getBooleanByKeyExt("AutoSignFlip",false);l.setAutoSignFlip(e)}let r=i.getStringByKey("CrossCalculationMeasure");if(e.notNull(r)){l.setCrossCalculationMeasure(r)}}}return l};e.QInARepoFilter=function(){};e.QInARepoFilter.prototype=new e.QInARepository;e.QInARepoFilter.prototype._ff_c="QInARepoFilter";e.QInARepoFilter.prototype.exportFilter=function(e,t,i,n,r){return e.exportFilterExpression(i)};e.QInARepoFilter.prototype.isValidFilterExpression=function(t){if(e.isNull(t)){return false}let i=t.getFilterRootElement();if(e.isNull(i)){return false}let n=i.getOlapComponentType();return n!==e.FilterComponentType.FILTER_ACROSS_MODELS&&n!==e.FilterComponentType.FILTER_MEASURE_BASED};e.QInARepoFilterAcrossModels=function(){};e.QInARepoFilterAcrossModels.prototype=new e.QInARepository;e.QInARepoFilterAcrossModels.prototype._ff_c="QInARepoFilterAcrossModels";e.QInARepoFilterAcrossModels.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());let l=n.putNewList("Links");let a=o.getLinks().getIterator();while(a.hasNext()){let i=l.addNewStructure();let n=a.next();e.QInARepoUtils.exportLinkPart(t,i.putNewStructure("FirstDimension"),n.getFirstPart());e.QInARepoUtils.exportLinkPart(t,i.putNewStructure("SecondDimension"),n.getSecondPart())}let p=n.putNewList("MeasureNames");p.addAllStrings(o.getMeasureNames());let s=n.putNewList("SecondaryMeasureNames");s.addAllStrings(o.getSecondaryMeasureNames());n.put("LayeredFilters",e.QInARepoUtils.exportLayeredFilters(t,o));if(o.getPreferPrequeryBasedStrategy()){n.putBoolean("PreferPrequeryBasedStrategy",true)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFilterAcrossModels.prototype.getComponentType=function(){return e.FilterComponentType.FILTER_ACROSS_MODELS};e.QInARepoFilterAcrossModels.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=i.getStringByKey("Name");let a=n;if(e.isNull(a)){a=e.QFactory.createFilterAcrossModels(o,l)}let p=i.getListByKey("Links");let s=p.size();for(let t=0;t<s;t++){let i=p.getStructureAt(t);let n=e.QInARepoUtils.importLinkPart(o,i.getStructureByKey("FirstDimension"));let r=e.QInARepoUtils.importLinkPart(o,i.getStructureByKey("SecondDimension"));if(o.getOlapEnv()!==null){let t=o.getOlapEnv().getSharedQueryManager(n.getQueryManagerKey());if(e.notNull(t)){n.setContext(e.QFactory.createKeyRefStoreContext(t,t.getClientQueryObjectStorageName()))}let i=o.getOlapEnv().getSharedQueryManager(r.getQueryManagerKey());if(e.notNull(i)){r.setContext(e.QFactory.createKeyRefStoreContext(i,i.getClientQueryObjectStorageName()))}}a.addNewLinkFromParts(n,r)}let u=i.getListByKey("MeasureNames");let g=u.size();for(let e=0;e<g;e++){a.addMeasureName(u.getStringAt(e))}let y=i.getListByKey("SecondaryMeasureNames");if(e.notNull(y)){for(let e=0;e<y.size();e++){a.addSecondaryMeasureName(y.getStringAt(e))}}e.QInARepoUtils.importLayeredFilters(t,a,i.getListByKey("LayeredFilters"),o);if(i.containsKey("PreferPrequeryBasedStrategy")){a.setPreferPrequeryBasedStrategy(true)}let m=a.getLinkedFilters().getIterator();if(m.hasNext()){let t=m.next();let i=t.getTagging().getByKey("datasetId");if(e.notNull(i)){let t=a.getLinks().getIterator();if(t.hasNext()){let n=t.next();let r=n.getFirstPart().getQueryManagerKey();let l=n.getSecondPart().getQueryManagerKey();let p=o.getOlapEnv().getSharedQueryManager(r);let s=o.getOlapEnv().getSharedQueryManager(l);if(e.notNull(p)&&e.notNull(s)){if(e.XString.isEqual(i,r)){a.setContext(s)}else{a.setContext(p)}}}}}return a};e.QInARepoFilterAlgebra=function(){};e.QInARepoFilterAlgebra.prototype=new e.QInARepository;e.QInARepoFilterAlgebra.prototype._ff_c="QInARepoFilterAlgebra";e.QInARepoFilterAlgebra.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i.getComponentType();let l=i;if(o.isTypeOf(e.FilterComponentType.AND)){n.putString("Code","And");n.putString("Id",l.getUniqueId())}else if(o.isTypeOf(e.FilterComponentType.OR)){n.putString("Code","Or");n.putString("Id",l.getUniqueId())}else if(o.isTypeOf(e.FilterComponentType.NOT)){n.putString("Code","Not");n.putString("Id",l.getUniqueId())}let a=n.putNewList("SubSelections");let p=l.size();for(let i=0;i<p;i++){let n=t.exportComponent(null,l.get(i),null,r);if(e.notNull(n)){a.add(n)}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFilterAlgebra.prototype.getComponentType=function(){return e.FilterComponentType.BOOLEAN_ALGEBRA};e.QInARepoFilterAlgebra.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=null;if(e.notNull(r)){let e=r;l=e.getFilterExpression()}let a=i.getStringByKey("Code");let p;if(e.XString.isEqual(a,"And")){p=e.QFilterAnd._create(o,l)}else if(e.XString.isEqual(a,"Not")){p=e.QFilterNot._create(o,l)}else{p=e.QFilterOr._create(o,l)}let s=i.getStringByKey("Id");p.setUniqueId(s);let u=i.getListByKey("SubSelections");if(e.notNull(u)){let i=u.size();for(let n=0;n<i;n++){let i=u.getStructureAt(n);let r=t.importComponent(null,i,null,p,o);if(e.notNull(r)){p.add(r)}}}return p};e.QInARepoFilterAll=function(){};e.QInARepoFilterAll.prototype=new e.QInARepository;e.QInARepoFilterAll.prototype._ff_c="QInARepoFilterAll";e.QInARepoFilterAll.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;if(o.isDynamicFilterInitialized()){let e=o.getDynamicFilter();let i=t.exportFilterExpression(e);n.put("DynamicFilter",i)}if(o.isVisibilityFilterInitialized()){let e=o.getVisibilityFilter();let i=t.exportFilterExpression(e);n.put("VisibilityFilter",i)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA&&o.isFixedFilterInitialized()&&(t.getOriginalMode()===e.QModelFormat.INA_CLONE||!o.getSession().hasFeature(e.FeatureToggleOlap.NO_FIXEDFILTERS_IN_REPO))){let e=o.getFixedFilter();let i=t.exportFilterExpression(e);n.put("FixedFilter",i)}if(o.isValueHelpFilterInitialized()){let e=o.getValuehelpFilter();let i=t.exportFilterExpression(e);n.put("ValueHelpFilter",i)}if(o.isValueHelpVisibilityFilterInitialized()){let e=o.getValuehelpVisibilityFilter();let i=t.exportFilterExpression(e);n.put("ValueHelpVisibilityFilter",i)}let l=e.QInARepoUtils.exportLayeredFiltersExt(t,o,t=>e.XBooleanValue.create(t.isPreservedInRepoSerialization()));if(l.hasElements()){n.put("LayeredFilters",l)}e.QInARepoUtils.exportFilterUiSettings(o,e.QContextType.RESULT_SET,n);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFilterAll.prototype.getComponentType=function(){return e.OlapComponentType.SELECTOR};e.QInARepoFilterAll.prototype.getTagName=function(){return"FilterRepo"};e.QInARepoFilterAll.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;let a=i.getStructureByKey("DynamicFilter");if(e.notNull(a)){let e=l.getDynamicFilter();t.importFilterExpression(e,a,l,o)}else if(l.isDynamicFilterInitialized()){l.setDynamicFilter(null)}let p=i.getStructureByKey("VisibilityFilter");if(e.notNull(p)){let e=l.getVisibilityFilter();t.importFilterExpression(e,p,l,o)}else if(l.isVisibilityFilterInitialized()){l.setVisibilityFilter(null)}let s=t.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA;if(!s&&!l.getSession().hasFeature(e.FeatureToggleOlap.NO_FIXEDFILTERS_IN_REPO)||t.getOriginalMode()===e.QModelFormat.INA_CLONE){let n=i.getStructureByKey("FixedFilter");if(e.notNull(n)){let e=l.getFixedFilter();t.importFilterExpression(e,n,l,o)}else if(l.isFixedFilterInitialized()){l.setFixedFilter(null)}}let u=i.getStructureByKey("ValueHelpFilter");if(e.notNull(u)){let e=l.getValuehelpFilter();t.importFilterExpression(e,u,l,o)}let g=i.getStructureByKey("ValueHelpVisibilityFilter");if(e.notNull(g)){let e=l.getValuehelpVisibilityFilter();t.importFilterExpression(e,g,l,o)}l.unlinkInternalFilters();let y=i.getListByKey("LayeredFilters");if(e.notNull(y)){let i=e.QInARepoUtils.importLayeredFilters(t,l,y,null);e.XCollectionUtils.forEach(i,e=>{e.setPreserveOnRepoSerialization(true)})}e.QInARepoUtils.importFilterUiSettings(l,e.QContextType.RESULT_SET,i);return l};e.QInARepoFilterAsymmetricVisibility=function(){};e.QInARepoFilterAsymmetricVisibility.prototype=new e.QInARepository;e.QInARepoFilterAsymmetricVisibility.prototype._ff_c="QInARepoFilterAsymmetricVisibility";e.QInARepoFilterAsymmetricVisibility.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());let l=o.getComplexRoot();if(e.notNull(l)){t.exportFilterAlgebra(l,n.putNewStructure("FilterRoot"))}n.putNotNullAndNotEmpty("LayeredFilters",e.QInARepoUtils.exportLayeredFilters(t,o));return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFilterAsymmetricVisibility.prototype.getComponentType=function(){return e.FilterComponentType.FILTER_ASYMMETRIC_VISIBILITY};e.QInARepoFilterAsymmetricVisibility.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=i.getStringByKey("Name");let a=n;if(e.isNull(a)){let t=null;if(e.notNull(r)){let e=r;t=e.getFilterExpression()}a=e.QFactory.createFilterAsymmetricVisibility(o,l,t)}let p=i.getStructureByKey("FilterRoot");if(e.notNull(p)){let i=t.importComponent(e.FilterComponentType.BOOLEAN_ALGEBRA,p,null,a,o);let n=i;a.setComplexRoot(n)}if(i.containsKey("LayeredFilters")){e.QInARepoUtils.importLayeredFilters(t,a,i.getListByKey("LayeredFilters"),o)}return a};e.QInARepoFilterCartesianList=function(){};e.QInARepoFilterCartesianList.prototype=new e.QInARepository;e.QInARepoFilterCartesianList.prototype._ff_c="QInARepoFilterCartesianList";e.QInARepoFilterCartesianList.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;let l=o.getFieldMetadata();if(e.notNull(l)){n.putString("FieldName",l.getName());let t=o.getFilterExpression();if(e.notNull(t)){let i=t.getParent();if(e.notNull(i)&&i.getOlapComponentType()===e.OlapComponentType.OLAP_FILTER_MANAGER){let t=l.getCacheKey();n.put("QY_CACHE_CONTEXT",e.QInARepoUtils.exportCacheKey(t,o.getQueryManager()))}}}n.putString("Id",o.getUniqueId());e.QInARepoUtils.exportFilterUiSettings(o,e.QContextType.RESULT_SET,n);e.QInARepoUtils.exportFilterUiSettings(o,e.QContextType.VARIABLE,n);let a=o.getHierarchyName();if(e.notNull(a)){let i=o.getFilterExpression()!==null?o.getFilterExpression():o.getParent()!==null?o.getParent().getFilterExpression():null;e.QInARepoHierarchy.exportHierarchyForFilter(t,t.isAbap(o),n,null,i,o.getQueryManager(),a,o.getHierarchyDueDate(),o.getHierarchyVersion())}if(t.m_capabilities.supportsSupplements()){let t=o.getSupplementFieldNames();if(e.XCollectionUtils.hasElements(t)){let e=n.putNewList("SupplementsFieldNames");e.addAllStrings(t)}}let p=o.isConvertToFlatFilter();let s=n.putNewList("Elements");let u=o.size();for(let e=0;e<u;e++){let i=o.getOp(e);let n=t.exportComponent(null,i,null,r);s.add(n);p=p||i.isConvertToFlatFilter()}n.putBoolean("ConvertToFlatSelection",p);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFilterCartesianList.prototype.getComponentType=function(){return e.FilterComponentType.CARTESIAN_LIST};e.QInARepoFilterCartesianList.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=null;let a=o;if(e.notNull(r)){let e=r;l=e.getFilterExpression()}let p=n;if(e.isNull(p)){p=e.notNull(l)?e.QFactory.createFilterCartesianList(l):e.QFactory.createFilterCartesianList(o)}let s=i.getStringByKey("FieldName");if(e.notNull(s)&&e.notNull(o)){let t=o.getFieldAccessorSingle();let n=null;if(e.isNull(t)||i.containsKey("QY_CACHE_CONTEXT")){let t=i.getStructureByKey("QY_CACHE_CONTEXT");if(e.isNull(t)){return null}let r=e.QInARepoUtils.importCacheKey(t);let l=o.getOlapEnv().getFieldMetadata(r);if(o.getComponentType()===e.FilterComponentType.FILTER_ACROSS_MODELS){let t=e.QInARepoUtils.getFilterAcrossModelSourceContext(o,r);if(e.notNull(t)){a=t}}if(e.isNull(l)&&t.containsKey("StorageName")){let i=t.getStringByKey("StorageName");n=e.QInARepoUtils.getFormulaCalcDimField(o,r.getKey1(),i);if(e.notNull(n)){p.setField(n)}}if(e.notNull(l)){p.setFieldMetadata(l)}else if(e.isNull(n)){return null}}else{let n=t.getFieldByName(s);if(e.isNull(n)){n=e.QInARepoUtils.getFormulaCalcDimField(o,s,o.getQueryManager().getClientQueryObjectStorageName());if(e.isNull(n)){return null}}p.setField(n);let r=i.getListByKey("SupplementsFieldNames");if(e.notNull(r)){let e=r.size();for(let i=0;i<e;i++){let e=r.getStringAt(i);let n=t.getFieldByName(e);p.addSupplementField(n)}}}}if(!e.QInARepoHierarchy.validateHierarchyNameForMetadataBasedHierarchy(a,p.getDimensionName(),i.getStringByKey("HierarchyName"))){return null}e.QInARepoHierarchy.importHierarchyForFilter(t.isAbap(o),t.getSession().hasFeature(e.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER),i,p,e.FilterComponentType.CARTESIAN_LIST);let u=i.getStringByKey("Id");p.setUniqueId(u);e.QInARepoUtils.importFilterUiSettings(p,e.QContextType.RESULT_SET,i);e.QInARepoUtils.importFilterUiSettings(p,e.QContextType.VARIABLE,i);let g=i.getBooleanByKeyExt("ConvertToFlatSelection",false);p.setConvertToFlatFilter(g);let y=i.getListByKey("Elements");p.clear();if(e.notNull(y)){let e=y.size();for(let i=0;i<e;i++){let e=y.getStructureAt(i);let n=t.importComponent(null,e,null,p,o);let r=n;p.add(r)}}return p};e.QInARepoFilterCartesianProduct=function(){};e.QInARepoFilterCartesianProduct.prototype=new e.QInARepository;e.QInARepoFilterCartesianProduct.prototype._ff_c="QInARepoFilterCartesianProduct";e.QInARepoFilterCartesianProduct.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Id",o.getUniqueId());let l=n.putNewList("Elements");for(let i=0;i<o.size();i++){let n=o.getCartesianChild(i);let a=t.exportComponent(null,n,null,r);if(e.notNull(a)){l.add(a)}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFilterCartesianProduct.prototype.getComponentType=function(){return e.FilterComponentType.CARTESIAN_PRODUCT};e.QInARepoFilterCartesianProduct.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=null;if(e.notNull(r)){let e=r;l=e.getFilterExpression()}let a=n;if(e.isNull(a)){a=e.notNull(l)?e.QFactory.createFilterCartesianProduct(l):e.QFactory.createFilterCartesianProduct(o)}a.clear();let p=i.getStringByKey("Id");a.setUniqueId(p);let s=i.getListByKey("Elements");if(e.notNull(s)){for(let e=0;e<s.size();e++){let i=s.getStructureAt(e);let n=t.importComponent(null,i,null,a,o);let r=n;a.add(r)}}return a};e.QInARepoFilterCellValueOperand=function(){};e.QInARepoFilterCellValueOperand.prototype=new e.QInARepository;e.QInARepoFilterCellValueOperand.prototype._ff_c="QInARepoFilterCellValueOperand";e.QInARepoFilterCellValueOperand.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putBoolean("IsExcluding",o.isExcluding());let l=o.getComparisonOperator();n.putString("Comparison",e.QInAConverter.lookupComparisonInA(l));let a=e.QInARepoFilterOperation.exportValues(t,o);n.put("Values",a);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFilterCellValueOperand.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_CELL_VALUE_OPERAND};e.QInARepoFilterCellValueOperand.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(e.isNull(l)){l=e.QFilterCellValueOperand._create(o,null,null,null,null)}let a=i.getStringByKey("Comparison");let p=e.QInAConverter.lookupComparison(a);l.setComparisonOperator(p);let s=i.getBooleanByKey("IsExcluding");l.setIsExcluding(s);let u=i.getListByKey("Values");e.QInARepoFilterOperation.importValues(t,u,l,null,o);return l};e.QInARepoFilterDateRange=function(){};e.QInARepoFilterDateRange.prototype=new e.QInARepository;e.QInARepoFilterDateRange.prototype._ff_c="QInARepoFilterDateRange";e.QInARepoFilterDateRange.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;let l=o.getFieldMetadata();e.QInARepoUtils.setNameIfNotNull(n,"FieldName",l);let a=o.getDateRange();if(e.notNull(a)){n.putStringNotNull("Granularity",e.QInAConverter.lookupDateRangeGranularityInA(a.getGranularity()));n.putBoolean("Fixed",a.isFixedRange());if(a.isFixedRange()){n.putStringNotNull("FixedFrom",a.getFixedFromDate()!==null?a.getFixedFromDate().toIsoFormat():null);n.putStringNotNull("FixedTo",a.getFixedToDate()!==null?a.getFixedToDate().toIsoFormat():null)}else{n.putBoolean("UpToPeriod",a.isUpToCurrentPeriod());this.exportGranularitySettings(a.getOffset(),n,"Offset");this.exportGranularitySettings(a.getLookBack(),n,"LookBack");this.exportGranularitySettings(a.getLookAhead(),n,"LookAhead")}}return n};e.QInARepoFilterDateRange.prototype.exportGranularitySettings=function(t,i,n){if(e.notNull(t)){let r=i.putNewStructure(n);r.putStringNotNull("Granularity",e.QInAConverter.lookupDateRangeGranularityInA(t.getFirstObject()));r.putInteger("Value",t.getSecondObject().getInteger())}};e.QInARepoFilterDateRange.prototype.getComponentType=function(){return e.FilterComponentType.DATE_RANGE_OPERATION};e.QInARepoFilterDateRange.prototype.getField=function(t,i,n){let r=t.getStringByKey("FieldName");let o=n.getFieldAccessorSingle().getFieldByName(r);if(e.isNull(o)&&e.notNull(i)&&i.getComponentType()===e.FilterComponentType.CARTESIAN_LIST){o=i.getField()}return o};e.QInARepoFilterDateRange.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;let a=this.getField(i,r,o);if(e.isNull(l)){let t=null;if(e.notNull(r)){let e=r;t=e.getFilterExpression()}l=e.notNull(t)?e.QFactory.createFilterOperationDateRange(t,a):e.QFactory.createFilterOperationDateRange(o,a)}let p=l.getQueryModel();let s=e.XDateRange.create(e.notNull(p)?p.getProcess().getDateTimeProvider():null);let u=i.getStringByKey("Granularity");if(e.notNull(u)){s.withGranularity(e.QInAConverter.lookupDateRangeGranularity(u),i.getBooleanByKeyExt("UpToPeriod",false))}if(i.getBooleanByKeyExt("Fixed",false)){s.withFixDates(e.XDate.createDateSafe(i.getStringByKey("FixedFrom")),e.XDate.createDateSafe(i.getStringByKey("FixedTo")))}else{let t=i.getStructureByKey("Offset");let n=e.PrUtils.getStringProperty(t,"Granularity");let r=e.PrUtils.getIntegerProperty(t,"Value");if(e.notNull(n)&&e.notNull(r)){s.withOffset(e.QInAConverter.lookupDateRangeGranularity(n.getString()),r.getInteger())}let o=i.getStructureByKey("LookBack");let l=e.PrUtils.getStringProperty(o,"Granularity");let a=e.PrUtils.getIntegerProperty(o,"Value");if(e.notNull(l)&&e.notNull(a)){s.withLookBack(e.QInAConverter.lookupDateRangeGranularity(l.getString()),a.getInteger())}let p=i.getStructureByKey("LookAhead");let u=e.PrUtils.getStringProperty(p,"Granularity");let g=e.PrUtils.getIntegerProperty(p,"Value");if(e.notNull(u)&&e.notNull(g)){s.withLookAhead(e.QInAConverter.lookupDateRangeGranularity(u.getString()),g.getInteger())}}l.setDateRange(s,a);return l};e.QInARepoFilterDynamicTimeRegularRange=function(){};e.QInARepoFilterDynamicTimeRegularRange.prototype=new e.QInARepository;e.QInARepoFilterDynamicTimeRegularRange.prototype._ff_c="QInARepoFilterDynamicTimeRegularRange";e.QInARepoFilterDynamicTimeRegularRange.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());e.QInARepoUtils.exportTimeRangeFilter(t,n,o);e.QInARepoUtils.exportShiftableTimeRangeFilter(n,o);n.putInteger("LookAhead",o.getLookAhead());n.putString("LowValue",o.getLowValue());return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFilterDynamicTimeRegularRange.prototype.getComponentType=function(){return e.FilterComponentType.FILTER_DYNAMIC_TIME_REGULAR_RANGE};e.QInARepoFilterDynamicTimeRegularRange.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=i.getStringByKey("Name");let a=n;if(e.isNull(a)){a=e.QFactory.createFilterDynamicTimeRegularRange(o,l)}e.QInARepoUtils.importFilterTimeRange(t,i,a);e.QInARepoUtils.importFilterShiftableTimeRange(i,a);a.setLookAhead(i.getIntegerByKey("LookAhead"));a.setLowValue(i.getStringByKey("LowValue"));let p=i.getStringByKey("LowValueType");if(e.notNull(p)){a.setLowValueType(e.QInAConverter.lookupValueType(p))}return a};e.QInARepoFilterDynamicTimeToDateRange=function(){};e.QInARepoFilterDynamicTimeToDateRange.prototype=new e.QInARepository;e.QInARepoFilterDynamicTimeToDateRange.prototype._ff_c="QInARepoFilterDynamicTimeToDateRange";e.QInARepoFilterDynamicTimeToDateRange.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());e.QInARepoUtils.exportTimeRangeFilter(t,n,o);e.QInARepoUtils.exportShiftableTimeRangeFilter(n,o);n.putString("Member",o.getLowValue());return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFilterDynamicTimeToDateRange.prototype.getComponentType=function(){return e.FilterComponentType.FILTER_DYNAMIC_TIME_TO_DATE_RANGE};e.QInARepoFilterDynamicTimeToDateRange.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=i.getStringByKey("Name");let a=n;if(e.isNull(a)){a=e.QFactory.createFilterDynamicTimeToDateRange(o,l)}e.QInARepoUtils.importFilterTimeRange(t,i,a);e.QInARepoUtils.importFilterShiftableTimeRange(i,a);a.setLowValue(i.getStringByKey("Member"));let p=i.getStringByKey("LowValueType");if(e.notNull(p)){a.setLowValueType(e.QInAConverter.lookupValueType(p))}return a};e.QInARepoFilterElement=function(){};e.QInARepoFilterElement.prototype=new e.QInARepository;e.QInARepoFilterElement.prototype._ff_c="QInARepoFilterElement";e.QInARepoFilterElement.prototype.m_exportingAtLevel1=false;e.QInARepoFilterElement.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;if(!o.getTagging().containsKey(e.QTransientConstants.TAG_IS_TRANSIENT)){let i=o.getComponentType();if(i.isTypeOf(e.FilterComponentType.BOOLEAN_ALGEBRA)){if(i===e.FilterComponentType.CARTESIAN_LIST){t.exportCartesianList(o,n)}else if(i===e.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST){t.exportConvertedTimeCartesianList(o,n)}else if(i===e.FilterComponentType.CARTESIAN_PRODUCT){t.exportFilterCartesianProduct(o,n)}else{if(this.shouldContinueExport(o,t)){t.exportFilterAlgebra(o,n);if(this.m_exportingAtLevel1){this.m_exportingAtLevel1=false}}}}else if(i.isTypeOf(e.FilterComponentType.OPERATION)){let i=o;let r=i.getComparisonOperator();if(e.notNull(r)){if(r.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){t.exportFilterGeo(i,n)}else{if(t.m_capabilities.supportsSetOperand()){let r=e.PrFactory.createStructure();let l=i.getFieldMetadata();if(e.notNull(l)){r.putString("FieldName",l.getName());let a=i.getHierarchyName();if(e.notNull(a)){let n=i.getFilterExpression()!==null?i.getFilterExpression():i.getParent().getFilterExpression();e.QInARepoHierarchy.exportHierarchyForFilter(t,t.isAbap(o),r,null,n,i.getQueryManager(),a,i.getHierarchyDueDate(),i.getHierarchyVersion())}if(i.isConvertToFlatFilter()){r.putBoolean("ConvertToFlatSelection",true)}let p=r.putNewList("Elements");let s=p.addNewStructure();t.exportFilterOperation(i,s);if(e.notNull(n)){n.put("SetOperand",r)}}}}}}else if(i.isTypeOf(e.OlapComponentType.FILTER_CELL_VALUE_OPERAND)){let i=e.PrFactory.createStructure();let r=i.putNewList("Elements");r.add(t.exportCellValueOperand(o));n.put("CellValueOperand",i)}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFilterElement.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_ELEMENT};e.QInARepoFilterElement.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=r;let a=n;if(i.containsKey("Operator")){a=t.importFilterAlgebra(l,i,o)}else{let n=i.getStructureByKey("SetOperand");if(e.isNull(n)){if(i.containsKey("GeometryOperand")){a=t.importFilterGeo(l,i,o)}}else{a=t.importCartesianList(n,a,l,o)}}return a};e.QInARepoFilterElement.prototype.shouldContinueExport=function(t,i){let n=e.notNull(i.m_variableProcessingDirective)&&i.m_variableProcessingDirective===e.ProcessingStep.VARIABLE_DEFINITION;if(!n){return true}let r=t.getQueryModel();let o=t.getModelCapabilities();if(o.supportsComplexTupleFilter()&&e.notNull(r)){if(!this.m_exportingAtLevel1){this.m_exportingAtLevel1=true;return true}return false}return true};e.QInARepoFilterExpression=function(){};e.QInARepoFilterExpression.prototype=new e.QInARepository;e.QInARepoFilterExpression.prototype._ff_c="QInARepoFilterExpression";e.QInARepoFilterExpression.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Id",o.getUniqueId());n.putBoolean("IsSuppressingNulls",o.isSuppressingNulls());let l=o.getFilterRootElement();if(e.notNull(l)){let i=t.exportComponent(null,l,null,e.QImExFlag.DEFAULT_ALL);n.put("FilterRoot",i)}let a=o.isMergable();if(a){n.putBoolean("IsMergable",a)}if(o.getModelCapabilities().supportsCellValueOperand()){let e=n.putNewList("CellValueOperand");let i=o.getCellValueOperands();for(let n=0;n<i.size();n++){let r=i.get(n);let o=t.exportCellValueOperand(r);e.add(o)}}if(o.getModelCapabilities().supportsCustomDimensionMemberVisibilityFilter()&&o.getQueryModel()!==null&&o.getQueryModel().getFilter().isVisibilityFilterInitialized()&&o===o.getQueryModel().getFilter().getVisibilityFilter()){let t=o.getDimensionsForVisibilityFilterOnTotalOthers();if(e.notNull(t)&&!t.isEmpty()){let t=e.PrFactory.createList();t.addAllStrings(o.getDimensionsForVisibilityFilterOnTotalOthers());n.put("ConsiderVisibilityFilterForOthersTotalsOfDimensions",t)}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFilterExpression.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_EXPRESSION};e.QInARepoFilterExpression.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(e.XString.isEqual(l.getName(),"selectionSpaceContainer")===false||l.getFilterRootElement()===null){l.setComplexRoot(null);let n=l.getModelCapabilities().supportsCellValueOperand();if(n){l.setIsSuppressingNulls(false);l.clearCellValueFilter()}if(e.notNull(i)){let r=i.getStringByKey("Id");l.setUniqueId(r);l.setIsMergable(i.getBooleanByKeyExt("IsMergable",false));if(n){let e=i.getBooleanByKeyExt("IsSuppressingNulls",false);l.setIsSuppressingNulls(e)}let a=i.getStructureByKey("FilterRoot");if(e.notNull(a)){let e=t.importComponent(null,a,null,l,o);let i=e;l.setComplexRoot(i)}if(n){let n=i.getListByKey("CellValueOperand");if(e.notNull(n)){for(let i=0;i<n.size();i++){let r=n.getStructureAt(i);let a=t.importComponent(e.OlapComponentType.FILTER_CELL_VALUE_OPERAND,r,null,l,o);l.addCellValueFilter(a)}}}}}if(e.notNull(i)&&l.getModelCapabilities().supportsCustomDimensionMemberVisibilityFilter()&&l.getQueryModel()!==null&&l.getQueryModel().getFilter().isVisibilityFilterInitialized()&&l===l.getQueryModel().getFilter().getVisibilityFilter()){let t=i.getListByKey("ConsiderVisibilityFilterForOthersTotalsOfDimensions");if(e.notNull(t)&&!t.isEmpty()){for(let e=0;e<t.size();e++){l.addDimensionForVisibilityFilterOnTotalOthers(t.getStringAt(e))}}}return n};e.QInARepoFilterFixed=function(){};e.QInARepoFilterFixed.prototype=new e.QInARepository;e.QInARepoFilterFixed.prototype._ff_c="QInARepoFilterFixed";e.QInARepoFilterFixed.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;if(!o.isFixedFilterInitialized()){return null}let l=o.getFixedFilter();let a=t.exportFilterExpression(l);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,a,r)};e.QInARepoFilterFixed.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_FIXED};e.QInARepoFilterFixed.prototype.getTagName=function(){return"FixedFilterRepo"};e.QInARepoFilterFixed.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=null;if(e.notNull(i)){let n=r;l=t.importFilterExpression(null,i,n,o);if(e.notNull(n)&&e.notNull(l)){n.setFixedFilter(l)}}return l};e.QInARepoFilterFixedTimeRange=function(){};e.QInARepoFilterFixedTimeRange.prototype=new e.QInARepository;e.QInARepoFilterFixedTimeRange.prototype._ff_c="QInARepoFilterFixedTimeRange";e.QInARepoFilterFixedTimeRange.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());e.QInARepoUtils.exportTimeRangeFilter(t,n,o);n.putString("LowValue",o.getLowValue());n.putString("TimeRangeFilterType",o.getRangeFilterType().getName());if(e.XStringUtils.isNotNullAndNotEmpty(o.getHighValue())){n.putString("HighValue",o.getHighValue())}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFilterFixedTimeRange.prototype.getComponentType=function(){return e.FilterComponentType.FILTER_FIXED_TIME_RANGE};e.QInARepoFilterFixedTimeRange.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=i.getStringByKey("Name");let a=n;if(e.isNull(a)){a=e.QFactory.createFilterFixedTimeRange(o,l)}let p=null;let s=i.getStringByKey("LowValueType");if(e.notNull(s)){p=e.QInAConverter.lookupValueType(s)}let u=e.TimeRangeFilterType.lookup(i.getStringByKey("TimeRangeFilterType"));if(u===e.TimeRangeFilterType.FIXED_OPENING_PERIOD_TO_CLOSING_PERIOD){a.setOpeningPeriodToClosingPeriodFixedRange()}else if(u===e.TimeRangeFilterType.FIXED_START_TO_CLOSING_OPERIOD){a.setStartToClosingPeriodFixedRange(i.getStringByKey("LowValue"),p)}else if(u===e.TimeRangeFilterType.FIXED_OPENING_PERIOD_TO_END){a.setOpeningPeriodToEndFixedRange("LowValue",p)}else if(u===e.TimeRangeFilterType.FIXED_START_TO_END){a.setStartToEndFixedRange(i.getStringByKey("LowValue"),i.getStringByKey("HighValue"))}e.QInARepoUtils.importFilterTimeRange(t,i,a);return a};e.QInARepoFilterGeo=function(){};e.QInARepoFilterGeo.prototype=new e.QInARepository;e.QInARepoFilterGeo.prototype._ff_c="QInARepoFilterGeo";e.QInARepoFilterGeo.tryCreateGeometry=function(t){let i=e.XGeometryValue.createGeometryValueWithWkt(t);if(e.isNull(i)){i=e.XStringValue.create(t)}return i};e.QInARepoFilterGeo.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;let l=o.getComparisonOperator();if(!l.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){throw e.XException.createIllegalStateException("Not a spatial operator")}n.putString("Comparison",e.QInAConverter.lookupComparisonInA(l));let a=o.getFieldMetadata();n.putString("FieldName",a.getName());let p=o.getLow();let s=o.getDataSource();if(e.isNull(s)){if(e.notNull(p)&&p.getValue()!==null){e.QInAValueUtils.exportFilterValue(t,"Value1",n,p,p.getValueType());let i=p.getGeometry().getSrid();if(t.m_capabilities.supportsSpatialFilterSrid()&&e.notNull(i)){n.putInteger("SRID",i.getInteger())}}}else{if(e.notNull(p)&&p.getValue()!==null){e.QInAValueUtils.exportFilterValue(t,"Value1",n,p,e.XValueType.STRING)}let i=t.exportDataSource(s,false);n.put("DataSource",i)}let u=o.getHigh();if(e.notNull(u)&&u.getValue()!==null){e.QInAValueUtils.exportFilterValue(t,"Value2",n,u,e.XValueType.STRING)}let g=o.getThird();if(e.notNull(g)&&g.getValue()!==null){e.QInAValueUtils.exportFilterValue(t,"Value3",n,g,e.XValueType.STRING)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFilterGeo.prototype.getComponentType=function(){return e.FilterComponentType.SPATIAL_FILTER};e.QInARepoFilterGeo.prototype.getTagName=function(){return"GeometryOperandRepo"};e.QInARepoFilterGeo.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=r;let a=o.getFieldAccessorSingle();let p=i.getStringByKey("Comparison");let s=i.getStringByKey("FieldName");let u=i.getStringByKey("Value1");let g=null;if(e.XStringUtils.isNotNullAndNotEmpty(p)&&e.XStringUtils.isNotNullAndNotEmpty(s)&&e.XStringUtils.isNotNullAndNotEmpty(u)){let t=e.QInAConverter.lookupComparison(p);if(e.notNull(t)){if(t.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){let n=a.getFieldByName(s);if(e.notNull(n)){g=e.QFactory.createFilterOperationWithOperator(l,n,t);let r=e.QInARepoFilterGeo.tryCreateGeometry(u);g.getLow().setValue(r);let o=i.getStringByKey("Value2");if(e.XStringUtils.isNotNullAndNotEmpty(o)){let t=e.QInARepoFilterGeo.tryCreateGeometry(o);g.getHigh().setValue(t)}let a=i.getStringByKey("Value3");if(e.XStringUtils.isNotNullAndNotEmpty(a)){let t=e.QInARepoFilterGeo.tryCreateGeometry(a);g.getThird().setValue(t)}}}}}return g};e.QInARepoFilterManager=function(){};e.QInARepoFilterManager.prototype=new e.QInARepository;e.QInARepoFilterManager.prototype._ff_c="QInARepoFilterManager";e.QInARepoFilterManager.prototype.exportComponentWithStructure=function(t,i,n,r){let o=n.putNewStructure("OlapFilterManager");let l=o.putNewStructure("OlapFilters");let a=i;let p=a.getFilters();let s=p.getKeysAsIterator();while(s.hasNext()){let i=s.next();let n=p.getByKey(i);if(e.QInARepoUtils.isValidFilterExpressionForRepository(n)){l.put(i,t.exportFilterExpression(n))}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFilterManager.prototype.getComponentType=function(){return e.OlapComponentType.OLAP_FILTER_MANAGER};e.QInARepoFilterManager.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(e.isNull(l)){l=o.getOlapEnv().getFilterManager()}let a=i.getStructureByKey("OlapFilterManager");let p=a.getStructureByKey("OlapFilters");let s=p.getKeysAsIterator();let u=e.XHashMapByString.create();while(s.hasNext()){let i=s.next();let n=l.getFilterByName(i);if(n.getFilterRootElement()!==null&&n.getFilterRootElement().getOlapComponentType()===e.FilterComponentType.FILTER_ACROSS_MODELS){u.put(i,n)}else{t.importFilterExpression(n,p.getStructureByKey(i),l,l)}}let g=u.getKeysAsReadOnlyList();for(let e=0;e<g.size();e++){let i=g.get(e);let n=u.getByKey(i);t.importFilterExpression(n,p.getStructureByKey(i),l,l)}return l};e.QInARepoFilterMeasureBased=function(){};e.QInARepoFilterMeasureBased.prototype=new e.QInARepository;e.QInARepoFilterMeasureBased.prototype._ff_c="QInARepoFilterMeasureBased";e.QInARepoFilterMeasureBased.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;e.QInARepoMemberAbstract.exportFormulaItem(t,o.getFormula(),n.putNewStructure("Formula"),o);n.putString("Name",o.getName());n.putStringNotNullAndNotEmpty("CrossCalculationMeasure",o.getCrossCalculationMeasure());let l=n.putNewList("AggregationFieldNames");l.addAllStrings(o.getDimensionContext());n.put("LayeredFilters",e.QInARepoUtils.exportLayeredFilters(t,o));if(o.isLinkQueryFilter()){n.putBoolean("LinkQueryFilter",true)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFilterMeasureBased.prototype.getComponentType=function(){return e.FilterComponentType.FILTER_MEASURE_BASED};e.QInARepoFilterMeasureBased.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=i.getStringByKey("Name");let a=n;if(e.isNull(a)){a=e.QFactory.createFilterMeasureBased(o,l)}let p=e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,null,i.getStructureByKey("Formula"),null,o);a.setFormula(p);a.setCrossCalculationMeasure(i.getStringByKey("CrossCalculationMeasure"));let s=i.getListByKey("AggregationFieldNames");let u=s.size();for(let e=0;e<u;e++){let t=s.getStringAt(e);if(this.validateDimensionContext(t,o)){a.addDimensionContext(t)}}if(!this.validateFormula(p,o)){return null}e.QInARepoUtils.importLayeredFilters(t,a,i.getListByKey("LayeredFilters"),o);a.setLinkQueryFilter(i.getBooleanByKey("LinkQueryFilter"));return a};e.QInARepoFilterMeasureBased.prototype.validateDimensionContext=function(t,i){return i.getComponentType()===e.OlapComponentType.OLAP_FILTER_MANAGER||i.getQueryModel()===null||i.getQueryModel().getDimensionByName(t)!==null};e.QInARepoFilterMeasureBased.prototype.validateFormula=function(t,i){let n=true;if(i.getComponentType()!==e.OlapComponentType.OLAP_FILTER_MANAGER&&i.getQueryModel()!==null){let r=e.FormulaItemUtils.getFormulaMembers(t);let o=r.getIterator();let l=i.getOlapEnv().getClientQueryObjectManager();let a=i.getQueryManager().getClientQueryObjectStorageName();while(o.hasNext()){let t=o.next();let r=t.getMemberName();let p=t.getDimensionContext();let s=null;if(e.notNull(p)){if(i.getQueryManager().getInitSettings().getMode()===e.QueryManagerMode.BLENDING){s=e.BlendingUtils.getMatchingLeafMemberFromLoadedBlendedMember(i.getQueryModel(),r,true)}if(e.isNull(s)){s=p.getStructureMemberByAliasOrMember(r)}}if(e.notNull(l)&&e.isNull(s)){s=l.getStructuredMember(r,a,true)}if(e.isNull(s)&&i.getQueryModel()!==null){let n=null;if(e.XStringUtils.isNotNullAndNotEmpty(t.getDimensionName())){n=i.getQueryModel().getDimensionByName(t.getDimensionName())}if(e.isNull(n)){n=i.getQueryModel().getPrimaryCalculationDimension()}if(e.notNull(n)){s=n.getStructureMemberByAliasOrMember(r)}}if(e.isNull(s)){n=false;break}}}return n};e.QInARepoFilterOperation=function(){};e.QInARepoFilterOperation.prototype=new e.QInARepository;e.QInARepoFilterOperation.prototype._ff_c="QInARepoFilterOperation";e.QInARepoFilterOperation.exportMemberNavigation=function(t,i){i.putString("Function",t.getMemberFunction().getName());let n=t.getParameters();if(e.notNull(n)){let t=n.size();let r=i.putNewList("Parameters");for(let i=0;i<t;i++){let t=n.get(i);let o=r.addNewStructure();let l=t.getMemberNavigationType();let a=e.QInAConverter.lookupMemberNavigationTypeInA(l);if(l===e.MemberNavigationType.FUNCTION_PARAM_SHIFT||l===e.MemberNavigationType.FUNCTION_PARAM_RANGE){o=o.putNewStructure(a);e.QInARepoFilterOperation.setKeyValueForMemberNavigation(o,"Level",t.getLevelValue());e.QInARepoFilterOperation.setKeyValueForMemberNavigation(o,"Constant",t.getConstantValue());e.QInARepoFilterOperation.setKeyValueForMemberNavigation(o,"OffsetLow",t.getOffSetLow());e.QInARepoFilterOperation.setKeyValueForMemberNavigation(o,"OffsetHigh",t.getOffsetHigh())}else{if(!e.QInARepoFilterOperation.setKeyValueForMemberNavigation(o,a,t.getLevelValue())){if(!e.QInARepoFilterOperation.setKeyValueForMemberNavigation(o,a,t.getConstantValue())){e.QInARepoFilterOperation.setKeyValueForMemberNavigation(o,a,t.getFunctionName())}}}}}let r=t.getNavigations();if(e.notNull(r)){let t;if(i.containsKey("Parameters")){t=i.getListByKey("Parameters")}else{t=i.putNewList("Parameters")}let n=t.addNewStructure();let o=n.putNewList("Navigations");let l=r.size();for(let t=0;t<l;t++){e.QInARepoFilterOperation.exportMemberNavigation(r.get(t),o.addNewStructure())}}};e.QInARepoFilterOperation.exportValues=function(t,i){let n=e.PrFactory.createList();let r=i.size();for(let o=0;o<r;o++){let r=i.getValueAt(o);let l=n.addNewStructure();let a=r.getFilterValueType();if(a===e.XValueType.VARIABLE){l.putString("Type","Variable");e.QInARepoUtils.setNameIfNotNull(l,"Value",r.getVariableValue());if(r.isFunctionalVariableValue()){l.putBoolean("IsFunctionalVariable",true);let t=r.getValue().getParameters();if(t.hasElements()){let i=l.putNewList("Parameters");e.XCollectionUtils.forEach(t.getKeysAsReadOnlyList(),e=>{let n=i.addNewStructure();n.putStringNotNullAndNotEmpty("Name",e.getName());n.putString("Value",t.getByKey(e).getString())})}}}else if(a===e.XValueType.MEMBER_TYPE){l.putString("Type","MemberType");l.putString("Value",r.getFieldValue().getValue().toString())}else{let i;if(a===e.XValueType.CURRENT_MEMBER){l.putString("Type","CurrentMember")}let n=null;let o=r.getFieldValue();if(e.notNull(o)){n=o.getField()}e.QInARepoUtils.exportSupplementsAndValue(t,null,l,n,r,null);let p=r.getMemberNavigations();let s=p.size();if(s>0){i=l.putNewList("LowNavigations");for(let t=0;t<s;t++){e.QInARepoFilterOperation.exportMemberNavigation(p.get(t),i.addNewStructure())}}}}return n};e.QInARepoFilterOperation.importMemberNavigation=function(t){let i=e.QFactory.createMemberNavigation(e.CurrentMemberFunction.lookup(t.getStringByKey("Function")));if(t.containsKey("Parameters")){let n=t.getListByKey("Parameters");let r=n.size();for(let t=0;t<r;t++){let r=n.getStructureAt(t);if(r.containsKey("Navigations")){let t=r.getListByKey("Navigations");let n=t.size();for(let r=0;r<n;r++){i.addNavigation(e.QInARepoFilterOperation.importMemberNavigation(t.getStructureAt(r)))}}else{if(r.containsKey("Level")){let t=r.getByKey("Level");if(t.isNumeric()){i.addParameter(e.QFactory.createNavigationParameterWithLevelNumber(t.getInteger()))}else{i.addParameter(e.QFactory.createNavigationParameterWithLevelLiteral(t.getString()))}}else if(r.containsKey("Member")){i.addParameter(e.QFactory.createNavigationParameterWithMemberName(r.getStringByKey("Member")))}else if(r.containsKey("NoValuesAboveLevel")){i.addParameter(e.QFactory.createNavigationParameterWithNoValuesAboveLevel(r.getStringByKey("NoValuesAboveLevel")))}else if(r.containsKey("ErrorAboveLevel")){i.addParameter(e.QFactory.createNavigationParameterWithErrorAboveLevel(r.getStringByKey("ErrorAboveLevel")))}else if(r.containsKey("Shift")){let t=r.getStructureByKey("Shift");i.addParameter(e.QFactory.createNavigationParameterWithShift(t.getStringByKey("Level"),t.getIntegerByKey("Constant")))}else if(r.containsKey("Range")){let t=r.getStructureByKey("Range");i.addParameter(e.QFactory.createNavigationParameterWithRange(t.getStringByKey("Level"),t.getIntegerByKey("OffsetLow"),t.getIntegerByKey("OffsetHigh")))}else{let t=r.getByKey("Constant");if(t.isNumeric()){i.addParameter(e.QFactory.createNavigationParameterWithIntegerConstant(t.getInteger()))}else{i.addParameter(e.QFactory.createNavigationParameterWithStringConstant(t.getString()))}}}}}return i};e.QInARepoFilterOperation.importValues=function(t,i,n,r,o){let l=i.size();for(let a=0;a<l&&a<3;a++){let l=i.getStructureAt(a);let p;let s=l.getStringByKey("Type");let u=e.QInAConverter.lookupValueType(s);if(u===e.XValueType.VARIABLE){let t=l.getStringByKey("Value");if(e.notNull(t)){let i=o.getVariableContainer().getVariables();let r=i.getByKey(t);if(e.notNull(r)){p=n.getValueAt(a);p.setFilterValueType(u);p.setVariableValue(r);if(l.getBooleanByKey("IsFunctionalVariable")&&l.containsKey("Parameters")){e.XCollectionUtils.forEach(l.getListByKey("Parameters"),t=>{let i=t.asStructure();let n=i.getStringByKey("Name");let o=i.getStringByKey("Value");p.setFunctionalVariableValueParameter(e.QFunctionalVariableParameter.createParameter(n,null,e.FunctionalVariableParameterType.DEFAULT,null,r),o)})}}}}else{p=n.getValueAt(a);if(u===e.XValueType.CURRENT_MEMBER){p.setFilterValueType(u)}if(u===e.XValueType.MEMBER_TYPE){p.setFilterValueType(u);p.setValue(e.XStringValue.create(l.getStringByKey("Value")))}let i=e.PrUtils.getListProperty(l,"LowNavigations");if(e.isNull(i)){i=e.PrUtils.getListProperty(l,"Value")}if(e.notNull(i)){let t=p.getMemberNavigations();t.clear();let n=i.size();for(let r=0;r<n;r++){let n=e.QInARepoFilterOperation.importMemberNavigation(i.getStructureAt(r));t.add(n)}}if(u!==e.XValueType.CURRENT_MEMBER&&u!==e.XValueType.MEMBER_TYPE){e.QInARepoUtils.importSupplementsAndValue(t,p,l,null,null,r)}}}};e.QInARepoFilterOperation.setKeyValueForMemberNavigation=function(t,i,n){if(e.isNull(n)){return false}if(n.getValueType().isNumber()){t.putDouble(i,n.getDouble())}else{t.putString(i,n.toString())}return true};e.QInARepoFilterOperation.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Id",o.getUniqueId());let l=o.getFieldMetadata();e.QInARepoUtils.setNameIfNotNull(n,"FieldName",l);let a=o.getFilterExpression();if(e.notNull(l)){if(e.notNull(a)){let t=a.getParent();if(e.notNull(t)&&a.getParent().getOlapComponentType()===e.OlapComponentType.OLAP_FILTER_MANAGER){let t=l.getCacheKey();n.put("QY_CACHE_CONTEXT",e.QInARepoUtils.exportCacheKey(t,o.getQueryManager()))}}}let p=o.getComparisonOperator();n.putString("Comparison",e.QInAConverter.lookupComparisonInA(p));n.putBoolean("IsExcluding",o.getSetSign()===e.SetSign.EXCLUDING);n.putBoolean("HasLevelOffset",o.hasLevelOffset());if(o.hasLevelOffset()){n.putInteger("LevelOffset",o.getLevelOffset())}n.putBoolean("HasDepth",o.hasDepth());if(o.hasDepth()){n.putInteger("Depth",o.getDepth())}n.putDouble("Exactness",o.getExactness());let s=o.getHierarchyName();if(e.notNull(s)){let i=o.getFilterExpression()!==null?o.getFilterExpression():o.getParent().getFilterExpression();let r=o.getContext();e.QInARepoHierarchy.exportHierarchyForFilter(t,t.isAbap(r),n,null,i,o.getQueryManager(),s,o.getHierarchyDueDate(),o.getHierarchyVersion())}let u=e.QInARepoFilterOperation.exportValues(t,o);n.put("Values",u);if(o.isConvertToFlatFilter()){n.putBoolean("ConvertToFlatSelection",o.isConvertToFlatFilter())}if(o.getDataSource()!==null){let e=t.exportDataSource(o.getDataSource(),false);n.put("DataSource",e.getStructureByKey("DataSource"))}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFilterOperation.prototype.getComponentType=function(){return e.FilterComponentType.OPERATION};e.QInARepoFilterOperation.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=null;let a=o;if(e.notNull(r)){let e=r;l=e.getFilterExpression()}let p=n;if(e.isNull(p)){p=e.notNull(l)?e.QFactory.createFilterOperation(l,null):e.QFactory.createFilterOperation(o,null)}let s=i.getStringByKey("FieldName");let u=null;if(e.notNull(s)&&e.notNull(o)){let t=o.getFieldAccessorSingle();let n=null;if(e.isNull(t)||i.containsKey("QY_CACHE_CONTEXT")){let t=i.getStructureByKey("QY_CACHE_CONTEXT");if(e.isNull(t)){return null}let r=e.QInARepoUtils.importCacheKey(t);let l=o.getOlapEnv().getFieldMetadata(r);if(o.getComponentType()===e.FilterComponentType.FILTER_ACROSS_MODELS){let t=e.QInARepoUtils.getFilterAcrossModelSourceContext(o,r);if(e.notNull(t)){a=t}}if(e.isNull(l)&&t.containsKey("StorageName")){n=e.QInARepoUtils.getFormulaCalcDimField(o,r.getKey1(),t.getStringByKey("StorageName"));if(e.notNull(n)){p.setField(n)}}if(e.notNull(l)){p.setFieldMetadata(l)}else if(e.isNull(n)){return null}}else{u=t.getFieldByName(s);if(e.isNull(u)){n=e.QInARepoUtils.getFormulaCalcDimField(o,s,o.getQueryManager().getClientQueryObjectStorageName());if(e.isNull(n)){return null}}p.setField(u)}}let g=i.getStringByKeyExt("Comparison","=");if(e.notNull(g)){let i=e.QInAConverter.lookupComparison(g);if(e.isNull(i)){t.addError(e.ErrorCodes.INVALID_OPERATOR,e.XStringUtils.concatenate2("Unsupported comparison operator: ",g))}p.setComparisonOperator(i)}else{p.setComparisonOperator(null)}let y=i.getBooleanByKeyExt("IsExcluding",false);if(y){p.setSetSign(e.SetSign.EXCLUDING)}else{p.setSetSign(e.SetSign.INCLUDING)}let m=i.getBooleanByKeyExt("HasLevelOffset",false);if(!m){p.resetLevelOffset()}else{let e=i.getIntegerByKeyExt("LevelOffset",0);p.setLevelOffset(e)}let c=i.getBooleanByKeyExt("HasDepth",false);if(!c){p.resetDepth()}else{let e=i.getIntegerByKeyExt("Depth",0);p.setDepth(e)}p.setConvertToFlatFilter(i.getBooleanByKeyExt("ConvertToFlatSelection",false));let A=i.getStringByKey("Id");p.setUniqueId(A);let S=i.getDoubleByKeyExt("Exactness",0);p.setExactness(S);if(!e.QInARepoHierarchy.validateHierarchyNameForMetadataBasedHierarchy(a,p.getDimensionName(),i.getStringByKey("HierarchyName"))){return null}e.QInARepoHierarchy.importHierarchyForFilter(t.isAbap(o),t.getSession().hasFeature(e.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER),i,p,e.FilterComponentType.OPERATION);let d=i.getListByKey("Values");e.QInARepoFilterOperation.importValues(t,d,p,u,o);if(t.getOriginalMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)&&!p.areValuesInitialized()){return null}if(i.containsKey("DataSource")){p.setDataSource(t.importDataSource(i))}else{p.setDataSource(null)}return p};e.QInARepoFilterTuple=function(){};e.QInARepoFilterTuple.prototype=new e.QInARepository;e.QInARepoFilterTuple.prototype._ff_c="QInARepoFilterTuple";e.QInARepoFilterTuple.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Code","Tuple");n.putString("Id",o.getUniqueId());let l=n.putNewList("SubSelections");let a=l.addNewStructure();let p=a.putNewStructure("TuplesOperand");let s=o.getFieldNames();if(o.hasTuples()){let e=p.putNewList("Tuples");let t=o.getTuples();for(let i=0;i<t.size();i++){let n=t.get(i);let r=e.addNewList();for(let e=0;e<s.size();e++){r.addString(n.get(e))}}}if(o.hasDataSourceColumns()){let i=o.getSourceColumns();let n=o.getDataSourceForColumns();if(e.isNull(n)||i.size()!==s.size()){throw e.XException.createIllegalArgumentException("TuplesOperandFromDataSource: DataSource must be given and the number of sourceColumns must to be the same as the number of FieldNames.")}let r=p.putNewList("SourceColumns");r.addAllStrings(i);let l=t.exportDataSource(n,false);p.putIfNotNull("DataSource",l)}let u=p.putNewList("FieldNames");u.addAllStrings(s);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFilterTuple.prototype.getComponentType=function(){return e.FilterComponentType.TUPLE};e.QInARepoFilterTuple.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=null;if(e.notNull(r)){let e=r;l=e.getFilterExpression()}let a=e.QFilterTuple._create(o,l);a.setUniqueId(i.getStringByKey("Id"));let p=i.getListByKey("SubSelections");if(e.notNull(p)){let i=p.getStructureAt(0);i=i.getStructureByKey("TuplesOperand");if(i.containsKey("DataSource")){a=e.QFilterTupleFromDataSource._create(o,l)}let n=i.getListByKey("FieldNames");let r=e.PrUtils.asListOfString(n);a.setFieldNames(r);if(a.hasTuples()){let t=i.getListByKey("Tuples");for(let i=0;i<t.size();i++){let n=t.getListAt(i);let r=e.PrUtils.asListOfString(n);a.addTupleCriteria(r)}}if(a.hasDataSourceColumns()){let n=i.getListByKey("SourceColumns");let r=i.getStructureByKey("DataSource");a.setSourceColumns(e.PrUtils.asListOfString(n));a.setDataSourceForColumns(t.importDataSource(r))}}return a};e.QInARepoFilterVirtualDatasource=function(){};e.QInARepoFilterVirtualDatasource.prototype=new e.QInARepository;e.QInARepoFilterVirtualDatasource.prototype._ff_c="QInARepoFilterVirtualDatasource";e.QInARepoFilterVirtualDatasource.prototype.createMemberOperand=function(t,i){let n=e.PrFactory.createStructure();n.putString("AttributeName",t);let r=e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.EQUAL);n.putString("Comparison",r);n.putString("Value",i);let o=e.PrFactory.createStructure();o.put("MemberOperand",n);return o};e.QInARepoFilterVirtualDatasource.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;let l=e.PrFactory.createStructure();l.putString("Code","And");let a=l.putNewList("SubSelections");let p=this.createMemberOperand("SchemaName",o.getSchemaName());let s=this.createMemberOperand("PackageName",o.getPackageName());let u=this.createMemberOperand("ObjectName",o.getObjectName());a.add(p);a.add(s);a.add(u);if(t.m_capabilities.supportsVirtualDataSourceTypeColumns()){let e=this.createMemberOperand("Type",o.getTypeName());a.add(e)}n.put("Operator",l);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFilterVirtualDatasource.prototype.getComponentType=function(){return e.FilterComponentType.VIRTUAL_DATASOURCE};e.QInARepoFilterVirtualDatasource.prototype.importComponentWithStructure=e.noSupport;e.QInARepoFormulaCalculatedDimension=function(){};e.QInARepoFormulaCalculatedDimension.prototype=new e.QInARepository;e.QInARepoFormulaCalculatedDimension.prototype._ff_c="QInARepoFormulaCalculatedDimension";e.QInARepoFormulaCalculatedDimension.exportFormulaCalcProperties=function(t,i,n){let r=n.getQueryManager()!==null&&n.getQueryManager().isKeyRefSerializationEnabled();if(r&&n.getOlapEnv()!==null){let r=n.getOlapEnv().getClientQueryObjectManager().getClientQueryObjectIncludeReleasedByKeyRef(n.getPropertiesKeyRef(),n.getQueryManager().getClientQueryObjectStorageName());if(e.notNull(r)){let o=i.putNewStructure("Properties");e.QInARepoUtils.addKeyRefStructure(t,r,o,n.getQueryManager());return}}let o=n.getFilterContext().getFilterRootElement();if(e.notNull(o)){let n=t.exportComponent(null,o,null,e.QImExFlag.DEFAULT_ALL);i.put("Selection",n)}let l=i.putNewList("CalculatedAttributes");let a=n.getFieldIterator();while(a.hasNext()){let i=a.next();let n=t.exportComponent(e.OlapComponentType.FIELD,i,null,e.QImExFlag.DEFAULT_ALL);if(n.asStructure().getStringByKey("PresentationType")===null){t.exportComponent(e.OlapComponentType.FIELD,i,null,e.QImExFlag.DEFAULT_ALL)}l.add(n)}let p=n.getAggregationFieldNames();if(e.notNull(p)){let e=i.putNewList("AggregationFieldNames");e.addAllStrings(p)}let s=n.getAdditionalAggregationDimensions();if(e.notNull(s)){let e=s.getIterator();let t=i.putNewList("AggregationDimensions");while(e.hasNext()){let i=e.next();let n=t.addNewStructure();n.putString("DimensionName",i.getDimensionName());n.putString("HierarchyName",i.getHierarchyName());n.putBoolean("HierarchyActivation",i.activateHierarchy())}}let u=n.getProperties().getFilterIdsToApply();if(e.notNull(u)){let e=i.putNewList("ExternalFilterIdsToApply");e.addAllStrings(u)}i.putStringNotNullAndNotEmpty("DisplayName",n.getProperties().getDisplayName());i.putStringNotNullAndNotEmpty("DisplayDescription",n.getProperties().getDisplayDescription());i.putBoolean("ApplyAdditionalFilterContext",n.getProperties().isApplyAdditionalFilterContext());i.putString("Text",n.getProperties().getText())};e.QInARepoFormulaCalculatedDimension.exportFormulaDimensionParts=function(t,i,n){e.QInARepoFormulaCalculatedDimension.exportFormulaCalcProperties(t,i,n);let r=n.getDependentCustomMembers();if(!r.isEmpty()){let n=i.putNewList("DependentCustomMembers");let o=r.getIterator();while(o.hasNext()){let i=o.next();let r=e.QInARepoMemberAbstract.exportCustomMember(t,i);if(e.notNull(r)){r.putString("AliasName",i.getAliasName());n.add(r)}}}let o=n.getDependentCalculatedDimensions();if(!o.isEmpty()){let e=i.putNewList("DependentCalcDims");let n=o.getIterator();while(n.hasNext()){let i=n.next();t.exportDimension(i,e.addNewStructure())}}i.putBoolean("IsApplyParentExtFilters",n.isApplyParentExternalFilters());if(n.getCurrency()!==null){i.putString("Currency",n.getCurrency())}let l=n.getAdditionalFilterContext().getFilterRootElement();if(e.notNull(l)){let n=t.exportComponent(null,l,null,e.QImExFlag.DEFAULT_ALL);i.put("AdditionalFilterSelection",n)}};e.QInARepoFormulaCalculatedDimension.importCalculatedDimensionProperties=function(t,i,n,r){let o=i.getStructureByKey("Properties");if(e.notNull(o)){let t=o.getStructureByKey("KeyRef");let i;if(r.getQueryManager().getClientQueryObjectStorageName()!==null){i=r.getQueryManager().getClientQueryObjectStorageName()}else{i=t.getStringByKey("StorageName")}let n=e.QFactory.createKeyRef(i,t.getStringByKey("GroupName"),t.getStringByKey("ObjectName"));r.setPropertiesKeyRef(n);return}if(t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){let t=r.getQueryManager().getClientQueryObjectStorageName();if(e.notNull(t)){let i=n.getOlapEnv().getClientQueryObjectManager();let o=i.getFormulaCalcDimProperties(r.getName(),t);if(e.notNull(o)){r.setPropertiesKeyRef(o);return}}}let l=i.getListByKey("CalculatedAttributes");if(e.notNull(l)){for(let i=0;i<l.size();i++){let o=l.get(i);t.importComponent(e.OlapComponentType.FIELD,o,null,r,n)}}let a=i.getListByKey("AggregationFieldNames");if(e.notNull(a)){for(let e=0;e<a.size();e++){r.addAggregationFieldName(a.get(e).asString().getString())}}let p=r.getFilterContext();let s=null;let u=i.getStructureByKey("Selection");if(e.notNull(u)){s=t.importComponent(null,u,null,p,n)}p.setComplexRoot(s);let g=i.getListByKey("AggregationDimensions");if(e.notNull(g)){for(let e=0;e<g.size();e++){let t=g.get(e).asStructure();r.addAdditionalAggregationDimension(t.getStringByKey("DimensionName"),t.getStringByKey("HierarchyName"),t.getBooleanByKey("HierarchyActivation"))}}let y=i.getListByKey("ExternalFilterIdsToApply");if(e.notNull(y)){for(let e=0;e<y.size();e++){r.getProperties().addFilterIdsToApply(y.get(e).asString().getString())}}r.getProperties().setDisplayName(i.getStringByKey("DisplayName"));r.getProperties().setDisplayDescription(i.getStringByKey("DisplayDescription"));r.getProperties().setIsApplyAdditionalFilterContext(i.getBooleanByKey("ApplyAdditionalFilterContext"));r.getProperties().setText(i.getStringByKey("Text"));let m=r.getFieldByName(i.getStringByKey("ClientDefaultTextAttribute"));r.setClientDefaultTextField(m);m=r.getFieldByName(i.getStringByKey("ClientDefaultKeyAttribute"));r.setClientDefaultKeyField(m);e.QInARepoDimension.importRsFields(t,i,r);e.QInARepoDimension.importRsAttributeNodes(t,i,r);if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("FieldLayoutType")){let t=e.QInAConverter.lookupFieldLayoutType(i.getStringByKey("FieldLayoutType"));r.setFieldLayoutType(t)}if(i.containsKey("TextFieldModified")){r.getFieldContainerBase().setShouldUseActualTextField(i.getBooleanByKey("TextFieldModified"))}};e.QInARepoFormulaCalculatedDimension.importFormulaCalculatedDimension=function(t,i,n,r,o){let l=n;let a=i.getStringByKey("Name");if(e.isNull(l)){if(!o.getModelCapabilities().supportsCalculatedDimensionsExt()){t.addWarning(e.ErrorCodes.CALCULATED_DIMENSIONS_CAPABILITY_NOT_SUPPORTED,e.ErrorMessages.CALCULATED_DIMENSIONS_CAPABILITY_NOT_SUPPORTED_DESERIALIZE)}l=e.QFactory.createFormulaCalculatedDimension(o,a);l.setParent(r);o.getQueryModel().addDimension(l)}else{let t=i.getStructureByKey("Properties");l.reset(e.notNull(t))}l.setDimensionType(e.DimensionType.FORMULA_CALCULATED_DIMENSION);l.setName(a);l.setTopEntries(i.getIntegerByKeyExt("Top",0));l.setSkipEntries(i.getIntegerByKeyExt("Skip",0));t.importTotals(i,l.getResultStructureControllerBase(),o);let p=i.getListByKey("DependentCalcDims");if(e.notNull(p)){for(let i=0;i<p.size();i++){let n=p.get(i);let s=e.QFactory.createFormulaCalculatedDimension(o,a);s.setParent(r);e.QInARepoFormulaCalculatedDimension.importFormulaCalculatedDimension(t,n,s,null,o);l.addDependentCalculatedDimension(s)}}let s=i.getListByKey("DependentCustomMembers");if(e.notNull(s)){let i=l.getQueryModelBase();let n=i.getPrimaryCalculationDimension();for(let i=0;i<s.size();i++){let r=s.get(i);let a=r.getStringByKey("Name");let p=r.getStringByKey("AliasName");if(e.XStringUtils.isNullOrEmpty(a)&&e.XStringUtils.isNullOrEmpty(p)){continue}let u;if(n.getStructureMemberByAlias(p)!==null){u=n.getStructureMemberByAlias(p)}else if(n.getStructureMember(a)!==null){u=n.getStructureMember(a)}else{u=t.importStructureMember(n,r,o);if(n.getDimensionType()===e.DimensionType.ACCOUNT){u.setAliasName(r.getStringByKey("AliasName"))}}l.addDependentCustomMember(u)}}l.setApplyParentExternalFilters(i.getBooleanByKey("IsApplyParentExtFilters"));if(i.getStringByKey("Currency")!==null){l.setCurrency(i.getStringByKey("Currency"))}e.QInARepoFormulaCalculatedDimension.importCalculatedDimensionProperties(t,i,o,l);let u=l.getAdditionalFilterContext();let g=null;let y=i.getStructureByKey("AdditionalFilterSelection");if(e.notNull(y)){g=t.importComponent(null,y,null,u,o)}u.setComplexRoot(g);if(i.containsKey("IsHidden")){l.setHidden(i.getBooleanByKey("IsHidden"))}return l};e.QInARepoFormulaCalculatedDimension.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());if(o.getParent()!==null&&o.getAxis()!==null){let t=o.getAxisType();n.putString("Axis",e.QInAConverter.lookupAxisTypeInA(t))}let l=o.getTopEntries();if(l>0){n.putInteger("Top",l)}let a=o.getSkipEntries();if(a>0){n.putInteger("Skip",a)}t.exportTotals(o,n);e.QInARepoFormulaCalculatedDimension.exportFormulaDimensionParts(t,n,o);if(o.isHidden()){n.putBoolean("IsHidden",true)}if(!o.isUseServerDefaultTextField()){n.putString("ClientDefaultTextAttribute",o.getClientDefaultTextField().getName())}if(!o.isUseServerDefaultKeyField()){n.putString("ClientDefaultKeyAttribute",o.getClientDefaultKeyField().getName())}e.QInARepoDimension.exportResultSetFields(t,n,o);let p=o.getDefaultResultSetTextField();if(e.notNull(p)&&p.haveAnyInAPropertiesChanged()||o.getShouldUseActualTextField()){n.putBoolean("TextFieldModified",true)}e.QInARepoDimension.exportResultSetAttributes(t,n,o);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFormulaCalculatedDimension.prototype.getComponentType=function(){return e.DimensionType.FORMULA_CALCULATED_DIMENSION};e.QInARepoFormulaCalculatedDimension.prototype.importComponentWithStructure=function(t,i,n,r,o){return e.QInARepoFormulaCalculatedDimension.importFormulaCalculatedDimension(t,i,n,r,o)};e.QInARepoFormulaException=function(){};e.QInARepoFormulaException.prototype=new e.QInARepository;e.QInARepoFormulaException.prototype._ff_c="QInARepoFormulaException";e.QInARepoFormulaException.exportEvaluates=function(t,i,n,r){if(t.isEmpty()){return}let o=n.putNewList("EvaluateOn");let l=t.size();for(let n=0;n<l;n++){let l=o.addNewStructure();let a=t.get(n);l.putString("Name",a.getField().getName());l.putString("Evaluate",a.getEvaluate().toString());let p=a.getOperator();let s;if(p===e.ComparisonOperator.NOT_BETWEEN&&r){s="NOTBETWEEN"}else{s=e.QInAConverter.lookupComparisonInA(p)}l.putString("Comparison",s);e.QInARepoUtils.exportValue(i,"Low",l,a.getLowValue(),a.getValueType());if(p.getNumberOfParameters()>1){e.QInARepoUtils.exportValue(i,"High",l,a.getHighValue(),a.getValueType())}}};e.QInARepoFormulaException.exportSettings=function(t,i,n){let r=n.putNewList("Settings");let o=t.size();for(let n=0;n<o;n++){let o=t.get(n);let l=r.addNewStructure();l.putString("Name",o.getName());l.putInteger("Priority",o.getPriority());let a=o.getValue();if(e.isNull(a)||e.XString.isEqual(a,"")){i.addError(e.ErrorCodes.INVALID_PARAMETER,"Exception Threshold Setting is missing it's value")}else{l.putString("Value",a)}}};e.QInARepoFormulaException.exportThresholds=function(t,i,n,r){let o=n.putNewList("Threshold");let l=t.size();for(let n=0;n<l;n++){let l=t.get(n);let a=o.addNewStructure();let p=l.getName();if(!e.XString.isEqual(p,"Settings")){a.putStringNotNull("Name",p)}let s=l.getText();a.putStringNotNull("Text",s);let u=l.getOperator();let g;if(u===e.ComparisonOperator.NOT_BETWEEN&&r){g="NOTBETWEEN"}else{g=e.QInAConverter.lookupComparisonInA(u)}a.putString("Comparison",g);let y=l.getValueType()===e.XValueType.DOUBLE;if(l.getLowXValue()!==null){if(y){a.putDouble("Low",l.getLowValue())}else{a.putString("Low",l.getLow())}}if(l.getHighXValue()!==null&&u.getNumberOfParameters()>1){if(y){a.putDouble("High",l.getHighValue())}else{a.putString("High",l.getHigh())}}if(!l.isEmpty()){e.QInARepoFormulaException.exportSettings(l,i,a)}else{a.putInteger("AlertLevel",l.getAlertLevel().getLevel())}}};e.QInARepoFormulaException.importEvaluates=function(t,i,n,r){let o=t.getListByKey("EvaluateOn");if(e.isNull(o)){return}let l=o.size();for(let t=0;t<l;t++){let l=o.getStructureAt(t);let a=l.getStringByKey("Name");let p=i.getFieldByName(a);if(e.isNull(p)){let t=i.getDimensionByNameFromExistingMetadata(a);if(e.notNull(t)){p=t.getKeyField()}}if(e.isNull(p)){r.addError(e.ErrorCodes.INVALID_TOKEN,e.XStringUtils.concatenate3("Could not find field '",a,"'!"));return}if(!l.containsKey("Low")){r.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate2("No low value for field: ",a));return}let s=p.getValueType();let u=e.QInARepoUtils.importValueByType(r,l,"Low",s);if(r.hasErrors()){r.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected low valuetype for field: ",s.getName()));return}let g=n._addNewEvaluateWithFieldInternal(p,u);if(l.containsKey("High")){let t=e.QInARepoUtils.importValueByType(r,l,"High",s);if(r.hasErrors()){r.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected high valuetype for field: ",s.getName()));return}g.setHighValue(t)}g.setEvaluate(e.QExceptionEvalType.lookupExceptionEvalType(l.getStringByKey("Evaluate")));let y=l.getStringByKey("Comparison");let m=e.QInAConverter.lookupComparison(y);if(e.isNull(m)){r.addError(e.ErrorCodes.INVALID_OPERATOR,e.XStringUtils.concatenate3("Unexpected comparison operator for evaluate: Operator: '",y,"'"));return}g.setOperator(m)}};e.QInARepoFormulaException.importSettings=function(t,i){if(e.isNull(t)){return}let n=t.size();for(let r=0;r<n;r++){let n=t.getStructureAt(r);let o=n.getStringByKey("Name");let l=n.getIntegerByKey("Priority");let a=n.getStringByKey("Value");if(e.notNull(a)&&!e.XString.isEqual(a,"")){let e=i.addNewSetting(o,l);e.setValue(a)}}};e.QInARepoFormulaException.importThresholds=function(t,i){let n=t.getListByKey("Threshold");if(e.notNull(n)){let t=n.size();for(let r=0;r<t;r++){let t=n.getStructureAt(r);let o=t.getIntegerByKeyExt("AlertLevel",-9999);let l;let a=!t.hasStringByKey("Low");if(a){l=i._addNewThresholdInternal(t.getDoubleByKey("Low"),e.QInAConverter.lookupAlertLevel(o))}else{l=i._addNewThresholdWithStringInternal(t.getStringByKey("Low"),e.QInAConverter.lookupAlertLevel(o))}let p=t.getStringByKey("Name");if(e.notNull(p)){l.setName(p)}let s=t.getStringByKey("Text");if(e.notNull(s)){l.setText(s)}let u=t.getStringByKey("Color");if(e.notNull(u)){l.setColor(u)}let g=e.QInAConverter.lookupComparison(t.getStringByKey("Comparison"));l.setOperator(g);if(g.getNumberOfParameters()===2){if(a){let e=t.getDoubleByKey("High");l.setHighValue(e)}else{let e=t.getStringByKey("High");l.setHigh(e)}}e.QInARepoFormulaException.importSettings(t.getListByKey("Settings"),l)}}};e.QInARepoFormulaException.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());n.putString("Text",o.getText());n.putString("Type",o.getFormulaExceptionType().getName());n.putBoolean("CalculateRatioVariance",o.isRatioVarianceCalculated());n.putBoolean("HandleExcludedFilters",o.isHandleExcludedFilters());if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QExceptionProperties.QY_NULL_AS_ZERO)){n.putBoolean("NullAsZero",o.isHandleNullAsZero())}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QExceptionProperties.QY_AUTO_SIGN_FLIP)){if(o.isAutoSignFlip()||t.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA&&o.hasPropertyChanged(e.QExceptionProperties.QY_AUTO_SIGN_FLIP)){n.putBoolean("AutoSignFlip",o.isAutoSignFlip())}}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QExceptionProperties.QY_IS_PRIMARY)){n.putBoolean("IsPrimary",o.isPrimaryMeasure())}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QExceptionProperties.QY_ACTIVE)){n.putBoolean("Active",o.isActive())}n.putString("EvaluateDefault",o.getEvaluateDefault().toString());let l=n.putNewList("StructureContext");let a=l.addNewStructure();let p=o.getMeasure();if(e.notNull(p)){let e=p.getDimension();a.putString("DimensionName",e.getName());a.putStringNotNull("MemberName",p.getAliasOrMemberName())}let s=l.addNewStructure();let u=o.getBaseMeasure();if(e.notNull(u)){let e=u.getDimension();s.putString("DimensionName",e.getName());s.putStringNotNull("MemberName",u.getAliasOrMemberName())}else{s.putStringNotNull("MemberName",o.getBaseMeasureName())}let g=l.addNewStructure();let y=o.getReferenceMeasure();if(e.notNull(y)){let e=y.getDimension();g.putString("DimensionName",e.getName());g.putStringNotNull("MemberName",y.getAliasOrMemberName())}else{g.putStringNotNull("MemberName",o.getReferenceMeasureName())}let m=o.getStructure();if(m.isPresent()){let e=l.addNewStructure();let t=m.get().getDimension();e.putString("DimensionName",t.getName());e.putStringNotNull("MemberName",m.get().getAliasOrMemberName())}let c=o.getQueryModel();let A=t.isAbap(c);e.QInARepoFormulaException.exportThresholds(o.getThresholds(),t,n,A);e.QInARepoFormulaException.exportEvaluates(o.getEvaluates(),t,n,A);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFormulaException.prototype.exportKeyReference=function(t,i,n){let r=i;if(r.getQueryManager()!==null){if(!r.getQueryManager().isKeyRefSerializationEnabled()){return false}}let o=r.getQueryModel();if(e.notNull(o)){let i=o.getFormulaExceptionManager();if(i.getModelFormulaException(r.getName())===r){e.QInARepoUtils.addKeyRefStructure(t,r,n,r.getQueryManager());return true}}return e.QInARepository.prototype.exportKeyReference.call(this,t,i,n)};e.QInARepoFormulaException.prototype.getComponentType=function(){return e.OlapComponentType.FORMULA_EXCEPTION};e.QInARepoFormulaException.prototype.getDimensionName=function(t,i){let n=i.getStringByKey("DimensionName");if(e.isNull(n)&&i.getBooleanByKeyExt("MeasureStructure",false)){n=t.getMeasureDimension().getName()}return n};e.QInARepoFormulaException.prototype.importComponent=function(t,i,n,r,o){let l=i;let a=this.getTagName();if(e.notNull(a)&&e.notNull(l)){l=l.getStructureByKey(a)}let p=e.isNull(o)?null:o.getQueryModel();if(e.notNull(p)&&e.notNull(l)){let t=p.getFormulaExceptionManager();let i=l.getStructureByKey("KeyRef");let r=l.getStringByKey("Name");let o=null;if(e.notNull(i)){let n=e.QFactory.createKeyRef(i.getStringByKey("StorageName"),i.getStringByKey("GroupName"),i.getStringByKey("ObjectName"));o=t.getModelFormulaExceptionByKeyRef(n)}else if(e.isNull(n)&&e.notNull(r)){o=t.getModelFormulaException(r)}if(e.notNull(o)){return o}}return e.QInARepository.prototype.importComponent.call(this,t,i,n,r,o)};e.QInARepoFormulaException.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=o.getQueryModel();let a=n;if(e.isNull(a)){let t=i.getStringByKey("Name");let n=i.getStringByKey("Text");a=e.QFactory.createFormulaException(o,t,n)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("NullAsZero")){a.setHandleNullAsZero(i.getBooleanByKey("NullAsZero"))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("HandleExcludedFilters")){a.setHandleExcludedFilters(i.getBooleanByKey("HandleExcludedFilters"))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("CalculateRatioVariance")){a.setCalculateRatioVariance(i.getBooleanByKey("CalculateRatioVariance"))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("AutoSignFlip")){a.setAutoSignFlip(i.getBooleanByKey("AutoSignFlip"))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("IsPrimary")){a.setIsPrimaryMeasure(i.getBooleanByKeyExt("IsPrimary",true))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("Active")){a.setActive(i.getBooleanByKeyExt("Active",true))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("EvaluateDefault")){let t=e.QExceptionEvalType.lookupExceptionEvalType(i.getStringByKey("EvaluateDefault"));a.setEvaluateDefault(t)}a.setFormulaExceptionType(e.FormulaExceptionType.lookup(i.getStringByKey("Type")));let p=i.getListByKey("StructureContext");let s=p.getStructureAt(0);let u=this.getDimensionName(l,s);let g=s.getStringByKey("MemberName");if(e.notNull(u)&&e.notNull(g)){let t=l.getDimensionByNameFromExistingMetadata(u);let i=t.getStructureMemberByAliasOrMember(g);if(e.isNull(i)){i=l.getOlapEnv().getClientQueryObjectManager().getStructuredMember(g,l.getQueryManager().getClientQueryObjectStorageName(),t===l.getPrimaryCalculationDimension())}a.setMeasure(i)}let y=p.getStructureAt(1);let m=this.getDimensionName(l,y);let c=y.getStringByKey("MemberName");if(e.notNull(m)&&e.notNull(c)){let t=l.getDimensionByNameFromExistingMetadata(m);let i=t.getStructureMemberByAliasOrMember(c);if(e.isNull(i)){return null}a.setBaseMeasure(i)}else if(e.notNull(c)){a.setBaseMeasureName(c)}e.QInARepoFormulaException.importEvaluates(i,l,a,t);let A=p.getStructureAt(2);let S=this.getDimensionName(l,A);let d=A.getStringByKey("MemberName");if(e.notNull(S)&&e.notNull(d)){let t=l.getDimensionByNameFromExistingMetadata(S);let i=t.getStructureMemberByAliasOrMember(d);if(e.isNull(i)){return null}a.setReferenceMeasure(i)}else if(e.notNull(d)){a.setReferenceMeasureName(d)}e.QInARepoFormulaException.importThresholds(i,a);if(p.size()>3){let t=p.getStructureAt(3);let i=this.getDimensionName(l,t);let n=t.getStringByKey("MemberName");if(e.notNull(i)&&e.notNull(n)){let t=l.getDimensionByNameFromExistingMetadata(i);let r=t.getStructureMemberByAliasOrMember(n);if(e.isNull(r)){return null}a.setStructure(r)}}return a};e.QInARepoFormulaExceptionManager=function(){};e.QInARepoFormulaExceptionManager.prototype=new e.QInARepository;e.QInARepoFormulaExceptionManager.prototype._ff_c="QInARepoFormulaExceptionManager";e.QInARepoFormulaExceptionManager.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;if(e.notNull(o)){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QExceptionProperties.QY_FORMULA_RESULT_VISIBLE)){n.putBoolean("FormulaResultVisible",o.isFormulaResultVisible())}let i=n.putNewList("ActiveStatusModelExceptions");e.XStream.of(o.getAllModelFormulaExceptions()).forEach(e=>{if(!e.isActive()){i.addString(e.getName())}});let r=e.PrFactory.createList();for(let i=0;i<o.size();i++){let n=o.get(i);if(e.notNull(n)){let i=e.PrFactory.createStructure();t.exportFormulaException(n,i);r.add(i)}}n.put("FormulaExceptions",r)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFormulaExceptionManager.prototype.getComponentType=function(){return e.OlapComponentType.FORMULA_EXCEPTION_MANAGER};e.QInARepoFormulaExceptionManager.prototype.getDeactivatedModelExceptions=function(t){t.getListByKey("ActiveStatusModelExceptions");let i=t.getListByKey("ActiveStatusModelExceptions");let n=e.XList.create();for(let t=0;t<i.size();t++){n.add(e.XStringValue.create(i.get(t).asString().getString()))}return n};e.QInARepoFormulaExceptionManager.prototype.getTagName=function(){return"FormulaExceptionManager"};e.QInARepoFormulaExceptionManager.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(e.notNull(l)){l.clear();if(e.notNull(i)){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("FormulaResultVisible")){l.setFormulaResultVisible(i.getBooleanByKeyExt("FormulaResultVisible",false))}let n;let r=i.getListByKey("FormulaExceptionsModeler");if(e.notNull(r)){for(let i=0;i<r.size();i++){let a=r.getStructureAt(i);let p=a.getStringByKey("Name");let s=a.getStringByKey("Text");n=l.addNewModelFormulaException(p,s);let u=t.importFormulaException(a,n,l,o);if(e.isNull(u)){l.removeModelFormulaException(p,true)}}}r=i.getListByKey("FormulaExceptions");if(e.notNull(r)){for(let e=0;e<r.size();e++){n=t.importFormulaException(r.getStructureAt(e),null,l,o);l.add(n)}}if(i.containsKey("ActiveStatusModelExceptions")){let t=this.getDeactivatedModelExceptions(i);e.XStream.of(t).forEach(t=>{let i=l.getModelFormulaException(t.toString());if(e.notNull(i)){i.setActive(false)}})}}}return l};e.QInARepoHierarchy=function(){};e.QInARepoHierarchy.prototype=new e.QInARepository;e.QInARepoHierarchy.prototype._ff_c="QInARepoHierarchy";e.QInARepoHierarchy.appendItemsToCatalogResult=function(t,i,n){let r=e.PrUtils.getListSize(i,0);for(let o=0;o<r;o++){let r=e.PrUtils.getStructureElement(i,o);let l=e.HierarchyCatalogItem.createCatalogItem();l.setDimensionName(n);let a;if(r.hasStringByKey("Name")){a=r.getStringByKey("Name")}else{a=r.getStringByKey("HierarchyName")}if(e.XStringUtils.isNullOrEmpty(a)||t.containsHierarchy(a)){continue}l.setHierarchyName(a);l.setHierarchyUniqueName(r.getStringByKey("UniqueName"));let p=e.PrUtils.getStringProperty(r,"Description");if(e.notNull(p)){l.setHierarchyLongText(p.getString())}let s=e.PrUtils.getStringProperty(r,"Version");if(e.notNull(s)){l.setVersionName(s.getString())}let u=e.PrUtils.getStringProperty(r,"Structure");if(e.notNull(u)){l.setHierarchyType(e.HierarchyType.lookup(u.getString()))}let g=e.PrUtils.getBooleanValueProperty(r,"IsModeled",false);l.setIsModeled(g);let y=e.PrUtils.getStringProperty(r,"DateTo");if(e.notNull(y)){let t=y.getString();if(e.XStringUtils.isNotNullAndNotEmpty(t)){l.setDateTo(e.XDate.createDateFromIsoFormat(t))}}let m=e.PrUtils.getListProperty(r,"Levels");if(e.notNull(m)){l.setSupportsHierarchyLevels(true);let t=e.XList.create();let i=e.PrUtils.getListSize(m,0);for(let n=0;n<i;n++){let i=e.PrUtils.getStructureElement(m,n);if(e.isNull(i)){continue}let r=e.HierarchyCatalogLevel.createCatalogLevel();let o=e.PrUtils.getIntegerValueProperty(i,"Level",-1);if(o>-1){r.setLevel(o)}let l=e.PrUtils.getStringProperty(i,"LevelName");if(e.notNull(l)){r.setLevelName(l.getString())}let a=e.PrUtils.getStringProperty(i,"LevelCaption");if(e.notNull(a)){r.setLevelDescription(a.getString())}let p=e.PrUtils.getStringProperty(i,"LevelUniqueName");if(e.notNull(p)){r.setLevelUniqueName(p.getString())}let s=e.PrUtils.getStringProperty(i,"DimensionName");if(e.notNull(s)){r.setLevelDimensionName(s.getString())}let u=e.PrUtils.getIntegerProperty(i,"LevelType");if(e.notNull(u)){r.setLevelType(e.QInAConverter.lookupHierarchyLevelType(u.getInteger()))}t.add(r)}l.setHierarchyLevels(t)}let c=r.getStringByKey("RestNode");if(e.notNull(c)){l.setRestNode(c)}let A=r.getStringByKey("VirtualRootNode");if(e.notNull(A)){l.setVirtualRootNode(A)}t.addItem(l)}return t};e.QInARepoHierarchy.exportHierarchyForFilter=function(t,i,n,r,o,l,a,p,s){if(e.notNull(a)){n.putString("HierarchyName",a);if(t.getSession().hasFeature(e.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER)&&i){if(e.isNull(o)||!e.XString.isEqual(o.getName(),e.QFilter.FIXED_FILTER_CONTAINER)||e.notNull(l)&&l.isExecuteAutoVariableSubmit()){e.QInARepoUtils.setDateIfNotNull(t,n,"HierarchyDueDate",p);n.putStringNotNull("HierarchyVersion",s)}}}};e.QInARepoHierarchy.exportLevels=function(t,i){if(i.supportsHierarchyLevels()){let n=t.putNewList("Levels");let r=i.getHierarchyLevels();if(e.notNull(r)){let t=r.size();for(let i=0;i<t;i++){let t=r.get(i);let o=n.addNewStructure();o.putString("LevelUniqueName",t.getLevelUniqueName());o.putInteger("Level",t.getLevel());o.putString("LevelName",t.getLevelName());o.putString("LevelCaption",t.getLevelDescription());o.putStringNotNull("DimensionName",t.getLevelDimensionName());o.putInteger("LevelType",e.QInAConverter.lookupHierarchyLevelTypeIna(t.getLevelType()))}}}};e.QInARepoHierarchy.hasPlaceHolderInStructure=function(t,i,n){let r=t.getStringByKey(i);let o=e.notNull(r)&&e.XString.isEqual(n,r);return o};e.QInARepoHierarchy.importHierarchyForFilter=function(t,i,n,r,o){let l=n.getStringByKey("HierarchyName");let a=null;let p=null;if(i&&t){p=n.getStringByKey("HierarchyVersion");let t=n.getStringByKey("HierarchyDueDate");if(e.notNull(t)){if(o===e.FilterComponentType.CARTESIAN_LIST){a=e.XDate.createDateSafe(t)}else if(o===e.FilterComponentType.OPERATION){a=e.XDate.createDateFromSAPFormat(t)}}}if(o===e.FilterComponentType.CARTESIAN_LIST){r.setHierarchyInfo(l,a,p)}else if(o===e.FilterComponentType.OPERATION){r.setHierarchyInfo(l,a,p)}};e.QInARepoHierarchy.importLeveledHierarchy=function(t,i,n,r){let o=e.QLeveledHierarchy.create(i,n,r.getStringByKey(r.containsKey("Name")?"Name":"HierarchyName"));o.setHierarchyUniqueName(r.getStringByKey("UniqueName"));if(r.getStringByKey("DimensionName")===null){o.setDimensionName(n.getName())}else{o.setDimensionName(r.getStringByKey("DimensionName"))}o.setHierarchyType(e.HierarchyType.lookup(r.getStringByKey("Structure")));o.setIsModeled(r.getBooleanByKeyExt("IsModeled",false));let l=r.getStringByKey("DueDate");if(e.XStringUtils.isNotNullAndNotEmpty(l)){o.setDateTo(e.QInARepoUtils.createDate(l))}o.setHierarchyDescription(r.getStringByKey("Description"));let a=r.getListByKey("Levels");if(!e.PrUtils.isListEmpty(a)){e.QInARepoHierarchy.importLevels(o,a)}return o};e.QInARepoHierarchy.importLevels=function(t,i){let n=i.size();for(let r=0;r<n;r++){let n=i.getStructureAt(r);let o=e.QHierarchyLevel.create(t,n.getStringByKey("LevelUniqueName"),n.getIntegerByKey("Level"));o.setLevelName(n.getStringByKey("LevelName"));o.setLevelText(n.getStringByKey("LevelCaption"));o.setLevelDimensionName(n.getStringByKey("DimensionName"));o.setLevelType(e.QInAConverter.lookupHierarchyLevelType(n.getIntegerByKey("LevelType")));o.setNavigationAttribute(n.getStringByKey("NavAttr"));t.getAllLevelBase().add(o)}};e.QInARepoHierarchy.isDueDatePlaceHolderForAutoSubmit=function(t){let i=false;if(e.notNull(t)){let n=t.getQueryManager();i=e.notNull(n)&&n.isExecuteAutoVariableSubmit()&&t.effectivelyUseHierarchyDueDateVariable()}return i};e.QInARepoHierarchy.isNamePlaceHolderForAutoSubmit=function(t){let i=false;if(e.notNull(t)){let n=t.getQueryManager();i=e.notNull(n)&&n.isExecuteAutoVariableSubmit()&&t.effectivelyUseHierarchyNameVariable()}return i};e.QInARepoHierarchy.isVersionPlaceHolderForAutoSubmit=function(t){let i=false;if(e.notNull(t)){let n=t.getQueryManager();i=e.notNull(n)&&n.isExecuteAutoVariableSubmit()&&t.effectivelyUseHierarchyVersionVariable()}return i};e.QInARepoHierarchy.validateHierarchyNameForMetadataBasedHierarchy=function(t,i,n){let r;if(t.getComponentType()===e.OlapComponentType.OLAP_FILTER_MANAGER||e.XStringUtils.isNullOrEmpty(n)){r=true}else{let o=t.getQueryModel();let l=e.isNull(o)?null:o.getDimensionByName(i);r=e.notNull(l)&&l.supportsHierarchy()&&(l.hasExternalHierarchies()||l.getHierarchies()===null||t.getQueryManager()!==null&&t.getQueryManager().getSystemType().isTypeOf(e.SystemType.BW)||!o.getModelCapabilities().supportsHierarchyLevelMetadata()&&!o.getModelCapabilities().supportsDimensionHierarchyLevels()||e.XStream.of(l.getHierarchies().getObjects()).anyMatch(t=>e.XString.isEqual(t.getHierarchyName(),n)))}return r};e.QInARepoHierarchy.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;if(o.supportsHierarchy()){let i=o.isHierarchyActive();let r=t.isAbap(o.getQueryModel());let l=o.getHierarchyName();let a=o.getQueryManager();let p=e.notNull(a)&&a.isExecuteAutoVariableSubmit();let s=e.QInARepoHierarchy.isDueDatePlaceHolderForAutoSubmit(o);let u=e.QInARepoHierarchy.isVersionPlaceHolderForAutoSubmit(o);let g=e.QInARepoHierarchy.isNamePlaceHolderForAutoSubmit(o);let y=e.XStringUtils.isNullOrEmpty(l)&&g;let m=l;if(y){l=o.getHierarchyNameVariableName()}if(e.XStringUtils.isNotNullAndNotEmpty(l)){if(o.isEnforceHierarchyNameVariable()){n.putBoolean("HierarchyNameVariableEnforce",true)}if(o.isEnforceHierarchyDueDateVariableOrDefault()){n.putBoolean("HierarchyDueDateVariableOrDefaultEnforce",true)}if(o.isEnforceHierarchyVersionVariableOrDefault()){n.putBoolean("HierarchyVersionVariableOrDefaultEnforce",true)}let a=o.getHierarchyManagerBase();let g=t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||a.shouldExportInRepoDeltaFormat();if(g){e.QInAExportUtil.setNonEmptyString(n,"HierarchyName",l);e.QInAExportUtil.setNonEmptyString(n,"Name",l);if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||a.hasPropertyChanged(e.QHierarchyProperties.QY_HIERARCHY_ACTIVE)){n.putBoolean("HierarchyActive",i)}if(e.XStringUtils.isNullOrEmpty(m)||e.XString.isEqual(m,o.getHierarchyNameVariableName())){n.putString("NameIs","Variable")}if(o.effectivelyUseHierarchyDueDateVariable()||s){n.putString("DueDateIs","Variable");e.QInAExportUtil.setNonEmptyString(n,"DueDate",o.getHierarchyDueDateVariableName())}else if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||a.hasPropertyChanged(e.QHierarchyProperties.QY_DUE_DATE)){e.QInARepoUtils.setDate(t,n,"DueDate",o.getEffectiveHierarchyDueDate())}if(u){n.putString("VersionIs","Variable");e.QInAExportUtil.setNonEmptyString(n,"Version",o.getHierarchyVersionVariableName())}else{e.QInAExportUtil.setNonEmptyString(n,"Version",o.getEffectiveHierarchyVersion())}if(p&&o.useDefaultDrillLevelOnChange()){n.putBoolean("UseDefaultDrillLevelOnChange",true)}let g=0;g=o.getInitialDrillLevel();if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDimensionProperties.QY_SELECTOR_INITIAL_DRILL_LEVEL)){n.putInteger("SelectorInitialDrillLevel",o.getSelectorRootLevel())}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||a.hasPropertyChanged(e.QHierarchyProperties.QY_DRILL_LEVEL)){n.putInteger("InitialDrillLevel",g)}if(o.getInitialDrillOffset()!==0){n.putInteger("InitialDrillOffset",o.getInitialDrillOffset())}if(o.isExplicitDrillOnFilteredNodes()){n.putBoolean("ExplicitDrillOnFilteredNodes",o.isExplicitDrillOnFilteredNodes())}let y=o.getModelCapabilities()!==null&&o.getModelCapabilities().supportsMaxDrillLevel();if(y){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||a.hasPropertyChanged(e.QHierarchyProperties.QY_MAX_DRILL_LEVEL)){let e=o.getMaxDrillLevel();n.putInteger("MaxDrillLevel",e)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||a.hasPropertyChanged(e.QHierarchyProperties.QY_MAX_RUNTIME_LEVEL)){let e=o.getMaxRuntimeLevel();n.putInteger("MaxRuntimeLevel",e)}}if(o.hasStickyMembers()){n.putNewList("StickyDimensionMembers").addAllStrings(o.getStickyMembers())}let c=o.getLowerLevelNodeAlignment();if(o.getModelCapabilities().supportsExpandBottomUp()){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||a.hasPropertyChanged(e.QHierarchyProperties.QY_LOWER_LEVEL_NODE_ALIGNMENT)){n.putBoolean("ExpandBottomUp",c===e.Alignment.CHILDREN_ABOVE_PARENT)}}if(r){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||a.hasPropertyChanged(e.QHierarchyProperties.QY_LOWER_LEVEL_NODE_ALIGNMENT)){let t;let i=o.getModelCapabilities();if(e.notNull(i)&&i.supportsExpandBottomUp()){t=e.QInAConverter.lookupLowerLevelNodeAlignmentInA(c)}else{t=e.QInAConverter.lookupLowerLevelNodeAlignmentInA2(c)}n.putString("LowerLevelNodeAlignment",t)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.getHierarchyManager().hasPropertyChanged(e.QHierarchyProperties.QY_NODE_CONDENSATION)){let e=o.hasNodeCondensation();n.putBoolean("NodeCondensation",e)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||a.hasPropertyChanged(e.QHierarchyProperties.QY_MEMBER_OF_POSTED_NODE_VISIBILITY)){let t=o.getMemberOfPostedNodeVisibility();let i=e.QInAConverter.lookupResultSetVisibilityInA(t);n.putString("MemberOfPostedNodeVisibility",i)}}if(o.isHierarchyNavigationDeltaMode()){n.putBoolean("HierarchyNavigationDeltaMode",true)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA){this.exportHierarchyLevels(n,o,l)}let A=o.getHierarchy();if(e.notNull(A)&&A.isCustomHierarchy()){n.putBoolean("IsTransient",true);n.putStringNotNull("Description",A.getHierarchyDescription())}}return n}}return null};e.QInARepoHierarchy.prototype.exportHierarchyLevels=function(t,i,n){if(i.getModelCapabilities().supportsDimensionHierarchyLevels()){let r=i.getHierarchies();if(e.notNull(r)){let i=r.getObjectsIterator();while(i.hasNext()){let r=i.next();if(e.XString.isEqual(r.getHierarchyName(),n)){e.QInARepoHierarchy.exportLevels(t,r);return}}}}};e.QInARepoHierarchy.prototype.getComponentType=function(){return e.OlapComponentType.HIERARCHY};e.QInARepoHierarchy.prototype.getTagName=function(){return"HierarchyRepo"};e.QInARepoHierarchy.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(l.supportsHierarchy()){let n=l.isDisplayHierarchyFixInFilter();l.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(false);if(e.isNull(i)){l.setHierarchy(null)}else if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasElements()){let r=i.getStringByKey("Name")!==null?i.getStringByKey("Name"):i.getStringByKey("HierarchyName");let a=l.getHierarchyManagerBase().useHierarchyNameVariable();if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("NameIs")){let t=e.QInARepoHierarchy.hasPlaceHolderInStructure(i,"NameIs","Variable");a=t}l.getHierarchyManagerBase().setUseHierarchyNameVariable(a);if(a){l.getHierarchyManagerBase().setHierarchyNameVariableName(r)}let p=null;if(e.XStringUtils.isNotNullAndNotEmpty(r)){if(l.getModelCapabilities().supportsDimensionHierarchyLevels()){this.importHierarchyAsCatalogItem(i,l);this.importLeveledHierarchyToMetadata(t,i,o,l)}let n=l.getLeveledHierarchy(r);let a=false;if(t.getMode()===e.QModelFormat.INA_REPOSITORY_DELTA&&(e.XStringUtils.isNotNullAndNotEmpty(l.getHierarchyName())||e.notNull(n))){if(l.getHierarchy()!==null&&e.XString.isEqual(l.getHierarchyName(),r)){p=l.getHierarchy();a=l.isHierarchyActive()}else if(l.getHierarchy()!==null&&!e.XString.isEqual(l.getHierarchyName(),r)){p=l.getHierarchy();l.setHierarchyName(r);p.setHierarchyName(r)}else if(e.notNull(n)&&e.XString.isEqual(n.getName(),r)){p=e.QHierarchy.create(l.getContext(),l,r)}}else{if(i.getBooleanByKey("IsTransient")){p=e.QHierarchy.createCustomHierarchy(l.getContext(),l,r,i.getStringByKey("Description"))}else{p=e.QHierarchy.create(l.getContext(),l,r)}}this.importHierarchyDueDate(t,i,l,p);this.importHierarchyVersion(i,l,p);if(e.notNull(p)){l.setHierarchy(p);if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA){a=true}let n=i.getBooleanByKeyExt("HierarchyActive",a);l.setHierarchyActive(n);l.setSelectorHierarchyActive(n);let r=l.getQueryManager();let o=e.notNull(r)&&r.isExecuteAutoVariableSubmit();if(o&&i.containsKey("UseDefaultDrillLevelOnChange")){l.setUseDefaultDrillLevelOnChange(i.getBooleanByKey("UseDefaultDrillLevelOnChange"))}}}l.setEnforceHierarchyNameVariable(i.getBooleanByKeyExt("HierarchyNameVariableEnforce",false));l.getHierarchyManagerBase().setEnforceHierarchyDueDateVariableOrDefaultInternal(i.getBooleanByKeyExt("HierarchyDueDateVariableOrDefaultEnforce",false));l.setEnforceHierarchyVersionVariableOrDefault(i.getBooleanByKeyExt("HierarchyVersionVariableOrDefaultEnforce",false));let s=i.getListByKey("StickyDimensionMembers");l.clearStickyMembers();if(e.XCollectionUtils.hasElements(s)){for(let e=0;e<s.size();e++){l.addStickyMember(s.getStringAt(e))}}let u=0;if(t.getMode()===e.QModelFormat.INA_REPOSITORY_DELTA){u=l.getInitialDrillLevel()}let g=i.getIntegerByKeyExt("InitialDrillLevel",u);let y=l.getSelectorRootLevel();if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA){y=i.getIntegerByKeyExt("SelectorInitialDrillLevel",g)}else if(i.containsKey("SelectorInitialDrillLevel")){y=i.getIntegerByKey("SelectorInitialDrillLevel")}l.setInitialDrillLevel(g);l.setSelectorInitialDrillLevel(y);if(l.getModelCapabilities().supportsMaxDrillLevel()){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("MaxDrillLevel")){let e=i.getIntegerByKeyExt("MaxDrillLevel",-1);l.getHierarchyManager().setMaxDrillLevel(e)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("MaxRuntimeLevel")){let e=i.getIntegerByKeyExt("MaxRuntimeLevel",-1);l.getHierarchyManager().setMaxRuntimeLevel(e)}}let m=i.getIntegerByKeyExt("InitialDrillOffset",0);l.setInitialDrillOffset(m);l.setExplicitDrillOnFilteredNodes(i.getBooleanByKeyExt("ExplicitDrillOnFilteredNodes",false));if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("LowerLevelNodeAlignment")||i.containsKey("ExpandBottomUp")){let t=e.Alignment.DEFAULT_VALUE;if(o.getModelCapabilities().supportsExpandBottomUp()){let n=i.getStringByKeyExt("LowerLevelNodeAlignment","Default");t=e.QInAConverter.lookupLowerLevelNodeAlignment(n);if(i.containsKey("ExpandBottomUp")){let n=i.getBooleanByKeyExt("ExpandBottomUp",false);if(n){t=e.Alignment.CHILDREN_ABOVE_PARENT}}}l.getHierarchyManagerBase().setLowerLevelNodeAlignmentForRepoImport(t)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("NodeCondensation")){let e=i.getBooleanByKeyExt("NodeCondensation",false);l.setHasNodeCondensation(e)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("MemberOfPostedNodeVisibility")){let t=i.getStringByKeyExt("MemberOfPostedNodeVisibility","Visible");let n=e.QInAConverter.lookupResultSetVisibility(t);l.setMemberOfPostedNodeVisibility(n)}l.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(n);return p}l.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(n)}return null};e.QInARepoHierarchy.prototype.importHierarchyAsCatalogItem=function(t,i){let n=e.PrFactory.createList();n.add(t);let r=i.getHierarchies();if(e.isNull(r)){r=e.QFactory.createHierarchyCatalogResult();e.QInARepoHierarchy.appendItemsToCatalogResult(r,n,i.getName());i.getHierarchyManagerBase().setHierarchies(r)}else{e.QInARepoHierarchy.appendItemsToCatalogResult(r,n,i.getName())}};e.QInARepoHierarchy.prototype.importHierarchyDueDate=function(t,i,n,r){let o=i.getStringByKey("DueDate");let l=e.QInARepoHierarchy.hasPlaceHolderInStructure(i,"DueDateIs","Variable");n.setUseHierarchyDueDateVariable(l);if(l){n.setHierarchyDueDateVariableName(e.XStringUtils.isNullOrEmpty(o)?null:o)}else if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("DueDate")){if(e.notNull(r)){r.setHierarchyDueDate(e.QInARepoUtils.createDate(o));n.getHierarchyManagerBase().setDueDateDefaultByMetadata(false)}}if(e.notNull(r)){let t=i.getStringByKey("DateTo");r.setDateTo(e.QInARepoUtils.createDate(t));let n=i.getStringByKey("0DATEFROM");r.setDateFrom(e.QInARepoUtils.createDate(n));let o=i.getStructureByKey("Metadata");if(e.notNull(o)){t=o.getStringByKey("DateTo");if(e.XStringUtils.isNotNullAndNotEmpty(t)){r.setDateTo(e.QInARepoUtils.createDate(t))}n=o.getStringByKey("0DATEFROM");if(e.XStringUtils.isNotNullAndNotEmpty(n)){r.setDateFrom(e.QInARepoUtils.createDate(n))}}}};e.QInARepoHierarchy.prototype.importHierarchyVersion=function(t,i,n){let r=t.getStringByKey("Version");let o=e.QInARepoHierarchy.hasPlaceHolderInStructure(t,"VersionIs","Variable");i.getHierarchyManagerBase().setUseHierarchyVersionVariable(o);if(o){i.getHierarchyManagerBase().setHierarchyVersionVariableName(e.XStringUtils.isNullOrEmpty(r)?null:r)}else if(e.notNull(n)){n.setHierarchyVersion(r)}};e.QInARepoHierarchy.prototype.importLeveledHierarchyToMetadata=function(t,i,n,r){let o=r.getQueryModelBase().getQueryManagerBase();if(e.notNull(o)&&!e.PrUtils.isListEmpty(i.getListByKey("Levels"))){let l=o.getMetadataModelBase();let a=l.getLeveledHierarchiesBase();let p=e.QInARepoHierarchy.importLeveledHierarchy(t,n,r,i);if(!a.contains(p)){a.add(p)}}};e.QInARepoMemberAbstract=function(){};e.QInARepoMemberAbstract.prototype=new e.QInARepository;e.QInARepoMemberAbstract.prototype._ff_c="QInARepoMemberAbstract";e.QInARepoMemberAbstract.determineMemberType=function(t,i,n){let r;let o=i.getStringByKey(n.getKeyField().getName());if(i.containsKey("MemberType")){let n=i.getStringByKeyExt("MemberType","Measure");r=e.QInAConverter.lookupMeasureStructureMemberType(n);if(e.isNull(r)){t.addError(e.ErrorCodes.INVALID_STATE,e.XStringUtils.concatenate3("MeasureStructure->MemberType unsupported: '",n,"'"));return null}}else if(n.getModelCapabilities().supportsCustomMeasuresInMetadata()&&e.notNull(o)){if(n.getDimensionType()===e.DimensionType.ACCOUNT){r=e.MemberType.MEASURE}else{r=n.getStructureMember(o).getMemberType();if(r===e.MemberType.BASIC_MEASURE){r=e.MemberType.MEASURE}}}else{if(i.containsKey("Formula")){r=e.MemberType.FORMULA}else{let t=i.getStructureByKey("Selection");if(e.isNull(t)){r=e.MemberType.MEASURE}else{r=t.containsKey("Operator")?e.MemberType.RESTRICTED_MEASURE:e.MemberType.MEASURE}}}return r};e.QInARepoMemberAbstract.exportChartFormatting=function(t,i,n){if(i.isShowCellChart()){n.putBoolean("ShowCellChart",true)}if(i.isHideNumberForCellChart()){n.putBoolean("HideNumberForCellChart",true)}n.putStringNotNullAndNotEmpty("CellChartBarColor",i.getCellChartBarColor());n.putStringNotNullAndNotEmpty("CellChartLineColor",i.getCellChartLineColor());n.putStringNotNullAndNotEmpty("CellChartOrientation",e.QInAConverter.lookupCellChartOrientationInA(i.getCellChartOrientation()));n.putStringNotNullAndNotEmpty("CellChartType",e.QInAConverter.lookupCellChartTypeInA(i.getCellChartType()))};e.QInARepoMemberAbstract.exportCurrencyMetadataFusion=function(t,i,n){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QStructureMemberProperties.QY_RATE_TYPE)){n.putStringNotNullAndNotEmpty("RateType",e.QInAConverter.lookupRateTypeInA(i.getRateType()))}n.putStringNotNullAndNotEmpty("UnitDimension",i.getUnitDimensionName());n.putStringNotNullAndNotEmpty("UnitDimensionProperty",i.getUnitDimensionProperty())};e.QInARepoMemberAbstract.exportCustomMember=function(t,i){let n=i.getComponentType();let r=null;if(n===e.MemberType.FORMULA||n===e.MemberType.VARIANCE||n===e.MemberType.PARETO){r=e.PrFactory.createStructure();t.exportFormulaMeasure(i,r)}else if(n===e.MemberType.RESTRICTED_MEASURE){r=e.PrFactory.createStructure();t.exportRestrictedMeasure(i,r)}else if(n===e.MemberType.EXCEPTION_AGGREGATION){r=e.PrFactory.createStructure();t.exportExceptionAggregationMeasure(i,r)}else if(n===e.MemberType.CURRENCY_MEASURE){r=e.PrFactory.createStructure();t.exportCurrencyMeasure(i,r)}else if(n===e.MemberType.UNIT_MEASURE){r=e.PrFactory.createStructure();t.exportUnitMeasure(i,r)}return r};e.QInARepoMemberAbstract.exportDimensionContext=function(t,i){let n;n=t.getDimensionContext();if(e.notNull(n)){let e=i.putNewStructure("DimensionContext");e.putString("DatasetId",n.getQueryModel().getDatasetId());e.putString("DimensionName",n.getName())}};e.QInARepoMemberAbstract.exportFormattingProperties=function(t,i,n){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QStructureMemberProperties.QY_CURRENCY_PRESENTATION)){n.putStringNotNullAndNotEmpty("CurrencyPresentation",e.QInAConverter.lookupCurrencyPresentationInA(i.getCurrencyPresentation()))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QStructureMemberProperties.QY_SCALE_AND_UNIT_PLACEMENT)){n.putStringNotNullAndNotEmpty("ScaleAndUnitPlacement",e.QInAConverter.lookupScaleAndUnitPlacementInA(i.getScaleAndUnitPlacement()))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QStructureMemberProperties.QY_SCALE_FORMAT)){n.putStringNotNullAndNotEmpty("ScaleFormat",e.QInAConverter.lookupScaleFormatInA(i.getScaleFormat()))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QStructureMemberProperties.QY_SIGN_PRESENTATION)){n.putStringNotNullAndNotEmpty("SignPresentation",e.QInAConverter.lookupSignPresentationInA(i.getSignPresentation()))}};e.QInARepoMemberAbstract.exportFormulaConstantValue=function(t,i,n){let r=n.getValue()===null&&!e.XCollectionUtils.hasElements(n.getStringValues());let o=n.getVariable();if(r&&e.isNull(o)){i.putNull("Value")}let l=n.getValueType();if(l===e.XValueType.INTEGER){i.putString("ValueType","Number");if(!r){i.putInteger("Value",n.getInteger())}}else if(l===e.XValueType.DOUBLE||l===e.XValueType.DECIMAL_FLOAT){i.putString("ValueType","Number");if(!r){i.putDouble("Value",n.getDouble())}}else if(l===e.XValueType.LONG){i.putString("ValueType","Number");if(!r){i.putLong("Value",n.getLong())}}else if(l===e.XValueType.STRING){i.putString("ValueType","String");i.putString("Value",n.getString())}else if(l===e.XValueType.BOOLEAN){i.putString("ValueType","Bool");if(!r){i.putBoolean("Value",n.getBoolean())}}else if(l===e.XValueType.DATE){i.putString("ValueType","Date");if(!r){i.putString("Value",n.getDate().toString())}}else if(l===e.XValueType.DATE_TIME){i.putString("ValueType","DateTime");if(!r){i.putString("Value",n.getDateTime().toString())}}else if(l===e.XValueType.TIME){i.putString("ValueType","Time");if(!r){i.putString("Value",n.getTime().toString())}}else if(l.isSpatial()){i.putString("ValueType","String");if(!r){i.putString("Value",n.getGeometry().toWKT())}}else if(l===e.XValueType.TIMESPAN){i.putString("ValueType","String");if(!r){let e=n.getTimeSpan();i.putString("Value",e.toString())}}else if(l===e.XValueType.VARIABLE){e.QInAExportUtil.setNameIfNotNull(i,"Value",o);i.putString("ValueIs","Variable")}else if(l===e.XValueType.STRING_ARRAY){i.putString("ValueType","StringArray");if(!r){let e=n.getStringValues();let t=i.putNewList("Value");for(let i=0;i<e.size();i++){t.addString(e.get(i).getString())}}}};e.QInARepoMemberAbstract.exportFormulaItem=function(t,i,n,r){let o=t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||e.notNull(i)&&i.getModCounter()>0;if(o){e.QInARepoMemberAbstract.exportFormulaItemSignFlip(t,i,n,r,false,false)}};e.QInARepoMemberAbstract.exportFormulaItemSignFlip=function(t,i,n,r,o,l){if(e.notNull(i)){let a=i.getComponentType();if(a===e.OlapComponentType.FORMULA_CONSTANT){let r=i;let o=n.putNewStructure("Constant");let l=r.getUnit();if(e.XStringUtils.isNotNullAndNotEmpty(l)){o.putString("Unit",l)}let a=r.getCurrency();if(e.XStringUtils.isNotNullAndNotEmpty(a)){o.putString("Currency",a)}e.QInARepoMemberAbstract.exportFormulaConstantValue(t,o,r)}else if(a===e.OlapComponentType.FORMULA_OPERATION){let a=i;let p=n.putNewStructure("Function");p.putString("Name",a.getOperator().getDisplayString());let s=p.putNewList("Parameters");e.QInARepoMemberAbstract.exportFormulaItemSignFlip(t,a.getLeftSide(),s.addNewStructure(),r,o,l);e.QInARepoMemberAbstract.exportFormulaItemSignFlip(t,a.getRightSide(),s.addNewStructure(),r,o,l)}else if(a===e.OlapComponentType.FORMULA_FUNCTION){let a=i;let p=n.putNewStructure("Function");p.putString("Name",a.getFunctionName());let s=p.putNewList("Parameters");let u=a.size();for(let i=0;i<u;i++){e.QInARepoMemberAbstract.exportFormulaItemSignFlip(t,a.get(i),s.addNewStructure(),r,o,l)}if(a.requiresExternalSignFlip()){p.putBoolean("RequiresExternalSignFlip",true)}let g=a.getSolveOrder();if(g!==0){n.putInteger("SolveOrder",g)}}else if(a===e.OlapComponentType.FORMULA_ITEM_MEMBER){let l=i;let a=r.getQueryModel();let p=l.getVariable();let s;if(e.isNull(p)){s=e.PrFactory.createStructure();let i;i=e.QInAExportUtil.getMeasureMemberNameByAlias(a,l.getMemberName(),t);s.putStringNotNull("Name",i);s.putStringNotNull("Dimension",l.getDimensionName());if(l.isBooked()){s.putString("NameIs","Booked")}else if(l.isPrevious()){s.putString("NameIs","Previous")}if(l.isCalculationVariable()){s.putBoolean("IsCalculationVariable",true)}if(o){let i=e.QInARepoMemberAbstract.exportMemberWithSignFlip(t,l);if(e.notNull(i)){n.put("Function",i.getByKey("Function"))}else{n.put("Member",s)}}else{n.put("Member",s)}}else{s=n.putNewStructure("Member");s.putString("Name",p.getName());s.putString("NameIs","Variable")}e.QInARepoMemberAbstract.exportDimensionContext(l,s)}else if(a===e.OlapComponentType.FORMULA_ITEM_ATTRIBUTE){let t=i;let r=n.putNewStructure("AttributeValue");r.putString("Name",t.getFieldName());e.QInARepoMemberAbstract.exportDimensionContext(t,r)}}};e.QInARepoMemberAbstract.exportInternalDataType=function(t,i,n){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE_INTERNAL)){n.putStringNotNullAndNotEmpty("DataTypeInternal",e.QInAConverter.lookupValueTypeInA(i.getDataTypeInternal()))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE_SCALE)){let t=i.getDataTypeScale();if(e.notNull(t)){n.putInteger("DataTypeScale",t.getInteger())}}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE_PRECISION)){let t=i.getDataTypePrecision();if(e.notNull(t)){n.putInteger("DataTypePrecision",t.getInteger())}}};e.QInARepoMemberAbstract.exportMemberWithSignFlip=function(e,t){return null};e.QInARepoMemberAbstract.exportPostAggregation=function(t,i,n){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QStructureMemberProperties.QY_POST_AGGERGATION_TYPE)){let t=i.getPostAggregationType();if(e.notNull(t)){n.putString("PostAggregation",e.QInAConverter.lookupAggregationTypeInA(t))}}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QStructureMemberProperties.QY_POST_AGGREGATION_IGNORE_HIERARCHY)){if(i.isPostAggregationIgnoringHierarchy()||t.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA){n.putBoolean("PostAggregationIgnoreHierarchy",i.isPostAggregationIgnoringHierarchy())}}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QStructureMemberProperties.QY_POST_AGGREGATION_DIMENSIONS)){let t=i.getPostAggregationDimensions();if(t.hasElements()){let i=n.putNewList("PostAggregationDimensions");let r=t.getIterator();while(r.hasNext()){i.add(e.PrFactory.createString(r.next()))}}}};e.QInARepoMemberAbstract.exportWindowFunction=function(t,i){let n=t.getWindowFunction();if(e.notNull(n)){let t=i.putNewStructure("WindowFunction");t.putString("Name",e.QInAConverter.lookupWindowFunctionTypeInA(n.getType()));let r=n.getNotInPartitionDimensions();let o=t.putNewList("DimensionsNotInPartition");o.addAllStrings(r);let l=t.putNewList("SortDimensions");let a=n.getSortDimensions().getIterator();while(a.hasNext()){let t=a.next();let i=l.addNewStructure();i.putString("Name",t.getName());let n=t.getDirection();if(n===e.XSortDirection.ASCENDING||n===e.XSortDirection.DESCENDING){i.putString("Direction",e.QInAConverter.lookupSortDirectionInA2(n))}let r=t.getNulls();if(e.notNull(r)&&r!==e.NullsType.NONE){i.putString("Nulls",e.QInAConverter.lookupNullsTypeInA(r))}}let p=n.getFrame();if(e.notNull(p)){let i=t.putNewStructure("Frame");i.putString("Start",e.QInAConverter.lookupFrameStartTypeInA(p.getStart()));i.putInteger("StartPreceding",p.getStartPreceding());i.putString("End",e.QInAConverter.lookupFrameEndTypeInA(p.getEnd()));i.putInteger("EndFollowing",p.getEndFollowing())}}};e.QInARepoMemberAbstract.getFirstMemberForSignFlip=function(t,i){let n=i.getChildren();while(n.hasNext()){let i=n.next();if(i.getOlapComponentType()===e.FilterComponentType.OPERATION){let n=i;if(e.XString.isEqual(t,n.getDimensionName())){return n.getLow().getValue().toString()}}let r=e.QInARepoMemberAbstract.getFirstMemberForSignFlip(t,i);if(e.notNull(r)){return r}}return null};e.QInARepoMemberAbstract.getMemberForSignFlip=function(t){let i=t.getDimension();let n=t.getFilter();let r=i.getName();if(e.notNull(r)){if(n.isAll()){r=e.QInARepoMemberAbstract.getFirstMemberForSignFlip(r,n.getFilterRootElement())}let o=i.getStructureMemberByAliasOrMember(r);if(e.notNull(o)&&o.getComponentType()===e.MemberType.RESTRICTED_MEASURE&&o!==t){return e.QInARepoMemberAbstract.getMemberForSignFlip(o)}}return r};e.QInARepoMemberAbstract.importAccountMemberProperties=function(t,i){if(t.getStringByKey("AliasName")!==null){i.setAliasName(t.getStringByKey("AliasName"))}if(t.containsKey("AutoSignFlip")){i.setAutoSignFlip(t.getBooleanByKey("AutoSignFlip"))}if(t.getStringByKey("AccountType")!==null){i.setAccountType(e.AccountType.lookup(t.getStringByKey("AccountType")))}};e.QInARepoMemberAbstract.importAggregationType=function(t,i,n){let r=n.getStringByKey("Aggregation");let o=i.getAggregationType();let l=t.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA||n.getBooleanByKeyExt("ModelDefinedMember",false)&&i.getDimension()!==null&&i.getDimension().getDimensionType()!==e.DimensionType.ACCOUNT;if(e.XStringUtils.isNotNullAndNotEmpty(r)){let t=e.QInAConverter.lookupAggregationType(r);if(l){if(e.notNull(t)&&e.AggregationType.lookupStatisticalAggregation(t.getName())!==null&&!i.getModelCapabilities().supportsStatisticalAggregations()){t=null}if(e.isNull(t)){t=e.AggregationType.SUM}}i.setAggregationType(t)}else if(l){i.setAggregationType(o)}else{i.setAggregationType(null)}};e.QInARepoMemberAbstract.importChartFormatting=function(t,i){i.setShowCellChart(t.getBooleanByKey("ShowCellChart"));i.setHideNumberForCellChart(t.getBooleanByKey("HideNumberForCellChart"));i.setCellChartBarColor(t.getStringByKey("CellChartBarColor"));i.setCellChartLineColor(t.getStringByKey("CellChartLineColor"));i.setCellChartType(e.QInAConverter.lookupCellChartType(t.getStringByKey("CellChartType")));i.setCellChartOrientation(e.QInAConverter.lookupCellChartOrientation(t.getStringByKey("CellChartOrientation")))};e.QInARepoMemberAbstract.importCurrencyPlanningProperties=function(t,i){if(i.hasStringByKey("RateType")){t.setRateType(e.QInAConverter.lookupRateType(i.getStringByKey("RateType")))}if(i.hasStringByKey("UnitDimension")){t.setUnitDimensionName(i.getStringByKey("UnitDimension"))}if(i.hasStringByKey("UnitDimensionProperty")){t.setUnitDimensionProperty(i.getStringByKey("UnitDimensionProperty"))}};e.QInARepoMemberAbstract.importExceptionAggregationProperties=function(t,i,n,r){if(n.getModelCapabilities().supportsExceptionAggregationDimsFormulas()){if(t.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA&&(i.containsKey("ExceptionAggregationDimensions")||i.hasStringByKey("ExceptionAggregation"))){let t=e.PrUtils.asListOfString(i.getListByKey("ExceptionAggregationDimensions"));let o=e.XStream.ofString(t).filter(e=>n.getDimensionNames().contains(e.toString())).collect(e.XStreamCollector.toListOfString(e=>e.getString()));if(e.XCollectionUtils.hasElements(o)){r._setExceptionAggregationDimensionNames(o);let t=i.getStringByKey("ExceptionAggregation");r.setExceptionAggregationType(e.AggregationType.lookupOrCreate(t))}}else if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA){let t=e.PrUtils.asListOfString(i.getListByKey("ExceptionAggregationDimensions"));r._setExceptionAggregationDimensionNames(t);let n=i.getStringByKey("ExceptionAggregation");r.setExceptionAggregationType(e.AggregationType.lookupOrCreate(n))}}else if(r.getMemberType()===e.MemberType.BASIC_MEASURE||r.getMemberType()===e.MemberType.RESTRICTED_MEASURE){let t=i.getStringByKey("AggregationDimension");if(e.XStringUtils.isNotNullAndNotEmpty(t)){r.setAggregationDimensionName(t)}}};e.QInARepoMemberAbstract.importFormattingProperties=function(t,i,n){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasStringByKey("CurrencyPresentation")){n.setCurrencyPresentation(e.QInAConverter.lookupCurrencyPresentation(i.getStringByKey("CurrencyPresentation")))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasStringByKey("ScaleAndUnitPlacement")){n.setScaleAndUnitPlacement(e.QInAConverter.lookupScaleAndUnitPlacement(i.getStringByKey("ScaleAndUnitPlacement")))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasStringByKey("ScaleFormat")){n.setScaleFormat(e.QInAConverter.lookupScaleFormat(i.getStringByKey("ScaleFormat")))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasStringByKey("SignPresentation")){n.setSignPresentation(e.QInAConverter.lookupSignPresentation(i.getStringByKey("SignPresentation")))}};e.QInARepoMemberAbstract.importGenericMemberAbstractProperties=function(e,t,i){if(i.containsKey("ModelDefinedMember")){t.setModelDefinedMember(i.getBooleanByKey("ModelDefinedMember"))}if(i.containsKey("MinimumDrillState")){let e=i.getListByKey("MinimumDrillState").getIterator();while(e.hasNext()){t.addMinimumDrillState(e.next().asString().getString())}}};e.QInARepoMemberAbstract.importGenericMemberProperties=function(t,i,n){if(i.getQueryModel().isBasicMeasureSettingsExportedInRepo()||!i.isCreatedFromMetadata()||t.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA){if(n.containsKey("NumericShift")){if(e.XString.isEqual("%",n.getStringByKey("NumericShift"))){i.setNumericShiftPercent(true)}else{i.setNumericShift(n.getIntegerByKey("NumericShift"))}}if(n.containsKey("NumericScale")){i.setNumericScale(n.getIntegerByKey("NumericScale"))}if(n.containsKey("NumericPrecision")){i.setNumericPrecision(n.getIntegerByKey("NumericPrecision"))}}if(i.getModelCapabilities().supportsMemberVisibility()&&(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.hasStringByKey("Visibility"))){let t=n.getStringByKeyExt("Visibility","Visible");i.setResultVisibility(e.QInAConverter.lookupResultSetVisibility(t))}if(n.hasStringByKey("PostAggregation")||t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA){let t=n.getStringByKey("PostAggregation");let r=e.QInAConverter.lookupAggregationType(t);i.setPostAggregationType(r)}if(n.containsKey("PostAggregationIgnoreHierarchy")){i.setPostAggregationIgnoreHierarchy(n.getBooleanByKey("PostAggregationIgnoreHierarchy"))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.containsKey("PostAggregationDimensions")){let t=e.PrUtils.asListOfString(n.getListByKey("PostAggregationDimensions"));i._setPostAggregationDimensions(t)}e.QInARepoMemberAbstract.importWindowFunction(i,n);if(n.containsKey("CurrencyTranslationName")){i.setCurrencyTranslationName(n.getStringByKey("CurrencyTranslationName"))}if(n.containsKey("UnitTranslationName")){i.setUnitTranslationName(n.getStringByKey("UnitTranslationName"))}e.QInARepoMemberAbstract.importRunningAggregation(i,n)};e.QInARepoMemberAbstract.importGenericRuntimeMemberProperties=function(t,i,n){if(i.getQueryModel().isBasicMeasureAggregationExportedInRepo()||!i.isCreatedFromMetadata()){let r=n.getBooleanByKeyExt("ModelDefinedMember",false);let o=r&&i.getQueryManager().getInitSettings().getProviderType()===e.ProviderType.LIST_REPORTING;if(!o){e.QInARepoMemberAbstract.importAggregationType(t,i,n)}}e.QInARepoMemberAbstract.importGenericMemberProperties(t,i,n);if(n.containsKey("DataType")){i.setDataType(e.QInAConverter.lookupValueType(n.getStringByKey("DataType")))}if(n.getByKey("isModelDefinedMember")!==null){i.setModelDefinedMember(n.getBooleanByKey("isModelDefinedMember"))}e.QInARepoMemberAbstract.importIgnoredExternalDimensions(t,i,n);if((i.getQueryModel().isBasicMeasureSettingsExportedInRepo()||!i.isCreatedFromMetadata()||t.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA)&&n.containsKey("SolveOrder")){i.setSolveOrder(n.getIntegerByKeyExt("SolveOrder",0))}if(n.containsKey("PreferredHierarchy")){i.setPreferredHierarchy(n.getStringByKey("PreferredHierarchy"))}e.QInARepoMemberAbstract.importAccountMemberProperties(n,i)};e.QInARepoMemberAbstract.importIgnoredExternalDimensions=function(t,i,n){if(t.m_capabilities.supportsIgnoreExternalDimensions()){if(n.hasStringByKey("IgnoreExternalDimensions")){let t=n.getStringByKey("IgnoreExternalDimensions");if(e.XString.isEqual(t,"All")){i.setIgnoreAllExternalDimensions(true)}}else if(n.containsKey("IgnoreExternalDimensions")){let t=n.getListByKey("IgnoreExternalDimensions");i._setExternalDimensionsToIgnore(e.PrUtils.asListOfString(t))}}let r=n.getStringByKey("OverrideText");if(e.XStringUtils.isNotNullAndNotEmpty(r)){i.setOverrideText(r)}};e.QInARepoMemberAbstract.importInternalDataType=function(t,i){if(t.containsKey("DataTypeScale")){i.setDataTypeScale(t.getIntegerByKey("DataTypeScale"))}if(t.containsKey("DataTypePrecision")){i.setDataTypePrecision(t.getIntegerByKey("DataTypePrecision"))}if(t.containsKey("DataTypeInternal")){i.setDataTypeInternal(e.QInAConverter.lookupValueType(t.getStringByKey("DataTypeInternal")))}if(i.getDataTypeInternal()===null&&t.containsKey("[Measures].[SQLType]")){let n=t.getStringByKey("[Measures].[SQLType]");if(e.XStringUtils.isNotNullAndNotEmpty(n)){if(e.XString.startsWith(n,e.XStringUtils.concatenate2("DECIMAL","("))){i.setDataTypeInternal(e.XValueType.DECIMAL_FLOAT);let t=e.XString.size("DECIMAL")+1;let r=e.XString.indexOf(n,",");let o=e.XString.size(n)-1;if(r>t&&r<o){let l=e.XString.substring(n,t,r);let a=e.XString.substring(n,r+1,o);i.setDataTypePrecision(e.XInteger.convertFromString(l));i.setDataTypeScale(e.XInteger.convertFromString(a))}}else if(e.XString.startsWith(n,"SMALLDECIMAL")){i.setDataTypeInternal(e.XValueType.SMALL_DECIMAL)}else if(e.XString.startsWith(n,"DOUBLE")){i.setDataTypeInternal(e.XValueType.DOUBLE)}else if(e.XString.startsWith(n,"REAL")){i.setDataTypeInternal(e.XValueType.REAL)}else if(e.XString.startsWith(n,"INTEGER")||e.XString.isEqual(n,"INT")){i.setDataTypeInternal(e.XValueType.INTEGER)}else if(e.XString.startsWith(n,"TINYINT")){i.setDataTypeInternal(e.XValueType.TINYINT)}else if(e.XString.startsWith(n,"SMALLINT")){i.setDataTypeInternal(e.XValueType.SMALLINT)}else if(e.XString.startsWith(n,"BIGINT")){i.setDataTypeInternal(e.XValueType.BIGINT)}else if(e.XString.isEqual(n,"DATE")){i.setDataTypeInternal(e.XValueType.DATE)}else if(e.XString.isEqual(n,"TIME")){i.setDataTypeInternal(e.XValueType.TIME)}else if(e.XString.isEqual(n,"TIMESTAMP")){i.setDataTypeInternal(e.XValueType.DATE_TIME)}else if(e.XString.isEqual(n,"SECONDDATE")){i.setDataTypeInternal(e.XValueType.SECOND_DATE)}else if(e.XString.isEqual(n,"BOOLEAN")){i.setDataTypeInternal(e.XValueType.BOOLEAN)}}}};e.QInARepoMemberAbstract.importMeasure=function(t,i,n,r,o){let l;l=e.QInARepoMemberAbstract.determineMemberType(t,i,o);if(i.containsKey("MemberType")&&e.isNull(l)){return null}if(t.getSession().hasFeature(e.FeatureToggleOlap.MULTIPLE_ACCOUNT_HIERARCHIES)&&e.notNull(o)&&o.getDimensionType()===e.DimensionType.ACCOUNT){let t=i.getStringByKey("Name");let n=e.XStringUtils.concatenate2("].&[",e.QModelConstants.CALCULATION_PLACEHOLDER_ID_PREFIX);if(e.notNull(t)&&e.XString.startsWith(t,"[")&&e.XString.indexOf(t,n)!==-1){let n=e.XString.indexOf(t,e.QModelConstants.CALCULATION_PLACEHOLDER_ID_PREFIX);let r=e.XString.indexOfFrom(t,"]",n);let l=e.XString.substring(t,n,r);if(o.getPlaceholderIds().contains(l)){i.putString("Name",l)}}}return t.importStructureMemberExt(l,i,o,n)};e.QInARepoMemberAbstract.importRunningAggregation=function(t,i){if(i.containsKey("RunningAggregation")){let n=e.QInAConverter.lookupRunningAggregationOperator(i.getStringByKey("RunningAggregation"));let r=t.getMemberType();if(r===e.MemberType.BASIC_MEASURE||r===e.MemberType.RESTRICTED_MEASURE){let e=t;e.setRunningAggregationOperator(n);if(i.containsKey("RunningAggregationInitDim")){e.setRunningAggregationInitDimension(i.getStringByKey("RunningAggregationInitDim"))}}}};e.QInARepoMemberAbstract.importWindowFunction=function(t,i){let n=i.getStructureByKey("WindowFunction");if(e.notNull(n)){let i=e.QWindowFunction._createWindowFunction(e.QInAConverter.lookupWindowFunctionType(n.getStringByKey("Name")));let r=n.getListByKey("DimensionsNotInPartition");if(e.notNull(r)){for(let e=0;e<r.size();e++){i.addNotInPartitionDimension(r.getStringAt(e))}}let o=n.getListByKey("SortDimensions");if(e.notNull(o)){for(let t=0;t<o.size();t++){let n=o.getStructureAt(t);let r=n.getStringByKey("Name");let l=e.QInAConverter.lookupSortDirection2(n.getStringByKey("Direction"));let a=e.QInAConverter.lookupNullsType(n.getStringByKey("Nulls"));i.addSortDimension(r,l,a)}}let l=n.getStructureByKey("Frame");if(e.notNull(l)){i.setFrame(e.QInAConverter.lookupFrameStartType(l.getStringByKey("Start")),l.getIntegerByKey("StartPreceding"),e.QInAConverter.lookupFrameEndType(l.getStringByKey("End")),l.getIntegerByKey("EndFollowing"))}t.setWindowFunction(i)}};e.QInARepoMemberAbstract.signFlipMember=function(t){let i=t.getContext();let n=e.QFactory.createFormulaOperation(i);n.setOperator(e.MathOperator.MULT);n.setLeftSide(e.QFactory.createFormulaConstantWithIntValue(i,-1));n.setRightSide(t);return n};e.QInARepoMemberAbstract.prototype.exportGenericMemberProperties=function(t,i,n){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QDimensionMemberProperties.QY_VISIBILITY)){let t=i.getResultVisibility();if(e.isNull(t)){t=e.ResultVisibility.VISIBLE}n.putString("Visibility",e.QInAConverter.lookupResultSetVisibilityInA(t))}n.putStringNotNullAndNotEmpty("CurrencyTranslationName",i.getCurrencyTranslationName());n.putStringNotNullAndNotEmpty("UnitTranslationName",i.getUnitTranslationName());n.putStringNotNullAndNotEmpty("RunningAggregation",e.QInAConverter.lookupRunningAggregationOperatorInA(i.getRunningAggregationOperator()));n.putStringNotNullAndNotEmpty("RunningAggregationInitDim",i.getRunningAggregationInitDimension());e.QInARepoMemberAbstract.exportCurrencyMetadataFusion(t,i,n);e.QInARepoMemberAbstract.exportInternalDataType(t,i,n);e.QInARepoMemberAbstract.exportFormattingProperties(t,i,n);let r=i.getMemberType();if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QStructureMemberProperties.QY_SOLVE_ORDER)){if((r===e.MemberType.BASIC_MEASURE||i.isSolveOrderOverDefined())&&(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QStructureMemberProperties.QY_SOLVE_ORDER))){n.putInteger("SolveOrder",i.getSolveOrder())}}e.QInARepoMemberAbstract.exportChartFormatting(t,i,n);if(i.isModelDefinedMember()){n.putBoolean("isModelDefinedMember",true)}n.putStringNotNullAndNotEmpty("PreferredHierarchy",i.getPreferredHierarchy());n.putString("MemberType",e.QInAConverter.lookupMeasureStructureMemberTypeIna(r));if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QStructureMemberProperties.QY_NUMERIC_SHIFT)||i.hasPropertyChanged(e.QStructureMemberProperties.QY_NUMERIC_SHIFT_PERCENT)){if(i.isNumericShiftPercent()&&i.getModelCapabilities().supportsNumericShiftPercent()){n.putString("NumericShift","%")}else{e.QInARepoUtils.setIntegerIfNotNull(n,"NumericShift",i.getNumericShift())}}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QStructureMemberProperties.QY_NUMERIC_SCALE)){e.QInARepoUtils.setIntegerIfNotNull(n,"NumericScale",i.getNumericScale())}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QStructureMemberProperties.QY_NUMERIC_PRECISION)){e.QInARepoUtils.setIntegerIfNotNull(n,"NumericPrecision",i.getNumericPrecision())}e.QInARepoMemberAbstract.exportPostAggregation(t,i,n);if(r!==e.MemberType.EXCEPTION_AGGREGATION&&r!==e.MemberType.CURRENCY_MEASURE){t.exportExceptions(i,n)}if(r!==e.MemberType.VARIANCE&&r!==e.MemberType.CURRENCY_MEASURE){let r=i.getExceptionAggregationType();if(e.notNull(r)){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QStructureMemberProperties.QY_EXCEPTION_AGGERGATION_TYPE)||i.hasPropertyChanged(e.QStructureMemberProperties.QY_EXCEPTION_AGGREGATION_DIMENSIONS)){n.putString("ExceptionAggregation",r.getName());let e=n.putNewList("ExceptionAggregationDimensions");e.addAllStrings(i.getExceptionAggregationDimensions())}}}if(r!==e.MemberType.BASIC_MEASURE&&r!==e.MemberType.EXCEPTION_AGGREGATION){e.QInARepoMemberAbstract.exportWindowFunction(i,n)}if(r===e.MemberType.RESTRICTED_MEASURE||r===e.MemberType.FORMULA||r===e.MemberType.EXCEPTION_AGGREGATION||r===e.MemberType.VARIANCE||r===e.MemberType.RUNNING_TOTAL||r===e.MemberType.PARETO){this.exportProperties(i,n)}let o=i.getOverrideText();if(e.XStringUtils.isNotNullAndNotEmpty(o)){n.putString("OverrideText",o)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasPropertyChanged(e.QStructureMemberProperties.QY_IGNORE_EXTERNAL_DIMENSIONS)){if(i.isIgnoringAllExternalDimensions()){n.putString("IgnoreExternalDimensions","All")}else{let t=e.XList.create();t.addAll(i.getIgnoredExternalDimensions());if(t.hasElements()){let e=n.putNewList("IgnoreExternalDimensions");e.addAllStrings(t)}}}};e.QInARepoMemberAbstract.prototype.exportProperties=function(e,t){if(e.getAliasName()!==null){t.putString("AliasName",e.getAliasName())}if(e.isAutoSignFlip()){t.putBoolean("AutoSignFlip",e.isAutoSignFlip())}if(e.getAccountType()!==null){t.putString("AccountType",e.getAccountType().getName())}};e.QInARepoMemberAbstract.prototype.getComponentType=function(){return e.MemberType.ABSTRACT_MEMBER};e.QInARepoMemberAbstract.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=o.getQueryModel();let a=r;if(e.isNull(a)){a=l.getMeasureDimension()}let p=e.QInARepoMemberAbstract.importMeasure(t,i,o,l,a);if(e.notNull(p)){e.QInARepoMemberAbstract.importGenericRuntimeMemberProperties(t,p,i);if(i.containsKey("PresentationSignReversal")){p.setPresentationSignReversal(i.getBooleanByKey("PresentationSignReversal"))}let n=i.getIntegerByKeyExt("[Measures].[Aggregation]",-1);let r=e.QInAConverter.lookupAggregationType2(n);if(e.notNull(r)){p.setAggregationType(r)}let o=a.isMeasureStructure()?"[Measures].[MemberDetails]":"[CustomDimension2].[MemberDetails]";if((l.isBasicMeasureSettingsExportedInRepo()||!p.isCreatedFromMetadata()||t.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA)&&!e.XCollectionUtils.hasElements(i.getStructureByKey(o))){this.setPrecisionAndScale(t,i,l,p);if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasStringByKey("UnitType")){p.setUnitType(e.QInAConverter.lookupUnitType(i.getStringByKey("UnitType")))}p.setUnitFixed(i.getStringByKey("UnitFixed"));p.setUnitName(i.getStringByKey("UnitName"));p.setUnitTextName(i.getStringByKey("UnitTextName"))}let s=i.getBooleanByKeyExt("IsDelta",false);if(!s){t.importExceptions(i,p)}e.QInARepoMemberAbstract.importExceptionAggregationProperties(t,i,a.getQueryModel(),p);e.QInARepoMemberAbstract.importCurrencyPlanningProperties(p,i);e.QInARepoMemberAbstract.importInternalDataType(i,p);e.QInARepoMemberAbstract.importFormattingProperties(t,i,p);if(a.getDimensionType()===e.DimensionType.ACCOUNT&&i.containsKey("HierarchyDisplayKey")){let t=a.getHierarchyDisplayKeyField();if(e.notNull(t)){p.createAndAddFieldValueWithString(t,i.getStringByKey("HierarchyDisplayKey"))}}e.QInARepoMemberAbstract.importChartFormatting(i,p)}return p};e.QInARepoMemberAbstract.prototype.setPrecisionAndScale=function(e,t,i,n){let r=-1;let o=-1;if(e.isAbap(i)){r=t.getIntegerByKeyExt("Digits",-1);o=t.getIntegerByKeyExt("FractDigits",-1)}else{r=t.getIntegerByKeyExt("[Measures].[Digits]",-1);o=t.getIntegerByKeyExt("[Measures].[FractDigits]",-1)}if(r!==-1){n.setNumericPrecision(r)}if(o!==-1){n.setNumericScale(o)}};e.QInARepoMembersAll=function(){};e.QInARepoMembersAll.prototype=new e.QInARepository;e.QInARepoMembersAll.prototype._ff_c="QInARepoMembersAll";e.QInARepoMembersAll.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;let l=o.getOlapEnv();let a=o.getStructureLayout();if(e.notNull(a)){if(!o.supportsBasicStructureMembers()&&a.isEmpty()){return null}let i=n.putNewList("MembersRepo");let r=a.size();let p=o.getQueryManager().getTagging().containsKey(e.QStateConstants.TAG_REPO_FORMAT_FOR_UNDO_REDO);for(let n=0;n<r;n++){let r=a.get(n);if(e.isNull(r)||r.getTagging().containsKey(e.QTransientConstants.TAG_TRANSIENT_BLENDING_DEPENDENCY)){continue}let s=o.getQueryManager()!==null&&o.getQueryManager().isKeyRefSerializationEnabled();let u=e.notNull(l)&&l.getClientQueryObjectManager().getClientQueryObjectIncludeReleasedByKeyRef(r,o.getQueryManager().getClientQueryObjectStorageName())!==null;if(s&&u){let e=t.exportStructureMember(r);i.add(e);continue}if(r.isReleased()){continue}let g=t.getOriginalMode()===e.QModelFormat.INA_REPOSITORY_DELTA;let y=o.getDimensionType()===e.DimensionType.ACCOUNT;if(r.isModelDefinedMember()&&!g&&!(p&&r.getModCounter()>0)){if(t.getOriginalMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){if(y){continue}if(s){let n=i.addNewStructure();e.QInARepoUtils.addKeyRefStructure(t,r,n,o.getQueryManager());continue}}else if(t.getOriginalMode().isTypeOf(e.QModelFormat.INA_CLONE)&&y){continue}}let m=!y&&!r.isCreatedFromMetadata()&&!r.isModelDefinedMember();let c=y&&!r.isModelDefinedMember()&&!r.isCreatedFromMetadata();let A=m||c;let S=t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||A||r.getModCounter()>0;if(S){let n;if(u){let i=e.QStructureMember.createMeasure(r.getMemberType(),o.getQueryModel(),o);i.copyFrom(r,null);n=t.exportStructureMember(i)}else{n=t.exportStructureMember(r)}i.add(n)}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoMembersAll.prototype.getComponentType=function(){return e.OlapComponentType.MEMBERS};e.QInARepoMembersAll.prototype.getMemberNamesFromMemberList=function(t){let i=e.XHashSetOfString.create();for(let n=0;n<t.size();n++){let r=t.getStructureAt(n);let o=r.getStructureByKey("KeyRef");let l=e.notNull(o)?o.getStringByKey("ObjectName"):r.getStringByKey("Name");if(e.XStringUtils.isNotNullAndNotEmpty(l)){i.add(l)}}return i};e.QInARepoMembersAll.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=i.getBooleanByKeyExt("IsDelta",false);let a=n;if(a.supportsCustomMembers()&&!l){a.removeCustomMembers()}let p=i.getListByKey("MembersRepo");if(e.isNull(p)){return null}let s=a.getStructureLayout();if(e.notNull(s)){if(!l&&t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA){a.removeCustomMembers();let t=this.getMemberNamesFromMemberList(p);for(let i=s.size()-1;i>=0;i--){let n=s.get(i);if(n.isModelDefinedMember()&&(a.getDimensionType()===e.DimensionType.ACCOUNT||!t.contains(n.getName()))){continue}s.removeAt(i)}}let i=e.XList.create();if(l){let t=a.getLoadedStructureMembers().getIterator();while(t.hasNext()){let n=t.next();if(e.notNull(n)&&(n.getMemberType()===e.MemberType.BASIC_MEASURE||n.isCreatedFromMetadata())){i.add(n.getName())}}}let n=p.size();for(let r=0;r<n;r++){let n=p.getStructureAt(r);let u=t.importStructureMember(a,n,o);if(e.notNull(u)){let t=u.getName();let n=a.getLoadedStructureMember(t);if(e.isNull(n)){if(l){a.addModellerMember(u);let e=a.getModellerMemberKeyRef(u.getStorageObjectName());a.addMeasureFromRepoImport(e);i.removeElement(u.getName())}else{a.addMeasureFromRepoImport(u)}}else if(l){a.addModellerMember(u);if(a.getStructureLayout().getByKey(u.getStorageObjectName())===null){a.getStructureLayout().addKeyRef(u)}i.removeElement(u.getName())}else{if(u.getMemberType().isCustomMember()&&!u.isCreatedFromMetadata()){let t=u.getStorageName();if(e.XString.isEqual(t,e.KeyRefConstants.MAIN_STORAGE)){let i=a.getQueryModel().getPrimaryCalculationDimension()===a?e.QClientQueryObjectType.PRIMARY_STRUCTURE_MEMBER.getName():e.QClientQueryObjectType.SECONDARY_STRUCTURE_MEMBER.getName();t=a.getQueryManager().getClientQueryObjectStorageName();let r=e.QFactory.createKeyRef(t,i,u.getStorageObjectName());let o=a.getQueryModel().getOlapEnv().getClientQueryObjectManager().getClientQueryObjectByKeyRef(r);if(e.notNull(o)){a.removeMeasure(n.getName());a.addMeasureFromRepoImport(o);n=o}}}else{if(n!==u&&!n.isModelDefinedMember()){throw e.XException.createIllegalStateException(e.XStringUtils.concatenate3("Internal error: New member with same name not allowed: '",t,"'!"))}}s.removeElement(n);s.add(n)}}}if(l&&i.size()>0){let t=i.getIterator();while(t.hasNext()){let i=t.next();let n=a.getLoadedStructureMember(i);if(e.notNull(n)){n.setModelDefinedMember(true);a.addModellerMember(n)}}}}return a};e.QInARepoModellerCurrencyTranslation=function(){};e.QInARepoModellerCurrencyTranslation.prototype=new e.QInARepository;e.QInARepoModellerCurrencyTranslation.prototype._ff_c="QInARepoModellerCurrencyTranslation";e.QInARepoModellerCurrencyTranslation.checkCrossCalculationMember=function(t,i){let n=i.getVariable(e.XStringUtils.concatenate3(t,".","Currency"));return e.notNull(n)};e.QInARepoModellerCurrencyTranslation.checkInitializeLegacyAccountCurrencyTranslation=function(t,i){if(t>0){let n=i.getQueryModel();let r=e.XList.create();let o=n.getMeasureDimension();let l=0;let a=o.getStructureLayout().getIterator();while(a.hasNext()){let i=a.next();if(e.notNull(i)&&!i.isReleased()){let o=i.getName();if(e.XString.isEqual(o,"SignedDataLocal")){r.add("SignedDataLocal")}else if(e.XString.startsWith(o,"SignedDataOther")&&e.QInARepoModellerCurrencyTranslation.checkCrossCalculationMember(o,n)&&l<t-1){r.add(o);l++}else if(e.XString.isEqual(o,"SignedData")&&e.QInARepoModellerCurrencyTranslation.checkCrossCalculationMember("SignedData",n)){r.add("SignedData")}}}o.setPlaceholderIds(r)}};e.QInARepoModellerCurrencyTranslation.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoModellerCurrencyTranslation.prototype.getComponentType=function(){return e.OlapComponentType.MODELLER_CURRENCY_TRANSLATION};e.QInARepoModellerCurrencyTranslation.prototype.getTagName=function(){return"ModellerCurrencyTranslation"};e.QInARepoModellerCurrencyTranslation.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(e.notNull(l)&&e.notNull(i)){let n=i.getBooleanByKeyExt("PlanningParametersForCurrencyTranslation",false);let r=i.getBooleanByKeyExt("RateTypeFromAccount",false);let a=i.getIntegerByKeyExt("MaxNumberOfCurrencyTranslations",-1);l.setMaxNumberOfTranslations(a);l.setSupportsExtendedRateNameParameters(n);l.initializeLegacyCurrencyTranslation(!n);l.setDeriveRateTypeFromAccount(r);let p=i.getStringByKey("CurrencyTranslationTimeDimension");l.setCurrencyTranslationTimeDimensionName(p);l.setCurrencyRateTableId(i.getStringByKey("CurrencyRateTableId"));let s=i.getStringByKey("CurrencyDimension");if(e.XStringUtils.isNotNullAndNotEmpty(s)){l.setCurrencyDimensionName(s)}let u=i.getStringByKey("DefaultCurrency");if(e.XStringUtils.isNotNullAndNotEmpty(u)){l.setDefaultCurrency(u)}let g;let y;let m;let c=i.getListByKey("RateVersions");if(e.XCollectionUtils.hasElements(c)){l.clearAvailableRateVersions();y=c.size();for(g=0;g<y;g++){m=c.getStructureAt(g);l.addAvailableRateVersion(m.getStringByKey("Name"),m.getStringByKey("Text"))}}let A=i.getListByKey("Currencies");if(e.XCollectionUtils.hasElements(A)){l.clearAvailableCurrencies();y=A.size();for(g=0;g<y;g++){m=A.getStructureAt(g);l.addAvailableCurrency(m.getStringByKey("Name"),m.getStringByKey("Text"))}}let S=i.getListByKey("Categories");if(e.XCollectionUtils.hasElements(S)){l.clearAvailableCategories();y=S.size();for(g=0;g<y;g++){m=S.getStructureAt(g);l.addAvailableCategory(e.QInAConverter.lookupCategory(m.getStringByKey("Name")))}}let d=i.getListByKey("RateTypes");if(e.XCollectionUtils.hasElements(d)){l.clearAvailableRateTypes();y=d.size();for(g=0;g<y;g++){m=d.getStructureAt(g);l.addAvailableRateType(e.QInAConverter.lookupRateType(m.getStringByKey("Name")))}}e.QInARepoModellerCurrencyTranslation.checkInitializeLegacyAccountCurrencyTranslation(a,l);l.postImportInitialization();this.importModellerDefinedCurrencyTranslations(t,i,l,o)}return l};e.QInARepoModellerCurrencyTranslation.prototype.importModellerDefinedCurrencyTranslations=function(t,i,n,r){let o=i.getListByKey("CurrencyTranslations");if(e.XCollectionUtils.hasElements(o)){let i=o.size();for(let l=0;l<i;l++){let i=o.getStructureAt(l);let a=i.getStringByKey("Name");let p=i.getStringByKey("Description");let s=n.getMeasureCurrencyTranslation(a);if(e.isNull(s)){s=n.addNewMeasureCurrencyTranslationBase(a,p)}t.importCurrencyTranslationElement(i,s,r);s.setModelDefinedCurrencyTranslation(true)}}};e.QInARepoModellerDimensions=function(){};e.QInARepoModellerDimensions.prototype=new e.QInARepository;e.QInARepoModellerDimensions.prototype._ff_c="QInARepoModellerDimensions";e.QInARepoModellerDimensions.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoModellerDimensions.prototype.getComponentType=function(){return e.OlapComponentType.MODELLER_DIMENSIONS};e.QInARepoModellerDimensions.prototype.getTagName=function(){return"ModellerDimensions"};e.QInARepoModellerDimensions.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(e.notNull(i)){let n=l.getDatasetEpmObject();if(e.isNull(n)){n=e.QDatasetEpmObject.createByName(l.getName());l.setDatasetEpmObject(n)}let r=i.getListByKey("Dimensions");let o=r.size();let a=l.getDimensionManagerBase();let p=a.getDimensionReferences();for(let i=0;i<o;i++){let o=r.getStructureAt(i);let s=o.getStringByKey("Name");let u=o.containsKey("CType")?e.XComponentType.lookupComponentType(o.getStringByKey("CType")):null;let g=o.getBooleanByKeyExt("MeasureStructure",false)||e.notNull(u)&&(u===e.DimensionType.ACCOUNT||u.isTypeOf(e.DimensionType.ABSTRACT_STRUCTURE));if(u===e.DimensionType.SECONDARY_STRUCTURE&&!l.getModelCapabilities().supportsCustomDimension2MemberMetadata()){continue}if(g){if(p.containsKey(s)){a.getDimensionByNameFromExistingMetadata(s)}let i=t.importDimension(o,l);if(e.notNull(i)&&e.XStringUtils.isNullOrEmpty(s)){s=i.getName()}}this.importDimensionMetadata(s,o,n)}let s=l.getExtendedDimensions();let u=i.getListByKey("ExtendedDimensions");if(e.notNull(s)&&e.notNull(u)&&!u.isEmpty()){for(let t=0;t<s.size();t++){let i=s.get(t);let n=i.getName();for(let t=0;t<u.size();t++){let r=u.getStructureAt(t);if(e.XString.isEqual(n,r.getStringByKey("Name"))){i.setLocationType(e.LocationType.lookup(r.getStringByKey("LocationType")))}}}}}return l};e.QInARepoModellerDimensions.prototype.importDimensionMetadata=function(t,i,n){if(e.XStringUtils.isNullOrEmpty(t)){return}if(i.containsKey("DefaultHierarchy")){n.setDimensionDefaultHierarchyName(t,i.getStringByKey("DefaultHierarchy"))}let r=i.getIntegerByKeyExt("Visibility",-1);if(r!==-1){n.setDimensionVisibility(t,e.QInAConverter.lookupDimensionVisibility(r))}let o=i.getBooleanByKeyExt("FiscalEnabled",false);if(o){n.setDimensionFiscalEnabled(t,o);n.setDimensionFiscalDisplayPeriod(t,i.getStringByKey("FiscalDisplayPeriod"));n.setDimensionFiscalPeriodPrefix(t,i.getStringByKey("FiscalPeriodPrefix"));n.setDimensionFiscalShift(t,i.getIntegerByKeyExt("FiscalShift",0))}if(i.containsKey("additionalPeriods")){n.setDimensionAdditionalPeriods(t,i.getIntegerByKey("additionalPeriods"))}if(i.containsKey("periodPrefix")){n.setDimensionPeriodPrefix(t,i.getStringByKey("periodPrefix"))}if(i.containsKey("useMonthLabel")){n.setDimensionUseMonthLabel(t,i.getBooleanByKey("useMonthLabel"))}if(i.containsKey("TimeConfigEnablePattern")){n.setDimensionTimeConfigEnablePattern(t,i.getBooleanByKey("TimeConfigEnablePattern"))}if(i.containsKey("IsUserManaged")){n.setDimensionIsUserManaged(t,i.getBooleanByKey("IsUserManaged"))}if(i.containsKey("Pattern")){n.setDimensionTimeConfigPattern(t,i.getStringByKey("Pattern"))}if(i.containsKey("FirstWeekDay")){n.setDimensionFirstWeekDay(t,i.getStringByKey("FirstWeekDay"))}if(i.containsKey("FirstYearWeekIndicator")){n.setDimensionFirstYearWeekIndicator(t,i.getStringByKey("FirstYearWeekIndicator"))}if(i.containsKey("unassignedMember")){n.setDimensionUnassignedMember(t,i.getStringByKey("unassignedMember"))}let l=i.getStringByKey("Description");if(e.XStringUtils.isNotNullAndNotEmpty(l)){n.setDimensionDescription(t,l)}let a=i.getStringByKey("DisplayGroupName");if(e.XStringUtils.isNullOrEmpty(a)){a=i.getStringByKey("DisplayGroup")}if(e.XStringUtils.isNotNullAndNotEmpty(a)){n.setDimensionRuntimeDisplayGroupName(t,a);n.setDimensionRuntimeDisplayGroupText(t,i.getStringByKey("DisplayGroupDescription"))}};e.QInARepoModellerMetadataProperties=function(){};e.QInARepoModellerMetadataProperties.prototype=new e.QInARepository;e.QInARepoModellerMetadataProperties.prototype._ff_c="QInARepoModellerMetadataProperties";e.QInARepoModellerMetadataProperties.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoModellerMetadataProperties.prototype.getComponentType=function(){return e.OlapComponentType.MODELLER_METADATA_PROPERTIES};e.QInARepoModellerMetadataProperties.prototype.getTagName=function(){return"ModellerMetadataProperties"};e.QInARepoModellerMetadataProperties.prototype.importComponentWithStructure=function(t,i,n,r,o){if(e.isNull(i)){return n}let l=n;let a=l.getMetadataPropertiesBase();if(e.notNull(a)){a.putBoolean("HasUserDefinedMeasures",i.getBooleanByKeyExt("HasUserDefinedMeasures",false));a.putBoolean("IsPlanning",i.getBooleanByKeyExt("IsPlanning",false));a.putStringNotNull("LeadingStructure",i.getStringByKey("LeadingStructure"));a.putStringNotNull("MappedVersionDimension",i.getStringByKey("MappedVersionDimension"));a.putBoolean("DataExportRestricted",i.getBooleanByKeyExt("DataExportRestricted",false))}let p=i.getStringByKey("ModelId");let s=i.getStringByKey("Mode");let u=i.getStringByKey("EpmQuerySourceName");let g=i.getStringByKey("EpmModelName");let y=i.getStringByKey("SchemaName");let m=i.getStringByKey("PackageName");let c=i.getStringByKey("Name");let A=i.getStringByKey("ShortDescription");let S=i.getStringByKey("DisplayName");let d=i.getStringByKey("Description");let I=i.getBooleanByKeyExt("IsEmbedded",false);let f=i.getBooleanByKeyExt("IsRemote",false);let N=e.QDatasetEpmObject.create(p,s,g,u,y,m,c,A,S,d,I,f);l.setDatasetEpmObject(N);return l};e.QInARepoModellerVariableManager=function(){};e.QInARepoModellerVariableManager.prototype=new e.QInARepository;e.QInARepoModellerVariableManager.prototype._ff_c="QInARepoModellerVariableManager";e.QInARepoModellerVariableManager.prototype.createCustomVariable=function(t,i){let n=e.QFactory.createCustomVariableConfig(t.getQueryManager());let r=i.getListByKey("Options");let o=e.XList.create();if(!e.PrUtils.isListEmpty(r)){let t=r.size();for(let i=0;i<t;i++){let t=r.getStructureAt(i);let n=t.getStringByKey("Name");let l=t.getStringByKey("Text");o.add(e.XPairOfString.create(n,l))}}return n.createOptionsListVariable(i.getStringByKey("Name"),i.getStringByKey("Text"),o)};e.QInARepoModellerVariableManager.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoModellerVariableManager.prototype.getComponentType=function(){return e.OlapComponentType.MODELLER_VARIABLES};e.QInARepoModellerVariableManager.prototype.getTagName=function(){return"ModellerVariables"};e.QInARepoModellerVariableManager.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(e.notNull(i)){let n=i.getListByKey("Variables");if(e.notNull(n)){let i=n.size();for(let r=0;r<i;r++){let i=n.getStructureAt(r);let a=i.getStringByKey("Name");let p=l.getVariableBaseByName(a);if(e.isNull(p)&&i.getBooleanByKeyExt("CustomVariable",false)){p=this.createCustomVariable(o,i);let t=i.getStringByKey("InputType");let n=e.XString.isEqual(t,"Mandatory")||e.XString.isEqual(t,"MandatoryNotInitial");p.setMandatory(n);let r=e.XString.isEqual(t,"Mandatory")||e.XString.isEqual(t,"Optional");p.setInitialValueAllowed(r)}if(e.notNull(p)){p.setProcessingType(e.QInAConverter.lookupProcessingType(i.getStringByKey("ProcessingType")));let n=p.getVariableType();if(n.isTypeOf(e.VariableType.SIMPLE_TYPE_VARIABLE)){t.importSimpleTypeVariable(i,p,o)}else if(n.isTypeOf(e.VariableType.DIMENSION_MEMBER_VARIABLE)){t.importDimensionMemberVariable(i,p,o)}else if(n.isTypeOf(e.VariableType.OPTION_LIST_VARIABLE)){t.importOptionListVariable(i,p,o)}else{t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate5("The variable '",a,"' of variable type '",n.getName(),"' was not imported correctly"))}}else{t.addWarning(e.ErrorCodes.ET_ELEMENT_NOT_FOUND,e.XStringUtils.concatenate3("The variable '",a,"' was not found"))}}}}return l};e.QInARepoQuery=function(){};e.QInARepoQuery.prototype=new e.QInARepository;e.QInARepoQuery.prototype._ff_c="QInARepoQuery";e.QInARepoQuery.prototype.callPreQueryImportedListener=function(t,i,n){i.removeElement(n);if(i.isEmpty()&&e.notNull(t)){t()}};e.QInARepoQuery.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i.getQueryModel();let l=t.m_mode===e.QModelFormat.INA_REPOSITORY_DATA_RENDERING;t.exportUniversalDisplayHierarchies(o.getUniversalDisplayHierarchies(),n);let a=o.getDrillManager();t.exportDrillManager(a,n);if(!a.isValidatingContextFreeNavigations()){n.putBoolean("ValidateContextFreeNavigations",false)}let p=o.getCellContextManager();t.exportCellContextManager(p,n);let s=e.XMath.binaryAnd(r,e.QImExFlag.DATASOURCE)>0;if(s){e.QInARepoDataSource.exportDataSource(t,o.getDataSource(),o.getModelCapabilities().supportsRunAsUser(),n)}t.exportDimensions(o,n);t.exportSortingManager(o.getSortingManager(),n);t.exportCurrencyTranslationManager(o.getCurrencyTranslationManager(),n);t.exportUnitTranslationManager(o.getUnitTranslationManager(),n);t.exportDataCells(o,n);t.exportQuerySettings(o,n);if(!l){t.exportFilter(o.getFilter(),n);t.exportExceptions(o,n);t.exportQueryCells(o.getQueryCellManager(),n)}t.exportConditionManager(o.getConditionManager(),n);t.exportSimulationManager(o.getSimulationManager(),n);let u=e.XMath.binaryAnd(r,e.QImExFlag.VARIABLES)>0;if(u&&t.m_mode!==e.QModelFormat.INA_REPOSITORY_NO_VARS&&t.m_mode!==e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){if(o.isExportingVariables()||o.hasProcessingStep()){t.exportVariables(o.getVariableContainer(),n)}}let g=o.getQueryManager();if(o.isBatchModeForMicroCube()){n.putString("Name",g.getNameForMicroCubeUse())}t.exportFormulaExceptionManager(o.getFormulaExceptionManager(),n);this.exportPaging(n,o);e.QInARepoOptions.exportSuppressKeyfigureCalculation(n,g);e.QInARepoOptions.exportLOVAbstractionLayerSettings(n,g);e.QInARepoOptions.exportUniqueAxisProperties(n,g);e.QInARepoInputEnablementRules.exportInputEnablementRules(n,g);e.QInARepoInputReadinessFilter.exportInputReadinessFilter(n,g);let y=o.getPreQueries();if(e.notNull(y)){let i=y.size();if(i>0){let r=n.getListByKey("PreQueries");if(e.isNull(r)){r=n.putNewList("PreQueries")}let o=t.getMode();if(t.getOriginalMode()!==e.QModelFormat.INA_CLONE_RENDERING){t.m_mode=t.getOriginalMode()}for(let e=0;e<i;e++){let i=y.get(e);let n=t.exportPreQuery(i.getObject());let o=i.getName();n.putString("ObjectName",o);r.add(n)}t.m_mode=o;n.put("PreQueries",r)}}let m=o.getResultStructureController();t.exportComponent(null,m,n,r);let c=e.InactiveCapabilityUtil.exportFeatureToggles(g.getSession().getFeatureToggles());n.putString("ExperimentalFeatures",c);n.putString("ResultSetPersistanceTable",g.getResultSetPersistenceTable());n.putString("ResultSetPersistanceSchema",g.getResultSetPersistenceSchema());n.putString("ResultSetPersistanceIdentifier",g.getResultSetPersistenceIdentifier());t.exportVisualizationManager(o.getVisualizationManager(),n);if(o.hasQuickActionManager()){t.exportQuickActionManager(o.getQuickActionManager(),n)}n.putBoolean("IsVersionDimensionValidationEnabled",o.isVersionDimensionValidationEnabled());let A=o.isAutoAddBWServerSortsEnabled();if(e.notNull(A)){n.putBoolean("IsAutoAddBWServerSortsEnabled",A.getBoolean())}this.exportPlanningSettings(n,o);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoQuery.prototype.exportPaging=function(t,i){let n=i.getQueryManager();if(!i.getSession().hasFeature(e.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)||n.recordingStateOfQueryManager()){return}e.QInARepoOptions.exportPaging(t,n)};e.QInARepoQuery.prototype.exportPlanningSettings=function(t,i){if(i.hasPropertyChanged(e.QueryModelProperties.QY_PLANNING_MODE)){e.QInAExportUtil.setNameIfNotNull(t,"PlanningMode",i.getPlanningMode())}};e.QInARepoQuery.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_MODEL};e.QInARepoQuery.prototype.getInactiveCapabilities=function(t){let i=e.XHashMapByString.create();let n=e.FeatureToggle.getAllFeatureToggles();let r=n.getKeysAsIterator();while(r.hasNext()){i.put(r.next(),e.XBooleanValue.create(false))}let o=t.getSession().getFeatureToggles();if(e.notNull(o)){let t=o.getKeysAsIterator();while(t.hasNext()){i.put(t.next(),e.XBooleanValue.create(true))}}return i};e.QInARepoQuery.prototype.getMainQuerySystemName=function(t){let i=t.getStructureByKey("DataSource");return e.notNull(i)?i.getStringByKey("System"):null};e.QInARepoQuery.prototype.importBlendingSources=function(t,i,n){let r=n.getBlendingSources();if(!e.XCollectionUtils.hasElements(r)){return}let o=e.PrUtils.getStructureProperty(i,"DataSource");let l=e.PrUtils.getListProperty(o,"Sources");if(e.PrUtils.isListEmpty(l)){return}for(let i=0;i<r.size();i++){let n=e.PrUtils.getStructureElement(l,i);let o=e.PrUtils.getStructureProperty(n,"DefiningContext");if(e.notNull(o)){let e=r.get(i).getQueryModel();e.stopEventing();e.deserializeFromElementExt(t.m_mode,o);e.resumeEventing()}}};e.QInARepoQuery.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n.getQueryModel();let a=i;let p=a.getListByKey("Queries");if(e.notNull(p)){a=p.getStructureAt(p.size()-1)}let s=a.getListByKey(e.ConnectionConstants.INA_BATCH);if(e.notNull(s)){a=s.getStructureAt(s.size()-1)}if(e.notNull(a)&&a.containsKey("Analytics")){a=a.getStructureByKey("Analytics");if(e.notNull(a)&&a.containsKey("Definition")){a=a.getStructureByKey("Definition")}}if(e.notNull(a)&&a.containsKey("Definition")){a=a.getStructureByKey("Definition")}if(e.notNull(a)){let n=t.getOriginalMode()===e.QModelFormat.INA_CLONE_RENDERING;if(a.containsKey("ModellerDefinition")){a=a.getStructureByKey("ModellerDefinition");let i=l.isEventingStopped();if(!i){l.stopEventing()}l.setDeltaPhase(e.QDeltaOperationPhase.NOTE_MODELER_CHANGES);t.importModellerMetadataProperties(a,l,l);t.importModellerDimensions(a,l,l);t.importModellerDefinedVariables(a,l.getVariableManagerBase(),l);t.importModellerCurrencyTranslation(a,l.getCurrencyTranslationManagerBase(),l);t.importFormulaExceptionManager(a,l.getFormulaExceptionManagerBase(),l);l.finishModelerEventing();if(!i){l.resumeEventing()}return l}t.importDimensions(a,l,l);if(!n||t.m_mode!==e.QModelFormat.INA_REPOSITORY_NO_VARS&&t.m_mode!==e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){t.importFunctionalVariables(a,l.getVariableManagerBase(),l)}if(!n){t.importFilter(a,l.getFilterBase(),l);t.importExceptions(a,l);t.importQueryCells(a,l.getQueryCellManager(),l);t.importUniversalDisplayHierarchies(a,l.getUniversalDisplayHierarchiesBase(),l)}t.importCurrencyTranslationManager(a,l.getCurrencyTranslationManager(),l);t.importUnitTranslationManager(a,l.getUnitTranslationManager(),l);t.importTranslationManager(a,l,o);t.importSortingManager(a,l.getSortingManagerBase(),l);t.importDrillManager(a,l.getDrillManager(),l);t.importCellContextManager(a,l.getCellContextManager(),l);if(a.containsKey("QuickActionManager")){t.importQuickActionManager(a,l.getQuickActionManager(),l)}t.importVisualizationManager(a,l.getVisualizationManager(),l);if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_NO_VARS&&t.m_mode!==e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){t.importVariableManager(a,l.getVariableManagerBase(),l)}t.importQuerySettings(a,l);t.importDataCells(a,l);t.importConditionManager(a,l.getConditionManagerBase(),l);t.importSimulationManager(a,l.getSimulationManagerBase(),l);t.importFormulaExceptionManager(a,l.getFormulaExceptionManagerBase(),l);this.importPaging(t,a,l);let r=l.getResultStructureController();t.importComponent(null,a,r,l,l);let p=l.getQueryManager();if(e.notNull(p)){e.QInARepoOptions.importSuppressKeyfigureCalculation(a,p);e.QInARepoOptions.importLOVAbstractionLayerSettings(a,p);e.QInARepoOptions.importUniqueAxisProperties(a,p);e.QInARepoInputEnablementRules.importInputEnablementRules(a,p);e.QInARepoInputReadinessFilter.importInputReadinessFilter(a,p);p.setResultSetPersistanceTargetTable(a.getStringByKey("ResultSetPersistanceTable"));p.setResultSetPersistanceTargetSchema(a.getStringByKey("ResultSetPersistanceSchema"));p.setResultSetPersistenceIdentifier(a.getStringByKey("ResultSetPersistanceIdentifier"))}this.importPreQueries(e.SyncType.BLOCKING,null,t,l,a.getListByKey("PreQueries"),this.getMainQuerySystemName(a));if(t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)&&l.isBlendingModel()){this.importBlendingSources(t,i,l)}l.setVersionDimensionValidationEnabled(a.getBooleanByKeyExt("IsVersionDimensionValidationEnabled",false));if(a.containsKey("IsAutoAddBWServerSortsEnabled")){l.setAutoAddBWServerSortsEnabled(a.getBooleanByKeyExt("IsAutoAddBWServerSortsEnabled",false))}this.importPlanningSettings(a,l)}return l};e.QInARepoQuery.prototype.importPaging=function(t,i,n){let r=i.getStructureByKey("SubSetDescription");let o=n.getQueryManager();let l=t.m_mode===e.QModelFormat.INA_REPOSITORY_DATA_RENDERING;if(e.isNull(r)||!n.getSession().hasFeature(e.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)||o.applyingStateOnQueryManager()&&!l){return}e.QInARepoOptions.importPaging(i,o)};e.QInARepoQuery.prototype.importPlanningSettings=function(t,i){if(t.containsKey("PlanningMode")){i.setPlanningMode(e.PlanningMode.lookup(t.getStringByKey("PlanningMode")))}};e.QInARepoQuery.prototype.importPreQueries=function(t,i,n,r,o,l){let a=e.XStream.of(o).map(e=>e.asStructure()).filter(e=>r.getPreQueryByName(e.getStringByKey("ObjectName"))===null).collect(e.XStreamCollector.toList());let p=a.createListCopy();if(p.isEmpty()){this.callPreQueryImportedListener(i,p,null);return}let s=this.getInactiveCapabilities(r);let u=n.getMode();if(n.getOriginalMode()!==e.QModelFormat.INA_CLONE_RENDERING){n.m_mode=n.getOriginalMode()}e.XCollectionUtils.forEach(a,o=>{let a=o.containsKey("Runtime")?o.getStructureByKey("Runtime"):o;let u=a.getStructureByKey("DataSource");let g=e.XStringBuffer.create();g.append(u.getStringByKey("Type")).append(":[");g.append(u.getStringByKey("SchemaName"));g.append("][");g.append(u.getStringByKey("PackageName"));g.append("][");g.append(u.getStringByKey("ObjectName")).append("]");let y=u.getStringByKey("System");if(n.m_mode===e.QModelFormat.INA_REPOSITORY&&e.XString.isEqual(y,l)){y=r.getDataSource().getSystemName()}let m=e.XCommandFactory.create(r.getApplication());let c=m.createCommand(e.CmdCreateQueryManager.CMD_NAME);c.addParameter(e.CmdCreateQueryManager.PARAM_I_APPLICATION,r.getApplication());c.addParameter(e.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,s);c.addParameterString(e.CmdCreateQueryManager.PARAM_I_SYSTEM,y);c.addParameterString(e.CmdCreateQueryManager.PARAM_I_DATA_SOURCE,g.toString());c.processCommand(t,e.XCommandProcessedLambdaListener.create(l=>{n.addAllMessages(l);if(l.isValid()){let a=l.getData().getResultParameter(e.CmdCreateQueryManager.PARAM_E_QUERY_MANAGER).getQueryModel();n.processImportComponent(t,t=>{e.QInARepoDataSource.importDs2(n,u,null,a.getDataSourceBase());r.addPreQueryWithName(a,o.getStringByKey("ObjectName"));this.callPreQueryImportedListener(i,p,o)},e.OlapComponentType.QUERY_MODEL,o,a,null,a)}else{this.callPreQueryImportedListener(i,p,o)}e.XObjectExt.release(c)}),null)});n.m_mode=u};e.QInARepoQuery.prototype.processImportComponent=function(t,i,n,r,o,l,a,p){let s=l.getQueryModel();let u=o.asStructure().getListByKey("PreQueries");let g=()=>{e.QInARepository.prototype.processImportComponent.call(this,t,i,n,r,o,l,a,p)};this.importPreQueries(t,g,n,s,u,this.getMainQuerySystemName(o.asStructure()));return l};e.QInARepoQueryCells=function(){};e.QInARepoQueryCells.prototype=new e.QInARepository;e.QInARepoQueryCells.prototype._ff_c="QInARepoQueryCells";e.QInARepoQueryCells.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;if(e.notNull(o)&&o.size()>0){let e=n.putNewList("Elements");let t=o.getIterator();while(t.hasNext()){let i=t.next();let n=e.addNewStructure();n.putString("Name",i.getName());let r=i.getCellCalculationMember();n.putString("DimensionName",r.getDimension().getName());n.putString("MemberName",r.getName());let o=n.putNewList("Position");let l=i.getPositions();let a=l.getIterator();while(a.hasNext()){let e=a.next();let t=o.addNewStructure();t.putString("DimensionName",e.getDimensionName());t.putString("MemberName",e.getMemberName())}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoQueryCells.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_CELLS};e.QInARepoQueryCells.prototype.getMember=function(e,t){let i=e.getDimensionByName(t.getStringByKey("DimensionName"));return i.getStructureMember(t.getStringByKey("MemberName"))};e.QInARepoQueryCells.prototype.getTagName=function(){return"Cells"};e.QInARepoQueryCells.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(e.notNull(l)){l.clear();if(e.notNull(i)){let t=i.getListByKey("Elements");if(e.notNull(t)){let e=l.getDimensionAccessor();let i=t.size();for(let n=0;n<i;n++){let i=t.getStructureAt(n);let r=l.addNewQueryCell(i.getStringByKey("Name"));r.setCellCalculationMember(this.getMember(e,i));let o=i.getListByKey("Position");let a=o.size();for(let t=0;t<a;t++){let i=o.getStructureAt(t);r.addPosition(this.getMember(e,i))}}}}}return l};e.QInARepoQueryManager=function(){};e.QInARepoQueryManager.prototype=new e.QInARepository;e.QInARepoQueryManager.prototype._ff_c="QInARepoQueryManager";e.QInARepoQueryManager.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;let l=o.getQueryModel();if(e.notNull(l)){let e=t.exportQueryModel(l,true,true);n.put("QueryModel",e)}let a=o.getQueryServiceConfig();let p=t.exportComponent(e.OlapComponentType.QUERY_SERVICE_CONFIG,a,null,r);n.put("QueryServiceConfig",p);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,o,n,r)};e.QInARepoQueryManager.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_MANAGER};e.QInARepoQueryManager.prototype.importComponentWithStructure=function(e,t,i,n,r){let o=i;return o};e.QInARepoQuerySettings=function(){};e.QInARepoQuerySettings.prototype=new e.QInARepository;e.QInARepoQuerySettings.prototype._ff_c="QInARepoQuerySettings";e.QInARepoQuerySettings.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;let l=o.getDefinitionName();if(e.XStringUtils.isNotNullAndNotEmpty(l)){n.putString("Name",l)}let a=n.getStructureByKey("Query");if(e.isNull(a)){a=n.putNewStructure("Query")}t.exportAxesSettings(o,a);let p=a.putNewList("AxesLayout");let s=e.AxisType.getAll();for(let t=0;t<s.size();t++){let i=s.get(t);let n=o.getAxis(i);if(e.isNull(n)){continue}let r=n.getOrderedDimensionNames();if(e.isNull(r)){continue}let l=p.addNewStructure();l.putString("Axis",n.getName());let a=l.putNewList("OrderedDimensionNames");a.addAllStrings(r)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoQuerySettings.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_SETTINGS};e.QInARepoQuerySettings.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=o.getQueryModel();let a=e.PrUtils.getStringProperty(i,"Name");if(e.notNull(a)){l.setDefinitionName(a.getString())}let p=i.getStructureByKey("Query");t.importAxesSettings(p,l);let s=e.PrUtils.getListProperty(p,"AxesLayout");let u=e.PrUtils.getListSize(s,0);for(let t=0;t<u;t++){let i=e.PrUtils.getStructureElement(s,t);let n=e.AxisType.lookup(e.PrUtils.getStringValueProperty(i,"Axis",null));let r=l.getAxis(n);if(e.isNull(r)){continue}let o=e.PrUtils.getListProperty(i,"OrderedDimensionNames");if(e.isNull(o)){continue}let a=e.XList.create();for(let t=0;t<e.PrUtils.getListSize(o,0);t++){let i=e.PrUtils.getStringElement(o,t);if(e.isNull(i)){continue}a.add(i.getString())}r.reOrderDimensions(a)}return l};e.QInARepoQuickActionManager=function(){};e.QInARepoQuickActionManager.prototype=new e.QInARepository;e.QInARepoQuickActionManager.prototype._ff_c="QInARepoQuickActionManager";e.QInARepoQuickActionManager.exportDataProviderCommands=function(t,i){if(e.XCollectionUtils.hasElements(t)){let n=i.putNewList("Commands");e.XCollectionUtils.forEach(t,t=>{let i=n.addNewStructure();i.putString("Name",t.getName());i.putString("Command",t.getCommandName());e.QInARepoQuickActionManager.exportQuickActionParameters(t,i)})}};e.QInARepoQuickActionManager.exportFieldValueParameter=function(t,i){i.putBoolean("MultipleValues",t.isAllowMultiValues());i.putStringNotNullAndNotEmpty("Dimension",t.getDimensionName());i.putStringNotNullAndNotEmpty("Attribute",t.getAttributeName());i.putStringNotNullAndNotEmpty("Field",t.getFieldName());i.putStringNotNullAndNotEmpty("SemanticObject",t.getSemanticObject());i.putStringNotNullAndNotEmpty("SemanticType",t.getSemanticType());i.putStringNotNullAndNotEmpty("PresentationType",e.QInAConverter.lookupPresentationTypeInA(t.getPresentationType()));e.QInARepoQuickActionManager.setTriStateBool(i,"Totals",t.getMatchesTotals());e.QInARepoQuickActionManager.setTriStateBool(i,"Expanded",t.getMatchesExpanded());e.QInARepoQuickActionManager.setTriStateBool(i,"Leaves",t.getMatchesLeaves())};e.QInARepoQuickActionManager.exportQuickAction=function(t,i){i.putStringNotNullAndNotEmpty("Name",t.getName());i.putStringNotNullAndNotEmpty("Text",t.getText());let n=t.getOlapComponentType();if(n===e.OlapComponentType.QUICK_ACTION_URL){i.putString("Type","QuickActionUrl");e.QInARepoQuickActionManager.exportQuickActionParameters(t,i)}else if(n===e.OlapComponentType.QUICK_ACTION_DATAPROVIDER){i.putString("Type","QuickActionDataprovider");e.QInARepoQuickActionManager.exportDataProviderCommands(t,i)}};e.QInARepoQuickActionManager.exportQuickActionParameter=function(t,i){let n=t.getOlapComponentType();if(n===e.OlapComponentType.QUICK_ACTION_PARAMETER_CONSTANT){i.putString("Type","Constant");i.put("Value",e.PrFactory.createFromValue(t.getValue()))}else if(n===e.OlapComponentType.QUICK_ACTION_PARAMETER_URL_LITERAL){i.putString("Type","UrlLiteral");i.putStringNotNullAndNotEmpty("Value",e.DfNameObject.getSafeName(t.getValue()))}else if(n===e.OlapComponentType.QUICK_ACTION_PARAMETER_CONSTANT_LIST){i.putString("Type","ConstantList");let n=t.getValues();if(e.XCollectionUtils.hasElements(n)){i.putNewList("Values").addAll(e.XStream.of(n).map(t=>e.PrFactory.createFromValue(t)).collect(e.XStreamCollector.toList()))}}else if(n===e.OlapComponentType.QUICK_ACTION_PARAMETER_FIELD_VALUE){i.putString("Type","FieldValue");e.QInARepoQuickActionManager.exportFieldValueParameter(t,i)}else if(n===e.OlapComponentType.QUICK_ACTION_PARAMETER_OLAP){i.putString("Type","Olap");i.putString("ComponentType",e.QInAConverter.lookupComponentTypeInA(t.getComponentTypeToResolve()))}};e.QInARepoQuickActionManager.exportQuickActionParameters=function(t,i){let n=t.getParameters();if(!n.isEmpty()){let t=i.putNewList("Parameters");e.XCollectionUtils.forEach(n,i=>{e.QInARepoQuickActionManager.exportQuickActionParameter(i,t.addNewStructure())})}};e.QInARepoQuickActionManager.getTriStateBool=function(t,i){let n=e.TriStateBool._DEFAULT;if(t.containsKey(i)){n=t.getBooleanByKey(i)?e.TriStateBool._TRUE:e.TriStateBool._FALSE}return n};e.QInARepoQuickActionManager.importContextParameter=function(t,i){if(e.notNull(t)&&e.notNull(i)){let n=i.getStringByKey("Type");if(e.XString.isEqual(n,"FieldValue")){e.QInARepoQuickActionManager.importFieldValueParameter(t.addNewFieldValueParameter(),i)}else if(e.XString.isEqual(n,"Olap")){t.addNewOlapParameter(e.QInAConverter.lookupComponentType(i.getStringByKey("ComponentType")))}else if(e.XString.isEqual(n,"Constant")){let n=i.getByKey("Value");if(e.notNull(n)){t.addConstant(n.copyAsPrimitiveXValue())}}else if(e.XString.isEqual(n,"UrlLiteral")){let n=i.getStringByKey("Value");if(e.XStringUtils.isNotNullAndNotEmpty(n)){t.addNewLiteralParameter(e.UrlComponentLiteral.lookup(n))}}else if(e.XString.isEqual(n,"ConstantList")){let n=i.getListByKey("Values");let r=t.addConstantList();if(e.XCollectionUtils.hasElements(n)){e.XCollectionUtils.forEach(n,t=>{r.addValue(e.isNull(t)?null:t.copyAsPrimitiveXValue())})}}}};e.QInARepoQuickActionManager.importDataProviderCommands=function(t,i){let n=t.getListByKey("Commands");if(e.notNull(n)){e.XCollectionUtils.forEach(n,t=>{let n=t.asStructure();let r=n.getStringByKey("Name");let o=n.getStringByKey("Command");e.QInARepoQuickActionManager.importParameters(n,i.addNewDataProviderCommand(r,o))})}};e.QInARepoQuickActionManager.importFieldValueParameter=function(t,i){t.setAllowMultiValues(i.getBooleanByKey("MultipleValues"));t.setDimensionName(i.getStringByKey("Dimension"));t.setAttributeName(i.getStringByKey("Attribute"));t.setFieldName(i.getStringByKey("Field"));t.setSemanticObject(i.getStringByKey("SemanticObject"));t.setSemanticType(i.getStringByKey("SemanticType"));t.setPresentationType(e.QInAConverter.lookupPresentationType(i.getStringByKey("PresentationType")));t.setMatchesExpanded(e.QInARepoQuickActionManager.getTriStateBool(i,"Expanded"));t.setMatchesTotals(e.QInARepoQuickActionManager.getTriStateBool(i,"Totals"));t.setMatchesLeaves(e.QInARepoQuickActionManager.getTriStateBool(i,"Leaves"))};e.QInARepoQuickActionManager.importParameters=function(t,i){let n=t.getListByKey("Parameters");if(e.notNull(n)){e.XCollectionUtils.forEach(n,t=>{e.QInARepoQuickActionManager.importContextParameter(i,t.asStructure())})}};e.QInARepoQuickActionManager.importQuickAction=function(t,i){if(e.notNull(i)){let n=i.getStringByKey("Type");let r=i.getStringByKey("Name");let o=i.getStringByKey("Text");if(e.XString.isEqual(n,"QuickActionUrl")){e.QInARepoQuickActionManager.importParameters(i,t.addNewUrlQuickAction(r,o))}else if(e.XString.isEqual(n,"QuickActionDataprovider")){e.QInARepoQuickActionManager.importDataProviderCommands(i,t.addNewDataProviderQuickAction(r,o))}}};e.QInARepoQuickActionManager.setTriStateBool=function(t,i,n){if(n===e.TriStateBool._TRUE){t.putBoolean(i,true)}else if(n===e.TriStateBool._FALSE){t.putBoolean(i,false)}};e.QInARepoQuickActionManager.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i.getOlapComponentType();let l=o===e.OlapComponentType.QUICK_ACTION_MANAGER?i:null;if(e.XCollectionUtils.hasElements(l)){let t=n.putNewList("Actions");e.XCollectionUtils.forEach(l,i=>{e.QInARepoQuickActionManager.exportQuickAction(i,t.addNewStructure())})}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoQuickActionManager.prototype.getComponentType=function(){return e.OlapComponentType.QUICK_ACTION_MANAGER};e.QInARepoQuickActionManager.prototype.getTagName=function(){return"QuickActionManager"};e.QInARepoQuickActionManager.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n.getOlapComponentType();let a=l===e.OlapComponentType.QUICK_ACTION_MANAGER?n:null;let p=e.isNull(i)?null:i.getListByKey("Actions");if(e.notNull(a)&&e.notNull(p)){a.clear();e.XCollectionUtils.forEach(p,t=>{e.QInARepoQuickActionManager.importQuickAction(a,t.asStructure())})}return n};e.QInARepoServiceConfig=function(){};e.QInARepoServiceConfig.prototype=new e.QInARepository;e.QInARepoServiceConfig.prototype._ff_c="QInARepoServiceConfig";e.QInARepoServiceConfig.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putStringNotNullAndNotEmpty("System",o.getSystemName());let l=t.exportDataSource(o.getDataSource(),false);n.putNotNullAndNotEmpty("DataSource",l);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,o,n,r)};e.QInARepoServiceConfig.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_SERVICE_CONFIG};e.QInARepoServiceConfig.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;let a=i.getStringByKey("System");if(e.XStringUtils.isNotNullAndNotEmpty(a)){l.setSystemName(a)}let p=i.getStructureByKey("DataSource");if(e.notNull(p)){let e=t.importDataSource(p);l.setDataSource(e)}return l};e.QInARepoServiceConfig.prototype.newModelComponent=function(t,i,n,r){let o=e.QueryServiceConfig.create(t);return o};e.QInARepoSimulationManager=function(){};e.QInARepoSimulationManager.prototype=new e.QInARepository;e.QInARepoSimulationManager.prototype._ff_c="QInARepoSimulationManager";e.QInARepoSimulationManager.prototype.exportComponentWithStructure=function(t,i,n,r){let o=null;let l=i;if(t.getOriginalMode().isTypeOf(e.QModelFormat.INA_CLONE)){if(e.notNull(l)&&l.getSimulationStructure()!==null){o=e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,l.getSimulationStructure(),r)}}return o};e.QInARepoSimulationManager.prototype.extendCustom=function(e,t,i){return i};e.QInARepoSimulationManager.prototype.getComponentType=function(){return e.OlapComponentType.OLAP_SIMULATION_MANAGER};e.QInARepoSimulationManager.prototype.getTagName=function(){return"SimulationRepo"};e.QInARepoSimulationManager.prototype.importComponentWithStructure=function(t,i,n,r,o){if(t.getOriginalMode().isTypeOf(e.QModelFormat.INA_CLONE)&&e.notNull(i)&&i.hasElements()){let t=n;t.setSimulationStructure(e.PrUtils.createElementDeepCopy(i))}return n};e.QInARepoSort=function(){};e.QInARepoSort.prototype=new e.QInARepository;e.QInARepoSort.prototype._ff_c="QInARepoSort";e.QInARepoSort.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;let l=n.putNewList("Elements");let a=o.getQueryModel().skipSerializationOfUnusedDimensionAndSort()&&(t.m_mode===e.QModelFormat.INA_REPOSITORY_DATA||t.m_mode===e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS);let p=o.getSortingOperations();for(let i=0;i<p.size();i++){let n=p.get(i);let o=n.supportsDimension()&&n.getDimension()!==null&&n.getDimension().isUniversalDisplayHierarchyDimension();let s=a&&n.supportsDimension()&&n.getDimension()!==null&&n.getTagging().containsKey(e.QTransientConstants.TAG_SERVER_SORT)&&n.getDimension().getAxisType()!==e.AxisType.ROWS&&n.getDimension().getAxisType()!==e.AxisType.COLUMNS;if(!o&&!s){l.add(t.exportComponent(null,n,null,r))}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoSort.prototype.getComponentType=function(){return e.OlapComponentType.SORT_MANAGER};e.QInARepoSort.prototype.getTagName=function(){return"SortRepo"};e.QInARepoSort.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;let a=i.getListByKey("Elements");let p=l.getSortingOperations();p.clear();if(e.notNull(a)){for(let i=0;i<a.size();i++){let n=a.getStructureAt(i);let r=t.importComponent(e.OlapComponentType.GENERIC_SORTING,n,null,l,o);if(e.notNull(r)){p.add(r)}}}return l};e.QInARepoSortOperation=function(){};e.QInARepoSortOperation.prototype=new e.QInARepository;e.QInARepoSortOperation.prototype._ff_c="QInARepoSortOperation";e.QInARepoSortOperation.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;let l=o.getSortingType();this.exportGenericSorting(t,n,o,l);if(l===e.SortType.FIELD){this.exportFieldSorting(n,o)}else if(l===e.SortType.MEASURE){this.exportMeasureSorting(n,o)}else if(l===e.SortType.DATA_CELL_VALUE||l===e.SortType.COMPLEX){this.exportPathSorting(t,n,o)}else if(l===e.SortType.MEMBER_KEY){let e=o;this.exportCustomSortDetails(e.getCustomSort(),e.getCustomSortPosition(),n)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoSortOperation.prototype.exportCustomSortDetails=function(t,i,n){if(e.XCollectionUtils.hasElements(t)){let e=n.putNewList("CustomSort");let i=t.size();for(let n=0;n<i;n++){e.addString(t.get(n))}}e.QInARepoUtils.setNameIfNotNull(n,"CustomSortPosition",i)};e.QInARepoSortOperation.prototype.exportFieldSorting=function(e,t){let i=t;e.putString("FieldName",i.getField().getName());this.exportCustomSortDetails(i.getCustomSort(),i.getCustomSortPosition(),e)};e.QInARepoSortOperation.prototype.exportGenericSorting=function(t,i,n,r){let o=e.QInAConverter.lookupSortTypeInA(r);i.putString("SortType",o);let l=n.getDirection();if(l!==e.XSortDirection.DEFAULT_VALUE){i.putString("Direction",e.QInAConverter.lookupSortDirectionInA2(l))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.hasPropertyChanged(e.QSortProperties.QY_PRESERVE_GROUPING)){if(n.supportsPreserveGrouping()&&n.supportsBreakGrouping()){i.putBoolean("PreserveGrouping",n.isPreserveGroupingEnabled())}}if(n.getModelCapabilities().supportsLocaleSorting()){let r=e.PrFactory.createStructure();if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.hasPropertyChanged(e.QSortProperties.QY_CASE_SENSITIVE)){r.putBoolean("CaseSensitive",n.isCaseSensitive())}r.putString("Locale",n.getLocale());i.put("Collator",r)}if(n.supportsDimension()){e.QInARepoUtils.setNameIfNotNull(i,"Dimension",n.getDimension())}if(n.getModelCapabilities().supportsPersistedInA()&&t.getOriginalMode()===e.QModelFormat.INA_CLONE&&(!n.isCreatedFromMetadata()||n.getModCounter()>0)){i.putBoolean("ExportInPersistedInA",true)}};e.QInARepoSortOperation.prototype.exportMeasureSorting=function(t,i){let n=i;let r=n.getMeasure().getName();t.putString("MeasureName",r);e.QInARepoUtils.setNameIfNotNull(t,"StructureName",n.getSecondaryMeasure())};e.QInARepoSortOperation.prototype.exportPathSorting=function(t,i,n){let r=n;let o=i.putNewList("SortTuple");let l=r.getElementPath();let a=l.size();for(let i=0;i<a;i++){let n=l.get(i);let r=o.addNewStructure();r.putString("FieldName",n.getSelectField().getName());let a=n.getSelectMemberType();if(e.notNull(a)){r.putInteger("MemberType",e.QInAConverter.lookupResultsetMemberTypeInA(a))}r.putString("Value",n.getSelectValue());let p=n.getSelectHierarchyName();if(e.XStringUtils.isNotNullAndNotEmpty(p)){r.putString("Hierarchy",p)}e.QInARepoUtils.extendStructureWithTagging(t,n,r)}if(n.usedInRanking()){i.putBoolean("SortOperationUsedInRanking",true)}};e.QInARepoSortOperation.prototype.getComponentType=function(){return e.OlapComponentType.GENERIC_SORTING};e.QInARepoSortOperation.prototype.getCustomSortOrder=function(t){let i=t.getListByKey("CustomSort");if(e.notNull(i)&&i.hasElements()){return e.PrUtils.asListOfString(i)}return null};e.QInARepoSortOperation.prototype.getCustomSortPosition=function(t){let i=t.getStringByKey("CustomSortPosition");if(e.notNull(i)){return e.CustomSortPosition.lookup(i)}return null};e.QInARepoSortOperation.prototype.getRequestLanguage=function(t){let i=t.getQueryManagerBase();let n=i.getConnection().getSystemDescription().getLanguage();if(e.XStringUtils.isNullOrEmpty(n)){let t=i.getProcess().getUserProfile();if(e.notNull(t)){n=t.getDataAccessLanguage()}}return n};e.QInARepoSortOperation.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=r;let a=null;if(l.getOlapComponentType()===e.OlapComponentType.COMPONENT_LIST){l=l.getParent()}if(l.getOlapComponentType()===e.OlapComponentType.SORT_MANAGER){a=l}let p=null;if(e.notNull(a)){let n=o.getQueryModel();let r=n.getModelCapabilities();let l=i.getStringByKey("SortType");let s=e.QInAConverter.lookupSortType(l);if(s===e.SortType.FIELD){p=this.importFieldSorting(i,a,n)}else if(s===e.SortType.MEASURE){p=this.importMeasureSorting(i,a,n)}else if(s===e.SortType.DATA_CELL_VALUE||s===e.SortType.COMPLEX&&(r.supportsComplexSorting()||r.supportsDataCellSorting())){p=this.importPathSorting(t,i,o,a,n,s)}else{p=this.importDimensionSorting(t,i,a,n,s)}if(e.notNull(p)){this.importGenericSorting(t,i,p,n)}}return p};e.QInARepoSortOperation.prototype.importDimensionSorting=function(t,i,n,r,o){let l=i.getStringByKey("Dimension");let a=r.getModelCapabilities();if(e.XStringUtils.isNotNullAndNotEmpty(l)){let p=null;let s=r.skipSerializationOfUnusedDimensionAndSort()&&(t.m_mode===e.QModelFormat.INA_REPOSITORY_DATA||t.m_mode===e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS);if(s){let t=e.XCollectionUtils.findFirst(r.getLoadedDimensions(),t=>e.XString.isEqual(t.getName(),l));if(e.notNull(t)&&(t.getAxisType()===e.AxisType.ROWS||t.getAxisType()===e.AxisType.COLUMNS)){p=t}}else{p=r.getDimensionByNameFromExistingMetadata(l)}if(e.notNull(p)&&a.supportsDimensionSorting(p,o)){let t=n.newDimensionSorting(p);if(e.isNull(t)){return null}if(o===e.SortType.FILTER){t.setSortByFilter()}else if(o===e.SortType.MEMBER_KEY){t.setSortByKey();t.setCustomSort(this.getCustomSortOrder(i));t.setCustomSortPosition(this.getCustomSortPosition(i))}else if(o===e.SortType.MEMBER_TEXT){t.setSortByText()}else if(o===e.SortType.HIERARCHY){t.setSortByHierarchy()}return t}}return null};e.QInARepoSortOperation.prototype.importFieldSorting=function(t,i,n){let r=null;let o=t.getStringByKey("FieldName");if(e.notNull(o)){let l=n.getFieldByName(o);let a=n.getModelCapabilities();if(e.notNull(l)&&a.supportsFieldSorting(l)){r=i.newFieldSorting(l);r.setCustomSort(this.getCustomSortOrder(t));r.setCustomSortPosition(this.getCustomSortPosition(t))}}return r};e.QInARepoSortOperation.prototype.importGenericSorting=function(t,i,n,r){let o=i.getStringByKey("Direction");if(e.notNull(o)){let t=e.QInAConverter.lookupSortDirection2(o);if(e.notNull(t)){n.setDirection(t)}}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("PreserveGrouping")){if(n.supportsPreserveGrouping()&&n.supportsBreakGrouping()){n.setPreserveGrouping(i.getBooleanByKeyExt("PreserveGrouping",false))}}if(n.supportsDimension()){let t=i.getStringByKey("Dimension");if(e.isNull(t)){n.setDimension(null)}else{n.setDimension(r.getDimensionByNameFromExistingMetadata(t))}}if(n.getModelCapabilities().supportsLocaleSorting()){let o=i.getStructureByKey("Collator");if(e.notNull(o)){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.containsKey("CaseSensitive")){n.setIsCaseSensitive(o.getBooleanByKeyExt("CaseSensitive",false))}let i=o.getStringByKeyExt("Locale",null);if(e.XStringUtils.isNotNullAndNotEmpty(i)){i=this.getRequestLanguage(r)}n.setLocale(i)}}if(r.getModelCapabilities().supportsPersistedInA()&&t.getOriginalMode()===e.QModelFormat.INA_CLONE&&!i.getBooleanByKeyExt("ExportInPersistedInA",false)){n.setCreatedFromMetadata(true)}};e.QInARepoSortOperation.prototype.importMeasureSorting=function(t,i,n){let r=null;let o=n.getModelCapabilities();let l=t.getStringByKey("MeasureName");if(e.notNull(l)){let a=n.getMeasureDimension();let p=a.getStructureMember(l);if(e.isNull(p)){p=n.getOlapEnv().getClientQueryObjectManager().getStructuredMember(l,n.getQueryManager().getClientQueryObjectStorageName(),true)}if(e.notNull(p)&&o.supportsMeasureSorting()){r=i.newMeasureSorting(p)}let s=t.getStringByKey("StructureName");let u=n.getNonMeasureDimension();if(e.notNull(s)&&e.notNull(u)&&e.notNull(r)){r.setSecondaryMeasure(u.getStructureMember(s))}}return r};e.QInARepoSortOperation.prototype.importPathSorting=function(t,i,n,r,o,l){let a=i.getListByKey("SortTuple");if(a.isEmpty()){return null}let p=e.XList.create();for(let i=0;i<a.size();i++){let r=a.getStructureAt(i);let l=r.getStringByKey("FieldName");let s=r.getStringByKey("Value");if(e.isNull(l)){return null}let u=o.getFieldByName(l);if(e.isNull(u)){return null}let g=r.getStringByKey("Hierarchy");let y;if(r.containsKey("MemberType")){y=e.QSelectValue._createDimensionElementWithMemberType(e.QInAConverter.lookupMemberType(r.getIntegerByKey("MemberType")),u,g,s)}else{if(e.isNull(s)){return null}y=e.QSelectValue._createDimensionElement2(n,u,g,s)}e.QInAImportUtil.importComponentTagging(t,r,y);p.add(y)}let s;if(l===e.SortType.DATA_CELL_VALUE){s=r.newDataCellSorting(p)}else{s=r.newComplexSorting(p)}let u=i.getBooleanByKeyExt("SortOperationUsedInRanking",false);if(u){s.setUsedInRanking(true)}return s};e.QInARepoTotals=function(){};e.QInARepoTotals.prototype=new e.QInARepository;e.QInARepoTotals.prototype._ff_c="QInARepoTotals";e.QInARepoTotals.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;if(!o.supportsTotals()){return null}let l=null;if(o.supportsResultAlignment()){if(o.isTotalsAlignmentOnDefault()){n.putString("ResultAlignment","Default")}else{l=o.getResultAlignment();n.putString("ResultAlignment",e.QInAConverter.lookupAlignmentInA(l));let t=o.getAlignmentPriority();if(t>-1){n.putInteger("ResultAlignmentPriority",t)}}}if(l===e.ResultAlignment.STRUCTURE){let t=n.putNewList("ResultStructure");let i=o.getTotalsStructure();if(e.notNull(i)){for(let n=0;n<i.size();n++){let r=i.get(n);let o=t.addNewStructure();let l=r.getResultStructureElement();o.putString("Result",e.QInAConverter.lookupResultStructureElementInA(l));let a=r.getResultVisibility();o.putString("Visibility",e.QInAConverter.lookupResultSetVisibilityInA(a))}}}else if(o.supportsResultVisibility()){if(o.isTotalsVisibilityOnDefault()){n.putString("Visibility","Default")}else{let t=e.QInAConverter.lookupResultSetVisibilityInA(o.getResultVisibility());n.putString("Visibility",t);let i=o.getResultVisibilitySettings();if(e.notNull(i)){let t=n.putNewList("VisibilitySettings");while(i.hasNext()){let n=i.next();let r=t.addNewStructure();r.putString("ResultAlignment",e.QInAConverter.lookupAlignmentInA(n.getAlignment()));r.putString("Result",e.QInAConverter.lookupResultStructureElementInA(n.getElement()));r.putString("Visibility",e.QInAConverter.lookupResultSetVisibilityInA(n.getVisibility()))}e.XObjectExt.release(i)}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoTotals.prototype.getComponentType=function(){return e.OlapComponentType.TOTALS};e.QInARepoTotals.prototype.getTagName=function(){return"ResultStructureRepo"};e.QInARepoTotals.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(l.supportsTotals()){if(e.notNull(i)){let t=null;if(l.supportsResultAlignment()){let n=i.getStringByKey("ResultAlignment");if(e.XString.isEqual("Default",n)){l.restoreTotalsAlignment(e.RestoreAction.DEFAULT_VALUE,false)}else{t=e.QInAConverter.lookupAlignment(n);l.setResultAlignmentBase(t,false);l.setAlignmentPriority(i.getIntegerByKeyExt("ResultAlignmentPriority",-1))}}if(t===e.ResultAlignment.STRUCTURE){let t=i.getListByKey("ResultStructure");if(e.notNull(t)){let i=l.getAdvancedResultStructure();i.clear();for(let n=0;n<t.size();n++){let r=t.getStructureAt(n);let o=r.getStringByKey("Result");let l=e.QInAConverter.lookupResultStructureElement(o);let a=e.QInAConverter.lookupResultSetVisibility(r.getStringByKey("Visibility"));i.addWithVisibility(l,a)}}}else{if(l.supportsResultVisibility()){let t=i.getStringByKey("Visibility");if(e.XString.isEqual("Default",t)){l.restoreTotalsVisibility(e.RestoreAction.DEFAULT_VALUE,false)}else{let n=i.getListByKey("VisibilitySettings");if(e.isNull(n)){let i=e.QInAConverter.lookupResultSetVisibility(t);l.setResultVisibility(i)}else{for(let t=0;t<n.size();t++){let i=n.getStructureAt(t);let r=e.QInAConverter.lookupAlignment(i.getStringByKey("ResultAlignment"));let o=e.QInAConverter.lookupResultStructureElement(i.getStringByKey("Result"));let a=e.QInAConverter.lookupResultSetVisibility(i.getStringByKey("Visibility"));l.setResultVisibilityByElementAndAlignment(r,o,a)}}}}}}}return l};e.QInARepoTranslationsManager=function(){};e.QInARepoTranslationsManager.prototype=new e.QInARepository;e.QInARepoTranslationsManager.prototype._ff_c="QInARepoTranslationsManager";e.QInARepoTranslationsManager.prototype.exportComponentWithStructure=function(t,i,n,r){return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoTranslationsManager.prototype.getComponentType=function(){return e.OlapComponentType.MEASURE_TRANSLATIONS};e.QInARepoTranslationsManager.prototype.getTagName=function(){return"Translations"};e.QInARepoTranslationsManager.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(e.notNull(i)){if(i.containsKey("CurrencyTranslations")){this.importCurrencyTranslationWithStructure(t,i,l,o)}else if(i.containsKey("UnitTranslations")){this.importUnitTranslationWithStructure(t,i,l,o)}}return l};e.QInARepoTranslationsManager.prototype.importCurrencyTranslationWithStructure=function(t,i,n,r){let o=n.getCurrencyTranslationManagerBase();let l=i.getListByKey("CurrencyTranslations");if(e.notNull(l)){if(e.notNull(o)&&e.XCollectionUtils.hasElements(l)){let i=l.size();for(let n=0;n<i;n++){let i=l.getStructureAt(n);let a=i.getStringByKey("Name");let p=i.getStringByKey("Description");let s=o.getMeasureCurrencyTranslation(a);if(e.isNull(s)){s=o.addNewMeasureCurrencyTranslationBase(a,p)}t.importCurrencyTranslationElement(i,s,r)}}}};e.QInARepoTranslationsManager.prototype.importUnitTranslationWithStructure=function(t,i,n,r){let o=n.getUnitTranslationManagerBase();let l=i.getListByKey("UnitTranslations");if(e.notNull(l)){if(e.notNull(o)&&e.XCollectionUtils.hasElements(l)){let i=l.size();for(let n=0;n<i;n++){let i=l.getStructureAt(n);let a=i.getStringByKey("Name");let p=i.getStringByKey("Description");let s=o.getMeasureUnitTranslation(a);if(e.isNull(s)){s=o.addNewMeasureUnitTranslationBase(a,p)}t.importUnitTranslationElement(i,s,r)}}}};e.QInARepoUnitTranslationItem=function(){};e.QInARepoUnitTranslationItem.prototype=new e.QInARepository;e.QInARepoUnitTranslationItem.prototype._ff_c="QInARepoUnitTranslationItem";e.QInARepoUnitTranslationItem.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;if(e.notNull(o)){n.putBoolean("MetadataDefined",o.isMetadataDefined());n.putString("Name",o.getName());n.putStringNotNullAndNotEmpty("DimensionName",o.getDimensionName());n.putStringNotNullAndNotEmpty("Description",o.getText());n.putStringNotNullAndNotEmpty("RateLookUp",e.QInAConverter.lookupUtRateLookupInA(o.getRateLookup()));n.putStringNotNullAndNotEmpty("ErrorHandling",e.QInAConverter.lookupUtErrorHandlingModeInA(o.getErrorHandling()));this.exportTargetUnit(n,o.getTargetUnit())}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoUnitTranslationItem.prototype.exportTargetUnit=function(t,i){if(e.notNull(i)){if(i.isFixed()){t.putNewStructure("TargetUnit").putString("Fixed",i.getFixedValue().getStringRepresentation())}else if(i.isFieldBased()){t.putNewStructure("TargetUnit").putString("DimensionAttribute",i.getFieldName())}else if(i.isVariableBased()){t.putNewStructure("TargetUnit").putString("Variable",i.getVariableName())}}};e.QInARepoUnitTranslationItem.prototype.getComponentType=function(){return e.OlapComponentType.UNIT_TRANSLATION_ITEM};e.QInARepoUnitTranslationItem.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(e.notNull(l)&&e.XCollectionUtils.hasElements(i)){l.setMetadataDefined(i.getBooleanByKey("MetadataDefined"));l.setDimensionName(i.getStringByKey("DimensionName"));l.setRateLookup(e.QInAConverter.lookupUtRateLookup(i.getStringByKey("RateLookUp")));l.setErrorHandling(e.QInAConverter.lookupUtErrorHandlingMode(i.getStringByKey("ErrorHandling")));this.importUnitData(l.getTargetUnit(),i.getStructureByKey("TargetUnit"))}return n};e.QInARepoUnitTranslationItem.prototype.importUnitData=function(t,i){if(e.notNull(t)&&e.notNull(i)){if(i.containsKey("Fixed")){t.setFixedValue(e.XStringValue.create(i.getStringByKey("Fixed")))}else if(i.containsKey("DimensionAttribute")){t.setFieldName(i.getStringByKey("DimensionAttribute"))}else if(i.containsKey("Variable")){t.setVariableName(i.getStringByKey("Variable"))}}};e.QInARepoUnitTranslationManager=function(){};e.QInARepoUnitTranslationManager.prototype=new e.QInARepository;e.QInARepoUnitTranslationManager.prototype._ff_c="QInARepoUnitTranslationManager";e.QInARepoUnitTranslationManager.prototype.exportComponentWithList=function(t,i,n){let r=null;let o=i;let l=o.getMeasureUnitTranslations();if(e.XCollectionUtils.hasElements(l)){r=e.PrFactory.createList();let i=l.size();for(let e=0;e<i;e++){let i=l.get(e);t.exportUnitTranslationElement(i,r.addNewStructure())}}return r};e.QInARepoUnitTranslationManager.prototype.exportComponentWithStructure=function(t,i,n,r){let o=this.exportComponentWithList(t,i,r);n.put("Elements",o);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoUnitTranslationManager.prototype.getComponentType=function(){return e.OlapComponentType.UNIT_TRANSLATION_MANAGER};e.QInARepoUnitTranslationManager.prototype.getTagName=function(){return"UnitTranslations"};e.QInARepoUnitTranslationManager.prototype.importComponentWithList=function(t,i,n,r,o){let l=o.getQueryModel().getUnitTranslationManager();if(e.notNull(l)&&e.XCollectionUtils.hasElements(i)){let n=i.size();for(let r=0;r<n;r++){let n=i.getStructureAt(r);let a=n.getStringByKey("Name");let p=n.getStringByKey("Description");let s=l.getMeasureUnitTranslation(a);if(e.isNull(s)){s=l.addNewMeasureUnitTranslationBase(a,p)}t.importUnitTranslationElement(n,s,o)}}return l};e.QInARepoUnitTranslationManager.prototype.importComponentWithStructure=function(t,i,n,r,o){if(e.notNull(i)){let e=i.getListByKey("Elements");this.importComponentWithList(t,e,n,r,o)}return n};e.QInARepoUniversalDisplayHierarchies=function(){};e.QInARepoUniversalDisplayHierarchies.prototype=new e.QInARepository;e.QInARepoUniversalDisplayHierarchies.prototype._ff_c="QInARepoUniversalDisplayHierarchies";e.QInARepoUniversalDisplayHierarchies.assignAxesToHierarchies=function(t){let i=t.getQueryModel();let n=t.getHierarchies();let r=e.XList.create();let o=n.size();for(let t=0;t<o;t++){let o=n.get(t);if(o.getHierarchyDedicatedAxis()!==null){r.add(o.getHierarchyDedicatedAxis().getType());continue}let l=e.QInARepoUniversalDisplayHierarchies.getAxisForDimensionList(o.getDimensionNames(),i);if(e.notNull(l)&&!r.contains(l.getType())){o.setAxis(l);r.add(l.getType())}}for(let t=0;t<o;t++){let o=n.get(t);if(o.getHierarchyDedicatedAxis()===null){o.setAxis(r.contains(e.AxisType.ROWS)?i.getColumnsAxis():i.getRowsAxis())}}};e.QInARepoUniversalDisplayHierarchies.getAxisForDimensionList=function(t,i){if(e.notNull(t)){for(let n=0;n<t.size();n++){let r=i.getDimensionByNameFromExistingMetadata(t.get(n));if(e.notNull(r)){let t=r.getAxisType();if(t===e.AxisType.ROWS||t===e.AxisType.COLUMNS){return r.getAxis()}}}}return null};e.QInARepoUniversalDisplayHierarchies.importHierarchy=function(t,i,n){let r=null;let o=0;let l=e.Alignment.DEFAULT_VALUE;let a=false;let p=n.getStringByKey("Name");let s=i.getByName(p);let u=null;let g=false;if(e.notNull(s)){a=s.isActive();l=s.getAlignment();o=s.getInitialDrillLevel();r=s.getDimensionNames();u=s.getUdhKeyName();g=s.isRequestUdhKey()}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.containsKey("Active")){a=n.getBooleanByKeyExt("Active",false)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.containsKey("LowerLevelNodeAlignment")){l=e.QInAConverter.lookupLowerLevelNodeAlignment(n.getStringByKey("LowerLevelNodeAlignment"))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.containsKey("InitialDrillLevel")){o=n.getIntegerByKey("InitialDrillLevel")}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.containsKey("DimensionNames")){let t=n.getListByKey("DimensionNames");r=e.PrUtils.asListOfString(t)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.containsKey("RequestUdhKey")){g=n.getBooleanByKeyExt("RequestUdhKey",g)}if(n.containsKey("Attributes")){let t=n.getListByKey("Attributes");let i=e.XCollectionUtils.size(t);for(let n=0;n<i;n++){let i=t.getStructureAt(n);if(e.XString.isEqual(i.getStringByKey("PresentationType"),"UDHKey")){u=i.getStringByKey("Name")}}}let y=n.getBooleanByKeyExt("CustomDimensions",false);if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||e.notNull(s)){e.XObjectExt.assertNotNull(r);i.addHierarchy(p,r,o,l,a,null,y,u,g)}};e.QInARepoUniversalDisplayHierarchies.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;if(e.notNull(o)){o.updateIncludedDimensions();let i=o.getChildrenIterator();if(i.hasNext()){let r=n.putNewList("UniversalDisplayHierarchies");while(i.hasNext()){let n=i.next();let o=t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.getModCounter()>0;if(o){this.exportHierarchy(t,r,n)}}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoUniversalDisplayHierarchies.prototype.exportHierarchy=function(t,i,n){let r=true;if(n.isActive()&&!n.isDimensionListValid()){r=false;t.addError(e.ErrorCodes.INVALID_STATE,e.XStringUtils.concatenate3("Dimensions for UDH '",n.getName(),"' must be placed next to each other on the axis"))}let o=i.addNewStructure();o.putString("Name",n.getName());if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.hasPropertyChanged(e.QUniversalDisplayHierarchyProperties.QY_INITIAL_DRILL_LEVEL)){o.putInteger("InitialDrillLevel",n.getInitialDrillLevel())}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.hasPropertyChanged(e.QUniversalDisplayHierarchyProperties.QY_LOWER_LEVEL_NODE_ALIGNMENT)){o.putString("LowerLevelNodeAlignment",n.getAlignment().getName())}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.hasPropertyChanged(e.QUniversalDisplayHierarchyProperties.QY_ACTIVE)){o.putBoolean("Active",n.isActive()&&r)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.hasPropertyChanged(e.QUniversalDisplayHierarchyProperties.QY_DIMENSION_NAMES)){o.putNewList("DimensionNames").addAllStrings(n.getDimensionNames())}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.hasPropertyChanged(e.QUniversalDisplayHierarchyProperties.QY_REQUEST_UDH_KEY)){o.putBoolean("RequestUdhKey",n.isRequestUdhKey())}if(e.XStringUtils.isNotNullAndNotEmpty(n.getUdhKeyName())){let e=o.putNewList("Attributes").addNewStructure();e.putString("Name",n.getUdhKeyName());e.putString("PresentationType","UDHKey")}if(n.hasCustomDimensions()){o.putBoolean("CustomDimensions",true)}};e.QInARepoUniversalDisplayHierarchies.prototype.getComponentType=function(){return e.OlapComponentType.UNIVERSAL_DISPLAY_HIERARCHIES};e.QInARepoUniversalDisplayHierarchies.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(e.notNull(i)){let n=i.getByKey("UniversalDisplayHierarchies");if(e.notNull(n)&&n.isList()){let i=n;let r=i.size();for(let n=0;n<r;n++){e.QInARepoUniversalDisplayHierarchies.importHierarchy(t,l,i.getStructureAt(n))}}}e.QInARepoUniversalDisplayHierarchies.assignAxesToHierarchies(l);if(t.getMode()===e.QModelFormat.INA_REPOSITORY_DELTA){l.updateIncludedDimensions()}return l};e.QInARepoVarDimMember=function(){};e.QInARepoVarDimMember.prototype=new e.QInARepository;e.QInARepoVarDimMember.prototype._ff_c="QInARepoVarDimMember";e.QInARepoVarDimMember.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());let l=t.getMode()===e.QModelFormat.INA_REPOSITORY_DELTA&&o.isRRIAffectedComponent();let a=o.isInputEnabled()||t.getOriginalMode()===e.QModelFormat.INA_CLONE||l;if(o.hasMemberFilter()&&a){let i=o.getMemberFilter();let l=t.exportComponent(null,i,null,r);if(e.notNull(l)){n.put("Selection",l)}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoVarDimMember.prototype.getComponentType=function(){return e.VariableType.DIMENSION_MEMBER_VARIABLE};e.QInARepoVarDimMember.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;let a=i.getStructureByKey("Selection");if(e.isNull(a)){l.setMemberFilter(null)}else{let i=t.importComponent(null,a,null,l,o);if(e.notNull(i)&&t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY_DELTA)&&!e.XString.isEqual(l.getDimension().getName(),i.getFieldMetadata().getDimensionMetadata().getName())){l.setMemberFilter(e.XObjectExt.cloneIfNotNull(l.getDefaultMemberFilter()))}else{l.setMemberFilter(i)}}return l};e.QInARepoVarFunctional=function(){};e.QInARepoVarFunctional.prototype=new e.QInARepository;e.QInARepoVarFunctional.prototype._ff_c="QInARepoVarFunctional";e.QInARepoVarFunctional.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoVarFunctional.prototype.getComponentType=function(){return e.VariableType.FUNCTIONAL_VARIABLE};e.QInARepoVarFunctional.prototype.importComponentWithStructure=function(e,t,i,n,r){return i};e.QInARepoVarOptionList=function(){};e.QInARepoVarOptionList.prototype=new e.QInARepository;e.QInARepoVarOptionList.prototype._ff_c="QInARepoVarOptionList";e.QInARepoVarOptionList.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());let l=t.getMode()===e.QModelFormat.INA_REPOSITORY_DELTA&&o.isRRIAffectedComponent();let a=o.isInputEnabled()||t.getOriginalMode()===e.QModelFormat.INA_CLONE||l;if(a){let t=n.putNewList("OptionValues");if(o.supportsMultipleValues()){let e=o.getValues();let i=e.size();for(let n=0;n<i;n++){let i=e.get(n);t.addString(i.getString())}}else{let i=o.getCurrentOption();if(e.notNull(i)){t.addString(i.getName())}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoVarOptionList.prototype.getComponentType=function(){return e.VariableType.OPTION_LIST_VARIABLE};e.QInARepoVarOptionList.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;l.clear();let a=i.getListByKey("OptionValues");if(e.notNull(a)){let e;if(l.supportsMultipleValues()){let t=a.size();for(let i=0;i<t;i++){e=a.getStringAt(i);l.addString(e)}}else if(a.size()===1){e=a.getStringAt(0);l.setString(e)}}return l};e.QInARepoVarSimpleType=function(){};e.QInARepoVarSimpleType.prototype=new e.QInARepository;e.QInARepoVarSimpleType.prototype._ff_c="QInARepoVarSimpleType";e.QInARepoVarSimpleType.prototype.addNumericValue=function(t,i,n,r){if(e.XValueType.getValueTypeOfObject(n)===e.XValueType.DECIMAL_FLOAT&&!n.mayLoosePrecision()){i.addString(e.XValueUtil.getString(n))}else if(r===e.XValueType.DOUBLE||r===e.XValueType.DECIMAL_FLOAT){i.addDouble(e.XValueUtil.getDouble(n,true,false))}else if(r===e.XValueType.LONG){i.addLong(e.XValueUtil.getLong(n,true,false))}else if(r===e.XValueType.INTEGER){i.addInteger(e.XValueUtil.getInteger(n,true,false))}};e.QInARepoVarSimpleType.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());let l=o.getValueType();let a;if(l===e.XValueType.STRING||l===e.XValueType.DATE||l===e.XValueType.TIME||l===e.XValueType.DATE_TIME||l===e.XValueType.BOOLEAN||l.isSpatial()){a=n.putNewList("SimpleStringValues")}else if(l===e.XValueType.DOUBLE||l===e.XValueType.DECIMAL_FLOAT||l===e.XValueType.LONG||l===e.XValueType.INTEGER){a=n.putNewList("SimpleNumericValues")}else{t.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate3("SimpleTypeVariable '",o.getName(),"' not exported"));return null}let p=t.getMode()===e.QModelFormat.INA_REPOSITORY_DELTA&&o.isRRIAffectedComponent();let s=o.isInputEnabled()||t.getOriginalMode()===e.QModelFormat.INA_CLONE||p;if(s){if(o.supportsMultipleValues()){this.exportMultipleValues(t,o,l,a)}else{this.exportSingleValue(t,o,l,a)}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoVarSimpleType.prototype.exportMultipleValues=function(t,i,n,r){let o=i.getValues();let l=o.size();for(let i=0;i<l;i++){if(n.isNumber()){this.addNumericValue(t,r,o.get(i),n)}else if(n===e.XValueType.STRING){let e=o.get(i);r.addString(e.getString())}else if(n===e.XValueType.DATE||n===e.XValueType.TIME||n===e.XValueType.DATE_TIME){let n=o.get(i);r.addString(e.QInAExportUtil.dateTimeToString(t,n))}else if(n===e.XValueType.BOOLEAN){let t=o.get(i);r.addString(e.XBoolean.convertToString(t.getBoolean()))}else if(n.isSpatial()){let e=o.get(i);r.addString(e.toWKT())}}};e.QInARepoVarSimpleType.prototype.exportSingleValue=function(t,i,n,r){let o=!i.hasValue()&&(t.getMode()===e.QModelFormat.INA_REPOSITORY||i.getQueryModel()!==null&&i.getQueryModel().getSystemType().isTypeOf(e.SystemType.VIRTUAL_INA));if(n.isNumber()){if(o){r.addNull()}else{this.addNumericValue(t,r,i.getValue(),n)}}else if(n===e.XValueType.BOOLEAN){if(o){r.addNull()}else{r.addBoolean(i.getBoolean())}}else{if(i.hasValue()){if(n===e.XValueType.STRING||n.isSpatial()){r.addString(i.getString())}else if(n===e.XValueType.DATE){r.addString(e.QInAExportUtil.dateTimeToString(t,i.getDate()))}else if(n===e.XValueType.TIME){r.addString(e.QInAExportUtil.dateTimeToString(t,i.getTime()))}else if(n===e.XValueType.DATE_TIME){r.addString(e.QInAExportUtil.dateTimeToString(t,i.getDateTime()))}}}};e.QInARepoVarSimpleType.prototype.getComponentType=function(){return e.VariableType.SIMPLE_TYPE_VARIABLE};e.QInARepoVarSimpleType.prototype.getFirstValueAsString=function(t){let i=t.get(0);if(e.notNull(i)&&i.isString()){return i.getString()}return null};e.QInARepoVarSimpleType.prototype.importBooleanValues=function(t,i){let n=t.getListByKey("SimpleStringValues");if(e.notNull(n)){let t=n.size();if(i.supportsMultipleValues()){for(let e=0;e<t;e++){i.addBoolean(n.getBooleanAt(e))}}else if(t===1){let t=n.get(0);if(e.notNull(t)&&t.isBoolean()){i.setBoolean(t.asBoolean().getBoolean())}}}};e.QInARepoVarSimpleType.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;l.clear();let a=l.getValueType();if(a.isNumber()){this.importNumericValues(t,i,l,a)}else if(a.isString()){this.importStringValues(i,l)}else if(a===e.XValueType.DATE){this.importDateValues(t,i,l)}else if(a===e.XValueType.TIME){this.importTimeValues(t,i,l)}else if(a===e.XValueType.DATE_TIME){this.importDateTimeValues(t,i,l)}else if(a===e.XValueType.BOOLEAN){this.importBooleanValues(i,l)}return l};e.QInARepoVarSimpleType.prototype.importDateTimeValues=function(t,i,n){let r=i.getListByKey("SimpleStringValues");if(e.notNull(r)){let i=r.size();if(n.supportsMultipleValues()){for(let o=0;o<i;o++){let i=r.getStringAt(o);if(e.XStringUtils.isNotNullAndNotEmpty(i)){n.addDateTime(e.XDateTime.createDateTimeFromStringWithFlag(i,t.m_capabilities.supportsSapDate()))}}}else if(i===1){let i=this.getFirstValueAsString(r);if(e.XStringUtils.isNotNullAndNotEmpty(i)){n.setDateTime(e.XDateTime.createDateTimeFromStringWithFlag(i,t.m_capabilities.supportsSapDate()))}}}};e.QInARepoVarSimpleType.prototype.importDateValues=function(t,i,n){let r=i.getListByKey("SimpleStringValues");if(e.notNull(r)){let t=r.size();if(n.supportsMultipleValues()){for(let i=0;i<t;i++){let t=r.getStringAt(i);if(e.XStringUtils.isNotNullAndNotEmpty(t)){n.addDate(e.QInARepoUtils.createDate(t))}}}else if(t===1){let t=this.getFirstValueAsString(r);if(e.XStringUtils.isNotNullAndNotEmpty(t)){n.setDate(e.QInARepoUtils.createDate(t))}}}};e.QInARepoVarSimpleType.prototype.importNumericValues=function(t,i,n,r){let o=i.getListByKey("SimpleNumericValues");if(e.notNull(o)){let t=o.size();if(n.supportsMultipleValues()){for(let i=0;i<t;i++){let t=o.getElementTypeAt(i);if(t===e.PrElementType.STRING){n.addDeclFloat(e.XDecFloatByString.create(o.getStringAt(i)))}else if(r===e.XValueType.INTEGER){let e=o.getIntegerAt(i);n.addInteger(e)}else if(r===e.XValueType.DOUBLE){let e=o.getDoubleAt(i);n.addDouble(e)}else if(r===e.XValueType.DECIMAL_FLOAT){let t=e.XDecFloatByDouble.create(o.getDoubleAt(i));n.addDeclFloat(t)}else if(r===e.XValueType.LONG){let e=o.getLongAt(i);n.addLong(e)}}}else if(t===1){let t=o.getElementTypeAt(0);if(t.isNumber()){if(r===e.XValueType.INTEGER){n.setInteger(o.getIntegerAt(0))}else if(r===e.XValueType.DOUBLE){n.setDouble(o.getDoubleAt(0))}else if(r===e.XValueType.DECIMAL_FLOAT){n.setDecFloat(e.XDecFloatByDouble.create(o.getDoubleAt(0)))}else if(r===e.XValueType.LONG){n.setLong(o.getLongAt(0))}}else if(t===e.PrElementType.STRING){n.setDecFloat(e.XDecFloatByString.create(o.getStringAt(0)))}}}};e.QInARepoVarSimpleType.prototype.importStringValues=function(t,i){let n=t.getListByKey("SimpleStringValues");if(e.notNull(n)){let t=n.size();if(i.supportsMultipleValues()){for(let e=0;e<t;e++){i.addString(n.getStringAt(e))}}else if(t===1){let t=n.get(0);if(e.notNull(t)&&t.isString()){i.setString(t.getString())}}}};e.QInARepoVarSimpleType.prototype.importTimeValues=function(t,i,n){let r=i.getListByKey("SimpleStringValues");if(e.notNull(r)){let i=r.size();if(n.supportsMultipleValues()){for(let o=0;o<i;o++){let i=r.getStringAt(o);if(e.XStringUtils.isNotNullAndNotEmpty(i)){n.addTime(e.XTime.createTimeFromStringWithFlag(i,t.m_capabilities.supportsSapDate()))}}}else if(i===1){let i=this.getFirstValueAsString(r);if(e.XStringUtils.isNotNullAndNotEmpty(i)){n.setTime(e.XTime.createTimeFromStringWithFlag(i,t.m_capabilities.supportsSapDate()))}}}};e.QInaRepoCustomHierarchyDefinition=function(){};e.QInaRepoCustomHierarchyDefinition.prototype=new e.QInARepository;e.QInaRepoCustomHierarchyDefinition.prototype._ff_c="QInaRepoCustomHierarchyDefinition";e.QInaRepoCustomHierarchyDefinition.prototype.addHierarchyElementToStructure=function(e,t,i,n){let r=t.getListByKey("NodeId");let o=r.size();r.addInteger(o);t.getListByKey("NodeName").addString(e.getName());t.getListByKey("ParentId").addInteger(i);if(e.isMemberElement()){t.getListByKey("Description").addString("");t.getListByKey("NodeType").addString(e.isNode()?n:"")}else{t.getListByKey("Description").addString(e.getName());t.getListByKey("NodeType").addString("1HIER_NODE_SIMPLE")}if(e.isNode()){let i=e.getChildNodes();let r=i.size();for(let e=0;e<r;e++){this.addHierarchyElementToStructure(i.get(e),t,o,n)}}};e.QInaRepoCustomHierarchyDefinition.prototype.addHierarchyNodesFromStructure=function(t,i){let n=e.PrUtils.getListProperty(i,"NodeId");let r=e.PrUtils.getListProperty(i,"ParentId");let o=e.PrUtils.getListProperty(i,"NodeName");let l=e.PrUtils.getListProperty(i,"NodeType");let a=e.PrUtils.getListSize(n,0);if(e.PrUtils.isListEmpty(n)||e.PrUtils.isListEmpty(r)||e.PrUtils.isListEmpty(o)||e.PrUtils.isListEmpty(l)||r.size()!==a||o.size()!==a||l.size()!==a){return}let p=e.XSimpleMap.create();for(let i=0;i<a;i++){let a=n.getIntegerAt(i);let s=o.getStringAt(i);let u=l.getStringAt(i);let g=r.getIntegerAt(i);let y=g===-1?t:p.getByKey(e.XIntegerValue.create(g));if(e.notNull(y)){if(e.XString.isEqual(u,"1HIER_NODE_SIMPLE")){p.put(e.XIntegerValue.create(a),y.addTextNode(s))}else{y.addMemberNode(s)}}}e.XObjectExt.release(p)};e.QInaRepoCustomHierarchyDefinition.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;let l=e.PrFactory.createStructure();l.putString("Name",o.getDimensionName());l.putString("System",o.getSystemName());l.putString("DataSource",o.getDataSourceName());let a=e.PrFactory.createStructure();this.exportCustomHierarchy(o,a);l.put("Hierarchy",a);let p=e.PrFactory.createStructure();let s=p.putNewList("Dimensions");s.add(l);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,p,r)};e.QInaRepoCustomHierarchyDefinition.prototype.exportCustomHierarchy=function(t,i){let n="";let r=t.getName();let o=t.getDescription();i.putString("Name",e.XStringUtils.isNotNullAndNotEmpty(r)?r:n);i.putString("Version",n);i.putString("DueDate",n);i.putString("Description",e.notNull(o)?o:n);i.putBoolean("IsTransient",true);i.putBoolean("NoRestNodes",true);i.put("Nodes",this.getHierarchyNodesAsStructure(t))};e.QInaRepoCustomHierarchyDefinition.prototype.getComponentType=function(){return e.OlapComponentType.CUSTOM_HIERARCHY_DEFINITION};e.QInaRepoCustomHierarchyDefinition.prototype.getHierarchyNodesAsStructure=function(t){let i=e.PrFactory.createStructure();i.putNewList("NodeId");i.putNewList("NodeName");i.putNewList("Description");i.putNewList("NodeType");i.putNewList("ParentId");let n=t.getChildNodes();let r=n.size();for(let e=0;e<r;e++){this.addHierarchyElementToStructure(n.get(e),i,-1,t.getDimensionName())}return i};e.QInaRepoCustomHierarchyDefinition.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=null;let a=e.PrUtils.getListProperty(i,"Dimensions");let p=e.PrUtils.getStructureElement(a,0);if(e.notNull(p)){let i=p.getStringByKey("System");let n=p.getStringByKey("DataSource");let r=p.getStringByKey("Name");let o=p.getStructureByKey("Hierarchy");if(e.notNull(o)&&e.XStringUtils.isNotNullAndNotEmpty(i)&&e.XStringUtils.isNotNullAndNotEmpty(r)){let a=true;let p=t.getApplication();if(e.notNull(p)){let t=p.getSystemLandscape().getSystemDescription(i);a=e.isNull(t)?true:t.getSystemType().isTypeOf(e.SystemType.ABAP)}l=e.QCustomHierarchyDefinition.createByData(i,n,r,o.getStringByKey("Description"),a);l.setName(o.getStringByKey("Name"));this.addHierarchyNodesFromStructure(l,o.getStructureByKey("Nodes"))}}return l};e.QInARepoTotalsLegacy=function(){};e.QInARepoTotalsLegacy.prototype=new e.QInARepository;e.QInARepoTotalsLegacy.prototype._ff_c="QInARepoTotalsLegacy";e.QInARepoTotalsLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoTotalsLegacy.prototype.getComponentType=function(){return e.OlapComponentType.TOTALS};e.QInARepoTotalsLegacy.prototype.getResultStructure=function(t){let i=t.getStructureByKey("ResultStructureBag");if(e.isNull(i)){i=t.getStructureByKey("DefaultResultStructure");if(e.isNull(i)){return t}}return i};e.QInARepoTotalsLegacy.prototype.getTagName=function(){return"ResultStructureBag"};e.QInARepoTotalsLegacy.prototype.importComponentWithStructure=function(t,i,n,r,o){if(t.m_mode!==e.QModelFormat.INA_DATA_REINIT){let t=n;if(t.supportsResultVisibility()){let n=this.getResultStructure(i);let r=this.importResultAlignment(t,n);t.restoreTotalsVisibility(e.RestoreAction.DEFAULT_VALUE,false);let o=n.getListByKey("ResultStructure");if(e.notNull(o)){let i;if(t.supportsAdvancedResultStructure()&&r===e.ResultAlignment.STRUCTURE){i=t.getAdvancedResultStructure();i.clear();if(e.isNull(r)){t.setResultAlignmentBase(e.ResultAlignment.STRUCTURE,true)}}else{i=null}let n=o.size();for(let e=0;e<n;e++){let n=o.getStructureAt(e);this.importResultStructureItem(n,t,i)}}}}return null};e.QInARepoTotalsLegacy.prototype.importResultAlignment=function(t,i){if(t.supportsResultAlignment()){t.restoreTotalsAlignment(e.RestoreAction.DEFAULT_VALUE,false);let n=i.getStringByKey("ResultAlignment");if(e.XStringUtils.isNullOrEmpty(n)){return null}let r=e.QInAConverter.lookupAlignment(n);t.setResultAlignmentBase(r,false);return r}return null};e.QInARepoTotalsLegacy.prototype.importResultStructureItem=function(t,i,n){let r=t.getStringByKey("Result");let o;if(e.XString.isEqual(r,"Members")){o=e.ResultStructureElement.MEMBERS}else if(e.XString.isEqual(r,"Total")){o=e.ResultStructureElement.TOTAL}else if(e.XString.isEqual(r,"TotalIncludedMembers")){o=e.ResultStructureElement.TOTAL_INCLUDED_MEMBERS}else if(e.XString.isEqual(r,"TotalRemainingMembers")){o=e.ResultStructureElement.TOTAL_REMAINING_MEMBERS}else{return}let l=t.getStringByKey("Visibility");let a=e.QInAConverter.lookupResultSetVisibility(l);if(e.isNull(n)){i.setResultVisibilityByElement(o,a)}else{n.addWithVisibility(o,a)}};e.QInARepoKpiDefinition=function(){};e.QInARepoKpiDefinition.prototype=new e.QInARepository;e.QInARepoKpiDefinition.prototype._ff_c="QInARepoKpiDefinition";e.QInARepoKpiDefinition.prototype.exportComponentWithStructure=function(t,i,n,r){if(e.notNull(i)&&e.notNull(n)){let r=i;n.putStringNotNullAndNotEmpty("Title",r.getTitle());e.QInARepoVisualizationManager.exportStringOrVariable(r.getDimensionNameRaw(),n,"DimensionName","DimensionNameVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(r.getDimensionTypeRaw(),n,"DimensionType","DimensionTypeVariable");e.QInARepoVisualizationManager.exportStringOrVariable(r.getKpiMemberRaw(),n,"KpiMember","KpiMemberVariable");e.QInARepoVisualizationManager.exportStringOrVariable(r.getTargetMemberRaw(),n,"TargetMember","TargetMemberVariable");e.QInARepoVisualizationManager.exportStringOrVariable(r.getDeviationMemberRaw(),n,"DeviationMember","DeviationMemberVariable");e.QInARepoVisualizationManager.exportStringOrVariable(r.getTrendMemberRaw(),n,"TrendMember","TrendMemberVariable");e.QInARepoVisualizationManager.exportStringOrVariable(r.getExceptionMemberRaw(),n,"ExceptionMember","ExceptionMemberVariable");e.QInARepoVisualizationManager.exportVariableHolder(t,r.getVisualizationVariableHolder(),n);e.QInARepoVisualizationManager.exportDataPointVariableContainers(t,r.getDatapointVariableContainers(),n);e.QInARepoVisualizationManager.exportSelectionPath(n.putNewList("Path"),r.getSelectionPath());e.QInARepoVisualizationManager.exportMemberRestriction(n.putNewList("MemberRestrictions"),r.getMemberRestrictions())}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoKpiDefinition.prototype.getComponentType=function(){return e.OlapComponentType.VISUALIZATION_KPI_DEFINITION};e.QInARepoKpiDefinition.prototype.getTagName=function(){return"KpiDefinition"};e.QInARepoKpiDefinition.prototype.importComponentWithStructure=function(t,i,n,r,o){if(e.notNull(i)&&e.notNull(n)&&n.getOlapComponentType()===e.OlapComponentType.VISUALIZATION_KPI_DEFINITION){let r=n;r.setTitle(i.getStringByKey("Title"));e.QInARepoVisualizationManager.importStringOrVariable(r.getDimensionNameRaw(),i,"DimensionName","DimensionNameVariable");e.QInARepoVisualizationManager.importConstantOrVariable(r.getDimensionTypeRaw(),i,"DimensionType","DimensionTypeVariable",t=>e.XComponentType.lookupComponentType(t));e.QInARepoVisualizationManager.importStringOrVariable(r.getKpiMemberRaw(),i,"KpiMember","KpiMemberVariable");e.QInARepoVisualizationManager.importStringOrVariable(r.getTargetMemberRaw(),i,"TargetMember","TargetMemberVariable");e.QInARepoVisualizationManager.importStringOrVariable(r.getDeviationMemberRaw(),i,"DeviationMember","DeviationMemberVariable");e.QInARepoVisualizationManager.importStringOrVariable(r.getTrendMemberRaw(),i,"TrendMember","TrendMemberVariable");e.QInARepoVisualizationManager.importStringOrVariable(r.getExceptionMemberRaw(),i,"ExceptionMember","ExceptionMemberVariable");e.QInARepoVisualizationManager.importVariableHolder(t,r.getVisualizationVariableHolder(),i.getListByKey("Variables"),o);e.QInARepoVisualizationManager.importDatapointVariableContainers(t,r,i,o);e.QInARepoVisualizationManager.importSelectionPath(r,i.getListByKey("Path"));e.QInARepoVisualizationManager.importMemberRestrictions(r,i.getListByKey("MemberRestrictions"))}return n};e.QInARepoTableCellReferenceScope=function(){};e.QInARepoTableCellReferenceScope.prototype=new e.QInARepository;e.QInARepoTableCellReferenceScope.prototype._ff_c="QInARepoTableCellReferenceScope";e.QInARepoTableCellReferenceScope.prototype.exportAxisPaths=function(t,i){let n=t.getAxisPaths();if(e.XCollectionUtils.hasElements(n)){let t=i.putNewList("ReferencePaths");for(let i=0;i<n.size();i++){let r=n.get(i);let o=t.addNewStructure();this.setTriStateBool(o,"MatchDimensionSectionStart",r.isMatchingDimensionSectionStart());this.setTriStateBool(o,"MatchDimensionSectionEnd",r.isMatchingDimensionSectionEnd());this.setTriStateBool(o,"MatchHierarchyLevelStart",r.isMatchingHierarchyLevelStart());this.setTriStateBool(o,"MatchHierarchyLevelEnd",r.isMatchingHierarchyLevelEnd());let l=o.putNewList("ReferencePathElements");for(let t=0;t<r.size();t++){let i=l.addNewStructure();let n=r.get(t);i.putInteger("AxisLevel",n.getAxisLevel());i.putInteger("HierarchyLevel",n.getHierarchyLevel());i.putBoolean("HierarchyLevelExact",n.isExactHierarchyLevel());i.putString("HierarchyLevelName",n.getHierarchyLevelName());this.setTriStateBool(i,"IncludeHeaderBand",n.isIncludeHeaderBand());this.setTriStateBool(i,"IncludeTotalsBand",n.isIncludeTotalsBand());this.setTriStateBool(i,"IncludeSubdrills",n.isIncludeSubDrills());this.setTriStateBool(i,"Expanded",n.isMatchesExpanded());this.setTriStateBool(i,"Leaves",n.isMatchesLeaves());this.setTriStateBool(i,"Totals",n.isMatchesTotals());i.putString("LowerLevelNodeAlignment",e.QInAConverter.lookupLowerLevelNodeAlignmentInA(n.getHierarchyAlignment()));e.QInARepoVisualizationManager.exportStringListOrVariable(n.getMemberNamesRaw(),i,"MemberNames","MemberNamesVariable");e.QInARepoVisualizationManager.exportStringOrVariable(n.getDimensionNameRaw(),i,"DimensionName","DimensionNameVariable");e.QInARepoVisualizationManager.exportStringOrVariable(n.getAttributeNameRaw(),i,"AttributeName","AttributeNameVariable");e.QInARepoVisualizationManager.exportStringOrVariable(n.getFieldNameRaw(),i,"FieldName","FieldNameVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(n.getDimensionTypeRaw(),i,"DimensionType","DimensionTypeVariable");e.QInARepoVisualizationManager.exportStringOrVariable(n.getSemanticTypeRaw(),i,"SemanticType","SemanticTypeVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(n.getPresentationTypeRaw(),i,"PresentationType","PresentationTypeVariable")}}}};e.QInARepoTableCellReferenceScope.prototype.exportComponentWithStructure=function(t,i,n,r){if(e.notNull(n)&&e.notNull(i)){let t=i;e.QInARepoVisualizationManager.exportIntegerOrVariable(t.getMatchOrdinalRaw(),n,"MatchOrdinal","MatchOrdinalVariable");e.QInARepoVisualizationManager.exportIntegerOrVariable(t.getMatchModuloRaw(),n,"MatchModulo","MatchModuloVariable");e.QInARepoVisualizationManager.exportIntegerOrVariable(t.getMatchSkipFirstRaw(),n,"MatchSkipFirst","MatchSkipFirstVariable");e.QInARepoVisualizationManager.exportIntegerOrVariable(t.getMatchSkipLastRaw(),n,"MatchSkipLast","MatchSkipLastVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(t.getMatchRootContentIndicesRaw(),n,"MatchRootContentIndices","MatchRootContentIndicesVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(t.getMatchHeaderSectionStartRaw(),n,"MatchHeaderSectionStart","MatchHeaderSectionStartVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(t.getMatchHeaderSectionEndRaw(),n,"MatchHeaderSectionEnd","MatchHeaderSectionEndVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(t.getMatchHeaderFieldsSectionEndRaw(),n,"MatchHeaderFieldsSectionEnd","MatchHeaderFieldsSectionEndVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(t.getMatchFullHeaderSectionRaw(),n,"MatchHeaderSectionFull","MatchHeaderSectionFullVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(t.getMatchDataSectionStartRaw(),n,"MatchDataSectionStart","MatchDataSectionStartVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(t.getMatchDataSectionEndRaw(),n,"MatchDataSectionEnd","MatchDataSectionEndVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(t.getMatchFullDataSectionRaw(),n,"MatchDataSectionFull","MatchDataSectionFullVariable");this.exportHeaderSectionInfo(t,n);this.exportAxisPaths(t,n)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoTableCellReferenceScope.prototype.exportHeaderSectionInfo=function(t,i){let n=t.getHeaderSectionInfos();if(e.XCollectionUtils.hasElements(n)){let e=i.putNewList("HeaderSectionInfo");for(let t=0;t<n.size();t++){let i=n.get(t);let r=e.addNewStructure();r.putInteger("AxisLevel",i.getAxisLevel());r.putString("HeaderName",i.getHeaderName());r.putBoolean("HeaderDimension",i.isDimensionLevel());r.putBoolean("HeaderAttribute",i.isAttributeLevel());r.putBoolean("HeaderField",i.isFieldLevel());r.putBoolean("HeaderUnits",i.isUniqueUnitsLevel());r.putBoolean("HeaderLevelExact",i.isExactHeaderLevel());this.setTriStateBool(r,"SectionStart",i.isSectionStart());this.setTriStateBool(r,"SectionEnd",i.isSectionEnd())}}};e.QInARepoTableCellReferenceScope.prototype.getComponentType=function(){return e.OlapComponentType.VISUALIZATION_CELL_REFERENCE_SCOPE};e.QInARepoTableCellReferenceScope.prototype.getTriStateBool=function(t,i){let n=e.TriStateBool._DEFAULT;if(t.containsKey(i)){n=t.getBooleanByKey(i)?e.TriStateBool._TRUE:e.TriStateBool._FALSE}return n};e.QInARepoTableCellReferenceScope.prototype.importAxisPaths=function(t,i){let n=i.getListByKey("ReferencePaths");if(e.notNull(n)){t.clearAxisPaths();for(let i=0;i<n.size();i++){let r=t.addNewAxisPath();let o=n.getStructureAt(i);r.setMatchingDimensionSectionStart(this.getTriStateBool(o,"MatchDimensionSectionStart"));r.setMatchingDimensionSectionEnd(this.getTriStateBool(o,"MatchDimensionSectionEnd"));r.setMatchingHierarchyLevelStart(this.getTriStateBool(o,"MatchHierarchyLevelStart"));r.setMatchingHierarchyLevelEnd(this.getTriStateBool(o,"MatchHierarchyLevelEnd"));let l=o.getListByKey("ReferencePathElements");if(e.XCollectionUtils.hasElements(l)){for(let t=0;t<l.size();t++){let i=r.addNewElement();let n=l.getStructureAt(t);i.setAxisLevel(n.getIntegerByKeyExt("AxisLevel",-1));i.setHierarchyLevel(n.getIntegerByKeyExt("HierarchyLevel",-1));i.setExactHierarchyLevel(n.getBooleanByKeyExt("HierarchyLevelExact",false));i.setHierarchyLevelName(n.getStringByKey("HierarchyLevelName"));i.setIncludeHeaderBand(this.getTriStateBool(n,"IncludeHeaderBand"));i.setIncludeTotalsBand(this.getTriStateBool(n,"IncludeTotalsBand"));i.setIncludeSubDrills(this.getTriStateBool(n,"IncludeSubdrills"));i.setMatchesExpanded(this.getTriStateBool(n,"Expanded"));i.setMatchesLeaves(this.getTriStateBool(n,"Leaves"));i.setMatchesTotals(this.getTriStateBool(n,"Totals"));if(n.hasStringByKey("LowerLevelNodeAlignment")){i.setHierarchyAlignment(e.QInAConverter.lookupLowerLevelNodeAlignment(n.getStringByKey("LowerLevelNodeAlignment")))}e.QInARepoVisualizationManager.importStringListOrVariable(i.getMemberNamesRaw(),n,"MemberNames","MemberNamesVariable");e.QInARepoVisualizationManager.importStringOrVariable(i.getDimensionNameRaw(),n,"DimensionName","DimensionNameVariable");e.QInARepoVisualizationManager.importStringOrVariable(i.getAttributeNameRaw(),n,"AttributeName","AttributeNameVariable");e.QInARepoVisualizationManager.importStringOrVariable(i.getFieldNameRaw(),n,"FieldName","FieldNameVariable");e.QInARepoVisualizationManager.importConstantOrVariable(i.getDimensionTypeRaw(),n,"DimensionType","DimensionTypeVariable",t=>e.XComponentType.lookupComponentType(t));e.QInARepoVisualizationManager.importStringOrVariable(i.getSemanticTypeRaw(),n,"SemanticType","SemanticTypeVariable");e.QInARepoVisualizationManager.importConstantOrVariable(i.getPresentationTypeRaw(),n,"PresentationType","PresentationTypeVariable",t=>e.PresentationType.lookup(t))}}}}};e.QInARepoTableCellReferenceScope.prototype.importComponentWithStructure=function(t,i,n,r,o){if(e.notNull(n)&&e.notNull(i)&&n.getComponentType()===e.OlapComponentType.VISUALIZATION_CELL_REFERENCE_SCOPE){let t=n;e.QInARepoVisualizationManager.importIntegerOrVariable(t.getMatchOrdinalRaw(),i,"MatchOrdinal","MatchOrdinalVariable");e.QInARepoVisualizationManager.importIntegerOrVariable(t.getMatchModuloRaw(),i,"MatchModulo","MatchModuloVariable");e.QInARepoVisualizationManager.importIntegerOrVariable(t.getMatchSkipFirstRaw(),i,"MatchSkipFirst","MatchSkipFirstVariable");e.QInARepoVisualizationManager.importIntegerOrVariable(t.getMatchSkipLastRaw(),i,"MatchSkipLast","MatchSkipLastVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(t.getMatchRootContentIndicesRaw(),i,"MatchRootContentIndices","MatchRootContentIndicesVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(t.getMatchHeaderSectionStartRaw(),i,"MatchHeaderSectionStart","MatchHeaderSectionStartVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(t.getMatchHeaderSectionEndRaw(),i,"MatchHeaderSectionEnd","MatchHeaderSectionEndVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(t.getMatchHeaderFieldsSectionEndRaw(),i,"MatchHeaderFieldsSectionEnd","MatchHeaderFieldsSectionEndVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(t.getMatchFullHeaderSectionRaw(),i,"MatchHeaderSectionFull","MatchHeaderSectionFullVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(t.getMatchDataSectionStartRaw(),i,"MatchDataSectionStart","MatchDataSectionStartVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(t.getMatchDataSectionEndRaw(),i,"MatchDataSectionEnd","MatchDataSectionEndVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(t.getMatchFullDataSectionRaw(),i,"MatchDataSectionFull","MatchDataSectionFullVariable");this.importHeaderReferences(t,i);this.importAxisPaths(t,i)}return n};e.QInARepoTableCellReferenceScope.prototype.importHeaderReferences=function(t,i){let n=i.getListByKey("HeaderSectionInfo");if(e.notNull(n)){t.clearHeaderSectionInfos();for(let e=0;e<n.size();e++){let i=n.getStructureAt(e);let r=t.addNewHeaderSectionInfo();r.setAxisLevel(i.getIntegerByKeyExt("AxisLevel",-1));r.setHeaderName(i.getStringByKey("HeaderName"));r.setDimensionLevel(i.getBooleanByKeyExt("HeaderDimension",false));r.setAttributeLevel(i.getBooleanByKeyExt("HeaderAttribute",false));r.setFieldLevel(i.getBooleanByKeyExt("HeaderField",false));r.setUniqueUnitsLevel(i.getBooleanByKeyExt("HeaderUnits",false));r.setExactHeaderLevel(i.getBooleanByKeyExt("HeaderLevelExact",false));r.setSectionEnd(this.getTriStateBool(i,"SectionEnd"));r.setSectionStart(this.getTriStateBool(i,"SectionStart"))}}};e.QInARepoTableCellReferenceScope.prototype.setTriStateBool=function(t,i,n){if(n===e.TriStateBool._TRUE){t.putBoolean(i,true)}else if(n===e.TriStateBool._FALSE){t.putBoolean(i,false)}};e.QInARepoTableDefinition=function(){};e.QInARepoTableDefinition.prototype=new e.QInARepository;e.QInARepoTableDefinition.prototype._ff_c="QInARepoTableDefinition";e.QInARepoTableDefinition.exportCellTypeRestriction=function(t,i){e.QInARepoTableDefinition.setTriStateBool(i,"Expanded",t.isExpanded());e.QInARepoTableDefinition.setTriStateBool(i,"InHierarchy",t.isInHierarchy());e.QInARepoTableDefinition.setTriStateBool(i,"Totals",t.isInTotalsContext());e.QInARepoTableDefinition.setTriStateBool(i,"Merged",t.isMerged());e.QInARepoTableDefinition.setTriStateBool(i,"RepeatedMemberName",t.isRepeatedMemberName());e.QInARepoTableDefinition.setTriStateBool(i,"DataEntryEnabled",t.isDataEntryEnabled());e.QInARepoTableDefinition.setTriStateBool(i,"Locked",t.isLocked());e.QInARepoTableDefinition.setTriStateBool(i,"VersionEdited",t.isVersionEdited());e.QInARepoTableDefinition.setTriStateBool(i,"DataUpdated",t.isDataUpdated());let n=t.getMatchingCellTypes();if(e.XCollectionUtils.hasElements(n)){let t=i.putNewList("CellTypes");e.XCollectionUtils.forEach(n,i=>{t.addString(e.isNull(i)?null:i.getName())})}};e.QInARepoTableDefinition.exportDataPointStyles=function(t,i){let n=t.getDataPointStyles();if(e.XCollectionUtils.hasElements(n)){let t=i.putNewList("DataPointStyle");for(let i=0;i<n.size();i++){let r=t.addNewStructure();let o=n.get(i);r.putString("Name",o.getName());r.putString("Text",o.getText());e.QInARepoVisualizationManager.exportStringOrVariable(o.getFormattingStyleNameRaw(),r,"Style","StyleVariable");e.QInARepoVisualizationManager.exportStringOrVariable(o.getDataPointCategoryNameRaw(),r,"DataPointCategoryName","DataPointCategoryNameVariable");e.QInARepoVisualizationManager.exportStringOrVariable(o.getDataPointCategoryTextRaw(),r,"DataPointCategoryText","DataPointCategoryTextVariable");e.QInARepoVisualizationManager.exportDataPointContext(o,r)}}};e.QInARepoTableDefinition.exportFormattingStyles=function(t,i){let n=t.getFormattingStyles();if(e.XCollectionUtils.hasElements(n)){let t=i.putNewList("Styles");for(let i=0;i<n.size();i++){let r=n.get(i);let o=t.addNewStructure();o.putString("Name",r.getName());o.putString("Text",r.getText());let l=r.getCellTypeRestrictions();if(e.XCollectionUtils.hasElements(l)){let t=o.putNewList("CellTypeRestrictions");e.XCollectionUtils.forEach(l,i=>{e.QInARepoTableDefinition.exportCellTypeRestriction(i,t.addNewStructure())})}e.QInARepoTableDefinition.exportStyledLine(r.getStyledLineLeft(),o.putNewStructure("LeftLine"));e.QInARepoTableDefinition.exportStyledLine(r.getStyledLineRight(),o.putNewStructure("RightLine"));e.QInARepoTableDefinition.exportStyledLine(r.getStyledLineTop(),o.putNewStructure("TopLine"));e.QInARepoTableDefinition.exportStyledLine(r.getStyledLineBottom(),o.putNewStructure("BottomLine"));e.QInARepoVisualizationManager.exportBooleanOrVariable(r.getWrapRaw(),o,"Wrap","WrapVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(r.getActiveRaw(),o,"Active","ActiveVariable");e.QInARepoVisualizationManager.exportStringOrVariable(r.getFillColorRaw(),o,"FillColor","FillColorVariable");e.QInARepoVisualizationManager.exportDoubleOrVariable(r.getFillAlphaRaw(),o,"FillAlpha","FillAlphaVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(r.getFontBoldRaw(),o,"FontBold","FontBoldVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(r.getFontItalicRaw(),o,"FontItalic","FontItalicVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(r.getFontUnderlineRaw(),o,"FontUnderline","FontUnderlineVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(r.getFontStrikeThroughRaw(),o,"FontStrikeThrough","FontStrikeThroughVariable");e.QInARepoVisualizationManager.exportDoubleOrVariable(r.getFontSizeRaw(),o,"FontSize","FontSizeVariable");e.QInARepoVisualizationManager.exportStringOrVariable(r.getFontFamilyRaw(),o,"FontFamily","FontFamilyVariable");e.QInARepoVisualizationManager.exportStringOrVariable(r.getFontColorRaw(),o,"FontColor","FontColorVariable");e.QInARepoVisualizationManager.exportStringOrVariable(r.getCellChartBarColorRaw(),o,"CellChartBarColor","CellChartBarColorVariable");e.QInARepoVisualizationManager.exportStringOrVariable(r.getCellChartLineColorRaw(),o,"CellChartLineColor","CellChartLineColorVariable");e.QInARepoVisualizationManager.exportStringOrVariable(r.getAlertColorRaw(),o,"AlertColor","AlertColorVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(r.getAlertSymbolRaw(),o,"AlertSymbol","AlertSymbolVariable");e.QInARepoVisualizationManager.exportStringOrVariable(r.getOverrideTextRaw(),o,"OverrideText","OverrideTextVariable");e.QInARepoVisualizationManager.exportStringOrVariable(r.getOverridePlaceholderForFormattedTextRaw(),o,"OverridePlaceholderForFormattedText","OverridePlaceholderForFormattedTextVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(r.getShowFormattedTextRaw(),o,"ShowFormattedText","ShowFormattedTextVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(r.getVerticalAlignmentRaw(),o,"VerticalAlignment","VerticalAlignmentVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(r.getHorizontalAlignmentRaw(),o,"HorizontalAlignment","HorizontalAlignmentVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(r.getBackgroundPatternTypeRaw(),o,"PatternType","PatternTypeVariable");e.QInARepoVisualizationManager.exportStringOrVariable(r.getBackgroundContentRaw(),o,"PatternBackground","PatternBackgroundVariable");o.putInteger("Priority",r.getPriority())}}};e.QInARepoTableDefinition.exportIndexBasedCellDimensions=function(t,i){let n;let r;let o=t.getFixedPixelHeightsForRows();if(e.XCollectionUtils.hasElements(o)){let e=i.putNewList("FixedPixelRowHeights");n=o.getKeysAsIterator();while(n.hasNext()){r=n.next();let t=e.addNewStructure();t.putInteger("Index",r.getInteger());t.putInteger("Height",o.getByKey(r).getInteger())}}let l=t.getFixedPixelWidthsForColumns();if(e.XCollectionUtils.hasElements(l)){let e=i.putNewList("FixedPixelColumnWidths");n=l.getKeysAsIterator();while(n.hasNext()){r=n.next();let t=e.addNewStructure();t.putInteger("Index",r.getInteger());t.putInteger("Width",l.getByKey(r).getInteger())}}};e.QInARepoTableDefinition.exportInsertedTuples=function(t,i,n){if(e.XCollectionUtils.hasElements(t)){let r=i.putNewList(n);for(let i=0;i<t.size();i++){let n=t.get(i);let o=r.addNewStructure();o.putString("Name",n.getName());o.putString("Text",n.getText());e.QInARepoVisualizationManager.exportStringOrVariable(n.getFormattedTextRaw(),o,"FormattedText","FormattedTextVariable");e.QInARepoVisualizationManager.exportIntegerOrVariable(n.getCellHeightRaw(),o,"Height","HeightVariable");e.QInARepoVisualizationManager.exportIntegerOrVariable(n.getCellWidthRaw(),o,"Width","WidthVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(n.getMergedRaw(),o,"MergeCells","MergeCellsVariable");let l=n.getScopedStyleNames();if(e.XCollectionUtils.hasElements(l)){o.putNewList("ScopedStyle").addAllStrings(l)}}}};e.QInARepoTableDefinition.exportLayeredRectangularStyles=function(t,i,n){let r=i.getLayeredRectangularStyles();if(e.XCollectionUtils.hasElements(r)){let e=n.putNewList("LayeredRectangularStyle");for(let i=0;i<r.size();i++){let n=r.get(i);let o=e.addNewStructure();o.putString("Name",n.getName());o.putString("Text",n.getText());o.putString("Style",n.getStyleName());t.exportVisualizationCellReferenceScope(n.getRowsScope(),o.putNewStructure("RowsScope"));t.exportVisualizationCellReferenceScope(n.getColumnsScope(),o.putNewStructure("ColumnsScope"))}}};e.QInARepoTableDefinition.exportPageBreakHandling=function(t,i){if(e.notNull(i)&&i.isSet()){let n=t.putNewStructure("PageBreak");e.QInARepoTableDefinition.putBooleanIfTrue(n,"BreakBefore",i.isBreakBefore());e.QInARepoTableDefinition.putBooleanIfTrue(n,"BreakAfter",i.isBreakAfter());e.QInARepoTableDefinition.putBooleanIfTrue(n,"KeepTogether",i.isKeepTogether())}};e.QInARepoTableDefinition.exportScopedStyles=function(t,i,n){let r=i.getScopedStyles();if(e.XCollectionUtils.hasElements(r)){let e=n.putNewList("ScopedStyle");for(let i=0;i<r.size();i++){let n=r.get(i);let o=e.addNewStructure();o.putString("Name",n.getName());o.putString("Text",n.getText());o.putString("Style",n.getStyleName());t.exportVisualizationCellReferenceScope(n.getOrthogonalRowsScope(),o.putNewStructure("RowsScope"));t.exportVisualizationCellReferenceScope(n.getOrthogonalColumnsScope(),o.putNewStructure("ColumnsScope"))}}};e.QInARepoTableDefinition.exportStyledLine=function(t,i){e.QInARepoVisualizationManager.exportDoubleOrVariable(t.getWidthRaw(),i,"LineWidth","LineWidthVariable");e.QInARepoVisualizationManager.exportStringOrVariable(t.getColorRaw(),i,"LineColor","LineColorVariable");e.QInARepoVisualizationManager.exportStringOrVariable(t.getPatternBackgroundRaw(),i,"PatternBackground","PatternBackgroundVariable");e.QInARepoVisualizationManager.exportDoubleOrVariable(t.getPatternWidthRaw(),i,"PatternWidth","PatternWidthVariable");e.QInARepoVisualizationManager.exportStringOrVariable(t.getPatternColorRaw(),i,"PatternColor","PatternColorVariable");e.QInARepoVisualizationManager.exportStringOrVariable(t.getPatternBorderColorRaw(),i,"PatternBorderColor","PatternBorderColorVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(t.getPatternTypeRaw(),i,"PatternType","PatternTypeVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(t.getLineStyleRaw(),i,"LineStyle","LineStyleVariable");e.QInARepoVisualizationManager.exportDoubleOrVariable(t.getLeftPaddingRaw(),i,"PaddingLeft","PaddingLeftVariable");e.QInARepoVisualizationManager.exportDoubleOrVariable(t.getRightPaddingRaw(),i,"PaddingRight","PaddingRightVariable");e.QInARepoVisualizationManager.exportDoubleOrVariable(t.getTopPaddingRaw(),i,"PaddingTop","PaddingTopVariable");e.QInARepoVisualizationManager.exportDoubleOrVariable(t.getBottomPaddingRaw(),i,"PaddingBottom","PaddingBottomVariable")};e.QInARepoTableDefinition.exportTableDefinition=function(t,i,n){n.putStringNotNullAndNotEmpty("Name",i.getName());n.putStringNotNullAndNotEmpty("Text",i.getText());e.QInARepoTableDefinition.exportViewportPagingSettings(i,n);e.QInARepoTableDefinition.exportFormattingStyles(i,n);e.QInARepoTableDefinition.exportDataPointStyles(i,n);e.QInARepoTableDefinition.exportScopedStyles(t,i,n);e.QInARepoTableDefinition.exportLayeredRectangularStyles(t,i,n);e.QInARepoTableDefinition.exportTableMarkups(t,i,n);e.QInARepoTableDefinition.exportIndexBasedCellDimensions(i,n);e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getStripeDataRowsRaw(),n,"StripeDataRows","StripeDataRowsVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getStripeDataColumnsRaw(),n,"StripeDataColumns","StripeDataColumnsVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getFreezeHeaderRowsRaw(),n,"FreezeHeaderRows","FreezeHeaderRowsVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getFreezeHeaderColumnsRaw(),n,"FreezeHeaderColumns","FreezeHeaderColumnsVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getShowFreezeLinesRaw(),n,"ShowFreezeLines","ShowFreezeLinesVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getShowGridRaw(),n,"ShowGrid","ShowGridVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getShowDimensionTitlesRaw(),n,"ShowDimensionTitles","ShowDimensionTitlesVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(i.getTableHeaderCompactionTypeRaw(),n,"TableHeaderCompactionType","TableHeaderCompactionTypeVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(i.getTableMemberHeaderHandlingRaw(),n,"TableMemberHeaderHandling","TableMemberHeaderHandlingVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getShowCoordinateHeaderRaw(),n,"ShowCoordinateHeader","ShowCoordinateHeaderVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getShowHyperlinksRaw(),n,"ShowHyperlinks","ShowHyperlinksVariable");n.putInteger("FreezeUpToRow",i.getFreezeUpToRow());n.putInteger("FreezeUpToColumn",i.getFreezeUpToColumn());n.putStringNotNullAndNotEmpty("HeaderColor",i.getHeaderColor());n.putStringNotNullAndNotEmpty("TotalLevel6Color",i.getTotalLevel6Color());n.putStringNotNullAndNotEmpty("TotalLevel5Color",i.getTotalLevel5Color());n.putStringNotNullAndNotEmpty("TotalLevel4Color",i.getTotalLevel4Color());n.putStringNotNullAndNotEmpty("TotalLevel3Color",i.getTotalLevel3Color());n.putStringNotNullAndNotEmpty("TotalLevel2Color",i.getTotalLevel2Color());n.putStringNotNullAndNotEmpty("TotalLevel1Color",i.getTotalLevel1Color());n.putStringNotNullAndNotEmpty("TotalLevel0Color",i.getTotalLevel0Color());n.putStringNotNullAndNotEmpty("Title",i.getTitle());e.QInARepoVisualizationManager.exportTableTemplateLinker(t,i.getTemplateLinker(),n);e.QInARepoVisualizationManager.exportVariableHolder(t,i.getVisualizationVariableHolder(),n);e.QInARepoVisualizationManager.exportDataPointVariableContainers(t,i.getDatapointVariableContainers(),n)};e.QInARepoTableDefinition.exportTableMarkups=function(t,i,n){let r=i.getTableMarkups();if(e.XCollectionUtils.hasElements(r)){let i=n.putNewList("TableMarkup");for(let n=0;n<r.size();n++){let o=r.get(n);let l=i.addNewStructure();l.putString("Name",o.getName());l.putString("Text",o.getText());e.QInARepoVisualizationManager.exportIntegerOrVariable(o.getCellHeightRaw(),l,"Height","HeightVariable");e.QInARepoVisualizationManager.exportIntegerOrVariable(o.getCellWidthRaw(),l,"Width","WidthVariable");e.QInARepoVisualizationManager.exportIntegerOrVariable(o.getCellHeightAdditionRaw(),l,"HeightAddition","HeightAdditionVariable");e.QInARepoVisualizationManager.exportIntegerOrVariable(o.getCellWidthAdditionRaw(),l,"WidthAddition","WidthAdditionVariable");e.QInARepoTableDefinition.exportPageBreakHandling(l,o.getPageBreakHandling());l.putInteger("Priority",o.getPriority());let a=o.getScopedStyleNames();if(e.XCollectionUtils.hasElements(a)){l.putNewList("ScopedStyle").addAllStrings(a)}let p=o.getTuplesBefore();e.QInARepoTableDefinition.exportInsertedTuples(p,l,"InsertedTupleBefore");let s=o.getTuplesAfter();e.QInARepoTableDefinition.exportInsertedTuples(s,l,"InsertedTupleAfter");t.exportVisualizationCellReferenceScope(o.getRowsScope(),l.putNewStructure("RowsScope"));t.exportVisualizationCellReferenceScope(o.getColumnsScope(),l.putNewStructure("ColumnsScope"))}}};e.QInARepoTableDefinition.exportViewportPagingSettings=function(t,i){let n=t.getTableViewportPagingSettings();if(e.notNull(n)&&(n.rowPagingActive()||n.columnPagingActive())){let t=i.putNewStructure("ViewportPagingSettings");e.QInARepoTableDefinition.putIntIfGT0(t,"Columns",n.getMaxColumns());e.QInARepoTableDefinition.putIntIfGT0(t,"RecommendedColumn",n.getMaxRecommendedColumns());e.QInARepoTableDefinition.putIntIfGT0(t,"Rows",n.getMaxRows());e.QInARepoTableDefinition.putIntIfGT0(t,"RecommendedRows",n.getMaxRecommendedRows());e.QInARepoTableDefinition.putIntIfGT0(t,"Width",n.getMaxWidth());e.QInARepoTableDefinition.putIntIfGT0(t,"RecommendedWidth",n.getMaxRecommendedWidth());e.QInARepoTableDefinition.putIntIfGT0(t,"Height",n.getMaxHeight());e.QInARepoTableDefinition.putIntIfGT0(t,"RecommendedHeight",n.getMaxRecommendedHeight());e.QInARepoTableDefinition.putIntIfGT0(t,"StartColumne",n.getStartColumn());e.QInARepoTableDefinition.putIntIfGT0(t,"EndColumn",n.getEndColumn());e.QInARepoTableDefinition.putIntIfGT0(t,"StartRow",n.getStartRow());e.QInARepoTableDefinition.putIntIfGT0(t,"EndRow",n.getEndRow());t.putBoolean("RowPageBreakIsBoundary",n.isRowPageBreakIsStylingBoundary());t.putBoolean("ColumnPageBreakIsBoundary",n.isColumnPageBreakIsStylingBoundary())}};e.QInARepoTableDefinition.getTriStateBool=function(t,i){let n=e.TriStateBool._DEFAULT;if(t.containsKey(i)){n=t.getBooleanByKey(i)?e.TriStateBool._TRUE:e.TriStateBool._FALSE}return n};e.QInARepoTableDefinition.importCellTypeRestriction=function(t,i){if(e.notNull(i)){t.setExpanded(e.QInARepoTableDefinition.getTriStateBool(i,"Expanded"));t.setInHierarchy(e.QInARepoTableDefinition.getTriStateBool(i,"InHierarchy"));t.setInTotalsContext(e.QInARepoTableDefinition.getTriStateBool(i,"Totals"));t.setMerged(e.QInARepoTableDefinition.getTriStateBool(i,"Merged"));t.setRepeatedMemberName(e.QInARepoTableDefinition.getTriStateBool(i,"RepeatedMemberName"));t.setDataEntryEnabled(e.QInARepoTableDefinition.getTriStateBool(i,"DataEntryEnabled"));t.setLocked(e.QInARepoTableDefinition.getTriStateBool(i,"Locked"));t.setVersionEdited(e.QInARepoTableDefinition.getTriStateBool(i,"VersionEdited"));t.setDataUpdated(e.QInARepoTableDefinition.getTriStateBool(i,"DataUpdated"));let n=i.getListByKey("CellTypes");if(e.XCollectionUtils.hasElements(n)){e.XStream.of(n).map(e=>e.asString()).filterNullValues().map(t=>e.TableCellType.lookup(t.getString())).filterNullValues().forEach(e=>{t.addCellType(e)})}}};e.QInARepoTableDefinition.importDataPointStyles=function(t,i){let n=i.getListByKey("DataPointStyle");if(e.notNull(n)){t.clearDataPointStyles()}if(e.XCollectionUtils.hasElements(n)){for(let i=0;i<n.size();i++){let r=n.getStructureAt(i);let o=t.addNewDataPointStyle(r.getStringByKey("Name"),r.getStringByKey("Text"));e.QInARepoVisualizationManager.importStringOrVariable(o.getFormattingStyleNameRaw(),r,"Style","StyleVariable");e.QInARepoVisualizationManager.importStringOrVariable(o.getDataPointCategoryNameRaw(),r,"DataPointCategoryName","DataPointCategoryNameVariable");e.QInARepoVisualizationManager.importStringOrVariable(o.getDataPointCategoryTextRaw(),r,"DataPointCategoryText","DataPointCategoryTextVariable");e.QInARepoVisualizationManager.importDataPointContext(o,r)}}};e.QInARepoTableDefinition.importFormattingStyles=function(t,i){let n=i.getListByKey("Styles");if(e.notNull(n)){t.clearFormattingStyles()}if(e.XCollectionUtils.hasElements(n)){for(let i=0;i<n.size();i++){let r=n.getStructureAt(i);let o=r.getStringByKey("Name");let l=r.getStringByKey("Text");let a=t.addNewFormattingStyle(o,l);let p=r.getListByKey("CellTypeRestrictions");if(e.XCollectionUtils.hasElements(p)){e.XCollectionUtils.forEach(p,t=>{e.QInARepoTableDefinition.importCellTypeRestriction(a.addNewCellTypeRestriction(),t.asStructure())})}e.QInARepoVisualizationManager.importBooleanOrVariable(a.getWrapRaw(),r,"Wrap","WrapVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(a.getActiveRaw(),r,"Active","ActiveVariable");e.QInARepoVisualizationManager.importStringOrVariable(a.getAlertColorRaw(),r,"AlertColor","AlertColorVariable");e.QInARepoVisualizationManager.importConstantOrVariable(a.getAlertSymbolRaw(),r,"AlertSymbol","AlertSymbolVariable",t=>e.AlertSymbol.lookup(t));e.QInARepoVisualizationManager.importStringOrVariable(a.getOverrideTextRaw(),r,"OverrideText","OverrideTextVariable");e.QInARepoVisualizationManager.importStringOrVariable(a.getOverridePlaceholderForFormattedTextRaw(),r,"OverridePlaceholderForFormattedText","OverridePlaceholderForFormattedTextVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(a.getShowFormattedTextRaw(),r,"ShowFormattedText","ShowFormattedTextVariable");e.QInARepoVisualizationManager.importStringOrVariable(a.getFillColorRaw(),r,"FillColor","FillColorVariable");e.QInARepoVisualizationManager.importDoubleOrVariable(a.getFillAlphaRaw(),r,"FillAlpha","FillAlphaVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(a.getFontBoldRaw(),r,"FontBold","FontBoldVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(a.getFontItalicRaw(),r,"FontItalic","FontItalicVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(a.getFontUnderlineRaw(),r,"FontUnderline","FontUnderlineVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(a.getFontStrikeThroughRaw(),r,"FontStrikeThrough","FontStrikeThroughVariable");e.QInARepoVisualizationManager.importDoubleOrVariable(a.getFontSizeRaw(),r,"FontSize","FontSizeVariable");e.QInARepoVisualizationManager.importStringOrVariable(a.getFontFamilyRaw(),r,"FontFamily","FontFamilyVariable");e.QInARepoVisualizationManager.importStringOrVariable(a.getFontColorRaw(),r,"FontColor","FontColorVariable");e.QInARepoVisualizationManager.importStringOrVariable(a.getCellChartBarColorRaw(),r,"CellChartBarColor","CellChartBarColorVariable");e.QInARepoVisualizationManager.importStringOrVariable(a.getCellChartLineColorRaw(),r,"CellChartLineColor","CellChartLineColorVariable");e.QInARepoVisualizationManager.importStringOrVariable(a.getBackgroundContentRaw(),r,"PatternBackground","PatternBackgroundVariable");e.QInARepoVisualizationManager.importConstantOrVariable(a.getVerticalAlignmentRaw(),r,"VerticalAlignment","VerticalAlignmentVariable",t=>e.CellAlignmentVertical.lookup(t));e.QInARepoVisualizationManager.importConstantOrVariable(a.getHorizontalAlignmentRaw(),r,"HorizontalAlignment","HorizontalAlignmentVariable",t=>e.CellAlignmentHorizontal.lookup(t));e.QInARepoVisualizationManager.importConstantOrVariable(a.getBackgroundPatternTypeRaw(),r,"PatternType","PatternTypeVariable",t=>e.BackgroundPatternType.lookup(t));e.QInARepoTableDefinition.importStyledLine(a.getStyledLineLeft(),r.getStructureByKey("LeftLine"));e.QInARepoTableDefinition.importStyledLine(a.getStyledLineRight(),r.getStructureByKey("RightLine"));e.QInARepoTableDefinition.importStyledLine(a.getStyledLineTop(),r.getStructureByKey("TopLine"));e.QInARepoTableDefinition.importStyledLine(a.getStyledLineBottom(),r.getStructureByKey("BottomLine"));a.setPriority(r.getIntegerByKey("Priority"))}}};e.QInARepoTableDefinition.importIndexBasedCellDimensions=function(t,i){let n;let r=i.getListByKey("FixedPixelRowHeights");if(e.XCollectionUtils.hasElements(r)){t.clearFixedPixelRowHeights();for(n=0;n<r.size();n++){let e=r.getStructureAt(n);t.setFixedPixelHeightForRow(e.getIntegerByKey("Index"),e.getIntegerByKey("Height"))}}let o=i.getListByKey("FixedPixelColumnWidths");if(e.XCollectionUtils.hasElements(o)){t.clearFixedPixelColumnWidths();for(n=0;n<o.size();n++){let e=o.getStructureAt(n);t.setFixedPixelWidthForColumn(e.getIntegerByKey("Index"),e.getIntegerByKey("Width"))}}};e.QInARepoTableDefinition.importInsertedTuples=function(t,i,n){if(e.notNull(t)){i();for(let i=0;i<t.size();i++){let r=t.getStructureAt(i);let o=n(e.XStringValue.create(r.getStringByKey("Name")),e.XStringValue.create(r.getStringByKey("Text")));e.QInARepoVisualizationManager.importBooleanOrVariable(o.getMergedRaw(),r,"MergeCells","MergeCellsVariable");e.QInARepoVisualizationManager.importIntegerOrVariable(o.getCellHeightRaw(),r,"Height","HeightVariable");e.QInARepoVisualizationManager.importIntegerOrVariable(o.getCellWidthRaw(),r,"Width","WidthVariable");e.QInARepoVisualizationManager.importStringOrVariable(o.getFormattedTextRaw(),r,"FormattedText","FormattedTextVariable");let l=r.getListByKey("ScopedStyle");if(e.notNull(l)){e.XCollectionUtils.forEach(l,e=>{o.addScopedStyleName(e.asString().getString())})}}}};e.QInARepoTableDefinition.importLayeredRectangularStyles=function(t,i,n){let r=n.getListByKey("LayeredRectangularStyle");if(e.notNull(r)){i.clearLayeredRectangularStyles()}if(e.XCollectionUtils.hasElements(r)){for(let e=0;e<r.size();e++){let n=r.getStructureAt(e);let o=i.addNewLayeredRectangularStyle(n.getStringByKey("Name"),n.getStringByKey("Text"));o.setStyleName(n.getStringByKey("Style"));t.importVisualizationCellReferenceScope(n.getStructureByKey("ColumnsScope"),o.getColumnsScope(),i);t.importVisualizationCellReferenceScope(n.getStructureByKey("RowsScope"),o.getRowsScope(),i)}}};e.QInARepoTableDefinition.importPageBreakHandling=function(t,i){if(e.notNull(t)){i.setBreakAfter(t.getBooleanByKeyExt("BreakAfter",false));i.setBreakBefore(t.getBooleanByKeyExt("BreakBefore",false));i.setKeepTogether(t.getBooleanByKeyExt("KeepTogether",false))}};e.QInARepoTableDefinition.importScopedStyles=function(t,i,n){let r=n.getListByKey("ScopedStyle");if(e.notNull(r)){i.clearScopedStyles()}if(e.XCollectionUtils.hasElements(r)){for(let e=0;e<r.size();e++){let n=r.getStructureAt(e);let o=i.addNewScopedStyle(n.getStringByKey("Name"),n.getStringByKey("Text"));o.setStyleName(n.getStringByKey("Style"));t.importVisualizationCellReferenceScope(n.getStructureByKey("ColumnsScope"),o.getOrthogonalColumnsScope(),i);t.importVisualizationCellReferenceScope(n.getStructureByKey("RowsScope"),o.getOrthogonalRowsScope(),i)}}};e.QInARepoTableDefinition.importStyledLine=function(t,i){if(e.notNull(i)){e.QInARepoVisualizationManager.importDoubleOrVariable(t.getWidthRaw(),i,"LineWidth","LineWidthVariable");e.QInARepoVisualizationManager.importStringOrVariable(t.getColorRaw(),i,"LineColor","LineColorVariable");e.QInARepoVisualizationManager.importStringOrVariable(t.getPatternBackgroundRaw(),i,"PatternBackground","PatternBackgroundVariable");e.QInARepoVisualizationManager.importDoubleOrVariable(t.getPatternWidthRaw(),i,"PatternWidth","PatternWidthVariable");e.QInARepoVisualizationManager.importStringOrVariable(t.getPatternColorRaw(),i,"PatternColor","PatternColorVariable");e.QInARepoVisualizationManager.importStringOrVariable(t.getPatternBorderColorRaw(),i,"PatternBorderColor","PatternBorderColorVariable");e.QInARepoVisualizationManager.importConstantOrVariable(t.getPatternTypeRaw(),i,"PatternType","PatternTypeVariable",t=>e.BackgroundPatternType.lookup(t));e.QInARepoVisualizationManager.importConstantOrVariable(t.getLineStyleRaw(),i,"LineStyle","LineStyleVariable",t=>e.TableLineStyle.lookup(t));e.QInARepoVisualizationManager.importDoubleOrVariable(t.getLeftPaddingRaw(),i,"PaddingLeft","PaddingLeftVariable");e.QInARepoVisualizationManager.importDoubleOrVariable(t.getRightPaddingRaw(),i,"PaddingRight","PaddingRightVariable");e.QInARepoVisualizationManager.importDoubleOrVariable(t.getTopPaddingRaw(),i,"PaddingTop","PaddingTopVariable");e.QInARepoVisualizationManager.importDoubleOrVariable(t.getBottomPaddingRaw(),i,"PaddingBottom","PaddingBottomVariable")}};e.QInARepoTableDefinition.importTableDefinition=function(t,i,n,r){if(n.getName()===null){n.setName(i.getStringByKey("Name"))}if(n.getText()===null){n.setText(i.getStringByKey("Text"))}e.QInARepoTableDefinition.importFormattingStyles(n,i);e.QInARepoTableDefinition.importDataPointStyles(n,i);e.QInARepoTableDefinition.importScopedStyles(t,n,i);e.QInARepoTableDefinition.importLayeredRectangularStyles(t,n,i);e.QInARepoTableDefinition.importTableMarkups(t,n,i);e.QInARepoTableDefinition.importIndexBasedCellDimensions(n,i);e.QInARepoTableDefinition.importViewportPagingSettings(n,i);e.QInARepoVisualizationManager.importBooleanOrVariable(n.getStripeDataRowsRaw(),i,"StripeDataRows","StripeDataRowsVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(n.getStripeDataColumnsRaw(),i,"StripeDataColumns","StripeDataColumnsVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(n.getFreezeHeaderRowsRaw(),i,"FreezeHeaderRows","FreezeHeaderRowsVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(n.getFreezeHeaderColumnsRaw(),i,"FreezeHeaderColumns","FreezeHeaderColumnsVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(n.getShowFreezeLinesRaw(),i,"ShowFreezeLines","ShowFreezeLinesVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(n.getShowGridRaw(),i,"ShowGrid","ShowGridVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(n.getShowDimensionTitlesRaw(),i,"ShowDimensionTitles","ShowDimensionTitlesVariable");e.QInARepoVisualizationManager.importConstantOrVariable(n.getTableHeaderCompactionTypeRaw(),i,"TableHeaderCompactionType","TableHeaderCompactionTypeVariable",t=>e.TableHeaderCompactionType.lookup(t));e.QInARepoVisualizationManager.importConstantOrVariable(n.getTableMemberHeaderHandlingRaw(),i,"TableMemberHeaderHandling","TableMemberHeaderHandlingVariable",t=>e.TableMemberHeaderHandling.lookup(t));e.QInARepoVisualizationManager.importBooleanOrVariable(n.getShowCoordinateHeaderRaw(),i,"ShowCoordinateHeader","ShowCoordinateHeaderVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(n.getShowHyperlinksRaw(),i,"ShowHyperlinks","ShowHyperlinksVariable");n.setFreezeUpToRow(i.getIntegerByKeyExt("FreezeUpToRow",-1));n.setFreezeUpToColumn(i.getIntegerByKeyExt("FreezeUpToColumn",-1));if(i.getBooleanByKey("ShowRepetitiveMemberNames")){n.setRepetitiveMemberNames(true)}if(i.getBooleanByKey("MergeRepetitiveMemberCells")){n.setMergeRepetitiveMemberCells(true)}n.setHeaderColor(i.getStringByKey("HeaderColor"));n.setTotalLevel6Color(i.getStringByKey("TotalLevel6Color"));n.setTotalLevel5Color(i.getStringByKey("TotalLevel5Color"));n.setTotalLevel4Color(i.getStringByKey("TotalLevel4Color"));n.setTotalLevel3Color(i.getStringByKey("TotalLevel3Color"));n.setTotalLevel2Color(i.getStringByKey("TotalLevel2Color"));n.setTotalLevel1Color(i.getStringByKey("TotalLevel1Color"));n.setTotalLevel0Color(i.getStringByKey("TotalLevel0Color"));n.setTitle(i.getStringByKey("Title"));e.QInARepoVisualizationManager.importTableTemplateLinker(t,n.getTemplateLinker(),i);e.QInARepoVisualizationManager.importVariableHolder(t,n.getVisualizationVariableHolder(),i.getListByKey("Variables"),r);e.QInARepoVisualizationManager.importDatapointVariableContainers(t,n,i,r)};e.QInARepoTableDefinition.importTableMarkups=function(t,i,n){let r=n.getListByKey("TableMarkup");if(e.notNull(r)){i.clearTableMarkups()}if(e.XCollectionUtils.hasElements(r)){for(let n=0;n<r.size();n++){let o=r.getStructureAt(n);let l=i.addNewTableMarkup(o.getStringByKey("Name"),o.getStringByKey("Text"));e.QInARepoTableDefinition.importPageBreakHandling(o.getStructureByKey("PageBreak"),l.getPageBreakHandling());e.QInARepoVisualizationManager.importBooleanOrVariable(l.getHideRaw(),o,"Hidden","HiddenVariable");e.QInARepoVisualizationManager.importIntegerOrVariable(l.getCellHeightRaw(),o,"Height","HeightVariable");e.QInARepoVisualizationManager.importIntegerOrVariable(l.getCellWidthRaw(),o,"Width","WidthVariable");e.QInARepoVisualizationManager.importIntegerOrVariable(l.getCellHeightAdditionRaw(),o,"HeightAddition","HeightAdditionVariable");e.QInARepoVisualizationManager.importIntegerOrVariable(l.getCellWidthAdditionRaw(),o,"WidthAddition","WidthAdditionVariable");l.setPriority(o.getIntegerByKey("Priority"));t.importVisualizationCellReferenceScope(o.getStructureByKey("RowsScope"),l.getRowsScope(),i);t.importVisualizationCellReferenceScope(o.getStructureByKey("ColumnsScope"),l.getColumnsScope(),i);let a=o.getListByKey("ScopedStyle");if(e.notNull(a)){l.clearScopedStyles();e.XCollectionUtils.forEach(a,e=>{l.addScopedStyleName(e.asString().getString())})}let p=o.getListByKey("InsertedTupleBefore");e.QInARepoTableDefinition.importInsertedTuples(p,()=>{l.clearTuplesBefore()},(e,t)=>l.addNewTupleBefore(e.getString(),t.getString()));let s=o.getListByKey("InsertedTupleAfter");e.QInARepoTableDefinition.importInsertedTuples(s,()=>{l.clearTuplesAfter()},(e,t)=>l.addNewTuplesAfter(e.getString(),t.getString()))}}};e.QInARepoTableDefinition.importViewportPagingSettings=function(t,i){if(e.notNull(i)&&i.containsKey("ViewportPagingSettings")){let e=i.getStructureByKey("ViewportPagingSettings");let n=t.getTableViewportPagingSettings();n.setMaxColumns(e.getIntegerByKeyExt("Columns",0));n.setMaxRecommendedColumns(e.getIntegerByKeyExt("RecommendedColumn",0));n.setMaxRows(e.getIntegerByKeyExt("Rows",0));n.setMaxRecommendedRows(e.getIntegerByKeyExt("RecommendedRows",0));n.setMaxWidth(e.getIntegerByKeyExt("Width",0));n.setMaxRecommendedWidth(e.getIntegerByKeyExt("RecommendedWidth",0));n.setMaxHeight(e.getIntegerByKeyExt("Height",0));n.setMaxRecommendedHeight(e.getIntegerByKeyExt("RecommendedHeight",0));n.setStartColumn(e.getIntegerByKeyExt("StartColumne",0));n.setEndColumn(e.getIntegerByKeyExt("EndColumn",0));n.setStartRow(e.getIntegerByKeyExt("StartRow",0));n.setEndRow(e.getIntegerByKeyExt("EndRow",0));n.setRowPageBreakIsStylingBoundary(e.getBooleanByKeyExt("RowPageBreakIsBoundary",true));n.setColumnPageBreakIsStylingBoundary(e.getBooleanByKeyExt("ColumnPageBreakIsBoundary",true))}};e.QInARepoTableDefinition.putBooleanIfTrue=function(e,t,i){if(i){e.putBoolean(t,true)}};e.QInARepoTableDefinition.putIntIfGT0=function(e,t,i){if(i>0){e.putInteger(t,i)}};e.QInARepoTableDefinition.setTriStateBool=function(t,i,n){if(n===e.TriStateBool._TRUE){t.putBoolean(i,true)}else if(n===e.TriStateBool._FALSE){t.putBoolean(i,false)}};e.QInARepoTableDefinition.prototype.exportComponentWithStructure=function(t,i,n,r){if(e.notNull(n)&&e.notNull(i)){let r=i;e.QInARepoTableDefinition.exportTableDefinition(t,r,n)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoTableDefinition.prototype.getComponentType=function(){return e.OlapComponentType.VISUALIZATION_TABLE_DEFINITION};e.QInARepoTableDefinition.prototype.getTagName=function(){return"TableDefinition"};e.QInARepoTableDefinition.prototype.importComponentWithStructure=function(t,i,n,r,o){if(e.notNull(n)&&e.notNull(i)&&n.getComponentType()===e.OlapComponentType.VISUALIZATION_TABLE_DEFINITION){let r=n;e.QInARepoTableDefinition.importTableDefinition(t,i,r,o)}return n};e.QInARepoVisualizationManager=function(){};e.QInARepoVisualizationManager.prototype=new e.QInARepository;e.QInARepoVisualizationManager.prototype._ff_c="QInARepoVisualizationManager";e.QInARepoVisualizationManager.exportAxisPathsElements=function(t,i){if(e.XCollectionUtils.hasElements(t)){let n=i.putNewList("ReferencePathElements");for(let i=0;i<t.size();i++){let r=t.get(i);let o=n.addNewStructure();o.putInteger("AxisLevel",r.getAxisLevel());o.putInteger("HierarchyLevel",r.getHierarchyLevel());o.putBoolean("HierarchyLevelExact",r.isExactHierarchyLevel());o.putString("HierarchyLevelName",r.getHierarchyLevelName());e.QInARepoVisualizationManager.setTriStateBool(o,"IncludeHeaderBand",r.isIncludeHeaderBand());e.QInARepoVisualizationManager.setTriStateBool(o,"IncludeTotalsBand",r.isIncludeTotalsBand());e.QInARepoVisualizationManager.setTriStateBool(o,"IncludeSubdrills",r.isIncludeSubDrills());e.QInARepoVisualizationManager.setTriStateBool(o,"Expanded",r.isMatchesExpanded());e.QInARepoVisualizationManager.setTriStateBool(o,"Leaves",r.isMatchesLeaves());e.QInARepoVisualizationManager.setTriStateBool(o,"Totals",r.isMatchesTotals());o.putString("LowerLevelNodeAlignment",e.QInAConverter.lookupLowerLevelNodeAlignmentInA(r.getHierarchyAlignment()));e.QInARepoVisualizationManager.exportStringListOrVariable(r.getMemberNamesRaw(),o,"MemberNames","MemberNamesVariable");e.QInARepoVisualizationManager.exportStringOrVariable(r.getDimensionNameRaw(),o,"DimensionName","DimensionNameVariable");e.QInARepoVisualizationManager.exportStringOrVariable(r.getAttributeNameRaw(),o,"AttributeName","AttributeNameVariable");e.QInARepoVisualizationManager.exportStringOrVariable(r.getFieldNameRaw(),o,"FieldName","FieldNameVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(r.getDimensionTypeRaw(),o,"DimensionType","DimensionTypeVariable");e.QInARepoVisualizationManager.exportStringOrVariable(r.getSemanticTypeRaw(),o,"SemanticType","SemanticTypeVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(r.getPresentationTypeRaw(),o,"PresentationType","PresentationTypeVariable")}}};e.QInARepoVisualizationManager.exportBooleanOrVariable=function(e,t,i,n){if(e.isFixedValue()){t.putBoolean(i,e.getBoolean())}else if(e.isVariable()){t.putStringNotNullAndNotEmpty(n,e.getVariableName())}};e.QInARepoVisualizationManager.exportChartTemplateLinker=function(t,i,n){let r=i.getLinkedDefinitionNames();if(e.XCollectionUtils.hasElements(r)){let t=n.putNewList("LinkedDefinitionNames");e.XCollectionUtils.forEach(r.getKeysAsReadOnlyList(),e=>{let i=t.addNewStructure();i.putString("Key",e);i.putString("Name",r.getByKey(e))})}let o=i.getLinkedDefinitions();if(e.XCollectionUtils.hasElements(o)){let i=n.putNewList("LinkedStylings");e.XCollectionUtils.forEach(o.getKeysAsReadOnlyList(),e=>{let n=i.addNewStructure();n.putString("Key",e);t.exportVisualizationChartStyle(o.getByKey(e),n.putNewStructure("ChartStyle"))})}};e.QInARepoVisualizationManager.exportConstantListOrVariable=function(t,i,n,r){if(t.isFixedValue()){let r=i.putNewList(n);e.XCollectionUtils.forEach(t.getFixedValues(),e=>{r.addString(e.getName())})}else if(t.isVariable()){i.putStringNotNullAndNotEmpty(r,t.getVariableName())}};e.QInARepoVisualizationManager.exportConstantOrVariable=function(e,t,i,n){if(e.isFixedValue()){t.putStringNotNullAndNotEmpty(i,e.getFixedValue().getName())}else if(e.isVariable()){t.putStringNotNullAndNotEmpty(n,e.getVariableName())}};e.QInARepoVisualizationManager.exportDataPointContext=function(t,i){if(t.isUnmatchedTags()){i.putBoolean("TagsUnmatched",true)}else if(e.XCollectionUtils.hasElements(t.getTags())){let n=i.putNewList("Tags");e.XCollectionUtils.forEach(t.getTags(),e=>{n.addString(e)})}if(t.isUnmatchedPathElements()){i.putBoolean("ReferencePathElementsUnmatched",true)}else{e.QInARepoVisualizationManager.exportAxisPathsElements(t.getPathElements(),i)}if(t.isUnmatchedExceptions()){i.putBoolean("ExceptionsUnmatched",true)}else{i.putString("ExceptionName",t.getExceptionName())}if(t.isUnmatchedAlertLevels()){i.putBoolean("AlertLevelsUnmatched",true)}else{if(t.getAlertLevelMin()!==null){i.putInteger("AlertLevelMin",t.getAlertLevelMin().getLevel())}if(t.getAlertLevelMax()!==null){i.putInteger("AlertLevelMax",t.getAlertLevelMax().getLevel())}}if(t.isUnmatchedValueSigns()){i.putBoolean("ValueSignsUnmatched",true)}else if(t.getValueSign()!==null){i.putString("ValueSign",t.getValueSign().getName())}i.putInteger("Priority",t.getPriority())};e.QInARepoVisualizationManager.exportDataPointVariableContainer=function(t,i,n){n.putString("Name",i.getName());n.putString("Text",i.getText());n.putStringNotNullAndNotEmpty("DataPointCategoryName",i.getDataPointCategoryName());n.putStringNotNullAndNotEmpty("DataPointCategoryText",i.getDataPointCategoryText());e.QInARepoVisualizationManager.exportVariableHolder(t,i.getVariableHolder(),n);e.QInARepoVisualizationManager.exportDataPointContext(i,n)};e.QInARepoVisualizationManager.exportDataPointVariableContainers=function(t,i,n){if(e.XCollectionUtils.hasElements(i)){let r=n.putNewList("DataPointVariables");e.XCollectionUtils.forEach(i,i=>{e.QInARepoVisualizationManager.exportDataPointVariableContainer(t,i,r.addNewStructure())})}};e.QInARepoVisualizationManager.exportDoubleOrVariable=function(e,t,i,n){if(e.isFixedValue()){t.putDouble(i,e.getDouble())}else if(e.isVariable()){t.putStringNotNullAndNotEmpty(n,e.getVariableName())}};e.QInARepoVisualizationManager.exportIntegerOrVariable=function(e,t,i,n){if(e.isFixedValue()){t.putInteger(i,e.getInteger())}else if(e.isVariable()){t.putStringNotNullAndNotEmpty(n,e.getVariableName())}};e.QInARepoVisualizationManager.exportMemberRestriction=function(t,i){if(e.XCollectionUtils.hasElements(i)){e.XCollectionUtils.forEach(i.getKeysAsReadOnlyList(),n=>{let r=t.addNewStructure();r.putString("Dimension",n);let o=r.putNewList("Members");e.XCollectionUtils.forEach(i.getByKey(n),e=>{o.addString(e)})})}};e.QInARepoVisualizationManager.exportSelectionPath=function(t,i){if(e.XCollectionUtils.hasElements(i)){e.XCollectionUtils.forEach(i.getKeysAsReadOnlyList(),e=>{let n=t.addNewStructure();n.putString("Dimension",e);n.putString("Member",i.getByKey(e))})}};e.QInARepoVisualizationManager.exportStringListOrVariable=function(t,i,n,r){if(t.isFixedValue()){let r=i.putNewList(n);e.XCollectionUtils.forEach(t.getFixedStringList(),e=>{r.addString(e)})}else if(t.isVariable()){i.putStringNotNullAndNotEmpty(r,t.getVariableName())}};e.QInARepoVisualizationManager.exportStringOrVariable=function(e,t,i,n){if(e.isFixedValue()){t.putStringNotNullAndNotEmpty(i,e.getString())}else if(e.isVariable()){t.putStringNotNullAndNotEmpty(n,e.getVariableName())}};e.QInARepoVisualizationManager.exportTableTemplateLinker=function(t,i,n){let r=i.getLinkedDefinitionNames();if(e.XCollectionUtils.hasElements(r)){let t=n.putNewList("LinkedDefinitionNames");e.XCollectionUtils.forEach(r.getKeysAsReadOnlyList(),e=>{let i=t.addNewStructure();i.putString("Key",e);i.putString("Name",r.getByKey(e))})}let o=i.getLinkedDefinitions();if(e.XCollectionUtils.hasElements(o)){let i=n.putNewList("LinkedDefinitions");e.XCollectionUtils.forEach(o.getKeysAsReadOnlyList(),n=>{let r=i.addNewStructure();r.putString("Key",n);e.QInARepoTableDefinition.exportTableDefinition(t,o.getByKey(n),r.putNewStructure("TableDefinition"))})}};e.QInARepoVisualizationManager.exportVariableHolder=function(t,i,n){let r=i.getVariables();if(e.XCollectionUtils.hasElements(r)){let i=n.putNewList("Variables");let o=r.size();for(let n=0;n<o;n++){let o=r.get(n);let l=t.exportVariable(o,null);if(e.notNull(o)&&e.notNull(l)&&o.getVariableType().isTypeOf(e.VariableType.SIMPLE_TYPE_VARIABLE)){let t=e.QInAConverter.lookupValueTypeInA(o.getValueType());l.putString("ValueType",t)}i.add(l)}}};e.QInARepoVisualizationManager.exportVisualizationTypeSpecificStyles=function(t,i,n){e.XCollectionUtils.forEach(i,i=>{let r=n.addNewStructure();r.putStringNotNull("Type",e.QInAConverter.lookupComponentTypeInA(i.getVisualizationType()));let o=i.getMatchingChartTypes();if(e.XCollectionUtils.hasElements(o)){let t=r.putNewList("ChartTypes");e.XCollectionUtils.forEach(o,e=>{t.addString(e.getName())})}e.QInARepoVisualizationManager.exportVariableHolder(t,i.getVisualizationVariableHolder(),r);e.QInARepoVisualizationManager.exportDataPointVariableContainers(t,i.getDatapointVariableContainers(),r);e.QInARepoVisualizationManager.exportChartTemplateLinker(t,i.getChartTemplateLinker(),r.getStructureByKey("ChartTemplates"));e.QInARepoVisualizationManager.exportTableTemplateLinker(t,i.getTableTemplateLinker(),r.getStructureByKey("TableTemplates"))})};e.QInARepoVisualizationManager.getTriStateBool=function(t,i){let n=e.TriStateBool._DEFAULT;if(t.containsKey(i)){n=t.getBooleanByKey(i)?e.TriStateBool._TRUE:e.TriStateBool._FALSE}return n};e.QInARepoVisualizationManager.importAxisPaths=function(t,i){let n=i.getListByKey("ReferencePathElements");if(e.notNull(n)){t.clearPathElements();for(let i=0;i<n.size();i++){let r=n.getStructureAt(i);let o=t.addNewPathElement();o.setAxisLevel(r.getIntegerByKeyExt("AxisLevel",-1));o.setHierarchyLevel(r.getIntegerByKeyExt("HierarchyLevel",-1));o.setExactHierarchyLevel(r.getBooleanByKeyExt("HierarchyLevelExact",false));o.setHierarchyLevelName(r.getStringByKey("HierarchyLevelName"));o.setIncludeHeaderBand(e.QInARepoVisualizationManager.getTriStateBool(r,"IncludeHeaderBand"));o.setIncludeTotalsBand(e.QInARepoVisualizationManager.getTriStateBool(r,"IncludeTotalsBand"));o.setIncludeSubDrills(e.QInARepoVisualizationManager.getTriStateBool(r,"IncludeSubdrills"));o.setMatchesExpanded(e.QInARepoVisualizationManager.getTriStateBool(r,"Expanded"));o.setMatchesLeaves(e.QInARepoVisualizationManager.getTriStateBool(r,"Leaves"));o.setMatchesTotals(e.QInARepoVisualizationManager.getTriStateBool(r,"Totals"));if(r.hasStringByKey("LowerLevelNodeAlignment")){o.setHierarchyAlignment(e.QInAConverter.lookupLowerLevelNodeAlignment(r.getStringByKey("LowerLevelNodeAlignment")))}e.QInARepoVisualizationManager.importStringListOrVariable(o.getMemberNamesRaw(),r,"MemberNames","MemberNamesVariable");e.QInARepoVisualizationManager.importStringOrVariable(o.getDimensionNameRaw(),r,"DimensionName","DimensionNameVariable");e.QInARepoVisualizationManager.importStringOrVariable(o.getAttributeNameRaw(),r,"AttributeName","AttributeNameVariable");e.QInARepoVisualizationManager.importStringOrVariable(o.getFieldNameRaw(),r,"FieldName","FieldNameVariable");e.QInARepoVisualizationManager.importConstantOrVariable(o.getDimensionTypeRaw(),r,"DimensionType","DimensionTypeVariable",t=>e.XComponentType.lookupComponentType(t));e.QInARepoVisualizationManager.importStringOrVariable(o.getSemanticTypeRaw(),r,"SemanticType","SemanticTypeVariable");e.QInARepoVisualizationManager.importConstantOrVariable(o.getPresentationTypeRaw(),r,"PresentationType","PresentationTypeVariable",t=>e.PresentationType.lookup(t))}}};e.QInARepoVisualizationManager.importBooleanOrVariable=function(e,t,i,n){if(t.containsKey(i)){e.setBoolean(t.getBooleanByKey(i))}else if(t.containsKey(n)){e.setVariableName(t.getStringByKey(n))}};e.QInARepoVisualizationManager.importChartTemplateLinker=function(t,i,n){if(e.notNull(n)&&n.containsKey("LinkedStylingNames")){let t=n.getListByKey("LinkedStylingNames");e.XCollectionUtils.forEach(t,e=>{let t=e.asStructure();i.putLinkedDefinitionName(t.getStringByKey("Key"),t.getStringByKey("Name"))})}if(e.notNull(n)&&n.containsKey("LinkedStylings")){let r=n.getListByKey("LinkedStylings");e.XCollectionUtils.forEach(r,n=>{let r=n.asStructure();let o=e.QChartStyle.create(i.getContext(),null);t.importVisualizationChartStyle(r.getStructureByKey("ChartStyle"),o,null);i.putLinkedDefinition(r.getStringByKey("Key"),o)})}};e.QInARepoVisualizationManager.importConstantListOrVariable=function(t,i,n,r,o){if(i.containsKey(n)){e.XCollectionUtils.forEach(i.getListByKey(n),e=>{t.addFixedValue(o(e.asString().getString()))})}else if(i.containsKey(r)){t.setVariableName(i.getStringByKey(r))}};e.QInARepoVisualizationManager.importConstantOrVariable=function(e,t,i,n,r){if(t.containsKey(i)){e.setFixedValue(r(t.getStringByKey(i)))}else if(t.containsKey(n)){e.setVariableName(t.getStringByKey(n))}};e.QInARepoVisualizationManager.importDataPointContext=function(t,i){if(i.getBooleanByKeyExt("TagsUnmatched",false)){t.setUnmatchedTags()}else{let n=i.getListByKey("Tags");if(e.XCollectionUtils.hasElements(n)){e.XCollectionUtils.forEach(n,e=>{t.addTag(e.asString().getString())})}}if(i.getBooleanByKeyExt("ReferencePathElementsUnmatched",false)){t.setUnmatchedPathElements()}else{e.QInARepoVisualizationManager.importAxisPaths(t,i)}if(i.getBooleanByKeyExt("ExceptionsUnmatched",false)){t.setUnmatchedExceptions()}else{t.setExceptionName(i.getStringByKey("ExceptionName"))}if(i.getBooleanByKeyExt("AlertLevelsUnmatched",false)){t.setUnmatchedAlertLevels()}else{t.setAlertLevelMin(e.QInAConverter.lookupAlertLevel(i.getIntegerByKeyExt("AlertLevelMin",-1)));t.setAlertLevelMax(e.QInAConverter.lookupAlertLevel(i.getIntegerByKeyExt("AlertLevelMax",-1)))}if(i.getBooleanByKeyExt("ValueSignsUnmatched",false)){t.setUnmatchedValueSigns()}else{t.setValueSign(e.ValueSign.get(i.getStringByKey("ValueSign")))}t.setPriority(i.getIntegerByKey("Priority"))};e.QInARepoVisualizationManager.importDatapointVariableContainer=function(t,i,n,r){let o=i.addNewDatapointVariableContainer(n.getStringByKey("Name"),n.getStringByKey("Text"));if(n.hasStringByKey("DataPointCategoryName")){o.setDataPointCategoryName(n.getStringByKey("DataPointCategoryName"))}if(n.hasStringByKey("DataPointCategoryText")){o.setDataPointCategoryText(n.getStringByKey("DataPointCategoryText"))}e.QInARepoVisualizationManager.importVariableHolder(t,o.getVariableHolder(),n.getListByKey("Variables"),r);e.QInARepoVisualizationManager.importDataPointContext(o,n)};e.QInARepoVisualizationManager.importDatapointVariableContainers=function(t,i,n,r){let o=n.getListByKey("DataPointVariables");let l=e.XCollectionUtils.size(o);for(let n=0;n<l;n++){e.QInARepoVisualizationManager.importDatapointVariableContainer(t,i,o.getStructureAt(n),r)}};e.QInARepoVisualizationManager.importDoubleOrVariable=function(e,t,i,n){if(t.containsKey(i)){e.setDouble(t.getDoubleByKey(i))}else if(t.containsKey(n)){e.setVariableName(t.getStringByKey(n))}};e.QInARepoVisualizationManager.importIntegerOrVariable=function(e,t,i,n){if(t.containsKey(i)){e.setInteger(t.getIntegerByKey(i))}else if(t.containsKey(n)){e.setVariableName(t.getStringByKey(n))}};e.QInARepoVisualizationManager.importMemberRestrictions=function(t,i){t.clearSelectionPath();e.XCollectionUtils.forEach(i,i=>{let n=i.asStructure();let r=n.getStringByKey("Dimension");let o=n.getListByKey("Members");if(e.XStringUtils.isNotNullAndNotEmpty(r)&&e.XCollectionUtils.hasElements(o)){e.XCollectionUtils.forEach(o,e=>{t.putMemberNameToRestriction(r,e.asString().getString())})}})};e.QInARepoVisualizationManager.importSelectionPath=function(t,i){t.clearSelectionPath();e.XCollectionUtils.forEach(i,i=>{let n=i.asStructure();let r=n.getStringByKey("Dimension");let o=n.getStringByKey("Member");if(e.XStringUtils.isNotNullAndNotEmpty(r)&&e.XStringUtils.isNotNullAndNotEmpty(o)){t.putSelectionPathElement(r,o)}})};e.QInARepoVisualizationManager.importStringListOrVariable=function(t,i,n,r){if(i.containsKey(n)){e.XCollectionUtils.forEach(i.getListByKey(n),e=>{t.addString(e.asString().getString())})}else if(i.containsKey(r)){t.setVariableName(i.getStringByKey(r))}};e.QInARepoVisualizationManager.importStringOrVariable=function(e,t,i,n){if(t.containsKey(i)){e.setString(t.getStringByKey(i))}else if(t.containsKey(n)){e.setVariableName(t.getStringByKey(n))}};e.QInARepoVisualizationManager.importTableTemplateLinker=function(t,i,n){if(e.notNull(n)&&n.containsKey("LinkedDefinitionNames")){i.clearLinkedDefinitionNames();let t=n.getListByKey("LinkedDefinitionNames");e.XCollectionUtils.forEach(t,e=>{let t=e.asStructure();i.putLinkedDefinitionName(t.getStringByKey("Key"),t.getStringByKey("Name"))})}if(e.notNull(n)&&n.containsKey("LinkedDefinitions")){let r=n.getListByKey("LinkedDefinitions");e.XCollectionUtils.forEach(r,n=>{let r=n.asStructure();let o=e.QTableDefinition.create(i.getContext(),null,null,e.ProtocolBindingType.SAC_TABLE_GRID,e.SemanticBindingType.TABLE);e.QInARepoTableDefinition.importTableDefinition(t,r.getStructureByKey("TableDefinition"),o,i.getContext());i.putLinkedDefinition(r.getStringByKey("Key"),o)})}};e.QInARepoVisualizationManager.importVariableHolder=function(t,i,n,r){i.clearVariables();if(e.notNull(n)){let o=n.size();for(let l=0;l<o;l++){let o=n.getStructureAt(l);let a=o.getStringByKey("Name");let p=o.getStringByKey("Text");let s=i.getVariable(a);if(e.isNull(s)){let t=o.getBooleanByKeyExt("MultipleValues",false)||e.XCollectionUtils.size(e.PrUtils.getListProperty(o,"SimpleBooleanValues"))>1||e.XCollectionUtils.size(e.PrUtils.getListProperty(o,"SimpleNumericValues"))>1||e.XCollectionUtils.size(e.PrUtils.getListProperty(o,"SimpleStringValues"))>1;let n=o.getStringByKey("VariableType");if(e.XStringUtils.isNullOrEmpty(n)){n=o.getStringByKey("CType")}let l=i.getVariableContainerBase();if(e.XString.isEqual("DimensionMemberVariable",n)){s=e.QDimensionMemberVariable.createDimensionMemberVariable(r,l,a,p)}else if(e.XString.isEqual("OptionListVariable",n)){s=e.QSimpleTypeVariable.createOptionListVariable(r,l,a,p,t)}else if(e.XString.isEqual("SimpleTypeVariable",n)){let i=e.PrUtils.getStringValueProperty(o,"ValueType","String");let n=e.QInAConverter.lookupValueType(i);s=e.QSimpleTypeVariable.createSimpleTypeVariable(r,l,n,a,p,t)}i.addVariable(s)}if(e.notNull(s)){let i=s.getVariableType();if(i.isTypeOf(e.VariableType.SIMPLE_TYPE_VARIABLE)){t.importSimpleTypeVariable(o,s,r)}else if(i.isTypeOf(e.VariableType.DIMENSION_MEMBER_VARIABLE)){t.importDimensionMemberVariable(o,s,r)}else if(i.isTypeOf(e.VariableType.OPTION_LIST_VARIABLE)){t.importOptionListVariable(o,s,r)}else{t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate5("The variable '",a,"' of variable type '",i.getName(),"' was not imported correctly"))}s.setInputEnabled(true)}}}};e.QInARepoVisualizationManager.importVisualizationTypeSpecificStyles=function(t,i,n,r){if(e.XCollectionUtils.hasElements(n)){i.clearVisualizationSpecificStyleContainers();e.XCollectionUtils.forEach(n,n=>{if(e.notNull(n)&&n.isStructure()){let o=n.asStructure();let l=i.addNewVisualizationSpecificStyleContainer();l.setVisualizationType(e.QInAConverter.lookupComponentType(o.getStringByKey("Type")));let a=o.getListByKey("ChartTypes");if(e.XCollectionUtils.hasElements(a)){e.XCollectionUtils.forEach(a,t=>{if(e.notNull(t)&&t.isString()){l.addChartType(e.ChartType.lookup(t.asString().getString()))}})}e.QInARepoVisualizationManager.importVariableHolder(t,l.getVisualizationVariableHolder(),o.getListByKey("Variables"),r);e.QInARepoVisualizationManager.importDatapointVariableContainers(t,l,o,r);e.QInARepoVisualizationManager.importChartTemplateLinker(t,l.getChartTemplateLinker(),o.getStructureByKey("ChartTemplates"));e.QInARepoVisualizationManager.importTableTemplateLinker(t,l.getTableTemplateLinker(),o.getStructureByKey("TableTemplates"))}})}};e.QInARepoVisualizationManager.setTriStateBool=function(t,i,n){if(n===e.TriStateBool._TRUE){t.putBoolean(i,true)}else if(n===e.TriStateBool._FALSE){t.putBoolean(i,false)}};e.QInARepoVisualizationManager.prototype.exportComponentWithList=function(t,i,n){let r=null;let o=i;let l=o.getVisualizationDefinitions();if(e.XCollectionUtils.hasElements(l)){r=e.PrFactory.createList();for(let e=0;e<l.size();e++){let i=l.get(e);if(this.exportVisualizationDefinition(o,i)){let e=r.addNewStructure();e.putString("Name",i.getName());e.putString("ProtocolBindingType",i.getProtocolBindingType().getName());e.putString("SemanticBindingType",i.getSemanticBindingType().getName());t.exportVisualizationDefinition(i,e)}}}return r};e.QInARepoVisualizationManager.prototype.exportComponentWithStructure=function(t,i,n,r){if(e.notNull(i)&&i.getOlapComponentType()===e.OlapComponentType.VISUALIZATION_MANAGER){let o=this.exportComponentWithList(t,i,r);if(e.XCollectionUtils.hasElements(o)){n.put("Elements",o);let r=i;let l=r.getCurrentActiveVisualizationDefinition();if(e.notNull(l)){n.putStringNotNull("ActiveVisualizationDefinition",l.getName())}e.QInARepoVisualizationManager.exportVariableHolder(t,r.getVisualizationVariableHolder(),n);e.QInARepoVisualizationManager.exportDataPointVariableContainers(t,r.getDatapointVariableContainers(),n);if(!r.getChartTemplateLinker().isEmpty()){e.QInARepoVisualizationManager.exportChartTemplateLinker(t,r.getChartTemplateLinker(),n.putNewStructure("ChartTemplates"))}if(!r.getTableTemplateLinker().isEmpty()){e.QInARepoVisualizationManager.exportTableTemplateLinker(t,r.getTableTemplateLinker(),n.putNewStructure("TableTemplates"))}if(!r.getVisualizationSpecificStyleContainers().isEmpty()){e.QInARepoVisualizationManager.exportVisualizationTypeSpecificStyles(t,r.getVisualizationSpecificStyleContainers(),n.putNewList("TypeSpecificStyles"))}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoVisualizationManager.prototype.exportVisualizationDefinition=function(t,i){let n=i.getSession().hasFeature(e.FeatureToggleOlap.CHARTING_PHASE_3);let r=i.getSemanticBindingType()===e.SemanticBindingType.TABLE;let o=i===t.getCurrentActiveVisualizationDefinition();return!n||r||o};e.QInARepoVisualizationManager.prototype.getComponentType=function(){return e.OlapComponentType.VISUALIZATION_MANAGER};e.QInARepoVisualizationManager.prototype.getTagName=function(){return"VisualizationManager"};e.QInARepoVisualizationManager.prototype.importComponentWithList=function(t,i,n,r,o){let l=n;l.setRepoSerializationActive(true);for(let n=0;n<i.size();n++){let r=i.getStructureAt(n);let o=r.getStringByKey("Name");let a=e.QInAConverter.lookupProtocolBindingType(r.getStringByKey("ProtocolBindingType"));let p=e.QInAConverter.lookupSemanticBindingType(r.getStringByKey("SemanticBindingType"));let s=l.getOrCreateVisualisationDefinition(o,a,p);t.importVisualizationDefinition(r,s)}};e.QInARepoVisualizationManager.prototype.importComponentWithStructure=function(t,i,n,r,o){if(e.notNull(i)&&e.notNull(n)&&n.getOlapComponentType()===e.OlapComponentType.VISUALIZATION_MANAGER){let l=n;let a=l.getViz2QmSynchronizer().getMode();l.getViz2QmSynchronizer().setMode(e.Viz2QmSynchronizationMode.NONE);let p=i.getListByKey("Elements");if(e.XCollectionUtils.hasElements(p)){this.importComponentWithList(t,p,n,r,o)}let s=i.getStringByKey("ActiveVisualizationDefinition");let u=l.getVisualizationDefinitionByName(s);if(e.isNull(u)){if(e.XString.isEqual(s,"chart_setting_BarColumn")){u=l.getVisualizationDefinitionByName("chart_setting_Bar");if(e.isNull(u)){u=l.getVisualizationDefinitionByName("chart_setting_Column")}}if(e.isNull(u)){u=e.XCollectionUtils.findFirst(l.getVisualizationDefinitions(),t=>t.getSemanticBindingType()===e.SemanticBindingType.TABLE)}}l.setCurrentActiveVisualizationDefinition(u);l.getViz2QmSynchronizer().setMode(a);e.QInARepoVisualizationManager.importVariableHolder(t,l.getVisualizationVariableHolder(),i.getListByKey("Variables"),o);e.QInARepoVisualizationManager.importDatapointVariableContainers(t,l,i,o);e.QInARepoVisualizationManager.importChartTemplateLinker(t,l.getChartTemplateLinker(),i.getStructureByKey("ChartTemplates"));e.QInARepoVisualizationManager.importTableTemplateLinker(t,l.getTableTemplateLinker(),i.getStructureByKey("TableTemplates"));e.QInARepoVisualizationManager.importVisualizationTypeSpecificStyles(t,l,i.getListByKey("TypeSpecificStyles"),o)}return n};e.QInARepoVisualizationTemplateManager=function(){};e.QInARepoVisualizationTemplateManager.prototype=new e.QInARepository;e.QInARepoVisualizationTemplateManager.prototype._ff_c="QInARepoVisualizationTemplateManager";e.QInARepoVisualizationTemplateManager.exportChartTemplates=function(t,i,n){let r=e.XCollectionUtils.size(i);for(let e=0;e<r;e++){let r=i.get(e);let o=n.addNewStructure();o.putString("Name",r.getName());o.putString("ActiveTemplate",r.getActiveTemplateName());o.putInteger("Priority",r.getPriority());let l=r.size();if(l>0){let e=o.putNewList("TemplateList");for(let i=0;i<l;i++){let n=r.get(i);t.exportVisualizationChartStyle(n,e.addNewStructure())}}}};e.QInARepoVisualizationTemplateManager.exportTableTemplates=function(t,i,n){let r=e.XCollectionUtils.size(i);for(let o=0;o<r;o++){let r=i.get(o);let l=n.addNewStructure();l.putString("Name",r.getName());l.putString("ActiveTemplate",r.getActiveTemplateName());l.putInteger("Priority",r.getPriority());let a=r.size();if(a>0){let i=l.putNewList("TemplateList");for(let n=0;n<a;n++){let o=r.get(n);e.QInARepoTableDefinition.exportTableDefinition(t,o,i.addNewStructure())}}}};e.QInARepoVisualizationTemplateManager.importChartTemplates=function(t,i,n){let r=e.XCollectionUtils.size(n);for(let o=0;o<r;o++){let r=n.getStructureAt(o);let l=i.addNewChartTemplateList(r.getStringByKey("Name"));l.setActiveTemplateName(r.getStringByKey("ActiveTemplate"));l.setPriority(r.getIntegerByKey("Priority"));let a=r.getListByKey("TemplateList");let p=e.XCollectionUtils.size(a);for(let e=0;e<p;e++){let i=a.getStructureAt(e);t.importVisualizationChartStyle(i,l.addNewTemplate(i.getStringByKey("Name"),i.getStringByKey("Text")),null)}}};e.QInARepoVisualizationTemplateManager.importTableTemplates=function(t,i,n){let r=e.XCollectionUtils.size(n);for(let o=0;o<r;o++){let r=n.getStructureAt(o);let l=i.addNewTableTemplateList(r.getStringByKey("Name"));l.setActiveTemplateName(r.getStringByKey("ActiveTemplate"));l.setPriority(r.getIntegerByKey("Priority"));let a=r.getListByKey("TemplateList");let p=e.XCollectionUtils.size(a);for(let n=0;n<p;n++){let r=a.getStructureAt(n);e.QInARepoTableDefinition.importTableDefinition(t,r,l.addNewTemplate(r.getStringByKey("Name"),r.getStringByKey("Text")),i.getContext())}}};e.QInARepoVisualizationTemplateManager.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;if(!o.isEmpty()){let i=n.putNewStructure("OlapVisualizationTemplateManager");e.QInARepoVisualizationManager.exportDataPointVariableContainers(t,o.getDatapointVariableContainers(),i);e.QInARepoVisualizationManager.exportVariableHolder(t,o.getVisualizationVariableHolder(),n);let r=o.getChartTemplates();if(e.XCollectionUtils.hasElements(r)){e.QInARepoVisualizationTemplateManager.exportChartTemplates(t,r,n.putNewList("ChartTemplates"))}let l=o.getTableTemplates();if(e.XCollectionUtils.hasElements(l)){e.QInARepoVisualizationTemplateManager.exportTableTemplates(t,l,n.putNewList("TableTemplates"))}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoVisualizationTemplateManager.prototype.getComponentType=function(){return e.OlapComponentType.OLAP_VISUALIZATION_TEMPLATE_MANAGER};e.QInARepoVisualizationTemplateManager.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(e.isNull(l)){l=o.getOlapEnv().getVisualizationTemplateManager()}if(e.notNull(l)){e.QInARepoVisualizationManager.importDatapointVariableContainers(t,l,i,l.getContext());e.QInARepoVisualizationManager.importVariableHolder(t,l.getVisualizationVariableHolder(),i.getListByKey("Variables"),o);e.QInARepoVisualizationTemplateManager.importChartTemplates(t,l,i.getListByKey("ChartTemplates"));e.QInARepoVisualizationTemplateManager.importTableTemplates(t,l,i.getListByKey("TableTemplates"))}return l};e.QInARepoChartDefinition=function(){};e.QInARepoChartDefinition.prototype=new e.QInARepository;e.QInARepoChartDefinition.prototype._ff_c="QInARepoChartDefinition";e.QInARepoChartDefinition.exportStyle=function(t,i){if(e.notNull(t)&&e.notNull(i)){i.putString("Name",t.getName());i.putString("Text",t.getText());e.QInARepoVisualizationManager.exportBooleanOrVariable(t.getActiveRaw(),i,"Active","ActiveVariable");e.QInARepoVisualizationManager.exportStringOrVariable(t.getColorRaw(),i,"Color","ColorVariable");e.QInARepoVisualizationManager.exportStringOrVariable(t.getCustomPatternRaw(),i,"PatternCustom","PatternCustomVariable");e.QInARepoVisualizationManager.exportStringOrVariable(t.getCustomShapeRaw(),i,"ShapeCustom","ShapeCustomVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(t.getPatternRaw(),i,"Pattern","PatternVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(t.getShapeRaw(),i,"Shape","ShapeVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(t.getLineStyleRaw(),i,"Line","LineVariable")}};e.QInARepoChartDefinition.importStyle=function(t,i){if(e.notNull(t)&&e.notNull(i)){e.QInARepoVisualizationManager.importBooleanOrVariable(t.getActiveRaw(),i,"Active","ActiveVariable");e.QInARepoVisualizationManager.importStringOrVariable(t.getColorRaw(),i,"Color","ColorVariable");e.QInARepoVisualizationManager.importConstantOrVariable(t.getPatternRaw(),i,"Pattern","PatternVariable",t=>e.BackgroundPatternType.lookup(t));e.QInARepoVisualizationManager.importConstantOrVariable(t.getShapeRaw(),i,"Shape","ShapeVariable",t=>e.ChartPointShape.lookup(t));e.QInARepoVisualizationManager.importConstantOrVariable(t.getLineStyleRaw(),i,"Line","LineVariable",t=>e.ChartLineStyle.lookup(t));e.QInARepoVisualizationManager.importStringOrVariable(t.getCustomPatternRaw(),i,"PatternCustom","PatternCustomVariable");e.QInARepoVisualizationManager.importStringOrVariable(t.getCustomShapeRaw(),i,"ShapeCustom","ShapeCustomVariable")}};e.QInARepoChartDefinition.prototype.exportComponentWithStructure=function(t,i,n,r){if(e.notNull(i)&&e.notNull(n)){let r=i;n.putStringNotNullAndNotEmpty("Title",r.getTitle());let o=r.getKeyFigureDimension();if(e.notNull(o)){n.putStringNotNullAndNotEmpty("KeyFigureDimension",o.getName())}let l=n.putNewStructure("ChartSettings");let a=r.getChartSetting();if(a.isPolar()){l.putBoolean("ChartPolar",true)}if(a.isTimeSeries()){l.putBoolean("ChartTimeSeries",true)}if(a.areYAxisOnSameSide()){l.putBoolean("AllowOverlapYAxes",true)}if(a.getChartOrientation()!==null){l.putString("ChartOrientation",a.getChartOrientation().getName())}if(a.getChartStackingType()!==null){l.putString("ChartStacking",a.getChartStackingType().getName())}if(a.getChartType()!==null){l.putString("ChartType",a.getChartType().getName())}if(a.getChartType2()!==null){l.putString("ChartType2",a.getChartType2().getName())}if(a.getTitle()!==null){l.putString("Title",a.getTitle())}if(a.getSubTitle()!==null){l.putString("SubTitle",a.getSubTitle())}l.putBoolean("HasTitleExpanded",a.hasTitleExpanded());e.QInARepoVisualizationManager.exportChartTemplateLinker(t,a.getTemplateLinker(),l);t.exportVisualizationChartStyle(a.getChartStyle(),l.putNewStructure("ChartStyle"));if(a.isUseColorAxis()){l.putBoolean("UseColorAxis",true)}e.QInARepoChartDefinition.exportStyle(a.getMinColor(),l.putNewStructure("MinColor"));e.QInARepoChartDefinition.exportStyle(a.getMaxColor(),l.putNewStructure("MaxColor"));this.exportDimensionSelection(l.putNewStructure("CategoryDimensions"),a.getCategoryDimensionSelection());this.exportDimensionSelection(l.putNewStructure("GroupingDimensions"),a.getGroupingDimensionSelection());this.exportDimensionSelection(l.putNewStructure("DistributionDimensions"),a.getDistributionDimensionSelection());this.exportDimensionSelection(l.putNewStructure("DefaultStylingDimensions"),a.getDefaultStylingDimensionSelection());let p=a.getStylingDimensionKeys();if(e.XCollectionUtils.hasElements(p)){let t=l.putNewList("StylingDimensions");e.XCollectionUtils.forEach(p,e=>{let i=t.addNewStructure();i.putString("Key",e);this.exportDimensionSelection(i.putNewStructure("StylingDimensions"),a.getStylingDimensionSelection(e))})}let s=l.putNewList("KeyFigureSelections");e.XStream.of(e.VisualizationValueType.getAll()).forEach(t=>{let i=a.getTypedValueSelectionsForType(t);let n=s.addNewStructure();n.putString("VisualizationValueType",t.getName());let r=e.PrList.create();let o=i.getValuesAsReadOnlyList();e.XStream.of(o).forEach(e=>{this.exportKeyFigureSelection(e,r)});n.put("Members",r)});e.QInARepoVisualizationManager.exportVariableHolder(t,r.getVisualizationVariableHolder(),n);e.QInARepoVisualizationManager.exportDataPointVariableContainers(t,r.getDatapointVariableContainers(),n);e.QInARepoVisualizationManager.exportSelectionPath(n.putNewList("Path"),r.getSelectionPath());e.QInARepoVisualizationManager.exportMemberRestriction(n.putNewList("MemberRestrictions"),r.getMemberRestrictions())}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoChartDefinition.prototype.exportDimensionSelection=function(t,i){let n=i.getDimensionNamesInternal();if(e.notNull(n)){t.putNewList("Dimensions").addAllStrings(n)}t.putStringNotNullAndNotEmpty("ColorScheme",i.getColorSchemeKey());if(e.TriStateBool.isExplicitBooleanValue(i.shouldIncludeKeyFigureDimensionInternal())){t.putBoolean("ShouldIncludeKeyFigures",i.shouldIncludeKeyFigureDimensionInternal().getBoolean())}};e.QInARepoChartDefinition.prototype.exportKeyFigureSelection=function(t,i){let n=i.addNewStructure();n.putString("Id",t.getName());let r=t.getDimensionMember();n.putString("DimensionName",r.getDimension().getName());e.QInARepoChartDefinition.exportStyle(t.getStyle(),n);let o=t.getVisualizationValueTypes();if(e.notNull(o)){let i=n.putNewList("NestedKeyFigures");e.XStream.of(o).forEach(n=>{let r=t.getTypedValueSelectionsForType(n);let o=i.addNewStructure();o.putString("VisualizationValueType",n.getName());let l=e.PrList.create();let a=r.getValuesAsReadOnlyList();e.XStream.of(a).forEach(e=>{this.exportKeyFigureSelection(e,l)});o.put("Members",l)})}};e.QInARepoChartDefinition.prototype.getComponentType=function(){return e.OlapComponentType.VISUALIZATION_CHART_DEFINITION};e.QInARepoChartDefinition.prototype.getTagName=function(){return"ChartDefinition"};e.QInARepoChartDefinition.prototype.importComponentWithStructure=function(t,i,n,r,o){if(e.notNull(i)&&e.notNull(n)&&n.getOlapComponentType()===e.OlapComponentType.VISUALIZATION_CHART_DEFINITION){let r=n;r.setTitle(i.getStringByKey("Title"));let l=i.getStringByKey("KeyFigureDimension");let a=r.getQueryModel();let p=a.getDimensionByName(l);r.setKeyFigureDimension(p);let s=i.getStructureByKey("ChartSettings");let u=r.getChartSetting();let g=s.getStringByKey("ChartOrientation");let y=s.getStringByKey("ChartStacking");let m=s.getStringByKey("ChartType");let c=s.getStringByKey("ChartType2");let A=s.getStringByKey("Title");let S=s.getStringByKey("SubTitle");let d=s.getBooleanByKey("HasTitleExpanded");u.setPolar(s.getBooleanByKeyExt("ChartPolar",false));u.setTimeSeries(s.getBooleanByKeyExt("ChartTimeSeries",false));u.setAreYAxisOnSameSide(s.getBooleanByKeyExt("AllowOverlapYAxes",false));u.setChartType(e.ChartType.lookup(m));u.setChartType2(e.ChartType.lookup(c));u.setChartStackingType(e.ChartStackingType.lookup(y));u.setChartOrientation(e.ChartOrientation.lookup(g));u.setUseColorAxis(s.getBooleanByKeyExt("UseColorAxis",false));let I=s.getStructureByKey("MinColor");e.QInARepoChartDefinition.importStyle(u.getMinColor(),I);let f=s.getStructureByKey("MaxColor");e.QInARepoChartDefinition.importStyle(u.getMaxColor(),f);if(u.getChartType()===e.ChartType.BAR_COLUMN&&t.getSession().hasFeature(e.FeatureToggleOlap.CHARTING_PHASE2)){let t=u.getChartOrientation();let i=t===e.ChartOrientation.VERTICAL?e.ChartType.COLUMN:e.ChartType.BAR;u.setChartType(i);if(e.XString.isEqual(r.getName(),e.ChartType.BAR_COLUMN.getName())){let t=r.getName();r.setName(e.XStringUtils.concatenate2("chart_setting_",i.getName()));let n=a.getVisualizationManager();n.removeVisualizationDefinitionByName(t);n.addVisualizationDefinition(r)}}u.setTitle(A);u.setSubTitle(S);u.setHasTitleExpanded(d);this.importDimensionSelection(u.getCategoryDimensionSelection(),s.getStructureByKey("CategoryDimensions"));this.importDimensionSelection(u.getGroupingDimensionSelection(),s.getStructureByKey("GroupingDimensions"));this.importDimensionSelection(u.getDistributionDimensionSelection(),s.getStructureByKey("DistributionDimensions"));this.importDimensionSelection(u.getDefaultStylingDimensionSelection(),s.getStructureByKey("DefaultStylingDimensions"));let N=s.getListByKey("StylingDimensions");if(e.XCollectionUtils.hasElements(N)){e.XCollectionUtils.forEach(N,e=>{this.importDimensionSelection(u.getOrCreateStylingDimensionSelection(e.asStructure().getStringByKey("Key")),e.asStructure().getStructureByKey("StylingDimensions"))})}e.QInARepoVisualizationManager.importChartTemplateLinker(t,u.getTemplateLinker(),i);t.importVisualizationChartStyle(s.getStructureByKey("ChartStyle"),u.getChartStyle(),r);let R=s.getListByKey("KeyFigureSelections");this.importKeyFigureSelections(o,a,r,u,R);e.QInARepoVisualizationManager.importVariableHolder(t,r.getVisualizationVariableHolder(),i.getListByKey("Variables"),o);e.QInARepoVisualizationManager.importDatapointVariableContainers(t,r,i,o);e.QInARepoVisualizationManager.importSelectionPath(r,i.getListByKey("Path"));e.QInARepoVisualizationManager.importMemberRestrictions(r,i.getListByKey("MemberRestrictions"))}return n};e.QInARepoChartDefinition.prototype.importDimensionSelection=function(t,i){if(e.notNull(i)){if(i.containsKey("ShouldIncludeKeyFigures")){t.setShouldIncludeKeyFigureDimension(i.getBooleanByKeyExt("ShouldIncludeKeyFigures",false))}else{t.resetShouldIncludeKeyFigureDimension()}let n=i.getListByKey("Dimensions");if(e.isNull(n)){t.resetDimensionList()}else{t.createEmptyDimensionList();e.XCollectionUtils.forEach(n,e=>{t.addDimensionName(e.asString().getString())})}if(i.hasStringByKey("ColorScheme")){t.setColorSchemeKey(i.getStringByKey("ColorScheme"))}}};e.QInARepoChartDefinition.prototype.importKeyFigureSelections=function(t,i,n,r,o){e.XStream.of(o).forEach(o=>{let l=o;let a=e.VisualizationValueType.lookup(l.getStringByKey("VisualizationValueType"));let p=l.getListByKey("Members");if(e.notNull(p)){r.clearTypedValueSelectionsForType(a);e.XStream.of(p).forEach(o=>{let l;let p=o.asStructure();let s=p.getStringByKey("DimensionName");let u=p.getStringByKey("Id");let g=i.getDimensionByName(s);let y=g.getDimensionMember(u);l=e.QKeyFigureSelection.create(t,y,n,a);let m=l.getStyle();e.QInARepoChartDefinition.importStyle(m,p);if(e.notNull(y)&&!r.hasTypedValueSelectionsForTypeForMember(a,y)){r.addTypedValueSelection(a,l);let n=p.getListByKey("NestedKeyFigures");if(e.XCollectionUtils.hasElements(n)){this.importKeyFigureSelections(t,i,l,l,n)}}})}})};e.QInARepoChartStyle=function(){};e.QInARepoChartStyle.prototype=new e.QInARepository;e.QInARepoChartStyle.prototype._ff_c="QInARepoChartStyle";e.QInARepoChartStyle.exportChartAxisComponent=function(t,i){if(e.notNull(t)&&e.notNull(i)){e.QInARepoVisualizationManager.exportDoubleOrVariable(i.getSizeRaw(),t,"Size","SizeVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getVisibleRaw(),t,"Visible","VisibleVariable")}};e.QInARepoChartStyle.exportChartAxisStyle=function(t,i){if(e.notNull(t)&&e.notNull(i)){e.QInARepoChartStyle.exportChartLabelStyle(t.putNewStructure("DataLabel"),i.getLabelStyle());e.QInARepoChartStyle.exportChartLabelStyle(t.putNewStructure("HeaderLabel"),i.getHeaderStyle());e.QInARepoVisualizationManager.exportStringOrVariable(i.getColorRaw(),t,"AxisColor","AxisColorVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getShowLabelGridsRaw(),t,"ShowLabelGrids","ShowLabelGridsVariable");e.QInARepoChartStyle.exportChartAxisComponent(t.putNewStructure("Line"),i.getLine());e.QInARepoChartStyle.exportChartAxisComponent(t.putNewStructure("Tick"),i.getTick())}};e.QInARepoChartStyle.exportChartLabelStyle=function(t,i){if(e.notNull(t)&&e.notNull(i)){e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getAutoResizeRaw(),t,"AutoResize","AutoResizeVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getAvoidOverlapRaw(),t,"AvoidOverlap","AvoidOverlapVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getShowLabelRaw(),t,"ShowLabel","ShowLabelVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getShowCornerValuesRaw(),t,"ShowCornerValues","ShowCornerValuesVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getShowAbsoluteValuesRaw(),t,"ShowAbsoluteValues","ShowAbsoluteVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getFontBoldRaw(),t,"FontBold","FontBoldVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getFontItalicRaw(),t,"FontItalic","FontItalicVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getFontStrikeThroughRaw(),t,"FontStrikeThrough","FontStrikeThroughVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getFontUnderlineRaw(),t,"FontUnderline","FontUnderlineVariable");e.QInARepoVisualizationManager.exportStringOrVariable(i.getFontFamilyRaw(),t,"FontFamily","FontFamilyVariable");e.QInARepoVisualizationManager.exportStringOrVariable(i.getFontColorRaw(),t,"FontColor","FontColorVariable");e.QInARepoVisualizationManager.exportStringOrVariable(i.getFormatStringRaw(),t,"FormatString","FormatStringVariable");e.QInARepoVisualizationManager.exportStringOrVariable(i.getBackgroundColorRaw(),t,"BackgroundColor","BackgroundColorVariable");e.QInARepoVisualizationManager.exportDoubleOrVariable(i.getFontSizeRaw(),t,"FontSize","FontSizeVariable");e.QInARepoVisualizationManager.exportIntegerOrVariable(i.getRotationRaw(),t,"Rotation","RotationVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(i.getDirectionRaw(),t,"LayoutDirection","LayoutDirectionVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(i.getHorizontalAlignmentRaw(),t,"HorizontalAlignment","HorizontalAlignmentVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(i.getVerticalAlignmentRaw(),t,"VerticalAlignment","VerticalAlignment")}};e.QInARepoChartStyle.exportChartPlotArea=function(t,i){if(e.notNull(t)&&e.notNull(i)){e.QInARepoChartStyle.exportChartLabelStyle(t.putNewStructure("DimensionLabel"),i.getDimensionLabel());e.QInARepoChartStyle.exportChartLabelStyle(t.putNewStructure("DataLabel"),i.getDataLabel());e.QInARepoChartStyle.exportChartLabelStyle(t.putNewStructure("StackColumnLabel"),i.getStackColumnLabel())}};e.QInARepoChartStyle.exportColorScheme=function(t,i){if(e.notNull(t)){e.QInARepoVisualizationManager.exportStringListOrVariable(t.getColorsRaw(),i,"Colors","ColorsVariable");e.QInARepoVisualizationManager.exportConstantListOrVariable(t.getPatternsRaw(),i,"Patterns","PatternsVariable");e.QInARepoVisualizationManager.exportConstantListOrVariable(t.getShapesRaw(),i,"Shapes","ShapesVariable");e.QInARepoVisualizationManager.exportConstantListOrVariable(t.getLineStylesRaw(),i,"Lines","LinesVariable")}};e.QInARepoChartStyle.exportDataPointStyle=function(t,i){i.putString("Name",t.getName());i.putString("Text",t.getText());e.QInARepoVisualizationManager.exportStringOrVariable(t.getChartPointStyleNameRaw(),i,"Style","StyleVariable");e.QInARepoVisualizationManager.exportStringOrVariable(t.getDataPointCategoryNameRaw(),i,"DataPointCategoryName","DataPointCategoryNameVariable");e.QInARepoVisualizationManager.exportStringOrVariable(t.getDataPointCategoryTextRaw(),i,"DataPointCategoryText","DataPointCategoryTextVariable");e.QInARepoVisualizationManager.exportDataPointContext(t,i)};e.QInARepoChartStyle.exportLegendStyle=function(t,i){if(e.notNull(t)&&e.notNull(i)){e.QInARepoVisualizationManager.exportConstantOrVariable(i.getLegendPositionRaw(),t,"LegendPosition","LegendPositionVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(i.getHorizontalAlignmentRaw(),t,"HorizontalAlignment","HorizontalAlignmentVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(i.getVerticalAlignmentRaw(),t,"VerticalAlignment","VerticalAlignmentVariable");e.QInARepoVisualizationManager.exportConstantOrVariable(i.getLayoutDirectionRaw(),t,"LayoutDirection","LayoutDirectionVariable");e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getShowFullLabelRaw(),t,"ShowFullLabel","ShowFullLabelVariable");e.QInARepoChartStyle.exportChartLabelStyle(t.putNewStructure("Label"),i.getLabelStyle());e.QInARepoVisualizationManager.exportBooleanOrVariable(i.getEnabledRaw(),t,"Enabled","EnabledVariable")}};e.QInARepoChartStyle.exportNameText=function(e,t){e.putStringNotNullAndNotEmpty("Name",t.getName());e.putStringNotNullAndNotEmpty("Text",t.getText())};e.QInARepoChartStyle.importAxisStyle=function(t,i){if(e.notNull(t)&&e.notNull(i)){e.QInARepoVisualizationManager.importStringOrVariable(t.getColorRaw(),i,"AxisColor","AxisColorVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(t.getShowLabelGridsRaw(),i,"ShowLabelGrids","ShowLabelGridsVariable");e.QInARepoChartStyle.importChartLabelStyle(t.getHeaderStyle(),i.getStructureByKey("HeaderLabel"));e.QInARepoChartStyle.importChartLabelStyle(t.getLabelStyle(),i.getStructureByKey("DataLabel"));e.QInARepoChartStyle.importChartPlotComponent(t.getTick(),i.getStructureByKey("Tick"));e.QInARepoChartStyle.importChartPlotComponent(t.getLine(),i.getStructureByKey("Line"))}};e.QInARepoChartStyle.importChartLabelStyle=function(t,i){if(e.notNull(t)&&e.notNull(i)){e.QInARepoVisualizationManager.importBooleanOrVariable(t.getAutoResizeRaw(),i,"AutoResize","AutoResizeVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(t.getAvoidOverlapRaw(),i,"AvoidOverlap","AvoidOverlapVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(t.getShowLabelRaw(),i,"ShowLabel","ShowLabelVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(t.getShowCornerValuesRaw(),i,"ShowCornerValues","ShowCornerValuesVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(t.getShowAbsoluteValuesRaw(),i,"ShowAbsoluteValues","ShowAbsoluteVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(t.getFontBoldRaw(),i,"FontBold","FontBoldVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(t.getFontItalicRaw(),i,"FontItalic","FontItalicVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(t.getFontUnderlineRaw(),i,"FontUnderline","FontUnderlineVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(t.getFontStrikeThroughRaw(),i,"FontStrikeThrough","FontStrikeThroughVariable");e.QInARepoVisualizationManager.importDoubleOrVariable(t.getFontSizeRaw(),i,"FontSize","FontSizeVariable");e.QInARepoVisualizationManager.importIntegerOrVariable(t.getRotationRaw(),i,"Rotation","RotationVariable");e.QInARepoVisualizationManager.importStringOrVariable(t.getFontColorRaw(),i,"FontColor","FontColorVariable");e.QInARepoVisualizationManager.importStringOrVariable(t.getFontFamilyRaw(),i,"FontFamily","FontFamilyVariable");e.QInARepoVisualizationManager.importStringOrVariable(t.getBackgroundColorRaw(),i,"BackgroundColor","BackgroundColorVariable");e.QInARepoVisualizationManager.importStringOrVariable(t.getFormatStringRaw(),i,"FormatString","FormatStringVariable");e.QInARepoVisualizationManager.importConstantOrVariable(t.getDirectionRaw(),i,"LayoutDirection","LayoutDirectionVariable",t=>e.LayoutDirection.lookup(t));e.QInARepoVisualizationManager.importConstantOrVariable(t.getHorizontalAlignmentRaw(),i,"HorizontalAlignment","HorizontalAlignmentVariable",t=>e.CellAlignmentHorizontal.lookup(t));e.QInARepoVisualizationManager.importConstantOrVariable(t.getVerticalAlignmentRaw(),i,"VerticalAlignment","VerticalAlignmentVariable",t=>e.CellAlignmentVertical.lookup(t))}};e.QInARepoChartStyle.importChartLegendStyle=function(t,i){if(e.notNull(t)&&e.notNull(i)){e.QInARepoVisualizationManager.importConstantOrVariable(t.getHorizontalAlignmentRaw(),i,"HorizontalAlignment","HorizontalAlignmentVariable",t=>e.CellAlignmentHorizontal.lookup(t));e.QInARepoVisualizationManager.importConstantOrVariable(t.getVerticalAlignmentRaw(),i,"VerticalAlignment","VerticalAlignmentVariable",t=>e.CellAlignmentVertical.lookup(t));e.QInARepoVisualizationManager.importConstantOrVariable(t.getLegendPositionRaw(),i,"LegendPosition","LegendPositionVariable",t=>e.ChartLegendPosition.lookup(t));e.QInARepoVisualizationManager.importConstantOrVariable(t.getLayoutDirectionRaw(),i,"LayoutDirection","LayoutDirectionVariable",t=>e.LayoutDirection.lookup(t));e.QInARepoVisualizationManager.importBooleanOrVariable(t.getShowFullLabelRaw(),i,"ShowFullLabel","ShowFullLabelVariable");e.QInARepoChartStyle.importChartLabelStyle(t.getLabelStyle(),i.getStructureByKey("Label"));e.QInARepoVisualizationManager.importBooleanOrVariable(t.getEnabledRaw(),i,"Enabled","EnabledVariable")}};e.QInARepoChartStyle.importChartPlotArea=function(t,i){if(e.notNull(t)&&e.notNull(i)){e.QInARepoChartStyle.importChartLabelStyle(t.getDataLabel(),i.getStructureByKey("DataLabel"));e.QInARepoChartStyle.importChartLabelStyle(t.getDimensionLabel(),i.getStructureByKey("DimensionLabel"));e.QInARepoChartStyle.importChartLabelStyle(t.getStackColumnLabel(),i.getStructureByKey("StackColumnLabel"))}};e.QInARepoChartStyle.importChartPlotComponent=function(t,i){e.QInARepoVisualizationManager.importDoubleOrVariable(t.getSizeRaw(),i,"Size","SizeVariable");e.QInARepoVisualizationManager.importBooleanOrVariable(t.getVisibleRaw(),i,"Visible","VisibleVariable")};e.QInARepoChartStyle.importColorScheme=function(t,i){if(e.notNull(i)){e.QInARepoVisualizationManager.importStringListOrVariable(t.getColorsRaw(),i,"Colors","ColorsVariable");e.QInARepoVisualizationManager.importConstantListOrVariable(t.getPatternsRaw(),i,"Patterns","PatternsVariable",t=>e.BackgroundPatternType.lookup(t));e.QInARepoVisualizationManager.importConstantListOrVariable(t.getShapesRaw(),i,"Shapes","ShapesVariable",t=>e.ChartPointShape.lookup(t));e.QInARepoVisualizationManager.importConstantListOrVariable(t.getLineStylesRaw(),i,"Lines","LinesVariable",t=>e.ChartLineStyle.lookup(t))}};e.QInARepoChartStyle.importDataPointStyle=function(t,i){e.QInARepoVisualizationManager.importStringOrVariable(t.getChartPointStyleNameRaw(),i,"Style","StyleVariable");e.QInARepoVisualizationManager.importStringOrVariable(t.getDataPointCategoryNameRaw(),i,"DataPointCategoryName","DataPointCategoryNameVariable");e.QInARepoVisualizationManager.importStringOrVariable(t.getDataPointCategoryTextRaw(),i,"DataPointCategoryText","DataPointCategoryTextVariable");e.QInARepoVisualizationManager.importDataPointContext(t,i)};e.QInARepoChartStyle.importNameText=function(e,t){e.setName(t.getStringByKey("Name"));e.setText(t.getStringByKey("Text"))};e.QInARepoChartStyle.prototype.exportComponentWithStructure=function(t,i,n,r){if(e.notNull(i)&&e.notNull(n)){let t=i;e.QInARepoChartStyle.exportNameText(n,t);e.QInARepoChartStyle.exportChartLabelStyle(n.putNewStructure("TitleStyle"),t.getTitleStyle());e.QInARepoChartStyle.exportLegendStyle(n.putNewStructure("Legend"),t.getLegendStyle());e.QInARepoChartStyle.exportChartPlotArea(n.putNewStructure("PlotArea"),t.getPlotArea());e.QInARepoChartStyle.exportChartAxisStyle(n.putNewStructure("Default"),t.getDefaultAxisStyle());e.QInARepoChartStyle.exportChartAxisStyle(n.putNewStructure("CategoryAxis"),t.getCategoryAxisStyle());let r=t.getChartAxisPositions();if(e.XCollectionUtils.hasElements(r)){let i=n.putNewList("PositionAxes");e.XCollectionUtils.forEach(r,n=>{let r=i.addNewStructure();r.putString("Position",n.getName());e.QInARepoChartStyle.exportChartAxisStyle(r,t.getOrCreateChartAxisStyleByPosition(n))})}let o=t.getValueAxisTypes();if(e.XCollectionUtils.hasElements(o)){let i=n.putNewList("ValueAxes");e.XCollectionUtils.forEach(o,n=>{let r=i.addNewStructure();r.putString("VisualizationValueType",n.getName());e.QInARepoChartStyle.exportChartAxisStyle(r,t.getOrCreateValueAxisStyle(n))})}let l=t.getColorSchemeKeys();if(e.XCollectionUtils.hasElements(l)){let i=n.putNewList("ColorSchemes");e.XCollectionUtils.forEach(l,n=>{let r=i.addNewStructure();r.putString("Key",n);e.QInARepoChartStyle.exportColorScheme(t.getOrCreateChartColorScheme(n),r)})}let a=t.getChartPointStyleKeys();if(e.XCollectionUtils.hasElements(a)){let i=n.putNewList("ChartPointStyles");e.XCollectionUtils.forEach(a,n=>{let r=i.addNewStructure();r.putString("Key",n);e.QInARepoChartDefinition.exportStyle(t.getOrCreateChartPointStyle(n,null),r)})}let p=t.getDataPointStyleKeys();if(e.XCollectionUtils.hasElements(p)){let i=n.putNewList("DataPointStyle");e.XCollectionUtils.forEach(p,n=>{let r=i.addNewStructure();r.putString("Key",n);e.QInARepoChartStyle.exportDataPointStyle(t.getOrCreateNewChartDataPointStyle(n,null),r)})}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoChartStyle.prototype.getComponentType=function(){return e.OlapComponentType.VISUALIZATION_CHART_STYLE};e.QInARepoChartStyle.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;if(e.notNull(l)&&e.notNull(i)){e.QInARepoChartStyle.importNameText(l,i);e.QInARepoChartStyle.importChartLabelStyle(l.getTitleStyle(),i.getStructureByKey("TitleStyle"));e.QInARepoChartStyle.importChartLegendStyle(l.getLegendStyle(),i.getStructureByKey("Legend"));e.QInARepoChartStyle.importChartPlotArea(l.getPlotArea(),i.getStructureByKey("PlotArea"));e.QInARepoChartStyle.importAxisStyle(l.getDefaultAxisStyle(),i.getStructureByKey("Default"));e.QInARepoChartStyle.importAxisStyle(l.getCategoryAxisStyle(),i.getStructureByKey("CategoryAxis"));let t;let n;let r;let o=i.getListByKey("ValueAxes");if(e.XCollectionUtils.hasElements(o)){for(t=0;t<o.size();t++){let i=o.getStructureAt(t);let n=e.VisualizationValueType.lookup(i.getStringByKey("VisualizationValueType"));e.QInARepoChartStyle.importAxisStyle(l.getOrCreateValueAxisStyle(n),i)}}let a=i.getListByKey("PositionAxes");if(e.XCollectionUtils.hasElements(a)){for(t=0;t<a.size();t++){let i=a.getStructureAt(t);let n=e.ChartAxisPosition.lookup(i.getStringByKey("Position"));e.QInARepoChartStyle.importAxisStyle(l.getOrCreateChartAxisStyleByPosition(n),i)}}let p=i.getListByKey("ColorSchemes");if(e.XCollectionUtils.hasElements(p)){for(t=0;t<p.size();t++){let i=p.getStructureAt(t);n=i.getStringByKey("Key");e.QInARepoChartStyle.importColorScheme(l.getOrCreateChartColorScheme(n),i)}}let s=i.getListByKey("ChartPointStyles");if(e.XCollectionUtils.hasElements(s)){for(t=0;t<s.size();t++){let i=s.getStructureAt(t);n=i.getStringByKey("Key");r=i.getStringByKey("Text");e.QInARepoChartDefinition.importStyle(l.getOrCreateChartPointStyle(n,r),i)}}let u=i.getListByKey("DataPointStyle");if(e.XCollectionUtils.hasElements(u)){for(t=0;t<u.size();t++){let i=u.getStructureAt(t);n=i.getStringByKey("Key");r=i.getStringByKey("Text");e.QInARepoChartStyle.importDataPointStyle(l.getOrCreateNewChartDataPointStyle(n,r),i)}}}return l};e.QInA=function(){};e.QInA.prototype=new e.MessageManager;e.QInA.prototype._ff_c="QInA";e.QInA.s_lookupByFormat=null;e.QInA.addAllFormats=function(){let t=e.QModelFormat.getAllModelFormats();let i=t.size();for(let n=0;n<i;n++){let i=e.XListOfNameObject.create();let r=t.get(n).getName();e.QInA.s_lookupByFormat.put(r,i)}};e.QInA.addAllPlanningTypes=function(){e.QInA.addType(e.OlapComponentType.PLANNING_MODEL);e.QInA.addType(e.OlapComponentType.PLANNING_ACTION);e.QInA.addType(e.OlapComponentType.PLANNING_MODEL_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_MODEL_CLOSE_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_MODEL_CLEANUP_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_MODEL_REFRESH_ACTIONS_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_MODEL_REFRESH_VERSIONS_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_MODEL_UPDATE_VERSION_PRIVILEGES_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_INIT_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_CLOSE_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_START_ACTION_SEQUENCE_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_END_ACTION_SEQUENCE_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_SET_PARAMETERS_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_SET_TIMEOUT_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_STATE_DESCRIPTIONS_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_UNDO_REDO_COMMAND);e.QInA.addType(e.OlapComponentType.DATA_AREA_COMMAND);e.QInA.addType(e.OlapComponentType.DATA_AREA_COMMAND_CLOSE);e.QInA.addType(e.OlapComponentType.DATA_AREA_GET_FUNCTION_METADATA);e.QInA.addType(e.OlapComponentType.DATA_AREA_GET_SEQUENCE_METADATA);e.QInA.addType(e.OlapComponentType.LIGHTWEIGHT_DATA_AREA_COMMAND)};e.QInA.addAllTypes=function(){e.QInA.addType(e.OlapComponentType.CONDITIONS_MANAGER);e.QInA.addType(e.OlapComponentType.CONDITION);e.QInA.addType(e.OlapComponentType.CONDITIONS_THRESHOLD);e.QInA.addType(e.OlapComponentType.CONDITIONS);e.QInA.addType(e.OlapComponentType.QUERY_MODEL);e.QInA.addType(e.OlapComponentType.DATA_CELL);e.QInA.addType(e.OlapComponentType.AXIS);e.QInA.addType(e.OlapComponentType.SORT_MANAGER);e.QInA.addType(e.OlapComponentType.LAYER_MODEL);e.QInA.addType(e.OlapComponentType.DATA_SOURCE);e.QInA.addType(e.OlapComponentType.DOCUMENTS_INFO);e.QInA.addType(e.OlapComponentType.SELECTOR);e.QInA.addType(e.OlapComponentType.ATTRIBUTE_CONTAINER);e.QInA.addType(e.OlapComponentType.ATTRIBUTE);e.QInA.addType(e.OlapComponentType.CELL_CONTEXT_MANAGER);e.QInA.addType(e.OlapComponentType.CELL_CONTEXT);e.QInA.addType(e.OlapComponentType.DRILL_MANAGER);e.QInA.addType(e.OlapComponentType.DRILL_OPERATION);e.QInA.addType(e.OlapComponentType.CURRENCY_TRANSLATION_MANAGER);e.QInA.addType(e.OlapComponentType.CURRENCY_TRANSLATION_LIST);e.QInA.addType(e.OlapComponentType.CURRENCY_TRANSLATION_ITEM);e.QInA.addType(e.OlapComponentType.MEASURE_TRANSLATIONS);e.QInA.addType(e.OlapComponentType.UNIT_TRANSLATION_MANAGER);e.QInA.addType(e.OlapComponentType.UNIT_TRANSLATION_ITEM);e.QInA.addType(e.OlapComponentType.FIELD_CONTAINER);e.QInA.addType(e.OlapComponentType.FIELD_LIST);e.QInA.addType(e.OlapComponentType.FIELD);e.QInA.addType(e.OlapComponentType.RESULT_STRUCTURE);e.QInA.addType(e.OlapComponentType.DATA_CELLS);e.QInA.addType(e.OlapComponentType.TOTALS);e.QInA.addType(e.OlapComponentType.EXCEPTION_MANAGER);e.QInA.addType(e.OlapComponentType.FORMULA_EXCEPTION_MANAGER);e.QInA.addType(e.OlapComponentType.FORMULA_EXCEPTION);e.QInA.addType(e.OlapComponentType.QUERY_SETTINGS);e.QInA.addType(e.OlapComponentType.HIERARCHY);e.QInA.addType(e.OlapComponentType.HIERARCHY_MANAGER);e.QInA.addType(e.OlapComponentType.CUSTOM_HIERARCHY_REPOSITORY);e.QInA.addType(e.OlapComponentType.CUSTOM_HIERARCHY_DEFINITION);e.QInA.addType(e.OlapComponentType.AXES_SETTINGS);e.QInA.addType(e.OlapComponentType.PROPERTY);e.QInA.addType(e.OlapComponentType.PLANNING_X_COMMAND);e.QInA.addType(e.OlapComponentType.UNIVERSAL_DISPLAY_HIERARCHIES);e.QInA.addType(e.OlapComponentType.QUERY_CELLS);e.QInA.addType(e.MemberType.DRILL_PATH_ELEMENT);e.QInA.addType(e.MemberType.MEMBER);e.QInA.addType(e.MemberType.SINGLE_MEMBER_EXIT);e.QInA.addType(e.MemberType.MEMBER_EXITS);e.QInA.addType(e.MemberType.LITERAL_MEMBER);e.QInA.addType(e.MemberType.BASIC_MEASURE);e.QInA.addType(e.MemberType.FORMULA);e.QInA.addType(e.MemberType.SERVER_BASED_FORMULA);e.QInA.addType(e.MemberType.RESTRICTED_MEASURE);e.QInA.addType(e.MemberType.VARIANCE);e.QInA.addType(e.MemberType.EXCEPTION_AGGREGATION);e.QInA.addType(e.MemberType.CURRENCY_MEASURE);e.QInA.addType(e.MemberType.UNIT_MEASURE);e.QInA.addType(e.MemberType.RUNNING_TOTAL);e.QInA.addType(e.MemberType.PARETO);e.QInA.addType(e.MemberType.HIERARCHY_NODE);e.QInA.addType(e.MemberType.RESULT);e.QInA.addType(e.MemberType.CONDITION_RESULT);e.QInA.addType(e.MemberType.CONDITION_OTHERS_RESULT);e.QInA.addType(e.MemberType.MEASURE);e.QInA.addType(e.MemberType.ABSTRACT_MEMBER);e.QInA.addType(e.OlapComponentType.EXCEPTION_AGGREGATION_MANAGER);e.QInA.addType(e.OlapComponentType.RUNNING_AGGREGATION_MANAGER);e.QInA.addType(e.OlapComponentType.FORMULA_CONSTANT);e.QInA.addType(e.OlapComponentType.FORMULA_ITEM_MEMBER);e.QInA.addType(e.OlapComponentType.FORMULA_OPERATION);e.QInA.addType(e.OlapComponentType.FORMULA_FUNCTION);e.QInA.addType(e.OlapComponentType.MEMBERS);e.QInA.addType(e.OlapComponentType.DIMENSION_SORTING);e.QInA.addType(e.OlapComponentType.FIELD_SORTING);e.QInA.addType(e.OlapComponentType.DATA_CELL_SORTING);e.QInA.addType(e.OlapComponentType.COMPLEX_SORTING);e.QInA.addType(e.OlapComponentType.MEASURE_SORTING);e.QInA.addType(e.OlapComponentType.GENERIC_SORTING);e.QInA.addType(e.OlapComponentType.LAYER);e.QInA.addType(e.OlapComponentType.LAYER_SYNC_DEFINITION);e.QInA.addType(e.OlapComponentType.LAYER_REFERENCE_DEFINITION);e.QInA.addType(e.OlapComponentType.ABSTRACT_LAYER_MODEL);e.QInA.addType(e.OlapComponentType.VARIABLE_MANAGER);e.QInA.addType(e.OlapComponentType.VARIABLE_CONTAINER);e.QInA.addType(e.OlapComponentType.VARIABLE_LIST);e.QInA.addType(e.VariableType.TEXT_VARIABLE);e.QInA.addType(e.VariableType.FORMULA_VARIABLE);e.QInA.addType(e.VariableType.HIERARCHY_NODE_VARIABLE);e.QInA.addType(e.VariableType.HIERARCHY_NAME_VARIABLE);e.QInA.addType(e.VariableType.HIERARCHY_VARIABLE);e.QInA.addType(e.VariableType.OPTION_LIST_VARIABLE);e.QInA.addType(e.VariableType.DIMENSION_MEMBER_VARIABLE);e.QInA.addType(e.VariableType.SIMPLE_TYPE_VARIABLE);e.QInA.addType(e.VariableType.FUNCTIONAL_VARIABLE);e.QInA.addType(e.VariableType.ANY_VARIABLE);e.QInA.addType(e.OlapComponentType.VARIABLE_CONTEXT);e.QInA.addType(e.OlapComponentType.OLAP_FILTER_MANAGER);e.QInA.addType(e.OlapComponentType.FILTER_CAPABILITY_GROUP);e.QInA.addType(e.OlapComponentType.FILTER_CAPABILITY);e.QInA.addType(e.OlapComponentType.FILTER_EXPRESSION);e.QInA.addType(e.OlapComponentType.FILTER_LITERAL);e.QInA.addType(e.OlapComponentType.FILTER_FIXED);e.QInA.addType(e.OlapComponentType.FILTER_DYNAMIC);e.QInA.addType(e.OlapComponentType.FILTER_VISIBILITY);e.QInA.addType(e.OlapComponentType.FILTER_CELL_VALUE_OPERAND);e.QInA.addType(e.FilterComponentType.CARTESIAN_LIST);e.QInA.addType(e.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST);e.QInA.addType(e.FilterComponentType.CARTESIAN_PRODUCT);e.QInA.addType(e.FilterComponentType.AND);e.QInA.addType(e.FilterComponentType.OR);e.QInA.addType(e.FilterComponentType.NOT);e.QInA.addType(e.FilterComponentType.SPATIAL_FILTER);e.QInA.addType(e.FilterComponentType.BOOLEAN_ALGEBRA);e.QInA.addType(e.FilterComponentType.OPERATION);e.QInA.addType(e.FilterComponentType.DATE_RANGE_OPERATION);e.QInA.addType(e.FilterComponentType.FILTER_MEASURE_BASED);e.QInA.addType(e.FilterComponentType.FILTER_ACROSS_MODELS);e.QInA.addType(e.FilterComponentType.FILTER_ASYMMETRIC_VISIBILITY);e.QInA.addType(e.FilterComponentType.FILTER_DYNAMIC_TIME_REGULAR_RANGE);e.QInA.addType(e.FilterComponentType.FILTER_DYNAMIC_TIME_TO_DATE_RANGE);e.QInA.addType(e.FilterComponentType.FILTER_FIXED_TIME_RANGE);e.QInA.addType(e.OlapComponentType.FILTER_ELEMENT);e.QInA.addType(e.OlapComponentType.DIMENSION_CONTEXT);e.QInA.addType(e.OlapComponentType.DIMENSIONS);e.QInA.addType(e.DimensionType.PRESENTATION);e.QInA.addType(e.DimensionType.CONTAINER);e.QInA.addType(e.DimensionType.ATTRIBUTE_DIM);e.QInA.addType(e.DimensionType.CURRENCY);e.QInA.addType(e.DimensionType.UNIT);e.QInA.addType(e.DimensionType.TIME);e.QInA.addType(e.DimensionType.DATE);e.QInA.addType(e.DimensionType.HIERARCHY_VERSION);e.QInA.addType(e.DimensionType.HIERARCHY_NAME);e.QInA.addType(e.DimensionType.SEARCH_DIMENSION);e.QInA.addType(e.DimensionType.VIRTUAL);e.QInA.addType(e.DimensionType.VERSION_EPM);e.QInA.addType(e.DimensionType.VERSION_IBP);e.QInA.addType(e.DimensionType.ACCOUNT);e.QInA.addType(e.DimensionType.GIS_DIMENSION);e.QInA.addType(e.DimensionType.SEARCH_RESULT);e.QInA.addType(e.DimensionType.SUGGEST_TERM);e.QInA.addType(e.DimensionType.SUGGEST_SCOPE);e.QInA.addType(e.DimensionType.SUGGEST_ATTRIBUTE);e.QInA.addType(e.DimensionType.MEASURE_STRUCTURE);e.QInA.addType(e.DimensionType.SECONDARY_STRUCTURE);e.QInA.addType(e.DimensionType.ABSTRACT_STRUCTURE);e.QInA.addType(e.DimensionType.DIMENSION);e.QInA.addType(e.DimensionType.CALCULATED_DIMENSION);e.QInA.addType(e.DimensionType.FORMULA_CALCULATED_DIMENSION);e.QInA.addType(e.OlapComponentType.ABSTRACT_DIMENSION);e.QInA.addType(e.FilterComponentType.TUPLE);e.QInA.addType(e.FilterComponentType.VIRTUAL_DATASOURCE);e.QInA.addType(e.OlapComponentType.MODELLER_CURRENCY_TRANSLATION);e.QInA.addType(e.OlapComponentType.MODELLER_DIMENSIONS);e.QInA.addType(e.OlapComponentType.MODELLER_METADATA_PROPERTIES);e.QInA.addType(e.OlapComponentType.MODELLER_VARIABLES);e.QInA.addType(e.OlapComponentType.QUERY_MANAGER);e.QInA.addType(e.OlapComponentType.QUERY_SERVICE_CONFIG);e.QInA.addType(e.OlapComponentType.COMPONENT_LIST);e.QInA.addType(e.OlapComponentType.QUERY_CONTEXT);e.QInA.addType(e.OlapComponentType.OLAP);e.QInA.addType(e.OlapComponentType.BLENDABLE_QUERY_MANAGER);e.QInA.addType(e.OlapComponentType.VISUALIZATION_MANAGER);e.QInA.addType(e.OlapComponentType.VISUALIZATION_CELL_REFERENCE_SCOPE);e.QInA.addType(e.OlapComponentType.VISUALIZATION_CHART_STYLE);e.QInA.addType(e.OlapComponentType.VISUALIZATION_DEFINITION);e.QInA.addType(e.OlapComponentType.VISUALIZATION_TABLE_DEFINITION);e.QInA.addType(e.OlapComponentType.VISUALIZATION_CHART_DEFINITION);e.QInA.addType(e.OlapComponentType.VISUALIZATION_KPI_DEFINITION);e.QInA.addType(e.OlapComponentType.VISUALIZATION_CUSTOM_DEFINITION);e.QInA.addType(e.OlapComponentType.OLAP_VISUALIZATION_TEMPLATE_MANAGER);e.QInA.addType(e.OlapComponentType.OLAP_SIMULATION_MANAGER);e.QInA.addType(e.OlapComponentType.QUICK_ACTION_MANAGER)};e.QInA.addInAComponent=function(t){let i=t.getComponentType().getName();let n=t.getModelFormat();if(e.isNull(n)){n=e.QModelFormat.INA_DATA}let r=n.getUsages();let o=r.size();for(let n=0;n<o;n++){let o=r.get(n);let l=o.getName();let a=e.QInA.s_lookupByFormat.getByKey(l);let p=a.getByKey(i);e.XObjectExt.assertNotNullExt(p,e.XStringUtils.concatenate2("Container not defined: ",i));p.add(t)}};e.QInA.addType=function(t){let i=e.QModelFormat.getAllModelFormats();let n=i.size();for(let r=0;r<n;r++){let n=i.get(r).getName();let o=e.QInA.s_lookupByFormat.getByKey(n);o.add(e.QInAComponentContainer.create(t))}};e.QInA.removeEmptyContainers=function(){let t=e.QModelFormat.getAllModelFormats();let i=t.size();for(let n=0;n<i;n++){let i=e.QInA.s_lookupByFormat.getByKey(t.get(n).getName());for(let e=0;e<i.size();){let t=i.get(e);if(t.isEmpty()){i.removeAt(e)}else{e++}}}};e.QInA.staticSetup=function(){e.QInA.s_lookupByFormat=e.XHashMapByString.create();e.QInA.addAllFormats();e.QInA.addAllTypes()};e.QInA.staticSetupForPlanning=function(){e.QInA.addAllPlanningTypes()};e.QInA.prototype.m_application=null;e.QInA.prototype.m_capabilities=null;e.QInA.prototype.m_mode=null;e.QInA.prototype.m_modelContext=null;e.QInA.prototype.m_originalMode=null;e.QInA.prototype.m_variableProcessingDirective=null;e.QInA.prototype.getApplication=function(){return e.XWeakReferenceUtil.getHardRef(this.m_application)};e.QInA.prototype.getMode=function(){return this.m_mode};e.QInA.prototype.getOriginalMode=function(){return this.m_originalMode};e.QInA.prototype.getProcess=function(){return this.getApplication().getProcess()};e.QInA.prototype.isAbap=function(t){let i=e.notNull(t)?t.getModelCapabilities():null;return e.notNull(i)&&this.isSystemTypeEquals(i.getSystemType(),e.SystemType.ABAP)};e.QInA.prototype.isHana=function(t){let i=e.notNull(t)?t.getModelCapabilities():null;return e.notNull(i)&&this.isSystemTypeEquals(i.getSystemType(),e.SystemType.HANA)};e.QInA.prototype.isMetadataOfAbap=function(t,i){if(e.notNull(t)&&e.notNull(i)){let n=t.getCacheKey();if(e.notNull(n)){let t=n.getSystemName();let r=e.notNull(t)?i.getSystemLandscape().getSystemDescription(t):null;return e.notNull(r)&&this.isSystemTypeEquals(r.getSystemType(),e.SystemType.ABAP)}}return false};e.QInA.prototype.isSystemTypeEquals=function(t,i){return e.notNull(i)&&e.notNull(t)&&t.isTypeOf(i)};e.QInA.prototype.isVirtualInA=function(t){return e.notNull(t)&&t.getModelCapabilities().getSystemType().isTypeOf(e.SystemType.VIRTUAL_INA)&&!this.getMode().isDataBlending()};e.QInA.prototype.lookupInAComponent=function(t,i){let n=null;let r=e.QInA.s_lookupByFormat.getByKey(this.m_mode.getName());let o=r.getByKey(t.getName());if(e.isNull(o)){let e=r.size();for(let l=0;l<e;l++){o=r.get(l);if(t.isTypeOf(o.getComponentType())){n=o.get(i);break}}}else{n=o.get(i)}if(e.isNull(n)){this.addError(0,e.XStringUtils.concatenate2("Cannot find serialization/deserialization component for type: ",t.getName()))}return n};e.QInA.prototype.setApplication=function(t){this.m_application=e.XWeakReferenceUtil.getWeakRef(t)};e.QInA.prototype.setupImportExport=function(t,i,n,r){let o=null;if(e.notNull(t)){o=t.getSession()}this.setupSessionContext(o);this.setApplication(t);this.m_mode=i;this.m_originalMode=i;this.m_modelContext=r;if(e.isNull(n)){this.m_capabilities=e.QCapabilities.create();this.m_capabilities.setSupportsSetOperand(true);this.m_capabilities.setSupportsConvertToFlatFilter(true);this.m_capabilities.setSupportsCummulative(true);this.m_capabilities.setSupportsExtendedSort(true);this.m_capabilities.setSupportsSpatialFilter(true);this.m_capabilities.setSupportsSpatialFilterSrid(true);this.m_capabilities.setSupportsSpatialTransformation(true);this.m_capabilities.setSupportsMemberVisibility(true);this.m_capabilities.setSupportsCustomDimensionMemberExecutionStep(true);this.m_capabilities.setSupportsExtendedDimensions(true);this.m_capabilities.setSupportsIgnoreExternalDimensions(true);this.m_capabilities.setSupportsSupplements(true)}else{this.m_capabilities=n}};e.QInARepoCalculatedDimension=function(){};e.QInARepoCalculatedDimension.prototype=new e.QInARepoDimension;e.QInARepoCalculatedDimension.prototype._ff_c="QInARepoCalculatedDimension";e.QInARepoCalculatedDimension.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());let l=o.getAxisType();n.putString("Axis",e.QInAConverter.lookupAxisTypeInA(l));let a=o.getTopEntries();if(a>0){n.putInteger("Top",a)}let p=o.getSkipEntries();if(p>0){n.putInteger("Skip",p)}let s=n.putNewStructure("DataSource");s.putString("ObjectName",o.getPreQueryName());s.putString("Type","Query");n.putString("JoinType",o.getJoinType().getName());let u=n.putNewList("JoinFields");let g=o.getJoinFields();let y=g.size();let m;for(m=0;m<y;m++){let e=g.get(m);let t=u.addNewStructure();t.putString("JoinFieldName",e.getLocaleFieldName());t.putString("JoinFieldNameInReferencedData",e.getReferencedFieldName())}let c=n.putNewList("FieldMappings");let A=o.getFieldMappings();y=A.size();for(m=0;m<y;m++){let t=A.get(m);let i=c.addNewStructure();i.putString("FieldName",t.getLocaleFieldName());i.putString("FieldNameInReferencedData",t.getReferencedFieldName());let n=t.getLocaleFieldName();if(o.getFieldByName(n).getValueType()!==e.XValueType.STRING){let t=e.QInAConverter.lookupValueTypeInA(o.getFieldByName(n).getValueType());i.putString("CalculatedDimensionFieldValueType",t)}}this.exportFieldLayout(t,n,o);t.exportTotals(o,n);if(o.isHidden()){n.putBoolean("IsHidden",true)}return e.QInARepoDimension.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoCalculatedDimension.prototype.getComponentType=function(){return e.DimensionType.CALCULATED_DIMENSION};e.QInARepoCalculatedDimension.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=o.getQueryModel();let a=n;let p=i.getStringByKey("Name");if(e.isNull(a)&&e.notNull(l)){a=l.getDimensionManagerBase().getDimensionByNameInternal(p)}if(e.isNull(a)){a=e.QCalculatedDimension._createCalculatedDimension(o,r,p)}a.setDimensionType(e.DimensionType.CALCULATED_DIMENSION);a.setName(p);a.setTopEntries(i.getIntegerByKeyExt("Top",0));a.setSkipEntries(i.getIntegerByKeyExt("Skip",0));let s=i.getStructureByKey("DataSource");a.setPreQueryName(s.getStringByKey("ObjectName"));a.setJoinType(e.JoinType.lookup(i.getStringByKey("JoinType")));let u=i.getListByKey("JoinFields");let g=u.size();let y;for(y=0;y<g;y++){let e=u.getStructureAt(y);a.addJoinFieldByString(e.getStringByKey("JoinFieldName"),e.getStringByKey("JoinFieldNameInReferencedData"))}let m=i.getListByKey("FieldMappings");g=m.size();for(y=0;y<g;y++){let t=m.getStructureAt(y);a.addFieldMappingByString(t.getStringByKey("FieldName"),t.getStringByKey("FieldNameInReferencedData"));if(t.getStringByKey("CalculatedDimensionFieldValueType")!==null){let i=a.getFieldByName(t.getStringByKey("FieldName"));i.setValueType(e.QInAConverter.lookupValueType(t.getStringByKey("CalculatedDimensionFieldValueType")))}}this.importFieldsLayout(t,i,a,o);t.importTotals(i,a.getResultStructureControllerBase(),o);if(i.containsKey("IsHidden")){a.setHidden(i.getBooleanByKey("IsHidden"))}return a};e.QInARepoFilterConvertedTimeCartesianList=function(){};e.QInARepoFilterConvertedTimeCartesianList.prototype=new e.QInARepoFilterCartesianList;e.QInARepoFilterConvertedTimeCartesianList.prototype._ff_c="QInARepoFilterConvertedTimeCartesianList";e.QInARepoFilterConvertedTimeCartesianList.prototype.exportComponentWithStructure=function(t,i,n,r){e.QInARepoFilterCartesianList.prototype.exportComponentWithStructure.call(this,t,i,n,r);let o=i;n.putBoolean("isSingleValueSource",o.isSingleValueSourceCartesianList());if(o.getHierarchyLevelType()!==null){n.putString("LevelType",o.getHierarchyLevelType().getName())}return e.QInARepoFilterCartesianList.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFilterConvertedTimeCartesianList.prototype.getComponentType=function(){return e.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST};e.QInARepoFilterConvertedTimeCartesianList.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=null;if(e.notNull(r)){let e=r;l=e.getFilterExpression()}let a=n;if(e.isNull(a)){a=e.notNull(l)?e.QFactory.createFilterConvertedTimeCartesianList(l):e.QFactory.createFilterConvertedTimeCartesianList(o)}a.setIsSingleValueSourceCartesianList(i.getBooleanByKey("isSingleValueSource"));let p=i.getStringByKey("LevelType");if(e.notNull(p)){a.setHierarchyLevelType(e.HierarchyLevelType.lookup(p))}return e.QInARepoFilterCartesianList.prototype.importComponentWithStructure.call(this,t,i,a,r,o)};e.QInARepoFilterDynamic=function(){};e.QInARepoFilterDynamic.prototype=new e.QInARepoFilter;e.QInARepoFilterDynamic.prototype._ff_c="QInARepoFilterDynamic";e.QInARepoFilterDynamic.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;let l=o;let a=l;n.putBoolean("IgnoreInternalNonMeasureFilters",a.isIgnoreInternalNonMeasureFilter());n.putBoolean("FlattenHierarchyNodeFiltersFromVariables",a.isFlattenHierarchyNodeFiltersFromVariables());n.putBoolean("ConvertFiltersToFlatOnHierarchyChange",a.isConvertFiltersToFlatOnHierarchyChange());let p=null;if(a.isDynamicFilterInitialized()){p=a.getDynamicFilter()}let s=l.getQueryModel();let u=t.isAbap(l);let g;if(u){g="Filter"}else{g="DynamicFilter"}let y=e.notNull(t.m_variableProcessingDirective)&&s.getModelCapabilities().supportsVariableMasking();if(y){let i=t.exportFilterExpression(p);if(e.notNull(i)){n.put(g,i)}}else{let i=null;if(a.isTmpFilterInitialized()){i=a.getTmpFilter()}let r=this.exportFilter(t,a,p,a.getLinkedFilters(),i);if(e.notNull(r)){n.put(g,r)}}return e.QInARepoFilter.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoFilterDynamic.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_DYNAMIC};e.QInARepoFilterDynamic.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=i.getStructureByKey("DynamicFilter");if(e.isNull(l)){l=i.getStructureByKey("Filter")}let a=r;let p=null;if(e.notNull(a)){a.setIgnoreInternalNonMeasureFilters(i.getBooleanByKeyExt("IgnoreInternalNonMeasureFilters",false));if(i.containsKey("FlattenHierarchyNodeFiltersFromVariables")){a.setFlattenHierarchyNodeFiltersFromVariables(i.getBooleanByKey("FlattenHierarchyNodeFiltersFromVariables"))}if(i.containsKey("ConvertFiltersToFlatOnHierarchyChange")){a.setConvertFiltersToFlatOnHierarchyChange(i.getBooleanByKey("ConvertFiltersToFlatOnHierarchyChange"))}if(a.isDynamicFilterInitialized()){p=a.getDynamicFilter();p.setComplexRoot(null);if(p.getModelCapabilities().supportsCellValueOperand()){p.setIsSuppressingNulls(false)}}a.resetEffectiveFilter()}if(e.notNull(l)&&!l.isEmpty()){p=t.importFilterExpression(p,l,a,o)}if(e.notNull(a)){a.setDynamicFilter(p)}if(e.notNull(p)){p.setPreserveDuringSubmit(true)}return p};e.QInARepoFilterVisibility=function(){};e.QInARepoFilterVisibility.prototype=new e.QInARepoFilter;e.QInARepoFilterVisibility.prototype._ff_c="QInARepoFilterVisibility";e.QInARepoFilterVisibility.prototype.exportComponentWithStructure=function(e,t,i,n){let r=t;if(r.getModelCapabilities().supportsVisibilityFilter()){let t=null;if(r.isTmpVisibilityFilterInitialized()){t=r.getTmpVisibilityFilter()}let i=null;if(r.isVisibilityFilterInitialized()){i=r.getVisibilityFilter()}return this.exportFilter(e,r,i,r.getLinkedVisibilityFilters(),t)}return null};e.QInARepoFilterVisibility.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_VISIBILITY};e.QInARepoFilterVisibility.prototype.getTagName=function(){return"VisibilityFilter"};e.QInARepoFilterVisibility.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=r;if(e.notNull(l)&&l.isVisibilityFilterInitialized()){let e=l.getVisibilityFilter();e.setComplexRoot(null);if(e.getModelCapabilities().supportsCellValueOperand()){e.setIsSuppressingNulls(false)}}let a=null;if(e.notNull(i)){a=t.importFilterExpression(null,i,l,o);if(e.notNull(l)&&e.notNull(a)){l.setVisibilityFilter(a)}}return a};e.QInARepoFilterVisibility.prototype.isValidFilterExpression=function(t){return e.notNull(t)};e.QInARepoHierarchyManager=function(){};e.QInARepoHierarchyManager.prototype=new e.QInARepoHierarchy;e.QInARepoHierarchyManager.prototype._ff_c="QInARepoHierarchyManager";e.QInARepoHierarchyManager.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;return e.QInARepoHierarchy.prototype.exportComponentWithStructure.call(this,t,o.getDimension(),n,r)};e.QInARepoHierarchyManager.prototype.getComponentType=function(){return e.OlapComponentType.HIERARCHY_MANAGER};e.QInARepoHierarchyManager.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;return e.QInARepoHierarchy.prototype.importComponentWithStructure.call(this,t,i,l.getDimension(),r,o)};e.QInARepoMemberBasicMeasure=function(){};e.QInARepoMemberBasicMeasure.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberBasicMeasure.prototype._ff_c="QInARepoMemberBasicMeasure";e.QInARepoMemberBasicMeasure.getNameForImport=function(t,i){let n=t.getStringByKey("Name");if(e.isNull(n)&&e.notNull(i)){let e=i.getKeyField();let n=e.getName();return t.getStringByKey(n)}return n};e.QInARepoMemberBasicMeasure.getNameFromOperand=function(t){let i=t.getStructureByKey("MemberOperand");if(e.notNull(i)){let t=e.XString.isEqual(i.getStringByKey("AttributeName"),"Measures");let n=e.QInAConverter.lookupComparison(i.getStringByKey("Comparison"))===e.ComparisonOperator.EQUAL;if(t&&n){return i.getStringByKey("Value")}}return null};e.QInARepoMemberBasicMeasure.getText=function(t,i){let n=t.getStringByKey("Description");if(e.isNull(n)&&e.notNull(i)){let n=i.getTextField();if(e.notNull(n)){let e=n.getName();return t.getStringByKey(e)}}return n};e.QInARepoMemberBasicMeasure.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;let l=o.getDimension();let a=o.getQueryManager().getTagging().containsKey(e.QStateConstants.TAG_REPO_FORMAT_FOR_UNDO_REDO);if(l.getDimensionType()===e.DimensionType.ACCOUNT&&t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA&&!a){n.putString("Name",o.getName());return n}let p=o.getOriginalText();if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||!o.isCreatedFromMetadata()&&!o.isModelDefinedMember()){n.putStringNotNull("Description",p)}n.putString("Dimension",l.getName());let s=e.PrFactory.createStructure();s.putString("AttributeName","Measures");n.put("MemberOperand",s);let u=o.getQueryModel();if(u.isBasicMeasureAggregationExportedInRepo()||t.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA&&o.hasPropertyChanged(e.QStructureMemberProperties.QY_AGGERGATION_TYPE)){let t=o.getAggregationType();e.QInARepoUtils.setNameIfNotNull(n,"Aggregation",t)}if(!o.getModelCapabilities().supportsExceptionAggregationDimsFormulas()){let t=o.getAggregationDimensionName();if(e.notNull(t)){n.putString("AggregationDimension",t)}}if(!t.m_capabilities.supportsExtendedSort()&&!t.isVirtualInA(u)){let t=u.getSortingManager().getMeasureSorting(o,false);if(e.isNull(t)){n.putInteger("SortOrder",0)}else{n.putInteger("SortOrder",e.QInAConverter.lookupSortDirectionInA(t.getDirection()))}}let g=o.getKeyFieldValue();s.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.EQUAL));e.QInARepoUtils.exportValue(t,"Value",s,g,g.getValueType());e.QInARepoMemberAbstract.prototype.exportGenericMemberProperties.call(this,t,o,n);if(u.isBasicMeasureSettingsExportedInRepo()||t.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA){if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_UNIT_TYPE)){n.putStringNotNull("UnitType",e.QInAConverter.lookupUnitTypeInA(o.getUnitType()))}n.putStringNotNull("UnitFixed",o.getUnitFixed());n.putStringNotNull("UnitName",o.getUnitName());n.putStringNotNull("UnitTextName",o.getUnitTextName());if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE)){n.putStringNotNull("DataType",e.QInAConverter.lookupValueTypeInA(o.getDataType()))}}return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoMemberBasicMeasure.prototype.getComponentType=function(){return e.MemberType.BASIC_MEASURE};e.QInARepoMemberBasicMeasure.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=r;if(e.isNull(l)){l=o.getDimensionAccessor().getDimensionByNameFromExistingMetadata(i.getStringByKey("Dimension"))}let a=e.QInARepoMemberBasicMeasure.getNameForImport(i,l);let p=e.QInARepoMemberBasicMeasure.getText(i,l);if(e.XStringUtils.isNullOrEmpty(a)){a=e.QInARepoMemberBasicMeasure.getNameFromOperand(i)}let s=n;if(e.isNull(s)){s=l.getStructureMember(a);if(e.isNull(s)){if(this.newComponentCreationAllowed(t,i)&&i.getBooleanByKeyExt("Extended",true)&&!(l.getQueryModel().isUniversalAccountModel()&&l.getDimensionType()===e.DimensionType.MEASURE_STRUCTURE)){s=e.QBasicMeasure._createBasicMeasure(o,l);if(l.getQueryModel()!==null&&t.isAbap(l.getQueryModel())){s.setNotFromMetadata()}}}}else{s.setDimension(l)}if(e.notNull(s)){s.setName(a);let n=i.getBooleanByKeyExt("OverrideDescription",false);if(n){if(e.XStringUtils.isNullOrEmpty(p)){if(e.XStringUtils.isNullOrEmpty(s.getOriginalText())){p=a}else{p=s.getOriginalText()}}if(!e.XString.isEqual(p,s.getOriginalText())){let t=l.getTextField();if(e.notNull(t)){l.setAlternativeFieldValue(false,a,t.getName(),e.XStringValue.create(p),null)}}}if(e.notNull(p)&&(s.getOriginalText()===null||n)){s.setText(p)}s.initializeFieldValues();e.QInARepoMemberAbstract.importGenericMemberAbstractProperties(t,s,i)}return s};e.QInARepoMemberCurrency=function(){};e.QInARepoMemberCurrency.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberCurrency.prototype._ff_c="QInARepoMemberCurrency";e.QInARepoMemberCurrency.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||!o.isCreatedFromMetadata()&&!o.isModelDefinedMember()){n.putString("Description",o.getOriginalText())}n.putStringNotNullAndNotEmpty("BaseMeasureName",o.getBaseMeasureName());n.putStringNotNullAndNotEmpty("CurrencyTranslationName",o.getCurrencyTranslationName());if(!o.isLocalCurrency()){let e=o.getLocalCurrencyTranslation();let i=n.putNewStructure("CurrencyTranslation");t.exportCurrencyTranslationElement(e,i)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_AUTO_SIGN_FLIP)){if(o.isAutoSignFlip()||o.hasPropertyChanged(e.QStructureMemberProperties.QY_AUTO_SIGN_FLIP)&&t.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA){n.putBoolean("AutoSignFlip",o.isAutoSignFlip())}}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_UNIT_TYPE)){n.putStringNotNull("UnitType",e.QInAConverter.lookupUnitTypeInA(o.getUnitType()))}n.putStringNotNull("UnitFixed",o.getUnitFixed());n.putStringNotNull("UnitName",o.getUnitName());n.putStringNotNull("UnitTextName",o.getUnitTextName());if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE)){n.putStringNotNull("DataType",e.QInAConverter.lookupValueTypeInA(o.getDataType()))}e.QInARepoMemberAbstract.prototype.exportGenericMemberProperties.call(this,t,o,n);return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoMemberCurrency.prototype.getComponentType=function(){return e.MemberType.CURRENCY_MEASURE};e.QInARepoMemberCurrency.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;let a=r;let p=i.getStringByKey("Name");let s=i.getStringByKey("Description");if(e.isNull(l)){l=a.addNewCurrencyMeasure(p,s)}else{l.setDimension(a);l.setName(p);if(e.notNull(s)&&(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||l.getOriginalText()===null)){l.setText(s)}}e.QInARepoMemberAbstract.importGenericMemberAbstractProperties(t,l,i);l.setBaseMeasureName(i.getStringByKey("BaseMeasureName"));if(i.containsKey("CurrencyTranslationName")){l.setCurrencyTranslationName(i.getStringByKey("CurrencyTranslationName"))}let u=l.getLocalCurrencyTranslation();let g=i.getStructureByKey("CurrencyTranslation");if(e.isNull(g)){l.setLocalCurrency()}else{t.importCurrencyTranslationElement(g,u,o)}l.setAutoSignFlip(i.getBooleanByKey("AutoSignFlip"));return l};e.QInARepoMemberCurrency.prototype.newModelComponent=function(t,i,n,r){let o=e.QCurrencyMeasure._createCurrencyMeasure(r,null);o.setParent(n);return o};e.QInARepoMemberExceptionAggregationMeasure=function(){};e.QInARepoMemberExceptionAggregationMeasure.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberExceptionAggregationMeasure.prototype._ff_c="QInARepoMemberExceptionAggregationMeasure";e.QInARepoMemberExceptionAggregationMeasure.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||!o.isCreatedFromMetadata()&&!o.isModelDefinedMember()){n.putString("Description",o.getOriginalText())}n.putString("MeasureName",o.getMeasure());if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QMeasureProperties.QY_CONDITION_TYPE)){n.putString("ConditionType",o.getConditionType().getName())}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QMeasureProperties.QY_EXCEPTION_AGGREGATION_ON_SELECTION)){n.putBoolean("ExceptionAggregationOnSelectionEnabled",o.getIsExceptionAggregationOnSelectionEnabled())}let l=o.getFilter().getFilterRootElement();if(e.notNull(l)){let e=t.exportComponent(null,l,null,r);n.put("Selection",e)}e.QInARepoMemberAbstract.prototype.exportGenericMemberProperties.call(this,t,o,n);return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoMemberExceptionAggregationMeasure.prototype.getComponentType=function(){return e.MemberType.EXCEPTION_AGGREGATION};e.QInARepoMemberExceptionAggregationMeasure.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;let a=r;let p=i.getStringByKey("Name");let s=i.getStringByKey("Description");if(e.isNull(l)){l=a.addNewExceptionAggregationMeasure(p,s)}else{l.setDimension(a);l.setName(p);if(e.notNull(s)&&(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||l.getOriginalText()===null)){l.setText(s)}}l.setMeasure(i.getStringByKey("MeasureName"));if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasStringByKey("ConditionType")){l.setConditionType(e.ExceptionAggregationConditionType.lookup(i.getStringByKey("ConditionType")))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("ExceptionAggregationOnSelectionEnabled")){l.setIsExceptionAggregationOnSelectionEnabled(i.getBooleanByKey("ExceptionAggregationOnSelectionEnabled"))}let u=l.getFilter();let g=null;let y=i.getStructureByKey("Selection");if(e.notNull(y)){g=t.importComponent(null,y,null,u,o)}u.setComplexRoot(g);return l};e.QInARepoMemberExceptionAggregationMeasure.prototype.newModelComponent=function(t,i,n,r){let o=e.QExceptionAggregationMeasure._createExceptionAggregationMeasure(r,null);o.setParent(n);return o};e.QInARepoMemberFormulaMeasure=function(){};e.QInARepoMemberFormulaMeasure.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberFormulaMeasure.prototype._ff_c="QInARepoMemberFormulaMeasure";e.QInARepoMemberFormulaMeasure.exportInverseFormulas=function(t,i,n){let r=i.getInverseFormulaList();if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||r.getModCounter()>0){let o=n.putNewList("InverseFormulas");let l=r.size();for(let n=0;n<l;n++){let l=e.PrFactory.createStructure();o.add(l);let a=r.get(n);let p=e.PrFactory.createStructure();e.QInARepoMemberAbstract.exportFormulaItem(t,a.getInternalFormulaItem(),p,i);l.put("Formula",p);let s=a.getTarget();if(e.notNull(s)){let n=e.PrFactory.createStructure();l.put("Target",n);e.QInARepoMemberAbstract.exportFormulaItem(t,s,n,i.getContext())}let u=a.getCondition();if(e.notNull(u)){let n=e.PrFactory.createStructure();l.put("Condition",n);e.QInARepoMemberAbstract.exportFormulaItem(t,u,n,i)}}}};e.QInARepoMemberFormulaMeasure.exportIteration=function(t,i,n){let r=i.getIteration();if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||r.getModCounter()>0){let e=n.putNewStructure("Iteration");e.putString("StartValueMember",r.getStartValueMemberName());let t=r.getIterationDimensions();let i=e.putNewList("IterationDimensions");let o=t.size();for(let e=0;e<o;e++){let n=t.get(e);let r=i.addNewStructure();r.putStringNotNullAndNotEmpty("Name",n.getDimensionName());r.putStringNotNullAndNotEmpty("PartitionLevel",n.getPartitionLevelName())}if(r.useGlobalSort()){e.putBoolean("UseGlobalSort",true)}}};e.QInARepoMemberFormulaMeasure.getNameForImport=function(t,i){let n=t.getStringByKey("Name");if(e.isNull(n)&&e.notNull(i)){let e=i.getKeyField();let n=e.getName();return t.getStringByKey(n)}return n};e.QInARepoMemberFormulaMeasure.getText=function(t,i){let n=t.getStringByKey("Description");if(e.isNull(n)&&e.notNull(i)){let r=i.getTextField();if(e.notNull(r)){let e=r.getName();n=t.getStringByKey(e)}}return n};e.QInARepoMemberFormulaMeasure.importDimensionContext=function(t,i,n){let r=n.getStructureByKey("DimensionContext");if(e.notNull(r)){let n=r.getStringByKey("DatasetId");let o=t.getOlapEnv().getSharedQueryManager(n);if(e.notNull(o)){let e=o.getQueryModel().getDimensionByName(r.getStringByKey("DimensionName"));i.setDimensionContext(e)}}};e.QInARepoMemberFormulaMeasure.importFormulaMeasure=function(t,i,n,r,o){let l=null;if(e.notNull(n)){let a=n.getStructureByKey("Function");l=r;if(e.notNull(a)){let r=a.getStringByKey("Name");let p=a.getListByKey("Parameters");let s=e.QFactory.createFormulaFunction(o);if(e.notNull(p)){s.setFunctionName(r);let n=p.size();for(let r=0;r<n;r++){e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,i,p.getStructureAt(r),s,o)}s.setRequiresExternalSignFlip(a.getBooleanByKeyExt("RequiresExternalSignFlip",false))}s.setSolveOrder(n.getIntegerByKeyExt("SolveOrder",0));if(e.isNull(l)){l=s}else{l.add(s)}}else{let r=n.getStructureByKey("Constant");if(e.notNull(r)){let n=e.QFactory.createFormulaConstant(o);if(e.XString.isEqual("Variable",r.getStringByKey("ValueIs"))){let t=r.getStringByKey("Value");let o=i.getQueryModel().getVariableManager();n.setVariable(o.getVariables().getByKey(t));if(e.isNull(l)){l=n}else{l.add(n)}}else{let i=r.getStringByKey("ValueType");let o=!r.containsKey("Value")||r.getElementTypeByKey("Value")===e.PrElementType.THE_NULL;if(e.XString.isEqual(i,"Number")){if(o){n.setNullByType(e.XValueType.DOUBLE)}else{n.setDouble(r.getDoubleByKey("Value"))}}else if(e.XString.isEqual(i,"String")){if(o){n.setNullByType(e.XValueType.STRING)}else{n.setString(r.getStringByKey("Value"))}}else if(e.XString.isEqual(i,"Bool")){if(o){n.setNullByType(e.XValueType.BOOLEAN)}else{n.setBoolean(r.getBooleanByKey("Value"))}}else if(e.XString.isEqual(i,"DateTime")){if(o){n.setNullByType(e.XValueType.DATE_TIME)}else{n.setDateTime(e.XDateTime.createDateTimeFromStringWithFlag(r.getStringByKey("Value"),false))}}else if(e.XString.isEqual(i,"Date")){if(o){n.setNullByType(e.XValueType.DATE)}else{n.setDate(e.QInARepoUtils.createDate(r.getStringByKey("Value")))}}else if(e.XString.isEqual(i,"Time")){if(o){n.setNullByType(e.XValueType.TIME)}else{n.setTime(e.XTime.createTimeSafe(r.getStringByKey("Value")))}}else if(e.XString.isEqual(i,"StringArray")){if(!o){let t=r.getListByKey("Value");n.setStringValues(e.PrUtils.asListOfString(t))}}else{t.addError(e.ErrorCodes.INVALID_TOKEN,"Constant value type is not supported");return null}let a=r.getStringByKey("Unit");if(e.XStringUtils.isNotNullAndNotEmpty(a)){n.setUnit(a)}let p=r.getStringByKey("Currency");if(e.XStringUtils.isNotNullAndNotEmpty(p)){n.setCurrency(p)}if(e.isNull(l)){l=n}else{l.add(n)}}}else{let t=n.getStructureByKey("Member");if(e.notNull(t)){let i=e.QFactory.createFormulaMember(o);let n=t.getStringByKey("Name");i.setMemberName(n);i.setDimensionName(t.getStringByKey("Dimension"));let r=t.getStringByKey("NameIs");if(e.XString.isEqual(r,"Booked")){i.setBooked()}else if(e.XString.isEqual(r,"Previous")){i.setPrevious()}else if(e.XString.isEqual(r,"Variable")){let t=i.getQueryModel().getVariable(n);if(e.notNull(t)&&t.getVariableType().isTypeOf(e.VariableType.DIMENSION_MEMBER_VARIABLE)){i.setVariable(t)}}if(t.containsKey("IsCalculationVariable")){i.setIsCalculationVariable(t.getBooleanByKey("IsCalculationVariable"))}if(e.isNull(l)){l=i}else{l.add(i)}e.QInARepoMemberFormulaMeasure.importDimensionContext(o,i,t)}else{let t=n.getStructureByKey("AttributeValue");if(e.notNull(t)){let i=t.getStringByKey("Name");let n=e.QFactory.createFormulaAttributeWithName(o,i);if(e.isNull(l)){l=n}else{l.add(n)}e.QInARepoMemberFormulaMeasure.importDimensionContext(o,l,t)}}}}}return l};e.QInARepoMemberFormulaMeasure.importInverseFormulas=function(t,i,n,r){let o=i.getDimension();let l=r.size();let a=i.getInverseFormulaList();a.clear();for(let p=0;p<l;p++){let l=r.get(p);let s=l.getStructureByKey("Formula");let u=e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,o,s,null,n);let g=null;let y=l.getStructureByKey("Condition");if(e.notNull(y)){g=e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,o,y,null,n)}let m=l.getStructureByKey("Target");let c=e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,o,m,null,n);let A=e.QFormulaInverseFormula.createInverseFormula(n,i,g,c,u);a.add(A)}};e.QInARepoMemberFormulaMeasure.importIteration=function(t,i,n,r){let o=e.QFactory.createIteration(n);i.setIteration(o);o.setStartValueMemberName(r.getStringByKey("StartValueMember"));let l=r.getListByKey("IterationDimensions");if(e.XCollectionUtils.hasElements(l)){let t=l.size();for(let i=0;i<t;i++){let t=l.getStructureAt(i);let r=e.QFactory.createIterationDimension(n);r.setDimensionName(t.getStringByKey("Name"));r.setPartitionLevelName(t.getStringByKey("PartitionLevel"));o.addIterationDimension(r)}}if(r.containsKey("UseGlobalSort")){o.setUseGlobalSort(r.getBooleanByKey("UseGlobalSort"))}};e.QInARepoMemberFormulaMeasure.importNameAndText=function(t,i,n,r){let o=e.QInARepoMemberFormulaMeasure.getNameForImport(i,r);let l=e.QInARepoMemberFormulaMeasure.getText(i,r);if(e.XStringUtils.isNullOrEmpty(o)&&e.XStringUtils.isNullOrEmpty(l)){o=i.getStringByKey("Name");l=i.getStringByKey("Description")}n.setName(o);if(e.notNull(l)&&(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.getOriginalText()===null)){n.setText(l)}};e.QInARepoMemberFormulaMeasure.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||!o.isCreatedFromMetadata()&&!o.isModelDefinedMember()){n.putString("Description",o.getOriginalText())}let l=e.PrFactory.createStructure();e.QInARepoMemberAbstract.exportFormulaItem(t,o.getFormula(),l,o);if(l.hasElements()){n.put("Formula",l)}if(o.getFormulaType()!==null){n.putString("FormulaType",o.getFormulaType().getName())}if(o.supportsCalculatedBeforeAggregation()&&(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QMeasureProperties.QY_CALCULATE_BEFORE_AGGREGATION))){if(o.isCalculatedBeforeAggregation()){n.putString("ExecutionStep","CalculationBeforeAggregation")}else if(t.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA){n.putString("ExecutionStep","CalculationAfterAggregation")}}if(e.XCollectionUtils.hasElements(o.getInverseFormulaList())){e.QInARepoMemberFormulaMeasure.exportInverseFormulas(t,o,n)}if(o.getIteration()!==null){e.QInARepoMemberFormulaMeasure.exportIteration(t,o,n)}if(o.getFormulaText().isPresent()){n.putString("FormulaText",o.getFormulaText().get())}if(o.isEditable()){n.putBoolean("IsFormulaEditable",o.isEditable())}if(o.getCustomMeasureNames().isPresent()&&!o.getCustomMeasureNames().get().isEmpty()){n.putNewList("CustomMeasuresName").addAllStrings(o.getCustomMeasureNames().get())}e.QInARepoMemberAbstract.prototype.exportGenericMemberProperties.call(this,t,o,n);if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_UNIT_TYPE)){n.putStringNotNull("UnitType",e.QInAConverter.lookupUnitTypeInA(o.getUnitType()))}n.putStringNotNull("UnitFixed",o.getUnitFixed());if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_AGGERGATION_TYPE)){let t=o.getAggregationType();e.QInARepoUtils.setNameIfNotNull(n,"Aggregation",t)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_PRESENTATION_SIGN_REVERSAL)){let t=o.getPresentationSignReversal();if(e.notNull(t)){n.putBoolean("PresentationSignReversal",t.getBoolean())}}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QMeasureProperties.QY_AUTO_SIGN_FLIP_FOR_RM_ONLY)){if(o.isAutoSignFlipRestrictedMeasureOnly()||t.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA&&o.hasPropertyChanged(e.QMeasureProperties.QY_AUTO_SIGN_FLIP_FOR_RM_ONLY)){n.putBoolean("AutoSignFlipForRMOnly",o.isAutoSignFlipRestrictedMeasureOnly())}}if(o.hasVisibilityFilter()&&o.getModelCapabilities().supportsCustomDimensionMemberVisibilityFilter()){let i=t.exportFilterExpression(o.getVisibilityFilter());if(e.notNull(i)){n.put("VisibilityFilter",i)}}return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoMemberFormulaMeasure.prototype.getComponentType=function(){return e.MemberType.FORMULA};e.QInARepoMemberFormulaMeasure.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=r;let a=o.getQueryModel();if(e.isNull(l)){l=a.getMeasureDimension()}let p=n;let s=e.QInARepoMemberFormulaMeasure.getNameForImport(i,l);if(e.isNull(p)&&l.getModelCapabilities().supportsCustomMeasuresInMetadata()){p=l.getStructureMember(s)}if(e.isNull(p)){if(this.newComponentCreationAllowed(t,i)){p=e.QFormulaMeasure._createFormulaMeasure(o,l)}}else{p.setDimension(l)}if(e.notNull(p)){e.QInARepoMemberFormulaMeasure.importNameAndText(t,i,p,l);let n=i.getStructureByKey("Formula");e.QInARepoMemberAbstract.importGenericMemberAbstractProperties(t,p,i);if(p.getMemberType()===e.MemberType.FORMULA){let r=e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,l,n,null,o);if(e.notNull(r)){p.setFormula(r)}let a=i.getStringByKey("FormulaType");if(e.XStringUtils.isNotNullAndNotEmpty(a)){p.setFormulaType(e.QFormulaType.lookup(a))}if(p.supportsCalculatedBeforeAggregation()&&(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.hasStringByKey("ExecutionStep"))){p.setIsCalculatedBeforeAggregation(e.XString.isEqual("CalculationBeforeAggregation",i.getStringByKey("ExecutionStep")))}let s=i.getListByKey("InverseFormulas");if(e.XCollectionUtils.hasElements(s)){e.QInARepoMemberFormulaMeasure.importInverseFormulas(t,p,o,s)}let u=i.getStructureByKey("Iteration");if(e.XCollectionUtils.hasElements(u)){e.QInARepoMemberFormulaMeasure.importIteration(t,p,o,u)}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("AutoSignFlipForRMOnly")){p.setAutoSignFlipRestrictedMeasureOnly(i.getBooleanByKeyExt("AutoSignFlipForRMOnly",false))}let g=i.getStringByKey("FormulaText");if(e.XStringUtils.isNotNullAndNotEmpty(g)){p.setFormulaText(g)}if(i.getBooleanByKeyExt("IsFormulaEditable",false)){p.setIsEditable(true)}let y=i.getListByKey("CustomMeasuresName");if(e.notNull(y)&&!y.isEmpty()){p.setCustomMeasureNames(e.PrUtils.asListOfString(y))}}let r=i.getStructureByKey("VisibilityFilter");if(e.notNull(r)&&p.getModelCapabilities().supportsCustomDimensionMemberVisibilityFilter()){let e=p.getVisibilityFilter();t.importFilterExpression(e,r,p,o)}}return p};e.QInARepoMemberFormulaMeasure.prototype.newModelComponent=function(t,i,n,r){let o=null;if(e.isNull(n)||!r.getModelCapabilities().supportsCustomMeasuresInMetadata()){o=e.QFormulaMeasure._createFormulaMeasure(r,null);o.setParent(n)}return o};e.QInARepoMemberParetoMeasure=function(){};e.QInARepoMemberParetoMeasure.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberParetoMeasure.prototype._ff_c="QInARepoMemberParetoMeasure";e.QInARepoMemberParetoMeasure.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||!o.isCreatedFromMetadata()&&!o.isModelDefinedMember()){n.putString("Description",o.getOriginalText())}n.putString("BaseMeasureName",o.getBaseMeasureName());n.putBoolean("UseSumAggregation",o.useSumAggregation());if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_ITERATION_DIMENSIONS)){let e=o.getIterationDimensionNames();if(e.hasElements()){let t=n.putNewList("IterationDimensions");t.addAllStrings(e)}}e.QInARepoMemberAbstract.prototype.exportGenericMemberProperties.call(this,t,o,n);return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoMemberParetoMeasure.prototype.getComponentType=function(){return e.MemberType.PARETO};e.QInARepoMemberParetoMeasure.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;let a=r;let p=i.getStringByKey("Name");let s=i.getStringByKey("Description");if(e.isNull(l)){l=a.addNewParetoMeasure(p,s)}else{l.setDimension(a);l.setName(p);if(e.notNull(s)&&(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||l.getOriginalText()===null)){l.setText(s)}}l.setBaseMeasureName(i.getStringByKey("BaseMeasureName"));e.QInARepoMemberAbstract.importGenericMemberAbstractProperties(t,l,i);l.setUseSumAggregation(i.getBooleanByKeyExt("UseSumAggregation",false));if(i.containsKey("IterationDimensions")){l.clearIterationDimensionNames();let e=i.getListByKey("IterationDimensions");for(let t=0;t<e.size();t++){l.addIterationDimensionName(e.getStringAt(t))}}return l};e.QInARepoMemberParetoMeasure.prototype.newModelComponent=function(t,i,n,r){let o=e.QParetoMeasure._createParetoMeasure(r,null);o.setParent(n);return o};e.QInARepoMemberRestricted=function(){};e.QInARepoMemberRestricted.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberRestricted.prototype._ff_c="QInARepoMemberRestricted";e.QInARepoMemberRestricted.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||!o.isCreatedFromMetadata()&&!o.isModelDefinedMember()){n.putString("Description",o.getOriginalText())}this.exportGenericMemberProperties(t,o,n);let l=o.getFilter().getFilterRootElement();if(e.notNull(l)&&(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||o.getFilter().getModCounter()>0)){let e=t.exportComponent(null,l,null,r);n.put("Selection",e)}let a=o.getTimeOperation();if(e.notNull(a)){let t=e.PrFactory.createStructure();e.QInARepoUtils.exportTimeOperation(t,a);n.put("TimeOperation",t)}let p=o.getAggregationType();e.QInARepoUtils.setNameIfNotNull(n,"Aggregation",p);n.putStringNotNull("UnitType",e.QInAConverter.lookupUnitTypeInA(o.getUnitType()));n.putStringNotNull("UnitFixed",o.getUnitFixed());n.putStringNotNull("UnitName",o.getUnitName());n.putStringNotNull("UnitTextName",o.getUnitTextName());if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE)){n.putStringNotNull("DataType",e.QInAConverter.lookupValueTypeInA(o.getDataType()))}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_PRESENTATION_SIGN_REVERSAL)){let t=o.getPresentationSignReversal();if(e.notNull(t)){n.putBoolean("PresentationSignReversal",t.getBoolean())}}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QMeasureProperties.QY_FLATTEN_DEPENDENT_RESTRICTED_MEASURES)){let i=o.isFlattenSelection();if(i||t.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA){n.putBoolean("FlattenDependentRestrictedMeasures",i)}}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QMeasureProperties.QY_DISABLE_IGNORE_EXTDIM_ON_FIXEDFILTERS)){if(o.isDisableIgnoreExternalDimensionOnFixedFilters()||t.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA&&o.hasPropertyChanged(e.QMeasureProperties.QY_DISABLE_IGNORE_EXTDIM_ON_FIXEDFILTERS)){n.putBoolean("DisableIgnoreExtDimOnFixedFilters",o.isDisableIgnoreExternalDimensionOnFixedFilters())}}if(o.getFilterOnVirtualMeasureCount()){n.putBoolean("FilterOnVirtualMeasureCount",true)}if(o.hasVisibilityFilter()&&o.getModelCapabilities().supportsCustomDimensionMemberVisibilityFilter()){let i=t.exportFilterExpression(o.getVisibilityFilter());if(e.notNull(i)){n.put("VisibilityFilter",i)}}if(o.hasDependentCalculation()){n.putBoolean("HasDependentCalculation",o.hasDependentCalculation())}return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoMemberRestricted.prototype.getComponentType=function(){return e.MemberType.RESTRICTED_MEASURE};e.QInARepoMemberRestricted.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;let a=r;let p=i.getStringByKey("Name");let s=i.getStringByKey("AliasName");let u=i.getStringByKey("Description");if(a.getModelCapabilities().supportsCustomMeasuresInMetadata()){l=a.getStructureMember(p);if(e.notNull(l)&&l.getMemberType()!==e.MemberType.RESTRICTED_MEASURE){a.removeMeasureWithNoValidation(p);l=null}}if(e.isNull(l)){if(this.newComponentCreationAllowed(t,i)){l=a.addNewRestrictedMeasure(e.isNull(p)?s:p,u)}}else{l.setDimension(a);l.setName(p);if(e.notNull(u)&&(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||l.getOriginalText()===null)){l.setText(u)}}if(e.notNull(l)){e.QInARepoMemberAbstract.importGenericMemberAbstractProperties(t,l,i);if(l.getMemberType()===e.MemberType.RESTRICTED_MEASURE){let n=l.getFilter();let r=i.getStructureByKey("InAFilterExpression");if(e.notNull(r)){let i=t.m_mode;t.m_mode=e.QModelFormat.INA_DATA;t.importFilterExpression(n,r,l,o);t.m_mode=i}else{let r=null;let l=i.getStructureByKey("Selection");if(e.notNull(l)){r=t.importComponent(null,l,null,n,o);n.setComplexRoot(r)}}let a=i.getStructureByKey("TimeOperation");if(e.notNull(a)){let t=a.getStringByKey("Name");let i=e.QTimeOperationFunction.lookup(a.getStringByKey("TimeOperationFunction"));let n=e.QTimeOperationGranularity.lookup(a.getStringByKey("TimeOperationGranularity"));let r=a.getIntegerByKey("TimeOperationPeriod");l.setTimeOperation(t,i,n,r);l.getTimeOperation().setForceMemberNavigationGeneration(a.getBooleanByKey("TimeOperationForceMemberNavGeneration"));l.getTimeOperation().setUseToDateFlatRangeSelection(a.getBooleanByKey("TimeOperationUseToDateFlatRangeSelection"));l.getTimeOperation().setHierarchyLevelName(a.getStringByKey("LevelName"));let o=a.getStringByKey("TimePeriodOperationLevel");if(e.notNull(o)){l.getTimeOperation().setTimePeriodOperationLevel(e.QTimePeriodOperationLevel.lookup(o))}}let p=i.getBooleanByKey("FlattenDependentRestrictedMeasures");l.setFlattenSelection(p);if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.containsKey("DisableIgnoreExtDimOnFixedFilters")){l.setDisableIgnoreExternalDimensionOnFixedFilters(i.getBooleanByKeyExt("DisableIgnoreExtDimOnFixedFilters",false))}let s=i.getBooleanByKey("HasDependentCalculation");if(s){l.setHasDependentCalculation(s)}}if(i.getBooleanByKey("FilterOnVirtualMeasureCount")){l.setFilterOnVirtualMeasureCount(true)}let n=i.getStructureByKey("VisibilityFilter");if(e.notNull(n)&&l.getModelCapabilities().supportsCustomDimensionMemberVisibilityFilter()){let e=l.getVisibilityFilter();t.importFilterExpression(e,n,l,o)}}return l};e.QInARepoMemberRestricted.prototype.newModelComponent=function(t,i,n,r){let o=null;if(e.isNull(n)||r.getModelCapabilities().supportsCustomMeasuresInMetadata()===false){o=e.QRestrictedMeasure._createRestrictedMeasure(r,null);o.setParent(n)}return o};e.QInARepoMemberRunningTotal=function(){};e.QInARepoMemberRunningTotal.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberRunningTotal.prototype._ff_c="QInARepoMemberRunningTotal";e.QInARepoMemberRunningTotal.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||!o.isCreatedFromMetadata()&&!o.isModelDefinedMember()){n.putString("Description",o.getOriginalText())}n.putString("BaseMeasureName",o.getBaseMeasureName());if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_RUNNING_TOTAL_OPERATOR)){n.putString("Operator",e.QInAConverter.lookupRunningTotalOperatorInA(o.getOperator()))}let l;if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_ITERATION_DIMENSIONS)){l=n.putNewList("IterationDimensions");let e=o.getIterationDimensions();for(let t=0;t<e.size();t++){let i=l.addNewStructure();let n=e.get(t);i.putStringNotNullAndNotEmpty("Name",n.getDimensionName());i.putStringNotNullAndNotEmpty("PartitionLevel",n.getPartitionLevelName())}}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_AUTO_SIGN_FLIP)){if(o.isAutoSignFlip()||o.hasPropertyChanged(e.QStructureMemberProperties.QY_AUTO_SIGN_FLIP)&&t.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA){n.putBoolean("AutoSignFlip",o.isAutoSignFlip())}}if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_UNIT_TYPE)){n.putStringNotNull("UnitType",e.QInAConverter.lookupUnitTypeInA(o.getUnitType()))}n.putStringNotNull("UnitFixed",o.getUnitFixed());n.putStringNotNull("UnitName",o.getUnitName());n.putStringNotNull("UnitTextName",o.getUnitTextName());if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE)){n.putStringNotNull("DataType",e.QInAConverter.lookupValueTypeInA(o.getDataType()))}if(o.useGlobalSort()){n.putBoolean("UseGlobalSort",true)}e.QInARepoMemberAbstract.prototype.exportGenericMemberProperties.call(this,t,o,n);return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoMemberRunningTotal.prototype.getComponentType=function(){return e.MemberType.RUNNING_TOTAL};e.QInARepoMemberRunningTotal.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;let a=r;let p=i.getStringByKey("Name");let s=i.getStringByKey("Description");if(e.isNull(l)){l=a.addNewRunningTotalMeasure(p,s)}else{l.setDimension(a);l.setName(p);if(e.notNull(s)&&(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||l.getOriginalText()===null)){l.setText(s)}}l.setBaseMeasureName(i.getStringByKey("BaseMeasureName"));e.QInARepoMemberAbstract.importGenericMemberAbstractProperties(t,l,i);l.setBaseMeasureName(i.getStringByKey("BaseMeasureName"));if(i.containsKey("Operator")){l.setOperator(e.QInAConverter.lookupRunningTotalOperator(i.getStringByKey("Operator")))}let u;if(i.containsKey("IterationDimensions")){l.clearIterationDimensions();u=i.getListByKey("IterationDimensions");for(let e=0;e<u.size();e++){let t=l.addNewIterationDimension();let i=u.getStructureAt(e);t.setDimensionName(i.getStringByKey("Name"));t.setPartitionLevelName(i.getStringByKey("PartitionLevel"))}}if(i.containsKey("UseGlobalSort")){l.setUseGlobalSort(i.getBooleanByKey("UseGlobalSort"))}l.setAutoSignFlip(i.getBooleanByKey("AutoSignFlip"));return l};e.QInARepoMemberRunningTotal.prototype.newModelComponent=function(t,i,n,r){let o=e.QRunningTotalMeasure._createRunningTotalMeasure(r,null);o.setParent(n);return o};e.QInARepoMemberUnit=function(){};e.QInARepoMemberUnit.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberUnit.prototype._ff_c="QInARepoMemberUnit";e.QInARepoMemberUnit.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||!o.isCreatedFromMetadata()&&!o.isModelDefinedMember()){n.putString("Description",o.getOriginalText())}n.putStringNotNullAndNotEmpty("BaseMeasureName",o.getBaseMeasureName());n.putStringNotNullAndNotEmpty("UnitTranslationName",o.getUnitTranslationName());let l=o.getLocalUnitTranslation();let a=n.putNewStructure("UnitTranslation");t.exportUnitTranslationElement(l,a);if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_UNIT_TYPE)){n.putStringNotNull("UnitType",e.QInAConverter.lookupUnitTypeInA(o.getUnitType()))}n.putStringNotNull("UnitFixed",o.getUnitFixed());n.putStringNotNull("UnitName",o.getUnitName());n.putStringNotNull("UnitTextName",o.getUnitTextName());if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE)){n.putStringNotNull("DataType",e.QInAConverter.lookupValueTypeInA(o.getDataType()))}e.QInARepoMemberAbstract.prototype.exportGenericMemberProperties.call(this,t,o,n);return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoMemberUnit.prototype.getComponentType=function(){return e.MemberType.UNIT_MEASURE};e.QInARepoMemberUnit.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;let a=r;let p=i.getStringByKey("Name");let s=i.getStringByKey("Description");if(e.isNull(l)){l=a.addNewUnitMeasure(p,s)}else{l.setDimension(a);l.setName(p);if(e.notNull(s)&&(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||l.getText()===null)){l.setText(s)}}e.QInARepoMemberAbstract.importGenericMemberAbstractProperties(t,l,i);l.setBaseMeasureName(i.getStringByKey("BaseMeasureName"));if(i.containsKey("UnitTranslationName")){l.setUnitTranslationName(i.getStringByKey("UnitTranslationName"))}let u=l.getLocalUnitTranslation();let g=i.getStructureByKey("UnitTranslation");t.importUnitTranslationElement(g,u,o);return l};e.QInARepoMemberUnit.prototype.newModelComponent=function(t,i,n,r){let o=e.QUnitMeasure._createUnitMeasure(r,null);o.setParent(n);return o};e.QInARepoMemberVarianceMeasure=function(){};e.QInARepoMemberVarianceMeasure.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberVarianceMeasure.prototype._ff_c="QInARepoMemberVarianceMeasure";e.QInARepoMemberVarianceMeasure.prototype.exportComponentWithStructure=function(t,i,n,r){let o=i;n.putString("Name",o.getName());if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||!o.isCreatedFromMetadata()&&!o.isModelDefinedMember()){n.putString("Description",o.getOriginalText())}this.exportVarianceMember(n,o);this.exportGenericMemberProperties(t,o,n);this.exportFilter(t,n,r,o.getBaseFilter(),"SelectionBase");this.exportFilter(t,n,r,o.getReferenceFilter(),"SelectionReference");let l=o.isFlattenBaseFilter();if(l){n.putBoolean("FlattenBaseFilter",l)}let a=o.isFlattenReferenceFilter();if(a){n.putBoolean("FlattenReferenceFilter",a)}return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,i,n,r)};e.QInARepoMemberVarianceMeasure.prototype.exportFilter=function(t,i,n,r,o){let l=r.getFilterRootElement();if(e.notNull(l)){let r=t.exportComponent(null,l,null,n);let a=e.PrFactory.createStructure();a.put("Selection",r);i.put(o,a)}};e.QInARepoMemberVarianceMeasure.prototype.exportVarianceMember=function(t,i){t.putString("BaseMeasureName",i.getBaseMeasure());t.putString("ReferenceMeasureName",i.getReferenceMeasure());e.QInARepoUtils.setNameIfNotNull(t,"CalculationType",i.getCalculationType());e.QInARepoUtils.setNameIfNotNull(t,"NullHandling",i.getNullHandlingType());let n=i.getBaseIgnoredExternalDimensions();if(n.hasElements()){let e=t.putNewList("BaseIgnoreExternalDimensions");e.addAllStrings(n)}let r=i.getReferenceIgnoredExternalDimensions();if(r.hasElements()){let e=t.putNewList("ReferenceIgnoreExternalDimensions");e.addAllStrings(r)}let o=i.getBaseTimeOperation();if(e.notNull(o)){let i=e.PrFactory.createStructure();e.QInARepoUtils.exportTimeOperation(i,o);t.put("BaseTimeOperation",i)}let l=i.getReferenceTimeOperation();if(e.notNull(l)){let i=e.PrFactory.createStructure();e.QInARepoUtils.exportTimeOperation(i,l);t.put("ReferenceTimeOperation",i)}};e.QInARepoMemberVarianceMeasure.prototype.getComponentType=function(){return e.MemberType.VARIANCE};e.QInARepoMemberVarianceMeasure.prototype.importComponentWithStructure=function(t,i,n,r,o){let l=n;let a=r;let p=i.getStringByKey("Name");let s=i.getStringByKey("Description");if(e.isNull(l)){l=a.addNewVarianceMeasure(p,s)}else{l.setDimension(a);l.setName(p);if(e.notNull(s)&&(t.m_mode!==e.QModelFormat.INA_REPOSITORY_DELTA||l.getOriginalText()===null)){l.setText(s)}}let u=i.getBooleanByKey("FlattenBaseFilter");l.setFlattenBaseFilter(u);let g=i.getBooleanByKey("FlattenReferenceFilter");l.setFlattenReferenceFilter(g);this.importVarianceMember(i,l);this.importFilter(t,i,o,l.getBaseFilter(),"SelectionBase");this.importFilter(t,i,o,l.getReferenceFilter(),"SelectionReference");let y=l.getReferenceFilter();let m=null;let c=i.getStructureByKey("SelectionReference");if(e.notNull(c)){let e=c.getStructureByKey("Selection");m=t.importComponent(null,e,null,y,o)}y.setComplexRoot(m);return l};e.QInARepoMemberVarianceMeasure.prototype.importFilter=function(t,i,n,r,o){let l=null;let a=i.getStructureByKey(o);if(e.notNull(a)){let e=a.getStructureByKey("Selection");l=t.importComponent(null,e,null,r,n)}r.setComplexRoot(l)};e.QInARepoMemberVarianceMeasure.prototype.importVarianceMember=function(t,i){i.setNullHandlingType(e.VarianceNullHandlingType.lookup(t.getStringByKey("NullHandling")));i.setCalculationType(e.VarianceCalculationType.lookup(t.getStringByKey("CalculationType")));i.setBaseMeasure(t.getStringByKey("BaseMeasureName"));i.setReferenceMeasure(t.getStringByKey("ReferenceMeasureName"));if(t.containsKey("BaseIgnoreExternalDimensions")){let e=t.getListByKey("BaseIgnoreExternalDimensions");for(let t=0;t<e.size();t++){i.addBaseExternalDimensionToIgnore(e.getStringAt(t))}}if(t.containsKey("ReferenceIgnoreExternalDimensions")){let e=t.getListByKey("ReferenceIgnoreExternalDimensions");for(let t=0;t<e.size();t++){i.addReferenceExternalDimensionToIgnore(e.getStringAt(t))}}let n=t.getStructureByKey("BaseTimeOperation");if(e.notNull(n)){let t=n.getStringByKey("Name");let r=e.QTimeOperationFunction.lookup(n.getStringByKey("TimeOperationFunction"));let o=e.QTimeOperationGranularity.lookup(n.getStringByKey("TimeOperationGranularity"));let l=n.getIntegerByKey("TimeOperationPeriod");i.setBaseTimeOperation(t,r,o,l);i.getBaseTimeOperation().setForceMemberNavigationGeneration(n.getBooleanByKey("TimeOperationForceMemberNavGeneration"));i.getBaseTimeOperation().setUseToDateFlatRangeSelection(n.getBooleanByKey("TimeOperationUseToDateFlatRangeSelection"));i.getBaseTimeOperation().setHierarchyLevelName(n.getStringByKey("LevelName"));let a=n.getStringByKey("TimePeriodOperationLevel");if(e.notNull(a)){i.getBaseTimeOperation().setTimePeriodOperationLevel(e.QTimePeriodOperationLevel.lookup(a))}}let r=t.getStructureByKey("ReferenceTimeOperation");if(e.notNull(r)){let t=r.getStringByKey("Name");let n=e.QTimeOperationFunction.lookup(r.getStringByKey("TimeOperationFunction"));let o=e.QTimeOperationGranularity.lookup(r.getStringByKey("TimeOperationGranularity"));let l=r.getIntegerByKey("TimeOperationPeriod");i.setReferenceTimeOperation(t,n,o,l);i.getReferenceTimeOperation().setForceMemberNavigationGeneration(r.getBooleanByKey("TimeOperationForceMemberNavGeneration"));i.getReferenceTimeOperation().setUseToDateFlatRangeSelection(r.getBooleanByKey("TimeOperationUseToDateFlatRangeSelection"));i.getReferenceTimeOperation().setHierarchyLevelName(r.getStringByKey("LevelName"));let a=r.getStringByKey("TimePeriodOperationLevel");if(e.notNull(a)){i.getReferenceTimeOperation().setTimePeriodOperationLevel(e.QTimePeriodOperationLevel.lookup(a))}}};e.QInARepoMemberVarianceMeasure.prototype.newModelComponent=function(t,i,n,r){let o=e.QVarianceMeasure._createVarianceMeasure(r,n);o.setParent(n);return o};e.QInARepoVarHierNode=function(){};e.QInARepoVarHierNode.prototype=new e.QInARepoVarDimMember;e.QInARepoVarHierNode.prototype._ff_c="QInARepoVarHierNode";e.QInARepoVarHierNode.prototype.getComponentType=function(){return e.VariableType.HIERARCHY_NODE_VARIABLE};e.QInAExport=function(){};e.QInAExport.prototype=new e.QInA;e.QInAExport.prototype._ff_c="QInAExport";e.QInAImport=function(){};e.QInAImport.prototype=new e.QInA;e.QInAImport.prototype._ff_c="QInAImport";e.QInAImport.prototype.m_cacheKey=null;e.InARepoMapperContextType=function(){};e.InARepoMapperContextType.prototype=new e.XConstantWithParent;e.InARepoMapperContextType.prototype._ff_c="InARepoMapperContextType";e.InARepoMapperContextType.AXES_SETTINGS=null;e.InARepoMapperContextType.CONDITION=null;e.InARepoMapperContextType.DIMENSION=null;e.InARepoMapperContextType.DIMENSION_HIERARCHY=null;e.InARepoMapperContextType.FILTER=null;e.InARepoMapperContextType.FILTER_CARTESIAN_LIST=null;e.InARepoMapperContextType.FILTER_OPERATION=null;e.InARepoMapperContextType.RESULT_STRUCTURE=null;e.InARepoMapperContextType.UNDEFINED=null;e.InARepoMapperContextType.VARIANCE_MEMBER=null;e.InARepoMapperContextType.s_allTypes=null;e.InARepoMapperContextType.createContext=function(t,i,n,r){let o=e.XConstant.setupName(new e.InARepoMapperContextType,t);o.setParent(r);o.m_typeParam=i;o.m_valueParam=n;if(e.notNull(i)){e.InARepoMapperContextType.s_allTypes.add(o)}return o};e.InARepoMapperContextType.getByType=function(t){return e.XStringUtils.isNullOrEmpty(t)?null:e.XCollectionUtils.findFirst(e.InARepoMapperContextType.s_allTypes,i=>e.XString.isEqual(i.m_typeParam,t))};e.InARepoMapperContextType.staticSetup=function(){e.InARepoMapperContextType.s_allTypes=e.XList.create();e.InARepoMapperContextType.UNDEFINED=e.InARepoMapperContextType.createContext("undefined",null,null,null);e.InARepoMapperContextType.DIMENSION=e.InARepoMapperContextType.createContext("dimension","Dimension","Name",null);e.InARepoMapperContextType.DIMENSION_HIERARCHY=e.InARepoMapperContextType.createContext("dimensionHierarchy","Hierarchy",null,e.InARepoMapperContextType.DIMENSION);e.InARepoMapperContextType.VARIANCE_MEMBER=e.InARepoMapperContextType.createContext("varianceMember","Variance",null,e.InARepoMapperContextType.DIMENSION);e.InARepoMapperContextType.FILTER=e.InARepoMapperContextType.createContext("filter","FilterExpression",null,null);e.InARepoMapperContextType.FILTER_CARTESIAN_LIST=e.InARepoMapperContextType.createContext("filter","FilterCartesianList","FieldName",e.InARepoMapperContextType.FILTER);e.InARepoMapperContextType.FILTER_OPERATION=e.InARepoMapperContextType.createContext("filter","FilterOperation","FieldName",e.InARepoMapperContextType.FILTER);e.InARepoMapperContextType.AXES_SETTINGS=e.InARepoMapperContextType.createContext("axesSettings","AxesSettings",null,null);e.InARepoMapperContextType.RESULT_STRUCTURE=e.InARepoMapperContextType.createContext("resultStructure","Totals",null,null);e.InARepoMapperContextType.CONDITION=e.InARepoMapperContextType.createContext("condition","Condition",null,null)};e.InARepoMapperContextType.prototype.m_typeParam=null;e.InARepoMapperContextType.prototype.m_valueParam=null;e.InARepoMapperContextType.prototype.getValueParam=function(){return this.m_valueParam};e.OlapSerializationModule=function(){};e.OlapSerializationModule.prototype=new e.DfModule;e.OlapSerializationModule.prototype._ff_c="OlapSerializationModule";e.OlapSerializationModule.s_module=null;e.OlapSerializationModule.getInstance=function(){if(e.isNull(e.OlapSerializationModule.s_module)){e.DfModule.checkInitialized(e.OlapImplModule.getInstance());e.OlapSerializationModule.s_module=e.DfModule.startExt(new e.OlapSerializationModule);e.QFactory.setModelMapperInstance(()=>e.InARepoMapper.create());e.InARepoMapperContextType.staticSetup();e.DfModule.stopExt(e.OlapSerializationModule.s_module)}return e.OlapSerializationModule.s_module};e.OlapSerializationModule.prototype.getName=function(){return"ff4394.olap.serialization"};e.OlapSerializationModule.getInstance();return e});
//# sourceMappingURL=ff4394.olap.serialization.js.map