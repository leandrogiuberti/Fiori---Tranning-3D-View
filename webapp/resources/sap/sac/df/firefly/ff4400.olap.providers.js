/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff4394.olap.serialization"],function(e){"use strict";e.XCommandUtil={activate:function(t,n){if(e.isNull(n)){return}let i=n.getMaxXVersion();if(i>=0&&i<=t.getApplication().getXVersion()){return}t.getSession().activateFeatureToggle(n)},activateExperimentalFeatures:function(t,n){if(e.XStringUtils.isNotNullAndNotEmpty(n)){if(e.XString.containsString(n,",")){let i=e.XStringTokenizer.splitString(n,",");let r=i.size();for(let n=0;n<r;n++){e.XCommandUtil.activate(t,e.FeatureToggle.lookup(i.get(n)))}}else{e.XCommandUtil.activate(t,e.FeatureToggle.lookup(n))}}},getExtDimInfoByName:function(t,n){let i=n.size();for(let r=0;r<i;r++){let i=n.getStructureAt(r);if(e.XString.isEqual(t,i.getStringByKey("name"))){return i}}return null},handleInactiveCapabilities:function(t,n,i){e.XCommandUtil.activateExperimentalFeatures(t,n);if(e.notNull(i)){let n=i.getKeysAsIterator();while(n.hasNext()){let r=n.next();let o=i.getByKey(r).getBoolean();let l=e.FeatureToggle.lookup(r);if(o){e.XCommandUtil.activate(t,l)}else{let n=t.getSession().getFeatureToggles();if(e.notNull(n)){let e=n;e.removeElement(l)}}}}},updateExtendedDimensionProperties:function(t,n){if(!e.XCollectionUtils.hasElements(t)||!e.XCollectionUtils.hasElements(n)){return}let i=t.size();for(let r=0;r<i;r++){let i=t.get(r);let o=e.XCommandUtil.getExtDimInfoByName(i.getName(),n);if(e.notNull(o)){let n=o.getStructureByKey("dataSource");if(e.notNull(n)){let i=t.get(r).getDataSource();let o=n.getStringByKey("packageName");if(e.notNull(o)){i.setPackageName(o)}let l=n.getStringByKey("objectName");if(e.notNull(l)){i.setObjectName(l)}let a=n.getStringByKey("schemaName");if(e.notNull(a)){i.setSchemaName(a)}let s=n.getStringByKey("type");if(e.notNull(s)){i.setType(e.MetaObjectType.lookup(s))}}}}}};e.QCsnConverter={s_lookupValueType:null,s_lookupValueTypeCsn:null,lookupAxis:function(t){let n=e.XString.toUpperCase(t);if(e.XString.isEqual(n,e.CsnConstants.AXIS_ROWS)){return e.AxisType.ROWS}if(e.XString.isEqual(n,e.CsnConstants.AXIS_COLUMNS)){return e.AxisType.COLUMNS}return e.AxisType.FREE},lookupAxisCsn:function(t){if(t===e.AxisType.ROWS){return e.CsnConstants.AXIS_ROWS}if(t===e.AxisType.COLUMNS){return e.CsnConstants.AXIS_COLUMNS}return e.CsnConstants.AXIS_FREE},lookupValueType:function(t,n){let i=e.QCsnConverter.s_lookupValueType.getByKey(t);return e.notNull(i)?i:n},lookupValueTypeCsn:function(t,n){let i=e.QCsnConverter.s_lookupValueTypeCsn.getByKey(t.getName());return e.notNull(i)?i:n},mapConstant:function(e,t,n,i){e.put(i,n);t.put(n.getName(),i)},setupDimensionType:function(){e.QCsnConverter.s_lookupValueType=e.XHashMapByString.create();e.QCsnConverter.s_lookupValueTypeCsn=e.XHashMapByString.create();e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.LOWER_CASE_STRING,e.CsnConstants.TYPE_STRING);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.UPPER_CASE_STRING,e.CsnConstants.TYPE_STRING);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.STRING,e.CsnConstants.TYPE_LARGE_STRING);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.STRING,e.CsnConstants.TYPE_STRING);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.CHAR,e.CsnConstants.TYPE_STRING);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.INTEGER,e.CsnConstants.TYPE_DECIMAL);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.INTEGER,e.CsnConstants.TYPE_INTEGER);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.LONG,e.CsnConstants.TYPE_INTEGER64);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.BOOLEAN,e.CsnConstants.TYPE_BOOLEAN);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.DECIMAL_FLOAT,e.CsnConstants.TYPE_DECIMAL_FLOAT);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.DOUBLE,e.CsnConstants.TYPE_DOUBLE);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.DATE,e.CsnConstants.TYPE_LOCAL_DATE);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.DATE,e.CsnConstants.TYPE_DATE);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.TIME,e.CsnConstants.TYPE_LOCAL_TIME);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.TIME,e.CsnConstants.TYPE_TIME);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.DATE_TIME,e.CsnConstants.TYPE_LOCAL_DATE_TIME);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.DATE_TIME,e.CsnConstants.TYPE_DATE_TIME);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.TIMESPAN,e.CsnConstants.TYPE_UTC_TIMESTAMP);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.TIMESPAN,e.CsnConstants.TYPE_TIMESTAMP)},staticSetup:function(){e.QCsnConverter.setupDimensionType()}};e.QInADataSourceBlending={exportAttributeMapping:function(t){let n=e.PrFactory.createStructure();n.putString("AttributeName",t.getAttributeName());n.putBoolean("IsLinkKey",t.isLinkKey());let i=t.getAttributeMappingDefinitions().getIterator();let r=e.QInADataSourceBlending.exportMappingDefinitions(i);e.XObjectExt.release(i);n.put("Mapping",r);e.QInADataSourceBlending.exportConstantMapping(r,t.getConstantMappings().getIterator());return n},exportBlendingMappings:function(t){let n=e.PrFactory.createList();let i=t.getIterator();while(i.hasNext()){let t=i.next();let r=e.QInADataSourceBlending.exportDimensionMapping(t);n.add(r)}return n},exportBlendingSources:function(t,n,i){let r=n.getBlendingHost();let o=r.getSource();let l=t;if(t.isTypeOf(e.QModelFormat.INA_PERSISTED_QUERY_DATA)&&i){l=e.QModelFormat.INA_PERSISTED_QUERY_DATA_BLENDING}else if(t.isTypeOf(e.QModelFormat.INA_DATA)){l=i&&t!==e.QModelFormat.INA_DATA_BLENDING_SOURCE_METADATA?e.QModelFormat.INA_DATA_BLENDING_SOURCE:e.QModelFormat.INA_DATA_BLENDING_SOURCE_METADATA}let a=e.PrFactory.createList();let s=n.getSources().getIterator();while(s.hasNext()){let t=s.next();let n=t.getQueryModel();if(e.isNull(n)){return null}let u=a.addNewStructure();u.putString("Type","Query");u.putString("AliasName",t.getQueryAliasName());u.putString("ObjectName",t.getQueryAliasName());let p=u.putNewStructure("DefiningContext");let g=n.serializeToElement(l).asStructure();e.QInADataSourceBlending.exportOptimizerHints(g,n.getOptimizerHintsByExecutionEngine(e.ExecutionEngine.MDS));let m=n.getQueryManager();let c=m.getResultSetPersistenceIdentifier();if(t!==o&&t.isRemoteSource()&&!l.isTypeOf(e.QModelFormat.INA_REPOSITORY)){e.QInADataSourceBlending.updateRemoteDataSource(g,m,i,r.getSystemDescription())}else if(!t.isRemoteSource()&&e.XStringUtils.isNotNullAndNotEmpty(c)&&i){g.getStructureByKey("DataSource").putString("InstanceId",c)}let y=e.QInADataSourceBlending.exportResultSetFeatures(n,true);g.put("ResultSetFeatureRequest",y);p.put("Definition",g)}e.XObjectExt.release(s);return a},exportConstantMapping:function(t,n){while(n.hasNext()){let i=n.next();let r=e.PrFactory.createStructure();r.putString("AliasName",i.getQueryAliasName());let o=r.putNewStructure("MappingDefinition");let l=o.putNewStructure("Constant");l.putString("Value",i.getMemberName());l.putString("ValueType",e.QInAConverter.lookupValueTypeInA(i.getValueType()));t.add(r)}},exportDataSourceBlending:function(t,n,i){let r=e.PrFactory.createStructure();let o=r.putNewStructure("Metadata");let l=o.putNewStructure("DataSource");l.putString("Type",e.QueryManagerMode.BLENDING.getName());let a=e.XStringBuffer.create();for(let e=0;e<n.getSources().size();e++){a.append(n.getSources().get(e).getQueryAliasName())}let s=a.toString();if(a.length()>=256){s=e.XSha1.createSHA1(s)}l.putString("ObjectName",s);let u=e.QInADataSourceBlending.exportBlendingSources(t,n,i);l.put("Sources",u);let p=e.QInADataSourceBlending.exportBlendingMappings(n.getMappings());l.put("Mappings",p);return l},exportDimensionMapping:function(t){let n=e.PrFactory.createStructure();n.putString("DimensionName",t.getMemberName());n.putString("LinkType",t.getLinkType().getName());if(t.isPreservingMembers()){n.putBoolean("PreserveMembers",true)}if(!t.isReturningOriginKeys()){n.putBoolean("ReturnOriginKeys",false)}let i=t.getMappingDefinitions().getIterator();let r=e.QInADataSourceBlending.exportMappingDefinitions(i);e.XObjectExt.release(i);n.put("Mapping",r);if((t.getLinkType()===e.BlendingLinkType.ALL_DATA||t.getLinkType()===e.BlendingLinkType.NONE)&&t.getConstantMappings().hasElements()){e.QInADataSourceBlending.exportConstantMapping(r,t.getConstantMappings().getIterator())}let o=e.PrFactory.createList();let l=t.getAttributeMappings().getIterator();while(l.hasNext()){let t=l.next();let n=e.QInADataSourceBlending.exportAttributeMapping(t);o.add(n)}e.XObjectExt.release(l);if(!o.isEmpty()){n.put("AttributeMappings",o)}return n},exportMappingDefinitions:function(t){let n=e.PrFactory.createList();while(t.hasNext()){let e=t.next();let i=n.addNewStructure();i.putString("AliasName",e.getQueryAliasName());let r=i.putNewStructure("MappingDefinition");let o=r.putNewStructure("Member");o.putString("Name",e.getMemberName())}return n},exportOptimizerHints:function(t,n){if(e.XCollectionUtils.hasElements(n)){let i=e.XList.createWithList(n.getKeysAsReadOnlyList());i.sortByDirection(e.XSortDirection.ASCENDING);let r=t.putNewStructure("Hints");let o=r.putNewList(e.ExecutionEngine.MDS.getName());let l=i.size();for(let e=0;e<l;e++){let t=i.get(e);let r=o.addNewStructure();r.putString("Key",t);r.putString("Value",n.getByKey(t))}}},exportResultSetFeatures:function(t,n){let i=e.PrFactory.createStructure();i.putBoolean("UseDefaultAttributeKey",false);let r=t.getQueryManager();if(r.getMaxResultRecords()!==-1){i.putLong("MaxResultRecords",r.getMaxResultRecords())}e.QInAOptions.exportPaging(i,r);e.QInAOptions.exportSuppressKeyfigureCalculation(i,r);i.putString("ResultFormat","Version2");i.putString("ResultEncoding","None");if(n){i.putBoolean("IsCubeBlendingSubquery",true)}if(!r.isResultSetTransportEnabled()){i.putBoolean("ReturnEmptyJsonResultSet",true)}return i},getExtendedStructureMemberNames:function(t){let n=t.getMeasureDimension().getExtendedStructureMembers();return e.XCollectionUtils.createListOfNames(n)},updateBWRemoteSource:function(t,n,i){if(n.isTypeOf(e.SystemType.BW)||n.isTypeOf(e.SystemType.VIRTUAL_INA)){t.remove("FixedFilter");t.remove("DynamicFilter");t.remove("Filter");t.remove("Conditions");t.remove("Query");t.remove("QueryDataCells");t.remove("Sort");t.remove("ExtendedSortTypes");t.remove("Variables");t.remove("UniversalDisplayHierarchies");let n=e.QInADataSourceBlending.getExtendedStructureMemberNames(i);let r=t.getListByKey("Dimensions");let o=e.PrUtils.getListSize(r,0);for(let t=o-1;t>=0;t--){if(e.QInAConverter.lookupAxisType(r.getStructureAt(t).getStringByKey("Axis"))===e.AxisType.FREE){r.removeAt(t)}}o=e.PrUtils.getListSize(r,0);for(let t=0;t<o;t++){let i=r.getStructureAt(t).getListByKey("Members");let o=e.PrUtils.getListSize(i,0);for(let e=0;e<o;e++){let t=i.getStructureAt(e);if(n.contains(t.getStringByKey("Name"))){t.remove("Selection")}t.remove("Formula")}}}},updateRemoteDataSource:function(t,n,i,r){let o=t.putNewStructure("DataSource");o.putString("Type","SerializedData");o.putString("InstanceId",n.getResultSetPersistenceIdentifier());let l=n.getActiveResultSetContainer();let a=n.getSystemDescription();let s=e.XStringUtils.isNotNullAndNotEmpty(l.getSerializedView())&&(!i||e.XStringUtils.isNotNullAndNotEmpty(l.getSerializedCube()));if(!s&&r.isSystemMappingValid(a)){let e=a.getSystemMapping(r.getSystemName());o.putString("ObjectName",e.getDeserializeTable());o.putString("SchemaName",e.getDeserializeSchema())}else{let t=o.putNewStructure("SerializedData");let r=n.getTagging().containsKey(e.QStateConstants.TAG_PERSISTED_INA_VIEW_CUBE_SERIALIZATION_OPTIMIZATION);if(!r){t.putString("View",l.getSerializedView());if(i){t.putStringNotNullAndNotEmpty("Cube",l.getSerializedCube())}}}e.QInADataSourceBlending.updateBWRemoteSource(t,n.getSystemType(),n.getQueryModel())}};e.QInADataSourceExtDims={checkIsValid:function(t,n){let i=n.getJoinType();if(e.isNull(i)){t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate3("Extended dimension '",n.getName(),"' is missing a JoinType"));return false}let r=n.getDimensionType();if(r.isTypeOf(e.DimensionType.GIS_DIMENSION)&&i.isTypeOf(e.JoinType._TIME)){t.addError(e.ErrorCodes.INVALID_PARAMETER,"Spatial extended dimensions must not have join type INNER");return false}else if((r.isTypeOf(e.DimensionType.TIME)||r.isTypeOf(e.DimensionType.DATE))&&i.isTypeOf(e.JoinType._SPATIAL)){t.addError(e.ErrorCodes.INVALID_PARAMETER,"Time extended dimensions must not have spatial join type");return false}let o=n.getDataSource();if(e.isNull(o)){t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate3("Extended dimension '",n.getName(),"' is missing its DataSource"));return false}let l=n.getJoinParameters();if(i===e.JoinType.WITHIN_DISTANCE&&l.isEmpty()){t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate3("Extended dimension '",n.getName(),"' of joinType 'WITHIN_DISTANCE' is expected to have the 2 parameters 'distance' and 'unit of measure' (in that order)"));return false}return true},exportQd:function(t,n,i,r){let o=n.getExtendedDimensions();if(e.XCollectionUtils.hasElements(o)){let l=i.putNewList("ExtendedDimensions");for(let i=0;i<o.size();i++){let a=o.get(i);if(!e.QInADataSourceExtDims.checkIsValid(t,a)){return}let s=l.addNewStructure();s.putString("Name",a.getName());s.putString("Description",a.getText());s.putInteger("DimensionType",e.QInAConverter.lookupDimensionTypeInA(a.getDimensionType()));s.putString("JoinFieldName",a.getJoinField());s.putString("JoinFieldNameInExtendedDimension",a.getJoinFieldNameExternal());s.putString("JoinType",a.getJoinType().getName());let u=a.getJoinCardinality();if(e.notNull(u)){s.putString("JoinCardinality",u.getName())}let p=n.getQueryManager();let g=null;if(e.notNull(p)){g=p.getModelCapabilities()}if(e.isNull(g)){g=t.m_capabilities}if(g.supportsDimensionVisibility()&&g.supportsExtendedDimensionVisibility()){let t=a.getVisibility();if(e.notNull(t)){s.putString("Visibility",t.getName())}}let m=a.getJoinParameters();if(m.hasElements()){let e=s.putNewList("JoinParameters");e.addAllStrings(m)}let c=a.getDataSource();let y=s.putNewStructure("DataSource");e.QInADataSourceProperties.exportQd(t,c,y,false,r);let d=c.getType();if(e.isNull(d)){y.putString("Type",e.MetaObjectType.DBVIEW.getCamelCaseName())}else{y.putString("Type",d.getCamelCaseName())}if(g.supportsExtendedDimensionsChangeDefaultRenamingAndDescription()){s.putStringNotNull("FieldRenamingMode",a.getRenamingMode())}}}},importExtendedDataSource:function(t,n){let i=t.getStructureByKey("DataSource");if(e.notNull(i)){let t=e.QFactory.createDataSource();e.QInADataSourceProperties.importQd(t,i);let r;let o=i.getStringByKey("Type");if(e.isNull(o)){r=e.MetaObjectType.DBVIEW}else{r=e.MetaObjectType.lookup(e.XString.toLowerCase(o))}t.setType(r);n.setDataSource(t)}},importJoinParameter:function(t,n){let i=t.getListByKey("JoinParameters");if(e.notNull(i)){let e=n.getJoinParameters();e.clear();let t=i.size();for(let n=0;n<t;n++){e.add(i.getStringAt(n))}}},importQd:function(t,n,i){if(t.m_capabilities.supportsExtendedDimensions()){let t=n.getExtendedDimensionsBase();t.clear();let r=i.getListByKey("ExtendedDimensions");if(e.notNull(r)){let t=r.size();for(let i=0;i<t;i++){let t=r.getStructureAt(i);let o=t.getStringByKey("Name");let l=t.getStringByKey("JoinFieldName");let a=t.getStringByKey("JoinFieldNameInExtendedDimension");let s=n.addNewExtendedDimension(o,l,a);s.setText(t.getStringByKey("Description"));let u=t.getStringByKey("JoinType");let p=e.JoinType.lookup(u);s.setJoinType(p);e.QInADataSourceExtDims.importJoinParameter(t,s);e.QInADataSourceExtDims.importExtendedDataSource(t,s);let g=t.getStringByKey("FieldRenamingMode");if(e.notNull(g)){s.setRenamingMode(g)}let m=t.getStringByKey("JoinCardinality");if(e.XStringUtils.isNotNullAndNotEmpty(m)){let t=e.JoinCardinality.lookup(m);s.setJoinCardinality(t)}let c=t.getStringByKey("Visibility");if(e.XStringUtils.isNotNullAndNotEmpty(c)){let t=e.DimensionVisibility.lookup(c);if(e.notNull(t)){s.setVisibility(t)}}}}}}};e.QInADataSourceProperties={exportQd:function(t,n,i,r,o){e.QInAExportUtil.setNonEmptyString(i,"ObjectName",n.getObjectName());e.QInAExportUtil.setNonEmptyString(i,"Environment",n.getEnvironmentName());e.QInAExportUtil.setNonEmptyString(i,"PackageName",n.getPackageName());e.QInAExportUtil.setNonEmptyString(i,"SchemaName",n.getSchemaName());e.QInAExportUtil.setNonEmptyString(i,"AliasName",n.getAlias());e.QInAExportUtil.setNonEmptyString(i,"Context",n.getContextParameter());if(t.getSession().hasFeature(e.FeatureToggleOlap.UNIVERSE_SOURCE_QUERY)&&e.QInADataSourceProperties.exportSourceQuery(n,o)){e.QInAExportUtil.setNonEmptyString(i,"SourceQuery",n.getSourceQuery())}else{let t=n.getCustomProperties();let r=t.getKeysAsIterator();if(r.hasNext()){let l=i.putNewStructure("CustomProperties");while(r.hasNext()){let i=r.next();if(!e.XString.isEqual(i,e.QDataSource.SOURCE_QUERY_INA)||e.QInADataSourceProperties.exportSourceQuery(n,o)){e.QInAExportUtil.setNonEmptyString(l,i,t.getByKey(i))}}}}let l=n.getDataArea();if(!e.XString.isEqual(l,"DEFAULT")){e.QInAExportUtil.setNonEmptyString(i,"DataArea",l)}if(r){e.QInAExportUtil.setNonEmptyString(i,"RunAsUser",n.getRunAsUser())}if(t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)||t.m_mode.containsMetadata()){e.QInAExportUtil.setNonEmptyString(i,"Description",n.getText())}if(t.m_mode.isTypeOf(e.QModelFormat.INA_DATA)||t.m_mode.isTypeOf(e.QModelFormat.INA_VALUE_HELP)){e.QInAExportUtil.setNonEmptyString(i,"InstanceId",n.getInstanceId());let t=n.getRriName();if(e.XStringUtils.isNotNullAndNotEmpty(t)){e.QInAExportUtil.setNonEmptyString(i,t,n.getRriValue())}}},exportSourceQuery:function(t,n){let i=false;let r=t.getContext();if(e.notNull(r)){let t=r.getQueryManager();if(e.notNull(t)){let e=t.getQueryServiceConfig();i=e.isSkipSourceQueryForNonMetadataRequests()}}return n||!i},importQd:function(t,n){let i=n.getStringByKey("ObjectName");t.setName(i);let r=n.getStringByKey("Environment");t.setEnvironmentName(r);let o=n.getStringByKey("PackageName");t.setPackageName(o);let l=n.getStringByKey("SchemaName");t.setSchemaName(l);let a=n.getStringByKey("SourceQuery");t.setSourceQuery(a);let s=n.getStringByKey("AliasName");t.setAlias(s);let u=n.getStringByKey("DataArea");t.setDataArea(u);let p=n.getStringByKey("RunAsUser");t.setRunAsUser(p);let g=n.getStringByKey("Description");t.setText(g);let m=n.getStringByKey("Context");if(e.notNull(m)){t.setContextParameter(m)}let c=n.getStructureByKey("CustomProperties");if(e.notNull(c)){let e=c.getKeysAsReadOnlyList();let n=e.size();for(let i=0;i<n;i++){let n=e.get(i);t.addCustomProperty(n,c.getStringByKey(n))}}}};e.QInASpatialClustering={exportResultSetFeatures:function(t){let n=e.PrFactory.createStructure();n.putBoolean("UseDefaultAttributeKey",false);let i=t.getQueryManager();if(i.getMaxResultRecords()!==-1){n.putLong("MaxResultRecords",i.getMaxResultRecords())}e.QInAOptions.exportPaging(n,i);n.putString("ResultFormat","Version2");n.putString("ResultEncoding","None");return n},exportSpatialClusterSettings:function(t,n){let i=e.PrFactory.createStructure();i.putBoolean("Active",t.isActive());i.putString("ClusterAlgorithm",t.getClusterAlgorithm().getName());i.putString("GeometryAttribute",t.getClusterField().getName());let r=t.getThresholdNumberOfPoints();if(r!==-1){i.putInteger("ThresholdNumberOfPoints",r)}let o=i.putNewStructure("ClusterParameters");let l=t.getParameters();let a=l.getKeysAsIterator();while(a.hasNext()){let t=a.next();let n=l.getByKey(t);if(n.getValueType()===e.XValueType.INTEGER){o.putInteger(t,n.getInteger())}else if(n.getValueType()===e.XValueType.DOUBLE){o.putDouble(t,n.getDouble())}else{o.putString(t,n.toString())}}if(!n){let n=t.getDimensions();if(e.notNull(n)&&n.size()>0){let e=i.putNewList("Dimensions");for(let t=0;t<n.size();t++){e.addString(n.get(t))}}}return i},exportSpatialClusteringRequest:function(t,n){let i=e.PrFactory.createStructure();let r=i.putNewStructure("Analytics");let o=n.getClusterField();let l=o.getQueryModel();let a=t.exportDataSource(l.getDataSource(),false);r.put("DataSource",a);let s=t.exportDimension(o.getDimension(),null);s.putString("Axis",e.QInAConverter.lookupAxisTypeInA(e.AxisType.ROWS));let u=e.QInASpatialClustering.exportSpatialClusterSettings(n,l.getConvenienceCommands().isTypeOfBw());s.put("ClusterDefinition",u);let p=t.exportStructureDimension(l.getMeasureDimension());p.putString("Axis",e.QInAConverter.lookupAxisTypeInA(e.AxisType.COLUMNS));if(l.getConvenienceCommands().isTypeOfBw()){let t=e.PrFactory.createStructure();t.putString("Visibility",e.QInAConverter.lookupResultSetVisibilityInA(e.ResultVisibility.VISIBLE));let n=t.putNewStructure("MemberOperand");n.putString("AttributeName","Measures");n.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.EQUAL));n.putString("Value","1ROWCOUNT");let i=p.getListByKey("Members");i.clear();i.add(t)}let g=e.PrFactory.createList();g.add(s);g.add(p);let m=l.getAxis(e.AxisType.FREE);let c=m.size();for(let n=0;n<c;n++){let i=m.get(n);let r=i.getDimensionType();if(r.isTypeOf(e.DimensionType.CALCULATED_DIMENSION)){g.add(t.exportDimension(i,null))}}let y=r.putNewStructure("Definition");y.put("Dimensions",g);t.exportFilter(l.getFilter(),y);if(l.getModelCapabilities().supportsConditions()&&l.getConditionManager().getEffectiveConditions().size()>0){t.exportConditionManager(l.getConditionManager(),y)}t.exportVariables(l.getVariableContainer(),y);y.put("ResultSetFeatureRequest",e.QInASpatialClustering.exportResultSetFeatures(l));return i}};e.QInAValueHelp={_addHierarchyNavigation:function(t,n,i,r){let o=t.addNewStructure();o.putString("DrillState",e.QInAConverter.lookupDrillStateInA(e.DrillState.EXPANDED));let l=o.putNewStructure("DrillMember");l.putString("DimensionName",n);l.putString("FieldName",i);l.putString("Member",r)},addVariableHierarchyToFilters:function(t,n){let i=t.getDimension();let r=e.PrUtils.getStructureProperty(n,"Operator");let o=e.PrUtils.getListProperty(r,"SubSelections");for(let n=0;n<e.PrUtils.getListSize(o,0);n++){let r=o.getStructureAt(n);if(r.containsKey("SetOperand")){let n=e.PrUtils.getStructureProperty(r,"SetOperand");let o=i.getFieldByName(n.getStringByKey("FieldName"));if(n.containsKey("Hierarchy")||e.notNull(o)&&(o===i.getHierarchyKeyField()||o===i.getHierarchyDisplayKeyField()||o===i.getHierarchyTextField()||o===i.getHierarchyNavigationField())){n.putNewStructure("Hierarchy").putString("Name",t.getHierarchyName())}}else if(r.containsKey("Operator")){e.QInAValueHelp.addVariableHierarchyToFilters(t,r)}}},dimensionRequiredOnFreeAxis:function(t){let n=t.getQueryModel();if(t.getSupportedAxesTypes().contains(e.AxisType.FREE)){let i=t.getDimensionType();if(i===e.DimensionType.MEASURE_STRUCTURE||i===e.DimensionType.SECONDARY_STRUCTURE){return e.QInAValueHelp.getDimensionsUsedInFilter(n).contains(t.getName())||e.XCollectionUtils.hasElements(n.getExceptionManager())}else if(i===e.DimensionType.ACCOUNT){return e.QInAValueHelp.getDimensionsUsedInFilter(n).contains(t.getName())}else{return i===e.DimensionType.CALCULATED_DIMENSION}}return false},exportExtendedSortVh:function(t,n){let i=t.putNewList("Sort");let r=i.addNewStructure();r.putString("Dimension",n.getName());r.putString("Direction",e.QInAConverter.lookupSortDirectionInA2(n.getSelectorOrder()));let o=n.getSelectorSortType();if(e.notNull(o)){r.putString("SortType",e.QInAConverter.lookupSortTypeInA(o))}else{r.putString("SortType","MemberKey")}},exportMemberHelpRequest:function(t,n,i,r){if(e.isNull(n)||e.isNull(i)){return null}let o=e.PrFactory.createStructure();let l=n.getSession();if(n.getModelCapabilities().supportsFlexibleClientInfo()&&l.hasFeature(e.FeatureToggleOlap.FLEX_CLIENT_INFO)){e.QInAClientInfo.exportFlexibleClientInfo(o,n)}else if(l.hasFeature(e.FeatureToggleOlap.CLIENT_INFO_METADATA)){e.QInAClientInfo.exportClientInfo(o,n,n.getModelCapabilities().supportsClientInfo(),n.getSystemType().isTypeOf(e.SystemType.BW))}let a=o.putNewStructure("Analytics");e.QInADataSource.exportDataSource(t,n.getDataSource(),false,a,false);let s=e.PrFactory.createList();s.add(t.exportDimension(i,null));let u=a.putNewStructure("Definition");u.put("Dimensions",s);t.exportVariables(n.getVariableContainer(),u);let p=n.getFilter();e.QInAValueHelp.exportValueHelpFilters(t,u,i,p,r);return o},exportPlanningVariableHelpRequest:function(t,n,i,r){let o=n.getCommandForExport();let l=o.getStructureByKey("Planning");let a=l.getStructureByKey("Command").getStructureByKey("DataSource");let s=l.putNewStructure("Definition");e.QInAValueHelp.exportValueHelpFilters(t,s,i,n.getSelector(),true);let u=t.exportDimension(i,null);let p=s.putNewList("Dimensions");p.add(u);if(r.getHierarchyName()!==null){e.QInAValueHelp.exportVariableHierarchyInformation(t,u,s,r)}let g=s.putNewList("Variables");let m=g.addNewStructure();m.putString("Name",r.getName());let c=a.getStringByKey("Type");if(e.XString.isEqual(c,e.MetaObjectType.PLANNING_SEQUENCE.getCamelCaseName())||e.XString.isEqual(c,e.MetaObjectType.PLANNING_SEQUENCE_VALUEHELP.getCamelCaseName())||e.XString.isEqual(c,e.MetaObjectType.PLANNING_FUNCTION.getCamelCaseName())||e.XString.isEqual(c,e.MetaObjectType.PLANNING_FUNCTION_VALUEHELP.getCamelCaseName())){if(e.XString.isEqual(c,e.MetaObjectType.PLANNING_SEQUENCE.getCamelCaseName())){a.putString("Type",e.MetaObjectType.PLANNING_SEQUENCE_VALUEHELP.getCamelCaseName())}else if(e.XString.isEqual(c,e.MetaObjectType.PLANNING_FUNCTION.getCamelCaseName())){a.putString("Type",e.MetaObjectType.PLANNING_FUNCTION_VALUEHELP.getCamelCaseName())}let t=l.putNewStructure("ProcessingDirectives");t.putString("ProcessingStep","VariableDefinition");o.putNewList("Options").addString("StatefulServer")}else{s.putString("ValuehelpForVariable",r.getName());if(i.getReadMode(e.QContextType.SELECTOR)===e.QMemberReadMode.MASTER){s.putString("ReadMode","Master")}if(s.containsKey("FixedFilter")){s.remove("FixedFilter")}}return o},exportResultSetRequest:function(t,n,i,r,o){let l=t.exportQueryModel(i,r,o);let a=n.getDimension();let s=n.isIncludeMeasures();let u=false;let p=l.getListByKey("Dimensions");for(let t=p.size()-1;t>=0;t--){let n=p.getStructureAt(t);let r=e.XString.isEqual(n.getStringByKey("Axis"),"Free");let o=i.getDimensionByName(n.getStringByKey("Name"));if(e.notNull(o)){if(o===a){u=true;if(r){n.putString("Axis","Rows")}}else if(!r&&(!o.isStructure()||!s)){if(e.QInAValueHelp.dimensionRequiredOnFreeAxis(o)){n.putString("Axis","Free")}else{p.removeAt(t)}}}}if(!u){let e=t.exportDimension(a,p.addNewStructure());e.putString("Axis","Rows")}return l},exportValueHelpFilters:function(t,n,i,r,o){t.exportFixedFilter(r,n);let l=r.getModelCapabilities();if(i.getSelectorFilterUsage()===e.QueryFilterUsage.SELECTOR_FILTER&&e.notNull(l)&&l.supportsVisibilityFilter()){t.exportVisibilityFilter(r,n)}e.QInAValueHelp.setOptionsVh(t,n,i,o);if(t.m_capabilities.supportsExtendedSort()){e.QInAValueHelp.exportExtendedSortVh(n,i)}let a=i.getSelectorFilterUsage()!==e.QueryFilterUsage.SELECTOR_FILTER||!r.isValueHelpFilterInitialized();let s=e.QInAValueHelpFilter.getValueHelpFilter(i,r);let u=null;let p=null;if(i.isSelectorHierarchyActive()){let r=i.getSelectorHierarchyNode();let o=i.getSelectorHierarchyNodeName();let l=i.getSelectorHierarchyNodeSid();if(i.isSelectorUseQueryDrillOperations()){t.exportDrillManager(i.getDrillManager(),n)}else if(e.notNull(r)){let t=i.getHierarchyNavigationField();let o=n.putNewList("HierarchyNavigations");let l=i.getNavigationNodes().getIterator();while(l.hasNext()){let n=l.next().getDimensionMember();let r=n.getFieldValue(t);if(e.isNull(r)){r=n.getFieldValue(i.getHierarchyKeyField());if(e.isNull(r)){r=n.getKeyFieldValue()}}e.QInAValueHelp._addHierarchyNavigation(o,i.getName(),r.getField().getName(),r.getString())}e.XObjectExt.release(l);u=r.getName()}else if(e.XStringUtils.isNotNullAndNotEmpty(l)){e.QInAValueHelp._addHierarchyNavigation(n.putNewList("HierarchyNavigations"),i.getName(),i.getHierarchyNavigationField().getName(),l)}else if(e.XStringUtils.isNotNullAndNotEmpty(o)){e.QInAValueHelp._addHierarchyNavigation(n.putNewList("HierarchyNavigations"),i.getName(),i.getSelectorKeyField().getName(),o);u=o}if(a&&e.notNull(s)&&e.notNull(u)){p=s.addSingleMemberFilterByDimension(i,u,e.ComparisonOperator.EQUAL)}}if(e.notNull(s)){let r=i.getQueryModel();let o=e.notNull(r)?t.exportValueHelpFilter(i,n):t.exportFilterExpression(s);n.putIfNotNull(e.isNull(r)||r.getModelCapabilities()===null||t.isAbap(r)?"Filter":"DynamicFilter",o);if(a&&e.notNull(p)){let t=s.getComplexRoot();if(e.notNull(t)){t.removeElement(p)}else{let t=s.getCartesianProduct();if(e.notNull(t)){t.removeElement(p)}}}}},exportVariableHelpRequest:function(t,n,i,r){let o=e.QInAValueHelp.exportMemberHelpRequest(t,n,i,true);let l=o.getStructureByKey("Analytics");let a=l.getStructureByKey("DataSource");let s=l.getStructureByKey("Definition");let u=s.getListByKey("Dimensions").getStructureAt(0);if(r.getHierarchyName()!==null){e.QInAValueHelp.exportVariableHierarchyInformation(t,u,s,r)}let p=s.putNewList("Variables");let g=p.addNewStructure();g.putString("Name",r.getName());let m=a.getStringByKey("Type");if(e.XString.isEqual(m,e.MetaObjectType.QUERY_VALUEHELP.getCamelCaseName())||e.XString.isEqual(m,e.MetaObjectType.PLANNING_SEQUENCE_VALUEHELP.getCamelCaseName())||e.XString.isEqual(m,e.MetaObjectType.CDS_PROJECTION_VIEW_VALUEHELP.getCamelCaseName())){let e=l.putNewStructure("ProcessingDirectives");e.putString("ProcessingStep","VariableDefinition")}else{s.putString("ValuehelpForVariable",r.getName());t.exportVariables(n.getVariableContainer(),s);if(t.isHana(n)){e.XCollectionUtils.removeIf(s.getListByKey("Variables"),t=>e.XString.isEqual(t.asStructure().getStringByKey("Name"),r.getName()))}if(i.getReadMode(e.QContextType.SELECTOR)===e.QMemberReadMode.MASTER){s.putString("ReadMode","Master")}if(s.containsKey("FixedFilter")){s.remove("FixedFilter")}}return o},exportVariableHierarchyInformation:function(t,n,i,r){let o=n.putNewStructure("Hierarchy");if(r.getVariableType()===e.VariableType.HIERARCHY_NODE_VARIABLE){o.putStringNotNullAndNotEmpty("Name",r.getHierarchyName());o.putStringNotNullAndNotEmpty("DueDate",r.getHierarchyKeyDate());o.putStringNotNullAndNotEmpty("Version",r.getHierarchyVersion());o.putInteger("InitialDrillLevel",r.getDimension().getSelectorRootLevel());e.QInAHierarchyValueHelp.addLowerLevelNodeAlignment(t,r.getDimension(),o);if(e.XStringUtils.isNotNullAndNotEmpty(r.getHierarchyName())){e.QInAValueHelp.addVariableHierarchyToFilters(r,e.PrUtils.getStructureProperty(i.getStructureByKey("Filter"),"Selection"));e.QInAValueHelp.addVariableHierarchyToFilters(r,e.PrUtils.getStructureProperty(i.getStructureByKey("DynamicFilter"),"Selection"));e.QInAValueHelp.addVariableHierarchyToFilters(r,e.PrUtils.getStructureProperty(i.getStructureByKey("VisibilityFilter"),"Selection"))}}else{let n=r.getDependentVariables();let i=n.getIterator();while(i.hasNext()){let n=i.next();if(n.getVariableType()===e.VariableType.HIERARCHY_NAME_VARIABLE){let t=n;let i=t.getValueByString();if(e.XStringUtils.isNullOrEmpty(i)){e.QInAValueHelp.throwErrorForDependentVariable(r,t)}o.putString("Name",i)}else if(n.getVariableType()===e.VariableType.DIMENSION_MEMBER_VARIABLE){let i=n;let l=i.getValueByString();if(e.XStringUtils.isNullOrEmpty(l)){e.QInAValueHelp.throwErrorForDependentVariable(r,i)}if(t.isAbap(r)){if(i.getDimension().getDimensionType()===e.DimensionType.DATE){o.putStringNotNullAndNotEmpty("DateTo",l)}else{o.putStringNotNullAndNotEmpty("Version",l)}}}}e.XObjectExt.release(i);o.putInteger("InitialDrillLevel",r.getDimension().getSelectorRootLevel())}},getDimensionsUsedInFilter:function(t){let n=e.XHashSetOfString.create();e.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(t.getFilter().getDynamicFilter(),n);return n},isExecuteAutoSubmitForValueHelp:function(t){return t.hasVariables()&&t.getVariableProcessorState()!==e.VariableProcessorState.SUBMITTED&&t.isExecuteAutoVariableSubmit()&&!t.isProcessingAutoSubmit()},setOptionsVh:function(t,n,i,r){let o=n.putNewStructure("ResultSetFeatureRequest");o.putBoolean("UseDefaultAttributeKey",false);if(i.isSelectorGettingInterval()&&t.m_capabilities.supportsResultSetInterval()){o.putBoolean("Interval",true)}o.putString("ResultFormat","Version2");o.putString("ResultEncoding","None");let l=i.getQueryModel();if(e.notNull(l)){let t=i.getQueryManager();let n=l.getModelCapabilities();if(n.supportsAutoVariableSubmit()){let n=!r&&e.QInAValueHelp.isExecuteAutoSubmitForValueHelp(t);o.putBoolean("IgnoreAutoSubmit",!n)}if(n.supportsCellDocumentId()){o.putBoolean("ReturnDocumentIds",false)}if(n.supportsKeepOriginalTexts()){o.putBoolean("ResultKeepOriginalTexts",l.isKeepingOriginalTexts())}if(l.isValueHelpIgnoreQueryDynamicFilter()){o.putBoolean("ValueHelpIgnoreQueryDynFilter",true)}if(l.isValueHelpUseCompleteEffectiveFilter()){o.putBoolean("ValueHelpUseCompleteEffectiveFilter",true)}}if(i.getSelectorMaxResultRecords()!==-1){o.putLong("MaxResultRecords",i.getSelectorMaxResultRecords())}let a=o.putNewStructure("SubSetDescription");a.putInteger("RowFrom",i.getSelectorPagingStart());a.putInteger("RowTo",i.getSelectorPagingEnd())},throwErrorForDependentVariable:function(t,n){let i=e.XStringBuffer.create();i.append("The dependent variable '");i.append(n.getName());i.append("' of the variable '");i.append(t.getName());i.append("' has no value set.");throw e.XException.createIllegalStateException(i.toString())}};e.QInADocumentsIds={exportDocumentsIds:function(t,n){let i=n.getActiveResultSetContainer();if(e.isNull(i)){return}if(!i.hasDocumentIdCollection()){return}let r=i.getDocumentIdCollection();let o=r.getValidDocumentIds();if(e.isNull(o)){return}if(n.getSystemType().isTypeOf(e.SystemType.BW)){e.QInADocumentsIds.exportDocumentsIdsBw(t,o,n.getModelCapabilities().supportsSapDate(),n.getModelCapabilities().supportsSidPresentation())}},exportDocumentsIdsBw:function(t,n,i,r){let o=t.putNewList("DocumentsIds");for(let t=0;t<n.size();t++){let l=o.addNewStructure();let a=l.putNewList("DimensionContext");let s=n.get(t);let u=s.getDimensionMembers();for(let t=0;t<u.size();t++){let n=u.get(t);let o=n.getDimension();let l=null;if(r){l=n.getFieldValue(o.getHierarchyNavigationField())}if(e.isNull(l)){l=n.getKeyFieldValue()}let s=a.addNewStructure();s.putString("FieldName",l.getField().getName());let p=l.getValueType();if(i){if(p===e.XValueType.DATE){s.putString("Value",l.getDate().toSAPFormat())}else if(p===e.XValueType.TIME){s.putString("Value",l.getTime().toSAPFormat())}else if(p===e.XValueType.DATE_TIME){s.putString("Value",l.getDateTime().toSAPFormat())}else{s.putString("Value",l.getValue().getStringRepresentation())}}else{s.putString("Value",l.getValue().getStringRepresentation())}}let p=l.putNewList("CellContext");for(let t=0;t<s.getDocumentIdActions().size();t++){let n=p.addNewStructure();let i=s.getDocumentIdActions().get(t);n.putString("QueryCellsId",i.getQueryDataCellReference());n.putStringNotNullAndNotEmpty("Action",e.QInAConverter.lookupDocumentsIdsActionInA(i.getAction()))}}}};e.QInAExpand={_addExpandFromList:function(t,n,i){let r=e.XList.createWithList(n);r.sortByDirection(e.XSortDirection.ASCENDING);let o=r.getIterator();while(o.hasNext()){i.addString(e.XStringUtils.concatenate2(t,o.next()))}},_exportExpandDimensionSelection:function(t,n){let i=n.getRequiredDimensions();let r=n.getDimensionsOnAxes();if(e.XCollectionUtils.hasElements(i)){e.QInAExpand._addExpandFromList("Dimensions?Name=",i,t)}else if(e.XCollectionUtils.hasElements(r)){e.QInAExpand._addExpandFromList("Axis?Name=",r,t)}else{t.addString("Dimensions")}},_exportExpandFlagSelection:function(e,t){if(t.isRequestingVariables()){e.addString("Variables")}if(t.isRequestingVariableVariants()){e.addString("VariableVariants")}if(t.isRequestingSorting()){e.addString("Sort")}if(t.isRequestingDynamicFilter()){e.addString("DynamicFilter")}if(t.isRequestingDataCells()){e.addString("QueryDataCells")}if(t.isRequestingUniversalDisplayHierarchies()){e.addString("UniversalDisplayHierarchies")}if(t.isRequestingConditions()){e.addString("Conditions")}if(t.isRequestingExceptions()){e.addString("Exceptions")}},_exportExpandSelection:function(t,n,i){let r=i.getQueryServiceConfig();if(r.getMinimizedMetadata()&&!e.XCollectionUtils.hasElements(r.getRequiredDimensions())){return e.PrFactory.createString("#")}e.QInAExpand._exportExpandDimensionSelection(t,r);e.QInAExpand._exportExpandFlagSelection(t,n);return t},createExpandMetadata:function(t){let n=e.PrFactory.createList();let i=t.getInitSettings();if(i.isRequestingMinimizedAttributes()){n.addString("MinimizedAttributes")}if(!t.getCapabilitiesBase().supportsDetailedResponseExpansion()||i.isRequestingDefaultSettings()){n.addString("Cube");return n}return e.QInAExpand._exportExpandSelection(n,i,t)},createExpandSubmit:function(t,n){if(n){return e.PrFactory.createString("#")}let i=null;let r=t.getInitSettings();if(r.isRequestingMinimizedAttributes()||!r.isRequestingDefaultSettings()){i=e.PrFactory.createList();if(r.isRequestingMinimizedAttributes()){if(t.getModelCapabilities().supportsDetailedResponseExpansion()){i.addString("Cube")}i.addString("MinimizedAttributes")}if(!r.isRequestingDefaultSettings()){return e.QInAExpand._exportExpandSelection(i,r,t)}}return i}};e.QInAInputEnablementRules={exportInputEnablementRules:function(t,n){let i=n.getInputEnablementRules();if(!n.getModelCapabilities().supportsInputEnablementFilterSettings()){return}let r=n.getInputReadinessMainQuery();let o=n.getInputReadinessCacheMode();if(e.XStringUtils.isNotNullAndNotEmpty(r)||e.notNull(o)){let n=t.putNewStructure("AsyncInputReadiness");n.putStringNotNull("MainQuery",r);n.putStringNotNull("CacheMode",e.QInAConverter.lookupInputEnablementCacheModeInA(o))}if(e.XCollectionUtils.hasElements(i)){let n=t.putNewStructure("InputEnablementFilter");let r=n.putNewList("Rules");for(let t=0;t<i.size();t++){let n=i.get(t);let o=r.addNewStructure();o.putString("Mode",e.QInAConverter.lookupInputEnablementModeInA(n.getMode()));o.putString("Reason",n.getReason())}}}};e.QInAInputReadinessFilter={exportInputReadinessFilter:function(t,n){let i=n.getInputReadinessFilter();if(e.isNull(i)||!n.getModelCapabilities().supportsInputReadinessFilter()){return}let r=t.putNewStructure("InputReadinessFilter");r.putString("Mode",e.QInAConverter.lookupInputReadinessFilterModeInA(i.getMode()));let o=i.getStates();if(!o.isEmpty()){let e=r.putNewList("InputReadinessStates");for(let t=0;t<o.size();++t){let n=o.get(t);let i=e.addNewStructure();i.putString("Flag",n.getFlag());i.putString("Parameter",n.getParameter())}}}};e.QInANewLines={addCellValues:function(t,n){let i=t.getNewLineEntries();let r=i.size();for(let t=0;t<r;t++){let r=i.get(t);if(!r.isValueChanged()){continue}let o=e.PrFactory.createStructure();o.putString("QueryDataCell",r.getQueryDataCell().getName());let l=r.getNewXValue();let a=l.getValueType();if(a===e.XValueType.DOUBLE){o.putDouble("NewValue",l.getDouble())}else if(a===e.XValueType.STRING){o.putString("NewValueExternal",l.getString())}else{e.noSupport()}n.add(o)}},addDimensionMemberKeys:function(e,t){let n=t.size();for(let i=0;i<n;i++){let n=t.get(i);e.addString(n.getKeyFieldValue().getString())}},exportNewLines:function(t,n){let i=n.getActiveResultSetContainer();if(e.isNull(i)){return}if(!i.hasNewLineCollection()){return}let r=i.getNewLineCollection();let o=r.getValidNewLines();if(e.isNull(o)){return}if(n.getSystemType().isTypeOf(e.SystemType.BW)){e.QInANewLines.exportNewLinesBw(t,o,n.getModelCapabilities().supportsSapDate())}else{e.QInANewLines.exportNewLinesHana(t,o)}},exportNewLinesBw:function(t,n,i){let r=t.putNewList("NewLines");for(let t=0;t<n.size();t++){let o=r.addNewStructure();let l=o.putNewList("DimensionContext");let a=n.get(t);let s=a.getDimensionMembers();for(let t=0;t<s.size();t++){let n=s.get(t);let r=n.getKeyFieldValue();let o=l.addNewStructure();o.putString("FieldName",r.getField().getName());let a=r.getValueType();if(i){if(a===e.XValueType.DATE){o.putString("Value",r.getDate().toSAPFormat())}else if(a===e.XValueType.TIME){o.putString("Value",r.getTime().toSAPFormat())}else if(a===e.XValueType.DATE_TIME){o.putString("Value",r.getDateTime().toSAPFormat())}else{o.putString("Value",r.getValue().getStringRepresentation())}}else{o.putString("Value",r.getValue().getStringRepresentation())}}let u=o.putNewList("CellValues");for(let t=0;t<a.getNewLineEntries().size();t++){let n=u.addNewStructure();let i=a.getNewLineEntries().get(t);n.putString("QueryCellsId",i.getQueryDataCell().getName());let r=i.getNewXValue();if(r.getValueType()===e.XValueType.DOUBLE){n.putDouble("Value",r.getDouble())}else if(r.getValueType()===e.XValueType.STRING){n.putString("Value",r.getString())}}}},exportNewLinesHana:function(t,n){let i=t.putNewStructure("DataEntries");let r=i.putNewList("DimensionContext");let o=n.get(0).getDimensionMembers();let l=o.size();for(let e=0;e<l;e++){let t=o.get(e);r.addString(t.getDimension().getName())}let a=i.putNewList("Values");let s=n.size();for(let t=0;t<s;t++){let i=a.addNewStructure();let r=n.get(t);i.putString("Action","NewLine");i.putInteger("LineId",r.getLineId());let o=i.putNewList("Keys");e.QInANewLines.addDimensionMemberKeys(o,r.getDimensionMembers());let l=i.putNewList("CellValues");e.QInANewLines.addCellValues(r,l)}}};e.QInANewValues={exportNewValues:function(t,n,i){let r=i.getActiveResultSetContainer();if(e.isNull(r)){return}if(!r.hasDataEntryCollection()){return}let o=e.PrFactory.createList();let l=r.getDataEntryCollection();e.QInANewValues.exportRsDataEntries(o,l,i);e.QInANewValues.exportRsDataEntriesViaMember(o,l,i);if(o.isEmpty()){return}t.put("NewValues",o);e.QInANewValues.exportPublicVersionEdit(n,i)},exportPublicVersionEdit:function(t,n){if(n.getPlanningMode()!==e.PlanningMode.FORCE_PLANNING){return}let i=n.getPlanningModel();if(e.isNull(i)||!i.supportsPublicVersionEdit()||!i.isPublicVersionEditInProgress()){return}let r=t.putNewList("RefreshVersionStates");let o=i.getVersions();let l=o.size();for(let t=0;t<l;t++){let n=o.get(t);let i=n.getSourceVersionName();if(n.isShowingAsPublicVersion()&&e.XStringUtils.isNotNullAndNotEmpty(i)){r.addString(i);n.setShowingAsPublicVersion(false);n.setSourceVersionName(null)}}i.setPublicVersionEditInProgress(false)},exportRsDataEntries:function(t,n,i){let r=n.getChangedDataEntries();if(r.isEmpty()){return}let o=i.getCapabilitiesBase().supportsNewValuesImplicitUnlock();let l=i.getCapabilitiesBase().supportsNewValuesExtendedFormat();let a=i.getSystemType().isTypeOf(e.SystemType.BW);let s=i.getSystemType().isTypeOf(e.SystemType.HANA);let u=r.size();for(let n=0;n<u;n++){let u=r.get(n);if(!u.isNewValueForced()&&!u.isValueChanged()&&!u.isValueLockChanged()){if(s&&u.getPlanningCommand()===null){continue}else if(a&&l){continue}}if(!l&&o&&!u.isNewValueForced()&&!u.isValueChanged()&&!u.isValueLocked()){continue}if(a&&!l){e.QInANewValues.exportValuesAbapNotExtended(u,t)}else if(s||a&&l){e.QInANewValues.exportValues(u,t,i)}}},exportRsDataEntriesViaMember:function(t,n,i){let r=n.getDataEntriesViaMember();if(r.isEmpty()){return}for(let n=0;n<r.size();n++){let o=r.get(n);let l=o.getPlanningCommands();let a=o.getXValue();let s=o.getMemberContext();let u=e.XList.createWithList(s.getKeysAsReadOnlyList());u.sortByDirection(e.XSortDirection.ASCENDING);if(!e.XCollectionUtils.hasElements(l)){e.QInANewValues.exportRsValueInfoViaMember(t,a,u,s,o,null,i)}else{for(let n=0;n<l.size();n++){e.QInANewValues.exportRsValueInfoViaMember(t,a,u,s,o,l.get(n),i)}}}},exportRsValueInfoViaMember:function(t,n,i,r,o,l,a){let s=e.PrFactory.createStructure();if(n.getValueType()===e.XValueType.STRING){s.putString("NewValue",n.getString())}else if(n.getValueType()===e.XValueType.DOUBLE){s.putDouble("NewValue",n.getDouble())}else{return}let u=s.putNewList("Context");for(let t=0;t<i.size();t++){let n=i.get(t);let o=r.getByKey(n);let l=a.getConvenienceCommands().getRuntimeMemberNameByAlias(a.getQueryModel(),o);if(e.notNull(l)){o=l}let s=u.addNewStructure();s.putString("Dimension",n);s.putString("Member",o)}e.QInANewValues.exportValueInfo(s,o,l,a);t.add(s)},exportValueInfo:function(t,n,i,r){if(n.isValueLockChanged()){t.putBoolean("LockedCell",n.isValueLocked())}if(r.getCapabilitiesBase().supportsSortNewValues()){t.putInteger("Priority",n.getPriority())}e.QInAExportUtil.setNameIfNotNull(t,"ProcessingType",n.getProcessingType());if(e.notNull(i)&&i.getCommandType()===e.PlanningCommandType.PLANNING_ACTION){let n=i;t.putString("ActionId",n.getActionForQueryIdentifier().getActionId());let r=n.getActionGroup();if(e.XStringUtils.isNotNullAndNotEmpty(r)){t.putString("Group",r)}let o=e.PrFactory.createStructureDeepCopy(n.getActionParameters());if(e.notNull(o)){t.put("ActionParameters",o)}if(n.hasTargetCell()){let e=t.putNewList("TargetCoordinates");e.addInteger(n.getTargetRow());e.addInteger(n.getTargetColumn())}if(n.getActionForQueryIdentifier().getActionType().isTypeOf(e.PlanningActionType.QUERY_SINGLE)){let i=n.getTargetVersionId();if(e.XStringUtils.isNotNullAndNotEmpty(i)){t.putString("TargetVersionId",i)}}return n.getActionForQueryIdentifier().getActionType()}return null},exportValues:function(t,n,i){let r=t.getPlanningCommands();let o=null;if(e.XCollectionUtils.hasElements(r)){for(let l=0;l<r.size();l++){o=e.QInANewValues.exportValuesOfAction(t,n,r.get(l),i)}}if(e.isNull(o)||!o.isTypeOf(e.PlanningActionType.DATA_ENTRY)&&(t.isValueChanged()||t.isNewValueForced())){e.QInANewValues.exportValuesOfAction(t,n,null,i)}},exportValuesAbapNotExtended:function(e,t){let n=t.addNewList();n.addInteger(e.getRow()+1);n.addInteger(e.getColumn()+1);n.addDouble(e.getDouble());if(e.isValueLocked()){n.addInteger(1)}else{n.addInteger(0)}},exportValuesOfAction:function(t,n,i,r){let o=n.addNewStructure();let l=o.putNewList("Coordinates");l.addInteger(t.getRow());l.addInteger(t.getColumn());let a=r.getSystemType().isTypeOf(e.SystemType.BW);let s=r.getSystemType().isTypeOf(e.SystemType.HANA);let u=e.QInANewValues.exportValueInfo(o,t,i,r);if((e.isNull(u)||u.isTypeOf(e.PlanningActionType.DATA_ENTRY))&&(t.isValueChanged()||t.isNewValueForced())){let n=t.getXValue();let i=n.getValueType();if(i.isTypeOf(e.XValueType.DECIMAL_FLOAT)&&!n.mayLoosePrecision()&&s){o.putString("NewValueAsString",n.getStringRepresentation())}else if(i.isTypeOf(e.XValueType.DOUBLE)){o.putDouble("NewValue",n.getDouble())}else if(i===e.XValueType.STRING){if(s){o.putString("NewValueAsString",n.getString())}else if(a){o.putString("NewValueExternal",n.getString())}}else if((i===e.XValueType.DATE||i===e.XValueType.TIME)&&a){o.putString("NewValueExternal",n.toSAPFormat())}else{e.noSupport()}if(t.isNewValueForced()&&s&&!r.getCapabilitiesBase().supportsSortNewValues()){o.putBoolean("KeepValue",true)}let l=t.getDataEntryGroup();if(e.isNull(u)&&e.XStringUtils.isNotNullAndNotEmpty(l)){o.putString("Group",l)}}return u}};e.QInAOptions={exportOptimizerHints:function(t,n){let i=n.getQueryModel();let r=i.getModelCapabilities().supportsCeScenarioParams();let o=i.getModelCapabilities().supportsRRI3();if(r||o){let l=e.PrFactory.createStructure();if(r){e.QInAOptions.exportOptimizerHintsByEngine(l,i,e.ExecutionEngine.CALC_ENGINE);e.QInAOptions.exportOptimizerHintsByEngine(l,i,e.ExecutionEngine.MDS);e.QInAOptions.exportOptimizerHintsByEngine(l,i,e.ExecutionEngine.SQL);e.QInAOptions.exportOptimizerHintsByEngine(l,i,e.ExecutionEngine.BW)}if(o){e.QInAOptions.exportQueryStateHint(l,n)}if(l.hasElements()){t.put("Hints",l)}}},exportOptimizerHintsByEngine:function(t,n,i){let r=n.getOptimizerHintsByExecutionEngine(i);if(e.notNull(r)&&r.hasElements()){let n=e.XList.createWithList(r.getKeysAsReadOnlyList());n.sortByDirection(e.XSortDirection.ASCENDING);let o=t.putNewList(i.getName());let l=n.size();for(let e=0;e<l;e++){let t=n.get(e);let i=o.addNewStructure();i.putString("Key",t);i.putString("Value",r.getByKey(t))}}},exportOptions:function(t){let n=e.PrFactory.createStructure();n.putBoolean("UseDefaultAttributeKey",false);let i=t.getActiveResultSetContainer();if(i.getMaxResultRecords()!==-1){n.putLong("MaxResultRecords",i.getMaxResultRecords())}let r=i.getDataRefreshEnabled();if(r===e.ActionChoice.ON||r===e.ActionChoice.ONCE){n.putBoolean("Refresh",true)}let o=false;if(e.XStringUtils.isNotNullAndNotEmpty(i.getResultSetPersistenceTable())){n.putString("ResultSetPersistanceTable",i.getResultSetPersistenceTable());if(e.XStringUtils.isNotNullAndNotEmpty(i.getResultSetPersistenceSchema())){n.putString("ResultSetPersistanceSchema",i.getResultSetPersistenceSchema());o=true}}if(!i.isResultSetTransportEnabled()){n.putBoolean("ReturnEmptyJsonResultSet",true)}e.QInAOptions.exportPaging(n,t);e.QInAOptions.exportSuppressKeyfigureCalculation(n,t);if(t.getExecuteRequestOnOldResultSet()){n.putBoolean("ExecuteRequestOnOldResultSet",true)}if(t.isIncludePerformanceNotDefault()){n.putBoolean("IncludePerformanceData",t.isRequestingPerformanceData())}let l=t.getCapabilitiesBase();if(l.supportsAutoVariableSubmit()){n.putBoolean("IgnoreAutoSubmit",!t.isProcessingAutoSubmit())}if(l.supportsExceptionThresholdNoPrec()){n.putBoolean("ResultExceptionThresholdNoPrec",true)}if(l.supportsDataCellContexts()&&t.getInitSettings().isSkipResultSetGeneration()){n.putBoolean("SkipResultSetGeneration",true)}let a=t.getQueryModel();if(l.supportsCellDocumentId()){let t=a.getDocumentsIdsRequest();if(t.getDocumentsIdsScope()!==null&&t.getDocumentsIdsScope()!==e.DocumentsIdsScope.NONE){let i=n.putNewStructure("DocumentsIdsRequest");i.putStringNotNullAndNotEmpty("DocumentsDirectory",t.getDocumentsDirectory());i.putStringNotNullAndNotEmpty("ReturnDocumentsIds",e.QInAConverter.lookupDocumentsIdsScopeInA(t.getDocumentsIdsScope()))}}if(l.supportsPagingTupleCountBeforeSlicing()){n.putBoolean("TupleCountTotal",a.isReturnTupleCountTotal())}if(l.supportsEncodedResultset()){n.putString("ResultFormat","Version2");n.putString("ResultEncoding","None");if(i.getResultSetPersistenceIdentifier()!==null){let r=!i.isRemotePreQuery();if(r){n.putBoolean("IsCubeBlendingSubquery",true)}if(o){n.putString("ResultSetPersistanceIdentifier",i.getResultSetPersistenceIdentifier());n.putString("ResultFormat","SerializedData")}else if(e.QInAOptions.isCubeCacheQuery(a)){n.putString("ResultSetPersistanceIdentifier",i.getResultSetPersistenceIdentifier())}else{n.putString("ResultFormat","SerializedData")}if(t.getSystemType().isTypeOf(e.SystemType.BW)){if(r&&t.getResultSetPersistenceType()===e.BlendingPersistenceType.VIEW){n.putString("ResultSetPersistanceType","View")}else if(r&&t.getResultSetPersistenceType()===e.BlendingPersistenceType.CUBE){n.putString("ResultSetPersistanceType","Cube")}}}}if(e.notNull(a)&&l.supportsKeepOriginalTexts()){n.putBoolean("ResultKeepOriginalTexts",a.isKeepingOriginalTexts())}if(i.getSuppressCalculatedMembersWithoutBookedData()!==-1){n.putInteger("SuppressCalculatedMembersWithoutBookedData",i.getSuppressCalculatedMembersWithoutBookedData())}if(l.supportsResultSetCache()&&t.getInitSettings().usesResultSetCache()){n.putBoolean("UseResultSetCache",true)}return n},exportPaging:function(e,t){let n=t.getActiveResultSetContainer();let i=e.putNewStructure("SubSetDescription");let r=n.getMaxRows();let o=n.getOffsetRows();i.putInteger("RowFrom",o);if(r===-1){i.putInteger("RowTo",-1)}else{i.putInteger("RowTo",o+r)}let l=n.getMaxColumns();let a=n.getOffsetColumns();i.putInteger("ColumnFrom",a);if(l===-1){i.putInteger("ColumnTo",-1)}else{i.putInteger("ColumnTo",a+l)}},exportQueryStateHint:function(t,n){if(n.getModelCapabilities().supportsRRI3()){let i;if(t.getListByKey("BW")!==null&&t.getListByKey("BW").hasElements()){i=t.getListByKey("BW").addNewStructure()}else{i=t.putNewList("BW").addNewStructure()}i.putString("Key","ModelState");i.putString("Value",e.XInteger.convertToString(n.getAndUseResultsetStateId()))}},exportReturnedDataSelections:function(t,n){let i=n.getQueryModel();if(e.notNull(i)){let r=n.getModelCapabilities().supportsUniqueAxisProperties()?i.getReturnedUniqueAxisProperties():null;let o=e.isNull(r)?null:r.getEffectiveRowProperties();let l=e.isNull(r)?null:r.getEffectiveColumnProperties();let a=e.XCollectionUtils.hasElements(o);let s=e.XCollectionUtils.hasElements(l);if(n.supportsReturnedDataSelection()||a||s){let r=t.putNewStructure("ReturnedDataSelection");if(n.supportsReturnedDataSelection()){let t=i.getAllReturnedDataSelections();let o=t.getKeysAsIterator();while(o.hasNext()){let l=o.next();let a=t.getByKey(l).getBoolean();if(l===e.ReturnedDataSelection.ACTIONS&&n.getModelCapabilities().supportsNoDataActions()){continue}if(n.getSession().hasFeature(e.FeatureToggleOlap.EPM_SUPPRESS_PLANNING_ACTIVATION_BY_DEFAULT)&&l===e.ReturnedDataSelection.INPUT_READINESS_STATES&&!i.getSystemType().isTypeOf(e.SystemType.ABAP)&&i.getPlanningMode()===e.PlanningMode.DISABLE_PLANNING){a=false}r.putBoolean(e.QInAConverter.lookupReturnedDataSelectionInA(l),a)}}if(a||s){let t=r.putNewStructure("UniqueAxisProperties");if(a){let n=t.putNewStructure("Rows");e.XCollectionUtils.forEach(o.getKeysAsReadOnlyList(),t=>{n.putBoolean(e.QInAConverter.lookupUniqueAxisPropertyInA(t),o.getByKey(t).getBoolean())})}if(s){let n=t.putNewStructure("Columns");e.XCollectionUtils.forEach(l.getKeysAsReadOnlyList(),t=>{n.putBoolean(e.QInAConverter.lookupUniqueAxisPropertyInA(t),l.getByKey(t).getBoolean())})}}}}},exportSuppressKeyfigureCalculation:function(t,n){if(e.notNull(t)&&e.notNull(n)&&n.isKeyfigureCalculationSuppressed()){t.putBoolean("SuppressKeyfigureCalculation",true)}},fillOptions:function(t,n,i,r){let o=e.PrFactory.createList();if(n.supportsServerState()){o.addString("StatefulServer")}if(r.isLightweight()&&n.supportsLightweightMetadata()&&!n.supportsMetadataResultFormatOptions()){o.addString("Lightweight")}let l=r.getServerCustomizations();o.addAllStrings(l.getValuesAsReadOnlyList());if(i.hasFeature(e.FeatureToggleOlap.NO_EMPTY_OPTIONS)===false||o.hasElements()){t.put("Options",o)}},getPagingSetter:function(e){let t=e;if(e.isShallow()){t=e.getActiveResultSetContainer()}return t},importOptimizerHints:function(t,n){if(n.getModelCapabilities().supportsCeScenarioParams()){n.getQueryModel().clearAllOptimizerHints();let i=t.getStructureByKey("Hints");if(e.notNull(i)){e.QInAOptions.importOptimizerHintsByEngine(i,e.ExecutionEngine.CALC_ENGINE,n);e.QInAOptions.importOptimizerHintsByEngine(i,e.ExecutionEngine.MDS,n);e.QInAOptions.importOptimizerHintsByEngine(i,e.ExecutionEngine.SQL,n)}}},importOptimizerHintsByEngine:function(t,n,i){let r=i.getQueryModel();let o=t.getListByKey(n.getName());if(e.notNull(o)){let e=o.size();for(let t=0;t<e;t++){let e=o.getStructureAt(t);let i=e.getStringByKey("Key");let l=e.getStringByKey("Value");r.addOptimizerHint(n,i,l)}}},importPaging:function(t,n){if(e.notNull(t)){let i=t.getStructureByKey("SubSetDescription");if(e.isNull(i)||!n.getSession().hasFeature(e.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)&&!n.isApplyingRepoState()){return}let r=i.getIntegerByKey("RowFrom");let o=e.QInAOptions.getPagingSetter(n);if(r>-1){o.setOffsetRows(r);o.setMaxRows(i.getIntegerByKey("RowTo")-r)}else{o.setMaxRows(i.getIntegerByKey("RowTo"))}let l=i.getIntegerByKey("ColumnFrom");if(l>-1){o.setOffsetColumns(l);o.setMaxColumns(i.getIntegerByKey("ColumnTo")-l)}else{o.setMaxColumns(i.getIntegerByKey("ColumnTo"))}}},importReturnedDataSelections:function(t,n,i){if(e.notNull(n)){if(e.notNull(i)&&i.supportsReturnedDataSelection()){let r=n.getStructureByKey("ReturnedDataSelection");if(e.notNull(r)&&r.hasElements()){let n=r.getKeysAsReadOnlyList();let o=n.size();let l=i.getSession().hasFeature(e.FeatureToggleOlap.RETURNED_DATA_SELECTION_SWITCHOFF_CELLEXPLAIN);for(let a=0;a<o;a++){let o=e.QInAConverter.lookupReturnedDataSelection(n.get(a));if(e.notNull(o)){let n=i.getQueryModel();if(o===e.ReturnedDataSelection.TUPLE_ELEMENT_IDS){n.toggleReturnedDataSelection(o,true);continue}if(l&&o===e.ReturnedDataSelection.CELL_EXPLAIN&&t){n.toggleReturnedDataSelection(o,false);continue}n.toggleReturnedDataSelection(o,r.getBooleanByKeyExt(o.getName(),false))}}}}}},importSuppressKeyfigureCalculation:function(t,n){if(e.notNull(t)&&e.notNull(n)&&t.containsKey("SuppressKeyfigureCalculation")){e.QInAOptions.getPagingSetter(n).setSuppressKeyfigureCalculation(t.getBooleanByKeyExt("SuppressKeyfigureCalculation",false))}},isCubeCacheQuery:function(t){let n=t.getOptimizerHintsByExecutionEngine(e.ExecutionEngine.MDS);return e.notNull(n)&&n.containsKey(e.OptimizerHint.CUBE_CACHE_WITH_ID.getName())},setLanguage:function(t,n){let i=n.getConnection().getSystemDescription().getLanguage();if(e.XStringUtils.isNullOrEmpty(i)){let t=n.getProcess().getUserProfile();if(e.notNull(t)){i=t.getDataAccessLanguage()}}t.putStringNotNullAndNotEmpty("Language",e.XString.toUpperCase(i))},setRequestTimeZone:function(t,n){if(e.notNull(t)&&n.getModelCapabilities().supportsRequestTimezone()){t.putStringNotNullAndNotEmpty("Timezone",n.getQueryServiceConfig().getRequestTimeZone())}}};e.QInAVariableVariants={exportVariableVariant:function(t,n){if(e.notNull(n)){let e=t.putNewStructure("VariableVariant");e.putStringNotNullAndNotEmpty("Name",n.getName());e.putString("Description",n.getText());e.putString("Scope",n.getScope().getName())}}};e.QInAVersion={exportPlanningVersionAliases:function(t,n){let i=n.getVersionAliases();if(!e.XCollectionUtils.hasElements(i)){return}let r=t.putNewList("AliasMapping");let o=i.getKeysAsReadOnlyList();o.sortByDirection(e.XSortDirection.ASCENDING);let l=o.size();for(let t=0;t<l;t++){let n=o.get(t);let l=i.getByKey(n);let a=e.PrFactory.createStructure();a.putString("Alias",n);a.putString("Version",l);r.add(a)}},exportPlanningVersionRestriction:function(t,n){let i=e.QInAVersion.getPlanningVersionRestrictionEffective(n);if(i===e.PlanningVersionRestrictionType.SERVER_DEFAULT){return}if(i===e.PlanningVersionRestrictionType.CONSTRAIN_PRIVATE_VERSIONS){t.putBoolean("ConstrainPrivateVersions",true)}else if(i===e.PlanningVersionRestrictionType.ONLY_PRIVATE_VERSIONS){t.putBoolean("RestrictToPrivateVersions",true)}else if(i===e.PlanningVersionRestrictionType.NONE){t.putBoolean("RestrictToPrivateVersions",false)}},exportPlanningVersionSettings:function(t,n){let i=e.QInAVersion.getAllPlanningActionSequenceSettingsEffective(n);if(e.isNull(i)){return}let r=null;let o=e.QInAVersion.getPlanningVersionRestrictionEffective(n);let l=i.size();for(let n=0;n<l;n++){let l=i.get(n);let a=l.getActionSequenceId()!==null;if(!a){if(!o.isExplicitlyRestricted()){continue}if(!l.getIsRestrictionEnabled()){continue}}if(e.isNull(r)){r=t.putNewList("Versions")}let s=r.addNewStructure();s.putBoolean("UseExternalView",l.getUseExternalView());let u=l.getVersionId();if(u===-1){s.putString("Version",l.getVersionUniqueName())}else{s.putInteger("Version",u)}if(a){s.putString("SequenceId",l.getActionSequenceId())}if(l.isSharedVersion()){s.putString("Owner",l.getVersionOwner())}}},exportPlanningVersions:function(t,n){e.QInAVersion.exportPlanningVersionRestriction(t,n);e.QInAVersion.exportPlanningVersionSettings(t,n);e.QInAVersion.exportPlanningVersionAliases(t,n)},getAllPlanningActionSequenceSettingsEffective:function(t){let n=e.QInAVersion.getPlanningActionSequenceSettingsModeEffective(t);if(e.isNull(n)){return null}let i=null;if(n===e.PlanningVersionSettingsMode.PLANNING_SERVICE){let n=e.PlanningModelUtil.getPlanningServiceFromQueryDataSource(t.getApplication(),t.getSystemName(),t.getDataSource());if(e.notNull(n)){let t=n.getPlanningContext();let r=t.getAllVersions();if(e.XCollectionUtils.hasElements(r)){let t=e.XList.create();let n=r.size();for(let e=0;e<n;e++){let n=r.get(e);t.add(n)}i=t}}}else if(n===e.PlanningVersionSettingsMode.QUERY_SERVICE){i=t.getAllPlanningVersionSettings()}if(!e.XCollectionUtils.hasElements(i)){return null}let r=e.XHashMapByString.create();let o=i.size();for(let e=0;e<o;e++){let t=i.get(e);r.put(t.getVersionUniqueName(),t.createVersionSettings())}if(!e.XCollectionUtils.hasElements(r)){return null}let l=e.XList.createWithList(r.getKeysAsReadOnlyList());l.sortByDirection(e.XSortDirection.ASCENDING);let a=e.XList.create();let s=l.size();for(let e=0;e<s;e++){a.add(r.getByKey(l.get(e)))}return a},getPlanningActionSequenceSettingsModeEffective:function(t){if(!t.isDataEntryEnabled()){return null}let n=t.getSystemType();if(!n.isTypeOf(e.SystemType.HANA)){return null}let i=t.getPlanningVersionSettingsMode();if(i===e.PlanningVersionSettingsMode.SERVER_DEFAULT){return null}return i},getPlanningVersionRestrictionEffective:function(t){if(!t.isDataEntryEnabled()){return e.PlanningVersionRestrictionType.SERVER_DEFAULT}let n=t.getSystemType();if(!n.isTypeOf(e.SystemType.HANA)){return e.PlanningVersionRestrictionType.SERVER_DEFAULT}let i=t.getPlanningVersionSettingsMode();if(i===e.PlanningVersionSettingsMode.SERVER_DEFAULT){return e.PlanningVersionRestrictionType.SERVER_DEFAULT}let r=t.getPlanningRestriction();if(e.isNull(r)){return e.PlanningVersionRestrictionType.SERVER_DEFAULT}return r}};e.PlanningStateHandler={s_planningStateUpdater:null,getDataAreaStateByName:function(t,n,i){return e.PlanningStateHandler.s_planningStateUpdater.getDataAreaStateByName(t,n,i)},setInstance:function(t){e.PlanningStateHandler.s_planningStateUpdater=t},update:function(t,n,i,r){e.PlanningStateHandler.s_planningStateUpdater.update(t,n,i,r)},updateFromResponse:function(t,n,i,r,o){e.PlanningStateHandler.s_planningStateUpdater.updateFromResponse(t,n,i,r,o)}};e.PlanningStateHandlerDummyImpl=function(){};e.PlanningStateHandlerDummyImpl.prototype=new e.XObject;e.PlanningStateHandlerDummyImpl.prototype._ff_c="PlanningStateHandlerDummyImpl";e.PlanningStateHandlerDummyImpl.prototype.getDataAreaStateByName=function(e,t,n){return null};e.PlanningStateHandlerDummyImpl.prototype.update=function(e,t,n,i){return};e.PlanningStateHandlerDummyImpl.prototype.updateFromResponse=function(e,t,n,i,r){return};e.InADimensionLazyLoader=function(){};e.InADimensionLazyLoader.prototype=new e.XObject;e.InADimensionLazyLoader.prototype._ff_c="InADimensionLazyLoader";e.InADimensionLazyLoader.createLazyLoader=function(t,n){let i=new e.InADimensionLazyLoader;i.setupExt(t,n);return i};e.InADimensionLazyLoader.prototype.m_importer=null;e.InADimensionLazyLoader.prototype.m_queryModel=null;e.InADimensionLazyLoader.prototype.m_useDesignTimeMetadata=false;e.InADimensionLazyLoader.prototype.copyDimensionLazyLoader=function(t){return e.InADimensionLazyLoader.createLazyLoader(t,this.m_useDesignTimeMetadata)};e.InADimensionLazyLoader.prototype.getInaDimension=function(t){let n=null;let i;if(this.m_useDesignTimeMetadata){i=this.m_queryModel.getServerBaseSerializationForBaseState()}else{i=this.m_queryModel.getServerBaseSerialization()}if(e.isNull(i)){i=this.m_queryModel.getMetadata()}if(e.notNull(i)){let r=i.getListByKey("Dimensions");let o=r.size();for(let i=0;i<o;i++){let o=r.getStructureAt(i);let l=o.getStringByKey("Name");if(e.XString.isEqual(l,t)){n=o;break}}}return n};e.InADimensionLazyLoader.prototype.hasFieldWithName=function(t,n){let i=this.getInaDimension(t);return e.notNull(i)&&this.hasFieldWithProperty(i,"Name",n)};e.InADimensionLazyLoader.prototype.hasFieldWithNameOrAlias=function(t,n){let i=false;let r=this.getInaDimension(t);if(e.notNull(r)){if(this.hasFieldWithProperty(r,"Name",n)){i=true}else{i=this.hasFieldWithProperty(r,"AliasName",n)}}return i};e.InADimensionLazyLoader.prototype.hasFieldWithProperty=function(t,n,i){let r=t.getListByKey("Attributes");if(e.isNull(r)){r=t.getListByKey("AttributesMd")}return e.PrUtils.getStructureWithKeyValuePair(r,n,i)!==null};e.InADimensionLazyLoader.prototype.isUseDesignTimeMetadata=function(){return this.m_useDesignTimeMetadata};e.InADimensionLazyLoader.prototype.lazyLoadDimension=function(t){let n=null;let i=this.getInaDimension(t);if(e.notNull(i)){n=this.m_importer.importDimension(i,this.m_queryModel)}return n};e.InADimensionLazyLoader.prototype.releaseObject=function(){this.m_queryModel=null;this.m_importer=e.XObjectExt.release(this.m_importer);e.XObject.prototype.releaseObject.call(this)};e.InADimensionLazyLoader.prototype.setUseDesignTimeMetadata=function(e){this.m_useDesignTimeMetadata=e};e.InADimensionLazyLoader.prototype.setupExt=function(t,n){this.m_queryModel=t;this.m_useDesignTimeMetadata=n;this.m_importer=e.QInAImportFactory.createWithQueryManagerCapabilities(t.getApplication(),e.QModelFormat.INA_METADATA,t.getQueryManager())};e.DfDocumentsStoreServiceFactoryImpl=function(){};e.DfDocumentsStoreServiceFactoryImpl.prototype=new e.XObject;e.DfDocumentsStoreServiceFactoryImpl.prototype._ff_c="DfDocumentsStoreServiceFactoryImpl";e.DfDocumentsStoreServiceFactoryImpl.createFactory=function(){return new e.DfDocumentsStoreServiceFactoryImpl};e.DfDocumentsStoreServiceFactoryImpl.prototype.newDocumentStore=function(t,n,i){let r=t.getQueryModel().getDocumentsInfo();let o=t.getQueryModel().getDataSource().getInstanceId();let l=null;if(t.getModelCapabilities().supportsCellDocumentId()&&e.notNull(r)&&r.getSupportsDocuments()!==e.DocumentsSupportType.NONE){l=e.DfDocumentsStoreService.createDocumentStoreService(r,n,i,o)}return l};e.DfDocumentsStoreServiceFactoryImpl.prototype.newDocumentStoreForShallowQueryManager=function(t,n,i,r,o){return e.DfDocumentsStoreService.createDocumentStoreServiceShallow(t,i,r,o,n)};e.InAQMgrMergeSettings=function(){};e.InAQMgrMergeSettings.prototype=new e.XObject;e.InAQMgrMergeSettings.prototype._ff_c="InAQMgrMergeSettings";e.InAQMgrMergeSettings.create=function(t){let n=new e.InAQMgrMergeSettings;n.m_isInitialBWMerge=t;return n};e.InAQMgrMergeSettings.prototype.m_isInitialBWMerge=false;e.InAQMgrMergeSettings.prototype.isInitialBWMerge=function(){return this.m_isInitialBWMerge};e.InARsEncodedValues=function(){};e.InARsEncodedValues.prototype=new e.XObject;e.InARsEncodedValues.prototype._ff_c="InARsEncodedValues";e.InARsEncodedValues.create=function(t,n){let i=new e.InARsEncodedValues;i.setupExt(t,n);return i};e.InARsEncodedValues.createByStructure=function(t){let n=t.getStringByKey("Encoding");let i=e.QInAConverter.lookupEncoding(n);let r=t.getListByKey("Values");return e.InARsEncodedValues.create(i,r)};e.InARsEncodedValues.prototype.m_backwardIndexingPosition=0;e.InARsEncodedValues.prototype.m_backwardIntegerIndex=null;e.InARsEncodedValues.prototype.m_index=0;e.InARsEncodedValues.prototype.m_size=0;e.InARsEncodedValues.prototype.m_values=null;e.InARsEncodedValues.prototype.cloneExt=function(t){return e.InARsEncodedValues.create(e.ResultSetEncoding.NONE,this.m_values.getPermaCopy())};e.InARsEncodedValues.prototype.getIndexForIntegerValue=function(e){let t=e;if(e>-1){t=this.lookupIntegerAndLazilyCreateIndex(e)}return t};e.InARsEncodedValues.prototype.getNextDoubleValue=function(){this.m_index++;return this.m_values.getDoubleAt(this.m_index)};e.InARsEncodedValues.prototype.getNextIntegerValue=function(){this.m_index++;return this.m_values.getIntegerAt(this.m_index)};e.InARsEncodedValues.prototype.getNextStringValue=function(){this.m_index++;return this.m_values.getStringAt(this.m_index)};e.InARsEncodedValues.prototype.hasNextValue=function(){return this.m_index+1<this.m_size};e.InARsEncodedValues.prototype.lookupIntegerAndLazilyCreateIndex=function(t){if(e.isNull(this.m_backwardIntegerIndex)){this.m_backwardIntegerIndex=e.XHashMapByString.create();this.m_backwardIndexingPosition=-1}let n=t;let i=this.m_backwardIntegerIndex.getByKey(e.XInteger.convertToString(t));if(e.notNull(i)){n=i.getInteger()}else{let i=this.m_values.size();let r=-1e3;this.m_backwardIndexingPosition++;for(;this.m_backwardIndexingPosition<i;this.m_backwardIndexingPosition++){if(this.m_values.getElementTypeAt(this.m_backwardIndexingPosition).isNumber()){let i=this.m_values.getIntegerAt(this.m_backwardIndexingPosition);if(i===r){continue}r=i;let o=e.XInteger.convertToString(i);if(!this.m_backwardIntegerIndex.containsKey(o)){this.m_backwardIntegerIndex.put(o,e.XIntegerValue.create(this.m_backwardIndexingPosition))}if(i===t){n=this.m_backwardIndexingPosition;break}}}if(this.m_backwardIndexingPosition===i){e.XLogger.println(e.XStringUtils.concatenate3("WARNING: Invalid hierarchy: parent index ",e.XInteger.convertToString(t)," refers to non-existing value."))}}return n};e.InARsEncodedValues.prototype.releaseObject=function(){this.m_values=null;this.m_backwardIntegerIndex=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_backwardIntegerIndex);e.XObject.prototype.releaseObject.call(this)};e.InARsEncodedValues.prototype.resetCursor=function(){this.m_index=-1};e.InARsEncodedValues.prototype.setupExt=function(t,n){this.m_values=n;this.m_index=-1;if(t!==e.ResultSetEncoding.NONE){throw e.XException.createIllegalStateException("Wrong or no encoding given")}this.m_size=n.size()};e.InARsEncodedValues.prototype.size=function(){return this.m_size};e.InARsEncodedValues.prototype.skip=function(){this.m_index++};e.InARsEncodedValues.prototype.skipBack=function(){this.m_index--};e.MeasureValueHelpRsDataCellProvider=function(){};e.MeasureValueHelpRsDataCellProvider.prototype=new e.XObject;e.MeasureValueHelpRsDataCellProvider.prototype._ff_c="MeasureValueHelpRsDataCellProvider";e.MeasureValueHelpRsDataCellProvider.create=function(){return new e.MeasureValueHelpRsDataCellProvider};e.MeasureValueHelpRsDataCellProvider.prototype.getAllAvailableDocumentIds=function(){return null};e.MeasureValueHelpRsDataCellProvider.prototype.getAvailableDataCellColumns=function(){return 0};e.MeasureValueHelpRsDataCellProvider.prototype.getAvailableDataCellCount=function(){return 0};e.MeasureValueHelpRsDataCellProvider.prototype.getAvailableDataCellRows=function(){return 0};e.MeasureValueHelpRsDataCellProvider.prototype.notifyCursorChange=function(e,t,n){};e.RsDrillGroupDimension=function(){};e.RsDrillGroupDimension.prototype=new e.XObject;e.RsDrillGroupDimension.prototype._ff_c="RsDrillGroupDimension";e.RsDrillGroupDimension.create=function(t,n,i){let r=new e.RsDrillGroupDimension;r.setupProperties(t,n,i);return r};e.RsDrillGroupDimension.prototype.m_description=null;e.RsDrillGroupDimension.prototype.m_dimensionName=null;e.RsDrillGroupDimension.prototype.m_dimensionType=null;e.RsDrillGroupDimension.prototype.cloneExt=function(t){return e.RsDrillGroupDimension.create(this.m_dimensionName,this.m_description,this.m_dimensionType)};e.RsDrillGroupDimension.prototype.getDescription=function(){return this.m_description};e.RsDrillGroupDimension.prototype.getDimensionName=function(){return this.m_dimensionName};e.RsDrillGroupDimension.prototype.getDimensionType=function(){return this.m_dimensionType};e.RsDrillGroupDimension.prototype.releaseObject=function(){e.XObject.prototype.releaseObject.call(this);this.m_dimensionName=null;this.m_description=null;this.m_dimensionType=null};e.RsDrillGroupDimension.prototype.setupProperties=function(e,t,n){this.m_dimensionName=e;this.m_description=t;this.m_dimensionType=n};e.RuntimeRemoteBlendingQueryUpdateResult=function(){};e.RuntimeRemoteBlendingQueryUpdateResult.prototype=new e.XObject;e.RuntimeRemoteBlendingQueryUpdateResult.prototype._ff_c="RuntimeRemoteBlendingQueryUpdateResult";e.RuntimeRemoteBlendingQueryUpdateResult.create=function(t){let n=new e.RuntimeRemoteBlendingQueryUpdateResult;n.m_success=t;return n};e.RuntimeRemoteBlendingQueryUpdateResult.prototype.m_success=false;e.RuntimeRemoteBlendingQueryUpdateResult.prototype.isSuccess=function(){return this.m_success};e.QInADataSource=function(){};e.QInADataSource.prototype=new e.QInAComponent;e.QInADataSource.prototype._ff_c="QInADataSource";e.QInADataSource.exportDataSource=function(t,n,i,r,o){let l=e.PrFactory.createStructure();let a=n.getType();if(e.notNull(a)){if(t.m_mode===e.QModelFormat.INA_VALUE_HELP&&a===e.MetaObjectType.QUERY){l.putString("Type",e.MetaObjectType.QUERY_VALUEHELP.getCamelCaseName())}else if(t.m_mode===e.QModelFormat.INA_VALUE_HELP&&a===e.MetaObjectType.MODEL){l.putString("Type",e.MetaObjectType.MODEL_VALUEHELP.getCamelCaseName())}else if(t.m_mode===e.QModelFormat.INA_VALUE_HELP&&a===e.MetaObjectType.CDS_PROJECTION_VIEW){l.putString("Type",e.MetaObjectType.CDS_PROJECTION_VIEW_VALUEHELP.getCamelCaseName())}else if(t.m_mode===e.QModelFormat.INA_FUNCTIONAL_VARIABLES_VALUE_HELP){l.putString("Type",e.MetaObjectType.FUNCTIONAL_VARIABLES_VALUEHELP.getCamelCaseName())}else{l.putString("Type",a.getCamelCaseName())}let r=n.getSystemName();if(e.notNull(r)&&t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){l.putString("System",r)}let s;if(a===e.MetaObjectType.MULTI_SOURCE){s=l.putNewList("Sources");let r=n.getMultiSources();let a=r.size();for(let n=0;n<a;n++){let l=r.get(n);let a=e.QInADataSource.exportDataSource(t,l,i,null,o);s.add(a)}l.put("Mappings",n.getMappings())}else if(a===e.MetaObjectType.BLENDING){let i=n.getBlendingDefinition();if(e.notNull(i)){s=e.QInADataSourceBlending.exportBlendingSources(t.getMode(),i,true);l.put("Sources",s);let n=e.QInADataSourceBlending.exportBlendingMappings(i.getMappings());l.put("Mappings",n)}}}e.QInADataSourceProperties.exportQd(t,n,l,i,o);e.QInADataSourceExtDims.exportQd(t,n,l,o);let s=n.getGenericServiceDescription();if(e.notNull(s)){l.put("GenericServiceDescription",s)}if(e.notNull(r)){r.put("DataSource",l)}return l};e.QInADataSource.importQd=function(t,n,i,r){let o=n;if(e.notNull(i)){if(e.notNull(o)&&!o.containsKey(i)){o=o.getStructureByKey("Analytics");if(e.notNull(o)&&!o.containsKey(i)){o=o.getStructureByKey("Definition")}}if(e.notNull(o)&&o.containsKey(i)){let t=o.getElementTypeByKey(i);if(t===e.PrElementType.STRING){return e.QFactory.createDataSourceWithType(e.MetaObjectType.INFOPROVIDER,o.getStringByKey(i))}else if(t===e.PrElementType.STRUCTURE){o=o.getStructureByKey(i)}}else if(e.notNull(o)&&!o.containsKey(i)){o=null}}if(e.isNull(o)){return null}let l=e.QFactory.createDataSource();let a=o.getStringByKey("System");if(e.notNull(a)){l.setSystemName(a)}let s=o.getStringByKey("Type");let u=null;if(e.notNull(s)){s=e.XString.toLowerCase(s);u=e.MetaObjectType.lookup(s)}if(e.isNull(u)){u=e.MetaObjectType.DBVIEW}l.setType(u);e.QInADataSourceProperties.importQd(l,o);if(u===e.MetaObjectType.MULTI_SOURCE||u===e.MetaObjectType.BLENDING){let n=e.PrUtils.getListProperty(o,"Sources");if(e.notNull(n)){let i=l.getMultiSourcesBase();let o=n.size();for(let l=0;l<o;l++){let o=e.PrUtils.getStructureElement(n,l);let a=e.QInADataSource.importQd(t,o,null,r);i.add(a)}}let i=e.PrUtils.getListProperty(o,"Mappings");l.setMappings(i)}e.QInADataSourceExtDims.importQd(t,l,o);let p=n.getStringByKey("ValidationHash");if(e.isNull(p)){p=o.getStringByKey("ValidationHash")}l.setValidationHash(p);let g=n.getStructureByKey("GenericServiceDescription");if(e.notNull(g)){l.setGenericServiceDescription(g)}return l};e.QInADataSource.prototype.exportComponent=function(t,n,i,r){let o=e.XMath.binaryAnd(r,e.QImExFlag.RUN_AS_USER)>0;return e.QInADataSource.exportDataSource(t,n,o,null,false)};e.QInADataSource.prototype.getComponentType=function(){return e.OlapComponentType.DATA_SOURCE};e.QInADataSource.prototype.importComponent=function(t,n,i,r,o){return e.QInADataSource.importQd(t,n,"DataSource",o)};e.QInAExportFactoryImpl=function(){};e.QInAExportFactoryImpl.prototype=new e.QInAExportFactory;e.QInAExportFactoryImpl.prototype._ff_c="QInAExportFactoryImpl";e.QInAExportFactoryImpl.staticSetupImpl=function(){e.QInAExportFactory.put(e.QModelFormat.INA_CLONE,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_CLONE_RENDERING,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_REPOSITORY,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_REPOSITORY_DATA,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_REPOSITORY_DATA_RENDERING,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_REPOSITORY_NO_VARS,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_REPOSITORY_DELTA,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_METADATA,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_METADATA_CORE,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_METADATA_BLENDING,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_METADATA_RENDERING,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_DATA,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_PERSISTED_QUERY_DATA,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_PERSISTED_QUERY_DATA_BLENDING,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_DATA_MERGE_PROCESSING,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_DATA_BLENDING_SOURCE,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_DATA_BLENDING_SOURCE_METADATA,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_VALUE_HELP,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_FUNCTIONAL_VARIABLES_VALUE_HELP,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.LAYER,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.CSN_METADATA,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.RENDER_INFO,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.SFX,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.VIZDEF,new e.QInAExportFactoryImpl)};e.QInAExportFactoryImpl.prototype.createExporter=function(t,n,i,r){if(n===e.QModelFormat.RENDER_INFO){let o=new e.QRsInfoExport;o.setupImportExport(t,n,i,r);return o}let o=new e.QInAExportImpl;o.setupImportExport(t,n,i,r);return o};e.QInAImportFactoryImpl=function(){};e.QInAImportFactoryImpl.prototype=new e.QInAImportFactory;e.QInAImportFactoryImpl.prototype._ff_c="QInAImportFactoryImpl";e.QInAImportFactoryImpl.staticSetupImpl=function(){e.QInAImportFactory.put(e.QModelFormat.INA_CLONE,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_CLONE_RENDERING,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_REPOSITORY,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_REPOSITORY_DATA,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_REPOSITORY_DATA_RENDERING,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_REPOSITORY_NO_VARS,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_REPOSITORY_DELTA,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_METADATA,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_METADATA_CORE,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_METADATA_BLENDING,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_METADATA_RENDERING,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_DATA,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_DATA_REINIT,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.LAYER,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.VIZDEF,new e.QInAImportFactoryImpl)};e.QInAImportFactoryImpl.prototype.createImporter=function(t,n,i){let r=new e.QInAImportImpl;r.setupImportExport(t,n,i,null);return r};e.QInAImportFactoryImpl.prototype.createImporterWithQueryManagerCapabilities=function(e,t,n){return this.createImporter(e,t,n.getModelCapabilities())};e.QInAFilterCartesianList=function(){};e.QInAFilterCartesianList.prototype=new e.QInAComponent;e.QInAFilterCartesianList.prototype._ff_c="QInAFilterCartesianList";e.QInAFilterCartesianList.setStringIfFilterBagNotNull=function(t,n,i,r){if(e.notNull(t)&&t.getValue()!==null){e.QInAValueUtils.exportFilterValue(n,r,i,t,e.XValueType.STRING)}};e.QInAFilterCartesianList.prototype.exportComponent=function(t,n,i,r){let o=n;if(o.hasElements()){let n=o.getOp(0);let r=n.getComparisonOperator();if(e.notNull(r)){if(r.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){return this.exportSpatialList(t,o,i)}else if(r===e.ComparisonOperator.SEARCH){return this.exportSearchList(t,o,i)}}return this.exportStandardList(t,o,i)}return null};e.QInAFilterCartesianList.prototype.exportSearchList=function(t,n,i){let r=n.getFieldMetadata();let o=r.getValueType();let l=e.isNull(i)?e.PrFactory.createStructure():i;let a=l.putNewStructure("Operator");a.putString("Code","Or");let s=a.putNewList("SubSelections");let u=n.size();for(let i=0;i<u;i++){let l=n.getOp(i);if(l.getComparisonOperator()!==e.ComparisonOperator.SEARCH){t.addError(e.ErrorCodes.INVALID_OPERATOR,"Comparison operator is not search");return null}let a=s.addNewStructure();let u=a.putNewStructure("SearchOperand");if(this.isAbap(t,n)){u.putString("FieldName",r.getName());let n=t.getMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING||t.getOriginalMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING;let i=r.getDimensionMetadata();if(n&&e.notNull(i)){if(i.isMeasureStructure()){u.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_FILTER_MEASURE_STRUCTURE)}else if(i.isSecondaryStructure()){u.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_FILTER_SECOND_STRUCTURE)}}}u.putString("AttributeName",r.getName());e.QInAValueUtils.exportFilterValue(t,"Value",u,l.getLow(),o);u.putDouble("Exactness",l.getExactness())}return l};e.QInAFilterCartesianList.prototype.exportSpatialList=function(t,n,i){if(!t.m_capabilities.supportsSpatialFilter()){t.addWarning(e.ErrorCodes.INVALID_OPERATOR,"System does not support spatial filtering.");return null}let r=n.getFieldMetadata();let o=e.isNull(i)?e.PrFactory.createStructure():i;let l=o.putNewStructure("Operator");l.putString("Code","Or");let a=l.putNewList("SubSelections");let s=n.size();for(let i=0;i<s;i++){let o=n.getOp(i);let l=o.getComparisonOperator();if(e.isNull(l)){t.addError(e.ErrorCodes.INVALID_OPERATOR,"Comparison operator is not set");return null}if(!l.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){t.addError(e.ErrorCodes.INVALID_OPERATOR,"Comparison operator not spatial");return null}let s=a.addNewStructure();let u=s.putNewStructure("GeometryOperand");u.putString("FieldName",r.getName());let p=t.getMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING||t.getOriginalMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING;let g=r.getDimensionMetadata();if(p&&e.notNull(g)){if(g.isMeasureStructure()){u.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_FILTER_MEASURE_STRUCTURE)}else if(g.isSecondaryStructure()){u.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_FILTER_SECOND_STRUCTURE)}}u.putString("Comparison",e.QInAConverter.lookupComparisonInA(l));if(o.getSetSign()===e.SetSign.EXCLUDING){u.putBoolean("IsExcluding",true)}let m=o.getLow();e.QInAFilterCartesianList.setStringIfFilterBagNotNull(m,t,u,"Value1");if(m.getValueType().isSpatial()){let n=m.getGeometry().getSrid();if(t.m_capabilities.supportsSpatialFilterSrid()&&e.notNull(n)){u.putInteger("SRID",n.getInteger())}}if(m.getValue()!==null){if(t.m_mode===e.QModelFormat.INA_PERSISTED_QUERY_DATA&&m.getTagging().containsKey("PersistedQueryPlaceholder")){u.putString("Value1",m.getTagging().getByKey("PersistedQueryPlaceholder"))}}let c=o.getHigh();e.QInAFilterCartesianList.setStringIfFilterBagNotNull(c,t,u,"Value2");let y=o.getThird();if(e.XStringUtils.isNotNullAndNotEmpty(y.getString())){e.QInAFilterCartesianList.setStringIfFilterBagNotNull(y,t,u,"Value3")}}return o};e.QInAFilterCartesianList.prototype.exportStandardList=function(t,n,i){let r=n;if(r.isEmpty()){return null}let o=r.getFieldMetadata();let l=e.notNull(o)?o.getName():r.getFieldName();if(e.isNull(o)&&e.XStringUtils.isNullOrEmpty(l)){t.addWarning(e.ErrorCodes.INVALID_FIELD,"A field has to be provided to the cartesian list.");return null}let a=n.getQueryModel();if(e.notNull(a)){let n=a.getFieldByName(l);if(e.notNull(n)){let i=n.getDimension();if(t.m_mode===e.QModelFormat.INA_DATA_BLENDING_SOURCE_METADATA&&e.notNull(i)&&i.getTagging().containsKey("isFAM")){return null}}}let s=e.PrFactory.createStructure();s.putString("FieldName",l);let u=r.getHierarchyName();let p=t.getMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING||t.getOriginalMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING;let g=e.notNull(o)?o.getDimensionMetadata():null;if(p&&e.notNull(g)){if(g.isMeasureStructure()){s.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_FILTER_MEASURE_STRUCTURE)}else if(g.isSecondaryStructure()){s.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_FILTER_SECOND_STRUCTURE)}if(e.notNull(u)){let t=e.XStringUtils.concatenate2(e.InAQueryMergeConstants.TAG_HIERARCHICAL_FILTER,g.getName());s.putString(e.InAQueryMergeConstants.TAG_KEY,t)}}if(e.notNull(u)){let n=r.getFilterExpression()!==null?r.getFilterExpression():r.getParent()!==null?r.getParent().getFilterExpression():null;e.QInAHierarchy.exportHierarchyForFilter(t,this.isAbap(t,r),s,null,n,r.getQueryManager(),l,u,r.getHierarchyDueDate(),r.getHierarchyVersion())}if(!t.m_mode.isTypeOf(e.QModelFormat.INA_DATA)&&t.m_capabilities.supportsSupplements()){let t=r.getSupplementFieldNames();if(e.XCollectionUtils.hasElements(t)){let e=s.putNewList("SupplementsFieldNames");e.addAllStrings(t)}}let m=r.isConvertToFlatFilter();let c=s.putNewList("Elements");let y=r.size();for(let e=0;e<y;e++){let n=r.getOp(e);t.exportFilterOperation(n,c.addNewStructure());m=m||n.isConvertToFlatFilter()}if(t.m_capabilities.supportsConvertToFlatFilter()&&m){s.putBoolean("ConvertToFlatSelection",true)}if(e.notNull(i)){i.put("SetOperand",s)}return s};e.QInAFilterCartesianList.prototype.getComponentType=function(){return e.FilterComponentType.CARTESIAN_LIST};e.QInAFilterCartesianList.prototype.importComponent=function(t,n,i,r,o){let l=n;let a=i;let s=e.notNull(r)&&r.getOlapComponentType().isTypeOf(e.OlapComponentType.FILTER_EXPRESSION)?r:a.getFilterExpression();let u=o.getFieldAccessorSingle();let p=l.getStringByKey("FieldName");let g=a;if(e.notNull(p)){let n=u.getFieldByName(p);if(e.isNull(n)){let t=s.getQueryModel();if(e.notNull(t)){let i=t.getDimensionByNameFromExistingMetadata(p);if(e.notNull(i)){let t=l.getStructureByKey("Hierarchy");if(e.isNull(t)){n=i.getFlatKeyField()}else{n=i.getHierarchyKeyField()}}}}if(e.notNull(n)){let i=l.getStructureByKey("Hierarchy");let r=null;let a=null;let p=null;if(e.notNull(i)){r=i.getStringByKey("Name");if(t.getSession().hasFeature(e.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER)&&t.isAbap(n)){let t=i.getStringByKey("DueDate");if(e.notNull(t)){a=e.XDate.createDateFromSAPFormat(t)}p=i.getStringByKey("Version")}}if(e.isNull(g)){g=e.QFilterCartesianList._createMd(o,s,n.getMetadata(),r);g.setHierarchyInfo(r,a,p)}else{g.clear()}let m=l.getBooleanByKeyExt("ConvertToFlatSelection",false);g.setConvertToFlatFilter(m);let c=l.getListByKey("SupplementsFieldNames");if(e.notNull(c)){let e=c.size();for(let t=0;t<e;t++){let e=c.getStringAt(t);let n=u.getFieldByName(e);g.addSupplementField(n)}}let y=l.getListByKey("Elements");if(e.notNull(y)){let e=y.size();for(let n=0;n<e;n++){let e=y.getStructureAt(n);let i=t.importFilterOperation(e,g,o);g.add(i)}}}}return g};e.QInAFilterCartesianList.prototype.isAbap=function(e,t){return e.isAbap(t)||e.isMetadataOfAbap(t.getFieldMetadata(),t.getApplication())};e.QInAFilterCartesianProduct=function(){};e.QInAFilterCartesianProduct.prototype=new e.QInAComponent;e.QInAFilterCartesianProduct.prototype._ff_c="QInAFilterCartesianProduct";e.QInAFilterCartesianProduct.iterateCartesianDimensionsNew=function(t,n,i){let r=n.size();for(let o=0;o<r;o++){let r=n.getCartesianChild(o);let l=e.PrFactory.createStructure();if(r.hasElements()){t.exportCartesianList(r,l);i.add(l)}}};e.QInAFilterCartesianProduct.prototype.exportComponent=function(t,n,i,r){let o=n;if(e.notNull(o)){let n=0;let r=null;let l=o.size();for(let e=0;e<l;e++){let t=o.getCartesianChild(e);if(t.hasElements()){n++;r=t;if(n>1){break}}}if(n>0){let l;if(e.isNull(i)){l=e.PrFactory.createStructure()}else{l=i}if(n===1&&t.m_mode.isTypeOf(e.QModelFormat.INA_DATA)){return t.exportCartesianList(r,i)}let a=l.putNewStructure("Operator");a.putString("Code","And");let s=a.putNewList("SubSelections");e.QInAFilterCartesianProduct.iterateCartesianDimensionsNew(t,o,s);return a}}return null};e.QInAFilterCartesianProduct.prototype.getComponentType=function(){return e.FilterComponentType.CARTESIAN_PRODUCT};e.QInAFilterCartesianProduct.prototype.importComponent=function(t,n,i,r,o){let l=n;let a=r;let s=null;let u=l.getListByKey("Elements");if(e.isNull(u)){u=l.getListByKey("SubSelections")}if(e.notNull(u)){s=e.QFilterCartesianProduct._create(o,a);let n=u.size();for(let i=0;i<n;i++){let n=u.getStructureAt(i);if(e.notNull(n)){let e=t.importCartesianList(n,null,a,o);s.add(e)}}}return s};e.InADocConverterSfxRepo=function(){};e.InADocConverterSfxRepo.prototype=new e.DocConverterFactory;e.InADocConverterSfxRepo.prototype._ff_c="InADocConverterSfxRepo";e.InADocConverterSfxRepo.getAccountMemberName=function(t,n,i){if(e.notNull(t)&&e.notNull(n)){return e.QDimensionMemberNameUtil.buildMDXHierarchyKey(t,n,i)}return i};e.InADocConverterSfxRepo.isNormalizeIntervals=function(t,n,i){let r=null;if(e.isNull(n)){let e=t.getStructureByKey("ModellerDimensions");let n=e.getListByKey("Dimensions");for(let e=0;e<n.size();e++){let t=n.getStructureAt(e);if(t.getBooleanByKeyExt("MeasureStructure",false)){r=t.getListByKey("MembersRepo")}}}else{r=n.getListByKey("MembersRepo")}if(e.notNull(r)){for(let t=0;t<r.size();t++){let n=r.getStructureAt(t);if(e.XString.isEqual(n.getStringByKey("Name"),i)){return n.getIntegerByKeyExt("NumericShift",0)===2||e.XString.isEqual(n.getStringByKeyExt("NumericShift",null),"%")}}}return false};e.InADocConverterSfxRepo.obtainExtendedDimensionDefaultHierarchies=function(t){let n=e.XHashMapByString.create();let i=t.getListByKey(e.SfxConstants.EXTENDED_DIMENSIONS);if(e.notNull(i)&&!i.isEmpty()){for(let t=0;t<i.size();t++){let r=i.getStructureAt(t);let o=r.getStructureByKey(e.SfxConstants.EXTENSION_DEFINITION);let l=e.isNull(o)?null:o.getStructureByKey(e.SfxConstants.DIMENSION);if(e.notNull(l)){let t=l.getStringByKey(e.SfxConstants.NAME);let i=l.getStringByKey(e.SfxConstants.DEFAULT_HIERARCHY);if(e.XStringUtils.isNotNullAndNotEmpty(t)&&e.XStringUtils.isNotNullAndNotEmpty(i)){n.put(t,i)}}}}return n};e.InADocConverterSfxRepo.processAccountMembers=function(t,n,i,r){if(e.notNull(n)&&t.getStructureByKey(e.SfxConstants.FORMULAS)!==null){let o=t.getStructureByKey(e.SfxConstants.CAPABILITY);let l=e.notNull(o)&&o.getBooleanByKeyExt(e.SfxConstants.HAS_USER_DEFINED_MEASURES,false);let a=t.getStructureByKey(e.SfxConstants.FORMULAS);let s=a.getStringByKey(e.SfxConstants.CALCULATION_MEMBERS_PREFIX);if(e.isNull(s)){s=e.SfxConstants.CALCULATION_MEMBERS_PREFIX_DEFAULT}let u=a.getListByKey(e.SfxConstants.FORMULA_DATA);let p=n.putNewList("MembersRepo");let g=n.putNewList("PlaceholderIds");let m=n.getStringByKey("Name");if(e.notNull(u)){for(let t=0;t<u.size();t++){let n=u.get(t).asStructure();let o=n.getStringByKey(e.SfxConstants.MEMBER);let a=e.InADocConverterSfxRepo.getAccountMemberName(m,i,o);let c=e.XString.startsWith(o,s);if(c){g.addString(r.getSession().hasFeature(e.FeatureToggleOlap.MULTIPLE_ACCOUNT_HIERARCHIES)&&l?o:a);continue}let y=p.addNewStructure();y.putBoolean("ModelDefinedMember",true);y.putString("Name",r.getSession().hasFeature(e.FeatureToggleOlap.MULTIPLE_ACCOUNT_HIERARCHIES)&&r.getSession().hasFeature(e.FeatureToggleOlap.SFX_STORE_HIERARCHY_MEMBER_NAMES_AS_FLAT)?o:a);y.putString("Description",n.getStringByKey(e.SfxConstants.MEMBER_DESCRIPTION));y.putString("HierarchyDisplayKey",o);y.putBoolean("IsDelta",true);let d=n.getStringByKey(e.SfxConstants.ACCOUNTTYPE);y.putString("AccountType",d);y.putString("Aggregation",n.getStringByKey(e.SfxConstants.AGGREGATIONTYPE));if(n.containsKey(e.SfxConstants.SCALE)&&!n.hasNullByKey(e.SfxConstants.SCALE)){y.putInteger("NumericScale",n.getIntegerByKey(e.SfxConstants.SCALE))}if(n.containsKey(e.SfxConstants.NUMERIC_SHIFT)&&!n.hasNullByKey(e.SfxConstants.NUMERIC_SHIFT)){y.putInteger("NumericShift",n.getIntegerByKey(e.SfxConstants.NUMERIC_SHIFT))}y.putString("ExceptionAggregation",n.getStringByKey(e.SfxConstants.EXCEPTIONAGGREGATIONTYPE));let A=n.getListByKey(e.SfxConstants.AGGRDIMNAME);if(e.notNull(A)){let e=y.putNewList("ExceptionAggregationDimensions");for(let t=0;t<A.size();t++){e.addString(A.get(t).asString().getString())}}let I=n.getStringByKey(e.SfxConstants.JSONFORMULA);if(e.XStringUtils.isNotNullAndNotEmpty(I)){let t=e.JsonParserFactory.newInstance();let i=t.parse(I).asStructure();if(e.notNull(d)&&(e.XString.isEqual(d,e.AccountType.INC.getName())||e.XString.isEqual(d,e.AccountType.LEQ.getName()))){y.putBoolean("PresentationSignReversal",true)}if(i.containsKey("Operator")){y.putString("CType",e.MemberType.RESTRICTED_MEASURE.getName());y.putString("MemberType","SelectionMeasure");let t=y.putNewStructure("InAFilterExpression");t.put("Selection",i)}else{y.putString("CType",e.MemberType.FORMULA.getName());y.putString("MemberType","FormulaMeasure");y.put("Formula",i);let t=i.asStructure().getByKey("InverseFormulas");if(e.notNull(t)){y.put("InverseFormulas",t)}if(n.getBooleanByKeyExt(e.SfxConstants.CALC_BEFORE_AGGR,false)){y.putString("ExecutionStep","CalculationBeforeAggregation")}}}else{y.putString("MemberType","Measure");y.putString("CType",e.MemberType.BASIC_MEASURE.getName())}let S=n.getStringByKey(e.SfxConstants.FORMULA_TYPE);if(e.XStringUtils.isNotNullAndNotEmpty(S)){y.putString("FormulaType",S)}let f=n.getListByKey(e.SfxConstants.IGNORE_EXTERNAL_DIMENSIONS);if(e.notNull(f)){let e=y.putNewList("IgnoreExternalDimensions");for(let t=0;t<f.size();t++){e.addString(f.get(t).asString().getString())}}let C=n.getStringByKey(e.SfxConstants.UNITTYPE);y.putString("UnitType",C);if(e.XString.isEqual(C,e.UnitType.UNIT.getName())){y.putString("UnitFixed",n.getStringByKey(e.SfxConstants.UNITOFMEASURE))}e.InADocConverterSfxRepo.setVisibility(y,e.XString.isEqual(n.getStringByKeyExt(e.SfxConstants.VISIBLE,e.SfxConstants.NO),e.SfxConstants.NO));e.InADocConverterSfxRepo.setMinimumDrillState(n,y,r)}}}};e.InADocConverterSfxRepo.processCurrencyTranslationSettings=function(t,n,i,r){if(e.notNull(i)&&i.getBooleanByKeyExt(e.SfxConstants.CT_ENABLED,false)){let o=n.putNewStructure("ModellerCurrencyTranslation");o.putBoolean("PlanningParametersForCurrencyTranslation",i.getBooleanByKeyExt(e.SfxConstants.QUERY_BASED_CURRENCY_TRANSLATION,false));o.putInteger("MaxNumberOfCurrencyTranslations",t.getIntegerByKeyExt(e.SfxConstants.NUM_OF_CONVERSIONS,-1));o.putBoolean("RateTypeFromAccount",r&&e.XString.isEqual(e.SfxConstants.LEADING_STRUCTURE_ACCOUNT,t.getStringByKeyExt(e.SfxConstants.LEADING_STRUCTURE,e.SfxConstants.LEADING_STRUCTURE_MEASURES)));o.putStringNotNullAndNotEmpty("CurrencyTranslationTimeDimension",t.getStringByKey(e.SfxConstants.CURRENCY_CONVERSION_TIME_DIMENSION));o.putStringNotNullAndNotEmpty("DefaultCurrency",t.getStringByKey(e.SfxConstants.DEFAULT_CURRENCY));o.putStringNotNullAndNotEmpty("CurrencyRateTableId",t.getStringByKey(e.SfxConstants.CURRENCY_RATE_TABLE_ID));let l=t.getListByKey(e.SfxConstants.CATEGORIES);let a;let s;let u;let p;if(e.XCollectionUtils.hasElements(l)){let t=o.putNewList("Categories");s=l.size();for(a=0;a<s;a++){u=t.addNewStructure();p=l.getStructureAt(a).getStringByKey(e.SfxConstants.CATEGORY);u.putString("Name",p)}}let g=t.getStructureByKey(e.SfxConstants.CURRENCY_DETAILS);if(e.XCollectionUtils.hasElements(g)){o.putStringNotNullAndNotEmpty("CurrencyDimension",g.getStringByKey(e.SfxConstants.CURRENCY_DIMENSION))}let m=t.getStructureByKey(e.SfxConstants.RATE_DATA);if(e.XCollectionUtils.hasElements(m)){let t=m.getListByKey(e.SfxConstants.CURRENCIES);let n=o.putNewList("Currencies");if(e.XCollectionUtils.hasElements(t)){s=t.size();for(a=0;a<s;a++){u=n.addNewStructure();p=t.getStringAt(a);u.putString("Name",p);u.putString("Text",p)}}let i=m.getListByKey(e.SfxConstants.RATE_VERSIONS);let r=o.putNewList("RateVersions");if(e.XCollectionUtils.hasElements(i)){s=i.size();for(a=0;a<s;a++){u=r.addNewStructure();p=i.getStringAt(a);u.putString("Name",p);u.putString("Text",p)}}let l=m.getListByKey(e.SfxConstants.RATE_TYPES);let g=o.putNewList("RateTypes");if(e.XCollectionUtils.hasElements(l)){s=l.size();for(a=0;a<s;a++){u=g.addNewStructure();p=l.getStringAt(a);u.putString("Name",p)}}}}};e.InADocConverterSfxRepo.processCustomVariableSettings=function(t,n){let i;let r;let o=t.getListByKey(e.SfxConstants.VARIABLES);if(e.notNull(o)){let l=e.PrFactory.createList();let a=t.getStructureByKey(e.SfxConstants.RATE_DATA);if(e.XCollectionUtils.hasElements(a)){let t=a.getListByKey(e.SfxConstants.CURRENCIES);if(e.XCollectionUtils.hasElements(t)){r=t.size();for(i=0;i<r;i++){let e=l.addNewStructure();let n=t.getStringAt(i);e.putString("Name",n);e.putString("Text",n)}}}let s=n.putNewStructure("ModellerVariables").putNewList("Variables");r=o.size();for(i=0;i<r;i++){let t=o.getStructureAt(i);let n=t.getStringByKey(e.SfxConstants.VARIABLE_TYPE);let r=t.getStringByKey(e.SfxConstants.VARIABLE_PROCESSING_TYPE);if(e.XString.isEqual(n,e.SfxConstants.VARIABLE_TYPE_LOCAL)&&e.XString.isEqual(r,e.SfxConstants.VARIABLE_PROCESSING_TYPE_CURRENCY)){let n=s.addNewStructure();n.putStringNotNullAndNotEmpty("Name",t.getStringByKey(e.SfxConstants.VARIABLE));n.putStringNotNullAndNotEmpty("Text",t.getStringByKey(e.SfxConstants.DESCRIPTION));n.putBoolean("CustomVariable",true);let i=e.XString.isEqual(t.getStringByKey(e.SfxConstants.VARIABLE_MANDATORY),"true")||t.getBooleanByKeyExt(e.SfxConstants.VARIABLE_MANDATORY,false);n.putString("InputType",i?"Mandatory":"Optional");n.putString("CType","OptionListVariable");n.putString("ProcessingType",r);let o=t.getStringByKey(e.SfxConstants.DEFAULT_VALUE);if(e.XStringUtils.isNotNullAndNotEmpty(o)){n.putNewList("OptionValues").addString(o)}n.put("Options",e.PrFactory.createListDeepCopy(l))}}if(!e.XCollectionUtils.hasElements(s)){n.remove("ModellerVariables")}}};e.InADocConverterSfxRepo.processDataAccessRestrictions=function(t,n){n.putBoolean("DataExportRestricted",t.getBooleanByKey(e.SfxConstants.DATA_EXPORT_RESTRICTED))};e.InADocConverterSfxRepo.processEpmObjectProperties=function(t,n,i){n.putString("ModelId",t.getStringByKey(e.SfxConstants.ID));n.putString("Mode",t.getStringByKey(e.SfxConstants.MODE));n.putString("EpmQuerySourceName",t.getStringByKey(e.SfxConstants.EPM_QUERY_SOURCE_NAME));n.putString("EpmModelName",t.getStringByKey(e.SfxConstants.EPM_MODEL_NAME));n.putString("SchemaName",t.getStringByKey(e.SfxConstants.SCHEMA_NAME));n.putString("PackageName",t.getStringByKey(e.SfxConstants.PACKAGE_NAME));n.putString("Name",t.getStringByKey(e.SfxConstants.NAME));n.putString("ShortDescription",t.getStringByKey(e.SfxConstants.SHORT_DESCRIPTION));n.putString("DisplayName",t.getStringByKey(e.SfxConstants.DISPLAY_NAME));n.putString("Description",t.getStringByKey(e.SfxConstants.DESCRIPTION));n.putBoolean("IsEmbedded",i);n.putBoolean("IsRemote",t.getBooleanByKey(e.SfxConstants.IS_REMOTE))};e.InADocConverterSfxRepo.processExtendedDimensions=function(t,n){let i=t.getListByKey(e.SfxConstants.EXTENDED_DIMENSIONS);if(e.notNull(i)&&!i.isEmpty()){let t=n.getStructureByKey("ModellerDimensions");let r=t.putNewList("ExtendedDimensions");for(let t=0;t<i.size();t++){let n=i.getStructureAt(t);let o=n.getStructureByKey(e.SfxConstants.EXTENSION_DEFINITION);if(e.notNull(o)){let t=o.getStringByKey(e.SfxConstants.LOCATION_TYPE);if(e.notNull(t)){let n=o.getStructureByKey(e.SfxConstants.DIMENSION);if(e.notNull(n)){let i=n.getStringByKey(e.SfxConstants.NAME);if(e.isNull(i)){i=n.getStructureByKey(e.SfxConstants.DATA_SOURCE_1).getStringByKey(e.SfxConstants.OBJECT_NAME_1)}if(e.notNull(i)){let e=r.addNewStructure();e.putString("Name",i);e.putString("LocationType",t)}}}}}}};e.InADocConverterSfxRepo.processHasUserDefinedMeasuresProperty=function(t,n){let i=t.getStructureByKey(e.SfxConstants.CAPABILITY);let r=e.notNull(i)&&i.getBooleanByKeyExt(e.SfxConstants.HAS_USER_DEFINED_MEASURES,false);n.putBoolean("HasUserDefinedMeasures",r)};e.InADocConverterSfxRepo.processIsPlanningProperty=function(t,n){let i=t.getStructureByKey(e.SfxConstants.DATA_SOURCE);let r=e.notNull(i)&&e.XString.isEqual(i.getStringByKey(e.SfxConstants.DATA_SOURCE_TYPE),e.SfxConstants.DATA_SOURCE_TYPE_PLANNING);n.putBoolean("IsPlanning",r)};e.InADocConverterSfxRepo.processLeadingStructure=function(t,n){let i=t.getStringByKeyExt(e.SfxConstants.LEADING_STRUCTURE,e.SfxConstants.LEADING_STRUCTURE_MEASURES);if(e.XString.isEqual(i,e.SfxConstants.LEADING_STRUCTURE_ACCOUNT)){n.putString("LeadingStructure","AccountStructure")}else if(e.XString.isEqual(i,e.SfxConstants.LEADING_STRUCTURE_MEASURES)){n.putString("LeadingStructure","MeasureStructure")}else if(e.XString.isEqual(i,e.SfxConstants.LEADING_STRUCTURE_NON_MEASURES)){n.putString("LeadingStructure","SecondaryStructure")}};e.InADocConverterSfxRepo.processMeasures=function(t,n,i,r,o){let l=e.notNull(i);let a=e.XString.isEqual(t.getStringByKey(e.SfxConstants.TYPE),e.SfxConstants.ANALYTIC);let s=e.XString.isEqual(t.getStringByKey(e.SfxConstants.MODE),e.SfxConstants.INTEGRATED);let u=t.getStructureByKey(e.SfxConstants.CAPABILITY);let p=e.notNull(u)&&u.getBooleanByKeyExt(e.SfxConstants.HAS_USER_DEFINED_MEASURES,false);let g=e.notNull(u)&&u.getBooleanByKeyExt(e.SfxConstants.QUERY_BASED_CURRENCY_TRANSLATION,false);let m=e.notNull(u)&&u.getBooleanByKeyExt(e.SfxConstants.HAS_DATASET_SOURCE,false);let c=r.getSession().hasFeature(e.FeatureToggleOlap.SFX_MINIMUM_DRILL_STATE);if(l&&!p||!c&&!g&&(!a||!s)||c&&m&&!o){return}let y=n.getStructureByKey("ModellerDimensions");let d=y.getListByKey("Dimensions");let A=d.addNewStructure();A.putBoolean("MeasureStructure",true);A.putString("CType",e.DimensionType.MEASURE_STRUCTURE.getName());A.putBoolean("IsDelta",true);let I=A.putNewList("MembersRepo");let S=null;let f=n.getStructureByKey("ModellerVariables");let C=e.isNull(f)?null:e.XStream.of(f.getListByKey("Variables")).collect(e.XStreamCollector.toSetOfString(e=>e.asStructure().getStringByKey("Name")));if(e.XCollectionUtils.hasElements(C)){let t=n.getStructureByKey("ModellerCurrencyTranslation");if(e.XCollectionUtils.hasElements(t)){S=t.putNewList("CurrencyTranslations")}}let N=t.getListByKey(e.SfxConstants.MEASURES);if(e.notNull(N)){for(let t=0;t<N.size();t++){let n=N.getStructureAt(t);let i=n.getStringByKey(e.SfxConstants.MEASURE);let o=I.addNewStructure();o.putBoolean("ModelDefinedMember",true);o.putString("Name",i);o.putBoolean("IsDelta",true);if(n.containsKey(e.SfxConstants.NUMERIC_SCALE)&&!n.hasNullByKey(e.SfxConstants.NUMERIC_SCALE)){o.putInteger("NumericScale",n.getIntegerByKey(e.SfxConstants.NUMERIC_SCALE))}if(n.containsKey(e.SfxConstants.NUMERIC_SHIFT)&&!n.hasNullByKey(e.SfxConstants.NUMERIC_SHIFT)){o.putInteger("NumericShift",n.getIntegerByKey(e.SfxConstants.NUMERIC_SHIFT))}if(n.containsKey(e.SfxConstants.NUMERIC_PRECISION)&&!n.hasNullByKey(e.SfxConstants.NUMERIC_PRECISION)){o.putInteger("NumericPrecision",n.getIntegerByKey(e.SfxConstants.NUMERIC_PRECISION))}if(n.containsKey(e.SfxConstants.SOLVE_ORDER)&&!n.hasNullByKey(e.SfxConstants.SOLVE_ORDER)){o.putInteger("SolveOrder",n.getIntegerByKeyExt(e.SfxConstants.SOLVE_ORDER,0))}let l=n.getIntegerByKeyExt(e.SfxConstants.SCALE,-1);if(l>-1){o.putInteger("DataTypeScale",l)}let a=n.getIntegerByKeyExt(e.SfxConstants.LENGTH,-1);if(a>-1){o.putInteger("DataTypePrecision",a)}o.putString("UnitType",n.getStringByKey(e.SfxConstants.UNITTYPE));o.putStringNotNullAndNotEmpty("UnitFixed",n.getStringByKey(e.SfxConstants.MEASURE_UNITS));if(n.hasStringByKey(e.SfxConstants.DATA_TYPE_NAME)){switch(n.getStringByKey(e.SfxConstants.DATA_TYPE_NAME)){case e.SfxConstants.DATA_TYPE_DECIMAL:o.putString("DataTypeInternal","DecimalFloat");break;case e.SfxConstants.DATA_TYPE_INTEGER:o.putString("DataTypeInternal","Int");break}}o.putStringNotNullAndNotEmpty("UnitDimension",n.getStringByKey(e.SfxConstants.UNIT_DIMENSION));o.putStringNotNullAndNotEmpty("UnitDimensionProperty",n.getStringByKey(e.SfxConstants.UNIT_DIMENSION_PROPERTY));o.putBoolean("OverrideDescription",true);o.putString("RateType",n.getStringByKey(e.SfxConstants.RATE_TYPE));if(n.containsKey(e.SfxConstants.EXTENDED)){o.putBoolean("Extended",n.getBooleanByKey(e.SfxConstants.EXTENDED))}let s=n.getStringByKey(e.SfxConstants.AGGREGATIONTYPE);let u=n.getStringByKey(e.SfxConstants.DESCRIPTION);o.putStringNotNullAndNotEmpty("ExceptionAggregation",n.getStringByKey(e.SfxConstants.EXCEPTIONAGGREGATIONTYPE));let p=n.getListByKey(e.SfxConstants.AGGREGATION_DIMENSION_NAME);if(e.notNull(p)){let e=o.putNewList("ExceptionAggregationDimensions");for(let t=0;t<p.size();t++){e.addString(p.get(t).asString().getString())}}let g=n.getStringByKey(e.SfxConstants.FORMULA);let m=n.getStringByKey(e.SfxConstants.JSONFORMULA);if(e.XStringUtils.isNotNullAndNotEmpty(g)&&e.XStringUtils.isNotNullAndNotEmpty(m)){let t=e.JsonParserFactory.newInstance();let n=t.parse(m).asStructure();if(e.XStringUtils.isNullOrEmpty(u)){u=i}if(n.containsKey("Operator")||n.containsKey("Selection")){o.putString("CType",e.MemberType.RESTRICTED_MEASURE.getName());o.putString("MemberType","SelectionMeasure");e.InADocConverterSfxRepo.processRestrictedMeasureFormula(n);if(n.containsKey("Selection")){o.put("InAFilterExpression",n)}else{let e=o.putNewStructure("InAFilterExpression");e.put("Selection",n)}}else{o.putString("MemberType","FormulaMeasure");o.putString("CType",e.MemberType.FORMULA.getName());o.put("Formula",n)}}else{o.putString("CType",e.MemberType.BASIC_MEASURE.getName());o.putString("MemberType","Measure");let t=o.putNewStructure("MemberOperand");t.putString("AttributeName","Measures");t.putString("Comparison","=");t.putString("Value",i)}o.putString("Aggregation",s);o.putString("Description",u);if(n.containsKey(e.SfxConstants.IGNORE_EXTERNAL_DIMENSIONS)&&n.getElementTypeByKey(e.SfxConstants.IGNORE_EXTERNAL_DIMENSIONS)===e.PrElementType.LIST){let t=n.getListByKey(e.SfxConstants.IGNORE_EXTERNAL_DIMENSIONS);if(e.notNull(t)&&t.size()>0){o.putNewList("IgnoreExternalDimensions").addAll(t)}}else{let t=n.getStringByKeyExt(e.SfxConstants.REF_DIMENSIONS,"");if(e.XStringUtils.isNotNullAndNotEmpty(t)){let n=e.XStringTokenizer.splitString(t,",");let i=o.putNewList("IgnoreExternalDimensions");for(let e=0;e<n.size();e++){i.addString(n.get(e))}}}e.InADocConverterSfxRepo.setVisibility(o,n.getBooleanByKeyExt(e.SfxConstants.VISIBLE,true));e.InADocConverterSfxRepo.setMinimumDrillState(n,o,r);let c=n.getStructureByKey(e.SfxConstants.CURRENCY_TRANSLATION);if(e.notNull(S)&&e.notNull(c)&&c.hasStringByKey(e.SfxConstants.CURRENCY_VARIABLE)&&C.contains(c.getStringByKey(e.SfxConstants.CURRENCY_VARIABLE))){let t=c.getStringByKey(e.SfxConstants.CURRENCY_VARIABLE);let n=e.XStringUtils.concatenate5("CurrencyTranslation","_","CustomVariable","_",i);o.putString("CurrencyTranslationName",n);let r=c.getStringByKey(e.SfxConstants.CURRENCY_TRANSLATION_CONFIG);if(e.notNull(r)){let i=e.JsonParserFactory.createFromString(r);if(e.notNull(i)&&i.isStructure()){let e=S.addNewStructure();e.putAll(i.asStructure());e.putString("CType","CurrencyTranslationItem");e.putString("Name",n);e.putString("Description",n);e.putNewStructure("TargetCurrency").putString("Variable",t)}}}}}};e.InADocConverterSfxRepo.processMetadataProperties=function(t,n,i){let r=n.putNewStructure("ModellerMetadataProperties");e.InADocConverterSfxRepo.processEpmObjectProperties(t,r,i);e.InADocConverterSfxRepo.processDataAccessRestrictions(t,r);e.InADocConverterSfxRepo.processHasUserDefinedMeasuresProperty(t,r);e.InADocConverterSfxRepo.processIsPlanningProperty(t,r);e.InADocConverterSfxRepo.processLeadingStructure(t,r);e.InADocConverterSfxRepo.processVersionDimensionMappings(t,r)};e.InADocConverterSfxRepo.processRestrictedMeasureFormula=function(t){if(t.isStructure()){let n=t.asStructure();let i=n.getKeysAsIterator();while(i.hasNext()){let t=i.next();if(e.XString.isEqual(t,"FieldName")&&e.XString.isEqual(n.getStringByKey(t),".ID")){n.putString("FieldName","[Measures].[Measures]")}else{e.InADocConverterSfxRepo.processRestrictedMeasureFormula(n.getByKey(t))}}}else if(t.isList()){let n=t.asList();for(let t=0;t<n.size();t++){e.InADocConverterSfxRepo.processRestrictedMeasureFormula(n.get(t))}}};e.InADocConverterSfxRepo.processSecondaryStructure=function(t,n){let i=t.getStructureByKey(e.SfxConstants.DATA_SOURCE);if(e.notNull(i)&&e.XString.isEqual(i.getStringByKey(e.SfxConstants.DATA_SOURCE_TYPE),e.SfxConstants.DATA_SOURCE_TYPE_INAMODEL)){let t=n.getStructureByKey("ModellerDimensions");let i=t.getListByKey("Dimensions");let r=i.addNewStructure();r.putString("CType",e.DimensionType.SECONDARY_STRUCTURE.getName());r.putBoolean("IsDelta",true);r.putBoolean("SecondaryStructure",true);r.putNewList("MembersRepo")}};e.InADocConverterSfxRepo.processThresholds=function(t,n,i,r){let o=t.getStructureByKey(e.SfxConstants.VISUALIZATIONS);if(e.isNull(o)){return}let l=null;if(e.notNull(i)){l=i.getStringByKey("Name")}let a=t.getStructureByKey(e.SfxConstants.DATA_SOURCE);let s=a.getStringByKey(e.SfxConstants.OBJECT_NAME);let u=null;let p=o.getKeysAsIterator();while(p.hasNext()){let t=p.next();let a=o.getStructureByKey(t);let g=a.getStructureByKey(e.SfxConstants.THRESHOLDS);if(e.isNull(g)||g.isEmpty()){continue}if(e.isNull(u)){let e=n.putNewStructure("FormulaExceptionManager");e.putString("CType","FormulaExceptions");u=e.putNewList("FormulaExceptionsModeler")}let m=e.InADocConverterSfxRepo.getAccountMemberName(l,r,t);let c=u.addNewStructure();c.putString("CType","FormulaException");let y=e.XStringUtils.concatenate5(e.QFormulaExceptionConstants.MODEL_THRESHOLD_PREFIX.getName(),"_[",s,"]_",t);c.putString("Name",y);c.putString("Type",e.FormulaExceptionType.BASE_MEASURE_ONLY.getName());c.putNewList("EvaluateOn");let d=c.putNewList("StructureContext");d.addNewStructure();let A=d.addNewStructure();d.addNewStructure();A.putString("MemberName",m);if(e.notNull(l)){A.putString("DimensionName",l)}else{A.putBoolean("MeasureStructure",true)}let I=g.getListByKey(e.SfxConstants.INTERVALS);if(e.isNull(I)){continue}let S=c.putNewList("Threshold");let f=e.InADocConverterSfxRepo.isNormalizeIntervals(n,i,t);for(let t=0;t<I.size();t++){let n=I.getStructureAt(t);let i=n.getStringByKey(e.SfxConstants.NAME);let r=n.getStringByKey(e.SfxConstants.LOW);let o=e.XDouble.convertFromStringWithDefault(r,0);let l=n.getBooleanByKey(e.SfxConstants.LOW_INCLUSIVE);let a=n.getStringByKey(e.SfxConstants.HIGH);let s=e.XDouble.convertFromStringWithDefault(a,0);let u=n.getBooleanByKey(e.SfxConstants.HIGH_INCLUSIVE);let p=n.getStringByKey(e.SfxConstants.COLOR);if(f){o=o/100;s=s/100}let g=S.addNewStructure();g.putString("Name",e.XStringUtils.concatenate3(y,":",e.XInteger.convertToString(t)));g.putString("Text",i);g.putInteger("AlertLevel",e.AlertLevel.GOOD_1.getLevel());g.putString("Color",p);if(!e.XStringUtils.isNullOrEmpty(r)&&e.XStringUtils.isNullOrEmpty(a)){g.putDouble("Low",o);if(l){g.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.GREATER_EQUAL))}else{g.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.GREATER_THAN))}}else if(e.XStringUtils.isNullOrEmpty(r)&&!e.XStringUtils.isNullOrEmpty(a)){g.putDouble("Low",s);if(u){g.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.LESS_EQUAL))}else{g.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.LESS_THAN))}}else if(!e.XStringUtils.isNullOrEmpty(r)&&!e.XStringUtils.isNullOrEmpty(a)){if(l&&u){g.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.BETWEEN));g.putDouble("Low",o);g.putDouble("High",s)}else if(!l&&!u){g.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.BETWEEN_EXCLUDING));g.putDouble("Low",o);g.putDouble("High",s)}else{g.remove("Name");g.putString("Name",e.XStringUtils.concatenate4(y,":",e.XInteger.convertToString(t),"A"));g.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.EQUAL));if(l){g.putDouble("Low",o)}else{g.putDouble("Low",s)}g=S.addNewStructure();g.putString("Name",e.XStringUtils.concatenate4(y,":",e.XInteger.convertToString(t),"B"));g.putString("Text",i);g.putInteger("AlertLevel",e.AlertLevel.GOOD_1.getLevel());g.putString("Color",p);g.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.BETWEEN_EXCLUDING));g.putDouble("Low",o);g.putDouble("High",s)}}}}};e.InADocConverterSfxRepo.processVersionDimensionMappings=function(t,n){let i=t.getListByKey(e.SfxConstants.DIMENSION_MAPPING);if(e.notNull(i)&&!i.isEmpty()){for(let t=0;t<i.size();t++){let r=i.getStructureAt(t);let o=r.getStringByKey(e.SfxConstants.DIM_TYPE);if(e.XString.isEqual(o,e.SfxConstants.DIM_TYPE_VERSION)){let t=r.getListByKey(e.SfxConstants.PROPERTIES);if(e.notNull(t)&&!t.isEmpty()){for(let i=0;i<t.size();i++){let r=t.getStructureAt(i);let o=r.getListByKey(e.SfxConstants.MAPPING_DETAILS);let l=r.getBooleanByKeyExt(e.SfxConstants.VALUE_MAPPING_NEEDED,false);if(l&&e.notNull(o)&&!o.isEmpty()){n.putString("MappedVersionDimension",r.getStringByKey(e.SfxConstants.SOURCE_COLUMN_NAME))}}}}}}};e.InADocConverterSfxRepo.setMinimumDrillState=function(t,n,i){if(i.getSession().hasFeature(e.FeatureToggleOlap.SFX_MINIMUM_DRILL_STATE)){let i=t.getElementTypeByKey(e.SfxConstants.MINIMUM_DRILL_STATE);if(e.notNull(i)){let r=n.putNewList("MinimumDrillState");if(i===e.PrElementType.LIST){r.addAll(t.getListByKey(e.SfxConstants.MINIMUM_DRILL_STATE))}else if(i===e.PrElementType.STRING){r.addString(t.getStringByKey(e.SfxConstants.MINIMUM_DRILL_STATE))}}}};e.InADocConverterSfxRepo.setVisibility=function(e,t){if(t){e.putString("Visibility","Visible")}else{e.putString("Visibility","Hidden")}};e.InADocConverterSfxRepo.staticSetupInAConverter=function(){e.DocConverterFactory.registerFactory(e.QModelFormat.SFX,e.QModelFormat.INA_REPOSITORY,new e.InADocConverterSfxRepo)};e.InADocConverterSfxRepo.prototype.convert=function(t,n,i){let r=e.MessageManager.createMessageManagerExt(t.getSession());let o=e.XContent.createContent();o.setJsonObject(this.processJsonContent(t,n));o.setContentType(e.QModelFormat.INA_REPOSITORY);let l=e.ExtResult.create(o,r);return l};e.InADocConverterSfxRepo.prototype.newDocConverter=function(t,n){return new e.InADocConverterSfxRepo};e.InADocConverterSfxRepo.prototype.processJsonContent=function(t,n){let i=e.PrFactory.createStructure();let r=n.getJsonContent();if(e.isNull(r)){return i}let o=r.asStructure();let l=o.getStructureByKey(e.SfxConstants.DATA);let a;if(e.notNull(l)){a=l.getStructureByKey(e.SfxConstants.CDATA)}else{a=o.getStructureByKey(e.SfxConstants.CDATA)}if(e.isNull(a)){return i}let s=a.getStructureByKey(e.SfxConstants.DATA_SOURCE);i.put("DataSource",s);let u=i.putNewStructure("ModellerDefinition");let p=a.getBooleanByKeyExt(e.SfxConstants.IS_BLENDED_CUBE,false);if(p){return i}let g=t.getSession();let m=false;let c=o.getStructureByKey(e.SfxConstants.METADATA);if(e.notNull(c)){m=c.getBooleanByKeyExt(e.SfxConstants.IS_EMBEDDED,false)}let y=a.getListByKey(e.SfxConstants.DIMENSIONS);let d=e.XString.isEqual(a.getStringByKey(e.SfxConstants.MODE),e.SfxConstants.INTEGRATED);let A=u.putNewStructure("ModellerDimensions");let I=A.putNewList("Dimensions");let S=null;let f=null;let C=e.InADocConverterSfxRepo.obtainExtendedDimensionDefaultHierarchies(a);for(let t=0;t<y.size();t++){let n=y.getStructureAt(t);let i=d?n.getStringByKey(e.SfxConstants.COLUMN_NAME):n.getStringByKey(e.SfxConstants.DIMENSION_ID);let r=n.getStringByKey(e.SfxConstants.TYPE);let o=n.getStringByKey(e.SfxConstants.UNASSIGNED_MEMBER);let l=n.getStringByKey(e.SfxConstants.COLUMN_GROUP);let a=n.getStructureByKey(e.SfxConstants.FISCAL_CONFIG);let s=n.getStructureByKey(e.SfxConstants.TIME_CONFIG);let u=n.getBooleanByKey(e.SfxConstants.IS_USER_MANAGED);let p=n.getStringByKey(e.SfxConstants.CUSTOMIZED_DESCRIPTION);let m=n.getBooleanByKey(e.SfxConstants.IS_HIDDEN);if(e.XStringUtils.isNullOrEmpty(i)){continue}let c=n.getStringByKeyExt(e.SfxConstants.DEFAULT_HIERARCHY,C.getByKey(i));let A=e.PrStructure.create();A.putStringNotNullAndNotEmpty("DefaultHierarchy",c);C.remove(i);if(e.XString.isEqual(r,"Account")){A.putString("CType",e.DimensionType.ACCOUNT.getName());A.putString("AccountTypeAttributeName",n.getStringByKey(e.SfxConstants.ACCOUNTTYPEATTRIBUTENAME));f=n.getStringByKey(e.SfxConstants.DEFAULT_HIERARCHY);S=A}if(e.notNull(a)){A.putBoolean("FiscalEnabled",a.getBooleanByKeyExt(e.SfxConstants.ENABLED,false));let t=a.getByKey(e.SfxConstants.MONTH_SHIFT);if(e.notNull(t)&&t.isNumeric()){A.putInteger("FiscalShift",e.XLong.convertToInt(a.getLongByKey(e.SfxConstants.MONTH_SHIFT)))}else{A.putInteger("FiscalShift",e.XInteger.convertFromStringWithDefault(a.getStringByKey(e.SfxConstants.MONTH_SHIFT),0))}A.putString("FiscalDisplayPeriod",a.getStringByKey(e.SfxConstants.DISPLAY_PERIOD));A.putString("FiscalPeriodPrefix",a.getStringByKey(e.SfxConstants.PERIOD_PREFIX))}if(m){A.putInteger("Visibility",1)}if(e.notNull(s)&&s.hasElements()){let t="";let n=s.getIntegerByKey(e.SfxConstants.ADDITIONAL_PERIODS);let i=s.getStringByKey(e.SfxConstants.PERIOD_PREFIX);let r=s.getBooleanByKey(e.SfxConstants.USE_PREFIX);let o=s.getBooleanByKey(e.SfxConstants.ENABLE_PATTERN);if(r&&e.XStringUtils.isNotNullAndNotEmpty(i)){t=i}else if(!r&&n===0){t=""}else if(!r&&n>0){t="P"}A.putInteger("additionalPeriods",n);A.putBoolean("useMonthLabel",!r);A.putString("periodPrefix",t);A.putBoolean("TimeConfigEnablePattern",o);if(g.hasFeature(e.FeatureToggleOlap.FLEXIBLE_TIME_DYNAMIC_TIME)){let t=s.getStringByKey(e.SfxConstants.PATTERN);let n=s.getStringByKey(e.SfxConstants.FIRST_WEEK_DAY);let i=s.getStringByKey(e.SfxConstants.FIRST_YEAR_WEEK_INDICATOR);A.putString("Pattern",t);A.putString("FirstWeekDay",n);A.putString("FirstYearWeekIndicator",i)}}if(e.XStringUtils.isNotNullAndNotEmpty(p)){A.putString("Description",p)}if(e.XStringUtils.isNotNullAndNotEmpty(l)){A.putString("DisplayGroupName",l)}if(!A.isEmpty()){A.putString("Name",i);A.putBoolean("IsDelta",true);A.putBoolean("IsUserManaged",u);A.putStringNotNull("unassignedMember",o);if(!A.containsKey("CType")){A.putString("CType",e.OlapComponentType.ABSTRACT_DIMENSION.getName())}I.add(A)}}let N=C.getKeysAsIterator();while(N.hasNext()){let t=N.next();let n=I.addNewStructure();n.putString("Name",t);n.putBoolean("IsDelta",true);n.putBoolean("IsUserManaged",d);n.putString("CType",e.OlapComponentType.ABSTRACT_DIMENSION.getName());n.putString("DefaultHierarchy",C.getByKey(t))}let E=a.getStructureByKey(e.SfxConstants.CAPABILITY);e.InADocConverterSfxRepo.processCurrencyTranslationSettings(a,u,E,e.notNull(S));e.InADocConverterSfxRepo.processCustomVariableSettings(a,u);let M=o.getBooleanByKeyExt(e.SfxConstants.SKIP_MEMBER_AND_THRESHOLD_PROCESSING,false);if(!M){e.InADocConverterSfxRepo.processAccountMembers(a,S,f,t);e.InADocConverterSfxRepo.processMeasures(a,u,S,t,m);e.InADocConverterSfxRepo.processSecondaryStructure(a,u);e.InADocConverterSfxRepo.processThresholds(a,u,S,f)}e.InADocConverterSfxRepo.processMetadataProperties(a,u,m);e.InADocConverterSfxRepo.processExtendedDimensions(a,u);return i};e.InADocConverterUqmRepo=function(){};e.InADocConverterUqmRepo.prototype=new e.DocConverterFactory;e.InADocConverterUqmRepo.prototype._ff_c="InADocConverterUqmRepo";e.InADocConverterUqmRepo.staticSetupInAConverter=function(){e.DocConverterFactory.registerFactory(e.QModelFormat.UQM,e.QModelFormat.INA_REPOSITORY,new e.InADocConverterUqmRepo)};e.InADocConverterUqmRepo.prototype.convert=function(t,n,i){let r=n.getJsonContent();let o=r.asStructure();let l=e.MessageManager.createMessageManagerExt(t.getSession());let a=o.getStringByKey("DataSourceName");let s=e.PrFactory.createStructure();if(e.notNull(a)){let n=e.QFactory.createDataSourceWithFqn(a);let i=e.QInAExportFactory.createForData(t,null);let r=i.exportDataSource(n,false);s.put("DataSource",r)}let u=e.XContent.createContent();u.setJsonObject(s);u.setContentType(e.QModelFormat.INA_REPOSITORY);let p=e.ExtResult.create(u,l);return p};e.InADocConverterUqmRepo.prototype.newDocConverter=function(t,n){return new e.InADocConverterUqmRepo};e.InAFusion=function(){};e.InAFusion.prototype=new e.QDocFusionFactory;e.InAFusion.prototype._ff_c="InAFusion";e.InAFusion.staticSetup=function(){e.QDocFusionFactory.registerFactory(new e.InAFusion)};e.InAFusion.prototype.m_application=null;e.InAFusion.prototype.newDocFusion=function(t){let n=new e.InAFusion;n.setupApplicationContext(t);return n};e.InAFusion.prototype.processFusion=function(t,n,i,r){let o=e.InAFusionResult.create(this.m_application,r);return e.InAFusionMainAction.createAndRun(t,n,i,o)};e.InAFusion.prototype.setupApplicationContext=function(e){this.m_application=e};e.InAQMgrStartupBlending=function(){};e.InAQMgrStartupBlending.prototype=new e.XObject;e.InAQMgrStartupBlending.prototype._ff_c="InAQMgrStartupBlending";e.InAQMgrStartupBlending.create=function(t){let n=new e.InAQMgrStartupBlending;n.m_syncAction=t;n.m_executedResultSetContainers=e.XList.create();n.m_metadataSerializationFunctions=e.XList.create();n.m_pendingFAMQueryIdentifiers=e.XList.create();return n};e.InAQMgrStartupBlending.prototype.m_blendingMgrFunctionSupplier=null;e.InAQMgrStartupBlending.prototype.m_blendingMgrSyncType=null;e.InAQMgrStartupBlending.prototype.m_executedResultSetContainers=null;e.InAQMgrStartupBlending.prototype.m_implicitBatchStarted=false;e.InAQMgrStartupBlending.prototype.m_metadataSerializationFunctions=null;e.InAQMgrStartupBlending.prototype.m_pendingFAMQueryIdentifiers=null;e.InAQMgrStartupBlending.prototype.m_syncAction=null;e.InAQMgrStartupBlending.prototype.allQueriesExecuted=function(){for(let e=0;e<this.m_executedResultSetContainers.size();e++){if(this.m_executedResultSetContainers.get(e).getResultSetSyncState().isNotInSync()){return false}}for(let e=0;e<this.m_metadataSerializationFunctions.size();e++){if(this.m_metadataSerializationFunctions.get(e).getSyncState().isNotInSync()){return false}}if(!this.m_pendingFAMQueryIdentifiers.isEmpty()){return false}return true};e.InAQMgrStartupBlending.prototype.createHanaMetadataSerializationFunction=function(t){let n=e.PrFactory.createStructure();let i=t.setInnerStructure(n,"Metadata",null,null);i.getStructureByKey("DataSource").remove("ValidationHash");let r=t.getResultSetPersistenceSchema();let o=t.getResultSetPersistenceTable();let l=i.putNewStructure("ResultSetFeatureRequest");l.putString("ResultFormat","SerializedData");if(e.XStringUtils.isNotNullAndNotEmpty(r)&&e.XStringUtils.isNotNullAndNotEmpty(o)){l.putString("ResultSetPersistanceSchema",r);l.putString("ResultSetPersistanceTable",o);l.putString("ResultSetPersistanceIdentifier",t.getResultSetPersistenceIdentifier())}let a=t.createFunction();a.getRpcRequest().setRequestStructure(n);return a};e.InAQMgrStartupBlending.prototype.executeBlendingQueryManagerCreation=function(){let t=this.getBlendingDefinition();let n=this.getBlendingPreQueries(t.getSources());if(n.hasElements()){this.startImplicitBatchMode();this.executePreQueries(n,t.getBlendingHost());this.m_blendingMgrFunctionSupplier.createBlendingFunction().processFunctionExecution(e.SyncType.NON_BLOCKING,this.m_syncAction,e.QueryManagerMode.BLENDING);this.stopImplicitBatchMode(this.m_implicitBatchStarted,this.m_blendingMgrSyncType)}else{this.m_blendingMgrFunctionSupplier.createBlendingFunction().processFunctionExecution(this.m_blendingMgrSyncType,this.m_syncAction,e.QueryManagerMode.BLENDING)}let i=this.m_syncAction.getQueryManager().getServiceConfig();let r=i.getBlendingDefinition().getSources();for(let e=0;e<r.size();e++){r.get(e).getQueryModel().destroyTransientObjects()}};e.InAQMgrStartupBlending.prototype.executePreQueries=function(e,t){for(let n=0;n<e.size();n++){let i=e.get(n);let r=i.getObject().getQueryManager();r.getPreQueryExecutor().processExecutionAsPreQueryInBatch(t.getSystemName(),i.getName(),null)}};e.InAQMgrStartupBlending.prototype.executeRemoteBlendingSubQueries=function(t,n,i){for(let r=0;r<n.size();r++){let o=n.get(r);let l=o.getQueryModel();l.setShouldUseActualTextField(true);let a=l.getQueryManager();o.setIsRemoteSource(!e.XString.isEqual(i.getSystemName(),this.getSystemName(o)));if(!l.getModelCapabilities().supportsRemoteBlending()||!i.supportsRemoteBlending()){e.noSupport()}if(o.isRemoteSource()){o.updatePersistenceIdentifier(i);let n=a.getOlapEnv();let r=!i.getSystemDescription().isSystemMappingValid(a.getSystemDescription())?n.getCachedRemoteBlendingData(a.getResultSetPersistenceIdentifier()):null;if(e.isNull(r)||e.XStringUtils.isNullOrEmpty(r.getView())){if(o.isDelayCubeRequest()&&a.getSystemType().isTypeOf(e.SystemType.HANA)){a.setResultSetPersistenceTargetType(e.BlendingPersistenceType.VIEW);let n=this.createHanaMetadataSerializationFunction(a);this.m_metadataSerializationFunctions.add(n);n.processFunctionExecution(t,this,o)}else{this.m_executedResultSetContainers.add(a.getActiveResultSetContainer());a.processQueryExecutionAsBlendingSource(t,o.isDelayCubeRequest()?e.BlendingPersistenceType.VIEW:e.BlendingPersistenceType.ALL_DATA,this,o)}}else{a.getActiveResultSetContainer().setSerializedData(r.getView(),r.getCube());a.getActiveResultSetContainer().endSync()}}else{l.generateTransientObjects();if(l.getModelCapabilities().supportsCubeCache()){o.updatePersistenceIdentifier(null);l.addOptimizerHint(e.ExecutionEngine.MDS,e.OptimizerHint.CUBE_CACHE_WITH_ID.getName(),"true");this.m_executedResultSetContainers.add(a.getActiveResultSetContainer());a.processQueryExecutionAsBlendingSource(t,e.BlendingPersistenceType.ALL_DATA,this,o)}}l.setShouldUseActualTextField(false)}return this.m_syncAction.isValid()};e.InAQMgrStartupBlending.prototype.executeRemoteQueries=function(t){let n=this.m_syncAction.getQueryManager();let i=n.getServiceConfig();let r=i.getBlendingDefinition();let o=r.getSources();let l=r.getBlendingHost();i.setSystemName(l.getSystemName());this.m_implicitBatchStarted=false;if(r.isRemoteBlending()){if(!this.executeRemoteBlendingSubQueries(t,o,l)){return}}else{e.XCollectionUtils.forEach(o,e=>{e.getQueryModel().generateTransientObjects()})}let a=this.getBlendingPreQueries(o);if(a.hasElements()){let t=n.getPreQueryExecutor();t.serializeRemotePreQueries(e.SyncType.BLOCKING,l.getSystemName(),a,null);this.m_syncAction.addAllMessages(t)}};e.InAQMgrStartupBlending.prototype.getBlendingDefinition=function(){let e=this.m_syncAction.getQueryManager();let t=e.getServiceConfig();return t.getBlendingDefinition()};e.InAQMgrStartupBlending.prototype.getBlendingPreQueries=function(t){let n=e.XList.create();for(let i=0;i<t.size();i++){let r=t.get(i);let o=r.getQueryModel();if(!r.isRemoteSource()||r.isDelayCubeRequest()){if(o.getPreQueries()!==null){for(let t=0;t<o.getPreQueries().size();t++){let i=o.getLoadedDimensions();let r=o.getPreQueries().get(t);if(!e.XStream.of(i).anyMatch(t=>(t.getDimensionType()===e.DimensionType.FILTER_ACROSS_MODELS_CALCULATED_DIMENSION||t.getDimensionType()===e.DimensionType.MEASURE_BASED_FILTER_CALCULATED_DIMENSION)&&(e.XString.isEqual(t.getPreQueryName(),r.getObjectId())||e.XString.isEqual(t.getPreQueryName(),r.getName())))){n.add(o.getPreQueries().get(t))}}}}if(o.isBlendingModel()){n.addAll(this.getBlendingPreQueries(o.getBlendingSources()))}}return n};e.InAQMgrStartupBlending.prototype.getSystemName=function(e){let t=e.getQueryModel().getQueryManager();return t.getSystemName()};e.InAQMgrStartupBlending.prototype.onFunctionExecuted=function(t,n,i){let r=i;let o=r.getQueryModel().getQueryManager();let l=null;let a=null;let s=n.getRootElement().getStructureByKey("SerializedData");if(t.isValid()&&e.notNull(s)){l=s.getStringByKey("View");a=s.getStringByKey("Cube");o.getOlapEnv().cacheRemoteBlendingData(o,l,a)}o.getActiveResultSetContainer().setSerializedData(l,a);this.onRemoteQueryExecuted(t,r);this.processBlendingQueryCreationIfQueriesFinished()};e.InAQMgrStartupBlending.prototype.onQueryExecuted=function(t,n,i){if(!this.m_pendingFAMQueryIdentifiers.isEmpty()&&e.XCollectionUtils.contains(this.m_pendingFAMQueryIdentifiers,e=>e===i)){this.m_pendingFAMQueryIdentifiers.removeElement(i);if(this.m_pendingFAMQueryIdentifiers.isEmpty()){this.executeRemoteQueries(this.m_blendingMgrSyncType)}}else{this.onRemoteQueryExecuted(t,i)}if(this.m_pendingFAMQueryIdentifiers.isEmpty()){this.processBlendingQueryCreationIfQueriesFinished()}};e.InAQMgrStartupBlending.prototype.onRemoteQueryExecuted=function(e,t){let n=t.getQueryModel();n.addQueryModelIdToMessages(e.getMessages());this.m_syncAction.addAllMessages(e);if(n.getModelCapabilities().supportsAutoVariableSubmit()&&n.isMetadataUpdatedByAutoSubmit()){let e=n.getQueryManager();let i=e.getResultSetPersistenceIdentifier();t.updatePersistenceIdentifierOnTarget(this.getBlendingDefinition().getBlendingHost(),e.getActiveResultSetContainer());n.getOlapEnv().updateRemoteBlendingCacheId(e,i)}};e.InAQMgrStartupBlending.prototype.prepare=function(t){let n=this.getBlendingDefinition();let i=n.getSources();if(i.isEmpty()){this.m_syncAction.addError(e.ErrorCodes.INVALID_STATE,"No blending sources set");return}let r=n.getBlendingHost();if(e.isNull(r)){this.m_syncAction.addError(e.ErrorCodes.INVALID_STATE,"Could not find a suitable blending host");return}if(this.m_syncAction.getSession().hasFeature(e.FeatureToggleOlap.LOV_BASED_FILTER_ACROSS_MODELS)){for(let t=0;t<i.size();t++){let n=i.get(t).getQueryModel();let r=e.QFilterUtil.collectFilterAcrossModels(n);e.XCollectionUtils.forEach(r,t=>{let n=e.XStringValue.create(t.getUniqueId());this.m_pendingFAMQueryIdentifiers.add(n)})}for(let n=0;n<i.size();n++){let r=i.get(n).getQueryModel();let o=e.QFilterUtil.collectFilterAcrossModels(r);e.XCollectionUtils.forEach(o,n=>{let i=e.XCollectionUtils.findFirst(this.m_pendingFAMQueryIdentifiers,t=>e.XString.isEqual(n.getUniqueId(),t.getString()));if(t===e.SyncType.BLOCKING){this.m_pendingFAMQueryIdentifiers.removeElement(i)}let o=r;let l=n.getTargetDatasetId();if(!e.XStringUtils.isNullOrEmpty(l)&&!e.XString.isEqual(l,r.getDatasetId())){o=r.getQueryManager().getOlapEnv().getSharedQueryManager(l).getQueryModel()}let a=n.processLovQueriesExecutionExt(o,t,t===e.SyncType.BLOCKING?null:this,i);if(e.isNull(a)){this.m_pendingFAMQueryIdentifiers.removeElement(i)}})}}if(this.m_pendingFAMQueryIdentifiers.isEmpty()){this.executeRemoteQueries(t)}};e.InAQMgrStartupBlending.prototype.process=function(t,n){this.m_blendingMgrFunctionSupplier=t;this.m_blendingMgrSyncType=n;if(this.allQueriesExecuted()){if(this.m_syncAction.isValid()){this.executeBlendingQueryManagerCreation()}e.XObjectExt.release(this)}};e.InAQMgrStartupBlending.prototype.processBlendingQueryCreationIfQueriesFinished=function(){if(e.notNull(this.m_blendingMgrFunctionSupplier)&&this.allQueriesExecuted()){if(this.m_syncAction.isValid()){this.executeBlendingQueryManagerCreation()}else{this.m_syncAction.callListeners(true)}e.XObjectExt.release(this)}};e.InAQMgrStartupBlending.prototype.releaseObject=function(){this.m_syncAction=null;this.m_executedResultSetContainers=e.XObjectExt.release(this.m_executedResultSetContainers);this.m_metadataSerializationFunctions=e.XObjectExt.release(this.m_metadataSerializationFunctions);this.m_blendingMgrFunctionSupplier=null;this.m_blendingMgrSyncType=null;this.m_pendingFAMQueryIdentifiers=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_pendingFAMQueryIdentifiers)};e.InAQMgrStartupBlending.prototype.startImplicitBatchMode=function(){let e=this.m_syncAction.getApplication().getConnectionPool();let t=this.m_syncAction.getQueryManager().getSystemName();if(e.isBatchModeEnabled(t)){this.m_implicitBatchStarted=false}else{e.enableBatchMode(t);this.m_implicitBatchStarted=true}};e.InAQMgrStartupBlending.prototype.stopImplicitBatchMode=function(e,t){if(e&&this.m_syncAction.getQueryManagerBase().getPreQueryName()===null){let e=this.m_syncAction.getApplication().getConnectionPool();let n=this.m_syncAction.getQueryManager().getSystemName();e.disableBatchMode(t,n)}};e.XCmdCreateQueryManager=function(){};e.XCmdCreateQueryManager.prototype=new e.XCommand;e.XCmdCreateQueryManager.prototype._ff_c="XCmdCreateQueryManager";e.XCmdCreateQueryManager.CLAZZ=null;e.XCmdCreateQueryManager.staticSetup=function(){e.XCmdCreateQueryManager.CLAZZ=e.XClass.create(e.XCmdCreateQueryManager)};e.XCmdCreateQueryManager.prototype.getCommandResultClass=function(){return e.XCmdCreateQueryManagerResult.CLAZZ};e.XCmdCreateQueryManagerResult=function(){};e.XCmdCreateQueryManagerResult.prototype=new e.XCommandResult;e.XCmdCreateQueryManagerResult.prototype._ff_c="XCmdCreateQueryManagerResult";e.XCmdCreateQueryManagerResult.CLAZZ=null;e.XCmdCreateQueryManagerResult.staticSetup=function(){e.XCmdCreateQueryManagerResult.CLAZZ=e.XClass.create(e.XCmdCreateQueryManagerResult)};e.XCmdCreateQueryManagerResult.prototype.createDataSource=function(t,n,i){let r=e.QFactory.createDataSource();r.setFullQualifiedName(t);if(e.notNull(n)){let t=n.getStructureByKey("DataSource");if(e.notNull(t)){let n=e.QInAImportFactory.createForMetadata(i.getApplication(),null);n.importDataSourceExternalDimensions(t,r);let o=this.getParameter(e.CmdCreateQueryManager.PARAM_I_EXT_DIMS_INFO);e.XCommandUtil.updateExtendedDimensionProperties(r.getExtendedDimensionsBase(),o)}}return r};e.XCmdCreateQueryManagerResult.prototype.onQueryManagerCreated=function(t,n,i){this.getMessageManager().addAllMessages(t);if(t.isValid()){this.addResultParameter(e.CmdCreateQueryManager.PARAM_E_QUERY_MANAGER,n)}this.onProcessFinished()};e.XCmdCreateQueryManagerResult.prototype.process=function(){let t=this.getParameter(e.CmdCreateQueryManager.PARAM_I_APPLICATION);let n=this.getParameterString(e.CmdCreateQueryManager.PARAM_I_SYSTEM);let i=this.getParameterString(e.CmdCreateQueryManager.PARAM_I_DATA_SOURCE);let r=this.getParameter(e.CmdCreateQueryManager.PARAM_I_QUERY_MODEL_STRUCTURE_INA_REPOSITORY);let o=e.QueryServiceConfig.create(t);o.setSystemName(n);o.setDataSource(this.createDataSource(i,r,o));let l=this.getParameter(e.CmdCreateQueryManager.PARAM_I_MODELLER_CONTENT_INA_REPOSITORY);if(e.notNull(l)){o.setModellerContent(l)}if(e.notNull(r)){o.setDefinitionByStructure(e.QModelFormat.INA_REPOSITORY,r);let t=r.getStringByKeyExt("ExperimentalFeatures",null);let n=this.getParameter(e.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES);e.XCommandUtil.handleInactiveCapabilities(o,t,n)}o.processQueryManagerCreation(this.getSyncType(),this,null)};e.XCmdDeserializeBlending=function(){};e.XCmdDeserializeBlending.prototype=new e.XCommand;e.XCmdDeserializeBlending.prototype._ff_c="XCmdDeserializeBlending";e.XCmdDeserializeBlending.CLAZZ=null;e.XCmdDeserializeBlending.staticSetup=function(){e.XCmdDeserializeBlending.CLAZZ=e.XClass.create(e.XCmdDeserializeBlending)};e.XCmdDeserializeBlending.prototype.getCommandResultClass=function(){return e.XCmdDeserializeBlendingResult.CLAZZ};e.XCmdDeserializeBlendingNodes=function(){};e.XCmdDeserializeBlendingNodes.prototype=new e.XCommand;e.XCmdDeserializeBlendingNodes.prototype._ff_c="XCmdDeserializeBlendingNodes";e.XCmdDeserializeBlendingNodes.CLAZZ=null;e.XCmdDeserializeBlendingNodes.staticSetup=function(){e.XCmdDeserializeBlendingNodes.CLAZZ=e.XClass.create(e.XCmdDeserializeBlendingNodes)};e.XCmdDeserializeBlendingNodes.prototype.getCommandResultClass=function(){return e.XCmdDeserializeBlendingNodesResult.CLAZZ};e.XCmdDeserializeBlendingResultBase=function(){};e.XCmdDeserializeBlendingResultBase.prototype=new e.XCommandResult;e.XCmdDeserializeBlendingResultBase.prototype._ff_c="XCmdDeserializeBlendingResultBase";e.XCmdDeserializeBlendingResultBase.prototype.m_aliases=null;e.XCmdDeserializeBlendingResultBase.prototype.m_importedSourcesCount=0;e.XCmdDeserializeBlendingResultBase.prototype.m_queryManagers=null;e.XCmdDeserializeBlendingResultBase.prototype.m_rootElement=null;e.XCmdDeserializeBlendingResultBase.prototype.m_sourceCount=0;e.XCmdDeserializeBlendingResultBase.prototype.getDataSourceName=function(t){let n=e.QFactory.createDataSource();n.setType(e.MetaObjectType.lookup(t.getStringByKey("Type")));n.setSchemaName(t.getStringByKey("SchemaName"));n.setPackageName(t.getStringByKey("PackageName"));n.setObjectName(t.getStringByKey("ObjectName"));n.setDataArea(t.getStringByKey("DataArea"));return n.getFullQualifiedName()};e.XCmdDeserializeBlendingResultBase.prototype.getSystemName=function(t){let n=this.getParameter(e.CmdDeserializeBlending.PARAM_I_SYSTEMS);if(e.notNull(n)&&n.containsKey(t)){return n.getByKey(t)}let i=this.getParameterString(e.CmdDeserializeBlending.PARAM_I_SYSTEM);if(e.notNull(i)){return i}throw e.XException.createIllegalStateException(e.XStringUtils.concatenate3("No system found for query ",t,". Either parameter PARAM_I_SYSTEMS or PARAM_I_SYSTEM must be set."))};e.XCmdDeserializeBlendingResultBase.prototype.onCommandProcessed=function(t,n,i){this.getMessageManager().addAllMessages(t);e.MessageUtil.checkNoError(t);this.onQueryManagerImported(n,i.getInteger());this.m_importedSourcesCount++;if(this.m_importedSourcesCount===this.m_sourceCount){this.onAllQueryManagersImported()}};e.XCmdDeserializeBlendingResultBase.prototype.process=function(){let t=this.getParameterStringStrict(e.CmdDeserializeBlending.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY);let n=this.getParameterStrict(e.CmdDeserializeBlending.PARAM_I_APPLICATION);let i=e.JsonParserFactory.newInstance();this.m_rootElement=i.parse(t);e.XObjectExt.release(i);let r=this.m_rootElement.getStructureByKey("DataSource");let o=r.getListByKey("Sources");this.m_aliases=e.XList.create();this.m_queryManagers=e.XList.create();this.m_sourceCount=o.size();this.m_importedSourcesCount=0;for(let t=0;t<this.m_sourceCount;t++){let i=o.getStructureAt(t);let r=i.getStringByKey("AliasName");this.m_aliases.add(r);this.importSourceQueryModel(n,i,r,e.XIntegerValue.create(t))}};e.XCmdDeserializeBlendingResultBase.prototype.releaseObject=function(){e.XCommandResult.prototype.releaseObject.call(this);this.m_queryManagers=e.XObjectExt.release(this.m_queryManagers);this.m_aliases=e.XObjectExt.release(this.m_aliases);this.m_rootElement=e.XObjectExt.release(this.m_rootElement)};e.XCmdDeserializeBlendingSources=function(){};e.XCmdDeserializeBlendingSources.prototype=new e.XCommand;e.XCmdDeserializeBlendingSources.prototype._ff_c="XCmdDeserializeBlendingSources";e.XCmdDeserializeBlendingSources.CLAZZ=null;e.XCmdDeserializeBlendingSources.staticSetup=function(){e.XCmdDeserializeBlendingSources.CLAZZ=e.XClass.create(e.XCmdDeserializeBlendingSources)};e.XCmdDeserializeBlendingSources.prototype.getCommandResultClass=function(){return e.XCmdDeserializeBlendingSourcesResult.CLAZZ};e.XCmdDeserializeCalculatedDimension=function(){};e.XCmdDeserializeCalculatedDimension.prototype=new e.XCommand;e.XCmdDeserializeCalculatedDimension.prototype._ff_c="XCmdDeserializeCalculatedDimension";e.XCmdDeserializeCalculatedDimension.CLAZZ=null;e.XCmdDeserializeCalculatedDimension.staticSetup=function(){e.XCmdDeserializeCalculatedDimension.CLAZZ=e.XClass.create(e.XCmdDeserializeCalculatedDimension)};e.XCmdDeserializeCalculatedDimension.prototype.getCommandResultClass=function(){return e.XCmdDeserializeCalculatedDimensionResult.CLAZZ};e.XCmdDeserializeCalculatedDimensionResult=function(){};e.XCmdDeserializeCalculatedDimensionResult.prototype=new e.XCommandResult;e.XCmdDeserializeCalculatedDimensionResult.prototype._ff_c="XCmdDeserializeCalculatedDimensionResult";e.XCmdDeserializeCalculatedDimensionResult.CLAZZ=null;e.XCmdDeserializeCalculatedDimensionResult.getDataSourceName=function(t){let n=e.XStringBuffer.create();n.append(t.getStringByKey("Type"));n.append(":[");n.append(t.getStringByKey("SchemaName"));n.append("][");n.append(t.getStringByKey("PackageName"));n.append("][");n.append(t.getStringByKey("ObjectName"));n.append("]");return n.toString()};e.XCmdDeserializeCalculatedDimensionResult.staticSetup=function(){e.XCmdDeserializeCalculatedDimensionResult.CLAZZ=e.XClass.create(e.XCmdDeserializeCalculatedDimensionResult)};e.XCmdDeserializeCalculatedDimensionResult.prototype.m_application=null;e.XCmdDeserializeCalculatedDimensionResult.prototype.m_inaQueryModels=null;e.XCmdDeserializeCalculatedDimensionResult.prototype.m_systemName=null;e.XCmdDeserializeCalculatedDimensionResult.prototype.importQueryModel=function(t,n){let i=e.QueryServiceConfig.createWithDataSourceName(this.m_application,this.m_systemName,e.XCmdDeserializeCalculatedDimensionResult.getDataSourceName(t.getStructureByKey("DataSource")));i.setDefinitionByStructure(e.QModelFormat.INA_REPOSITORY,t);i.processQueryManagerCreation(this.getSyncType(),this,n)};e.XCmdDeserializeCalculatedDimensionResult.prototype.onQueryManagerCreated=function(t,n,i){this.getMessageManager().addAllMessages(t);if(t.isValid()){if(e.notNull(i)){let e=i;e.getObject().getQueryModel().addPreQueryWithName(n.getQueryModel(),e.getName())}let t=n.getInitSettings().getDefinitionAsStructure().getListByKey("PreQueryNames");if(e.notNull(t)){let i=t.size();let r=this.m_inaQueryModels.size()-1;for(let o=0;o<i;o++){let i=t.getStringAt(o);for(let t=0;t<r;t++){let r=this.m_inaQueryModels.getStructureAt(t);if(e.XString.isEqual(i,r.getStringByKey("Name"))){this.importQueryModel(r,e.XNameWeakGenericPair.create(i,n))}}}}}if(e.isNull(i)){this.addResultParameter(e.CmdCreateQueryManager.PARAM_E_QUERY_MANAGER,n)}};e.XCmdDeserializeCalculatedDimensionResult.prototype.process=function(){let t=this.getParameterStringStrict(e.CmdDeserializeCalculatedDimension.PARAM_I_QUERY_MODELS_STRING_INA_REPOSITORY);let n=e.JsonParserFactory.newInstance();let i=n.parse(t);e.XObjectExt.release(n);this.m_inaQueryModels=i.getListByKey("Queries");this.m_application=this.getParameterStrict(e.CmdDeserializeCalculatedDimension.PARAM_I_APPLICATION);this.m_systemName=this.getParameterStringStrict(e.CmdDeserializeCalculatedDimension.PARAM_I_SYSTEM);let r=this.m_inaQueryModels.getStructureAt(this.m_inaQueryModels.size()-1);this.importQueryModel(r,null);this.onProcessFinished()};e.XCmdDeserializeCalculatedDimensionResult.prototype.releaseObject=function(){this.m_inaQueryModels=null;this.m_systemName=null;this.m_application=null;e.XCommandResult.prototype.releaseObject.call(this)};e.XCmdDeserializeExtendedDimension=function(){};e.XCmdDeserializeExtendedDimension.prototype=new e.XCommand;e.XCmdDeserializeExtendedDimension.prototype._ff_c="XCmdDeserializeExtendedDimension";e.XCmdDeserializeExtendedDimension.CLAZZ=null;e.XCmdDeserializeExtendedDimension.staticSetup=function(){e.XCmdDeserializeExtendedDimension.CLAZZ=e.XClass.create(e.XCmdDeserializeExtendedDimension)};e.XCmdDeserializeExtendedDimension.prototype.getCommandResultClass=function(){return e.XCmdDeserializeExtendedDimensionResult.CLAZZ};e.XCmdDeserializeExtendedDimensionResult=function(){};e.XCmdDeserializeExtendedDimensionResult.prototype=new e.XCommandResult;e.XCmdDeserializeExtendedDimensionResult.prototype._ff_c="XCmdDeserializeExtendedDimensionResult";e.XCmdDeserializeExtendedDimensionResult.CLAZZ=null;e.XCmdDeserializeExtendedDimensionResult.staticSetup=function(){e.XCmdDeserializeExtendedDimensionResult.CLAZZ=e.XClass.create(e.XCmdDeserializeExtendedDimensionResult)};e.XCmdDeserializeExtendedDimensionResult.prototype.onQueryManagerCreated=function(t,n,i){this.getMessageManager().addAllMessages(t);if(t.isValid()){let t=this.getParameterStringStrict(e.CmdDeserializeBlending.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY);let i=n.getQueryModel().deserializeExt(e.QModelFormat.INA_REPOSITORY,t);this.getMessageManager().addAllMessages(i);this.addResultParameter(e.CmdCreateQueryManager.PARAM_E_QUERY_MANAGER,n)}this.onProcessFinished()};e.XCmdDeserializeExtendedDimensionResult.prototype.process=function(){let t=this.getParameterStringStrict(e.CmdDeserializeExtendedDimension.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY);let n=e.JsonParserFactory.newInstance();let i=n.parse(t);e.XObjectExt.release(n);let r=i.getStructureByKey("DataSource");let o=this.getParameterStrict(e.CmdDeserializeExtendedDimension.PARAM_I_QUERY_MODEL);let l=o.getDataSource().cloneOlapComponent(null,null);let a=e.QInAImportFactory.createForRepository(o.getApplication(),null);a.importDataSourceExternalDimensions(r,l);let s=this.getParameter(e.CmdDeserializeExtendedDimension.PARAM_I_EXT_DIMS_INFO);e.XCommandUtil.updateExtendedDimensionProperties(l.getExtendedDimensionsBase(),s);let u=e.QueryServiceConfig.createWithDataSource(o.getApplication(),l.getSystemName(),l);let p=i.getStringByKeyExt("ExperimentalFeatures",null);let g=this.getParameter(e.CmdDeserializeExtendedDimension.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES);e.XCommandUtil.handleInactiveCapabilities(u,p,g);u.processQueryManagerCreation(this.getSyncType(),this,null)};e.QCsnComponentMetadata=function(){};e.QCsnComponentMetadata.prototype=new e.QInAComponentWithStructure;e.QCsnComponentMetadata.prototype._ff_c="QCsnComponentMetadata";e.QCsnComponentMetadata.prototype.getDimExternalName=function(t){let n=t.getExternalName();return e.XStringUtils.isNotNullAndNotEmpty(n)?n:t.getName()};e.QCsnComponentMetadata.prototype.getFieldName=function(t){let n=t.getName();let i=t.getDimension().getName();if(e.XString.startsWith(n,i)){n=e.XString.substring(n,e.XString.size(i)+1,e.XString.size(n))}return n};e.QCsnComponentMetadata.prototype.getModelFormat=function(){return e.QModelFormat.CSN_METADATA};e.QRsInfoExport=function(){};e.QRsInfoExport.prototype=new e.XObjectExt;e.QRsInfoExport.prototype._ff_c="QRsInfoExport";e.QRsInfoExport.prototype.exportAxis=function(t,n,i){let r=i.putNewStructure(t.getName());let o=r.putNewList(e.RenderConstants.LAYOUT);for(let i=0;i<t.size();i++){let r=o.addNewStructure();let l=t.get(i);r.putString(e.RenderConstants.DIMENSION_NAME,l.getName());let a=n.putNewStructure(l.getName());let s=l.getLoadedStructureMembers();a.putString(e.RenderConstants.NAME,l.getName());a.putString(e.RenderConstants.TEXT,l.getText());if(e.notNull(s)){let t=a.putNewStructure(e.RenderConstants.MEMBERS);for(let n=0;n<s.size();n++){let i=s.get(n);if(e.notNull(i)){let n=t.putNewStructure(i.getName());n.putString(e.RenderConstants.NAME,i.getName());n.putString(e.RenderConstants.ALIAS_NAME,i.getAliasName());n.putString(e.RenderConstants.TEXT,i.getAliasName())}}}}};e.QRsInfoExport.prototype.exportBlendingMappings=function(e){return null};e.QRsInfoExport.prototype.exportComponent=function(t,n,i,r){let o=e.PrFactory.createStructure();let l=n.getComponentType();if(l===e.OlapComponentType.QUERY_MODEL){let t=n;let i=o.putNewStructure(e.RenderConstants.DIMENSIONS);let r=o.putNewStructure(e.RenderConstants.AXES);let l=t.getRowsAxis();this.exportAxis(l,i,r);let a=t.getColumnsAxis();this.exportAxis(a,i,r)}return o};e.QRsInfoExport.prototype.exportCustomHierarchyDefinition=function(e){return null};e.QRsInfoExport.prototype.exportDataSource=function(e,t){return null};e.QRsInfoExport.prototype.exportHierarchy=function(e,t){};e.QRsInfoExport.prototype.exportLovRequest=function(e,t,n,i){return null};e.QRsInfoExport.prototype.exportMemberHelpRequest=function(e,t,n){return null};e.QRsInfoExport.prototype.exportPlanningVariableHelpRequest=function(e,t,n){return null};e.QRsInfoExport.prototype.exportQueryModel=function(e,t,n){return null};e.QRsInfoExport.prototype.exportStructureDimension=function(e){return null};e.QRsInfoExport.prototype.exportVariableHelpRequest=function(e,t,n){return null};e.QRsInfoExport.prototype.exportVariableList=function(e){return null};e.QRsInfoExport.prototype.exportVariables=function(e,t){return null};e.QRsInfoExport.prototype.setupImportExport=function(e,t,n,i){};e.QInAComponentMetadata=function(){};e.QInAComponentMetadata.prototype=new e.QInAComponentWithStructure;e.QInAComponentMetadata.prototype._ff_c="QInAComponentMetadata";e.QInAComponentMetadata.prototype.extendCustom=function(t,n,i){let r=this.getComponentType();let o=e.QInAConverter.lookupComponentTypeInA(r);if(e.notNull(o)){i.putString("CType",o)}return i};e.QInAComponentMetadata.prototype.getModelFormat=function(){return e.QModelFormat.INA_METADATA_CORE};e.QInAAttribute=function(){};e.QInAAttribute.prototype=new e.QInAComponentWithStructure;e.QInAAttribute.prototype._ff_c="QInAAttribute";e.QInAAttribute.prototype.exportComponentWithStructure=function(e,t,n,i){let r=t;n.putString("Name",r.getName());let o=n.putNewList("ResultSetFields");let l=r.getResultSetFields();let a=l.size();for(let e=0;e<a;e++){o.addString(l.get(e).getName())}return n};e.QInAAttribute.prototype.getComponentType=function(){return e.OlapComponentType.ATTRIBUTE};e.QInAAttribute.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=r;let a=n.getStringByKey("Name");let s=l.getAttributeByName(a);if(e.notNull(s)){let t=n.getListByKey("ResultSetFields");if(e.notNull(t)){let n=s.getResultSetFields();n.clear();let i=t.size();for(let r=0;r<i;r++){let i=s.getFieldByName(t.getStringAt(r));if(e.notNull(i)){n.add(i)}}}}return s};e.QInAAxesSettings=function(){};e.QInAAxesSettings.prototype=new e.QInAComponentWithList;e.QInAAxesSettings.prototype._ff_c="QInAAxesSettings";e.QInAAxesSettings.isDefinedZeroSuppression=function(t){if(e.notNull(t)&&e.XCollectionUtils.hasElements(t)&&t.getZeroSuppressionType()!==e.ZeroSuppressionType.NONE){let n=e.XCollectionUtils.findFirst(t.getValuesAsReadOnlyList(),t=>!e.QInAExportUtil.isFormulaCalculatedDimensionHidden(t));return e.notNull(n)}return false};e.QInAAxesSettings.prototype.exportComponentWithList=function(t,n,i){let r=n;let o=e.PrFactory.createList();let l=r.getColumnsAxis();if(t.isAbap(r)||e.QInAAxesSettings.isDefinedZeroSuppression(l)){let e=t.exportAxis(l,null);o.add(e)}let a=r.getRowsAxis();if(t.isAbap(r)||e.QInAAxesSettings.isDefinedZeroSuppression(a)){let e=t.exportAxis(a,null);o.add(e)}return o};e.QInAAxesSettings.prototype.getComponentType=function(){return e.OlapComponentType.AXES_SETTINGS};e.QInAAxesSettings.prototype.getTagName=function(){return"Axes"};e.QInAAxesSettings.prototype.importComponentWithList=function(t,n,i,r,o){let l=o.getQueryModel();if(e.notNull(n)){if(t.m_capabilities.supportsZeroSuppression()||t.m_capabilities.supportsNullZeroSuppression()){let t=e.AxisType.getAll();let n=t.size();for(let i=0;i<n;i++){let n=l.getAxisBase(t.get(i));if(e.notNull(n)){n.setSupportsZeroSuppression(true)}}}let i=n.size();for(let e=0;e<i;e++){t.importAxis(n.getStructureAt(e),null,o)}}else if(t.m_capabilities.supportsNullZeroSuppression()){this.initializeAxisForNullSuppression(l.getAxisBase(e.AxisType.ROWS));this.initializeAxisForNullSuppression(l.getAxisBase(e.AxisType.COLUMNS))}return null};e.QInAAxesSettings.prototype.initializeAxisForNullSuppression=function(t){t.setSupportsZeroSuppression(true);t.resetZeroSuppressionTypes();t.addAvailableZeroSuppressionType(e.ZeroSuppressionType.ALL_CELLS_ARE_ZERO);t.addAvailableZeroSuppressionType(e.ZeroSuppressionType.ALL_CELLS_ARE_NULL)};e.QInAAxis=function(){};e.QInAAxis.prototype=new e.QInAComponentWithStructure;e.QInAAxis.prototype._ff_c="QInAAxis";e.QInAAxis.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=o.getType();i.putString("Axis",e.QInAConverter.lookupAxisTypeInA(l));i.putInteger("Type",e.QInAConverter.lookupAxisTypeInAInt(l));let a=o.getZeroSuppressionType();i.putInteger("ZeroSuppressionType",e.QInAConverter.lookupSuppressionTypeInA(a));t.exportTotals(o.getResultStructureController(),i);return i};e.QInAAxis.prototype.getComponentType=function(){return e.OlapComponentType.AXIS};e.QInAAxis.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=t.m_capabilities.supportsZeroSuppression();let a=t.m_capabilities.supportsNullZeroSuppression();let s;let u=n.getStringByKey("Axis");if(e.isNull(u)){s=e.QInAConverter.lookupAxisTypeInt(n.getIntegerByKey("Type"))}else{s=e.QInAConverter.lookupAxisType(u)}let p=o.getQueryModel();let g=p.getAxisBase(s);if(e.notNull(g)){g.resetZeroSuppressionTypes();if(l||a){let t=n.getIntegerByKey("ZeroSuppressionType");let i=e.QInAConverter.lookupSuppressionType(t);g.setZeroSuppressionType(i);g.setDefaultZeroSuppression(i);g.addAvailableZeroSuppressionType(e.ZeroSuppressionType.ALL_CELLS_ARE_ZERO)}if(l){g.addAvailableZeroSuppressionType(e.ZeroSuppressionType.TOTAL_IS_ZERO)}else if(a){g.addAvailableZeroSuppressionType(e.ZeroSuppressionType.ALL_CELLS_ARE_NULL)}t.importTotals(n,g.getResultStructureControllerBase(),o)}return g};e.QInACellContext=function(){};e.QInACellContext.prototype=new e.QInAComponentWithStructure;e.QInACellContext.prototype._ff_c="QInACellContext";e.QInACellContext.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=i;if(e.isNull(l)){l=e.PrFactory.createStructure()}l.putString("Name",o.getName());if(o.getRowIndex()>-1){l.putInteger("Row",o.getRowIndex())}if(o.getColumnIndex()>-1){l.putInteger("Column",o.getColumnIndex())}if(o.isExternalKeys()){l.putBoolean("ExternalKeys",o.isExternalKeys())}if(o.isComponentsExternal()){l.putBoolean("ComponentsExternal",o.isComponentsExternal())}if(o.isComponentsInternal()){l.putBoolean("ComponentsInternal",o.isComponentsInternal())}let a=o.getAxisContexts();if(e.XCollectionUtils.hasElements(a)){let n=l.putNewList("CellContextPaths");let i=a.getKeysAsIterator();while(i.hasNext()){let r=i.next();let o=a.getByKey(r);if(e.XCollectionUtils.hasElements(o)){let i=n.addNewStructure();i.putString("Axis",e.QInAConverter.lookupAxisTypeInA(r));let l=i.putNewList("CellContextMembers");let a=o.size();for(let e=0;e<a;e++){l.add(t.exportDrillPathElement(o.get(e),true))}}}}return i};e.QInACellContext.prototype.getComponentType=function(){return e.OlapComponentType.CELL_CONTEXT};e.QInACellContext.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=null;let a=n.getStringByKey("Name");if(e.isNull(i)){l=e.QCellContext._create(o,a,r)}else if(i.getOlapComponentType()===e.OlapComponentType.CELL_CONTEXT){l=i}l.setRowIndex(n.getIntegerByKeyExt("Row",-1));l.setColumnIndex(n.getIntegerByKeyExt("Column",-1));l.setExternalKeys(n.getBooleanByKeyExt("ExternalKeys",false));l.setComponentsExternal(n.getBooleanByKeyExt("ComponentsExternal",false));l.setComponentsInternal(n.getBooleanByKeyExt("ComponentsInternal",false));let s=n.getListByKey("CellContextPaths");if(!e.PrUtils.isListEmpty(s)){let n=s.size();for(let i=0;i<n;i++){let n=s.getStructureAt(i);let r=e.QInAConverter.lookupAxisType(n.getStringByKey("Axis"));let a=n.getListByKey("CellContextMembers");let u=a.size();let p=e.XList.create();for(let e=0;e<u;e++){let n=a.getStructureAt(e);p.add(t.importDrillPathElement(n,l,o))}l.setTupleContextForAxis(p,r)}}return l};e.QInACellContextManager=function(){};e.QInACellContextManager.prototype=new e.QInAComponentWithList;e.QInACellContextManager.prototype._ff_c="QInACellContextManager";e.QInACellContextManager.prototype.exportComponentWithList=function(t,n,i){let r=null;if(t.m_capabilities.supportsDataCellContexts()){let i=n;if(e.XCollectionUtils.hasElements(i)){r=e.PrFactory.createList();for(let e=0;e<i.size();e++){r.add(t.exportCellContext(i.get(e)))}}}return r};e.QInACellContextManager.prototype.getComponentType=function(){return e.OlapComponentType.CELL_CONTEXT_MANAGER};e.QInACellContextManager.prototype.getTagName=function(){return"CellContextRequests"};e.QInACellContextManager.prototype.importComponentWithList=function(t,n,i,r,o){if(i.getOlapComponentType()===e.OlapComponentType.CELL_CONTEXT_MANAGER){let r=i;if(e.notNull(n)){r.clear();let e=n.size();for(let i=0;i<e;i++){r.addCellContext(t.importCellContext(n.getStructureAt(i),r,o))}}}return i};e.QInAChartDefinition=function(){};e.QInAChartDefinition.prototype=new e.QInAComponentWithStructure;e.QInAChartDefinition.prototype._ff_c="QInAChartDefinition";e.QInAChartDefinition.prototype.exportComponentWithStructure=function(t,n,i,r){if(e.notNull(n)&&e.notNull(i)){let r=n;let o=r.getChartSetting();let l=r.getQueryModel().getDataSource().getFullQualifiedName();this.exportGlobalAndAnalyticsObjects(t,r,i);i.putBoolean("autoChartType",false);let a=i.putNewStructure("cache");a.putBoolean("bindingsHasTrellis",false);a.putBoolean("bindingsUseUnbooked",false);a.putNewList("filtersVersionTuples");let s=i.putNewList("datasets");let u=s.addNewStructure();u.putString(e.VizDefConstants.K_ID,l);u.putString(e.VizDefConstants.K_TYPE,"dataset");let p=i.putNewStructure(e.VizDefConstants.K_CHART);p.putString(e.VizDefConstants.K_TYPE,o.getChartType().getName());let g=p.putNewList(e.VizDefConstants.K_BINDINGS);let m=e.XList.create();m.add(e.VisualizationValueType.VALUE);m.add(e.VisualizationValueType.VALUE_B);e.XStream.of(m).forEach(t=>{let n=o.getTypedValueSelectionsForType(t);let i=n.getValuesAsReadOnlyList();let a=g.addNewStructure();a.putString(e.VizDefConstants.K_FEED,t.getName());let s=a.putNewList(e.VizDefConstants.K_SOURCE);e.XStream.of(i).forEach(t=>{let n=s.addNewStructure();n.putString(e.VizDefConstants.K_ID,t.getName());n.putString(e.VizDefConstants.K_TYPE,"member");n.putString(e.VizDefConstants.K_PATTERN,"");let i=n.putNewStructure(e.VizDefConstants.K_PARENT_KEY);i.putString(e.VizDefConstants.K_ID,r.getKeyFigureDimension().getName());i.putString(e.VizDefConstants.K_TYPE,e.VizDefConstants.K_DIMENSION);let o=i.putNewStructure(e.VizDefConstants.K_PARENT_KEY);o.putString(e.VizDefConstants.K_ID,l);o.putString(e.VizDefConstants.K_TYPE,"dataset")})})}return i};e.QInAChartDefinition.prototype.exportGlobalAndAnalyticsObjects=function(e,t,n){let i=n.putNewStructure("GlobalObjects");i.putNewStructure("CalculationVariables");i.putNewStructure("Calculations");i.putNewStructure("FieldSelections");i.putNewStructure("PageFilters");i.putNewStructure("StoryFilters");let r=n.putNewStructure("analyticObjects");r.putNewStructure("clusteringSettings")};e.QInAChartDefinition.prototype.getComponentType=function(){return e.OlapComponentType.VISUALIZATION_CHART_DEFINITION};e.QInAChartDefinition.prototype.getModelFormat=function(){return e.QModelFormat.VIZDEF};e.QInAChartDefinition.prototype.importComponentWithStructure=function(t,n,i,r,o){if(e.notNull(n)&&e.notNull(i)&&i.getOlapComponentType()===e.OlapComponentType.VISUALIZATION_CHART_DEFINITION){let t=i;let r=t.getChartSetting();let l=t.getQueryModel();t.setTitle(n.getStringByKey("Title"));let a=n.getStructureByKey(e.VizDefConstants.K_CHART);r.setChartType(e.ChartType.lookup(a.getStringByKey(e.VizDefConstants.K_TYPE)));let s=a.getListByKey(e.VizDefConstants.K_BINDINGS);e.XCollectionUtils.forEach(s,n=>{let i=n;let a=i.getStringByKey(e.VizDefConstants.K_FEED);let s=e.VisualizationValueType.lookup(a);let u=i.getListByKey(e.VizDefConstants.K_SOURCE);e.XCollectionUtils.forEach(u,n=>{let i=n;let a=i.getStructureByKey(e.VizDefConstants.K_PARENT_KEY).getStringByKey(e.VizDefConstants.K_ID);let u=l.getDimensionByName(a);t.setKeyFigureDimension(u);let p=i.getStringByKey(e.VizDefConstants.K_ID);let g=u.getStructureMember(p);r.addTypedValueSelection(s,e.QKeyFigureSelection.create(o,g,t,s))})})}return i};e.QInAConditionManager=function(){};e.QInAConditionManager.prototype=new e.QInAComponentWithList;e.QInAConditionManager.prototype._ff_c="QInAConditionManager";e.QInAConditionManager.prototype.addTransientConditionsForAxis=function(e,t,n,i,r){let o=t.getVersionDimension();let l=t.getAccountDimension();let a=t.getMeasureDimension();let s=t.getNonMeasureDimension();let u=i.getBreakGroupDimensions();for(let t=n.size()-1;t>-1;t--){let p=n.get(t);if(p.canBeAggregated()&&p!==o&&p!==l&&p!==a&&p!==s&&!u.contains(p)){e.add(this.createTransientCondition(i,p));if(!r){break}}}};e.QInAConditionManager.prototype.addTransientContiguousConditionForAxis=function(t,n,i,r){let o=n.getVersionDimension();let l=n.getAccountDimension();let a=n.getMeasureDimension();let s=n.getNonMeasureDimension();let u=r.getBreakGroupDimensions();let p=e.XList.create();let g=e=>e.canBeAggregated()&&e!==o&&e!==l&&e!==a&&e!==s&&!u.contains(e);let m=0;let c=i.size();for(;m<c;m++){if(g(i.get(m))){break}}for(;m<c;m++){let e=i.get(m);if(!g(e)){break}p.add(e)}if(e.XCollectionUtils.hasElements(p)){let n=e.XStringUtils.concatenate3(r.getName(),"_",i.getName());let o=e.QCondition.create(r.getContext(),null,n,false);o.copyFrom(r,null);o.setName(n);o.setDimensionEvaluationType(e.ConditionDimensionEvaluationType.GIVEN_LIST);e.XCollectionUtils.forEach(p,e=>{o.addEvaluationDimension(e)});t.add(o)}};e.QInAConditionManager.prototype.createTransientCondition=function(t,n){let i=e.XStringUtils.concatenate3(t.getName(),"_",n.getName());let r=e.QCondition.create(t.getContext(),null,i,false);r.copyFrom(t,null);r.setName(i);r.setDimensionEvaluationType(e.ConditionDimensionEvaluationType.GIVEN_LIST);r.addEvaluationDimension(n);return r};e.QInAConditionManager.prototype.exportComponentWithList=function(t,n,i){let r=n;if(e.notNull(r)){let n;if(t.m_mode.isTypeOf(e.QModelFormat.INA_DATA)){n=r.getEffectiveConditions()}else{n=r}let i=n.size();if(i>0){let r=e.PrFactory.createList();for(let e=0;e<i;e++){this.exportCondition(t,n.get(e),r)}if(r.isEmpty()){return null}return r}}return null};e.QInAConditionManager.prototype.exportCondition=function(t,n,i){let r=n.getDimensionEvaluationType();if(!n.getQueryManager().getSystemType().isTypeOf(e.SystemType.BW)&&r!==e.ConditionDimensionEvaluationType.GIVEN_LIST&&!e.XCollectionUtils.hasElements(n.getEvaluationDimensions())||r===e.ConditionDimensionEvaluationType.TUPLES_ON_COLUMNS||r===e.ConditionDimensionEvaluationType.TUPLES_ON_ROWS||r===e.ConditionDimensionEvaluationType.ALL_ON_ROWS||r===e.ConditionDimensionEvaluationType.ALL_ON_COLUMNS){let r=this.getTransientConditions(n);e.XStream.of(r).forEach(e=>{this.exportConditionFinal(t,e,i)})}else{this.exportConditionFinal(t,n,i)}};e.QInAConditionManager.prototype.exportConditionFinal=function(t,n,i){let r=t.exportCondition(n);if(e.notNull(r)&&!r.isEmpty()){i.add(r)}};e.QInAConditionManager.prototype.getComponentType=function(){return e.OlapComponentType.CONDITIONS_MANAGER};e.QInAConditionManager.prototype.getTagName=function(){return"Conditions"};e.QInAConditionManager.prototype.getTransientConditions=function(t){let n=e.XList.create();if(t.isActive()){let i=t.getQueryModel();let r=t.getDimensionEvaluationType();if(r===e.ConditionDimensionEvaluationType.ALL_IN_DRILL_DOWN){this.addTransientConditionsForAxis(n,i,i.getRowsAxis(),t,true);this.addTransientConditionsForAxis(n,i,i.getColumnsAxis(),t,true)}else if(r===e.ConditionDimensionEvaluationType.MOST_DETAILED_ON_COLS){this.addTransientConditionsForAxis(n,i,i.getColumnsAxis(),t,false)}else if(r===e.ConditionDimensionEvaluationType.MOST_DETAILED_ON_ROWS){this.addTransientConditionsForAxis(n,i,i.getRowsAxis(),t,false)}else if(r===e.ConditionDimensionEvaluationType.ALL_ON_ROWS){this.addTransientConditionsForAxis(n,i,i.getRowsAxis(),t,true)}else if(r===e.ConditionDimensionEvaluationType.ALL_ON_COLUMNS){this.addTransientConditionsForAxis(n,i,i.getColumnsAxis(),t,true)}else if(r===e.ConditionDimensionEvaluationType.TUPLES_ON_COLUMNS){this.addTransientContiguousConditionForAxis(n,i,i.getColumnsAxis(),t)}else if(r===e.ConditionDimensionEvaluationType.TUPLES_ON_ROWS){this.addTransientContiguousConditionForAxis(n,i,i.getRowsAxis(),t)}}return n};e.QInAConditionManager.prototype.importComponentWithList=function(t,n,i,r,o){let l=i;if(e.notNull(l)){let i=o.getQueryModel();let r=i.getQueryManagerBase();let a=e.notNull(r)&&r.isExecuteAutoVariableSubmit()&&r.isProcessingAutoSubmit();if(!a){l.clearFrontendConditions()}if(e.notNull(n)){let e=n.size();for(let r=0;r<e;r++){let e=n.getStructureAt(r);if(a){let n=e.getStringByKey("Name");let r=l.getByKey(n);t.importCondition(i,e,r)}else{let n=t.importCondition(i,e,null);l.add(n)}}}}return l};e.QInAConditionsCondition=function(){};e.QInAConditionsCondition.prototype=new e.QInAComponentWithStructure;e.QInAConditionsCondition.prototype._ff_c="QInAConditionsCondition";e.QInAConditionsCondition.exportBreakGroupDimensionList=function(t){if(e.isNull(t)){return null}let n=e.PrFactory.createList();let i=t.getBreakGroupDimensions();let r=i.size();for(let e=0;e<r;e++){n.addString(i.get(e).getName())}return n};e.QInAConditionsCondition.exportEvaluateOnDimensionsList=function(t){if(e.isNull(t)){return null}let n=e.PrFactory.createList();let i=t.getEvaluationDimensions();let r=i.size();for(let e=0;e<r;e++){n.addString(i.get(e).getName())}return n};e.QInAConditionsCondition.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=o.getQueryModel();let a=l.getSystemType().isTypeOf(e.SystemType.HANA);if(t.getMode()===e.QModelFormat.INA_REPOSITORY){i.putBoolean("IsBackendCondition",o.isBackendCondition())}i.putBoolean("Active",o.isActive());if(o.isApplyingConditionAfterVisibilityFilter()){i.putBoolean("AfterVisibilityFilter",true)}if(a){i.putStringNotNullAndNotEmpty("Description",o.getDescription())}else{i.putString("Description",o.getDescription())}i.putString("Name",o.getName());let s=o.getDimensionEvaluationType();i.putString("EvaluateOnDimensions",s.getName());if(s===e.ConditionDimensionEvaluationType.GIVEN_LIST){let t=e.QInAConditionsCondition.exportEvaluateOnDimensionsList(o);i.put("EvaluateOnDimensionsList",t)}let u=o.getThresholds();let p=u.size();if(p>0){let n=e.PrFactory.createList();for(let i=0;i<p;i++){let r=t.exportConditionThreshold(u.get(i));if(e.notNull(r)){n.add(r)}}if(!n.isEmpty()){i.put("Threshold",n)}else{return null}}if(a){if(e.XCollectionUtils.hasElements(l.getPreQueries())&&!o.getOnDisabledToWarning()){i.putString("OnDisabled","Error")}let t=o.isBreakGroup();if(t){i.putBoolean("BreakGroup",true);let t=e.QInAConditionsCondition.exportBreakGroupDimensionList(o);i.put("BreakGroupList",t)}if(o.isBreakHierarchy()){i.putBoolean("BreakHierarchy",true)}}return i};e.QInAConditionsCondition.prototype.getComponentType=function(){return e.OlapComponentType.CONDITION};e.QInAConditionsCondition.prototype.importComponentWithStructure=function(t,n,i,r,o){if(e.isNull(n)){return i}let l;let a=n.getStringByKey("Name");if(e.isNull(i)){if(t.getMode()===e.QModelFormat.INA_REPOSITORY){let t=n.getBooleanByKeyExt("IsBackendCondition",true);l=e.QCondition.create(o,r,a,t)}else{l=e.QCondition.create(o,r,a,true)}}else{l=i;l.clearThresholds();l.clearEvaluationDimensions()}l.setActive(n.getBooleanByKey("Active"));l.setUsedState(n.getStringByKey("IsUsed"));l.setDescription(n.getStringByKey("Description"));let s=n.getStringByKey("OnDisabled");l.setApplyConditionAfterVisibilityFilter(n.getBooleanByKeyExt("AfterVisibilityFilter",false));if(e.notNull(s)){if(e.XString.isEqual(s,"Error")){l.setOnDisabledToWarning(false)}}let u=n.getStringByKey("EvaluateOnDimensions");let p=e.ConditionDimensionEvaluationType.lookupName(u);if(e.notNull(p)){l.setDimensionEvaluationType(p)}let g=o.getQueryModel();let m=n.getListByKey("EvaluateOnDimensionsList");let c;let y;if(!e.PrUtils.isListEmpty(m)&&e.notNull(g)){c=m.size();for(y=0;y<c;y++){let t=m.getStringAt(y);if(e.notNull(t)){let n=g.getDimensionByNameFromExistingMetadata(t);if(e.notNull(n)){l.addEvaluationDimension(n)}}}}let d=n.getListByKey("Threshold");if(!e.PrUtils.isListEmpty(d)){let n=d.size();for(let i=0;i<n;i++){let n=d.getStructureAt(i);if(e.notNull(n)){l.addThreshold(t.importConditionThreshold(g,n,null,l))}}}l.setBreakGroup(n.getBooleanByKeyExt("BreakGroup",false));let A=n.getListByKey("BreakGroupList");if(!e.PrUtils.isListEmpty(A)&&e.notNull(g)){c=A.size();for(y=0;y<c;y++){let t=A.getStringAt(y);if(e.notNull(t)){let n=g.getDimensionByNameFromExistingMetadata(t);if(e.notNull(n)){l.addBreakGroupDimension(n)}}}}return l};e.QInAConditionsThreshold=function(){};e.QInAConditionsThreshold.prototype=new e.QInAComponentWithStructure;e.QInAConditionsThreshold.prototype._ff_c="QInAConditionsThreshold";e.QInAConditionsThreshold.importSingleMeasureCoordinate=function(t,n,i){if(e.isNull(n)||e.isNull(i)){return}let r=i.getStringByKey("DimensionName");let o=i.getStringByKey("MemberName");if(e.XStringUtils.isNullOrEmpty(r)||e.XStringUtils.isNullOrEmpty(o)){return}let l=t;if(e.isNull(l)){l=n.getContext().getQueryModel()}if(e.notNull(l)){let t=l.getDimensionByNameFromExistingMetadata(r);if(e.notNull(t)){let i=t.getDimensionMember(o);if(e.notNull(i)){n.addMeasureCoordinate(i)}}}};e.QInAConditionsThreshold.importThresholdValue=function(t,n){if(e.isNull(t)||e.isNull(n)){return}if(n.isBoolean()){t.setBoolean(n.getBoolean())}else if(n.isString()){t.setString(n.getString())}else if(n.isDouble()){t.setDouble(n.getDouble())}else if(n.isInteger()){t.setInteger(n.getInteger())}else if(n.isLong()){t.setLong(n.getLong())}};e.QInAConditionsThreshold.setValue=function(t,n,i,r,o){if(o===e.XValueType.VARIABLE){let t=r.getVariableValue();if(e.notNull(t)){i.putString(n,t.getName());if(e.XString.isEqual(n,"Low")){i.putString("LowIs","Variable")}else if(e.XString.isEqual(n,"High")){i.putString("HighIs","Variable")}}}else{e.QInAValueUtils.exportPlaceholderValue(t,n,i,r,o,r.getQueryModel())}};e.QInAConditionsThreshold.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=o.getMeasureCoordinates();let a=e.PrFactory.createList();let s=l.size();let u=o.getQueryModel();for(let n=0;n<s;n++){let i=l.get(n);let r=e.PrFactory.createStructure();let o=i.getDimension();if(e.notNull(o)){let n=o.getName();let l=u.getDimensionByName(n);let s=i.getName();let p=e.QInAExportUtil.getMeasureMemberNameByAlias(u,s,t);if(e.XStringUtils.isNotNullAndNotEmpty(p)&&(l.getDimensionType()===e.DimensionType.MEASURE_STRUCTURE||l.getDimensionType()===e.DimensionType.ACCOUNT)){s=p}if(!l.getAxisType().isVisible()&&t.m_capabilities.supportsConditionsWithVersions()&&l.getDimensionType().isTypeOf(e.DimensionType.GENERAL_VERSION)){continue}if(l.getDimensionType()!==e.DimensionType.MEASURE_STRUCTURE||l.getStructureMember(s)!==null){r.putString("DimensionName",n);r.putString("MemberName",s);a.add(r)}}}if(s===0||a.isEmpty()){return null}i.put("MeasureCoordinate",a);let p=u.getSystemType().isTypeOf(e.SystemType.HANA);let g=o.getLow();let m=o.getHigh();if(p){if(g.getValue()!==null){e.QInAConditionsThreshold.setValue(t,"Low",i,g,e.XValueType.INTEGER)}if(m.getValue()!==null){e.QInAConditionsThreshold.setValue(t,"High",i,m,e.XValueType.INTEGER)}let n=o.getLevel();if(e.notNull(n)){i.putInteger("Level",n.getInteger())}}else{if(g.getValue()!==null){e.QInAConditionsThreshold.setValue(t,"Low",i,g,g.getValueType())}if(m.getValue()!==null){e.QInAConditionsThreshold.setValue(t,"High",i,m,m.getValueType())}let n=o.getLowIs();if(n.getValue()!==null){e.QInAConditionsThreshold.setValue(t,"LowIs",i,n,n.getValueType())}let r=o.getHighIs();if(r.getValue()!==null){e.QInAConditionsThreshold.setValue(t,"HighIs",i,r,r.getValueType())}}let c=o.getComparisonOperator();i.putString("Comparison",c.getName());return i};e.QInAConditionsThreshold.prototype.getComponentType=function(){return e.OlapComponentType.CONDITIONS_THRESHOLD};e.QInAConditionsThreshold.prototype.importComponentWithStructure=function(t,n,i,r,o){if(e.isNull(n)){return i}let l;if(e.isNull(i)){l=e.QConditionThreshold.create(o,r)}else{l=i}let a=n.getStringByKey("Comparison");let s=e.ConditionComparisonOperator.lookupName(a);if(e.notNull(s)){l.setComparisonOperator(s)}let u=n.getByKey("Low");e.QInAConditionsThreshold.importThresholdValue(l.getLow(),u);let p=n.getByKey("LowIs");e.QInAConditionsThreshold.importThresholdValue(l.getLowIs(),p);let g=n.getByKey("High");e.QInAConditionsThreshold.importThresholdValue(l.getHigh(),g);let m=n.getByKey("HighIs");e.QInAConditionsThreshold.importThresholdValue(l.getHighIs(),m);let c=n.getListByKey("MeasureCoordinate");if(e.notNull(c)){let t=o.getQueryModel();let n=c.size();for(let i=0;i<n;i++){e.QInAConditionsThreshold.importSingleMeasureCoordinate(t,l,c.getStructureAt(i))}}l.setLeavesOnly(n.getBooleanByKeyExt("LeavesOnly",false));let y=n.getByKey("Level");if(e.notNull(y)){l.setLevel(e.XIntegerValue.create(y.getInteger()))}return l};e.QInACurrencyTranslationItem=function(){};e.QInACurrencyTranslationItem.prototype=new e.QInAComponentWithStructure;e.QInACurrencyTranslationItem.prototype._ff_c="QInACurrencyTranslationItem";e.QInACurrencyTranslationItem.createConditonalFormula=function(t,n,i){if(e.isNull(t)&&e.isNull(n)){return null}if(e.isNull(t)){return e.QInACurrencyTranslationItem.createRateTypeCategory(n,i)}if(e.isNull(n)){return e.QInACurrencyTranslationItem.createRateTypeVersion(t,i)}let r=e.QFactory.createFormulaFunction(null);r.setFunctionName(e.FormulaOperator.IF.getName());let o=e.QFactory.createFormulaFunction(null);let l=e.QFactory.createFormulaAttributeWithName(null,t);o.setFunctionName(e.FormulaOperator.EQ.getName());o.add(l);let a=e.QFactory.createFormulaConstant(null);a.setString("");o.add(a);r.add(o);r.add(e.QInACurrencyTranslationItem.createRateTypeCategory(n,i));r.add(e.QInACurrencyTranslationItem.createRateTypeVersion(t,i));return r};e.QInACurrencyTranslationItem.createRateTypeCategory=function(t,n){let i=e.QFactory.createFormulaFunction(null);i.setFunctionName(e.FormulaOperator.ADDITION.getName());let r=e.QFactory.createFormulaAttributeWithName(null,t);let o=e.QFactory.createFormulaConstant(null);o.setString("$");i.add(r);i.add(o);i.add(n);return i};e.QInACurrencyTranslationItem.createRateTypeVersion=function(t,n){let i=e.QFactory.createFormulaFunction(null);i.setFunctionName(e.FormulaOperator.ADDITION.getName());let r=e.QFactory.createFormulaConstant(null);r.setString("Version$");let o=e.QFactory.createFormulaConstant(null);o.setString("$");let l=e.QFactory.createFormulaAttributeWithName(null,t);i.add(r);i.add(n);i.add(o);i.add(l);return i};e.QInACurrencyTranslationItem.getCurrencyTranslationManager=function(t){let n=null;let i=t.getQueryModel();if(e.notNull(i)){n=i.getCurrencyTranslationManager()}else{let i=t.getParentComponent();if(e.notNull(i)&&i.getComponentType()===e.OlapComponentType.CURRENCY_TRANSLATION_MANAGER){n=i}}return n};e.QInACurrencyTranslationItem.resolveRateName=function(t){let n=null;let i=t.getRateName();if(e.notNull(i)&&(i.isFieldBased()||i.isFixed()||i.isFormulaBased())){n=i}else{let i=e.QInACurrencyTranslationItem.getCurrencyTranslationManager(t);let r=i.getRateTypeFieldName();let o=i.getRateVersionFieldName();let l=i.getCategoryFieldName();let a=t.getFixedRateType();let s=t.getFixedCategory();let u=t.getFixedRateVersion();if(e.CtRateType.isDefined(a)){if(e.CtCategory.isDefined(s)){n=e.QCurrencyLookupValue.createFixedByValue(null,e.XStringValue.create(e.XStringUtils.concatenate3(e.QInAConverter.lookupCategoryInA(s),"$",e.QInAConverter.lookupRateTypeInA(a))))}else if(e.XStringUtils.isNotNullAndNotEmpty(u)){n=e.QCurrencyLookupValue.createFixedByValue(null,e.XStringValue.create(e.XStringUtils.concatenate4("Version$",e.QInAConverter.lookupRateTypeInA(a),"$",u)))}else{let t=e.QFactory.createFormulaConstant(null);t.setString(e.QInAConverter.lookupRateTypeInA(a));let i=e.QInACurrencyTranslationItem.createConditonalFormula(o,l,t);if(e.notNull(i)){n=e.QCurrencyLookupValue.createByFormulaItem(null,i)}}}else if(i.deriveRateTypeFromAccount()&&e.notNull(r)){let t=e.QFactory.createFormulaAttributeWithName(null,r);if(e.CtCategory.isDefined(s)){let i=e.QFactory.createFormulaFunction(null);i.setFunctionName(e.FormulaOperator.ADDITION.getName());let r=e.QFactory.createFormulaConstant(null);r.setString(e.QInAConverter.lookupCategoryInA(s));let o=e.QFactory.createFormulaConstant(null);o.setString("$");i.add(r);i.add(o);i.add(t);n=e.QCurrencyLookupValue.createByFormulaItem(null,i)}else if(e.XStringUtils.isNotNullAndNotEmpty(u)){let i=e.QFactory.createFormulaFunction(null);i.setFunctionName(e.FormulaOperator.ADDITION.getName());let r=e.QFactory.createFormulaConstant(null);r.setString("Version$");let o=e.QFactory.createFormulaConstant(null);o.setString("$");let l=e.QFactory.createFormulaConstant(null);l.setString(u);i.add(r);i.add(t);i.add(o);i.add(l);n=e.QCurrencyLookupValue.createByFormulaItem(null,i)}else{let i=e.QInACurrencyTranslationItem.createConditonalFormula(o,l,t);if(e.notNull(i)){n=e.QCurrencyLookupValue.createByFormulaItem(null,i)}}}else{let n=e.XStringBuffer.create();n.append("The currency translation object '");n.append(t.getName());n.append("' is not fully specified. The rate type cannot be derived from the model properties.");throw e.XException.createIllegalStateException(n.toString())}}return n};e.QInACurrencyTranslationItem.resolveReferenceDate=function(t){let n=null;let i=e.QInACurrencyTranslationItem.getCurrencyTranslationManager(t).getDefaultReferenceDateFieldName();let r=t.getReferenceDate();if(t.getDateOffset()===0){if(e.notNull(r)&&(r.isFixed()||r.isFieldBased()||r.isFormulaBased())){n=r}else if(e.notNull(i)){n=e.QCurrencyLookupValue.createByFieldName(null,i)}}else{let o;if(e.notNull(r)&&r.isFieldBased()){o=r.getFieldName()}else{o=i}if(e.notNull(o)){let i=e.QFactory.createFormulaFunction(null);let r=e.QFactory.createFormulaAttributeWithName(null,o);i.add(r);let l=e.QFactory.createFormulaConstant(null);let a=t.getDateOffsetGranularity();let s=t.getDateOffset();if(a===e.DateOffsetGranularity.DAY){i.setFunctionName("CALCADDDAYS");l.setInteger(s)}else if(a===e.DateOffsetGranularity.WEEK){i.setFunctionName("CALCADDDAYS");l.setInteger(s*7)}else if(a===e.DateOffsetGranularity.MONTH){i.setFunctionName("CALCADDMONTHS");l.setInteger(s)}else if(a===e.DateOffsetGranularity.QUARTER){i.setFunctionName("CALCADDMONTHS");l.setInteger(s*3)}else if(a===e.DateOffsetGranularity.YEAR){i.setFunctionName("CALCADDYEARS");l.setInteger(s)}i.add(l);n=e.QCurrencyLookupValue.createByFormulaItem(null,i)}}return n};e.QInACurrencyTranslationItem.resolveTargetCurrency=function(t){let n;if(t.isDefaultCurrency()){let i=e.QInACurrencyTranslationItem.getCurrencyTranslationManager(t);n=e.QCurrencyLookupValue.createFixedByValue(null,e.XStringValue.create(i.getDefaultCurrency()))}else{n=t.getTargetCurrency()}return n};e.QInACurrencyTranslationItem.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;if(e.notNull(o)){let n=o.getQueryModel();i.putString("Name",o.getName());i.putString("Description",o.getText());i.putStringNotNullAndNotEmpty("ErrorHandling",e.QInAConverter.lookupCtErrorHandlingModeInA(o.getErrorHandling()));this.exportSpecificCurrencyTranslationProperty(t,i,"SourceCurrency",o.getSourceCurrency(),n);this.exportSpecificCurrencyTranslationProperty(t,i,"TargetCurrency",e.QInACurrencyTranslationItem.resolveTargetCurrency(o),n);this.exportSpecificCurrencyTranslationProperty(t,i,"ReferenceDate",e.QInACurrencyTranslationItem.resolveReferenceDate(o),n);this.exportSpecificCurrencyTranslationProperty(t,i,"RateName",e.QInACurrencyTranslationItem.resolveRateName(o),n)}return i};e.QInACurrencyTranslationItem.prototype.exportSpecificCurrencyTranslationProperty=function(t,n,i,r,o){if(e.notNull(r)){if(r.isFixed()){n.putNewStructure(i).putString("Fixed",r.getFixedValue().getStringRepresentation())}else if(r.isFieldBased()){n.putNewStructure(i).putString("DimensionAttribute",r.getFieldName())}else if(r.isFormulaBased()){let l=n.putNewStructure(i).putNewStructure("Formula");e.QInAFormulaMeasure.exportFormulaItem(t,r.getFormulaItem(),l,o)}else if(r.isVariableBased()){let l=r.getVariableName();if(e.isNull(o)){n.putNewStructure(i).putString("Variable",l)}else{let r=o.getVariable(l);if(e.notNull(r)){if(r.isCustomVariable()){let o=r.getExternalRepresentation();if(e.notNull(o)){r=o}let l=r.getValueByString();if(e.XStringUtils.isNotNullAndNotEmpty(l)){n.putNewStructure(i).putString("Fixed",l)}else{t.addError(e.ErrorCodes.NO_VALUE_EXTRACTED_FROM_FRONTEND_CURRENCY_TRANSLATION_VARIABLE,"Cannot Extract Variable Value from Currency Translation Variable")}}else{n.putNewStructure(i).putString("Variable",l)}}else{t.addError(e.ErrorCodes.CURRENCY_VARIABLE_NOT_AVAILABLE_FOR_CURRENT_QUERY_MODEL,"Currency variable not available for current query model")}}}}};e.QInACurrencyTranslationItem.prototype.getComponentType=function(){return e.OlapComponentType.CURRENCY_TRANSLATION_ITEM};e.QInACurrencyTranslationItem.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;if(e.notNull(l)&&e.XCollectionUtils.hasElements(n)){l.setMetadataDefined(true);l.setErrorHandling(e.QInAConverter.lookupCtErrorHandlingMode(n.getStringByKey("ErrorHandling")));l.setSourceCurrency(this.importSpecificCurrencyTranslationElement(t,l,e.XValueType.STRING,n,"SourceCurrency"));l.setTargetCurrency(this.importSpecificCurrencyTranslationElement(t,l,e.XValueType.STRING,n,"TargetCurrency"));l.setReferenceDate(this.importSpecificCurrencyTranslationElement(t,l,e.XValueType.DATE,n,"ReferenceDate"));l.setRateName(this.importSpecificCurrencyTranslationElement(t,l,e.XValueType.STRING,n,"RateName"))}return l};e.QInACurrencyTranslationItem.prototype.importSpecificCurrencyTranslationElement=function(t,n,i,r,o){if(r.containsKey(o)){let l=r.getStructureByKey(o);if(l.containsKey("Fixed")){let t=l.getStringByKey("Fixed");if(i===e.XValueType.STRING){return e.QCurrencyLookupValue.createFixedByValue(n,e.XStringValue.create(t))}if(i===e.XValueType.DATE){return e.QCurrencyLookupValue.createFixedByValue(n,e.XDate.createDateSafe(t))}return null}else if(l.containsKey("DimensionAttribute")){return e.QCurrencyLookupValue.createByFieldName(n,l.getStringByKey("DimensionAttribute"))}else if(l.containsKey("Formula")){let i=e.QInAFormulaMeasure.importFormulaMeasure(t,n.getQueryModel().getMeasureDimension(),l.getStructureByKey("Formula"),null,null);return e.QCurrencyLookupValue.createByFormulaItem(n,i)}else if(l.containsKey("Variable")){return e.QCurrencyLookupValue.createByVariableName(n,l.getStringByKey("Variable"))}}return null};e.QInACurrencyTranslationListManager=function(){};e.QInACurrencyTranslationListManager.prototype=new e.QInAComponentWithList;e.QInACurrencyTranslationListManager.prototype._ff_c="QInACurrencyTranslationListManager";e.QInACurrencyTranslationListManager.prototype.exportComponentWithList=function(t,n,i){let r=null;let o=n;let l=o.getMeasureCurrencyTranslationsForInaData();if(e.XCollectionUtils.hasElements(l)){r=e.PrFactory.createList();let n=l.size();for(let e=0;e<n;e++){let n=l.get(e);t.exportCurrencyTranslationElement(n,r.addNewStructure())}}return r};e.QInACurrencyTranslationListManager.prototype.getComponentType=function(){return e.OlapComponentType.CURRENCY_TRANSLATION_LIST};e.QInACurrencyTranslationListManager.prototype.getTagName=function(){return"CurrencyTranslations"};e.QInACurrencyTranslationListManager.prototype.importComponentWithList=function(t,n,i,r,o){let l=o.getQueryModel().getCurrencyTranslationManager();if(e.notNull(l)&&e.XCollectionUtils.hasElements(n)){let e=n.size();for(let i=0;i<e;i++){let e=n.getStructureAt(i);let r=e.getStringByKey("Name");let a=e.getStringByKey("Description");let s=l.addNewMeasureCurrencyTranslationBase(r,a);t.importCurrencyTranslationElement(e,s,o)}l.postImportInitialization()}return l};e.QInACurrencyTranslationManager=function(){};e.QInACurrencyTranslationManager.prototype=new e.QInAComponentWithStructure;e.QInACurrencyTranslationManager.prototype._ff_c="QInACurrencyTranslationManager";e.QInACurrencyTranslationManager.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;if(e.isNull(o)||!o.getModelCapabilities().supportsQueryCurrencyTranslation()){return i}let l=o.getCurrencyTranslationDetails();if(e.notNull(l)){if(e.XStringUtils.isNotNullAndNotEmpty(l.getCurrencyTranslationName())){if(l.getCurrencyTranslationOperation()===null){throw e.XException.createIllegalArgumentException("CurrencyTranslation Operation required.")}i.putString("Operation",l.getCurrencyTranslationOperation().getName());i.putString("Name",l.getCurrencyTranslationName());if(l.getCurrencyTranslationOperation()===e.CurrencyTranslationOperation.BOTH||l.getCurrencyTranslationOperation()===e.CurrencyTranslationOperation.TARGET){if(l.getCurrencyTranslationTarget()===null){throw e.XException.createIllegalArgumentException("CurrencyTranslation Target Currency required.")}i.putString("Target",l.getCurrencyTranslationTarget())}}else if(o.getCurrencyTranslationDetailsReset()){i.putString("Operation","");i.putString("Name","");i.putString("Target","");o.setCurrencyTranslationDetailsReset(false)}}return i};e.QInACurrencyTranslationManager.prototype.getComponentType=function(){return e.OlapComponentType.CURRENCY_TRANSLATION_MANAGER};e.QInACurrencyTranslationManager.prototype.getTagName=function(){return"CurrencyTranslation"};e.QInACurrencyTranslationManager.prototype.importComponentWithStructure=function(e,t,n,i,r){let o=n;return o};e.QInACustomHierarchyDefinition=function(){};e.QInACustomHierarchyDefinition.prototype=new e.QInAComponentWithStructure;e.QInACustomHierarchyDefinition.prototype._ff_c="QInACustomHierarchyDefinition";e.QInACustomHierarchyDefinition.prototype.addHierarchyElementToStructure=function(e,t,n,i){let r=t.getListByKey("NodeId");let o=r.size();r.addInteger(o);t.getListByKey("NodeName").addString(e.getName());t.getListByKey("ParentId").addInteger(n);if(e.isMemberElement()){t.getListByKey("Description").addString("");t.getListByKey("NodeType").addString(e.isNode()?i:"")}else{t.getListByKey("Description").addString(e.getName());t.getListByKey("NodeType").addString("1HIER_NODE_SIMPLE")}if(e.isNode()){let n=e.getChildNodes();let r=n.size();for(let e=0;e<r;e++){this.addHierarchyElementToStructure(n.get(e),t,o,i)}}};e.QInACustomHierarchyDefinition.prototype.addHierarchyNodesFromStructure=function(t,n){let i=e.PrUtils.getListProperty(n,"NodeId");let r=e.PrUtils.getListProperty(n,"ParentId");let o=e.PrUtils.getListProperty(n,"NodeName");let l=e.PrUtils.getListProperty(n,"NodeType");let a=e.PrUtils.getListSize(i,0);if(e.PrUtils.isListEmpty(i)||e.PrUtils.isListEmpty(r)||e.PrUtils.isListEmpty(o)||e.PrUtils.isListEmpty(l)||r.size()!==a||o.size()!==a||l.size()!==a){return}let s=e.XSimpleMap.create();for(let n=0;n<a;n++){let a=i.getIntegerAt(n);let u=o.getStringAt(n);let p=l.getStringAt(n);let g=r.getIntegerAt(n);let m=g===-1?t:s.getByKey(e.XIntegerValue.create(g));if(e.notNull(m)){if(e.XString.isEqual(p,"1HIER_NODE_SIMPLE")){s.put(e.XIntegerValue.create(a),m.addTextNode(u))}else{m.addMemberNode(u)}}}e.XObjectExt.release(s)};e.QInACustomHierarchyDefinition.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=e.PrFactory.createStructure();l.putString("Name",o.getDimensionName());if(t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){l.putString("System",o.getSystemName());l.putString("DataSource",o.getDataSourceName())}else{l.putString("Axis","Free")}let a=e.PrFactory.createStructure();this.exportCustomHierarchy(o,a);l.put("Hierarchy",a);let s=e.PrFactory.createStructure();let u=s.putNewList("Dimensions");u.add(l);return s};e.QInACustomHierarchyDefinition.prototype.exportCustomHierarchy=function(t,n){let i="";let r=t.getName();let o=t.getDescription();n.putString("Name",e.XStringUtils.isNotNullAndNotEmpty(r)?r:i);n.putString("Version",i);n.putString("DueDate",i);n.putString("Description",e.notNull(o)?o:i);n.putBoolean("IsTransient",true);n.putBoolean("NoRestNodes",true);n.put("Nodes",this.getHierarchyNodesAsStructure(t))};e.QInACustomHierarchyDefinition.prototype.getComponentType=function(){return e.OlapComponentType.CUSTOM_HIERARCHY_DEFINITION};e.QInACustomHierarchyDefinition.prototype.getHierarchyNodesAsStructure=function(t){let n=e.PrFactory.createStructure();n.putNewList("NodeId");n.putNewList("NodeName");n.putNewList("Description");n.putNewList("NodeType");n.putNewList("ParentId");let i=t.getChildNodes();let r=i.size();for(let e=0;e<r;e++){this.addHierarchyElementToStructure(i.get(e),n,-1,t.getDimensionName())}return n};e.QInACustomHierarchyDefinition.prototype.getTagName=function(){return null};e.QInACustomHierarchyDefinition.prototype.importComponentWithStructure=function(t,n,i,r,o){if(!t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){return null}let l=e.PrUtils.getListProperty(n,"Dimensions");let a=e.PrUtils.getStructureElement(l,0);if(e.notNull(a)){let n=a.getStringByKey("System");let i=a.getStringByKey("DataSource");let r=a.getStringByKey("Name");let o=a.getStructureByKey("Hierarchy");if(e.notNull(o)&&e.XStringUtils.isNotNullAndNotEmpty(n)&&e.XStringUtils.isNotNullAndNotEmpty(r)){let l=true;let a=t.getApplication();if(e.notNull(a)){let t=a.getSystemLandscape().getSystemDescription(n);l=e.isNull(t)?true:t.getSystemType().isTypeOf(e.SystemType.ABAP)}let s=e.QCustomHierarchyDefinition.createByData(n,i,r,o.getStringByKey("Description"),l);s.setName(o.getStringByKey("Name"));this.addHierarchyNodesFromStructure(s,o.getStructureByKey("Nodes"));return s}}return null};e.QInADataCell=function(){};e.QInADataCell.prototype=new e.QInAComponentWithStructure;e.QInADataCell.prototype._ff_c="QInADataCell";e.QInADataCell.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;i.putString("Name",o.getName());let l=o.getDisaggregationMode();e.QInAExportUtil.setNameIfNotNull(i,"DisaggregationMode",e.isNull(l)?e.DisaggregationMode.NONE:l);let a=o.getDisaggregationRefCell();i.putString("DisaggregationReferenceCellName",e.isNull(a)?"0":a.getName());if(o.exportingWithCompleteDefinition()||o.hasPropertyChangedForInAData(e.QDataCellProperties.QY_SCALING_FACTOR)){i.putInteger("ScalingFactor",o.getScalingFactor())}if(o.exportingWithCompleteDefinition()||o.hasPropertyChangedForInAData(e.QDataCellProperties.QY_DECIMAL_PLACES)){i.putInteger("Decimals",o.getDecimalPlaces())}if(o.exportingWithCompleteDefinition()||o.hasPropertyChangedForInAData(e.QDataCellProperties.QY_SIGN_REVERSAL)){i.putBoolean("SignReversal",o.hasSignReversal())}if(o.exportingWithCompleteDefinition()||o.hasPropertyChangedForInAData(e.QDataCellProperties.QY_CUMULATION)){i.putBoolean("Cumulation",o.isCumulated())}i.putBoolean("Emphasized",o.isEmphasized());let s=o.getBaseValueType();let u=e.QInAConverter.lookupIntByValueType(s);i.putInteger("CellValueType",u);let p=i.putNewList("DimensionMemberReferences");let g=o.getReferenceStructureElement1();if(e.notNull(g)){p.addString(g.getName());g=o.getReferenceStructureElement2();if(e.notNull(g)){p.addString(g.getName())}}this.exportRestrictedMeasureSignReversal(t,i,o);if(t.m_mode===e.QModelFormat.INA_METADATA){i.putStringNotNullAndNotEmpty("SemanticObject",o.getSemanticObject())}return i};e.QInADataCell.prototype.exportRestrictedMeasureSignReversal=function(t,n,i){if(t.getMode()!==e.QModelFormat.INA_DATA||!i.getQueryModel().getSystemType().isTypeOf(e.SystemType.BW)||i.getReferenceStructureElement1()===null||i.getReferenceStructureElement1().getOlapComponentType()!==e.MemberType.RESTRICTED_MEASURE){return}let r=i.getReferenceStructureElement1();if(!r.isAutoSignFlip()){return}let o=r.getQueryModel();let l=r.getMemberForSignFlip(o);if(e.notNull(l)){let t=o.getMeasureDimension();let i=t.getStructureMember(l);if(e.notNull(i)){let t=i.getQueryDataCells();if(!t.isEmpty()){let i=t.get(0);if(e.notNull(i)){n.putBoolean("SignReversal",i.hasSignReversal())}}}}};e.QInADataCell.prototype.getComponentType=function(){return e.OlapComponentType.DATA_CELL};e.QInADataCell.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=o.getQueryModel();let a=l.getQueryDataCellsBase();let s=a.newQueryDataCell(n.getStringByKey("Name"));s.setSignReversal(n.getBooleanByKeyExt("SignReversal",false));s.setEmphasized(n.getBooleanByKeyExt("Emphasized",false));s.setCumulation(n.getBooleanByKeyExt("Cumulation",false));s.setInputEnabled(n.getBooleanByKeyExt("InputEnabled",false));s.setDisaggregationMode(e.DisaggregationMode.lookupWithDefault(n.getStringByKeyExt("DisaggregationMode",null),e.DisaggregationMode.NONE));s.setDisaggregationRefCellName(n.getStringByKeyExt("DisaggregationReferenceCellName",null));s.setScalingFactor(n.getIntegerByKeyExt("ScalingFactor",1));s.setDecimalPlaces(n.getIntegerByKeyExt("Decimals",0));let u=n.getIntegerByKeyExt("CellValueType",0);let p=e.QInAConverter.lookupValueTypeByInt(u);s.setBaseCellValueType(p);if(p===e.XValueType.DIMENSION_MEMBER){let e=n.getStringByKey("CellDimensionReference");s.setDimensionReference(l.getDimensions().getByKey(e))}let g=n.getListByKey("DimensionMemberReferences");if(e.notNull(g)){for(let e=0;e<g.size();e++){s.addDimensionMemberReference(g.getStringAt(e))}}if(t.m_mode===e.QModelFormat.INA_METADATA&&s.getReferenceStructureElement1()===null&&s.getReferenceStructureElement2()===null){a.removeElement(s);return null}if(n.hasStringByKey("SemanticObject")){s.setSemanticObject(n.getStringByKey("SemanticObject"))}return s};e.QInADataCellsAll=function(){};e.QInADataCellsAll.prototype=new e.QInAComponentWithList;e.QInADataCellsAll.prototype._ff_c="QInADataCellsAll";e.QInADataCellsAll.prototype.exportComponentWithList=function(t,n,i){let r=n;let o=null;let l=r.getModelCapabilities();if(l.supportsDataCells()&&r.getQueryManager().getInitSettings().isRequestingDataCells()){let n=r.getQueryDataCells();o=e.PrFactory.createList();let i=n.size();for(let e=0;e<i;e++){let i=t.exportDataCell(n.get(e),null);o.add(i)}}return o};e.QInADataCellsAll.prototype.getComponentType=function(){return e.OlapComponentType.DATA_CELLS};e.QInADataCellsAll.prototype.getTagName=function(){return"QueryDataCells"};e.QInADataCellsAll.prototype.importComponentWithList=function(t,n,i,r,o){let l=o.getModelCapabilities();let a=o.getQueryModel();if(l.supportsDataCells()&&t.m_mode!==e.QModelFormat.INA_DATA_REINIT&&a.getQueryManager().getInitSettings().isRequestingDataCells()){let i=a.getQueryDataCellsBase();i.clear();if(e.notNull(n)){for(let e=0;e<n.size();e++){t.importDataCell(n.getStructureAt(e),a)}}}return null};e.QInADimension=function(){};e.QInADimension.prototype=new e.QInAComponentWithStructure;e.QInADimension.prototype._ff_c="QInADimension";e.QInADimension.exportFieldLayout=function(t,n,i){let r;let o=t.m_modelContext;if(t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY_DATA)){n.putString("FieldLayoutType",i.getFieldLayoutType().toString());e.QInADimension.exportRsFields(n,i)}if(i.getFieldLayoutTypeExt(o)===e.FieldLayoutType.FIELD_BASED){r=i.getFieldsExt(o)}else{r=i.getAttributesExt(o).getEffectiveFields(o)}let l=o===e.QContextType.RESULT_SET&&(i.getQueryModel()===null||t.isAbap(i.getQueryModel()));let a=n.putNewList("Attributes");e.QInADimension.exportListOfFields2(r,a,t,false,null,l,null);let s=e.QInADimension.getHiddenFields(t,i,r);e.QInADimension.exportListOfFields2(s,a,t,true,null,l,null)};e.QInADimension.exportFieldLayout2=function(t,n,i){let r;let o;let l=t.m_modelContext;let a=l===e.QContextType.RESULT_SET&&(i.getQueryModel()===null||t.isAbap(i.getQueryModel()));let s=i.getQueryManager().getActiveResultSetContainer();let u=n.putNewList("Attributes");if(i.getFieldLayoutTypeExt(l)===e.FieldLayoutType.FIELD_BASED){r=i.getFieldsExt(l);e.QInADimension.exportListOfFields2(r,u,t,false,i,a,s);o=e.QInADimension.getHiddenFields(t,i,r);e.QInADimension.exportListOfFields2(o,u,t,true,i,a,s)}else{let n=i.getAttributesExt(l);let o=n.size();let p;let g;let m=e.XListOfNameObject.create();for(p=0;p<o;p++){g=n.get(p);r=g.getFieldsExt(l);e.QInADimension.exportListOfFields2(r,u,t,false,g,a,s);m.addAll(r)}for(p=0;p<o;p++){g=n.get(p);let r=e.QInADimension.getHiddenFields(t,i,m);e.QInADimension.exportListOfFields2(r,u,t,true,g,a,s)}}};e.QInADimension.exportListOfFields2=function(t,n,i,r,o,l,a){let s=e.QImExFlag.DEFAULT_ALL;let u=e.XMath.binaryOr(s,e.QImExFlag.HIDE);let p=null;if(e.notNull(o)){p=o.getFieldByPresentationType(e.PresentationType.QUERY_TEXT)}let g=i.getMode();let m=g===e.QModelFormat.INA_DATA||g===e.QModelFormat.INA_PERSISTED_QUERY_DATA;let c=g===e.QModelFormat.INA_VALUE_HELP;let y=false;if(e.notNull(a)&&a.getResultSetPersistenceIdentifier()!==null){let t=o.getDimension().getQueryModel();if(e.notNull(t)&&!e.QInAOptions.isCubeCacheQuery(t)&&l){y=true}}let d=t.size();for(let a=0;a<d;a++){let g=t.get(a);if(l&&g.getPresentationType().isTypeOf(e.PresentationType.HIERARCHY_PATH)){continue}if(c&&g.isExcludedFromValueHelp()){continue}if(e.PrUtils.getStructureWithKeyValuePair(n,"Name",g.getName())===null){if(r){n.add(i.exportComponent(e.OlapComponentType.FIELD,g,null,u))}else{if(m&&e.notNull(p)&&g===o.getDefaultResultSetTextField()&&!g.haveAnyInAPropertiesChanged()&&!o.getDimension().getShouldUseActualTextField()&&o.getDataSource().getType()===e.MetaObjectType.QUERY&&!y){g=p}n.add(i.exportComponent(e.OlapComponentType.FIELD,g,null,s))}}}};e.QInADimension.exportQdReadMode=function(t,n,i){let r;let o=t.getMode()===e.QModelFormat.INA_VALUE_HELP;let l=t.isAbap(n);let a=null;if(o){r=e.QContextType.SELECTOR;a=e.QDimensionProperties.QY_SELECTOR_READ_MODE}else{r=e.QContextType.RESULT_SET;a=e.QDimensionProperties.QY_READ_MODE}let s=n.getModelCapabilities()!==null&&n.getModelCapabilities().supportsPersistedInA();if(!s||n.hasPropertyChanged(a)){let a=e.QInADimension.getReadMode(n,r);if(e.isNull(a)){t.addError(e.ErrorCodes.INVALID_DIMENSION,e.XStringUtils.concatenate3("No read mode given for dimension '",n.getName(),"'!"));return}let s;if(l){if(o){s="ReadMode"}else{s="ResultSetReadMode"}}else{s="ReadMode"}let u=e.QInAConverter.lookupReadModeInA(a);i.putStringNotNull(s,u)}if(l&&o){i.putStringNotNull("VariableReadMode",e.QInAConverter.lookupReadModeInA(e.QInADimension.getReadMode(n,e.QContextType.VARIABLE)))}};e.QInADimension.exportQdReadModeLegacy=function(t,n,i){let r;let o;let l=t.isAbap(n);if(t.getMode()===e.QModelFormat.INA_VALUE_HELP){r=e.QContextType.SELECTOR;o="SelectorReadMode";if(l){i.putStringNotNull("VariableReadMode",e.QInAConverter.lookupReadModeInA(e.QInADimension.getReadMode(n,e.QContextType.VARIABLE)))}}else{r=e.QContextType.RESULT_SET;o="ResultSetReadMode"}let a=e.QInADimension.getReadMode(n,r);if(e.isNull(a)){t.addError(e.ErrorCodes.INVALID_DIMENSION,e.XStringUtils.concatenate3("No read mode given for dimension '",n.getName(),"'!"));return}let s=e.QInAConverter.lookupReadModeInA(a);if(l&&!t.getSession().hasFeature(e.FeatureToggleOlap.NO_NON_EMPTY)){i.putBoolean("NonEmpty",a===e.QMemberReadMode.BOOKED)}i.putStringNotNull("ReadMode",s);if(l){i.putStringNotNull(o,s)}};e.QInADimension.exportRsFields=function(e,t){let n=e.putNewList("ResultSetFields");let i=t.getResultSetFields();for(let e=0;e<i.size();e++){n.addString(i.get(e).getName())}};e.QInADimension.getHiddenFields=function(t,n,i){let r;if(t.m_modelContext===e.QContextType.SELECTOR){let t=e.XList.create();t.add(n.getKeyFieldExt(e.QContextType.SELECTOR));let i=n.getHierarchyTextField();if(e.notNull(i)&&n.isSelectorHierarchyActive()){t.add(i)}r=t}else{r=n.getFieldsListByActiveUsageType()}let o=e.XList.create();o.addAll(r);let l=n.getKeyFieldExt(t.m_modelContext);let a=n.getTextField();if(a===l){a=null}let s=n.getFieldByPresentationType(e.PresentationType.QUERY_TEXT);let u=n.getClientDefaultTextField();let p=i.size();for(let n=0;n<p;n++){let r=i.get(n);if(e.notNull(a)&&e.notNull(s)&&(r===s||e.XString.isEqual(r.getName(),s.getName()))){r=a}else if(t.m_modelContext===e.QContextType.RESULT_SET&&e.notNull(a)&&e.notNull(u)&&(r===u||e.XString.isEqual(r.getName(),u.getName()))){r=a}o.removeElement(r)}let g=null;if(n.getQueryModel()!==null&&n.getQueryModel().hasQuickActionManager()){g=n.getQueryModel().getQuickActionManager().getFieldsForDimension(n)}for(let t=0;t<o.size();){let n=o.get(t);if(n!==l){if(n!==a){if(!n.isAlwaysRequested()){if(!n.usedInFieldOrComplexSorting()&&!e.XCollectionUtils.containsElement(g,n)){o.removeAt(t);continue}}}}t++}if(t.getSession().hasFeature(e.FeatureToggleOlap.DONT_ALWAYS_REQUEST_TEXTFIELD)||e.notNull(a)&&a.getTagging().containsKey(e.QTransientConstants.HIDE_TEXT_FIELD)){o.removeElement(a)}else{e.QInADimension.moveFieldToStart(o,a)}e.QInADimension.moveFieldToStart(o,l);let m=t.getMode().isDataBlending();let c=n.getQueryManager();if(!m&&e.notNull(c)&&c.getModelCapabilities().supportsEncodedResultset()){let e=c.getActiveResultSetContainer();m=e.getResultSetPersistenceIdentifier()!==null&&!e.isRemotePreQuery()}let y=n.getDimensionType().isTypeOf(e.DimensionType.ABSTRACT_STRUCTURE)&&e.QInADimension.queryModelHasCustomMeasures(n.getDimensionAccessor());if(!m&&y){let t=n.getName();let i=n.getFieldByName(e.XStringUtils.concatenate2(t,".ID"));if(e.notNull(i)){o.add(i)}}return o};e.QInADimension.getReadMode=function(t,n){let i=t.getReadMode(n);return i===e.QMemberReadMode.DEFAULT_VALUE?t.getReadModeDefault(n):i};e.QInADimension.importDimReadModes=function(t,n,i,r){if(e.notNull(n)){if(t.isAbap(n)){e.QInADimension.importReadModeSettings(r,i,e.QContextType.RESULT_SET,"ResultSetReadMode");e.QInADimension.importReadModeSettings(r,i,e.QContextType.VARIABLE,"VariableReadMode")}else{e.QInADimension.importReadModeSettings(r,i,e.QContextType.RESULT_SET,"ResultSetMemberReadMode")}}e.QInADimension.importReadModeSettings(r,i,e.QContextType.SELECTOR,"SelectorReadMode")};e.QInADimension.importReadModeSettings=function(t,n,i,r){let o=t.getStringByKey(r);if(e.notNull(o)){let t=e.QInAConverter.lookupReadMode(o);if(e.notNull(t)&&t!==e.QMemberReadMode.UNDEFINED){n.setReadMode(i,t)}}let l=n.getReadMode(i);if(e.isNull(l)){let t=n.getReadModeDefault(i);if(e.notNull(t)&&t!==e.QMemberReadMode.UNDEFINED){n.setReadMode(i,t)}else if(e.QContextType.VARIABLE===i){let e=n.getSupportedReadModes(i);n.setReadMode(i,e.getValuesAsReadOnlyList().get(0))}}};e.QInADimension.importRsAttributeNodes=function(t,n){let i=t.getListByKey("ResultSetAttributeNodes");if(e.isNull(i)){i=t.getListByKey("DefaultResultSetAttributeNodes")}if(e.notNull(i)){let t=n.getResultSetAttributes();t.clear();let r=i.size();for(let o=0;o<r;o++){let r=i.getStringAt(o);let l=n.getAttributeByName(r);if(e.notNull(l)){t.add(l)}}}};e.QInADimension.importRsFields=function(t,n){let i=t.getListByKey("ResultSetFields");if(e.isNull(i)){i=t.getListByKey("DefaultResultSetAttributes")}if(e.notNull(i)){let t=n.getResultSetFields();t.clear();let r=i.size();for(let o=0;o<r;o++){let r=i.getStringAt(o);let l=n.getFieldByName(r);if(e.notNull(l)){t.add(l)}}}};e.QInADimension.moveFieldToStart=function(e,t){let n=e.size();for(let i=0;i<n;i++){let n=e.get(i);if(n===t){if(i!==0){e.removeAt(i);e.insert(0,n)}break}}};e.QInADimension.queryModelHasCustomMeasures=function(t){let n=t.getMeasureDimension().getAllStructureMembers();let i=e.XStream.of(n).anyMatch(t=>t.getMemberType()!==e.MemberType.BASIC_MEASURE);let r=false;let o=t.getNonMeasureDimension();if(e.notNull(o)){r=e.XStream.of(o.getAllStructureMembers()).anyMatch(t=>t.getMemberType()!==e.MemberType.BASIC_MEASURE)}return i||r};e.QInADimension.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;i.putString("Name",o.getName());let l=o.getQueryManager();let a=e.notNull(l)&&l.getConnection().isInAMergeProcessingEnabled();let s=t.getMode()===e.QModelFormat.INA_PERSISTED_QUERY_DATA||t.getOriginalMode()===e.QModelFormat.INA_PERSISTED_QUERY_DATA;let u=a&&s;let p=t.getMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING||t.getOriginalMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING||u;if(p){if(o.isMeasureStructure()){i.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_MEASURE_STRUCTURE)}else if(o.getMetadata().isSecondaryStructure()){i.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_SECONDARY_STRUCTURE)}else if(o.getDimensionType()===e.DimensionType.ACCOUNT){i.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_ACCOUNT_DIMENSION)}}let g=t.getSession();let m=g.hasFeature(e.FeatureToggleOlap.NO_MEASURE_READMODE)&&o.isStructure();if(!m){if(g.hasFeature(e.FeatureToggleOlap.NO_DUPLICATED_READMODE)){e.QInADimension.exportQdReadMode(t,o,i)}else{e.QInADimension.exportQdReadModeLegacy(t,o,i)}}let c=t.m_mode===e.QModelFormat.INA_VALUE_HELP?e.AxisType.ROWS:o.getAxisType();i.putString("Axis",e.QInAConverter.lookupAxisTypeInA(c));let y=o.isDesignTimeMode();if(y){i.putBoolean("DesignTimeMode",y)}let d=o.getSkipEntries();if(d>0){i.putInteger("Skip",d)}let A=o.getTopEntries();if(A>0){i.putInteger("Top",A)}if(o.supportsCumulative()&&!t.getMode().isDataBlending()){i.putBoolean("IsCummulative",o.isCumulative())}if(!o.getTagging().containsKey(e.QInAUniversalDisplayHierarchies.UDH_TO_LBH_CONVERSTION_TAG)){t.exportHierarchy(o,i)}if(t.m_mode!==e.QModelFormat.INA_VALUE_HELP){if(o.supportsTotals()){t.exportTotals(o,i)}if(o.getStructureLayout()!==null){t.exportMembers(o,i)}}if(o.getModelCapabilities()!==null&&o.getModelCapabilities().supportsPersistedInA()){e.QInADimension.exportFieldLayout2(t,i,o)}else{e.QInADimension.exportFieldLayout(t,i,o)}return i};e.QInADimension.prototype.getComponentType=function(){return e.OlapComponentType.ABSTRACT_DIMENSION};e.QInADimension.prototype.importAlternativeFieldValues=function(t,n){let i=t.getListByKey("AlternativeFieldValues");if(e.notNull(i)){let t=i.size();for(let r=0;r<t;r++){let t=i.get(r);if(t.isStructure()){let i=t;let r=i.getStringByKey("ValueType");let o=e.QInAConverter.lookupValueType(r);let l=i.getStringByKey("Value");let a=null;if(o===e.XValueType.INTEGER){a=e.XIntegerValue.create(e.XInteger.convertFromStringWithRadix(l,10))}else if(o===e.XValueType.LONG){a=e.XLongValue.create(e.XLong.convertFromString(l))}else if(o===e.XValueType.DOUBLE){a=e.XDoubleValue.create(e.XDouble.convertFromString(l))}else if(o===e.XValueType.STRING){a=e.XStringValue.create(l)}else if(o===e.XValueType.DATE){a=e.XDate.createDateFromIsoFormat(l)}else if(o===e.XValueType.DATE_TIME){a=e.XDateTime.createDateTimeFromIsoFormat(l)}if(e.notNull(a)){let e=i.getBooleanByKey("HierarchyKey");let t=i.getStringByKey("MemberKey");let r=i.getStringByKey("FieldName");let o=i.getStringByKey("Language");n.setAlternativeFieldValue(e,t,r,a,o)}}}}};e.QInADimension.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=o.getQueryModel();let a=i;if(e.isNull(a)){let t=n.getStringByKey("Name");if(e.notNull(l)){a=l.getDimensionManagerBase().getDimensionByNameInternal(t)}if(e.isNull(a)){return null}}if(t.m_mode!==e.QModelFormat.INA_DATA_REINIT){a.setSelectorGettingInterval(false);e.QInADimension.importDimReadModes(t,l,a,n);t.importMembers(n,a,o);this.importFieldsLayout(t,n,a,o);this.importQdFieldTransformations(t,n,a);t.importHierarchy(a,n);if(e.notNull(l)&&!l.getModelCapabilities().supportsExtendedSort()){let t=l.getModelCapabilities();if(t.supportsDimensionSorting(a,e.SortType.MEMBER_KEY)){let t=n.getIntegerByKeyExt("SortOrder",e.QInAConverter.lookupSortDirectionInA(e.XSortDirection.DEFAULT_VALUE));let i=e.QInAConverter.lookupSortDirection(t);a.getResultSetSorting().setDirection(i)}}if(t.m_capabilities.supportsCummulative()&&a.supportsCumulative()){a.setIsCumulative(n.getBooleanByKeyExt("IsCummulative",false))}let i=n.getIntegerByKeyExt("Skip",0);a.setSkipEntries(i);let r=n.getIntegerByKeyExt("Top",0);a.setTopEntries(r);let s=n.getStringByKey("ReadMode");if(e.notNull(s)){let t=e.QInAConverter.lookupReadMode(s);a.setReadModeGraceful(e.QContextType.RESULT_SET,t)}t.importTotals(n,a.getResultStructureControllerBase(),o);this.importAlternativeFieldValues(n,a)}else{let i=a.getVariableContainer();if(e.notNull(i)){let r=i.getVariables();let o=r.size();for(let i=0;i<o;i++){let o=r.get(i);if(o.getVariableType()===e.VariableType.HIERARCHY_NAME_VARIABLE&&e.XString.isEqual(o.getHierarchyNameDimension().getName(),a.getName())){t.importHierarchy(a,n);break}}}}return a};e.QInADimension.prototype.importFieldsLayout=function(t,n,i,r){let o;let l=n.getStringByKey("FieldLayoutType");if(e.notNull(l)){o=e.QInAConverter.lookupFieldLayoutType(l);let a=n.getListByKey("FieldSettings");if(e.notNull(a)){let n=a.size();for(let o=0;o<n;o++){t.importComponent(e.OlapComponentType.FIELD,a.getStructureAt(o),null,i,r)}}let s=n.getListByKey("AttributeSettings");if(e.notNull(s)){let e=s.size();for(let n=0;n<e;n++){let e=s.getStructureAt(n);t.importAttribute(e,i,r)}}e.QInADimension.importRsFields(n,i);e.QInADimension.importRsAttributeNodes(n,i);i.setFieldLayoutType(o)}else{let r=n.getListByKey("ResultSetFields");if(e.isNull(r)){r=n.getListByKey("DefaultResultSetAttributes")}if(e.notNull(r)){o=e.FieldLayoutType.ATTRIBUTE_BASED;if(i.supportsFieldLayoutType(o)){i.setFieldLayoutType(o)}o=i.getFieldLayoutType();if(o===e.FieldLayoutType.FIELD_BASED){let o=i.getResultSetFields();o.clear();let l=i.getMainAttribute();if(e.notNull(l)){l.getResultSetFields().clear()}let a;let s;let u=r.size();let p=e.XHashSetOfString.create();for(s=0;s<u;s++){a=r.getStringAt(s);if(!p.contains(a)){p.add(a);let n=i.getFieldByName(a);if(e.isNull(n)){t.addError(e.ErrorCodes.INVALID_TOKEN,e.XStringUtils.concatenate2("Field not found: ",a));return}o.add(n)}}r=n.getListByKey("Attributes");if(e.notNull(r)){u=r.size();for(s=0;s<u;s++){let n=r.getStructureAt(s);a=n.getStringByKey("Name");if(!p.contains(a)){p.add(a);let n=i.getFieldByNameOrAlias(a);if(e.isNull(n)){t.addError(e.ErrorCodes.INVALID_TOKEN,e.XStringUtils.concatenate2("Field not found: ",a));return}o.add(n)}}}}}else if(i.isStructure()){i.resetFieldsToDefault()}}};e.QInADimension.prototype.importQdFieldTransformations=function(t,n,i){let r=n.getListByKey("Fields");if(e.notNull(r)){let n=r.size();for(let o=0;o<n;o++){let n=r.get(o);if(n.isStructure()){let r=n.getStringByKey("Name");let o=n.getStringByKey("TextTransformation");if(e.XStringUtils.isNotNullAndNotEmpty(r)&&e.XStringUtils.isNotNullAndNotEmpty(o)){let n=i.getFieldByName(r);let l=e.TextTransformationType.lookupName(o);if(e.notNull(n)&&e.notNull(l)){if(l.isTypeOf(e.TextTransformationType.SPATIAL_TRANSFORMATION)&&!t.m_capabilities.supportsSpatialTransformation()){continue}n.setTextTransformation(l)}}}}}};e.QInADimensionsAll=function(){};e.QInADimensionsAll.prototype=new e.QInAComponentWithList;e.QInADimensionsAll.prototype._ff_c="QInADimensionsAll";e.QInADimensionsAll.exportAxisDimensions=function(t,n,i,r){let o=n.getDimensionCount();if(!e.QInAUniversalDisplayHierarchies.isHierarchyConversionRequired(t,n)){for(let l=0;l<o;l++){let o=n.get(l);e.QInADimensionsAll.exportDimension(t,o,i,r)}}else{let l=e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(n).getName();let a=e.QInAUniversalDisplayHierarchies.getDimensionNames(t,n);for(let s=0;s<o;s++){let o=n.get(s);let u=o.getName();if(e.XString.isEqual(u,l)){e.QInADimensionsAll.exportUdhDimensionsForConvertedLbh(t,n,i,a,r,o)}else if(!a.contains(u)){e.QInADimensionsAll.exportDimension(t,o,i,r)}}}};e.QInADimensionsAll.exportAxisDimensionsWithHeuristic=function(t,n,i,r,o){let l=n.getQueryModel();let a=t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY_DATA);let s=l.isOptimizedExportModeActive();let u=n.getDimensionCount();for(let l=0;l<u;l++){let u=n.get(l);if(s&&u.isIgnoredOnOptimizedExport()){continue}if(a&&!r.contains(u.getName())){continue}e.QInADimensionsAll.exportDimension(t,u,i,o)}};e.QInADimensionsAll.exportDimension=function(t,n,i,r){if(!r.contains(n.getName())){r.add(n.getName());let o=t.exportDimension(n,null);if(e.notNull(o)){i.add(o);return o}}return null};e.QInADimensionsAll.exportTechnicalDimension=function(t,n,i,r){if(!t.m_capabilities.supportsUniversalModel()){return}let o=n.getQueryCellManager();if(o.isEmpty()){return}let l=n.getDimensionByName("$$Cells$$");e.QInADimensionsAll.exportDimension(t,l,i,r)};e.QInADimensionsAll.exportUdhDimensionsForConvertedLbh=function(t,n,i,r,o,l){let a=e.QInADimensionsAll.getReadMode(t,l);let s=r.size();for(let u=0;u<s;u++){let s=n.getQueryModel().getDimensionByName(r.get(u));s.stopEventing();let p=s.getAxisBase();let g=s.isHierarchyActive();let m=e.QInADimensionsAll.getReadMode(t,s)!==a;let c=m?s.getReadMode(t.m_modelContext):null;let y=s.getResultVisibilityByElement(e.ResultStructureElement.TOTAL);s.setAxis(n);if(g){s.setHierarchyActive(false);s.getTagging().put(e.QInAUniversalDisplayHierarchies.UDH_TO_LBH_CONVERSTION_TAG,"true")}if(m){s.setReadModeGraceful(t.m_modelContext,a)}s.setResultVisibilityByElement(e.ResultStructureElement.TOTAL,u===0?l.getResultVisibilityByElement(e.ResultStructureElement.TOTAL):e.ResultVisibility.VISIBLE);let d=e.QInADimensionsAll.exportDimension(t,s,i,o);if(m&&e.notNull(d)&&!d.containsKey("ResultSetReadMode")){d.putStringNotNull("ResultSetReadMode",e.QInAConverter.lookupReadModeInA(a))}s.setAxis(p);if(g){s.setHierarchyActive(true);s.getTagging().remove(e.QInAUniversalDisplayHierarchies.UDH_TO_LBH_CONVERSTION_TAG)}if(e.notNull(c)){s.setReadMode(t.m_modelContext,c)}s.setResultVisibilityByElement(e.ResultStructureElement.TOTAL,y);s.resumeEventing()}};e.QInADimensionsAll.getReadMode=function(t,n){let i=n.getReadMode(t.m_modelContext);return e.notNull(i)?i:n.getReadModeDefault(t.m_modelContext)};e.QInADimensionsAll.prototype.exportComponentWithList=function(t,n,i){let r=e.PrFactory.createList();if(t.m_mode!==e.QModelFormat.INA_VALUE_HELP){let i=n;let o=i.getModelCapabilities();let l=e.XHashSetOfString.create();e.QInADimensionsAll.exportAxisDimensions(t,i.getAxis(e.AxisType.ROWS),r,l);e.QInADimensionsAll.exportAxisDimensions(t,i.getAxis(e.AxisType.COLUMNS),r,l);if(t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){let n=e.XHashSetOfString.create();if(t.m_mode===e.QModelFormat.INA_REPOSITORY_DATA||t.m_mode===e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){e.DimensionUsageAnalyzer2.setupHeuristic(i,n)}e.QInADimensionsAll.exportAxisDimensionsWithHeuristic(t,i.getAxis(e.AxisType.FREE),r,n,l)}else if(t.m_mode.isTypeOf(e.QModelFormat.INA_DATA)){let n=null;let a=o.supportsCubeBlendingOutOfContext()&&i.isBlendingModel();let s=i.getDataSource().getType()===e.MetaObjectType.PLANNING&&t.getSession().hasFeature(e.FeatureToggleOlap.EXPORT_FREE_AXIS_FOR_PLANNING);let u=i.getAxis(e.AxisType.FREE);let p=u.size();let g=t.isAbap(i);for(let o=0;o<p;o++){let p=u.get(o);let m=p.getDimensionType();if(m===e.DimensionType.MEASURE_STRUCTURE||m===e.DimensionType.SECONDARY_STRUCTURE){let n=this.exportDimensionIfOnFreeAxis(p);if(n){e.QInADimensionsAll.exportDimension(t,p,r,l)}}else if(m===e.DimensionType.ACCOUNT){let n=this.exportDimensionIfOnFreeAxis(p);if(n){e.QInADimensionsAll.exportDimension(t,p,r,l)}}else if(p.getTagging().containsKey(e.QTransientConstants.TAG_IS_INTEROP_GENERATED)){if(e.isNull(n)){n=i.getConvenienceCommands().getCalculatedDimensionsInUse()}if(n.contains(p.getName())){e.QInADimensionsAll.exportDimension(t,p,r,l)}}else if(a||(g||s)&&(p.isHierarchyActive()||p.hasPlaceHolderForHierarchyInfo())&&!this.hasCustomHierarchy(p)||m.isTypeOf(e.DimensionType.CALCULATED_DIMENSION)&&(m!==e.DimensionType.FILTER_ACROSS_MODELS_CALCULATED_DIMENSION&&m!==e.DimensionType.MEASURE_BASED_FILTER_CALCULATED_DIMENSION&&!p.getTagging().containsKey("isFAM")||t.m_mode!==e.QModelFormat.INA_DATA_BLENDING_SOURCE_METADATA)){e.QInADimensionsAll.exportDimension(t,p,r,l)}}e.QInADimensionsAll.exportTechnicalDimension(t,i,r,l)}}return r};e.QInADimensionsAll.prototype.exportDimensionIfOnFreeAxis=function(t){let n=t.getQueryModel();let i=e.XHashSetOfString.create();let r=n.getFilter();if(r.isDynamicFilterInitialized()){e.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(r.getDynamicFilter(),i);let t=r.getLinkedFilters().getValuesAsReadOnlyList();for(let n=0;n<t.size();n++){let r=t.get(n);e.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(r,i)}}let o=i.contains(t.getName());if(t.isMeasureStructure()){let t=n.getExceptionManager();let i=e.XCollectionUtils.hasElements(t);return o||i}return o};e.QInADimensionsAll.prototype.getComponentType=function(){return e.OlapComponentType.DIMENSIONS};e.QInADimensionsAll.prototype.getTagName=function(){return"Dimensions"};e.QInADimensionsAll.prototype.hasCustomHierarchy=function(t){let n=t.getHierarchy();return e.notNull(n)&&n.isCustomHierarchy()||t.getCustomHierarchyDefinition()!==null};e.QInADimensionsAll.prototype.importComponentWithList=function(t,n,i,r,o){if(e.notNull(n)){let r=i;let o=r.getDimensionManagerBase();if(t.m_mode!==e.QModelFormat.INA_DATA_REINIT){let e=r.getFreeAxis();e.addAll(o)}let l=n.size();let a=o.getDimensionReferences();for(let i=0;i<l;i++){let l=n.getStructureAt(i);let s=l.getStringByKey("Name");let u=l.getStringByKey("Axis");let p=null;if(l.containsKey("FieldMappings")){let e=t.importCalculatedDimension(l,r);o.addDimension(e);o.finalizeDimensionMetadataSetup(e)}else if(l.containsKey("CType")&&e.XComponentType.lookupComponentType(l.getStringByKey("CType"))===e.DimensionType.FORMULA_CALCULATED_DIMENSION){let e=t.importFormulaCalculatedDimension(l,r,null);o.addDimension(e);o.finalizeDimensionMetadataSetup(e)}else{if(a.containsKey(s)){let n=e.AxisType.lookup(u);if(t.getMode()===e.QModelFormat.INA_REPOSITORY||n===e.AxisType.COLUMNS||n===e.AxisType.ROWS){p=o.getDimensionByNameFromExistingMetadata(s)}}t.importDimension(l,r)}if(t.m_mode!==e.QModelFormat.INA_DATA_REINIT){if(e.isNull(p)){p=o.getDimensionByNameInternal(s);if(e.isNull(p)){continue}}if(e.isNull(u)){u=l.getStringByKeyExt("AxisDefault","Free")}r.getAxis(e.QInAConverter.lookupAxisType(u)).add(p)}}}return i};e.QInADrillManager=function(){};e.QInADrillManager.prototype=new e.QInAComponentWithList;e.QInADrillManager.prototype._ff_c="QInADrillManager";e.QInADrillManager.prototype.exportComponentWithList=function(t,n,i){let r=n;let o=r.getModelCapabilities();let l=null;let a;if(t.getMode().isTypeOf(e.QModelFormat.INA_DATA)||t.getMode().isTypeOf(e.QModelFormat.INA_VALUE_HELP)){a=r.getDrillOperationsForInAData()}else{a=r.getDrillOperationsForInARepo()}let s=a.size();if(s>0){let n=r.getQueryModel();let i=null;let u=null;l=e.PrFactory.createList();let p=null;if(o.supportsHierarchyNavigationDeltaMode()){p=a.get(s-1);let n=p.getTargetDimension();if(e.notNull(n)&&n.isHierarchyNavigationDeltaMode()){u=n;i=t.exportDrillOperation(p)}}let g=t.isAbap(n);if(!g&&(t.getMode().isTypeOf(e.QModelFormat.INA_DATA)||t.getMode().isTypeOf(e.QModelFormat.INA_VALUE_HELP))){a=a.createListCopy();if(e.notNull(u)){a.removeElement(p);s=a.size()}if(s>0){a.sortByComparator(e.XComparatorDrill.create())}}for(let n=0;n<s;n++){let i=a.get(n);if(i.getType()===e.DrillOperationType.CONTEXT){let n=i.getTargetDimension();if(e.isNull(u)||u!==n){if(!g&&n.getInitialDrillLevel()<0&&i.getDrillState()===e.DrillState.EXPANDED&&!n.hasZoomDrill()){continue}e.XCollectionUtils.addIfNotPresent(l,t.exportDrillOperation(i))}}}if(e.notNull(i)){l.add(i)}if(l.isEmpty()){l=null}}return l};e.QInADrillManager.prototype.getComponentType=function(){return e.OlapComponentType.DRILL_MANAGER};e.QInADrillManager.prototype.getTagName=function(){return"HierarchyNavigations"};e.QInADrillManager.prototype.getZoomDrillPath=function(t,n,i,r){let o=e.XList.create();let l=i.getListByKey("DrillContextMembers");if(e.notNull(l)){let e=l.size();for(let i=0;i<e;i++){let e=l.getStructureAt(i);let a=t.importDrillPathElement(e,n,r);o.add(a)}}let a=i.getStringByKey("DrillState");let s=i.getStructureByKey("DrillMember");if(e.isNull(s)||e.isNull(a)){return null}let u=t.importDrillPathElement(s,n,r);o.add(u);return o};e.QInADrillManager.prototype.importComponentWithList=function(t,n,i,r,o){let l=i;let a;l.removeAllContextDrillOperations();l.removeZoomDrillOperationsByDimension(null);if(e.notNull(n)){let i=-1;a=n.size();for(let r=0;r<a;r++){let a=n.getStructureAt(r);let s=a.getIntegerByKeyExt("ZoomDrillStackPosition",-1);if(s===-1){t.importDrillOperation(a,l,o)}else if(s>-1){let n=this.getZoomDrillPath(t,l,a,o);if(e.XCollectionUtils.hasElements(n)){if(s!==i){l.pushEmptyZoomDrillForDimension(n.get(n.size()-1).getDimension());i=s}let e=a.getIntegerByKeyExt("DrillOffset",0)>0;l.addZoomDrillPath(n,e)}}}}return i};e.QInADrillPathElement=function(){};e.QInADrillPathElement.prototype=new e.QInAComponentWithStructure;e.QInADrillPathElement.prototype._ff_c="QInADrillPathElement";e.QInADrillPathElement.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=o.getNameForInAExport();let a=o.getFieldName();let s=o.getDimension();let u=e.notNull(s)&&s.getHierarchy()!==null&&s.getHierarchy().isCustomHierarchy();let p=o.getQueryModel();if(e.isNull(p)&&e.notNull(s)){p=s.getQueryModel()}if(t.getMode()===e.QModelFormat.INA_PERSISTED_QUERY_DATA||u){let t=o.getShadowKeyFieldValue();if(e.XStringUtils.isNotNullAndNotEmpty(t)){l=t;a=o.getShadowKeyFieldName()}}if(e.isNull(l)){i.putNull("Member")}else{let n=e.QInAExportUtil.getMeasureMemberNameByAlias(p,l,t);i.putString("Member",n)}i.putString("FieldName",a);let g=e.isNull(p)?null:p.getDrillManager();if(e.notNull(g)&&g.isBackendDrillValidationForAutoSubmit()&&g.isValidatingContextFreeNavigations()){i.putStringNotNullAndNotEmpty("Hierarchy",o.getSelectHierarchyName())}if(t.m_mode===e.QModelFormat.INA_REPOSITORY){e.QInAExportUtil.setNameIfNotNull(i,"DimensionName",s)}return i};e.QInADrillPathElement.prototype.getComponentType=function(){return e.MemberType.DRILL_PATH_ELEMENT};e.QInADrillPathElement.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=r;let a=l.getContext().getQueryModel();let s=n.getStringByKey("FieldName");let u=n.getStringByKey("DimensionName");let p;if(e.XStringUtils.isNotNullAndNotEmpty(u)){p=a.getDimensionByNameFromExistingMetadata(u)}else{let t=a.getFieldByNameOrAlias(s);if(e.isNull(t)){p=a.getDimensionByNameFromExistingMetadata(s);if(e.notNull(p)){t=p.getKeyField();s=t.getName()}}else{p=t.getDimension()}}let g=e.QDrillPathElement._create(o);g.setDimension(p);let m=n.getStringByKey("Member");g.setName(m);g.setFieldName(s);return g};e.QInADrillPathOperation=function(){};e.QInADrillPathOperation.prototype=new e.QInAComponentWithStructure;e.QInADrillPathOperation.prototype._ff_c="QInADrillPathOperation";e.QInADrillPathOperation.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;if(o.getType()===e.DrillOperationType.CONTEXT){let n=e.QInAConverter.lookupDrillStateInA(o.getDrillState());i.putString("DrillState",n);let r=o.getRelativeLevelCount();if(r!==1){i.putInteger("DrillLevel",r)}if(t.m_mode.isTypeOf(e.QModelFormat.INA_DATA)||t.m_mode.isTypeOf(e.QModelFormat.INA_VALUE_HELP)){if(o.supportsDrillCounter()){i.putInteger("HierarchyNavigationCounter",o.getDrillCounter())}}else{if(o.getZoomStackPosition()!==-1){i.putInteger("ZoomDrillStackPosition",o.getZoomStackPosition())}if(o.getRelativeLevelOffset()!==0){i.putInteger("DrillOffset",o.getRelativeLevelOffset())}}let l=o.getDrillPath();let a=l.size();if(a>0){let n=l.get(a-1);let r=t.exportDrillPathElement(n,false);i.put("DrillMember",r);if(a>1){let o=e.PrFactory.createList();i.put("DrillContextMembers",o);for(let e=0;e<a-1;e++){n=l.get(e);r=t.exportDrillPathElement(n,true);o.add(r)}}}}return i};e.QInADrillPathOperation.prototype.getComponentType=function(){return e.OlapComponentType.DRILL_OPERATION};e.QInADrillPathOperation.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=r;let a=n.getStringByKey("DrillState");let s=n.getStructureByKey("DrillMember");if(e.isNull(s)||e.isNull(a)){return null}let u=e.XList.create();let p=n.getListByKey("DrillContextMembers");if(e.notNull(p)){let e=p.size();for(let n=0;n<e;n++){let e=p.getStructureAt(n);let i=t.importDrillPathElement(e,l,o);u.add(i)}}let g=t.importDrillPathElement(s,l,o);u.add(g);let m=l.setDrillState(u,e.QInAConverter.lookupDrillStateOp(a));let c=n.getIntegerByKeyExt("DrillLevel",1);m.setRelativeLevelCount(c);return m};e.QInAExceptions=function(){};e.QInAExceptions.prototype=new e.QInAComponentWithList;e.QInAExceptions.prototype._ff_c="QInAExceptions";e.QInAExceptions.exportEvaluates=function(t,n,i,r){if(t.isEmpty()){return}let o=i.putNewList("EvaluateOn");let l=t.size();for(let i=0;i<l;i++){let l=o.addNewStructure();let a=t.get(i);l.putString("Name",a.getField().getName());l.putString("Evaluate",a.getEvaluate().toString());let s=a.getOperator();let u;if(s===e.ComparisonOperator.NOT_BETWEEN&&r){u="NOTBETWEEN"}else{u=e.QInAConverter.lookupComparisonInA(s)}l.putString("Comparison",u);e.QInAValueUtils.exportPlaceholderValue(n,"Low",l,a.getLowValue(),a.getValueType(),a.getQueryModel());if(!l.containsKey("Low")){l.putString("Low","")}if(s.getNumberOfParameters()>1){e.QInAValueUtils.exportPlaceholderValue(n,"High",l,a.getHighValue(),a.getValueType(),a.getQueryModel())}}};e.QInAExceptions.exportSettings=function(t,n,i){let r=i.putNewList("Settings");let o=t.size();for(let i=0;i<o;i++){let o=t.get(i);let l=r.addNewStructure();l.putString("Name",o.getName());l.putInteger("Priority",o.getPriority());let a=o.getValue();if(e.isNull(a)||e.XString.isEqual(a,"")){n.addError(e.ErrorCodes.INVALID_PARAMETER,"Exception Threshold Setting is missing it's value")}else{l.putString("Value",a)}}};e.QInAExceptions.exportStructureContextItem=function(t,n,i){if(e.notNull(n)){let r=t.addNewStructure();let o=n.getDimension();r.putString("DimensionName",o.getName());r.putString("MemberName",n.getName());if(i.isEvaluateAllMembers(o)){r.putBoolean("EvaluateAllMembers",true)}let l=i.getDisplayOnOtherMember(n);e.QInAExportUtil.setNameIfNotNull(r,"DisplayOnOtherMember",l)}};e.QInAExceptions.exportThresholds=function(t,n,i,r){let o=i.putNewList("Threshold");let l=t.size();for(let i=0;i<l;i++){let l=t.get(i);let a=o.addNewStructure();let s=l.getName();if(n.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)&&!e.XString.isEqual(s,"Settings")){a.putStringNotNull("Name",s)}let u=l.getOperator();let p;if(u===e.ComparisonOperator.NOT_BETWEEN&&r){p="NOTBETWEEN"}else{p=e.QInAConverter.lookupComparisonInA(u)}a.putString("Comparison",p);let g=l.getValueType()===e.XValueType.DOUBLE;if(l.getLowXValue()!==null){if(g){a.putDouble("Low",l.getLowValue())}else{a.putString("Low",l.getLow())}}if(l.getHighXValue()!==null&&u.getNumberOfParameters()>1){if(g){a.putDouble("High",l.getHighValue())}else{a.putString("High",l.getHigh())}}if(!l.isEmpty()){e.QInAExceptions.exportSettings(l,n,a)}else{a.putInteger("AlertLevel",l.getAlertLevel().getLevel())}}};e.QInAExceptions.importEvaluates=function(t,n,i,r){let o=t.getListByKey("EvaluateOn");if(e.isNull(o)){return}let l=o.size();let a=n.getQueryModel();for(let t=0;t<l;t++){let l=o.getStructureAt(t);let s=l.getStringByKey("Name");let u=a.getFieldByName(s);if(e.isNull(u)){let t=a.getDimensionByNameFromExistingMetadata(s);if(e.notNull(t)){u=t.getKeyField()}}if(e.isNull(u)){u=n.getKeyFieldValue().getField()}if(e.isNull(u)){r.addError(e.ErrorCodes.INVALID_TOKEN,e.XStringUtils.concatenate3("Could not find field '",s,"'!"));return}if(!l.containsKey("Low")){r.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate2("No low value for field: ",s));return}let p=u.getValueType();let g=e.QInAValueUtils.importValueByType(r,l,"Low",p);if(r.hasErrors()){r.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected low valuetype for field: ",p.getName()));return}let m=i._addNewEvaluateWithFieldInternal(u,g);if(l.containsKey("High")){let t=e.QInAValueUtils.importValueByType(r,l,"High",p);if(r.hasErrors()){r.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected high valuetype for field: ",p.getName()));return}m.setHighValue(t)}m.setEvaluate(e.QExceptionEvalType.lookupExceptionEvalType(l.getStringByKey("Evaluate")));let c=l.getStringByKey("Comparison");let y=e.QInAConverter.lookupComparison(c);if(e.isNull(y)){r.addError(e.ErrorCodes.INVALID_OPERATOR,e.XStringUtils.concatenate3("Unexpected comparison operator for evaluate: Operator: '",c,"'"));return}m.setOperator(y)}};e.QInAExceptions.importSettings=function(t,n){if(e.isNull(t)){return}let i=t.size();for(let r=0;r<i;r++){let i=t.getStructureAt(r);let o=i.getStringByKey("Name");let l=i.getIntegerByKey("Priority");let a=i.getStringByKey("Value");if(e.notNull(a)&&!e.XString.isEqual(a,"")){let e=n.addNewSetting(o,l);e.setValue(a)}}};e.QInAExceptions.importThresholds=function(t,n){let i=t.getListByKey("Threshold");if(e.notNull(i)){let t=i.size();for(let r=0;r<t;r++){let t=i.getStructureAt(r);let o=t.getIntegerByKeyExt("AlertLevel",-9999);let l;let a=!t.hasStringByKey("Low");if(a){l=n._addNewThresholdInternal(t.getDoubleByKey("Low"),e.QInAConverter.lookupAlertLevel(o))}else{l=n._addNewThresholdWithStringInternal(t.getStringByKey("Low"),e.QInAConverter.lookupAlertLevel(o))}let s=t.getStringByKey("Name");if(e.notNull(s)){l.setName(s)}let u=e.QInAConverter.lookupComparison(t.getStringByKey("Comparison"));l.setOperator(u);if(u.getNumberOfParameters()===2){if(a){let e=t.getDoubleByKey("High");l.setHighValue(e)}else{let e=t.getStringByKey("High");l.setHigh(e)}}e.QInAExceptions.importSettings(t.getListByKey("Settings"),l)}}};e.QInAExceptions.prototype.exportComponentWithList=function(e,t,n){if(this.isVersion1(e,t)){return this.exportFormatV1(e,t)}else if(this.isVersion2(e,t)){return this.exportFormatV2(e,t)}return null};e.QInAExceptions.prototype.exportException=function(t,n,i){let r=e.PrFactory.createStructure();if(t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){r.putBoolean("Active",n.isActive());r.putBoolean("EvaluateBeforePostAggregation",!n.isEvaluatedAfterCalculations());r.putBoolean("Changegable",n.isChangeable())}else if(i){r.putBoolean("Active",n.isActive())}else if(!n.isActive()){t.addWarning(e.ErrorCodes.IMPORT_EXCEPTION_INACTIVE,e.XStringUtils.concatenate3("Exception '",n.getName(),"' is inactive."));return null}let o=n.getThresholds();if(o.isEmpty()&&!t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){t.addWarning(e.ErrorCodes.IMPORT_EXCEPTION_NO_THRESHOLDS,e.XStringUtils.concatenate3("Exception '",n.getName(),"' has no threshold."));return null}e.QInAExceptions.exportThresholds(o,t,r,i);e.QInAExceptions.exportEvaluates(n.getEvaluates(),t,r,i);r.putString("Name",n.getName());if(t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)||i){r.putString("Text",n.getText())}let l=n.getHeaderSetting();if(l!==e.QExceptionHeaderSettings.NONE){r.putString("ApplySettingsToHeader",l.getName())}r.putString("EvaluateDefault",n.getEvaluateDefault().toString());return r};e.QInAExceptions.prototype.exportFormatV1=function(t,n){let i=null;let r=n.getExceptions();if(e.notNull(r)){let o=r.size();if(o>0){i=e.PrFactory.createList();let l=t.isAbap(n);for(let n=0;n<o;n++){let o=r.get(n);let a=this.exportException(t,o,l);if(e.isNull(a)){break}i.add(a)}}}return i};e.QInAExceptions.prototype.exportFormatV2=function(t,n){let i=n.getExceptionManager();let r=i.size();if(r===0){return null}let o=e.PrFactory.createList();let l=t.isAbap(n);for(let n=0;n<r;n++){let r=i.get(n);let a=this.getExportedExceptionStructureByName(o,r.getName());if(e.isNull(a)){a=this.exportException(t,r,l);if(e.isNull(a)){continue}a.putNewList("StructureContext");o.add(a)}let s=a.getListByKey("StructureContext");e.QInAExceptions.exportStructureContextItem(s,r.getMeasure(),r);e.QInAExceptions.exportStructureContextItem(s,r.getStructure(),r)}return o};e.QInAExceptions.prototype.getComponentType=function(){return e.OlapComponentType.EXCEPTION_MANAGER};e.QInAExceptions.prototype.getExportedExceptionStructureByName=function(t,n){let i=t.size();for(let r=0;r<i;r++){let i=t.getStructureAt(r);if(e.XString.isEqual(i.getStringByKey("Name"),n)){return i}}return null};e.QInAExceptions.prototype.getMemberFromContextItem=function(t,n){let i=n.getStructureMember(t.getStringByKey("MemberName"));if(e.isNull(i)){let e=t.getBooleanByKeyExt("EvaluateAllMembers",false);let i=n.getAllStructureMembers();if(e&&!i.isEmpty()){return i.get(0)}}return i};e.QInAExceptions.prototype.getTagName=function(){return"Exceptions"};e.QInAExceptions.prototype.importComponentWithList=function(e,t,n,i,r){let o=n;let l=o.getQueryModel().getExceptionManager();l.queueEventing();if(this.isVersion1(e,n)){l.removeAllExceptionsOfMeasure(n);this.importFormatV1(e,t,n,l)}else if(this.isVersion2(e,n)){l.clear();this.importFormatV2(e,t,n,l)}l.resumeEventing();return l};e.QInAExceptions.prototype.importContextItem=function(t,n,i,r,o,l){let a=r;let s=n.getDimensionByNameFromExistingMetadata(t.getStringByKey("DimensionName"));if(e.notNull(s)){let n=this.getMemberFromContextItem(t,s);if(e.notNull(n)){if(e.isNull(a)){a=this.importException(o,n,i,l)}if(s.isMeasureStructure()){a.setMeasure(n)}else{a.setStructure(n)}a.displayOnOtherMember(n,s.getStructureMember(t.getStringByKey("DisplayOnOtherMember")));a.setEvaluateAllMembers(s,t.getBooleanByKeyExt("EvaluateAllMembers",false))}}return a};e.QInAExceptions.prototype.importException=function(t,n,i,r){let o=r.getStringByKey("Name");let l=r.getStringByKey("Text");let a=e.QExceptionEvalType.lookupExceptionEvalType(r.getStringByKey("EvaluateDefault"));let s=e.QExceptionHeaderSettings.lookupExceptionHeaderSetting(r.getStringByKey("ApplySettingsToHeader"));let u=r.getBooleanByKeyExt("Active",true);let p=r.getBooleanByKeyExt("EvaluateBeforePostAggregation",true);let g=i._addNewExceptionInternal(o,l,a,s,u,!p);g.queueEventing();e.QInAExceptions.importEvaluates(r,n,g,t);e.QInAExceptions.importThresholds(r,g);g.resumeEventing();return g};e.QInAExceptions.prototype.importFormatV1=function(t,n,i,r){if(e.notNull(n)){let e=n.size();for(let o=0;o<e;o++){let e=n.getStructureAt(o);let l=this.importException(t,i,r,e);l.setMeasure(i);l.setIsChangeable(e.getBooleanByKeyExt("Changegable",true))}}};e.QInAExceptions.prototype.importFormatV2=function(t,n,i,r){if(e.isNull(n)){return}let o=n.size();for(let l=0;l<o;l++){let o=n.getStructureAt(l);let a=o.getListByKey("StructureContext");if(!e.PrUtils.isListEmpty(a)){let n=this.importContextItem(a.getStructureAt(0),i,r,null,t,o);if(e.notNull(n)){if(a.size()>1){this.importContextItem(a.getStructureAt(1),i,r,n,t,o)}n.setIsChangeable(o.getBooleanByKeyExt("Changegable",true))}}}};e.QInAExceptions.prototype.isVersion1=function(t,n){let i=n.getOlapComponentType();return!t.m_capabilities.supportsExceptionsV2()&&i.isTypeOf(e.MemberType.ABSTRACT_MEMBER)};e.QInAExceptions.prototype.isVersion2=function(t,n){let i=n.getOlapComponentType();return t.m_capabilities.supportsExceptionsV2()&&i.isTypeOf(e.OlapComponentType.QUERY_MODEL)};e.QInAField=function(){};e.QInAField.prototype=new e.QInAComponentWithStructure;e.QInAField.prototype._ff_c="QInAField";e.QInAField.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=o.getObtainability();let a=e.XMath.binaryAnd(r,e.QImExFlag.HIDE)>0||e.notNull(l)&&l!==e.ObtainabilityType.ALWAYS;i.putString("Name",o.getName());if(!t.m_mode.isDataBlending()){i.putStringNotNull("DisplayFormat",o.getDisplayFormat())}let s=o.getTextTransformation();if(e.notNull(s)){i.putString("TextTransformation",e.QInAConverter.lookupTextTransformationInA(s))}if(t.m_mode.isTypeOf(e.QModelFormat.INA_DATA)||t.m_mode===e.QModelFormat.INA_VALUE_HELP){if(!t.m_capabilities.supportsExtendedSort()&&!t.isVirtualInA(o.getQueryModel())){let n;if(t.m_modelContext===e.QContextType.SELECTOR){if(o.isEqualTo(o.getDimension().getSelectorKeyField())){n=o.getDimension().getSelectorOrder();i.putInteger("SortOrder",e.QInAConverter.lookupSortDirectionInA(n))}else{i.putInteger("SortOrder",0)}}else{if(o.hasSorting()){n=o.getResultSetSorting().getDirection();i.putInteger("SortOrder",e.QInAConverter.lookupSortDirectionInA(n))}else if(o.getDimension().hasSorting()){let t=o.getDimension();n=t.getResultSetSorting().getDirection();i.putInteger("SortOrder",e.QInAConverter.lookupSortDirectionInA(n))}else{i.putInteger("SortOrder",0)}}}if(a){i.putString("Obtainability","UserInterface")}else{i.putString("Obtainability","Always")}}else if(o.getDimension().getDimensionType()===e.DimensionType.FORMULA_CALCULATED_DIMENSION){let n=o;if(n.getFormulaItem()!==null){e.QInAFormulaMeasure.exportFormulaItem(t,n.getFormulaItem(),i.putNewStructure("Formula"),o.getQueryModel())}}if(t.isVirtualInA(o.getQueryModel())){i.putBoolean("IsKey",o.isKeyField())}return i};e.QInAField.prototype.getComponentType=function(){return e.OlapComponentType.FIELD};e.QInAField.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=o.getFieldAccessorSingle().getFieldByName(n.getStringByKey("Name"));if(e.isNull(l)){return null}let a=n.getStringByKey("TextTransformation");if(e.notNull(a)){l.setTextTransformation(e.QInAConverter.lookupTextTransformation(a))}l.setDisplayFormat(n.getStringByKey("DisplayFormat"));if(l.getDimension().getDimensionType()===e.DimensionType.FORMULA_CALCULATED_DIMENSION){let i=n.getStructureByKey("Formula");if(e.notNull(i)){let i=e.QInAFormulaMeasure.importFormulaMeasure(t,l.getDimension(),n.getStructureByKey("Formula"),null,o);l.setFormulaItem(i)}}return l};e.QInAFilter=function(){};e.QInAFilter.prototype=new e.QInAComponentWithStructure;e.QInAFilter.prototype._ff_c="QInAFilter";e.QInAFilter.mergeAndExportFilterStateList=function(t,n){let i=null;let r=n.size();if(r>0){if(r>1){let o=e.XList.create();for(let i=0;i<r;i++){let r=t.exportFilterExpression(n.get(i));if(e.notNull(r)){o.add(r)}}let l=o.size();if(l>0){if(l>1){i=e.PrFactory.createStructure();let t=i.putNewStructure("Selection");let n=t.putNewStructure("Operator");n.putString("Code","And");let r=n.putNewList("SubSelections");for(let t=0;t<l;t++){let n=o.get(t).getStructureByKey("Selection");if(e.notNull(n)){r.add(n)}}}else{i=o.get(0)}}}else{i=t.exportFilterExpression(n.get(0))}}return i};e.QInAFilter.prototype.checkConflicting=function(t,n,i){let r=t.getComponentType();let o;let l;if(r.isTypeOf(e.FilterComponentType.CARTESIAN_LIST)){let i=t;if(!i.isConvertToFlatFilter()&&n.getCartesianListByDimensionName(i.getDimensionName())!==null){let r=e.XStringUtils.isNotNullAndNotEmpty(i.getHierarchyName());l=t.getChildrenIterator();while(l.hasNext()){o=this.checkConflicting(l.next(),n,r);if(o){return true}}}}else if(r.isTypeOf(e.FilterComponentType.BOOLEAN_ALGEBRA)){l=t.getChildrenIterator();while(l.hasNext()){o=this.checkConflicting(l.next(),n,false);if(o){return true}}}else if(r.isTypeOf(e.FilterComponentType.OPERATION)){let r=t;let o=r.getDimensionName();let l=r.getDimension();return!r.isConvertToFlatFilter()&&(i||e.XStringUtils.isNotNullAndNotEmpty(r.getHierarchyName()))&&(e.isNull(o)||n.getCartesianListByDimensionName(o)!==null)&&(e.isNull(l)||!l.isVisibilityFilterForDrillDisabled())}return false};e.QInAFilter.prototype.copyAndSkipConflicting=function(t,n){let i;let r=t.getComponentType();if(r.isTypeOf(e.OlapComponentType.FILTER_ELEMENT)&&!this.checkConflicting(t,n,false)){return t}else if(r.isTypeOf(e.FilterComponentType.BOOLEAN_ALGEBRA)&&!r.isTypeOf(e.FilterComponentType.CARTESIAN_LIST)){let o=this.createFilterAlgebraList(r,n.getContext());i=t.getChildrenIterator();while(i.hasNext()){let t=this.copyAndSkipConflicting(i.next(),n);if(e.notNull(t)){o.add(t)}}return o}return null};e.QInAFilter.prototype.copyAndSkipNonMeasureFilter=function(t,n){let i;let r=t.getComponentType();if(r.isTypeOf(e.FilterComponentType.CARTESIAN_LIST)||r.isTypeOf(e.FilterComponentType.OPERATION)){let i=n.getDimensionByName(t.getDimensionName());if(e.notNull(i)&&i.getDimensionType().isTypeOf(e.DimensionType.MEASURE_STRUCTURE)){return t}}else if(r.isTypeOf(e.FilterComponentType.BOOLEAN_ALGEBRA)&&!r.isTypeOf(e.FilterComponentType.CARTESIAN_LIST)){let o=this.createFilterAlgebraList(r,n);i=t.getChildrenIterator();while(i.hasNext()){let t=this.copyAndSkipNonMeasureFilter(i.next(),n);if(e.notNull(t)){o.add(t)}}return o}return null};e.QInAFilter.prototype.createFilterAlgebraList=function(t,n){if(t.isTypeOf(e.FilterComponentType.CARTESIAN_PRODUCT)){return e.QFilterCartesianProduct._create(n,null)}if(t.isTypeOf(e.FilterComponentType.AND)){return e.QFilterAnd._create(n,null)}if(t.isTypeOf(e.FilterComponentType.OR)){return e.QFilterOr._create(n,null)}if(t.isTypeOf(e.FilterComponentType.NOT)){return e.QFilterNot._create(n,null)}return e.QFilterCartesianProduct._create(n,null)};e.QInAFilter.prototype.decorateWithZoomFilter=function(t,n,i){let r;let o=t.getFilterRootElement();if(!e.XCollectionUtils.hasElements(n)||e.isNull(o)){r=t}else{let l=this.checkConflicting(o,n,false);if(l){r=e.QFilterExpression.createTransient(n.getContext());r.setComplexRoot(this.copyAndSkipConflicting(o,n));i.add(r)}else{r=t}}return r};e.QInAFilter.prototype.exportFilter=function(t,n,i,r,o,l,a){if(!t.m_mode.isTypeOf(e.QModelFormat.INA_DATA)&&!t.m_mode.isTypeOf(e.QModelFormat.INA_VALUE_HELP)){return t.exportFilterExpression(i)}if(e.notNull(r)&&r.size()===1&&e.notNull(a)&&!e.XCollectionUtils.hasElements(l)&&!t.m_mode.isTypeOf(e.QModelFormat.INA_PERSISTED_QUERY_DATA)){let i=r.getIterator().next();if(e.notNull(i)&&!i.isReleased()&&!i.getModelCapabilities().supportsMultiComplexFilter()){let i=n.getEffectiveFilter();let r=t.exportFilterExpression(i);if(e.notNull(r)){return r}}}let s=n.getQueryModel();let u=e.XList.create();let p=e.XList.create();if(this.isValidFilterExpression(i,s)&&!this.shouldBeIgnored(t,i)){if(n.isIgnoreInternalNonMeasureFilter()){p.add(this.extractMeasureFilter(i,i.getContext(),u))}else{p.add(this.decorateWithZoomFilter(i,l,u))}}if(e.notNull(r)){let o=n.getExternalizedFilterName();let a=r.getByKey(o);if(this.isValidFilterExpression(a,s)&&!this.shouldBeIgnored(t,a)){let e=this.getRuntimeExternalFilter(a,n,u);if(n.isIgnoreInternalNonMeasureFilter()){p.add(this.extractMeasureFilter(e,i.getContext(),u))}else{p.add(this.decorateWithZoomFilter(e,l,u))}}let g=r.getKeysAsIterator();let m=e.QFactory.createFilterOr(s);let c=null;let y=false;while(g.hasNext()){let i=g.next();if(!e.XString.isEqual(i,o)){let o=r.getByKey(i);if(this.isValidFilterExpression(o,s)&&!this.shouldBeIgnored(t,o)){let t=this.getRuntimeExternalFilter(o,n,u);let i=this.decorateWithZoomFilter(t,l,u);if(o.isMergable()){let n=t.getDimensionsUsedInFilter();let r=s.getPrimaryCalculationDimension().getName();if(n.size()===1&&e.XString.isEqual(r,n.getValuesAsReadOnlyList().get(0))){if(!y){if(e.QFilterUtil.hasEmptyMergableFilterExpressionForDimension(i,r)){y=true}if(m.size()===0){c=i}m.add(i.getFilterRootElement());if(m.size()<2){p.add(i)}}continue}}p.add(i)}}}if(y){p.removeElement(c)}else if(m.size()>=2){p.removeElement(c);let t=e.QFilterExpression.createTransient(i.getContext());t.setComplexRoot(m);p.add(t);u.add(t)}}if(e.notNull(o)&&this.isValidFilterExpression(o,s)){p.add(this.decorateWithZoomFilter(o,l,u))}let g;if(e.XCollectionUtils.hasElements(l)){g=e.QFilterExpression.createTransient(i.getContext());g.setComplexRoot(l);p.add(g);u.add(g)}if(e.XCollectionUtils.hasElements(a)){let t=e.QFilterExpression.createTransient(i.getContext());t.setComplexRoot(a);p.add(t);u.add(t)}let m=e.QInAFilter.mergeAndExportFilterStateList(t,p);e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(u);return m};e.QInAFilter.prototype.extractMeasureFilter=function(t,n,i){let r;let o=t.getFilterRootElement();if(e.isNull(o)){r=t}else{r=e.QFilterExpression.createTransient(n);r.setComplexRoot(this.copyAndSkipNonMeasureFilter(o,n.getQueryModel()));i.add(r)}return r};e.QInAFilter.prototype.getRuntimeExternalFilter=function(t,n,i){let r=n.getBackProjectionFilterIds();let o;if(e.notNull(r)&&r.contains(t.getUniqueId())){let r=n.getContext();r.getQueryModel().setDeltaPhase(e.QDeltaOperationPhase.NOTIFY_DO_NOT_RAISEEVENTS);o=e.QFilterExpression.createTransient(n.getContext());o.copyFrom(t,null);i.add(o);r.getQueryModel().resumeEventing()}else{o=t}return o};e.QInAFilter.prototype.isValidFilterExpression=function(t,n){if(e.isNull(t)){return false}let i=t.getFilterRootElement();if(e.isNull(i)){return false}if(i.getOlapComponentType().isTypeOf(e.FilterComponentType.TRANSIENT_FILTER)){return false}if(e.notNull(n)){let r=t.getDimensionsUsedInFilter().getIterator();while(r.hasNext()){let t=r.next();let o=n.getDimensionByName(t);if(e.isNull(o)){return i.getMemberNamesFromFilter(t).isEmpty()}else if(e.QInAExportUtil.isFormulaCalculatedDimensionHidden(o)){return false}}}return true};e.QInAFilter.prototype.shouldBeIgnored=function(t,n){return t.m_mode.isTypeOf(e.QModelFormat.INA_PERSISTED_QUERY_DATA)&&n.getTagging().containsKey("PersistedQueryIgnoreFilter")||t.m_mode.isTypeOf(e.QModelFormat.INA_DATA_BLENDING_SOURCE_METADATA)&&n.getTagging().containsKey(e.QTransientConstants.TAG_LOV_BASED_FILTER_ACROSS_MODELS)};e.QInAFilterAlgebra=function(){};e.QInAFilterAlgebra.prototype=new e.QInAComponentWithStructure;e.QInAFilterAlgebra.prototype._ff_c="QInAFilterAlgebra";e.QInAFilterAlgebra.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=o.size();if(l===0){return null}let a=e.PrFactory.createList();for(let n=0;n<l;n++){let i=o.get(n);let r;if(i.getOlapComponentType()===e.FilterComponentType.TUPLE){r=t.exportFilterTuple(i)}else{r=t.exportFilterElement(i)}if(e.notNull(r)&&r.hasElements()){a.add(r)}}if(a.isEmpty()){return null}i.put("SubSelections",a);let s=o.getComponentType();if(s.isTypeOf(e.FilterComponentType.AND)){i.putString("Code","And")}else if(s.isTypeOf(e.FilterComponentType.OR)){i.putString("Code","Or")}else if(s===e.FilterComponentType.NOT){i.putString("Code","Not")}return i};e.QInAFilterAlgebra.prototype.getComponentType=function(){return e.FilterComponentType.BOOLEAN_ALGEBRA};e.QInAFilterAlgebra.prototype.getTagName=function(){return"Operator"};e.QInAFilterAlgebra.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=r;let a=n.getListByKey("SubSelections");if(e.notNull(a)){let i=n.getStringByKey("Code");let r;if(e.XString.isEqual(i,"And")){r=e.QFilterAnd._create(o,l)}else if(e.XString.isEqual(i,"Not")){r=e.QFilterNot._create(o,l)}else{r=e.QFilterOr._create(o,l)}let s=a.size();for(let n=0;n<s;n++){let i=a.getStructureAt(n);let s=t.importFilterElement(i,null,l,o);if(e.notNull(s)){r.add(s)}}if(r.hasElements()){return r}}return null};e.QInAFilterAll=function(){};e.QInAFilterAll.prototype=new e.QInAComponentWithStructure;e.QInAFilterAll.prototype._ff_c="QInAFilterAll";e.QInAFilterAll.prototype.exportComponentWithStructure=function(e,t,n,i){let r=t;if(r.getQueryModel().isExportingFixedFilter()){e.exportFixedFilter(r,n)}e.exportDynamicFilter(r,n);e.exportVisibilityFilter(r,n);return n};e.QInAFilterAll.prototype.getComponentType=function(){return e.OlapComponentType.SELECTOR};e.QInAFilterAll.prototype.importComponentWithStructure=function(e,t,n,i,r){let o=n;e.importFixedFilter(t,o,r);e.importDynamicFilter(t,o,r);e.importVisibilityFilter(t,o,r);return o};e.QInAFilterCellValueOperand=function(){};e.QInAFilterCellValueOperand.prototype=new e.QInAComponentWithStructure;e.QInAFilterCellValueOperand.prototype._ff_c="QInAFilterCellValueOperand";e.QInAFilterCellValueOperand.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;i.putBoolean("IsExcluding",o.isExcluding());let l=o.getComparisonOperator();i.putString("Comparison",e.QInAConverter.lookupComparisonInA(l));let a=o.getLow();i.putString("Low",a);if(e.XStringUtils.isNotNullAndNotEmpty(a)&&o.isLowVariable()){i.putString("LowIs","Variable")}if(l.getNumberOfParameters()===2){let t=o.getHigh();i.putString("High",t);if(e.XStringUtils.isNotNullAndNotEmpty(t)&&o.isHighVariable()){i.putString("HighIs","Variable")}}return i};e.QInAFilterCellValueOperand.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_CELL_VALUE_OPERAND};e.QInAFilterCellValueOperand.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=n.getStringByKey("Low");if(e.XString.isEqual(l,"")){l=null}let a=n.getStringByKey("High");if(e.XString.isEqual(a,"")){a=null}let s=e.QInAConverter.lookupComparison(n.getStringByKey("Comparison"));let u=e.QFilterCellValueOperand._create(o,null,l,a,s);u.setIsExcluding(n.getBooleanByKey("IsExcluding"));return u};e.QInAFilterConvertedTimeCartesianList=function(){};e.QInAFilterConvertedTimeCartesianList.prototype=new e.QInAFilterCartesianList;e.QInAFilterConvertedTimeCartesianList.prototype._ff_c="QInAFilterConvertedTimeCartesianList";e.QInAFilterConvertedTimeCartesianList.prototype.getComponentType=function(){return e.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST};e.QInAFilterElement=function(){};e.QInAFilterElement.prototype=new e.QInAComponentWithStructure;e.QInAFilterElement.prototype._ff_c="QInAFilterElement";e.QInAFilterElement.prototype.m_exportingAtLevel1=false;e.QInAFilterElement.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=o.getComponentType();if(l.isTypeOf(e.FilterComponentType.BOOLEAN_ALGEBRA)){if(l===e.FilterComponentType.CARTESIAN_LIST){t.exportCartesianList(o,i)}else if(l===e.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST){t.exportConvertedTimeCartesianList(o,i)}else if(l===e.FilterComponentType.CARTESIAN_PRODUCT){t.exportFilterCartesianProduct(o,i)}else{if(this.shouldContinueExport(o,t)){t.exportFilterAlgebra(o,i);if(this.m_exportingAtLevel1){this.m_exportingAtLevel1=false}}}}else if(l.isTypeOf(e.FilterComponentType.OPERATION)){let n=o;let r=n.getComparisonOperator();if(e.notNull(r)){if(r.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){t.exportFilterGeo(n,i)}else{if(t.m_capabilities.supportsSetOperand()){let r=e.PrFactory.createStructure();let l=n.getFieldMetadata();let a=e.notNull(l)?l.getName():n.getFieldName();if(e.XStringUtils.isNotNullAndNotEmpty(a)){let s=e.notNull(l)?l.getDimensionMetadata():null;if(t.getMode()===e.QModelFormat.INA_DATA_BLENDING_SOURCE_METADATA&&e.notNull(s)&&o.getQueryModel()!==null){let t=o.getQueryModel().getDimensionByName(s.getName());if(e.notNull(t)&&(t.getDimensionType()===e.DimensionType.FILTER_ACROSS_MODELS_CALCULATED_DIMENSION||t.getDimensionType()===e.DimensionType.MEASURE_BASED_FILTER_CALCULATED_DIMENSION)){return i}}r.putString("FieldName",a);let u=n.getHierarchyName();let p=t.getMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING||t.getOriginalMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING;if(p&&e.notNull(s)){if(s.isMeasureStructure()){r.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_FILTER_MEASURE_STRUCTURE)}else if(s.isSecondaryStructure()){r.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_FILTER_SECOND_STRUCTURE)}if(e.notNull(u)){let t=e.XStringUtils.concatenate2(e.InAQueryMergeConstants.TAG_HIERARCHICAL_FILTER,s.getName());r.putString(e.InAQueryMergeConstants.TAG_KEY,t)}}if(e.notNull(u)){let i=n.getFilterExpression()!==null?n.getFilterExpression():n.getParent().getFilterExpression();e.QInAHierarchy.exportHierarchyForFilter(t,t.isAbap(o),r,null,i,n.getQueryManager(),a,u,n.getHierarchyDueDate(),n.getHierarchyVersion())}if(t.m_capabilities.supportsConvertToFlatFilter()&&n.isConvertToFlatFilter()){r.putBoolean("ConvertToFlatSelection",true)}let g=r.putNewList("Elements");let m=g.addNewStructure();t.exportFilterOperation(n,m);if(e.notNull(i)){i.put("SetOperand",r)}}}}}}else if(l.isTypeOf(e.OlapComponentType.FILTER_CELL_VALUE_OPERAND)){let n=e.PrFactory.createStructure();let r=n.putNewList("Elements");r.add(t.exportCellValueOperand(o));i.put("CellValueOperand",n)}return i};e.QInAFilterElement.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_ELEMENT};e.QInAFilterElement.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=r;let a=i;if(n.containsKey("Operator")){a=t.importFilterAlgebra(l,n,o)}else{let i=n.getStructureByKey("SetOperand");if(e.isNull(i)){if(n.containsKey("GeometryOperand")){a=t.importFilterGeo(l,n,o)}}else{a=t.importCartesianList(i,a,l,o)}}return a};e.QInAFilterElement.prototype.shouldContinueExport=function(t,n){let i=e.notNull(n.m_variableProcessingDirective)&&n.m_variableProcessingDirective===e.ProcessingStep.VARIABLE_DEFINITION;if(!i){return true}let r=t.getQueryModel();let o=t.getModelCapabilities();if(o.supportsComplexTupleFilter()&&e.notNull(r)){if(!this.m_exportingAtLevel1){this.m_exportingAtLevel1=true;return true}return false}return true};e.QInAFilterExpression=function(){};e.QInAFilterExpression.prototype=new e.QInAComponentWithStructure;e.QInAFilterExpression.prototype._ff_c="QInAFilterExpression";e.QInAFilterExpression.combineSetOperandWithCellValueOperand=function(t,n){if(e.QInAFilterExpression.isCellOperandEmpty(n)&&!e.QInAFilterExpression.isSetOperandEmpty(t)){return t}if(!e.QInAFilterExpression.isCellOperandEmpty(n)&&e.QInAFilterExpression.isSetOperandEmpty(t)){let t=e.PrFactory.createStructure();t.put("Selection",n);return t}if(e.QInAFilterExpression.isCellOperandEmpty(n)&&e.QInAFilterExpression.isSetOperandEmpty(t)){return null}let i=e.PrFactory.createStructure();let r=i.putNewStructure("Selection");let o=r.putNewStructure("Operator");o.putString("Code","And");let l=o.putNewList("SubSelections");let a=t.getStructureByKey("Selection");if(e.isNull(a)){let n=e.PrFactory.createStructure();n.put("SetOperand",t);l.add(n)}else{l.add(a)}l.add(n);return i};e.QInAFilterExpression.exportGlobalCellValueOperands=function(t,n){let i=null;if(n.getModelCapabilities().supportsCellValueOperand()){let r=e.PrFactory.createList();if(n.isSuppressingNulls()){let i=e.QFilterCellValueOperand.createForNullSuppression(n.getContext(),null);r.add(t.exportCellValueOperand(i))}let o=n.getCellValueOperands();let l=o.size();for(let e=0;e<l;e++){r.add(t.exportCellValueOperand(o.get(e)))}if(!r.isEmpty()){let t=e.PrFactory.createStructure();t.put("Elements",r);i=e.PrFactory.createStructure();i.put("CellValueOperand",t)}}return i};e.QInAFilterExpression.isCellOperandEmpty=function(t){if(e.notNull(t)){let n=t.getStructureByKey("Selection");let i;if(e.isNull(n)){i=t.getStructureByKey("CellValueOperand")}else{i=n.getStructureByKey("CellValueOperand")}if(e.notNull(i)){return i.getListByKey("Elements").isEmpty()}}return true};e.QInAFilterExpression.isSetOperandEmpty=function(t){if(e.isNull(t)){return true}let n=t.getStructureByKey("Selection");if(e.isNull(n)){n=t.getStructureByKey("SetOperand");let i;if(e.isNull(n)){i=t.getListByKey("Elements")}else{i=n.getListByKey("Elements")}return e.PrUtils.isListEmpty(i)}return n.getKeysAsReadOnlyList().isEmpty()};e.QInAFilterExpression.prototype.exportComponent=function(t,n,i,r){let o=n;if(e.isNull(o)){return null}let l=null;if(o.getModelCapabilities().supportsCellValueOperand()){l=e.QInAFilterExpression.exportGlobalCellValueOperands(t,o)}let a=o.getFilterRootElement();let s=null;if(e.notNull(a)){if(a.getOlapComponentType()===e.FilterComponentType.TUPLE){s=t.exportFilterTuple(a)}else if(a.getOlapComponentType()===e.FilterComponentType.VIRTUAL_DATASOURCE){s=t.exportFilterVirtualDatasource(a)}else{s=t.exportFilterElement(a)}if(e.notNull(s)&&!s.hasElements()){s=null}}let u=null;if(e.notNull(s)){u=e.PrFactory.createStructure();u.put("Selection",s)}if(e.notNull(l)){u=e.QInAFilterExpression.combineSetOperandWithCellValueOperand(u,l)}if(t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){if(e.isNull(u)){u=e.PrFactory.createStructure()}if(o.getModelCapabilities().supportsCellValueOperand()){u.putBoolean("IsSuppressingNulls",o.isSuppressingNulls())}}if(o.getModelCapabilities().supportsCustomDimensionMemberVisibilityFilter()&&o.getQueryModel()!==null&&o.getQueryModel().getFilter().isVisibilityFilterInitialized()&&o===o.getQueryModel().getFilter().getVisibilityFilter()){let t=o.getDimensionsForVisibilityFilterOnTotalOthers();if(e.notNull(t)&&!t.isEmpty()){if(e.isNull(u)){u=e.PrFactory.createStructure()}let t=e.PrFactory.createList();t.addAllStrings(o.getDimensionsForVisibilityFilterOnTotalOthers());u.put("ConsiderVisibilityFilterForOthersTotalsOfDimensions",t)}}return u};e.QInAFilterExpression.prototype.exportComponentWithStructure=function(e,t,n,i){return n};e.QInAFilterExpression.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_EXPRESSION};e.QInAFilterExpression.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;if(e.isNull(l)){l=e.QFactory.createFilterExpression(o,r)}let a=0;let s=null;if(e.notNull(n)){s=n.getStructureByKey("Selection");if(e.isNull(s)){s=n.getStructureByKey("SelectionRepo");a=1}}l.setCartesianProduct(null);l.setComplexRoot(null);if(e.notNull(s)){let n=t.importFilterElement(s,null,l,o);if(e.notNull(n)){if(a>=1){l.setComplexRoot(n)}else{let t=e.QFilterUtil.convertComplexFilterToCartesian(n);if(e.notNull(t)){l.setCartesianProduct(t)}else{l.setComplexRoot(n)}}}}if(l.getModelCapabilities().supportsCellValueOperand()){l.setIsSuppressingNulls(false);l.clearCellValueFilter();if(e.notNull(n)){if(t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){l.setIsSuppressingNulls(n.getBooleanByKeyExt("IsSuppressingNulls",false))}if(e.notNull(s)){let n=s.getStructureByKey("CellValueOperand");if(e.isNull(n)){let t=s.getStructureByKey("Operator");if(e.notNull(t)){let e=t.getListByKey("SubSelections");if(e.size()===2){let t=e.getStructureAt(1);n=t.getStructureByKey("CellValueOperand")}}}if(e.notNull(n)){let i=n.getListByKey("Elements");if(e.notNull(i)){let n=e.QFilterCellValueOperand.createForNullSuppression(o,null);let r=i.size();if(r>0){let e=i.getStructureAt(0);let a=t.importFilterCellValueOperand(e,o);let s=0;if(a.isEqualTo(n)){l.setIsSuppressingNulls(true);s=1}l.clearCellValueFilter();for(let e=s;e<r;e++){let n=i.getStructureAt(e);let r=t.importFilterCellValueOperand(n,o);l.addCellValueFilter(r)}}}}}}}if(e.notNull(n)&&l.getModelCapabilities().supportsCustomDimensionMemberVisibilityFilter()&&l.getQueryModel()!==null&&l.getQueryModel().getFilter().isVisibilityFilterInitialized()&&l===l.getQueryModel().getFilter().getVisibilityFilter()){let t=n.getListByKey("ConsiderVisibilityFilterForOthersTotalsOfDimensions");if(e.notNull(t)&&!t.isEmpty()){for(let e=0;e<t.size();e++){l.addDimensionForVisibilityFilterOnTotalOthers(t.getStringAt(e))}}}return l};e.QInAFilterFixed=function(){};e.QInAFilterFixed.prototype=new e.QInAComponentWithStructure;e.QInAFilterFixed.prototype._ff_c="QInAFilterFixed";e.QInAFilterFixed.prototype.exportComponentWithStructure=function(e,t,n,i){let r=t;if(!r.isFixedFilterInitialized()){return null}let o=r.getFixedFilter();return e.exportFilterExpression(o)};e.QInAFilterFixed.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_FIXED};e.QInAFilterFixed.prototype.getTagName=function(){return"FixedFilter"};e.QInAFilterFixed.prototype.importComponentWithStructure=function(t,n,i,r,o){if(e.isNull(n)){return null}let l=r;let a=t.importFilterExpression(null,n,l,o);if(e.notNull(l)&&e.notNull(a)){l.setFixedFilter(a)}return a};e.QInAFilterGeo=function(){};e.QInAFilterGeo.prototype=new e.QInAComponentWithStructure;e.QInAFilterGeo.prototype._ff_c="QInAFilterGeo";e.QInAFilterGeo.tryCreateGeometry=function(t){let n=e.XGeometryValue.createGeometryValueWithWkt(t);if(e.isNull(n)){n=e.XStringValue.create(t)}return n};e.QInAFilterGeo.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=o.getComparisonOperator();if(!l.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){throw e.XException.createIllegalStateException("Not a spatial operator")}i.putString("Comparison",e.QInAConverter.lookupComparisonInA(l));let a=o.getFieldMetadata();i.putString("FieldName",a.getName());let s=t.getMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING||t.getOriginalMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING;let u=a.getDimensionMetadata();if(s&&e.notNull(u)){if(u.isMeasureStructure()){i.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_FILTER_MEASURE_STRUCTURE)}else if(u.isSecondaryStructure()){i.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_FILTER_SECOND_STRUCTURE)}}let p=o.getLow();let g=o.getDataSource();if(e.isNull(g)){if(e.notNull(p)&&p.getValue()!==null){if(t.m_mode===e.QModelFormat.INA_PERSISTED_QUERY_DATA&&p.getTagging().containsKey("PersistedQueryPlaceholder")){i.putString("Value1",p.getTagging().getByKey("PersistedQueryPlaceholder"))}else{e.QInAValueUtils.exportFilterValue(t,"Value1",i,p,p.getValueType())}if(p.getValueType().isSpatial()){let n=p.getGeometry();if(e.notNull(n)){let r=n.getSrid();if(t.m_capabilities.supportsSpatialFilterSrid()&&e.notNull(r)){i.putInteger("SRID",r.getInteger())}}}}}else{if(e.notNull(p)&&p.getValue()!==null){e.QInAValueUtils.exportFilterValue(t,"Value1",i,p,e.XValueType.STRING)}let n=t.exportDataSource(g,false);i.put("DataSource",n)}let m=o.getHigh();if(e.notNull(m)&&m.getValue()!==null){e.QInAValueUtils.exportFilterValue(t,"Value2",i,m,e.XValueType.STRING)}let c=o.getThird();if(e.notNull(c)&&c.getValue()!==null){e.QInAValueUtils.exportFilterValue(t,"Value3",i,c,e.XValueType.STRING)}return i};e.QInAFilterGeo.prototype.getComponentType=function(){return e.FilterComponentType.SPATIAL_FILTER};e.QInAFilterGeo.prototype.getTagName=function(){return"GeometryOperand"};e.QInAFilterGeo.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=r;let a=o.getFieldAccessorSingle();let s=n.getStringByKey("Comparison");let u=n.getStringByKey("FieldName");let p=n.getStringByKey("Value1");if(e.XStringUtils.isNotNullAndNotEmpty(s)&&e.XStringUtils.isNotNullAndNotEmpty(u)&&e.XStringUtils.isNotNullAndNotEmpty(p)){let t=e.QInAConverter.lookupComparison(s);if(e.isNull(t)){return null}if(!t.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){return null}let i=a.getFieldByName(u);if(e.isNull(i)){return null}let r=e.QFactory.createFilterOperationWithOperator(l,i,t);let o=e.QInAFilterGeo.tryCreateGeometry(p);r.getLow().setValue(o);let g=n.getStringByKey("Value2");if(e.XStringUtils.isNotNullAndNotEmpty(g)){let t=e.QInAFilterGeo.tryCreateGeometry(g);r.getHigh().setValue(t)}let m=n.getStringByKey("Value3");if(e.XStringUtils.isNotNullAndNotEmpty(m)){let t=e.QInAFilterGeo.tryCreateGeometry(m);r.getThird().setValue(t)}return r}return null};e.QInAFilterManager=function(){};e.QInAFilterManager.prototype=new e.QInAComponentWithStructure;e.QInAFilterManager.prototype._ff_c="QInAFilterManager";e.QInAFilterManager.prototype.exportComponentWithStructure=function(e,t,n,i){let r=n.putNewStructure("OlapFilterManager");let o=r.putNewStructure("OlapFilters");let l=t;let a=l.getFilters();let s=a.getKeysAsIterator();while(s.hasNext()){let t=s.next();let n=a.getByKey(t);o.put(t,e.exportFilterExpression(n))}return n};e.QInAFilterManager.prototype.getComponentType=function(){return e.OlapComponentType.OLAP_FILTER_MANAGER};e.QInAFilterManager.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;if(e.isNull(l)){l=o.getOlapEnv().getFilterManager()}let a=n.getStructureByKey("OlapFilterManager");let s=a.getStructureByKey("OlapFilters");let u=s.getKeysAsIterator();while(u.hasNext()){let e=u.next();let n=l.getFilterByName(e);t.importFilterExpression(n,s.getStructureByKey(e),l,l.getContext())}return l};e.QInAFilterOperation=function(){};e.QInAFilterOperation.prototype=new e.QInAComponentWithStructure;e.QInAFilterOperation.prototype._ff_c="QInAFilterOperation";e.QInAFilterOperation.exportMemberNavigation=function(t,n){n.putString("Function",t.getMemberFunction().getName());let i=t.getParameters();if(e.notNull(i)){let t=i.size();let r=n.putNewList("Parameters");for(let n=0;n<t;n++){let t=i.get(n);let o=r.addNewStructure();let l=t.getMemberNavigationType();let a=e.QInAConverter.lookupMemberNavigationTypeInA(l);if(l===e.MemberNavigationType.FUNCTION_PARAM_SHIFT||l===e.MemberNavigationType.FUNCTION_PARAM_RANGE){o=o.putNewStructure(a);e.QInAFilterOperation.setKeyValueForMemberNavigation(o,"Level",t.getLevelValue());e.QInAFilterOperation.setKeyValueForMemberNavigation(o,"Constant",t.getConstantValue());e.QInAFilterOperation.setKeyValueForMemberNavigation(o,"OffsetLow",t.getOffSetLow());e.QInAFilterOperation.setKeyValueForMemberNavigation(o,"OffsetHigh",t.getOffsetHigh())}else{if(!e.QInAFilterOperation.setKeyValueForMemberNavigation(o,a,t.getLevelValue())){if(!e.QInAFilterOperation.setKeyValueForMemberNavigation(o,a,t.getConstantValue())){e.QInAFilterOperation.setKeyValueForMemberNavigation(o,a,t.getFunctionName())}}}}}let r=t.getNavigations();if(e.notNull(r)){let t;if(n.containsKey("Parameters")){t=n.getListByKey("Parameters")}else{t=n.putNewList("Parameters")}let i=t.addNewStructure();let o=i.putNewList("Navigations");let l=r.size();for(let t=0;t<l;t++){e.QInAFilterOperation.exportMemberNavigation(r.get(t),o.addNewStructure())}}};e.QInAFilterOperation.exportValue=function(t,n,i,r,o,l,a,s,u){let p=n.getFilterValueType();if(p===e.XValueType.VARIABLE){let i=n.getVariableValue();if(e.notNull(i)){if(n.isFunctionalVariableValue()){r.putString(l,"FunctionalVariable");r.putString(o,i.getName());let u=n.getValue().getParameters();let p=u.getKeysAsReadOnlyList();if(p.size()>0){if(p.size()===1&&p.get(0).getParameterType()===e.FunctionalVariableParameterType.DEFAULT){r.putStringNotNullAndNotEmpty(a,u.getByKey(p.get(0)).toString())}else{let i=r.putNewList(s);e.XCollectionUtils.forEach(p,r=>{let o=i.addNewStructure();o.putString("Param",r.getName());let l=u.getByKey(r).toString();if(r.getParameterType()===e.FunctionalVariableParameterType.VALID_DATE&&t.m_mode===e.QModelFormat.INA_PERSISTED_QUERY_DATA&&n.getTagging().containsKey("PersistedQueryPlaceholder")){l=n.getTagging().getByKey("PersistedQueryPlaceholder")}o.putString("Value",l)})}}}else{r.putString(l,"Variable");r.putString(o,i.getName())}}}else{if(n.isManualInput()){r.putString(l,"ManualInput")}if(p===e.XValueType.CURRENT_MEMBER){r.putString(l,"CurrentMember")}if(p===e.XValueType.MEMBER_TYPE){r.putString(l,"MemberType")}if(t.m_mode===e.QModelFormat.INA_PERSISTED_QUERY_DATA&&n.getTagging().containsKey("PersistedQueryPlaceholder")){r.putString(o,n.getTagging().getByKey("PersistedQueryPlaceholder"))}else{e.QInAValueUtils.exportPlaceholderValue(t,o,r,n,i,n.getQueryModel())}}if(e.notNull(u)){let t=n.getMemberNavigations();let i=t.size();if(i>0){let n=r.putNewList(u);for(let r=0;r<i;r++){e.QInAFilterOperation.exportMemberNavigation(t.get(r),n.addNewStructure())}}}};e.QInAFilterOperation.importMemberNavigation=function(t){let n=e.QFactory.createMemberNavigation(e.CurrentMemberFunction.lookup(t.getStringByKey("Function")));if(t.containsKey("Parameters")){let i=t.getListByKey("Parameters");let r=i.size();for(let t=0;t<r;t++){let r=i.getStructureAt(t);if(r.containsKey("Navigations")){let t=r.getListByKey("Navigations");let i=t.size();for(let r=0;r<i;r++){n.addNavigation(e.QInAFilterOperation.importMemberNavigation(t.getStructureAt(r)))}}else{if(r.containsKey("Level")){let t=r.getByKey("Level");if(t.isNumeric()){n.addParameter(e.QFactory.createNavigationParameterWithLevelNumber(t.getInteger()))}else{n.addParameter(e.QFactory.createNavigationParameterWithLevelLiteral(t.getString()))}}else if(r.containsKey("Member")){n.addParameter(e.QFactory.createNavigationParameterWithMemberName(r.getStringByKey("Member")))}else if(r.containsKey("NoValuesAboveLevel")){n.addParameter(e.QFactory.createNavigationParameterWithNoValuesAboveLevel(r.getStringByKey("NoValuesAboveLevel")))}else if(r.containsKey("ErrorAboveLevel")){n.addParameter(e.QFactory.createNavigationParameterWithErrorAboveLevel(r.getStringByKey("ErrorAboveLevel")))}else if(r.containsKey("Shift")){let t=r.getStructureByKey("Shift");n.addParameter(e.QFactory.createNavigationParameterWithShift(t.getStringByKey("Level"),t.getIntegerByKey("Constant")))}else if(r.containsKey("Range")){let t=r.getStructureByKey("Range");n.addParameter(e.QFactory.createNavigationParameterWithRange(t.getStringByKey("Level"),t.getIntegerByKey("OffsetLow"),t.getIntegerByKey("OffsetHigh")))}else{let t=r.getByKey("Constant");if(t.isNumeric()){n.addParameter(e.QFactory.createNavigationParameterWithIntegerConstant(t.getInteger()))}else{n.addParameter(e.QFactory.createNavigationParameterWithStringConstant(t.getString()))}}}}}return n};e.QInAFilterOperation.importValue=function(t,n,i,r,o,l,a,s,u,p,g){let m=l.getStringByKey(s);let c=e.QInAConverter.lookupValueType(m);if(c===e.XValueType.VARIABLE){r.setFilterValueType(e.XValueType.VARIABLE);let t=l.getStringByKey(a);let i=n.getVariables().getByKey(t);if(e.isNull(i)&&e.XString.isEqual(m,"FunctionalVariable")){let r=n;i=e.QFunctionalVariable.createFunctionalVariable(r,r,t,null);r.addVariable(i)}if(e.notNull(i)){r.setVariableValue(i);if(i.getVariableType()===e.VariableType.FUNCTIONAL_VARIABLE){let t=i;if(l.containsKey(u)){let n=l.getStringByKey(u);if(!e.XCollectionUtils.hasElements(t.getParameters())){let i=e.QFunctionalVariableParameter.createParameter(null,null,e.FunctionalVariableParameterType.DEFAULT,e.XCollectionUtils.singletonList(e.XNameTextObject.create(n,null)),t);t.setParameters(e.XCollectionUtils.singletonList(i))}r.setFunctionalVariableValueParameter(t.getParameters().get(0),n)}else if(l.containsKey(p)){let n=e.XList.create();e.XStream.of(l.getListByKey(p)).forEach(i=>{let o=i.asStructure();let l=o.getStringByKey("Param");let a=o.getStringByKey("Value");let s=e.QFunctionalVariableParameter.createParameter(l,l,e.FunctionalVariableParameterType.lookup(l),e.XCollectionUtils.singletonList(e.XNameTextObject.create(a,null)),t);n.add(s);r.setFunctionalVariableValueParameter(s,a)});t.setParameters(n)}}}}else{if(c===e.XValueType.CURRENT_MEMBER){r.setFilterValueType(c)}if(c===e.XValueType.MEMBER_TYPE){r.setFilterValueType(c)}if(e.notNull(g)){let t=l.getListByKey(g);if(e.notNull(t)){let n=r.getMemberNavigations();let i=t.size();for(let r=0;r<i;r++){n.add(e.QInAFilterOperation.importMemberNavigation(t.getStructureAt(r)))}}}e.QInAValueUtils.importValue(t,r,l,a,o,i)}};e.QInAFilterOperation.setKeyValueForMemberNavigation=function(t,n,i){if(e.isNull(i)){return false}if(i.getValueType().isNumber()){t.putDouble(n,i.getDouble())}else{t.putString(n,i.toString())}return true};e.QInAFilterOperation.prototype.areVariableAndDimensionFilterSame=function(t,n){let i=t.getFilterConsideringLinkedFilters();let r=e.XCollectionUtils.hasElements(i)?i.get(0):null;let o=n.getMemberFilter();if(e.isNull(r)&&e.isNull(o)){return true}if(e.isNull(r)&&e.notNull(o)||e.notNull(r)&&e.isNull(o)){return false}let l=e.notNull(r)?r.getFieldMetadata().getName():null;let a=e.notNull(o)?o.getFieldMetadata().getName():null;if(!e.XString.isEqual(l,a)){return false}let s=r.getMemberNamesFromFilter(t.getName());let u=o.getMemberNamesFromFilter(n.getDimension().getName());return e.XObjectExt.areEqual(s,u)};e.QInAFilterOperation.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=o.getFieldMetadata();let a=e.notNull(l)?l.getName():o.getFieldName();if(e.isNull(l)&&e.XStringUtils.isNullOrEmpty(a)){return i}let s=o.getComparisonOperator();if(e.isNull(s)){s=e.ComparisonOperator.EQUAL}let u=e.notNull(l)?l.getValueType():e.XValueType.STRING;if(s.isTypeOf(e.ComparisonOperator.LIKE)||s.isTypeOf(e.ComparisonOperator.MATCH)||s.isTypeOf(e.ComparisonOperator.NOT_MATCH)){u=e.XValueType.STRING}let p=o.getContext();let g;let m=e.notNull(p)?t.isAbap(p):false;let c=e.notNull(p)?t.isHana(p):false;if(s===e.ComparisonOperator.NOT_BETWEEN&&m){g="NOTBETWEEN"}else{g=e.QInAConverter.lookupComparisonInA(s)}i.putString("Comparison",g);if(o.hasLevelOffset()){i.putInteger("LevelOffset",o.getLevelOffset())}if(o.hasDepth()){i.putInteger("Depth",o.getDepth())}if(o.getSetSign()===e.SetSign.EXCLUDING){i.putBoolean("IsExcluding",true)}let y=o.getHierarchyName();if(!c&&e.notNull(y)){let n=o.getFilterExpression()!==null?o.getFilterExpression():o.getParent().getFilterExpression();e.QInAHierarchy.exportHierarchyForFilter(t,m,i,null,n,o.getQueryManager(),a,y,o.getHierarchyDueDate(),o.getHierarchyVersion())}if(t.m_capabilities.supportsConvertToFlatFilter()&&o.isConvertToFlatFilter()){i.putBoolean("ConvertToFlatSelection",true)}let d=s.getNumberOfParameters();if(d>=1){let n=this.getValue(t,o.getLow(),o,l);e.QInAFilterOperation.exportValue(t,n,u,i,"Low","LowIs","LowParam","LowParams","LowNavigations");if(d>=2){let n=this.getValue(t,o.getHigh(),o,l);e.QInAFilterOperation.exportValue(t,n,u,i,"High","HighIs","HighParam","HighParams",null)}if(d>=3){let n=this.getValue(t,o.getThird(),o,l);e.QInAFilterOperation.exportValue(t,n,u,i,"Value3","Value3Is","Value3Param",null,null)}}return i};e.QInAFilterOperation.prototype.getComponentType=function(){return e.FilterComponentType.OPERATION};e.QInAFilterOperation.prototype.getValue=function(t,n,i,r){if(t.getMode()!==e.QModelFormat.INA_PERSISTED_QUERY_DATA){return n}let o=n;let l=i.getQueryManager();if(e.notNull(l)){let t=l.getVariableContainer();let n=r.getDimensionMetadata().getName();let a=e.XStream.of(t.getVariablesAffectingDynamicFilter()).filter(e=>e.isEnforcedDynamicValue()).find(t=>e.XString.isEqual(t.getDimension().getName(),n));if(a.isPresent()){let t=a.get();let r=this.areVariableAndDimensionFilterSame(i.getQueryModel().getDimensionByName(n),t);let s=l.getVariableProcessor();let u=l.getModelCapabilities().supportsPersistedInA()&&!s.isUsingSavedPromptsForExitVariables();if(r&&u){o=e.QFactory.createFilterValueBag(i.getContext(),i.getFilterExpression(),i);o.setFilterValueType(e.XValueType.VARIABLE);o.setVariableValue(t)}}}return o};e.QInAFilterOperation.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=n.getStringByKeyExt("Comparison","=");let a=e.QInAConverter.lookupComparison(l);if(e.isNull(a)){t.addError(e.ErrorCodes.INVALID_OPERATOR,e.XStringUtils.concatenate2("Unsupported comparison operator: ",l));return null}let s=r;let u=s.getFilterExpression();let p=s.getField();let g=e.QFactory.createFilterOperationWithOperator(u,p,a);let m=p.getValueType();let c=a.isTypeOf(e.ComparisonOperator.LIKE)||a.isTypeOf(e.ComparisonOperator.MATCH)||a.isTypeOf(e.ComparisonOperator.NOT_MATCH);if(c){m=e.XValueType.STRING}if(n.getBooleanByKeyExt("IsExcluding",false)){g.setSetSign(e.SetSign.EXCLUDING)}else{g.setSetSign(e.SetSign.INCLUDING)}g.resetDepth();let y=n.getIntegerByKeyExt("Depth",-1);if(y!==-1){g.setDepth(y)}g.resetLevelOffset();let d=n.getIntegerByKeyExt("LevelOffset",-1);if(d!==-1){g.setLevelOffset(d)}let A=n.getStructureByKey("Hierarchy");if(e.notNull(A)){let n=A.getStringByKey("Name");let i=null;let r=null;let o=g.getQueryModel();if(t.getSession().hasFeature(e.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER)&&e.notNull(o)&&o.getSystemType().isTypeOf(e.SystemType.ABAP)){let t=A.getStringByKey("DueDate");if(e.notNull(t)){i=e.XDate.createDateFromSAPFormat(t)}r=A.getStringByKey("Version")}g.setHierarchyInfo(n,i,r)}if(t.m_capabilities.supportsConvertToFlatFilter()){g.setConvertToFlatFilter(n.getBooleanByKeyExt("ConvertToFlatSelection",false))}let I=s.getSupplementFieldNames();let S=o.getVariableContainer();let f=a.getNumberOfParameters();if(f>=1){let i=g.getLow();e.QInAFilterOperation.importValue(t,S,p,i,m,n,"Low","LowIs","LowParam","LowParams","LowNavigations");e.QInAValueUtils.importSupplements(t,i,n,"LowSupplements",I);e.QInAValueUtils.importValueCompounds(t,i,n,"LowComponents")}if(f>=2){let i=g.getHigh();e.QInAFilterOperation.importValue(t,S,p,i,m,n,"High","HighIs","HighParam","HighParams",null);e.QInAValueUtils.importSupplements(t,i,n,"HighSupplements",I);e.QInAValueUtils.importValueCompounds(t,i,n,"HighComponents")}if(f>=3){let i=g.getThird();e.QInAFilterOperation.importValue(t,S,p,i,m,n,"Value3","Value3Is","Value3Param",null,null);e.QInAValueUtils.importSupplements(t,i,n,null,I);e.QInAValueUtils.importValueCompounds(t,i,n,null)}return g};e.QInAFilterTuple=function(){};e.QInAFilterTuple.prototype=new e.QInAComponentWithStructure;e.QInAFilterTuple.prototype._ff_c="QInAFilterTuple";e.QInAFilterTuple.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=e.PrFactory.createStructure();l.putString("Code","And");let a=l.putNewList("SubSelections");let s=a.addNewStructure();let u=s.putNewStructure("TuplesOperand");let p=o.getFieldNames();if(o.hasTuples()){let e=u.putNewList("Tuples");let t=o.getTuples();for(let n=0;n<t.size();n++){let i=t.get(n);let r=e.addNewList();for(let e=0;e<p.size();e++){r.addString(i.get(e))}}}if(o.hasDataSourceColumns()){let n=o.getSourceColumns();let i=o.getDataSourceForColumns();if(e.isNull(i)||n.size()!==p.size()){throw e.XException.createIllegalArgumentException("TuplesOperandFromDataSource: DataSource must be given and the number of sourceColumns must be the same as the number of FieldNames.")}let r=u.putNewList("SourceColumns");r.addAllStrings(n);let l=t.exportDataSource(i,false);u.putIfNotNull("DataSource",l)}let g=u.putNewList("FieldNames");g.addAllStrings(p);i.put("Operator",l);return i};e.QInAFilterTuple.prototype.getComponentType=function(){return e.FilterComponentType.TUPLE};e.QInAFilterTuple.prototype.importComponentWithStructure=e.noSupport;e.QInAFilterVirtualDatasource=function(){};e.QInAFilterVirtualDatasource.prototype=new e.QInAComponentWithStructure;e.QInAFilterVirtualDatasource.prototype._ff_c="QInAFilterVirtualDatasource";e.QInAFilterVirtualDatasource.prototype.createMemberOperand=function(t,n){let i=e.PrFactory.createStructure();i.putString("AttributeName",t);let r=e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.EQUAL);i.putString("Comparison",r);i.putString("Value",n);let o=e.PrFactory.createStructure();o.put("MemberOperand",i);return o};e.QInAFilterVirtualDatasource.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=e.PrFactory.createStructure();l.putString("Code","And");let a=l.putNewList("SubSelections");let s=this.createMemberOperand("SchemaName",o.getSchemaName());let u=this.createMemberOperand("PackageName",o.getPackageName());let p=this.createMemberOperand("ObjectName",o.getObjectName());a.add(s);a.add(u);a.add(p);if(t.m_capabilities.supportsVirtualDataSourceTypeColumns()){let e=this.createMemberOperand("Type",o.getTypeName());a.add(e)}i.put("Operator",l);return i};e.QInAFilterVirtualDatasource.prototype.getComponentType=function(){return e.FilterComponentType.VIRTUAL_DATASOURCE};e.QInAFilterVirtualDatasource.prototype.importComponentWithStructure=e.noSupport;e.QInAFormulaMeasure=function(){};e.QInAFormulaMeasure.prototype=new e.QInAComponentWithStructure;e.QInAFormulaMeasure.prototype._ff_c="QInAFormulaMeasure";e.QInAFormulaMeasure.exportFormulaConstantValue=function(t,n,i,r){let o=i.getValue()===null&&!e.XCollectionUtils.hasElements(i.getStringValues());let l=i.getVariable();if(o&&e.isNull(l)){n.putNull("Value")}let a=i.getValueType();if(a===e.XValueType.INTEGER){n.putString("ValueType","Number");if(!o){n.putInteger("Value",i.getInteger())}}else if(a===e.XValueType.DOUBLE||a===e.XValueType.DECIMAL_FLOAT){n.putString("ValueType","Number");if(!o){n.putDouble("Value",i.getDouble())}}else if(a===e.XValueType.LONG){n.putString("ValueType","Number");if(!o){n.putLong("Value",i.getLong())}}else if(a===e.XValueType.STRING){n.putString("ValueType","String");if(t.m_mode===e.QModelFormat.INA_PERSISTED_QUERY_DATA&&i.getTagging().containsKey("PersistedQueryPlaceholder")){n.putString("Value",i.getTagging().getByKey("PersistedQueryPlaceholder"))}else if(!o){n.putString("Value",i.getString())}}else if(a===e.XValueType.BOOLEAN){n.putString("ValueType","Bool");if(!o){n.putBoolean("Value",i.getBoolean())}}else if(a===e.XValueType.DATE){n.putString("ValueType","Date");if(t.m_mode===e.QModelFormat.INA_PERSISTED_QUERY_DATA&&i.getTagging().containsKey("PersistedQueryPlaceholder")){n.putString("Value",i.getTagging().getByKey("PersistedQueryPlaceholder"))}else if(!o){n.putString("Value",i.getDate().toString())}}else if(a===e.XValueType.DATE_TIME){let l=t.isAbap(r)?"Date":"Timestamp";let a=t.m_mode===e.QModelFormat.INA_DATA||t.m_mode===e.QModelFormat.INA_DATA_MERGE_PROCESSING||t.m_mode===e.QModelFormat.INA_PERSISTED_QUERY_DATA||t.m_mode===e.QModelFormat.INA_DATA_BLENDING_SOURCE?l:"DateTime";n.putString("ValueType",a);if(!o){n.putString("Value",i.getDateTime().toString())}}else if(a===e.XValueType.TIME){n.putString("ValueType","Time");if(!o){n.putString("Value",i.getTime().toString())}}else if(a.isSpatial()){n.putString("ValueType","String");if(!o){n.putString("Value",i.getGeometry().toWKT())}}else if(a===e.XValueType.TIMESPAN){n.putString("ValueType","String");if(!o){let e=i.getTimeSpan();n.putString("Value",e.toString())}}else if(a===e.XValueType.VARIABLE){e.QInAExportUtil.setNameIfNotNull(n,"Value",l);n.putString("ValueIs","Variable")}else if(a===e.XValueType.STRING_ARRAY){n.putString("ValueType","StringArray");if(!o){let e=i.getStringValues();let t=n.putNewList("Value");for(let n=0;n<e.size();n++){t.addString(e.get(n).getString())}}}};e.QInAFormulaMeasure.exportFormulaItem=function(t,n,i,r){e.QInAFormulaMeasure.exportFormulaItemSignFlip(t,n,i,r,false,false,null)};e.QInAFormulaMeasure.exportFormulaItemSignFlip=function(t,n,i,r,o,l,a){if(e.notNull(n)){let s=n.getComponentType();if(s===e.OlapComponentType.FORMULA_CONSTANT){let o=n;let l=i.putNewStructure("Constant");let a=o.getUnit();if(e.XStringUtils.isNotNullAndNotEmpty(a)){l.putString("Unit",a)}let s=o.getCurrency();if(e.XStringUtils.isNotNullAndNotEmpty(s)){l.putString("Currency",s)}e.QInAFormulaMeasure.exportFormulaConstantValue(t,l,o,r)}else if(s===e.OlapComponentType.FORMULA_OPERATION){let s=n;let u=i.putNewStructure("Function");u.putString("Name",s.getOperator().getDisplayString());let p=u.putNewList("Parameters");e.QInAFormulaMeasure.exportFormulaItemSignFlip(t,s.getLeftSide(),p.addNewStructure(),r,o,l,a);e.QInAFormulaMeasure.exportFormulaItemSignFlip(t,s.getRightSide(),p.addNewStructure(),r,o,l,a)}else if(s===e.OlapComponentType.FORMULA_FUNCTION){let s=n;if(o&&s.requiresExternalSignFlip()&&e.QInAFormulaMeasure.hasAccountsToSignFlip(r,s)){let o=e.QInAFormulaMeasure.signFlipFunction(n);e.QInAFormulaMeasure.exportFormulaItemSignFlip(t,o,i,r,false,false,a)}else{let n=i.putNewStructure("Function");n.putString("Name",s.getFunctionName());let u=n.putNewList("Parameters");let p=s.size();for(let n=0;n<p;n++){e.QInAFormulaMeasure.exportFormulaItemSignFlip(t,s.get(n),u.addNewStructure(),r,o,l,a)}let g=s.getSolveOrder();if(g!==0){i.putInteger("SolveOrder",g)}}}else if(s===e.OlapComponentType.FORMULA_ITEM_MEMBER){let s=n;let u=r.getQueryModel();let p=s.getVariable();let g;if(e.isNull(p)){g=e.PrFactory.createStructure();let n;if(t.m_mode===e.QModelFormat.INA_PERSISTED_QUERY_DATA&&s.getTagging().containsKey("PersistedQueryPlaceholder")){n=s.getTagging().getByKey("PersistedQueryPlaceholder")}else{n=e.QInAExportUtil.getMeasureMemberNameByAlias(u,s.getMemberName(),t)}g.putStringNotNull("Name",n);if(s.isBooked()){g.putString("NameIs","Booked");g.putStringNotNull("Name",a)}else if(s.isPrevious()){g.putString("NameIs","Previous");g.putStringNotNull("Name",a)}if(o){let n=e.QInAFormulaMeasure.exportMemberWithSignFlip(t,s,r,l);if(e.notNull(n)){i.put("Function",n.getByKey("Function"))}else{i.put("Member",g)}}else{i.put("Member",g)}}else{g=i.putNewStructure("Member");g.putString("Name",p.getName());g.putString("NameIs","Variable")}g.putStringNotNull("Dimension",s.getDimensionName())}else if(s===e.OlapComponentType.FORMULA_ITEM_ATTRIBUTE){let e=n;let t=i.putNewStructure("AttributeValue");t.putString("Name",e.getFieldName())}}};e.QInAFormulaMeasure.exportFormulaMeasure=function(t,n,i){e.QInAFormulaMeasure.exportFormulaItemSignFlip(t,n.getFormula(),i,n.getQueryModel(),n.isAutoSignFlip(),n.isAutoSignFlipRestrictedMeasureOnly(),n.getName())};e.QInAFormulaMeasure.exportMemberWithSignFlip=function(t,n,i,r){let o=i.getQueryModel();if(e.notNull(o)&&t.m_mode.isTypeOf(e.QModelFormat.INA_DATA)){let l=e.PrFactory.createStructure();if(o.getSystemType().isTypeOf(e.SystemType.BW)){let r=o.getMeasureDimension();let a=r.getStructureMember(n.getMemberName());if(e.notNull(a)){let o=null;let s;if(a.getComponentType()===e.MemberType.BASIC_MEASURE){s=a.getQueryDataCells();if(e.XCollectionUtils.hasElements(s)){o=s.get(0)}}else if(a.getComponentType()===e.MemberType.RESTRICTED_MEASURE){let t=a.getMemberForSignFlip(i);if(e.notNull(t)){let n=r.getStructureMember(t);if(e.notNull(n)){s=n.getQueryDataCells();if(e.XCollectionUtils.hasElements(s)){o=s.get(0)}}}}if(e.notNull(o)&&o.hasSignReversal()){e.QInAFormulaMeasure.exportFormulaItem(t,e.QInAFormulaMeasure.signFlipMember(n),l,i);return l}}}else{let a=o.getAccountDimension();if(e.notNull(a)){let o=a.getStructureMemberByAliasOrMember(n.getMemberName());if(e.notNull(o)&&o.getComponentType()!==e.MemberType.RESTRICTED_MEASURE&&r){return null}if(e.notNull(o)&&o.getComponentType()===e.MemberType.RESTRICTED_MEASURE){if(o.isModelDefinedMember()&&r){return null}o=a.getStructureMemberByAliasOrMember(o.getMemberForSignFlip(i))}if(e.notNull(o)){let r=o.getAccountType();if(r===e.AccountType.INC||r===e.AccountType.LEQ){if(n.getParent()!==null){let r=n.getParent().getComponentType();if(!(r===e.OlapComponentType.FORMULA_FUNCTION&&e.XString.isEqual(n.getParent().getFunctionName(),e.FormulaOperator.MEMBER_SELECT.getName()))){e.QInAFormulaMeasure.exportFormulaItem(t,e.QInAFormulaMeasure.signFlipMember(n),l,i);return l}}else{e.QInAFormulaMeasure.exportFormulaItem(t,e.QInAFormulaMeasure.signFlipMember(n),l,i);return l}}}}}}return null};e.QInAFormulaMeasure.hasAccountsToSignFlip=function(t,n){if(t.getQueryModel().getAccountDimension()===null){return false}return e.XStream.of(n).anyMatch(n=>n.getComponentType()===e.OlapComponentType.FORMULA_ITEM_MEMBER&&e.QInAFormulaMeasure.isSignFlipNeeded(t,n))};e.QInAFormulaMeasure.importFormulaMeasure=function(t,n,i,r,o){if(e.isNull(i)){return null}let l=i.getStructureByKey("Function");let a=r;if(e.notNull(l)){let r=l.getStringByKey("Name");let s=l.getListByKey("Parameters");let u=e.QFactory.createFormulaFunction(o);if(e.notNull(s)){u.setFunctionName(r);let i=s.size();for(let r=0;r<i;r++){e.QInAFormulaMeasure.importFormulaMeasure(t,n,s.getStructureAt(r),u,o)}}u.setSolveOrder(i.getIntegerByKeyExt("SolveOrder",0));if(e.isNull(a)){a=u}else{a.add(u);u.setParent(a)}}else{let r=i.getStructureByKey("Constant");if(e.notNull(r)){let i=e.QFactory.createFormulaConstant(o);if(e.XString.isEqual("Variable",r.getStringByKey("ValueIs"))){let t=r.getStringByKey("Value");if(e.XStringUtils.isNotNullAndNotEmpty(t)){let e=n.getQueryModel().getVariableManager();i.setVariable(e.getVariables().getByKey(t))}if(e.isNull(a)){a=i}else{a.add(i);i.setParent(a)}}else{let n=r.getStringByKey("ValueType");let o=!r.containsKey("Value")||r.getElementTypeByKey("Value")===e.PrElementType.THE_NULL;if(e.XString.isEqual(n,"Number")){if(o){i.setNullByType(e.XValueType.DOUBLE)}else{i.setDouble(r.getDoubleByKey("Value"))}}else if(e.XString.isEqual(n,"String")){if(o){i.setNullByType(e.XValueType.STRING)}else{i.setString(r.getStringByKey("Value"))}}else if(e.XString.isEqual(n,"Bool")){if(o){i.setNullByType(e.XValueType.BOOLEAN)}else{i.setBoolean(r.getBooleanByKey("Value"))}}else if(e.XString.isEqual(n,"DateTime")||e.XString.isEqual(n,"Timestamp")){if(o){i.setNullByType(e.XValueType.DATE_TIME)}else{i.setDateTime(e.XDateTime.createDateTimeFromStringWithFlag(r.getStringByKey("Value"),false))}}else if(e.XString.isEqual(n,"Date")){if(o){i.setNullByType(e.XValueType.DATE)}else{i.setDate(e.XDate.createDateFromStringWithFlag(r.getStringByKey("Value"),false))}}else if(e.XString.isEqual(n,"StringArray")){let t=r.getListByKey("Value");let n=e.PrUtils.asListOfString(t);i.setStringValues(n)}else{t.addError(e.ErrorCodes.INVALID_TOKEN,"Constant value type is not supported");return null}let l=r.getStringByKey("Unit");if(e.XStringUtils.isNotNullAndNotEmpty(l)){i.setUnit(l)}let s=r.getStringByKey("Currency");if(e.XStringUtils.isNotNullAndNotEmpty(s)){i.setCurrency(s)}if(e.isNull(a)){a=i}else{a.add(i);i.setParent(a)}}}else{let t=i.getStructureByKey("Member");if(e.notNull(t)){let n=e.QFactory.createFormulaMember(o);let i=t.getStringByKey("Name");n.setMemberName(i);n.setDimensionName(t.getStringByKey("Dimension"));let r=t.getStringByKey("NameIs");if(e.XString.isEqual(r,"Booked")){n.setBooked()}else if(e.XString.isEqual(r,"Previous")){n.setPrevious()}else if(e.XString.isEqual(r,"Variable")){let t=n.getQueryModel().getVariable(i);if(e.notNull(t)&&t.getVariableType().isTypeOf(e.VariableType.DIMENSION_MEMBER_VARIABLE)){n.setVariable(t)}}if(e.isNull(a)){a=n}else{a.add(n);n.setParent(a)}}else{let t=i.getStructureByKey("AttributeValue");if(e.notNull(t)){let n=t.getStringByKey("Name");let i=e.QFactory.createFormulaAttributeWithName(o,n);if(e.isNull(a)){a=i}else{a.add(i);i.setParent(a)}}}}}return a};e.QInAFormulaMeasure.importNameAndText=function(t,n,i){let r=e.QInAMember.getNameForImport(t,i);let o=e.QInAMember.getText(t,i);if(e.XStringUtils.isNullOrEmpty(r)&&e.XStringUtils.isNullOrEmpty(o)){r=t.getStringByKey("Name");o=t.getStringByKey("Description")}n.setName(r);n.setText(o)};e.QInAFormulaMeasure.isSignFlipNeeded=function(t,n){let i=t.getQueryModel();let r=i.getAccountDimension();if(e.isNull(r)){return false}let o=r.getStructureMemberByAliasOrMember(n.getMemberName());if(e.isNull(o)){return false}return o.getAccountType()===e.AccountType.INC||o.getAccountType()===e.AccountType.LEQ};e.QInAFormulaMeasure.signFlipFunction=function(t){return e.QInAFormulaMeasure.signFlipMember(t)};e.QInAFormulaMeasure.signFlipMember=function(t){let n=t.getContext();let i=e.QFactory.createFormulaOperation(n);i.setOperator(e.MathOperator.MULT);i.setLeftSide(e.QFactory.createFormulaConstantWithIntValue(n,-1));i.setRightSide(t);return i};e.QInAFormulaMeasure.prototype.getComponentType=function(){return e.MemberType.FORMULA};e.QInAGenericComponent=function(){};e.QInAGenericComponent.prototype=new e.QInAComponentWithStructure;e.QInAGenericComponent.prototype._ff_c="QInAGenericComponent";e.QInAGenericComponent.prototype.exportComponentWithStructure=function(e,t,n,i){let r=t;n.putString("Name",r.getName());n.putString("Type",t.getComponentType().getName());return n};e.QInAGenericComponent.prototype.getComponentType=function(){return e.OlapComponentType.OLAP};e.QInAGenericComponent.prototype.importComponentWithStructure=function(e,t,n,i,r){return null};e.QInAHierarchy=function(){};e.QInAHierarchy.prototype=new e.QInAComponentWithStructure;e.QInAHierarchy.prototype._ff_c="QInAHierarchy";e.QInAHierarchy.appendItemsToCatalogResult=function(t,n,i){let r=e.PrUtils.getListSize(n,0);for(let o=0;o<r;o++){let r=e.PrUtils.getStructureElement(n,o);let l=e.HierarchyCatalogItem.createCatalogItem();l.setDimensionName(i);let a;if(r.hasStringByKey("Name")){a=r.getStringByKey("Name")}else{a=r.getStringByKey("HierarchyName")}if(e.XStringUtils.isNullOrEmpty(a)||t.containsHierarchy(a)){continue}l.setHierarchyName(a);l.setHierarchyUniqueName(r.getStringByKey("UniqueName"));let s=e.PrUtils.getStringProperty(r,"Description");if(e.notNull(s)){l.setHierarchyLongText(s.getString())}let u=e.PrUtils.getStringProperty(r,"Version");if(e.notNull(u)){l.setVersionName(u.getString())}let p=e.PrUtils.getStringProperty(r,"Structure");if(e.notNull(p)){l.setHierarchyType(e.HierarchyType.lookup(p.getString()))}let g=e.PrUtils.getBooleanValueProperty(r,"IsModeled",false);l.setIsModeled(g);let m=e.PrUtils.getStringProperty(r,"DateTo");if(e.notNull(m)){let t=m.getString();if(e.XStringUtils.isNotNullAndNotEmpty(t)){l.setDateTo(e.XDate.createDateFromIsoFormat(t))}}let c=e.PrUtils.getListProperty(r,"Levels");if(e.notNull(c)){l.setSupportsHierarchyLevels(true);let t=e.XList.create();let n=e.PrUtils.getListSize(c,0);for(let i=0;i<n;i++){let n=e.PrUtils.getStructureElement(c,i);if(e.isNull(n)){continue}let r=e.HierarchyCatalogLevel.createCatalogLevel();let o=e.PrUtils.getIntegerValueProperty(n,"Level",-1);if(o>-1){r.setLevel(o)}let l=e.PrUtils.getStringProperty(n,"LevelName");if(e.notNull(l)){r.setLevelName(l.getString())}let a=e.PrUtils.getStringProperty(n,"LevelCaption");if(e.notNull(a)){r.setLevelDescription(a.getString())}let s=e.PrUtils.getStringProperty(n,"LevelUniqueName");if(e.notNull(s)){r.setLevelUniqueName(s.getString())}let u=e.PrUtils.getStringProperty(n,"DimensionName");if(e.notNull(u)){r.setLevelDimensionName(u.getString())}let p=e.PrUtils.getIntegerProperty(n,"LevelType");if(e.notNull(p)){r.setLevelType(e.QInAConverter.lookupHierarchyLevelType(p.getInteger()))}t.add(r)}l.setHierarchyLevels(t)}let y=r.getStringByKey("RestNode");if(e.notNull(y)){l.setRestNode(y)}let d=r.getStringByKey("VirtualRootNode");if(e.notNull(d)){l.setVirtualRootNode(d)}t.addItem(l)}return t};e.QInAHierarchy.exportHierarchyForFilter=function(t,n,i,r,o,l,a,s,u,p){let g=s;let m=r;if(e.notNull(g)){let r=i.putNewStructure("Hierarchy");if(e.isNull(m)&&e.notNull(l)&&l.isExecuteAutoVariableSubmit()){m=e.QInAHierarchy.getHierarchyDimension(l,a)}let c=e.QInAHierarchy.isNamePlaceHolderForAutoSubmit(m,t.getMode());let y=e.XStringUtils.isNullOrEmpty(g)&&c;if(e.notNull(m)){if(y){g=m.getHierarchyNameVariableName()}if(c&&(e.XStringUtils.isNullOrEmpty(s)||e.XString.isEqual(s,m.getHierarchyNameVariableName()))){r.putString("NameIs","Variable")}}e.QInAExportUtil.setNonEmptyString(r,"Name",g);if(n&&t.getSession().hasFeature(e.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER)){if(e.isNull(o)||!e.XString.isEqual(o.getName(),e.QFilter.FIXED_FILTER_CONTAINER)||e.notNull(l)&&l.isExecuteAutoVariableSubmit()){let n=e.QInAHierarchy.isDueDatePlaceHolderForAutoSubmit(m,t.m_mode);if(n&&e.notNull(m)){r.putString("DueDate",m.getHierarchyDueDateVariableName());r.putString("DueDateIs","Variable")}else{e.QInAExportUtil.setDate(t,r,"DueDate",u)}let i=e.QInAHierarchy.isVersionPlaceHolderForAutoSubmit(m,t.m_mode);if(i&&e.notNull(m)){r.putString("Version",m.getHierarchyVersionVariableName());r.putString("VersionIs","Variable")}else{r.putStringNotNull("Version",p)}}}}};e.QInAHierarchy.exportHierarchyNameDuedateVersion=function(t,n,i,r,o,l,a,s,u){if(!u){if(t.isAbap(i.getQueryModel())){e.QInAExportUtil.setNonEmptyString(n,"HierarchyName",o)}n.putBoolean("HierarchyActive",r)}let p=i.getQueryManager();let g=e.notNull(p)&&(p.isProcessingAutoSubmit()||!i.effectivelyUseHierarchyNameVariable()&&i.isEffectivelyUseAnyHierarchyInfoVariable());e.QInAExportUtil.setNonEmptyString(n,"Name",o);if(e.XStringUtils.isNullOrEmpty(l)||e.XString.isEqual(l,i.getHierarchyNameVariableName())){n.putString("NameIs","Variable");let t=i.getHierarchyManagerBase().isHierarchyActiveBeforeAutoSubmit();if(i.getModelCapabilities().supportsDimensionHierarchyMetadata()&&i.isHierarchyActiveByDefault()===e.TriStateBool._FALSE&&!t){n.putBoolean("HierarchyActive",false)}}else if(g&&!r){n.putBoolean("HierarchyActive",false)}if(i.useHierarchyDueDateVariable()||a){n.putString("DueDateIs","Variable");n.putString("DueDate",i.getHierarchyDueDateVariableName())}else{e.QInAExportUtil.setDate(t,n,"DueDate",i.getEffectiveHierarchyDueDate())}if(s){n.putString("VersionIs","Variable");n.putString("Version",i.getHierarchyVersionVariableName())}else{e.QInAExportUtil.setNonEmptyString(n,"Version",i.getEffectiveHierarchyVersion())}};e.QInAHierarchy.getHierarchyDimension=function(t,n){let i=null;if(e.notNull(t)){let r=t.getDimensionMemberVariables();for(let t=0;t<r.size();t++){let o=r.get(t);let l=o.getVariableType()===e.VariableType.HIERARCHY_NAME_VARIABLE;let a=l?o.getHierarchyNameDimension():o.getDimension();if(e.notNull(a)&&a.getFieldByName(n)!==null&&(o.isUsedInDynamicFilter()||o.isUsedInFixedFilter())){i=a;break}}}return i};e.QInAHierarchy.getImportedHierarchy=function(t,n,i,r,o,l){let a=null;n.getHierarchyManagerBase().setUseHierarchyNameVariable(o);if(o&&l){n.getHierarchyManagerBase().setHierarchyNameVariableName(i)}if(t.getBooleanByKey("IsTransient")){a=e.QHierarchy.createCustomHierarchy(n.getContext(),n,i,t.getStringByKey("Description"))}else if(!o||!l){if(r&&n.getHierarchy()!==null&&e.XString.isEqual(n.getHierarchy().getName(),i)){a=n.getHierarchy()}else{a=e.QHierarchy.create(n.getContext(),n,i)}if(e.notNull(a)){let e=t.getStringByKey("Description");a.setHierarchyDescription(e)}}return a};e.QInAHierarchy.hasPlaceHolderInStructure=function(t,n,i){let r=t.getStringByKey(n);let o=e.notNull(r)&&e.XString.isEqual(i,r);return o};e.QInAHierarchy.importHierarchyDrillInfo=function(t,n,i,r){let o=n.getIntegerByKeyExt("InitialDrillOffset",i.getInitialDrillOffset());let l=n.getIntegerByKeyExt("InitialDrillLevel",0);let a=i.getModelCapabilities();if(a.supportsVisibilityFilter()||!t.m_mode.isTypeOf(e.QModelFormat.INA_DATA)){i.setInitialDrillLevel(l);i.setSelectorInitialDrillLevel(l)}else{if(l===-1||o===0){i.setInitialDrillLevel(l);i.setSelectorInitialDrillLevel(l)}}i.setInitialDrillOffset(o);i.setExplicitDrillOnFilteredNodes(n.getBooleanByKeyExt("ExplicitDrillOnFilteredNodes",false));let s=e.Alignment.DEFAULT_VALUE;if(r.getModelCapabilities().supportsExpandBottomUp()){let t=n.getStringByKeyExt("LowerLevelNodeAlignment","Default");s=e.QInAConverter.lookupLowerLevelNodeAlignment(t);if(n.containsKey("ExpandBottomUp")){let t=n.getBooleanByKeyExt("ExpandBottomUp",false);if(t){s=e.Alignment.CHILDREN_ABOVE_PARENT}}}i.setLowerLevelNodeAlignment(s);let u=n.getBooleanByKeyExt("NodeCondensation",false);i.setHasNodeCondensation(u);let p=n.getStringByKeyExt("MemberOfPostedNodeVisibility","Visible");let g=e.QInAConverter.lookupResultSetVisibility(p);i.setMemberOfPostedNodeVisibility(g);if(a.supportsMaxDrillLevel()){let e=n.getIntegerByKeyExt("MaxDrillLevel",-1);i.getHierarchyManager().setMaxDrillLevel(e);let t=n.getIntegerByKeyExt("MaxRuntimeLevel",-1);i.getHierarchyManager().setMaxRuntimeLevel(t)}};e.QInAHierarchy.importHierarchyDueDate=function(t,n,i,r,o,l){let a=t.getStringByKey("DueDate");let s=e.QInAHierarchy.hasPlaceHolderInStructure(t,"DueDateIs","Variable");n.setUseHierarchyDueDateVariable(s);if(s){n.setHierarchyDueDateVariableName(e.XStringUtils.isNullOrEmpty(a)?null:a)}else if(e.notNull(i)){i.setHierarchyDueDate(e.XDate.createDateFromStringWithFlag(a,r))}if((!o||!l)&&e.notNull(i)){let n=t.getStringByKey("DateTo");i.setDateTo(e.XDate.createDateFromStringWithFlag(n,r));let o=t.getStringByKey("0DATEFROM");i.setDateFrom(e.XDate.createDateFromStringWithFlag(o,r));let l=t.getStructureByKey("Metadata");if(e.notNull(l)){n=l.getStringByKey("DateTo");if(e.XStringUtils.isNotNullAndNotEmpty(n)){i.setDateTo(e.XDate.createDateFromStringWithFlag(n,r))}o=l.getStringByKey("0DATEFROM");if(e.XStringUtils.isNotNullAndNotEmpty(o)){i.setDateFrom(e.XDate.createDateFromStringWithFlag(o,r))}}}};e.QInAHierarchy.importHierarchyVersion=function(t,n,i){let r=t.getStringByKey("Version");let o=e.QInAHierarchy.hasPlaceHolderInStructure(t,"VersionIs","Variable");n.getHierarchyManagerBase().setUseHierarchyVersionVariable(o);if(o){n.getHierarchyManagerBase().setHierarchyVersionVariableName(e.XStringUtils.isNullOrEmpty(r)?null:r)}else if(e.notNull(i)){i.setHierarchyVersion(r)}};e.QInAHierarchy.isDueDatePlaceHolderForAutoSubmit=function(t,n){let i=false;if(e.notNull(t)){let r=t.getQueryManager();i=e.notNull(r)&&r.isExecuteAutoVariableSubmit()&&(n.isTypeOf(e.QModelFormat.INA_DATA)||n===e.QModelFormat.INA_VALUE_HELP)&&t.effectivelyUseHierarchyDueDateVariable()}return i};e.QInAHierarchy.isMetadataWithAutoSubmitCapability=function(t,n){return t.getOriginalMode()===e.QModelFormat.INA_METADATA||t.getMode()===e.QModelFormat.INA_METADATA&&e.notNull(n)&&n.getModelCapabilities().supportsAutoVariableSubmit()&&n.getVariableProcessorState()===e.VariableProcessorState.CHANGEABLE_STARTUP};e.QInAHierarchy.isNamePlaceHolderForAutoSubmit=function(t,n){let i=false;if(e.notNull(t)){let r=t.getQueryManager();i=e.notNull(r)&&r.isExecuteAutoVariableSubmit()&&(n.isTypeOf(e.QModelFormat.INA_DATA)||n===e.QModelFormat.INA_VALUE_HELP)&&t.effectivelyUseHierarchyNameVariable()}return i};e.QInAHierarchy.isOptimizeHierarchyExport=function(t){return t.getSession().hasFeature(e.FeatureToggleOlap.OPTIMIZE_HIERARCHY_EXPORT)&&t.m_mode.isTypeOf(e.QModelFormat.INA_DATA)};e.QInAHierarchy.isVersionPlaceHolderForAutoSubmit=function(t,n){let i=false;if(e.notNull(t)){let r=t.getQueryManager();i=e.notNull(r)&&r.isExecuteAutoVariableSubmit()&&(n.isTypeOf(e.QModelFormat.INA_DATA)||n===e.QModelFormat.INA_VALUE_HELP)&&t.effectivelyUseHierarchyVersionVariable()}return i};e.QInAHierarchy.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=e.QInAHierarchy.isOptimizeHierarchyExport(t);if(o.supportsHierarchy()){let n=o.isHierarchyActive();let r=!n&&t.m_mode.isTypeOf(e.QModelFormat.INA_DATA);let a=t.isAbap(o.getQueryModel());let s=this.getHierarchyName(o,a,t.m_mode);let u=e.QInAHierarchy.isDueDatePlaceHolderForAutoSubmit(o,t.m_mode);let p=e.QInAHierarchy.isVersionPlaceHolderForAutoSubmit(o,t.m_mode);let g=e.QInAHierarchy.isNamePlaceHolderForAutoSubmit(o,t.m_mode);let m=e.XStringUtils.isNullOrEmpty(s)&&g;let c=s;if(m){s=o.getHierarchyNameVariableName()}if(e.XStringUtils.isNotNullAndNotEmpty(s)&&(!r||g||u||p)){e.QInAHierarchy.exportHierarchyNameDuedateVersion(t,i,o,n,s,c,u,p,l);let r=o.getQueryManager();if(e.notNull(r)&&r.isExecuteAutoVariableSubmit()&&o.useDefaultDrillLevelOnChange()){i.putBoolean("UseDefaultDrillLevelOnChange",true)}let m=0;if(!t.m_mode.isTypeOf(e.QModelFormat.INA_DATA)||!o.hasZoomDrill()||o.getTagging().containsKey(e.QTransientConstants.BW_HIERARCHY_DIMENSION)){if(o.getModelCapabilities().supportsVisibilityFilter()&&!o.isVisibilityFilterForDrillDisabled()||!t.m_mode.isTypeOf(e.QModelFormat.INA_DATA)){m=o.getInitialDrillLevel()}else{let t=o.getInitialDrillOffset();let n=o.getInitialDrillLevel();if(t===-1&&n>-1){m=0}else if(n>=t){m=o.getInitialDrillLevel()-e.XMath.max(0,t)}else{m=n}}}if(a||m!==0||!l){i.putInteger("InitialDrillLevel",m)}if(!t.m_mode.isTypeOf(e.QModelFormat.INA_DATA)){if(o.getInitialDrillOffset()!==0||i.containsKey("InitialDrillOffset")){i.putInteger("InitialDrillOffset",o.getInitialDrillOffset())}if(o.isExplicitDrillOnFilteredNodes()||i.containsKey("ExplicitDrillOnFilteredNodes")){i.putBoolean("ExplicitDrillOnFilteredNodes",o.isExplicitDrillOnFilteredNodes())}if(o.hasStickyMembers()){i.putNewList("StickyDimensionMembers").addAllStrings(o.getStickyMembers())}}let y=o.getLowerLevelNodeAlignment();if(o.getModelCapabilities().supportsExpandBottomUp()){if(l){if(y===e.Alignment.CHILDREN_ABOVE_PARENT){i.putBoolean("ExpandBottomUp",true)}}else{i.putBoolean("ExpandBottomUp",y===e.Alignment.CHILDREN_ABOVE_PARENT)}}if(a){let t;let n=o.getModelCapabilities();if(e.notNull(n)&&n.supportsExpandBottomUp()){t=e.QInAConverter.lookupLowerLevelNodeAlignmentInA(y)}else{t=e.QInAConverter.lookupLowerLevelNodeAlignmentInA2(y)}i.putString("LowerLevelNodeAlignment",t);let r=o.hasNodeCondensation();i.putBoolean("NodeCondensation",r);let l=o.getMemberOfPostedNodeVisibility();let a=e.QInAConverter.lookupResultSetVisibilityInA(l);i.putString("MemberOfPostedNodeVisibility",a)}if(o.isHierarchyNavigationDeltaMode()){i.putBoolean("HierarchyNavigationDeltaMode",true)}if(!l){this.exportHierarchyLevels(i,o,s)}let d=o.getHierarchy();if(!g&&e.notNull(d)&&d.isCustomHierarchy()){i.putBoolean("IsTransient",true);i.putStringNotNull("Description",d.getHierarchyDescription())}return i}}return null};e.QInAHierarchy.prototype.exportHierarchyLevels=function(t,n,i){if(n.getModelCapabilities().supportsDimensionHierarchyLevels()){let r=n.getHierarchies();if(e.notNull(r)){let n=r.getObjectsIterator();while(n.hasNext()){let r=n.next();if(e.XString.isEqual(r.getHierarchyName(),i)){e.QInAMdHierarchy.exportLevels(t,r);return}}}}};e.QInAHierarchy.prototype.getComponentType=function(){return e.OlapComponentType.HIERARCHY};e.QInAHierarchy.prototype.getHierarchyFromFilter=function(t,n){if(e.notNull(t)){let i=t.getComponentType();if(i.isTypeOf(e.FilterComponentType.OPERATION)){let i=t;if(e.XString.isEqual(i.getDimensionName(),n)&&e.XStringUtils.isNotNullAndNotEmpty(i.getHierarchyName())){return i.getHierarchyName()}}else if(i.isTypeOf(e.FilterComponentType.BOOLEAN_ALGEBRA)){let i=t;for(let t=0;t<i.size();t++){let r=this.getHierarchyFromFilter(i.get(t),n);if(e.notNull(r)){return r}}}}return null};e.QInAHierarchy.prototype.getHierarchyName=function(t,n,i){if(n&&t.getAxisType()===e.AxisType.FREE&&(t.isHierarchyActive()||e.QInAHierarchy.isNamePlaceHolderForAutoSubmit(t,i))){let n=t.getQueryModel().getFilter().getEffectiveFilter();let i=this.getHierarchyFromFilter(n.getFilterRootElement(),t.getName());if(e.notNull(i)){return i}}return t.getHierarchyName()};e.QInAHierarchy.prototype.getTagName=function(){return"Hierarchy"};e.QInAHierarchy.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;if(l.supportsHierarchy()){let i=l.isDisplayHierarchyFixInFilter();let r=l.getHierarchyManagerBase();r.setDisplayHierarchyFixInFilter(false);if(e.isNull(n)){l.setHierarchy(null)}else{let a=n.getStringByKey("Name")!==null?n.getStringByKey("Name"):n.getStringByKey("HierarchyName");let s=e.QInAHierarchy.hasPlaceHolderInStructure(n,"NameIs","Variable");let u=l.getQueryManager();let p=e.QInAHierarchy.isMetadataWithAutoSubmitCapability(t,u);let g=null;if(e.XStringUtils.isNotNullAndNotEmpty(a)){if((!s||!p)&&l.getModelCapabilities().supportsDimensionHierarchyLevels()){this.importHierarchyAsCatalogItem(n,l);this.importLeveledHierarchyToMetadata(t,n,o,l)}let i=e.notNull(u)&&u.isExecuteAutoVariableSubmit();g=e.QInAHierarchy.getImportedHierarchy(n,l,a,i,s,p);let r=e.notNull(u)&&u.isProcessingAutoSubmit();let m=l.useHierarchyDueDateVariable();if(!r||m){e.QInAHierarchy.importHierarchyDueDate(n,l,g,t.m_capabilities.supportsSapDate(),s,p)}let c=l.useHierarchyVersionVariable();if(!r||c){e.QInAHierarchy.importHierarchyVersion(n,l,g)}if(!s||!p){l.setHierarchy(g);let e=n.getBooleanByKeyExt("HierarchyActive",true);l.setHierarchyActive(e);l.setSelectorHierarchyActive(e)}}let m=n.getListByKey("StickyDimensionMembers");l.clearStickyMembers();if(e.XCollectionUtils.hasElements(m)){for(let e=0;e<m.size();e++){l.addStickyMember(m.getStringAt(e))}}e.QInAHierarchy.importHierarchyDrillInfo(t,n,l,o);r.setDisplayHierarchyFixInFilter(i);return g}r.setDisplayHierarchyFixInFilter(i)}return null};e.QInAHierarchy.prototype.importHierarchyAsCatalogItem=function(t,n){let i=e.PrFactory.createList();i.add(t);let r=n.getHierarchies();if(e.isNull(r)){r=e.QFactory.createHierarchyCatalogResult();e.QInAHierarchy.appendItemsToCatalogResult(r,i,n.getName());n.getHierarchyManagerBase().setHierarchies(r)}else{e.QInAHierarchy.appendItemsToCatalogResult(r,i,n.getName())}};e.QInAHierarchy.prototype.importLeveledHierarchyToMetadata=function(t,n,i,r){let o=r.getQueryModelBase().getQueryManagerBase();if(e.notNull(o)&&!e.PrUtils.isListEmpty(n.getListByKey("Levels"))){let l=o.getMetadataModelBase();let a=l.getLeveledHierarchiesBase();let s=e.QInAMdHierarchy.importLeveledHierarchy(t,i,r,n);if(!a.contains(s)){a.add(s)}}};e.QInAMember=function(){};e.QInAMember.prototype=new e.QInAComponentWithStructure;e.QInAMember.prototype._ff_c="QInAMember";e.QInAMember.determineMemberType=function(t,n,i){let r;let o=e.QInAMember.getNameForImport(n,i);if(n.containsKey("MemberType")){let i=n.getStringByKeyExt("MemberType","Measure");r=e.QInAConverter.lookupMeasureStructureMemberType(i);if(e.isNull(r)){t.addError(e.ErrorCodes.INVALID_STATE,e.XStringUtils.concatenate3("MeasureStructure->MemberType unsupported: '",i,"'"));return null}}else if(i.getModelCapabilities().supportsCustomMeasuresInMetadata()&&e.notNull(o)){if(i.getDimensionType()===e.DimensionType.ACCOUNT){r=e.MemberType.MEASURE}else{r=i.getStructureMember(o).getMemberType();if(r===e.MemberType.BASIC_MEASURE){r=e.MemberType.MEASURE}}}else{if(n.containsKey("Formula")){r=e.MemberType.FORMULA}else{let t=n.getStructureByKey("Selection");if(e.isNull(t)){r=e.MemberType.MEASURE}else{r=t.containsKey("Operator")?e.MemberType.RESTRICTED_MEASURE:e.MemberType.MEASURE}}}return r};e.QInAMember.exportAggregationType=function(t,n,i){if(t||n.hasPropertyChangedForInAData(e.QStructureMemberProperties.QY_AGGERGATION_TYPE)){let t=n.getAggregationType();if(e.notNull(t)){i.putString("Aggregation",e.QInAConverter.lookupAggregationTypeInA(t))}}};e.QInAMember.exportCustomMember=function(t,n,i){let r=n.getComponentType();if(r===e.MemberType.FORMULA||r===e.MemberType.VARIANCE||r===e.MemberType.PARETO){t.exportFormulaMeasure(n,i)}else if(r===e.MemberType.RESTRICTED_MEASURE){t.exportRestrictedMeasure(n,i)}else if(r===e.MemberType.EXCEPTION_AGGREGATION){t.exportExceptionAggregationMeasure(n,i)}else if(r===e.MemberType.CURRENCY_MEASURE){t.exportCurrencyMeasure(n,i)}else if(r===e.MemberType.UNIT_MEASURE){t.exportUnitMeasure(n,i)}};e.QInAMember.exportExceptionAggregation=function(t,n,i){if(t||n.hasPropertyChangedForInAData(e.QStructureMemberProperties.QY_EXCEPTION_AGGERGATION_TYPE)||n.hasPropertyChangedForInAData(e.QStructureMemberProperties.QY_EXCEPTION_AGGREGATION_DIMENSIONS)){let t=n.getExceptionAggregationType();if(e.notNull(t)){i.putString("ExceptionAggregation",t.getName())}let r=n.getExceptionAggregationDimensions();if(e.notNull(r)&&r.hasElements()){let e=i.putNewList("ExceptionAggregationDimensions");e.addAllStrings(r)}}};e.QInAMember.exportGenericRuntimeMemberProperties=function(t,n,i){let r=e.QInAMember.exportingInOldFormat(t,n);e.QInAMember.exportAggregationType(r,n,i);if(r||n.hasPropertyChangedForInAData(e.QStructureMemberProperties.QY_NUMERIC_SHIFT)||n.hasPropertyChangedForInAData(e.QStructureMemberProperties.QY_NUMERIC_SHIFT_PERCENT)){if(!t.m_capabilities.supportsDataCells()){if(n.isNumericShiftPercent()&&t.m_capabilities.supportsNumericShiftPercent()&&n.getModelCapabilities().supportsNumericShiftPercent()){i.putString("NumericShift","%")}else{e.QInAExportUtil.setIntegerIfNotNull(i,"NumericShift",n.getNumericShift())}}}if(!t.m_capabilities.supportsDataCells()||n.getModelCapabilities().supportsExtendedKeyFigureProperties()){if(r||n.hasPropertyChangedForInAData(e.QStructureMemberProperties.QY_NUMERIC_SCALE)){let t=n.getNumericScale();if(e.notNull(t)&&t.getInteger()>=0){i.putInteger("NumericScale",t.getInteger())}}if(r||n.hasPropertyChangedForInAData(e.QStructureMemberProperties.QY_NUMERIC_PRECISION)){let t=n.getNumericPrecision();if(e.notNull(t)&&t.getInteger()>=0){i.putInteger("NumericPrecision",t.getInteger())}}}if(t.m_capabilities.supportsCurrencyTranslation()){i.putStringNotNullAndNotEmpty("CurrencyTranslationName",n.getMappedCurrencyTranslationNameForInAData())}if(t.m_capabilities.supportsUnitTranslation()){i.putStringNotNullAndNotEmpty("UnitTranslationName",n.getUnitTranslationName())}if(t.m_capabilities.supportsSupportsRunningAggregation()&&n.isRunningAggregationDefined()){if(n.getQueryModel().getRunningAggregationManager().isRunningAggregationSubmitAvailable(n.getDimension().getAxisType())){i.putStringNotNullAndNotEmpty("RunningAggregation",e.QInAConverter.lookupRunningAggregationOperatorInA(n.getRunningAggregationOperator()));i.putStringNotNullAndNotEmpty("RunningAggregationInitDim",n.getRunningAggregationInitDimension())}}if(r||n.hasPropertyChangedForInAData(e.QDimensionMemberProperties.QY_VISIBILITY)){if(t.m_capabilities.supportsMemberVisibility()){let t=n.getResultVisibility();if(e.isNull(t)){t=e.ResultVisibility.VISIBLE}i.putString("Visibility",e.QInAConverter.lookupResultSetVisibilityInA(t))}}let o=n.getPresentationSignReversal();if(i.getByKey("PresentationSignReversal")===null&&e.notNull(o)){i.putBoolean("PresentationSignReversal",o.getBoolean())}if(r||n.hasPropertyChangedForInAData(e.QStructureMemberProperties.QY_UNIT_TYPE)){i.putStringNotNullAndNotEmpty("UnitType",e.QInAConverter.lookupUnitTypeInA(n.getUnitType()))}if(r||n.hasPropertyChangedForInAData(e.QStructureMemberProperties.QY_UNIT_FIXED)){i.putStringNotNull("UnitFixed",n.getUnitFixed())}if(!t.getMode().isDataBlending()){i.putStringNotNull("UnitName",n.getUnitName());i.putStringNotNull("UnitTextName",n.getUnitTextName());i.putStringNotNull("DataType",e.QInAConverter.lookupValueTypeInA(n.getDataType()))}e.QInAMember.exportPostAggregation(n,i);e.QInAMember.exportIgnoreExternalDimensions(r,t,n,i);e.QInAMember.exportExceptionAggregation(r,n,i);e.QInAMember.exportWindowFunction(n,i);let l=n.getSolveOrder();if(l!==0){i.putInteger("SolveOrder",l)}};e.QInAMember.exportIgnoreExternalDimensions=function(t,n,i,r){if(n.m_capabilities.supportsIgnoreExternalDimensions()){if(i.isIgnoringAllExternalDimensions()){if(t||i.hasPropertyChangedForInAData(e.QStructureMemberProperties.QY_IGNORE_EXTERNAL_DIMENSIONS)){r.putString("IgnoreExternalDimensions","All")}}else{let n=e.XList.create();if(i.getMemberType()===e.MemberType.RESTRICTED_MEASURE){let e=i;n.addAll(e.getTransientIgnoredExternalDimensions())}let o=i.getIgnoredExternalDimensions();n.addAll(o);if(n.hasElements()&&(t||i.hasPropertyChangedForInAData(e.QStructureMemberProperties.QY_IGNORE_EXTERNAL_DIMENSIONS)||n.size()!==o.size())){let e=r.putNewList("IgnoreExternalDimensions");e.addAllStrings(n)}}}};e.QInAMember.exportPostAggregation=function(t,n){let i=t.getPostAggregationType();if(e.notNull(i)){n.putString("PostAggregation",e.QInAConverter.lookupAggregationTypeInA(i))}if(t.isPostAggregationIgnoringHierarchy()){n.putBoolean("PostAggregationIgnoreHierarchy",true)}let r=t.getPostAggregationDimensions();if(r.hasElements()){let t=n.putNewList("PostAggregationDimensions");let i=r.getIterator();while(i.hasNext()){t.add(e.PrFactory.createString(i.next()))}}};e.QInAMember.exportText=function(t,n,i){let r=i.getOriginalText();let o=t.isAbap(i);if(o||e.notNull(r)){n.putString("Description",r)}};e.QInAMember.exportWindowFunction=function(t,n){let i=t.getWindowFunction();if(e.notNull(i)){let t=n.putNewStructure("WindowFunction");t.putString("Name",e.QInAConverter.lookupWindowFunctionTypeInA(i.getType()));let r=i.getNotInPartitionDimensions();let o=t.putNewList("DimensionsNotInPartition");o.addAllStrings(r);let l=t.putNewList("SortDimensions");let a=i.getSortDimensions().getIterator();while(a.hasNext()){let t=a.next();let n=l.addNewStructure();n.putString("Name",t.getName());let i=t.getDirection();if(i===e.XSortDirection.ASCENDING||i===e.XSortDirection.DESCENDING){n.putString("Direction",e.QInAConverter.lookupSortDirectionInA2(i))}let r=t.getNulls();if(e.notNull(r)&&r!==e.NullsType.NONE){n.putString("Nulls",e.QInAConverter.lookupNullsTypeInA(r))}}let s=i.getFrame();if(e.notNull(s)){let n=t.putNewStructure("Frame");n.putString("Start",e.QInAConverter.lookupFrameStartTypeInA(s.getStart()));n.putInteger("StartPreceding",s.getStartPreceding());n.putString("End",e.QInAConverter.lookupFrameEndTypeInA(s.getEnd()));n.putInteger("EndFollowing",s.getEndFollowing())}}};e.QInAMember.exportingInOldFormat=function(t,n){let i=t.getMode().isDataBlending()||e.QueryManagerMode.BLENDING===n.getQueryManager().getInitSettings().getMode();let r=n.getCurrencyTranslation();let o=e.notNull(r)&&r.isIgnore();return i||!n.isAvailableInMetadata()||!n.getModelCapabilities().supportsNamedCustomMember()||e.XStringUtils.isNotNullAndNotEmpty(n.getCurrencyTranslationName())&&o};e.QInAMember.getNameForImport=function(t,n){let i=t.getStringByKey("Name");if(e.isNull(i)&&e.notNull(n)){i=e.QInAMember.getValueByFieldName(t,n.getFlatKeyField(),n.getHierarchyKeyField())}return i};e.QInAMember.getText=function(t,n){let i=t.getStringByKey("Description");if(e.isNull(i)&&e.notNull(n)){i=e.QInAMember.getValueByFieldName(t,n.getFlatTextField(),n.getHierarchyTextField())}return i};e.QInAMember.getValueByFieldName=function(t,n,i){let r=null;if(e.notNull(n)){r=t.getStringByKey(n.getName())}if(e.isNull(r)&&e.notNull(i)){r=t.getStringByKey(i.getName())}return r};e.QInAMember.importAggregationType=function(t,n,i){let r=t.getAggregationType();if(i){t.setAggregationType(null)}let o=n.getStringByKey("Aggregation");if(e.XStringUtils.isNotNullAndNotEmpty(o)){t.setAggregationType(e.QInAConverter.lookupAggregationType(o))}else if(n.getBooleanByKeyExt("ModelDefinedMember",false)&&t.getDimension()!==null&&t.getDimension().getDimensionType()!==e.DimensionType.ACCOUNT){if(e.isNull(r)){t.setAggregationType(e.AggregationType.SUM)}else{t.setAggregationType(r)}}};e.QInAMember.importCurrencyTranslation=function(e,t){if(t.containsKey("CurrencyTranslationName")){e.setCurrencyTranslationName(t.getStringByKey("CurrencyTranslationName"))}};e.QInAMember.importGenericMemberProperties=function(t,n,i){if(n.getQueryModel().isBasicMeasureSettingsExportedInRepo()||!n.isCreatedFromMetadata()){if(i.containsKey("NumericShift")){if(e.XString.isEqual("%",i.getStringByKey("NumericShift"))){n.setNumericShiftPercent(true)}else{n.setNumericShift(i.getIntegerByKey("NumericShift"))}}if(i.containsKey("NumericScale")){n.setNumericScale(i.getIntegerByKey("NumericScale"))}if(i.containsKey("NumericPrecision")){n.setNumericPrecision(i.getIntegerByKey("NumericPrecision"))}}if(n.getModelCapabilities().supportsMemberVisibility()){let t=i.getStringByKeyExt("Visibility","Visible");n.setResultVisibility(e.QInAConverter.lookupResultSetVisibility(t))}let r=i.getStringByKey("PostAggregation");let o=e.QInAConverter.lookupAggregationType(r);n.setPostAggregationType(o);if(i.containsKey("PostAggregationIgnoreHierarchy")){n.setPostAggregationIgnoreHierarchy(true)}n.clearPostAggregationDimensions();let l=i.getListByKey("PostAggregationDimensions");if(e.notNull(l)){let e=l.size();for(let t=0;t<e;t++){n.addPostAggregationDimensionName(l.getStringAt(t))}}e.QInAMember.importWindowFunction(n,i);e.QInAMember.importCurrencyTranslation(n,i);e.QInAMember.importUnitTranslation(n,i);e.QInAMember.importRunningAggregation(n,i)};e.QInAMember.importGenericRuntimeMemberProperties=function(t,n,i){if(n.getQueryModel().isBasicMeasureAggregationExportedInRepo()||!n.isCreatedFromMetadata()){let t=i.getBooleanByKeyExt("ModelDefinedMember",false);let r=t&&n.getQueryManager().getInitSettings().getProviderType()===e.ProviderType.LIST_REPORTING;if(!r){e.QInAMember.importAggregationType(n,i,true)}}e.QInAMember.importGenericMemberProperties(t,n,i);if(i.containsKey("DataType")){n.setDataType(e.QInAConverter.lookupValueType(i.getStringByKey("DataType")))}e.QInAMember.importIgnoredExternalDimensions(t,n,i);e.QInAMember.importSolveOrder(n,i);e.QInAMember.importCurrencyTranslation(n,i);e.QInAMember.importUnitTranslation(n,i);e.QInAMember.importRunningAggregation(n,i)};e.QInAMember.importIgnoredExternalDimensions=function(t,n,i){if(t.m_capabilities.supportsIgnoreExternalDimensions()){if(i.hasStringByKey("IgnoreExternalDimensions")){let t=i.getStringByKey("IgnoreExternalDimensions");if(e.XString.isEqual(t,"All")){n.setIgnoreAllExternalDimensions(true)}}else if(i.containsKey("IgnoreExternalDimensions")){let t=i.getListByKey("IgnoreExternalDimensions");n._setExternalDimensionsToIgnore(e.PrUtils.asListOfString(t))}}};e.QInAMember.importMeasure=function(t,n,i,r,o){let l;l=e.QInAMember.determineMemberType(t,n,o);if(n.containsKey("MemberType")&&e.isNull(l)){return null}return t.importStructureMemberExt(l,n,o,i)};e.QInAMember.importRunningAggregation=function(t,n){if(n.containsKey("RunningAggregation")){let i=e.QInAConverter.lookupRunningAggregationOperator(n.getStringByKey("RunningAggregation"));let r=t.getMemberType();if(r===e.MemberType.BASIC_MEASURE||r===e.MemberType.RESTRICTED_MEASURE){let e=t;e.setRunningAggregationOperator(i);if(n.containsKey("RunningAggregationInitDim")){e.setRunningAggregationInitDimension(n.getStringByKey("RunningAggregationInitDim"))}}}};e.QInAMember.importSolveOrder=function(e,t){let n=t.getIntegerByKeyExt("SolveOrder",0);if(n!==0){e.setSolveOrder(n)}};e.QInAMember.importUnitTranslation=function(e,t){if(t.containsKey("UnitTranslationName")){e.setUnitTranslationName(t.getStringByKey("UnitTranslationName"))}};e.QInAMember.importWindowFunction=function(t,n){let i=n.getStructureByKey("WindowFunction");if(e.notNull(i)){let n=e.QWindowFunction._createWindowFunction(e.QInAConverter.lookupWindowFunctionType(i.getStringByKey("Name")));let r=i.getListByKey("DimensionsNotInPartition");if(e.notNull(r)){for(let e=0;e<r.size();e++){n.addNotInPartitionDimension(r.getStringAt(e))}}let o=i.getListByKey("SortDimensions");if(e.notNull(o)){for(let t=0;t<o.size();t++){let i=o.getStructureAt(t);let r=i.getStringByKey("Name");let l=e.QInAConverter.lookupSortDirection2(i.getStringByKey("Direction"));let a=e.QInAConverter.lookupNullsType(i.getStringByKey("Nulls"));n.addSortDimension(r,l,a)}}let l=i.getStructureByKey("Frame");if(e.notNull(l)){n.setFrame(e.QInAConverter.lookupFrameStartType(l.getStringByKey("Start")),l.getIntegerByKey("StartPreceding"),e.QInAConverter.lookupFrameEndType(l.getStringByKey("End")),l.getIntegerByKey("EndFollowing"))}t.setWindowFunction(n)}};e.QInAMember.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n.getComponentType();if(o.isTypeOf(e.MemberType.MEASURE)){let r=n;t.exportExceptions(r,i);if(o===e.MemberType.BASIC_MEASURE){let o=true;if(!r.getQueryModel().isExportingEachMeasure()){let i=n;if(t.m_capabilities.supportsExceptionsV2()||!e.XCollectionUtils.hasElements(i.getExceptions())){o=false}}if(o){t.exportBasicMeasure(n,i)}}else{e.QInAMember.exportCustomMember(t,n,i)}if(i.hasElements()){e.QInAMember.exportGenericRuntimeMemberProperties(t,r,i)}}return i};e.QInAMember.prototype.getComponentType=function(){return e.MemberType.ABSTRACT_MEMBER};e.QInAMember.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=o.getQueryModel();let a=r;if(e.isNull(a)){a=l.getMeasureDimension()}let s=e.QInAMember.importMeasure(t,n,o,l,a);if(e.notNull(s)){e.QInAMember.importGenericRuntimeMemberProperties(t,s,n);if(n.containsKey("PresentationSignReversal")){s.setPresentationSignReversal(n.getBooleanByKey("PresentationSignReversal"))}let i=n.getIntegerByKeyExt("[Measures].[Aggregation]",-1);let o=e.QInAConverter.lookupAggregationType2(i);if(e.notNull(o)){s.setAggregationType(o)}let u=a.isMeasureStructure()?"[Measures].[MemberDetails]":"[CustomDimension2].[MemberDetails]";if((l.isBasicMeasureSettingsExportedInRepo()||!s.isCreatedFromMetadata())&&!e.XCollectionUtils.hasElements(n.getStructureByKey(u))){this.setPrecisionAndScale(t,n,l,s);s.setUnitType(e.QInAConverter.lookupUnitType(n.getStringByKey("UnitType")));s.setUnitFixed(n.getStringByKey("UnitFixed"));s.setUnitName(n.getStringByKey("UnitName"));s.setUnitTextName(n.getStringByKey("UnitTextName"))}t.importExceptions(n,s);if(e.notNull(r)){let i=a.getModelCapabilities();if(e.notNull(i)&&i.supportsExceptionAggregationDimsFormulas()||t.m_capabilities.supportsExceptionAggregationDimsFormulas()){s.clearExceptionAggregationDimensions()}s.setExceptionAggregationType(null);this.importExceptionAggregationProperties(n,s)}this.importUniversalModelProperties(t,n,s);if(e.QueryModelUtils.isDWCModelWithCustomDimension2MemberMetadata(l)&&s.getSolveOrder()===e.QStructureMemberSolveOrder.DSP_LEADING_STRUCTURE&&!l.getMetadataPropertiesBase().containsKey("LeadingStructure")){let e=a===l.getPrimaryCalculationDimension()?"MeasureStructure":"SecondaryStructure";l.getMetadataPropertiesBase().put("LeadingStructure",e)}this.importInternalDataType(n,s)}return s};e.QInAMember.prototype.importExceptionAggregationProperties=function(t,n){let i=t.getListByKey("ExceptionAggregationDimensions");if(e.notNull(i)){let e=i.size();for(let t=0;t<e;t++){n.addExceptionAggregationDimensionName(i.getStringAt(t))}}n.setExceptionAggregationType(e.AggregationType.lookupOrCreate(t.getStringByKey("ExceptionAggregation")))};e.QInAMember.prototype.importInternalDataType=function(t,n){if(n.getDataTypeInternal()===null&&t.containsKey("[Measures].[SQLType]")){let i=t.getStringByKey("[Measures].[SQLType]");if(e.XStringUtils.isNotNullAndNotEmpty(i)){if(e.XString.startsWith(i,e.XStringUtils.concatenate2("DECIMAL","("))){n.setDataTypeInternal(e.XValueType.DECIMAL_FLOAT);let t=e.XString.size("DECIMAL")+1;let r=e.XString.indexOf(i,",");let o=e.XString.size(i)-1;if(r>t&&r<o){let l=e.XString.substring(i,t,r);let a=e.XString.substring(i,r+1,o);n.setDataTypePrecision(e.XInteger.convertFromString(l));n.setDataTypeScale(e.XInteger.convertFromString(a))}}else if(e.XString.startsWith(i,"SMALLDECIMAL")){n.setDataTypeInternal(e.XValueType.SMALL_DECIMAL)}else if(e.XString.startsWith(i,"DOUBLE")){n.setDataTypeInternal(e.XValueType.DOUBLE)}else if(e.XString.startsWith(i,"REAL")){n.setDataTypeInternal(e.XValueType.REAL)}else if(e.XString.startsWith(i,"INTEGER")||e.XString.isEqual(i,"INT")){n.setDataTypeInternal(e.XValueType.INTEGER)}else if(e.XString.startsWith(i,"TINYINT")){n.setDataTypeInternal(e.XValueType.TINYINT)}else if(e.XString.startsWith(i,"SMALLINT")){n.setDataTypeInternal(e.XValueType.SMALLINT)}else if(e.XString.startsWith(i,"BIGINT")){n.setDataTypeInternal(e.XValueType.BIGINT)}else if(e.XString.isEqual(i,"DATE")){n.setDataTypeInternal(e.XValueType.DATE)}else if(e.XString.isEqual(i,"TIME")){n.setDataTypeInternal(e.XValueType.TIME)}else if(e.XString.isEqual(i,"TIMESTAMP")){n.setDataTypeInternal(e.XValueType.DATE_TIME)}else if(e.XString.isEqual(i,"SECONDDATE")){n.setDataTypeInternal(e.XValueType.SECOND_DATE)}else if(e.XString.isEqual(i,"BOOLEAN")){n.setDataTypeInternal(e.XValueType.BOOLEAN)}}}};e.QInAMember.prototype.importUniversalModelProperties=function(t,n,i){let r=i.getModelCapabilities();if(e.notNull(r)&&r.supportsCustomMeasuresInMetadata()){let r=i.getDimension().isMeasureStructure()?"[Measures].[MemberDetails]":"[CustomDimension2].[MemberDetails]";let o=n.getStructureByKey(r);if(e.notNull(o)){if(e.XStringUtils.isNullOrEmpty(i.getText())&&o.hasStringByKey("Description")){i.setText(o.getStringByKey("Description"))}let r=e.PrUtils.getIntegerProperty(o,"NumericShift");if(e.notNull(r)){i.setNumericShift(r.getInteger())}else if(e.XString.isEqual("%",o.getStringByKey("NumericShift"))){i.setNumericShiftPercent(true)}let l=e.PrUtils.getIntegerProperty(o,"NumericScale");if(e.notNull(l)){i.setNumericScale(l.getInteger())}let a=e.PrUtils.getIntegerProperty(o,"NumericPrecision");if(e.notNull(a)){i.setNumericPrecision(a.getInteger())}this.importExceptionAggregationProperties(o,i);if(o.hasElements()){i.setUnitType(e.QInAConverter.lookupUnitType(o.getStringByKey("UnitType")));i.setUnitFixed(o.getStringByKey("UnitFixed"))}else{i.setUnitType(e.QInAConverter.lookupByEncodedValue(n.getIntegerByKey("[Measures].[UnitType]")));i.setUnitFixed(n.getStringByKey("[Measures].[UnitFixed]"))}e.QInAMember.importIgnoredExternalDimensions(t,i,o);e.QInAMember.importSolveOrder(i,o);e.QInAMember.importCurrencyTranslation(i,o);e.QInAMember.importUnitTranslation(i,o);e.QInAMember.importRunningAggregation(i,o);if(i.getModelCapabilities().supportsMemberVisibility()){let t=o.getStringByKeyExt("Visibility","Visible");i.setResultVisibility(e.QInAConverter.lookupResultSetVisibility(t))}let s=e.QInAConverter.lookupAggregationType(o.getStringByKey("Aggregation"));if(e.notNull(s)&&s!==i.getAggregationType()){i.setAggregationType(s)}}}};e.QInAMember.prototype.setPrecisionAndScale=function(e,t,n,i){let r=-1;let o=-1;if(e.isAbap(n)){r=t.getIntegerByKeyExt("Digits",-1);let e=n.getModelCapabilities().supportsDataCells()&&n.getModelCapabilities().supportsUnifiedDataCells();if(!e){o=t.getIntegerByKeyExt("FractDigits",-1)}}else{r=t.getIntegerByKeyExt("[Measures].[Digits]",-1);o=t.getIntegerByKeyExt("[Measures].[FractDigits]",-1)}if(r!==-1){i.setNumericPrecision(r)}if(o!==-1){i.setNumericScale(o)}};e.QInAMemberBasicMeasure=function(){};e.QInAMemberBasicMeasure.prototype=new e.QInAComponentWithStructure;e.QInAMemberBasicMeasure.prototype._ff_c="QInAMemberBasicMeasure";e.QInAMemberBasicMeasure.exportBasicMeasure=function(t,n,i,r){if(!i.getModelCapabilities().supportsExceptionAggregationDimsFormulas()){let t=i.getAggregationDimensionName();if(e.notNull(t)){n.putString("AggregationDimension",t)}}if(!t.m_capabilities.supportsExtendedSort()&&!t.isVirtualInA(r)){let t=r.getSortingManager().getMeasureSorting(i,false);if(e.isNull(t)){n.putInteger("SortOrder",0)}else{n.putInteger("SortOrder",e.QInAConverter.lookupSortDirectionInA(t.getDirection()))}}};e.QInAMemberBasicMeasure.getNameFromOperand=function(t){let n=t.getStructureByKey("MemberOperand");if(e.notNull(n)){let t=e.XString.isEqual(n.getStringByKey("AttributeName"),"Measures");let i=e.QInAConverter.lookupComparison(n.getStringByKey("Comparison"))===e.ComparisonOperator.EQUAL;if(t&&i){return n.getStringByKey("Value")}}return null};e.QInAMemberBasicMeasure.importExceptionAggregation=function(t,n,i){if(n.getModelCapabilities().supportsExceptionAggregationDimsFormulas()){i.clearExceptionAggregationDimensions();i.setExceptionAggregationType(null);let n=t.getListByKey("ExceptionAggregationDimensions");if(e.notNull(n)){let e=n.size();for(let t=0;t<e;t++){i.addExceptionAggregationDimensionName(n.getStringAt(t))}}let r=t.getStringByKey("ExceptionAggregation");i.setExceptionAggregationType(e.AggregationType.lookupOrCreate(r))}else{let n=t.getStringByKey("AggregationDimension");if(e.XStringUtils.isNotNullAndNotEmpty(n)){i.setAggregationDimensionName(n)}}};e.QInAMemberBasicMeasure.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;if(o.getDimension().getDimensionType()===e.DimensionType.ACCOUNT){i.putString("Name",o.getName());return i}let l=o.getQueryModel();if(!l.getModelCapabilities().supportsNamedCustomMember()){let n=o.getExceptionAggregationType();if(!o.isAvailableInMetadata()&&n===e.AggregationType.COUNT){this.exportMeasureReference(t,i,"Name",o.getKeyFieldValue(),l);if(t.m_capabilities.supportsUniversalModel()){this.exportMeasureReference(t,this.getMemberOperandElement(t,i,o,l),"Value",e.XValueAccess.createWithValue(e.XStringValue.create("$$Count$$")),l)}e.QInAMember.exportText(t,i,o)}else{this.exportMeasureReference(t,this.getMemberOperandElement(t,i,o,l),"Value",o.getKeyFieldValue(),l)}}else{this.exportMeasureReference(t,i,"MemberName",o.getKeyFieldValue(),l)}e.QInAMemberBasicMeasure.exportBasicMeasure(t,i,o,l);if(l.getModelCapabilities().supportsCorrectDimensionDescriptionExt()){let t=n;let r=t.getDimension().getTextField();if(e.notNull(r)){let n=t.getDimension().getAlternativeFieldValue(false,t.getName(),r.getName(),null);if(t.isModelDefinedMember()&&e.notNull(n)){i.putStringNotNullAndNotEmpty("Description",o.getText())}}}if(o.getTagging().containsKey(e.QTransientConstants.TAG_OVERRIDE_DESCRIPTION)){i.putStringNotNullAndNotEmpty("Description",o.getTagging().getByKey(e.QTransientConstants.TAG_OVERRIDE_DESCRIPTION))}if(t.getMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING&&o.isAvailableInMetadata()&&o.getModCounter()>0){i.putBoolean(e.InAQueryMergeConstants.TAG_MEASURE_MEMBER_TOUCHED,true)}return i};e.QInAMemberBasicMeasure.prototype.exportMeasureReference=function(t,n,i,r,o){e.QInAValueUtils.exportPlaceholderValue(t,i,n,r,r.getValueType(),o)};e.QInAMemberBasicMeasure.prototype.getComponentType=function(){return e.MemberType.BASIC_MEASURE};e.QInAMemberBasicMeasure.prototype.getMemberOperandElement=function(t,n,i,r){let o=e.PrFactory.createStructure();o.putString("AttributeName","Measures");n.put("MemberOperand",o);o.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.EQUAL));if(t.isVirtualInA(r)){o.putStringNotNullAndNotEmpty("Description",i.getText())}return o};e.QInAMemberBasicMeasure.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=r;let a=e.QInAMember.getNameForImport(n,l);let s=e.QInAMember.getText(n,l);if(e.XStringUtils.isNullOrEmpty(a)){a=e.QInAMemberBasicMeasure.getNameFromOperand(n)}let u=l.getStructureMember(a);let p=u;if(e.isNull(p)&&e.notNull(a)){if(!n.containsKey("Selection")){p=l.addNewBasicMeasure(a,s)}}if(e.notNull(p)){e.QInAMemberBasicMeasure.importExceptionAggregation(n,l.getQueryModel(),p);t.importExceptions(n,p)}return p};e.QInAMemberRestrictedMeasure=function(){};e.QInAMemberRestrictedMeasure.prototype=new e.QInAComponentWithStructure;e.QInAMemberRestrictedMeasure.prototype._ff_c="QInAMemberRestrictedMeasure";e.QInAMemberRestrictedMeasure.addVirtualMeasureCountSelection=function(t){let n=e.PrFactory.createStructure();let i=n.putNewStructure("SetOperand");i.putString("FieldName",t.getDimension().getKeyField().getName());let r=i.putNewList("Elements");let o=e.PrFactory.createStructure();r.add(o);o.putString("Comparison","=");o.putString("Low","$$Count$$");return n};e.QInAMemberRestrictedMeasure.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=e.QInAMember.exportingInOldFormat(t,o);let a=l?"Name":"MemberName";i.putString(a,o.getName());e.QInAMember.exportText(t,i,o);if(!o.supportsExceptionAggregationDimsFormulas()){let t=o.getAggregationDimensionName();if(e.notNull(t)){i.putString("AggregationDimension",t)}}let s=null;let u=o.getFilterRootWithTransientTimeSelection();if(e.isNull(u)){if(o.getFilterOnVirtualMeasureCount()&&this.isExceptionAggregationTypeOfCount(o.getExceptionAggregationType())){s=e.QInAMemberRestrictedMeasure.addVirtualMeasureCountSelection(o)}else if(o.getAggregationDimensionName()!==null){s=e.PrFactory.createStructure();let t=e.XStringBuffer.create();t.append(o.getName()).append(":").append(o.getAggregationDimensionName());s.putString("MeasureOperand",t.toString())}}else if(l){s=t.exportFilterElement(u)}if(e.notNull(s)){i.put("Selection",s)}if(o.hasVisibilityFilter()&&o.getModelCapabilities().supportsCustomDimensionMemberVisibilityFilter()){let n=t.exportFilterExpression(o.getVisibilityFilter());if(e.notNull(n)){i.put("VisibilityFilter",n)}}this.exportPresentationSignReversal(t,o,i);return i};e.QInAMemberRestrictedMeasure.prototype.exportPresentationSignReversal=function(t,n,i){if(!n.isAutoSignFlip()){return}let r=n.getDimension();let o=r.getQueryModel();let l=n.getFilter();if(r.getDimensionType()!==e.DimensionType.ACCOUNT||e.isNull(l)){return}if(n.requiresPresentationSignReversal(o)){i.putBoolean("PresentationSignReversal",true)}};e.QInAMemberRestrictedMeasure.prototype.getComponentType=function(){return e.MemberType.RESTRICTED_MEASURE};e.QInAMemberRestrictedMeasure.prototype.importComponentWithStructure=function(t,n,i,r,o){let l;if(e.isNull(i)){let t=r;let i=e.QInAMember.getNameForImport(n,t);let o=e.QInAMember.getText(n,t);if(t.getModelCapabilities().supportsCustomMeasuresInMetadata()&&t.getStructureMember(i)!==null){l=t.getStructureMember(i)}else{l=t.addNewRestrictedMeasure(i,o)}}else{l=i}let a=n.getStringByKey("AggregationDimension");if(e.XStringUtils.isNotNullAndNotEmpty(a)){l.setAggregationDimensionName(a)}let s=n;if(l.getModelCapabilities().supportsCustomMeasuresInMetadata()){let e=l.getDimension().isMeasureStructure()?"[Measures].[MemberDetails]":"[CustomDimension2].[MemberDetails]";s=n.getStructureByKey(e)}t.importFilterExpression(l.getFilter(),s,l,o);let u=n.getStructureByKey("VisibilityFilter");if(e.notNull(u)&&l.getModelCapabilities().supportsCustomDimensionMemberVisibilityFilter()){let e=l.getVisibilityFilter();t.importFilterExpression(e,u,l,o)}t.importExceptions(s,l);return l};e.QInAMemberRestrictedMeasure.prototype.isExceptionAggregationTypeOfCount=function(t){return t===e.AggregationType.COUNT||t===e.AggregationType.COUNT_NULL||t===e.AggregationType.COUNT_NULL_ZERO};e.QInAMembersAll=function(){};e.QInAMembersAll.prototype=new e.QInAComponentWithStructure;e.QInAMembersAll.prototype._ff_c="QInAMembersAll";e.QInAMembersAll.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=o.getStructureLayout();if(e.notNull(l)){let n=o.isMeasureStructure();if(!n&&l.isEmpty()&&o.getStructureMemberLazyLoader()===null){return null}let r=i.putNewList("Members");let a=e.XHashSetOfString.create();let s=l.size();let u=null;for(let n=0;n<s;n++){let i=l.get(n);if(e.notNull(i)&&!i.isReleased()){let n=null;let l=i.getTagging();if(o.getDimensionType()===e.DimensionType.ACCOUNT&&i.isModelDefinedMember()&&!l.containsKey(e.QTransientConstants.TAG_SERIALIZE_MEMBER)){continue}if(l.containsKey(e.QTransientConstants.TAG_IS_INTEROP_GENERATED)){if(e.isNull(u)){u=o.getConvenienceCommands().getCustomStructureMembersInUse()}if(!u.contains(i.getName())){continue}}let s=i.exportRuntimeObject(o,t);if(e.isNull(s)){continue}if(!a.contains(s.getName())){n=t.exportStructureMember(s);a.add(s.getName())}if(e.notNull(n)&&n.hasElements()){r.add(n)}}}}return i};e.QInAMembersAll.prototype.getComponentType=function(){return e.OlapComponentType.MEMBERS};e.QInAMembersAll.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;if(l.supportsCustomMembers()){l.removeCustomMembers()}let a=n.getListByKey("MembersRepo");if(e.isNull(a)){a=n.getListByKey("Members");if(e.isNull(a)){return null}}let s=l.getStructureLayout();if(e.notNull(s)){s.clear();let n=a.size();for(let i=0;i<n;i++){let n=a.getStructureAt(i);let r=t.importStructureMember(l,n,o);if(e.notNull(r)){let t=l.getStructureMember(r.getName());if(e.isNull(t)){l.addMeasure(r)}else{if(t!==r){throw e.XException.createIllegalStateException("Internal error: New member with same name not allowed")}s.removeElement(t);s.add(t)}}}}return l};e.QInAQuery=function(){};e.QInAQuery.prototype=new e.QInAComponentWithStructure;e.QInAQuery.prototype._ff_c="QInAQuery";e.QInAQuery.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=t.m_mode===e.QModelFormat.INA_REPOSITORY_DATA_RENDERING;t.exportUniversalDisplayHierarchies(o.getUniversalDisplayHierarchies(),i);let a=o.getDrillManager();t.exportDrillManager(a,i);if(t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)&&!a.isValidatingContextFreeNavigations()){i.putBoolean("ValidateContextFreeNavigations",false)}let s=o.getCellContextManager();t.exportCellContextManager(s,i);let u=e.XMath.binaryAnd(r,e.QImExFlag.DATASOURCE)>0;if(u){e.QInADataSource.exportDataSource(t,o.getDataSource(),o.getModelCapabilities().supportsRunAsUser(),i,false)}t.exportDimensions(o,i);t.exportSortingManager(o.getSortingManager(),i);t.exportCurrencyTranslationManager(o.getCurrencyTranslationManager(),i);t.exportUnitTranslationManager(o.getUnitTranslationManager(),i);if(!o.hasProcessingStep()||t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){t.exportDataCells(o,i)}t.exportQuerySettings(o,i);if(!l){t.exportFilter(o.getFilter(),i);t.exportExceptions(o,i);t.exportQueryCells(o.getQueryCellManager(),i)}t.exportConditionManager(o.getConditionManager(),i);t.exportSimulationManager(o.getSimulationManager(),i);let p=e.XMath.binaryAnd(r,e.QImExFlag.VARIABLES)>0;if(p&&t.m_mode!==e.QModelFormat.INA_REPOSITORY_NO_VARS&&t.m_mode!==e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){if(o.isExportingVariables()||o.hasProcessingStep()){t.exportVariables(o.getVariableContainer(),i)}}let g=o.getQueryManager();if(o.isBatchModeForMicroCube()){i.putString("Name",g.getNameForMicroCubeUse())}if(t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){t.exportFormulaExceptionManager(o.getFormulaExceptionManager(),i);this.exportPaging(i,o);e.QInAOptions.exportSuppressKeyfigureCalculation(i,g);let n=o.getPreQueries();if(e.notNull(n)){let r=n.size();if(r>0){let o=i.getListByKey("PreQueries");if(e.isNull(o)){o=i.putNewList("PreQueries")}let l=t.getMode();if(t.getOriginalMode()!==e.QModelFormat.INA_CLONE_RENDERING){t.m_mode=t.getOriginalMode()}for(let e=0;e<r;e++){let i=n.get(e);let r=t.exportPreQuery(i.getObject());let l=i.getName();r.putString("ObjectName",l);o.add(r)}t.m_mode=l;i.put("PreQueries",o)}}let l=o.getResultStructureController();t.exportComponent(null,l,i,r);let a=e.InactiveCapabilityUtil.exportFeatureToggles(g.getSession().getFeatureToggles());i.putString("ExperimentalFeatures",a);i.putString("ResultSetPersistanceTable",g.getResultSetPersistenceTable());i.putString("ResultSetPersistanceSchema",g.getResultSetPersistenceSchema());i.putString("ResultSetPersistanceIdentifier",g.getResultSetPersistenceIdentifier())}return i};e.QInAQuery.prototype.exportPaging=function(t,n){let i=n.getQueryManager();if(!n.getSession().hasFeature(e.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)||i.recordingStateOfQueryManager()){return}if(i.getOffsetColumns()>0||i.getOffsetRows()>0||i.getMaxColumns()>-1||i.getMaxRows()>-1){e.QInAOptions.exportPaging(t,i)}};e.QInAQuery.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_MODEL};e.QInAQuery.prototype.getInactiveCapabilities=function(t){let n=e.XHashMapByString.create();let i=e.FeatureToggle.getAllFeatureToggles();let r=i.getKeysAsIterator();while(r.hasNext()){n.put(r.next(),e.XBooleanValue.create(false))}let o=t.getSession().getFeatureToggles();if(e.notNull(o)){let t=o.getKeysAsIterator();while(t.hasNext()){n.put(t.next(),e.XBooleanValue.create(true))}}return n};e.QInAQuery.prototype.importBlendingSources=function(t,n,i){let r=i.getBlendingSources();if(!e.XCollectionUtils.hasElements(r)){return}let o=e.PrUtils.getStructureProperty(n,"DataSource");let l=e.PrUtils.getListProperty(o,"Sources");if(e.PrUtils.isListEmpty(l)){return}for(let n=0;n<r.size();n++){let i=e.PrUtils.getStructureElement(l,n);let o=e.PrUtils.getStructureProperty(i,"DefiningContext");if(e.notNull(o)){let e=r.get(n).getQueryModel();e.deserializeFromElementExt(t.m_mode,o)}}};e.QInAQuery.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;let a=n;let s=a.getListByKey("Queries");if(e.notNull(s)){a=s.getStructureAt(s.size()-1)}let u=a.getListByKey(e.ConnectionConstants.INA_BATCH);if(e.notNull(u)){a=u.getStructureAt(u.size()-1)}if(e.notNull(a)&&a.containsKey("Analytics")){a=a.getStructureByKey("Analytics");if(e.notNull(a)&&a.containsKey("Definition")){a=a.getStructureByKey("Definition")}}if(e.notNull(a)&&a.containsKey("Definition")){a=a.getStructureByKey("Definition")}if(e.notNull(a)){let i=t.getOriginalMode()===e.QModelFormat.INA_CLONE_RENDERING&&t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY);let r=t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY);if(r&&a.containsKey("ModellerDefinition")){a=a.getStructureByKey("ModellerDefinition");t.importModellerDimensions(a,l,l);t.importModellerCurrencyTranslation(a,l.getCurrencyTranslationManagerBase(),l);t.importModellerMetadataProperties(a,l,l);t.importFormulaExceptionManager(a,l.getFormulaExceptionManagerBase(),l);return l}t.importDimensions(a,l,l);if(!i){t.importFilter(a,l.getFilterBase(),l);t.importExceptions(a,l);t.importQueryCells(a,l.getQueryCellManager(),l);t.importUniversalDisplayHierarchies(a,l.getUniversalDisplayHierarchiesBase(),l)}t.importCurrencyTranslationManager(a,l.getCurrencyTranslationManager(),l);t.importUnitTranslationManager(a,l.getUnitTranslationManager(),l);t.importTranslationManager(a,l,o);t.importSortingManager(a,l.getSortingManagerBase(),l);t.importDrillManager(a,l.getDrillManager(),l);t.importCellContextManager(a,l.getCellContextManager(),l);if(t.m_mode!==e.QModelFormat.INA_REPOSITORY_NO_VARS&&t.m_mode!==e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){t.importVariableManager(a,l.getVariableManagerBase(),l)}t.importQuerySettings(a,l);t.importDataCells(a,l);t.importConditionManager(a,l.getConditionManagerBase(),l);if(r){t.importFormulaExceptionManager(a,l.getFormulaExceptionManagerBase(),l);this.importPaging(t,a,l);e.QInAOptions.importSuppressKeyfigureCalculation(a,l.getQueryManager());let i=l.getResultStructureController();t.importComponent(null,a,i,l,l);let r=l.getQueryManager();if(e.notNull(r)){r.setResultSetPersistanceTargetTable(a.getStringByKey("ResultSetPersistanceTable"));r.setResultSetPersistanceTargetSchema(a.getStringByKey("ResultSetPersistanceSchema"));r.setResultSetPersistenceIdentifier(a.getStringByKey("ResultSetPersistanceIdentifier"))}let o=a.getListByKey("PreQueries");if(e.notNull(o)){let n=null;let i=a.getStructureByKey("DataSource");if(e.notNull(i)){n=i.getStringByKey("System")}this.importPreQueries(t,l,o,n)}if(l.isBlendingModel()){this.importBlendingSources(t,n,l)}}}return l};e.QInAQuery.prototype.importPaging=function(t,n,i){let r=n.getStructureByKey("SubSetDescription");let o=i.getQueryManager();let l=t.m_mode===e.QModelFormat.INA_REPOSITORY_DATA_RENDERING;if(e.isNull(r)||!i.getSession().hasFeature(e.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)||o.applyingStateOnQueryManager()&&!l){return}e.QInAOptions.importPaging(n,o)};e.QInAQuery.prototype.importPreQueries=function(t,n,i,r){let o=t.getMode();if(t.getOriginalMode()!==e.QModelFormat.INA_CLONE_RENDERING){t.m_mode=t.getOriginalMode()}let l=this.getInactiveCapabilities(n);for(let o=0;o<i.size();o++){let a=i.getStructureAt(o);let s=a.getStringByKey("ObjectName");if(n.getPreQueryByName(s)!==null){continue}let u=a.containsKey("Runtime")?a.getStructureByKey("Runtime"):a;let p=u.getStructureByKey("DataSource");let g=e.XStringBuffer.create();g.append(p.getStringByKey("Type")).append(":[");g.append(p.getStringByKey("SchemaName"));g.append("][");g.append(p.getStringByKey("PackageName"));g.append("][");g.append(p.getStringByKey("ObjectName")).append("]");let m=p.getStringByKey("System");if(t.m_mode===e.QModelFormat.INA_REPOSITORY&&e.XString.isEqual(m,r)){m=n.getDataSource().getSystemName()}let c=e.XCommandFactory.create(n.getApplication());let y=c.createCommand(e.CmdCreateQueryManager.CMD_NAME);y.addParameter(e.CmdCreateQueryManager.PARAM_I_APPLICATION,n.getApplication());y.addParameter(e.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,l);y.addParameterString(e.CmdCreateQueryManager.PARAM_I_SYSTEM,m);y.addParameterString(e.CmdCreateQueryManager.PARAM_I_DATA_SOURCE,g.toString());let d=y.processCommand(e.SyncType.BLOCKING,null,null);t.addAllMessages(d);e.XObjectExt.release(y);if(d.isValid()){let i=d.getData().getResultParameter(e.CmdCreateQueryManager.PARAM_E_QUERY_MANAGER).getQueryModel();t.importPreQuery(a,i);n.addPreQueryWithName(i,s)}}t.m_mode=o};e.QInAQueryCellsAll=function(){};e.QInAQueryCellsAll.prototype=new e.QInAComponentWithList;e.QInAQueryCellsAll.prototype._ff_c="QInAQueryCellsAll";e.QInAQueryCellsAll.prototype.exportComponentWithList=function(t,n,i){if(!t.m_capabilities.supportsUniversalModel()){return null}let r=n;if(r.isEmpty()){return null}let o=e.PrFactory.createList();let l=r.getIterator();while(l.hasNext()){let e=l.next();let t=o.addNewStructure();t.putString("Name",e.getName());let n=t.putNewList("Position");let i=e.getPositions();let r=i.getIterator();while(r.hasNext()){let e=r.next();let t=n.addNewStructure();t.putString("DimensionName",e.getDimensionName());t.putString("MemberName",e.getMemberName())}}return o};e.QInAQueryCellsAll.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_CELLS};e.QInAQueryCellsAll.prototype.getTagName=function(){return"Cells"};e.QInAQueryCellsAll.prototype.importComponentWithList=function(e,t,n,i,r){return null};e.QInAQuerySettings=function(){};e.QInAQuerySettings.prototype=new e.QInAComponentWithStructure;e.QInAQuerySettings.prototype._ff_c="QInAQuerySettings";e.QInAQuerySettings.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=o.getDefinitionName();if(e.XStringUtils.isNotNullAndNotEmpty(l)){i.putString("Name",l)}if(t.m_mode.isTypeOf(e.QModelFormat.INA_DATA)&&!t.isAbap(o)&&!this.requiresMDSZeroSuppression(t,o)){return i}let a=i.getStructureByKey("Query");if(e.isNull(a)){a=i.putNewStructure("Query")}t.exportAxesSettings(o,a);if(t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){let t=a.putNewList("AxesLayout");let n=e.AxisType.getAll();for(let i=0;i<n.size();i++){let r=n.get(i);let l=o.getAxis(r);if(e.isNull(l)){continue}let a=l.getOrderedDimensionNames();if(e.isNull(a)){continue}let s=t.addNewStructure();s.putString("Axis",l.getName());let u=s.putNewList("OrderedDimensionNames");u.addAllStrings(a)}}return i};e.QInAQuerySettings.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_SETTINGS};e.QInAQuerySettings.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=e.PrUtils.getStringProperty(n,"Name");let a=o.getQueryModel();if(e.notNull(l)){a.setDefinitionName(l.getString())}let s=n.getStructureByKey("Query");t.importAxesSettings(s,a);if(t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){let t=e.PrUtils.getListProperty(s,"AxesLayout");let n=e.PrUtils.getListSize(t,0);for(let i=0;i<n;i++){let n=e.PrUtils.getStructureElement(t,i);let r=e.AxisType.lookup(e.PrUtils.getStringValueProperty(n,"Axis",null));let o=a.getAxis(r);if(e.isNull(o)){continue}let l=e.PrUtils.getListProperty(n,"OrderedDimensionNames");if(e.isNull(l)){continue}let s=e.XList.create();for(let t=0;t<e.PrUtils.getListSize(l,0);t++){let n=e.PrUtils.getStringElement(l,t);if(e.isNull(n)){continue}s.add(n.getString())}o.reOrderDimensions(s)}}return a};e.QInAQuerySettings.prototype.requiresMDSZeroSuppression=function(t,n){if(!t.m_capabilities.supportsNullZeroSuppression()){return false}let i=n.getAxesManager();if(e.isNull(i)){return false}let r=i.getRowsAxis();let o=i.getColumnsAxis();return e.QInAAxesSettings.isDefinedZeroSuppression(r)||e.QInAAxesSettings.isDefinedZeroSuppression(o)};e.QInASimulationManager=function(){};e.QInASimulationManager.prototype=new e.QInAComponentWithStructure;e.QInASimulationManager.prototype._ff_c="QInASimulationManager";e.QInASimulationManager.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;if(e.notNull(o)&&o.getSimulationStructure()!==null){return o.getSimulationStructure()}return null};e.QInASimulationManager.prototype.getComponentType=function(){return e.OlapComponentType.OLAP_SIMULATION_MANAGER};e.QInASimulationManager.prototype.getTagName=function(){return"Simulation"};e.QInASimulationManager.prototype.importComponentWithStructure=function(e,t,n,i,r){return n};e.QInASort=function(){};e.QInASort.prototype=new e.QInAComponentWithList;e.QInASort.prototype._ff_c="QInASort";e.QInASort.prototype.addRequiredSortOperationsForUdhDimensions=function(t,n,i){let r=e.XList.create();let o=e.XList.create();for(let n=0;n<i.size();n++){let l=i.get(n);let a=l.supportsDimension()?l.getDimension():null;if(e.notNull(a)){r.add(a.getName());if(e.QInAUniversalDisplayHierarchies.isHierarchyConverted(t,a)){o.addAll(e.QInAUniversalDisplayHierarchies.getDimensionNames(t,a.getAxis()))}}}for(let e=0;e<o.size();e++){let t=o.get(e);if(!r.contains(t)){i.add(n.newDimensionSorting(n.getQueryModel().getDimensionByName(t)))}}};e.QInASort.prototype.dropIncorrectBasicMeasuresIfAny=function(t){let n=t.getDimension();let i=t.getCustomSort();let r=null;if(e.notNull(i)){r=i.createListCopy();if(n.isMeasureStructure()){for(let t=0;t<r.size();){let i=r.get(t);let o=n.getAllStructureMembers().getByKey(i);if(e.isNull(o)){r.removeAt(t);continue}if(o.getMemberType()===e.MemberType.BASIC_MEASURE){let e=o;if(e.isNotFromMetadata()){r.removeAt(t);continue}}t++}}}return r};e.QInASort.prototype.exportComponentWithList=function(t,n,i){if(!t.m_capabilities.supportsExtendedSort()){return null}let r=e.PrFactory.createList();let o=n;let l=o.getSortingOperations().createListCopy();this.addRequiredSortOperationsForUdhDimensions(t,o,l);let a=l.size();for(let n=0;n<a;n++){let i=l.get(n);let a=null;let s=null;if(i.supportsDimension()){a=i.getDimension()}if(e.notNull(a)){let n=a.getAxisType();if(e.notNull(n)&&n!==e.AxisType.ROWS&&n!==e.AxisType.COLUMNS&&n!==e.AxisType.FREE){continue}if(n===e.AxisType.FREE){s=e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchyWhichContainsGivenDim(t,a);if(e.isNull(s)||o.getDimensionSorting(s,false)===null){continue}}if(a.isUniversalDisplayHierarchyDimension()){continue}}let u=t.getMode()===e.QModelFormat.INA_PERSISTED_QUERY_DATA&&i.getModelCapabilities().supportsPersistedInA()&&i.isCreatedFromMetadata()&&i.getOlapComponentType()===e.OlapComponentType.DIMENSION_SORTING&&i.getModCounter()===0;if(u){continue}let p=i.getSortingType();if(p===e.SortType.FIELD){let t=i;let n=t.getField().getDimension();if(e.notNull(n)){let i=t.getQueryModel().getDimensionByName(n.getName());if(e.isNull(i)||e.QInAExportUtil.isFormulaCalculatedDimensionHidden(i)){continue}}}else if(p===e.SortType.MEASURE){let t=i;let n=t.getMeasure();if(e.isNull(n)||n.isReleased()){continue}}let g=e.PrFactory.createStructure();g.putString("SortType",e.QInAConverter.lookupSortTypeInA(p));let m=this.getSortDirection(i,o,s);if(m!==e.XSortDirection.DEFAULT_VALUE){g.putString("Direction",e.QInAConverter.lookupSortDirectionInA2(m))}else if(p===e.SortType.MEASURE){continue}this.exportGenericSorting(i,g);if(p===e.SortType.FIELD){this.exportFieldSorting(i,g,t)}else if(p===e.SortType.MEASURE){this.exportMeasureSorting(i,g)}else if(p===e.SortType.DATA_CELL_VALUE||p===e.SortType.COMPLEX){this.exportPathSorting(i,g,t)}else if(p===e.SortType.HIERARCHY){if(!i.getDimension().isHierarchyAssignedAndActive()){g=null}}else if(p===e.SortType.MEMBER_KEY){let e=i;let n=this.dropIncorrectBasicMeasuresIfAny(e);this.exportCustomSortDetails(n,e.getCustomSortPosition(),g,e.getQueryModel(),t)}if(e.notNull(g)){e.QInAExportUtil.setNameIfNotNull(g,"Dimension",a);r.add(g)}}let s=t.m_mode;if(s.isTypeOf(e.QModelFormat.INA_DATA)||s===e.QModelFormat.INA_VALUE_HELP){r=e.QInAExportUtil.extendList(o,r)}if(t.getSession().hasFeature(e.FeatureToggleOlap.NO_EMPTY_SORT)&&r.isEmpty()){return null}return r};e.QInASort.prototype.exportCustomSortDetails=function(t,n,i,r,o){if(e.XCollectionUtils.hasElements(t)){let n=i.putNewList("CustomSort");let l=t.size();for(let i=0;i<l;i++){let l=t.get(i);if(e.notNull(r)&&e.notNull(o)){l=e.QInAExportUtil.getMeasureMemberNameByAlias(r,l,o)}n.addString(l)}}e.QInAExportUtil.setNameIfNotNull(i,"CustomSortPosition",n)};e.QInASort.prototype.exportFieldSorting=function(e,t,n){let i=e;t.putString("FieldName",i.getField().getName());let r=i.getCustomSort();this.exportCustomSortDetails(r,i.getCustomSortPosition(),t,e.getQueryModel(),n);if(t.getListByKey("CustomSort")!==null){t.remove("Collator")}};e.QInASort.prototype.exportGenericSorting=function(t,n){if(t.supportsPreserveGrouping()&&t.supportsBreakGrouping()){n.putBoolean("PreserveGrouping",t.isPreserveGroupingEnabled())}if(t.getModelCapabilities().supportsLocaleSorting()){let i=e.PrFactory.createStructure();i.putBoolean("CaseSensitive",t.isCaseSensitive());let r=t.getLocale();if(e.XStringUtils.isNotNullAndNotEmpty(r)){i.putString("Locale",r)}if(i.hasElements()){n.put("Collator",i)}}};e.QInASort.prototype.exportMeasureSorting=function(t,n){let i=t;let r=i.getMeasure().getName();n.putString("MeasureName",r);let o=i.getSecondaryMeasure();e.QInAExportUtil.setNameIfNotNull(n,"StructureName",o)};e.QInASort.prototype.exportPathSorting=function(t,n,i){let r=n.putNewList("SortTuple");let o=t.getElementPath();let l=o.size();for(let n=0;n<l;n++){let l=o.get(n);let a=r.addNewStructure();a.putString("FieldName",l.getSelectField().getName());let s=l.getSelectMemberType();if(e.notNull(s)&&i.m_capabilities.supportsSortTupleMemberType()){a.putInteger("MemberType",e.QInAConverter.lookupResultsetMemberTypeInA(s))}if(!i.m_capabilities.supportsSortTupleMemberType()||e.isNull(s)||s===e.MemberType.MEMBER){let n=e.QInAExportUtil.getMeasureMemberNameByAlias(t.getQueryModel(),l.getSelectValue(),i);a.putString("Value",n)}let u=l.getSelectHierarchyName();if(e.XStringUtils.isNotNullAndNotEmpty(u)){a.putString("Hierarchy",u)}}};e.QInASort.prototype.getComponentType=function(){return e.OlapComponentType.SORT_MANAGER};e.QInASort.prototype.getSortDirection=function(t,n,i){if(e.notNull(i)&&i!==t.getDimension()){let t=n.getDimensionSorting(i,false);if(e.notNull(t)){return t.getDirection()}}return t.getDirection()};e.QInASort.prototype.getTagName=function(){return"Sort"};e.QInASort.prototype.importComponentWithList=function(t,n,i,r,o){let l=i;if(t.m_mode!==e.QModelFormat.INA_DATA_REINIT&&t.m_capabilities.supportsExtendedSort()){l.getSortingOperations().clear();if(e.notNull(n)){let t=l.getQueryModel();for(let i=0;i<n.size();i++){let r=n.getStructureAt(i);let a=r.getStringByKey("SortType");let s=e.QInAConverter.lookupSortType(a);let u;if(s===e.SortType.FIELD){u=this.importFieldSorting(l,t,r)}else if(s===e.SortType.MEASURE){u=this.importMeasureSorting(l,t,r)}else if(s===e.SortType.DATA_CELL_VALUE||s===e.SortType.COMPLEX){u=this.importPathSorting(o,l,t,r,s)}else{u=this.importDimensionSorting(l,t,r,s)}if(e.notNull(u)){this.importGenericSorting(t,r,u)}}}}return l};e.QInASort.prototype.importCustomSortDetails=function(t,n){let i=n.getListByKey("CustomSort");if(!e.PrUtils.isListEmpty(i)){let r=e.PrUtils.asListOfString(i);t.setCustomSort(r);let o=e.CustomSortPosition.lookup(n.getStringByKey("CustomSortPosition"));t.setCustomSortPosition(o)}};e.QInASort.prototype.importDimensionSorting=function(t,n,i,r){let o=n.getDimensionByNameFromExistingMetadata(i.getStringByKey("Dimension"));if(e.isNull(o)||o.isUniversalDisplayHierarchyDimension()||!o.supportsSorting(null)){return null}let l=t.getDimensionSorting(o,true);if(r===e.SortType.FILTER){l.setSortByFilter()}else if(r===e.SortType.MEMBER_KEY){l.setSortByKey();this.importCustomSortDetails(l,i)}else if(r===e.SortType.MEMBER_TEXT){l.setSortByText()}else if(r===e.SortType.HIERARCHY){l.setSortByHierarchy()}return l};e.QInASort.prototype.importFieldSorting=function(t,n,i){let r=i.getStringByKey("FieldName");let o=null;if(e.notNull(r)){let i=n.getFieldByName(r);if(e.notNull(i)){o=t.getFieldSorting(i,true)}}return o};e.QInASort.prototype.importGenericSorting=function(t,n,i){let r=n.getStringByKey("Direction");if(e.notNull(r)){let t=e.QInAConverter.lookupSortDirection2(r);if(e.notNull(t)){i.setDirection(t)}}if(i.supportsPreserveGrouping()&&i.supportsBreakGrouping()){i.setPreserveGrouping(n.getBooleanByKeyExt("PreserveGrouping",false))}if(t.getModelCapabilities().supportsLocaleSorting()){let t=n.getStructureByKey("Collator");if(e.notNull(t)){i.setIsCaseSensitive(t.getBooleanByKeyExt("CaseSensitive",false));i.setLocale(t.getStringByKeyExt("Locale",null))}}i.setCreatedFromMetadata(true)};e.QInASort.prototype.importMeasureSorting=function(t,n,i){let r=i.getStringByKey("MeasureName");let o=null;if(e.notNull(r)){let l=n.getMeasureDimension();let a=l.getStructureMember(r);if(e.notNull(a)){o=t.getMeasureSorting(a,true)}let s=i.getStringByKey("StructureName");let u=n.getNonMeasureDimension();if(e.notNull(s)&&e.notNull(u)&&e.notNull(o)){o.setSecondaryMeasure(u.getStructureMember(s))}}return o};e.QInASort.prototype.importPathSorting=function(t,n,i,r,o){let l=r.getListByKey("SortTuple");if(l.isEmpty()){return null}let a=e.XList.create();for(let n=0;n<l.size();n++){let r=l.getStructureAt(n);let o=r.getStringByKey("FieldName");let s=r.getStringByKey("Value");if(e.notNull(o)&&e.notNull(s)){let n=i.getFieldByName(o);if(e.isNull(n)){return null}let l=r.getStringByKey("Hierarchy");if(r.containsKey("MemberType")){let t=r.getIntegerByKey("MemberType");a.add(e.QSelectValue._createDimensionElementWithMemberType(e.QInAConverter.lookupMemberType(t),n,l,s))}else{a.add(e.QSelectValue._createDimensionElement2(t,n,l,s))}}else{return null}}if(o===e.SortType.DATA_CELL_VALUE){return n.getDataCellSorting(a,true)}return n.getComplexSorting(a,true)};e.QInATotals=function(){};e.QInATotals.prototype=new e.QInAComponentWithStructure;e.QInATotals.prototype._ff_c="QInATotals";e.QInATotals.prototype.exportAlignment=function(t,n,i){if(t.m_mode.isTypeOf(e.QModelFormat.INA_DATA)&&!t.isAbap(n.getQueryModel())){return}if(n.supportsResultAlignment()){if(!n.isTotalsAlignmentOnDefault()){let r=n.getResultAlignment();if(t.m_mode.isTypeOf(e.QModelFormat.INA_DATA)){if(r===e.ResultAlignment.STRUCTURE){r=null}}if(e.notNull(r)){i.putString("ResultAlignment",e.QInAConverter.lookupAlignmentInA(r))}}}};e.QInATotals.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;if(o.supportsTotals()){let n;if(t.m_mode.containsMetadata()||t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){n=i.putNewStructure("ResultStructureBag")}else{n=i}this.exportAlignment(t,o,n);if(o.supportsResultVisibility()){if(!o.isTotalsVisibilityOnDefault()||o.getModelLevel()===e.QModelLevel.DIMENSIONS){let t=o.getTotalsStructure();if(e.XCollectionUtils.hasElements(t)){this.exportResultStructureItems(n,t,o)}}}}return i};e.QInATotals.prototype.exportResultStructureElement=function(t,n,i){let r=t.addNewStructure();r.putString("Result",i);r.putString("Visibility",e.QInAConverter.lookupResultSetVisibilityInA(n))};e.QInATotals.prototype.exportResultStructureItems=function(t,n,i){let r=t.putNewList("ResultStructure");let o=n.size();for(let t=0;t<o;t++){let o=n.get(t);let l=o.getResultVisibility();if(!this.isResultVisible(i,l)){continue}let a=o.getResultStructureElement();if(a===e.ResultStructureElement.MEMBERS){this.exportResultStructureElement(r,l,"Members")}else if(a===e.ResultStructureElement.TOTAL){this.exportResultStructureElement(r,l,"Total")}else if(a===e.ResultStructureElement.TOTAL_INCLUDED_MEMBERS){if(this.supportsConditionalResult(i,a)){this.exportResultStructureElement(r,l,"TotalIncludedMembers")}}else if(a===e.ResultStructureElement.TOTAL_REMAINING_MEMBERS){if(this.supportsConditionalResult(i,a)){this.exportResultStructureElement(r,l,"TotalRemainingMembers")}}else if(a===e.ResultStructureElement.OTHERS_FROM_CONDITIONS){if(i.getModelCapabilities().supportsOthersFromConditions()&&i.getQueryModel().getConditionManager().hasConditions()){this.exportResultStructureElement(r,l,"OthersFromConditions")}}else if(a===e.ResultStructureElement.OTHERS_DETAILS_FROM_CONDITIONS){if(i.getModelCapabilities().supportsOthersDetailsFromConditions()&&i.getQueryModel().getConditionManager().hasConditions()){this.exportResultStructureElement(r,l,"OthersDetailsFromConditions")}}}};e.QInATotals.prototype.getComponentType=function(){return e.OlapComponentType.TOTALS};e.QInATotals.prototype.getResultStructure=function(t){let n=t.getStructureByKey("ResultStructureBag");if(e.isNull(n)){n=t.getStructureByKey("DefaultResultStructure");if(e.isNull(n)){return t}}return n};e.QInATotals.prototype.importComponentWithStructure=function(t,n,i,r,o){if(t.m_mode!==e.QModelFormat.INA_DATA_REINIT){let t=i;if(t.supportsResultVisibility()){let i=this.getResultStructure(n);let r=this.importResultAlignment(t,i);t.restoreTotalsVisibility(e.RestoreAction.DEFAULT_VALUE,false);let o=i.getListByKey("ResultStructure");if(e.notNull(o)){let n;if(t.supportsAdvancedResultStructure()&&r===e.ResultAlignment.STRUCTURE){n=t.getAdvancedResultStructure();n.clear();if(e.isNull(r)){t.setResultAlignmentBase(e.ResultAlignment.STRUCTURE,true)}}else{n=null}let i=o.size();for(let e=0;e<i;e++){let i=o.getStructureAt(e);this.importResultStructureItem(i,t,n)}}}}return null};e.QInATotals.prototype.importResultAlignment=function(t,n){if(t.supportsResultAlignment()){t.restoreTotalsAlignment(e.RestoreAction.DEFAULT_VALUE,false);let i=n.getStringByKey("ResultAlignment");if(e.XStringUtils.isNullOrEmpty(i)){return null}let r=e.QInAConverter.lookupAlignment(i);t.setResultAlignmentBase(r,false);return r}return null};e.QInATotals.prototype.importResultStructureItem=function(t,n,i){let r=t.getStringByKey("Result");let o;if(e.XString.isEqual(r,"Members")){o=e.ResultStructureElement.MEMBERS}else if(e.XString.isEqual(r,"Total")){o=e.ResultStructureElement.TOTAL}else if(e.XString.isEqual(r,"TotalIncludedMembers")){o=e.ResultStructureElement.TOTAL_INCLUDED_MEMBERS}else if(e.XString.isEqual(r,"TotalRemainingMembers")){o=e.ResultStructureElement.TOTAL_REMAINING_MEMBERS}else if(e.XString.isEqual(r,"Others")){o=e.ResultStructureElement.OTHERS_FROM_CONDITIONS}else if(e.XString.isEqual(r,"OthersDetailsFromConditions")){o=e.ResultStructureElement.OTHERS_DETAILS_FROM_CONDITIONS}else{return}let l=t.getStringByKey("Visibility");let a=e.QInAConverter.lookupResultSetVisibility(l);if(e.isNull(i)){n.setResultVisibilityByElement(o,a)}else{i.addWithVisibility(o,a)}};e.QInATotals.prototype.isResultVisible=function(t,n){return n===e.ResultVisibility.VISIBLE||n===e.ResultVisibility.ALWAYS||n===e.ResultVisibility.CONDITIONAL&&t.getModelCapabilities().supportsConditionalResultVisibility()};e.QInATotals.prototype.supportsConditionalResult=function(e,t){let n=e.getModelCapabilities();return n.supportsConditionalResults()&&n.getSupportedConditionalResults().contains(t)};e.QInATranslationsManager=function(){};e.QInATranslationsManager.prototype=new e.QInAComponentWithStructure;e.QInATranslationsManager.prototype._ff_c="QInATranslationsManager";e.QInATranslationsManager.prototype.exportComponentWithStructure=function(e,t,n,i){return n};e.QInATranslationsManager.prototype.getComponentType=function(){return e.OlapComponentType.MEASURE_TRANSLATIONS};e.QInATranslationsManager.prototype.getTagName=function(){return"Translations"};e.QInATranslationsManager.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;if(e.notNull(n)){if(n.containsKey("CurrencyTranslations")){this.importCurrencyTranslationWithStructure(t,n,l,o)}if(n.containsKey("UnitTranslations")){this.importUnitTranslationWithStructure(t,n,l,o)}}return l};e.QInATranslationsManager.prototype.importCurrencyTranslationWithStructure=function(t,n,i,r){let o=i.getCurrencyTranslationManagerBase();let l=n.getListByKey("CurrencyTranslations");if(e.notNull(l)){if(e.notNull(o)&&e.XCollectionUtils.hasElements(l)){let e=l.size();for(let n=0;n<e;n++){let e=l.getStructureAt(n);let i=e.getStringByKey("Name");let a=e.getStringByKey("Description");let s=o.addNewMeasureCurrencyTranslationBase(i,a);t.importCurrencyTranslationElement(e,s,r)}}}};e.QInATranslationsManager.prototype.importUnitTranslationWithStructure=function(t,n,i,r){let o=i.getUnitTranslationManagerBase();let l=n.getListByKey("UnitTranslations");if(e.notNull(l)){if(e.notNull(o)&&e.XCollectionUtils.hasElements(l)){let e=l.size();for(let n=0;n<e;n++){let e=l.getStructureAt(n);let i=e.getStringByKey("Name");let a=e.getStringByKey("Description");let s=o.addNewMeasureUnitTranslationBase(i,a);t.importUnitTranslationElement(e,s,r)}}}};e.QInAUnitTranslationItem=function(){};e.QInAUnitTranslationItem.prototype=new e.QInAComponentWithStructure;e.QInAUnitTranslationItem.prototype._ff_c="QInAUnitTranslationItem";e.QInAUnitTranslationItem.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;if(e.notNull(o)){i.putString("Name",o.getName());i.putStringNotNullAndNotEmpty("DimensionName",o.getDimensionName());i.putStringNotNullAndNotEmpty("Description",o.getText());i.putStringNotNullAndNotEmpty("RateLookUp",e.QInAConverter.lookupUtRateLookupInA(o.getRateLookup()));i.putStringNotNullAndNotEmpty("ErrorHandling",e.QInAConverter.lookupUtErrorHandlingModeInA(o.getErrorHandling()));this.exportTargetUnit(i,o.getTargetUnit())}return i};e.QInAUnitTranslationItem.prototype.exportTargetUnit=function(t,n){if(e.notNull(n)){if(n.isFixed()){t.putNewStructure("TargetUnit").putString("Fixed",n.getFixedValue().getStringRepresentation())}else if(n.isFieldBased()){t.putNewStructure("TargetUnit").putString("DimensionAttribute",n.getFieldName())}else if(n.isVariableBased()){t.putNewStructure("TargetUnit").putString("Variable",n.getVariableName())}}};e.QInAUnitTranslationItem.prototype.getComponentType=function(){return e.OlapComponentType.UNIT_TRANSLATION_ITEM};e.QInAUnitTranslationItem.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;if(e.notNull(l)&&e.XCollectionUtils.hasElements(n)){l.setDimensionName(n.getStringByKey("DimensionName"));l.setRateLookup(e.QInAConverter.lookupUtRateLookup(n.getStringByKey("RateLookUp")));l.setErrorHandling(e.QInAConverter.lookupUtErrorHandlingMode(n.getStringByKey("ErrorHandling")));this.importUnitData(l.getTargetUnit(),n.getStructureByKey("TargetUnit"));l.setMetadataDefined(true)}return l};e.QInAUnitTranslationItem.prototype.importUnitData=function(t,n){if(e.notNull(t)&&e.notNull(n)){if(n.containsKey("Fixed")){t.setFixedValue(e.XStringValue.create(n.getStringByKey("Fixed")))}else if(n.containsKey("DimensionAttribute")){t.setFieldName(n.getStringByKey("DimensionAttribute"))}else if(n.containsKey("Variable")){t.setVariableName(n.getStringByKey("Variable"))}}};e.QInAUnitTranslationManager=function(){};e.QInAUnitTranslationManager.prototype=new e.QInAComponentWithList;e.QInAUnitTranslationManager.prototype._ff_c="QInAUnitTranslationManager";e.QInAUnitTranslationManager.prototype.exportComponentWithList=function(t,n,i){let r=null;let o=n;let l=o.getMeasureUnitTranslations();if(e.XCollectionUtils.hasElements(l)){r=e.PrFactory.createList();let n=l.size();for(let e=0;e<n;e++){let n=l.get(e);if(!n.isMetadataDefined()){t.exportUnitTranslationElement(n,r.addNewStructure())}}}return r};e.QInAUnitTranslationManager.prototype.getComponentType=function(){return e.OlapComponentType.UNIT_TRANSLATION_MANAGER};e.QInAUnitTranslationManager.prototype.getTagName=function(){return"UnitTranslations"};e.QInAUnitTranslationManager.prototype.importComponentWithList=function(t,n,i,r,o){let l=o.getQueryModel().getUnitTranslationManager();if(e.notNull(l)&&e.XCollectionUtils.hasElements(n)){let e=n.size();for(let i=0;i<e;i++){let e=n.getStructureAt(i);let r=e.getStringByKey("Name");let a=e.getStringByKey("Description");let s=l.addNewMeasureUnitTranslationBase(r,a);t.importUnitTranslationElement(e,s,o)}}return l};e.QInAUniversalDisplayHierarchies=function(){};e.QInAUniversalDisplayHierarchies.prototype=new e.QInAComponentWithStructure;e.QInAUniversalDisplayHierarchies.prototype._ff_c="QInAUniversalDisplayHierarchies";e.QInAUniversalDisplayHierarchies.UDH_TO_LBH_CONVERSTION_TAG="UdhToLbhConversion";e.QInAUniversalDisplayHierarchies.getDimensionNames=function(t,n){if(e.QInAUniversalDisplayHierarchies.isHierarchyConversionActive(t,n.getQueryManager())){let t=e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(n);if(e.notNull(t)){let n=t.getLeveledHierarchy(t.getHierarchyName());let i=n.getAllLevel().size();let r=e.XList.create();for(let e=0;e<i;e++){r.add(n.getLevel(e).getLevelDimensionName())}return r}}return n.getDimensionNames()};e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy=function(t){if(e.isNull(t)||t.getType()!==e.AxisType.ROWS&&t.getType()!==e.AxisType.COLUMNS){return null}let n=t.getDimensionCount();for(let e=0;e<n;e++){let n=t.get(e);if(n.isHierarchyActive()&&n.getLeveledHierarchy(n.getHierarchyName())!==null){return n}}return null};e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchyWhichContainsGivenDim=function(t,n){if(e.QInAUniversalDisplayHierarchies.isHierarchyConversionActive(t,n.getQueryManager())){let i=n.getName();let r=n.getQueryModel().getRowsAxis();if(e.QInAUniversalDisplayHierarchies.getDimensionNames(t,r).contains(i)){return e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(r)}let o=n.getQueryModel().getColumnsAxis();if(e.QInAUniversalDisplayHierarchies.getDimensionNames(t,o).contains(i)){return e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(o)}}return null};e.QInAUniversalDisplayHierarchies.isHierarchyConversionActive=function(t,n){return(t.m_mode===e.QModelFormat.INA_DATA||t.m_mode===e.QModelFormat.INA_PERSISTED_QUERY_DATA)&&n.isHierarchyToUDHConversionEnabledForCurrentRs()&&e.XCollectionUtils.hasElements(n.getQueryModel().getUniversalDisplayHierarchies().getHierarchies())};e.QInAUniversalDisplayHierarchies.isHierarchyConversionRequired=function(t,n){return e.QInAUniversalDisplayHierarchies.isHierarchyConversionActive(t,n.getQueryManager())&&e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(n)!==null};e.QInAUniversalDisplayHierarchies.isHierarchyConverted=function(t,n){return e.QInAUniversalDisplayHierarchies.isHierarchyConversionActive(t,n.getQueryManager())&&n===e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(n.getAxis())};e.QInAUniversalDisplayHierarchies.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;if(e.notNull(o)){o.updateIncludedDimensions();let e=o.getChildrenIterator();if(e.hasNext()){let n=i.putNewList("UniversalDisplayHierarchies");while(e.hasNext()){this.exportHierarchy(t,n,e.next())}}}return i};e.QInAUniversalDisplayHierarchies.prototype.exportHierarchy=function(t,n,i){let r=true;let o=i.getHierarchyDedicatedAxis();let l=e.QInAUniversalDisplayHierarchies.isHierarchyConversionActive(t,o.getQueryManager())?e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(o):null;if(e.notNull(l)){let r=n.addNewStructure();r.putString("Name",i.getName());let a=i.getQueryModel().getModelCapabilities().supportsUniversalDisplayHierarchiesZeroBased();r.putInteger("InitialDrillLevel",a?l.getInitialDrillLevel():l.getInitialDrillLevel()+1);r.putString("LowerLevelNodeAlignment",l.getLowerLevelNodeAlignment().getName());r.putBoolean("Active",true);r.putNewList("DimensionNames").addAllStrings(e.QInAUniversalDisplayHierarchies.getDimensionNames(t,o));r.putString("LevelHierarchyName",l.getHierarchyName());if(t.getMode().isTypeOf(e.QModelFormat.INA_PERSISTED_QUERY_DATA)){r.putString("LevelDimensionName",l.getName())}return}else if(i.isActive()&&!i.isDimensionListValid()){r=false;t.addError(e.ErrorCodes.INVALID_STATE,e.XStringUtils.concatenate3("Dimensions for UDH '",i.getName(),"' must be placed next to each other on the axis"))}let a=n.addNewStructure();a.putString("Name",i.getName());a.putInteger("InitialDrillLevel",i.getInitialDrillLevel());a.putString("LowerLevelNodeAlignment",i.getAlignment().getName());a.putBoolean("Active",i.isActive()&&r);a.putNewList("DimensionNames").addAllStrings(i.getDimensionNames());if(i.hasCustomDimensions()){a.putBoolean("CustomDimensions",true)}let s=i.getUdhKeyName();if(i.isRequestUdhKey()&&e.XStringUtils.isNotNullAndNotEmpty(s)){let e=a.putNewList("Attributes").addNewStructure();e.putString("Name",s);e.putString("Obtainability","UserInterface")}};e.QInAUniversalDisplayHierarchies.prototype.getComponentType=function(){return e.OlapComponentType.UNIVERSAL_DISPLAY_HIERARCHIES};e.QInAUniversalDisplayHierarchies.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;if(e.notNull(n)){let t=n.getByKey("UniversalDisplayHierarchies");if(e.notNull(t)&&t.isStructure()){t=t.getByKey("DefinedHierarchies")}if(e.notNull(t)&&t.isList()){let n=t;let i=n.size();for(let t=0;t<i;t++){e.QInAMdUniversalDisplayHierarchies.importHierarchy(l,n.getStructureAt(t))}}}e.QInAMdUniversalDisplayHierarchies.assignAxesToHierarchies(l);return l};e.QInAVarDimMember=function(){};e.QInAVarDimMember.prototype=new e.QInAComponentWithStructure;e.QInAVarDimMember.prototype._ff_c="QInAVarDimMember";e.QInAVarDimMember.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=o.getName();i.putString("Name",l);let a=null;let s=o.getExternalMemberFilter();if(e.XCollectionUtils.hasElements(s)){a=s}else if(o.hasMemberFilter()){let t=o.getMemberFilter();if(e.XCollectionUtils.hasElements(t)){a=t}}if(e.notNull(a)){let e=i.putNewStructure("Values");let n=e.putNewStructure("Selection");t.exportCartesianList(a,n)}else if(!o.isMandatory()){i.putNewStructure("Values")}return i};e.QInAVarDimMember.prototype.extendCustom=function(t,n,i){let r=n;if(e.isNull(i)||r.supportsValueHelp()){return i}if(r.getMemberFilter()!==null&&r.getMemberFilter().getField().isKeyField()){return i}let o=i.getStructureByKey("Values");if(e.isNull(o)){return i}let l=o.getStructureByKey("Selection");if(e.isNull(l)){return i}let a=l.getStructureByKey("SetOperand");if(e.isNull(a)){return i}let s=a.getListByKey("Elements");if(e.PrUtils.isListEmpty(s)){return i}let u=s.size();for(let e=0;e<u;e++){let t=s.get(e);if(t.hasStringByKey("Low")){t.putString("LowIs","ManualInput")}if(t.hasStringByKey("High")){t.putString("HighIs","ManualInput")}if(t.hasStringByKey("Value3")){t.putString("Value3Is","ManualInput")}}return i};e.QInAVarDimMember.prototype.getComponentType=function(){return e.VariableType.DIMENSION_MEMBER_VARIABLE};e.QInAVarDimMember.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;l.setMemberFilter(null);let a=n.getStructureByKey("Values");if(e.notNull(a)){let n=e.QFactory.createFilterExpression(l,l);let i=t.importFilterExpression(n,a,l,l);l.setFilter(i)}else if(l.getVariableType()===e.VariableType.HIERARCHY_NODE_VARIABLE&&l.hasMemberFilter()&&l.getDimension().getKeyField()!==l.getMemberFilter().getField()){l.setDimension(l.getDimension())}return l};e.QInAVarFunctional=function(){};e.QInAVarFunctional.prototype=new e.QInAComponentWithStructure;e.QInAVarFunctional.prototype._ff_c="QInAVarFunctional";e.QInAVarFunctional.prototype.exportComponentWithStructure=function(e,t,n,i){return n};e.QInAVarFunctional.prototype.getComponentType=function(){return e.VariableType.FUNCTIONAL_VARIABLE};e.QInAVarFunctional.prototype.importComponentWithStructure=function(e,t,n,i,r){return n};e.QInAVarOptionList=function(){};e.QInAVarOptionList.prototype=new e.QInAComponentWithStructure;e.QInAVarOptionList.prototype._ff_c="QInAVarOptionList";e.QInAVarOptionList.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;i.putString("Name",o.getName());let l=i.putNewList("OptionValues");if(o.supportsMultipleValues()){let e=o.getValues();let t=e.size();for(let n=0;n<t;n++){let t=e.get(n);l.addString(t.getString())}}else{let t=o.getCurrentOption();if(e.notNull(t)){l.addString(t.getName())}}return i};e.QInAVarOptionList.prototype.getComponentType=function(){return e.VariableType.OPTION_LIST_VARIABLE};e.QInAVarOptionList.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;let a=n.getListByKey("OptionValues");if(e.notNull(a)){let e;if(l.supportsMultipleValues()){l.clear();let t=a.size();for(let n=0;n<t;n++){e=a.getStringAt(n);l.addString(e)}}else if(a.size()===1){e=a.getStringAt(0);l.setString(e)}}return l};e.QInAVarSimpleType=function(){};e.QInAVarSimpleType.prototype=new e.QInAComponentWithStructure;e.QInAVarSimpleType.prototype._ff_c="QInAVarSimpleType";e.QInAVarSimpleType.prototype.addNumericValue=function(t,n,i,r){if(e.XValueType.getValueTypeOfObject(i)===e.XValueType.DECIMAL_FLOAT&&!i.mayLoosePrecision()&&(r===e.XValueType.DECIMAL_FLOAT||t.m_capabilities.supportsNumberAsString())){n.addString(e.XValueUtil.getString(i))}else if(r===e.XValueType.DOUBLE||r===e.XValueType.DECIMAL_FLOAT){n.addDouble(e.XValueUtil.getDouble(i,true,false))}else if(r===e.XValueType.LONG){n.addLong(e.XValueUtil.getLong(i,true,false))}else if(r===e.XValueType.INTEGER){n.addInteger(e.XValueUtil.getInteger(i,true,false))}};e.QInAVarSimpleType.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;i.putString("Name",o.getName());let l=o.getValueType();let a;if(l===e.XValueType.STRING||l===e.XValueType.DATE||l===e.XValueType.TIME||l===e.XValueType.DATE_TIME||l.isSpatial()){a=i.putNewList("SimpleStringValues")}else if(l===e.XValueType.DOUBLE||l===e.XValueType.DECIMAL_FLOAT||l===e.XValueType.LONG||l===e.XValueType.INTEGER){a=i.putNewList("SimpleNumericValues")}else if(l.isBoolean()){a=i.putNewList("SimpleBooleanValues")}else{t.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate3("SimpleTypeVariable '",o.getName(),"' not exported"));return null}if(o.supportsMultipleValues()){this.exportMultipleValues(t,o,l,a)}else{this.exportSingleValue(t,o,l,a)}return i};e.QInAVarSimpleType.prototype.exportMultipleValues=function(t,n,i,r){let o=n.getValues();let l=o.size();for(let n=0;n<l;n++){if(i.isNumber()){this.addNumericValue(t,r,o.get(n),i)}else if(i===e.XValueType.STRING){let e=o.get(n);r.addString(e.getString())}else if(i===e.XValueType.DATE||i===e.XValueType.TIME||i===e.XValueType.DATE_TIME){let i=o.get(n);r.addString(e.QInAExportUtil.dateTimeToString(t,i))}else if(i===e.XValueType.BOOLEAN){let t=o.get(n);r.addString(e.XBoolean.convertToString(t.getBoolean()))}else if(i.isSpatial()){let e=o.get(n);r.addString(e.toWKT())}}};e.QInAVarSimpleType.prototype.exportSingleValue=function(t,n,i,r){if(t.getOriginalMode()===e.QModelFormat.INA_PERSISTED_QUERY_DATA&&n.getTagging().containsKey("PersistedQueryPlaceholder")){r.addString(n.getTagging().getByKey("PersistedQueryPlaceholder"));return}let o=!n.hasValue()&&(t.getMode()===e.QModelFormat.INA_REPOSITORY||n.getQueryModel().getSystemType().isTypeOf(e.SystemType.VIRTUAL_INA));if(i.isNumber()){if(o){r.addNull()}else{this.addNumericValue(t,r,n.getValue(),i)}}else if(i===e.XValueType.BOOLEAN){if(o){r.addNull()}else{r.addBoolean(n.getBoolean())}}else{if(!n.hasValue()){if(t.getMode()!==e.QModelFormat.INA_REPOSITORY){r.addString("")}}else if(i===e.XValueType.STRING||i.isSpatial()){r.addString(n.getString())}else if(i===e.XValueType.DATE){r.addString(e.QInAExportUtil.dateTimeToString(t,n.getDate()))}else if(i===e.XValueType.TIME){r.addString(e.QInAExportUtil.dateTimeToString(t,n.getTime()))}else if(i===e.XValueType.DATE_TIME){r.addString(e.QInAExportUtil.dateTimeToString(t,n.getDateTime()))}}};e.QInAVarSimpleType.prototype.getComponentType=function(){return e.VariableType.SIMPLE_TYPE_VARIABLE};e.QInAVarSimpleType.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;let a=n.getListByKey("SimpleNumericValues");if(e.isNull(a)){a=n.getListByKey("SimpleBooleanValues")}if(e.isNull(a)){a=n.getListByKey("SimpleStringValues")}let s=l.getValueType();let u=e.QInAValueUtils.importValueList(t,a,s);if(l.supportsMultipleValues()||u.size()<=1){l.setValues(u)}return null};e.QInAVariableContainer=function(){};e.QInAVariableContainer.prototype=new e.QInAComponentWithList;e.QInAVariableContainer.prototype._ff_c="QInAVariableContainer";e.QInAVariableContainer.prototype.exportComponentWithList=function(t,n,i){let r=n;let o=r.getQueryModel();if(e.notNull(o)&&!o.isExportingVariables()&&!o.hasProcessingStep()){return null}let l=r.getVariables();if(e.XCollectionUtils.hasElements(l)){return t.exportVariableList(r)}return null};e.QInAVariableContainer.prototype.getComponentType=function(){return e.OlapComponentType.VARIABLE_CONTAINER};e.QInAVariableContainer.prototype.getTagName=function(){return"Variables"};e.QInAVariableContainer.prototype.importComponentWithList=function(e,t,n,i,r){let o=n;e.importVariableList(t,o);return n};e.QInAVariablesList=function(){};e.QInAVariablesList.prototype=new e.QInAComponentWithList;e.QInAVariablesList.prototype._ff_c="QInAVariablesList";e.QInAVariablesList.applyLegacyCurrencyTranslation=function(t,n,i,r,o){let l=e.XStringUtils.concatenate3(r,".","Currency");let a=n.getVariable(l);let s=e.QInACurrencyTranslationItem.resolveTargetCurrency(o);let u=e.isNull(s)?null:s.getFixedValue();if(e.notNull(a)&&e.notNull(u)&&e.XValueUtil.getString(u)!==null){t.put(l,u);let i=0;if(o.getDateOffsetGranularity()!==null){i=o.getDateOffsetGranularity().getMonthFactor()}l=e.XStringUtils.concatenate3(r,".","MonthDelta");a=n.getVariable(l);let s=o.getDateOffset()*i;if(e.notNull(a)){t.put(l,e.XIntegerValue.create(s))}if(o.isReferenceDateFixed()){l=e.XStringUtils.concatenate3(r,".","Date");a=n.getVariable(l);if(e.notNull(a)){t.put(l,o.getFixedReferenceDate())}}else{l=e.XStringUtils.concatenate3(r,".","Date");a=n.getVariable(l);if(e.notNull(a)){if(s===0){t.put(l,e.XStringValue.create("0000-00-00"))}else{t.put(l,e.XStringValue.create("1111-11-11"))}}}let p=o.getFixedRateType();let g=o.getFixedCategory();l=e.XStringUtils.concatenate3(r,".","RateType");a=n.getVariable(l);if(e.notNull(a)){t.put(l,e.XStringValue.create(e.QInAVariablesList.resolveRateTypeVariableValue(p)))}l=e.XStringUtils.concatenate3(r,".","RateVersion");a=n.getVariable(l);if(e.notNull(a)){let n=o.getFixedRateVersion();t.put(l,e.XStringValue.create(e.isNull(n)?"":n))}l=e.XStringUtils.concatenate3(r,".","Category");a=n.getVariable(l);if(e.notNull(a)){t.put(l,e.XStringValue.create(e.QInAVariablesList.resolveCategoryVariableValue(g)))}}};e.QInAVariablesList.resolveCategoryVariableValue=function(t){let n;if(e.CtCategory.isDefined(t)){n=e.QInAConverter.lookupCategoryInA(t)}else{n=""}return n};e.QInAVariablesList.resolveRateTypeVariableValue=function(t){let n;if(e.CtRateType.isDefined(t)){n=e.QInAConverter.lookupRateTypeInA(t)}else{n="@@DYNAMIC@@"}return n};e.QInAVariablesList.prototype.exportComponentWithList=function(t,n,i){let r=n;let o=r.getVariables();if(e.isNull(o)||o.isEmpty()){return null}let l=e.PrFactory.createList();let a=o.size();let s=t.m_mode;let u=null;if(s.isTypeOf(e.QModelFormat.INA_DATA)){u=this.remapCurrencyVariables(r)}for(let n=0;n<a;n++){let i=o.get(n);let r=null;if(!i.isCustomVariable()){if(s===e.QModelFormat.INA_METADATA){t.exportVariable(i,null)}else if(s.isTypeOf(e.QModelFormat.INA_DATA)||s===e.QModelFormat.INA_VALUE_HELP){let n=i.getExternalRepresentation();if(e.notNull(n)&&i.getOlapComponentType()===n.getOlapComponentType()&&e.XString.isEqual(n.getName(),i.getName())){i=n}if(i.isInputEnabled()){if(e.notNull(u)&&u.containsKey(i.getName())){r=e.PrFactory.createStructure();r.putString("Name",i.getName());let t=u.getByKey(i.getName());let n;if(t.getValueType().isNumber()){n=r.putNewList("SimpleNumericValues");n.addInteger(e.XValueUtil.getInteger(t,false,true))}else{n=r.putNewList("SimpleStringValues");n.addString(e.XValueUtil.getString(t))}}else{let n=i.getQueryManager();let o=e.notNull(n)?n.getVariableProcessor():null;let l=e.notNull(n)&&(n.getConvenienceCommands().isHana()&&n.getSession().hasFeature(e.FeatureToggleOlap.MDS_PERSISTED_INA)&&n.getModelCapabilities().supportsLightweightMetadata()||n.getModelCapabilities().supportsPersistedInA());let a=t.getMode().isTypeOf(e.QModelFormat.INA_PERSISTED_QUERY_DATA)&&i.isDynamicOrExitVariable()&&l&&e.notNull(o)&&!o.isUsingSavedPromptsForExitVariables();if(!a){r=t.exportVariable(i,r)}}}}else{r=e.PrFactory.createStructure();r.putString("Name",i.getName());t.exportVariable(i,r)}if(e.notNull(r)){l.add(r)}}}return l};e.QInAVariablesList.prototype.getComponentType=function(){return e.OlapComponentType.VARIABLE_LIST};e.QInAVariablesList.prototype.importComponentWithList=function(t,n,i,r,o){let l=i;if(e.notNull(n)){let i=n.size();for(let r=0;r<i;r++){let i=n.getStructureAt(r);let a=i.getStringByKey("Name");let s=l.getVariableBaseByName(a);if(e.notNull(s)){let n=s.getVariableType();if(n.isTypeOf(e.VariableType.SIMPLE_TYPE_VARIABLE)){t.importSimpleTypeVariable(i,s,o)}else if(n.isTypeOf(e.VariableType.DIMENSION_MEMBER_VARIABLE)){t.importDimensionMemberVariable(i,s,o)}else if(n.isTypeOf(e.VariableType.OPTION_LIST_VARIABLE)){t.importOptionListVariable(i,s,o)}else{t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate5("The variable '",a,"' of variable type '",n.getName(),"' was not imported correctly"))}}else{t.addWarning(e.ErrorCodes.ET_ELEMENT_NOT_FOUND,e.XStringUtils.concatenate3("The variable '",a,"' was not found"))}}}return i};e.QInAVariablesList.prototype.remapCurrencyVariables=function(t){let n;let i=e.XHashMapByString.create();let r=t.getQueryModel();if(e.notNull(r)){let o=r.getCurrencyTranslationManager();if(e.notNull(o)){if(o.isLegacyMeasureCurrencyTranslationAccountModel()){let l=o.getDefaultMeasureCurrencyTranslationBase();let a=false;if(e.notNull(l)){e.QInAVariablesList.applyLegacyCurrencyTranslation(i,r,t,"SignedData",l);let n=o.getQuery2MeasureCurrencyTranslationBridge();a=n.isApplyToDefaultCurrencyTranslation()}if(r.getMeasureDimension()!==null){let s=r.getMeasureDimension().getLoadedStructureMembers();let u=e.isNull(s)?0:s.size();for(n=0;n<u;n++){let u=s.get(n);if(u.getOlapComponentType()===e.MemberType.CURRENCY_MEASURE){let n=u;let s=n.getBaseMeasureName();if(e.isNull(s)&&o.isLegacyMeasureCurrencyTranslationAccountModel()){s=o.getCurrencyTranslationCrossCalculation(n.getAliasName())}if(n.getLocalCurrencyTranslation()!==null&&e.notNull(s)){if(e.notNull(l)&&o.isLegacyMeasureCurrencyTranslationAccountModel()&&a&&n.isDefaultCurrency()){e.QInAVariablesList.applyLegacyCurrencyTranslation(i,r,t,s,l)}else{e.QInAVariablesList.applyLegacyCurrencyTranslation(i,r,t,s,n.getLocalCurrencyTranslation())}}}}}}}}return i};e.QInAHierarchyValueHelp=function(){};e.QInAHierarchyValueHelp.prototype=new e.QInAComponentWithStructure;e.QInAHierarchyValueHelp.prototype._ff_c="QInAHierarchyValueHelp";e.QInAHierarchyValueHelp.addLowerLevelNodeAlignment=function(t,n,i){let r=n.getSelectorLowerLevelNodeAlignment();if(e.notNull(r)&&t.isAbap(n.getQueryModel())){let t=n.getModelCapabilities();i.putString("LowerLevelNodeAlignment",e.notNull(t)&&t.supportsExpandBottomUp()?e.QInAConverter.lookupLowerLevelNodeAlignmentInA(r):e.QInAConverter.lookupLowerLevelNodeAlignmentInA2(r))}};e.QInAHierarchyValueHelp.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=o.getSelectorHierarchyName();if(e.XStringUtils.isNullOrEmpty(l)){l=o.getHierarchyName()}let a=o.isSelectorHierarchyActive();if(a&&e.XStringUtils.isNotNullAndNotEmpty(l)){let n=e.PrFactory.createStructure();let i=o;let r=e.QInAHierarchy.isDueDatePlaceHolderForAutoSubmit(i,t.m_mode);let s=e.QInAHierarchy.isVersionPlaceHolderForAutoSubmit(i,t.m_mode);let u=e.QInAHierarchy.isNamePlaceHolderForAutoSubmit(i,t.m_mode);let p=e.XStringUtils.isNullOrEmpty(l)&&u;let g=l;if(p){l=o.getHierarchyNameVariableName()}e.QInAHierarchy.exportHierarchyNameDuedateVersion(t,n,i,a,l,g,r,s,true);n.putInteger("InitialDrillLevel",o.isSelectorUseQueryDrillOperations()&&o.hasZoomDrill()?0:o.getSelectorRootLevel());let m=o.getMemberOfPostedNodeVisibility();let c=e.QInAConverter.lookupResultSetVisibilityInA(m);n.putString("MemberOfPostedNodeVisibility",c);e.QInAHierarchyValueHelp.addLowerLevelNodeAlignment(t,o,n);let y=o.getOlapEnv().getCustomHierarchyRepository().getCustomHierarchyDefinitionByName(l);if(e.notNull(y)){n.putBoolean("IsTransient",true);n.putStringNotNull("Description",y.getDescription())}return n}return null};e.QInAHierarchyValueHelp.prototype.getComponentType=function(){return e.OlapComponentType.HIERARCHY};e.QInAHierarchyValueHelp.prototype.getModelFormat=function(){return e.QModelFormat.INA_VALUE_HELP};e.QInAHierarchyValueHelp.prototype.getTagName=function(){return"Hierarchy"};e.QInAHierarchyValueHelp.prototype.importComponentWithStructure=e.noSupport;e.MeasureValueHelpRsDimension=function(){};e.MeasureValueHelpRsDimension.prototype=new e.XObject;e.MeasureValueHelpRsDimension.prototype._ff_c="MeasureValueHelpRsDimension";e.MeasureValueHelpRsDimension.create=function(t){let n=new e.MeasureValueHelpRsDimension;n.m_dimension=t;return n};e.MeasureValueHelpRsDimension.prototype.m_dimension=null;e.MeasureValueHelpRsDimension.prototype.cloneExt=function(t){return e.MeasureValueHelpRsDimension.create(this.m_dimension)};e.MeasureValueHelpRsDimension.prototype.getDimensionType=function(){return this.m_dimension.getDimensionType()};e.MeasureValueHelpRsDimension.prototype.getFields=function(){return this.m_dimension.getFields()};e.MeasureValueHelpRsDimension.prototype.getHierarchyName=function(){return this.m_dimension.getHierarchyName()};e.MeasureValueHelpRsDimension.prototype.getLowerLevelNodeAlignment=function(){return this.m_dimension.getLowerLevelNodeAlignment()};e.MeasureValueHelpRsDimension.prototype.getMaxDrillLevel=function(){return this.m_dimension.getMaxDrillLevel()};e.MeasureValueHelpRsDimension.prototype.getMaxRuntimeLevel=function(){return this.m_dimension.getMaxRuntimeLevel()};e.MeasureValueHelpRsDimension.prototype.getName=function(){return this.m_dimension.getName()};e.MeasureValueHelpRsDimension.prototype.getText=function(){return this.m_dimension.getText()};e.MeasureValueHelpRsDimension.prototype.hasDefaultLowerLevelNodeAlignment=function(){return this.m_dimension.hasDefaultLowerLevelNodeAlignment()};e.MeasureValueHelpRsDimension.prototype.hasTimeDependentHierarchies=function(){return false};e.MeasureValueHelpRsDimension.prototype.hasVersionDependentHierarchies=function(){return false};e.MeasureValueHelpRsDimension.prototype.isClustered=function(){try{return this.m_dimension.isClustered()}catch(e){return false}};e.MeasureValueHelpRsDimension.prototype.isHierarchyActive=function(){return this.m_dimension.isHierarchyActive()};e.MeasureValueHelpRsDimension.prototype.releaseObject=function(){e.XObject.prototype.releaseObject.call(this);this.m_dimension=null};e.MeasureValueHelpRsDimension.prototype.setName=function(e){};e.XCmdDeserializeBlendingNodesResult=function(){};e.XCmdDeserializeBlendingNodesResult.prototype=new e.XCmdDeserializeBlendingResultBase;e.XCmdDeserializeBlendingNodesResult.prototype._ff_c="XCmdDeserializeBlendingNodesResult";e.XCmdDeserializeBlendingNodesResult.CLAZZ=null;e.XCmdDeserializeBlendingNodesResult.createBlendingDefinition=function(t,n,i){let r=e.QFactory.createBlendingDefinition();let o=t.size();for(let e=0;e<o;e++){r.addNewSource(t.get(e).getQueryModel(),n.get(e))}for(let t=0;t<i.size();t++){let n=i.getStructureAt(t);let o=n.getStringByKey("LinkType");let l=n.getStringByKey("DimensionName");let a=r.addNewDimensionMapping(e.BlendingLinkType.lookup(o),l);let s=n.getListByKey("Mapping");if(n.getBooleanByKeyExt("PreserveMembers",false)){a.setIsPreservingMembers(true)}if(!n.getBooleanByKeyExt("ReturnOriginKeys",true)){a.setIsReturningOriginKeys(false)}for(let t=0;t<s.size();t++){let n=s.getStructureAt(t);let i=n.getStringByKey("AliasName");let r=e.XCmdDeserializeBlendingNodesResult.getNameFromMappingDefinition(n);if(e.isNull(r)){let t=e.XCmdDeserializeBlendingNodesResult.getNameFromConstantMappingDefinition(n);a.addNewConstantMapping(t,i)}else{a.addNewDimensionMappingDefinitionByName(r,i)}}let u=n.getListByKey("AttributeMappings");if(e.notNull(u)){for(let t=0;t<u.size();t++){let n=u.getStructureAt(t);let i=n.getStringByKey("AttributeName");let r=n.getBooleanByKey("IsLinkKey");let o=a.addNewAttributeMappingByName(i,r);let l=n.getListByKey("Mapping");for(let t=0;t<l.size();t++){let n=l.getStructureAt(t);let i=e.XCmdDeserializeBlendingNodesResult.getNameFromMappingDefinition(n);let r=n.getStringByKey("AliasName");if(e.isNull(i)){let t=e.XCmdDeserializeBlendingNodesResult.getNameFromConstantMappingDefinition(n);a.addNewConstantMapping(t,r)}else{o.addAttributeMappingDefinition(e.BlendingMappingDefinition.createAttributeMapping(i,r))}}}}}return r};e.XCmdDeserializeBlendingNodesResult.getNameFromConstantMappingDefinition=function(e){let t=e.getStructureByKey("MappingDefinition");if(t.containsKey("Constant")){let e=t.getStructureByKey("Constant");return e.getStringByKey("Value")}return null};e.XCmdDeserializeBlendingNodesResult.getNameFromMappingDefinition=function(e){let t=e.getStructureByKey("MappingDefinition");if(t.containsKey("Member")){let e=t.getStructureByKey("Member");return e.getStringByKey("Name")}return null};e.XCmdDeserializeBlendingNodesResult.staticSetup=function(){e.XCmdDeserializeBlendingNodesResult.CLAZZ=e.XClass.create(e.XCmdDeserializeBlendingNodesResult)};e.XCmdDeserializeBlendingNodesResult.prototype.importSourceQueryModel=function(t,n,i,r){this.m_queryManagers.add(null);let o=n.getStructureByKey("DefiningContext");let l=o.getStructureByKey("Definition");let a=l.getStructureByKey("DataSource");let s=e.XCommandFactory.create(t);let u;let p=this.getParameterStrict(e.CmdDeserializeBlendingNodes.PARAM_I_LEAF_QUERY_MODELS);if(a.containsKey("Mappings")){u=s.createCommand(e.CmdDeserializeBlendingNodes.CMD_NAME);u.addParameter(e.CmdDeserializeBlendingNodes.PARAM_I_APPLICATION,this.getParameterStrict(e.CmdDeserializeBlending.PARAM_I_APPLICATION));u.addParameter(e.CmdDeserializeBlendingNodes.PARAM_I_SYSTEMS,this.getParameter(e.CmdDeserializeBlending.PARAM_I_SYSTEMS));u.addParameterString(e.CmdDeserializeBlendingNodes.PARAM_I_SYSTEM,this.getParameterString(e.CmdDeserializeBlending.PARAM_I_SYSTEM));u.addParameterString(e.CmdDeserializeBlendingNodes.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY,l.toString());u.addParameter(e.CmdDeserializeBlendingNodes.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,this.getParameter(e.CmdDeserializeBlending.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES));u.addParameter(e.CmdDeserializeBlendingNodes.PARAM_I_EXT_DIMS_INFO,this.getParameter(e.CmdDeserializeBlending.PARAM_I_EXT_DIMS_INFO));u.addParameter(e.CmdDeserializeBlendingNodes.PARAM_I_LEAF_QUERY_MODELS,p)}else{let t=p.getByKey(i);let n=t.serializeToString(e.QModelFormat.INA_REPOSITORY);let r=e.JsonParserFactory.newInstance();l=r.parse(n);u=s.createCommand(e.CmdCreateQueryManager.CMD_NAME);u.addParameter(e.CmdCreateQueryManager.PARAM_I_QUERY_MODEL_STRUCTURE_INA_REPOSITORY,l);u.addParameter(e.CmdCreateQueryManager.PARAM_I_APPLICATION,this.getParameterStrict(e.CmdDeserializeBlending.PARAM_I_APPLICATION));u.addParameterString(e.CmdCreateQueryManager.PARAM_I_SYSTEM,this.getSystemName(i));u.addParameterString(e.CmdCreateQueryManager.PARAM_I_DATA_SOURCE,this.getDataSourceName(a));u.addParameter(e.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,this.getParameter(e.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES));u.addParameter(e.CmdDeserializeBlendingNodes.PARAM_I_EXT_DIMS_INFO,this.getParameter(e.CmdDeserializeBlending.PARAM_I_EXT_DIMS_INFO))}u.processCommand(this.getSyncType(),this,r)};e.XCmdDeserializeBlendingNodesResult.prototype.onAllQueryManagersImported=function(){let t=this.m_rootElement.getStructureByKey("DataSource").getListByKey("Mappings");let n=e.XCmdDeserializeBlendingNodesResult.createBlendingDefinition(this.m_queryManagers,this.m_aliases,t);let i=this.getParameterStrict(e.CmdDeserializeBlending.PARAM_I_APPLICATION);let r=e.QueryServiceConfig.createWithBlendingDefinition(i,n);let o=this.m_rootElement.getStringByKeyExt("ExperimentalFeatures",null);let l=this.getParameter(e.CmdDeserializeBlending.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES);e.XCommandUtil.handleInactiveCapabilities(r,o,l);r.processQueryManagerCreation(this.getSyncType(),this,null)};e.XCmdDeserializeBlendingNodesResult.prototype.onQueryManagerCreated=function(t,n,i){this.getMessageManager().addAllMessages(t);if(t.isValid()){let t=this.getParameterStringStrict(e.CmdDeserializeBlending.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY);let i=n.getQueryModel().deserializeExt(e.QModelFormat.INA_REPOSITORY,t);this.getMessageManager().addAllMessages(i);this.addResultParameter(e.CmdDeserializeBlendingNodes.PARAM_E_QUERY_MANAGER,n)}this.onProcessFinished()};e.XCmdDeserializeBlendingNodesResult.prototype.onQueryManagerImported=function(t,n){let i=t.getResultParameter(e.CmdDeserializeBlending.PARAM_E_QUERY_MANAGER);if(e.notNull(i)){this.m_queryManagers.set(n,i)}else{let i=t.getResultParameter(e.CmdDeserializeBlendingNodes.PARAM_E_QUERY_MANAGER);this.m_queryManagers.set(n,i)}};e.XCmdDeserializeBlendingResult=function(){};e.XCmdDeserializeBlendingResult.prototype=new e.XCmdDeserializeBlendingResultBase;e.XCmdDeserializeBlendingResult.prototype._ff_c="XCmdDeserializeBlendingResult";e.XCmdDeserializeBlendingResult.CLAZZ=null;e.XCmdDeserializeBlendingResult.createBlendingDefinition=function(t,n,i){let r=e.QFactory.createBlendingDefinition();let o=t.size();for(let e=0;e<o;e++){r.addNewSource(t.get(e).getQueryModel(),n.get(e))}for(let t=0;t<i.size();t++){let n=i.getStructureAt(t);let o=n.getStringByKey("LinkType");let l=n.getStringByKey("DimensionName");let a=r.addNewDimensionMapping(e.BlendingLinkType.lookup(o),l);let s=n.getListByKey("Mapping");if(n.getBooleanByKeyExt("PreserveMembers",false)){a.setIsPreservingMembers(true)}if(!n.getBooleanByKeyExt("ReturnOriginKeys",true)){a.setIsReturningOriginKeys(false)}for(let t=0;t<s.size();t++){let n=s.getStructureAt(t);let i=n.getStringByKey("AliasName");let r=e.XCmdDeserializeBlendingResult.getNameFromMappingDefinition(n);if(e.isNull(r)){let t=e.XCmdDeserializeBlendingResult.getNameFromConstantMappingDefinition(n);a.addNewConstantMapping(t,i)}else{a.addNewDimensionMappingDefinitionByName(r,i)}}let u=n.getListByKey("AttributeMappings");if(e.notNull(u)){for(let t=0;t<u.size();t++){let n=u.getStructureAt(t);let i=n.getStringByKey("AttributeName");let r=n.getBooleanByKey("IsLinkKey");let o=a.addNewAttributeMappingByName(i,r);let l=n.getListByKey("Mapping");for(let t=0;t<l.size();t++){let n=l.getStructureAt(t);let i=e.XCmdDeserializeBlendingResult.getNameFromMappingDefinition(n);let r=n.getStringByKey("AliasName");if(e.isNull(i)){let t=e.XCmdDeserializeBlendingResult.getNameFromConstantMappingDefinition(n);a.addNewConstantMapping(t,r)}else{o.addAttributeMappingDefinition(e.BlendingMappingDefinition.createAttributeMapping(i,r))}}}}}return r};e.XCmdDeserializeBlendingResult.getNameFromConstantMappingDefinition=function(e){let t=e.getStructureByKey("MappingDefinition");if(t.containsKey("Constant")){let e=t.getStructureByKey("Constant");return e.getStringByKey("Value")}return null};e.XCmdDeserializeBlendingResult.getNameFromMappingDefinition=function(e){let t=e.getStructureByKey("MappingDefinition");if(t.containsKey("Member")){let e=t.getStructureByKey("Member");return e.getStringByKey("Name")}return null};e.XCmdDeserializeBlendingResult.staticSetup=function(){e.XCmdDeserializeBlendingResult.CLAZZ=e.XClass.create(e.XCmdDeserializeBlendingResult)};e.XCmdDeserializeBlendingResult.prototype.importSourceQueryModel=function(t,n,i,r){this.m_queryManagers.add(null);let o=n.getStructureByKey("DefiningContext");let l=o.getStructureByKey("Definition");let a=l.getStructureByKey("DataSource");let s=e.XCommandFactory.create(t);let u;if(a.containsKey("Mappings")){u=s.createCommand(e.CmdDeserializeBlending.CMD_NAME);u.addParameter(e.CmdDeserializeBlending.PARAM_I_APPLICATION,this.getParameterStrict(e.CmdDeserializeBlending.PARAM_I_APPLICATION));u.addParameter(e.CmdDeserializeBlending.PARAM_I_SYSTEMS,this.getParameter(e.CmdDeserializeBlending.PARAM_I_SYSTEMS));u.addParameterString(e.CmdDeserializeBlending.PARAM_I_SYSTEM,this.getParameterString(e.CmdDeserializeBlending.PARAM_I_SYSTEM));u.addParameterString(e.CmdDeserializeBlending.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY,l.toString());u.addParameter(e.CmdDeserializeBlending.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,this.getParameter(e.CmdDeserializeBlending.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES));u.addParameter(e.CmdDeserializeBlending.PARAM_I_EXT_DIMS_INFO,this.getParameter(e.CmdDeserializeBlending.PARAM_I_EXT_DIMS_INFO))}else{u=s.createCommand(e.CmdCreateQueryManager.CMD_NAME);u.addParameter(e.CmdCreateQueryManager.PARAM_I_QUERY_MODEL_STRUCTURE_INA_REPOSITORY,l);u.addParameter(e.CmdCreateQueryManager.PARAM_I_APPLICATION,this.getParameterStrict(e.CmdDeserializeBlending.PARAM_I_APPLICATION));u.addParameterString(e.CmdCreateQueryManager.PARAM_I_SYSTEM,this.getSystemName(i));u.addParameterString(e.CmdCreateQueryManager.PARAM_I_DATA_SOURCE,this.getDataSourceName(a));u.addParameter(e.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,this.getParameter(e.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES));u.addParameter(e.CmdDeserializeBlending.PARAM_I_EXT_DIMS_INFO,this.getParameter(e.CmdDeserializeBlending.PARAM_I_EXT_DIMS_INFO))}u.processCommand(this.getSyncType(),this,r)};e.XCmdDeserializeBlendingResult.prototype.onAllQueryManagersImported=function(){let t=this.m_rootElement.getStructureByKey("DataSource").getListByKey("Mappings");let n=e.XCmdDeserializeBlendingResult.createBlendingDefinition(this.m_queryManagers,this.m_aliases,t);let i=this.getParameterStrict(e.CmdDeserializeBlending.PARAM_I_APPLICATION);let r=e.QueryServiceConfig.createWithBlendingDefinition(i,n);let o=this.m_rootElement.getStringByKeyExt("ExperimentalFeatures",null);let l=this.getParameter(e.CmdDeserializeBlending.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES);e.XCommandUtil.handleInactiveCapabilities(r,o,l);r.processQueryManagerCreation(this.getSyncType(),this,null)};e.XCmdDeserializeBlendingResult.prototype.onQueryManagerCreated=function(t,n,i){this.getMessageManager().addAllMessages(t);if(t.isValid()){let t=this.getParameterStringStrict(e.CmdDeserializeBlending.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY);let i=n.getQueryModel().deserializeExt(e.QModelFormat.INA_REPOSITORY,t);this.getMessageManager().addAllMessages(i);this.addResultParameter(e.CmdDeserializeBlending.PARAM_E_QUERY_MANAGER,n)}this.onProcessFinished()};e.XCmdDeserializeBlendingResult.prototype.onQueryManagerImported=function(t,n){this.m_queryManagers.set(n,t.getResultParameter(e.CmdDeserializeBlending.PARAM_E_QUERY_MANAGER))};e.XCmdDeserializeBlendingSourcesResult=function(){};e.XCmdDeserializeBlendingSourcesResult.prototype=new e.XCmdDeserializeBlendingResultBase;e.XCmdDeserializeBlendingSourcesResult.prototype._ff_c="XCmdDeserializeBlendingSourcesResult";e.XCmdDeserializeBlendingSourcesResult.CLAZZ=null;e.XCmdDeserializeBlendingSourcesResult.staticSetup=function(){e.XCmdDeserializeBlendingSourcesResult.CLAZZ=e.XClass.create(e.XCmdDeserializeBlendingSourcesResult)};e.XCmdDeserializeBlendingSourcesResult.prototype.m_currentIndex=0;e.XCmdDeserializeBlendingSourcesResult.prototype.m_results=null;e.XCmdDeserializeBlendingSourcesResult.prototype.importSourceQueryModel=function(t,n,i,r){let o=n.getStructureByKey("DefiningContext");let l=o.getStructureByKey("Definition");let a=l.getStructureByKey("DataSource");let s=e.XCommandFactory.create(t);let u;if(a.containsKey("Sources")){u=s.createCommand(e.CmdDeserializeBlendingSources.CMD_NAME);u.addParameter(e.CmdDeserializeBlendingSources.PARAM_I_APPLICATION,this.getParameterStrict(e.CmdDeserializeBlendingSources.PARAM_I_APPLICATION));u.addParameter(e.CmdDeserializeBlendingSources.PARAM_I_SYSTEMS,this.getParameter(e.CmdDeserializeBlendingSources.PARAM_I_SYSTEMS));u.addParameterString(e.CmdDeserializeBlendingSources.PARAM_I_SYSTEM,this.getParameterString(e.CmdDeserializeBlendingSources.PARAM_I_SYSTEM));u.addParameterString(e.CmdDeserializeBlendingSources.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY,l.toString());u.addParameter(e.CmdDeserializeBlending.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,this.getParameter(e.CmdDeserializeBlendingSources.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES));u.addParameter(e.CmdDeserializeBlendingSources.PARAM_I_EXT_DIMS_INFO,this.getParameter(e.CmdDeserializeBlendingSources.PARAM_I_EXT_DIMS_INFO));u.addParameter(e.CmdDeserializeBlendingSources.PARAM_I_MODELLER_CONTENT_LIST_INA_REPOSITORY,this.getParameter(e.CmdDeserializeBlendingSources.PARAM_I_MODELLER_CONTENT_LIST_INA_REPOSITORY))}else{let t=this.getDataSourceName(a);u=s.createCommand(e.CmdCreateQueryManager.CMD_NAME);u.addParameter(e.CmdCreateQueryManager.PARAM_I_QUERY_MODEL_STRUCTURE_INA_REPOSITORY,l);u.addParameter(e.CmdCreateQueryManager.PARAM_I_APPLICATION,this.getParameterStrict(e.CmdDeserializeBlendingSources.PARAM_I_APPLICATION));u.addParameterString(e.CmdCreateQueryManager.PARAM_I_SYSTEM,this.getSystemName(i));u.addParameterString(e.CmdCreateQueryManager.PARAM_I_DATA_SOURCE,t);u.addParameter(e.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,this.getParameter(e.CmdDeserializeBlendingSources.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES));u.addParameter(e.CmdDeserializeBlendingSources.PARAM_I_EXT_DIMS_INFO,this.getParameter(e.CmdDeserializeBlendingSources.PARAM_I_EXT_DIMS_INFO));let n=this.getParameter(e.CmdDeserializeBlendingSources.PARAM_I_MODELLER_CONTENT_LIST_INA_REPOSITORY);if(e.notNull(n)){let i=n.getIterator();while(i.hasNext()){let n=i.next();if(n.containsKey("DataSource")){let i=this.getDataSourceName(n.getStructureByKey("DataSource"));if(e.XString.isEqual(i,t)){u.addParameter(e.CmdCreateQueryManager.PARAM_I_MODELLER_CONTENT_INA_REPOSITORY,e.XContent.createJsonObjectContent(e.QModelFormat.INA_REPOSITORY,n));break}}}}}this.m_results.add(null);u.processCommand(this.getSyncType(),this,e.XIntegerValue.create(this.m_currentIndex));this.m_currentIndex++};e.XCmdDeserializeBlendingSourcesResult.prototype.onAllQueryManagersImported=function(){for(let e=0;e<this.m_results.size();e++){this.m_queryManagers.addAll(this.m_results.get(e))}this.addResultParameter(e.CmdDeserializeBlendingSources.PARAM_E_QUERY_MANAGERS,this.m_queryManagers.createListCopy());this.onProcessFinished()};e.XCmdDeserializeBlendingSourcesResult.prototype.onQueryManagerImported=function(t,n){let i=t.getResultParameter(e.CmdDeserializeBlendingSources.PARAM_E_QUERY_MANAGER);if(e.notNull(i)){this.m_results.set(n,e.XCollectionUtils.singletonList(i))}else{let i=t.getResultParameter(e.CmdDeserializeBlendingSources.PARAM_E_QUERY_MANAGERS);this.m_results.set(n,i)}};e.XCmdDeserializeBlendingSourcesResult.prototype.process=function(){this.m_results=e.XList.create();e.XCmdDeserializeBlendingResultBase.prototype.process.call(this)};e.XCmdDeserializeBlendingSourcesResult.prototype.releaseObject=function(){e.XCmdDeserializeBlendingResultBase.prototype.releaseObject.call(this);this.m_results=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_results)};e.QCsnMdDimMembers=function(){};e.QCsnMdDimMembers.prototype=new e.QCsnComponentMetadata;e.QCsnMdDimMembers.prototype._ff_c="QCsnMdDimMembers";e.QCsnMdDimMembers.prototype.addCurrencyDimReference=function(t,n,i){let r=i.getBaseValueType();if(r===e.XValueType.AMOUNT){let i=n.getDimension().getQueryModel();let r=i.getDimensionByType(e.DimensionType.CURRENCY);if(e.notNull(r)){t.putNewStructure(e.CsnConstants.A_ISO_CURRENCY).putString(e.CsnConstants.REFERENCE,this.getDimExternalName(r))}}};e.QCsnMdDimMembers.prototype.addUnitDimReference=function(t,n,i){let r=i.getBaseValueType();if(r===e.XValueType.QUANTITY){let i=n.getDimension().getQueryModel();let r=i.getDimensionByType(e.DimensionType.UNIT);if(e.notNull(r)){t.putNewStructure(e.CsnConstants.A_MEASURES_UNIT).putString(e.CsnConstants.REFERENCE,this.getDimExternalName(r))}}};e.QCsnMdDimMembers.prototype.createStructureMemberElement=function(t,n){let i=e.PrFactory.createStructure();i.putBoolean(e.CsnConstants.A_MEASURE,true);i.putString(e.CsnConstants.A_COMMON_LABEL,t.getText());i.putNewStructure(e.CsnConstants.A_QUERY_AXIS).putString(e.CsnConstants.ENUM,e.QCsnConverter.lookupAxisCsn(n));let r=t.getAggregationType();if(e.notNull(r)){let t=i.putNewStructure(e.CsnConstants.A_DEFAULT_AGGREGATION);t.putString(e.CsnConstants.ENUM,r.getName())}let o=t.getNumericPrecision();if(e.notNull(o)){i.putInteger(e.CsnConstants.PRECISION,o.getInteger())}let l=t.getNumericScale();if(e.notNull(l)){i.putInteger(e.CsnConstants.SCALE,l.getInteger())}let a=t.getResultVisibility();if(a===e.ResultVisibility.HIDDEN){i.putBoolean(e.CsnConstants.A_UI_HIDDEN,true)}let s=t.getQueryDataCells();if(s.size()===1){let n=s.get(0);i.putInteger(e.CsnConstants.A_DECIMALS,n.getDecimalPlaces());this.addCurrencyDimReference(i,t,n);this.addUnitDimReference(i,t,n)}return i};e.QCsnMdDimMembers.prototype.exportComponentWithStructure=function(e,t,n,i){let r=t;let o=r.getFlatDisplayKeyField();let l=r.getAllStructureMembers();let a=l.size();for(let e=0;e<a;e++){let t=l.get(e);let i=t.getFieldValue(o).getValue();let a=this.createStructureMemberElement(t,r.getDefaultAxisType());n.put(i.getStringRepresentation(),a)}return n};e.QCsnMdDimMembers.prototype.getComponentType=function(){return e.OlapComponentType.MEMBERS};e.QCsnMdDimMembers.prototype.importComponentWithStructure=function(e,t,n,i,r){return null};e.QCsnMdDimension=function(){};e.QCsnMdDimension.prototype=new e.QCsnComponentMetadata;e.QCsnMdDimension.prototype._ff_c="QCsnMdDimension";e.QCsnMdDimension.getDisplay=function(t){let n=e.XList.create();let i=t.getMainAttribute().getDefaultResultSetFields();let r=0;while(r<i.size()&&n.size()<2){e.XCollectionUtils.addIfNotPresent(n,i.get(r).isKeyField()?e.CsnConstants.DISPLAY_KEY:e.CsnConstants.DISPLAY_TEXT);r++}return n.hasElements()?e.XCollectionUtils.join(n,"_"):e.CsnConstants.DISPLAY_KEY};e.QCsnMdDimension.getTotals=function(t){return t.isTotalsVisibilityOnDefault()?e.CsnConstants.TOTALS_SHOW:e.CsnConstants.TOTALS_HIDE};e.QCsnMdDimension.prototype.addFields=function(t,n){let i=n.getFlatKeyField();let r=n.getFlatTextField();let o=n.getFields();let l=o.size();for(let n=0;n<l;n++){let l=o.get(n);let a=t.putNewStructure(this.getFieldName(l));this.addLength(a,l);a.putString(e.CsnConstants.TYPE,e.QCsnConverter.lookupValueTypeCsn(l.getValueType(),e.CsnConstants.TYPE_STRING));if(l.isKeyField()){a.putBoolean(e.CsnConstants.KEY,true);let t=l===i&&e.notNull(r)?this.getFieldName(r):null;if(e.XStringUtils.isNotNullAndNotEmpty(t)){a.putNewStructure(e.CsnConstants.A_TEXT_ATTRIBUTE).putString(e.CsnConstants.REFERENCE,t)}}else{a.putNewStructure(e.CsnConstants.A_TEXT_FOR).putString(e.CsnConstants.REFERENCE,this.getFieldName(i))}if(!l.isFilterable()){a.putBoolean(e.CsnConstants.A_FILTERABLE,false)}}};e.QCsnMdDimension.prototype.addLength=function(t,n){if(n.getValueType().isString()&&n.getLength()>0){t.putInteger(e.CsnConstants.LENGTH,n.getLength())}};e.QCsnMdDimension.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=o.getFlatKeyField();let a=i.putNewStructure(this.getDimExternalName(o));a.putBoolean(e.CsnConstants.A_DIMENSION,true);a.putString(e.CsnConstants.TYPE,e.CsnConstants.TYPE_ASSOCIATION);a.putString(e.CsnConstants.TARGET,o.getName());if(e.notNull(l)){this.addLength(a,l)}a.putNewStructure(e.CsnConstants.A_QUERY_AXIS).putString(e.CsnConstants.ENUM,e.QCsnConverter.lookupAxisCsn(o.getDefaultAxisType()));a.putNewStructure(e.CsnConstants.A_QUERY_DISPLAY).putString(e.CsnConstants.ENUM,e.QCsnMdDimension.getDisplay(o));a.putNewStructure(e.CsnConstants.A_QUERY_TOTALS).putString(e.CsnConstants.ENUM,e.QCsnMdDimension.getTotals(o));a.putNewList(e.CsnConstants.KEYS).addNewStructure().putNewList(e.CsnConstants.REF).addAllStrings(this.getAllKeys(o));let s=e.PrFactory.createStructure();s.putString(e.CsnConstants.A_COMMON_LABEL,o.getText());s.putString(e.CsnConstants.KIND,e.CsnConstants.KIND_ENTITY);s.putNewStructure(e.CsnConstants.A_DATA_CATEGORY).putString(e.CsnConstants.ENUM,e.CsnConstants.DATA_CATEGORY_DIMENSION);if(e.notNull(l)){s.putString(e.CsnConstants.A_REPRESENTATIVE_KEY,this.getFieldName(l))}this.addFields(s.putNewStructure(e.CsnConstants.ELEMENTS),o);return s};e.QCsnMdDimension.prototype.getAllKeys=function(t){let n=e.XList.create();let i=t.getFlatKeyField();let r=t.getFields();let o=r.size();for(let t=0;t<o;t++){let o=r.get(t);let l=o.getPresentationType();let a=o===i;let s=l===e.PresentationType.KEY&&!o.isHierarchyKeyField();if(a||s){n.add(this.getFieldName(o))}}return n};e.QCsnMdDimension.prototype.getComponentType=function(){return e.OlapComponentType.ABSTRACT_DIMENSION};e.QCsnMdDimension.prototype.importComponentWithStructure=function(e,t,n,i,r){return null};e.QCsnMdDimensions=function(){};e.QCsnMdDimensions.prototype=new e.QCsnComponentMetadata;e.QCsnMdDimensions.prototype._ff_c="QCsnMdDimensions";e.QCsnMdDimensions.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=i.getStructureByKey(o.getDataSource().getObjectName());let a=l.getStructureByKey(e.CsnConstants.ELEMENTS);let s=o.getDimensions();let u=s.size();for(let e=0;e<u;e++){let n=s.get(e);if(n.isMeasureStructure()){t.exportMembers(n,a)}else{let e=t.exportDimension(n,a);i.put(n.getName(),e)}}return i};e.QCsnMdDimensions.prototype.getComponentType=function(){return e.OlapComponentType.DIMENSIONS};e.QCsnMdDimensions.prototype.importComponentWithStructure=function(e,t,n,i,r){return null};e.QCsnMdQuery=function(){};e.QCsnMdQuery.prototype=new e.QCsnComponentMetadata;e.QCsnMdQuery.prototype._ff_c="QCsnMdQuery";e.QCsnMdQuery.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=i.putNewStructure(e.CsnConstants.DEFINITIONS);let a=l.putNewStructure(o.getDataSource().getObjectName());a.putString(e.CsnConstants.KIND,e.CsnConstants.KIND_ENTITY);a.putString(e.CsnConstants.A_COMMON_LABEL,o.getText());a.putNewStructure(e.CsnConstants.ELEMENTS);t.exportDimensions(o,l);t.exportVariables(o.getVariableContainer(),i);return i};e.QCsnMdQuery.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_MODEL};e.QCsnMdQuery.prototype.importComponentWithStructure=function(e,t,n,i,r){return null};e.QCsnMdQuery.prototype.newModelComponent=function(t,n,i,r){return e.QueryModel.create(n,null,e.QCapabilities.create())};e.QCsnMdVariable=function(){};e.QCsnMdVariable.prototype=new e.QCsnComponentMetadata;e.QCsnMdVariable.prototype._ff_c="QCsnMdVariable";e.QCsnMdVariable.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;i.putString(e.CsnConstants.NAME,this.getVariableName(o));return i};e.QCsnMdVariable.prototype.getComponentType=function(){return e.VariableType.ANY_VARIABLE};e.QCsnMdVariable.prototype.getVariableName=function(t){let n=t.getNameExternal();return e.XStringUtils.isNotNullAndNotEmpty(n)?n:t.getName()};e.QCsnMdVariable.prototype.importComponentWithStructure=function(e,t,n,i,r){return null};e.QCsnMdVariables=function(){};e.QCsnMdVariables.prototype=new e.QCsnComponentMetadata;e.QCsnMdVariables.prototype._ff_c="QCsnMdVariables";e.QCsnMdVariables.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=o.getVariables();if(l.hasElements()){let n=i.putNewList(e.CsnConstants.PARAMETERS);let r=l.size();for(let e=0;e<r;e++){t.exportVariable(l.get(e),n.addNewStructure())}}return i};e.QCsnMdVariables.prototype.getComponentType=function(){return e.OlapComponentType.VARIABLE_CONTAINER};e.QCsnMdVariables.prototype.importComponentWithStructure=function(e,t,n,i,r){return null};e.QInAMdBasicMeasure=function(){};e.QInAMdBasicMeasure.prototype=new e.QInAComponentMetadata;e.QInAMdBasicMeasure.prototype._ff_c="QInAMdBasicMeasure";e.QInAMdBasicMeasure.prototype.exportComponentWithStructure=function(e,t,n,i){let r=t;n.putString("Name",r.getName());return n};e.QInAMdBasicMeasure.prototype.getComponentType=function(){return e.MemberType.BASIC_MEASURE};e.QInAMdBasicMeasure.prototype.importComponentWithStructure=function(e,t,n,i,r){let o=n;o.setName(t.getStringByKey("Name"));return n};e.QInAMdBasicMeasure.prototype.newModelComponent=function(t,n,i,r){return e.QBasicMeasure._createBasicMeasure(r,i)};e.QInAMdDataSource=function(){};e.QInAMdDataSource.prototype=new e.QInAComponentMetadata;e.QInAMdDataSource.prototype._ff_c="QInAMdDataSource";e.QInAMdDataSource.exportMd=function(t,n,i){let r=e.QInADataSource.exportDataSource(t,i.getDataSource(),false,n,true);if(i.getDataSource().getValidationHash()!==null){r.putString("ValidationHash",i.getDataSource().getValidationHash())}if(i.getQueryManager().getInitSettings().usesMetadataCache()){r.putBoolean("Cache",true)}return r};e.QInAMdDataSource.importMd=function(t,n,i,r){let o=n;if(e.notNull(o)&&!o.containsKey("DataSource")){o=o.getStructureByKey("Analytics");if(e.notNull(o)&&!o.containsKey("DataSource")){o=o.getStructureByKey("Definition")}if(e.isNull(o)&&n.containsKey("Definition")){o=n.getStructureByKey("Definition")}if(e.isNull(o)&&n.containsKey("ListReporting")){o=n.getStructureByKey("ListReporting")}}let l=null;if(e.notNull(o)&&o.containsKey("DataSource")){l=e.QInADataSource.importQd(t,o,"DataSource",r);if(e.notNull(l)){if(e.XStringUtils.isNullOrEmpty(l.getText())){let t=o.getStringByKey("Description");if(e.XStringUtils.isNotNullAndNotEmpty(t)){l.setText(t)}}l.setCreatedBy(o.getStringByKey("CreatedBy"));l.setLastUpdateBy(o.getStringByKey("LastDataUpdateBy"));let t=o.getStringByKey("CreatedOn");let n=e.XDateTime.createDateTimeSafe(t);l.setCreatedOn(n);let i=o.getStringByKey("LastDataUpdateOn");if(e.isNull(i)){i=o.getStringByKey("LastDataUpdate")}let r=e.XDateTime.createDateTimeSafe(i);l.setLastUpdateOn(r);let a=o.getStringByKey("DueDate");let s=e.XDateTime.createDateTimeSafe(a);l.setDueDate(s)}}let a=e.QInADataSource.importQd(t,n,"BaseDataSource",r);if(e.notNull(a)){if(e.notNull(l)){l.setParentCubeInfo(a)}i.setBaseDataSource(a);let t=e.QInfoProvider.createInfoProvider(i,a.getObjectName(),a.getObjectName(),null);i.setInfoProvider(t)}if(e.notNull(l)){i.setCubeInfo(l)}};e.QInAMdDataSource.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;return e.QInAMdDataSource.exportMd(t,i,o)};e.QInAMdDataSource.prototype.getComponentType=function(){return null};e.QInAMdDataSource.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;e.QInAMdDataSource.importMd(t,n,l,o);return i};e.QInAMdDimMembers=function(){};e.QInAMdDimMembers.prototype=new e.QInAComponentMetadata;e.QInAMdDimMembers.prototype._ff_c="QInAMdDimMembers";e.QInAMdDimMembers.decideMeasureTypeAndAdd=function(e,t,n,i){let r;let o=e.isMeasureStructure()?"[Measures].[MemberType]":"[CustomDimension2].[MemberType]";let l=t.getIntegerByKeyExt(o,-1);if(l===0){r=e.addNewFormulaMeasure(n,i)}else if(l===1){r=e.addNewRestrictedMeasure(n,i)}else{r=e.addNewBasicMeasure(n,i)}return r};e.QInAMdDimMembers.exportMd=function(t,n,i){let r=i.getBasicStructureMembers();if(e.notNull(r)){let o=n.putNewList("BasicMembers");if(!(t.getOriginalMode().isTypeOf(e.QModelFormat.INA_CLONE)&&i.getDimensionType()===e.DimensionType.ACCOUNT)){e.QInAMdDimMembers.exportMemberDetails(t,i,r,o)}}let o=i.getExtendedStructureMembers();if(e.XCollectionUtils.hasElements(o)){let r=o.size();let l=e.XListOfNameObject.create();for(let e=0;e<r;e++){let t=o.get(e);if(t.isCreatedFromMetadata()){l.add(t)}}if(e.XCollectionUtils.hasElements(l)){let r=n.putNewList("Extended_Members_From_MD");e.QInAMdDimMembers.exportMemberDetails(t,i,l,r)}}let l=i.getOrderedStructureMemberNames();if(e.notNull(l)){let e=n.putNewList("OrderedStructureMemberNames");e.addAllStrings(l)}};e.QInAMdDimMembers.exportMemberDetails=function(t,n,i,r){if(e.notNull(i)){let o=n.getFields();let l=o.size();let a=n.getTextField();let s=e.notNull(a)?a.getName():null;let u=i.size();for(let a=0;a<u;a++){let u=r.addNewStructure();let p=i.get(a);let g=n.getModelCapabilities().supportsCustomMeasuresInMetadata();if(g){let t=e.QInAConverter.lookupMeasureStructureMemberTypeInaForUniversalModels(p.getMemberType());let i=n.isMeasureStructure()?"[Measures].[MemberType]":"[CustomDimension2].[MemberType]";u.putInteger(i,t)}if(p.getMemberType()===e.MemberType.BASIC_MEASURE){if(p.isNotFromMetadata()){u.putBoolean("BasicMeasureNotFromMetadata",true)}}if(p.isModelDefinedMember()){u.putBoolean("isModelDefinedMember",true)}for(let n=0;n<l;n++){let i=o.get(n);if(i.isCubeBlendingPropertiesField()){continue}let r=p.getFieldValue(i);if(e.isNull(r)){continue}if(!p.isSelectionCandidate()){u.putBoolean("IsSelectionCandidate",false)}let l=p.getDefaultSelectedDimensionNames();if(e.notNull(l)){let e=u.putNewList("DefaultSelectedDimensions");e.addAllStrings(l)}e.QInAExportUtil.setNameIfNotNull(u,"SingleValueCalculation",p.getSingleValueCalculation());e.QInAExportUtil.setNameIfNotNull(u,"ResultCalculation",p.getResultCalculation());e.QInAExportUtil.setNameIfNotNull(u,"Aggregation",p.getAggregationType());if(p.isCumulation()){u.putBoolean("IsCumulation",true)}let a=p.getNumericPrecision();if(e.notNull(a)){u.putInteger("NumericPrecision",a.getInteger())}let g=p.getNumericScale();if(e.notNull(g)){u.putInteger("NumericScale",g.getInteger())}let m=p.getNumericShift();if(e.notNull(m)){u.putInteger("NumericShift",m.getInteger())}if(p.getMappedCurrencyTranslationNameForInAData()!==null){u.putString("CurrencyTranslationName",p.getMappedCurrencyTranslationNameForInAData())}if(p.getUnitTranslationName()!==null){u.putString("UnitTranslationName",p.getUnitTranslationName())}let c=i.getName();let y=r.getValueType();if(y===e.XValueType.STRING){if(e.notNull(s)&&e.XString.isEqual(c,s)&&p.hasOverrideTextDefined()){u.putString(c,p.getText())}else{u.putString(c,r.getString())}}else if(y===e.XValueType.BOOLEAN){u.putBoolean(c,r.getBoolean())}else if(y===e.XValueType.INTEGER){u.putInteger(c,r.getInteger())}else if(y===e.XValueType.LONG){u.putLong(c,r.getLong())}else if(y===e.XValueType.DOUBLE||y===e.XValueType.DECIMAL_FLOAT){u.putDouble(c,r.getDouble())}else{t.addError(e.ErrorCodes.INVALID_TOKEN,"Unsupported element type")}}u.putStringNotNullAndNotEmpty("SemanticObject",p.getSemanticObject())}}};e.QInAMdDimMembers.importMd=function(t,n,i){if(n.supportsBasicStructureMembers()){let r=i.getListByKey("BasicMembers");if(e.isNull(r)){r=i.getListByKey("Members")}e.QInAMdDimMembers.importMemberDetails(t,n,r);if(t.hasErrors()){return}let o=i.getListByKey("Extended_Members_From_MD");e.QInAMdDimMembers.importMemberDetails(t,n,o);if(t.hasErrors()){return}}let r=e.PrUtils.getListProperty(i,"OrderedStructureMemberNames");if(e.notNull(r)){let t=e.XList.create();let i=e.PrUtils.getListSize(r,0);for(let n=0;n<i;n++){let i=e.PrUtils.getStringElement(r,n);e.XObjectExt.assertNotNullExt(i,"illegal state");t.add(i.getString())}n.reOrderStructureMembers(t)}};e.QInAMdDimMembers.importMemberDetails=function(t,n,i){if(e.notNull(i)){let r=n.getFields();let o=n.getKeyField();let l=o.getName();let a=n.getTextField();let s=e.isNull(a)?null:a.getName();let u=i.size();for(let o=0;o<u;o++){let a=i.getStructureAt(o);let u=a.getStringByKey(l);let p=a.getStringByKey(s);let g=null;if(t.getOriginalMode().isTypeOf(e.QModelFormat.INA_CLONE)&&n.getDimensionType()===e.DimensionType.ACCOUNT){continue}else if(n.getQueryModel().getModelCapabilities().supportsCustomMeasuresInMetadata()){g=e.QInAMdDimMembers.decideMeasureTypeAndAdd(n,a,u,p)}else{g=n.addNewBasicMeasure(u,p)}g.setCreatedFromMetadata(true);if(a.getBooleanByKeyExt("BasicMeasureNotFromMetadata",false)){g.setNotFromMetadata()}g.setIsSelectionCandidate(a.getBooleanByKeyExt("IsSelectionCandidate",true));let m=a.getListByKey("DefaultSelectedDimensions");if(e.notNull(m)){let e=m.size();for(let t=0;t<e;t++){g.addDefaultSelectionDimensionByName(m.getStringAt(t))}}let c=e.QInAConverter.lookupResultCalculation(a.getStringByKeyExt("ResultCalculation",null));g.setResultCalculation(c);e.QInAMember.importAggregationType(g,a,false);if(a.getByKey("isModelDefinedMember")!==null){g.setModelDefinedMember(a.getBooleanByKey("isModelDefinedMember"))}let y=e.PrUtils.getIntegerProperty(a,"NumericPrecision");if(e.notNull(y)){g.setNumericPrecision(y.getInteger())}let d=e.PrUtils.getIntegerProperty(a,"NumericScale");if(e.notNull(d)){g.setNumericScale(d.getInteger())}let A=e.PrUtils.getIntegerProperty(a,"NumericShift");if(e.notNull(A)){g.setNumericShift(A.getInteger())}if(a.containsKey("CurrencyTranslationName")){g.setCurrencyTranslationName(a.getStringByKey("CurrencyTranslationName"))}if(a.containsKey("UnitTranslationName")){g.setUnitTranslationName(a.getStringByKey("UnitTranslationName"))}let I=e.QInAConverter.lookupSingleValueCalculation(a.getStringByKeyExt("SingleValueCalculation",null));g.setSingleValueCalculation(I);if(a.containsKey("IsCumulation")){g.setIsCumulation(a.getBooleanByKey("IsCumulation"))}let S=r.size();for(let t=0;t<S;t++){let n=r.get(t);if(n.isCubeBlendingPropertiesField()){continue}let i=n.getName();if(!a.containsKey(i)){continue}let o=n.getValueType();let l;if(a.hasStringByKey(i)){l=e.XValueUtil.getValueFromString(a.getStringByKey(i),o)}else{let t=a.getByKey(i);l=e.isNull(t)?null:e.XValueUtil.convertValue(t.copyAsPrimitiveXValue(),o)}g.createAndAddFieldWithValue(n,l)}if(a.hasStringByKey("SemanticObject")){g.setSemanticObject(a.getStringByKey("SemanticObject"))}}}};e.QInAMdDimMembers.prototype.exportComponentWithStructure=function(t,n,i,r){e.QInAMdDimMembers.exportMd(t,i,n);return i};e.QInAMdDimMembers.prototype.getComponentType=function(){return null};e.QInAMdDimMembers.prototype.importComponentWithStructure=function(t,n,i,r,o){e.QInAMdDimMembers.importMd(t,i,n);return i};e.QInAMdDimProperties=function(){};e.QInAMdDimProperties.prototype=new e.QInAComponentMetadata;e.QInAMdDimProperties.prototype._ff_c="QInAMdDimProperties";e.QInAMdDimProperties.importHierarchyProperties=function(t,n,i){let r=e.PrUtils.getBooleanProperty(i,n);if(e.notNull(r)){t.addNameValuePair(e.XNameValuePair.create(n,e.XBoolean.convertToString(r.getBoolean())))}};e.QInAMdDimProperties.importMdNameValuePairs=function(t,n){let i=e.PrUtils.getStructureProperty(t,"HierarchyProperties");if(e.notNull(i)){e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyMaintenance",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyCreation",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyCreationByReference",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyUpdate",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyCopy",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyDeletion",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchySaving",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyActivation",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyExternalDimension",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyIntervals",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyReverseSign",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyStructureTimeDep",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyTimeDep",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyVersionDep",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyLocalMaintenance",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyLocalCreation",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyLocalCreationByReference",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyLocalUpdate",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyLocalCopy",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyLocalDeletion",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyLocalSaving",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyLocalActivation",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyLocalExternalDimension",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyLocalIntervals",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyLocalReverseSign",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyLocalStructureTimeDep",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyLocalTimeDep",i);e.QInAMdDimProperties.importHierarchyProperties(n,"HierarchyLocalVersionDep",i)}let r=e.PrUtils.getStructureProperty(t,"MasterDataProperties");if(e.notNull(r)){let t=e.PrUtils.getBooleanProperty(r,"MasterDataMaintenance");if(e.notNull(t)){n.addNameValuePair(e.XNameValuePair.create("MasterDataMaintenance",e.XBoolean.convertToString(t.getBoolean())))}}};e.QInAMdDimProperties.prototype.exportComponentWithStructure=function(e,t,n,i){return n};e.QInAMdDimProperties.prototype.getComponentType=function(){return null};e.QInAMdDimProperties.prototype.importComponentWithStructure=function(t,n,i,r,o){e.QInAMdDimProperties.importMdNameValuePairs(n,i);return i};e.QInAMdDimension=function(){};e.QInAMdDimension.prototype=new e.QInAComponentMetadata;e.QInAMdDimension.prototype._ff_c="QInAMdDimension";e.QInAMdDimension.addSupportedReadModes=function(t,n,i){let r=t.size();for(let o=0;o<r;o++){let r=e.QInAConverter.lookupReadMode(t.getStringAt(o));if(e.notNull(r)){n.addSupportedReadMode(i,r)}}};e.QInAMdDimension.exportAxesConstraints=function(t,n){let i=n.getSupportedAxesTypes().getIterator();let r=t.putNewList("AxisConstraints");while(i.hasNext()){r.addString(i.next().getName())}e.XObjectExt.release(i)};e.QInAMdDimension.exportDimensionFlags=function(t,n,i){n.putString("Description",i.getText());n.putString("NameExternal",i.getExternalName());if(i.getId()!==0){n.putInteger("ID",i.getId())}n.putBoolean("LowercaseSupported",i.supportsLowerCase());n.putBoolean("IsOwnerDimension",i.isOwnerDimension());n.putBoolean("Private",i.isPrivate());n.putBoolean("SupportsCummulative",i.supportsCumulative());let r=i.getFilterCapabilities();n.putBoolean("MultipleValues",r.supportsMultipleValues());n.putBoolean("CanBeAggregated",i.canBeAggregated());n.putBoolean("IsHierarchyMandatory",i.isHierarchyMandatory());if(t.isAbap(i)&&!i.getDimensionType().isTypeOf(e.DimensionType.ABSTRACT_STRUCTURE)){let r=i.getHasCheckTable();if(t.getSession().hasFeature(e.FeatureToggleOlap.HAS_CHECK_TABLE_DEFAULT_FALSE)&&r){n.putBoolean("HasCheckTable",true)}else if(!r){n.putBoolean("HasCheckTable",false)}}};e.QInAMdDimension.exportDimensionGroup=function(e,t){if(t.isGroupingDimension()){e.putBoolean("IsDimensionGroup",true)}let n=t.getGroupingDimensionNames();if(n.hasElements()){let t=e.putNewList("DimensionGroups");let i=n.size();for(let e=0;e<i;e++){t.addString(n.get(e))}}};e.QInAMdDimension.exportDimensionReadModes=function(t,n,i){if(t.isAbap(i)){e.QInAMdDimension.exportMdSupportedReadModes(i,e.QContextType.RESULT_SET,n,"SupportedResultSetReadModes","ResultSetDefaultReadMode");e.QInAMdDimension.exportMdSupportedReadModes(i,e.QContextType.VARIABLE,n,"SupportedVariableReadModes","DefaultVariableReadMode")}else{e.QInAMdDimension.exportMdSupportedReadModes(i,e.QContextType.RESULT_SET,n,"SupportedResultSetMemberReadModes","ResultSetDefaultReadMode")}e.QInAMdDimension.exportMdSupportedReadModes(i,e.QContextType.SELECTOR,n,"SupportedSelectorReadModes","SelectorDefaultReadMode")};e.QInAMdDimension.exportDisplayGroups=function(t,n){let i=n.getDesignDisplayGroupName();if(e.XStringUtils.isNotNullAndNotEmpty(i)){t.putString("DisplayGroupName",i);t.putStringNotNullAndNotEmpty("DisplayGroupDescription",n.getDesignDisplayGroupText())}};e.QInAMdDimension.exportMdSupportedReadModes=function(t,n,i,r,o){if(!t.hasReadModeDefault(n)){return}let l=e.XCollectionUtils.createListOfNames(t.getSupportedReadModes(n));l.sortByDirection(e.XSortDirection.ASCENDING);let a=i.putNewList(r);a.addAllStrings(l);let s=t.getReadModeDefault(n);if(e.notNull(s)){i.putString(o,e.QInAConverter.lookupReadModeInA(s))}};e.QInAMdDimension.exportMdSupportedSortTypes=function(t,n,i){let r=i.getMetadata().getSupportedSortTypes();if(e.notNull(r)&&t.m_capabilities.supportsExtendedSort()){let t=n.putNewList("ExtendedSortTypes");let i=r.getKeysAsReadOnlyList();let o=i.size();for(let n=0;n<o;n++){let o=r.getByKey(i.get(n));t.addString(e.QInAConverter.lookupSortTypeInA(o))}}};e.QInAMdDimension.getDefaultAxis=function(t,n,i){let r=t.getStringByKey("AxisDefault");if(e.XStringUtils.isNullOrEmpty(r)){r=t.getStringByKey("Axis")}let o=e.isNull(r)?e.AxisType.FREE:e.QInAConverter.lookupAxisType(r);if(i!==e.DimensionType.DIMENSION_INCOMPLETE&&!n.supportsAxis(o)){let t=n.getSupportedAxesTypes();let i=t.getIterator();if(i.hasNext()){o=i.next()}e.XObjectExt.release(i)}return o};e.QInAMdDimension.importAxesConstraints=function(t,n,i){let r=i.getListByKey("AxisConstraints");let o=t.getSession().hasFeature(e.FeatureToggleOlap.ALLOW_FREE_DIMENSIONS_ON_REPOSITORY_AXIS);if(e.PrUtils.isListEmpty(r)){n.addSupportedAxis(e.AxisType.FREE);n.addSupportedAxis(e.AxisType.ROWS);n.addSupportedAxis(e.AxisType.COLUMNS);if(o){n.addSupportedAxis(e.AxisType.REPOSITORY)}}else{let t=r.size();for(let i=0;i<t;i++){n.addSupportedAxis(e.QInAConverter.lookupAxisType(r.getStringAt(i)))}if(o&&n.supportsAxis(e.AxisType.FREE)&&!n.supportsAxis(e.AxisType.REPOSITORY)){n.addSupportedAxis(e.AxisType.REPOSITORY)}}};e.QInAMdDimension.importDimensionFlags=function(t,n,i,r){i.setId(r.getIntegerByKeyExt("ID",0));i.setExternalName(r.getStringByKey("NameExternal"));i.setSupportsLowerCase(e.PrUtils.getBooleanValueProperty(r,"LowercaseSupported",false));i.setIsOwnerDimension(r.getBooleanByKeyExt("IsOwnerDimension",false));i.setIsPrivate(r.getBooleanByKeyExt("Private",false));i.setSupportsCumulative(r.getBooleanByKeyExt("SupportsCummulative",false));let o=e.PrUtils.getBooleanValueProperty(r,"MultipleValues",true);let l=i.getFilterCapabilitiesBase();l.setSupportsMultipleValues(o);i.setCanBeAggregated(r.getBooleanByKeyExt("CanBeAggregated",true));i.setIsHierarchyMandatory(r.getBooleanByKeyExt("IsHierarchyMandatory",false));if(!i.getDimensionType().isTypeOf(e.DimensionType.ABSTRACT_STRUCTURE)){if(t.getSession().hasFeature(e.FeatureToggleOlap.HAS_CHECK_TABLE_DEFAULT_FALSE)){i.setHasCheckTable(!t.isAbap(n)||r.getBooleanByKeyExt("HasCheckTable",false))}else{i.setHasCheckTable(r.getBooleanByKeyExt("HasCheckTable",true))}}};e.QInAMdDimension.importDimensionGroupNames=function(t){let n=e.PrUtils.getListProperty(t,"DimensionGroups");let i=e.PrUtils.getListSize(n,0);if(i===0){return null}let r=e.XStringBuffer.create();for(let t=0;t<i;t++){let i=e.PrUtils.getStringElement(n,t);if(e.notNull(i)){r.append(i.getString())}}return r.toString()};e.QInAMdDimension.importDimensionGroups=function(t,n){let i=t.getBooleanByKeyExt("IsDimensionGroup",false);n.setIsGroupingDimension(i);let r=e.PrUtils.getListProperty(t,"DimensionGroups");let o=e.PrUtils.getListSize(r,0);for(let t=0;t<o;t++){let i=e.PrUtils.getStringElement(r,t);if(e.notNull(i)){n.addGroupingDimension(i.getString())}}};e.QInAMdDimension.importDimensionReadModes=function(t,n,i){let r=n.getReadModeManagerBase();if(e.notNull(t)){e.QInAMdDimension.importMdReadModeSettings(i,r,e.QContextType.RESULT_SET,"SupportedResultSetReadModes","SupportedResultSetMemberReadModes","ResultSetDefaultReadMode","DefaultResultSetReadMode","ResultSetMemberDefaultReadMode")}e.QInAMdDimension.importMdReadModeSettings(i,r,e.QContextType.VARIABLE,"SupportedVariableReadModes",null,"DefaultVariableReadMode",null,null);if(e.notNull(t)&&t.isSelectorReadModeMasterOnly()){r.addSupportedReadMode(e.QContextType.SELECTOR,e.QMemberReadMode.MASTER);r.setReadModeDefault(e.QContextType.SELECTOR,e.QMemberReadMode.MASTER,true);r.setReadMode(e.QContextType.SELECTOR,e.QMemberReadMode.MASTER)}else{e.QInAMdDimension.importMdReadModeSettings(i,r,e.QContextType.SELECTOR,"SupportedSelectorReadModes",null,"SelectorDefaultReadMode","DefaultSelectorReadMode",null)}};e.QInAMdDimension.importInitialDisplayGroups=function(t,n,i){if(!t.hasFeature(e.FeatureToggleOlap.DIMENSION_DISPLAY_GROUPS)){return}let r=n.getStringByKey("DisplayGroupName");if(e.XStringUtils.isNotNullAndNotEmpty(r)){i.setDesignTimeDisplayGroupName(r);let t=n.getStringByKey("DisplayGroupDescription");if(e.XStringUtils.isNotNullAndNotEmpty(t)){i.setDesignTimeDisplayGroupText(t)}}};e.QInAMdDimension.importKeyAttributesNames=function(t,n,i){let r=i.getListByKey("CompoundKeyAttributes");let o=true;if(e.isNull(r)){r=i.getListByKey("KeyAttributes");o=false}if(e.notNull(r)&&(o||e.notNull(n)&&n.supportsDimensionKeyAttributes())){let n=e.XList.create();let i=r.size();for(let t=0;t<i;t++){let i=r.getStringAt(t);if(e.XStringUtils.isNotNullAndNotEmpty(i)){n.add(i)}}t.setKeyAttributesNames(n)}};e.QInAMdDimension.importMdReadModeSettings=function(t,n,i,r,o,l,a,s){let u=t.getListByKey(r);if(e.isNull(u)&&e.notNull(o)){u=t.getListByKey(o)}if(e.PrUtils.isListEmpty(u)){n.addSupportedReadMode(i,e.QMemberReadMode.BOOKED);n.addSupportedReadMode(i,e.QMemberReadMode.MASTER);n.setReadModeDefault(i,e.QMemberReadMode.BOOKED,false)}else{e.QInAMdDimension.addSupportedReadModes(u,n,i);e.QInAMdDimension.setDefaultReadmode(t,n,i,l,a,s)}};e.QInAMdDimension.setDefaultReadmode=function(t,n,i,r,o,l){let a=t.getStringByKey(r);if(e.isNull(a)&&e.notNull(o)){a=t.getStringByKey(o)}if(e.isNull(a)&&e.notNull(l)){a=t.getStringByKey(l)}if(e.notNull(a)){let t=e.QInAConverter.lookupReadMode(a);if(e.notNull(t)){n.setReadModeDefault(i,t,true)}}};e.QInAMdDimension.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=o.getName();i.putString("Name",l);let a=o.getVisibility();if(e.notNull(a)){let t=e.QInAConverter.lookupDimensionVisibilityIna(a);i.putInteger("Visibility",t)}let s=o.getDefaultMemberValue();if(e.XStringUtils.isNotNullAndNotEmpty(s)){i.putString("DefaultMember",s)}let u=e.QInAConverter.lookupDimensionTypeInA(o.getDimensionType());i.putInteger("DimensionType",u);i.putStringNotNull("ViewAttributes",o.getAttributeViewName());let p=o.getDefaultAxisType();let g=e.QInAConverter.lookupAxisTypeInA(p);i.putString("AxisDefault",g);e.QInAMdDimension.exportDimensionFlags(t,i,o);e.QInAMdDimMembers.exportMd(t,i,o);if(o.getDimensionType()===e.DimensionType.FORMULA_CALCULATED_DIMENSION){e.QInARepoFormulaCalculatedDimension.exportFormulaDimensionParts(t,i,o)}else{if(!o.getDimensionType().isTypeOf(e.DimensionType.CALCULATED_DIMENSION)){e.QInAMdFieldsRoles.exportMd(i,o)}e.QInAMdFieldsList.exportMd(t,i,o);e.QInAMdFieldsResultSet.exportMd(i,o);e.QInAMdFieldsAttributes.exportMd(i,o)}e.QInAMdDimension.exportDimensionGroup(i,o);e.QInAMdDimension.exportDisplayGroups(i,o);e.QInAMdHierarchy.exportMdHierarchy(t,i,o);e.QInAMdDimension.exportAxesConstraints(i,o);e.QInAMdDimension.exportDimensionReadModes(t,i,o);e.QInAMdDimension.exportMdSupportedSortTypes(t,i,o);i.putBoolean("EnforceDynamicValue",o.isEnforcedDynamicValue());i.putStringNotNull("DataType",e.QInAConverter.lookupValueTypeInA(o.getValueType()));i.putStringNotNullAndNotEmpty("SemanticObject",o.getMetadata().getSemanticObject());if(o.getMetadata().hasFunctionalVariables()){i.putBoolean("HasFunctionalVariables",true)}if(o.isRRIAffectedComponent()){i.putBoolean("IsRRI",true)}i.putStringNotNullAndNotEmpty("SemanticType",o.getMetadata().getSemanticType());return i};e.QInAMdDimension.prototype.getComponentType=function(){return e.OlapComponentType.ABSTRACT_DIMENSION};e.QInAMdDimension.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;let a=l.getModelCapabilities();let s=n.getStringByKey("Name");let u=n.getIntegerByKeyExt("DimensionType",3);let p=e.QInAConverter.lookupDimensionType(u);if(p===e.DimensionType.CALCULATED_DIMENSION){l=e.QCalculatedDimension._createCalculatedDimension(o,r,s)}else if(p===e.DimensionType.FORMULA_CALCULATED_DIMENSION){l=e.QFormulaCalculatedDimension._createFormulaCalculatedDimension(o,s);e.QInARepoFormulaCalculatedDimension.importFormulaCalculatedDimension(t,n,l,r,o)}l.setName(s);l.setText(n.getStringByKey("Description"));let g=l.getQueryModel();let m=e.notNull(g);let c="";let y;if(l.getDataSource().getType()!==e.MetaObjectType.CDS_PROJECTION_VIEW){c=e.QInAMdDimension.importDimensionGroupNames(n)}if(e.notNull(t.m_cacheKey)){y=e.QCacheKey.createCopyExt(t.m_cacheKey,s,null,c)}else{y=e.QCacheKey.createByContextForDimension(o,s,c)}let d=u<-1;let A=t.getApplication().getOlapEnvironment();let I=A.getDimensionMetadataByKey(y);let S=e.isNull(I)||p===e.DimensionType.DIMENSION_INCOMPLETE;if(S){if(d){I=l.getMetadataBase()}else{I=e.QDimensionMetadata.create(y)}I.setDimensionType(p);e.QInAMdDimension.importKeyAttributesNames(I,a,n);let i=n.getIntegerByKeyExt("Visibility",-1);if(i!==-1){I.setVisibility(e.QInAConverter.lookupDimensionVisibility(i))}let r=n.getStringByKey("DefaultMember");if(e.notNull(r)){I.setDefaultMemberValue(r)}if(l.getDataSource().getType()!==e.MetaObjectType.CDS_PROJECTION_VIEW){e.QInAMdDimension.importDimensionGroups(n,I);e.QInAMdDimension.importInitialDisplayGroups(o.getSession(),n,I)}I.setAttributeViewName(n.getStringByKeyExt("ViewAttributes",null));if(t.m_capabilities.supportsCustomDimensionMemberExecutionStep()&&(I.isStructure()||I.getDimensionType()===e.DimensionType.ACCOUNT)){I.setSupportsCalculatedBeforeAggregation(true)}I.setEnforceDynamicValue(n.getBooleanByKeyExt("EnforceDynamicValue",false));let s=e.QInAConverter.lookupValueType(n.getStringByKey("DataType"));if(s!==e.XValueType.UNSUPPORTED){I.setValueType(s)}e.QInAMdDimension.importDimensionFlags(t,l,I,n);if(!d){A.setDimensionMetadata(I)}let u=n.getListByKey("ExtendedSortTypes");if(t.m_capabilities.supportsExtendedSort()&&e.notNull(u)){let t=e.XSetOfNameObject.create();let n=u.size();for(let i=0;i<n;i++){let n=e.QInAConverter.lookupSortType(u.getStringAt(i));if(e.notNull(n)){t.add(n)}}I.setSupportedSortTypes(t)}if(n.hasStringByKey("SemanticObject")){I.setSemanticObject(n.getStringByKey("SemanticObject"))}I.setHasFunctionalVariables(n.getBooleanByKeyExt("HasFunctionalVariables",false));if(t.m_capabilities.supportsSupportsDimensionSemanticType()){I.setSemanticType(n.getStringByKey("SemanticType"))}}if(m){if(S){e.QInAMdDimension.importAxesConstraints(t,I,n)}let i=e.QInAMdDimension.getDefaultAxis(n,I,p);if(S||!d){l.setDefaultAxisType(i)}}if(!d){l.setMetadata(I)}l.setDimensionType(p);if(!t.m_capabilities.supportsExtendedSort()&&m&&!t.isVirtualInA(g)){if(!l.isMeasureStructure()){let t=g.getSortingManagerBase();t.addSupportedSortType(e.SortType.FIELD);t.addSupportedSortType(e.SortType.MEMBER_KEY);t.addSupportedSortType(e.SortType.MEMBER_TEXT)}}e.QInAMdFieldsList.importMd(t,n,l);e.QInAMdFieldsAttributes.importMd(l,n);if(!e.XCollectionUtils.hasElements(l.getFields())&&n.hasStringByKey("KeyAttribute")){let t=e.QField._createField(o,l,e.PresentationType.KEY);let i=n.getStringByKey("KeyAttribute");t.setName(i);let r=e.QFieldMetadata.create(e.QCacheKey.createByContextForField(o,i,s));r.setUsageType(e.FieldUsageType.FLAT);r.setPresentationType(e.PresentationType.KEY);r.setValueType(e.XValueType.STRING);t.setMetadata(r);l.getFieldContainerBase().addFieldInternal(t)}e.QInAMdFieldsRoles.importMd(t,n,l);e.QInAMdFilterCapability.updateFilterCapabilities(l);e.QInAMdFieldsResultSet.importMd(t,n,l);e.QInAMdDimMembers.importMd(t,l,n);e.QInAMdDimension.importDimensionReadModes(g,l,n);e.QInAMdHierarchy.importMdHierarchy(t,n,l);e.QInAMdDimProperties.importMdNameValuePairs(n,l);l.setRRIAffectedComponent(n.getBooleanByKeyExt("IsRRI",false));return l};e.QInAMdDimension.prototype.newModelComponent=function(t,n,i,r){let o=i;if(e.isNull(o)){o=r.getQueryModel()}return e.QDimension._create(r,o)};e.QInAMdDocumentsInfo=function(){};e.QInAMdDocumentsInfo.prototype=new e.QInAComponentMetadata;e.QInAMdDocumentsInfo.prototype._ff_c="QInAMdDocumentsInfo";e.QInAMdDocumentsInfo.importMd=function(t,n,i,r){if(e.notNull(n)&&n.containsKey("DocumentsInfo")){let t=n.getStructureByKey("DocumentsInfo");let r=i.getDocumentsInfo();let o=e.QInAConverter.lookupDocumentsSupportType(t.getStringByKey("SupportsDocuments"));let l=t.getStringByKey("DocumentsServicePath");let a=t.getStringByKey("DefaultDocumentsDirectory");let s=t.getStringByKey("ActiveDocumentsDirectory");let u=t.getListByKey("DocumentsDirectories");let p=null;if(e.notNull(u)){p=e.PrUtils.asListOfString(u)}let g=r.getSupportsDocuments()===e.DocumentsSupportType.NONE&&o!==e.DocumentsSupportType.NONE;r.setSupportsDocuments(o);r.setDocumentsServicePath(l);r.setDefaultDocumentsDirectory(a);r.setActiveDocumentsDirectory(s);r.setDocumentsDirectories(p);r.setIsBasedOnCDSView(t.getBooleanByKey("IsBasedOnCDSView"));let m=i.getDocumentsIdsRequest();let c=e.isNull(m)?null:m.getDocumentsIdsScope();if(g&&e.notNull(c)&&c===e.DocumentsIdsScope.NONE){if(r.isBasedOnCDSView()){m.setDocumentsIdsScope(e.DocumentsIdsScope.SYSTEM_UNIQUE)}else{m.setDocumentsIdsScope(e.DocumentsIdsScope.RESULT_SET_BOUND)}}}};e.QInAMdDocumentsInfo.prototype.exportComponentWithStructure=function(e,t,n,i){return null};e.QInAMdDocumentsInfo.prototype.getComponentType=function(){return null};e.QInAMdDocumentsInfo.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;e.QInAMdDocumentsInfo.importMd(t,n,l,o);return i};e.QInAMdDrillManager=function(){};e.QInAMdDrillManager.prototype=new e.QInAComponentMetadata;e.QInAMdDrillManager.prototype._ff_c="QInAMdDrillManager";e.QInAMdDrillManager.prototype.exportComponentWithStructure=function(e,t,n,i){let r=t;n.putBoolean("SupportsHierNavCounter",r.supportsDrillCounter());return n};e.QInAMdDrillManager.prototype.getComponentType=function(){return e.OlapComponentType.DRILL_MANAGER};e.QInAMdDrillManager.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=t.m_capabilities.supportsHierarchyNavCounter();if(e.notNull(n)){l=n.getBooleanByKeyExt("SupportsHierNavCounter",l)}let a=i;a.setSupportsDrillCounter(l);return a};e.QInAMdDrillManager.prototype.newModelComponent=function(t,n,i,r){return e.QFactory.createDrillManager(r)};e.QInAMdExceptionAggregationManager=function(){};e.QInAMdExceptionAggregationManager.prototype=new e.QInAComponentMetadata;e.QInAMdExceptionAggregationManager.prototype._ff_c="QInAMdExceptionAggregationManager";e.QInAMdExceptionAggregationManager.prototype._exportDimensionSet=function(t,n){let i=n.size();let r=e.PrFactory.createStructure();r.putString("Name",t);let o=r.putNewList("Dimensions");for(let t=0;t<i;t++){o.add(e.PrFactory.createString(n.get(t)))}return r};e.QInAMdExceptionAggregationManager.prototype._exportExceptionAggregationGroup=function(t){let n=e.PrFactory.createStructure();n.putString("Name",t.getName());n.putString("SupportedDimensions",t._getSupportedDimensionSetName());n.putInteger("MaxNumberOfDimensions",t._getNumberOfAllowedDimensions());let i=e.PrFactory.createStructure();i.putInteger("MembersCode",t._getMembersCode());let r=i.putNewList("AggregationTypes");let o=t._getSupportedAggregationTypeNames();let l=o.size();for(let t=0;t<l;t++){r.add(e.PrFactory.createString(o.get(t)))}let a=n.putNewList("AggregationMap");a.add(i);return n};e.QInAMdExceptionAggregationManager.prototype._importDimensionSet=function(t,n){t._addDimensionSet(n.getStringByKey("Name"),e.PrUtils.asListOfString(n.getListByKey("Dimensions")))};e.QInAMdExceptionAggregationManager.prototype._importExceptionAggregationGroup=function(t,n){let i=n.getStringByKey("Name");let r=n.getStringByKeyExt("SupportedDimensions","");let o=n.getIntegerByKeyExt("MaxNumberOfDimensions",-1);let l=n.getListByKey("AggregationMap");let a=l.size();for(let n=0;n<a;n++){let a=l.getStructureAt(n);let s=a.getIntegerByKeyExt("MembersCode",t._getDefaultMembersCode());t._addExceptionAggregationGroup(e.QExceptionAggregationGroup._create(t,i,s,o,r,e.PrUtils.asListOfString(a.getListByKey("AggregationTypes"))))}};e.QInAMdExceptionAggregationManager.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;if(e.notNull(o)){let e=i.putNewStructure("ExceptionAggregations");let t=e.putNewList("DimensionSets");let n=o._getDimensionSets();let r=n.getKeysAsReadOnlyList();let l=r.size();for(let e=0;e<l;e++){let i=r.get(e);t.add(this._exportDimensionSet(i,n.getByKey(i)))}let a=e.putNewList("AggregationGroups");let s=o._getExceptionAggregationGroups().getKeysAsReadOnlyList();let u=s.size();let p=o._getExceptionAggregationGroups();for(let e=0;e<u;e++){a.add(this._exportExceptionAggregationGroup(p.get(e)))}}return i};e.QInAMdExceptionAggregationManager.prototype.getComponentType=function(){return e.OlapComponentType.EXCEPTION_AGGREGATION_MANAGER};e.QInAMdExceptionAggregationManager.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;if(e.notNull(n)&&e.notNull(l)){l._clear();let t=n.getStructureByKey("ExceptionAggregations");if(e.notNull(t)){let n=t.getListByKey("DimensionSets");if(!e.PrUtils.isListEmpty(n)){let e=n.size();for(let t=0;t<e;t++){this._importDimensionSet(l,n.get(t).asStructure())}}let i=t.getListByKey("AggregationGroups");if(!e.PrUtils.isListEmpty(i)){let e=i.size();for(let t=0;t<e;t++){this._importExceptionAggregationGroup(l,i.get(t).asStructure())}}}else{l._setupDefaultConfigurations()}}return l};e.QInAMdField=function(){};e.QInAMdField.prototype=new e.QInAComponentMetadata;e.QInAMdField.prototype._ff_c="QInAMdField";e.QInAMdField.postProcessMetadata=function(t,n,i,r){if(t.m_capabilities.supportsFilterCapabilityExtended()){if(e.notNull(i)){n.setIsFilterable(i.supportsSetSign(e.SetSign.INCLUDING)||i.supportsSetSign(e.SetSign.EXCLUDING));if(i.isFilterCapabilityGroup()){let t=i;let n=t.getGroupByContext(e.QContextType.RESULT_SET);if(e.notNull(n)&&(e.XString.containsString(n.getName(),e.QSetSignComparisonOperatorGroup.SINGLE_VALUE.getName())||e.XString.containsString(n.getName(),e.QSetSignComparisonOperatorGroup.INTERVAL.getName()))){t.setGroupByContext(e.QInAConverter.switchComparisonGroupToIncludeOnly(n),e.QContextType.RESULT_SET)}n=t.getGroupByContext(e.QContextType.SELECTOR);if(e.notNull(n)&&(e.XString.containsString(n.getName(),e.QSetSignComparisonOperatorGroup.SINGLE_VALUE.getName())||e.XString.containsString(n.getName(),e.QSetSignComparisonOperatorGroup.INTERVAL.getName()))){t.setGroupByContext(e.QInAConverter.switchComparisonGroupToIncludeOnly(n),e.QContextType.SELECTOR)}}}else if(e.isNull(r)||!r.getQueryManager().getInitSettings().isLightweight()){n.setIsFilterable(false)}}};e.QInAMdField.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;i.putString("Name",o.getName());i.putString("AliasName",o.getAliasName());i.putString("Description",o.getText());i.putString("DataType",e.QInAConverter.lookupValueTypeInA(o.getValueType()));i.putString("PresentationType",e.QInAConverter.lookupPresentationTypeInA(o.getPresentationType()));let l=o.getObtainability();i.putString("Obtainability",e.isNull(l)?null:l.getName());if(o.getMetadata().hasFlagIsFilterableInMetadata()){i.putBoolean("IsFilterable",o.isFilterable())}i.putBoolean("IsVirtualDescription",o.isVirtualDescription());i.putBoolean("LowerCaseEnabled",o.isLowerCaseEnabled());i.putString("InitialValue",o.getInitialValue());i.putInteger("Length",o.getLength());i.putInteger("Decimals",o.getDecimals());i.putBoolean("IsDisplayAttribute",o.isDisplayAttributeField());i.putString("MappedColumn",o.getMappedColumnName());i.putString("AttributeType",o.getAttributeType());i.putString("NavigationalAttributeDescription",o.getNavigationalAttributeDescription());i.putStringNotNull("SQLType",o.getSqlType());i.putStringNotNull("SemanticType",o.getSemanticType());i.putString("UsageType",o.getUsageType().getName());if(o.isExcludedFromValueHelp()){i.putBoolean("ExcludeFromValueHelp",true)}i.putStringNotNull("LowerBound",o.getLowerBound());i.putStringNotNull("UpperBound",o.getUpperBound());if(o.getPrecision()!==0){i.putInteger("FractDigits",o.getPrecision())}let a=o.getInfoObjectType();if(e.notNull(a)){i.putString("InfoobjType",e.QInAConverter.lookupInfoObjectTypeInA(a))}let s=o.getVisibilityType();if(e.notNull(s)){i.putString("VisibilityType",e.QInAConverter.lookupVisibilityTypeInA(s))}let u=o.getTextTransformation();if(e.notNull(u)){i.putString("TextTransformation",e.QInAConverter.lookupTextTransformationInA(u))}if(!t.m_mode.isDataBlending()){i.putStringNotNull("DisplayFormat",o.getDisplayFormat())}i.putStringNotNull("MIMEType",o.getMimeType());if(o.getDimension().getDimensionType()===e.DimensionType.FORMULA_CALCULATED_DIMENSION){let n=o;if(n.getFormulaItem()!==null){e.QInAFormulaMeasure.exportFormulaItem(t,n.getFormulaItem(),i.putNewStructure("Formula"),n.getQueryModel())}}let p=i.putNewList("DependentAttributes");p.addAllStrings(o.getDependencyFields());let g=o.getDimension().getFilterCapabilities();let m=g.getFilterCapabilitiesByField(o);e.QInAMdFilterCapability.exportMd(t,m,i,o.getQueryModel());return i};e.QInAMdField.prototype.getComponentType=function(){return e.OlapComponentType.FIELD};e.QInAMdField.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;let a=r;let s=n.getStringByKey("Name");let u=a.getDimensionType().isTypeOf(e.DimensionType.CALCULATED_DIMENSION);if(u){let i;if(a.getDimensionType()===e.DimensionType.FORMULA_CALCULATED_DIMENSION){i=e.QFieldFormulaCalc._createFormulaCalcField(o,a,null,s);let r=n.getStructureByKey("Formula");if(e.notNull(r)){let r=e.QInAFormulaMeasure.importFormulaMeasure(t,a,n.getStructureByKey("Formula"),null,o);i.setFormulaItem(r)}}else{i=e.QFieldCalcDim._createFieldCalcDim(o,a,e.PresentationType.UNDEFINED,s)}this.updatePresentationType(t,n,i.getMetadataBase());this.updateValueType(n,i.getMetadataBase());a.getFieldContainerBase().addField(i);return i}l.setName(s);l.setText(n.getStringByKey("Description"));l.setObtainability(e.ObtainabilityType.lookup(n.getStringByKey("Obtainability")));l.setDisplayFormat(n.getStringByKey("DisplayFormat"));let p=n.getStringByKey("TextTransformation");if(e.notNull(p)){l.setTextTransformation(e.QInAConverter.lookupTextTransformation(p))}let g=n.getStringByKey("DimensionName");let m;if(e.notNull(t.m_cacheKey)){m=e.QCacheKey.createCopyExt(t.m_cacheKey,s,g,null)}else{m=e.QFactory.createCacheKeyForField(o,s,g)}let c=t.getApplication().getOlapEnvironment();let y=c.getFieldMetadataByKey(m);let d=o.getQueryModel();if(e.isNull(y)){y=e.QFieldMetadata.create(m);y.setAliasName(n.getStringByKey("AliasName"));y.setMappedColumnName(n.getStringByKeyExt("MappedColumn",null));y.setSqlType(n.getStringByKeyExt("SQLType",null));y.setSemanticType(n.getStringByKeyExt("SemanticType",null));y.setIsExcludedFromValueHelp(n.getBooleanByKeyExt("ExcludeFromValueHelp",false));let i=this.updateValueType(n,y);if(i===e.XValueType.UNSUPPORTED){let t=l.getDimension().getName();if(d.getUniversalDisplayHierarchies().getByName(t)!==null){y.setValueType(e.XValueType.STRING)}}if(!this.updatePresentationType(t,n,y)){return null}y.setUpperBound(n.getStringByKey("UpperBound"));y.setLowerBound(n.getStringByKey("LowerBound"));y.setIsFilterableFlagFromMetadata(n.containsKey("IsFilterable"));y.setIsFilterable(n.getBooleanByKeyExt("IsFilterable",true));y.setIsLowerCaseEnabled(n.getBooleanByKeyExt("LowerCaseEnabled",false));y.setIsVirtualDescription(n.getBooleanByKeyExt("IsVirtualDescription",false));y.setInitialValue(n.getStringByKeyExt("InitialValue",null));y.setLength(n.getIntegerByKeyExt("Length",0));y.setDecimals(n.getIntegerByKeyExt("Decimals",0));y.setFixedLength(n.getIntegerByKeyExt("FixedLength",-1));let r=n.getIntegerByKeyExt("FractDigits",0);if(r!==0){y.setPrecision(r)}y.setIsDisplayAttributeField(n.getBooleanByKeyExt("IsDisplayAttribute",false));y.setAttributeType(n.getStringByKeyExt("AttributeType",null));y.setNavigationalAttributeDescription(n.getStringByKeyExt("NavigationalAttributeDescription",null));this.importDependencies(n,y);let s=n.getStringByKey("UsageType");if(e.notNull(s)){y.setUsageType(e.FieldUsageType.lookup(s))}let u=n.getStringByKeyExt("InfoobjType",null);if(e.notNull(u)){let t=e.QInAConverter.lookupInfoObjectType(u);y.setInfoObjectType(t)}let p=n.getStringByKeyExt("VisibilityType",null);if(e.notNull(p)){let t=e.QInAConverter.lookupVisibilityType(p);y.setVisibilityType(t)}let g=a.getMetadataBase();y.setDimensionMetadata(g);let A=g.getFilterCapabilitiesBase();let I=e.QInAMdFilterCapability.importMd(t,n,l,A,o);if(e.notNull(I)){A.addFilterCapability(I)}e.QInAMdField.postProcessMetadata(t,y,I,o);y.setMimeType(n.getStringByKey("MIMEType"));c.setFieldMetadata(y)}if(e.notNull(d)&&d.getSystemType().isTypeOf(e.SystemType.ABAP)){if(!this.updatePresentationType(t,n,y)){return null}}l.setMetadata(y);return l};e.QInAMdField.prototype.importDependencies=function(t,n){if(e.notNull(t)){let i=t.getListByKey("DependentAttributes");if(e.notNull(i)){let t=i.size();for(let r=0;r<t;r++){let t=i.getStringAt(r);if(e.notNull(t)){n.addDependencyField(t)}}}}};e.QInAMdField.prototype.newModelComponent=function(t,n,i,r){return e.QField._createField(r,i,null)};e.QInAMdField.prototype.updatePresentationType=function(t,n,i){let r=n.getStringByKey("PresentationType");let o=e.QInAConverter.lookupPresentationType(r);if(o===e.PresentationType.WHY_FOUND&&e.QInAConverter.lookupValueType(n.getStringByKey("DataType"))!==e.XValueType.PROPERTIES){t.addError(e.ErrorCodes.INVALID_STATE,"Why found has not properties type");return false}else{i.setPresentationType(o);return true}};e.QInAMdField.prototype.updateValueType=function(t,n){let i=t.getStringByKey("DataType");let r=e.QInAConverter.lookupValueType(i);n.setValueType(r);return r};e.QInAMdFieldsAttributes=function(){};e.QInAMdFieldsAttributes.prototype=new e.QInAComponentMetadata;e.QInAMdFieldsAttributes.prototype._ff_c="QInAMdFieldsAttributes";e.QInAMdFieldsAttributes.exportFieldNames=function(t){let n=e.PrFactory.createList();let i=t.size();for(let e=0;e<i;e++){n.addString(t.get(e).getName())}return n};e.QInAMdFieldsAttributes.exportMd=function(t,n){let i=n.getAttributeContainer();let r=i.getMainAttribute();if(e.notNull(r)){let n=t.putNewStructure("AttributeHierarchy");e.QInAMdFieldsAttributes.exportMdAttribute(r,n)}t.putString("FieldLayoutType",e.QInAConverter.lookupFieldLayoutTypeInA(n.getFieldLayoutType()))};e.QInAMdFieldsAttributes.exportMdAttribute=function(t,n){n.putString("Name",t.getName());n.putString("Description",t.getText());let i=t.getKeyField();e.QInAExportUtil.setNameIfNotNull(n,"DefaultKeyAttribute",i);let r=t.getTextField();e.QInAExportUtil.setNameIfNotNull(n,"DefaultTextAttribute",r);let o=t.getDefaultResultSetTextField();e.QInAExportUtil.setNameIfNotNull(n,"DefaultResultTextAttribute",o);n.put("AttributeNames",e.QInAMdFieldsAttributes.exportFieldNames(t.getFields()));n.put("DefaultResultSetAttributes",e.QInAMdFieldsAttributes.exportFieldNames(t.getResultSetFields()));let l=t.getChildAttributes();let a=n.putNewList("Children");if(e.notNull(l)){let t=l.size();for(let n=0;n<t;n++){e.QInAMdFieldsAttributes.exportMdAttribute(l.get(n),a.addNewStructure())}}};e.QInAMdFieldsAttributes.importAttributeFields=function(t,n,i){let r=i.getListByKey("AttributeNames");let o=i.getListByKey("DefaultResultSetAttributes");if(e.notNull(r)&&e.notNull(o)){let i=r.size();let l;let a;for(l=0;l<i;l++){a=n.getByKey(r.getStringAt(l));if(e.notNull(a)){t.addFieldInternal(a)}}i=o.size();let s=e.XHashSetOfString.create();for(l=0;l<i;l++){let n=o.getStringAt(l);if(!s.contains(n)){s.add(n);a=t.getFieldByName(n);if(e.notNull(a)){t.addDefaultResultSetField(a)}}}}};e.QInAMdFieldsAttributes.importMd=function(t,n){let i=t.getUniversalDisplayHierarchy();let r=e.isNull(i)?n.getStructureByKey("AttributeHierarchy"):n;if(e.notNull(r)){let n=e.QInAMdFieldsAttributes.importMdAttributeHierarchyNode(r,t,i);if(e.notNull(n)){t.getMetadataBase().addSupportedFieldLayoutType(e.FieldLayoutType.ATTRIBUTE_BASED);t.getAttributeContainerBase().setMainAttribute(n)}}};e.QInAMdFieldsAttributes.importMdAttributeHierarchyNode=function(t,n,i){if(e.isNull(t)){return null}let r=e.QAttribute.createAttribute(n.getContext(),n);r.setName(t.getStringByKey("Name"));r.setText(t.getStringByKey("Description"));let o=n.getFields();let l=o.getByKey(t.getStringByKey("DefaultKeyAttribute"));if(e.notNull(i)){l=i.getKeyField(n,t.getListByKey("Attributes"),"IsKey","Name")}if(e.notNull(l)){r.setFlatKeyField(l)}let a=o.getByKey(t.getStringByKey("DefaultDisplayKeyAttribute"));if(e.notNull(i)){a=i.getDisplayKeyField(n)}if(e.notNull(a)){r.setFlatDisplayKeyField(a)}let s=o.getByKey(t.getStringByKey("DefaultTextAttribute"));if(e.notNull(i)){s=i.getTextField(n)}if(e.notNull(s)){r.setFlatTextField(s)}let u=o.getByKey(t.getStringByKey("DefaultResultTextAttribute"));if(e.notNull(u)){r.setDefaultResultSetTextField(u)}let p=o.getByKey(t.getStringByKey("HierarchyKeyAttribute"));if(e.notNull(p)){r.setHierachyKeyField(p);e.QInAMdFieldsAttributes.setFieldUsage(l,p)}let g=o.getByKey(t.getStringByKey("HierarchyDisplayKeyAttribute"));if(e.notNull(g)){r.setHierarchyDisplayKeyField(g);e.QInAMdFieldsAttributes.setFieldUsage(a,g)}let m=o.getByKey(t.getStringByKey("HierarchyTextAttribute"));if(e.notNull(m)){r.setHierarchyTextField(m);e.QInAMdFieldsAttributes.setFieldUsage(s,m)}let c=o.getByKey(t.getStringByKey("HierarchyNavigationAttribute"));if(e.notNull(c)){r.setHierachyNavigationField(c);e.QInAMdFieldsAttributes.setFieldUsage(null,c)}e.QInAMdFieldsAttributes.importAttributeFields(r,o,t);n.getAttributeContainerBase().addAttributeInternal(r);let y=t.getListByKey("Children");if(e.notNull(y)){let t=y.size();for(let o=0;o<t;o++){let t=e.QInAMdFieldsAttributes.importMdAttributeHierarchyNode(y.getStructureAt(o),n,i);r.addChildAttribute(t)}}return r};e.QInAMdFieldsAttributes.setFieldUsage=function(t,n){if(n!==t){if(e.notNull(t)){t.getMetadataBase().setUsageType(e.FieldUsageType.FLAT)}if(e.notNull(n)){n.getMetadataBase().setUsageType(e.FieldUsageType.HIERARCHY)}}else{if(e.notNull(t)){t.getMetadataBase().setUsageType(e.FieldUsageType.ALL)}}};e.QInAMdFieldsAttributes.prototype.exportComponentWithStructure=function(t,n,i,r){e.QInAMdFieldsAttributes.exportMd(i,n);return i};e.QInAMdFieldsAttributes.prototype.getComponentType=function(){return null};e.QInAMdFieldsAttributes.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;e.QInAMdFieldsAttributes.importMd(l,n);return i};e.QInAMdFieldsList=function(){};e.QInAMdFieldsList.prototype=new e.QInAComponentMetadata;e.QInAMdFieldsList.prototype._ff_c="QInAMdFieldsList";e.QInAMdFieldsList.exportMd=function(t,n,i){let r=e.PrFactory.createList();let o=i.getFields();let l=o.size();for(let n=0;n<l;n++){r.add(t.exportComponent(e.OlapComponentType.FIELD,o.get(n),null,e.QImExFlag.DEFAULT_ALL))}n.put("AttributesMd",r)};e.QInAMdFieldsList.importMd=function(t,n,i){let r=n.getListByKey("AttributesMd");if(e.isNull(r)){r=n.getListByKey("Attributes")}if(e.isNull(r)){e.QInAMdFieldsList.tryImportFromAttributeHierarchy(n,i)}else{let n=r.size();let o=i.getFieldContainerBase();for(let l=0;l<n;l++){let n=r.getStructureAt(l);let a=t.importComponent(e.OlapComponentType.FIELD,n,null,i,i);if(e.notNull(a)){o.addFieldInternal(a)}}}};e.QInAMdFieldsList.tryImportFromAttributeHierarchy=function(t,n){if(!n.getQueryManager().getInitSettings().isLightweight()){return}let i=t.getStructureByKey("AttributeHierarchy");if(e.isNull(i)){return}let r=n.getFieldContainerBase();let o=i.getListByKey("AttributeNames");for(let t=0;t<o.size();t++){let i=o.getStringAt(t);let l=e.XStringTokenizer.splitString(i,".");if(!e.XCollectionUtils.hasElements(l)){continue}let a=l.get(l.size()-1);let s;switch(a){case"KEY":s=e.PresentationType.KEY;if(l.size()>=3&&e.XString.isEqual(l.get(1),"$$HierarchyField$$")){s=e.PresentationType.HIERARCHY_KEY}break;case"DISPLAY_KEY":s=e.PresentationType.DISPLAY_KEY;break;case"DISPLAY_KEY_NC":s=e.PresentationType.DISPLAY_KEY_NOT_COMPOUND;break;case"SHORT_TEXT":s=e.PresentationType.SHORT_TEXT;break;case"MEDIUM_TEXT":s=e.PresentationType.MEDIUM_TEXT;break;case"LONG_TEXT":s=e.PresentationType.LONG_TEXT;break;case"KEY_NOT_COMPOUND":s=e.PresentationType.KEY_NOT_COMPOUND;break;default:continue}let u=e.XValueType.STRING;if(s.isTypeOf(e.PresentationType.KEY)){if(n.getDimensionType()===e.DimensionType.TIME){u=e.XValueType.TIME}else if(n.getDimensionType()===e.DimensionType.DATE){u=e.XValueType.DATE}}let p=e.QFieldMetadata.create(e.QFactory.createCacheKeyForField(n,i,n.getName()));p.setValueType(u);p.setPresentationType(s);p.setIsFlatKeyField(s===e.PresentationType.KEY);p.setIsHierarchyKeyField(s===e.PresentationType.HIERARCHY_KEY);p.setIsFilterable(s.isTypeOf(e.PresentationType.ABSTRACT_KEY));p.setDimensionMetadata(n.getMetadataBase());let g=e.QFactory.createField(n,i);g.setMetadata(p);g.setDimension(n);r.addField(g)}};e.QInAMdFieldsList.prototype.exportComponentWithStructure=function(t,n,i,r){e.QInAMdFieldsList.exportMd(t,i,n);return i};e.QInAMdFieldsList.prototype.getComponentType=function(){return null};e.QInAMdFieldsList.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;e.QInAMdFieldsList.importMd(t,n,l);return i};e.QInAMdFieldsResultSet=function(){};e.QInAMdFieldsResultSet.prototype=new e.QInAComponentMetadata;e.QInAMdFieldsResultSet.prototype._ff_c="QInAMdFieldsResultSet";e.QInAMdFieldsResultSet.exportMd=function(t,n){let i=t.putNewList("DefaultResultSetAttributesMd");let r=n.getDefaultResultSetFields();let o=r.size();for(let e=0;e<o;e++){i.addString(r.get(e).getName())}if(n.supportsFieldLayoutType(e.FieldLayoutType.ATTRIBUTE_BASED)){let e=n.getAttributeContainer();let i=e.getDefaultResultSetAttributes();let r=t.putNewList("DefaultResultSetAttributeNodesMd");let o=i.size();for(let e=0;e<o;e++){r.addString(i.get(e).getName())}}t.putBoolean("ResultSetFixedAttributes",n.hasFixedResultSetFields())};e.QInAMdFieldsResultSet.importMd=function(t,n,i){let r=n.getListByKey("DefaultResultSetAttributesMd");if(e.isNull(r)){r=n.getListByKey("DefaultResultSetAttributes")}let o=n.getListByKey("DefaultResultSetAttributeNodesMd");if(e.isNull(o)){o=n.getListByKey("DefaultResultSetAttributeNodes")}let l=n.getStringByKey("FieldLayoutType");let a=null;if(e.notNull(l)){a=e.QInAConverter.lookupFieldLayoutType(l)}if(e.isNull(a)){if(e.notNull(o)&&i.supportsFieldLayoutType(e.FieldLayoutType.ATTRIBUTE_BASED)){a=e.FieldLayoutType.ATTRIBUTE_BASED}else{a=e.FieldLayoutType.FIELD_BASED}}i.setFieldLayoutType(a);i.getMetadataBase().setDefaultFieldLayoutType(a);let s=i.getResultSetFields();let u=i.getSelectorFields();let p=i.getFieldContainerBase();if(e.notNull(r)){let n=e.XHashSetOfString.create();let o=r.size();for(let l=0;l<o;l++){let o=r.getStringAt(l);if(n.contains(o)){continue}n.add(o);let a=i.getFieldByName(o);if(e.isNull(a)){t.addError(e.ErrorCodes.INVALID_PARAMETER,o);return}p.addDefaultResultSetField(a);s.addInternal(a);u.addInternal(a)}}if(e.notNull(o)){if(i.supportsFieldLayoutType(e.FieldLayoutType.ATTRIBUTE_BASED)){let t=i.getAttributeContainerBase();let n=t.getMainAttribute();if(e.notNull(n)){let n=t.getResultSetAttributes();let i=t.getSelectorAttributes();if(a===e.FieldLayoutType.ATTRIBUTE_BASED){s.clear();u.clear()}let r=o.size();for(let l=0;l<r;l++){let r=t.getAttributeByName(o.getStringAt(l));if(e.notNull(r)){t.addDefaultResultSetAttribute(r);n.add(r);i.add(r);if(a===e.FieldLayoutType.ATTRIBUTE_BASED){let e=r.getResultSetFields();let t=e.size();for(let n=0;n<t;n++){let t=e.get(n);s.add(t);u.add(t)}}}}}}}let g=n.getBooleanByKeyExt("ResultSetFixedAttributes",false);p.setHasFixedResultSetFields(g);s.setIsFixed(g);u.setIsFixed(g);if(!n.containsKey("FieldLayoutType")){if(n.containsKey("DefaultResultSetAttributes")){p.clearDefaultResultSetFields()}else if(!n.containsKey("ResultSetFields")){if(i.supportsFieldLayoutType(e.FieldLayoutType.FIELD_BASED)){i.setFieldLayoutType(e.FieldLayoutType.FIELD_BASED);i.getMetadataBase().setDefaultFieldLayoutType(e.FieldLayoutType.FIELD_BASED);p.clearDefaultResultSetFields();let t=i.getResultSetFields();let n=t.size();for(let e=0;e<n;e++){p.addDefaultResultSetField(t.get(e))}}}}};e.QInAMdFieldsResultSet.prototype.exportComponentWithStructure=function(t,n,i,r){e.QInAMdFieldsResultSet.exportMd(i,n);return i};e.QInAMdFieldsResultSet.prototype.getComponentType=function(){return null};e.QInAMdFieldsResultSet.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;e.QInAMdFieldsResultSet.importMd(t,n,l);return i};e.QInAMdFieldsRoles=function(){};e.QInAMdFieldsRoles.prototype=new e.QInAComponentMetadata;e.QInAMdFieldsRoles.prototype._ff_c="QInAMdFieldsRoles";e.QInAMdFieldsRoles.exportMd=function(t,n){let i=t.putNewStructure("FieldDefaults");e.QInAExportUtil.setNameIfNotNull(i,"KeyAttribute",n.getFlatKeyField());e.QInAExportUtil.setNameIfNotNull(i,"TextAttribute",n.getFlatTextField());e.QInAExportUtil.setNameIfNotNull(i,"DisplayKeyAttribute",n.getFlatDisplayKeyField());e.QInAExportUtil.setNameIfNotNull(i,"HierarchyKeyAttribute",n.getHierarchyKeyField());e.QInAExportUtil.setNameIfNotNull(i,"HierarchyTextAttribute",n.getHierarchyTextField());e.QInAExportUtil.setNameIfNotNull(i,"HierarchyDisplayKeyAttribute",n.getHierarchyDisplayKeyField());e.QInAExportUtil.setNameIfNotNull(i,"HierarchyPathAttribute",n.getHierarchyPathField());e.QInAExportUtil.setNameIfNotNull(i,"HierarchyNavigationAttribute",n.getHierarchyNavigationField());e.QInAExportUtil.setNameIfNotNull(i,"NamePathAttribute",n.getNamePathField());e.QInAExportUtil.setNameIfNotNull(i,"GeoShapeAttribute",n.getGeoShapeField());e.QInAExportUtil.setNameIfNotNull(i,"GeoPointAttribute",n.getGeoPointField());e.QInAExportUtil.setNameIfNotNull(i,"GeoLevelAttribute",n.getGeoLevelField());e.QInAExportUtil.setNameIfNotNull(i,"TextAttribute",n.getGeoAreaNameField());e.QInAExportUtil.setNameIfNotNull(i,"DefaultResultTextAttribute",n.getDefaultResultSetTextField())};e.QInAMdFieldsRoles.getFieldBySuffix=function(t,n){let i=n.getFields();let r=i.size();for(let n=0;n<r;n++){let r=i.get(n);let o=e.XString.endsWith(r.getName(),t);if(o){return r}}return null};e.QInAMdFieldsRoles.importMd=function(t,n,i){let r=n.getStructureByKey("FieldDefaults");let o=e.isNull(r)?n:r;let l=i.getFieldByName(o.getStringByKey("KeyAttribute"));let a=i.getFieldByName(o.getStringByKey("TextAttribute"));let s=i.getFieldByName(o.getStringByKey("DisplayKeyAttribute"));let u=i.getFieldByName(o.getStringByKey("HierarchyKeyAttribute"));let p=i.getFieldByName(o.getStringByKey("HierarchyTextAttribute"));let g=i.getFieldByName(o.getStringByKey("HierarchyDisplayKeyAttribute"));let m=i.getFieldByName(o.getStringByKey("HierarchyPathAttribute"));let c=i.getFieldByName(o.getStringByKey("HierarchyNavigationAttribute"));let y=i.getFieldByName(o.getStringByKey("NamePathAttribute"));let d=i.getFieldByName(o.getStringByKey("DefaultResultTextAttribute"));if(e.isNull(c)){let t=o.getStructureByKey("AttributeHierarchy");if(e.notNull(t)){c=i.getFieldByName(t.getStringByKey("HierarchyNavigationAttribute"))}}let A=i.getFieldContainerBase();if(t.m_capabilities.supportsSpatialChoropleth()){A.setGeoShapeField(i.getFieldByName(o.getStringByKey("GeoShapeAttribute")));A.setGeoPointField(i.getFieldByName(o.getStringByKey("GeoPointAttribute")));A.setGeoLevelField(i.getFieldByName(o.getStringByKey("GeoLevelAttribute")));A.setGeoAreaNameField(i.getFieldByName(o.getStringByKey("TextAttribute")))}let I=null;if(e.isNull(r)){if(e.isNull(m)){m=i.getFirstFieldByType(e.PresentationType.HIERARCHY_PATH);if(e.isNull(m)&&t.m_capabilities.supportsHierarchyPath()&&!t.m_capabilities.supportsHierarchyPathPresentationType()){m=e.QInAMdFieldsRoles.getFieldBySuffix(".path",i)}}if(t.m_capabilities.supportsCubeBlendingProperties()){I=e.QInAMdFieldsRoles.getFieldBySuffix(".cubeBlendingProperties",i)}let r=i.getAttributeContainer();let o=r.getMainAttribute();if(e.notNull(o)){l=o.getKeyField();s=o.getDisplayKeyField();a=o.getTextField();d=o.getDefaultResultSetTextField();if(t.m_capabilities.supportsHierarchyAttHierFields()){u=o.getHierarchyKeyField();p=o.getHierarchyTextField();g=o.getHierarchyDisplayKeyField()}}if(i.getDimensionType().isTypeOf(e.DimensionType.ABSTRACT_STRUCTURE)){if(e.isNull(l)){l=i.getFirstFieldByType(e.PresentationType.KEY)}if(e.isNull(s)){s=i.getFirstFieldByType(e.PresentationType.DISPLAY_KEY)}if(e.isNull(a)){a=i.getFirstFieldByType(e.PresentationType.TEXT)}if(e.isNull(u)){let t=i.getFirstFieldByType(e.PresentationType.HIERARCHY_KEY);if(e.isNull(t)){u=l}else{u=t}}if(e.isNull(p)){p=i.getFirstFieldByType(e.PresentationType.HIERARCHY_TEXT)}if(e.isNull(g)){g=i.getFirstFieldByType(e.PresentationType.HIERARCHY_DISPLAY_KEY)}if(e.isNull(p)){p=a}if(e.isNull(g)){g=s}}if(e.isNull(y)){y=i.getFirstFieldByType(e.PresentationType.NAME_PATH)}let c=i.getUniversalDisplayHierarchy();if(e.notNull(c)){l=c.getKeyField(i,n.getListByKey("Attributes"),"IsKey","Name");s=c.getDisplayKeyField(i);a=c.getTextField(i)}}if(e.notNull(l)){l.getMetadataBase().setIsFlatKeyField(true)}if(e.notNull(a)){a.getMetadataBase().setIsFlatTextField(true)}if(e.notNull(m)){m.getMetadataBase().setIsHierarchyPathField(true)}if(e.notNull(u)){u.getMetadataBase().setIsHierarchyKeyField(true)}if(e.notNull(I)){I.getMetadataBase().setIsCubeBlendingPropertiesField(true)}if(e.notNull(c)){c.getMetadataBase().setIsHierarchyNavigationField(true)}if(e.notNull(y)){y.getMetadataBase().setIsNamePathField(true)}A.setFlatKeyField(l);A.setFlatTextField(a);A.setFlatDisplayKeyField(s);A.setHierachyKeyField(u);A.setHierarchyTextField(p);A.setHierarchyDisplayKeyField(g);A.setHierarchyPathField(m);A.setHierachyNavigationField(c);A.setNamePathField(y);A.setCubeBlendingPropertiesField(I);A.setDefaultResultSetTextField(d)};e.QInAMdFieldsRoles.prototype.exportComponentWithStructure=function(t,n,i,r){e.QInAMdFieldsRoles.exportMd(i,n);return i};e.QInAMdFieldsRoles.prototype.getComponentType=function(){return null};e.QInAMdFieldsRoles.prototype.importComponentWithStructure=function(t,n,i,r,o){e.QInAMdFieldsRoles.importMd(t,n,i);return i};e.QInAMdFilterCapability=function(){};e.QInAMdFilterCapability.prototype=new e.QInAComponentMetadata;e.QInAMdFilterCapability.prototype._ff_c="QInAMdFilterCapability";e.QInAMdFilterCapability.containsNullOperator=function(t){let n=t(e.SetSign.INCLUDING);if(e.notNull(n)&&n.contains(e.ComparisonOperator.IS_NULL)){return true}let i=t(e.SetSign.EXCLUDING);return e.notNull(i)&&i.contains(e.ComparisonOperator.IS_NULL)};e.QInAMdFilterCapability.createFilterCapabilityContext=function(t){if(e.notNull(t)){let n=e.PrFactory.createStructure();let i=e.PrFactory.createStructure();i.putString("ComparisonGroup",e.QInAConverter.lookupComparisonGroupInA(t));i.putBoolean("IsNullAllowed",t.isNullAllowed());n.put("Comparison",i);return n}return null};e.QInAMdFilterCapability.exportMd=function(t,n,i,r){let o=e.PrFactory.createStructure();if(e.notNull(n)){if(n.getComponentType().isTypeOf(e.OlapComponentType.FILTER_CAPABILITY_GROUP)){let t=n;if(r.getModelCapabilities().supportsFilterCapabilityExtended()){o.putIfNotNull("Query",e.QInAMdFilterCapability.createFilterCapabilityContext(t.getGroupByContext(e.QContextType.RESULT_SET)));o.putIfNotNull("Valuehelp",e.QInAMdFilterCapability.createFilterCapabilityContext(t.getGroupByContext(e.QContextType.SELECTOR)))}else{let n=e.QInAConverter.lookupComparisonGroupInA(t.getGroup());o.putString("ComparisonGroup",n)}}else{let i=t.isAbap(r);if(r.getModelCapabilities().supportsFilterCapabilityExtended()){if(n.supportsSetSign(e.SetSign.INCLUDING)||n.supportsSetSign(e.SetSign.EXCLUDING)){let t=o.putNewStructure("Query");let r=t.putNewStructure("Comparison");e.QInAMdFilterCapability.exportOperators(i,r,n,"Including",e.SetSign.INCLUDING,false);e.QInAMdFilterCapability.exportOperators(i,r,n,"Excluding",e.SetSign.EXCLUDING,false);r.putBoolean("IsNullAllowed",e.QInAMdFilterCapability.containsNullOperator(e=>n.getSupportedComparisonOperators(e)))}if(n.supportsSetSignForValueHelpAndReadMode(e.SetSign.INCLUDING,e.QMemberReadMode.MASTER)||n.supportsSetSignForValueHelpAndReadMode(e.SetSign.EXCLUDING,e.QMemberReadMode.MASTER)){let t=o.putNewStructure("Valuehelp");let r=t.putNewStructure("Comparison");e.QInAMdFilterCapability.exportValueHelpOperators(i,r,n,"Including",e.SetSign.INCLUDING);e.QInAMdFilterCapability.exportValueHelpOperators(i,r,n,"Excluding",e.SetSign.EXCLUDING);r.putBoolean("IsNullAllowed",e.QInAMdFilterCapability.containsNullOperator(t=>n.getSupportedComparisonOperatorsForValueHelpAndReadMode(t,e.QMemberReadMode.MASTER)))}}else{let t=o.putNewStructure("Comparison");e.QInAMdFilterCapability.exportOperators(i,t,n,"Including",e.SetSign.INCLUDING,true);e.QInAMdFilterCapability.exportOperators(i,t,n,"Excluding",e.SetSign.EXCLUDING,true)}}}if(e.notNull(i)){i.put("FilterCapability",o)}return o};e.QInAMdFilterCapability.exportOperators=function(t,n,i,r,o,l){if(i.supportsSetSign(o)){let a=n.putNewList(r);let s=i.getSupportedComparisonOperators(o);e.QInAMdFilterCapability.exportOperatorsList(t,s,a,l)}};e.QInAMdFilterCapability.exportOperatorsList=function(t,n,i,r){for(let o=0;o<n.size();o++){let l=n.get(o);if(l===e.ComparisonOperator.NOT_BETWEEN&&t){i.addString("NOTBETWEEN")}else if(l!==e.ComparisonOperator.IS_NULL||r){i.addString(e.QInAConverter.lookupComparisonInA(l))}}};e.QInAMdFilterCapability.exportValueHelpOperators=function(t,n,i,r,o){if(i.supportsSetSignForValueHelpAndReadMode(o,e.QMemberReadMode.MASTER)){let l=n.putNewList(r);let a=i.getSupportedComparisonOperatorsForValueHelpAndReadMode(o,e.QMemberReadMode.MASTER);e.QInAMdFilterCapability.exportOperatorsList(t,a,l,false)}};e.QInAMdFilterCapability.importComparisonGroupByContext=function(t,n,i){let r=null;if(t.m_capabilities.supportsFilterCapabilityExtended()){let t=n.getStructureByKey(i);if(e.notNull(t)){let n=t.getStructureByKey("Comparison");if(e.notNull(n)){let t=n.getStringByKeyExt("ComparisonGroup",null);r=e.QInAConverter.lookupComparisonGroup(t,n.getBooleanByKeyExt("IsNullAllowed",false))}}}return r};e.QInAMdFilterCapability.importFilterCapabilityListByContext=function(t,n,i,r){if(t.m_capabilities.supportsFilterCapabilityExtended()){let o=n.getStructureByKey(r);if(e.notNull(o)){i.setIsSameAcrossContexts(false);let n=o.getStructureByKey("Comparison");if(e.notNull(n)){e.QInAMdFilterCapability.importOperators(t,n,i,"Including",e.SetSign.INCLUDING,n.getBooleanByKeyExt("IsNullAllowed",false),r);e.QInAMdFilterCapability.importOperators(t,n,i,"Excluding",e.SetSign.EXCLUDING,n.getBooleanByKeyExt("IsNullAllowed",false),r)}}}};e.QInAMdFilterCapability.importMd=function(t,n,i,r,o){let l=n.getStructureByKey("FilterCapability");let a;let s=null;let u=null;if(e.isNull(l)){a=n.getStringByKeyExt("ComparisonGroup",null)}else{a=l.getStringByKeyExt("ComparisonGroup",null);if(e.isNull(a)){s=e.QInAMdFilterCapability.importComparisonGroupByContext(t,l,"Query");u=e.QInAMdFilterCapability.importComparisonGroupByContext(t,l,"Valuehelp")}}let p=null;let g;if(e.notNull(a)||e.notNull(s)||e.notNull(u)){g=e.QFilterCapabilityGroup._createFilterCapabilityGroup(o,r,i);if(e.notNull(a)){g.setGroup(e.QInAConverter.lookupComparisonGroup(a,false))}else{g.setIsSameAcrossContexts(false);if(e.notNull(s)){g.setGroupByContext(s,e.QContextType.RESULT_SET)}if(e.notNull(u)){g.setGroupByContext(u,e.QContextType.SELECTOR)}}p=g}else if(e.notNull(l)&&l.hasElements()){let n=l.getStructureByKey("Comparison");if(e.isNull(n)){if(t.m_capabilities.supportsFilterCapabilityExtended()){p=e.QFilterCapability._createFilterCapability(o,r,i);e.QInAMdFilterCapability.importFilterCapabilityListByContext(t,l,p,"Query");e.QInAMdFilterCapability.importFilterCapabilityListByContext(t,l,p,"Valuehelp")}else{let n=e.XStringBuffer.create();n.append("Metadata warning: No filter capability found for field ");if(e.notNull(i)){n.append(i.getName())}t.addWarning(e.ErrorCodes.IMPORT_FILTER_CAPABILITY_NOT_FOUND,n.toString())}}else{p=e.QFilterCapability._createFilterCapability(o,r,i);e.QInAMdFilterCapability.importOperators(t,n,p,"Including",e.SetSign.INCLUDING,false,null);e.QInAMdFilterCapability.importOperators(t,n,p,"Excluding",e.SetSign.EXCLUDING,false,null)}}else if(t.isAbap(o)&&e.notNull(i)&&i.getDimension()!==null&&i.getDimension().isStructure()){p=e.QFilterCapability._createFilterCapability(o,r,i);p.setSupportsValueHelpOnly(true);p.addSupportedSetSignByContext(e.SetSign.INCLUDING,e.QContextType.SELECTOR);p.getModifiableSupportedComparisonOperatorsByContext(e.SetSign.INCLUDING,e.QContextType.SELECTOR).add(e.ComparisonOperator.EQUAL)}return p};e.QInAMdFilterCapability.importOperators=function(t,n,i,r,o,l,a){let s=n.getListByKey(r);if(!e.PrUtils.isListEmpty(s)){let n;if(e.XString.isEqual(a,"Valuehelp")){i.addSupportedSetSignByContext(o,e.QContextType.SELECTOR);n=i.getModifiableSupportedComparisonOperatorsByContext(o,e.QContextType.SELECTOR)}else{i.addSupportedSetSign(o);n=i.getModifiableSupportedComparisonOperatorsByContext(o,e.QContextType.RESULT_SET)}let r=s.size();for(let i=0;i<r;i++){let r=s.getStringAt(i);if(e.notNull(r)){let i=e.QInAConverter.lookupComparison(r);if(e.isNull(i)){t.addWarning(e.ErrorCodes.IMPORT_FILTER_CAPABILITY_UNSUPPORTED_OPERATORS,e.XStringUtils.concatenate3("Metadata warning: Unsupported Comparison Operator '",r,"'!"))}else{n.add(i)}}}if(l){n.add(e.ComparisonOperator.IS_NULL)}}};e.QInAMdFilterCapability.updateFilterCapabilities=function(t){let n=t.getHierarchyKeyField();if(e.notNull(n)&&!n.isFlatKeyField()){let i=t.getFilterCapabilities().getFilterCapabilitiesByField(n);if(e.notNull(i)&&i.isFilterCapabilityGroup()){let t=i;t.setGroup(e.QInAConverter.switchComparisonGroupToIncludeOnly(t.getGroup()))}}};e.QInAMdFilterCapability.prototype.exportComponentWithStructure=function(t,n,i,r){return e.QInAMdFilterCapability.exportMd(t,n,i,n.getQueryModel())};e.QInAMdFilterCapability.prototype.getComponentType=function(){return null};e.QInAMdFilterCapability.prototype.importComponentWithStructure=function(t,n,i,r,o){return e.QInAMdFilterCapability.importMd(t,n,r,null,o)};e.QInAMdGenericComponent=function(){};e.QInAMdGenericComponent.prototype=new e.QInAComponentMetadata;e.QInAMdGenericComponent.prototype._ff_c="QInAMdGenericComponent";e.QInAMdGenericComponent.prototype.exportComponentWithStructure=function(e,t,n,i){let r=t;n.putString("Name",r.getName());n.putString("Type",t.getComponentType().getName());return n};e.QInAMdGenericComponent.prototype.extendCustom=function(t,n,i){let r=n.getOlapComponentType();let o=e.QInAConverter.lookupComponentTypeInA(r);if(e.notNull(o)){i.putString("CType",o)}return i};e.QInAMdGenericComponent.prototype.getComponentType=function(){return e.OlapComponentType.OLAP};e.QInAMdGenericComponent.prototype.importComponentWithStructure=function(e,t,n,i,r){return n};e.QInAMdHierarchy=function(){};e.QInAMdHierarchy.prototype=new e.QInAComponentMetadata;e.QInAMdHierarchy.prototype._ff_c="QInAMdHierarchy";e.QInAMdHierarchy.appendItemsToCatalogResult=function(t,n,i){let r=e.PrUtils.getListSize(n,0);for(let o=0;o<r;o++){let r=e.PrUtils.getStructureElement(n,o);let l=e.HierarchyCatalogItem.createCatalogItem();l.setDimensionName(i);let a;if(r.hasStringByKey("Name")){a=r.getStringByKey("Name")}else{a=r.getStringByKey("HierarchyName")}if(e.XStringUtils.isNullOrEmpty(a)||t.containsHierarchy(a)){continue}l.setHierarchyName(a);l.setHierarchyUniqueName(r.getStringByKey("UniqueName"));let s=e.PrUtils.getStringProperty(r,"Description");if(e.notNull(s)){l.setHierarchyLongText(s.getString())}let u=e.PrUtils.getStringProperty(r,"Version");if(e.notNull(u)){l.setVersionName(u.getString())}let p=e.PrUtils.getStringProperty(r,"Structure");if(e.notNull(p)){l.setHierarchyType(e.HierarchyType.lookup(p.getString()))}let g=e.PrUtils.getBooleanValueProperty(r,"IsModeled",false);l.setIsModeled(g);let m=e.PrUtils.getStringProperty(r,"DateTo");if(e.notNull(m)){let t=m.getString();if(e.XStringUtils.isNotNullAndNotEmpty(t)){l.setDateTo(e.XDate.createDateFromIsoFormat(t))}}let c=e.PrUtils.getListProperty(r,"Levels");if(e.notNull(c)){l.setSupportsHierarchyLevels(true);let t=e.XList.create();let n=e.PrUtils.getListSize(c,0);for(let i=0;i<n;i++){let n=e.PrUtils.getStructureElement(c,i);if(e.isNull(n)){continue}let r=e.HierarchyCatalogLevel.createCatalogLevel();let o=e.PrUtils.getIntegerValueProperty(n,"Level",-1);if(o>-1){r.setLevel(o)}let l=e.PrUtils.getStringProperty(n,"LevelName");if(e.notNull(l)){r.setLevelName(l.getString())}let a=e.PrUtils.getStringProperty(n,"LevelCaption");if(e.notNull(a)){r.setLevelDescription(a.getString())}let s=e.PrUtils.getStringProperty(n,"LevelUniqueName");if(e.notNull(s)){r.setLevelUniqueName(s.getString())}let u=e.PrUtils.getStringProperty(n,"DimensionName");if(e.notNull(u)){r.setLevelDimensionName(u.getString())}let p=e.PrUtils.getIntegerProperty(n,"LevelType");if(e.notNull(p)){r.setLevelType(e.QInAConverter.lookupHierarchyLevelType(p.getInteger()))}t.add(r)}l.setHierarchyLevels(t)}let y=r.getStringByKey("RestNode");if(e.notNull(y)){l.setRestNode(y)}let d=r.getStringByKey("VirtualRootNode");if(e.notNull(d)){l.setVirtualRootNode(d)}t.addItem(l)}return t};e.QInAMdHierarchy.exportHierarchyDetails=function(t,n,i){let r=i.next();let o=n.addNewStructure();o.putString("Name",r.getHierarchyName());o.putString("Description",r.getHierarchyDescription());if(r.hasVersionName()){o.putString("Version",r.getVersionName())}let l=r.getHierarchyType();if(l!==e.HierarchyType.UNKNOWN){o.putString("Structure",l.getName())}o.putString("RestNode",r.getRestNode());o.putString("VirtualRootNode",r.getVirtualRootNode());e.QInAExportUtil.setDate(t,o,"DueDate",r.getDateTo());e.QInAMdHierarchy.exportLevels(o,r)};e.QInAMdHierarchy.exportLevelHierarchyDetails=function(t,n,i){let r=n.addNewStructure();r.putString("Name",i.getHierarchyName());r.putString("Description",i.getHierarchyDescription());r.putString("DimensionName",i.getDimensionName());r.putString("Structure",i.getHierarchyType().getName());r.putBoolean("IsModeled",i.isModeled());e.QInAExportUtil.setDate(t,r,"DueDate",i.getDateTo());e.QInAMdHierarchy.exportLevelsLevelHierarchy(r,i)};e.QInAMdHierarchy.exportLevels=function(t,n){if(n.supportsHierarchyLevels()){let i=t.putNewList("Levels");let r=n.getHierarchyLevels();if(e.notNull(r)){let t=r.size();for(let n=0;n<t;n++){let t=r.get(n);let o=i.addNewStructure();o.putString("LevelUniqueName",t.getLevelUniqueName());o.putInteger("Level",t.getLevel());o.putString("LevelName",t.getLevelName());o.putString("LevelCaption",t.getLevelDescription());o.putStringNotNull("DimensionName",t.getLevelDimensionName());o.putInteger("LevelType",e.QInAConverter.lookupHierarchyLevelTypeIna(t.getLevelType()))}}}};e.QInAMdHierarchy.exportLevelsLevelHierarchy=function(t,n){let i=t.putNewList("Levels");let r=n.getAllLevel();let o=r.size();for(let t=0;t<o;t++){let n=r.get(t);let o=i.addNewStructure();o.putInteger("Level",n.getLevelNumber());o.putStringNotNull("LevelUniqueName",n.getLevelUniqueName());o.putString("LevelName",n.getLevelName());o.putString("LevelCaption",n.getLevelText());o.putStringNotNull("DimensionName",n.getLevelDimensionName());o.putInteger("LevelType",e.QInAConverter.lookupHierarchyLevelTypeIna(n.getLevelType()))}};e.QInAMdHierarchy.exportMdHierarchy=function(t,n,i){n.putBoolean("HierarchiesPossible",i.supportsHierarchy());n.putBoolean("HasExternalHierarchies",i.hasExternalHierarchies());n.putInteger("NumberOfHierarchies",i.getNumberOfHierarchies());n.putString("DefaultHierarchy",i.getDefaultHierarchyName());if(t.m_capabilities.supportsDisplayHierarchyFixInFilter()){n.putBoolean("DisplayHierarchyFixInFilter",i.isDisplayHierarchyFixInFilter())}let r=i.getLeveledHierarchies();let o=i.getModelCapabilities();if(e.XCollectionUtils.hasElements(r)&&o.supportsDimensionHierarchyLevels()){let i=n.putNewList("LevelHierarchies");let o=r.size();for(let n=0;n<o;n++){e.QInAMdHierarchy.exportLevelHierarchyDetails(t,i,r.get(n))}}if(o.supportsHierarchyMetadata()){let r=n.putNewList("Hierarchies");let o=i.getHierarchies();if(e.notNull(o)){let n=o.getObjectsIterator();while(n.hasNext()){e.QInAMdHierarchy.exportHierarchyDetails(t,r,n)}e.XObjectExt.release(n)}}if(o.supportsDimensionHierarchyMetadata()){let t=n.putNewStructure("HierarchyMetadata");if(i.isHierarchyActiveByDefault()!==e.TriStateBool._DEFAULT){t.putBoolean("ActiveDefault",i.isHierarchyActiveByDefault().getBoolean())}t.putBoolean("TimeDependent",i.hasTimeDependentHierarchies());t.putBoolean("VersionDependent",i.hasVersionDependentHierarchies())}else if(t.isAbap(i)){if(i.isHierarchyActiveByDefault()!==e.TriStateBool._DEFAULT){n.putBoolean("HierarchyActiveDefault",i.isHierarchyActiveByDefault().getBoolean())}}};e.QInAMdHierarchy.hasPlaceHolderInStructure=function(t,n,i){let r=t.getStringByKey(n);let o=e.notNull(r)&&e.XString.isEqual(i,r);return o};e.QInAMdHierarchy.importDimensionHierarchyMetadata=function(t,n,i){if(e.notNull(i)){if(i.containsKey("ActiveDefault")){let t=e.TriStateBool.lookup(i.getBooleanByKey("ActiveDefault"));n.getHierarchyManagerBase().setHierarchyActiveByDefault(t)}n.getHierarchyManagerBase().setHasTimeDependentHierarchies(i.getBooleanByKey("TimeDependent"));n.getHierarchyManagerBase().setHasVersionDependentHierarchies(i.getBooleanByKey("VersionDependent"))}};e.QInAMdHierarchy.importEachLeveledHierarchy=function(t,n,i,r){let o=i.size();for(let l=0;l<o;l++){let o=e.QInAMdHierarchy.importLeveledHierarchy(t,n.getContext(),n,i.getStructureAt(l));if(!r.contains(o)){r.add(o)}}};e.QInAMdHierarchy.importHierarchyDrillInfo=function(t,n,i){let r=n.getIntegerByKeyExt("InitialDrillOffset",0);let o=n.getIntegerByKeyExt("InitialDrillLevel",0);let l=i.getModelCapabilities();if(l.supportsVisibilityFilter()||!t.m_mode.isTypeOf(e.QModelFormat.INA_DATA)){i.setInitialDrillLevel(o);i.setSelectorInitialDrillLevel(o)}else{if(o===-1){i.setInitialDrillLevel(o);i.setSelectorInitialDrillLevel(o)}else if(r===-1){i.setInitialDrillLevel(0);i.setSelectorInitialDrillLevel(0)}else{i.setInitialDrillLevel(o+r);i.setSelectorInitialDrillLevel(o+r)}}i.setInitialDrillOffset(r);i.setExplicitDrillOnFilteredNodes(n.getBooleanByKeyExt("ExplicitDrillOnFilteredNodes",false));let a=e.Alignment.DEFAULT_VALUE;if(l.supportsExpandBottomUp()){let t=n.getStringByKeyExt("LowerLevelNodeAlignment","Default");a=e.QInAConverter.lookupLowerLevelNodeAlignment(t);if(n.containsKey("ExpandBottomUp")){let t=n.getBooleanByKeyExt("ExpandBottomUp",false);if(t){a=e.Alignment.CHILDREN_ABOVE_PARENT}}}i.setLowerLevelNodeAlignment(a);let s=n.getBooleanByKeyExt("NodeCondensation",false);i.setHasNodeCondensation(s);let u=n.getStringByKeyExt("MemberOfPostedNodeVisibility","Visible");let p=e.QInAConverter.lookupResultSetVisibility(u);i.setMemberOfPostedNodeVisibility(p);if(l.supportsMaxDrillLevel()){let e=n.getIntegerByKeyExt("MaxDrillLevel",-1);i.getHierarchyManager().setMaxDrillLevel(e);let t=n.getIntegerByKeyExt("MaxRuntimeLevel",-1);i.getHierarchyManager().setMaxRuntimeLevel(t)}};e.QInAMdHierarchy.importHierarchyDueDate=function(t,n,i,r){let o=t.getStringByKey("DueDate");let l=e.QInAMdHierarchy.hasPlaceHolderInStructure(t,"DueDateIs","Variable");n.setUseHierarchyDueDateVariable(l);if(l){n.setHierarchyDueDateVariableName(e.XStringUtils.isNullOrEmpty(o)?null:o);n.getHierarchyManagerBase().setInitialHierarchyDueDate(null)}else{let t=e.XDate.createDateFromStringWithFlag(o,r);if(e.notNull(i)){i.setHierarchyDueDate(t)}e.QInAMdHierarchy.setInitialDueDate(n,t)}};e.QInAMdHierarchy.importHierarchyVersion=function(t,n,i){let r=t.getStringByKey("Version");let o=e.QInAMdHierarchy.hasPlaceHolderInStructure(t,"VersionIs","Variable");n.getHierarchyManagerBase().setUseHierarchyVersionVariable(o);if(o){n.getHierarchyManagerBase().setHierarchyVersionVariableName(e.XStringUtils.isNullOrEmpty(r)?null:r);n.getHierarchyManagerBase().setInitialHierarchyVersion(null)}else{n.getHierarchyManagerBase().setInitialHierarchyVersion(r);if(e.notNull(i)){i.setHierarchyVersion(r)}}};e.QInAMdHierarchy.importLevelHierarchyDetails=function(t,n,i){if(!e.PrUtils.isListEmpty(i)){let r=n.getQueryModelBase().getQueryManagerBase().getMetadataModelBase();let o=r.getLeveledHierarchiesBase();e.QInAMdHierarchy.importEachLeveledHierarchy(t,n,i,o)}};e.QInAMdHierarchy.importLeveledHierarchy=function(t,n,i,r){let o=e.QLeveledHierarchy.create(n,i,r.getStringByKey(r.containsKey("Name")?"Name":"HierarchyName"));o.setHierarchyUniqueName(r.getStringByKey("UniqueName"));if(r.getStringByKey("DimensionName")===null){o.setDimensionName(i.getName())}else{o.setDimensionName(r.getStringByKey("DimensionName"))}o.setHierarchyType(e.HierarchyType.lookup(r.getStringByKey("Structure")));o.setIsModeled(r.getBooleanByKeyExt("IsModeled",false));let l=r.getStringByKey("DueDate");if(e.XStringUtils.isNotNullAndNotEmpty(l)){o.setDateTo(e.XDate.createDateFromStringWithFlag(l,t.m_capabilities.supportsSapDate()))}o.setHierarchyDescription(r.getStringByKey("Description"));let a=r.getListByKey("Levels");if(!e.PrUtils.isListEmpty(a)){e.QInAMdHierarchy.importLevels(o,a)}return o};e.QInAMdHierarchy.importLevels=function(t,n){let i=n.size();for(let r=0;r<i;r++){let i=n.getStructureAt(r);let o=e.QHierarchyLevel.create(t,i.getStringByKey("LevelUniqueName"),i.getIntegerByKey("Level"));o.setLevelName(i.getStringByKey("LevelName"));o.setLevelText(i.getStringByKey("LevelCaption"));o.setLevelDimensionName(i.getStringByKey("DimensionName"));o.setLevelType(e.QInAConverter.lookupHierarchyLevelType(i.getIntegerByKey("LevelType")));o.setNavigationAttribute(i.getStringByKey("NavAttr"));t.getAllLevelBase().add(o)}};e.QInAMdHierarchy.importMdHierarchy=function(t,n,i){let r=i.getHierarchyManagerBase();let o=e.PrUtils.getBooleanValueProperty(n,"HierarchiesPossible",false);r.setSupportsHierarchy(o);let l=e.PrUtils.getBooleanValueProperty(n,"HasExternalHierarchies",false);r.setHasExternalHierarchies(l);let a=e.PrUtils.getStringValueProperty(n,"DefaultHierarchy","");let s=e.PrUtils.getBooleanValueProperty(n,"DisplayHierarchyFixInFilter",false);r.setDefaultHierarchyName(a);r.setNumberOfHierarchies(e.PrUtils.getIntegerValueProperty(n,"NumberOfHierarchies",0));let u=n.getStructureByKey("Hierarchy");e.QInAMdHierarchy.importMdHierarchyForAutoSubmit(t,u,i);if(t.getSession().hasFeature(e.FeatureToggleOlap.ACTIVATE_DEFAULT_HIERARCHY)){if(o&&e.XStringUtils.isNotNullAndNotEmpty(a)){r.setHierarchyName(a);r.setHierarchyActive(true)}}r.setDisplayHierarchyFixInFilter(s);let p=e.PrUtils.getListProperty(n,"LevelHierarchies");let g=i.getModelCapabilities();if(e.notNull(g)){if(g.supportsDimensionHierarchyLevels()){e.QInAMdHierarchy.importLevelHierarchyDetails(t,i,p)}if(g.supportsSpatialChoropleth()){let o=e.PrUtils.getListProperty(n,"GeoShapeHierarchies");if(!e.PrUtils.isListEmpty(o)){let n=r.getGeoShapeHierarchiesBase();e.QInAMdHierarchy.importEachLeveledHierarchy(t,i,o,n)}}if(g.supportsDimensionHierarchyMetadata()){let r=n.getStructureByKey("HierarchyMetadata");e.QInAMdHierarchy.importDimensionHierarchyMetadata(t,i,r)}else if(t.isAbap(i)&&n.containsKey("HierarchyActiveDefault")){let t=e.TriStateBool.lookup(n.getBooleanByKey("HierarchyActiveDefault"));i.getHierarchyManagerBase().setHierarchyActiveByDefault(t)}if(!g.supportsHierarchyMetadata()){return}}let m=e.PrUtils.getListProperty(n,"Hierarchies");let c=e.QFactory.createHierarchyCatalogResult();e.QInAMdHierarchy.appendItemsToCatalogResult(c,m,i.getName());r.setHierarchies(c);if(e.notNull(m)){e.QInAMdHierarchy.importLevelHierarchyDetails(t,i,m)}};e.QInAMdHierarchy.importMdHierarchyForAutoSubmit=function(t,n,i){let r=i.getQueryManager();let o=t.getOriginalMode()===e.QModelFormat.INA_METADATA||t.getMode()===e.QModelFormat.INA_METADATA;if(e.notNull(n)&&i.supportsHierarchy()&&e.notNull(r)&&r.getModelCapabilities().supportsAutoVariableSubmit()&&r.getVariableProcessorState()===e.VariableProcessorState.CHANGEABLE_STARTUP){let r=i.isDisplayHierarchyFixInFilter();i.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(false);let l=e.QInAMdHierarchy.hasPlaceHolderInStructure(n,"NameIs","Variable");let a=l&&o;let s=n.getStringByKey("Name")!==null?n.getStringByKey("Name"):n.getStringByKey("HierarchyName");i.getHierarchyManagerBase().setUseHierarchyNameVariable(a);if(a){i.getHierarchyManagerBase().setHierarchyNameVariableName(s)}i.getHierarchyManagerBase().setInitialHierarchyName(l?null:s);let u=null;if(e.XStringUtils.isNotNullAndNotEmpty(s)){if(n.getBooleanByKey("IsTransient")){u=e.QHierarchy.createCustomHierarchy(i.getContext(),i,s,n.getStringByKey("Description"))}else if(!a){u=e.QHierarchy.create(i.getContext(),i,s)}e.QInAMdHierarchy.importHierarchyDueDate(n,i,u,t.m_capabilities.supportsSapDate());e.QInAMdHierarchy.importHierarchyVersion(n,i,u);if(!a){i.setHierarchy(u);let e=n.getBooleanByKeyExt("HierarchyActive",true);i.setHierarchyActive(e);i.setSelectorHierarchyActive(e)}e.QInAMdHierarchy.importHierarchyDrillInfo(t,n,i);i.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(r)}}let l=e.notNull(n)&&e.XString.isEqual(n.getStringByKey("DueDateIs"),"Variable");let a=e.notNull(n)&&n.hasStringByKey("DueDate");let s=i.getHierarchyDueDate()===null&&e.XStringUtils.isNullOrEmpty(i.getHierarchyDueDateVariableName())&&!a&&!l&&o;i.getHierarchyManagerBase().setDueDateDefaultByMetadata(s)};e.QInAMdHierarchy.setInitialDueDate=function(t,n){let i=n;if(e.isNull(i)){i=t.getQueryModel().getCubeInfo().getDueDate().getDate()}if(e.isNull(i)){i=e.XDate.create()}t.getHierarchyManagerBase().setInitialHierarchyDueDate(i)};e.QInAMdHierarchy.prototype.exportComponentWithStructure=function(t,n,i,r){e.QInAMdHierarchy.exportMdHierarchy(t,i,n);return i};e.QInAMdHierarchy.prototype.getComponentType=function(){return null};e.QInAMdHierarchy.prototype.importComponentWithStructure=function(t,n,i,r,o){e.QInAMdHierarchy.importMdHierarchy(t,n,i);return i};e.QInAMdQuery=function(){};e.QInAMdQuery.prototype=new e.QInAComponentMetadata;e.QInAMdQuery.prototype._ff_c="QInAMdQuery";e.QInAMdQuery.collectUsedDimensionsForRendering=function(t,n){let i=e.XHashSetOfString.create();if(n===e.QModelFormat.INA_METADATA_RENDERING){e.DimensionUsageAnalyzer2.addDimensionsUsedBySorting(t,i);e.DimensionUsageAnalyzer2.addDimensionsUsedByVariables(t,i);e.DimensionUsageAnalyzer2.addDimensionsUsedBySpatialClustering(t,i)}return i};e.QInAMdQuery.exportDimensions=function(t,n,i){let r=e.PrFactory.createList();if(t.getOriginalMode()===e.QModelFormat.INA_METADATA){n.getDimensions()}let o=e.XList.createWithList(n.getDimensionNames());o.sortByDirection(e.XSortDirection.ASCENDING);let l=o.size();let a=n.isOptimizedExportModeActive();let s=t.getMode();let u=e.QInAMdQuery.collectUsedDimensionsForRendering(n,s);let p=n.getDimensionManagerBase();for(let n=0;n<l;n++){let i=o.get(n);let l=p.getDimensionByNameInternal(i);let g;if(e.isNull(l)){if(t.getOriginalMode().isTypeOf(e.QModelFormat.INA_CLONE)){g=e.PrFactory.createStructure();g.putString("Name",i);g.putBoolean("IsReference",true)}else{continue}}else{if(a&&l.isIgnoredOnOptimizedExport()){continue}let n=l.getAxisType();if(s===e.QModelFormat.INA_METADATA_RENDERING&&n!==e.AxisType.ROWS&&n!==e.AxisType.COLUMNS&&!u.contains(l.getName())){continue}g=t.exportDimension(l,null)}r.add(g)}i.put("Dimensions",r)};e.QInAMdQuery.exportInAQueryNode=function(t,n,i){let r=i.getModelCapabilities();let o=n.putNewStructure("QueryMd");if(t.m_mode.containsMetadata()||t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)||t.m_mode===e.QModelFormat.INA_METADATA_CORE||t.m_mode===e.QModelFormat.INA_METADATA_RENDERING){if(r.supportsQueryCurrencyTranslation()){o.putString("CurrencyTranslationEnabled",i.getCurrencyTranslationManager().getCurrencyTranslationEnabledType())}o.putStringNotNullAndNotEmpty("VirtualRootNode",i.getVirtualRootNodeName());if(i.supportsResultVisibility()){let t=o.putNewStructure("ResultStructureFeature");t.putBoolean("Enabled",i.supportsResultVisibility());t.putBoolean("ConditionalVisibility",r.supportsConditionalResultVisibility());t.putString("Reordering",e.QInAConverter.lookupReorderingInA(r.getResultStructureReorderingCapability()));let n=t.putNewStructure("ResultAlignment");let l=r.getSupportedResultAlignmentLevel();n.putString("ConfigLevel",e.QInAConverter.lookupConfigLevelInA(l));let a=r.getSupportedResultAlignments();if(a.hasElements()){let t=n.putNewList("ResultAlignmentList");let i=a.size();for(let n=0;n<i;n++){t.addString(e.QInAConverter.lookupAlignmentInA(a.get(n)))}}let s=r.supportsConditionalResults();t.putBoolean("ConditionalTotals",s);if(s){let n=t.putNewList("ConditionalTotalsList");let i=r.getSupportedConditionalResults();let o=i.size();for(let t=0;t<o;t++){let r=i.get(t);if(r===e.ResultStructureElement.TOTAL_INCLUDED_MEMBERS){n.addString("TotalIncludedMembers")}else if(r===e.ResultStructureElement.TOTAL_REMAINING_MEMBERS){n.addString("TotalRemainingMembers")}}}e.QInAMdQuery.exportReturnedDataSelections(t,i.getQueryManager())}}if(i.isSelectorReadModeMasterOnly()){o.putBoolean("SelectorReadModeMasterOnly",true)}};e.QInAMdQuery.exportPlanning=function(e,t){if(t.supportsDataEntryReadOnly()){e.putBoolean("SupportsDataEntryReadOnly",true)}if(t.isDataEntryEnabled()){e.putBoolean("DataEntryEnabled",true)}};e.QInAMdQuery.exportProperties=function(t,n){t.putString("Description",n.getText());let i=n.getMetadataProperties();t.putString("Type",i.getStringByKey("Type"));let r=i.getStringByKey("LastDataUpdateOn");if(e.isNull(r)){t.putString("LastDataUpdate",i.getStringByKey("LastDataUpdate"))}else{t.putString("LastDataUpdateOn",r)}t.putString("LastDataUpdateBy",i.getStringByKey("LastDataUpdateBy"));t.putString("RepositoryType",i.getStringByKey("RepositoryType"));t.putString("CreatedBy",i.getStringByKey("CreatedBy"));t.putString("CreatedOn",i.getStringByKey("CreatedOn"));t.putString("DueDate",i.getStringByKey("DueDate"));t.putStringNotNullAndNotEmpty("SemanticObject",i.getStringByKey("SemanticObject"));let o=n.getInfoProvider();e.QInAExportUtil.setNameIfNotNull(t,"BaseDataSource",o)};e.QInAMdQuery.exportReturnedDataSelections=function(t,n){if(!n.supportsReturnedDataSelection()){return}let i=t.putNewStructure("ReturnedDataSelection");let r=n.getQueryModel().getAllReturnedDataSelections();let o=r.getKeysAsIterator();while(o.hasNext()){let t=o.next();i.putBoolean(e.QInAConverter.lookupReturnedDataSelectionInA(t),r.getByKey(t).getBoolean())}};e.QInAMdQuery.exportSupportsFlags=function(e,t){if(!t.isExportingEachMeasure()){e.putBoolean("ExportingEachMeasure",false)}if(!t.isExportingFixedFilter()){e.putBoolean("ExportingFixedFilter",false)}if(!t.isExportingVariables()){e.putBoolean("ExportingVariables",false)}};e.QInAMdQuery.exportVariants=function(t,n){let i=n.getQueryManager().getVariableVariants();if(e.XCollectionUtils.hasElements(i)){let e=t.putNewList("VariableVariants");let n=i.size();for(let t=0;t<n;t++){let n=i.get(t);let r=e.addNewStructure();r.putString("Name",n.getName());r.putString("Description",n.getText());r.putString("Scope",n.getScope().getName())}}};e.QInAMdQuery.getDimensionType=function(t,n){let i=n.getIntegerByKeyExt("DimensionType",3);let r=e.QInAConverter.lookupDimensionType(i);return r};e.QInAMdQuery.importActiveVariant=function(t,n){if(e.isNull(t)){return null}let i=t.getStructureByKey("VariableVariant");if(e.isNull(i)){return null}return i.getStringByKey("Name")};e.QInAMdQuery.importDimension=function(t,n,i){let r=t.importDimension(n,i);let o=i.getDimensionManagerBase();let l=o.getDimensionByNameInternal(n.getStringByKey("Name"));if(e.isNull(l)){i.addDimension(r)}else if(i.getQueryManagerBase().getPreviousVariableProcessorState()===e.VariableProcessorState.PROCESSING_EMPTY_VARIABLE_DEFINITION){let t=e.InAQMgrMergeSettings.create(false);l.mergeDeepRecursive(t,r);e.XObjectExt.release(r);r=l}else{l.setText(r.getText());r=l}let a=i.getAxis(r.getDefaultAxisType());a.add(r);o.finalizeDimensionMetadataSetup(r)};e.QInAMdQuery.importDimensions=function(t,n,i){let r=n.getListByKey("Dimensions");if(e.notNull(r)){let o=i.supportsDimensionLazyLoad()&&(i.getServerBaseSerialization()!==null||i.getMetadata()!==null);let l=i.getDimensionManagerBase();if(o){let t=n.hasStringByKey("MetadataType")&&e.XString.isEqual(n.getStringByKey("MetadataType"),"DesignTime");l.setDimensionLazyLoader(e.InADimensionLazyLoader.createLazyLoader(i,t))}let a=r.size();for(let n=0;n<a;n++){let a=r.getStructureAt(n);let s=a.getBooleanByKeyExt("IsReference",false);if(o&&(s||t.getOriginalMode()!==e.QModelFormat.INA_CLONE)){let t=e.AxisType.lookup(a.getStringByKey("AxisDefault"));if(t!==e.AxisType.COLUMNS&&t!==e.AxisType.ROWS&&i.getDimensionByNameFromExistingMetadata(a.getStringByKey("Name"))===null){let t=e.QInAMdQuery.getDimensionType(i,a);l.addDimensionReference(a.getStringByKey("Name"),t,e.QInAMdQuery.isTechnicalDimension(a));continue}}e.QInAMdQuery.importDimension(t,a,i)}}};e.QInAMdQuery.importInAQueryNode=function(t,n,i){let r=i.getModelCapabilitiesBase();let o=n.getStructureByKey("QueryMd");if(e.isNull(o)){o=n.getStructureByKey("Query")}if(e.notNull(o)){if(r.supportsQueryCurrencyTranslation()){let t=o.getStringByKey("CurrencyTranslationEnabled");let n=i.getCurrencyTranslationManagerBase();n.setCurrencyTranslationEnabledProperty(t);if(e.XString.isEqual(t,e.CurrencyTranslationConstants.NO_CURRENCY)){n.setCurrencyTranslationDetails(null)}}i.setVirtualRootNodeName(o.getStringByKey("VirtualRootNode"));let n=o.getBooleanByKeyExt("AutoSubmitCompatible",true);if(!n){i.disableAutoSubmitCompatibility()}let l=o.getBooleanByKeyExt("DrillValidation",false);i.getDrillManagerBase().setBackendDrillValidationForAutoSubmit(l);let a=o.getStructureByKey("RRI");if(e.notNull(a)){e.QInAMdQuery.parseRriMetadata(i,a)}else{i.setHasRriTarget(o.getBooleanByKeyExt("RRIReceivers",false))}let s=o.getStructureByKey("ResultStructureFeature");let u=i.getMdResultStructureControllerBase();if(e.notNull(s)&&s.getBooleanByKeyExt("Enabled",false)){e.QInAOptions.importReturnedDataSelections(t,s,i.getQueryManager());u.setSupportsTotals(true);let n=s.getStructureByKey("ResultAlignment");let o=n.getStringByKey("ConfigLevel");let l=e.QInAConverter.lookupConfigLevel(o);r.setSupportedResultAlignmentLevel(l);let a=n.getListByKey("ResultAlignmentList");r.clearSupportedResultAlignment();let p=a.size();for(let t=0;t<p;t++){let n=e.QInAConverter.lookupAlignment(a.getStringAt(t));r.addSupportedResultAlignment(n)}if(r.getResultStructureReorderingCapability()===e.ReorderingCapability.FULL){r.addSupportedResultAlignment(e.ResultAlignment.STRUCTURE)}r.setSupportedVisibilityLocation(e.QModelLevel.DIMENSIONS);r.setSupportsConditionalResultVisibility(s.getBooleanByKeyExt("ConditionalVisibility",false));let g=s.getStringByKeyExt("Reordering","None");r.setResultStructureReorderingCapability(e.QInAConverter.lookupReordering(g));let m=s.getBooleanByKeyExt("ConditionalTotals",false);r.setSupportsConditionalResult(m);if(m){let t=s.getListByKey("ConditionalTotalsList");let n=t.size();for(let i=0;i<n;i++){let n=t.getStringAt(i);if(e.XString.isEqual(n,"TotalIncludedMembers")){r.addSupportedConditionalElement(e.ResultStructureElement.TOTAL_INCLUDED_MEMBERS)}else if(e.XString.isEqual(n,"TotalRemainingMembers")){r.addSupportedConditionalElement(e.ResultStructureElement.TOTAL_REMAINING_MEMBERS)}}}}else{u.setSupportsTotals(false);r.setSupportedResultAlignmentLevel(e.QModelLevel.NONE);r.setSupportedVisibilityLocation(e.QModelLevel.NONE);r.setSupportsConditionalResultVisibility(false);r.setResultStructureReorderingCapability(e.ReorderingCapability.NONE);r.setSupportsConditionalResult(false)}i.setSelectorReadModeMasterOnly(o.getBooleanByKeyExt("SelectorReadModeMasterOnly",false))}};e.QInAMdQuery.importPlanning=function(t,n){if(e.PrUtils.getBooleanValueProperty(t,"SupportsDataEntryReadOnly",false)){n.setSupportsDataEntryReadOnly(true)}if(e.PrUtils.getBooleanValueProperty(t,"DataEntryEnabled",false)){n.setDataEntryEnabled(true)}};e.QInAMdQuery.importProperties=function(t,n){let i=t.getStringByKey("Description");if(e.XStringUtils.isNotNullAndNotEmpty(i)){n.setText(t.getStringByKey("Description"))}let r=n.getMetadataPropertiesBase();r.putString("Type",t.getStringByKey("Type"));if(t.hasStringByKey("LastDataUpdateOn")){r.putString("LastDataUpdateOn",t.getStringByKey("LastDataUpdateOn"))}else{r.putString("LastDataUpdate",t.getStringByKey("LastDataUpdate"))}r.putString("LastDataUpdateBy",t.getStringByKey("LastDataUpdateBy"));r.putString("CreatedBy",t.getStringByKey("CreatedBy"));r.putString("CreatedOn",t.getStringByKey("CreatedOn"));r.putString("RepositoryType",t.getStringByKey("RepositoryType"));r.putString("DueDate",t.getStringByKey("DueDate"));r.putStringNotNullAndNotEmpty("SemanticObject",t.getStringByKey("SemanticObject"))};e.QInAMdQuery.importSupportsFlags=function(e,t,n){n.setExportEachMeasure(t.getBooleanByKeyExt("ExportingEachMeasure",true));n.setExportFixedFilter(t.getBooleanByKeyExt("ExportingFixedFilter",true));n.setExportVariables(t.getBooleanByKeyExt("ExportingVariables",true))};e.QInAMdQuery.importVariants=function(t,n){if(e.isNull(t)){return}let i=n.getQueryManagerBase();if(e.isNull(i)){return}let r=t.getListByKey("VariableVariants");if(e.isNull(r)){return}i.clearVariableVariants();let o=r.size();for(let t=0;t<o;t++){let o=r.getStructureAt(t);let l=e.QVariableVariant.createVariantWithScopeInternal(n.getDataSource(),o.getStringByKey("Name"),o.getStringByKey("Description"),e.Scope.lookupByName(o.getStringByKey("Scope")));i.addVariableVariant(l)}};e.QInAMdQuery.isTechnicalDimension=function(t){let n=t.getListByKey("AxisConstraints");return e.XCollectionUtils.hasElements(n)&&n.size()===1&&e.QInAConverter.lookupAxisType(n.getStringAt(0))===e.AxisType.TECHNICAL};e.QInAMdQuery.parseRriMetadata=function(t,n){let i=n.getBooleanByKeyExt("StaticReceivers",false);let r=n.getBooleanByKeyExt("DynamicReceivers",false);t.setHasStaticRriTarget(i);t.setHasDynamicRriTarget(r);t.setHasRriTarget(i||r);if(i){let i=n.getListByKey("Receivers");if(e.notNull(i)){for(let n=0;n<i.size();n++){let r=i.getStructureAt(n);if(e.isNull(r)){continue}let o=e.QRriTarget.create();o.setParameterValues(r,false);t.addStaticRriTarget(o)}}}};e.QInAMdQuery.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=t.m_mode===e.QModelFormat.INA_METADATA_RENDERING;e.QInAMdQuery.exportSupportsFlags(i,o);if(r===e.QImExFlag.DEFAULT_ALL){e.QInAMdDataSource.exportMd(t,i,o);t.exportVariableContainer(o.getVariableManager(),i);e.QInAMdQuery.exportVariants(i,o)}else if(r===e.QImExFlag.VARIABLES){t.exportVariableContainer(o.getVariableManager(),i);e.QInAMdQuery.exportVariants(i,o)}else if(r===e.QImExFlag.DATASOURCE){e.QInAMdDataSource.exportMd(t,i,o)}e.QInAMdQuery.exportProperties(i,o);if(!l){e.QInAMdQuery.exportInAQueryNode(t,i,o)}e.QInAMdQuery.exportDimensions(t,o,i);t.exportSortingManager(o.getSortingManager(),i);t.exportDrillManager(o.getDrillManager(),i);if(!l){t.exportExceptionAggregationManager(o._getExceptionAggregationManagerBase(),i);t.exportRunningAggregationManager(o.getRunningAggregationManagerBase(),i);t.exportUniversalDisplayHierarchies(o.getUniversalDisplayHierarchies(),i);e.QInAMdQuery.exportPlanning(i,o)}return i};e.QInAMdQuery.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_MODEL};e.QInAMdQuery.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;e.QInAMdDataSource.importMd(t,n,l,l);e.QInAMdDocumentsInfo.importMd(t,n,l,l);let a=t.getMode();if(a===e.QModelFormat.INA_METADATA||a===e.QModelFormat.INA_METADATA_CORE||a===e.QModelFormat.INA_METADATA_RENDERING){l.setServerBaseSerialization(a,e.QModelOrigin.IMPORTER,n)}if(e.notNull(n)){e.QInAMdQuery.importSupportsFlags(t,n,l);e.QInAMdQuery.importProperties(n,l);let i=t.getOriginalMode()!==e.QModelFormat.INA_CLONE;e.QInAMdQuery.importInAQueryNode(i,n,l);t.m_cacheKey=e.QFactory.createCacheKeyByContext(o);e.QInAMdQuery.importDimensions(t,n,l);l.getDimensionManagerBase().finalizeStructures();t.m_cacheKey=e.XObjectExt.release(t.m_cacheKey)}t.importSortingManager(n,l.getSortingManagerBase(),null);t.importVariableManager(n,l.getVariableManagerBase(),l);t.importDrillManager(n,l.getDrillManagerBase(),l);t.importExceptionAggregationManager(n,l._getExceptionAggregationManagerBase(),l);t.importRunningAggregationManager(n,l.getRunningAggregationManagerBase(),l);t.importUniversalDisplayHierarchies(n,l.getUniversalDisplayHierarchiesBase(),l);e.QInAMdQuery.importPlanning(n,l);e.QInAMdQuery.importVariants(n,l);return l};e.QInAMdQuery.prototype.newModelComponent=function(t,n,i,r){return e.QueryModel.create(n,null,e.QCapabilities.create())};e.QInAMdRunningAggregations=function(){};e.QInAMdRunningAggregations.prototype=new e.QInAComponentMetadata;e.QInAMdRunningAggregations.prototype._ff_c="QInAMdRunningAggregations";e.QInAMdRunningAggregations.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;if(e.notNull(o)){let t=i.putNewStructure("RunningAggregations");let n=t.putNewList("RunningAggregationSets");let r=o.getRunningAggregationSets();let l=r.getKeysAsReadOnlyList();for(let e=0;e<l.size();e++){let t=l.get(e);n.add(this.exportRunAggrSet(t,r.getByKey(t)))}let a=t.putNewList("MeasuresSupportedRunningAggregationSet");e.XStream.of(o.getMeasuresSupportedRunningAggregationSet()).forEach(e=>{a.add(this.exportMeasuresSupportedRunAggrSet(e.getName(),e.getRunningAggregationSet(),e.getMeasures()))})}return i};e.QInAMdRunningAggregations.prototype.exportMeasuresSupportedRunAggrSet=function(t,n,i){let r=e.PrFactory.createStructure();r.putString("Name",t);r.putString("RunningAggregationSet",n);let o=r.putNewList("Measures");for(let t=0;t<i.size();t++){o.add(e.PrFactory.createString(i.get(t)))}return r};e.QInAMdRunningAggregations.prototype.exportRunAggrSet=function(t,n){let i=e.PrFactory.createStructure();i.putString("Name",t);let r=i.putNewList("RunningAggregationSet");for(let t=0;t<n.size();t++){r.add(e.PrFactory.createString(e.QInAConverter.lookupRunningAggregationOperatorInA(n.get(t))))}return i};e.QInAMdRunningAggregations.prototype.getComponentType=function(){return e.OlapComponentType.RUNNING_AGGREGATION_MANAGER};e.QInAMdRunningAggregations.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;if(e.notNull(n)&&e.notNull(l)){l.clear();let t=n.getStructureByKey("RunningAggregations");if(e.notNull(t)){let n=t.getListByKey("RunningAggregationSets");if(!e.PrUtils.isListEmpty(n)){for(let e=0;e<n.size();e++){this.importRunAggrSet(l,n.getStructureAt(e))}}let i=t.getListByKey("MeasuresSupportedRunningAggregationSet");if(!e.PrUtils.isListEmpty(i)){for(let e=0;e<i.size();e++){this.importMeasureSupportedRunAggrSet(l,i.getStructureAt(e))}}}}return l};e.QInAMdRunningAggregations.prototype.importMeasureSupportedRunAggrSet=function(t,n){let i=n.getStringByKey("Name");let r=n.getStringByKey("RunningAggregationSet");let o=e.PrUtils.asListOfString(n.getListByKey("Measures"));let l=e.QMeasuresSupportedRunningAggregationSet.create(t,i,r,o);t.addMeasuresSupportedRunAggrSet(l)};e.QInAMdRunningAggregations.prototype.importRunAggrSet=function(t,n){let i=e.XStream.ofString(e.PrUtils.asListOfString(n.getListByKey("RunningAggregationSet"))).map(t=>e.QInAConverter.lookupRunningAggregationOperator(t.getString())).collect(e.XStreamCollector.toList());t.addRunningAggregationSet(n.getStringByKey("Name"),i)};e.QInAMdSort=function(){};e.QInAMdSort.prototype=new e.QInAComponentMetadata;e.QInAMdSort.prototype._ff_c="QInAMdSort";e.QInAMdSort.prototype.exportComponentWithStructure=function(t,n,i,r){if(t.m_capabilities.supportsExtendedSort()){let t=n;let r=t.getQueryModel().getModelCapabilities();let o=i.putNewList("ExtendedSortTypes");let l=e.SortType.getAllSortTypes();let a=l.size();for(let t=0;t<a;t++){let n=l.get(t);if(r.supportsSortType(n)){o.addString(e.QInAConverter.lookupSortTypeInA(n))}}let s=i.putNewList("SortTypesBreakGrouping");for(let t=0;t<a;t++){let n=l.get(t);if(r.supportsBreakGrouping(n)){s.addString(e.QInAConverter.lookupSortTypeInA(n))}}}return i};e.QInAMdSort.prototype.getComponentType=function(){return e.OlapComponentType.SORT_MANAGER};e.QInAMdSort.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;if(t.m_capabilities.supportsExtendedSort()&&e.notNull(n)){let i=n.getListByKey("ExtendedSortTypes");if(e.notNull(i)){l.clearSupportedSortType();let n=i.size();for(let r=0;r<n;r++){let n=i.getStringAt(r);let o=e.QInAConverter.lookupSortType(n);if(e.isNull(o)){t.addWarning(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate2("Sort type unknown: ",n))}else{l.addSupportedSortType(o)}}}let r=n.getListByKey("SortTypesBreakGrouping");if(e.notNull(r)){let t=r.size();for(let n=0;n<t;n++){let t=e.QInAConverter.lookupSortType(r.getStringAt(n));l.addSupportedBreakGrouping(t)}}}return l};e.QInAMdUniversalDisplayHierarchies=function(){};e.QInAMdUniversalDisplayHierarchies.prototype=new e.QInAComponentMetadata;e.QInAMdUniversalDisplayHierarchies.prototype._ff_c="QInAMdUniversalDisplayHierarchies";e.QInAMdUniversalDisplayHierarchies.assignAxesToHierarchies=function(t){let n=t.getQueryModel();let i=t.getHierarchies();let r=e.XList.create();let o=i.size();for(let t=0;t<o;t++){let o=i.get(t);if(o.getHierarchyDedicatedAxis()!==null){r.add(o.getHierarchyDedicatedAxis().getType());continue}let l=e.QInAMdUniversalDisplayHierarchies.getAxisForDimensionList(o.getDimensionNames(),n);if(e.notNull(l)&&!r.contains(l.getType())){o.setAxis(l);r.add(l.getType())}}for(let t=0;t<o;t++){let o=i.get(t);if(o.getHierarchyDedicatedAxis()===null){o.setAxis(r.contains(e.AxisType.ROWS)?n.getColumnsAxis():n.getRowsAxis())}}};e.QInAMdUniversalDisplayHierarchies.getAxisForDimensionList=function(t,n){if(e.notNull(t)){for(let i=0;i<t.size();i++){let r=n.getDimensionByNameFromExistingMetadata(t.get(i));if(e.notNull(r)){let t=r.getAxisType();if(t===e.AxisType.ROWS||t===e.AxisType.COLUMNS){return r.getAxis()}}}}return null};e.QInAMdUniversalDisplayHierarchies.importHierarchy=function(t,n){let i=n.getListByKey("DimensionNames");let r=e.PrUtils.asListOfString(i);let o=n.getStringByKey("Name");let l=n.getIntegerByKey("InitialDrillLevel");let a=e.QInAConverter.lookupLowerLevelNodeAlignment(n.getStringByKey("LowerLevelNodeAlignment"));let s=n.getBooleanByKeyExt("Active",false);let u=n.getBooleanByKeyExt("CustomDimensions",false);let p=n.getListByKey("Attributes");let g=null;let m=e.XCollectionUtils.size(p);for(let t=0;t<m;t++){let n=p.getStructureAt(t);if(e.XString.isEqual(n.getStringByKey("PresentationType"),"UDHKey")){g=n.getStringByKey("Name")}}t.addHierarchy(o,r,l,a,s,null,u,g,false)};e.QInAMdUniversalDisplayHierarchies.importUdhDimension=function(t,n,i){if(!n.getDimensionNames().contains(i)){let r=e.PrFactory.createStructure();r.putString("Name",i);r.putString("AxisDefault","Virtual");let o=r.putNewList("AxisConstraints");o.addString("Virtual");e.QInAMdQuery.importDimension(t,r,n)}};e.QInAMdUniversalDisplayHierarchies.prototype.exportComponentWithStructure=function(e,t,n,i){return n};e.QInAMdUniversalDisplayHierarchies.prototype.getComponentType=function(){return e.OlapComponentType.UNIVERSAL_DISPLAY_HIERARCHIES};e.QInAMdUniversalDisplayHierarchies.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;if(e.notNull(n)&&t.m_capabilities.supportsUniversalDisplayHierarchies()){let i=n.getStructureByKey("UniversalDisplayHierarchies");if(e.notNull(i)){let n=i.getListByKey("DefinedHierarchies");let r=n.size();let o=l.getQueryModel();for(let i=0;i<r;i++){let r=n.getStructureAt(i);e.QInAMdUniversalDisplayHierarchies.importHierarchy(l,r);e.QInAMdUniversalDisplayHierarchies.importUdhDimension(t,o,r.getStringByKey("Name"))}}}e.QInAMdUniversalDisplayHierarchies.assignAxesToHierarchies(l);return l};e.QInAMdUniversalDisplayHierarchies.prototype.newModelComponent=function(t,n,i,r){return e.QFactory.createUniversalDisplayHierarchies(r)};e.QInAMdVarDimMember=function(){};e.QInAMdVarDimMember.prototype=new e.QInAComponentMetadata;e.QInAMdVarDimMember.prototype._ff_c="QInAMdVarDimMember";e.QInAMdVarDimMember.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;i.putString("VariableType","DimensionMemberVariable");let l=o.getVariableType();if(l===e.VariableType.HIERARCHY_NAME_VARIABLE){i.putString("SemanticType","HierarchyNameVariable")}else if(l===e.VariableType.HIERARCHY_NODE_VARIABLE){i.putString("SemanticType","HierarchyNodeVariable")}else{i.putString("SemanticType","DimensionMemberVariable")}e.QInAMdVarMisc.exportMd(t,o,i);i.putBoolean("SupportsValueHelp",o.supportsValueHelp());i.putBoolean("HasFunctionalVariables",o.hasFunctionalValues());if(o.getDimension()!==null){let e=i.putNewStructure("DimensionReference");e.putString("Name",o.getDimension().getName())}e.QInAMdVarSelectionCap.exportMd(t,i,o);e.QInAMdVarHierInfo.exportMd(i,o);i.putBoolean("UsedInFixedFilter",o.isUsedInFixedFilter());i.putBoolean("UsedInDynamicFilter",o.isUsedInDynamicFilter());let a=o.getDefaultMemberFilter();if(e.notNull(a)&&a.hasElements()){let n=t.m_mode;t.m_mode=e.QModelFormat.INA_DATA;let r=i.putNewStructure("Values");let o=r.putNewStructure("Selection");t.exportCartesianList(a,o);t.m_mode=n}let s=o.getRuntimeReferences();if(e.notNull(s)){let e=s.size();if(e>0){let t=i.putNewList("RuntimeReferences");for(let n=0;n<e;n++){t.addString(s.get(n))}}}return i};e.QInAMdVarDimMember.prototype.getComponentType=function(){return e.VariableType.DIMENSION_MEMBER_VARIABLE};e.QInAMdVarDimMember.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=o;let a=e.VariableType.DIMENSION_MEMBER_VARIABLE;if(n.containsKey("isHierarchical")){if(n.getBooleanByKeyExt("isHierarchical",false)){a=e.VariableType.HIERARCHY_NODE_VARIABLE}}else{let t=e.PrUtils.getStringValueProperty(n,"SemanticType",null);if(e.notNull(t)){if(e.XString.isEqual(t,"HierarchyNodeVariable")){a=e.VariableType.HIERARCHY_NODE_VARIABLE}else if(e.XString.isEqual(t,"HierarchyNameVariable")){a=e.VariableType.HIERARCHY_NAME_VARIABLE}}}let s;let u=n.getStringByKey("Name");let p=l.getVariables();if(p.containsKey(u)){s=p.getByKey(u)}else{if(a===e.VariableType.HIERARCHY_NODE_VARIABLE){s=e.QHierarchyNodeVariable.createHierarchyNodeVariable(o,l,u,null)}else if(a===e.VariableType.HIERARCHY_NAME_VARIABLE){s=e.QHierarchyNameVariable.createDimensionHierarchyVariable(o,l,u,null)}else{s=e.QDimensionMemberVariable.createDimensionMemberVariable(o,l,u,null)}}e.QInAMdVarMisc.importMd(n,s);s.setSupportsValueHelp(n.getBooleanByKeyExt("SupportsValueHelp",true));s.setHasFunctionalValues(n.getBooleanByKeyExt("HasFunctionalVariables",false));let g=null;let m=e.PrUtils.getStructureProperty(n,"DimensionReference");if(e.notNull(m)){let t=m.getStringByKey("Name");if(e.notNull(t)){let n=l.getDimensionAccessor();if(e.notNull(n)){g=n.getDimensionByNameFromExistingMetadata(t)}}}if(e.isNull(g)){let n=l.getQueryModel()!==null&&l.getQueryModel().isPartialResponse();if(!n){let n=e.XStringUtils.concatenate3("Error in importing Variables: No dimension specified for variable ",u," !");if(s.isInputEnabled()){t.addError(e.ErrorCodes.INVALID_STATE,n);return null}t.addInfo(e.ErrorCodes.IMPORT_VARIABE_NO_DIMENSION,n)}}else{s.setDimension(g)}e.QInAMdVarSelectionCap.importMd(t,n,s,o);let c=n.getListByKey("RuntimeReferences");if(e.notNull(c)&&c.size()>0){let e=c.size();for(let t=0;t<e;t++){s.addRuntimeReferences(c.getStringAt(t))}}e.QInAMdVarHierInfo.importMd(t,n,s,o);s.setIsUsedInFixedFilter(n.getBooleanByKeyExt("UsedInFixedFilter",false));s.setIsUsedInDynamicFilter(n.getBooleanByKeyExt("UsedInDynamicFilter",false));let y=s.getQueryModel();let d=null;if(e.notNull(y)){d=y.getQueryManager()}let A=n.getStructureByKey("Values");if(e.notNull(A)&&e.notNull(d)&&d.getLifeCycleState()===e.LifeCycleState.STARTING_UP&&(s.isInputEnabled()||d.getQueryServiceConfig().shouldLoadInputDisabledVariableValues())){let n=e.QFactory.createFilterExpression(o,s);let i=t.m_mode;t.m_mode=e.QModelFormat.INA_DATA;let r=t.importFilterExpression(n,A,s,o);t.m_mode=i;let l=r.getCartesianProduct();if(e.notNull(l)){let t=l.getCartesianList(s.getDimension());if(e.notNull(t)){s.setDefaultMemberFilter(t.cloneOlapComponent(s,null))}}}return s};e.QInAMdVarFunctional=function(){};e.QInAMdVarFunctional.prototype=new e.QInAComponentMetadata;e.QInAMdVarFunctional.prototype._ff_c="QInAMdVarFunctional";e.QInAMdVarFunctional.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;i.putString("VariableType","FunctionalVariable");i.putString("Name",o.getName());i.putString("NameExternal",o.getNameExternal());if(o.getDimension()!==null){let n=i.putNewStructure("DimensionReference");n.putString("Name",o.getDimension().getName());e.QInAMdVarMisc.exportMd(t,o,i);i.putBoolean("UserInput",o.isUserInputRequired());i.putBoolean("MultipleValues",o.resultsInMultipleValues());i.putString("ReturnType",o.isInterval()?"Interval":"Single");let r=o.getGranularity();if(r!==0){i.putString("Granularity",e.XInteger.convertToString(r))}let l=o.getParameters();if(e.XCollectionUtils.contains(l,t=>t.getParameterType()===e.FunctionalVariableParameterType.DEFAULT)){let t=i.putNewList("Parameters");e.XCollectionUtils.forEach(l,n=>{let i=t.addNewStructure();i.putStringNotNullAndNotEmpty("Name",n.getName());i.putStringNotNullAndNotEmpty("Description",n.getText());let r=n.getParameterValues();if(e.XCollectionUtils.hasElements(r)){let t=i.putNewList("ParameterValues");e.XCollectionUtils.forEach(r,e=>{let n=t.addNewStructure();n.putString("Name",e.getName());n.putStringNotNullAndNotEmpty("Description",e.getText())})}})}if(o.hasResolvedValues()){let t=i.putNewList("ResolvedValues");let n=o.getAllResolvedValues();e.XCollectionUtils.forEach(n,n=>{let i=t.addNewStructure();let r=n.getParameterValues();if(e.notNull(r)&&!r.isEmpty()){let t=i.putNewList("Parameters");e.XCollectionUtils.forEach(r.getKeysAsReadOnlyList(),e=>{let n=t.addNewStructure();n.putString("Param",e);n.putString("Value",r.getByKey(e))})}let o=i.putNewList("Elements");e.XCollectionUtils.forEach(n.getResolvedValues(),t=>{let n=o.addNewStructure();n.putString("Comparison",t.getComparisonOperator().getName());if(t.getSetSign()===e.SetSign.EXCLUDING){n.putBoolean("IsExcluding",true)}n.putString("Low",t.getLow().getString());if(t.getHigh()!==null){n.putStringNotNullAndNotEmpty("High",t.getHigh().getString())}})})}}return i};e.QInAMdVarFunctional.prototype.getComponentType=function(){return e.VariableType.FUNCTIONAL_VARIABLE};e.QInAMdVarFunctional.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=o;let a=null;if(n.containsKey("DimensionReference")&&l.getDimensionAccessor()!==null){let t=n.getByKey("DimensionReference");let i=t.isString()?t.asString().getString():t.isStructure()?t.asStructure().getStringByKey("Name"):null;if(e.notNull(i)){a=l.getDimensionAccessor().getDimensionByNameFromExistingMetadata(i)}}if(e.isNull(a)){return null}let s=l.getVariables();let u=n.getStringByKey("Name");let p;if(s.containsKey(u)){p=s.getByKey(u)}else{p=e.QFunctionalVariable.createFunctionalVariable(o,l,u,n.getStringByKey("Description"))}p.setNameExternal(n.getStringByKey("NameExternal"));p.setDimension(a);e.QInAMdVarMisc.importMd(n,p);p.setUserInputRequired(n.getBooleanByKey("UserInput"));p.setResultsInMultipleValues(n.getBooleanByKey("MultipleValues"));p.setIsInterval(e.XString.isEqual(n.getStringByKey("ReturnType"),"Interval"));let g=e.XInteger.convertFromString(n.getStringByKeyExt("Granularity","0"));p.setFiscal(g!==0);p.setGranularity(g);if(g===1||g===2||g===3||g===4||g===5){let t=e.XList.create();t.add(e.QFunctionalVariableParameter.createParameter("Shift",null,e.FunctionalVariableParameterType.SHIFT,null,p));t.add(e.QFunctionalVariableParameter.createParameter("ValidDate",null,e.FunctionalVariableParameterType.VALID_DATE,null,p));t.add(e.QFunctionalVariableParameter.createParameter("YearOffset",null,e.FunctionalVariableParameterType.YEAR_OFFSET,null,p));p.setParameters(t)}else{let t=e.XStream.of(n.getListByKey("Parameters")).map(t=>{let n=t.asStructure();let i=n.getStringByKey("Name");let r=n.getStringByKey("Description");let o=e.XStream.of(n.getListByKey("ParameterValues")).map(t=>{let n=t.asStructure();let i=n.getStringByKey("Name");let r=n.getStringByKey("Description");return e.XStringUtils.isNotNullAndNotEmpty(i)?e.XNameTextObject.create(i,r):null}).filterNullValues().collect(e.XStreamCollector.toList());return e.QFunctionalVariableParameter.createParameter(i,r,e.FunctionalVariableParameterType.DEFAULT,o,p)}).collect(e.XStreamCollector.toList());p.setParameters(t)}if(n.containsKey("ResolvedValues")){let t=n.getListByKey("ResolvedValues");let i=t.size();for(let n=0;n<i;n++){let i=t.getStructureAt(n);let r=e.XHashMapByString.create();let o=i.getListByKey("Parameters");if(e.notNull(o)&&!o.isEmpty()){let t=o.size();for(let n=0;n<t;n++){let t=o.getStructureAt(n);if(e.notNull(t)){let n=t.getStringByKey("Param");let i=t.getStringByKey("Value");if(e.XStringUtils.isNotNullAndNotEmpty(n)&&e.XStringUtils.isNotNullAndNotEmpty(i)){r.put(n,i)}}}}let l=e.XStream.of(i.getListByKey("Elements")).map(t=>{let n=t.asStructure();let i=e.QInAConverter.lookupComparison(n.getStringByKeyExt("Comparison","="));let r=e.QFactory.createFilterOperationWithOperator(p,null,i);if(n.getBooleanByKeyExt("IsExcluding",false)){r.setSetSign(e.SetSign.EXCLUDING)}else{r.setSetSign(e.SetSign.INCLUDING)}let o=p.getDimension().getFlatKeyField().getValueType();r.getLow().setValue(e.XValueUtil.getValueFromString(n.getStringByKey("Low"),o));let l=n.getStringByKey("High");if(e.XStringUtils.isNotNullAndNotEmpty(l)){r.getHigh().setValue(e.XValueUtil.getValueFromString(l,o))}return r}).collect(e.XStreamCollector.toList());let a=e.QFunctionalVariableResolvedValue.createResolvedValue(p.getName(),l,r);p.addResolvedValue(a)}}return p};e.QInAMdVarHierInfo=function(){};e.QInAMdVarHierInfo.prototype=new e.QInAComponentMetadata;e.QInAMdVarHierInfo.prototype._ff_c="QInAMdVarHierInfo";e.QInAMdVarHierInfo.exportMd=function(t,n){let i=t.putNewStructure("Hierarchy");i.putStringNotNull("BaseDimension",n.getHierarchyBaseDimension());i.putStringNotNull("Name",n.getHierarchyName());i.putStringNotNull("Version",n.getHierarchyVersion());i.putStringNotNull("DueDate",n.getHierarchyKeyDate());let r=n.getVariableType();if(r===e.VariableType.HIERARCHY_NAME_VARIABLE){let i=n.getHierarchyNameDimension();e.QInAExportUtil.setNameIfNotNull(t,"HierarchyBaseDimension",i)}};e.QInAMdVarHierInfo.importMd=function(t,n,i,r){i.setHierarchyName(null);i.setHierarchyVersion(null);i.setHierarchyKeyDate(null);i.setHierarchyBaseDimension(null);let o=e.PrUtils.getStructureProperty(n,"Hierarchy");if(e.notNull(o)){i.setHierarchyBaseDimension(o.getStringByKey("BaseDimension"));i.setHierarchyName(o.getStringByKey("Name"));i.setHierarchyVersion(o.getStringByKey("Version"));let t=o.getStringByKey("DueDate");if(e.isNull(t)){t=o.getStringByKey("DateTo")}i.setHierarchyKeyDate(t)}let l=i.getName();let a=i.getVariableType();let s=i.getVariableContext();let u=s.getDimensionAccessor();let p=s.getQueryManager();if(e.notNull(p)&&p.getModelCapabilities().supportsAutoVariableSubmit()){let t=i.getRuntimeReferences();for(let n=0;n<t.size();n++){let r=u.getDimensionByName(t.get(n));if(e.isNull(r)){continue}if(e.XString.isEqual(l,r.getHierarchyNameVariableName())||e.XString.isEqual(l,r.getHierarchyDueDateVariableName())||e.XString.isEqual(l,r.getHierarchyVersionVariableName())){i.setIsHierarchyInfoVariable(true)}}}if(a===e.VariableType.HIERARCHY_NAME_VARIABLE){let t=i;let r=n.getStringByKey("HierarchyBaseDimension");if(e.isNull(r)){r=n.getStringByKey("HierachyBaseDimension")}if(e.notNull(r)){let e=u.getDimensionByNameFromExistingMetadata(r);t.setHierarchyNameDimension(e)}}else if(a===e.VariableType.HIERARCHY_NODE_VARIABLE){let n=s.getVariableMode();if(n===e.VariableMode.DIRECT_VALUE_TRANSFER){let n=i.getHierarchyName();let o=i.getDimension();if(e.notNull(n)&&e.notNull(o)){let l=e.QHierarchy.create(r,o,n);let a=i.getHierarchyVersion();l.setHierarchyVersion(a);let s=i.getHierarchyKeyDate();if(!e.XString.isEqual(s,"")){let n=e.XDate.createDateFromStringWithFlag(s,t.m_capabilities.supportsSapDate());if(e.notNull(n)){l.setHierarchyDueDate(n)}o.setHierarchy(l)}}}}};e.QInAMdVarHierInfo.prototype.exportComponentWithStructure=function(t,n,i,r){e.QInAMdVarHierInfo.exportMd(i,n);return i};e.QInAMdVarHierInfo.prototype.getComponentType=function(){return null};e.QInAMdVarHierInfo.prototype.importComponentWithStructure=function(t,n,i,r,o){e.QInAMdVarHierInfo.importMd(t,n,i,o);return i};e.QInAMdVarMisc=function(){};e.QInAMdVarMisc.prototype=new e.QInAComponentMetadata;e.QInAMdVarMisc.prototype._ff_c="QInAMdVarMisc";e.QInAMdVarMisc.exportMd=function(t,n,i){i.putString("Name",n.getName());i.putString("Description",n.getText());i.putBoolean("InputEnabled",n.isInputEnabled());i.putString("NameExternal",n.getNameExternal());i.putBoolean("CustomVariable",n.isCustomVariable());i.putStringNotNull("ProcessingType",e.QInAConverter.lookupProcessingTypeIna(n.getProcessingType()));if(n.isDynamicVariable()){i.putBoolean("IsDynamicValue",n.isDynamicVariable())}if(n.isMandatory()){if(n.isInitialValueAllowed()){i.putString("InputType","Mandatory")}else{i.putString("InputType","MandatoryNotInitial")}}else{if(n.isInitialValueAllowed()){i.putString("InputType","Optional")}else{t.addError(e.ErrorCodes.INVALID_STATE,"illegal combination: optional variables must support initial values")}}i.putInteger("ScreenOrder",n.getVariableOrder());let r=n.getDependentVariablesNames();if(e.XCollectionUtils.hasElements(r)){let e=i.putNewList("DependentOfVariable");e.addAllStrings(r)}let o=n;if(o.isInputEnabledAndExitProvidedInMd()){i.putBoolean("IsInputEnabledAndExit",n.isEnforcedDynamicValue())}if(n.isRRIAffectedComponent()){i.putBoolean("IsRRI",true)}};e.QInAMdVarMisc.importMd=function(t,n){if(e.notNull(n)){n.setText(t.getStringByKey("Description"));let i=t.getBooleanByKeyExt("InputEnabled",false);n.setInputEnabled(i);n.setNameExternal(t.getStringByKey("NameExternal"));n.setCustomVariable(t.getBooleanByKey("CustomVariable"));n.setProcessingType(e.QInAConverter.lookupProcessingType(t.getStringByKey("ProcessingType")));let r=t.getStringByKeyExt("InputType","Optional");if(e.XString.isEqual(r,"Optional")){n.setMandatory(false);n.setInitialValueAllowed(true)}else if(e.XString.isEqual(r,"Mandatory")){n.setMandatory(true);n.setInitialValueAllowed(true)}else if(e.XString.isEqual(r,"MandatoryNotInitial")){n.setMandatory(true);n.setInitialValueAllowed(false)}n.setIsDynamicVariable(t.getBooleanByKeyExt("IsDynamicValue",false));let o=t.getIntegerByKeyExt("ScreenOrder",0);n.setVariableOrder(o);let l=t.getListByKey("DependentOfVariable");if(!e.PrUtils.isListEmpty(l)){let e=l.size();for(let t=0;t<e;t++){n.addDependentVariableName(l.getStringAt(t))}}if(t.containsKey("IsInputEnabledAndExit")){n.setIsInputEnabledAndExit(t.getBooleanByKey("IsInputEnabledAndExit"))}n.setRRIAffectedComponent(t.getBooleanByKeyExt("IsRRI",false))}};e.QInAMdVarMisc.prototype.exportComponentWithStructure=function(t,n,i,r){e.QInAMdVarMisc.exportMd(t,n,i);return i};e.QInAMdVarMisc.prototype.getComponentType=function(){return null};e.QInAMdVarMisc.prototype.importComponentWithStructure=e.noSupport;e.QInAMdVarOptionList=function(){};e.QInAMdVarOptionList.prototype=new e.QInAComponentMetadata;e.QInAMdVarOptionList.prototype._ff_c="QInAMdVarOptionList";e.QInAMdVarOptionList.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;i.putString("VariableType","OptionListVariable");let l=o.getVariableType();if(l===e.VariableType.HIERARCHY_VARIABLE){i.putString("SemanticType","HierarchyVariable")}else{i.putString("SemanticType","OptionListVariable")}e.QInAMdVarMisc.exportMd(t,o,i);i.putBoolean("MultipleValues",o.supportsMultipleValues());let a=o.getOptions();let s=i.putNewList("Options");let u=a.size();for(let e=0;e<u;e++){let t=a.get(e);let n=s.addNewStructure();n.putString("Name",t.getName());n.putString("Description",t.getText())}return i};e.QInAMdVarOptionList.prototype.getComponentType=function(){return e.VariableType.OPTION_LIST_VARIABLE};e.QInAMdVarOptionList.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=o.getVariableContainer();let a=n.getStringByKey("Name");let s=l.getVariables();let u;if(s.containsKey(a)){let e=s.getByKey(a);u=e}else{let t=e.PrUtils.getStringValueProperty(n,"SemanticType",null);let i=n.getBooleanByKeyExt("MultipleValues",false);if(e.XString.isEqual("HierarchyVariable",t)){u=e.QSimpleTypeVariable.createHierarchyVariable(o,l,a,null,i)}else{u=e.QSimpleTypeVariable.createOptionListVariable(o,l,a,null,i)}}e.QInAMdVarMisc.importMd(n,u);u.clearOptions();let p=n.getListByKey("Options");if(!e.PrUtils.isListEmpty(p)){let e=p.size();for(let t=0;t<e;t++){let e=p.getStructureAt(t);let n=e.getStringByKey("Name");let i=e.getStringByKey("Description");u.createAndAddOption(n,i)}}return u};e.QInAMdVarSelectionCap=function(){};e.QInAMdVarSelectionCap.prototype=new e.QInAComponentMetadata;e.QInAMdVarSelectionCap.prototype._ff_c="QInAMdVarSelectionCap";e.QInAMdVarSelectionCap.exportMd=function(t,n,i){let r=i.getFilterCapability();e.QInAMdFilterCapability.exportMd(t,r,n,i.getQueryModel());let o=i.getFilterCapabilities();if(e.notNull(o)){n.putBoolean("MultipleValues",o.supportsMultipleValues())}};e.QInAMdVarSelectionCap.importMd=function(t,n,i,r){let o=null;let l=i.getDimension();if(e.notNull(l)){let t=n.getStructureByKey("Values");if(e.notNull(t)){let n=t.getStructureByKey("Selection");if(e.notNull(n)){let t=n.getStructureByKey("SetOperand");if(e.notNull(t)){o=l.getFieldByName(t.getStringByKey("FieldName"))}}}}let a=e.QInAMdFilterCapability.importMd(t,n,o,i,r);if(e.notNull(a)&&t.isAbap(i)&&t.getSession().hasFeature(e.FeatureToggleOlap.SINGLE_VALUE_VARIABLES_ONLY_INCLUDE)){if(a.getGroup()===e.QSetSignComparisonOperatorGroup.SINGLE_VALUE){a.setGroup(e.QSetSignComparisonOperatorGroup.SINGLE_VALUE_INCLUDE_ONLY)}}i.setFilterCapability(a);let s=e.QFilterCapabilityList.createFilterCapabilitiesForVariable(r,i);i.setFilterCapabilities(s);let u=e.PrUtils.getBooleanValueProperty(n,"MultipleValues",false);s.setSupportsMultipleValues(u);e.QInAMdVarSelectionCap.mergeCapabilities(l,a,s)};e.QInAMdVarSelectionCap.mergeCapabilities=function(t,n,i){if(e.notNull(t)&&e.notNull(n)){let r=t.getFilterCapabilities();let o=r.getSelectableFieldNames();let l=o.size();for(let t=0;t<l;t++){let l=o.get(t);let a=r.getFilterCapabilitiesByFieldName(l);if(a.supportsSetSign(e.SetSign.INCLUDING)){let t=i.createAndAddFilterCapabilitiesForFieldName(l);e.QInAMdVarSelectionCap.mergeOperators(e.SetSign.INCLUDING,t,a,n);if(a.supportsSetSign(e.SetSign.EXCLUDING)){e.QInAMdVarSelectionCap.mergeOperators(e.SetSign.EXCLUDING,t,a,n)}}}}};e.QInAMdVarSelectionCap.mergeOperators=function(t,n,i,r){if(e.notNull(r)){if(r.supportsSetSign(t)){n.addSupportedSetSign(t);let e=n.getModifiableSupportedComparisonOperators(t);let o=i.getSupportedComparisonOperators(t);let l=r.getSupportedComparisonOperators(t);let a=l.size();for(let t=0;t<a;t++){let n=l.get(t);if(o.contains(n)){e.add(n)}}}}};e.QInAMdVarSelectionCap.prototype.exportComponent=function(t,n,i,r){return this.exportComponentWithStructure(t,n,e.isNull(i)?e.PrFactory.createStructure():i,r)};e.QInAMdVarSelectionCap.prototype.exportComponentWithStructure=function(t,n,i,r){e.QInAMdVarSelectionCap.exportMd(t,i,n);return i};e.QInAMdVarSelectionCap.prototype.getComponentType=function(){return null};e.QInAMdVarSelectionCap.prototype.importComponentWithStructure=function(t,n,i,r,o){e.QInAMdVarSelectionCap.importMd(t,n,i,o);return i};e.QInAMdVarSimpleType=function(){};e.QInAMdVarSimpleType.prototype=new e.QInAComponentMetadata;e.QInAMdVarSimpleType.prototype._ff_c="QInAMdVarSimpleType";e.QInAMdVarSimpleType.exportMd=function(t,n,i){i.putString("VariableType","SimpleTypeVariable");let r=n.getVariableType();if(r===e.VariableType.FORMULA_VARIABLE){i.putString("SemanticType","FormulaVariable")}else if(r===e.VariableType.TEXT_VARIABLE){i.putString("SemanticType","TextVariable")}else{i.putString("SemanticType","ValueVariable");let t=n.getValueType();i.putString("ValueType",e.QInAConverter.lookupValueTypeInA(t))}e.QInAMdVarMisc.exportMd(t,n,i);i.putInteger("Scale",n.getValueScale());i.putInteger("Length",n.getValueLength());i.putBoolean("MultipleValues",n.supportsMultipleValues());return i};e.QInAMdVarSimpleType.prototype.exportComponentWithStructure=function(t,n,i,r){return e.QInAMdVarSimpleType.exportMd(t,n,i)};e.QInAMdVarSimpleType.prototype.getComponentType=function(){return e.VariableType.SIMPLE_TYPE_VARIABLE};e.QInAMdVarSimpleType.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=o;let a=null;let s=e.PrUtils.getStringValueProperty(n,"Name",null);if(e.notNull(s)){let i=l.getVariables();if(i.containsKey(s)){a=i.getByKey(s)}else{let t=e.PrUtils.getStringValueProperty(n,"SemanticType",null);let i=n.getBooleanByKeyExt("MultipleValues",false);if(e.XString.isEqual("FormulaVariable",t)){a=e.QSimpleTypeVariable.createFormulaVariable(o,l,s,null,i)}else if(e.XString.isEqual("TextVariable",t)){a=e.QSimpleTypeVariable.createTextVariable(o,l,s,null,i)}else{let t=e.PrUtils.getStringValueProperty(n,"ValueType",null);let r=e.QInAConverter.lookupValueType(t);a=e.QSimpleTypeVariable.createSimpleTypeVariable(o,l,r,s,null,i)}}e.QInAMdVarMisc.importMd(n,a);let r=n.getIntegerByKeyExt("Scale",-1);if(r!==-1){a.setValueScale(r)}let u=n.getIntegerByKeyExt("Length",-1);if(u!==-1){a.setValueLength(u)}let p=n.getListByKey("SimpleNumericValues");if(e.isNull(p)){p=n.getListByKey("SimpleStringValues")}let g=e.QInAValueUtils.importValueList(t,p,a.getValueType());if(a.supportsMultipleValues()||g.size()<=1){a.setDefaultValues(g)}}return a};e.QInAMdVariable=function(){};e.QInAMdVariable.prototype=new e.QInAComponentMetadata;e.QInAMdVariable.prototype._ff_c="QInAMdVariable";e.QInAMdVariable.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=o.getVariableType();if(l.isTypeOf(e.VariableType.DIMENSION_MEMBER_VARIABLE)){return t.exportDimensionMemberVariable(o,i)}else if(l.isTypeOf(e.VariableType.SIMPLE_TYPE_VARIABLE)){e.QInAMdVarSimpleType.exportMd(t,o,i)}else if(l.isTypeOf(e.VariableType.OPTION_LIST_VARIABLE)){t.exportOptionListVariable(o,i)}else{t.addError(0,e.XStringUtils.concatenate2("Variable type not supported: ",l.getName()))}return i};e.QInAMdVariable.prototype.getComponentType=function(){return e.VariableType.ANY_VARIABLE};e.QInAMdVariable.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=r;let a=e.PrUtils.getStringValueProperty(n,"VariableType",null);let s;if(e.XString.isEqual("DimensionMemberVariable",a)){s=t.importDimensionMemberVariable(n,null,l)}else if(e.XString.isEqual("OptionListVariable",a)){s=t.importOptionListVariable(n,null,l)}else if(e.XString.isEqual("SimpleTypeVariable",a)){s=t.importSimpleTypeVariable(n,null,l)}else if(e.XString.isEqual("FunctionalVariable",a)){s=t.importFunctionalVariable(n,null,l)}else{t.addError(0,e.XStringUtils.concatenate2("Variable type not supported: ",a));return null}return s};e.QInAMdVariableContainer=function(){};e.QInAMdVariableContainer.prototype=new e.QInAComponentMetadata;e.QInAMdVariableContainer.prototype._ff_c="QInAMdVariableContainer";e.QInAMdVariableContainer.resolveVariableDependencies=function(e){let t=e.getVariables();let n=t.size();for(let e=0;e<n;e++){let n=t.get(e);let i=n.getDependentVariablesNames();let r=i.size();for(let e=0;e<r;e++){let r=t.getByKey(i.get(e));n.addDependentVariable(r)}}};e.QInAMdVariableContainer.prototype.exportComponentWithStructure=function(e,t,n,i){let r=t;let o=n.putNewList("VariablesMd");let l=r.getVariables();let a=l.size();for(let t=0;t<a;t++){o.add(e.exportVariable(l.get(t),null))}return n};e.QInAMdVariableContainer.prototype.getComponentType=function(){return e.OlapComponentType.VARIABLE_CONTAINER};e.QInAMdVariableContainer.prototype.importComponentWithStructure=function(t,n,i,r,o){if(e.notNull(n)){let r=i;let o=n.getListByKey("VariablesMd");if(e.isNull(o)){o=n.getListByKey("Variables")}this.importVariableList(t,o,r)}return i};e.QInAMdVariableContainer.prototype.importVariableList=function(t,n,i){let r=i;let o=n;if(e.notNull(o)){let n=r.getVariables();let i=o.size();for(let l=0;l<i;l++){let i=e.PrUtils.getStructureElement(o,l);if(e.notNull(i)){let o=t.importVariable(i,r);if(e.notNull(o)&&!n.contains(o)){r.addVariable(o)}}}e.QInAMdVariableContainer.resolveVariableDependencies(r)}};e.QInACalculatedDimension=function(){};e.QInACalculatedDimension.prototype=new e.QInADimension;e.QInACalculatedDimension.prototype._ff_c="QInACalculatedDimension";e.QInACalculatedDimension.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;if(o.isHidden()){return null}i.putString("Name",o.getName());let l=t.m_mode===e.QModelFormat.INA_VALUE_HELP?e.AxisType.ROWS:o.getAxisType();i.putString("Axis",e.QInAConverter.lookupAxisTypeInA(l));let a=o.getTopEntries();if(a>0){i.putInteger("Top",a)}let s=o.getSkipEntries();if(s>0){i.putInteger("Skip",s)}let u=i.putNewStructure("DataSource");u.putString("ObjectName",o.getPreQueryName());u.putString("Type","Query");i.putString("JoinType",o.getJoinType().getName());let p=i.putNewList("JoinFields");let g=o.getJoinFields();let m=g.size();let c;for(c=0;c<m;c++){let e=g.get(c);let t=p.addNewStructure();t.putString("JoinFieldName",e.getLocaleFieldName());t.putString("JoinFieldNameInReferencedData",e.getReferencedFieldName())}let y=i.putNewList("FieldMappings");let d=o.getFieldMappings();let A=e.XList.create();m=d.size();for(c=0;c<m;c++){let t=d.get(c);if(e.XString.isEqual(o.getKeyField().getName(),t.getLocaleFieldName())){A.insert(0,t)}else{A.add(t)}}for(c=0;c<m;c++){let n=A.get(c);let i=y.addNewStructure();i.putString("FieldName",n.getLocaleFieldName());i.putString("FieldNameInReferencedData",n.getReferencedFieldName());if(t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){let t=n.getLocaleFieldName();if(o.getFieldByName(t).getValueType()!==e.XValueType.STRING){let n=e.QInAConverter.lookupValueTypeInA(o.getFieldByName(t).getValueType());i.putString("CalculatedDimensionFieldValueType",n)}}}e.QInADimension.exportFieldLayout(t,i,o);t.exportTotals(o,i);return i};e.QInACalculatedDimension.prototype.getComponentType=function(){return e.DimensionType.CALCULATED_DIMENSION};e.QInACalculatedDimension.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=o.getQueryModel();let a=i;let s=n.getStringByKey("Name");if(e.isNull(a)&&e.notNull(l)){a=l.getDimensionManagerBase().getDimensionByNameInternal(s)}if(e.isNull(a)){a=e.QCalculatedDimension._createCalculatedDimension(o,r,s)}a.setDimensionType(e.DimensionType.CALCULATED_DIMENSION);a.setName(s);a.setTopEntries(n.getIntegerByKeyExt("Top",0));a.setSkipEntries(n.getIntegerByKeyExt("Skip",0));let u=n.getStructureByKey("DataSource");a.setPreQueryName(u.getStringByKey("ObjectName"));a.setJoinType(e.JoinType.lookup(n.getStringByKey("JoinType")));let p=n.getListByKey("JoinFields");let g=p.size();let m;for(m=0;m<g;m++){let e=p.getStructureAt(m);a.addJoinFieldByString(e.getStringByKey("JoinFieldName"),e.getStringByKey("JoinFieldNameInReferencedData"))}let c=n.getListByKey("FieldMappings");g=c.size();for(m=0;m<g;m++){let n=c.getStructureAt(m);a.addFieldMappingByString(n.getStringByKey("FieldName"),n.getStringByKey("FieldNameInReferencedData"));if(t.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){if(n.getStringByKey("CalculatedDimensionFieldValueType")!==null){let t=a.getFieldByName(n.getStringByKey("FieldName"));t.setValueType(e.QInAConverter.lookupValueType(n.getStringByKey("CalculatedDimensionFieldValueType")))}}}this.importFieldsLayout(t,n,a,o);t.importTotals(n,a.getResultStructureControllerBase(),o);return a};e.QInAFilterDynamic=function(){};e.QInAFilterDynamic.prototype=new e.QInAFilter;e.QInAFilterDynamic.prototype._ff_c="QInAFilterDynamic";e.QInAFilterDynamic.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=o;let a=l;let s=null;if(a.isDynamicFilterInitialized()){s=a.getDynamicFilter()}let u=l.getQueryModel();let p=t.isAbap(l);let g;if(p){g="Filter"}else{g="DynamicFilter"}let m=e.notNull(t.m_variableProcessingDirective)&&u.getModelCapabilities().supportsVariableMasking();if(m){let n=t.exportFilterExpression(s);if(e.notNull(n)){i.put(g,n)}}else{let n=null;if(a.isTmpFilterInitialized()){n=a.getTmpFilter()}let r=this.exportFilter(t,a,s,a.getLinkedFilters(),n,a.getTransientZoomDisplayFilter(),a.getZoomDataFilter());if(e.notNull(r)){i.put(g,r)}}return i};e.QInAFilterDynamic.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_DYNAMIC};e.QInAFilterDynamic.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=n.getStructureByKey("DynamicFilter");if(e.isNull(l)){l=n.getStructureByKey("Filter")}let a=r;let s=null;if(e.notNull(a)){if(a.isDynamicFilterInitialized()){s=a.getDynamicFilter();s.setComplexRoot(null);if(s.getModelCapabilities().supportsCellValueOperand()){s.setIsSuppressingNulls(false)}}a.resetEffectiveFilter()}if(e.notNull(l)&&!l.isEmpty()){s=t.importFilterExpression(s,l,a,o)}if(e.notNull(a)){a.setDynamicFilter(s)}return s};e.QInAFilterVisibility=function(){};e.QInAFilterVisibility.prototype=new e.QInAFilter;e.QInAFilterVisibility.prototype._ff_c="QInAFilterVisibility";e.QInAFilterVisibility.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;if(o.getModelCapabilities().supportsVisibilityFilter()){if(t.m_mode.isTypeOf(e.QModelFormat.INA_VALUE_HELP)){return o.isValueHelpVisibilityFilterInitialized()?this.exportFilter(t,o,o.getValuehelpVisibilityFilter(),null,null,null,null):null}let n=null;if(o.isTmpVisibilityFilterInitialized()){n=o.getTmpVisibilityFilter()}let i=null;if(o.isVisibilityFilterInitialized()){i=o.getVisibilityFilter()}return this.exportFilter(t,o,i,o.getLinkedVisibilityFilters(),n,o.getTransientZoomVisibilityFilter(),null)}return null};e.QInAFilterVisibility.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_VISIBILITY};e.QInAFilterVisibility.prototype.getTagName=function(){return"VisibilityFilter"};e.QInAFilterVisibility.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=r;if(e.notNull(l)&&l.isVisibilityFilterInitialized()){let e=l.getVisibilityFilter();e.setComplexRoot(null);if(e.getModelCapabilities().supportsCellValueOperand()){e.setIsSuppressingNulls(false)}}if(e.isNull(n)){return null}let a=t.importFilterExpression(null,n,l,o);if(e.notNull(l)&&e.notNull(a)){l.setVisibilityFilter(a)}return a};e.QInAFilterVisibility.prototype.isValidFilterExpression=function(t,n){return e.notNull(t)};e.QInAMemberFormulaMeasure=function(){};e.QInAMemberFormulaMeasure.prototype=new e.QInAFormulaMeasure;e.QInAMemberFormulaMeasure.prototype._ff_c="QInAMemberFormulaMeasure";e.QInAMemberFormulaMeasure.exportCrossCalcSignFlip=function(t,n,i){let r=n.getContext();let o=n.getQueryModel();let l=n.getFormula();let a=l.cloneOlapComponent(r,null);if(a.getOlapComponentType()===e.OlapComponentType.FORMULA_ITEM_MEMBER){let t=a;let i=o.getMeasureDimension().getStructureMemberByAliasOrMember(t.getMemberName());if(e.notNull(i)){if((i.getExceptionAggregationType()===null||i.getMemberType()===e.MemberType.EXCEPTION_AGGREGATION)&&n.getExceptionAggregationType()===null){a=e.QInAFormulaMeasure.signFlipMember(a)}}}else{e.QInAMemberFormulaMeasure.signFlipCrossCalcMembers(o,a);if(a.getOlapComponentType()===e.OlapComponentType.FORMULA_FUNCTION){let t=a;if(e.XString.isEqual(t.getFunctionName(),e.FormulaOperator.GRAND_TOTAL.getName())||e.XString.isEqual(t.getFunctionName(),e.FormulaOperator.MEMBER_SELECT.getName())||t.requiresExternalSignFlip()){a=e.QInAFormulaMeasure.signFlipMember(a)}}}let s=l.cloneOlapComponent(r,null);let u=e.QFactory.createFormulaFunctionWithName(r,e.FormulaOperator.IF.getName());let p=e.QFactory.createFormulaFunctionWithName(r,e.FormulaOperator.OR.getName());u.add(p);let g=o.getAccountDimension().getAccountTypeAttributeName();let m=e.QFactory.createFormulaOperation(r);m.setOperator(e.ComparisonOperator.EQUAL);m.setLeftSide(e.QFactory.createFormulaAttributeWithName(r,g));m.setRightSide(e.QFactory.createFormulaConstantWithStringValue(r,e.AccountType.INC.getName()));p.add(m);let c=e.QFactory.createFormulaOperation(r);c.setOperator(e.ComparisonOperator.EQUAL);c.setLeftSide(e.QFactory.createFormulaAttributeWithName(r,g));c.setRightSide(e.QFactory.createFormulaConstantWithStringValue(r,e.AccountType.LEQ.getName()));p.add(c);let y=e.QFactory.createFormulaOperation(r);y.setOperator(e.MathOperator.MULT);y.setLeftSide(a);y.setRightSide(e.QFactory.createFormulaConstantWithIntValue(r,-1));u.add(y);u.add(s);e.QInAFormulaMeasure.exportFormulaItemSignFlip(t,u,i,r,true,false,n.getName())};e.QInAMemberFormulaMeasure.exportInverseFormulas=function(t,n,i){let r=i.putNewList("InverseFormulas");let o=n.getInverseFormulaList();let l=o.size();for(let i=0;i<l;i++){let l=e.PrFactory.createStructure();r.add(l);let a=o.get(i);let s=e.PrFactory.createStructure();let u=a.getInternalFormulaItem();let p=a.getTarget();if(n.isAutoSignFlip()){let t=n.getQueryModel();let i=t.getAccountDimension();if(!e.isNull(i)&&e.notNull(p)){let t=p;let r=i.getStructureMemberByAliasOrMember(t.getMemberName());if(!e.isNull(r)&&r.getComponentType()===e.MemberType.RESTRICTED_MEASURE){if(!r.isModelDefinedMember()&&n.isAutoSignFlipRestrictedMeasureOnly()){r=i.getStructureMemberByAliasOrMember(r.getMemberForSignFlip(n.getContext()))}}if(!e.isNull(r)){let t=r.getAccountType();if(t===e.AccountType.INC||t===e.AccountType.LEQ){u=e.QInAFormulaMeasure.signFlipMember(a.getInternalFormulaItem())}}}}e.QInAFormulaMeasure.exportFormulaItem(t,u,s,n.getContext());l.put("Formula",s);if(e.notNull(p)){let i=e.PrFactory.createStructure();l.put("Target",i);e.QInAFormulaMeasure.exportFormulaItem(t,p,i,n.getContext())}let g=a.getCondition();if(e.notNull(g)){let i=e.PrFactory.createStructure();l.put("Condition",i);e.QInAFormulaMeasure.exportFormulaItem(t,g,i,n.getContext())}}};e.QInAMemberFormulaMeasure.exportIteration=function(t,n,i){let r=i.putNewStructure("Iteration");let o=n.getIteration();let l=e.QInAExportUtil.getMeasureMemberNameByAlias(n.getQueryModel(),o.getStartValueMemberName(),t);r.putString("StartValueMember",l);let a=o.getIterationDimensions();let s=r.putNewList("IterationDimensions");let u=a.size();for(let e=0;e<u;e++){let t=a.get(e);let n=s.addNewStructure();n.putStringNotNullAndNotEmpty("Name",t.getDimensionName());n.putStringNotNullAndNotEmpty("PartitionLevel",t.getPartitionLevelName())}if(o.useGlobalSort()){r.putBoolean("UseGlobalSort",true)}};e.QInAMemberFormulaMeasure.importIteration=function(t,n,i,r){let o=e.QFactory.createIteration(i);n.setIteration(o);o.setStartValueMemberName(r.getStringByKey("StartValueMember"));let l=r.getListByKey("IterationDimensions");if(e.XCollectionUtils.hasElements(l)){let t=l.size();for(let n=0;n<t;n++){let t=l.getStructureAt(n);let r=e.QFactory.createIterationDimension(i);r.setDimensionName(t.getStringByKey("Name"));r.setPartitionLevelName(t.getStringByKey("PartitionLevel"));o.addIterationDimension(r)}}};e.QInAMemberFormulaMeasure.isAccountModelCrossCalculation=function(t){let n=t.getQueryModel();if(e.notNull(n)&&n.getAccountDimension()!==null&&n.getAccountDimension().getAccountTypeAttributeName()!==null){return t.getDimension()!==n.getAccountDimension()}return false};e.QInAMemberFormulaMeasure.signFlipCrossCalcMembers=function(t,n){if(e.notNull(n)){let i=n.getChildren();let r=0;while(i.hasNext()){let o=i.next();if(o.getOlapComponentType()===e.OlapComponentType.FORMULA_ITEM_MEMBER){let i=o;if(t.getMeasureDimension().getStructureMemberByAliasOrMember(i.getMemberName())!==null){let t=n;if(!(e.XString.isEqual(t.getFunctionName(),e.FormulaOperator.GRAND_TOTAL.getName())||e.XString.isEqual(t.getFunctionName(),e.FormulaOperator.MEMBER_SELECT.getName())||t.requiresExternalSignFlip())){t.set(r,e.QInAFormulaMeasure.signFlipMember(i))}}}else{e.QInAMemberFormulaMeasure.signFlipCrossCalcMembers(t,o);if(o.getOlapComponentType()===e.OlapComponentType.FORMULA_FUNCTION){let t=o;if((e.XString.isEqual(t.getFunctionName(),e.FormulaOperator.GRAND_TOTAL.getName())||e.XString.isEqual(t.getFunctionName(),e.FormulaOperator.MEMBER_SELECT.getName())||t.requiresExternalSignFlip())&&n.getOlapComponentType()===e.OlapComponentType.FORMULA_FUNCTION){let t=n;t.set(r,e.QInAFormulaMeasure.signFlipMember(o))}}}r++}}};e.QInAMemberFormulaMeasure.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=e.QInAMember.exportingInOldFormat(t,o);let a=l?"Name":"MemberName";i.putString(a,o.getName());e.QInAMember.exportText(t,i,o);let s=e.PrFactory.createStructure();if(o.isAutoSignFlip()&&e.QInAMemberFormulaMeasure.isAccountModelCrossCalculation(o)){e.QInAMemberFormulaMeasure.exportCrossCalcSignFlip(t,o,s)}else if(l){e.QInAFormulaMeasure.exportFormulaMeasure(t,o,s)}if(e.XCollectionUtils.hasElements(o.getInverseFormulaList())&&l){e.QInAMemberFormulaMeasure.exportInverseFormulas(t,o,s)}if(o.getIteration()!==null&&l){e.QInAMemberFormulaMeasure.exportIteration(t,o,s)}if(s.hasElements()){i.put("Formula",s)}if(o.supportsCalculatedBeforeAggregation()&&o.isCalculatedBeforeAggregation()){i.putString("ExecutionStep","CalculationBeforeAggregation")}if(o.hasVisibilityFilter()&&o.getModelCapabilities().supportsCustomDimensionMemberVisibilityFilter()){let n=t.exportFilterExpression(o.getVisibilityFilter());if(e.notNull(n)){i.put("VisibilityFilter",n)}}return i};e.QInAMemberFormulaMeasure.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=r;let a=o.getQueryModel();if(e.isNull(l)){l=a.getMeasureDimension()}let s;let u=e.QInAMember.getNameForImport(n,l);let p;if(l.getModelCapabilities().supportsCustomMeasuresInMetadata()&&l.getStructureMember(u)!==null){s=l.getStructureMember(u);let e=l.isMeasureStructure()?"[Measures].[MemberDetails]":"[CustomDimension2].[MemberDetails]";p=n.getStructureByKey(e).getStructureByKey("Formula")}else{s=e.QFormulaMeasure._createFormulaMeasure(o,l);e.QInAFormulaMeasure.importNameAndText(n,s,l);p=n.getStructureByKey("Formula")}t.importExceptions(n,s);let g=e.QInAFormulaMeasure.importFormulaMeasure(t,l,p,null,o);s.setFormula(g);if(s.supportsCalculatedBeforeAggregation()){s.setIsCalculatedBeforeAggregation(e.XString.isEqual("CalculationBeforeAggregation",n.getStringByKey("ExecutionStep")))}if(e.notNull(p)){let n=p.getListByKey("InverseFormulas");if(e.XCollectionUtils.hasElements(n)){this.importInverseFormula(t,o,s,n)}}let m=p.getStructureByKey("Iteration");if(e.XCollectionUtils.hasElements(m)){e.QInAMemberFormulaMeasure.importIteration(t,s,o,m)}let c=n.getStructureByKey("VisibilityFilter");if(e.notNull(c)&&s.getModelCapabilities().supportsCustomDimensionMemberVisibilityFilter()){let e=s.getVisibilityFilter();t.importFilterExpression(e,c,s,o)}return s};e.QInAMemberFormulaMeasure.prototype.importInverseFormula=function(t,n,i,r){let o=i.getDimension();let l=r.size();let a=i.getInverseFormulaList();for(let s=0;s<l;s++){let l=r.get(s);let u=l.getStructureByKey("Target");let p=l.getStructureByKey("Condition");let g=l.getStructureByKey("Formula");let m=e.QInAFormulaMeasure.importFormulaMeasure(t,o,g,null,n);let c=null;if(e.notNull(p)){c=e.QInAFormulaMeasure.importFormulaMeasure(t,o,p,null,n)}let y=e.QInAFormulaMeasure.importFormulaMeasure(t,o,u,null,n);let d=e.QFormulaInverseFormula.createInverseFormula(n,i,c,y,m);a.add(d)}};e.QInAVarHierNode=function(){};e.QInAVarHierNode.prototype=new e.QInAVarDimMember;e.QInAVarHierNode.prototype._ff_c="QInAVarHierNode";e.QInAVarHierNode.prototype.getComponentType=function(){return e.VariableType.HIERARCHY_NODE_VARIABLE};e.QInAVarHierNode.prototype.importComponentWithStructure=function(t,n,i,r,o){let l=i;let a=n.getStructureByKey("Values");let s=e.QFactory.createFilterExpression(o,l);t.importFilterExpression(s,a,l,o);l.setFilter(s);return l};e.QInAValueHelpFilter=function(){};e.QInAValueHelpFilter.prototype=new e.QInAFilter;e.QInAValueHelpFilter.prototype._ff_c="QInAValueHelpFilter";e.QInAValueHelpFilter.getValueHelpFilter=function(t,n){let i=t.getSelectorFilterUsage();let r=null;if(i===e.QueryFilterUsage.QUERY_FILTER&&n.isDynamicFilterInitialized()){r=n.getDynamicFilter()}else if(i===e.QueryFilterUsage.QUERY_FILTER_EFFECTIVE){r=n.getEffectiveFilter()}else if(i===e.QueryFilterUsage.QUERY_FILTER_EXCLUDING_DIMENSION&&n.isDynamicFilterInitialized()){r=n.getDynamicFilter();e.QInAValueHelpFilter.removeFilterOnDimensionVh(r,t)}else if(i===e.QueryFilterUsage.SELECTOR_FILTER&&n.isValueHelpFilterInitialized()){r=n.getValuehelpFilter()}return r};e.QInAValueHelpFilter.removeFilterOnDimensionVh=function(t,n){let i=t.getCartesianProduct();if(e.notNull(i)){let e=0;while(e<i.size()){let t=i.getCartesianChild(e);if(t.getDimension().isEqualTo(n)){i.removeAt(e)}else{e++}}}};e.QInAValueHelpFilter.prototype.exportComponentWithStructure=function(t,n,i,r){let o=n;let l=o.getQueryModel().getFilter();let a=e.QInAValueHelpFilter.getValueHelpFilter(o,l);if(e.notNull(a)){let n=o.getSelectorFilterUsage();if(n===e.QueryFilterUsage.QUERY_FILTER_EFFECTIVE&&l.isIgnoreInternalNonMeasureFilter()){return this.exportFilter(t,l,l.getDynamicFilter(),l.getLinkedFilters(),l.getTmpFilter(),l.getTransientZoomDisplayFilter(),l.getZoomDataFilter())}else if(o.isSelectorUseQueryDrillOperations()){return this.exportFilter(t,l,a,null,null,l.getTransientZoomDisplayFilter(),l.getZoomDataFilter())}else{return t.exportFilterExpression(a)}}return null};e.QInAValueHelpFilter.prototype.getComponentType=function(){return e.OlapComponentType.SELECTOR};e.QInAValueHelpFilter.prototype.getModelFormat=function(){return e.QModelFormat.INA_VALUE_HELP};e.QInAValueHelpFilter.prototype.importComponentWithStructure=function(e,t,n,i,r){return null};e.DfDocumentsStoreService=function(){};e.DfDocumentsStoreService.prototype=new e.MessageManagerSimple;e.DfDocumentsStoreService.prototype._ff_c="DfDocumentsStoreService";e.DfDocumentsStoreService.createDocumentStoreService=function(t,n,i,r){let o=new e.DfDocumentsStoreService;o.initialize(t,n,i,r);return o};e.DfDocumentsStoreService.createDocumentStoreServiceShallow=function(t,n,i,r,o){let l=new e.DfDocumentsStoreService;l.initializeShallow(t,n,i,r,o);return l};e.DfDocumentsStoreService.prototype.m_connectionContainer=null;e.DfDocumentsStoreService.prototype.m_context=null;e.DfDocumentsStoreService.prototype.m_dataArea=null;e.DfDocumentsStoreService.prototype.m_documentDeleteRequests=null;e.DfDocumentsStoreService.prototype.m_documentFetchRequests=null;e.DfDocumentsStoreService.prototype.m_documentServiceRequest=null;e.DfDocumentsStoreService.prototype.m_documentStoreRequests=null;e.DfDocumentsStoreService.prototype.m_documentsDirectoryRequest=null;e.DfDocumentsStoreService.prototype.m_fileStore=null;e.DfDocumentsStoreService.prototype.m_instanceId=null;e.DfDocumentsStoreService.prototype.m_path=null;e.DfDocumentsStoreService.prototype.m_withVersions=false;e.DfDocumentsStoreService.prototype.m_writeEnabled=false;e.DfDocumentsStoreService.prototype.addToDeleteList=function(t){if(!this.m_writeEnabled){throw e.XException.createIllegalStateException("Document Store Service is Read-Only")}this.m_documentDeleteRequests.addDocumentFileByName(t)};e.DfDocumentsStoreService.prototype.addToFetchList=function(e){this.m_documentFetchRequests.addDocumentFileByName(e)};e.DfDocumentsStoreService.prototype.addToPutList=function(e,t){this.addToPutListInternal(e,t,null,false)};e.DfDocumentsStoreService.prototype.addToPutListInternal=function(t,n,i,r){if(!this.m_writeEnabled){throw e.XException.createIllegalStateException("Document Store Service is Read-Only")}let o=this.m_documentStoreRequests.addDocumentFileByName(t);o.setContent(n);if(r){o.setProperties(i)}};e.DfDocumentsStoreService.prototype.addToPutListWithProperties=function(e,t,n){this.addToPutListInternal(e,t,n,true)};e.DfDocumentsStoreService.prototype.containsKeyAndVersion=function(e,t){return this.m_fileStore.containsKey(e)&&this.m_fileStore.getByKey(e).getVersionByName(t)!==null};e.DfDocumentsStoreService.prototype.evictAllDocuments=function(){e.XObjectExt.release(this.m_fileStore);this.m_fileStore=e.XHashMapByString.create()};e.DfDocumentsStoreService.prototype.evictDocument=function(t){e.XObjectExt.release(this.m_fileStore.remove(t))};e.DfDocumentsStoreService.prototype.getActiveDocumentVersionForFile=function(e){return this.m_fileStore.containsKey(e)?this.m_fileStore.getByKey(e).getActiveDocumentVersion():null};e.DfDocumentsStoreService.prototype.getActiveVersionForFile=function(e){return this.m_fileStore.containsKey(e)?this.m_fileStore.getByKey(e).getActiveVersion():null};e.DfDocumentsStoreService.prototype.getContentForFile=function(e){return this.m_fileStore.containsKey(e)?this.m_fileStore.getByKey(e).getContent():null};e.DfDocumentsStoreService.prototype.getContentForFileAndVersion=function(e,t){return this.containsKeyAndVersion(e,t)?this.m_fileStore.getByKey(e).getVersionByName(t).getContent():null};e.DfDocumentsStoreService.prototype.getDocumentVersionForFileAndVersion=function(e,t){return this.containsKeyAndVersion(e,t)?this.m_fileStore.getByKey(e).getVersionByName(t):null};e.DfDocumentsStoreService.prototype.getDocumentVersionsForFile=function(e){return this.m_fileStore.containsKey(e)?this.m_fileStore.getByKey(e).getVersions():null};e.DfDocumentsStoreService.prototype.getPropertiesForFile=function(e){return this.m_fileStore.containsKey(e)?this.m_fileStore.getByKey(e).getProperties():null};e.DfDocumentsStoreService.prototype.getPropertiesForFileAndVersion=function(e,t){return this.containsKeyAndVersion(e,t)?this.m_fileStore.getByKey(e).getVersionByName(t).getProperties():null};e.DfDocumentsStoreService.prototype.getVersionNamesForFile=function(e){return this.m_fileStore.containsKey(e)?this.m_fileStore.getByKey(e).getVersionNames():null};e.DfDocumentsStoreService.prototype.initialize=function(t,n,i,r){e.MessageManagerSimple.prototype.setup.call(this);this.m_connectionContainer=t.getQueryManager().getConnection();this.m_path=t.getDocumentsServicePath();this.m_dataArea=i;this.m_withVersions=n;this.m_context=t.getQueryModel();this.m_fileStore=e.XHashMapByString.create();this.m_writeEnabled=t.getSupportsDocuments()===e.DocumentsSupportType.READ_WRITE||t.getSupportsDocuments()===e.DocumentsSupportType.READ_CREATE_CHANGE;this.m_instanceId=r;this.setupRequests()};e.DfDocumentsStoreService.prototype.initializeShallow=function(t,n,i,r,o){e.MessageManagerSimple.prototype.setup.call(this);this.m_connectionContainer=t.getConnection();this.m_path=n;this.m_dataArea=r;this.m_withVersions=i;this.m_context=t;this.m_fileStore=e.XHashMapByString.create();this.m_writeEnabled=false;this.m_instanceId=o;this.setupRequests()};e.DfDocumentsStoreService.prototype.isDocumentLoaded=function(e){return this.m_fileStore.containsKey(e)};e.DfDocumentsStoreService.prototype.isWriteEnabled=function(){return this.m_writeEnabled};e.DfDocumentsStoreService.prototype.onProviderFetch=function(t,n,i){this.clearMessages();this.addAllMessages(t);let r=null;if(t.isValid()){let t=n.getDocumentDirectories();if(e.XCollectionUtils.hasElements(t)){r=t.get(0);let e=r.getDocumentFiles();for(let t=0;t<e.size();t++){let n=e.get(t);this.m_fileStore.put(n.getName(),n)}}}if(e.notNull(r)){r.clearFilesWithoutReleasing()}e.XObjectExt.release(n)};e.DfDocumentsStoreService.prototype.performRequests=function(t,n,i){let r=e.DfDocumentsStoreAction.create(t,this,i,this.m_context,this.m_connectionContainer,this.m_documentServiceRequest);this.releaseRequests();this.setupRequests();r.attachListener(n,e.ListenerType.SPECIFIC,i);r.process();return r};e.DfDocumentsStoreService.prototype.releaseObject=function(){this.releaseRequests();e.MessageManagerSimple.prototype.releaseObject.call(this);this.m_path=null;this.m_withVersions=false;this.m_context=null;this.m_dataArea=null;this.m_fileStore=e.XObjectExt.release(this.m_fileStore)};e.DfDocumentsStoreService.prototype.releaseRequests=function(){this.m_documentServiceRequest=null;this.m_documentsDirectoryRequest=null;this.m_documentFetchRequests=null;this.m_documentStoreRequests=null;this.m_documentDeleteRequests=null};e.DfDocumentsStoreService.prototype.resetRequests=function(){this.releaseRequests();this.setupRequests()};e.DfDocumentsStoreService.prototype.setupRequests=function(){this.m_documentServiceRequest=e.DocumentsServiceRequest.create();this.m_documentServiceRequest.setDataArea(this.m_dataArea);this.m_documentServiceRequest.setInstanceId(this.m_instanceId);this.m_documentsDirectoryRequest=this.m_documentServiceRequest.addDocumentsDirectoryRequestByPath(this.m_path);this.m_documentFetchRequests=this.m_documentsDirectoryRequest.addDocumentsRequestByType(e.DocumentsRequestAction.GET);this.m_documentFetchRequests.setWithVersions(this.m_withVersions);this.m_documentStoreRequests=this.m_documentsDirectoryRequest.addDocumentsRequestByType(e.DocumentsRequestAction.PUT);this.m_documentDeleteRequests=this.m_documentsDirectoryRequest.addDocumentsRequestByType(e.DocumentsRequestAction.DELETE)};e.InARsDataCellProvider=function(){};e.InARsDataCellProvider.prototype=new e.DfApplicationContext;e.InARsDataCellProvider.prototype._ff_c="InARsDataCellProvider";e.InARsDataCellProvider.create=function(t,n){let i=new e.InARsDataCellProvider;i.setupProvider(t,n);return i};e.InARsDataCellProvider.prototype.m_cellDataTypes=null;e.InARsDataCellProvider.prototype.m_cellValueTypes=null;e.InARsDataCellProvider.prototype.m_columnsCount=0;e.InARsDataCellProvider.prototype.m_complexUnitIndices=null;e.InARsDataCellProvider.prototype.m_csComplexUnitIndex=0;e.InARsDataCellProvider.prototype.m_csCurrencyUnit=null;e.InARsDataCellProvider.prototype.m_csCurrencyUnitPosition=0;e.InARsDataCellProvider.prototype.m_csCurrencyUnitType=0;e.InARsDataCellProvider.prototype.m_csDecimalFloatValue=null;e.InARsDataCellProvider.prototype.m_csDecimalPlaces=0;e.InARsDataCellProvider.prototype.m_csDocumentId=null;e.InARsDataCellProvider.prototype.m_csDoubleValue=0;e.InARsDataCellProvider.prototype.m_csExceptionPriority=null;e.InARsDataCellProvider.prototype.m_csExceptionSetting=null;e.InARsDataCellProvider.prototype.m_csFormatString=null;e.InARsDataCellProvider.prototype.m_csFormattedCurrencyUnit=null;e.InARsDataCellProvider.prototype.m_csFormattedValue=null;e.InARsDataCellProvider.prototype.m_csInputEnabled=false;e.InARsDataCellProvider.prototype.m_csInputReadinessIndex=0;e.InARsDataCellProvider.prototype.m_csIsInsideBounds=false;e.InARsDataCellProvider.prototype.m_csLockedValue=false;e.InARsDataCellProvider.prototype.m_csMaxAlertLevel=null;e.InARsDataCellProvider.prototype.m_csMaxAlertLevelName=null;e.InARsDataCellProvider.prototype.m_csPlanningCommandIds=null;e.InARsDataCellProvider.prototype.m_csQueryDataCellReference=null;e.InARsDataCellProvider.prototype.m_csScalingFactor=0;e.InARsDataCellProvider.prototype.m_csStringValue=null;e.InARsDataCellProvider.prototype.m_csValueException=null;e.InARsDataCellProvider.prototype.m_decimalPlaces=null;e.InARsDataCellProvider.prototype.m_documentIds=null;e.InARsDataCellProvider.prototype.m_exceptionAlertLevel=null;e.InARsDataCellProvider.prototype.m_exceptionName=null;e.InARsDataCellProvider.prototype.m_exceptionNameWithSettings=null;e.InARsDataCellProvider.prototype.m_exceptionSettingIndex=null;e.InARsDataCellProvider.prototype.m_exceptionSettings=null;e.InARsDataCellProvider.prototype.m_exceptions=null;e.InARsDataCellProvider.prototype.m_explainQueryName=null;e.InARsDataCellProvider.prototype.m_explainQueryNames=null;e.InARsDataCellProvider.prototype.m_formatStrings=null;e.InARsDataCellProvider.prototype.m_inputEnabled=null;e.InARsDataCellProvider.prototype.m_inputReadinessIndex=null;e.InARsDataCellProvider.prototype.m_isAbapBasedSystem=false;e.InARsDataCellProvider.prototype.m_lastX=0;e.InARsDataCellProvider.prototype.m_lastY=0;e.InARsDataCellProvider.prototype.m_lockedValue=null;e.InARsDataCellProvider.prototype.m_ocpStructure=null;e.InARsDataCellProvider.prototype.m_planningCommandIds=null;e.InARsDataCellProvider.prototype.m_queryDataCellReferences=null;e.InARsDataCellProvider.prototype.m_roundedValues=null;e.InARsDataCellProvider.prototype.m_rowsCount=0;e.InARsDataCellProvider.prototype.m_scalingFactors=null;e.InARsDataCellProvider.prototype.m_supportsDataCellMixedValues=false;e.InARsDataCellProvider.prototype.m_supportsInputReadinessStates=false;e.InARsDataCellProvider.prototype.m_supportsResultSetNumericValueWithInternalPrecision=false;e.InARsDataCellProvider.prototype.m_supportsSAPDateFormat=false;e.InARsDataCellProvider.prototype.m_supportsUnifiedDataCells=false;e.InARsDataCellProvider.prototype.m_unitDescriptions=null;e.InARsDataCellProvider.prototype.m_unitPositions=null;e.InARsDataCellProvider.prototype.m_unitTypes=null;e.InARsDataCellProvider.prototype.m_units=null;e.InARsDataCellProvider.prototype.m_valueType=null;e.InARsDataCellProvider.prototype.m_values=null;e.InARsDataCellProvider.prototype.m_valuesFormatted=null;e.InARsDataCellProvider.prototype.copyInARsDataCellProvider=function(t){this.m_supportsDataCellMixedValues=t.m_supportsDataCellMixedValues;this.m_supportsSAPDateFormat=t.m_supportsSAPDateFormat;this.m_supportsInputReadinessStates=t.m_supportsInputReadinessStates;this.m_supportsUnifiedDataCells=t.m_supportsUnifiedDataCells;this.m_supportsResultSetNumericValueWithInternalPrecision=t.m_supportsResultSetNumericValueWithInternalPrecision;this.m_isAbapBasedSystem=t.m_isAbapBasedSystem;let n=e.isNull(t.m_exceptionSettings)?null:t.m_exceptionSettings.getPermaCopy();let i=e.isNull(t.m_ocpStructure)?null:t.m_ocpStructure.getPermaCopy();this.setOcpStructure(i,t.m_columnsCount,t.m_rowsCount,n)};e.InARsDataCellProvider.prototype.getAllAvailableDocumentIds=function(){let t=e.XList.create();let n=this.getColumn("DocumentsIds");if(e.notNull(n)){while(n.hasNextValue()){let i=n.getNextStringValue();if(e.XStringUtils.isNotNullAndNotEmpty(i)){t.add(i)}}}return t};e.InARsDataCellProvider.prototype.getAvailableDataCellColumns=function(){return this.m_columnsCount};e.InARsDataCellProvider.prototype.getAvailableDataCellCount=function(){return this.m_columnsCount*this.m_rowsCount};e.InARsDataCellProvider.prototype.getAvailableDataCellRows=function(){return this.m_rowsCount};e.InARsDataCellProvider.prototype.getColumn=function(t){let n=this.m_ocpStructure.getStructureByKey(t);if(e.isNull(n)){return null}return e.InARsEncodedValues.createByStructure(n)};e.InARsDataCellProvider.prototype.getXValue=function(){if(this.m_valueType.isNumber()){if(this.m_supportsResultSetNumericValueWithInternalPrecision&&e.XStringUtils.isNotNullAndNotEmpty(this.m_csDecimalFloatValue)){return e.XDecFloatByString.create(this.m_csDecimalFloatValue)}return e.XDoubleValue.create(this.m_csDoubleValue)}else if(this.m_valueType===e.XValueType.TIMESPAN){return e.XTimeSpan.create(e.XDouble.convertToLong(this.m_csDoubleValue))}else if(this.m_valueType===e.XValueType.DATE){return e.XDate.createDateFromStringWithFlag(this.m_csStringValue,this.m_supportsSAPDateFormat)}else if(this.m_valueType===e.XValueType.TIME){return e.XTime.createTimeFromStringWithFlag(this.m_csStringValue,this.m_supportsSAPDateFormat)}else if(this.m_valueType===e.XValueType.DATE_TIME){return e.XDateTime.createDateTimeFromStringWithFlag(this.m_csStringValue,this.m_supportsSAPDateFormat)}else if(this.m_valueType===e.XValueType.STRING){if(e.XStringUtils.isNotNullAndNotEmpty(this.m_csStringValue)){return e.XStringValue.create(this.m_csStringValue)}return null}throw e.XException.createIllegalArgumentException(e.XStringUtils.concatenate2("Unsupported type:",this.m_valueType.getName()))};e.InARsDataCellProvider.prototype.notifyCursorChange=function(t,n,i){t.setColumn(n);t.setRow(i);t.reset();if(i<this.m_lastY||i===this.m_lastY&&n<this.m_lastX){this.resetCursor()}while(this.m_csIsInsideBounds&&(i>this.m_lastY||n>this.m_lastX)){this.readNextIndex();this.m_lastX++;if(this.m_lastX>=this.m_columnsCount||this.m_lastY===-1){this.m_lastX=0;this.m_lastY++}}if(!this.m_csIsInsideBounds){t.setValueException(e.ValueException.NULL_VALUE);if(this.m_supportsUnifiedDataCells){t.setFormattedValue("")}else{t.setFormattedValue(e.ValueException.NULL_VALUE.getName())}t.setInitialValue(null)}else if(i===this.m_lastY&&n===this.m_lastX){this.updateValidCell(t)}else{t.setValueException(e.ValueException.NULL_VALUE);if(this.m_supportsUnifiedDataCells){t.setFormattedValue("")}else{t.setFormattedValue(e.ValueException.NULL_VALUE.getName())}t.setInitialValue(null)}};e.InARsDataCellProvider.prototype.readNextIndex=function(){if(e.notNull(this.m_values)&&this.m_values.hasNextValue()){if(e.isNull(this.m_exceptions)){this.m_csValueException=e.ValueException.NORMAL}else{this.m_csValueException=e.QInAConverter.lookupException(this.m_exceptions.getNextIntegerValue())}if(e.notNull(this.m_exceptionSettingIndex)){this.setExceptionSettings(this.m_exceptionSettingIndex.getNextIntegerValue())}else if(e.notNull(this.m_exceptionAlertLevel)){this.m_csMaxAlertLevel=e.QInAConverter.lookupAlertLevel(this.m_exceptionAlertLevel.getNextIntegerValue())}if(e.notNull(this.m_exceptionSettingIndex)){this.m_csMaxAlertLevelName=this.m_exceptionNameWithSettings}else if(e.notNull(this.m_exceptionAlertLevel)){this.m_csMaxAlertLevelName=this.m_exceptionName.getNextStringValue()}if(e.notNull(this.m_valuesFormatted)){this.m_csFormattedValue=this.m_valuesFormatted.getNextStringValue()}if(e.notNull(this.m_planningCommandIds)){this.m_csPlanningCommandIds=this.m_planningCommandIds.getNextStringValue()}if(e.notNull(this.m_formatStrings)){this.m_csFormatString=this.m_formatStrings.getNextStringValue()}if(e.notNull(this.m_queryDataCellReferences)){this.m_csQueryDataCellReference=this.m_queryDataCellReferences.getNextStringValue()}if(e.notNull(this.m_units)){this.m_csFormattedCurrencyUnit=this.m_units.getNextStringValue();this.m_csCurrencyUnitType=1}if(e.notNull(this.m_unitTypes)){this.m_csCurrencyUnitType=this.m_unitTypes.getNextIntegerValue()}if(e.notNull(this.m_unitPositions)){this.m_csCurrencyUnitPosition=this.m_unitPositions.getNextIntegerValue()}if(e.notNull(this.m_unitDescriptions)){this.m_csCurrencyUnit=this.m_unitDescriptions.getNextStringValue()}if(e.notNull(this.m_complexUnitIndices)){this.m_csComplexUnitIndex=this.m_complexUnitIndices.getNextIntegerValue()}if(e.notNull(this.m_documentIds)){this.m_csDocumentId=this.m_documentIds.getNextStringValue()}this.readNextValues();if(e.isNull(this.m_inputEnabled)){this.m_csInputEnabled=false}else{this.m_csInputEnabled=this.m_inputEnabled.getNextIntegerValue()!==0}if(e.notNull(this.m_inputReadinessIndex)){this.m_csInputReadinessIndex=this.m_inputReadinessIndex.getNextIntegerValue()}if(e.isNull(this.m_lockedValue)){this.m_csLockedValue=false}else{this.m_csLockedValue=this.m_lockedValue.getNextIntegerValue()!==0}if(e.notNull(this.m_decimalPlaces)){this.m_csDecimalPlaces=this.m_decimalPlaces.getNextIntegerValue()}if(e.notNull(this.m_scalingFactors)){this.m_csScalingFactor=this.m_scalingFactors.getNextIntegerValue()}if(e.notNull(this.m_explainQueryNames)){this.m_explainQueryName=this.m_explainQueryNames.getNextStringValue()}}else{this.m_csIsInsideBounds=false}};e.InARsDataCellProvider.prototype.readNextValues=function(){if(this.m_supportsDataCellMixedValues){this.m_valueType=e.XValueType.DOUBLE;if(e.notNull(this.m_cellValueTypes)){this.m_valueType=e.QInAConverter.lookupValueTypeByInt(this.m_cellValueTypes.getNextIntegerValue())}if(this.m_csValueException===e.ValueException.NORMAL||this.m_csValueException===e.ValueException.MIXED_CURRENCIES_OR_UNITS){if(this.m_valueType.isNumber()){if(this.m_supportsResultSetNumericValueWithInternalPrecision){this.m_csDecimalFloatValue=this.m_values.getNextStringValue();if(e.XStringUtils.isNullOrEmpty(this.m_csDecimalFloatValue)){this.m_values.skipBack();this.m_csDoubleValue=this.m_values.getNextDoubleValue()}}else{this.m_csDoubleValue=this.m_values.getNextDoubleValue()}}else{this.m_csDoubleValue=0;this.m_csDecimalFloatValue=e.XDecFloatByString.ZERO_VALUE_STRING;this.m_values.skip()}if(e.notNull(this.m_roundedValues)){this.m_csStringValue=this.m_roundedValues.getNextStringValue()}}else{this.m_csDoubleValue=0;this.m_csDecimalFloatValue=e.XDecFloatByString.ZERO_VALUE_STRING;this.m_csStringValue=null;this.m_values.skip();if(e.notNull(this.m_roundedValues)){this.m_roundedValues.skip()}}}else{if(e.notNull(this.m_cellDataTypes)){let t=this.m_cellDataTypes.getNextStringValue();let n=e.QInAConverter.lookupValueType(t);this.m_valueType=n;if(n.isNumber()){this.m_csDoubleValue=this.m_values.getNextDoubleValue();this.m_csStringValue=null}else{this.m_csStringValue=this.m_values.getNextStringValue();this.m_csDoubleValue=0}}else if(e.notNull(this.m_cellValueTypes)){let t=this.m_cellValueTypes.getNextIntegerValue();this.m_valueType=e.QInAConverter.lookupValueTypeByInt(t);this.m_csDoubleValue=this.m_values.getNextDoubleValue()}else{throw e.XException.createIllegalStateException("Bad protocol: Values cannot be retrieved")}}};e.InARsDataCellProvider.prototype.releaseObject=function(){this.m_ocpStructure=null;this.m_exceptionSettings=null;this.m_csValueException=null;this.m_csMaxAlertLevelName=null;this.m_csExceptionSetting=e.XObjectExt.release(this.m_csExceptionSetting);this.m_csExceptionPriority=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_csExceptionPriority);this.m_csMaxAlertLevel=null;this.m_csFormattedValue=null;this.m_csFormatString=null;this.m_csPlanningCommandIds=null;this.m_csQueryDataCellReference=null;this.m_csFormattedCurrencyUnit=null;this.m_csCurrencyUnit=null;this.m_exceptions=e.XObjectExt.release(this.m_exceptions);this.m_inputEnabled=e.XObjectExt.release(this.m_inputEnabled);this.m_inputReadinessIndex=e.XObjectExt.release(this.m_inputReadinessIndex);this.m_lockedValue=e.XObjectExt.release(this.m_lockedValue);this.m_unitDescriptions=e.XObjectExt.release(this.m_unitDescriptions);this.m_unitTypes=e.XObjectExt.release(this.m_unitTypes);this.m_unitPositions=e.XObjectExt.release(this.m_unitPositions);this.m_units=e.XObjectExt.release(this.m_units);this.m_values=e.XObjectExt.release(this.m_values);this.m_valuesFormatted=e.XObjectExt.release(this.m_valuesFormatted);this.m_formatStrings=e.XObjectExt.release(this.m_formatStrings);this.m_cellValueTypes=e.XObjectExt.release(this.m_cellValueTypes);this.m_cellDataTypes=e.XObjectExt.release(this.m_cellDataTypes);this.m_queryDataCellReferences=e.XObjectExt.release(this.m_queryDataCellReferences);this.m_exceptionNameWithSettings=null;this.m_exceptionName=e.XObjectExt.release(this.m_exceptionName);this.m_exceptionAlertLevel=e.XObjectExt.release(this.m_exceptionAlertLevel);this.m_exceptionSettingIndex=e.XObjectExt.release(this.m_exceptionSettingIndex);this.m_planningCommandIds=e.XObjectExt.release(this.m_planningCommandIds);this.m_decimalPlaces=e.XObjectExt.release(this.m_decimalPlaces);this.m_scalingFactors=e.XObjectExt.release(this.m_scalingFactors);this.m_complexUnitIndices=e.XObjectExt.release(this.m_complexUnitIndices);this.m_documentIds=e.XObjectExt.release(this.m_documentIds);this.m_explainQueryNames=e.XObjectExt.release(this.m_explainQueryNames);e.DfApplicationContext.prototype.releaseObject.call(this)};e.InARsDataCellProvider.prototype.resetCursor=function(){this.m_lastX=-1;this.m_lastY=-1;this.m_csIsInsideBounds=true;this.resetIfNotNull(this.m_exceptions);this.resetIfNotNull(this.m_exceptionName);this.resetIfNotNull(this.m_exceptionAlertLevel);this.resetIfNotNull(this.m_exceptionSettingIndex);this.resetIfNotNull(this.m_inputEnabled);this.resetIfNotNull(this.m_inputReadinessIndex);this.resetIfNotNull(this.m_lockedValue);this.resetIfNotNull(this.m_unitDescriptions);this.resetIfNotNull(this.m_unitTypes);this.resetIfNotNull(this.m_unitPositions);this.resetIfNotNull(this.m_units);this.resetIfNotNull(this.m_values);this.resetIfNotNull(this.m_roundedValues);this.resetIfNotNull(this.m_valuesFormatted);this.resetIfNotNull(this.m_planningCommandIds);this.resetIfNotNull(this.m_formatStrings);this.resetIfNotNull(this.m_cellValueTypes);this.resetIfNotNull(this.m_queryDataCellReferences);this.resetIfNotNull(this.m_cellDataTypes);this.resetIfNotNull(this.m_decimalPlaces);this.resetIfNotNull(this.m_scalingFactors);this.resetIfNotNull(this.m_explainQueryNames);this.resetIfNotNull(this.m_complexUnitIndices);this.resetIfNotNull(this.m_documentIds)};e.InARsDataCellProvider.prototype.resetIfNotNull=function(t){if(e.notNull(t)){t.resetCursor()}};e.InARsDataCellProvider.prototype.setExceptionSettings=function(t){let n=false;if(t===-1){this.m_csExceptionSetting=null;this.m_csExceptionPriority=null;this.m_exceptionNameWithSettings=null}else{let i=this.m_exceptionSettings.getListAt(t);this.m_csExceptionSetting=e.XHashMapByString.create();this.m_csExceptionPriority=e.XHashMapByString.create();let r=i.size();for(let t=0;t<r;t++){let r=i.getStructureAt(t);let o=r.getStringByKey("SettingName");let l=r.getStringByKey("Value");this.m_csExceptionSetting.put(o,l);this.m_csExceptionPriority.put(o,e.XIntegerValue.create(r.getIntegerByKey("Priority")));if(e.ExceptionSetting.getByName(o)===e.ExceptionSetting.ALERT_LEVEL){n=true;let t=e.XInteger.convertFromStringWithRadix(l,10);this.m_csMaxAlertLevel=e.QInAConverter.lookupAlertLevel(t);this.m_exceptionNameWithSettings=r.getStringByKey("ExceptionName")}}}if(!n){this.m_csMaxAlertLevel=e.AlertLevel.NORMAL;this.m_exceptionNameWithSettings=null}};e.InARsDataCellProvider.prototype.setOcpStructure=function(t,n,i,r){this.m_ocpStructure=t;this.m_rowsCount=i;this.m_columnsCount=n;if(e.notNull(this.m_ocpStructure)){this.m_exceptions=this.getColumn("Exceptions");if(e.isNull(r)){this.m_exceptionName=this.getColumn("ExceptionName");this.m_exceptionAlertLevel=this.getColumn("ExceptionAlertLevel")}else{this.m_exceptionSettings=r;this.m_exceptionSettingIndex=this.getColumn("ExceptionSettingIndex")}if(this.m_supportsInputReadinessStates){this.m_inputReadinessIndex=this.getColumn("InputReadinessIndex")}else{this.m_inputEnabled=this.getColumn("InputEnabled")}this.m_lockedValue=this.getColumn("LockedValue");this.m_unitDescriptions=this.getColumn("UnitDescriptions");this.m_unitTypes=this.getColumn("UnitTypes");this.m_unitPositions=this.getColumn("UnitPositions");this.m_units=this.getColumn("Units");this.m_complexUnitIndices=this.getColumn("UnitIndex");this.m_documentIds=this.getColumn("DocumentsIds");this.m_values=this.getColumn("Values");this.m_valuesFormatted=this.getColumn("ValuesFormatted");if(this.m_supportsDataCellMixedValues){this.m_roundedValues=this.getColumn("ValuesRounded")}else{this.m_roundedValues=null}this.m_planningCommandIds=this.getColumn("Actions");this.m_formatStrings=this.getColumn("CellFormat");this.m_cellValueTypes=this.getColumn("CellValueTypes");this.m_cellDataTypes=this.getColumn("CellDataType");this.m_queryDataCellReferences=this.getColumn("QueryDataCellReferences");this.m_explainQueryNames=this.getColumn("ExplainQueryName");this.m_decimalPlaces=this.getColumn("NumericRounding");this.m_scalingFactors=this.getColumn("NumericShift")}this.m_lastX=-1;this.m_lastY=-1;this.m_csIsInsideBounds=true;this.m_csMaxAlertLevel=e.AlertLevel.NORMAL};e.InARsDataCellProvider.prototype.setupProvider=function(t,n){this.setupApplicationContext(t);this.m_supportsSAPDateFormat=n.getCapabilitiesBase().supportsSapDate();this.m_supportsUnifiedDataCells=n.getCapabilitiesBase().supportsUnifiedDataCells();this.m_supportsDataCellMixedValues=n.getCapabilitiesBase().supportsDataCellMixedValues();this.m_supportsInputReadinessStates=n.supportsInputReadinessStates();this.m_supportsResultSetNumericValueWithInternalPrecision=n.getCapabilitiesBase().supportsResultSetNumericValueWithInternalPrecision();this.m_isAbapBasedSystem=n.getSystemType().isTypeOf(e.SystemType.ABAP)};e.InARsDataCellProvider.prototype.updateCurrencyUnit=function(t){if(this.m_csCurrencyUnitType===1){t.setIsEmpty(false);t.setHasCurrency(true);t.setHasUnit(false);t.setIsMixed(false)}else if(this.m_csCurrencyUnitType===2){t.setIsEmpty(false);t.setHasCurrency(false);t.setHasUnit(true);t.setIsMixed(false)}else if(this.m_csCurrencyUnitType===3){t.setIsEmpty(false);t.setHasCurrency(true);t.setHasUnit(true);t.setIsMixed(false)}else if(this.m_csCurrencyUnitType===-1){t.setIsEmpty(false);t.setIsMixed(true);t.setHasCurrency(true);t.setHasUnit(true)}else{t.setIsEmpty(true);t.setHasCurrency(false);t.setHasUnit(false);t.setIsMixed(false)}if(!t.isEmpty()){if(e.notNull(this.m_csFormattedCurrencyUnit)){t.setFormatted(this.m_csFormattedCurrencyUnit)}if(e.notNull(this.m_csCurrencyUnit)){if(this.m_csCurrencyUnitPosition===2){t.setPrefix(this.m_csCurrencyUnit)}else{t.setSuffix(this.m_csCurrencyUnit)}}}};e.InARsDataCellProvider.prototype.updateValidCell=function(t){t.setValueType(this.m_valueType);let n=this.m_supportsUnifiedDataCells&&this.m_csValueException!==e.ValueException.NORMAL&&this.m_csValueException!==e.ValueException.ZERO&&this.m_csValueException!==e.ValueException.MIXED_CURRENCIES_OR_UNITS;if(this.m_csValueException===e.ValueException.NULL_VALUE||this.m_csValueException===e.ValueException.UNDEFINED||n){t.setInitialValue(null)}else{t.setInitialValue(this.getXValue())}if(n){t.setFormattedValue("")}else{t.setFormattedValue(this.m_csFormattedValue)}t.setFormatString(this.m_csFormatString);t.setValueException(this.m_csValueException);if(e.isNull(this.m_csMaxAlertLevelName)){t.setMaxAlertLevelName(this.m_exceptionNameWithSettings)}else{t.setMaxAlertLevelName(this.m_csMaxAlertLevelName)}t.setMaxAlertLevel(this.m_csMaxAlertLevel);t.setDataEntryEnabled(this.m_csInputEnabled);t.setInputReadinessIndex(this.m_csInputReadinessIndex);t.setExceptionSettings(this.m_csExceptionSetting);t.setExceptionPriorities(this.m_csExceptionPriority);t.setOriginalValueLock(this.m_csLockedValue);t.setQueryDataCellReference(this.m_csQueryDataCellReference);if(e.notNull(this.m_complexUnitIndices)){t.setUnitIndex(this.m_csComplexUnitIndex)}if(e.notNull(this.m_documentIds)){t.setDocumentId(this.m_csDocumentId)}this.updateCurrencyUnit(t.getCurrencyUnitBase());let i=t.getPlanningCommandIdsBase();i.clear();if(e.XStringUtils.isNotNullAndNotEmpty(this.m_csPlanningCommandIds)){let t=e.XStringTokenizer.splitString(this.m_csPlanningCommandIds," ");if(e.notNull(t)){i.addAll(t)}}if(!this.m_valueType.isNumber()){t.setDecimalPlaces(0);t.setScalingFactor(0)}else{t.setDecimalPlaces(this.m_csDecimalPlaces);t.setScalingFactor(this.m_csScalingFactor)}if(e.notNull(this.m_explainQueryNames)){t.setExplainQueryName(this.m_explainQueryName)}};e.InARsDimension=function(){};e.InARsDimension.prototype=new e.DfNameTextObject;e.InARsDimension.prototype._ff_c="InARsDimension";e.InARsDimension.UDH_DIMESION_NAME_PREFIX="1DG_";e.InARsDimension.create=function(t,n,i,r,o){let l=new e.InARsDimension;let a=t.getStringByKey("Name");let s=t.getStructureByKey("Hierarchy");let u;let p;let g=-1;let m=-1;let c=r.getConvenienceCommands();let y=t.getListByKey("Attributes");let d=t.getListByKey("DimensionDrillGroup");if(e.isNull(s)){u=e.notNull(o)?o.getHierarchyName():null;p=e.Alignment.DEFAULT_VALUE}else{u=s.getStringByKey("Name");if(e.notNull(c)&&c.getQueryManager().getModelCapabilities().supportsMaxDrillLevel()){g=s.getIntegerByKey("MaxDrillLevel");m=s.getIntegerByKey("MaxRuntimeLevel")}if(s.hasStringByKey("LowerLevelNodeAlignment")){let t=s.getStringByKeyExt("LowerLevelNodeAlignment","Default");p=e.QInAConverter.lookupLowerLevelNodeAlignment(t)}else{let t=s.getBooleanByKeyExt("ExpandBottomUp",false);p=t?e.Alignment.CHILDREN_ABOVE_PARENT:e.Alignment.CHILDREN_BELOW_PARENT}}let A=e.QInAConverter.lookupDimensionType(t.getIntegerByKeyExt("DimensionType",0));let I=t.getBooleanByKeyExt("IsClustered",false);let S=false;let f=false;if(e.notNull(c)&&c.getQueryManager().getModelCapabilities().supportsDimensionHierarchyMetadata()&&t.containsKey("HierarchyMetadata")){let e=t.getStructureByKey("HierarchyMetadata");S=e.getBooleanByKey("TimeDependent");f=e.getBooleanByKey("VersionDependent")}l.setupExt(a,y,d,n,i,r,u,A,p,o,I,g,m,S,f);return l};e.InARsDimension.prototype.m_absoluteLevels=null;e.InARsDimension.prototype.m_childAlignment=null;e.InARsDimension.prototype.m_childCountValues=null;e.InARsDimension.prototype.m_dimensionDrillGroups=null;e.InARsDimension.prototype.m_dimensionType=null;e.InARsDimension.prototype.m_displayValues=null;e.InARsDimension.prototype.m_drillGroupIndexes=null;e.InARsDimension.prototype.m_drillStates=null;e.InARsDimension.prototype.m_fields=null;e.InARsDimension.prototype.m_hasTimeDependentHierarchies=false;e.InARsDimension.prototype.m_hasVersionDependentHierarchies=false;e.InARsDimension.prototype.m_hierarchyName=null;e.InARsDimension.prototype.m_hierarchyNavigationFieldIndex=0;e.InARsDimension.prototype.m_hierarchyPathFieldIndex=0;e.InARsDimension.prototype.m_isClustered=false;e.InARsDimension.prototype.m_isHierarchyActive=false;e.InARsDimension.prototype.m_keyFieldIndex=0;e.InARsDimension.prototype.m_lbhToUdhConversionProperties=null;e.InARsDimension.prototype.m_maxDrillLevel=0;e.InARsDimension.prototype.m_maxRuntimeLevel=0;e.InARsDimension.prototype.m_measureIdIndex=0;e.InARsDimension.prototype.m_memberIndexes=null;e.InARsDimension.prototype.m_memberTypes=null;e.InARsDimension.prototype.m_memberTypesEncoded=null;e.InARsDimension.prototype.m_namePathFieldIndex=0;e.InARsDimension.prototype.m_nodeIds=null;e.InARsDimension.prototype.m_parentIndexes=null;e.InARsDimension.prototype.m_textFieldIndex=0;e.InARsDimension.prototype._isHierarchyActiveForContext=function(t,n,i){if(e.isNull(t)){return e.XStringUtils.isNotNullAndNotEmpty(n)}return i?t.isSelectorHierarchyActive():t.isHierarchyActive()};e.InARsDimension.prototype.cloneExt=function(t){let n=new e.InARsDimension;n.copyInARsDimension(this);return n};e.InARsDimension.prototype.copyInARsDimension=function(t){this.setupWithNameText(t.getName(),t.getText());this.m_fields=e.XCollectionUtils.createListOfClones(t.m_fields);if(e.notNull(t.m_displayValues)){this.m_displayValues=t.m_displayValues.clone()}if(e.notNull(t.m_drillStates)){this.m_drillStates=t.m_drillStates.clone()}this.m_memberIndexes=t.m_memberIndexes.clone();if(e.notNull(t.m_parentIndexes)){this.m_parentIndexes=t.m_parentIndexes.clone()}if(e.notNull(t.m_drillGroupIndexes)){this.m_drillGroupIndexes=t.m_drillGroupIndexes.clone()}if(e.notNull(t.m_nodeIds)){this.m_nodeIds=t.m_nodeIds.clone()}if(e.notNull(t.m_childCountValues)){this.m_childCountValues=t.m_childCountValues.clone()}this.m_memberTypesEncoded=t.m_memberTypesEncoded.clone();this.m_memberTypes=t.m_memberTypes.createArrayCopy();this.m_keyFieldIndex=t.m_keyFieldIndex;this.m_hierarchyNavigationFieldIndex=t.m_hierarchyNavigationFieldIndex;this.m_textFieldIndex=t.m_textFieldIndex;this.m_hierarchyPathFieldIndex=t.m_hierarchyPathFieldIndex;this.m_namePathFieldIndex=t.m_namePathFieldIndex;this.m_isClustered=t.m_isClustered;if(e.notNull(this.m_absoluteLevels)){this.m_absoluteLevels=t.m_absoluteLevels.clone()}this.m_isHierarchyActive=t.m_isHierarchyActive;this.m_hierarchyName=t.m_hierarchyName;this.m_hasTimeDependentHierarchies=t.m_hasTimeDependentHierarchies;this.m_hasVersionDependentHierarchies=t.m_hasVersionDependentHierarchies;this.m_dimensionType=t.m_dimensionType;this.m_childAlignment=t.m_childAlignment;if(e.notNull(t.m_lbhToUdhConversionProperties)){this.m_lbhToUdhConversionProperties=t.m_lbhToUdhConversionProperties.clone()}this.m_dimensionDrillGroups=e.XCollectionUtils.createListOfClones(t.m_dimensionDrillGroups);this.m_measureIdIndex=t.m_measureIdIndex;this.m_maxDrillLevel=t.m_maxDrillLevel;this.m_maxRuntimeLevel=t.m_maxRuntimeLevel};e.InARsDimension.prototype.extractDimensionDrillGroup=function(t){this.m_dimensionDrillGroups=e.XCollectionUtils.map(t,t=>{let n=t.asStructure();let i=n.getStringByKey("Name");let r=n.getStringByKey("Description");let o=n.getIntegerByKey("DimensionType");return e.RsDrillGroupDimension.create(i,r,e.QInAConverter.lookupDimensionType(o))})};e.InARsDimension.prototype.extractFieldIndices=function(t,n,i,r,o,l,a,s,u){let p=-1;let g=-1;let m=-1;this.m_fields=e.XList.create();let c=t.size();for(let y=0;y<c;y++){let c=t.getStructureAt(y);let d=this.getFieldName(c);let A=c.getStringByKey("PresentationType");let I=e.notNull(A)?e.QInAConverter.lookupPresentationType(A):c.getBooleanByKeyExt("IsKey",false)?e.PresentationType.KEY:e.PresentationType.VALUE;if(p<0&&I===e.PresentationType.KEY||e.notNull(r)&&e.XString.isEqual(d,r.getName())){p=y}if(g<0&&I===e.PresentationType.HIERARCHY_KEY||e.notNull(o)&&e.XString.isEqual(d,o.getName())){g=y}if(e.notNull(l)&&e.XString.isEqual(d,l.getName())){this.m_hierarchyNavigationFieldIndex=y}if((e.isNull(s)||this.m_hierarchyPathFieldIndex<0)&&I===e.PresentationType.HIERARCHY_PATH||e.notNull(s)&&e.XString.isEqual(d,s.getName())){this.m_hierarchyPathFieldIndex=y}if(e.notNull(a)&&e.XString.isEqual(d,a.getName())){this.m_textFieldIndex=y}if(e.isNull(a)&&I===e.PresentationType.HIERARCHY_TEXT){this.m_textFieldIndex=y}if(e.isNull(a)&&this.m_textFieldIndex===-1&&I===e.PresentationType.TEXT){this.m_textFieldIndex=y}if(e.isNull(a)&&this.m_textFieldIndex===-1&&(I===e.PresentationType.SHORT_TEXT||I===e.PresentationType.MEDIUM_TEXT||I===e.PresentationType.LONG_TEXT||I===e.PresentationType.XL_LONG_TEXT)){m=y}if((e.isNull(u)||this.m_namePathFieldIndex<0)&&I===e.PresentationType.NAME_PATH||e.notNull(u)&&e.XString.isEqual(d,u.getName())){this.m_namePathFieldIndex=y}if(e.notNull(i)&&i.isMeasureStructure()&&e.XString.startsWith(d,"1ROWCOUNT")){let t=e.XStringTokenizer.splitString(d,".").get(1);if(e.XString.endsWith(i.getKeyField().getName(),t)){p=y}}else if(e.isNull(i)&&n.getConvenienceCommands().getQueryManager().isShallow()&&e.XString.isEqual(d,"1ROWCOUNT.KEY")){p=y}if(this.getDimensionType().isTypeOf(e.DimensionType.ABSTRACT_STRUCTURE)){let t=e.XStringUtils.concatenate2(this.getName(),".ID");if(e.XString.isEqual(d,t)){this.m_measureIdIndex=y}}this.m_fields.add(e.InARsField.create(d,c))}this.m_keyFieldIndex=g===-1?p===-1?0:p:g;if(this.m_textFieldIndex===-1&&m!==-1||this.m_textFieldIndex===this.m_measureIdIndex){this.m_textFieldIndex=m}};e.InARsDimension.prototype.getAbsoluteLevelValues=function(){return this.m_absoluteLevels};e.InARsDimension.prototype.getChildCountValues=function(){return this.m_childCountValues};e.InARsDimension.prototype.getDimensionDrillGroups=function(){return this.m_dimensionDrillGroups};e.InARsDimension.prototype.getDimensionType=function(){return this.m_dimensionType};e.InARsDimension.prototype.getDisplayValues=function(){return this.m_displayValues};e.InARsDimension.prototype.getDrillGroupIndexes=function(){return this.m_drillGroupIndexes};e.InARsDimension.prototype.getDrillStates=function(){return this.m_drillStates};e.InARsDimension.prototype.getFieldName=function(t){let n=t.getStringByKey("Name");if(e.notNull(this.m_lbhToUdhConversionProperties)){n=e.XString.replace(n,this.m_lbhToUdhConversionProperties.getUdhName(),this.m_lbhToUdhConversionProperties.getDimensionName());t.putString("Name",n)}return n};e.InARsDimension.prototype.getFields=function(){return this.m_fields};e.InARsDimension.prototype.getHierarchyName=function(){return this.m_hierarchyName};e.InARsDimension.prototype.getHierarchyNavigationKeyIndex=function(){return this.m_hierarchyNavigationFieldIndex};e.InARsDimension.prototype.getHierarchyPathFieldIndex=function(){return this.m_hierarchyPathFieldIndex};e.InARsDimension.prototype.getKeyFieldIndex=function(){return this.m_keyFieldIndex};e.InARsDimension.prototype.getLowerLevelNodeAlignment=function(){return this.m_childAlignment};e.InARsDimension.prototype.getMaxDrillLevel=function(){return this.m_maxDrillLevel};e.InARsDimension.prototype.getMaxRuntimeLevel=function(){return this.m_maxRuntimeLevel};e.InARsDimension.prototype.getMeasureIDFieldIndex=function(){return this.m_measureIdIndex};e.InARsDimension.prototype.getMemberIndexes=function(){return this.m_memberIndexes};e.InARsDimension.prototype.getMemberType=function(t){if(e.isNull(this.m_memberTypes)||t>=this.m_memberTypes.size()){return e.MemberType.MEMBER}return this.m_memberTypes.get(t)};e.InARsDimension.prototype.getNamePathFieldIndex=function(){return this.m_namePathFieldIndex};e.InARsDimension.prototype.getNodeIds=function(){return this.m_nodeIds};e.InARsDimension.prototype.getParentIndexes=function(){return this.m_parentIndexes};e.InARsDimension.prototype.getTextFieldIndex=function(){return this.m_textFieldIndex};e.InARsDimension.prototype.hasDefaultLowerLevelNodeAlignment=function(){return this.m_childAlignment===e.Alignment.DEFAULT_VALUE};e.InARsDimension.prototype.hasTimeDependentHierarchies=function(){return this.m_hasTimeDependentHierarchies};e.InARsDimension.prototype.hasVersionDependentHierarchies=function(){return this.m_hasVersionDependentHierarchies};e.InARsDimension.prototype.isClustered=function(){return this.m_isClustered};e.InARsDimension.prototype.isHierarchyActive=function(){return this.m_isHierarchyActive};e.InARsDimension.prototype.releaseObject=function(){this.m_fields=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_fields);this.m_displayValues=e.XObjectExt.release(this.m_displayValues);this.m_drillStates=e.XObjectExt.release(this.m_drillStates);this.m_memberIndexes=e.XObjectExt.release(this.m_memberIndexes);this.m_parentIndexes=e.XObjectExt.release(this.m_parentIndexes);this.m_drillGroupIndexes=e.XObjectExt.release(this.m_drillGroupIndexes);this.m_nodeIds=e.XObjectExt.release(this.m_nodeIds);this.m_memberTypesEncoded=e.XObjectExt.release(this.m_memberTypesEncoded);this.m_memberTypes=e.XObjectExt.release(this.m_memberTypes);this.m_childCountValues=e.XObjectExt.release(this.m_childCountValues);this.m_absoluteLevels=e.XObjectExt.release(this.m_absoluteLevels);this.m_dimensionDrillGroups=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_dimensionDrillGroups);this.m_dimensionType=null;this.m_hierarchyName=null;this.m_childAlignment=null;e.DfNameTextObject.prototype.releaseObject.call(this)};e.InARsDimension.prototype.setMemberTypes=function(t){this.m_memberTypesEncoded=t;this.m_memberTypes=e.XArray.create(this.m_memberTypesEncoded.size());for(let t=0;this.m_memberTypesEncoded.hasNextValue();t++){let n=this.m_memberTypesEncoded.getNextIntegerValue();this.m_memberTypes.set(t,e.QInAConverter.lookupMemberType(n))}};e.InARsDimension.prototype.setName=function(e){this.m_name=e};e.InARsDimension.prototype.setupExt=function(t,n,i,r,o,l,a,s,u,p,g,m,c,y,d){this._setupInternal(t);this.m_keyFieldIndex=-1;this.m_hierarchyNavigationFieldIndex=-1;this.m_textFieldIndex=-1;this.m_hierarchyPathFieldIndex=-1;this.m_namePathFieldIndex=-1;this.m_hierarchyName=a;this.m_hasTimeDependentHierarchies=y;this.m_hasVersionDependentHierarchies=d;this.m_dimensionType=s;this.m_childAlignment=u;this.m_lbhToUdhConversionProperties=p;this.m_isClustered=g;this.m_measureIdIndex=-1;this.m_maxDrillLevel=m;this.m_maxRuntimeLevel=c;let A=o===e.QContextType.SELECTOR;let I=e.XCollectionUtils.getByName(l.getRsDimensions(),t);this.m_isHierarchyActive=this._isHierarchyActiveForContext(I,a,A);if(e.notNull(i)){this.extractDimensionDrillGroup(i)}if(e.notNull(n)){let t=null;let i=null;let o=null;let a=null;let s=null;let u=null;if(e.notNull(r)){t=r.getFlatKeyField();a=r.getTextField();u=r.getNamePathField();this.m_dimensionType=r.getDimensionType();if(this.m_isHierarchyActive||A){i=r.getHierarchyKeyField();o=r.getHierarchyNavigationField();s=r.getHierarchyPathField()}}this.extractFieldIndices(n,l,r,t,i,o,a,s,u)}};e.InARsDimension.prototype.setupFromRsTuple=function(t){let n=t.getStructureByKey("DisplayLevel");if(e.notNull(n)){this.m_displayValues=e.InARsEncodedValues.createByStructure(n)}n=t.getStructureByKey("Level");if(e.notNull(n)){this.m_absoluteLevels=e.InARsEncodedValues.createByStructure(n)}n=t.getStructureByKey("DrillState");if(e.notNull(n)){this.m_drillStates=e.InARsEncodedValues.createByStructure(n)}n=t.getStructureByKey("MemberIndexes");if(e.notNull(n)){this.m_memberIndexes=e.InARsEncodedValues.createByStructure(n)}n=t.getStructureByKey("ParentIndexes");if(e.notNull(n)){this.m_parentIndexes=e.InARsEncodedValues.createByStructure(n)}n=t.getStructureByKey("DrillGroupIndexes");if(e.notNull(n)){this.m_drillGroupIndexes=e.InARsEncodedValues.createByStructure(n)}n=t.getStructureByKey("TupleElementIds");if(e.notNull(n)){this.m_nodeIds=e.InARsEncodedValues.createByStructure(n)}n=t.getStructureByKey("ChildCount");if(e.notNull(n)){this.m_childCountValues=e.InARsEncodedValues.createByStructure(n)}};e.InARsDimension.prototype.setupNodeAlignmentIfNeeded=function(t){if(this.m_childAlignment===e.Alignment.DEFAULT_VALUE&&e.XString.startsWith(this.m_name,e.InARsDimension.UDH_DIMESION_NAME_PREFIX)&&e.notNull(this.m_drillGroupIndexes)&&this.m_drillGroupIndexes.size()>0){let n;n=t.getResultAlignment();if(n===e.ResultAlignment.TOP){this.m_childAlignment=e.Alignment.CHILDREN_BELOW_PARENT}else if(n===e.ResultAlignment.BOTTOM){this.m_childAlignment=e.Alignment.CHILDREN_ABOVE_PARENT}}};e.InARsField=function(){};e.InARsField.prototype=new e.DfNameTextObject;e.InARsField.prototype._ff_c="InARsField";e.InARsField.create=function(t,n){let i=new e.InARsField;let r=n.getStringByKey("Description");let o=e.QInAConverter.lookupValueType(n.getStringByKey("ValueType"));let l;let a=n.getStringByKey("PresentationType");if(e.isNull(a)){l=e.PresentationType.UNDEFINED}else{l=e.QInAConverter.lookupPresentationType(a)}let s=n.getStringByKeyExt("Obtainability","Always");let u=e.XString.isEqual("Always",s);let p=n.getListByKey("ValuesException");let g=n.getListByKey("Values");let m=n.getStringByKey("MIMEType");let c=n.getBooleanByKeyExt("IsNavigation",false);let y=n.getStringByKey("LongestAttribute");i.setupExt(t,r,g,u,p,o,l,m,c,y);return i};e.InARsField.prototype.m_isHierarchyNavField=false;e.InARsField.prototype.m_isVisible=false;e.InARsField.prototype.m_longestAttribute=null;e.InARsField.prototype.m_mimeType=null;e.InARsField.prototype.m_presentationType=null;e.InARsField.prototype.m_valueExceptions=null;e.InARsField.prototype.m_valueType=null;e.InARsField.prototype.m_values=null;e.InARsField.prototype.cloneExt=function(t){let n=new e.InARsField;let i=e.isNull(this.m_values)?null:this.m_values.getPermaCopy();let r=e.isNull(this.m_valueExceptions)?null:this.m_valueExceptions.getPermaCopy();n.setupExt(this.getName(),this.getText(),i,this.m_isVisible,r,this.m_valueType,this.m_presentationType,this.m_mimeType,this.m_isHierarchyNavField,this.m_longestAttribute);return n};e.InARsField.prototype.getLongestAttribute=function(){return this.m_longestAttribute};e.InARsField.prototype.getMimeType=function(){return this.m_mimeType};e.InARsField.prototype.getPresentationType=function(){return this.m_presentationType};e.InARsField.prototype.getValueExceptionAt=function(t){return e.isNull(this.m_valueExceptions)?-1:this.m_valueExceptions.getIntegerAt(t)};e.InARsField.prototype.getValueType=function(){return this.m_valueType};e.InARsField.prototype.getValues=function(){return this.m_values};e.InARsField.prototype.isHierarchyNavigationField=function(){return this.m_isHierarchyNavField};e.InARsField.prototype.isVisible=function(){return this.m_isVisible};e.InARsField.prototype.releaseObject=function(){this.m_valueType=null;this.m_longestAttribute=null;this.m_presentationType=null;this.m_values=e.XObjectExt.release(this.m_values);this.m_valueExceptions=e.XObjectExt.release(this.m_valueExceptions);e.DfNameTextObject.prototype.releaseObject.call(this)};e.InARsField.prototype.setMimeType=function(e){this.m_mimeType=e};e.InARsField.prototype.setupExt=function(e,t,n,i,r,o,l,a,s,u){this.setupWithNameText(e,t);this.m_values=n;this.m_isVisible=i;this.m_valueExceptions=r;this.m_valueType=o;this.m_presentationType=l;this.m_mimeType=a;this.m_isHierarchyNavField=s;this.m_longestAttribute=u};e.QInAImportAction=function(){};e.QInAImportAction.prototype=new e.SyncAction;e.QInAImportAction.prototype._ff_c="QInAImportAction";e.QInAImportAction.create=function(t,n,i,r,o,l){let a=new e.QInAImportAction;a.setupAction(null,null,null,t);a.m_componentType=n;a.m_inaElement=i;a.m_modelComponent=r;a.m_parentComponent=o;a.m_modelContext=l;return a};e.QInAImportAction.prototype.m_componentType=null;e.QInAImportAction.prototype.m_inaElement=null;e.QInAImportAction.prototype.m_modelComponent=null;e.QInAImportAction.prototype.m_modelContext=null;e.QInAImportAction.prototype.m_parentComponent=null;e.QInAImportAction.prototype.callListener=function(e,t,n,i){t.onImportDone(e,n,i)};e.QInAImportAction.prototype.processSynchronization=function(e){let t=this.getActionContext();t.processImportComponent(e,e=>{this.setData(e);this.addAllMessages(t);this.endSync()},this.m_componentType,this.m_inaElement,this.m_modelComponent,this.m_parentComponent,this.m_modelContext);return true};e.QInAImportAction.prototype.releaseObjectInternal=function(){this.m_componentType=null;this.m_inaElement=null;this.m_modelComponent=null;this.m_parentComponent=null;this.m_modelContext=null};e.DfDocumentsStoreAction=function(){};e.DfDocumentsStoreAction.prototype=new e.SyncAction;e.DfDocumentsStoreAction.prototype._ff_c="DfDocumentsStoreAction";e.DfDocumentsStoreAction.DEFAULT_MIME_TYPE="text/plain";e.DfDocumentsStoreAction.create=function(t,n,i,r,o,l){let a=new e.DfDocumentsStoreAction;a.setupDocumentStoreAction(t,n,i,r,o,l);return a};e.DfDocumentsStoreAction.createAndRun=function(t,n,i,r,o,l){let a=new e.DfDocumentsStoreAction;a.setupDocumentStoreActionAndRun(t,n,i,r,o,l);return a};e.DfDocumentsStoreAction.prototype.m_connectionContainer=null;e.DfDocumentsStoreAction.prototype.m_documentServiceRequest=null;e.DfDocumentsStoreAction.prototype.callListener=function(e,t,n,i){t.onProviderFetch(e,n,i)};e.DfDocumentsStoreAction.prototype.onFunctionExecuted=function(t,n,i){this.addAllMessages(t);if(t.isValid()){let t=null;if(e.notNull(n)&&n.getRootElement()!==null){let i=e.PrFactory.createStructureDeepCopy(n.getRootElement());e.InAHelper.importMessages(i,this);if(this.isValid()){t=this.parseDocumentsServiceResponse(i)}else{this.log(this.getMessages().toString())}}this.setData(t)}this.endSync();this.releaseObjectInternal()};e.DfDocumentsStoreAction.prototype.parseDocumentsServiceResponse=function(t){let n=e.DocumentsServiceResponse.create();let i=t.getListByKey("Directories");for(let e=0;e<i.size();e++){let t=i.getStructureAt(e);let r=t.getStringByKey("Path");let o=t.getListByKey("Files");let l=n.addDirectoryByPath(r);this.parseFileListToDirectory(o,l)}return n};e.DfDocumentsStoreAction.prototype.parseFileListToDirectory=function(t,n){for(let i=0;i<t.size();i++){let r=t.getStructureAt(i);let o=n.addFileByName(r.getStringByKey("Name"));o.setActiveVersion(r.getStringByKey("ActiveVersion"));let l=r.getListByKey("Versions");for(let t=0;t<l.size();t++){let n=l.getStructureAt(t);let i=o.addVersionByName(n.getStringByKey("Version"));i.setOwner(n.getStringByKey("Owner"));i.setTimestamp(e.XDateTime.createDateTimeSafe(n.getStringByKey("Timestamp")));let r=e.XContent.createContent();r.setContentType(e.ContentType.lookupByMimeType(n.getStringByKeyExt("MimeType",e.DfDocumentsStoreAction.DEFAULT_MIME_TYPE)));r.setString(n.getStringByKey("Content"));i.setContent(r);if(n.hasStringByKey("Properties")){let t=e.JsonParserFactory.createFromSafeString(n.getStringByKey("Properties")).asStructure();i.setProperties(t)}}}};e.DfDocumentsStoreAction.prototype.processSynchronization=function(t){let n=this.m_connectionContainer.newRpcFunctionByService(e.ServerService.DOCUMENTS);n.setServiceName(e.SystemServices.INA_SERVICE);let i=n.getRpcRequest();i.setRequestStructure(this.serialize());n.processFunctionExecution(t,this,null);return true};e.DfDocumentsStoreAction.prototype.releaseObjectInternal=function(){this.m_connectionContainer=null;this.m_documentServiceRequest=e.XObjectExt.release(this.m_documentServiceRequest)};e.DfDocumentsStoreAction.prototype.serialize=function(){let t=e.PrFactory.createStructure();let n=t.putNewStructure("Documents");let i=this.m_connectionContainer.getSystemConnect().getServerMetadata();let r=e.InACapabilitiesProvider.create(this.getSession(),i,e.ProviderType.DOCUMENTS,null).getDocumentCapabilities();this.serializeCapabilitiesStructure(n,r);this.serializeDocumentsRequest(n);return t};e.DfDocumentsStoreAction.prototype.serializeCapabilitiesStructure=function(e,t){let n=e.putNewList("Capabilities");n.addAllStrings(t.getSortedCapabilityNames());return n};e.DfDocumentsStoreAction.prototype.serializeDocumentDirectoryRequest=function(t,n){t.putString("InstanceId",this.m_documentServiceRequest.getInstanceId());t.putString("Path",n.getPath());let i=t.putNewList("Request");let r=n.getDocumentsRequests();for(let t=0;t<r.size();t++){let n=r.get(t);if(e.XCollectionUtils.hasElements(n.getDocuments())){this.serializeDocumentRequest(i.addNewStructure(),n)}}};e.DfDocumentsStoreAction.prototype.serializeDocumentFile=function(t,n){t.putString("Name",n.getName());if(n.getContent()!==null){t.putString("Content",n.getContent().getString());let i=n.getContent().getContentType();if(e.isNull(i)){i=e.ContentType.TEXT_PLAIN}t.putString("MimeType",i.getMimeType());if(n.getProperties()!==null){t.putString("Properties",n.getProperties().toString())}}};e.DfDocumentsStoreAction.prototype.serializeDocumentRequest=function(t,n){let i=n.getDocumentRequestAction();if(i===e.DocumentsRequestAction.GET){t.putString("Action","Get");t.putBoolean("WithVersions",n.isWithVersions())}else if(i===e.DocumentsRequestAction.PUT){t.putString("Action","Put")}else if(i===e.DocumentsRequestAction.DELETE){t.putString("Action","Delete")}let r=t.putNewList("Files");let o=n.getDocuments();for(let e=0;e<o.size();e++){this.serializeDocumentFile(r.addNewStructure(),o.get(e))}};e.DfDocumentsStoreAction.prototype.serializeDocumentsRequest=function(e){e.putStringNotNullAndNotEmpty("DataArea",this.m_documentServiceRequest.getDataArea());let t=e.putNewList("DocumentsRequest");let n=this.m_documentServiceRequest.getDocumentsDirectoryRequests();for(let e=0;e<n.size();e++){this.serializeDocumentDirectoryRequest(t.addNewStructure(),n.get(e))}};e.DfDocumentsStoreAction.prototype.setupDocumentStoreAction=function(e,t,n,i,r,o){this.m_connectionContainer=r;this.m_documentServiceRequest=o;this.setupAction(e,t,n,i)};e.DfDocumentsStoreAction.prototype.setupDocumentStoreActionAndRun=function(e,t,n,i,r,o){this.m_connectionContainer=r;this.m_documentServiceRequest=o;this.setupActionAndRun(e,t,n,i)};e.InAFusionResult=function(){};e.InAFusionResult.prototype=new e.DfProcessContext;e.InAFusionResult.prototype._ff_c="InAFusionResult";e.InAFusionResult.create=function(t,n){let i=new e.InAFusionResult;i.setupProcessContext(t.getProcess());i.m_config=n;i.m_application=t;i.m_layers=e.XList.create();return i};e.InAFusionResult.prototype.m_application=null;e.InAFusionResult.prototype.m_capabilities=null;e.InAFusionResult.prototype.m_config=null;e.InAFusionResult.prototype.m_connectionContainer=null;e.InAFusionResult.prototype.m_cubeDataSource=null;e.InAFusionResult.prototype.m_exporter=null;e.InAFusionResult.prototype.m_layers=null;e.InAFusionResult.prototype.m_metadataContent=null;e.InAFusionResult.prototype.m_modelContent=null;e.InAFusionResult.prototype.m_repoContent=null;e.InAFusionResult.prototype.m_serverMetadata=null;e.InAFusionResult.prototype.addLayer=function(e){this.m_layers.add(e)};e.InAFusionResult.prototype.getApplication=function(){return this.m_application};e.InAFusionResult.prototype.getCapabilities=function(){return this.m_capabilities};e.InAFusionResult.prototype.getConfig=function(){return this.m_config};e.InAFusionResult.prototype.getConnectionContainer=function(){return this.m_connectionContainer};e.InAFusionResult.prototype.getDataSource=function(){return this.m_cubeDataSource};e.InAFusionResult.prototype.getExporter=function(){return this.m_exporter};e.InAFusionResult.prototype.getLayer=function(e){for(let t=0;t<this.m_layers.size();t++){let n=this.m_layers.get(t);if(n.getComponentType()===e){return n}}return null};e.InAFusionResult.prototype.getMainCapabilities=function(){return this.m_capabilities.getActiveCapabilities()};e.InAFusionResult.prototype.getMetadataContent=function(){return this.m_metadataContent};e.InAFusionResult.prototype.getModelContent=function(){return this.m_modelContent};e.InAFusionResult.prototype.getRepositoryContent=function(){return this.m_repoContent};e.InAFusionResult.prototype.getServerMetadata=function(){return this.m_serverMetadata};e.InAFusionResult.prototype.setCapabilities=function(e){this.m_capabilities=e};e.InAFusionResult.prototype.setConnectionContainer=function(e){this.m_connectionContainer=e};e.InAFusionResult.prototype.setDataSource=function(e){this.m_cubeDataSource=e};e.InAFusionResult.prototype.setExporter=function(e){this.m_exporter=e};e.InAFusionResult.prototype.setMetadataContent=function(e){this.m_metadataContent=e};e.InAFusionResult.prototype.setModelResponse=function(e){this.m_modelContent=e};e.InAFusionResult.prototype.setRepositoryContent=function(e){this.m_repoContent=e};e.InAFusionResult.prototype.setServerMetadata=function(e){this.m_serverMetadata=e};e.InARsAxisProvider=function(){};e.InARsAxisProvider.prototype=new e.DfRsAxisProvider;e.InARsAxisProvider.prototype._ff_c="InARsAxisProvider";e.InARsAxisProvider.create=function(t,n,i,r,o){if(e.AxisType.ROWS!==n&&e.AxisType.COLUMNS!==n){throw e.XException.createIllegalStateException("illegal axis type")}let l=new e.InARsAxisProvider;l.setupProvider(t,i,r,o);return l};e.InARsAxisProvider.prototype.m_alertLevel=null;e.InARsAxisProvider.prototype.m_cellValueTypes=null;e.InARsAxisProvider.prototype.m_complexUnitIndices=null;e.InARsAxisProvider.prototype.m_currentIndex=0;e.InARsAxisProvider.prototype.m_dataCount=0;e.InARsAxisProvider.prototype.m_decimalPlaces=null;e.InARsAxisProvider.prototype.m_exceptionNames=null;e.InARsAxisProvider.prototype.m_lbhToUdhConversionProperties=null;e.InARsAxisProvider.prototype.m_longestCellValuesFormatted=null;e.InARsAxisProvider.prototype.m_longestCellValuesRounded=null;e.InARsAxisProvider.prototype.m_numericShifts=null;e.InARsAxisProvider.prototype.m_requestContext=null;e.InARsAxisProvider.prototype.m_resultAlignment=null;e.InARsAxisProvider.prototype.m_rsDimensionsList=null;e.InARsAxisProvider.prototype.m_supportsObtainability=false;e.InARsAxisProvider.prototype.m_supportsSapDateFormat=false;e.InARsAxisProvider.prototype.m_tupleElementsCount=0;e.InARsAxisProvider.prototype.m_tuplesCount=0;e.InARsAxisProvider.prototype.m_tuplesCountTotal=0;e.InARsAxisProvider.prototype.m_unitDescriptions=null;e.InARsAxisProvider.prototype.m_unitTypes=null;e.InARsAxisProvider.prototype.m_units=null;e.InARsAxisProvider.prototype.computeQueryDataCellName=function(t,n,i){let r=i.getQueryModel();if(e.notNull(r)&&r.getModelCapabilities().supportsDataCells()&&e.XStringUtils.isNotNullAndNotEmpty(n)){let o=r.getDimensionByName(i.getName());let l=o.getDimensionType();let a=r.getNonMeasureDimension()!==null;let s=t.getDimensionMemberName();if(l.isTypeOf(e.DimensionType.ABSTRACT_STRUCTURE)){r.stopEventing();let t=r.getQueryDataCells();let i=t.getByMemberName(s);for(let r=0;r<i.size();r++){let l=i.get(r);if(e.XStringUtils.isNullOrEmpty(l.getName())){let i=e.XString.trim(n);if(!a){l.setName(i);t.removeElement(l);t.add(l)}else{if(o.getId()===2000000908){l.setMeasure1IdValue(i)}else if(o.getId()===2000000907){l.setMeasure2IdValue(i)}let n=l.getMeasure1IdValue();let r=l.getMeasure2IdValue();let a=e.XStringUtils.isNotNullAndNotEmpty(n)&&e.XStringUtils.isNotNullAndNotEmpty(r);if(a){let i=e.XInteger.convertFromString(r);let o=e.XInteger.convertFromString(n);let a=o+1e4*i;let s=e.XInteger.convertToString(a);l.setName(s);t.removeElement(l);t.add(l);l.setMeasure1IdValue(null);l.setMeasure2IdValue(null)}}}}r.resumeEventing()}}};e.InARsAxisProvider.prototype.copyInARsAxisProvider=function(t){this.m_dataCount=t.m_dataCount;this.m_tuplesCount=t.m_tuplesCount;this.m_tuplesCountTotal=t.m_tuplesCountTotal;this.m_resultAlignment=t.m_resultAlignment;this.m_tupleElementsCount=t.m_tupleElementsCount;if(e.notNull(t.m_rsDimensionsList)){let n=t.m_rsDimensionsList.size();this.m_rsDimensionsList=e.XArray.create(n);for(let e=0;e<n;e++){let n=t.m_rsDimensionsList.get(e);this.m_rsDimensionsList.set(e,n.clone())}}this.m_supportsObtainability=t.m_supportsObtainability;this.m_supportsSapDateFormat=t.m_supportsSapDateFormat;this.m_currentIndex=-1;if(e.notNull(t.m_alertLevel)){this.m_alertLevel=t.m_alertLevel.getPermaCopy()}if(e.notNull(t.m_exceptionNames)){this.m_exceptionNames=t.m_exceptionNames.getPermaCopy()}if(e.notNull(t.m_unitDescriptions)){this.m_unitDescriptions=t.m_unitDescriptions.getPermaCopy()}if(e.notNull(t.m_units)){this.m_units=t.m_units.getPermaCopy()}if(e.notNull(t.m_unitTypes)){this.m_unitTypes=t.m_unitTypes.getPermaCopy()}if(e.notNull(t.m_complexUnitIndices)){this.m_complexUnitIndices=t.m_complexUnitIndices.getPermaCopy()}if(e.notNull(t.m_numericShifts)){this.m_numericShifts=t.m_numericShifts.getPermaCopy()}if(e.notNull(t.m_decimalPlaces)){this.m_decimalPlaces=t.m_decimalPlaces.getPermaCopy()}if(e.notNull(t.m_cellValueTypes)){this.m_cellValueTypes=t.m_cellValueTypes.getPermaCopy()}if(e.notNull(t.m_longestCellValuesRounded)){this.m_longestCellValuesRounded=t.m_longestCellValuesRounded.getPermaCopy()}if(e.notNull(t.m_longestCellValuesFormatted)){this.m_longestCellValuesFormatted=t.m_longestCellValuesFormatted.getPermaCopy()}this.m_requestContext=t.m_requestContext;if(e.notNull(t.m_lbhToUdhConversionProperties)){this.m_lbhToUdhConversionProperties=t.m_lbhToUdhConversionProperties.clone()}};e.InARsAxisProvider.prototype.getDataCount=function(){return this.m_dataCount};e.InARsAxisProvider.prototype.getDimensionName=function(t){let n=t.getStringByKey("Name");if(e.notNull(this.m_lbhToUdhConversionProperties)&&e.XString.isEqual(n,this.m_lbhToUdhConversionProperties.getUdhName())){n=this.m_lbhToUdhConversionProperties.getDimensionName();t.putString("Name",n)}return n};e.InARsAxisProvider.prototype.getElementAsListByName=function(e,t){return this.getElementAsListByNameExt(e,t,true)};e.InARsAxisProvider.prototype.getElementAsListByNameExt=function(t,n,i){let r=t.getByKey(n);if(e.isNull(r)){return null}if(r.isStructure()){let t=r;let o=t.getListByKey("Values");let l;if(t.containsKey("Size")){l=t.getIntegerByKey("Size")}else if(e.XCollectionUtils.hasElements(o)){l=o.size()}else{l=0}if(l!==o.size()){throw e.XException.createIllegalStateException(e.XStringUtils.concatenate3("Indicated size of ",n," names and actual size differ!"))}if(l!==this.m_tuplesCount&&(i||e.XCollectionUtils.hasElements(o)&&this.m_tuplesCount>0)){throw e.XException.createIllegalStateException(e.XStringUtils.concatenate3("Indicated size of ",n," names and tuple count differ!"))}return o}return r.isList()?r:null};e.InARsAxisProvider.prototype.getFieldValues=function(t,n){let i=this.getRsDimensionSize();for(let r=0;r<i;r++){let i=this.m_rsDimensionsList.get(r);if(e.XString.isEqual(i.getName(),t)){let t=e.XCollectionUtils.findFirst(i.getFields(),t=>e.XString.isEqual(t.getName(),n));if(e.notNull(t)){return e.PrUtils.asListOfString(t.getValues())}}}return e.XList.create()};e.InARsAxisProvider.prototype.getFormattedValue=function(t,n,i,r){if(e.isNull(n)){return"InA Error: No data available"}let o=r;if(o===e.XValueType.UNSUPPORTED){let n=t.getField();if(e.isNull(n)||n.getMetadata()===null){o=e.XValueType.STRING}else{o=n.getValueType()}}let l=n.get(i);let a=e.isNull(l)?null:l.copyAsPrimitiveXValue();let s=t.getValueException();let u=s===e.ValueException.NULL_VALUE;let p;if(!u&&o.isDateTime()){try{a=e.XValueUtil.getValueFromString(e.XValueUtil.getString(a),o);p=e.XValueUtil.getString(a)}catch(t){p=e.XValueUtil.getString(a)}}else{p=e.XValueUtil.getString(a)}return p};e.InARsAxisProvider.prototype.getMemberOverrideText=function(t,n,i){let r=this.getCursorAxis().getCursorResultSet();let o=r.getDimensionMemberOverrideText(n.getName(),i);if(e.isNull(o)){let n=t.getRsDimensionAtCurrentPosition();if(e.notNull(n)&&e.notNull(i)){let t=n.getStructureMember(i);if(e.notNull(t)){if(t.hasOverrideTextDefined()){o=t.getText()}else{let r=t.getQueryModel();let l=n.getName();if(e.notNull(r)&&r.getDimensionByName(l)!==null){let n=r.getDimensionByName(l).getStructureMember(i);if(e.notNull(n)&&n.isModelDefinedMember()){o=t.getText()}}}}}}return o};e.InARsAxisProvider.prototype.getOverrideTextForHierarchyPathField=function(t,n,i){let r=null;let o=n.getHierarchyPathFieldIndex();if(this.getApplication().getSession().hasFeature(e.FeatureToggleOlap.MEMBER_OVERRIDE_TEXTS)&&n.getDimensionType()===e.DimensionType.ACCOUNT&&o!==-1){let l=n.getFields();let a=l.get(o);let s=a.getValues().getStringAt(i);let u=e.HierarchyPathUtil.parsePathValues(s);let p=e.PrUtils.getListProperty(u,e.HierarchyPathUtil.PATH_ELEMENT_UNIQUE_NAME);let g=e.PrUtils.getListProperty(u,e.HierarchyPathUtil.PATH_ELEMENT_DESCRIPTION);let m=false;let c=null;for(let i=0;i<e.PrUtils.getListSize(p,0);i++){let r=e.PrUtils.getStringValueElement(p,i,null);c=this.getMemberOverrideText(t,n,r);if(e.notNull(c)){m=true;g.setStringAt(i,c)}}if(m){r=e.PrUtils.serialize(u,false,false,0)}}return r};e.InARsAxisProvider.prototype.getOverrideTextForTextField=function(t,n,i){let r=null;let o=n.getDimensionType();if(this.getApplication().getSession().hasFeature(e.FeatureToggleOlap.MEMBER_OVERRIDE_TEXTS)&&(o===e.DimensionType.ACCOUNT||o===e.DimensionType.MEASURE_STRUCTURE||o===e.DimensionType.SECONDARY_STRUCTURE)&&n.getTextFieldIndex()!==-1){let e=n.getKeyFieldIndex();let o=n.getFields();let l=o.get(e);let a=l.getValues().getStringAt(i);r=this.getMemberOverrideText(t,n,a)}return r};e.InARsAxisProvider.prototype.getResultAlignment=function(){return this.m_resultAlignment};e.InARsAxisProvider.prototype.getRsDimensionSize=function(){return e.isNull(this.m_rsDimensionsList)?0:this.m_rsDimensionsList.size()};e.InARsAxisProvider.prototype.getTupleElementsCount=function(){return this.m_tupleElementsCount};e.InARsAxisProvider.prototype.getTuplesCount=function(){return this.m_tuplesCount};e.InARsAxisProvider.prototype.getTuplesCountTotal=function(){return this.m_tuplesCountTotal};e.InARsAxisProvider.prototype.importRsDimensions=function(t,n,i){this.m_tuplesCount=t.getIntegerByKey("TupleCount");this.m_tuplesCountTotal=t.getIntegerByKeyExt("TupleCountTotal",-1);if(t.hasStringByKey("ResultAlignment")){this.m_resultAlignment=e.QInAConverter.lookupAlignment(t.getStringByKey("ResultAlignment"));i.setResultAlignment(this.m_resultAlignment)}let r=t.getListByKey("Dimensions");let o=r.size();this.m_rsDimensionsList=e.XArray.create(o);let l=t.getListByKey("Tuples");if(o!==l.size()){throw e.XException.createIllegalStateException("Indicated dimension count and tuple element count is not the same")}let a=null;for(let t=0;t<o;t++){let o=r.getStructureAt(t);let s=this.getDimensionName(o);let u=o.getStructureByKey("Hierarchy");let p=null;if(e.notNull(n)){p=n.getDimensionByNameFromExistingMetadata(s);if(e.notNull(u)&&e.notNull(p)&&this.m_requestContext!==e.QContextType.SELECTOR){let t=u.getIntegerByKeyExt("MaxDrillLevel",-1);let i=u.getIntegerByKeyExt("MaxRuntimeLevel",-1);let r=n.getModelCapabilities();let l=e.notNull(r)&&r.supportsMaxDrillLevel()&&(t!==p.getMaxDrillLevel()||i!==p.getMaxRuntimeLevel());let s=p.getModelCapabilities()!==null&&p.getModelCapabilities().supportsDimensionHierarchyLevels()&&!e.PrUtils.isListEmpty(u.getListByKey("Levels"));let g=p.isEnforceHierarchyNameVariable()||p.isHierarchyActive()&&(p.isEffectivelyUseAnyHierarchyInfoVariable()||p.getHierarchyDueDate()!==null&&(p.isDueDateDefaultByMetadata()||p.isEnforceHierarchyDueDateVariableOrDefault())&&p.getHierarchy()!==null&&!p.getHierarchy().isCustomHierarchy());if(s||l||g){if(e.isNull(a)){a=e.QInAImportFactory.createWithQueryManagerCapabilities(this.getApplication(),e.QModelFormat.INA_DATA,n.getQueryManager())}if(e.notNull(a)){n.stopEventing();a.importHierarchy(p,o);n.resumeEventing()}}}}let g=e.notNull(this.m_lbhToUdhConversionProperties)&&e.XString.isEqual(s,this.m_lbhToUdhConversionProperties.getDimensionName())?this.m_lbhToUdhConversionProperties:null;let m=e.InARsDimension.create(o,p,this.m_requestContext,i,g);if(e.isNull(p)){m.setName(s);m.setText(o.getStringByKey("Description"))}let c=o.getStructureByKey("MemberTypes");if(e.notNull(c)){m.setMemberTypes(e.InARsEncodedValues.createByStructure(c))}m.setupFromRsTuple(l.getStructureAt(t));m.setupNodeAlignmentIfNeeded(i);this.m_rsDimensionsList.set(t,m)}this.m_alertLevel=this.getElementAsListByName(t,"ExceptionAlertLevel");this.m_exceptionNames=this.getElementAsListByName(t,"ExceptionName");if(t.containsKey("UniqueAxisProperties")){let e=t.getStructureByKey("UniqueAxisProperties");this.m_unitDescriptions=this.getElementAsListByNameExt(e,"UnitDescriptions",false);this.m_unitTypes=this.getElementAsListByNameExt(e,"UnitTypes",false);this.m_units=this.getElementAsListByNameExt(e,"Units",false);this.m_complexUnitIndices=this.getElementAsListByNameExt(e,"UnitIndex",false);this.m_decimalPlaces=this.getElementAsListByNameExt(e,"NumericRounding",false);this.m_numericShifts=this.getElementAsListByNameExt(e,"NumericShift",false);this.m_cellValueTypes=this.getElementAsListByNameExt(e,"CellValueTypes",false);this.m_longestCellValuesRounded=this.getElementAsListByNameExt(e,"LongestCellValueRounded",false);this.m_longestCellValuesFormatted=this.getElementAsListByNameExt(e,"LongestCellValueFormatted",false)}this.m_tupleElementsCount=o};e.InARsAxisProvider.prototype.isListValidOnAxis=function(t){return!e.PrUtils.isListEmpty(t)&&t.size()===this.getTuplesCount()};e.InARsAxisProvider.prototype.iterateFields=function(t,n,i,r){let o=n.getKeyFieldIndex();let l=n.getHierarchyNavigationKeyIndex();let a=n.getFields();let s=a.size();let u=n.getTextFieldIndex();let p=this.getOverrideTextForTextField(t,n,i);let g=n.getHierarchyPathFieldIndex();let m=this.getOverrideTextForHierarchyPathField(t,n,i);let c=n.getMeasureIDFieldIndex();let y=null;let d=t.getRsDimensionAtCurrentPosition();let A=e.notNull(d)?d.getQueryModel():null;let I=e.notNull(A)&&A.getSystemType()!==null&&A.getSystemType().isTypeOf(e.SystemType.ABAP);let S=e.XCollectionUtils.map(n.getDimensionDrillGroups(),e=>e.getDimensionName());let f=t.getDrillGroupDimensionInfoAtCurrentPosition()!==null?t.getDrillGroupDimensionInfoAtCurrentPosition().getDimensionName():null;for(let n=0;n<s;n++){t.nextFieldValue();let s=a.get(n);let A=s.getValueExceptionAt(i);if(A!==-1){if(I&&this.m_requestContext!==e.QContextType.RESULT_SET&&A===1){A=0}t.setValueException(e.QInAConverter.lookupException(A))}let C=this.setValueAndReturnFormattedValue(t,s.getValues(),i,s.getValueType());if(e.notNull(p)&&u===n){C=p;t.setString(p)}if(e.notNull(m)&&g===n){C=m;t.setString(m)}if(n===o){t.setDimensionMemberName(C);t.setDimensionMemberNameValueException(t.getValueException());if(r>-1&&r<s.getValues().size()){t.setParentDimensionMemberName(this.getFormattedValue(t,s.getValues(),r,s.getValueType()))}else{t.setParentDimensionMemberName(null)}}if(n===l||s.isHierarchyNavigationField()){t.setValueOfHierarchyNavigationKey(C)}if(d.getDimensionType().isTypeOf(e.DimensionType.ABSTRACT_STRUCTURE)&&n===c){y=C}t.setFormattedValue(C);let N=s.getPresentationType()===e.PresentationType.UDH_KEY&&e.XCollectionUtils.hasElements(S);t.setUdhKey(N?e.RsUdhKey.create(t.getString(),S,f):null)}this.computeQueryDataCellName(t,y,d)};e.InARsAxisProvider.prototype.notifyAxisCursorChange=function(t){if(this.m_currentIndex>=t){this.resetAxisCursor(t)}this.m_currentIndex=t;let n=this.getCursorAxis();n.setTupleElementCursorBeforeStart();let i=!e.PrUtils.isListEmpty(this.m_alertLevel);let r=!e.PrUtils.isListEmpty(this.m_exceptionNames);let o=this.getRsDimensionSize();for(let l=0;l<o;l++){n.nextTupleElement();let o=this.m_rsDimensionsList.get(l);let a=o.getMemberIndexes();let s=a.getNextIntegerValue();let u=-1;n.setDimensionMemberType(o.getMemberType(s));let p=o.getParentIndexes();if(e.notNull(p)){u=p.getNextIntegerValue();n.setParentNodeIndex(a.getIndexForIntegerValue(u))}let g=o.getDrillGroupIndexes();if(e.notNull(g)){let t=g.getNextIntegerValue();n.setDrillGroupIndex(t);let i=t-l;let r=o.getDimensionDrillGroups();if(e.notNull(r)){let e=null;if(i>=0&&r.size()>i){e=r.get(i)}n.setDrillGroupDimensionInfoAtCurrentPosition(e)}}let m=o.getDisplayValues();if(e.notNull(m)){n.setDisplayLevel(m.getNextIntegerValue())}let c=o.getDrillStates();if(e.notNull(c)){n.setDrillState(e.QInAConverter.lookupDrillState(c.getNextIntegerValue(),e.notNull(this.m_lbhToUdhConversionProperties)))}let y=o.getAbsoluteLevelValues();if(e.notNull(y)&&y.hasNextValue()){n.setAbsoluteLevel(y.getNextIntegerValue())}else{n.setAbsoluteLevel(-1)}let d=o.getNodeIds();if(e.notNull(d)){n.setNodeId(d.getNextStringValue())}let A=o.getChildCountValues();if(e.notNull(A)){let e=A.getNextIntegerValue();n.setChildCount(e)}else{n.setChildCount(-1)}if(i&&r){n.setAlertLevel(this.m_alertLevel.getIntegerAtExt(t,0));n.setExceptionName(this.m_exceptionNames.getStringAtExt(t,null))}if(this.isListValidOnAxis(this.m_unitTypes)||this.isListValidOnAxis(this.m_units)){let e=null;let t=-2;let i=null;if(this.isListValidOnAxis(this.m_units)){e=this.m_units.getStringAtExt(this.m_currentIndex,null);t=1}if(this.isListValidOnAxis(this.m_unitTypes)){t=this.m_unitTypes.getIntegerAtExt(this.m_currentIndex,-2)}if(this.isListValidOnAxis(this.m_unitDescriptions)){i=this.m_unitDescriptions.getStringAtExt(this.m_currentIndex,null)}this.updateCurrencyUnit(n.getCurrencyUnitBase(),t,e,i)}if(this.isListValidOnAxis(this.m_complexUnitIndices)){n.setUnitIndex(this.m_complexUnitIndices.getIntegerAtExt(this.m_currentIndex,-1))}if(this.isListValidOnAxis(this.m_decimalPlaces)){n.setDecimalPlaces(this.m_decimalPlaces.getIntegerAtExt(this.m_currentIndex,-1))}if(this.isListValidOnAxis(this.m_numericShifts)){if(this.m_numericShifts.get(this.m_currentIndex)!==null){let t=this.m_numericShifts.getIntegerAt(this.m_currentIndex);n.setScalingFactor(e.XIntegerValue.create(t))}else{n.setScalingFactor(null)}}if(this.isListValidOnAxis(this.m_cellValueTypes)&&this.m_cellValueTypes.get(this.m_currentIndex)!==null){n.setCellValueType(e.QInAConverter.lookupValueTypeByInt(this.m_cellValueTypes.getIntegerAt(this.m_currentIndex)))}if(this.isListValidOnAxis(this.m_longestCellValuesRounded)&&this.m_longestCellValuesRounded.get(this.m_currentIndex)!==null){n.setLongestCellValueRounded(this.m_longestCellValuesRounded.getStringAt(this.m_currentIndex))}if(this.isListValidOnAxis(this.m_longestCellValuesFormatted)&&this.m_longestCellValuesFormatted.get(this.m_currentIndex)!==null){n.setLongestCellValueFormatted(this.m_longestCellValuesFormatted.getStringAt(this.m_currentIndex))}this.iterateFields(n,o,s,u)}};e.InARsAxisProvider.prototype.notifySetAxisMetadata=function(){let e=this.getCursorAxis();let t=this.getRsDimensionSize();e.startAddMetadata(t);for(let n=0;n<t;n++){let t=this.m_rsDimensionsList.get(n);e.addNextTupleElementMetadata(n,t);let i=t.getFields();let r=i.size();for(let t=0;t<r;t++){let n=i.get(t);let r=!this.m_supportsObtainability||n.isVisible();e.addNextFieldMetadata(n.getName(),n.getText(),r,n.getPresentationType(),n.getValueType(),n.getMimeType(),n.isHierarchyNavigationField(),n.getLongestAttribute())}}e.endAddMetadata()};e.InARsAxisProvider.prototype.releaseObject=function(){if(e.notNull(this.m_rsDimensionsList)){let t=this.m_rsDimensionsList.size();for(let n=0;n<t;n++){e.XObjectExt.release(this.m_rsDimensionsList.get(n));this.m_rsDimensionsList.set(n,null)}e.XObjectExt.release(this.m_rsDimensionsList);this.m_rsDimensionsList=null}this.m_alertLevel=e.XObjectExt.release(this.m_alertLevel);this.m_exceptionNames=e.XObjectExt.release(this.m_exceptionNames);this.m_unitDescriptions=e.XObjectExt.release(this.m_unitDescriptions);this.m_unitTypes=e.XObjectExt.release(this.m_unitTypes);this.m_units=e.XObjectExt.release(this.m_units);this.m_complexUnitIndices=e.XObjectExt.release(this.m_complexUnitIndices);this.m_decimalPlaces=e.XObjectExt.release(this.m_decimalPlaces);this.m_numericShifts=e.XObjectExt.release(this.m_numericShifts);this.m_cellValueTypes=e.XObjectExt.release(this.m_cellValueTypes);this.m_longestCellValuesRounded=e.XObjectExt.release(this.m_longestCellValuesRounded);this.m_longestCellValuesFormatted=e.XObjectExt.release(this.m_longestCellValuesFormatted);this.m_lbhToUdhConversionProperties=e.XObjectExt.release(this.m_lbhToUdhConversionProperties);this.m_requestContext=null;e.DfRsAxisProvider.prototype.releaseObject.call(this)};e.InARsAxisProvider.prototype.resetAxisCursor=function(t){if(t!==0){throw e.XException.createIllegalStateException("The axis cursor can only be resetted to 0.")}let n=this.getRsDimensionSize();for(let e=0;e<n;e++){let t=this.m_rsDimensionsList.get(e);this.resetIfNotNull(t.getMemberIndexes());this.resetIfNotNull(t.getParentIndexes());this.resetIfNotNull(t.getDrillGroupIndexes());this.resetIfNotNull(t.getDisplayValues());this.resetIfNotNull(t.getAbsoluteLevelValues());this.resetIfNotNull(t.getDrillStates());this.resetIfNotNull(t.getNodeIds());this.resetIfNotNull(t.getChildCountValues())}};e.InARsAxisProvider.prototype.resetIfNotNull=function(t){if(e.notNull(t)){t.resetCursor()}};e.InARsAxisProvider.prototype.setOcpStructure=function(t,n,i,r,o){this.m_dataCount=i;this.m_lbhToUdhConversionProperties=o;if(e.notNull(n)){this.importRsDimensions(n,t,r)}};e.InARsAxisProvider.prototype.setTuplesCount=function(e,t){if(e<=this.m_tuplesCount){this.m_tuplesCount=e;this.m_tuplesCountTotal=t}};e.InARsAxisProvider.prototype.setValueAndReturnFormattedValue=function(t,n,i,r){if(e.isNull(n)){return"InA Error: No data available"}let o=r;if(o===e.XValueType.UNSUPPORTED){let n=t.getField();if(e.isNull(n)||n.getMetadata()===null){o=e.XValueType.STRING}else{o=n.getValueType()}}let l=t.getDimensionMemberType();let a=l.isRequestedInResultStructure();let s=t.getValueException();let u=s===e.ValueException.NULL_VALUE;let p=n.get(i);let g=e.isNull(p)?null:p.copyAsPrimitiveXValue();let m=e.XValueUtil.getString(g);if(o===e.XValueType.STRING||a){if(a&&e.notNull(s)){if(l===e.MemberType.RESULT){m="Total"}else if(l===e.MemberType.CONDITION_RESULT){m="Total Including"}else if(l===e.MemberType.CONDITION_OTHERS_RESULT){m="Total Remaining"}else if(l===e.MemberType.OTHERS_FROM_CONDITIONS_RESULT){m="Others"}t.setValueException(e.ValueException.NORMAL)}if(l===e.MemberType.RESULT){let t=this.getCursorAxis().getCursorResultSet();let n=t.getTotalsOverrideText();if(e.XStringUtils.isNotNullAndNotEmpty(n)){m=n}}if(t.getValueException()===e.ValueException.NULL_VALUE){m=""}t.setString(m)}else if(o===e.XValueType.BOOLEAN){let n=e.XValueUtil.getBoolean(g,false,true);t.setBoolean(n)}else if(o===e.XValueType.INTEGER){let n=e.XValueUtil.getInteger(g,false,true);t.setInteger(n)}else if(o===e.XValueType.LONG){let n=e.XValueUtil.getLong(g,false,true);t.setLong(n)}else if(o===e.XValueType.DOUBLE){let n=e.XValueUtil.getDouble(g,false,true);t.setDouble(n)}else if(o===e.XValueType.DECIMAL_FLOAT){let n=e.XValueUtil.getDecFloat(g,false,true);t.setDecFloat(n)}else if(o===e.XValueType.DATE){if(u){t.setNullByType(o)}else{let n=e.XDate.createDateFromStringWithFlag(m,this.m_supportsSapDateFormat);if(this.m_supportsSapDateFormat&&e.notNull(n)){m=n.toIsoFormat()}t.setDate(n)}}else if(o===e.XValueType.TIME){if(u){t.setNullByType(o)}else{let n=e.XTime.createTimeFromStringWithFlag(m,this.m_supportsSapDateFormat);if(this.m_supportsSapDateFormat&&e.notNull(n)){m=n.toIsoFormat()}t.setTime(n)}}else if(o===e.XValueType.DATE_TIME){if(u){t.setNullByType(o)}else{let n=e.XDateTime.createDateTimeFromStringWithFlag(m,this.m_supportsSapDateFormat);if(this.m_supportsSapDateFormat&&e.notNull(n)){m=n.toIsoFormat()}t.setDateTime(n)}}else if(o.isSpatial()){let n=e.isNull(m)?null:e.XGeometryValue.createGeometryValueWithWkt(m);if(e.isNull(n)){t.setString(m)}else{let i=n.getValueType();if(i===e.XValueType.MULTI_POLYGON){t.setMultiPolygon(n)}else if(i===e.XValueType.LINE_STRING){t.setLineString(n)}else if(i===e.XValueType.MULTI_LINE_STRING){t.setMultiLineString(n)}else if(i===e.XValueType.POINT){t.setPoint(n)}else if(i===e.XValueType.POLYGON){t.setPolygon(n)}else if(i===e.XValueType.MULTI_POINT){t.setMultiPoint(n)}}}else{let n=e.XMessage.createErrorWithCode(e.OriginLayer.UTILITY,e.ErrorCodes.INVALID_DATATYPE,"Unsupported datatype",null,false,o);t.setErrorValue(n);m=n.getText()}return m};e.InARsAxisProvider.prototype.setupProvider=function(e,t,n,i){this.setupApplicationContext(e);this.m_supportsObtainability=i;this.m_supportsSapDateFormat=n;this.m_requestContext=t;this.m_currentIndex=-1};e.InARsAxisProvider.prototype.updateCurrencyUnit=function(t,n,i,r){t.reset();if(n===1){t.setIsEmpty(false);t.setHasCurrency(true);t.setHasUnit(false);t.setIsMixed(false)}else if(n===2){t.setIsEmpty(false);t.setHasCurrency(false);t.setHasUnit(true);t.setIsMixed(false)}else if(n===3){t.setIsEmpty(false);t.setHasCurrency(true);t.setHasUnit(true);t.setIsMixed(false)}else if(n===-1){t.setIsEmpty(false);t.setIsMixed(true);t.setHasCurrency(true);t.setHasUnit(true)}else if(n!==-2){t.setIsEmpty(true);t.setHasCurrency(false);t.setHasUnit(false);t.setIsMixed(false)}if(!t.isEmpty()&&n!==-2){if(e.notNull(i)){t.setFormatted(i)}if(e.notNull(r)){t.setPrefix(r)}}};e.MeasureValueHelpRsAxisProvider=function(){};e.MeasureValueHelpRsAxisProvider.prototype=new e.DfRsAxisProvider;e.MeasureValueHelpRsAxisProvider.prototype._ff_c="MeasureValueHelpRsAxisProvider";e.MeasureValueHelpRsAxisProvider.create=function(t){let n=new e.MeasureValueHelpRsAxisProvider;n.m_isCorrectDrillState=t.getQueryManager().getSession().hasFeature(e.FeatureToggleOlap.CORRECT_DRILLSTATE_IN_CLASSIC_RESULTSET);return n};e.MeasureValueHelpRsAxisProvider.prototype.m_isCorrectDrillState=false;e.MeasureValueHelpRsAxisProvider.prototype.m_nodes=null;e.MeasureValueHelpRsAxisProvider.prototype.m_rsDimension=null;e.MeasureValueHelpRsAxisProvider.prototype.m_tupleCountTotal=0;e.MeasureValueHelpRsAxisProvider.prototype.copyValueHelpRsAxisProvider=function(t){this.m_isCorrectDrillState=t.m_isCorrectDrillState;if(e.notNull(t.m_nodes)){this.m_nodes=e.XList.create();for(let n=0;n<t.m_nodes.size();n++){let i=t.m_nodes.get(n);this.m_nodes.add(e.QValueHelpNode2.createValueHelpNode(i.getName(),i.getDimensionMember(),i.getDrillState(),i.getDisplayLevel(),i.getChildCount(),i.getAbsoluteLevel(),t.m_isCorrectDrillState))}}if(e.notNull(t.m_rsDimension)){this.m_rsDimension=t.m_rsDimension.clone()}};e.MeasureValueHelpRsAxisProvider.prototype.getDataCount=function(){return this.getTuplesCount()};e.MeasureValueHelpRsAxisProvider.prototype.getFieldValues=e.noSupport;e.MeasureValueHelpRsAxisProvider.prototype.getResultAlignment=e.noSupport;e.MeasureValueHelpRsAxisProvider.prototype.getTupleElementsCount=function(){return e.notNull(this.m_rsDimension)?1:0};e.MeasureValueHelpRsAxisProvider.prototype.getTuplesCount=function(){return e.notNull(this.m_nodes)?this.m_nodes.size():0};e.MeasureValueHelpRsAxisProvider.prototype.getTuplesCountTotal=function(){return this.m_tupleCountTotal};e.MeasureValueHelpRsAxisProvider.prototype.notifyAxisCursorChange=function(t){if(!e.XCollectionUtils.hasElements(this.m_nodes)||t>=this.m_nodes.size()){return}let n=this.m_nodes.get(t);let i=n.getDimensionMember();let r=this.getCursorAxis();r.setTupleElementCursorBeforeStart();r.nextTupleElement();r.setDimensionMemberType(i.getMemberType());r.setNodeId(n.getName());r.setAbsoluteLevel(-1);r.setChildCount(-1);let o=n.getDimension();let l=o.getFields();for(let t=0;t<l.size();t++){r.nextFieldValue();let n=l.get(t);let a=i.getFieldValue(n);let s=e.notNull(a)?a.getString():"";r.setString(s);r.setFormattedValue(s);if(n===o.getKeyField()){r.setDimensionMemberName(s)}}};e.MeasureValueHelpRsAxisProvider.prototype.notifySetAxisMetadata=function(){let t=this.getCursorAxis();if(e.notNull(this.m_nodes)&&e.notNull(this.m_rsDimension)){t.startAddMetadata(1);t.addNextTupleElementMetadata(0,this.m_rsDimension);let e=this.m_rsDimension.getFields();for(let n=0;n<e.size();n++){let i=e.get(n);t.addNextFieldMetadata(i.getName(),i.getText(),true,i.getPresentationType(),i.getValueType(),i.getMimeType(),i.isHierarchyNavigationField(),null)}}else{t.startAddMetadata(0)}t.endAddMetadata()};e.MeasureValueHelpRsAxisProvider.prototype.releaseObject=function(){e.DfRsAxisProvider.prototype.releaseObject.call(this);this.m_nodes=e.XObjectExt.release(this.m_nodes);this.m_rsDimension=e.XObjectExt.release(this.m_rsDimension)};e.MeasureValueHelpRsAxisProvider.prototype.setTuplesCount=e.noSupport;e.MeasureValueHelpRsAxisProvider.prototype.setValueHelpNodes=function(t,n){if(e.notNull(t)&&e.notNull(n)){this.m_nodes=t;this.m_rsDimension=e.MeasureValueHelpRsDimension.create(n);let i=n.getAllStructureMembers();this.m_tupleCountTotal=e.notNull(i)?i.size():t.size();this.m_isCorrectDrillState=n.getQueryManager().getSession().hasFeature(e.FeatureToggleOlap.CORRECT_DRILLSTATE_IN_CLASSIC_RESULTSET)}};e.RuntimeRemoteBlendingQueryUpdaterAction=function(){};e.RuntimeRemoteBlendingQueryUpdaterAction.prototype=new e.SyncAction;e.RuntimeRemoteBlendingQueryUpdaterAction.prototype._ff_c="RuntimeRemoteBlendingQueryUpdaterAction";e.RuntimeRemoteBlendingQueryUpdaterAction.create=function(t,n){let i=new e.RuntimeRemoteBlendingQueryUpdaterAction;i.setupAction(null,null,null,n);i.m_systemToDependentQueriesMap=t;i.m_queryNameToRpcFunctionMap=e.XHashMapByString.create();return i};e.RuntimeRemoteBlendingQueryUpdaterAction.findFirstSourceByAliasName=function(t,n){if(e.notNull(t)){let i=t.size();for(let r=0;r<i;r++){let i=t.getStructureAt(r);let o=e.PrUtils.getStringValueProperty(i,"AliasName",null);if(e.XString.isEqual(o,n.getString())){return i}else if(e.XString.containsString(o,n.getString())){let t=e.PrUtils.getStructureProperty(i,"DefiningContext");t=e.PrUtils.getStructureProperty(t,"Definition");t=e.PrUtils.getStructureProperty(t,"DataSource");let r=e.PrUtils.getPropertyAsList(t,"Sources");return e.RuntimeRemoteBlendingQueryUpdaterAction.findFirstSourceByAliasName(r,n)}}}return null};e.RuntimeRemoteBlendingQueryUpdaterAction.prototype.m_queryNameToRpcFunctionMap=null;e.RuntimeRemoteBlendingQueryUpdaterAction.prototype.m_systemToDependentQueriesMap=null;e.RuntimeRemoteBlendingQueryUpdaterAction.prototype.remainingQueries=0;e.RuntimeRemoteBlendingQueryUpdaterAction.prototype.callListener=function(e,t,n,i){t.onRuntimeRemoteBlendingQueryUpdated(e,n,i)};e.RuntimeRemoteBlendingQueryUpdaterAction.prototype.onFunctionExecuted=function(t,n,i){if(t.getData()!==null){e.InAHelper.importMessages(t.getData().getRootElementGeneric(),this)}this.addAllMessages(t);this.remainingQueries--;if(t.isValid()&&e.notNull(n)){let t=n.getRootElement().getStructureByKey("SerializedData");if(e.notNull(t)){let n=t.getStringByKey("View");let r=t.getStringByKey("Cube");let o=this.getActionContext().getQueryServiceConfig().getDefinitionAsStructure();if(e.notNull(o)){let t=e.PrUtils.getStructureProperty(o,"Analytics");t=e.PrUtils.getStructureProperty(t,"DataSource");let l=e.PrUtils.getPropertyAsList(t,"Sources");if(e.notNull(l)){let t=e.RuntimeRemoteBlendingQueryUpdaterAction.findFirstSourceByAliasName(l,i);let o=e.PrUtils.getStructureProperty(t,"DefiningContext");o=e.PrUtils.getStructureProperty(o,"Definition");o=e.PrUtils.getStructureProperty(o,"DataSource");o=e.PrUtils.getStructureProperty(o,"SerializedData");if(e.notNull(n)){o.putString("View",n)}if(e.notNull(r)){o.putString("Cube",r)}}}this.getActionContext().getQueryServiceConfig().setDefinitionByStructure(e.QModelFormat.INA_DATA,o)}}if(this.remainingQueries===0){this.setData(e.RuntimeRemoteBlendingQueryUpdateResult.create(!this.hasErrors()));this.endSync()}};e.RuntimeRemoteBlendingQueryUpdaterAction.prototype.processInaRequest=function(t,n){let i=null;let r=e.PrUtils.getStructureProperty(t,"Analytics");let o=e.PrUtils.getStructureProperty(r,"Definition");i=e.PrUtils.getStringValueProperty(o,"Name",null);let l=e.PrUtils.getStructureProperty(o,"ResultSetFeatureRequest");let a=this.getActionContext().getApplication().getConnectionPool();let s=a.getOpenConnection(n);let u=l.getStringByKey("ResultSetPersistanceTable");let p=l.getStringByKey("ResultSetPersistanceSchema");let g=false;if(!e.XStringUtils.isNullOrEmpty(u)&&!e.XStringUtils.isNullOrEmpty(p)){if(e.notNull(s)){let t=this.getActionContext().getSystemDescription().getSystemMapping(s.getSystemName());let n=s.getSystemDescription().getSystemMapping(this.getActionContext().getSystemName());if(e.notNull(t)&&e.notNull(n)){g=t.isValid(n)}}if(!g){this.addErrorWithMessage("query not issued for SDI remote blending");return false}}if((g||e.XString.isEqual(e.PrUtils.getStringValueProperty(l,"ResultFormat",null),"SerializedData"))&&e.notNull(i)&&e.notNull(s)){let n=s.getSystemConnect().getServerMetadata();let r=n.getMetadataForService(e.ServerService.ANALYTIC);let o=r.getByKey(e.InACapabilities.C032_FAST_PATH);let l;if(e.notNull(o)&&o.getValue()!==null){l=o.getValue()}else{l=s.getSystemDescription().getSystemType().getInAPath()}let a=s.newRpcFunction(l);a.setServiceName(e.SystemServices.INA_SERVICE);let u=a.getRpcRequest();u.setSapPassportTransactionId(this.getActionContext().getInstanceId());u.setMethod(e.HttpRequestMethod.HTTP_POST);u.setRequestStructure(t);this.m_queryNameToRpcFunctionMap.put(i,a)}else if(!l.getBooleanByKeyExt(e.InAQueryMergeConstants.QY_RETURN_EMPTY_JSON_RESULTSET,false)){this.addErrorWithMessage("Unable to issue dependent remote query for main blending persisted query.");return false}return true};e.RuntimeRemoteBlendingQueryUpdaterAction.prototype.processSynchronization=function(t){let n=this.getActionContext();if(n.getInitSettings().getMode()!==e.QueryManagerMode.RAW_QUERY){this.addErrorWithMessage("processMetadataSerializedQuery is only supported for query managers in raw query mode.")}let i=this.m_systemToDependentQueriesMap.getKeysAsIterator();while(i.hasNext()){let t=i.next();let n=this.m_systemToDependentQueriesMap.getByKey(t).getIterator();while(n.hasNext()){let i=e.XContent.createStringContent(e.QModelFormat.INA_DATA,n.next()).getJsonContent();let r=e.PrUtils.getPropertyAsList(i,e.ConnectionConstants.INA_BATCH);if(e.isNull(r)){if(!this.processInaRequest(i,t)){return false}}else{for(let e=0;e<r.size();e++){if(!this.processInaRequest(r.getStructureAt(e),t)){return false}}}}}let r=!this.hasErrors()&&this.m_queryNameToRpcFunctionMap.size()>0;if(r){this.remainingQueries=this.m_queryNameToRpcFunctionMap.size();let n=this.m_queryNameToRpcFunctionMap.getKeysAsIterator();while(n.hasNext()){let i=n.next();this.m_queryNameToRpcFunctionMap.getByKey(i).processFunctionExecution(t,this,e.XStringValue.create(i))}}return r};e.RuntimeRemoteBlendingQueryUpdaterAction.prototype.releaseObjectInternal=function(){this.m_systemToDependentQueriesMap=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_systemToDependentQueriesMap);this.m_queryNameToRpcFunctionMap=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_queryNameToRpcFunctionMap);this.remainingQueries=0};e.QInAExportImpl=function(){};e.QInAExportImpl.prototype=new e.QInAExport;e.QInAExportImpl.prototype._ff_c="QInAExportImpl";e.QInAExportImpl.prototype.addDataRequest=function(t,n,i,r){if(n===e.OlapComponentType.QUERY_MODEL&&t===e.QModelFormat.INA_CLONE_RENDERING&&this.m_mode===e.QModelFormat.INA_REPOSITORY_DATA_RENDERING){let t=i;let n=t.getQueryManager().serializeToContentExt(e.QModelFormat.INA_PERSISTED_QUERY_DATA,t.getModelCapabilities());if(e.notNull(n)){let t=n.getJsonContent();r.put(e.InAConstantsBios.QY_DATA_REQUEST,t)}}};e.QInAExportImpl.prototype.exportAxesSettings=function(t,n){this.exportComponent(e.OlapComponentType.AXES_SETTINGS,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportAxis=function(t,n){return this.exportComponent(e.OlapComponentType.AXIS,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportBasicMeasure=function(t,n){this.exportComponent(e.MemberType.BASIC_MEASURE,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportBlendingMappings=function(t){return e.QInADataSourceBlending.exportBlendingMappings(t)};e.QInAExportImpl.prototype.exportCalculatedDimension=function(t,n){return this.exportComponent(e.DimensionType.CALCULATED_DIMENSION,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportCartesianList=function(t,n){return this.exportComponent(e.FilterComponentType.CARTESIAN_LIST,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportCellContext=function(t){return this.exportComponent(e.OlapComponentType.CELL_CONTEXT,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportCellContextManager=function(t,n){this.exportComponent(e.OlapComponentType.CELL_CONTEXT_MANAGER,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportCellValueOperand=function(t){return this.exportComponent(e.OlapComponentType.FILTER_CELL_VALUE_OPERAND,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportComponent=function(t,n,i,r){let o=t;if(e.isNull(o)&&e.notNull(n)){o=n.getOlapComponentType()}let l=null;if(e.isNull(o)){this.addError(0,"No component type given for export")}else{let t;if(this.m_mode.isComplexModelFormat()){let a=this.m_mode;let s=i;if(e.isNull(s)){s=e.PrFactory.createStructure()}for(let l=0;l<a.getSizeOfComplexModelFormat();l++){this.m_mode=a.getSubModelFormat(l);let u=e.QModelFormat.getInAKeyForModelFormat(this.m_mode);t=this.lookupInAComponent(o,null);if(e.notNull(t)){let l=t.exportComponent(this,n,i,r);if(e.notNull(l)){s.put(u,l)}this.addDataRequest(a,o,n,s)}}l=s;this.m_mode=a}else{t=this.lookupInAComponent(o,null);if(e.notNull(t)){l=t.exportComponent(this,n,i,r)}}}return l};e.QInAExportImpl.prototype.exportCondition=function(t){return this.exportComponent(e.OlapComponentType.CONDITION,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportConditionManager=function(t,n){this.exportComponent(e.OlapComponentType.CONDITIONS_MANAGER,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportConditionThreshold=function(t){return this.exportComponent(e.OlapComponentType.CONDITIONS_THRESHOLD,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportConvertedTimeCartesianList=function(t,n){return this.exportComponent(e.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportCurrencyMeasure=function(t,n){this.exportComponent(e.MemberType.CURRENCY_MEASURE,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportCurrencyTranslationElement=function(t,n){this.exportComponent(e.OlapComponentType.CURRENCY_TRANSLATION_ITEM,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportCurrencyTranslationManager=function(t,n){if(e.notNull(t)){if(t.shouldExportInAStructure(this.getMode())){this.exportComponent(e.OlapComponentType.CURRENCY_TRANSLATION_MANAGER,t,n,e.QImExFlag.DEFAULT_ALL)}if(t.shouldExportInAList(this.getMode())){this.exportComponent(e.OlapComponentType.CURRENCY_TRANSLATION_LIST,t,n,e.QImExFlag.DEFAULT_ALL)}}};e.QInAExportImpl.prototype.exportCustomHierarchyDefinition=function(t){return this.exportComponent(e.OlapComponentType.CUSTOM_HIERARCHY_DEFINITION,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportDataCell=function(t,n){return this.exportComponent(e.OlapComponentType.DATA_CELL,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportDataCells=function(t,n){this.exportComponent(e.OlapComponentType.DATA_CELLS,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportDataSource=function(t,n){let i=e.QImExFlag.DEFAULT_ALL;if(n){i=e.XMath.binaryXOr(i,e.QImExFlag.RUN_AS_USER)}return this.exportComponent(null,t,null,i)};e.QInAExportImpl.prototype.exportDimension=function(t,n){let i=t.getDimensionType();if(i===e.DimensionType.FORMULA_CALCULATED_DIMENSION||i===e.DimensionType.MEASURE_BASED_FILTER_CALCULATED_DIMENSION||i===e.DimensionType.PARETO_RANK_FILTER_CALCULATED_DIMENSION){return this.exportComponent(e.DimensionType.FORMULA_CALCULATED_DIMENSION,t,n,e.QImExFlag.DEFAULT_ALL)}else if(i===e.DimensionType.CALCULATED_DIMENSION||i===e.DimensionType.FILTER_ACROSS_MODELS_CALCULATED_DIMENSION){return this.exportCalculatedDimension(t,n)}return this.exportComponent(e.OlapComponentType.ABSTRACT_DIMENSION,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportDimensionMemberVariable=function(t,n){return this.exportComponent(e.VariableType.DIMENSION_MEMBER_VARIABLE,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportDimensions=function(t,n){this.exportComponent(e.OlapComponentType.DIMENSIONS,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportDrillManager=function(t,n){this.exportComponent(e.OlapComponentType.DRILL_MANAGER,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportDrillOperation=function(t){return this.exportComponent(e.OlapComponentType.DRILL_OPERATION,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportDrillPathElement=function(t,n){let i=e.QImExFlag.DEFAULT_ALL;if(n){i=e.XMath.binaryXOr(i,e.QImExFlag.DRILL_CONTEXT)}return this.exportComponent(e.MemberType.DRILL_PATH_ELEMENT,t,null,i)};e.QInAExportImpl.prototype.exportDynamicFilter=function(t,n){this.exportComponent(e.OlapComponentType.FILTER_DYNAMIC,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportExceptionAggregationManager=function(t,n){this.exportComponent(e.OlapComponentType.EXCEPTION_AGGREGATION_MANAGER,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportExceptionAggregationMeasure=function(t,n){this.exportComponent(e.MemberType.EXCEPTION_AGGREGATION,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportExceptions=function(t,n){this.exportComponent(e.OlapComponentType.EXCEPTION_MANAGER,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFilter=function(t,n){this.exportComponent(e.OlapComponentType.SELECTOR,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFilterAlgebra=function(t,n){this.exportComponent(e.FilterComponentType.BOOLEAN_ALGEBRA,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFilterCartesianProduct=function(t,n){this.exportComponent(e.FilterComponentType.CARTESIAN_PRODUCT,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFilterElement=function(t){return this.exportComponent(e.OlapComponentType.FILTER_ELEMENT,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFilterExpression=function(t){return this.exportComponent(e.OlapComponentType.FILTER_EXPRESSION,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFilterGeo=function(t,n){this.exportComponent(e.FilterComponentType.SPATIAL_FILTER,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFilterOperation=function(t,n){this.exportComponent(e.FilterComponentType.OPERATION,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFilterTuple=function(t){return this.exportComponent(e.FilterComponentType.TUPLE,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFilterVirtualDatasource=function(t){return this.exportComponent(e.FilterComponentType.VIRTUAL_DATASOURCE,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFixedFilter=function(t,n){this.exportComponent(e.OlapComponentType.FILTER_FIXED,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFormulaException=function(t,n){this.exportComponent(e.OlapComponentType.FORMULA_EXCEPTION,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFormulaExceptionManager=function(t,n){this.exportComponent(e.OlapComponentType.FORMULA_EXCEPTION_MANAGER,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFormulaMeasure=function(t,n){this.exportComponent(e.MemberType.FORMULA,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportHierarchy=function(t,n){this.exportComponent(e.OlapComponentType.HIERARCHY,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportLovRequest=function(t,n,i,r){return e.QInAValueHelp.exportResultSetRequest(this,r,t,n,i)};e.QInAExportImpl.prototype.exportMemberHelpRequest=function(t,n,i){return e.QInAValueHelp.exportMemberHelpRequest(this,t,n,i)};e.QInAExportImpl.prototype.exportMembers=function(t,n){this.exportComponent(e.OlapComponentType.MEMBERS,t,n,e.QImExFlag.DEFAULT_ALL);if(this.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){let i=t.getOrderedStructureMemberNames();if(e.notNull(i)){let r=null;if(t.getDimensionType()===e.DimensionType.ACCOUNT){for(let o=0;o<i.size();o++){let l=i.get(o);let a=t.getLoadedStructureMember(l);if(e.notNull(a)&&!a.isModelDefinedMember()){if(e.isNull(r)){r=n.putNewList("OrderedStructureMemberNames")}r.addString(l)}}}else{r=n.putNewList("OrderedStructureMemberNames");r.addAllStrings(i)}}if(this.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA){let r=t.getStructureLayout().getKeysAsReadOnlyList();if(e.XCollectionUtils.hasElements(i)&&e.XCollectionUtils.hasElements(r)&&!e.XListUtils.areStringListsEqual(i,r)){let e=n.putNewList("OrderedStructureLayoutMemberNames");e.addAllStrings(r)}}}};e.QInAExportImpl.prototype.exportOptionListVariable=function(t,n){this.exportComponent(e.VariableType.OPTION_LIST_VARIABLE,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportPlanningVariableHelpRequest=function(t,n,i){return e.QInAValueHelp.exportPlanningVariableHelpRequest(this,t,n,i)};e.QInAExportImpl.prototype.exportPreQuery=function(t){return this.exportComponent(e.OlapComponentType.QUERY_MODEL,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportQueryCells=function(t,n){this.exportComponent(e.OlapComponentType.QUERY_CELLS,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportQueryModel=function(t,n,i){let r=e.QImExFlag.DEFAULT_ALL;if(!i){r=e.XMath.binaryXOr(r,e.QImExFlag.DATASOURCE)}if(!n){r=e.XMath.binaryXOr(r,e.QImExFlag.VARIABLES)}return this.exportComponent(null,t,null,r)};e.QInAExportImpl.prototype.exportQuerySettings=function(t,n){this.exportComponent(e.OlapComponentType.QUERY_SETTINGS,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportQuickActionManager=function(t,n){if(e.XCollectionUtils.hasElements(t)){this.exportComponent(e.OlapComponentType.QUICK_ACTION_MANAGER,t,n,e.QImExFlag.DEFAULT_ALL)}};e.QInAExportImpl.prototype.exportRestrictedMeasure=function(t,n){this.exportComponent(e.MemberType.RESTRICTED_MEASURE,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportRunningAggregationManager=function(t,n){this.exportComponent(e.OlapComponentType.RUNNING_AGGREGATION_MANAGER,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportSimulationManager=function(t,n){this.exportComponent(e.OlapComponentType.OLAP_SIMULATION_MANAGER,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportSortingManager=function(t,n){this.exportComponent(e.OlapComponentType.SORT_MANAGER,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportStructureDimension=function(t){return this.exportComponent(null,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportStructureMember=function(t){let n;if(this.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){let i=this.exportComponent(null,t,null,e.QImExFlag.DEFAULT_ALL);n=i}else{n=this.exportComponent(e.MemberType.ABSTRACT_MEMBER,t,null,e.QImExFlag.DEFAULT_ALL)}return n};e.QInAExportImpl.prototype.exportTotals=function(t,n){this.exportComponent(e.OlapComponentType.TOTALS,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportUnitMeasure=function(t,n){this.exportComponent(e.MemberType.UNIT_MEASURE,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportUnitTranslationElement=function(t,n){if(!t.isMetadataDefined()||!this.m_mode.isTypeOf(e.QModelFormat.INA_DATA)){this.exportComponent(e.OlapComponentType.UNIT_TRANSLATION_ITEM,t,n,e.QImExFlag.DEFAULT_ALL)}};e.QInAExportImpl.prototype.exportUnitTranslationManager=function(t,n){if(e.notNull(t)&&e.XCollectionUtils.hasElements(t.getMeasureUnitTranslations())&&(!this.m_mode.isTypeOf(e.QModelFormat.INA_DATA)||e.XStream.of(t.getMeasureUnitTranslations()).anyMatch(e=>!e.isMetadataDefined()))){this.exportComponent(e.OlapComponentType.UNIT_TRANSLATION_MANAGER,t,n,e.QImExFlag.DEFAULT_ALL)}};e.QInAExportImpl.prototype.exportUniversalDisplayHierarchies=function(t,n){this.exportComponent(e.OlapComponentType.UNIVERSAL_DISPLAY_HIERARCHIES,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportValueHelpFilter=function(t,n){return this.exportComponent(e.OlapComponentType.SELECTOR,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportVariable=function(t,n){return this.exportComponent(t.getVariableType(),t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportVariableContainer=function(t,n){this.exportComponent(e.OlapComponentType.VARIABLE_CONTAINER,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportVariableHelpRequest=function(t,n,i){return e.QInAValueHelp.exportVariableHelpRequest(this,t,n,i)};e.QInAExportImpl.prototype.exportVariableList=function(t){return this.exportComponent(e.OlapComponentType.VARIABLE_LIST,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportVariables=function(t,n){return this.exportComponent(null,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportVarianceMeasure=function(t,n){this.exportComponent(e.MemberType.VARIANCE,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportVisibilityFilter=function(t,n){this.exportComponent(e.OlapComponentType.FILTER_VISIBILITY,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportVisualizationCellReferenceScope=function(t,n){this.exportComponent(e.OlapComponentType.VISUALIZATION_CELL_REFERENCE_SCOPE,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportVisualizationChartStyle=function(t,n){this.exportComponent(e.OlapComponentType.VISUALIZATION_CHART_STYLE,t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportVisualizationDefinition=function(t,n){this.exportComponent(t.getOlapComponentType(),t,n,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportVisualizationManager=function(t,n){if(e.notNull(t)&&t.isRepoSerializationActive()&&e.XCollectionUtils.hasElements(t.getVisualizationDefinitions())){this.exportComponent(e.OlapComponentType.VISUALIZATION_MANAGER,t,n,e.QImExFlag.DEFAULT_ALL)}};e.QInAImportImpl=function(){};e.QInAImportImpl.prototype=new e.QInAImport;e.QInAImportImpl.prototype._ff_c="QInAImportImpl";e.QInAImportImpl.prototype.getOlapComponentType=function(t,n,i){let r=t;if(e.isNull(r)&&e.notNull(i)){r=i.getOlapComponentType()}if(e.isNull(r)&&e.notNull(n)&&n.isStructure()){let t=n;let i=t.getStringByKey("CType");if(e.notNull(i)){r=e.QInAConverter.lookupComponentType(i)}}return r};e.QInAImportImpl.prototype.getOrderedList=function(t){let n;n=e.XList.create();let i=e.PrUtils.getListSize(t,0);for(let r=0;r<i;r++){let i=e.PrUtils.getStringElement(t,r);e.XObjectExt.assertNotNullExt(i,"illegal state");n.add(i.getString())}return n};e.QInAImportImpl.prototype.importAttribute=function(t,n,i){this.importComponent(e.OlapComponentType.ATTRIBUTE,t,null,n,i)};e.QInAImportImpl.prototype.importAxesSettings=function(t,n){this.importComponent(e.OlapComponentType.AXES_SETTINGS,t,n,null,n)};e.QInAImportImpl.prototype.importAxis=function(t,n,i){this.importComponent(e.OlapComponentType.AXIS,t,n,null,i)};e.QInAImportImpl.prototype.importBasicMeasure=function(t,n,i){return this.importComponent(e.MemberType.BASIC_MEASURE,t,null,n,i)};e.QInAImportImpl.prototype.importBasicQueryModelCapabilities=function(t){this.importComponent(e.OlapComponentType.QUERY_MODEL,null,t,null,t)};e.QInAImportImpl.prototype.importCalculatedDimension=function(t,n){return this.importComponent(e.DimensionType.CALCULATED_DIMENSION,t,null,null,n)};e.QInAImportImpl.prototype.importCartesianList=function(t,n,i,r){return this.importComponent(e.FilterComponentType.CARTESIAN_LIST,t,n,i,r)};e.QInAImportImpl.prototype.importCellContext=function(t,n,i){return this.importComponent(e.OlapComponentType.CELL_CONTEXT,t,null,n,i)};e.QInAImportImpl.prototype.importCellContextManager=function(t,n,i){this.importComponent(e.OlapComponentType.CELL_CONTEXT_MANAGER,t,n,null,i)};e.QInAImportImpl.prototype.importComponent=function(t,n,i,r,o){if(e.notNull(i)){if(this.m_mode===e.QModelFormat.INA_METADATA||this.m_mode===e.QModelFormat.INA_CLONE||this.m_mode===e.QModelFormat.INA_CLONE_RENDERING||this.m_mode===e.QModelFormat.INA_METADATA_CORE||this.m_mode===e.QModelFormat.INA_METADATA_RENDERING||i.isEventingStopped()){i.stopEventing()}else{i.queueEventing()}}let l=true;let a=e.notNull(i)&&i.getOlapComponentType()===e.OlapComponentType.QUERY_MODEL&&this.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY);if(a&&e.notNull(i)){let t=i.getDrillManager();if(e.notNull(n)&&n.asStructure().containsKey("ValidateContextFreeNavigations")){l=n.asStructure().getBooleanByKey("ValidateContextFreeNavigations")}else{l=t.isValidatingContextFreeNavigations()}t.setValidateContextFreeNavigations(false)}let s=this.innerImportComponent(t,n,i,r,o);if(e.notNull(i)){i.resumeEventing();if(a){i.getDrillManager().setValidateContextFreeNavigations(l)}}if(t===e.OlapComponentType.QUERY_MODEL&&e.notNull(i)&&e.notNull(n)){let t=i;if(this.m_mode===e.QModelFormat.INA_METADATA||this.m_mode===e.QModelFormat.INA_METADATA_CORE||this.m_mode===e.QModelFormat.INA_METADATA_RENDERING){t.setServerBaseSerialization(this.m_mode,e.QModelOrigin.IMPORTER,n.asStructure())}}return s};e.QInAImportImpl.prototype.importCondition=function(t,n,i){return this.importComponent(e.OlapComponentType.CONDITION,n,i,t.getConditionManager(),t)};e.QInAImportImpl.prototype.importConditionManager=function(t,n,i){this.importComponent(e.OlapComponentType.CONDITIONS_MANAGER,t,n,null,i)};e.QInAImportImpl.prototype.importConditionThreshold=function(t,n,i,r){return this.importComponent(e.OlapComponentType.CONDITIONS_THRESHOLD,n,i,r,t)};e.QInAImportImpl.prototype.importConvertedTimeCartesianList=function(t,n,i,r){return this.importComponent(e.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST,t,n,i,r)};e.QInAImportImpl.prototype.importCurrencyMeasure=function(t,n,i){return this.importComponent(e.MemberType.CURRENCY_MEASURE,t,null,n,i)};e.QInAImportImpl.prototype.importCurrencyTranslationElement=function(t,n,i){this.importComponent(e.OlapComponentType.CURRENCY_TRANSLATION_ITEM,t,n,null,i)};e.QInAImportImpl.prototype.importCurrencyTranslationManager=function(t,n,i){this.importComponent(e.OlapComponentType.CURRENCY_TRANSLATION_MANAGER,t,n,null,i);this.importComponent(e.OlapComponentType.CURRENCY_TRANSLATION_LIST,t,n,null,i)};e.QInAImportImpl.prototype.importCustomHierarchyDefinition=function(t){return this.importComponent(e.OlapComponentType.CUSTOM_HIERARCHY_DEFINITION,t,null,null,null)};e.QInAImportImpl.prototype.importDataCell=function(t,n){this.importComponent(e.OlapComponentType.DATA_CELL,t,null,null,n)};e.QInAImportImpl.prototype.importDataCells=function(t,n){this.importComponent(e.OlapComponentType.DATA_CELLS,t,null,null,n)};e.QInAImportImpl.prototype.importDataSource=function(t){return this.importComponent(e.OlapComponentType.DATA_SOURCE,t,null,null,null)};e.QInAImportImpl.prototype.importDataSourceExternalDimensions=function(t,n){e.QInADataSourceExtDims.importQd(this,n,t)};e.QInAImportImpl.prototype.importDimension=function(t,n){return this.importComponent(e.OlapComponentType.ABSTRACT_DIMENSION,t,null,null,n)};e.QInAImportImpl.prototype.importDimensionMemberVariable=function(t,n,i){return this.importComponent(e.VariableType.DIMENSION_MEMBER_VARIABLE,t,n,null,i)};e.QInAImportImpl.prototype.importDimensions=function(t,n,i){this.importComponent(e.OlapComponentType.DIMENSIONS,t,n,null,i)};e.QInAImportImpl.prototype.importDocumentsInfo=function(t){return this.importComponent(e.OlapComponentType.DOCUMENTS_INFO,t,null,null,null)};e.QInAImportImpl.prototype.importDrillManager=function(t,n,i){this.importComponent(e.OlapComponentType.DRILL_MANAGER,t,n,null,i)};e.QInAImportImpl.prototype.importDrillOperation=function(t,n,i){this.importComponent(e.OlapComponentType.DRILL_OPERATION,t,null,n,i)};e.QInAImportImpl.prototype.importDrillPathElement=function(t,n,i){return this.importComponent(e.MemberType.DRILL_PATH_ELEMENT,t,null,n,i)};e.QInAImportImpl.prototype.importDynamicFilter=function(t,n,i){this.importComponent(e.OlapComponentType.FILTER_DYNAMIC,t,null,n,i)};e.QInAImportImpl.prototype.importExceptionAggregationManager=function(t,n,i){this.importComponent(e.OlapComponentType.EXCEPTION_AGGREGATION_MANAGER,t,n,null,i)};e.QInAImportImpl.prototype.importExceptionAggregationMeasure=function(t,n,i){return this.importComponent(e.MemberType.EXCEPTION_AGGREGATION,t,null,n,i)};e.QInAImportImpl.prototype.importExceptions=function(t,n){this.importComponent(e.OlapComponentType.EXCEPTION_MANAGER,t,n,null,null)};e.QInAImportImpl.prototype.importFilter=function(t,n,i){this.importComponent(e.OlapComponentType.SELECTOR,t,n,null,i)};e.QInAImportImpl.prototype.importFilterAlgebra=function(t,n,i){return this.importComponent(e.FilterComponentType.BOOLEAN_ALGEBRA,n,null,t,i)};e.QInAImportImpl.prototype.importFilterCellValueOperand=function(t,n){return this.importComponent(e.OlapComponentType.FILTER_CELL_VALUE_OPERAND,t,null,null,n)};e.QInAImportImpl.prototype.importFilterElement=function(t,n,i,r){return this.importComponent(e.OlapComponentType.FILTER_ELEMENT,t,n,i,r)};e.QInAImportImpl.prototype.importFilterExpression=function(t,n,i,r){return this.importComponent(e.OlapComponentType.FILTER_EXPRESSION,n,t,i,r)};e.QInAImportImpl.prototype.importFilterGeo=function(t,n,i){return this.importComponent(e.FilterComponentType.SPATIAL_FILTER,n,null,t,i)};e.QInAImportImpl.prototype.importFilterOperation=function(t,n,i){return this.importComponent(e.FilterComponentType.OPERATION,t,null,n,i)};e.QInAImportImpl.prototype.importFixedFilter=function(t,n,i){this.importComponent(e.OlapComponentType.FILTER_FIXED,t,null,n,i)};e.QInAImportImpl.prototype.importFormulaCalculatedDimension=function(t,n,i){return this.importComponent(e.DimensionType.FORMULA_CALCULATED_DIMENSION,t,i,null,n)};e.QInAImportImpl.prototype.importFormulaException=function(t,n,i,r){return this.importComponent(e.OlapComponentType.FORMULA_EXCEPTION,t,n,i,r)};e.QInAImportImpl.prototype.importFormulaExceptionManager=function(t,n,i){this.importComponent(e.OlapComponentType.FORMULA_EXCEPTION_MANAGER,t,n,null,i)};e.QInAImportImpl.prototype.importFormulaMeasure=function(t,n,i){return this.importComponent(e.MemberType.FORMULA,t,null,n,i)};e.QInAImportImpl.prototype.importFunctionalVariable=function(t,n,i){return this.importComponent(e.VariableType.FUNCTIONAL_VARIABLE,t,n,null,i)};e.QInAImportImpl.prototype.importFunctionalVariables=function(t,n,i){let r=t.getListByKey("Variables");if(e.notNull(r)){e.XStream.of(r).filter(t=>{let i=t.asStructure();let r=i.getStringByKey("CType");let o=i.getStringByKey("Name");return e.XString.isEqual(r,"FunctionalVariable")&&n.getVariable(o)===null}).forEach(t=>{n.addVariable(e.QFunctionalVariable.createFunctionalVariable(i,n,t.asStructure().getStringByKey("Name"),null))})}};e.QInAImportImpl.prototype.importHierarchy=function(t,n){this.importComponent(e.OlapComponentType.HIERARCHY,n,t,null,t.getContext())};e.QInAImportImpl.prototype.importMembers=function(t,n,i){this.importComponent(e.OlapComponentType.MEMBERS,t,n,null,i);let r=null;if(this.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){let i=e.PrUtils.getListProperty(t,"OrderedStructureMemberNames");if(e.notNull(i)){r=this.getOrderedList(i);n.reOrderStructureMembers(r)}}if(this.m_mode===e.QModelFormat.INA_REPOSITORY_DELTA){let i=e.PrUtils.getListProperty(t,"OrderedStructureLayoutMemberNames");if(e.notNull(i)){r=this.getOrderedList(i)}e.XListUtils.reorderList(n.getStructureLayout(),r)}};e.QInAImportImpl.prototype.importModellerCurrencyTranslation=function(t,n,i){this.importComponent(e.OlapComponentType.MODELLER_CURRENCY_TRANSLATION,t,n,null,i)};e.QInAImportImpl.prototype.importModellerDefinedVariables=function(t,n,i){this.importComponent(e.OlapComponentType.MODELLER_VARIABLES,t,n,null,i)};e.QInAImportImpl.prototype.importModellerDimensions=function(t,n,i){this.importComponent(e.OlapComponentType.MODELLER_DIMENSIONS,t,n,null,i)};e.QInAImportImpl.prototype.importModellerMetadataProperties=function(t,n,i){this.importComponent(e.OlapComponentType.MODELLER_METADATA_PROPERTIES,t,n,null,i)};e.QInAImportImpl.prototype.importOptionListVariable=function(t,n,i){return this.importComponent(e.VariableType.OPTION_LIST_VARIABLE,t,n,null,i)};e.QInAImportImpl.prototype.importPreQuery=function(e,t){this.importQueryModel(e,t)};e.QInAImportImpl.prototype.importQueryCells=function(t,n,i){this.importComponent(e.OlapComponentType.QUERY_CELLS,t,n,null,i)};e.QInAImportImpl.prototype.importQueryModel=function(t,n){this.importComponent(e.OlapComponentType.QUERY_MODEL,t,n,null,n)};e.QInAImportImpl.prototype.importQuerySettings=function(t,n){this.importComponent(e.OlapComponentType.QUERY_SETTINGS,t,null,null,n)};e.QInAImportImpl.prototype.importQuickActionManager=function(t,n,i){this.importComponent(e.OlapComponentType.QUICK_ACTION_MANAGER,t,n,null,i)};e.QInAImportImpl.prototype.importRestrictedMeasure=function(t,n,i){return this.importComponent(e.MemberType.RESTRICTED_MEASURE,t,null,n,i)};e.QInAImportImpl.prototype.importRunningAggregationManager=function(t,n,i){this.importComponent(e.OlapComponentType.RUNNING_AGGREGATION_MANAGER,t,n,null,i)};e.QInAImportImpl.prototype.importSimpleTypeVariable=function(t,n,i){return this.importComponent(e.VariableType.SIMPLE_TYPE_VARIABLE,t,n,null,i)};e.QInAImportImpl.prototype.importSimulationManager=function(t,n,i){this.importComponent(e.OlapComponentType.OLAP_SIMULATION_MANAGER,t,n,null,i)};e.QInAImportImpl.prototype.importSortingManager=function(t,n,i){this.importComponent(e.OlapComponentType.SORT_MANAGER,t,n,null,i)};e.QInAImportImpl.prototype.importStructureMember=function(t,n,i){return this.importComponent(e.MemberType.ABSTRACT_MEMBER,n,null,t,i)};e.QInAImportImpl.prototype.importStructureMemberExt=function(t,n,i,r){let o=t===e.MemberType.MEASURE?e.MemberType.BASIC_MEASURE:t;return this.importComponent(o,n,null,i,r)};e.QInAImportImpl.prototype.importTotals=function(t,n,i){this.importComponent(e.OlapComponentType.TOTALS,t,n,null,i)};e.QInAImportImpl.prototype.importTranslationManager=function(t,n,i){this.importComponent(e.OlapComponentType.MEASURE_TRANSLATIONS,t,n,null,i)};e.QInAImportImpl.prototype.importUnitMeasure=function(t,n,i){return this.importComponent(e.MemberType.UNIT_MEASURE,t,null,n,i)};e.QInAImportImpl.prototype.importUnitTranslationElement=function(t,n,i){this.importComponent(e.OlapComponentType.UNIT_TRANSLATION_ITEM,t,n,null,i)};e.QInAImportImpl.prototype.importUnitTranslationManager=function(t,n,i){this.importComponent(e.OlapComponentType.UNIT_TRANSLATION_MANAGER,t,n,null,i)};e.QInAImportImpl.prototype.importUniversalDisplayHierarchies=function(t,n,i){this.importComponent(e.OlapComponentType.UNIVERSAL_DISPLAY_HIERARCHIES,t,n,null,i)};e.QInAImportImpl.prototype.importVariable=function(t,n){return this.importComponent(e.VariableType.ANY_VARIABLE,t,null,n,n)};e.QInAImportImpl.prototype.importVariableList=function(t,n){this.importComponent(e.OlapComponentType.VARIABLE_LIST,t,n,null,null)};e.QInAImportImpl.prototype.importVariableManager=function(t,n,i){this.importComponent(e.OlapComponentType.VARIABLE_MANAGER,t,n,null,i)};e.QInAImportImpl.prototype.importVariables=function(t,n){this.importComponent(e.OlapComponentType.VARIABLE_CONTAINER,t,n,null,null)};e.QInAImportImpl.prototype.importVarianceMeasure=function(t,n,i){return this.importComponent(e.MemberType.VARIANCE,t,null,n,i)};e.QInAImportImpl.prototype.importVisibilityFilter=function(t,n,i){this.importComponent(e.OlapComponentType.FILTER_VISIBILITY,t,null,n,i)};e.QInAImportImpl.prototype.importVisualizationCellReferenceScope=function(t,n,i){this.importComponent(e.OlapComponentType.VISUALIZATION_CELL_REFERENCE_SCOPE,t,n,null,i)};e.QInAImportImpl.prototype.importVisualizationChartStyle=function(t,n,i){this.importComponent(e.OlapComponentType.VISUALIZATION_CHART_STYLE,t,n,null,i)};e.QInAImportImpl.prototype.importVisualizationDefinition=function(e,t){this.importComponent(t.getOlapComponentType(),e,t,null,t.getQueryModel())};e.QInAImportImpl.prototype.importVisualizationManager=function(t,n,i){this.importComponent(e.OlapComponentType.VISUALIZATION_MANAGER,t,n,null,i)};e.QInAImportImpl.prototype.innerImportComponent=function(t,n,i,r,o){let l=this.getOlapComponentType(t,n,i);if(e.isNull(l)){this.addError(0,"Cannot find olap component type for import");return i}let a;let s=i;if(this.m_mode===e.QModelFormat.INA_METADATA){this.m_mode=e.QModelFormat.INA_METADATA_CORE;a=this.lookupInAComponent(l,n);if(e.isNull(a)){return i}s=a.importComponent(this,n,s,r,o);this.m_mode=e.QModelFormat.INA_DATA;a=this.lookupInAComponent(l,n);if(e.isNull(a)){return i}s=a.importComponent(this,n,s,r,o);this.m_mode=e.QModelFormat.INA_METADATA}else if(this.m_mode.isComplexModelFormat()){let t=this.m_mode;let u=n;for(let n=0;n<t.getSizeOfComplexModelFormat();n++){this.m_mode=t.getSubModelFormat(n);let p=e.QModelFormat.getInAKeyForModelFormat(this.m_mode);let g=u.getByKey(p);a=this.lookupInAComponent(l,g);if(e.isNull(a)){return i}s=a.importComponent(this,g,s,r,o)}this.m_mode=t}else{a=this.lookupInAComponent(l,n);if(e.isNull(a)){return i}s=a.importComponent(this,n,s,r,o)}return s};e.QInAImportImpl.prototype.processImport=function(t,n,i,r,o,l,a,s){let u=e.QInAImportAction.create(this,r,o,l,a,s);u.processSyncAction(t,n,i);return u};e.QInAImportImpl.prototype.processImportComponent=function(t,n,i,r,o,l,a){let s=this.m_mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)?this.lookupInAComponent(this.getOlapComponentType(i,r,o),r):null;if(e.isNull(s)||e.isNull(o)){let e=this.importComponent(i,r,o,l,a);n(e);return e}o.queueEventing();return s.processImportComponent(t,e=>{o.resumeEventing();n(e)},this,i,r,o,l,a)};e.InAFusionLayer=function(){};e.InAFusionLayer.prototype=new e.SyncActionExt;e.InAFusionLayer.prototype._ff_c="InAFusionLayer";e.InAFusionLayer.DATASOURCE_ACTION=null;e.InAFusionLayer.METADATA_ACTION=null;e.InAFusionLayer.MODEL_ACTION=null;e.InAFusionLayer.REPO_ACTION=null;e.InAFusionLayer.URL_ACTION=null;e.InAFusionLayer.staticSetup=function(){e.InAFusionLayer.URL_ACTION=e.XComponentType.createType("QDocUrlAction",e.OlapComponentType.OLAP);e.InAFusionLayer.METADATA_ACTION=e.XComponentType.createType("QDocMetadataAction",e.OlapComponentType.OLAP);e.InAFusionLayer.MODEL_ACTION=e.XComponentType.createType("QDocModelAction",e.OlapComponentType.OLAP);e.InAFusionLayer.REPO_ACTION=e.XComponentType.createType("QDocRepoAction",e.OlapComponentType.OLAP);e.InAFusionLayer.DATASOURCE_ACTION=e.XComponentType.createType("QDocDataSourceAction",e.OlapComponentType.OLAP)};e.InAFusionLayer.prototype.m_connectionContainer=null;e.InAFusionLayer.prototype.m_content=null;e.InAFusionLayer.prototype.m_dataSource=null;e.InAFusionLayer.prototype.m_nextActionType=null;e.InAFusionLayer.prototype.m_nextDataSource=null;e.InAFusionLayer.prototype.m_nextDocument=null;e.InAFusionLayer.prototype.m_queryServiceConfig=null;e.InAFusionLayer.prototype.m_serverMetadata=null;e.InAFusionLayer.prototype.callListener=function(e,t,n,i){t.onDocFusionLayerDone(e,n,i)};e.InAFusionLayer.prototype.endSync=function(){this.setData(this);e.SyncActionExt.prototype.endSync.call(this)};e.InAFusionLayer.prototype.getApplication=function(){return this.getActionContext().getApplication()};e.InAFusionLayer.prototype.getConfig=function(){return this.m_queryServiceConfig};e.InAFusionLayer.prototype.getConnection=function(){return this.m_connectionContainer};e.InAFusionLayer.prototype.getConnectionContainer=function(){return this.m_connectionContainer};e.InAFusionLayer.prototype.getConnectionName=function(){return this.getConfig().getConnectionName()};e.InAFusionLayer.prototype.getContent=function(){return this.m_content};e.InAFusionLayer.prototype.getDataSource=function(){return this.m_dataSource};e.InAFusionLayer.prototype.getNextActionType=function(){return this.m_nextActionType};e.InAFusionLayer.prototype.getNextDataSource=function(){return this.m_nextDataSource};e.InAFusionLayer.prototype.getNextDocument=function(){return this.m_nextDocument};e.InAFusionLayer.prototype.getOlapEnv=function(){return this.getApplication().getOlapEnvironment()};e.InAFusionLayer.prototype.getServerMetadata=function(){return this.m_serverMetadata};e.InAFusionLayer.prototype.getSystemDescription=function(){return this.getConfig().getSystemDescription()};e.InAFusionLayer.prototype.getSystemName=function(){return this.getSystemDescription().getSystemName()};e.InAFusionLayer.prototype.getSystemType=function(){return this.getSystemDescription().getSystemType()};e.InAFusionLayer.prototype.hasPrivateConnection=function(){return this.getConfig().hasPrivateConnection()};e.InAFusionLayer.prototype.releaseObjectInternal=function(){};e.InAFusionLayer.prototype.setConfig=function(e){this.m_queryServiceConfig=e};e.InAFusionLayer.prototype.setConnection=function(e){this.m_connectionContainer=e};e.InAFusionLayer.prototype.setContent=function(e){this.m_content=e};e.InAFusionLayer.prototype.setContentExt=function(t,n){let i=e.DocConverterFactory.createDocConverter(n,e.QModelFormat.INA_REPOSITORY);if(e.notNull(i)){let n=i.convert(this.getApplication(),t,e.QModelFormat.INA_REPOSITORY);this.addAllMessages(n);if(this.isValid()){let e=n.getData();this.m_content=e}}else{this.addErrorExt(e.OriginLayer.APPLICATION,0,e.XStringUtils.concatenate2("Cannot find document to ina_repo converter for ",n.getName()),null)}};e.InAFusionLayer.prototype.setDataSource=function(e){this.m_dataSource=e};e.InAFusionLayer.prototype.setNextActionType=function(e){this.m_nextActionType=e};e.InAFusionLayer.prototype.setNextDataSource=function(e){this.m_nextDataSource=e};e.InAFusionLayer.prototype.setNextDocument=function(e){this.m_nextDocument=e};e.InAFusionLayer.prototype.setServerMetadata=function(e){this.m_serverMetadata=e};e.InAFusionMainAction=function(){};e.InAFusionMainAction.prototype=new e.SyncActionExt;e.InAFusionMainAction.prototype._ff_c="InAFusionMainAction";e.InAFusionMainAction.createAndRun=function(t,n,i,r){let o=new e.InAFusionMainAction;o.setupActionAndRun(t,n,i,r);return o};e.InAFusionMainAction.prototype.m_connections=null;e.InAFusionMainAction.prototype.m_nextActionType=null;e.InAFusionMainAction.prototype.m_nextDataSource=null;e.InAFusionMainAction.prototype.m_nextDocument=null;e.InAFusionMainAction.prototype.callListener=function(e,t,n,i){t.onDocFusionDone(this,n,i)};e.InAFusionMainAction.prototype.getApplication=function(){return this.getActionContext().getApplication()};e.InAFusionMainAction.prototype.getConfig=function(){return this.getActionContext().getConfig()};e.InAFusionMainAction.prototype.getConnectionExt=function(t,n,i){let r=this.m_connections.getByKey(t);if(e.isNull(r)){let e=this.getApplication();let o=e.getConnectionPool();r=o.getConnectionExt(t,n,i);this.m_connections.put(t,r)}return r};e.InAFusionMainAction.prototype.onDocFusionLayerDone=function(t,n,i){this.addAllMessages(t);this.getActionContext().addLayer(n);this.m_nextDataSource=null;this.m_nextActionType=null;this.m_nextDocument=null;if(this.isValid()){let t=n.getComponentType();let i=this.getActionContext();let r=n.getContent();this.m_nextActionType=n.getNextActionType();this.m_nextDataSource=n.getNextDataSource();this.m_nextDocument=n.getNextDocument();if(t===e.InAFusionLayer.METADATA_ACTION){let e=n;i.setConnectionContainer(e.getConnectionContainer());i.setServerMetadata(e.getServerMetadata());i.setMetadataContent(r);i.setDataSource(this.m_nextDataSource)}else if(t===e.InAFusionLayer.REPO_ACTION){i.setRepositoryContent(r)}}if(this.getActiveSyncType()===e.SyncType.NON_BLOCKING){if(e.notNull(this.m_nextActionType)){this.processLayer()}else{this.endSync()}}};e.InAFusionMainAction.prototype.processLayer=function(){if(e.isNull(this.m_nextActionType)){this.endSync()}else{let t=this.getConfig();let n=this;let i=this.getActiveSyncType();let r=null;if(i===e.SyncType.BLOCKING){n=null}if(this.m_nextActionType===e.InAFusionLayer.URL_ACTION){r=e.InAFusionUrlAction.createAndRun(i,n,null,this,t,this.m_nextDataSource)}else if(this.m_nextActionType===e.InAFusionLayer.MODEL_ACTION){r=e.InAFusionModelAction.createAndRun(i,n,null,this,t,this.m_nextDataSource)}else if(this.m_nextActionType===e.InAFusionLayer.METADATA_ACTION){r=e.InAFusionMetadataAction.createAndRun(i,n,null,this,t,this.m_nextDataSource,this.m_nextDocument)}else if(this.m_nextActionType===e.InAFusionLayer.REPO_ACTION){r=e.InAFusionRepoAction.createAndRun(i,n,null,this,t,this.m_nextDataSource,this.m_nextDocument)}else if(this.m_nextActionType===e.InAFusionLayer.DATASOURCE_ACTION){r=e.InAFusionDataSourceAction.createAndRun(i,n,null,this,t,this.m_nextDataSource,this.m_nextDocument)}if(e.notNull(r)){if(i===e.SyncType.BLOCKING){let e=r.getData();this.onDocFusionLayerDone(r,e,null)}}else{this.m_nextActionType=null;this.addError(0,"Cannot find action type for fusion");if(i===e.SyncType.NON_BLOCKING){this.endSync()}}}};e.InAFusionMainAction.prototype.processSynchronization=function(t){let n=this.getActionContext();this.setData(n);let i=this.getConfig();this.m_connections=e.XHashMapByString.create();let r=i.getConnectionContainer();if(e.notNull(r)){this.m_connections.put(r.getSystemName(),r)}let o=i.getDefinitionContent();if(e.notNull(o)){let t=o.getContentType();if(t.isTypeOf(e.QModelFormat.INA_REPOSITORY)||t.isTypeOf(e.QModelFormat.INA_CLONE)){this.m_nextActionType=e.InAFusionLayer.REPO_ACTION;this.m_nextDocument=o}else if(t.isTypeOf(e.QModelFormat.INA_METADATA)){this.m_nextActionType=e.InAFusionLayer.METADATA_ACTION;this.m_nextDocument=o}}let l=i.getDataSource();if(e.isNull(this.m_nextActionType)&&e.notNull(l)){if(e.XStringUtils.isNotNullAndNotEmpty(l.getName())){this.m_nextDataSource=l;this.m_nextActionType=e.InAFusionLayer.DATASOURCE_ACTION}}if(this.getActiveSyncType()===e.SyncType.BLOCKING){while(e.notNull(this.m_nextActionType)){this.processLayer()}this.endSync()}else{this.processLayer()}return true};e.InAFusionMainAction.prototype.releaseObjectInternal=function(){};e.InAAutoSubmitMdProcessor=function(){};e.InAAutoSubmitMdProcessor.prototype=new e.DfQContext;e.InAAutoSubmitMdProcessor.prototype._ff_c="InAAutoSubmitMdProcessor";e.InAAutoSubmitMdProcessor.create=function(t,n,i){let r=new e.InAAutoSubmitMdProcessor;r.setupProcessor(t,n,i);return r};e.InAAutoSubmitMdProcessor.getDimensionNamesForPlaceholderFilters=function(t){return e.XStream.of(t).filter(t=>{let n=t;return e.notNull(n)&&n.size()===1&&n.getCartesianElement(0).getLow()!==null&&!n.getCartesianElement(0).getLow().isFunctionalVariableValue()&&n.getCartesianElement(0).getLow().getValueType()!==null&&n.getCartesianElement(0).getLow().getValueType().isVariable()}).collect(e.XStreamCollector.toSetOfString(e=>e.getDimensionName()))};e.InAAutoSubmitMdProcessor.merge=function(t,n,i,r){i.metadataUpdateEventing();let o=e.InAQMgrMergeSettings.create(true);e.InAAutoSubmitMdProcessor.updateCubeInfo(n,i);e.InAAutoSubmitMdProcessor.updateDimensions(t,n,i,r,o);e.InAAutoSubmitMdProcessor.updateVariables(t,n,i,o);e.InAAutoSubmitMdProcessor.updateFilters(t,n,i,o);e.InAAutoSubmitMdProcessor.updateConditions(t,n,i,o);e.InAAutoSubmitMdProcessor.updateSorting(t,n,i,o);e.InAAutoSubmitMdProcessor.updateUniversalDisplayHierarchies(t,n,i,o);i.resumeEventing()};e.InAAutoSubmitMdProcessor.updateConditions=function(t,n,i,r){let o=i.getConditionManagerBase();let l=n.getListByKey("Conditions");if(!i.getModelCapabilities().supportsSortingDefaults()&&e.notNull(o)&&e.notNull(l)){t.importConditionManager(n,o,i)}};e.InAAutoSubmitMdProcessor.updateCubeInfo=function(t,n){let i=n.getCubeInfo();if(e.notNull(i)&&e.notNull(t)){let n=t.getStringByKey("CreatedOn");let r=e.XDateTime.createDateTimeSafe(n);i.setCreatedOn(r);i.setCreatedBy(t.getStringByKey("CreatedBy"));let o=t.getStringByKey("LastDataUpdate");let l=e.XDateTime.createDateTimeSafe(o);i.setLastUpdateOn(l);let a=t.getStringByKey("DueDate");let s=e.XDateTime.createDateTimeSafe(a);i.setDueDate(s)}};e.InAAutoSubmitMdProcessor.updateDimension=function(t,n,i,r,o){if(e.notNull(i)&&e.notNull(n)){if(!i.isPropertyUpdatedByModelerMetadata(e.QDimensionProperties.DIMENSION_TEXT)){i.setText(n.getStringByKey("Description"))}e.InAAutoSubmitMdProcessor.updateHierarchy(t,n,i);e.InAAutoSubmitMdProcessor.updateMembers(t,n,i,o);e.InAAutoSubmitMdProcessor.updateRsDimension(i,r)}};e.InAAutoSubmitMdProcessor.updateDimensions=function(t,n,i,r,o){let l=n.getListByKey("Dimensions");if(e.notNull(l)){let n=l.size();for(let a=0;a<n;a++){let n=l.getStructureAt(a);let s=n.getStringByKey("Name");let u=i.getDimensionByName(s);let p=r.getDimensionByName(s);e.InAAutoSubmitMdProcessor.updateDimension(t,n,u,p,o)}}};e.InAAutoSubmitMdProcessor.updateFilter=function(t,n){if(e.notNull(n)){let i=e.isNull(t)?null:t.getCartesianProduct();let r=n.getCartesianProduct();if(e.notNull(r)){let t=e.InAAutoSubmitMdProcessor.getDimensionNamesForPlaceholderFilters(r);let n=t.getIterator();while(n.hasNext()){let t=n.next();let o=e.isNull(i)?null:i.getCartesianListByDimensionName(t);if(e.notNull(o)){r.getCartesianListByDimensionName(t).copyFrom(o,null)}else{r.removeByDimensionName(t)}}}}};e.InAAutoSubmitMdProcessor.updateFilters=function(t,n,i,r){let o=i.getFilterBase();if(e.notNull(o)){let r=n.getStructureByKey("FixedFilter");let l=e.isNull(r)?null:t.importComponent(e.OlapComponentType.FILTER_EXPRESSION,r,null,null,i);let a=o.getFixedFilter();if(e.notNull(a)){if(e.isNull(l)){a.setComplexRoot(null)}else{a.copyFrom(l,null)}}let s=n.getStructureByKey("DynamicFilter");let u=e.isNull(s)?null:t.importComponent(e.OlapComponentType.FILTER_EXPRESSION,s,null,null,i);e.InAAutoSubmitMdProcessor.updateFilter(u,o.getDynamicFilter())}};e.InAAutoSubmitMdProcessor.updateHierarchy=function(t,n,i){let r=n.getStructureByKey("Hierarchy");if(e.notNull(r)){t.importHierarchy(i,n)}};e.InAAutoSubmitMdProcessor.updateMembers=function(t,n,i,r){let o=n.getListByKey("Members");if(!e.PrUtils.isListEmpty(o)&&i.isStructure()){let t=i.getKeyField().getName();let n=i.getTextField();let r=e.isNull(n)?null:n.getName();if(e.XStringUtils.isNotNullAndNotEmpty(r)){let l=o.size();for(let a=0;a<l;a++){let l=o.getStructureAt(a);let s=l.getStringByKey(t);let u=l.getStringByKey(r);let p=i.getDimensionMember(s);if(e.notNull(p)&&!e.XString.isEqual(p.getText(),u)){p.setText(u);p.getFieldValue(n).setString(u)}}}}};e.InAAutoSubmitMdProcessor.updateRsDimension=function(t,n){if(e.notNull(n)&&e.notNull(t)){n.setText(t.getText());n.setHierarchyName(t.getHierarchyName());n.setHierarchyActive(t.isHierarchyActive());n.setSelectorHierarchyActive(t.isSelectorHierarchyActive());n.setSelectorHierarchyName(t.getSelectorHierarchyName());n.setLowerLevelNodeAlignment(t.getLowerLevelNodeAlignment())}};e.InAAutoSubmitMdProcessor.updateSorting=function(t,n,i,r){let o=i.getSortingManagerBase();let l=n.getListByKey("Sort");if(!i.getModelCapabilities().supportsSortingDefaults()&&e.notNull(o)&&e.notNull(l)){let r=e.QSortingManager.create(i);t.importComponent(e.OlapComponentType.SORT_MANAGER,n,r,i,i);let l=r.getSortingOperations();let a=l.size();for(let t=0;t<a;t++){let n=l.get(t);let i=n.getComponentType();let r=null;if(i===e.OlapComponentType.FIELD_SORTING){let e=n.getField();r=o.getFieldSorting(e,true)}else if(i===e.OlapComponentType.MEASURE_SORTING){let t=n.getMeasure();r=o.getMeasureSorting(t,true);let i=n.getSecondaryMeasure();if(e.notNull(i)&&e.notNull(r)&&r.getSecondaryMeasure()!==i){r.setSecondaryMeasure(i)}}else if(i===e.OlapComponentType.DATA_CELL_SORTING){let e=n.getElementPath();r=o.getDataCellSorting(e,true)}else if(i===e.OlapComponentType.COMPLEX_SORTING){let e=n.getElementPath();r=o.getComplexSorting(e,true)}else if(i===e.OlapComponentType.DIMENSION_SORTING){let t=n.getDimension();r=o.getDimensionSorting(t,true);let i=n.getSortingType();if(i===e.SortType.FILTER){r.setSortByFilter()}else if(i===e.SortType.MEMBER_KEY){r.setSortByKey();let t=n.getCustomSort();let i=n.getCustomSortPosition();if(e.notNull(t)&&!t.isEmpty()){if(t!==r.getCustomSort()){r.setCustomSort(t)}if(i!==r.getCustomSortPosition()){r.setCustomSortPosition(n.getCustomSortPosition())}}}else if(i===e.SortType.MEMBER_TEXT){r.setSortByText()}else if(i===e.SortType.HIERARCHY){r.setSortByHierarchy()}}if(e.notNull(r)){let e=n.getDirection();if(e!==r.getDirection()){r.setDirection(e)}if(n.isPreserveGroupingEnabled()!==r.isPreserveGroupingEnabled()){r.setPreserveGrouping(n.isPreserveGroupingEnabled())}}}e.XObjectExt.release(r)}};e.InAAutoSubmitMdProcessor.updateUniversalDisplayHierarchies=function(t,n,i,r){let o=n.getStructureByKey("UniversalDisplayHierarchies");if(!i.getSession().hasFeature(e.FeatureToggleOlap.SORTING_DEFAULTS)&&e.notNull(o)){let t=o.getListByKey("DefinedHierarchies");if(!e.PrUtils.isListEmpty(t)){let n=i.getUniversalDisplayHierarchiesBase();let r=t.size();for(let i=0;i<r;i++){let r=t.getStructureAt(i);let o=r.getStringByKey("Name");let l=e.isNull(n)?null:n.getByName(o);if(e.notNull(l)){let e=r.getBooleanByKeyExt("Active",l.isActive());l.setActive(e)}}}}};e.InAAutoSubmitMdProcessor.updateVariable=function(t,n,i,r,o){if(e.notNull(r)&&e.notNull(i)){r.setText(i.getStringByKey("Description"));let l=i.getBooleanByKeyExt("InputEnabled",false);r.setInputEnabled(l);if(r.getVariableType().isTypeOf(e.VariableType.DIMENSION_MEMBER_VARIABLE)&&i.containsKey("IsInputEnabledAndExit")){r.setIsInputEnabledAndExit(i.getBooleanByKey("IsInputEnabledAndExit"))}e.InAAutoSubmitMdProcessor.updateVariableValues(t,n,i,r,o)}};e.InAAutoSubmitMdProcessor.updateVariableValues=function(t,n,i,r,o){let l=t.m_mode;t.m_mode=e.QModelFormat.INA_DATA;let a=r.getVariableType();if(a.isTypeOf(e.VariableType.DIMENSION_MEMBER_VARIABLE)){let o=i.getStructureByKey("Values");if(e.notNull(o)){let e=r;t.importDimensionMemberVariable(i,e,n)}}else if(a.isTypeOf(e.VariableType.SIMPLE_TYPE_VARIABLE)){t.importSimpleTypeVariable(i,r,n)}t.m_mode=l};e.InAAutoSubmitMdProcessor.updateVariables=function(t,n,i,r){let o=i.getVariableContainer();let l=n.getListByKey("Variables");if(e.notNull(o)&&e.notNull(l)){let n=l.size();for(let i=0;i<n;i++){let n=e.PrUtils.getStructureElement(l,i);if(e.notNull(n)){let i=n.getStringByKey("Name");let l=o.getVariable(i);e.InAAutoSubmitMdProcessor.updateVariable(t,o,n,l,r)}}}};e.InAAutoSubmitMdProcessor.prototype.m_inaUpdatedMetadata=null;e.InAAutoSubmitMdProcessor.prototype.m_rsQueryModelDef=null;e.InAAutoSubmitMdProcessor.prototype.importMetadataAndUpdateState=function(){let t=this.getContext();if(e.notNull(t)){let n=t.getQueryModel();if(e.notNull(n)){n.setIsMetadataUpdatedByAutoSubmit(false);if(t.isProcessingAutoSubmit()){if(this.m_rsQueryModelDef.isExecuteAutoVariableSubmit()){this.updateModelMetadata(n);this.updateState()}else{this.rollbackState()}}}}};e.InAAutoSubmitMdProcessor.prototype.releaseObject=function(){this.m_inaUpdatedMetadata=e.XObjectExt.release(this.m_inaUpdatedMetadata);this.m_rsQueryModelDef=null};e.InAAutoSubmitMdProcessor.prototype.rollbackState=function(){let t=this.getContext();if(t.isProcessingAutoSubmit()){let n=t.getPreviousVariableProcessorState();if(n===e.VariableProcessorState.CHANGEABLE_STARTUP){t.setVariableProcessorState(e.VariableProcessorState.CHANGEABLE_STARTUP);t.setPreviousVariableProcessorState(null)}else if(n===e.VariableProcessorState.CHANGEABLE_REINIT){t.setVariableProcessorState(e.VariableProcessorState.CHANGEABLE_REINIT);t.setPreviousVariableProcessorState(e.VariableProcessorState.PROCESSING_REINIT)}}};e.InAAutoSubmitMdProcessor.prototype.setupProcessor=function(t,n,i){this.setupContext(t);this.m_inaUpdatedMetadata=e.PrFactory.createStructureDeepCopy(i);this.m_rsQueryModelDef=n};e.InAAutoSubmitMdProcessor.prototype.updateModelMetadata=function(t){if(e.notNull(this.m_inaUpdatedMetadata)){let n=t.getApplication();let i=t.getModelCapabilities();let r=e.QInAImportFactory.createForMetadata(n,i);e.InAAutoSubmitMdProcessor.merge(r,this.m_inaUpdatedMetadata,t,this.m_rsQueryModelDef);t.setIsMetadataUpdatedByAutoSubmit(true)}};e.InAAutoSubmitMdProcessor.prototype.updateState=function(){let t=this.getContext();e.InAQMgrVarAction.clearSavedStateAndExternalizeDynamicFilter(t,t.getVariableProcessorState()===e.VariableProcessorState.PROCESSING_AUTO_SUBMIT,false);t.setVariableProcessorState(e.VariableProcessorState.SUBMITTED);t.prepareAfterVariables()};e.InACustomHierarchyProvider=function(){};e.InACustomHierarchyProvider.prototype=new e.SyncActionExt;e.InACustomHierarchyProvider.prototype._ff_c="InACustomHierarchyProvider";e.InACustomHierarchyProvider.create=function(t,n,i){let r=new e.InACustomHierarchyProvider;r.setupAction(null,null,null,t);r.m_queryProvider=e.XWeakReferenceUtil.getWeakRef(t);r.m_customHierarchyDefinition=e.XWeakReferenceUtil.getWeakRef(n);r.m_enforceRequest=i;return r};e.InACustomHierarchyProvider.prototype.m_customHierarchyDefinition=null;e.InACustomHierarchyProvider.prototype.m_enforceRequest=false;e.InACustomHierarchyProvider.prototype.m_queryProvider=null;e.InACustomHierarchyProvider.prototype.applyCustomHierarchy=function(t){let n=t.getDimension();let i=n.getHierarchyManager();i.addCustomHierarchy(t);let r=n.getCustomHierarchyDefinition();if(e.notNull(r)&&e.XString.isEqual(r.getName(),t.getName())){n.setHierarchy(t);let i=n.getQueryManager();if(e.notNull(i)){if(i.isExecuteAutoVariableSubmit()&&!i.isProcessingAutoSubmit()){let t=n.getHierarchyNameVariableName();if(e.XStringUtils.isNotNullAndNotEmpty(t)){i.getVariable(t).setWinControlInAutoSubmit(false)}}}}this.setData(t)};e.InACustomHierarchyProvider.prototype.createCustomHierarchy=function(t,n){let i=this.getQueryProvider().getQueryModel().getDimensionByName(t.getDimensionName());let r=e.PrUtils.getStringProperty(n,"Name");let o=e.PrUtils.getStringProperty(n,"Version");let l=e.PrUtils.getStringProperty(n,"DueDate");let a=e.QHierarchy.createCustomHierarchy(i.getContext(),i,r.getString(),t.getDescription());if(e.notNull(o)){a.setHierarchyVersion(o.getString())}if(e.notNull(l)){let t=i.getQueryModel().getSystemType().isTypeOf(e.SystemType.ABAP);let n=t?e.XDate.createDateFromSAPFormat(l.getString()):e.XDate.createDateFromIsoFormat(l.getString());a.setHierarchyDueDate(n)}return a};e.InACustomHierarchyProvider.prototype.fillCustomHierarchyRequestStructure=function(t){this.addProfileStep("fillCustomHierarchyRequestStructure");let n=e.PrFactory.createStructure();let i=e.QInAExportFactory.createForData(this.getApplication(),this.getQueryProvider().getModelCapabilities());let r=this.getQueryProvider().setInnerStructure(n,"Analytics",e.ProcessingStep.HIERARCHY_SUBMIT,i);let o=i.exportCustomHierarchyDefinition(t);r.put("Definition",o);this.addAllMessages(i);let l=n.getStructureByKey("Analytics");let a=l.putNewStructure("ProcessingDirectives");a.putString("ProcessingStep","TransientHierarchySubmit");this.endProfileStep();return n};e.InACustomHierarchyProvider.prototype.finalizeCustomHierarchyProcessing=function(t,n){let i=this.getCustomHierarchySessionData();if(e.notNull(i)){i.finishHierarchySubmit(t,n)}this.endSync()};e.InACustomHierarchyProvider.prototype.getApplication=function(){return this.getActionContext().getApplication()};e.InACustomHierarchyProvider.prototype.getCustomHierarchyDefinition=function(){return e.XWeakReferenceUtil.getHardRef(this.m_customHierarchyDefinition)};e.InACustomHierarchyProvider.prototype.getCustomHierarchyRepo=function(){return this.getQueryProvider().getOlapEnv().getCustomHierarchyRepository()};e.InACustomHierarchyProvider.prototype.getCustomHierarchySessionData=function(){let t=null;let n=this.getQueryProvider().getConnection();if(e.notNull(n)){t=n.getCustomObject(e.CustomHierarchySessionData.CUSTOM_HIERARCHY_SESSION_DATA);if(e.isNull(t)){t=e.CustomHierarchySessionData.create();n.addCustomObject(e.CustomHierarchySessionData.CUSTOM_HIERARCHY_SESSION_DATA,t)}}return t};e.InACustomHierarchyProvider.prototype.getQueryProvider=function(){return e.XWeakReferenceUtil.getHardRef(this.m_queryProvider)};e.InACustomHierarchyProvider.prototype.onCustomHierarchySubmitted=function(t,n){if(e.notNull(t)&&t.isEqualTo(this.getCustomHierarchyDefinition())&&this.getSyncState()===e.SyncState.PROCESSING){if(e.notNull(n)){this.applyCustomHierarchy(this.createCustomHierarchy(t,n))}this.endSync()}};e.InACustomHierarchyProvider.prototype.onFunctionExecuted=function(t,n,i){this.addAllMessages(t);let r=this.getCustomHierarchyDefinition();let o=null;if(t.isValid()&&e.notNull(n)&&e.notNull(r)){let t=e.PrUtils.getListProperty(n.getRootElement(),"Grids");let i=e.PrUtils.getStructureElement(t,0);let l=e.PrUtils.getListProperty(i,"Axes");let a=e.PrUtils.getStructureElement(l,0);let s=e.PrUtils.getListProperty(a,"Dimensions");let u=e.PrUtils.getStructureElement(s,0);let p=r.getDimensionName();let g=this.getQueryProvider().getQueryModel().getDimensionByName(p);if(e.isNull(g)||e.isNull(u)||!e.XString.isEqual(p,u.getStringByKey("Name"))){this.addError(e.ErrorCodes.OTHER_ERROR,"Invalid custom hierarchy submit response");this.finalizeCustomHierarchyProcessing(r,null);return}o=u.getStructureByKey("Hierarchy");if(e.isNull(o)||o.getStringByKey("Name")===null){this.addError(e.ErrorCodes.OTHER_ERROR,e.XStringUtils.concatenate2("Invalid custom hierarchy submit response for dimension ",p));this.finalizeCustomHierarchyProcessing(r,null);return}r.setName(o.getStringByKey("Name"));this.getCustomHierarchyRepo().addCustomHierarchy(r);this.applyCustomHierarchy(this.createCustomHierarchy(r,o))}this.finalizeCustomHierarchyProcessing(r,o)};e.InACustomHierarchyProvider.prototype.processExecution=function(t,n,i){let r=this.getCustomHierarchyDefinition();if(e.isNull(r)||e.XStringUtils.isNullOrEmpty(r.getDimensionName())||!e.XCollectionUtils.hasElements(r.getChildNodes())){this.addError(e.ErrorCodes.INVALID_STATE,"Invalid custom hierarchy definition!");return this}return this.processSyncAction(t,n,i)};e.InACustomHierarchyProvider.prototype.processSynchronization=function(t){let n=this.getQueryProvider();let i=this.getCustomHierarchyDefinition();let r=this.getCustomHierarchySessionData();let o=!this.m_enforceRequest&&e.notNull(r)?r.getHierarchyInAResponse(i):null;if(e.notNull(o)){this.applyCustomHierarchy(this.createCustomHierarchy(i,o));return false}else if(e.notNull(r)&&r.registerOnActiveHierarchySubmit(i,this)){return true}else{if(e.notNull(r)){r.flagHierarchySubmitActive(i)}let o=n.createFunction();this.setSyncChild(o);let l=o.getRpcRequest();l.setRequestStructure(this.fillCustomHierarchyRequestStructure(i));o.processFunctionExecution(t,this,null);return true}};e.InACustomHierarchyProvider.prototype.releaseObjectInternal=function(){this.m_queryProvider=e.XObjectExt.release(this.m_queryProvider);this.m_customHierarchyDefinition=e.XObjectExt.release(this.m_customHierarchyDefinition)};e.InAValueHelpProvider=function(){};e.InAValueHelpProvider.prototype=new e.DfQContext;e.InAValueHelpProvider.prototype._ff_c="InAValueHelpProvider";e.InAValueHelpProvider.prototype.m_exportValueHelp=null;e.InAValueHelpProvider.prototype.m_isBwHierarchyNameVariable=false;e.InAValueHelpProvider.prototype.m_valuehelpCallbacks=null;e.InAValueHelpProvider.prototype.m_valuehelpIdentifier=0;e.InAValueHelpProvider.prototype.m_valuehelpIdentifiers=null;e.InAValueHelpProvider.prototype.m_valuehelpProcessedKeys=null;e.InAValueHelpProvider.prototype.m_valuehelpResultNodes=null;e.InAValueHelpProvider.prototype.m_valuehelpResults=null;e.InAValueHelpProvider.prototype.m_variablesSubmittedImplicitly=false;e.InAValueHelpProvider.prototype.checkVariableType=function(t){this.m_isBwHierarchyNameVariable=this.getQueryManager()!==null&&this.getQueryManager().getSystemType().isTypeOf(e.SystemType.ABAP)&&t.getVariableType()===e.VariableType.HIERARCHY_NAME_VARIABLE};e.InAValueHelpProvider.prototype.createResultSetProvider=function(t,n,i){e.XBooleanUtils.checkTrue(this.getQueryManagerBase().getCapabilitiesBase().supportsEncodedResultset(),"Only encoded resultset is supported");let r=i.getRowsAxisDef().getRsDimensions().get(0);if(e.notNull(r)&&r.isStructure()){let t=this.m_variablesSubmittedImplicitly&&!r.isHierarchyActive();let n=!this.m_variablesSubmittedImplicitly&&!r.isSelectorHierarchyActive();this.m_variablesSubmittedImplicitly=false;if(t||n){let t=e.MeasureValueHelpRsProvider.create(this.getDimensionAccessor().getDimensionByName(r.getName()));let n=this.getValueHelpIdentifierString();if(this.hasValueHelpResultNodeForKey(n)){this.putValueHelpResultNode(n,t.getMeasureHelpNodes())}return t}}return e.InARsEnProvider.create(this.getQueryManager(),t,n,e.QContextType.SELECTOR)};e.InAValueHelpProvider.prototype.getExport=function(){return this.m_exportValueHelp};e.InAValueHelpProvider.prototype.getNextValueHelpIdentifier=function(){this.m_valuehelpIdentifier++;return e.XInteger.convertToString(this.m_valuehelpIdentifier)};e.InAValueHelpProvider.prototype.getValueHelpIdentifier=function(){return e.XIntegerValue.create(this.m_valuehelpIdentifier)};e.InAValueHelpProvider.prototype.getValueHelpIdentifierString=function(){return e.XInteger.convertToString(this.m_valuehelpIdentifier)};e.InAValueHelpProvider.prototype.getValueHelpResult=function(e){return this.m_valuehelpResults.getByKey(e)};e.InAValueHelpProvider.prototype.getValueHelpResultSetNode=function(e){return this.m_valuehelpResultNodes.getByKey(e)};e.InAValueHelpProvider.prototype.hasValueHelpResultNodeForKey=function(e){return this.m_valuehelpResultNodes.containsKey(e)};e.InAValueHelpProvider.prototype.lazyLoadValueHelpObjects=function(){if(e.isNull(this.m_exportValueHelp)){this.m_exportValueHelp=e.QInAExportFactory.createForValueHelp(this.getApplication(),this.getModelCapabilities());this.m_valuehelpCallbacks=e.XHashMapByString.create();this.m_valuehelpResults=e.XHashMapByString.create();this.m_valuehelpResultNodes=e.XHashMapByString.create();this.m_valuehelpIdentifiers=e.XHashMapByString.create();this.m_valuehelpProcessedKeys=e.XHashSetOfString.create()}let t=this.m_valuehelpProcessedKeys.getIterator();while(t.hasNext()){let e=t.next();this.m_valuehelpResults.remove(e);this.m_valuehelpResultNodes.remove(e);this.m_valuehelpCallbacks.remove(e);this.m_valuehelpIdentifiers.remove(e)}this.m_valuehelpProcessedKeys.clear()};e.InAValueHelpProvider.prototype.onQueryExecuted=function(t,n,i){let r=i.toString();let o=this.m_valuehelpCallbacks.getByKey(r);let l=this.m_valuehelpIdentifiers.getByKey(r);if(this.m_valuehelpResultNodes.containsKey(r)){let i=this.m_valuehelpResultNodes.getByKey(r);if(e.isNull(i)){i=this.transform(t);this.m_valuehelpResultNodes.put(r,i)}if(e.notNull(o)){o.onValuehelpExecuted(i,n,l)}}else{this.m_valuehelpResults.put(r,t);if(e.notNull(o)){o.onValuehelpExecuted(t,n,l)}}this.m_valuehelpProcessedKeys.add(r)};e.InAValueHelpProvider.prototype.putValueHelpCallback=function(e,t){this.m_valuehelpCallbacks.put(e,t)};e.InAValueHelpProvider.prototype.putValueHelpIdentifier=function(e,t){this.m_valuehelpIdentifiers.put(e,t)};e.InAValueHelpProvider.prototype.putValueHelpResult=function(e,t){this.m_valuehelpResults.put(e,t)};e.InAValueHelpProvider.prototype.putValueHelpResultNode=function(e,t){this.m_valuehelpResultNodes.put(e,t)};e.InAValueHelpProvider.prototype.releaseObject=function(){this.m_valuehelpCallbacks=e.XObjectExt.release(this.m_valuehelpCallbacks);this.m_valuehelpResults=e.XObjectExt.release(this.m_valuehelpResults);this.m_valuehelpResultNodes=e.XObjectExt.release(this.m_valuehelpResultNodes);this.m_valuehelpIdentifiers=e.XObjectExt.release(this.m_valuehelpIdentifiers);this.m_valuehelpProcessedKeys=e.XObjectExt.release(this.m_valuehelpProcessedKeys);this.m_exportValueHelp=e.XObjectExt.release(this.m_exportValueHelp)};e.InAValueHelpProvider.prototype.setVariablesSubmittedImplicitly=function(e){this.m_variablesSubmittedImplicitly=e};e.InAValueHelpProvider.prototype.setupExt=function(e){this.setContext(e);this.m_valuehelpIdentifier=0};e.InAValueHelpProvider.prototype.transform=function(t){if(t.hasErrors()){return e.ExtResult.create(null,t)}let n=t.getData();if(e.isNull(n)||n.hasErrors()){return e.ExtResult.create(null,t)}let i=n.getCursorResultSet();if(i.hasErrors()||i.getState()===e.ResultSetState.ERROR){return e.ExtResult.create(null,t)}let r=e.ProfileNode.create("ValueHelp",0);r.addProfileStep("Transforming ResultSet to List");let o=this.m_isBwHierarchyNameVariable?this.getOlapEnv().getCustomHierarchyRepository().getCustomHierarchyDefinitions().getValuesAsReadOnlyList():null;let l=e.XList.create();if(e.notNull(o)){for(let t=0;t<o.size();t++){let n=o.get(t).getName();e.XCollectionUtils.addIfNotPresent(l,n)}}let a=n.getQueryManager();let s=this.getQueryManager().getSystemType().isTypeOf(e.SystemType.ABAP);let u=a.getConnection();let p=e.notNull(u)?u.getCustomObject(e.CustomHierarchySessionData.CUSTOM_HIERARCHY_SESSION_DATA):null;if(e.notNull(p)){let t=p.getHierarchyDefinitionNames();for(let n=0;n<t.size();n++){let i=t.get(n);e.XCollectionUtils.addIfNotPresent(l,i)}}let g=e.XList.create();let m=e.XList.create();let c=i.getCursorRowsAxis();let y=a.getSession().hasFeature(e.FeatureToggleOlap.CORRECT_DRILLSTATE_IN_CLASSIC_RESULTSET);c.loadDimensionStructureMembers();while(c.hasNextTuple()){c.nextTuple();while(c.hasNextTupleElement()){let t=c.nextTupleElement();let n=t.getDimensionMemberName();let i=t.getDimensionAtCurrentPositionFromQueryModel();let r=t.getRsDimensionAtCurrentPosition();let o=e.notNull(r)?r.getKeyField():null;let a=null;if(s&&i.supportsBasicStructureMembers()&&this.getSession().hasFeature(e.FeatureToggleOlap.STRUCTURE_MEMBER_VALUE_HELP_FIELDS_FROM_METADATA)){a=i.getStructureMember(n)}if(e.isNull(a)){let r=i.getValueHelpDimensionMemberWithFormat(n,e.notNull(o)?o.getValueType():null);r.setName(n);r.setDimensionMemberNameValueException(t.getDimensionMemberNameValueException());while(c.hasNextFieldValue()){let t=c.nextFieldValue();let n=t.getField();let o=t.getValue();let l=null;if(e.notNull(o)){l=r.createAndAddFieldWithValue(n,o)}else if(n.getValueType().isDateTime()){l=r.createAndAddField(n)}if(e.notNull(l)){l.setValueException(t.getValueException());l.setFormattedValue(t.getFormattedValue())}if(e.notNull(o)){let e=o.toString();if(n.isEqualTo(i.getSelectorTextField())){r.setText(e)}else if(n.isEqualTo(i.getSelectorKeyField())){r.setName(e)}}}a=r}let u=a.getName();if(this.m_isBwHierarchyNameVariable){if(!l.contains(u)){g.add(e.XIntegerValue.create(t.getParentNodeIndex()));m.add(e.QValueHelpNode2.createValueHelpNode(u,a,t.getDrillState(),t.getDisplayLevel(),t.getChildCount(),t.getAbsoluteLevel(),y))}}else{g.add(e.XIntegerValue.create(t.getParentNodeIndex()));m.add(e.QValueHelpNode2.createValueHelpNode(u,a,t.getDrillState(),t.getDisplayLevel(),t.getChildCount(),t.getAbsoluteLevel(),y))}}}r.addProfileStep("Assign parent nodes");let d=m.size();for(let e=0;e<d;e++){let t=g.get(e).getInteger();if(t>=0){let n=m.get(t);n.addChildNode(m.get(e))}}e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(g);r.endProfileStep();t.getRootProfileNode().addProfileNode(r);return e.ExtResult.create(m,t)};e.InAFusionDataSourceAction=function(){};e.InAFusionDataSourceAction.prototype=new e.InAFusionLayer;e.InAFusionDataSourceAction.prototype._ff_c="InAFusionDataSourceAction";e.InAFusionDataSourceAction.createAndRun=function(t,n,i,r,o,l,a){let s=new e.InAFusionDataSourceAction;s.setConfig(o);s.setDataSource(l);if(e.notNull(a)){s.setContent(a)}s.setupActionAndRun(t,n,i,r);return s};e.InAFusionDataSourceAction.prototype.getComponentType=function(){return e.InAFusionLayer.DATASOURCE_ACTION};e.InAFusionDataSourceAction.prototype.processSynchronization=function(t){let n=this.getDataSource();let i=n.getType();if(i===e.MetaObjectType.URL){this.setNextActionType(e.InAFusionLayer.URL_ACTION)}else if(i===e.MetaObjectType.SFX){this.setNextActionType(e.InAFusionLayer.MODEL_ACTION)}else{if(e.isNull(i)){let t=this.getConfig();let i=t.getMode();if(i===e.QueryManagerMode.BLENDING){let i=e.QDataSource.create();i.copyFrom(n,null);i.setType(e.MetaObjectType.BLENDING);let r=i.getBlendingDefinition();if(e.isNull(r)){r=t.getBlendingDefinition();i.setBlendingDefinition(r)}if(e.notNull(r)&&e.XStringUtils.isNullOrEmpty(i.getObjectName())){let t=e.XStringBuffer.create();for(let e=0;e<r.getSources().size();e++){t.append(r.getSources().get(e).getQueryAliasName())}let n=t.toString();if(t.length()>=256){n=e.XSha1.createSHA1(n)}i.setObjectName(n)}n=i}}this.setNextActionType(e.InAFusionLayer.METADATA_ACTION)}this.setNextDataSource(n);return false};e.InAFusionLayerRpc=function(){};e.InAFusionLayerRpc.prototype=new e.InAFusionLayer;e.InAFusionLayerRpc.prototype._ff_c="InAFusionLayerRpc";e.InAFusionLayerRpc.prototype.createFunction=function(t){let n=this.getConnection();if(e.isNull(n)){let e=this.getApplication().getConnectionPool();n=e.getOpenConnection(this.getSystemName())}let i=n.newRpcFunction(t);let r=i.getRpcRequest();r.setMethod(e.HttpRequestMethod.HTTP_POST);return i};e.InAFusionLayerRpc.prototype.onServerMetadataLoaded=function(e,t,n){this.addAllMessages(e);if(this.isValid()){this.setServerMetadata(t);this.processMainContentFetch()}else{this.endSync()}};e.InAFusionLayerRpc.prototype.prepare=function(){};e.InAFusionLayerRpc.prototype.processMainContentFetch=function(){this.prepare();let e=this.createSpecificFunction();let t=e.getRpcRequest();let n=this.constructPayload();t.setRequestStructure(n);e.processFunctionExecution(this.getActiveSyncType(),this,null)};e.InAFusionLayerRpc.prototype.processServerMetadataFetch=function(e){let t=this.getActionContext().getConnectionExt(e.getSystemName(),this.hasPrivateConnection(),this.getConnectionName());this.setConnection(t);t.getSystemConnect().getServerMetadataExt(this.getActiveSyncType(),this,null)};e.InAFusionLayerRpc.prototype.processSynchronization=function(t){let n=this.getSystemDescription();if(e.notNull(n)){this.processServerMetadataFetch(n)}else{this.processMainContentFetch()}return true};e.InAFusionRepoAction=function(){};e.InAFusionRepoAction.prototype=new e.InAFusionLayer;e.InAFusionRepoAction.prototype._ff_c="InAFusionRepoAction";e.InAFusionRepoAction.createAndRun=function(t,n,i,r,o,l,a){let s=new e.InAFusionRepoAction;s.setConfig(o);s.setDataSource(l);if(e.notNull(a)){s.setContent(a)}s.setupActionAndRun(t,n,i,r);return s};e.InAFusionRepoAction.prototype.getComponentType=function(){return e.InAFusionLayer.REPO_ACTION};e.InAFusionRepoAction.prototype.processSynchronization=function(t){let n=this.getContent();if(e.notNull(n)){let t=n.getContentType();if(t.isTypeOf(e.QModelFormat.INA_CLONE)){let t=n.getJsonContent();let i=e.XContent.createJsonObjectContent(e.QModelFormat.INA_METADATA_CORE,t.getStructureByKey("Metadata"));let r=e.XContent.createJsonObjectContent(e.QModelFormat.INA_REPOSITORY,t.getStructureByKey("Runtime"));this.setContent(r);this.setNextDocument(i);this.setNextActionType(e.InAFusionLayer.METADATA_ACTION)}else if(t.isTypeOf(e.QModelFormat.INA_REPOSITORY)){let t=n.getJsonContent().asStructure();let i=t.getStringByKey("CType");let r=e.QInAImportFactory.createForRepository(this.getApplication(),null);if(e.XString.isEqual("QueryManager",i)){let n=t.getStructureByKey("QueryServiceConfig");let i=r.importComponent(e.OlapComponentType.QUERY_SERVICE_CONFIG,n,null,null,null);i.getSystemName()}else{let n=r.importDataSource(t);this.addAllMessages(r);this.setNextDataSource(n);this.setNextActionType(e.InAFusionLayer.METADATA_ACTION)}}}return false};e.InAFusionUrlAction=function(){};e.InAFusionUrlAction.prototype=new e.InAFusionLayer;e.InAFusionUrlAction.prototype._ff_c="InAFusionUrlAction";e.InAFusionUrlAction.createAndRun=function(t,n,i,r,o,l){let a=new e.InAFusionUrlAction;a.setConfig(o);a.setDataSource(l);a.setupActionAndRun(t,n,i,r);return a};e.InAFusionUrlAction.prototype.getComponentType=function(){return e.InAFusionLayer.URL_ACTION};e.InAFusionUrlAction.prototype.onHttpResponse=function(t,n,i){this.addAllMessages(t);if(this.isValid()){let t=n.getContentType();if(t===e.QModelFormat.SFX||t===e.QModelFormat.UQM){this.setContentExt(n,t)}else{this.setContent(n)}let i=this.getContent();if(i.getContentType()===e.QModelFormat.INA_REPOSITORY){this.setNextActionType(e.InAFusionLayer.REPO_ACTION);this.setNextDocument(i)}}this.endSync()};e.InAFusionUrlAction.prototype.processSynchronization=function(t){let n=this.getDataSource().getObjectName();let i=this.getSession();let r=e.XUri.createFromFilePath(i,n,e.PathFormat.AUTO_DETECT,e.VarResolveMode.PERCENT,null);let o=e.HttpClientFactory.newInstanceByConnection(i,r);o.getRequest().setFromUri(r);o.processHttpRequest(this.getActiveSyncType(),this,e.XIntegerValue.create(0));return true};e.InAPlanningValueHelpProvider=function(){};e.InAPlanningValueHelpProvider.prototype=new e.InAValueHelpProvider;e.InAPlanningValueHelpProvider.prototype._ff_c="InAPlanningValueHelpProvider";e.InAPlanningValueHelpProvider.create=function(t){let n=new e.InAPlanningValueHelpProvider;n.setupExt(t);return n};e.InAPlanningValueHelpProvider.prototype.m_queryManager=null;e.InAPlanningValueHelpProvider.prototype._valHelpError=function(t,n,i){let r=e.ExtResult.createWithErrorMessage(t);if(e.notNull(n)){n.onValuehelpExecuted(r,null,i)}return r};e.InAPlanningValueHelpProvider.prototype._valHelpResultSetError=function(t,n,i){let r=e.ExtResult.createWithErrorMessage(t);if(e.notNull(n)){n.onValuehelpExecuted(r,null,i)}return r};e.InAPlanningValueHelpProvider.prototype.applyContext=function(t){if(t.getQueryModel()!==null){let n=this.getPlanningCommand().getDimensionAccessor().getDimensionByName(t.getName());let i=t.getSelectorHierarchyNode();if(e.notNull(i)){n.setSelectorHierarchyNode(i)}let r=t.getQueryModel().getFilter().getValuehelpFilter();let o=this.getPlanningCommand().getSelector().getValuehelpFilter();o.copyFrom(r,null)}};e.InAPlanningValueHelpProvider.prototype.getCachedFunctionalVariables=function(t){return e.XList.create()};e.InAPlanningValueHelpProvider.prototype.getPlanningCommand=function(){return this.getContext()};e.InAPlanningValueHelpProvider.prototype.getQueryManager=function(){if(e.isNull(this.m_queryManager)){let t=this.getPlanningCommand();let n=e.QueryServiceConfig.create(this.getApplication());n.setSystemName(t.getSystemName());let i=e.PrFactory.createStructure();let r=i.putNewStructure("Command");let o=r.putNewStructure("DataSource");let l=t.getDataArea().getDataArea();if(e.isNull(l)){l="DEFAULT"}o.putString("DataArea",l);let a=t.getPlanningOperationMetadata();let s=a.getPlanningOperationIdentifier();o.putString("ObjectName",s.getPlanningOperationName());o.putString("Type",s.getPlanningOperationType().getCamelCaseName());o.putString("InstanceId",a.getInstanceId());r.put("Dimensions",a.getDimensions());r.put("Variables",a.getVariables());n.setDefinitionByStructure(e.QModelFormat.INA_METADATA,i);n.setMode(e.QueryManagerMode.RAW_QUERY);let u=n.processQueryManagerCreation(e.SyncType.BLOCKING,null,null);e.MessageUtil.checkNoError(u);let p=u.getData().getQueryModel();let g=e.QInAImportFactory.create(this.getApplication(),e.QModelFormat.INA_METADATA,u.getData().getModelCapabilities());g.importQueryModel(r,p);u.getData().setValueHelpProvider(this);this.m_queryManager=u.getData()}return this.m_queryManager};e.InAPlanningValueHelpProvider.prototype.processFunctionalVariableHelp=function(t,n,i,r){let o=e.ExtResult.createWithErrorMessage("Valuehelp is not supported in this context");if(e.notNull(i)){i.onFunctionalVariablesValueHelpExecuted(o,r)}return o};e.InAPlanningValueHelpProvider.prototype.processValueHelp=function(e,t,n,i){return this._valHelpError("Valuehelp is not supported in this context",n,i)};e.InAPlanningValueHelpProvider.prototype.processValueHelpResultSet=function(e,t,n,i){return this._valHelpResultSetError("Valuehelp is not supported in this context",n,i)};e.InAPlanningValueHelpProvider.prototype.processVarHelp=function(t,n,i,r,o){this.lazyLoadValueHelpObjects();this.applyContext(t);let l=this.getExport().exportPlanningVariableHelpRequest(this.getPlanningCommand(),t,n);this.checkVariableType(n);let a=this.getNextValueHelpIdentifier();this.putValueHelpCallback(a,r);this.putValueHelpIdentifier(a,o);this.putValueHelpResult(a,null);this.putValueHelpResultNode(a,null);let s=null;let u=null;let p=false;let g=e.RsDefQueryModel.create(null,null,s,u,t,p);let m=e.ResultSetContainer.createWithRequest(this.getQueryManager(),this,l,g);m.setOffsetRows(t.getSelectorPagingStart());m.setMaxRows(t.getSelectorPagingEnd()-t.getSelectorPagingStart());if(e.ValueHelpProcessingSequence.customHierarchySubmitRequiredForValueHelp(t)){let n=e.ValueHelpProcessingSequence.createSequence(this.getQueryManager(),t,m,this.getExport(),true,false);n.processSyncAction(i,this,this.getValueHelpIdentifier())}else{m.processExecution(i,this,this.getValueHelpIdentifier())}return!this.isReleased()?this.getValueHelpResultSetNode(a):null};e.InAPlanningValueHelpProvider.prototype.serializeForPersistedInA=function(e){return null};e.InAQueryValueHelpProvider=function(){};e.InAQueryValueHelpProvider.prototype=new e.InAValueHelpProvider;e.InAQueryValueHelpProvider.prototype._ff_c="InAQueryValueHelpProvider";e.InAQueryValueHelpProvider.create=function(t){let n=new e.InAQueryValueHelpProvider;n.setupExt(t);return n};e.InAQueryValueHelpProvider.prototype.getCachedFunctionalVariables=function(t){let n=null;if(!t.getMetadata().hasFunctionalVariables()){n=e.XList.create()}else{let i=e.QVariableUtils.getFunctionalVariables(t.getVariableContainer().getVariables(),t);if(e.XCollectionUtils.hasElements(i)){n=i}}return n};e.InAQueryValueHelpProvider.prototype.getValueHelpRequest=function(e){let t=false;return!e.getSelector().requiresMeasureValueHelp()?this.getExport().exportMemberHelpRequest(this.getQueryModel(),e,t):null};e.InAQueryValueHelpProvider.prototype.internalProcessValueHelp=function(t,n,i,r,o,l,a,s){let u=this.getQueryManager();if(e.notNull(o)){this.setMiscRequest(o,u)}let p=this.getNextValueHelpIdentifier();this.putValueHelpCallback(p,i);this.putValueHelpIdentifier(p,r);this.putValueHelpResult(p,null);if(l){this.putValueHelpResultNode(p,null)}let g=null;let m=null;let c=u.getInitSettings();let y=c.isEnableAutoVariableSubmit();let d=u.isExecuteAutoVariableSubmit()&&!a;let A=t.getSelector().requiresMeasureValueHelp()&&e.isNull(o);if(A){c.setIsEnableAutoVariableSubmit(false)}let I=this.getQueryModel();if(e.notNull(I)){g=I.getRowsAxis();m=I.getColumnsAxis()}let S=e.RsDefQueryModel.create(u,null,g,m,t,d);let f=e.ResultSetContainer.createWithRequest(u,this,o,S);f.setOffsetRows(t.getSelectorPagingStart());f.setMaxRows(t.getSelectorPagingEnd()-t.getSelectorPagingStart());let C=e.ValueHelpProcessingSequence.customHierarchySubmitRequiredForValueHelp(t);if(s||C){let i=e.ValueHelpProcessingSequence.createSequence(u,t,f,this.getExport(),C,s);i.processSyncAction(n,this,this.getValueHelpIdentifier())}else{f.processExecution(n,this,this.getValueHelpIdentifier())}if(A){c.setIsEnableAutoVariableSubmit(y)}return p};e.InAQueryValueHelpProvider.prototype.processFunctionalVariableHelp=function(t,n,i,r){return e.InAQMgrFunctionalVariablesAction.createAndRun(n,this.getQueryManager(),t,i,r)};e.InAQueryValueHelpProvider.prototype.processValueHelp=function(t,n,i,r){let o=null;if(t.getDimensionType().isTypeOf(e.DimensionType.FORMULA_CALCULATED_DIMENSION)){o=t}if(e.notNull(o)){o.generateTransientObjects(this,this.getQueryManager())}this.lazyLoadValueHelpObjects();let l=this.getQueryManagerBase().variablesRequireImplicitSubmitForValueHelp(t);this.setVariablesSubmittedImplicitly(l);let a=this.internalProcessValueHelp(t,n,i,r,this.getValueHelpRequest(t),true,false,l);if(e.notNull(o)){o.destroyTransientObjects(this)}return!this.isReleased()?this.getValueHelpResultSetNode(a):null};e.InAQueryValueHelpProvider.prototype.processValueHelpResultSet=function(e,t,n,i){this.lazyLoadValueHelpObjects();let r=this.getQueryManagerBase().variablesRequireImplicitSubmitForValueHelp(e);let o=this.internalProcessValueHelp(e,t,n,i,this.getValueHelpRequest(e),false,false,r);return!this.isReleased()?this.getValueHelpResult(o):null};e.InAQueryValueHelpProvider.prototype.processVarHelp=function(e,t,n,i,r){this.lazyLoadValueHelpObjects();let o=this.getExport().exportVariableHelpRequest(this.getQueryModel(),e,t);this.checkVariableType(t);let l=this.internalProcessValueHelp(e,n,i,r,o,true,true,false);return!this.isReleased()?this.getValueHelpResultSetNode(l):null};e.InAQueryValueHelpProvider.prototype.serializeForPersistedInA=function(t){let n=this.getQueryManager();this.lazyLoadValueHelpObjects();let i=this.getValueHelpRequest(t);if(e.notNull(i)){this.setMiscRequest(i,n)}return i};e.InAQueryValueHelpProvider.prototype.setMiscRequest=function(t,n){e.QInAOptions.setRequestTimeZone(t,n);let i=t.getStructureByKey("Analytics");if(e.isNull(i)){i=t.getStructureByKey("Planning")}e.QInAOptions.setLanguage(i,n);e.QInAOptions.fillOptions(t,n.getCapabilitiesBase(),n.getSession(),n.getQueryServiceConfig());n.getInaCapabilities().exportActiveCapabilities(i);let r=i.getStructureByKey("Definition");e.QInAOptions.exportOptimizerHints(r,n);e.QInAOptions.exportReturnedDataSelections(r.getStructureByKey("ResultSetFeatureRequest"),n)};e.InAFusionMetadataAction=function(){};e.InAFusionMetadataAction.prototype=new e.InAFusionLayerRpc;e.InAFusionMetadataAction.prototype._ff_c="InAFusionMetadataAction";e.InAFusionMetadataAction.createAndRun=function(t,n,i,r,o,l,a){let s=new e.InAFusionMetadataAction;s.setConfig(o);if(e.notNull(l)){let e=l.clone();e.setInstanceId(o.getInstanceId());s.setDataSource(e)}if(e.notNull(a)){s.setContent(a)}s.setupActionAndRun(t,n,i,r);return s};e.InAFusionMetadataAction.prototype.m_cacheKey=null;e.InAFusionMetadataAction.prototype.m_exporter=null;e.InAFusionMetadataAction.prototype.m_importer=null;e.InAFusionMetadataAction.prototype.m_inaCapabilities=null;e.InAFusionMetadataAction.prototype.m_isCacheCall=false;e.InAFusionMetadataAction.prototype.m_masterCacheAction=null;e.InAFusionMetadataAction.prototype.m_queryManagerCapabilities=null;e.InAFusionMetadataAction.prototype.constructPayload=function(){let t=e.PrFactory.createStructure();let n=this.getConfig();let i=t.putNewStructure("Metadata");let r=n.getProviderType();if(r===e.ProviderType.ANALYTICS||r===e.ProviderType.CATALOG){i.putString("Context","Analytics")}else if(r===e.ProviderType.PLANNING||r===e.ProviderType.PLANNING_VALUE_HELP){i.putString("Context","Planning")}else if(r===e.ProviderType.LIST_REPORTING){i.putString("Context","ListReporting")}let o=n.getSystemDescription().getLanguage();if(e.XStringUtils.isNullOrEmpty(o)){let t=n.getProcess().getUserProfile();if(e.notNull(t)){o=t.getDataAccessLanguage()}}i.putStringNotNullAndNotEmpty("Language",e.XString.toUpperCase(o));let l=this.getDataSource();let a=this.m_exporter.exportDataSource(l,false);e.QInAExportUtil.setNonEmptyString(a,"ValidationHash",l.getValidationHash());if(n.usesMetadataCache()){a.putBoolean("Cache",true)}i.put("DataSource",a);this.m_inaCapabilities.exportActiveCapabilities(i);e.QInAOptions.fillOptions(t,this.m_queryManagerCapabilities,this.getSession(),this.getConfig());let s=l.getDataArea();if(e.XStringUtils.isNotNullAndNotEmpty(s)){let e=this.getDataAreas(s);t.putIfNotNull("DataAreas",e)}let u=e.PrFactory.createList();u.addString("Cube");if(n.isRequestingMinimizedAttributes()){u.addString("MinimizedAttributes")}i.putIfNotNull("Expand",u);return t};e.InAFusionMetadataAction.prototype.createSpecificFunction=function(){let t=this.getSystemDescription();e.XObjectExt.assertNotNullExt(t,"System description is null");let n=this.getInAMainCapabilities().getByKey(e.InACapabilities.C032_FAST_PATH);let i;if(e.notNull(n)&&n.getValue()!==null){i=n.getValue()}else{i=t.getSystemType().getInAPath()}let r=this.createFunction(i);r.setServiceName(e.SystemServices.INA_SERVICE);return r};e.InAFusionMetadataAction.prototype.generateNextDataSource=function(t){let n=this.getDataSource();if(e.isNull(n)&&e.notNull(t)){let i=t.getJsonContent();let r=i.getStructureByKey("Cube");if(e.isNull(r)){r=i}let o=this.m_importer.importDataSource(r);this.addAllMessages(this.m_importer);if(e.notNull(o)){o.setInstanceId(this.getConfig().getInstanceId());o.setSystemName(this.getSystemName());n=o}}this.setNextDataSource(n)};e.InAFusionMetadataAction.prototype.getCacheKey=function(){if(e.isNull(this.m_cacheKey)){let t=this.getConfig();let n=this.getDataSource();if(e.notNull(n)){let i=n.getCacheKeyName();let r=t.getProviderType();let o=this.getSystemDescription();let l=o.getSystemName();let a=null;let s=null;this.m_cacheKey=e.QFactory.createCacheKey(null,l,i,r,a,s,null,null)}}return this.m_cacheKey};e.InAFusionMetadataAction.prototype.getComponentType=function(){return e.InAFusionLayer.METADATA_ACTION};e.InAFusionMetadataAction.prototype.getDataAreas=function(t){let n=null;let i=this.getSystemType();if(i.isTypeOf(e.SystemType.BW)===true){let i=e.PlanningStateHandler.getDataAreaStateByName(this.getApplication(),this.getSystemName(),t);if(e.notNull(i)){if(i.isSubmitted()===false){n=e.PrFactory.createList();n.add(i.serializeToJson())}}}return n};e.InAFusionMetadataAction.prototype.getExporter=function(){return this.m_exporter};e.InAFusionMetadataAction.prototype.getImporter=function(){return this.m_importer};e.InAFusionMetadataAction.prototype.getInACapabilities=function(){return this.m_inaCapabilities};e.InAFusionMetadataAction.prototype.getInAMainCapabilities=function(){return this.m_inaCapabilities.getActiveCapabilities()};e.InAFusionMetadataAction.prototype.getMasterCacheAction=function(){let t=null;if(this.getConfig().isCachingActive()){let n=this.getCacheKey();if(e.notNull(n)){let i=this.getOlapEnv();if(e.notNull(i)){let e=i.getCubeContainer(n);if(e.getDataSource()===null){e.setDataSource(this.getDataSource())}t=e.getMetadataAction(n)}}}return t};e.InAFusionMetadataAction.prototype.onCacheFilled=function(e,t,n){this.addAllMessages(e);this.setContent(t);this.setNextDataSource(this.getDataSource());this.endSync()};e.InAFusionMetadataAction.prototype.onFunctionExecuted=function(t,n,i){this.addAllMessages(t);let r=null;if(this.isValid()){let t=n.getRootElement();r=e.XContent.createJsonObjectContent(e.QModelFormat.INA_METADATA,t);this.setContent(r);this.storeMetadataInCache(t)}if(e.notNull(this.m_masterCacheAction)){if(this.m_masterCacheAction.getPrimarySequenceHandle()===this&&this.m_isCacheCall===true){this.m_masterCacheAction.endProcessing(t,r)}}this.generateNextDataSource(r);this.endSync()};e.InAFusionMetadataAction.prototype.prepare=function(){this.prepareQueryManagerCapabilities();let t=this.getDataSource();if(e.notNull(t)&&t.getType()===e.MetaObjectType.CATALOG_VIEW_2&&this.m_queryManagerCapabilities.supportsCatalogServiceV2()===false){t.setType(e.MetaObjectType.CATALOG_VIEW)}};e.InAFusionMetadataAction.prototype.prepareInACapabilities=function(){let t=this.getConnection();if(e.isNull(t)){this.addError(0,"No connection given");this.endSync()}else{let n=t.getSystemConnect().getServerMetadata();let i=this.getConfig().getProviderType();let r=this.getSession();this.m_inaCapabilities=e.InACapabilitiesProvider.create(r,n,i,null);let o=this.m_inaCapabilities.getServerBetaCapabilities();let l=this.m_inaCapabilities.getServerMainCapabilities();let a=r.getFeatureToggles();if(e.notNull(a)){let t=this.m_inaCapabilities.getActiveCapabilities();let n=a.getKeysAsIterator();while(n.hasNext()){let i=n.next();if(o.containsKey(i)&&e.InACapabilitiesProvider.isDevCapabilityValid(i,r)){t.addCapability(i)}if(l.containsKey(i)){t.addCapability(i)}}}}return this.m_inaCapabilities};e.InAFusionMetadataAction.prototype.prepareQueryManagerCapabilities=function(){if(e.isNull(this.m_queryManagerCapabilities)){this.m_queryManagerCapabilities=this.getInACapabilities().getQueryCapabilities()}return this.m_queryManagerCapabilities};e.InAFusionMetadataAction.prototype.processMainContentFetch=function(){this.prepareInACapabilities();if(this.isValid()){let t=this.prepareQueryManagerCapabilities();let n=e.QInAExportFactory.createForData(this.getApplication(),t);let i=e.QInAImportFactory.createForData(this.getApplication(),t);this.setExporter(n);this.setImporter(i);let r=this.getContent();if(e.notNull(r)){this.generateNextDataSource(r);this.endSync()}else{this.m_masterCacheAction=this.getMasterCacheAction();if(e.notNull(this.m_masterCacheAction)&&this.m_masterCacheAction.getSyncState()!==e.SyncState.IN_SYNC_WITH_ERROR){let t=this.m_masterCacheAction.getSyncState();let n=this.getDataSource();if(e.XString.isEqual(n.getRriName(),"8BBS_ID")&&e.XStringUtils.isNotNullAndNotEmpty(n.getRriValue())){t=e.SyncState.OUT_OF_SYNC}if(t===e.SyncState.PROCESSING){this.m_masterCacheAction.attachCubeMetadataListener(this,null)}else if(t===e.SyncState.OUT_OF_SYNC){this.m_isCacheCall=true;this.m_masterCacheAction.startProcessing(this)}else{this.onCacheFilled(this.m_masterCacheAction,this.m_masterCacheAction.getData(),null)}}else{this.m_isCacheCall=true}if(this.m_isCacheCall){e.InAFusionLayerRpc.prototype.processMainContentFetch.call(this)}}}};e.InAFusionMetadataAction.prototype.setExporter=function(e){this.m_exporter=e};e.InAFusionMetadataAction.prototype.setImporter=function(e){this.m_importer=e};e.InAFusionMetadataAction.prototype.storeMetadataInCache=function(t){if(e.notNull(t)){if(this.m_isCacheCall===true){if(e.notNull(this.m_cacheKey)){let e=this.getOlapEnv();let n=e.getCubeContainer(this.m_cacheKey);let i=t.getStructureByKey("Cube");if(e.isCachingEnabled()){n.setQueryMetadata(this.m_cacheKey,i)}}}}};e.InAFusionModelAction=function(){};e.InAFusionModelAction.prototype=new e.InAFusionLayerRpc;e.InAFusionModelAction.prototype._ff_c="InAFusionModelAction";e.InAFusionModelAction.createAndRun=function(t,n,i,r,o,l){let a=new e.InAFusionModelAction;a.setConfig(o);a.setDataSource(l);a.setupActionAndRun(t,n,i,r);return a};e.InAFusionModelAction.prototype.constructPayload=function(){let t=e.PrFactory.createStructure();let n=this.getDataSource();let i=n.getObjectName();t.putString(e.ContentlibConstants.ACTION,e.ContentlibConstants.V_ACTION_GET_RES);let r=t.putNewStructure(e.ContentlibConstants.DATA);r.putNewList(e.ContentlibConstants.RESOURCE_IDS).addString(i);r.putString(e.ContentlibConstants.RESOURCE_TYPE,e.ContentlibConstants.V_RESOURCE_TYPE_CUBE);let o=r.putNewStructure(e.ContentlibConstants.METADATA);o.putBoolean(e.ContentlibConstants.NAME,true);o.putBoolean(e.ContentlibConstants.DESCRIPTION,true);o.putBoolean(e.ContentlibConstants.ACCESS,true);o.putBoolean(e.ContentlibConstants.USER_AUTH_ONLY,true);o.putBoolean(e.ContentlibConstants.RESOURCE_TYPE,true);o.putBoolean(e.ContentlibConstants.PACKAGE_ID,true);o.putBoolean(e.ContentlibConstants.CREATED_BY,true);o.putBoolean(e.ContentlibConstants.MODIFIED_BY,true);o.putBoolean(e.ContentlibConstants.UPDATE_COUNTER,true);o.putBoolean(e.ContentlibConstants.CREATED_TIME,true);o.putBoolean(e.ContentlibConstants.MODIFIED_TIME,true);o.putBoolean(e.ContentlibConstants.EXCEPTION_NOT_THROWN_FOR_NO_ACCESS,true);o.putBoolean(e.ContentlibConstants.TRANSLATION_ENABLED,true);let l=o.putNewStructure(e.ContentlibConstants.ANCHESTOR_PATH);l.putBoolean(e.ContentlibConstants.NAME,true);l.putBoolean(e.ContentlibConstants.ACCESS,true);let a=o.putNewStructure(e.ContentlibConstants.EPM_OBJECT_DATA);a.putBoolean(e.ContentlibConstants.INCLUDE_DEPENDENCIES,true);a.putBoolean(e.ContentlibConstants.INCLUDE_SUB_ITEMS,true);let s=a.putNewStructure(e.ContentlibConstants.OPTIONS);s.putBoolean(e.ContentlibConstants.DETAIL,true);s.putBoolean(e.ContentlibConstants.VISUALIZATION,true);s.putBoolean(e.ContentlibConstants.RATE,true);s.putBoolean(e.ContentlibConstants.LIST_FORMULA,true);s.putBoolean(e.ContentlibConstants.LIST_VERSION,true);s.putBoolean(e.ContentlibConstants.ADD_METADATA,true);s.putBoolean(e.ContentlibConstants.INCL_SUB_OBJECT_TYPES,true);s.putBoolean(e.ContentlibConstants.PLANNING_FEATURES,true);s.putBoolean(e.ContentlibConstants.TRANSLATED_CUSTOMIZED_DESCRIPTION,true);s.putBoolean(e.ContentlibConstants.NEED_DIMENSION_VALIDATION_RULES,true);return t};e.InAFusionModelAction.prototype.createSpecificFunction=function(){return this.createFunction("/sap/fpa/services/rest/epm/contentlib")};e.InAFusionModelAction.prototype.getComponentType=function(){return e.InAFusionLayer.MODEL_ACTION};e.InAFusionModelAction.prototype.onFunctionExecuted=function(t,n,i){this.addAllMessages(t);if(this.isValid()){let t=n.getRootElementGeneric().asList();let i=t.getStructureAt(0);let r=e.XContent.createJsonObjectContent(e.QModelFormat.SFX,i);this.setContentExt(r,e.QModelFormat.SFX);this.setNextDocument(this.getContent());this.setNextActionType(e.InAFusionLayer.REPO_ACTION)}this.endSync()};e.InAQMgrApplyStateAction=function(){};e.InAQMgrApplyStateAction.prototype=new e.QOlapSyncAction;e.InAQMgrApplyStateAction.prototype._ff_c="InAQMgrApplyStateAction";e.InAQMgrApplyStateAction.createAndRun=function(t,n,i,r,o,l){let a=new e.InAQMgrApplyStateAction;a.stateId=o;a.m_stateManager=l;a.setupActionAndRun(t,i,r,n);return a};e.InAQMgrApplyStateAction.prototype.m_stateManager=null;e.InAQMgrApplyStateAction.prototype.stateId=null;e.InAQMgrApplyStateAction.prototype.callListener=function(e,t,n,i){t.modelStateApplied(e,n,i)};e.InAQMgrApplyStateAction.prototype.processSynchronization=function(e){let t=this.m_stateManager.applyState(this.stateId);if(t.hasErrors()){this.addAllMessages(t)}this.setData(t.getData());return false};e.InAQMgrStartupCacheSync=function(){};e.InAQMgrStartupCacheSync.prototype=new e.QOlapSyncAction;e.InAQMgrStartupCacheSync.prototype._ff_c="InAQMgrStartupCacheSync";e.InAQMgrStartupCacheSync.createAndRun=function(t,n,i,r,o){let l=new e.InAQMgrStartupCacheSync;l.m_config=o;l.setupActionAndRun(t,n,i,r);return l};e.InAQMgrStartupCacheSync.prototype.m_cacheKey=null;e.InAQMgrStartupCacheSync.prototype.m_config=null;e.InAQMgrStartupCacheSync.prototype.m_cubeStructure=null;e.InAQMgrStartupCacheSync.prototype.m_isCacheCall=false;e.InAQMgrStartupCacheSync.prototype.getCacheKey=function(){if(e.isNull(this.m_cacheKey)){this.m_cacheKey=e.QFactory.createCacheKeyByContext(this.getActionContext())}return this.m_cacheKey};e.InAQMgrStartupCacheSync.prototype.getMasterCacheAction=function(){let t=null;let n=this.m_config.isCachingActive();if(n===true){let n=this.getCacheKey();if(e.notNull(n)){let i=this.m_config.getApplication().getOlapEnvironment();if(e.notNull(i)){let e=i.getCubeContainer(n);t=e.getMetadataAction(n)}}}return t};e.InAQMgrStartupCacheSync.prototype.getMetadataInCache=function(){let t=null;if(e.notNull(this.m_cacheKey)){let n=this.getOlapEnv();if(n.isCachingEnabled()){let i=n.getCubeContainer(this.m_cacheKey);let r=i.getQueryMetadata(this.m_cacheKey);if(e.notNull(r)){t=e.PrFactory.createStructure();t.put("Cube",r)}}}return t};e.InAQMgrStartupCacheSync.prototype.isMasterCacheCall=function(){return this.m_isCacheCall};e.InAQMgrStartupCacheSync.prototype.onActionSequenceFinalized=function(t,n){let i=this.getMasterCacheAction();if(e.notNull(i)){if(i.getPrimarySequenceHandle()===this&&this.m_isCacheCall===true){let n=e.XContent.createJsonObjectContent(e.ContentType.APPLICATION_JSON,this.m_cubeStructure);i.endProcessing(t,n)}}};e.InAQMgrStartupCacheSync.prototype.onCacheFilled=function(e,t,n){this.endSync()};e.InAQMgrStartupCacheSync.prototype.processSynchronization=function(t){let n=this.getMasterCacheAction();if(e.notNull(n)){if(n.getSyncState()===e.SyncState.PROCESSING){n.attachCubeMetadataListener(this,null);return true}else if(n.getSyncState()===e.SyncState.OUT_OF_SYNC){this.m_isCacheCall=true;n.startProcessing(this)}}return false};e.InAQMgrStartupCacheSync.prototype.storeMetadataInCache=function(t){if(e.notNull(t)){if(this.m_isCacheCall===true){if(e.notNull(this.m_cacheKey)){let e=this.getOlapEnv();let n=e.getCubeContainer(this.m_cacheKey);this.m_cubeStructure=t.getStructureByKey("Cube");if(e.isCachingEnabled()){n.setQueryMetadata(this.m_cacheKey,this.m_cubeStructure)}}}}};e.InAQMgrSyncAction=function(){};e.InAQMgrSyncAction.prototype=new e.QOlapSyncAction;e.InAQMgrSyncAction.prototype._ff_c="InAQMgrSyncAction";e.InAQMgrSyncAction.prototype.m_rpcFunction=null;e.InAQMgrSyncAction.prototype.cancelSynchronization=function(){e.QOlapSyncAction.prototype.cancelSynchronization.call(this);this.m_rpcFunction.cancelSynchronization()};e.InAQMgrSyncAction.prototype.createFunction=function(){return this.getActionContext().createFunction()};e.InAQMgrSyncAction.prototype.fillRequestStructure=function(){let t=this.getActionContext();let n=t.getInstanceId();if(e.isNull(n)){return null}let i=e.PrFactory.createStructure();let r=this.getApplication();let o=this.getSession();let l=t.getOlapSystemContainer();let a=l.getServiceCapabilities(e.ServerService.ANALYTIC);let s=this.getQueryModel();let u;let p=r.getSystemLandscape().getSystemDescription(l.getSystemName()).getSystemType().isTypeOf(e.SystemType.BW);if(e.notNull(s)){u=s}else{u=r}if(o.hasFeature(e.FeatureToggleOlap.FLEX_CLIENT_INFO)&&a.supportsFlexibleClientInfo()){e.QInAClientInfo.exportFlexibleClientInfo(i,u)}else if(o.hasFeature(e.FeatureToggleOlap.CLIENT_INFO_METADATA)){e.QInAClientInfo.exportClientInfo(i,u,a.supportsClientInfo(),p)}return i};e.InAQMgrSyncAction.prototype.initPlanningSupport=function(t,n){let i=this.getActionContext();let r=i.getCapabilitiesBase();let o=r.getSystemType().isTypeOf(e.SystemType.BW);let l=i.supportsDataEntryReadOnly();let a=i.isDataEntryEnabled();let s;if(o){a=e.PrUtils.getBooleanProperty(t,"DefaultInputMode")!==null;if(a){if(n){s=!e.PrUtils.getBooleanValueProperty(t,"DefaultInputMode",false)}else{s=!e.PrUtils.getBooleanValueProperty(t,"InputEnabled",false)}}else{s=true}l=a}else{if(!a){a=e.PrUtils.getBooleanValueProperty(t,"InputEnabled",false)}s=!a}i.getQueryModelBase().setSupportsDataEntryReadOnly(l);i.setDataEntryReadOnly(s);i.setDataEntryEnabled(a);if(o&&a){i.initializeDataAreaState()}};e.InAQMgrSyncAction.prototype.releaseObjectInternal=function(){this.m_rpcFunction=e.XObjectExt.release(this.m_rpcFunction);e.QOlapSyncAction.prototype.releaseObjectInternal.call(this)};e.InARsEnProvider=function(){};e.InARsEnProvider.prototype=new e.DfResultSetProvider;e.InARsEnProvider.prototype._ff_c="InARsEnProvider";e.InARsEnProvider.create=function(t,n,i,r){let o=new e.InARsEnProvider;o.setupHanalyticsResultSetProvider(t,n,i,r);return o};e.InARsEnProvider.prototype.m_columnAxisProvider=null;e.InARsEnProvider.prototype.m_complexUnitsSetting=null;e.InARsEnProvider.prototype.m_contextType=null;e.InARsEnProvider.prototype.m_dataCellProvider=null;e.InARsEnProvider.prototype.m_initProcedure=null;e.InARsEnProvider.prototype.m_initStructure=null;e.InARsEnProvider.prototype.m_isTransientQueryProvider=false;e.InARsEnProvider.prototype.m_queryProvider=null;e.InARsEnProvider.prototype.m_rowsAxisProvider=null;e.InARsEnProvider.prototype.m_updatedMetadataProcessor=null;e.InARsEnProvider.prototype.assignMergeId=function(t,n){if(this.getSession().hasFeature(e.FeatureToggleOlap.INA_MERGE_PROCESSING)){let i=n.getStringByKey(e.InAQueryMergeConstants.TAG_MERGE_ID);t.getResultSetContainer().setMergeId(i)}};e.InARsEnProvider.prototype.buildComplexUnit=function(t,n,i,r){let o=e.XList.create();let l=e.XList.create();let a=e.XList.create();let s=e.XList.create();let u=n.size();for(let p=0;p<u;p++){o.add(t.getStringAt(p));l.add(n.getStringAt(p));a.add(i.getStringAt(p));s.add(e.XIntegerValue.create(r.getIntegerAt(p)))}return e.RsComplexUnit.create(o,l,a,s)};e.InARsEnProvider.prototype.clearFunctionalVariablesResolvedValues=function(t){if(e.notNull(t)&&t.getVariableContainer()!==null){let n=t.getVariableContainer();if(e.notNull(n)){e.XStream.of(n.getVariables()).filter(t=>t.getVariableType().isTypeOf(e.VariableType.FUNCTIONAL_VARIABLE)).map(e=>e).forEach(e=>{e.clearResolvedValues()})}}};e.InARsEnProvider.prototype.cloneExt=function(t){let n=e.InARsEnProvider.create(this.m_queryProvider,this.m_initProcedure,this.m_initStructure,this.m_contextType);n.copyFromResultSetProvider(this);return n};e.InARsEnProvider.prototype.connectDataCells=function(t){let n=t.getStructureByKey("Cells");if(e.notNull(n)){let i=t.getListByKey("CellArraySizes");let r=e.PrUtils.getListSize(i,0);let o=0;let l=0;if(r>0){o=i.getIntegerAt(0)}if(r>1){l=i.getIntegerAt(1)}let a=t.getListByKey("ExceptionSettings");this.m_dataCellProvider.setOcpStructure(n,l,o,a)}};e.InARsEnProvider.prototype.copyFromResultSetProvider=function(t){let n=t;this.m_columnAxisProvider.copyInARsAxisProvider(n.m_columnAxisProvider);this.m_rowsAxisProvider.copyInARsAxisProvider(n.m_rowsAxisProvider);this.m_dataCellProvider.copyInARsDataCellProvider(n.m_dataCellProvider);this.m_initProcedure=n.m_initProcedure;if(e.notNull(n.m_initStructure)){this.m_initStructure=n.m_initStructure.getPermaCopy()}this.m_queryProvider=n.m_queryProvider;this.m_isTransientQueryProvider=n.m_isTransientQueryProvider;if(e.notNull(n.m_complexUnitsSetting)){this.m_complexUnitsSetting=e.XCollectionUtils.createListOfClones(this.m_complexUnitsSetting)}};e.InARsEnProvider.prototype.getColumnAxisProvider=function(){return this.m_columnAxisProvider};e.InARsEnProvider.prototype.getComplexUnitsSetting=function(){return this.m_complexUnitsSetting};e.InARsEnProvider.prototype.getDataCellProvider=function(){return this.m_dataCellProvider};e.InARsEnProvider.prototype.getLbhToUdhConversionProperties=function(t,n,i){let r=null;if(t.isHierarchyToUDHConversionEnabled()){r=t.getLbhToUdhConversionProperties(i);if(e.isNull(r)&&e.notNull(n)){let t=e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(n.getAxis(i));if(e.notNull(t)){r=e.RsLbhToUdhConversionProperties.createByDimension(t)}}}return r};e.InARsEnProvider.prototype.getRowsAxisProvider=function(){return this.m_rowsAxisProvider};e.InARsEnProvider.prototype.getSystemName=function(){return this.m_queryProvider.getSystemName()};e.InARsEnProvider.prototype.importSerializedData=function(t,n){if(n.getState()!==e.ResultSetState.EMPTY_JSON){let i=null;let r=null;let o=t.getStructureByKey("SerializedData");let l=n.getQueryManager();let a=n.getResultSetContainer();if(this.isValid()&&e.notNull(o)){i=o.getStringByKeyExt("View",a.getSerializedView());r=o.getStringByKey("Cube");if(a===l.getActiveResultSetContainer()){this.getOlapEnv().cacheRemoteBlendingData(l,i,r)}}a.setSerializedData(i,r)}};e.InARsEnProvider.prototype.importUdhDimension=function(t,n,i,r){if(e.notNull(t)){let o=t.getListByKey("Dimensions");if(e.notNull(o)){let t=o.size();for(let l=0;l<t;l++){let t=o.getStructureAt(l);let a=t.getStringByKey("Name");if(e.XString.isEqual(a,n)){let l=e.QInAImportFactory.createForMetadata(this.getApplication(),null);i.stopEventing();let a=i.getDimensionByName(n);let s=l.importDimension(t,i);a.setText(s.getText());let u=a.serializeToString(e.QModelFormat.INA_METADATA);let p=s.serializeToString(e.QModelFormat.INA_METADATA);if(!e.XString.isEqual(u,p)){a.getFieldContainer().reinit(s.getFieldContainer());a.getAttributeContainer().reinit(s.getAttributeContainer())}this.updateDimensionDefinitions(o,i,r);i.resumeEventing();return}}}}};e.InARsEnProvider.prototype.importUniversalDisplayHierarchyDimensions=function(t,n,i){if(e.notNull(t)&&t.getModelCapabilities().supportsUniversalDisplayHierarchies()){let r=t.getUniversalDisplayHierarchies();let o=r.getHierarchies().getIterator();let l=this.getResultSet().getRsQueryModelDef();while(o.hasNext()){let r=o.next();if(r.isActive()){let o=r.getHierarchyDedicatedAxis();let a=r.getName();if(e.notNull(o)&&e.AxisType.ROWS===o.getType()){this.importUdhDimension(n,a,t,l.getRowsAxisDef())}else if(e.notNull(o)&&e.AxisType.COLUMNS===o.getType()){this.importUdhDimension(i,a,t,l.getColumnsAxisDef())}}}}};e.InARsEnProvider.prototype.onFunctionExecuted=function(t,n,i){this.addAllMessages(t);if(t.isValid()&&e.notNull(n)){let t=n.getRootElement();let r=true;let o=null;let l=null;if(e.notNull(i)){r=false;let e=i;t=e.buildResponse(t);o=e.getPlanningRequest();l=e.getPlanningResponse()}let a=this.setResultStructure(t,r);if(!a&&!this.m_isTransientQueryProvider){this.addError(e.ErrorCodes.MODEL_INFRASTRUCTURE_TERMINATED,"Model infrastructure terminated")}this.updateRawRequestResponse(n);if(e.notNull(o)&&e.notNull(l)){e.PlanningStateHandler.updateFromResponse(this.getApplication(),this.getSystemName(),o,l,this)}}this.trackRequestExecuted(t);this.endSync()};e.InARsEnProvider.prototype.processAutoSubmit=function(t,n,i){if(n.isExecuteAutoVariableSubmit()){this.m_updatedMetadataProcessor=e.InAAutoSubmitMdProcessor.create(t,n,i);this.m_updatedMetadataProcessor.importMetadataAndUpdateState();this.m_updatedMetadataProcessor=e.XObjectExt.release(this.m_updatedMetadataProcessor)}};e.InARsEnProvider.prototype.processAutoSubmitRollback=function(t,n){if(n.isExecuteAutoVariableSubmit()){this.m_updatedMetadataProcessor=e.InAAutoSubmitMdProcessor.create(t,n,null);this.m_updatedMetadataProcessor.rollbackState();this.m_updatedMetadataProcessor=e.XObjectExt.release(this.m_updatedMetadataProcessor)}};e.InARsEnProvider.prototype.processCellContexts=function(t,n){if(!e.PrUtils.isListEmpty(t)){let i=n.getResultSetContainer();i.clearCellContexts();let r=e.QInAImportFactory.create(this.getApplication(),e.QModelFormat.INA_DATA,n.getQueryManager().getModelCapabilities());let o=t.size();for(let n=0;n<o;n++){let o=t.getStructureAt(n);let l=o.getStringByKey("Name");let a=o.getStructureByKey("CellContext");let s=r.importComponent(e.OlapComponentType.FILTER_EXPRESSION,a,null,null,this.getContext());i.putCellContext(l,s)}}};e.InARsEnProvider.prototype.processComplexUnitsSetting=function(t){if(e.notNull(t)){let n=t.size();if(e.isNull(this.m_complexUnitsSetting)){this.m_complexUnitsSetting=e.XList.create()}for(let i=0;i<n;i++){let n=t.getStructureAt(i);if(e.notNull(n)){this.m_complexUnitsSetting.add(this.buildComplexUnit(n.getListByKey("Type"),n.getListByKey("Value"),n.getListByKey("Description"),n.getListByKey("Exp")))}}}};e.InARsEnProvider.prototype.processDrillValidation=function(t,n){let i=e.isNull(t)?null:t.getDrillManagerBase();if(e.notNull(i)&&i.isBackendDrillValidationForAutoSubmit()&&i.isValidatingContextFreeNavigations()&&e.XCollectionUtils.hasElements(n)){t.stopEventing();i.removeDrillOperationsByDrillCountersSilently(n);t.resumeEventing()}};e.InARsEnProvider.prototype.processFunctionalVariables=function(t,n,i){if(e.notNull(i)&&!i.isEmpty()&&e.notNull(t)){let n=t.getQueryModel();if(e.notNull(n)){this.clearFunctionalVariablesResolvedValues(n);this.updateFunctionalVariablesResolvedValues(i,n)}}};e.InARsEnProvider.prototype.processGridData=function(t,n){let i=t.getQueryModel();if(e.notNull(i)){let t=n.getStructureByKey("DataSource");if(e.notNull(t)){let n;let r=null;let o=i.getCubeInfo();if(e.notNull(o)){if(i.getModelCapabilities().supportsDataRefreshAndDataTopicality()){let i=t.getStringByKey("DataRollupMin");let r=t.getStringByKey("DataRollupMax");let l=e.XDateTime.createDateTimeSafe(i);let a=e.XDateTime.createDateTimeSafe(r);o.setDataRollUpMin(l);o.setDataRollUpMax(a);n=t.getStringByKey("DataLastRefresh")}else{n=t.getStringByKey("LastDataUpdate")}if(e.notNull(n)){r=e.XDateTime.createDateTimeSafe(n);o.setLastUpdateOn(r)}let l=t.getStringByKey("Description");let a=o.getText();let s=i.getText();if(e.XStringUtils.isNotNullAndNotEmpty(l)&&e.XString.isEqual(a,s)){o.setText(l);i.setText(l)}}}if(this.getSession().hasFeature(e.FeatureToggleOlap.ASSERT_CONDITIONS_SIZE)){this.processRsConditions(n.getListByKey("Conditions"),i.getConditionManager())}}let r=n.getStructureByKey("DataEntryMask");this.setDataEntryMask(r);let o=n.getBooleanByKeyExt("InputEnabled",false);t.setDataEntryEnabled(o);let l=n.getListByKey("InputReadinessStates");this.setInputReadinessStates(l);this.processComplexUnitsSetting(n.getListByKey("Units"));this.connectDataCells(n);let a=null;let s=null;let u=n.getListByKey("Axes");let p=e.notNull(u)?u.size():0;for(let t=0;t<p;t++){let n=u.getStructureAt(t);let i=n.getStringByKey("Type");if(e.notNull(i)){let t=e.QInAConverter.lookupAxisType(i);if(t===e.AxisType.ROWS){a=n}else if(t===e.AxisType.COLUMNS){s=n}else{this.addWarning(e.ErrorCodes.ET_WRONG_TYPE,"Unrecognized axis type")}}else{let i=e.XString.toLowerCase(n.getStringByKey("Name"));if(e.XString.isEqual("columns",i)){s=n}else if(e.XString.isEqual("rows",i)){a=n}else{if(t===0){a=n}else if(t===1){s=n}else{this.addWarning(e.ErrorCodes.ET_WRONG_TYPE,"Unrecognized axis index")}}}}this.processRsDataSource(t,n.getStructureByKey("DataSource"));this.processRsDocumentInfo(t,n.getStructureByKey("DocumentsInfo"));this.processDrillValidation(i,n.getListByKey("InvalidNavigations"));this.importUniversalDisplayHierarchyDimensions(i,a,s);let g=t.getRsQueryModelDef();this.m_rowsAxisProvider.setOcpStructure(i,a,this.m_dataCellProvider.getAvailableDataCellRows(),g.getRowsAxisDef(),this.getLbhToUdhConversionProperties(t.getResultSetContainer(),i,e.AxisType.ROWS));this.m_columnAxisProvider.setOcpStructure(i,s,this.m_dataCellProvider.getAvailableDataCellColumns(),g.getColumnsAxisDef(),this.getLbhToUdhConversionProperties(t.getResultSetContainer(),i,e.AxisType.COLUMNS))};e.InARsEnProvider.prototype.processGrids=function(t,n){if(!e.PrUtils.isListEmpty(t)){let i=t.getStructureAt(0);let r=i.getIntegerByKeyExt("ResultSetState",0);let o=e.QInAConverter.lookupResultSetState(r);n.setState(o);if(o===e.ResultSetState.DATA_AVAILABLE||this.getQueryManager().isShallow()){this.processGridData(n,i);this.assignMergeId(n,i)}}};e.InARsEnProvider.prototype.processRsConditions=function(t,n){if(e.notNull(n)&&!e.PrUtils.isListEmpty(t)){let i=t.size();let r=n.getEffectiveConditions();if(i!==r.size()){this.addWarning(e.ErrorCodes.PARSING_ERROR_CONDITIONS_COUNT,"Number of conditions does not match the number of conditions returned from the server")}for(let n=0;n<i;n++){let i=t.getStructureAt(n);let o=i.getStringByKey("Name");let l=r.getByKey(o);if(e.notNull(l)){l.setUsedState(i.getStringByKey("IsUsed"))}}}};e.InARsEnProvider.prototype.processRsDataSource=function(t,n){if(e.notNull(n)){t.getResultSetContainer().setRsDataArea(n.getStringByKey("DataArea"))}};e.InARsEnProvider.prototype.processRsDocumentInfo=function(t,n){if(e.notNull(n)){let i=n.getStringByKey("SupportsDocuments");if(e.XString.isEqual(i,"Read")||e.XString.isEqual(i,"ReadWrite")||e.XString.isEqual(i,"ReadCreateChange")){t.getResultSetContainer().setRsDocumentServicePath(n.getStringByKey("DocumentsServicePath"))}}};e.InARsEnProvider.prototype.processSynchronization=function(t){let n=null;if(this.m_initProcedure===e.ProviderInitProcedure.REQUEST_BY_MODEL){let e=this.m_queryProvider.getActiveResultSetContainerBase();let t=this.getResultSet().getResultSetContainer();if(e!==t){this.m_queryProvider.setActiveResultSetContainer(t);n=this.m_queryProvider.fillDataRequestStructure(true);this.m_queryProvider.setActiveResultSetContainer(e)}else{n=this.m_queryProvider.fillDataRequestStructure(true)}}else if(this.m_initProcedure===e.ProviderInitProcedure.REQUEST_BY_STRUCTURE){n=this.m_initStructure}let i=this.m_queryProvider.createFunction();this.setSyncChild(i);let r=i.getRpcRequest();let o=e.RsRequestDecoratorFactory.getResultsetRequestDecorator(this.m_queryProvider.getApplication(),this.m_queryProvider.getSystemDescription(),n);if(e.isNull(o)){r.setRequestStructure(n)}else{r.setRequestStructure(o.getDecoratedRequest())}r.setSapPassportConnectionId(this.getQueryManager().getInstanceId());r.getProcessingHint().put(e.ConnectionParameters.CACHE_HINTS_ENABLED,e.PrFactory.createBoolean(this.m_queryProvider.getQueryManager().isCacheHintEnabled()));this.m_queryProvider.collectInAMergeAndBatchFunctions(i);this.m_queryProvider.getActiveResultSetContainer().setRawRequest(r.getRequestStructure().convertToNative());i.processFunctionExecution(t,this,o);return true};e.InARsEnProvider.prototype.releaseObjectInternal=function(){this.m_columnAxisProvider=e.XObjectExt.release(this.m_columnAxisProvider);this.m_rowsAxisProvider=e.XObjectExt.release(this.m_rowsAxisProvider);this.m_dataCellProvider=e.XObjectExt.release(this.m_dataCellProvider);this.m_complexUnitsSetting=e.XObjectExt.release(this.m_complexUnitsSetting);this.m_contextType=null;this.m_updatedMetadataProcessor=e.XObjectExt.release(this.m_updatedMetadataProcessor);e.DfResultSetProvider.prototype.releaseObjectInternal.call(this)};e.InARsEnProvider.prototype.setDataEntryMask=function(t){if(e.isNull(t)){return}let n=t.getListByKey("QueryCellNames");if(e.isNull(n)){return}let i=e.PrUtils.asListOfString(n);this.getResultSet().setDataEntryMask(i)};e.InARsEnProvider.prototype.setInputReadinessStates=function(t){if(e.isNull(t)){return}let n=e.XList.create();for(let i=0;i<t.size();i++){n.add(e.RsInputReadinessState.create(i,t.getListAt(i)))}if(n.isEmpty()){return}this.getResultSet().setInputReadinessStates(n)};e.InARsEnProvider.prototype.setResultStructure=function(t,n){if(e.notNull(t)){let i=this.getResultSet();if(e.isNull(i)){return false}let r=i.getApplication();if(e.isNull(r)){return false}this.addProfileStep("setResultStructure");if(n){e.PlanningStateHandler.update(r,this.getSystemName(),t,this)}if(e.InAHelper.importMessages(t,this)){i.setState(e.ResultSetState.ERROR)}let o=this.getQueryManager();let l=i.getRsQueryModelDef();let a=e.XCollectionUtils.contains(this.getErrors(),t=>t.getCode()===e.ErrorCodes.AUTOSUBMIT_FAILED||t.getCode()===e.ErrorCodes.GENERAL_VARIABLE_ERROR);if(a){this.processAutoSubmitRollback(o,l)}else{let e=t.getStructureByKey("Update");this.processAutoSubmit(o,l,e)}if(this.isValid()){let n=t.getStructureByKey("FunctionalVariables");this.processFunctionalVariables(o,l,n);let a=t.getListByKey("Grids");if(e.isNull(a)&&o.isShallow()){let n=t.getListByKey(e.ConnectionConstants.INA_BATCH);if(e.notNull(n)){if(o.supportsServerState()){o.setupQueryModel();let t=e.QInAImportFactory.createForMetadata(r,o.getModelCapabilities());let i=o.getQueryModelBase();let l=i.getDataSource().getInstanceId();if(e.isNull(l)){l=o.getInstanceId();if(e.isNull(l)){l=o.getApplication().createNextInstanceId()}let t=i.getDataSourceBase();t.setInstanceId(l);t.setSystemName(o.getSystemName())}t.importQueryModel(n.getStructureAt(0).getStructureByKey("Cube"),i)}let t=n.getStructureAt(n.size()-1);a=t.getListByKey("Grids")}}this.processGrids(a,i);let s=t.getListByKey("CellContexts");this.processCellContexts(s,i)}this.importSerializedData(t,i);this.endProfileStep()}return true};e.InARsEnProvider.prototype.setupHanalyticsResultSetProvider=function(t,n,i,r){let o=t.getApplication();this.setupAction(null,null,null,t);this.m_queryProvider=t;this.m_isTransientQueryProvider=t.getPreQueryName()!==null&&t.getTagging().containsKey(e.QStateConstants.TAG_HAS_TRANSIENT_DEPS);this.m_initProcedure=n;this.m_initStructure=i;this.m_contextType=r;this.m_dataCellProvider=e.InARsDataCellProvider.create(o,t);let l=t.getCapabilitiesBase().supportsSapDate();let a=t.getCapabilitiesBase().supportsObtainability();this.m_columnAxisProvider=e.InARsAxisProvider.create(o,e.AxisType.COLUMNS,r,l,a);this.m_rowsAxisProvider=e.InARsAxisProvider.create(o,e.AxisType.ROWS,r,l,a)};e.InARsEnProvider.prototype.trackRequestExecuted=function(t){let n=e.UsageTrackerProvider.getUsageTracker();if(n.isEnabled()){let i=t.getData();if(e.isNull(i)){return}try{let r=new e.UTEvent;r.setFeature("InaRequest");r.setSession(this.getSession());let o=i.getFunction().getRpcRequest();r.setEventId(o.getRequestType().getName());let l=o.getConnectionInfo();let a=l.getSystemName();let s=e.XHashMapByString.create();s.put("SystemName",a);s.put("SystemHost",l.getHost());let u=l.getSystemType();s.put("SystemType",u.getName());r.setParameters(s);if(t.hasErrors()){let n=e.XHashMapByString.create();let i=t.getErrors().getIterator();while(i.hasNext()){let t=i.next();n.put(e.XInteger.convertToString(t.getCode()),t.getText())}}n.track(r)}catch(e){return}}};e.InARsEnProvider.prototype.updateDimensionDefinitions=function(e,t,n){n.clearDimensions();let i=e.size();for(let r=0;r<i;r++){let i=e.getStructureAt(r);let o=t.getDimensionByName(i.getStringByKey("Name"));n.addDimension(o)}};e.InARsEnProvider.prototype.updateFunctionalVariablesResolvedValues=function(t,n){let i=n.getVariableContainer();let r=t.getListByKey("ResolvedValues");if(e.notNull(i)&&e.notNull(r)){let t=r.size();for(let o=0;o<t;o++){let t=e.PrUtils.getStructureElement(r,o);if(e.notNull(t)){let r=t.getStringByKey("Dimension");let o=e.XStringUtils.concatenate3(t.getStringByKey("FunctionName"),".",r);let l=this.updateParameterValues(t);let a=i.getVariable(o);let s=n.getDimensionByName(r).getFlatKeyField().getValueType();let u=t.getListByKey("Elements");this.updateResolvedValue(u,s,a,l)}}}};e.InARsEnProvider.prototype.updateParameterValues=function(t){let n=e.XHashMapByString.create();let i=t.getStringByKey("FunctionParameter");if(e.XStringUtils.isNotNullAndNotEmpty(i)){n.put("parameter",i)}else{let i=t.getListByKey("Parameters");if(e.notNull(i)){let t=i.size();for(let r=0;r<t;r++){let t=i.getStructureAt(r);if(e.notNull(t)){let i=t.getStringByKey("Param");let r=t.getStringByKey("Value");if(e.XStringUtils.isNotNullAndNotEmpty(i)&&e.XStringUtils.isNotNullAndNotEmpty(r)){n.put(i,r)}}}}}return n.isEmpty()?null:n};e.InARsEnProvider.prototype.updateRawRequestResponse=function(t){let n=this.getResultSet();if(e.notNull(n)&&n.getApplication()!==null){let n=this.getQueryManager();if(t.getRootElement()===null){n.getActiveResultSetContainer().addError(e.ErrorCodes.OTHER_ERROR,"No json root element in response. This can be due to a json parsing issue.")}else{let e=t.getRootElement();n.getActiveResultSetContainer().setRawResponse(e.convertToNative())}}};e.InARsEnProvider.prototype.updateResolvedValue=function(t,n,i,r){if(e.notNull(i)&&i.getVariableType().isTypeOf(e.VariableType.FUNCTIONAL_VARIABLE)&&e.notNull(t)){let o=i;let l=t.size();let a=e.XList.create();for(let r=0;r<l;r++){let o=t.getStructureAt(r);let l=e.QInAConverter.lookupComparison(o.getStringByKeyExt("Comparison","="));let s=e.QFactory.createFilterOperationWithOperator(i,null,l);if(o.getBooleanByKeyExt("IsExcluding",false)){s.setSetSign(e.SetSign.EXCLUDING)}else{s.setSetSign(e.SetSign.INCLUDING)}s.getLow().setValue(e.XValueUtil.getValueFromString(o.getStringByKey("Low"),n));let u=o.getStringByKey("High");if(e.XStringUtils.isNotNullAndNotEmpty(u)){s.getHigh().setValue(e.XValueUtil.getValueFromString(u,n))}a.add(s)}o.addResolvedValue(e.QFunctionalVariableResolvedValue.createResolvedValue(o.getName(),a,r))}};e.MeasureValueHelpRsProvider=function(){};e.MeasureValueHelpRsProvider.prototype=new e.DfResultSetProvider;e.MeasureValueHelpRsProvider.prototype._ff_c="MeasureValueHelpRsProvider";e.MeasureValueHelpRsProvider.create=function(t){let n=new e.MeasureValueHelpRsProvider;n.setupProvider(t);return n};e.MeasureValueHelpRsProvider.prototype.m_columnAxisProvider=null;e.MeasureValueHelpRsProvider.prototype.m_dataCellProvider=null;e.MeasureValueHelpRsProvider.prototype.m_measureDimension=null;e.MeasureValueHelpRsProvider.prototype.m_measureHelpResult=null;e.MeasureValueHelpRsProvider.prototype.m_rowsAxisProvider=null;e.MeasureValueHelpRsProvider.prototype.cloneExt=function(t){let n=e.MeasureValueHelpRsProvider.create(this.m_measureDimension);n.copyFromResultSetProvider(this);return n};e.MeasureValueHelpRsProvider.prototype.copyFromResultSetProvider=function(e){let t=e;this.m_measureDimension=t.m_measureDimension;this.m_columnAxisProvider.copyValueHelpRsAxisProvider(t.m_columnAxisProvider);this.m_rowsAxisProvider.copyValueHelpRsAxisProvider(t.m_rowsAxisProvider)};e.MeasureValueHelpRsProvider.prototype.getColumnAxisProvider=function(){return this.m_columnAxisProvider};e.MeasureValueHelpRsProvider.prototype.getComplexUnitsSetting=function(){return null};e.MeasureValueHelpRsProvider.prototype.getDataCellProvider=function(){return this.m_dataCellProvider};e.MeasureValueHelpRsProvider.prototype.getMeasureHelpNodes=function(){if(e.isNull(this.m_measureHelpResult)){this.m_measureHelpResult=this.m_measureDimension.getSelector().processMeasureHelp()}return this.m_measureHelpResult};e.MeasureValueHelpRsProvider.prototype.getRowsAxisProvider=function(){return this.m_rowsAxisProvider};e.MeasureValueHelpRsProvider.prototype.processSynchronization=function(e){this.m_measureHelpResult=this.getMeasureHelpNodes();this.addAllMessages(this.m_measureHelpResult);this.m_rowsAxisProvider.setValueHelpNodes(this.m_measureHelpResult.getData(),this.m_measureDimension);this.endSync();return true};e.MeasureValueHelpRsProvider.prototype.releaseObjectInternal=function(){e.DfResultSetProvider.prototype.releaseObjectInternal.call(this);this.m_measureDimension=null;this.m_columnAxisProvider=e.XObjectExt.release(this.m_columnAxisProvider);this.m_rowsAxisProvider=e.XObjectExt.release(this.m_rowsAxisProvider);this.m_dataCellProvider=e.XObjectExt.release(this.m_dataCellProvider)};e.MeasureValueHelpRsProvider.prototype.setupProvider=function(t){this.setupAction(null,null,null,t);this.m_measureDimension=t;this.m_columnAxisProvider=e.MeasureValueHelpRsAxisProvider.create(t);this.m_rowsAxisProvider=e.MeasureValueHelpRsAxisProvider.create(t);this.m_dataCellProvider=e.MeasureValueHelpRsDataCellProvider.create()};e.InAQMgrCancelThreadsAction=function(){};e.InAQMgrCancelThreadsAction.prototype=new e.InAQMgrSyncAction;e.InAQMgrCancelThreadsAction.prototype._ff_c="InAQMgrCancelThreadsAction";e.InAQMgrCancelThreadsAction.createAndRun=function(t,n,i,r){let o=new e.InAQMgrCancelThreadsAction;o.setupActionAndRun(t,n,i,r);return o};e.InAQMgrCancelThreadsAction.prototype.callListener=function(e,t,n,i){t.onProviderCancelThreads(e,n,i)};e.InAQMgrCancelThreadsAction.prototype.fillRequestStructure=function(){let t=e.InAQMgrSyncAction.prototype.fillRequestStructure.call(this);if(e.isNull(t)){return null}let n=t.putNewStructure("Analytics");let i=n.putNewList("Actions");let r=i.addNewStructure();r.putString("Type","Close");let o=r.putNewList("DataSources");o.addString(this.getActionContext().getInstanceId());return t};e.InAQMgrCancelThreadsAction.prototype.onFunctionExecuted=function(e,t,n){this.addAllMessages(e);this.setData(this.getActionContext());this.endSync()};e.InAQMgrCancelThreadsAction.prototype.processSynchronization=function(t){this.m_rpcFunction=this.getActionContext().createFunction();let n=this.m_rpcFunction.getRpcRequest();let i=this.fillRequestStructure();if(e.isNull(i)){return false}n.setRequestStructure(i);this.m_rpcFunction.processFunctionExecution(t,this,null);return true};e.InAQMgrClearCacheAction=function(){};e.InAQMgrClearCacheAction.prototype=new e.InAQMgrSyncAction;e.InAQMgrClearCacheAction.prototype._ff_c="InAQMgrClearCacheAction";e.InAQMgrClearCacheAction.createAndRun=function(t,n,i,r,o){let l=new e.InAQMgrClearCacheAction;l.m_timestamp=o;l.setupActionAndRun(t,n,i,r);return l};e.InAQMgrClearCacheAction.prototype.m_timestamp=null;e.InAQMgrClearCacheAction.prototype.callListener=function(e,t,n,i){t.onProviderClearCache(e,n,i)};e.InAQMgrClearCacheAction.prototype.fillRequestStructure=function(){let t=e.InAQMgrSyncAction.prototype.fillRequestStructure.call(this);if(e.isNull(t)){return null}let n=t.putNewStructure("Analytics");let i=n.putNewList("Actions");let r=i.addNewStructure();r.putString("Type","ClearCache");let o=r.putNewList("DataSources");let l=this.getActionContext();o.addString(l.getInstanceId());let a=l.getSystemType();if(a===e.SystemType.UNV||a===e.SystemType.UQAS){let e=r.putNewList("DataSourceDescriptions");let t=l.getDataSource().getCustomProperties();let n=t.getKeysAsIterator();let i=e.addNewStructure();while(n.hasNext()){let e=n.next();i.putString(e,t.getByKey(e))}}if(e.isNull(this.m_timestamp)){let t=this.getQueryManager().getProcess().getDateTimeProvider().getCurrentDateTime();let n=t.getTimeInMilliseconds();this.m_timestamp=e.XLong.convertToString(n)}r.putString("Id",this.m_timestamp);return t};e.InAQMgrClearCacheAction.prototype.onFunctionExecuted=function(e,t,n){this.addAllMessages(e);this.setData(this.getActionContext());this.endSync()};e.InAQMgrClearCacheAction.prototype.processSynchronization=function(t){this.m_rpcFunction=this.getActionContext().createFunction();let n=this.m_rpcFunction.getRpcRequest();let i=this.fillRequestStructure();if(e.notNull(i)){n.setRequestStructure(i);this.m_rpcFunction.processFunctionExecution(t,this,null);return true}return false};e.InAQMgrFunctionalVariablesAction=function(){};e.InAQMgrFunctionalVariablesAction.prototype=new e.InAQMgrSyncAction;e.InAQMgrFunctionalVariablesAction.prototype._ff_c="InAQMgrFunctionalVariablesAction";e.InAQMgrFunctionalVariablesAction.createAndRun=function(t,n,i,r,o){let l=new e.InAQMgrFunctionalVariablesAction;l.m_dimension=i;l.setupActionAndRun(t,r,o,n);return l};e.InAQMgrFunctionalVariablesAction.prototype.m_dimension=null;e.InAQMgrFunctionalVariablesAction.prototype.callListener=function(t,n,i,r){if(e.notNull(n)){n.onFunctionalVariablesValueHelpExecuted(t,r)}};e.InAQMgrFunctionalVariablesAction.prototype.fillRequestStructure=function(){let t=e.InAQMgrSyncAction.prototype.fillRequestStructure.call(this);let n=this.getContext();let i=e.QInAExportFactory.createForFunctionalVariablesValueHelp(n.getApplication(),n.getModelCapabilities());e.QInAOptions.fillOptions(t,n.getCapabilitiesBase(),n.getSession(),n.getQueryServiceConfig());let r=t.putNewStructure("Analytics");n.getInaCapabilities().exportActiveCapabilities(r);e.QInAOptions.setLanguage(r,n);r.put("DataSource",i.exportDataSource(n.getQueryModel().getDataSource(),false));let o=r.putNewStructure("Definition");let l=o.putNewList("Dimensions");let a=l.addNewStructure();a.putString("Name",this.m_dimension.getName());a.putString("Axis","Rows");e.XObjectExt.release(i);return t};e.InAQMgrFunctionalVariablesAction.prototype.onFunctionExecuted=function(t,n,i){this.addAllMessages(t);if(t.isValid()){let n=t.getData();let i=e.PrUtils.getListProperty(n.getRootElement(),"FunctionalVariables");let r=this.getContext();let o=r.getVariableContainerBase();if(e.notNull(i)&&e.notNull(o)){o.queueEventing();let t=e.QInAImportFactory.createForMetadata(r.getApplication(),r.getModelCapabilities());let n=e.XList.create();e.XCollectionUtils.forEach(i,i=>{let r=t.importFunctionalVariable(i.asStructure(),null,o);if(e.notNull(r)){if(!o.getVariables().contains(r)){o.addVariable(r)}n.add(r)}});this.setData(n);e.XObjectExt.release(t);o.resumeEventing()}}this.endSync()};e.InAQMgrFunctionalVariablesAction.prototype.processSynchronization=function(t){let n=this.getContext();let i=n.getConnection();let r=i.getSystemConnect().getServerMetadata();let o=r.getMetadataForService(e.ServerService.ANALYTIC);let l=o.getByKey(e.InACapabilities.C032_FAST_PATH);let a=e.notNull(l)?l.getValue():n.getSystemType().getInAPath();let s=i.newRpcFunction(a);s.setServiceName(e.SystemServices.INA_SERVICE);let u=s.getRpcRequest();u.setRequestStructure(this.fillRequestStructure());s.processFunctionExecution(t,this,null);return true};e.InAQMgrFunctionalVariablesAction.prototype.releaseObjectInternal=function(){e.InAQMgrSyncAction.prototype.releaseObjectInternal.call(this);this.m_dimension=null};e.InAQMgrShutdownAction=function(){};e.InAQMgrShutdownAction.prototype=new e.InAQMgrSyncAction;e.InAQMgrShutdownAction.prototype._ff_c="InAQMgrShutdownAction";e.InAQMgrShutdownAction.createAndRun=function(t,n,i,r){let o=new e.InAQMgrShutdownAction;o.setupActionAndRun(t,n,i,r);return o};e.InAQMgrShutdownAction.prototype.callListener=function(e,t,n,i){t.onProviderShutdown(e,n,i)};e.InAQMgrShutdownAction.prototype.fillRequestStructure=function(){let t=e.InAQMgrSyncAction.prototype.fillRequestStructure.call(this);if(e.isNull(t)){return null}let n=t.putNewStructure("Analytics");let i=n.putNewList("Actions");let r=i.addNewStructure();r.putString("Type","Close");let o=r.putNewList("DataSources");let l=null;if(this.getActionContext().getDataSource()!==null){l=this.getActionContext().getDataSource().getInstanceId()}let a=this.getActionContext().isShallow()||e.XStringUtils.isNullOrEmpty(l)?this.getActionContext().getInstanceId():l;o.addString(a);return t};e.InAQMgrShutdownAction.prototype.onFunctionExecuted=function(e,t,n){this.addAllMessages(e);this.setData(this.getActionContext());this.endSync()};e.InAQMgrShutdownAction.prototype.processSynchronization=function(t){let n=this.getActionContext();if(n.supportsShutdown()){let i=this.getApplication()!==null?this.getApplication().getConnectionPool():null;let r=e.isNull(i)||!i.isBatchBypassEnabled();this.m_rpcFunction=n.createFunctionExt(r);let o=this.m_rpcFunction.getRpcRequest();let l=this.fillRequestStructure();if(e.notNull(l)){o.setRequestStructure(l);o.setRequestType(e.HttpSemanticRequestType.CLOSE_DP);this.m_rpcFunction.processFunctionExecution(t,this,null);return true}}return false};e.InAQMgrStartupAction=function(){};e.InAQMgrStartupAction.prototype=new e.InAQMgrSyncAction;e.InAQMgrStartupAction.prototype._ff_c="InAQMgrStartupAction";e.InAQMgrStartupAction.createInitAndRun=function(t,n,i,r,o,l){let a=o.getQueryServiceConfig();let s;let u;if(a.isFusionActive()){u=new e.InAQMgrStartupAction;u.m_isServiceInit=i;u.setData(l);u.setupActionAndRun(t,n,r,o);s=u}else{let p=e.SyncActionSequence.create(t,n,r,o);let g=e.InAQMgrStartupCacheSync.createAndRun(e.SyncType.DELAYED,null,null,o,a);p.addAction(g);p.setFinalizeListener(g);u=new e.InAQMgrStartupAction;u.m_isServiceInit=i;u.m_cacheSync=g;u.setData(l);u.setupActionAndRun(e.SyncType.DELAYED,null,null,o);p.setDataAction(u);p.setListenerAction(u);p.addAction(u);p.process();s=p}return s};e.InAQMgrStartupAction.createMetadataInitAndRun=function(t,n,i,r,o){let l=e.InAQMgrStartupAction.createInitAndRun(t,n,false,i,r,o);return l};e.InAQMgrStartupAction.createServiceInitAndRun=function(t,n,i,r,o){let l=e.InAQMgrStartupAction.createInitAndRun(t,n,true,i,r,o);return l};e.InAQMgrStartupAction.prototype.m_cacheKey=null;e.InAQMgrStartupAction.prototype.m_cacheSync=null;e.InAQMgrStartupAction.prototype.m_cubeStructure=null;e.InAQMgrStartupAction.prototype.m_isServiceInit=false;e.InAQMgrStartupAction.prototype.callListener=function(e,t,n,i){if(this.m_isServiceInit){let r=t;r.onServiceInitialized(e,n,i)}else{let r=t;r.onQueryModelInitialized(e,n,i)}};e.InAQMgrStartupAction.prototype.createBlendingFunction=function(){this.createRpcFunction(this.getActionContext(),e.QueryManagerMode.BLENDING);return this.m_rpcFunction};e.InAQMgrStartupAction.prototype.createRpcFunction=function(t,n){this.m_rpcFunction=t.createFunction();let i=this.m_rpcFunction.getRpcRequest();let r=e.PrFactory.createStructure();this.fillMetadataRequestStructure(r,n);i.setRequestStructure(r)};e.InAQMgrStartupAction.prototype.fillMetadataRequestStructure=function(t,n){let i=this.getActionContext();let r=i.setInnerStructure(t,"Metadata",null,null);let o=i.getProviderTypeProx();if(o===e.ProviderType.ANALYTICS||o===e.ProviderType.CATALOG){r.putString("Context","Analytics")}else if(o===e.ProviderType.PLANNING||o===e.ProviderType.PLANNING_VALUE_HELP){r.putString("Context","Planning")}else if(o===e.ProviderType.LIST_REPORTING){r.putString("Context","ListReporting")}if(this.getServiceConfig().isLightweight()&&i.getModelCapabilities().supportsLightweightMetadata()&&i.getModelCapabilities().supportsMetadataResultFormatOptions()){let e=r.putNewStructure("ResultSetFeatureRequest");let t=e.putNewStructure("MetadataResultFormatOptions");t.putBoolean("LightWeightMetadata",true)}if(n===e.QueryManagerMode.BLENDING){let t=this.getServiceConfig();let n=t.getBlendingDefinition();let i=e.QInADataSourceBlending.exportDataSourceBlending(e.QModelFormat.INA_DATA,n,false);e.QInAExportUtil.setNonEmptyString(i,"InstanceId",t.getInstanceId());r.put("DataSource",i)}let l=i.getOlapSystemContainer();let a=l.getServiceCapabilities(e.ServerService.ANALYTIC);if(this.getSession().hasFeature(e.FeatureToggleOlap.FLEX_CLIENT_INFO)&&a.supportsFlexibleClientInfo()){e.QInAClientInfo.exportFlexibleClientInfo(t,this.getServiceConfig())}else if(this.getSession().hasFeature(e.FeatureToggleOlap.CLIENT_INFO_METADATA)){e.QInAClientInfo.exportClientInfo(t,this.getServiceConfig(),a.supportsClientInfo(),this.getServiceConfig().getSystemType().isTypeOf(e.SystemType.BW))}};e.InAQMgrStartupAction.prototype.getServiceConfig=function(){return this.getQueryManager().getServiceConfig()};e.InAQMgrStartupAction.prototype.isValidResponse=function(t,n){if(!t.isValid()){return false}if(e.isNull(n)){return false}if(n.getRootElement()===null){this.addError(e.ErrorCodes.PARSER_ERROR,"No json inside");return false}return true};e.InAQMgrStartupAction.prototype.onFunctionExecuted=function(t,n,i){this.addAllMessages(t);let r=i;let o=this.getActionContext();let l=this.getQueryModelBase();if(this.isValidResponse(t,n)){let t=n.getRootElement();let i=e.XContent.createJsonObjectContent(e.QModelFormat.INA_METADATA,t);this.runApplySteps(l,i,null,r,false)}else{o.setLifeCycleState(e.LifeCycleState.TERMINATED);this.endProfileStep();this.endSync()}};e.InAQMgrStartupAction.prototype.processSynchronization=function(t){let n=this.getActionContext();let i=n.getQueryServiceConfig();if(this.m_isServiceInit){if(n.getLifeCycleState()!==e.LifeCycleState.INITIAL){this.addError(e.ErrorCodes.INVALID_STATE,"Query Manager is not initial");return false}n.setLifeCycleState(e.LifeCycleState.STARTING_UP)}let r=n.getMode();let o=this.getQueryModelBase();let l=n.getDataSource();if(e.isNull(o)){if(r===e.QueryManagerMode.RAW_QUERY){n.setLifeCycleState(e.LifeCycleState.ACTIVE);this.endSync();return true}n.setupDesignTimeMode();o=this.getQueryModelBase();l=n.getDataSource()}else{o.setDataSource(l)}if(r.isTypeOf(e.QueryManagerMode.DEFAULT)&&e.isNull(l)){this.addError(e.ErrorCodes.INVALID_STATE,"No datasource given");return false}let a=o.getDataSourceBase();let s=a.getInstanceId();if(e.isNull(s)){s=n.getInstanceId();if(e.isNull(s)){s=n.getApplication().createNextInstanceId()}a.setInstanceId(s)}let u=a.getSystemName();if(e.isNull(u)){a.setSystemName(n.getSystemName())}if(r===e.QueryManagerMode.RAW_QUERY&&this.m_isServiceInit){return false}let p=n.getInitSettings().getDefinitionContent();let g=null;let m=null;let c=false;if(i.isFusionActive()){m=i.getMetadataContent();if(e.notNull(m)){c=true}g=i.getRepositoryContent()}if(c===false){if(e.notNull(p)&&p.getContentType().containsMetadata()){m=p;c=true}else if(e.notNull(l)){let t=l.getExtendedDimensions();if(e.notNull(t)){if(l.getExtendedDimensions().hasElements()&&r===e.QueryManagerMode.BLENDING){this.addWarningExt(e.OriginLayer.SERVER,e.ErrorCodes.INVALID_DIMENSION,"Joining ExtendedDimensions on a BlendingQuery is not supported by the backend!")}}this.m_cacheKey=e.QFactory.createCacheKeyByContext(o);let n=i.getDefinitionType();let a;if(e.notNull(n)&&n.containsMetadata()){a=this.getApplication().getOlapEnvironment().getQueryMetadata(this.m_cacheKey);m=e.XContent.createJsonObjectContent(e.QModelFormat.INA_METADATA,a);c=true}else{if(i.isFusionActive()===false){a=this.m_cacheSync.getMetadataInCache();if(e.notNull(a)){m=e.XContent.createJsonObjectContent(e.QModelFormat.INA_METADATA,a)}}}}}if(e.notNull(m)){this.runApplySteps(o,m,g,r,c);return true}else if(r===e.QueryManagerMode.BLENDING){this.addProfileStep("Prepare Metadata Request");let n=e.InAQMgrStartupBlending.create(this);n.prepare(t);this.endProfileStep();n.process(this,t);return this.isValid()}else{if(n.supportsAndAllowsEmptyExtendedVarDefinition()){let e=n.emptyVariableDefinition(t,null,null);this.addAllMessages(e)}else{this.addProfileStep("Prepare Metadata Request");this.createRpcFunction(n,r);this.endProfileStep();this.m_rpcFunction.processFunctionExecution(t,this,r);return true}}return false};e.InAQMgrStartupAction.prototype.removeAlreadyLoadedDimensions=function(e){if(e.isPartialResponse()){return true}for(let t=0;t<e.getLoadedDimensions().size();){e.removeDimension(e.getLoadedDimensions().get(t))}return true};e.InAQMgrStartupAction.prototype.runApplySteps=function(t,n,i,r,o){if(e.notNull(t)){t.stopEventing();if(this.isValid()){this.addProfileStep("step1ApplyMetadataStructure");this.step1ApplyMetadataStructure(t,n,r,o);this.endProfileStep()}if(this.isValid()){this.addProfileStep("step2ApplyPlanning");this.step2ApplyPlanning(n,r);this.endProfileStep()}if(this.isValid()){this.addProfileStep("step3ApplyQueryModel");this.step3ApplyQueryModel(i,o);this.endProfileStep()}if(this.isValid()){this.addProfileStep("step4ApplyDataRequest");this.step4ApplyDataRequest();this.endProfileStep()}if(this.isValid()){this.addProfileStep("step5ApplyBlending");this.step5ApplyBlending(r,o);this.endProfileStep()}this.step6Finalize();if(this.isValid()){this.addProfileStep("step6Variables");this.step6Variables(o);this.endProfileStep()}t.resumeEventing()}this.endSync()};e.InAQMgrStartupAction.prototype.step1ApplyMetadataStructure=function(t,n,i,r){if(e.notNull(n)){let o=n.getJsonContent();let l=n.getContentType();let a=this.getActionContext();let s=a.getQueryServiceConfig();if(s.isFusionActive()===false){this.m_cacheSync.storeMetadataInCache(o)}let u=this.getApplication();if(!e.InAHelper.importMessages(o,this)){this.m_cubeStructure=o;if(l!==e.QModelFormat.INA_CLONE){if(e.notNull(o)){this.m_cubeStructure=o.getStructureByKey("Cube");if(e.isNull(this.m_cubeStructure)&&o.containsKey("Command")){this.m_cubeStructure=o.getStructureByKey("Command")}if(e.isNull(this.m_cubeStructure)){if(r){this.m_cubeStructure=o}let t=o.getStructureByKey("DataSourceValidation");if(e.notNull(t)){if(t.getBooleanByKey("Valid")){this.addInfo(e.InfoCodes.QUERY_MODEL_VERSION_VALID,"Model version valid")}else{this.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.SERVER_METADATA_NOT_FOUND,"Server metadata not available",null)}return}}}}if(e.isNull(this.m_cubeStructure)){this.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.QM_CUBE_ENTRY_NOT_FOUND,"Invalid Metadata from server - Cube tag in structure not found",null)}else{let n=a.getModelCapabilities();let r;if(i===e.QueryManagerMode.BLENDING){r=e.QInAImportFactory.createForMetadata(u,n)}else{let t=this.getServiceConfig();if(l===e.QModelFormat.INA_CLONE){r=e.QInAImportFactory.createForCloning(u,n)}else if(t.isLoadingDefaultQuery()){r=e.QInAImportFactory.createForMetadata(u,n)}else{r=e.QInAImportFactory.createForMetadataCore(u,n)}}if(e.notNull(i)){let i=this.removeAlreadyLoadedDimensions(t);if(i){r.importQueryModel(this.m_cubeStructure,t)}else{let i=e.QInAImportFactory.createForMetadata(u,n);let r=e.QueryModel.create(this.getOlapEnv(),a,t.getModelCapabilitiesBase());r.setDataSource(t.getDataSource());i.importQueryModel(this.m_cubeStructure,r);let o=r.getDimensions();for(let n=0;n<o.size();n++){let i=o.get(n);let r=t.getDimensionByNameFromExistingMetadata(i.getName());if(e.notNull(r)&&r.getDimensionType()===e.DimensionType.DIMENSION_INCOMPLETE){r.copyDimension(i)}}t.setServerBaseSerialization(null,e.QModelOrigin.INITIAL_SERVER_CALL,this.m_cubeStructure);e.XObjectExt.release(r)}}if(a.isDirectVariableTransferEnabled()&&a.getInitSettings().getStartVariablesContent()!==null){a.getVariableContainer().deserializeFromElementExt(e.QModelFormat.INA_DATA,a.getInitSettings().getStartVariables())}if(a.getDataSource()!==null){a.getDataSource().setValidationHash(t.getDataSource().getValidationHash())}let s=o.getStructureByKey("PerformanceData");if(e.notNull(s)){let n=s.getStringByKey("UserName");let i=t.getCubeInfo();if(e.notNull(i)){i.setUserName(n)}}this.addAllMessages(r)}}}};e.InAQMgrStartupAction.prototype.step2ApplyPlanning=function(t,n){if(e.notNull(t)&&e.notNull(this.m_cubeStructure)){let i=this.getActionContext();let r=this.getApplication();e.PlanningStateHandler.update(r,i.getSystemName(),t.getJsonContent(),this);if(n!==e.QueryManagerMode.BLENDING){this.initPlanningSupport(this.m_cubeStructure,true)}}};e.InAQMgrStartupAction.prototype.step3ApplyQueryModel=function(t,n){let i=this.getQueryModelBase();let r=this.getActionContext();let o=r.getQueryServiceConfig();let l=o.getModellerContent();i.resumeEventing();if(e.notNull(l)){i.deserializeFromElementExt(l.getContentType(),l.getJsonContent())}if(e.notNull(t)){i.deserializeFromElementExt(t.getContentType(),t.getJsonContent())}else if(n===false){let t=r.getDeserializationStructure();let n=r.getDeserializationImporter();if(e.notNull(t)&&e.notNull(n)){n.importQueryModel(t,i)}}i.stopEventing()};e.InAQMgrStartupAction.prototype.step4ApplyDataRequest=function(){let t=this.getActionContext();let n=t.getQueryServiceConfig().getDataRequest();if(e.notNull(n)){let t=this.getQueryModelBase();t.deserializeFromElementExt(e.QModelFormat.INA_DATA,n)}};e.InAQMgrStartupAction.prototype.step5ApplyBlending=function(t,n){if(n===false){if(t===e.QueryManagerMode.BLENDING){let t=this.getServiceConfig();let n=t.getBlendingDefinition();if(e.notNull(n)){let e=this.getQueryModelBase();let t=e.getDataSourceBase();t.setBlendingDefinition(n)}}}};e.InAQMgrStartupAction.prototype.step6Finalize=function(){let t=this.getActionContext();if(this.isValid()){t.setLifeCycleState(e.LifeCycleState.ACTIVE)}else{t.setLifeCycleState(e.LifeCycleState.TERMINATED)}};e.InAQMgrStartupAction.prototype.step6Variables=function(t){if(t===false){let t=this.getActionContext();if(t.isDirectVariableTransferEnabled()===false){if(t.getInitSettings().isLightweight()&&t.getInitSettings().getStartVariablesContent()!==null){t.setVariableProcessorState(e.VariableProcessorState.SUBMITTED)}else{t.setVariableProcessorState(e.VariableProcessorState.CHANGEABLE_STARTUP)}}t.resumeEventing();t.prepareAfterVariables();t.stopEventing()}};e.InAQMgrVarAction=function(){};e.InAQMgrVarAction.prototype=new e.InAQMgrSyncAction;e.InAQMgrVarAction.prototype._ff_c="InAQMgrVarAction";e.InAQMgrVarAction.clearSavedStateAndExternalizeDynamicFilter=function(e,t,n){e.setStateBeforeVarScreen(null);e.setMetadataStateBeforeVarScreen(null);if(n){e.getNewResultsetContainer()}if(e.getInitSettings().isExternalizedDynamicFilter()){let n=e.getOlapEnv().getFilterManager();n.externalizeDynamicFilterAfterSubmit(e,t)}};e.InAQMgrVarAction.createAndRunCancel=function(t,n,i,r){let o=new e.InAQMgrVarAction;o.setupVarActionAndRun(n,t,null,i,r,e.VariableProcessorState.PROCESSING_CANCEL,e.ProcessingStep.VARIABLE_CANCEL,false,false,!t.isSubmitted());return o};e.InAQMgrVarAction.createAndRunCheck=function(t,n,i,r){let o=new e.InAQMgrVarAction;o.setupVarActionAndRun(n,t,null,i,r,e.VariableProcessorState.PROCESSING_CHECK,null,false,false,true);return o};e.InAQMgrVarAction.createAndRunDefinition=function(t,n,i,r){let o;let l=t.getVariableProcessorState();if(l===e.VariableProcessorState.PROCESSING_EMPTY_VARIABLE_DEFINITION){o=e.VariableProcessorState.PROCESSING_EMPTY_VARIABLE_DEFINITION}else{o=e.VariableProcessorState.PROCESSING_DEFINITION}let a=new e.InAQMgrVarAction;a.setupVarActionAndRun(n,t,null,i,r,o,e.ProcessingStep.VARIABLE_DEFINITION,true,true,true);return a};e.InAQMgrVarAction.createAndRunEmptyVariableDefinition=function(t,n,i,r){let o=new e.InAQMgrVarAction;o.setupVarActionAndRun(n,t,null,i,r,e.VariableProcessorState.PROCESSING_EMPTY_VARIABLE_DEFINITION,e.ProcessingStep.VARIABLE_DEFINITION,true,false,true);return o};e.InAQMgrVarAction.createAndRunGetRuntimeInfo=function(t,n,i,r){let o=new e.InAQMgrVarAction;o.setupVarActionAndRun(n,t,null,i,r,e.VariableProcessorState.PROCESSING_DEFINITION,e.ProcessingStep.VARIABLE_DEFINITION,true,false,true);return o};e.InAQMgrVarAction.createAndRunReInitAfterSubmit=function(t,n,i,r){if(t.getInitSettings().isExternalizedDynamicFilter()){let e=t.getOlapEnv().getFilterManager();e.projectExternalizedFilter(t)}let o=new e.InAQMgrVarAction;o.setupVarActionAndRun(n,t,null,i,r,e.VariableProcessorState.PROCESSING_REINIT,e.ProcessingStep.VARIABLE_DEFINITION,true,false,t.isSubmitted());return o};e.InAQMgrVarAction.createAndRunSetGetValues=function(t,n,i,r){let o=new e.InAQMgrVarAction;o.setupVarActionAndRun(n,t,null,i,r,e.VariableProcessorState.PROCESSING_UPDATE_VALUES,e.ProcessingStep.VARIABLE_DEFINITION,true,false,true);return o};e.InAQMgrVarAction.createAndRunSubmit=function(t,n,i,r){let o;if(t.getVariableProcessorState()===e.VariableProcessorState.CHANGEABLE_REINIT){o=e.VariableProcessorState.PROCESSING_SUBMIT_AFTER_REINIT}else{o=e.VariableProcessorState.PROCESSING_SUBMIT}let l=new e.InAQMgrVarAction;l.setupVarActionAndRun(n,t,null,i,r,o,e.ProcessingStep.VARIABLE_SUBMIT,true,true,t.isVariableSubmitNeeded());return l};e.InAQMgrVarAction.createAndRunVariantActivation=function(t,n,i,r,o){let l=new e.InAQMgrVarAction;l.setupVarActionAndRun(i,t,n,r,o,e.VariableProcessorState.PROCESSING_VARIANT_ACTIVATION,e.ProcessingStep.VARIABLE_DEFINITION,true,false,true);return l};e.InAQMgrVarAction.createAndRunVariantDeletion=function(t,n,i,r,o){let l=new e.InAQMgrVarAction;l.setupVarActionAndRun(i,t,n,r,o,e.VariableProcessorState.PROCESSING_VARIANT_DELETION,e.ProcessingStep.VARIANT_DELETE,false,false,true);return l};e.InAQMgrVarAction.createAndRunVariantUpdate=function(t,n,i,r,o,l){let a=new e.InAQMgrVarAction;a.m_updateVariantProperties=i;a.setupVarActionAndRun(r,t,n,o,l,e.VariableProcessorState.PROCESSING_VARIANT_SAVE,e.ProcessingStep.VARIANT_SAVE,false,false,true);return a};e.InAQMgrVarAction.prototype.m_applyVariableAndModelStates=false;e.InAQMgrVarAction.prototype.m_applyVariableStates=false;e.InAQMgrVarAction.prototype.m_isProcessingEmptyDef=false;e.InAQMgrVarAction.prototype.m_needsProcessing=false;e.InAQMgrVarAction.prototype.m_processingStep=null;e.InAQMgrVarAction.prototype.m_state=null;e.InAQMgrVarAction.prototype.m_updateVariantProperties=false;e.InAQMgrVarAction.prototype.m_variableVariant=null;e.InAQMgrVarAction.prototype.applyServerModel=function(t,n,i){let r=i;let o=this.getActionContext();let l=false;if(o.getPreviousVariableProcessorState()!==e.VariableProcessorState.PROCESSING_EMPTY_VARIABLE_DEFINITION){l=true}let a=this.getOlapEnv();let s=this.getApplication();e.PlanningStateHandler.update(s,o.getSystemName(),n,this);let u=e.QInAImportFactory.createForMetadata(s,t.getModelCapabilities());let p=e.QueryModel.create(a,o,t.getModelCapabilitiesBase());p.setDataSource(t.getDataSource());if(this.m_processingStep===e.ProcessingStep.VARIABLE_DEFINITION){u.importVariableManager(n.getStructureByKey("Cube"),t.getVariableManagerBase(),t)}else if(!l){u.importQueryModel(r,t);let n=o.getDeserializationStructure();let i=o.getDeserializationImporter();if(e.notNull(n)&&e.notNull(i)){i.importQueryModel(n,t)}}else{u.importQueryModel(r,p);r=e.PrFactory.createStructureDeepCopy(r);t.setServerBaseSerialization(null,e.QModelOrigin.VARIABLE_SUBMIT,r)}this.addAllMessages(u);if(l){t.metadataUpdateEventing();let n=o.getVariableProcessorState();let i=e.InAQMgrMergeSettings.create(n===e.VariableProcessorState.PROCESSING_SUBMIT);this.revertUdhStateOnVariableModel(p,t,i);t.mergeDeepRecursive(i,p);t.augmentSFXMetadata()}e.XObjectExt.release(p);this.initPlanningSupport(r,false);if(l){t.resumeEventing()}};e.InAQMgrVarAction.prototype.callListener=function(e,t,n,i){t.onVariableProcessorExecuted(e,n,i)};e.InAQMgrVarAction.prototype.isSuccessfullyProcessed=function(){return this.isValid()};e.InAQMgrVarAction.prototype.onFunctionExecuted=function(t,n,i){this.addProfileStep("applyDataModelStructure");this.addAllMessages(t);let r=this.getActionContext();if(e.notNull(r)){let i=r.getQueryModelBase();if(t.isValid()&&e.notNull(n)){let t=n.getRootElement();if(e.isNull(t)){this.addError(e.ErrorCodes.PARSER_ERROR,"Root element is missing")}else if(!e.InAHelper.importMessages(t,this)){if(this.m_processingStep===e.ProcessingStep.VARIABLE_DEFINITION||this.m_processingStep===e.ProcessingStep.VARIABLE_SUBMIT||this.m_processingStep===e.ProcessingStep.VARIANT_SAVE){let n=t.getStructureByKey("Cube");if(e.isNull(n)){this.addError(e.ErrorCodes.PARSER_ERROR,"Invalid Metadata from server - Cannot find 'Cube' element.")}else{e.QInAMdQuery.importVariants(n,i);e.PlanningStateHandler.update(this.getApplication(),r.getSystemName(),t,this);if(this.m_applyVariableStates){this.processCubeElement(i,t,n,r)}if(this.m_state===e.VariableProcessorState.PROCESSING_VARIANT_SAVE&&this.m_updateVariantProperties){let t=e.QInAMdQuery.importActiveVariant(n,i);if(e.isNull(t)){this.addError(e.ErrorCodes.PARSER_ERROR,"Could not parse variant.")}else{let e=r.getVariableVariantByName(t);this.m_variableVariant.setName(t);this.m_variableVariant.setText(e.getText());this.m_variableVariant.setScope(e.getScope());this.m_variableVariant.applyState()}}}}if(this.m_state===e.VariableProcessorState.PROCESSING_VARIANT_DELETION){r.removeVariableVariant(this.m_variableVariant)}}}if(this.isValid()){let t=this.m_state.getNextState();if(e.notNull(t)){if(this.m_state===e.VariableProcessorState.PROCESSING_CANCEL){this.addAllMessages(i.deserializeFromElementExt(e.QModelFormat.INA_METADATA,r.getMetadataStateBeforeVarScreen()));this.addAllMessages(i.deserializeFromElementExt(e.QModelFormat.INA_REPOSITORY,r.getStateBeforeVarScreen()));r.setStateBeforeVarScreen(null);r.setMetadataStateBeforeVarScreen(null);if(r.getInitSettings().isExternalizedDynamicFilter()){r.getConvenienceCommands().clearNonMeasureFilters()}}else if(this.m_state.isTypeOf(e.VariableProcessorState.PROCESSING_SUBMIT)){e.InAQMgrVarAction.clearSavedStateAndExternalizeDynamicFilter(r,this.m_state===e.VariableProcessorState.PROCESSING_SUBMIT,true)}r.setVariableProcessorState(t)}else{r.returnToPreviousProcessorState()}r.prepareAfterVariables()}else{if(this.m_state===e.VariableProcessorState.PROCESSING_SUBMIT){r.setVariableProcessorState(e.VariableProcessorState.SUBMIT_FAILED)}else if(this.m_state===e.VariableProcessorState.PROCESSING_SUBMIT_AFTER_REINIT){r.setVariableProcessorState(e.VariableProcessorState.SUBMIT_FAILED_AFTER_REINIT)}else{r.returnToPreviousProcessorState()}}}this.endProfileStep();this.endSync()};e.InAQMgrVarAction.prototype.processCubeElement=function(t,n,i,r){if(e.notNull(t)&&r.getModelCapabilities().supportsAutoVariableSubmit()){t.setIsMetadataUpdatedByAutoSubmit(false)}if(this.m_applyVariableAndModelStates){this.applyServerModel(t,n,i)}else if(this.m_isProcessingEmptyDef){let n=r.getVariablesImporter();e.QInAMdQuery.importDimensions(n,i,t);n.importDimensions(i,t,t);n.importVariables(i,r.getVariableContainerBase());e.QInAMdDataSource.importMd(n,i,t,t);this.addAllMessages(n);this.m_isProcessingEmptyDef=false;this.getActionContext().setLifeCycleState(e.LifeCycleState.ACTIVE)}else{let e=r.getVariablesImporter();e.importVariables(i,r.getVariableContainerBase());this.addAllMessages(e)}};e.InAQMgrVarAction.prototype.processSynchronization=function(t){this.setData(this);if(this.m_needsProcessing){this.m_rpcFunction=this.createFunction();let n=e.PrFactory.createStructure();let i=this.m_state!==e.VariableProcessorState.PROCESSING_REINIT&&this.m_state!==e.VariableProcessorState.PROCESSING_VARIANT_DELETION;let r=this.getActionContext();r.fillAnalyticRequestStructure(n,e.QInAConverter.lookupContextNameForProvider(this.getQueryManager().getProviderType()),i,this.m_processingStep,this.m_variableVariant);r.setVariableProcessorState(this.m_state);this.m_rpcFunction.getRpcRequest().setRequestStructure(n);this.m_rpcFunction.processFunctionExecution(t,this,null);return true}return false};e.InAQMgrVarAction.prototype.releaseObjectInternal=function(){this.m_rpcFunction=null;this.m_processingStep=null;this.m_state=null;e.InAQMgrSyncAction.prototype.releaseObjectInternal.call(this)};e.InAQMgrVarAction.prototype.revertUdhState=function(t,n,i,r,o){let l=t.getDimensionByName(n.getName());if(e.notNull(l)){l.getHierarchyManager().copyFrom(n.getHierarchyManager(),null);let t=l.getFilter();if(e.notNull(t)){t.clear()}i.mergeDeepRecursive(o,r)}};e.InAQMgrVarAction.prototype.revertUdhStateOnVariableModel=function(t,n,i){if(n.getQueryManager().isHierarchyToUDHConversionEnabledForCurrentRs()){let r=n.getUniversalDisplayHierarchies();let o=r.getHierarchies();let l=t.getUniversalDisplayHierarchies();let a=l.getHierarchies();if(e.XCollectionUtils.hasElements(o)&&e.XCollectionUtils.hasElements(a)){for(let o=0;o<a.size();o++){let s=a.get(o);if(s.isActive()){let o=s.getHierarchyDedicatedAxis().getType();let a=e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(n.getAxis(o));if(e.notNull(a)){this.revertUdhState(t,a,l,r,i)}}}}}};e.InAQMgrVarAction.prototype.setupVarActionAndRun=function(t,n,i,r,o,l,a,s,u,p){this.m_applyVariableStates=s;this.m_applyVariableAndModelStates=u;this.m_processingStep=a;this.m_state=l;this.m_needsProcessing=p;this.m_variableVariant=i;if(this.m_state===e.VariableProcessorState.PROCESSING_REINIT){let t=n.getQueryModel();n.setStateBeforeVarScreen(t.serializeToElement(e.QModelFormat.INA_REPOSITORY));n.setMetadataStateBeforeVarScreen(t.serializeToElement(e.QModelFormat.INA_METADATA))}else if(this.m_state===e.VariableProcessorState.PROCESSING_EMPTY_VARIABLE_DEFINITION){this.m_isProcessingEmptyDef=true}e.InAQMgrSyncAction.prototype.setupActionAndRun.call(this,t,r,o,n)};e.InAQMgrVariantModifyAction=function(){};e.InAQMgrVariantModifyAction.prototype=new e.InAQMgrSyncAction;e.InAQMgrVariantModifyAction.prototype._ff_c="InAQMgrVariantModifyAction";e.InAQMgrVariantModifyAction.ACTIVATION_STEP="ACTIVATE";e.InAQMgrVariantModifyAction.DELETE_ERROR_STEP="DELETE_ERROR";e.InAQMgrVariantModifyAction.DELETE_STEP="DELETE";e.InAQMgrVariantModifyAction.SAVE_NEW_STEP="SAVE_NEW";e.InAQMgrVariantModifyAction.SAVE_OLD_STEP="SAVE_OLD";e.InAQMgrVariantModifyAction.SAVE_REPLACE_STEP="SAVE_REPLACE";e.InAQMgrVariantModifyAction.createAndRunModification=function(t,n,i,r,o){let l=new e.InAQMgrVariantModifyAction;l.m_variant=n;l.setupActionAndRun(i,r,o,t);return l};e.InAQMgrVariantModifyAction.prototype.m_previousVariableValues=null;e.InAQMgrVariantModifyAction.prototype.m_replacementVariant=null;e.InAQMgrVariantModifyAction.prototype.m_variant=null;e.InAQMgrVariantModifyAction.prototype.applyVariantState=function(){this.m_variant.setName(this.m_replacementVariant.getName());this.m_variant.setText(this.m_replacementVariant.getText());this.m_variant.setScope(this.m_replacementVariant.getScope());this.m_variant.applyState()};e.InAQMgrVariantModifyAction.prototype.callListener=function(e,t,n,i){t.onVariableProcessorExecuted(e,n,i)};e.InAQMgrVariantModifyAction.prototype.createAndRunReplacementSave=function(t,n,i,r){this.m_replacementVariant=e.QVariableVariant.createVariantWithScopeInternal(this.m_variant.getDataSource(),t,n,i);e.InAQMgrVarAction.createAndRunVariantUpdate(this.getActionContext(),this.m_replacementVariant,true,this.getActiveSyncType(),this,e.XStringValue.create(r))};e.InAQMgrVariantModifyAction.prototype.doErrorHandling=function(t){let n=this.getActionContext();switch(t){case e.InAQMgrVariantModifyAction.ACTIVATION_STEP:this.endSync();break;case e.InAQMgrVariantModifyAction.SAVE_REPLACE_STEP:this.restorePreviousValuesAndEnd();break;case e.InAQMgrVariantModifyAction.SAVE_OLD_STEP:this.restorePreviousValuesAndEnd();break;case e.InAQMgrVariantModifyAction.SAVE_NEW_STEP:this.endSync();break;case e.InAQMgrVariantModifyAction.DELETE_STEP:n.deleteVariableVariant(this.m_replacementVariant,this.getActiveSyncType(),this,e.XStringValue.create(e.InAQMgrVariantModifyAction.DELETE_ERROR_STEP));this.restorePreviousValuesAndEnd();break;case e.InAQMgrVariantModifyAction.DELETE_ERROR_STEP:this.restorePreviousValuesAndEnd();break}};e.InAQMgrVariantModifyAction.prototype.endSync=function(){this.m_replacementVariant=null;this.m_variant=null;this.m_previousVariableValues=e.XObjectExt.release(this.m_previousVariableValues);e.InAQMgrSyncAction.prototype.endSync.call(this)};e.InAQMgrVariantModifyAction.prototype.isSuccessfullyProcessed=function(){return this.isValid()};e.InAQMgrVariantModifyAction.prototype.onFunctionExecuted=function(e,t,n){};e.InAQMgrVariantModifyAction.prototype.onVariableProcessorExecuted=function(t,n,i){let r=i.toString();let o=this.getActionContext();this.addAllMessages(t);if(this.hasErrors()){this.doErrorHandling(r)}else{this.clearMessages();switch(r){case e.InAQMgrVariantModifyAction.ACTIVATION_STEP:let t=this.m_variant.getDirtyText();if(this.m_variant.isNameOrScopeDirty()){let n=this.m_variant.getDirtyScope();let i=n!==e.Scope.USER?this.m_variant.getDirtyName():null;this.createAndRunReplacementSave(i,t,n,e.InAQMgrVariantModifyAction.SAVE_REPLACE_STEP)}else{let n=this.m_variant.getName();let i=this.m_variant.getScope();this.createAndRunReplacementSave(n,t,i,e.InAQMgrVariantModifyAction.SAVE_OLD_STEP)}break;case e.InAQMgrVariantModifyAction.SAVE_REPLACE_STEP:o.deleteVariableVariant(this.m_variant,this.getActiveSyncType(),this,e.XStringValue.create(e.InAQMgrVariantModifyAction.DELETE_STEP));break;case e.InAQMgrVariantModifyAction.SAVE_OLD_STEP:this.applyVariantState();this.restorePreviousValuesAndEnd();break;case e.InAQMgrVariantModifyAction.SAVE_NEW_STEP:this.applyVariantState();this.endSync();break;case e.InAQMgrVariantModifyAction.DELETE_STEP:this.applyVariantState();this.restorePreviousValuesAndEnd();break;case e.InAQMgrVariantModifyAction.DELETE_ERROR_STEP:this.restorePreviousValuesAndEnd();break}}};e.InAQMgrVariantModifyAction.prototype.processSynchronization=function(t){if(!this.m_variant.isDirty()){return false}let n=this.getActionContext();if(this.m_variant.getName()===null){let t=this.m_variant.getDirtyScope();let n=t!==e.Scope.USER?this.m_variant.getDirtyName():null;this.createAndRunReplacementSave(n,this.m_variant.getDirtyText(),t,e.InAQMgrVariantModifyAction.SAVE_NEW_STEP);return true}this.m_previousVariableValues=n.getVariableContainer().serializeToElement(e.QModelFormat.INA_DATA);n.activateVariableVariant(this.m_variant,t,this,e.XStringValue.create(e.InAQMgrVariantModifyAction.ACTIVATION_STEP));return true};e.InAQMgrVariantModifyAction.prototype.releaseObjectInternal=function(){this.m_replacementVariant=null;this.m_variant=null;this.m_previousVariableValues=e.XObjectExt.release(this.m_previousVariableValues);e.InAQMgrSyncAction.prototype.releaseObjectInternal.call(this)};e.InAQMgrVariantModifyAction.prototype.restorePreviousValuesAndEnd=function(){let t=this.getActionContext();t.getVariableContainer().deserializeFromElementExt(e.QModelFormat.INA_DATA,this.m_previousVariableValues);this.endSync()};e.InAQRriTargetDetailsAction=function(){};e.InAQRriTargetDetailsAction.prototype=new e.InAQMgrSyncAction;e.InAQRriTargetDetailsAction.prototype._ff_c="InAQRriTargetDetailsAction";e.InAQRriTargetDetailsAction.m_minimizeResultSetPayload=false;e.InAQRriTargetDetailsAction.m_queryPattern=null;e.InAQRriTargetDetailsAction.m_targetKey=null;e.InAQRriTargetDetailsAction.createAndRun=function(t,n,i,r,o,l){let a=new e.InAQRriTargetDetailsAction;a.m_parent=n;a.m_identifier=i;e.InAQRriTargetDetailsAction.m_targetKey=r;e.InAQRriTargetDetailsAction.m_queryPattern=o;e.InAQRriTargetDetailsAction.m_minimizeResultSetPayload=l;a.setupActionAndRun(t,n,null,null);return a};e.InAQRriTargetDetailsAction.prototype.m_identifier=null;e.InAQRriTargetDetailsAction.prototype.m_parent=null;e.InAQRriTargetDetailsAction.prototype.callListener=function(e,t,n,i){};e.InAQRriTargetDetailsAction.prototype.exportRequestJson=function(){let t=e.PrFactory.createStructure();let n=e.QInAExportFactory.createForData(this.m_parent.getApplication(),this.m_parent.getModelCapabilities());let i=this.m_parent.setInnerStructure(t,"Analytics",null,n);let r=this.m_parent.getQueryModel();let o;if(e.InAQRriTargetDetailsAction.m_minimizeResultSetPayload){i.remove("Capabilities");o=e.PrFactory.createStructure();let t=o.putNewStructure("ResultSetFeatureRequest");t.putBoolean("SkipResultSetGeneration",true)}else{o=n.exportQueryModel(r,true,false)}if(r.getModelCapabilities().supportsRRI3()){let t=o.putNewStructure("Hints");e.QInAOptions.exportQueryStateHint(t,this.m_parent)}i.put("Definition",o);i.put("DataSource",n.exportDataSource(r.getDataSource(),false));i.getStructureByKey("DataSource").putString("Type","Query/RRI");let l=r.getQueryManager().getRriTargetManager();this.exportRriAction(i,l);return t};e.InAQRriTargetDetailsAction.prototype.exportRriAction=function(t,n){let i=t.putNewStructure("RRIAction");if(n.isCustomPathContext()){i.putStringNotNull("FocusDimension",n.getFocusDimension());let t=n.getPathContextMembers();if(e.notNull(t)&&t.size()>0){let e=i.putNewList("PathContextMembers");for(let n=0;n<t.size();n++){let i=t.get(n);let r=e.addNewStructure();r.putStringNotNull("FieldName",i.getFieldName());r.putStringNotNull("Member",i.getMemberName())}}}else{i.putInteger("Column",n.getResultSetColumn());if(n.isMemberContext()){i.putInteger("ColumnElements",n.getResultSetColumnElements())}i.putInteger("Row",n.getResultSetRow());if(n.isMemberContext()){i.putInteger("RowElements",n.getResultSetRowElements())}}i.putStringNotNull("Receiver",e.InAQRriTargetDetailsAction.m_targetKey);i.putStringNotNull("QueryPattern",e.InAQRriTargetDetailsAction.m_queryPattern)};e.InAQRriTargetDetailsAction.prototype.extractMessages=function(t){let n=e.XCollectionUtils.size(t);for(let e=0;e<n;e++){let n=t.getStructureAt(e);let i=n.getIntegerByKey("Type");let r=n.getIntegerByKey("Number");let o=n.getStringByKey("Text");if(i===2){this.addError(r,o)}else if(i===1){this.addWarning(r,o)}else if(i===0){this.addInfo(r,o)}}};e.InAQRriTargetDetailsAction.prototype.extractTarget=function(t){let n=e.XList.create();let i=null;for(let r=0;r<t.size();r++){let o=t.getStructureAt(r);if(e.notNull(o)){i=e.QRriTarget.create();i.setParameterValues(o,false);i.setProperties(o);n.add(i)}}return n};e.InAQRriTargetDetailsAction.prototype.onFunctionExecuted=function(t,n,i){this.addAllMessages(t);let r=null;if(t.isValid()){this.extractMessages(e.PrUtils.getListProperty(n.getRootElement(),"Messages"));r=this.extractTarget(e.PrUtils.getListProperty(n.getRootElement(),"RRITargets"))}let o=e.ExtResult.create(r,this);let l=this.m_identifier.getManager();l.setResult(o,this.m_identifier);this.endSync()};e.InAQRriTargetDetailsAction.prototype.processSynchronization=function(t){let n=this.exportRequestJson();let i=this.m_parent.getConnection();let r=i.getSystemConnect().getServerMetadata();let o=r.getMetadataForService(e.ServerService.ANALYTIC);let l=o.getByKey(e.InACapabilities.C032_FAST_PATH);let a;if(e.notNull(l)){a=l.getValue()}else{a=this.m_parent.getSystemType().getInAPath()}let s=i.newRpcFunction(a);let u=s.getRpcRequest();u.setRequestStructure(n);s.processFunctionExecution(t,this,null);return true};e.InAQRriTargetDetailsAction.prototype.releaseObjectInternal=function(){this.m_parent=null;this.m_identifier=null;e.InAQRriTargetDetailsAction.m_targetKey=null;e.InAQRriTargetDetailsAction.m_queryPattern=null;e.InAQRriTargetDetailsAction.m_minimizeResultSetPayload=false;e.InAQMgrSyncAction.prototype.releaseObjectInternal.call(this)};e.InAQRriTargetsSyncAction=function(){};e.InAQRriTargetsSyncAction.prototype=new e.InAQMgrSyncAction;e.InAQRriTargetsSyncAction.prototype._ff_c="InAQRriTargetsSyncAction";e.InAQRriTargetsSyncAction.m_isRri2=false;e.InAQRriTargetsSyncAction.m_minimizeResultSetPayload=false;e.InAQRriTargetsSyncAction.m_restrictOnSupported=false;e.InAQRriTargetsSyncAction.m_targetTypes=null;e.InAQRriTargetsSyncAction.createAndRun=function(t,n,i,r,o,l){let a=new e.InAQRriTargetsSyncAction;a.m_parent=n;a.m_identifier=i;e.InAQRriTargetsSyncAction.m_targetTypes=r;e.InAQRriTargetsSyncAction.m_restrictOnSupported=o;e.InAQRriTargetsSyncAction.m_minimizeResultSetPayload=l;e.InAQRriTargetsSyncAction.m_isRri2=!n.getQueryModel().getModelCapabilities().supportsRRI3();a.setupActionAndRun(t,n,null,null);return a};e.InAQRriTargetsSyncAction.shouldAdd=function(t){if(t.isQuery()&&!t.canBeExecutedLocally()){return false}if(e.notNull(e.InAQRriTargetsSyncAction.m_targetTypes)){return e.InAQRriTargetsSyncAction.m_targetTypes.contains(t.getTargetType())}else if(e.InAQRriTargetsSyncAction.m_restrictOnSupported){return t.isTargetTypeSupported()}return true};e.InAQRriTargetsSyncAction.prototype.m_identifier=null;e.InAQRriTargetsSyncAction.prototype.m_parent=null;e.InAQRriTargetsSyncAction.prototype.callListener=function(e,t,n,i){};e.InAQRriTargetsSyncAction.prototype.exportRequestJson=function(){let t=e.PrFactory.createStructure();let n=e.QInAExportFactory.createForData(this.m_parent.getApplication(),this.m_parent.getModelCapabilities());let i=this.m_parent.setInnerStructure(t,"Analytics",null,n);let r=this.m_parent.getQueryModel();let o;if(e.InAQRriTargetsSyncAction.m_minimizeResultSetPayload){i.remove("Capabilities");o=e.PrFactory.createStructure();let t=o.putNewStructure("ResultSetFeatureRequest");t.putBoolean("SkipResultSetGeneration",true)}else{o=n.exportQueryModel(r,true,false)}if(r.getModelCapabilities().supportsRRI3()){let t=o.putNewStructure("Hints");e.QInAOptions.exportQueryStateHint(t,this.m_parent)}i.put("Definition",o);i.put("DataSource",n.exportDataSource(r.getDataSource(),false));i.getStructureByKey("DataSource").putString("Type","Query/RRI");let l=r.getQueryManager().getRriTargetManager();this.exportRriContext(i,l);return t};e.InAQRriTargetsSyncAction.prototype.exportRriContext=function(t,n){let i=t.putNewStructure("RRIContext");if(n.isCustomPathContext()){i.putStringNotNull("FocusDimension",n.getFocusDimension());let t=n.getPathContextMembers();if(e.notNull(t)&&!t.isEmpty()){let e=i.putNewList("PathContextMembers");for(let n=0;n<t.size();n++){let i=t.get(n);let r=e.addNewStructure();r.putStringNotNull("FieldName",i.getFieldName());r.putStringNotNull("Member",i.getMemberName())}}}else{i.putInteger("Column",n.getResultSetColumn());if(n.isMemberContext()){i.putInteger("ColumnElements",n.getResultSetColumnElements())}i.putInteger("Row",n.getResultSetRow());if(n.isMemberContext()){i.putInteger("RowElements",n.getResultSetRowElements())}}if(n.isCompatibilityMode()&&!e.InAQRriTargetsSyncAction.m_isRri2){i.putString("Receiver","COMPATIBILITY")}};e.InAQRriTargetsSyncAction.prototype.extractMessages=function(t){let n=e.XCollectionUtils.size(t);for(let e=0;e<n;e++){let n=t.getStructureAt(e);let i=n.getIntegerByKey("Type");let r=n.getIntegerByKey("Number");let o=n.getStringByKey("Text");if(i===2){this.addError(r,o)}else if(i===1){this.addWarning(r,o)}else if(i===0){this.addInfo(r,o)}}};e.InAQRriTargetsSyncAction.prototype.extractRriTargets=function(t,n){let i=e.XList.create();let r=e.InAQRriTargetsSyncAction.m_isRri2||n;let o=e.PrUtils.getListSize(t,0);for(let n=0;n<o;n++){let o=e.PrUtils.getStructureElement(t,n);if(e.isNull(o)){continue}let l=e.QRriTarget.create();l.setParameterValues(o,r);if(r){l.setProperties(o)}if(e.InAQRriTargetsSyncAction.shouldAdd(l)){i.add(l)}}return i};e.InAQRriTargetsSyncAction.prototype.onFunctionExecuted=function(t,n,i){this.addAllMessages(t);let r=null;let o=this.m_identifier.getManager();if(t.isValid()){this.extractMessages(e.PrUtils.getListProperty(n.getRootElement(),"Messages"));r=this.extractRriTargets(e.PrUtils.getListProperty(n.getRootElement(),"RRITargets"),o.isCompatibilityMode())}let l=e.ExtResult.create(r,this);o.setResult(l,this.m_identifier);this.endSync()};e.InAQRriTargetsSyncAction.prototype.processSynchronization=function(t){let n=this.exportRequestJson();let i=this.m_parent.getConnection();let r=i.getSystemConnect().getServerMetadata();let o=r.getMetadataForService(e.ServerService.ANALYTIC);let l=o.getByKey(e.InACapabilities.C032_FAST_PATH);let a;if(e.notNull(l)){a=l.getValue()}else{a=this.m_parent.getSystemType().getInAPath()}let s=i.newRpcFunction(a);s.setServiceName(e.SystemServices.INA_SERVICE);let u=s.getRpcRequest();u.setRequestStructure(n);s.processFunctionExecution(t,this,null);return true};e.InAQRriTargetsSyncAction.prototype.releaseObjectInternal=function(){this.m_parent=null;this.m_identifier=null;e.InAQRriTargetsSyncAction.m_targetTypes=e.XObjectExt.release(e.InAQRriTargetsSyncAction.m_targetTypes);e.InAQRriTargetsSyncAction.m_minimizeResultSetPayload=false;e.InAQMgrSyncAction.prototype.releaseObjectInternal.call(this)};e.InAQueryManagerProvider=function(){};e.InAQueryManagerProvider.prototype=new e.QueryManager;e.InAQueryManagerProvider.prototype._ff_c="InAQueryManagerProvider";e.InAQueryManagerProvider.CLAZZ=null;e.InAQueryManagerProvider.staticSetupProvider=function(){e.InAQueryManagerProvider.CLAZZ=e.XClass.create(e.InAQueryManagerProvider)};e.InAQueryManagerProvider.prototype.m_applyRepoState=false;e.InAQueryManagerProvider.prototype.m_applyingQueryManagerState=false;e.InAQueryManagerProvider.prototype.m_capabilities=null;e.InAQueryManagerProvider.prototype.m_deserializationStructure=null;e.InAQueryManagerProvider.prototype.m_directVariableTransfer=false;e.InAQueryManagerProvider.prototype.m_exportData=null;e.InAQueryManagerProvider.prototype.m_importMetaData=null;e.InAQueryManagerProvider.prototype.m_importer=null;e.InAQueryManagerProvider.prototype.m_inaCapabilities=null;e.InAQueryManagerProvider.prototype.m_inaCapabilitiesValueHelp=null;e.InAQueryManagerProvider.prototype.m_inaRequestStructure=null;e.InAQueryManagerProvider.prototype.m_indicateVariableSubmitAndRSRequestBatch=false;e.InAQueryManagerProvider.prototype.m_isVariableSubmitNeeded=false;e.InAQueryManagerProvider.prototype.m_lastDataRequest=null;e.InAQueryManagerProvider.prototype.m_listOfRequestedResources=null;e.InAQueryManagerProvider.prototype.m_listenerForQueryModelReady=null;e.InAQueryManagerProvider.prototype.m_noVariableSubmitResponse=false;e.InAQueryManagerProvider.prototype.m_processingImageRequest=null;e.InAQueryManagerProvider.prototype.m_recordingQueryManagerState=false;e.InAQueryManagerProvider.prototype.m_rriTargetManager=null;e.InAQueryManagerProvider.prototype.m_savedMetadataStateBeforeVarScreen=null;e.InAQueryManagerProvider.prototype.m_savedStateBeforeVarScreen=null;e.InAQueryManagerProvider.prototype.m_stateManager=null;e.InAQueryManagerProvider.prototype.m_updateRuntimeCapabilities=false;e.InAQueryManagerProvider.prototype.m_valueHelpProvider=null;e.InAQueryManagerProvider.prototype.activateExperimentalFeatures=function(){if(e.notNull(this.m_deserializationStructure)){let t=this.m_deserializationStructure.getStringByKey("ExperimentalFeatures");if(e.XStringUtils.isNotNullAndNotEmpty(t)){let n=e.XStringTokenizer.splitString(t,",");this.m_inaCapabilities.activateDevCapabilities(n)}}};e.InAQueryManagerProvider.prototype.activateVariableVariant=function(e,t,n,i){return this.processActivateVariableVariant(e,t,n,i)};e.InAQueryManagerProvider.prototype.addVariable=function(e){this.assertLifeCycleActive();let t=this.getQueryModelBase().getVariableManagerBase();t.addVariable(e)};e.InAQueryManagerProvider.prototype.addVariableVariant=function(e){let t=this.getVariableVariantsInternal();let n=e.getName();if(t.containsKey(n)){t.removeElement(t.getByKey(n))}t.add(e)};e.InAQueryManagerProvider.prototype.applyRSFeatureRequest=function(){let t=e.InARuntimeUtils.getRequestContext(this.m_inaRequestStructure);let n;if(e.isNull(t)){n=this.m_inaRequestStructure.getStructureByKey("Definition")}else{n=t.getStructureByKey("Definition")}this.importRSFeatureRequest(n)};e.InAQueryManagerProvider.prototype.applyState=function(t,n,i,r){return e.InAQMgrApplyStateAction.createAndRun(t,this,n,i,r,this.m_stateManager)};e.InAQueryManagerProvider.prototype.applyStateOnQueryManager=function(t){this.m_applyingQueryManagerState=true;let n=e.QModelFormat.INA_REPOSITORY_DATA;if(this.isForRendering()){e.QueryManager.prototype.setupQueryModel.call(this);n=e.QModelFormat.INA_CLONE_RENDERING}let i=this.getQueryModel().deserializeFromElementExt(n,t);this.importQuerySettings(t);this.m_applyingQueryManagerState=false;return i};e.InAQueryManagerProvider.prototype.applyValueHelpCapabilities=function(){if(e.notNull(this.m_inaCapabilitiesValueHelp)){this.m_inaCapabilities=this.m_inaCapabilitiesValueHelp;this.m_inaCapabilitiesValueHelp=null;let t=e.QInAImportFactory.createForMetadataCore(this.getApplication(),this.getModelCapabilities());let n=this.getQueryModelBase();t.importBasicQueryModelCapabilities(n)}};e.InAQueryManagerProvider.prototype.applyingStateOnQueryManager=function(){return this.m_applyingQueryManagerState};e.InAQueryManagerProvider.prototype.assertNotDirectValueTransfer=function(){if(this.isDirectVariableTransferEnabled()){throw e.XException.createIllegalStateException("stateful variable handling cannot be mixed with direct variable transfer")}};e.InAQueryManagerProvider.prototype.buildBatchWithVarSubmitReq=function(){let t=this.m_lastDataRequest.getStructureByKey("Analytics");if(e.isNull(t)){return}let n=t.getStructureByKey("Definition");if(e.isNull(n)){return}let i=e.PrUtils.createDeepCopy(this.m_lastDataRequest);let r=i.getStructureByKey("Analytics").putNewStructure("ProcessingDirectives");r.putString("ProcessingStep","VariableSubmit");let o=e.PrFactory.createStructure();let l=o.putNewList(e.ConnectionConstants.INA_BATCH);l.add(i);l.add(this.m_lastDataRequest);this.m_lastDataRequest=o;this.m_indicateVariableSubmitAndRSRequestBatch=true};e.InAQueryManagerProvider.prototype.checkRequestStructureName=function(t,n){if(!e.XString.isEqual("Analytics",t)){return t}let i=this.getSystemType();if(e.isNull(i)||!i.isTypeOf(e.SystemType.BW)){return t}if(n){return"Planning"}return t};e.InAQueryManagerProvider.prototype.clearVariableVariants=function(){this.getVariableVariantsInternal().clear()};e.InAQueryManagerProvider.prototype.clearVariables=function(){this.assertLifeCycleActive();let e=this.getQueryModelBase().getVariableManagerBase();e.clearVariables()};e.InAQueryManagerProvider.prototype.cloneQueryManagerOptimizedWithLazyLoad=function(t){let n=this.getQueryModelBase();let i=e.XList.create();i.add(n.getPrimaryCalculationDimension().getName());if(n.getSecondaryCalculationDimension()!==null){i.add(n.getSecondaryCalculationDimension().getName())}if(e.XStringUtils.isNotNullAndNotEmpty(t)){let n=e.JsonParserFactory.createFromSafeString(t);if(n.isStructure()){let t=n.asStructure().getStructureByKey("DimensionsRepo");if(e.notNull(t)){let n=t.getListByKey("Elements");if(e.notNull(n)){for(let t=0;t<n.size();t++){let r=n.get(t).asStructure();let o=r.getStringByKey("Axis");let l=e.AxisType.lookup(o);if(l===e.AxisType.ROWS||l===e.AxisType.COLUMNS){i.add(r.getStringByKey("Name"))}}}}}}let r=this.cloneQueryManagerOptimized(i);let o=r.getQueryServiceConfig();o.setRequiredDimensions(e.XList.create());o.setSupportsDimensionLazyLoad(true);if(e.XCollectionUtils.hasElements(r.getDimensionsToClone())){r.getDimensionsToClone().clear()}if(e.XCollectionUtils.hasElements(r.getDimensionsRequestedFromClient())){r.getDimensionsRequestedFromClient().clear()}let l=r.getQueryModel().getDimensionManagerBase();let a=l.getDimensionNames();let s=n.getDimensionManagerBase();let u=s.getDimensionNames();for(let t=0;t<u.size();t++){let n=u.get(t);if(!a.contains(n)){let t=s.getDimensionByNameInternal(n);if(e.notNull(t)){l.addDimensionReference(n,t.getDimensionType(),t.isTechnicalDimension())}}}return r};e.InAQueryManagerProvider.prototype.cloneQueryManagerUsingExtDataSource=function(t,n){if(t!==e.QueryCloneMode.MICRO_CUBE){throw e.XException.createIllegalStateException("Cloning query manager using external datasource is supported for MicroCube use only.")}e.XObjectExt.assertNotNullExt(n,"External datasource can't be null.");this.assertLifeCycleActive();let i=new e.InAQueryManagerProvider;i.setupClone(this,t,n);return i};e.InAQueryManagerProvider.prototype.collectInAMergeAndBatchFunctions=function(t){this.getActiveResultSetContainerBase().setMergeId(null);let n=this.getConnection();if(e.notNull(n)&&n.isInAMergeProcessingEnabled()&&n.getBatchModePathExt()!==null){let i=t.getRpcRequest().getRequestStructure();let r=this.isValidInAForMergeProcessing(i);if(r){let r=n.getConnectionPool();let o=r.getInAMergeProcessor();if(e.notNull(o)){let r=null;let l=null;let a=this.getSystemType();let s=n.getBatchRequestManager();if(this.isShallow()){let l=e.InAQueryMergeUtils.getInstanceId(i);if(e.notNull(l)){let u=e.PrUtilsJsonPath.getFirstElementFromPath(i,e.InAQueryMergeConstants.PA_DEFINITION_PATH);let p=u.getListByKey(e.InAQueryMergeConstants.QY_DIMENSIONS);let g=e.InARestrictedMeasureUtils.getMeasureStructure(p);if(e.notNull(g)){r=g.getStructureByKey(e.InAQueryMergeConstants.TAG_MEASURE_METADATA_FOR_PERSISTED_INA)}o.addInASourceQuery(l,t,n,a,null,null,r);if(e.notNull(s)){s.removeBatchFunction(t)}}}else{let u=this.getQueryModelBase();let p=u.getMeasureDimension();if(e.notNull(p)){let g=p.getName();if(!o.hasMeasureMembersMetadata(g)){let t=u.getDimensionManagerBase().getDimensionLazyLoader();if(e.notNull(t)){r=t.getInaDimension(g)}}let m=u.getDataSource();let c=m.getFullQualifiedName();if(!o.hasModelMetadata(c)){l=u.getMetadata()}let y=m.getInstanceId();if(e.isNull(y)){y=e.InAQueryMergeUtils.getInstanceId(i);if(e.isNull(y)){y=this.getInstanceId()}}if(e.notNull(y)){o.addInASourceQuery(y,t,n,a,c,l,r);if(e.notNull(s)){s.removeBatchFunction(t)}}}}}}else{e.InAQueryMergeUtils.cleanTagsFromRequest(i,true)}}};e.InAQueryManagerProvider.prototype.considerBlendingFlow=function(t){this.setMode(e.QueryManagerMode.BLENDING);let n=e.QFactory.createBlendingDefinition();this.getQueryServiceConfig().setBlendingDefinition(n);let i=t.getListByKey("Sources");if(e.notNull(i)){let t=i.size();for(let r=0;r<t;r++){let t=i.getStructureAt(r);let o=t.getStringByKey("AliasName");let l=e.XStringValue.create(o);let a=t.getStructureByKey("DefiningContext");let s=e.QueryServiceConfig.createWithDataRequest(this.getApplication(),this.getSystemName(),a);let u=s.processQueryManagerCreation(e.SyncType.BLOCKING,null,null);let p=u.getData();let g=null;if(e.notNull(this.m_deserializationStructure)){let t=this.m_deserializationStructure.getStructureByKey("DataSource");if(e.isNull(t)){t=this.m_deserializationStructure.getStructureByKey("Definition").getStructureByKey("DataSource")}let n=t.getListByKey("Sources").getStructureAt(r);let i=n.getStructureByKey("DefiningContext");g=e.PrUtils.serialize(i,true,false,0)}p.processModelInitializationAndApplyRepoState(e.SyncType.BLOCKING,null,l,g);let m=p.getQueryModel();n.addNewSource(m,o)}}let r=t.getListByKey("Mappings");if(e.notNull(r)){let t=r.size();for(let i=0;i<t;i++){let t=r.getStructureAt(i);let o=e.BlendingLinkType.lookup(t.getStringByKey("LinkType"));let l=t.getStringByKey("DimensionName");let a=n.addNewDimensionMapping(o,l);let s=t.getListByKey("Mapping");for(let e=0;e<s.size();e++){let t=s.getStructureAt(e);let i=t.getStringByKey("AliasName");let r=t.getStructureByKey("MappingDefinition").getStructureByKey("Member").getStringByKey("Name");let o=n.getSources().get(e);a.addNewDimensionMappingDefinition(o.getQueryModel().getDimensionByName(r),i)}}}};e.InAQueryManagerProvider.prototype.createCustomHierarchyProvider=function(t,n){return e.InACustomHierarchyProvider.create(this,t,n)};e.InAQueryManagerProvider.prototype.createFunction=function(){return this.createFunctionExt(true)};e.InAQueryManagerProvider.prototype.createFunctionExt=function(t){let n=this.getSystemDescription();e.XObjectExt.assertNotNullExt(n,"System description is null");let i=this.getMainCapabilities().getByKey(e.InACapabilities.C032_FAST_PATH);let r;if(e.notNull(i)&&i.getValue()!==null){r=i.getValue()}else{r=n.getSystemType().getInAPath()}let o=this.getConnection();if(e.isNull(o)){let e=this.getApplication().getConnectionPool();o=e.getOpenConnection(n.getSystemName())}let l;if(e.XStringUtils.isNotNullAndNotEmpty(this.getResourcePath())){l=o.newRpcFunctionForBLOB(this.getResourcePath());l.getRpcRequest().setMethod(e.HttpRequestMethod.HTTP_GET);l.setServiceName(e.SystemServices.INA_SERVICE);return l}if(!t||o.isBatchModeEnabled()&&this.getActiveResultSetContainer().isRemotePreQuery()&&this.getPreQueryName()===null&&!e.XCollectionUtils.hasElements(this.getQueryModel().getPreQueries())){l=o.newRpcFunctionForNonBatchableQuery(r)}else if(this.m_indicateVariableSubmitAndRSRequestBatch){l=o.newRpcFunction(o.getBatchModePath())}else{l=o.newRpcFunction(r)}l.setServiceName(e.SystemServices.INA_SERVICE);let a=l.getRpcRequest();a.setSapPassportTransactionId(this.getInstanceId());a.setMethod(e.HttpRequestMethod.HTTP_POST);a.getProcessingHint().putBoolean(e.ConnectionParameters.CACHE_HINTS_ENABLED,this.getQueryManager().isCacheHintEnabled());return l};e.InAQueryManagerProvider.prototype.createResultSetProvider=function(t,n,i){e.XBooleanUtils.checkTrue(this.getCapabilitiesBase().supportsEncodedResultset(),"Only encoded resultset is supported");return e.InARsEnProvider.create(this,t,n,e.QContextType.RESULT_SET)};e.InAQueryManagerProvider.prototype.dealWithPreQuery=function(t,n,i){let r=t.size();for(let o=0;o<r;o++){let r=t.get(o);let l=r.getName();let a=r.getObject();a.generateTransientObjects();let s=a.getPreQueries();if(e.XCollectionUtils.hasElements(s)){this.dealWithPreQuery(s,n,i)}let u;if(i===e.QModelFormat.INA_PERSISTED_QUERY_DATA){u=a.getQueryManager().fillPersistedQueryDataRequestStructure(true)}else{u=a.getQueryManager().fillDataRequestStructure(true)}let p=e.InARuntimeUtils.getRequestContext(u);let g=a.getSystemName();if(!e.XString.isEqual(g,this.getSystemName())){let e=p.getStructureByKey("DataSource");e.putString("System",g)}let m=p.getStructureByKey("Definition");m.putString("Name",l);let c=m.getStructureByKey("ResultSetFeatureRequest");c.putBoolean("ReturnEmptyJsonResultSet",true);n.add(u);a.destroyTransientObjects()}};e.InAQueryManagerProvider.prototype.deleteVariableVariant=function(t,n,i,r){if(e.isNull(t)||this.getVariableVariantByName(t.getName())===null){return e.OlapVarImmediateCallback.createAndRun(n,i,r)}if(!this.supportsMaintainsVariableVariants()){return e.OlapVarImmediateCallback.createAndRunError(e.ErrorCodes.INVALID_STATE,"Deleting variants is not supported",n,i,r)}return this.processDeleteVariableVariant(t,n,i,r)};e.InAQueryManagerProvider.prototype.emptyVariableDefinition=function(e,t,n){return this.processEmptyVariableDefinition(e,t,n)};e.InAQueryManagerProvider.prototype.enableRuntimeVariables=function(){if(this.supportsServerState()&&this.getMode()===e.QueryManagerMode.RAW_QUERY){if(this.getModelCapabilities().supportsAutoVariableSubmit()){let t=e.InARuntimeUtils.getRequestContext(this.m_lastDataRequest);if(e.notNull(t)){let e=t.getStructureByKey("DataSource");e.putString("InstanceId",this.getQueryServiceConfig().getInstanceId());let n=t.getStructureByKey("Definition");let i=n.getStructureByKey("ResultSetFeatureRequest");i.putBoolean("IgnoreAutoSubmit",false)}}else if(this.getVariableProcessorState()===e.VariableProcessorState.SUBMITTED){let t=this.m_lastDataRequest.getListByKey(e.ConnectionConstants.INA_BATCH);if(e.notNull(t)){this.m_lastDataRequest=t.getStructureAt(1)}}else{this.buildBatchWithVarSubmitReq()}}};e.InAQueryManagerProvider.prototype.exportDataEntryDescription=function(t){let n=this.getActiveResultSetContainer();if(e.isNull(n)){return}if(!n.hasDataEntryCollection()){return}let i=n.getDataEntryCollection();if(!i.hasChangedDataEntries()){return}let r=i.getDataCellEntryDescription();if(e.XStringUtils.isNullOrEmpty(r)){return}t.putString("ActionDescription",r)};e.InAQueryManagerProvider.prototype.exportQueryModelForInARequest=function(t,n,i,r){let o=i.getSpatialClusterSettings();if(e.notNull(o)&&o.isActive()){let t=e.QInASpatialClustering.exportSpatialClusteringRequest(this.m_exportData,o);let n=t.getStructureByKey("Analytics");return n.getStructureByKey("Definition")}let l=n.containsKey(e.InACapabilities.C001_DATASOURCE_AT_SERVICE);let a=this.getActiveResultSetContainerBase().getLovConfig();if(e.notNull(a)){return r.exportLovRequest(i,t,!l,a)}return r.exportQueryModel(i,t,!l)};e.InAQueryManagerProvider.prototype.exportToInADefinition=function(t,n,i,r,o,l){let a=this.getQueryModelBase();let s=this.checkRequestStructureName(n,this.hasNewValues());let u=this.setInnerStructure(t,s,r,o);o.m_variableProcessingDirective=r;a.setHasProcessingStep(e.notNull(r));let p;if(this.m_recordingQueryManagerState){p=this.getQueryModel().serializeToElement(e.QModelFormat.INA_REPOSITORY_DATA)}else{p=this.exportQueryModelForInARequest(i,this.getMainCapabilities(),a,o)}if(e.isNull(p)){return}p.putStringNotNull("Name",this.getPreQueryName());u.put("Definition",p);if(this.supportsDataEntryReadOnly()){let e=!this.isDataEntryReadOnly();p.putBoolean("InputEnabled",e)}let g=e.PrFactory.createStructure();e.QInAExportUtil.setNameIfNotNull(g,"PlanningMode",this.getPlanningModeEffective());e.QInAVersion.exportPlanningVersions(g,this);this.exportDataEntryDescription(g);e.QInANewValues.exportNewValues(p,g,this);e.QInANewLines.exportNewLines(p,this);e.QInADocumentsIds.exportDocumentsIds(p,this);e.QInAInputEnablementRules.exportInputEnablementRules(g,this);e.QInAInputReadinessFilter.exportInputReadinessFilter(p,this);if(g.hasElements()){p.put("PlanningExtensions",g)}this.addAllMessages(o);this.endProfileStep();if(this.isPersistedPreQuery()){p.put("ResultSetFeatureRequest",e.QInADataSourceBlending.exportResultSetFeatures(a,false))}else{let t=e.QInAOptions.exportOptions(this);e.QInAOptions.exportReturnedDataSelections(t,this);p.put("ResultSetFeatureRequest",t)}if(e.notNull(r)){let n=t.getStructureByKey(s);let i=n.putNewStructure("ProcessingDirectives");i.putString("ProcessingStep",r.getName());if(e.notNull(l)){if(r===e.ProcessingStep.VARIABLE_DEFINITION||r===e.ProcessingStep.VARIANT_DELETE||r===e.ProcessingStep.VARIANT_SAVE){e.QInAVariableVariants.exportVariableVariant(p,l)}}}e.QInAOptions.exportOptimizerHints(p,this);if(this.getSession().hasFeature(e.FeatureToggleOlap.FLEX_CLIENT_INFO)&&this.getModelCapabilities().supportsFlexibleClientInfo()){e.QInAClientInfo.exportFlexibleClientInfo(t,this)}else{e.QInAClientInfo.exportClientInfo(t,a,this.getModelCapabilities().supportsClientInfo(),this.getSystemType().isTypeOf(e.SystemType.BW))}};e.InAQueryManagerProvider.prototype.exportVariables=function(e,t){this.m_exportData.exportVariables(e,t)};e.InAQueryManagerProvider.prototype.extractFeatureTogglesFromRequest=function(){let t=e.XSetOfNameObject.create();let n=this.getQueryServiceConfig().getDataRequest();let i=e.InARuntimeUtils.getRequestContext(n);if(e.isNull(i)){let t=n.getListByKey(e.ConnectionConstants.INA_BATCH);if(e.notNull(t)){i=t.getStructureAt(t.size()-1).getStructureByKey("Analytics")}}if(e.isNull(i)){return t}let r=i.getListByKey("Capabilities");if(e.isNull(r)){return t}let o=this.getMainCapabilities();let l=r.size();for(let n=0;n<l;n++){let i=r.get(n);if(!o.containsKey(i.getString())){let n=e.FeatureToggle.lookup(i.getString());if(e.notNull(n)){t.add(n)}}}return t};e.InAQueryManagerProvider.prototype.extractInADataSource=function(){let t=this.getDataRequest();if(e.isNull(t)){t=this.getQueryServiceConfig().getDataRequest()}let n=t.getListByKey(e.ConnectionConstants.INA_BATCH);if(e.isNull(n)){this.m_inaRequestStructure=t}else{this.m_inaRequestStructure=n.getStructureAt(n.size()-1)}let i=e.InARuntimeUtils.getRequestContext(this.m_inaRequestStructure);if(e.isNull(i)){i=this.m_inaRequestStructure.getStructureByKey("Definition")}return i.getStructureByKey("DataSource")};e.InAQueryManagerProvider.prototype.fillAnalyticRequestStructure=function(t,n,i,r,o){this.addProfileStep("fillAnalyticRequestStructure");let l=this.getResultsetContainer(false);let a=l.getRequest();if(l.getSyncState()===e.SyncState.OUT_OF_SYNC||e.isNull(a)){let l=this.getConnection();let a=e.isNull(l)?false:l.isInAMergeProcessingEnabled();let s=this.getApplication();let u=this.getModelCapabilities();let p=a?e.QInAExportFactory.createForDataMergeProcessing(s,u):e.QInAExportFactory.createForData(s,u);this.exportToInADefinition(t,n,i,r,p,o)}else{t.copyFrom(a,null)}};e.InAQueryManagerProvider.prototype.fillDataRequestStructure=function(t){let n=this.getMode();let i=this.getInitSettings();if(n.isTypeOf(e.QueryManagerMode.DEFAULT)||n===e.QueryManagerMode.BLENDING){this.m_lastDataRequest=e.PrFactory.createStructure();let n=i.getProviderType();let r=e.QInAConverter.lookupContextNameForProvider(n);let o=this.getProcessingDirective(n);this.fillAnalyticRequestStructure(this.m_lastDataRequest,r,t,o,null)}else if(n===e.QueryManagerMode.RAW_QUERY){this.m_lastDataRequest=i.getDataRequest();if(this.isUpdatingDataRequestCapabilities()&&this.getApplication().getConnectionPool().getConnection(this.getSystemName()).supportsAnalyticCapability(e.InACapabilities.V266_RESULTSETV2_METADATA_EXTENSION1)){if(this.m_lastDataRequest.isProxy()){this.m_lastDataRequest=e.PrUtils.deepCopyElement(this.m_lastDataRequest)}e.InARuntimeUtils.setLanguageAndAddRuntimeCapability(this.m_lastDataRequest,this.getSystemDescription().getLanguage());let t=e.InARuntimeUtils.getRequestContext(this.m_lastDataRequest);if(e.notNull(t)){let n=t.getStructureByKey("Definition");let i=n.getStructureByKey("ResultSetFeatureRequest");e.QInAOptions.importPaging(i,this);e.QInAOptions.importSuppressKeyfigureCalculation(i,this)}}else if(!this.isUpdatingDataRequestCapabilities()){let t=this.m_lastDataRequest.getStructureByKey("Analytics");let n=t.getStructureByKey("Definition");let i=n.getStructureByKey("ResultSetFeatureRequest");if(e.isNull(i)){i=n.putNewStructure("ResultSetFeatureRequest");i.putString("ResultEncoding","None");i.putString("ResultFormat","Version2")}e.QInAOptions.exportReturnedDataSelections(i,this);this.updateString(i,"ResultEncoding","None");this.updateString(i,"ResultFormat","Version2");e.QInAOptions.setLanguage(t,this);e.QInAOptions.fillOptions(this.m_lastDataRequest,this.getCapabilitiesBase(),this.getSession(),this.getInitSettings())}this.enableRuntimeVariables();if(this.getSession().hasFeature(e.FeatureToggleOlap.FLEX_CLIENT_INFO)&&this.getModelCapabilities().supportsFlexibleClientInfo()){e.QInAClientInfo.exportFlexibleClientInfo(this.m_lastDataRequest,this)}else{e.QInAClientInfo.exportClientInfo(this.m_lastDataRequest,this,this.getModelCapabilities().supportsClientInfo(),this.getSystemType().isTypeOf(e.SystemType.BW))}this.updateSortListForLanguage(this.m_lastDataRequest);if(!this.getConnection().getConnectionPool().isInAMergeProcessingEnabled(this.getSystemName())){this.m_lastDataRequest=e.InAQueryMergeUtils.cleanTagsFromRequest(this.m_lastDataRequest,false)}return this.m_lastDataRequest}else{throw e.XException.createIllegalStateException("Unknown mode")}e.QInAOptions.setRequestTimeZone(this.m_lastDataRequest,this);return this.m_lastDataRequest};e.InAQueryManagerProvider.prototype.fillPersistedQueryAnalyticRequestStructure=function(t,n,i,r){this.addProfileStep("fillPersistedQueryAnalyticRequestStructure");let o=e.QInAExportFactory.createForPersistedQueryData(this.getApplication(),this.getModelCapabilities());this.exportToInADefinition(t,n,i,r,o,null)};e.InAQueryManagerProvider.prototype.fillPersistedQueryDataRequestStructure=function(t){this.m_lastDataRequest=e.PrFactory.createStructure();let n=this.getInitSettings().getProviderType();let i=e.QInAConverter.lookupContextNameForProvider(n);let r=this.getProcessingDirective(n);this.fillPersistedQueryAnalyticRequestStructure(this.m_lastDataRequest,i,t,r);e.QInAOptions.setRequestTimeZone(this.m_lastDataRequest,this);return this.m_lastDataRequest};e.InAQueryManagerProvider.prototype.fillQueryConfigSettings=function(e){let t=this.getQueryServiceConfig();let n=t.serialize();e.put("QueryServiceConfig",n)};e.InAQueryManagerProvider.prototype.getCapabilitiesBase=function(){if(e.isNull(this.m_capabilities)){this.m_capabilities=this.m_inaCapabilities.getQueryCapabilities()}return this.m_capabilities};e.InAQueryManagerProvider.prototype.getDataAreas=function(){let t=this.getSystemType();if(!t.isTypeOf(e.SystemType.BW)){return null}let n=this.getQueryModel();if(e.isNull(n)){return null}let i=e.PlanningStateHandler.getDataAreaStateByName(this.getApplication(),this.getSystemName(),n.getDataArea());if(e.isNull(i)){return null}if(i.isSubmitted()){return null}let r=e.PrFactory.createList();r.add(i.serializeToJson());return r};e.InAQueryManagerProvider.prototype.getDataRequest=function(){if(e.isNull(this.m_lastDataRequest)&&this.getMode()!==e.QueryManagerMode.RAW_QUERY){this.fillDataRequestStructure(true)}return this.m_lastDataRequest};e.InAQueryManagerProvider.prototype.getDataRequestAsString=function(){let t=this.getDataRequest();return e.isNull(t)?null:t.toString()};e.InAQueryManagerProvider.prototype.getDeserializationImporter=function(){return this.m_importer};e.InAQueryManagerProvider.prototype.getDeserializationStructure=function(){return this.m_deserializationStructure};e.InAQueryManagerProvider.prototype.getInaCapabilities=function(){return this.m_inaCapabilities};e.InAQueryManagerProvider.prototype.getMainCapabilities=function(){return this.m_inaCapabilities.getActiveCapabilities()};e.InAQueryManagerProvider.prototype.getMessageManager=function(){return this};e.InAQueryManagerProvider.prototype.getMetadataStateBeforeVarScreen=function(){return this.m_savedMetadataStateBeforeVarScreen};e.InAQueryManagerProvider.prototype.getNewResultsetContainer=function(){return this.getResultsetContainer(true)};e.InAQueryManagerProvider.prototype.getPlanningModeEffective=function(){if(!this.isDataEntryEnabled()){return null}let t=this.getSystemType();if(!t.isTypeOf(e.SystemType.HANA)){return null}let n=this.getPlanningMode();if(n===e.PlanningMode.SERVER_DEFAULT){return null}if(e.isNull(n)){return e.PlanningMode.DISABLE_PLANNING}return n};e.InAQueryManagerProvider.prototype.getProcessingDirective=function(t){if(t!==e.ProviderType.PLANNING&&this.getVariableProcessorState()===e.VariableProcessorState.VALUE_HELP){return e.ProcessingStep.VARIABLE_DEFINITION}return null};e.InAQueryManagerProvider.prototype.getProviderTypeProx=function(){return this.getInitSettings().getProviderType()};e.InAQueryManagerProvider.prototype.getQueryManagerProvider=function(){return this};e.InAQueryManagerProvider.prototype.getRequestLanguage=function(){let t=this.getConnection().getSystemDescription().getLanguage();if(e.XStringUtils.isNullOrEmpty(t)){let n=this.getProcess().getUserProfile();if(e.notNull(n)){t=n.getDataAccessLanguage()}}return t};e.InAQueryManagerProvider.prototype.getResourceDetailsFromResourceIdentifier=function(e){if(!this.m_listOfRequestedResources.contains(e)){this.m_listOfRequestedResources.add(e);return this.getOlapEnv().useBLOBDetailsForResourceId(e)}return this.getOlapEnv().getBLOBDetailsForResourceId(e)};e.InAQueryManagerProvider.prototype.getResourcePath=function(){return this.m_processingImageRequest};e.InAQueryManagerProvider.prototype.getResultSetProviderFactory=function(){return this};e.InAQueryManagerProvider.prototype.getRriTargetManager=function(){if(e.isNull(this.m_rriTargetManager)&&this.getModelCapabilities().supportsReportReportInterface()){this.m_rriTargetManager=e.QRriTargetManager.create(this)}return this.m_rriTargetManager};e.InAQueryManagerProvider.prototype.getStateBeforeVarScreen=function(){return this.m_savedStateBeforeVarScreen};e.InAQueryManagerProvider.prototype.getValueHelpProvider=function(){if(e.isNull(this.m_valueHelpProvider)){this.m_valueHelpProvider=e.InAQueryValueHelpProvider.create(this)}return this.m_valueHelpProvider};e.InAQueryManagerProvider.prototype.getVariableBaseAt=function(e){this.assertLifeCycleActive();let t=this.getQueryModelBase().getVariableManagerBase();return t.getVariableBaseAt(e)};e.InAQueryManagerProvider.prototype.getVariableBaseByName=function(e){this.assertLifeCycleActive();let t=this.getQueryModelBase().getVariableManagerBase();return t.getVariableBaseByName(e)};e.InAQueryManagerProvider.prototype.getVariableProcessorProvider=function(){return this};e.InAQueryManagerProvider.prototype.getVariableVariantByName=function(e){return this.getVariableVariantsInternal().getByKey(e)};e.InAQueryManagerProvider.prototype.getVariableVariants=function(){return this.getVariableVariantsInternal()};e.InAQueryManagerProvider.prototype.getVariableVariantsInternal=function(){let e=this.getOlapEnv().getSystemContainer(this.getSystemName());return e.getVariantsByDatasource(this.getDataSource().getFullQualifiedName())};e.InAQueryManagerProvider.prototype.getVariablesExporter=function(){return this.m_exportData};e.InAQueryManagerProvider.prototype.getVariablesImporter=function(){return this.m_importMetaData};e.InAQueryManagerProvider.prototype.importQuerySettings=function(t){this.importRSFeatureRequest(t);e.QInAOptions.importOptimizerHints(t,this)};e.InAQueryManagerProvider.prototype.importRSFeatureRequest=function(t){let n=t.getStructureByKey("ResultSetFeatureRequest");e.QInAOptions.importPaging(n,this);e.QInAOptions.importSuppressKeyfigureCalculation(n,this);e.QInAOptions.importReturnedDataSelections(false,n,this)};e.InAQueryManagerProvider.prototype.importVariables=e.noSupport;e.InAQueryManagerProvider.prototype.isApplyingRepoState=function(){return this.m_applyRepoState};e.InAQueryManagerProvider.prototype.isCurrentInstanceIdPresentInMergedDoc=function(t){let n=this.getConnection();let i=n.getConnectionPool();let r=i.getInAMergeProcessor();let o=r.getMergedPersistResponse(this.getSystemName());let l=false;for(let n=0;n<o.size()&&!l;n++){let i=o.get(n);l=e.XStream.of(i.getListByKey(e.InAQueryMergeConstants.TAG_MERGE_QUERY_RESPONSE_RECEPIENTS)).find(n=>{let i=n;let r=i.getStructureByKey("Analytics").getStructureByKey("DataSource").getStringByKey("InstanceId");return e.XString.isEqual(t,r)}).isPresent()}return l};e.InAQueryManagerProvider.prototype.isDirectVariableTransfer=function(){return this.m_directVariableTransfer};e.InAQueryManagerProvider.prototype.isForRendering=function(){let t=this.getInitSettings();return t.getMode()===e.QueryManagerMode.RAW_QUERY&&t.getDefinitionType()===e.QModelFormat.INA_CLONE_RENDERING};e.InAQueryManagerProvider.prototype.isIncludePerformanceNotDefault=function(){return this.m_includePerformanceData!==e.TriStateBool._DEFAULT};e.InAQueryManagerProvider.prototype.isPersistedPreQuery=function(){return this.getPreQueryName()!==null&&this.getResultSetPersistenceIdentifier()!==null};e.InAQueryManagerProvider.prototype.isServiceConfigMatching=function(t,n,i){let r;let o=n.getSystemConnect().getServerMetadata();if(e.isNull(o)){i.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.SERVER_METADATA_NOT_FOUND,"Server metadata not available",null);r=false}else{let i=t;let l=e.InACapabilitiesProvider.create(n.getSession(),o,i.getProviderType(),null);r=l.getServerMainCapabilities()!==null}return r};e.InAQueryManagerProvider.prototype.isUpdatingDataRequestCapabilities=function(){return this.m_updateRuntimeCapabilities};e.InAQueryManagerProvider.prototype.isValidInAForMergeProcessing=function(t){let n=false;if(e.notNull(t)){let i=t.getStringRepresentation();let r=e.InAQueryMergeUtils.getQueryType(t);let o=e.PrUtilsJsonPath.getFirstElementFromPath(t,e.InAQueryMergeConstants.PA_ANALYTICS_SERVICE_TYPE_PATH);if(e.notNull(o)&&(e.XString.isEqual(r,e.InAQueryMergeConstants.QY_QUERY)||e.XString.isEqual(r,e.InAQueryMergeConstants.QY_VIEW)||e.XString.isEqual(r,e.InAQueryMergeConstants.QY_PLANNING)||e.XString.isEqual(r,e.InAQueryMergeConstants.QY_QUERY_VALUE_HELP)||e.XString.isEqual(r,e.InAQueryMergeConstants.QY_QUERY_INA_MODEL))&&!e.XString.containsString(i,e.InAQueryMergeConstants.QY_PROCESSING_DIRECTIVES)&&!e.XString.containsString(i,e.InAQueryMergeConstants.QY_PROCESSING_STEP)){n=true}if(this.isShallow()){let i=e.PrUtilsJsonPath.getFirstElementFromPath(t,e.InAQueryMergeConstants.PA_DATASOURCE_PATH);let r=i.getStringByKey("InstanceId");n=this.isCurrentInstanceIdPresentInMergedDoc(r)}}return n};e.InAQueryManagerProvider.prototype.isVariableSubmitNeeded=function(){return this.m_isVariableSubmitNeeded};e.InAQueryManagerProvider.prototype.isVariableValuesRuntimeNeeded=function(){return this.getSystemType().isTypeOf(e.SystemType.BW)};e.InAQueryManagerProvider.prototype.loadQueryModel=function(t,n,i){if(this.isShallow()){return this.processModelInitialization(t,n,i)}if(e.notNull(n)){n.onQueryModelInitialized(this.getQueryServiceConfig(),this,i)}return this.getQueryServiceConfig()};e.InAQueryManagerProvider.prototype.newObject=function(){return new e.InAQueryManagerProvider};e.InAQueryManagerProvider.prototype.onQueryModelInitialized=function(t,n,i){if(!t.hasErrors()){if(this.m_applyRepoState){this.applyRSFeatureRequest()}if(e.notNull(this.m_listenerForQueryModelReady)){this.m_listenerForQueryModelReady.onQueryModelInitialized(t,this,i)}}};e.InAQueryManagerProvider.prototype.prepareExperimentalCapabilities=function(){let t=this.getConnection().getSystemConnect().getServerMetadata();let n=this.getInitSettings().getProviderType();let i=this.getSession();this.m_inaCapabilities=e.InACapabilitiesProvider.create(i,t,n,null);let r=n.getAssociatedValueHelp();this.m_inaCapabilitiesValueHelp=e.InACapabilitiesProvider.create(i,t,r,null);let o=i.getFeatureToggles();if(this.isShallow()){o=this.extractFeatureTogglesFromRequest()}this.m_inaCapabilities.activateDevCapabilities(o.getKeysAsReadOnlyList())};e.InAQueryManagerProvider.prototype.prepareMergeCandidate=function(){let t=this.serializeToElement(e.QModelFormat.INA_DATA_MERGE_PROCESSING);let n=this.createFunction();let i=n.getRpcRequest();i.setRequestStructure(t);this.collectInAMergeAndBatchFunctions(n);let r=this.getQueryModelBase();r.generateTransientObjects();let o=this.getQueryModel().getPreQueries();e.XStream.of(o).forEach(e=>{let t=e.getObject();let n=t.getQueryManager();n.setResultSetTransportEnabled(false);n.setPreQueryName(e.getName());n.prepareMergeCandidate()});r.destroyTransientObjects()};e.InAQueryManagerProvider.prototype.processActivateVariableVariant=function(t,n,i,r){return e.InAQMgrVarAction.createAndRunVariantActivation(this,t,n,i,r)};e.InAQueryManagerProvider.prototype.processBLOB=function(t,n,i,r){if(e.XStringUtils.isNullOrEmpty(r)){let t=e.BLOBContainer.createBLOBContainer(this.getQueryManager(),null);t.addError(e.ErrorCodes.INVALID_FIELD,"No Image path specified");if(e.notNull(n)){n.onBLOBAvailable(t,t,i)}return t}let o=this.getConnection();if(!o.supportsWebServiceForBLOBObjects()){this.getActiveResultSetContainer().addError(e.ErrorCodes.INVALID_SYSTEM,"No Support for retrieving BLOBs.");let t=e.BLOBContainer.createBLOBContainer(this,null);if(e.notNull(n)){n.onBLOBAvailable(t,t,i)}return t}this.m_processingImageRequest=r;if(this.getOlapEnv().hasBLOBForResourceId(r)){let t=e.BLOBContainer.createBLOBContainer(this,null);if(e.notNull(n)){n.onBLOBAvailable(t,t,i)}this.m_processingImageRequest=null;return t}this.m_listOfRequestedResources.add(r);let l=e.BLOBContainer.createBLOBContainer(this,this.createFunction());let a=l.processExecution(t,n,i);this.m_processingImageRequest=null;return a};e.InAQueryManagerProvider.prototype.processCheckVariables=function(t,n,i){e.XBooleanUtils.checkTrue(this.supportsCheckVariables(),"Check variables is not supported");return e.InAQMgrVarAction.createAndRunCheck(this,t,n,i)};e.InAQueryManagerProvider.prototype.processDeleteVariableVariant=function(t,n,i,r){return e.InAQMgrVarAction.createAndRunVariantDeletion(this,t,n,i,r)};e.InAQueryManagerProvider.prototype.processEmptyVariableDefinition=function(t,n,i){this.assertNotDirectValueTransfer();return e.InAQMgrVarAction.createAndRunEmptyVariableDefinition(this,t,n,i)};e.InAQueryManagerProvider.prototype.processInitialization=function(t,n,i){this.setupValues();let r=e.InAQMgrStartupAction.createServiceInitAndRun(t,n,i,this,this);this.setupRuntimeQuery();return r};e.InAQueryManagerProvider.prototype.processModelInitialization=function(t,n,i){if(this.getMode()===e.QueryManagerMode.RAW_QUERY){this.setMode(e.QueryManagerMode.DEFAULT)}this.getNewResultsetContainer();return e.InAQMgrStartupAction.createMetadataInitAndRun(t,n,i,this,this)};e.InAQueryManagerProvider.prototype.processModelInitializationAndApplyRepoState=function(t,n,i,r){if(this.getSession().hasFeature(e.FeatureToggleOlap.FUSION_SERVICE)){throw e.XException.createRuntimeException("This call is incompatible with fusion. Create a new query service config instead")}this.m_listenerForQueryModelReady=n;this.m_applyRepoState=true;if(this.isShallow()){this.m_importer.m_mode=e.QModelFormat.INA_REPOSITORY;let n=e.JsonParserFactory.newInstance();this.m_deserializationStructure=n.parse(r);if(n.hasErrors()){throw e.XException.createRuntimeException("Error parsing the Repository state of the QueryModel")}e.XObjectExt.release(n);let o=this.extractInADataSource();if(e.notNull(o)){if(e.XString.isEqual(e.QueryManagerMode.BLENDING.getName(),o.getStringByKey("Type"))){this.considerBlendingFlow(o)}}let l=this.processModelInitialization(t,this,i);return l}let o=this.getQueryModel().deserializeExt(e.QModelFormat.INA_REPOSITORY,r);let l=e.ExtResult.create(this,o);if(e.notNull(this.m_listenerForQueryModelReady)){this.m_listenerForQueryModelReady.onQueryModelInitialized(l,this,i)}return e.SyncActionExtRes.createSyncAction(this,l)};e.InAQueryManagerProvider.prototype.processProviderCancelThreads=function(t,n,i){if(this.getCapabilitiesBase().supportsCancelRunningQueries()){return e.InAQMgrCancelThreadsAction.createAndRun(t,n,i,this)}return null};e.InAQueryManagerProvider.prototype.processProviderClearCache=function(t,n,i,r){if(this.getCapabilitiesBase().supportsProviderClearCache()){return e.InAQMgrClearCacheAction.createAndRun(t,n,i,this,r)}return null};e.InAQueryManagerProvider.prototype.processProviderShutdown=function(t,n,i){return e.InAQMgrShutdownAction.createAndRun(t,n,i,this)};e.InAQueryManagerProvider.prototype.processReInitVariableAfterSubmit=function(t,n,i){if(this.isDirectVariableTransferEnabled()||!this.hasVariables()&&!this.supportsAndAllowsEmptyExtendedVarDefinition()){return e.OlapVarImmediateCallback.createAndRun(t,n,i)}return e.InAQMgrVarAction.createAndRunReInitAfterSubmit(this,t,n,i)};e.InAQueryManagerProvider.prototype.processResetExitOrDynamicVariable=function(e,t,n,i){this.getConvenienceCommands().processResetExitOrDynamicVariable(e,t,n,i)};e.InAQueryManagerProvider.prototype.processRetrieveVariableRuntimeInformation=function(t,n,i){this.assertNotDirectValueTransfer();return e.InAQMgrVarAction.createAndRunGetRuntimeInfo(this,t,n,i)};e.InAQueryManagerProvider.prototype.processRriTargetDetails=function(t,n,i,r,o){return e.InAQRriTargetDetailsAction.createAndRun(t,this,n,i,r,o)};e.InAQueryManagerProvider.prototype.processRriTargetSync=function(t,n,i,r,o){return e.InAQRriTargetsSyncAction.createAndRun(t,this,n,i,r,o)};e.InAQueryManagerProvider.prototype.processSaveVariableVariant=function(t,n,i,r){return e.InAQMgrVariantModifyAction.createAndRunModification(this,t,n,i,r)};e.InAQueryManagerProvider.prototype.processSetGetVariableValues=function(t,n,i){this.assertNotDirectValueTransfer();return e.InAQMgrVarAction.createAndRunSetGetValues(this,t,n,i)};e.InAQueryManagerProvider.prototype.processUpdateDynamicVariables=function(e,t,n){this.getConvenienceCommands().updateDynamicVariables(e,t,n)};e.InAQueryManagerProvider.prototype.processUpdateRuntimeBlendQueryFromDependentQueries=function(t,n,i,r){let o=e.RuntimeRemoteBlendingQueryUpdaterAction.create(t,this);return o.processSyncAction(n,i,r)};e.InAQueryManagerProvider.prototype.processUpdateVariableVariantValues=function(t,n,i,r){return e.InAQMgrVarAction.createAndRunVariantUpdate(this,t,false,n,i,r)};e.InAQueryManagerProvider.prototype.processVariableCancel=function(t,n,i){if(this.isDirectVariableTransferEnabled()||!this.hasVariables()&&!this.supportsAndAllowsEmptyExtendedVarDefinition()){return e.OlapVarImmediateCallback.createAndRun(t,n,i)}return e.InAQMgrVarAction.createAndRunCancel(this,t,n,i)};e.InAQueryManagerProvider.prototype.processVariableSubmit=function(t,n,i){if(this.isDirectVariableTransferEnabled()||!this.hasVariables()&&!this.supportsAndAllowsEmptyExtendedVarDefinition()){return e.OlapVarImmediateCallback.createAndRun(t,n,i)}return e.InAQMgrVarAction.createAndRunSubmit(this,t,n,i)};e.InAQueryManagerProvider.prototype.recordState=function(){return this.m_stateManager.recordState()};e.InAQueryManagerProvider.prototype.recordStateOfQueryManager=function(e){this.m_recordingQueryManagerState=true;this.fillAnalyticRequestStructure(e,"Analytics",true,null,null);this.fillQueryConfigSettings(e);e.putString("Name",this.getName());this.m_recordingQueryManagerState=false};e.InAQueryManagerProvider.prototype.recordingStateOfQueryManager=function(){return this.m_recordingQueryManagerState};e.InAQueryManagerProvider.prototype.releaseObjectInternal=function(){this.m_importMetaData=e.XObjectExt.release(this.m_importMetaData);this.m_importer=e.XObjectExt.release(this.m_importer);this.m_exportData=e.XObjectExt.release(this.m_exportData);this.m_capabilities=e.XObjectExt.release(this.m_capabilities);this.m_lastDataRequest=e.XObjectExt.release(this.m_lastDataRequest);this.m_inaCapabilitiesValueHelp=e.XObjectExt.release(this.m_inaCapabilitiesValueHelp);this.m_rriTargetManager=e.XObjectExt.release(this.m_rriTargetManager);this.m_deserializationStructure=null;this.m_savedStateBeforeVarScreen=null;this.m_savedMetadataStateBeforeVarScreen=null;let t=this.getOlapEnv();if(e.XCollectionUtils.hasElements(this.m_listOfRequestedResources)){for(let e=0;e<this.m_listOfRequestedResources.size();e++){t.releaseResource(this.m_listOfRequestedResources.get(e))}}this.m_listOfRequestedResources=e.XObjectExt.release(this.m_listOfRequestedResources);if(e.notNull(this.m_valueHelpProvider)){this.m_valueHelpProvider=e.XObject.castFromNative(this.m_valueHelpProvider)}e.QueryManager.prototype.releaseObjectInternal.call(this);this.m_inaCapabilities=null;this.m_stateManager=e.XObjectExt.release(this.m_stateManager);this.m_listenerForQueryModelReady=null;this.m_inaRequestStructure=e.XObjectExt.release(this.m_inaRequestStructure)};e.InAQueryManagerProvider.prototype.removeVariable=function(e){this.assertLifeCycleActive();let t=this.getQueryModelBase().getVariableManagerBase();t.removeVariable(e)};e.InAQueryManagerProvider.prototype.removeVariableVariant=function(e){this.getVariableVariantsInternal().removeElement(e)};e.InAQueryManagerProvider.prototype.resetExitOrUpdateDynamicVariable=function(e,t,n,i){this.processResetExitOrDynamicVariable(e,t,n,i)};e.InAQueryManagerProvider.prototype.saveVariableVariant=function(t,n,i,r){if(!this.supportsMaintainsVariableVariants()){return e.OlapVarImmediateCallback.createAndRunError(e.ErrorCodes.INVALID_STATE,"Modifying variants is not supported",n,i,r)}return this.processSaveVariableVariant(t,n,i,r)};e.InAQueryManagerProvider.prototype.serializeToContentExt=function(t,n){let i;if(this.getLovManager()!==null&&this.getLovManager().isLovAbstractionEnabled()&&t.isTypeOf(e.QModelFormat.INA_DATA)){return this.getLovManager().serializeToContentExt(t,n)}if(t.isTypeOf(e.QModelFormat.INA_REPOSITORY)){i=e.QueryManager.prototype.serializeToContentExt.call(this,t,n)}else{let n=this.getQueryModelBase();n.generateTransientObjects();this.checkRootNodeFetching();let r=e.PrFactory.createStructure();let o=this.getResultSetPersistenceIdentifier()!==null?null:e.QueryModelUtils.getPreQueries(n);if(e.XCollectionUtils.hasElements(o)&&t!==e.QModelFormat.INA_DATA_MERGE_PROCESSING){let i=r.putNewList(e.ConnectionConstants.INA_BATCH);this.dealWithPreQuery(o,i,t);if(t===e.QModelFormat.INA_PERSISTED_QUERY_DATA){i.add(this.fillPersistedQueryDataRequestStructure(true))}else{i.add(this.fillDataRequestStructure(true))}n.destroyTransientObjects()}else{if(n.getDataSource().getType()===e.MetaObjectType.BLENDING){let i=n.getBlendingSources();let o=i.size();let l=null;for(let n=0;n<o;n++){let o=i.get(n);let a=o.getQueryModel().getPreQueries();if(e.XCollectionUtils.hasElements(a)){l=r.putNewList(e.ConnectionConstants.INA_BATCH);this.dealWithPreQuery(a,l,t)}}let a=e.notNull(l);if(a){r.getListByKey(e.ConnectionConstants.INA_BATCH).add(t===e.QModelFormat.INA_PERSISTED_QUERY_DATA?this.fillPersistedQueryDataRequestStructure(true):this.fillDataRequestStructure(true));n.destroyTransientObjects()}else{r=null}}else{r=null}if(e.isNull(r)){r=t===e.QModelFormat.INA_PERSISTED_QUERY_DATA?this.fillPersistedQueryDataRequestStructure(true):this.fillDataRequestStructure(true);n.destroyTransientObjects()}}i=e.XContent.createJsonObjectContent(t,r)}return i};e.InAQueryManagerProvider.prototype.setActiveResultSetContainer=function(t){if(this.getActiveResultSetContainer()!==t){this.m_lastDataRequest=null;if(e.notNull(t)){e.XObjectExt.release(t.getRequest())}}e.QueryManager.prototype.setActiveResultSetContainer.call(this,t)};e.InAQueryManagerProvider.prototype.setDeserializationStructureAsNull=function(){this.m_deserializationStructure=null};e.InAQueryManagerProvider.prototype.setDirectVariableTransfer=function(e){this.m_directVariableTransfer=e};e.InAQueryManagerProvider.prototype.setInnerStructure=function(t,n,i,r){let o=e.notNull(r)?r:this.m_exportData;let l=this.getDataAreas();if(e.notNull(l)){t.put("DataAreas",l)}e.QInAOptions.fillOptions(t,this.getCapabilitiesBase(),this.getSession(),this.getInitSettings());let a=t.putNewStructure(n);let s;let u=this.getQueryModel();let p=this.m_recordingQueryManagerState?null:this.m_inaCapabilities.exportActiveCapabilitiesAsList();if(e.XString.isEqual("Metadata",n)){e.QInAMdDataSource.exportMd(o,a,u);a.put("Expand",e.QInAExpand.createExpandMetadata(this))}else{if(e.notNull(u)&&u.hasExplainQueryContext()){let e=a.putNewStructure("ExplainQueryContext");let t=u.getExplainQueryContext();e.putInteger("Row",t.getRowIndex());e.putInteger("Column",t.getColumnIndex())}e.QInAOptions.setRequestTimeZone(t,this);if(this.isPersistedPreQuery()){let t=this.getConnection().getSystemDescription();e.QInADataSourceBlending.updateRemoteDataSource(a,this,true,t);e.XCollectionUtils.removeIf(p,t=>e.XString.isEqual(t.asString().getString(),e.InACapabilities.C121_RETURN_ERROR_FOR_INVALID_QUERYMODEL))}else if(!this.m_recordingQueryManagerState){let t=o.exportDataSource(u.getDataSource(),this.getCapabilitiesBase().supportsRunAsUser());if(this.getProviderType()===e.ProviderType.PLANNING_VALUE_HELP){s=a.putNewStructure("Command")}else{s=a}s.put("DataSource",t)}if(i===e.ProcessingStep.VARIABLE_SUBMIT){a.putIfNotNull("Expand",e.QInAExpand.createExpandSubmit(this,this.m_noVariableSubmitResponse))}}if(e.notNull(p)){a.put("Capabilities",p)}if(!this.getQueryManager().isDirectVariableTransferEnabled()){let t=this.getInitSettings().getStartVariables();if(e.XCollectionUtils.hasElements(t)&&t.containsKey("Variables")){a.put("Variables",t.getByKey("Variables"))}}e.QInAOptions.setLanguage(a,this);return a};e.InAQueryManagerProvider.prototype.setIsVariableSubmitNeeded=function(e){this.m_isVariableSubmitNeeded=e};e.InAQueryManagerProvider.prototype.setMetadataStateBeforeVarScreen=function(e){this.m_savedMetadataStateBeforeVarScreen=e};e.InAQueryManagerProvider.prototype.setNoVariableSubmitResponse=function(e){this.m_noVariableSubmitResponse=e};e.InAQueryManagerProvider.prototype.setStateBeforeVarScreen=function(e){this.m_savedStateBeforeVarScreen=e};e.InAQueryManagerProvider.prototype.setUpdatingDataRequestCapabilities=function(e){this.m_updateRuntimeCapabilities=e};e.InAQueryManagerProvider.prototype.setValueHelpProvider=function(e){this.m_valueHelpProvider=e};e.InAQueryManagerProvider.prototype.setVariableProcessorBase=e.noSupport;e.InAQueryManagerProvider.prototype.setupDesignTimeMode=function(){this.m_importMetaData=e.QInAImportFactory.createForMetadata(this.getApplication(),this.getModelCapabilities());this.setupQueryModel();let t=this.getQueryModel();e.QInAMdDataSource.importMd(this.m_importMetaData,this.m_inaRequestStructure,t,t);let n=t.getDataSource();if(this.getMode()===e.QueryManagerMode.BLENDING){let e=this.getQueryServiceConfig().getBlendingDefinition();n.setBlendingDefinition(e)}let i=n.clone();this.setDataSource(i);this.getSettingsBase().setDataRequest(null);if(e.notNull(this.m_inaRequestStructure)&&this.m_inaRequestStructure.containsKey("ListReporting")){this.getSettingsBase().setProviderType(e.ProviderType.LIST_REPORTING)}this.activateExperimentalFeatures()};e.InAQueryManagerProvider.prototype.setupQueryModel=function(){let t=e.QueryManager.prototype.setupQueryModel.call(this);let n=this.getApplication();let i=t.getModelCapabilities();this.m_importMetaData=e.QInAImportFactory.createForMetadata(n,i);this.m_exportData=e.QInAExportFactory.createForData(n,i);return t};e.InAQueryManagerProvider.prototype.setupRuntimeQuery=function(){if(!this.isReleased()&&this.isForRendering()){let e=this.getInitSettings().getDefinitionAsStructure();this.applyStateOnQueryManager(e)}};e.InAQueryManagerProvider.prototype.setupValues=function(){e.QueryManager.prototype.setupValues.call(this);this.prepareExperimentalCapabilities();let t=this.getInitSettings();let n=this.getMode()===e.QueryManagerMode.RAW_QUERY&&t.getDataRequest()!==null;this.m_updateRuntimeCapabilities=true;if(!n){this.m_isVariableSubmitNeeded=true}let i=this.getDataSource();if(e.notNull(i)&&i.getType()===e.MetaObjectType.CATALOG_VIEW_2&&!this.getCapabilitiesBase().supportsCatalogServiceV2()){i.setType(e.MetaObjectType.CATALOG_VIEW)}this.setDirectVariableTransferEnabled(true);let r=t.getDefinitionType();if(e.notNull(r)&&r!==e.QModelFormat.UQM){this.m_importer=e.QInAImportFactory.create(this.getApplication(),r,null);this.m_deserializationStructure=t.getDefinitionAsStructure();if(e.notNull(this.m_deserializationStructure)){this.m_inaCapabilities.importDeserializationDocumentCapabilities(this.m_deserializationStructure);if(this.isDataSourceInitial()&&this.getMode().isTypeOf(e.QueryManagerMode.DEFAULT)){this.setDataSource(this.m_importer.importDataSource(this.m_deserializationStructure))}}}if(!n){this.setupQueryModel()}this.m_listOfRequestedResources=e.XList.create();this.resetMaxResultRecords();this.m_stateManager=e.QueryModelStateManager.create(this)};e.InAQueryManagerProvider.prototype.transferVariables=function(e,t,n){return this.processSetGetVariableValues(e,t,n)};e.InAQueryManagerProvider.prototype.transferVariablesByVariable=function(e,t,n,i){if(this.getVariables().contains(e)){return this.processSetGetVariableValues(t,n,i)}return null};e.InAQueryManagerProvider.prototype.updateDynamicVariables=function(e,t,n){this.getConvenienceCommands().updateDynamicVariables(e,t,n)};e.InAQueryManagerProvider.prototype.updateQueryManager=function(t,n){let i=this.getQueryModelBase();let r=t.getQueryModel();let o=e.XHashSetOfString.create();o.addAll(n);e.DimensionUsageAnalyzer2.addDimensionsUsedByLeveledHierarchies(r,o);let l=o.getValuesAsReadOnlyList();this.getDimensionsRequestedFromClient().addAll(n);this.getDimensionsToClone().addAll(l);let a=i.getDimensionManagerBase();for(let t=0;t<l.size();t++){let n=l.get(t);if(i.getDimensionByName(n)===null){let t=r.getDimensionByName(n);if(e.notNull(t)){let e=t.cloneOlapComponent(i,a);i.addDimension(e);let n=i.getAxis(e.getDefaultAxisType());n.add(e);a.finalizeDimensionMetadataSetup(e)}}}this.getQueryServiceConfig().setRequiredDimensions(this.getDimensionsToClone().getValuesAsReadOnlyList())};e.InAQueryManagerProvider.prototype.updateSortForLanguage=function(t,n){let i=t.getStructureByKey("Definition");let r=i.getListByKey("Sort");e.XStream.of(r).forEach(t=>{let i=t.getStructureByKey("Collator");if(e.notNull(i)&&i.containsKey("Locale")){i.putString("Locale",n)}})};e.InAQueryManagerProvider.prototype.updateSortListForLanguage=function(t){let n=this.getRequestLanguage();let i=t.getListByKey(e.ConnectionConstants.INA_BATCH);if(!e.PrUtils.isListEmpty(i)){let t=i.size();for(let r=0;r<t;r++){let t=e.InARuntimeUtils.getRequestContext(i.getStructureAt(r));this.updateSortForLanguage(t,n)}}else{let i=e.InARuntimeUtils.getRequestContext(t);this.updateSortForLanguage(i,n)}};e.InAQueryManagerProvider.prototype.updateString=function(t,n,i){if(!e.XString.isEqual(t.getStringByKey(n),i)){t.putString(n,i)}};e.InAQueryManagerProvider.prototype.updateVariableVariantValues=function(t,n,i,r){if(!this.supportsMaintainsVariableVariants()){return e.OlapVarImmediateCallback.createAndRunError(e.ErrorCodes.INVALID_STATE,"Updating variants is not supported",n,i,r)}if(t.getName()===null||t.getScope()===null){return e.OlapVarImmediateCallback.createAndRunError(e.ErrorCodes.INVALID_STATE,"Variant not valid for updating",n,i,r)}return this.processUpdateVariableVariantValues(t,n,i,r)};e.ProviderModule=function(){};e.ProviderModule.prototype=new e.DfModule;e.ProviderModule.prototype._ff_c="ProviderModule";e.ProviderModule.s_module=null;e.ProviderModule.addAllComponents=function(){e.QInA.addInAComponent(new e.QCsnMdQuery);e.QInA.addInAComponent(new e.QCsnMdDimensions);e.QInA.addInAComponent(new e.QCsnMdDimension);e.QInA.addInAComponent(new e.QCsnMdDimMembers);e.QInA.addInAComponent(new e.QCsnMdVariables);e.QInA.addInAComponent(new e.QCsnMdVariable);e.QInA.addInAComponent(new e.QInAMdVariableContainer);e.QInA.addInAComponent(new e.QInAMdVarDimMember);e.QInA.addInAComponent(new e.QInAMdVarSimpleType);e.QInA.addInAComponent(new e.QInAMdVarOptionList);e.QInA.addInAComponent(new e.QInAMdVarFunctional);e.QInA.addInAComponent(new e.QInAMdVariable);e.QInA.addInAComponent(new e.QInAMdBasicMeasure);e.QInA.addInAComponent(new e.QInAMdField);e.QInA.addInAComponent(new e.QInAMdDimension);e.QInA.addInAComponent(new e.QInAMdSort);e.QInA.addInAComponent(new e.QInAMdDrillManager);e.QInA.addInAComponent(new e.QInAMdExceptionAggregationManager);e.QInA.addInAComponent(new e.QInAMdRunningAggregations);e.QInA.addInAComponent(new e.QInAMdUniversalDisplayHierarchies);e.QInA.addInAComponent(new e.QInAMdQuery);e.QInA.addInAComponent(new e.QInAMdGenericComponent);e.QInA.addInAComponent(new e.QInARepoField);e.QInA.addInAComponent(new e.QInARepoTotals);e.QInA.addInAComponent(new e.QInARepoTotalsLegacy);e.QInA.addInAComponent(new e.QInARepoSortOperation);e.QInA.addInAComponent(new e.QInARepoDimension);e.QInA.addInAComponent(new e.QInARepoSort);e.QInA.addInAComponent(new e.QInARepoSortLegacy);e.QInA.addInAComponent(new e.QInARepoFilterCellValueOperand);e.QInA.addInAComponent(new e.QInARepoFilterCellValueOperandLegacy);e.QInA.addInAComponent(new e.QInARepoVarHierNode);e.QInA.addInAComponent(new e.QInARepoVarFunctional);e.QInA.addInAComponent(new e.QInARepoVarDimMember);e.QInA.addInAComponent(new e.QInARepoVarDimMemberLegacy);e.QInA.addInAComponent(new e.QInARepoMembersAll);e.QInA.addInAComponent(new e.QInARepoMembersAllLegacy);e.QInA.addInAComponent(new e.QInARepoMemberRestricted);e.QInA.addInAComponent(new e.QInARepoMemberRestrictedLegacy);e.QInA.addInAComponent(new e.QInARepoMemberFormulaMeasure);e.QInA.addInAComponent(new e.QInARepoMemberBasicMeasure);e.QInA.addInAComponent(new e.QInARepoMemberCurrency);e.QInA.addInAComponent(new e.QInARepoMemberUnit);e.QInA.addInAComponent(new e.QInARepoMemberRunningTotal);e.QInA.addInAComponent(new e.QInARepoMemberParetoMeasure);e.QInA.addInAComponent(new e.QInARepoMemberExceptionAggregationMeasure);e.QInA.addInAComponent(new e.QInARepoMemberVarianceMeasure);e.QInA.addInAComponent(new e.QInARepoMemberExceptionAggregationMeasure);e.QInA.addInAComponent(new e.QInARepoMemberAbstract);e.QInA.addInAComponent(new e.QInARepoFilterOperation);e.QInA.addInAComponent(new e.QInARepoFilterOperationLegacy);e.QInA.addInAComponent(new e.QInARepoFilterCartesianList);e.QInA.addInAComponent(new e.QInARepoFilterCartesianListLegacy);e.QInA.addInAComponent(new e.QInARepoFilterConvertedTimeCartesianList);e.QInA.addInAComponent(new e.QInARepoFilterCartesianProduct);e.QInA.addInAComponent(new e.QInARepoFilterMeasureBased);e.QInA.addInAComponent(new e.QInARepoFilterExpression);e.QInA.addInAComponent(new e.QInARepoFilterExpressionLegacy);e.QInA.addInAComponent(new e.QInARepoFilterAlgebra);e.QInA.addInAComponent(new e.QInARepoFilterAlgebraLegacy);e.QInA.addInAComponent(new e.QInARepoFilterTuple);e.QInA.addInAComponent(new e.QInARepoFilterAcrossModels);e.QInA.addInAComponent(new e.QInARepoFilterDynamicTimeRegularRange);e.QInA.addInAComponent(new e.QInARepoFilterDynamicTimeToDateRange);e.QInA.addInAComponent(new e.QInARepoFilterFixedTimeRange);e.QInA.addInAComponent(new e.QInARepoFilterFixed);e.QInA.addInAComponent(new e.QInARepoFilterFixedLegacy);e.QInA.addInAComponent(new e.QInARepoFilterVirtualDatasource);e.QInA.addInAComponent(new e.QInARepoFilterAsymmetricVisibility);e.QInA.addInAComponent(new e.QInARepoFilterAll);e.QInA.addInAComponent(new e.QInARepoFilterAllLegacy);e.QInA.addInAComponent(new e.QInARepoFilterDynamic);e.QInA.addInAComponent(new e.QInARepoFilterVisibility);e.QInA.addInAComponent(new e.QInARepoFilterGeo);e.QInA.addInAComponent(new e.QInARepoFilterGeoLegacy);e.QInA.addInAComponent(new e.QInARepoFilterElement);e.QInA.addInAComponent(new e.QInARepoFilterManager);e.QInA.addInAComponent(new e.QInARepoFilterManagerLegacy);e.QInA.addInAComponent(new e.QInARepoHierarchy);e.QInA.addInAComponent(new e.QInARepoHierarchyManager);e.QInA.addInAComponent(new e.QInARepoHierarchyLegacy);e.QInA.addInAComponent(new e.QInARepoAxis);e.QInA.addInAComponent(new e.QInARepoAxisLegacy);e.QInA.addInAComponent(new e.QInARepoAxesSettings);e.QInA.addInAComponent(new e.QInARepoAxesSettingsLegacy);e.QInA.addInAComponent(new e.QInARepoCurrencyTranslationItem);e.QInA.addInAComponent(new e.QInARepoFormulaCalculatedDimension);e.QInA.addInAComponent(new e.QInARepoFormulaExceptionManager);e.QInA.addInAComponent(new e.QInARepoFormulaException);e.QInA.addInAComponent(new e.QInARepoExceptions);e.QInA.addInAComponent(new e.QInARepoExceptionsLegacy);e.QInA.addInAComponent(new e.QInARepoConditionsThreshold);e.QInA.addInAComponent(new e.QInARepoCellContext);e.QInA.addInAComponent(new e.QInARepoCellContextManager);e.QInA.addInAComponent(new e.QInARepoConditionManager);e.QInA.addInAComponent(new e.QInARepoConditionManagerLegacy);e.QInA.addInAComponent(new e.QInARepoConditionsCondition);e.QInA.addInAComponent(new e.QInARepoConditionsConditionLegacy);e.QInA.addInAComponent(new e.QInARepoUniversalDisplayHierarchies);e.QInA.addInAComponent(new e.QInARepoQueryCells);e.QInA.addInAComponent(new e.QInARepoModellerDimensions);e.QInA.addInAComponent(new e.QInARepoModellerCurrencyTranslation);e.QInA.addInAComponent(new e.QInARepoModellerVariableManager);e.QInA.addInAComponent(new e.QInARepoModellerMetadataProperties);e.QInA.addInAComponent(new e.QInARepoUnitTranslationItem);e.QInA.addInAComponent(new e.QInARepoVarOptionList);e.QInA.addInAComponent(new e.QInARepoVarOptionListLegacy);e.QInA.addInAComponent(new e.QInARepoVariableManager);e.QInA.addInAComponent(new e.QInARepoVariableContainerLegacy);e.QInA.addInAComponent(new e.QInARepoVariablesListLegacy);e.QInA.addInAComponent(new e.QInARepoVarSimpleType);e.QInA.addInAComponent(new e.QInARepoVarSimpleTypeLegacy);e.QInA.addInAComponent(new e.QInARepoDrillManager);e.QInA.addInAComponent(new e.QInARepoDrillManagerLegacy);e.QInA.addInAComponent(new e.QInARepoDrillPathElement);e.QInA.addInAComponent(new e.QInARepoDrillPathElementLegacy);e.QInA.addInAComponent(new e.QInARepoDrillPathOperation);e.QInA.addInAComponent(new e.QInARepoDimensions);e.QInA.addInAComponent(new e.QInARepoDimensionsLegacy);e.QInA.addInAComponent(new e.QInARepoDimensionsAllLegacy);e.QInA.addInAComponent(new e.QInARepoDataCell);e.QInA.addInAComponent(new e.QInARepoCalculatedDimension);e.QInA.addInAComponent(new e.QInARepoDataCellsAll);e.QInA.addInAComponent(new e.QInARepoDataCellsAllLegacy);e.QInA.addInAComponent(new e.QInARepoQuerySettings);e.QInA.addInAComponent(new e.QInARepoQuerySettingsLegacy);e.QInA.addInAComponent(new e.QInaRepoCustomHierarchyDefinition);e.QInA.addInAComponent(new e.QInARepoCustomHierarchyDefinitionLegacy);e.QInA.addInAComponent(new e.QInARepoAttribute);e.QInA.addInAComponent(new e.QInARepoAttributeLegacy);e.QInA.addInAComponent(new e.QInARepoDataSource);e.QInA.addInAComponent(new e.QInARepoCurrencyTranslationManager);e.QInA.addInAComponent(new e.QInARepoCurrencyTranslationManagerLegacy);e.QInA.addInAComponent(new e.QInARepoCurrencyTranslationList);e.QInA.addInAComponent(new e.QInARepoTranslationsManager);e.QInA.addInAComponent(new e.QInARepoUnitTranslationManager);e.QInA.addInAComponent(new e.QInARepoQuery);e.QInA.addInAComponent(new e.QInARepoQueryLegacy);e.QInA.addInAComponent(new e.QInARepoServiceConfig);e.QInA.addInAComponent(new e.QInARepoQueryManager);e.QInA.addInAComponent(new e.QInARepoBlendableQueryManager);e.QInA.addInAComponent(new e.QInARepoQuickActionManager);e.QInA.addInAComponent(new e.QInARepoVisualizationManager);e.QInA.addInAComponent(new e.QInARepoTableDefinition);e.QInA.addInAComponent(new e.QInARepoTableCellReferenceScope);e.QInA.addInAComponent(new e.QInARepoChartStyle);e.QInA.addInAComponent(new e.QInARepoChartDefinition);e.QInA.addInAComponent(new e.QInARepoKpiDefinition);e.QInA.addInAComponent(new e.QInARepoVisualizationTemplateManager);e.QInA.addInAComponent(new e.QInARepoSimulationManager);e.QInA.addInAComponent(new e.QInAQuery);e.QInA.addInAComponent(new e.QInADimension);e.QInA.addInAComponent(new e.QInACalculatedDimension);e.QInA.addInAComponent(new e.QInASort);e.QInA.addInAComponent(new e.QInACurrencyTranslationManager);e.QInA.addInAComponent(new e.QInACurrencyTranslationListManager);e.QInA.addInAComponent(new e.QInACurrencyTranslationItem);e.QInA.addInAComponent(new e.QInATranslationsManager);e.QInA.addInAComponent(new e.QInAConditionManager);e.QInA.addInAComponent(new e.QInAConditionsCondition);e.QInA.addInAComponent(new e.QInAConditionsThreshold);e.QInA.addInAComponent(new e.QInADataSource);e.QInA.addInAComponent(new e.QInAQuerySettings);e.QInA.addInAComponent(new e.QInATotals);e.QInA.addInAComponent(new e.QInAAttribute);e.QInA.addInAComponent(new e.QInAAxesSettings);e.QInA.addInAComponent(new e.QInAAxis);e.QInA.addInAComponent(new e.QInADataCell);e.QInA.addInAComponent(new e.QInADataCellsAll);e.QInA.addInAComponent(new e.QInACellContextManager);e.QInA.addInAComponent(new e.QInACellContext);e.QInA.addInAComponent(new e.QInADrillManager);e.QInA.addInAComponent(new e.QInADrillManager);e.QInA.addInAComponent(new e.QInAUniversalDisplayHierarchies);e.QInA.addInAComponent(new e.QInADrillPathElement);e.QInA.addInAComponent(new e.QInADrillPathOperation);e.QInA.addInAComponent(new e.QInAField);e.QInA.addInAComponent(new e.QInAQueryCellsAll);e.QInA.addInAComponent(new e.QInAUnitTranslationManager);e.QInA.addInAComponent(new e.QInAUnitTranslationItem);e.QInA.addInAComponent(new e.QInAVariableContainer);e.QInA.addInAComponent(new e.QInAVariablesList);e.QInA.addInAComponent(new e.QInAVarSimpleType);e.QInA.addInAComponent(new e.QInAVarDimMember);e.QInA.addInAComponent(new e.QInAVarOptionList);e.QInA.addInAComponent(new e.QInAVarHierNode);e.QInA.addInAComponent(new e.QInAVarFunctional);e.QInA.addInAComponent(new e.QInAMember);e.QInA.addInAComponent(new e.QInAMembersAll);e.QInA.addInAComponent(new e.QInAMemberRestrictedMeasure);e.QInA.addInAComponent(new e.QInAMemberBasicMeasure);e.QInA.addInAComponent(new e.QInAMemberFormulaMeasure);e.QInA.addInAComponent(new e.QInAFilterExpression);e.QInA.addInAComponent(new e.QInAFilterCellValueOperand);e.QInA.addInAComponent(new e.QInAFilterTuple);e.QInA.addInAComponent(new e.QInAFilterElement);e.QInA.addInAComponent(new e.QInAFilterAlgebra);e.QInA.addInAComponent(new e.QInAFilterCartesianList);e.QInA.addInAComponent(new e.QInAFilterConvertedTimeCartesianList);e.QInA.addInAComponent(new e.QInAFilterFixed);e.QInA.addInAComponent(new e.QInAFilterDynamic);e.QInA.addInAComponent(new e.QInAFilterVisibility);e.QInA.addInAComponent(new e.QInAValueHelpFilter);e.QInA.addInAComponent(new e.QInAFilterAll);e.QInA.addInAComponent(new e.QInAFilterOperation);e.QInA.addInAComponent(new e.QInARepoFilterDateRange);e.QInA.addInAComponent(new e.QInAFilterGeo);e.QInA.addInAComponent(new e.QInAFilterCartesianProduct);e.QInA.addInAComponent(new e.QInAFilterVirtualDatasource);e.QInA.addInAComponent(new e.QInAFilterManager);e.QInA.addInAComponent(new e.QInAHierarchyValueHelp);e.QInA.addInAComponent(new e.QInAHierarchy);e.QInA.addInAComponent(new e.QInACustomHierarchyDefinition);e.QInA.addInAComponent(new e.QInADimensionsAll);e.QInA.addInAComponent(new e.QInAExceptions);e.QInA.addInAComponent(new e.QInAGenericComponent);e.QInA.addInAComponent(new e.QInAChartDefinition);e.QInA.addInAComponent(new e.QInASimulationManager)};e.ProviderModule.getInstance=function(){if(e.isNull(e.ProviderModule.s_module)){e.DfModule.checkInitialized(e.OlapSerializationModule.getInstance());e.ProviderModule.s_module=e.DfModule.startExt(new e.ProviderModule);let t=e.RegistrationService.getInstance();e.QInA.staticSetup();e.QInAImportFactoryImpl.staticSetupImpl();e.QInAExportFactoryImpl.staticSetupImpl();e.DocumentsStoreServiceFactory.setInstance(e.DfDocumentsStoreServiceFactoryImpl.createFactory());e.PlanningStateHandler.setInstance(new e.PlanningStateHandlerDummyImpl);e.InAQueryManagerProvider.staticSetupProvider();e.QCsnConverter.staticSetup();e.InADocConverterSfxRepo.staticSetupInAConverter();e.InADocConverterUqmRepo.staticSetupInAConverter();e.InAFusion.staticSetup();e.InAFusionLayer.staticSetup();t.addService(e.OlapApiModule.XS_QUERY_CONSUMER,e.InAQueryManagerProvider.CLAZZ);e.XCmdCreateQueryManager.staticSetup();e.XCmdCreateQueryManagerResult.staticSetup();t.addCommand(e.CmdCreateQueryManager.CMD_NAME,e.XCmdCreateQueryManager.CLAZZ);e.XCmdDeserializeBlending.staticSetup();e.XCmdDeserializeBlendingResult.staticSetup();t.addCommand(e.CmdDeserializeBlending.CMD_NAME,e.XCmdDeserializeBlending.CLAZZ);e.XCmdDeserializeBlendingSources.staticSetup();e.XCmdDeserializeBlendingSourcesResult.staticSetup();t.addCommand(e.CmdDeserializeBlendingSources.CMD_NAME,e.XCmdDeserializeBlendingSources.CLAZZ);e.XCmdDeserializeBlendingNodes.staticSetup();e.XCmdDeserializeBlendingNodesResult.staticSetup();t.addCommand(e.CmdDeserializeBlendingNodes.CMD_NAME,e.XCmdDeserializeBlendingNodes.CLAZZ);e.XCmdDeserializeCalculatedDimension.staticSetup();e.XCmdDeserializeCalculatedDimensionResult.staticSetup();t.addCommand(e.CmdDeserializeCalculatedDimension.CMD_NAME,e.XCmdDeserializeCalculatedDimension.CLAZZ);e.XCmdDeserializeExtendedDimension.staticSetup();e.XCmdDeserializeExtendedDimensionResult.staticSetup();t.addCommand(e.CmdDeserializeExtendedDimension.CMD_NAME,e.XCmdDeserializeExtendedDimension.CLAZZ);e.ProviderModule.addAllComponents();e.QInA.removeEmptyContainers();e.DfModule.stopExt(e.ProviderModule.s_module)}return e.ProviderModule.s_module};e.ProviderModule.prototype.getName=function(){return"ff4400.olap.providers"};e.ProviderModule.getInstance();return e});
//# sourceMappingURL=ff4400.olap.providers.js.map