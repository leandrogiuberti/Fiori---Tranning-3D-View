/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff2260.ui.remote","sap/sac/df/firefly/ff4200.olap.api"],function(t){"use strict";t.SxActionsProvider=function(){};t.SxActionsProvider.prototype=new t.XObject;t.SxActionsProvider.prototype._ff_c="SxActionsProvider";t.SxActionsProvider.create=function(e){let n=new t.SxActionsProvider;n.m_qManager=e;return n};t.SxActionsProvider.prototype.m_qManager=null;t.SxActionsProvider.prototype.getActionWithParameters=function(e,n){let i=t.XStringTokenizer.splitString(n,"$");let r=t.XList.create();for(let n=1;n<i.size();n++){let o=i.get(n);let s=t.XStringTokenizer.splitString(o,"'");let a=t.XList.create();for(let t=1;t<s.size();t=t+2){a.add(s.get(t))}if(a.size()>0){this.processAction(e,a);r.add(a)}}return r};t.SxActionsProvider.prototype.processAction=function(e,n){let i=n.get(0);let r=n.get(2);if(t.XString.isEqual(i,"axisColumn")){e.moveMeasureDimensionToAxis(t.AxisType.COLUMNS);let i=e.moveDimensionToAxis(r,t.AxisType.COLUMNS);if(t.notNull(i)){this.setDimHierarchy(e,r,n);this.setSingleMemberSel(e,i,n)}else{this.setDimHierarchy(e,r,n);if(n.size()>3&&!t.XString.isEqual(n.get(3),"")){let t=n.get(3);e.addSingleMeasureFilter(t)}}}else if(t.XString.isEqual(i,"axisRows")){e.moveDimensionToAxis(r,t.AxisType.ROWS);this.setDimHierarchy(e,r,n)}else if(t.XString.isEqual(i,"filter")){this.setFilter(e,n)}};t.SxActionsProvider.prototype.processQueryDefinition=function(t){this.getActionWithParameters(this.m_qManager.getConvenienceCommands(),t);return this.m_qManager};t.SxActionsProvider.prototype.setDimHierarchy=function(e,n,i){if(i.size()>4&&!t.XString.isEqual(i.get(4),"")){e.setDimensionHierarchy(n,i.get(4),true,0)}};t.SxActionsProvider.prototype.setFilter=function(e,n){if(n.size()>3){let i=n.get(2);for(let r=3;r<n.size();r++){let o=n.get(r);if(!t.XString.isEqual(i,"")&&t.XString.isEqual(i,"IN")){e.addSingleMemberFilterByDimension(e.getDimension(n.get(1)),o,t.ComparisonOperator.EQUAL)}}}};t.SxActionsProvider.prototype.setSingleMemberSel=function(e,n,i){if(i.size()>3&&!t.XString.isEqual(i.get(3),"")){let r=i.get(3);e.addSingleMemberFilterByDimension(n,r,t.ComparisonOperator.EQUAL)}};t.SxBinding=function(){};t.SxBinding.prototype=new t.XObject;t.SxBinding.prototype._ff_c="SxBinding";t.SxBinding.create=function(e,n){let i=new t.SxBinding;i.m_quasar=e;i.m_isNeo=n;if(i.m_isNeo){i.m_isNeo=true}return i};t.SxBinding.prototype.m_binding=null;t.SxBinding.prototype.m_cacheIdentifier=null;t.SxBinding.prototype.m_control=null;t.SxBinding.prototype.m_dataprovider=null;t.SxBinding.prototype.m_isNeo=false;t.SxBinding.prototype.m_quasar=null;t.SxBinding.prototype.m_receiver=null;t.SxBinding.prototype.m_sender=null;t.SxBinding.prototype.m_type=null;t.SxBinding.prototype.getControl=function(){return this.m_control};t.SxBinding.prototype.getDataprovider=function(){return this.m_dataprovider};t.SxBinding.prototype.getSession=function(){let t=this.m_quasar.getApplication();let e=t.getSession();return e};t.SxBinding.prototype.getSource=function(){return this.m_sender};t.SxBinding.prototype.getTarget=function(){return this.m_receiver};t.SxBinding.prototype.getType=function(){return this.m_type};t.SxBinding.prototype.processInit=function(){let e=this.m_quasar.getApplication().getBindingManager();this.m_binding=e.bindTogether(this.m_sender,t.SigSelDomain.UI,this.m_control,this.m_receiver,t.SigSelDomain.UI,this.m_control,this.m_type,this.m_cacheIdentifier,false,this.m_isNeo)};t.SxBinding.prototype.releaseObject=function(){this.m_control=null;this.m_dataprovider=null;this.m_quasar=null;this.m_binding=t.XObjectExt.release(this.m_binding);this.m_binding=null;t.XObject.prototype.releaseObject.call(this)};t.SxBinding.prototype.setCacheIdentifier=function(t){this.m_cacheIdentifier=t};t.SxBinding.prototype.setControl=function(t){this.m_control=t};t.SxBinding.prototype.setDataprovider=function(t){this.m_dataprovider=t};t.SxBinding.prototype.setSource=function(t){this.m_sender=t};t.SxBinding.prototype.setTarget=function(t){this.m_receiver=t};t.SxBinding.prototype.setType=function(t){this.m_type=t};t.SxSelection=function(){};t.SxSelection.prototype=new t.XObject;t.SxSelection.prototype._ff_c="SxSelection";t.SxSelection.create=function(e,n){let i=new t.SxSelection;i.m_component=e;i.m_property=n;return i};t.SxSelection.prototype.m_component=null;t.SxSelection.prototype.m_property=null;t.SxSelection.prototype.getComponent=function(){return this.m_component};t.SxSelection.prototype.getProperty=function(){return this.m_property};t.QsDataproviderFactory=function(){};t.QsDataproviderFactory.prototype=new t.XObject;t.QsDataproviderFactory.prototype._ff_c="QsDataproviderFactory";t.QsDataproviderFactory.s_factories=null;t.QsDataproviderFactory.createDataprovider=function(e,n,i){let r=null;if(t.notNull(e)){let o=null;o=t.QsDataproviderFactory.s_factories.getByKey(e.getName());if(t.notNull(o)){r=o.newDataprovider(n,i)}}return r};t.QsDataproviderFactory.registerFactory=function(e,n){if(t.notNull(e)){t.QsDataproviderFactory.s_factories.put(e.getName(),n)}};t.QsDataproviderFactory.staticSetup=function(){t.QsDataproviderFactory.s_factories=t.XHashMapByString.create()};t.ContentParserRegistration={s_parser:null,getAllEntries:function(){return t.ContentParserRegistration.s_parser},getCustomContentParser:function(e){return t.ContentParserRegistration.s_parser.getByKey(e)},setCustomContentParser:function(e,n){t.ContentParserRegistration.s_parser.put(e,n)},staticSetup:function(){t.ContentParserRegistration.s_parser=t.XHashMapByString.create()}};t.DfContentParser=function(){};t.DfContentParser.prototype=new t.XObject;t.DfContentParser.prototype._ff_c="DfContentParser";t.DfContentParser.prototype.getIdName=function(){return"id"};t.DfContentParser.prototype.parseContent=function(e){let n=new t.InputControlContent;let i=t.PrFactory.createStructure();this.parseContentToStructure(e,this.getIdName(),i);n.setContent(i);return n};t.DfContentParser.prototype.parseContentToStructure=function(e,n,i){let r=e.asList();if(t.notNull(r)){for(let e=0;e<r.size();e++){let o=t.PrFactory.createStructure();let s=r.get(e).asStructure();if(t.notNull(s)){o.copyFrom(s,null);this.remapSubItem(o);let e=o.getStringByKey(n);if(t.notNull(e)){i.put(e,o)}}}}};t.DfContentParser.prototype.remapSubItem=function(t){};t.QsOlapDpFactory=function(){};t.QsOlapDpFactory.prototype=new t.QsDataproviderFactory;t.QsOlapDpFactory.prototype._ff_c="QsOlapDpFactory";t.QsOlapDpFactory.staticSetupFactory=function(){let e=new t.QsOlapDpFactory;t.QsDataproviderFactory.registerFactory(t.QsDpType.OLAP,e)};t.QsOlapDpFactory.prototype.newDataprovider=function(e,n){let i=t.QsOlapDp.create(e,n);return i};t.QsRestDpFactory=function(){};t.QsRestDpFactory.prototype=new t.QsDataproviderFactory;t.QsRestDpFactory.prototype._ff_c="QsRestDpFactory";t.QsRestDpFactory.staticSetupFactory=function(){let e=new t.QsRestDpFactory;t.QsDataproviderFactory.registerFactory(t.QsDpType.REST,e)};t.QsRestDpFactory.prototype.newDataprovider=function(e,n){let i=t.QsRestDp.create(e,n);return i};t.AbstractGlobalContent=function(){};t.AbstractGlobalContent.prototype=new t.GlobalValueHolder;t.AbstractGlobalContent.prototype._ff_c="AbstractGlobalContent";t.AbstractGlobalContent.prototype.m_bnd=null;t.AbstractGlobalContent.prototype.m_dps=null;t.AbstractGlobalContent.prototype.fireChange=function(e){let n=e.getListByKey("dpNames");if(t.notNull(n)&&t.notNull(this.m_dps)&&t.notNull(this.m_bnd)){for(let t=0;t<n.size();t++){n.getStringAt(t);this.m_dps.getByKey(n.getStringAt(t)).reinit()}}for(let t=0;t<this.m_bnd.size();t++){this.m_bnd.get(t).processInit()}};t.AbstractGlobalContent.prototype.setupDpsAndBindings=function(e,n){this.m_dps=t.XHashMapByString.create();for(let t=0;t<e.size();t++){let n=e.get(t);this.m_dps.put(n.getName(),n)}this.m_bnd=n};t.FieldSelectionParser=function(){};t.FieldSelectionParser.prototype=new t.DfContentParser;t.FieldSelectionParser.prototype._ff_c="FieldSelectionParser";t.FieldSelectionParser.prototype.remapSubItem=function(e){if(t.notNull(e)){let t=e.putNewStructure("entities");if(e.containsKey("entityIds")){this.parseContentToStructure(e.getListByKey("entityIds"),"id",t);this.parseContentToStructure(e.getListByKey("entityIds"),"dimension",t)}}};t.PageFilterParser=function(){};t.PageFilterParser.prototype=new t.DfContentParser;t.PageFilterParser.prototype._ff_c="PageFilterParser";t.PageFilterParser.prototype.getIdName=function(){return"source"};t.StoryFilterParser=function(){};t.StoryFilterParser.prototype=new t.DfContentParser;t.StoryFilterParser.prototype._ff_c="StoryFilterParser";t.StoryFilterParser.prototype.getIdName=function(){return"filterId"};t.InputControlContent=function(){};t.InputControlContent.prototype=new t.AbstractGlobalContent;t.InputControlContent.prototype._ff_c="InputControlContent";t.CustomAbstractWidget=function(){};t.CustomAbstractWidget.prototype=new t.XObject;t.CustomAbstractWidget.prototype._ff_c="CustomAbstractWidget";t.CustomAbstractWidget.prototype.createCustomControl=function(t,e,n){return this.mapFilterToWidget(t,e,e.getStringByKeyExt("id",e.getStringByKeyExt("source",e.getStringByKeyExt("name","unknown"))),n.getByKey(this.getGlobalId()))};t.CustomAbstractWidget.prototype.getGlobalId=function(){return""};t.CustomAbstractWidget.prototype.getPixelStringValue=function(e,n){let i=e.getByKey(n);if(t.isNull(i)){return""}if(i.isInteger()){return t.XStringUtils.concatenate2(t.XInteger.convertToString(i.asInteger().getInteger()),"px")}if(i.isString()){return i.asString().getString()}return""};t.CustomAbstractWidget.prototype.mapFilterToWidget=function(e,n,i,r){let o=r.getContent().getByKey(n.getStringByKey(t.UiProperty.ID.getName()));if(o.containsKey("selectionInfos")){o=o.getStructureByKey("selectionInfos")}let s=o.getStructureByKey("filterTokenInfo");let a=o.getListByKey("possibleValues");let l=false;if(t.notNull(s)&&s.hasStringByKey("selectionType")&&t.XString.startsWith(s.getStringByKey("selectionType"),"multiple")){l=true}let u=e.newControl(t.UiType.VERTICAL_LAYOUT);u.setX(t.UiCssLength.create(this.getPixelStringValue(n,"X")));u.setY(t.UiCssLength.create(this.getPixelStringValue(n,"Y")));u.setHeight(t.UiCssLength.create(this.getPixelStringValue(n,"Height")));u.setWidth(t.UiCssLength.create(this.getPixelStringValue(n,"Width")));let p=u.addNewItemOfType(t.UiType.LABEL);p.setName(t.XStringUtils.concatenate3("Label","_",i));p.setText(o.getStringByKeyExt("title",o.getStringByKeyExt("customizedTitle","")));let g;let c=null;if(t.isNull(a)||a.size()===0){return null}let y=null;if(a.size()===1&&a.get(0).isStructure()&&a.getStructureAt(0).getByKey("key").isStructure()){y=a.getStructureAt(0).getStructureByKey("key")}if(t.notNull(y)){let e=a.getStructureAt(0).getStructureByKey("originalValue");let n=null;if(s.containsKey("originalRanges")){n=s.getListByKey("originalRanges").getStructureAt(0)}else{n=e}if(l){c=u.addNewItemOfType(t.UiType.RANGE_SLIDER);c.setSliderUpperValue(n.getIntegerByKey("end"))}else{c=u.addNewItemOfType(t.UiType.SLIDER)}c.setSliderMinimum(n.getIntegerByKey("start"));c.setSliderMaximum(n.getIntegerByKey("end"));c.setSliderStep(n.getIntegerByKey("icSliderIncrement"));c.setSliderValue(n.getIntegerByKey("start"));g=t.XHashMapByString.create();g.put("container",o);g.put("controller",r);c.setCustomObject(g);c.registerOnChange(this)}else{if(l){c=u.addNewItemOfType(t.UiType.VERTICAL_LAYOUT);for(let e=0;e<a.size();e++){let n=a.getStructureAt(e);let i=c.addNewItemOfType(t.UiType.CHECKBOX);g=t.XHashMapByString.create();g.put("container",o);g.put("controller",r);g.put("selection",n);i.setCustomObject(g);if(t.notNull(n)){let e=n.getListByKey("key");if(t.notNull(e)&&e.isList()){i.setName(e.getStringAt(0))}let r=n.getStructureByKey("originalValue");if(t.notNull(r)&&r.isStructure()){i.setText(r.getStringByKey("displayName"))}i.setChecked(n.getBooleanByKeyExt("isSelected",false))}i.registerOnChange(this)}}else{c=u.addNewItemOfType(t.UiType.DROPDOWN);for(let e=0;e<a.size();e++){let n=a.getStructureAt(e);let i=c.addNewItemOfType(t.UiType.DROPDOWN_ITEM);i.setName(n.getListByKey("key").getStringAt(0));i.setText(n.getStructureByKey("originalValue").getStringByKey("displayName"));g=t.XHashMapByString.create();g.put("container",o);g.put("controller",r);g.put("selection",n);i.setCustomObject(g);if(n.getBooleanByKey("isSelected")){let e=n.getListByKey("key");if(t.notNull(e)&&e.isList()){c.setSelectedName(e.getStringAt(0))}}}c.registerOnSelect(this)}}if(t.notNull(c)){c.setName(i)}return u};t.CustomAbstractWidget.prototype.onChange=function(e){let n=e.getControl().getCustomObject();let i=n.getByKey("controller");let r=n.getByKey("container");let o=n.getByKey("selection");if(t.notNull(o)){let t=r.getListByKey("possibleValues");o.putBoolean("isSelected",e.getControl().isChecked());let n=r.getListByKey("originalValues");n.clear();n.clear();let i=r.getListByKey("filters").getStructureAt(0).getListByKey("answers").getStructureAt(0).getListByKey("arguments");i.clear();for(let e=0;e<t.size();e++){let r=t.getStructureAt(e);if(r.getBooleanByKey("isSelected")){n.add(r.getStructureByKey("originalValue"));i.add(r.getListByKey("key"))}}}else{let n=r.getListByKey("originalValues").getStructureAt(0);let i=r.getListByKey("filters").getStructureAt(0).getListByKey("answers").getStructureAt(0).getListByKey("arguments");i.clear();let o=e.getControl().getSliderValue();let s=e.getControl().getSliderValue();if(t.XString.isEqual("multiple",r.getStructureByKey("filterTokenInfo").getStringByKey("selectionType"))){o=t.XMath.min(o,e.getControl().getSliderUpperValue());s=t.XMath.max(s,e.getControl().getSliderUpperValue())}i.addNewList().addString(t.XInteger.convertToString(o));i.addNewList().addString(t.XInteger.convertToString(s));n.putString("end",t.XInteger.convertToString(s));n.putString("start",t.XInteger.convertToString(o))}i.fireChange(r)};t.CustomAbstractWidget.prototype.onSelect=function(t){let e=t.getSelectedItem().getCustomObject();let n=e.getByKey("controller");let i=e.getByKey("container");let r=i.getListByKey("possibleValues");for(let t=0;t<r.size();t++){r.getStructureAt(t).putBoolean("isSelected",false)}let o=e.getByKey("selection");o.putBoolean("isSelected",true);let s=i.getListByKey("originalValues");s.clear();let a=i.getListByKey("filters").getStructureAt(0).getListByKey("answers").getStructureAt(0).getListByKey("arguments");a.clear();a.add(o.getListByKey("key"));s.add(o.getStructureByKey("originalValue"));n.fireChange(i)};t.SxDataProvider=function(){};t.SxDataProvider.prototype=new t.XComponent;t.SxDataProvider.prototype._ff_c="SxDataProvider";t.SxDataProvider.create=function(e){let n=new t.SxDataProvider;n.setupDp(e);return n};t.SxDataProvider.prototype.m_dataProviderName=null;t.SxDataProvider.prototype.m_dataSource=null;t.SxDataProvider.prototype.m_globalDef=null;t.SxDataProvider.prototype.m_quasar=null;t.SxDataProvider.prototype.m_queryDef=null;t.SxDataProvider.prototype.m_serviceConfig=null;t.SxDataProvider.prototype.m_system=null;t.SxDataProvider.prototype.m_vizDef=null;t.SxDataProvider.prototype.getComponentType=function(){return null};t.SxDataProvider.prototype.getName=function(){return this.m_dataProviderName};t.SxDataProvider.prototype.processInit=function(){this.m_serviceConfig=t.QueryServiceConfig.create(this.m_quasar.getApplication());this.m_serviceConfig.setName(this.m_dataProviderName);this.m_serviceConfig.setUseAsDataProvider(true);if(t.notNull(this.m_system)){this.m_serviceConfig.setSystemName(this.m_system)}else{this.m_serviceConfig.setSystemName(this.m_quasar.getMasterSystemName())}this.m_serviceConfig.setDataSourceByName(this.m_dataSource);let e=t.PrFactory.createStructure();if(t.notNull(this.m_vizDef)){e.put(t.UiQuasarConstants.QSA_VIZ_DEF,this.m_vizDef)}if(t.notNull(this.m_globalDef)){e.put(t.UiQuasarConstants.QSA_GLOBAL_DEF,this.m_globalDef)}if(t.notNull(this.m_queryDef)){e.putString(t.UiQuasarConstants.QSA_FF_QUERY,this.m_queryDef)}this.m_serviceConfig.setDefinitionByStructure(t.QModelFormat.UQM,e)};t.SxDataProvider.prototype.releaseObject=function(){this.m_serviceConfig=t.XObjectExt.release(this.m_serviceConfig);this.m_quasar=null;t.XComponent.prototype.releaseObject.call(this)};t.SxDataProvider.prototype.setDataSource=function(t){this.m_dataSource=t};t.SxDataProvider.prototype.setGlobalDef=function(t){this.m_globalDef=t};t.SxDataProvider.prototype.setName=function(t){this.m_dataProviderName=t};t.SxDataProvider.prototype.setQueryDefinition=function(t){this.m_queryDef=t};t.SxDataProvider.prototype.setSystem=function(t){this.m_system=t};t.SxDataProvider.prototype.setVizDef=function(t){this.m_vizDef=t};t.SxDataProvider.prototype.setupDp=function(t){this.setup();this.m_quasar=t};t.QsOlapDp=function(){};t.QsOlapDp.prototype=new t.XComponent;t.QsOlapDp.prototype._ff_c="QsOlapDp";t.QsOlapDp.create=function(e,n){let i=new t.QsOlapDp;i.setupDp(e,n);return i};t.QsOlapDp.prototype.m_dataProviderName=null;t.QsOlapDp.prototype.m_dataSource=null;t.QsOlapDp.prototype.m_globalDef=null;t.QsOlapDp.prototype.m_globalObjects=null;t.QsOlapDp.prototype.m_modelFormat=null;t.QsOlapDp.prototype.m_quasar=null;t.QsOlapDp.prototype.m_queryDef=null;t.QsOlapDp.prototype.m_queryDocument=null;t.QsOlapDp.prototype.m_queryMode=null;t.QsOlapDp.prototype.m_serviceConfig=null;t.QsOlapDp.prototype.m_system=null;t.QsOlapDp.prototype.m_tagging=null;t.QsOlapDp.prototype.m_variables=null;t.QsOlapDp.prototype.m_vizDef=null;t.QsOlapDp.prototype.getComponentType=function(){return null};t.QsOlapDp.prototype.getDataProviderName=function(){return this.getName()};t.QsOlapDp.prototype.getName=function(){return this.m_dataProviderName};t.QsOlapDp.prototype.getTagging=function(){return this.m_tagging};t.QsOlapDp.prototype.getVariables=function(){return this.m_variables};t.QsOlapDp.prototype.processInit=function(){this.m_serviceConfig=t.QueryServiceConfig.create(this.m_quasar.getApplication());this.m_serviceConfig.setName(this.m_dataProviderName);this.m_serviceConfig.setUseAsDataProvider(true);if(t.notNull(this.m_system)){this.m_serviceConfig.setSystemName(this.m_system)}else{this.m_serviceConfig.setSystemName(this.m_quasar.getMasterSystemName())}if(t.notNull(this.m_dataSource)){this.m_serviceConfig.setDataSourceByName(this.m_dataSource)}if(this.m_modelFormat===t.QModelFormat.UQM){let e=t.PrFactory.createStructure();if(t.notNull(this.m_vizDef)){e.put(t.UiQuasarConstants.QSA_VIZ_DEF,this.m_vizDef)}if(t.notNull(this.m_globalDef)){e.put(t.UiQuasarConstants.QSA_GLOBAL_DEF,this.m_globalDef)}if(t.notNull(this.m_globalObjects)){let n=this.m_globalObjects.getKeysAsReadOnlyList();let i=e.putNewStructure(t.UiQuasarConstants.QSA_GLOBAL_OBJECTS);for(let t=0;t<n.size();t++){let e=n.get(t);i.put(e,this.m_globalObjects.getByKey(e).getContent())}}e.putStringNotNullAndNotEmpty("dpName",this.getName());if(t.notNull(this.m_queryDef)){e.putString(t.UiQuasarConstants.QSA_FF_QUERY,this.m_queryDef)}if(t.notNull(this.m_variables)){e.put(t.UiQuasarConstants.VARIABLES,this.m_variables)}this.m_serviceConfig.setDefinitionByStructure(t.QModelFormat.UQM,e)}else if(t.notNull(this.m_modelFormat)){this.m_serviceConfig.setDefinitionByStructure(this.m_modelFormat,this.m_queryDocument)}this.m_serviceConfig.setMode(this.m_queryMode)};t.QsOlapDp.prototype.reinit=function(){let e=this.m_serviceConfig.getQueryManager();let n=e.getQueryModel();if(t.notNull(n)){n.stopEventing();e.resetPreparation();let t=n.getVizManager();let i=t.getVizDefinitions();i.clear();i.stopEventing();n.resumeEventing();if(i.isEventingStopped()){i.resumeEventing()}if(t.isEventingStopped()){t.resumeEventing()}i._notifyNodeChanged()}};t.QsOlapDp.prototype.releaseObject=function(){this.m_serviceConfig=t.XObjectExt.release(this.m_serviceConfig);this.m_quasar=null;t.XComponent.prototype.releaseObject.call(this)};t.QsOlapDp.prototype.setDataProviderName=function(t){this.setName(t)};t.QsOlapDp.prototype.setDataSource=function(t){this.m_dataSource=t};t.QsOlapDp.prototype.setGlobalDef=function(t){this.m_globalDef=t};t.QsOlapDp.prototype.setGlobalObjects=function(t){this.m_globalObjects=t};t.QsOlapDp.prototype.setName=function(t){this.m_dataProviderName=t};t.QsOlapDp.prototype.setQueryDefinition=function(t,e){this.m_queryDef=t;this.m_modelFormat=e};t.QsOlapDp.prototype.setQueryDocument=function(t,e){this.m_queryDocument=t;this.m_modelFormat=e};t.QsOlapDp.prototype.setSystem=function(t){this.m_system=t};t.QsOlapDp.prototype.setVariables=function(t){this.m_variables=t};t.QsOlapDp.prototype.setVizDef=function(t){this.m_vizDef=t};t.QsOlapDp.prototype.setupDp=function(e,n){this.setup();this.m_quasar=e;this.m_tagging=t.XHashMapByString.create();let i=n.getStringByKey(t.UiQuasarConstants.QSA_DATA_SOURCE);if(t.XStringUtils.isNotNullAndNotEmpty(i)){this.setDataSource(i)}let r=n.getStringByKey(t.UiQuasarConstants.QSA_NAME);this.setName(r);let o=n.getStringByKey(t.UiQuasarConstants.QSA_SYSTEM);if(t.notNull(o)){this.setSystem(o)}let s=n.getStringByKey("ModelFormat");let a=null;if(t.XStringUtils.isNotNullAndNotEmpty(s)){a=t.ContentType.lookup(s)}let l=n.getStructureByKey(t.UiQuasarConstants.QSA_VIZ_DEF);if(t.isNull(a)){if(t.notNull(l)){a=t.QModelFormat.UQM}}if(a===t.QModelFormat.UQM){this.setVizDef(l);let e=n.getListByKey(t.UiQuasarConstants.VARIABLES);this.setVariables(e);let i=n.getStructureByKey(t.UiQuasarConstants.QSA_GLOBAL_DEF);let r=n.getStructureByKey(t.UiQuasarConstants.QSA_GLOBAL_DEFS);if(t.isNull(i)&&t.notNull(r)){i=r}this.setGlobalDef(i);let o=n.getStringByKey(t.UiQuasarConstants.QSA_FF_QUERY);if(t.notNull(o)){this.setQueryDefinition(o,t.QModelFormat.UQM)}this.m_queryMode=t.QueryManagerMode.DEFAULT}else if(t.notNull(a)){let e=n.getStructureByKey("QueryDocument");this.setQueryDocument(e,a);if(a.isTypeOf(t.QModelFormat.INA_DATA)){this.m_queryMode=t.QueryManagerMode.RAW_QUERY}}this.m_modelFormat=a};t.QsRestDp=function(){};t.QsRestDp.prototype=new t.SxRestDp;t.QsRestDp.prototype._ff_c="QsRestDp";t.QsRestDp.create=function(e,n){let i=new t.QsRestDp;i.setupDp(e,n);return i};t.QsRestDp.prototype.m_quasar=null;t.QsRestDp.prototype.getName=function(){return this.getDataProviderName()};t.QsRestDp.prototype.processInit=function(){this.updateData()};t.QsRestDp.prototype.releaseObject=function(){this.m_quasar=null;t.SxRestDp.prototype.releaseObject.call(this)};t.QsRestDp.prototype.setGlobalObjects=function(t){};t.QsRestDp.prototype.setName=function(t){this.setDataProviderName(t)};t.QsRestDp.prototype.setupDp=function(e,n){this.m_quasar=e;let i=n.getStringByKey(t.UiQuasarConstants.QSA_NAME);let r=n.getStringByKey(t.UiQuasarConstants.QSA_ENDPOINT);this.setupExt(i,r,this.m_quasar.getApplication())};t.CustomCalcVarWidget=function(){};t.CustomCalcVarWidget.prototype=new t.CustomAbstractWidget;t.CustomCalcVarWidget.prototype._ff_c="CustomCalcVarWidget";t.CustomCalcVarWidget.prototype.getGlobalId=function(){return t.UiQuasarConstants.QSA_GLOBAL_OBJECTS_CALCULATION_VARIABLES};t.CustomFieldSelectionWidget=function(){};t.CustomFieldSelectionWidget.prototype=new t.CustomAbstractWidget;t.CustomFieldSelectionWidget.prototype._ff_c="CustomFieldSelectionWidget";t.CustomFieldSelectionWidget.prototype.getGlobalId=function(){return t.UiQuasarConstants.QSA_GLOBAL_OBJECTS_FIELD_SELECTIONS};t.CustomPageFilterWidget=function(){};t.CustomPageFilterWidget.prototype=new t.CustomAbstractWidget;t.CustomPageFilterWidget.prototype._ff_c="CustomPageFilterWidget";t.CustomPageFilterWidget.prototype.getGlobalId=function(){return t.UiQuasarConstants.QSA_GLOBAL_OBJECTS_PAGE_FILTERS};t.QuasarEngine=function(){};t.QuasarEngine.prototype=new t.DfApplicationContext;t.QuasarEngine.prototype._ff_c="QuasarEngine";t.QuasarEngine.DOC_RENDER_TEXT="Loading document...";t.QuasarEngine.create=function(e){let n=new t.QuasarEngine;n.setupEngine(e);return n};t.QuasarEngine.createEmbedded=function(e,n,i,r){let o=t.QuasarEngine.create(e);o.setDocumentByNativeJson(r);o.setNativeParent(n,i);let s=e.getUiManager();if(t.notNull(s)){s.invokeOnEventingThread(o)}return o};t.QuasarEngine.prototype.m_anchorGuid=null;t.QuasarEngine.prototype.m_bindings=null;t.QuasarEngine.prototype.m_customLoadingText=null;t.QuasarEngine.prototype.m_dataProviders=null;t.QuasarEngine.prototype.m_document=null;t.QuasarEngine.prototype.m_file=null;t.QuasarEngine.prototype.m_fileLoadedListener=null;t.QuasarEngine.prototype.m_genesis=null;t.QuasarEngine.prototype.m_globalLookupObjects=null;t.QuasarEngine.prototype.m_globalStyleClass=null;t.QuasarEngine.prototype.m_masterSystemName=null;t.QuasarEngine.prototype.m_messages=null;t.QuasarEngine.prototype.m_nativeAnchorId=null;t.QuasarEngine.prototype.m_nativeAnchorObject=null;t.QuasarEngine.prototype.m_quasarMode=null;t.QuasarEngine.prototype.m_recursiveExtend=false;t.QuasarEngine.prototype.m_renderFinishedProcedure=null;t.QuasarEngine.prototype.m_uiManager=null;t.QuasarEngine.prototype.afterScriptExecution=function(t){};t.QuasarEngine.prototype.beforeScriptExecution=function(t){};t.QuasarEngine.prototype.bindGlobalObjects=function(){let t=this.m_globalLookupObjects.getKeysAsReadOnlyList();for(let e=0;e<t.size();e++){this.m_globalLookupObjects.getByKey(t.get(e)).setupDpsAndBindings(this.m_dataProviders,this.m_bindings)}};t.QuasarEngine.prototype.clearBindings=function(){if(t.notNull(this.m_bindings)){for(let e=0;e<this.m_bindings.size();e++){let n=this.m_bindings.get(e);t.XObjectExt.release(n)}this.m_bindings.clear()}if(t.notNull(this.m_dataProviders)){for(let e=0;e<this.m_dataProviders.size();e++){let n=this.m_dataProviders.get(e);t.XObjectExt.release(n)}this.m_dataProviders.clear()}};t.QuasarEngine.prototype.doExecute=function(){this.m_uiManager=this.getApplication().getUiManager();this.initializeUi(this.m_uiManager)};t.QuasarEngine.prototype.fillParameters=function(e,n){let i=t.PrFactory.createList();let r=e.size()-n;let o;let s;let a;for(let l=0;l<n;l++){o=e.get(r+l);if(t.notNull(o)){s=o;a=s.getComponentType();if(a===t.XValueType.STRING){i.addString(s.toString())}else if(a===t.XValueType.BOOLEAN){i.addBoolean(s.getBoolean())}else if(a===t.XValueType.INTEGER){i.addInteger(s.getInteger())}else if(a.isTypeOf(t.XComponentType._UI)){i.addString(s.toString())}}else{i.add(null)}}return i};t.QuasarEngine.prototype.getDocument=function(){return this.m_document};t.QuasarEngine.prototype.getDocumentLoadingText=function(){if(t.XStringUtils.isNotNullAndNotEmpty(this.m_customLoadingText)){return this.m_customLoadingText}return t.QuasarEngine.DOC_RENDER_TEXT};t.QuasarEngine.prototype.getLogSeverity=function(){return t.DfApplicationContext.prototype.getLogSeverity.call(this)};t.QuasarEngine.prototype.getMasterSystemName=function(){return this.m_masterSystemName};t.QuasarEngine.prototype.initBindings=function(){for(let t=0;t<this.m_bindings.size();t++){let e=this.m_bindings.get(t);e.processInit()}};t.QuasarEngine.prototype.initDataProviders=function(){for(let t=0;t<this.m_dataProviders.size();t++){let e=this.m_dataProviders.get(t);e.processInit()}};t.QuasarEngine.prototype.initializeUi=function(e){if(t.notNull(this.m_nativeAnchorId)||t.notNull(this.m_nativeAnchorObject)){this.m_anchorGuid=t.XGuid.getGuid();this.m_uiManager.registerNativeAnchor(this.m_anchorGuid,this.m_nativeAnchorId,this.m_nativeAnchorObject)}let n;if(t.notNull(this.m_anchorGuid)){n=this.m_uiManager.getAnchorByName(this.m_anchorGuid)}else{n=this.m_uiManager.getAnchor()}let i=t.UiGenesis.create(n);this.renderUi(i)};t.QuasarEngine.prototype.isPlatformSupported=function(e){let n=e.getStringByKey(t.UiQuasarConstants.QSA_SUPPORTED_PLATFORMS);let i=t.XStringTokenizer.splitString(n,",");let r=this.m_genesis.getUiManager();if(t.notNull(i)&&t.notNull(r)){let e=r.getPlatform();let n=i.getIterator();while(n.hasNext()){let i=n.next();let r=t.XPlatform.lookup(i);if(t.notNull(r)&&e.isTypeOf(r)===true){return true}}return false}return true};t.QuasarEngine.prototype.loadDocumentFromFile=function(e){if(t.notNull(e)&&t.notNull(this.m_genesis)){if(e.isExisting()){e.processLoad(t.SyncType.NON_BLOCKING,this,null,t.CompressionType.NONE)}else{this.m_messages.addError(0,t.XStringUtils.concatenate2("File does not exist: ",e.getNativePath()))}}return null};t.QuasarEngine.prototype.nativeCall=function(e,n,i,r,o){let s=this.fillParameters(r,o);if(t.XString.isEqual(t.UiQuasarConstants.QSA_DOLLAR,n)){let t=s.getStringAtExt(0,null);let e=this.m_genesis.getUiManager().select(t);return e}else if(t.XString.isEqual(t.UiQuasarConstants.QSA_DOLLAR_D,n)){let t=s.getStringAtExt(0,null);let e=this.getApplication().getOlapEnvironment();let n=e.select(t);return n}else{let r=i;if(t.isNull(r)){r=e.getCustomObject("uicontext")}if(t.isNull(r)){r=e.getCustomObject("dpcontext")}let o=r.getComponentType();if(t.notNull(o)){if(o.isTypeOf(t.XComponentType._UI)){let e=r;let i=t.UiAllOperations.lookupOp(n);if(t.notNull(i)){return i.executeOperation(null,e,s,0)}}else if(o.isTypeOf(t.OlapComponentType.CONVENIENCE_CMDS)){let e=r;let i=t.QFactory.createReflectionCommand(n,null,null,null);if(t.notNull(i)){let t=i.executeOnContext(e,s);return t}}}return null}};t.QuasarEngine.prototype.onAfterClose=function(e){this.sendEventWithName(e,t.UiEvent.ON_AFTER_CLOSE)};t.QuasarEngine.prototype.onAfterOpen=function(e){this.sendEventWithName(e,t.UiEvent.ON_AFTER_OPEN)};t.QuasarEngine.prototype.onAfterRender=function(e){this.sendEventWithName(e,t.UiEvent.ON_AFTER_RENDER)};t.QuasarEngine.prototype.onBack=function(e){this.sendEventWithName(e,t.UiEvent.ON_BACK)};t.QuasarEngine.prototype.onBeforeClose=function(e){this.sendEventWithName(e,t.UiEvent.ON_BEFORE_CLOSE)};t.QuasarEngine.prototype.onBeforeOpen=function(e){this.sendEventWithName(e,t.UiEvent.ON_BEFORE_OPEN)};t.QuasarEngine.prototype.onBeforePageChanged=function(e){this.sendEventWithName(e,t.UiEvent.ON_BEFORE_PAGE_CHANGED)};t.QuasarEngine.prototype.onButtonPress=function(e){this.sendEventWithName(e,t.UiEvent.ON_BUTTON_PRESS)};t.QuasarEngine.prototype.onCancelTextEdit=function(e){this.sendEventWithName(e,t.UiEvent.ON_CANCEL_TEXT_EDIT)};t.QuasarEngine.prototype.onChange=function(e){this.sendEventWithName(e,t.UiEvent.ON_CHANGE)};t.QuasarEngine.prototype.onChipUpdate=function(e){this.sendEventWithName(e,t.UiEvent.ON_CHIP_UPDATE)};t.QuasarEngine.prototype.onClick=function(e){this.sendEventWithName(e,t.UiEvent.ON_CLICK)};t.QuasarEngine.prototype.onClose=function(e){this.sendEventWithName(e,t.UiEvent.ON_CLOSE)};t.QuasarEngine.prototype.onCollapse=function(e){this.sendEventWithName(e,t.UiEvent.ON_COLLAPSE)};t.QuasarEngine.prototype.onColorSelect=function(e){this.sendEventWithName(e,t.UiEvent.ON_COLOR_SELECT)};t.QuasarEngine.prototype.onColumnResize=function(e){this.sendEventWithName(e,t.UiEvent.ON_COLUMN_RESIZE)};t.QuasarEngine.prototype.onConfirmTextEdit=function(e){this.sendEventWithName(e,t.UiEvent.ON_CONFIRM_TEXT_EDIT)};t.QuasarEngine.prototype.onContextMenu=function(e){this.sendEventWithName(e,t.UiEvent.ON_CONTEXT_MENU)};t.QuasarEngine.prototype.onCursorChange=function(e){this.sendEventWithName(e,t.UiEvent.ON_CURSOR_CHANGE)};t.QuasarEngine.prototype.onDelete=function(e){this.sendEventWithName(e,t.UiEvent.ON_DELETE)};t.QuasarEngine.prototype.onDeselect=function(e){this.sendEventWithName(e,t.UiEvent.ON_DESELECT)};t.QuasarEngine.prototype.onDetailPress=function(e){this.sendEventWithName(e,t.UiEvent.ON_DETAIL_PRESS)};t.QuasarEngine.prototype.onDoubleClick=function(e){this.sendEventWithName(e,t.UiEvent.ON_DOUBLE_CLICK)};t.QuasarEngine.prototype.onDragEnd=function(e){this.sendEventWithName(e,t.UiEvent.ON_DRAG_END)};t.QuasarEngine.prototype.onDragEnter=function(e){this.sendEventWithName(e,t.UiEvent.ON_DRAG_ENTER)};t.QuasarEngine.prototype.onDragOver=function(e){this.sendEventWithName(e,t.UiEvent.ON_DRAG_OVER)};t.QuasarEngine.prototype.onDragStart=function(e){this.sendEventWithName(e,t.UiEvent.ON_DRAG_START)};t.QuasarEngine.prototype.onDrop=function(e){this.sendEventWithName(e,t.UiEvent.ON_DROP)};t.QuasarEngine.prototype.onEditingBegin=function(e){this.sendEventWithName(e,t.UiEvent.ON_EDITING_BEGIN)};t.QuasarEngine.prototype.onEditingEnd=function(e){this.sendEventWithName(e,t.UiEvent.ON_EDITING_END)};t.QuasarEngine.prototype.onEnter=function(e){this.sendEventWithName(e,t.UiEvent.ON_ENTER)};t.QuasarEngine.prototype.onError=function(e){this.sendEventWithName(e,t.UiEvent.ON_ERROR)};t.QuasarEngine.prototype.onEscape=function(e){this.sendEventWithName(e,t.UiEvent.ON_ESCAPE)};t.QuasarEngine.prototype.onExecute=function(e){this.sendEventWithName(e,t.UiEvent.ON_EXECUTE)};t.QuasarEngine.prototype.onExpand=function(e){this.sendEventWithName(e,t.UiEvent.ON_EXPAND)};t.QuasarEngine.prototype.onFileDrop=function(e){this.sendEventWithName(e,t.UiEvent.ON_FILE_DROP)};t.QuasarEngine.prototype.onFileLoaded=function(e,n,i,r){if(t.notNull(this.m_fileLoadedListener)){this.m_fileLoadedListener.onFileLoaded(e,n,i,r)}if(e.isValid()){if(t.notNull(i)){let e=i.getString();let n=this.getSession().getEnvironment();let r=this.getSession().getEnvironment().getVariableNames();for(let i=0;i<r.size();++i){let o=r.get(i);let s=n.getVariable(o);let a=t.XStringUtils.concatenate3("${",o,"}");e=t.XString.replace(e,a,s)}let o=t.JsonParserFactory.newInstance();let s=o.parse(e);if(o.isValid()&&t.notNull(s)){let e=s;if(e.isProxy()){e=e.clone()}t.XObjectExt.release(o);if(t.notNull(e)&&e.isStructure()){if(this.m_recursiveExtend){let n=this.m_file.getParent();if(t.notNull(n)){e=this.recursiveExtend(n,e)}}this.setDocument(e);this.renderDocument()}}else{let e=null;if(o.hasErrors()){this.m_messages.copyAllMessages(o);e=o.getFirstError().getText()}this.showErrorMessage("Failed to parse quasar document!",e);t.XObjectExt.release(o)}}else{this.showErrorMessage("Something went wrong! File content is empty!",e.getSummary())}}else{this.showErrorMessage("Error while fetching the specified file!",e.getFirstError().getText())}};t.QuasarEngine.prototype.onHover=function(e){this.sendEventWithName(e,t.UiEvent.ON_HOVER)};t.QuasarEngine.prototype.onHoverEnd=function(e){this.sendEventWithName(e,t.UiEvent.ON_HOVER_END)};t.QuasarEngine.prototype.onItemClose=function(e){this.sendEventWithName(e,t.UiEvent.ON_ITEM_CLOSE)};t.QuasarEngine.prototype.onItemDelete=function(e){this.sendEventWithName(e,t.UiEvent.ON_ITEM_DELETE)};t.QuasarEngine.prototype.onItemPress=function(e){this.sendEventWithName(e,t.UiEvent.ON_ITEM_PRESS)};t.QuasarEngine.prototype.onItemSelect=function(e){this.sendEventWithName(e,t.UiEvent.ON_ITEM_SELECT)};t.QuasarEngine.prototype.onKeyDown=function(e){this.sendEventWithName(e,t.UiEvent.ON_KEY_DOWN)};t.QuasarEngine.prototype.onKeyUp=function(e){this.sendEventWithName(e,t.UiEvent.ON_KEY_UP)};t.QuasarEngine.prototype.onLiveChange=function(e){this.sendEventWithName(e,t.UiEvent.ON_LIVE_CHANGE)};t.QuasarEngine.prototype.onLoadFinished=function(e){this.sendEventWithName(e,t.UiEvent.ON_LOAD_FINISHED)};t.QuasarEngine.prototype.onMenuPress=function(e){this.sendEventWithName(e,t.UiEvent.ON_MENU_PRESS)};t.QuasarEngine.prototype.onMove=function(e){this.sendEventWithName(e,t.UiEvent.ON_MOVE)};t.QuasarEngine.prototype.onMoveEnd=function(e){this.sendEventWithName(e,t.UiEvent.ON_MOVE_END)};t.QuasarEngine.prototype.onMoveStart=function(e){this.sendEventWithName(e,t.UiEvent.ON_MOVE_START)};t.QuasarEngine.prototype.onOpen=function(e){this.sendEventWithName(e,t.UiEvent.ON_OPEN)};t.QuasarEngine.prototype.onPageChanged=function(e){this.sendEventWithName(e,t.UiEvent.ON_PAGE_CHANGED)};t.QuasarEngine.prototype.onPaste=function(e){this.sendEventWithName(e,t.UiEvent.ON_PASTE)};t.QuasarEngine.prototype.onPress=function(e){this.sendEventWithName(e,t.UiEvent.ON_PRESS)};t.QuasarEngine.prototype.onReadLineFinished=function(e){this.sendEventWithName(e,t.UiEvent.ON_READ_LINE_FINISHED)};t.QuasarEngine.prototype.onRefresh=function(e){this.sendEventWithName(e,t.UiEvent.ON_REFRESH)};t.QuasarEngine.prototype.onResize=function(e){this.sendEventWithName(e,t.UiEvent.ON_RESIZE)};t.QuasarEngine.prototype.onRowResize=function(e){this.sendEventWithName(e,t.UiEvent.ON_ROW_RESIZE)};t.QuasarEngine.prototype.onScroll=function(e){this.sendEventWithName(e,t.UiEvent.ON_SCROLL)};t.QuasarEngine.prototype.onScrollLoad=function(e){this.sendEventWithName(e,t.UiEvent.ON_SCROLL_LOAD)};t.QuasarEngine.prototype.onSearch=function(e){this.sendEventWithName(e,t.UiEvent.ON_SEARCH)};t.QuasarEngine.prototype.onSelect=function(e){this.sendEventWithName(e,t.UiEvent.ON_SELECT)};t.QuasarEngine.prototype.onSelectionChange=function(e){this.sendEventWithName(e,t.UiEvent.ON_SELECTION_CHANGE)};t.QuasarEngine.prototype.onSelectionFinish=function(e){this.sendEventWithName(e,t.UiEvent.ON_SELECTION_FINISH)};t.QuasarEngine.prototype.onSuggestionSelect=function(e){this.sendEventWithName(e,t.UiEvent.ON_SUGGESTION_SELECT)};t.QuasarEngine.prototype.onTableDragAndDrop=function(e){this.sendEventWithName(e,t.UiEvent.ON_TABLE_DRAG_AND_DROP)};t.QuasarEngine.prototype.onTerminate=function(e){this.sendEventWithName(e,t.UiEvent.ON_TERMINATE)};t.QuasarEngine.prototype.onToggle=function(e){this.sendEventWithName(e,t.UiEvent.ON_TOGGLE)};t.QuasarEngine.prototype.onValueHelpRequest=function(e){this.sendEventWithName(e,t.UiEvent.ON_VALUE_HELP_REQUEST)};t.QuasarEngine.prototype.parseBinding=function(e,n){let i=t.SxBinding.create(this,n);let r=null;if(e.isStructure()){let n=e;r=n.getStringByKey(t.UiQuasarConstants.QSA_CACHE_ID);if(t.XStringUtils.isNullOrEmpty(r)){let e=n.getStringByKey(t.UiQuasarConstants.QSA_SOURCE);let i=n.getStringByKey(t.UiQuasarConstants.QSA_TYPE);r=t.XStringUtils.concatenate2(e,i)}i.setCacheIdentifier(r);let o=n.getStringByKey(t.UiQuasarConstants.QSA_SOURCE);i.setSource(o);let s=n.getStringByKey(t.UiQuasarConstants.QSA_TARGET);if(t.notNull(s)){i.setTarget(s)}let a=n.getStringByKey(t.UiQuasarConstants.QSA_TYPE);if(t.notNull(a)){let e=t.SemanticBindingType.lookup(a);i.setType(e)}}else if(e.isString()){let t=e;let n=t.getString();i.setSource(n);r=n}if(t.notNull(r)){r=this.replaceAllNonAlphaNum(r);i.setCacheIdentifier(r)}return i};t.QuasarEngine.prototype.parseBindings=function(t){for(let e=0;e<t.size();e++){let n=t.get(e);let i=this.parseBinding(n,false);this.m_bindings.add(i)}};t.QuasarEngine.prototype.parseControl=function(e,n){if(this.isPlatformSupported(e)===false){let n=e.getStringByKey(t.UiProperty.NAME.getName());if(t.XStringUtils.isNullOrEmpty(n)){this.log2("Current platform for the document element is not supported. Supported platforms: ",e.getStringByKey(t.UiQuasarConstants.QSA_SUPPORTED_PLATFORMS))}else{this.log4("Current platform for the document element with name ",n," is not supported. Supported platforms: ",e.getStringByKey(t.UiQuasarConstants.QSA_SUPPORTED_PLATFORMS))}return null}let i=t.UiType.lookupUiType(e.getStringByKey(t.UiQuasarConstants.QSA_CTYPE));if(t.isNull(i)){i=n}let r=e.getStringByKey(t.UiQuasarConstants.QSA_CUSTOM_CONTROL);let o=t.UiStyleClass.lookup(e.getStringByKey(t.UiQuasarConstants.QSA_STYLE));if(t.isNull(o)&&t.notNull(this.m_globalStyleClass)){o=this.m_globalStyleClass}let s=e.getStringByKey(t.UiQuasarConstants.QSA_ID);let a=null;if(t.notNull(i)){a=this.m_genesis.newControlExt(i,s,o);if(t.isNull(a)){this.printQuasarParsingError(t.XStringUtils.concatenate2("Failed to create control with type: ",i.getName()));return null}a.setName(e.getStringByKey(t.UiQuasarConstants.QSA_NAME));a.setCustomObject(e);let n=e.getKeysAsReadOnlyList();let r=null;let l=null;let u=this;let p=t.SxEventScriptingDp.createListener(this.m_genesis.getUiManager(),this.getApplication().getOlapEnvironment());u=p;for(let i=0;i<n.size();i++){let o=n.get(i);if(t.XString.isEqual(t.UiQuasarConstants.QSA_ID,o)===false){if(t.XString.isEqual(t.UiQuasarConstants.QSA_DATA_PROVIDER,o)){let t=e.getStructureByKey(o);r=this.parseDataprovider(t)}else if(t.XString.isEqual(t.UiQuasarConstants.QSA_BINDING,o)){let t=e.getByKey(o);l=this.parseBinding(t,false);this.m_bindings.add(l)}else if(t.XString.isEqual(t.UiQuasarConstants.QSA_BINDINGS,o)){let t=e.getListByKey(o);for(let e=0;e<t.size();e++){let n=t.get(e);let i=this.parseBinding(n,false);i.setControl(a);this.m_bindings.add(i)}}else if(t.UiEvent.lookup(o)!==null){let e=t.UiEvent.lookup(o);if(t.notNull(e)){let n=new t.UiClientOpRegisterEventListener;n.executeRegisterListener(a,e,u)}}else if(t.UiAllOperations.lookupSetterProperty(o)!==null){let n=t.UiUtils.getElementAsString(e,o);t.UiUtils.setPropertyStringValue(a,o,n)}else if(t.UiAggregation.lookup(o)!==null){let n=t.UiAggregation.lookup(o);if(a.hasAggregation(n)){let i=n.getAddOp();let r=e.getListByKey(o);if(t.notNull(r)&&r.size()>0){let o=n.getItemType();let s=n===t.UiAggregation.ITEMS;if(s&&t.isNull(o)){o=a.getDefaultItemType()}for(let e=0;e<r.size();e++){let n=r.getStructureAt(e);let s=this.parseControl(n,o);if(t.notNull(s)){i.executeAddIntoAggregation(a,s)}}if(s){let n=e.getStringByKey(t.UiQuasarConstants.QSA_SELECTED_NAME);if(t.notNull(n)&&r.size()>0){a.setSelectedName(n)}}}}else{this.printQuasarParsingError(t.XStringUtils.concatenate4("The control type ",a.getUiType().getName()," does not have an aggregation with name ",o))}}}}let g=e.getStructureByKey(t.UiProperty.CONTENT.getName());if(t.notNull(g)){let t=this.parseDocument(g,null);a.setContent(t)}let c=e.getStructureByKey(t.UiProperty.FOOTER.getName());if(t.notNull(c)){let t=this.parseDocument(c,null);a.setFooter(t)}let y=e.getStructureByKey(t.UiProperty.SUB_HEADER.getName());if(t.notNull(y)){let t=this.parseDocument(y,null);a.setSubHeader(t)}let m=e.getStructureByKey(t.UiProperty.HEADER.getName());if(t.notNull(m)){let t=this.parseDocument(m,null);a.setHeader(t)}let f=e.getStructureByKey(t.UiProperty.MENU.getName());if(t.notNull(f)){let t=this.parseDocument(f,null);a.setMenu(t)}let d=e.getStructureByKey(t.UiProperty.NAV_LIST.getName());if(t.notNull(d)){let t=this.parseDocument(d,null);a.setNavList(t)}let E=e.getStructureByKey(t.UiProperty.FIXED_NAV_LIST.getName());if(t.notNull(E)){let t=this.parseDocument(E,null);a.setFixedNavList(t)}let _=e.getStructureByKey(t.UiProperty.HEADER_TOOLBAR.getName());if(t.notNull(_)){let t=this.parseDocument(_,null);a.setHeaderToolbar(t)}if(t.notNull(l)){l.setControl(a);l.setDataprovider(r)}}else if(t.notNull(r)){let n=t.CustomControlRegistration.getCustomControl(r);if(t.notNull(n)){a=n.createCustomControl(this.m_genesis,e,this.m_globalLookupObjects)}else{a=this.m_genesis.newControlExt(i,s,o);a.setText(t.XStringUtils.concatenate2("Could not find custom control with name: ",r))}}else{let n=e.getStringByKey(t.UiQuasarConstants.QSA_CTYPE);if(t.XStringUtils.isNullOrEmpty(n)){this.printQuasarParsingError("A CType was not specified, cannot create control!")}else{this.printQuasarParsingError(t.XStringUtils.concatenate3("Cannot find a UiType with the name ",n,". The specified control does not exist!"))}}return a};t.QuasarEngine.prototype.parseDataprovider=function(e){let n=e.getStringByKey(t.UiQuasarConstants.QSA_TYPE);let i=t.QsDpType.lookup(n);if(t.isNull(i)){i=t.QsDpType.OLAP}let r=t.QsDataproviderFactory.createDataprovider(i,this,e);r.setGlobalObjects(this.m_globalLookupObjects);this.m_dataProviders.add(r);return r};t.QuasarEngine.prototype.parseDocument=function(e,n){let i=e.getListByKey(t.UiQuasarConstants.QSA_FLOATING_CONTROLS);if(t.notNull(i)){for(let t=0;t<i.size();t++){let e=i.getStructureAt(t);this.parseControl(e,null)}}let r=e.getStructureByKey(t.UiQuasarConstants.QSA_CONTENT);if(t.isNull(r)){r=e}let o=this.parseControl(r,n);let s=e.getListByKey(t.UiQuasarConstants.QSA_DATA_PROVIDERS);if(t.notNull(s)){for(let t=0;t<s.size();t++){let e=s.getStructureAt(t);this.parseDataprovider(e)}}let a=e.getStructureByKey(t.UiQuasarConstants.QSA_DATA_PROVIDER);if(t.notNull(a)){this.parseDataprovider(a)}let l=e.getListByKey(t.UiQuasarConstants.QSA_BINDINGS);if(t.notNull(l)){this.parseBindings(l)}return o};t.QuasarEngine.prototype.parseGlobalObjects=function(e){let n=e.getKeysAsReadOnlyList();for(let i=0;i<n.size();i++){let r=n.get(i);let o=t.ContentParserRegistration.getCustomContentParser(r);if(t.notNull(o)){let t=o.parseContent(e.getByKey(r));this.m_globalLookupObjects.put(r,t)}}};t.QuasarEngine.prototype.prepareRendering=function(e){if(t.notNull(this.m_genesis)){this.m_genesis.clearUi()}this.m_genesis=e;if(t.notNull(this.m_genesis)){this.m_genesis.clearUi()}this.m_dataProviders=t.XList.create();this.m_bindings=t.XList.create();if(t.notNull(this.m_messages)){this.m_messages.clearMessages()}};t.QuasarEngine.prototype.printQuasarParsingError=function(e){if(this.m_quasarMode===t.QsMode.DEVELOPMENT){this.showErrorMessage(e,null);throw t.XException.createRuntimeException(e)}else{this.logError(e)}};t.QuasarEngine.prototype.recursiveExtend=function(e,n){if(t.notNull(n)){if(n.isStructure()){let i=n;let r=i.getKeysAsIterator();while(r.hasNext()){let t=r.next();let n=i.getByKey(t);let o=this.recursiveExtend(e,n);if(o!==n){i.put(t,o)}}let o=i.getStringByKey(t.UiQuasarConstants.QSA_RESOURCE_REF);if(t.notNull(o)){let n=e.newChild(o);let s=this.loadDocumentFromFile(n);if(t.notNull(s)&&s.isStructure()){let t=s;r=i.getKeysAsIterator();while(r.hasNext()){let e=r.next();let n=i.getByKey(e);t.put(e,n)}return s}}}else if(n.isList()){let t=n;for(let n=0;n<t.size();n++){let i=t.get(n);let r=this.recursiveExtend(e,i);if(r!==i){t.set(n,r)}}}}return n};t.QuasarEngine.prototype.releaseObject=function(){if(t.notNull(this.m_genesis)){this.m_genesis.setRoot(null)}this.clearBindings();this.m_genesis=null;this.m_document=null;this.m_messages=t.XObjectExt.release(this.m_messages);this.m_uiManager=t.XObjectExt.release(this.m_uiManager);this.m_dataProviders=t.XObjectExt.release(this.m_dataProviders);this.m_bindings=t.XObjectExt.release(this.m_bindings);this.m_file=null;this.m_fileLoadedListener=null;this.m_renderFinishedProcedure=null;t.DfApplicationContext.prototype.releaseObject.call(this)};t.QuasarEngine.prototype.renderDocument=function(){let e=this.getDocument();if(this.m_messages.hasErrors()){this.showErrorMessage("Failed to render document!",this.m_messages.getSummary())}else{if(this.validateDocument(e)===false){this.showErrorMessage("Cannot render! Not a valid quasar document!",null)}else{if(e.containsKey(t.UiQuasarConstants.QSA_MODE)){this.m_quasarMode=t.QsMode.lookupWithDefault(e.getStringByKey(t.UiQuasarConstants.QSA_MODE),t.QsMode.PRODUCTION)}if(e.containsKey(t.UiQuasarConstants.QSA_MASTER_SYSTEM)){let n=e.getElementTypeByKey(t.UiQuasarConstants.QSA_MASTER_SYSTEM);if(n===t.PrElementType.STRING){this.m_masterSystemName=e.getStringByKey(t.UiQuasarConstants.QSA_MASTER_SYSTEM)}else if(n===t.PrElementType.STRUCTURE){let n=e.getStructureByKey(t.UiQuasarConstants.QSA_MASTER_SYSTEM);this.m_masterSystemName=n.getStringByKey(t.UiQuasarConstants.QSA_NAME);let i=n.getIntegerByKeyExt(t.UiQuasarConstants.QSA_MAX_SHARED_CONNECTIONS,-1);if(i!==-1&&t.XStringUtils.isNotNullAndNotEmpty(this.m_masterSystemName)){let t=this.getApplication().getConnectionPool();if(t.getSystemLandscape().getSystemDescription(this.m_masterSystemName)!==null){t.setMaximumSharedConnections(this.m_masterSystemName,i)}}}}if(e.containsKey(t.UiQuasarConstants.QSA_STYLE)){this.m_globalStyleClass=t.UiStyleClass.lookup(e.getStringByKey(t.UiQuasarConstants.QSA_STYLE))}this.m_globalLookupObjects=t.XHashMapByString.create();let n=e.getStructureByKey(t.UiQuasarConstants.QSA_GLOBAL_OBJECTS);if(t.notNull(n)){this.parseGlobalObjects(n)}let i=this.parseDocument(e,null);this.m_genesis.setRoot(i);this.initDataProviders();this.initBindings();this.bindGlobalObjects()}}this.renderFinished()};t.QuasarEngine.prototype.renderDocumentHeadless=function(e,n){if(t.notNull(e)&&t.notNull(n)){this.m_genesis=t.UiGenesis.create(n.getAnchor());this.prepareRendering(this.m_genesis);this.setDocument(e);this.renderDocument()}};t.QuasarEngine.prototype.renderFinished=function(){if(t.notNull(this.m_renderFinishedProcedure)){this.m_renderFinishedProcedure()}};t.QuasarEngine.prototype.renderUi=function(e){this.prepareRendering(e);try{let n=e.newControl(t.UiType.ACTIVITY_INDICATOR);n.useMaxSpace();n.setText("Loading...");e.setRoot(n);if(t.notNull(this.m_document)){n.setText(this.getDocumentLoadingText());t.XTimeout.timeout(10,()=>{this.renderDocument()})}else if(t.notNull(this.m_file)){n.setText("Loading file...");t.XTimeout.timeout(10,()=>{this.loadDocumentFromFile(this.m_file)})}else{this.showErrorMessage("No document given",null)}}catch(e){this.showErrorMessage(t.XErrorHelper.convertExceptionToString(e),null);this.log(t.XException.getStackTrace(e,0))}};t.QuasarEngine.prototype.replaceAllNonAlphaNum=function(e){let n=t.XString.size(e);let i=t.XStringBuffer.create();for(let r=0;r<n;r++){let n=t.XString.getCharAt(e,r);if((n>=65&&n<=90||n>=97&&n<=122||n>=48&&n<=57||n===95)===false){n=95}i.appendChar(n)}return i.toString()};t.QuasarEngine.prototype.reset=function(){this.clearBindings();if(t.notNull(this.m_genesis)){this.m_genesis.setRoot(null)}};t.QuasarEngine.prototype.sendEventWithName=function(e,n){if(t.isNull(n)){throw t.XException.createRuntimeException("Missing event! Please specify an event!")}let i=e.getControl();let r=i.getCustomObject();let o=r.getStringByKey(n.getName());let s=t.ScriptEngine.create();s.setVmCallback(this);s.setCustomObject("event",e);s.setCustomObject("uicontext",i);s.setInitialRegister(i);s.compile(o);s.execute()};t.QuasarEngine.prototype.setCustomLoadingText=function(t){this.m_customLoadingText=t};t.QuasarEngine.prototype.setDocument=function(t){this.m_document=t};t.QuasarEngine.prototype.setDocumentByFile=function(t,e){this.m_file=t;this.m_fileLoadedListener=e};t.QuasarEngine.prototype.setDocumentByNativeJson=function(e){let n=t.JsonParserFactory.newInstance();let i=n.convertFromNative(e);t.XObjectExt.release(n);let r=t.PrUtils.deepCopyElement(i);if(t.notNull(r)&&r.isStructure()){this.setDocument(r)}};t.QuasarEngine.prototype.setNativeParent=function(t,e){this.m_nativeAnchorId=t;this.m_nativeAnchorObject=e};t.QuasarEngine.prototype.setRenderFinishedProcedure=function(t){this.m_renderFinishedProcedure=t};t.QuasarEngine.prototype.setupEngine=function(e){this.setupApplicationContext(e);this.m_messages=t.MessageManager.createMessageManagerExt(this.getSession());this.m_recursiveExtend=true;this.m_quasarMode=t.QsMode.PRODUCTION};t.QuasarEngine.prototype.showErrorMessage=function(e,n){if(t.notNull(this.m_genesis)){t.UiMessageUtils.showErrorWithMessageAndDescription(this.m_genesis,e,n)}else{this.log("ERROR!");this.log(e);this.log(n)}};t.QuasarEngine.prototype.validateDocument=function(e){if(t.isNull(e)){return false}if(e.isStructure()===false){return false}if(e.containsKey(t.UiQuasarConstants.QSA_CONTENT)===false){return false}return true};t.SxEventScriptingDp=function(){};t.SxEventScriptingDp.prototype=new t.SxEventScripting;t.SxEventScriptingDp.prototype._ff_c="SxEventScriptingDp";t.SxEventScriptingDp.createListener=function(e,n){let i=new t.SxEventScriptingDp;i.setupEventScriptingDp(e,n);return i};t.SxEventScriptingDp.prototype.m_olapEnvironment=null;t.SxEventScriptingDp.prototype.executeByKeyword=function(e,n,i){if(t.XString.isEqual(t.UiQuasarConstants.QSA_DOLLAR_D,e)){let t=n.getStringAtExt(0,null);let e=this.m_olapEnvironment.select(t);i.setBoolean(true);return e}return t.SxEventScripting.prototype.executeByKeyword.call(this,e,n,i)};t.SxEventScriptingDp.prototype.executeOperation=function(e,n,i,r){let o=null;if(e.isTypeOf(t.OlapComponentType.CONVENIENCE_CMDS)){let e=n;let s=t.QFactory.createReflectionCommand(i,null,null,null);if(t.notNull(s)){o=s.executeOnContext(e,r)}}else{o=t.SxEventScripting.prototype.executeOperation.call(this,e,n,i,r)}return o};t.SxEventScriptingDp.prototype.lookupComponent=function(e,n){let i=t.SxEventScripting.prototype.lookupComponent.call(this,e,n);if(t.isNull(i)){i=e.getCustomObject("dpcontext")}return i};t.SxEventScriptingDp.prototype.setupEventScriptingDp=function(e,n){t.SxEventScripting.prototype.setupEventScripting.call(this,e,null);this.m_olapEnvironment=n};t.QsDpType=function(){};t.QsDpType.prototype=new t.UiBaseConstant;t.QsDpType.prototype._ff_c="QsDpType";t.QsDpType.OLAP=null;t.QsDpType.REST=null;t.QsDpType.s_lookup=null;t.QsDpType.create=function(e){return t.UiBaseConstant.createUiConstant(new t.QsDpType,e,t.QsDpType.s_lookup)};t.QsDpType.lookup=function(e){return t.UiBaseConstant.lookupConstant(e,t.QsDpType.s_lookup)};t.QsDpType.staticSetup=function(){t.QsDpType.s_lookup=t.XHashMapByString.create();t.QsDpType.OLAP=t.QsDpType.create("Olap");t.QsDpType.REST=t.QsDpType.create("Rest")};t.QsMode=function(){};t.QsMode.prototype=new t.UiBaseConstant;t.QsMode.prototype._ff_c="QsMode";t.QsMode.DEVELOPMENT=null;t.QsMode.PRODUCTION=null;t.QsMode.s_lookup=null;t.QsMode.create=function(e){return t.UiBaseConstant.createUiConstant(new t.QsMode,e,t.QsMode.s_lookup)};t.QsMode.lookup=function(e){return t.QsMode.s_lookup.getByKey(e)};t.QsMode.lookupWithDefault=function(e,n){return t.UiBaseConstant.lookupConstant(e,t.QsMode.s_lookup)};t.QsMode.staticSetup=function(){t.QsMode.s_lookup=t.XHashMapByString.create();t.QsMode.DEVELOPMENT=t.QsMode.create("Development");t.QsMode.PRODUCTION=t.QsMode.create("Production")};t.QuasarProgram=function(){};t.QuasarProgram.prototype=new t.DfUiProgram;t.QuasarProgram.prototype._ff_c="QuasarProgram";t.QuasarProgram.DEFAULT_PROGRAM_NAME="Quasar";t.QuasarProgram.createQuasar=function(e,n,i,r,o){let s=e;if(t.notNull(s)){s=s.newSubApplication(null)}let a=new t.QuasarProgram;a.setInitialSystemType(n);a.setApplication(s);a.initializeProgram();a.m_quasarTemplateNative=i;a.m_quasarTemplate=r;a.m_quasarTemplateFile=o;return a};t.QuasarProgram.createRunner=function(){let e=t.KernelBoot.createByName(t.QuasarProgram.DEFAULT_PROGRAM_NAME);return e};t.QuasarProgram.prototype.m_core=null;t.QuasarProgram.prototype.m_quasarTemplate=null;t.QuasarProgram.prototype.m_quasarTemplateFile=null;t.QuasarProgram.prototype.m_quasarTemplateNative=null;t.QuasarProgram.prototype.m_subApplication=null;t.QuasarProgram.prototype.buildUi=function(e){this.resolveArgs();this.m_core=t.QuasarEngine.create(this.getApplication());if(t.notNull(this.m_quasarTemplateNative)){this.m_core.setDocumentByNativeJson(this.m_quasarTemplateNative)}else if(t.notNull(this.m_quasarTemplate)){this.m_core.setDocument(this.m_quasarTemplate)}else{if(t.notNull(this.m_quasarTemplateFile)){this.m_core.setDocumentByFile(this.m_quasarTemplateFile,null)}else{this.log("Core is not initialized due to missing document")}}this.m_core.renderUi(e)};t.QuasarProgram.prototype.getLogSeverity=function(){return t.DfUiProgram.prototype.getLogSeverity.call(this)};t.QuasarProgram.prototype.getMenuBarDisplayName=function(){return"Quasar"};t.QuasarProgram.prototype.getProgramName=function(){return t.QuasarProgram.DEFAULT_PROGRAM_NAME};t.QuasarProgram.prototype.newProgram=function(){let e=new t.QuasarProgram;e.setup();return e};t.QuasarProgram.prototype.prepareProgramMetadata=function(e){e.addParameter(t.DfProgram.PARAM_FILE,"The file")};t.QuasarProgram.prototype.processArguments=function(t){};t.QuasarProgram.prototype.processConfiguration=function(t){};t.QuasarProgram.prototype.releaseObject=function(){this.m_quasarTemplateNative=null;this.m_quasarTemplateFile=null;this.m_quasarTemplate=null;this.m_subApplication=t.XObjectExt.release(this.m_subApplication);this.m_core=t.XObjectExt.release(this.m_core);t.DfUiProgram.prototype.releaseObject.call(this)};t.QuasarProgram.prototype.reset=function(){if(t.notNull(this.m_core)){this.m_core.reset()}this.buildUi(this.getGenesis())};t.QuasarProgram.prototype.resolveArgs=function(){let e=this.getArguments();let n=t.XStringBuffer.create().append("Quasar");if(t.notNull(e)){let i=e.getStringByKey(t.DfProgram.PARAM_FILE);if(t.notNull(i)){let e=this.getProcess();this.m_quasarTemplateFile=t.XFile.createWithVars(e,i);if(this.m_quasarTemplateFile.isExisting()===false){this.log2("File does not exist: ",this.m_quasarTemplateFile.getTargetUriPath())}n.append("@").append(this.m_quasarTemplateFile.getName())}}this.setTitle(n.toString())};t.QuasarProgram.prototype.setFile=function(t){this.m_quasarTemplateFile=t};t.QuasarProgram.prototype.setupProgram=function(){return null};t.QuasarModule=function(){};t.QuasarModule.prototype=new t.DfModule;t.QuasarModule.prototype._ff_c="QuasarModule";t.QuasarModule.s_module=null;t.QuasarModule.getInstance=function(){if(t.isNull(t.QuasarModule.s_module)){t.DfModule.checkInitialized(t.UiRemoteModule.getInstance());t.QuasarModule.s_module=t.DfModule.startExt(new t.QuasarModule);t.QsMode.staticSetup();t.QsDpType.staticSetup();t.QsDataproviderFactory.staticSetup();t.QsOlapDpFactory.staticSetupFactory();t.QsRestDpFactory.staticSetupFactory();t.ProgramRegistry.setProgramFactory(new t.QuasarProgram);t.ContentParserRegistration.staticSetup();t.ContentParserRegistration.setCustomContentParser(t.UiQuasarConstants.QSA_GLOBAL_OBJECTS_FIELD_SELECTIONS,new t.FieldSelectionParser);t.ContentParserRegistration.setCustomContentParser(t.UiQuasarConstants.QSA_GLOBAL_OBJECTS_STORY_FILTERS,new t.StoryFilterParser);t.ContentParserRegistration.setCustomContentParser(t.UiQuasarConstants.QSA_GLOBAL_OBJECTS_PAGE_FILTERS,new t.PageFilterParser);t.ContentParserRegistration.setCustomContentParser(t.UiQuasarConstants.QSA_GLOBAL_OBJECTS_CALCULATION_VARIABLES,new t.DfContentParser);t.ContentParserRegistration.setCustomContentParser(t.UiQuasarConstants.QSA_GLOBAL_OBJECTS_CALCULATIONS,new t.DfContentParser);t.CustomControlRegistration.setCustomControl("FieldSelectionInputControl",new t.CustomFieldSelectionWidget);t.CustomControlRegistration.setCustomControl("PageFilter",new t.CustomPageFilterWidget);t.CustomControlRegistration.setCustomControl("CalculationInputControl",new t.CustomCalcVarWidget);t.DfModule.stopExt(t.QuasarModule.s_module)}return t.QuasarModule.s_module};t.QuasarModule.prototype.getName=function(){return"ff8000.quasar"};t.QuasarModule.getInstance();return t});
//# sourceMappingURL=ff8000.quasar.js.map