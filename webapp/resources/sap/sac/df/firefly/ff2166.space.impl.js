/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff2165.space"],function(t){"use strict";t.DAppDataProviderEventRedirect=function(){};t.DAppDataProviderEventRedirect.prototype=new t.XObject;t.DAppDataProviderEventRedirect.prototype._ff_c="DAppDataProviderEventRedirect";t.DAppDataProviderEventRedirect.createRedirect=function(e,n){let a=new t.DAppDataProviderEventRedirect;a.setupRedirect(e,n);return a};t.DAppDataProviderEventRedirect.prototype.m_dataProvider=null;t.DAppDataProviderEventRedirect.prototype.m_listenerId=null;t.DAppDataProviderEventRedirect.prototype.m_notificationCenter=null;t.DAppDataProviderEventRedirect.prototype.observeEvents=function(){if(t.notNull(this.m_dataProvider)){let t=this.m_dataProvider.getBasicEventing();this.m_listenerId=t.getListenerForAll().addConsumer(this.onAnyDpEvent.bind(this))}};t.DAppDataProviderEventRedirect.prototype.onAnyDpEvent=function(e){let n=e.getSubEvents();t.XCollectionUtils.forEach(n,e=>{let n=t.XNotificationData.create();n.putString(t.DataApplicationNotifications.PARAM_DATA_PROVIDER_NAME,this.m_dataProvider.getName());n.putString(t.DataApplicationNotifications.PARAM_DATA_PROVIDER_EVENT_TYPE,e.getEventType().getName());n.putXObject(t.DataApplicationNotifications.PARAM_DATA_PROVIDER_EVENT_OBJECT,e);this.m_notificationCenter.postNotificationWithName(t.DataApplicationNotifications.NOTIFY_DATA_PROVIDER_EVENT_FIRED,n)})};t.DAppDataProviderEventRedirect.prototype.releaseObject=function(){this.unobserveEvents();this.m_dataProvider=null;this.m_notificationCenter=null;this.m_listenerId=null;t.XObject.prototype.releaseObject.call(this)};t.DAppDataProviderEventRedirect.prototype.setupRedirect=function(t,e){this.m_dataProvider=t;this.m_notificationCenter=e;this.observeEvents()};t.DAppDataProviderEventRedirect.prototype.unobserveEvents=function(){if(t.notNull(this.m_dataProvider)){let t=this.m_dataProvider.getBasicEventing();t.getListenerForAll().removeConsumerByUuid(this.m_listenerId);this.m_listenerId=null}};t.AsDataProviderManager=function(){};t.AsDataProviderManager.prototype=new t.XObject;t.AsDataProviderManager.prototype._ff_c="AsDataProviderManager";t.AsDataProviderManager.createDpManager=function(){let e=new t.AsDataProviderManager;e.setupDpManager();return e};t.AsDataProviderManager.prototype.m_dataProviderCreatedListener=null;t.AsDataProviderManager.prototype.m_dataProviderCreationPromises=null;t.AsDataProviderManager.prototype.m_dataProviderReleasedListener=null;t.AsDataProviderManager.prototype.m_dataProviders=null;t.AsDataProviderManager.prototype.m_releasePromise=null;t.AsDataProviderManager.prototype._addDataProvider=function(t){if(!this.m_dataProviders.containsKey(t.getName())){this.m_dataProviders.put(t.getName(),t);this.m_dataProviderCreatedListener.accept(t)}};t.AsDataProviderManager.prototype.addDataProvider=function(t){this._addDataProvider(t)};t.AsDataProviderManager.prototype.createDataProvider=function(e){if(t.notNull(this.m_releasePromise)&&this.m_releasePromise.getState()===t.XPromiseState.PENDING){return t.XPromise.reject(t.XError.create("data provider manager is currently shutting down"))}let n=e.getDataProviderName();if(t.XStringUtils.isNullOrEmpty(n)){return t.XPromise.reject(t.XError.create("data provider name cannot be empty"))}let a=this.m_dataProviders.getByKey(n);if(t.notNull(a)){return t.XPromise.resolve(a)}let o=this.m_dataProviderCreationPromises.getByKey(n);if(t.notNull(o)&&o.getState()===t.XPromiseState.PENDING){return o}let i=t.DataProviderFactory.getInstance();let r=i.createDataProviderWithConfig(e);this.m_dataProviderCreationPromises.put(n,r);r.onThen(t=>{this.m_dataProviderCreationPromises.remove(n);this._addDataProvider(t)});return r};t.AsDataProviderManager.prototype.createDataProviderConfig=function(e,n){return t.DataProviderFactory.getInstance().createDataProviderConfiguration(e,n)};t.AsDataProviderManager.prototype.getDataProvider=function(t){return this.m_dataProviders.getByKey(t)};t.AsDataProviderManager.prototype.getDataProviderCreatedListener=function(){return this.m_dataProviderCreatedListener};t.AsDataProviderManager.prototype.getDataProviderNames=function(){return this.m_dataProviders.getKeysAsReadOnlyList()};t.AsDataProviderManager.prototype.getDataProviderReleasingListener=function(){return this.m_dataProviderReleasedListener};t.AsDataProviderManager.prototype.hasDataProvider=function(t){return this.m_dataProviders.containsKey(t)};t.AsDataProviderManager.prototype.releaseDataProvider=function(e){if(t.notNull(this.m_releasePromise)&&this.m_releasePromise.getState()===t.XPromiseState.PENDING){return t.XPromise.resolve(null)}let n=this.m_dataProviders.getByKey(e);if(t.isNull(n)){return t.XPromise.resolve(null)}this.m_dataProviderReleasedListener.accept(n);this.m_dataProviders.remove(e);return n.getBasicActions().getBasicLifecycleActions().releaseDataProvider(true)};t.AsDataProviderManager.prototype.releaseObject=function(){if(t.notNull(this.m_releasePromise)&&this.m_releasePromise.getState()===t.XPromiseState.PENDING){return}let e=t.XPromiseList.create();let n=this.m_dataProviders.getKeysAsIterator();while(n.hasNext()){let t=n.next();e.add(this.releaseDataProvider(t))}this.m_releasePromise=t.XPromise.all(e);this.m_releasePromise.onFinally(()=>{this.m_releasePromise=null;this.m_dataProviders=t.XObjectExt.release(this.m_dataProviders);this.m_dataProviderCreatedListener=t.XObjectExt.release(this.m_dataProviderCreatedListener);this.m_dataProviderReleasedListener=t.XObjectExt.release(this.m_dataProviderReleasedListener);this.m_dataProviderCreationPromises=t.XObjectExt.release(this.m_dataProviderCreationPromises);t.XObject.prototype.releaseObject.call(this)})};t.AsDataProviderManager.prototype.setupDpManager=function(){this.m_dataProviders=t.XHashMapByString.create();this.m_dataProviderCreatedListener=t.XConsumerCollection.create();this.m_dataProviderReleasedListener=t.XConsumerCollection.create();this.m_dataProviderCreationPromises=t.XHashMapByString.create()};t.AsMenuManager=function(){};t.AsMenuManager.prototype=new t.XObject;t.AsMenuManager.prototype._ff_c="AsMenuManager";t.AsMenuManager.ACTION="Action";t.AsMenuManager.EXTENSION="Extension";t.AsMenuManager.ITEMS="Items";t.AsMenuManager.MENU_ACTIONS="MenuActions";t.AsMenuManager.MENU_EXTENSIONS="MenuExtensions";t.AsMenuManager.NAME="Name";t.AsMenuManager.OPERATION="Operation";t.AsMenuManager.OPERATION_APPEND_INTO="AppendInto";t.AsMenuManager.REFERENCE="Reference";t.AsMenuManager.REFERENCE_ROOT="$Root";t.AsMenuManager.create=function(){let e=new t.AsMenuManager;e.setup();return e};t.AsMenuManager.prototype.m_menuMapper=null;t.AsMenuManager.prototype.m_menuTreeGenerator=null;t.AsMenuManager.prototype.addDataProviderMenuAction=function(e){let n=this.getMenuTreeGenerator();if(t.notNull(n)){let a=t.PrFactory.createStructure();a.putNewList(t.AsMenuManager.MENU_ACTIONS).add(e);n.loadPluginConfiguration(e.getStringByKey(t.AsMenuManager.NAME),a)}};t.AsMenuManager.prototype.addGlobalMenuItemByActionName=function(e){let n=this.getMenuTreeGenerator();if(t.notNull(n)){let a=t.PrFactory.createStructure();let o=a.putNewList(t.AsMenuManager.MENU_EXTENSIONS).addNewStructure().putNewList(t.AsMenuManager.EXTENSION).addNewStructure();o.putString(t.AsMenuManager.OPERATION,t.AsMenuManager.OPERATION_APPEND_INTO);o.putString(t.AsMenuManager.REFERENCE,t.AsMenuManager.REFERENCE_ROOT);o.putNewList(t.AsMenuManager.ITEMS).addNewStructure().putString(t.AsMenuManager.ACTION,e);n.loadPluginConfiguration(e,a)}};t.AsMenuManager.prototype.addGlobalMenuItemByStructure=function(e){let n=this.getMenuTreeGenerator();if(t.notNull(n)){let a=t.PrFactory.createStructure();let o=a.putNewList(t.AsMenuManager.MENU_EXTENSIONS).addNewStructure().putNewList(t.AsMenuManager.EXTENSION).addNewStructure();o.putString(t.AsMenuManager.OPERATION,t.AsMenuManager.OPERATION_APPEND_INTO);o.putString(t.AsMenuManager.REFERENCE,t.AsMenuManager.REFERENCE_ROOT);o.putNewList(t.AsMenuManager.ITEMS).add(e);let i=e.getStringByKeyExt(t.AsMenuManager.NAME,e.getStringByKey(t.AsMenuManager.ACTION));n.loadPluginConfiguration(i,a)}};t.AsMenuManager.prototype.attachKeyboardShortcutEvents=function(e,n){let a=this.getMenuMapper();if(t.notNull(a)){a.registerShortcuts(e,n)}};t.AsMenuManager.prototype.checkHasMenu=function(e,n){let a=this.getMenuTreeGenerator();if(t.notNull(a)){a.checkMenu(e.getLocalContext(),e.getUiContext(),e=>{n(t.XBooleanValue.create(t.notNull(e)&&e.hasEffectiveSubItems()))})}};t.AsMenuManager.prototype.clearDynamicMenuActionsProviders=function(){let e=this.getMenuTreeGenerator();if(t.notNull(e)){e.clearDynamicActionsProviders()}};t.AsMenuManager.prototype.clearWidgetFromCache=function(e){let n=this.getMenuMapper();if(t.notNull(n)){n.getUiCache().releaseUiItem(e)}};t.AsMenuManager.prototype.getBaseConfiguration=function(){let e=this.getMenuTreeGenerator();return t.isNull(e)?null:e.getConfiguration()};t.AsMenuManager.prototype.getMenuMapper=function(){if(t.isNull(this.m_menuMapper)){this.m_menuMapper=t.AsMenuMapperFactory.createGenericMenuMapper(this.getMenuTreeGenerator())}return this.m_menuMapper};t.AsMenuManager.prototype.getMenuTreeGenerator=function(){if(t.isNull(this.m_menuTreeGenerator)){this.m_menuTreeGenerator=t.AsMenuMapperFactory.createMenuTreeGenerator()}return this.m_menuTreeGenerator};t.AsMenuManager.prototype.registerActions=function(e){let n=this.getMenuTreeGenerator();if(t.notNull(n)){n.registerActions(e)}};t.AsMenuManager.prototype.registerDynamicMenuActionsProvider=function(e,n){let a=this.getMenuTreeGenerator();if(t.notNull(a)){a.registerDynamicActionsProvider(e,n)}};t.AsMenuManager.prototype.registerMenuAction=function(e,n){let a=this.getMenuTreeGenerator();if(t.notNull(a)){a.registerAction(e,n)}};t.AsMenuManager.prototype.releaseObject=function(){this.m_menuMapper=t.XObjectExt.release(this.m_menuMapper);this.m_menuTreeGenerator=t.XObjectExt.release(this.m_menuTreeGenerator);t.XObject.prototype.releaseObject.call(this)};t.AsMenuManager.prototype.retrieveAvailableActions=function(){let e=this.getMenuTreeGenerator();return t.isNull(e)?null:e.getRegisteredActions()};t.AsMenuManager.prototype.setBaseConfiguration=function(e){let n=this.getMenuTreeGenerator();if(t.notNull(n)){n.setConfiguration(e)}};t.AsMenuManager.prototype.setConfigurationExtension=function(e,n){let a=this.getMenuTreeGenerator();if(t.notNull(a)){a.loadPluginConfiguration(e,n)}};t.AsMenuManager.prototype.setup=function(){t.XObject.prototype.setup.call(this)};t.AsMenuManager.prototype.unRegisterDynamicMenuActionsProvider=function(e){let n=this.getMenuTreeGenerator();if(t.notNull(n)){n.unRegisterDynamicActionsProvider(e)}};t.AsMenuManager.prototype.updateMenu=function(e,n,a,o,i,r,s,p){let l=this.getMenuMapper();if(t.notNull(l)){let c=(e,n)=>{let c=t.notNull(e)&&e.hasEffectiveSubItems()&&t.notNull(n);if(c){if(t.notNull(r)){r(n)}l.registerMenuClose(n,s);l.openMenu(n,a,o,i)}if(t.notNull(p)){p(t.XBooleanValue.create(c))}};l.createContextMenu(e,n.getLocalContext(),n.getUiContext(),c)}};t.AsMenuManager.prototype.updateToolbar=function(e,n){let a=this.getMenuMapper();if(t.notNull(a)){a.populateToolbar(n,e.getLocalContext(),e.getUiContext())}};t.AsContent=function(){};t.AsContent.prototype=new t.XObject;t.AsContent.prototype._ff_c="AsContent";t.AsContent.createEmptySpaceContent=function(){let e=t.PrFactory.createStructure();let n=t.XContent.createJsonObjectContent(t.AsContentType.AGGREGATION,e);return t.AsContent.createSpaceContent(n)};t.AsContent.createSpaceContent=function(e){if(!e.getContentType().isTypeOf(t.ContentType.JSON)){let n=t.XStringUtils.concatenate2("unexpected content type: ",e.getContentType().getName());throw t.XException.createIllegalArgumentException(n)}let n=new t.AsContent;n.setupContent(e);return n};t.AsContent.prototype.m_content=null;t.AsContent.prototype.getContent=function(){return this.m_content};t.AsContent.prototype.getSubSection=function(t){let e=this.m_content.getJsonContent();return e.asStructure().getByKey(t)};t.AsContent.prototype.releaseObject=function(){this.m_content=t.XObjectExt.release(this.m_content);t.XObject.prototype.releaseObject.call(this)};t.AsContent.prototype.setSubSection=function(t,e){let n=this.m_content.getJsonContent();n.asStructure().put(t,e)};t.AsContent.prototype.setupContent=function(t){this.m_content=t};t.DataApplication=function(){};t.DataApplication.prototype=new t.XObject;t.DataApplication.prototype._ff_c="DataApplication";t.DataApplication.prototype.m_configManager=null;t.DataApplication.prototype.m_dataProviderManager=null;t.DataApplication.prototype.m_legacyApplication=null;t.DataApplication.prototype.m_menuManager=null;t.DataApplication.prototype.m_notificationCenter=null;t.DataApplication.prototype.m_process=null;t.DataApplication.prototype._generateSinglePluginStartupConfig=function(e,n,a){let o=t.PrFactory.createStructure();o.putNewStructure("configuration");o.putNewList("toolbar");if(t.XCollectionUtils.hasElements(a)){o.put("commands",a)}else{o.putNewList("commands")}let i=o.putNewStructure("layout");i.putString("type","SinglePlugin");let r=o.putNewList("plugins");let s=r.addNewStructure();s.putString("plugin",e);if(t.XCollectionUtils.hasElements(n)){s.put("config",n)}else{s.putNewStructure("config")}return o};t.DataApplication.prototype.addDataProvider=function(t){this.m_dataProviderManager.addDataProvider(t)};t.DataApplication.prototype.clearClientInfo=function(){this.getLegacyApplication().clearClientInfo()};t.DataApplication.prototype.createNextInstanceId=function(){return this.getLegacyApplication().createNextInstanceId()};t.DataApplication.prototype.getApplicationId=function(){return this.getLegacyApplication().getApplicationId()};t.DataApplication.prototype.getApplicationName=function(){return this.getLegacyApplication().getApplicationName()};t.DataApplication.prototype.getBindingManager=function(){return this.getLegacyApplication().getBindingManager()};t.DataApplication.prototype.getClientComponent=function(){return this.getLegacyApplication().getClientComponent()};t.DataApplication.prototype.getClientIdentifier=function(){return this.getLegacyApplication().getClientIdentifier()};t.DataApplication.prototype.getClientInfo=function(){return this.getLegacyApplication().getClientInfo()};t.DataApplication.prototype.getClientVersion=function(){return this.getLegacyApplication().getClientVersion()};t.DataApplication.prototype.getConfigManager=function(){return this.m_configManager};t.DataApplication.prototype.getConnection=function(t){return this.getLegacyApplication().getConnection(t)};t.DataApplication.prototype.getConnectionPool=function(){return this.getLegacyApplication().getConnectionPool()};t.DataApplication.prototype.getDataProviderManager=function(){return this.m_dataProviderManager};t.DataApplication.prototype.getDataProviders=function(){return this.getLegacyApplication().getDataProviders()};t.DataApplication.prototype.getDefaultSyncType=function(){return this.getLegacyApplication().getDefaultSyncType()};t.DataApplication.prototype.getDocument=function(t,e){return this.getLegacyApplication().getDocument(t,e)};t.DataApplication.prototype.getErrorManager=function(){return this.getLegacyApplication().getErrorManager()};t.DataApplication.prototype.getHttpExchangeEnhancer=function(){return this.getLegacyApplication().getHttpExchangeEnhancer()};t.DataApplication.prototype.getLanguageLocale=function(){return this.getLegacyApplication().getLanguageLocale()};t.DataApplication.prototype.getLegacyApplication=function(){if(t.isNull(this.m_legacyApplication)){let e=this.m_process.getApplication();if(t.notNull(e)){this.m_legacyApplication=e}else{this.m_legacyApplication=t.ApplicationFactory.createApplication(this.m_process)}}return this.m_legacyApplication};t.DataApplication.prototype.getMenuManager=function(){return this.m_menuManager};t.DataApplication.prototype.getNotificationCenter=function(){return this.m_notificationCenter};t.DataApplication.prototype.getOlapEnvironment=function(){return this.getLegacyApplication().getOlapEnvironment()};t.DataApplication.prototype.getProcess=function(){return this.m_process};t.DataApplication.prototype.getProcessEntityType=function(){return t.ProcessEntity.DATA_APPLICATION};t.DataApplication.prototype.getRepositoryManager=function(){return this.getLegacyApplication().getRepositoryManager()};t.DataApplication.prototype.getServices=function(t){return this.getLegacyApplication().getServices(t)};t.DataApplication.prototype.getSession=function(){return this.m_process};t.DataApplication.prototype.getStoryId=function(){return this.getLegacyApplication().getStoryId()};t.DataApplication.prototype.getStoryName=function(){return this.getLegacyApplication().getStoryName()};t.DataApplication.prototype.getSyncManager=function(){return this.getLegacyApplication().getSyncManager()};t.DataApplication.prototype.getSystemConnect=function(t){return this.getLegacyApplication().getSystemConnect(t)};t.DataApplication.prototype.getSystemLandscape=function(){return this.getLegacyApplication().getSystemLandscape()};t.DataApplication.prototype.getUiManager=function(){return this.getLegacyApplication().getUiManager()};t.DataApplication.prototype.getUiManagerExt=function(t){return this.getLegacyApplication().getUiManagerExt(t)};t.DataApplication.prototype.getUndoManager=function(){return this.getLegacyApplication().getUndoManager()};t.DataApplication.prototype.getUserManager=function(){return this.getLegacyApplication().getUserManager()};t.DataApplication.prototype.getWidgetId=function(){return this.getLegacyApplication().getWidgetId()};t.DataApplication.prototype.getXVersion=function(){return this.getLegacyApplication().getXVersion()};t.DataApplication.prototype.isSapStatisticsEnabled=function(){return this.getLegacyApplication().isSapStatisticsEnabled()};t.DataApplication.prototype.newSubApplication=function(t){return this.newSubApplicationWithId(t,null)};t.DataApplication.prototype.newSubApplicationWithId=function(t,e){return this.getLegacyApplication().newSubApplicationWithId(t,e)};t.DataApplication.prototype.onDataProviderCreated=function(e){t.DAppDataProviderEventRedirect.createRedirect(e,this.m_notificationCenter);let n=t.XNotificationData.create();n.putString(t.DataApplicationNotifications.PARAM_DATA_PROVIDER_NAME,e.getName());this.m_notificationCenter.postNotificationWithName(t.DataApplicationNotifications.NOTIFY_DATA_PROVIDER_CREATED,n)};t.DataApplication.prototype.onDataProviderReleased=function(e){let n=t.XNotificationData.create();n.putString(t.DataApplicationNotifications.PARAM_DATA_PROVIDER_NAME,e.getName());this.m_notificationCenter.postNotificationWithName(t.DataApplicationNotifications.NOTIFY_DATA_PROVIDER_RELEASED,n)};t.DataApplication.prototype.processBooting=function(t,e,n){return this.getLegacyApplication().processBooting(t,e,n)};t.DataApplication.prototype.registerDataProvider=function(t){this.getLegacyApplication().registerDataProvider(t)};t.DataApplication.prototype.registerService=function(t){this.getLegacyApplication().registerService(t)};t.DataApplication.prototype.releaseObject=function(){this.m_dataProviderManager=t.XObjectExt.release(this.m_dataProviderManager);this.m_legacyApplication=t.XObjectExt.release(this.m_legacyApplication);this.m_notificationCenter=t.XObjectExt.release(this.m_notificationCenter);this.m_configManager=t.XObjectExt.release(this.m_configManager);if(t.notNull(this.m_process)){let e=this.getProcess();e.removeProcessEntity(t.ProcessEntity.APPLICATION);e.removeProcessEntity(t.ProcessEntity.DATA_APPLICATION)}this.m_process=null;t.XObject.prototype.releaseObject.call(this)};t.DataApplication.prototype.runChartPlugin=function(e,n){return this.runPlugin(t.PluginConstants.VISUALIZATION_RENDERER_DOCUMENT_PLUGIN_NAME,e,n)};t.DataApplication.prototype.runPlugin=function(e,n,a){let o=t.JsonParserFactory.newInstance();let i=o.convertFromNative(n);let r=t.notNull(i)?i.asStructure():null;let s=t.PrFactory.createList();s.addString(t.PluginConstants.DATA_PROVIDER_COMMAND_PLUGIN_NAME);let p=this._generateSinglePluginStartupConfig(e,r,s);let l=t.ProgramRunner.createRunner(this.getProcess(),t.ProgramConstants.HORIZON_PROGRAM_NAME);l.setContainerType(t.ProgramContainerType.STANDALONE);l.setConfigStructure(p);l.setStringArgument(t.PluginConstants.PARAM_CONFIG,t.PrUtils.serialize(p,false,false,0));l.setNativeAnchorObject(a);l.setBooleanArgument("showSplashScreen",false);return l.runProgram().onThenExt(t=>null)};t.DataApplication.prototype.runProgram=function(e,n){let a=t.JsonParserFactory.newInstance();let o=a.convertFromNative(n);let i=t.notNull(o)?o.asStructure():null;let r=t.ProgramRunner.createRunner(this.getProcess(),e);r.setAllArguments(i);return r.runProgram().onThenExt(t=>null)};t.DataApplication.prototype.setApplicationName=function(t){this.getLegacyApplication().setApplicationName(t)};t.DataApplication.prototype.setClientInfo=function(t,e,n){this.getLegacyApplication().setClientInfo(t,e,n)};t.DataApplication.prototype.setDefaultSyncType=function(t){this.getLegacyApplication().setDefaultSyncType(t)};t.DataApplication.prototype.setErrorManager=function(t){this.getLegacyApplication().setErrorManager(t)};t.DataApplication.prototype.setLanguageLocale=function(t){this.getLegacyApplication().setLanguageLocale(t)};t.DataApplication.prototype.setSapStatisticsEnabled=function(t){this.getLegacyApplication().setSapStatisticsEnabled(t)};t.DataApplication.prototype.setStoryId=function(t){this.getLegacyApplication().setStoryId(t)};t.DataApplication.prototype.setStoryName=function(t){this.getLegacyApplication().setStoryName(t)};t.DataApplication.prototype.setSystemLandscape=function(t){this.getLegacyApplication().setSystemLandscape(t)};t.DataApplication.prototype.setUiManager=function(t){this.getLegacyApplication().setUiManager(t)};t.DataApplication.prototype.setWidgetId=function(t){this.getLegacyApplication().setWidgetId(t)};t.DataApplication.prototype.setupDataApplication=function(e){this.m_process=e;this.m_notificationCenter=t.XNotificationCenter.create();this.m_dataProviderManager=t.AsDataProviderManager.createDpManager();this.m_configManager=t.AsConfigManager.create(e);this.m_menuManager=t.AsMenuManager.create();this.m_dataProviderManager.getDataProviderCreatedListener().addConsumer(this.onDataProviderCreated.bind(this));this.m_dataProviderManager.getDataProviderReleasingListener().addConsumer(this.onDataProviderReleased.bind(this));return this.m_configManager.preloadConfigurations(this).onThenExt(n=>{e.setEntity(t.ProcessEntity.DATA_APPLICATION,this);return null})};t.DataApplication.prototype.setupEntity=function(t){return this.setupDataApplication(t)};t.DataApplication.prototype.unregisterDataProvider=function(t){this.getLegacyApplication().unregisterDataProvider(t)};t.DataApplication.prototype.unregisterService=function(t){this.getLegacyApplication().unregisterService(t)};t.DataApplication.prototype.unregisterSubApplication=function(t){this.getLegacyApplication().unregisterSubApplication(t)};t.AsConfigManager=function(){};t.AsConfigManager.prototype=new t.DfProcessContext;t.AsConfigManager.prototype._ff_c="AsConfigManager";t.AsConfigManager.create=function(e){let n=new t.AsConfigManager;n._setupWithProcess(e);return n};t.AsConfigManager.createFallback=function(){let e=new t.AsConfigManager;e.setupFallback();return e};t.AsConfigManager.prototype.m_configurationManager=null;t.AsConfigManager.prototype.m_loadedConfigurations=null;t.AsConfigManager.prototype._setupWithProcess=function(e){this.setupProcessContext(e);this.m_loadedConfigurations=t.XHashMapByString.create();this.m_configurationManager=t.CoConfigurationManager.create(e);if(this.getProcess()===null){throw t.XException.createException("[ConfigurationManager] Missing process! A process is required when creating a configuration manager!")}};t.AsConfigManager.prototype.applySessionConfig=function(e){let n=this.getFeatureConfig();if(t.notNull(n)){let a=n.getIntegerByKey(t.CoGlobalConfigurationUtils.X_VERSION);let o=e.getSession();if(a>-1){o.setXVersion(a)}t.XCollectionUtils.forEach(n.getListByKey(t.CoGlobalConfigurationUtils.FEATURE_TOGGLES_ENABLE),e=>{o.activateFeatureToggleByName(t.XValueUtil.getString(e))});t.XCollectionUtils.forEach(n.getListByKey(t.CoGlobalConfigurationUtils.FEATURE_TOGGLES_DISABLE),e=>{o.deactivateFeatureToggleByName(t.XValueUtil.getString(e))})}};t.AsConfigManager.prototype.getChartConfig=function(){return this.getLoadedConfigurationForName(t.CoChartDefaultConfigurationUtils.CONFIGURATION_NAME).orElse(null)};t.AsConfigManager.prototype.getConfigurationPromise=function(e,n){return this.m_configurationManager.getResolvedConfigurationForName(e).onThenExt(a=>{let o=t.CoConfigurationUtils.mapConfigurationPropertiesFromParentProcesses(a,this.getProcess());this.m_loadedConfigurations.put(e,o);if(t.notNull(n)){n.putConfigurationMapping(e,o)}return t.XBooleanValue.create(true)})};t.AsConfigManager.prototype.getFeatureConfig=function(){return this.getLoadedConfigurationForName(t.CoGlobalConfigurationUtils.CONFIGURATION_NAME).orElse(null)};t.AsConfigManager.prototype.getLoadedConfiguration=function(){return this.getLoadedConfigurationForName(t.CoConfigurationConstants.DEFAULT_CONFIG_FILE_NAME)};t.AsConfigManager.prototype.getLoadedConfigurationForName=function(e){let n;if(this.m_loadedConfigurations.containsKey(e)){n=t.XOptional.of(this.m_loadedConfigurations.getByKey(e))}else{n=t.XOptional.empty()}return n};t.AsConfigManager.prototype.loadConfiguration=function(){return this.loadConfigurationForName(t.CoConfigurationConstants.DEFAULT_CONFIG_FILE_NAME)};t.AsConfigManager.prototype.loadConfigurationForName=function(e){let n;if(this.m_loadedConfigurations.containsKey(e)){n=t.XPromise.resolve(t.XBooleanValue.create(true))}else{n=this.m_configurationManager.getResolvedConfigurationForName(e).onThenExt(n=>{this.m_loadedConfigurations.put(e,n);return t.XBooleanValue.create(true)})}return n};t.AsConfigManager.prototype.loadFallBackConfiguration=function(e){this.m_loadedConfigurations.put(e,t.CoConfigurationUtils.getFallbackConfigurationForName(e))};t.AsConfigManager.prototype.preloadConfigurations=function(e){if(t.isNull(e)){return t.XPromise.resolve(t.XBooleanValue.create(true))}else{let n=this.getProcess().getEntity(t.ProcessEntity.CONFIGURATION_MAPPING);let a=this.preloadConfigurationsInternal(e,n);if(t.notNull(n)){let a=t.XList.create();this.getLoadedConfigurationForName(t.CoGlobalConfigurationUtils.CONFIGURATION_NAME).ifPresent(t=>{a.add(t)});this.getLoadedConfigurationForName(t.CoChartDefaultConfigurationUtils.CONFIGURATION_NAME).ifPresent(t=>{a.add(t)});this.getLoadedConfigurationForName(t.CoFormulaEditorConfigurationUtils.CONFIGURATION_NAME).ifPresent(t=>{a.add(t)});n.setFinalizeConfigHook(a,()=>this.preloadConfigurationsInternal(e,n))}return a}};t.AsConfigManager.prototype.preloadConfigurationsInternal=function(e,n){let a=t.XPromiseList.create();a.add(this.getConfigurationPromise(t.CoGlobalConfigurationUtils.CONFIGURATION_NAME,n));a.add(this.getConfigurationPromise(t.CoChartDefaultConfigurationUtils.CONFIGURATION_NAME,n));a.add(this.getConfigurationPromise(t.CoFormulaEditorConfigurationUtils.CONFIGURATION_NAME,n));let o=t.XPromise.allSettled(a);return o.onThenExt(n=>{this.applySessionConfig(e);return t.XBooleanValue.create(true)})};t.AsConfigManager.prototype.putConfiguration=function(e){this.putConfigurationForName(t.CoConfigurationConstants.DEFAULT_CONFIG_FILE_NAME,e)};t.AsConfigManager.prototype.putConfigurationForName=function(e,n){let a=t.CoConfigurationRegistry.getConfigurationMetadata(e);let o=t.CoConfiguration.create(a,n,this.getProcess());this.m_loadedConfigurations.put(e,o)};t.AsConfigManager.prototype.releaseObject=function(){this.m_loadedConfigurations=t.XObjectExt.release(this.m_loadedConfigurations);this.m_configurationManager=t.XObjectExt.release(this.m_configurationManager);t.DfProcessContext.prototype.releaseObject.call(this)};t.AsConfigManager.prototype.setupFallback=function(){this.m_loadedConfigurations=t.XHashMapByString.create();this.loadFallBackConfiguration(t.CoGlobalConfigurationUtils.CONFIGURATION_NAME);this.loadFallBackConfiguration(t.CoChartDefaultConfigurationUtils.CONFIGURATION_NAME);this.loadFallBackConfiguration(t.CoFormulaEditorConfigurationUtils.CONFIGURATION_NAME)};t.AsContentManager=function(){};t.AsContentManager.prototype=new t.DfProcessContext;t.AsContentManager.prototype._ff_c="AsContentManager";t.AsContentManager.createContentManager=function(e){let n=new t.AsContentManager;n.setupMgr(e);return n};t.AsContentManager.prototype.m_loadedContent=null;t.AsContentManager.prototype.m_loadingPromises=null;t.AsContentManager.prototype.m_savingPromises=null;t.AsContentManager.prototype.createEmptyContent=function(){return t.AsContent.createEmptySpaceContent()};t.AsContentManager.prototype.loadContent=function(e){let n=e.getUrl();let a=this.m_savingPromises.getByKey(n);if(t.notNull(a)&&a.getState()===t.XPromiseState.PENDING){return a.onThenExt(t=>this.m_loadedContent.getByKey(n))}let o=this.m_loadingPromises.getByKey(n);if(t.notNull(o)&&o.getState()===t.XPromiseState.PENDING){return o}let i=this.m_loadedContent.getByKey(n);if(t.notNull(i)){return t.XPromise.resolve(i)}let r=t.XFile.createByUri(this.getProcess(),e);let s=t.XFilePromise.loadContent(r).onThenExt(e=>{let a=t.AsContent.createSpaceContent(e);this.m_loadedContent.put(n,a);this.m_loadingPromises.remove(n);return a});this.m_loadingPromises.put(n,s);return s};t.AsContentManager.prototype.releaseObject=function(){this.m_loadedContent=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_loadedContent);this.m_loadingPromises=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_loadingPromises);this.m_savingPromises=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_savingPromises);t.DfProcessContext.prototype.releaseObject.call(this)};t.AsContentManager.prototype.saveContent=function(e,n){let a=e.getUrl();let o=this.m_loadingPromises.getByKey(a);if(t.notNull(o)&&o.getState()===t.XPromiseState.PENDING){let e=t.XStringUtils.concatenate2("cannot save content while it's loading: ",a);return t.XPromise.reject(t.XError.create(e))}let i=this.m_savingPromises.getByKey(a);if(t.notNull(i)&&i.getState()===t.XPromiseState.PENDING){let e=t.XStringUtils.concatenate2("cannot save content while it's saving: ",a);return t.XPromise.reject(t.XError.create(e))}let r=t.XFile.createByUri(this.getProcess(),e);let s=n.getContent();let p=t.XFilePromise.saveContent(r,s).onThenExt(t=>{this.m_loadedContent.put(a,n);this.m_savingPromises.remove(a);return null});this.m_savingPromises.put(a,p);return p};t.AsContentManager.prototype.setupMgr=function(e){this.setupProcessContext(e);this.m_loadedContent=t.XHashMapByString.create();this.m_loadingPromises=t.XHashMapByString.create();this.m_savingPromises=t.XHashMapByString.create()};t.SpaceImplModule=function(){};t.SpaceImplModule.prototype=new t.DfModule;t.SpaceImplModule.prototype._ff_c="SpaceImplModule";t.SpaceImplModule.s_module=null;t.SpaceImplModule.getInstance=function(){if(t.isNull(t.SpaceImplModule.s_module)){t.DfModule.checkInitialized(t.SpaceModule.getInstance());t.SpaceImplModule.s_module=t.DfModule.startExt(new t.SpaceImplModule);t.ProcessEntityRegistry.registerEntityFactory(t.XClass.create(t.DataApplication));t.DfModule.stopExt(t.SpaceImplModule.s_module)}return t.SpaceImplModule.s_module};t.SpaceImplModule.prototype.getName=function(){return"ff2166.space.impl"};t.SpaceImplModule.getInstance();return t});
//# sourceMappingURL=ff2166.space.impl.js.map