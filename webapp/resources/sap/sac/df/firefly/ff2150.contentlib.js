/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff2100.runtime"],function(t){"use strict";t.FF2150_CONTENTLIB_RESOURCES=function(){};t.FF2150_CONTENTLIB_RESOURCES.prototype={};t.FF2150_CONTENTLIB_RESOURCES.prototype._ff_c="FF2150_CONTENTLIB_RESOURCES";t.FF2150_CONTENTLIB_RESOURCES.PATH_manifests_programs_SubSysFileSystemfscontentlib_json="manifests/programs/SubSysFileSystemfscontentlib.json";t.FF2150_CONTENTLIB_RESOURCES.manifests_programs_SubSysFileSystemfscontentlib_json="ewogICJOYW1lIjogIkBTdWJTeXMuRmlsZVN5c3RlbS5mc2NvbnRlbnRsaWIiLAogICJUeXBlIjogIlN1YlN5c3RlbSIsCiAgIkNhdGVnb3J5IjogIlN1YlN5c3RlbSIsCiAgIlByb2ZpbGVzIjpbIioiXSwKICAiRGlzcGxheU5hbWUiOiAiQ29udGVudGxpYiBGaWxlc3lzdGVtIiwKICAiRGVzY3JpcHRpb24iOiAiQ29udGVudGxpYiBGaWxlc3lzdGVtIiwKICAiQXV0aG9yIjogIlJvYmVydCBNdWxsZW4iLAogICJDb250YWluZXIiOiAiTm9uZSIsCiAgIkNsYXNzIjogImNvbS5zYXAuZmlyZWZseS5jb250ZW50bGliLlN1YlN5c0ZzQ29udGVudGxpYlByZyIsCiAgIlN1YlN5c3RlbXMiOiBbIlN5c3RlbUxhbmRzY2FwZSIsICJVc2VyUHJvZmlsZSJdLAogICJNb2R1bGVzIjogWyJmZjEwNDAua2VybmVsLm5hdGl2ZSIsImZmMjE1MC5jb250ZW50bGliIl0KfQ==";t.XResources.registerResourceClass("ff2150.contentlib",t.FF2150_CONTENTLIB_RESOURCES);t.OrcaFileRequestAdapter=function(){};t.OrcaFileRequestAdapter.prototype=new t.XObject;t.OrcaFileRequestAdapter.prototype._ff_c="OrcaFileRequestAdapter";t.OrcaFileRequestAdapter.create=function(e){let r=new t.OrcaFileRequestAdapter;r.callback=e;return r};t.OrcaFileRequestAdapter.prototype.callback=null;t.OrcaFileRequestAdapter.prototype.onHttpFileProcessed=function(t,e,r){this.callback(t)};t.OrcaResourceConstants={ACCESS:"access",ACTION:"action",ALLOW_AUTH_OVERRIDE:"allowAuthOverride",ANCESTOR_INFO:"ancestorInfo",ANCESTOR_PATH:"ancestorPath",ANCESTOR_RESOURCE:"ancestorResource",ASCENDING:"ascending",AUTH:"auth",AUTH_ASSIGN:"assign",AUTH_COMMENT_ADD:"comment_add",AUTH_COMMENT_DELETE:"comment_delete",AUTH_COMMENT_VIEW:"comment_view",AUTH_COPY:"copy",AUTH_CREATE_DOC:"create_doc",AUTH_CREATE_FOLDER:"create_folder",AUTH_DELETE:"delete",AUTH_MAINTAIN:"maintain",AUTH_READ:"read",AUTH_UPDATE:"update",CAN_SHARE:"canShare",CAPABILITY:"capability",CATALOG_VIRTUAL_FOLDER:"Catalog",CDATA:"cdata",CHANGED_BY_DISPLAY_NAME:"changedByDisplayName",CREATED_BY:"createdBy",CREATED_BY_DISPLAY_NAME:"createdByDisplayName",CREATED_BY_SEARCH_FILTER:"createdBy",CREATED_TIME:"createdTime",CREATE_CONTENT:"createContent",CREATE_FOLDER:"createFolder",CREATE_LINK:"create",CREATE_OPTIONS:"createOpt",DATA:"data",DATA_ANALYZER_ENHANCED_PROPERTY:"DRAGONFLY",DATA_ANALYZER_INFO:"DATA_ANALYZER_INFO",DATA_ANALYZER_LINK_END_NDOE:"endNode",DATA_ANALYZER_LINK_ID_PARAM:"id",DATA_ANALYZER_LINK_PATH_NODES:"nodes",DATA_ANALYZER_LINK_PATH_RESPONSE_END_NODE:"createdEndNode",DATA_ANALYZER_LINK_REQUEST_DATA:"requestData",DATA_ANALYZER_LINK_TYPE_PARAM:"type",DATA_ANAYZER_INFO_VALUE:"dataAnalyzerOptimizedMode",DEFAULT_INSIGHT_SAVE_FOLDER_PATH:"/MyFiles",DEPENDENT_OBJECTS:"dependentObjects",DESCENDING:"descending",DESCRIPTION:"description",DIRECTION:"direction",ENHANCED_PROPERTIES:"enhancedProperties",EPM_OBJECT_DATA:"epmObjectData",EXCEPTION_NOT_THROWN_FOR_NO_ACCESS:"exceptionNotThrownForNoAccess",EXISTING_RESOURCE:"existingResource",EXISTS:"exists",FAV_RES_ID:"favResId",FEATURED:"featured",FETCH_ENHANCED_PROPERTIES:"fetchEnhancedProperties",FILTER:"filter",FILTER_CREATED_BY:"CREATED_BY",FILTER_NOT_CREATED_BY:"NOT_CREATED_BY",FILTER_RESOURCE_TYPE:"RESOURCE_TYPE",GET_ACCESS_DETAILS:"getAccessDetails",GET_ANCESTOR_AND_SUB_NODES:"getAncestorAndSubNodes",GET_CONTENT:"getContent",GET_RECENT_FILES:"getRecentFiles",GET_REPO_VIEW:"getRepoView",GET_RESOURCE_EX:"getResourceEx",GET_RESOURCE_WITH_NAME_EXISTS:"getResourceWithNameExists",GET_SPACE_VIEW:"getSpaceView",GET_SUB_NODES:"getSubNodes",INCLUDE_SELF:"includeSelf",INCLUDE_TOTAL_RESOURCE_COUNT:"includeTotalResourceCount",INFO:"info",IS_REMOTE:"isRemote",IS_SHARED:"isShared",IS_TRANSLATION_CLASH:"isTranslationClash",KEY:"key",KEYWORD:"keyword",LIMIT:"limit",LINK_GENERATE_END_NODE:"generateEndNode",METADATA:"metadata",METADATA_DEFINITION:"metadataDefinition",MOBILE_SUPPORT:"mobileSupport",MODIFIED_BY:"modifiedBy",MODIFIED_BY_DISPLAY_NAME:"modifiedByDisplayName",MODIFIED_TIME:"modifiedTime",MY_FILES_DISPLAY_NAME:"My Files",MY_FILES_VIRTUAL_FOLDER:"MyFiles",NAME:"name",NOT_CREATED_BY_SEARCH_FILTER:"notCreatedBy",OBJECT_ID:"objectId",OFFSET:"offset",OPTIONS:"options",ORDER_BY:"orderBy",ORIG_LANGUAGE:"origLangu",OWNER_DISPLAY_NAME:"ownerDisplayName",OWNER_ID:"ownerId",OWNER_TYPE:"ownerType",O_OPTIONS:"oOpt",PACKAGE_ID:"packageId",PARENT_RESOURCE_IDS:"parentResourceIds",PARENT_RES_ID:"parentResId",PRIVATE_FOLDER_PREFIX:"PRIVATE_",PROPERTIES:"properties",PUBLISHED_READABLE:"publishedReadable",RECENTLY_ACCESSED:"recentlyAccessed",RECENT_FILES_DISPLAY_NAME:"Recent Files",RECENT_FILES_VIRTUAL_FOLDER:"RecentFiles",RECENT_FILES_VIRTUAL_FOLDER_PATH:"/RecentFiles",RENAME_RESOURCE:"renameResource",RESOURCES:"resources",RESOURCE_ID:"resourceId",RESOURCE_ID_INPUT_SCHEDULE:"INPUT_SCHEDULE",RESOURCE_ID_PUBLIC:"PUBLIC",RESOURCE_ID_ROOT:"ROOT",RESOURCE_ID_SAMPLES:"SAMPLES",RESOURCE_ID_SHARED:"SHARED",RESOURCE_ID_SPACE:"SPACE",RESOURCE_ID_SYSTEM:"SYSTEM",RESOURCE_ID_TEAMS:"TEAMS",RESOURCE_ID_USERS:"USERS",RESOURCE_ID_WORKSPACE:"WORKSPACE",RESOURCE_ID_WORKSPACE_SUFFIX:"PRIVATE_",RESOURCE_SUBTYPE:"resourceSubtype",RESOURCE_TYPE:"resourceType",RESOURCE_TYPES:"resourceTypes",RESOURCE_TYPES_EXTENDED:"resourceTypesExtended",RESOURCE_TYPE_COMPOSITE:"COMPOSITE",RESOURCE_TYPE_CUBE:"CUBE",RESOURCE_TYPE_FOLDER:"FOLDER",RESOURCE_TYPE_INSIGHT:"INSIGHT",RESOURCE_TYPE_LINK:"LINK",RESOURCE_TYPE_MODEL:"MODEL",RESOURCE_TYPE_STORY:"STORY",REST_ENDPOINT:"/sap/fpa/services/rest/epm/contentlib",REST_LINK_ENDPOINT:"/sap/fpa/services/rest/fpa/linkpath/v1/",SEARCH_ALL_RESOURCES:"searchAllResources",SEARCH_CRITERIA:"searchCriteria",SEARCH_VALUE:"value",SET_USER_SHARE:"setUserShare",SHARE:"share",SHARED:"shared",SHARED_RES_ID:"shareResId",SHARED_TO_ANY:"sharedToAny",SORT:"sort",SORT_DEFINITION:"sortDefinition",SOURCE_RESOURCE:"sourceResource",SOURCE_RES_ID:"sourceResId",SPACE:"space",SPACE_ID:"spaceId",STAGE_DELETE_LIST:"stageDeleteList",SUB_NODES:"subNodes",TOTAL_RESOURCE_COUNT:"totalResourceCount",TRANSLATION_ENABLED:"translationEnabled",UPDATE_CONTENT:"updateContent",UPDATE_COUNTER:"updateCounter",UPDATE_OPTIONS:"updateOpt",VALUE:"value",WORKSPACE:"WORKSPACE",WORKSPACES_VIRTUAL_FOLDER:"Workspaces"};t.OrcaResponseParser={generateFilesInPath:function(e,r,i,n,s){let o=t.XStringUtils.concatenate2("/",t.OrcaResourceConstants.MY_FILES_VIRTUAL_FOLDER);let a=t.XUri.createFromFilePath(i,o,t.PathFormat.AUTO_DETECT,t.VarResolveMode.DOLLAR,t.ProtocolType.FS_CONTENTLIB);let l=r.getFileFromCache(a);let c=e.getListByKey(t.XStringUtils.isNotNullAndNotEmpty(s)?s:t.OrcaResourceConstants.ANCESTOR_RESOURCE);let u=t.XStringUtils.concatenate3("/",l.getName(),"/");for(let e=0;e<c.size();e++){let n=c.get(e);let s=n.getStringByKey(t.OrcaResourceConstants.RESOURCE_ID);if(t.OrcaContentlibResourceUtils.isPrivateFolder(s)||!t.OrcaContentlibResourceUtils.canFolderShowInUi(s)||t.XString.isEqual(l.getName(),s)||!t.OrcaContentlibResourceUtils.checkAuth(n,t.OrcaResourceConstants.AUTH_READ)){continue}let o=t.XUri.createFromFilePath(i,u,t.PathFormat.AUTO_DETECT,t.VarResolveMode.DOLLAR,t.ProtocolType.FS_CONTENTLIB);u=t.XStringUtils.concatenate3(u,s,"/");t.OrcaFile.createFolder(n,i,r,o,true)}},getFileListFromResponse:function(e,r,i,n,s){let o=null;let a=t.XList.create();if(e.getType()===t.PrElementType.STRUCTURE){if(e.asStructure().containsKey(t.OrcaResourceConstants.SUB_NODES)){o=e.asStructure().getListByKey(t.OrcaResourceConstants.SUB_NODES)}else if(e.asStructure().containsKey(t.OrcaResourceConstants.RESOURCES)){o=e.asStructure().getListByKey(t.OrcaResourceConstants.RESOURCES)}else{a.add(t.OrcaFile.create(e.asStructure(),i,n,r))}a.addAll(t.OrcaResponseParser.parseList(o,i,n,r,s))}else if(e.getType()===t.PrElementType.LIST){a.addAll(t.OrcaResponseParser.parseList(e.asList(),i,n,r,s))}else{o=e.asList();a=t.OrcaResponseParser.parseList(o,i,n,r,s)}return a},getTotalResourceCount:function(e){let r=-1;if(e.getType()===t.PrElementType.STRUCTURE){let i=e.asStructure().containsKey(t.OrcaResourceConstants.INFO);let n=e.asStructure().getStructureByKey(t.OrcaResourceConstants.INFO);r=i?n.getIntegerByKey(t.OrcaResourceConstants.TOTAL_RESOURCE_COUNT):-1}return r},parseList:function(e,r,i,n,s){let o=t.XList.create();let a=e.size();for(let l=0;l<a;l++){let a=e.get(l);if(a.isStructure()){o.add(t.OrcaFile.create(a,r,i,n));let e=null;if(t.notNull(s)&&t.XString.isEqual(s.getName(),t.OrcaResourceConstants.RECENT_FILES_VIRTUAL_FOLDER)){e=t.OrcaResourceConstants.ANCESTOR_PATH}t.OrcaResponseParser.generateFilesInPath(a,i,r,n,e)}}return o}};t.ContentlibQueryData=function(){};t.ContentlibQueryData.prototype=new t.XObjectExt;t.ContentlibQueryData.prototype._ff_c="ContentlibQueryData";t.ContentlibQueryData.create=function(e){let r=new t.ContentlibQueryData;r.m_targetName=e.getTargetName();r.m_resourceType=e.getResourceType();r.m_content=e.getContent();r.m_resourceIds=e.getResourceIds();r.m_file=e.getFile();r.m_queryConfig=e.getQueryConfig();r.m_privateFolder=e.getPrivateFolder();r.m_accessState=e.getAccessState();r.m_sendEmailNotification=e.getSendEmailNotification();r.m_isAllUsersWithExistingAccess=e.getIsAllUsersWithExistingAccess();r.m_interopLinkParameters=e.getLinkParameters();return r};t.ContentlibQueryData.prototype.m_accessState=null;t.ContentlibQueryData.prototype.m_content=null;t.ContentlibQueryData.prototype.m_file=null;t.ContentlibQueryData.prototype.m_interopLinkParameters=null;t.ContentlibQueryData.prototype.m_isAllUsersWithExistingAccess=false;t.ContentlibQueryData.prototype.m_privateFolder=null;t.ContentlibQueryData.prototype.m_queryConfig=null;t.ContentlibQueryData.prototype.m_resourceIds=null;t.ContentlibQueryData.prototype.m_resourceType=null;t.ContentlibQueryData.prototype.m_sendEmailNotification=false;t.ContentlibQueryData.prototype.m_targetName=null;t.ContentlibQueryData.prototype.appendLinkPayloadAndReturnContentlibStruct=function(e){e.putString(t.OrcaResourceConstants.ACTION,t.OrcaResourceConstants.CREATE_LINK);let r=e.putNewStructure(t.OrcaResourceConstants.DATA);r.putBoolean(t.OrcaResourceConstants.LINK_GENERATE_END_NODE,true);let i=r.putNewList(t.OrcaResourceConstants.DATA_ANALYZER_LINK_PATH_NODES);let n=i.addNewStructure();n.putString(t.OrcaResourceConstants.DATA_ANALYZER_LINK_ID_PARAM,this.m_interopLinkParameters.getStoryId());n.putString(t.OrcaResourceConstants.DATA_ANALYZER_LINK_TYPE_PARAM,t.OrcaResourceConstants.RESOURCE_TYPE_STORY);if(t.XStringUtils.isNotNullAndNotEmpty(this.m_interopLinkParameters.getCompositeId())){let e=i.addNewStructure();e.putString(t.OrcaResourceConstants.DATA_ANALYZER_LINK_ID_PARAM,this.m_interopLinkParameters.getCompositeId());e.putString(t.OrcaResourceConstants.DATA_ANALYZER_LINK_TYPE_PARAM,t.OrcaResourceConstants.RESOURCE_TYPE_COMPOSITE)}let s=i.addNewStructure();s.putString(t.OrcaResourceConstants.DATA_ANALYZER_LINK_ID_PARAM,this.m_interopLinkParameters.getWidgetId());s.putString(t.OrcaResourceConstants.DATA_ANALYZER_LINK_TYPE_PARAM,this.m_interopLinkParameters.getWidgetType());let o=i.addNewStructure();o.putString(t.OrcaResourceConstants.DATA_ANALYZER_LINK_ID_PARAM,this.m_interopLinkParameters.getDatasourceId());o.putString(t.OrcaResourceConstants.DATA_ANALYZER_LINK_TYPE_PARAM,t.OrcaResourceConstants.RESOURCE_TYPE_MODEL);let a=r.putNewStructure(t.OrcaResourceConstants.DATA_ANALYZER_LINK_END_NDOE);a.putString(t.OrcaResourceConstants.DATA_ANALYZER_LINK_TYPE_PARAM,t.OrcaResourceConstants.RESOURCE_TYPE_INSIGHT);return a.putNewStructure(t.OrcaResourceConstants.DATA_ANALYZER_LINK_REQUEST_DATA)};t.ContentlibQueryData.prototype.createLink=function(){return t.notNull(this.m_interopLinkParameters)};t.ContentlibQueryData.prototype.getAccessState=function(){return this.m_accessState};t.ContentlibQueryData.prototype.getContent=function(){return this.m_content};t.ContentlibQueryData.prototype.getFile=function(){return this.m_file};t.ContentlibQueryData.prototype.getIsAllUsersWithExistingAccess=function(){return this.m_isAllUsersWithExistingAccess};t.ContentlibQueryData.prototype.getPrivateFolder=function(){return this.m_privateFolder};t.ContentlibQueryData.prototype.getQueryConfig=function(){return this.m_queryConfig};t.ContentlibQueryData.prototype.getResourceIds=function(){return this.m_resourceIds};t.ContentlibQueryData.prototype.getResourceType=function(){return this.m_resourceType};t.ContentlibQueryData.prototype.getSendEmailNotification=function(){return this.m_sendEmailNotification};t.ContentlibQueryData.prototype.getTargetName=function(){return this.m_targetName};t.ContentlibQueryDataBuilder=function(){};t.ContentlibQueryDataBuilder.prototype=new t.XObjectExt;t.ContentlibQueryDataBuilder.prototype._ff_c="ContentlibQueryDataBuilder";t.ContentlibQueryDataBuilder.create=function(){let e=new t.ContentlibQueryDataBuilder;return e};t.ContentlibQueryDataBuilder.prototype.m_accessState=null;t.ContentlibQueryDataBuilder.prototype.m_content=null;t.ContentlibQueryDataBuilder.prototype.m_file=null;t.ContentlibQueryDataBuilder.prototype.m_interopLinkParameters=null;t.ContentlibQueryDataBuilder.prototype.m_isAllUsersWithExistingAccess=false;t.ContentlibQueryDataBuilder.prototype.m_privateFolder=null;t.ContentlibQueryDataBuilder.prototype.m_queryConfig=null;t.ContentlibQueryDataBuilder.prototype.m_resourceIds=null;t.ContentlibQueryDataBuilder.prototype.m_resourceType=null;t.ContentlibQueryDataBuilder.prototype.m_sendEmailNotification=false;t.ContentlibQueryDataBuilder.prototype.m_targetName=null;t.ContentlibQueryDataBuilder.prototype.build=function(){return t.ContentlibQueryData.create(this)};t.ContentlibQueryDataBuilder.prototype.getAccessState=function(){return this.m_accessState};t.ContentlibQueryDataBuilder.prototype.getContent=function(){return this.m_content};t.ContentlibQueryDataBuilder.prototype.getFile=function(){return this.m_file};t.ContentlibQueryDataBuilder.prototype.getIsAllUsersWithExistingAccess=function(){return this.m_isAllUsersWithExistingAccess};t.ContentlibQueryDataBuilder.prototype.getLinkParameters=function(){return this.m_interopLinkParameters};t.ContentlibQueryDataBuilder.prototype.getPrivateFolder=function(){return this.m_privateFolder};t.ContentlibQueryDataBuilder.prototype.getQueryConfig=function(){return this.m_queryConfig};t.ContentlibQueryDataBuilder.prototype.getResourceIds=function(){return this.m_resourceIds};t.ContentlibQueryDataBuilder.prototype.getResourceType=function(){return this.m_resourceType};t.ContentlibQueryDataBuilder.prototype.getSendEmailNotification=function(){return this.m_sendEmailNotification};t.ContentlibQueryDataBuilder.prototype.getTargetName=function(){return this.m_targetName};t.ContentlibQueryDataBuilder.prototype.setAccessState=function(t){this.m_accessState=t;return this};t.ContentlibQueryDataBuilder.prototype.setContent=function(t){this.m_content=t;return this};t.ContentlibQueryDataBuilder.prototype.setFile=function(t){this.m_file=t;return this};t.ContentlibQueryDataBuilder.prototype.setIsAllUsersWithExistingAccess=function(t){this.m_isAllUsersWithExistingAccess=t;return this};t.ContentlibQueryDataBuilder.prototype.setLinkParameters=function(e){if(t.notNull(e)&&e.containsKey(t.XFileAttribute.SAC_INTEROP_STORY_ID)){this.m_interopLinkParameters=t.LinkPathParameters.createFromFileAttrs(e)}return this};t.ContentlibQueryDataBuilder.prototype.setPrivateFolder=function(t){this.m_privateFolder=t;return this};t.ContentlibQueryDataBuilder.prototype.setQueryConfig=function(t){this.m_queryConfig=t;return this};t.ContentlibQueryDataBuilder.prototype.setResourceIds=function(t){this.m_resourceIds=t;return this};t.ContentlibQueryDataBuilder.prototype.setResourceType=function(t){this.m_resourceType=t;return this};t.ContentlibQueryDataBuilder.prototype.setSendEmailNotification=function(t){this.m_sendEmailNotification=t;return this};t.ContentlibQueryDataBuilder.prototype.setTargetName=function(t){this.m_targetName=t;return this};t.LinkPathParameters=function(){};t.LinkPathParameters.prototype=new t.XObjectExt;t.LinkPathParameters.prototype._ff_c="LinkPathParameters";t.LinkPathParameters.createFromFileAttrs=function(e){let r=new t.LinkPathParameters;r.m_storyId=e.getStringByKey(t.XFileAttribute.SAC_INTEROP_STORY_ID);r.m_compositeId=e.getStringByKey(t.XFileAttribute.SAC_INTEROP_COMPOSITE_ID);r.m_widgetId=e.getStructureReadOnlyByKey(t.XFileAttribute.SAC_INTEROP_WIDGET_ID).getStringByKey("id");r.m_widgetType=e.getStructureReadOnlyByKey(t.XFileAttribute.SAC_INTEROP_WIDGET_ID).getStringByKey("type");r.m_datasourceId=e.getStringByKey(t.XFileAttribute.SAC_INTEROP_DATASOURCE_ID);return r};t.LinkPathParameters.prototype.m_compositeId=null;t.LinkPathParameters.prototype.m_datasourceId=null;t.LinkPathParameters.prototype.m_storyId=null;t.LinkPathParameters.prototype.m_widgetId=null;t.LinkPathParameters.prototype.m_widgetType=null;t.LinkPathParameters.prototype.getCompositeId=function(){return this.m_compositeId};t.LinkPathParameters.prototype.getDatasourceId=function(){return this.m_datasourceId};t.LinkPathParameters.prototype.getStoryId=function(){return this.m_storyId};t.LinkPathParameters.prototype.getWidgetId=function(){return this.m_widgetId};t.LinkPathParameters.prototype.getWidgetType=function(){return this.m_widgetType};t.MetadataRequestGenerator=function(){};t.MetadataRequestGenerator.prototype=new t.XObjectExt;t.MetadataRequestGenerator.prototype._ff_c="MetadataRequestGenerator";t.MetadataRequestGenerator.create=function(){let e=new t.MetadataRequestGenerator;return e};t.MetadataRequestGenerator.prototype.addMetadataRequest=function(e,r,i){let n=e.putNewStructure(r);n.putBoolean(t.OrcaResourceConstants.NAME,true);n.putBoolean(t.OrcaResourceConstants.DESCRIPTION,true);n.putBoolean(t.OrcaResourceConstants.OWNER_ID,true);n.putBoolean(t.OrcaResourceConstants.OWNER_TYPE,true);n.putBoolean(t.OrcaResourceConstants.CREATED_TIME,true);n.putBoolean(t.OrcaResourceConstants.CREATED_BY,true);n.putBoolean(t.OrcaResourceConstants.MODIFIED_BY,true);n.putBoolean(t.OrcaResourceConstants.MODIFIED_TIME,true);n.putBoolean(t.OrcaResourceConstants.RESOURCE_TYPE,true);n.putBoolean(t.OrcaResourceConstants.RESOURCE_SUBTYPE,true);n.putBoolean(t.OrcaResourceConstants.RESOURCE_ID,true);n.putBoolean(t.OrcaResourceConstants.PARENT_RES_ID,true);n.putBoolean(t.OrcaResourceConstants.SOURCE_RES_ID,true);n.putBoolean(t.OrcaResourceConstants.SOURCE_RESOURCE,true);n.putBoolean(t.OrcaResourceConstants.MOBILE_SUPPORT,true);n.putBoolean(t.OrcaResourceConstants.ACCESS,true);n.putBoolean(t.OrcaResourceConstants.UPDATE_COUNTER,true);n.putBoolean(t.OrcaResourceConstants.IS_REMOTE,true);n.putBoolean(t.OrcaResourceConstants.CAPABILITY,true);n.putBoolean(t.OrcaResourceConstants.AUTH,true);n.putBoolean(t.OrcaResourceConstants.PACKAGE_ID,true);n.putBoolean(t.OrcaResourceConstants.PROPERTIES,true);n.putBoolean(t.OrcaResourceConstants.ORIG_LANGUAGE,true);n.putBoolean(t.OrcaResourceConstants.TRANSLATION_ENABLED,true);n.putBoolean(t.OrcaResourceConstants.FEATURED,true);n.putBoolean(t.OrcaResourceConstants.FAV_RES_ID,true);n.putBoolean(t.OrcaResourceConstants.SHARED,true);n.putBoolean(t.OrcaResourceConstants.SHARED_RES_ID,true);n.putBoolean(t.OrcaResourceConstants.EXCEPTION_NOT_THROWN_FOR_NO_ACCESS,true);n.putBoolean(t.OrcaResourceConstants.EPM_OBJECT_DATA,false);n.putBoolean(t.OrcaResourceConstants.OBJECT_ID,true);n.putBoolean("userAuthOnly",true);if(t.notNull(i)){let e=i.getProviderMetadata().getStringByKey(t.XFileAttribute.UNIQUE_ID);let r=t.XString.isEqual(e,t.OrcaResourceConstants.RECENT_FILES_VIRTUAL_FOLDER);if(r){let e=n.putNewStructure(t.OrcaResourceConstants.ANCESTOR_PATH);e.putBoolean(t.OrcaResourceConstants.NAME,true);e.putBoolean(t.OrcaResourceConstants.DESCRIPTION,true);e.putBoolean(t.OrcaResourceConstants.SPACE_ID,true);e.putBoolean(t.OrcaResourceConstants.ACCESS,true);e.putBoolean(t.OrcaResourceConstants.PARENT_RES_ID,true);e.putBoolean(t.OrcaResourceConstants.OWNER_TYPE,true);e.putBoolean(t.OrcaResourceConstants.RESOURCE_TYPE,true);e.putBoolean(t.OrcaResourceConstants.AUTH,true)}else{n.putBoolean(t.OrcaResourceConstants.ANCESTOR_INFO,true)}}else{n.putBoolean(t.OrcaResourceConstants.ANCESTOR_INFO,true)}let s=n.putNewList(t.OrcaResourceConstants.ENHANCED_PROPERTIES);s.addString(t.OrcaResourceConstants.DATA_ANALYZER_INFO)};t.QueryFilterGenerator=function(){};t.QueryFilterGenerator.prototype=new t.XObjectExt;t.QueryFilterGenerator.prototype._ff_c="QueryFilterGenerator";t.QueryFilterGenerator.create=function(){let e=new t.QueryFilterGenerator;return e};t.QueryFilterGenerator.prototype.addFilter=function(e,r){if(t.notNull(r)){let i=r.getCartesianFilter();if(t.isNull(i)||i.size()===0){return}let n=e.getStructureByKey(t.OrcaResourceConstants.DATA);let s=n.putNewList(t.OrcaResourceConstants.FILTER);let o=this.getSupportedFilters(i);for(let t=0;t<o.size();t++){s.add(this.getContentlibFilter(o.get(t)))}}};t.QueryFilterGenerator.prototype.getContentlibFilter=function(e){let r=t.PrFactory.createStructure();if(t.XString.isEqual(t.XFileAttribute.NODE_TYPE,e.getName())){r.putString(t.OrcaResourceConstants.KEYWORD,t.OrcaResourceConstants.FILTER_RESOURCE_TYPE);r.putString(t.OrcaResourceConstants.VALUE,e.getValue())}else if(t.XString.isEqual(t.XFileAttribute.CREATED_BY,e.getName())){let i=t.XString.isEqual(e.getType().getName(),t.XFileFilterType.NOT.getName())?t.OrcaResourceConstants.FILTER_NOT_CREATED_BY:t.OrcaResourceConstants.FILTER_CREATED_BY;r.putString(t.OrcaResourceConstants.KEYWORD,i);r.putString(t.OrcaResourceConstants.VALUE,e.getValue())}return r};t.QueryFilterGenerator.prototype.getSupportedFilters=function(e){let r=t.XList.create();let i=false;let n=false;let s=t.OrcaContentlibResourceUtils.getSupportedFilterMetadata();let o=s.getKeysAsReadOnlyList();for(let a=0;a<e.size();a++){let l=e.get(a);if(!o.contains(l.getName())){continue}else{let e=s.getStructureByKey(l.getName());let o=e.getListByKey(t.XFileAttribute.SUPPORTED_FILTER_TYPES);let a=t.PrFactory.createString(l.getType().getName());if(o.contains(a)){r.add(l);if(t.XString.isEqual(t.OrcaResourceConstants.RESOURCE_TYPE_FOLDER,l.getValue())){i=true}if(t.XString.isEqual(t.XFileAttribute.NODE_TYPE,l.getName())){n=true}}}}if(!i&&n&&r.size()>0){let e=t.XFileFilterElement.create(t.XFileAttributeDef.NODE_TYPE,t.PrFactory.createStructure());e.setType(t.XFileFilterType.EXACT);e.setValue(t.OrcaResourceConstants.RESOURCE_TYPE_FOLDER);r.add(e)}return r};t.QueryOptionsGenerator=function(){};t.QueryOptionsGenerator.prototype=new t.XObjectExt;t.QueryOptionsGenerator.prototype._ff_c="QueryOptionsGenerator";t.QueryOptionsGenerator.create=function(){let e=new t.QueryOptionsGenerator;return e};t.QueryOptionsGenerator.prototype.addOptions=function(e,r,i,n){let s=e.getStructureByKey(t.OrcaResourceConstants.DATA);let o=s.putNewStructure(i);let a=o.putNewList(t.OrcaResourceConstants.FETCH_ENHANCED_PROPERTIES);a.addString(t.OrcaResourceConstants.DATA_ANALYZER_INFO);if(t.notNull(r)){if(r.getMaxItems()>-1){o.putInteger(t.OrcaResourceConstants.LIMIT,r.getMaxItems());if(r.getOffset()>-1){o.putInteger(t.OrcaResourceConstants.OFFSET,r.getOffset())}else{o.putInteger(t.OrcaResourceConstants.OFFSET,0)}}if(r.getSingleSortDef()!==null){let e=o.putNewStructure(t.OrcaResourceConstants.SORT);e.putString(t.OrcaResourceConstants.KEY,t.OrcaContentlibResourceUtils.getContentlibAttributeFromFileAttribute(r.getSingleSortDef().getAttributeName()));let i=r.getSingleSortDef().getDirection();e.putBoolean(t.OrcaResourceConstants.DESCENDING,i===t.XSortDirection.DESCENDING)}}o.putBoolean(t.OrcaResourceConstants.INCLUDE_TOTAL_RESOURCE_COUNT,true);this.setTypeOptions(o,n)};t.QueryOptionsGenerator.prototype.setTypeOptions=function(e,r){if(t.isNull(r)){return}if(t.XString.isEqual(t.OrcaResourceConstants.RESOURCE_TYPE_CUBE,r)){e.putBoolean("addMetadata",false);e.putBoolean("addLastUpdated",true);e.putBoolean("detail",true);e.putBoolean("visualization",true);e.putBoolean("rate",true);e.putBoolean("listFormula",true);e.putBoolean("listVersion",true);e.putBoolean("inclSubObjectTypes",true);e.putBoolean("planningFeatures",true);e.putBoolean("translateCustomizedDescription",true);let t=e.putNewStructure("planning");t.putBoolean("checks",true);e.putBoolean("needDimensionValidationRules",true)}};t.AncestorsAndSubNodes=function(){};t.AncestorsAndSubNodes.prototype=new t.XObjectExt;t.AncestorsAndSubNodes.prototype._ff_c="AncestorsAndSubNodes";t.AncestorsAndSubNodes.create=function(e,r){let i=new t.AncestorsAndSubNodes;i.m_filterGenerator=e;i.m_optionsGenerator=r;return i};t.AncestorsAndSubNodes.prototype.m_filterGenerator=null;t.AncestorsAndSubNodes.prototype.m_optionsGenerator=null;t.AncestorsAndSubNodes.prototype.getPayload=function(e){if(t.isNull(e)){throw t.XException.createIllegalArgumentException("Query Data is required so that the ancestors and subnodes of the folder can be fetched")}if(e.getFile()===null){throw t.XException.createIllegalArgumentException("A file object must be provided so that the getAncestorAndSubNodes query can be generated")}if(!e.getFile().isDirectory()){throw t.XException.createIllegalArgumentException("You cannot do a getAncestorsAndSubNodes call on a normal file, only a folder")}let r=e.getFile().getProviderMetadata().getStringByKey(t.XFileAttribute.UNIQUE_ID);if(t.XStringUtils.isNullOrEmpty(r)){throw t.XException.createIllegalArgumentException("A non-null and non empty resource id must be provided for the folder when running the getAncestorAndSubNodes query")}let i=t.PrFactory.createStructure();i.putString(t.OrcaResourceConstants.ACTION,t.OrcaResourceConstants.GET_ANCESTOR_AND_SUB_NODES);let n=i.putNewStructure(t.OrcaResourceConstants.DATA);n.putString(t.OrcaResourceConstants.RESOURCE_ID,r);n.putBoolean("detail",false);n.putNewList("filter");n.putBoolean("bIncTemporary",true);n.putBoolean("allowAuthOverride",false);n.putBoolean("fetchAncestorNodes",true);n.putBoolean("showContentSharedWithUser",true);this.m_optionsGenerator.addOptions(i,e.getQueryConfig(),t.OrcaResourceConstants.OPTIONS,null);this.m_filterGenerator.addFilter(i,e.getQueryConfig());return i};t.CreateContent=function(){};t.CreateContent.prototype=new t.XObjectExt;t.CreateContent.prototype._ff_c="CreateContent";t.CreateContent.create=function(e){let r=new t.CreateContent;r.m_resolver=e;return r};t.CreateContent.prototype.m_resolver=null;t.CreateContent.prototype.appendContentlibPayload=function(e,r){let i=e.getFile();let n=e.getContent().getJsonContent().asStructure();let s=t.PrUtils.serialize(n,true,false,0);r.putString(t.OrcaResourceConstants.ACTION,t.OrcaResourceConstants.CREATE_CONTENT);let o=r.putNewStructure(t.OrcaResourceConstants.DATA);let a=i.getProviderMetadata().getStringByKeyExt(t.XFileAttribute.PARENT_UNIQUE_ID,i.getProviderParent().getName());let l=this.m_resolver.resolveParentId(a,i.getFsBase().getPrivateFolderName());if(t.XStringUtils.isNullOrEmpty(l)){throw t.XException.createIllegalArgumentException("A parent resource id must be provided so that the file can be saved in a known folder.")}o.putString(t.OrcaResourceConstants.PARENT_RES_ID,l);let c=t.XStringUtils.isNullOrEmpty(e.getResourceType())?e.getResourceType():i.getProviderMetadata().getStringByKey(t.XFileAttribute.NODE_TYPE);o.putString(t.OrcaResourceConstants.RESOURCE_TYPE,c);if(i.getProviderMetadata().containsKey(t.XFileAttribute.NODE_SUB_TYPE)){o.putString(t.OrcaResourceConstants.RESOURCE_SUBTYPE,i.getProviderMetadata().getStringByKey(t.XFileAttribute.NODE_SUB_TYPE))}o.putString(t.OrcaResourceConstants.NAME,i.getName());o.putString(t.OrcaResourceConstants.DESCRIPTION,i.getProviderMetadata().getStringByKey(t.XFileAttribute.DESCRIPTION));o.putString(t.OrcaResourceConstants.CDATA,s);if(t.XString.isEqual(t.OrcaResourceConstants.RESOURCE_TYPE_INSIGHT,i.getProviderMetadata().getStringByKeyExt(t.XFileAttribute.NODE_SUB_TYPE,null))){let e=o.putNewStructure(t.OrcaResourceConstants.CREATE_OPTIONS);let r=e.putNewStructure(t.OrcaResourceConstants.ENHANCED_PROPERTIES);r.putString(t.OrcaResourceConstants.DATA_ANALYZER_INFO,t.OrcaResourceConstants.DATA_ANALYZER_ENHANCED_PROPERTY)}};t.CreateContent.prototype.getPayload=function(e){if(t.isNull(e)){throw t.XException.createIllegalArgumentException("Query Data is required so that the content can be fetched for the given file")}if(e.getFile()===null){throw t.XException.createIllegalArgumentException("An orca file object is required so that the content can be fetched for the given file")}if(e.getFile().isDirectory()){throw t.XException.createIllegalArgumentException("You cannot do a createContent call on a folder")}if(e.getContent()===null){throw t.XException.createIllegalArgumentException("Content must be provided so that the file can be saved")}let r=t.PrFactory.createStructure();if(e.createLink()){let t=e.appendLinkPayloadAndReturnContentlibStruct(r);this.appendContentlibPayload(e,t)}else{this.appendContentlibPayload(e,r)}return r};t.CreateFolder=function(){};t.CreateFolder.prototype=new t.XObjectExt;t.CreateFolder.prototype._ff_c="CreateFolder";t.CreateFolder.create=function(e){let r=new t.CreateFolder;r.m_resolver=e;return r};t.CreateFolder.prototype.m_resolver=null;t.CreateFolder.prototype.getPayload=function(e){if(t.isNull(e)){throw t.XException.createIllegalArgumentException("Query Data is required so that the folder can be created")}let r=e.getFile();if(t.isNull(r)){throw t.XException.createIllegalArgumentException("An orca file object is required for syncing (creating) the in-memory object against the backend")}let i=r.getProviderParent();let n=i.getProviderMetadata().getStringByKeyExt(t.XFileAttribute.UNIQUE_ID,r.getProviderParent().getName());let s=r.getProviderMetadata().getStringByKeyExt(t.XFileAttribute.DISPLAY_NAME,r.getName());let o=r.getProviderMetadata().getStringByKeyExt(t.XFileAttribute.DESCRIPTION,"");let a=t.PrFactory.createStructure();a.putString(t.OrcaResourceConstants.ACTION,t.OrcaResourceConstants.CREATE_FOLDER);let l=a.putNewStructure(t.OrcaResourceConstants.DATA);let c=this.m_resolver.resolveParentId(n,r.getFsBase().getPrivateFolderName());if(t.XStringUtils.isNullOrEmpty(c)){throw t.XException.createIllegalArgumentException("A non-empty, and non null parent resource id is required for the createFolder query")}if(t.XStringUtils.isNullOrEmpty(s)){throw t.XException.createIllegalArgumentException("A non-empty, and non null name is required for the createFolder query")}l.putString(t.OrcaResourceConstants.PARENT_RES_ID,c);l.putString(t.OrcaResourceConstants.NAME,s);l.putString(t.OrcaResourceConstants.DESCRIPTION,o);return a};t.GetAccessDetails=function(){};t.GetAccessDetails.prototype=new t.XObjectExt;t.GetAccessDetails.prototype._ff_c="GetAccessDetails";t.GetAccessDetails.create=function(){let e=new t.GetAccessDetails;return e};t.GetAccessDetails.prototype.getPayload=function(e){if(t.isNull(e)){throw t.XException.createIllegalArgumentException("Query Data is required so we can get access rights of a file")}let r=e.getFile();if(t.isNull(r)){throw t.XException.createIllegalArgumentException("An orca file object is required so that we can get access rights on it from the backend")}let i=r.getProviderMetadata().getStringByKey(t.XFileAttribute.UNIQUE_ID);if(t.XStringUtils.isNullOrEmpty(i)){throw t.XException.createIllegalArgumentException("A resource id is required when fetching access rights on a file in contentlib")}let n=t.PrFactory.createStructure();n.putString("action","getAccessDetails");let s=n.putNewStructure("data");let o=s.putNewList("resourceIds");o.addString(i);let a=s.putNewStructure("queryParameters");let l=e.getQueryConfig();if(t.notNull(l)){a.putInteger("offset",l.getOffset());a.putInteger("limit",l.getMaxItems());if(l.getSearchValue()!==null){a.putString("name",l.getSearchValue())}else{a.putString("name","")}}else{a.putInteger("offset",0);a.putString("name","")}let c=s.putNewList("spaces");c.addString("");let u=s.putNewStructure("options");let E=u.putNewStructure("localizedTypeStrings");E.putString("team","Team");E.putString("space","SPACE");u.putBoolean("principalAuthOverride",true);u.putNewList("excludeUserIds");return n};t.GetContent=function(){};t.GetContent.prototype=new t.XObjectExt;t.GetContent.prototype._ff_c="GetContent";t.GetContent.create=function(e){let r=new t.GetContent;r.m_optionsGenerator=e;return r};t.GetContent.prototype.m_optionsGenerator=null;t.GetContent.prototype.getPayload=function(e){if(t.isNull(e)){throw t.XException.createIllegalArgumentException("Query Data is required so that the content can be fetched")}let r=e.getFile();if(t.isNull(r)){throw t.XException.createIllegalArgumentException("An orca file object is required so that the content can be fetched for the given file")}if(r.isDirectory()){throw t.XException.createIllegalArgumentException("You cannot fetch the content of a folder")}let i=r.getProviderMetadata().getStringByKey(t.XFileAttribute.NODE_TYPE);let n=t.XString.isEqual(t.OrcaResourceConstants.RESOURCE_TYPE_LINK,i);let s=r.getName();if(n){s=r.getLinkedFile().getName();i=r.getLinkedFile().getProviderMetadata().getStringByKey(t.XFileAttribute.NODE_TYPE);r=r.getLinkedFile()}if(t.XStringUtils.isNullOrEmpty(s)){throw t.XException.createIllegalArgumentException("A resource id is required for running the getContent call")}let o=t.PrFactory.createStructure();o.putString(t.OrcaResourceConstants.ACTION,t.OrcaResourceConstants.GET_CONTENT);let a=o.putNewStructure(t.OrcaResourceConstants.DATA);a.putString(t.OrcaResourceConstants.RESOURCE_ID,s);a.putString(t.OrcaResourceConstants.RESOURCE_TYPE,i);a.putBoolean("bIncDependency",true);this.m_optionsGenerator.addOptions(o,null,t.OrcaResourceConstants.O_OPTIONS,i);return o};t.GetResourceEx=function(){};t.GetResourceEx.prototype=new t.XObjectExt;t.GetResourceEx.prototype._ff_c="GetResourceEx";t.GetResourceEx.create=function(e){let r=new t.GetResourceEx;r.m_metadataGenerator=e;return r};t.GetResourceEx.prototype.m_metadataGenerator=null;t.GetResourceEx.prototype.getPayload=function(e){if(t.isNull(e)){throw t.XException.createIllegalArgumentException("Query Data is required so that the getResourceEx call can be completed")}let r=e.getFile();if(t.isNull(r)){throw t.XException.createIllegalArgumentException("An orca file object must be provided so that we can fetch the attributes/metadata for the given file")}let i=r.getProviderMetadata().getStringByKeyExt(t.XFileAttribute.UNIQUE_ID,r.getName());if(t.XStringUtils.isNullOrEmpty(i)){throw t.XException.createIllegalArgumentException("A resource id must be provided for fetching the metadata of a file on contentlib")}let n=t.PrFactory.createStructure();n.putString(t.OrcaResourceConstants.ACTION,t.OrcaResourceConstants.GET_RESOURCE_EX);let s=n.putNewStructure(t.OrcaResourceConstants.DATA);this.m_metadataGenerator.addMetadataRequest(s,t.OrcaResourceConstants.METADATA,r);let o=s.getStructureByKey(t.OrcaResourceConstants.METADATA);let a=o.putNewStructure(t.OrcaResourceConstants.ANCESTOR_PATH);a.putBoolean(t.OrcaResourceConstants.ACCESS,true);a.putBoolean(t.OrcaResourceConstants.NAME,true);a.putBoolean(t.OrcaResourceConstants.DESCRIPTION,true);a.putBoolean(t.OrcaResourceConstants.CREATED_TIME,true);a.putBoolean(t.OrcaResourceConstants.CREATED_BY,true);a.putBoolean(t.OrcaResourceConstants.MODIFIED_BY,true);a.putBoolean(t.OrcaResourceConstants.MODIFIED_TIME,true);a.putBoolean(t.OrcaResourceConstants.RESOURCE_TYPE,true);a.putBoolean(t.OrcaResourceConstants.RESOURCE_SUBTYPE,true);s.putString(t.OrcaResourceConstants.RESOURCE_ID,i);return n};t.GetResourceWithNameExists=function(){};t.GetResourceWithNameExists.prototype=new t.XObjectExt;t.GetResourceWithNameExists.prototype._ff_c="GetResourceWithNameExists";t.GetResourceWithNameExists.create=function(e){let r=new t.GetResourceWithNameExists;r.m_resolver=e;return r};t.GetResourceWithNameExists.prototype.m_resolver=null;t.GetResourceWithNameExists.prototype.getPayload=function(e){if(t.isNull(e)){throw t.XException.createIllegalArgumentException("Query Data is required so that we can check if a file exists")}let r=e.getFile();if(t.isNull(r)){throw t.XException.createIllegalArgumentException("An orca file object is required so that we can check for its existence on the server")}let i=r.getProviderMetadata().getStringByKeyExt(t.XFileAttribute.DISPLAY_NAME,r.getName());let n=t.XString.isEqual(r.getProviderParent().getName(),t.OrcaResourceConstants.MY_FILES_VIRTUAL_FOLDER)?r.getFsBase().getPrivateFolderName():r.getProviderParent().getName();let s=r.getProviderMetadata().getStringByKeyExt(t.XFileAttribute.PARENT_UNIQUE_ID,n);let o=this.m_resolver.resolveParentId(s,r.getFsBase().getPrivateFolderName());let a=r.getProviderMetadata().getStringByKey(t.XFileAttribute.NODE_TYPE);let l=t.PrFactory.createStructure();l.putString(t.OrcaResourceConstants.ACTION,t.OrcaResourceConstants.GET_RESOURCE_WITH_NAME_EXISTS);let c=l.putNewStructure(t.OrcaResourceConstants.DATA);c.putString(t.OrcaResourceConstants.NAME,i);c.putString(t.OrcaResourceConstants.PARENT_RES_ID,o);c.putString(t.OrcaResourceConstants.RESOURCE_TYPE,a);return l};t.GetSubNodes=function(){};t.GetSubNodes.prototype=new t.XObjectExt;t.GetSubNodes.prototype._ff_c="GetSubNodes";t.GetSubNodes.create=function(e,r){let i=new t.GetSubNodes;i.m_filterGenerator=e;i.m_optionsGenerator=r;return i};t.GetSubNodes.prototype.m_filterGenerator=null;t.GetSubNodes.prototype.m_optionsGenerator=null;t.GetSubNodes.prototype.getPayload=function(e){let r=t.isNull(e)?null:e.getQueryConfig();let i=t.PrFactory.createStructure();i.putString(t.OrcaResourceConstants.ACTION,t.OrcaResourceConstants.GET_SUB_NODES);let n=i.putNewStructure(t.OrcaResourceConstants.DATA);n.putString(t.OrcaResourceConstants.RESOURCE_ID,t.OrcaResourceConstants.WORKSPACE);this.m_filterGenerator.addFilter(i,r);this.m_optionsGenerator.addOptions(i,r,t.OrcaResourceConstants.OPTIONS,null);return i};t.RecentFiles=function(){};t.RecentFiles.prototype=new t.XObjectExt;t.RecentFiles.prototype._ff_c="RecentFiles";t.RecentFiles.create=function(e,r,i){let n=new t.RecentFiles;n.m_searchAllResourcesQuery=e;n.m_filterGenerator=r;n.m_optionsGenerator=i;return n};t.RecentFiles.prototype.m_filterGenerator=null;t.RecentFiles.prototype.m_optionsGenerator=null;t.RecentFiles.prototype.m_searchAllResourcesQuery=null;t.RecentFiles.prototype.getPayload=function(e){if(t.isNull(e)){throw t.XException.createIllegalArgumentException("Query Data is required so that we can load the recent files")}let r=e.getQueryConfig();let i=t.OrcaResourceConstants.RESOURCE_TYPE_STORY;let n=t.OrcaResourceConstants.RESOURCE_TYPE_INSIGHT;let s=this.m_searchAllResourcesQuery.getPayload(e);let o=s.getStructureByKey(t.OrcaResourceConstants.DATA);let a=o.putNewStructure(t.OrcaResourceConstants.SEARCH_CRITERIA);a.putInteger(t.OrcaResourceConstants.RECENTLY_ACCESSED,60);a.putString(t.OrcaResourceConstants.RESOURCE_TYPES,t.OrcaResourceConstants.RESOURCE_TYPE_STORY);let l=a.putNewStructure(t.OrcaResourceConstants.RESOURCE_TYPES_EXTENDED);if(t.XStringUtils.isNotNullAndNotEmpty(n)){l.putString(i,n)}this.m_filterGenerator.addFilter(s,r);this.m_optionsGenerator.addOptions(s,r,t.OrcaResourceConstants.OPTIONS,null);return s};t.RenameResource=function(){};t.RenameResource.prototype=new t.XObjectExt;t.RenameResource.prototype._ff_c="RenameResource";t.RenameResource.create=function(){let e=new t.RenameResource;return e};t.RenameResource.prototype.getPayload=function(e){if(t.isNull(e)){throw t.XException.createIllegalArgumentException("Query Data is required so we can rename a file")}let r=e.getFile();if(t.isNull(r)){throw t.XException.createIllegalArgumentException("An orca file object is required so that we can rename it on the backend")}if(t.XStringUtils.isNullOrEmpty(e.getTargetName())){throw t.XException.createIllegalArgumentException("A target name is required when renaming a file in contentlib")}let i=r.getProviderMetadata().getStringByKey(t.XFileAttribute.UNIQUE_ID);if(t.XStringUtils.isNullOrEmpty(i)){throw t.XException.createIllegalArgumentException("A resource id is required when renaming a file in contentlib")}let n=t.PrFactory.createStructure();n.putString(t.OrcaResourceConstants.ACTION,t.OrcaResourceConstants.RENAME_RESOURCE);let s=n.putNewStructure(t.OrcaResourceConstants.DATA);s.putString("resourceId",i);s.putString("name",e.getTargetName());let o=s.putNewStructure("updateOpt");o.putBoolean("onRemote",true);return n};t.RepoView=function(){};t.RepoView.prototype=new t.XObjectExt;t.RepoView.prototype._ff_c="RepoView";t.RepoView.create=function(e,r){let i=new t.RepoView;i.m_filterGenerator=e;i.m_optionsGenerator=r;return i};t.RepoView.prototype.m_filterGenerator=null;t.RepoView.prototype.m_optionsGenerator=null;t.RepoView.prototype.getPayload=function(e){if(t.isNull(e)){throw t.XException.createIllegalArgumentException("Query Data is required so that the children of the root folder can be fetched")}let r=e.getQueryConfig();if(t.XStringUtils.isNullOrEmpty(e.getPrivateFolder())){throw t.XException.createIllegalArgumentException("The private folder name is required for running the repo view query")}let i=e.getPrivateFolder();let n=t.PrFactory.createStructure();n.putString(t.OrcaResourceConstants.ACTION,t.OrcaResourceConstants.GET_REPO_VIEW);let s=n.putNewStructure(t.OrcaResourceConstants.DATA);s.putString(t.OrcaResourceConstants.RESOURCE_ID,i);s.putBoolean("detail",false);s.putNewList("filter");s.putBoolean("bIncTemporary",true);s.putBoolean("allowAuthOverride",false);s.putBoolean("fetchAncestorNodes",true);s.putBoolean("showContentSharedWithUser",true);this.m_optionsGenerator.addOptions(n,r,t.OrcaResourceConstants.OPTIONS,null);this.m_filterGenerator.addFilter(n,r);return n};t.SearchAllResources=function(){};t.SearchAllResources.prototype=new t.XObjectExt;t.SearchAllResources.prototype._ff_c="SearchAllResources";t.SearchAllResources.create=function(e,r,i){let n=new t.SearchAllResources;n.m_filterGenerator=e;n.m_optionsGenerator=r;n.m_metadataGenerator=i;n.populateSearchOrderAttributes();return n};t.SearchAllResources.prototype.m_attributeMap=null;t.SearchAllResources.prototype.m_filterGenerator=null;t.SearchAllResources.prototype.m_metadataGenerator=null;t.SearchAllResources.prototype.m_optionsGenerator=null;t.SearchAllResources.prototype.getPayload=function(e){if(t.isNull(e)){throw t.XException.createIllegalArgumentException("Query Data is required so that we can perform a search")}let r=e.getFile();let i=e.getQueryConfig();if(t.isNull(r)){throw t.XException.createIllegalArgumentException("An orca file is required so that we can search within it on the backend")}if(!r.isDirectory()){throw t.XException.createIllegalArgumentException("You can only search within a folder, not a file")}let n=t.XString.isEqual(r.getName(),t.OrcaResourceConstants.CATALOG_VIRTUAL_FOLDER);let s=r.getFsBase().getPrivateFolderName();let o=t.PrFactory.createStructure();o.putString(t.OrcaResourceConstants.ACTION,t.OrcaResourceConstants.SEARCH_ALL_RESOURCES);let a=o.putNewStructure(t.OrcaResourceConstants.DATA);a.putBoolean(t.OrcaResourceConstants.ALLOW_AUTH_OVERRIDE,false);let l=a.putNewStructure(t.OrcaResourceConstants.SEARCH_CRITERIA);let c=l.putNewStructure(t.OrcaResourceConstants.PARENT_RESOURCE_IDS);let u=r.getProviderMetadata().getStringByKey(t.XFileAttribute.UNIQUE_ID);if(t.XString.isEqual(u,s)||n){let e=c.putNewStructure(t.OrcaResourceConstants.RESOURCE_ID_PUBLIC);e.putBoolean(t.OrcaResourceConstants.INCLUDE_SELF,n?false:true);let r=c.putNewStructure(t.OrcaResourceConstants.RESOURCE_ID_SHARED);r.putBoolean(t.OrcaResourceConstants.INCLUDE_SELF,false);let i=c.putNewStructure(t.OrcaResourceConstants.RESOURCE_ID_INPUT_SCHEDULE);i.putBoolean(t.OrcaResourceConstants.INCLUDE_SELF,n?false:true);let o=c.putNewStructure(t.OrcaResourceConstants.RESOURCE_ID_SAMPLES);o.putBoolean(t.OrcaResourceConstants.INCLUDE_SELF,n?false:true);let a=c.putNewStructure(t.OrcaResourceConstants.RESOURCE_ID_TEAMS);a.putBoolean(t.OrcaResourceConstants.INCLUDE_SELF,false);let l=c.putNewStructure(s);l.putBoolean(t.OrcaResourceConstants.INCLUDE_SELF,false)}if(!n){let e=c.putNewStructure(u);e.putBoolean(t.OrcaResourceConstants.INCLUDE_SELF,false)}let E=t.OrcaResourceConstants.RESOURCE_TYPE_FOLDER;if(n){l.putBoolean(t.OrcaResourceConstants.PUBLISHED_READABLE,true)}else{l.putString(t.OrcaResourceConstants.SEARCH_VALUE,r.getProviderMetadata().getStringByKey(t.XFileAttribute.DISPLAY_NAME))}if(t.notNull(i)){if(t.XStringUtils.isNotNullAndNotEmpty(i.getSearchValue())){l.putString(t.OrcaResourceConstants.SEARCH_VALUE,i.getSearchValue())}this.m_optionsGenerator.addOptions(o,i,t.OrcaResourceConstants.OPTIONS,null);let e=this.m_filterGenerator.getSupportedFilters(i.getCartesianFilter());if(e.size()>0){let r="";let i="";E="";let n="";for(let s=0;s<e.size();s++){let o=e.get(s);if(t.XString.isEqual(o.getName(),t.XFileAttribute.NODE_TYPE)){n=o.getValue();E=t.XStringUtils.isNotNullAndNotEmpty(E)?t.XStringUtils.concatenate3(E,";",n):n}else if(t.XString.isEqual(o.getName(),t.XFileAttribute.CREATED_BY)){n=e.get(s).getValue();if(t.XString.isEqual(o.getType().getName(),t.XFileFilterType.NOT.getName())){r=t.XStringUtils.isNotNullAndNotEmpty(r)?t.XStringUtils.concatenate3(r,";",n):n}else{i=t.XStringUtils.isNotNullAndNotEmpty(i)?t.XStringUtils.concatenate3(i,";",n):n}}}l.putStringNotNullAndNotEmpty(t.OrcaResourceConstants.RESOURCE_TYPES,E);l.putStringNotNullAndNotEmpty(t.OrcaResourceConstants.CREATED_BY_SEARCH_FILTER,i);l.putStringNotNullAndNotEmpty(t.OrcaResourceConstants.NOT_CREATED_BY_SEARCH_FILTER,r)}}else{let e=a.putNewStructure(t.OrcaResourceConstants.OPTIONS);e.putInteger(t.OrcaResourceConstants.LIMIT,150);e.putInteger(t.OrcaResourceConstants.OFFSET,0);e.putBoolean(t.OrcaResourceConstants.INCLUDE_TOTAL_RESOURCE_COUNT,true)}let A=a.putNewStructure(t.OrcaResourceConstants.SORT_DEFINITION);let _=t.OrcaResourceConstants.NAME;let R=t.OrcaResourceConstants.ASCENDING;if(t.notNull(i)&&i.getSingleSortDef()!==null&&t.XStringUtils.isNotNullAndNotEmpty(i.getSingleSortDef().getAttributeName())){_=this.getSearchOrderAttribute(i.getSingleSortDef().getAttributeName());let e=i.getSingleSortDef().getDirection();R=e===t.XSortDirection.DESCENDING?t.OrcaResourceConstants.DESCENDING:t.OrcaResourceConstants.ASCENDING}A.putString(t.OrcaResourceConstants.ORDER_BY,_);A.putString(t.OrcaResourceConstants.DIRECTION,R);this.m_metadataGenerator.addMetadataRequest(a,t.OrcaResourceConstants.METADATA_DEFINITION,r);return o};t.SearchAllResources.prototype.getSearchOrderAttribute=function(t){let e=this.m_attributeMap.getByKey(t)!==null?this.m_attributeMap.getByKey(t):"name";return e};t.SearchAllResources.prototype.populateSearchOrderAttributes=function(){this.m_attributeMap=t.XHashMapByString.create();this.m_attributeMap.put(t.XFileAttribute.UNIQUE_ID,"RESOURCE_ID");this.m_attributeMap.put(t.XFileAttribute.CHANGED_BY,"MODIFIED_BY");this.m_attributeMap.put(t.XFileAttribute.CHANGED_AT,"MODIFIED_TIME");this.m_attributeMap.put(t.XFileAttribute.PARENT_UNIQUE_ID,"PARENT_RES_ID");this.m_attributeMap.put(t.XFileAttribute.UPDATE_COUNT,"UPDATE_COUNTER");this.m_attributeMap.put(t.XFileAttribute.NODE_TYPE,"RESOURCE_TYPE");this.m_attributeMap.put(t.XFileAttribute.CREATED_BY,"CREATED_BY");this.m_attributeMap.put(t.XFileAttribute.CREATED_AT,"CREATED_TIME");this.m_attributeMap.put(t.XFileAttribute.OWNER_FOLDER,"OWNER_ID");this.m_attributeMap.put(t.XFileAttribute.DISPLAY_NAME,"name")};t.ShareFile=function(){};t.ShareFile.prototype=new t.XObjectExt;t.ShareFile.prototype._ff_c="ShareFile";t.ShareFile.create=function(){let e=new t.ShareFile;return e};t.ShareFile.prototype.getPayload=function(e){if(t.isNull(e)){throw t.XException.createIllegalArgumentException("Query Data is required so we can share a file")}let r=e.getFile();if(t.isNull(r)){throw t.XException.createIllegalArgumentException("An orca file object is required so that we can share it")}let i=r.getProviderMetadata().getStringByKey(t.XFileAttribute.UNIQUE_ID);if(t.XStringUtils.isNullOrEmpty(i)){throw t.XException.createIllegalArgumentException("A resource id is required when sharing a file in contentlib")}let n=t.PrFactory.createStructure();let s=e.getAccessState();let o=0;let a=s.getAllAccess();let l=a.getKeysAsReadOnlyList().get(0);let c=a.getByKey(l);let u=t.OrcaFileAccessStateBuilder.create();for(let t=0;t<c.getKeysAsReadOnlyList().size();t++){let e=c.getKeysAsReadOnlyList().get(t);if(c.getByKey(e).getBoolean()){o=o+u.getAccessNumber(e)}}if(e.getIsAllUsersWithExistingAccess()){n.putString("action","setBulkShare");let r=n.putNewStructure("data");r.putString("syncUsers","ADDITIVE");r.putBoolean("syncDescendents",false);r.putString("userSelection","EXCLUSIVE");let s=r.putNewStructure("access");s.putInteger("access",o);r.putNewList("resourceIds").addString(i);r.putBoolean("applyOwnerAccess",false);r.putString("name","");r.putNewList("users").addString(e.getFile().getProviderMetadata().getStringByKey(t.XFileAttribute.CREATED_BY));let a=r.putNewStructure("oOpt");a.putBoolean("generateAltNotification",false)}else{n.putString("action","setUserShare");let t=n.putNewStructure("data");t.putString("syncUsers","ADDITIVE");t.putBoolean("syncDescendents",false);let r=t.putNewStructure("access");let s=r.putNewStructure(i);for(let t=0;t<a.size();t++){let e=s.putNewStructure(a.getKeysAsReadOnlyList().get(t));e.putInteger("access",o)}let l=t.putNewStructure("oOpt");l.putBoolean("generateAltNotification",false);l.putBoolean("sendEmailNotification",e.getSendEmailNotification())}return n};t.SpaceView=function(){};t.SpaceView.prototype=new t.XObjectExt;t.SpaceView.prototype._ff_c="SpaceView";t.SpaceView.create=function(e,r){let i=new t.SpaceView;i.m_filterGenerator=e;i.m_optionsGenerator=r;return i};t.SpaceView.prototype.m_filterGenerator=null;t.SpaceView.prototype.m_optionsGenerator=null;t.SpaceView.prototype.getPayload=function(e){if(t.isNull(e)){throw t.XException.createIllegalArgumentException("Query Data is required so that we can load the root folder of a workspace")}let r=e.getFile();let i=e.getQueryConfig();if(t.isNull(r)){throw t.XException.createIllegalArgumentException("An orca file object is required for fetching the root folder within a workspace")}let n=t.PrFactory.createStructure();n.putString(t.OrcaResourceConstants.ACTION,t.OrcaResourceConstants.GET_SPACE_VIEW);let s=n.putNewStructure(t.OrcaResourceConstants.DATA);let o=t.XStringUtils.concatenate2(t.OrcaResourceConstants.RESOURCE_ID_WORKSPACE_SUFFIX,r.getFsBase().getUserName());let a=r.getProviderMetadata().getStringByKey(t.XFileAttribute.UNIQUE_ID);a=t.XString.substring(a,0,t.XString.size(a)-t.XString.size(t.OrcaResourceConstants.RESOURCE_ID_ROOT));let l=t.XStringUtils.concatenate2(a,o);s.putString(t.OrcaResourceConstants.RESOURCE_ID,l);this.m_filterGenerator.addFilter(n,i);this.m_optionsGenerator.addOptions(n,i,t.OrcaResourceConstants.OPTIONS,null);return n};t.StageDeleteList=function(){};t.StageDeleteList.prototype=new t.XObjectExt;t.StageDeleteList.prototype._ff_c="StageDeleteList";t.StageDeleteList.create=function(){let e=new t.StageDeleteList;return e};t.StageDeleteList.prototype.getPayload=function(e){if(t.isNull(e)){throw t.XException.createIllegalArgumentException("Query Data is required so that we can delete a list of files")}if(e.getResourceIds()===null||e.getResourceIds().isEmpty()){throw t.XException.createIllegalArgumentException("A list of resource ids must be provided for deletion")}let r=t.PrFactory.createStructure();r.putString(t.OrcaResourceConstants.ACTION,t.OrcaResourceConstants.STAGE_DELETE_LIST);let i=r.putNewStructure(t.OrcaResourceConstants.DATA);let n=i.putNewStructure("deleteOpt");n.putBoolean("onRemote",true);let s=i.putNewList("resourceIds");s.addAllStrings(e.getResourceIds());return r};t.UpdateContent=function(){};t.UpdateContent.prototype=new t.XObjectExt;t.UpdateContent.prototype._ff_c="UpdateContent";t.UpdateContent.create=function(){let e=new t.UpdateContent;return e};t.UpdateContent.prototype.appendContentlibPayload=function(e,r){let i=e.getFile();let n=i.getProviderMetadata().getStringByKeyExt(t.XFileAttribute.UNIQUE_ID,i.getName());if(t.XStringUtils.isNullOrEmpty(n)){throw t.XException.createIllegalArgumentException("A resource id is required when updating a file's content")}let s=e.getContent().getJsonContent().asStructure();let o=t.PrUtils.serialize(s,true,false,0);r.putString(t.OrcaResourceConstants.ACTION,t.OrcaResourceConstants.UPDATE_CONTENT);let a=r.putNewStructure(t.OrcaResourceConstants.DATA);a.putString(t.OrcaResourceConstants.RESOURCE_ID,n);a.putString(t.OrcaResourceConstants.NAME,i.getProviderMetadata().getStringByKey(t.XFileAttribute.DISPLAY_NAME));a.putString(t.OrcaResourceConstants.DESCRIPTION,i.getProviderMetadata().getStringByKey(t.XFileAttribute.DESCRIPTION));a.putString(t.OrcaResourceConstants.CDATA,o);a.putInteger(t.OrcaResourceConstants.MOBILE_SUPPORT,i.getProviderMetadata().getIntegerByKey(t.XFileAttribute.MOBILE_SUPPORT));if(t.XString.isEqual(t.OrcaResourceConstants.RESOURCE_TYPE_INSIGHT,i.getProviderMetadata().getStringByKeyExt(t.XFileAttribute.NODE_SUB_TYPE,null))){let e=a.putNewStructure(t.OrcaResourceConstants.UPDATE_OPTIONS);let r=e.putNewStructure(t.OrcaResourceConstants.ENHANCED_PROPERTIES);r.putString(t.OrcaResourceConstants.DATA_ANALYZER_INFO,t.OrcaResourceConstants.DATA_ANALYZER_ENHANCED_PROPERTY)}};t.UpdateContent.prototype.getPayload=function(e){if(t.isNull(e)){throw t.XException.createIllegalArgumentException("Query Data is required so we can update a file's content")}if(e.getFile()===null){throw t.XException.createIllegalArgumentException("An orca file is required so that it can be updated on the server")}if(e.getFile().isDirectory()){throw t.XException.createIllegalArgumentException("You cannot do an updateContent call on a folder")}if(e.getContent()===null){throw t.XException.createIllegalArgumentException("Content must be provided so that the file can be updated")}let r=t.PrFactory.createStructure();if(e.createLink()){let t=e.appendLinkPayloadAndReturnContentlibStruct(r);this.appendContentlibPayload(e,t)}else{this.appendContentlibPayload(e,r)}return r};t.ResourceIdResolver=function(){};t.ResourceIdResolver.prototype=new t.XObjectExt;t.ResourceIdResolver.prototype._ff_c="ResourceIdResolver";t.ResourceIdResolver.create=function(){let e=new t.ResourceIdResolver;return e};t.ResourceIdResolver.prototype.resolveParentId=function(e,r){let i=e;if(t.XString.endsWith(i,"_ROOT")){i=t.XString.replace(i,"_ROOT",t.XStringUtils.concatenate2("_",r))}if(t.XString.endsWith(i,"__SHARED")){i=t.XString.replace(i,"__SHARED","")}return i};t.OrcaContentlibResourceUtils=function(){};t.OrcaContentlibResourceUtils.prototype=new t.XObjectExt;t.OrcaContentlibResourceUtils.prototype._ff_c="OrcaContentlibResourceUtils";t.OrcaContentlibResourceUtils.INVISIBLE_FOLDERS=null;t.OrcaContentlibResourceUtils.METADATA_MAP=null;t.OrcaContentlibResourceUtils.assertResourceId=function(e){if(t.XStringUtils.isNullOrEmpty(e)){throw t.XException.createIllegalArgumentException("Resource id must be non-null and non-empty")}};t.OrcaContentlibResourceUtils.canFolderShowInUi=function(e){t.OrcaContentlibResourceUtils.assertResourceId(e);let r=true;if(t.isNull(t.OrcaContentlibResourceUtils.INVISIBLE_FOLDERS)){t.OrcaContentlibResourceUtils.populateInvisibleFolders()}if(t.OrcaContentlibResourceUtils.INVISIBLE_FOLDERS.contains(e)||t.XStringUtils.isNullOrEmpty(e)){r=false}return r};t.OrcaContentlibResourceUtils.checkAuth=function(e,r){if(e.getStructureByKey(t.OrcaResourceConstants.AUTH)===null||e.getStructureByKey(t.OrcaResourceConstants.AUTH).isEmpty()){return false}let i=e.getStructureByKey(t.OrcaResourceConstants.AUTH);if(t.XString.isEqual(t.OrcaResourceConstants.RESOURCE_TYPE_LINK,e.getStringByKey(t.OrcaResourceConstants.RESOURCE_TYPE))){let r=e.getStructureByKey(t.OrcaResourceConstants.SOURCE_RESOURCE);if(t.notNull(r)&&r.getStructureByKey(t.OrcaResourceConstants.AUTH)!==null){i=r.getStructureByKey(t.OrcaResourceConstants.AUTH)}}let n=i.getBooleanByKey(r);return n};t.OrcaContentlibResourceUtils.getContentlibAttributeFromFileAttribute=function(e){if(t.isNull(t.OrcaContentlibResourceUtils.METADATA_MAP)||t.OrcaContentlibResourceUtils.METADATA_MAP.isEmpty()){t.OrcaContentlibResourceUtils.setupUtils()}return t.OrcaContentlibResourceUtils.METADATA_MAP.getByKey(e)};t.OrcaContentlibResourceUtils.getSupportedFilterMetadata=function(){let e=t.PrFactory.createStructure();let r=e.putNewStructure(t.XFileAttribute.NODE_TYPE);let i=r.putNewList(t.XFileAttribute.SUPPORTED_FILTER_TYPES);i.addString(t.XFileFilterType.EXACT.getName());let n=e.putNewStructure(t.XFileAttribute.CREATED_BY);let s=n.putNewList(t.XFileAttribute.SUPPORTED_FILTER_TYPES);s.addString(t.XFileFilterType.EXACT.getName());s.addString(t.XFileFilterType.NOT.getName());return e};t.OrcaContentlibResourceUtils.isFolder=function(e){return t.XString.isEqual(e.getStringByKey(t.OrcaResourceConstants.RESOURCE_TYPE),t.OrcaResourceConstants.RESOURCE_TYPE_FOLDER)};t.OrcaContentlibResourceUtils.isInputFormsFolder=function(e){t.OrcaContentlibResourceUtils.assertResourceId(e);let r=t.XString.endsWith(e,t.OrcaResourceConstants.RESOURCE_ID_INPUT_SCHEDULE)&&!t.OrcaContentlibResourceUtils.isPrivateFolder(e);let i=t.XString.isEqual(e,t.OrcaResourceConstants.RESOURCE_ID_INPUT_SCHEDULE);return i||r};t.OrcaContentlibResourceUtils.isPrivateFolder=function(e){t.OrcaContentlibResourceUtils.assertResourceId(e);let r=t.XString.indexOf(e,t.OrcaResourceConstants.PRIVATE_FOLDER_PREFIX)>-1;return r};t.OrcaContentlibResourceUtils.isUsersPrivateFolder=function(e,r){t.OrcaContentlibResourceUtils.assertResourceId(e);let i=t.XStringUtils.concatenate2(t.OrcaResourceConstants.PRIVATE_FOLDER_PREFIX,r);return t.XString.isEqual(e,i)};t.OrcaContentlibResourceUtils.isWorkspaceResource=function(e){let r=false;if(e.containsKey(t.OrcaResourceConstants.SPACE_ID)){r=true;let i=e.getStringByKey(t.OrcaResourceConstants.SPACE_ID);if(t.XStringUtils.isNullOrEmpty(i)){r=false}}return r};t.OrcaContentlibResourceUtils.populateInvisibleFolders=function(){let e=t.XList.create();e.add(t.OrcaResourceConstants.RESOURCE_ID_SYSTEM);e.add(t.OrcaResourceConstants.RESOURCE_ID_TEAMS);e.add(t.OrcaResourceConstants.RESOURCE_ID_SPACE);e.add(t.OrcaResourceConstants.RESOURCE_ID_WORKSPACE);e.add(t.OrcaResourceConstants.RESOURCE_ID_ROOT);e.add(t.OrcaResourceConstants.RESOURCE_ID_SHARED);t.OrcaContentlibResourceUtils.INVISIBLE_FOLDERS=e};t.OrcaContentlibResourceUtils.setupUtils=function(){t.OrcaContentlibResourceUtils.METADATA_MAP=t.XHashMapByString.create();t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.UNIQUE_ID,t.OrcaResourceConstants.RESOURCE_ID);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.DISPLAY_NAME,t.OrcaResourceConstants.NAME);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.NAME,t.OrcaResourceConstants.NAME);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.DESCRIPTION,t.OrcaResourceConstants.DESCRIPTION);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.CREATED_BY,t.OrcaResourceConstants.CREATED_BY);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.NODE_TYPE,t.OrcaResourceConstants.RESOURCE_TYPE);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.NODE_SUB_TYPE,t.OrcaResourceConstants.RESOURCE_SUBTYPE);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.OWNER_TYPE,t.OrcaResourceConstants.OWNER_TYPE);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.PARENT_UNIQUE_ID,t.OrcaResourceConstants.PARENT_RES_ID);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.UPDATE_COUNT,t.OrcaResourceConstants.UPDATE_COUNTER);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.ORIGINAL_LANGUAGE,t.OrcaResourceConstants.ORIG_LANGUAGE);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.PACKAGE_ID,t.OrcaResourceConstants.PACKAGE_ID);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.MOBILE_SUPPORT,t.OrcaResourceConstants.MOBILE_SUPPORT);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.CHANGED_BY,t.OrcaResourceConstants.MODIFIED_BY);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.CREATED_AT,t.OrcaResourceConstants.CREATED_TIME);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.CHANGED_AT,t.OrcaResourceConstants.MODIFIED_TIME);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.CREATED_BY_DISPLAY_NAME,t.OrcaResourceConstants.CREATED_BY_DISPLAY_NAME);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.CHANGED_BY_DISPLAY_NAME,t.OrcaResourceConstants.MODIFIED_BY_DISPLAY_NAME);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.IS_SHARED,t.OrcaResourceConstants.IS_SHARED);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.SHARED_TO_ANY,t.OrcaResourceConstants.SHARED_TO_ANY);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.SHARED,t.OrcaResourceConstants.SHARED);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.SHAREABLE,t.OrcaResourceConstants.CAN_SHARE);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.OWNER_FOLDER,t.OrcaResourceConstants.OWNER_ID);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.CAN_ASSIGN,t.OrcaResourceConstants.AUTH_ASSIGN);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.CAN_READ,t.OrcaResourceConstants.AUTH_READ);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.CAN_UPDATE,t.OrcaResourceConstants.AUTH_UPDATE);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.CAN_DELETE,t.OrcaResourceConstants.AUTH_DELETE);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.CAN_CREATE_DOC,t.OrcaResourceConstants.AUTH_CREATE_DOC);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.CAN_CREATE_FOLDER,t.OrcaResourceConstants.AUTH_CREATE_FOLDER);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.CAN_COPY,t.OrcaResourceConstants.AUTH_COPY);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.CAN_COMMENT_VIEW,t.OrcaResourceConstants.AUTH_COMMENT_VIEW);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.CAN_COMMENT_ADD,t.OrcaResourceConstants.AUTH_COMMENT_ADD);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.CAN_COMMENT_DELETE,t.OrcaResourceConstants.AUTH_COMMENT_DELETE);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.CAN_MAINTAIN,t.OrcaResourceConstants.AUTH_MAINTAIN);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.CAN_COMMENT_VIEW,t.OrcaResourceConstants.AUTH_COMMENT_VIEW);t.OrcaContentlibResourceUtils.METADATA_MAP.put(t.XFileAttribute.CAN_COMMENT_VIEW,t.OrcaResourceConstants.AUTH_COMMENT_VIEW)};t.OrcaContentlibResourceUtils.shouldIgnoreQuickFilters=function(e){t.OrcaContentlibResourceUtils.assertResourceId(e);return t.XString.isEqual(e,t.OrcaResourceConstants.RESOURCE_ID_SAMPLES)};t.OrcaFileAccessStateBuilder=function(){};t.OrcaFileAccessStateBuilder.prototype=new t.XObjectExt;t.OrcaFileAccessStateBuilder.prototype._ff_c="OrcaFileAccessStateBuilder";t.OrcaFileAccessStateBuilder.ASSIGN=1;t.OrcaFileAccessStateBuilder.COMMENT_ADD=256;t.OrcaFileAccessStateBuilder.COMMENT_DELETE=512;t.OrcaFileAccessStateBuilder.COMMENT_VIEW=128;t.OrcaFileAccessStateBuilder.COPY=64;t.OrcaFileAccessStateBuilder.CREATE_DOC=16;t.OrcaFileAccessStateBuilder.CREATE_FOLDER=32;t.OrcaFileAccessStateBuilder.DELETE=8;t.OrcaFileAccessStateBuilder.DENY=0;t.OrcaFileAccessStateBuilder.READ=2;t.OrcaFileAccessStateBuilder.UPDATE=4;t.OrcaFileAccessStateBuilder.create=function(){let e=new t.OrcaFileAccessStateBuilder;return e};t.OrcaFileAccessStateBuilder.prototype.getAccess=function(e,r){let i=t.XMath.binaryAnd(e,t.OrcaFileAccessStateBuilder.READ)!==0;let n=t.XMath.binaryAnd(e,t.OrcaFileAccessStateBuilder.COPY)!==0;let s=t.XMath.binaryAnd(e,t.OrcaFileAccessStateBuilder.COMMENT_VIEW)!==0;let o=t.XMath.binaryAnd(e,t.OrcaFileAccessStateBuilder.COMMENT_ADD)!==0;let a=t.XMath.binaryAnd(e,t.OrcaFileAccessStateBuilder.COMMENT_DELETE)!==0;let l=t.XMath.binaryAnd(e,t.OrcaFileAccessStateBuilder.UPDATE)!==0;let c=t.XMath.binaryAnd(e,t.OrcaFileAccessStateBuilder.ASSIGN)!==0;let u=t.XMath.binaryAnd(e,t.OrcaFileAccessStateBuilder.DELETE)!==0;let E=t.XFileAccessState.create();E.setUserAccess(r,t.XFileAccess.READ,i);E.setUserAccess(r,t.XFileAccess.COPY,n);E.setUserAccess(r,t.XFileAccess.VIEW_COMMENT,s);E.setUserAccess(r,t.XFileAccess.ADD_COMMENT,o);E.setUserAccess(r,t.XFileAccess.DELETE_COMMENT,a);E.setUserAccess(r,t.XFileAccess.UPDATE,l);E.setUserAccess(r,t.XFileAccess.SHARE,c);E.setUserAccess(r,t.XFileAccess.DELETE,u);return E};t.OrcaFileAccessStateBuilder.prototype.getAccessNumber=function(e){let r=0;if(e.isEqualTo(t.XFileAccess.READ)){r=t.OrcaFileAccessStateBuilder.READ}else if(e.isEqualTo(t.XFileAccess.COPY)){r=t.OrcaFileAccessStateBuilder.COPY}else if(e.isEqualTo(t.XFileAccess.VIEW_COMMENT)){r=t.OrcaFileAccessStateBuilder.COMMENT_VIEW}else if(e.isEqualTo(t.XFileAccess.ADD_COMMENT)){r=t.OrcaFileAccessStateBuilder.COMMENT_ADD}else if(e.isEqualTo(t.XFileAccess.UPDATE)){r=t.OrcaFileAccessStateBuilder.UPDATE}else if(e.isEqualTo(t.XFileAccess.CREATE)){r=t.OrcaFileAccessStateBuilder.CREATE_DOC}else if(e.isEqualTo(t.XFileAccess.SHARE)){r=t.OrcaFileAccessStateBuilder.ASSIGN}else if(e.isEqualTo(t.XFileAccess.DELETE)){r=t.OrcaFileAccessStateBuilder.DELETE}else if(e.isEqualTo(t.XFileAccess.DELETE_COMMENT)){r=t.OrcaFileAccessStateBuilder.COMMENT_DELETE}return r};t.OrcaFileMetadataUtils=function(){};t.OrcaFileMetadataUtils.prototype=new t.XObjectExt;t.OrcaFileMetadataUtils.prototype._ff_c="OrcaFileMetadataUtils";t.OrcaFileMetadataUtils.create=function(){let e=new t.OrcaFileMetadataUtils;e.setupUtils();return e};t.OrcaFileMetadataUtils.createWithFile=function(e){let r=new t.OrcaFileMetadataUtils;r.m_file=e;r.setupUtils();return r};t.OrcaFileMetadataUtils.prototype.m_file=null;t.OrcaFileMetadataUtils.prototype.m_metadata=null;t.OrcaFileMetadataUtils.prototype.m_metadataMap=null;t.OrcaFileMetadataUtils.prototype.addFilePathMetadata=function(e){let r=e.containsKey(t.OrcaResourceConstants.ANCESTOR_RESOURCE)&&!e.getListByKey(t.OrcaResourceConstants.ANCESTOR_RESOURCE).isEmpty();let i=e.containsKey(t.OrcaResourceConstants.ANCESTOR_PATH)&&!e.getListByKey(t.OrcaResourceConstants.ANCESTOR_PATH).isEmpty()&&e.getListByKey(t.OrcaResourceConstants.ANCESTOR_PATH).getElementTypeAt(0)===t.PrElementType.STRUCTURE;let n="";if(r){n=t.OrcaResourceConstants.ANCESTOR_RESOURCE}else if(i){n=t.OrcaResourceConstants.ANCESTOR_PATH}let s=e.containsKey("shareResId")&&t.XStringUtils.isNotNullAndNotEmpty(e.getStringByKey("shareResId"));if(t.XStringUtils.isNotNullAndNotEmpty(n)){let r=t.XLocalizationCenter.getCenter();let i=t.OrcaContentlibResourceUtils.isWorkspaceResource(e);let s=i?t.OrcaResourceConstants.WORKSPACES_VIRTUAL_FOLDER:t.OrcaResourceConstants.MY_FILES_VIRTUAL_FOLDER;let o=i?r.getText(t.ContentlibLocalizationProvider.CONTENTLIB_WORKSPACES_DISPLAY_NAME):r.getText(t.ContentlibLocalizationProvider.CONTENTLIB_MY_FILES_DISPLAY_NAME);let a=t.XStringUtils.concatenate2("/",s);let l=e.getListByKey(n);let c=this.m_metadata.putNewList(t.XFileAttribute.ANCESTOR_RESOURCE);let u=c.addNewStructure();u.putString(t.XFileAttribute.UNIQUE_ID,s);u.putString(t.XFileAttribute.DISPLAY_NAME,o);let E=t.XString.isEqual(e.getStringByKey(t.OrcaResourceConstants.RESOURCE_ID),t.OrcaResourceConstants.RESOURCE_TYPE_LINK);if(!E){for(let e=0;e<l.size();e++){let r=l.getStructureAt(e);let i=r.getStringByKey(t.OrcaResourceConstants.RESOURCE_ID);if(t.XString.startsWith(i,t.OrcaResourceConstants.PRIVATE_FOLDER_PREFIX)||t.XString.indexOf(i,t.OrcaResourceConstants.PRIVATE_FOLDER_PREFIX)>-1){continue}if(!t.OrcaContentlibResourceUtils.checkAuth(r,t.OrcaResourceConstants.AUTH_READ)||!t.OrcaContentlibResourceUtils.canFolderShowInUi(i)){continue}let n=r.getStringByKey(t.OrcaResourceConstants.NAME);a=t.XStringUtils.concatenate3(a,"/",i);let s=c.addNewStructure();if(this.shouldUseDescriptionAsDisplayName(i)){n=r.getStringByKey(t.OrcaResourceConstants.DESCRIPTION)}s.putString(t.XFileAttribute.UNIQUE_ID,i);s.putString(t.XFileAttribute.DISPLAY_NAME,n)}}a=t.XStringUtils.concatenate3(a,"/",this.m_metadata.getStringByKey(t.XFileAttribute.UNIQUE_ID));this.m_metadata.putBoolean(t.XFileAttribute.IS_LINK,true);if(this.m_file.isDirectory()){a=t.XStringUtils.concatenate2(a,"/")}this.m_metadata.putString(t.XFileAttribute.PROVIDER_LINK_URL,a)}else if(s){let e=t.OrcaResourceConstants.MY_FILES_VIRTUAL_FOLDER;let r=t.OrcaResourceConstants.MY_FILES_DISPLAY_NAME;let i=this.m_metadata.putNewList(t.XFileAttribute.ANCESTOR_RESOURCE);let n=i.addNewStructure();n.putString(t.XFileAttribute.UNIQUE_ID,e);n.putString(t.XFileAttribute.DISPLAY_NAME,r)}else if(this.m_file.isVirtual()){let e=t.XStringUtils.concatenate3("/",this.m_file.getName(),"/");this.m_metadata.putString(t.XFileAttribute.PROVIDER_LINK_URL,e)}};t.OrcaFileMetadataUtils.prototype.addMetadataIfPresent=function(e,r,i){if(t.notNull(e)&&e.containsKey(r)){let n=t.XString.isEqual(t.OrcaResourceConstants.CREATED_TIME,r)||t.XString.isEqual(t.OrcaResourceConstants.MODIFIED_TIME,r);if(i.isString()){this.m_metadata.putString(i.getName(),e.getStringByKey(r))}else if(i.isBoolean()){this.m_metadata.putBoolean(i.getName(),e.getBooleanByKey(r))}else if(i.isInteger()){if(n){let n=e.getStringByKey(r);let s=t.XDateTime.createDateTimeFromIsoFormat(n);this.m_metadata.putLong(i.getName(),s.getMilliseconds())}else{this.m_metadata.putInteger(i.getName(),e.getIntegerByKey(r))}}}};t.OrcaFileMetadataUtils.prototype.getContentlibAttributeFromFileAttribute=function(t){return this.m_metadataMap.getByKey(t)};t.OrcaFileMetadataUtils.prototype.setFileMetadata=function(e){if(t.isNull(e)&&t.isNull(this.m_file)){throw t.XException.createIllegalArgumentException("Cannot set metadata without a valid resource from the contentlib and a valid file")}this.m_metadata=this.m_file.getProviderMetadata();if(t.XStringUtils.isNotNullAndNotEmpty(e.getStringByKey(t.OrcaResourceConstants.RESOURCE_ID))){this.m_file.setProviderIsExisting(true)}this.m_metadata.putString(t.XFileAttribute.HOST_NAME,this.m_file.getFsBase().getHostName());this.m_metadata.putString(t.XFileAttribute.UNIQUE_ID,e.getStringByKey(t.OrcaResourceConstants.RESOURCE_ID));this.m_metadata.putString(t.XFileAttribute.DISPLAY_NAME,e.getStringByKey(t.OrcaResourceConstants.NAME));this.m_metadata.putString(t.XFileAttribute.DESCRIPTION,e.getStringByKey(t.OrcaResourceConstants.DESCRIPTION));this.m_metadata.putString(t.XFileAttribute.ICON,this.m_file.getFsBase().getIconName(e));this.addMetadataIfPresent(e,t.OrcaResourceConstants.OWNER_ID,t.XFileAttributeDef.OWNER_FOLDER);this.addMetadataIfPresent(e,t.OrcaResourceConstants.OWNER_TYPE,t.XFileAttributeDef.OWNER_TYPE);this.addMetadataIfPresent(e,t.OrcaResourceConstants.PARENT_RES_ID,t.XFileAttributeDef.PARENT_UNIQUE_ID);this.addMetadataIfPresent(e,t.OrcaResourceConstants.UPDATE_COUNTER,t.XFileAttributeDef.UPDATE_COUNT);this.addMetadataIfPresent(e,t.OrcaResourceConstants.ORIG_LANGUAGE,t.XFileAttributeDef.ORIGINAL_LANGUAGE);this.addMetadataIfPresent(e,t.OrcaResourceConstants.PACKAGE_ID,t.XFileAttributeDef.PACKAGE_ID);this.addMetadataIfPresent(e,t.OrcaResourceConstants.RESOURCE_TYPE,t.XFileAttributeDef.NODE_TYPE);this.m_file.setIsDirectory(t.OrcaContentlibResourceUtils.isFolder(e));this.addMetadataIfPresent(e,t.OrcaResourceConstants.RESOURCE_SUBTYPE,t.XFileAttributeDef.NODE_SUB_TYPE);this.addMetadataIfPresent(e,t.OrcaResourceConstants.MOBILE_SUPPORT,t.XFileAttributeDef.MOBILE_SUPPORT);this.addMetadataIfPresent(e,t.OrcaResourceConstants.CREATED_BY,t.XFileAttributeDef.CREATED_BY);this.addMetadataIfPresent(e,t.OrcaResourceConstants.MODIFIED_BY,t.XFileAttributeDef.CHANGED_BY);this.addMetadataIfPresent(e,t.OrcaResourceConstants.CREATED_TIME,t.XFileAttributeDef.CREATED_AT);this.addMetadataIfPresent(e,t.OrcaResourceConstants.MODIFIED_TIME,t.XFileAttributeDef.CHANGED_AT);this.addMetadataIfPresent(e,t.OrcaResourceConstants.CREATED_BY_DISPLAY_NAME,t.XFileAttributeDef.CREATED_BY_DISPLAY_NAME);this.addMetadataIfPresent(e,t.OrcaResourceConstants.MODIFIED_BY_DISPLAY_NAME,t.XFileAttributeDef.CHANGED_BY_DISPLAY_NAME);this.addMetadataIfPresent(e,t.OrcaResourceConstants.IS_SHARED,t.XFileAttributeDef.IS_SHARED);this.addMetadataIfPresent(e,t.OrcaResourceConstants.SHARED_TO_ANY,t.XFileAttributeDef.SHARED_TO_ANY);this.addMetadataIfPresent(e,t.OrcaResourceConstants.SHARED,t.XFileAttributeDef.SHARED);this.addMetadataIfPresent(e,t.OrcaResourceConstants.CAN_SHARE,t.XFileAttributeDef.SHAREABLE);this.addMetadataIfPresent(e,t.OrcaResourceConstants.MODIFIED_BY_DISPLAY_NAME,t.XFileAttributeDef.CHANGED_BY_DISPLAY_NAME);this.addMetadataIfPresent(e,t.OrcaResourceConstants.CAN_SHARE,t.XFileAttributeDef.SHAREABLE);this.addMetadataIfPresent(e,t.OrcaResourceConstants.SPACE_ID,t.XFileAttributeDef.SPACE_ID);this.addMetadataIfPresent(e,t.OrcaResourceConstants.OBJECT_ID,t.XFileAttributeDef.SAC_EPM_OBJECT_ID);if(e.containsKey(t.OrcaResourceConstants.AUTH)){let r=e.getStructureByKey(t.OrcaResourceConstants.AUTH);this.addMetadataIfPresent(r,t.OrcaResourceConstants.AUTH_ASSIGN,t.XFileAttributeDef.CAN_ASSIGN);this.addMetadataIfPresent(r,t.OrcaResourceConstants.AUTH_READ,t.XFileAttributeDef.CAN_READ);this.addMetadataIfPresent(r,t.OrcaResourceConstants.AUTH_UPDATE,t.XFileAttributeDef.CAN_UPDATE);this.addMetadataIfPresent(r,t.OrcaResourceConstants.AUTH_DELETE,t.XFileAttributeDef.CAN_DELETE);this.addMetadataIfPresent(r,t.OrcaResourceConstants.AUTH_CREATE_DOC,t.XFileAttributeDef.CAN_CREATE_DOC);this.addMetadataIfPresent(r,t.OrcaResourceConstants.AUTH_CREATE_FOLDER,t.XFileAttributeDef.CAN_CREATE_FOLDER);this.addMetadataIfPresent(r,t.OrcaResourceConstants.AUTH_COPY,t.XFileAttributeDef.CAN_COPY);this.addMetadataIfPresent(r,t.OrcaResourceConstants.AUTH_COMMENT_VIEW,t.XFileAttributeDef.CAN_COMMENT_VIEW);this.addMetadataIfPresent(r,t.OrcaResourceConstants.AUTH_COMMENT_ADD,t.XFileAttributeDef.CAN_COMMENT_ADD);this.addMetadataIfPresent(r,t.OrcaResourceConstants.AUTH_COMMENT_DELETE,t.XFileAttributeDef.CAN_COMMENT_DELETE);this.addMetadataIfPresent(r,t.OrcaResourceConstants.AUTH_MAINTAIN,t.XFileAttributeDef.CAN_MAINTAIN)}if(t.XString.isEqual(t.OrcaResourceConstants.RESOURCE_TYPE_INSIGHT,e.getStringByKeyExt(t.OrcaResourceConstants.RESOURCE_SUBTYPE,null))){this.addMetadataIfPresent(e.getStructureByKey(t.OrcaResourceConstants.ENHANCED_PROPERTIES),t.OrcaResourceConstants.DATA_ANAYZER_INFO_VALUE,t.XFileAttributeDef.SOURCE_PROGRAM)}this.m_metadata.putBoolean(t.XFileAttribute.IGNORE_QUICKFILTERS,t.OrcaContentlibResourceUtils.shouldIgnoreQuickFilters(e.getStringByKey(t.OrcaResourceConstants.RESOURCE_ID)));if(!this.m_metadata.containsKey(t.XFileAttribute.IS_WORKSPACE_FILE)||e.containsKey(t.OrcaResourceConstants.SPACE_ID)){let r=t.OrcaContentlibResourceUtils.isWorkspaceResource(e);this.m_metadata.putBoolean(t.XFileAttribute.IS_WORKSPACE_FILE,r)}this.addFilePathMetadata(e);if(e.containsKey(t.OrcaResourceConstants.CDATA)&&e.getStructureByKey(t.OrcaResourceConstants.CDATA)!==null){this.m_file.getName();let r=t.XContent.createJsonObjectContent(t.ContentType.APPLICATION_JSON,e.getStructureByKey(t.OrcaResourceConstants.CDATA));this.m_file.setProviderFileContent(r)}let r=e.getStructureByKey(t.OrcaResourceConstants.SOURCE_RESOURCE);let i=t.notNull(r)&&!r.isEmpty()&&t.XStringUtils.isNotNullAndNotEmpty(r.getStringByKey(t.OrcaResourceConstants.RESOURCE_ID));let n=this.m_file.isLinkNodeType();if(n&&i){let r=t.OrcaFile.create(e.getStructureByKey(t.OrcaResourceConstants.SOURCE_RESOURCE),this.m_file.getProcess(),this.m_file.getProviderFileSystem(),this.m_file.getUri());this.m_file.setLinkedFile(r);this.m_file.getProviderMetadata().put(t.XFileAttribute.SOURCE_RESOURCE,r.getProviderMetadata());this.m_file.getProviderMetadata().putString(t.XFileAttribute.DISPLAY_NAME,r.getProviderMetadata().getStringByKey(t.XFileAttribute.DISPLAY_NAME));this.m_file.getProviderMetadata().putString(t.XFileAttribute.DESCRIPTION,r.getProviderMetadata().getStringByKey(t.XFileAttribute.DESCRIPTION));this.m_file.getProviderMetadata().putString(t.XFileAttribute.ICON,r.getProviderMetadata().getStringByKey(t.XFileAttribute.ICON))}this.updateFileName();this.updateSharingAttribute()};t.OrcaFileMetadataUtils.prototype.setupUtils=function(){this.m_metadataMap=t.XHashMapByString.create();this.m_metadataMap.put(t.XFileAttribute.UNIQUE_ID,t.OrcaResourceConstants.RESOURCE_ID);this.m_metadataMap.put(t.XFileAttribute.DISPLAY_NAME,t.OrcaResourceConstants.NAME);this.m_metadataMap.put(t.XFileAttribute.NAME,t.OrcaResourceConstants.NAME);this.m_metadataMap.put(t.XFileAttribute.DESCRIPTION,t.OrcaResourceConstants.DESCRIPTION);this.m_metadataMap.put(t.XFileAttribute.CREATED_BY,t.OrcaResourceConstants.CREATED_BY);this.m_metadataMap.put(t.XFileAttribute.NODE_TYPE,t.OrcaResourceConstants.RESOURCE_TYPE);this.m_metadataMap.put(t.XFileAttribute.NODE_SUB_TYPE,t.OrcaResourceConstants.RESOURCE_SUBTYPE);this.m_metadataMap.put(t.XFileAttribute.OWNER_TYPE,t.OrcaResourceConstants.OWNER_TYPE);this.m_metadataMap.put(t.XFileAttribute.PARENT_UNIQUE_ID,t.OrcaResourceConstants.PARENT_RES_ID);this.m_metadataMap.put(t.XFileAttribute.UPDATE_COUNT,t.OrcaResourceConstants.UPDATE_COUNTER);this.m_metadataMap.put(t.XFileAttribute.ORIGINAL_LANGUAGE,t.OrcaResourceConstants.ORIG_LANGUAGE);this.m_metadataMap.put(t.XFileAttribute.PACKAGE_ID,t.OrcaResourceConstants.PACKAGE_ID);this.m_metadataMap.put(t.XFileAttribute.MOBILE_SUPPORT,t.OrcaResourceConstants.MOBILE_SUPPORT);this.m_metadataMap.put(t.XFileAttribute.CHANGED_BY,t.OrcaResourceConstants.MODIFIED_BY);this.m_metadataMap.put(t.XFileAttribute.CREATED_AT,t.OrcaResourceConstants.CREATED_TIME);this.m_metadataMap.put(t.XFileAttribute.CHANGED_AT,t.OrcaResourceConstants.MODIFIED_TIME);this.m_metadataMap.put(t.XFileAttribute.CREATED_BY_DISPLAY_NAME,t.OrcaResourceConstants.CREATED_BY_DISPLAY_NAME);this.m_metadataMap.put(t.XFileAttribute.CHANGED_BY_DISPLAY_NAME,t.OrcaResourceConstants.MODIFIED_BY_DISPLAY_NAME);this.m_metadataMap.put(t.XFileAttribute.IS_SHARED,t.OrcaResourceConstants.IS_SHARED);this.m_metadataMap.put(t.XFileAttribute.SHARED_TO_ANY,t.OrcaResourceConstants.SHARED_TO_ANY);this.m_metadataMap.put(t.XFileAttribute.SHARED,t.OrcaResourceConstants.SHARED);this.m_metadataMap.put(t.XFileAttribute.SHAREABLE,t.OrcaResourceConstants.CAN_SHARE);this.m_metadataMap.put(t.XFileAttribute.OWNER_FOLDER,t.OrcaResourceConstants.OWNER_ID);this.m_metadataMap.put(t.XFileAttribute.CAN_ASSIGN,t.OrcaResourceConstants.AUTH_ASSIGN);this.m_metadataMap.put(t.XFileAttribute.CAN_READ,t.OrcaResourceConstants.AUTH_READ);this.m_metadataMap.put(t.XFileAttribute.CAN_UPDATE,t.OrcaResourceConstants.AUTH_UPDATE);this.m_metadataMap.put(t.XFileAttribute.CAN_DELETE,t.OrcaResourceConstants.AUTH_DELETE);this.m_metadataMap.put(t.XFileAttribute.CAN_CREATE_DOC,t.OrcaResourceConstants.AUTH_CREATE_DOC);this.m_metadataMap.put(t.XFileAttribute.CAN_CREATE_FOLDER,t.OrcaResourceConstants.AUTH_CREATE_FOLDER);this.m_metadataMap.put(t.XFileAttribute.CAN_COPY,t.OrcaResourceConstants.AUTH_COPY);this.m_metadataMap.put(t.XFileAttribute.CAN_COMMENT_VIEW,t.OrcaResourceConstants.AUTH_COMMENT_VIEW);this.m_metadataMap.put(t.XFileAttribute.CAN_COMMENT_ADD,t.OrcaResourceConstants.AUTH_COMMENT_ADD);this.m_metadataMap.put(t.XFileAttribute.CAN_COMMENT_DELETE,t.OrcaResourceConstants.AUTH_COMMENT_DELETE);this.m_metadataMap.put(t.XFileAttribute.CAN_MAINTAIN,t.OrcaResourceConstants.AUTH_MAINTAIN);this.m_metadataMap.put(t.XFileAttribute.CAN_COMMENT_VIEW,t.OrcaResourceConstants.AUTH_COMMENT_VIEW);this.m_metadataMap.put(t.XFileAttribute.CAN_COMMENT_VIEW,t.OrcaResourceConstants.AUTH_COMMENT_VIEW)};t.OrcaFileMetadataUtils.prototype.shouldUseDescriptionAsDisplayName=function(e){let r=t.XList.create();r.add(t.OrcaResourceConstants.RESOURCE_ID_ROOT);r.add(t.OrcaResourceConstants.RESOURCE_ID_PUBLIC);r.add(t.OrcaResourceConstants.RESOURCE_ID_SHARED);r.add(t.OrcaResourceConstants.RESOURCE_ID_TEAMS);r.add(t.OrcaResourceConstants.RESOURCE_ID_USERS);let i=t.OrcaContentlibResourceUtils.isInputFormsFolder(e);let n=this.m_metadata.containsKey(t.XFileAttribute.OWNER_TYPE)&&t.XStringUtils.isNotNullAndNotEmpty(this.m_metadata.getStringByKey(t.XFileAttribute.OWNER_TYPE));let s=t.XString.isEqual(t.OrcaResourceConstants.RESOURCE_ID_SAMPLES,e)&&n;return r.contains(e)||s||i};t.OrcaFileMetadataUtils.prototype.updateFileName=function(){let e=this.m_metadata.getStringByKeyExt(t.XFileAttribute.UNIQUE_ID,"");if(this.shouldUseDescriptionAsDisplayName(e)){this.m_metadata.putString(t.XFileAttribute.DISPLAY_NAME,this.m_metadata.getStringByKey(t.XFileAttribute.DESCRIPTION))}};t.OrcaFileMetadataUtils.prototype.updateSharingAttribute=function(){let e=this.m_metadata.getStringByKeyExt(t.XFileAttribute.UNIQUE_ID,"");let r=t.XList.create();r.add(t.OrcaResourceConstants.RESOURCE_ID_SAMPLES);r.add(t.OrcaResourceConstants.RESOURCE_ID_TEAMS);r.add(t.OrcaResourceConstants.RESOURCE_ID_USERS);r.add(t.OrcaResourceConstants.RESOURCE_ID_INPUT_SCHEDULE);if(r.contains(e)){this.m_metadata.putBoolean(t.XFileAttribute.IS_SHARED,false)}};t.OrcaResponseFilterFactory=function(){};t.OrcaResponseFilterFactory.prototype=new t.XObjectExt;t.OrcaResponseFilterFactory.prototype._ff_c="OrcaResponseFilterFactory";t.OrcaResponseFilterFactory.getDragonflyInsightFilter=function(){return e=>{let r=t.XString.isEqual(t.OrcaResourceConstants.RESOURCE_TYPE_INSIGHT,e.getProviderMetadata().getStringByKeyExt(t.XFileAttribute.NODE_SUB_TYPE,null));let i=r&&t.XString.isEqual(t.OrcaResourceConstants.DATA_ANALYZER_ENHANCED_PROPERTY,e.getProviderMetadata().getStringByKeyExt(t.XFileAttribute.SOURCE_PROGRAM,null));return i}};t.OrcaResponseFilterFactory.getSearchResponseFilterBySubtype=function(){return(e,r)=>{let i=e.getProviderMetadata();let n=i.getStringByKeyExt(t.XFileAttribute.NODE_TYPE,null);let s=i.getStringByKeyExt(t.XFileAttribute.NODE_SUB_TYPE,null);if(t.XString.isEqual(n,t.OrcaResourceConstants.RESOURCE_TYPE_FOLDER)){return true}let o=t.XList.create();let a=t.XList.create();let l=r.getCartesianFilter();for(let e=0;e<l.size();e++){let r=l.get(e);let i=r.getValue();let n=r.getName();if(t.XString.isEqual(n,t.XFileAttribute.NODE_TYPE)){a.add(i)}else if(t.XString.isEqual(n,t.XFileAttribute.NODE_SUB_TYPE)){o.add(i)}}let c=true;if(a.size()>0){c=a.contains(n)}let u=true;if(o.size()>0){c=o.contains(s)}if(c&&u){return true}return false}};t.ContentlibLocalizationProvider=function(){};t.ContentlibLocalizationProvider.prototype=new t.DfXLocalizationProvider;t.ContentlibLocalizationProvider.prototype._ff_c="ContentlibLocalizationProvider";t.ContentlibLocalizationProvider.CONTENTLIB_CATALOG_DISPLAY_NAME="FF_CONTENTLIB_CATALOG_DISPLAY_NAME";t.ContentlibLocalizationProvider.CONTENTLIB_MY_FILES_DISPLAY_NAME="FF_CONTENTLIB_MY_FILES_DISPLAY_NAME";t.ContentlibLocalizationProvider.CONTENTLIB_WORKSPACES_DISPLAY_NAME="FF_CONTENTLIB_WORKSPACES_DISPLAY_NAME";t.ContentlibLocalizationProvider.staticSetup=function(){let e=new t.ContentlibLocalizationProvider;e.setupProvider("ContentlibFS",true);e.addTextWithComment(t.ContentlibLocalizationProvider.CONTENTLIB_MY_FILES_DISPLAY_NAME,"My Files","#XTBS: My Files tab in contentlib");e.addTextWithComment(t.ContentlibLocalizationProvider.CONTENTLIB_CATALOG_DISPLAY_NAME,"Catalog","#XTBS: Catalog tab in contentlib");e.addTextWithComment(t.ContentlibLocalizationProvider.CONTENTLIB_WORKSPACES_DISPLAY_NAME,"Workspaces","#XLST: List item for seeing the Workspaces category in File Repo contents within the space switcher");return e};t.ContentlibRequestAction=function(){};t.ContentlibRequestAction.prototype=new t.XConstant;t.ContentlibRequestAction.prototype._ff_c="ContentlibRequestAction";t.ContentlibRequestAction.CREATE_CONTENT=null;t.ContentlibRequestAction.CREATE_FOLDER=null;t.ContentlibRequestAction.GET_ACCESS_DETAILS=null;t.ContentlibRequestAction.GET_ANCESTOR_AND_SUB_NODES=null;t.ContentlibRequestAction.GET_CONTENT=null;t.ContentlibRequestAction.GET_RECENT_FILES=null;t.ContentlibRequestAction.GET_REPO_VIEW=null;t.ContentlibRequestAction.GET_RESOURCE_EX=null;t.ContentlibRequestAction.GET_RESOURCE_WITH_NAME_EXISTS=null;t.ContentlibRequestAction.GET_SPACE_VIEW=null;t.ContentlibRequestAction.GET_SUB_NODES=null;t.ContentlibRequestAction.RENAME_RESOURCE=null;t.ContentlibRequestAction.SEARCH_ALL_RESOURCES=null;t.ContentlibRequestAction.SHARE_FILE=null;t.ContentlibRequestAction.STAGE_DELETE_LIST=null;t.ContentlibRequestAction.UPDATE_CONTENT=null;t.ContentlibRequestAction.s_lookup=null;t.ContentlibRequestAction.create=function(e){let r=new t.ContentlibRequestAction;r.setupConstant(e);t.ContentlibRequestAction.s_lookup.put(e,r);return r};t.ContentlibRequestAction.lookup=function(e){return t.ContentlibRequestAction.s_lookup.getByKey(e)};t.ContentlibRequestAction.staticSetup=function(){t.ContentlibRequestAction.s_lookup=t.XHashMapByString.create();t.ContentlibRequestAction.GET_ANCESTOR_AND_SUB_NODES=t.ContentlibRequestAction.create("getAncestorsAndSubNodes");t.ContentlibRequestAction.CREATE_CONTENT=t.ContentlibRequestAction.create("createContent");t.ContentlibRequestAction.CREATE_FOLDER=t.ContentlibRequestAction.create("createFolder");t.ContentlibRequestAction.GET_CONTENT=t.ContentlibRequestAction.create("getContent");t.ContentlibRequestAction.GET_RESOURCE_EX=t.ContentlibRequestAction.create("getResourceEx");t.ContentlibRequestAction.GET_RESOURCE_WITH_NAME_EXISTS=t.ContentlibRequestAction.create("getResourceWithNameExists");t.ContentlibRequestAction.GET_SUB_NODES=t.ContentlibRequestAction.create("getSubNodes");t.ContentlibRequestAction.GET_RECENT_FILES=t.ContentlibRequestAction.create("getRecentFiles");t.ContentlibRequestAction.RENAME_RESOURCE=t.ContentlibRequestAction.create("renameResource");t.ContentlibRequestAction.GET_REPO_VIEW=t.ContentlibRequestAction.create("getRepoView");t.ContentlibRequestAction.SEARCH_ALL_RESOURCES=t.ContentlibRequestAction.create("searchAllResources");t.ContentlibRequestAction.GET_SPACE_VIEW=t.ContentlibRequestAction.create("getSpaceView");t.ContentlibRequestAction.STAGE_DELETE_LIST=t.ContentlibRequestAction.create("stageDeleteList");t.ContentlibRequestAction.UPDATE_CONTENT=t.ContentlibRequestAction.create("updateContent");t.ContentlibRequestAction.GET_ACCESS_DETAILS=t.ContentlibRequestAction.create("getAccessDetails");t.ContentlibRequestAction.SHARE_FILE=t.ContentlibRequestAction.create("shareFile")};t.OrcaFile=function(){};t.OrcaFile.prototype=new t.DfXFileProviderFinalFile;t.OrcaFile.prototype._ff_c="OrcaFile";t.OrcaFile._create=function(e,r,i,n){let s=r;let o=s.getFileFromCache(i);if(t.isNull(o)){o=new t.OrcaFile;o.setupOrcaFile(e,r,i);let a=i.getPathContainer().getFileName();let l=t.XString.isEqual(r.getRootDirectoryUri().getPath(),i.getPath());let c=t.PrFactory.createStructure();o.setProviderMetadata(c);c.putAll(o.getProviderMetadata());if(l){o.setProviderIsExisting(true);c.putString(t.XFileAttribute.NODE_TYPE,t.OrcaResourceConstants.RESOURCE_TYPE_FOLDER);o.setIsDirectory(true);c.putBoolean(t.XFileAttribute.IS_WRITEABLE,false);c.putBoolean(t.XFileAttribute.IS_READABLE,true);c.putBoolean(t.XFileAttribute.IS_FILE,false);c.putBoolean(t.XFileAttribute.IS_DIRECTORY,true);c.putBoolean(t.XFileAttribute.IS_EXECUTABLE,false);o.setSupportedQueryOptions(c)}else if(n){let e=t.XLocalizationCenter.getCenter();if(t.XString.isEqual(a,t.OrcaResourceConstants.MY_FILES_VIRTUAL_FOLDER)){o.setProviderIsExisting(true);c.putString(t.XFileAttribute.NODE_TYPE,t.OrcaResourceConstants.RESOURCE_TYPE_FOLDER);c.putString(t.XFileAttribute.UNIQUE_ID,o.getFsBase().getPrivateFolderName());c.putString(t.XFileAttribute.DISPLAY_NAME,e.getText(t.ContentlibLocalizationProvider.CONTENTLIB_MY_FILES_DISPLAY_NAME));c.putBoolean(t.XFileAttribute.IS_WRITEABLE,true)}else if(t.XString.isEqual(a,t.OrcaResourceConstants.CATALOG_VIRTUAL_FOLDER)||t.XString.isEqual(a,t.OrcaResourceConstants.WORKSPACES_VIRTUAL_FOLDER)||t.XString.isEqual(a,t.OrcaResourceConstants.RECENT_FILES_VIRTUAL_FOLDER)){let r=a;if(t.XString.isEqual(a,t.OrcaResourceConstants.CATALOG_VIRTUAL_FOLDER)){r=e.getText(t.ContentlibLocalizationProvider.CONTENTLIB_CATALOG_DISPLAY_NAME)}else if(t.XString.isEqual(a,t.OrcaResourceConstants.WORKSPACES_VIRTUAL_FOLDER)){r=e.getText(t.ContentlibLocalizationProvider.CONTENTLIB_WORKSPACES_DISPLAY_NAME)}o.setProviderIsExisting(true);c.putString(t.XFileAttribute.NODE_TYPE,t.OrcaResourceConstants.RESOURCE_TYPE_FOLDER);c.putString(t.XFileAttribute.UNIQUE_ID,a);c.putString(t.XFileAttribute.DISPLAY_NAME,r);c.putBoolean(t.XFileAttribute.IS_WRITEABLE,false)}if(t.XString.isEqual(a,t.OrcaResourceConstants.RECENT_FILES_VIRTUAL_FOLDER)){o.m_hidden=true;c.putString(t.XFileAttribute.DISPLAY_NAME,t.OrcaResourceConstants.RECENT_FILES_DISPLAY_NAME)}o.setIsDirectory(true);c.putBoolean(t.XFileAttribute.IS_READABLE,true);c.putBoolean(t.XFileAttribute.IS_FILE,false);c.putBoolean(t.XFileAttribute.IS_DIRECTORY,true);c.putBoolean(t.XFileAttribute.IS_EXECUTABLE,false);o.setSupportedQueryOptions(c)}else{c.putString(t.XFileAttribute.DISPLAY_NAME,a);let e=i.getQueryElementValue(t.XFileAttribute.NODE_TYPE);if(t.notNull(e)){c.putString(t.XFileAttribute.NODE_TYPE,e)}}let u=i.getPathContainer().getParentPath();if(t.notNull(u)){let e=t.XStringTokenizer.splitString(u,"/");let r=e.size();let i=e.get(r-2);if(t.XString.isEqual(i,t.OrcaResourceConstants.MY_FILES_VIRTUAL_FOLDER)){c.putString(t.XFileAttribute.PARENT_UNIQUE_ID,o.getFsBase().getPrivateFolderName())}else{if(!t.XString.isEqual("",i)){let e=o.getProviderParent();let r=e.getProviderMetadata().getStringByKeyExt(t.XFileAttribute.UNIQUE_ID,o.getProviderParent().getName());c.putString(t.XFileAttribute.PARENT_UNIQUE_ID,r)}}}c.putString(t.XFileAttribute.SYSTEM_NAME,o.getFsBase().getOrcaConnection().getSystemName());c.putString(t.XFileAttribute.FILE_TYPE,c.getStringByKey(t.XFileAttribute.NODE_TYPE));c.putLong(t.XFileAttribute.SIZE,-1);c.putLong(t.XFileAttribute.CHANGED_AT,-1);c.putBoolean(t.XFileAttribute.IS_HIDDEN,o.m_hidden);c.putBoolean(t.XFileAttribute.IS_EXISTING,o.getProviderIsExisting());o.setProviderMetadata(c);if(o.isVirtual()||l){s.addFileToCache(o.getUri().getPathContainer().getFileName(),o)}}return o};t.OrcaFile.create=function(e,r,i,n){let s=i;let o=t.OrcaContentlibResourceUtils.isFolder(e);let a;if(o){a=t.XUri.createChildDir(n,e.getStringByKey(t.OrcaResourceConstants.RESOURCE_ID))}else{a=t.XUri.createChildFile(n,e.getStringByKey(t.OrcaResourceConstants.RESOURCE_ID))}let l=s.getFileFromCache(a);if(t.isNull(l)){l=new t.OrcaFile;l.setupOrcaFile(r,i,a);l.setProviderMetadata(t.PrStructure.create())}l.setProviderIsExisting(true);l.getProviderMetadata().putString(t.XFileAttribute.SYSTEM_NAME,l.getFsBase().getOrcaConnection().getSystemName());l.setMetadataInternal(e);s.addFileToCache(l.getUri().getPathContainer().getFileName(),l);return l};t.OrcaFile.createFolder=function(e,r,i,n,s){let o=t.OrcaFile.create(e,r,i,n);o.setIsDirectory(s);return o};t.OrcaFile.createFromCache=function(e,r,i,n){let s=new t.OrcaFile;s.setupOrcaFile(e,r,i);s.setProviderMetadata(n);s.m_isDir=t.XString.isEqual(t.OrcaResourceConstants.RESOURCE_TYPE_FOLDER,s.getProviderMetadata().getStringByKey(t.XFileAttribute.NODE_TYPE));s.setProviderIsExisting(true);s.setSupportedQueryOptions(s.getProviderMetadata());return s};t.OrcaFile.prototype.m_accessState=null;t.OrcaFile.prototype.m_attributesForChanges=null;t.OrcaFile.prototype.m_fileAttributeUtils=null;t.OrcaFile.prototype.m_hidden=false;t.OrcaFile.prototype.m_isDir=false;t.OrcaFile.prototype.addExtendedMetadata=function(){let e=this.getProviderMetadata();e.putString(t.XFileAttribute.FILE_TYPE,e.getStringByKey(t.XFileAttribute.NODE_TYPE));e.putLong(t.XFileAttribute.SIZE,-1);e.putLong(t.XFileAttribute.CHANGED_AT,e.getLongByKey(t.XFileAttribute.CHANGED_AT));e.putBoolean(t.XFileAttribute.IS_HIDDEN,this.m_hidden);e.putBoolean(t.XFileAttribute.IS_WRITEABLE,e.getBooleanByKey(t.XFileAttribute.CAN_UPDATE));e.putBoolean(t.XFileAttribute.IS_READABLE,e.getBooleanByKey(t.XFileAttribute.CAN_READ));e.putBoolean(t.XFileAttribute.IS_EXISTING,this.getProviderIsExisting());e.putBoolean(t.XFileAttribute.IS_EXECUTABLE,false);let r=e.getStringByKey(t.XFileAttribute.NODE_TYPE);let i=!t.XString.isEqual(t.OrcaResourceConstants.RESOURCE_TYPE_FOLDER,r);e.putBoolean(t.XFileAttribute.IS_FILE,i);e.putBoolean(t.XFileAttribute.IS_DIRECTORY,!i);this.setSupportedQueryOptions(e)};t.OrcaFile.prototype.getAccessState=function(){return this.m_accessState};t.OrcaFile.prototype.getAttributesForChanges=function(){if(t.isNull(this.m_attributesForChanges)){this.m_attributesForChanges=t.PrFactory.createStructure()}return this.m_attributesForChanges};t.OrcaFile.prototype.getDestinationFile=function(){let t=this;if(this.isLinkNodeType()){t=this.getLinkedFile()}return t};t.OrcaFile.prototype.getFsBase=function(){return this.m_fs};t.OrcaFile.prototype.getLastModifiedTimestamp=function(){if(this.getProviderMetadata().containsKey(t.XFileAttribute.CHANGED_AT)){return this.getProviderMetadata().getLongByKey(t.XFileAttribute.CHANGED_AT)}return 0};t.OrcaFile.prototype.getLinkedFile=function(){return this.getFsBase().getLinkFromCache(this.getProviderMetadata().getStringByKey(t.XFileAttribute.UNIQUE_ID),this.getUri())};t.OrcaFile.prototype.getProviderAttributes=function(){return this.getProviderMetadata()};t.OrcaFile.prototype.getProviderParent=function(){let e=t.XUri.createParent(this.getUri());let r=this.getFsBase().newFile(this.getProcess(),e);return r};t.OrcaFile.prototype.isDirectory=function(){return this.m_isDir};t.OrcaFile.prototype.isExisting=function(){let e=t.XString.isEqual(this.getFsBase().getRootDirectoryUri().getPath(),this.getUri().getPath());if(this.getProviderIsExisting()){return this.getProviderIsExisting()}else if(this.isVirtual()||e){return true}else{return this.processProviderIsExisting(t.SyncType.BLOCKING,null,null).getData().getProviderIsExisting()}};t.OrcaFile.prototype.isFile=function(){return!this.isDirectory()};t.OrcaFile.prototype.isLinkNodeType=function(){let e=this.getProviderMetadata().getStringByKey(t.XFileAttribute.NODE_TYPE);return t.XString.isEqual(t.OrcaResourceConstants.RESOURCE_TYPE_LINK,e)};t.OrcaFile.prototype.isVirtual=function(){let e=t.XList.create();e.add(this.getFsBase().getPrivateFolderName());e.add(t.OrcaResourceConstants.CATALOG_VIRTUAL_FOLDER);e.add(t.OrcaResourceConstants.WORKSPACES_VIRTUAL_FOLDER);e.add(t.OrcaResourceConstants.RECENT_FILES_VIRTUAL_FOLDER);return e.contains(this.getProviderMetadata().getStringByKey(t.XFileAttribute.UNIQUE_ID))};t.OrcaFile.prototype.newChildFile=function(e,r){let i=this.getProcess();let n=this.getProviderFileSystem();let s=t.OrcaFile._create(i,n,e,false);return s};t.OrcaFile.prototype.newFile=function(t){return this.getFsBase().newFile(this.getProcess(),t)};t.OrcaFile.prototype.processProviderFetchAccessRights=function(t,e,r,i){return this.getFsBase().processFetchAccessRights(t,e,r,this,i)};t.OrcaFile.prototype.processProviderFetchChildren=function(t,e,r,i){let n=this.getFsBase().processFetchChildren(t,e,r,this,i);return n};t.OrcaFile.prototype.processProviderFetchMetadata=function(t,e,r,i){return this.getFsBase().processFetchMetadata(t,e,r,this)};t.OrcaFile.prototype.processProviderIsExisting=function(t,e,r){return this.getFsBase().processIsExisting(t,e,r,this)};t.OrcaFile.prototype.processProviderLoad=function(t,e,r,i){let n=this.getFsBase().processLoad(t,e,r,this,i);return n};t.OrcaFile.prototype.processProviderMkdir=function(t,e,r,i,n){this.setIsDirectory(true);let s=this.getFsBase().processMkdir(t,e,r,this,i);return s};t.OrcaFile.prototype.processProviderSave=function(t,e,r,i,n,s,o){let a=this.getFsBase().processSave(t,e,r,this,i,n,s);return a};t.OrcaFile.prototype.processProviderShare=function(t,e,r,i,n,s){let o=this.getFsBase().processShare(t,e,r,this,i,n,s);return o};t.OrcaFile.prototype.releaseObject=function(){this.m_attributesForChanges=t.XObjectExt.release(this.m_attributesForChanges);this.m_accessState=t.XObjectExt.release(this.m_accessState)};t.OrcaFile.prototype.setAccessState=function(t){this.m_accessState=t};t.OrcaFile.prototype.setIsDirectory=function(t){this.m_isDir=t};t.OrcaFile.prototype.setLinkedFile=function(e){this.getFsBase().addLinkToCache(this.getProviderMetadata().getStringByKey(t.XFileAttribute.UNIQUE_ID),e)};t.OrcaFile.prototype.setMetadataInternal=function(t){this.m_fileAttributeUtils.setFileMetadata(t);this.addExtendedMetadata()};t.OrcaFile.prototype.setSupportedQueryOptions=function(e){let r=this.isDirectory();let i=this.isLinkNodeType();if(i&&this.getLinkedFile()!==null){r=this.getLinkedFile().isDirectory()}e.putBoolean(t.XFileAttribute.SUPPORTS_OFFSET,r);e.putBoolean(t.XFileAttribute.SUPPORTS_MAX_ITEMS,r);e.putBoolean(t.XFileAttribute.SUPPORTS_SINGLE_SORT,r);e.putBoolean(t.XFileAttribute.SUPPORTS_CARTESIAN_FILTER,r);e.putBoolean(t.XFileAttribute.SUPPORTS_SEARCH,r);if(r){let r=e.putNewStructure(t.XFileAttribute.SUPPORTED_FILTERS);r.putAll(t.OrcaContentlibResourceUtils.getSupportedFilterMetadata())}};t.OrcaFile.prototype.setupOrcaFile=function(e,r,i){this.setupFile(e,r,i);this.m_fileAttributeUtils=t.OrcaFileMetadataUtils.createWithFile(this)};t.OrcaFile.prototype.supportsProviderFetchChildren=function(){return true};t.OrcaFile.prototype.supportsProviderIsExisting=function(){return true};t.OrcaFile.prototype.supportsProviderLoad=function(){return true};t.OrcaFile.prototype.supportsProviderMkdir=function(){return true};t.OrcaFile.prototype.supportsProviderSave=function(){return true};t.OrcaFile.prototype.supportsProviderSetLastModified=function(){return false};t.SubSysFsContentlibPrg=function(){};t.SubSysFsContentlibPrg.prototype=new t.DfSubSysFilesystem;t.SubSysFsContentlibPrg.prototype._ff_c="SubSysFsContentlibPrg";t.SubSysFsContentlibPrg.DEFAULT_PROGRAM_NAME="@SubSys.FileSystem.fscontentlib";t.SubSysFsContentlibPrg.FS_PREFIX="fscontentlib:";t.SubSysFsContentlibPrg.prototype.m_fs=null;t.SubSysFsContentlibPrg.prototype.m_orcaFileSystems=null;t.SubSysFsContentlibPrg.prototype.getAllInitializedFileSystems=function(){if(t.isNull(this.m_orcaFileSystems)){this.m_orcaFileSystems=t.XHashMapByString.create()}return this.m_orcaFileSystems};t.SubSysFsContentlibPrg.prototype.getFileSystem=function(t){return this.m_fs};t.SubSysFsContentlibPrg.prototype.getFileSystemByUri=function(e){if(t.isNull(this.m_orcaFileSystems)){this.m_orcaFileSystems=t.XHashMapByString.create()}let r=e.getHost();let i;let n=t.XStringUtils.concatenate2(t.SubSysFsContentlibPrg.FS_PREFIX,r);if(this.m_orcaFileSystems.containsKey(n)){i=this.m_orcaFileSystems.getByKey(n)}else{i=t.OrcaFileSystem.createWithSystem(this.getProcess(),r);this.m_orcaFileSystems.put(n,i)}this.m_fs=i;return this.m_fs};t.SubSysFsContentlibPrg.prototype.getProgramName=function(){return t.SubSysFsContentlibPrg.DEFAULT_PROGRAM_NAME};t.SubSysFsContentlibPrg.prototype.getProtocolType=function(){return t.ProtocolType.FS_CONTENTLIB};t.SubSysFsContentlibPrg.prototype.newProgram=function(){let e=new t.SubSysFsContentlibPrg;e.setup();return e};t.SubSysFsContentlibPrg.prototype.processFetchFileSystem=function(e,r,i,n){if(this.getProcess().getConnectionPool()===null){this.getProcess().setEntity(t.ProcessEntity.CONNECTION_POOL,t.ConnectionPool.create(this.getProcess()))}return t.OrcaContentlibFsActionFetch.createAndRun(e,r,i,this,n)};t.SubSysFsContentlibPrg.prototype.runProcess=function(){this.activateSubSystem(null,t.SubSystemStatus.ACTIVE);if(this.getProcess().getConnectionPool()===null){this.getProcess().setEntity(t.ProcessEntity.CONNECTION_POOL,t.ConnectionPool.create(this.getProcess()))}this.m_orcaFileSystems=t.XHashMapByString.create();return true};t.OrcaContentlibFsActionFetch=function(){};t.OrcaContentlibFsActionFetch.prototype=new t.SyncActionExt;t.OrcaContentlibFsActionFetch.prototype._ff_c="OrcaContentlibFsActionFetch";t.OrcaContentlibFsActionFetch.createAndRun=function(e,r,i,n,s){let o=new t.OrcaContentlibFsActionFetch;o.m_uri=s;o.setupActionAndRun(e,r,i,n);return o};t.OrcaContentlibFsActionFetch.prototype.m_uri=null;t.OrcaContentlibFsActionFetch.prototype.callListener=function(t,e,r,i){e.onFileSystemFetched(t,r,i)};t.OrcaContentlibFsActionFetch.prototype.onFileProviderChildrenFetched=function(t,e,r,i,n){if(t.hasErrors()){this.addAllMessages(t)}this.endSync()};t.OrcaContentlibFsActionFetch.prototype.processSynchronization=function(t){let e=this.getActionContext().getFileSystemByUri(this.m_uri);this.setData(e);return e.loadMyFiles(this,t)};t.OrcaContentlibFsActionFetch.prototype.releaseObjectInternal=function(){};t.OrcaFileBaseAction=function(){};t.OrcaFileBaseAction.prototype=new t.SyncActionExt;t.OrcaFileBaseAction.prototype._ff_c="OrcaFileBaseAction";t.OrcaFileBaseAction.SAVE="save";t.OrcaFileBaseAction.UPDATE="update";t.OrcaFileBaseAction.prototype.addResponseError=function(e){let r;if(t.isNull(e)){r="Response is null"}else{r=t.XStringUtils.concatenate2("Response is not correct format: ",e.getRootElementAsString())}this.addErrorExt(t.OriginLayer.IOLAYER,t.ErrorCodes.SYSTEM_IO_HTTP,r,null)};t.OrcaFileBaseAction.prototype.callListener=function(t,e,r,i){e.onHttpFileProcessed(t,r,i)};t.OrcaFileBaseAction.prototype.processRpcFunction=function(e,r){this.processRpcFunctionWithEndpoint(t.OrcaResourceConstants.REST_ENDPOINT,e,r)};t.OrcaFileBaseAction.prototype.processRpcFunctionWithEndpoint=function(e,r,i){let n=t.XUri.createFromUrl(e);let s=this.getActionContext().getOrcaConnection();let o=s.newRpcFunctionByUri(n);o.setServiceName(t.SystemServices.SAC_SERVICE);let a=o.getRpcRequest();let l=this.getProcess().getUserProfile();let c=t.notNull(l)?l.getLanguage():"";if(t.XStringUtils.isNotNullAndNotEmpty(c)){a.setLanguage(c)}a.setRequestStructure(r);o.processFunctionExecution(i,this,null)};t.OrcaFileSystem=function(){};t.OrcaFileSystem.prototype=new t.DfXFileSystem;t.OrcaFileSystem.prototype._ff_c="OrcaFileSystem";t.OrcaFileSystem.createWithSystem=function(e,r){let i=new t.OrcaFileSystem;i.m_fileCache=t.XHashMapByString.create();i.m_linkFileCache=t.XHashMapByString.create();i.m_systemName=r;i.QUERY_GENERATOR_FACTORY=t.XSimpleMap.create();i.setupProcessContext(e);return i};t.OrcaFileSystem.prototype.QUERY_GENERATOR_FACTORY=null;t.OrcaFileSystem.prototype.loadMyFilesListener=null;t.OrcaFileSystem.prototype.m_connection=null;t.OrcaFileSystem.prototype.m_fileCache=null;t.OrcaFileSystem.prototype.m_iconMap=null;t.OrcaFileSystem.prototype.m_linkFileCache=null;t.OrcaFileSystem.prototype.m_relevantSubTypes=null;t.OrcaFileSystem.prototype.m_rootFile=null;t.OrcaFileSystem.prototype.m_serverHostName=null;t.OrcaFileSystem.prototype.m_systemName=null;t.OrcaFileSystem.prototype.m_uniqueIconFolders=null;t.OrcaFileSystem.prototype.addFileToCache=function(t,e){this.m_fileCache.put(t,e.getProviderMetadata())};t.OrcaFileSystem.prototype.addLinkToCache=function(t,e){this.m_linkFileCache.put(t,e.getProviderMetadata())};t.OrcaFileSystem.prototype.createFileFromCache=function(e,r){let i=this.m_fileCache.getByKey(e);let n=r;if(t.isNull(i)){return null}if(i.getBooleanByKey(t.XFileAttribute.IS_DIRECTORY)){let e=r.getUrl();let i=t.XString.endsWith(e,"/");if(!i){e=t.XStringUtils.concatenate2(e,"/");n=t.XUri.createFromUrl(e)}}return t.OrcaFile.createFromCache(this.getProcess(),this,n,t.PrStructure.createDeepCopy(i))};t.OrcaFileSystem.prototype.dropFileFromCache=function(t){let e=this.getCleanUri(t).getPathContainer().getFileName();this.m_fileCache.remove(e)};t.OrcaFileSystem.prototype.getCleanUri=function(t){let e=t.getPath();let r=this.mapResourceIdToVirtualIds(e);return r};t.OrcaFileSystem.prototype.getFileFromCache=function(e){let r=t.XString.isEqual(this.getRootDirectoryUri().getPath(),e.getPath());let i=null;if(r){i=this.m_rootFile}else{let t=this.getCleanUri(e);let r=t.getPathContainer().getFileName();i=this.createFileFromCache(r,t)}return i};t.OrcaFileSystem.prototype.getFileNames=function(e){let r=t.XList.create();if(t.notNull(e)){for(let i=0;i<e.size();i++){r.add(e.get(i).getProviderMetadata().getStringByKey(t.XFileAttribute.DISPLAY_NAME))}}return r};t.OrcaFileSystem.prototype.getHostName=function(){return this.m_serverHostName};t.OrcaFileSystem.prototype.getIconName=function(e){let r=e.getStringByKey(t.OrcaResourceConstants.RESOURCE_TYPE);let i=e.getStringByKey(t.OrcaResourceConstants.RESOURCE_SUBTYPE);let n=e.getStringByKey(t.OrcaResourceConstants.RESOURCE_ID);let s=r;let o=false;let a=e.getStructureByKey(t.OrcaResourceConstants.DATA);if(t.XString.isEqual(t.OrcaResourceConstants.RESOURCE_TYPE_CUBE,r)){if(t.notNull(a)){let e=a.getStructureByKey(t.OrcaResourceConstants.CDATA);if(t.notNull(e)){let r=e.getStringByKey("mode");o=t.XString.isEqual(r,"integrated");s=o?t.XStringUtils.concatenate2(s,";live"):s}}}if(t.XStringUtils.isNotNullAndNotEmpty(i)){if(t.XString.isEqual(t.OrcaResourceConstants.RESOURCE_TYPE_STORY,r)&&this.m_relevantSubTypes.contains(i)){s=t.XStringUtils.concatenate3(s,";",i)}}if(t.XStringUtils.isNotNullAndNotEmpty(n)){if(t.XString.isEqual(t.OrcaResourceConstants.RESOURCE_TYPE_FOLDER,r)&&this.m_uniqueIconFolders.contains(n)){if(t.XStringUtils.isNullOrEmpty(i)||!this.m_relevantSubTypes.contains(i)){s=t.XStringUtils.concatenate2(s,";")}s=t.XStringUtils.concatenate3(s,";",n)}}let l=this.m_iconMap.getByKey(s);if(t.XStringUtils.isNotNullAndNotEmpty(l)){return l}else{return""}};t.OrcaFileSystem.prototype.getLinkFromCache=function(e,r){let i=this.m_linkFileCache.getByKey(e);if(t.isNull(i)){return null}let n=t.OrcaFile.createFromCache(this.getProcess(),this,r,i);return n};t.OrcaFileSystem.prototype.getOrcaConnection=function(){if(t.isNull(this.m_connection)){this.m_connection=this.getProcess().getConnectionPool().getConnection(this.m_systemName)}return this.m_connection};t.OrcaFileSystem.prototype.getPrivateFolderName=function(){return t.XStringUtils.concatenate2(t.OrcaResourceConstants.PRIVATE_FOLDER_PREFIX,this.getUserName())};t.OrcaFileSystem.prototype.getProtocolType=function(){return t.ProtocolType.FS_CONTENTLIB};t.OrcaFileSystem.prototype.getQuery=function(t){return this.QUERY_GENERATOR_FACTORY.getByKey(t)};t.OrcaFileSystem.prototype.getRootFile=function(){return this.m_rootFile};t.OrcaFileSystem.prototype.getRootFolderChildren=function(){let e=t.XList.create();let r=this.getRootDirectoryUri();let i=t.XUri.createChildDir(r,null);let n=t.XUri.createChildDir(i,t.OrcaResourceConstants.MY_FILES_VIRTUAL_FOLDER);let s=t.OrcaFile._create(this.getProcess(),this,n,true);let o=t.XUri.createChildDir(i,t.OrcaResourceConstants.CATALOG_VIRTUAL_FOLDER);let a=t.OrcaFile._create(this.getProcess(),this,o,true);let l=t.XUri.createChildDir(i,t.OrcaResourceConstants.WORKSPACES_VIRTUAL_FOLDER);let c=t.OrcaFile._create(this.getProcess(),this,l,true);let u=t.XUri.createChildDir(i,t.OrcaResourceConstants.RECENT_FILES_VIRTUAL_FOLDER);let E=t.OrcaFile._create(this.getProcess(),this,u,true);e.add(s);e.add(a);e.add(c);e.add(E);return e};t.OrcaFileSystem.prototype.getUserName=function(){return this.getProcess().getUserProfile().getName()};t.OrcaFileSystem.prototype.getWorkingDirectoryUri=function(){return t.XUri.createFromUrl("fscontentlib:///")};t.OrcaFileSystem.prototype.handleServerMetadata=function(e,r){if(e.hasErrors()&&t.notNull(this.loadMyFilesListener)){this.loadMyFilesListener.addAllMessages(e)}this.setupIcons();this.setupQueries();this.m_serverHostName=e.getData()!==null?e.getData().getOrcaPublicUrl():"";let i=t.XUri.createFromFilePath(this.getProcess(),"/",t.PathFormat.AUTO_DETECT,t.VarResolveMode.NONE,t.ProtocolType.FS_CONTENTLIB);this.m_rootFile=t.OrcaFile._create(this.getProcess(),this,i,false);this.m_rootFile.processProviderFetchChildren(r,this.loadMyFilesListener,null,null);this.loadMyFilesListener=null};t.OrcaFileSystem.prototype.isExistingExt=function(e){let r=e.getTargetUriPath();if(t.XString.isEqual(r,"/")){return true}else{return e.processProviderIsExisting(t.SyncType.BLOCKING,null,null).getData().getProviderIsExisting()}};t.OrcaFileSystem.prototype.loadMyFiles=function(e,r){this.loadMyFilesListener=e;this.m_connection=this.getProcess().getConnectionPool().getConnection(this.m_systemName);if(t.SyncType.NON_BLOCKING===r){this.m_connection.getSystemConnect().getServerMetadataExt(r,this,null);return true}else{this.handleServerMetadata(this.m_connection.getSystemConnect().getServerMetadataExt(r,null,null),r);return false}};t.OrcaFileSystem.prototype.mapResourceIdToVirtualIds=function(e){let r=e;let i=t.XStringUtils.concatenate2("/",this.getPrivateFolderName());let n=t.XStringUtils.concatenate3("/",this.getPrivateFolderName(),"/");if(t.XString.isEqual(e,i)||t.XString.isEqual(e,n)){let n=t.XStringUtils.stripStart(e,i);r=t.XStringUtils.concatenate4("/",t.OrcaResourceConstants.MY_FILES_VIRTUAL_FOLDER,n,"/")}return t.XUri.createFromUrl(r)};t.OrcaFileSystem.prototype.newFile=function(e,r){let i=this.getFileFromCache(r);if(t.isNull(i)){i=t.OrcaFile._create(e,this,r,false)}return i};t.OrcaFileSystem.prototype.onServerMetadataLoaded=function(e,r,i){this.handleServerMetadata(e,t.SyncType.NON_BLOCKING)};t.OrcaFileSystem.prototype.processFetchAccessRights=function(e,r,i,n,s){let o=t.OrcaFileFetchAccessDetailsAction.createAndRun(e,n,this,t.OrcaFileRequestAdapter.create(e=>{let n=e.getData();if(t.notNull(r)){r.onFileProviderFetchAccessRights(e,n,n.getAccessState(),i)}}),i,s);return o};t.OrcaFileSystem.prototype.processFetchChildren=function(e,r,i,n,s){let o=t.OrcaFileGetChildrenAction.createAndRun(e,n,this,t.OrcaFileRequestAdapter.create(e=>{let n=e.getData();if(t.notNull(r)){r.onFileProviderChildrenFetched(e,n,n.getProviderChildFiles(),n.getProviderChildrenResultset(),i)}}),s);return o};t.OrcaFileSystem.prototype.processFetchMetadata=function(e,r,i,n){if(n.getAttributes().containsKey(t.XFileAttribute.SAC_FETCH_LINKED_STORY)&&!n.getAttributes().containsKey(t.XFileAttribute.SAC_LINKED_STORY_ID)){let s=t.OrcaFileFetchStoryLinkAction.createAndRun(e,n,this,t.OrcaFileRequestAdapter.create(e=>{let n=e.getData();if(t.notNull(r)){r.onFileProviderFetchMetadata(e,n,n.getProviderMetadataAndAttributes(),i)}}),i);return s}else{let s=t.OrcaFileFetchMetadataAction.createAndRun(e,n,this,t.OrcaFileRequestAdapter.create(e=>{let n=e.getData();if(t.notNull(r)){r.onFileProviderFetchMetadata(e,n,n.getProviderMetadataAndAttributes(),i)}}),i);return s}};t.OrcaFileSystem.prototype.processIsExisting=function(e,r,i,n){return t.OrcaFileExistingAction.createAndRun(e,n,this,t.OrcaFileRequestAdapter.create(e=>{let n=e.getData();if(t.notNull(r)){r.onFileProviderExistsCheck(e,n,n.getProviderIsExisting(),i)}}),i)};t.OrcaFileSystem.prototype.processLoad=function(e,r,i,n,s){let o=t.OrcaFileLoadAction.createAndRun(e,n,this,t.OrcaFileRequestAdapter.create(e=>{let n=e.getData();if(t.notNull(r)){r.onFileProviderLoaded(e,n,n.getProviderContent(),i)}}),i,s);return o};t.OrcaFileSystem.prototype.processMkdir=function(e,r,i,n,s){let o=t.OrcaFileMkdirAction.createAndRun(e,n,this,t.OrcaFileRequestAdapter.create(e=>{let n=e.getData();if(t.notNull(r)){r.onFileProviderDirectoryCreated(e,n,i)}}),i);return o};t.OrcaFileSystem.prototype.processSave=function(e,r,i,n,s,o,a){let l="";if(n.getProviderIsExisting()){l=t.OrcaFileBaseAction.UPDATE}else{l=t.OrcaFileBaseAction.SAVE}let c=t.OrcaFileSaveAction.createAndRun(e,n,s,this,t.OrcaFileRequestAdapter.create(e=>{let n=e.getData();if(t.notNull(r)){r.onFileProviderSaved(e,n,s,i)}}),i,o,l,a);return c};t.OrcaFileSystem.prototype.processShare=function(e,r,i,n,s,o,a){let l=t.OrcaFileShareAction.createAndRun(e,n,this,t.OrcaFileRequestAdapter.create(e=>{let n=e.getData();if(t.notNull(r)){r.onFileProviderShare(e,n,i)}}),i,s,o,a);return l};t.OrcaFileSystem.prototype.registerQuery=function(t,e){this.QUERY_GENERATOR_FACTORY.put(t,e)};t.OrcaFileSystem.prototype.setupIcons=function(){this.m_iconMap=t.XLinkedHashMapByString.create();let e="sap-icon://fpa/";this.m_iconMap.put("DASHBOARD",t.XStringUtils.concatenate2(e,"dashboards"));this.m_iconMap.put("STORY",t.XStringUtils.concatenate2(e,"stories"));this.m_iconMap.put("STORY;TEMPLATE",t.XStringUtils.concatenate2(e,"template"));this.m_iconMap.put("STORY;APPLICATION",t.XStringUtils.concatenate2(e,"details"));this.m_iconMap.put("STORY;INSIGHT",t.XStringUtils.concatenate2(e,"chart-table"));this.m_iconMap.put("FOLDER",t.XStringUtils.concatenate2(e,"folder"));this.m_iconMap.put("FOLDER;;TEAMS",t.XStringUtils.concatenate2(e,"users"));this.m_iconMap.put("FOLDER;;INPUT_SCHEDULE",t.XStringUtils.concatenate2(e,"input-form"));this.m_iconMap.put("FOLDER;;USERS",t.XStringUtils.concatenate2(e,"person"));this.m_iconMap.put("FILE",t.XStringUtils.concatenate2(e,"file"));this.m_iconMap.put("CUBE",t.XStringUtils.concatenate2(e,"models"));this.m_iconMap.put("CUBE;live",t.XStringUtils.concatenate2(e,"live-model"));this.m_iconMap.put("DATASET",t.XStringUtils.concatenate2(e,"data-set"));this.m_iconMap.put("INPUT_SCHEDULE",t.XStringUtils.concatenate2(e,"input-form"));this.m_iconMap.put("PRESENTATION_V2",t.XStringUtils.concatenate2(e,"boardroom"));this.m_iconMap.put("POINTOFINTEREST",t.XStringUtils.concatenate2(e,"marker"));this.m_iconMap.put("THEMING",t.XStringUtils.concatenate2(e,"style"));this.m_iconMap.put("DWC_REMOTE_TABLE",t.XStringUtils.concatenate2(e,"live-table"));this.m_iconMap.put("DWC_LOCAL_TABLE",t.XStringUtils.concatenate2(e,"table"));this.m_iconMap.put("DWC_ERMODEL",t.XStringUtils.concatenate2(e,"relationship-diagram"));this.m_iconMap.put("DWC_ESMODEL",t.XStringUtils.concatenate2(e,"inspection"));this.m_iconMap.put("DWC_VIEW",t.XStringUtils.concatenate2(e,"table-view"));this.m_iconMap.put("DWC_DATAFLOW",t.XStringUtils.concatenate2(e,"data-flow"));this.m_iconMap.put("DWC_WRANGLING_SESSION",t.XStringUtils.concatenate2(e,"wrangling"));this.m_iconMap.put("DWC_CUBE",t.XStringUtils.concatenate2(e,"models"));this.m_iconMap.put("EXTERNALCONTENT",t.XStringUtils.concatenate2(e,"link"));this.m_iconMap.put("PREDICTIVESCENARIO",t.XStringUtils.concatenate2(e,"binoculars"));this.m_uniqueIconFolders=t.XList.create();this.m_uniqueIconFolders.add("TEAMS");this.m_uniqueIconFolders.add("INPUT_SCHEDULE");this.m_uniqueIconFolders.add("USERS");this.m_relevantSubTypes=t.XList.create();this.m_relevantSubTypes.add("TEMPLATE");this.m_relevantSubTypes.add("APPLICATION");this.m_relevantSubTypes.add("INSIGHT")};t.OrcaFileSystem.prototype.setupQueries=function(){let e=t.QueryFilterGenerator.create();let r=t.QueryOptionsGenerator.create();let i=t.ResourceIdResolver.create();let n=t.MetadataRequestGenerator.create();this.registerQuery(t.ContentlibRequestAction.GET_ANCESTOR_AND_SUB_NODES,t.AncestorsAndSubNodes.create(e,r));this.registerQuery(t.ContentlibRequestAction.GET_CONTENT,t.GetContent.create(r));this.registerQuery(t.ContentlibRequestAction.CREATE_FOLDER,t.CreateFolder.create(i));this.registerQuery(t.ContentlibRequestAction.CREATE_CONTENT,t.CreateContent.create(i));this.registerQuery(t.ContentlibRequestAction.UPDATE_CONTENT,t.UpdateContent.create());this.registerQuery(t.ContentlibRequestAction.GET_RESOURCE_EX,t.GetResourceEx.create(n));this.registerQuery(t.ContentlibRequestAction.GET_RESOURCE_WITH_NAME_EXISTS,t.GetResourceWithNameExists.create(i));this.registerQuery(t.ContentlibRequestAction.GET_SUB_NODES,t.GetSubNodes.create(e,r));this.registerQuery(t.ContentlibRequestAction.GET_RECENT_FILES,t.RecentFiles.create(t.SearchAllResources.create(e,r,n),e,r));this.registerQuery(t.ContentlibRequestAction.GET_REPO_VIEW,t.RepoView.create(e,r));this.registerQuery(t.ContentlibRequestAction.SEARCH_ALL_RESOURCES,t.SearchAllResources.create(e,r,n));this.registerQuery(t.ContentlibRequestAction.GET_SPACE_VIEW,t.SpaceView.create(e,r));this.registerQuery(t.ContentlibRequestAction.STAGE_DELETE_LIST,t.StageDeleteList.create());this.registerQuery(t.ContentlibRequestAction.RENAME_RESOURCE,t.RenameResource.create());this.registerQuery(t.ContentlibRequestAction.GET_ACCESS_DETAILS,t.GetAccessDetails.create());this.registerQuery(t.ContentlibRequestAction.SHARE_FILE,t.ShareFile.create())};t.OrcaFileDeleteAction=function(){};t.OrcaFileDeleteAction.prototype=new t.OrcaFileBaseAction;t.OrcaFileDeleteAction.prototype._ff_c="OrcaFileDeleteAction";t.OrcaFileDeleteAction.createAndRun=function(e,r,i,n,s){let o=new t.OrcaFileDeleteAction;o.m_file=r.getDestinationFile();o.setData(o.m_file);o.setupActionAndRun(e,n,s,i);return o};t.OrcaFileDeleteAction.prototype.m_file=null;t.OrcaFileDeleteAction.prototype.m_resourceId=null;t.OrcaFileDeleteAction.prototype.onFunctionExecuted=function(e,r,i){this.addAllMessages(e);if(e.isValid()){if(t.notNull(r)&&r.getRootElement()!==null){this.m_file.setProviderIsExisting(false);this.setData(this.m_file)}else{this.addResponseError(r)}}else{this.m_file.addAllMessages(e)}this.endSync()};t.OrcaFileDeleteAction.prototype.processSynchronization=function(e){let r=t.XList.create();r.add(this.m_resourceId);let i=t.ContentlibQueryDataBuilder.create().setResourceIds(r).build();let n=this.m_file.getFsBase().getQuery(t.ContentlibRequestAction.STAGE_DELETE_LIST).getPayload(i);this.processRpcFunction(n,e);return true};t.OrcaFileExistingAction=function(){};t.OrcaFileExistingAction.prototype=new t.OrcaFileBaseAction;t.OrcaFileExistingAction.prototype._ff_c="OrcaFileExistingAction";t.OrcaFileExistingAction.createAndRun=function(e,r,i,n,s){let o=new t.OrcaFileExistingAction;o.m_file=r.getDestinationFile();o.setData(o.m_file);o.setupActionAndRun(e,n,s,i);return o};t.OrcaFileExistingAction.prototype.m_file=null;t.OrcaFileExistingAction.prototype.onFunctionExecuted=function(e,r,i){this.addAllMessages(e);if(e.isValid()){if(t.notNull(r)&&r.getRootElement()!==null){let e=r.getRootElement();let i=e.getBooleanByKey(t.OrcaResourceConstants.EXISTS);if(i){let r=this.m_file.getUri();let i=t.XUri.createParent(r);let n=e.getListByKey(t.OrcaResourceConstants.EXISTING_RESOURCE).get(0).asStructure();t.OrcaFile.create(n,this.m_file.getProcess(),this.m_file.getFsBase(),i);this.m_file.setMetadataInternal(n)}this.m_file.setProviderIsExisting(i)}}else{this.addResponseError(r);this.m_file.addAllMessages(e)}this.endSync()};t.OrcaFileExistingAction.prototype.processSynchronization=function(e){if(this.m_file.isVirtual()){this.endSync();return false}else{let r=t.ContentlibQueryDataBuilder.create().setFile(this.m_file).build();let i=this.m_file.getFsBase().getQuery(t.ContentlibRequestAction.GET_RESOURCE_WITH_NAME_EXISTS).getPayload(r);this.processRpcFunction(i,e);return true}};t.OrcaFileFetchAccessDetailsAction=function(){};t.OrcaFileFetchAccessDetailsAction.prototype=new t.OrcaFileBaseAction;t.OrcaFileFetchAccessDetailsAction.prototype._ff_c="OrcaFileFetchAccessDetailsAction";t.OrcaFileFetchAccessDetailsAction.createAndRun=function(e,r,i,n,s,o){let a=new t.OrcaFileFetchAccessDetailsAction;a.m_file=r;a.m_paginationConfig=o;a.setData(r);a.setupActionAndRun(e,n,s,i);return a};t.OrcaFileFetchAccessDetailsAction.prototype.m_file=null;t.OrcaFileFetchAccessDetailsAction.prototype.m_paginationConfig=null;t.OrcaFileFetchAccessDetailsAction.prototype.onFunctionExecuted=function(e,r,i){this.addAllMessages(e);if(e.isValid()){if(t.notNull(r)&&r.getRootElement()!==null){let e=r.getRootElement();let i=e.getIntegerByKey("userCount");let n=e.getIntegerByKey("teamCount");let s=e.getListByKey("results");let o=this.m_file.getProviderAttributes().putNewList(t.XFileAttribute.ACCESS_RIGHTS);let a=null;for(let e=0;e<s.size();e++){let r=s.getStructureAt(e);let i=r.getListByKey("resourceAccess").getStructureAt(0).getStructureByKey("access").getIntegerByKey("effective");let n=t.OrcaFileAccessStateBuilder.create();a=n.getAccess(i,r.getStringByKey("id"));let l=o.addNewStructure();l.putString("id",r.getStringByKey("id"));l.putInteger("access",i);l.putString("type",r.getStringByKey("type"));l.putString("displayName",r.getStringByKey("displayName"))}let l=o.addNewStructure();l.putInteger("userCount",i);l.putInteger("teamCount",n);this.m_file.setAccessState(a)}}this.endSync()};t.OrcaFileFetchAccessDetailsAction.prototype.processSynchronization=function(e){if(t.XString.isEqual(this.m_file.getUri().getPath(),this.m_file.getFsBase().getRootDirectoryUri().getPath())||this.m_file.isVirtual()){this.addAllMessages(this.m_file);return false}let r=t.ContentlibQueryDataBuilder.create().setFile(this.m_file).setQueryConfig(this.m_paginationConfig).build();let i=this.m_file.getFsBase().getQuery(t.ContentlibRequestAction.GET_ACCESS_DETAILS).getPayload(r);this.processRpcFunction(i,e);return true};t.OrcaFileFetchMetadataAction=function(){};t.OrcaFileFetchMetadataAction.prototype=new t.OrcaFileBaseAction;t.OrcaFileFetchMetadataAction.prototype._ff_c="OrcaFileFetchMetadataAction";t.OrcaFileFetchMetadataAction.createAndRun=function(e,r,i,n,s){let o=new t.OrcaFileFetchMetadataAction;o.m_file=r.getDestinationFile();o.setData(o.m_file);o.setupActionAndRun(e,n,s,i);return o};t.OrcaFileFetchMetadataAction.prototype.m_file=null;t.OrcaFileFetchMetadataAction.prototype.onFunctionExecuted=function(e,r,i){this.addAllMessages(e);if(e.isValid()){if(t.notNull(r)&&r.getRootElement()!==null){let e=r.getRootElement();if(this.m_file.isVirtual()){e.putString(t.OrcaResourceConstants.NAME,this.m_file.getProviderMetadata().getStringByKey(t.XFileAttribute.NAME));e.putString(t.OrcaResourceConstants.DESCRIPTION,this.m_file.getProviderMetadata().getStringByKey(t.XFileAttribute.DESCRIPTION));this.m_file.setMetadataInternal(e);if(t.XString.isEqual(this.m_file.getName(),t.OrcaResourceConstants.CATALOG_VIRTUAL_FOLDER)||t.XString.isEqual(this.m_file.getName(),t.OrcaResourceConstants.WORKSPACES_VIRTUAL_FOLDER)||t.XString.isEqual(this.m_file.getName(),t.OrcaResourceConstants.RECENT_FILES_VIRTUAL_FOLDER)){this.m_file.getProviderMetadata().putBoolean(t.XFileAttribute.IS_WRITEABLE,false)}}else{this.m_file.setMetadataInternal(e);t.OrcaResponseParser.generateFilesInPath(e,this.m_file.getFsBase(),this.getProcess(),this.m_file.getUri(),t.OrcaResourceConstants.ANCESTOR_PATH)}this.m_file.setProviderIsExisting(true);this.setData(this.m_file)}else{this.addResponseError(r)}}else{this.m_file.addAllMessages(e)}this.endSync()};t.OrcaFileFetchMetadataAction.prototype.processSynchronization=function(e){if(t.XString.isEqual(this.m_file.getUri().getPath(),this.m_file.getFsBase().getRootDirectoryUri().getPath())||this.m_file.isVirtual()||!this.m_file.getProviderIsExisting()){this.addAllMessages(this.m_file);return false}let r=t.ContentlibQueryDataBuilder.create().setFile(this.m_file).build();let i=this.m_file.getFsBase().getQuery(t.ContentlibRequestAction.GET_RESOURCE_EX).getPayload(r);this.processRpcFunction(i,e);return true};t.OrcaFileFetchStoryLinkAction=function(){};t.OrcaFileFetchStoryLinkAction.prototype=new t.OrcaFileBaseAction;t.OrcaFileFetchStoryLinkAction.prototype._ff_c="OrcaFileFetchStoryLinkAction";t.OrcaFileFetchStoryLinkAction.GET_START_NODES_BY_TYPE_AND_CURRENT_NODE_ID="getStartNodesByTypeAndCurrentNodeId";t.OrcaFileFetchStoryLinkAction.createAndRun=function(e,r,i,n,s){let o=new t.OrcaFileFetchStoryLinkAction;o.m_file=r;o.setData(o.m_file);o.setupActionAndRun(e,n,s,i);return o};t.OrcaFileFetchStoryLinkAction.prototype.m_file=null;t.OrcaFileFetchStoryLinkAction.prototype.onFunctionExecuted=function(e,r,i){this.addAllMessages(e);if(e.isValid()){if(t.notNull(r)&&r.getRootElementGeneric()!==null){let e=r.getRootElementGeneric().asList();if(e.size()>0){let r=e.getStructureAt(0);let i=r.getStringByKey(t.OrcaResourceConstants.DATA_ANALYZER_LINK_ID_PARAM);let n=r.getStructureByKey(t.OrcaResourceConstants.DATA).getStringByKey(t.OrcaResourceConstants.NAME);this.m_file.getProviderAttributes().putString(t.XFileAttribute.SAC_LINKED_STORY_ID,i);this.m_file.getProviderAttributes().putString(t.XFileAttribute.SAC_LINKED_STORY_NAME,n)}}else{this.addResponseError(r)}}else{this.m_file.addAllMessages(e)}this.m_file.getProviderAttributes().remove(t.XFileAttribute.SAC_FETCH_LINKED_STORY);this.endSync()};t.OrcaFileFetchStoryLinkAction.prototype.processSynchronization=function(e){let r=t.PrFactory.createStructure();r.putString(t.OrcaResourceConstants.ACTION,t.OrcaFileFetchStoryLinkAction.GET_START_NODES_BY_TYPE_AND_CURRENT_NODE_ID);let i=r.putNewStructure(t.OrcaResourceConstants.DATA);i.putString(t.OrcaResourceConstants.DATA_ANALYZER_LINK_TYPE_PARAM,t.OrcaResourceConstants.RESOURCE_TYPE_STORY);i.putString("currentNodeId",this.m_file.getAttributes().getStringByKey(t.XFileAttribute.UNIQUE_ID));this.processRpcFunctionWithEndpoint(t.OrcaResourceConstants.REST_LINK_ENDPOINT,r,e);return true};t.OrcaFileGetChildrenAction=function(){};t.OrcaFileGetChildrenAction.prototype=new t.OrcaFileBaseAction;t.OrcaFileGetChildrenAction.prototype._ff_c="OrcaFileGetChildrenAction";t.OrcaFileGetChildrenAction.createAndRun=function(e,r,i,n,s){let o=new t.OrcaFileGetChildrenAction;o.m_file=r.getDestinationFile();o.m_config=s;o.setData(o.m_file);o.setupActionAndRun(e,n,null,i);return o};t.OrcaFileGetChildrenAction.prototype.m_config=null;t.OrcaFileGetChildrenAction.prototype.m_file=null;t.OrcaFileGetChildrenAction.prototype.m_hasSearchValue=false;t.OrcaFileGetChildrenAction.prototype.onFunctionExecuted=function(e,r,i){this.addAllMessages(e);if(e.isValid()){if(t.notNull(r)&&r.getRootElement()!==null){let e=this.m_file.getName();let i;let n=t.XUri.createChildDir(this.m_file.getUri(),null);let s;if(t.XString.isEqual(e,t.OrcaResourceConstants.WORKSPACES_VIRTUAL_FOLDER)){i=r.getRootElementGeneric().asList()}else{i=r.getRootElement()}let o=t.OrcaResponseParser.getTotalResourceCount(i);let a=t.XList.create();s=t.OrcaResponseParser.getFileListFromResponse(i,n,this.getProcess(),this.m_file.getFsBase(),this.m_file);if(t.XString.isEqual(e,t.OrcaResourceConstants.RECENT_FILES_VIRTUAL_FOLDER)){let e=25;let r=s.getIterator();while(r.hasNext()){let i=r.next();if(t.OrcaResponseFilterFactory.getDragonflyInsightFilter()(i)){a.add(i)}if(a.size()>=e){break}}s=a}else if(this.m_hasSearchValue){let e=s.getIterator();while(e.hasNext()){let r=e.next();if(t.OrcaResponseFilterFactory.getSearchResponseFilterBySubtype()(r,this.m_config)){a.add(r)}}s=a}let l=t.XList.create();if(t.notNull(s)){for(let t=0;t<s.size();t++){l.add(s.get(t))}}this.m_file.setProviderChildFiles(l,o);this.m_file.setProviderIsExisting(true)}else{this.addResponseError(r)}}else{this.m_file.addAllMessages(e)}this.endSync()};t.OrcaFileGetChildrenAction.prototype.processSynchronization=function(e){let r=this.m_file.getName();this.m_hasSearchValue=t.notNull(this.m_config)&&t.XStringUtils.isNotNullAndNotEmpty(this.m_config.getSearchValue());let i=t.XString.isEqual(r,t.OrcaResourceConstants.CATALOG_VIRTUAL_FOLDER);let n=this.m_file.getProviderMetadata().getBooleanByKey(t.XFileAttribute.IS_WORKSPACE_FILE);let s=t.ContentlibQueryDataBuilder.create().setFile(this.m_file).setQueryConfig(this.m_config).setPrivateFolder(this.m_file.getFsBase().getPrivateFolderName()).build();let o;if(t.XString.isEqual(this.m_file.getUri().getPath(),this.m_file.getFsBase().getRootDirectoryUri().getPath())){let e=this.m_file.getFsBase().getRootFolderChildren();let r=t.XList.create();if(t.notNull(e)){for(let t=0;t<e.size();t++){r.add(e.get(t))}}this.m_file.setProviderChildFiles(r,-1);this.addAllMessages(this.m_file);return false}else if(this.m_hasSearchValue){o=t.ContentlibRequestAction.SEARCH_ALL_RESOURCES}else if(t.XString.isEqual(r,t.OrcaResourceConstants.MY_FILES_VIRTUAL_FOLDER)){o=t.ContentlibRequestAction.GET_REPO_VIEW}else if(i){o=t.ContentlibRequestAction.SEARCH_ALL_RESOURCES}else if(t.XString.isEqual(r,t.OrcaResourceConstants.WORKSPACES_VIRTUAL_FOLDER)){o=t.ContentlibRequestAction.GET_SUB_NODES}else if(t.XString.isEqual(r,t.OrcaResourceConstants.RECENT_FILES_VIRTUAL_FOLDER)){o=t.ContentlibRequestAction.GET_RECENT_FILES}else if(n&&t.XString.endsWith(r,t.OrcaResourceConstants.RESOURCE_ID_ROOT)){o=t.ContentlibRequestAction.GET_SPACE_VIEW}else{o=t.ContentlibRequestAction.GET_ANCESTOR_AND_SUB_NODES}let a=this.m_file.getFsBase().getQuery(o).getPayload(s);this.processRpcFunction(a,e);return true};t.OrcaFileLoadAction=function(){};t.OrcaFileLoadAction.prototype=new t.OrcaFileBaseAction;t.OrcaFileLoadAction.prototype._ff_c="OrcaFileLoadAction";t.OrcaFileLoadAction.createAndRun=function(e,r,i,n,s,o){let a=new t.OrcaFileLoadAction;a.m_file=r;a.setData(a.m_file);a.setupActionAndRun(e,n,s,i);return a};t.OrcaFileLoadAction.prototype.m_file=null;t.OrcaFileLoadAction.prototype.onFunctionExecuted=function(e,r,i){this.addAllMessages(e);if(e.isValid()){if(t.notNull(r)&&r.getRootElement()!==null){let e=r.getRootElement();if(e.containsKey("cdata")&&e.getStructureByKey(t.OrcaResourceConstants.CDATA)!==null){let r=t.XContent.createJsonObjectContent(t.ContentType.APPLICATION_JSON,e.getStructureByKey(t.OrcaResourceConstants.CDATA));this.m_file.setProviderFileContent(r)}this.m_file.setMetadataInternal(e);this.m_file.setProviderIsExisting(true)}else{this.addResponseError(r)}}else{this.m_file.addAllMessages(e)}this.endSync()};t.OrcaFileLoadAction.prototype.processSynchronization=function(e){let r=t.ContentlibQueryDataBuilder.create().setFile(this.m_file).build();let i=this.m_file.getFsBase().getQuery(t.ContentlibRequestAction.GET_CONTENT).getPayload(r);this.processRpcFunction(i,e);return true};t.OrcaFileMkdirAction=function(){};t.OrcaFileMkdirAction.prototype=new t.OrcaFileBaseAction;t.OrcaFileMkdirAction.prototype._ff_c="OrcaFileMkdirAction";t.OrcaFileMkdirAction.createAndRun=function(e,r,i,n,s){let o=new t.OrcaFileMkdirAction;o.m_file=r.getDestinationFile();o.setData(o.m_file);o.setupActionAndRun(e,n,s,i);return o};t.OrcaFileMkdirAction.prototype.m_file=null;t.OrcaFileMkdirAction.prototype.onFunctionExecuted=function(e,r,i){this.addAllMessages(e);if(e.isValid()){if(t.notNull(r)&&r.getRootElement()!==null){let e=r.getRootElement();this.m_file.getFsBase().dropFileFromCache(this.m_file.getUri());let i=this.m_file.getUri();let n=t.XUri.createParent(i);this.m_file=t.OrcaFile.create(e,this.getProcess(),this.getActionContext(),n);this.setData(this.m_file)}else{this.addResponseError(r)}}else{this.m_file.addAllMessages(e)}this.endSync()};t.OrcaFileMkdirAction.prototype.processSynchronization=function(e){let r=t.ContentlibQueryDataBuilder.create().setFile(this.m_file).build();let i=this.m_file.getFsBase().getQuery(t.ContentlibRequestAction.CREATE_FOLDER).getPayload(r);this.processRpcFunction(i,e);return true};t.OrcaFileSaveAction=function(){};t.OrcaFileSaveAction.prototype=new t.OrcaFileBaseAction;t.OrcaFileSaveAction.prototype._ff_c="OrcaFileSaveAction";t.OrcaFileSaveAction.createAndRun=function(e,r,i,n,s,o,a,l,c){let u=new t.OrcaFileSaveAction;u.m_file=r.getDestinationFile();if(r.isLinkNodeType()){u.m_resourceType=u.m_file.getProviderMetadata().getStringByKey(t.XFileAttribute.NODE_TYPE)}else{u.m_resourceType=c.getStringByKey(t.XFileAttribute.NODE_TYPE)}u.m_action=l;u.setData(u.m_file);u.m_content=i;u.setupActionAndRun(e,s,o,n);return u};t.OrcaFileSaveAction.prototype.m_action=null;t.OrcaFileSaveAction.prototype.m_content=null;t.OrcaFileSaveAction.prototype.m_file=null;t.OrcaFileSaveAction.prototype.m_resourceType=null;t.OrcaFileSaveAction.prototype.onFunctionExecuted=function(e,r,i){this.addAllMessages(e);if(e.isValid()){if(t.notNull(r)&&r.getRootElement()!==null){let e=r.getRootElement();if(e.containsKey(t.OrcaResourceConstants.DATA_ANALYZER_LINK_PATH_RESPONSE_END_NODE)){let r=e.getListByKey(t.OrcaResourceConstants.DATA_ANALYZER_LINK_PATH_NODES);e=r.getStructureAt(r.size()-1).getStructureByKey(t.OrcaResourceConstants.DATA)}if(t.XString.isEqual(this.m_action,t.OrcaFileBaseAction.SAVE)){let r=this.m_file.getUri();let i=t.XUri.createParent(r);this.m_file.getFsBase().dropFileFromCache(this.m_file.getUri());this.m_file=t.OrcaFile.create(e,this.getProcess(),this.getActionContext(),i);this.setData(this.m_file)}else{this.m_file.setMetadataInternal(e)}}else{this.addResponseError(r)}}else{this.m_file.addAllMessages(e)}this.endSync()};t.OrcaFileSaveAction.prototype.processSynchronization=function(e){let r=this.m_file.getAttributes().containsKey(t.XFileAttribute.SAC_INTEROP_STORY_ID)?t.OrcaResourceConstants.REST_LINK_ENDPOINT:t.OrcaResourceConstants.REST_ENDPOINT;let i=t.ContentlibQueryDataBuilder.create().setFile(this.m_file).setResourceType(this.m_resourceType).setContent(this.m_content).setLinkParameters(this.m_file.getAttributes()).build();let n=t.ContentlibRequestAction.CREATE_CONTENT;if(t.XString.isEqual(this.m_action,t.OrcaFileBaseAction.UPDATE)){n=t.ContentlibRequestAction.UPDATE_CONTENT}let s=this.m_file.getFsBase().getQuery(n).getPayload(i);this.processRpcFunctionWithEndpoint(r,s,e);return true};t.OrcaFileShareAction=function(){};t.OrcaFileShareAction.prototype=new t.OrcaFileBaseAction;t.OrcaFileShareAction.prototype._ff_c="OrcaFileShareAction";t.OrcaFileShareAction.createAndRun=function(e,r,i,n,s,o,a,l){let c=new t.OrcaFileShareAction;c.m_file=r;c.m_sendNotificationEmail=a;c.m_shareInfo=o;c.m_allUsersWithExistingAccess=l;c.setData(c.m_file);c.setupActionAndRun(e,n,s,i);return c};t.OrcaFileShareAction.prototype.m_allUsersWithExistingAccess=false;t.OrcaFileShareAction.prototype.m_file=null;t.OrcaFileShareAction.prototype.m_sendNotificationEmail=false;t.OrcaFileShareAction.prototype.m_shareInfo=null;t.OrcaFileShareAction.prototype.onFunctionExecuted=function(t,e,r){this.addAllMessages(t);this.endSync()};t.OrcaFileShareAction.prototype.processSynchronization=function(e){let r=t.ContentlibQueryDataBuilder.create().setFile(this.m_file).setAccessState(this.m_shareInfo).setSendEmailNotification(this.m_sendNotificationEmail).setIsAllUsersWithExistingAccess(this.m_allUsersWithExistingAccess).build();let i=this.m_file.getFsBase().getQuery(t.ContentlibRequestAction.SHARE_FILE).getPayload(r);this.processRpcFunction(i,e);return true};t.ContentlibModule=function(){};t.ContentlibModule.prototype=new t.DfModule;t.ContentlibModule.prototype._ff_c="ContentlibModule";t.ContentlibModule.s_module=null;t.ContentlibModule.getInstance=function(){if(t.isNull(t.ContentlibModule.s_module)){t.DfModule.checkInitialized(t.RuntimeModule.getInstance());t.ContentlibModule.s_module=t.DfModule.startExt(new t.ContentlibModule);t.ContentlibRequestAction.staticSetup();t.ContentlibLocalizationProvider.staticSetup();t.ProgramRegistry.setProgramFactory(new t.SubSysFsContentlibPrg);t.DfModule.stopExt(t.ContentlibModule.s_module)}return t.ContentlibModule.s_module};t.ContentlibModule.prototype.getName=function(){return"ff2150.contentlib"};t.ContentlibModule.getInstance();return t});
//# sourceMappingURL=ff2150.contentlib.js.map