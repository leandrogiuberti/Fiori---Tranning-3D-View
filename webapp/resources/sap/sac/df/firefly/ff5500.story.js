/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff4000.protocol.ina"],function(t){"use strict";t.OcOrcaUtils={processTime:function(e){let a=t.XString.replace(e,"T"," ");return t.XStringUtils.stripRight(a,8)}};t.OcStoryCatalog=function(){};t.OcStoryCatalog.prototype=new t.XObject;t.OcStoryCatalog.prototype._ff_c="OcStoryCatalog";t.OcStoryCatalog.prototype.m_nameToStory=null;t.OcStoryCatalog.prototype.addStory=function(t){this.getStoryByNameMap().put(t.getName(),t)};t.OcStoryCatalog.prototype.getCatalogItemByStoryName=function(t){return this.getStoryByNameMap().getByKey(t)};t.OcStoryCatalog.prototype.getCatalogItemdByStoryId=function(e){let a=this.getCatalogItems();let r=a.size();for(let n=0;n<r;n++){let r=a.get(n);if(t.XString.isEqual(r.getId(),e)){return r}}return null};t.OcStoryCatalog.prototype.getCatalogItems=function(){return this.getStoryByNameMap().getValuesAsReadOnlyList()};t.OcStoryCatalog.prototype.getStoryByNameMap=function(){if(t.isNull(this.m_nameToStory)){this.m_nameToStory=t.XLinkedHashMapByString.create()}return this.m_nameToStory};t.OcStoryCatalog.prototype.hasElements=function(){return this.getCatalogItems().hasElements()};t.OcStoryCatalog.prototype.releaseObject=function(){this.m_nameToStory=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_nameToStory);t.XObject.prototype.releaseObject.call(this)};t.OcStoryCatalogLoadOptions=function(){};t.OcStoryCatalogLoadOptions.prototype=new t.XObject;t.OcStoryCatalogLoadOptions.prototype._ff_c="OcStoryCatalogLoadOptions";t.OcStoryCatalogLoadOptions.prototype.m_catalogType=null;t.OcStoryCatalogLoadOptions.prototype.m_recentlyAccessedStories=0;t.OcStoryCatalogLoadOptions.prototype.getCatalogType=function(){if(t.isNull(this.m_catalogType)){return t.OcStoryCatalogType.SEARCH_LIST}return this.m_catalogType};t.OcStoryCatalogLoadOptions.prototype.getNumberOfRecentlyAccessedStories=function(){return this.m_recentlyAccessedStories};t.OcStoryCatalogLoadOptions.prototype.releaseObject=function(){this.m_catalogType=null;this.m_recentlyAccessedStories=0;t.XObject.prototype.releaseObject.call(this)};t.OcStoryCatalogLoadOptions.prototype.setCatalogType=function(t){this.m_catalogType=t};t.OcStoryCatalogLoadOptions.prototype.setNumberOfRecentlyAccessedStories=function(t){this.m_recentlyAccessedStories=t};t.OcStoryCatalogLoadOptions.prototype.toString=function(){let e=t.XStringBuffer.create();e.append("Catalog Type: ").append(this.getCatalogType().getName()).appendNewLine().append("Number of recently accessed stories: ").appendInt(this.getNumberOfRecentlyAccessedStories());return e.toString()};t.OcStoryCatalogParser=function(){};t.OcStoryCatalogParser.prototype=new t.XObject;t.OcStoryCatalogParser.prototype._ff_c="OcStoryCatalogParser";t.OcStoryCatalogParser.prototype.addDisplayNames=function(e,a){let r=a.getStringByKey(t.OcOrcaConstants.STORY_CREATED_BY_DISPLAY_NAME);let n="";if(t.isNull(r)){let e=a.getStructureByKey(t.OcOrcaConstants.STORY_DATA);if(t.notNull(e)){let a=e.getStructureByKey(t.OcOrcaConstants.STORY_METADATA);if(t.notNull(a)){r=a.getStringByKey(t.OcOrcaConstants.STORY_OWNER_DISPLAY_NAME);n=a.getStringByKey(t.OcOrcaConstants.STORY_CHANGED_BY_DISPLAY_NAME)}}}else{n=a.getStringByKey(t.OcOrcaConstants.STORY_MODIFIED_BY_DISPLAY_NAME)}e.setCreatedByDisplayName(r);e.setModifiedByDisplayName(n)};t.OcStoryCatalogParser.prototype.getStoryCatalog=function(e){if(t.isNull(e)){return new t.OcStoryCatalog}let a;if(e.getType()===t.PrElementType.STRUCTURE){a=e.asStructure().getListByKey(t.OcOrcaConstants.STORY_SUB_NODES)}else{a=e.asList()}let r=this.parseStoryList(a);return r};t.OcStoryCatalogParser.prototype.parseLink=function(e){let a=e.getByKey(t.OcOrcaConstants.STORY_SOURCE_RESOURCE);if(t.notNull(a)&&a.isStructure()){return this.parseStory(a.asStructure())}return null};t.OcStoryCatalogParser.prototype.parseStory=function(e){let a=e.getStringByKey(t.OcOrcaConstants.STORY_RESOURCE_ID);let r=e.getStringByKey(t.OcOrcaConstants.STORY_NAME);let n=t.OcStoryCatalogItem.create(a,r);n.setDescription(e.getStringByKey(t.OcOrcaConstants.STORY_DESCRIPTION));n.setCreateTime(t.OcOrcaUtils.processTime(e.getStringByKey(t.OcOrcaConstants.STORY_CREATED_TIME)));n.setModifiedTime(t.OcOrcaUtils.processTime(e.getStringByKey(t.OcOrcaConstants.STORY_MODIFIED_TIME)));n.setCreatedBy(e.getStringByKey(t.OcOrcaConstants.STORY_CREATED_BY));n.setModifiedBy(e.getStringByKey(t.OcOrcaConstants.STORY_MODIFIED_BY));n.setUpdateCounter(t.OcStoryUtils.getIntegerFromStructureByName(e,t.OcOrcaConstants.STORY_UPDATE_COUNTER));this.addDisplayNames(n,e);return n};t.OcStoryCatalogParser.prototype.parseStoryElement=function(e){let a=e.getStringByKey(t.OcOrcaConstants.STORY_RESOURCE_TYPE);if(t.XString.isEqual(a,t.OcOrcaConstants.STORY_RESOURCE_TYPE_STORY)){return this.parseStory(e)}else if(t.XString.isEqual(a,t.OcOrcaConstants.STORY_RESOURCE_TYPE_LINK)){return this.parseLink(e)}return null};t.OcStoryCatalogParser.prototype.parseStoryList=function(e){let a=new t.OcStoryCatalog;let r=e.size();for(let n=0;n<r;n++){let r=e.get(n);if(r.isStructure()){let e=this.parseStoryElement(r.asStructure());if(t.notNull(e)){a.addStory(e)}}}return a};t.OrcaSystemConverter=function(){};t.OrcaSystemConverter.prototype=new t.XObject;t.OrcaSystemConverter.prototype._ff_c="OrcaSystemConverter";t.OrcaSystemConverter.CLIENT_CONTEXT="Client";t.OrcaSystemConverter.s_orcaSystemConverter=null;t.OrcaSystemConverter.create=function(){if(t.isNull(t.OrcaSystemConverter.s_orcaSystemConverter)){t.OrcaSystemConverter.s_orcaSystemConverter=new t.OrcaSystemConverter}return t.OrcaSystemConverter.s_orcaSystemConverter};t.OrcaSystemConverter.getValue=function(e,a,r){let n=e.getStringByKey(a);if(t.isNull(n)){n=e.getStringByKey(r)}return n};t.OrcaSystemConverter.setConverter=function(e){t.OrcaSystemConverter.s_orcaSystemConverter=e};t.OrcaSystemConverter.prototype.convert=function(e,a,r){let n=e.getSystemDescription();let o=e.getSession();let s=t.XList.create();let i=a.getStructureByKey("Systems");if(t.notNull(i)){let e=i.getKeysAsReadOnlyList();for(let a=0;a<e.size();a++){let c=e.get(a);if(t.XString.isEqual(r,t.OrcaSystemConverter.CLIENT_CONTEXT)||!t.XString.isEqual(t.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME,c)&&!t.XString.isEqual(n.getSystemName(),c)){let l=i.getStructureByKey(e.get(a));let O=this.convertToProperties(l,n,r);if(t.notNull(O)){let e=t.SystemDescription.createExt(o,null,c,O);s.add(e)}}}}return s};t.OrcaSystemConverter.prototype.convertToProperties=function(e,a,r){let n=t.PrFactory.createStructure();let o=t.OrcaSystemConverter.getValue(e,"SYSTEM_TYPE","systemType");let s=t.SystemType.lookup(o);if(t.isNull(s)){return null}if(s.isTypeOf(t.SystemType.BW)){let a=t.OrcaSystemConverter.getValue(e,"CLIENT","client");n.putString(t.ConnectionParameters.CLIENT,a)}let i=t.OrcaSystemConverter.getValue(e,"FPA_AUTHENTICATION_METHOD","authenticationMethod");if(t.isNull(i)||t.XString.isEqual(i,"NOAUTH")||t.XString.isEqual(i,"NONE")){n.putString(t.ConnectionParameters.AUTHENTICATION_TYPE,t.AuthenticationType.NONE.getName())}else if(t.XString.isEqual(i,"SAML")){n.putString(t.ConnectionParameters.AUTHENTICATION_TYPE,t.AuthenticationType.SAML_WITH_PASSWORD.getName())}else if(t.XString.isEqual(i,"BASIC")){n.putString(t.ConnectionParameters.AUTHENTICATION_TYPE,t.AuthenticationType.BASIC.getName())}let c=t.OrcaSystemConverter.getValue(e,"FPA_CONNECTION_TYPE","connectionType");n.putString("connectionType",c);let l=e.getBooleanByKeyExt(t.OcOrcaConstants.STORY_IS_LIVE_INTEGRATION_TYPE,false);if(l){n.putString(t.OcOrcaConstants.STORY_IS_LIVE_INTEGRATION_TYPE,"YES")}let O=t.OrcaSystemConverter.getValue(e,"PROTOCOL","protocol");n.putString(t.ConnectionParameters.PROTOCOL,O);let u=t.OrcaSystemConverter.getValue(e,"HOST","host");n.putString(t.ConnectionParameters.HOST,u);let g=t.OrcaSystemConverter.getValue(e,"PORT","port");n.putString(t.ConnectionParameters.PORT,g);n.putString(t.ConnectionParameters.SYSTEM_TYPE,o);let p=t.OrcaSystemConverter.getValue(e,"WEBDISPATCHER_URI","webdispatcherUri");if(t.XStringUtils.isNotNullAndNotEmpty(p)){let r=t.OrcaSystemConverter.getValue(e,"PREFIX","prefix");n.putString(t.ConnectionParameters.PREFIX,r);let o=t.XStringBuffer.create().append(a.getScheme()).append("://").append(a.getHost()).append(":").appendInt(a.getPort()).append(p).toString();n.putString(t.ConnectionParameters.WEBDISPATCHER_URI,o)}let y=t.XProperties.create();let _=n.getKeysAsReadOnlyList();for(let t=0;t<_.size();t++){let e=_.get(t);let a=n.getStringByKey(e);y.put(e,a)}return y};t.OcOrcaContext=function(){};t.OcOrcaContext.prototype=new t.XObject;t.OcOrcaContext.prototype._ff_c="OcOrcaContext";t.OcOrcaContext.create=function(e,a,r){let n=new t.OcOrcaContext;n.setupContext(e,a,r);return n};t.OcOrcaContext.prototype.m_connection=null;t.OcOrcaContext.prototype.m_messageManager=null;t.OcOrcaContext.prototype.m_storyEntityFactory=null;t.OcOrcaContext.prototype.m_storyEntityHelper=null;t.OcOrcaContext.prototype.m_tolerant=false;t.OcOrcaContext.prototype.createMessageManager=function(e){if(t.isNull(e)){return t.MessageManagerSimple.createMessageManager()}return t.MessageManager.createMessageManagerExt(e)};t.OcOrcaContext.prototype.getConnection=function(){return this.m_connection};t.OcOrcaContext.prototype.getMessageManager=function(){return this.m_messageManager};t.OcOrcaContext.prototype.getStoryEntityFactory=function(){if(t.isNull(this.m_storyEntityFactory)){this.m_storyEntityFactory=t.OcOrcaStoryEntityFactory.create(this)}return this.m_storyEntityFactory};t.OcOrcaContext.prototype.getStoryEntityHelper=function(){return this.m_storyEntityHelper};t.OcOrcaContext.prototype.isTolerant=function(){return this.m_tolerant};t.OcOrcaContext.prototype.releaseObject=function(){this.m_connection=null;this.m_messageManager=t.XObjectExt.release(this.m_messageManager);this.m_storyEntityHelper=t.XObjectExt.release(this.m_storyEntityHelper);this.m_storyEntityFactory=t.XObjectExt.release(this.m_storyEntityFactory);t.XObject.prototype.releaseObject.call(this)};t.OcOrcaContext.prototype.setIsTolerant=function(t){this.m_tolerant=t};t.OcOrcaContext.prototype.setupContext=function(e,a,r){t.XObject.prototype.setup.call(this);if(t.isNull(e)||!e.hasElements()){throw t.XException.createIllegalArgumentException("The story cannot be null or empty")}this.m_connection=r;this.m_messageManager=this.createMessageManager(a);this.m_tolerant=true;this.m_storyEntityHelper=t.OcOrcaStoryEntityHelper.create(e,this)};t.OcOrcaStoryEntityFactory=function(){};t.OcOrcaStoryEntityFactory.prototype=new t.XObject;t.OcOrcaStoryEntityFactory.prototype._ff_c="OcOrcaStoryEntityFactory";t.OcOrcaStoryEntityFactory.create=function(e){let a=new t.OcOrcaStoryEntityFactory;a.setupFactory(e);return a};t.OcOrcaStoryEntityFactory.prototype.m_context=null;t.OcOrcaStoryEntityFactory.prototype.m_pageWidgetHelper=null;t.OcOrcaStoryEntityFactory.prototype.createCalculationVariables=function(){return t.OcOrcaCalculationVariables.create(this.getContext())};t.OcOrcaStoryEntityFactory.prototype.createCalculations=function(){return t.OcOrcaCalculations.create(this.getContext())};t.OcOrcaStoryEntityFactory.prototype.createDatasets=function(){return t.OcOrcaDatasets.create(this.getContext())};t.OcOrcaStoryEntityFactory.prototype.createFieldSelections=function(){return t.OcOrcaFieldSelections.create(this.getContext())};t.OcOrcaStoryEntityFactory.prototype.createImages=function(e){return t.OcOrcaImages.create(e,this.getContext())};t.OcOrcaStoryEntityFactory.prototype.createMeasurySyncs=function(){return t.OcOrcaMeasureSyncs.create(this.getContext())};t.OcOrcaStoryEntityFactory.prototype.createPageByPageIdMap=function(e){let a=t.XLinkedHashMapByString.create();let r=this.getPageWidgetHelper().getPageIds();if(!t.XCollectionUtils.hasElements(r)){return a}for(let n=0;n<r.size();n++){let o=r.get(n);let s=this.getPageWidgetHelper().getPageJsonByPageId(o);if(t.notNull(s)){let r=s.getStringByKey(t.OcOrcaConstants.PAGE_TITLE);let n=t.OcOrcaPage.create(o,r,s,e);if(t.notNull(n)){a.put(o,n)}}}return a};t.OcOrcaStoryEntityFactory.prototype.createPagesOfStory=function(t){return this.createPageByPageIdMap(t)};t.OcOrcaStoryEntityFactory.prototype.createThresholds=function(){return t.OcOrcaThresholds.create(this.getContext())};t.OcOrcaStoryEntityFactory.prototype.createWidget=function(e,a){let r=this.getPageWidgetHelper().getWidgetJsonByWidgetId(e);if(t.isNull(r)){return null}let n=r.getStringByKey(t.OcOrcaConstants.WIDGET_CLASS);if(t.XString.containsString(n,t.OcOrcaConstants.WIDGET_TYPE_CHART)){return t.OcOrcaChartWidget.create(e,r,a)}else if(t.XString.containsString(n,t.OcOrcaConstants.WIDGET_TYPE_TABLE)){return t.OcOrcaGridWidget.create(e,r,a)}else if(t.XString.containsString(n,t.OcOrcaConstants.WIDGET_TYPE_TEXT)||t.XString.containsString(n,t.OcOrcaConstants.WIDGET_TYPE_HEADER)){return t.OcOrcaWidget.create(e,t.OcWidgetType.TEXT,r,a)}else if(t.XString.containsString(n,t.OcOrcaConstants.WIDGET_TYPE_IMAGE)){return t.OcOrcaWidget.create(e,t.OcWidgetType.IMAGE,r,a)}else if(t.XString.containsString(n,t.OcOrcaConstants.WIDGET_TYPE_PICTOGRAM)||t.XString.containsString(n,t.OcOrcaConstants.WIDGET_TYPE_PICTOGRAM_SHAPE)){return t.OcOrcaWidget.create(e,t.OcWidgetType.PICTOGRAM,r,a)}else if(t.XString.containsString(n,t.OcOrcaConstants.WIDGET_TYPE_PAGE_FILTER)){return t.OcOrcaWidget.create(e,t.OcWidgetType.PAGE_FILTER,r,a)}else if(t.XString.containsString(n,t.OcOrcaConstants.WIDGET_TYPE_CALC_INPUT_CONTROL)){return t.OcOrcaWidget.create(e,t.OcWidgetType.CALCULATION_INPUT_CONTROL,r,a)}else if(t.XString.containsString(n,t.OcOrcaConstants.WIDGET_TYPE_FIELD_SELECTION_INPUT_CONTROL)){return t.OcOrcaWidget.create(e,t.OcWidgetType.FIELD_SELECTION_INPUT_CONTROL,r,a)}return null};t.OcOrcaStoryEntityFactory.prototype.createWidgetByWidgetIdMap=function(e){let a=t.XLinkedHashMapByString.create();let r=this.getPageWidgetHelper().getWidgetIdsByPageId(e.getId());if(!t.XCollectionUtils.hasElements(r)){return a}for(let n=0;n<r.size();n++){let o=r.get(n);let s=this.createWidget(o,e);if(t.notNull(s)){a.put(o,s)}}return a};t.OcOrcaStoryEntityFactory.prototype.createWidgetsOfPage=function(t){return this.createWidgetByWidgetIdMap(t)};t.OcOrcaStoryEntityFactory.prototype.getContext=function(){return this.m_context};t.OcOrcaStoryEntityFactory.prototype.getFirstWidgetByType=function(e,a){let r=this.getPageWidgetHelper().getWidgetIdsByPageId(e.getId());if(!t.XCollectionUtils.hasElements(r)){return null}for(let n=0;n<r.size();n++){let o=r.get(n);let s=this.getPageWidgetHelper().getWidgetJsonByWidgetId(o);if(t.isNull(s)){return null}let i=s.getStringByKey(t.OcOrcaConstants.WIDGET_CLASS);let c=t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(s,t.OcOrcaConstants.PATH_FROM_DEFINITION_TO_CHART_TYPE);if(a===t.OcWidgetType.KPI&&t.XString.containsString(i,t.OcOrcaConstants.WIDGET_TYPE_CHART)&&(t.XString.isEqual(c,"metric")||t.XString.isEqual(c,"bullet"))){return t.OcOrcaKpiWidget.create(o,s,e)}else if(a===t.OcWidgetType.ANALYTICAL_CARD&&t.XString.containsString(i,t.OcOrcaConstants.WIDGET_TYPE_CHART)&&(t.XString.isEqual(c,"metric")||t.XString.isEqual(c,"bullet"))){return t.OcOrcaAnalyticalCardWidget.create(o,s,e)}else if(a===t.OcWidgetType.CHART&&t.XString.containsString(i,t.OcOrcaConstants.WIDGET_TYPE_CHART)&&!t.XString.isEqual(c,"metric")&&!t.XString.isEqual(c,"bullet")){return t.OcOrcaChartWidget.create(o,s,e)}else if(a===t.OcWidgetType.GRID&&t.XString.containsString(i,t.OcOrcaConstants.WIDGET_TYPE_TABLE)){return t.OcOrcaGridWidget.create(o,s,e)}}return null};t.OcOrcaStoryEntityFactory.prototype.getPageWidgetHelper=function(){if(t.isNull(this.m_pageWidgetHelper)){this.m_pageWidgetHelper=t.OcOrcaPageWidgetHelper.create(this.getContext())}return this.m_pageWidgetHelper};t.OcOrcaStoryEntityFactory.prototype.releaseObject=function(){this.m_context=null;this.m_pageWidgetHelper=t.XObjectExt.release(this.m_pageWidgetHelper);t.XObject.prototype.releaseObject.call(this)};t.OcOrcaStoryEntityFactory.prototype.setupFactory=function(e){t.XObject.prototype.setup.call(this);this.m_context=e};t.OcOrcaCalculationVariables=function(){};t.OcOrcaCalculationVariables.prototype=new t.XObject;t.OcOrcaCalculationVariables.prototype._ff_c="OcOrcaCalculationVariables";t.OcOrcaCalculationVariables.create=function(e){let a=new t.OcOrcaCalculationVariables;a.setupCalculationVariables(e);return a};t.OcOrcaCalculationVariables.prototype.m_calculationVariables=null;t.OcOrcaCalculationVariables.prototype.m_context=null;t.OcOrcaCalculationVariables.prototype.addOrcaCalcVarsToCalcVars=function(e,a){let r=e.getListByKey(t.OcOrcaConstants.STORY_CALCULATION_VARIABLE_ENTITIES);if(t.PrUtils.isListEmpty(r)){return}for(let e=0;e<r.size();e++){let n=r.getStructureAt(e);let o=this.createCalcvarFromOrcaCalcVarEntity(n);if(t.notNull(o)){a.put(o.getId(),o)}}};t.OcOrcaCalculationVariables.prototype.createCalcvarFromOrcaCalcVarEntity=function(e){let a=e.getStructureByKey(t.OcOrcaConstants.ID_ELEMENT);if(t.isNull(a)){return null}let r=a.getStringByKey(t.OcOrcaConstants.ID_ELEMENT);let n=e.getStringByKey(t.OcOrcaConstants.STORY_CALCULATION_VARIABLE_NAME);let o=a.getStringByKey(t.OcOrcaConstants.STORY_CALCULATION_VARIABLE_TYPE);let s=e.getStringByKey(t.OcOrcaConstants.STORY_CALCULATION_VARIABLE_VALUE_TYPE);let i=t.OcCalculationVariable.create(r,n,o,s);if(t.XString.isEqual(o,t.OcOrcaConstants.STORY_CALCULATION_VARIABLE)){i.setSelectionInfos(e.getStructureByKey(t.OcOrcaConstants.STORY_CALCULATION_VARIABLE_SELECTION_INFO))}return i};t.OcOrcaCalculationVariables.prototype.getCalculationVariableById=function(t){return this.getCalculationVariables().getByKey(t)};t.OcOrcaCalculationVariables.prototype.getCalculationVariables=function(){if(t.notNull(this.m_calculationVariables)){return this.m_calculationVariables}this.m_calculationVariables=t.XHashMapByString.create();let e=this.getStoryEntityHelper().getEntitiesAsJsonByEntityType(t.OcOrcaConstants.STORY_ENTITY_CALCULATION_VARIABLE);for(let t=0;t<e.size();t++){let a=e.get(t);this.addOrcaCalcVarsToCalcVars(a,this.m_calculationVariables)}return this.m_calculationVariables};t.OcOrcaCalculationVariables.prototype.getContext=function(){return this.m_context};t.OcOrcaCalculationVariables.prototype.getStoryEntityHelper=function(){return this.getContext().getStoryEntityHelper()};t.OcOrcaCalculationVariables.prototype.releaseObject=function(){this.m_context=null;this.m_calculationVariables=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_calculationVariables);t.XObject.prototype.releaseObject.call(this)};t.OcOrcaCalculationVariables.prototype.setupCalculationVariables=function(e){t.XObject.prototype.setup.call(this);this.m_context=e};t.OcOrcaCalculationVariables.prototype.toString=function(){let e=this.getCalculationVariables().getValuesAsReadOnlyList();let a=t.XStringBuffer.create();a.append("calc vars:");for(let t=0;t<e.size();t++){let r=e.get(t);a.appendNewLine().appendInt(t+1).append(". FieldSelection: ").append(r.getId()).append(" of type ").append(r.getCalculationVariableType())}return a.toString()};t.OcOrcaCalculations=function(){};t.OcOrcaCalculations.prototype=new t.XObject;t.OcOrcaCalculations.prototype._ff_c="OcOrcaCalculations";t.OcOrcaCalculations.create=function(e){let a=new t.OcOrcaCalculations;a.setupCalculations(e);return a};t.OcOrcaCalculations.prototype.m_calculations=null;t.OcOrcaCalculations.prototype.m_context=null;t.OcOrcaCalculations.prototype.addOrcaCalculationToCalculations=function(e,a){let r=e.getListByKey(t.OcOrcaConstants.STORY_CALCULATION_ENTITIES);if(t.PrUtils.isListEmpty(r)){return}for(let e=0;e<r.size();e++){let n=r.getStructureAt(e);let o=this.createCalculationFromOrcaCalculationEntity(n);if(t.notNull(o)){a.put(o.getId(),o)}}};t.OcOrcaCalculations.prototype.createCalculationFromOrcaCalculationEntity=function(e){let a=e.getStructureByKey(t.OcOrcaConstants.ID_ELEMENT);if(t.isNull(a)){return null}let r=a.getStringByKey(t.OcOrcaConstants.ID_ELEMENT);let n=e.getStringByKey(t.OcOrcaConstants.STORY_CALCULATION_NAME);let o=a.getStringByKey(t.OcOrcaConstants.STORY_CALCULATION_TYPE);let s=e.getStringByKey(t.OcOrcaConstants.STORY_CALCULATION_CALCULATION_TYPE);let i=a.getStringByKey(t.OcOrcaConstants.STORY_CALCULATION_SUBTYPE);if(t.notNull(i)&&!t.XString.startsWith(i,o)){o=t.XStringUtils.concatenate3(o,".",i)}if(t.notNull(s)){o=t.XStringUtils.concatenate3(o,".",s)}let c=t.OcCalculation.create(r,n,o);c.setFormatting(e.getByKey(t.OcOrcaConstants.STORY_CALCULATION_FORMAT));if(t.XString.isEqual(o,t.OcOrcaConstants.STORY_CACLUALTION_RESTRICTED_MEASURE)){c.setMeasureId(e.getByKey(t.OcOrcaConstants.STORY_CALCULATION_MEASURE_ID));c.setReferenceMeasureId(e.getByKey(t.OcOrcaConstants.STORY_CALCULATION_REFERENCE_MEASURE_ID));c.setSelections(e.getByKey(t.OcOrcaConstants.STORY_CALCULATION_SELECTIONS))}else if(t.XString.startsWith(o,t.OcOrcaConstants.STORY_ENTITY_CALCULATION)||t.XString.startsWith(o,t.OcOrcaConstants.STORY_ENTITY_CALCULATED_DIMENSION)){c.setMeasureId(e.getByKey(t.OcOrcaConstants.STORY_CALCULATION_MEASURE_ID));c.setReferenceMeasureId(e.getByKey(t.OcOrcaConstants.STORY_CALCULATION_REFERENCE_MEASURE_ID));if(e.containsKey("formulaAST")){let a=t.PrFactory.createStructure();a.putNotNullAndNotEmpty("ast",t.PrUtils.deepCopyElement(e.getStructureByKey("formulaAST")));c.setFormula(a)}else{c.setFormula(e.getByKey(t.OcOrcaConstants.STORY_CALCULATION_FORMULA))}c.setAggregation(e.getStringByKeyExt(t.OcOrcaConstants.STORY_CALCULATION_AGGREGATION,""));c.setAggregationDimensions(e.getListByKey(t.OcOrcaConstants.STORY_CALCULATION_AGGREGATION_DIMENSIONS));c.setExceptionAggregation(e.getStringByKeyExt(t.OcOrcaConstants.STORY_CALCULATION_EXCEPTION_AGGREGATION,""));c.setExceptionAggregationDimensions(e.getListByKey(t.OcOrcaConstants.STORY_CALCULATION_EXCEPTION_AGGREGATION_DIMENSIONS));c.setValuesNotIn(e.getBooleanByKeyExt(t.OcOrcaConstants.STORY_CALCULATION_VALUES_NOT_IN,false));c.setStartDate(e.getStructureByKey(t.OcOrcaConstants.STORY_CALCULATION_START_DATE));c.setEndDate(e.getStructureByKey(t.OcOrcaConstants.STORY_CALCULATION_END_DATE));c.setStartDateCurrentIfNull(e.getBooleanByKeyExt(t.OcOrcaConstants.STORY_CALCULATION_START_DATE_IF_NULL,false));c.setEndDateCurrentIfNull(e.getBooleanByKeyExt(t.OcOrcaConstants.STORY_CALCULATION_END_DATE_IF_NULL,false));c.setTimezoneOffsetForCurrentDate(e.getIntegerByKeyExt(t.OcOrcaConstants.STORY_CALCULATION_TIME_ZONE_OFFSET_FOR_CURRENT_DATE,0));c.setResultGranularity(e.getStringByKey(t.OcOrcaConstants.STORY_CALCULATION_RESULT_GRANULARITY));c.setValueType(e.getStringByKey(t.OcOrcaConstants.STORY_CALCULATION_VALUE_TYPE));c.setGroupThresholds(e.getListByKey(t.OcOrcaConstants.STORY_CALCULATION_GROUP_THRESHOLDS));c.setSelectedDimensionId(e.getStructureByKey(t.OcOrcaConstants.STORY_CALCULATION_SELECTED_DIMENSION_ID));c.setToText(e.getBooleanByKeyExt(t.OcOrcaConstants.STORY_CALCULATION_TO_TEXT,false))}return c};t.OcOrcaCalculations.prototype.getCalculationByCalculationId=function(t){return this.getCalculations().getByKey(t)};t.OcOrcaCalculations.prototype.getCalculations=function(){if(t.notNull(this.m_calculations)){return this.m_calculations}this.m_calculations=t.XHashMapByString.create();let e=this.getStoryEntityHelper().getEntitiesAsJsonByEntityType(t.OcOrcaConstants.STORY_ENTITY_CALCULATION);for(let t=0;t<e.size();t++){let a=e.get(t);this.addOrcaCalculationToCalculations(a,this.m_calculations)}return this.m_calculations};t.OcOrcaCalculations.prototype.getContext=function(){return this.m_context};t.OcOrcaCalculations.prototype.getStoryEntityHelper=function(){return this.getContext().getStoryEntityHelper()};t.OcOrcaCalculations.prototype.releaseObject=function(){this.m_context=null;this.m_calculations=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_calculations);t.XObject.prototype.releaseObject.call(this)};t.OcOrcaCalculations.prototype.setupCalculations=function(e){t.XObject.prototype.setup.call(this);this.m_context=e};t.OcOrcaCalculations.prototype.toString=function(){let e=this.getCalculations().getValuesAsReadOnlyList();let a=t.XStringBuffer.create();a.append("Calculations:");for(let t=0;t<e.size();t++){let r=e.get(t);a.appendNewLine().appendInt(t+1).append(". Calculation: ").append(r.getId()).append(" of type ").append(r.getCalculationType())}return a.toString()};t.OcOrcaFieldSelections=function(){};t.OcOrcaFieldSelections.prototype=new t.XObject;t.OcOrcaFieldSelections.prototype._ff_c="OcOrcaFieldSelections";t.OcOrcaFieldSelections.create=function(e){let a=new t.OcOrcaFieldSelections;a.setupFieldSelections(e);return a};t.OcOrcaFieldSelections.prototype.m_context=null;t.OcOrcaFieldSelections.prototype.m_fieldSelections=null;t.OcOrcaFieldSelections.prototype.addOrcaFieldSelectionsToFieldSelections=function(e,a){let r=e.getListByKey(t.OcOrcaConstants.STORY_FIELD_SELECTION_ENTITIES);if(t.PrUtils.isListEmpty(r)){return}for(let e=0;e<r.size();e++){let n=r.getStructureAt(e);let o=this.createFieldSelectionFromOrcaFieldSelectionEntity(n);if(t.notNull(o)){a.put(o.getId(),o)}}};t.OcOrcaFieldSelections.prototype.createFieldSelectionFromOrcaFieldSelectionEntity=function(e){let a=e.getStructureByKey(t.OcOrcaConstants.ID_ELEMENT);if(t.isNull(a)){return null}let r=a.getStringByKey(t.OcOrcaConstants.ID_ELEMENT);let n=e.getStringByKey(t.OcOrcaConstants.STORY_FIELD_SELECTION_NAME);let o=a.getStringByKey(t.OcOrcaConstants.STORY_FIELD_SELECTION_TYPE);let s=t.OcFieldSelection.create(r,n,o);if(t.XString.isEqual(o,t.OcOrcaConstants.STORY_FIELD_SELECTION_DIMENSION)||t.XString.isEqual(o,t.OcOrcaConstants.STORY_FIELD_SELECTION_MEASURE)){s.setSelectionInfos(e.getStructureByKey(t.OcOrcaConstants.STORY_FIELD_SELECTION_INFO));s.setEntityIds(e.getByKey(t.OcOrcaConstants.STORY_FIELD_SELECTION_ENTITY_IDS))}return s};t.OcOrcaFieldSelections.prototype.getContext=function(){return this.m_context};t.OcOrcaFieldSelections.prototype.getFieldSelectionByFieldSelectionId=function(t){return this.getFieldSelections().getByKey(t)};t.OcOrcaFieldSelections.prototype.getFieldSelections=function(){if(t.notNull(this.m_fieldSelections)){return this.m_fieldSelections}this.m_fieldSelections=t.XHashMapByString.create();let e=this.getStoryEntityHelper().getEntitiesAsJsonByEntityType(t.OcOrcaConstants.STORY_ENTITY_FIELD_SELECTION);for(let t=0;t<e.size();t++){let a=e.get(t);this.addOrcaFieldSelectionsToFieldSelections(a,this.m_fieldSelections)}return this.m_fieldSelections};t.OcOrcaFieldSelections.prototype.getStoryEntityHelper=function(){return this.getContext().getStoryEntityHelper()};t.OcOrcaFieldSelections.prototype.releaseObject=function(){this.m_context=null;this.m_fieldSelections=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_fieldSelections);t.XObject.prototype.releaseObject.call(this)};t.OcOrcaFieldSelections.prototype.setupFieldSelections=function(e){t.XObject.prototype.setup.call(this);this.m_context=e};t.OcOrcaFieldSelections.prototype.toString=function(){let e=this.getFieldSelections().getValuesAsReadOnlyList();let a=t.XStringBuffer.create();a.append("selections:");for(let t=0;t<e.size();t++){let r=e.get(t);a.appendNewLine().appendInt(t+1).append(". FieldSelection: ").append(r.getId()).append(" of type ").append(r.getFieldSelectionType())}return a.toString()};t.OcOrcaMeasureSyncs=function(){};t.OcOrcaMeasureSyncs.prototype=new t.XObject;t.OcOrcaMeasureSyncs.prototype._ff_c="OcOrcaMeasureSyncs";t.OcOrcaMeasureSyncs.create=function(e){let a=new t.OcOrcaMeasureSyncs;a.setupMeasureSyncs(e);return a};t.OcOrcaMeasureSyncs.prototype.m_context=null;t.OcOrcaMeasureSyncs.prototype.m_measureSyncs=null;t.OcOrcaMeasureSyncs.prototype.getContext=function(){return this.m_context};t.OcOrcaMeasureSyncs.prototype.getMeasureSyncByMeasureName=function(t){return this.getMeasureSyncs().getByKey(t)};t.OcOrcaMeasureSyncs.prototype.getMeasureSyncs=function(){if(t.notNull(this.m_measureSyncs)){return this.m_measureSyncs}this.m_measureSyncs=t.XHashMapByString.create();let e=this.getStoryEntityHelper().getStoryEntityAsJson();let a=e.getListByKey(t.OcOrcaConstants.STORY_MEASURE_SYNC);if(t.PrUtils.isListEmpty(a)){return this.m_measureSyncs}for(let e=0;e<a.size();e++){let r=a.getStructureAt(e);let n=t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(r,t.OcOrcaConstants.PATH_FROM_MEASURE_SYNC_TO_MEASURE_NAME);if(t.XStringUtils.isNotNullAndNotEmpty(n)){let e=t.OcMeasureSync.create(n);e.setColor(r.getStringByKey(t.OcOrcaConstants.STORY_MEASURE_SYNC_COLOR));e.setPattern(r.getStringByKey(t.OcOrcaConstants.STORY_MEASURE_SYNC_PATTERN));this.m_measureSyncs.put(n,e)}}return this.m_measureSyncs};t.OcOrcaMeasureSyncs.prototype.getStoryEntityHelper=function(){return this.getContext().getStoryEntityHelper()};t.OcOrcaMeasureSyncs.prototype.releaseObject=function(){this.m_context=null;this.m_measureSyncs=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_measureSyncs);t.XObject.prototype.releaseObject.call(this)};t.OcOrcaMeasureSyncs.prototype.setupMeasureSyncs=function(e){t.XObject.prototype.setup.call(this);this.m_context=e};t.OcOrcaMeasureSyncs.prototype.toString=function(){let e=this.getMeasureSyncs().getValuesAsReadOnlyList();let a=t.XStringBuffer.create();a.append("Measure Syncs:");for(let t=0;t<e.size();t++){let r=e.get(t);a.appendNewLine().appendInt(t+1).append('. Measure sync for "').append(r.getName());a.append('", color ').append(r.getColor()).append(", pattern ").append(r.getPattern())}return a.toString()};t.OcOrcaPageLayout=function(){};t.OcOrcaPageLayout.prototype=new t.XObject;t.OcOrcaPageLayout.prototype._ff_c="OcOrcaPageLayout";t.OcOrcaPageLayout.create=function(e){let a=new t.OcOrcaPageLayout;a.setupOrcaPageLayout(e);return a};t.OcOrcaPageLayout.prototype.m_layoutType=null;t.OcOrcaPageLayout.prototype.m_pageLayoutJson=null;t.OcOrcaPageLayout.prototype.m_widgetLaneLayoutJsonByWidgetIdMap=null;t.OcOrcaPageLayout.prototype.m_widgetLayoutJsonByWidgetIdMap=null;t.OcOrcaPageLayout.prototype.m_widgetSectionLayoutJsonByWidgetIdMap=null;t.OcOrcaPageLayout.prototype.getLaneLayoutJsonByWidgetId=function(t){return this.getLaneLayoutJsonByWidgetIdMap().getByKey(t)};t.OcOrcaPageLayout.prototype.getLaneLayoutJsonByWidgetIdMap=function(){if(t.notNull(this.m_widgetLaneLayoutJsonByWidgetIdMap)){return this.m_widgetLaneLayoutJsonByWidgetIdMap}this.m_widgetLaneLayoutJsonByWidgetIdMap=t.XHashMapByString.create();let e=t.OcJsonPathEvaluator.getJsonPathElementsAsStructures(this.getPageLayoutJson(),t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_LANE_WIDGETS);if(!t.XCollectionUtils.hasElements(e)){return this.m_widgetSectionLayoutJsonByWidgetIdMap}for(let a=0;a<e.size();a++){let r=e.get(a);let n=r.getStringByKey(t.OcOrcaConstants.WIDGET_ID);if(t.XStringUtils.isNullOrEmpty(n)){continue}let o=t.OcJsonPathEvaluator.getSingleJsonPathElementAsStructure(r,t.OcOrcaConstants.PATH_FROM_WIDGET_TO_LAYOUT_DEFINITION);this.m_widgetLaneLayoutJsonByWidgetIdMap.put(n,o)}return this.m_widgetLaneLayoutJsonByWidgetIdMap};t.OcOrcaPageLayout.prototype.getLayoutType=function(){if(t.isNull(this.m_layoutType)){this.m_layoutType=t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(this.getPageLayoutJson(),t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_LAYOUT_TYPE)}return this.m_layoutType};t.OcOrcaPageLayout.prototype.getPageLayoutJson=function(){return this.m_pageLayoutJson};t.OcOrcaPageLayout.prototype.getSectionLayoutJsonByWidgetId=function(t){return this.getWigdetSectionLayoutJsonByWidgetIdMap().getByKey(t)};t.OcOrcaPageLayout.prototype.getWidgetLayoutJsonByWidgetId=function(t){return this.getWigdetIdToWidgetLayoutJsonMap().getByKey(t)};t.OcOrcaPageLayout.prototype.getWigdetIdToWidgetLayoutJsonMap=function(){if(t.notNull(this.m_widgetLayoutJsonByWidgetIdMap)){return this.m_widgetLayoutJsonByWidgetIdMap}this.m_widgetLayoutJsonByWidgetIdMap=t.XHashMapByString.create();let e=t.OcJsonPathEvaluator.getJsonPathElementsAsStructures(this.getPageLayoutJson(),t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_WIDGETS);if(!t.XCollectionUtils.hasElements(e)){return this.m_widgetLayoutJsonByWidgetIdMap}for(let a=0;a<e.size();a++){let r=e.get(a);let n=r.getStringByKey(t.OcOrcaConstants.WIDGET_ID);if(t.XStringUtils.isNotNullAndNotEmpty(n)){let e=r.getStructureByKey(t.OcOrcaConstants.WIDGET_SECTION_DEFINITION);if(t.notNull(e)){this.m_widgetLayoutJsonByWidgetIdMap.put(n,e)}}}return this.m_widgetLayoutJsonByWidgetIdMap};t.OcOrcaPageLayout.prototype.getWigdetSectionLayoutJsonByWidgetIdMap=function(){if(t.notNull(this.m_widgetSectionLayoutJsonByWidgetIdMap)){return this.m_widgetSectionLayoutJsonByWidgetIdMap}this.m_widgetSectionLayoutJsonByWidgetIdMap=t.XHashMapByString.create();let e=t.OcJsonPathEvaluator.getJsonPathElementsAsStructures(this.getPageLayoutJson(),t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_SECTIONS);if(!t.XCollectionUtils.hasElements(e)){return this.m_widgetSectionLayoutJsonByWidgetIdMap}for(let a=0;a<e.size();a++){let r=e.get(a);let n=r.getStructureByKey(t.OcOrcaConstants.WIDGET_SECTION_DEFINITION);if(t.notNull(n)){let e=t.OcJsonPathEvaluator.getJsonPathElementsAsStrings(r,t.OcOrcaConstants.PATH_FROM_SECTION_TO_WIDGET_ID);for(let t=0;t<e.size();t++){this.m_widgetSectionLayoutJsonByWidgetIdMap.put(e.get(t),n)}}}return this.m_widgetSectionLayoutJsonByWidgetIdMap};t.OcOrcaPageLayout.prototype.hasCanvasLayout=function(){return t.XString.isEqual(this.getLayoutType(),t.OcOrcaConstants.PAGE_LAYOUT_CANVAS)};t.OcOrcaPageLayout.prototype.processBackgroundColor=function(){return t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(this.getPageLayoutJson(),t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_BACKGROUND_COLOR)};t.OcOrcaPageLayout.prototype.processIsResponsive=function(){return t.XString.isEqual(this.getLayoutType(),t.OcOrcaConstants.PAGE_IS_RESPONSIVE)};t.OcOrcaPageLayout.prototype.releaseObject=function(){this.m_layoutType=null;this.m_pageLayoutJson=null;this.m_widgetLayoutJsonByWidgetIdMap=t.XObjectExt.release(this.m_widgetLayoutJsonByWidgetIdMap);this.m_widgetSectionLayoutJsonByWidgetIdMap=t.XObjectExt.release(this.m_widgetSectionLayoutJsonByWidgetIdMap);this.m_widgetLaneLayoutJsonByWidgetIdMap=t.XObjectExt.release(this.m_widgetLaneLayoutJsonByWidgetIdMap);t.XObject.prototype.releaseObject.call(this)};t.OcOrcaPageLayout.prototype.setupOrcaPageLayout=function(e){t.XObject.prototype.setup.call(this);this.m_pageLayoutJson=e};t.OcOrcaThresholds=function(){};t.OcOrcaThresholds.prototype=new t.XObject;t.OcOrcaThresholds.prototype._ff_c="OcOrcaThresholds";t.OcOrcaThresholds.create=function(e){let a=new t.OcOrcaThresholds;a.setupThresholds(e);return a};t.OcOrcaThresholds.prototype.m_context=null;t.OcOrcaThresholds.prototype.m_thresholds=null;t.OcOrcaThresholds.prototype.addOrcaDimensionToThresholdMap=function(e,a,r){let n=a.getKeysAsReadOnlyList();for(let o=0;o<n.size();o++){let s=n.get(o);let i=a.getStructureByKey(s);let c=t.OcThreshold.create(e,i);r.put(e,c)}};t.OcOrcaThresholds.prototype.addOrcaThresholdsToThresholdMap=function(t,e,a){let r=e.getStructureByKey(t);let n=r.getKeysAsReadOnlyList();for(let e=0;e<n.size();e++){let o=n.get(e);let s=r.getStructureByKey(o);this.addOrcaDimensionToThresholdMap(t,s,a)}};t.OcOrcaThresholds.prototype.getContext=function(){return this.m_context};t.OcOrcaThresholds.prototype.getStoryEntityHelper=function(){return this.getContext().getStoryEntityHelper()};t.OcOrcaThresholds.prototype.getThresholdByDatasource=function(t){return this.getThresholds().getByKey(t)};t.OcOrcaThresholds.prototype.getThresholds=function(){if(t.notNull(this.m_thresholds)){return this.m_thresholds}this.m_thresholds=t.XHashMapByString.create();let e=this.getStoryEntityHelper().getStoryEntityAsJson();let a=t.OcJsonPathEvaluator.getSingleJsonPathElementAsStructure(e,t.OcOrcaConstants.PATH_FROM_STORY_TO_THRESHOLDS);if(t.isNull(a)){return this.m_thresholds}let r=a.getKeysAsReadOnlyList();for(let t=0;t<r.size();t++){let e=r.get(t);this.addOrcaThresholdsToThresholdMap(e,a,this.m_thresholds)}return this.m_thresholds};t.OcOrcaThresholds.prototype.releaseObject=function(){this.m_context=null;this.m_thresholds=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_thresholds);t.XObject.prototype.releaseObject.call(this)};t.OcOrcaThresholds.prototype.setupThresholds=function(e){t.XObject.prototype.setup.call(this);this.m_context=e};t.OcOrcaThresholds.prototype.toString=function(){let e=this.getThresholds().getValuesAsReadOnlyList();let a=t.XStringBuffer.create();a.append("Thresholds:");for(let t=0;t<e.size();t++){let r=e.get(t);a.appendNewLine().appendInt(t+1).append(". Threshold: ").append(r.getName())}return a.toString()};t.OcOrcaPageWidgetHelper=function(){};t.OcOrcaPageWidgetHelper.prototype=new t.XObject;t.OcOrcaPageWidgetHelper.prototype._ff_c="OcOrcaPageWidgetHelper";t.OcOrcaPageWidgetHelper.create=function(e){let a=new t.OcOrcaPageWidgetHelper;a.setupStoryHelper(e);return a};t.OcOrcaPageWidgetHelper.prototype.m_pageIds=null;t.OcOrcaPageWidgetHelper.prototype.m_pageJsonByPageIdMap=null;t.OcOrcaPageWidgetHelper.prototype.m_widgetIds=null;t.OcOrcaPageWidgetHelper.prototype.m_widgetJsonByWidgetIdMap=null;t.OcOrcaPageWidgetHelper.prototype.m_widgetsIdsByPageIdMap=null;t.OcOrcaPageWidgetHelper.prototype.getPageIds=function(){if(t.isNull(this.m_pageIds)){this.m_pageIds=this.getPageJsonByPageIdMap().getKeysAsReadOnlyList()}return this.m_pageIds};t.OcOrcaPageWidgetHelper.prototype.getPageJsonByPageId=function(t){return this.getPageJsonByPageIdMap().getByKey(t)};t.OcOrcaPageWidgetHelper.prototype.getPageJsonByPageIdMap=function(){return this.m_pageJsonByPageIdMap};t.OcOrcaPageWidgetHelper.prototype.getSortedWidgetIds=function(e){if(this.isPageResponsive(e)){return t.OcJsonPathEvaluator.getJsonPathElementsAsStrings(e,t.OcOrcaConstants.PATH_FROM_PAGE_TO_LANES_WIDGET_ID)}return t.OcJsonPathEvaluator.getJsonPathElementsAsStrings(e,t.OcOrcaConstants.PATH_FROM_PAGE_TO_SECTION_WIDGET_ID)};t.OcOrcaPageWidgetHelper.prototype.getSortedWidgetJsonsFromPageJson=function(e){let a=this.getWidgetJsonsFromPageJson(e);let r=this.getSortedWidgetIds(e);let n=t.XLinkedHashMapByString.create();for(let e=0;e<r.size();e++){let o=r.get(e);let s=a.getByKey(o);if(t.notNull(s)){a.remove(o);n.put(o,s)}}let o=a.getKeysAsIterator();while(o.hasNext()){let t=o.next();let e=a.getByKey(t);n.put(t,e)}return n};t.OcOrcaPageWidgetHelper.prototype.getWidgetIdsByPageId=function(t){return this.getWidgetIdsByPageIdMap().getByKey(t)};t.OcOrcaPageWidgetHelper.prototype.getWidgetIdsByPageIdMap=function(){return this.m_widgetsIdsByPageIdMap};t.OcOrcaPageWidgetHelper.prototype.getWidgetJsonByWidgetId=function(t){return this.getWidgetJsonByWidgetIdMap().getByKey(t)};t.OcOrcaPageWidgetHelper.prototype.getWidgetJsonByWidgetIdMap=function(){return this.m_widgetJsonByWidgetIdMap};t.OcOrcaPageWidgetHelper.prototype.getWidgetJsonsFromPageJson=function(e){let a=t.XLinkedHashMapByString.create();let r=t.OcJsonPathEvaluator.getJsonPathElementsAsStructures(e,t.OcOrcaConstants.PATH_FROM_PAGE_TO_WIDGET);for(let e=0;e<r.size();e++){let n=r.get(e);let o=n.getStringByKey(t.OcOrcaConstants.ID_ELEMENT);if(t.XStringUtils.isNotNullAndNotEmpty(o)){a.put(o,n)}}return a};t.OcOrcaPageWidgetHelper.prototype.isPageResponsive=function(e){let a=t.OcJsonPathEvaluator.getJsonPathElementsAsStrings(e,t.OcOrcaConstants.PATH_FROM_PAGE_TO_LAYOUT_TYPE);return t.XCollectionUtils.hasElements(a)&&t.XString.isEqual(a.get(0),t.OcOrcaConstants.PAGE_IS_RESPONSIVE)};t.OcOrcaPageWidgetHelper.prototype.releaseObject=function(){this.m_pageIds=t.XObjectExt.release(this.m_pageIds);this.m_widgetIds=t.XObjectExt.release(this.m_widgetIds);this.m_pageJsonByPageIdMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_pageJsonByPageIdMap);this.m_widgetJsonByWidgetIdMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_widgetJsonByWidgetIdMap);this.m_widgetsIdsByPageIdMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_widgetsIdsByPageIdMap);t.XObject.prototype.releaseObject.call(this)};t.OcOrcaPageWidgetHelper.prototype.setupStoryHelper=function(e){t.XObject.prototype.setup.call(this);this.m_pageJsonByPageIdMap=t.XLinkedHashMapByString.create();this.m_widgetJsonByWidgetIdMap=t.XHashMapByString.create();this.m_widgetsIdsByPageIdMap=t.XHashMapByString.create();let a=e.getStoryEntityHelper().getStoryEntityAsJson().getListByKey(t.OcOrcaConstants.STORY_PAGES);for(let e=0;e<a.size();e++){let r=a.getStructureAt(e);if(r.getBooleanByKeyExt(t.OcOrcaConstants.PAGE_IS_HIDDEN,false)){continue}let n=r.getStringByKey(t.OcOrcaConstants.ID_ELEMENT);if(t.XStringUtils.isNullOrEmpty(n)){continue}this.m_pageJsonByPageIdMap.put(n,r);let o=this.getSortedWidgetJsonsFromPageJson(r);let s=o.getKeysAsReadOnlyList();this.m_widgetsIdsByPageIdMap.put(n,s);for(let t=0;t<s.size();t++){let e=s.get(t);this.m_widgetJsonByWidgetIdMap.put(e,o.getByKey(e))}}};t.OcOrcaStoryEntityHelper=function(){};t.OcOrcaStoryEntityHelper.prototype=new t.XObject;t.OcOrcaStoryEntityHelper.prototype._ff_c="OcOrcaStoryEntityHelper";t.OcOrcaStoryEntityHelper.create=function(e,a){let r=new t.OcOrcaStoryEntityHelper;r.setupStoryEntityHelper(e,a);return r};t.OcOrcaStoryEntityHelper.prototype.m_context=null;t.OcOrcaStoryEntityHelper.prototype.m_entitiesAsJsonByEntityTypeMap=null;t.OcOrcaStoryEntityHelper.prototype.m_gridDefinitionByGridIdMap=null;t.OcOrcaStoryEntityHelper.prototype.m_storyAsJson=null;t.OcOrcaStoryEntityHelper.prototype.m_storyEntityAsJson=null;t.OcOrcaStoryEntityHelper.prototype.getContext=function(){return this.m_context};t.OcOrcaStoryEntityHelper.prototype.getEntitiesAsJsonByEntityType=function(e){let a=this.getEntitiesAsJsonByEntityTypeMap().getByKey(e);if(t.isNull(a)){a=t.XList.create();this.m_entitiesAsJsonByEntityTypeMap.put(e,a)}return a};t.OcOrcaStoryEntityHelper.prototype.getEntitiesAsJsonByEntityTypeMap=function(){if(t.notNull(this.m_entitiesAsJsonByEntityTypeMap)){return this.m_entitiesAsJsonByEntityTypeMap}this.m_entitiesAsJsonByEntityTypeMap=t.XHashMapByString.create();let e=t.OcJsonPathEvaluator.getJsonPathElementsAsStructures(this.getStoryAsJson(),t.OcOrcaConstants.PATH_FROM_STORY_TO_STORY_ENTITIES);for(let a=0;a<e.size();a++){let r=e.get(a);let n=r.getStringByKey(t.OcOrcaConstants.STORY_ENTITY_TYPE);if(t.XStringUtils.isNullOrEmpty(n)){continue}let o=this.m_entitiesAsJsonByEntityTypeMap.getByKey(n);if(t.isNull(o)){o=t.XList.create();this.m_entitiesAsJsonByEntityTypeMap.put(n,o)}o.add(r)}return this.m_entitiesAsJsonByEntityTypeMap};t.OcOrcaStoryEntityHelper.prototype.getGridDefinitionByGridId=function(t){return this.getGridDefinitionByGridIdMap().getByKey(t)};t.OcOrcaStoryEntityHelper.prototype.getGridDefinitionByGridIdMap=function(){if(t.notNull(this.m_gridDefinitionByGridIdMap)){return this.m_gridDefinitionByGridIdMap}this.m_gridDefinitionByGridIdMap=t.XHashMapByString.create();let e=this.getEntitiesAsJsonByEntityType(t.OcOrcaConstants.STORY_ENTITY_GRID);for(let a=0;a<e.size();a++){let r=e.get(a);let n=r.getStringByKey(t.OcOrcaConstants.ID_ELEMENT);if(t.notNull(n)){let e=t.OcJsonPathEvaluator.getJsonPathElementsAsStructures(r,t.OcOrcaConstants.PATH_FROM_GRID_ENTITIY_TO_DATA_DEFINITION);if(t.XCollectionUtils.hasElements(e)){this.m_gridDefinitionByGridIdMap.put(n,t.OcOrcaGridDefinition.create(n,e.get(0)))}}}return this.m_gridDefinitionByGridIdMap};t.OcOrcaStoryEntityHelper.prototype.getGridDefinitions=function(){return this.getGridDefinitionByGridIdMap().getValuesAsReadOnlyList()};t.OcOrcaStoryEntityHelper.prototype.getStoryAsJson=function(){return this.m_storyAsJson};t.OcOrcaStoryEntityHelper.prototype.getStoryEntityAsJson=function(){if(t.notNull(this.m_storyEntityAsJson)){return this.m_storyEntityAsJson}let e=this.getEntitiesAsJsonByEntityType(t.OcOrcaConstants.STORY_ENTITY);if(t.notNull(e)&&e.size()===1){this.m_storyEntityAsJson=e.get(0).getStructureByKey(t.OcOrcaConstants.STORY_ENTITY_DATA)}if(t.isNull(this.m_storyEntityAsJson)){let e=t.OcMessage.newInvalidStoryError();this.getContext().getMessageManager().addMessage(e);throw t.XException.createIllegalArgumentException(e.getText())}return this.m_storyEntityAsJson};t.OcOrcaStoryEntityHelper.prototype.releaseObject=function(){this.m_context=null;this.m_storyAsJson=t.XObjectExt.release(this.m_storyAsJson);this.m_storyEntityAsJson=t.XObjectExt.release(this.m_storyEntityAsJson);this.m_entitiesAsJsonByEntityTypeMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_entitiesAsJsonByEntityTypeMap);this.m_gridDefinitionByGridIdMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_gridDefinitionByGridIdMap);t.XObject.prototype.releaseObject.call(this)};t.OcOrcaStoryEntityHelper.prototype.setupStoryEntityHelper=function(e,a){t.XObject.prototype.setup.call(this);this.m_context=a;this.m_storyAsJson=e};t.OcQuasarDataProviderConverter=function(){};t.OcQuasarDataProviderConverter.prototype=new t.XObject;t.OcQuasarDataProviderConverter.prototype._ff_c="OcQuasarDataProviderConverter";t.OcQuasarDataProviderConverter.addDatasetsToDocument=function(e,a){let r=t.OcQuasarDataProviderConverter.getDataset(e);if(t.isNull(r)){return}a.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_DATA_PROVIDER_CUBE_NAME,r.getCubeName());a.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_DATA_PROVIDER_DATA_SOURCE,r.getDatasource());a.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_DATA_PROVIDER_MODEL_ID,r.getModelId());a.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_DATA_PROVIDER_SYSTEM,t.OcQuasarDataProviderConverter.getSystemName(r));if(r.getVariables()!==null&&!r.getVariables().isEmpty()){let e=a.putNewList(t.OcQuasarConstants.QUASAR_VARIABLES);e.addAll(r.getVariables())}};t.OcQuasarDataProviderConverter.addThresholdDefinition=function(e){let a=e.getVizDef();let r=t.OcQuasarDataProviderConverter.getDataset(e);if(t.isNull(r)){return}let n=r.getDatasource();a.putNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_VIZ_DEF_THRESHOLD,t.OcQuasarDataProviderConverter.getThresholdByDatasource(e,n))};t.OcQuasarDataProviderConverter.convert=function(e,a,r){let n=t.PrFactory.createStructure();let o=t.XStringUtils.concatenate3(e.getStory().getNormalizedName(),"_",e.getNormalizedDataReferenceId());n.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_DATA_PROVIDER_NAME,o);t.OcQuasarDataProviderConverter.addDatasetsToDocument(e,n);let s=e.getWidgetType();if(s===t.OcWidgetType.CHART||s===t.OcWidgetType.KPI||s===t.OcWidgetType.ANALYTICAL_CARD){let a=e;n.put(t.OcQuasarConstants.QUASAR_GLOBAL_DEF,t.OcQuasarDataProviderConverter.getGlobalDefinition(a));let o=a.getVizDef();if(t.notNull(r)){o.putString(t.OcQuasarConstants.STORY_PAGE_ID,r)}n.put(t.OcQuasarConstants.QUASAR_DATA_PROVIDER_VIZ_DEF,o);t.OcQuasarDataProviderConverter.addThresholdDefinition(a)}else if(s===t.OcWidgetType.GRID){let a=e.getFireflyQuery();n.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_DATA_PROVIDER_FF_QUERY,a)}return n};t.OcQuasarDataProviderConverter.getDataset=function(e){let a=e.getDatasets();if(t.XCollectionUtils.hasElements(a)){return a.get(0)}return null};t.OcQuasarDataProviderConverter.getGlobalDefinition=function(e){let a=t.PrFactory.createStructure();let r=t.OcQuasarDataProviderConverter.getDataset(e);if(t.isNull(r)){return null}let n=r.getDatasource();let o=e.getStory().getColorSyncs();if(t.notNull(o)){let e=o.getStructureByKey(n);a.putNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_GLOBAL_DEF_COLOR_SYNC,e)}return a};t.OcQuasarDataProviderConverter.getSystemName=function(e){let a=e.getSystemName();if(t.XStringUtils.isNullOrEmpty(a)){return t.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME}return a};t.OcQuasarDataProviderConverter.getThresholdByDatasource=function(e,a){let r=e.getStory().getThresholds().getThresholdByDatasource(a);if(t.isNull(r)){return null}let n=t.OcJsonPathEvaluator.getSingleJsonPathElementAsStructure(e.getVizDef(),t.OcQuasarConstants.VIZ_DEF_PATH_TO_THRESHOLDS);if(t.notNull(n)&&n.containsKey(a)){return r.getException()}return null};t.OcQuasarDataProviderConverter.prototype.releaseObject=function(){t.XObject.prototype.releaseObject.call(this)};t.OcQuasarOptions=function(){};t.OcQuasarOptions.prototype=new t.XObject;t.OcQuasarOptions.prototype._ff_c="OcQuasarOptions";t.OcQuasarOptions.create=function(e){let a=new t.OcQuasarOptions;a.setupOptions(e);return a};t.OcQuasarOptions.prototype.m_chartType=null;t.OcQuasarOptions.prototype.m_context=null;t.OcQuasarOptions.prototype.m_mainLayoutType=null;t.OcQuasarOptions.prototype.m_useSingleWidgetLayout=false;t.OcQuasarOptions.prototype.getChartType=function(){return this.m_chartType};t.OcQuasarOptions.prototype.getContext=function(){return this.m_context};t.OcQuasarOptions.prototype.getMainLayoutType=function(){return this.m_mainLayoutType};t.OcQuasarOptions.prototype.releaseObject=function(){this.m_context=null;this.m_mainLayoutType=null;this.m_chartType=null;t.XObject.prototype.releaseObject.call(this)};t.OcQuasarOptions.prototype.setChartType=function(t){this.m_chartType=t};t.OcQuasarOptions.prototype.setMainLayoutType=function(t){this.m_mainLayoutType=t};t.OcQuasarOptions.prototype.setUseSingleWidgetLayout=function(t){this.m_useSingleWidgetLayout=t};t.OcQuasarOptions.prototype.setupOptions=function(e){t.XObject.prototype.setup.call(this);this.m_context=e;this.m_mainLayoutType=t.OcLayoutType.CANVAS;this.m_chartType=t.OcChartType.HIGHCHARTS};t.OcQuasarOptions.prototype.useSingleWidgetLayout=function(){return this.m_useSingleWidgetLayout};t.OcQuasarPageContentConverter={addBackgroundPictureToQuasarContent:function(e,a,r){if(r.getMainLayoutType()===t.OcLayoutType.CANVAS){return}let n=e.getWidgetManager().getBackgroundImageWidget();if(t.isNull(n)){return}let o=n.getImage();if(o.hasImageData()){a.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_CONTENT_BACKGROUND_IMAGE_SRC,o.getImageData())}else{a.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_CONTENT_BACKGROUND_IMAGE_SRC,n.getImageUrl())}},convert:function(e,a,r){r.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_CONTENT_TYPE,t.OcQuasarPageContentConverter.getQuasarLayoutType(e,a));r.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_CONTENT_BACKGROUND_COLOR,e.getBackgroundColor());r.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_LAYOUT_WIDTH,"100%");r.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_LAYOUT_HEIGHT,"100%");r.putNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_CONTENT_ITEMS,t.OcQuasarPageContentConverter.getQuasarContentItems(e,a));t.OcQuasarPageContentConverter.addBackgroundPictureToQuasarContent(e,r,a)},convertPageToAnalyticalCard:function(e,a,r){let n=e.getContext().getStoryEntityFactory().getFirstWidgetByType(e,t.OcWidgetType.ANALYTICAL_CARD);if(t.notNull(n)){a.add(t.OcQuasarDataProviderConverter.convert(n,r,e.getId()))}let o=e.getContext().getStoryEntityFactory().getFirstWidgetByType(e,t.OcWidgetType.CHART);if(t.notNull(o)){a.add(t.OcQuasarDataProviderConverter.convert(o,r,e.getId()))}if(t.isNull(n)&&t.isNull(o)){return null}return t.OcQuasarWidgetConverter.convertCard(n,o,r)},convertPageToCompositeAnalyticalCard:function(e,a,r,n,o){let s=r.getContext().getStoryEntityFactory().getFirstWidgetByType(r,t.OcWidgetType.KPI);if(t.notNull(s)){n.add(t.OcQuasarDataProviderConverter.convert(s,o,r.getId()))}let i=r.getContext().getStoryEntityFactory().getFirstWidgetByType(r,t.OcWidgetType.CHART);if(t.notNull(i)){n.add(t.OcQuasarDataProviderConverter.convert(i,o,r.getId()))}let c=r.getContext().getStoryEntityFactory().getFirstWidgetByType(r,t.OcWidgetType.GRID);if(t.notNull(c)){n.add(t.OcQuasarDataProviderConverter.convert(c,o,r.getId()))}return t.OcQuasarWidgetConverter.convertCompositeCard(e,a,s,i,c,o)},getQuasarContentItems:function(e,a){let r=t.PrFactory.createList();let n=e.getWidgetManager().getWidgets();for(let e=0;e<n.size();e++){let o=n.get(e);let s=t.OcQuasarWidgetConverter.convert(o,a);if(t.notNull(s)){r.add(s)}}return r},getQuasarLayoutType:function(e,a){let r;if(e.isResponsive()){r=t.OcLayoutType.FLOW.getName()}else{if(a.getMainLayoutType()===t.OcLayoutType.CANVAS){r=t.OcLayoutType.CANVAS.getName()}else{r=t.OcLayoutType.FLOW.getName()}}return r}};t.OcQuasarPageConverter=function(){};t.OcQuasarPageConverter.prototype=new t.XObject;t.OcQuasarPageConverter.prototype._ff_c="OcQuasarPageConverter";t.OcQuasarPageConverter.convertDataProviderOfWidget=function(e,a){if(!e.getWidgetType().hasDataProvider()){return null}let r=t.OcQuasarDataProviderConverter.convert(e,a,null);if(t.isNull(r)){return null}let n=t.PrFactory.createList();n.add(r);return n};t.OcQuasarPageConverter.convertDataProvidersOfPage=function(e,a,r){let n=e.getWidgetManager().getWigdetsWithDataProvider();if(!t.XCollectionUtils.hasElements(n)){return}for(let o=0;o<n.size();o++){let s=n.get(o);let i=t.OcQuasarDataProviderConverter.convert(s,a,e.getId());if(t.notNull(i)){r.add(i)}}};t.OcQuasarPageConverter.convertPage=function(e,a,r,n){t.OcQuasarPageContentConverter.convert(e,a,r);t.OcQuasarPageConverter.convertDataProvidersOfPage(e,a,n)};t.OcQuasarPageConverter.convertWidget=function(e,a){let r=t.PrFactory.createStructure();let n=t.OcQuasarWidgetConverter.convert(e,a);r.putNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_CONTENT,n);r.putNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_DATA_PROVIDERS,t.OcQuasarPageConverter.convertDataProviderOfWidget(e,a));return r};t.OcQuasarPageConverter.prototype.releaseObject=function(){t.XObject.prototype.releaseObject.call(this)};t.OcQuasarStoryConverter={convertPage:function(e,a){let r=t.PrFactory.createStructure();t.OcQuasarPageConverter.convertPage(e,a,r.putNewStructure(t.OcQuasarConstants.QUASAR_CONTENT),r.putNewList(t.OcQuasarConstants.QUASAR_DATA_PROVIDERS));return r},convertStory:function(e,a){let r=t.XList.create();let n=e.getPageManager().getPages();for(let e=0;e<n.size();e++){let o=t.PrFactory.createStructure();let s=n.get(e);t.OcQuasarPageConverter.convertPage(s,a,o.putNewStructure(t.OcQuasarConstants.QUASAR_CONTENT),o.putNewList(t.OcQuasarConstants.QUASAR_DATA_PROVIDERS));r.add(o)}return r},convertWidget:function(e,a){return t.OcQuasarPageConverter.convertWidget(e,a)}};t.OcQuasarWidgetConverter=function(){};t.OcQuasarWidgetConverter.prototype=new t.XObject;t.OcQuasarWidgetConverter.prototype._ff_c="OcQuasarWidgetConverter";t.OcQuasarWidgetConverter.addBindingToDocument=function(e,a){let r=e.getWidgetType();if(r!==t.OcWidgetType.ANALYTICAL_CARD&&r!==t.OcWidgetType.KPI&&r!==t.OcWidgetType.CHART&&r!==t.OcWidgetType.GRID){return}let n=t.XStringUtils.concatenate2("dp:",t.XStringUtils.concatenate3(e.getStory().getNormalizedName(),"_",e.getNormalizedDataReferenceId()));if(r===t.OcWidgetType.KPI||r===t.OcWidgetType.CHART){let e=t.PrFactory.createStructure();if(r===t.OcWidgetType.KPI){e.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_BINDING_TYPE,t.OcQuasarConstants.QUASAR_KPI_BINDING_TYPE)}else{e.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_BINDING_TYPE,t.OcQuasarConstants.QUASAR_CHART_BINDING_TYPE)}e.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_BINDING_SOURCE,n);a.put(t.OcQuasarConstants.QUASAR_ITEM_BINDING,e)}else if(r===t.OcWidgetType.ANALYTICAL_CARD){let e=t.PrFactory.createStructure();e.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_BINDING_TYPE,t.OcQuasarConstants.QUASAR_KPI_BINDING_TYPE);e.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_BINDING_SOURCE,n);a.putNewList(t.OcQuasarConstants.QUASAR_ITEM_BINDINGS).add(e)}else if(r===t.OcWidgetType.GRID){a.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_BINDING,n)}};t.OcQuasarWidgetConverter.addCalculationVariableContentToDocument=function(e,a){let r=e.getCalcVar();if(t.isNull(r)){return false}a.putString("CustomControl",a.getStringByKey("CType"));a.remove("CType");a.putString("Id",r.getStringByKey("id"));return true};t.OcQuasarWidgetConverter.addFieldSelectionContentToDocument=function(e,a){let r=e.getFieldSelection();if(t.isNull(r)){return false}a.putString("CustomControl",a.getStringByKey("CType"));a.remove("CType");a.putString("Id",r.getStringByKey("id"));return true};t.OcQuasarWidgetConverter.addImageContentToDocument=function(e,a,r){if(e.getLayout().isBackgroundWidget()&&r.getMainLayoutType()!==t.OcLayoutType.CANVAS){return false}let n=e.getImage();if(t.isNull(n)){return false}if(n.hasImageData()){a.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_IMAGE_SRC,n.getImageData())}else{a.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_IMAGE_SRC,e.getImageUrl())}return true};t.OcQuasarWidgetConverter.addMultiBindingBindingToDocument=function(e,a,r){let n=r.putNewList(t.OcQuasarConstants.QUASAR_ITEM_BINDINGS);let o;let s;if(t.notNull(e)){o=n.addNewStructure();s=t.XStringUtils.concatenate2("dp:",t.XStringUtils.concatenate3(e.getStory().getNormalizedName(),"_",e.getNormalizedDataReferenceId()));o.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_BINDING_TYPE,t.OcQuasarConstants.QUASAR_KPI_BINDING_TYPE);o.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_BINDING_SOURCE,s)}if(t.notNull(a)){o=n.addNewStructure();s=t.XStringUtils.concatenate2("dp:",t.XStringUtils.concatenate3(a.getStory().getNormalizedName(),"_",a.getNormalizedDataReferenceId()));o.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_BINDING_TYPE,t.OcQuasarConstants.QUASAR_CHART_BODY_BINDING_TYPE);o.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_BINDING_SOURCE,s)}};t.OcQuasarWidgetConverter.addPageFilterContentToDocument=function(e,a){let r=e.getPageFilter();if(t.isNull(r)){return false}a.putString("CustomControl",a.getStringByKey("CType"));a.remove("CType");a.putString("Id",r.getStringByKey("source"));return true};t.OcQuasarWidgetConverter.addPictogramContentToDocument=function(e,a){let r=e.getPictogram();a.putString(t.OcQuasarConstants.QUASAR_ITEM_PICTOGRAM_SVG,r);return true};t.OcQuasarWidgetConverter.addTextContent=function(e,a){let r=e.addNewStructure();r.putString(t.OcQuasarConstants.QUASAR_CONTENT_TYPE,t.OcQuasarConstants.QUASAR_ITEM_TEXT);r.putString(t.OcQuasarConstants.QUASAR_ITEM_TEXT,a)};t.OcQuasarWidgetConverter.addTextContentToDocument=function(e,a){let r=e.getWidgetText();a.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_TEXT,r);return true};t.OcQuasarWidgetConverter.addUnsupportedWidgetToDocument=function(e){e.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_TEXT,t.OcQuasarConstants.QUASAR_ITEM_TEXT_UNSUPPORTED_WIDGET);return true};t.OcQuasarWidgetConverter.addWidgetContentToDocument=function(e,a,r){let n=true;let o=e.getWidgetType();if(o===t.OcWidgetType.TEXT){n=t.OcQuasarWidgetConverter.addTextContentToDocument(e,a)}else if(o===t.OcWidgetType.UNKNOWN){n=t.OcQuasarWidgetConverter.addUnsupportedWidgetToDocument(a)}else if(o===t.OcWidgetType.PICTOGRAM){n=t.OcQuasarWidgetConverter.addPictogramContentToDocument(e,a)}else if(o===t.OcWidgetType.IMAGE){n=t.OcQuasarWidgetConverter.addImageContentToDocument(e,a,r)}else if(o===t.OcWidgetType.PAGE_FILTER){n=t.OcQuasarWidgetConverter.addPageFilterContentToDocument(e,a)}else if(o===t.OcWidgetType.FIELD_SELECTION_INPUT_CONTROL){n=t.OcQuasarWidgetConverter.addFieldSelectionContentToDocument(e,a)}else if(o===t.OcWidgetType.CALCULATION_INPUT_CONTROL){n=t.OcQuasarWidgetConverter.addCalculationVariableContentToDocument(e,a)}return n};t.OcQuasarWidgetConverter.convert=function(e,a){let r=t.PrFactory.createStructure();r.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_NAME,e.getId());r.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ENTITY_ID,e.getNormalizedDataReferenceId());r.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_TYPE,e.getQuasarName(a));t.OcQuasarWidgetConverter.addBindingToDocument(e,r);let n=t.OcQuasarWidgetConverter.addWidgetContentToDocument(e,r,a);if(!n){return null}n=t.OcQuasarWidgetLayoutConverter.addLayoutToDocument(e,r,a);if(!n){return null}return r};t.OcQuasarWidgetConverter.convertCard=function(e,a,r){let n=t.PrFactory.createStructure();let o=false;n.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_TYPE,t.OcWidgetType.ANALYTICAL_CARD.getQuasarName());if(t.notNull(e)){n.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_NAME,e.getId());n.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ENTITY_ID,e.getNormalizedDataReferenceId());o=t.OcQuasarWidgetLayoutConverter.addLayoutToDocument(e,n,r)}else if(t.notNull(a)){n.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_NAME,a.getId());n.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ENTITY_ID,a.getNormalizedDataReferenceId());o=t.OcQuasarWidgetLayoutConverter.addLayoutToDocument(a,n,r)}if(!o){return null}t.OcQuasarWidgetConverter.addMultiBindingBindingToDocument(e,a,n);return n};t.OcQuasarWidgetConverter.convertCompositeCard=function(e,a,r,n,o,s){let i=a.getDescription();if(t.XStringUtils.isNullOrEmpty(i)){i=a.getName()}t.OcQuasarWidgetConverter.addTextContent(e,i);t.OcQuasarWidgetConverter.addTextContent(e,a.getPublicUrl());let c=null;if(t.notNull(r)){c=t.OcQuasarWidgetConverter.convert(r,s);e.add(c)}if(t.notNull(n)){e.add(t.OcQuasarWidgetConverter.convert(n,s))}if(t.notNull(o)){e.add(t.OcQuasarWidgetConverter.convert(o,s))}return c};t.OcQuasarWidgetConverter.prototype.releaseObject=function(){t.XObject.prototype.releaseObject.call(this)};t.OcQuasarWidgetLayoutConverter=function(){};t.OcQuasarWidgetLayoutConverter.prototype=new t.XObject;t.OcQuasarWidgetLayoutConverter.prototype._ff_c="OcQuasarWidgetLayoutConverter";t.OcQuasarWidgetLayoutConverter.addBackgroundAndBorderLayout=function(e,a){let r=e.getLayout();if(!r.isBackgroundWidget()){a.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_LAYOUT_BACKGROUND_COLOR,r.getBackgroundColor());a.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_LAYOUT_BORDER_COLOR,r.getBorderColor());a.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_LAYOUT_BORDER_FORMAT,r.getBorderFormat());a.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_LAYOUT_BORDER_STYLE,r.getBorderStyle());t.OcStoryUtils.addIntegerGtZeroToStructure(t.OcQuasarConstants.QUASAR_LAYOUT_BORDER_SIZE,r.getBorderSize(),a)}};t.OcQuasarWidgetLayoutConverter.addCanvasLayout=function(e,a){let r=e.getLayout();if(r.getHeight()>0){a.putString(t.OcQuasarConstants.QUASAR_LAYOUT_HEIGHT,t.XStringUtils.concatenate2(t.XInteger.convertToString(r.getHeight()),t.OcQuasarConstants.QUASAR_LAYOUT_PX))}a.putString(t.OcQuasarConstants.QUASAR_LAYOUT_WIDTH,t.XStringUtils.concatenate2(t.XInteger.convertToString(r.getWidth()),t.OcQuasarConstants.QUASAR_LAYOUT_PX));a.putInteger(t.OcQuasarConstants.QUASAR_LAYOUT_X,r.getX());a.putInteger(t.OcQuasarConstants.QUASAR_LAYOUT_Y,r.getY());t.OcStoryUtils.addIntegerGtZeroToStructure(t.OcQuasarConstants.QUASAR_LAYOUT_BORDER_CORNER_RADIUS,r.getCornerRadius(),a);t.OcQuasarWidgetLayoutConverter.addBackgroundAndBorderLayout(e,a);return true};t.OcQuasarWidgetLayoutConverter.addFlexLayout=function(e,a){let r=e.getWidgetType();if(r===t.OcWidgetType.CHART||r===t.OcWidgetType.GRID||r===t.OcWidgetType.IMAGE||r===t.OcWidgetType.PICTOGRAM){a.putString(t.OcQuasarConstants.QUASAR_LAYOUT_HEIGHT,"50%")}t.OcQuasarWidgetLayoutConverter.addBackgroundAndBorderLayout(e,a);return true};t.OcQuasarWidgetLayoutConverter.addLayoutToDocument=function(e,a,r){if(r.useSingleWidgetLayout()){return t.OcQuasarWidgetLayoutConverter.addSingleWidgetLayout(a)}let n=t.OcQuasarWidgetLayoutConverter.processLayoutType(e,r);if(t.isNull(n)){return false}if(n===t.OcLayoutType.FLOW_SIMPLE){return t.OcQuasarWidgetLayoutConverter.addSimpleLayout(e,a)}else if(n===t.OcLayoutType.FLOW){return t.OcQuasarWidgetLayoutConverter.addFlexLayout(e,a)}return t.OcQuasarWidgetLayoutConverter.addCanvasLayout(e,a)};t.OcQuasarWidgetLayoutConverter.addSimpleLayout=function(e,a){a.putString(t.OcQuasarConstants.QUASAR_LAYOUT_HEIGHT,"50%");t.OcQuasarWidgetLayoutConverter.addBackgroundAndBorderLayout(e,a);return true};t.OcQuasarWidgetLayoutConverter.addSingleWidgetLayout=function(e){e.putString(t.OcQuasarConstants.QUASAR_LAYOUT_HEIGHT,"100%");e.putString(t.OcQuasarConstants.QUASAR_LAYOUT_WIDTH,"100%");return true};t.OcQuasarWidgetLayoutConverter.isLayoutTypeSupportedByWidget=function(e,a){let r=e.getWidgetType();if(a===t.OcLayoutType.FLOW){return r===t.OcWidgetType.CHART||r===t.OcWidgetType.GRID||r===t.OcWidgetType.IMAGE||r===t.OcWidgetType.PICTOGRAM||r===t.OcWidgetType.TEXT||r===t.OcWidgetType.PAGE_FILTER||r===t.OcWidgetType.FIELD_SELECTION_INPUT_CONTROL||r===t.OcWidgetType.CALCULATION_INPUT_CONTROL}else if(a===t.OcLayoutType.FLOW_SIMPLE){return r===t.OcWidgetType.CHART||r===t.OcWidgetType.GRID||r===t.OcWidgetType.IMAGE}return true};t.OcQuasarWidgetLayoutConverter.processLayoutType=function(e,a){let r=null;let n=a.getMainLayoutType();if(n===t.OcLayoutType.FLOW||e.getPage().isResponsive()){r=t.OcLayoutType.FLOW}else if(n===t.OcLayoutType.FLOW_SIMPLE){r=t.OcLayoutType.FLOW_SIMPLE}else{r=t.OcLayoutType.CANVAS}if(t.OcQuasarWidgetLayoutConverter.isLayoutTypeSupportedByWidget(e,r)){return r}return null};t.OcQuasarWidgetLayoutConverter.prototype.releaseObject=function(){t.XObject.prototype.releaseObject.call(this)};t.OcDatasets=function(){};t.OcDatasets.prototype=new t.XObject;t.OcDatasets.prototype._ff_c="OcDatasets";t.OcDatasets.prototype.m_context=null;t.OcDatasets.prototype.m_datasets=null;t.OcDatasets.prototype.getContext=function(){return this.m_context};t.OcDatasets.prototype.getCubeNames=function(){let e=t.XList.create();let a=this.getDatasetsAsReadOnlyList();for(let r=0;r<a.size();r++){let n=a.get(r).getCubeName();if(t.XStringUtils.isNotNullAndNotEmpty(n)){e.add(n)}}e.sortByDirection(t.XSortDirection.ASCENDING);return e};t.OcDatasets.prototype.getDatasetByDatasource=function(t){return this.getDatasets().getByKey(t)};t.OcDatasets.prototype.getDatasets=function(){if(t.isNull(this.m_datasets)){this.m_datasets=this.processDatasets();if(t.isNull(this.m_datasets)){this.m_datasets=t.XHashMapByString.create()}}return this.m_datasets};t.OcDatasets.prototype.getDatasetsAsReadOnlyList=function(){return this.getDatasets().getValuesAsReadOnlyList()};t.OcDatasets.prototype.releaseObject=function(){this.m_context=null;this.m_datasets=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_datasets);t.XObject.prototype.releaseObject.call(this)};t.OcDatasets.prototype.setupDatasets=function(e){t.XObject.prototype.setup.call(this);this.m_context=e};t.OcDatasets.prototype.toString=function(){let e=this.getDatasetsAsReadOnlyList();let a=t.XStringBuffer.create();a.append("Datasets:");for(let t=0;t<e.size();t++){let r=e.get(t);a.appendNewLine().appendInt(t+1).append('. Dataset for datasource "').append(r.getDatasource()).append('", cube "').append(r.getCubeName());a.append('" and model "').append(r.getModelId()).append('"')}return a.toString()};t.OcDatasets.prototype.updateDatasetsWithCubesMetdata=function(e){if(!t.XCollectionUtils.hasElements(e)){return}let a=this.getDatasetsAsReadOnlyList();for(let r=0;r<a.size();r++){let n=a.get(r);let o=n.getCubeName();if(t.XStringUtils.isNullOrEmpty(o)){continue}let s=t.XString.replace(o,"CUBE:","");let i=e.getByKey(s);if(t.isNull(i)){this.getContext().getMessageManager().addMessage(t.OcMessage.newDataSourceNotFound(t.Severity.WARNING,o));continue}if(t.XStringUtils.isNotNullAndNotEmpty(i.getDataSourceName())){n.setDatasource(i.getDataSourceName())}if(i.getFormulas()!==null){n.setFormulaAliases(i.getFormulas())}if(i.getMemberDefinitions()!==null){n.setMemberDefinitions(i.getMemberDefinitions())}this.updateSystemName(n,i)}};t.OcDatasets.prototype.updateSystemName=function(e,a){let r=a.getSystemName();if(t.XStringUtils.isNotNullAndNotEmpty(r)){e.setSystemName(r)}else{let a=this.getContext().getConnection();if(t.notNull(a)){e.setSystemName(a.getSystemName())}}};t.OcImages=function(){};t.OcImages.prototype=new t.XObject;t.OcImages.prototype._ff_c="OcImages";t.OcImages.IMAGE_URL="/sap/fpa/services/rest/fpa/story/get-static-content/";t.OcImages.prototype.m_context=null;t.OcImages.prototype.m_imageUrl=null;t.OcImages.prototype.m_images=null;t.OcImages.prototype.m_storyId=null;t.OcImages.prototype.getContext=function(){return this.m_context};t.OcImages.prototype.getImageByImageId=function(t){return this.getImages().getByKey(t)};t.OcImages.prototype.getImageUrl=function(){if(t.notNull(this.m_imageUrl)){return this.m_imageUrl}this.m_imageUrl="";let e=this.getContext().getConnection();if(t.notNull(e)){let a=e.getSystemUri();let r=e.getTenantId();this.m_imageUrl=t.XStringUtils.concatenate5(a,t.OcImages.IMAGE_URL,this.getStoryId(),"/%s?tenant=",r)}return this.m_imageUrl};t.OcImages.prototype.getImages=function(){if(t.isNull(this.m_images)){this.m_images=this.processImages()}return this.m_images};t.OcImages.prototype.getStoryId=function(){return this.m_storyId};t.OcImages.prototype.releaseObject=function(){this.m_storyId=null;this.m_context=null;this.m_images=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_images);t.XObject.prototype.releaseObject.call(this)};t.OcImages.prototype.setupImages=function(e,a){t.XObject.prototype.setup.call(this);this.m_storyId=e;this.m_context=a};t.OcPageManager=function(){};t.OcPageManager.prototype=new t.XObject;t.OcPageManager.prototype._ff_c="OcPageManager";t.OcPageManager.create=function(e,a){let r=new t.OcPageManager;r.setupPageManager(e,a);return r};t.OcPageManager.prototype.m_pageByPageIdMap=null;t.OcPageManager.prototype.m_pageByPageNameMap=null;t.OcPageManager.prototype.m_pages=null;t.OcPageManager.prototype.m_widgetByWidgetIdMap=null;t.OcPageManager.prototype.containsPage=function(t){return this.getPageByPageIdMap().containsKey(t)};t.OcPageManager.prototype.getAllWidgetIds=function(){return this.getWidgetByWidgetIdMap().getKeysAsReadOnlyList()};t.OcPageManager.prototype.getAllWidgetIdsByWidgetType=function(e){let a=t.XList.create();let r=this.getWidgetByWidgetIdMap().getIterator();while(r.hasNext()){let t=r.next();if(t.getWidgetType()===e){a.add(t.getId())}}return a};t.OcPageManager.prototype.getAllWidgets=function(){return this.getWidgetByWidgetIdMap().getValuesAsReadOnlyList()};t.OcPageManager.prototype.getPageByPageId=function(t){return this.getPageByPageIdMap().getByKey(t)};t.OcPageManager.prototype.getPageByPageIdMap=function(){return this.m_pageByPageIdMap};t.OcPageManager.prototype.getPageByPageName=function(t){return this.getPageByPageNameMap().getByKey(t)};t.OcPageManager.prototype.getPageByPageNameMap=function(){if(t.notNull(this.m_pageByPageNameMap)){return this.m_pageByPageNameMap}this.m_pageByPageNameMap=t.XHashMapByString.create();let e=this.getPages();for(let a=0;a<e.size();a++){let r=e.get(a);if(t.XStringUtils.isNotNullAndNotEmpty(r.getName())){this.m_pageByPageNameMap.put(r.getName(),r)}}return this.m_pageByPageNameMap};t.OcPageManager.prototype.getPageByWidgetId=function(e){let a=this.getWidgetByWidgetIdMap().getByKey(e);if(t.notNull(a)){return a.getPage()}return null};t.OcPageManager.prototype.getPages=function(){if(t.isNull(this.m_pages)){this.m_pages=this.getPageByPageIdMap().getValuesAsReadOnlyList()}return this.m_pages};t.OcPageManager.prototype.getWidgetByWidgetId=function(t){return this.getWidgetByWidgetIdMap().getByKey(t)};t.OcPageManager.prototype.getWidgetByWidgetIdMap=function(){if(t.notNull(this.m_widgetByWidgetIdMap)){return this.m_widgetByWidgetIdMap}this.m_widgetByWidgetIdMap=t.XHashMapByString.create();let e=this.getPageByPageIdMap().getValuesAsReadOnlyList();for(let t=0;t<e.size();t++){let a=e.get(t);let r=a.getWidgetManager().getWidgets();for(let t=0;t<r.size();t++){let e=r.get(t);this.m_widgetByWidgetIdMap.put(e.getId(),e)}}return this.m_widgetByWidgetIdMap};t.OcPageManager.prototype.hasPages=function(){return this.getPageByPageIdMap().hasElements()};t.OcPageManager.prototype.releaseObject=function(){this.m_pages=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_pages);this.m_pageByPageIdMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_pageByPageIdMap);this.m_pageByPageNameMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_pageByPageNameMap);this.m_widgetByWidgetIdMap=t.XObjectExt.release(this.m_widgetByWidgetIdMap);t.XObject.prototype.releaseObject.call(this)};t.OcPageManager.prototype.setupPageManager=function(e,a){t.XObject.prototype.setup.call(this);this.m_pageByPageIdMap=a.getStoryEntityFactory().createPagesOfStory(e)};t.OcPageManager.prototype.toString=function(){if(t.isNull(this.m_pageByPageIdMap)){return"Pages not yet initialized"}let e=this.getPages();let a=t.XStringBuffer.create();a.append("Pages: (").appendInt(e.size()).append(")");for(let t=0;t<e.size();t++){let r=e.get(t);a.appendNewLine().appendInt(t+1).append(". Page: ").append(r.getId()).append(' "').append(r.getName()).append('" (').appendInt(r.getWidgetManager().getWidgetIds().size()).append(" widgets)")}return a.toString()};t.OcWidgetLayout=function(){};t.OcWidgetLayout.prototype=new t.XObject;t.OcWidgetLayout.prototype._ff_c="OcWidgetLayout";t.OcWidgetLayout.prototype.m_backgroundColor=null;t.OcWidgetLayout.prototype.m_backgroundWidget=false;t.OcWidgetLayout.prototype.m_borderColor=null;t.OcWidgetLayout.prototype.m_borderFormat=null;t.OcWidgetLayout.prototype.m_borderSize=0;t.OcWidgetLayout.prototype.m_borderStyle=null;t.OcWidgetLayout.prototype.m_cornerRadius=0;t.OcWidgetLayout.prototype.m_height=0;t.OcWidgetLayout.prototype.m_width=0;t.OcWidgetLayout.prototype.m_x=0;t.OcWidgetLayout.prototype.m_y=0;t.OcWidgetLayout.prototype.getBackgroundColor=function(){return this.m_backgroundColor};t.OcWidgetLayout.prototype.getBorderColor=function(){return this.m_borderColor};t.OcWidgetLayout.prototype.getBorderFormat=function(){return this.m_borderFormat};t.OcWidgetLayout.prototype.getBorderSize=function(){return this.m_borderSize};t.OcWidgetLayout.prototype.getBorderStyle=function(){return this.m_borderStyle};t.OcWidgetLayout.prototype.getCornerRadius=function(){return this.m_cornerRadius};t.OcWidgetLayout.prototype.getHeight=function(){return this.m_height};t.OcWidgetLayout.prototype.getWidth=function(){return this.m_width};t.OcWidgetLayout.prototype.getX=function(){return this.m_x};t.OcWidgetLayout.prototype.getY=function(){return this.m_y};t.OcWidgetLayout.prototype.isBackgroundWidget=function(){return this.m_backgroundWidget};t.OcWidgetLayout.prototype.releaseObject=function(){this.m_backgroundColor=null;this.m_borderColor=null;this.m_borderFormat=null;this.m_borderStyle=null;t.XObject.prototype.releaseObject.call(this)};t.OcWidgetLayout.prototype.setBackgroundColor=function(t){this.m_backgroundColor=t};t.OcWidgetLayout.prototype.setBorderColor=function(t){this.m_borderColor=t};t.OcWidgetLayout.prototype.setBorderFormat=function(t){this.m_borderFormat=t};t.OcWidgetLayout.prototype.setBorderSize=function(t){this.m_borderSize=t};t.OcWidgetLayout.prototype.setBorderStyle=function(t){this.m_borderStyle=t};t.OcWidgetLayout.prototype.setCornerRadius=function(t){this.m_cornerRadius=t};t.OcWidgetLayout.prototype.setHeight=function(t){this.m_height=t};t.OcWidgetLayout.prototype.setIsBackgroundWidget=function(t){this.m_backgroundWidget=t};t.OcWidgetLayout.prototype.setWidth=function(t){this.m_width=t};t.OcWidgetLayout.prototype.setX=function(t){this.m_x=t};t.OcWidgetLayout.prototype.setY=function(t){this.m_y=t};t.OcWidgetManager=function(){};t.OcWidgetManager.prototype=new t.XObject;t.OcWidgetManager.prototype._ff_c="OcWidgetManager";t.OcWidgetManager.create=function(e,a){let r=new t.OcWidgetManager;r.setupWidgetManager(e,a);return r};t.OcWidgetManager.prototype.m_backgroundImageWidget=null;t.OcWidgetManager.prototype.m_hasBackgroundImageWidget=null;t.OcWidgetManager.prototype.m_widgetByWidgetIdMap=null;t.OcWidgetManager.prototype.m_widgetIds=null;t.OcWidgetManager.prototype.m_widgets=null;t.OcWidgetManager.prototype.m_widgetsWithDataProvider=null;t.OcWidgetManager.prototype.containsWidget=function(t){return this.getWidgetByWidgetIdMap().containsKey(t)};t.OcWidgetManager.prototype.getBackgroundImageWidget=function(){if(t.isNull(this.m_hasBackgroundImageWidget)){this.m_backgroundImageWidget=this.processBackgroundImageWidget();this.m_hasBackgroundImageWidget=t.TriStateBool.lookup(t.notNull(this.m_backgroundImageWidget))}return this.m_backgroundImageWidget};t.OcWidgetManager.prototype.getWidgetById=function(t){return this.getWidgetByWidgetIdMap().getByKey(t)};t.OcWidgetManager.prototype.getWidgetByWidgetIdMap=function(){return this.m_widgetByWidgetIdMap};t.OcWidgetManager.prototype.getWidgetIds=function(){if(t.isNull(this.m_widgetIds)){this.m_widgetIds=this.getWidgetByWidgetIdMap().getKeysAsReadOnlyList()}return this.m_widgetIds};t.OcWidgetManager.prototype.getWidgets=function(){if(t.isNull(this.m_widgets)){this.m_widgets=this.getWidgetByWidgetIdMap().getValuesAsReadOnlyList()}return this.m_widgets};t.OcWidgetManager.prototype.getWigdetsWithDataProvider=function(){if(t.isNull(this.m_widgetsWithDataProvider)){return this.m_widgetsWithDataProvider=this.processWidgetsWithDataProvider()}return this.m_widgetsWithDataProvider};t.OcWidgetManager.prototype.hasWidgets=function(){return t.XCollectionUtils.hasElements(this.getWidgetByWidgetIdMap())};t.OcWidgetManager.prototype.processBackgroundImageWidget=function(){let e=this.getWidgets();for(let a=0;a<e.size();a++){let r=e.get(a);if(r.getWidgetType()===t.OcWidgetType.IMAGE&&r.getLayout().isBackgroundWidget()){return r}}return null};t.OcWidgetManager.prototype.processWidgetsWithDataProvider=function(){let e=t.XList.create();let a=this.getWidgets();for(let t=0;t<a.size();t++){let r=a.get(t);if(r.getWidgetType().hasDataProvider()){e.add(r)}}return e};t.OcWidgetManager.prototype.releaseObject=function(){this.m_backgroundImageWidget=null;this.m_hasBackgroundImageWidget=t.XObjectExt.release(this.m_hasBackgroundImageWidget);this.m_widgetIds=t.XObjectExt.release(this.m_widgetIds);this.m_widgets=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_widgets);this.m_widgetByWidgetIdMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_widgetByWidgetIdMap);this.m_widgetsWithDataProvider=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_widgetsWithDataProvider);t.XObject.prototype.releaseObject.call(this)};t.OcWidgetManager.prototype.setupWidgetManager=function(e,a){t.XObject.prototype.setup.call(this);this.m_widgetByWidgetIdMap=a.getStoryEntityFactory().createWidgetsOfPage(e)};t.OcWidgetManager.prototype.toString=function(){if(t.isNull(this.m_widgetByWidgetIdMap)){return"Widgets not yet initialized"}let e=this.getWidgets();let a=t.XStringBuffer.create();a.append("Widgets: (").appendInt(e.size()).append(")");for(let t=0;t<e.size();t++){let r=e.get(t);a.appendNewLine().appendInt(t+1).append(". Widget: ").append(r.getId()).append(" of type ").append(r.getWidgetType().getName())}return a.toString()};t.OcJsonPath=function(){};t.OcJsonPath.prototype=new t.XObject;t.OcJsonPath.prototype._ff_c="OcJsonPath";t.OcJsonPath.create=function(e){let a=new t.OcJsonPath;a.setup();a.m_pathElements=t.XList.create();let r=t.XStringTokenizer.splitString(e,".");if(t.XCollectionUtils.hasElements(r)){for(let t=0;t<r.size();t++){a.m_pathElements.add(r.get(t))}}return a};t.OcJsonPath.prototype.m_pathElements=null;t.OcJsonPath.prototype.getPathElementAt=function(t){return this.m_pathElements.get(t)};t.OcJsonPath.prototype.hasPathElements=function(){return this.m_pathElements.hasElements()};t.OcJsonPath.prototype.releaseObject=function(){this.m_pathElements=t.XObjectExt.release(this.m_pathElements);t.XObject.prototype.releaseObject.call(this)};t.OcJsonPath.prototype.size=function(){return this.m_pathElements.size()};t.OcJsonPath.prototype.toString=function(){let e=t.XStringBuffer.create();for(let t=0;t<this.m_pathElements.size();t++){if(t>0){e.append(".")}e.append(this.m_pathElements.get(t))}return e.toString()};t.OcJsonPathEvaluator={convertResultsToListOfString:function(e){let a=t.XList.create();if(!t.XCollectionUtils.hasElements(e)){return a}for(let r=0;r<e.size();r++){let n=e.get(r);if(n.isString()){let e=t.PrUtils.convertElementToStringValue(n,null);if(t.XStringUtils.isNotNullAndNotEmpty(e)){a.add(e)}}else if(n.isList()){let e=n.asList();for(let r=0;r<e.size();r++){let n=e.getStringAt(r);if(t.XStringUtils.isNotNullAndNotEmpty(n)){a.add(n)}}}}return a},convertResultsToListOfStructures:function(e){let a=t.XList.create();if(!t.XCollectionUtils.hasElements(e)){return a}for(let r=0;r<e.size();r++){let n=e.get(r);if(t.isNull(n)){continue}if(n.isStructure()){a.add(n.asStructure())}else if(n.isList()){let e=n.asList();for(let r=0;r<e.size();r++){let n=e.getStructureAt(r);if(t.notNull(n)){a.add(n)}}}}return a},getElementsAndAddToResults:function(e,a,r,n,o){if(t.isNull(e)||!a.hasPathElements()){return}if(e.isStructure()){t.OcJsonPathEvaluator.processStructure(e.asStructure(),a,r,n,o)}else if(e.isList()){if(o){throw t.XException.createIllegalArgumentException(t.XStringUtils.concatenate3('PrElement "',a.getPathElementAt(r-1),'" is not of cardinality 1'))}t.OcJsonPathEvaluator.processList(e.asList(),a,r,n,o)}else{return}},getJsonPathElements:function(e,a){return t.OcJsonPathEvaluator.getJsonPathElementsInternal(e,a,false)},getJsonPathElementsAsStrings:function(e,a){let r=t.OcJsonPathEvaluator.getJsonPathElements(e,a);return t.OcJsonPathEvaluator.convertResultsToListOfString(r)},getJsonPathElementsAsStructures:function(e,a){let r=t.OcJsonPathEvaluator.getJsonPathElements(e,a);return t.OcJsonPathEvaluator.convertResultsToListOfStructures(r)},getJsonPathElementsInternal:function(e,a,r){let n=t.XList.create();if(t.isNull(a)||!a.hasPathElements()){return n}t.OcJsonPathEvaluator.getElementsAndAddToResults(e,a,0,n,r);return n},getSingleJsonPathElement:function(e,a){let r=t.OcJsonPathEvaluator.getJsonPathElementsInternal(e,a,true);if(!t.XCollectionUtils.hasElements(r)){return null}if(r.size()!==1){throw t.XException.createIllegalArgumentException(t.XStringUtils.concatenate3('PrElement "',a.getPathElementAt(0),'" is not of cardinality 1'))}return r.get(0)},getSingleJsonPathElementAsList:function(e,a){let r=t.OcJsonPathEvaluator.getSingleJsonPathElement(e,a);if(t.notNull(r)&&r.isList()){return r.asList()}return null},getSingleJsonPathElementAsString:function(e,a){let r=t.OcJsonPathEvaluator.getSingleJsonPathElement(e,a);if(t.notNull(r)&&r.isString()){return r.asString().getString()}return null},getSingleJsonPathElementAsStructure:function(e,a){let r=t.OcJsonPathEvaluator.getSingleJsonPathElement(e,a);if(t.notNull(r)&&r.isStructure()){return r.asStructure()}return null},processList:function(e,a,r,n,o){for(let s=0;s<e.size();s++){let i=e.get(s);t.OcJsonPathEvaluator.getElementsAndAddToResults(i,a,r,n,o)}},processStructure:function(e,a,r,n,o){let s=a.getPathElementAt(r);let i=e.getByKey(s);if(t.notNull(i)){if(r===a.size()-1){n.add(i)}else{t.OcJsonPathEvaluator.getElementsAndAddToResults(i,a,r+1,n,o)}}}};t.OcMessage={CHART_WITHOUT_VIZ_DEF:'The chart "{0}" on page "{1}" does not have valid VizDef.',GRID_WITHOUT_DEFINITION:'The grid "{0}" on page "{1}" does not have a valid definition.',GRID_WITHOUT_FIREFLY_QUERY:'The grid "{0}" on page "{1}" does not have a valid query definition.',INVALID_STORY:"The story is not valid",INVALID_STORY_NAME:"The story does not have a valid id and name",KPI_WITHOUT_VIZ_DEF:'The kpi "{0}" on page "{1}" does not have valid VizDef.',MODEL_NOT_FOUND:'No model metadata found for data source "{0}".',PAGE_WITH_MULTIPLE_LAYOUTS:'The page "{0}" has {1} layouts. Pages with multiple layout definitions are not supported.',UNEXPECTED_ERROR:"An error is preventing the story to be displayed",WIDGET_WITHOUT_CONTENT:'The widget "{0}" of type "{1}" on page "{2}" does not have content.',WIDGET_WITHOUT_DATA_SOURCE:'The widget "{0}" of type "{1}" on page "{2}" does not have a valid data source.',createErrorMessageWithCause:function(e,a){let r=t.XMessage.createError(t.OriginLayer.APPLICATION,a,null,false,null);return t.XMessage.createError(t.OriginLayer.APPLICATION,e,r,false,null)},createMessage:function(e,a,r){return t.XMessage.createMessage(t.OriginLayer.APPLICATION,e,a,r,null,false,null)},createTextWithSingleArgument:function(e,a){return t.XString.replace(e,"{0}",a)},createTextWithThreeArguments:function(e,a,r,n){return t.XString.replace(t.OcMessage.createTextWithTwoArguments(e,a,r),"{2}",n)},createTextWithTwoArguments:function(e,a,r){return t.XString.replace(t.OcMessage.createTextWithSingleArgument(e,a),"{1}",r)},newChartWithoutVizDef:function(e,a){let r=t.OcMessage.createTextWithTwoArguments(t.OcMessage.CHART_WITHOUT_VIZ_DEF,a.getId(),a.getPage().getName());return t.OcMessage.createMessage(e,t.ErrorCodes.ET_INVALID_VALUE,r)},newDataSourceNotFound:function(e,a){let r=t.OcMessage.createTextWithSingleArgument(t.OcMessage.MODEL_NOT_FOUND,a);return t.OcMessage.createMessage(e,t.ErrorCodes.ET_INVALID_VALUE,r)},newGridWithoutDefinition:function(e,a){let r=t.OcMessage.createTextWithTwoArguments(t.OcMessage.GRID_WITHOUT_DEFINITION,a.getId(),a.getPage().getName());return t.OcMessage.createMessage(e,t.ErrorCodes.ET_INVALID_VALUE,r)},newGridWithoutQuery:function(e,a){let r=t.OcMessage.createTextWithTwoArguments(t.OcMessage.GRID_WITHOUT_FIREFLY_QUERY,a.getId(),a.getPage().getName());return t.OcMessage.createMessage(e,t.ErrorCodes.ET_INVALID_VALUE,r)},newInvalidStoryError:function(){return t.OcMessage.createMessage(t.Severity.ERROR,t.ErrorCodes.ET_INVALID_VALUE,t.OcMessage.INVALID_STORY)},newInvalidStoryNameError:function(){return t.OcMessage.createMessage(t.Severity.ERROR,t.ErrorCodes.ET_INVALID_VALUE,t.OcMessage.INVALID_STORY_NAME)},newKpiWithoutVizDef:function(e,a){let r=t.OcMessage.createTextWithTwoArguments(t.OcMessage.KPI_WITHOUT_VIZ_DEF,a.getId(),a.getPage().getName());return t.OcMessage.createMessage(e,t.ErrorCodes.ET_INVALID_VALUE,r)},newPageWithMultipleLayouts:function(e,a,r){let n=t.OcMessage.createTextWithTwoArguments(t.OcMessage.PAGE_WITH_MULTIPLE_LAYOUTS,a.getName(),t.XInteger.convertToString(r));return t.OcMessage.createMessage(e,t.ErrorCodes.ET_INVALID_VALUE,n)},newUnexpectedError:function(e){return t.OcMessage.createErrorMessageWithCause(t.OcMessage.UNEXPECTED_ERROR,t.XErrorHelper.convertExceptionToString(e))},newWidgetWithoutContent:function(e,a){let r=t.OcMessage.createTextWithThreeArguments(t.OcMessage.WIDGET_WITHOUT_CONTENT,a.getId(),a.getWidgetType().getName(),a.getPage().getName());return t.OcMessage.createMessage(e,t.ErrorCodes.ET_INVALID_VALUE,r)},newWidgetWithoutDatasource:function(e,a){let r=t.OcMessage.createTextWithThreeArguments(t.OcMessage.WIDGET_WITHOUT_DATA_SOURCE,a.getId(),a.getWidgetType().getName(),a.getPage().getName());return t.OcMessage.createMessage(e,t.ErrorCodes.ET_INVALID_VALUE,r)}};t.OcStoryUtils={addIntegerGtZeroToStructure:function(t,e,a){if(e>0){a.putInteger(t,e)}},getIntegerFromStructureByName:function(e,a){if(t.isNull(e)){return 0}let r=e.getByKey(a);if(t.isNull(r)){return 0}let n=t.PrUtils.convertElementToInteger(r);if(t.isNull(n)){return 0}return n.getInteger()},getValueOrEmptyString:function(e){return t.isNull(e)?"":e},normalizeString:function(e){let a=e;if(t.XStringUtils.isNotNullAndNotEmpty(a)){a=t.XString.replace(a," ","_");a=t.XString.replace(a,",","_");a=t.XString.replace(a," ","_");a=t.XString.replace(a,"-","_");a=t.XString.replace(a,".","");a=t.XString.replace(a,"\\","_");a=t.XString.replace(a,"/","_");a=t.XString.replace(a,"(","_");a=t.XString.replace(a,")","_");a=t.XString.replace(a,"+","_");a=t.XString.replace(a,":","_");a=t.XString.replace(a,"<","_");a=t.XString.replace(a,">","_");a=t.XString.toLowerCase(a)}return a}};t.OcOrcaDatasets=function(){};t.OcOrcaDatasets.prototype=new t.OcDatasets;t.OcOrcaDatasets.prototype._ff_c="OcOrcaDatasets";t.OcOrcaDatasets.create=function(e){let a=new t.OcOrcaDatasets;a.setupOrcaDatasets(e);return a};t.OcOrcaDatasets.prototype.m_orcaContext=null;t.OcOrcaDatasets.prototype.addDatasetsOfDatasetEntities=function(e){let a=this.getStoryEntityHelper().getEntitiesAsJsonByEntityType(t.OcOrcaConstants.STORY_ENTITY_DATASET);let r=a.getIterator();while(r.hasNext()){let a=r.next();let n=a.getStringByKey(t.OcOrcaConstants.ID_ELEMENT);if(t.isNull(n)){continue}let o=t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(a,t.OcOrcaConstants.PATH_FROM_DATASET_TO_MODEL_ID);let s=this.getDatasetFromDatasourceAndModel(n,o);if(t.notNull(s)){s.setVariables(t.OcJsonPathEvaluator.getSingleJsonPathElementAsList(a,t.OcOrcaConstants.PATH_FROM_DATASET_TO_VARIABLE));e.put(n,s)}}};t.OcOrcaDatasets.prototype.addDatasetsOfGridWidgets=function(e){let a=this.getStoryEntityHelper().getGridDefinitions();for(let r=0;r<a.size();r++){let n=a.get(r).getDatasource();if(e.containsKey(n)){continue}let o=this.getDatasetFromDatasourceAndModel(n,null);if(t.notNull(o)){e.put(n,o)}}};t.OcOrcaDatasets.prototype.getDatasetFromDatasourceAndModel=function(e,a){if(t.isNull(e)){return null}let r=a;if(t.isNull(r)){let a=t.XStringTokenizer.splitString(e,"[");let n=a.get(a.size()-1);let o=t.XStringTokenizer.splitString(n,"]");r=o.get(0)}let n=null;let o=t.XStringTokenizer.splitString(e,":");let s=o.get(0);if(t.XString.isEqual(s,t.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_PLANNING)){let e=o.get(1);let a=t.XStringTokenizer.splitString(e,"[");let r=a.get(a.size()-1);r=t.XString.substring(r,0,t.XString.size(r)-1);let s=t.XString.substring(r,0,1);if(t.XString.isEqual(s,"/")){r=t.XString.substring(r,1,t.XString.size(r));let e=t.XStringTokenizer.splitString(r,"/");let a=e.get(0);let n=e.get(1);n=t.XString.replace(n,"_qs_changed","");n=t.XString.replace(n,"_qs","");r=t.XStringUtils.concatenate3(a,":",n)}n=t.XStringUtils.concatenate3(t.OcOrcaConstants.CUBE,":",r)}else if(t.XString.isEqual(s,t.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_VIEW)){let e=o.get(1);let a=t.XStringTokenizer.splitString(e,"[");let r=a.get(2);r=t.XString.substring(r,0,t.XString.size(r)-1);let s=a.get(a.size()-1);s=t.XString.substring(s,0,t.XString.size(s)-1);n=t.XStringUtils.concatenate5(t.OcOrcaConstants.CUBE,":",r,":",s)}let i=t.OcDataset.create(e,r);if(t.notNull(n)){i.setCubeName(n)}return i};t.OcOrcaDatasets.prototype.getOrcaContext=function(){return this.m_orcaContext};t.OcOrcaDatasets.prototype.getStoryEntityHelper=function(){return this.getOrcaContext().getStoryEntityHelper()};t.OcOrcaDatasets.prototype.processDatasets=function(){let e=t.XHashMapByString.create();this.addDatasetsOfDatasetEntities(e);this.addDatasetsOfGridWidgets(e);return e};t.OcOrcaDatasets.prototype.releaseObject=function(){this.m_orcaContext=null;t.OcDatasets.prototype.releaseObject.call(this)};t.OcOrcaDatasets.prototype.setupOrcaDatasets=function(e){t.OcDatasets.prototype.setupDatasets.call(this,e);this.m_orcaContext=e};t.OcOrcaImages=function(){};t.OcOrcaImages.prototype=new t.OcImages;t.OcOrcaImages.prototype._ff_c="OcOrcaImages";t.OcOrcaImages.create=function(e,a){let r=new t.OcOrcaImages;r.setupImages(e,a);r.m_orcaContext=a;return r};t.OcOrcaImages.prototype.m_orcaContext=null;t.OcOrcaImages.prototype.getOrcaContext=function(){return this.m_orcaContext};t.OcOrcaImages.prototype.getStoryEntityHelper=function(){return this.getOrcaContext().getStoryEntityHelper()};t.OcOrcaImages.prototype.processImages=function(){let e=t.XHashMapByString.create();let a=this.getStoryEntityHelper().getEntitiesAsJsonByEntityType(t.OcOrcaConstants.STORY_ENTITY_IMAGE);for(let r=0;r<a.size();r++){let n=a.get(r);let o=n.getStringByKey(t.OcOrcaConstants.ID_ELEMENT);if(t.XStringUtils.isNotNullAndNotEmpty(o)){let a=t.OcImage.create(o);a.setImageData(t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(n,t.OcOrcaConstants.PATH_FROM_IMAGE_TO_IMAGE_DATA));a.setThumbnail(t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(n,t.OcOrcaConstants.PATH_FROM_IMAGE_TO_IMAGE_THUMBNAIL));e.put(o,a)}}return e};t.OcOrcaImages.prototype.releaseObject=function(){this.m_orcaContext=null;t.OcImages.prototype.releaseObject.call(this)};t.OcOrcaGridDefinition=function(){};t.OcOrcaGridDefinition.prototype=new t.DfIdObject;t.OcOrcaGridDefinition.prototype._ff_c="OcOrcaGridDefinition";t.OcOrcaGridDefinition.create=function(e,a){let r=new t.OcOrcaGridDefinition;r.setupGrid(e,a);return r};t.OcOrcaGridDefinition.prototype.m_datasource=null;t.OcOrcaGridDefinition.prototype.m_gridJson=null;t.OcOrcaGridDefinition.prototype.getDatasource=function(){if(t.isNull(this.m_datasource)){this.m_datasource=t.OcStoryUtils.getValueOrEmptyString(t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(this.getGridJson(),t.OcOrcaConstants.PATH_FROM_GRID_DATA_DEFINITION_TO_DATASOURCE))}return this.m_datasource};t.OcOrcaGridDefinition.prototype.getFireflyQuery=function(){return this.getGridJson().getStringByKey(t.OcOrcaConstants.WIDGET_FIREFLY_QUERY)};t.OcOrcaGridDefinition.prototype.getGridJson=function(){return this.m_gridJson};t.OcOrcaGridDefinition.prototype.releaseObject=function(){this.m_gridJson=null;this.m_datasource=null;t.DfIdObject.prototype.releaseObject.call(this)};t.OcOrcaGridDefinition.prototype.setupGrid=function(t,e){this.setupExt(t);this.m_gridJson=e};t.OcDataset=function(){};t.OcDataset.prototype=new t.XObject;t.OcDataset.prototype._ff_c="OcDataset";t.OcDataset.create=function(e,a){let r=new t.OcDataset;r.setupDataset(e,a);return r};t.OcDataset.prototype.m_cubeName=null;t.OcDataset.prototype.m_datasource=null;t.OcDataset.prototype.m_formulaAliases=null;t.OcDataset.prototype.m_memberDefinitions=null;t.OcDataset.prototype.m_modelId=null;t.OcDataset.prototype.m_systemName=null;t.OcDataset.prototype.m_variables=null;t.OcDataset.prototype.getCubeName=function(){return this.m_cubeName};t.OcDataset.prototype.getDatasource=function(){return this.m_datasource};t.OcDataset.prototype.getFormulaAliases=function(){return this.m_formulaAliases};t.OcDataset.prototype.getMemberDefinitions=function(){return this.m_memberDefinitions};t.OcDataset.prototype.getModelId=function(){return this.m_modelId};t.OcDataset.prototype.getSystemName=function(){return this.m_systemName};t.OcDataset.prototype.getVariables=function(){return this.m_variables};t.OcDataset.prototype.releaseObject=function(){this.m_datasource=null;this.m_modelId=null;this.m_cubeName=null;this.m_systemName=null;this.m_formulaAliases=null;this.m_memberDefinitions=null;this.m_variables=null;t.XObject.prototype.releaseObject.call(this)};t.OcDataset.prototype.setCubeName=function(t){this.m_cubeName=t};t.OcDataset.prototype.setDatasource=function(t){this.m_datasource=t};t.OcDataset.prototype.setFormulaAliases=function(t){this.m_formulaAliases=t};t.OcDataset.prototype.setMemberDefinitions=function(t){this.m_memberDefinitions=t};t.OcDataset.prototype.setSystemName=function(t){this.m_systemName=t};t.OcDataset.prototype.setVariables=function(t){this.m_variables=t};t.OcDataset.prototype.setupDataset=function(e,a){t.XObject.prototype.setup.call(this);this.m_datasource=e;this.m_modelId=a};t.OcDataset.prototype.toString=function(){let e=t.XStringBuffer.create();e.append("Dataset:").appendNewLine().append(" Datasource = ").append(this.getDatasource());e.appendNewLine().append(" Model Id = ").append(this.getModelId());e.appendNewLine().append(" Cube = ").append(this.getCubeName());return e.toString()};t.OcImage=function(){};t.OcImage.prototype=new t.DfIdObject;t.OcImage.prototype._ff_c="OcImage";t.OcImage.create=function(e){let a=new t.OcImage;a.setupImage(e);return a};t.OcImage.prototype.m_imageData=null;t.OcImage.prototype.m_thumbnail=null;t.OcImage.prototype.getImageData=function(){return this.m_imageData};t.OcImage.prototype.getThumbnail=function(){return this.m_thumbnail};t.OcImage.prototype.hasImageData=function(){return this.getImageData()!==null};t.OcImage.prototype.releaseObject=function(){this.m_imageData=null;this.m_thumbnail=null;t.DfIdObject.prototype.releaseObject.call(this)};t.OcImage.prototype.setImageData=function(t){this.m_imageData=t};t.OcImage.prototype.setThumbnail=function(t){this.m_thumbnail=t};t.OcImage.prototype.setupImage=function(t){this.setupExt(t)};t.OcWidget=function(){};t.OcWidget.prototype=new t.DfIdObject;t.OcWidget.prototype._ff_c="OcWidget";t.OcWidget.prototype.m_dataReferenceId=null;t.OcWidget.prototype.m_layout=null;t.OcWidget.prototype.m_normalizedDataReferenceId=null;t.OcWidget.prototype.m_page=null;t.OcWidget.prototype.m_widgetType=null;t.OcWidget.prototype.getContext=function(){return this.getPage().getContext()};t.OcWidget.prototype.getDataReferenceId=function(){if(t.isNull(this.m_dataReferenceId)){this.m_dataReferenceId=t.OcStoryUtils.getValueOrEmptyString(this.processDataReferenceId())}return this.m_dataReferenceId};t.OcWidget.prototype.getLayout=function(){if(t.isNull(this.m_layout)){this.m_layout=this.processLayout();if(t.isNull(this.m_layout)){this.m_layout=new t.OcWidgetLayout}}return this.m_layout};t.OcWidget.prototype.getNormalizedDataReferenceId=function(){if(t.isNull(this.m_normalizedDataReferenceId)){this.m_normalizedDataReferenceId=t.OcStoryUtils.normalizeString(this.getDataReferenceId())}return this.m_normalizedDataReferenceId};t.OcWidget.prototype.getPage=function(){return this.m_page};t.OcWidget.prototype.getQuasarName=function(t){return this.m_widgetType.getQuasarName()};t.OcWidget.prototype.getStory=function(){return this.getPage().getStory()};t.OcWidget.prototype.getWidgetType=function(){return this.m_widgetType};t.OcWidget.prototype.releaseObject=function(){this.m_dataReferenceId=null;this.m_normalizedDataReferenceId=null;this.m_page=null;t.XObjectExt.release(this.m_layout);t.DfIdObject.prototype.releaseObject.call(this)};t.OcWidget.prototype.setupWidget=function(e,a,r){t.DfIdObject.prototype.setupExt.call(this,e);this.m_widgetType=a;this.m_page=r};t.OcWidget.prototype.toString=function(){let e=this.getWidgetType();let a=t.XStringBuffer.create();a.append("Widget: ").append(this.getId()).appendNewLine().append(" Type = ").append(e.getName());a.appendNewLine().append(" Page = ").append(this.getPage().getName());let r=this.getDataReferenceId();if(t.XStringUtils.isNotNullAndNotEmpty(r)){a.appendNewLine().append(" Data Reference id = ").append(r)}return a.toString()};t.OcConnection=function(){};t.OcConnection.prototype=new t.XObject;t.OcConnection.prototype._ff_c="OcConnection";t.OcConnection.createByConnection=function(e){let a=new t.OcConnection;a.setupConnection(e);return a};t.OcConnection.prototype.m_publicUrl=null;t.OcConnection.prototype.m_systemName=null;t.OcConnection.prototype.m_systemUri=null;t.OcConnection.prototype.m_tenantId=null;t.OcConnection.prototype.getOrcaPublicUrl=function(){return this.m_publicUrl};t.OcConnection.prototype.getSystemName=function(){return this.m_systemName};t.OcConnection.prototype.getSystemUri=function(){return this.m_systemUri};t.OcConnection.prototype.getTenantId=function(){return this.m_tenantId};t.OcConnection.prototype.setupConnection=function(e){this.setup();if(t.notNull(e)){let a=e.getSystemDescription();if(t.notNull(a)){this.m_systemName=a.getSystemName();this.m_systemUri=a.getUrlExt(true,true,false,false,false,true,true,true,true)}this.m_tenantId=e.getPersonalization().getTenantId();this.m_publicUrl=e.getSystemConnect().getServerMetadata().getOrcaPublicUrl()}};t.OcOrcaBaseWidget=function(){};t.OcOrcaBaseWidget.prototype=new t.OcWidget;t.OcOrcaBaseWidget.prototype._ff_c="OcOrcaBaseWidget";t.OcOrcaBaseWidget.prototype.m_orcaPage=null;t.OcOrcaBaseWidget.prototype.m_widgetJson=null;t.OcOrcaBaseWidget.prototype.addBorderDefinition=function(e,a){let r=a.getStructureByKey(t.OcOrcaConstants.WIDGET_BORDER);if(t.isNull(r)){return}e.setBorderColor(r.getStringByKey(t.OcOrcaConstants.WIDGET_BORDER_COLOR));e.setBorderFormat(r.getStringByKey(t.OcOrcaConstants.WIDGET_BORDER_FORMAT));e.setBorderSize(t.OcStoryUtils.getIntegerFromStructureByName(r,t.OcOrcaConstants.WIDGET_BORDER_THICKNESS));e.setBorderStyle(r.getStringByKey(t.OcOrcaConstants.WIDGET_BORDER_STYLE));e.setCornerRadius(t.OcStoryUtils.getIntegerFromStructureByName(r,t.OcOrcaConstants.WIDGET_BORDER_RADIUS))};t.OcOrcaBaseWidget.prototype.getOrcaContext=function(){return this.getOrcaStory().getOrcaContext()};t.OcOrcaBaseWidget.prototype.getOrcaPage=function(){return this.m_orcaPage};t.OcOrcaBaseWidget.prototype.getOrcaStory=function(){return this.getOrcaPage().getOrcaStory()};t.OcOrcaBaseWidget.prototype.getPageLayout=function(){return this.getOrcaPage().getPageLayout()};t.OcOrcaBaseWidget.prototype.getWidgetJson=function(){return this.m_widgetJson};t.OcOrcaBaseWidget.prototype.processCanvasLayout=function(){let e=new t.OcWidgetLayout;let a=this.getPageLayout();let r=a.getSectionLayoutJsonByWidgetId(this.getId());if(t.notNull(r)){e.setX(t.OcStoryUtils.getIntegerFromStructureByName(r,t.OcOrcaConstants.WIDGET_POS_X));e.setY(t.OcStoryUtils.getIntegerFromStructureByName(r,t.OcOrcaConstants.WIDGET_POS_Y));let a=t.OcStoryUtils.getIntegerFromStructureByName(r,t.OcOrcaConstants.WIDGET_HEIGHT);let n=t.OcStoryUtils.getIntegerFromStructureByName(r,t.OcOrcaConstants.WIDGET_WIDTH);e.setHeight(a);e.setIsBackgroundWidget(this.processIsBackgroundWidget(a,n))}let n=a.getWidgetLayoutJsonByWidgetId(this.getId());if(t.notNull(n)){this.addBorderDefinition(e,n);e.setBackgroundColor(n.getStringByKey(t.OcOrcaConstants.WIDGET_BACKGROUND_COLOR));let a=e.getX()+t.OcStoryUtils.getIntegerFromStructureByName(n,t.OcOrcaConstants.WIDGET_POS_X);e.setX(a);let r=e.getY()+t.OcStoryUtils.getIntegerFromStructureByName(n,t.OcOrcaConstants.WIDGET_POS_Y);e.setY(r);e.setWidth(t.OcStoryUtils.getIntegerFromStructureByName(n,t.OcOrcaConstants.WIDGET_WIDTH));e.setHeight(t.OcStoryUtils.getIntegerFromStructureByName(n,t.OcOrcaConstants.WIDGET_HEIGHT))}return e};t.OcOrcaBaseWidget.prototype.processDataReferenceId=function(){return t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(this.getWidgetJson(),t.OcOrcaConstants.PATH_FROM_WIDGET_TO_DATA_REFERENCE_ID)};t.OcOrcaBaseWidget.prototype.processIsBackgroundWidget=function(e,a){let r=this.getPageLayout().getPageLayoutJson();let n=t.OcJsonPathEvaluator.getSingleJsonPathElementAsStructure(r,t.OcOrcaConstants.PATH_FROM_WIDGET_TO_LAYOUT_DEFINITION);let o=t.OcStoryUtils.getIntegerFromStructureByName(n,t.OcOrcaConstants.WIDGET_HEIGHT);let s=t.OcStoryUtils.getIntegerFromStructureByName(n,t.OcOrcaConstants.WIDGET_WIDTH);let i=e>0&&e===o&&a>0&&a===s;return i};t.OcOrcaBaseWidget.prototype.processLayout=function(){if(this.getPageLayout().hasCanvasLayout()){return this.processCanvasLayout()}else if(this.getPage().isResponsive()){return this.processResponsivePageLayout()}return null};t.OcOrcaBaseWidget.prototype.processResponsivePageLayout=function(){let e=new t.OcWidgetLayout;let a=this.getPageLayout().getLaneLayoutJsonByWidgetId(this.getId());if(t.notNull(a)){this.addBorderDefinition(e,a)}e.setIsBackgroundWidget(false);return e};t.OcOrcaBaseWidget.prototype.releaseObject=function(){this.m_orcaPage=null;this.m_widgetJson=null;t.OcWidget.prototype.releaseObject.call(this)};t.OcOrcaBaseWidget.prototype.setupOrcaBaseWidget=function(e,a,r,n){t.OcWidget.prototype.setupWidget.call(this,e,a,n);this.m_orcaPage=n;this.m_widgetJson=r};t.OcOrcaGridWidget=function(){};t.OcOrcaGridWidget.prototype=new t.OcOrcaBaseWidget;t.OcOrcaGridWidget.prototype._ff_c="OcOrcaGridWidget";t.OcOrcaGridWidget.create=function(e,a,r){let n=new t.OcOrcaGridWidget;n.setupOrcaBaseWidget(e,t.OcWidgetType.GRID,a,r);return n};t.OcOrcaGridWidget.prototype.m_datasets=null;t.OcOrcaGridWidget.prototype.m_fireflyQuery=null;t.OcOrcaGridWidget.prototype.m_gridDefinition=null;t.OcOrcaGridWidget.prototype.m_hasGridDefinition=null;t.OcOrcaGridWidget.prototype.getDatasets=function(){if(t.notNull(this.m_datasets)){return this.m_datasets}this.m_datasets=t.XList.create();let e=this.getGridDefinition();if(t.isNull(e)){return this.m_datasets}let a=e.getDatasource();if(t.XStringUtils.isNotNullAndNotEmpty(a)){let e=this.getStory().getDatasets().getDatasetByDatasource(a);if(t.notNull(e)){this.m_datasets.add(e)}}if(!this.m_datasets.hasElements()){this.getContext().getMessageManager().addMessage(t.OcMessage.newWidgetWithoutDatasource(t.Severity.WARNING,this))}return this.m_datasets};t.OcOrcaGridWidget.prototype.getFireflyQuery=function(){if(t.isNull(this.m_fireflyQuery)){let e=this.getGridDefinition();if(t.isNull(e)){this.m_fireflyQuery=""}else{this.m_fireflyQuery=t.OcStoryUtils.getValueOrEmptyString(e.getFireflyQuery());if(t.XStringUtils.isNullOrEmpty(this.m_fireflyQuery)){this.getContext().getMessageManager().addMessage(t.OcMessage.newGridWithoutQuery(t.Severity.WARNING,this))}}}return this.m_fireflyQuery};t.OcOrcaGridWidget.prototype.getGridDefinition=function(){if(t.isNull(this.m_hasGridDefinition)){this.m_gridDefinition=this.getOrcaContext().getStoryEntityHelper().getGridDefinitionByGridId(this.getDataReferenceId());this.m_hasGridDefinition=t.TriStateBool.lookup(t.notNull(this.m_gridDefinition));if(!this.m_hasGridDefinition.getBoolean()){this.getContext().getMessageManager().addMessage(t.OcMessage.newGridWithoutDefinition(t.Severity.WARNING,this))}}return this.m_gridDefinition};t.OcOrcaGridWidget.prototype.releaseObject=function(){this.m_fireflyQuery=null;this.m_datasets=t.XObjectExt.release(this.m_datasets);this.m_hasGridDefinition=t.XObjectExt.release(this.m_hasGridDefinition);this.m_gridDefinition=t.XObjectExt.release(this.m_gridDefinition);t.OcOrcaBaseWidget.prototype.releaseObject.call(this)};t.OcOrcaGridWidget.prototype.toString=function(){let e=t.XStringBuffer.create();e.append(t.OcOrcaBaseWidget.prototype.toString.call(this));let a=this.getFireflyQuery();if(t.XStringUtils.isNotNullAndNotEmpty(a)){e.appendNewLine().append("FF query available")}else{e.appendNewLine().append(" No FF query of grid available")}let r=this.getDatasets();if(t.XCollectionUtils.hasElements(r)){e.appendNewLine().append(r.toString())}return e.toString()};t.OcOrcaWidget=function(){};t.OcOrcaWidget.prototype=new t.OcOrcaBaseWidget;t.OcOrcaWidget.prototype._ff_c="OcOrcaWidget";t.OcOrcaWidget.create=function(e,a,r,n){let o=new t.OcOrcaWidget;o.setupOrcaBaseWidget(e,a,r,n);return o};t.OcOrcaWidget.prototype.m_hasImage=null;t.OcOrcaWidget.prototype.m_image=null;t.OcOrcaWidget.prototype.m_pictogram=null;t.OcOrcaWidget.prototype.m_widgetText=null;t.OcOrcaWidget.prototype.getCalcVar=function(){let e=this.getOrcaPage().getStory().getCalculationVariables().getCalculationVariables().getValuesAsReadOnlyList();for(let a=0;a<e.size();a++){let r=e.get(a);let n=r.getSelectionInfos().asStructure().getStringByKey("source");if(t.XString.isEqual(this.getId(),n)){r.getSelectionInfos().asStructure().putString("id",r.getId());return r.getSelectionInfos().asStructure()}}return null};t.OcOrcaWidget.prototype.getFieldSelection=function(){let e=this.getOrcaPage().getStory().getFieldSelections().getFieldSelections().getValuesAsReadOnlyList();for(let a=0;a<e.size();a++){let r=e.get(a);let n=r.getSelectionInfos().asStructure().getStringByKey("source");if(t.XString.isEqual(this.getId(),n)){r.getSelectionInfos().asStructure().putString("id",r.getId());return r.getSelectionInfos().asStructure()}}return null};t.OcOrcaWidget.prototype.getImage=function(){if(t.isNull(this.m_hasImage)){this.m_image=this.getStory().getImages().getImageByImageId(this.getDataReferenceId());this.m_hasImage=t.TriStateBool.lookup(t.notNull(this.m_image));if(t.isNull(this.m_image)){this.getContext().getMessageManager().addMessage(t.OcMessage.newWidgetWithoutContent(t.Severity.WARNING,this))}}return this.m_image};t.OcOrcaWidget.prototype.getImageUrl=function(){return t.XString.replace(this.getStory().getImages().getImageUrl(),"%s",this.getDataReferenceId())};t.OcOrcaWidget.prototype.getPageFilter=function(){let e=this.getOrcaPage().getPageFilters();for(let a=0;a<e.size();a++){let r=e.getStructureAt(a);let n=r.getStringByKey("source");if(t.XString.isEqual(this.getId(),n)){return r}}return null};t.OcOrcaWidget.prototype.getPageGroup=function(){let e=t.PrFactory.createList();let a=this.getOrcaPage().getPageGroups();for(let r=0;r<a.size();r++){let n=a.getStructureAt(r);let o=n.getListByKey("members");for(let a=0;a<o.size();a++){if(t.XString.isEqual(o.getStringAt(a),this.getId())){let t=e.addNewStructure();t.putNotNullAndNotEmpty("driverGroupInfo",n.getStructureByKey("driverGroupInfo"))}}}return e};t.OcOrcaWidget.prototype.getPictogram=function(){if(t.isNull(this.m_pictogram)){this.m_pictogram=t.OcStoryUtils.getValueOrEmptyString(t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(this.getWidgetJson(),t.OcOrcaConstants.PATH_FROM_WIDGET_TO_SVG))}return this.m_pictogram};t.OcOrcaWidget.prototype.getWidgetText=function(){if(t.isNull(this.m_widgetText)){this.m_widgetText=t.OcStoryUtils.getValueOrEmptyString(t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(this.getWidgetJson(),t.OcOrcaConstants.PATH_FROM_WIDGET_TO_TEXT));if(t.XStringUtils.isNullOrEmpty(this.m_widgetText)){this.getContext().getMessageManager().addMessage(t.OcMessage.newWidgetWithoutContent(t.Severity.INFO,this))}}return this.m_widgetText};t.OcOrcaWidget.prototype.releaseObject=function(){this.m_widgetText=null;this.m_pictogram=null;this.m_hasImage=t.XObjectExt.release(this.m_hasImage);this.m_image=t.XObjectExt.release(this.m_image);t.OcOrcaBaseWidget.prototype.releaseObject.call(this)};t.OcOrcaWidget.prototype.toString=function(){let e=t.XStringBuffer.create();e.append(t.OcOrcaBaseWidget.prototype.toString.call(this));let a=this.getWidgetType();if(a===t.OcWidgetType.TEXT){let a=this.getWidgetText();if(t.XStringUtils.isNullOrEmpty(a)){e.appendNewLine().append(" Text = The text of the widget is empty").append(a)}else{e.appendNewLine().append(" Text = ").append(a)}}else if(a===t.OcWidgetType.IMAGE){let a=this.getImage();if(t.isNull(a)||!a.hasImageData()){e.appendNewLine().append(" Image = No image available")}else{e.appendNewLine().append(" Image = ").append(a.getId());if(t.XStringUtils.isNotNullAndNotEmpty(a.getThumbnail())){e.appendNewLine().append("Image thumbnail available")}}}return e.toString()};t.OcOrcaWidgetWithDpAndVizDef=function(){};t.OcOrcaWidgetWithDpAndVizDef.prototype=new t.OcOrcaBaseWidget;t.OcOrcaWidgetWithDpAndVizDef.prototype._ff_c="OcOrcaWidgetWithDpAndVizDef";t.OcOrcaWidgetWithDpAndVizDef.prototype.m_datasets=null;t.OcOrcaWidgetWithDpAndVizDef.prototype.m_vizDef=null;t.OcOrcaWidgetWithDpAndVizDef.prototype.addDatasetInformationToVizDef=function(e){let a=this.getDatasets();if(!t.XCollectionUtils.hasElements(a)){return}let r=a.get(0);let n=r.getFormulaAliases();if(t.notNull(n)){e.put(t.OcOrcaConstants.MODIFIED_VIZ_DEF_FORMULA_ALIASES,n)}let o=r.getMemberDefinitions();if(t.notNull(o)){e.put(t.OcOrcaConstants.MODIFIED_VIZ_DEF_MEMBER_DEFINITIONS,o)}};t.OcOrcaWidgetWithDpAndVizDef.prototype.addMeasureSyncToVizDef=function(e){let a=e.getStringByKey(t.OcOrcaConstants.VIZ_DEF_SOURCE_ID);if(t.XStringUtils.isNullOrEmpty(a)){return}let r=this.getStory().getMeasureSyncs().getMeasureSyncByMeasureName(a);if(t.notNull(r)){e.putString(t.OcOrcaConstants.MODIFIED_VIZ_DEF_COLOR,r.getColor());e.putString(t.OcOrcaConstants.MODIFIED_VIZ_DEF_PATTERN,r.getPattern())}};t.OcOrcaWidgetWithDpAndVizDef.prototype.getDatasets=function(){if(t.notNull(this.m_datasets)){return this.m_datasets}this.m_datasets=t.XList.create();let e=t.OcJsonPathEvaluator.getJsonPathElementsAsStrings(this.getWidgetJson(),t.OcOrcaConstants.PATH_FROM_WIDGET_TO_DATASETS);for(let a=0;a<e.size();a++){let r=this.getOrcaStory().getDatasets().getDatasetByDatasource(e.get(a));if(t.notNull(r)){this.m_datasets.add(r)}}if(!this.m_datasets.hasElements()){this.getContext().getMessageManager().addMessage(t.OcMessage.newWidgetWithoutDatasource(t.Severity.WARNING,this))}return this.m_datasets};t.OcOrcaWidgetWithDpAndVizDef.prototype.getModifiedVizDef=function(){let e=t.PrFactory.createStructureDeepCopy(t.OcJsonPathEvaluator.getSingleJsonPathElementAsStructure(this.getWidgetJson(),t.OcOrcaConstants.PATH_FROM_WIDGET_TO_VIZ_DEF));if(t.isNull(e)){return null}e.putString(t.OcQuasarConstants.QUASAR_WIDGET_ID,this.getWidgetJson().getStringByKey(t.OcOrcaConstants.ID_ELEMENT));e.putStringNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_BACKGROUND_COLOR,this.getLayout().getBackgroundColor());let a=e.getStructureByKey(t.OcOrcaConstants.VIZ_DEF_CHART);this.addDatasetInformationToVizDef(a);let r=a.getListByKey(t.OcOrcaConstants.VIZ_DEF_BINDING);for(let a=0;a<r.size();a++){let n=r.getStructureAt(a);let o=n.getListByKey(t.OcOrcaConstants.VIZ_DEF_SOURCE);for(let a=0;a<o.size();a++){let r=o.getStructureAt(a);let n=r.getStringByKey(t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE);if(t.isNull(n)){continue}if(t.XString.isEqual(n,t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_MEMBER)||t.XString.isEqual(n,t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_CALCULATION)||t.XString.isEqual(n,t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_RESTRICTED_MEASURE)){this.addMeasureSyncToVizDef(r)}let s=r.getStructureByKey(t.OcOrcaConstants.VIZ_DEF_SOURCE_PARENT_KEY);let i=s.getStringByKey(t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE);if(t.XString.isEqual(n,t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_HIERARCHY)||t.XString.isEqual(i,t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_HIERARCHY)){let a=s.getStringByKey(t.OcOrcaConstants.VIZ_DEF_DIMENSION);if(t.isNull(a)){a=r.getStringByKey(t.OcOrcaConstants.VIZ_DEF_DIMENSION)}let n=e.getListByKey(t.OcOrcaConstants.VIZ_DEF_HIERARCHY_LEVEL_INFO);if(t.notNull(n)){for(let e=0;e<n.size();e++){let o=n.getStructureAt(e);let s=o.getStructureByKey(t.OcOrcaConstants.VIZ_DEF_ENTITY_ID);let i=s.getStringByKey(t.OcOrcaConstants.VIZ_DEF_DIMENSION);if(t.XString.isEqual(i,a)){r.putInteger(t.OcOrcaConstants.MODIFIED_VIZ_DEF_HIERARCHY_DRILL_LEVEL,t.OcStoryUtils.getIntegerFromStructureByName(o,t.OcOrcaConstants.VIZ_DEF_HIERARCHY_DRILL_LEVEL));r.putString(t.OcOrcaConstants.MODIFIED_VIZ_DEF_HIERARCHY_DRILL_MODE,o.getStringByKey(t.OcOrcaConstants.VIZ_DEF_HIERARCHY_DRILL_MODE))}}}}}}return e};t.OcOrcaWidgetWithDpAndVizDef.prototype.getVizDef=function(){if(t.isNull(this.m_vizDef)){this.m_vizDef=this.getModifiedVizDef();if(t.isNull(this.m_vizDef)){this.m_vizDef=t.PrFactory.createStructure()}if(!this.m_vizDef.hasElements()){this.getContext().getMessageManager().addMessage(this.getMissingVitDefWarning())}}return this.m_vizDef};t.OcOrcaWidgetWithDpAndVizDef.prototype.releaseObject=function(){this.m_vizDef=null;this.m_datasets=t.XObjectExt.release(this.m_datasets);t.OcOrcaBaseWidget.prototype.releaseObject.call(this)};t.OcOrcaWidgetWithDpAndVizDef.prototype.toString=function(){let e=t.XStringBuffer.create();e.append(t.OcOrcaBaseWidget.prototype.toString.call(this));let a=this.getVizDef();if(t.notNull(a)&&a.hasElements()){e.appendNewLine().append(" VizDef available")}else{e.appendNewLine().append(" No VizDef of chart available")}let r=this.getDatasets();if(t.XCollectionUtils.hasElements(r)){e.appendNewLine().append(r.toString())}return e.toString()};t.OcMeasureSync=function(){};t.OcMeasureSync.prototype=new t.DfNameObject;t.OcMeasureSync.prototype._ff_c="OcMeasureSync";t.OcMeasureSync.create=function(e){let a=new t.OcMeasureSync;a._setupInternal(e);return a};t.OcMeasureSync.prototype.m_color=null;t.OcMeasureSync.prototype.m_pattern=null;t.OcMeasureSync.prototype.getColor=function(){return this.m_color};t.OcMeasureSync.prototype.getPattern=function(){return this.m_pattern};t.OcMeasureSync.prototype.releaseObject=function(){this.m_color=null;this.m_pattern=null;t.DfNameObject.prototype.releaseObject.call(this)};t.OcMeasureSync.prototype.setColor=function(t){this.m_color=t};t.OcMeasureSync.prototype.setPattern=function(t){this.m_pattern=t};t.OcMeasureSync.prototype.toString=function(){let e=t.XStringBuffer.create();e.append("Measure Sync: ").append(this.getName());e.appendNewLine().append("Color = ").append(this.getColor()).append(", Pattern = ").append(this.getPattern());return e.toString()};t.OcThreshold=function(){};t.OcThreshold.prototype=new t.DfNameObject;t.OcThreshold.prototype._ff_c="OcThreshold";t.OcThreshold.create=function(e,a){let r=new t.OcThreshold;r.setupThreshold(e,a);return r};t.OcThreshold.prototype.m_exception=null;t.OcThreshold.prototype.getException=function(){return this.m_exception};t.OcThreshold.prototype.releaseObject=function(){this.m_exception=null;t.DfNameObject.prototype.releaseObject.call(this)};t.OcThreshold.prototype.setupThreshold=function(t,e){this._setupInternal(t);this.m_exception=e};t.OcThreshold.prototype.toString=function(){let e=t.XStringBuffer.create();e.append("Thresholds: ").append(this.getName());e.appendNewLine().append(t.PrUtils.serialize(this.getException(),true,true,4));return e.toString()};t.OcOrcaConstants=function(){};t.OcOrcaConstants.prototype=new t.XConstant;t.OcOrcaConstants.prototype._ff_c="OcOrcaConstants";t.OcOrcaConstants.CUBE="CUBE";t.OcOrcaConstants.CUBE_DATA_SOURCE="DataSource";t.OcOrcaConstants.CUBE_DATA_SOURCE_OBJECT_NAME="ObjectName";t.OcOrcaConstants.CUBE_DATA_SOURCE_PACKAGE_NAME="PackageName";t.OcOrcaConstants.CUBE_DATA_SOURCE_SCHEMA="SchemaName";t.OcOrcaConstants.CUBE_DATA_SOURCE_SYSTEM="System";t.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE="Type";t.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_PLANNING="planning";t.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_QUERY="query";t.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_VIEW="view";t.OcOrcaConstants.CUBE_DEPENDENT_OBJECT_FORMULA="formula";t.OcOrcaConstants.CUBE_DEPENDENT_OBJECT_FORMULA_JSON="jsonFormula";t.OcOrcaConstants.CUBE_DEPENDENT_OBJECT_MEASURE="measure";t.OcOrcaConstants.CUBE_FORMULAS="formulas";t.OcOrcaConstants.CUBE_FORMULAS_DATA="Data";t.OcOrcaConstants.CUBE_MEMBER_DEFINITION_FORMULA="formula";t.OcOrcaConstants.CUBE_MEMBER_DEFINITION_FORMULA_JSON="formulaJson";t.OcOrcaConstants.DRIVER_GROUP_INFO="driverGroupInfo";t.OcOrcaConstants.FILTER_ID="filterId";t.OcOrcaConstants.ID_ELEMENT="id";t.OcOrcaConstants.MEMBERS="members";t.OcOrcaConstants.MODIFIED_VIZ_DEF_BACKGROUND_COLOR="BackgroundColor";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_AGGREGATION="aggregation";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_AGGREGATION_DIMENSIONS="aggregationDimensions";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_CALCULATTION_TYPE="calculationType";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_END_DATE="endDate";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_END_DATE_IF_NULL="endDateCurrentIfNULL";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_EXCEPTION_AGGREGATION="exceptionAggregation";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_EXCEPTION_AGGREGATION_DIMENSIONS="exceptionAggregationDimensions";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_FORMATING_INFO="formatingInfo";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_FORMULA="formula";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_GROUP_THRESHOLDS="groupThresholds";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_ID="id";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_MEASURE_ID="measureId";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_NAME="name";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_REFERENCE_MEASURE_ID="referenceMeasureId";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_RESULT_GRANULARITY="resultGranularity";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_SELECTED_DIMENSION_ID="selectedDimensionId";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_SELECTIONS="selections";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_START_DATE="startDate";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_START_DATE_IF_NULL="startDateCurrentIfNULL";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_TIME_ZONE_OFFSET_FOR_CURRENT_DATE="timezoneOffsetForCurrentDate";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_TO_TEXT="isToText";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_TYPE="type";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VALUES_NOT_IN="valuesNotIn";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VALUE_TYPE="valueType";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VARIABLE_ID="id";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VARIABLE_NAME="name";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VARIABLE_SELECTION_INFOS="selectionInfos";t.OcOrcaConstants.MODIFIED_VIZ_DEF_COLOR="color";t.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_ENTITY_IDS="entityIds";t.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_ID="id";t.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_INFOS="selectionInfos";t.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_NAME="name";t.OcOrcaConstants.MODIFIED_VIZ_DEF_FORMULA_ALIASES="formulaAliases";t.OcOrcaConstants.MODIFIED_VIZ_DEF_HIERARCHY_DRILL_LEVEL="drillLevel";t.OcOrcaConstants.MODIFIED_VIZ_DEF_HIERARCHY_DRILL_MODE="drillMode";t.OcOrcaConstants.MODIFIED_VIZ_DEF_MEMBER_DEFINITIONS="memberDefinitions";t.OcOrcaConstants.MODIFIED_VIZ_DEF_PAGE_FILTER="pageFilter";t.OcOrcaConstants.MODIFIED_VIZ_DEF_PATTERN="pattern";t.OcOrcaConstants.MODIFIED_VIZ_DEF_SOURCE_DEF="def";t.OcOrcaConstants.MODIFIED_VIZ_DEF_STORY_FILTERS="storyFilters";t.OcOrcaConstants.PAGE_IS_HIDDEN="hidden";t.OcOrcaConstants.PAGE_IS_RESPONSIVE="RESPONSIVE";t.OcOrcaConstants.PAGE_LAYOUT_CANVAS="CANVAS";t.OcOrcaConstants.PAGE_TITLE="title";t.OcOrcaConstants.PATH_FROM_CUBE_TO_DEPENDENT_OBJECTS=null;t.OcOrcaConstants.PATH_FROM_DATASET_TO_MODEL_ID=null;t.OcOrcaConstants.PATH_FROM_DATASET_TO_VARIABLE=null;t.OcOrcaConstants.PATH_FROM_DEFINITION_TO_CHART_TYPE=null;t.OcOrcaConstants.PATH_FROM_FILTERS_TO_POSSIBLE_VALUES=null;t.OcOrcaConstants.PATH_FROM_GRID_DATA_DEFINITION_TO_DATASOURCE=null;t.OcOrcaConstants.PATH_FROM_GRID_ENTITIY_TO_DATA_DEFINITION=null;t.OcOrcaConstants.PATH_FROM_IMAGE_TO_IMAGE_DATA=null;t.OcOrcaConstants.PATH_FROM_IMAGE_TO_IMAGE_THUMBNAIL=null;t.OcOrcaConstants.PATH_FROM_MEASURE_SYNC_TO_MEASURE_NAME=null;t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_BACKGROUND_COLOR=null;t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_LANE_WIDGETS=null;t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_LAYOUT_TYPE=null;t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_SECTIONS=null;t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_WIDGETS=null;t.OcOrcaConstants.PATH_FROM_PAGE_TO_FILTERS=null;t.OcOrcaConstants.PATH_FROM_PAGE_TO_GROUPS=null;t.OcOrcaConstants.PATH_FROM_PAGE_TO_LANES_WIDGET_ID=null;t.OcOrcaConstants.PATH_FROM_PAGE_TO_LAYOUT_TYPE=null;t.OcOrcaConstants.PATH_FROM_PAGE_TO_PAGE_LAYOUT=null;t.OcOrcaConstants.PATH_FROM_PAGE_TO_SECTION_WIDGET_ID=null;t.OcOrcaConstants.PATH_FROM_PAGE_TO_WIDGET=null;t.OcOrcaConstants.PATH_FROM_SECTION_TO_WIDGET_ID=null;t.OcOrcaConstants.PATH_FROM_STORY_ENTITIY_TO_WIDGETS=null;t.OcOrcaConstants.PATH_FROM_STORY_TO_STORY_ENTITIES=null;t.OcOrcaConstants.PATH_FROM_STORY_TO_THRESHOLDS=null;t.OcOrcaConstants.PATH_FROM_WIDGET_TO_DATASETS=null;t.OcOrcaConstants.PATH_FROM_WIDGET_TO_DATA_REFERENCE_ID=null;t.OcOrcaConstants.PATH_FROM_WIDGET_TO_LAYOUT_DEFINITION=null;t.OcOrcaConstants.PATH_FROM_WIDGET_TO_SVG=null;t.OcOrcaConstants.PATH_FROM_WIDGET_TO_TEXT=null;t.OcOrcaConstants.PATH_FROM_WIDGET_TO_VIZ_DEF=null;t.OcOrcaConstants.STORY_CACLUALTION_RESTRICTED_MEASURE="restrictedMeasure";t.OcOrcaConstants.STORY_CALCULATION_AGGREGATION="aggregation";t.OcOrcaConstants.STORY_CALCULATION_AGGREGATION_DIMENSIONS="aggregationDimensions";t.OcOrcaConstants.STORY_CALCULATION_CALCULATION_TYPE="calculationType";t.OcOrcaConstants.STORY_CALCULATION_END_DATE="endDate";t.OcOrcaConstants.STORY_CALCULATION_END_DATE_IF_NULL="endDateCurrentIfNULL";t.OcOrcaConstants.STORY_CALCULATION_ENTITIES="entities";t.OcOrcaConstants.STORY_CALCULATION_EXCEPTION_AGGREGATION="exceptionAggregation";t.OcOrcaConstants.STORY_CALCULATION_EXCEPTION_AGGREGATION_DIMENSIONS="exceptionAggregationDimensions";t.OcOrcaConstants.STORY_CALCULATION_FORMAT="format";t.OcOrcaConstants.STORY_CALCULATION_FORMULA="formula";t.OcOrcaConstants.STORY_CALCULATION_GROUP_THRESHOLDS="groupThresholds";t.OcOrcaConstants.STORY_CALCULATION_MEASURE_ID="measureId";t.OcOrcaConstants.STORY_CALCULATION_NAME="name";t.OcOrcaConstants.STORY_CALCULATION_REFERENCE_MEASURE_ID="referenceMeasureId";t.OcOrcaConstants.STORY_CALCULATION_RESULT_GRANULARITY="resultGranularity";t.OcOrcaConstants.STORY_CALCULATION_SELECTED_DIMENSION_ID="selectedDimensionId";t.OcOrcaConstants.STORY_CALCULATION_SELECTIONS="selections";t.OcOrcaConstants.STORY_CALCULATION_START_DATE="startDate";t.OcOrcaConstants.STORY_CALCULATION_START_DATE_IF_NULL="startDateCurrentIfNULL";t.OcOrcaConstants.STORY_CALCULATION_SUBTYPE="subType";t.OcOrcaConstants.STORY_CALCULATION_TIME_ZONE_OFFSET_FOR_CURRENT_DATE="timezoneOffsetForCurrentDate";t.OcOrcaConstants.STORY_CALCULATION_TO_TEXT="isToText";t.OcOrcaConstants.STORY_CALCULATION_TYPE="type";t.OcOrcaConstants.STORY_CALCULATION_VALUES_NOT_IN="valuesNotIn";t.OcOrcaConstants.STORY_CALCULATION_VALUE_TYPE="valueType";t.OcOrcaConstants.STORY_CALCULATION_VARIABLE="calculation.variable";t.OcOrcaConstants.STORY_CALCULATION_VARIABLE_ENTITIES="entities";t.OcOrcaConstants.STORY_CALCULATION_VARIABLE_NAME="name";t.OcOrcaConstants.STORY_CALCULATION_VARIABLE_SELECTION_INFO="selectionInfo";t.OcOrcaConstants.STORY_CALCULATION_VARIABLE_TYPE="type";t.OcOrcaConstants.STORY_CALCULATION_VARIABLE_VALUE_TYPE="valueType";t.OcOrcaConstants.STORY_CHANGED_BY_DISPLAY_NAME="changedByDisplayName";t.OcOrcaConstants.STORY_COLOR_SYNC="colorSync";t.OcOrcaConstants.STORY_CREATED_BY="createdBy";t.OcOrcaConstants.STORY_CREATED_BY_DISPLAY_NAME="createdByDisplayName";t.OcOrcaConstants.STORY_CREATED_TIME="createdTime";t.OcOrcaConstants.STORY_DATA="data";t.OcOrcaConstants.STORY_DESCRIPTION="description";t.OcOrcaConstants.STORY_ENTITIES="entities";t.OcOrcaConstants.STORY_ENTITY="story";t.OcOrcaConstants.STORY_ENTITY_CALCULATED_DIMENSION="calculatedDimension";t.OcOrcaConstants.STORY_ENTITY_CALCULATION="calculation";t.OcOrcaConstants.STORY_ENTITY_CALCULATION_VARIABLE="calculationVariable";t.OcOrcaConstants.STORY_ENTITY_DATA="data";t.OcOrcaConstants.STORY_ENTITY_DATASET="dataset";t.OcOrcaConstants.STORY_ENTITY_FIELD_SELECTION="fieldSelection";t.OcOrcaConstants.STORY_ENTITY_GRID="analyticgrid.dynamictable";t.OcOrcaConstants.STORY_ENTITY_IMAGE="sap.lumira.story.entity.image";t.OcOrcaConstants.STORY_ENTITY_TYPE="type";t.OcOrcaConstants.STORY_FIELD_SELECTION_DIMENSION="dimension.selection";t.OcOrcaConstants.STORY_FIELD_SELECTION_ENTITIES="entities";t.OcOrcaConstants.STORY_FIELD_SELECTION_ENTITY_IDS="entityIds";t.OcOrcaConstants.STORY_FIELD_SELECTION_INFO="selectionInfo";t.OcOrcaConstants.STORY_FIELD_SELECTION_MEASURE="measure.selection";t.OcOrcaConstants.STORY_FIELD_SELECTION_NAME="name";t.OcOrcaConstants.STORY_FIELD_SELECTION_TYPE="type";t.OcOrcaConstants.STORY_FILTERS="storyFilters";t.OcOrcaConstants.STORY_IS_LIVE_INTEGRATION_TYPE="FPA_IS_LIVE_INTEGRATION";t.OcOrcaConstants.STORY_MEASURE_SYNC="measureSync";t.OcOrcaConstants.STORY_MEASURE_SYNC_COLOR="color";t.OcOrcaConstants.STORY_MEASURE_SYNC_PATTERN="pattern";t.OcOrcaConstants.STORY_METADATA="metadata";t.OcOrcaConstants.STORY_MODIFIED_BY="modifiedBy";t.OcOrcaConstants.STORY_MODIFIED_BY_DISPLAY_NAME="modifiedByDisplayName";t.OcOrcaConstants.STORY_MODIFIED_TIME="modifiedTime";t.OcOrcaConstants.STORY_NAME="name";t.OcOrcaConstants.STORY_OWNER_DISPLAY_NAME="ownerDisplayName";t.OcOrcaConstants.STORY_PAGES="pages";t.OcOrcaConstants.STORY_RESOURCE_ID="resourceId";t.OcOrcaConstants.STORY_RESOURCE_TYPE="resourceType";t.OcOrcaConstants.STORY_RESOURCE_TYPE_LINK="LINK";t.OcOrcaConstants.STORY_RESOURCE_TYPE_STORY="STORY";t.OcOrcaConstants.STORY_SOURCE_RESOURCE="sourceResource";t.OcOrcaConstants.STORY_SUB_NODES="subNodes";t.OcOrcaConstants.STORY_THRESHOLD_INTERVALS="intervals";t.OcOrcaConstants.STORY_UPDATE_COUNTER="updateCounter";t.OcOrcaConstants.VIZ_DEF_ACCOUNT_ENTITY_ID="accountEntityId";t.OcOrcaConstants.VIZ_DEF_ACCOUNT_ID="accountId";t.OcOrcaConstants.VIZ_DEF_BINDING="bindings";t.OcOrcaConstants.VIZ_DEF_CHART="chart";t.OcOrcaConstants.VIZ_DEF_COLOR_BINDING="colorBinding";t.OcOrcaConstants.VIZ_DEF_DIMENSION="dimension";t.OcOrcaConstants.VIZ_DEF_ENTITY_ID="entityId";t.OcOrcaConstants.VIZ_DEF_HIERARCHY_DRILL_LEVEL="hierarchyLevel";t.OcOrcaConstants.VIZ_DEF_HIERARCHY_DRILL_MODE="mode";t.OcOrcaConstants.VIZ_DEF_HIERARCHY_LEVEL_INFO="hierarchyLevelInfo";t.OcOrcaConstants.VIZ_DEF_HIGH="high";t.OcOrcaConstants.VIZ_DEF_HIGH_INCLUSIVE="highInclusive";t.OcOrcaConstants.VIZ_DEF_LOW="low";t.OcOrcaConstants.VIZ_DEF_LOW_INCLUSIVE="lowInclusive";t.OcOrcaConstants.VIZ_DEF_SOURCE="source";t.OcOrcaConstants.VIZ_DEF_SOURCE_ID="id";t.OcOrcaConstants.VIZ_DEF_SOURCE_PARENT_KEY="parentKey";t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE="type";t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_CALCULATION="calculation";t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_CALCULATION_VARIABLE="calculation.variable";t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_DIMENSION_SELECTION="dimension.selection";t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_HIERARCHY="hierarchy.pch";t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_MEMBER="member";t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_RESTRICTED_MEASURE="restrictedMeasure";t.OcOrcaConstants.VIZ_DEF_THRESHOLD="threshold";t.OcOrcaConstants.VIZ_DEF_THRESHOLD_NAME="name";t.OcOrcaConstants.WIDGET_BACKGROUND_COLOR="backgroundColor";t.OcOrcaConstants.WIDGET_BORDER="border";t.OcOrcaConstants.WIDGET_BORDER_COLOR="color";t.OcOrcaConstants.WIDGET_BORDER_FORMAT="format";t.OcOrcaConstants.WIDGET_BORDER_RADIUS="radius";t.OcOrcaConstants.WIDGET_BORDER_STYLE="style";t.OcOrcaConstants.WIDGET_BORDER_THICKNESS="thickness";t.OcOrcaConstants.WIDGET_CLASS="class";t.OcOrcaConstants.WIDGET_FIREFLY_QUERY="ffQuery";t.OcOrcaConstants.WIDGET_HEIGHT="height";t.OcOrcaConstants.WIDGET_ID="widgetId";t.OcOrcaConstants.WIDGET_POS_X="x";t.OcOrcaConstants.WIDGET_POS_Y="y";t.OcOrcaConstants.WIDGET_SECTION_DEFINITION="definition";t.OcOrcaConstants.WIDGET_TYPE_CALC_INPUT_CONTROL="CalcInputControlWidget";t.OcOrcaConstants.WIDGET_TYPE_CHART="InfochartVizWidget";t.OcOrcaConstants.WIDGET_TYPE_FIELD_SELECTION_INPUT_CONTROL="FieldSelectionInputControlWidget";t.OcOrcaConstants.WIDGET_TYPE_HEADER="HeaderWidget";t.OcOrcaConstants.WIDGET_TYPE_IMAGE="ImageWidget";t.OcOrcaConstants.WIDGET_TYPE_PAGE_FILTER="PageFilterWidget";t.OcOrcaConstants.WIDGET_TYPE_PICTOGRAM="PictogramWidget";t.OcOrcaConstants.WIDGET_TYPE_PICTOGRAM_SHAPE="PictogramShapeWidget";t.OcOrcaConstants.WIDGET_TYPE_PLANNING_SEQUENCE_TRIGGER="PlanningSequenceTriggerWidget";t.OcOrcaConstants.WIDGET_TYPE_TABLE="DynamicTableWidget";t.OcOrcaConstants.WIDGET_TYPE_TEXT="TextWidget";t.OcOrcaConstants.WIDGET_WIDTH="width";t.OcOrcaConstants.staticSetup=function(){t.OcOrcaConstants.PATH_FROM_STORY_TO_THRESHOLDS=t.OcJsonPath.create("thresholds.story");t.OcOrcaConstants.PATH_FROM_STORY_TO_STORY_ENTITIES=t.OcJsonPath.create("cdata.content.entities");t.OcOrcaConstants.PATH_FROM_STORY_ENTITIY_TO_WIDGETS=t.OcJsonPath.create("pages.content.widgets");t.OcOrcaConstants.PATH_FROM_GRID_ENTITIY_TO_DATA_DEFINITION=t.OcJsonPath.create("data.content.segments.dataRegion");t.OcOrcaConstants.PATH_FROM_GRID_DATA_DEFINITION_TO_DATASOURCE=t.OcJsonPath.create("dataSource.queryId");t.OcOrcaConstants.PATH_FROM_PAGE_TO_LAYOUT_TYPE=t.OcJsonPath.create("content.layouts.definition.page.definition.type");t.OcOrcaConstants.PATH_FROM_PAGE_TO_SECTION_WIDGET_ID=t.OcJsonPath.create("content.layouts.definition.page.sections.widgets.widgetId");t.OcOrcaConstants.PATH_FROM_PAGE_TO_LANES_WIDGET_ID=t.OcJsonPath.create("content.layouts.definition.page.rows.lanes.widgets.widgetId");t.OcOrcaConstants.PATH_FROM_PAGE_TO_FILTERS=t.OcJsonPath.create("content.filters");t.OcOrcaConstants.PATH_FROM_PAGE_TO_GROUPS=t.OcJsonPath.create("content.groups");t.OcOrcaConstants.PATH_FROM_PAGE_TO_PAGE_LAYOUT=t.OcJsonPath.create("content.layouts.definition.page");t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_BACKGROUND_COLOR=t.OcJsonPath.create("definition.backgroundColor");t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_LAYOUT_TYPE=t.OcJsonPath.create("definition.type");t.OcOrcaConstants.PATH_FROM_DATASET_TO_MODEL_ID=t.OcJsonPath.create("data.modelId");t.OcOrcaConstants.PATH_FROM_MEASURE_SYNC_TO_MEASURE_NAME=t.OcJsonPath.create("id.id");t.OcOrcaConstants.PATH_FROM_IMAGE_TO_IMAGE_DATA=t.OcJsonPath.create("data.src");t.OcOrcaConstants.PATH_FROM_IMAGE_TO_IMAGE_THUMBNAIL=t.OcJsonPath.create("data.thumbnail");t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_WIDGETS=t.OcJsonPath.create("sections.widgets");t.OcOrcaConstants.PATH_FROM_PAGE_TO_WIDGET=t.OcJsonPath.create("content.widgets");t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_SECTIONS=t.OcJsonPath.create("sections");t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_LANE_WIDGETS=t.OcJsonPath.create("rows.lanes.widgets");t.OcOrcaConstants.PATH_FROM_SECTION_TO_WIDGET_ID=t.OcJsonPath.create("widgets.widgetId");t.OcOrcaConstants.PATH_FROM_WIDGET_TO_TEXT=t.OcJsonPath.create("definition.text");t.OcOrcaConstants.PATH_FROM_WIDGET_TO_SVG=t.OcJsonPath.create("definition.svg");t.OcOrcaConstants.PATH_FROM_WIDGET_TO_DATA_REFERENCE_ID=t.OcJsonPath.create("definition.entityId");t.OcOrcaConstants.PATH_FROM_WIDGET_TO_VIZ_DEF=t.OcJsonPath.create("definition.vizContent.vizDefinition");t.OcOrcaConstants.PATH_FROM_WIDGET_TO_DATASETS=t.OcJsonPath.create("definition.datasets");t.OcOrcaConstants.PATH_FROM_WIDGET_TO_LAYOUT_DEFINITION=t.OcJsonPath.create("definition");t.OcOrcaConstants.PATH_FROM_CUBE_TO_DEPENDENT_OBJECTS=t.OcJsonPath.create("dependentObjects.data.measures");t.OcOrcaConstants.PATH_FROM_DATASET_TO_VARIABLE=t.OcJsonPath.create("promptValues.variables");t.OcOrcaConstants.PATH_FROM_DEFINITION_TO_CHART_TYPE=t.OcJsonPath.create("definition.vizContent.vizDefinition.chart.type")};t.OcStoryCatalogType=function(){};t.OcStoryCatalogType.prototype=new t.XConstant;t.OcStoryCatalogType.prototype._ff_c="OcStoryCatalogType";t.OcStoryCatalogType.FAVORITE=null;t.OcStoryCatalogType.PRIVATE=null;t.OcStoryCatalogType.SEARCH_LIST=null;t.OcStoryCatalogType.staticSetup=function(){t.OcStoryCatalogType.FAVORITE=t.XConstant.setupName(new t.OcStoryCatalogType,"Favorite");t.OcStoryCatalogType.PRIVATE=t.XConstant.setupName(new t.OcStoryCatalogType,"Private");t.OcStoryCatalogType.SEARCH_LIST=t.XConstant.setupName(new t.OcStoryCatalogType,"Search List")};t.OcStoryCatalogItem=function(){};t.OcStoryCatalogItem.prototype=new t.DfIdNameObject;t.OcStoryCatalogItem.prototype._ff_c="OcStoryCatalogItem";t.OcStoryCatalogItem.create=function(e,a){let r=new t.OcStoryCatalogItem;r.setupExt(e,a);return r};t.OcStoryCatalogItem.prototype.m_createTime=null;t.OcStoryCatalogItem.prototype.m_createdBy=null;t.OcStoryCatalogItem.prototype.m_createdByDisplayName=null;t.OcStoryCatalogItem.prototype.m_description=null;t.OcStoryCatalogItem.prototype.m_modifiedBy=null;t.OcStoryCatalogItem.prototype.m_modifiedByDisplayName=null;t.OcStoryCatalogItem.prototype.m_modifiedTime=null;t.OcStoryCatalogItem.prototype.m_updateCounter=0;t.OcStoryCatalogItem.prototype.getCreateTime=function(){return this.m_createTime};t.OcStoryCatalogItem.prototype.getCreatedBy=function(){return this.m_createdBy};t.OcStoryCatalogItem.prototype.getCreatedByDisplayName=function(){return this.m_createdByDisplayName};t.OcStoryCatalogItem.prototype.getDescription=function(){return this.m_description};t.OcStoryCatalogItem.prototype.getModifiedBy=function(){return this.m_modifiedBy};t.OcStoryCatalogItem.prototype.getModifiedByDisplayName=function(){return this.m_modifiedByDisplayName};t.OcStoryCatalogItem.prototype.getModifiedTime=function(){return this.m_modifiedTime};t.OcStoryCatalogItem.prototype.getUpdateCounter=function(){return this.m_updateCounter};t.OcStoryCatalogItem.prototype.releaseObject=function(){this.m_description=null;this.m_createTime=null;this.m_createdBy=null;this.m_createdByDisplayName=null;this.m_modifiedTime=null;this.m_modifiedBy=null;this.m_modifiedByDisplayName=null;this.m_updateCounter=0;t.DfIdNameObject.prototype.releaseObject.call(this)};t.OcStoryCatalogItem.prototype.setCreateTime=function(t){this.m_createTime=t};t.OcStoryCatalogItem.prototype.setCreatedBy=function(t){this.m_createdBy=t};t.OcStoryCatalogItem.prototype.setCreatedByDisplayName=function(t){this.m_createdByDisplayName=t};t.OcStoryCatalogItem.prototype.setDescription=function(t){this.m_description=t};t.OcStoryCatalogItem.prototype.setModifiedBy=function(t){this.m_modifiedBy=t};t.OcStoryCatalogItem.prototype.setModifiedByDisplayName=function(t){this.m_modifiedByDisplayName=t};t.OcStoryCatalogItem.prototype.setModifiedTime=function(t){this.m_modifiedTime=t};t.OcStoryCatalogItem.prototype.setUpdateCounter=function(t){this.m_updateCounter=t};t.OcStoryCatalogItem.prototype.toString=function(){let e=t.XStringBuffer.create();e.append(this.getId()).append(": ").append(this.getName());return e.toString()};t.OcOrcaCubeMetadata=function(){};t.OcOrcaCubeMetadata.prototype=new t.DfNameTextObject;t.OcOrcaCubeMetadata.prototype._ff_c="OcOrcaCubeMetadata";t.OcOrcaCubeMetadata.create=function(e){let a=new t.OcOrcaCubeMetadata;a.setupExt(e);return a};t.OcOrcaCubeMetadata.prototype.m_datasourceName=null;t.OcOrcaCubeMetadata.prototype.m_formulas=null;t.OcOrcaCubeMetadata.prototype.m_memberDefinitions=null;t.OcOrcaCubeMetadata.prototype.m_systemName=null;t.OcOrcaCubeMetadata.prototype.getDataSourceName=function(){return this.m_datasourceName};t.OcOrcaCubeMetadata.prototype.getFormulas=function(){return this.m_formulas};t.OcOrcaCubeMetadata.prototype.getMemberDefinitions=function(){return this.m_memberDefinitions};t.OcOrcaCubeMetadata.prototype.getSystemName=function(){return this.m_systemName};t.OcOrcaCubeMetadata.prototype.processMemberDefinitions=function(e){let a=t.OcJsonPathEvaluator.getSingleJsonPathElementAsList(e,t.OcOrcaConstants.PATH_FROM_CUBE_TO_DEPENDENT_OBJECTS);if(t.PrUtils.isListEmpty(a)){return null}let r=t.PrFactory.createStructure();for(let e=0;e<a.size();e++){let n=a.getStructureAt(e);let o=n.getStringByKey(t.OcOrcaConstants.CUBE_DEPENDENT_OBJECT_MEASURE);if(t.XStringUtils.isNullOrEmpty(o)){continue}let s=n.getStringByKey(t.OcOrcaConstants.CUBE_DEPENDENT_OBJECT_FORMULA);if(t.XStringUtils.isNotNullAndNotEmpty(s)){let e=n.getStringByKey(t.OcOrcaConstants.CUBE_DEPENDENT_OBJECT_FORMULA_JSON);let a=r.putNewStructure(o);a.putString(t.OcOrcaConstants.CUBE_MEMBER_DEFINITION_FORMULA,s);a.putString(t.OcOrcaConstants.CUBE_MEMBER_DEFINITION_FORMULA_JSON,e)}}return r};t.OcOrcaCubeMetadata.prototype.releaseObject=function(){this.m_datasourceName=null;this.m_systemName=null;this.m_memberDefinitions=t.XObjectExt.release(this.m_memberDefinitions);t.DfNameTextObject.prototype.releaseObject.call(this)};t.OcOrcaCubeMetadata.prototype.setupExt=function(e){this._setupInternal(e.getStringByKey(t.OcOrcaConstants.ID_ELEMENT));let a=e.getStructureByKey(t.OcOrcaConstants.CUBE_DATA_SOURCE);let r=a.getStringByKey(t.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE);r=t.XString.toLowerCase(r);if(t.XString.isEqual(r,t.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_VIEW)||t.XString.isEqual(r,t.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_PLANNING)||t.XString.isEqual(r,t.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_QUERY)){let e=a.getStringByKey(t.OcOrcaConstants.CUBE_DATA_SOURCE_OBJECT_NAME);let n=a.getStringByKey(t.OcOrcaConstants.CUBE_DATA_SOURCE_PACKAGE_NAME);let o=a.getStringByKey(t.OcOrcaConstants.CUBE_DATA_SOURCE_SCHEMA);let s=t.XStringUtils.concatenate4(n,"][",e,"]");s=t.XStringUtils.concatenate5(r,":[",o,"][",s);this.m_datasourceName=s}this.m_systemName=a.getStringByKey(t.OcOrcaConstants.CUBE_DATA_SOURCE_SYSTEM);let n=e.getStructureByKey(t.OcOrcaConstants.CUBE_FORMULAS);if(t.notNull(n)){this.m_formulas=n.getByKey(t.OcOrcaConstants.CUBE_FORMULAS_DATA)}this.m_memberDefinitions=this.processMemberDefinitions(e)};t.OcOrcaAnalyticalCardWidget=function(){};t.OcOrcaAnalyticalCardWidget.prototype=new t.OcOrcaWidgetWithDpAndVizDef;t.OcOrcaAnalyticalCardWidget.prototype._ff_c="OcOrcaAnalyticalCardWidget";t.OcOrcaAnalyticalCardWidget.create=function(e,a,r){let n=new t.OcOrcaAnalyticalCardWidget;n.setupOrcaBaseWidget(e,t.OcWidgetType.ANALYTICAL_CARD,a,r);return n};t.OcOrcaAnalyticalCardWidget.prototype.getMissingVitDefWarning=function(){return t.OcMessage.newKpiWithoutVizDef(t.Severity.WARNING,this)};t.OcOrcaAnalyticalCardWidget.prototype.processCanvasLayout=function(){let e=t.OcOrcaWidgetWithDpAndVizDef.prototype.processCanvasLayout.call(this);e.setHeight(200);return e};t.OcOrcaAnalyticalCardWidget.prototype.toString=function(){return t.XStringUtils.concatenate2("KPI:",t.OcOrcaWidgetWithDpAndVizDef.prototype.toString.call(this))};t.OcOrcaChartWidget=function(){};t.OcOrcaChartWidget.prototype=new t.OcOrcaWidgetWithDpAndVizDef;t.OcOrcaChartWidget.prototype._ff_c="OcOrcaChartWidget";t.OcOrcaChartWidget.create=function(e,a,r){let n=new t.OcOrcaChartWidget;n.setupOrcaBaseWidget(e,t.OcWidgetType.CHART,a,r);return n};t.OcOrcaChartWidget.prototype.getMissingVitDefWarning=function(){return t.OcMessage.newChartWithoutVizDef(t.Severity.WARNING,this)};t.OcOrcaChartWidget.prototype.getQuasarName=function(e){if(t.notNull(e)&&e.getChartType()!==null){return e.getChartType().getQuasarName()}return t.OcOrcaWidgetWithDpAndVizDef.prototype.getQuasarName.call(this,e)};t.OcOrcaChartWidget.prototype.toString=function(){return t.XStringUtils.concatenate2("CHART:",t.OcOrcaWidgetWithDpAndVizDef.prototype.toString.call(this))};t.OcOrcaKpiWidget=function(){};t.OcOrcaKpiWidget.prototype=new t.OcOrcaWidgetWithDpAndVizDef;t.OcOrcaKpiWidget.prototype._ff_c="OcOrcaKpiWidget";t.OcOrcaKpiWidget.create=function(e,a,r){let n=new t.OcOrcaKpiWidget;n.setupOrcaBaseWidget(e,t.OcWidgetType.KPI,a,r);return n};t.OcOrcaKpiWidget.prototype.getMissingVitDefWarning=function(){return t.OcMessage.newKpiWithoutVizDef(t.Severity.WARNING,this)};t.OcOrcaKpiWidget.prototype.processCanvasLayout=function(){let e=t.OcOrcaWidgetWithDpAndVizDef.prototype.processCanvasLayout.call(this);e.setHeight(200);return e};t.OcOrcaKpiWidget.prototype.toString=function(){return t.XStringUtils.concatenate2("KPI:",t.OcOrcaWidgetWithDpAndVizDef.prototype.toString.call(this))};t.OcQuasarConstants=function(){};t.OcQuasarConstants.prototype=new t.XConstant;t.OcQuasarConstants.prototype._ff_c="OcQuasarConstants";t.OcQuasarConstants.MEMBERS="members";t.OcQuasarConstants.QUASAR_CHART_BINDING_TYPE="C";t.OcQuasarConstants.QUASAR_CHART_BODY_BINDING_TYPE="Chart";t.OcQuasarConstants.QUASAR_CONTENT="Content";t.OcQuasarConstants.QUASAR_CONTENT_BACKGROUND_COLOR="BackgroundColor";t.OcQuasarConstants.QUASAR_CONTENT_BACKGROUND_IMAGE_SRC="BackgroundImageSrc";t.OcQuasarConstants.QUASAR_CONTENT_ITEMS="Items";t.OcQuasarConstants.QUASAR_CONTENT_TYPE="CType";t.OcQuasarConstants.QUASAR_DATA_PROVIDERS="DataProviders";t.OcQuasarConstants.QUASAR_DATA_PROVIDER_CUBE_NAME="CubeName";t.OcQuasarConstants.QUASAR_DATA_PROVIDER_DATA_SOURCE="DataSource";t.OcQuasarConstants.QUASAR_DATA_PROVIDER_FF_QUERY="ffQuery";t.OcQuasarConstants.QUASAR_DATA_PROVIDER_MODEL_ID="ModelId";t.OcQuasarConstants.QUASAR_DATA_PROVIDER_NAME="Name";t.OcQuasarConstants.QUASAR_DATA_PROVIDER_SYSTEM="System";t.OcQuasarConstants.QUASAR_DATA_PROVIDER_VIZ_DEF="VizDef";t.OcQuasarConstants.QUASAR_ENTITY_ID="EntityId";t.OcQuasarConstants.QUASAR_GLOBAL_DEF="GlobalDef";t.OcQuasarConstants.QUASAR_GLOBAL_DEF_COLOR_SYNC="colorSync";t.OcQuasarConstants.QUASAR_GLOBAL_DEF_THRESHOLDS="thresholds";t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS="GlobalObjects";t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_CALCULATIONS="Calculations";t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_CALCULATION_VARIABLES="CalculationVariables";t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_FIELD_SELECTIONS="FieldSelections";t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_PAGE_FILTERS="PageFilters";t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_STORY_FILTERS="StoryFilters";t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_THRESHOLDS="Thresholds";t.OcQuasarConstants.QUASAR_ITEM_BINDING="Binding";t.OcQuasarConstants.QUASAR_ITEM_BINDINGS="Bindings";t.OcQuasarConstants.QUASAR_ITEM_BINDING_SOURCE="Source";t.OcQuasarConstants.QUASAR_ITEM_BINDING_TYPE="Type";t.OcQuasarConstants.QUASAR_ITEM_IMAGE_SRC="Src";t.OcQuasarConstants.QUASAR_ITEM_NAME="Name";t.OcQuasarConstants.QUASAR_ITEM_PAGE_FILTER="PageFilter";t.OcQuasarConstants.QUASAR_ITEM_PICTOGRAM_SVG="svg";t.OcQuasarConstants.QUASAR_ITEM_TEXT="Text";t.OcQuasarConstants.QUASAR_ITEM_TEXT_UNSUPPORTED_WIDGET="Unsupported Widget";t.OcQuasarConstants.QUASAR_ITEM_TYPE="CType";t.OcQuasarConstants.QUASAR_KPI_BINDING_TYPE="Kpi";t.OcQuasarConstants.QUASAR_LAYOUT_BACKGROUND_COLOR="BackgroundColor";t.OcQuasarConstants.QUASAR_LAYOUT_BORDER_COLOR="BorderColor";t.OcQuasarConstants.QUASAR_LAYOUT_BORDER_CORNER_RADIUS="CornerRadius";t.OcQuasarConstants.QUASAR_LAYOUT_BORDER_FORMAT="BorderFormat";t.OcQuasarConstants.QUASAR_LAYOUT_BORDER_SIZE="BorderSize";t.OcQuasarConstants.QUASAR_LAYOUT_BORDER_STYLE="BorderStyle";t.OcQuasarConstants.QUASAR_LAYOUT_HEIGHT="Height";t.OcQuasarConstants.QUASAR_LAYOUT_PERCENT="%";t.OcQuasarConstants.QUASAR_LAYOUT_PX="px";t.OcQuasarConstants.QUASAR_LAYOUT_WIDTH="Width";t.OcQuasarConstants.QUASAR_LAYOUT_X="X";t.OcQuasarConstants.QUASAR_LAYOUT_Y="Y";t.OcQuasarConstants.QUASAR_VARIABLES="Variables";t.OcQuasarConstants.QUASAR_VIZ_DEF_THRESHOLD="threshold";t.OcQuasarConstants.QUASAR_WIDGET_ID="widgetId";t.OcQuasarConstants.STORY_PAGE_ID="pageId";t.OcQuasarConstants.VIZ_DEF_PATH_TO_THRESHOLDS=null;t.OcQuasarConstants.staticSetup=function(){t.OcQuasarConstants.VIZ_DEF_PATH_TO_THRESHOLDS=t.OcJsonPath.create("userPreferences.threshold")};t.OcCacheableQuasarStory=function(){};t.OcCacheableQuasarStory.prototype=new t.DfNameTextObject;t.OcCacheableQuasarStory.prototype._ff_c="OcCacheableQuasarStory";t.OcCacheableQuasarStory.create=function(e,a){let r=new t.OcCacheableQuasarStory;r.setupWithNameText(e,a);return r};t.OcCacheableQuasarStory.prototype.m_chartType=null;t.OcCacheableQuasarStory.prototype.m_createTime=null;t.OcCacheableQuasarStory.prototype.m_createdBy=null;t.OcCacheableQuasarStory.prototype.m_description=null;t.OcCacheableQuasarStory.prototype.m_mainLayoutType=null;t.OcCacheableQuasarStory.prototype.m_mediaUrl=null;t.OcCacheableQuasarStory.prototype.m_modifiedBy=null;t.OcCacheableQuasarStory.prototype.m_modifiedTime=null;t.OcCacheableQuasarStory.prototype.m_pages=null;t.OcCacheableQuasarStory.prototype.m_updateCounter=0;t.OcCacheableQuasarStory.prototype.getChartType=function(){return this.m_chartType};t.OcCacheableQuasarStory.prototype.getCreateTime=function(){return this.m_createTime};t.OcCacheableQuasarStory.prototype.getCreatedBy=function(){return this.m_createdBy};t.OcCacheableQuasarStory.prototype.getDescription=function(){return this.m_description};t.OcCacheableQuasarStory.prototype.getMainLayoutType=function(){return this.m_mainLayoutType};t.OcCacheableQuasarStory.prototype.getMediaUrl=function(){return this.m_mediaUrl};t.OcCacheableQuasarStory.prototype.getModifiedBy=function(){return this.m_modifiedBy};t.OcCacheableQuasarStory.prototype.getModifiedTime=function(){return this.m_modifiedTime};t.OcCacheableQuasarStory.prototype.getPages=function(){return this.m_pages};t.OcCacheableQuasarStory.prototype.getUpdateCounter=function(){return this.m_updateCounter};t.OcCacheableQuasarStory.prototype.releaseObject=function(){this.m_description=null;this.m_createTime=null;this.m_createdBy=null;this.m_modifiedTime=null;this.m_modifiedBy=null;this.m_mainLayoutType=null;this.m_chartType=null;this.m_mediaUrl=null;this.m_pages=null;t.DfNameTextObject.prototype.releaseObject.call(this)};t.OcCacheableQuasarStory.prototype.setChartType=function(t){this.m_chartType=t};t.OcCacheableQuasarStory.prototype.setCreateTime=function(t){this.m_createTime=t};t.OcCacheableQuasarStory.prototype.setCreatedBy=function(t){this.m_createdBy=t};t.OcCacheableQuasarStory.prototype.setDescription=function(t){this.m_description=t};t.OcCacheableQuasarStory.prototype.setMainLayoutType=function(t){this.m_mainLayoutType=t};t.OcCacheableQuasarStory.prototype.setMediaUrl=function(t){this.m_mediaUrl=t};t.OcCacheableQuasarStory.prototype.setModifiedBy=function(t){this.m_modifiedBy=t};t.OcCacheableQuasarStory.prototype.setModifiedTime=function(t){this.m_modifiedTime=t};t.OcCacheableQuasarStory.prototype.setPages=function(t){this.m_pages=t};t.OcCacheableQuasarStory.prototype.setUpdateCounter=function(t){this.m_updateCounter=t};t.OcQuasarStory=function(){};t.OcQuasarStory.prototype=new t.DfIdNameObject;t.OcQuasarStory.prototype._ff_c="OcQuasarStory";t.OcQuasarStory.create=function(e){let a=new t.OcQuasarStory;a.setupStory(e);return a};t.OcQuasarStory.getSortedKeys=function(e){let a=t.XList.create();a.addAll(e);a.sortByDirection(t.XSortDirection.ASCENDING);return a};t.OcQuasarStory.prototype.m_chartType=null;t.OcQuasarStory.prototype.m_mainLayoutType=null;t.OcQuasarStory.prototype.m_story=null;t.OcQuasarStory.prototype.applyGlobalObjects=function(e,a){let r;let n=e.putNewStructure(t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS);let o=n.putNewList(t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_PAGE_FILTERS);o.addAll(a);let s=n.putNewList(t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_STORY_FILTERS);let i=this.m_story.getStoryFilters();for(r=0;r<i.size();r++){s.add(i.getStructureAt(r))}let c=n.putNewList(t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_CALCULATIONS);let l;let O=this.m_story.getCalculations().getCalculations();l=t.OcQuasarStory.getSortedKeys(O.getKeysAsReadOnlyList());for(r=0;r<l.size();r++){let e=c.addNewStructure();let a=O.getByKey(l.get(r));e.putString(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_ID,a.getId());e.putStringNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_NAME,a.getName());e.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_FORMATING_INFO,a.getFormatting());e.putStringNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_TYPE,a.getCalculationType());e.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_MEASURE_ID,a.getMeasureId());e.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_REFERENCE_MEASURE_ID,a.getReferenceMeasureId());e.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_SELECTIONS,a.getSelections());e.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_FORMULA,a.getFormula());e.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_START_DATE,a.getStartDate());e.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_END_DATE,a.getEndDate());e.putBoolean(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_START_DATE_IF_NULL,a.isStartDateCurrentIfNull());e.putBoolean(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_END_DATE_IF_NULL,a.isEndDateCurrentIfNull());e.putBoolean(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VALUES_NOT_IN,a.isValuesNotIn());e.putStringNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_AGGREGATION,a.getAggregation());e.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_AGGREGATION_DIMENSIONS,a.getAggregationDimensions());e.putStringNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_EXCEPTION_AGGREGATION,a.getExceptionAggregation());e.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_EXCEPTION_AGGREGATION_DIMENSIONS,a.getExceptionAggregationDimensions());e.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_GROUP_THRESHOLDS,a.getGroupThresholds());e.putStringNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_RESULT_GRANULARITY,a.getResultGranularity());e.putInteger(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_TIME_ZONE_OFFSET_FOR_CURRENT_DATE,a.getTimezoneOffsetForCurrentDate());e.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_SELECTED_DIMENSION_ID,a.getSelectedDimensionId());e.putStringNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VALUE_TYPE,a.getValueType());e.putBoolean(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_TO_TEXT,a.isToText())}let u=n.putNewList(t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_CALCULATION_VARIABLES);let g=this.m_story.getCalculationVariables().getCalculationVariables();l=t.OcQuasarStory.getSortedKeys(g.getKeysAsReadOnlyList());for(r=0;r<l.size();r++){let e=g.getByKey(l.get(r));let a=u.addNewStructure();a.putString(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VARIABLE_ID,e.getId());a.putStringNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_NAME,e.getName());a.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VARIABLE_SELECTION_INFOS,e.getSelectionInfos())}let p=n.putNewList(t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_FIELD_SELECTIONS);let y=this.m_story.getFieldSelections().getFieldSelections();l=t.OcQuasarStory.getSortedKeys(y.getKeysAsReadOnlyList());for(r=0;r<l.size();r++){let e=y.getByKey(l.get(r));let a=p.addNewStructure();a.putString(t.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_ID,e.getId());a.putStringNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_NAME,e.getName());a.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_INFOS,e.getSelectionInfos());a.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_ENTITY_IDS,e.getEntityIds())}};t.OcQuasarStory.prototype.createQuasarOptions=function(){let e=t.OcQuasarOptions.create(this.getContext());if(t.notNull(this.m_mainLayoutType)){e.setMainLayoutType(this.m_mainLayoutType)}if(t.notNull(this.m_chartType)){e.setChartType(this.m_chartType)}return e};t.OcQuasarStory.prototype.getCacheableQuasarStory=function(){try{return this.processCacheableQuasarStory()}catch(e){this.getContext().getMessageManager().addMessage(t.OcMessage.newUnexpectedError(e));return null}};t.OcQuasarStory.prototype.getContext=function(){return this.m_story.getContext()};t.OcQuasarStory.prototype.getCreateTime=function(){return this.m_story.getCreateTime()};t.OcQuasarStory.prototype.getCreatedBy=function(){return this.m_story.getCreatedBy()};t.OcQuasarStory.prototype.getDescription=function(){return this.m_story.getDescription()};t.OcQuasarStory.prototype.getMessages=function(){return this.getContext().getMessageManager()};t.OcQuasarStory.prototype.getModifiedBy=function(){return this.m_story.getModifiedBy()};t.OcQuasarStory.prototype.getModifiedTime=function(){return this.m_story.getModifiedTime()};t.OcQuasarStory.prototype.getPublicUrl=function(){return this.m_story.getPublicUrl()};t.OcQuasarStory.prototype.getQuasarAnalyticalCardDocument=function(){return this.processQuasarAnalyticalCard()};t.OcQuasarStory.prototype.getQuasarChartType=function(){return this.m_chartType};t.OcQuasarStory.prototype.getQuasarCompositeAnalyticalCardDocument=function(){return this.processQuasarCompositeAnalyticalCard()};t.OcQuasarStory.prototype.getQuasarMainLayoutType=function(){return this.m_mainLayoutType};t.OcQuasarStory.prototype.getQuasarPageDocuments=function(){try{return t.OcQuasarStoryConverter.convertStory(this.m_story,this.createQuasarOptions())}catch(e){this.getContext().getMessageManager().addMessage(t.OcMessage.newUnexpectedError(e));return t.XList.create()}};t.OcQuasarStory.prototype.getQuasarPages=function(){try{return this.processQuasarPages()}catch(e){this.getContext().getMessageManager().addMessage(t.OcMessage.newUnexpectedError(e));return t.XList.create()}};t.OcQuasarStory.prototype.getQuasarTabStoryDocument=function(){try{return this.processQuasarStory()}catch(e){this.getContext().getMessageManager().addMessage(t.OcMessage.newUnexpectedError(e));return null}};t.OcQuasarStory.prototype.getQuasarWidgetDocument=function(e){try{return this.processQuasarWidgetDocument(e)}catch(e){this.getContext().getMessageManager().addMessage(t.OcMessage.newUnexpectedError(e));return t.PrFactory.createStructure()}};t.OcQuasarStory.prototype.getWidgetIds=function(){try{return this.m_story.getPageManager().getAllWidgetIds()}catch(e){this.getContext().getMessageManager().addMessage(t.OcMessage.newUnexpectedError(e));return t.XList.create()}};t.OcQuasarStory.prototype.getWidgetIdsByWidgetType=function(e){try{return this.m_story.getPageManager().getAllWidgetIdsByWidgetType(e)}catch(e){this.getContext().getMessageManager().addMessage(t.OcMessage.newUnexpectedError(e));return t.XList.create()}};t.OcQuasarStory.prototype.mapPageFilters=function(e,a){let r=t.JsonParserFactory.createFromSafeString(a.getPageFilters().toString()).asList();let n=a.getPageGroups();for(let o=0;o<r.size();o++){let s=r.getStructureAt(o);let i=t.PrFactory.createStructure();let c=s.getKeysAsReadOnlyList();for(let t=0;t<c.size();t++){let e=c.get(t);i.put(e,s.getByKey(e))}i.putString(t.OcQuasarConstants.STORY_PAGE_ID,a.getId());for(let e=0;e<n.size();e++){let a=n.getStructureAt(e);let r=a.getListByKey(t.OcOrcaConstants.DRIVER_GROUP_INFO);if(t.notNull(r)){for(let e=0;e<r.size();e++){let n=r.getStructureAt(e).getStringByKey(t.OcOrcaConstants.FILTER_ID);if(t.notNull(n)&&t.XString.isEqual(n,i.getStringByKey(t.OcOrcaConstants.FILTER_ID))){let e=a.getListByKey(t.OcOrcaConstants.MEMBERS);if(t.notNull(e)){let a=i.putNewList(t.OcQuasarConstants.MEMBERS);a.addAll(e)}}}}}e.add(i)}};t.OcQuasarStory.prototype.processCacheableQuasarStory=function(){let e=this.m_story;let a=t.OcCacheableQuasarStory.create(e.getId(),e.getNormalizedName());a.setCreatedBy(e.getCreatedBy());a.setDescription(e.getDescription());a.setCreateTime(e.getCreateTime());a.setModifiedTime(e.getModifiedTime());a.setModifiedBy(e.getModifiedBy());a.setUpdateCounter(e.getUpdateCounter());a.setMainLayoutType(this.m_mainLayoutType);a.setChartType(this.m_chartType);a.setMediaUrl(e.getImages().getImageUrl());a.setPages(this.processQuasarPages());return a};t.OcQuasarStory.prototype.processQuasarAnalyticalCard=function(){let e=t.PrFactory.createList();let a=t.PrFactory.createStructure();let r=a.putNewStructure(t.OcQuasarConstants.QUASAR_CONTENT);r.putString(t.OcQuasarConstants.QUASAR_CONTENT_TYPE,"FlexLayout");let n=r.putNewList(t.OcQuasarConstants.QUASAR_CONTENT_ITEMS);let o=a.putNewList(t.OcQuasarConstants.QUASAR_DATA_PROVIDERS);let s=this.createQuasarOptions();let i=this.m_story.getPageManager().getPages();let c=0;for(;c<i.size();c++){let a=i.get(c);let r=t.OcQuasarPageContentConverter.convertPageToAnalyticalCard(a,o,s);if(t.XCollectionUtils.hasElements(r)){r.putString(t.OcQuasarConstants.QUASAR_ITEM_NAME,a.getId());r.putString(t.OcQuasarConstants.QUASAR_ITEM_TEXT,a.getName());n.add(r);this.mapPageFilters(e,a);break}}this.applyGlobalObjects(a,e);return a};t.OcQuasarStory.prototype.processQuasarCompositeAnalyticalCard=function(){let e=t.PrFactory.createList();let a=t.PrFactory.createStructure();let r=a.putNewStructure(t.OcQuasarConstants.QUASAR_CONTENT);r.putString(t.OcQuasarConstants.QUASAR_CONTENT_TYPE,"FlexLayout");let n=r.putNewList(t.OcQuasarConstants.QUASAR_CONTENT_ITEMS);let o=a.putNewList(t.OcQuasarConstants.QUASAR_DATA_PROVIDERS);let s=this.createQuasarOptions();let i=this.m_story.getPageManager().getPages();let c=0;for(;c<i.size();c++){let a=i.get(c);let r=t.OcQuasarPageContentConverter.convertPageToCompositeAnalyticalCard(n,this,a,o,s);if(t.XCollectionUtils.hasElements(r)){r.putString(t.OcQuasarConstants.QUASAR_ITEM_NAME,a.getId());r.putString(t.OcQuasarConstants.QUASAR_ITEM_TEXT,a.getName());this.mapPageFilters(e,a);break}}this.applyGlobalObjects(a,e);return a};t.OcQuasarStory.prototype.processQuasarPages=function(){let e;let a=t.PrFactory.createList();let r=t.XList.create();let n=this.createQuasarOptions();let o=this.m_story.getPageManager().getPages();for(e=0;e<o.size();e++){this.mapPageFilters(a,o.get(e))}for(e=0;e<o.size();e++){let s=o.get(e);let i=s.getId();let c=s.getName();let l=t.OcQuasarStoryConverter.convertPage(s,n);this.applyGlobalObjects(l,a);let O=t.OcQuasarStoryPage.create(i,c,l);r.add(O)}return r};t.OcQuasarStory.prototype.processQuasarStory=function(){let e=t.PrFactory.createList();let a=t.PrFactory.createStructure();let r=a.putNewStructure(t.OcQuasarConstants.QUASAR_CONTENT);r.putString(t.OcQuasarConstants.QUASAR_CONTENT_BACKGROUND_COLOR,"transparent");r.putString(t.OcQuasarConstants.QUASAR_LAYOUT_HEIGHT,"100%");r.putString(t.OcQuasarConstants.QUASAR_LAYOUT_WIDTH,"100%");r.putString(t.OcQuasarConstants.QUASAR_CONTENT_TYPE,"TabStrip");let n=r.putNewList(t.OcQuasarConstants.QUASAR_CONTENT_ITEMS);let o=a.putNewList(t.OcQuasarConstants.QUASAR_DATA_PROVIDERS);let s=this.createQuasarOptions();let i=this.m_story.getPageManager().getPages();for(let a=0;a<i.size();a++){let r=i.get(a);let c=n.addNewStructure();c.putString(t.OcQuasarConstants.QUASAR_CONTENT_TYPE,"TabStripItem");c.putString(t.OcQuasarConstants.QUASAR_ITEM_NAME,r.getId());c.putString(t.OcQuasarConstants.QUASAR_ITEM_TEXT,r.getName());t.OcQuasarPageConverter.convertPage(r,s,c.putNewStructure(t.OcQuasarConstants.QUASAR_CONTENT),o);this.mapPageFilters(e,r)}this.applyGlobalObjects(a,e);return a};t.OcQuasarStory.prototype.processQuasarWidgetDocument=function(e){let a=this.m_story.getPageManager().getWidgetByWidgetId(e);if(t.isNull(a)){return null}let r=this.createQuasarOptions();r.setUseSingleWidgetLayout(true);return t.OcQuasarStoryConverter.convertWidget(a,r)};t.OcQuasarStory.prototype.releaseObject=function(){this.m_story=t.XObjectExt.release(this.m_story);t.DfIdNameObject.prototype.releaseObject.call(this)};t.OcQuasarStory.prototype.setQuasarChartType=function(t){this.m_chartType=t};t.OcQuasarStory.prototype.setQuasarMainLayoutType=function(t){this.m_mainLayoutType=t};t.OcQuasarStory.prototype.setupStory=function(e){this.setupExt(e.getId(),e.getName());this.m_story=e;this.m_mainLayoutType=t.OcLayoutType.CANVAS;this.m_chartType=t.OcChartType.HIGHCHARTS};t.OcQuasarStoryPage=function(){};t.OcQuasarStoryPage.prototype=new t.DfIdNameObject;t.OcQuasarStoryPage.prototype._ff_c="OcQuasarStoryPage";t.OcQuasarStoryPage.create=function(e,a,r){let n=new t.OcQuasarStoryPage;n.setupPageInfo(e,a,r);return n};t.OcQuasarStoryPage.prototype.m_pageContent=null;t.OcQuasarStoryPage.prototype.getPageContent=function(){return this.m_pageContent};t.OcQuasarStoryPage.prototype.releaseObject=function(){this.m_pageContent=t.XObjectExt.release(this.m_pageContent);t.DfIdNameObject.prototype.releaseObject.call(this)};t.OcQuasarStoryPage.prototype.setupPageInfo=function(e,a,r){t.DfIdNameObject.prototype.setupExt.call(this,e,a);this.m_pageContent=r};t.OcChartType=function(){};t.OcChartType.prototype=new t.XConstant;t.OcChartType.prototype._ff_c="OcChartType";t.OcChartType.HIGHCHARTS=null;t.OcChartType.MICRO_CHART=null;t.OcChartType.s_lookup=null;t.OcChartType.createChartType=function(e,a){let r=new t.OcChartType;r._setupInternal(e);r.m_quasarName=a;t.OcChartType.s_lookup.put(e,r);t.OcChartType.s_lookup.put(t.XString.toLowerCase(e),r);t.OcChartType.s_lookup.put(t.XString.toUpperCase(e),r);return r};t.OcChartType.lookup=function(e){return t.OcChartType.s_lookup.getByKey(e)};t.OcChartType.staticSetup=function(){t.OcChartType.s_lookup=t.XHashMapByString.create();t.OcChartType.HIGHCHARTS=t.OcChartType.createChartType("Highcharts","Chart");t.OcChartType.MICRO_CHART=t.OcChartType.createChartType("MicroChart","MicroChart")};t.OcChartType.prototype.m_quasarName=null;t.OcChartType.prototype.getQuasarName=function(){return this.m_quasarName};t.OcLayoutType=function(){};t.OcLayoutType.prototype=new t.XConstant;t.OcLayoutType.prototype._ff_c="OcLayoutType";t.OcLayoutType.CANVAS=null;t.OcLayoutType.FLOW=null;t.OcLayoutType.FLOW_SIMPLE=null;t.OcLayoutType.s_typesByCode=null;t.OcLayoutType.s_typesByName=null;t.OcLayoutType.create=function(e,a){let r=new t.OcLayoutType;r._setupInternal(e);t.OcLayoutType.s_typesByName.put(e,r);r.m_code=a;t.OcLayoutType.s_typesByCode.put(t.XInteger.convertToString(a),r);return r};t.OcLayoutType.getByCode=function(e){return t.OcLayoutType.s_typesByCode.getByKey(t.XInteger.convertToString(e))};t.OcLayoutType.getByName=function(e){return t.OcLayoutType.s_typesByName.getByKey(e)};t.OcLayoutType.staticSetup=function(){t.OcLayoutType.s_typesByName=t.XHashMapByString.create();t.OcLayoutType.s_typesByCode=t.XHashMapByString.create();t.OcLayoutType.CANVAS=t.OcLayoutType.create("CanvasLayout",1);t.OcLayoutType.FLOW=t.OcLayoutType.create("FlowLayout",2);t.OcLayoutType.FLOW_SIMPLE=t.OcLayoutType.create("FlowSimpleLayout",3)};t.OcLayoutType.prototype.m_code=0;t.OcLayoutType.prototype.getCode=function(){return this.m_code};t.OcCalculation=function(){};t.OcCalculation.prototype=new t.DfIdNameObject;t.OcCalculation.prototype._ff_c="OcCalculation";t.OcCalculation.create=function(e,a,r){let n=new t.OcCalculation;n.setupCalculation(e,a,r);return n};t.OcCalculation.prototype.m_aggregation=null;t.OcCalculation.prototype.m_aggregationDimensions=null;t.OcCalculation.prototype.m_calculationType=null;t.OcCalculation.prototype.m_endDate=null;t.OcCalculation.prototype.m_endDateCurrentIfNull=false;t.OcCalculation.prototype.m_exceptionAggregation=null;t.OcCalculation.prototype.m_exceptionAggregationDimensions=null;t.OcCalculation.prototype.m_formatting=null;t.OcCalculation.prototype.m_formula=null;t.OcCalculation.prototype.m_groupThresholds=null;t.OcCalculation.prototype.m_measureId=null;t.OcCalculation.prototype.m_referenceMeasureId=null;t.OcCalculation.prototype.m_resultGranularity=null;t.OcCalculation.prototype.m_selectedDimensionId=null;t.OcCalculation.prototype.m_selections=null;t.OcCalculation.prototype.m_startDate=null;t.OcCalculation.prototype.m_startDateCurrentIfNull=false;t.OcCalculation.prototype.m_timezoneOffsetForCurrentDate=0;t.OcCalculation.prototype.m_toText=false;t.OcCalculation.prototype.m_valueType=null;t.OcCalculation.prototype.m_valuesNotIn=false;t.OcCalculation.prototype.getAggregation=function(){return this.m_aggregation};t.OcCalculation.prototype.getAggregationDimensions=function(){return this.m_aggregationDimensions};t.OcCalculation.prototype.getCalculationType=function(){return this.m_calculationType};t.OcCalculation.prototype.getEndDate=function(){return this.m_endDate};t.OcCalculation.prototype.getExceptionAggregation=function(){return this.m_exceptionAggregation};t.OcCalculation.prototype.getExceptionAggregationDimensions=function(){return this.m_exceptionAggregationDimensions};t.OcCalculation.prototype.getFormatting=function(){return this.m_formatting};t.OcCalculation.prototype.getFormula=function(){return this.m_formula};t.OcCalculation.prototype.getGroupThresholds=function(){return this.m_groupThresholds};t.OcCalculation.prototype.getMeasureId=function(){return this.m_measureId};t.OcCalculation.prototype.getReferenceMeasureId=function(){return this.m_referenceMeasureId};t.OcCalculation.prototype.getResultGranularity=function(){return this.m_resultGranularity};t.OcCalculation.prototype.getSelectedDimensionId=function(){return this.m_selectedDimensionId};t.OcCalculation.prototype.getSelections=function(){return this.m_selections};t.OcCalculation.prototype.getStartDate=function(){return this.m_startDate};t.OcCalculation.prototype.getTimezoneOffsetForCurrentDate=function(){return this.m_timezoneOffsetForCurrentDate};t.OcCalculation.prototype.getValueType=function(){return this.m_valueType};t.OcCalculation.prototype.isEndDateCurrentIfNull=function(){return this.m_endDateCurrentIfNull};t.OcCalculation.prototype.isStartDateCurrentIfNull=function(){return this.m_startDateCurrentIfNull};t.OcCalculation.prototype.isToText=function(){return this.m_toText};t.OcCalculation.prototype.isValuesNotIn=function(){return this.m_valuesNotIn};t.OcCalculation.prototype.releaseObject=function(){this.m_calculationType=null;this.m_formatting=null;this.m_measureId=null;this.m_selections=null;this.m_formula=null;t.DfIdNameObject.prototype.releaseObject.call(this)};t.OcCalculation.prototype.setAggregation=function(t){this.m_aggregation=t};t.OcCalculation.prototype.setAggregationDimensions=function(t){this.m_aggregationDimensions=t};t.OcCalculation.prototype.setEndDate=function(t){this.m_endDate=t};t.OcCalculation.prototype.setEndDateCurrentIfNull=function(t){this.m_endDateCurrentIfNull=t};t.OcCalculation.prototype.setExceptionAggregation=function(t){this.m_exceptionAggregation=t};t.OcCalculation.prototype.setExceptionAggregationDimensions=function(t){this.m_exceptionAggregationDimensions=t};t.OcCalculation.prototype.setFormatting=function(t){this.m_formatting=t};t.OcCalculation.prototype.setFormula=function(t){this.m_formula=t};t.OcCalculation.prototype.setGroupThresholds=function(t){this.m_groupThresholds=t};t.OcCalculation.prototype.setMeasureId=function(t){this.m_measureId=t};t.OcCalculation.prototype.setReferenceMeasureId=function(t){this.m_referenceMeasureId=t};t.OcCalculation.prototype.setResultGranularity=function(t){this.m_resultGranularity=t};t.OcCalculation.prototype.setSelectedDimensionId=function(t){this.m_selectedDimensionId=t};t.OcCalculation.prototype.setSelections=function(t){this.m_selections=t};t.OcCalculation.prototype.setStartDate=function(t){this.m_startDate=t};t.OcCalculation.prototype.setStartDateCurrentIfNull=function(t){this.m_startDateCurrentIfNull=t};t.OcCalculation.prototype.setTimezoneOffsetForCurrentDate=function(t){this.m_timezoneOffsetForCurrentDate=t};t.OcCalculation.prototype.setToText=function(t){this.m_toText=t};t.OcCalculation.prototype.setValueType=function(t){this.m_valueType=t};t.OcCalculation.prototype.setValuesNotIn=function(t){this.m_valuesNotIn=t};t.OcCalculation.prototype.setupCalculation=function(e,a,r){t.DfIdNameObject.prototype.setupExt.call(this,e,a);this.m_calculationType=r};t.OcCalculation.prototype.toString=function(){let e=t.XStringBuffer.create();e.append("Calculation: ").append(this.getId());e.appendNewLine().append(" Name = ").append(this.getName());e.appendNewLine().append(" Type = ").append(this.getCalculationType());return e.toString()};t.OcCalculationVariable=function(){};t.OcCalculationVariable.prototype=new t.DfIdNameObject;t.OcCalculationVariable.prototype._ff_c="OcCalculationVariable";t.OcCalculationVariable.create=function(e,a,r,n){let o=new t.OcCalculationVariable;o.setupCalculationVariable(e,a,r,n);return o};t.OcCalculationVariable.prototype.m_calculationVariableType=null;t.OcCalculationVariable.prototype.m_calculationVariableValueType=null;t.OcCalculationVariable.prototype.m_selectionInfos=null;t.OcCalculationVariable.prototype.getCalculationVariableType=function(){return this.m_calculationVariableType};t.OcCalculationVariable.prototype.getCalculationVariableValueType=function(){return this.m_calculationVariableValueType};t.OcCalculationVariable.prototype.getSelectionInfos=function(){return this.m_selectionInfos};t.OcCalculationVariable.prototype.releaseObject=function(){this.m_selectionInfos=null;t.DfIdNameObject.prototype.releaseObject.call(this)};t.OcCalculationVariable.prototype.setSelectionInfos=function(t){this.m_selectionInfos=t};t.OcCalculationVariable.prototype.setupCalculationVariable=function(e,a,r,n){t.DfIdNameObject.prototype.setupExt.call(this,e,a);this.m_calculationVariableType=r;this.m_calculationVariableValueType=n};t.OcFieldSelection=function(){};t.OcFieldSelection.prototype=new t.DfIdNameObject;t.OcFieldSelection.prototype._ff_c="OcFieldSelection";t.OcFieldSelection.create=function(e,a,r){let n=new t.OcFieldSelection;n.setupFieldSelection(e,a,r);return n};t.OcFieldSelection.prototype.m_entityIds=null;t.OcFieldSelection.prototype.m_fieldSelectionType=null;t.OcFieldSelection.prototype.m_selectionInfos=null;t.OcFieldSelection.prototype.getEntityIds=function(){return this.m_entityIds};t.OcFieldSelection.prototype.getFieldSelectionType=function(){return this.m_fieldSelectionType};t.OcFieldSelection.prototype.getSelectionInfos=function(){return this.m_selectionInfos};t.OcFieldSelection.prototype.releaseObject=function(){this.m_entityIds=null;this.m_selectionInfos=null;t.DfIdNameObject.prototype.releaseObject.call(this)};t.OcFieldSelection.prototype.setEntityIds=function(t){this.m_entityIds=t};t.OcFieldSelection.prototype.setSelectionInfos=function(t){this.m_selectionInfos=t};t.OcFieldSelection.prototype.setupFieldSelection=function(e,a,r){t.DfIdNameObject.prototype.setupExt.call(this,e,a);this.m_fieldSelectionType=r};t.OcPage=function(){};t.OcPage.prototype=new t.DfIdNameObject;t.OcPage.prototype._ff_c="OcPage";t.OcPage.prototype.m_backgroundColor=null;t.OcPage.prototype.m_isResponsive=null;t.OcPage.prototype.m_normalizedName=null;t.OcPage.prototype.m_pageFilters=null;t.OcPage.prototype.m_pageGroups=null;t.OcPage.prototype.m_story=null;t.OcPage.prototype.m_widgetManager=null;t.OcPage.prototype.getBackgroundColor=function(){if(t.isNull(this.m_backgroundColor)){this.m_backgroundColor=t.OcStoryUtils.getValueOrEmptyString(this.processBackgroundColor())}return this.m_backgroundColor};t.OcPage.prototype.getContext=function(){return this.getStory().getContext()};t.OcPage.prototype.getNormalizedName=function(){if(t.isNull(this.m_normalizedName)){this.m_normalizedName=t.OcStoryUtils.normalizeString(this.getName())}return this.m_normalizedName};t.OcPage.prototype.getPageFilters=function(){if(t.isNull(this.m_pageFilters)){this.m_pageFilters=this.processPageFilters();if(t.isNull(this.m_pageFilters)){this.m_pageFilters=t.PrFactory.createList()}}return this.m_pageFilters};t.OcPage.prototype.getPageGroups=function(){if(t.isNull(this.m_pageGroups)){this.m_pageGroups=this.processPageGroups();if(t.isNull(this.m_pageGroups)){this.m_pageGroups=t.PrFactory.createList()}}return this.m_pageGroups};t.OcPage.prototype.getStory=function(){return this.m_story};t.OcPage.prototype.getWidgetManager=function(){if(t.isNull(this.m_widgetManager)){this.m_widgetManager=t.OcWidgetManager.create(this,this.getContext())}return this.m_widgetManager};t.OcPage.prototype.isResponsive=function(){if(t.isNull(this.m_isResponsive)){this.m_isResponsive=t.TriStateBool.lookup(this.processIsResponsive())}return this.m_isResponsive.getBoolean()};t.OcPage.prototype.releaseObject=function(){this.m_normalizedName=null;this.m_backgroundColor=null;this.m_story=null;this.m_isResponsive=t.XObjectExt.release(this.m_isResponsive);this.m_widgetManager=t.XObjectExt.release(this.m_widgetManager);t.DfIdNameObject.prototype.releaseObject.call(this)};t.OcPage.prototype.setupPage=function(e,a,r){t.DfIdNameObject.prototype.setupExt.call(this,e,a);this.m_story=r};t.OcWidgetType=function(){};t.OcWidgetType.prototype=new t.XConstant;t.OcWidgetType.prototype._ff_c="OcWidgetType";t.OcWidgetType.ANALYTICAL_CARD=null;t.OcWidgetType.CALCULATION_INPUT_CONTROL=null;t.OcWidgetType.CHART=null;t.OcWidgetType.FIELD_SELECTION_INPUT_CONTROL=null;t.OcWidgetType.GRID=null;t.OcWidgetType.IMAGE=null;t.OcWidgetType.KPI=null;t.OcWidgetType.PAGE_FILTER=null;t.OcWidgetType.PICTOGRAM=null;t.OcWidgetType.TEXT=null;t.OcWidgetType.UNKNOWN=null;t.OcWidgetType.createWidgetType=function(e,a,r){let n=new t.OcWidgetType;n._setupInternal(e);n.m_quasarName=a;n.m_hasDataProvider=r;return n};t.OcWidgetType.staticSetup=function(){t.OcWidgetType.CHART=t.OcWidgetType.createWidgetType("Chart","Chart",true);t.OcWidgetType.ANALYTICAL_CARD=t.OcWidgetType.createWidgetType("AnalyticalCard","AnalyticalCard",true);t.OcWidgetType.KPI=t.OcWidgetType.createWidgetType("Card","Card",true);t.OcWidgetType.GRID=t.OcWidgetType.createWidgetType("Grid","VizGrid",true);t.OcWidgetType.TEXT=t.OcWidgetType.createWidgetType("Text","Html",false);t.OcWidgetType.PICTOGRAM=t.OcWidgetType.createWidgetType("Pictogram","Pictogram",false);t.OcWidgetType.PAGE_FILTER=t.OcWidgetType.createWidgetType("PageFilter","PageFilter",false);t.OcWidgetType.FIELD_SELECTION_INPUT_CONTROL=t.OcWidgetType.createWidgetType("FieldSelectionInputControl","FieldSelectionInputControl",false);t.OcWidgetType.CALCULATION_INPUT_CONTROL=t.OcWidgetType.createWidgetType("CalculationInputControl","CalculationInputControl",false);t.OcWidgetType.IMAGE=t.OcWidgetType.createWidgetType("Image","Image",false);t.OcWidgetType.UNKNOWN=t.OcWidgetType.createWidgetType("Unknown","Text",false)};t.OcWidgetType.prototype.m_hasDataProvider=false;t.OcWidgetType.prototype.m_quasarName=null;t.OcWidgetType.prototype.getQuasarName=function(){return this.m_quasarName};t.OcWidgetType.prototype.hasDataProvider=function(){return this.m_hasDataProvider};t.OcStory=function(){};t.OcStory.prototype=new t.DfIdNameObject;t.OcStory.prototype._ff_c="OcStory";t.OcStory.prototype.m_calculationVariables=null;t.OcStory.prototype.m_calculations=null;t.OcStory.prototype.m_colorSync=null;t.OcStory.prototype.m_context=null;t.OcStory.prototype.m_createdBy=null;t.OcStory.prototype.m_createdTime=null;t.OcStory.prototype.m_datasets=null;t.OcStory.prototype.m_description=null;t.OcStory.prototype.m_fieldSelections=null;t.OcStory.prototype.m_images=null;t.OcStory.prototype.m_measureSyncs=null;t.OcStory.prototype.m_modifiedBy=null;t.OcStory.prototype.m_modifiedTime=null;t.OcStory.prototype.m_normalizedName=null;t.OcStory.prototype.m_pageManager=null;t.OcStory.prototype.m_storyFilters=null;t.OcStory.prototype.m_thresholds=null;t.OcStory.prototype.m_updateCounter=null;t.OcStory.prototype.getCalculationVariables=function(){if(t.isNull(this.m_calculationVariables)){this.m_calculationVariables=this.getStoryEntityFactory().createCalculationVariables()}return this.m_calculationVariables};t.OcStory.prototype.getCalculations=function(){if(t.isNull(this.m_calculations)){this.m_calculations=this.getStoryEntityFactory().createCalculations()}return this.m_calculations};t.OcStory.prototype.getColorSyncs=function(){if(t.isNull(this.m_colorSync)){this.m_colorSync=this.processColorSyncs();if(t.isNull(this.m_colorSync)){this.m_colorSync=t.PrFactory.createStructure()}}return this.m_colorSync};t.OcStory.prototype.getContext=function(){return this.m_context};t.OcStory.prototype.getCreateTime=function(){if(t.isNull(this.m_createdTime)){this.m_createdTime=t.OcStoryUtils.getValueOrEmptyString(this.processCreateTime())}return this.m_createdTime};t.OcStory.prototype.getCreatedBy=function(){if(t.isNull(this.m_createdBy)){this.m_createdBy=t.OcStoryUtils.getValueOrEmptyString(this.processCreatedBy())}return this.m_createdBy};t.OcStory.prototype.getDatasets=function(){if(t.isNull(this.m_datasets)){this.m_datasets=this.getStoryEntityFactory().createDatasets()}return this.m_datasets};t.OcStory.prototype.getDescription=function(){if(t.isNull(this.m_description)){this.m_description=t.OcStoryUtils.getValueOrEmptyString(this.processDescription())}return this.m_description};t.OcStory.prototype.getFieldSelections=function(){if(t.isNull(this.m_fieldSelections)){this.m_fieldSelections=this.getStoryEntityFactory().createFieldSelections()}return this.m_fieldSelections};t.OcStory.prototype.getImages=function(){if(t.isNull(this.m_images)){this.m_images=this.getStoryEntityFactory().createImages(this.getId())}return this.m_images};t.OcStory.prototype.getMeasureSyncs=function(){if(t.isNull(this.m_measureSyncs)){this.m_measureSyncs=this.getStoryEntityFactory().createMeasurySyncs()}return this.m_measureSyncs};t.OcStory.prototype.getModifiedBy=function(){if(t.isNull(this.m_modifiedBy)){this.m_modifiedBy=t.OcStoryUtils.getValueOrEmptyString(this.processModifiedBy())}return this.m_modifiedBy};t.OcStory.prototype.getModifiedTime=function(){if(t.isNull(this.m_modifiedTime)){this.m_modifiedTime=t.OcStoryUtils.getValueOrEmptyString(this.processModifiedTime())}return this.m_modifiedTime};t.OcStory.prototype.getNormalizedName=function(){if(t.isNull(this.m_normalizedName)){this.m_normalizedName=t.OcStoryUtils.normalizeString(this.getName())}return this.m_normalizedName};t.OcStory.prototype.getPageManager=function(){if(t.isNull(this.m_pageManager)){this.m_pageManager=t.OcPageManager.create(this,this.getContext())}return this.m_pageManager};t.OcStory.prototype.getPublicUrl=function(){let e=this.getContext().getConnection().getOrcaPublicUrl();if(t.isNull(e)){e=this.getContext().getConnection().getSystemUri()}return t.XStringUtils.concatenate3(e,"/sap/fpa/ui/app.html#;view_id=story;storyId=",this.getId())};t.OcStory.prototype.getStoryEntityFactory=function(){return this.getContext().getStoryEntityFactory()};t.OcStory.prototype.getStoryFilters=function(){if(t.isNull(this.m_storyFilters)){this.m_storyFilters=this.processStoryFilters();if(t.isNull(this.m_storyFilters)){this.m_storyFilters=t.PrFactory.createList()}}return this.m_storyFilters};t.OcStory.prototype.getThresholds=function(){if(t.isNull(this.m_thresholds)){this.m_thresholds=this.getStoryEntityFactory().createThresholds()}return this.m_thresholds};t.OcStory.prototype.getUpdateCounter=function(){if(t.isNull(this.m_updateCounter)){this.m_updateCounter=t.XIntegerValue.create(this.processUpdateCounter())}return this.m_updateCounter.getInteger()};t.OcStory.prototype.releaseObject=function(){this.m_normalizedName=null;this.m_description=null;this.m_createdBy=null;this.m_createdTime=null;this.m_modifiedTime=null;this.m_modifiedBy=null;this.m_colorSync=null;this.m_datasets=t.XObjectExt.release(this.m_datasets);this.m_measureSyncs=t.XObjectExt.release(this.m_measureSyncs);this.m_calculations=t.XObjectExt.release(this.m_calculations);this.m_fieldSelections=t.XObjectExt.release(this.m_fieldSelections);this.m_thresholds=t.XObjectExt.release(this.m_thresholds);this.m_images=t.XObjectExt.release(this.m_images);this.m_pageManager=t.XObjectExt.release(this.m_pageManager);t.DfIdNameObject.prototype.releaseObject.call(this)};t.OcStory.prototype.setupStory=function(e,a,r){this.setupExt(e,a);this.m_context=r;if(t.XStringUtils.isNullOrEmpty(e)||t.XStringUtils.isNullOrEmpty(a)){let e=t.OcMessage.newInvalidStoryNameError();this.getContext().getMessageManager().addMessage(e);throw t.XException.createIllegalArgumentException(e.getText())}};t.OcStory.prototype.toString=function(){let e=t.XStringBuffer.create();e.append("Story: ").append(this.getId()).append(' "').append(this.getName()).append('"');e.appendNewLine().append(this.getPageManager().toString());return e.toString()};t.OcStoryCatalogLoadAction=function(){};t.OcStoryCatalogLoadAction.prototype=new t.SyncAction;t.OcStoryCatalogLoadAction.prototype._ff_c="OcStoryCatalogLoadAction";t.OcStoryCatalogLoadAction.create=function(e,a){let r=new t.OcStoryCatalogLoadAction;r.setupLoadAction(e,a);return r};t.OcStoryCatalogLoadAction.prototype.m_options=null;t.OcStoryCatalogLoadAction.prototype.callListener=function(t,e,a,r){e.onStoryCatalogLoaded(t,a,r)};t.OcStoryCatalogLoadAction.prototype.getOptions=function(){return this.m_options};t.OcStoryCatalogLoadAction.prototype.getOrcaUserName=function(){return t.XString.toUpperCase(this.getActionContext().getConnection().getPersonalization().getInternalUser())};t.OcStoryCatalogLoadAction.prototype.getPath=function(){return"/sap/fpa/services/rest/epm/contentlib"};t.OcStoryCatalogLoadAction.prototype.getQuery=function(){let e=this.getOptions().getCatalogType();if(e===t.OcStoryCatalogType.FAVORITE){return this.getQueryForFavoriteStories()}else if(e===t.OcStoryCatalogType.PRIVATE){return this.getQueryForPrivateStories()}else{return this.getQueryForAllStories()}};t.OcStoryCatalogLoadAction.prototype.getQueryForAllStories=function(){let e=t.PrFactory.createStructure();e.putString("action","getSearchList");let a=e.putNewStructure("data");a.putString("type","STORY");a.putString("value","*");a.putNewList("ownerType");a.putInteger("recentlyAccessed",this.getOptions().getNumberOfRecentlyAccessedStories());return e};t.OcStoryCatalogLoadAction.prototype.getQueryForFavoriteStories=function(){let e=t.PrFactory.createStructure();e.putString("action","getAncestorAndSubNodes");let a=e.putNewStructure("data");a.putString("resourceId",t.XStringUtils.concatenate2("FAVORITES_",this.getOrcaUserName()));a.putBoolean("detail",false);a.putNewList("filter");a.putBoolean("bIncTemporary",true);a.putBoolean("allowAuthOverride",false);return e};t.OcStoryCatalogLoadAction.prototype.getQueryForPrivateStories=function(){let e=t.PrFactory.createStructure();e.putString("action","getRepoView");let a=e.putNewStructure("data");a.putString("resourceId",t.XStringUtils.concatenate2("PRIVATE_",this.getOrcaUserName()));a.putBoolean("detail",false);a.putNewList("filter");a.putBoolean("bIncTemporary",true);a.putBoolean("allowAuthOverride",false);a.putBoolean("fetchAncestorNodes",true);a.putBoolean("showContentSharedWithUser",true);return e};t.OcStoryCatalogLoadAction.prototype.onFunctionExecuted=function(e,a,r){this.addAllMessages(e);if(e.isValid()){this.setData((new t.OcStoryCatalogParser).getStoryCatalog(a.getRootElementGeneric()))}this.endSync()};t.OcStoryCatalogLoadAction.prototype.processSynchronization=function(e){let a=this.getActionContext().getConnection();let r=a.newRpcFunction(this.getPath());let n=r.getRpcRequest();n.setRequestStructure(this.getQuery());n.setMethod(t.HttpRequestMethod.HTTP_POST);r.processFunctionExecution(e,this,null);return true};t.OcStoryCatalogLoadAction.prototype.releaseObjectInternal=function(){t.XObjectExt.release(this.m_options)};t.OcStoryCatalogLoadAction.prototype.setOptions=function(t){this.m_options=t};t.OcStoryCatalogLoadAction.prototype.setupLoadAction=function(e,a){if(t.isNull(e)){this.setOptions(new t.OcStoryCatalogLoadOptions)}else{this.setOptions(e)}this.setupAction(null,null,null,a)};t.OcStoryLoadAction=function(){};t.OcStoryLoadAction.prototype=new t.SyncAction;t.OcStoryLoadAction.prototype._ff_c="OcStoryLoadAction";t.OcStoryLoadAction.createAndRun=function(e,a,r,n,o){let s=new t.OcStoryLoadAction;s.m_storyId=o;s.setupActionAndRun(e,a,r,n);return s};t.OcStoryLoadAction.prototype.m_story=null;t.OcStoryLoadAction.prototype.m_storyId=null;t.OcStoryLoadAction.prototype.callListener=function(t,e,a,r){e.onStoryLoaded(t,a,r)};t.OcStoryLoadAction.prototype.getQuery=function(){let e=t.PrFactory.createStructure();e.putString("action","getContent");let a=e.putNewStructure("data");a.putString("resourceId",this.m_storyId);a.putBoolean("bIncDependency",false);return e};t.OcStoryLoadAction.prototype.onBearerTokenLoaded=function(t,e,a){this.setData(this.m_story);this.endSync()};t.OcStoryLoadAction.prototype.onCubeMetadataLoaded=function(e,a,r){let n=this.m_story.getDatasets();n.updateDatasetsWithCubesMetdata(a);let o=n.getDatasetsAsReadOnlyList();let s=null;let i=false;for(let e=0;e<o.size();e++){let a=o.get(e);if(t.isNull(s)){s=a.getSystemName();i=this.requestToken(s)}else if(!t.XString.isEqual(s,a.getSystemName())){s=a.getSystemName();i=this.requestToken(s)}}if(!i){this.setData(this.m_story);this.endSync()}};t.OcStoryLoadAction.prototype.onFunctionExecuted=function(e,a,r){this.addAllMessages(e);if(e.isValid()){let e=a.getRootElement();if(t.isNull(e)){this.addError(0,"No story returned");this.endSync()}else{let a=t.OcConnection.createByConnection(this.getActionContext().getServiceConfig().getConnectionContainer());this.m_story=t.OcOrcaStory.create(t.OcOrcaContext.create(e,this.getSession(),a));this.getActionContext().processCubeMetadataLoad(this.getActiveSyncType(),this,null,this.m_story.getDatasets().getCubeNames())}}else{this.endSync()}};t.OcStoryLoadAction.prototype.processSynchronization=function(e){let a=t.XUri.createFromUrl("/sap/fpa/services/rest/epm/contentlib");let r=this.getActionContext().getConnection();let n=r.newRpcFunctionByUri(a);let o=n.getRpcRequest();o.setRequestStructure(this.getQuery());n.processFunctionExecution(e,this,null);return true};t.OcStoryLoadAction.prototype.releaseObjectInternal=function(){this.m_storyId=null;this.m_story=t.XObjectExt.release(this.m_story)};t.OcStoryLoadAction.prototype.requestToken=function(e){let a=this.getActionContext().getServiceConfig().getConnectionContainer().getConnectionPool().getConnection(e);let r=a.getSystemDescription();let n=r.getProperties();let o=n.getStringByKey(t.OcOrcaConstants.STORY_IS_LIVE_INTEGRATION_TYPE);if(t.notNull(o)){let a=r.getAuthenticationToken();if(t.isNull(a)){this.getActionContext().processBearerTokenLoad(this.getActiveSyncType(),this,null,e);return true}}return false};t.OcCubeMetadataLoadAction=function(){};t.OcCubeMetadataLoadAction.prototype=new t.SyncAction;t.OcCubeMetadataLoadAction.prototype._ff_c="OcCubeMetadataLoadAction";t.OcCubeMetadataLoadAction.createAndRun=function(e,a,r,n,o){let s=new t.OcCubeMetadataLoadAction;s.m_cubeNames=o;s.setupActionAndRun(e,a,r,n);return s};t.OcCubeMetadataLoadAction.prototype.m_cubeNames=null;t.OcCubeMetadataLoadAction.prototype.callListener=function(t,e,a,r){e.onCubeMetadataLoaded(t,a,r)};t.OcCubeMetadataLoadAction.prototype.createCubesMetadata=function(e){let a=t.XSetOfNameObject.create();let r=e.getRootElementGeneric().asList();for(let e=0;e<r.size();e++){let n=r.getStructureAt(e);let o=n.getStructureByKey("data");if(t.notNull(o)){let e=t.OcOrcaCubeMetadata.create(o);a.add(e)}}this.setData(a)};t.OcCubeMetadataLoadAction.prototype.getQuery=function(){let e=t.PrFactory.createStructure();e.putString("action","readObjects");let a=e.putNewStructure("data");let r=a.putNewList("p1");let n=this.m_cubeNames;for(let t=0;t<n.size();t++){let e=r.addNewStructure();e.putString("objectId",n.get(t));e.putBoolean("incDependency",false);e.putBoolean("incSubItems",false);let a=e.putNewStructure("extOpt");a.putBoolean("detail",true);a.putBoolean("visualization",true);a.putBoolean("rate",true);a.putBoolean("listFormula",true);a.putBoolean("listVersion",true);a.putBoolean("addMetadata",true);a.putBoolean("inclSubObjectTypes",true)}return e};t.OcCubeMetadataLoadAction.prototype.onFunctionExecuted=function(t,e,a){this.addAllMessages(t);if(t.isValid()){this.createCubesMetadata(e)}this.endSync()};t.OcCubeMetadataLoadAction.prototype.processSynchronization=function(e){let a=t.XUri.createFromUrl("/sap/fpa/services/rest/epm/objectmgr");let r=this.getActionContext().getConnection();let n=r.newRpcFunctionByUri(a);let o=n.getRpcRequest();o.setRequestStructure(this.getQuery());n.processFunctionExecution(e,this,null);return true};t.OcCubeMetadataLoadAction.prototype.releaseObjectInternal=function(){this.m_cubeNames=null};t.OcBearerTokenLoadAction=function(){};t.OcBearerTokenLoadAction.prototype=new t.SyncAction;t.OcBearerTokenLoadAction.prototype._ff_c="OcBearerTokenLoadAction";t.OcBearerTokenLoadAction.createAndRun=function(e,a,r,n,o){let s=new t.OcBearerTokenLoadAction;s.m_systemName=o;s.setupActionAndRun(e,a,r,n);return s};t.OcBearerTokenLoadAction.prototype.m_systemName=null;t.OcBearerTokenLoadAction.prototype.callListener=function(t,e,a,r){e.onBearerTokenLoaded(t,a,r)};t.OcBearerTokenLoadAction.prototype.getQuery=function(){let e=t.PrFactory.createStructure();e.putStringNotNullAndNotEmpty("connectionName",this.m_systemName);return e};t.OcBearerTokenLoadAction.prototype.onFunctionExecuted=function(e,a,r){this.addAllMessages(e);if(e.isValid()){let e=a.getRootElement();if(t.isNull(e)){this.addError(0,t.XStringUtils.concatenate2("System not found ",this.m_systemName))}else{let a=e.getStringByKey("access_token");let r=e.getStringByKey("token_type");if(t.notNull(a)&&t.XString.isEqual(r,"Bearer")){let e=this.getActionContext().getServiceConfig().getConnectionContainer().getConnectionPool().getConnection(this.m_systemName);let r=e.getSystemDescription();r.setAuthenticationType(t.AuthenticationType.BEARER);r.setAuthenticationToken(t.XAuthenticationToken.create(a));this.setData(t.XStringValue.create(a))}}}this.endSync()};t.OcBearerTokenLoadAction.prototype.processSynchronization=function(e){let a=t.XUri.createFromUrl("/sap/fpa/services/rest/fpa/liveIntegrationConnectionManager?action=getToken");let r=this.getActionContext().getConnection();let n=r.newRpcFunctionByUri(a);let o=n.getRpcRequest();o.setRequestStructure(this.getQuery());n.processFunctionExecution(e,this,null);return true};t.OcBearerTokenLoadAction.prototype.releaseObjectInternal=function(){};t.OcSystemsLoadAction=function(){};t.OcSystemsLoadAction.prototype=new t.SyncAction;t.OcSystemsLoadAction.prototype._ff_c="OcSystemsLoadAction";t.OcSystemsLoadAction.createAndRun=function(e,a,r,n,o){let s=new t.OcSystemsLoadAction;s.m_loadingContext=o;s.setupActionAndRun(e,a,r,n);return s};t.OcSystemsLoadAction.getPath=function(){return"/sap/fpa/services/connection/Systems.xsjs"};t.OcSystemsLoadAction.prototype.m_loadingContext=null;t.OcSystemsLoadAction.prototype.callListener=function(t,e,a,r){e.onSystemsLoaded(t,a,r)};t.OcSystemsLoadAction.prototype.getCurrentSystemQueryPath=function(){let e=this.getActionContext().getConnection().getSystemDescription();let a=e.getProperties().getByKey(t.ConnectionParameters.ORIGIN);let r=e.getSystemName();if(t.notNull(a)&&!t.XString.isEqual(a,r)){e=this.getActionContext().getApplication().getSystemLandscape().getSystemDescription(a)}let n=t.XStringBuffer.create();n.append("{");n.append('"NAME":"').append(e.getName()).append('",');n.append('"SYSTEM_TYPE":"').append(e.getSystemType().getName()).append('",');n.append('"PROTOCOL":"').append(e.getProtocolType().getName()).append('",');n.append('"FPA_AUTHENTICATION_METHOD":"').append(t.XString.toUpperCase(e.getAuthenticationType().getName())).append('",');n.append('"HOST":"').append(e.getHost()).append('",');n.append('"PORT":"').appendInt(e.getPort()).append('",');n.append('"TIMEOUT":"').appendInt(0).append('",');n.append('"LANGUAGE":"').append(e.getLanguage()).append('"}');return n.toString()};t.OcSystemsLoadAction.prototype.onBearerTokenLoaded=function(t,e,a){};t.OcSystemsLoadAction.prototype.onFunctionExecuted=function(e,a,r){this.addAllMessages(e);if(e.isValid()){let e=a.getRootElement();if(t.isNull(e)){this.addError(0,"No catalog returned")}else{let a=t.OrcaSystemConverter.create().convert(this.getActionContext().getConnection(),e,this.m_loadingContext);this.setData(a)}}this.endSync()};t.OcSystemsLoadAction.prototype.processSynchronization=function(e){let a=t.XUri.createFromUrl(t.OcSystemsLoadAction.getPath());a.addQueryElement("currentSystem",this.getCurrentSystemQueryPath());a.addQueryElement("timestamp",t.XLong.convertToString(t.XDateTime.createCurrentLocalDateTime().getMilliseconds()));a.addQueryElement("$expand","mapping");let r=this.getActionContext().getConnection();let n=r.newRpcFunctionByUri(a);let o=n.getRpcRequest();o.setMethod(t.HttpRequestMethod.HTTP_GET);n.processFunctionExecution(e,this,null);return true};t.OcSystemsLoadAction.prototype.releaseObjectInternal=function(){};t.OcOrcaStory=function(){};t.OcOrcaStory.prototype=new t.OcStory;t.OcOrcaStory.prototype._ff_c="OcOrcaStory";t.OcOrcaStory.create=function(e){let a=new t.OcOrcaStory;a.setupOrcaStory(e);return a};t.OcOrcaStory.prototype.m_orcaContext=null;t.OcOrcaStory.prototype.getOrcaContext=function(){return this.m_orcaContext};t.OcOrcaStory.prototype.getStoryEntityHelper=function(){return this.getOrcaContext().getStoryEntityHelper()};t.OcOrcaStory.prototype.processColorSyncs=function(){return this.getStoryEntityHelper().getStoryEntityAsJson().getStructureByKey(t.OcOrcaConstants.STORY_COLOR_SYNC)};t.OcOrcaStory.prototype.processCreateTime=function(){return t.OcOrcaUtils.processTime(this.getStoryEntityHelper().getStoryAsJson().getStringByKey(t.OcOrcaConstants.STORY_CREATED_TIME))};t.OcOrcaStory.prototype.processCreatedBy=function(){return this.getStoryEntityHelper().getStoryAsJson().getStringByKey(t.OcOrcaConstants.STORY_CREATED_BY)};t.OcOrcaStory.prototype.processDescription=function(){return this.getStoryEntityHelper().getStoryAsJson().getStringByKey(t.OcOrcaConstants.STORY_DESCRIPTION)};t.OcOrcaStory.prototype.processModifiedBy=function(){return this.getStoryEntityHelper().getStoryAsJson().getStringByKey(t.OcOrcaConstants.STORY_MODIFIED_BY)};t.OcOrcaStory.prototype.processModifiedTime=function(){return t.OcOrcaUtils.processTime(this.getStoryEntityHelper().getStoryAsJson().getStringByKey(t.OcOrcaConstants.STORY_MODIFIED_TIME))};t.OcOrcaStory.prototype.processStoryFilters=function(){return this.getStoryEntityHelper().getStoryEntityAsJson().getListByKey(t.OcOrcaConstants.STORY_FILTERS)};t.OcOrcaStory.prototype.processUpdateCounter=function(){return t.OcStoryUtils.getIntegerFromStructureByName(this.getStoryEntityHelper().getStoryAsJson(),t.OcOrcaConstants.STORY_UPDATE_COUNTER)};t.OcOrcaStory.prototype.releaseObject=function(){this.m_orcaContext=null;t.OcStory.prototype.releaseObject.call(this)};t.OcOrcaStory.prototype.setupOrcaStory=function(e){this.m_orcaContext=e;let a=e.getStoryEntityHelper().getStoryAsJson();let r=a.getStringByKey(t.OcOrcaConstants.STORY_RESOURCE_ID);let n=a.getStringByKey(t.OcOrcaConstants.STORY_NAME);this.setupStory(r,n,e)};t.OcOrcaPage=function(){};t.OcOrcaPage.prototype=new t.OcPage;t.OcOrcaPage.prototype._ff_c="OcOrcaPage";t.OcOrcaPage.create=function(e,a,r,n){let o=new t.OcOrcaPage;o.setupOrcaPage(e,a,r,n);return o};t.OcOrcaPage.prototype.m_orcaStory=null;t.OcOrcaPage.prototype.m_pageJson=null;t.OcOrcaPage.prototype.m_pageLayout=null;t.OcOrcaPage.prototype.getOrcaContext=function(){return this.getOrcaStory().getOrcaContext()};t.OcOrcaPage.prototype.getOrcaStory=function(){return this.m_orcaStory};t.OcOrcaPage.prototype.getPageJson=function(){return this.m_pageJson};t.OcOrcaPage.prototype.getPageLayout=function(){if(t.isNull(this.m_pageLayout)){this.m_pageLayout=t.OcOrcaPageLayout.create(this.processPageLayoutJson())}return this.m_pageLayout};t.OcOrcaPage.prototype.handlePageLayoutError=function(e){if(this.getContext().isTolerant()){let a=t.OcMessage.newPageWithMultipleLayouts(t.Severity.WARNING,this,e.size());this.getContext().getMessageManager().addMessage(a)}else{let a=t.OcMessage.newPageWithMultipleLayouts(t.Severity.ERROR,this,e.size());this.getContext().getMessageManager().addMessage(a);throw t.XException.createIllegalArgumentException(a.getText())}};t.OcOrcaPage.prototype.processBackgroundColor=function(){return this.getPageLayout().processBackgroundColor()};t.OcOrcaPage.prototype.processIsResponsive=function(){return this.getPageLayout().processIsResponsive()};t.OcOrcaPage.prototype.processPageFilters=function(){return t.OcJsonPathEvaluator.getSingleJsonPathElementAsList(this.getPageJson(),t.OcOrcaConstants.PATH_FROM_PAGE_TO_FILTERS)};t.OcOrcaPage.prototype.processPageGroups=function(){return t.OcJsonPathEvaluator.getSingleJsonPathElementAsList(this.getPageJson(),t.OcOrcaConstants.PATH_FROM_PAGE_TO_GROUPS)};t.OcOrcaPage.prototype.processPageLayoutJson=function(){let e=t.OcJsonPathEvaluator.getJsonPathElementsAsStructures(this.getPageJson(),t.OcOrcaConstants.PATH_FROM_PAGE_TO_PAGE_LAYOUT);if(t.XCollectionUtils.hasElements(e)){if(e.size()>1){this.handlePageLayoutError(e)}return e.get(0)}return t.PrFactory.createStructure()};t.OcOrcaPage.prototype.releaseObject=function(){this.m_pageJson=null;this.m_orcaStory=null;this.m_pageLayout=t.XObjectExt.release(this.m_pageLayout);t.OcPage.prototype.releaseObject.call(this)};t.OcOrcaPage.prototype.setupOrcaPage=function(t,e,a,r){this.setupPage(t,e,r);this.m_pageJson=a;this.m_orcaStory=r};t.OcQStoryConvProgram=function(){};t.OcQStoryConvProgram.prototype=new t.DfShellProgramWithApplication;t.OcQStoryConvProgram.prototype._ff_c="OcQStoryConvProgram";t.OcQStoryConvProgram.ANALYTIC_CARD="card";t.OcQStoryConvProgram.COMPOSIT_ANALYTIC_CARD="compositCard";t.OcQStoryConvProgram.SAVE_PATH="path";t.OcQStoryConvProgram.SPLIT_PAGES="split";t.OcQStoryConvProgram.SPLIT_UQM="uqm";t.OcQStoryConvProgram.STORY_ID="story";t.OcQStoryConvProgram.SYSTEM_NAME="system";t.OcQStoryConvProgram.prototype.getProgramName=function(){return"storyconverter"};t.OcQStoryConvProgram.prototype.newProgram=function(){let e=new t.OcQStoryConvProgram;e.setup();return e};t.OcQStoryConvProgram.prototype.prepareProgramMetadata=function(e){e.addOption(t.OcQStoryConvProgram.SYSTEM_NAME,"The system name","",t.XValueType.STRING);e.addOption(t.OcQStoryConvProgram.STORY_ID,"The story id name","",t.XValueType.STRING);e.addOption(t.OcQStoryConvProgram.SAVE_PATH,"The path where to save the story","",t.XValueType.STRING);e.addOption(t.OcQStoryConvProgram.SPLIT_PAGES,"Whether to split the story into pages ","",t.XValueType.BOOLEAN);e.addOption(t.OcQStoryConvProgram.SPLIT_UQM,"Whether to split the uqm from the pages ","",t.XValueType.BOOLEAN);e.addOption(t.OcQStoryConvProgram.ANALYTIC_CARD,"Whether to extract an analytic card instead of a full story ","",t.XValueType.BOOLEAN);e.addOption(t.OcQStoryConvProgram.COMPOSIT_ANALYTIC_CARD,"Whether to extract an analytic card instead of a full story (separated widgets) ","",t.XValueType.BOOLEAN)};t.OcQStoryConvProgram.prototype.processArguments=function(t){};t.OcQStoryConvProgram.prototype.processConfiguration=function(t){};t.OcQStoryConvProgram.prototype.recursiveAdapt=function(e,a,r){if(a.isStructure()){let n=a;let o=n.getKeysAsIterator();while(o.hasNext()){let a=o.next();let s=n.getByKey(a);if(t.XString.isEqual("DataProviders",a)&&s.isList()){this.reduceDataproviders(e,s,r)}else{if(t.notNull(s)){let t=this.recursiveAdapt(e,s,r);if(t!==s){n.put(a,t)}}}}}else if(a.isList()){let t=a;for(let a=0;a<t.size();a++){let n=t.get(a);let o=this.recursiveAdapt(e,n,r);if(o!==n){t.set(a,o)}}}return a};t.OcQStoryConvProgram.prototype.recursiveRename=function(e,a){if(t.notNull(e)){if(e.isStructure()){let r=e;let n=r.getKeysAsIterator();while(n.hasNext()){let e=n.next();let o=r.getByKey(e);if(t.XString.isEqual("Binding",e)&&o.isStructure()){let e=o;let r=e.getStringByKey("Source");let n=t.XString.substring(r,1,-1);if(t.XString.isEqual(a,n)){e.putString("Source",t.XStringUtils.concatenate2("%",a));e.putString("CacheId",a)}}else{let t=this.recursiveRename(o,a);if(t!==o){r.put(e,t)}}}}else if(e.isList()){let t=e;for(let e=0;e<t.size();e++){let r=t.get(e);let n=this.recursiveRename(r,a);if(n!==r){t.set(e,n)}}}}return e};t.OcQStoryConvProgram.prototype.reduceDataproviders=function(e,a,r){e.mkdirs();for(let n=0;n<a.size();n++){let o=a.getStructureAt(n);if(t.notNull(o)){let a=o.getStringByKey("Name");o.putString("Name",a);let n=t.XStringUtils.concatenate2(a,".uqm");let s=e.newChild(n);let i=t.PrUtils.serialize(o,true,true,4);s.saveByteArray(t.XByteArray.convertFromString(i));o.clear();let c=t.XStringUtils.concatenate2("uqm/",n);o.putString("ResourceRef",c);o.putString("Name",a);this.recursiveRename(r,a)}}};t.OcQStoryConvProgram.prototype.runMain=function(){let e=this.getSession();let a=e.getStdlog();let r=this.getArguments();let n=r.getStringByKey(t.OcQStoryConvProgram.SYSTEM_NAME);let o=r.getStringByKey(t.OcQStoryConvProgram.STORY_ID);let s=r.getStringByKey(t.OcQStoryConvProgram.SAVE_PATH);let i=r.getBooleanByKeyExt(t.OcQStoryConvProgram.SPLIT_PAGES,false);let c=r.getBooleanByKeyExt(t.OcQStoryConvProgram.SPLIT_UQM,false);let l=r.getBooleanByKeyExt(t.OcQStoryConvProgram.ANALYTIC_CARD,false);let O=r.getBooleanByKeyExt(t.OcQStoryConvProgram.COMPOSIT_ANALYTIC_CARD,false);if(t.isNull(n)||t.isNull(o)||t.isNull(s)){a.println("Argument(s) missing. You have to indicate a system name, a story id and a path where to store the story:");a.println("Argument structure:");a.println(t.XStringUtils.concatenate5(t.XStringUtils.concatenate5("\tstoryconverter -",t.OcQStoryConvProgram.SYSTEM_NAME,"=<SYSTEM_NAME> -",t.OcQStoryConvProgram.STORY_ID,"=<STORY_ID> -"),t.OcQStoryConvProgram.SAVE_PATH,"=<PATH_TO_SAVE> [ -",t.OcQStoryConvProgram.SPLIT_PAGES," ]"));a.println("Example call:");a.println(t.XStringUtils.concatenate3(t.XStringUtils.concatenate5("\tstoryconverter -",t.OcQStoryConvProgram.SYSTEM_NAME,"=moses -",t.OcQStoryConvProgram.STORY_ID,"=7FA33C5B24775509E10000000AB4010F -"),t.OcQStoryConvProgram.SAVE_PATH,"=test/path"));a.println(t.XStringUtils.concatenate3('If you specify the option "-',t.OcQStoryConvProgram.SPLIT_PAGES,'" external datasources are written into separate files'));return false}let u=t.OcOrcaServiceConfig.create(this.getApplication(),n);let g=u.processOrcaServiceCreation(t.SyncType.BLOCKING,null,null);if(g.hasErrors()){a.println(t.XStringUtils.concatenate2("Cannot connect to system ",n));return false}let p=g.getData();if(t.isNull(p)){a.println(t.XStringUtils.concatenate2("Cannot create Orca service for system ",n));return false}let y=p.processStoryLoad(t.SyncType.BLOCKING,null,null,o);if(y.hasErrors()){a.println(t.XStringUtils.concatenate2("Cannot load story ",o));return false}let _=y.getData();let d=t.OcQuasarStory.create(_);d.setQuasarMainLayoutType(t.OcLayoutType.CANVAS);let S;if(l){S=d.getQuasarAnalyticalCardDocument()}else if(O){S=d.getQuasarCompositeAnalyticalCardDocument()}else{S=d.getQuasarTabStoryDocument()}let C=t.OcStoryUtils.normalizeString(d.getName());let T=t.PrUtils.serialize(S,true,false,0);T=t.XString.replace(T,t.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME,n);let E=t.XFile.createFromEnvVar(this.getProcess(),t.XEnvironmentConstants.FIREFLY_SDK,t.XStringUtils.concatenate2(s,"/"));let m=t.XFile.createFromEnvVar(this.getProcess(),t.XEnvironmentConstants.FIREFLY_SDK,t.XStringUtils.concatenate4(s,"/",C,"/"));E.mkdirs();if(!E.isExisting()){a.println(t.XStringUtils.concatenate2("Cannot create directory ",s));t.XObjectExt.release(S);return false}let I=E.newChild(t.XStringUtils.concatenate2(C,".qsa"));let A=t.XFile.createByNativePath(this.getProcess(),I.getNativePath());A.saveByteArray(t.XByteArray.convertFromString(T));if(i&&!l){m.mkdirs();if(!m.isExisting()){a.println(t.XStringUtils.concatenate2("Cannot create directory ",s));t.XObjectExt.release(S);return false}let e=d.getQuasarPageDocuments();let r=null;if(c){r=t.XFile.createByNativePath(this.getProcess(),t.XStringUtils.concatenate2(m.getNativePath(),"uqm"))}for(let o=0;o<e.size();o++){let i=e.get(o);let l=t.PrUtils.serialize(i,true,false,0);l=t.XString.replace(l,t.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME,n);let O=t.XInteger.convertToString(o);let u=t.XStringUtils.concatenate3("page",O,".qsa");if(c){let e=t.JsonParserFactory.newInstance();let a=e.parse(l);a=this.recursiveAdapt(r,a,a);l=t.PrUtils.serialize(a,true,true,4);u=t.XStringUtils.concatenate2("Xt_",u)}m.mkdirs();if(!m.isExisting()){a.println(t.XStringUtils.concatenate2("Cannot create directory ",s));t.XObjectExt.release(e);return false}let g=m.newChild(u);let p=t.XFile.createByNativePath(this.getProcess(),g.getNativePath());p.saveByteArray(t.XByteArray.convertFromString(l))}t.XObjectExt.release(e)}return true};t.OcOrcaService=function(){};t.OcOrcaService.prototype=new t.DfService;t.OcOrcaService.prototype._ff_c="OcOrcaService";t.OcOrcaService.CLAZZ=null;t.OcOrcaService.staticSetup=function(){t.OcOrcaService.CLAZZ=t.XClass.create(t.OcOrcaService)};t.OcOrcaService.prototype.processBearerTokenLoad=function(e,a,r,n){return t.OcBearerTokenLoadAction.createAndRun(e,a,r,this,n)};t.OcOrcaService.prototype.processCubeMetadataLoad=function(e,a,r,n){return t.OcCubeMetadataLoadAction.createAndRun(e,a,r,this,n)};t.OcOrcaService.prototype.processStoryCatalogLoad=function(e,a,r,n){return t.OcStoryCatalogLoadAction.create(n,this).processSyncAction(e,a,r)};t.OcOrcaService.prototype.processStoryLoad=function(e,a,r,n){return t.OcStoryLoadAction.createAndRun(e,a,r,this,n)};t.OcOrcaService.prototype.processSystemLandscapeLoad=function(e,a,r,n){return t.OcSystemsLoadAction.createAndRun(e,a,r,this,n)};t.OcOrcaService.prototype.requiresInitialization=function(){return false};t.OcOrcaServiceConfig=function(){};t.OcOrcaServiceConfig.prototype=new t.DfServiceConfig;t.OcOrcaServiceConfig.prototype._ff_c="OcOrcaServiceConfig";t.OcOrcaServiceConfig.CLAZZ=null;t.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME="orcaMaster";t.OcOrcaServiceConfig.create=function(e,a){let r=new t.OcOrcaServiceConfig;r.setupConfig(e);r.setServiceTypeInfo(t.StoryModule.SERVICE_TYPE_ORCA_SERVICE);r.setSystemName(a);return r};t.OcOrcaServiceConfig.staticSetup=function(){t.OcOrcaServiceConfig.CLAZZ=t.XClass.create(t.OcOrcaServiceConfig)};t.OcOrcaServiceConfig.prototype.callListener=function(t,e,a,r){e.onOrcaServiceCreated(t,a,r)};t.OcOrcaServiceConfig.prototype.processOrcaServiceCreation=function(t,e,a){return this.processSyncAction(t,e,a)};t.OcOrcaServiceConfig.prototype.setDataFromService=function(t){this.setData(t)};t.StoryModule=function(){};t.StoryModule.prototype=new t.DfModule;t.StoryModule.prototype._ff_c="StoryModule";t.StoryModule.SERVICE_TYPE_ORCA_SERVICE=null;t.StoryModule.XS_ORCA_SERVICE="ORCA_SERVICE";t.StoryModule.s_module=null;t.StoryModule.getInstance=function(){if(t.isNull(t.StoryModule.s_module)){t.DfModule.checkInitialized(t.RuntimeModule.getInstance());t.DfModule.checkInitialized(t.ProtocolModule.getInstance());t.StoryModule.s_module=t.DfModule.startExt(new t.StoryModule);let e=t.RegistrationService.getInstance();t.StoryModule.SERVICE_TYPE_ORCA_SERVICE=t.ServiceType.createType(t.StoryModule.XS_ORCA_SERVICE);t.OcOrcaServiceConfig.staticSetup();e.addServiceConfig(t.StoryModule.XS_ORCA_SERVICE,t.OcOrcaServiceConfig.CLAZZ);t.OcOrcaService.staticSetup();e.addService(t.StoryModule.XS_ORCA_SERVICE,t.OcOrcaService.CLAZZ);t.OcOrcaConstants.staticSetup();t.OcQuasarConstants.staticSetup();t.OcChartType.staticSetup();t.OcStoryCatalogType.staticSetup();t.OcWidgetType.staticSetup();t.OcLayoutType.staticSetup();t.ProgramRegistry.setProgramFactory(new t.OcQStoryConvProgram);t.DfModule.stopExt(t.StoryModule.s_module)}return t.StoryModule.s_module};t.StoryModule.prototype.getName=function(){return"ff5500.story"};t.StoryModule.getInstance();return t});
//# sourceMappingURL=ff5500.story.js.map