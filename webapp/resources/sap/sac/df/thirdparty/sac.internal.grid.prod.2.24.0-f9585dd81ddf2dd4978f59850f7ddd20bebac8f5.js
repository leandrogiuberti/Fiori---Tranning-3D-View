/*! For license information please see sac.internal.grid.main.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("sapSacGrid",[],t):"object"==typeof exports?exports.sapSacGrid=t():e.sapSacGrid=t()}(self,function(){return(()=>{var e={757:(e,t,n)=>{e.exports=n(666)},405:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Annotation:()=>le,AnnotationType:()=>se,ChangeDesc:()=>E,ChangeSet:()=>D,CharCategory:()=>ve,Compartment:()=>X,EditorSelection:()=>P,EditorState:()=>Ce,Facet:()=>N,Line:()=>h,MapMode:()=>T,Prec:()=>K,Range:()=>Re,RangeSet:()=>De,RangeSetBuilder:()=>ke,RangeValue:()=>Se,SelectionRange:()=>M,StateEffect:()=>ce,StateEffectType:()=>ae,StateField:()=>U,Text:()=>r,Transaction:()=>ue,codePointAt:()=>C,codePointSize:()=>S,combineConfig:()=>we,countColumn:()=>ze,findClusterBreak:()=>g,findColumn:()=>Be,fromCodePoint:()=>w});class r{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),i.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let n=[];return this.decompose(e,t,n,0),i.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new a(this),o=new a(e);for(let e=t,i=t;;){if(r.next(e),o.next(e),e=0,r.lineBreak!=o.lineBreak||r.done!=o.done||r.value!=o.value)return!1;if(i+=r.value.length,r.done||i>=n)return!0}}iter(e=1){return new a(this,e)}iterRange(e,t=this.length){return new c(this,e,t)}iterLines(e,t){let n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new u(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new o(e):i.from(o.split(e,[])):r.empty}}class o extends r{constructor(e,t=function(e){let t=-1;for(let n of e)t+=n.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let o=0;;o++){let i=this.text[o],l=r+i.length;if((t?n:l)>=e)return new h(r,l,n,i);r=l+1,n++}}decompose(e,t,n,r){let i=e<=0&&t>=this.length?this:new o(s(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&r){let e=n.pop(),t=l(i.text,e.text.slice(),0,i.length);if(t.length<=32)n.push(new o(t,e.length+i.length));else{let e=t.length>>1;n.push(new o(t.slice(0,e)),new o(t.slice(e)))}}else n.push(i)}replace(e,t,n){if(!(n instanceof o))return super.replace(e,t,n);let r=l(this.text,l(n.text,s(this.text,0,e)),t),a=this.length+n.length-(t-e);return r.length<=32?new o(r,a):i.from(o.split(r,[]),a)}sliceString(e,t=this.length,n="\n"){let r="";for(let o=0,i=0;o<=t&&i<this.text.length;i++){let l=this.text[i],s=o+l.length;o>e&&i&&(r+=n),e<s&&t>o&&(r+=l.slice(Math.max(0,e-o),t-o)),o=s+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let i of e)n.push(i),r+=i.length+1,32==n.length&&(t.push(new o(n,r)),n=[],r=-1);return r>-1&&t.push(new o(n,r)),t}}class i extends r{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let t of e)this.lines+=t.lines}lineInner(e,t,n,r){for(let o=0;;o++){let i=this.children[o],l=r+i.length,s=n+i.lines-1;if((t?s:l)>=e)return i.lineInner(e,t,n,r);r=l+1,n=s+1}}decompose(e,t,n,r){for(let o=0,i=0;i<=t&&o<this.children.length;o++){let l=this.children[o],s=i+l.length;if(e<=s&&t>=i){let o=r&((i<=e?1:0)|(s>=t?2:0));i>=e&&s<=t&&!o?n.push(l):l.decompose(e-i,t-i,n,o)}i=s+1}}replace(e,t,n){if(n.lines<this.lines)for(let r=0,o=0;r<this.children.length;r++){let l=this.children[r],s=o+l.length;if(e>=o&&t<=s){let a=l.replace(e-o,t-o,n),c=this.lines-l.lines+a.lines;if(a.lines<c>>4&&a.lines>c>>6){let o=this.children.slice();return o[r]=a,new i(o,this.length-(t-e)+n.length)}return super.replace(o,s,a)}o=s+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n="\n"){let r="";for(let o=0,i=0;o<this.children.length&&i<=t;o++){let l=this.children[o],s=i+l.length;i>e&&o&&(r+=n),e<s&&t>i&&(r+=l.sliceString(e-i,t-i,n)),i=s+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof i))return 0;let n=0,[r,o,l,s]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,o+=t){if(r==l||o==s)return n;let i=this.children[r],a=e.children[o];if(i!=a)return n+i.scanIdentical(a,t);n+=i.length+1}}static from(e,t=e.reduce((e,t)=>e+t.length+1,-1)){let n=0;for(let t of e)n+=t.lines;if(n<32){let n=[];for(let t of e)t.flatten(n);return new o(n,t)}let r=Math.max(32,n>>5),l=r<<1,s=r>>1,a=[],c=0,u=-1,h=[];function d(e){let t;if(e.lines>l&&e instanceof i)for(let t of e.children)d(t);else e.lines>s&&(c>s||!c)?(p(),a.push(e)):e instanceof o&&c&&(t=h[h.length-1])instanceof o&&e.lines+t.lines<=32?(c+=e.lines,u+=e.length+1,h[h.length-1]=new o(t.text.concat(e.text),t.length+1+e.length)):(c+e.lines>r&&p(),c+=e.lines,u+=e.length+1,h.push(e))}function p(){0!=c&&(a.push(1==h.length?h[0]:i.from(h,u)),u=-1,c=h.length=0)}for(let t of e)d(t);return p(),1==a.length?a[0]:new i(a,t)}}function l(e,t,n=0,r=1e9){for(let o=0,i=0,l=!0;i<e.length&&o<=r;i++){let s=e[i],a=o+s.length;a>=n&&(a>r&&(s=s.slice(0,r-o)),o<n&&(s=s.slice(n-o)),l?(t[t.length-1]+=s,l=!1):t.push(s)),o=a+1}return t}function s(e,t,n){return l(e,[""],t,n)}r.empty=new o([""],0);class a{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof o?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],i=this.offsets[n],l=i>>1,s=r instanceof o?r.text.length:r.children.length;if(l==(t>0?s:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(r instanceof o){let o=r.text[l+(t<0?-1:0)];if(this.offsets[n]+=t,o.length>Math.max(0,e))return this.value=0==e?o:t>0?o.slice(e):o.slice(0,o.length-e),this;e-=o.length}else{let i=r.children[l+(t<0?-1:0)];e>i.length?(e-=i.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(i),this.offsets.push(t>0?1:(i instanceof o?i.text.length:i.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class c{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new a(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class u{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:r}=this.inner.next(e);return t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(r.prototype[Symbol.iterator]=function(){return this.iter()},a.prototype[Symbol.iterator]=c.prototype[Symbol.iterator]=u.prototype[Symbol.iterator]=function(){return this});class h{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}}let d="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=1;e<d.length;e++)d[e]+=d[e-1];function p(e){for(let t=1;t<d.length;t+=2)if(d[t]>e)return d[t-1]<=e;return!1}function f(e){return e>=127462&&e<=127487}function g(e,t,n=!0,r=!0){return(n?m:v)(e,t,r)}function m(e,t,n){if(t==e.length)return t;t&&y(e.charCodeAt(t))&&b(e.charCodeAt(t-1))&&t--;let r=C(e,t);for(t+=S(r);t<e.length;){let o=C(e,t);if(8205==r||8205==o||n&&p(o))t+=S(o),r=o;else{if(!f(o))break;{let n=0,r=t-2;for(;r>=0&&f(C(e,r));)n++,r-=2;if(n%2==0)break;t+=2}}}return t}function v(e,t,n){for(;t>0;){let r=m(e,t-2,n);if(r<t)return r;t--}return 0}function y(e){return e>=56320&&e<57344}function b(e){return e>=55296&&e<56320}function C(e,t){let n=e.charCodeAt(t);if(!b(n)||t+1==e.length)return n;let r=e.charCodeAt(t+1);return y(r)?r-56320+(n-55296<<10)+65536:n}function w(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function S(e){return e<65536?1:2}const R=/\r\n?|\n/;var T=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(T||(T={}));class E{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let o=this.sections[t++],i=this.sections[t++];i<0?(e(n,r,o),r+=o):r+=i,n+=o}}iterChangedRanges(e,t=!1){x(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new E(e)}composeDesc(e){return this.empty?e:e.empty?this:L(this,e)}mapDesc(e,t=!1){return e.empty?this:A(this,e,t)}mapPos(e,t=-1,n=T.Simple){let r=0,o=0;for(let i=0;i<this.sections.length;){let l=this.sections[i++],s=this.sections[i++],a=r+l;if(s<0){if(a>e)return o+(e-r);o+=l}else{if(n!=T.Simple&&a>=e&&(n==T.TrackDel&&r<e&&a>e||n==T.TrackBefore&&r<e||n==T.TrackAfter&&a>e))return null;if(a>e||a==e&&t<0&&!l)return e==r||t<0?o:o+s;o+=s}r=a}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return o}touchesRange(e,t=e){for(let n=0,r=0;n<this.sections.length&&r<=t;){let o=r+this.sections[n++];if(this.sections[n++]>=0&&r<=t&&o>=e)return!(r<e&&o>t)||"cover";r=o}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(e=>"number"!=typeof e))throw new RangeError("Invalid JSON representation of ChangeDesc");return new E(e)}static create(e){return new E(e)}}class D extends E{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return x(this,(t,n,r,o,i)=>e=e.replace(r,r+(n-t),i),!1),e}mapDesc(e,t=!1){return A(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let o=0,i=0;o<t.length;o+=2){let l=t[o],s=t[o+1];if(s>=0){t[o]=s,t[o+1]=l;let a=o>>1;for(;n.length<a;)n.push(r.empty);n.push(l?e.slice(i,i+l):r.empty)}i+=l}return new D(t,n)}compose(e){return this.empty?e:e.empty?this:L(this,e,!0)}map(e,t=!1){return e.empty?this:A(this,e,t,!0)}iterChanges(e,t=!1){x(this,e,t)}get desc(){return E.create(this.sections)}filter(e){let t=[],n=[],r=[],o=new I(this);e:for(let i=0,l=0;;){let s=i==e.length?1e9:e[i++];for(;l<s||l==s&&0==o.len;){if(o.done)break e;let e=Math.min(o.len,s-l);k(r,e,-1);let i=-1==o.ins?-1:0==o.off?o.ins:0;k(t,e,i),i>0&&O(n,t,o.text),o.forward(e),l+=e}let a=e[i++];for(;l<a;){if(o.done)break e;let e=Math.min(o.len,a-l);k(t,e,-1),k(r,e,-1==o.ins?-1:0==o.off?o.ins:0),o.forward(e),l+=e}}return{changes:new D(t,n),filtered:E.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):0==r?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let o=[],i=[],l=0,s=null;function a(e=!1){if(!e&&!o.length)return;l<t&&k(o,t-l,-1);let n=new D(o,i);s=s?s.compose(n.map(s)):n,o=[],i=[],l=0}return function e(c){if(Array.isArray(c))for(let t of c)e(t);else if(c instanceof D){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);a(),s=s?s.compose(c.map(s)):c}else{let{from:e,to:s=e,insert:u}=c;if(e>s||e<0||s>t)throw new RangeError(`Invalid change range ${e} to ${s} (in doc of length ${t})`);let h=u?"string"==typeof u?r.of(u.split(n||R)):u:r.empty,d=h.length;if(e==s&&0==d)return;e<l&&a(),e>l&&k(o,e-l,-1),k(o,s-e,d),O(i,o,h),l=s}}(e),a(!s),s}static empty(e){return new D(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let o=0;o<e.length;o++){let i=e[o];if("number"==typeof i)t.push(i,-1);else{if(!Array.isArray(i)||"number"!=typeof i[0]||i.some((e,t)=>t&&"string"!=typeof e))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==i.length)t.push(i[0],0);else{for(;n.length<o;)n.push(r.empty);n[o]=r.of(i.slice(1)),t.push(i[0],n[o].length)}}}return new D(t,n)}static createSet(e,t){return new D(e,t)}}function k(e,t,n,r=!1){if(0==t&&n<=0)return;let o=e.length-2;o>=0&&n<=0&&n==e[o+1]?e[o]+=t:0==t&&0==e[o]?e[o+1]+=n:r?(e[o]+=t,e[o+1]+=n):e.push(t,n)}function O(e,t,n){if(0==n.length)return;let o=t.length-2>>1;if(o<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<o;)e.push(r.empty);e.push(n)}}function x(e,t,n){let o=e.inserted;for(let i=0,l=0,s=0;s<e.sections.length;){let a=e.sections[s++],c=e.sections[s++];if(c<0)i+=a,l+=a;else{let u=i,h=l,d=r.empty;for(;u+=a,h+=c,c&&o&&(d=d.append(o[s-2>>1])),!(n||s==e.sections.length||e.sections[s+1]<0);)a=e.sections[s++],c=e.sections[s++];t(i,u,l,h,d),i=u,l=h}}}function A(e,t,n,r=!1){let o=[],i=r?[]:null,l=new I(e),s=new I(t);for(let e=-1;;)if(-1==l.ins&&-1==s.ins){let e=Math.min(l.len,s.len);k(o,e,-1),l.forward(e),s.forward(e)}else if(s.ins>=0&&(l.ins<0||e==l.i||0==l.off&&(s.len<l.len||s.len==l.len&&!n))){let t=s.len;for(k(o,s.ins,-1);t;){let n=Math.min(l.len,t);l.ins>=0&&e<l.i&&l.len<=n&&(k(o,0,l.ins),i&&O(i,o,l.text),e=l.i),l.forward(n),t-=n}s.next()}else{if(!(l.ins>=0)){if(l.done&&s.done)return i?D.createSet(o,i):E.create(o);throw new Error("Mismatched change set lengths")}{let t=0,n=l.len;for(;n;)if(-1==s.ins){let e=Math.min(n,s.len);t+=e,n-=e,s.forward(e)}else{if(!(0==s.ins&&s.len<n))break;n-=s.len,s.next()}k(o,t,e<l.i?l.ins:0),i&&e<l.i&&O(i,o,l.text),e=l.i,l.forward(l.len-n)}}}function L(e,t,n=!1){let r=[],o=n?[]:null,i=new I(e),l=new I(t);for(let e=!1;;){if(i.done&&l.done)return o?D.createSet(r,o):E.create(r);if(0==i.ins)k(r,i.len,0,e),i.next();else if(0!=l.len||l.done){if(i.done||l.done)throw new Error("Mismatched change set lengths");{let t=Math.min(i.len2,l.len),n=r.length;if(-1==i.ins){let n=-1==l.ins?-1:l.off?0:l.ins;k(r,t,n,e),o&&n&&O(o,r,l.text)}else-1==l.ins?(k(r,i.off?0:i.len,t,e),o&&O(o,r,i.textBit(t))):(k(r,i.off?0:i.len,l.off?0:l.ins,e),o&&!l.off&&O(o,r,l.text));e=(i.ins>t||l.ins>=0&&l.len>t)&&(e||r.length>n),i.forward2(t),l.forward(t)}}else k(r,0,l.ins,e),o&&O(o,r,l.text),l.next()}}class I{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?r.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?r.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class M{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let e=3&this.flags;return 3==e?null:e}get goalColumn(){let e=this.flags>>5;return 33554431==e?void 0:e}map(e,t=-1){let n,r;return this.empty?n=r=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new M(n,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return P.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return P.range(this.anchor,n)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return P.range(e.anchor,e.head)}static create(e,t,n){return new M(e,t,n)}}class P{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:P.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new P([this.main],0)}addRange(e,t=!0){return P.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,P.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new P(e.ranges.map(e=>M.fromJSON(e)),e.main)}static single(e,t=e){return new P([P.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let o=e[r];if(o.empty?o.from<=n:o.from<n)return P.normalized(e.slice(),t);n=o.to}return new P(e,t)}static cursor(e,t=0,n,r){return M.create(e,e,(0==t?0:t<0?4:8)|(null==n?3:Math.min(2,n))|(null!=r?r:33554431)<<5)}static range(e,t,n,r){let o=(null!=n?n:33554431)<<5|(null==r?3:Math.min(2,r));return t<e?M.create(t,e,24|o):M.create(e,t,(t>e?4:0)|o)}static normalized(e,t=0){let n=e[t];e.sort((e,t)=>e.from-t.from),t=e.indexOf(n);for(let n=1;n<e.length;n++){let r=e[n],o=e[n-1];if(r.empty?r.from<=o.to:r.from<o.to){let i=o.from,l=Math.max(r.to,o.to);n<=t&&t--,e.splice(--n,2,r.anchor>r.head?P.range(l,i):P.range(i,l))}}return new P(e,t)}}function H(e,t){for(let n of e.ranges)if(n.to>t)throw new RangeError("Selection points outside of document")}let _=0;class N{constructor(e,t,n,r,o){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.id=_++,this.default=e([]),this.extensions="function"==typeof o?o(this):o}static define(e={}){return new N(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:z),!!e.static,e.enables)}of(e){return new B([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new B(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new B(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],n=>t(n.field(e)))}}function z(e,t){return e==t||e.length==t.length&&e.every((e,n)=>e===t[n])}class B{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=_++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,o=this.id,i=e[o]>>1,l=2==this.type,s=!1,a=!1,c=[];for(let n of this.dependencies)"doc"==n?s=!0:"selection"==n?a=!0:0==(1&(null!==(t=e[n.id])&&void 0!==t?t:1))&&c.push(e[n.id]);return{create:e=>(e.values[i]=n(e),1),update(e,t){if(s&&t.docChanged||a&&(t.docChanged||t.selection)||W(e,c)){let t=n(e);if(l?!F(t,e.values[i],r):!r(t,e.values[i]))return e.values[i]=t,1}return 0},reconfigure:(e,t)=>{let s,a=t.config.address[o];if(null!=a){let o=Q(t,a);if(this.dependencies.every(n=>n instanceof N?t.facet(n)===e.facet(n):!(n instanceof U)||t.field(n,!1)==e.field(n,!1))||(l?F(s=n(e),o,r):r(s=n(e),o)))return e.values[i]=o,0}else s=n(e);return e.values[i]=s,1}}}}function F(e,t,n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function W(e,t){let n=!1;for(let r of t)1&$(e,r)&&(n=!0);return n}function j(e,t,n){let r=n.map(t=>e[t.id]),o=n.map(e=>e.type),i=r.filter(e=>!(1&e)),l=e[t.id]>>1;function s(e){let n=[];for(let t=0;t<r.length;t++){let i=Q(e,r[t]);if(2==o[t])for(let e of i)n.push(e);else n.push(i)}return t.combine(n)}return{create(e){for(let t of r)$(e,t);return e.values[l]=s(e),1},update(e,n){if(!W(e,i))return 0;let r=s(e);return t.compare(r,e.values[l])?0:(e.values[l]=r,1)},reconfigure(e,o){let i=W(e,r),a=o.config.facets[t.id],c=o.facet(t);if(a&&!i&&z(n,a))return e.values[l]=c,0;let u=s(e);return t.compare(u,c)?(e.values[l]=c,0):(e.values[l]=u,1)}}}const V=N.define({static:!0});class U{constructor(e,t,n,r,o){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=o,this.provides=void 0}static define(e){let t=new U(_++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(V).find(e=>e.field==this);return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,n)=>{let r=e.values[t],o=this.updateF(r,n);return this.compareF(r,o)?0:(e.values[t]=o,1)},reconfigure:(e,n)=>null!=n.config.address[this.id]?(e.values[t]=n.field(this),0):(e.values[t]=this.create(e),1)}}init(e){return[this,V.of({field:this,create:e})]}get extension(){return this}}function G(e){return t=>new Z(t,e)}const K={highest:G(0),high:G(1),default:G(2),low:G(3),lowest:G(4)};class Z{constructor(e,t){this.inner=e,this.prec=t}}class X{of(e){return new q(this,e)}reconfigure(e){return X.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class q{constructor(e,t){this.compartment=e,this.inner=t}}class Y{constructor(e,t,n,r,o,i){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=o,this.facets=i,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let r=[],o=Object.create(null),i=new Map;for(let n of function(e,t,n){let r=[[],[],[],[],[]],o=new Map;return function e(i,l){let s=o.get(i);if(null!=s){if(s<=l)return;let e=r[s].indexOf(i);e>-1&&r[s].splice(e,1),i instanceof q&&n.delete(i.compartment)}if(o.set(i,l),Array.isArray(i))for(let t of i)e(t,l);else if(i instanceof q){if(n.has(i.compartment))throw new RangeError("Duplicate use of compartment in extensions");let r=t.get(i.compartment)||i.inner;n.set(i.compartment,r),e(r,l)}else if(i instanceof Z)e(i.inner,i.prec);else if(i instanceof U)r[l].push(i),i.provides&&e(i.provides,l);else if(i instanceof B)r[l].push(i),i.facet.extensions&&e(i.facet.extensions,2);else{let t=i.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${i}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);e(t,l)}}(e,2),r.reduce((e,t)=>e.concat(t))}(e,t,i))n instanceof U?r.push(n):(o[n.facet.id]||(o[n.facet.id]=[])).push(n);let l=Object.create(null),s=[],a=[];for(let e of r)l[e.id]=a.length<<1,a.push(t=>e.slot(t));let c=null==n?void 0:n.config.facets;for(let e in o){let t=o[e],r=t[0].facet,i=c&&c[e]||[];if(t.every(e=>0==e.type))if(l[r.id]=s.length<<1|1,z(i,t))s.push(n.facet(r));else{let e=r.combine(t.map(e=>e.value));s.push(n&&r.compare(e,n.facet(r))?n.facet(r):e)}else{for(let e of t)0==e.type?(l[e.id]=s.length<<1|1,s.push(e.value)):(l[e.id]=a.length<<1,a.push(t=>e.dynamicSlot(t)));l[r.id]=a.length<<1,a.push(e=>j(e,r,t))}}let u=a.map(e=>e(l));return new Y(e,i,u,l,s,o)}}function $(e,t){if(1&t)return 2;let n=t>>1,r=e.status[n];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[n]=4;let o=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|o}function Q(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const J=N.define(),ee=N.define({combine:e=>e.some(e=>e),static:!0}),te=N.define({combine:e=>e.length?e[0]:void 0,static:!0}),ne=N.define(),re=N.define(),oe=N.define(),ie=N.define({combine:e=>!!e.length&&e[0]});class le{constructor(e,t){this.type=e,this.value=t}static define(){return new se}}class se{of(e){return new le(this,e)}}class ae{constructor(e){this.map=e}of(e){return new ce(this,e)}}class ce{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new ce(this.type,t)}is(e){return this.type==e}static define(e={}){return new ae(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let e=r.map(t);e&&n.push(e)}return n}}ce.reconfigure=ce.define(),ce.appendConfig=ce.define();class ue{constructor(e,t,n,r,o,i){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=o,this.scrollIntoView=i,this._doc=null,this._state=null,n&&H(n,t.newLength),o.some(e=>e.type==ue.time)||(this.annotations=o.concat(ue.time.of(Date.now())))}static create(e,t,n,r,o,i){return new ue(e,t,n,r,o,i)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(ue.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function he(e,t){let n=[];for(let r=0,o=0;;){let i,l;if(r<e.length&&(o==t.length||t[o]>=e[r]))i=e[r++],l=e[r++];else{if(!(o<t.length))return n;i=t[o++],l=t[o++]}!n.length||n[n.length-1]<i?n.push(i,l):n[n.length-1]<l&&(n[n.length-1]=l)}}function de(e,t,n){var r;let o,i,l;return n?(o=t.changes,i=D.empty(t.changes.length),l=e.changes.compose(t.changes)):(o=t.changes.map(e.changes),i=e.changes.mapDesc(t.changes,!0),l=e.changes.compose(o)),{changes:l,selection:t.selection?t.selection.map(i):null===(r=e.selection)||void 0===r?void 0:r.map(o),effects:ce.mapEffects(e.effects,o).concat(ce.mapEffects(t.effects,i)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function pe(e,t,n){let r=t.selection,o=me(t.annotations);return t.userEvent&&(o=o.concat(ue.userEvent.of(t.userEvent))),{changes:t.changes instanceof D?t.changes:D.of(t.changes||[],n,e.facet(te)),selection:r&&(r instanceof P?r:P.single(r.anchor,r.head)),effects:me(t.effects),annotations:o,scrollIntoView:!!t.scrollIntoView}}function fe(e,t,n){let r=pe(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(n=!1);for(let o=1;o<t.length;o++){!1===t[o].filter&&(n=!1);let i=!!t[o].sequential;r=de(r,pe(e,t[o],i?r.changes.newLength:e.doc.length),i)}let o=ue.create(e,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function(e){let t=e.startState,n=t.facet(oe),r=e;for(let o=n.length-1;o>=0;o--){let i=n[o](e);i&&Object.keys(i).length&&(r=de(r,pe(t,i,e.changes.newLength),!0))}return r==e?e:ue.create(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}(n?function(e){let t=e.startState,n=!0;for(let r of t.facet(ne)){let t=r(e);if(!1===t){n=!1;break}Array.isArray(t)&&(n=!0===n?t:he(n,t))}if(!0!==n){let r,o;if(!1===n)o=e.changes.invertedDesc,r=D.empty(t.doc.length);else{let t=e.changes.filter(n);r=t.changes,o=t.filtered.mapDesc(t.changes).invertedDesc}e=ue.create(t,r,e.selection&&e.selection.map(o),ce.mapEffects(e.effects,o),e.annotations,e.scrollIntoView)}let r=t.facet(re);for(let n=r.length-1;n>=0;n--){let o=r[n](e);e=o instanceof ue?o:Array.isArray(o)&&1==o.length&&o[0]instanceof ue?o[0]:fe(t,me(o),!1)}return e}(o):o)}ue.time=le.define(),ue.userEvent=le.define(),ue.addToHistory=le.define(),ue.remote=le.define();const ge=[];function me(e){return null==e?ge:Array.isArray(e)?e:[e]}var ve=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(ve||(ve={}));const ye=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let be;try{be=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}class Ce{constructor(e,t,n,r,o,i){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=o,i&&(i._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)$(this,e<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(null!=n)return $(this,n),Q(this,n);if(t)throw new RangeError("Field is not present in this state")}update(...e){return fe(this,e,!0)}applyTransaction(e){let t,n=this.config,{base:r,compartments:o}=n;for(let t of e.effects)t.is(X.reconfigure)?(n&&(o=new Map,n.compartments.forEach((e,t)=>o.set(t,e)),n=null),o.set(t.value.compartment,t.value.extension)):t.is(ce.reconfigure)?(n=null,r=t.value):t.is(ce.appendConfig)&&(n=null,r=me(r).concat(t.value));n?t=e.startState.values.slice():(n=Y.resolve(r,o,this),t=new Ce(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(e,t)=>t.reconfigure(e,this),null).values),new Ce(n,e.newDoc,e.newSelection,t,(t,n)=>n.update(t,e),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:P.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),o=[n.range],i=me(n.effects);for(let n=1;n<t.ranges.length;n++){let l=e(t.ranges[n]),s=this.changes(l.changes),a=s.map(r);for(let e=0;e<n;e++)o[e]=o[e].map(a);let c=r.mapDesc(s,!0);o.push(l.range.map(c)),r=r.compose(a),i=ce.mapEffects(i,a).concat(ce.mapEffects(me(l.effects),c))}return{changes:r,selection:P.create(o,t.mainIndex),effects:i}}changes(e=[]){return e instanceof D?e:D.of(e,this.doc.length,this.facet(Ce.lineSeparator))}toText(e){return r.of(e.split(this.facet(Ce.lineSeparator)||R))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:($(this,t),Q(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof U&&null!=this.config.address[r.id]&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n)for(let t in n)if(Object.prototype.hasOwnProperty.call(e,t)){let o=n[t],i=e[t];r.push(o.init(e=>o.spec.fromJSON(i,e)))}return Ce.create({doc:e.doc,selection:P.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=Y.resolve(e.extensions||[],new Map),n=e.doc instanceof r?e.doc:r.of((e.doc||"").split(t.staticFacet(Ce.lineSeparator)||R)),o=e.selection?e.selection instanceof P?e.selection:P.single(e.selection.anchor,e.selection.head):P.single(0);return H(o,n.length),t.staticFacet(ee)||(o=o.asSingle()),new Ce(t,n,o,t.dynamicSlots.map(()=>null),(e,t)=>t.create(e),null)}get tabSize(){return this.facet(Ce.tabSize)}get lineBreak(){return this.facet(Ce.lineSeparator)||"\n"}get readOnly(){return this.facet(ie)}phrase(e,...t){for(let t of this.facet(Ce.phrases))if(Object.prototype.hasOwnProperty.call(t,e)){e=t[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(e,n)=>{if("$"==n)return"$";let r=+(n||1);return!r||r>t.length?e:t[r-1]})),e}languageDataAt(e,t,n=-1){let r=[];for(let o of this.facet(J))for(let i of o(this,t,n))Object.prototype.hasOwnProperty.call(i,e)&&r.push(i[e]);return r}charCategorizer(e){return t=this.languageDataAt("wordChars",e).join(""),e=>{if(!/\S/.test(e))return ve.Space;if(function(e){if(be)return be.test(e);for(let t=0;t<e.length;t++){let n=e[t];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||ye.test(n)))return!0}return!1}(e))return ve.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return ve.Word;return ve.Other};var t}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),o=this.charCategorizer(e),i=e-n,l=e-n;for(;i>0;){let e=g(t,i,!1);if(o(t.slice(e,i))!=ve.Word)break;i=e}for(;l<r;){let e=g(t,l);if(o(t.slice(l,e))!=ve.Word)break;l=e}return i==l?null:P.range(i+n,l+n)}}function we(e,t,n={}){let r={};for(let t of e)for(let e of Object.keys(t)){let o=t[e],i=r[e];if(void 0===i)r[e]=o;else if(i===o||void 0===o);else{if(!Object.hasOwnProperty.call(n,e))throw new Error("Config merge conflict for field "+e);r[e]=n[e](i,o)}}for(let e in t)void 0===r[e]&&(r[e]=t[e]);return r}Ce.allowMultipleSelections=ee,Ce.tabSize=N.define({combine:e=>e.length?e[0]:4}),Ce.lineSeparator=te,Ce.readOnly=ie,Ce.phrases=N.define({compare(e,t){let n=Object.keys(e),r=Object.keys(t);return n.length==r.length&&n.every(n=>e[n]==t[n])}}),Ce.languageData=J,Ce.changeFilter=ne,Ce.transactionFilter=re,Ce.transactionExtender=oe,X.reconfigure=ce.define();class Se{eq(e){return this==e}range(e,t=e){return Re.create(e,t,this)}}Se.prototype.startSide=Se.prototype.endSide=0,Se.prototype.point=!1,Se.prototype.mapMode=T.TrackDel;class Re{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new Re(e,t,n)}}function Te(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class Ee{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,r=0){let o=n?this.to:this.from;for(let i=r,l=o.length;;){if(i==l)return i;let r=i+l>>1,s=o[r]-e||(n?this.value[r].endSide:this.value[r].startSide)-t;if(r==i)return s>=0?i:l;s>=0?l=r:i=r+1}}between(e,t,n,r){for(let o=this.findIndex(t,-1e9,!0),i=this.findIndex(n,1e9,!1,o);o<i;o++)if(!1===r(this.from[o]+e,this.to[o]+e,this.value[o]))return!1}map(e,t){let n=[],r=[],o=[],i=-1,l=-1;for(let s=0;s<this.value.length;s++){let a,c,u=this.value[s],h=this.from[s]+e,d=this.to[s]+e;if(h==d){let e=t.mapPos(h,u.startSide,u.mapMode);if(null==e)continue;if(a=c=e,u.startSide!=u.endSide&&(c=t.mapPos(h,u.endSide),c<a))continue}else if(a=t.mapPos(h,u.startSide),c=t.mapPos(d,u.endSide),a>c||a==c&&u.startSide>0&&u.endSide<=0)continue;(c-a||u.endSide-u.startSide)<0||(i<0&&(i=a),u.point&&(l=Math.max(l,c-a)),n.push(u),r.push(a-i),o.push(c-i))}return{mapped:n.length?new Ee(r,o,n,l):null,pos:i}}}class De{constructor(e,t,n,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}static create(e,t,n,r){return new De(e,t,n,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:o=this.length}=e,i=e.filter;if(0==t.length&&!i)return this;if(n&&(t=t.slice().sort(Te)),this.isEmpty)return t.length?De.of(t):this;let l=new xe(this,null,-1).goto(0),s=0,a=[],c=new ke;for(;l.value||s<t.length;)if(s<t.length&&(l.from-t[s].from||l.startSide-t[s].value.startSide)>=0){let e=t[s++];c.addInner(e.from,e.to,e.value)||a.push(e)}else 1==l.rangeIndex&&l.chunkIndex<this.chunk.length&&(s==t.length||this.chunkEnd(l.chunkIndex)<t[s].from)&&(!i||r>this.chunkEnd(l.chunkIndex)||o<this.chunkPos[l.chunkIndex])&&c.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!i||r>l.to||o<l.from||i(l.from,l.to,l.value))&&(c.addInner(l.from,l.to,l.value)||a.push(Re.create(l.from,l.to,l.value))),l.next());return c.finishInner(this.nextLayer.isEmpty&&!a.length?De.empty:this.nextLayer.update({add:a,filter:i,filterFrom:r,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let o=0;o<this.chunk.length;o++){let i=this.chunkPos[o],l=this.chunk[o],s=e.touchesRange(i,i+l.length);if(!1===s)r=Math.max(r,l.maxPoint),t.push(l),n.push(e.mapPos(i));else if(!0===s){let{mapped:o,pos:s}=l.map(i,e);o&&(r=Math.max(r,o.maxPoint),t.push(o),n.push(s))}}let o=this.nextLayer.map(e);return 0==t.length?o:new De(n,t,o||De.empty,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],i=this.chunk[r];if(t>=o&&e<=o+i.length&&!1===i.between(o,e-o,t-o,n))return}this.nextLayer.between(e,t,n)}}iter(e=0){return Ae.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Ae.from(e).goto(t)}static compare(e,t,n,r,o=-1){let i=e.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=o),l=t.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=o),s=Oe(i,l,n),a=new Ie(i,s,o),c=new Ie(l,s,o);n.iterGaps((e,t,n)=>Me(a,e,c,t,n,r)),n.empty&&0==n.length&&Me(a,0,c,0,0,r)}static eq(e,t,n=0,r){null==r&&(r=999999999);let o=e.filter(e=>!e.isEmpty&&t.indexOf(e)<0),i=t.filter(t=>!t.isEmpty&&e.indexOf(t)<0);if(o.length!=i.length)return!1;if(!o.length)return!0;let l=Oe(o,i),s=new Ie(o,l,0).goto(n),a=new Ie(i,l,0).goto(n);for(;;){if(s.to!=a.to||!Pe(s.active,a.active)||s.point&&(!a.point||!s.point.eq(a.point)))return!1;if(s.to>r)return!0;s.next(),a.next()}}static spans(e,t,n,r,o=-1){let i=new Ie(e,null,o).goto(t),l=t,s=i.openStart;for(;;){let e=Math.min(i.to,n);if(i.point){let n=i.activeForPoint(i.to),o=i.pointFrom<t?n.length+1:Math.min(n.length,s);r.point(l,e,i.point,n,o,i.pointRank),s=Math.min(i.openEnd(e),n.length)}else e>l&&(r.span(l,e,i.active,s),s=i.openEnd(e));if(i.to>n)return s+(i.point&&i.to>n?1:0);l=i.to,i.next()}}static of(e,t=!1){let n=new ke;for(let r of e instanceof Re?[e]:t?function(e){if(e.length>1)for(let t=e[0],n=1;n<e.length;n++){let r=e[n];if(Te(t,r)>0)return e.slice().sort(Te);t=r}return e}(e):e)n.add(r.from,r.to,r.value);return n.finish()}}De.empty=new De([],[],null,-1),De.empty.nextLayer=De.empty;class ke{finishChunk(e){this.chunks.push(new Ee(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new ke)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),0))}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(De.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=De.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Oe(e,t,n){let r=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&r.set(t.chunk[e],t.chunkPos[e]);let o=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let i=r.get(e.chunk[t]);null==i||(n?n.mapPos(i):i)!=e.chunkPos[t]||(null==n?void 0:n.touchesRange(i,i+e.chunk[t].length))||o.add(e.chunk[t])}return o}class xe{constructor(e,t,n,r=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Ae{constructor(e){this.heap=e}static from(e,t=null,n=-1){let r=[];for(let o=0;o<e.length;o++)for(let i=e[o];!i.isEmpty;i=i.nextLayer)i.maxPoint>=n&&r.push(new xe(i,t,n,o));return 1==r.length?r[0]:new Ae(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)Le(this.heap,e);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)Le(this.heap,e);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Le(this.heap,0)}}}function Le(e,t){for(let n=e[t];;){let r=1+(t<<1);if(r>=e.length)break;let o=e[r];if(r+1<e.length&&o.compare(e[r+1])>=0&&(o=e[r+1],r++),n.compare(o)<0)break;e[r]=n,e[t]=o,t=r}}class Ie{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ae.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){He(this.active,e),He(this.activeTo,e),He(this.activeRank,e),this.minActive=Ne(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:o}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=o;)t++;_e(this.active,t,n),_e(this.activeTo,t,r),_e(this.activeRank,t,o),e&&_e(e,t,this.cursor.from),this.minActive=Ne(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),n&&He(n,r)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){this.openStart=0;for(let t=n.length-1;t>=0&&n[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function Me(e,t,n,r,o,i){e.goto(t),n.goto(r);let l=r+o,s=r,a=r-t;for(;;){let t=e.to+a-n.to||e.endSide-n.endSide,r=t<0?e.to+a:n.to,o=Math.min(r,l);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&Pe(e.activeForPoint(e.to),n.activeForPoint(n.to))||i.comparePoint(s,o,e.point,n.point):o>s&&!Pe(e.active,n.active)&&i.compareRange(s,o,e.active,n.active),r>l)break;s=r,t<=0&&e.next(),t>=0&&n.next()}}function Pe(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function He(e,t){for(let n=t,r=e.length-1;n<r;n++)e[n]=e[n+1];e.pop()}function _e(e,t,n){for(let n=e.length-1;n>=t;n--)e[n+1]=e[n];e[t]=n}function Ne(e,t){let n=-1,r=1e9;for(let o=0;o<t.length;o++)(t[o]-r||e[o].endSide-e[n].endSide)<0&&(n=o,r=t[o]);return n}function ze(e,t,n=e.length){let r=0;for(let o=0;o<n;)9==e.charCodeAt(o)?(r+=t-r%t,o++):(r++,o=g(e,o));return r}function Be(e,t,n,r){for(let r=0,o=0;;){if(o>=t)return r;if(r==e.length)break;o+=9==e.charCodeAt(r)?n-o%n:1,r=g(e,r)}return!0===r?-1:e.length}},431:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BidiSpan:()=>ct,BlockInfo:()=>cn,BlockType:()=>me,Decoration:()=>ve,Direction:()=>et,EditorView:()=>Kn,GutterMarker:()=>To,MatchDecorator:()=>Dr,RectangleMarker:()=>lr,ViewPlugin:()=>Ve,ViewUpdate:()=>Je,WidgetType:()=>ge,__test:()=>Jo,closeHoverTooltips:()=>go,crosshairCursor:()=>Xr,drawSelection:()=>fr,dropCursor:()=>Tr,getPanel:()=>bo,getTooltip:()=>ho,gutter:()=>Oo,gutterLineClass:()=>Eo,gutters:()=>Ao,hasHoverTooltips:()=>po,highlightActiveLine:()=>zr,highlightActiveLineGutter:()=>Ko,highlightSpecialChars:()=>Ir,highlightTrailingWhitespace:()=>Qo,highlightWhitespace:()=>Yo,hoverTooltip:()=>uo,keymap:()=>er,layer:()=>hr,lineNumberMarkers:()=>No,lineNumbers:()=>jo,logException:()=>Be,panels:()=>yo,placeholder:()=>jr,rectangularSelection:()=>Gr,repositionTooltips:()=>mo,runScopeHandlers:()=>rr,scrollPastEnd:()=>Nr,showPanel:()=>Ro,showTooltip:()=>oo,tooltips:()=>$r});var r=n(405);const o="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),i="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class s{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function o(e,t,i,l){let s=[],a=/^@(\w+)\b/.exec(e[0]),c=a&&"keyframes"==a[1];if(a&&null==t)return i.push(e[0]+";");for(let n in t){let l=t[n];if(/&/.test(n))o(n.split(/,\s*/).map(t=>e.map(e=>t.replace(/&/,e))).reduce((e,t)=>e.concat(t)),l,i);else if(l&&"object"==typeof l){if(!a)throw new RangeError("The value of a property ("+n+") should be a primitive value.");o(r(n),l,s,c)}else null!=l&&s.push(n.replace(/_.*/,"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())+": "+l+";")}(s.length||c)&&i.push((!n||a||l?e:e.map(n)).join(", ")+" {"+s.join(" ")+"}")}for(let t in e)o(r(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=l[o]||1;return l[o]=e+1,"ͼ"+e.toString(36)}static mount(e,t){(e[i]||new c(e)).mount(Array.isArray(t)?t:[t])}}let a=new Map;class c{constructor(e){let t=e.ownerDocument||e,n=t.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let r=a.get(t);if(r)return e.adoptedStyleSheets=[r.sheet,...e.adoptedStyleSheets],e[i]=r;this.sheet=new n.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],a.set(t,this)}else{this.styleTag=t.createElement("style");let n=e.head||e;n.insertBefore(this.styleTag,n.firstChild)}this.modules=[],e[i]=this}mount(e){let t=this.sheet,n=0,r=0;for(let o=0;o<e.length;o++){let i=e[o],l=this.modules.indexOf(i);if(l<r&&l>-1&&(this.modules.splice(l,1),r--,l=-1),-1==l){if(this.modules.splice(r++,0,i),t)for(let e=0;e<i.rules.length;e++)t.insertRule(i.rules[e],n++)}else{for(;r<l;)n+=this.modules[r++].rules.length;n+=i.rules.length,r++}}if(!t){let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e}}}for(var u={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},h={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},d="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),p="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),f=0;f<10;f++)u[48+f]=u[96+f]=String(f);for(f=1;f<=24;f++)u[f+111]="F"+f;for(f=65;f<=90;f++)u[f]=String.fromCharCode(f+32),h[f]=String.fromCharCode(f);for(var g in u)h.hasOwnProperty(g)||(h[g]=u[g]);function m(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function v(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function y(e,t){if(!t.anchorNode)return!1;try{return v(e,t.anchorNode)}catch(e){return!1}}function b(e){return 3==e.nodeType?A(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function C(e,t,n,r){return!!n&&(S(e,t,n,r,-1)||S(e,t,n,r,1))}function w(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function S(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:R(e))){if("DIV"==e.nodeName)return!1;let n=e.parentNode;if(!n||1!=n.nodeType)return!1;t=w(e)+(o<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(o<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=o<0?R(e):0}}}function R(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function T(e,t){let n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function E(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}class D{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?R(t):0),n,Math.min(e.focusOffset,n?R(n):0))}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}let k,O=null;function x(e){if(e.setActive)return e.setActive();if(O)return e.focus(O);let t=[];for(let n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==O?{get preventScroll(){return O={preventScroll:!0},!0}}:void 0),!O){O=!1;for(let e=0;e<t.length;){let n=t[e++],r=t[e++],o=t[e++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=o&&(n.scrollLeft=o)}}}function A(e,t,n=t){let r=k||(k=document.createRange());return r.setEnd(e,n),r.setStart(e,t),r}function L(e,t,n){let r={key:t,code:t,keyCode:n,which:n,cancelable:!0},o=new KeyboardEvent("keydown",r);o.synthetic=!0,e.dispatchEvent(o);let i=new KeyboardEvent("keyup",r);return i.synthetic=!0,e.dispatchEvent(i),o.defaultPrevented||i.defaultPrevented}function I(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function M(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}class P{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new P(e.parentNode,w(e),t)}static after(e,t){return new P(e.parentNode,w(e)+1,t)}}const H=[];class _{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(2&this.flags){let n,r=this.dom,o=null;for(let i of this.children){if(7&i.flags){if(!i.dom&&(n=o?o.nextSibling:r.firstChild)){let e=_.get(n);(!e||!e.parent&&e.canReuseDOM(i))&&i.reuseDOM(n)}i.sync(e,t),i.flags&=-8}if(n=o?o.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&n!=i.dom&&(t.written=!0),i.dom.parentNode==r)for(;n&&n!=i.dom;)n=N(n);else r.insertBefore(i.dom,n);o=i.dom}for(n=o?o.nextSibling:r.firstChild,n&&t&&t.node==r&&(t.written=!0);n;)n=N(n)}else if(1&this.flags)for(let n of this.children)7&n.flags&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let r=0==R(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==r&&t.firstChild!=t.lastChild&&(r=e==t.firstChild?-1:1),e=t}n=r<0?e:e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!_.get(n);)n=n.nextSibling;if(!n)return this.length;for(let e=0,t=0;;e++){let r=this.children[e];if(r.dom==n)return t;t+=r.length+r.breakAfter}}domBoundsAround(e,t,n=0){let r=-1,o=-1,i=-1,l=-1;for(let s=0,a=n,c=n;s<this.children.length;s++){let n=this.children[s],u=a+n.length;if(a<e&&u>t)return n.domBoundsAround(e,t,a);if(u>=e&&-1==r&&(r=s,o=a),a>t&&n.dom.parentNode==this.dom){i=s,l=c;break}c=u,a=u+n.breakAfter}return{from:o,to:l<0?n+this.length:l,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:i<this.children.length&&i>=0?this.children[i].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),1&t.flags)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,7&this.flags&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=H){this.markDirty();for(let n=e;n<t;n++){let e=this.children[n];e.parent==this&&e.destroy()}this.children.splice(e,t-e,...n);for(let e=0;e<n.length;e++)n[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new z(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,r,o,i){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!(8&(this.flags|e.flags))}getSide(){return 0}destroy(){this.parent=null}}function N(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}_.prototype.breakAfter=0;class z{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function B(e,t,n,r,o,i,l,s,a){let{children:c}=e,u=c.length?c[t]:null,h=i.length?i[i.length-1]:null,d=h?h.breakAfter:l;if(!(t==r&&u&&!l&&!d&&i.length<2&&u.merge(n,o,i.length?h:null,0==n,s,a))){if(r<c.length){let e=c[r];e&&o<e.length?(t==r&&(e=e.split(o),o=0),!d&&h&&e.merge(0,o,h,!0,0,a)?i[i.length-1]=e:(o&&e.merge(0,o,null,!1,0,a),i.push(e))):(null==e?void 0:e.breakAfter)&&(h?h.breakAfter=1:l=1),r++}for(u&&(u.breakAfter=l,n>0&&(!l&&i.length&&u.merge(n,u.length,i[0],!1,s,0)?u.breakAfter=i.shift().breakAfter:(n<u.length||u.children.length&&0==u.children[u.children.length-1].length)&&u.merge(n,u.length,null,!1,s,0),t++));t<r&&i.length;)if(c[r-1].become(i[i.length-1]))r--,i.pop(),a=i.length?0:s;else{if(!c[t].become(i[0]))break;t++,i.shift(),s=i.length?0:a}!i.length&&t&&r<c.length&&!c[t-1].breakAfter&&c[r].merge(0,0,c[t-1],!1,s,a)&&t--,(t<r||i.length)&&e.replaceChildren(t,r,i)}}function F(e,t,n,r,o,i){let l=e.childCursor(),{i:s,off:a}=l.findPos(n,1),{i:c,off:u}=l.findPos(t,-1),h=t-n;for(let e of r)h+=e.length;e.length+=h,B(e,c,u,s,a,r,0,o,i)}const W="￿";class j{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(r.EditorState.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=W}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r);let e=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==t)break;let i=_.get(r),l=_.get(o);(i&&l?i.breakAfter:(i?i.breakAfter:V(r))||V(o)&&("BR"!=r.nodeName||r.cmIgnore)&&this.text.length>e)&&this.lineBreak(),r=o}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let o,i=-1,l=1;if(this.lineSeparator?(i=t.indexOf(this.lineSeparator,n),l=this.lineSeparator.length):(o=r.exec(t))&&(i=o.index,l=o[0].length),this.append(t.slice(n,i<0?t.length:i)),i<0)break;if(this.lineBreak(),l>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=l-1);n=i+l}}readNode(e){if(e.cmIgnore)return;let t=_.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(let e=n.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(3==e.nodeType?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+Math.min(t,n.offset))}}function V(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}class U{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}let G="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},K="undefined"!=typeof document?document:{documentElement:{style:{}}};const Z=/Edge\/(\d+)/.exec(G.userAgent),X=/MSIE \d/.test(G.userAgent),q=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(G.userAgent),Y=!!(X||q||Z),$=!Y&&/gecko\/(\d+)/i.test(G.userAgent),Q=!Y&&/Chrome\/(\d+)/.exec(G.userAgent),J="webkitFontSmoothing"in K.documentElement.style,ee=!Y&&/Apple Computer/.test(G.vendor),te=ee&&(/Mobile\/\w+/.test(G.userAgent)||G.maxTouchPoints>2);var ne={mac:te||/Mac/.test(G.platform),windows:/Win/.test(G.platform),linux:/Linux|X11/.test(G.platform),ie:Y,ie_version:X?K.documentMode||6:q?+q[1]:Z?+Z[1]:0,gecko:$,gecko_version:$?+(/Firefox\/(\d+)/.exec(G.userAgent)||[0,0])[1]:0,chrome:!!Q,chrome_version:Q?+Q[1]:0,ios:te,android:/Android\b/.test(G.userAgent),webkit:J,safari:ee,webkit_version:J?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=K.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class re extends _{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,n){return!(8&this.flags||n&&(!(n instanceof re)||this.length-(t-e)+n.length>256||8&n.flags)||(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),0))}split(e){let t=new re(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=8&this.flags,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new P(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return function(e,t,n){let r=e.nodeValue.length;t>r&&(t=r);let o=t,i=t,l=0;0==t&&n<0||t==r&&n>=0?ne.chrome||ne.gecko||(t?(o--,l=1):i<r&&(i++,l=-1)):n<0?o--:i<r&&i++;let s=A(e,o,i).getClientRects();if(!s.length)return null;let a=s[(l?l<0:n>=0)?0:s.length-1];return ne.safari&&!l&&0==a.width&&(a=Array.prototype.find.call(s,e=>e.width)||a),l?T(a,l<0):a||null}(this.dom,e,t)}}class oe extends _{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let e of t)e.setParent(this)}setAttrs(e){if(I(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!(8&(this.flags|e.flags))}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,r,o,i){return!(n&&(!(n instanceof oe&&n.mark.eq(this.mark))||e&&o<=0||t<this.length&&i<=0)||(F(this,e,t,n?n.children:[],o-1,i-1),this.markDirty(),0))}split(e){let t=[],n=0,r=-1,o=0;for(let i of this.children){let l=n+i.length;l>e&&t.push(n<e?i.split(e-n):i),r<0&&n>=e&&(r=o),n=l,o++}let i=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new oe(this.mark,t,i)}domAtPos(e){return se(this,e)}coordsAt(e,t){return ce(this,e,t)}}class ie extends _{constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}static create(e,t,n){return new ie(e,t,n)}split(e){let t=ie.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,n,r,o,i){return!(n&&(!(n instanceof ie&&this.widget.compare(n.widget))||e>0&&o<=0||t<this.length&&i<=0)||(this.length=e+(n?n.length:0)+(this.length-t),0))}become(e){return e instanceof ie&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return r.Text.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,o=this.posAtStart;return n?n.slice(o,o+this.length):r.Text.empty}domAtPos(e){return(this.length?0==e:this.side>0)?P.before(this.dom):P.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let r=this.dom.getClientRects(),o=null;if(!r.length)return null;let i=this.side?this.side<0:e>0;for(let t=i?r.length-1:0;o=r[t],!(e>0?0==t:t==r.length-1||o.top<o.bottom);t+=i?-1:1);return T(o,!i)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class le extends _{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof le&&e.side==this.side}split(){return new le(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?P.before(this.dom):P.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return r.Text.empty}get isHidden(){return!0}}function se(e,t){let n=e.dom,{children:r}=e,o=0;for(let e=0;o<r.length;o++){let i=r[o],l=e+i.length;if(!(l==e&&i.getSide()<=0)){if(t>e&&t<l&&i.dom.parentNode==n)return i.domAtPos(t-e);if(t<=e)break;e=l}}for(let e=o;e>0;e--){let t=r[e-1];if(t.dom.parentNode==n)return t.domAtPos(t.length)}for(let e=o;e<r.length;e++){let t=r[e];if(t.dom.parentNode==n)return t.domAtPos(0)}return new P(n,0)}function ae(e,t,n){let r,{children:o}=e;n>0&&t instanceof oe&&o.length&&(r=o[o.length-1])instanceof oe&&r.mark.eq(t.mark)?ae(r,t.children[0],n-1):(o.push(t),t.setParent(e)),e.length+=t.length}function ce(e,t,n){let r=null,o=-1,i=null,l=-1;!function e(t,s){for(let a=0,c=0;a<t.children.length&&c<=s;a++){let u=t.children[a],h=c+u.length;h>=s&&(u.children.length?e(u,s-c):(!i||i.isHidden&&n>0)&&(h>s||c==h&&u.getSide()>0)?(i=u,l=s-c):(c<s||c==h&&u.getSide()<0&&!u.isHidden)&&(r=u,o=s-c)),c=h}}(e,t);let s=(n<0?r:i)||r||i;return s?s.coordsAt(Math.max(0,s==r?o:l),n):function(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let n=b(t);return n[n.length-1]||null}(e)}function ue(e,t){for(let n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}re.prototype.children=ie.prototype.children=le.prototype.children=H;const he=Object.create(null);function de(e,t,n){if(e==t)return!0;e||(e=he),t||(t=he);let r=Object.keys(e),o=Object.keys(t);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=o.length-(n&&o.indexOf(n)>-1?1:0))return!1;for(let i of r)if(i!=n&&(-1==o.indexOf(i)||e[i]!==t[i]))return!1;return!0}function pe(e,t,n){let r=null;if(t)for(let o in t)n&&o in n||e.removeAttribute(r=o);if(n)for(let o in n)t&&t[o]==n[o]||e.setAttribute(r=o,n[o]);return!!r}function fe(e){let t=Object.create(null);for(let n=0;n<e.attributes.length;n++){let r=e.attributes[n];t[r.name]=r.value}return t}class ge{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}destroy(e){}}var me=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(me||(me={}));class ve extends r.RangeValue{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new ye(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Ce(e,t,t,n,e.widget||null,!1)}static replace(e){let t,n,r=!!e.block;if(e.isBlockGap)t=-5e8,n=4e8;else{let{start:o,end:i}=we(e,r);t=(o?r?-3e8:-1:5e8)-1,n=1+(i?r?2e8:1:-6e8)}return new Ce(e,t,n,r,e.widget||null,!0)}static line(e){return new be(e)}static set(e,t=!1){return r.RangeSet.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}ve.none=r.RangeSet.empty;class ye extends ve{constructor(e){let{start:t,end:n}=we(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof ye&&this.tagName==e.tagName&&(this.class||(null===(t=this.attrs)||void 0===t?void 0:t.class))==(e.class||(null===(n=e.attrs)||void 0===n?void 0:n.class))&&de(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}ye.prototype.point=!1;class be extends ve{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof be&&this.spec.class==e.spec.class&&de(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}be.prototype.mapMode=r.MapMode.TrackBefore,be.prototype.point=!0;class Ce extends ve{constructor(e,t,n,o,i,l){super(t,n,i,e),this.block=o,this.isReplace=l,this.mapMode=o?t<=0?r.MapMode.TrackBefore:r.MapMode.TrackAfter:r.MapMode.TrackDel}get type(){return this.startSide<this.endSide?me.WidgetRange:this.startSide<=0?me.WidgetBefore:me.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Ce&&((t=this.widget)==(n=e.widget)||!!(t&&n&&t.compare(n)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide;var t,n}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function we(e,t=!1){let{inclusiveStart:n,inclusiveEnd:r}=e;return null==n&&(n=e.inclusive),null==r&&(r=e.inclusive),{start:null!=n?n:t,end:null!=r?r:t}}function Se(e,t,n,r=0){let o=n.length-1;o>=0&&n[o]+r>=e?n[o]=Math.max(n[o],t):n.push(e,t)}Ce.prototype.point=!0;class Re extends _{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,r,o,i){if(n){if(!(n instanceof Re))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),F(this,e,t,n?n.children:[],o,i),!0}split(e){let t=new Re;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:n,off:r}=this.childPos(e);r&&(t.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let e=n;e<this.children.length;e++)t.append(this.children[e],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){de(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){ae(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=ue(t,this.attrs||{})),n&&(this.attrs=ue({class:n},this.attrs||{}))}domAtPos(e){return se(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?4&this.flags&&(I(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(pe(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&_.get(r)instanceof oe;)r=r.lastChild;if(!(r&&this.length&&("BR"==r.nodeName||0!=(null===(n=_.get(r))||void 0===n?void 0:n.isEditable)||ne.ios&&this.children.some(e=>e instanceof re)))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e,t=0;for(let n of this.children){if(!(n instanceof re)||/[^ -~]/.test(n.text))return null;let r=b(n.dom);if(1!=r.length)return null;t+=r[0].width,e=r[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null}coordsAt(e,t){let n=ce(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:e}=this.parent.view.viewState,t=n.bottom-n.top;if(Math.abs(t-e.lineHeight)<2&&e.textHeight<t){let r=(t-e.textHeight)/2;return{top:n.top+r,bottom:n.bottom-r,left:n.left,right:n.left}}}return n}become(e){return!1}get type(){return me.Text}static find(e,t){for(let n=0,r=0;n<e.children.length;n++){let o=e.children[n],i=r+o.length;if(i>=t){if(o instanceof Re)return o;if(i>t)break}r=i+o.breakAfter}return null}}class Te extends _{constructor(e,t,n){super(),this.widget=e,this.length=t,this.type=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,r,o,i){return!(n&&(!(n instanceof Te&&this.widget.compare(n.widget))||e>0&&o<=0||t<this.length&&i<=0)||(this.length=e+(n?n.length:0)+(this.length-t),0))}domAtPos(e){return 0==e?P.before(this.dom):P.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new Te(this.widget,t,this.type);return n.breakAfter=this.breakAfter,n}get children(){return H}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):r.Text.empty}domBoundsAround(){return null}become(e){return e instanceof Te&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Ee{constructor(e,t,n,r){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Te&&e.type==me.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new Re),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(De(new le(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:n,done:r}=this.cursor.next(this.skip);if(this.skip=0,r)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=t,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(De(new re(this.text.slice(this.textOff,this.textOff+r)),t),n),this.atCursorPos=!0,this.textOff+=r,e-=r,n=0}}span(e,t,n,r){this.buildText(t-e,n,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,n,r,o,i){if(this.disallowBlockEffectsFor[i]&&n instanceof Ce){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(n instanceof Ce)if(n.block){let{type:e}=n;e!=me.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new Te(n.widget||new ke("div"),l,e))}else{let i=ie.create(n.widget||new ke("span"),l,l?0:n.startSide),s=this.atCursorPos&&!i.isEditable&&o<=r.length&&(e<t||n.startSide>0),a=!i.isEditable&&(e<t||o>r.length||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||s||i.isEditable||(this.pendingBuffer=0),this.flushBuffer(r),s&&(c.append(De(new le(1),r),o),o=r.length+Math.max(0,o-r.length)),c.append(De(i,r),o),this.atCursorPos=a,this.pendingBuffer=a?e<t||o>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,n,o,i){let l=new Ee(e,t,n,i);return l.openEnd=r.RangeSet.spans(o,t,n,l),l.openStart<0&&(l.openStart=l.openEnd),l.finish(l.openEnd),l}}function De(e,t){for(let n of t)e=new oe(n,[e],e.length);return e}class ke extends ge{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const Oe=r.Facet.define(),xe=r.Facet.define(),Ae=r.Facet.define(),Le=r.Facet.define(),Ie=r.Facet.define(),Me=r.Facet.define(),Pe=r.Facet.define(),He=r.Facet.define({combine:e=>e.some(e=>e)}),_e=r.Facet.define({combine:e=>e.some(e=>e)});class Ne{constructor(e,t="nearest",n="nearest",r=5,o=5){this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=o}map(e){return e.empty?this:new Ne(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const ze=r.StateEffect.define({map:(e,t)=>e.map(t)});function Be(e,t,n){let r=e.facet(Le);r.length?r[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}const Fe=r.Facet.define({combine:e=>!e.length||e[0]});let We=0;const je=r.Facet.define();class Ve{constructor(e,t,n,r){this.id=e,this.create=t,this.domEventHandlers=n,this.extension=r(this)}static define(e,t){const{eventHandlers:n,provide:r,decorations:o}=t||{};return new Ve(We++,e,n,e=>{let t=[je.of(e)];return o&&t.push(Ze.of(t=>{let n=t.plugin(e);return n?o(n):ve.none})),r&&t.push(r(e)),t})}static fromClass(e,t){return Ve.define(t=>new e(t),t)}}class Ue{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(n){if(Be(t.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Be(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(t){Be(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Ge=r.Facet.define(),Ke=r.Facet.define(),Ze=r.Facet.define(),Xe=r.Facet.define(),qe=r.Facet.define();function Ye(e){let t=0,n=0,r=0,o=0;for(let i of e.state.facet(qe)){let l=i(e);l&&(null!=l.left&&(t=Math.max(t,l.left)),null!=l.right&&(n=Math.max(n,l.right)),null!=l.top&&(r=Math.max(r,l.top)),null!=l.bottom&&(o=Math.max(o,l.bottom)))}return{left:t,right:n,top:r,bottom:o}}const $e=r.Facet.define();class Qe{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new Qe(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(0==t.length)return e;let n=[];for(let r=0,o=0,i=0,l=0;;r++){let s=r==e.length?null:e[r],a=i-l,c=s?s.fromB:1e9;for(;o<t.length&&t[o]<c;){let e=t[o],r=t[o+1],i=Math.max(l,e),s=Math.min(c,r);if(i<=s&&new Qe(i+a,s+a,i,s).addToSet(n),r>c)break;o+=2}if(!s)return n;new Qe(s.fromA,s.toA,s.fromB,s.toB).addToSet(n),i=s.toA,l=s.toB}}}class Je{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=r.ChangeSet.empty(this.startState.doc.length);for(let e of n)this.changes=this.changes.compose(e.changes);let o=[];this.changes.iterChangedRanges((e,t,n,r)=>o.push(new Qe(e,t,n,r))),this.changedRanges=o}static create(e,t,n){return new Je(e,t,n)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}var et=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(et||(et={}));const tt=et.LTR,nt=et.RTL;function rt(e){let t=[];for(let n=0;n<e.length;n++)t.push(1<<+e[n]);return t}const ot=rt("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),it=rt("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),lt=Object.create(null),st=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),n=e.charCodeAt(1);lt[t]=n,lt[n]=-t}const at=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ct{constructor(e,t,n){this.from=e,this.to=t,this.level=n}get dir(){return this.level%2?nt:tt}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,n,r){let o=-1;for(let i=0;i<e.length;i++){let l=e[i];if(l.from<=t&&l.to>=t){if(l.level==n)return i;(o<0||(0!=r?r<0?l.from<t:l.to>t:e[o].level>l.level))&&(o=i)}}if(o<0)throw new RangeError("Index out of range");return o}}const ut=[];function ht(e,t){let n=e.length,r=t==tt?1:2,o=t==tt?2:1;if(!e||1==r&&!at.test(e))return dt(n);for(let t=0,o=r,l=r;t<n;t++){let n=(i=e.charCodeAt(t))<=247?ot[i]:1424<=i&&i<=1524?2:1536<=i&&i<=1785?it[i-1536]:1774<=i&&i<=2220?4:8192<=i&&i<=8203?256:64336<=i&&i<=65023?4:8204==i?256:1;512==n?n=o:8==n&&4==l&&(n=16),ut[t]=4==n?2:n,7&n&&(l=n),o=n}var i;for(let e=0,t=r,o=r;e<n;e++){let r=ut[e];if(128==r)e<n-1&&t==ut[e+1]&&24&t?r=ut[e]=t:ut[e]=256;else if(64==r){let r=e+1;for(;r<n&&64==ut[r];)r++;let i=e&&8==t||r<n&&8==ut[r]?1==o?1:8:256;for(let t=e;t<r;t++)ut[t]=i;e=r-1}else 8==r&&1==o&&(ut[e]=1);t=r,7&r&&(o=r)}for(let t,i,l,s=0,a=0,c=0;s<n;s++)if(i=lt[t=e.charCodeAt(s)])if(i<0){for(let e=a-3;e>=0;e-=3)if(st[e+1]==-i){let t=st[e+2],n=2&t?r:4&t?1&t?o:r:0;n&&(ut[s]=ut[st[e]]=n),a=e;break}}else{if(189==st.length)break;st[a++]=s,st[a++]=t,st[a++]=c}else if(2==(l=ut[s])||1==l){let e=l==r;c=e?0:1;for(let t=a-3;t>=0;t-=3){let n=st[t+2];if(2&n)break;if(e)st[t+2]|=2;else{if(4&n)break;st[t+2]|=4}}}for(let e=0;e<n;e++)if(256==ut[e]){let t=e+1;for(;t<n&&256==ut[t];)t++;let o=1==(e?ut[e-1]:r),i=o==(1==(t<n?ut[t]:r))?o?1:2:r;for(let n=e;n<t;n++)ut[n]=i;e=t-1}let l=[];if(1==r)for(let e=0;e<n;){let t=e,r=1!=ut[e++];for(;e<n&&r==(1!=ut[e]);)e++;if(r)for(let n=e;n>t;){let e=n,r=2!=ut[--n];for(;n>t&&r==(2!=ut[n-1]);)n--;l.push(new ct(n,e,r?2:1))}else l.push(new ct(t,e,0))}else for(let e=0;e<n;){let t=e,r=2==ut[e++];for(;e<n&&r==(2==ut[e]);)e++;l.push(new ct(t,e,r?1:2))}return l}function dt(e){return[new ct(0,e,0)]}let pt="";function ft(e,t,n,o,i){var l;let s=o.head-e.from,a=-1;if(0==s){if(!i||!e.length)return null;t[0].level!=n&&(s=t[0].side(!1,n),a=0)}else if(s==e.length){if(i)return null;let e=t[t.length-1];e.level!=n&&(s=e.side(!0,n),a=t.length-1)}a<0&&(a=ct.find(t,s,null!==(l=o.bidiLevel)&&void 0!==l?l:-1,o.assoc));let c=t[a];s==c.side(i,n)&&(c=t[a+=i?1:-1],s=c.side(!i,n));let u=i==(c.dir==n),h=(0,r.findClusterBreak)(e.text,s,u);if(pt=e.text.slice(Math.min(s,h),Math.max(s,h)),h!=c.side(i,n))return r.EditorSelection.cursor(h+e.from,u?-1:1,c.level);let d=a==(i?t.length-1:0)?null:t[a+(i?1:-1)];return d||c.level==n?d&&d.level<c.level?r.EditorSelection.cursor(d.side(!i,n)+e.from,i?1:-1,d.level):r.EditorSelection.cursor(h+e.from,i?-1:1,c.level):r.EditorSelection.cursor(i?e.to:e.from,i?-1:1,n)}class gt extends _{constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Re],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Qe(0,0,0,e.state.doc.length)],0,null)}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let n=this.view.inputState.composing<0?null:function(e,t){let n=vt(e);if(!n)return null;let{from:r,to:o,node:i}=n,l=t.mapPos(r,-1),s=t.mapPos(o,1),a=i.nodeValue;if(/[\n\r]/.test(a))return null;if(s-l!=a.length){let n=t.mapPos(r,1),i=t.mapPos(o,-1);if(i-n==a.length)l=n,s=i;else if(e.state.doc.sliceString(s-a.length,s)==a)l=s-a.length;else{if(e.state.doc.sliceString(l,l+a.length)!=a)return null;s=l+a.length}}let{main:c}=e.state.selection;if(e.state.doc.sliceString(l,s)!=a||l>c.head||s<c.head)return null;let u=[],h=new Qe(r,o,l,s);for(let t=i.parentNode;;t=t.parentNode){let n=_.get(t);if(n instanceof oe)u.push({node:t,deco:n.mark});else{if(n instanceof Re||"DIV"==t.nodeName&&t.parentNode==e.contentDOM)return{range:h,text:i,marks:u,line:t};if(t==e.contentDOM)return null;u.push({node:t,deco:new ye({inclusive:!0,attributes:fe(t),tagName:t.tagName.toLowerCase()})})}}}(this.view,e.changes);if(this.hasComposition){this.markedForComposition.clear();let{from:n,to:r}=this.hasComposition;t=new Qe(n,r,e.changes.mapPos(n,-1),e.changes.mapPos(r,1)).addToSet(t.slice())}this.hasComposition=n?{from:n.range.fromB,to:n.range.toB}:null,(ne.ie||ne.chrome)&&!n&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=function(e,t,n){let o=new bt;return r.RangeSet.compare(e,t,n,o),o.changes}(this.decorations,this.updateDeco(),e.changes);return t=Qe.extendWithRanges(t,o),!!(7&this.flags||0!=t.length)&&(this.updateInner(t,e.startState.doc.length,n),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=ne.chrome||ne.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e),this.flags&=-8,e&&(e.written||r.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(e=>e.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof Te&&e.widget instanceof mt&&o.push(e.dom);r.updateGaps(o)}updateChildren(e,t,n){let r=n?n.range.addToSet(e.slice()):e,o=this.childCursor(t);for(let e=r.length-1;;e--){let t=e>=0?r[e]:null;if(!t)break;let i,l,s,a,{fromA:c,toA:u,fromB:h,toB:d}=t;if(n&&n.range.fromB<d&&n.range.toB>h){let e=Ee.build(this.view.state.doc,h,n.range.fromB,this.decorations,this.dynamicDecorationMap),t=Ee.build(this.view.state.doc,n.range.toB,d,this.decorations,this.dynamicDecorationMap);l=e.breakAtStart,s=e.openStart,a=t.openEnd;let r=this.compositionView(n);t.breakAtStart?r.breakAfter=1:t.content.length&&r.merge(r.length,r.length,t.content[0],!1,t.openStart,0)&&(r.breakAfter=t.content[0].breakAfter,t.content.shift()),e.content.length&&r.merge(0,0,e.content[e.content.length-1],!0,0,e.openEnd)&&e.content.pop(),i=e.content.concat(r).concat(t.content)}else({content:i,breakAtStart:l,openStart:s,openEnd:a}=Ee.build(this.view.state.doc,h,d,this.decorations,this.dynamicDecorationMap));let{i:p,off:f}=o.findPos(u,1),{i:g,off:m}=o.findPos(c,-1);B(this,g,m,p,f,i,l,s,a)}n&&this.fixCompositionDOM(n)}compositionView(e){let t=new re(e.text.nodeValue);t.flags|=8;for(let{deco:n}of e.marks)t=new oe(n,[t],t.length);let n=new Re;return n.append(t,0),n}fixCompositionDOM(e){let t=(e,t)=>{t.flags|=8,this.markedForComposition.add(t);let n=_.get(e);n!=t&&(n&&(n.dom=null),t.setDOM(e))},n=this.childPos(e.range.fromB,1),r=this.children[n.i];t(e.line,r);for(let o=e.marks.length-1;o>=-1;o--)n=r.childPos(n.off,1),r=r.children[n.i],t(o>=0?e.marks[o].node:e.text,r)}updateSelection(e=!1,t=!1){!e&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let n=this.view.root.activeElement,r=n==this.dom,o=!r&&y(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(r||t||o))return;let i=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,s=this.domAtPos(l.anchor),a=l.empty?s:this.domAtPos(l.head);if(ne.gecko&&l.empty&&!this.hasComposition&&1==(c=s).node.nodeType&&c.node.firstChild&&(0==c.offset||"false"==c.node.childNodes[c.offset-1].contentEditable)&&(c.offset==c.node.childNodes.length||"false"==c.node.childNodes[c.offset].contentEditable)){let e=document.createTextNode("");this.view.observer.ignore(()=>s.node.insertBefore(e,s.node.childNodes[s.offset]||null)),s=a=new P(e,0),i=!0}var c;let u=this.view.observer.selectionRange;!i&&u.focusNode&&C(s.node,s.offset,u.anchorNode,u.anchorOffset)&&C(a.node,a.offset,u.focusNode,u.focusOffset)||(this.view.observer.ignore(()=>{ne.android&&ne.chrome&&this.dom.contains(u.focusNode)&&function(e,t){for(let n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=m(this.view.root);if(e)if(l.empty){if(ne.gecko){let e=(t=s.node,r=s.offset,1!=t.nodeType?0:(r&&"false"==t.childNodes[r-1].contentEditable?1:0)|(r<t.childNodes.length&&"false"==t.childNodes[r].contentEditable?2:0));if(e&&3!=e){let t=yt(s.node,s.offset,1==e?1:-1);t&&(s=new P(t,1==e?0:t.nodeValue.length))}}e.collapse(s.node,s.offset),null!=l.bidiLevel&&null!=u.cursorBidiLevel&&(u.cursorBidiLevel=l.bidiLevel)}else if(e.extend){e.collapse(s.node,s.offset);try{e.extend(a.node,a.offset)}catch(e){}}else{let t=document.createRange();l.anchor>l.head&&([s,a]=[a,s]),t.setEnd(a.node,a.offset),t.setStart(s.node,s.offset),e.removeAllRanges(),e.addRange(t)}var t,r;o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(s,a)),this.impreciseAnchor=s.precise?null:new P(u.anchorNode,u.anchorOffset),this.impreciseHead=a.precise?null:new P(u.focusNode,u.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=m(e.root),{anchorNode:r,anchorOffset:o}=e.observer.selectionRange;if(!(n&&t.empty&&t.assoc&&n.modify))return;let i=Re.find(this,t.head);if(!i)return;let l=i.posAtStart;if(t.head==l||t.head==l+i.length)return;let s=this.coordsAt(t.head,-1),a=this.coordsAt(t.head,1);if(!s||!a||s.bottom>a.top)return;let c=this.domAtPos(t.head+t.assoc);n.collapse(c.node,c.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&n.collapse(r,o)}nearest(e){for(let t=e;t;){let e=_.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(n<e.length||e instanceof Re)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){for(let n=this.length,r=this.children.length-1;;r--){let o=this.children[r],i=n-o.breakAfter-o.length;if(e>i||e==i&&o.type!=me.WidgetBefore&&o.type!=me.WidgetAfter&&(!r||2==t||this.children[r-1].breakAfter||this.children[r-1].type==me.WidgetBefore&&t>-2))return o.coordsAt(e-i,t);n=i}}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),o=this.children[t];if(!(o instanceof Re))return null;for(;o.children.length;){let{i:e,off:t}=o.childPos(n,1);for(;;e++){if(e==o.children.length)return null;if((o=o.children[e]).length)break}n=t}if(!(o instanceof re))return null;let i=(0,r.findClusterBreak)(o.text,n);if(i==n)return null;let l=A(o.dom,n,i).getClientRects();return!l.length||l[0].top>=l[0].bottom?null:l[0]}measureVisibleLineHeights(e){let t=[],{from:n,to:r}=e,o=this.view.contentDOM.clientWidth,i=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,s=this.view.textDirection==et.LTR;for(let e=0,a=0;a<this.children.length;a++){let c=this.children[a],u=e+c.length;if(u>r)break;if(e>=n){let n=c.dom.getBoundingClientRect();if(t.push(n.height),i){let t=c.dom.lastChild,r=t?b(t):[];if(r.length){let t=r[r.length-1],i=s?t.right-n.left:n.right-t.left;i>l&&(l=i,this.minWidth=o,this.minWidthFrom=e,this.minWidthTo=u)}}}e=u+c.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?et.RTL:et.LTR}measureTextSize(){for(let e of this.children)if(e instanceof Re){let t=e.measureTextSize();if(t)return t}let e,t,n,r=document.createElement("div");return r.className="cm-line",r.style.width="99999px",r.style.position="absolute",r.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(r);let o=b(r.firstChild)[0];e=r.getBoundingClientRect().height,t=o?o.width/27:7,n=o?o.height:e,r.remove()}),{lineHeight:e,charWidth:t,textHeight:n}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new z(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let o=r==t.viewports.length?null:t.viewports[r],i=o?o.from-1:this.length;if(i>n){let r=t.lineBlockAt(i).bottom-t.lineBlockAt(n).top;e.push(ve.replace({widget:new mt(r),block:!0,inclusive:!0,isBlockGap:!0}).range(n,i))}if(!o)break;n=o.to+1}return ve.set(e)}updateDeco(){let e=this.view.state.facet(Ze).map((e,t)=>(this.dynamicDecorationMap[t]="function"==typeof e)?e(this.view):e);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let t,{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!r)return;!n.empty&&(t=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,t.left),top:Math.min(r.top,t.top),right:Math.max(r.right,t.right),bottom:Math.max(r.bottom,t.bottom)});let o=Ye(this.view),i={left:r.left-o.left,top:r.top-o.top,right:r.right+o.right,bottom:r.bottom+o.bottom};!function(e,t,n,r,o,i,l,s){let a=e.ownerDocument,c=a.defaultView||window;for(let u=e,h=!1;u&&!h;)if(1==u.nodeType){let e,d=u==a.body;if(d)e=E(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(h=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let t=u.getBoundingClientRect();e={left:t.left,right:t.left+u.clientWidth,top:t.top,bottom:t.top+u.clientHeight}}let p=0,f=0;if("nearest"==o)t.top<e.top?(f=-(e.top-t.top+l),n>0&&t.bottom>e.bottom+f&&(f=t.bottom-e.bottom+f+l)):t.bottom>e.bottom&&(f=t.bottom-e.bottom+l,n<0&&t.top-f<e.top&&(f=-(e.top+f-t.top+l)));else{let r=t.bottom-t.top,i=e.bottom-e.top;f=("center"==o&&r<=i?t.top+r/2-i/2:"start"==o||"center"==o&&n<0?t.top-l:t.bottom-i+l)-e.top}if("nearest"==r?t.left<e.left?(p=-(e.left-t.left+i),n>0&&t.right>e.right+p&&(p=t.right-e.right+p+i)):t.right>e.right&&(p=t.right-e.right+i,n<0&&t.left<e.left+p&&(p=-(e.left+p-t.left+i))):p=("center"==r?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==r==s?t.left-i:t.right-(e.right-e.left)+i)-e.left,p||f)if(d)c.scrollBy(p,f);else{let e=0,n=0;if(f){let e=u.scrollTop;u.scrollTop+=f,n=u.scrollTop-e}if(p){let t=u.scrollLeft;u.scrollLeft+=p,e=u.scrollLeft-t}t={left:t.left-e,top:t.top-n,right:t.right-e,bottom:t.bottom-n},e&&Math.abs(e-p)<1&&(r="nearest"),n&&Math.abs(n-f)<1&&(o="nearest")}if(d)break;u=u.assignedSlot||u.parentNode}else{if(11!=u.nodeType)break;u=u.host}}(this.view.scrollDOM,i,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==et.LTR)}}class mt extends ge{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function vt(e){let t=e.observer.selectionRange,n=t.focusNode&&yt(t.focusNode,t.focusOffset,0);if(!n)return null;let r,o,i=_.get(n);if(i instanceof re)r=i.posAtStart,o=r+i.length;else e:for(let t=0,i=n;;){for(let n,l=i.previousSibling;l;l=l.previousSibling){if(n=_.get(l)){r=o=n.posAtEnd+t;break e}let i=new j([],e.state);if(i.readNode(l),i.text.indexOf(W)>-1)return null;t+=i.text.length}if(i=i.parentNode,!i)return null;let n=_.get(i);if(n){r=o=n.posAtStart+t;break}}return{from:r,to:o,node:n}}function yt(e,t,n){if(n<=0)for(let n=e,r=t;;){if(3==n.nodeType)return n;if(!(1==n.nodeType&&r>0))break;n=n.childNodes[r-1],r=R(n)}if(n>=0)for(let r=e,o=t;;){if(3==r.nodeType)return r;if(!(1==r.nodeType&&o<r.childNodes.length&&n>=0))break;r=r.childNodes[o],o=0}return null}class bt{constructor(){this.changes=[]}compareRange(e,t){Se(e,t,this.changes)}comparePoint(e,t){Se(e,t,this.changes)}}function Ct(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function wt(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function St(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function Rt(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function Tt(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function Et(e,t,n){let r,o,i,l,s,a,c,u,h=!1;for(let d=e.firstChild;d;d=d.nextSibling){let e=b(d);for(let p=0;p<e.length;p++){let f=e[p];o&&St(o,f)&&(f=Rt(Tt(f,o.bottom),o.top));let g=Ct(t,f),m=wt(n,f);if(0==g&&0==m)return 3==d.nodeType?Dt(d,t,n):Et(d,t,n);if(!r||l>m||l==m&&i>g){r=d,o=f,i=g,l=m;let s=m?n<f.top?-1:1:g?t<f.left?-1:1:0;h=!s||(s>0?p<e.length-1:p>0)}0==g?n>f.bottom&&(!c||c.bottom<f.bottom)?(s=d,c=f):n<f.top&&(!u||u.top>f.top)&&(a=d,u=f):c&&St(c,f)?c=Tt(c,f.bottom):u&&St(u,f)&&(u=Rt(u,f.top))}}if(c&&c.bottom>=n?(r=s,o=c):u&&u.top<=n&&(r=a,o=u),!r)return{node:e,offset:0};let d=Math.max(o.left,Math.min(o.right,t));return 3==r.nodeType?Dt(r,d,n):h&&"false"!=r.contentEditable?Et(r,d,n):{node:e,offset:Array.prototype.indexOf.call(e.childNodes,r)+(t>=(o.left+o.right)/2?1:0)}}function Dt(e,t,n){let r=e.nodeValue.length,o=-1,i=1e9,l=0;for(let s=0;s<r;s++){let r=A(e,s,s+1).getClientRects();for(let a=0;a<r.length;a++){let c=r[a];if(c.top==c.bottom)continue;l||(l=t-c.left);let u=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=t&&c.right+1>=t&&u<i){let n=t>=(c.left+c.right)/2,r=n;if((ne.chrome||ne.gecko)&&A(e,s).getBoundingClientRect().left==c.right&&(r=!n),u<=0)return{node:e,offset:s+(r?1:0)};o=s+(r?1:0),i=u}}}return{node:e,offset:o>-1?o:l>0?e.nodeValue.length:0}}function kt(e,t,n,r=-1){var o,i;let l,s=e.contentDOM.getBoundingClientRect(),a=s.top+e.viewState.paddingTop,{docHeight:c}=e.viewState,{x:u,y:h}=t,d=h-a;if(d<0)return 0;if(d>c)return e.state.doc.length;for(let t=e.viewState.heightOracle.textHeight/2,o=!1;l=e.elementAtHeight(d),l.type!=me.Text;)for(;d=r>0?l.bottom+t:l.top-t,!(d>=0&&d<=c);){if(o)return n?null:0;o=!0,r=-r}h=a+d;let p=l.from;if(p<e.viewport.from)return 0==e.viewport.from?0:n?null:Ot(e,s,l,u,h);if(p>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:n?null:Ot(e,s,l,u,h);let f=e.dom.ownerDocument,g=e.root.elementFromPoint?e.root:f,m=g.elementFromPoint(u,h);m&&!e.contentDOM.contains(m)&&(m=null),m||(u=Math.max(s.left+1,Math.min(s.right-1,u)),m=g.elementFromPoint(u,h),m&&!e.contentDOM.contains(m)&&(m=null));let v,y=-1;if(m&&0!=(null===(o=e.docView.nearest(m))||void 0===o?void 0:o.isEditable))if(f.caretPositionFromPoint){let e=f.caretPositionFromPoint(u,h);e&&({offsetNode:v,offset:y}=e)}else if(f.caretRangeFromPoint){let t=f.caretRangeFromPoint(u,h);t&&(({startContainer:v,startOffset:y}=t),(!e.contentDOM.contains(v)||ne.safari&&function(e,t,n){let r;if(3!=e.nodeType||t!=(r=e.nodeValue.length))return!1;for(let t=e.nextSibling;t;t=t.nextSibling)if(1!=t.nodeType||"BR"!=t.nodeName)return!1;return A(e,r-1,r).getBoundingClientRect().left>n}(v,y,u)||ne.chrome&&function(e,t,n){if(0!=t)return!1;for(let t=e;;){let e=t.parentNode;if(!e||1!=e.nodeType||e.firstChild!=t)return!1;if(e.classList.contains("cm-line"))break;t=e}return n-(1==e.nodeType?e.getBoundingClientRect():A(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect()).left>5}(v,y,u))&&(v=void 0))}if(!v||!e.docView.dom.contains(v)){let t=Re.find(e.docView,p);if(!t)return d>l.top+l.height/2?l.to:l.from;({node:v,offset:y}=Et(t.dom,u,h))}let b=e.docView.nearest(v);if(!b)return null;if(b.isWidget&&1==(null===(i=b.dom)||void 0===i?void 0:i.nodeType)){let e=b.dom.getBoundingClientRect();return t.y<e.top||t.y<=e.bottom&&t.x<=(e.left+e.right)/2?b.posAtStart:b.posAtEnd}return b.localPosFromDOM(v,y)+b.posAtStart}function Ot(e,t,n,o,i){let l=Math.round((o-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&n.height>1.5*e.defaultLineHeight){let t=e.viewState.heightOracle.textHeight;l+=Math.floor((i-n.top-.5*(e.defaultLineHeight-t))/t)*e.viewState.heightOracle.lineLength}let s=e.state.sliceDoc(n.from,n.to);return n.from+(0,r.findColumn)(s,l,e.state.tabSize)}function xt(e,t){let n=e.lineBlockAt(t);if(Array.isArray(n.type))for(let e of n.type)if(e.to>t||e.to==t&&(e.to==n.to||e.type==me.Text))return e;return n}function At(e,t,n,o){let i=e.state.doc.lineAt(t.head),l=e.bidiSpans(i),s=e.textDirectionAt(i.from);for(let a=t,c=null;;){let t=ft(i,l,s,a,n),u=pt;if(!t){if(i.number==(n?e.state.doc.lines:1))return a;u="\n",i=e.state.doc.line(i.number+(n?1:-1)),l=e.bidiSpans(i),t=r.EditorSelection.cursor(n?i.from:i.to)}if(c){if(!c(u))return a}else{if(!o)return t;c=o(u)}a=t}}function Lt(e,t,n){for(;;){let r=0;for(let o of e)o.between(t-1,t+1,(e,o,i)=>{if(t>e&&t<o){let i=r||n||(t-e<o-t?-1:1);t=i<0?e:o,r=i}});if(!r)return t}}function It(e,t,n){let o=Lt(e.state.facet(Xe).map(t=>t(e)),n.from,t.head>n.from?-1:1);return o==n.from?n:r.EditorSelection.cursor(o,o<n.from?1:-1)}class Mt{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let t=(t,n)=>{this.ignoreDuringComposition(n)||"keydown"==n.type&&this.keydown(e,n)||(this.mustFlushObserver(n)&&e.observer.forceFlush(),this.runCustomHandlers(n.type,e,n)?n.preventDefault():t(e,n))};for(let n in Ft){let r=Ft[n];e.contentDOM.addEventListener(n,n=>{Bt(e,n)&&t(r,n)},Wt[n]),this.registeredEvents.push(n)}e.scrollDOM.addEventListener("mousedown",n=>{if(n.target==e.scrollDOM&&n.clientY>e.contentDOM.getBoundingClientRect().bottom&&(t(Ft.mousedown,n),!n.defaultPrevented&&2==n.button)){let t=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=t,200)}}),e.scrollDOM.addEventListener("drop",n=>{n.target==e.scrollDOM&&n.clientY>e.contentDOM.getBoundingClientRect().bottom&&t(Ft.drop,n)}),ne.chrome&&102==ne.chrome_version&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,ne.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var n;let r;this.customHandlers=[];for(let o of t)if(r=null===(n=o.update(e).spec)||void 0===n?void 0:n.domEventHandlers){this.customHandlers.push({plugin:o.value,handlers:r});for(let t in r)this.registeredEvents.indexOf(t)<0&&"scroll"!=t&&(this.registeredEvents.push(t),e.contentDOM.addEventListener(t,n=>{Bt(e,n)&&this.runCustomHandlers(t,e,n)&&n.preventDefault()}))}}runCustomHandlers(e,t,n){for(let r of this.customHandlers){let o=r.handlers[e];if(o)try{if(o.call(r.plugin,n,t)||n.defaultPrevented)return!0}catch(e){Be(t.state,e)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let n of this.customHandlers){let r=n.handlers.scroll;if(r)try{r.call(n.plugin,t,e)}catch(t){Be(e.state,t)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(27!=t.keyCode&&_t.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0),ne.android&&ne.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let n;return!(!ne.ios||t.synthetic||t.altKey||t.metaKey||!((n=Pt.find(e=>e.keyCode==t.keyCode))&&!t.ctrlKey||Ht.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)||(this.pendingIOSKey=n||t,setTimeout(()=>this.flushIOSKey(e),250),0))}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,L(e.contentDOM,t.key,t.keyCode))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(ne.safari&&!ne.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}mustFlushObserver(e){return"keydown"==e.type&&229!=e.keyCode}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const Pt=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Ht="dthko",_t=[16,17,18,20,91,92,224,225];function Nt(e){return.7*Math.max(0,e)+8}class zt{constructor(e,t,n,o){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=o,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=function(e){let t=e.ownerDocument;for(let n=e.parentNode;n&&n!=t.body;)if(1==n.nodeType){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else{if(11!=n.nodeType)break;n=n.host}return null}(e.contentDOM),this.atoms=e.state.facet(Xe).map(t=>t(e));let i=e.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(r.EditorState.allowMultipleSelections)&&function(e,t){let n=e.state.facet(Oe);return n.length?n[0](t):ne.mac?t.metaKey:t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:n}=e.state.selection;if(n.empty)return!1;let r=m(e.root);if(!r||0==r.rangeCount)return!0;let o=r.getRangeAt(0).getClientRects();for(let e=0;e<o.length;e++){let n=o[e];if(n.left<=t.clientX&&n.right>=t.clientX&&n.top<=t.clientY&&n.bottom>=t.clientY)return!0}return!1}(e,t)||1!=Jt(t))&&null}start(e){!1===this.dragging&&(e.preventDefault(),this.select(e))}move(e){var t,n,r;if(0==e.buttons)return this.destroy();if(this.dragging||null==this.dragging&&(n=this.startEvent,r=e,Math.max(Math.abs(n.clientX-r.clientX),Math.abs(n.clientY-r.clientY))<10))return;this.select(this.lastEvent=e);let o=0,i=0,l=(null===(t=this.scrollParent)||void 0===t?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},s=Ye(this.view);e.clientX-s.left<=l.left+6?o=-Nt(l.left-e.clientX):e.clientX+s.right>=l.right-6&&(o=Nt(e.clientX-l.right)),e.clientY-s.top<=l.top+6?i=-Nt(l.top-e.clientY):e.clientY+s.bottom>=l.bottom-6&&(i=Nt(e.clientY-l.bottom)),this.setScrollSpeed(o,i)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let o=e.ranges[n],i=null;if(o.empty){let e=Lt(this.atoms,o.from,0);e!=o.from&&(i=r.EditorSelection.cursor(e,-1))}else{let e=Lt(this.atoms,o.from,-1),t=Lt(this.atoms,o.to,1);e==o.from&&t==o.to||(i=r.EditorSelection.range(o.from==o.anchor?e:t,o.from==o.head?e:t))}i&&(t||(t=e.ranges.slice()),t[n]=i)}return t?r.EditorSelection.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(t.state.selection)||n.main.assoc!=t.state.selection.main.assoc&&!1===this.dragging)&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Bt(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n,r=t.target;r!=e.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=_.get(r))&&n.ignoreEvent(t))return!1;return!0}const Ft=Object.create(null),Wt=Object.create(null),jt=ne.ie&&ne.ie_version<15||ne.ios&&ne.webkit_version<604;function Vt(e,t){let n,{state:o}=e,i=1,l=o.toText(t),s=l.lines==o.selection.ranges.length;if(null!=tn&&o.selection.ranges.every(e=>e.empty)&&tn==l.toString()){let e=-1;n=o.changeByRange(n=>{let a=o.doc.lineAt(n.from);if(a.from==e)return{range:n};e=a.from;let c=o.toText((s?l.line(i++).text:t)+o.lineBreak);return{changes:{from:a.from,insert:c},range:r.EditorSelection.cursor(n.from+c.length)}})}else n=s?o.changeByRange(e=>{let t=l.line(i++);return{changes:{from:e.from,to:e.to,insert:t.text},range:r.EditorSelection.cursor(e.from+t.length)}}):o.replaceSelection(l);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function Ut(e,t,n,o){if(1==o)return r.EditorSelection.cursor(t,n);if(2==o)return function(e,t,n=1){let o=e.charCategorizer(t),i=e.doc.lineAt(t),l=t-i.from;if(0==i.length)return r.EditorSelection.cursor(t);0==l?n=1:l==i.length&&(n=-1);let s=l,a=l;n<0?s=(0,r.findClusterBreak)(i.text,l,!1):a=(0,r.findClusterBreak)(i.text,l);let c=o(i.text.slice(s,a));for(;s>0;){let e=(0,r.findClusterBreak)(i.text,s,!1);if(o(i.text.slice(e,s))!=c)break;s=e}for(;a<i.length;){let e=(0,r.findClusterBreak)(i.text,a);if(o(i.text.slice(a,e))!=c)break;a=e}return r.EditorSelection.range(s+i.from,a+i.from)}(e.state,t,n);{let n=Re.find(e.docView,t),o=e.state.doc.lineAt(n?n.posAtEnd:t),i=n?n.posAtStart:o.from,l=n?n.posAtEnd:o.to;return l<e.state.doc.length&&l==o.to&&l++,r.EditorSelection.range(i,l)}}Ft.keydown=(e,t)=>{e.inputState.setSelectionOrigin("select"),27==t.keyCode&&(e.inputState.lastEscPress=Date.now())},Ft.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},Ft.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},Wt.touchstart=Wt.touchmove={passive:!0},Ft.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let r of e.state.facet(Ae))if(n=r(e,t),n)break;if(n||0!=t.button||(n=function(e,t){let n=Xt(e,t),o=Jt(t),i=e.state.selection;return{update(e){e.docChanged&&(n.pos=e.changes.mapPos(n.pos),i=i.map(e.changes))},get(t,l,s){let a,c=Xt(e,t),u=Ut(e,c.pos,c.bias,o);if(n.pos!=c.pos&&!l){let t=Ut(e,n.pos,n.bias,o),i=Math.min(t.from,u.from),l=Math.max(t.to,u.to);u=i<u.from?r.EditorSelection.range(i,l):r.EditorSelection.range(l,i)}return l?i.replaceRange(i.main.extend(u.from,u.to)):s&&1==o&&i.ranges.length>1&&(a=function(e,t){for(let n=0;n<e.ranges.length;n++){let{from:o,to:i}=e.ranges[n];if(o<=t&&i>=t)return r.EditorSelection.create(e.ranges.slice(0,n).concat(e.ranges.slice(n+1)),e.mainIndex==n?0:e.mainIndex-(e.mainIndex>n?1:0))}return null}(i,c.pos))?a:s?i.addRange(u):r.EditorSelection.create([u])}}}(e,t)),n){let r=!e.hasFocus;e.inputState.startMouseSelection(new zt(e,t,n,r)),r&&e.observer.ignore(()=>x(e.contentDOM)),e.inputState.mouseSelection&&e.inputState.mouseSelection.start(t)}};let Gt=(e,t)=>e>=t.top&&e<=t.bottom,Kt=(e,t,n)=>Gt(t,n)&&e>=n.left&&e<=n.right;function Zt(e,t,n,r){let o=Re.find(e.docView,t);if(!o)return 1;let i=t-o.posAtStart;if(0==i)return 1;if(i==o.length)return-1;let l=o.coordsAt(i,-1);if(l&&Kt(n,r,l))return-1;let s=o.coordsAt(i,1);return s&&Kt(n,r,s)?1:l&&Gt(r,l)?-1:1}function Xt(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:Zt(e,n,t.clientX,t.clientY)}}const qt=ne.ie&&ne.ie_version<=11;let Yt=null,$t=0,Qt=0;function Jt(e){if(!qt)return e.detail;let t=Yt,n=Qt;return Yt=e,Qt=Date.now(),$t=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?($t+1)%3:1}function en(e,t,n,r){if(!n)return;let o=e.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:i}=e.inputState,l=r&&i&&i.dragging&&function(e,t){let n=e.state.facet(xe);return n.length?n[0](t):ne.mac?!t.altKey:!t.ctrlKey}(e,t)?{from:i.dragging.from,to:i.dragging.to}:null,s={from:o,insert:n},a=e.state.changes(l?[l,s]:s);e.focus(),e.dispatch({changes:a,selection:{anchor:a.mapPos(o,-1),head:a.mapPos(o,1)},userEvent:l?"move.drop":"input.drop"})}Ft.dragstart=(e,t)=>{let{selection:{main:n}}=e.state,{mouseSelection:r}=e.inputState;r&&(r.dragging=n),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(n.from,n.to)),t.dataTransfer.effectAllowed="copyMove")},Ft.drop=(e,t)=>{if(!t.dataTransfer)return;if(e.state.readOnly)return t.preventDefault();let n=t.dataTransfer.files;if(n&&n.length){t.preventDefault();let r=Array(n.length),o=0,i=()=>{++o==n.length&&en(e,t,r.filter(e=>null!=e).join(e.state.lineBreak),!1)};for(let e=0;e<n.length;e++){let t=new FileReader;t.onerror=i,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(r[e]=t.result),i()},t.readAsText(n[e])}}else en(e,t,t.dataTransfer.getData("Text"),!0)},Ft.paste=(e,t)=>{if(e.state.readOnly)return t.preventDefault();e.observer.flush();let n=jt?null:t.clipboardData;n?(Vt(e,n.getData("text/plain")||n.getData("text/uri-text")),t.preventDefault()):function(e){let t=e.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{e.focus(),n.remove(),Vt(e,n.value)},50)}(e)};let tn=null;Ft.copy=Ft.cut=(e,t)=>{let{text:n,ranges:r,linewise:o}=function(e){let t=[],n=[],r=!1;for(let r of e.selection.ranges)r.empty||(t.push(e.sliceDoc(r.from,r.to)),n.push(r));if(!t.length){let o=-1;for(let{from:r}of e.selection.ranges){let i=e.doc.lineAt(r);i.number>o&&(t.push(i.text),n.push({from:i.from,to:Math.min(e.doc.length,i.to+1)})),o=i.number}r=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:r}}(e.state);if(!n&&!o)return;tn=o?n:null;let i=jt?null:t.clipboardData;i?(t.preventDefault(),i.clearData(),i.setData("text/plain",n)):function(e,t){let n=e.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout(()=>{r.remove(),e.focus()},50)}(e,n),"cut"!=t.type||e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};const nn=r.Annotation.define();function rn(e,t){let n=[];for(let r of e.facet(Pe)){let o=r(e,t);o&&n.push(o)}return n?e.update({effects:n,annotations:nn.of(!0)}):null}function on(e){setTimeout(()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let n=rn(e.state,t);n?e.dispatch(n):e.update([])}},10)}Ft.focus=e=>{e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),on(e)},Ft.blur=e=>{e.observer.clearSelectionRange(),on(e)},Ft.compositionstart=Ft.compositionupdate=e=>{null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0)},Ft.compositionend=e=>{e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,ne.chrome&&ne.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then(()=>e.observer.flush()):setTimeout(()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])},50)},Ft.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},Ft.beforeinput=(e,t)=>{var n;let r;if(ne.chrome&&ne.android&&(r=Pt.find(e=>e.inputType==t.inputType))&&(e.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let t=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout(()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())},100)}};const ln=["pre-wrap","normal","pre-line","break-spaces"];class sn{constructor(e){this.lineWrapping=e,this.doc=r.Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return ln.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(10*r)]||(t=!0,this.heightSamples[Math.floor(10*r)]=!0)}return t}refresh(e,t,n,r,o,i){let l=ln.indexOf(e)>-1,s=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=n,this.textHeight=r,this.lineLength=o,s){this.heightSamples={};for(let e=0;e<i.length;e++){let t=i[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return s}}class an{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class cn{constructor(e,t,n,r,o){this.from=e,this.length=t,this.top=n,this.height=r,this._content=o}get type(){return"number"==typeof this._content?me.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Ce?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new cn(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var un=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(un||(un={}));const hn=.001;class dn{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>hn&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return dn.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let o=this,i=n.doc;for(let l=r.length-1;l>=0;l--){let{fromA:s,toA:a,fromB:c,toB:u}=r[l],h=o.lineAt(s,un.ByPosNoHeight,n.setDoc(t),0,0),d=h.to>=a?h:o.lineAt(a,un.ByPosNoHeight,n,0,0);for(u+=d.to-a,a=d.to;l>0&&h.from<=r[l-1].toA;)s=r[l-1].fromA,c=r[l-1].fromB,l--,s<h.from&&(h=o.lineAt(s,un.ByPosNoHeight,n,0,0));c+=h.from-s,s=h.from;let p=yn.build(n.setDoc(i),e,c,u);o=o.replace(s,a,p)}return o.updateHeight(n,0)}static empty(){return new fn(0,0)}static of(e){if(1==e.length)return e[0];let t=0,n=e.length,r=0,o=0;for(;;)if(t==n)if(r>2*o){let o=e[t-1];o.break?e.splice(--t,1,o.left,null,o.right):e.splice(--t,1,o.left,o.right),n+=1+o.break,r-=o.size}else{if(!(o>2*r))break;{let t=e[n];t.break?e.splice(n,1,t.left,null,t.right):e.splice(n,1,t.left,t.right),n+=2+t.break,o-=t.size}}else if(r<o){let n=e[t++];n&&(r+=n.size)}else{let t=e[--n];t&&(o+=t.size)}let i=0;return null==e[t-1]?(i=1,t--):null==e[t]&&(i=1,n++),new mn(dn.of(e.slice(0,t)),i,dn.of(e.slice(n)))}}dn.prototype.size=1;class pn extends dn{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,r){return new cn(r,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,r,o){return this.blockAt(0,n,r,o)}forEachLine(e,t,n,r,o,i){e<=o+this.length&&t>=o&&i(this.blockAt(0,n,r,o))}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class fn extends pn{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,r){return new cn(r,this.length,n,this.height,this.breaks)}replace(e,t,n){let r=n[0];return 1==n.length&&(r instanceof fn||r instanceof gn&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof gn?r=new fn(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):dn.of(n)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class gn extends dn{constructor(e){super(e,0)}heightMetrics(e,t){let n,r=e.doc.lineAt(t).number,o=e.doc.lineAt(t+this.length).number,i=o-r+1,l=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*i);n=t/i,this.length>i+1&&(l=(this.height-t)/(this.length-i-1))}else n=this.height/i;return{firstLine:r,lastLine:o,perLine:n,perChar:l}}blockAt(e,t,n,r){let{firstLine:o,lastLine:i,perLine:l,perChar:s}=this.heightMetrics(t,r);if(t.lineWrapping){let o=r+Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length),i=t.doc.lineAt(o),a=l+i.length*s,c=Math.max(n,e-a/2);return new cn(i.from,i.length,c,a,0)}{let r=Math.max(0,Math.min(i-o,Math.floor((e-n)/l))),{from:s,length:a}=t.doc.line(o+r);return new cn(s,a,n+l*r,l,0)}}lineAt(e,t,n,r,o){if(t==un.ByHeight)return this.blockAt(e,n,r,o);if(t==un.ByPosNoHeight){let{from:t,to:r}=n.doc.lineAt(e);return new cn(t,r-t,0,0,0)}let{firstLine:i,perLine:l,perChar:s}=this.heightMetrics(n,o),a=n.doc.lineAt(e),c=l+a.length*s,u=a.number-i,h=r+l*u+s*(a.from-o-u);return new cn(a.from,a.length,Math.max(r,Math.min(h,r+this.height-c)),c,0)}forEachLine(e,t,n,r,o,i){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:l,perLine:s,perChar:a}=this.heightMetrics(n,o);for(let c=e,u=r;c<=t;){let t=n.doc.lineAt(c);if(c==e){let n=t.number-l;u+=s*n+a*(e-o-n)}let r=s+a*t.length;i(new cn(t.from,t.length,u,r,0)),u+=r,c=t.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let e=n[n.length-1];e instanceof gn?n[n.length-1]=new gn(e.length+r):n.push(null,new gn(r-1))}if(e>0){let t=n[0];t instanceof gn?n[0]=new gn(e+t.length):n.unshift(new gn(e-1),null)}return dn.of(n)}decomposeLeft(e,t){t.push(new gn(e-1),null)}decomposeRight(e,t){t.push(null,new gn(this.length-e-1))}updateHeight(e,t=0,n=!1,r){let o=t+this.length;if(r&&r.from<=t+this.length&&r.more){let n=[],i=Math.max(t,r.from),l=-1;for(r.from>t&&n.push(new gn(r.from-t-1).updateHeight(e,t));i<=o&&r.more;){let t=e.doc.lineAt(i).length;n.length&&n.push(null);let o=r.heights[r.index++];-1==l?l=o:Math.abs(o-l)>=hn&&(l=-2);let s=new fn(t,o);s.outdated=!1,n.push(s),i+=t+1}i<=o&&n.push(null,new gn(o-i).updateHeight(e,i));let s=dn.of(n);return(l<0||Math.abs(s.height-this.height)>=hn||Math.abs(l-this.heightMetrics(e,t).perLine)>=hn)&&(e.heightChanged=!0),s}return(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class mn extends dn{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return 1&this.flags}blockAt(e,t,n,r){let o=n+this.left.height;return e<o?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,o,r+this.left.length+this.break)}lineAt(e,t,n,r,o){let i=r+this.left.height,l=o+this.left.length+this.break,s=t==un.ByHeight?e<i:e<l,a=s?this.left.lineAt(e,t,n,r,o):this.right.lineAt(e,t,n,i,l);if(this.break||(s?a.to<l:a.from>l))return a;let c=t==un.ByPosNoHeight?un.ByPosNoHeight:un.ByPos;return s?a.join(this.right.lineAt(l,c,n,i,l)):this.left.lineAt(l,c,n,r,o).join(a)}forEachLine(e,t,n,r,o,i){let l=r+this.left.height,s=o+this.left.length+this.break;if(this.break)e<s&&this.left.forEachLine(e,t,n,r,o,i),t>=s&&this.right.forEachLine(e,t,n,l,s,i);else{let a=this.lineAt(s,un.ByPos,n,r,o);e<a.from&&this.left.forEachLine(e,a.from-1,n,r,o,i),a.to>=e&&a.from<=t&&i(a),t>a.to&&this.right.forEachLine(a.to+1,t,n,l,s,i)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let o=[];e>0&&this.decomposeLeft(e,o);let i=o.length;for(let e of n)o.push(e);if(e>0&&vn(o,i-1),t<this.length){let e=o.length;this.decomposeRight(t,o),vn(o,e)}return dn.of(o)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?dn.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,r){let{left:o,right:i}=this,l=t+o.length+this.break,s=null;return r&&r.from<=t+o.length&&r.more?s=o=o.updateHeight(e,t,n,r):o.updateHeight(e,t,n),r&&r.from<=l+i.length&&r.more?s=i=i.updateHeight(e,l,n,r):i.updateHeight(e,l,n),s?this.balanced(o,i):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function vn(e,t){let n,r;null==e[t]&&(n=e[t-1])instanceof gn&&(r=e[t+1])instanceof gn&&e.splice(t-1,3,new gn(n.length+1+r.length))}class yn{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof fn?n.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new fn(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0,o=n.widget?n.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let i=t-e;n.block?this.addBlock(new pn(i,r,n)):(i||o||r>=5)&&this.addLineDeco(r,o,i)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new fn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new gn(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof fn)return e;let t=new fn(0,-1);return this.nodes.push(t),t}addBlock(e){var t;this.enterLine();let n=null===(t=e.deco)||void 0===t?void 0:t.type;n!=me.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n!=me.WidgetBefore&&(this.covering=e)}addLineDeco(e,t,n){let r=this.ensureLine();r.length+=n,r.collapsed+=n,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof fn||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new fn(0,-1));let n=e;for(let e of this.nodes)e instanceof fn&&e.updateHeight(this.oracle,n),n+=e?e.length:1;return this.nodes}static build(e,t,n,o){let i=new yn(n,e);return r.RangeSet.spans(t,n,o,i,0),i.finish(n)}}class bn{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&Se(e,t,this.changes,5)}}function Cn(e,t){let n=e.getBoundingClientRect(),r=e.ownerDocument,o=r.defaultView||window,i=Math.max(0,n.left),l=Math.min(o.innerWidth,n.right),s=Math.max(0,n.top),a=Math.min(o.innerHeight,n.bottom);for(let t=e.parentNode;t&&t!=r.body;)if(1==t.nodeType){let n=t,r=window.getComputedStyle(n);if((n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)&&"visible"!=r.overflow){let r=n.getBoundingClientRect();i=Math.max(i,r.left),l=Math.min(l,r.right),s=Math.max(s,r.top),a=t==e.parentNode?r.bottom:Math.min(a,r.bottom)}t="absolute"==r.position||"fixed"==r.position?n.offsetParent:n.parentNode}else{if(11!=t.nodeType)break;t=t.host}return{left:i-n.left,right:Math.max(i,l)-n.left,top:s-(n.top+t),bottom:Math.max(s,a)-(n.top+t)}}function wn(e,t){let n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}class Sn{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],o=t[n];if(r.from!=o.from||r.to!=o.to||r.size!=o.size)return!1}return!0}draw(e){return ve.replace({widget:new Rn(this.size,e)}).range(this.from,this.to)}}class Rn extends ge{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Tn{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=xn,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=et.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Ke).some(e=>"function"!=typeof e&&"cm-lineWrapping"==e.class);this.heightOracle=new sn(t),this.stateDeco=e.facet(Ze).filter(e=>"function"!=typeof e),this.heightMap=dn.empty().applyChanges(this.stateDeco,r.Text.empty,this.heightOracle.setDoc(e.doc),[new Qe(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ve.set(this.lineGaps.map(e=>e.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some(({from:e,to:t})=>r>=e&&r<=t)){let{from:t,to:n}=this.lineBlockAt(r);e.push(new En(t,n))}}this.viewports=e.sort((e,t)=>e.from-t.from),this.scaler=this.heightMap.height<=7e6?xn:new An(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(1==this.scaler.scale?e:Ln(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Ze).filter(e=>"function"!=typeof e);let o=e.changedRanges,i=Qe.extendWithRanges(o,function(e,t,n){let o=new bn;return r.RangeSet.compare(e,t,n,o,0),o.changes}(n,this.stateDeco,e?e.changes:r.ChangeSet.empty(this.state.doc.length))),l=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),i),this.heightMap.height!=l&&(e.flags|=2),s?(this.scrollAnchorPos=e.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let a=i.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let c=!e.changes.empty||2&e.flags||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),c&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(_e)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),o=this.heightOracle,i=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?et.RTL:et.LTR;let l=this.heightOracle.mustRefreshForWrapping(i),s=t.getBoundingClientRect(),a=l||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let c=0,u=0,h=parseInt(n.paddingTop)||0,d=parseInt(n.paddingBottom)||0;this.paddingTop==h&&this.paddingBottom==d||(this.paddingTop=h,this.paddingBottom=d,c|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(o.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=M(e.scrollDOM);let p=(this.printing?wn:Cn)(t,this.paddingTop),f=p.top-this.pixelViewport.top,g=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let v=s.width;if(this.contentDOMWidth==v&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=s.width,this.editorHeight=e.scrollDOM.clientHeight,c|=8),a){let t=e.docView.measureVisibleLineHeights(this.viewport);if(o.mustRefreshForHeights(t)&&(l=!0),l||o.lineWrapping&&Math.abs(v-this.contentDOMWidth)>o.charWidth){let{lineHeight:n,charWidth:r,textHeight:s}=e.docView.measureTextSize();l=n>0&&o.refresh(i,n,r,s,v/r,t),l&&(e.docView.minWidth=0,c|=8)}f>0&&g>0?u=Math.max(f,g):f<0&&g<0&&(u=Math.min(f,g)),o.heightChanged=!1;for(let n of this.viewports){let i=n.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(n);this.heightMap=(l?dn.empty().applyChanges(this.stateDeco,r.Text.empty,this.heightOracle,[new Qe(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(o,0,l,new an(n.from,i))}o.heightChanged&&(c|=2)}let y=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(this.viewport=this.getViewport(u,this.scrollTarget)),this.updateForViewport(),(2&c||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,o=this.heightOracle,{visibleTop:i,visibleBottom:l}=this,s=new En(r.lineAt(i-1e3*n,un.ByHeight,o,0,0).from,r.lineAt(l+1e3*(1-n),un.ByHeight,o,0,0).to);if(t){let{head:e}=t.range;if(e<s.from||e>s.to){let n,i=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),l=r.lineAt(e,un.ByPos,o,0,0);n="center"==t.y?(l.top+l.bottom)/2-i/2:"start"==t.y||"nearest"==t.y&&e<s.from?l.top:l.bottom-i,s=new En(r.lineAt(n-500,un.ByHeight,o,0,0).from,r.lineAt(n+i+500,un.ByHeight,o,0,0).to)}}return s}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new En(this.heightMap.lineAt(n,un.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,un.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,un.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,un.ByPos,this.heightOracle,0,0),{visibleTop:i,visibleBottom:l}=this;return(0==e||r<=i-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||o>=l+Math.max(10,Math.min(n,250)))&&r>i-2e3&&o<l+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new Sn(t.mapPos(r.from),t.mapPos(r.to),r.size));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,o=n?1e4:2e3,i=o>>1,l=o<<1;if(this.defaultTextDirection!=et.LTR&&!n)return[];let s=[],a=(o,l,c,u)=>{if(l-o<i)return;let h=this.state.selection.main,d=[h.from];h.empty||d.push(h.to);for(let e of d)if(e>o&&e<l)return a(o,e-10,c,u),void a(e+10,l,c,u);let p=function(e,t){for(let n of e)if(t(n))return n}(e,e=>e.from>=c.from&&e.to<=c.to&&Math.abs(e.from-o)<i&&Math.abs(e.to-l)<i&&!d.some(t=>e.from<t&&e.to>t));if(!p){if(l<c.to&&t&&n&&t.visibleRanges.some(e=>e.from<=l&&e.to>=l)){let e=t.moveToLineBoundary(r.EditorSelection.cursor(l),!1,!0).head;e>o&&(l=e)}p=new Sn(o,l,this.gapSize(c,o,l,u))}s.push(p)};for(let e of this.viewportLines){if(e.length<l)continue;let t=Dn(e.from,e.to,this.stateDeco);if(t.total<l)continue;let r,i,s=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let n,l,a=o/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=s){let r=On(t,s),o=((this.visibleBottom-this.visibleTop)/2+a)/e.height;n=r-o,l=r+o}else n=(this.visibleTop-e.top-a)/e.height,l=(this.visibleBottom-e.top+a)/e.height;r=kn(t,n),i=kn(t,l)}else{let e,n,l=t.total*this.heightOracle.charWidth,a=o*this.heightOracle.charWidth;if(null!=s){let r=On(t,s),o=((this.pixelViewport.right-this.pixelViewport.left)/2+a)/l;e=r-o,n=r+o}else e=(this.pixelViewport.left-a)/l,n=(this.pixelViewport.right+a)/l;r=kn(t,e),i=kn(t,n)}r>e.from&&a(e.from,r,e,t),i<e.to&&a(i,e.to,e,t)}return s}gapSize(e,t,n,r){let o=On(r,n)-On(r,t);return this.heightOracle.lineWrapping?e.height*o:r.total*this.heightOracle.charWidth*o}updateLineGaps(e){Sn.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ve.set(e.map(e=>e.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];r.RangeSet.spans(e,this.viewport.from,this.viewport.to,{span(e,n){t.push({from:e,to:n})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some((e,n)=>e.from!=t[n].from||e.to!=t[n].to);return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Ln(this.heightMap.lineAt(e,un.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Ln(this.heightMap.lineAt(this.scaler.fromDOM(e),un.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Ln(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class En{constructor(e,t){this.from=e,this.to=t}}function Dn(e,t,n){let o=[],i=e,l=0;return r.RangeSet.spans(n,e,t,{span(){},point(e,t){e>i&&(o.push({from:i,to:e}),l+=e-i),i=t}},20),i<t&&(o.push({from:i,to:t}),l+=t-i),{total:l,ranges:o}}function kn({total:e,ranges:t},n){if(n<=0)return t[0].from;if(n>=1)return t[t.length-1].to;let r=Math.floor(e*n);for(let e=0;;e++){let{from:n,to:o}=t[e],i=o-n;if(r<=i)return n+r;r-=i}}function On(e,t){let n=0;for(let{from:r,to:o}of e.ranges){if(t<=o){n+=t-r;break}n+=o-r}return n/e.total}const xn={toDOM:e=>e,fromDOM:e=>e,scale:1};class An{constructor(e,t,n){let r=0,o=0,i=0;this.viewports=n.map(({from:n,to:o})=>{let i=t.lineAt(n,un.ByPos,e,0,0).top,l=t.lineAt(o,un.ByPos,e,0,0).bottom;return r+=l-i,{from:n,to:o,top:i,bottom:l,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let e of this.viewports)e.domTop=i+(e.top-o)*this.scale,i=e.domBottom=e.domTop+(e.bottom-e.top),o=e.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return r+(e-n)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);n=o.bottom,r=o.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return n+(e-r)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);n=o.bottom,r=o.domBottom}}}function Ln(e,t){if(1==t.scale)return e;let n=t.toDOM(e.top),r=t.toDOM(e.bottom);return new cn(e.from,e.length,n,r-n,Array.isArray(e._content)?e._content.map(e=>Ln(e,t)):e._content)}const In=r.Facet.define({combine:e=>e.join(" ")}),Mn=r.Facet.define({combine:e=>e.indexOf(!0)>-1}),Pn=s.newName(),Hn=s.newName(),_n=s.newName(),Nn={"&light":"."+Hn,"&dark":"."+_n};function zn(e,t,n){return new s(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,t=>{if("&"==t)return e;if(!n||!n[t])throw new RangeError(`Unsupported selector: ${t}`);return n[t]}):e+" "+t})}const Bn=zn("."+Pn,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Nn);class Fn{constructor(e,t,n,o){this.typeOver=o,this.bounds=null,this.text="";let{impreciseHead:i,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let t=i||l?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}=e.observer.selectionRange;return n&&(t.push(new U(n,r)),o==n&&i==r||t.push(new U(o,i))),t}(e),n=new j(t,e.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(e,t){if(0==e.length)return null;let n=e[0].pos,o=2==e.length?e[1].pos:n;return n>-1&&o>-1?r.EditorSelection.single(n+t,o+t):null}(t,this.bounds.from)}else{let t=e.observer.selectionRange,n=i&&i.node==t.focusNode&&i.offset==t.focusOffset||!v(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),o=l&&l.node==t.anchorNode&&l.offset==t.anchorOffset||!v(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset);this.newSel=r.EditorSelection.single(o,n)}}}function Wn(e,t){let n,{newSel:o}=t,i=e.state.selection.main,l=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:o,to:s}=t.bounds,a=i.from,c=null;(8===l||ne.android&&t.text.length<s-o)&&(a=i.to,c="end");let u=function(e,t,n,r){let o=Math.min(e.length,t.length),i=0;for(;i<o&&e.charCodeAt(i)==t.charCodeAt(i);)i++;if(i==o&&e.length==t.length)return null;let l=e.length,s=t.length;for(;l>0&&s>0&&e.charCodeAt(l-1)==t.charCodeAt(s-1);)l--,s--;return"end"==r&&(n-=l+Math.max(0,i-Math.min(l,s))-i),l<i&&e.length<t.length?(i-=n<=i&&n>=l?i-n:0,s=i+(s-l),l=i):s<i&&(i-=n<=i&&n>=s?i-n:0,l=i+(l-s),s=i),{from:i,toA:l,toB:s}}(e.state.doc.sliceString(o,s,W),t.text,a-o,c);u&&(ne.chrome&&13==l&&u.toB==u.from+2&&"￿￿"==t.text.slice(u.from,u.toB)&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:r.Text.of(t.text.slice(u.from,u.toB).split(W))})}else o&&(!e.hasFocus&&e.state.facet(Fe)||o.main.eq(i))&&(o=null);if(!n&&!o)return!1;if(!n&&t.typeOver&&!i.empty&&o&&o.main.empty?n={from:i.from,to:i.to,insert:e.state.doc.slice(i.from,i.to)}:n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:e.state.doc.slice(i.from,n.from).append(n.insert).append(e.state.doc.slice(n.to,i.to))}:(ne.mac||ne.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(o&&2==n.insert.length&&(o=r.EditorSelection.single(o.main.anchor-1,o.main.head-1)),n={from:i.from,to:i.to,insert:r.Text.of([" "])}):ne.chrome&&n&&n.from==n.to&&n.from==i.head&&"\n "==n.insert.toString()&&e.lineWrapping&&(o&&(o=r.EditorSelection.single(o.main.anchor-1,o.main.head-1)),n={from:i.from,to:i.to,insert:r.Text.of([" "])}),n){let t=e.state;if(ne.ios&&e.inputState.flushIOSKey(e))return!0;if(ne.android&&(n.from==i.from&&n.to==i.to&&1==n.insert.length&&2==n.insert.lines&&L(e.contentDOM,"Enter",13)||(n.from==i.from-1&&n.to==i.to&&0==n.insert.length||8==l&&n.insert.length<n.to-n.from)&&L(e.contentDOM,"Backspace",8)||n.from==i.from&&n.to==i.to+1&&0==n.insert.length&&L(e.contentDOM,"Delete",46)))return!0;let s,a=n.insert.toString();if(e.state.facet(Me).some(t=>t(e,n.from,n.to,a)))return!0;if(e.inputState.composing>=0&&e.inputState.composing++,n.from>=i.from&&n.to<=i.to&&n.to-n.from>=(i.to-i.from)/3&&(!o||o.main.empty&&o.main.from==n.from+n.insert.length)&&e.inputState.composing<0){let r=i.from<n.from?t.sliceDoc(i.from,n.from):"",o=i.to>n.to?t.sliceDoc(n.to,i.to):"";s=t.replaceSelection(e.state.toText(r+n.insert.sliceString(0,void 0,e.state.lineBreak)+o))}else{let l=t.changes(n),a=o&&o.main.to<=l.newLength?o.main:void 0;if(t.selection.ranges.length>1&&e.inputState.composing>=0&&n.to<=i.to&&n.to>=i.to-10){let o=e.state.sliceDoc(n.from,n.to),c=vt(e)||e.state.doc.lineAt(i.head),u=i.to-n.to,h=i.to-i.from;s=t.changeByRange(s=>{if(s.from==i.from&&s.to==i.to)return{changes:l,range:a||s.map(l)};let d=s.to-u,p=d-o.length;if(s.to-s.from!=h||e.state.sliceDoc(p,d)!=o||c&&s.to>=c.from&&s.from<=c.to)return{range:s};let f=t.changes({from:p,to:d,insert:n.insert}),g=s.to-i.to;return{changes:f,range:a?r.EditorSelection.range(Math.max(0,a.anchor+g),Math.max(0,a.head+g)):s.map(f)}})}else s={changes:l,selection:a&&t.selection.replaceRange(a)}}let c="input.type";return(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,c+=".compose",e.inputState.compositionFirstChange&&(c+=".start",e.inputState.compositionFirstChange=!1)),e.dispatch(s,{scrollIntoView:!0,userEvent:c}),!0}if(o&&!o.main.eq(i)){let t=!1,n="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),n=e.inputState.lastSelectionOrigin),e.dispatch({selection:o,scrollIntoView:t,userEvent:n}),!0}return!1}const jn={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Vn=ne.ie&&ne.ie_version<=11;class Un{constructor(e){this.view=e,this.active=!1,this.selectionRange=new D,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let e of t)this.queue.push(e);(ne.ie&&ne.ie_version<=11||ne.ios&&e.composing)&&t.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),Vn&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver(()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(Fe)?n.root.activeElement!=this.dom:!y(n.dom,r))return;let o=r.anchorNode&&n.docView.nearest(r.anchorNode);o&&o.ignoreEvent(e)?t||(this.selectionChanged=!1):(ne.ie&&ne.ie_version<=11||ne.android&&ne.chrome)&&!n.state.selection.main.empty&&r.focusNode&&C(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=ne.safari&&11==e.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e){let t=null;function n(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}if(e.contentDOM.addEventListener("beforeinput",n,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",n,!0),!t)return null;let r=t.startContainer,o=t.startOffset,i=t.endContainer,l=t.endOffset,s=e.docView.domAtPos(e.state.selection.main.anchor);return C(s.node,s.offset,i,l)&&([r,o,i,l]=[i,l,r,o]),{anchorNode:r,anchorOffset:o,focusNode:i,focusOffset:l}}(this.view)||m(e.root);if(!t||this.selectionRange.eq(t))return!1;let n=y(this.dom,t);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){let n=t.focusNode,r=t.focusOffset;if(!n||t.anchorNode!=n||t.anchorOffset!=r)return!1;for(r=Math.min(r,R(n));;)if(r){if(1!=n.nodeType)return!1;let e=n.childNodes[r-1];"false"==e.contentEditable?r--:(n=e,r=R(n))}else{if(n==e)return!0;r=w(n),n=n.parentNode}}(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,jn),Vn&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Vn&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let e=()=>{let e=this.delayedAndroidKey;e&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&L(this.dom,e.key,e.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(e)}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let o of e){let e=this.readMutation(o);e&&(e.typeOver&&(r=!0),-1==t?({from:t,to:n}=e):(t=Math.min(e.from,t),n=Math.max(e.to,n)))}return{from:t,to:n,typeOver:r}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),r=this.selectionChanged&&y(this.dom,this.selectionRange);return e<0&&!r?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new Fn(this.view,e,t,n))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let n=this.view.state,r=Wn(this.view,t);return this.view.state==n&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.flags|=4),"childList"==e.type){let n=Gn(t,e.previousSibling||e.target.previousSibling,-1),r=Gn(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,n,r;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect(),null===(r=this.resizeContent)||void 0===r||r.disconnect();for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function Gn(e,t,n){for(;t;){let r=_.get(t);if(r&&r.parent==e)return r;let o=t.parentNode;t=o!=e.dom?o:n>0?t.nextSibling:t.previousSibling}return null}class Kn{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(e=>this.update([e])),this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new Tn(e.state||r.EditorState.create(e)),this.plugins=this.state.facet(je).map(e=>new Ue(e));for(let e of this.plugins)e.update(this);this.observer=new Un(this),this.inputState=new Mt(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new gt(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){let t=1==e.length&&e[0]instanceof r.Transaction?e[0]:this.state.update(...e);this._dispatch(t,this)}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,n=!1,o=!1,i=this.state;for(let t of e){if(t.startState!=i)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");i=t.state}if(this.destroyed)return void(this.viewState.state=i);let l=this.hasFocus,s=0,a=null;e.some(e=>e.annotation(nn))?(this.inputState.notifiedFocused=l,s=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,a=rn(i,l),a||(s=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(i.doc)||!this.state.selection.eq(i.selection))&&(u=null)):this.observer.clear(),i.facet(r.EditorState.phrases)!=this.state.facet(r.EditorState.phrases))return this.setState(i);t=Je.create(this,i,e),t.flags|=s;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(h&&(h=h.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;h=new Ne(e.empty?e:r.EditorSelection.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(ze)&&(h=e.value)}this.viewState.update(t,h),this.bidiCache=qn.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),n=this.docView.update(t),this.state.facet($e)!=this.styleModules&&this.mountStyles(),o=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(e=>e.isUserEvent("select.pointer")))}finally{this.updateState=0}if(t.startState.facet(In)!=t.state.facet(In)&&(this.viewState.mustMeasureContent=!0),(n||o||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!t.empty)for(let e of this.state.facet(Ie))e(t);(a||u)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),u&&!Wn(this,u)&&c.force&&L(this.contentDOM,c.key,c.keyCode)})}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new Tn(e),this.plugins=e.facet(je).map(e=>new Ue(e)),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView=new gt(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(je),n=e.state.facet(je);if(t!=n){let r=[];for(let o of n){let n=t.indexOf(o);if(n<0)r.push(new Ue(o));else{let t=this.plugins[n];t.mustUpdate=e,r.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,{scrollTop:r}=n,{scrollAnchorPos:o,scrollAnchorHeight:i}=this.viewState;r!=this.viewState.scrollTop&&(i=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(i<0)if(M(n))o=-1,i=this.viewState.heightMap.height;else{let e=this.viewState.scrollAnchorAt(r);o=e.from,i=e.top}this.updateState=1;let s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&s||([this.measureRequests,a]=[a,this.measureRequests]);let c=a.map(e=>{try{return e.read(this)}catch(e){return Be(this.state,e),Xn}}),u=Je.create(this,this.state,[]),h=!1;u.flags|=s,t?t.flags|=s:t=u,this.updateState=2,u.empty||(this.updatePlugins(u),this.inputState.update(u),this.updateAttrs(),h=this.docView.update(u));for(let t=0;t<a.length;t++)if(c[t]!=Xn)try{let e=a[t];e.write&&e.write(c[t],this)}catch(e){Be(this.state,e)}if(h&&this.docView.updateSelection(!0),!u.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}{let e=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-i;if(e>1||e<-1){r=n.scrollTop=r+e,i=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet(Ie))e(t)}get themeClasses(){return Pn+" "+(this.state.facet(Mn)?_n:Hn)+" "+this.state.facet(In)}updateAttrs(){let e=Yn(this,Ge,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Fe)?"true":"false",class:"cm-content",style:`${ne.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Yn(this,Ke,t);let n=this.observer.ignore(()=>{let n=pe(this.contentDOM,this.contentAttrs,t),r=pe(this.dom,this.editorAttrs,e);return n||r});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let e of n.effects)e.is(Kn.announce)&&(t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value)}mountStyles(){this.styleModules=this.state.facet($e),s.mount(this.root,this.styleModules.concat(Bn).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(t=>t.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return It(this,e,At(this,e,t,n))}moveByGroup(e,t){return It(this,e,At(this,e,t,t=>function(e,t,n){let o=e.state.charCategorizer(t),i=o(n);return e=>{let t=o(e);return i==r.CharCategory.Space&&(i=t),i==t}}(this,e.head,t)))}moveToLineBoundary(e,t,n=!0){return function(e,t,n,o){let i=xt(e,t.head),l=o&&i.type==me.Text&&(e.lineWrapping||i.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>i.from?t.head-1:t.head):null;if(l){let t=e.dom.getBoundingClientRect(),o=e.textDirectionAt(i.from),s=e.posAtCoords({x:n==(o==et.LTR)?t.right-1:t.left+1,y:(l.top+l.bottom)/2});if(null!=s)return r.EditorSelection.cursor(s,n?-1:1)}return r.EditorSelection.cursor(n?i.to:i.from,n?-1:1)}(this,e,t,n)}moveVertically(e,t,n){return It(this,e,function(e,t,n,o){let i=t.head,l=n?1:-1;if(i==(n?e.state.doc.length:0))return r.EditorSelection.cursor(i,t.assoc);let s,a=t.goalColumn,c=e.contentDOM.getBoundingClientRect(),u=e.coordsAtPos(i),h=e.documentTop;if(u)null==a&&(a=u.left-c.left),s=l<0?u.top:u.bottom;else{let t=e.viewState.lineBlockAt(i);null==a&&(a=Math.min(c.right-c.left,e.defaultCharacterWidth*(i-t.from))),s=(l<0?t.top:t.bottom)+h}let d=c.left+a,p=null!=o?o:e.viewState.heightOracle.textHeight>>1;for(let n=0;;n+=10){let o=s+(p+n)*l,u=kt(e,{x:d,y:o},!1,l);if(o<c.top||o>c.bottom||(l<0?u<i:u>i))return r.EditorSelection.cursor(u,t.assoc,void 0,a)}}(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),kt(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),o=this.bidiSpans(r);return T(n,o[ct.find(o,e-r.from,-1,t)].dir==et.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(He)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Zn)return dt(e.length);let t=this.textDirectionAt(e.from);for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t)return n.order;let n=ht(e.text,t);return this.bidiCache.push(new qn(e.from,e.to,t,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ne.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{x(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return ze.of(new Ne("number"==typeof e?r.EditorSelection.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return Ve.define(()=>({}),{eventHandlers:e})}static theme(e,t){let n=s.newName(),r=[In.of(n),$e.of(zn(`.${n}`,e))];return t&&t.dark&&r.push(Mn.of(!0)),r}static baseTheme(e){return r.Prec.lowest($e.of(zn("."+Pn,e,Nn)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),r=n&&_.get(n)||_.get(e);return(null===(t=null==r?void 0:r.rootView)||void 0===t?void 0:t.view)||null}}Kn.styleModule=$e,Kn.inputHandler=Me,Kn.focusChangeEffect=Pe,Kn.perLineTextDirection=He,Kn.exceptionSink=Le,Kn.updateListener=Ie,Kn.editable=Fe,Kn.mouseSelectionStyle=Ae,Kn.dragMovesSelection=xe,Kn.clickAddsSelectionRange=Oe,Kn.decorations=Ze,Kn.atomicRanges=Xe,Kn.scrollMargins=qe,Kn.darkTheme=Mn,Kn.contentAttributes=Ke,Kn.editorAttributes=Ge,Kn.lineWrapping=Kn.contentAttributes.of({class:"cm-lineWrapping"}),Kn.announce=r.StateEffect.define();const Zn=4096,Xn={};class qn{constructor(e,t,n,r){this.from=e,this.to=t,this.dir=n,this.order=r}static update(e,t){if(t.empty)return e;let n=[],r=e.length?e[e.length-1].dir:et.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let i=e[o];i.dir!=r||t.touchesRange(i.from,i.to)||n.push(new qn(t.mapPos(i.from,1),t.mapPos(i.to,-1),i.dir,i.order))}return n}}function Yn(e,t,n){for(let r=e.state.facet(t),o=r.length-1;o>=0;o--){let t=r[o],i="function"==typeof t?t(e):t;i&&ue(i,n)}return n}const $n=ne.mac?"mac":ne.windows?"win":ne.linux?"linux":"key";function Qn(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}const Jn=r.Prec.default(Kn.domEventHandlers({keydown:(e,t)=>ir(nr(t.state),e,t,"editor")})),er=r.Facet.define({enables:Jn}),tr=new WeakMap;function nr(e){let t=e.facet(er),n=tr.get(t);return n||tr.set(t,n=function(e,t=$n){let n=Object.create(null),r=Object.create(null),o=(e,t)=>{let n=r[e];if(null==n)r[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},i=(e,r,i,l,s)=>{var a,c;let u=n[e]||(n[e]=Object.create(null)),h=r.split(/ (?!$)/).map(e=>function(e,t){const n=e.split(/-(?!$)/);let r,o,i,l,s=n[n.length-1];"Space"==s&&(s=" ");for(let e=0;e<n.length-1;++e){const s=n[e];if(/^(cmd|meta|m)$/i.test(s))l=!0;else if(/^a(lt)?$/i.test(s))r=!0;else if(/^(c|ctrl|control)$/i.test(s))o=!0;else if(/^s(hift)?$/i.test(s))i=!0;else{if(!/^mod$/i.test(s))throw new Error("Unrecognized modifier name: "+s);"mac"==t?l=!0:o=!0}}return r&&(s="Alt-"+s),o&&(s="Ctrl-"+s),l&&(s="Meta-"+s),i&&(s="Shift-"+s),s}(e,t));for(let t=1;t<h.length;t++){let n=h.slice(0,t).join(" ");o(n,!0),u[n]||(u[n]={preventDefault:!0,stopPropagation:!1,run:[t=>{let r=or={view:t,prefix:n,scope:e};return setTimeout(()=>{or==r&&(or=null)},4e3),!0}]})}let d=h.join(" ");o(d,!1);let p=u[d]||(u[d]={preventDefault:!1,stopPropagation:!1,run:(null===(c=null===(a=u._any)||void 0===a?void 0:a.run)||void 0===c?void 0:c.slice())||[]});i&&p.run.push(i),l&&(p.preventDefault=!0),s&&(p.stopPropagation=!0)};for(let r of e){let e=r.scope?r.scope.split(" "):["editor"];if(r.any)for(let t of e){let e=n[t]||(n[t]=Object.create(null));e._any||(e._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let t in e)e[t].run.push(r.any)}let o=r[t]||r.key;if(o)for(let t of e)i(t,o,r.run,r.preventDefault,r.stopPropagation),r.shift&&i(t,"Shift-"+o,r.shift,r.preventDefault,r.stopPropagation)}return n}(t.reduce((e,t)=>e.concat(t),[]))),n}function rr(e,t,n){return ir(nr(e.state),t,e,n)}let or=null;function ir(e,t,n,o){let i=function(e){var t=!(d&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||p&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?h:u)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),l=(0,r.codePointAt)(i,0),s=(0,r.codePointSize)(l)==i.length&&" "!=i,a="",c=!1,f=!1,g=!1;or&&or.view==n&&or.scope==o&&(a=or.prefix+" ",_t.indexOf(t.keyCode)<0&&(f=!0,or=null));let m,v,y=new Set,b=e=>{if(e){for(let r of e.run)if(!y.has(r)&&(y.add(r),r(n,t)))return e.stopPropagation&&(g=!0),!0;e.preventDefault&&(e.stopPropagation&&(g=!0),f=!0)}return!1},C=e[o];return C&&(b(C[a+Qn(i,t,!s)])?c=!0:s&&(t.altKey||t.metaKey||t.ctrlKey)&&!(ne.windows&&t.ctrlKey&&t.altKey)&&(m=u[t.keyCode])&&m!=i?(b(C[a+Qn(m,t,!0)])||t.shiftKey&&(v=h[t.keyCode])!=i&&v!=m&&b(C[a+Qn(v,t,!1)]))&&(c=!0):s&&t.shiftKey&&b(C[a+Qn(i,t,!0)])&&(c=!0),!c&&b(C._any)&&(c=!0)),f&&(c=!0),c&&g&&t.stopPropagation(),c}class lr{constructor(e,t,n,r,o){this.className=e,this.left=t,this.top=n,this.width=r,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let r=e.coordsAtPos(n.head,n.assoc||1);if(!r)return[];let o=sr(e);return[new lr(t,r.left-o.left,r.top-o.top,null,r.bottom-r.top)]}return function(e,t,n){if(n.to<=e.viewport.from||n.from>=e.viewport.to)return[];let r=Math.max(n.from,e.viewport.from),o=Math.min(n.to,e.viewport.to),i=e.textDirection==et.LTR,l=e.contentDOM,s=l.getBoundingClientRect(),a=sr(e),c=l.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),h=s.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),d=s.right-(u?parseInt(u.paddingRight):0),p=xt(e,r),f=xt(e,o),g=p.type==me.Text?p:null,m=f.type==me.Text?f:null;if(g&&(e.lineWrapping||p.widgetLineBreaks)&&(g=ar(e,r,g)),m&&(e.lineWrapping||f.widgetLineBreaks)&&(m=ar(e,o,m)),g&&m&&g.from==m.from)return y(b(n.from,n.to,g));{let t=g?b(n.from,null,g):C(p,!1),r=m?b(null,n.to,m):C(f,!0),o=[];return(g||p).to<(m||f).from-(g&&m?1:0)||p.widgetLineBreaks>1&&t.bottom+e.defaultLineHeight/2<r.top?o.push(v(h,t.bottom,d,r.top)):t.bottom<r.top&&e.elementAtHeight((t.bottom+r.top)/2).type==me.Text&&(t.bottom=r.top=(t.bottom+r.top)/2),y(t).concat(o).concat(y(r))}function v(e,n,r,o){return new lr(t,e-a.left,n-a.top-.01,r-e,o-n+.01)}function y({top:e,bottom:t,horizontal:n}){let r=[];for(let o=0;o<n.length;o+=2)r.push(v(n[o],e,n[o+1],t));return r}function b(t,n,r){let o=1e9,l=-1e9,s=[];function a(t,n,a,c,u){let p=e.coordsAtPos(t,t==r.to?-2:2),f=e.coordsAtPos(a,a==r.from?2:-2);p&&f&&(o=Math.min(p.top,f.top,o),l=Math.max(p.bottom,f.bottom,l),u==et.LTR?s.push(i&&n?h:p.left,i&&c?d:f.right):s.push(!i&&c?h:f.left,!i&&n?d:p.right))}let c=null!=t?t:r.from,u=null!=n?n:r.to;for(let r of e.visibleRanges)if(r.to>c&&r.from<u)for(let o=Math.max(r.from,c),i=Math.min(r.to,u);;){let r=e.state.doc.lineAt(o);for(let l of e.bidiSpans(r)){let e=l.from+r.from,s=l.to+r.from;if(e>=i)break;s>o&&a(Math.max(e,o),null==t&&e<=c,Math.min(s,i),null==n&&s>=u,l.dir)}if(o=r.to+1,o>=i)break}return 0==s.length&&a(c,null==t,u,null==n,e.textDirection),{top:o,bottom:l,horizontal:s}}function C(e,t){let n=s.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}(e,t,n)}}function sr(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==et.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}function ar(e,t,n){let o=r.EditorSelection.cursor(t);return{from:Math.max(n.from,e.moveToLineBoundary(o,!1,!0).from),to:Math.min(n.to,e.moveToLineBoundary(o,!0,!0).from),type:me.Text}}class cr{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(ur)!=e.state.facet(ur)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(ur);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((e,t)=>{return n=e,r=this.drawn[t],!(n.constructor==r.constructor&&n.eq(r));var n,r})){let t=this.dom.firstChild,n=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[n].constructor&&r.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(r.draw(),t);for(;t;){let e=t.nextSibling;t.remove(),t=e}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const ur=r.Facet.define();function hr(e){return[Ve.define(t=>new cr(t,e)),ur.of(e)]}const dr=!ne.ios,pr=r.Facet.define({combine:e=>(0,r.combineConfig)(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function fr(e={}){return[pr.of(e),mr,yr,Cr,_e.of(!0)]}function gr(e){return e.startState.facet(pr)!=e.state.facet(pr)}const mr=hr({above:!0,markers(e){let{state:t}=e,n=t.facet(pr),o=[];for(let i of t.selection.ranges){let l=i==t.selection.main;if(i.empty?!l||dr:n.drawRangeCursor){let t=l?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",n=i.empty?i:r.EditorSelection.cursor(i.head,i.head>i.anchor?-1:1);for(let r of lr.forRange(e,t,n))o.push(r)}}return o},update(e,t){e.transactions.some(e=>e.selection)&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");let n=gr(e);return n&&vr(e.state,t),e.docChanged||e.selectionSet||n},mount(e,t){vr(t.state,e)},class:"cm-cursorLayer"});function vr(e,t){t.style.animationDuration=e.facet(pr).cursorBlinkRate+"ms"}const yr=hr({above:!1,markers:e=>e.state.selection.ranges.map(t=>t.empty?[]:lr.forRange(e,"cm-selectionBackground",t)).reduce((e,t)=>e.concat(t)),update:(e,t)=>e.docChanged||e.selectionSet||e.viewportChanged||gr(e),class:"cm-selectionLayer"}),br={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};dr&&(br[".cm-line"].caretColor="transparent !important");const Cr=r.Prec.highest(Kn.theme(br)),wr=r.StateEffect.define({map:(e,t)=>null==e?null:t.mapPos(e)}),Sr=r.StateField.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce((e,t)=>t.is(wr)?t.value:e,e))}),Rr=Ve.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let n=e.state.field(Sr);null==n?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(Sr)!=n||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let e=this.view.state.field(Sr),t=null!=e&&this.view.coordsAtPos(e);if(!t)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+this.view.scrollDOM.scrollLeft,top:t.top-n.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}}drawCursor(e){this.cursor&&(e?(this.cursor.style.left=e.left+"px",this.cursor.style.top=e.top+"px",this.cursor.style.height=e.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(Sr)!=e&&this.view.dispatch({effects:wr.of(e)})}},{eventHandlers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Tr(){return[Sr,Rr]}function Er(e,t,n,r,o){t.lastIndex=0;for(let i,l=e.iterRange(n,r),s=n;!l.next().done;s+=l.value.length)if(!l.lineBreak)for(;i=t.exec(l.value);)o(s+i.index,i)}class Dr{constructor(e){const{regexp:t,decoration:n,decorate:r,boundary:o,maxLength:i=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(e,t,n,o)=>r(o,n,n+e[0].length,e,t);else if("function"==typeof n)this.addMatch=(e,t,r,o)=>{let i=n(e,t,r);i&&o(r,r+e[0].length,i)};else{if(!n)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(e,t,r,o)=>o(r,r+e[0].length,n)}this.boundary=o,this.maxLength=i}createDeco(e){let t=new r.RangeSetBuilder,n=t.add.bind(t);for(let{from:t,to:r}of function(e,t){let n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;let r=[];for(let{from:o,to:i}of n)o=Math.max(e.state.doc.lineAt(o).from,o-t),i=Math.min(e.state.doc.lineAt(i).to,i+t),r.length&&r[r.length-1].to>=o?r[r.length-1].to=i:r.push({from:o,to:i});return r}(e,this.maxLength))Er(e.state.doc,this.regexp,t,r,(t,r)=>this.addMatch(r,e,t,n));return t.finish()}updateDeco(e,t){let n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((t,o,i,l)=>{l>e.view.viewport.from&&i<e.view.viewport.to&&(n=Math.min(i,n),r=Math.max(l,r))}),e.viewportChanged||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),n,r):t}updateRange(e,t,n,r){for(let o of e.visibleRanges){let i=Math.max(o.from,n),l=Math.min(o.to,r);if(l>i){let n=e.state.doc.lineAt(i),r=n.to<l?e.state.doc.lineAt(l):n,s=Math.max(o.from,n.from),a=Math.min(o.to,r.to);if(this.boundary){for(;i>n.from;i--)if(this.boundary.test(n.text[i-1-n.from])){s=i;break}for(;l<r.to;l++)if(this.boundary.test(r.text[l-r.from])){a=l;break}}let c,u=[],h=(e,t,n)=>u.push(n.range(e,t));if(n==r)for(this.regexp.lastIndex=s-n.from;(c=this.regexp.exec(n.text))&&c.index<a-n.from;)this.addMatch(c,e,c.index+n.from,h);else Er(e.state.doc,this.regexp,s,a,(t,n)=>this.addMatch(n,e,t,h));t=t.update({filterFrom:s,filterTo:a,filter:(e,t)=>e<s||t>a,add:u})}}return t}}const kr=null!=/x/.unicode?"gu":"g",Or=new RegExp("[\0-\b\n--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\ufeff￹-￼]",kr),xr={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Ar=null;const Lr=r.Facet.define({combine(e){let t=(0,r.combineConfig)(e,{render:null,specialChars:Or,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==Ar&&"undefined"!=typeof document&&document.body){let t=document.body.style;Ar=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return Ar||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,kr)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,kr)),t}});function Ir(e={}){return[Lr.of(e),Mr||(Mr=Ve.fromClass(class{constructor(e){this.view=e,this.decorations=ve.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(Lr)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new Dr({regexp:e.specialChars,decoration:(t,n,o)=>{let{doc:i}=n.state,l=(0,r.codePointAt)(t[0],0);if(9==l){let e=i.lineAt(o),t=n.state.tabSize,l=(0,r.countColumn)(e.text,t,o-e.from);return ve.replace({widget:new Hr((t-l%t)*this.view.defaultCharacterWidth)})}return this.decorationCache[l]||(this.decorationCache[l]=ve.replace({widget:new Pr(e,l)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(Lr);e.startState.facet(Lr)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}let Mr=null;class Pr extends ge{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function(e){return e>=32?"•":10==e?"␤":String.fromCharCode(9216+e)}(this.code),n=e.state.phrase("Control character")+" "+(xr[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,t);if(r)return r;let o=document.createElement("span");return o.textContent=t,o.title=n,o.setAttribute("aria-label",n),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class Hr extends ge{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const _r=Ve.fromClass(class{constructor(){this.height=1e3,this.attrs={style:"padding-bottom: 1000px"}}update(e){let{view:t}=e,n=t.viewState.editorHeight-t.defaultLineHeight-t.documentPadding.top-.5;n>=0&&n!=this.height&&(this.height=n,this.attrs={style:`padding-bottom: ${n}px`})}});function Nr(){return[_r,Ke.of(e=>{var t;return(null===(t=e.plugin(_r))||void 0===t?void 0:t.attrs)||null})]}function zr(){return Fr}const Br=ve.line({class:"cm-activeLine"}),Fr=Ve.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,n=[];for(let r of e.state.selection.ranges){let o=e.lineBlockAt(r.head);o.from>t&&(n.push(Br.range(o.from)),t=o.from)}return ve.set(n)}},{decorations:e=>e.decorations});class Wr extends ge{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild("string"==typeof this.content?document.createTextNode(this.content):this.content),"string"==typeof this.content?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let t=e.firstChild?b(e.firstChild):[];if(!t.length)return null;let n=window.getComputedStyle(e.parentNode),r=T(t[0],"rtl"!=n.direction),o=parseInt(n.lineHeight);return r.bottom-r.top>1.5*o?{left:r.left,right:r.right,top:r.top,bottom:r.top+o}:r}ignoreEvent(){return!1}}function jr(e){return Ve.fromClass(class{constructor(t){this.view=t,this.placeholder=e?ve.set([ve.widget({widget:new Wr(e),side:1}).range(0)]):ve.none}get decorations(){return this.view.state.doc.length?ve.none:this.placeholder}},{decorations:e=>e.decorations})}const Vr=2e3;function Ur(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),o=e.state.doc.lineAt(n),i=n-o.from,l=i>Vr?-1:i==o.length?function(e,t){let n=e.coordsAtPos(e.viewport.from);return n?Math.round(Math.abs((n.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):(0,r.countColumn)(o.text,e.state.tabSize,n-o.from);return{line:o.number,col:l,off:i}}function Gr(e){let t=(null==e?void 0:e.eventFilter)||(e=>e.altKey&&0==e.button);return Kn.mouseSelectionStyle.of((e,n)=>t(n)?function(e,t){let n=Ur(e,t),o=e.state.selection;return n?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(n.line).from),r=e.state.doc.lineAt(t);n={line:r.number,col:n.col,off:Math.min(n.off,r.length)},o=o.map(e.changes)}},get(t,i,l){let s=Ur(e,t);if(!s)return o;let a=function(e,t,n){let o=Math.min(t.line,n.line),i=Math.max(t.line,n.line),l=[];if(t.off>Vr||n.off>Vr||t.col<0||n.col<0){let s=Math.min(t.off,n.off),a=Math.max(t.off,n.off);for(let t=o;t<=i;t++){let n=e.doc.line(t);n.length<=a&&l.push(r.EditorSelection.range(n.from+s,n.to+a))}}else{let s=Math.min(t.col,n.col),a=Math.max(t.col,n.col);for(let t=o;t<=i;t++){let n=e.doc.line(t),o=(0,r.findColumn)(n.text,s,e.tabSize,!0);if(o<0)l.push(r.EditorSelection.cursor(n.to));else{let t=(0,r.findColumn)(n.text,a,e.tabSize);l.push(r.EditorSelection.range(n.from+o,n.from+t))}}}return l}(e.state,n,s);return a.length?l?r.EditorSelection.create(a.concat(o.ranges)):r.EditorSelection.create(a):o}}:null}(e,n):null)}const Kr={Alt:[18,e=>!!e.altKey],Control:[17,e=>!!e.ctrlKey],Shift:[16,e=>!!e.shiftKey],Meta:[91,e=>!!e.metaKey]},Zr={style:"cursor: crosshair"};function Xr(e={}){let[t,n]=Kr[e.key||"Alt"],r=Ve.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventHandlers:{keydown(e){this.set(e.keyCode==t||n(e))},keyup(e){e.keyCode!=t&&n(e)||this.set(!1)},mousemove(e){this.set(n(e))}}});return[r,Kn.contentAttributes.of(e=>{var t;return(null===(t=e.plugin(r))||void 0===t?void 0:t.isDown)?Zr:null})]}const qr="-10000px";class Yr{constructor(e,t,n){this.facet=t,this.createTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter(e=>e),this.tooltipViews=this.tooltips.map(n)}update(e){var t;let n=e.state.facet(this.facet),r=n.filter(e=>e);if(n===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let o=[];for(let t=0;t<r.length;t++){let n=r[t],i=-1;if(n){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==n.create&&(i=e)}if(i<0)o[t]=this.createTooltipView(n);else{let n=o[t]=this.tooltipViews[i];n.update&&n.update(e)}}}for(let e of this.tooltipViews)o.indexOf(e)<0&&(e.dom.remove(),null===(t=e.destroy)||void 0===t||t.call(e));return this.input=n,this.tooltips=r,this.tooltipViews=o,!0}}function $r(e={}){return Jr.of(e)}function Qr(e){let{win:t}=e;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}const Jr=r.Facet.define({combine:e=>{var t,n,r;return{position:ne.ios?"absolute":(null===(t=e.find(e=>e.position))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find(e=>e.parent))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(r=e.find(e=>e.tooltipSpace))||void 0===r?void 0:r.tooltipSpace)||Qr}}}),eo=new WeakMap,to=Ve.fromClass(class{constructor(e){this.view=e,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(Jr);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new Yr(e,oo,e=>this.createTooltip(e)),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver(e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e);t&&this.observeIntersection();let n=t||e.geometryChanged,r=e.state.facet(Jr);if(r.position!=this.position){this.position=r.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(e){let t=e.create(this.view);if(t.dom.classList.add("cm-tooltip"),e.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",t.dom.appendChild(e)}return t.dom.style.position=this.position,t.dom.style.top=qr,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),null===(e=t.destroy)||void 0===e||e.call(t);null===(t=this.intersectionObserver)||void 0===t||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=this.view.dom.getBoundingClientRect();return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map((e,t)=>{let n=this.manager.tooltipViews[t];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(Jr).tooltipSpace(this.view)}}writeMeasure(e){var t;let{editor:n,space:r}=e,o=[];for(let i=0;i<this.manager.tooltips.length;i++){let l=this.manager.tooltips[i],s=this.manager.tooltipViews[i],{dom:a}=s,c=e.pos[i],u=e.size[i];if(!c||c.bottom<=Math.max(n.top,r.top)||c.top>=Math.min(n.bottom,r.bottom)||c.right<Math.max(n.left,r.left)-.1||c.left>Math.min(n.right,r.right)+.1){a.style.top=qr;continue}let h=l.arrow?s.dom.querySelector(".cm-tooltip-arrow"):null,d=h?7:0,p=u.right-u.left,f=null!==(t=eo.get(s))&&void 0!==t?t:u.bottom-u.top,g=s.offset||ro,m=this.view.textDirection==et.LTR,v=u.width>r.right-r.left?m?r.left:r.right-u.width:m?Math.min(c.left-(h?14:0)+g.x,r.right-p):Math.max(r.left,c.left-p+(h?14:0)-g.x),y=!!l.above;!l.strictSide&&(y?c.top-(u.bottom-u.top)-g.y<r.top:c.bottom+(u.bottom-u.top)+g.y>r.bottom)&&y==r.bottom-c.bottom>c.top-r.top&&(y=!y);let b=(y?c.top-r.top:r.bottom-c.bottom)-d;if(b<f&&!1!==s.resize){if(b<this.view.defaultLineHeight){a.style.top=qr;continue}eo.set(s,f),a.style.height=(f=b)+"px"}else a.style.height&&(a.style.height="");let C=y?c.top-f-d-g.y:c.bottom+d+g.y,w=v+p;if(!0!==s.overlap)for(let e of o)e.left<w&&e.right>v&&e.top<C+f&&e.bottom>C&&(C=y?e.top-f-2-d:e.bottom+d+2);"absolute"==this.position?(a.style.top=C-e.parent.top+"px",a.style.left=v-e.parent.left+"px"):(a.style.top=C+"px",a.style.left=v+"px"),h&&(h.style.left=c.left+(m?g.x:-g.x)-(v+14-7)+"px"),!0!==s.overlap&&o.push({left:v,top:C,right:w,bottom:C+f}),a.classList.toggle("cm-tooltip-above",y),a.classList.toggle("cm-tooltip-below",!y),s.positioned&&s.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=qr}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),no=Kn.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),ro={x:0,y:0},oo=r.Facet.define({enables:[to,no]}),io=r.Facet.define();class lo{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Yr(e,io,e=>this.createHostedView(e))}static create(e){return new lo(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)null===(e=t.destroy)||void 0===e||e.call(t)}}const so=oo.compute([io],e=>{let t=e.facet(io).filter(e=>e);return 0===t.length?null:{pos:Math.min(...t.map(e=>e.pos)),end:Math.max(...t.filter(e=>null!=e.end).map(e=>e.end)),create:lo.create,above:t[0].above,arrow:t.some(e=>e.arrow)}});class ao{constructor(e,t,n,r,o){this.view=e,this.source=t,this.field=n,this.setHover=r,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(null==t)return;let n=this.view.coordsAtPos(t);if(null==n||e.y<n.top||e.y>n.bottom||e.x<n.left-this.view.defaultCharacterWidth||e.x>n.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find(e=>e.from<=t&&e.to>=t),o=r&&r.dir==et.RTL?-1:1,i=this.source(this.view,t,e.x<n.left?-o:o);if(null==i?void 0:i.then){let e=this.pending={pos:t};i.then(t=>{this.pending==e&&(this.pending=null,t&&this.view.dispatch({effects:this.setHover.of(t)}))},e=>Be(this.view.state,e,"hover tooltip"))}else i&&this.view.dispatch({effects:this.setHover.of(i)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let n=this.active;if(n&&!co(this.lastMove.target)||this.pending){let{pos:r}=n||this.pending,o=null!==(t=null==n?void 0:n.end)&&void 0!==t?t:r;(r==o?this.view.posAtCoords(this.lastMove)==r:function(e,t,n,r,o,i){let l=document.createRange(),s=e.domAtPos(t),a=e.domAtPos(n);l.setEnd(a.node,a.offset),l.setStart(s.node,s.offset);let c=l.getClientRects();l.detach();for(let e=0;e<c.length;e++){let t=c[e];if(Math.max(t.top-o,o-t.bottom,t.left-r,r-t.right)<=6)return!0}return!1}(this.view,r,o,e.clientX,e.clientY))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!co(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function co(e){for(let t=e;t;t=t.parentNode)if(1==t.nodeType&&t.classList.contains("cm-tooltip"))return!0;return!1}function uo(e,t={}){let n=r.StateEffect.define(),o=r.StateField.define({create:()=>null,update(e,o){if(e&&(t.hideOnChange&&(o.docChanged||o.selection)||t.hideOn&&t.hideOn(o,e)))return null;if(e&&o.docChanged){let t=o.changes.mapPos(e.pos,-1,r.MapMode.TrackDel);if(null==t)return null;let n=Object.assign(Object.create(null),e);n.pos=t,null!=e.end&&(n.end=o.changes.mapPos(e.end)),e=n}for(let t of o.effects)t.is(n)&&(e=t.value),t.is(fo)&&(e=null);return e},provide:e=>io.from(e)});return[o,Ve.define(r=>new ao(r,e,o,n,t.hoverTime||300)),so]}function ho(e,t){let n=e.plugin(to);if(!n)return null;let r=n.manager.tooltips.indexOf(t);return r<0?null:n.manager.tooltipViews[r]}function po(e){return e.facet(io).some(e=>e)}const fo=r.StateEffect.define(),go=fo.of(null);function mo(e){var t;null===(t=e.plugin(to))||void 0===t||t.maybeMeasure()}const vo=r.Facet.define({combine(e){let t,n;for(let r of e)t=t||r.topContainer,n=n||r.bottomContainer;return{topContainer:t,bottomContainer:n}}});function yo(e){return e?[vo.of(e)]:[]}function bo(e,t){let n=e.plugin(Co),r=n?n.specs.indexOf(t):-1;return r>-1?n.panels[r]:null}const Co=Ve.fromClass(class{constructor(e){this.input=e.state.facet(Ro),this.specs=this.input.filter(e=>e),this.panels=this.specs.map(t=>t(e));let t=e.state.facet(vo);this.top=new wo(e,!0,t.topContainer),this.bottom=new wo(e,!1,t.bottomContainer),this.top.sync(this.panels.filter(e=>e.top)),this.bottom.sync(this.panels.filter(e=>!e.top));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(e){let t=e.state.facet(vo);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new wo(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new wo(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=e.state.facet(Ro);if(n!=this.input){let t=n.filter(e=>e),r=[],o=[],i=[],l=[];for(let n of t){let t,s=this.specs.indexOf(n);s<0?(t=n(e.view),l.push(t)):(t=this.panels[s],t.update&&t.update(e)),r.push(t),(t.top?o:i).push(t)}this.specs=t,this.panels=r,this.top.sync(o),this.bottom.sync(i);for(let e of l)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let t of this.panels)t.update&&t.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>Kn.scrollMargins.of(t=>{let n=t.plugin(e);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class wo{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=So(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=So(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function So(e){let t=e.nextSibling;return e.remove(),t}const Ro=r.Facet.define({enables:Co});class To extends r.RangeValue{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}To.prototype.elementClass="",To.prototype.toDOM=void 0,To.prototype.mapMode=r.MapMode.TrackBefore,To.prototype.startSide=To.prototype.endSide=-1,To.prototype.point=!0;const Eo=r.Facet.define(),Do={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>r.RangeSet.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},ko=r.Facet.define();function Oo(e){return[Ao(),ko.of(Object.assign(Object.assign({},Do),e))]}const xo=r.Facet.define({combine:e=>e.some(e=>e)});function Ao(e){let t=[Lo];return e&&!1===e.fixed&&t.push(xo.of(!0)),t}const Lo=Ve.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=e.state.facet(ko).map(t=>new Ho(e,t));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!e.state.facet(xo),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,n=e.view.viewport,r=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(r<.8*(n.to-n.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(xo)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let n=r.RangeSet.iter(this.view.state.facet(Eo),this.view.viewport.from),o=[],i=this.gutters.map(e=>new Po(e,this.view.viewport,-this.view.documentPadding.top));for(let e of this.view.viewportLineBlocks)if(o.length&&(o=[]),Array.isArray(e.type)){let t=!0;for(let r of e.type)if(r.type==me.Text&&t){Mo(n,o,r.from);for(let e of i)e.line(this.view,r,o);t=!1}else if(r.widget)for(let e of i)e.widget(this.view,r)}else if(e.type==me.Text){Mo(n,o,e.from);for(let t of i)t.line(this.view,e,o)}for(let e of i)e.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(ko),n=e.state.facet(ko),o=e.docChanged||e.heightChanged||e.viewportChanged||!r.RangeSet.eq(e.startState.facet(Eo),e.state.facet(Eo),e.view.viewport.from,e.view.viewport.to);if(t==n)for(let t of this.gutters)t.update(e)&&(o=!0);else{o=!0;let r=[];for(let o of n){let n=t.indexOf(o);n<0?r.push(new Ho(this.view,o)):(this.gutters[n].update(e),r.push(this.gutters[n]))}for(let e of this.gutters)e.dom.remove(),r.indexOf(e)<0&&e.destroy();for(let e of r)this.dom.appendChild(e.dom);this.gutters=r}return o}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>Kn.scrollMargins.of(t=>{let n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==et.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}:null})});function Io(e){return Array.isArray(e)?e:[e]}function Mo(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}class Po{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=r.RangeSet.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:r}=this,o=t.top-this.height;if(this.i==r.elements.length){let i=new _o(e,t.height,o,n);r.elements.push(i),r.dom.appendChild(i.dom)}else r.elements[this.i].update(e,t.height,o,n);this.height=t.bottom,this.i++}line(e,t,n){let r=[];Mo(this.cursor,r,t.from),n.length&&(r=r.concat(n));let o=this.gutter.config.lineMarker(e,t,r);o&&r.unshift(o);let i=this.gutter;(0!=r.length||i.config.renderEmptyElements)&&this.addElement(e,t,r)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t);n&&this.addElement(e,t,[n])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Ho{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,r=>{let o,i=r.target;if(i!=this.dom&&this.dom.contains(i)){for(;i.parentNode!=this.dom;)i=i.parentNode;let e=i.getBoundingClientRect();o=(e.top+e.bottom)/2}else o=r.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[n](e,l,r)&&r.preventDefault()});this.markers=Io(t.markers(e)),t.initialSpacer&&(this.spacer=new _o(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Io(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let n=e.view.viewport;return!r.RangeSet.eq(this.markers,t,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class _o{constructor(e,t,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,r)}update(e,t,n,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let n="cm-gutterElement",r=this.dom.firstChild;for(let o=0,i=0;;){let l=i,s=o<t.length?t[o++]:null,a=!1;if(s){let e=s.elementClass;e&&(n+=" "+e);for(let e=i;e<this.markers.length;e++)if(this.markers[e].compare(s)){l=e,a=!0;break}}else l=this.markers.length;for(;i<l;){let e=this.markers[i++];if(e.toDOM){e.destroy(r);let t=r.nextSibling;r.remove(),r=t}}if(!s)break;s.toDOM&&(a?r=r.nextSibling:this.dom.insertBefore(s.toDOM(e),r)),a&&i++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}const No=r.Facet.define(),zo=r.Facet.define({combine:e=>(0,r.combineConfig)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let e in t){let r=n[e],o=t[e];n[e]=r?(e,t,n)=>r(e,t,n)||o(e,t,n):o}return n}})});class Bo extends To{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Fo(e,t){return e.state.facet(zo).formatNumber(t,e.state)}const Wo=ko.compute([zo],e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(No),lineMarker:(e,t,n)=>n.some(e=>e.toDOM)?null:new Bo(Fo(e,e.state.doc.lineAt(t.from).number)),widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(zo)!=e.state.facet(zo),initialSpacer:e=>new Bo(Fo(e,Vo(e.state.doc.lines))),updateSpacer(e,t){let n=Fo(t.view,Vo(t.view.state.doc.lines));return n==e.number?e:new Bo(n)},domEventHandlers:e.facet(zo).domEventHandlers}));function jo(e={}){return[zo.of(e),Ao(),Wo]}function Vo(e){let t=9;for(;t<e;)t=10*t+9;return t}const Uo=new class extends To{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Go=Eo.compute(["selection"],e=>{let t=[],n=-1;for(let r of e.selection.ranges){let o=e.doc.lineAt(r.head).from;o>n&&(n=o,t.push(Uo.range(o)))}return r.RangeSet.of(t)});function Ko(){return Go}const Zo=new Map;function Xo(e){return Ve.define(t=>({decorations:e.createDeco(t),update(t){this.decorations=e.updateDeco(t,this.decorations)}}),{decorations:e=>e.decorations})}const qo=Xo(new Dr({regexp:/\t| +/g,decoration:e=>function(e){let t=Zo.get(e);return t||Zo.set(e,t=ve.mark({attributes:"\t"===e?{class:"cm-highlightTab"}:{class:"cm-highlightSpace","data-display":e.replace(/ /g,"·")}})),t}(e[0]),boundary:/\S/}));function Yo(){return qo}const $o=Xo(new Dr({regexp:/\s+$/g,decoration:ve.mark({class:"cm-trailingSpace"}),boundary:/\S/}));function Qo(){return $o}const Jo={HeightMap:dn,HeightOracle:sn,MeasuredHeights:an,QueryType:un,ChangedRange:Qe,computeOrder:ht,moveVisually:ft}},973:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,'.reactTableComponent .icon {\n  font-family: "fpa-icons";\n  -webkit-font-smoothing: antialiased;\n}\n.reactTableComponent .icon.hierarchyIcon,\n.reactTableComponent .icon.hierarchyIconMobile {\n  color: #346187;\n  cursor: pointer;\n  font-style: normal;\n  text-decoration: none;\n  font-weight: normal;\n}\n.reactTableComponent .icon.hierarchyIcon.expandedBelowIcon:before {\n  height: 16px;\n  line-height: 16px;\n  min-height: 16px;\n  content: "\\e625";\n}\n.reactTableComponent .icon.hierarchyIcon.expandedAboveIcon:before {\n  height: 16px;\n  line-height: 16px;\n  min-height: 16px;\n  content: "\\e624";\n}\n.reactTableComponent .icon.hierarchyIcon.collapsedIcon:before {\n  height: 16px;\n  line-height: 16px;\n  min-height: 16px;\n  content: "\\e627";\n}\n.reactTableComponent .icon.hierarchyIconMobile.expandedBelowIcon:before {\n  height: 20px;\n  line-height: 20px;\n  min-height: 20px;\n  content: "\\e625";\n}\n.reactTableComponent .icon.hierarchyIconMobile.expandedAboveIcon:before {\n  height: 20px;\n  line-height: 20px;\n  min-height: 20px;\n  content: "\\e624";\n}\n.reactTableComponent .icon.hierarchyIconMobile.collapsedIcon:before {\n  height: 20px;\n  line-height: 20px;\n  min-height: 20px;\n  content: "\\e627";\n}\n.reactTableComponent .icon.comment,\n.reactTableComponent .icon.childComment {\n  font-size: 1rem;\n  line-height: 1rem;\n  top: -3px;\n  right: 0px;\n  position: absolute;\n  font-style: normal;\n  text-decoration: none;\n  font-weight: normal;\n}\n.reactTableComponent .icon.comment {\n  cursor: pointer;\n  color: #21c4c4;\n}\n.reactTableComponent .icon.comment:before {\n  content: "\\e7f0";\n}\n.reactTableComponent .icon.childComment {\n  color: #808184;\n}\n.reactTableComponent .icon.childComment:before {\n  content: "\\e7ef";\n}\n.reactTableComponent .icon.thresholdIcon {\n  font-family: "fpa-icons", "SAP-icons";\n  display: inline-block;\n}\n.reactTableComponent .icon.thresholdIcon.good:before {\n  content: "\\e787";\n}\n.reactTableComponent .icon.thresholdIcon.warning:before {\n  content: "\\e788";\n}\n.reactTableComponent .icon.thresholdIcon.alert:before {\n  content: "\\e789";\n}\n.reactTableComponent .icon.thresholdIcon.diamond:before {\n  content: "\\e834";\n}\n.reactTableComponent .icon.thresholdIcon.information:before {\n  content: "\\e855";\n}\n.reactTableComponent .icon.thresholdIcon.sap-checkmark:before {\n  content: "\\e1c1";\n}\n.reactTableComponent .icon.thresholdIcon.sap-alert:before {\n  content: "\\e053";\n}\n.reactTableComponent .icon.thresholdIcon.sap-error:before {\n  content: "\\e1ec";\n}\n.reactTableComponent .icon.thresholdIcon.outline-fill:before {\n  content: "\\e735";\n}\n.reactTableComponent .icon.thresholdIcon.sap-information:before {\n  content: "\\e289";\n}\n.reactTableComponent .icon.dataLocking {\n  display: inline-block;\n}\n.reactTableComponent .icon.dataLocking.locked:before {\n  content: "\\e621";\n}\n.reactTableComponent .icon.dataLocking.loading:before {\n  content: "\\e6e9";\n}\n.reactTableComponent .icon.dataLocking.unknown:before {\n  content: "\\e63a";\n}\n.reactTableComponent .icon.dataLocking.mixed:before {\n  content: "\\e7ab";\n}\n.reactTableComponent .icon.validationWarning.INVALID:before {\n  display: inline-block;\n  content: "\\e637";\n}\n.reactTableComponent .icon.aiGenerated {\n  font-family: "SAP-icons";\n}\n.reactTableComponent .icon.aiGenerated:before {\n  display: inline-block;\n  content: "\\e2a5";\n}\n.reactTableComponent .icon.selectAllCellsIcon:after {\n  display: inline-block;\n  content: "\\E661";\n  font-size: 1.625rem;\n  position: absolute;\n  top: 6px;\n  font-family: "fpa-icons";\n  right: 4px;\n  color: rgba(47, 60, 72, 0.2);\n}\n.reactTableComponent .icon.emptyAxisRowSwapIcon:after {\n  content: "\\E762";\n  font-family: "fpa-icons";\n}\n.reactTableComponent .icon.emptyAxisColumnSwapIcon:after {\n  content: "\\E646";\n  font-family: "fpa-icons";\n}\n',""]);const i=o},200:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,'/*\n    this file covers the styling of the react table and should be independent of SAC/FIORI\n */\n.sacGridTableRoot {\n  overflow: hidden;\n}\n.reactTableComponent {\n  width: 100%;\n  height: 100%;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  cursor: default;\n}\n.reactTableComponent .tableContainer {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n.reactTableComponent .tableContainer .selectionDragger {\n  z-index: 95;\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid #fff;\n  cursor: crosshair;\n  pointer-events: auto;\n  bottom: -2px;\n  right: -2px;\n}\n.reactTableComponent .tableContainer .reactTable {\n  table-layout: fixed;\n  border-collapse: separate;\n  border-spacing: 0px;\n  box-sizing: border-box;\n}\n.reactTableComponent .tableContainer .reactTable .tableCell {\n  font-size: 13px;\n  line-height: 16px;\n  font-weight: normal;\n  font-family: "72-Web", Arial, Helvetica, sans-serif;\n  font-style: normal;\n  color: #333;\n  fill: #333;\n  padding-top: 2px;\n}\n.reactTableComponent .tableContainer .reactTable .tableCell .centerImageHorizontal {\n  position: absolute;\n  top: 4px;\n  left: 50%;\n  transform: translate(-50%);\n}\n.reactTableComponent .tableContainer .reactTable .tableCell .border {\n  z-index: 92;\n  pointer-events: none;\n}\n.reactTableComponent .tableContainer .reactTable .tableCell .defaultBorderStyle.border {\n  border-bottom-width: 1px;\n  border-bottom-style: solid;\n  left: 4px;\n  position: absolute;\n  box-sizing: border-box;\n}\n.reactTableComponent .tableContainer .reactTable .tableCell .defaultBorderStyle.bottomBorder {\n  border-bottom-color: #cccccc;\n  bottom: 0px;\n}\n.reactTableComponent .tableContainer .reactTable .tableCell.headerCell.rowDimHeader .defaultBorderStyle.topBorder,\n.reactTableComponent .tableContainer .reactTable .tableCell.headerCell.attributeRowDimHeader .defaultBorderStyle.topBorder {\n  border-bottom-color: #3f5161;\n  top: 0px;\n}\n.reactTableComponent .tableContainer .reactTable .tableCell.headerCell.colDimHeader .defaultBorderStyle.bottomBorder,\n.reactTableComponent .tableContainer .reactTable .tableCell.headerCell.colDimMember .defaultBorderStyle.bottomBorder,\n.reactTableComponent .tableContainer .reactTable .tableCell.headerCell.attributeColDimMember .bottomBorder {\n  border-bottom-color: #3f5161;\n}\n.reactTableComponent .tableContainer .reactTable .tableCell.headerCell.colDimMember.dimensionMember.CategoryAC .defaultBorderStyle.bottomBorder {\n  height: 5px;\n  background-color: #3f5161;\n  bottom: 0px;\n}\n.reactTableComponent .tableContainer .reactTable .tableCell.headerCell.colDimMember.dimensionMember.CategoryBU .defaultBorderStyle.bottomBorder {\n  height: 5px;\n  border: 1px solid #3f5161;\n  bottom: 0px;\n}\n.reactTableComponent .tableContainer .reactTable .tableCell.headerCell.colDimMember.dimensionMember.CategoryFC .defaultBorderStyle.bottomBorder,\n.reactTableComponent .tableContainer .reactTable .tableCell.headerCell.colDimMember.dimensionMember.CategoryRF .defaultBorderStyle.bottomBorder {\n  bottom: 0px;\n  height: 5px;\n  border: 1px solid #3f5161;\n  background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXR0ZXJuIGlkPSJoYXRjaGluZzEtc3ZnLXBhdHRlcm4tIiBoZWlnaHQ9IjYiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiIHdpZHRoPSI2Ij48cmVjdCB3aWR0aD0iNiIgaGVpZ2h0PSI2IiBmaWxsPSIjRkZGRkZGIj48L3JlY3Q+PHBhdGggZD0iTS0xLDEgbDIsLTIgTTAsNiBsNiwtNiBNNSw3IGwyLC0yIiBzdHJva2U9InJnYig2Myw4MSw5NykiIHN0cm9rZS13aWR0aD0iMSI+PC9wYXRoPjwvcGF0dGVybj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2hhdGNoaW5nMS1zdmctcGF0dGVybi0pIj48L3JlY3Q+PC9zdmc+);\n}\n.reactTableComponent .tableContainer .reactTable .tableCell.headerCell.colDimMember.dimensionMember.CategoryPL .defaultBorderStyle.bottomBorder {\n  bottom: 0px;\n  height: 5px;\n  border: 1px solid #3f5161;\n  background-color: transparent;\n}\n.reactTableComponent .tableContainer .reactTable .tableCell .tableCellHyperlink {\n  color: #0070b1;\n  text-decoration: none;\n  cursor: pointer;\n}\n.reactTableComponent .tableContainer .reactTable .tableCell .tableCellHyperlink:hover {\n  text-decoration: underline;\n}\n.reactTableComponent .tableContainer .reactTable .tableCell.readOnly {\n  color: #999999;\n  fill: #999999;\n}\n.reactTableComponent .tableContainer .reactTable .tableCell.cellDropZoneFocus {\n  background-color: rgba(59, 111, 154, 0.8);\n  color: #ffffff;\n}\n.reactTableComponent .tableContainer .reactTable .chartCell > svg {\n  /* Horizontally align in-cell charts to be able to adjust their horizontal padding */\n  display: block;\n}\n.reactTableComponent .tableContainer .reactTable .totals {\n  font-weight: bold;\n}\n.reactTableComponent .tableContainer .reactTable .headerCell.colDimHeader,\n.reactTableComponent .tableContainer .reactTable .headerCell.rowDimHeader {\n  font-weight: bold;\n}\n.reactTableComponent .tableContainer .reactTable .headerCell.attributeColDimMember,\n.reactTableComponent .tableContainer .reactTable .headerCell.attributeRowDimMember {\n  font-style: italic;\n}\n.reactTableComponent .tableContainer .reactTable .headerCell.attributeColDimHeader,\n.reactTableComponent .tableContainer .reactTable .headerCell.attributeRowDimHeader {\n  font-weight: normal;\n  font-style: italic;\n}\n.reactTableComponent .tableContainer .reactTable .headerCell.colDimHeader,\n.reactTableComponent .tableContainer .reactTable .headerCell.colDimMember,\n.reactTableComponent .tableContainer .reactTable .headerCell.newLine {\n  text-align: right;\n  justify-content: flex-end;\n}\n.reactTableComponent .tableContainer .reactTable .headerCell.cellWithIcons {\n  font-style: normal;\n  justify-content: flex-start;\n}\n.reactTableComponent .tableContainer .reactTable .headerCell.cellWithIcons .cellValue {\n  align-items: center;\n  display: flex;\n  box-sizing: border-box;\n}\n.reactTableComponent .tableContainer .reactTable .headerCell.cellWithIcons.rowDimHeader .cellValue {\n  font-weight: bold;\n  justify-content: flex-start;\n}\n.reactTableComponent .tableContainer .reactTable .headerCell.cellWithIcons.colDimHeader .cellValue {\n  font-weight: bold;\n  justify-content: flex-end;\n}\n.reactTableComponent .tableContainer .reactTable .headerCell.cellWithIcons.colDimMember {\n  justify-content: flex-end;\n}\n.reactTableComponent .tableContainer .reactTable .headerCell.cellWithIcons.colDimMember .cellValue {\n  justify-content: flex-end;\n}\n.reactTableComponent .tableContainer .reactTable .headerCell.cellWithIcons.attributeColDimHeader .cellValue,\n.reactTableComponent .tableContainer .reactTable .headerCell.cellWithIcons.attributeRowDimHeader .cellValue {\n  font-weight: normal;\n  font-style: italic;\n}\n.reactTableComponent .tableContainer .reactTable .headerCell.cellWithIcons.attributeColDimMember .cellValue,\n.reactTableComponent .tableContainer .reactTable .headerCell.cellWithIcons.attributeRowDimMember .cellValue {\n  font-style: italic;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 2px 8px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  position: absolute;\n  display: flex;\n  align-items: center;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell:before {\n  display: none;\n  content: none;\n  width: calc(100% - 1px);\n  height: calc(100% - 1px);\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell a:link {\n  color: #0070b1;\n  text-decoration: none;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell a:link:visited {\n  color: #0070b1;\n  text-decoration: none;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell a:link:hover {\n  color: #0070b1;\n  text-decoration: underline;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.dataCell {\n  text-align: right;\n  justify-content: flex-end;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.cellInHierarchy {\n  padding-top: 0px;\n  padding-left: 0px;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.locked,\n.reactTableComponent .tableContainer .reactTable .tableDivCell.referenceToLockedCell {\n  background-color: #f0f0f0;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.referencedCell {\n  background-color: rgba(255, 170, 73, 0.3);\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.noHorizontalPadding {\n  padding-left: 0px;\n  padding-right: 0px;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell .icon.nextToCellValue {\n  padding-right: 4px;\n  float: left;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell .icon.thresholdIcon {\n  line-height: 1rem;\n  font-size: 1rem;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell .icon.dataLocking {\n  font-size: 0.75rem;\n  color: #acacad;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell .icon.validationWarning {\n  font-size: 0.75rem;\n  color: #f9a429;\n  line-height: 16px;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell .icon.aiGenerated {\n  font-size: 0.75rem;\n  color: #0057d2;\n  line-height: 16px;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell .cellEditor {\n  overflow: visible;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.unbooked svg {\n  position: absolute;\n  top: 0;\n  left: 5px;\n  width: calc(100% - 10px);\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.unbooked svg line {\n  stroke: #e6e7e8;\n  stroke-width: 1px;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.editing {\n  overflow: visible;\n  padding: 0 !important;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.commentCell {\n  text-align: left;\n  justify-content: flex-start;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.rowDimHeader,\n.reactTableComponent .tableContainer .reactTable .tableDivCell.attributeRowDimHeader {\n  text-align: left;\n  justify-content: flex-start;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.colDimHeader {\n  text-align: right;\n  justify-content: flex-end;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.coordinateHeader {\n  width: 55px;\n  vertical-align: middle;\n  justify-content: center;\n  font-size: 12px;\n  background-color: #f7f7f7;\n  color: #58595b;\n  text-align: center;\n  padding: 2px 0;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.coordinateHeader.coordinateHeaderColumn,\n.reactTableComponent .tableContainer .reactTable .tableDivCell.coordinateHeader.coordinateCorner {\n  border-bottom: 1px solid #cccccc;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.coordinateHeader.coordinateHeaderRow,\n.reactTableComponent .tableContainer .reactTable .tableDivCell.coordinateHeader.coordinateCorner {\n  border-right: 1px solid #cccccc;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.coordinateHeader.coordinateHeaderSelectedDesign {\n  color: white;\n  background-color: #f26d1a;\n  border-color: #d85a0c;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.coordinateHeader.coordinateHeaderSelectedView {\n  color: white;\n  background-color: #427cac;\n  border-color: #37678f;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.rowDimMember {\n  text-align: left;\n  justify-content: flex-start;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.rowDimMember .sacGridDrillIconAndText,\n.reactTableComponent .tableContainer .reactTable .tableDivCell.rowDimMember .sacGridDrillIconAndText .icon {\n  align-items: center;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.colDimMember .sacGridDrillIconAndText,\n.reactTableComponent .tableContainer .reactTable .tableDivCell.colDimMember .sacGridDrillIconAndText .icon {\n  align-items: flex-start;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.colDimMember.cellInHierarchy {\n  vertical-align: top !important;\n  align-items: flex-start !important;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.colDimMember.cellInHierarchy .textOverflow {\n  vertical-align: top !important;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell .showEllipsis,\n.reactTableComponent .tableContainer .reactTable .tableDivCell .showEllipsis a {\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell .hierarchyCellText {\n  display: flex;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell .sacGridDrillIconAndText {\n  display: flex;\n  justify-items: flex-end;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell .textOverflow {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  vertical-align: middle;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell .colSelection {\n  position: absolute;\n  width: 100%;\n  height: 10px;\n  background: transparent;\n  top: 0;\n  left: 0;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell .rowSelection {\n  position: absolute;\n  width: 10px;\n  height: 100%;\n  background: transparent;\n  top: 0;\n  left: 0;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.modified {\n  background-color: #fdf1cc !important;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.modifiedMDE {\n  background-color: #ebf2f7 !important;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell .cutOffContent {\n  width: 100%;\n  justify-content: inherit;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.chartCell {\n  align-items: center;\n  justify-content: center;\n}\n.reactTableComponent .tableContainer .reactTable .tableDivCell.cellWithIcons {\n  justify-content: flex-start;\n}\n.reactTableComponent .tableContainer .reactTable .cellValue {\n  flex: 1;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  cursor: inherit;\n}\n.reactTableComponent .tableContainer .reactTable.columnsSelected .coordinateHeaderRow.coordinateHeader.coordinateHeaderSelectedView,\n.reactTableComponent .tableContainer .reactTable.columnsSelected .coordinateHeaderRow.coordinateHeader.coordinateHeaderSelectedDesign {\n  background-color: #89919A;\n  border-color: #5E696E;\n}\n.reactTableComponent .tableContainer .reactTable.rowsSelected .coordinateHeaderColumn.coordinateHeader.coordinateHeaderSelectedView,\n.reactTableComponent .tableContainer .reactTable.rowsSelected .coordinateHeaderColumn.coordinateHeader.coordinateHeaderSelectedDesign {\n  background-color: #89919A;\n  border-color: #5E696E;\n}\n.reactTableComponent .tableContainer .columnResizer {\n  position: absolute;\n  width: 5px;\n  height: 100%;\n  top: 0;\n  z-index: 97;\n  cursor: col-resize;\n}\n.reactTableComponent .tableContainer .columnResizeIndicator {\n  display: none;\n  border-left: 1px dashed #000;\n  width: 5px;\n  height: 100%;\n  top: 0;\n  position: absolute;\n  box-sizing: border-box;\n  z-index: 98;\n}\n.reactTableComponent .tableContainer .rowColOverlay {\n  position: absolute;\n  display: none;\n  background-color: rgba(169, 198, 222, 0.2);\n  pointer-events: none;\n}\n.reactTableComponent .tableContainer .overlayBorder {\n  z-index: 95;\n}\n.reactTableComponent .tableContainer .overlay {\n  z-index: 93;\n}\n.reactTableComponent .tableContainer .htmlTableWrapper.showGrid .tableDivCell {\n  border: 1px solid #e6e7e8;\n  border-width: 0 1px 1px 0;\n}\n.reactTableComponent .tableContainer .htmlTableWrapper.showGrid .freezeSectiontopLeft .tableDivCell:first-child,\n.reactTableComponent .tableContainer .htmlTableWrapper.showGrid .freezeSectionbottomLeft .tableDivCell:first-child {\n  border-left-width: 1px;\n}\n.reactTableComponent .tableContainer .htmlTableWrapper.showGrid .freezeSectiontopLeft .reactTable:not(.titleVisible) .tableDivRow:first-child .tableDivCell,\n.reactTableComponent .tableContainer .htmlTableWrapper.showGrid .freezeSectiontopRight .reactTable:not(.titleVisible) .tableDivRow:first-child .tableDivCell {\n  border-top-width: 1px;\n}\n.reactTableComponent .titleWrapper {\n  position: relative;\n  box-sizing: border-box;\n  display: flex;\n  align-items: flex-start;\n  flex-direction: column;\n  justify-content: center;\n  padding: 4px 1px;\n  /* contributes to CONSTANTS.TITLE_PADDING_HORIZONTAL and CONSTANTS.TITLE_PADDING_VERTICAL */\n  cursor: default;\n}\n.reactTableComponent .titleWrapper.selected {\n  border: 1px solid #3b6f9a;\n  padding: 3px 0px;\n}\n.reactTableComponent .titleWrapper.editing .sapReportEngineTokenContainer,\n.reactTableComponent .titleWrapper.editing .sapReportEngineTitle {\n  display: none;\n}\n.reactTableComponent .titleWrapper:hover .titleOverlay {\n  background-color: rgba(249, 187, 149, 0.2);\n  pointer-events: none;\n}\n.reactTableComponent .titleWrapper .titleOverlay {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.reactTableComponent .titleWrapper .sapReportEngineTitle {\n  font-size: 16px;\n  /* Defaults.FONT_SIZE_TITLE */\n  color: #333;\n  padding: 0 4px;\n  /* contributes to CONSTANTS.TITLE_PADDING_HORIZONTAL */\n  white-space: pre-line;\n}\n.reactTableComponent .titleWrapper .sapReportEngineTokenContainer {\n  margin-top: -4px;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  box-sizing: border-box;\n  padding: 0 4px;\n  height: 100%;\n  width: 100%;\n}\n.reactTableComponent .titleWrapper .sapReportEngineTokenContainer .sapReportEngineTokenLinkText,\n.reactTableComponent .titleWrapper .sapReportEngineTokenContainer .subTitleTokenIcon {\n  color: #0070b1;\n}\n.reactTableComponent .titleWrapper .sapReportEngineTokenContainer .titleToken {\n  white-space: nowrap;\n}\n.reactTableComponent .titleWrapper .sapReportEngineTokenContainer .sapReportEngineToken {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  min-height: 20px;\n  margin-top: 4px;\n}\n.reactTableComponent .titleWrapper .sapReportEngineTokenContainer .sapReportEngineToken .sapReportEngineDatasetIcon {\n  width: 15px;\n}\n.reactTableComponent .titleWrapper .sapReportEngineTokenContainer .sapReportEngineTokenSeparator {\n  display: inline;\n  width: 1px;\n  height: 20px;\n  margin-left: 5px;\n  margin-right: 5px;\n  border-left: 1px solid rgba(63, 81, 97, 0.2);\n  padding-left: 1px;\n  padding-right: 1px;\n}\n.reactTableComponent .titleWrapper .titleEditor {\n  overflow: visible;\n}\n.reactTableComponent .titleWrapper .titleEditor .CodeMirror {\n  box-shadow: none;\n  font-weight: 400;\n  border: none;\n}\n.reactTableComponent .titleWrapper .titleEditor .CodeMirror .CodeMirror-sizer {\n  box-shadow: 1px 1px 4px 0px rgba(0, 10, 26, 0.1);\n}\n.reactTableComponent .dropZones {\n  position: absolute;\n  left: 0;\n  top: 0;\n  height: 100%;\n  width: 100%;\n}\n.reactTableComponent .lineDropZone {\n  background-clip: padding-box;\n  background-color: transparent;\n  border-color: transparent;\n  border-style: solid;\n  box-sizing: border-box;\n  position: absolute;\n  z-index: 99;\n}\n.reactTableComponent .columnDropZone {\n  border-width: 0 0.625rem;\n  margin-left: -0.75rem;\n  width: 1.5rem;\n}\n.reactTableComponent .rowDropZone {\n  border-width: 0.625rem 0;\n  margin-top: -0.75rem;\n  height: 1.5rem;\n}\n.reactTableComponent .cellDropZoneBackground {\n  position: absolute;\n  background-color: transparent;\n  z-index: 91;\n}\n.reactTableComponent .areaDropZoneForeground {\n  position: absolute;\n  background-color: transparent;\n  border: 0.25rem solid transparent;\n  box-sizing: border-box;\n  z-index: 99;\n}\n.reactTableComponent .columnDropZone.dropZoneIndex0 {\n  margin-left: -0.625rem;\n}\n.reactTableComponent .rowDropZone.dropZoneIndex0 {\n  margin-top: -0.625rem;\n}\n.reactTableComponent .columnDropZone.dropZoneFocus,\n.reactTableComponent .rowDropZone.dropZoneFocus {\n  background-color: rgba(59, 111, 154, 0.8);\n}\n.reactTableComponent .areaDropZoneForeground.dropZoneFocus {\n  border-color: rgba(59, 111, 154, 0.8);\n}\n.reactTableComponent .resizeInfo {\n  font-size: 12px;\n  line-height: 20px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 20px;\n  width: 50px;\n  vertical-align: middle;\n  text-align: center;\n  border: 1px solid #000000;\n  background-color: #ffffff;\n  border-radius: 4px;\n  margin-left: 1px;\n}\n.reactTableComponent .rowResizeIndicator,\n.reactTableComponent .titleResizeIndicator {\n  display: none;\n  border-top: 1px dashed #000;\n  width: 100%;\n  height: 5px;\n  left: 0;\n  position: absolute;\n  box-sizing: border-box;\n  z-index: 98;\n}\n.reactTableComponent .selected .titleResizeIndicator {\n  margin-top: -1px;\n}\n.reactTableComponent .rowResizer {\n  position: absolute;\n  height: 5px;\n  width: 100%;\n  left: 0px;\n  z-index: 97;\n  cursor: row-resize;\n}\n.reactTableComponent .titleResizer {\n  position: absolute;\n  height: 5px;\n  width: 100%;\n  left: 0px;\n  z-index: 97;\n  cursor: row-resize;\n  bottom: 0;\n}\n.reactTableComponent .resizing.titleResizer,\n.reactTableComponent .resizing.rowResizer,\n.reactTableComponent .resizing.columnResizer {\n  cursor: default;\n}\n.reactTableComponent .freezeLine {\n  background: #a5a7a9;\n  z-index: 94;\n}\n.reactTableComponent .sacGridCellIcon {\n  padding: 0 2px;\n  width: 16px;\n  height: 16px;\n  box-sizing: border-box;\n  cursor: pointer;\n  font-weight: normal;\n}\n.reactTableComponent .sacGridCellIcon.sacGridCellIconRightFirst {\n  margin-left: auto;\n}\n.reactTableComponent .tableDivCell:hover .sacGridCellDragHandle {\n  background-color: transparent;\n  display: block;\n  color: #2d2d2d;\n}\n.reactTableComponent .sacGridCellDragHandle {\n  z-index: 103;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 10px;\n  text-align: center;\n  line-height: 10px;\n  border-radius: 3px;\n  font-size: 10px;\n  color: transparent;\n  cursor: grab;\n  display: none;\n}\n.reactTableComponent .sacGridCellDragHandle:active {\n  cursor: grabbing;\n}\n.reactTableComponent .sacGridCellDropArea {\n  display: none;\n  position: absolute;\n  z-index: 102;\n  box-sizing: border-box;\n}\n.reactTableComponent .sacGridCellDropArea.dropAreaFocused {\n  background-color: rgba(0, 112, 177, 0.05);\n  border: 1px solid #427cac;\n}\n.reactTableComponent .sacGridCellDropArea.sacGridRowsDropAreas {\n  width: 50%;\n  height: 100%;\n  top: 0;\n}\n.reactTableComponent .sacGridCellDropArea.sacGridRowsDropAreas.sacGridCellDropAreaLeft {\n  left: 0;\n}\n.reactTableComponent .sacGridCellDropArea.sacGridRowsDropAreas.sacGridCellDropAreaRight {\n  right: 0;\n}\n.reactTableComponent .sacGridCellDropArea.sacGridColumnsDropAreas {\n  width: 100%;\n  height: 50%;\n  left: 0;\n}\n.reactTableComponent .sacGridCellDropArea.sacGridColumnsDropAreas.sacGridCellDropAreaLeft {\n  top: 0;\n}\n.reactTableComponent .sacGridCellDropArea.sacGridColumnsDropAreas.sacGridCellDropAreaRight {\n  bottom: 0;\n}\n.reactTableComponent .emptyAxisDropArea {\n  display: none;\n  position: absolute;\n  z-index: 102;\n  box-sizing: border-box;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n}\n.reactTableComponent .emptyAxisDropArea .emptyAxisRowSwapIcon,\n.reactTableComponent .emptyAxisDropArea .emptyAxisColumnSwapIcon {\n  padding-left: 4px;\n  display: none;\n  font-size: 1rem;\n  pointer-events: none;\n  color: #427cac;\n}\n.reactTableComponent .emptyAxisDropArea.dropAreaFocused {\n  background-color: rgba(0, 112, 177, 0.05);\n  border: 1px solid #427cac;\n}\n.reactTableComponent .emptyAxisDropArea.dropAreaFocused .emptyAxisRowSwapIcon,\n.reactTableComponent .emptyAxisDropArea.dropAreaFocused .emptyAxisColumnSwapIcon {\n  display: block;\n}\n.reactTableComponent .stickyMembersContainer {\n  position: absolute;\n  pointer-events: none;\n  width: 100%;\n  height: 100%;\n  left: 0px;\n}\n.reactTableComponent .stickyMembersContainer .stickyMembersFreezeSection {\n  position: absolute;\n  overflow: hidden;\n}\n.reactTableComponent .stickyMembersContainer .stickyMembersGroup {\n  position: absolute;\n  z-index: 96;\n}\n.reactTableComponent .stickyMembersContainer .stickyMembersGroup .stickyMemberElement {\n  background-color: white;\n  box-shadow: 1px 1px 4px 0px rgba(0, 10, 26, 0.1);\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  margin: 0;\n  border-radius: 5px;\n  border: 1px solid #e6e7e8;\n  box-sizing: border-box;\n  font-size: 13px;\n  font-weight: normal;\n  font-family: "72-Web", Arial, Helvetica, sans-serif;\n  font-style: normal;\n  color: #333;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n}\n.reactTableComponent .stickyMembersContainer .stickyMembersGroup .stickyMemberElement .cutOffContent {\n  width: 100%;\n  justify-content: inherit;\n}\n.reactTableComponent .stickyMembersContainer .stickyMembersGroup .stickyMemberElement .textOverflow {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  vertical-align: middle;\n}\n.reactTableComponent .stickyMembersContainer .stickyMembersGroup .stickyMemberElement .showEllipsis,\n.reactTableComponent .stickyMembersContainer .stickyMembersGroup .stickyMemberElement .showEllipsis a {\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.reactTableComponent .stickyMembersContainer .stickyMembersGroup .stickyMemberElement.columnStickyMember {\n  vertical-align: top !important;\n  align-items: flex-start !important;\n}\n.reactTableComponent .stickyMembersContainer .stickyMembersGroup .stickyMemberElement.columnStickyMember .textOverflow {\n  vertical-align: top !important;\n}\n.reactTableComponent .stickyMembersContainer .stickyMembersGroup .stickyMemberElement .hierarchyCellText {\n  display: flex;\n}\n.reactTableComponent .sacGridTableRoot .refCellHasDrill .cellValue {\n  padding-left: 16px;\n}\n.reactTableComponent .sacGridTableRoot.sacGridMobile .refCellHasDrill .cellValue {\n  padding-left: 30px;\n}\n.reactTableComponent .icon.hierarchyIcon {\n  width: 16px;\n  height: 16px;\n  display: flex;\n  font-size: 0.75rem;\n  text-align: center;\n}\n.reactTableComponent .icon.hierarchyIconMobile {\n  width: 30px;\n  height: 30px;\n  display: flex;\n  font-size: 1rem;\n  text-align: center;\n}\n.reactTableComponent .stickyMembersContainer .icon.hierarchyIcon,\n.reactTableComponent .stickyMembersContainer .icon.hierarchyIconMobile {\n  color: rgba(51, 51, 51, 0.5);\n  min-width: 16px;\n}\n.reactTableComponent .stickyMembersContainer .icon.hierarchyIconMobile {\n  display: inline-block;\n  height: unset;\n  width: unset;\n}\n.tableContainer.draggingInProcess .sacGridCellDropArea {\n  display: block;\n}\n.tableContainer.draggingInProcess .emptyAxisDropArea {\n  display: flex;\n  align-items: center;\n}\n.tableContainer.draggingInProcess .lineDropZone {\n  display: flex;\n}\n.loadingArea {\n  pointer-events: none;\n  opacity: 0;\n  position: absolute;\n  background: rgba(255, 255, 255, 0.2);\n  z-index: 97;\n}\n.loadingArea .loadingIndicatorGif {\n  width: 40px;\n  height: 20px;\n  position: absolute;\n}\n.sacGridHiddenTextArea {\n  position: absolute;\n  width: 0;\n  height: 0;\n  opacity: 0;\n}\n#sacGridEditorContainer {\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  display: flex;\n  justify-content: inherit;\n  z-index: 103;\n  padding: 2px 8px;\n}\n',""]);const i=o},16:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,".freezeLine {\n  pointer-events: none;\n  position: absolute;\n}\n.freezeLine.verticalFreezeLine {\n  width: 2px;\n}\n.freezeLine.horizontalFreezeLine {\n  height: 2px;\n}\n",""]);const i=o},24:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,".scrollbarContainer {\n  background: transparent;\n  position: absolute;\n  overflow: scroll;\n  z-index: 100;\n}\n.scrollbarContainer.vertical {\n  height: calc(100% -  12px);\n  width: 12px;\n  right: 0;\n  top: 0;\n  overflow-x: hidden;\n}\n.scrollbarContainer.horizontal {\n  width: calc(100% -  12px);\n  height: 12px;\n  bottom: 0;\n  left: 0;\n  overflow-y: hidden;\n}\n.scrollableSize {\n  position: relative;\n  border-radius: 2px;\n  min-height: 12px;\n  min-width: 12px;\n}\n",""]);const i=o},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n}).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var l=this[i][0];null!=l&&(o[l]=!0)}for(var s=0;s<e.length;s++){var a=[].concat(e[s]);r&&o[a[0]]||(n&&(a[2]?a[2]="".concat(n," and ").concat(a[2]):a[2]=n),t.push(a))}},t}},418:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,i){for(var l,s,a=o(e),c=1;c<arguments.length;c++){for(var u in l=Object(arguments[c]))n.call(l,u)&&(a[u]=l[u]);if(t){s=t(l);for(var h=0;h<s.length;h++)r.call(l,s[h])&&(a[s[h]]=l[s[h]])}}return a}},448:(e,t,n)=>{"use strict";var r=n(294),o=n(418),i=n(840);function l(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(l(227));var s=new Set,a={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,f={},g={};function m(e,t,n,r,o,i,l){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){v[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){v[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){v[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){v[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){v[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function C(e,t,n,r){var o=v.hasOwnProperty(t)?v[t]:null;(null!==o?0===o.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!p.call(g,e)||!p.call(f,e)&&(d.test(e)?g[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,b);v[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,b);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,b);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=60103,R=60106,T=60107,E=60108,D=60114,k=60109,O=60110,x=60112,A=60113,L=60120,I=60115,M=60116,P=60121,H=60128,_=60129,N=60130,z=60131;if("function"==typeof Symbol&&Symbol.for){var B=Symbol.for;S=B("react.element"),R=B("react.portal"),T=B("react.fragment"),E=B("react.strict_mode"),D=B("react.profiler"),k=B("react.provider"),O=B("react.context"),x=B("react.forward_ref"),A=B("react.suspense"),L=B("react.suspense_list"),I=B("react.memo"),M=B("react.lazy"),P=B("react.block"),B("react.scope"),H=B("react.opaque.id"),_=B("react.debug_trace_mode"),N=B("react.offscreen"),z=B("react.legacy_hidden")}var F,W="function"==typeof Symbol&&Symbol.iterator;function j(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=W&&e[W]||e["@@iterator"])?e:null}function V(e){if(void 0===F)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var U=!1;function G(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var o=e.stack.split("\n"),i=r.stack.split("\n"),l=o.length-1,s=i.length-1;1<=l&&0<=s&&o[l]!==i[s];)s--;for(;1<=l&&0<=s;l--,s--)if(o[l]!==i[s]){if(1!==l||1!==s)do{if(l--,0>--s||o[l]!==i[s])return"\n"+o[l].replace(" at new "," at ")}while(1<=l&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function K(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return G(e.type,!1);case 11:return G(e.type.render,!1);case 22:return G(e.type._render,!1);case 1:return G(e.type,!0);default:return""}}function Z(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case T:return"Fragment";case R:return"Portal";case D:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case L:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case O:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case I:return Z(e.type);case P:return Z(e._render);case M:t=e._payload,e=e._init;try{return Z(e(t))}catch(e){}}return null}function X(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return o({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=X(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&C(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=X(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?oe(e,t.type,n):t.hasOwnProperty("defaultValue")&&oe(e,t.type,X(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function oe(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ie(e,t){return e=o({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function le(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+X(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(l(91));return o({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(l(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(l(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:X(n)}}function ce(e,t){var n=X(t.value),r=X(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ue(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var fe,ge,me=(ge=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((fe=fe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ge(e,t)})}:ge);function ve(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ye={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function Ce(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ye.hasOwnProperty(e)&&ye[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=Ce(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(ye).forEach(function(e){be.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ye[t]=ye[e]})});var Se=o({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Re(e,t){if(t){if(Se[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(l(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(l(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(l(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(l(62))}}function Te(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var De=null,ke=null,Oe=null;function xe(e){if(e=Qr(e)){if("function"!=typeof De)throw Error(l(280));var t=e.stateNode;t&&(t=eo(t),De(e.stateNode,e.type,t))}}function Ae(e){ke?Oe?Oe.push(e):Oe=[e]:ke=e}function Le(){if(ke){var e=ke,t=Oe;if(Oe=ke=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function Ie(e,t){return e(t)}function Me(e,t,n,r,o){return e(t,n,r,o)}function Pe(){}var He=Ie,_e=!1,Ne=!1;function ze(){null===ke&&null===Oe||(Pe(),Le())}function Be(e,t){var n=e.stateNode;if(null===n)return null;var r=eo(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(l(231,t,typeof n));return n}var Fe=!1;if(h)try{var We={};Object.defineProperty(We,"passive",{get:function(){Fe=!0}}),window.addEventListener("test",We,We),window.removeEventListener("test",We,We)}catch(ge){Fe=!1}function je(e,t,n,r,o,i,l,s,a){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var Ve=!1,Ue=null,Ge=!1,Ke=null,Ze={onError:function(e){Ve=!0,Ue=e}};function Xe(e,t,n,r,o,i,l,s,a){Ve=!1,Ue=null,je.apply(Ze,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function $e(e){if(qe(e)!==e)throw Error(l(188))}function Qe(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var Je,et,tt,nt,rt=!1,ot=[],it=null,lt=null,st=null,at=new Map,ct=new Map,ut=[],ht="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dt(e,t,n,r,o){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:o,targetContainers:[r]}}function pt(e,t){switch(e){case"focusin":case"focusout":it=null;break;case"dragenter":case"dragleave":lt=null;break;case"mouseover":case"mouseout":st=null;break;case"pointerover":case"pointerout":at.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ct.delete(t.pointerId)}}function ft(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e=dt(t,n,r,o,i),null!==t&&null!==(t=Qr(t))&&et(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function gt(e){var t=$r(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ye(n)))return e.blockedOn=t,void nt(e.lanePriority,function(){i.unstable_runWithPriority(e.priority,function(){tt(n)})})}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Qr(n))&&et(t),e.blockedOn=n,!1;t.shift()}return!0}function vt(e,t,n){mt(e)&&n.delete(t)}function yt(){for(rt=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=Qr(e.blockedOn))&&Je(e);break}for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==it&&mt(it)&&(it=null),null!==lt&&mt(lt)&&(lt=null),null!==st&&mt(st)&&(st=null),at.forEach(vt),ct.forEach(vt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,rt||(rt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,yt)))}function Ct(e){function t(t){return bt(t,e)}if(0<ot.length){bt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==it&&bt(it,e),null!==lt&&bt(lt,e),null!==st&&bt(st,e),at.forEach(t),ct.forEach(t),n=0;n<ut.length;n++)(r=ut[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ut.length&&null===(n=ut[0]).blockedOn;)gt(n),null===n.blockedOn&&ut.shift()}function wt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var St={animationend:wt("Animation","AnimationEnd"),animationiteration:wt("Animation","AnimationIteration"),animationstart:wt("Animation","AnimationStart"),transitionend:wt("Transition","TransitionEnd")},Rt={},Tt={};function Et(e){if(Rt[e])return Rt[e];if(!St[e])return e;var t,n=St[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Rt[e]=n[t];return e}h&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete St.animationend.animation,delete St.animationiteration.animation,delete St.animationstart.animation),"TransitionEvent"in window||delete St.transitionend.transition);var Dt=Et("animationend"),kt=Et("animationiteration"),Ot=Et("animationstart"),xt=Et("transitionend"),At=new Map,Lt=new Map,It=["abort","abort",Dt,"animationEnd",kt,"animationIteration",Ot,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",xt,"transitionEnd","waiting","waiting"];function Mt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],o=e[n+1];o="on"+(o[0].toUpperCase()+o.slice(1)),Lt.set(r,t),At.set(r,o),c(o,[r])}}(0,i.unstable_now)();var Pt=8;function Ht(e){if(0!=(1&e))return Pt=15,1;if(0!=(2&e))return Pt=14,2;if(0!=(4&e))return Pt=13,4;var t=24&e;return 0!==t?(Pt=12,t):0!=(32&e)?(Pt=11,32):0!=(t=192&e)?(Pt=10,t):0!=(256&e)?(Pt=9,256):0!=(t=3584&e)?(Pt=8,t):0!=(4096&e)?(Pt=7,4096):0!=(t=4186112&e)?(Pt=6,t):0!=(t=62914560&e)?(Pt=5,t):67108864&e?(Pt=4,67108864):0!=(134217728&e)?(Pt=3,134217728):0!=(t=805306368&e)?(Pt=2,t):0!=(1073741824&e)?(Pt=1,1073741824):(Pt=8,e)}function _t(e,t){var n=e.pendingLanes;if(0===n)return Pt=0;var r=0,o=0,i=e.expiredLanes,l=e.suspendedLanes,s=e.pingedLanes;if(0!==i)r=i,o=Pt=15;else if(0!=(i=134217727&n)){var a=i&~l;0!==a?(r=Ht(a),o=Pt):0!=(s&=i)&&(r=Ht(s),o=Pt)}else 0!=(i=n&~l)?(r=Ht(i),o=Pt):0!==s&&(r=Ht(s),o=Pt);if(0===r)return 0;if(r=n&((0>(r=31-jt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&l)){if(Ht(t),o<=Pt)return t;Pt=o}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-jt(t)),r|=e[n],t&=~o;return r}function Nt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function zt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?zt(10,t):e;case 10:return 0===(e=Bt(192&~t))?zt(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&0===(e=Bt(4186112&~t))&&(e=512),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(l(358,e))}function Bt(e){return e&-e}function Ft(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Wt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-jt(t)]=n}var jt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Vt(e)/Ut|0)|0},Vt=Math.log,Ut=Math.LN2,Gt=i.unstable_UserBlockingPriority,Kt=i.unstable_runWithPriority,Zt=!0;function Xt(e,t,n,r){_e||Pe();var o=Yt,i=_e;_e=!0;try{Me(o,e,t,n,r)}finally{(_e=i)||ze()}}function qt(e,t,n,r){Kt(Gt,Yt.bind(null,e,t,n,r))}function Yt(e,t,n,r){var o;if(Zt)if((o=0==(4&t))&&0<ot.length&&-1<ht.indexOf(e))e=dt(null,e,t,n,r),ot.push(e);else{var i=$t(e,t,n,r);if(null===i)o&&pt(e,r);else{if(o){if(-1<ht.indexOf(e))return e=dt(i,e,t,n,r),void ot.push(e);if(function(e,t,n,r,o){switch(t){case"focusin":return it=ft(it,e,t,n,r,o),!0;case"dragenter":return lt=ft(lt,e,t,n,r,o),!0;case"mouseover":return st=ft(st,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return at.set(i,ft(at.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,ct.set(i,ft(ct.get(i)||null,e,t,n,r,o)),!0}return!1}(i,e,t,n,r))return;pt(e,r)}Ar(e,t,r,null,n)}}}function $t(e,t,n,r){var o=Ee(r);if(null!==(o=$r(o))){var i=qe(o);if(null===i)o=null;else{var l=i.tag;if(13===l){if(null!==(o=Ye(i)))return o;o=null}else if(3===l){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;o=null}else i!==o&&(o=null)}}return Ar(e,t,r,o,n),null}var Qt=null,Jt=null,en=null;function tn(){if(en)return en;var e,t,n=Jt,r=n.length,o="value"in Qt?Qt.value:Qt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var l=r-e;for(t=1;t<=l&&n[r-t]===o[i-t];t++);return en=o.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function on(){return!1}function ln(e){function t(t,n,r,o,i){for(var l in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(l)&&(t=e[l],this[l]=t?t(o):o[l]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?rn:on,this.isPropagationStopped=on,this}return o(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var sn,an,cn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=ln(un),dn=o({},un,{view:0,detail:0}),pn=ln(dn),fn=o({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(sn=e.screenX-cn.screenX,an=e.screenY-cn.screenY):an=sn=0,cn=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),gn=ln(fn),mn=ln(o({},fn,{dataTransfer:0})),vn=ln(o({},dn,{relatedTarget:0})),yn=ln(o({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=ln(o({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),Cn=ln(o({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Rn[e])&&!!t[e]}function En(){return Tn}var Dn=ln(o({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),kn=ln(o({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=ln(o({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),xn=ln(o({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=ln(o({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Ln=[9,13,27,32],In=h&&"CompositionEvent"in window,Mn=null;h&&"documentMode"in document&&(Mn=document.documentMode);var Pn=h&&"TextEvent"in window&&!Mn,Hn=h&&(!In||Mn&&8<Mn&&11>=Mn),_n=String.fromCharCode(32),Nn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Fn=!1,Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Vn(e,t,n,r){Ae(r),0<(t=Ir(t,"onChange")).length&&(n=new hn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Un=null,Gn=null;function Kn(e){Tr(e,0)}function Zn(e){if($(Jr(e)))return e}function Xn(e,t){if("change"===e)return t}var qn=!1;if(h){var Yn;if(h){var $n="oninput"in document;if(!$n){var Qn=document.createElement("div");Qn.setAttribute("oninput","return;"),$n="function"==typeof Qn.oninput}Yn=$n}else Yn=!1;qn=Yn&&(!document.documentMode||9<document.documentMode)}function Jn(){Un&&(Un.detachEvent("onpropertychange",er),Gn=Un=null)}function er(e){if("value"===e.propertyName&&Zn(Gn)){var t=[];if(Vn(t,Gn,e,Ee(e)),e=Kn,_e)e(t);else{_e=!0;try{Ie(e,t)}finally{_e=!1,ze()}}}}function tr(e,t,n){"focusin"===e?(Jn(),Gn=n,(Un=t).attachEvent("onpropertychange",er)):"focusout"===e&&Jn()}function nr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(Gn)}function rr(e,t){if("click"===e)return Zn(t)}function or(e,t){if("input"===e||"change"===e)return Zn(t)}var ir="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},lr=Object.prototype.hasOwnProperty;function sr(e,t){if(ir(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!lr.call(t,n[r])||!ir(e[n[r]],t[n[r]]))return!1;return!0}function ar(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ar(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ar(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var pr=h&&"documentMode"in document&&11>=document.documentMode,fr=null,gr=null,mr=null,vr=!1;function yr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==fr||fr!==Q(r)||(r="selectionStart"in(r=fr)&&dr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},mr&&sr(mr,r)||(mr=r,0<(r=Ir(gr,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=fr)))}Mt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Mt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Mt(It,2);for(var br="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Cr=0;Cr<br.length;Cr++)Lt.set(br[Cr],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(wr));function Rr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,i,s,a,c){if(Xe.apply(this,arguments),Ve){if(!Ve)throw Error(l(198));var u=Ue;Ve=!1,Ue=null,Ge||(Ge=!0,Ke=u)}}(r,t,void 0,e),e.currentTarget=null}function Tr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var l=r.length-1;0<=l;l--){var s=r[l],a=s.instance,c=s.currentTarget;if(s=s.listener,a!==i&&o.isPropagationStopped())break e;Rr(o,s,c),i=a}else for(l=0;l<r.length;l++){if(a=(s=r[l]).instance,c=s.currentTarget,s=s.listener,a!==i&&o.isPropagationStopped())break e;Rr(o,s,c),i=a}}}if(Ge)throw e=Ke,Ge=!1,Ke=null,e}function Er(e,t){var n=to(t),r=e+"__bubble";n.has(r)||(xr(t,e,2,!1),n.add(r))}var Dr="_reactListening"+Math.random().toString(36).slice(2);function kr(e){e[Dr]||(e[Dr]=!0,s.forEach(function(t){Sr.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)}))}function Or(e,t,n,r){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=n;if("selectionchange"===e&&9!==n.nodeType&&(i=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;o|=2,i=r}var l=to(i),s=e+"__"+(t?"capture":"bubble");l.has(s)||(t&&(o|=4),xr(i,e,o,t),l.add(s))}function xr(e,t,n,r){var o=Lt.get(t);switch(void 0===o?2:o){case 0:o=Xt;break;case 1:o=qt;break;default:o=Yt}n=o.bind(null,t,n,e),o=void 0,!Fe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Ar(e,t,n,r,o){var i=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var l=r.tag;if(3===l||4===l){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===l)for(l=r.return;null!==l;){var a=l.tag;if((3===a||4===a)&&((a=l.stateNode.containerInfo)===o||8===a.nodeType&&a.parentNode===o))return;l=l.return}for(;null!==s;){if(null===(l=$r(s)))return;if(5===(a=l.tag)||6===a){r=i=l;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Ne)return e();Ne=!0;try{He(e,t,n)}finally{Ne=!1,ze()}}(function(){var r=i,o=Ee(n),l=[];e:{var s=At.get(e);if(void 0!==s){var a=hn,c=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":a=Dn;break;case"focusin":c="focus",a=vn;break;case"focusout":c="blur",a=vn;break;case"beforeblur":case"afterblur":a=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":a=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":a=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":a=On;break;case Dt:case kt:case Ot:a=yn;break;case xt:a=xn;break;case"scroll":a=pn;break;case"wheel":a=An;break;case"copy":case"cut":case"paste":a=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":a=kn}var u=0!=(4&t),h=!u&&"scroll"===e,d=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=r;null!==f;){var g=(p=f).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==d&&null!=(g=Be(f,d))&&u.push(Lr(f,g,p))),h)break;f=f.return}0<u.length&&(s=new a(s,c,null,n,o),l.push({event:s,listeners:u}))}}if(0==(7&t)){if(a="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(c=n.relatedTarget||n.fromElement)||!$r(c)&&!c[qr])&&(a||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,a?(a=r,null!==(c=(c=n.relatedTarget||n.toElement)?$r(c):null)&&(c!==(h=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(a=null,c=r),a!==c)){if(u=gn,g="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=kn,g="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==a?s:Jr(a),p=null==c?s:Jr(c),(s=new u(g,f+"leave",a,n,o)).target=h,s.relatedTarget=p,g=null,$r(o)===r&&((u=new u(d,f+"enter",c,n,o)).target=p,u.relatedTarget=h,g=u),h=g,a&&c)e:{for(d=c,f=0,p=u=a;p;p=Mr(p))f++;for(p=0,g=d;g;g=Mr(g))p++;for(;0<f-p;)u=Mr(u),f--;for(;0<p-f;)d=Mr(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=Mr(u),d=Mr(d)}u=null}else u=null;null!==a&&Pr(l,s,a,u,!1),null!==c&&null!==h&&Pr(l,h,c,u,!0)}if("select"===(a=(s=r?Jr(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===a&&"file"===s.type)var m=Xn;else if(jn(s))if(qn)m=or;else{m=nr;var v=tr}else(a=s.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=rr);switch(m&&(m=m(e,r))?Vn(l,m,n,o):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&oe(s,"number",s.value)),v=r?Jr(r):window,e){case"focusin":(jn(v)||"true"===v.contentEditable)&&(fr=v,gr=r,mr=null);break;case"focusout":mr=gr=fr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,yr(l,n,o);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":yr(l,n,o)}var y;if(In)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Fn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Hn&&"ko"!==n.locale&&(Fn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Fn&&(y=tn()):(Jt="value"in(Qt=o)?Qt.value:Qt.textContent,Fn=!0)),0<(v=Ir(r,b)).length&&(b=new Cn(b,e,null,n,o),l.push({event:b,listeners:v}),(y||null!==(y=Bn(n)))&&(b.data=y))),(y=Pn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Nn=!0,_n);case"textInput":return(e=t.data)===_n&&Nn?null:e;default:return null}}(e,n):function(e,t){if(Fn)return"compositionend"===e||!In&&zn(e,t)?(e=tn(),en=Jt=Qt=null,Fn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Hn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&0<(r=Ir(r,"onBeforeInput")).length&&(o=new Cn("onBeforeInput","beforeinput",null,n,o),l.push({event:o,listeners:r}),o.data=y)}Tr(l,t)})}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ir(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Be(e,n))&&r.unshift(Lr(e,i,o)),null!=(i=Be(e,t))&&r.push(Lr(e,i,o))),e=e.return}return r}function Mr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Pr(e,t,n,r,o){for(var i=t._reactName,l=[];null!==n&&n!==r;){var s=n,a=s.alternate,c=s.stateNode;if(null!==a&&a===r)break;5===s.tag&&null!==c&&(s=c,o?null!=(a=Be(n,i))&&l.unshift(Lr(n,a,s)):o||null!=(a=Be(n,i))&&l.push(Lr(n,a,s))),n=n.return}0!==l.length&&e.push({event:t,listeners:l})}function Hr(){}var _r=null,Nr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Br(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Fr="function"==typeof setTimeout?setTimeout:void 0,Wr="function"==typeof clearTimeout?clearTimeout:void 0;function jr(e){(1===e.nodeType||9===e.nodeType&&null!=(e=e.body))&&(e.textContent="")}function Vr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Gr=0,Kr=Math.random().toString(36).slice(2),Zr="__reactFiber$"+Kr,Xr="__reactProps$"+Kr,qr="__reactContainer$"+Kr,Yr="__reactEvents$"+Kr;function $r(e){var t=e[Zr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qr]||n[Zr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ur(e);null!==e;){if(n=e[Zr])return n;e=Ur(e)}return t}n=(e=n).parentNode}return null}function Qr(e){return!(e=e[Zr]||e[qr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Jr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(l(33))}function eo(e){return e[Xr]||null}function to(e){var t=e[Yr];return void 0===t&&(t=e[Yr]=new Set),t}var no=[],ro=-1;function oo(e){return{current:e}}function io(e){0>ro||(e.current=no[ro],no[ro]=null,ro--)}function lo(e,t){ro++,no[ro]=e.current,e.current=t}var so={},ao=oo(so),co=oo(!1),uo=so;function ho(e,t){var n=e.type.contextTypes;if(!n)return so;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function po(e){return null!=e.childContextTypes}function fo(){io(co),io(ao)}function go(e,t,n){if(ao.current!==so)throw Error(l(168));lo(ao,t),lo(co,n)}function mo(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(l(108,Z(t)||"Unknown",i));return o({},n,r)}function vo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||so,uo=ao.current,lo(ao,e),lo(co,co.current),!0}function yo(e,t,n){var r=e.stateNode;if(!r)throw Error(l(169));n?(e=mo(e,t,uo),r.__reactInternalMemoizedMergedChildContext=e,io(co),io(ao),lo(ao,e)):io(co),lo(co,n)}var bo=null,Co=null,wo=i.unstable_runWithPriority,So=i.unstable_scheduleCallback,Ro=i.unstable_cancelCallback,To=i.unstable_shouldYield,Eo=i.unstable_requestPaint,Do=i.unstable_now,ko=i.unstable_getCurrentPriorityLevel,Oo=i.unstable_ImmediatePriority,xo=i.unstable_UserBlockingPriority,Ao=i.unstable_NormalPriority,Lo=i.unstable_LowPriority,Io=i.unstable_IdlePriority,Mo={},Po=void 0!==Eo?Eo:function(){},Ho=null,_o=null,No=!1,zo=Do(),Bo=1e4>zo?Do:function(){return Do()-zo};function Fo(){switch(ko()){case Oo:return 99;case xo:return 98;case Ao:return 97;case Lo:return 96;case Io:return 95;default:throw Error(l(332))}}function Wo(e){switch(e){case 99:return Oo;case 98:return xo;case 97:return Ao;case 96:return Lo;case 95:return Io;default:throw Error(l(332))}}function jo(e,t){return e=Wo(e),wo(e,t)}function Vo(e,t,n){return e=Wo(e),So(e,t,n)}function Uo(){if(null!==_o){var e=_o;_o=null,Ro(e)}Go()}function Go(){if(!No&&null!==Ho){No=!0;var e=0;try{var t=Ho;jo(99,function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}}),Ho=null}catch(t){throw null!==Ho&&(Ho=Ho.slice(e+1)),So(Oo,Uo),t}finally{No=!1}}}var Ko=w.ReactCurrentBatchConfig;function Zo(e,t){if(e&&e.defaultProps){for(var n in t=o({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xo=oo(null),qo=null,Yo=null,$o=null;function Qo(){$o=Yo=qo=null}function Jo(e){var t=Xo.current;io(Xo),e.type._context._currentValue=t}function ei(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ti(e,t){qo=e,$o=Yo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Il=!0),e.firstContext=null)}function ni(e,t){if($o!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||($o=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Yo){if(null===qo)throw Error(l(308));Yo=t,qo.dependencies={lanes:0,firstContext:t,responders:null}}else Yo=Yo.next=t;return e._currentValue}var ri=!1;function oi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ii(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function li(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function si(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ai(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=l:i=i.next=l,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ci(e,t,n,r){var i=e.updateQueue;ri=!1;var l=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var c=a,u=c.next;c.next=null,null===s?l=u:s.next=u,s=c;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==s&&(null===d?h.firstBaseUpdate=u:d.next=u,h.lastBaseUpdate=c)}}if(null!==l){for(d=i.baseState,s=0,h=u=c=null;;){a=l.lane;var p=l.eventTime;if((r&a)===a){null!==h&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var f=e,g=l;switch(a=t,p=n,g.tag){case 1:if("function"==typeof(f=g.payload)){d=f.call(p,d,a);break e}d=f;break e;case 3:f.flags=-4097&f.flags|64;case 0:if(null==(a="function"==typeof(f=g.payload)?f.call(p,d,a):f))break e;d=o({},d,a);break e;case 2:ri=!0}}null!==l.callback&&(e.flags|=32,null===(a=i.effects)?i.effects=[l]:a.push(l))}else p={eventTime:p,lane:a,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===h?(u=h=p,c=d):h=h.next=p,s|=a;if(null===(l=l.next)){if(null===(a=i.shared.pending))break;l=a.next,a.next=null,i.lastBaseUpdate=a,i.shared.pending=null}}null===h&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,Ps|=s,e.lanes=s,e.memoizedState=d}}function ui(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!=typeof o)throw Error(l(191,o));o.call(r)}}}var hi=(new r.Component).refs;function di(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:o({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var pi={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ia(),o=la(e),i=li(r,o);i.payload=t,null!=n&&(i.callback=n),si(e,i),sa(e,o,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ia(),o=la(e),i=li(r,o);i.tag=1,i.payload=t,null!=n&&(i.callback=n),si(e,i),sa(e,o,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ia(),r=la(e),o=li(n,r);o.tag=2,null!=t&&(o.callback=t),si(e,o),sa(e,r,n)}};function fi(e,t,n,r,o,i,l){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,l):!(t.prototype&&t.prototype.isPureReactComponent&&sr(n,r)&&sr(o,i))}function gi(e,t,n){var r=!1,o=so,i=t.contextType;return"object"==typeof i&&null!==i?i=ni(i):(o=po(t)?uo:ao.current,i=(r=null!=(r=t.contextTypes))?ho(e,o):so),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=pi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function mi(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pi.enqueueReplaceState(t,t.state,null)}function vi(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=hi,oi(e);var i=t.contextType;"object"==typeof i&&null!==i?o.context=ni(i):(i=po(t)?uo:ao.current,o.context=ho(e,i)),ci(e,n,o,r),o.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(di(e,t,i,n),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&pi.enqueueReplaceState(o,o.state,null),ci(e,n,o,r),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.flags|=4)}var yi=Array.isArray;function bi(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(l(309));var r=n.stateNode}if(!r)throw Error(l(147,e));var o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=r.refs;t===hi&&(t=r.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}if("string"!=typeof e)throw Error(l(284));if(!n._owner)throw Error(l(290,e))}return e}function Ci(e,t){if("textarea"!==e.type)throw Error(l(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function wi(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=za(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function a(e,t,n,r){return null===t||6!==t.tag?((t=ja(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=o(t,n.props)).ref=bi(e,t,n),r.return=e,r):((r=Ba(n.type,n.key,n.props,null,e.mode,r)).ref=bi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Va(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function h(e,t,n,r,i){return null===t||7!==t.tag?((t=Fa(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=ja(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case S:return(n=Ba(t.type,t.key,t.props,null,e.mode,n)).ref=bi(e,null,t),n.return=e,n;case R:return(t=Va(t,e.mode,n)).return=e,t}if(yi(t)||j(t))return(t=Fa(t,e.mode,n,null)).return=e,t;Ci(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==o?null:a(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===o?n.type===T?h(e,t,n.props.children,r,o):c(e,t,n,r):null;case R:return n.key===o?u(e,t,n,r):null}if(yi(n)||j(n))return null!==o?null:h(e,t,n,r,null);Ci(e,n)}return null}function f(e,t,n,r,o){if("string"==typeof r||"number"==typeof r)return a(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case S:return e=e.get(null===r.key?n:r.key)||null,r.type===T?h(t,e,r.props.children,o,r.key):c(t,e,r,o);case R:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o)}if(yi(r)||j(r))return h(t,e=e.get(n)||null,r,o,null);Ci(t,r)}return null}function g(o,l,s,a){for(var c=null,u=null,h=l,g=l=0,m=null;null!==h&&g<s.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=p(o,h,s[g],a);if(null===v){null===h&&(h=m);break}e&&h&&null===v.alternate&&t(o,h),l=i(v,l,g),null===u?c=v:u.sibling=v,u=v,h=m}if(g===s.length)return n(o,h),c;if(null===h){for(;g<s.length;g++)null!==(h=d(o,s[g],a))&&(l=i(h,l,g),null===u?c=h:u.sibling=h,u=h);return c}for(h=r(o,h);g<s.length;g++)null!==(m=f(h,o,g,s[g],a))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),l=i(m,l,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach(function(e){return t(o,e)}),c}function m(o,s,a,c){var u=j(a);if("function"!=typeof u)throw Error(l(150));if(null==(a=u.call(a)))throw Error(l(151));for(var h=u=null,g=s,m=s=0,v=null,y=a.next();null!==g&&!y.done;m++,y=a.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=p(o,g,y.value,c);if(null===b){null===g&&(g=v);break}e&&g&&null===b.alternate&&t(o,g),s=i(b,s,m),null===h?u=b:h.sibling=b,h=b,g=v}if(y.done)return n(o,g),u;if(null===g){for(;!y.done;m++,y=a.next())null!==(y=d(o,y.value,c))&&(s=i(y,s,m),null===h?u=y:h.sibling=y,h=y);return u}for(g=r(o,g);!y.done;m++,y=a.next())null!==(y=f(g,o,m,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),s=i(y,s,m),null===h?u=y:h.sibling=y,h=y);return e&&g.forEach(function(e){return t(o,e)}),u}return function(e,r,i,a){var c="object"==typeof i&&null!==i&&i.type===T&&null===i.key;c&&(i=i.props.children);var u="object"==typeof i&&null!==i;if(u)switch(i.$$typeof){case S:e:{for(u=i.key,c=r;null!==c;){if(c.key===u){switch(c.tag){case 7:if(i.type===T){n(e,c.sibling),(r=o(c,i.props.children)).return=e,e=r;break e}break;default:if(c.elementType===i.type){n(e,c.sibling),(r=o(c,i.props)).ref=bi(e,c,i),r.return=e,e=r;break e}}n(e,c);break}t(e,c),c=c.sibling}i.type===T?((r=Fa(i.props.children,e.mode,a,i.key)).return=e,e=r):((a=Ba(i.type,i.key,i.props,null,e.mode,a)).ref=bi(e,r,i),a.return=e,e=a)}return s(e);case R:e:{for(c=i.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(e,r.sibling),(r=o(r,i.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Va(i,e.mode,a)).return=e,e=r}return s(e)}if("string"==typeof i||"number"==typeof i)return i=""+i,null!==r&&6===r.tag?(n(e,r.sibling),(r=o(r,i)).return=e,e=r):(n(e,r),(r=ja(i,e.mode,a)).return=e,e=r),s(e);if(yi(i))return g(e,r,i,a);if(j(i))return m(e,r,i,a);if(u&&Ci(e,i),void 0===i&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(l(152,Z(e.type)||"Component"))}return n(e,r)}}var Si=wi(!0),Ri=wi(!1),Ti={},Ei=oo(Ti),Di=oo(Ti),ki=oo(Ti);function Oi(e){if(e===Ti)throw Error(l(174));return e}function xi(e,t){switch(lo(ki,t),lo(Di,e),lo(Ei,Ti),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}io(Ei),lo(Ei,t)}function Ai(){io(Ei),io(Di),io(ki)}function Li(e){Oi(ki.current);var t=Oi(Ei.current),n=pe(t,e.type);t!==n&&(lo(Di,e),lo(Ei,n))}function Ii(e){Di.current===e&&(io(Ei),io(Di))}var Mi=oo(0);function Pi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hi=null,_i=null,Ni=!1;function zi(e,t){var n=_a(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Bi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Fi(e){if(Ni){var t=_i;if(t){var n=t;if(!Bi(e,t)){if(!(t=Vr(n.nextSibling))||!Bi(e,t))return e.flags=-1025&e.flags|2,Ni=!1,void(Hi=e);zi(Hi,n)}Hi=e,_i=Vr(t.firstChild)}else e.flags=-1025&e.flags|2,Ni=!1,Hi=e}}function Wi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Hi=e}function ji(e){if(e!==Hi)return!1;if(!Ni)return Wi(e),Ni=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Br(t,e.memoizedProps))for(t=_i;t;)zi(e,t),t=Vr(t.nextSibling);if(Wi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(l(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){_i=Vr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}_i=null}}else _i=Hi?Vr(e.stateNode.nextSibling):null;return!0}function Vi(){_i=Hi=null,Ni=!1}var Ui=[];function Gi(){for(var e=0;e<Ui.length;e++)Ui[e]._workInProgressVersionPrimary=null;Ui.length=0}var Ki=w.ReactCurrentDispatcher,Zi=w.ReactCurrentBatchConfig,Xi=0,qi=null,Yi=null,$i=null,Qi=!1,Ji=!1;function el(){throw Error(l(321))}function tl(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ir(e[n],t[n]))return!1;return!0}function nl(e,t,n,r,o,i){if(Xi=i,qi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ki.current=null===e||null===e.memoizedState?Ol:xl,e=n(r,o),Ji){i=0;do{if(Ji=!1,!(25>i))throw Error(l(301));i+=1,$i=Yi=null,t.updateQueue=null,Ki.current=Al,e=n(r,o)}while(Ji)}if(Ki.current=kl,t=null!==Yi&&null!==Yi.next,Xi=0,$i=Yi=qi=null,Qi=!1,t)throw Error(l(300));return e}function rl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===$i?qi.memoizedState=$i=e:$i=$i.next=e,$i}function ol(){if(null===Yi){var e=qi.alternate;e=null!==e?e.memoizedState:null}else e=Yi.next;var t=null===$i?qi.memoizedState:$i.next;if(null!==t)$i=t,Yi=e;else{if(null===e)throw Error(l(310));e={memoizedState:(Yi=e).memoizedState,baseState:Yi.baseState,baseQueue:Yi.baseQueue,queue:Yi.queue,next:null},null===$i?qi.memoizedState=$i=e:$i=$i.next=e}return $i}function il(e,t){return"function"==typeof t?t(e):t}function ll(e){var t=ol(),n=t.queue;if(null===n)throw Error(l(311));n.lastRenderedReducer=e;var r=Yi,o=r.baseQueue,i=n.pending;if(null!==i){if(null!==o){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(null!==o){o=o.next,r=r.baseState;var a=s=i=null,c=o;do{var u=c.lane;if((Xi&u)===u)null!==a&&(a=a.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var h={lane:u,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===a?(s=a=h,i=r):a=a.next=h,qi.lanes|=u,Ps|=u}c=c.next}while(null!==c&&c!==o);null===a?i=r:a.next=s,ir(r,t.memoizedState)||(Il=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=a,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function sl(e){var t=ol(),n=t.queue;if(null===n)throw Error(l(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{i=e(i,s.action),s=s.next}while(s!==o);ir(i,t.memoizedState)||(Il=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function al(e,t,n){var r=t._getVersion;r=r(t._source);var o=t._workInProgressVersionPrimary;if(null!==o?e=o===r:(e=e.mutableReadLanes,(e=(Xi&e)===e)&&(t._workInProgressVersionPrimary=r,Ui.push(t))),e)return n(t._source);throw Ui.push(t),Error(l(350))}function cl(e,t,n,r){var o=Ds;if(null===o)throw Error(l(349));var i=t._getVersion,s=i(t._source),a=Ki.current,c=a.useState(function(){return al(o,t,n)}),u=c[1],h=c[0];c=$i;var d=e.memoizedState,p=d.refs,f=p.getSnapshot,g=d.source;d=d.subscribe;var m=qi;return e.memoizedState={refs:p,source:t,subscribe:r},a.useEffect(function(){p.getSnapshot=n,p.setSnapshot=u;var e=i(t._source);if(!ir(s,e)){e=n(t._source),ir(h,e)||(u(e),e=la(m),o.mutableReadLanes|=e&o.pendingLanes),e=o.mutableReadLanes,o.entangledLanes|=e;for(var r=o.entanglements,l=e;0<l;){var a=31-jt(l),c=1<<a;r[a]|=e,l&=~c}}},[n,t,r]),a.useEffect(function(){return r(t._source,function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var r=la(m);o.mutableReadLanes|=r&o.pendingLanes}catch(e){n(function(){throw e})}})},[t,r]),ir(f,n)&&ir(g,t)&&ir(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:il,lastRenderedState:h}).dispatch=u=Dl.bind(null,qi,e),c.queue=e,c.baseQueue=null,h=al(o,t,n),c.memoizedState=c.baseState=h),h}function ul(e,t,n){return cl(ol(),e,t,n)}function hl(e){var t=rl();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:il,lastRenderedState:e}).dispatch=Dl.bind(null,qi,e),[t.memoizedState,e]}function dl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=qi.updateQueue)?(t={lastEffect:null},qi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function pl(e){return e={current:e},rl().memoizedState=e}function fl(){return ol().memoizedState}function gl(e,t,n,r){var o=rl();qi.flags|=e,o.memoizedState=dl(1|t,n,void 0,void 0===r?null:r)}function ml(e,t,n,r){var o=ol();r=void 0===r?null:r;var i=void 0;if(null!==Yi){var l=Yi.memoizedState;if(i=l.destroy,null!==r&&tl(r,l.deps))return void dl(t,n,i,r)}qi.flags|=e,o.memoizedState=dl(1|t,n,i,r)}function vl(e,t){return gl(516,4,e,t)}function yl(e,t){return ml(516,4,e,t)}function bl(e,t){return ml(4,2,e,t)}function Cl(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function wl(e,t,n){return n=null!=n?n.concat([e]):null,ml(4,2,Cl.bind(null,t,e),n)}function Sl(){}function Rl(e,t){var n=ol();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&tl(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Tl(e,t){var n=ol();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&tl(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function El(e,t){var n=Fo();jo(98>n?98:n,function(){e(!0)}),jo(97<n?97:n,function(){var n=Zi.transition;Zi.transition=1;try{e(!1),t()}finally{Zi.transition=n}})}function Dl(e,t,n){var r=ia(),o=la(e),i={lane:o,action:n,eagerReducer:null,eagerState:null,next:null},l=t.pending;if(null===l?i.next=i:(i.next=l.next,l.next=i),t.pending=i,l=e.alternate,e===qi||null!==l&&l===qi)Ji=Qi=!0;else{if(0===e.lanes&&(null===l||0===l.lanes)&&null!==(l=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=l(s,n);if(i.eagerReducer=l,i.eagerState=a,ir(a,s))return}catch(e){}sa(e,o,r)}}var kl={readContext:ni,useCallback:el,useContext:el,useEffect:el,useImperativeHandle:el,useLayoutEffect:el,useMemo:el,useReducer:el,useRef:el,useState:el,useDebugValue:el,useDeferredValue:el,useTransition:el,useMutableSource:el,useOpaqueIdentifier:el,unstable_isNewReconciler:!1},Ol={readContext:ni,useCallback:function(e,t){return rl().memoizedState=[e,void 0===t?null:t],e},useContext:ni,useEffect:vl,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,gl(4,2,Cl.bind(null,t,e),n)},useLayoutEffect:function(e,t){return gl(4,2,e,t)},useMemo:function(e,t){var n=rl();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=rl();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Dl.bind(null,qi,e),[r.memoizedState,e]},useRef:pl,useState:hl,useDebugValue:Sl,useDeferredValue:function(e){var t=hl(e),n=t[0],r=t[1];return vl(function(){var t=Zi.transition;Zi.transition=1;try{r(e)}finally{Zi.transition=t}},[e]),n},useTransition:function(){var e=hl(!1),t=e[0];return pl(e=El.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=rl();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},cl(r,e,t,n)},useOpaqueIdentifier:function(){if(Ni){var e=!1,t=function(e){return{$$typeof:H,toString:e,valueOf:e}}(function(){throw e||(e=!0,n("r:"+(Gr++).toString(36))),Error(l(355))}),n=hl(t)[1];return 0==(2&qi.mode)&&(qi.flags|=516,dl(5,function(){n("r:"+(Gr++).toString(36))},void 0,null)),t}return hl(t="r:"+(Gr++).toString(36)),t},unstable_isNewReconciler:!1},xl={readContext:ni,useCallback:Rl,useContext:ni,useEffect:yl,useImperativeHandle:wl,useLayoutEffect:bl,useMemo:Tl,useReducer:ll,useRef:fl,useState:function(){return ll(il)},useDebugValue:Sl,useDeferredValue:function(e){var t=ll(il),n=t[0],r=t[1];return yl(function(){var t=Zi.transition;Zi.transition=1;try{r(e)}finally{Zi.transition=t}},[e]),n},useTransition:function(){var e=ll(il)[0];return[fl().current,e]},useMutableSource:ul,useOpaqueIdentifier:function(){return ll(il)[0]},unstable_isNewReconciler:!1},Al={readContext:ni,useCallback:Rl,useContext:ni,useEffect:yl,useImperativeHandle:wl,useLayoutEffect:bl,useMemo:Tl,useReducer:sl,useRef:fl,useState:function(){return sl(il)},useDebugValue:Sl,useDeferredValue:function(e){var t=sl(il),n=t[0],r=t[1];return yl(function(){var t=Zi.transition;Zi.transition=1;try{r(e)}finally{Zi.transition=t}},[e]),n},useTransition:function(){var e=sl(il)[0];return[fl().current,e]},useMutableSource:ul,useOpaqueIdentifier:function(){return sl(il)[0]},unstable_isNewReconciler:!1},Ll=w.ReactCurrentOwner,Il=!1;function Ml(e,t,n,r){t.child=null===e?Ri(t,null,n,r):Si(t,e.child,n,r)}function Pl(e,t,n,r,o){n=n.render;var i=t.ref;return ti(t,o),r=nl(e,t,n,r,i,o),null===e||Il?(t.flags|=1,Ml(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,Ql(e,t,o))}function Hl(e,t,n,r,o,i){if(null===e){var l=n.type;return"function"!=typeof l||Na(l)||void 0!==l.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ba(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=l,_l(e,t,l,r,o,i))}return l=e.child,0==(o&i)&&(o=l.memoizedProps,(n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)?Ql(e,t,i):(t.flags|=1,(e=za(l,r)).ref=t.ref,e.return=t,t.child=e)}function _l(e,t,n,r,o,i){if(null!==e&&sr(e.memoizedProps,r)&&e.ref===t.ref){if(Il=!1,0==(i&o))return t.lanes=e.lanes,Ql(e,t,i);0!=(16384&e.flags)&&(Il=!0)}return Bl(e,t,n,r,i)}function Nl(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},fa(0,n);else{if(0==(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},fa(0,e),null;t.memoizedState={baseLanes:0},fa(0,null!==i?i.baseLanes:n)}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,fa(0,r);return Ml(e,t,o,n),t.child}function zl(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Bl(e,t,n,r,o){var i=po(n)?uo:ao.current;return i=ho(t,i),ti(t,o),n=nl(e,t,n,r,i,o),null===e||Il?(t.flags|=1,Ml(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,Ql(e,t,o))}function Fl(e,t,n,r,o){if(po(n)){var i=!0;vo(t)}else i=!1;if(ti(t,o),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),gi(t,n,r),vi(t,n,r,o),r=!0;else if(null===e){var l=t.stateNode,s=t.memoizedProps;l.props=s;var a=l.context,c=n.contextType;c="object"==typeof c&&null!==c?ni(c):ho(t,c=po(n)?uo:ao.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof l.getSnapshotBeforeUpdate;h||"function"!=typeof l.UNSAFE_componentWillReceiveProps&&"function"!=typeof l.componentWillReceiveProps||(s!==r||a!==c)&&mi(t,l,r,c),ri=!1;var d=t.memoizedState;l.state=d,ci(t,r,l,o),a=t.memoizedState,s!==r||d!==a||co.current||ri?("function"==typeof u&&(di(t,n,u,r),a=t.memoizedState),(s=ri||fi(t,n,s,r,d,a,c))?(h||"function"!=typeof l.UNSAFE_componentWillMount&&"function"!=typeof l.componentWillMount||("function"==typeof l.componentWillMount&&l.componentWillMount(),"function"==typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount()),"function"==typeof l.componentDidMount&&(t.flags|=4)):("function"==typeof l.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=a),l.props=r,l.state=a,l.context=c,r=s):("function"==typeof l.componentDidMount&&(t.flags|=4),r=!1)}else{l=t.stateNode,ii(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Zo(t.type,s),l.props=c,h=t.pendingProps,d=l.context,a="object"==typeof(a=n.contextType)&&null!==a?ni(a):ho(t,a=po(n)?uo:ao.current);var p=n.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof l.getSnapshotBeforeUpdate)||"function"!=typeof l.UNSAFE_componentWillReceiveProps&&"function"!=typeof l.componentWillReceiveProps||(s!==h||d!==a)&&mi(t,l,r,a),ri=!1,d=t.memoizedState,l.state=d,ci(t,r,l,o);var f=t.memoizedState;s!==h||d!==f||co.current||ri?("function"==typeof p&&(di(t,n,p,r),f=t.memoizedState),(c=ri||fi(t,n,c,r,d,f,a))?(u||"function"!=typeof l.UNSAFE_componentWillUpdate&&"function"!=typeof l.componentWillUpdate||("function"==typeof l.componentWillUpdate&&l.componentWillUpdate(r,f,a),"function"==typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(r,f,a)),"function"==typeof l.componentDidUpdate&&(t.flags|=4),"function"==typeof l.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof l.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof l.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=f),l.props=r,l.state=f,l.context=a,r=c):("function"!=typeof l.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof l.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Wl(e,t,n,r,i,o)}function Wl(e,t,n,r,o,i){zl(e,t);var l=0!=(64&t.flags);if(!r&&!l)return o&&yo(t,n,!1),Ql(e,t,i);r=t.stateNode,Ll.current=t;var s=l&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&l?(t.child=Si(t,e.child,null,i),t.child=Si(t,null,s,i)):Ml(e,t,s,i),t.memoizedState=r.state,o&&yo(t,n,!0),t.child}function jl(e){var t=e.stateNode;t.pendingContext?go(0,t.pendingContext,t.pendingContext!==t.context):t.context&&go(0,t.context,!1),xi(e,t.containerInfo)}var Vl,Ul,Gl,Kl={dehydrated:null,retryLane:0};function Zl(e,t,n){var r,o=t.pendingProps,i=Mi.current,l=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&i)),r?(l=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(i|=1),lo(Mi,1&i),null===e?(void 0!==o.fallback&&Fi(t),e=o.children,i=o.fallback,l?(e=Xl(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Kl,e):"number"==typeof o.unstable_expectedLoadTime?(e=Xl(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Kl,t.lanes=33554432,e):((n=Wa({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,l?(o=function(e,t,n,r,o){var i=t.mode,l=e.child;e=l.sibling;var s={mode:"hidden",children:n};return 0==(2&i)&&t.child!==l?((n=t.child).childLanes=0,n.pendingProps=s,null!==(l=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=l,l.nextEffect=null):t.firstEffect=t.lastEffect=null):n=za(l,s),null!==e?r=za(e,r):(r=Fa(r,i,o,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}(e,t,o.children,o.fallback,n),l=t.child,i=e.child.memoizedState,l.memoizedState=null===i?{baseLanes:n}:{baseLanes:i.baseLanes|n},l.childLanes=e.childLanes&~n,t.memoizedState=Kl,o):(n=function(e,t,n,r){var o=e.child;return e=o.sibling,n=za(o,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}(e,t,o.children,n),t.memoizedState=null,n))}function Xl(e,t,n,r){var o=e.mode,i=e.child;return t={mode:"hidden",children:t},0==(2&o)&&null!==i?(i.childLanes=0,i.pendingProps=t):i=Wa(t,o,0,null),n=Fa(n,o,r,null),i.return=e,n.return=e,i.sibling=n,e.child=i,n}function ql(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ei(e.return,t)}function Yl(e,t,n,r,o,i){var l=e.memoizedState;null===l?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o,lastEffect:i}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=o,l.lastEffect=i)}function $l(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(Ml(e,t,r.children,n),0!=(2&(r=Mi.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ql(e,n);else if(19===e.tag)ql(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(lo(Mi,r),0==(2&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===Pi(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Yl(t,!1,o,n,i,t.lastEffect);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Pi(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Yl(t,!0,n,null,i,t.lastEffect);break;case"together":Yl(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Ql(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ps|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(l(153));if(null!==t.child){for(n=za(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=za(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function Jl(e,t){if(!Ni)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function es(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return po(t.type)&&fo(),null;case 3:return Ai(),io(co),io(ao),Gi(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ji(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ii(t);var i=Oi(ki.current);if(n=t.type,null!==e&&null!=t.stateNode)Ul(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(l(166));return null}if(e=Oi(Ei.current),ji(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Zr]=t,r[Xr]=s,n){case"dialog":Er("cancel",r),Er("close",r);break;case"iframe":case"object":case"embed":Er("load",r);break;case"video":case"audio":for(e=0;e<wr.length;e++)Er(wr[e],r);break;case"source":Er("error",r);break;case"img":case"image":case"link":Er("error",r),Er("load",r);break;case"details":Er("toggle",r);break;case"input":ee(r,s),Er("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Er("invalid",r);break;case"textarea":ae(r,s),Er("invalid",r)}for(var c in Re(n,s),e=null,s)s.hasOwnProperty(c)&&(i=s[c],"children"===c?"string"==typeof i?r.textContent!==i&&(e=["children",i]):"number"==typeof i&&r.textContent!==""+i&&(e=["children",""+i]):a.hasOwnProperty(c)&&null!=i&&"onScroll"===c&&Er("scroll",r));switch(n){case"input":Y(r),re(r,s,!0);break;case"textarea":Y(r),ue(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=Hr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===i.nodeType?i:i.ownerDocument,e===he&&(e=de(n)),e===he?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Zr]=t,e[Xr]=r,Vl(e,t),t.stateNode=e,c=Te(n,r),n){case"dialog":Er("cancel",e),Er("close",e),i=r;break;case"iframe":case"object":case"embed":Er("load",e),i=r;break;case"video":case"audio":for(i=0;i<wr.length;i++)Er(wr[i],e);i=r;break;case"source":Er("error",e),i=r;break;case"img":case"image":case"link":Er("error",e),Er("load",e),i=r;break;case"details":Er("toggle",e),i=r;break;case"input":ee(e,r),i=J(e,r),Er("invalid",e);break;case"option":i=ie(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=o({},r,{value:void 0}),Er("invalid",e);break;case"textarea":ae(e,r),i=se(e,r),Er("invalid",e);break;default:i=r}Re(n,i);var u=i;for(s in u)if(u.hasOwnProperty(s)){var h=u[s];"style"===s?we(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&me(e,h):"children"===s?"string"==typeof h?("textarea"!==n||""!==h)&&ve(e,h):"number"==typeof h&&ve(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Er("scroll",e):null!=h&&C(e,s,h,c))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),ue(e);break;case"option":null!=r.value&&e.setAttribute("value",""+X(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?le(e,!!r.multiple,s,!1):null!=r.defaultValue&&le(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Hr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Gl(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(l(166));n=Oi(ki.current),Oi(Ei.current),ji(t)?(r=t.stateNode,n=t.memoizedProps,r[Zr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Zr]=t,t.stateNode=r)}return null;case 13:return io(Mi),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&ji(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Mi.current)?0===Ls&&(Ls=3):(0!==Ls&&3!==Ls||(Ls=4),null===Ds||0==(134217727&Ps)&&0==(134217727&Hs)||ha(Ds,Os))),(r||n)&&(t.flags|=4),null);case 4:return Ai(),null===e&&kr(t.stateNode.containerInfo),null;case 10:return Jo(t),null;case 17:return po(t.type)&&fo(),null;case 19:if(io(Mi),null===(r=t.memoizedState))return null;if(s=0!=(64&t.flags),null===(c=r.rendering))if(s)Jl(r,!1);else{if(0!==Ls||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Pi(e))){for(t.flags|=64,Jl(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return lo(Mi,1&Mi.current|2),t.child}e=e.sibling}null!==r.tail&&Bo()>Bs&&(t.flags|=64,s=!0,Jl(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Pi(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Jl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Ni)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Bo()-r.renderingStartTime>Bs&&1073741824!==n&&(t.flags|=64,s=!0,Jl(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Bo(),n.sibling=null,t=Mi.current,lo(Mi,s?1&t|2:1&t),n):null;case 23:case 24:return ga(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(l(156,t.tag))}function ts(e){switch(e.tag){case 1:po(e.type)&&fo();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ai(),io(co),io(ao),Gi(),0!=(64&(t=e.flags)))throw Error(l(285));return e.flags=-4097&t|64,e;case 5:return Ii(e),null;case 13:return io(Mi),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return io(Mi),null;case 4:return Ai(),null;case 10:return Jo(e),null;case 23:case 24:return ga(),null;default:return null}}function ns(e,t){try{var n="",r=t;do{n+=K(r),r=r.return}while(r);var o=n}catch(e){o="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:o}}function rs(e,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}Vl=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ul=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Oi(Ei.current);var l,s=null;switch(n){case"input":i=J(e,i),r=J(e,r),s=[];break;case"option":i=ie(e,i),r=ie(e,r),s=[];break;case"select":i=o({},i,{value:void 0}),r=o({},r,{value:void 0}),s=[];break;case"textarea":i=se(e,i),r=se(e,r),s=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Hr)}for(h in Re(n,r),n=null,i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&null!=i[h])if("style"===h){var c=i[h];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(a.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(c=null!=i?i[h]:void 0,r.hasOwnProperty(h)&&u!==c&&(null!=u||null!=c))if("style"===h)if(c){for(l in c)!c.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in u)u.hasOwnProperty(l)&&c[l]!==u[l]&&(n||(n={}),n[l]=u[l])}else n||(s||(s=[]),s.push(h,n)),n=u;else"dangerouslySetInnerHTML"===h?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(s=s||[]).push(h,u)):"children"===h?"string"!=typeof u&&"number"!=typeof u||(s=s||[]).push(h,""+u):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(a.hasOwnProperty(h)?(null!=u&&"onScroll"===h&&Er("scroll",e),s||c===u||(s=[])):"object"==typeof u&&null!==u&&u.$$typeof===H?u.toString():(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},Gl=function(e,t,n,r){n!==r&&(t.flags|=4)};var os="function"==typeof WeakMap?WeakMap:Map;function is(e,t,n){(n=li(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vs||(Vs=!0,Us=r),rs(0,t)},n}function ls(e,t,n){(n=li(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var o=t.value;n.payload=function(){return rs(0,t),r(o)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Gs?Gs=new Set([this]):Gs.add(this),rs(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ss="function"==typeof WeakSet?WeakSet:Set;function as(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Ia(e,t)}else t.current=null}function cs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Zo(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&jr(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(l(163))}function us(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var o=e;r=o.next,0!=(4&(o=o.tag))&&0!=(1&o)&&(xa(n,e),Oa(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Zo(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&ui(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}ui(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ct(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(l(163))}function hs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var o=n.memoizedProps.style;o=null!=o&&o.hasOwnProperty("display")?o.display:null,r.style.display=Ce("display",o)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ds(e,t){if(Co&&"function"==typeof Co.onCommitFiberUnmount)try{Co.onCommitFiberUnmount(bo,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,o=r.destroy;if(r=r.tag,void 0!==o)if(0!=(4&r))xa(t,n);else{r=t;try{o()}catch(e){Ia(r,e)}}n=n.next}while(n!==e)}break;case 1:if(as(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Ia(t,e)}break;case 5:as(t);break;case 4:ys(e,t)}}function ps(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function fs(e){return 5===e.tag||3===e.tag||4===e.tag}function gs(e){e:{for(var t=e.return;null!==t;){if(fs(t))break e;t=t.return}throw Error(l(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(l(161))}16&n.flags&&(ve(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||fs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?ms(e,n,t):vs(e,n,t)}function ms(e,t,n){var r=e.tag,o=5===r||6===r;if(o)e=o?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Hr));else if(4!==r&&null!==(e=e.child))for(ms(e,t,n),e=e.sibling;null!==e;)ms(e,t,n),e=e.sibling}function vs(e,t,n){var r=e.tag,o=5===r||6===r;if(o)e=o?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(vs(e,t,n),e=e.sibling;null!==e;)vs(e,t,n),e=e.sibling}function ys(e,t){for(var n,r,o=t,i=!1;;){if(!i){i=o.return;e:for(;;){if(null===i)throw Error(l(160));switch(n=i.stateNode,i.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}i=i.return}i=!0}if(5===o.tag||6===o.tag){e:for(var s=e,a=o,c=a;;)if(ds(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===a)break e;for(;null===c.sibling;){if(null===c.return||c.return===a)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,a=o.stateNode,8===s.nodeType?s.parentNode.removeChild(a):s.removeChild(a)):n.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){n=o.stateNode.containerInfo,r=!0,o.child.return=o,o=o.child;continue}}else if(ds(e,o),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(i=!1)}o.sibling.return=o.return,o=o.sibling}}function bs(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var o=null!==e?e.memoizedProps:r;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,null!==i){for(n[Xr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Te(e,o),t=Te(e,r),o=0;o<i.length;o+=2){var s=i[o],a=i[o+1];"style"===s?we(n,a):"dangerouslySetInnerHTML"===s?me(n,a):"children"===s?ve(n,a):C(n,s,a,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(i=r.value)?le(n,!!r.multiple,i,!1):e!==!!r.multiple&&(null!=r.defaultValue?le(n,!!r.multiple,r.defaultValue,!0):le(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(l(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,Ct(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(zs=Bo(),hs(t.child,!0)),void Cs(t);case 19:return void Cs(t);case 17:return;case 23:case 24:return void hs(t,null!==t.memoizedState)}throw Error(l(163))}function Cs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ss),t.forEach(function(t){var r=Pa.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ws(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&null!==(t=t.memoizedState)&&null===t.dehydrated}var Ss=Math.ceil,Rs=w.ReactCurrentDispatcher,Ts=w.ReactCurrentOwner,Es=0,Ds=null,ks=null,Os=0,xs=0,As=oo(0),Ls=0,Is=null,Ms=0,Ps=0,Hs=0,_s=0,Ns=null,zs=0,Bs=1/0;function Fs(){Bs=Bo()+500}var Ws,js=null,Vs=!1,Us=null,Gs=null,Ks=!1,Zs=null,Xs=90,qs=[],Ys=[],$s=null,Qs=0,Js=null,ea=-1,ta=0,na=0,ra=null,oa=!1;function ia(){return 0!=(48&Es)?Bo():-1!==ea?ea:ea=Bo()}function la(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Fo()?1:2;if(0===ta&&(ta=Ms),0!==Ko.transition){0!==na&&(na=null!==Ns?Ns.pendingLanes:0),e=ta;var t=4186112&~na;return 0==(t&=-t)&&0==(t=(e=4186112&~e)&-e)&&(t=8192),t}return e=Fo(),e=zt(0!=(4&Es)&&98===e?12:e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ta)}function sa(e,t,n){if(50<Qs)throw Qs=0,Js=null,Error(l(185));if(null===(e=aa(e,t)))return null;Wt(e,t,n),e===Ds&&(Hs|=t,4===Ls&&ha(e,Os));var r=Fo();1===t?0!=(8&Es)&&0==(48&Es)?da(e):(ca(e,n),0===Es&&(Fs(),Uo())):(0==(4&Es)||98!==r&&99!==r||(null===$s?$s=new Set([e]):$s.add(e)),ca(e,n)),Ns=e}function aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ca(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,o=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-jt(s),c=1<<a,u=i[a];if(-1===u){if(0==(c&r)||0!=(c&o)){u=t,Ht(c);var h=Pt;i[a]=10<=h?u+250:6<=h?u+5e3:-1}}else u<=t&&(e.expiredLanes|=c);s&=~c}if(r=_t(e,e===Ds?Os:0),t=Pt,0===r)null!==n&&(n!==Mo&&Ro(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mo&&Ro(n)}15===t?(n=da.bind(null,e),null===Ho?(Ho=[n],_o=So(Oo,Go)):Ho.push(n),n=Mo):n=14===t?Vo(99,da.bind(null,e)):Vo(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(l(358,e))}}(t),ua.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function ua(e){if(ea=-1,na=ta=0,0!=(48&Es))throw Error(l(327));var t=e.callbackNode;if(ka()&&e.callbackNode!==t)return null;var n=_t(e,e===Ds?Os:0);if(0===n)return null;var r=n,o=Es;Es|=16;var i=ya();for(Ds===e&&Os===r||(Fs(),ma(e,r));;)try{wa();break}catch(t){va(e,t)}if(Qo(),Rs.current=i,Es=o,null!==ks?r=0:(Ds=null,Os=0,r=Ls),0!=(Ms&Hs))ma(e,0);else if(0!==r){if(2===r&&(Es|=64,e.hydrate&&(e.hydrate=!1,jr(e.containerInfo)),0!==(n=Nt(e))&&(r=ba(e,n))),1===r)throw t=Is,ma(e,0),ha(e,n),ca(e,Bo()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(l(345));case 2:Ta(e);break;case 3:if(ha(e,n),(62914560&n)===n&&10<(r=zs+500-Bo())){if(0!==_t(e,0))break;if(((o=e.suspendedLanes)&n)!==n){ia(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Fr(Ta.bind(null,e),r);break}Ta(e);break;case 4:if(ha(e,n),(4186112&n)===n)break;for(r=e.eventTimes,o=-1;0<n;){var s=31-jt(n);i=1<<s,(s=r[s])>o&&(o=s),n&=~i}if(n=o,10<(n=(120>(n=Bo()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ss(n/1960))-n)){e.timeoutHandle=Fr(Ta.bind(null,e),n);break}Ta(e);break;case 5:Ta(e);break;default:throw Error(l(329))}}return ca(e,Bo()),e.callbackNode===t?ua.bind(null,e):null}function ha(e,t){for(t&=~_s,t&=~Hs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-jt(t),r=1<<n;e[n]=-1,t&=~r}}function da(e){if(0!=(48&Es))throw Error(l(327));if(ka(),e===Ds&&0!=(e.expiredLanes&Os)){var t=Os,n=ba(e,t);0!=(Ms&Hs)&&(n=ba(e,t=_t(e,t)))}else n=ba(e,t=_t(e,0));if(0!==e.tag&&2===n&&(Es|=64,e.hydrate&&(e.hydrate=!1,jr(e.containerInfo)),0!==(t=Nt(e))&&(n=ba(e,t))),1===n)throw n=Is,ma(e,0),ha(e,t),ca(e,Bo()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ta(e),ca(e,Bo()),null}function pa(e,t){var n=Es;Es&=-2,Es|=8;try{return e(t)}finally{0===(Es=n)&&(Fs(),Uo())}}function fa(e,t){lo(As,xs),xs|=t,Ms|=t}function ga(){xs=As.current,io(As)}function ma(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==ks)for(n=ks.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&fo();break;case 3:Ai(),io(co),io(ao),Gi();break;case 5:Ii(r);break;case 4:Ai();break;case 13:case 19:io(Mi);break;case 10:Jo(r);break;case 23:case 24:ga()}n=n.return}Ds=e,ks=za(e.current,null),Os=xs=Ms=t,Ls=0,Is=null,_s=Hs=Ps=0}function va(e,t){for(;;){var n=ks;try{if(Qo(),Ki.current=kl,Qi){for(var r=qi.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}Qi=!1}if(Xi=0,$i=Yi=qi=null,Ji=!1,Ts.current=null,null===n||null===n.return){Ls=1,Is=t,ks=null;break}e:{var i=e,l=n.return,s=n,a=t;if(t=Os,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==a&&"object"==typeof a&&"function"==typeof a.then){var c=a;if(0==(2&s.mode)){var u=s.alternate;u?(s.updateQueue=u.updateQueue,s.memoizedState=u.memoizedState,s.lanes=u.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!=(1&Mi.current),d=l;do{var p;if(p=13===d.tag){var f=d.memoizedState;if(null!==f)p=null!==f.dehydrated;else{var g=d.memoizedProps;p=void 0!==g.fallback&&(!0!==g.unstable_avoidThisFallback||!h)}}if(p){var m=d.updateQueue;if(null===m){var v=new Set;v.add(c),d.updateQueue=v}else m.add(c);if(0==(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=li(-1,1);y.tag=2,si(s,y)}s.lanes|=1;break e}a=void 0,s=t;var b=i.pingCache;if(null===b?(b=i.pingCache=new os,a=new Set,b.set(c,a)):void 0===(a=b.get(c))&&(a=new Set,b.set(c,a)),!a.has(s)){a.add(s);var C=Ma.bind(null,i,c,s);c.then(C,C)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);a=Error((Z(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ls&&(Ls=2),a=ns(a,s),d=l;do{switch(d.tag){case 3:i=a,d.flags|=4096,t&=-t,d.lanes|=t,ai(d,is(0,i,t));break e;case 1:i=a;var w=d.type,S=d.stateNode;if(0==(64&d.flags)&&("function"==typeof w.getDerivedStateFromError||null!==S&&"function"==typeof S.componentDidCatch&&(null===Gs||!Gs.has(S)))){d.flags|=4096,t&=-t,d.lanes|=t,ai(d,ls(d,i,t));break e}}d=d.return}while(null!==d)}Ra(n)}catch(e){t=e,ks===n&&null!==n&&(ks=n=n.return);continue}break}}function ya(){var e=Rs.current;return Rs.current=kl,null===e?kl:e}function ba(e,t){var n=Es;Es|=16;var r=ya();for(Ds===e&&Os===t||ma(e,t);;)try{Ca();break}catch(t){va(e,t)}if(Qo(),Es=n,Rs.current=r,null!==ks)throw Error(l(261));return Ds=null,Os=0,Ls}function Ca(){for(;null!==ks;)Sa(ks)}function wa(){for(;null!==ks&&!To();)Sa(ks)}function Sa(e){var t=Ws(e.alternate,e,xs);e.memoizedProps=e.pendingProps,null===t?Ra(e):ks=t,Ts.current=null}function Ra(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=es(n,t,xs)))return void(ks=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&xs)||0==(4&n.mode)){for(var r=0,o=n.child;null!==o;)r|=o.lanes|o.childLanes,o=o.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=ts(t)))return n.flags&=2047,void(ks=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(ks=t);ks=t=e}while(null!==t);0===Ls&&(Ls=5)}function Ta(e){var t=Fo();return jo(99,Ea.bind(null,e,t)),null}function Ea(e,t){do{ka()}while(null!==Zs);if(0!=(48&Es))throw Error(l(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(l(177));e.callbackNode=null;var r=n.lanes|n.childLanes,o=r,i=e.pendingLanes&~o;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=o,e.mutableReadLanes&=o,e.entangledLanes&=o,o=e.entanglements;for(var s=e.eventTimes,a=e.expirationTimes;0<i;){var c=31-jt(i),u=1<<c;o[c]=0,s[c]=-1,a[c]=-1,i&=~u}if(null!==$s&&0==(24&r)&&$s.has(e)&&$s.delete(e),e===Ds&&(ks=Ds=null,Os=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(o=Es,Es|=32,Ts.current=null,_r=Zt,dr(s=hr())){if("selectionStart"in s)a={start:s.selectionStart,end:s.selectionEnd};else e:if(a=(a=s.ownerDocument)&&a.defaultView||window,(u=a.getSelection&&a.getSelection())&&0!==u.rangeCount){a=u.anchorNode,i=u.anchorOffset,c=u.focusNode,u=u.focusOffset;try{a.nodeType,c.nodeType}catch(e){a=null;break e}var h=0,d=-1,p=-1,f=0,g=0,m=s,v=null;t:for(;;){for(var y;m!==a||0!==i&&3!==m.nodeType||(d=h+i),m!==c||0!==u&&3!==m.nodeType||(p=h+u),3===m.nodeType&&(h+=m.nodeValue.length),null!==(y=m.firstChild);)v=m,m=y;for(;;){if(m===s)break t;if(v===a&&++f===i&&(d=h),v===c&&++g===u&&(p=h),null!==(y=m.nextSibling))break;v=(m=v).parentNode}m=y}a=-1===d||-1===p?null:{start:d,end:p}}else a=null;a=a||{start:0,end:0}}else a=null;Nr={focusedElem:s,selectionRange:a},Zt=!1,ra=null,oa=!1,js=r;do{try{Da()}catch(e){if(null===js)throw Error(l(330));Ia(js,e),js=js.nextEffect}}while(null!==js);ra=null,js=r;do{try{for(s=e;null!==js;){var b=js.flags;if(16&b&&ve(js.stateNode,""),128&b){var C=js.alternate;if(null!==C){var w=C.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(1038&b){case 2:gs(js),js.flags&=-3;break;case 6:gs(js),js.flags&=-3,bs(js.alternate,js);break;case 1024:js.flags&=-1025;break;case 1028:js.flags&=-1025,bs(js.alternate,js);break;case 4:bs(js.alternate,js);break;case 8:ys(s,a=js);var S=a.alternate;ps(a),null!==S&&ps(S)}js=js.nextEffect}}catch(e){if(null===js)throw Error(l(330));Ia(js,e),js=js.nextEffect}}while(null!==js);if(w=Nr,C=hr(),b=w.focusedElem,s=w.selectionRange,C!==b&&b&&b.ownerDocument&&ur(b.ownerDocument.documentElement,b)){null!==s&&dr(b)&&(C=s.start,void 0===(w=s.end)&&(w=C),"selectionStart"in b?(b.selectionStart=C,b.selectionEnd=Math.min(w,b.value.length)):(w=(C=b.ownerDocument||document)&&C.defaultView||window).getSelection&&(w=w.getSelection(),a=b.textContent.length,S=Math.min(s.start,a),s=void 0===s.end?S:Math.min(s.end,a),!w.extend&&S>s&&(a=s,s=S,S=a),a=cr(b,S),i=cr(b,s),a&&i&&(1!==w.rangeCount||w.anchorNode!==a.node||w.anchorOffset!==a.offset||w.focusNode!==i.node||w.focusOffset!==i.offset)&&((C=C.createRange()).setStart(a.node,a.offset),w.removeAllRanges(),S>s?(w.addRange(C),w.extend(i.node,i.offset)):(C.setEnd(i.node,i.offset),w.addRange(C))))),C=[];for(w=b;w=w.parentNode;)1===w.nodeType&&C.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<C.length;b++)(w=C[b]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Zt=!!_r,Nr=_r=null,e.current=n,js=r;do{try{for(b=e;null!==js;){var R=js.flags;if(36&R&&us(b,js.alternate,js),128&R){C=void 0;var T=js.ref;if(null!==T){var E=js.stateNode;switch(js.tag){case 5:C=E;break;default:C=E}"function"==typeof T?T(C):T.current=C}}js=js.nextEffect}}catch(e){if(null===js)throw Error(l(330));Ia(js,e),js=js.nextEffect}}while(null!==js);js=null,Po(),Es=o}else e.current=n;if(Ks)Ks=!1,Zs=e,Xs=t;else for(js=r;null!==js;)t=js.nextEffect,js.nextEffect=null,8&js.flags&&((R=js).sibling=null,R.stateNode=null),js=t;if(0===(r=e.pendingLanes)&&(Gs=null),1===r?e===Js?Qs++:(Qs=0,Js=e):Qs=0,n=n.stateNode,Co&&"function"==typeof Co.onCommitFiberRoot)try{Co.onCommitFiberRoot(bo,n,void 0,64==(64&n.current.flags))}catch(e){}if(ca(e,Bo()),Vs)throw Vs=!1,e=Us,Us=null,e;return 0!=(8&Es)||Uo(),null}function Da(){for(;null!==js;){var e=js.alternate;oa||null===ra||(0!=(8&js.flags)?Qe(js,ra)&&(oa=!0):13===js.tag&&ws(e,js)&&Qe(js,ra)&&(oa=!0));var t=js.flags;0!=(256&t)&&cs(e,js),0==(512&t)||Ks||(Ks=!0,Vo(97,function(){return ka(),null})),js=js.nextEffect}}function ka(){if(90!==Xs){var e=97<Xs?97:Xs;return Xs=90,jo(e,Aa)}return!1}function Oa(e,t){qs.push(t,e),Ks||(Ks=!0,Vo(97,function(){return ka(),null}))}function xa(e,t){Ys.push(t,e),Ks||(Ks=!0,Vo(97,function(){return ka(),null}))}function Aa(){if(null===Zs)return!1;var e=Zs;if(Zs=null,0!=(48&Es))throw Error(l(331));var t=Es;Es|=32;var n=Ys;Ys=[];for(var r=0;r<n.length;r+=2){var o=n[r],i=n[r+1],s=o.destroy;if(o.destroy=void 0,"function"==typeof s)try{s()}catch(e){if(null===i)throw Error(l(330));Ia(i,e)}}for(n=qs,qs=[],r=0;r<n.length;r+=2){o=n[r],i=n[r+1];try{var a=o.create;o.destroy=a()}catch(e){if(null===i)throw Error(l(330));Ia(i,e)}}for(a=e.current.firstEffect;null!==a;)e=a.nextEffect,a.nextEffect=null,8&a.flags&&(a.sibling=null,a.stateNode=null),a=e;return Es=t,Uo(),!0}function La(e,t,n){si(e,t=is(0,t=ns(n,t),1)),t=ia(),null!==(e=aa(e,1))&&(Wt(e,1,t),ca(e,t))}function Ia(e,t){if(3===e.tag)La(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){La(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Gs||!Gs.has(r))){var o=ls(n,e=ns(t,e),1);if(si(n,o),o=ia(),null!==(n=aa(n,1)))Wt(n,1,o),ca(n,o);else if("function"==typeof r.componentDidCatch&&(null===Gs||!Gs.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Ma(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ia(),e.pingedLanes|=e.suspendedLanes&n,Ds===e&&(Os&n)===n&&(4===Ls||3===Ls&&(62914560&Os)===Os&&500>Bo()-zs?ma(e,0):_s|=n),ca(e,t)}function Pa(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Fo()?1:2:(0===ta&&(ta=Ms),0===(t=Bt(62914560&~ta))&&(t=4194304))),n=ia(),null!==(e=aa(e,t))&&(Wt(e,t,n),ca(e,n))}function Ha(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function _a(e,t,n,r){return new Ha(e,t,n,r)}function Na(e){return!(!(e=e.prototype)||!e.isReactComponent)}function za(e,t){var n=e.alternate;return null===n?((n=_a(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ba(e,t,n,r,o,i){var s=2;if(r=e,"function"==typeof e)Na(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case T:return Fa(n.children,o,i,t);case _:s=8,o|=16;break;case E:s=8,o|=1;break;case D:return(e=_a(12,n,t,8|o)).elementType=D,e.type=D,e.lanes=i,e;case A:return(e=_a(13,n,t,o)).type=A,e.elementType=A,e.lanes=i,e;case L:return(e=_a(19,n,t,o)).elementType=L,e.lanes=i,e;case N:return Wa(n,o,i,t);case z:return(e=_a(24,n,t,o)).elementType=z,e.lanes=i,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case k:s=10;break e;case O:s=9;break e;case x:s=11;break e;case I:s=14;break e;case M:s=16,r=null;break e;case P:s=22;break e}throw Error(l(130,null==e?e:typeof e,""))}return(t=_a(s,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function Fa(e,t,n,r){return(e=_a(7,e,r,t)).lanes=n,e}function Wa(e,t,n,r){return(e=_a(23,e,r,t)).elementType=N,e.lanes=n,e}function ja(e,t,n){return(e=_a(6,e,null,t)).lanes=n,e}function Va(e,t,n){return(t=_a(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ua(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ft(0),this.expirationTimes=Ft(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ft(0),this.mutableSourceEagerHydrationData=null}function Ga(e,t,n,r){var o=t.current,i=ia(),s=la(o);e:if(n){t:{if(qe(n=n._reactInternals)!==n||1!==n.tag)throw Error(l(170));var a=n;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(po(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(null!==a);throw Error(l(171))}if(1===n.tag){var c=n.type;if(po(c)){n=mo(n,c,a);break e}}n=a}else n=so;return null===t.context?t.context=n:t.pendingContext=n,(t=li(i,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),si(o,t),sa(o,s,i),s}function Ka(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Za(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xa(e,t){Za(e,t),(e=e.alternate)&&Za(e,t)}function qa(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ua(e,t,null!=n&&!0===n.hydrate),t=_a(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,oi(t),e[qr]=n.current,kr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var o=(t=r[e])._getVersion;o=o(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,o]:n.mutableSourceEagerHydrationData.push(t,o)}this._internalRoot=n}function Ya(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $a(e,t,n,r,o){var i=n._reactRootContainer;if(i){var l=i._internalRoot;if("function"==typeof o){var s=o;o=function(){var e=Ka(l);s.call(e)}}Ga(t,l,e,o)}else{if(i=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new qa(e,0,t?{hydrate:!0}:void 0)}(n,r),l=i._internalRoot,"function"==typeof o){var a=o;o=function(){var e=Ka(l);a.call(e)}}pa(function(){Ga(t,l,e,o)})}return Ka(l)}Ws=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||co.current)Il=!0;else{if(0==(n&r)){switch(Il=!1,t.tag){case 3:jl(t),Vi();break;case 5:Li(t);break;case 1:po(t.type)&&vo(t);break;case 4:xi(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var o=t.type._context;lo(Xo,o._currentValue),o._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Zl(e,t,n):(lo(Mi,1&Mi.current),null!==(t=Ql(e,t,n))?t.sibling:null);lo(Mi,1&Mi.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return $l(e,t,n);t.flags|=64}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),lo(Mi,Mi.current),r)break;return null;case 23:case 24:return t.lanes=0,Nl(e,t,n)}return Ql(e,t,n)}Il=0!=(16384&e.flags)}else Il=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=ho(t,ao.current),ti(t,n),o=nl(null,t,r,e,o,n),t.flags|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,po(r)){var i=!0;vo(t)}else i=!1;t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,oi(t);var s=r.getDerivedStateFromProps;"function"==typeof s&&di(t,r,s,e),o.updater=pi,t.stateNode=o,o._reactInternals=t,vi(t,r,e,n),t=Wl(null,t,r,!0,i,n)}else t.tag=0,Ml(null,t,o,n),t=t.child;return t;case 16:o=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=(i=o._init)(o._payload),t.type=o,i=t.tag=function(e){if("function"==typeof e)return Na(e)?1:0;if(null!=e){if((e=e.$$typeof)===x)return 11;if(e===I)return 14}return 2}(o),e=Zo(o,e),i){case 0:t=Bl(null,t,o,e,n);break e;case 1:t=Fl(null,t,o,e,n);break e;case 11:t=Pl(null,t,o,e,n);break e;case 14:t=Hl(null,t,o,Zo(o.type,e),r,n);break e}throw Error(l(306,o,""))}return t;case 0:return r=t.type,o=t.pendingProps,Bl(e,t,r,o=t.elementType===r?o:Zo(r,o),n);case 1:return r=t.type,o=t.pendingProps,Fl(e,t,r,o=t.elementType===r?o:Zo(r,o),n);case 3:if(jl(t),r=t.updateQueue,null===e||null===r)throw Error(l(282));if(r=t.pendingProps,o=null!==(o=t.memoizedState)?o.element:null,ii(e,t),ci(t,r,null,n),(r=t.memoizedState.element)===o)Vi(),t=Ql(e,t,n);else{if((i=(o=t.stateNode).hydrate)&&(_i=Vr(t.stateNode.containerInfo.firstChild),Hi=t,i=Ni=!0),i){if(null!=(e=o.mutableSourceEagerHydrationData))for(o=0;o<e.length;o+=2)(i=e[o])._workInProgressVersionPrimary=e[o+1],Ui.push(i);for(n=Ri(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ml(e,t,r,n),Vi();t=t.child}return t;case 5:return Li(t),null===e&&Fi(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,s=o.children,Br(r,o)?s=null:null!==i&&Br(r,i)&&(t.flags|=16),zl(e,t),Ml(e,t,s,n),t.child;case 6:return null===e&&Fi(t),null;case 13:return Zl(e,t,n);case 4:return xi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Si(t,null,r,n):Ml(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,Pl(e,t,r,o=t.elementType===r?o:Zo(r,o),n);case 7:return Ml(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ml(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,o=t.pendingProps,s=t.memoizedProps,i=o.value;var a=t.type._context;if(lo(Xo,a._currentValue),a._currentValue=i,null!==s)if(a=s.value,0==(i=ir(a,i)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(a,i):1073741823))){if(s.children===o.children&&!co.current){t=Ql(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var c=a.dependencies;if(null!==c){s=a.child;for(var u=c.firstContext;null!==u;){if(u.context===r&&0!=(u.observedBits&i)){1===a.tag&&((u=li(-1,n&-n)).tag=2,si(a,u)),a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),ei(a.return,n),c.lanes|=n;break}u=u.next}}else s=10===a.tag&&a.type===t.type?null:a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}Ml(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=(i=t.pendingProps).children,ti(t,n),r=r(o=ni(o,i.unstable_observedBits)),t.flags|=1,Ml(e,t,r,n),t.child;case 14:return i=Zo(o=t.type,t.pendingProps),Hl(e,t,o,i=Zo(o.type,i),r,n);case 15:return _l(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Zo(r,o),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,po(r)?(e=!0,vo(t)):e=!1,ti(t,n),gi(t,r,o),vi(t,r,o,n),Wl(null,t,r,!0,e,n);case 19:return $l(e,t,n);case 23:case 24:return Nl(e,t,n)}throw Error(l(156,t.tag))},qa.prototype.render=function(e){Ga(e,this._internalRoot,null,null)},qa.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Ga(null,e,null,function(){t[qr]=null})},Je=function(e){13===e.tag&&(sa(e,4,ia()),Xa(e,4))},et=function(e){13===e.tag&&(sa(e,67108864,ia()),Xa(e,67108864))},tt=function(e){if(13===e.tag){var t=ia(),n=la(e);sa(e,n,t),Xa(e,n)}},nt=function(e,t){return t()},De=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=eo(r);if(!o)throw Error(l(90));$(r),ne(r,o)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&le(e,!!n.multiple,t,!1)}},Ie=function(e,t){var n=Es;Es|=1;try{return e(t)}finally{0===(Es=n)&&(Fs(),Uo())}},Me=function(e,t,n,r,o){var i=Es;Es|=4;try{return jo(98,e.bind(null,t,n,r,o))}finally{0===(Es=i)&&(Fs(),Uo())}},Pe=function(){0==(49&Es)&&(function(){if(null!==$s){var e=$s;$s=null,e.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,ca(e,Bo())})}Uo()}(),ka())},He=function(e,t){var n=Es;Es|=2;try{return e(t)}finally{0===(Es=n)&&(Fs(),Uo())}};var Qa={findFiberByHostInstance:$r,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},Ja={bundleType:Qa.bundleType,version:Qa.version,rendererPackageName:Qa.rendererPackageName,rendererConfig:Qa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=function(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(l(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return $e(o),e;if(i===r)return $e(o),t;i=i.sibling}throw Error(l(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s){for(a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s)throw Error(l(189))}}if(n.alternate!==r)throw Error(l(190))}if(3!==n.tag)throw Error(l(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}(e))?null:e.stateNode},findFiberByHostInstance:Qa.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{bo=ec.inject(Ja),Co=ec}catch(ge){}}t.render=function(e,t,n){if(!Ya(t))throw Error(l(200));return $a(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ya(e))throw Error(l(40));return!!e._reactRootContainer&&(pa(function(){$a(null,null,e,!1,function(){e._reactRootContainer=null,e[qr]=null})}),!0)}},935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(448)},408:(e,t,n)=>{"use strict";var r=n(418),o=60103,i=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var l=60109,s=60110,a=60112;t.Suspense=60113;var c=60115,u=60116;if("function"==typeof Symbol&&Symbol.for){var h=Symbol.for;o=h("react.element"),i=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),l=h("react.provider"),s=h("react.context"),a=h("react.forward_ref"),t.Suspense=h("react.suspense"),c=h("react.memo"),u=h("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=m.prototype;var b=y.prototype=new v;b.constructor=y,r(b,m.prototype),b.isPureReactComponent=!0;var C={current:null},w=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function R(e,t,n){var r,i={},l=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(l=""+t.key),t)w.call(t,r)&&!S.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return{$$typeof:o,type:e,key:l,ref:s,props:i,_owner:C.current}}function T(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var E=/\/+/g;function D(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function k(e,t,n,r,l){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var a=!1;if(null===e)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case o:case i:a=!0}}if(a)return l=l(a=e),e=""===r?"."+D(a,0):r,Array.isArray(l)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),k(l,t,n,"",function(e){return e})):null!=l&&(T(l)&&(l=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(l,n+(!l.key||a&&a.key===l.key?"":(""+l.key).replace(E,"$&/")+"/")+e)),t.push(l)),1;if(a=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var u=r+D(s=e[c],c);a+=k(s,t,n,u,l)}else if("function"==typeof(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e)))for(e=u.call(e),c=0;!(s=e.next()).done;)a+=k(s=s.value,t,n,u=r+D(s,c++),l);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return a}function O(e,t,n){if(null==e)return e;var r=[],o=0;return k(e,r,"","",function(e){return t.call(n,e,o++)}),r}function x(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)})}if(1===e._status)return e._result;throw e._result}var A={current:null};function L(){var e=A.current;if(null===e)throw Error(p(321));return e}var I={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:C,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:O,forEach:function(e,t,n){O(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error(p(143));return e}},t.Component=m,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.cloneElement=function(e,t,n){if(null==e)throw Error(p(267,e));var i=r({},e.props),l=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=C.current),void 0!==t.key&&(l=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)w.call(t,u)&&!S.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];i.children=c}return{$$typeof:o,type:e.type,key:l,ref:s,props:i,_owner:a}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=R,t.createFactory=function(e){var t=R.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:a,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:x}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return L().useCallback(e,t)},t.useContext=function(e,t){return L().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return L().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return L().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return L().useLayoutEffect(e,t)},t.useMemo=function(e,t){return L().useMemo(e,t)},t.useReducer=function(e,t,n){return L().useReducer(e,t,n)},t.useRef=function(e){return L().useRef(e)},t.useState=function(e){return L().useState(e)},t.version="17.0.2"},294:(e,t,n)=>{"use strict";e.exports=n(408)},666:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),l=new O(r||[]);return i._invoke=function(e,t,n){var r=h;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===f){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var l=n.delegate;if(l){var s=E(l,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var a=u(e,t,n);if("normal"===a.type){if(r=n.done?f:d,a.arg===g)continue;return{value:a.arg,done:n.done}}"throw"===a.type&&(r=f,n.method="throw",n.arg=a.arg)}}}(e,n,l),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var h="suspendedStart",d="suspendedYield",p="executing",f="completed",g={};function m(){}function v(){}function y(){}var b={};b[i]=function(){return this};var C=Object.getPrototypeOf,w=C&&C(C(x([])));w&&w!==n&&r.call(w,i)&&(b=w);var S=y.prototype=m.prototype=Object.create(b);function R(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this._invoke(t,e)})})}function T(e,t){function n(o,i,l,s){var a=u(e[o],e,i);if("throw"!==a.type){var c=a.arg,h=c.value;return h&&"object"==typeof h&&r.call(h,"__await")?t.resolve(h.__await).then(function(e){n("next",e,l,s)},function(e){n("throw",e,l,s)}):t.resolve(h).then(function(e){c.value=e,l(c)},function(e){return n("throw",e,l,s)})}s(a.arg)}var o;this._invoke=function(e,r){function i(){return new t(function(t,o){n(e,r,t,o)})}return o=o?o.then(i,i):i()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var o=u(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function x(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,l=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return l.next=l}}return{next:A}}function A(){return{value:t,done:!0}}return v.prototype=S.constructor=y,y.constructor=v,v.displayName=a(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,a(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},R(T.prototype),T.prototype[l]=function(){return this},e.AsyncIterator=T,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var l=new T(c(t,n,r,o),i);return e.isGeneratorFunction(n)?l:l.next().then(function(e){return e.done?e.value:l.next()})},R(S),a(S,s,"Generator"),S[i]=function(){return this},S.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var l=this.tryEntries[i],s=l.completion;if("root"===l.tryLoc)return o("end");if(l.tryLoc<=this.prev){var a=r.call(l,"catchLoc"),c=r.call(l,"finallyLoc");if(a&&c){if(this.prev<l.catchLoc)return o(l.catchLoc,!0);if(this.prev<l.finallyLoc)return o(l.finallyLoc)}else if(a){if(this.prev<l.catchLoc)return o(l.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return o(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var l=i?i.completion:{};return l.type=e,l.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:x(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},53:(e,t)=>{"use strict";var n,r,o,i;if("object"==typeof performance&&"function"==typeof performance.now){var l=performance;t.unstable_now=function(){return l.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var c=null,u=null,h=function(){if(null!==c)try{var e=t.unstable_now();c(!0,e),c=null}catch(e){throw setTimeout(h,0),e}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(h,0))},r=function(e,t){u=setTimeout(e,t)},o=function(){clearTimeout(u)},t.unstable_shouldYield=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!=typeof console){var f=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,m=null,v=-1,y=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},i=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var C=new MessageChannel,w=C.port2;C.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();b=e+y;try{m(!0,e)?w.postMessage(null):(g=!1,m=null)}catch(e){throw w.postMessage(null),e}}else g=!1},n=function(e){m=e,g||(g=!0,w.postMessage(null))},r=function(e,n){v=d(function(){e(t.unstable_now())},n)},o=function(){p(v),v=-1}}function S(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,o=e[r];if(!(void 0!==o&&0<E(o,t)))break e;e[r]=t,e[n]=o,n=r}}function R(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length;r<o;){var i=2*(r+1)-1,l=e[i],s=i+1,a=e[s];if(void 0!==l&&0>E(l,n))void 0!==a&&0>E(a,l)?(e[r]=a,e[s]=n,r=s):(e[r]=l,e[i]=n,r=i);else{if(!(void 0!==a&&0>E(a,n)))break e;e[r]=a,e[s]=n,r=s}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var D=[],k=[],O=1,x=null,A=3,L=!1,I=!1,M=!1;function P(e){for(var t=R(k);null!==t;){if(null===t.callback)T(k);else{if(!(t.startTime<=e))break;T(k),t.sortIndex=t.expirationTime,S(D,t)}t=R(k)}}function H(e){if(M=!1,P(e),!I)if(null!==R(D))I=!0,n(_);else{var t=R(k);null!==t&&r(H,t.startTime-e)}}function _(e,n){I=!1,M&&(M=!1,o()),L=!0;var i=A;try{for(P(n),x=R(D);null!==x&&(!(x.expirationTime>n)||e&&!t.unstable_shouldYield());){var l=x.callback;if("function"==typeof l){x.callback=null,A=x.priorityLevel;var s=l(x.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?x.callback=s:x===R(D)&&T(D),P(n)}else T(D);x=R(D)}if(null!==x)var a=!0;else{var c=R(k);null!==c&&r(H,c.startTime-n),a=!1}return a}finally{x=null,A=i,L=!1}}var N=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){I||L||(I=!0,n(_))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return R(D)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=N,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,i,l){var s=t.unstable_now();switch(l="object"==typeof l&&null!==l&&"number"==typeof(l=l.delay)&&0<l?s+l:s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:O++,callback:i,priorityLevel:e,startTime:l,expirationTime:a=l+a,sortIndex:-1},l>s?(e.sortIndex=l,S(k,e),null===R(D)&&e===R(k)&&(M?o():M=!0,r(H,l-s))):(e.sortIndex=a,S(D,e),I||L||(I=!0,n(_))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},840:(e,t,n)=>{"use strict";e.exports=n(53)},379:(e,t,n)=>{"use strict";var r,o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),i=[];function l(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],o=0;o<e.length;o++){var s=e[o],a=t.base?s[0]+t.base:s[0],c=n[a]||0,u="".concat(a," ").concat(c);n[a]=c+1;var h=l(u),d={css:s[1],media:s[2],sourceMap:s[3]};-1!==h?(i[h].references++,i[h].updater(d)):i.push({identifier:u,updater:g(d,t),references:1}),r.push(u)}return r}function a(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach(function(e){t.setAttribute(e,r[e])}),"function"==typeof e.insert)e.insert(t);else{var l=o(e.insert||"head");if(!l)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");l.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function h(e,t,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=u(t,o);else{var i=document.createTextNode(o),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(i,l[t]):e.appendChild(i)}}function d(e,t,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,f=0;function g(e,t){var n,r,o;if(t.singleton){var i=f++;n=p||(p=a(t)),r=h.bind(null,n,i,!1),o=h.bind(null,n,i,!0)}else n=a(t),r=d.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var o=l(n[r]);i[o].references--}for(var a=s(e,t),c=0;c<n.length;c++){var u=l(n[c]);0===i[u].references&&(i[u].updater(),i.splice(u,1))}n=a}}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}function o(n){return function(t){if(Array.isArray(t))return e(t)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||t(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t,n,r,o,i,l){try{var s=e[i](l),a=s.value}catch(e){return void n(e)}s.done?t(a):Promise.resolve(a).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var l=e.apply(t,n);function s(e){i(l,r,o,s,a,"next",e)}function a(e){i(l,r,o,s,a,"throw",e)}s(void 0)})}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}n.r(r),n.d(r,{Border:()=>D,COLORS:()=>ge,CONSTANTS:()=>he,CSS_CLASSES:()=>fe,Category:()=>H,CellChartOrientation:()=>S,CellChartType:()=>L,CellType:()=>E,ColumnDefaultWidth:()=>A,CommentType:()=>R,DEFAULTS:()=>ve,DEFAULT_CELL_TYPE_EDITOR_MAP:()=>ds,DEFAULT_ROW_HEIGHT:()=>ye,DRAG_DROP_CONSTANTS:()=>me,DataLockingType:()=>O,HighlightTypes:()=>M,HorizontalAlignment:()=>m,LinePatternType:()=>h,LinePosition:()=>d,LineStyle:()=>p,ROW_HEIGHT_CONSTANTS:()=>de,ReactTable:()=>la,ResizingType:()=>b,RowHeightSetting:()=>P,ScrollDragDirection:()=>w,SelectionContextType:()=>v,SelectionMode:()=>_,SelectionRegionType:()=>T,StringKey:()=>I,TITLE_CONSTANTS:()=>pe,TableElement:()=>C,TableTextEditor:()=>ps,TextEditor:()=>hs,ThresholdIconType:()=>k,TitleType:()=>y,ValidationType:()=>x,VerticalAlignment:()=>g,calculateColorFromStack:()=>aa,calculateDefaultRowHeight:()=>Xe,generateCellId:()=>Lt,generateCellIdFromExistingCellKey:()=>Mt,generateColumnSettingId:()=>It,generateCustomCellId:()=>Ht,generateCustomRowId:()=>Pt,generateDummyCellId:()=>Nt,generateEmptyCell:()=>Ft,generateEmptyCellId:()=>_t,generateRowId:()=>At,getColorValue:()=>sa,getDomCellFromQuerySelector:()=>Wt,getHash:()=>zt,getRowHeightPadding:()=>Ze,getVersionEditedFormattedValue:()=>Bt,hasVisibleDataLockingIcon:()=>ir,isAnyTableElementActive:()=>Vt,isChart:()=>ae,isColHeader:()=>Y,isColumnDimensionHeader:()=>q,isColumnDimensionHierarchyMember:()=>J,isCoordinateCell:()=>oe,isCoordinateColumn:()=>se,isCoordinateCorner:()=>ie,isCoordinateRow:()=>le,isDataCell:()=>re,isEmptyAxisHeaderCell:()=>te,isHeaderCell:()=>Q,isHeaderMemberCell:()=>ee,isNewLineCell:()=>ce,isRowHeader:()=>$,isTableActiveElement:()=>jt,isTopHeaderCell:()=>ne});var h,d,p,f,g,m,v,y,b,C,w,S,R,T,E,D,k,O,x,A,L,I,M,P,H,_,N,z,B=n(757),F=n.n(B),W=n(294),j=n(935);function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?V(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e){return[E.ColDimHeader,E.AttributeColDimHeader].includes(e)}function Y(e){return[E.ColDimMember,E.ColDimHeader,E.AttributeColDimHeader,E.AttributeColDimMember,E.NewLineOnColumn].includes(e)}function $(e){return[E.RowDimMember,E.RowDimHeader,E.AttributeRowDimHeader,E.AttributeRowDimMember,E.NewLineOnRow].includes(e)}function Q(e){return Y(e)||$(e)||e===E.Header}function J(e){return e.isInHierarchy&&(e.cellType===E.ColDimMember||e.cellType===E.AttributeColDimMember)}function ee(e){return[E.ColDimMember,E.RowDimMember,E.AttributeColDimMember,E.AttributeRowDimMember,E.NewLineOnRow,E.NewLineOnColumn].includes(e)}function te(e){return[E.EmptyAxisRowHeader,E.EmptyAxisColumnHeader].includes(e)}function ne(e){return Y(e)||[E.Header,E.RowDimHeader,E.AttributeRowDimHeader].includes(e)}function re(e){return[E.Threshold,E.DataLocking,E.Unbooked,E.Value,E.Comment,E.Chart].includes(e)}function oe(e){return le(e)||se(e)||ie(e)}function ie(e){return e===E.CoordinateCorner}function le(e){return[E.RowCoordinate,E.RowCoordinateSelectedDesignMode,E.RowCoordinateSelectedViewMode].includes(e)}function se(e){return[E.ColumnCoordinate,E.ColumnCoordinateSelectedDesignMode,E.ColumnCoordinateSelectedViewMode].includes(e)}function ae(e){return e===E.Chart}function ce(e){return e===E.NewLineOnRow||e===E.NewLineOnColumn}!function(e){e[e.hatching1=1]="hatching1",e[e.hatching2=2]="hatching2",e[e.hatching3=3]="hatching3",e[e.hatching4=4]="hatching4",e[e.hatching5=5]="hatching5",e[e.hatching6=6]="hatching6",e[e.hatching7=7]="hatching7",e[e.hatching8=8]="hatching8",e[e.transparentFill=9]="transparentFill",e[e.solid=10]="solid",e[e.backgroundImage=11]="backgroundImage",e[e.whiteFill=12]="whiteFill"}(h||(h={})),function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom",e[e.TopBottom=2]="TopBottom",e[e.Left=3]="Left",e[e.Right=4]="Right",e[e.LeftRight=5]="LeftRight",e[e.All=6]="All",e[e.None=7]="None"}(d||(d={})),function(e){e[e.None=0]="None",e[e.Solid=1]="Solid",e[e.Dashed=2]="Dashed",e[e.Dotted=3]="Dotted"}(p||(p={})),function(e){e[e.None=0]="None",e[e.Simple=1]="Simple",e[e.Decoration=2]="Decoration",e[e.Blank=3]="Blank"}(f||(f={})),function(e){e[e.Top=0]="Top",e[e.Middle=1]="Middle",e[e.Bottom=2]="Bottom"}(g||(g={})),function(e){e[e.Left=-1]="Left",e[e.Center=0]="Center",e[e.Right=1]="Right"}(m||(m={})),function(e){e[e.Widget=0]="Widget",e[e.ImageCell=1]="ImageCell",e[e.TitleRegion=2]="TitleRegion",e[e.HeaderRegion=3]="HeaderRegion",e[e.DatacellRegion=4]="DatacellRegion",e[e.Dimension=5]="Dimension",e[e.DimensionMember=6]="DimensionMember",e[e.DataCell=7]="DataCell",e[e.CustomCell=8]="CustomCell",e[e.CellChart=9]="CellChart",e[e.HeaderCell=10]="HeaderCell",e[e.Title=11]="Title",e[e.Subtitle=12]="Subtitle",e[e.Row=13]="Row",e[e.Column=14]="Column",e[e.Attribute=15]="Attribute",e[e.MultiCell=17]="MultiCell",e[e.MultiRegion=18]="MultiRegion",e[e.AllCells=19]="AllCells"}(v||(v={})),function(e){e.Title="title",e.Subtitle="subtitle"}(y||(y={})),function(e){e[e.None=0]="None",e[e.Column=1]="Column",e[e.Row=2]="Row",e[e.Title=3]="Title"}(b||(b={})),function(e){e[e.Column=0]="Column",e[e.Row=1]="Row"}(C||(C={})),function(e){e[e.unset=0]="unset",e[e.horizontal=1]="horizontal",e[e.vertical=2]="vertical"}(w||(w={})),function(e){e.Horizontal="horizontal",e.Vertical="vertical"}(S||(S={})),function(e){e[e.None=0]="None",e[e.Self=1]="Self",e[e.Child=2]="Child"}(R||(R={})),(z=T||(T={})).Box="box",z.Rows="rows",z.Columns="columns",z.Region="region",z.All="all",z.Mixed="mixed",(N=E||(E={}))[N.Value=0]="Value",N[N.Header=1]="Header",N[N.Input=2]="Input",N[N.Chart=3]="Chart",N[N.MemberSelector=4]="MemberSelector",N[N.Unbooked=5]="Unbooked",N[N.Threshold=6]="Threshold",N[N.DataLocking=7]="DataLocking",N[N.Validation=8]="Validation",N[N.Marquee=9]="Marquee",N[N.ColumnCoordinate=10]="ColumnCoordinate",N[N.RowCoordinate=11]="RowCoordinate",N[N.Attribute=12]="Attribute",N[N.Empty=13]="Empty",N[N.RowDimHeader=14]="RowDimHeader",N[N.ColDimHeader=15]="ColDimHeader",N[N.ColDimMember=16]="ColDimMember",N[N.RowDimMember=17]="RowDimMember",N[N.AttributeRowDimHeader=18]="AttributeRowDimHeader",N[N.AttributeColDimHeader=19]="AttributeColDimHeader",N[N.AttributeRowDimMember=20]="AttributeRowDimMember",N[N.AttributeColDimMember=21]="AttributeColDimMember",N[N.Title=22]="Title",N[N.Custom=23]="Custom",N[N.CoordinateCorner=24]="CoordinateCorner",N[N.Comment=25]="Comment",N[N.ColumnCoordinateSelectedDesignMode=26]="ColumnCoordinateSelectedDesignMode",N[N.RowCoordinateSelectedDesignMode=27]="RowCoordinateSelectedDesignMode",N[N.ColumnCoordinateSelectedViewMode=28]="ColumnCoordinateSelectedViewMode",N[N.RowCoordinateSelectedViewMode=29]="RowCoordinateSelectedViewMode",N[N.MergedDummyCell=30]="MergedDummyCell",N[N.Image=31]="Image",N[N.NewLineOnRow=32]="NewLineOnRow",N[N.NewLineOnColumn=33]="NewLineOnColumn",N[N.EmptyAxisRowHeader=34]="EmptyAxisRowHeader",N[N.EmptyAxisColumnHeader=35]="EmptyAxisColumnHeader",function(e){e.Top="Top",e.Bottom="Bottom",e.Left="Left",e.Right="Right"}(D||(D={})),function(e){e.Good="good",e.Warning="warning",e.Alert="alert",e.Diamond="diamond",e.Information="information",e.SapCheckmark="sap-checkmark",e.SapAlert="sap-alert",e.SapError="sap-error",e.OutlineFill="outline-fill",e.SapInformation="sap-information"}(k||(k={})),function(e){e.Locked="locked",e.Loading="loading",e.Mixed="mixed",e.Unknown="unknown",e.NoIcon="noIcon"}(O||(O={})),function(e){e.Invalid="INVALID",e.Valid="VALID",e.Unknown="UNDEFINED"}(x||(x={})),function(e){e[e.Percent=50]="Percent",e[e.Value=100]="Value",e[e.Text=200]="Text"}(A||(A={})),function(e){e.Bar="bar",e.VarianceBar="varianceBar",e.VariancePin="pin"}(L||(L={})),function(e){e.ariaEditShortcutAnnouncement="ARIA_SHORTCUT_ANNOUNCEMENT_EDIT",e.ariaExpandShortcutAnnouncement="ARIA_SHORTCUT_ANNOUNCEMENT_EXPAND",e.ariaCollapseShortcutAnnouncement="ARIA_SHORTCUT_ANNOUNCEMENT_COLLAPSE",e.ariaHyperlinkShortcutAnnouncement="ARIA_SHORTCUT_ANNOUNCEMENT_HYPERLINK",e.ariaCellLabelLocked="ARIA_CELL_LABEL_LOCKED",e.ariaCellLabelDataLockingLocked="ARIA_CELL_LABEL_DATA_LOCKING_LOCKED",e.ariaCellLabelDataLockingLoading="ARIA_CELL_LABEL_DATA_LOCKING_LOADING",e.ariaCellLabelDataLockingMixed="ARIA_CELL_LABEL_DATA_LOCKING_MIXED",e.ariaCellLabelDataLockingUnknown="ARIA_CELL_LABEL_DATA_LOCKING_UNKNOWN",e.ariaCellLabelEditable="ARIA_CELL_LABEL_EDITABLE",e.ariaCellLabelTypeHeader="ARIA_CELL_LABEL_TYPE_HEADER",e.ariaCellLabelTypeInput="ARIA_CELL_LABEL_TYPE_INPUT",e.ariaCellLabelTypeChart="ARIA_CELL_LABEL_TYPE_CHART",e.ariaCellLabelTypeUnbooked="ARIA_CELL_LABEL_TYPE_UNBOOKED",e.ariaCellLabelTypeEmpty="ARIA_CELL_LABEL_TYPE_EMPTY",e.ariaCellLabelTypeCustom="ARIA_CELL_LABEL_TYPE_CUSTOM",e.ariaCellLabelTypeComment="ARIA_CELL_LABEL_TYPE_COMMENT",e.ariaCellLabelTypeImage="ARIA_CELL_LABEL_TYPE_IMAGE",e.ariaCellLabelTypeThreshold="ARIA_CELL_LABEL_TYPE_THRESHOLD",e.ariaCellLabelNoBookedValue="ARIA_CELL_LABEL_NO_BOOKED_VALUE",e.ariaCellLabelMergedColsRows="ARIA_CELL_LABEL_MERGED_COLS_ROWS",e.ariaCellLabelMergedCols="ARIA_CELL_LABEL_MERGED_COLS",e.ariaCellLabelMergedRows="ARIA_CELL_LABEL_MERGED_ROWS",e.ariaCellLabelBarChart="ARIA_CELL_LABEL_BAR_CHART",e.ariaCellLabelVarianceBarChart="ARIA_CELL_LABEL_VARIANCE_BAR_CHART",e.ariaCellLabelPinChart="ARIA_CELL_LABEL_PIN_CHART",e.ariaCellLabelEmpty="ARIA_CELL_LABEL_EMPTY",e.ariaChartCellDescription="ARIA_CHART_CELL_DESCRIPTION",e.ariaCellLabelThresholdIcon="ARIA_CELL_LABEL_THRESHOLD_ICON",e.ariaThresholdIconGood="ARIA_THRESHOLD_ICON_GOOD",e.ariaThresholdIconWarning="ARIA_THRESHOLD_ICON_WARNING",e.ariaThresholdIconAlert="ARIA_THRESHOLD_ICON_ALERT",e.ariaThresholdIconDiamond="ARIA_THRESHOLD_ICON_DIAMOND"}(I||(I={})),function(e){e[e.Selection=0]="Selection",e[e.DoubleSelection=1]="DoubleSelection",e[e.AffectedCells=2]="AffectedCells"}(M||(M={})),function(e){e[e.Compact=0]="Compact",e[e.Condensed=1]="Condensed",e[e.Cozy=2]="Cozy",e[e.Custom=3]="Custom",e[e.SuperCondensed=4]="SuperCondensed"}(P||(P={})),function(e){e.Actual="AC",e.Budget="BU",e.Planning="PL",e.Forecast="FC",e.RollingForecast="RF",e.None="none"}(H||(H={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.SingleCell=2]="SingleCell",e[e.SingleRowCol=3]="SingleRowCol",e[e.MultiRowCol=4]="MultiRowCol"}(_||(_={}));var ue,he={TABLE_COMPONENT_CLASS:"reactTableComponent",COORDINATE_CELL_SIZE:30,CELL_PADDING_LEFT:8,CELL_PADDING_RIGHT:8,CELL_PADDING_TOP:2,CELL_PADDING_BOTTOM:2,CELLTEXT_PADDING_HORIZONTAL:2,GRID_BORDER_SIZE:1,HIERARCHY_LEVEL_PADDING_TOP:10,HIERARCHY_LEVEL_PADDING_TOP_DEFAULT:5,HIERARCHY_LEVEL_PADDING_LEFT:8,DRILL_ICON_PADDING_LEFT:16,ICON_HEIGHT:16,ICON_HEIGHT_MOBILE:20,ICON_WIDTH_MOBILE:30,CUSTOM_ICON_WIDTH:16,MAX_NUM_CUSTOM_ICONS:2,SCROLLBAR_SIZE:12,DUMMY_DIMENSION:"DummyDimension",TEXT_WIDTH_CALC_ERROR_MARGIN:4,TEXT_HEIGHT_CALC_ERROR_MARGIN:3,FONTSIZE_TO_LINEHEIGHT_FACTOR:1.2,TOO_MANY_COLUMNS_WARNING:15,LOW_ENOUGH_NUMBER_OF_COLUMNS_TO_RENDER_FAST_ON_MOBILE:15,NEW_LINE_WRAPPER:"unbookedCombinationsControlWrapper",TITLE_TOKENCONTAINER_HEIGHT:28,TITLE_TOKENSEPARATOR_HEIGHT:20,TITLE_HEIGHT:52,TITLE_PADDING_VERTICAL:8,TITLE_PADDING_HORIZONTAL:10,TITLE_TOKEN_WRAP_MARGIN:4,TITLE_ID_PREFIX:"sacGridTitle",CELL_CLASSNAME:"tableCell",RESPONSIVE_EMPTY_COLUMN_WIDTH:100,DEFAULT_CELL_IMG_HEIGHT:80,RESPONSIVE_CHART_WIDTH:50,DATA_LOCK_ICON_WIDTH:12,VALIDATION_WARNING_ICON_WIDTH:12,THRESHOLD_ICON_WIDTH:16,COORDINATE_ROW_PREFIX:"row-",COORDINATE_COL_PREFIX:"column-",COORDINATE_CORNER:"corner"},de={MIN_HEIGHT:he.CELL_PADDING_TOP+he.CELL_PADDING_BOTTOM,MAX_HEIGHT:200,PADDING_COMPACT:8,PADDING_SUPER_CONDENSED:2,PADDING_CONDENSED:4,PADDING_COZY:14},pe={DATASET_ICON_WIDTH:15,TOKENSEPARATOR_HEIGHT:20,TOKENSEPARATOR_WIDTH:14,DELETE_ICON_WIDTH:15,TOKEN_LINK_TEXT_PADDING:2,FILTER_CHAIN_ICON:10.5,TOKEN_ICON_WIDTH:12,SORT_ROTATED_WIDTH:13,NOTIFICATION_ICON_WIDTH:16,VARIABLE_PROMPT_ICON_WIDTH:15,TITLE_DESCRIPTION:"title",TITLE_WRAPPER_CLASS:"titleWrapper"},fe={BAR_CHART_BAR:"barChartBar",BAR_CHART_AXIS:"barChartAxis",VARIANCEPIN_CHART_BAR:"variancePinChartBar",SCROLLBAR_CONTAINER:"scrollbarContainer",SCROLLBAR_HORIZONTAL:"horizontal",SCROLLBAR_VERTICAL:"vertical",ROW:"tableDivRow",EMPTY_AXIS_HEADER:"emptyAxisHeaderCell",ICON:"icon",REACT_TABLE_CONTAINER:"reactTableContainer",VARIANCE_CHART_POSITIVE:"varianceInCellChartPositive",VARIANCE_CHART_NEGATIVE:"varianceInCellChartNegative",HIERARCHY_DRILL_ICON_AND_TEXT:"sacGridDrillIconAndText"},ge={SELECTION_COLOR:"rgba(169, 198, 222, 0.2)",SELECTION_COLOR_DESIGN:"rgba(249, 187, 149, 0.2)",TABLE_BACKGROUND_COLOR:"#FFF"},me={DRAG_DATA_KEY:"sac-grid-drag-data",DRAG_DATA_SEPARATOR:"--",EMPTY_AXIS_COLUMN_ICON:"emptyAxisColumnSwapIcon",EMPTY_AXIS_ROW_ICON:"emptyAxisRowSwapIcon"};!function(e){e[e.A=65]="A",e[e.ALT=18]="ALT",e[e.ARROW_DOWN=40]="ARROW_DOWN",e[e.ARROW_LEFT=37]="ARROW_LEFT",e[e.ARROW_RIGHT=39]="ARROW_RIGHT",e[e.ARROW_UP=38]="ARROW_UP",e[e.B=66]="B",e[e.BACKSLASH=226]="BACKSLASH",e[e.BACKSPACE=8]="BACKSPACE",e[e.BREAK=19]="BREAK",e[e.C=67]="C",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.CMD_LEFT=91]="CMD_LEFT",e[e.CMD_RIGHT=93]="CMD_RIGHT",e[e.COMMA=188]="COMMA",e[e.CONTEXT_MENU=93]="CONTEXT_MENU",e[e.CONTROL=17]="CONTROL",e[e.D=68]="D",e[e.DELETE=46]="DELETE",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_1=49]="DIGIT_1",e[e.DIGIT_2=50]="DIGIT_2",e[e.DIGIT_3=51]="DIGIT_3",e[e.DIGIT_4=52]="DIGIT_4",e[e.DIGIT_5=53]="DIGIT_5",e[e.DIGIT_6=54]="DIGIT_6",e[e.DIGIT_7=55]="DIGIT_7",e[e.DIGIT_8=56]="DIGIT_8",e[e.DIGIT_9=57]="DIGIT_9",e[e.DOT=190]="DOT",e[e.E=69]="E",e[e.END=35]="END",e[e.ENTER=13]="ENTER",e[e.EQUALS=221]="EQUALS",e[e.ESCAPE=27]="ESCAPE",e[e.F=70]="F",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.G=71]="G",e[e.GREAT_ACCENT=220]="GREAT_ACCENT",e[e.H=72]="H",e[e.HOME=36]="HOME",e[e.I=73]="I",e[e.INSERT=45]="INSERT",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.MINUS=219]="MINUS",e[e.N=78]="N",e[e.NUMPAD_0=96]="NUMPAD_0",e[e.NUMPAD_1=97]="NUMPAD_1",e[e.NUMPAD_2=98]="NUMPAD_2",e[e.NUMPAD_3=99]="NUMPAD_3",e[e.NUMPAD_4=100]="NUMPAD_4",e[e.NUMPAD_5=101]="NUMPAD_5",e[e.NUMPAD_6=102]="NUMPAD_6",e[e.NUMPAD_7=103]="NUMPAD_7",e[e.NUMPAD_8=104]="NUMPAD_8",e[e.NUMPAD_9=105]="NUMPAD_9",e[e.NUMPAD_ASTERISK=106]="NUMPAD_ASTERISK",e[e.NUMPAD_COMMA=110]="NUMPAD_COMMA",e[e.NUMPAD_MINUS=109]="NUMPAD_MINUS",e[e.NUMPAD_PLUS=107]="NUMPAD_PLUS",e[e.NUMPAD_SLASH=111]="NUMPAD_SLASH",e[e.NUM_LOCK=144]="NUM_LOCK",e[e.O=79]="O",e[e.OPEN_BRACKET=186]="OPEN_BRACKET",e[e.P=80]="P",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.PAGE_UP=33]="PAGE_UP",e[e.PIPE=191]="PIPE",e[e.PLUS=187]="PLUS",e[e.PRINT=44]="PRINT",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.SEMICOLON=192]="SEMICOLON",e[e.SHIFT=16]="SHIFT",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE",e[e.SLASH=189]="SLASH",e[e.SLEEP=95]="SLEEP",e[e.SPACE=32]="SPACE",e[e.T=84]="T",e[e.TAB=9]="TAB",e[e.TURN_OFF=94]="TURN_OFF",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.WINDOWS=91]="WINDOWS",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z"}(ue||(ue={}));var ve={FONT_SIZE:13,FONT_FAMILY:"'72-Web'",FONT_FAMILY_FALLBACK:", Arial, Helvetica, sans-serif",FONT_SIZE_TITLE:16,FONT_SIZE_SUBTITLE:12,FONT_OVERRIDE_SCALE:100,FONT_COLOR:'"grey"',SCROLL_LIMIT_VERTICAL:.9,SCROLL_LIMIT_HORIZONTAL:.5},ye=ve.FONT_SIZE+he.CELL_PADDING_TOP+he.CELL_PADDING_BOTTOM+he.GRID_BORDER_SIZE;function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var we=Ce(Ce({},ve),{},{BORDER_PADDING:8}),Se=Ce(Ce({},he),{},{MINIMUM_COLUMN_SIZE:2,NO_CONTENT_COLUMN_SIZE:he.CELL_PADDING_LEFT+he.CELL_PADDING_RIGHT,COORDINATE_ROW_NAME:"coordinateRow",COORDINATE_COL_NAME:"coordinateCol",COORDINATE_ROW_HEADER_CLASSNAME:"coordinateHeaderRow",COORDINATE_COL_HEADER_CLASSNAME:"coordinateHeaderColumn",AUTO_SCROLL_STEP_PLUS:20,AUTO_SCROLL_STEP_MINUS:10,AUTO_SCROLL_BUFFER:50,VARIANCE_PIN_SIZE:8,VARIANCE_PIN_BAR_HEIGHT:4,BAR_CHART_VERTICAL_PADDING_PERCENT:20,BAR_CHART_HORIZONTAL_PADDING_PERCENT:10,CELL_CHART_TEXT_SHIFT_HORIZONTAL_BAR:"0.35em",CELL_CHART_TEXT_SHIFT_VERTICAL_BAR:"1em",PADDING_FOR_IN_CELL_CHARTS_HEIGHT:2,PADDING_FOR_IN_CELL_CHARTS_WIDTH:8,IN_CELL_CHART_TEXT_PADDING:5,AXIS_SIZE_IN_CELL_CHARTS:2,TITLE_BORDER_WIDTH:1,TITLE_BORDER_COLOR:"rgb(230, 231, 232)",SELECTION_BORDER_COLOR:"#3b6f9a",SELECTION_BORDER_COLOR_DESIGN:"#d85a0c",SELECTION_REFERENCE_COLOR:"rgba(169, 198, 222, 0.35)",BUFFER_LIMIT_VERTICAL:1,CONTENT_LIMIT_VERTICAL:3,BUFFER_LIMIT_HORIZONTAL:.1,CONTENT_LIMIT_HORIZONTAL:1.2,FREEZE_LINE_OFFSET:1,IMG_CELL_PADDING_TOP:4,IMG_CELL_PADDING_BOTTOM:4,SHOW_GRID_CLASS:"showGrid",MAX_SCROLL_STEP:150,RESIZE_INFO_HEIGHT:22,TABLE_ROOT_ID_PREFIX:"sacGridTableRoot",TABLE_MOBILE_CLASS:"sacGridMobile"}),Re=Ce({},de),Te=function(){return null},Ee=Ce(Ce({},me),{},{SOURCE_CELL_PREFIX:"sac-grid-source-cell",DRAG_HANDLE_CLASS:"sacGridCellDragHandle",DROP_AREA_CLASS:"sacGridCellDropArea",DROP_AREA_LEFT_CLASS:"sacGridCellDropAreaLeft",DROP_AREA_RIGHT_CLASS:"sacGridCellDropAreaRight",DROP_AREA_FOCUS_CLASS:"dropAreaFocused",DROP_ZONE_AREA_FOREGROUND_CLASS:"areaDropZoneForeground",DROP_ZONE_CELL_BACKGROUND_CLASS:"cellDropZoneBackground",DROP_ZONE_CELL_FOCUS_CLASS:"cellDropZoneFocus",DROP_ZONE_COLUMN_CLASS:"columnDropZone",DROP_ZONE_FOCUS_CLASS:"dropZoneFocus",DROP_ZONE_INDEX0_CLASS:"dropZoneIndex0",DROP_ZONE_LINE_CLASS:"lineDropZone",DROP_ZONE_ROW_CLASS:"rowDropZone",SHOW_DROP_AREAS_CLASS:"showDropAreas",DRAG_IN_PROCESS_CLASS:"draggingInProcess",DROP_AREA_ROWS:"sacGridRowsDropAreas",DROP_AREA_COLUMNS:"sacGridColumnsDropAreas",EMPTY_AXIS_DROP_AREA_CLASS:"emptyAxisDropArea"});function De(e){return"".concat(e,"px")}var ke=n(379),Oe=n.n(ke),xe=n(16);Oe()(xe.Z,{insert:"head",singleton:!1}),xe.Z.locals;var Ae=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"render",value:function(){return W.createElement(W.Fragment,null,this.props.vertical&&W.createElement("div",{className:"freezeLine verticalFreezeLine",style:{height:De(this.props.containerHeight),left:De(this.props.left-Se.FREEZE_LINE_OFFSET)}}),this.props.horizontal&&W.createElement("div",{className:"freezeLine horizontalFreezeLine",style:{width:De(this.props.containerWidth),top:De(this.props.top-Se.FREEZE_LINE_OFFSET)}}))}}]),o}(W.PureComponent);function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Me=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"render",value:function(){var e=this.props.preContent?{top:this.props.coordinateOffset}:{bottom:0},t=this.props.preContent?"20px":"30px",n=this.props.preContent?0:"10px";return W.createElement("div",{ref:this.props.innerRef,className:"loadingArea loadingAreaHorizontal ".concat(this.props.name),style:Ie(Ie({},e),{},{width:"calc(100% - ".concat(this.props.coordinateOffset,"px)"),height:t,right:0})},W.createElement("div",{className:"loadingIndicatorGif",style:{background:"url('".concat(this.props.pathToLoadingGif||"","') center center / 30px 12px no-repeat"),bottom:n,left:"calc(50% - 20px)"}}))}}]),o}(W.PureComponent);function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var _e=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"render",value:function(){var e=this.props.preContent?{left:this.props.coordinateOffset}:{right:0},t=this.props.preContent?"20px":"30px",n=this.props.preContent?"-10px":"2px";return W.createElement("div",{ref:this.props.innerRef,className:"loadingArea loadingAreaVertical ".concat(this.props.name),style:He(He({},e),{},{width:t,height:"calc(100% - ".concat(this.props.coordinateOffset,"px)"),bottom:0})},W.createElement("div",{className:"loadingIndicatorGif",style:{background:"url('".concat(this.props.pathToLoadingGif||"","') center center / 30px 12px no-repeat"),bottom:"calc(50% - 20px)",transform:"rotate(90deg)",right:n}}))}}]),o}(W.PureComponent);var Ne="data-start",ze=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){var t;return a(this,o),(t=r.call(this,e)).boundHandleMouseDown=t.handleMouseDown.bind(V(t)),t.boundHandleMouseMove=t.handleMouseMove.bind(V(t)),t.boundHandleMouseUp=t.handleMouseUp.bind(V(t)),t.boundHandleContextMenu=t.handleContextMenu.bind(V(t)),t.refResizerIndicator=W.createRef(),t.refSizeInfo=W.createRef(),t}return u(o,[{key:"handleMouseDown",value:function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),this.refResizerIndicator.current&&this.refSizeInfo.current&&(this.props.onResizeStart(e,this.refResizerIndicator.current,this.refSizeInfo.current),this.refResizerIndicator.current.style.display="block"),document.addEventListener("mousemove",this.boundHandleMouseMove),document.addEventListener("mouseup",this.boundHandleMouseUp))}},{key:"handleMouseMove",value:function(e){this.refResizerIndicator.current&&this.refSizeInfo.current&&this.props.onResizing(e,this.refResizerIndicator.current,this.refSizeInfo.current)}},{key:"handleMouseUp",value:function(){this.refResizerIndicator.current&&(this.refResizerIndicator.current.style.display="none",this.refResizerIndicator.current.removeAttribute(Ne)),document.removeEventListener("mousemove",this.boundHandleMouseMove),document.removeEventListener("mouseup",this.boundHandleMouseUp),this.props.onResizeEnd()}},{key:"handleContextMenu",value:function(e){e.nativeEvent.preventDefault()}},{key:"render",value:function(){return W.createElement(W.Fragment,null,W.createElement("div",{ref:this.props.refResizer,className:this.props.resizerCssClassName,onMouseDown:this.boundHandleMouseDown,onDoubleClick:this.props.onResizerDoubeClick,onContextMenu:this.boundHandleContextMenu}),W.createElement("div",{ref:this.refResizerIndicator,className:this.props.resizeIndicatorCssClassName},W.createElement("div",{ref:this.refSizeInfo,className:"resizeInfo"})))}}]),o}(W.Component);var Be=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){var t;return a(this,o),(t=r.call(this,e)).boundHandleResizeStart=t.handleResizeStart.bind(V(t)),t.boundHandleResizeColumn=t.handleResizeColumn.bind(V(t)),t.boundHandleResizeEnd=t.handleResizeEnd.bind(V(t)),t}return u(o,[{key:"handleResizeStart",value:function(e,t,n){n.textContent=De(this.props.resizingInfo.width),t.style.left=De(this.props.resizingInfo.left+this.props.resizingInfo.width-this.props.resizingInfo.scrollOffsetLeft),t.setAttribute(Ne,"".concat(e.clientX)),this.props.onColumnResizeStart()}},{key:"handleResizeColumn",value:function(e,t,n){var r=this.props.resizingInfo.col,o=t.getAttribute(Ne);if(o){var i=this.props.columnSettings[r].width+(e.clientX-parseInt(o,10));i<Se.MINIMUM_COLUMN_SIZE||(t.style.left=De(this.props.resizingInfo.left+i-this.props.resizingInfo.scrollOffsetLeft),this.props.resizingInfo.newWidth=i,n.textContent=De(i))}}},{key:"handleResizeEnd",value:function(){this.props.onNewColumnWidth(this.props.resizingInfo.newWidth),this.props.onColumnResizeEnd()}},{key:"render",value:function(){return W.createElement(ze,{resizerCssClassName:"columnResizer",resizeIndicatorCssClassName:"columnResizeIndicator",resizingInfo:this.props.resizingInfo,refResizer:this.props.refColumnResizer,onResizerDoubeClick:this.props.onColumnResizerDoubeClick,onResizeStart:this.boundHandleResizeStart,onResizing:this.boundHandleResizeColumn,onResizeEnd:this.boundHandleResizeEnd})}}]),o}(W.Component);function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function je(e,t,n){var r=[];if(n.includes(e)){var o,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?We(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}(n);try{for(i.s();!(o=i.n()).done;){var l=o.value;r.push({index:l,size:t})}}catch(e){i.e(e)}finally{i.f()}}else r.push({index:e,size:t});return r}function Ve(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e.style.top="".concat(t.top+t.height+r-n-t.scrollOffsetTop,"px"),e.style.visibility=o?"hidden":"visible"}function Ue(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.style.left="".concat(t.left+t.width-n-t.scrollOffsetLeft,"px"),e.style.visibility=r?"hidden":"visible"}function Ge(e,t,n){var r,o={row:e.row,col:e.col},i=t.rows,l=t.columnSettings,s=null===(r=i[e.row])||void 0===r?void 0:r.cells[e.col];if(s&&s.merged){if(s.merged.rows)for(var a=e.row+s.merged.rows,c=0,u=e.row;u<=a&&c<=e.event.offsetY;u++)c+=i[u].height+n,o.row=u;if(s.merged.columns)for(var h=e.col+s.merged.columns,d=0,p=e.col;p<=h&&d<=e.event.offsetX;p++)d+=l[p].width,o.col=p}return o}var Ke=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){var t;return a(this,o),(t=r.call(this,e)).boundHandleResizeStart=t.handleResizeStart.bind(V(t)),t.boundHandleResizeRow=t.handleResizeRow.bind(V(t)),t.boundHandleResizeEnd=t.handleResizeEnd.bind(V(t)),t}return u(o,[{key:"handleResizeStart",value:function(e,t,n){n.textContent=De(this.props.resizingInfo.height),t.style.top=De(this.props.resizingInfo.top+this.props.resizingInfo.height+this.props.notRenderedHeightTop-this.props.resizingInfo.scrollOffsetTop),t.setAttribute(Ne,"".concat(e.clientY)),this.props.onRowResizeStart()}},{key:"handleResizeRow",value:function(e,t,n){var r=this.props.resizingInfo.row,o=t.getAttribute(Ne);if(o){var i=this.props.rows[r].height+this.props.borderSize+(e.clientY-parseInt(o,10));i<Re.MIN_HEIGHT||i>this.props.tableContainerHeight||(t.style.top=De(this.props.resizingInfo.top+i+this.props.notRenderedHeightTop-this.props.resizingInfo.scrollOffsetTop),this.props.resizingInfo.newHeight=i,n.textContent=De(i))}}},{key:"handleResizeEnd",value:function(){this.props.onNewRowHeight(this.props.resizingInfo.newHeight),this.props.onRowResizeEnd()}},{key:"render",value:function(){return W.createElement(ze,{resizerCssClassName:"rowResizer",resizeIndicatorCssClassName:"rowResizeIndicator",resizingInfo:this.props.resizingInfo,refResizer:this.props.refRowResizer,onResizerDoubeClick:Te,onResizeStart:this.boundHandleResizeStart,onResizing:this.boundHandleResizeRow,onResizeEnd:this.boundHandleResizeEnd})}}]),o}(W.Component);function Ze(e){switch(e){case P.Cozy:return de.PADDING_COZY;case P.Condensed:return de.PADDING_CONDENSED;case P.SuperCondensed:return de.PADDING_SUPER_CONDENSED;default:return de.PADDING_COMPACT}}function Xe(e,t,n,r){if(r&&e===P.Custom)return r;var o=2*Ze(e)+(t>-1?t:ve.FONT_SIZE);return n?o+he.TEXT_HEIGHT_CALC_ERROR_MARGIN:o}function qe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $e(e,t){return Qe(e)-t}function Qe(e){return e.widgetHeight-tt(e.title)}function Je(e,t){return e-t}function et(e){return{height:De(Qe(e)),width:De(e.widgetWidth),overflow:"hidden"}}function tt(e){return e?e.titleStyle.height:0}function nt(e){return e?"100%":(t=Se.SCROLLBAR_SIZE,"calc(100% - ".concat(t,"px)"));var t}function rt(e){return{verticalScrollbarWidth:e?0:Se.SCROLLBAR_SIZE,isVerticalScrollbarVisible:!e,horizontalScrollbarHeight:e?0:Se.SCROLLBAR_SIZE,isHorizontalScrollbarVisible:!e}}function ot(e){return it(e,{scrollTop:0,scrollLeft:0,notRenderedWidthToTheLeft:0,notRenderedHeightOnTop:0,columnIndices:{startColumnIndex:0,endColumnIndex:void 0},allRowsProcessed:!1,allColumnsProcessed:!1,isPaginatedTable:!0})}function it(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scrollTop:0,scrollLeft:0,notRenderedWidthToTheLeft:0,notRenderedHeightOnTop:0,columnIndices:{startColumnIndex:0,endColumnIndex:void 0},allRowsProcessed:!1,allColumnsProcessed:!1,isPaginatedTable:!0},r=e.showGrid?Se.GRID_BORDER_SIZE:0,o=e.showCoordinateHeader?Se.COORDINATE_CELL_SIZE:0,i=tt(e.title),l=e.mobile||!1,s=rt(l),a=s.horizontalScrollbarHeight,c=s.verticalScrollbarWidth,u=[],h=o+n.notRenderedWidthToTheLeft,d=0,p=n.columnIndices,f=p.startColumnIndex,g=p.endColumnIndex,m=void 0!==g?g:e.columnSettings.length-1,v=void 0!==e.freezeEndCol?e.freezeEndCol:-1,y=0;y<=m;y++){var b=y<=v||y>=f,C=e.columnSettings[y].width;u.push(C),h+=b?C:0,d+=e.columnSettings[y].fixed?C:0}for(var w=Je(e.widgetWidth,c),S=$e(e,a),R=[],T=0,E=0,D=e.rows.length,k=0,O=0;O<D;O++){var x,A=e.rows[O]?e.rows[O].height+r:0;R.push(A),T+=A,e.rows[O]&&k++,E+=null!==(x=e.rows[O])&&void 0!==x&&x.fixed?A:0}var L=at(T,k,e.totalNumberOfRows||k,o),I=T+o+n.notRenderedHeightOnTop,M=Math.round(((null===(t=e.style)||void 0===t?void 0:t.size)||we.FONT_SIZE)*Se.FONTSIZE_TO_LINEHEIGHT_FACTOR),P=r+Xe(e.rowHeightSetting,M,!0,e.rowHeightCustomPixels),H=d+o,_=E+o,N=e.totalHeight+o,z=n.allRowsProcessed?N:Math.max(L,N),B=n.isPaginatedTable?I:z,F=e.totalWidth+o,W=F,j=W,V=nt(l),U=nt(l);void 0!==e.freezeEndCol&&(V=De(H),j=H),void 0!==e.freezeEndRow&&(U=De(_+r));var G={width:V,height:U,htmlTableWidth:j},K={width:V,height:De(S-_),htmlTableWidth:j},Z={width:De(w-H),height:U,htmlTableWidth:W-H},X={width:De(w-H),height:De(S-_),htmlTableWidth:W-H},q=Math.max(I-S,0),Y=lt(I,S,n.scrollTop),$=lt(h,w,n.scrollLeft),Q=st(n.notRenderedHeightOnTop,n.scrollTop),J=st(n.notRenderedWidthToTheLeft,n.scrollLeft);return{tableContentWidth:h,tableContentHeight:I,topLeftSection:G,bottomLeftSection:K,topRightSection:Z,bottomRightSection:X,borderSize:r,coordinateOffset:o,freezeHeight:_,freezeWidth:H,tableContainerWidth:w,tableContainerHeight:S,titleHeight:i,maxScrollTop:q,horizontalScrollbarHeight:a,columnIndices:n.columnIndices,prefetchedHeightBelowTable:Y,prefetchedHeightAboveTable:Q,prefetchedWidthOnTheRightOfTable:$,prefetchedWidthOnTheLeftOfTable:J,notRenderedHeightTop:n.notRenderedHeightOnTop,notRenderedHeightBelow:Math.max(z-I,0),notRenderedWidthOnTheLeft:n.notRenderedWidthToTheLeft,htmlTableWrapperHeight:B,htmlTableWrapperWidth:W,allRowsProcessed:n.allRowsProcessed,rowHeights:R,columnWidths:u,defaultRowHeight:P}}function lt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.max(e-t-n,0)}function st(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.max(t-e,0)}function at(e,t,n,r){var o=e/t;return Math.round(o*n)+r}var ct=function(){function e(t,n){a(this,e),this.setScrollTop=t,this.setScrollLeft=n}return u(e,[{key:"autoScrollTable",value:function(e,t,n,r,o){if(null===e.target.closest(".".concat(Se.COORDINATE_COL_HEADER_CLASSNAME))){var i=((null==(s=(l=e.target).offsetParent)?void 0:s.offsetTop)||0)+l.offsetTop;this.setScrollTop(this.getAutoScrollTop(o,t,i,e))}var l,s;if(null===e.target.closest(".".concat(Se.COORDINATE_ROW_HEADER_CLASSNAME))){var a=function(e){var t=e.offsetParent;return((null==t?void 0:t.offsetLeft)||0)+e.offsetLeft}(e.target);this.setScrollLeft(this.getAutoScrollLeft(r,n,a,e))}}},{key:"getAutoScrollLeft",value:function(e,t,n,r){var o=t;return r.event.offsetX+n-o>e-Se.AUTO_SCROLL_BUFFER&&(o+=Se.AUTO_SCROLL_STEP_PLUS),o+Se.AUTO_SCROLL_BUFFER>n&&(o-=Se.AUTO_SCROLL_STEP_MINUS),o}},{key:"getAutoScrollTop",value:function(e,t,n,r){var o=t;return r.event.offsetY+n-o>e-Se.AUTO_SCROLL_BUFFER&&(o+=Se.AUTO_SCROLL_STEP_PLUS),o+Se.AUTO_SCROLL_BUFFER>n&&(o-=Se.AUTO_SCROLL_STEP_MINUS),o}}]),e}(),ut=n(24);Oe()(ut.Z,{insert:"head",singleton:!1}),ut.Z.locals;var ht=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"render",value:function(){return W.createElement("div",{className:[fe.SCROLLBAR_CONTAINER,this.props.cssClass].join(" ").trim(),ref:this.props.scrollContainerRef,onScrollCapture:this.props.onScrollCapture},W.createElement("div",{className:"scrollableSize",style:this.props.scrollableSizeStyle}))}}]),o}(W.PureComponent);function dt(e,t){return e>t}var pt,ft,gt=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"onScroll",value:function(e){this.props.onScrollLeftChanged(e.currentTarget.scrollLeft)}},{key:"render",value:function(){if(!dt(this.props.totalScrollableColumnWidth,this.props.containerWidth))return null;var e={width:this.props.totalScrollableColumnWidth};return W.createElement(ht,{scrollableSizeStyle:e,cssClass:fe.SCROLLBAR_HORIZONTAL,scrollContainerRef:this.props.scrollContainerRef,onScrollCapture:this.onScroll.bind(this)})}}]),o}(W.PureComponent),mt=function(){function e(){a(this,e),s(this,"lastDeltaX",new vt(3))}return u(e,[{key:"isHorizontalScroll",value:function(e){var t=!!e;return!t&&this.lastDeltaX.zeroes()<=3&&(t=!!this.lastDeltaX.lastValue()),this.lastDeltaX.add(e),t}}]),e}(),vt=function(){function e(t){a(this,e),this.sizeLimit=t,this.content=[]}return u(e,[{key:"add",value:function(e){this.content.unshift(e),this.content.length>this.sizeLimit&&(this.content.length=this.sizeLimit)}},{key:"zeroes",value:function(){return this.content.filter(function(e){return 0===e}).length}},{key:"lastValue",value:function(){return this.content[this.content.length-1]}}]),e}();function yt(e,t,n,r){if(function(e,t){return e<t}(e,n))return e;var o=e+t;return o>n+r?o-r:void 0}function bt(e,t,n,r){return e&&n-r>=t||!e&&r-n>=t}function Ct(e){var t=Math.abs(e||0);return e?t<Se.MAX_SCROLL_STEP?e:e/t*Se.MAX_SCROLL_STEP:0}function wt(e){window.requestAnimationFrame(function(){window.requestAnimationFrame(e)})}function St(e,t){return{scrollLeft:e.scrollLeft+t.freezeWidth-t.coordinateOffset,scrollTop:e.scrollTop+t.freezeHeight-t.coordinateOffset}}!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Down=2]="Down",e[e.Up=3]="Up"}(pt||(pt={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Down=2]="Down",e[e.Up=3]="Up",e[e.FirstRow=4]="FirstRow",e[e.FirstCol=5]="FirstCol",e[e.LastRow=6]="LastRow",e[e.LastCol=7]="LastCol",e[e.FirstCell=8]="FirstCell",e[e.LastCell=9]="LastCell",e[e.PageDown=10]="PageDown",e[e.PageUp=11]="PageUp",e[e.DownAndFirstCol=12]="DownAndFirstCol",e[e.UpAndLastCol=13]="UpAndLastCol"}(ft||(ft={}));var Rt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W.createRef(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W.createRef(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:W.createRef(),o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:W.createRef(),i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:W.createRef(),l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:W.createRef(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;a(this,e),this.freezeSectionTopLeftRef=t,this.freezeSectionBotLeftRef=n,this.freezeSectionTopRightRef=r,this.freezeSectionBotRightRef=o,this.horizontalScrollbarContainerRef=i,this.verticalScrollbarContainerRef=l,this.boundContainerWheel=this.handleContainerWheel.bind(this),this.boundTouchMove=this.handleTouchMove.bind(this),this.boundTouchStart=this.handleTouchStart.bind(this),this.boundSyncVerticalScrollPosition=this.syncVerticalScrollPosition.bind(this),this.boundSyncHorizontalScrollPosition=this.syncHorizontalScrollPosition.bind(this),this.currentScrollTop=s,this.currentScrollLeft=c,this.lastTouchPointPageX=c,this.lastTouchPointPageY=s}return u(e,[{key:"handleContainerWheel",value:function(e){var t=Ct(e.deltaY),n=Ct(e.deltaX);this.updateScrollPositionFromDeltas(n,t)}},{key:"handleTouchStart",value:function(e){var t=e.targetTouches.item(0);t&&1===e.targetTouches.length&&(this.lastTouchPointPageX=t.pageX,this.lastTouchPointPageY=t.pageY)}},{key:"handleTouchMove",value:function(e){var t=e.targetTouches.item(0);if(t&&1===e.targetTouches.length){var n=Ct(this.lastTouchPointPageY-t.pageY),r=Ct(this.lastTouchPointPageX-t.pageX);this.lastTouchPointPageY=t.pageY,this.lastTouchPointPageX=t.pageX,this.updateScrollPositionFromDeltas(r,n)}}},{key:"updateScrollPositionFromDeltas",value:function(e,t){this.currentScrollLeft+=e,this.currentScrollTop+=t,this.currentScrollLeft=Math.max(0,this.currentScrollLeft),this.currentScrollTop=Math.max(0,this.currentScrollTop),this.updateScrollPosition()}},{key:"updateScrollPosition",value:function(){this.setBoundedScrollTopOnRef(this.verticalScrollbarContainerRef),this.setBoundedScrollLeftOnRef(this.horizontalScrollbarContainerRef),this.syncVerticalScrollPosition(this.currentScrollTop),this.syncHorizontalScrollPosition(this.currentScrollLeft)}},{key:"syncVerticalScrollPosition",value:function(e){this.currentScrollTop=e,this.setScrollTopOnRef(this.freezeSectionBotLeftRef),this.setScrollTopOnRef(this.freezeSectionBotRightRef),this.freezeSectionTopLeftRef.current&&(this.freezeSectionBotLeftRef.current||(this.setScrollTopOnRef(this.freezeSectionTopLeftRef),this.freezeSectionTopRightRef.current&&this.setScrollTopOnRef(this.freezeSectionTopRightRef)))}},{key:"syncHorizontalScrollPosition",value:function(e){this.currentScrollLeft=e,this.setScrollLeftOnRef(this.freezeSectionTopRightRef),this.setScrollLeftOnRef(this.freezeSectionBotRightRef),this.freezeSectionTopLeftRef.current&&(this.freezeSectionTopRightRef.current||(this.setScrollLeftOnRef(this.freezeSectionTopLeftRef),this.freezeSectionBotLeftRef.current&&this.setScrollLeftOnRef(this.freezeSectionBotLeftRef)))}},{key:"setScrollTopOnRef",value:function(e){e.current&&(e.current.scrollTop=this.currentScrollTop)}},{key:"setBoundedScrollTopOnRef",value:function(e){e.current?(e.current.scrollTop=this.currentScrollTop,this.currentScrollTop=e.current.scrollTop):this.currentScrollTop=0}},{key:"setScrollLeftOnRef",value:function(e){e.current&&(e.current.scrollLeft=this.currentScrollLeft)}},{key:"setBoundedScrollLeftOnRef",value:function(e){e.current?(e.current.scrollLeft=this.currentScrollLeft,this.currentScrollLeft=e.current.scrollLeft):this.currentScrollLeft=0}},{key:"getScrollTop",value:function(){return this.currentScrollTop}},{key:"getScrollLeft",value:function(){return this.currentScrollLeft}},{key:"setScrollLeft",value:function(e){this.currentScrollLeft=Math.max(0,e),this.updateScrollPosition()}},{key:"setScrollTop",value:function(e){this.currentScrollTop=Math.max(0,e),this.updateScrollPosition()}},{key:"isScrolledToTop",value:function(){return 0===this.currentScrollTop}}]),e}();var Tt=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"updateScrollPosition",value:function(){this.freezeSectionTopRightRef.current?this.setBoundedScrollLeftOnRef(this.freezeSectionTopRightRef):this.setBoundedScrollLeftOnRef(this.freezeSectionTopLeftRef),this.syncVerticalScrollPosition(this.currentScrollTop),this.syncHorizontalScrollPosition(this.currentScrollLeft)}}]),o}(Rt),Et=function(){function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;a(this,e),s(this,"lastScrollTop",0),s(this,"lastScrollLeft",0),s(this,"lastScrollUpdateVertical",0),s(this,"lastScrollUpdateHorizontal",0),this.lastScrollTop=o,this.lastScrollLeft=i,this.lastScrollUpdateHorizontal=t.scrollLeft,this.lastScrollUpdateVertical=t.scrollTop,this.onInternalReloadLimitReachedHandler=n,this.onStoreScrollPosition=r}return u(e,[{key:"getLastScrollTop",value:function(){return this.lastScrollTop}},{key:"getLastScrollLeft",value:function(){return this.lastScrollLeft}},{key:"getLastScrollUpdateVertical",value:function(){return this.lastScrollUpdateVertical}},{key:"getLastScrollUpdateHorizontal",value:function(){return this.lastScrollUpdateHorizontal}},{key:"getScrollLimitVertical",value:function(e,t,n){var r=n||we.SCROLL_LIMIT_VERTICAL;return(e?t.prefetchedHeightBelowTable:t.prefetchedHeightAboveTable)*r}},{key:"getScrollLimitHorizontal",value:function(e,t,n){var r=n||we.SCROLL_LIMIT_HORIZONTAL;return(e?t.prefetchedWidthOnTheRightOfTable:t.prefetchedWidthOnTheLeftOfTable)*r}},{key:"dispatchInternalReloadLimitReached",value:function(e){var t=this,n=e.scrollTop,r=e.scrollLeft,o=e.scrollLimitVertical,i=e.scrollLimitHorizontal,l=e.tableSizes,s=this.lastScrollTop!==n,a=this.lastScrollLeft!==r;if(s||a){if(s){var c=this.lastScrollTop<n,u=this.getScrollLimitVertical(c,l,o);this.lastScrollTop=n,bt(c,u,n,this.lastScrollUpdateVertical)&&(this.lastScrollUpdateVertical=n,wt(function(){t.onInternalReloadLimitReachedHandler.onInternalReloadLimitReachedVertically(n,c)})),c||0!==l.notRenderedHeightTop||(this.lastScrollUpdateVertical=0)}if(a){var h=this.lastScrollLeft<r,d=this.getScrollLimitHorizontal(h,l,i);this.lastScrollLeft=r,bt(h,d,r,this.lastScrollUpdateHorizontal)&&(this.lastScrollUpdateHorizontal=r,wt(function(){t.onInternalReloadLimitReachedHandler.onInternalReloadLimitReachedHorizontally(r,h)}))}0===r&&(this.lastScrollUpdateHorizontal=0),this.onStoreScrollPosition({scrollLeft:r,scrollTop:n})}}}]),e}();var Dt=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"onScroll",value:function(e){this.props.onScrollTopChanged(e.currentTarget.scrollTop)}},{key:"render",value:function(){if(!dt(this.props.totalScrollableRowHeight,this.props.containerHeight))return null;var e={height:this.props.totalScrollableRowHeight};return W.createElement(ht,{scrollableSizeStyle:e,cssClass:fe.SCROLLBAR_VERTICAL,scrollContainerRef:this.props.scrollContainerRef,onScrollCapture:this.onScroll.bind(this)})}}]),o}(W.PureComponent),kt=W.memo(function(e){return W.createElement("textarea",{id:"".concat(e.tableId,"-gridClipBoard"),className:"gridClipBoard sacGridHiddenTextArea",tabIndex:-1})});function Ot(e,t){if(-1===t)return-1===e?he.COORDINATE_CORNER:"".concat(he.COORDINATE_ROW_PREFIX).concat(e+1);var n=function(e){for(var t=[],n=0,r=e;r>=0;)n=r%26,t=t.concat(String.fromCharCode("A".charCodeAt(0)+n)),r=Math.floor(r/26)-1;return t.reverse().join("")}(t);return-1===e?"".concat(he.COORDINATE_COL_PREFIX).concat(n):"".concat(n).concat(e+1)}function xt(e){return void 0===e||e}function At(e,t){return zt("row-".concat(e,"-").concat(t))}function Lt(e,t,n){return zt("cell-".concat(e,"-").concat(t,"-").concat(n))}function It(e,t){return zt("column-setting-".concat(e,"-").concat(t))}function Mt(e,t){return zt("".concat(e,"-").concat(t))}function Pt(e,t){return zt("custom-row-".concat(e,"-").concat(t))}function Ht(e,t,n){return zt("custom-cell-".concat(e,"-").concat(t,"-").concat(n))}function _t(e,t,n){return zt("empty-cell-".concat(e,"-").concat(t,"-").concat(n))}function Nt(e){return zt("empty-cell-dummy-dummy-".concat(e))}function zt(e){return function(e){var t=0;if(!e)return"";for(var n=0;n<e.length;++n)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t<0?"".concat("-".charCodeAt(0).toString(16)).concat((-1*t).toString(16)):"".concat(t.toString(16))}(e)}function Bt(e){return e.versionEdited?"".concat(e.formatted," *"):e.formatted}function Ft(e,t,n){return{id:_t(e,t,n),row:e,column:t,formatted:"",plain:"",context:{dimensions:[],originalDimension:""},editable:!0,isInHierarchy:!1,cellType:E.Empty,style:{},styleUpdatedByUser:!0}}function Wt(e,t,n){return document.querySelector(".table".concat(e," [data-tablecol='").concat(t,"'][data-tablerow='").concat(n,"']"))}function jt(e,t){var n=Boolean(document&&document.activeElement===document.body)&&e;return Vt(t)||n}function Vt(e){return Boolean(document&&document.activeElement&&null!==document.activeElement.closest("#".concat(e)))}function Ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Kt(e,t,n){var r=n[e]&&n[e].cells[t];if(!r)return{startCol:t,endCol:t,startRow:e,endRow:e};if(r.cellType===E.MergedDummyCell&&r.merged&&void 0!==r.merged.originalColumn&&void 0!==r.merged.originalRow){var o=n[r.merged.originalRow];r=o&&o.cells[r.merged.originalColumn]}return r&&r.merged?{startCol:r.column,endCol:r.column+(r.merged.columns?r.merged.columns:0),startRow:r.row,endRow:r.row+(r.merged.rows?r.merged.rows:0)}:{startCol:t,endCol:t,startRow:e,endRow:e}}function Zt(e,t,n,r){return e.cellType===E.MergedDummyCell&&e.merged&&void 0!==e.merged.originalRow&&void 0!==e.merged.originalColumn?(t.mergedStartRow=Math.min(t.mergedStartRow||0,e.merged.originalRow),t.mergedStartCol=Math.min(t.mergedStartCol||0,e.merged.originalColumn)):e.merged&&(e.merged.rows&&(t.endRow=Math.max(t.endRow,n+e.merged.rows)),e.merged.columns&&(t.endCol=Math.max(t.endCol,r+e.merged.columns))),t}function Xt(e,t){if([T.Rows,T.Columns,T.All].includes(e.selectionType))return e;var n=!0,r=!0,o=Gt({},e);o.mergedStartCol=o.startCol,o.mergedStartRow=o.startRow;var i,l,s,a,c=o;c.mergedStartRow>c.endRow&&(c.mergedStartRow=e.endRow,c.endRow=e.startRow,n=!1),c.mergedStartCol>c.endCol&&(c.mergedStartCol=e.endCol,c.endCol=e.startCol,r=!1);var u=0;do{i=c.mergedStartRow,l=c.endRow,s=c.mergedStartCol,a=c.endCol,u=0;for(var h=c.mergedStartRow;h<=c.endRow;h++){var d=t[h];if(d)for(var p=c.mergedStartCol;p<=c.endCol;p++){var f=d.cells[p];f&&(f.cellType!==E.MergedDummyCell&&u++,c=Zt(f,c,h,p))}}}while(i!==c.mergedStartRow||l!==c.endRow||s!==c.mergedStartCol||a!==c.endCol);1===u&&(c.endRow=c.mergedStartRow,c.endCol=c.mergedStartCol),n||(c.mergedStartRow=l,c.endRow=i),r||(c.mergedStartCol=a,c.endCol=s);var g=c;return g.mergedStartCol===e.startCol&&delete g.mergedStartCol,g.mergedStartRow===e.startRow&&delete g.mergedStartRow,g}function qt(e,t,n){(function(e,t){for(var n=[],r=function(r){var o=e[r];if(o){var i=o.cells.reduce(function(e,n){return function(e,t,n){if(!e.merged)return!1;if(e.merged.rows){var r=t,o=e.merged.rows+t;if(r<=n&&o>=n)return!0}return!1}(n,r,t)&&e.push(n),e},[]);n=n.concat(i)}},o=t;o>=0;o--)r(o);return n})(e,n).forEach(function(n){!function(e,t,n){var r,i=e[t.row];null!==(r=t.merged)&&void 0!==r&&r.rows&&i&&(i.cells=o(i.cells),i.cells[t.column]=Gt(Gt({},i.cells[t.column]),{},{merged:Gt(Gt({},i.cells[t.column].merged),{},{heightAfterRowResized:Yt(e,n,t.row,t.row+t.merged.rows)})}))}(e,n,t)})}function Yt(e,t,n,r){for(var o=0,i=n;i<=r;i++){var l=e[i];l&&(o+=l.height+t)}return o}function $t(e,t){var n=Qt(e,t);null!==n&&n.focus({preventScroll:!0})}function Qt(e,t){var n=Kt(t.startRow,t.startCol,e.rows);return Wt(e.id,n.startCol,n.startRow)}var Jt=[ue.B,ue.U,ue.I];function en(e){return e.ctrlKey||e.metaKey}function tn(e,t){t||e.stopPropagation()}function nn(e,t){t||e.preventDefault()}function rn(e){return e[0]}function on(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ln(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}function ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function cn(e){return[v.HeaderRegion,v.DatacellRegion,v.CellChart].includes(e)}function un(e){return[v.HeaderRegion,v.Dimension,v.DimensionMember,v.HeaderCell,v.Attribute].includes(e)}function hn(e){return[v.DatacellRegion,v.DataCell,v.CellChart].includes(e)}function dn(e){return[v.Dimension,v.DimensionMember,v.MultiRegion].includes(e)}function pn(e){return[v.TitleRegion,v.Title,v.Subtitle].includes(e)}function fn(e,t){return cn(e)||function(e,t){var n=dn(e),r=t===v.Dimension,o=e===v.DimensionMember;return n&&!r&&!o}(e,t)}function gn(e,t,n){return vn(e)&&-1===t&&n!==e.endCol}function mn(e,t,n){return yn(e)&&-1===n&&t!==e.endRow}function vn(e){return e.selectionType===T.Columns}function yn(e){return e.selectionType===T.Rows}function bn(e,t,n){if(e.selectionType===T.All)return!0;if(-1===t)return e.startRow>=n&&e.endRow<=n||e.startRow<=n&&e.endRow>=n;if(-1===n)return e.startCol>=t&&e.endCol<=t||e.startCol<=t&&e.endCol>=t;var r=!1,o=!1,i=e.startCol<=t,l=e.startCol>=t,s=e.endCol>=t,a=e.endCol<=t,c=e.startRow<=n,u=e.startRow>=n,h=e.endRow>=n,d=e.endRow<=n;if(e.selectionType===T.Region&&void 0!==e.cornerCol&&void 0!==e.cornerRow){var p=function(e,t){return void 0!==e.cornerRow&&t<=e.cornerRow&&t>=e.startRow}(e,n),f=function(e,t){return void 0!==e.cornerCol&&t<=e.cornerCol&&t>=e.startCol}(e,t);r=i&&s&&p||i&&e.cornerCol>=t&&f,o=c&&h&&f||c&&e.cornerRow>=n&&p}else r=i&&s||l&&a,o=c&&h||u&&d;return r&&o}function Cn(e){return ee(e)?v.DimensionMember:le(e)?v.Row:se(e)?v.Column:ie(e)?v.AllCells:v.DataCell}function wn(e,t,n){if(!t.originalSelectionArea||n!==w.horizontal&&n!==w.vertical)return e;var r,o,i,l,s,a,c,u,h,d,p=Rn(t.originalSelectionArea,n);return n===w.horizontal?(!p&&t.newCol<=t.originalSelectionArea.startCol||p&&t.newCol>=t.originalSelectionArea.startCol?e.selectionArea.startCol=t.newCol:(!p&&t.newCol>=t.originalSelectionArea.endCol||p&&t.newCol<=t.originalSelectionArea.endCol)&&(e.selectionArea.endCol=t.newCol),e.selectionArea.isReverseDraggingHorizontal=Sn(t,n)):n===w.vertical&&(!p&&t.newRow<=t.originalSelectionArea.startRow||p&&t.newRow>=t.originalSelectionArea.startRow?e.selectionArea.startRow=t.newRow:(!p&&t.newRow>=t.originalSelectionArea.endRow||p&&t.newRow<=t.originalSelectionArea.endRow)&&(e.selectionArea.endRow=t.newRow),e.selectionArea.isReverseDraggingVertical=Sn(t,n)),e.selectionArea.hideFirstSelectedCellBackground=(r=e.selectionArea,o=t.originalSelectionArea,i=Rn(o,w.horizontal),l=Rn(o,w.vertical),s=En(o,w.horizontal),a=En(o,w.vertical),c=i&&s&&r.startCol>o.startCol,u=!i&&s&&r.startCol<o.startCol,h=l&&a&&r.startRow>o.startRow,d=!l&&a&&r.startRow<o.startRow,!!(u||c||d||h)),e}function Sn(e,t){if(!e.originalSelectionArea)return!1;var n=Rn(e.originalSelectionArea,w.horizontal)?e.newCol>e.originalSelectionArea.startCol:e.newCol<e.originalSelectionArea.startCol;if(t===w.horizontal)return n;var r=Rn(e.originalSelectionArea,w.vertical)?e.newRow>e.originalSelectionArea.startRow:e.newRow<e.originalSelectionArea.startRow;return t===w.vertical?r:n||r}function Rn(e,t){var n=e.startCol>e.endCol;if(t===w.horizontal)return n;var r=e.startRow>e.endRow;return t===w.vertical?r:n||r}function Tn(e,t){if(!e.originalSelectionArea)return!1;var n=Rn(e.originalSelectionArea,t);return t===w.vertical?n?e.newRow<=e.originalSelectionArea.startRow&&e.newRow>=e.originalSelectionArea.endRow:e.newRow>=e.originalSelectionArea.startRow&&e.newRow<=e.originalSelectionArea.endRow:n?e.newCol<=e.originalSelectionArea.startCol&&e.newCol>=e.originalSelectionArea.endCol:e.newCol>=e.originalSelectionArea.startCol&&e.newCol<=e.originalSelectionArea.endCol}function En(e,t){var n=e.startCol!==e.endCol;if(t===w.horizontal)return n;var r=e.startRow!==e.endRow;return t===w.vertical?r:n||r}function Dn(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,o=rn(e.selectedRegions);t.onSelectedCellChanged&&o?t.onSelectedCellChanged(o.startRow,o.startCol):t.onSelectedCellChanged&&t.onSelectedCellChanged(null,null),t.onSelectedRegionChanged&&t.onSelectedRegionChanged(e.selectedRegions,e.selectionContextType,n,r)}function kn(e){for(var t=[],n=Math.min(e.startCol,e.endCol),r=Math.max(e.startCol,e.endCol),o=n;o<=r;o++)t.push(o);return t}function On(e){for(var t=[],n=Math.min(e.startRow,e.endRow),r=Math.max(e.startRow,e.endRow),o=n;o<=r;o++)t.push(o);return t}function xn(e){var t=v.Widget;if(e.selectedRegions>1)return v.MultiCell;if(1===e.selectedRegions)switch(e.cellType){case E.Value:case E.Input:case E.Unbooked:case E.Threshold:case E.DataLocking:case E.Validation:case E.Chart:t=v.DataCell;break;case E.Custom:case E.Empty:t=v.CustomCell;break;case E.Header:case E.AttributeRowDimHeader:case E.AttributeColDimHeader:case E.MemberSelector:case E.RowDimHeader:case E.ColDimHeader:t=v.HeaderCell;break;case E.Attribute:t=v.Attribute;break;case E.ColDimMember:case E.RowDimMember:case E.AttributeRowDimMember:case E.AttributeColDimMember:t=v.DimensionMember;break;default:t=v.MultiCell}return t}function An(){return{startRow:0,startCol:0,endRow:0,endCol:0,selectionType:T.Box}}function Ln(e,t,n,r){var i=an(an({},e.selection),{},{selectedRegions:[].concat(o(e.selection.selectedRegions),[n])});return r&&(i.selectionContextType=v.MultiRegion),Dn(i,t),an(an({},e),{},{selection:i})}function In(e){var t=e.selectedRegions.length;return t>0?e.selectedRegions[t-1]:An()}function Mn(e){return{startRow:Math.min(e.startRow,e.endRow),startCol:Math.min(e.startCol,e.endCol),endRow:Math.max(e.startRow,e.endRow),endCol:Math.max(e.startCol,e.endCol),selectionType:T.Box}}var Pn={selectionArea:void 0,clearSelection:!1,scrollDirection:void 0,isKeyEvent:!1};function Hn(e,t,n){var r=e.rows[t],o=r&&r.cells[n];if(o&&e.editMode&&o.cellType===E.Chart&&e.cellChartData&&o.cellChart){var i=e.cellChartData[o.cellChart.memberId];return{isKeyEvent:!1,selectionArea:{startCol:i.startCol,endCol:i.endCol,startRow:i.startRow,endRow:i.endRow,selectionType:T.Box,isCellChartSelection:!0,inCellChartContext:o.cellChart.context},context:v.CellChart,singleSelection:!0}}return Pn}function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function zn(e,t){var n={hoverContextType:v.DataCell,doubleOverlay:!1};return void 0!==e.col&&e.col>=0?n={hoverContextType:v.Column,doubleOverlay:!1,column:e.col}:void 0!==e.row&&e.row>=0&&(n={hoverContextType:v.Row,doubleOverlay:!1,row:e.row}),Nn(Nn({},t),{},{hover:n})}function Bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fn(e,t,n){return!(!e||null!==e.closest("#".concat(t.id))||n&&n())&&Wn(e,t.idsToIgnore,"#")&&Wn(e,t.classesToIgnore,".")}function Wn(e,t,n){var r=!0;if(t){var o,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Bn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}(t);try{for(i.s();!(o=i.n()).done;){var l=o.value;r=r&&null===e.closest("".concat(n).concat(l))}}catch(e){i.e(e)}finally{i.f()}}return r}function jn(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!=e&&t!=t)return!0;if(K(e)===K(t)&&Vn(e)&&Vn(t)){if(Un(e)){if(!Un(t))return!1;var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(!jn(e[r],t[r]))return!1;return!0}if(Un(t))return!1;var o,i,l={};for(o in e)if(e.hasOwnProperty(o)){if(Gn(e[o]))continue;if(!jn(e[o],t[o]))return!1;l[o]=!0}for(i in t)if(t.hasOwnProperty(i)){if(Gn(t[i]))continue;if(!l.hasOwnProperty(i)&&void 0!==t[i])return!1}return!0}return!1}function Vn(e){return"object"===K(e)}function Un(e){return"[object Array]"===Object.prototype.toString.apply(e)}function Gn(e){return"function"==typeof e}function Kn(){return(Kn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Zn="topBorder",Xn="bottomBorder",qn="border";var Yn=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"shouldComponentUpdate",value:function(e){return!jn(e.lines,this.props.lines)}},{key:"getLine",value:function(e,t){var n=function(e,t){var n,r=e.padding&&e.padding.left||0,o=e.padding&&e.padding.right||0,i=e.pattern?e.pattern.borderColor:e.color,l=function(e){switch(e){case p.Solid:return"solid";case p.Dashed:return"dashed";case p.Dotted:return"dotted";default:return"none"}}(e.style),s=Number(e.position),a=function(e,t){return[d.Top,d.TopBottom].includes(e)&&t===D.Top?D.Top:null}(s,t),c=function(e,t){return[d.Bottom,d.TopBottom].includes(e)&&t===D.Bottom?D.Bottom:null}(s,t),u={position:"absolute",boxSizing:"border-box",left:"".concat(r,"px"),width:"calc(100% - ".concat(r+o,"px)")};switch(t){case a:u.top="0px",u.borderTop="".concat(e.size,"px ").concat(l," ").concat(e.color);break;case c:u.bottom="0px",u.borderBottom="".concat(e.size,"px ").concat(l," ").concat(e.color);break;default:return}return e.pattern&&(delete u.backgroundColor,delete u.borderTop,delete u.borderBottom,u.border="1px solid ".concat(i),u.height="".concat(e.pattern.width+2,"px"),n=e.pattern.style,[h.solid,h.whiteFill].includes(n)?u.backgroundColor=e.pattern.color:e.pattern.style!==h.transparentFill&&(u.backgroundImage=e.pattern.background)),u}(t,e),r=function(e){return e===D.Bottom?Xn:e===D.Top?Zn:void 0}(e);return n?W.createElement("div",{className:"".concat(qn," ").concat(r),style:n}):null}},{key:"render",value:function(){var e={};this.props.lines.forEach(function(t){if(t.style!==p.None)switch(t.position){case d.Top:e[d.Top]=t;break;case d.Bottom:e[d.Bottom]=t;break;case d.TopBottom:e[d.Top]=t,e[d.Bottom]=t}});var t=e[d.Top],n=e[d.Bottom];return W.createElement(W.Fragment,null,void 0!==t&&this.getLine(D.Top,t),void 0!==n&&this.getLine(D.Bottom,n))}}]),o}(W.Component);var $n=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"render",value:function(){var e=this.props.borderType===D.Top?Zn:Xn;return W.createElement("div",{style:{width:"calc(100% - ".concat(we.BORDER_PADDING,"px)")},className:"".concat("defaultBorderStyle"," ").concat(qn," ").concat(e)})}}]),o}(W.PureComponent);function Qn(e){var t;switch(null==e||null===(t=e.alignment)||void 0===t?void 0:t.vertical){case g.Top:return{verticalAlign:"top",alignItems:"flex-start"};case g.Middle:return{verticalAlign:"middle",alignItems:"center"};case g.Bottom:return{verticalAlign:"bottom",alignItems:"flex-end"};default:return}}function Jn(e){var t;switch(null==e||null===(t=e.alignment)||void 0===t?void 0:t.horizontal){case m.Left:return{textAlign:"left",justifyContent:"flex-start"};case m.Center:return{textAlign:"center",justifyContent:"center"};case m.Right:return{textAlign:"right",justifyContent:"flex-end"};default:return}}function er(e,t){return{paddingLeft:e||Se.CELL_PADDING_LEFT,paddingTop:t||Se.CELL_PADDING_TOP}}function tr(e,t){if(t&&t.wrap)return{whiteSpace:"pre-line",wordWrap:e===E.Comment?"break-word":"normal"}}function nr(e){if(function(e){return!(e.isInHierarchy&&(e.cellType===E.RowDimMember||e.cellType===E.AttributeRowDimMember)||E.Chart===e.cellType)}(e))return Jn(e.style)}function rr(e){return!(J(e)||E.Chart===e.cellType)}function or(e){if(e.styleUpdatedByUser)return rr(e)?Qn(e.style):void 0}function ir(e){return!(!e||e.type===O.NoIcon)}function lr(e,t,n){var r=e.size?e.size:void 0;r&&t&&(r=r*(n===y.Title?t.title||t.alltext||we.FONT_OVERRIDE_SCALE:n===y.Subtitle?t.subtitle||t.alltext||we.FONT_OVERRIDE_SCALE:t.alltext||we.FONT_OVERRIDE_SCALE)/100);var o=void 0===e.bold?void 0:e.bold?"bold":"normal",i=e.weight||o,l=r?Math.round(r*Se.FONTSIZE_TO_LINEHEIGHT_FACTOR):void 0;return{fontSize:r,lineHeight:l?"".concat(l,"px"):void 0,fontWeight:i,color:e.color?e.color:void 0,fill:e.color?e.color:void 0,fontFamily:e.family?e.family:void 0,fontStyle:void 0===e.italic?void 0:e.italic?"italic":"normal",textDecoration:"".concat(e.underline?"underline":""," ").concat(e.strikethrough?"line-through":"")}}function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var cr="dimensionMember",ur="headerCell",hr="rowDimMember",dr="colDimMember";function pr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(cr," ").concat(e?"cellInHierarchy ":"").concat(t)}function fr(e,t){var n=we.FONT_SIZE;e.style&&e.style.font&&e.style.font.size&&(n=lr(e.style.font,t).fontSize);var r=0;return(ir(e.dataLocking)||e.validation||e.style&&e.style.thresholdIconType)&&(r=Se.ICON_HEIGHT),Math.max(r,Number(n))}function gr(e){return e<=Se.CELL_PADDING_RIGHT+Se.CELL_PADDING_LEFT}function mr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",r={overflow:"hidden",paddingTop:0,maxHeight:0};if(e===Re.MIN_HEIGHT)return r;var o="number"==typeof n?n:Number.parseInt(n,10),i=e-o-t;if(i<0){var l=e-o>0;return r.paddingTop=l?o:e,r.maxHeight=l?e-o:0,r}return r.paddingTop=o,r.maxHeight=e,r}function vr(e){var t=e.cell,n=t.formatted,r=t.cellType,o=e.width;return!!oe(r)||""!==n&&o>Se.NO_CONTENT_COLUMN_SIZE}function yr(e){var t;return!(null!==(t=e.style)&&void 0!==t&&t.thresholdFillColor)}function br(e){return ar(ar(ar(ar(ar(ar(ar({},(o={},null!==(n=(t=e.cell).cellIconsLeft)&&void 0!==n&&n.length&&(o.paddingLeft=Se.CELLTEXT_PADDING_HORIZONTAL),null!==(r=t.cellIconsRight)&&void 0!==r&&r.length&&(o.paddingRight=Se.CELLTEXT_PADDING_HORIZONTAL),o)),function(e,t){var n,r=(null===(n=e.style)||void 0===n?void 0:n.font)&&lr(e.style.font,t);return"number"==typeof(null==r?void 0:r.lineHeight)&&(r.lineHeight=De(r.lineHeight)),r}(e.cell,e.fontOverride)),Jn(e.cell.style)),Qn(e.cell.style)),function(e,t){var n;return null!==(n=e.style)&&void 0!==n&&n.wrap?function(e,t){return{maxHeight:"".concat(e,"px"),height:"".concat(e,"px"),whiteSpace:"pre-line",wordWrap:t===E.Comment?"break-word":"normal"}}(t,e.cellType):void 0}(e.cell,e.height)),{flexWrap:"wrap"}),{},{height:De(e.lineHeight)});var t,n,r,o}function Cr(e){var t,n,r=rr(e)?{vertical:null===(t=e.style)||void 0===t||null===(n=t.alignment)||void 0===n?void 0:n.vertical}:void 0;return ar(ar({},e),{},{formatted:"",commentType:void 0,style:ar(ar({},e.style),{},{font:void 0,alignment:r,wrap:void 0})})}var wr=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){var t;return a(this,o),(t=r.call(this,e)).cellValueRef=W.createRef(),t.boundHandleDoubleClick=t.handleDoubleClick.bind(V(t)),t.boundHandleCellMouseDown=t.handleCellMouseDown.bind(V(t)),t.boundHandleCellMouseEnter=t.handleCellMouseEnter.bind(V(t)),t.boundHandleCellMouseUp=t.handleCellMouseUp.bind(V(t)),t.boundHandleCellMouseOver=t.handleCellMouseOver.bind(V(t)),t.boundHandleCellMouseLeave=t.handleCellMouseLeave.bind(V(t)),t.boundHandleShowColOverlay=t.handleShowColOverlay.bind(V(t)),t.boundHandleShowRowOverlay=t.handleShowRowOverlay.bind(V(t)),t.boundHandleColSelection=t.handleColSelection.bind(V(t)),t.boundHandleRowSelection=t.handleRowSelection.bind(V(t)),t.boundHandleContextMenu=t.handleContextMenu.bind(V(t)),t}return u(o,[{key:"shouldComponentUpdate",value:function(e){return!!this.props.children||!(this.props.firstInRow===e.firstInRow&&this.props.firstInCol===e.firstInCol&&this.props.mobile===e.mobile&&this.props.width===e.width&&this.props.height===e.height&&this.props.left===e.left&&this.props.extraClass===e.extraClass&&this.props.showRowColumnHover===e.showRowColumnHover&&jn(e.style,this.props.style)&&jn(e.cell,this.props.cell))}},{key:"componentDidMount",value:function(){var e;null===(e=this.cellValueRef.current)||void 0===e||e.setAttribute("editable","".concat(this.props.cell.editable&&!this.props.cell.locked))}},{key:"componentDidUpdate",value:function(){var e;null===(e=this.cellValueRef.current)||void 0===e||e.setAttribute("editable","".concat(this.props.cell.editable&&!this.props.cell.locked))}},{key:"handleDoubleClick",value:function(e){var t=e.target,n={col:this.props.cell.column,row:this.props.cell.row,target:t};this.props.handler.onCellEdit(n,!1)}},{key:"handleCellMouseDown",value:function(e){var t={col:this.props.cell.column,row:this.props.cell.row,event:e.nativeEvent,cellType:this.props.cell.cellType,context:this.props.cell.context,target:e.target,selectedCell:Ot(this.props.cell.row,this.props.cell.column)};this.props.handler.onCellMouseDown(t)}},{key:"handleCellMouseEnter",value:function(e){var t={col:this.props.cell.column,row:this.props.cell.row,event:e.nativeEvent,cellType:this.props.cell.cellType,context:this.props.cell.context};this.props.handler.onCellMouseEnter(t)}},{key:"handleCellMouseUp",value:function(e){var t={col:this.props.cell.column,row:this.props.cell.row,event:e.nativeEvent,cellType:this.props.cell.cellType,context:this.props.cell.context};this.props.handler.onCellMouseUp(t)}},{key:"handleCellMouseOver",value:function(e){var t=e.target.closest(".tableCell"),n={col:this.props.cell.column,row:this.props.cell.row,target:t,boundingClientRect:null==t?void 0:t.getBoundingClientRect(),event:e.nativeEvent,getParameters:function(){return this},hoveredCell:Ot(this.props.cell.row,this.props.cell.column)};this.props.handler.onCellMouseOver(n)}},{key:"handleCellMouseLeave",value:function(e){this.props.handler.onCellMouseLeave&&this.props.handler.onCellMouseLeave(e),this.props.handler.onHideOverlay()}},{key:"handleContextMenu",value:function(e){this.props.handler.onContextMenu({row:this.props.cell.row,col:this.props.cell.column,targetDescription:Ot(this.props.cell.row,this.props.cell.column),event:e.nativeEvent,isTitle:!1})}},{key:"handleShowRowOverlay",value:function(e){var t=this.createRowOverlayEvent(e);this.props.handler.onShowRowColOverlay(t)}},{key:"handleShowColOverlay",value:function(e){var t=this.createColOverlayEvent(e);this.props.handler.onShowRowColOverlay(t)}},{key:"handleColSelection",value:function(e){var t=this.createColOverlayEvent(e);this.props.handler.onOverlayClick(t)}},{key:"handleRowSelection",value:function(e){var t=this.createRowOverlayEvent(e);this.props.handler.onOverlayClick(t)}},{key:"createRowOverlayEvent",value:function(e){return{row:function(e,t,n){if(void 0===t)return-1;if(!e)return t;for(var r=t,o=0,i=0;i<=e.length;i++)if(r=t+i,(o+=e[i])>=n)return r;return r}(this.props.mergeCellRowHeights,this.props.cell.row,e.nativeEvent.offsetY),event:e.nativeEvent}}},{key:"createColOverlayEvent",value:function(e){return{col:function(e,t,n){if(void 0===t)return-1;if(!e)return t;for(var r=t,o=0,i=0;i<=e.length;i++)if(r=t+i,(o+=e[i])>=n)return r;return r}(this.props.mergeCellColumnWidths,this.props.cell.column,e.nativeEvent.offsetX),event:e.nativeEvent}}},{key:"render",value:function(){var e,t,n,r,o=this.props.style||{};o.width=this.props.width,o.height=this.props.height,o.left=this.props.left;var i=!this.props.cell.merged&&this.boundHandleShowRowOverlay||void 0,l=this.props.cell.merged&&this.boundHandleShowRowOverlay||void 0,s=!this.props.cell.merged&&this.boundHandleShowColOverlay||void 0,a=this.props.cell.merged&&this.boundHandleShowColOverlay||void 0,c=this.props.showRowColumnHover&&!this.props.mobile,u=this.props.cell.defaultTooltipText||this.props.cell.formatted,h=null!==(e=this.props.cell.merged)&&void 0!==e&&e.rows?(null===(t=this.props.cell.merged)||void 0===t?void 0:t.rows)+1:void 0,d=null!==(n=this.props.cell.merged)&&void 0!==n&&n.columns?(null===(r=this.props.cell.merged)||void 0===r?void 0:r.columns)+1:void 0;return W.createElement("div",{"data-tablerow":this.props.cell.row,"data-tablecol":this.props.cell.column,onDoubleClick:this.boundHandleDoubleClick,onMouseDown:this.boundHandleCellMouseDown,onMouseEnter:this.boundHandleCellMouseEnter,onMouseUp:this.boundHandleCellMouseUp,onMouseMove:this.boundHandleCellMouseOver,onMouseLeave:this.boundHandleCellMouseLeave,onContextMenu:this.boundHandleContextMenu,className:"".concat(Se.CELL_CLASSNAME," cell").concat(this.props.cell.id," ").concat(this.props.extraClass),style:o,ref:this.cellValueRef,title:u,tabIndex:-1,role:this.props.ariaRole,"aria-label":this.props.ariaLabel,"aria-describedby":this.props.ariaDescribedBy,"aria-colindex":this.props.cell.column+1,"aria-rowindex":this.props.cell.row+1,"aria-expanded":this.props.ariaExpanded,"aria-rowspan":h,"aria-colspan":d},this.props.children,c&&this.props.firstInCol&&W.createElement("div",{className:"colSelection",onMouseOver:s,onMouseMove:a,onMouseOut:this.props.handler.onHideOverlay,onClick:this.boundHandleColSelection}),c&&this.props.firstInRow&&W.createElement("div",{className:"rowSelection",onMouseOver:i,onMouseMove:l,onMouseOut:this.props.handler.onHideOverlay,onClick:this.boundHandleRowSelection}))}}]),o}(W.Component);var Sr=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){var t;return a(this,o),(t=r.call(this,e)).boundOnClickHandler=t.onClickHandler.bind(V(t)),t}return u(o,[{key:"onClickHandler",value:function(e){var t,n;null===(t=(n=this.props).onCommentIconClicked)||void 0===t||t.call(n,{row:this.props.row,col:this.props.column})}},{key:"render",value:function(){var e;return W.createElement("span",{className:"icon ".concat(this.props.commentType===R.Self?"comment":"childComment"),title:null!==(e=this.props.commentTooltip)&&void 0!==e?e:this.props.formattedCellValue,onClick:this.boundOnClickHandler})}}]),o}(W.PureComponent);var Rr=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"render",value:function(){return W.createElement("a",{id:"cellHyperlink".concat(this.props.linkId),className:"tableCellHyperlink",title:this.props.linkText},this.props.linkText)}}]),o}(W.PureComponent);function Tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Dr=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){var t;return a(this,o),(t=r.call(this,e)).boundHandleDoubleClick=t.handleDoubleClick.bind(V(t)),t.boundHandleCellMouseDown=t.handleCellMouseDown.bind(V(t)),t.boundHandleCellMouseEnter=t.handleCellMouseEnter.bind(V(t)),t}return u(o,[{key:"shouldComponentUpdate",value:function(e){return!!this.props.children||!(this.props.showGrid===e.showGrid&&this.props.firstInRow===e.firstInRow&&this.props.firstInCol===e.firstInCol&&this.props.extraClass===e.extraClass&&this.props.mobile===e.mobile&&this.props.lineHeight===e.lineHeight&&this.props.width===e.width&&this.props.height===e.height&&this.props.left===e.left&&this.props.showRowColumnHover===e.showRowColumnHover&&jn(e.cell,this.props.cell)&&jn(e.fontOverride,this.props.fontOverride)&&jn(e.featureToggles,this.props.featureToggles))}},{key:"handleDoubleClick",value:function(e){oe(this.props.cell.cellType)||this.props.handler.onCellEdit(e,!1)}},{key:"handleCellMouseDown",value:function(e){var t=Er(Er({},e),{},{chartDimension:this.props.cell.cellChart&&this.props.cell.cellChart.memberId,chartContext:this.props.cell.cellChart&&this.props.cell.cellChart.context});this.props.handler.onCellMouseDown(t)}},{key:"handleCellMouseEnter",value:function(e){var t=Er(Er({},e),{},{chartDimension:this.props.cell.cellChart&&this.props.cell.cellChart.memberId,chartContext:this.props.cell.cellChart&&this.props.cell.cellChart.context});this.props.handler.onCellMouseEnter(t)}},{key:"getDefaultTemplateBorder",value:function(e){var t=this.props.cell,n=t.id,r=t.cellType,o=t.category,i="cell_".concat(n,"_").concat(e,"Line");if(e===D.Top&&(r===E.RowDimHeader||r===E.AttributeRowDimHeader))return W.createElement($n,{key:i,borderType:D.Top});var l=!ne(r)&&!te(r);return e===D.Bottom&&(l||o)?W.createElement($n,{key:i,borderType:D.Bottom}):null}},{key:"getCellStyle",value:function(){var e={},t=this.props.cell.style;if(t){var n=function(e){var t,n,r;if(!e.reference)return null!==(t=null===(n=e.style)||void 0===n?void 0:n.thresholdFillColor)&&void 0!==t?t:null===(r=e.style)||void 0===r?void 0:r.fillColor}(this.props.cell);e=Er(Er({},t.font&&lr(t.font,this.props.fontOverride)),{},{backgroundColor:n},or(this.props.cell))}return!this.props.cell.isInHierarchy&&this.props.cell.row>=0&&this.props.cell.column>=0&&(e=Er(Er(Er({},e),nr(this.props.cell)),tr(this.props.cell.cellType,this.props.cell.style))),e}},{key:"renderValue",value:function(){return this.props.cell.showHyperlink?this.renderHyperlink():this.props.cell.formatted}},{key:"renderIcons",value:function(){var e=this.renderDataLockingIcon(),t=this.renderThreshold(),n=this.renderValidationWarningIcon(),r=this.renderAIGeneratedCommentIcon();return e||t||n||r?W.createElement(W.Fragment,null,e,n,r,t):null}},{key:"renderNonHierarchyCellValue",value:function(){var e,t=fr(this.props.cell,this.props.fontOverride),n=function(e,t){return e<t}(this.props.lineHeight,t)||gr(this.props.width),r=Er(Er({},mr(this.props.lineHeight,t)),nr(this.props.cell));return n||null!==(e=this.props.cell.style)&&void 0!==e&&e.wrap?W.createElement("div",{className:"cutOffContent showEllipsis",style:r,key:"nonHierarchyCellValue"},this.renderIconsAndValue()):this.renderIconsAndValue()}},{key:"renderIconsAndValue",value:function(){var e=this.renderIcons();return W.createElement(W.Fragment,null,e,W.createElement("span",{className:"cellValue showEllipsis textValue"},this.renderValue()))}},{key:"renderHyperlink",value:function(){return W.createElement(Rr,{linkId:this.props.cell.id,linkText:this.props.cell.formatted})}},{key:"renderThreshold",value:function(){return this.props.cell.cellType!==E.Chart&&this.props.cell.style&&this.props.cell.style.thresholdIconType?W.createElement("span",{className:"icon nextToCellValue thresholdIcon ".concat(this.props.cell.style.thresholdIconType),style:{color:this.props.cell.style.thresholdColor?this.props.cell.style.thresholdColor:void 0}}):null}},{key:"renderDataLockingIcon",value:function(){return this.props.cell.cellType!==E.Chart&&this.props.cell.dataLocking&&this.props.cell.dataLocking.type!==O.NoIcon?W.createElement("span",{className:"icon nextToCellValue dataLocking ".concat(this.props.cell.dataLocking.type),title:"".concat(this.props.cell.dataLocking.tooltip)}):null}},{key:"renderValidationWarningIcon",value:function(){return this.props.cell.cellType!==E.Chart&&this.props.cell.validation?W.createElement("span",{className:"icon nextToCellValue validationWarning ".concat(this.props.cell.validation.type),title:"".concat(this.props.cell.validation.tooltip)}):null}},{key:"renderAIGeneratedCommentIcon",value:function(){return this.props.cell.cellType===E.Comment&&this.props.cell.aiGeneratedComment?W.createElement("span",{className:"icon nextToCellValue aiGenerated",title:"".concat(this.props.cell.aiGeneratedComment.tooltip)}):null}},{key:"renderLines",value:function(){var e;return this.props.cell.styleUpdatedByUser?null!==(e=this.props.cell.style)&&void 0!==e&&e.lines?W.createElement(Yn,{lines:this.props.cell.style.lines}):null:W.createElement(W.Fragment,null,this.getDefaultTemplateBorder(D.Top),this.getDefaultTemplateBorder(D.Bottom))}},{key:"renderChildren",value:function(){return this.props.children}},{key:"render",value:function(){var e,t,n,r,o=vr(this.props),i=this.props.cell,l=i.column,s=i.row,a=i.styleUpdatedByUser?this.getCellStyle():{},c=Er(Er({},this.props.handler),{},{onCellEdit:this.boundHandleDoubleClick,onCellMouseDown:this.boundHandleCellMouseDown,onCellMouseEnter:this.boundHandleCellMouseEnter}),u=function(e){var t;switch(e){case E.ColDimHeader:case E.RowDimMember:case E.EmptyAxisRowHeader:case E.AttributeRowDimMember:case E.AttributeColDimHeader:t="rowheader";break;case E.RowDimHeader:case E.ColDimMember:case E.EmptyAxisColumnHeader:case E.AttributeColDimMember:case E.AttributeRowDimHeader:t="columnheader";break;default:t="gridcell"}return t}(this.props.cell.cellType);return W.createElement(wr,Kn({},this.props,{handler:c,style:a,extraClass:"".concat((t={cell:this.props.cell,width:this.props.width,extraClass:this.props.extraClass},r="tableDivCell",r+=" ".concat(function(e){var t="";if(oe(e)){switch(t+=" coordinateHeader",e){case E.ColumnCoordinate:case E.ColumnCoordinateSelectedDesignMode:case E.ColumnCoordinateSelectedViewMode:t+=" ".concat(Se.COORDINATE_COL_HEADER_CLASSNAME);break;case E.RowCoordinate:case E.RowCoordinateSelectedDesignMode:case E.RowCoordinateSelectedViewMode:t+=" ".concat(Se.COORDINATE_ROW_HEADER_CLASSNAME);break;case E.CoordinateCorner:t+=" coordinateCorner icon selectAllCellsIcon"}switch(e){case E.ColumnCoordinateSelectedDesignMode:case E.RowCoordinateSelectedDesignMode:t+=" coordinateHeaderSelectedDesign";break;case E.ColumnCoordinateSelectedViewMode:case E.RowCoordinateSelectedViewMode:t+=" coordinateHeaderSelectedView"}}return re(e)&&(t+=" dataCell"),e===E.Comment&&(t+=" commentCell"),e===E.Chart&&(t+=" chartCell"),t}(t.cell.cellType)),t.cell.locked&&(r+=" locked"),!t.cell.editable&&(re(t.cell.cellType)&&t.cell.cellType!==E.Comment||t.cell.cellType===E.Custom)&&(r+=" readOnly"),t.cell.referenceToLockedCell&&(r+=" referenceToLockedCell"),t.cell.reference&&(r+=" referencedCell"),t.cell.modified&&yr(t.cell)&&(r+=" modified"),t.cell.modifiedMDE&&yr(t.cell)&&(r+=" modifiedMDE"),t.cell.category&&(r+=" Category".concat(t.cell.category)),t.cell.isInATotalsContext&&(r+=" totals"),t.extraClass&&(r+=" ".concat(t.extraClass)),null!==(n=t.cell.style)&&void 0!==n&&n.wrap&&(r+=" cellIsWrapped"),gr(t.width)&&(r+=" noHorizontalPadding"),r)),ariaExpanded:this.props.ariaExpanded,ariaRole:u,ariaLabel:this.props.ariaLabel,ariaDescribedBy:this.props.ariaDescribedBy}),this.renderLines(),void 0!==this.props.cell.commentType&&void 0!==(e=this.props.cell.commentType)&&e!==R.None&&W.createElement(Sr,{commentType:this.props.cell.commentType,row:s,column:l,commentTooltip:this.props.cell.commentTooltip,formattedCellValue:this.props.cell.formatted,onCommentIconClicked:this.props.handler.onCommentIconClicked}),this.props.width>Se.NO_CONTENT_COLUMN_SIZE&&this.renderChildren(),o&&!this.props.cell.isInHierarchy&&this.renderNonHierarchyCellValue())}}]),o}(W.Component);function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var xr=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"renderHierarchyCellValue",value:function(){var e,t,n,r;if(this.props.cell.style&&this.props.cell.style.wrap)return this.renderWrappedHierarchyCellValue();var o=fr(this.props.cell,this.props.fontOverride),i=(null===(e=this.props.cell.style)||void 0===e?void 0:e.font)&&lr(this.props.cell.style.font,this.props.fontOverride),l=void 0!==(null===(t=this.props.hierarchyStyle)||void 0===t?void 0:t.paddingLeft)?null===(n=this.props.hierarchyStyle)||void 0===n?void 0:n.paddingLeft:Se.CELL_PADDING_LEFT,s=Or(Or(Or(Or(Or({},this.props.hierarchyStyle),nr(this.props.cell)),mr(this.props.lineHeight,o,null===(r=this.props.hierarchyStyle)||void 0===r?void 0:r.paddingTop)),i),{},{width:this.props.width-Number(l)-Se.CELL_PADDING_RIGHT});return W.createElement("div",{className:"hierarchyCellText textOverflow cutOffContent showEllipsis",title:this.props.textValue,style:s,key:"hierarchyCellValue"},this.renderHierarchyValue())}},{key:"renderWrappedHierarchyCellValue",value:function(){var e,t,n,r,o=fr(this.props.cell,this.props.fontOverride),i=Or({},mr(this.props.lineHeight,o,null===(e=this.props.hierarchyStyle)||void 0===e?void 0:e.paddingTop)),l=De(Math.max(0,this.props.lineHeight-Number(i.paddingTop))),s=void 0!==(null===(t=this.props.hierarchyStyle)||void 0===t?void 0:t.paddingLeft)?null===(n=this.props.hierarchyStyle)||void 0===n?void 0:n.paddingLeft:Se.CELL_PADDING_LEFT,a=(this.props.showGrid?Se.GRID_BORDER_SIZE:0)+(this.props.showGrid&&this.props.firstInRow?Se.GRID_BORDER_SIZE:0),c=this.props.width-Number(s)-Se.CELL_PADDING_RIGHT-a,u=(null===(r=this.props.cell.style)||void 0===r?void 0:r.font)&&lr(this.props.cell.style.font,this.props.fontOverride),h=Or(Or(Or(Or({paddingLeft:s},this.props.hierarchyStyle),i),nr(this.props.cell)),{},{height:l,maxWidth:c,width:c},u),d={display:"table",height:l,maxWidth:c,width:c},p=Or(Or(Or({display:"table-cell"},or(this.props.cell)),tr(this.props.cell.cellType,this.props.cell.style)),{},{maxWidth:c,width:c});return W.createElement("div",{className:"hierarchyCellOuterDiv",style:h},W.createElement("div",{className:"hierarchyCellInnerDiv",style:d},W.createElement("div",{className:"textOverflow",title:this.props.textValue,style:p},this.renderHierarchyValue())))}},{key:"renderHierarchyValue",value:function(){var e=this.props.cell.cellType===E.RowDimMember?"div":"span";return W.createElement(W.Fragment,null,this.props.children,this.props.cell.showHyperlink?W.createElement(Rr,{linkId:this.props.cell.id,linkText:this.props.textValue}):W.createElement(e,{className:"showEllipsis"},this.props.textValue))}},{key:"render",value:function(){return this.renderHierarchyCellValue()}}]),o}(W.PureComponent);var Ar=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"render",value:function(){return W.createElement("div",{id:he.NEW_LINE_WRAPPER})}}]),o}(W.PureComponent);function Lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lr(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Mr=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"getExtraClass",value:function(e){return"".concat("newLine"," ").concat(this.getClassesBasedOnCellType()," ").concat(pr(this.props.cell.isInHierarchy,this.props.extraClass)).concat(e?" editing":"")}},{key:"getClassesBasedOnCellType",value:function(){var e=[ur];return this.props.cell.cellType===E.NewLineOnRow&&e.push(hr),this.props.cell.cellType===E.NewLineOnColumn&&e.push(dr),e.join(" ")}},{key:"isActiveMemberCell",value:function(){return!(!this.props.activeNewLineMemberCell||this.props.activeNewLineMemberCell.row!==this.props.cell.row||this.props.activeNewLineMemberCell.col!==this.props.cell.column)}},{key:"render",value:function(){var e=this.isActiveMemberCell(),t=vr(this.props),n=Bt(this.props.cell);return W.createElement(Dr,Kn({},this.props,{cell:Ir(Ir({},this.props.cell),{},{formatted:n}),extraClass:this.getExtraClass(e)}),e&&W.createElement(Ar,null),this.props.cell.isInHierarchy&&t&&W.createElement(xr,{textValue:n,cell:this.props.cell,lineHeight:this.props.lineHeight,showGrid:this.props.showGrid,fontOverride:this.props.fontOverride,hierarchyStyle:er(this.props.cell.hierarchyPaddingLeft,this.props.cell.hierarchyPaddingTop),firstInRow:this.props.firstInRow,width:this.props.width}))}}]),o}(W.Component);function Pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _r(e,t,n){return{widthBarFilled:"".concat(100-2*Se.BAR_CHART_VERTICAL_PADDING_PERCENT,"%"),widthLine:"100%",heightLine:Se.AXIS_SIZE_IN_CELL_CHARTS,xBar:"".concat(Se.BAR_CHART_VERTICAL_PADDING_PERCENT,"%"),xLine:0,xPin:n/2-Se.VARIANCE_PIN_SIZE/2,xText:"50%",textAnchor:"start",value:t,plain:e}}function Nr(e,t,n){return{heightBarFilled:"".concat(100-2*Se.BAR_CHART_HORIZONTAL_PADDING_PERCENT,"%"),widthLine:Se.AXIS_SIZE_IN_CELL_CHARTS,heightLine:"100%",yBar:"".concat(Se.BAR_CHART_HORIZONTAL_PADDING_PERCENT,"%"),yLine:0,yPin:n/2-Se.VARIANCE_PIN_SIZE/2,yText:"50%",textAnchor:"start",value:t,plain:e}}function zr(e){return e?e+Se.IN_CELL_CHART_TEXT_PADDING:0}function Br(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e-Se.AXIS_SIZE_IN_CELL_CHARTS-t}function Fr(e,t){return Math.max(e-t,0)}function Wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Vr(e){return e===S.Horizontal?Se.CELL_CHART_TEXT_SHIFT_HORIZONTAL_BAR:Se.CELL_CHART_TEXT_SHIFT_VERTICAL_BAR}var Ur=Se.AXIS_SIZE_IN_CELL_CHARTS/2;function Gr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=Kr(e),l=i.chartMinValue,s=i.chartMaxValue,a=i.isNegativeOnly,c=i.isPositiveOnly,u=c?Ur:0,h=a?Ur:0,d=o/2,p=t-u-h-o,f=zr(r),g=a||c?1:2,m=Fr(p,f*g),v=0===m,y=v?p:m,b=v?0:f,C=Math.abs(l)+Math.abs(s)||1,w=y/C,S=eo(w*Math.abs(n)),R=a?0:b,T=eo(w*s)+R+d+h,E=Jr(T-Ur),D=n<0?Yr(T):qr(T,S),k=n<0||0===n&&a?$r(T,S,d):Qr(T,S,b,d),O=v?"0px":k,x=n<0?Xr(T,S,v?0:d):Zr(T,S,d);return{xBar:to(Se.BAR_CHART_VERTICAL_PADDING_PERCENT),yBar:De(D),heightBarFilled:Jr(S-Ur),xLine:"0px",yLine:De(E),heightLine:Se.AXIS_SIZE_IN_CELL_CHARTS,xText:"50%",yText:O,hideValue:v,textAnchor:"middle",xPin:"".concat(e.columnWidth/2-Se.VARIANCE_PIN_SIZE/2,"px"),yPin:x}}function Kr(e){var t=e.minValue,n=e.maxValue,r={chartMinValue:t,chartMaxValue:n,isPositiveOnly:0===t,isNegativeOnly:0!==t&&0===n};return t<0&&n<0?(r.chartMaxValue=0,r.chartMinValue=t,r.isNegativeOnly=!0):t>0&&n>0&&(r.chartMaxValue=n,r.chartMinValue=0,r.isPositiveOnly=!0),r}function Zr(e,t,n){return De(e-t-n)}function Xr(e,t,n){return De(e+t-n)}function qr(e,t){return e-t}function Yr(e){return e+Ur}function $r(e,t,n){return De(e+t+Se.IN_CELL_CHART_TEXT_PADDING+n)}function Qr(e,t,n,r){return De(Jr(e-Jr(t-Ur)-Ur-n-r))}function Jr(e){return Math.max(e,0)}function eo(e){return Math.floor(e)}function to(e){return"".concat(e,"%")}var no=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){return a(this,o),r.call(this,e)}return u(o,[{key:"shouldComponentUpdate",value:function(e){return!(this.props.height===e.height&&this.props.width===e.width&&this.props.color===e.color&&this.props.chartClassName===e.chartClassName&&jn(e.chartCell,this.props.chartCell)&&jn(e.values,this.props.values)&&jn(e.style,this.props.style))}},{key:"render",value:function(){return this.props.values.value?W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:this.props.width,height:this.props.height,shapeRendering:"crispedges",style:{verticalAlign:"middle"}},W.createElement("rect",{className:this.props.chartClassName,width:this.props.values.widthBarFilled,height:this.props.values.heightBarFilled,fill:this.props.color,x:this.props.values.xBar,y:this.props.values.yBar}),W.createElement("rect",{className:fe.BAR_CHART_AXIS,width:this.props.values.widthLine,height:this.props.values.heightLine,x:this.props.values.xLine,y:this.props.values.yLine,fill:this.props.chartCell.lineColor}),W.createElement("text",Kn({},this.props.style,{className:"barChartText",y:this.props.values.yText,x:this.props.values.xText,textAnchor:this.props.values.textAnchor,dy:Vr(this.props.chartCell.orientation)}),this.props.chartCell.showValue?this.props.values.value:"")):null}}]),o}(W.Component);var ro=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"shouldComponentUpdate",value:function(e){return!(this.props.height===e.height&&this.props.width===e.width&&this.props.color===e.color&&this.props.chartClassName===e.chartClassName&&jn(e.style,this.props.style)&&jn(e.chartCell,this.props.chartCell)&&jn(e.values,this.props.values))}},{key:"renderBar",value:function(){return this.props.chartCell.orientation===S.Vertical?W.createElement("rect",{className:this.props.chartClassName,width:Se.VARIANCE_PIN_BAR_HEIGHT,height:this.props.values.heightBarFilled,fill:this.props.color,x:this.props.width/2-Se.VARIANCE_PIN_BAR_HEIGHT/2,y:this.props.values.yBar}):W.createElement("rect",{className:this.props.chartClassName,width:this.props.values.widthBarFilled,height:Se.VARIANCE_PIN_BAR_HEIGHT,fill:this.props.color,x:this.props.values.xBar,y:this.props.height/2-Se.VARIANCE_PIN_BAR_HEIGHT/2})}},{key:"render",value:function(){return this.props.values.value?W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:this.props.width,height:this.props.height,shapeRendering:"crispedges",style:{verticalAlign:"middle"}},W.createElement("rect",{width:Se.VARIANCE_PIN_SIZE,height:Se.VARIANCE_PIN_SIZE,x:this.props.values.xPin,y:this.props.values.yPin,fill:"black"}),this.renderBar(),W.createElement("rect",{width:this.props.values.widthLine,height:this.props.values.heightLine,x:this.props.values.xLine,y:this.props.values.yLine,fill:this.props.chartCell.lineColor}),W.createElement("text",Kn({},this.props.style,{y:this.props.values.yText,x:this.props.values.xText,textAnchor:this.props.values.textAnchor,dy:Vr(this.props.chartCell.orientation)}),this.props.chartCell.showValue?this.props.values.value:"")):null}}]),o}(W.Component);function oo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function io(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oo(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var lo=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){return a(this,o),r.call(this,e)}return u(o,[{key:"shouldComponentUpdate",value:function(e){return!(this.props.showGrid===e.showGrid&&this.props.firstInRow===e.firstInRow&&this.props.firstInCol===e.firstInCol&&this.props.extraClass===e.extraClass&&this.props.minValue===e.minValue&&this.props.maxValue===e.maxValue&&this.props.maxTextWidth===e.maxTextWidth&&this.props.maxTextHeight===e.maxTextHeight&&this.props.barHeight===e.barHeight&&this.props.columnWidth===e.columnWidth&&this.props.mobile===e.mobile&&this.props.lineHeight===e.lineHeight&&this.props.width===e.width&&this.props.height===e.height&&this.props.left===e.left&&this.props.showRowColumnHover===e.showRowColumnHover&&jn(e.cell,this.props.cell)&&jn(e.fontOverride,this.props.fontOverride)&&jn(e.columns,this.props.columns)&&jn(e.featureToggles,this.props.featureToggles))}},{key:"renderChartByType",value:function(e){var t,n,r,o,i,l=this.props.cell.cellChart;if(l&&e){var s,a=l.barColor;this.props.cell.style&&this.props.cell.style.thresholdColor&&(a=this.props.cell.style.thresholdColor);var c=!!l.showValue&&!e.hideValue,u=(t=l.chartType,n=e.plain,r=null===(s=this.props.featureToggles)||void 0===s?void 0:s.uqmVarianceConfigureColor,o=t===L.VarianceBar||t===L.Bar?fe.BAR_CHART_BAR:fe.VARIANCEPIN_CHART_BAR,i=t===L.VarianceBar||t===L.VariancePin,r&&i&&(o+=" ".concat(n<0?fe.VARIANCE_CHART_NEGATIVE:fe.VARIANCE_CHART_POSITIVE)),o),h={chartCell:io(io({},l),{},{showValue:c}),values:e,style:c?this.getTextStyle():void 0,height:this.props.barHeight,width:this.props.columnWidth,color:a,chartClassName:u};switch(l.chartType){case L.VariancePin:return W.createElement(ro,h);case L.VarianceBar:case L.Bar:default:return W.createElement(no,h)}}return null}},{key:"render",value:function(){return W.createElement(Dr,Kn({},this.props,{cell:io(io({},this.props.cell),{},{formatted:"",defaultTooltipText:this.props.cell.formatted})}),this.props.barHeight>0&&this.props.columnWidth>0&&this.renderChartByType(this.getChartCellValues()))}},{key:"getChartCellValues",value:function(){var e=Number(this.props.cell.plain);if(this.props.cell.cellChart&&!isNaN(e)){var t=this.props.cell.cellChart.chartType===L.VariancePin?Se.VARIANCE_PIN_SIZE/2:0,n=this.props.cell.cellChart.orientation===S.Horizontal?this.props.columnWidth:this.props.barHeight,r=0;return this.props.cell.cellChart.showValue&&(r=this.props.cell.cellChart.orientation===S.Horizontal?this.props.maxTextWidth:this.props.maxTextHeight),this.props.minValue>=0?this.calculatePositiveOnlyValues(this.props.cell.cellChart,e,t,n,r):this.props.maxValue>0?function(e,t,n,r,o,i){switch(t.orientation){case S.Horizontal:var l,s,a,c,u=Br(o,r),h=zr(i),d=Fr(u,2*h),p=0===d,f=p?2:h,g=(p?u:d)/(Math.abs(e.minValue)+Math.abs(e.maxValue)),m=g*Math.abs(n),v=g*Math.abs(e.minValue)+f-Se.AXIS_SIZE_IN_CELL_CHARTS/2;return n<0?(s=(l=v-m)-Se.VARIANCE_PIN_SIZE/2,a=l-r-Se.IN_CELL_CHART_TEXT_PADDING,c="end"):(s=(l=v+Se.AXIS_SIZE_IN_CELL_CHARTS)+m-Se.VARIANCE_PIN_SIZE/2,a=l+m+r+Se.IN_CELL_CHART_TEXT_PADDING,c="start"),jr(jr({},Nr(n,e.cell.formatted,e.barHeight)),{},{widthBarFilled:m,xBar:l,xText:a,xLine:v,xPin:s,textAnchor:c,hideValue:p});case S.Vertical:default:return jr(jr({},_r(n,e.cell.formatted,e.columnWidth)),Gr(e,o,n,i,r))}}(this.props,this.props.cell.cellChart,e,t,n,r):this.calculateNegativeOnlyValues(this.props.cell.cellChart,e,t,n,r)}}},{key:"calculatePositiveOnlyValues",value:function(e,t,n,r,o){switch(e.orientation){case S.Horizontal:var i=Br(r,n),l=Fr(i,zr(o)),s=0===l,a=s?i:l,c=Math.max(0!==this.props.maxValue?a*t/this.props.maxValue:0,0);return io(io({},Nr(t,this.props.cell.formatted,this.props.barHeight)),{},{widthBarFilled:c,xBar:Se.AXIS_SIZE_IN_CELL_CHARTS,xText:Se.AXIS_SIZE_IN_CELL_CHARTS+c+n+Se.IN_CELL_CHART_TEXT_PADDING,xLine:0,xPin:Se.AXIS_SIZE_IN_CELL_CHARTS+c-Se.VARIANCE_PIN_SIZE/2,hideValue:s});case S.Vertical:default:return io(io({},_r(t,this.props.cell.formatted,this.props.columnWidth)),Gr(this.props,r,t,o,n))}}},{key:"calculateNegativeOnlyValues",value:function(e,t,n,r,o){switch(e.orientation){case S.Horizontal:var i=Br(r,n),l=Fr(i,zr(o)),s=0===l,a=(s?i:l)*t/this.props.minValue;return io(io({},Nr(t,this.props.cell.formatted,this.props.barHeight)),{},{widthBarFilled:a,xBar:this.props.columnWidth-Se.AXIS_SIZE_IN_CELL_CHARTS-a,xText:this.props.columnWidth-Se.AXIS_SIZE_IN_CELL_CHARTS-a-n-Se.IN_CELL_CHART_TEXT_PADDING,xLine:this.props.columnWidth-Se.AXIS_SIZE_IN_CELL_CHARTS,xPin:this.props.columnWidth-Se.AXIS_SIZE_IN_CELL_CHARTS-a-Se.VARIANCE_PIN_SIZE/2,textAnchor:"end",hideValue:s});case S.Vertical:default:return io(io({},_r(t,this.props.cell.formatted,this.props.columnWidth)),Gr(this.props,r,t,o,n))}}},{key:"getTextStyle",value:function(){if(this.props.cell.style&&this.props.cell.style.font){var e=lr(this.props.cell.style.font,this.props.fontOverride);return{fontFamily:e.fontFamily,fontSize:e.fontSize,fill:e.color,fontWeight:e.fontWeight,fontStyle:e.fontStyle,textDecoration:e.textDecoration}}return{fontFamily:we.FONT_FAMILY,fontSize:we.FONT_SIZE,fill:we.FONT_COLOR,fontWeight:void 0,fontStyle:void 0,textDecoration:void 0}}}]),o}(W.Component);function so(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ao(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function co(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ao(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ao(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function uo(e){return q(e)?Ee.DROP_AREA_COLUMNS:Ee.DROP_AREA_ROWS}function ho(e){e.classList.add(Ee.DROP_AREA_FOCUS_CLASS)}function po(e){e.classList.remove(Ee.DROP_AREA_FOCUS_CLASS)}function fo(e){e.classList.remove(Ee.DROP_ZONE_FOCUS_CLASS)}function go(e){e.classList.add(Ee.DROP_ZONE_CELL_FOCUS_CLASS)}function mo(e){e.classList.remove(Ee.DROP_ZONE_CELL_FOCUS_CLASS)}function vo(e){null==e||e.classList.add(Ee.DRAG_IN_PROCESS_CLASS)}function yo(e){null==e||e.classList.remove(Ee.DRAG_IN_PROCESS_CLASS)}function bo(e){return e.closest(".tableContainer")}function Co(e,t){return{targetRow:e,targetCol:t}}function wo(e,t,n){var r,o,i=e.target,l={targetRow:t,targetCol:n,placedBeforeCell:i.classList.contains(Ee.DROP_AREA_LEFT_CLASS)||i.classList.contains(Ee.DROP_ZONE_LINE_CLASS)},s=(r=e.dataTransfer.getData(Ee.DRAG_DATA_KEY),o=r.split(Ee.DRAG_DATA_SEPARATOR),{sourceRow:parseInt(o[0],10),sourceCol:parseInt(o[1],10)}),a=s.sourceRow,c=s.sourceCol;return co(co({},l),{},{sourceRow:a,sourceCol:c})}var So=function(){function e(t){a(this,e),s(this,"boundingClientRect",void 0),this.rowElement=t}return u(e,[{key:"getBoundingClientRect",value:function(){return this.boundingClientRect||(this.boundingClientRect=this.rowElement.getBoundingClientRect()),this.boundingClientRect}}]),e}(),Ro=function(){function e(){a(this,e),s(this,"rowElements",void 0)}return u(e,[{key:"clear",value:function(){this.rowElements=void 0}},{key:"getRowElements",value:function(){return this.rowElements||(this.rowElements=Array.from(document.getElementsByClassName(fe.ROW)).map(function(e){return new So(e)})),this.rowElements}}]),e}();var To,Eo=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){var t;return a(this,o),(t=r.call(this,e)).boundHandleIconClicked=t.handleIconClicked.bind(V(t)),t.boundHandleIconMouseDown=t.handleIconMouseDown.bind(V(t)),t}return u(o,[{key:"getDataAttributes",value:function(e){var t={};return Object.keys(e.dataAttributes).forEach(function(n){n.startsWith("data-")?t[n]=e.dataAttributes[n]:t["data-".concat(n)]=e.dataAttributes[n]}),t}},{key:"handleIconClicked",value:function(e){e.stopPropagation();var t={row:this.props.row,col:this.props.column,className:this.props.icon.className,dataAttributes:this.props.icon.dataAttributes,iconCharCode:this.props.icon.iconCharCode};this.props.onIconClicked(t)}},{key:"handleIconMouseDown",value:function(e){e.preventDefault(),0===e.button&&e.stopPropagation()}},{key:"render",value:function(){return W.createElement("div",Kn({style:this.props.icon.style,className:"".concat("sacGridCellIcon"," ").concat(this.props.icon.className," ").concat(this.props.extraClass?this.props.extraClass:"")},this.getDataAttributes(this.props.icon),{onMouseDown:this.boundHandleIconMouseDown,onClick:this.boundHandleIconClicked}),this.props.icon.iconCharCode&&"".concat(String.fromCharCode(this.props.icon.iconCharCode)))}}]),o}(W.PureComponent);function Do(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Do(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Do(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Oo(e,t,n,r,o){var i=e===To.Left?t.cellIconsLeft:t.cellIconsRight;i=i||[];for(var l=Math.min(i.length,Se.MAX_NUM_CUSTOM_ICONS),s=[],a=0;a<l;a++){var c=i[a];void 0!==o&&(c.style=ko({marginTop:o},c.style)),s.push(W.createElement(Eo,{key:"cellIcon".concat(t.id).concat(a),row:t.row,column:t.column,icon:c,onIconClicked:n,featureToggles:r,extraClass:"".concat(e===To.Right&&0===a?"sacGridCellIconRightFirst":"")}))}return s}function xo(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o="icon ".concat(r?"hierarchyIconMobile":"hierarchyIcon"," ");return t?n&&!Y(e)?o+="expandedAboveIcon":o+="expandedBelowIcon":o+="collapsedIcon",o}!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(To||(To={}));var Ao=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"render",value:function(){return W.createElement("div",{className:"cellValue",style:this.props.textStyle},W.createElement("span",{className:"textValue",style:{textOverflow:"ellipsis",overflow:"hidden"}},this.props.children))}}]),o}(W.PureComponent);var Lo=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){var t;return a(this,o),(t=r.call(this,e)).dragHandleRef=W.createRef(),t.boundOnDragStartHandle=t.onDragStartHandle.bind(V(t)),t.boundOnDragEndHandle=t.onDragEndHandle.bind(V(t)),t.boundOnDropDropArea=t.onDropDropArea.bind(V(t)),t.boundOnDragOverDropArea=t.onDragOverDropArea.bind(V(t)),t.boundOnDragLeaveDropArea=t.onDragLeaveDropArea.bind(V(t)),t.boundOnStopPropagation=t.stopPropagationForEvent.bind(V(t)),t}return u(o,[{key:"componentDidMount",value:function(){var e;null===(e=this.dragHandleRef.current)||void 0===e||e.addEventListener("mousedown",this.boundOnStopPropagation,!0)}},{key:"getDataTransferKeyForCell",value:function(){return"".concat(Ee.SOURCE_CELL_PREFIX).concat(this.props.row,"-").concat(this.props.column)}},{key:"onDragStartHandle",value:function(e){if(vo(bo(e.target)),e.dataTransfer){var t,n;e.dataTransfer.effectAllowed="move";var r=e.target;r.parentElement&&e.dataTransfer.setDragImage(r.parentElement,e.nativeEvent.offsetX,e.nativeEvent.offsetY),e.dataTransfer.setData(Ee.DRAG_DATA_KEY,"".concat(this.props.row).concat(Ee.DRAG_DATA_SEPARATOR).concat(this.props.column)),e.dataTransfer.setData(this.getDataTransferKeyForCell(),""),null===(t=(n=this.props).onCellDragStarted)||void 0===t||t.call(n,{sourceRow:this.props.row,sourceCol:this.props.column})}}},{key:"onDragEndHandle",value:function(e){var t,n;yo(bo(e.target)),null===(t=(n=this.props).onCellDragEnded)||void 0===t||t.call(n,{sourceRow:this.props.row,sourceCol:this.props.column})}},{key:"onDropDropArea",value:function(e){var t=e.target;yo(bo(t)),po(t),this.isValidEventAndNotSourceCell(e.dataTransfer)&&this.props.onCellDropped(wo(e,this.props.row,this.props.column))}},{key:"onDragOverDropArea",value:function(e){if(this.isValidEventAndNotSourceCell(e.dataTransfer)){var t=e.target;e.preventDefault(),ho(t)}}},{key:"onDragLeaveDropArea",value:function(e){po(e.target)}},{key:"stopPropagationForEvent",value:function(e){e.stopPropagation()}},{key:"isValidEventAndNotSourceCell",value:function(e){return!e.types.includes(this.getDataTransferKeyForCell())}},{key:"render",value:function(){var e;return W.createElement(W.Fragment,null,W.createElement("div",{className:Ee.DRAG_HANDLE_CLASS,draggable:!0,onDragStart:this.boundOnDragStartHandle,onDragEnd:this.boundOnDragEndHandle,onClick:this.boundOnStopPropagation,ref:this.dragHandleRef,"aria-hidden":!0},"• • •"),(null===(e=this.props.showDroppableAreas)||void 0===e||e)&&W.createElement(W.Fragment,null,W.createElement("div",{className:"".concat(Ee.DROP_AREA_CLASS," ").concat(Ee.DROP_AREA_LEFT_CLASS," ").concat(this.props.dropAreaClassName),onDrop:this.boundOnDropDropArea,onDragOver:this.boundOnDragOverDropArea,onDragLeave:this.boundOnDragLeaveDropArea}),W.createElement("div",{className:"".concat(Ee.DROP_AREA_CLASS," ").concat(Ee.DROP_AREA_RIGHT_CLASS," ").concat(this.props.dropAreaClassName),onDrop:this.boundOnDropDropArea,onDragOver:this.boundOnDragOverDropArea,onDragLeave:this.boundOnDragLeaveDropArea})))}}]),o}(W.PureComponent);var Io=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"getDimensionHeaderClasses",value:function(){var e=["headerCell"],t=this.props.cell.cellType;return t!==E.RowDimHeader&&t!==E.AttributeRowDimHeader||e.push("rowDimHeader"),t===E.AttributeRowDimHeader&&e.push("attributeRowDimHeader"),t!==E.ColDimHeader&&t!==E.AttributeColDimHeader||e.push("colDimHeader"),t===E.AttributeColDimHeader&&e.push("attributeColDimHeader"),e.join(" ")}},{key:"render",value:function(){var e=this.getDimensionHeaderClasses();return W.createElement(Dr,Kn({},this.props,{extraClass:"".concat(e," ").concat(this.props.extraClass," cellWithIcons"),cell:Cr(this.props.cell)}),Oo(To.Left,this.props.cell,this.props.onIconClicked,this.props.featureToggles),W.createElement(Ao,{textStyle:br(this.props)},this.props.cell.formatted),Oo(To.Right,this.props.cell,this.props.onIconClicked,this.props.featureToggles),this.props.cell.draggable&&W.createElement(Lo,{row:this.props.cell.row,column:this.props.cell.column,onCellDragStarted:this.props.onCellDragStarted,onCellDragEnded:this.props.onCellDragEnded,onCellDropped:this.props.onCellDropped,dropAreaClassName:uo(this.props.cell.cellType),featureToggles:this.props.featureToggles,showDroppableAreas:this.props.showDroppableAreas}))}}]),o}(W.Component);var Mo=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){var t;return a(this,o),(t=r.call(this,e)).boundHandleDrillIconClicked=t.handleDrillIconClicked.bind(V(t)),t.boundHandleDrillIconMouseDown=t.handleDrillIconMouseDown.bind(V(t)),t}return u(o,[{key:"handleDrillIconClicked",value:function(e){e.stopPropagation();var t=e.currentTarget.closest(".tableCell"),n=t?{target:t,row:this.props.row,col:this.props.column,td:t,event:e.nativeEvent,selectedCell:Ot(this.props.row,this.props.column)}:{};this.props.onDrillIconClicked(n)}},{key:"handleDrillIconMouseDown",value:function(e){e.preventDefault(),0===e.button&&e.stopPropagation()}},{key:"getDrillIconTouchAreaHeight",value:function(){var e=this.props.mobile?Se.ICON_HEIGHT_MOBILE:Se.ICON_HEIGHT;return this.props.lineHeight<=e-Se.CELL_PADDING_TOP-Se.CELL_PADDING_BOTTOM?this.props.lineHeight:e}},{key:"render",value:function(){return W.createElement("div",{style:{color:this.props.drillIconColor,height:De(this.getDrillIconTouchAreaHeight())},className:xo(this.props.cellType,!!this.props.expanded,this.props.reversedHierarchy,this.props.mobile),onMouseDown:this.boundHandleDrillIconMouseDown,onClick:this.boundHandleDrillIconClicked})}}]),o}(W.PureComponent);function Po(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Po(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Po(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var _o=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"shouldComponentUpdate",value:function(e){return!(this.props.showGrid===e.showGrid&&this.props.firstInRow===e.firstInRow&&this.props.firstInCol===e.firstInCol&&this.props.extraClass===e.extraClass&&this.props.reversedHierarchy===e.reversedHierarchy&&this.props.mobile===e.mobile&&this.props.lineHeight===e.lineHeight&&this.props.width===e.width&&this.props.height===e.height&&this.props.left===e.left&&this.props.showRowColumnHover===e.showRowColumnHover&&this.props.showDroppableAreas===e.showDroppableAreas&&jn(e.cell,this.props.cell)&&jn(e.fontOverride,this.props.fontOverride)&&jn(e.featureToggles,this.props.featureToggles))}},{key:"getClassesBasedOnCellType",value:function(){var e=[ur];return this.props.cell.cellType===E.RowDimMember&&e.push(hr),this.props.cell.cellType===E.ColDimMember&&e.push(dr),this.props.cell.cellType===E.AttributeColDimMember&&e.push("".concat(dr," ").concat("attributeColDimMember")),this.props.cell.cellType===E.AttributeRowDimMember&&e.push("".concat(hr," ").concat("attributeRowDimMember")),e.join(" ")}},{key:"getExtraClass",value:function(){return"".concat(this.getClassesBasedOnCellType()," ").concat(pr(this.props.cell.isInHierarchy,this.props.extraClass)," ").concat(this.props.cell.showDrillIcon?"showDrillIcon":""," cellWithIcons ").concat(this.props.cell.refCellDrillIcon?"refCellHasDrill":"")}},{key:"getAvailableWidthWithIcons",value:function(){var e=this.props.cell.cellIconsLeft?Math.max(this.props.cell.cellIconsLeft.length,Se.MAX_NUM_CUSTOM_ICONS)*Se.CUSTOM_ICON_WIDTH:0,t=this.props.cell.cellIconsRight?Math.max(this.props.cell.cellIconsRight.length,Se.MAX_NUM_CUSTOM_ICONS)*Se.CUSTOM_ICON_WIDTH:0,n=this.props.mobile?Se.ICON_WIDTH_MOBILE:Se.ICON_HEIGHT,r=this.props.cell.showDrillIcon?n:0;return this.props.width-e-t-r}},{key:"getDrillIconCutOffCSS",value:function(e){var t=mr(this.props.lineHeight,fr(this.props.cell,this.props.fontOverride),e),n=this.props.mobile?Se.ICON_HEIGHT_MOBILE:Se.ICON_HEIGHT;return this.props.lineHeight<=n&&(t.alignItems="flex-start",t.verticalAlign="top"),t}},{key:"render",value:function(){var e=Bt(this.props.cell),t=vr(this.props),n=er(this.props.cell.hierarchyPaddingLeft,this.props.cell.hierarchyPaddingTop),r=n.paddingLeft,o=n.paddingTop,i=this.props.cell.showDrillIcon&&this.props.cell.isInHierarchy?this.props.cell.expanded:void 0;return W.createElement(Dr,Kn({},this.props,{cell:Ho(Ho({},Cr(this.props.cell)),{},{defaultTooltipText:e}),extraClass:this.getExtraClass(),ariaExpanded:i}),Oo(To.Left,this.props.cell,this.props.onIconClicked,this.props.featureToggles,o),t&&this.props.cell.isInHierarchy&&W.createElement("div",{className:fe.HIERARCHY_DRILL_ICON_AND_TEXT,style:Ho(Ho({paddingLeft:r,paddingTop:o,width:this.props.width-Se.CELL_PADDING_RIGHT-Se.CELL_PADDING_LEFT},or(this.props.cell)),this.getDrillIconCutOffCSS(o))},this.props.cell.showDrillIcon&&W.createElement(Mo,{reversedHierarchy:!!this.props.reversedHierarchy,mobile:!!this.props.mobile,cellType:this.props.cell.cellType,expanded:this.props.cell.expanded,row:this.props.cell.row,column:this.props.cell.column,drillIconColor:this.props.cell.drillIconColor,lineHeight:this.props.lineHeight,onDrillIconClicked:this.props.onDrillIconClicked}),W.createElement(xr,{cell:this.props.cell,lineHeight:this.props.lineHeight,showGrid:this.props.showGrid,fontOverride:this.props.fontOverride,hierarchyStyle:{paddingLeft:0,paddingTop:0},firstInRow:this.props.firstInRow,width:this.getAvailableWidthWithIcons()-Number(r),textValue:e})),t&&!this.props.cell.isInHierarchy&&W.createElement(Ao,{textStyle:br(this.props)},this.props.cell.showHyperlink&&W.createElement(Rr,{linkId:this.props.cell.id,linkText:e}),!this.props.cell.showHyperlink&&e),Oo(To.Right,this.props.cell,this.props.onIconClicked,this.props.featureToggles,o),this.props.cell.draggable&&W.createElement(Lo,{row:this.props.cell.row,column:this.props.cell.column,onCellDragStarted:this.props.onCellDragStarted,onCellDragEnded:this.props.onCellDragEnded,onCellDropped:this.props.onCellDropped,dropAreaClassName:uo(this.props.cell.cellType),featureToggles:this.props.featureToggles,showDroppableAreas:this.props.showDroppableAreas}))}}]),o}(W.Component);function No(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?No(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):No(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Bo=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){var t;return a(this,o),(t=r.call(this,e)).dropAreaRef=W.createRef(),t.boundOnDropDropArea=t.onDropDropArea.bind(V(t),t.dropAreaRef),t.boundOnDragOverDropArea=t.onDragOverDropArea.bind(V(t),t.dropAreaRef),t.boundOnDragLeaveDropArea=t.onDragLeaveDropArea.bind(V(t),t.dropAreaRef),t}return u(o,[{key:"onDropDropArea",value:function(e,t){this.props.onCellDropped(wo(t,this.props.cell.row,this.props.cell.column)),this.onDragLeaveDropArea(e)}},{key:"onDragOverDropArea",value:function(e,t){t.preventDefault(),e.current&&ho(e.current)}},{key:"onDragLeaveDropArea",value:function(e){e.current&&po(e.current)}},{key:"render",value:function(){var e=this.props.cell.cellType===E.EmptyAxisRowHeader?Ee.EMPTY_AXIS_ROW_ICON:Ee.EMPTY_AXIS_COLUMN_ICON;return W.createElement(Dr,Kn({},this.props,{extraClass:"".concat(this.props.extraClass," ").concat(fe.EMPTY_AXIS_HEADER),cell:zo(zo({},this.props.cell),{},{formatted:""})}),W.createElement("div",{ref:this.dropAreaRef,className:Ee.EMPTY_AXIS_DROP_AREA_CLASS,onDrop:this.boundOnDropDropArea,onDragOver:this.boundOnDragOverDropArea,onDragLeave:this.boundOnDragLeaveDropArea},W.createElement("span",{className:"".concat(fe.ICON," ").concat(e)})))}}]),o}(W.Component);function Fo(){return(Fo=l(F().mark(function e(t){var n,r=arguments;return F().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:Wo,e.abrupt("return",new Promise(function(e,r){n(e,r,t)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Wo(e,t,n){var r=new Image;r.onload=e,r.onerror=t,r.src=n}function jo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Vo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jo(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Uo=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"getImageCellStyle",value:function(){var e,t,n={},r=null===(e=this.props.cell.style)||void 0===e||null===(t=e.alignment)||void 0===t?void 0:t.horizontal;switch(n.position="absolute",n.top=Se.IMG_CELL_PADDING_TOP,r){case m.Left:n.left=0;break;case m.Right:n.right=0;break;default:n.left="50%",n.transform="translate(-50%)"}return n}},{key:"loadImageAndRegisterLoading",value:function(){this.props.registerImageLoading(function(e){return Fo.apply(this,arguments)}(this.props.cell.formatted))}},{key:"render",value:function(){var e=this.props.cell.styleUpdatedByUser,t=e?this.getImageCellStyle():{},n=e?"":"centerImageHorizontal";return this.loadImageAndRegisterLoading(),W.createElement(Dr,Kn({},this.props,{cell:Vo(Vo({},this.props.cell),{},{formatted:""}),extraClass:this.props.extraClass}),this.props.cell.formatted&&W.createElement("img",{src:this.props.cell.formatted,height:this.props.lineHeight-(Se.IMG_CELL_PADDING_TOP+Se.IMG_CELL_PADDING_BOTTOM),className:n,style:t}))}}]),o}(W.Component);function Go(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Go(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Go(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Zo=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){return a(this,o),r.call(this,e)}return u(o,[{key:"shouldComponentUpdate",value:function(e){return!(this.props.showGrid===e.showGrid&&this.props.firstInRow===e.firstInRow&&this.props.firstInCol===e.firstInCol&&this.props.extraClass===e.extraClass&&this.props.mobile===e.mobile&&this.props.lineHeight===e.lineHeight&&this.props.width===e.width&&this.props.height===e.height&&this.props.left===e.left&&this.props.showRowColumnHover===e.showRowColumnHover&&jn(e.cell,this.props.cell)&&jn(e.fontOverride,this.props.fontOverride)&&jn(e.featureToggles,this.props.featureToggles))}},{key:"render",value:function(){return W.createElement(Dr,Kn({},this.props,{cell:Ko(Ko({},this.props.cell),{},{formatted:" "}),extraClass:"unbooked ".concat(this.props.extraClass||"")}),W.createElement("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"},!!this.props.cell.formatted&&W.createElement("title",null,this.props.cell.formatted),W.createElement("line",{x1:"0",y1:"100%",x2:"100%",y2:"0"})))}}]),o}(W.Component);var Xo=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"getCellsToRender",value:function(){var e=[],t=void 0!==this.props.endCol?Math.min(this.props.endCol,this.props.cells.length-1):this.props.cells.length-1;for(this.props.showRowNumberCoordinateHeader&&(e.push(this.getRowNumberCoordinateHeader()),this.left+=Se.COORDINATE_CELL_SIZE),this.adjustLeftAndColumnForMergedCellsIfNecessary(),this.colIndex;this.colIndex<=t;this.colIndex++){var n=this.props.cells[this.colIndex];if(n.cellType!==E.MergedDummyCell){e.push(this.generateCell(n));var r=-1===n.column;this.left=r?Se.COORDINATE_CELL_SIZE:this.left+this.getColumnWidthWithoutMerge(n)}else this.left+=this.props.columnSettings[n.column].width}return e}},{key:"adjustLeftAndColumnForMergedCellsIfNecessary",value:function(){var e,t=this.props.cells[this.colIndex],n=null==t||null===(e=t.merged)||void 0===e?void 0:e.originalColumn;(null==t?void 0:t.cellType)===E.MergedDummyCell&&void 0!==n&&(this.colIndex=n,this.left-=this.props.columnSettings.slice(n,t.column).reduce(function(e,t){return e+t.width},0))}},{key:"getRowNumberCoordinateHeader",value:function(){var e=E.RowCoordinate;this.props.selectedHeader&&(e=this.props.designMode?E.RowCoordinateSelectedDesignMode:E.RowCoordinateSelectedViewMode);var t={id:"coordinateHeader-".concat(this.props.row+1),context:{dimensions:[],originalDimension:""},row:this.props.row,column:-1,formatted:"".concat(this.props.row+1),cellType:e,editable:!1,isInHierarchy:!1,plain:"",styleUpdatedByUser:!0};return W.createElement(Dr,{key:t.id,cell:t,showGrid:this.showGrid,showRowColumnHover:!1,width:Se.COORDINATE_CELL_SIZE,height:this.props.height,left:this.left,fontOverride:this.props.fontOverride,mobile:this.props.mobile,handler:this.props.handler,lineHeight:this.lineHeight,featureToggles:this.props.featureToggles})}},{key:"generateCell",value:function(e){var t,n,r=0===this.colIndex,o=function(e,t,n){var r="";return n&&n["".concat(e,"-").concat(t)]&&(r="".concat(n["".concat(e,"-").concat(t)].style.join(" "))),r}(e.column,e.row,this.props.formulaCellStyleMap),i=-1===e.column,l=e.merged,s=e.column,a=e.row,c=i?Se.COORDINATE_CELL_SIZE:this.getColumnWidthWithoutMerge(e),u=this.props.height;if(l){if(l.columns){t=this.props.columnSettings.slice(s,s+l.columns).map(function(e){return e.width});var h=s+1;c+=this.props.columnSettings.slice(h,h+l.columns).reduce(function(e,t){return e+t.width},0)}l.rows&&(u=l.heightAfterRowResized?l.heightAfterRowResized:this.props.getMergedRowHeight(a,a+l.rows),n=this.props.getHeightsOfMergedCell(a,a+1+l.rows))}var d=this.props.handler.onGetAriaProps(e);switch(e.cellType){case E.ColDimMember:case E.RowDimMember:case E.AttributeColDimMember:case E.AttributeRowDimMember:return W.createElement(_o,Kn({key:e.id,cell:e,showGrid:this.showGrid,firstInRow:r,width:c,height:u,left:this.left,firstInCol:this.props.firstRow,reversedHierarchy:this.props.reversedHierarchy,fontOverride:this.props.fontOverride,mobile:this.props.mobile,onCellDragStarted:this.props.handler.onCellDragStarted,onCellDragEnded:this.props.handler.onCellDragEnded,onCellDropped:this.props.handler.onCellDropped,onDrillIconClicked:this.props.handler.onDrillIconClicked,handler:this.props.handler,extraClass:o,lineHeight:this.lineHeight,featureToggles:this.props.featureToggles,showRowColumnHover:this.props.showRowColumnHover,showDroppableAreas:this.props.showDroppableAreas,onIconClicked:this.props.handler.onCellIconClicked},d));case E.Unbooked:return W.createElement(Zo,Kn({key:e.id,cell:e,showGrid:this.showGrid,firstInRow:r,width:c,height:u,left:this.left,firstInCol:this.props.firstRow,fontOverride:this.props.fontOverride,mobile:this.props.mobile,handler:this.props.handler,extraClass:o,lineHeight:this.lineHeight,featureToggles:this.props.featureToggles,showRowColumnHover:this.props.showRowColumnHover},d));case E.Chart:var p=this.props.cellChartData&&e.cellChart&&this.props.cellChartData[e.cellChart.memberId]||{min:0,max:0,maxTextHeight:0,maxTextWidth:0,columns:[]};return W.createElement(lo,Kn({key:e.id,cell:e,showGrid:this.showGrid,firstInRow:r,width:c,height:u,left:this.left,firstInCol:this.props.firstRow,fontOverride:this.props.fontOverride,extraClass:o,mobile:this.props.mobile,handler:this.props.handler,minValue:p.min||0,maxValue:p.max||0,maxTextWidth:p.maxTextWidth||0,maxTextHeight:p.maxTextHeight||0,columns:p.columns,barHeight:(this.props.showGrid?this.props.height-Se.GRID_BORDER_SIZE:this.props.height)-Se.CELL_PADDING_BOTTOM-Se.CELL_PADDING_TOP-Se.PADDING_FOR_IN_CELL_CHARTS_HEIGHT,columnWidth:this.props.columnSettings[e.column].width-Se.CELL_PADDING_LEFT-Se.CELL_PADDING_RIGHT-Se.PADDING_FOR_IN_CELL_CHARTS_WIDTH,lineHeight:this.lineHeight,featureToggles:this.props.featureToggles,showRowColumnHover:this.props.showRowColumnHover},d));case E.Image:return W.createElement(Uo,Kn({key:e.id,cell:e,width:c,height:u,left:this.left,showGrid:this.showGrid,firstInRow:r,firstInCol:this.props.firstRow,fontOverride:this.props.fontOverride,handler:this.props.handler,extraClass:o,lineHeight:this.lineHeightWithoutPadding,featureToggles:this.props.featureToggles,registerImageLoading:this.props.handler.registerImageLoading,showRowColumnHover:this.props.showRowColumnHover},d));case E.NewLineOnRow:case E.NewLineOnColumn:return W.createElement(Mr,Kn({key:e.id,cell:e,showGrid:this.showGrid,firstInRow:r,width:c,height:u,left:this.left,firstInCol:this.props.firstRow,fontOverride:this.props.fontOverride,handler:this.props.handler,lineHeight:this.lineHeight,activeNewLineMemberCell:this.props.activeNewLineMemberCell,featureToggles:this.props.featureToggles,showRowColumnHover:this.props.showRowColumnHover},d));case E.Header:case E.ColDimHeader:case E.RowDimHeader:case E.AttributeColDimHeader:case E.AttributeRowDimHeader:return W.createElement(Io,Kn({key:e.id,cell:e,showGrid:this.showGrid,firstInRow:r,width:c,height:u,left:this.left,firstInCol:this.props.firstRow,fontOverride:this.props.fontOverride,mobile:this.props.mobile,handler:this.props.handler,onIconClicked:this.props.handler.onCellIconClicked,onCellDragStarted:this.props.handler.onCellDragStarted,onCellDragEnded:this.props.handler.onCellDragEnded,onCellDropped:this.props.handler.onCellDropped,extraClass:o,lineHeight:this.lineHeight,featureToggles:this.props.featureToggles,showRowColumnHover:this.props.showRowColumnHover,showDroppableAreas:this.props.showDroppableAreas},d));case E.EmptyAxisRowHeader:case E.EmptyAxisColumnHeader:return W.createElement(Bo,Kn({key:e.id,cell:e,showGrid:this.showGrid,firstInRow:r,width:c,height:u,left:this.left,firstInCol:this.props.firstRow,fontOverride:this.props.fontOverride,mobile:this.props.mobile,handler:this.props.handler,onCellDropped:this.props.handler.onCellDropped,extraClass:o,lineHeight:this.lineHeight,featureToggles:this.props.featureToggles,showRowColumnHover:this.props.showRowColumnHover},d));default:return W.createElement(Dr,Kn({key:e.id,cell:e,showGrid:this.showGrid,firstInRow:r,width:c,height:u,left:this.left,firstInCol:this.props.firstRow,fontOverride:this.props.fontOverride,mobile:this.props.mobile,handler:this.props.handler,extraClass:o,lineHeight:this.lineHeight,featureToggles:this.props.featureToggles,mergeCellRowHeights:n,mergeCellColumnWidths:t,showRowColumnHover:this.props.showRowColumnHover},d))}}},{key:"getColumnWidthWithoutMerge",value:function(e){var t,n;return null!==(t=null===(n=this.props.columnSettings[e.column])||void 0===n?void 0:n.width)&&void 0!==t?t:he.RESPONSIVE_EMPTY_COLUMN_WIDTH}},{key:"initializeRowFields",value:function(){this.left=this.props.notRenderedWidthOnTheLeft,this.colIndex=this.props.startCol||0,this.showGrid=!!this.props.showGrid;var e=this.props.showGrid?Se.GRID_BORDER_SIZE:0;this.lineHeightWithoutPadding=Math.max(this.props.height-e,0),this.lineHeight=Math.max(this.lineHeightWithoutPadding-Se.CELL_PADDING_TOP-Se.CELL_PADDING_BOTTOM,0)}},{key:"shouldComponentUpdate",value:function(e){return!(this.props.row===e.row&&this.props.height===e.height&&this.props.fixed===e.fixed&&this.props.showRowNumberCoordinateHeader===e.showRowNumberCoordinateHeader&&this.props.firstRow===e.firstRow&&this.props.reversedHierarchy===e.reversedHierarchy&&this.props.selectedHeader===e.selectedHeader&&this.props.designMode===e.designMode&&this.props.showGrid===e.showGrid&&this.props.mobile===e.mobile&&this.props.numberOfCells===e.numberOfCells&&this.props.startCol===e.startCol&&this.props.endCol===e.endCol&&this.props.activeNewLineMemberCell===e.activeNewLineMemberCell&&this.props.notRenderedWidthOnTheLeft===e.notRenderedWidthOnTheLeft&&this.props.showRowColumnHover===e.showRowColumnHover&&this.props.showDroppableAreas===e.showDroppableAreas&&jn(e.cells,this.props.cells)&&jn(e.columnSettings,this.props.columnSettings)&&jn(e.fontOverride,this.props.fontOverride)&&jn(e.formulaCellStyleMap,this.props.formulaCellStyleMap)&&jn(e.allMergedCellFullyRendered,this.props.allMergedCellFullyRendered)&&jn(e.cellChartData,this.props.cellChartData)&&jn(e.featureToggles,this.props.featureToggles))}},{key:"render",value:function(){this.initializeRowFields();var e={height:this.props.height};return W.createElement("div",{style:e,className:fe.ROW,"aria-rowindex":this.props.row+1,role:"row"},this.getCellsToRender())}}]),o}(W.Component);var qo=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){return a(this,o),r.call(this,e)}return u(o,[{key:"shouldComponentUpdate",value:function(e){return!(this.props.row===e.row&&this.props.height===e.height&&this.props.fixed===e.fixed&&this.props.showRowNumberCoordinateHeader===e.showRowNumberCoordinateHeader&&this.props.showGrid===e.showGrid&&this.props.firstRow===e.firstRow&&this.props.reversedHierarchy===e.reversedHierarchy&&this.props.lastColIndex===e.lastColIndex&&this.props.designMode===e.designMode&&this.props.startCol===e.startCol&&this.props.endCol===e.endCol&&this.props.showCorner===e.showCorner&&this.props.showRowColumnHover===e.showRowColumnHover&&this.props.notRenderedWidthOnTheLeft===e.notRenderedWidthOnTheLeft&&jn(e.selection,this.props.selection)&&jn(e.cells,this.props.cells)&&jn(e.columnSettings,this.props.columnSettings)&&jn(e.fontOverride,this.props.fontOverride)&&jn(e.formulaCellStyleMap,this.props.formulaCellStyleMap)&&jn(e.featureToggles,this.props.featureToggles))}},{key:"getCells",value:function(){var e=[],t=this.props.startCol||0,n=void 0!==this.props.endCol?this.props.endCol:this.props.lastColIndex;for(this.props.showCorner&&e.push({id:"cell--1-".concat(-1),row:-1,column:-1,context:{dimensions:[],originalDimension:""},cellType:E.CoordinateCorner,formatted:"",plain:"",editable:!1,isInHierarchy:!1,styleUpdatedByUser:!0});t<=n;t++){var r=this.props.selection&&this.props.selection.some(function(e){return bn(e,t,-1)})?this.props.designMode?E.ColumnCoordinateSelectedDesignMode:E.ColumnCoordinateSelectedViewMode:E.ColumnCoordinate;e.push({id:"cell--1-".concat(t),row:-1,column:t,context:{dimensions:[],originalDimension:""},cellType:r,formatted:this.getColumnName(t),plain:this.getColumnName(t),editable:!1,isInHierarchy:!1,styleUpdatedByUser:!0})}return e}},{key:"getColumnName",value:function(e){var t=e>=26?this.getColumnName(Math.floor(e/26)-1):"",n="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[e%26];return"".concat(t).concat(n)}},{key:"render",value:function(){return W.createElement(Xo,Kn({},this.props,{row:-1,cells:this.getCells(),firstRow:!1,endCol:void 0,startCol:0,showDroppableAreas:this.props.showDroppableAreas}))}}]),o}(W.Component);var Yo=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){var t;return a(this,o),(t=r.call(this,e)).boundGetMergedRowHeight=t.getMergedRowHeight.bind(V(t)),t.boundGetHeightsOfMergedCell=t.getHeightsOfMergedCell.bind(V(t)),t}return u(o,[{key:"getMergedRowHeight",value:function(e,t){var n=this.props.data.showGrid?Se.GRID_BORDER_SIZE:0;return Yt(this.props.data.rows,n,e,t)}},{key:"getHeightsOfMergedCell",value:function(e,t){var n=this.props.data.showGrid?Se.GRID_BORDER_SIZE:0;return function(e,t,n,r){return e.slice(n,r).map(function(e){return e?e.height+t:0})}(this.props.data.rows,n,e,t)}},{key:"getRowsToRender",value:function(){var e=this,t=[];this.props.showCoordinateHeaderRow&&t.push(W.createElement(qo,{key:Se.COORDINATE_ROW_NAME,row:-1,cells:[],lastColIndex:this.props.data.columnSettings.length-1,firstRow:!0,height:Se.COORDINATE_CELL_SIZE,fixed:!0,formulaCellStyleMap:this.props.data.formulaCellStyleMap,columnSettings:this.props.data.columnSettings,handler:this.props.rowHandler,showRowNumberCoordinateHeader:!1,reversedHierarchy:this.props.data.reversedHierarchy,designMode:this.props.data.designMode,selection:this.props.selection,startCol:this.props.startCol,endCol:this.props.endCol,showCorner:this.props.showCoordinateHeaderCorner,featureToggles:this.props.data.featureToggles,getMergedRowHeight:this.boundGetMergedRowHeight,getHeightsOfMergedCell:this.boundGetHeightsOfMergedCell,notRenderedWidthOnTheLeft:this.props.notRenderedWidthOnTheLeft,showRowColumnHover:!1,showDroppableAreas:this.props.showDroppableAreas}));for(var n=void 0!==this.props.endRow?this.props.endRow:this.props.data.rows.length-1,r=this.props.startRow||0,o=function(){var n=e.props.data.rows[r];if(!n)return"continue";var o=e.props.selection&&e.props.selection.some(function(e){return bn(e,-1,n.row)}),i=function(e){return e.cells.filter(function(e){var t;return!(null==e||null===(t=e.merged)||void 0===t||!t.rows)})}(n).some(function(t){var r;return!(null===(r=t.merged)||void 0===r||!r.rows)&&t.merged.rows+n.row>=e.props.data.rows.length});t.push(W.createElement(Xo,{key:n.id,row:n.row,cells:n.cells,firstRow:0===r,fontOverride:e.props.data.fontOverride,height:e.props.data.showGrid?n.height+Se.GRID_BORDER_SIZE:n.height,fixed:n.fixed,showGrid:e.props.data.showGrid,mobile:e.props.data.mobile,formulaCellStyleMap:e.props.data.formulaCellStyleMap,columnSettings:e.props.data.columnSettings,handler:e.props.rowHandler,showRowNumberCoordinateHeader:e.props.showCoordinateHeaderColumn,reversedHierarchy:e.props.data.reversedHierarchy,selectedHeader:o,designMode:e.props.data.designMode,cellChartData:e.props.data.cellChartData,numberOfCells:e.props.data.columnSettings.length,startCol:e.props.startCol,endCol:e.props.endCol,activeNewLineMemberCell:e.props.data.activeNewLineMemberCell,featureToggles:e.props.data.featureToggles,getMergedRowHeight:e.boundGetMergedRowHeight,getHeightsOfMergedCell:e.boundGetHeightsOfMergedCell,notRenderedWidthOnTheLeft:e.props.notRenderedWidthOnTheLeft,showRowColumnHover:e.props.showRowColumnHover,allMergedCellFullyRendered:!i,showDroppableAreas:e.props.showDroppableAreas}))};r<=n;r++)o();return t}},{key:"shouldComponentUpdate",value:function(e){return!(this.props.copyInProcess===e.copyInProcess&&this.props.tableWidth===e.tableWidth&&this.props.notRenderedHeightTop===e.notRenderedHeightTop&&this.props.notRenderedHeightBottom===e.notRenderedHeightBottom&&this.props.notRenderedWidthOnTheLeft===e.notRenderedWidthOnTheLeft&&this.props.data.rows.length===e.data.rows.length&&this.props.startRow===e.startRow&&this.props.endRow===e.endRow&&this.props.startCol===e.startCol&&this.props.endCol===e.endCol&&this.props.titleVisible===e.titleVisible&&this.props.showRowColumnHover===e.showRowColumnHover&&this.props.showCoordinateHeaderColumn===e.showCoordinateHeaderColumn&&this.props.showCoordinateHeaderRow===e.showCoordinateHeaderRow&&this.props.showCoordinateHeaderCorner===e.showCoordinateHeaderCorner&&jn(e.selection,this.props.selection)&&jn(e.data,this.props.data))}},{key:"getClassList",value:function(){return"reactTable ".concat(this.props.copyInProcess?"copySelect":""," ").concat(this.props.data.showGrid?"showGrid":""," ").concat(this.props.titleVisible?"titleVisible":""," ").concat(this.getRowColSelectionClass())}},{key:"getRowColSelectionClass",value:function(){var e="";return this.props.selection&&this.props.selection[0]&&(this.props.selection[0].selectionType===T.Columns&&(e="columnsSelected"),this.props.selection[0].selectionType===T.Rows&&(e="rowsSelected")),e}},{key:"getStyle",value:function(){return{paddingTop:De(this.props.notRenderedHeightTop),paddingBottom:De(this.props.notRenderedHeightBottom),width:De(this.props.tableWidth)}}},{key:"render",value:function(){return W.createElement("div",{className:"tableDivTable ".concat(this.getClassList()),style:this.getStyle()},this.getRowsToRender())}}]),o}(W.Component);var $o=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"render",value:function(){return W.createElement("div",{style:{position:"absolute",top:0,left:0,width:"1px",height:"".concat(this.props.height,"px"),pointerEvents:"none"}})}}]),o}(W.PureComponent);function Qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Jo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qo(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ei,ti=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"render",value:function(){return void 0!==this.props.commonStyle.height&&this.props.commonStyle.height<=0||void 0!==this.props.commonStyle.width&&this.props.commonStyle.width<=0?null:W.createElement("div",{className:"overlayBorder",style:Jo({},this.props.commonStyle)},this.props.children)}}]),o}(W.PureComponent);!function(e){e.CellHover="Cell",e.DataRegionHover="DataRegion",e.HeaderRegionHover="HeaderRegion",e.HeaderRegionCornerHover="HeaderRegionCorner",e.DimensionHover="Dimension",e.InCellChartHover="InCellChart",e.SolidBackground="SolidBackground",e.CornerSolidBackground="CornerSolidBackground",e.NonCornerSolidBackground="NonCornerSolidBackground",e.ExcludingFocusSmall="ExcludingFocusSmall",e.ExcludingFocusBig="ExcludingFocusBig",e.ReferenceSourceCellHover="ReferenceSourceCell",e.ReferencedCellHover="ReferencedCell",e.RowHighlighting="RowHighlighting",e.ColHighlighting="ColHighlighting",e.CellHighlighting="CellHighlighting"}(ei||(ei={}));var ni=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"render",value:function(){return W.createElement("div",{className:"overlay",style:{backgroundColor:this.props.backgroundColor,position:"absolute",top:this.props.top,left:this.props.left,height:this.props.height,width:this.props.width}})}}]),o}(W.PureComponent);function ri(e,t){return void 0!==t?Math.min(e,t):e}function oi(e,t){var n,r=!0,o=!0,i=void 0!==e.mergedStartRow?e.mergedStartRow:e.startRow,l=e.endRow,s=void 0!==e.mergedStartCol?e.mergedStartCol:e.startCol,a=e.endCol;i>l?(l=i,i=e.endRow,r=!1):e.isReverseDraggingVertical&&(r=!1),s>a?(a=s,s=e.endCol,o=!1):e.isReverseDraggingHorizontal&&(o=!1),(n=e.selectionType)===T.Columns||n===T.All?(l=t.data.lastRowIndex,e.endRow=t.data.lastRowIndex):function(e,t){return[v.DatacellRegion,v.HeaderRegion].includes(e)||function(e,t){return[v.Dimension,v.MultiRegion].includes(e)&&t.startCol===t.endCol}(e,t)}(t.selection.selectionContextType,e)&&(l=t.data.dataRegionEndRow,e.endRow=t.data.dataRegionEndRow);var c=i===l&&s===a;if(c){var u=t.data.rows[i]&&t.data.rows[i].cells[s];u&&u.merged&&(l=i+(u.merged.rows||0),a=s+(u.merged.columns||0))}var h={startRow:i,endRow:l,startCol:s,endCol:a,isOneCellSelected:c,isFocusedCellOnTop:r,isFocusedCellOnTheLeft:o,showFocusedCell:e.selectionType!==T.Region&&void 0===e.mergedStartRow&&void 0===e.mergedStartCol&&!e.hideFirstSelectedCellBackground,showDragger:!0};return function(e,t,n){var r=void 0!==t.freezeSectionEndCol&&e.startCol<=t.freezeSectionEndCol,o=void 0!==t.freezeSectionEndRow&&e.startRow<=t.freezeSectionEndRow,i=void 0!==t.freezeSectionStartCol&&e.startCol>=t.freezeSectionStartCol,l=void 0!==t.freezeSectionStartRow&&e.startRow>=t.freezeSectionStartRow,s=o&&r,a=void 0===t.freezeSectionEndRow&&r&&l,c=void 0===t.freezeSectionEndCol&&o&&i,u=void 0===t.freezeSectionEndCol&&void 0===t.freezeSectionEndRow&&l&&i;return s||a||c||u||(n.showFocusedCell=!1),void 0!==t.freezeSectionStartCol&&n.startCol<t.freezeSectionStartCol&&(n.startCol=t.freezeSectionStartCol),void 0!==t.freezeSectionStartRow&&n.startRow<t.freezeSectionStartRow&&(n.startRow=t.freezeSectionStartRow),void 0!==t.freezeSectionEndCol&&n.endCol>t.freezeSectionEndCol&&(n.endCol=t.freezeSectionEndCol,n.showDragger=!1),void 0!==t.freezeSectionEndRow&&n.endRow>t.freezeSectionEndRow&&(n.endRow=t.freezeSectionEndRow,n.showDragger=!1),n}(e,t,h)}function ii(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function li(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ii(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ii(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var si,ai=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"render",value:function(){return this.props.showDragger?W.createElement("div",{className:"selectionDragger",style:li({},this.props.draggerStyle),onMouseDown:this.props.onCopyDraggerClick}):null}}]),o}(W.PureComponent);function ci(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ui(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}!function(e){e[e.Top=0]="Top",e[e.Left=1]="Left",e[e.TopLeft=2]="TopLeft"}(si||(si={}));var hi=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){return a(this,o),r.call(this,e)}return u(o,[{key:"shouldComponentUpdate",value:function(e){return!(this.props.fixedTableWidth===e.fixedTableWidth&&this.props.fixedTableHeight===e.fixedTableHeight&&this.props.offsetOverlayTop===e.offsetOverlayTop&&this.props.offsetOverlayLeft===e.offsetOverlayLeft&&this.props.notRenderedHeightTop===e.notRenderedHeightTop&&this.props.designMode===e.designMode&&this.props.copyInProcess===e.copyInProcess&&this.props.tableId===e.tableId&&this.props.showCopyDragger===e.showCopyDragger&&this.props.freezeLines===e.freezeLines&&this.props.hasLADatapointSelection===e.hasLADatapointSelection&&this.props.freezeSectionStartCol===e.freezeSectionStartCol&&this.props.freezeSectionStartRow===e.freezeSectionStartRow&&this.props.freezeSectionEndCol===e.freezeSectionEndCol&&this.props.freezeSectionEndRow===e.freezeSectionEndRow&&jn(e.highlightedCells,this.props.highlightedCells)&&jn(e.hover,this.props.hover)&&jn(e.selection,this.props.selection)&&jn(e.tableSizes,this.props.tableSizes)&&jn(e.data,this.props.data))}},{key:"getColor",value:function(){return this.props.designMode?ge.SELECTION_COLOR_DESIGN:ge.SELECTION_COLOR}},{key:"getBorderColor",value:function(){return this.props.designMode?Se.SELECTION_BORDER_COLOR_DESIGN:Se.SELECTION_BORDER_COLOR}},{key:"getTopHoverPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.hover&&this.props.hover.row;return this.props.hover&&void 0!==e?this.props.tableSizes.rowHeights.slice(this.props.freezeSectionStartRow,e).reduce(function(e,t){return e+t},0):0}},{key:"getLeftHoverPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.hover&&this.props.hover.column;return this.props.hover&&void 0!==e?this.props.tableSizes.columnWidths.slice(this.props.freezeSectionStartCol,e).reduce(function(e,t){return e+t},0):0}},{key:"renderHeaderRegionHover",value:function(){var e=this.getTopHoverPosition(this.props.data.dataRegionStartRow),t=this.getLeftHoverPosition(this.props.data.dataRegionStartCol),n=this.getTopHoverPosition(ri(this.props.data.dataRegionCornerRow,this.props.freezeSectionEndRow)+1),r=this.getLeftHoverPosition(ri(this.props.data.dataRegionCornerCol,this.props.freezeSectionEndCol)+1),o=this.getTopHoverPosition(ri(this.props.data.dataRegionEndRow,this.props.freezeSectionEndRow)+1),i=this.getLeftHoverPosition(ri(this.props.data.dataRegionEndCol,this.props.freezeSectionEndCol)+1);return W.createElement("div",null,this.renderOverlay(ei.HeaderRegionHover,e,t,n-e,i-t),this.renderOverlay(ei.HeaderRegionCornerHover,n,t,o-n,r-t))}},{key:"renderDataRegionHover",value:function(){if(void 0!==this.props.freezeSectionEndRow&&this.props.data.dataRegionCornerRow+1>this.props.freezeSectionEndRow||void 0!==this.props.freezeSectionEndCol&&this.props.data.dataRegionCornerCol+1>this.props.freezeSectionEndCol)return null;var e=this.getTopHoverPosition(this.props.data.dataRegionCornerRow+1),t=this.getTopHoverPosition(ri(this.props.data.dataRegionEndRow,this.props.freezeSectionEndRow)+1),n=this.getLeftHoverPosition(this.props.data.dataRegionCornerCol+1),r=this.getLeftHoverPosition(ri(this.props.data.dataRegionEndCol,this.props.freezeSectionEndCol)+1);return this.renderOverlay(ei.DataRegionHover,e,n,t-e,r-n)}},{key:"renderDimensionHover",value:function(){if(!this.props.hover||!this.props.hover.dimensionId)return null;var e=this.props.data.dimensionCellCoordinatesInHeader[this.props.hover.dimensionId];if(void 0!==this.props.freezeSectionEndRow&&e.startRow>this.props.freezeSectionEndRow||void 0!==this.props.freezeSectionEndCol&&e.startCol>this.props.freezeSectionEndCol)return null;var t=this.getTopHoverPosition(e.startRow),n=this.getTopHoverPosition(ri(e.endRow,this.props.freezeSectionEndRow)+1),r=this.getLeftHoverPosition(e.startCol),o=this.getLeftHoverPosition(ri(e.endCol,this.props.freezeSectionEndCol)+1);return this.renderOverlay(ei.DimensionHover,t,r,n-t,o-r)}},{key:"renderInCellChartHover",value:function(){if(this.props.hover&&this.props.hover.dimensionId&&this.props.data.cellChartData){var e=this.props.data.cellChartData[this.props.hover.dimensionId],t=this.getTopHoverPosition(e.startRow),n=this.getTopHoverPosition(e.endRow+1),r=this.getLeftHoverPosition(e.startCol),o=this.getLeftHoverPosition(e.endCol+1);return this.renderOverlay(ei.InCellChartHover,t,r,n-t,o-r)}}},{key:"renderHighlightedCell",value:function(){var e=this;return(this.props.highlightedCells?function(e){if(0===e.length)return[];var t=e.sort(function(e,t){return e.x<t.x||e.x===t.x&&e.y<=t.y?-1:1}),n=[];n.push(Hr({endCol:t[0].x,endRow:t[0].y,selectionType:T.Box,startCol:t[0].x,startRow:t[0].y},t[0].backgroundColor&&{backgroundColor:t[0].backgroundColor}));for(var r=1;r<t.length;r++){for(var o=t[r],i=!1,l=n.length-1;l>=0;l--){var s=n[l],a=o.y===s.endRow+1,c=o.x===s.endCol+1,u=o.x===s.startCol&&s.startCol===s.endCol,h=o.y===s.startRow&&s.startRow===s.endRow,d=s.backgroundColor!==o.backgroundColor;if(a&&u&&!d&&(s.endRow=o.y,i=!0),c&&h&&!d&&(s.endCol=o.x,i=!0),i)break}i||n.push(Hr({endCol:o.x,endRow:o.y,selectionType:T.Box,startCol:o.x,startRow:o.y},o.backgroundColor&&{backgroundColor:o.backgroundColor}))}return n}(this.props.highlightedCells):[]).map(function(t,n){var r=oi(t,e.props),o=r.startRow,i=r.endRow,l=r.startCol,s=r.endCol,a=e.getTopHoverPosition(o),c=e.getTopHoverPosition(i+1),u=e.getLeftHoverPosition(l),h=e.getLeftHoverPosition(s+1);return e.renderOverlay(ei.CellHighlighting,a,u,c-a,h-u,n,t.backgroundColor)})}},{key:"renderSelectedRegion",value:function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ui(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ui(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);if(!function(e,t){if(void 0!==t.startRow&&void 0!==t.startCol){var n=e.startCol>=t.startCol,r=e.endCol>=t.startCol,o=e.startRow>=t.startRow,i=e.endRow>=t.startRow,l=void 0!==t.endCol&&n&&e.startCol<=t.endCol,s=void 0!==t.endCol&&e.endCol<=t.endCol&&r,a=void 0!==t.endRow&&o&&e.startRow<=t.endRow,c=void 0!==t.endRow&&e.endRow<=t.endRow&&i,u=l||s,h=void 0===t.endCol&&(r||n),d=a||c,p=void 0===t.endRow&&(i||o);return d&&u||d&&h||u&&p||p&&h}return!0}(n,{startRow:this.props.freezeSectionStartRow,endRow:this.props.freezeSectionEndRow,startCol:this.props.freezeSectionStartCol,endCol:this.props.freezeSectionEndCol}))return null;var r,o,i,l,a=t+1===this.props.selection.selectedRegions.length,c=oi(n,this.props),u=c.startRow,h=c.endRow,d=c.startCol,p=c.endCol,f=c.isOneCellSelected,g=c.isFocusedCellOnTop,m=c.isFocusedCellOnTheLeft,v=c.showFocusedCell,y=c.showDragger,b=this.getTopHoverPosition(u),C=this.getTopHoverPosition(h+1),w=this.getLeftHoverPosition(d),S=this.getLeftHoverPosition(p+1);if(!a||!v)if(void 0!==n.cornerCol&&void 0!==n.cornerRow){var R=this.getLeftHoverPosition(ri(this.props.data.dataRegionCornerCol,this.props.freezeSectionEndCol)+1),E=this.getTopHoverPosition(ri(this.props.data.dataRegionCornerRow,this.props.freezeSectionEndRow)+1);r=W.createElement("div",{key:"solidBackground-".concat(t)},this.renderOverlay(ei.SolidBackground,b,w,E-b,S-w),this.renderOverlay(ei.CornerSolidBackground,E,w,C-E,R-w))}else r=this.renderOverlay(ei.NonCornerSolidBackground,b,w,C-b,S-w,t);if(a){var D,k,O,x,A,L,I=n.selectionType===T.Box;if(I=I&&this.props.showCopyDragger&&y,D=function(e,t){return e===t.startRow&&t.endRow>=t.startRow||e===t.endRow&&t.endRow<=t.startRow}(u,n),k=function(e,t){return e===t.startCol&&t.endCol>=t.startCol||e===t.endCol&&t.endCol<=t.startCol}(d,n),O=function(e,t){return e===t.endRow&&t.endRow>=t.startRow||e===t.startRow&&t.endRow<=t.startRow}(h,n),x=function(e,t,n){return void 0!==e&&void 0!==n.cornerRow&&e<=n.cornerRow&&(!t||n.cornerRow<=t)}(this.props.freezeSectionStartRow,this.props.freezeSectionEndRow,n),A=function(e,t){return e===t.endCol&&t.endCol>=t.startCol||e===t.startCol&&t.endCol<=t.startCol}(p,n),L=function(e,t,n){return void 0!==e&&void 0!==n.cornerCol&&e<=n.cornerCol&&(!t||n.cornerCol<=t)}(this.props.freezeSectionStartCol,this.props.freezeSectionEndCol,n),void 0!==n.cornerCol&&void 0!==n.cornerRow){var M=this.getLeftHoverPosition(this.props.data.dataRegionCornerCol+1),P=this.getTopHoverPosition(this.props.data.dataRegionCornerRow+1);o=W.createElement("div",{key:"border-".concat(t)},this.renderBorder(b,w,P-b,M-w,D,k,!1,!1,si.TopLeft),this.renderBorder(b,M,P-b,S-M,D,!1,x,A,si.Top),this.renderBorder(P,w,C-P,M-w,!1,k,O,L,si.Left))}else o=this.renderBorder(b,w,C-b,S-w,D,k,O,A,t,I);if(v){var H,_,N,z,B,F;if(g)N=b,B=z=this.getTopHoverPosition(u+1),F=C;else{var j=n.isReverseDraggingVertical?n.endRow:n.startRow;B=b,N=F=this.getTopHoverPosition(j),z=C}if(m)H=this.getLeftHoverPosition(d+1),_=S;else{var V=n.isReverseDraggingHorizontal?n.endCol:n.startCol;H=w,_=this.getLeftHoverPosition(V)}i=this.renderOverlay(ei.ExcludingFocusSmall,N,H,z-N,_-H),l=this.renderOverlay(ei.ExcludingFocusBig,B,w,F-B,S-w)}}return a?f&&n.selectionType!==T.Region||n.isCellChartSelection?o:n.selectionType!==T.Region&&v?W.createElement("div",{key:"all-".concat(t)},d!==p&&i,u!==h&&l,o):W.createElement("div",{key:"solidBackgroundAndBorder-".concat(t)},r,o):r}},{key:"renderCellHover",value:function(){if(this.props.hover&&void 0!==this.props.hover.column&&void 0!==this.props.hover.row){var e=this.props.data.rows[this.props.hover.row],t=e&&e.cells[this.props.hover.column]&&e.cells[this.props.hover.column].merged,n=this.props.hover.column+(t&&t.columns||0),r=this.props.hover.row+(t&&t.rows||0);if(void 0!==this.props.freezeSectionEndRow&&r>this.props.freezeSectionEndRow||void 0!==this.props.freezeSectionEndCol&&n>this.props.freezeSectionEndCol)return null;var o=this.getTopHoverPosition(),i=this.getLeftHoverPosition(),l=this.getTopHoverPosition(r+1),s=this.getLeftHoverPosition(n+1);return this.renderOverlay(ei.CellHover,o,i,l-o,s-i)}}},{key:"renderOverlay",value:function(e,t,n,r,o,i,l){var s=l||this.getColor();return W.createElement(ni,{overlayBoxType:e,key:void 0!==i?"overlay-box-".concat(i,"-").concat(e):"overlay-box-".concat(e),backgroundColor:s,top:t,left:n,height:r,width:o})}},{key:"renderBorder",value:function(e,t,n,r,o,i,l,s,a,c){var u=!(!c||this.props.data.mobile),h=this.props.copyInProcess?"dashed":"solid",d=o?h:"none",p=i?h:"none",f=l?h:"none",g=s?h:"none",m={borderColor:this.getBorderColor(),borderWidth:1,boxSizing:"border-box",position:"absolute",top:e,left:t,width:r,height:n,borderTopStyle:d,borderLeftStyle:p,borderBottomStyle:f,borderRightStyle:g},v={backgroundColor:this.getBorderColor()};return W.createElement("div",{key:"borderBox-".concat(a)},W.createElement(ti,{commonStyle:m},W.createElement(ai,{showDragger:u,draggerStyle:v,onCopyDraggerClick:this.props.onCopyDraggerClick})))}},{key:"renderReferenceHighlighting",value:function(){var e,t,n=null===(e=rn(this.props.selection.selectedRegions))||void 0===e?void 0:e.startRow,r=null===(t=rn(this.props.selection.selectedRegions))||void 0===t?void 0:t.startCol,o=void 0!==n&&void 0!==r&&this.props.data.rows[n]&&this.props.data.rows[n].cells[r]&&this.props.data.rows[n].cells[r].reference;if(o&&void 0!==n&&void 0!==r){var i=this.getTopHoverPosition(n),l=this.getLeftHoverPosition(r),s=this.getTopHoverPosition(n+1),a=this.getLeftHoverPosition(r+1),c=this.renderOverlay(ei.ReferenceSourceCellHover,i,l,s-i,a-l,void 0,Se.SELECTION_REFERENCE_COLOR),u=this.getTopHoverPosition(o.row),h=this.getLeftHoverPosition(o.col),d=this.getTopHoverPosition(o.row+1),p=this.getLeftHoverPosition(o.col+1),f=this.renderOverlay(ei.ReferencedCellHover,u,h,d-u,p-h,void 0,Se.SELECTION_REFERENCE_COLOR);return W.createElement("div",null,c,f)}}},{key:"shouldHideSelection",value:function(e){if(e.startRow!==e.endRow||e.startCol!==e.endCol)return!1;var t=!1;if(!(this.props.hasLADatapointSelection&&this.props.highlightedCells&&this.props.highlightedCells.length))return!1;var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ci(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ci(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}(this.props.highlightedCells);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.x===e.startCol&&o.y===e.startRow){t=!0;break}}}catch(e){r.e(e)}finally{r.f()}return!t}},{key:"renderRowHighlighting",value:function(){var e=this.props,t=e.hover,n=e.data,r=e.freezeSectionStartRow,o=e.freezeSectionEndRow,i=e.copyInProcess,l=n.showGrid?Se.GRID_BORDER_SIZE:0;if(!i&&t){var s=t.hoverContextType===v.Row,a=void 0===r,c=void 0!==t.row&&void 0!==o&&o>=t.row,u=void 0!==t.row&&void 0===o&&void 0!==r&&r<=t.row;if(s&&void 0!==t.row&&(a||c||u)){var h=this.getTopHoverPosition()-l,d=this.getLeftHoverPosition(ri(this.props.data.columnSettings.length,this.props.freezeSectionEndCol)+1);return this.renderOverlay(ei.RowHighlighting,h,0,n.rows[t.row].height+l,d)}}return null}},{key:"renderColHighlighting",value:function(){var e=this.props,t=e.hover,n=e.data,r=e.freezeSectionEndCol,o=e.freezeSectionStartCol;if(!e.copyInProcess&&t){var i=t.hoverContextType===v.Column,l=void 0===o,s=void 0!==t.column&&void 0!==r&&r>=t.column,a=void 0!==t.column&&void 0===r&&void 0!==o&&o<=t.column;if(i&&void 0!==t.column&&(l||s||a)){var c=this.getLeftHoverPosition(),u=this.getTopHoverPosition(ri(this.props.data.rows.length,this.props.freezeSectionEndRow)+1);return this.renderOverlay(ei.ColHighlighting,0,c,u,n.columnSettings[t.column].width)}}return null}},{key:"render",value:function(){var e=this,t=rn(this.props.selection.selectedRegions),n=t&&t.startRow===t.endRow&&t.startCol===t.endCol,r=t&&this.props.data.rows[t.startRow],o=r&&t&&r.cells[t.startCol],i=t&&this.shouldHideSelection(t);return W.createElement("div",{className:"reactTableOverlay",style:{pointerEvents:"none",position:"absolute",top:this.props.offsetOverlayTop+this.props.notRenderedHeightTop,left:this.props.offsetOverlayLeft}},this.props.hover&&(this.props.hover.hoverContextType===v.DataCell||this.props.hover.hoverContextType===v.DimensionMember)&&this.renderCellHover(),this.renderRowHighlighting(),this.renderColHighlighting(),this.props.hover&&this.props.hover.hoverContextType===v.DatacellRegion&&this.renderDataRegionHover(),this.props.hover&&this.props.hover.hoverContextType===v.HeaderRegion&&this.renderHeaderRegionHover(),this.props.hover&&this.props.hover.hoverContextType===v.Dimension&&void 0!==this.props.hover.dimensionId&&this.renderDimensionHover(),this.props.hover&&this.props.hover.hoverContextType===v.CellChart&&void 0!==this.props.hover.dimensionId&&this.renderInCellChartHover(),n&&o&&o.reference&&this.renderReferenceHighlighting(),!i&&this.props.selection.selectedRegions.map(function(t,n){return e.renderSelectedRegion(t,n)}),this.renderHighlightedCell())}}]),o}(W.Component);function di(e,t,n){return(di="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=X(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}var pi=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e,t){var n;return a(this,o),(n=r.call(this,e)).uniqueClassName="dropZone_".concat(n.props.classKey),n.useRealColumnRowInDropEvent=t,n.boundOnDragEnterDropArea=n.onDragEnterDropArea.bind(V(n)),n.boundOnDragOverDropArea=n.onDragOverDropArea.bind(V(n)),n.boundOnDragLeaveDropArea=n.onDragLeaveDropArea.bind(V(n)),n.boundOnDropDropArea=n.onDropDropArea.bind(V(n)),n}return u(o,[{key:"getAdditionalClasses",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="".concat(e," ").concat(this.uniqueClassName);return t&&this.needsFirstIndexShift()&&(n+=" ".concat(Ee.DROP_ZONE_INDEX0_CLASS)),n}},{key:"getCellAtCursor",value:function(e){if(this.props.dragDropCache)return function(e,t,n){var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return so(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?so(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}(e);try{for(o.s();!(r=o.n()).done;){var i=r.value,l=i.getBoundingClientRect();if(n>=l.top&&n<=l.bottom)for(var s=i.rowElement.getElementsByClassName(Se.CELL_CLASSNAME),a=0,c=Array.from(s);a<c.length;a++){var u=c[a],h=u.getBoundingClientRect();if(t>=h.left&&t<=h.right)return u}}}catch(e){o.e(e)}finally{o.f()}}(this.props.dragDropCache.getRowElements(),e.clientX,e.clientY)}},{key:"getCellColumn",value:function(e){var t;return parseInt(null!==(t=null==e?void 0:e.getAttribute("data-tablecol"))&&void 0!==t?t:"",10)}},{key:"getCellRow",value:function(e){var t;return parseInt(null!==(t=null==e?void 0:e.getAttribute("data-tablerow"))&&void 0!==t?t:"",10)}},{key:"getTargets",value:function(){return document.querySelectorAll(".".concat(this.uniqueClassName))}},{key:"needsFirstIndexShift",value:function(){return 0===this.props.tableSizes.coordinateOffset&&(0===this.props.column||0===this.props.row)}},{key:"onDragEnterDropArea",value:function(e){e.preventDefault(),this.getTargets().forEach(function(e){e.classList.add(Ee.DROP_ZONE_FOCUS_CLASS)})}},{key:"onDragOverDropArea",value:function(e){e.preventDefault()}},{key:"onDragLeaveDropArea",value:function(e){var t,n=e.relatedTarget;null!=n&&null!==(t=n.classList)&&void 0!==t&&t.contains(this.uniqueClassName)?e.stopPropagation():this.getTargets().forEach(function(e){fo(e)})}},{key:"onDropDropArea",value:function(e){var t,n;if(this.getTargets().forEach(function(e){yo(bo(e)),fo(e)}),this.useRealColumnRowInDropEvent){var r=this.getCellAtCursor(e);t=this.getCellColumn(r),n=this.getCellRow(r)}else t=this.props.column,n=this.props.row;this.props.onCellDropped(wo(e,n,t))}}]),o}(W.Component);function fi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function gi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fi(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var mi=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){return a(this,o),r.call(this,e,!1)}return u(o,[{key:"render",value:function(){return W.createElement("div",{className:this.getAdditionalClasses("".concat(Ee.DROP_ZONE_LINE_CLASS," ").concat(this.props.dropZoneCssClassName)),"aria-hidden":!0,style:gi({height:this.props.height?this.props.height:"",left:this.props.left?this.props.left:0,top:this.props.top?this.props.top:0,width:this.props.width?this.props.width:""},this.props.style),onDragEnter:this.boundOnDragEnterDropArea,onDragOver:this.boundOnDragOverDropArea,onDragLeave:this.boundOnDragLeaveDropArea,onDrop:this.boundOnDropDropArea})}}]),o}(pi);var vi=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"render",value:function(){return W.createElement(mi,{classKey:this.props.classKey,dropZoneCssClassName:Ee.DROP_ZONE_COLUMN_CLASS,tableSizes:this.props.tableSizes,column:this.props.column,row:-1,height:"".concat(this.props.tableSizes.tableContentHeight-this.props.top,"px"),left:this.props.left,top:this.props.top,style:this.props.style,onCellDropped:this.props.onCellDropped})}}]),o}(W.Component);var yi,bi=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"render",value:function(){return W.createElement(mi,{classKey:this.props.classKey,dropZoneCssClassName:Ee.DROP_ZONE_ROW_CLASS,tableSizes:this.props.tableSizes,column:-1,row:this.props.row,left:this.props.left,top:this.props.top,width:"".concat(this.props.tableSizes.tableContentWidth-this.props.left,"px"),style:this.props.style,onCellDropped:this.props.onCellDropped})}}]),o}(W.Component);!function(e){e.Column="Column",e.Row="Row"}(yi||(yi={}));var Ci=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){return a(this,o),r.call(this,e,!0)}return u(o,[{key:"getCellHtml",value:function(){return this.cellElement||(this.cellElement=document.querySelector("[data-tablecol='".concat(this.props.column,"'][data-tablerow='").concat(this.props.row,"']"))),this.cellElement}},{key:"onDragEnterDropArea",value:function(e){di(X(o.prototype),"onDragEnterDropArea",this).call(this,e),go(this.getCellHtml())}},{key:"onDragLeaveDropArea",value:function(e){di(X(o.prototype),"onDragLeaveDropArea",this).call(this,e),e.isPropagationStopped()||mo(this.getCellHtml())}},{key:"onDropDropArea",value:function(e){di(X(o.prototype),"onDropDropArea",this).call(this,e),mo(this.getCellHtml())}},{key:"render",value:function(){var e=this.props.left?this.props.left:0,t=this.props.top?this.props.top:0,n=0===this.props.column&&this.props.index0ColumnDropZoneShown||0===this.props.row&&this.props.index0RowDropZoneShown,r=this.props.height?this.props.height:"",o=this.props.width?this.props.width:"",i=this.getAdditionalClasses(Ee.DROP_ZONE_CELL_BACKGROUND_CLASS,n),l=this.props.direction===yi.Column?"".concat(this.props.tableSizes.tableContentHeight-this.props.top,"px"):r,s=this.props.direction===yi.Row?"".concat(this.props.tableSizes.tableContentWidth-this.props.left,"px"):o,a=this.getAdditionalClasses(Ee.DROP_ZONE_AREA_FOREGROUND_CLASS,n);return W.createElement(W.Fragment,null,W.createElement("div",{className:i,"aria-hidden":!0,style:{height:r,left:e,top:t,width:o}}),W.createElement("div",{className:a,"aria-hidden":!0,style:{height:l,left:e,top:t,width:s},onDragEnter:this.boundOnDragEnterDropArea,onDragOver:this.boundOnDragOverDropArea,onDragLeave:this.boundOnDragLeaveDropArea,onDrop:this.boundOnDropDropArea}))}}]),o}(pi);var wi=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){var t;return a(this,o),s(V(t=r.call(this,e,!0)),"lastEventClientX",Number.NaN),s(V(t),"lastEventClientY",Number.NaN),t}return u(o,[{key:"onLeaveLastCellElement",value:function(){var e,t;this.lastCellElement&&(null===(e=(t=this.props).onCellDragLeave)||void 0===e||e.call(t,Co(this.getCellRow(this.lastCellElement),this.getCellColumn(this.lastCellElement))))}},{key:"onDragOverDropArea",value:function(e){var t,n;if(e.clientX!==this.lastEventClientX||e.clientY!==this.lastEventClientY){this.lastEventClientX=e.clientX,this.lastEventClientY=e.clientY;var r=this.lastCellElementBoundingRect;if(r&&e.clientX>=r.left&&e.clientX<r.right&&e.clientY>=r.top&&e.clientY<r.bottom)e.preventDefault();else{this.onLeaveLastCellElement(),di(X(o.prototype),"onDragOverDropArea",this).call(this,e);var i=this.getCellAtCursor(e);this.updateCellElement(i),null===(t=(n=this.props).onCellDragEnter)||void 0===t||t.call(n,Co(this.getCellRow(i),this.getCellColumn(i)))}}else e.preventDefault()}},{key:"onDragLeaveDropArea",value:function(e){this.onLeaveLastCellElement(),di(X(o.prototype),"onDragLeaveDropArea",this).call(this,e),this.updateCellElement()}},{key:"onDropDropArea",value:function(e){di(X(o.prototype),"onDropDropArea",this).call(this,e),this.updateCellElement()}},{key:"setLastCellElement",value:function(e){this.lastCellElement=e,this.lastCellElementBackgroundColor=null==e?void 0:e.style.backgroundColor,this.lastCellElementBoundingRect=null==e?void 0:e.getBoundingClientRect()}},{key:"updateCellElement",value:function(e){e!==this.lastCellElement&&(this.lastCellElement&&(mo(this.lastCellElement),this.lastCellElementBackgroundColor&&(this.lastCellElement.style.backgroundColor=this.lastCellElementBackgroundColor)),this.setLastCellElement(e),e&&(go(e),e.style.backgroundColor=""))}},{key:"render",value:function(){var e=0===this.props.column&&this.props.index0ColumnDropZoneShown||0===this.props.row&&this.props.index0RowDropZoneShown,t=this.getAdditionalClasses(Ee.DROP_ZONE_AREA_FOREGROUND_CLASS,e);return W.createElement("div",{className:t,"aria-hidden":!0,style:{height:this.props.height,left:this.props.left,top:this.props.top,width:this.props.width},onDragEnter:this.onDragEnterDropArea.bind(this),onDragOver:this.onDragOverDropArea.bind(this),onDragLeave:this.onDragLeaveDropArea.bind(this),onDrop:this.onDropDropArea.bind(this)})}}]),o}(pi);function Si(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=X(e);if(t){var o=X(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Z(this,n)}}function Ri(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ti(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ti(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}function Ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ei="0.625rem",Di="0.25rem",ki=function(){function e(t){a(this,e);var n=t.parentFreezeSection.tableSizes.borderSize,r=t.parentFreezeSection.tableSizes.coordinateOffset;this.columnPositions=this.initializePositions(r-t.parentFreezeSection.left,t.parentFreezeSection.tableSizes.notRenderedWidthOnTheLeft,t.columns,function(e){return e.width}),this.rowPositions=this.initializePositions(r-t.parentFreezeSection.top,t.parentFreezeSection.tableSizes.notRenderedHeightTop,t.rows,function(e){return e.height+n})}return u(e,[{key:"initializePositions",value:function(e,t,n,r){var o=new Map,i=e;o.set(0,i);for(var l=0;l<n.length;++l){var s=n[l];void 0!==s&&(1===o.size&&l>0&&(i+=t,o.set(l,i)),i+=r(s),o.set(l+1,i))}return o}}]),e}(),Oi=function e(t,n,r,o,i,l,s,c){a(this,e),this.columnFrom=t,this.columnTo=n,this.rowFrom=r,this.rowTo=o,this.left=i,this.top=l,this.height=s,this.width=c,this.key=zt("area-drop-zone-".concat(r,"-").concat(t,"-").concat(o,"-").concat(n))},xi=function(){function e(t,n){var r,o,i,l,c;a(this,e),s(this,"dropZonesElements",[]),this.cellPositions=n,this.areas=null===(r=t.userData)||void 0===r?void 0:r.areas,this.freezeSectionColumnStart=null!==(o=t.freezeSectionColumnStart)&&void 0!==o?o:0,this.freezeSectionColumnEnd=null!==(i=t.freezeSectionColumnEnd)&&void 0!==i?i:Number.MAX_SAFE_INTEGER,this.freezeSectionRowStart=null!==(l=t.freezeSectionRowStart)&&void 0!==l?l:0,this.freezeSectionRowEnd=null!==(c=t.freezeSectionRowEnd)&&void 0!==c?c:Number.MAX_SAFE_INTEGER,this.tableSizes=t.parentFreezeSection.tableSizes}return u(e,[{key:"getLineDropZonePosition",value:function(e,t,n){var r=e.get(t);return void 0===r?n:r}},{key:"getLineDropZonePositionTo",value:function(e,t,n){var r;return void 0===t||t<0?n:null!==(r=this.getLineDropZonePosition(e,t+1))&&void 0!==r?r:n}},{key:"initialize",value:function(){if(void 0===this.areas)return this;var e,t=Ri(this.areas);try{for(t.s();!(e=t.n()).done;){var n,r,o=e.value;if(!(o.columnFrom>this.freezeSectionColumnEnd||(null!==(n=o.columnTo)&&void 0!==n?n:Number.MAX_SAFE_INTEGER)<this.freezeSectionColumnStart||o.rowFrom>this.freezeSectionRowEnd||(null!==(r=o.rowTo)&&void 0!==r?r:Number.MAX_SAFE_INTEGER)<this.freezeSectionRowStart)){var i=this.getLineDropZonePosition(this.cellPositions.columnPositions,o.columnFrom),l=this.getLineDropZonePosition(this.cellPositions.rowPositions,o.rowFrom);if(void 0!==i&&void 0!==l){var s=this.getLineDropZonePositionTo(this.cellPositions.columnPositions,o.columnTo,this.tableSizes.tableContentWidth),a=this.getLineDropZonePositionTo(this.cellPositions.rowPositions,o.rowTo,this.tableSizes.tableContentHeight),c=s-i,u=a-l;this.dropZonesElements.push(new Oi(o.columnFrom,o.columnTo,o.rowFrom,o.rowTo,i,l,u,c))}}}}catch(e){t.e(e)}finally{t.f()}return this}}]),e}(),Ai=function e(t,n,r,o,i,l,s,c){a(this,e),this.cell=t,this.column=n,this.row=r,this.left=o,this.top=i,this.height=l,this.width=s,this.direction=c,this.key=zt("cell-drop-zone-".concat(r,"-").concat(n))},Li=function(){function e(t,n){var r,o,i,l,c;a(this,e),s(this,"dropZonesElements",[]),this.cellPositions=n,this.cells=null===(r=t.userData)||void 0===r?void 0:r.cells,this.columns=t.columns,this.rows=t.rows,this.freezeSectionColumnStart=null!==(o=t.freezeSectionColumnStart)&&void 0!==o?o:0,this.freezeSectionColumnEnd=null!==(i=t.freezeSectionColumnEnd)&&void 0!==i?i:Number.MAX_SAFE_INTEGER,this.freezeSectionRowStart=null!==(l=t.freezeSectionRowStart)&&void 0!==l?l:0,this.freezeSectionRowEnd=null!==(c=t.freezeSectionRowEnd)&&void 0!==c?c:Number.MAX_SAFE_INTEGER}return u(e,[{key:"initialize",value:function(){if(void 0===this.cells)return this;var e,t=this.cellPositions.columnPositions,n=this.cellPositions.rowPositions,r=Ri(this.cells);try{for(r.s();!(e=r.n()).done;){var o=e.value;if(!(o.direction!==yi.Row&&o.column<this.freezeSectionColumnStart||o.column>this.freezeSectionColumnEnd||o.direction!==yi.Column&&o.row<this.freezeSectionRowStart||o.row>this.freezeSectionRowEnd)){var i=t.get(o.column),l=n.get(o.row),s=this.columns[o.column],a=this.rows[o.row];if(void 0!==i&&void 0!==l&&s&&a){var c=s.width,u=a.height;this.dropZonesElements.push(new Ai(a.cells[o.column],o.column,o.row,i,l,u,c,o.direction))}}}}catch(e){r.e(e)}finally{r.f()}return this}}]),e}(),Ii=function e(t,n,r,o,i){a(this,e),s(this,"position2",-1),this.index=n,this.position1=r,this.drawStartIndex=o,this.style=i,this.key=zt("".concat(t,"-drop-zone-").concat(n))},Mi=function(){function e(t,n,r,o,i){var l;a(this,e),s(this,"dropZonesElements",[]),this.allPositions=t,this.userElements=n;var c=n;if(void 0!==r||void 0!==o){var u,h=null!=r?r:0,d=(null!=o?o:Number.MAX_SAFE_INTEGER-1)+1,p=(null!=i?i:Number.MAX_SAFE_INTEGER-1)+1;c=null===(u=c)||void 0===u?void 0:u.filter(function(e){return e.index>=h&&e.index<=d&&e.drawStartIndex<p})}this.indicesToShow=null===(l=c)||void 0===l?void 0:l.map(function(e){return e.index})}return u(e,[{key:"getUserElement",value:function(e){var t;return null===(t=this.userElements)||void 0===t?void 0:t.find(function(t){return t.index===e})}},{key:"initialize",value:function(e){var t,n=this;return null===(t=this.indicesToShow)||void 0===t||t.forEach(function(t){var r=n.allPositions.get(t);if(void 0!==r){var o,i=n.getUserElement(t),l={},s=!1,a=n.allPositions.get(t-1);if(void 0!==a){var c=r-a;c<48&&(s=!0,n.setBorderBefore(l,c/4))}var u=n.allPositions.get(t+1);if(void 0!==u){var h=u-r;h<48&&(s=!0,n.setBorderAfter(l,h/4))}s&&n.setBorderSize(l),n.dropZonesElements.push(new Ii(e,t,r,null!==(o=null==i?void 0:i.drawStartIndex)&&void 0!==o?o:0,l))}}),this}},{key:"setPosition2",value:function(e){this.dropZonesElements.forEach(function(t){var n;t.position2=null!==(n=e.get(t.drawStartIndex))&&void 0!==n?n:0})}}]),e}(),Pi=function(e){G(n,e);var t=Si(n);function n(e,r,o,i,l){return a(this,n),t.call(this,e,r,o,i,l)}return u(n,[{key:"initialize",value:function(){return di(X(n.prototype),"initialize",this).call(this,"column")}},{key:"setBorderAfter",value:function(e,t){var n="".concat(t,"px - ").concat(Di," / 2");e.borderRightWidth="calc(".concat(n,")")}},{key:"setBorderBefore",value:function(e,t){var n="".concat(t,"px - ").concat(Di," / 2");e.marginLeft="calc(".concat(-t,"px)"),e.borderLeftWidth="calc(".concat(n,")")}},{key:"setBorderSize",value:function(e){var t,n;e.width="calc(".concat(Di," + ").concat(null!==(t=e.borderLeftWidth)&&void 0!==t?t:Ei," + ").concat(null!==(n=e.borderRightWidth)&&void 0!==n?n:Ei,")")}}]),n}(Mi),Hi=function(e){G(n,e);var t=Si(n);function n(e,r,o,i,l){return a(this,n),t.call(this,e,r,o,i,l)}return u(n,[{key:"initialize",value:function(){return di(X(n.prototype),"initialize",this).call(this,"row")}},{key:"setBorderAfter",value:function(e,t){var n="".concat(t,"px - ").concat(Di," / 2");e.borderBottomWidth="calc(".concat(n,")")}},{key:"setBorderBefore",value:function(e,t){var n="".concat(t,"px - ").concat(Di," / 2");e.marginTop="calc(".concat(-t,"px)"),e.borderTopWidth="calc(".concat(n,")")}},{key:"setBorderSize",value:function(e){var t,n;e.height="calc(".concat(Di," + ").concat(null!==(t=e.borderTopWidth)&&void 0!==t?t:Ei," + ").concat(null!==(n=e.borderBottomWidth)&&void 0!==n?n:Ei,")")}}]),n}(Mi),_i=function(e){G(n,e);var t=Si(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"render",value:function(){var e,t,n=this,r=new ki(this.props),o=new xi(this.props,r).initialize(),i=new Li(this.props,r).initialize(),l=new Pi(r.columnPositions,null===(e=this.props.userData)||void 0===e?void 0:e.columns,this.props.freezeSectionColumnStart,this.props.freezeSectionColumnEnd,this.props.freezeSectionRowEnd).initialize(),s=new Hi(r.rowPositions,null===(t=this.props.userData)||void 0===t?void 0:t.rows,this.props.freezeSectionRowStart,this.props.freezeSectionRowEnd,this.props.freezeSectionColumnEnd).initialize();l.setPosition2(r.rowPositions),s.setPosition2(r.columnPositions);var a=!!l.getUserElement(0),c=!!s.getUserElement(0);return W.createElement("div",{className:"dropZones"},W.createElement("div",{style:{height:"".concat(this.props.parentFreezeSection.tableSizes.tableContentHeight,"px"),width:"".concat(this.props.parentFreezeSection.tableSizes.tableContentWidth,"px")}}),o.dropZonesElements.map(function(e){return W.createElement(wi,{key:e.key,classKey:e.key,tableSizes:n.props.parentFreezeSection.tableSizes,column:e.columnFrom,columnTo:e.columnTo,row:e.rowFrom,rowTo:e.rowTo,left:e.left,top:e.top,height:e.height,width:e.width,dragDropCache:n.props.dragDropCache,index0ColumnDropZoneShown:a,index0RowDropZoneShown:c,onCellDragEnter:n.props.onCellDragEnter,onCellDragLeave:n.props.onCellDragLeave,onCellDropped:n.props.onCellDropped})}),i.dropZonesElements.map(function(e){return W.createElement(Ci,{key:e.key,classKey:e.key,tableSizes:n.props.parentFreezeSection.tableSizes,cell:e.cell,column:e.column,row:e.row,left:e.left,top:e.top,height:e.height,width:e.width,direction:e.direction,dragDropCache:n.props.dragDropCache,index0ColumnDropZoneShown:a,index0RowDropZoneShown:c,onCellDropped:n.props.onCellDropped})}),s.dropZonesElements.map(function(e){return W.createElement(bi,{key:e.key,classKey:e.key,tableSizes:n.props.parentFreezeSection.tableSizes,row:e.index,top:e.position1,left:e.position2,style:e.style,onCellDropped:n.props.onCellDropped})}),l.dropZonesElements.map(function(e){return W.createElement(vi,{key:e.key,classKey:e.key,tableSizes:n.props.parentFreezeSection.tableSizes,column:e.index,left:e.position1,top:e.position2,style:e.style,onCellDropped:n.props.onCellDropped})}))}}]),n}(W.Component);var Ni=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){return a(this,o),r.call(this,e)}return u(o,[{key:"shouldComponentUpdate",value:function(e){return!(this.props.sectionId===e.sectionId&&this.props.top===e.top&&this.props.left===e.left&&this.props.width===e.width&&this.props.height===e.height&&this.props.maxHeight===e.maxHeight&&this.props.onCellDropped===e.onCellDropped&&jn(e.dragDropCache,this.props.dragDropCache)&&jn(e.htmlTable,this.props.htmlTable)&&jn(e.overlay,this.props.overlay)&&jn(e.tableSizes,this.props.tableSizes))}},{key:"render",value:function(){return W.createElement("div",{ref:this.props.innerRef,className:"freezeSection".concat(this.props.sectionId),style:{position:"absolute",top:this.props.top,left:this.props.left,width:this.props.width,height:this.props.height,boxSizing:"border-box",overflow:"hidden"}},!this.props.htmlTable.data.mobile&&this.props.htmlTable.data.dropZonesInfo&&this.props.onCellDropped&&W.createElement(_i,{columns:this.props.htmlTable.data.columnSettings,parentFreezeSection:this.props,rows:this.props.htmlTable.data.rows,userData:this.props.htmlTable.data.dropZonesInfo,freezeSectionColumnStart:this.props.overlay.freezeSectionStartCol,freezeSectionColumnEnd:this.props.overlay.freezeSectionEndCol,freezeSectionRowStart:this.props.overlay.freezeSectionStartRow,freezeSectionRowEnd:this.props.overlay.freezeSectionEndRow,dragDropCache:this.props.dragDropCache,onCellDragEnter:this.props.onCellDragEnter,onCellDragLeave:this.props.onCellDragLeave,onCellDropped:this.props.onCellDropped}),W.createElement(Yo,this.props.htmlTable),W.createElement(hi,this.props.overlay),this.props.maxHeight>0&&W.createElement($o,{height:this.props.maxHeight}))}}]),o}(W.Component),zi=n(200);Oe()(zi.Z,{insert:"head",singleton:!1}),zi.Z.locals;var Bi,Fi=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){var t;return a(this,o),(t=r.call(this,e)).boundHandleResizeStart=t.handleResizeStart.bind(V(t)),t.boundHandleResizeTitle=t.handleResizeTitle.bind(V(t)),t.boundHandleResizeEnd=t.handleResizeEnd.bind(V(t)),t}return u(o,[{key:"handleResizeStart",value:function(e,t,n){n.textContent=De(this.props.resizingInfo.height),t.style.top=De(this.props.resizingInfo.height),t.setAttribute(Ne,"".concat(e.clientY)),this.initialTitleHeight=this.props.titleHeight,this.props.onTitleResizeStart()}},{key:"handleResizeTitle",value:function(e,t,n){var r=t.getAttribute(Ne);if(r){var o=this.props.titleHeight,i=o+(e.clientY-parseInt(r,10));i<this.props.minimumTitleHeight&&(i=this.props.minimumTitleHeight);var l=this.props.tableContainerHeight+o;i>l&&(i=l),this.props.resizingInfo.height=i,this.props.resizingInfo.newHeight=i,t.style.top=De(i),n.textContent=De(i)}}},{key:"handleResizeEnd",value:function(){this.props.resizingInfo.newHeight!==this.initialTitleHeight&&this.props.onNewTitleHeight(this.props.resizingInfo.newHeight),this.props.onTitleResizeEnd()}},{key:"render",value:function(){return this.props.resizingInfo.height=this.props.titleHeight,this.props.resizingInfo.newHeight=this.props.titleHeight,W.createElement(ze,{resizerCssClassName:"titleResizer",resizeIndicatorCssClassName:"titleResizeIndicator",resizingInfo:this.props.resizingInfo,refResizer:this.props.refTitleResizer,onResizerDoubeClick:Te,onResizeStart:this.boundHandleResizeStart,onResizing:this.boundHandleResizeTitle,onResizeEnd:this.boundHandleResizeEnd})}}]),o}(W.Component),Wi=function(){function e(t,n){a(this,e),this.labelArray=[],this.cell=t,this.getTranslatedText=n,this.dataLockingNameMap=new Map,this.dataLockingNameMap.set(O.Locked,I.ariaCellLabelDataLockingLocked).set(O.Loading,I.ariaCellLabelDataLockingLoading).set(O.Mixed,I.ariaCellLabelDataLockingMixed).set(O.Unknown,I.ariaCellLabelDataLockingUnknown),this.cellTypeNameMap=new Map,this.cellTypeNameMap.set(E.Header,I.ariaCellLabelTypeHeader).set(E.Input,I.ariaCellLabelTypeInput).set(E.Chart,I.ariaCellLabelTypeChart).set(E.Unbooked,I.ariaCellLabelTypeUnbooked).set(E.Empty,I.ariaCellLabelTypeEmpty).set(E.Custom,I.ariaCellLabelTypeCustom).set(E.Comment,I.ariaCellLabelTypeComment).set(E.Image,I.ariaCellLabelTypeImage).set(E.Threshold,I.ariaCellLabelTypeThreshold),this.thresholdIconNameMap=new Map,this.thresholdIconNameMap.set(k.Good,I.ariaThresholdIconGood).set(k.Warning,I.ariaThresholdIconWarning).set(k.Alert,I.ariaThresholdIconAlert).set(k.Diamond,I.ariaThresholdIconDiamond)}return u(e,[{key:"addDefaultAttributes",value:function(){var e=Xi(this.getTranslatedText,I.ariaCellLabelLocked);if(this.labelArray.push(this.cell.locked?e:""),this.cell.dataLocking&&this.cell.dataLocking.type!==O.NoIcon){var t=this.dataLockingNameMap.get(this.cell.dataLocking.type);t&&this.labelArray.push(Xi(this.getTranslatedText,t))}var n=Xi(this.getTranslatedText,I.ariaCellLabelEditable);return this.labelArray.push(Zi(this.cell)?n:""),this}},{key:"addCellValueAttribute",value:function(){return this.labelArray.push(this.cell.formatted),this}},{key:"addCellTypeAttribute",value:function(){if(this.cellTypeNameMap.has(this.cell.cellType)){var e=this.cellTypeNameMap.get(this.cell.cellType);e&&this.labelArray.push(Xi(this.getTranslatedText,e))}return this}},{key:"addCustomAttribute",value:function(e){return this.labelArray.push(e),this}},{key:"addBookedValueAttribute",value:function(){var e=Xi(this.getTranslatedText,I.ariaCellLabelNoBookedValue);return this.labelArray.push(null===this.cell.plain?e:""),this}},{key:"addCellChartCoverageAttribute",value:function(e){if(!e||!this.cell.cellChart)return this;var t=Number(this.cell.plain),n=e[this.cell.cellChart.memberId],r=0;r=n.min>=0?t/n.max:n.max>0?1/(Math.abs(n.min)+Math.abs(n.max))*Math.abs(t):Math.abs(t/n.min),r*=100;var o=Xi(this.getTranslatedText,I.ariaChartCellDescription,[r.toFixed()]);return this.labelArray.push(o),this}},{key:"addThresholdTypeAttribute",value:function(){var e,t=null===(e=this.cell.style)||void 0===e?void 0:e.thresholdIconType;if(!t)return this;var n=this.thresholdIconNameMap.get(t);if(n){var r=Xi(this.getTranslatedText,n),o=Xi(this.getTranslatedText,I.ariaCellLabelThresholdIcon,[r]);this.labelArray.push(o)}return this}},{key:"addMergedCellAttribute",value:function(){var e,t,n=null===(e=this.cell.merged)||void 0===e?void 0:e.columns,r=null===(t=this.cell.merged)||void 0===t?void 0:t.rows,o="";return r&&n?o=Xi(this.getTranslatedText,I.ariaCellLabelMergedColsRows,[n+1,r+1]):r&&!n?o=Xi(this.getTranslatedText,I.ariaCellLabelMergedRows,[r+1]):!r&&n&&(o=Xi(this.getTranslatedText,I.ariaCellLabelMergedCols,[n+1])),this.labelArray.push(o),this}},{key:"get",value:function(){var e=this.labelArray.filter(String).join(", ");return e.length>0?e:void 0}}]),e}(),ji="aria-keyboardshortcut-celledit",Vi="aria-keyboardshortcut-drillicon-expand",Ui="aria-keyboardshortcut-drillicon-collapse",Gi="aria-keyboardshortcut-triggerhyperlink",Ki=(s(Bi={},I.ariaEditShortcutAnnouncement,"Press F2 to edit"),s(Bi,I.ariaExpandShortcutAnnouncement,"Press F4 to expand"),s(Bi,I.ariaCollapseShortcutAnnouncement,"Press F4 to collapse"),s(Bi,I.ariaHyperlinkShortcutAnnouncement,"Press the spacebar to trigger the hyperlink"),s(Bi,I.ariaCellLabelLocked,"locked cell"),s(Bi,I.ariaCellLabelDataLockingLocked,"data locking: locked"),s(Bi,I.ariaCellLabelDataLockingLoading,"data locking: loading"),s(Bi,I.ariaCellLabelDataLockingMixed,"data locking: mixed"),s(Bi,I.ariaCellLabelDataLockingUnknown,"data locking: unknown"),s(Bi,I.ariaCellLabelEditable,"cell is editable"),s(Bi,I.ariaCellLabelTypeHeader,"Header cell"),s(Bi,I.ariaCellLabelTypeInput,"Input cell"),s(Bi,I.ariaCellLabelTypeChart,"Chart cell"),s(Bi,I.ariaCellLabelTypeUnbooked,"Unbooked cell"),s(Bi,I.ariaCellLabelTypeEmpty,"Empty cell"),s(Bi,I.ariaCellLabelTypeCustom,"Custom cell"),s(Bi,I.ariaCellLabelTypeComment,"Comment cell"),s(Bi,I.ariaCellLabelTypeImage,"Image cell"),s(Bi,I.ariaCellLabelTypeThreshold,"Threshold cell"),s(Bi,I.ariaCellLabelNoBookedValue,"cell has no booked value"),s(Bi,I.ariaCellLabelMergedColsRows,"Merged over {0} columns and {1} rows"),s(Bi,I.ariaCellLabelMergedCols,"Merged over {0} columns"),s(Bi,I.ariaCellLabelMergedRows,"Merged over {0} rows"),s(Bi,I.ariaCellLabelBarChart,"Bar chart cell"),s(Bi,I.ariaCellLabelVarianceBarChart,"Variance bar chart cell"),s(Bi,I.ariaCellLabelPinChart,"Pin chart cell"),s(Bi,I.ariaCellLabelEmpty,"Empty"),s(Bi,I.ariaChartCellDescription,"chart covering {0}% of the available space"),s(Bi,I.ariaCellLabelThresholdIcon,"threshold icon: {0}"),s(Bi,I.ariaThresholdIconGood,"square"),s(Bi,I.ariaThresholdIconWarning,"triangle"),s(Bi,I.ariaThresholdIconAlert,"circle"),s(Bi,I.ariaThresholdIconDiamond,"diamond"),Bi);function Zi(e){return e.editable||e.cellType===E.Comment}function Xi(e,t,n){var r=null==e?void 0:e(t,n);return r&&r!==t?r:function(e,t){var n=e||"";if(t)for(var r=0;r<t.length;r++)n=n.replace("{".concat(r,"}"),t[r].toString());return n}(Ki[t],n)}var qi,Yi,$i=function(){function e(t){var n=this;a(this,e),this.getTranslatedText=t;var r=function(e){return n.getAriaLabelForDimensionMemberCell(e.cell,e.tableData.rows)},o=function(e){return n.getAriaLabelWithoutCellValue(e.cell)};this.chartTypeNameMap=new Map,this.chartTypeNameMap.set(L.Bar,I.ariaCellLabelBarChart).set(L.VarianceBar,I.ariaCellLabelVarianceBarChart).set(L.VariancePin,I.ariaCellLabelPinChart),this.cellTypeMap=(new Map).set(E.ColDimMember,r).set(E.RowDimMember,r).set(E.AttributeColDimMember,r).set(E.AttributeRowDimMember,r).set(E.Header,function(e){return n.getAriaLabelForHeaderCell(e.cell)}).set(E.Unbooked,o).set(E.Image,o).set(E.Empty,o).set(E.EmptyAxisRowHeader,function(){return n.getAriaLabelForEmptyCell()}).set(E.EmptyAxisColumnHeader,function(){return n.getAriaLabelForEmptyCell()}).set(E.Value,function(e){return n.getAriaLabelForValueCell(e.cell)}).set(E.Custom,function(e){return n.getAriaLabelForCustomCell(e.cell)}).set(E.Marquee,function(){}).set(E.ColumnCoordinate,function(){}).set(E.RowCoordinate,function(){}).set(E.CoordinateCorner,function(){}).set(E.ColumnCoordinateSelectedDesignMode,function(){}).set(E.RowCoordinateSelectedDesignMode,function(){}).set(E.ColumnCoordinateSelectedViewMode,function(){}).set(E.RowCoordinateSelectedViewMode,function(){}).set(E.MergedDummyCell,function(){}).set(E.Title,function(){}).set(E.Threshold,function(e){return n.getAriaLabelThresholdCell(e.cell)}).set(E.Chart,function(e){return n.getAriaLabelChartCell(e.cell,e.tableData.cellChartData)})}return u(e,[{key:"getAriaLabelForCell",value:function(e){var t=this.cellTypeMap.get(e.cell.cellType);return t?t(e):this.getAriaLabelForDefaultCell(e.cell)}},{key:"getAriaLabelForDefaultCell",value:function(e){return new Wi(e,this.getTranslatedText).addCellTypeAttribute().addCellValueAttribute().addDefaultAttributes().get()}},{key:"getAriaLabelForDimensionMemberCell",value:function(e,t){var n,r;if(""===e.formatted&&void 0!==e.refRow&&void 0!==e.refCol)return null===(n=t[e.refRow])||void 0===n||null===(r=n.cells[e.refCol])||void 0===r?void 0:r.formatted}},{key:"getAriaLabelChartCell",value:function(e,t){var n,r;if(null!==(n=e.cellChart)&&void 0!==n&&n.chartType){var o,i=this.chartTypeNameMap.get(null===(o=e.cellChart)||void 0===o?void 0:o.chartType);i&&(r=Xi(this.getTranslatedText,i))}return r=r||Xi(this.getTranslatedText,I.ariaCellLabelTypeChart),new Wi(e,this.getTranslatedText).addCustomAttribute(r).addCellValueAttribute().addCellChartCoverageAttribute(t).addDefaultAttributes().addBookedValueAttribute().get()}},{key:"getAriaLabelWithoutCellValue",value:function(e){return new Wi(e,this.getTranslatedText).addCellTypeAttribute().addDefaultAttributes().get()}},{key:"getAriaLabelForEmptyCell",value:function(){return Xi(this.getTranslatedText,I.ariaCellLabelEmpty)}},{key:"getAriaLabelForValueCell",value:function(e){return new Wi(e,this.getTranslatedText).addCellValueAttribute().addDefaultAttributes().addBookedValueAttribute().get()}},{key:"getAriaLabelForHeaderCell",value:function(e){return new Wi(e,this.getTranslatedText).addCellValueAttribute().addCellTypeAttribute().get()}},{key:"getAriaLabelForCustomCell",value:function(e){return new Wi(e,this.getTranslatedText).addCellTypeAttribute().addMergedCellAttribute().addCellValueAttribute().addDefaultAttributes().get()}},{key:"getAriaLabelThresholdCell",value:function(e){return new Wi(e,this.getTranslatedText).addCellTypeAttribute().addThresholdTypeAttribute().addCellValueAttribute().addDefaultAttributes().get()}},{key:"getAriaDescribedByForCell",value:function(e){var t=[];Zi(e)&&t.push(ji),e.showDrillIcon&&t.push(e.expanded?Ui:Vi),e.showHyperlink&&t.push(Gi);var n=t.join(" ");return n.length>0?n:void 0}}]),e}();function Qi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qi(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}!function(e){e.Wrapper="titleWrapper",e.Title="sapReportEngineTitle",e.Subtitle="sapReportEngineSubtitle",e.TokenContainer="sapReportEngineTokenContainer"}(qi||(qi={})),function(e){e.DatasetIcon="sapReportEngineDatasetIcon",e.Subtitle="sapReportEngineSubtitle",e.Notifictaion="sapReportEngineNotificationIcon"}(Yi||(Yi={}));var el=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e){var t;return a(this,o),s(V(t=r.call(this,e)),"keyCounter",0),t.resizingInfo={left:0,top:0,height:0,width:0,col:0,row:0,newHeight:0,newWidth:0,offsetLeft:0,offsetTop:0,scrollOffsetLeft:0,scrollOffsetTop:0},t.boundHandleTitleResizeStart=t.handleTitleResizeStart.bind(V(t)),t.boundHandleTitleResizeEnd=t.handleTitleResizeEnd.bind(V(t)),t.boundHandleNewTitleHeight=t.handleNewTitleHeight.bind(V(t)),t.boundHandleDoubleClickEvent=t.handleDoubleClick.bind(V(t)),t.boundHandleMouseDownEvent=t.handleMouseDown.bind(V(t)),t.boundHandleMouseDownTokenEvent=t.handleMouseDownToken.bind(V(t)),t.boundHandleMouseOverEvent=t.handleMouseOver.bind(V(t)),t.boundHandleContextMenu=t.handleContextMenu.bind(V(t)),t.refTitleContainer=W.createRef(),t}return u(o,[{key:"componentDidMount",value:function(){this.refTitleContainer.current&&this.refTitleContainer.current.addEventListener("wheel",this.handleOnWheelEvent.bind(this))}},{key:"shouldComponentUpdate",value:function(e){return!(this.props.selected===e.selected&&this.props.designMode===e.designMode&&jn(e.fontOverride,this.props.fontOverride)&&jn(e.title,this.props.title)&&this.props.tableContainerHeight===e.tableContainerHeight&&this.props.titleHeight===e.titleHeight)}},{key:"handleTitleResizeStart",value:function(){this.props.resizingTitleStart()}},{key:"handleTitleResizeEnd",value:function(){this.props.resizingTitleEnd()}},{key:"handleNewTitleHeight",value:function(e){this.props.setNewTitleHeight(e)}},{key:"render",value:function(){var e=this,t=this.props.title.subtitleVisible||this.props.title.detailsVisible,n=this.getStyle(),r=this.props.title.titleChunks;return W.createElement("div",{style:Ji(Ji({},n),{},{minHeight:this.props.title.titleStyle.height?"".concat(this.props.title.titleStyle.height,"px"):void 0,width:"100%",borderColor:this.getBorderColor()}),className:this.getClassList(),onMouseDown:this.boundHandleMouseDownEvent,onDoubleClick:this.boundHandleDoubleClickEvent,onContextMenu:this.boundHandleContextMenu,ref:this.refTitleContainer,tabIndex:-1,"aria-describedby":this.props.title.editable?ji:void 0},this.renderLines(),this.props.title.titleVisible&&W.createElement("div",{id:"".concat(Se.TITLE_ID_PREFIX).concat(this.props.title.tableId),className:"sapReportEngineTitle",onDoubleClick:this.boundHandleDoubleClickEvent,tabIndex:0,ref:this.props.refTitleValue,editable:"".concat(this.props.title.editable),style:Ji(Ji({},this.getFontStyle(y.Title)),{},{minHeight:""===this.props.title.titleText.trim()?De(we.FONT_SIZE_TITLE):void 0})},r&&r.map(function(t){return e.renderTitleHTML(t,!0)})),this.props.title.tokenData&&t&&this.renderTitleHTML(this.props.title.tokenData,!1),W.createElement("div",{className:"titleEditor"}),this.props.designMode&&!this.props.devicePreview&&W.createElement("div",{className:"titleOverlay"}),this.props.resizeableTitle&&W.createElement(Fi,{refTitleResizer:this.props.refTitleResizer,onTitleResizeStart:this.boundHandleTitleResizeStart,onNewTitleHeight:this.boundHandleNewTitleHeight,onTitleResizeEnd:this.boundHandleTitleResizeEnd,resizingInfo:this.resizingInfo,tableContainerHeight:this.props.tableContainerHeight,titleHeight:this.props.titleHeight,minimumTitleHeight:this.props.title.titleStyle.minimumHeight}))}},{key:"renderTitleHTML",value:function(e,t){var n=this;if("string"==typeof e)return e;var r=e.classes.includes(qi.Subtitle),o=e.classes.includes(Yi.DatasetIcon),i=Ji(Ji(Ji(Ji({},this.convertToCamelCase(e.styles)),r?this.getFontStyle(y.Subtitle):{}),o?{color:this.getFontStyle(y.Subtitle).color}:{}),{},{justifyContent:e.classes.includes(qi.TokenContainer)?this.getStyle().alignItems:void 0}),l="".concat(this.props.title.tableId,"_title_").concat(e.tag,"_").concat(this.keyCounter++),s=e.tag,a=!1;this.props.title.editable&&(a=t||r);var c=[Yi.DatasetIcon,Yi.Notifictaion,Yi.Subtitle].some(function(t){return e.classes.includes(t)}),u=e.children;return W.createElement(s,Kn({key:l,style:i,className:e.classes.join(" "),onMouseDown:t?this.boundHandleMouseDownEvent:this.boundHandleMouseDownTokenEvent,onMouseMove:c?this.boundHandleMouseOverEvent:null,onMouseLeave:this.props.handler.onCellMouseLeave,onDoubleClick:a?this.boundHandleDoubleClickEvent:null},this.getAdditionalAttributes(e.attributes)),u&&u.map(function(e){return n.renderTitleHTML(e,t)}))}},{key:"getAdditionalAttributes",value:function(e){if(Object.keys(e).length>0){var t=["class","style"],n={};for(var r in e)t.includes(r)||(n[r]=e[r]);return n}return null}},{key:"convertToCamelCase",value:function(e){for(var t={},n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];t[o.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})]=e[o]}return t}},{key:"getClassList",value:function(){var e="".concat(pe.TITLE_WRAPPER_CLASS," dataRegionTitle");return this.props.selected&&(e+=" selected"),e}},{key:"getBorderColor",value:function(){return this.props.selected?this.props.designMode?Se.SELECTION_BORDER_COLOR_DESIGN:Se.SELECTION_BORDER_COLOR:Se.TITLE_BORDER_COLOR}},{key:"getFontStyle",value:function(e){var t=e===y.Title?this.props.title.titleStyle:this.props.title.subtitleStyle;return t?Ji({},t.font&&lr(t.font,this.props.fontOverride,e)):{}}},{key:"getStyle",value:function(){var e=this.props.title.titleStyle;return e?{backgroundColor:e.fillColor?e.fillColor:void 0,justifyContent:this.getVerticalAlignment(),alignItems:this.getHorizontalAlignment()}:{}}},{key:"getVerticalAlignment",value:function(){var e=this.props.title.titleStyle,t=e.alignment&&e.alignment.vertical;if(void 0!==t)switch(t){case g.Top:return"flex-start";case g.Middle:return"center";case g.Bottom:return"flex-end";default:return}}},{key:"getHorizontalAlignment",value:function(){var e=this.props.title.titleStyle,t=e.alignment&&e.alignment.horizontal;if(void 0!==t)switch(t){case m.Left:return"flex-start";case m.Center:return"center";case m.Right:return"flex-end";default:return}}},{key:"renderLines",value:function(){var e;return null!==(e=this.props.title.titleStyle)&&void 0!==e&&e.lines?W.createElement(Yn,{lines:this.props.title.titleStyle.lines}):null}},{key:"handleDoubleClick",value:function(){if(this.props.title.editable&&!this.props.devicePreview&&this.props.title.titleVisible){var e=this.props.refTitleValue.current;if(e&&this.props.handler.onCellEdit){var t={target:e,isReworkTitle:!0};this.props.handler.onCellEdit(t)}}}},{key:"handleMouseDownToken",value:function(e){if((e.currentTarget.classList.contains(qi.Subtitle)||e.currentTarget.classList.contains(qi.TokenContainer))&&this.props.handler.onTitleSelected(e),this.props.handler.onCellMouseDown){var t={regionkey:e.currentTarget.dataset?e.currentTarget.dataset.regionkey:null,tokenId:e.currentTarget.id,target:e.currentTarget,event:e.nativeEvent,col:this.props.title.column,row:this.props.title.row};this.props.handler.onCellMouseDown(t),e.stopPropagation()}}},{key:"handleMouseDown",value:function(e){if(this.props.handler.onTitleSelected(e),this.props.handler.onCellMouseDown){var t={regionkey:e.currentTarget.dataset?e.currentTarget.dataset.regionkey:null,tokenId:e.currentTarget.id,target:e.currentTarget,event:e.nativeEvent};this.props.handler.onCellMouseDown(t),e.stopPropagation()}}},{key:"handleContextMenu",value:function(e){this.props.handler.onContextMenu({isTitle:!0,event:e.nativeEvent,col:-1,row:-1,targetDescription:pe.TITLE_DESCRIPTION})}},{key:"handleMouseOver",value:function(e){if(this.props.handler.onCellMouseOver){var t=e.currentTarget.closest("div"),n={boundingClientRect:t?t.getBoundingClientRect():null,target:e.currentTarget,event:e.nativeEvent,getParameters:function(){return this},id:e.currentTarget.id,tokenId:e.currentTarget.id,regionkey:e.currentTarget.dataset?e.currentTarget.dataset.regionkey:null};this.props.handler.onCellMouseOver(n)}}},{key:"handleOnWheelEvent",value:function(e){e.preventDefault()}}]),o}(W.Component);var tl,nl=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"render",value:function(){return W.createElement("div",{"aria-hidden":!0,style:{display:"none"},id:"aria-describedby-texts"},W.createElement("span",{"aria-hidden":!0,id:ji},Xi(this.props.getTranslatedText,I.ariaEditShortcutAnnouncement)),W.createElement("span",{"aria-hidden":!0,id:Vi},Xi(this.props.getTranslatedText,I.ariaExpandShortcutAnnouncement)),W.createElement("span",{"aria-hidden":!0,id:Ui},Xi(this.props.getTranslatedText,I.ariaCollapseShortcutAnnouncement)),W.createElement("span",{"aria-hidden":!0,id:Gi},Xi(this.props.getTranslatedText,I.ariaHyperlinkShortcutAnnouncement)))}}]),o}(W.PureComponent);function rl(e,t){return ol.apply(this,arguments)}function ol(){return(ol=l(F().mark(function e(t,n){var r,o,i,l,s,a,c,u,h,d,p;return F().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.selectionContextType!==v.TitleRegion||!t.title){e.next=5;break}return e.next=4,navigator.clipboard.writeText(t.title.titleText);case 4:return e.abrupt("return");case 5:if(r=n.selectedRegions[0],1!==n.selectedRegions.length||!r||void 0!==r.cornerCol||void 0!==r.cornerRow){e.next=32;break}o=Mn(r),i=[],l=[],s=o.startRow;case 12:if(!(s<=o.endRow)){e.next=29;break}l=[],a=o.startCol;case 15:if(!(a<=o.endCol)){e.next=24;break}if(u=null===(c=t.rows[s])||void 0===c?void 0:c.cells[a]){e.next=19;break}return e.abrupt("break",24);case 19:u.cellType===E.Unbooked?l.push(" "):Q(u.cellType)?l.push(u.formatted):(h="","number"==typeof u.plain&&!isNaN(u.plain)||"string"==typeof u.plain&&!isNaN(parseFloat(u.plain))?(h="".concat(u.plain),t.numberSeparators&&(h=h.replace(/\./g,t.numberSeparators.decimal))):h=u.formatted,l.push(h)),l.push("\t");case 21:a++,e.next=15;break;case 24:d=l.join("").trimEnd(),i.push(d);case 26:s++,e.next=12;break;case 29:return p="".concat(i.join("\n"),"\n"),e.next=32,navigator.clipboard.writeText(p);case 32:e.next=36;break;case 34:e.prev=34,e.t0=e.catch(0);case 36:case"end":return e.stop()}},e,null,[[0,34]])}))).apply(this,arguments)}function il(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ll(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ll(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ll(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}!function(e){e[e.AddElement=0]="AddElement",e[e.RemoveElement=1]="RemoveElement"}(tl||(tl={}));var al=function(e){G(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function i(e,t,n){var o;a(this,i),s(V(o=r.call(this,e)),"tableFocusedFromInside",!1),s(V(o),"tableFocusedViaMouse",!1),s(V(o),"dragDropCache",void 0),o.refTitleResizer=W.createRef(),o.refRowResizer=W.createRef(),o.refColumnResizer=W.createRef(),o.refTableContainer=W.createRef(),o.refHtmlTableWrapper=W.createRef(),o.refTitleValue=W.createRef(),o.refTableRoot=W.createRef(),o.pasteInProgress=!1,o.ctrlAndAltPressed=!1,o.state=sl({hover:{hoverContextType:v.DataCell,doubleOverlay:!1},selection:{selectedRegions:[],selectionContextType:v.Widget},copyInProcess:!1},t),o.resizingInfo={left:0,top:0,height:0,width:0,col:0,row:0,newHeight:0,newWidth:0,offsetLeft:0,offsetTop:0,scrollOffsetLeft:0,scrollOffsetTop:0},o.boundHandleKeyDown=o.handleKeyDown.bind(V(o)),o.boundHandleKeyUp=o.handleKeyUp.bind(V(o)),o.boundHandleMouseDownOutside=o.handleMouseDownOutside.bind(V(o)),o.boundHandleMouseUpOutside=o.handleMouseUpOutside.bind(V(o)),o.boundHandleScroll=o.handleScroll.bind(V(o)),o.boundHandleCellDoubleClick=o.handleCellDoubleClick.bind(V(o)),o.boundHandleCellMouseDown=o.handleCellMouseDown.bind(V(o)),o.boundHandleCellMouseEnter=o.handleCellMouseEnter.bind(V(o)),o.boundHandleCellMouseUp=o.handleCellMouseUp.bind(V(o)),o.boundHandleCellMouseOver=o.handleCellMouseOver.bind(V(o)),o.boundHandleContextMenu=o.handleContextMenu.bind(V(o)),o.boundHandleOverlayClick=o.handleOverlayClick.bind(V(o)),o.boundHandleShowOverlay=o.handleShowOverlay.bind(V(o)),o.boundHandleHideOverlay=o.handleHideOverlay.bind(V(o)),o.boundHandleTitleClick=o.handleTitleClick.bind(V(o)),o.boundHandleTableMouseUp=o.handleTableMouseUp.bind(V(o)),o.boundHandleTableOnFocus=o.handleTableOnFocus.bind(V(o)),o.boundHandleClick=o.handleClick.bind(V(o)),o.boundHandleTableContainerMouseDown=o.handleTableContainerMouseDown.bind(V(o)),o.boundHandleCopyDraggerClick=o.handleCopyDraggerClick.bind(V(o)),o.boundHandleResizerDoubleClick=o.handleResizerDoubleClick.bind(V(o)),o.boundHandleRowResizeStart=o.handleRowResizeStart.bind(V(o)),o.boundHandleRowResizeEnd=o.handleRowResizeEnd.bind(V(o)),o.boundHandleNewRowHeight=o.handleNewRowHeight.bind(V(o)),o.boundHandleColumnResizeStart=o.handleColumnResizeStart.bind(V(o)),o.boundHandleColumnResizeEnd=o.handleColumnResizeEnd.bind(V(o)),o.boundHandleNewColumnWidth=o.handleNewColumnWidth.bind(V(o)),o.boundHandleNewTitleHeight=o.handleNewTitleHeight.bind(V(o)),o.boundHandleResizingTitleStart=o.handleTitleResizeStart.bind(V(o)),o.boundHandleResizingTitleEnd=o.handleTitleResizeEnd.bind(V(o)),o.boundHandleDrillIconClicked=o.handleDrillIconClicked.bind(V(o)),o.boundHandleCellIconClicked=o.handleCellIconClicked.bind(V(o)),o.boundHandleCellDragStarted=o.handleCellDragStarted.bind(V(o)),o.boundHandleCellDragEnded=o.handleCellDragEnded.bind(V(o)),o.boundHandleCellDragEnter=o.handleCellDragEnter.bind(V(o)),o.boundHandleCellDragLeave=o.handleCellDragLeave.bind(V(o)),o.boundHandleCellDropped=o.handleCellDropped.bind(V(o)),o.boundHandleTableOnMouseDown=o.handleTableMouseDown.bind(V(o)),o.updateScrollPosition.bind(V(o)),o.setSelectionArea.bind(V(o)),o.boundHandleTableRootContextMenuEvent=o.handleTableRootContextMenuEvent.bind(V(o)),o.scrollDragDirection=w.unset,o.resizing=b.None,o.active=!1,o.setFirstClickWithMultiSelect(!1),o.cancelKeyboardPressToOpenHyperlink=!1;var l=o.props.handler,c=l.onInternalReloadLimitReachedVertically,u=l.onInternalReloadLimitReachedHorizontally;return o.scrollReloadDispatcher=new Et(o.props.data.scrollPosition,{onInternalReloadLimitReachedVertically:c,onInternalReloadLimitReachedHorizontally:u},o.props.handler.storeScrollPosition),o.horizontalScrollDetector=new mt,o.scrollSynchronizer=o.props.data.mobile?new Tt:new Rt,o.autoScroll=(null==n?void 0:n.autoScroll)||new ct(o.setScrollTop.bind(V(o)),o.setScrollLeft.bind(V(o))),o}return u(i,[{key:"componentWillUnmount",value:function(){this.removeEventListeners()}},{key:"componentDidMount",value:function(){this.refTableContainer.current&&(this.refTableContainer.current.addEventListener("wheel",this.handleDefaultWheelScroll.bind(this)),this.applyInitialScrollPosition()),this.props.handler.onRenderComplete&&this.props.handler.onRenderComplete(this.refTableContainer),this.updateResizer(0,this.props.data.lastRowIndex)}},{key:"applyInitialScrollPosition",value:function(){0!==this.props.data.scrollPosition.scrollTop&&this.setScrollTop(this.props.data.scrollPosition.scrollTop),0!==this.props.data.scrollPosition.scrollLeft&&this.setScrollLeft(this.props.data.scrollPosition.scrollLeft)}},{key:"addEventListeners",value:function(){var e,t;this.removeEventListeners(),null===(e=this.refTableRoot.current)||void 0===e||e.addEventListener("keydown",this.boundHandleKeyDown),null===(t=this.refTableRoot.current)||void 0===t||t.addEventListener("keyup",this.boundHandleKeyUp),document.addEventListener("mousedown",this.boundHandleMouseDownOutside,!0),document.addEventListener("mouseup",this.boundHandleMouseUpOutside)}},{key:"removeEventListeners",value:function(){var e,t;null===(e=this.refTableRoot.current)||void 0===e||e.removeEventListener("keydown",this.boundHandleKeyDown),null===(t=this.refTableRoot.current)||void 0===t||t.removeEventListener("keyup",this.boundHandleKeyUp),document.removeEventListener("mousedown",this.boundHandleMouseDownOutside,!0),document.removeEventListener("mouseup",this.boundHandleMouseUpOutside)}},{key:"handleDefaultWheelScroll",value:function(e){if(this.horizontalScrollDetector.isHorizontalScroll(e.deltaX))e.preventDefault();else{var t=this.scrollSynchronizer.isScrolledToTop()&&e.deltaY<0,n=this.props.tableSizes.maxScrollTop<=Math.ceil(this.scrollSynchronizer.getScrollTop())&&e.deltaY>0;t||n&&this.props.tableSizes.allRowsProcessed||e.preventDefault()}}},{key:"getScrollTop",value:function(){return this.scrollSynchronizer.getScrollTop()}},{key:"getScrollLeft",value:function(){return this.scrollSynchronizer.getScrollLeft()}},{key:"setScrollTop",value:function(e){this.scrollSynchronizer.setScrollTop(e)}},{key:"setScrollLeft",value:function(e){this.scrollSynchronizer.setScrollLeft(e)}},{key:"getLastScrollUpdateVertical",value:function(){return this.scrollReloadDispatcher.getLastScrollUpdateVertical()}},{key:"getLastScrollUpdateHorizontal",value:function(){return this.scrollReloadDispatcher.getLastScrollUpdateHorizontal()}},{key:"handleMouseDownOutside",value:function(e){var t,n=e.target;n&&null===(null===(t=n.closest(".".concat(qi.TokenContainer)))||void 0===t?void 0:t.parentNode)||Fn(n,this.props.data,this.props.handler.isTableOverlappedByOutsideElement)&&this.setActive(!1)}},{key:"handleMouseUpOutside",value:function(e){var t=e.target;this.props.selectionStrategy.getSelectionInProcess()&&Fn(t,this.props.data,this.props.handler.isTableOverlappedByOutsideElement)&&(this.handleCellMouseUp({event:e}),this.props.selectionStrategy.setSelectionInProcess(!1))}},{key:"handleTableOnFocus",value:function(e){this.isActive()||this.tableFocusedFromInside||(this.setActive(!0),this.selectFirstCellIfNecessary(e),this.props.handler.onTableFocused&&this.props.handler.onTableFocused()),this.tableFocusedFromInside=!1,this.tableFocusedViaMouse=!1}},{key:"selectFirstCellIfNecessary",value:function(e,t){var n,r=!e&&t;this.props.data.selectionMode!==_.None&&(null===(n=this.props.data.highlightedCells)||void 0===n||!n.length)&&(r||(null==e?void 0:e.target)===this.refTableRoot.current)&&!this.tableFocusedViaMouse&&(this.setSelectionArea({selectionArea:An(),singleSelection:!0,isKeyEvent:!1}),this.setScrollLeft(0),this.setScrollTop(0))}},{key:"handleTableMouseDown",value:function(){this.tableFocusedViaMouse=!0}},{key:"setSelected",value:function(e){var t=this;this.active&&this.firstClickWithMultiSelect||e||this.props.data.hasLADatapointSelection||this.props.data.addingDynamicTextToTitle||this.setState(function(e){var n={selectedRegions:[],selectionContextType:v.Widget};return Dn(n,t.props.handler),sl(sl({},e),{},{selection:n})}),!e&&this.props.selectionStrategy.getSelectionInProcess()&&Vt(this.props.data.id)&&(this.props.selectionStrategy.setSelectionInProcess(!1),document.activeElement.blur()),this.setActive(e)}},{key:"setActive",value:function(e){var t,n;this.active!==e&&(this.active=e,e?this.addEventListeners():(this.removeEventListeners(),this.firstClickWithMultiSelect&&(this.setFirstClickWithMultiSelect(!1),this.setSelected(!1))),null===(t=(n=this.props.handler).activeStateChanged)||void 0===t||t.call(n,e))}},{key:"isActive",value:function(){return this.active}},{key:"setFirstClickWithMultiSelect",value:function(e){this.firstClickWithMultiSelect=e}},{key:"handleKeyDown",value:function(e){var t,n,r=e.keyCode,o=pn(this.state.selection.selectionContextType),i=!!this.props.data.activeNewLineMemberCell,l=this.props.handler.getDataEntryInProgress&&this.props.handler.getDataEntryInProgress()&&(!function(e){return-1!==[ue.TAB,ue.ENTER].indexOf(e)}(r)||o);if(!i&&!l&&jt(this.active,this.props.data.id)&&!this.props.preventDefaultSelection){var s=en(e),a=e.shiftKey,c=e.altKey,u=In(this.state.selection),h=sl(sl({},u),{},{isCellChartSelection:!1});this.setState(sl(sl({},this.state),{},{copyInProcess:!1}));var d=null===(t=this.props.data.rows[u.startRow])||void 0===t?void 0:t.cells[u.startCol];switch(r){case ue.A:if(s){tn(e,this.props.data.allowKeyEventPropagation),nn(e,this.props.data.allowKeyEventDefault);var p=this.props.selectionStrategy.handleKeyDown("A",this.props.data,h,this.state.selection.selectionContextType,e);this.setSelectionArea(p)}break;case ue.ARROW_DOWN:if(tn(e,this.props.data.allowKeyEventPropagation),nn(e,this.props.data.allowKeyEventDefault),c)this.handleAltArrowKeyTriggerDrill(d,u,!(null!=d&&d.expanded),d.cellType===E.RowDimMember,e);else{var f=this.props.selectionStrategy.handleKeyDown("ARROWDOWN",this.props.data,h,this.state.selection.selectionContextType,e);s||a||!this.props.data.responsive&&this.props.data.editMode&&this.addOrRemoveTableElement(C.Row,tl.AddElement),this.triggerKeyboardShortcutCallback(u,e),this.setSelectionArea(f)}break;case ue.ARROW_LEFT:if(tn(e,this.props.data.allowKeyEventPropagation),nn(e,this.props.data.allowKeyEventDefault),c)this.handleAltArrowKeyTriggerDrill(d,u,null==d?void 0:d.expanded,d.cellType===E.ColDimMember,e);else{var g=this.props.selectionStrategy.handleKeyDown("ARROWLEFT",this.props.data,h,this.state.selection.selectionContextType,e);s||a||!this.props.data.responsive&&this.props.data.editMode&&this.addOrRemoveTableElement(C.Column,tl.RemoveElement),this.triggerKeyboardShortcutCallback(u,e),this.setSelectionArea(g)}break;case ue.ARROW_RIGHT:if(tn(e,this.props.data.allowKeyEventPropagation),nn(e,this.props.data.allowKeyEventDefault),c)this.handleAltArrowKeyTriggerDrill(d,u,!(null!=d&&d.expanded),d.cellType===E.ColDimMember,e);else{var m=this.props.selectionStrategy.handleKeyDown("ARROWRIGHT",this.props.data,h,this.state.selection.selectionContextType,e);s||a||!this.props.data.responsive&&this.props.data.editMode&&this.addOrRemoveTableElement(C.Column,tl.AddElement),this.triggerKeyboardShortcutCallback(u,e),this.setSelectionArea(m)}this.triggerKeyboardShortcutCallback(u,e);break;case ue.ARROW_UP:if(tn(e,this.props.data.allowKeyEventPropagation),nn(e,this.props.data.allowKeyEventDefault),c)this.handleAltArrowKeyTriggerDrill(d,u,null==d?void 0:d.expanded,d.cellType===E.RowDimMember,e);else{var y=this.props.selectionStrategy.handleKeyDown("ARROWUP",this.props.data,h,this.state.selection.selectionContextType,e);s||a||!this.props.data.responsive&&this.props.data.editMode&&this.addOrRemoveTableElement(C.Row,tl.RemoveElement),this.triggerKeyboardShortcutCallback(u,e),this.setSelectionArea(y)}break;case ue.PAGE_DOWN:nn(e,this.props.data.allowKeyEventDefault),this.handlePageDown(h,c);break;case ue.PAGE_UP:nn(e,this.props.data.allowKeyEventDefault),this.handlePageUp(h,c);break;case ue.HOME:nn(e,this.props.data.allowKeyEventDefault);var b=this.props.selectionStrategy.handleKeyDown("HOME",this.props.data,h,this.state.selection.selectionContextType,e);this.setSelectionArea(b);break;case ue.END:nn(e,this.props.data.allowKeyEventDefault);var w=this.props.selectionStrategy.handleKeyDown("END",this.props.data,h,this.state.selection.selectionContextType,e);this.setSelectionArea(w);break;case ue.ENTER:if(nn(e,this.props.data.allowKeyEventDefault),!s){var S=this.props.selectionStrategy.handleKeyDown("ENTER",this.props.data,h,this.state.selection.selectionContextType,e);this.setSelectionArea(S)}this.triggerKeyboardShortcutCallback(u,e);break;case ue.TAB:nn(e,this.props.data.allowKeyEventDefault);var R=this.props.selectionStrategy.handleKeyDown("TAB",this.props.data,h,this.state.selection.selectionContextType,e);this.setSelectionArea(R),this.triggerKeyboardShortcutCallback(u,e);break;case ue.SPACE:nn(e,this.props.data.allowKeyEventDefault),this.startKeyboardPressToOpenHyperlink=!0,(s&&!a||a&&!s)&&(this.startKeyboardPressToOpenHyperlink=!1);var T=this.props.selectionStrategy.handleKeyDown("SPACE",this.props.data,h,this.state.selection.selectionContextType,e);this.setSelectionArea(T);break;case ue.ESCAPE:nn(e,this.props.data.allowKeyEventDefault),tn(e,this.props.data.allowKeyEventPropagation),this.startKeyboardPressToOpenHyperlink?(this.cancelKeyboardPressToOpenHyperlink=!0,this.startKeyboardPressToOpenHyperlink=!1):this.setSelectionArea({clearSelection:!0,isKeyEvent:!0});break;case ue.INSERT:e.shiftKey&&(tn(e,this.props.data.allowKeyEventPropagation),this.triggerKeyboardShortcutCallback(u,e),this.pasteInProgress=!0);break;case ue.DELETE:case ue.BACKSPACE:case ue.B:case ue.C:case ue.I:case ue.U:case ue.V:case ue.X:if(!this.props.data.designMode&&function(e,t){return t&&-1!==Jt.indexOf(e)}(r,s)){tn(e,this.props.data.allowKeyEventPropagation),nn(e,this.props.data.allowKeyEventDefault);break}var D=s&&!e.altKey,k=D&&(r===ue.C||r===ue.X);k&&null!==(n=this.props.data.featureToggles)&&void 0!==n&&n.nativeCopyValue&&rl(this.props.data,this.state.selection),(D||ue.DELETE===r||ue.BACKSPACE===r)&&(tn(e,this.props.data.allowKeyEventPropagation),this.triggerKeyboardShortcutCallback(u,e)),D&&(k&&this.setState(sl(sl({},this.state),{},{copyInProcess:!0})),r===ue.V&&(this.pasteInProgress=!0));break;case ue.D:case ue.M:!(e.ctrlKey&&e.altKey||this.ctrlAndAltPressed)||e.shiftKey||e.metaKey||(tn(e,this.props.data.allowKeyEventPropagation),this.triggerKeyboardShortcutCallback(u,e));break;case ue.F2:var O=function(e,t,n){var r=Qt(e,t);return r?{row:n.row,col:n.column,target:r}:void 0}(this.props.data,u,d);a&&this.triggerKeyboardShortcutCallback(u,e),!O||a||s||this.handleCellDoubleClick(O,o);break;case ue.F4:this.handleAltArrowKeyTriggerDrill(d,u,!0,!0,e);break;case ue.NUMPAD_PLUS:case ue.PLUS:this.handleAltArrowKeyTriggerDrill(d,u,!(null!=d&&d.expanded),!0,e);break;case ue.NUMPAD_MINUS:case ue.SLASH:this.handleAltArrowKeyTriggerDrill(d,u,null==d?void 0:d.expanded,!0,e);break;case ue.SHIFT:this.startKeyboardPressToOpenHyperlink&&(this.cancelKeyboardPressToOpenHyperlink=!0,this.startKeyboardPressToOpenHyperlink=!1);break;case ue.CONTROL:if(this.ctrlAndAltPressed=e.altKey,fn(this.state.selection.selectionContextType,this.state.hover.hoverContextType))return void this.setState(sl(sl({},this.state),{},{hover:{hoverContextType:v.DataCell,doubleOverlay:!1}}));break;case ue.ALT:this.ctrlAndAltPressed=e.ctrlKey;break;case ue.F6:var x;this.isActive()&&(null!==(x=this.props.data.highlightedCells)&&void 0!==x&&x.length||this.setSelectionArea({clearSelection:!0,isKeyEvent:!0}),this.setActive(!1),this.triggerKeyboardShortcutCallback(u,e));break;case ue.F10:if(a){var A={col:o?-1:d.column,row:o?-1:d.row,event:e,targetDescription:o?pe.TITLE_DESCRIPTION:Ot(d.row,d.column),isTitle:o};this.handleContextMenu(A)}}var L=this.state.selection.selectedRegions.length>0||o,I=r>=ue.DIGIT_0&&r<=ue.Z||r>=ue.NUMPAD_0&&r<=ue.NUMPAD_SLASH||r>=ue.OPEN_BRACKET&&r<=ue.SINGLE_QUOTE;if(!s&&!this.ctrlAndAltPressed&&L&&I){var M={target:e.target,row:u.startRow,col:u.startCol,keyEvent:e};this.handleCellDoubleClick(M,o)}}}},{key:"triggerKeyboardShortcutCallback",value:function(e,t){this.props.handler.onKeyboardShortcut&&this.props.handler.onKeyboardShortcut({selectionArea:e,event:t})}},{key:"focusTableFromInside",value:function(){var e;this.tableFocusedFromInside=!0,null===(e=this.refTableRoot.current)||void 0===e||e.focus()}},{key:"focusTable",value:function(e){var t;this.setActive(!0),null===(t=this.refTableRoot.current)||void 0===t||t.focus({preventScroll:!0}),e&&this.selectFirstCellIfNecessary(null,!0)}},{key:"handleAltArrowKeyTriggerDrill",value:function(e,t,n,r,o){if(this.props.handler.onDrillIconClicked&&null!=e&&e.showDrillIcon&&n&&r){var i=function(e,t,n,r){var o=Qt(e,t);return o?{row:null==n?void 0:n.row,col:null==n?void 0:n.column,td:o,event:r,selectedCell:n?Ot(n.row,n.column):"",target:r.target}:{}}(this.props.data,t,e,o);this.props.handler.onDrillIconClicked(i)}}},{key:"handlePageDown",value:function(e,t){var n=this;t?this.props.handler.onAltPageUpDownKey(!0,e,function(e){n.setSelectionArea({selectionArea:e,singleSelection:!0,isKeyEvent:!0})}):this.props.handler.onPageUpDownKey(!0,e,function(e){n.setSelectionArea({selectionArea:e,singleSelection:!0,isKeyEvent:!0,scrollDirection:ft.PageDown})})}},{key:"handlePageUp",value:function(e,t){var n=this;t?this.props.handler.onAltPageUpDownKey(!1,e,function(e){n.setSelectionArea({selectionArea:e,singleSelection:!0,isKeyEvent:!0})}):this.props.handler.onPageUpDownKey(!1,e,function(e){n.setSelectionArea({selectionArea:e,singleSelection:!0,isKeyEvent:!0,scrollDirection:ft.PageUp})})}},{key:"handleKeyUp",value:function(e){var t=e.keyCode;switch(t){case ue.ALT:case ue.CONTROL:this.ctrlAndAltPressed=!1;break;case ue.DELETE:tn(e,this.props.data.allowKeyEventPropagation)}var n=en(e)&&!e.altKey;if(jt(this.active,this.props.data.id)&&this.props.handler.onKeyboardShortcut&&(t===ue.V&&n||t===ue.INSERT&&e.shiftKey||t===ue.WINDOWS||this.pasteInProgress)){if(t!==ue.V&&t!==ue.INSERT||(this.pasteInProgress=!1),pn(this.state.selection.selectionContextType))return;this.props.handler.onKeyboardShortcut({selectionArea:In(this.state.selection),event:e,keyUp:!0})}if(t===ue.SPACE){if(this.startKeyboardPressToOpenHyperlink&&!this.cancelKeyboardPressToOpenHyperlink){var r=In(this.state.selection);r.startRow===r.endRow&&r.startCol===r.endCol&&this.triggerHyperlinkIfNecessary(r.startRow,r.startCol),this.startKeyboardPressToOpenHyperlink=!1}this.cancelKeyboardPressToOpenHyperlink=!1}}},{key:"triggerHyperlinkIfNecessary",value:function(e,t){var n,r,o=null===(n=this.props.data.rows[e])||void 0===n?void 0:n.cells[t];if(this.props.handler.onCellLinkPressed&&null!=o&&o.showHyperlink){var i={row:(r=o).row,col:r.column,cellHyperlinkId:"cellHyperlink".concat(r.id)};this.props.handler.onCellLinkPressed(i)}}},{key:"addOrRemoveTableElement",value:function(e,t){var n=In(this.state.selection);if(e===C.Row){var r=this.props.data.rows.length-1;n.endRow===r&&t===tl.AddElement?this.props.handler.onAddRowOrColOnTheFly(C.Row):n.endRow===r&&t===tl.RemoveElement&&this.props.handler.onRemoveRowOrColOnTheFly(C.Row,r)}else{var o=this.props.data.columnSettings.length-1;n.endCol===o&&t===tl.AddElement?this.props.handler.onAddRowOrColOnTheFly(C.Column):n.endCol===o&&t===tl.RemoveElement&&this.props.handler.onRemoveRowOrColOnTheFly(C.Column,o)}}},{key:"setSelectionArea",value:function(e){var t=this;if(e.selectionArea){var n=sl({},e.selectionArea);if(n=Xt(n=function(e,t,n){var r=an({},e),o=t.length-1;r.startRow>o&&(r.startRow=o),r.endRow>o&&(r.endRow=o);var i=n-1;return r.startCol>i&&(r.startCol=i),r.endCol>i&&(r.endCol=i),r.startRow<0&&(r.startRow=0),r.startCol<0&&(r.startCol=0),r.endRow<0&&(r.endRow=0),r.endCol<0&&(r.endCol=0),r}(n,this.props.data.rows,this.props.data.columnSettings.length),this.props.data.rows),this.props.isPaginating&&e.scrollDirection&&(n=function(e,t,n,r){var o=an({},e),i=t.filter(function(e){return void 0!==e&&!e.fixed}),l=i[0].row,s=i[i.length-1].row,a=t[o.startRow],c=t[o.endRow],u=n===ft.PageDown||n===ft.PageUp;if(void 0===a||u)switch(n){case ft.Down:o.startRow=o.startRow>s?s:o.startRow<0?0:l;break;case ft.Up:o.startRow=o.startRow<0?0:o.startRow<l&&void 0!==r&&r>-1?r:o.startRow>s?s:l;break;case ft.PageDown:o.startRow=s;break;case ft.PageUp:o.startRow=void 0!==r&&r>-1?0:l}if(void 0===c||u)switch(n){case ft.Down:o.endRow=o.endRow>s?s:o.endRow<0?0:l;break;case ft.Up:o.endRow=o.endRow<0?0:o.endRow<l&&void 0!==r&&r>-1?r:o.endRow>s?s:l;break;case ft.PageDown:o.endRow=s;break;case ft.PageUp:o.endRow=void 0!==r&&r>-1?0:l}return o}(n,this.props.data.rows,e.scrollDirection,this.props.data.freezeEndRow)),e.singleSelection){this.setState(function(r){var o=[n],l=e.context||i.getSelectionAreaContext(o,t.props.data.rows),s=sl(sl({},r.selection),{},{selectedRegions:o,selectionContextType:l});return Dn(s,t.props.handler,e.isKeyEvent,e.isMouseUpEvent),e.event&&t.props.handler.onTableMouseUp&&t.props.handler.onTableMouseUp(e.event),e.fireSelectionUpdate&&t.props.handler.onCellSelected(),sl(sl({},r),{},{selection:s,hover:{hoverContextType:v.DataCell,doubleOverlay:!1},copyInProcess:!1})});var r=!!this.props.data.activeNewLineMemberCell,o=this.props.handler.getDataEntryInProgress&&this.props.handler.getDataEntryInProgress()&&e.triggeredByTabEnter;r||o||$t(this.props.data,n)}}e.clearSelection&&(this.setState(function(n){var r={selectedRegions:[],selectionContextType:v.Widget};return Dn(r,t.props.handler,e.isKeyEvent),e.event&&t.props.handler.onTableMouseUp&&t.props.handler.onTableMouseUp(e.event),sl(sl({},n),{},{selection:r,hover:{hoverContextType:v.DataCell,doubleOverlay:!1},copyInProcess:!1})}),this.focusTableFromInside());var l=[ft.PageDown,ft.PageUp];void 0!==e.scrollDirection&&-1===l.indexOf(e.scrollDirection)&&this.updateScrollPosition(e.scrollDirection)}},{key:"setNewRowHeight",value:function(e){var t,n,r,i=function(e){var t=[];if(!e||0===e.length)return t;var n,r=on(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t=Array.from(new Set([].concat(o(t),o(On(i)))))}}catch(e){r.e(e)}finally{r.f()}return t}(this.state.selection.selectedRegions);if(t=this.resizingInfo,n=this.props.data.rows,r=this.props.tableSizes.borderSize,t.newHeight>=Re.MIN_HEIGHT&&function(e,t,n){var r=t.newHeight,o=n[t.row];return!(0===r||!o)&&r!==o.height+e}(r,t,n)){var l=je(this.resizingInfo.row,e,i);this.props.handler.onRowHeightChanged(l)}}},{key:"setNewColumnWidth",value:function(e){var t,n,r=this.resizingInfo.col,i=function(e){var t=[];if(!e||0===e.length)return t;var n,r=on(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t=Array.from(new Set([].concat(o(t),o(kn(i)))))}}catch(e){r.e(e)}finally{r.f()}return t}(this.state.selection.selectedRegions);if(t=this.resizingInfo,n=this.props.data.columnSettings,t.newWidth>=Se.MINIMUM_COLUMN_SIZE&&function(e,t){var n=e.newWidth,r=t[e.col];return!(0===n||!r)&&n!==r.width}(t,n)){var l=je(r,e,i);this.props.handler.onColumnWidthChanged(l)}}},{key:"setNewTitleHeight",value:function(e){this.props.handler.onTitleHeightChanged(e)}},{key:"getHorizontalOffsetForColumnIndexExcludingFrozen",value:function(e){return this.props.data.columnSettings.slice(0,e).reduce(function(e,t){return e+t.width},0)-this.props.tableSizes.freezeWidth+this.props.tableSizes.coordinateOffset}},{key:"getVerticalOffsetForRowIndexExcludingFrozen",value:function(e){var t=this;return this.props.data.rows.slice(0,e).reduce(function(e,n){return!n||n.fixed?e:e+n.height+t.props.tableSizes.borderSize},this.props.tableSizes.notRenderedHeightTop)}},{key:"updateScrollPosition",value:function(e){var t;if(this.refTableContainer.current){var n=In(this.state.selection),r=n.endCol,o=n.endRow,i=void 0!==this.props.data.freezeEndCol&&this.props.data.freezeEndCol>=r,l=void 0!==this.props.data.freezeEndRow&&this.props.data.freezeEndRow>=o,s=this.getHorizontalOffsetForColumnIndexExcludingFrozen(r),a=this.getVerticalOffsetForRowIndexExcludingFrozen(o),c=this.getScrollLeft(),u=this.getScrollTop(),h=this.props.data.totalHeight+this.props.tableSizes.coordinateOffset,d=this.props.data.totalWidth+this.props.tableSizes.coordinateOffset,p=(null===(t=this.props.data.rows[o])||void 0===t?void 0:t.height)+this.props.tableSizes.borderSize,f=r-1===this.props.data.freezeEndCol,g=o-1===this.props.data.freezeEndRow;switch(e){case ft.Right:this.scrollDirectionRight(s,c,r,f,i);break;case ft.Down:this.scrollDirectionDown(a,u,p,g,l);break;case ft.Left:this.scrollDirectionLeft(s,c,r,i);break;case ft.Up:this.scrollDirectionUp(a,u,p,l);break;case ft.FirstRow:this.setScrollTop(0);break;case ft.FirstCol:this.setScrollLeft(0);break;case ft.LastRow:this.setScrollTop(h-this.props.tableSizes.tableContainerHeight);break;case ft.LastCol:this.setScrollLeft(d-this.props.tableSizes.tableContainerWidth);break;case ft.FirstCell:this.setScrollTop(0),this.setScrollLeft(0);break;case ft.LastCell:this.setScrollTop(h-this.props.tableSizes.tableContainerHeight),this.setScrollLeft(d-this.props.tableSizes.tableContainerWidth);break;case ft.DownAndFirstCol:this.scrollDirectionDown(a,u,p,g,l),this.setScrollLeft(0);break;case ft.UpAndLastCol:this.scrollDirectionUp(a,u,p,l),this.setScrollLeft(d-this.props.tableSizes.tableContainerWidth)}}}},{key:"scrollDirectionLeft",value:function(e,t,n,r){if(!r){var o=yt(e,this.props.data.columnSettings[n].width,t,this.props.tableSizes.tableContainerWidth-this.props.tableSizes.freezeWidth);void 0!==o&&this.setScrollLeft(o)}}},{key:"scrollDirectionDown",value:function(e,t,n,r,o){if(!o)if(r)this.setScrollTop(0);else{var i=yt(e,n,t,this.props.tableSizes.tableContainerHeight-this.props.tableSizes.freezeHeight);void 0!==i&&this.setScrollTop(i)}}},{key:"scrollDirectionUp",value:function(e,t,n,r){if(!r){var o=yt(e,n,t,this.props.tableSizes.tableContainerHeight-this.props.tableSizes.freezeHeight);void 0!==o&&this.setScrollTop(o)}}},{key:"scrollDirectionRight",value:function(e,t,n,r,o){if(!o)if(r)this.setScrollLeft(0);else{var i=yt(e,this.props.data.columnSettings[n].width,t,this.props.tableSizes.tableContainerWidth-this.props.tableSizes.freezeWidth);void 0!==i&&this.setScrollLeft(i)}}},{key:"handleTableMouseUp",value:function(e){this.props.selectionStrategy.getSelectionInProcess()&&this.handleCellMouseUp({event:e.nativeEvent}),this.props.handler.onTableMouseUp&&this.resizing===b.None&&this.active&&this.props.handler.onTableMouseUp(e.nativeEvent)}},{key:"handleCellMouseDown",value:function(e){var t,n;!!this.props.data.activeNewLineMemberCell||e.event.preventDefault(),this.props.data.activeNewLineMemberCell&&e.row===this.props.data.activeNewLineMemberCell.row&&e.col===this.props.data.activeNewLineMemberCell.col||this.props.data.devicePreview||(this.props.handler.getFormulaEntryInProgress&&this.props.handler.getFormulaEntryInProgress()?null===(t=(n=this.props.handler).onCellMouseDown)||void 0===t||t.call(n,e):this.props.selectionStrategy.handleSelectionForMouseDown(this.setState.bind(this),this.isActive.bind(this),this.setActive.bind(this),this.setFirstClickWithMultiSelect.bind(this),this.setSelectionArea.bind(this),this.state,this.props.preventDefaultSelection,this.props.data,this.props.handler,e,this.focusTableFromInside.bind(this)))}},{key:"handleCellMouseUp",value:function(e){var t,n,r,o,i=this.props.data.activeNewLineMemberCell&&"context"in e&&e.row===this.props.data.activeNewLineMemberCell.row&&e.col===this.props.data.activeNewLineMemberCell.col,l=(null===(t=(n=this.props.handler).getDataEntryInProgress)||void 0===t?void 0:t.call(n))&&(null===(r=(o=this.props.handler).getFormulaEntryInProgress)||void 0===r?void 0:r.call(o)),s=!this.props.selectionStrategy.getSelectionInProcess()&&0===e.event.button;if(!l&&!i&&this.isActive()&&!s){this.props.selectionStrategy.handleSelectionForMouseUp(this.setState.bind(this),this.props.handler,this.state,e,this.resizing);var a,c,u,h=e.event.target,d=null==h?void 0:h.closest(".".concat(Se.CELL_CLASSNAME)),p=0===e.event.button;if(d&&p&&this.refTableRoot.current&&(a=document.activeElement,c=d,u=this.refTableRoot.current,!a||a!==c&&a!==u)&&d.focus(),function(e){return"A"===(null==e?void 0:e.tagName.toUpperCase())}(h)&&p){var f,g,m=null!==(f=null==d?void 0:d.getAttribute("data-tablerow"))&&void 0!==f?f:"-1",v=null!==(g=null==d?void 0:d.getAttribute("data-tablecol"))&&void 0!==g?g:"-1";this.triggerHyperlinkIfNecessary(parseInt(m,10),parseInt(v,10))}}}},{key:"handleCellMouseOver",value:function(e){var t,n=this,r=null===(t=this.props.data.rows[e.row])||void 0===t?void 0:t.cells[e.col],i=this.resizing!==b.None;if(!i&&r&&r.merged){var l=Ge(e,this.props.data,this.props.tableSizes.borderSize);this.updateResizer(l.col,l.row)}var s,a,c,u,h,d,p=!(null==r||!r.cellChart),f=(null==r?void 0:r.cellType)===E.Threshold;if(p||f||this.active&&!i&&!this.props.data.mobile&&!this.props.data.devicePreview){var g=In(this.state.selection);if(this.props.selectionStrategy.getSelectionInProcess()){if(this.autoScroll.autoScrollTable(e,this.getScrollTop(),this.getScrollLeft(),this.props.tableSizes.tableContainerWidth+Se.SCROLLBAR_SIZE,this.props.tableSizes.tableContainerHeight+this.props.tableSizes.horizontalScrollbarHeight),g.isCellChartSelection&&e.row>=g.startRow&&e.row<=g.endRow&&e.col>=g.startCol&&e.col<=g.endCol)return;c=gn(s=g,(a=e).row,a.col),u=mn(s,a.row,a.col),h=-1===a.row||-1===a.col,d=function(e){return e.selectionType===T.Box}(s)&&!h&&!vn(s)&&!yn(s),(c||u||d)&&this.setState(function(t){var r,i,l=sl({},g);if(t.copyInProcess){var s=(r={scrollDragDirection:n.scrollDragDirection,originalSelectionArea:n.props.selectionStrategy.getDraggerSelectionArea(),currentSelectionArea:l,newCol:e.col,newRow:e.row},i={dragDirection:r.scrollDragDirection,selectionArea:an({},r.currentSelectionArea)},r.originalSelectionArea?(i.dragDirection===w.unset&&(i.dragDirection=function(e){return Tn(e,w.horizontal)?w.vertical:w.horizontal}(r),i.selectionArea=an({},r.originalSelectionArea)),i.dragDirection===w.horizontal?Tn(r,w.horizontal)?i.dragDirection=w.unset:i=wn(i,r,w.horizontal):i.dragDirection===w.vertical&&(Tn(r,w.vertical)?i.dragDirection=w.unset:i=wn(i,r,w.vertical)),i):i);n.scrollDragDirection=s.dragDirection,l=s.selectionArea}else l.endRow=e.row>=0?e.row:l.endRow,l.endCol=e.col>=0?e.col:l.endCol;(l=Xt(l,n.props.data.rows)).isCellChartSelection=!1;var a=o(t.selection.selectedRegions);a[t.selection.selectedRegions.length-1]=l;var c=t.selection.selectionContextType;return c===v.Column||c===v.Row||l.startRow===l.endRow&&l.startCol===l.endCol||(c=v.MultiCell),sl(sl({},t),{},{selection:sl(sl({},t.selection),{},{selectedRegions:a,selectionContextType:c})})})}this.props.handler.onCellMouseOver&&this.props.handler.onCellMouseOver(e)}}},{key:"handleContextMenu",value:function(e){this.props.handler.onContextMenu&&this.props.handler.onContextMenu({row:e.row,col:e.col,event:e.event,targetDescription:e.targetDescription,currentSelectionAreas:this.state.selection.selectedRegions,isTitle:e.isTitle})}},{key:"handleCopyDraggerClick",value:function(e){this.props.selectionStrategy.setSelectionInProcess(!0),this.props.selectionStrategy.setCopying(!0),this.props.selectionStrategy.setDraggerSelectionArea(sl({},In(this.state.selection))),this.setState(sl(sl({},this.state),{},{copyInProcess:!0})),e.stopPropagation()}},{key:"setCopyInProcess",value:function(e,t){this.setState(function(t){return sl(sl({},t),{},{copyInProcess:e})},t)}},{key:"handleClick",value:function(e){this.props.handler.getDataEntryInProgress&&this.props.handler.getDataEntryInProgress()||this.props.data.devicePreview||this.props.preventDefaultSelection||this.props.selectionStrategy.handleClick(e,this.props.data,this.isActive.bind(this),this.setActive.bind(this),this.setSelectionArea.bind(this))}},{key:"handleTableContainerMouseDown",value:function(e){var t;(t=e.target).classList&&(t.classList.contains("tableContainer")||t.classList.contains("freezeSectiontopLeft")||t.classList.contains("freezeSectionbottomLeft")||t.classList.contains("freezeSectiontopRight")||t.classList.contains("freezeSectionbottomRight"))&&this.setSelectionArea({clearSelection:!0,isKeyEvent:!1})}},{key:"updateResizer",value:function(e,t){this.resizingInfo=function(e,t,n,r,o,i,l){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n);if(t>=0&&!r.rows[t]||e>=0&&!r.columnSettings[e])return a;var c=!(t>=0)||r.rows[t].fixed,u=!(e>=0)||r.columnSettings[e].fixed,h=r.rows[t]?r.rows[t].height+o.borderSize:Se.COORDINATE_CELL_SIZE,d=r.columnSettings[e]?r.columnSettings[e].width:Se.COORDINATE_CELL_SIZE;return a.top=o.coordinateOffset+r.rows.slice(0,t).reduce(function(e,t){return t?e+t.height+o.borderSize:e},0),a.left=o.coordinateOffset+r.columnSettings.slice(0,e).reduce(function(e,t){return e+t.width},0),a.height=h,a.width=d,a.row=t,a.col=e,a.newWidth=d,a.newHeight=h,a.offsetLeft=l,a.offsetTop=i,a.scrollOffsetLeft=u?0:l,a.scrollOffsetTop=c?0:i,a}(e,t,this.resizingInfo,this.props.data,this.props.tableSizes,this.getScrollTop(),this.getScrollLeft()),this.refRowResizer.current&&Ve(this.refRowResizer.current,this.resizingInfo,t===this.props.data.rows.length-1?5:3,this.props.tableSizes.notRenderedHeightTop),this.refColumnResizer.current&&Ue(this.refColumnResizer.current,this.resizingInfo,e===this.props.data.columnSettings.length-1?5:3)}},{key:"handleResizeStart",value:function(){var e,t,n;null===(e=this.refTitleResizer.current)||void 0===e||e.classList.add("resizing"),null===(t=this.refRowResizer.current)||void 0===t||t.classList.add("resizing"),null===(n=this.refColumnResizer.current)||void 0===n||n.classList.add("resizing")}},{key:"handleResizeEnd",value:function(){var e,t,n;null===(e=this.refTitleResizer.current)||void 0===e||e.classList.remove("resizing"),null===(t=this.refRowResizer.current)||void 0===t||t.classList.remove("resizing"),null===(n=this.refColumnResizer.current)||void 0===n||n.classList.remove("resizing")}},{key:"handleRowResizeStart",value:function(){this.resizing=b.Row,this.handleResizeStart()}},{key:"handleTitleResizeStart",value:function(){this.resizing=b.Title,this.handleResizeStart()}},{key:"handleTitleResizeEnd",value:function(){this.resizing=b.None,this.handleResizeEnd()}},{key:"handleRowResizeEnd",value:function(){this.resizing=b.None,this.handleResizeEnd()}},{key:"handleNewRowHeight",value:function(e){this.setNewRowHeight(e)}},{key:"handleColumnResizeStart",value:function(){this.resizing=b.Column,this.handleResizeStart()}},{key:"handleColumnResizeEnd",value:function(){this.resizing=b.None,this.handleResizeEnd()}},{key:"handleNewColumnWidth",value:function(e){this.setNewColumnWidth(e)}},{key:"handleNewTitleHeight",value:function(e){this.setNewTitleHeight(e)}},{key:"handleCellMouseEnter",value:function(e){if(!this.props.data.mobile&&!this.props.data.devicePreview){if(this.resizing===b.None){var t=Ge(e,this.props.data,this.props.tableSizes.borderSize);this.updateResizer(t.col,t.row)}var n=en(e.event);if((!n||!cn(this.state.selection.selectionContextType))&&!this.props.selectionStrategy.getSelectionInProcess()&&this.resizing===b.None&&this.props.data.designMode){if(Q(e.cellType)){var r,o=un(this.state.selection.selectionContextType)||this.state.selection.selectionContextType===v.MultiRegion,i=e.context.originalDimension;r=o||n?this.props.selectionStrategy.getSelectedDimensions().includes(i)||"DummyDimension"===e.context.dimensions[0].id||(this.state.selection.selectionContextType===v.DataCell||this.state.selection.selectionContextType===v.DimensionMember)&&n||this.state.selection.selectionContextType===v.MultiCell?{hoverContextType:v.DimensionMember,doubleOverlay:!0,row:e.row,column:e.col}:{hoverContextType:v.Dimension,doubleOverlay:!0,dimensionId:i}:{hoverContextType:v.HeaderRegion,doubleOverlay:!1},this.setState(function(e){return sl(sl({},e),{},{hover:r})})}le(e.cellType)&&this.setState(function(t){return zn(e,t)}),se(e.cellType)&&this.setState(function(t){return zn(e,t)}),re(e.cellType)&&this.handleCellMouseEnterDataCell(e,n),e.cellType!==E.Custom&&e.cellType!==E.Empty||this.setState(function(t){return sl(sl({},t),{},{hover:{hoverContextType:v.DataCell,doubleOverlay:!1,row:e.row,column:e.col}})})}}}},{key:"handleCellMouseEnterDataCell",value:function(e,t){var n,r=this.state.selection.selectionContextType,o=!1,i=rn(this.state.selection.selectedRegions);if(i&&e.cellType===E.Chart&&this.props.data.cellChartData&&(r===v.DataCell||r===v.CellChart)&&e.chartDimension){var l=this.props.data.cellChartData[e.chartDimension];o=l.startCol<=i.startCol&&l.endCol>=i.startCol&&l.startRow<=i.startRow&&l.endRow>=i.startRow}n=e.cellType===E.Chart&&hn(r)&&r!==v.MultiCell&&!o?{hoverContextType:v.CellChart,doubleOverlay:this.state.hover.hoverContextType===v.DatacellRegion,dimensionId:e.chartDimension}:hn(r)||t?{hoverContextType:v.DataCell,doubleOverlay:!0,row:e.row,column:e.col}:{hoverContextType:v.DatacellRegion,doubleOverlay:!1},this.setState(function(e){return sl(sl({},e),{},{hover:n})})}},{key:"handleShowOverlay",value:function(e){this.props.selectionStrategy.getSelectionInProcess()||this.resizing!==b.None||this.props.data.devicePreview||en(e.event)&&(cn(this.state.selection.selectionContextType)||dn(this.state.selection.selectionContextType))||this.setState(function(t){return zn(e,t)})}},{key:"handleHideOverlay",value:function(){this.resizing===b.None&&this.setState(function(e){return sl(sl({},e),{},{hover:{hoverContextType:v.DataCell,doubleOverlay:!1}})})}},{key:"handleTitleClick",value:function(e){var t=this;if(e.preventDefault(),!this.props.data.devicePreview){this.setActive(!0),this.setState(function(e){var n={selectedRegions:[],selectionContextType:v.TitleRegion};return Dn(n,t.props.handler),sl(sl({},e),{},{selection:n})});var n=e.currentTarget.closest(".".concat(pe.TITLE_WRAPPER_CLASS));n&&n.focus({preventScroll:!0})}}},{key:"handleOverlayClick",value:function(e){this.resizing===b.None&&(this.setActive(!0),this.props.selectionStrategy.handleOverlayClick(this.state.selection,e,this.props.data,this.setSelectionArea.bind(this),this.setState.bind(this),this.props.handler))}},{key:"handleScroll",value:function(e){var t,n=e.currentTarget.scrollTop||this.getScrollTop(),r=e.currentTarget.scrollLeft||this.getScrollLeft();this.hideResizer(),null===(t=this.dragDropCache)||void 0===t||t.clear(),this.scrollReloadDispatcher.dispatchInternalReloadLimitReached({scrollTop:n,scrollLeft:r,scrollLimitVertical:this.props.data.scrollLimitVertical,scrollLimitHorizontal:this.props.data.scrollLimitHorizontal,tableSizes:this.props.tableSizes})}},{key:"hideResizer",value:function(){this.refRowResizer.current&&Ve(this.refRowResizer.current,this.resizingInfo,5,this.props.tableSizes.notRenderedHeightTop,!0),this.refColumnResizer.current&&Ue(this.refColumnResizer.current,this.resizingInfo,5,!0)}},{key:"handleCellDoubleClick",value:function(e,t){if(!(this.props.data.disableCellEdit||this.props.handler.getDataEntryInProgress&&this.props.handler.getDataEntryInProgress()||this.props.data.devicePreview))if(t)this.refTitleValue.current&&this.props.handler.onCellEdit&&this.props.handler.onCellEdit({keyEvent:e.keyEvent,target:this.refTitleValue.current,isReworkTitle:t});else{var n,r,o,i,l,s,a={target:e.target,row:e.row,col:e.col,keyEvent:e.keyEvent};ce(null===(n=this.props.data.rows[e.row])||void 0===n||null===(r=n.cells[e.col])||void 0===r?void 0:r.cellType)?null===(o=(i=this.props.handler).onNewLineEdit)||void 0===o||o.call(i,a):null===(l=(s=this.props.handler).onCellEdit)||void 0===l||l.call(s,a)}}},{key:"handleResizerDoubleClick",value:function(){this.props.handler.onResizerDoubleClick(this.resizingInfo.col)}},{key:"handleDrillIconClicked",value:function(e){if((this.props.handler.getDataEntryInProgress&&this.props.handler.getDataEntryInProgress()||this.props.preventDefaultSelection)&&function(e){return void 0!==e.event}(e))return this.props.handler.onCellMouseDown&&this.props.handler.onCellMouseDown(e),void(this.props.handler.onTableMouseUp&&this.props.handler.onTableMouseUp(e.event));this.props.handler.onDrillIconClicked&&this.props.handler.onDrillIconClicked(e)}},{key:"handleCellIconClicked",value:function(e){this.props.handler.onCellIconClicked&&this.props.handler.onCellIconClicked(e)}},{key:"handleCellDragStarted",value:function(e){this.props.handler.onCellDragStarted&&this.props.handler.onCellDragStarted(e)}},{key:"handleCellDragEnded",value:function(e){this.props.handler.onCellDragEnded&&this.props.handler.onCellDragEnded(e)}},{key:"handleCellDragEnter",value:function(e){this.props.handler.onCellDragEnter&&this.props.handler.onCellDragEnter(e)}},{key:"handleCellDragLeave",value:function(e){this.props.handler.onCellDragLeave&&this.props.handler.onCellDragLeave(e)}},{key:"handleCellDropped",value:function(e){this.props.handler.onCellDropped&&this.props.handler.onCellDropped(e)}},{key:"handleTableRootContextMenuEvent",value:function(e){this.props.handler.onContextMenu&&e.nativeEvent.preventDefault()}},{key:"renderLoadingArea",value:function(){return W.createElement(W.Fragment,null,W.createElement(Me,{pathToLoadingGif:this.props.data.pathToLoadingGif||"",preContent:!0,coordinateOffset:this.props.tableSizes.coordinateOffset,innerRef:this.props.loadingIndicatorRefs.loadingAreaTop,name:"top"}),W.createElement(_e,{pathToLoadingGif:this.props.data.pathToLoadingGif||"",preContent:!0,coordinateOffset:this.props.tableSizes.coordinateOffset,innerRef:this.props.loadingIndicatorRefs.loadingAreaLeft,name:"left"}),W.createElement(Me,{pathToLoadingGif:this.props.data.pathToLoadingGif||"",preContent:!1,coordinateOffset:this.props.tableSizes.coordinateOffset,innerRef:this.props.loadingIndicatorRefs.loadingAreaBottom,name:"bottom"}),W.createElement(_e,{pathToLoadingGif:this.props.data.pathToLoadingGif||"",preContent:!1,coordinateOffset:this.props.tableSizes.coordinateOffset,innerRef:this.props.loadingIndicatorRefs.loadingAreaRight,name:"right"}))}},{key:"renderFreezeLines",value:function(){if(!this.props.generalSettings.showFreezeLines)return null;var e=this.props.data.rows.length-1,t=(void 0===this.props.data.freezeEndRow||this.props.data.freezeEndRow<=e)&&this.props.tableSizes.freezeHeight-this.props.tableSizes.coordinateOffset>0,n=this.props.data.columnSettings.length-1,r=(void 0===this.props.data.freezeEndCol||this.props.data.freezeEndCol<=n)&&this.props.tableSizes.freezeWidth-this.props.tableSizes.coordinateOffset>0;return W.createElement(Ae,{vertical:r,horizontal:t,left:this.props.tableSizes.freezeWidth,top:this.props.tableSizes.freezeHeight,containerWidth:this.props.tableSizes.tableContainerWidth,containerHeight:Math.min(this.props.tableSizes.tableContentHeight,this.props.tableSizes.tableContainerHeight)})}},{key:"isBottomSectionNeeded",value:function(e,t){return e<t.length-1}},{key:"isRightSectionNeeded",value:function(e,t){return e<t.length-1}},{key:"render",value:function(){var e,t,n,r,o,i,l,s=this.props.data.showGrid?Se.SHOW_GRID_CLASS:"",a=this.props.generalSettings.showCoordinateHeader?this.state.selection.selectedRegions:void 0,c=this.props.data.freezeEndCol,u=this.props.data.freezeEndRow,h=this.getLastScrollUpdateHorizontal(),d=this.getLastScrollUpdateVertical(),p=void 0===this.props.data.dropZonesInfo;this.dragDropCache=!this.props.data.mobile&&((null!==(e=null===(t=this.props.data.dropZonesInfo)||void 0===t||null===(n=t.areas)||void 0===n?void 0:n.length)&&void 0!==e?e:0)>0||(null!==(r=null===(o=this.props.data.dropZonesInfo)||void 0===o||null===(i=o.cells)||void 0===i?void 0:i.length)&&void 0!==r?r:0)>0)?new Ro:void 0;var f={registerImageLoading:this.props.handler.registerImageLoading,onDrillIconClicked:this.boundHandleDrillIconClicked,onCellIconClicked:this.boundHandleCellIconClicked,onCellDragStarted:this.boundHandleCellDragStarted,onCellDragEnded:this.boundHandleCellDragEnded,onCellDropped:this.boundHandleCellDropped,onCellEdit:this.boundHandleCellDoubleClick,onCellMouseLeave:this.props.handler.onCellMouseLeave,onCellMouseDown:this.boundHandleCellMouseDown,onCellMouseEnter:this.boundHandleCellMouseEnter,onCellMouseUp:this.boundHandleCellMouseUp,onCellMouseOver:this.boundHandleCellMouseOver,onContextMenu:this.boundHandleContextMenu,onOverlayClick:this.boundHandleOverlayClick,onShowRowColOverlay:this.boundHandleShowOverlay,onHideOverlay:this.boundHandleHideOverlay,onGetAriaProps:this.props.handler.onGetAriaProps,onCommentIconClicked:this.props.handler.onCommentIconClicked},g={onCellMouseDown:this.props.handler.onCellMouseDown,onCellMouseOver:this.props.handler.onCellMouseOver,onCellMouseLeave:this.props.handler.onCellMouseLeave,onCellEdit:this.props.handler.onCellEdit,onTitleSelected:this.boundHandleTitleClick,onContextMenu:this.boundHandleContextMenu},m={tableId:this.props.data.id,offsetOverlayTop:0,offsetOverlayLeft:this.props.tableSizes.coordinateOffset,notRenderedHeightTop:this.props.tableSizes.notRenderedHeightTop,fixedTableWidth:this.props.tableSizes.freezeWidth-this.props.tableSizes.coordinateOffset,fixedTableHeight:this.props.tableSizes.freezeHeight-this.props.tableSizes.coordinateOffset,selection:this.state.selection,copyInProcess:this.state.copyInProcess,data:this.props.data,tableSizes:this.props.tableSizes,hover:this.state.hover,highlightedCells:this.props.data.highlightedCells,designMode:this.props.data.designMode,freezeLines:this.props.generalSettings.showFreezeLines,onCopyDraggerClick:this.boundHandleCopyDraggerClick,hasLADatapointSelection:this.props.data.hasLADatapointSelection,showCopyDragger:this.props.generalSettings.showCopyDragger},v={data:sl(sl({},this.props.data),{},{highlightedCells:void 0}),rowHandler:f,copyInProcess:this.state.copyInProcess,tableWidth:this.props.tableSizes.tableContentWidth,notRenderedHeightTop:this.props.tableSizes.notRenderedHeightTop,notRenderedWidthOnTheLeft:this.props.tableSizes.notRenderedWidthOnTheLeft,notRenderedHeightBottom:this.props.tableSizes.notRenderedHeightBelow,titleVisible:this.props.tableSizes.titleHeight>0,selection:a,scrollLeft:this.getScrollLeft()||(h<this.props.tableSizes.tableContentWidth?h:0),scrollTop:this.getScrollTop()||(d<this.props.tableSizes.tableContentHeight?d:0),showCoordinateHeaderColumn:!1,showCoordinateHeaderRow:!1,showCoordinateHeaderCorner:!1,showRowColumnHover:this.props.generalSettings.showRowColumnHover},y=void 0!==this.props.data.freezeEndRow?0:v.notRenderedHeightTop,b=void 0!==this.props.data.freezeEndRow?0:v.notRenderedHeightBottom,C=void 0!==this.props.data.freezeEndCol?0:v.notRenderedWidthOnTheLeft,w=void 0!==c?0:this.props.tableSizes.columnIndices.startColumnIndex,S=this.props.tableSizes.columnIndices.endColumnIndex,R=this.props.tableSizes.columnIndices.endColumnIndex;void 0!==c&&c<=this.props.data.columnSettings.length-1&&(S=c,R=c);var T,E,D,k,O=this.props.data.selectionMode===_.Default,x=this.props.data.totalNumberOfRows?this.props.data.totalNumberOfRows:this.props.data.rows.length;return W.createElement("div",{id:Se.TABLE_ROOT_ID_PREFIX+this.props.data.id,className:"".concat(Se.TABLE_ROOT_ID_PREFIX).concat(this.props.data.mobile?" ".concat(Se.TABLE_MOBILE_CLASS):""),ref:this.refTableRoot,tabIndex:0,style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},onMouseUp:this.boundHandleTableMouseUp,"aria-rowcount":x,"aria-colcount":this.props.data.totalNumberOfColumns,"aria-multiselectable":O,role:(k=this.props.data.hasInteractiveHierarchy,k?"treegrid":"grid"),"aria-labelledby":(T=this.props.data,null!==(E=T.title)&&void 0!==E&&E.titleVisible?"".concat(he.TITLE_ID_PREFIX).concat(T.id):null!==(D=T.title)&&void 0!==D&&D.titleVisible||!T.idForTableNameAriaLabel?void 0:T.idForTableNameAriaLabel),onContextMenu:this.boundHandleTableRootContextMenuEvent,onFocus:this.boundHandleTableOnFocus,onMouseDown:this.boundHandleTableOnMouseDown,lang:this.props.handler.getTranslatedText?void 0:"en"},W.createElement(kt,{tableId:this.props.data.id}),this.props.data.title&&this.props.tableSizes.titleHeight>0&&W.createElement(el,{refTitleValue:this.refTitleValue,refTitleResizer:this.refTitleResizer,title:this.props.data.title,selected:pn(this.state.selection.selectionContextType),handler:g,designMode:this.props.data.designMode,devicePreview:this.props.data.devicePreview,fontOverride:this.props.data.fontOverride,resizeableTitle:(null===(l=this.props.data.featureToggles)||void 0===l?void 0:l.resizeableTitle)&&!this.props.data.mobile,setNewTitleHeight:this.boundHandleNewTitleHeight,resizingTitleStart:this.boundHandleResizingTitleStart,resizingTitleEnd:this.boundHandleResizingTitleEnd,tableContainerHeight:this.props.tableSizes.tableContainerHeight,titleHeight:this.props.tableSizes.titleHeight}),W.createElement("div",{className:"tableContainer table".concat(this.props.data.id," "),ref:this.refTableContainer,onClick:this.boundHandleClick,onMouseDown:this.boundHandleTableContainerMouseDown,onScrollCapture:this.boundHandleScroll,onTouchStart:this.scrollSynchronizer.boundTouchStart,onTouchMove:this.scrollSynchronizer.boundTouchMove,style:et(this.props.data),onWheel:this.scrollSynchronizer.boundContainerWheel},W.createElement("div",{style:{width:"".concat(this.props.tableSizes.htmlTableWrapperWidth,"px"),height:"".concat(this.props.tableSizes.htmlTableWrapperHeight,"px"),boxSizing:"border-box"}},!this.props.data.responsive&&!this.props.data.mobile&&W.createElement(Be,{refColumnResizer:this.refColumnResizer,onColumnResizerDoubeClick:this.boundHandleResizerDoubleClick,onNewColumnWidth:this.boundHandleNewColumnWidth,onColumnResizeStart:this.boundHandleColumnResizeStart,onColumnResizeEnd:this.boundHandleColumnResizeEnd,columnSettings:this.props.data.columnSettings,resizingInfo:this.resizingInfo}),!this.props.data.mobile&&W.createElement(Ke,{refRowResizer:this.refRowResizer,onNewRowHeight:this.boundHandleNewRowHeight,onRowResizeStart:this.boundHandleRowResizeStart,onRowResizeEnd:this.boundHandleRowResizeEnd,borderSize:this.props.tableSizes.borderSize,notRenderedHeightTop:this.props.tableSizes.notRenderedHeightTop,rows:this.props.data.rows,resizingInfo:this.resizingInfo,tableContainerHeight:this.props.tableSizes.tableContainerHeight}),this.renderFreezeLines(),W.createElement("div",{ref:this.refHtmlTableWrapper,className:"htmlTableWrapper ".concat(s),style:{width:"".concat(this.props.tableSizes.htmlTableWrapperWidth,"px"),height:"".concat(this.props.tableSizes.htmlTableWrapperHeight,"px"),boxSizing:"border-box"}},W.createElement(Ni,{innerRef:this.scrollSynchronizer.freezeSectionTopLeftRef,maxHeight:void 0!==u?0:this.props.tableSizes.htmlTableWrapperHeight,overlay:sl(sl({},m),{},{offsetOverlayTop:this.props.tableSizes.coordinateOffset,freezeSectionStartRow:0,freezeSectionStartCol:0,freezeSectionEndCol:c,freezeSectionEndRow:u,notRenderedHeightTop:y}),htmlTable:sl(sl({},v),{},{startRow:0,startCol:w,endCol:S,endRow:u,tableWidth:this.props.tableSizes.topLeftSection.htmlTableWidth,notRenderedHeightTop:y,notRenderedWidthOnTheLeft:C,notRenderedHeightBottom:b,showCoordinateHeaderColumn:this.props.generalSettings.showCoordinateHeader,showCoordinateHeaderRow:this.props.generalSettings.showCoordinateHeader,showCoordinateHeaderCorner:this.props.generalSettings.showCoordinateHeader,showDroppableAreas:p}),sectionId:"topLeft",top:0,left:0,width:this.props.tableSizes.topLeftSection.width,height:this.props.tableSizes.topLeftSection.height,tableSizes:this.props.tableSizes,dragDropCache:this.dragDropCache,onCellDragEnter:this.boundHandleCellDragEnter,onCellDragLeave:this.boundHandleCellDragLeave,onCellDropped:this.boundHandleCellDropped}),void 0!==u&&this.isBottomSectionNeeded(u,this.props.data.rows)&&W.createElement(Ni,{innerRef:this.scrollSynchronizer.freezeSectionBotLeftRef,maxHeight:this.props.tableSizes.htmlTableWrapperHeight-parseInt(this.props.tableSizes.topLeftSection.height,10),overlay:sl(sl({},m),{},{freezeSectionStartCol:0,freezeSectionStartRow:u+1,freezeSectionEndCol:c}),htmlTable:sl(sl({},v),{},{startCol:w,startRow:u+1,endCol:R,tableWidth:this.props.tableSizes.bottomLeftSection.htmlTableWidth,showCoordinateHeaderColumn:this.props.generalSettings.showCoordinateHeader,notRenderedWidthOnTheLeft:C,showDroppableAreas:p}),sectionId:"bottomLeft",top:this.props.tableSizes.freezeHeight,left:0,width:this.props.tableSizes.bottomLeftSection.width,height:this.props.tableSizes.bottomLeftSection.height,tableSizes:this.props.tableSizes,dragDropCache:this.dragDropCache,onCellDragEnter:this.boundHandleCellDragEnter,onCellDragLeave:this.boundHandleCellDragLeave,onCellDropped:this.boundHandleCellDropped}),void 0!==c&&this.isRightSectionNeeded(c,this.props.data.columnSettings)&&W.createElement(Ni,{innerRef:this.scrollSynchronizer.freezeSectionTopRightRef,maxHeight:void 0!==u?0:this.props.tableSizes.htmlTableWrapperHeight,overlay:sl(sl({},m),{},{offsetOverlayTop:this.props.tableSizes.coordinateOffset,offsetOverlayLeft:0,freezeSectionStartRow:0,freezeSectionStartCol:c+1,freezeSectionEndRow:u,notRenderedHeightTop:y}),htmlTable:sl(sl({},v),{},{startRow:0,startCol:Math.max(c+1,this.props.tableSizes.columnIndices.startColumnIndex),endRow:u,endCol:this.props.tableSizes.columnIndices.endColumnIndex,tableWidth:this.props.tableSizes.topRightSection.htmlTableWidth,notRenderedHeightTop:y,notRenderedHeightBottom:b,showCoordinateHeaderRow:this.props.generalSettings.showCoordinateHeader,showDroppableAreas:p}),sectionId:"topRight",top:0,left:this.props.tableSizes.freezeWidth,width:this.props.tableSizes.topRightSection.width,height:this.props.tableSizes.topRightSection.height,tableSizes:this.props.tableSizes,dragDropCache:this.dragDropCache,onCellDragEnter:this.boundHandleCellDragEnter,onCellDragLeave:this.boundHandleCellDragLeave,onCellDropped:this.boundHandleCellDropped}),void 0!==u&&this.isBottomSectionNeeded(u,this.props.data.rows)&&void 0!==c&&this.isRightSectionNeeded(c,this.props.data.columnSettings)&&W.createElement(Ni,{innerRef:this.scrollSynchronizer.freezeSectionBotRightRef,maxHeight:this.props.tableSizes.htmlTableWrapperHeight-parseInt(this.props.tableSizes.topRightSection.height,10),overlay:sl(sl({},m),{},{offsetOverlayLeft:0,freezeSectionStartRow:u+1,freezeSectionStartCol:c+1}),htmlTable:sl(sl({},v),{},{startCol:Math.max(c+1,this.props.tableSizes.columnIndices.startColumnIndex),startRow:u+1,endCol:this.props.tableSizes.columnIndices.endColumnIndex,tableWidth:this.props.tableSizes.bottomRightSection.htmlTableWidth,showDroppableAreas:p}),sectionId:"bottomRight",top:this.props.tableSizes.freezeHeight,left:this.props.tableSizes.freezeWidth,width:this.props.tableSizes.bottomRightSection.width,height:this.props.tableSizes.bottomRightSection.height,tableSizes:this.props.tableSizes,dragDropCache:this.dragDropCache,onCellDragEnter:this.boundHandleCellDragEnter,onCellDragLeave:this.boundHandleCellDragLeave,onCellDropped:this.boundHandleCellDropped}))),!this.props.data.mobile&&W.createElement(W.Fragment,null,W.createElement(gt,{containerWidth:this.props.tableSizes.tableContainerWidth,totalScrollableColumnWidth:this.props.tableSizes.htmlTableWrapperWidth,scrollContainerRef:this.scrollSynchronizer.horizontalScrollbarContainerRef,onScrollLeftChanged:this.scrollSynchronizer.boundSyncHorizontalScrollPosition}),W.createElement(Dt,{containerHeight:this.props.tableSizes.tableContainerHeight,totalScrollableRowHeight:this.props.tableSizes.htmlTableWrapperHeight,scrollContainerRef:this.scrollSynchronizer.verticalScrollbarContainerRef,onScrollTopChanged:this.scrollSynchronizer.boundSyncVerticalScrollPosition})),this.renderLoadingArea()),W.createElement(nl,{getTranslatedText:this.props.handler.getTranslatedText}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n,r=!1,o=e.data.rows.length,l=e.data.columnSettings.length,s=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return il(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?il(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}(t.selection.selectedRegions);try{for(s.s();!(n=s.n()).done;){var a=n.value;if(o<=a.startRow||o<=a.endRow||l<=a.startCol||l<=a.endCol){r=!0;break}}}catch(e){s.e(e)}finally{s.f()}if(r){var c={selectedRegions:[],selectionContextType:v.Widget};return Dn(c,e.handler),sl(sl({},t),{},{selection:c})}if(!e.data.designMode){var u=rn(t.selection.selectedRegions);if(u&&u.selectionType===T.Region){var h=t,d={startRow:u.startRow,startCol:u.startCol,endRow:u.startRow,endCol:u.startCol,selectionType:T.Box},p=i.getSelectionAreaContext([d],e.data.rows);return t.selection.selectionContextType===v.CellChart&&(d.endRow=u.endRow,d.endCol=u.endCol,d.inCellChartContext=u.inCellChartContext,d.isCellChartSelection=!0,p=v.CellChart),h.selection={selectedRegions:[d],selectionContextType:p},e.handler.onSelectedCellChanged&&e.handler.onSelectedCellChanged(u.startRow,u.startCol),e.handler.onSelectedRegionChanged&&e.handler.onSelectedRegionChanged([d],p),h}}if(e.data.focusedCell&&(!t.focusedCellFromOutside||t.focusedCellFromOutside.x!==e.data.focusedCell.x||t.focusedCellFromOutside.y!==e.data.focusedCell.y)){var f={startRow:e.data.focusedCell.y,startCol:e.data.focusedCell.x,endRow:e.data.focusedCell.y,endCol:e.data.focusedCell.x,selectionType:T.Box},g=e.data.rows[e.data.focusedCell.y]&&e.data.rows[e.data.focusedCell.y].cells[e.data.focusedCell.x],m={selectedRegions:[f],selectionContextType:g&&g.cellType?Cn(g.cellType):v.DataCell};return sl(sl({},t),{},{selection:m,focusedCellFromOutside:e.data.focusedCell})}return e.data.focusedCell?null:sl(sl({},t),{},{focusedCellFromOutside:void 0})}},{key:"getSelectionAreaContext",value:function(e,t){var n=rn(e);if(n&&n.startRow===n.endRow&&n.startCol===n.endCol){var r=t[n.startRow];if(!r)return v.DataCell;var o=r.cells[n.startCol];return xn({cellType:o?o.cellType:void 0,selectedRegions:e.length})}return v.MultiCell}}]),i}(W.Component),cl=function(){function e(){a(this,e),s(this,"loadingAreaState",{top:!1,left:!1,bottom:!1,right:!1})}return u(e,[{key:"createRefs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W.createRef(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W.createRef(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:W.createRef(),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:W.createRef();return this.loadingAreaLeft=e,this.loadingAreaTop=t,this.loadingAreaRight=n,this.loadingAreaBottom=r,this}},{key:"getLoadingAreaRefs",value:function(){return{loadingAreaLeft:this.loadingAreaLeft,loadingAreaTop:this.loadingAreaTop,loadingAreaRight:this.loadingAreaRight,loadingAreaBottom:this.loadingAreaBottom}}},{key:"getLoadingAreaState",value:function(){return this.loadingAreaState}},{key:"isCurrentlyLoading",value:function(){return this.loadingAreaState.right||this.loadingAreaState.bottom||this.loadingAreaState.left||this.loadingAreaState.top}},{key:"hideLoadingAreas",value:function(){this.isCurrentlyLoading()&&(this.toggleLoadingAreaOnTheRight(!1),this.toggleLoadingAreaOnTheLeft(!1),this.toggleLoadingAreaOnTheBottom(!1),this.toggleLoadingAreaOnTheTop(!1))}},{key:"showHorizontalLoading",value:function(e){e?this.toggleLoadingAreaOnTheRight(!0):this.toggleLoadingAreaOnTheLeft(!0)}},{key:"showVerticalLoading",value:function(e){e?this.toggleLoadingAreaOnTheBottom(!0):this.toggleLoadingAreaOnTheTop(!0)}},{key:"toggleLoadingAreaOnTheRight",value:function(e){this.loadingAreaState.right!==e&&(this.loadingAreaState.right=e,this.toggleLoadingArea(this.loadingAreaRight,e))}},{key:"toggleLoadingAreaOnTheLeft",value:function(e){this.loadingAreaState.left!==e&&(this.loadingAreaState.left=e,this.toggleLoadingArea(this.loadingAreaLeft,e))}},{key:"toggleLoadingAreaOnTheTop",value:function(e){this.loadingAreaState.top!==e&&(this.loadingAreaState.top=e,this.toggleLoadingArea(this.loadingAreaTop,e))}},{key:"toggleLoadingAreaOnTheBottom",value:function(e){this.loadingAreaState.bottom!==e&&(this.loadingAreaState.bottom=e,this.toggleLoadingArea(this.loadingAreaBottom,e))}},{key:"toggleLoadingArea",value:function(e,t){e.current&&(e.current.style.opacity=t?"1":"0")}}]),e}();function ul(e){return e.map(function(e){return e.width}).reduce(function(e,t){return e+t},0)}function hl(e,t,n,r,o){var i=n?Se.COORDINATE_CELL_SIZE:0,l=Math.ceil(e*r),s=Math.ceil(e*o)-i,a=t-l,c=Math.min(a,0);return{skippedSize:Math.max(a,0),contentSizeLimit:Math.min(s,s+c)}}function dl(e,t,n,r){for(var o=0,i=e.length-1,l=-1,s=0,a=t,c=0,u=0;u<e.length;u++){var h=e[u],d=fl(h,r);if(h&&h.fixed){if(l=gl(h),s>=n){i=u-1;break}s+=d}else if(a<=0){if(s>=n){i=u-1;break}s+=d}else h&&!h.fixed&&(o=gl(h),(a-=d)>=0&&(c+=d,o+=1))}var p=function(e,t,n,r,o){var i={heightOfSkippedElements:r,startIndex:t,endIndex:n},l=e[t];if(l&&l.cells){var s=function(e){var t=e.row;return e.cells.forEach(function(n){var r;void 0!==(null==n||null===(r=n.merged)||void 0===r?void 0:r.originalRow)&&(t=Math.min(e.row,n.merged.originalRow,t))}),t}(l);if(s<t){for(var a=s;a<t;a++){var c=fl(e[a],o);i.heightOfSkippedElements-=c}i.startIndex=s}}var u=e[n];if(u&&u.cells){var h=function(e,t){var n={from:t,to:t},r=e[t];return r?(r.cells.forEach(function(t){var o,i;if(t&&void 0!==(null===(o=t.merged)||void 0===o?void 0:o.originalRow)){var l,s;n.from=Math.min(r.row,t.merged.originalRow,n.from);var a=(null===(l=e[t.merged.originalRow])||void 0===l||null===(s=l.cells[t.column].merged)||void 0===s?void 0:s.rows)||0;n.to=Math.max(n.to,t.merged.originalRow+a)}t&&void 0!==(null===(i=t.merged)||void 0===i?void 0:i.rows)&&(n.to=Math.max(n.to,t.row+t.merged.rows))}),n):n}(e,n).to;h>n&&(i.endIndex=h)}return i}(e,o,i,c,r);c=p.heightOfSkippedElements,o=p.startIndex,i=p.endIndex;var f=Math.max(c,0);return{startIndex:o=Math.max(o,l+1),endIndex:i,freezeIndex:l,notRenderedSpace:f}}function pl(e){return void 0!==e.row}function fl(e,t){if(!e)return 0;var n=t?Se.GRID_BORDER_SIZE:0;return pl(e)?e.height+n:e.width}function gl(e){return e?pl(e)?e.row:e.column:-1}var ml=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se.BUFFER_LIMIT_HORIZONTAL,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Se.CONTENT_LIMIT_HORIZONTAL;a(this,e),s(this,"notRenderedWidthOnTheLeft",0),s(this,"startIndexColumns",0),this.bufferLimit=t,this.contentLimit=n}return u(e,[{key:"getStartIndexColumns",value:function(){return this.startIndexColumns}},{key:"getEndIndexColumns",value:function(){return this.endIndexColumns}},{key:"getFreezeEndColumn",value:function(){return this.freezeEndColumn}},{key:"getNotRenderedWidthOnTheLeft",value:function(){return this.notRenderedWidthOnTheLeft}},{key:"updateColumnIndicesForWindowing",value:function(e,t,n){var r=this.getUpdatedColumnIndices(e,t,n),o=r.startIndex,i=r.endIndex,l=r.notRenderedSpace,s=r.freezeIndex;this.startIndexColumns=o,this.endIndexColumns=i,this.freezeEndColumn=s,this.notRenderedWidthOnTheLeft=l}},{key:"getUpdatedColumnIndices",value:function(e,t,n){var r=e.columnSettings,o=hl(e.widgetWidth,t,n.showCoordinateHeader,this.bufferLimit,this.contentLimit),i=o.contentSizeLimit;return dl(r,o.skippedSize,i,!1)}}]),e}(),vl=function(){function e(){a(this,e),s(this,"startIndexRows",0),s(this,"lastFrozenRowIndex",-1),s(this,"notRenderedHeightTop",0)}return u(e,[{key:"getNotRenderedHeightTop",value:function(){return this.notRenderedHeightTop}},{key:"getStartIndexRows",value:function(){return this.startIndexRows}},{key:"getEndIndexRows",value:function(){return this.endIndexRows}},{key:"getLastFrozenRowIndex",value:function(){return this.lastFrozenRowIndex}},{key:"updateRowIndicesForWindowing",value:function(e,t,n){var r=e.widgetHeight,o=e.rows,i=e.showGrid,l=hl(r,t,n.showCoordinateHeader,Se.BUFFER_LIMIT_VERTICAL,n.rowContentLimitFactor),s=l.contentSizeLimit,a=l.skippedSize,c=this.getUpdatedColumnIndices(o,i,s,a),u=c.startIndex,h=c.endIndex,d=c.notRenderedSpace,p=c.freezeIndex;this.startIndexRows=u,this.endIndexRows=h,this.lastFrozenRowIndex=p,this.notRenderedHeightTop=d}},{key:"getUpdatedColumnIndices",value:function(e,t,n,r){return dl(e,r,n,t)}}]),e}(),yl=function(){function e(t,n){a(this,e),s(this,"frozenRows",[]),s(this,"preFillArray",[]),s(this,"contentRows",[]),s(this,"afterFillArray",[]),this.rowsWindowing=t||new vl,this.columnsWindowing=n||new ml}return u(e,[{key:"getFrozenRows",value:function(){return this.frozenRows}},{key:"getPreFillArray",value:function(){return this.preFillArray}},{key:"getContentRows",value:function(){return this.contentRows}},{key:"getAfterFillArray",value:function(){return this.afterFillArray}},{key:"getNotRenderedHeightTop",value:function(){return this.rowsWindowing.getNotRenderedHeightTop()}},{key:"getNotRenderedWidthToTheLeft",value:function(){return this.columnsWindowing.getNotRenderedWidthOnTheLeft()}},{key:"updateIndicesForWindowing",value:function(e,t,n,r){this.rowsWindowing.updateRowIndicesForWindowing(e,t,r),this.columnsWindowing.updateColumnIndicesForWindowing(e,n,r)}},{key:"getRowIndices",value:function(){return{startRowIndex:this.rowsWindowing.getStartIndexRows(),endRowIndex:this.rowsWindowing.getEndIndexRows()}}},{key:"getColumnIndices",value:function(){return{startColumnIndex:this.columnsWindowing.getStartIndexColumns(),endColumnIndex:this.columnsWindowing.getEndIndexColumns()}}},{key:"doWindowing",value:function(e){return this.doRowWindowing(e)}},{key:"doRowWindowing",value:function(e){var t=o(e.rows),n=this.rowsWindowing.getLastFrozenRowIndex(),r=this.rowsWindowing.getStartIndexRows(),i=this.rowsWindowing.getEndIndexRows(),l=void 0===i?t.length:i+1;return this.frozenRows=e.hasFixedRowsCols?t.slice(0,n+1):[],this.preFillArray=new Array(Math.max(0,r-this.frozenRows.length)),this.afterFillArray=new Array(Math.max(0,t.length-l)),this.contentRows=t.slice(r,l),e.rows=[].concat(o(this.frozenRows),o(this.preFillArray),o(this.contentRows),o(this.afterFillArray)),e}}]),e}(),bl=n(973);function Cl(e){return 0===e.toLowerCase().indexOf("mac")||"iPhone"===e||"iPad"===e||"iPod"===e}function wl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Sl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wl(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wl(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Rl(e,t,n,r,o){var i={startRow:999999,startCol:999999,endRow:0,endCol:0,selectionType:T.Region},l=v.Widget;return t===v.AllCells&&(l=v.AllCells,i=Tl(e,i)),t===v.DatacellRegion&&(l=v.DatacellRegion,i=function(e){return{startCol:e.dataRegionCornerCol+1,endCol:e.dataRegionEndCol,startRow:e.dataRegionCornerRow+1,endRow:e.dataRegionEndRow,selectionType:T.Region}}(e)),t===v.HeaderRegion&&(l=v.HeaderRegion,i=function(e){return{startCol:e.dataRegionStartCol,endCol:e.dataRegionEndCol,cornerCol:e.dataRegionCornerCol,startRow:e.dataRegionStartRow,endRow:e.dataRegionEndRow,cornerRow:e.dataRegionCornerRow,selectionType:T.Region}}(e)),t===v.Dimension&&(l=v.Dimension,i=function(e,t){var n=e.dimensionCellCoordinatesInHeader[t||""];return{startRow:n?n.startRow:0,endRow:n?n.endRow:0,startCol:n?n.startCol:0,endCol:n?n.endCol:0,selectionType:T.Region}}(e,o)),t===v.Row&&(l=v.Row,i=function(e,t){return{selectionType:T.Rows,startCol:0,endCol:e.columnSettings.length-1,startRow:t,endRow:t}}(e,n)),t===v.Column&&(l=v.Column,i=function(e,t){return{selectionType:T.Columns,startCol:t,endCol:t,startRow:0,endRow:e.rows.length-1}}(e,r)),{selectionArea:i,context:l}}function Tl(e,t){var n=e.rows.length-1<0?0:e.rows.length-1,r=e.columnSettings.length-1<0?0:e.columnSettings.length-1;return Sl(Sl({},t),{},{startRow:0,startCol:0,endRow:n,endCol:r,selectionType:T.All})}function El(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Dl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?El(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):El(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function kl(e){var t=e.ctrlOrMetaKeyPressed,n=e.shiftPressed,r=e.currentSelection,o=Dl({},r);return t||n||(o.endCol=0,o.startCol=0),n&&(o.endCol=0),t&&(o.endCol=0,o.startCol=n?r.startCol:0,o.endRow=0,o.startRow=n?r.startRow:0),o}function Ol(e){var t=e.ctrlOrMetaKeyPressed,n=e.shiftPressed,r=e.currentSelection,o=e.tableData,i=Dl({},r);return t||n||(i.endCol=o.columnSettings.length-1,i.startCol=n?r.startCol:o.columnSettings.length-1),n&&(i.endCol=o.columnSettings.length-1),t&&(i.endRow=o.rows.length-1,i.startRow=n?r.startRow:o.rows.length-1,i.endCol=o.columnSettings.length-1,i.startCol=n?r.startCol:o.columnSettings.length-1),i}function xl(e){var t=e.ctrlOrMetaKeyPressed,n=e.shiftPressed,r=e.currentSelection,o=e.tableData,i=Dl({},r);return t&&!n?(i.endRow=o.rows.length-1,i.startRow=0,i.selectionType=T.Columns,r.selectionType===T.Rows?Tl(o,i):i):n&&!t?(i.endCol=o.columnSettings.length-1,i.startCol=0,i.selectionType=T.Rows,r.selectionType===T.Columns?Tl(o,i):i):t&&n?Tl(o,i):i}function Al(e,t){(function(e,t){var n=vn(e)||yn(e);return!(t&&n)})(e,t)&&(e.selectionType=T.Box,delete e.cornerCol,delete e.cornerRow)}function Ll(e){var t=Dl({},e.currentSelection);return Al(t,e.shiftPressed),e.ctrlOrMetaKeyPressed||e.shiftPressed?(e.shiftPressed&&(t.endRow=e.mergedCellIndices.endRow+1,t.endCol=e.mergedCellIndices.endCol),e.ctrlOrMetaKeyPressed&&(t.endRow=e.lastRowIndex,t.startRow=e.shiftPressed?t.startRow:e.lastRowIndex)):(t.startRow=e.mergedCellIndices.endRow+1,t.endRow=e.mergedCellIndices.endRow+1,t.endCol=t.startCol),t}function Il(e){var t=Dl({},e.currentSelection);return Al(t,e.shiftPressed),e.ctrlOrMetaKeyPressed||e.shiftPressed?(e.shiftPressed&&(t.endCol=e.mergedCellIndices.startCol-1,t.endRow=e.mergedCellIndices.endRow),e.ctrlOrMetaKeyPressed&&(t.endCol=0,t.startCol=e.shiftPressed?t.startCol:0)):(t.endRow=t.startRow,t.startCol=e.mergedCellIndices.startCol-1,t.endCol=e.mergedCellIndices.startCol-1),t}function Ml(e){var t=Dl({},e.currentSelection);return Al(t,e.shiftPressed),e.ctrlOrMetaKeyPressed||e.shiftPressed?(e.shiftPressed&&(t.endCol=e.mergedCellIndices.endCol+1,t.endRow=e.mergedCellIndices.endRow),e.ctrlOrMetaKeyPressed&&(t.endCol=e.lastColIndex,t.startCol=e.shiftPressed?t.startCol:e.lastColIndex)):(t.endRow=t.startRow,t.startCol=e.mergedCellIndices.endCol+1,t.endCol=e.mergedCellIndices.endCol+1),t}function Pl(e){var t=Dl({},e.currentSelection);return Al(t,e.shiftPressed),e.ctrlOrMetaKeyPressed||e.shiftPressed?(e.shiftPressed&&(t.endRow=e.mergedCellIndices.startRow-1,t.endCol=e.mergedCellIndices.endCol),e.ctrlOrMetaKeyPressed&&(t.endRow=e.firstRow,t.startRow=e.shiftPressed?t.startRow:e.firstRow)):(t.startRow=e.mergedCellIndices.startRow-1,t.endRow=e.mergedCellIndices.startRow-1,t.endCol=t.startCol),t}function Hl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _l(e,t){var n=e.ctrlOrMetaKeyPressed,r=e.selectionArea,o=e.shiftPressed;return{fireSelectionUpdate:!0,selectionArea:t({currentSelection:r,tableData:e.tableData,ctrlOrMetaKeyPressed:n,shiftPressed:o}),singleSelection:!0,isKeyEvent:!0}}function Nl(e){var t=Wl(e,Ll);return t.scrollDirection=e.ctrlOrMetaKeyPressed?ft.LastRow:ft.Down,t}function zl(e){var t=Wl(e,Il);return t.scrollDirection=e.ctrlOrMetaKeyPressed?ft.FirstCol:ft.Left,t}function Bl(e){var t=Wl(e,Ml);return t.scrollDirection=e.ctrlOrMetaKeyPressed?ft.LastCol:ft.Right,t}function Fl(e){var t=Wl(e,Pl);return t.scrollDirection=e.ctrlOrMetaKeyPressed?ft.FirstRow:ft.Up,t}function Wl(e,t){var n=e.ctrlOrMetaKeyPressed,r=e.selectionArea,o=e.shiftPressed,i=e.tableData;return{fireSelectionUpdate:!0,selectionArea:t({currentSelection:r,ctrlOrMetaKeyPressed:n,shiftPressed:o,mergedCellIndices:Kt(r.endRow,r.endCol,i.rows),firstRow:0,lastRowIndex:i.rows.length-1,lastColIndex:i.columnSettings.length-1}),singleSelection:!0,isKeyEvent:!0}}function jl(e){var t=_l(e,kl);return t.scrollDirection=e.ctrlOrMetaKeyPressed?ft.FirstCell:ft.FirstCol,t}function Vl(e){var t=_l(e,Ol);return t.scrollDirection=e.ctrlOrMetaKeyPressed?ft.LastCell:ft.LastCol,t}function Ul(e){return _l(e,xl)}function Gl(e){return{selectionArea:Tl(e.tableData,e.selectionArea),singleSelection:!0,isKeyEvent:!0,context:v.AllCells,fireSelectionUpdate:!0}}function Kl(e){var t=e.selectionArea,n=e.selectionContextType,r=e.shiftPressed,o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hl(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hl(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t),i=ft.Up;if(n===v.Widget)o.startRow=0,o.startCol=0,o.endRow=0,o.endCol=0;else if(r)o.startRow=t.startRow-1,o.endRow=t.startRow-1,o.endCol=t.startCol;else{var l=pn(n)?0:1;o.startRow=t.startRow+l,o.endRow=t.startRow+l,o.endCol=t.startCol,i=ft.Down}return{selectionArea:o,scrollDirection:i,singleSelection:!0,isKeyEvent:!0,triggeredByTabEnter:!0,fireSelectionUpdate:!0}}function Zl(e){var t=e.selectionArea,n=e.tableData,r=e.selectionContextType,o=e.shiftPressed,i=rn(n.rows),l=i?i.row:0,s=n.rows.length-1+l,a=n.columnSettings.length-1,c=pn(r);if(c&&o)return{clearSelection:!0,isKeyEvent:!0};var u=o?function(e,t,n){var r=an({},e);return 0===r.startCol&&0===r.startRow?(r.startRow=t,r.endRow=t,r.startCol=n,r.endCol=n,{newSelectionArea:r,scrollDirection:ft.LastCell}):0===r.startCol?(r.startRow=e.endRow-1,r.endRow=e.endRow-1,r.startCol=n,r.endCol=n,{newSelectionArea:r,scrollDirection:ft.UpAndLastCol}):(r.endRow=e.startRow,r.startCol=e.startCol-1,r.endCol=e.startCol-1,{newSelectionArea:r,scrollDirection:ft.Left})}(t,s,a):function(e,t,n,r){var o=an({},e);if(o.startCol===n&&o.startRow===t)return o.startRow=0,o.endRow=0,o.startCol=0,o.endCol=0,{newSelectionArea:o,scrollDirection:ft.FirstCell};if(o.startCol===n)return o.endRow=e.startRow+1,o.startRow=e.startRow+1,o.startCol=0,o.endCol=0,{newSelectionArea:o,scrollDirection:ft.DownAndFirstCol};var i=r?1:0;return o.endRow=e.startRow,o.startCol=e.startCol+1-i,o.endCol=e.startCol+1-i,{newSelectionArea:o,scrollDirection:ft.Right}}(t,s,a,c);return{selectionArea:u.newSelectionArea,singleSelection:!0,scrollDirection:u.scrollDirection,isKeyEvent:!0,triggeredByTabEnter:!0,fireSelectionUpdate:!0}}Oe()(bl.Z,{insert:"head",singleton:!1}),bl.Z.locals,v.Widget;var Xl=function(){function e(){a(this,e),this.mapKeyDownToSelection={TAB:function(e){return pn(e.selectionContextType)&&e.shiftPressed?{clearSelection:!0,isKeyEvent:!0}:Pn}}}return u(e,[{key:"handleSelectionForMouseDown",value:function(e,t,n,r,o,i,l,s,a,c){l||n(!0)}},{key:"handleSelectionForMouseUp",value:function(e,t,n,r,o){}},{key:"handleClick",value:function(e,t,n,r,o){}},{key:"handleOverlayClick",value:function(e,t,n,r,o,i){}},{key:"handleKeyDown",value:function(e,t,n,r,o){var i,l;return(null===(i=(l=this.mapKeyDownToSelection)[e])||void 0===i?void 0:i.call(l,{tableData:t,selectionArea:n,selectionContextType:r,shiftPressed:o.shiftKey,ctrlOrMetaKeyPressed:en(o)}))||Pn}},{key:"getSelectionInProcess",value:function(){return!1}},{key:"setSelectionInProcess",value:function(e){}},{key:"getKeepSelectionAlive",value:function(){return!1}},{key:"setKeepSelectionAlive",value:function(e){}},{key:"getCopying",value:function(){return!1}},{key:"setCopying",value:function(e){}},{key:"getDraggerSelectionArea",value:function(){return null}},{key:"setDraggerSelectionArea",value:function(e){}},{key:"getSelectedDimensions",value:function(){return[]}},{key:"supportsRowColumnHover",value:function(){return!1}},{key:"supportsCopyDragger",value:function(){return!1}}]),e}();function ql(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Yl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ql(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ql(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var $l=!1,Ql={ARROWDOWN:function(e){return Nl(Yl(Yl({},e),{},{shiftPressed:$l}))},ARROWLEFT:function(e){return zl(Yl(Yl({},e),{},{shiftPressed:$l}))},ARROWRIGHT:function(e){return Bl(Yl(Yl({},e),{},{shiftPressed:$l}))},ARROWUP:function(e){return Fl(Yl(Yl({},e),{},{shiftPressed:$l}))},HOME:function(e){return jl(Yl(Yl({},e),{},{shiftPressed:$l}))},END:function(e){return Vl(Yl(Yl({},e),{},{shiftPressed:$l}))},SPACE:function(e){return Ul(Yl(Yl({},e),{},{ctrlOrMetaKeyPressed:!1,shiftPressed:$l}))},ENTER:function(e){return Kl(e)},TAB:function(e){return Zl(e)}},Jl=function(){function e(t){a(this,e),s(this,"keepSelectionAlive",!1),this.mapKeyDownToSelection=t||Ql}return u(e,[{key:"handleSelectionForMouseDown",value:function(e,t,n,r,o,i,l,s,a,c){var u;l||n(!0),null===(u=a.onCellMouseDown)||void 0===u||u.call(a,c),l||es(o,s,c)}},{key:"handleSelectionForMouseUp",value:function(e,t,n,r,o){this.keepSelectionAlive=!0,r.event.preventDefault(),t.onCellSelected(),t.onCellMouseUp&&t.onCellMouseUp(r)}},{key:"getSelectionInProcess",value:function(){return!1}},{key:"setSelectionInProcess",value:function(e){}},{key:"getKeepSelectionAlive",value:function(){return this.keepSelectionAlive}},{key:"setKeepSelectionAlive",value:function(e){this.keepSelectionAlive=e}},{key:"getCopying",value:function(){return!1}},{key:"setCopying",value:function(e){}},{key:"getDraggerSelectionArea",value:function(){return null}},{key:"setDraggerSelectionArea",value:function(e){}},{key:"getSelectedDimensions",value:function(){return[]}},{key:"supportsRowColumnHover",value:function(){return!1}},{key:"supportsCopyDragger",value:function(){return!1}},{key:"handleKeyDown",value:function(e,t,n,r,o){var i,l;return(null===(i=(l=this.mapKeyDownToSelection)[e])||void 0===i?void 0:i.call(l,{tableData:t,selectionArea:n,selectionContextType:r,shiftPressed:o.shiftKey,ctrlOrMetaKeyPressed:en(o)}))||Pn}},{key:"handleClick",value:function(e,t,n,r,o){this.keepSelectionAlive?this.keepSelectionAlive=!1:ts(e,t,n,r,o)}},{key:"handleOverlayClick",value:function(e,t,n,r,o,i){}}]),e}();function es(e,t,n){var r,o,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.editMode&&n.cellType===E.Chart&&!i&&t.cellChartData&&n.chartDimension&&n.chartContext){var l=t.cellChartData[n.chartDimension];r={startCol:l.startCol,endCol:l.endCol,startRow:l.startRow,endRow:l.endRow,selectionType:T.Box,isCellChartSelection:!0,inCellChartContext:n.chartContext},o=v.CellChart}else r={startRow:n.row,startCol:n.col,endRow:n.row,endCol:n.col,selectionType:T.Box},o=xn({cellType:n.cellType,selectedRegions:1});e({selectionArea:r,singleSelection:!0,context:o,isKeyEvent:!1,fireSelectionUpdate:!!t.mobile,isMouseUpEvent:!!t.mobile&&void 0})}function ts(e,t,n,r,o){var i=e.target,l=i.closest&&i.closest(".tableCell"),s=l&&l.getAttribute("data-tablecol"),a=l&&l.getAttribute("data-tablerow"),c=void 0!==s&&void 0!==a,u=null!==s&&null!==a;if(n()){if(t.mobile&&u&&c){var h=document.createEvent("MouseEvents");h.initEvent("mousedown",!0,!0),e.target.dispatchEvent(h)}}else e&&(e.ctrlKey||e.shiftKey)||(r(!0),u&&c&&l&&"string"==typeof s&&"string"==typeof a&&!l.classList.contains("coordinateHeader")&&function(e,t,n,r,o){var i=r.rows[n],l=i&&i.cells[t];l&&r.editMode&&l.cellType===E.Chart&&r.cellChartData&&l.cellChart?o(Hn(r,n,t)):(e.persist(),o({selectionArea:{startRow:n,startCol:t,endRow:n,endCol:t,selectionType:T.Box},singleSelection:!0,fireSelectionUpdate:!0,event:e.nativeEvent,isKeyEvent:!1}))}(e,parseInt(s,10),parseInt(a,10),t,o))}function ns(e){switch(e){case _.None:return new Xl;case _.Default:return new is;case _.SingleCell:return new Jl;default:return new is}}function rs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function os(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rs(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rs(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var is=function(){function e(t){a(this,e),s(this,"selectionInProcess",!1),s(this,"keepSelectionAlive",!1),s(this,"copying",!1),s(this,"draggerSelectionArea",null),s(this,"selectedDimensions",[]),this.mapKeyDownToSelection=t||{A:Gl,ARROWDOWN:Nl,ARROWLEFT:zl,ARROWRIGHT:Bl,ARROWUP:Fl,HOME:jl,END:Vl,SPACE:Ul,ENTER:Kl,TAB:Zl}}return u(e,[{key:"handleSelectionForMouseDown",value:function(e,t,n,r,o,i,l,s,a,c,u){var h,d,p=en(c.event),f=c.event.shiftKey,g=p||f,m=Cl(navigator.platform)&&0===c.event.button&&c.event.ctrlKey;if((g&&2===c.event.button||m)&&(p=!1,f=!1,g=!1),!t()){if(s.editMode&&g)return void r(!1);r(g),l||n(!0)}var y=(null===(h=a.getDataEntryInProgress)||void 0===h?void 0:h.call(a))||!!s.activeNewLineMemberCell;null===(d=a.onCellMouseDown)||void 0===d||d.call(a,c);var b=function(e,t){return e.selectedRegions.some(function(e){var n=e.startCol<=t.col&&e.endCol>=t.col||e.startCol>=t.col&&e.endCol<=t.col,r=e.startRow<=t.row&&e.endRow>=t.row||e.startRow>=t.row&&e.endRow<=t.row;return n&&r})}(i.selection,c);if(!(b&&2===c.event.button&&i.selection.selectionContextType===v.MultiCell||p&&fn(i.selection.selectionContextType,i.hover.hoverContextType)))return function(e,t,n,r){var o,i=v.HeaderRegion===t.hover.hoverContextType,l=v.DatacellRegion===t.hover.hoverContextType,s=v.Dimension===t.hover.hoverContextType,a=v.CellChart===t.hover.hoverContextType,c=oe(e.cellType),u=un(t.selection.selectionContextType),h=!hn(t.selection.selectionContextType),d=!u,p=u||dn(t.selection.selectionContextType)&&!r.includes(null===(o=e.context)||void 0===o?void 0:o.originalDimension);return!!(n&&(i&&d||l&&h||s&&p)||c||a)}(c,i,s.designMode,this.selectedDimensions)?(this.setSelectionInProcess(oe(c.cellType)&&!y),void this.handleRegionSelection(e,o,i,s,a,c)):void(l||(m||this.startSelectionInProcess(c,y),p?this.handleCtrlMouseDown(e,a,s,b,c,u):p||f?f&&this.handleShiftMouseDown(e,a,s,i.selection,c):es(o,s,c,b)))}},{key:"handleSelectionForMouseUp",value:function(e,t,n,r,o){if(this.keepSelectionAlive=!0,r.event.preventDefault(),o===b.None&&this.selectionInProcess){var i=en(r.event),l=r.event.shiftKey;i||l||!n.copyInProcess||e(function(e){return os(os({},e),{},{copyInProcess:!1})}),0===r.event.button&&Dn(n.selection,t,!1,!0),this.copying&&t.onDragCopyFinish&&t.onDragCopyFinish({originalRegion:this.draggerSelectionArea,shiftKey:r.event.shiftKey}),this.setSelectionInProcess(!1),this.copying=!1,t.onCellSelected()}t.onCellMouseUp&&t.onCellMouseUp(r)}},{key:"handleCoordinateSelection",value:function(e,t,n,r,o,i){var l=i.event,s=i.row,a=i.col,c=en(i.event),u=l&&l.shiftKey,h=In(n);if(!c&&!u||gn(h,s,a)||mn(h,s,a)){var d=Cn(i.cellType),p=Rl(r,d,s,a),f=p.selectionArea,g=p.context;if(c)e(function(e){return Ln(e,o,f,!1)});else{if(u){var m=os({},h);return m.endRow=s>=0?s:m.endRow,m.endCol=a>=0?a:m.endCol,void t({selectionArea:m,singleSelection:!0,context:g,isKeyEvent:!1})}t({selectionArea:f,singleSelection:!0,context:d,isKeyEvent:!1})}}}},{key:"handleRegionSelection",value:function(e,t,n,r,o,i){if(i&&oe(i.cellType))this.handleCoordinateSelection(e,t,n.selection,r,o,i);else{var l=i?i.row:-1,s=i?i.col:-1,a=i&&i.context&&i.context.originalDimension||n.hover.dimensionId,c=n.hover.hoverContextType,u=i&&en(i.event);if(!u||!fn(n.selection.selectionContextType,n.hover.hoverContextType)){var h=n.hover.hoverContextType===v.Dimension;u&&h?this.selectedDimensions.push(a):this.selectedDimensions=h?[a]:[];var d=Rl(r,c,l,s,a),p=d.selectionArea,f=d.context;c===v.CellChart&&r.cellChartData?t(Hn(r,l,s)):(c=f,u?e(function(e){return Ln(e,o,p,!0)}):t({selectionArea:p,singleSelection:!0,context:c,isKeyEvent:!1}))}}}},{key:"getSelectionInProcess",value:function(){return this.selectionInProcess}},{key:"setSelectionInProcess",value:function(e){this.selectionInProcess=e}},{key:"getKeepSelectionAlive",value:function(){return this.keepSelectionAlive}},{key:"setKeepSelectionAlive",value:function(e){this.keepSelectionAlive=e}},{key:"getCopying",value:function(){return this.copying}},{key:"setCopying",value:function(e){this.copying=e}},{key:"getDraggerSelectionArea",value:function(){return this.draggerSelectionArea}},{key:"setDraggerSelectionArea",value:function(e){this.draggerSelectionArea=e}},{key:"getSelectedDimensions",value:function(){return this.selectedDimensions}},{key:"supportsRowColumnHover",value:function(){return!0}},{key:"supportsCopyDragger",value:function(){return!0}},{key:"handleKeyDown",value:function(e,t,n,r,o){var i,l,s=en(o),a=o.shiftKey;return(null===(i=(l=this.mapKeyDownToSelection)[e])||void 0===i?void 0:i.call(l,{tableData:t,selectionArea:n,selectionContextType:r,ctrlOrMetaKeyPressed:s,shiftPressed:a}))||Pn}},{key:"handleCtrlMouseDown",value:function(e,t,n,r,i,l){if(r)this.setSelectionInProcess(!1),e(function(e){var r=e.selection.selectedRegions.filter(function(e){return!(e.startCol===i.col&&e.endCol===i.col&&e.startRow===i.row&&e.endRow===i.row)}),o=os(os({},e.selection),{},{selectedRegions:r,selectionContextType:xn({cellType:i.cellType,selectedRegions:r.length})});if(Dn(o,t,!1,!1),r.length>0){var s=In(o);$t(n,s)}else l();return os(os({},e),{},{selection:o})});else{this.preventDragSelectionForMacOS();var s={startRow:i.row,startCol:i.col,endRow:i.row,endCol:i.col,selectionType:T.Box};e(function(e){var r=[].concat(o(e.selection.selectedRegions),[s]),l=os(os({},e.selection),{},{selectedRegions:r,selectionContextType:xn({cellType:i.cellType,selectedRegions:r.length})});Dn(l,t,!1,!1);var a=In(l);return $t(n,a),os(os({},e),{},{selection:l})})}}},{key:"preventDragSelectionForMacOS",value:function(){Cl(navigator.platform)&&this.setSelectionInProcess(!1)}},{key:"handleShiftMouseDown",value:function(e,t,n,r,i){e(function(e){var l=os(os({},In(r)),{},{endRow:i.row,endCol:i.col});l=Xt(l,n.rows);var s=o(e.selection.selectedRegions);0===s.length&&(l.startRow=i.row,l.startCol=i.col),s[Math.max(0,s.length-1)]=l;var a=os(os({},e.selection),{},{selectedRegions:s,selectionContextType:xn({selectedRegions:s.length})});return Dn(a,t,!1,!1),os(os({},e),{},{selection:a})})}},{key:"handleClick",value:function(e,t,n,r,o){this.keepSelectionAlive?this.keepSelectionAlive=!1:ts(e,t,n,r,o)}},{key:"handleOverlayClick",value:function(e,t,n,r,i,l){var s=os({},In(e)),a=en(t.event),c=dn(e.selectionContextType);if(!a||!cn(e.selectionContextType)&&!c){var u=t.event.shiftKey,h=void 0!==t.col?t.col:-1,d=void 0!==t.row?t.row:-1;h>=0&&(s.endRow=n.rows.length-1,s.startRow=0,s.startCol=u?s.startCol:h,s.endCol=h,s.selectionType=T.Columns),d>=0&&(s.endCol=n.columnSettings.length-1,s.startCol=0,s.startRow=u?s.startRow:d,s.endRow=d,s.selectionType=T.Rows),u||!u&&!a?r({selectionArea:s,singleSelection:!0,isKeyEvent:!1}):i(function(e){var t=o(e.selection.selectedRegions);t.push(s);var n=s.selectionType===T.Columns?v.Column:v.Row,r=os(os({},e.selection),{},{selectedRegions:t,selectionContextType:n});return Dn(r,l),os(os({},e),{},{selection:r})})}}},{key:"startSelectionInProcess",value:function(e,t){var n=0===e.event.button&&!t;this.setSelectionInProcess(n)}}]),e}(),ls=function(){function e(){a(this,e)}var t,r,o;return u(e,null,[{key:"loadApi",value:(o=l(F().mark(function e(){return F().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(n,431));case 2:return this.view=e.sent,e.next=5,Promise.resolve().then(n.bind(n,405));case 5:this.state=e.sent;case 6:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"getView",value:(r=l(F().mark(function e(){return F().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.view){e.next=3;break}return e.next=3,this.loadApi();case 3:return e.abrupt("return",this.view);case 4:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"getState",value:(t=l(F().mark(function e(){return F().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state){e.next=3;break}return e.next=3,this.loadApi();case 3:return e.abrupt("return",this.state);case 4:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})}]),e}();function ss(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function as(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ss(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ss(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function cs(e,t){return{".cm-scroller":{fontFamily:"inherit",lineHeight:"inherit"},".cm-line":{padding:0},".cm-content":{caretColor:"inherit",padding:0},"&":as(as({width:"100%",backgroundColor:e},t===g.Middle||t===g.Bottom?{marginTop:"auto"}:void 0),t===g.Middle||t===g.Top?{marginBottom:"auto"}:void 0),"&.cm-editor.cm-focused":{outline:"none"}}}var us,hs=function(){function e(t){var n;a(this,e),this.externalSubmitValue=t.submitValue,this.externalCancelEdit=t.cancelEdit,this.externalBlur=t.blurEditor,this.extensions=t.extensions||[],this.parentElement=t.parentElement,this.initialValue=t.initialValue,this.cursorPosition=null!==(n=t.cursorPosition)&&void 0!==n?n:this.initialValue.length}var n,r;return u(e,[{key:"createAndRenderEditor",value:(r=l(F().mark(function e(){var t=this;return F().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){ls.getView().then(function(){var n=l(F().mark(function n(r){var o,i,l;return F().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=r.EditorView,n.next=3,t.getEditorConfig(t.parentElement,t.initialValue,t.cursorPosition);case 3:l=n.sent,t.currentEditor=new i(l),null===(o=t.currentEditor)||void 0===o||o.focus(),e();case 7:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()).catch(function(e){console.error("editor could not be loaded",e),n()})}));case 1:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})},{key:"getEditor",value:function(){return this.currentEditor}},{key:"deleteEditor",value:function(){this.currentEditor&&this.currentEditor.destroy(),this.currentEditor=null}},{key:"onKeyDown",value:function(e){this.currentEditor&&["Enter","NumpadEnter","Tab"].includes(e.code)&&this.externalSubmitValue(this.getCurrentValue()),"Escape"===e.code&&this.externalCancelEdit(),this.handleOnKeyDownEventPropagation(e)}},{key:"onKeyUp",value:function(e){this.handleOnKeyUpEventPropagation(e)}},{key:"getCurrentValue",value:function(){var e;return(null===(e=this.currentEditor)||void 0===e?void 0:e.state.doc.toString())||""}},{key:"onBlur",value:function(){var e=this.getCurrentValue();this.externalBlur(e)}},{key:"getEditorConfig",value:(n=l(F().mark(function e(n,r,i){var l,s,a=this;return F().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=ls.getView(),s=ls.getState(),e.abrupt("return",new Promise(function(e,c){Promise.all([l,s]).then(function(l){var s,c,u=(c=2,function(e){if(Array.isArray(e))return e}(s=l)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,s=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{l||null==n.return||n.return()}finally{if(s)throw o}}return i}}(s,c)||t(s,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=u[0].EditorView,d=u[1].EditorState.create({doc:r,selection:{anchor:i,head:i},extensions:[h.domEventHandlers({keydown:a.onKeyDown.bind(a),keyup:a.onKeyUp.bind(a),mousedown:function(e){e.stopPropagation()},blur:a.onBlur.bind(a)})].concat(o(a.extensions),[h.lineWrapping])});e({parent:n,state:d})}).catch(function(e){console.error("editor could not be loaded",e),c()})}));case 3:case"end":return e.stop()}},e)})),function(e,t,r){return n.apply(this,arguments)})},{key:"handleOnKeyDownEventPropagation",value:function(e){["Enter","Tab","Escape"].includes(e.code)||((e.ctrlKey&&["Backspace"].includes(e.code)||(e.ctrlKey||e.metaKey)&&["KeyB","KeyI","KeyU"].includes(e.code))&&e.preventDefault(),e.stopImmediatePropagation())}},{key:"handleOnKeyUpEventPropagation",value:function(e){(["Backspace","Delete"].includes(e.code)||(e.ctrlKey||e.metaKey)&&["KeyA","KeyV"].includes(e.code)||(e.ctrlKey||e.metaKey||e.shiftKey)&&["Space"].includes(e.code))&&e.stopImmediatePropagation()}}]),e}(),ds=(s(us={},E.Value,hs),s(us,E.Custom,hs),s(us,E.Empty,hs),s(us,E.Comment,hs),s(us,E.ColDimMember,hs),s(us,E.RowDimMember,hs),s(us,E.Threshold,hs),us),ps=function(){function e(t){a(this,e),this.doNotBlur=!1,this.textEditorForCellTypes=t.textEditorForCellTypes,this.confirmTextEdit=t.confirmTextEdit,this.cancelTextEdit=t.cancelTextEdit,this.boundOnSubmit=this.onSubmitValue.bind(this),this.boundOnCancel=this.onCancelEdit.bind(this),this.boundOnBlur=this.onBlurEditor.bind(this)}var t;return u(e,[{key:"getEditor",value:function(){return this.editorInstance}},{key:"startEdit",value:(t=l(F().mark(function e(t){var n=this;return F().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){ls.getView().then(function(){var o=l(F().mark(function o(i){var l,s,a,c,u,h,d,p,f,g;return F().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(l=i.EditorView,n.editorInstance){o.next=17;break}if(s=t.cellType,a=t.backgroundColor,c=t.verticalAlignment,u=t.targetCell,h=t.initialValue,d=t.row,p=t.col,f=t.cursorPosition,n.targetCell=u,g=n.textEditorForCellTypes[s],!n.targetCell||!g){o.next=17;break}return n.editorDom=document.createElement("div"),n.editorDom.id="sacGridEditorContainer",n.targetCell.classList.add("editing"),n.targetCell.append(n.editorDom),n.cellEditCoordinate={row:d,col:p},n.doNotBlur=!1,n.editorInstance=new g({parentElement:n.editorDom,initialValue:h,cursorPosition:f,extensions:[l.theme(cs(a,c))],submitValue:n.boundOnSubmit,cancelEdit:n.boundOnCancel,blurEditor:n.boundOnBlur}),o.next=15,n.editorInstance.createAndRenderEditor();case 15:return e(),o.abrupt("return");case 17:r();case 18:case"end":return o.stop()}},o)}));return function(e){return o.apply(this,arguments)}}()).catch(function(e){console.error("editor could not be loaded",e),r()})}));case 1:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})},{key:"onSubmitValue",value:function(e){var t;null===(t=this.confirmTextEdit)||void 0===t||t.call(this,{newValue:e,cellEditCoordinate:this.cellEditCoordinate}),this.doNotBlur=!0,this.removeEditor()}},{key:"onCancelEdit",value:function(){var e;null===(e=this.cancelTextEdit)||void 0===e||e.call(this),this.doNotBlur=!0,this.removeEditor()}},{key:"onBlurEditor",value:function(e){var t;this.doNotBlur||(null===(t=this.confirmTextEdit)||void 0===t||t.call(this,{newValue:e,cellEditCoordinate:this.cellEditCoordinate}),this.removeEditor())}},{key:"removeEditor",value:function(){var e,t,n;null===(e=this.targetCell)||void 0===e||e.classList.remove("editing"),this.targetCell=null,null===(t=this.editorInstance)||void 0===t||t.deleteEditor(),null===(n=this.editorDom)||void 0===n||n.remove(),this.editorDom=null,this.editorInstance=null}}]),e}();function fs(e,t){return void 0===t?e?-1:void 0:e||-1!==t?t:void 0}function gs(e,t){return e.reduce(function(e,n){return e+n.height+t},0)}function ms(e,t,n,r){return!(e+r<=t||e-t>=n)}var vs=function(){function e(t,n,r){a(this,e),s(this,"stickyRowMembers",[]),s(this,"stickyColumnMembers",[]),this.freezeEndRow=t,this.freezeEndCol=n,this.keepOnlyMembersInsideSectionCallBack=r||function(){return!0}}return u(e,[{key:"getRowMembers",value:function(){return this.stickyRowMembers}},{key:"getColumnMembers",value:function(){return this.stickyColumnMembers}},{key:"updateRowMembers",value:function(e){var t=this;this.stickyRowMembers=e.filter(function(e){return t.keepOnlyMembersInsideSectionCallBack(e)})}},{key:"updateColumnMembers",value:function(e){var t=this;this.stickyColumnMembers=e.filter(function(e){return t.keepOnlyMembersInsideSectionCallBack(e)})}},{key:"updatePositionRowMembers",value:function(e){}},{key:"updatePositionColumnMembers",value:function(e){}},{key:"getRenderProps",value:function(e,t,n){return{key:"dummyKey",className:"dummyClass",style:{},stickyColumnMembers:this.getColumnMembers(),stickyRowMembers:this.getRowMembers(),backgroundColor:t,fontOverride:n,showSection:this.shouldShowSection(this.getColumnMembers(),this.getRowMembers())}}},{key:"shouldShowSection",value:function(e,t){return e.length>0||t.length>0}}]),e}(),ys="stickyMembersContainer",bs="stickyMembersGroup",Cs=he.GRID_BORDER_SIZE;function ws(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ss(e){return Ds(e)}function Rs(e){return ks(e)}function Ts(e){return Ds(e)}function Es(e){return ks(e)}function Ds(e){var t=e.currentStickyIndex,n=e.currentContentSizeOutside;if(0!==e.sizes.length)for(;e.currentScrollWithFreeze>=n+(null!==(r=e.sizes[t])&&void 0!==r?r:e.defaultSize)-e.padding;){var r,o;n+=null!==(o=e.sizes[t])&&void 0!==o?o:e.defaultSize,t++}return{contentSizeOutside:n,stickyIndex:t}}function ks(e){var t=e.currentStickyIndex,n=e.currentContentSizeOutside;if(0!==e.sizes.length)for(;e.currentScrollWithFreeze<n-e.padding&&n>0;){var r;t--,n-=null!==(r=e.sizes[t])&&void 0!==r?r:e.defaultSize}return{contentSizeOutside:Math.max(0,n),stickyIndex:Math.max(0,t)}}function Os(e,t,n,r){if(n&&void 0!==n.refCol&&void 0!==n.refRow&&r(n.cellType)){var o=function(e,t,n){var r=e[t];if(!r)return null;var o=r.cells[n];return o?{row:o.row,column:o.column,formatted:o.formatted,top:0,left:0,width:0,height:0,show:!0,referencedCell:o}:null}(t,n.refRow,n.refCol);o&&e.push(o)}}function xs(e,t,n){return e.slice(t,n).reduce(function(e,t){return e+t},0)}function As(e,t,n){return void 0!==e&&t<=e?0:n}function Ls(e){var t=Ms(e.rows,e.stickyMember);if(!t)return 0;var n=t.column;return Hs(e.stickyMember.width,n,e)}function Is(e){var t=Ps(e.rows,e.stickyMember);if(!t)return 0;var n=t.row;return Hs(e.stickyMember.height,n,e)}function Ms(e,t){var n=e[t.row];if(n)return n.cells.slice(t.column+1).find(function(e){return""!==e.formatted})}function Ps(e,t){var n,r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ws(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ws(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}(e.slice(t.row+1));try{for(o.s();!(r=o.n()).done;){var i=r.value.cells[t.column];if(i&&""!==i.formatted){n=i;break}}}catch(e){o.e(e)}finally{o.f()}return n}function Hs(e,t,n){var r=n.sizes,o=n.scroll,i=n.freezeEndIndex,l=xs(r,void 0!==i?i+1:0,t);return l<=o+e?l-o-e:0}function _s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ns(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ns(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}function Ns(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zs=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e,t){var n;return a(this,o),(n=r.call(this,e,t)).keepOnlyMembersInsideSectionCallBack=n.keepOnlyMembersInsideSection.bind(V(n)),n}return u(o,[{key:"updatePositionRowMembers",value:function(e){var t,n=_s(this.stickyRowMembers);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=As(this.freezeEndCol,r.column,e.scrollPosition.scrollLeft);r.top=Is({stickyMember:r,rows:e.cachedData.rows,sizes:e.rowHeights,scroll:e.scrollPosition.scrollTop,freezeEndIndex:this.freezeEndRow}),r.left=xs(e.columnWidths,0,r.column)-o+e.tableSizes.coordinateOffset}}catch(e){n.e(e)}finally{n.f()}}},{key:"updatePositionColumnMembers",value:function(e){var t,n=_s(this.stickyColumnMembers);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.top=xs(e.rowHeights,this.freezeEndRow+1,r.row)-e.scrollPosition.scrollTop,r.left=Ls({stickyMember:r,rows:e.cachedData.rows,sizes:e.columnWidths,scroll:e.scrollPosition.scrollLeft,freezeEndIndex:this.freezeEndCol})}}catch(e){n.e(e)}finally{n.f()}}},{key:"getRenderProps",value:function(e,t,n){var r=di(X(o.prototype),"getRenderProps",this).call(this,e,t,n);return r.key="stickyMemberBottomLeft",r.className="stickyMemberBottomLeft",r.style={top:De(e.freezeHeight+Se.FREEZE_LINE_OFFSET),left:De(0),height:e.bottomLeftSection.height,width:e.bottomLeftSection.width},r}},{key:"keepOnlyMembersInsideSection",value:function(e){var t=void 0===this.freezeEndCol||void 0!==this.freezeEndCol&&e.column<=this.freezeEndCol,n=e.row>this.freezeEndRow;return t&&n}}]),o}(vs);function Bs(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Fs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fs(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}function Fs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ws=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e,t){var n;return a(this,o),(n=r.call(this,e,t)).keepOnlyMembersInsideSectionCallBack=n.keepOnlyMembersInsideSection.bind(V(n)),n}return u(o,[{key:"updatePositionRowMembers",value:function(e){var t,n=Bs(this.stickyRowMembers);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.top=Is({stickyMember:r,rows:e.cachedData.rows,sizes:e.rowHeights,scroll:e.scrollPosition.scrollTop,freezeEndIndex:this.freezeEndRow}),r.left=xs(e.columnWidths,this.freezeEndCol+1,r.column)-e.scrollPosition.scrollLeft}}catch(e){n.e(e)}finally{n.f()}}},{key:"updatePositionColumnMembers",value:function(e){var t,n=Bs(this.stickyColumnMembers);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.top=xs(e.rowHeights,this.freezeEndRow+1,r.row)-e.scrollPosition.scrollTop,r.left=Ls({stickyMember:r,rows:e.cachedData.rows,sizes:e.columnWidths,scroll:e.scrollPosition.scrollLeft,freezeEndIndex:this.freezeEndCol})}}catch(e){n.e(e)}finally{n.f()}}},{key:"getRenderProps",value:function(e,t,n){var r=di(X(o.prototype),"getRenderProps",this).call(this,e,t,n);return r.key="stickyMemberBottomRight",r.className="stickyMemberBottomRight",r.style={top:De(e.freezeHeight+Se.FREEZE_LINE_OFFSET),left:De(e.freezeWidth+Se.FREEZE_LINE_OFFSET),height:e.bottomRightSection.height,width:e.bottomRightSection.width},r}},{key:"keepOnlyMembersInsideSection",value:function(e){var t=e.column>this.freezeEndCol,n=e.row>this.freezeEndRow;return t&&n}}]),o}(vs);function js(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Vs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?js(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):js(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Us=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"render",value:function(){var e=Math.ceil(.01*this.props.width),t=Math.ceil(.01*this.props.height),n=this.props.top+t,r=this.props.left+e,o=er(this.props.referencedCell.hierarchyPaddingLeft,this.props.referencedCell.hierarchyPaddingTop),i=o.paddingLeft,l=o.paddingTop,s=Se.CELL_PADDING_RIGHT-e-1,a=i;a=a?a-e:0;var c=l;c=c?c-t:0;var u=nr(this.props.referencedCell),h=or(this.props.referencedCell),d=.98*this.props.width,p=.98*this.props.height,f=d-(this.props.referencedCell.showDrillIcon?Se.ICON_HEIGHT:0)-a+1;return W.createElement("div",{className:"".concat("stickyMemberElement").concat(this.props.extraClass?" ".concat(this.props.extraClass):""),style:Vs(Vs(Vs({backgroundColor:this.props.backgroundColor,width:De(d),height:De(p),top:De(n),left:De(r)},u),h),{},{paddingLeft:a,paddingTop:c,paddingRight:s})},this.props.referencedCell.showDrillIcon&&W.createElement("div",{className:xo(this.props.referencedCell.cellType,!!this.props.referencedCell.expanded,!1,this.props.mobile)}),W.createElement(xr,{cell:this.props.referencedCell,lineHeight:p,showGrid:!1,fontOverride:this.props.fontOverride,hierarchyStyle:{paddingLeft:0,paddingTop:0},width:f,textValue:this.props.text}))}}]),o}(W.PureComponent);var Gs=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(){return a(this,o),r.apply(this,arguments)}return u(o,[{key:"getBackgroundColor",value:function(e){return e&&"transparent"!==e?e:this.props.backgroundColor}},{key:"render",value:function(){var e=this;return W.createElement("div",{className:"".concat("stickyMembersFreezeSection"," ").concat(this.props.className),style:this.props.style},this.props.stickyColumnMembers.length>0&&W.createElement("div",{className:bs},this.props.stickyColumnMembers.map(function(t,n){var r;return t.show&&W.createElement(Us,{backgroundColor:e.getBackgroundColor(null===(r=t.referencedCell.style)||void 0===r?void 0:r.fillColor),key:"stickyColumnMember-".concat(n),text:t.formatted,left:t.left,top:t.top,width:t.width,height:t.height,referencedCell:t.referencedCell,extraClass:t.referencedCell.isInHierarchy?"columnStickyMember":void 0,fontOverride:e.props.fontOverride,mobile:e.props.mobile})})),this.props.stickyRowMembers.length>0&&W.createElement("div",{className:bs},this.props.stickyRowMembers.map(function(t,n){var r;return t.show&&W.createElement(Us,{backgroundColor:e.getBackgroundColor(null===(r=t.referencedCell.style)||void 0===r?void 0:r.fillColor),key:"stickyRowMember-".concat(n),text:t.formatted,left:t.left,top:t.top,width:t.width,height:t.height,referencedCell:t.referencedCell,fontOverride:e.props.fontOverride,mobile:e.props.mobile})})))}}]),o}(W.Component);function Ks(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Zs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zs(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}function Zs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xs=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e,t){var n;return a(this,o),(n=r.call(this,e,t)).keepOnlyMembersInsideSectionCallBack=n.keepOnlyMembersInsideSection.bind(V(n)),n}return u(o,[{key:"updatePositionRowMembers",value:function(e){var t,n=Ks(this.stickyRowMembers);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=As(this.freezeEndCol,r.column,e.scrollPosition.scrollLeft);r.top=Is({stickyMember:r,rows:e.cachedData.rows,sizes:e.rowHeights,scroll:e.scrollPosition.scrollTop}),r.left=xs(e.columnWidths,0,r.column)-o+e.tableSizes.coordinateOffset}}catch(e){n.e(e)}finally{n.f()}}},{key:"updatePositionColumnMembers",value:function(e){var t,n=Ks(this.stickyColumnMembers);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=As(this.freezeEndRow,r.row,e.scrollPosition.scrollTop);r.top=xs(e.rowHeights,0,r.row)-o+e.tableSizes.coordinateOffset,r.left=Ls({stickyMember:r,rows:e.cachedData.rows,sizes:e.columnWidths,scroll:e.scrollPosition.scrollLeft})}}catch(e){n.e(e)}finally{n.f()}}},{key:"getRenderProps",value:function(e,t,n){var r=di(X(o.prototype),"getRenderProps",this).call(this,e,t,n);return r.key="stickyMemberTopLeft",r.className="stickyMemberTopLeft",r.style={top:De(0),left:De(0),height:e.topLeftSection.height,width:e.topLeftSection.width},r}},{key:"keepOnlyMembersInsideSection",value:function(e){var t=!0;return void 0!==this.freezeEndRow&&(t=e.row<=this.freezeEndRow),void 0!==this.freezeEndCol&&(t=t&&e.column<=this.freezeEndCol),t}}]),o}(vs);function qs(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ys(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ys(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}function Ys(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $s=function(e){G(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=X(t);if(n){var o=X(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Z(this,e)});function o(e,t){var n;return a(this,o),(n=r.call(this,e,t)).keepOnlyMembersInsideSectionCallBack=n.keepOnlyMembersInsideSection.bind(V(n)),n}return u(o,[{key:"updatePositionRowMembers",value:function(e){var t,n=qs(this.stickyRowMembers);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.top=Is({stickyMember:r,rows:e.cachedData.rows,sizes:e.rowHeights,scroll:e.scrollPosition.scrollTop,freezeEndIndex:this.freezeEndRow}),r.left=xs(e.columnWidths,this.freezeEndCol+1,r.column)-e.scrollPosition.scrollLeft}}catch(e){n.e(e)}finally{n.f()}}},{key:"updatePositionColumnMembers",value:function(e){var t,n=qs(this.stickyColumnMembers);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=As(this.freezeEndRow,r.row,e.scrollPosition.scrollTop);r.top=xs(e.rowHeights,0,r.row)-o+e.tableSizes.coordinateOffset,r.left=Ls({stickyMember:r,rows:e.cachedData.rows,sizes:e.columnWidths,scroll:e.scrollPosition.scrollLeft,freezeEndIndex:this.freezeEndCol})}}catch(e){n.e(e)}finally{n.f()}}},{key:"getRenderProps",value:function(e,t,n){var r=di(X(o.prototype),"getRenderProps",this).call(this,e,t,n);return r.key="stickyMemberTopRight",r.className="stickyMemberTopRight",r.style={top:De(0),left:De(e.freezeWidth+Se.FREEZE_LINE_OFFSET),height:e.topRightSection.height,width:e.topRightSection.width},r}},{key:"keepOnlyMembersInsideSection",value:function(e){var t=e.column>this.freezeEndCol,n=void 0===this.freezeEndRow||void 0!==this.freezeEndRow&&e.row<=this.freezeEndRow;return t&&n}}]),o}(vs);function Qs(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Js(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Js(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}function Js(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ea=function(){function e(t,n){a(this,e),s(this,"rowHeights",[]),s(this,"columnWidths",[]),s(this,"sections",[]),this.resetInternals(n),this.htmlDivContainer=document.createElement("div"),this.htmlDivContainer.classList.add(ys),this.afterRenderCallback=t,this.backgroundColor=(null==n?void 0:n.backgroundColor)||ge.TABLE_BACKGROUND_COLOR,this.fontOverride=null==n?void 0:n.fontOverride,this.mobile=null==n?void 0:n.mobile}return u(e,[{key:"getStickyRowIndex",value:function(){return this.stickyRowIndex}},{key:"getStickyRowMembers",value:function(){return this.sections.map(function(e){return e.getRowMembers()}).flat()}},{key:"getRowHeightOutside",value:function(){return this.rowHeightOutside}},{key:"getStickyColumnIndex",value:function(){return this.stickyColumnIndex}},{key:"getStickyColumnMembers",value:function(){return this.sections.map(function(e){return e.getColumnMembers()}).flat()}},{key:"getColumnWidthOutside",value:function(){return this.columnWidthOutside}},{key:"getColumnWidths",value:function(){return this.columnWidths}},{key:"getRowHeights",value:function(){return this.rowHeights}},{key:"getHtmlDivContainer",value:function(){return this.htmlDivContainer}},{key:"updateMembersAfterTableDataUpdate",value:function(e,t,n,r){if(this.resetInternals(),this.backgroundColor=r.backgroundColor,this.fontOverride=t.fontOverride,this.mobile=t.mobile,r.showStickyDimensionMembers){var o=n.defaultRowHeight,i=n.borderSize,l=Ze(t.rowHeightSetting);this.calculateUnwindowedSizes(t,i),this.sections=this.createNeededFreezeSections(t);var s=St(e,n);this.updateRowIndex(o,l,Ss,s),this.updateRowStickyMembers(t,o),this.updatePositionRowMembers({cachedData:t,scrollPosition:e,tableSizes:n}),this.updateColumnIndex(he.CELL_PADDING_RIGHT,Ts,s),this.updateColumnStickyMembers(t,o),this.updatePositionColumnMembers({cachedData:t,scrollPosition:e,tableSizes:n})}this.renderStickyMembers(n)}},{key:"resetInternals",value:function(e){this.stickyRowIndex=(null==e?void 0:e.stickyRowIndex)||0,this.rowHeightOutside=(null==e?void 0:e.rowHeightOutside)||0,this.rowHeights=(null==e?void 0:e.rowHeights)||[],this.stickyColumnIndex=(null==e?void 0:e.stickyColumnIndex)||0,this.columnWidthOutside=(null==e?void 0:e.columnWidthOutside)||0,this.columnWidths=(null==e?void 0:e.columnWidths)||[],this.sections=(null==e?void 0:e.sections)||[]}},{key:"calculateUnwindowedSizes",value:function(e,t){this.rowHeights=e.rows.map(function(e){return e.height+t}),this.columnWidths=e.columnSettings.map(function(e){return e.width})}},{key:"createNeededFreezeSections",value:function(e){var t=fs(!!e.showCoordinateHeader,e.freezeEndRow),n=fs(!!e.showCoordinateHeader,e.freezeEndCol),r=[new Xs(t,n)];return void 0!==t&&r.push(new zs(t,n)),void 0!==n&&r.push(new $s(t,n)),void 0!==t&&void 0!==n&&r.push(new Ws(t,n)),r}},{key:"updateMembersAfterScroll",value:function(e,t,n,r){var o,i,l,a=this,c=(l=e,(i=t).scrollTop<l.scrollTop?pt.Down:i.scrollTop>l.scrollTop?pt.Up:i.scrollLeft>l.scrollLeft?pt.Left:i.scrollLeft<l.scrollLeft?pt.Right:null);if(null!==c){var u=St(e,r),h=r.defaultRowHeight,d=Ze(n.rowHeightSetting),p=this.stickyRowIndex,f=this.stickyColumnIndex;(s(o={},ft.Down,function(){a.updateRowIndex(h,d,Ss,u)}),s(o,ft.Up,function(){a.updateRowIndex(h,d,Rs,u)}),s(o,ft.Right,function(){a.updateColumnIndex(he.CELL_PADDING_RIGHT,Ts,u)}),s(o,ft.Left,function(){a.updateColumnIndex(he.CELL_PADDING_LEFT,Es,u)}),o)[c](),p!==this.stickyRowIndex&&this.updateRowStickyMembers(n,h),f!==this.stickyColumnIndex&&this.updateColumnStickyMembers(n,h),this.updatePositionRowMembers({cachedData:n,scrollPosition:e,tableSizes:r}),this.updatePositionColumnMembers({cachedData:n,scrollPosition:e,tableSizes:r}),this.renderStickyMembers(r)}}},{key:"updateRowIndex",value:function(e,t,n,r){var o=n({currentStickyIndex:this.stickyRowIndex,currentContentSizeOutside:this.rowHeightOutside,currentScrollWithFreeze:r.scrollTop,sizes:this.rowHeights,defaultSize:e,padding:t}),i=o.contentSizeOutside,l=o.stickyIndex;this.rowHeightOutside=i,this.stickyRowIndex=l}},{key:"updateRowStickyMembers",value:function(e,t){var n,r=e.dataRegionCornerCol,o=e.rows,i=function(e,t,n,r){var o=n[e];if(!o)return[];for(var i=[],l=0;l<=t;l++)Os(i,n,o.cells[l],r);return i}(this.stickyRowIndex,r,o,$),l=Qs(i);try{for(l.s();!(n=l.n()).done;){var s,a=n.value;a.width=this.columnWidths[a.column]||he.RESPONSIVE_EMPTY_COLUMN_WIDTH,a.height=(null!==(s=this.rowHeights[a.row])&&void 0!==s?s:t)-Cs;var c=Ps(o,a),u=this.rowHeights.slice(a.row+1,null==c?void 0:c.row).reduce(function(e,t){return e+t-Cs},0),h=void 0!==e.freezeEndRow&&e.freezeEndRow>=a.row;a.show=u>=a.height&&!h}}catch(e){l.e(e)}finally{l.f()}var d,p=Qs(this.sections);try{for(p.s();!(d=p.n()).done;)d.value.updateRowMembers(i)}catch(e){p.e(e)}finally{p.f()}}},{key:"updateColumnStickyMembers",value:function(e,t){var n,r=e.dataRegionCornerRow,o=e.rows,i=function(e,t,n,r){if(0===n.length)return[];for(var o=[],i=0;i<=t;i++){var l;Os(o,n,null===(l=n[i])||void 0===l?void 0:l.cells[e],r)}return o}(this.stickyColumnIndex,r,o,Y),l=Qs(i);try{for(l.s();!(n=l.n()).done;){var s,a=n.value;a.width=null!==(s=this.columnWidths[a.column])&&void 0!==s?s:he.RESPONSIVE_EMPTY_COLUMN_WIDTH,a.height=(this.rowHeights[a.row]||t)-Cs;var c=Ms(o,a),u=this.columnWidths.slice(a.column+1,null==c?void 0:c.column).reduce(function(e,t){return e+t},0),h=void 0!==e.freezeEndCol&&e.freezeEndCol>=a.column;a.show=u>=a.width&&!h}}catch(e){l.e(e)}finally{l.f()}var d,p=Qs(this.sections);try{for(p.s();!(d=p.n()).done;)d.value.updateColumnMembers(i)}catch(e){p.e(e)}finally{p.f()}}},{key:"updatePositionRowMembers",value:function(e){var t,n=Qs(this.sections);try{for(n.s();!(t=n.n()).done;)t.value.updatePositionRowMembers({cachedData:e.cachedData,scrollPosition:e.scrollPosition,tableSizes:e.tableSizes,rowHeights:this.rowHeights,columnWidths:this.columnWidths})}catch(e){n.e(e)}finally{n.f()}}},{key:"updatePositionColumnMembers",value:function(e){var t,n=Qs(this.sections);try{for(n.s();!(t=n.n()).done;)t.value.updatePositionColumnMembers({cachedData:e.cachedData,scrollPosition:e.scrollPosition,tableSizes:e.tableSizes,rowHeights:this.rowHeights,columnWidths:this.columnWidths})}catch(e){n.e(e)}finally{n.f()}}},{key:"updateColumnIndex",value:function(e,t,n){var r=t({currentStickyIndex:this.stickyColumnIndex,currentContentSizeOutside:this.columnWidthOutside,currentScrollWithFreeze:n.scrollLeft,sizes:this.columnWidths,defaultSize:he.RESPONSIVE_EMPTY_COLUMN_WIDTH,padding:e}),o=r.contentSizeOutside,i=r.stickyIndex;this.columnWidthOutside=o,this.stickyColumnIndex=i}},{key:"renderStickyMembers",value:function(e){var t=this,n=this.sections.map(function(n){var r=n.getRenderProps(e,t.backgroundColor,t.fontOverride);return r.mobile=t.mobile,r});j.render(W.createElement("div",{className:ys,style:{height:De(e.tableContainerHeight),top:De(e.titleHeight)}},n.map(function(e){return e.showSection&&W.createElement(Gs,e)})),this.htmlDivContainer,this.afterRenderCallback)}}]),e}(),ta={mobileStrategy:{numPreloadRows:20,verticalLimit:.5,horizontalLimit:.3},defaultStrategy:{numPreloadRows:10,verticalLimit:ve.SCROLL_LIMIT_VERTICAL,horizontalLimit:ve.SCROLL_LIMIT_HORIZONTAL}};function na(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ra(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ra(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}function ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ia(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oa(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oa(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var la=function(){function e(t,n,r,o,i){a(this,e),this.table=null,this.cachedData=t,this.parentContainer=n,this.tableContainer=document.createElement("div"),this.tableContainer.classList.add(fe.REACT_TABLE_CONTAINER),this.parentContainer.appendChild(this.tableContainer),this.stickyMembers=new ea,this.stickyMembersContainer=this.stickyMembers.getHtmlDivContainer(),this.parentContainer.appendChild(this.stickyMembersContainer),this.externalHandler=r,this.heightOfOnTheFlyRows=0,this.widthOfOnTheFlyCols=0,this.scrollPosition={scrollTop:0,scrollLeft:0},this.isPaginating=!1,this.needsRefocus=!1,this.paginationRowIndexes={fromRowIndex:-1,toRowIndex:-1},this.tableSizes=ot(t),this.tableDataWindowing=new yl,this.showHideLoadingAreas=(new cl).createRefs(),this.preventDefaultSelection=!1,this.pendingImages=[],this.pendingPromises=[],this.selectionStrategy=new is,void 0!==t.selectionMode&&(this.selectionStrategy=ns(t.selectionMode)),this.editorInstance=new ps({confirmTextEdit:this.onConfirmTextEdit.bind(this),cancelTextEdit:this.onCancelTextEdit.bind(this),textEditorForCellTypes:i||ds}),this.ariaUtils=new $i(this.externalHandler.getTranslatedText),this.lastFocusedCell=void 0,this.lastScrollTopLimitReached=0,this.boundHandleColumnWidthChanged=this.handleColumnWidthChanged.bind(this),this.boundHandleRowHeightChanged=this.handleRowHeightChanged.bind(this),this.boundHandleTitleHeightChanged=this.handleTitleHeightChanged.bind(this),this.boundHandleAddRowOrColOnTheFly=this.handleAddCustomColOrRow.bind(this),this.boundHandleRemoveRowOrColOnTheFly=this.handleRemoveCustomColOrRow.bind(this),this.boundHandleStoreScrollPosition=this.handleStoreScrollPosition.bind(this),this.boundHandleCellEdit=this.handleCellEdit.bind(this),this.boundUpdateNewLineMemberCell=this.updateNewLineMemberCell.bind(this),this.boundOnPageUpDownKey=this.handlePageUpDownKey.bind(this),this.boundAltOnPageUpDownKey=this.handleAltPageUpDownKey.bind(this),this.boundInternalElementDragStarted=this.handleInternalElementDragStarted.bind(this),this.boundInternalElementDragEnded=this.handleInternalElementDragEnded.bind(this),this.boundInternalElementDropped=this.handleInternalElementDropped.bind(this),this.boundGetDataEntryInProgress=this.getDataEntryInProgress.bind(this),this.boundRefCreatedOrRemovedCallback=this.refCreatedOrRemovedCallback.bind(this),this.boundAfterDomRenderUpdateCallback=this.afterDomRenderUpdateCallback.bind(this),this.boundRegisterImageLoading=this.registerImageLoading.bind(this),this.boundOnInternalReloadLimitReachedVertically=this.internalReloadLimitReachedVertically.bind(this),this.boundOnInternalReloadLimitReachedHorizontally=this.internalReloadLimitReachedHorizontally.bind(this),this.refCreatedRemovedCallback=o,this.boundOnGetAriaProps=this.getAriaPropsForCell.bind(this),this.tableHandler=ia(ia({onResizerDoubleClick:Te,onCellSelected:Te},this.externalHandler),{},{onColumnWidthChanged:this.boundHandleColumnWidthChanged,onRowHeightChanged:this.boundHandleRowHeightChanged,onTitleHeightChanged:this.boundHandleTitleHeightChanged,onInternalReloadLimitReachedVertically:this.boundOnInternalReloadLimitReachedVertically,onInternalReloadLimitReachedHorizontally:this.boundOnInternalReloadLimitReachedHorizontally,onPageUpDownKey:this.boundOnPageUpDownKey,onAltPageUpDownKey:this.boundAltOnPageUpDownKey,onCellDragStarted:this.boundInternalElementDragStarted,onCellDragEnded:this.boundInternalElementDragEnded,onCellDropped:this.boundInternalElementDropped,storeScrollPosition:this.boundHandleStoreScrollPosition,onCellEdit:this.boundHandleCellEdit,getDataEntryInProgress:this.boundGetDataEntryInProgress,onAddRowOrColOnTheFly:this.boundHandleAddRowOrColOnTheFly,onRemoveRowOrColOnTheFly:this.boundHandleRemoveRowOrColOnTheFly,onUpdateNewLineMemberCell:this.boundUpdateNewLineMemberCell,registerImageLoading:this.boundRegisterImageLoading,onGetAriaProps:this.boundOnGetAriaProps})}var t;return u(e,[{key:"getWidthOfOnTheFlyCols",value:function(){return this.widthOfOnTheFlyCols}},{key:"getDataEntryInProgress",value:function(){var e,t,n;return null!==(e=this.cachedData.featureToggles)&&void 0!==e&&e.nativeTextEdit?!!this.editorInstance.getEditor()||!!this.cachedData.activeNewLineMemberCell:!(null===(t=(n=this.externalHandler).getDataEntryInProgress)||void 0===t||!t.call(n))}},{key:"getHeightOfOnTheFlyRows",value:function(){return this.heightOfOnTheFlyRows}},{key:"getTableData",value:function(){return this.cachedData}},{key:"getContentWidth",value:function(){return this.tableSizes.htmlTableWrapperWidth+Se.SCROLLBAR_SIZE-this.widthOfOnTheFlyCols}},{key:"getContentHeight",value:function(){return this.tableSizes.htmlTableWrapperHeight+this.tableSizes.titleHeight+Se.SCROLLBAR_SIZE-this.heightOfOnTheFlyRows}},{key:"setSelected",value:function(e){var t;null===(t=this.table)||void 0===t||t.setSelected(e)}},{key:"setSelection",value:function(e){var t;null===(t=this.table)||void 0===t||t.setSelectionArea(e)}},{key:"clearSelection",value:function(){var e;null===(e=this.table)||void 0===e||e.setSelectionArea({clearSelection:!0,isKeyEvent:!1})}},{key:"selectArea",value:function(e,t,n,r,o){var i,l={startRow:e,endRow:t,startCol:n,endCol:r,selectionType:T.Box};null===(i=this.table)||void 0===i||i.setSelectionArea({selectionArea:l,singleSelection:!0,isKeyEvent:!1}),o&&this.scrollToCoordinate(n,e)}},{key:"selectCell",value:function(e,t,n){this.selectArea(e,e,t,t,n)}},{key:"setParentContainer",value:function(e){this.parentContainer=e,this.parentContainer.appendChild(this.tableContainer),this.parentContainer.appendChild(this.stickyMembersContainer),this.reapplyScrollPosition()}},{key:"refCreatedOrRemovedCallback",value:function(e){var t;this.cachedData.allowTextEdit&&null!==(t=this.cachedData.featureToggles)&&void 0!==t&&t.nativeTextEdit&&this.pendingPromises.push(ls.loadApi()),this.table=e,this.refCreatedRemovedCallback&&this.refCreatedRemovedCallback(this.table)}},{key:"addEditorToCell",value:(t=l(F().mark(function e(t){var n,r,o,i,l,s,a,c,u,h,d,p,f;return F().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=null!==(n=null==t?void 0:t.row)&&void 0!==n?n:null===(r=this.cachedData.cellEditorInfo)||void 0===r?void 0:r.row,h=null!==(o=null==t?void 0:t.col)&&void 0!==o?o:null===(i=this.cachedData.cellEditorInfo)||void 0===i?void 0:i.col,d=null!==(l=null==t?void 0:t.initialValue)&&void 0!==l?l:null===(s=this.cachedData.cellEditorInfo)||void 0===s?void 0:s.initialValue,p=null!==(a=null==t?void 0:t.cursorPosition)&&void 0!==a?a:null===(c=this.cachedData.cellEditorInfo)||void 0===c?void 0:c.cursorPosition,void 0===u||void 0===h){e.next=10;break}return f=this.getCellInfoForEditor(u,h,d||"",p),e.next=8,this.editorInstance.startEdit(f).catch(function(){console.error("start edit failed")});case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.resolve());case 11:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"afterDomRenderUpdateCallback",value:function(){var e=this;this.showHideLoadingAreas.hideLoadingAreas(),Promise.allSettled([].concat(o(this.pendingImages),o(this.pendingPromises))).then(function(){var t,n;e.pendingImages=[],e.reFocusTable(),!e.cachedData.focusedCell||(null===(t=e.lastFocusedCell)||void 0===t?void 0:t.x)===e.cachedData.focusedCell.x&&(null===(n=e.lastFocusedCell)||void 0===n?void 0:n.y)===e.cachedData.focusedCell.y||(e.scrollToCoordinate(e.cachedData.focusedCell.x,e.cachedData.focusedCell.y),e.focusCell(e.cachedData.focusedCell.y,e.cachedData.focusedCell.x)),e.addEditorToCell().catch(function(){console.error("adding editor failed")}),e.afterRenderingCallback&&e.table&&e.afterRenderingCallback(e.table)})}},{key:"focusCell",value:function(e,t){var n,r;n=t,r=e,$t(this.cachedData,{startRow:r,endRow:r,startCol:n,endCol:n,selectionType:T.Box})}},{key:"reFocusTable",value:function(){this.needsRefocus&&this.table&&!Vt(this.cachedData.id)&&(this.table.focusTable(),this.needsRefocus=!1)}},{key:"registerImageLoading",value:function(e){this.pendingImages.push(e)}},{key:"hasImagesPending",value:function(){return!!this.pendingImages.length}},{key:"allRowsProcessed",value:function(){return this.cachedData.rows.length===this.cachedData.totalNumberOfRows}},{key:"internalReloadLimitReachedVertically",value:function(e,t){var n,r,o,i,l,s,a,c,u,h,d,p,f,g,m,v,y,b,C,w=this,S=this.getWidthOfOnTheFlyCols(),R=this.getHeightOfOnTheFlyRows(),T=e-this.lastScrollTopLimitReached;if(this.lastScrollTopLimitReached=e,function(e,t,n){var r=void 0===n.totalNumberOfRows?n.rows.length-1:n.totalNumberOfRows-1,o=!t&&0!==e.startRowIndex,i=t&&r!==e.endRowIndex;return o||i}(this.tableDataWindowing.getRowIndices(),t,this.cachedData)&&this.showHideLoadingAreas.showVerticalLoading(t),!this.externalHandler.onReloadLimitReachedVertically&&!this.externalHandler.onReloadLimitReached||this.allRowsProcessed())wt(function(){return w.updateTableAndPreserveOnTheFlyColsAndRows(S,R)});else{var E=0;if(t){var D,k=this.cachedData.totalNumberOfColumns||this.cachedData.columnSettings.length;n=T,r=null!==(D=this.tableDataWindowing.getRowIndices().endRowIndex)&&void 0!==D?D:0,o=(b=!!this.cachedData.mobile,C=k,b||C<=he.LOW_ENOUGH_NUMBER_OF_COLUMNS_TO_RENDER_FAST_ON_MOBILE?ta.mobileStrategy:ta.defaultStrategy).numPreloadRows,i=this.getTableSizes(),l=this.cachedData,c=i.tableContainerHeight,u=i.defaultRowHeight,h=l.totalNumberOfRows,p=null!==(s=null==(d=l.rows)||null===(a=d[d.length-1])||void 0===a?void 0:a.row)&&void 0!==s?s:0,f=Math.max(p-r,0),g=function(e,t,n){return n.filter(function(n){return n.row>=e&&n.row<=t}).map(function(e){return e.height}).reduce(function(e,t){return e+t},0)/(t-e+1)}(Math.max(r-o,0),p,d)||u,m=Math.ceil((n+c)/g)+o,v=h?h-1-r:m,E=f<=(y=Math.min(m,v))?y:0}this.externalHandler.onReloadLimitReachedVertically?this.externalHandler.onReloadLimitReachedVertically(e,t,E):this.externalHandler.onReloadLimitReached&&this.externalHandler.onReloadLimitReached(e,t,E),this.setOnTheFlyColsAndRowsValues(S,R)}}},{key:"internalReloadLimitReachedHorizontally",value:function(e,t){var n=this;if(!this.isPaginating){var r=this.getWidthOfOnTheFlyCols(),o=this.getHeightOfOnTheFlyRows();(function(e,t,n){var r=void 0===n.totalNumberOfColumns?n.columnSettings.length-1:n.totalNumberOfColumns-1,o=!t&&0!==e.startColumnIndex,i=t&&r!==e.endColumnIndex;return o||i})(this.tableDataWindowing.getColumnIndices(),t,this.cachedData)&&this.showHideLoadingAreas.showHorizontalLoading(t),wt(function(){return n.updateTableAndPreserveOnTheFlyColsAndRows(r,o)}),this.externalHandler.onReloadLimitReachedHorizontally&&this.externalHandler.onReloadLimitReachedHorizontally(e,t)}}},{key:"updateTableAndPreserveOnTheFlyColsAndRows",value:function(e,t){this.updateTableData(this.cachedData),this.setOnTheFlyColsAndRowsValues(e,t)}},{key:"setOnTheFlyColsAndRowsValues",value:function(e,t){this.widthOfOnTheFlyCols=e,this.heightOfOnTheFlyRows=t}},{key:"handlePageUpDownKey",value:function(e,t,n){var r=this,o=this.getScrollTop(),i=function(e,t,n,r){var o,i=0,l=e,s=0,a=qe(n);try{for(a.s();!(o=a.n()).done;){var c=o.value.height+r;(l-=c)<0&&s<t&&(i++,s+=c)}}catch(e){a.e(e)}finally{a.f()}return{numberOfVisibleRows:i,sizeOfVisibleRows:s}}(o,this.tableSizes.tableContainerHeight-this.tableSizes.freezeHeight,this.cachedData.rows,this.tableSizes.borderSize),l=i.numberOfVisibleRows,s=i.sizeOfVisibleRows;this.scrollTopAfterPageKey=o+(e?s:-s);var a=e?function(e,t){return an(an({},e),{},{startRow:e.startRow+t,endRow:e.startRow+t})}(t,l):function(e,t){return an(an({},e),{},{startRow:e.startRow-t,endRow:e.startRow-t})}(t,l);this.callAppendRowsOrUpdateAfterPageUpDown(e,l,function(){r.setScrollTop(r.scrollTopAfterPageKey),r.scrollTopAfterPageKey=0,n(a)})}},{key:"handleAltPageUpDownKey",value:function(e,t,n){var r=this,o=this.getScrollLeft(),i=function(e,t,n){var r,o=0,i=e,l=0,s=qe(n);try{for(s.s();!(r=s.n()).done;){var a=r.value.width;(i-=a)<0&&l<t&&(o++,l+=a)}}catch(e){s.e(e)}finally{s.f()}return{numberOfVisibleColumns:o,sizeOfVisibleColumns:l}}(o,this.tableSizes.tableContainerWidth-this.tableSizes.freezeWidth,this.cachedData.columnSettings),l=i.numberOfVisibleColumns,s=i.sizeOfVisibleColumns;this.scrollLeftAfterPageKey=o+(e?s:-s);var a=e?function(e,t){return an(an({},e),{},{startCol:e.startCol+t,endCol:e.startCol+t})}(t,l):function(e,t){return an(an({},e),{},{startCol:e.startCol-t,endCol:e.startCol-t})}(t,l);this.updateTableData(this.cachedData,function(){r.setScrollLeft(r.scrollLeftAfterPageKey),r.scrollLeftAfterPageKey=0,n(a)})}},{key:"handleInternalElementDragStarted",value:function(e){this.externalHandler.onCellDragStarted&&this.externalHandler.onCellDragStarted(e)}},{key:"handleInternalElementDragEnded",value:function(e){this.externalHandler.onCellDragEnded&&this.externalHandler.onCellDragEnded(e)}},{key:"handleInternalElementDropped",value:function(e){this.externalHandler.onExternalElementDropped&&this.externalDragData?this.externalHandler.onExternalElementDropped({targetRow:e.targetRow,targetCol:e.targetCol,placedBeforeCell:e.placedBeforeCell,externalData:this.externalDragData}):this.externalHandler.onCellDropped&&this.externalHandler.onCellDropped(e)}},{key:"callAppendRowsOrUpdateAfterPageUpDown",value:function(e,t,n){if(this.externalHandler.onAppendRowsForPageDown&&e){var r=this.getCurrentGeneralSettings().rowContentLimitFactor,o=Math.max(this.cachedData.rows.length+t,r*t);this.externalHandler.onAppendRowsForPageDown(o,n)}else this.updateTableData(this.cachedData,n)}},{key:"renderReact",value:function(e,t){j.render(W.createElement(al,{data:e,handler:this.tableHandler,ref:this.boundRefCreatedOrRemovedCallback,tableSizes:this.tableSizes,isPaginating:this.isPaginating,preventDefaultSelection:this.preventDefaultSelection,loadingIndicatorRefs:this.showHideLoadingAreas.getLoadingAreaRefs(),generalSettings:t,selectionStrategy:this.selectionStrategy}),this.tableContainer,this.boundAfterDomRenderUpdateCallback)}},{key:"handleTitleHeightChanged",value:function(e){var t=ia({},this.cachedData),n=t.title;t.title=ia(ia({},n),{},{titleStyle:ia(ia({},n.titleStyle),{},{height:e})}),this.updateTableData(t),this.externalHandler.onTitleHeightChanged&&this.externalHandler.onTitleHeightChanged(e)}},{key:"prepareDataAndRenderTable",value:function(){var e=ia({},this.cachedData),t=this.getCurrentGeneralSettings();this.activeNewLineMemberCell&&(e.activeNewLineMemberCell=this.activeNewLineMemberCell),e.scrollPosition=this.scrollPosition,e.freezeEndRow=fs(t.showCoordinateHeader,e.freezeEndRow),e.freezeEndCol=fs(t.showCoordinateHeader,e.freezeEndCol),e.totalWidth=ul(e.columnSettings),e.lastRowIndex=e.lastRowIndex||this.cachedData.rows.length-1,this.isPaginating?(e=this.updateRowsForPagination(e),this.tableSizes=ot(e)):(e=this.tableDataWindowing.doWindowing(e),this.tableSizes=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l={columnIndices:t.getColumnIndices(),notRenderedHeightOnTop:t.getNotRenderedHeightTop(),notRenderedWidthToTheLeft:t.getNotRenderedWidthToTheLeft(),scrollTop:n,scrollLeft:r,isPaginatedTable:!1,allRowsProcessed:o,allColumnsProcessed:i};return it(e,l)}(e,this.tableDataWindowing,this.getScrollTop(),this.getScrollLeft(),this.allRowsProcessed(),!0)),this.stickyMembers.updateMembersAfterTableDataUpdate(this.scrollPosition,this.cachedData,this.tableSizes,t),this.renderReact(e,t)}},{key:"reapplyScrollPosition",value:function(){if(this.table){var e=this.getScrollLeft()||this.table.getLastScrollUpdateHorizontal(),t=this.getScrollTop()||this.table.getLastScrollUpdateVertical();this.scrollToPosition(t,e)}}},{key:"removeTable",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=this.table)||void 0===e||e.removeEventListeners(),j.unmountComponentAtNode(this.tableContainer),t&&this.adjustScrollPosition(!0)}},{key:"updateOnTheFlyValuesAndUpdateTableData",value:function(e){if(e.preserveOnTheFlyValues||this.setOnTheFlyColsAndRowsValues(0,0),this.lastFocusedCell=this.cachedData.focusedCell?ia({},this.cachedData.focusedCell):void 0,this.cachedData=e.tableData,this.cachedData.backgroundColor=this.getCurrentGeneralSettings().backgroundColor,this.afterRenderingCallback=e.callback,this.adjustScrollPosition(e.resetScroll),!this.isPaginating){var t=this.scrollTopAfterPageKey||this.getScrollTop();this.tableDataWindowing.updateIndicesForWindowing(this.cachedData,t,this.getScrollLeft(),this.getCurrentGeneralSettings())}this.prepareDataAndRenderTable()}},{key:"getCurrentGeneralSettings",value:function(){var e,t;return{showRowColumnHover:this.selectionStrategy.supportsRowColumnHover()&&xt(this.cachedData.showRowColumnHover),showCopyDragger:this.selectionStrategy.supportsCopyDragger()&&xt(this.cachedData.showCopyDragger),showCoordinateHeader:!!this.cachedData.showCoordinateHeader,showFreezeLines:xt(this.cachedData.showFreezeLines),showStickyDimensionMembers:!(null===(e=this.cachedData.featureToggles)||void 0===e||!e.stickyDimensionMembers||!this.cachedData.showStickyDimensionMembers),rowContentLimitFactor:this.cachedData.rowContentLimitFactor||Se.CONTENT_LIMIT_VERTICAL,selectionMode:void 0!==this.cachedData.selectionMode?this.cachedData.selectionMode:_.Default,backgroundColor:null!==(t=this.cachedData.backgroundColor)&&void 0!==t?t:ge.TABLE_BACKGROUND_COLOR}}},{key:"updateTableData",value:function(e,t,n){var r,o;this.needsRefocus=Vt(e.id),void 0!==e.selectionMode&&this.cachedData.selectionMode!==e.selectionMode&&(this.selectionStrategy=ns(e.selectionMode)),e.widgetHeight>0&&e.widgetWidth>0&&this.updateOnTheFlyValuesAndUpdateTableData({tableData:e,callback:t,preserveOnTheFlyValues:!1,resetScroll:n}),this.externalHandler.tableContentSizeChanged&&null!==(r=this.table)&&void 0!==r&&null!==(o=r.refTableContainer)&&void 0!==o&&o.current&&this.externalHandler.tableContentSizeChanged(this.table.refTableContainer.current)}},{key:"resetNewLineMemberCell",value:function(){this.updateNewLineMemberCell(void 0)}},{key:"updateNewLineMemberCell",value:function(e){this.activeNewLineMemberCell=e,this.prepareDataAndRenderTable()}},{key:"setIsPaginating",value:function(e){this.isPaginating=e}},{key:"getIsPaginating",value:function(){return this.isPaginating}},{key:"setPreventDefaultSelectionAndRerender",value:function(e){this.preventDefaultSelection!==e&&(this.preventDefaultSelection=e,this.prepareDataAndRenderTable())}},{key:"updateRowIndexesForPagination",value:function(e){this.paginationRowIndexes=e}},{key:"getRowIndexesForPagination",value:function(){return this.paginationRowIndexes}},{key:"updateColumnWidths",value:function(e){if(0!==e.length&&!this.cachedData.responsive){var t,n=na(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.cachedData.columnSettings.length>r.index&&(this.cachedData=ia({},this.cachedData),this.cachedData.columnSettings=o(this.cachedData.columnSettings),this.cachedData.columnSettings[r.index]=ia(ia({},this.cachedData.columnSettings[r.index]),{},{width:r.size}))}}catch(e){n.e(e)}finally{n.f()}this.prepareDataAndRenderTable()}}},{key:"updateRowHeights",value:function(e){if(0!==e.length){var t,n=na(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.cachedData.rows.length>r.index&&(this.cachedData=ia({},this.cachedData),this.cachedData.rows=o(this.cachedData.rows),this.cachedData.rows[r.index]=ia(ia({},this.cachedData.rows[r.index]),{},{height:r.size}),qt(this.cachedData.rows,this.tableSizes.borderSize,r.index))}}catch(e){n.e(e)}finally{n.f()}this.cachedData.totalHeight=gs(this.cachedData.rows,this.tableSizes.borderSize);var i=this.tableDataWindowing.getRowIndices().endRowIndex||this.cachedData.rows.length-1,l=function(e,t,n,r){var i=t+1;if(n.length>i){var l=function(e){var t=e.map(function(e){return e.index});return Math.max.apply(Math,o(t))}(n)+1;return gs(e.slice(0,l),r)}var s=t+1;return gs(e.slice(0,s),r)}(this.cachedData.rows,i,e,this.tableSizes.borderSize);this.cachedData.widgetHeight>l?this.internalReloadLimitReachedVertically(this.getScrollTop(),!0):this.prepareDataAndRenderTable()}}},{key:"handleColumnWidthChanged",value:function(e){this.updateColumnWidths(e),this.externalHandler.onColumnWidthChanged&&this.externalHandler.onColumnWidthChanged(e)}},{key:"handleRowHeightChanged",value:function(e){this.updateRowHeights(e),this.externalHandler.onRowHeightChanged&&this.externalHandler.onRowHeightChanged(e)}},{key:"getRowHeight",value:function(){var e=this.cachedData.style&&this.cachedData.style.size?this.cachedData.style.size:we.FONT_SIZE;return Xe(this.cachedData.rowHeightSetting,e,!0,this.cachedData.rowHeightCustomPixels)}},{key:"handleAddCustomColOrRow",value:function(e){var t=ia({},this.cachedData);if(e===C.Row){for(var n=this.cachedData.rows.length,r=this.getRowHeight(),o={id:At(n,this.cachedData.id),row:n,fixed:!1,cells:[],height:r,changedOnTheFlyUnresponsive:!0},i=0;i<t.columnSettings.length;i++)o.cells.push(Ft(n,i,this.cachedData.id));t.rows.push(o),t.lastRowIndex=t.rows.length-1,t.totalHeight+=r+this.tableSizes.borderSize,this.heightOfOnTheFlyRows+=r+this.tableSizes.borderSize,t.totalNumberOfRows&&t.totalNumberOfRows>0&&t.totalNumberOfRows++}else{for(var l=t.columnSettings.length,s=0;s<t.rows.length;s++)t.rows[s].cells.push(Ft(s,l,this.cachedData.id));t.columnSettings.push({id:It(l,this.cachedData.id),column:l,width:A.Value,minWidth:0,fixed:!1,hasWrapCell:!1,emptyColumn:!0,addedOnTheFlyUnresponsive:!0}),t.totalNumberOfColumns&&t.totalNumberOfColumns>0&&t.totalNumberOfColumns++,this.widthOfOnTheFlyCols+=A.Value}this.updateOnTheFlyValuesAndUpdateTableData({tableData:t,preserveOnTheFlyValues:!0})}},{key:"handleStoreScrollPosition",value:function(e){this.getCurrentGeneralSettings().showStickyDimensionMembers&&this.stickyMembers.updateMembersAfterScroll(e,this.scrollPosition,this.cachedData,this.tableSizes),this.scrollPosition=e,this.externalHandler.onScroll&&this.externalHandler.onScroll(e)}},{key:"handleCellEdit",value:function(e){var t,n,r;if(null!==(t=this.cachedData.featureToggles)&&void 0!==t&&t.nativeTextEdit&&this.cachedData.allowTextEdit)if(this.externalHandler.onCellEditStart)this.externalHandler.onCellEditStart(e);else{var o=e.row,i=e.col,l=e.keyEvent;if(void 0!==o&&void 0!==i){var s=l?"":this.cachedData.rows[o].cells[i].formatted;this.addEditorToCell({row:o,col:i,initialValue:s}).catch(function(){console.error("adding editor failed")})}}else null===(n=(r=this.externalHandler).onCellEdit)||void 0===n||n.call(r,e)}},{key:"handleRemoveCustomColOrRow",value:function(e,t){var n=ia({},this.cachedData);if(e===C.Row){var r=n.rows[t];(function(e){return e.changedOnTheFlyUnresponsive&&e.cells.every(function(e){return e.cellType===E.Empty||""===e.formatted.trim()})})(r)&&(n.rows.pop(),n.lastRowIndex=n.rows.length-1,n.totalHeight-=r.height+this.tableSizes.borderSize,this.heightOfOnTheFlyRows-=r.height+this.tableSizes.borderSize,n.totalNumberOfRows&&n.totalNumberOfRows>0&&n.totalNumberOfRows--)}else{var o=n.columnSettings[t];if(function(e){return e.addedOnTheFlyUnresponsive&&e.emptyColumn}(o)){var i,l=na(n.rows);try{for(l.s();!(i=l.n()).done;)i.value.cells.pop()}catch(e){l.e(e)}finally{l.f()}n.columnSettings.pop(),this.widthOfOnTheFlyCols-=o.width,n.totalNumberOfColumns&&n.totalNumberOfColumns>0&&n.totalNumberOfColumns--}}this.updateOnTheFlyValuesAndUpdateTableData({tableData:n,preserveOnTheFlyValues:!0})}},{key:"scrollToCoordinate",value:function(e,t){for(var n=this.getTableData(),r=n.showCoordinateHeader?Se.COORDINATE_CELL_SIZE:0,o=r-this.tableSizes.tableContainerHeight,i=0;i<=t&&i<n.rows.length;i++)o+=n.rows[i].height+this.tableSizes.borderSize;(this.isRowInVisibleArea(t)||-1===t)&&(o=this.getScrollTop());for(var l=r-this.tableSizes.tableContainerWidth,s=0;s<=e&&s<n.columnSettings.length;s++)l+=n.columnSettings[s].width;(this.isColumnInVisibleArea(e)||-1===e)&&(l=this.getScrollLeft()),this.scrollToPosition(o,l)}},{key:"scrollToPosition",value:function(e,t){this.table&&(this.table.setScrollTop(e),this.table.setScrollLeft(t))}},{key:"setScrollTop",value:function(e){var t;null===(t=this.table)||void 0===t||t.setScrollTop(e)}},{key:"setScrollLeft",value:function(e){var t;null===(t=this.table)||void 0===t||t.setScrollLeft(e)}},{key:"getScrollTop",value:function(){var e,t;return null!==(e=null===(t=this.table)||void 0===t?void 0:t.getScrollTop())&&void 0!==e?e:this.scrollPosition.scrollTop}},{key:"getScrollLeft",value:function(){var e,t;return null!==(e=null===(t=this.table)||void 0===t?void 0:t.getScrollLeft())&&void 0!==e?e:this.scrollPosition.scrollLeft}},{key:"isCellInVisibleArea",value:function(e,t){return!!(this.isPaginating?this.isRowInPaginationArea(t):this.isRowInVisibleArea(t))&&this.isColumnInVisibleArea(e)}},{key:"isRowInPaginationArea",value:function(e){var t=void 0!==this.cachedData.freezeEndRow&&e<=this.cachedData.freezeEndRow,n=e<=this.paginationRowIndexes.toRowIndex&&e>=this.paginationRowIndexes.fromRowIndex;return t||n}},{key:"isRowInVisibleArea",value:function(e){for(var t=this.getScrollTop(),n=this.cachedData.showCoordinateHeader?Se.COORDINATE_CELL_SIZE:0,r=t,o=this.cachedData.showGrid?Se.GRID_BORDER_SIZE:0,i=0;i<this.cachedData.rows.length;i++){if(e===i){var l=this.tableSizes.tableContainerHeight;return void 0!==this.cachedData.freezeEndRow&&(e<=this.cachedData.freezeEndRow?(r=0,l=this.tableSizes.freezeHeight):(n-=this.tableSizes.freezeHeight,l-=this.tableSizes.freezeHeight)),ms(n,r,l,this.cachedData.rows[i].height)}n+=this.cachedData.rows[i].height+o}return!1}},{key:"isColumnInVisibleArea",value:function(e){for(var t=this.getScrollLeft(),n=this.cachedData.showCoordinateHeader?Se.COORDINATE_CELL_SIZE:0,r=t,o=0;o<this.cachedData.columnSettings.length;o++){if(e===o){var i=this.tableSizes.tableContainerWidth;return void 0!==this.cachedData.freezeEndCol&&(e<=this.cachedData.freezeEndCol?(r=0,i=this.tableSizes.freezeWidth):(n-=this.tableSizes.freezeWidth,i-=this.tableSizes.freezeWidth)),ms(n,r,i,this.cachedData.columnSettings[o].width)}n+=this.cachedData.columnSettings[o].width}return!1}},{key:"adjustScrollPosition",value:function(e){if(e)return this.scrollToPosition(0,0),void this.handleStoreScrollPosition({scrollTop:0,scrollLeft:0});if(this.isPaginating)this.setScrollTop(0);else{var t=ul(this.cachedData.columnSettings)+this.tableSizes.coordinateOffset+Se.SCROLLBAR_SIZE,n=this.getScrollTop(),r=this.getScrollLeft(),o=n,i=r;this.cachedData.totalHeight<n&&(o=this.cachedData.totalHeight-this.tableSizes.tableContainerHeight);var l=t<r,s=t<=this.cachedData.widgetWidth;l?i=t-this.tableSizes.tableContainerWidth:s&&(i=0),i===r&&o===n||this.scrollToPosition(o,i)}}},{key:"updateRowsForPagination",value:function(e){var t=e.hasFixedRowsCols&&void 0!==e.freezeEndRow?e.freezeEndRow:-1,n=o(e.rows),r=-1!==this.paginationRowIndexes.fromRowIndex?this.paginationRowIndexes.fromRowIndex:0;r=Math.max(r,t+1);var i=-1!==this.paginationRowIndexes.toRowIndex?this.paginationRowIndexes.toRowIndex:n.length-1;i=Math.min(i,n.length-1);var l=e.hasFixedRowsCols?n.slice(0,t+1):[],s=new Array(Math.max(0,r-l.length)),a=new Array(Math.max(0,n.length-i)),c=n.slice(r,i+1);return e.rows=[].concat(o(l),s,o(c),a),e}},{key:"enableDragDrop",value:function(e){this.externalDragData=e,vo(this.table&&this.table.refTableContainer.current)}},{key:"disableDragDrop",value:function(){this.externalDragData=null,yo(this.table&&this.table.refTableContainer.current)}},{key:"enableDropZones",value:function(e){var t=ia({},this.cachedData);t.dropZonesInfo=ia(ia({},this.cachedData.dropZonesInfo),e),this.updateTableData(t)}},{key:"disableDropZones",value:function(){var e=ia({},this.cachedData);e.dropZonesInfo=void 0,this.updateTableData(e)}},{key:"getTableSizes",value:function(){return this.tableSizes}},{key:"setCopyInProcess",value:function(e){var t;null===(t=this.table)||void 0===t||t.setCopyInProcess(e)}},{key:"getCellInfoForEditor",value:function(e,t,n,r){var o,i,l,s=this.cachedData.rows[e].cells[t],a=null!==(o=null===(i=s.style)||void 0===i||null===(l=i.alignment)||void 0===l?void 0:l.vertical)&&void 0!==o?o:g.Middle,c=this.tableContainer.querySelector('div[data-tablerow="'.concat(e,'"][data-tablecol="').concat(t,'"]'));return{cellType:s.cellType,backgroundColor:"transparent",verticalAlignment:a,row:e,col:t,targetCell:c,initialValue:n,cursorPosition:r}}},{key:"onConfirmTextEdit",value:function(e){var t,n,r=e.cellEditCoordinate,o=r.row,i=r.col,l=this.cachedData.rows[o].cells[i].formatted,s=this.cachedData.rows[o].cells[i].plain;null===(t=(n=this.externalHandler).confirmTextEdit)||void 0===t||t.call(n,ia(ia({},e),{},{oldValueFormatted:l,oldValuePlain:s}))}},{key:"onCancelTextEdit",value:function(){var e,t;null===(e=(t=this.externalHandler).cancelTextEdit)||void 0===e||e.call(t)}},{key:"getAriaPropsForCell",value:function(e){return{ariaDescribedBy:this.ariaUtils.getAriaDescribedByForCell(e),ariaLabel:this.ariaUtils.getAriaLabelForCell({cell:e,tableData:this.cachedData})}}},{key:"copySelectedCellsToClipboard",value:function(){this.table&&rl(this.cachedData,this.table.state.selection)}}]),e}();function sa(e){var t=e;if("#"===e[0]){if(4===e.length||5===e.length){var n=e.length>4?"".concat(e[4]).concat(e[4]):"";t="#".concat(e[1]).concat(e[1]).concat(e[2]).concat(e[2]).concat(e[3]).concat(e[3]).concat(n)}if(7!==t.length&&9!==t.length)return;return[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16),t.length>7?parseInt(t.slice(7,9),16)/255:1]}if(0===e.indexOf("rgb")){-1===e.indexOf("rgba")&&(t+=",1");var r=t.match(/[\.\d]+/g);if(r)return r.map(function(e){return+e})}}function aa(e){for(var t=[255,255,255],n=e.length-1;n>=0;n--){var r=e[n],o=r[3];t=[Math.round(t[0]*(1-o)+r[0]*o),Math.round(t[1]*(1-o)+r[1]*o),Math.round(t[2]*(1-o)+r[2]*o)]}return t}})(),r})()});
//# sourceMappingURL=sac.internal.grid.prod.2.24.0-f9585dd81ddf2dd4978f59850f7ddd20bebac8f5.js.map