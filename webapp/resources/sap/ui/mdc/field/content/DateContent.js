/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/i18n/date/CalendarType","sap/ui/mdc/field/content/DefaultContent","sap/ui/mdc/enums/BaseType","sap/ui/mdc/enums/OperatorValueType","sap/ui/mdc/enums/OperatorName","sap/ui/mdc/util/DateUtil","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/model/Filter"],(e,t,a,n,i,r,o,l)=>{"use strict";let d;let s;const p=Object.assign({},t,{getEditMultiLine:function(){return[null]},getEdit:function(){return["sap/m/DynamicDateRange","sap/ui/mdc/condition/OperatorDynamicDateOption","sap/ui/mdc/field/DynamicDateRangeConditionsType","sap/m/library","sap/m/DynamicDateFormat"]},getEditOperator:function(){return{[i.EQ]:{name:"sap/m/DatePicker",create:this._createDatePickerControl},[i.BT]:{name:"sap/m/DateRangeSelection",create:this._createDateRangePickerControl}}},getEditForHelp:function(){return t.getEdit.apply(this,arguments)},getEditSelect:function(){return[null]},getUseDefaultValueHelp:function(){return{name:"defineConditions",oneOperatorSingle:false,oneOperatorMulti:true,single:false,multi:true}},createEditMultiLine:function(){throw new Error("sap.ui.mdc.field.content.DateContent - createEditMultiLine not defined!")},createEditSelect:function(){throw new Error("sap.ui.mdc.field.content.DateContent - createEditSelect not defined!")},_createDatePickerControl:function(e,t,a){const n=t[0];const i=e.getConditionsType();e.setHideOperator(true);this._adjustDataTypeForDate(e);const r=new n(a,{value:{path:"$field>/conditions",type:i},displayFormat:e.getDisplayFormat(),valueFormat:e.getValueFormat(),placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",tooltip:"{$field>/tooltip}",liveChange:e.getHandleContentLiveChange(),change:e.getHandleContentChange()});if(r.setDisplayFormatType){r.setDisplayFormatType(e.getCalendarType())}if(r.setSecondaryCalendarType){r.setSecondaryCalendarType(e.getSecondaryCalendarType())}r.setPreferUserInteraction(true);e.setAriaLabelledBy(r);return[r]},_createDateRangePickerControl:function(e,t,a){const n=t[0];const i=e.getConditionsType();this._adjustDataTypeForDate(e);const r=new n(a,{value:{path:"$field>/conditions",type:i},displayFormat:e.getDisplayFormat(),valueFormat:e.getValueFormat(),delimiter:"...",displayFormatType:e.getCalendarType(),secondaryCalendarType:e.getSecondaryCalendarType(),placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",tooltip:"{$field>/tooltip}",liveChange:e.getHandleContentLiveChange(),change:e.getHandleContentChange()});r.setPreferUserInteraction(true);e.setAriaLabelledBy(r);return[r]},_adjustDataTypeForDate:function(t){const a=t.retrieveDataType();const n=a.getFormatOptions();this._getDatePattern(t,n);if(!n||n.style||!n.pattern||n.pattern!==t.getValueFormat()||!n.calendarType||n.calendarType!==e.Gregorian){t.setDateOriginalType(t.getDataType());t.setDataType(r.createInternalType(a,t.getValueFormat()));t.updateConditionType()}},_getDatePattern:function(e,t){const n=e.getField().getBaseType();switch(n){case a.Date:e.setValueFormat("yyyy-MM-dd");break;case a.DateTime:e.setValueFormat("yyyy-MM-dd'T'HH:mm:ss");break;case a.Time:e.setValueFormat("HH:mm:ss");break;default:return}e.setDisplayFormat("medium");if(t){if(t.style){e.setDisplayFormat(t.style)}else if(t.pattern){e.setDisplayFormat(t.pattern)}if(t.calendarType){e.setCalendarType(t.calendarType)}if(t.secondaryCalendarType){e.setSecondaryCalendarType(t.secondaryCalendarType)}}},createEdit:function(e,t,a){const n=t[0];const i=t[1];const r=t[2];const o=t[3];if(!d||!s){d=o.StandardDynamicDateRangeKeys;s=t[4]}const p=e.getConditionsType(false,r);const c=function(t){return this._getDateRangeStandardOptions(t,e)}.bind(this);const u=new l({path:"/",test:function(t){const a=e.getField().getBaseType();return!this._getDateRangeStandardOption(t,a)}.bind(this)});const g=function(t,n){const r=e.getField().getBaseType();const o=n.getObject();return this._createOperatorDynamicDateOption(o,e,i,r,a)}.bind(this);const y=new n(a,{value:{path:"$field>/conditions",type:p},formatter:this._getDateRangeFormatter(e),placeholder:"{$field>/placeholder}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",tooltip:"{$field>/tooltip}",standardOptions:{path:"$field>/_operators",formatter:c},customOptions:{path:"$field>/_operators",filters:u,factory:g},change:e.getHandleContentChange()});e.setAriaLabelledBy(y);return[y]},createEditForHelp:function(e,a,n){if(e.getDataType()&&e.getDataType().isA("sap.ui.model.CompositeType")){e.setIsMeasure(true)}return t.createEdit.apply(this,arguments)},_getDateRangeStandardOptions:function(e,t){if(!e||e.length===0){e=t.getField().getSupportedOperators()}const a=[];const n=t.getField().getBaseType();for(const t of e){const e=this._getDateRangeStandardOption(t,n);if(e){a.push(e)}}return a},_getDateRangeStandardOption:function(e,t){const a=o.getOperator(e);return o.getDynamicDateOptionForOperator(a,d,t)},_createOperatorDynamicDateOption:function(e,t,a,i,r){const l=o.getOperator(e);let d;if(l){const e=o.getCustomDynamicDateOptionForOperator(l,i);const s=t.retrieveDataType();const p=[];for(let e=0;e<l.valueTypes.length;e++){if(l.valueTypes[e]&&l.valueTypes[e]!==n.Static){p.push("custom")}}d=new a(r+"--"+e,{key:e,operator:l,type:s,baseType:i,valueTypes:p})}return d},_getDateRangeFormatter:function(e){const t=e.retrieveDataType();const n=e.getField().getBaseType();const i=t.getFormatOptions();const r={};const o={};if(i.style){r.style=i.style}else if(i.pattern){r.pattern=i.pattern}if(n===a.DateTime){o.datetime=r}o.date=r;return s.getInstance(o)}});return p});
//# sourceMappingURL=DateContent.js.map