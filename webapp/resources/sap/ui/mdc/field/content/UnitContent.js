/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/mdc/field/content/DefaultContent","sap/ui/core/library","sap/ui/model/Filter","sap/base/util/isEmptyObject","sap/base/util/merge","sap/ui/mdc/enums/FieldEditMode"],(e,t,i,a,n,l)=>{"use strict";const{ValueState:o}=t;const r=function(e,t,i,a,n,l){return e.getUnitTypeInstance?e.getUnitTypeInstance(t,n,l):e.getDataTypeInstance(t.getMetadata().getName(),i,a,{showNumber:n,showMeasure:l})};const s=Object.assign({},e,{getEdit:function(){return["sap/ui/mdc/field/FieldInput","sap/ui/core/InvisibleText"]},getEditMultiValue:function(){return["sap/ui/mdc/field/FieldMultiInput","sap/ui/mdc/field/FieldInput","sap/m/Token","sap/ui/core/InvisibleText"]},getEditMultiLine:function(){return[null]},getEditSelect:function(){return[null]},getUseDefaultValueHelp:function(){return false},createEdit:function(e,t,i){e.setIsMeasure(true);const a=t[0];const n=t[1];const l=e.getConditionsType();this._adjustDataTypeForUnit(e);const o=n.getStaticId("sap.ui.mdc","field.NUMBER");let r=[];const s=new a(i,{value:{path:"$field>/conditions",type:l},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",valueHelpIconSrc:"sap-icon://slim-arrow-down",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:{path:"$field>/valueState",formatter:d},valueStateText:{path:"$field>/valueStateText",formatter:u},showValueHelp:false,width:"70%",tooltip:"{$field>/tooltip}",autocomplete:false,fieldGroupIds:{path:"$field>/fieldGroupIds",formatter:p},ariaDescribedBy:[o],change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange()});s.setPreferUserInteraction(true);e.setAriaLabelledBy(s);r.push(s);r=this._addUnitControl(e,r,i,a,n);return r},createEditMultiValue:function(e,t,a){e.setIsMeasure(true);const n=t[0];const l=t[2];const o=t[1];const r=t[3];const s=e.getConditionType();const c=e.getConditionsType();this._adjustDataTypeForUnit(e);let f=[];const g=new l(a+"-token",{text:{path:"$field>",type:s}});const h=new i({path:"values",test:function(e){if(!Array.isArray(e[0])||e[0][0]){return true}else{return false}}});const y=r.getStaticId("sap.ui.mdc","field.NUMBER");const m=new n(a,{value:{path:"$field>/conditions",type:c},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:{path:"$field>/valueState",formatter:d},valueStateText:{path:"$field>/valueStateText",formatter:u},showValueHelp:false,width:"70%",tooltip:"{$field>/tooltip}",fieldGroupIds:{path:"$field>/fieldGroupIds",formatter:p},ariaDescribedBy:[y],tokens:{path:"$field>/conditions",template:g,filters:[h]},dependents:[g],autocomplete:false,showSuggestion:false,change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange(),tokenUpdate:e.getHandleTokenUpdate()});m.setPreferUserInteraction(true);e.setAriaLabelledBy(m);f.push(m);f=this._addUnitControl(e,f,a,o,r);return f},createEditMultiLine:function(){throw new Error("sap.ui.mdc.field.content.UnitContent - createEditMultiLine not defined!")},_addUnitControl:function(e,t,i,a,n){const o=e.getUnitConditionsType();if(e.getField().getEditMode()===l.EditableDisplay){t[0].bindProperty("description",{path:"$field>/conditions",type:o});t[0].setWidth("100%");t[0].setFieldWidth("70%")}else{let l;const r=e.getUnitOriginalType();const s=r&&r.getMetadata().getName();if(s&&s.indexOf("Currency")>=0){l=n.getStaticId("sap.ui.mdc","field.CURRENCY")}else{l=n.getStaticId("sap.ui.mdc","field.UNIT")}const c=new a(i+"-unit",{value:{path:"$field>/conditions",type:o},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditableUnit},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:{path:"$field>/valueState",formatter:d},valueStateText:{path:"$field>/valueStateText",formatter:u},valueHelpIconSrc:e.getValueHelpIcon(),showValueHelp:"{$field>/_valueHelpEnabled}",ariaAttributes:"{$field>/_ariaAttributes}",width:"30%",tooltip:"{$field>/tooltip}",autocomplete:false,fieldGroupIds:{path:"$field>/fieldGroupIds",formatter:p},ariaDescribedBy:[l],change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange(),valueHelpRequest:e.getHandleValueHelpRequest()});c.setPreferUserInteraction(true);e.setAriaLabelledBy(c);t.push(c)}return t},_adjustDataTypeForUnit:function(e){const t=e.getField();const i=t.getTypeMap();const l=e.retrieveDataType();const o=l.getFormatOptions();const s=l.getConstraints();const d=!o||!o.hasOwnProperty("showMeasure")||o.showMeasure;const u=!o||!o.hasOwnProperty("showNumber")||o.showNumber;if(d&&u){const t=n({},o);const d=a(s)?undefined:n({},s);const u=(e.getCompositeTypes()??[]).length>0;let p=r(i,l,t,d,true,false);if(u){p.processPartTypes(e.getCompositeTypes())}e.setUnitOriginalType(e.getDataType());i.initializeInternalType(p,e.getFieldTypeInitialization());e.setDataType(p);p=r(i,l,t,d,false,true);if(u){p.processPartTypes(e.getCompositeTypes())}i.initializeInternalType(p,e.getFieldTypeInitialization());e.setUnitType(p);e.updateConditionType()}},createEditSelect:function(){throw new Error("sap.ui.mdc.field.content.UnitContent - createEditSelect not defined!")}});function d(e){const t=this.getParent();const i=t?.getValueStateForContent(this.getId());if(i){return i.valueState}else if(t?.hasValueStateForContent()){return o.None}else{return e}}function u(e){const t=this.getParent();const i=t?.getValueStateForContent(this.getId());if(i){return i.valueStateText}else if(t?.hasValueStateForContent()){return""}else{return e}}function p(e){const t=this.getParent();if(t){e.push(t.getId())}else{let t=this.getId();const i=t.lastIndexOf("-inner");t=t.slice(0,i);e.push(t)}return e}return s});
//# sourceMappingURL=UnitContent.js.map