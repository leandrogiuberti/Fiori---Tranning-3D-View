/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/Device","sap/ui/mdc/Element","sap/m/library","sap/m/ResponsivePopover","sap/base/Log"],(e,t,o,r,i)=>{"use strict";const{PlacementType:n}=o;const s=t.extend("sap.ui.mdc.field.FieldInfoBase",{metadata:{library:"sap.ui.mdc",events:{dataUpdate:{},popoverAfterOpen:{}}}});s.prototype.isTriggerable=function(){throw new Error("sap.ui.mdc.field.FieldInfoBase: method isTriggerable must be redefined")};s.prototype.getTriggerHref=function(){throw new Error("sap.ui.mdc.field.FieldInfoBase: method getTriggerHref must be redefined")};s.prototype.getDirectLinkHrefAndTarget=function(){throw new Error("sap.ui.mdc.field.FieldInfoBase: method getDirectLinkHrefAndTarget must be redefined")};s.prototype.open=async function(e,t){e=e?e:this.getParent();if(!e){throw new Error("sap.ui.mdc.field.FieldInfoBase: popover can not be open because the control is undefined")}const o=this.getPopover();if(o&&o.isOpen()){return Promise.resolve()}const r=await this.checkDirectNavigation(t);if(r===false){const t=await this.createPopover();if(t&&!this.isDestroyed()&&!e.isDestroyed()){t.openBy(e);t.attachAfterOpen(()=>{this.firePopoverAfterOpen()})}}return Promise.resolve()};s.prototype.getContent=function(e){throw new Error("sap.ui.mdc.field.FieldInfoBase: method getContent must be redefined")};s.prototype.checkDirectNavigation=function(){throw new Error("sap.ui.mdc.field.FieldInfoBase: method checkDirectNavigation must be redefined")};s.prototype.getSourceControl=function(){return this.getParent()};s.prototype.createPopover=async function(){try{const e=await this.getContent(()=>this.getPopover());return this._createPopover(e)}catch(e){i.error(e);return this._createPopover(undefined)}};s.prototype._createPopover=function(t){const o=new r(this.getPopoverId(),{contentWidth:"380px",horizontalScrolling:false,showHeader:e.system.phone,placement:n.Auto,content:[t],afterClose:function(e){if(e.getSource()){e.getSource().destroy()}}});this.addDependent(o);return new Promise((e,r)=>{sap.ui.require(["sap/ui/fl/apply/api/FlexRuntimeInfoAPI"],async r=>{if(r.isFlexSupported({element:t})){await r.waitForChanges({element:t})}if(this.retrievePopoverTitle){const{sTitle:e,oLabelledByControl:r}=await this.retrievePopoverTitle(t);o.setTitle(e);o.addAriaLabelledBy(r)}e(o)})})};s.prototype.getPopover=function(){return this.getDependents().find(e=>e.isA("sap.m.ResponsivePopover")&&e.getId()===this.getPopoverId())};s.prototype.getPopoverId=function(){return this.getId()+"-popover"};return s});
//# sourceMappingURL=FieldInfoBase.js.map