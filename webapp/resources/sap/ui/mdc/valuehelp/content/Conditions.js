/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Lib","sap/ui/mdc/valuehelp/base/Content","sap/ui/mdc/util/loadModules","sap/ui/mdc/enums/ValueHelpSelectionType","sap/ui/mdc/enums/ConditionValidated","sap/ui/mdc/util/Common"],(e,t,o,n,i,l)=>{"use strict";const r=t.extend("sap.ui.mdc.valuehelp.content.Conditions",{metadata:{library:"sap.ui.mdc",interfaces:["sap.ui.mdc.valuehelp.base.ITypeaheadContent","sap.ui.mdc.valuehelp.base.IDialogContent"],properties:{label:{type:"string"}},aggregations:{},associations:{fieldHelp:{type:"sap.ui.mdc.ValueHelp",multiple:false},valueHelp:{type:"sap.ui.mdc.ValueHelp",multiple:false}},events:{}}});r.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oResourceBundle=e.getResourceBundleFor("sap.ui.mdc")};r.prototype.exit=function(){l.cleanup(this,["_oScrollContainer","_oDefineConditionPanel"]);t.prototype.exit.apply(this,arguments)};r.prototype.getContent=function(){return this._retrievePromise("content",()=>{const e=["sap/ui/mdc/valuehelp/base/DefineConditionPanel","sap/ui/model/base/ManagedObjectModel"];if(this.provideScrolling()){e.push("sap/m/ScrollContainer")}return o(e).then(e=>{if(this.isDestroyStarted()){return null}const t=e[0];const o=e[1];const n=e.length>2&&e[2];this._oManagedObjectModel=new o(this);this._oDefineConditionPanel=new t(this.getId()+"-DCP",{label:"{$help>/label}",conditions:"{$help>/conditions}",inputOK:"{$valueHelp>/_valid}",config:{path:"$help>/config"},conditionProcessed:a.bind(this),valueHelp:this.getValueHelp()||this.getFieldHelp&&this.getFieldHelp()}).setModel(this._oManagedObjectModel,"$help");if(n){this._oScrollContainer=new n(this.getId()+"-SC",{height:"100%",width:"100%",vertical:true,content:[this._oDefineConditionPanel]});this.setAggregation("displayContent",this._oScrollContainer);return this._oScrollContainer}else{this.setAggregation("displayContent",this._oDefineConditionPanel);return this._oDefineConditionPanel}})})};r.prototype.getCount=function(e){let t=0;for(const o of e){if(o.isEmpty!==true&&o.validated===i.NotValidated){t++}}return t};r.prototype.getUseAsValueHelp=function(){return false};r.prototype.getValueHelpIcon=function(){return"sap-icon://value-help"};r.prototype.isFocusInHelp=function(){return true};r.prototype.getInitialFocusedControl=function(){return this._oDefineConditionPanel.getInitialFocusedControl()};r.prototype.getFocusControlAfterTokenRemoval=function(){return this._oDefineConditionPanel.getFocusControlAfterTokenRemoval()};r.prototype.getRequiresTokenizer=function(){return true};r.prototype.getFormattedTitle=function(e){let o=t.prototype.getFormattedTitle.apply(this,arguments);if(!o){o=this._oResourceBundle.getText(e?"valuehelp.DEFINECONDITIONS":"valuehelp.DEFINECONDITIONSNONUMBER",[e])}return o};r.prototype.getFormattedShortTitle=function(){let e=this.getShortTitle();if(!e){e=this._oResourceBundle.getText("valuehelp.DEFINECONDITIONS.Shorttitle")}return e};r.prototype.getFormattedTokenizerTitle=function(e){let t=this.getTokenizerTitle();if(!t){t=this._oResourceBundle.getText("valuehelp.DEFINECONDITIONS.TokenizerTitle"+(e===0?"NoCount":""),[e])}return t};r.prototype.getAriaAttributes=function(e){return{contentId:this.getId()+"-DCP",ariaHasPopup:"dialog",roleDescription:null,valueHelpEnabled:true,autocomplete:"none"}};r.prototype.getContainerConfig=function(){return{"sap.ui.mdc.valuehelp.Popover":{showArrow:true,showHeader:true,getContentWidth:function(){return"500px"},getFooter:function(){return this._retrievePromise("footer",()=>o(["sap/m/library","sap/m/Button"]).then(e=>{if(this.isDestroyStarted()){return null}const t=e[0];const{ButtonType:o}=t;const n=e[1];const i=new n(this.getId()+"-ok",{text:this._oResourceBundle.getText("valuehelp.OK"),enabled:"{$valueHelp>/_valid}",type:o.Emphasized,press:s.bind(this)});const l=new n(this.getId()+"-cancel",{text:this._oResourceBundle.getText("valuehelp.CANCEL"),press:this.fireCancel.bind(this)});return[i,l]}))}.bind(this)}}};r.prototype.onContainerClose=function(){if(this._oDefineConditionPanel){this._oDefineConditionPanel.cleanUp()}};function s(e){this.fireConfirm({close:true})}function a(e){let t=this.getConditions();if(this.getMaxConditions()===1){t=t.filter(e=>e.validated==="NotValidated")}this.fireSelect({type:n.Set,conditions:t})}return r});
//# sourceMappingURL=Conditions.js.map