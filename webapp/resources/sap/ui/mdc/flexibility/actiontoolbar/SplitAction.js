/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/changeHandler/SplitMenuButton"],t=>{"use strict";const e="sourceControl";const n={...t,applyChange:async function(n,a,o){if(o.modifier.targets!=="jsControlTree"){return Promise.reject(new Error("Split change can't be applied on XML tree"))}const r=n.getContent();const i=o.modifier;const s=o.view;const c=o.appComponent;const g=n.getDependentControl(e,o);const d=await i.getAggregation(g,"menu");const p=await i.getAggregation(d,"items");const l=i.getParent(g);const u=i.getParent(l);const m=await i.getParentAggregationName(l,u);const w=await i.findIndexInParentAggregation(l);const b={parentAggregation:m,insertIndex:w,insertedActions:[]};const A=r.newElementIds;await p.reduce(async(e,n,a)=>{await e;const o=a;const r=A[o];const g=await i.createControl("sap.ui.mdc.actiontoolbar.ActionToolbarAction",c,s,r);const p=await i.createControl("sap.m.Button",c,s,{...r,id:r.id+"--button"});await i.insertAggregation(g,"action",p,0);b.insertedActions.push(r);const l="$sap.m.flexibility.SplitButtonsModel";const v=await i.createControl("sap.ui.fl.util.ManagedObjectModel",c,s,Object.assign({},r,{id:r.id+"-managedObjectModel"}),{object:n,name:l});await i.insertAggregation(p,"dependents",v,0,s);i.bindProperty(p,"text",l+">/text");i.bindProperty(p,"icon",l+">/icon");i.bindProperty(p,"enabled",l+">/enabled");i.bindProperty(p,"visible",l+">/visible");const C=await i.createControl("sap.ui.core.CustomData",c,s,Object.assign({},r,{id:r.id+"-customData"}),{key:{path:l+">key"},value:{path:l+">value"}});await i.bindAggregation(p,"customData",{path:l+">/customData",template:C,templateShareable:false});p.attachEvent("press",{selector:i.getSelector(n,c),appComponentId:c.getId(),menu:d},t.pressHandler);return i.insertAggregation(u,m,g,w+o,s)},Promise.resolve());await i.removeAggregation(u,m,l);await i.insertAggregation(u,"dependents",l,0,s);n.setRevertData(b);return Promise.resolve()},revertChange:async function(t,n,a){const o=a.modifier;const r=t.getRevertData();const i=t.getDependentControl(e,a);const s=a.appComponent;const c=a.view;const g=o.getParent(i);const d=o.getParent(g);const p=r.parentAggregation;const l=r.insertIndex;const u=[];r.insertedActions.forEach(t=>{u.push(o.bySelector(t,s,c))});await u.reduce(async(t,e)=>{await t;await o.removeAggregation(d,p,e);return o.destroy(e)},Promise.resolve());await o.insertAggregation(d,p,g,l,c);t.resetRevertData()}};return n},true);
//# sourceMappingURL=SplitAction.js.map