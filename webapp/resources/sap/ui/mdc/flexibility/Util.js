/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/mdc/util/loadModules","sap/m/p13n/Engine","sap/base/Log"],(e,n,t)=>{"use strict";const a={};a.APPLY="apply";a.REVERT="revert";function i(e){const n=e&&e.getUIArea&&e.getUIArea();if(n&&!e._bInvalidationSuppressed){e._bInvalidationSuppressed=n.suppressInvalidationFor(e)}}function r(e){const n=e&&e.getUIArea&&e.getUIArea();if(n&&e._bInvalidationSuppressed){n.resumeInvalidationFor(e);delete e._bInvalidationSuppressed}}function o(e,a){if(e.isA){n.getInstance().trace(e,{selectorElement:e,changeSpecificData:{changeType:a.getChangeType(),content:a.getContent()}});if(!e._pPendingModification&&e._onModifications instanceof Function){e._pPendingModification=n.getInstance().waitForChanges(e).then(async()=>{const t=n.getInstance().getTrace(e);n.getInstance().clearTrace(e);delete e._pPendingModification;n.getInstance().fireStateChange(e);await e._onModifications(t);r(e)}).catch(n=>{t.error(`Error during mdc flex handling: ${n}`);r(e)})}}}a.getModule=function(e){return new Promise((n,t)=>{sap.ui.require([e],n,t)}).then(e=>e)};a.getMdcResourceText=function(e,n){return a.getModule("sap/ui/core/Lib").then(t=>t.getResourceBundleFor("sap.ui.mdc").getText(e,n))};a.createChangeHandler=function(n){const c=n.apply instanceof Function&&n.apply;const s=n.revert instanceof Function&&n.revert;const g=n.complete instanceof Function&&n.complete;if(!c||!s){throw new Error("Please provide atleast an apply and revert function!")}return{changeHandler:{applyChange:function(e,n,s){i(n);return c(e,n,s,a.APPLY).then(()=>{o(n,e)}).catch(e=>{t.error(`Error during mdc flex handling - change appliance: ${e}`);r(n);throw e})},completeChangeContent:function(e,n,t){if(g){g(e,n,t)}},revertChange:function(e,n,c){i(n);return s(e,n,c,a.REVERT).then(()=>{o(n,e)}).catch(e=>{t.error(`Error during mdc flex handling - change appliance: ${e}`);r(n);throw e})},onAfterXMLChangeProcessing:function(n,t){return t.modifier.getProperty(n,"delegate").then(a=>{if(a){return e(a.name).then(e=>{const a=e[0];if(a.onAfterXMLChangeProcessing instanceof Function){a.onAfterXMLChangeProcessing(n,t)}})}})},getCondenserInfo:n.getCondenserInfo,getChangeVisualizationInfo:n.getChangeVisualizationInfo},layers:{USER:true}}};return a});
//# sourceMappingURL=Util.js.map