/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element","sap/ui/fl/changeHandler/Base","./Util"],(e,t,n)=>{"use strict";return{createChanges:function(t,n){const r=n.filter(t=>!e.getElementById(t.id));const i={};return r.reduce((e,t)=>{if(!i[t.id]){i[t.id]=true;e.push(t)}return e},[]).map(e=>({selectorElement:t,changeSpecificData:{changeType:"createItem",content:{selector:e.id}}}))},createItem:n.createChangeHandler({apply:(e,t,n)=>{const r=e.getContent().selector;return Promise.resolve().then(()=>{t.getModel();return n.modifier.getProperty(t,"metadataHelperPath")}).then(e=>new Promise((t,n)=>{sap.ui.require(["sap/ui/mdc/link/PanelItem",e],(e,n)=>{t(n)},e=>{n(e)})})).then(e=>{const i=n.modifier;if(i.bySelector(r,n.appComponent,n.view)){return undefined}const o=e.retrieveAllMetadata(t);let a;const c=function(e,t){let n=-1;t.some((t,r)=>{if(t.getId()===e){n=r;return true}});return n};const s=i.getControlIdBySelector(r,n.appComponent);return Promise.resolve().then(i.getAggregation.bind(i,t,"items")).then(e=>{a=-1;let t=null;o.some(n=>{const r=c(n.id,e);if(r>-1){a=r}if(n.id===s){t=n;return true}});if(!t){return undefined}return i.createControl("sap.ui.mdc.link.PanelItem",n.appComponent,n.view,t.id,{text:t.text,description:t.description,href:t.href,internalHref:t.internalHref,target:t.target,icon:t.icon,visible:false})}).then(e=>i.insertAggregation(t,"items",e,a+1))})},revert:(e,n,r)=>{const i=r.modifier;if(e.getContent()&&e.getContent().selector){const o=e.getContent().selector.id;const a=i.bySelector(o,r.appComponent,r.view);if(!a){return t.markAsNotApplicable("revertChange of createItem: the item with id "+o+" is not existing and therefore can not be removed.",true)}return Promise.resolve().then(i.removeAggregation.bind(i,n,"items",a))}return undefined},complete:(e,t,n)=>{if(t.content){const r=n.modifier.getSelector(t.content.selector,n.appComponent);e.setContent({selector:r})}}})}},true);
//# sourceMappingURL=Panel.flexibility.js.map