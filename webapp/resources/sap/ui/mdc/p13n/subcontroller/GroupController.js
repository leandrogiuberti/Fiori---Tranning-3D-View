/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./SelectionController","sap/ui/core/Lib","sap/ui/mdc/p13n/P13nBuilder","sap/m/p13n/GroupPanel"],(t,e,o,n)=>{"use strict";const r=t.extend("sap.ui.mdc.p13n.subcontroller.GroupController");r.prototype.getStateKey=function(){return"groupLevels"};r.prototype.getUISettings=function(){return{tabText:e.getResourceBundleFor("sap.ui.mdc").getText("p13nDialog.TAB_Group"),title:e.getResourceBundleFor("sap.ui.mdc").getText("group.PERSONALIZATION_DIALOG_TITLE")}};r.prototype.getDelta=function(e){return t.prototype.getDelta.apply(this,arguments)};r.prototype.initAdaptationUI=function(t){const e=new n;const o=this.mixInfoAndState(t);const r=this.getAdaptationControl();if(r.isA("sap.ui.mdc.Table")&&r._isOfType("ResponsiveTable")){e.setQueryLimit(1)}e.setP13nData(o.items);this._oPanel=e;return Promise.resolve(e)};r.prototype.model2State=function(){const t=[];this._oPanel.getP13nData(true).forEach(e=>{if(e.grouped){t.push({name:e.name})}});return t};r.prototype.getChangeOperations=function(){return{add:"addGroup",remove:"removeGroup",move:"moveGroup"}};r.prototype._getPresenceAttribute=function(){return"grouped"};r.prototype.mixInfoAndState=function(t){const e=this.getCurrentState();const n=o.arrayToMap(e);const r=this.getAdaptationControl();const i=r.getAggregateConditions?r.getAggregateConditions()||{}:{};const p=this.prepareAdaptationData(t,(t,e)=>{const o=n[e.name];t.grouped=!!o;t.position=o?o.position:-1;return!(e.groupable===false||i[e.name])});o.sortP13nData({visible:"grouped",position:"position"},p.items);p.presenceAttribute=this._getPresenceAttribute();p.items.forEach(t=>{delete t.position});return p};return r});
//# sourceMappingURL=GroupController.js.map