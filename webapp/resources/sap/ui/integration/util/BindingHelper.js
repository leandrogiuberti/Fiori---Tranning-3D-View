/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/BindingParser","sap/base/util/extend","sap/base/util/isPlainObject","sap/ui/integration/formatters/DateTimeFormatter","sap/ui/integration/formatters/NumberFormatter","sap/ui/integration/formatters/TextFormatter","sap/ui/integration/bindingFeatures/DateRange","sap/ui/integration/formatters/InitialsFormatter"],function(e,t,r,n,i,a,f,s){"use strict";function o(e){if(typeof e!=="string"){return false}return/\Wsize\(/.test(e)}var u=/\{\{([^}]+)\}\}/g,p=/\{\{(parameters\.[^}]+)\}\}/g,d=/\{\{(dataSources\.[^}]+)\}\}/g;var c={};var l={date:n.date,dateTime:n.dateTime,currency:i.currency,float:i.float,integer:i.integer,percent:i.percent,text:a.text,unit:i.unit,initials:s.initials};c.mLocals={format:l,dateRange:f};c.extractBindingInfo=function(r,n){r=c.escapeCardPlaceholders(r);let i=e.complexParser(r,undefined,true,undefined,undefined,undefined,t({},c.mLocals,n));if(o(r)){const e=i;if(e==="true"){i=true}else if(e==="false"){i=false}else if(e==="null"){i=null}else if(e==="undefined"){i=undefined}else if(!Number.isNaN(Number(e))){i=Number(e)}}return i};c.createBindingInfos=function(e,t){if(!e){return e}if(Array.isArray(e)){return e.map(function(e){return c.createBindingInfos(e,t)})}if(r(e)){var n={};for(var i in e){n[i]=c.createBindingInfos(e[i],t)}return n}if(typeof e==="string"){var a=c.extractBindingInfo(e,t);if(o(e)){return a}return c.escapeParametersAndDataSources(a||e)}return e};c.formattedProperty=function(e,r){if(e===undefined){return e}var n={};if(Array.isArray(e)){n.parts=e.map(function(e){return typeof e==="object"?t({},e):{value:e}});n.formatter=r}else if(typeof e==="object"){n=t({},e);if(e.formatter){var i=n.formatter;n.formatter=function(){var e=i.apply(this,arguments);return r(e)}}else{n.formatter=r}}else{n={value:e,formatter:r}}return n};c.escapeCardPlaceholders=function(e){if(typeof e!=="string"){return e}return e.replace(u,"\\{\\{$1\\}\\}")};c.escapeParametersAndDataSources=function(e){if(typeof e!=="string"){return e}return e.replace(p,"\\{\\{$1\\}\\}").replace(d,"\\{\\{$1\\}\\}")};c.isAbsolutePath=function(e){const t=e.split(">");if(t.length>1){return t[1].startsWith("/")}return t[0].startsWith("/")};c.prependRelativePaths=function(e,r){if(!e){return e}if(c.isBindingInfo(e)){var n=t({},e);if(n.path){n.path=c.prependPath(n.path,r)}if(n.parts){n.parts=n.parts.map(function(e){return c.prependRelativePaths(e,r)})}return n}if(Array.isArray(e)){return e.map(function(e){return c.prependRelativePaths(e,r)})}if(typeof e==="object"){var i={};for(var a in e){i[a]=c.prependRelativePaths(e[a],r)}return i}return e};c.prependPath=function(e,t){if(typeof e!=="string"){return e}const r=c.getModelName(e);let n=e;if(e===""||c.getModelName(t)===r&&!c.isAbsolutePath(e)){let i=e;if(r){i=e.replace(new RegExp("^"+r+">"),"")}const a=t.endsWith("/")?t:t+"/";n=a+i}return n};c.propagateModels=function(e,r){var n=t({},e.oPropagatedProperties.oModels,e.oModels),i=Object.keys(n),a=e.getModel();if(a){r.setModel(a)}i.forEach(function(t){if(t==="undefined"){return}var n=e.getModel(t);if(n){r.setModel(n,t)}})};c.reuse=function(e){if(typeof e==="object"){return t({},e)}return e};c.isBindingInfo=function(e){if(!e){return false}return e.hasOwnProperty("path")||e.hasOwnProperty("parts")&&(e.hasOwnProperty("formatter")||e.hasOwnProperty("binding"))};c.getModelName=function(e){if(typeof e!=="string"){return undefined}const t=e.split(">");if(t.length>1){return t[0].trim()}return undefined};return c});
//# sourceMappingURL=BindingHelper.js.map