/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/Dialog","sap/ui/Device","sap/ui/core/Element","sap/ui/integration/library","sap/ui/integration/util/BindingHelper","sap/ui/dom/jquery/Focusable"],(e,t,a,n,i)=>{"use strict";const o=n.CardDataMode;function r(e,t){const a=t.getDomRef().getBoundingClientRect();const n={top:Math.round(a.top)+window.scrollX,left:Math.round(a.left)+window.scrollX,width:Math.round(a.width),height:Math.round(a.height)};e.attachBeforeClose(()=>{const t=e.getDomRef();t.classList.add("sapUiIntCardDialogAnimate");t.style.top=n.top+"px";t.style.left=n.left+"px"});e.addEventDelegate({onAfterRendering:()=>{const t=e.getDomRef();if(!e.isOpen()){t.classList.add("sapUiIntCardDialogAnimate");t.style.top=n.top+"px";t.style.left=n.left+"px"}const a=e=>{if(["left","right"].includes(e.propertyName)){t.classList.remove("sapUiIntCardDialogAnimate");t.removeEventListener("transitionend",a)}};t.addEventListener("transitionend",a)}})}function s(e,t){const a=t.getCardHeader();if(!a){return}i.propagateModels(a,a);e.setCustomHeader(a);t.setAssociation("dialogHeader",a);a.setProperty("headingLevel","1");a.setProperty("focusable",false);a.setVisible(true)}function l(e,t){t.addEventDelegate({onAfterRendering:()=>{t.getDomRef().removeAttribute("role");t.getDomRef().removeAttribute("aria-labelledby")}});e.addEventDelegate({onAfterRendering:()=>{const t=e.getCustomHeader();if(!t){return}e.getDomRef().setAttribute("aria-labelledby",t.getTitleId())}})}function d(a,n,i){a.setDisplayVariant("Large");a.setDataMode(o.Active);a.addStyleClass("sapUiIntCardDialogCard");n.setBusy(true).setBusyIndicatorDelay(750);const d=new e({content:[a],contentWidth:i.width,verticalScrolling:false,horizontalScrolling:false,draggable:true,resizable:true,escapeHandler:function(e){a.hide();e.resolve()},afterOpen:()=>{n.setBusy(false)},afterClose:()=>{d.destroy()}});d.addStyleClass("sapUiIntCardDialog");n.addDependent(d);a.attachEvent("_ready",()=>{s(d,a);l(d,a);if(!a._isComponentCard()){d.open()}a.getCardContent()?.onOpenInDialog();g(a,d)});if(!t.system.phone){r(d,n)}a.attachManifestReady(()=>{if(a._isComponentCard()){d.open()}});a.startManifestProcessing();return d}function g(e,t){var a=e.getAggregation("_filter"),n=e.getAggregation("_content"),i=e.getAggregation("_footer"),o;o=a&&a.$().firstFocusableDomRef()||n&&n.$().firstFocusableDomRef()||i&&i.$().firstFocusableDomRef();if(o){t.setInitialFocus(o.id);o.focus()}}function f(e,t){let n;if(t._cardId){n=a.getElementById(t._cardId)}else{n=e._createChildCard(t)}return d(n,e,t)}return f});
//# sourceMappingURL=openCardDialog.js.map