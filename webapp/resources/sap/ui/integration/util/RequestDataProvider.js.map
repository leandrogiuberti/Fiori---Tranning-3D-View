{"version":3,"file":"RequestDataProvider.js","names":["sap","ui","define","Element","DataProvider","Log","ODataUtils","fetch","deepClone","isPlainObject","RETRY_STATUS_CODES","aModes","aMethods","mDataTypeHeaders","json","xml","combineUrlAndParams","sUrl","oParameters","sParamsString","Object","entries","map","oParam","encodeURIComponent","indexOf","join","isJsonResponse","oResponse","sContentType","headers","get","isXmlResponse","RequestDataProvider","extend","metadata","library","properties","allowCustomDataType","type","defaultValue","associations","host","multiple","prototype","init","apply","this","arguments","_retryDueExpiredToken","destroy","_iRetryAfterTimeout","clearTimeout","getLastResponse","_lastResponse","getData","oRequestConfig","_getResolvedRequestConfiguration","pRequestChain","Promise","resolve","_oDestinations","process","_oCsrfTokenHandler","then","replacePlaceholders","bind","_fetch","catch","_handleExpiredToken","triggerDataUpdate","getResolvedConfiguration","oConfiguration","_reviveFormData","oResolvedConfiguration","getConfiguration","request","parameters","FormData","oError","isExpiredToken","markExpiredTokenByRequest","_bActive","_waitDependencies","sMessage","url","error","reject","getAllowCustomDataType","dataType","sDataType","mHeaders","mBatchRequests","batch","vBody","sMethod","method","toUpperCase","startsWith","_getRuntimeUrl","includes","_encodeParameters","oBatchSerialized","serializeBatchRequest","values","body","assign","oRequest","options","mode","Headers","withCredentials","credentials","set","_modifyRequestBeforeSent","_isValidRequest","_request","vResult","vData","_deserializeBatchResponse","bNoRetry","fnFetch","_getFetchMethod","bIsDestroyed","ok","text","sResponseText","aError","status","statusText","_retryRequest","JSON","parse","toString","window","DOMParser","parseFromString","oRequestConfiguration","_hasHeader","stringify","URLSearchParams","iRetryAfter","_getRetryAfter","warning","setTimeout","vRetryAfter","retryAfter","Number","isInteger","match","parseInt","oCard","getCardInstance","oExtension","getAggregation","oHost","getElementById","getHost","sResource","mOptions","_cloneRequestConfiguration","oFormData","oClonedConfiguration","sHeader","rValue","sKey","toLowerCase","test","sResponseBody","aBatchResponses","deserializeBatchResponse","aKeys","keys","mResult","forEach","iInd","mResponse","Response","responseText","modifyRequestHeaders","fromEntries","modifyRequest","getDetails"],"sources":["RequestDataProvider-dbg.js"],"mappings":"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","ignoreList":[]}