/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./BaseFactory","sap/base/Log","sap/base/util/isEmptyObject","sap/ui/integration/cards/actions/CardActions","sap/ui/integration/cards/actions/NavigationAction","sap/ui/integration/library","sap/ui/integration/cards/NumericHeader","sap/ui/integration/cards/Header","sap/ui/integration/controls/HeaderInfoSectionRow","sap/ui/integration/controls/HeaderInfoSectionColumn","sap/ui/integration/util/Utils","./ObjectStatusFactory","sap/m/AvatarImageFitType","sap/f/library"],function(t,e,a,i,s,r,n,o,c,u,p,l,f,d){"use strict";var y=r.CardActionArea;var m=r.CardActionType;var g=r.CardDisplayVariant;var S=d.cards.SemanticRole;var h=t.extend("sap.ui.integration.util.HeaderFactory");h.prototype.create=function(t,s){if(a(t)){e.warning("Card sap.card/header entry in the manifest is mandatory","sap.ui.integration.widgets.Card");return null}var r=this._oCard,c=r.getId()+"-header",u=r.getOpener(),l,f;t=this.createBindingInfos(t,r.getBindingNamespaces());if(r.isCompactHeader()){t.type=""}switch(t.type){case"Numeric":f=n.create(c,t,s,r._oIconFormatter);break;default:f=o.create(c,t,s,r._oIconFormatter);break}f.setCard(r);if(t.status&&t.status.text&&t.status.text.format){l=p.getStatusTextBindingInfo(t.status.text.format,f);if(l){f.bindProperty("statusText",l)}}f.setServiceManager(r._oServiceManager);f.setDataProviderFactory(r._oDataProviderFactory);f._setDataConfiguration(t.data);if(r.isTileDisplayVariant()){this._setTileDisplayDefaults(f,t)}else if(r.isHeaderDisplayVariant()){this._setHeaderDisplayDefaults(f,t)}var d=new i({card:r});d.attach({area:y.Header,enabledPropertyName:"interactive",actions:t.actions,control:f});f._oActions=d;if(u){f.setProperty("focusable",false);f.setProperty("headingLevel","1")}if(r.getSemanticRole()===S.ListItem&&!f.isInteractive()){f.setProperty("focusable",false)}f.applySettings({infoSection:h._createInfoSection(t,d)});return f};h.prototype._setTileDisplayDefaults=function(t,e){t.setProperty("useTileLayout",true);t.setProperty("useTooltips",true);const a=this._oCard;const i=[g.TileFlat,g.TileFlatWide].indexOf(a.getDisplayVariant())>-1;if(!e.titleMaxLines){t.setTitleMaxLines(i?1:2)}if(!e.icon?.fitType){t.setIconFitType(f.Contain)}if(i){t.setIconSize("XS");if(t.isA("sap.f.cards.NumericHeader")){t.setNumberSize("S")}if(!e.subtitleMaxLines&&!e.subTitleMaxLines){t.setSubtitleMaxLines(1)}}if(t.isA("sap.f.cards.NumericHeader")){t.getSideIndicators().forEach(t=>{t.setProperty("useTooltips",true)})}const r=e.actions&&e.actions[0];const n=r?.parameters?.url;const o=r?.parameters?.target;if(r?.type===m.Navigation&&n){t.applySettings({href:n,target:o||s.DEFAULT_TARGET,interactive:true})}};h.prototype._setHeaderDisplayDefaults=function(t,e){const a=this._oCard;t.setProperty("useTooltips",true);if(a.isCompactHeader()){t.setProperty("useTooltips",true);t.setIconSize("XS");t.setTitleMaxLines(1);t.setSubtitleMaxLines(1);t.setStatusVisible(false);return}const i=a.isSmallHeader();if(!e.titleMaxLines){t.setTitleMaxLines(i?1:2)}if(i){if(t.isA("sap.f.cards.NumericHeader")){t.setIconSize("XS");t.setNumberSize("S")}if(!e.subtitleMaxLines&&!e.subTitleMaxLines){t.setSubtitleMaxLines(1)}}if(t.isA("sap.f.cards.NumericHeader")){t.getSideIndicators().forEach(t=>{t.setProperty("useTooltips",true)})}};h._createInfoSection=function(t,e){const a=[];const i=t.infoSection;(i?.rows||[]).forEach(t=>{a.push(h._createRow(t,e))});return a};h._createRow=function(t,e){const a=[];const i=[];(t.items||[]).forEach(t=>{a.push(h._createStatusItem(t,e))});(t.columns||[]).forEach(t=>{i.push(h._createColumn(t,e))});return new c({justifyContent:t.justifyContent,columns:i,items:a})};h._createColumn=function(t,e){const a=[];const i=[];(t.items||[]).forEach(t=>{a.push(h._createStatusItem(t,e))});(t.rows||[]).forEach(t=>{i.push(h._createRow(t,e))});return new u({rows:i,items:a})};h._createStatusItem=function(t,e){const a=l.createStatusItem(t);e.attach({area:y.Header,actions:t.actions,control:a,enabledPropertyName:"active"});return a};return h});
//# sourceMappingURL=HeaderFactory.js.map